# StackOverflow 问答 16157000-16157999

# angularjs - 将控制器传递给指令 - AngularJS

> ID：16157010
> 
> 赞同：0
> 
> 时间：2013-04-22T21:25:39.677
> 
> 标签：angularjs, angularjs-directive

我有一个简单的场景，我想弄清楚。

我有一个控制器（绑定到一个对话框）。控制器看起来像这样：

```
app.controller('fullCtrl', function ($scope, $dialog, $http, $log, apiService, stateService, promiseData, dialog, leaf, CONST) {
...
} 
```

对话框上的 ui 元素之一是使用指令呈现的画布：

```
<div leaf-graph structure=structure></div>
app.directive('leafGraph', ['$timeout',  function (timer, $log) {
...
} 
```

问题是我正在寻找一种指令与控制器交互的方式，因此当用户单击指令时，控制器会将自身重新绑定到新数据。

基本上，这一切都在 javascript 端完成，用户双击画布上的某些区域，它应该触发控制器上的一些操作。

有没有办法将控制器传递给指令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:42:24.320

您已经可以访问指令中的 $scope，包括您在该范围内定义的任何控制器函数。这是一个示例：[Egghead.io - 与控制器对话的指令](http://www.egghead.io/video/LJmZaxuxlRc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T01:12:20.687

值得注意的是，在 ng-repeat 循环中使用 $apply 的指令会导致“错误：$digest 已经在进行中”。

至少有两种其他方法似乎可以代替，而不会产生该错误。

*   这个允许将参数传递给命名函数：

    scope.$eval(attrs.repeatDone);

用法：

```
<div ng-repeat="feed in feedList" repeat-done="layoutDone($index)"> or
<div ng-repeat="feed in feedList" repeat-done="layoutDone()"> 
```

*   这个只需要函数名，不需要“（）”或传递参数：

    范围[attrs.repeatDone]();

用法：

```
<div ng-repeat="feed in feedList" repeat-done="layoutDone"> 
```

指令：

```
.directive('onEnter', function() {
    return function(scope, element, attrs) {
        element.on('keydown', function(event) {
            if (event.which === 13) {
                scope.$eval(attrs.onEnter);
            }
        })
    }
}) 
```

# mysql - Mysql - 正确排序 Facebook 帖子、评论和回复

> ID：16157013
> 
> 赞同：0
> 
> 时间：2013-04-22T21:26:00.387
> 
> 标签：mysql, sql

似乎无法为此找到一个好的答案。我目前有两张桌子，一张是 Facebook 帖子，另一张是评论。我现在需要添加回复，因为 FB 最近这样做了。

我当前的查询从帖子中选择并加入评论。我希望对回复做的是在评论中添加另一个条目，但带有父 ID。无论我最终遇到什么查询，我都希望结果如下所示：

```
postID commentID parentID
1
2      1
2      2         1
2      3         1
3      4 
```

所以帖子 1 没有评论，帖子 2 有一条评论，对该评论有两条回复，而帖子 3 只有一条评论。在我的评论表中，评论 1-4 都是同一个表中的单独条目。有没有办法用一个查询来做这件事，而不必再加入评论表？

编辑，当前查询。此查询不处理回复，仅针对帖子和一级评论。

```
select facebookFeeds.*, facebookComments.userID, facebookComments.name, facebookComments.message as cMessage, facebookComments.createdTime as cCreatedTime from facebookFeeds left join facebookComments on facebookFeeds.id = facebookComments.feedID where facebookComments.accountID= 24 order by createdTime desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:37:13.663

我想通了，让它在 order 子句中使用 if 。唯一的缺点是父评论 ID 必须小于其回复的数字。否则，回复将显示在父评论之前。收到数据时，回复在评论之后，所以应该没问题。

```
select facebookFeeds.*, facebookComments.id as cID, parentID, facebookComments.userID, facebookComments.name, facebookComments.message as cMessage, facebookComments.createdTime as cCreatedTime from facebookFeeds left join facebookComments on facebookFeeds.id = facebookComments.feedID where facebookComments.accountID = 24 order by facebookFeeds.createdTime desc, if(parentID is null, cID, parentID) 
```

# ember.js - Ember.js - 过滤的模型更改不会触发渲染模板的更改

> ID：16157024
> 
> 赞同：2
> 
> 时间：2013-04-22T21:27:06.767
> 
> 标签：ember.js, ember-router

我有一个打印预订列表的应用程序。有2条路线：

```
reservations.allReservations

reservations.newReservations 
```

**问题：**

allReservations 路线运行良好。如果预订被删除或添加，它会自动反映在页面上。但是， newReservations 路由不会在更改时刷新 - 但是，如果我重新加载页面，更改就在那里。

**设置：**

两者的主要区别在于路由模型字段。对于 allReservation 路线，它是：

```
App.Reservations.all(); 
```

对于 newReservation 路线，它是：

```
App.Reservations.all().filterProperty('isNew',true); 
```

应用程序模型和数据存储设置为在[TodoMVC 应用程序的 Ember.js 版本中](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)。

路线：

```
App.ReservationsNewReservationsRoute = Em.Route.extend({

model: function(){
       return App.Reservation.all().filterProperty('isNew', true);
    },

    renderTemplate: function(){
       this.render('reservationList');
    },
}); 
```

控制器：

```
App.ReservationsNewReservationsController = Ember.ArrayController.extend({

    isEmpty: function() { 
        return this.get( 'length' ) == 0;
    }.property( '@each.length', '@each.isNew'),

}); 
```

模板reservationList.hbs：

```
{{#if isEmpty}}
    <li>
        <div class="text-center" style="height: 40px; margin: auto 0;">
            <label>No Reservations!</label>
        </div>
    </li>
{{/if}}
{{#each controller}}
   ... print reservations ...
{{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:35:53.350

为了使用过滤数组，我认为你必须使用

```
model: function(){
   return App.Reservations.filter(function(reservation){
     return reservation.get('isNew') === true;
   });
}); 
```

它返回一个实时的 FilteredRecordArray，当商店中加载了新的预订时更新。

当您使用 filterProperty() 时，您会丢失 FilteredRecordArray，然后生成的数组将不存在。

由于您没有使用 ember-data，因此您必须手动维护过滤器。我认为可能有办法做到这一点。

最简单的方法是在控制器上添加一个计算属性，该属性将返回过滤后的内容，并使用`App.reservations.all()` 显然在模板中填充模型，您将使用类似的`{{#each controller.filteredContent}}` 东西：

```
App.ReservationsNewReservationsController = Ember.ArrayController.extend({

  isEmpty: function() { 
    return this.get( 'filtered.length' ) == 0;
  }.property('filtered.length'),

  //will be evaluated each time a reservation is added/removed, 
  //or each time a reservation's isNew property changed.
  filteredContent: function(){
     return this.get('content').filterProperty('isNew', true);
  }.property('@each.isNew')
}); 
```

另一种解决方案可能是在 Reservation 模型上添加过滤器方法，并在商店中保持一致。

# jakarta-ee - 在现有系统上引入资源包（以支持不同语言）的好方法是什么？

> ID：16157025
> 
> 赞同：0
> 
> 时间：2013-04-22T21:27:07.750
> 
> 标签：jakarta-ee, spring-mvc, localization, java-7, resourcebundle

我们有一个 15 年前构建的遗留应用程序系统，我们仍在使用它。我们的系统只支持英文。但是，现在我们正在开发一个新项目，该项目应该使用现有系统的某些部分，但还需要具有显示其他语言的功能。

对于这个项目 web 项目，我们使用 Spring MVC、Java 7 和 MySql。我们从未使用过它，但听说过资源包。我们是否应该定义要在属性文件中显示的每件事（每种语言 1 个文件）并在运行时根据语言使用此属性文件。我们有很多枚举需要在用户界面上显示。

您建议我们使用什么来支持英语以外的语言？它可以是资源包或任何其他方法。

我感谢您的帮助。

**更新**我们现在只支持 2 种语言，包括英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:12:19.107

现有系统，满足资源束。资源包，满足现有系统...

除了所有的笑话，解决方案将取决于您的应用程序。它是基于 Web 的 JSP 应用程序、Swing 客户端还是其他什么？

对于简单的非 Web 应用程序，[这里](http://www.mkyong.com/spring/spring-resource-bundle-with-resourcebundlemessagesource-example/)是一个使用 Spring 的[ResourceBundleMessageSource](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/context/support/ResourceBundleMessageSource.html)的简单示例。这是一个相当老的例子，但基本思想是你设置一些[MessageSource](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/context/MessageSource.html)，然后使用 MessageSource 来获取消息。

如果这是一个使用 JSP 的 Web 应用程序，那么您将更改所有 JSP 以使用 Spring JSTL 标记 spring:message（或非弹簧 fmt:message，但我认为这会限制您的选择）在任何需要使用的地方国际化字符串。同样，您需要一些 MessageSource 设置，Spring 会自动神奇地找到您的 MessageSource 并使用它。它仍然遵循相同的模式：定义 MessageSource，向 MessageSource 请求消息……它只是使用 JSTL 标记来完成繁重的工作。

有几个 MessageSource 选项可用。最简单的方法是像上面的示例一样使用 .properties 文件。我发现这很难维护，所以在我们的应用程序中，我们用我们自己的实现替换了 MessageSource，我们称之为 JdbcMessageSource，它扩展了[AbstractMessageSource](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/context/support/AbstractMessageSource.html)。基本上，它使用一个表来读取消息并提供这些消息的缓存。

# html - 来自网络服务器的“CSS3111：@font-face 遇到未知错误”；从本地文件系统浏览时正常工作

> ID：16157028
> 
> 赞同：3
> 
> 时间：2013-04-22T21:27:13.667
> 
> 标签：html, css, web, iis-6, font-face

我正在开发的网页的 CSS 中有这个嵌入的字体：

```
@font-face {
    font-family: 'myfont';
    src: url('fonts/myfont.eot');
    src: url('fonts/myfont.woff') format('woff'), url('fonts/myfont.ttf') format('truetype'), url('fonts/myfont.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

在 CSS 文件中，我使用以下字体：

```
#finder-entry-container h1
    {
        font-family:'myfont', Sans-Serif;
        font-size:28px;
        color:white;
        font-weight:normal
    } 
```

当我在网页上使用这种字体时，它在 Chrome 和 Firefox 中呈现得非常好。但是，在 IE 中我收到此错误：

> CSS3111：@font-face 遇到未知错误。
> 我的字体.eot

更陌生；从本地文件系统浏览时，页面呈现得很好（我正在使用一个简单的 HTML 文件来解决这个问题。）

有没有其他人遇到过这样的问题？我知道字体工作正常，因为我可以从本地文件系统浏览它们，所以我认为这不是文件转换问题。我的网络服务器正在运行 IIS 6；我检查了所有字体的标题，这些是它们返回的 MIME 类型：

> `myfont.eot`退货`application/octet-stream`
> `myfont.woff`退货`application/font-woff`
> `myfont.ttf`退货`application/octet-stream`
> `myfont.svg`退货`image/svg+xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:35:49.997

移入目录时，请包含 ./ 以移入字体目录

尝试像这样格式化您的@font-face 声明...

```
 @font-face {
font-family: 'myfont';
src: url('./fonts/myfont.eot'); /* IE9 Compat Modes */
src: url('./fonts/myfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('./fonts/myfont.woff') format('woff'), /* Modern Browsers */
     url('./fonts/myfont.ttf')  format('truetype'), /* Safari, Android, iOS */
     url('./fonts/myfont.svg#svgFontName') format('svg'); /* Legacy iOS */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T06:52:24.723

根据[Github Font Awesome Wiki](https://github.com/FortAwesome/Font-Awesome/wiki/Troubleshooting#fonts-not-rendering-properly-running-windows-10)，解决方案是“删除所有出现的

```
?v=4.x.y 
```

来自 font-awesome.css 中的@font-face 属性”。如果您使用的是 LESS，则意味着更改 /less/fa/path.less 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T09:53:45.323

`'?#iefix'`后面加上`.eot`

```
src: url('myfont.eot?#iefix') format('embedded-opentype'); 
```

# jquery - 使用 CoffeeScript 为多个 jQuery 对象设置相同的点击

> ID：16157033
> 
> 赞同：0
> 
> 时间：2013-04-22T21:27:37.420
> 
> 标签：jquery, coffeescript

我正在使用基于[Jack Moore 文章](http://www.jacklmoore.com/notes/jquery-modal-tutorial/)的叠加层滚动我自己的模式。我一直在使用 CoffeeScript 而不是直接的 JS 来解决它。我将让覆盖点击与关闭按钮点击做同样的事情，我正在寻找一种优雅的 DRY 方法。

我已经看到多个 jQuery[对象](https://stackoverflow.com/a/1313404/740044)如何使用 .add 共享相同的点击，并且我在 CoffeeScript 中使用了这种方法来做同样的事情并且它有效，但我想知道是否有更好或更正确的方法来做到这一点?

```
# close the modal if you click the close button or overlay
$overlay.add($close).click (event) =>
  event.preventDefault()
  @closeModal() 
```

我以为我看到了列出用逗号分隔的对象然后附加了 .click() 的东西，可能把我看到的东西混在一起了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:55:32.160

逗号是选择器字符串中的[多重选择器，因此您可以说](http://api.jquery.com/multiple-selector/)

```
$('#this, .that') 
```

在一个选择器*字符串*中组合多个选择器。所以这些具有相同的效果：

```
$a = $('#this').add($('.that'))
$b = $('#this, .that') 
```

但是你没有选择器字符串，你已经有了你感兴趣的 jQuery 对象，所以这[`add`](http://api.jquery.com/add/)是要走的路。

# javascript - 如何使 listview li-element/item 更小？如何改变图像和文本的高度？

> ID：16157035
> 
> 赞同：0
> 
> 时间：2013-04-22T21:27:48.727
> 
> 标签：javascript, jquery, html, jquery-mobile

我想将 li 元素（listview-item）的高度更改为更小并在垂直中心设置两个文本标题？

![在此处输入图像描述](https://i.stack.imgur.com/c7hzN.jpg)

```
<ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
   <li data-role="list-divider" class="mid">Neue News</li>
   <li>
      <a href="">
        <img src="news.png" height="40px"/>
        <h2>Title</h2>
        <p>Subtitle</p>
      </a>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:10:26.103

也许是这样的：

[http://jsfiddle.net/TgkKf/6/](http://jsfiddle.net/TgkKf/6/)

```
<ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
   <li data-role="list-divider" class="mid">Neue News</li>
   <li class="newsLink">
  <a href="">
    <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTy-aBig-8SnIgGIlBOWmy_yMPLTIhXvB77apn5LoHoP1M7k6SCag" height="20px" />
        <div class="wrapperDiv">
            <h2>Title</h2>
            <br />
            <div style="font-size:8px;">Subtitle</div>
        </div>
      <div style="clear:both;"></div>
  </a>

   </li>
<li>
    asdf
</li>
</ul> 
```

CSS

```
.newsLink
{
    vertical-align:text-top;
}

.newsLink h2
{
   font-size:10px;
}

.newsLink .wrapperDiv
{
    line-height:10px;
    float:left;
}

.newsLink .wrapperDiv div
{
 float:left;   
}

.newsLink img
{
    float:left;
}

.newsLink h2
{
    float:left;
    padding:0;
    margin:0;
}
.newsLink div
{
    padding:0;
    margin:0;
} 
```

# lisp - “包 GLUT 不存在”，即使在 Arch Linux 中安装了 cl-opengl

> ID：16157045
> 
> 赞同：1
> 
> 时间：2013-04-22T21:28:38.330
> 
> 标签：lisp, common-lisp, glut, slime, sbcl

我已经用 SLIME 配置了 emacs，以便在 Arch Linux 上使用 Common Lisp (sbcl) 进行开发。问题是，我现在也想开始使用 OpenGL，所以我安装了 cl-opengl 来提供必要的绑定。我还在 .local/share/common-lisp 上设置了一个到 /usr/share/common-lisp 的符号链接（我应该能够以这种方式使用 ASDF 加载所有系统）。

但是，当我尝试在 SLIME 中编译以下代码时（使用 Cc Ck）

```
(require :asdf)                 ; need ASDF to load other things
(asdf:load-system :cl-opengl)   ; load OpenGL bindings
(asdf:load-system :cl-glu)      ; load GLU bindings
(asdf:load-system :cl-glut)     ; load GLUT bindings

(defclass my-window (glut:window)
  ()
  (:default-initargs :width 400 :height 300
                     :title "My Window Title"
                     :x 100 :y 100
                     :mode '(:double :rgb :depth)))

(defmethod glut:display-window :before ((win my-window))
  (gl:shade-model :smooth)        ; enables smooth shading
  (gl:clear-color 0 0 0 0)        ; background will be black
  (gl:clear-depth 1)              ; clear buffer to maximum depth
  (gl:enable :depth-test)         ; enable depth testing
  (gl:depth-func :lequal)         ; okay to write pixel if its depth
                                  ; is less-than-or-equal to the
                                  ; depth currently written
                                  ; really nice perspective correction
  (gl:hint :perspective-correction-hint :nicest)
)

(defmethod glut:display ((win my-window))
  (gl:clear :color-buffer-bit :depth-buffer-bit)
  (gl:load-identity))

(defmethod glut:reshape ((win my-window) width height)
  (gl:viewport 0 0 width height)  ; reset the current viewport
  (gl:matrix-mode :projection)    ; select the projection matrix
  (gl:load-identity)              ; reset the matrix

  ;; set perspective based on window aspect ratio
  (glu:perspective 45 (/ width (max height 1)) 1/10 100)
  (gl:matrix-mode :modelview)     ; select the modelview matrix
  (gl:load-identity)              ; reset the matrix
)

(glut:display-window (make-instance 'my-window)) 
```

我收到以下错误：

```
READ error during COMPILE-FILE:
Package GLUT does not exist. 
```

即使 cl-glut.asd 存在于 /usr/share/common-lisp/systems 中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:51:18.017

`ASDF:LOAD-SYSTEM`直到加载时间才生效，因为它是一个简单的函数。如果您希望效果在编译时发生，则必须将其包装在一个`eval-when`表单中。但是最好编写一个系统定义，而不是`:depends-on`那些其他系统。

# java - javax.mail.MessagingException：无法通过 netbeans 本地连接到 SMTP 主机

> ID：16157046
> 
> 赞同：0
> 
> 时间：2013-04-22T21:28:47.107
> 
> 标签：java, tomcat, iis-7, smtp, netbeans-7

我知道关于这个话题有很多问题，并且在过去的 4 个月里我一直在寻找答案。每个人都说检查主机地址、端口和防火墙。好吧，我已经完成了这些项目，但仍然没有任何成功。

我们正在使用 Apache Tomcat 7.0.27 通过 Netbeans 7.2.1 在本地运行我们的 Web 应用程序，并且不再能够连接到 SMTP 服务器来发送电子邮件。在位于服务器上的虚拟机上运行应用程序时，连接没有问题。我们在本地使用相同参数的 telnet 连接和发送邮件没有问题。

我们尝试查看服务器上的 SMTP 日志，并且能够访问一些日志，但找不到与拒绝连接相关的任何日志。哪些 SMTP 日志会提供有关此问题的更多信息？我倾向于认为，由于连接被拒绝，它甚至可能不会触发任何日志记录，这是一个正确的假设吗？我们几个月前迁移到 IIS7 并且无法访问 IIS 6.0 管理器，所以我不确定它们是否设置正确。

有没有人对如何进一步解决连接问题有任何想法？

提前谢谢你，如果我能提供任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:28:48.873

几乎可以肯定，这是您本地计算机上的防火墙或防病毒程序的问题。如果您可以使用 telnet 从该机器进行连接，但无法使用 Java 应用程序从该机器进行连接，则该机器上的某些东西阻止了 Java 应用程序的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T09:30:48.000

我最近在运行邮件发送代码时遇到了同样的问题，我发现我最近编写的代码使用的是 Java 版本 Jre7。但是旧代码在 Jre 6 环境中运行，即使现在也可以完美运行。

所以我所做的只是将我最近代码的 Jre 版本更改为 Jre 6。之后代码可以完美运行，没有任何异常。

所以尝试改变你的运行环境以降低 Jre 并运行代码。

# jquery - Joomla 的模态窗口删除 id 和类名

> ID：16157055
> 
> 赞同：1
> 
> 时间：2013-04-22T21:29:07.160
> 
> 标签：jquery, mootools, joomla2.5, squeezebox

我在模块中有一个表单，我想出现在模态窗口中。根据 id 窗口可能是空白的，或者如果它确实显示任何内容，所有类和 id 都被删除，所以我无法验证或设置表单样式。

截断代码：...

```
 <div id="feedback">
    <div class="feedbackinner">
      <!-- form module  -->
        <div id="contact-wrapper">
          <!--form elements with ids and classes-->
        </div>
      <!-- end module -->
    </div><!-- end .feedbackinner -->
  </div><!-- end #feedback --> 
```

这会触发没有任何 id 或类的模式窗口（使用 Firefox Web Developer 大纲当前元素）：

```
<a href="#contact-wrapper" class="modal" rel="{handler: 'clone', clone: 'contact-wrapper'}">Click for ugly unstyled form that won't validate</a> 
```

这会触发一个空白模式窗口：

```
<a href="#feedback" class="modal" rel="{handler: 'clone', clone: 'feedback'}">Click if you like staring at a blank white box</a> 
```

所以最重要的是如何将所有 id 和类保存在模态窗口中，为什么调用父 div 不起作用？

（作为一种解决方法，我将表单移动到组件视图，然后使用`handler: 'iframe'`而不是克隆来调用它。我仍然想知道模态窗口发生了什么。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:28:52.773

没有看到代码，但`Element.clone`在元素上使用的含义是显而易见的。就 HTML 的本质而言，`id`它是独一无二的。这意味着您实际上不应该同时将多个具有相同 id 的元素注入 DOM。

MooTools 通过从任何创建克隆的元素中隐式删除 id 来正确反映情绪：

[https://github.com/mootools/mootools-core/blob/master/Source/Element/Element.js#L860](https://github.com/mootools/mootools-core/blob/master/Source/Element/Element.js#L860)

该`.clone`方法接受允许您覆盖内容的可选参数：

`clone: function(contents, keepid){`- 参见[http://mootools.net/docs/core/Element/Element#Element:clone](http://mootools.net/docs/core/Element/Element#Element:clone)。

克隆的元素也会丢失您可能分配给它们的所有事件（但`cloneEvents`可以提供帮助）。

我建议查看squeezebox 实现并仔细检查克隆是否以预期的方式实现。更好的做法可能是采用并重新附加元素 - 或复制整个 innerHTML（尽管这将再次导致非委托事件失败）。

# highcharts - 在 Highstock 图表的 ALL 视图中日期变得不正确？

> ID：16157057
> 
> 赞同：0
> 
> 时间：2013-04-22T21:29:16.347
> 
> 标签：highcharts, highstock

当我使用具有大量数据的 Highstock 图表并且 xAxis 是日期并将视图设置为 ALL 时，所有日期似乎都偏离了 1 天。

我知道这一点，因为我有一个处理程序，当我单击一个点时，它会显示日期。在大视图中，日期相差 1，但在较小的视图中，例如“1D”或“1m”视图（日/月），日期再次正确。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:24:55.307

它与启用的数据分组有关，所以我建议禁用它。[http://api.highcharts.com/highstock#plotOptions.series.dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)

# sql - SQL：引用一对多

> ID：16157058
> 
> 赞同：3
> 
> 时间：2013-04-22T21:29:19.430
> 
> 标签：sql, join, reference

我遇到了一些人称之为相当奇怪的问题/问题。

假设我有一个表，它可能引用许多不同的其他表中的一个（并且只有一个）。我将如何以**最好**的方式做到这一点？我正在寻找一种适用于大多数数据库（MS SQL、MySQL、PostgreSQL 等）的解决方案。在我看来，有几种不同的解决方案（比另一个更好吗？）：

1.  为每个可能的参考设置一列。这些列中只有一个可能包含任何给定行的值，所有其他列都为空。允许严格的外键，但是当“许多”（可能引用的表）的数量变大时会变得乏味
2.  具有两列关系，即一列“描述”引用哪个表，一列引用实​​例（该表中的行）。当“许多”（引用表）的数量增加时，可以轻松扩展，尽管我不能以直接的方式执行单个查询查找（左连接所有可能的表，或者联合多个查询，每个查询连接一个表）
3.  ??

说得通？在这种情况下，最佳做法（如果有）是什么？我特别希望能够从被引用的实体中查询数据，而无需真正知道正在引用哪些表。

你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:43:19.777

Both of these methods are suitable in any relational database, so you don't have to worry about that consideration. Both result in rather cumbersome queries. For the first method:

```
select . . .
from t left outer join
     ref1
     on t.ref1id = ref1.ref1id left outer join
     ref2
     on t.ref2id = ref2.ref2id . . . 
```

For the second method:

```
select . . .
from t left outer join
     ref1
     on t.anyid = ref1.ref1id and anytype = 'ref1' left outer join
     ref2
     on t.anyid = ref2.ref2id and anytype = 'ref2' . . . 
```

So, from the perspective of query simplicity, I don't see a major advantage for one versus the other. The second version has a small disadvantage -- when writing queries, you have to remember what the name is for the join. This might get lost over time. (Of course, you can use constraints or triggers to ensure that only a fixed set of values make it into the column.)

From the perspective of query performance, the first version has a major advantage. You can identify the column as a foreign key *and* the database can keep statistics on it. This can help the database choose the right join algorithm, for instance. The second method does not readily offer this possibility.

From the perspective of data size, the first version requires storing the id for each of the possible values. The second is more compact. From the perspective of maintainability, the first is hard to add a new object type; the second is easy.

If you have a set of things that are similar to each other, then you can consider storing them in a single table. Attributes that are not appropriate can be NULLed out. You can even create views for the different flavors of the thing. One table may or may not be an option.

In other words, there is no right answer to this question. As with many aspects of database design, it depends on how the data is going to be used. Absent other information, I would probably first try to coerce the data into a single table. If that is just not reasonable, I would go with the first option if the number of tables can be counted on one hand, and the second if there are more tables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:47:33.970

## 1)

这对于少量静态表是合法的。如果您预计将来可能需要添加许多新表，请查看下面的**3)** ...

## 2)

请不要那样做。您将丧失声明性 FOREIGN KEY，这是维护数据完整性的最重要机制之一。

## 3)

使用继承。这篇文章中的更多信息：

*   [对于可以由两个不同资源拥有并因此需要两个不同外键的数据库表的最佳设计是什么？](https://stackoverflow.com/a/13317463/533120)

您可能还有兴趣查看：

*   [在数据库中实现评论和点赞](https://stackoverflow.com/a/8113064/533120)
*   [多重一对多关系设计](https://stackoverflow.com/a/12475854/533120)
*   [如何避免多个表表到关系M：M？](https://stackoverflow.com/a/10912254/533120)
*   [数据库表设计思路](https://stackoverflow.com/a/11556750/533120)
*   [关联两个数据库表（将员工与活动相关联）](https://stackoverflow.com/a/10097124/533120)
*   [如何在数据库中构造表活动？](https://stackoverflow.com/a/11462181/533120)

# vb.net - 需要新的描述算法

> ID：16157059
> 
> 赞同：-1
> 
> 时间：2013-04-22T21:29:21.710
> 
> 标签：vb.net, modulo

校验位计算

字母表中的数字和字母被赋值。0 - 9 是 0 - 9。A - Z 是 10 - 35，空格是 36。

示例字符串：CA5B9AJ1564...

计算：
C = 12
A = 10
5 = 5
B = 11
9 = 9
A = 10
J = 19
1 = 1
5 = 5
6 = 6
4 = 4

每个 Value 从 36 到 1 以降序相乘，如下：
36 * 12 = 432
35 * 10 = 350
34 * 5 = 170
33 * 11 = 363
32 * 9 = 288
31 * 10 = 310
30 * 19 = 570
29 * 1 = 29
28 * 5 = 140
27 * 6 = 162
26 * 4 = 104

=2918

2918 然后除以 37 = 78 R 32
从被除数中减去 32 的余数 = 37 - 32 =
5 是校验位

我需要帮助将上述算法转换为 vb.net 中的一系列嵌套循环或私有子程序。我想使用 Mod 运算符，因为我们现在在公司使用的公式减少了 3。我在 Excel 中手动运行了 3 个不同的字符串。
当前代码：（使用测试字符串关闭 3）

```
Private Function CheckDigit37(ByVal FieldString As String)
        Dim String36Value As Integer
        Dim PositionIndex As Integer
        Dim LastPosition As Integer
        Dim CharIndex As Integer
        Dim CharString As String
        Dim Value37 As Long
        Dim Remainder As Long
        Dim CheckDigitValue As Integer
        Dim CheckDigit As String = " "

        If FieldString = "" Then
            Return False
        Else
            FieldString = FieldString.ToUpper
            String36Value = RoundUp(FieldString.Length / 36)
        End If

        For PositionIndex = 1 To String36Value
            If FieldString.Length = 36 Then
                LastPosition = 36
            ElseIf PositionIndex < String36Value Then
                LastPosition = 36
            Else
                LastPosition = FieldString.Length - 36 * (PositionIndex - 1)
            End If

            For CharIndex = 1 To LastPosition
                CharString = Mid(FieldString, CharIndex + (PositionIndex - 1) * 36, 1)
                'If CharString = "" Then GoTo EndLoop
                Select Case CharString
                    Case 0
                        Value37 = Value37 + 0 * (37 - CharIndex)
                    Case 1
                        Value37 = Value37 + 1 * (37 - CharIndex)
                    Case 2
                        Value37 = Value37 + 2 * (37 - CharIndex)
                    Case 3
                        Value37 = Value37 + 3 * (37 - CharIndex)
                    Case 4
                        Value37 = Value37 + 4 * (37 - CharIndex)
                    Case 5
                        Value37 = Value37 + 5 * (37 - CharIndex)
                    Case 6
                        Value37 = Value37 + 6 * (37 - CharIndex)
                    Case 7
                        Value37 = Value37 + 7 * (37 - CharIndex)
                    Case 8
                        Value37 = Value37 + 8 * (37 - CharIndex)
                    Case 9
                        Value37 = Value37 + 9 * (37 - CharIndex)
                    Case "A"
                        Value37 = Value37 + 10 * (37 - CharIndex)
                    Case "B"
                        Value37 = Value37 + 11 * (37 - CharIndex)
                    Case "C"
                        Value37 = Value37 + 12 * (37 - CharIndex)
                    Case "D"
                        Value37 = Value37 + 13 * (37 - CharIndex)
                    Case "E"
                        Value37 = Value37 + 14 * (37 - CharIndex)
                    Case "F"
                        Value37 = Value37 + 15 * (37 - CharIndex)
                    Case "G"
                        Value37 = Value37 + 16 * (37 - CharIndex)
                    Case "H"
                        Value37 = Value37 + 17 * (37 - CharIndex)
                    Case "I"
                        Value37 = Value37 + 18 * (37 - CharIndex)
                    Case "J"
                        Value37 = Value37 + 19 * (37 - CharIndex)
                    Case "K"
                        Value37 = Value37 + 20 * (37 - CharIndex)
                    Case "L"
                        Value37 = Value37 + 21 * (37 - CharIndex)
                    Case "M"
                        Value37 = Value37 + 22 * (37 - CharIndex)
                    Case "N"
                        Value37 = Value37 + 23 * (37 - CharIndex)
                    Case "O"
                        Value37 = Value37 + 24 * (37 - CharIndex)
                    Case "P"
                        Value37 = Value37 + 25 * (37 - CharIndex)
                    Case "Q"
                        Value37 = Value37 + 26 * (37 - CharIndex)
                    Case "R"
                        Value37 = Value37 + 27 * (37 - CharIndex)
                    Case "S"
                        Value37 = Value37 + 28 * (37 - CharIndex)
                    Case "T"
                        Value37 = Value37 + 29 * (37 - CharIndex)
                    Case "U"
                        Value37 = Value37 + 30 * (37 - CharIndex)
                    Case "V"
                        Value37 = Value37 + 31 * (37 - CharIndex)
                    Case "W"
                        Value37 = Value37 + 32 * (37 - CharIndex)
                    Case "X"
                        Value37 = Value37 + 33 * (37 - CharIndex)
                    Case "Y"
                        Value37 = Value37 + 34 * (37 - CharIndex)
                    Case "Z"
                        Value37 = Value37 + 35 * (37 - CharIndex)
                    Case " "
                        Value37 = Value37 + 36 * (37 - CharIndex)
                    Case Else
                        Value37 = Value37 + 0 * (37 - CharIndex)
                End Select
            Next
        Next

        Remainder = Value37 - Int(Value37 / 37) * 37
        CheckDigitValue = 37 - Remainder

        Select Case CheckDigitValue
            Case 0
                CheckDigit = 0
            Case 1
                CheckDigit = 1
            Case 2
                CheckDigit = 2
            Case 3
                CheckDigit = 3
            Case 4
                CheckDigit = 4
            Case 5
                CheckDigit = 5
            Case 6
                CheckDigit = 6
            Case 7
                CheckDigit = 7
            Case 8
                CheckDigit = 8
            Case 9
                CheckDigit = 9
            Case "10"
                CheckDigit = "A"
            Case "11"
                CheckDigit = "B"
            Case "12"
                CheckDigit = "C"
            Case "13"
                CheckDigit = "D"
            Case "14"
                CheckDigit = "E"
            Case "15"
                CheckDigit = "F"
            Case "16"
                CheckDigit = "G"
            Case "17"
                CheckDigit = "H"
            Case "18"
                CheckDigit = "I"
            Case "19"
                CheckDigit = "J"
            Case "20"
                CheckDigit = "K"
            Case "21"
                CheckDigit = "L"
            Case "22"
                CheckDigit = "M"
            Case "23"
                CheckDigit = "N"
            Case "24"
                CheckDigit = "O"
            Case "25"
                CheckDigit = "P"
            Case "26"
                CheckDigit = "Q"
            Case "27"
                CheckDigit = "R"
            Case "28"
                CheckDigit = "S"
            Case "29"
                CheckDigit = "T"
            Case "30"
                CheckDigit = "U"
            Case "31"
                CheckDigit = "V"
            Case "32"
                CheckDigit = "W"
            Case "33"
                CheckDigit = "X"
            Case "34"
                CheckDigit = "Y"
            Case "35"
                CheckDigit = "Z"
            Case "36"
                CheckDigit = " "
            Case "37"
                CheckDigit = "0"
        End Select

        Return CheckDigit
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:47:10.907

如果我正确阅读了您的问题和代码，听起来您想为给定字符串生成检查字符串值（即，如果为 1，则检查值为 1，如果为 B，则检查值为 11）。我不完全确定您提出的代码会编译（我没有尝试过），但是通过使用 ASCII 表和`Chr`and`Asc`函数，您可以大大减少此代码。

0 - 9 的 ASCII 值是 48 - 55，A - Z 的 ASCII 值是 65 - 90。从第一组中减去 48 并从第二组中减去 55 将匹配您的算法应用的值。

与其做一堆舍入和字符串操作，我认为一次循环一个字符，做必要的操作，然后将结果转换为校验位的相应值会更容易。像这样的东西：

```
Private Function CheckDigit37(ByVal FieldString As String) As String

    Dim CharIndex As Integer = 36
    Dim Value37 As Long
    Dim CheckDigitValue As Integer
    Dim CheckDigit As String = ""
    ' This will hold the character we're currently evaluating
    Dim C As Char

    FieldString = FieldString.ToUpper()

    For i As Integer = 0 To FieldString.Length - 1

        ' If CharIndex has reached 0 and we still have characters left,
        ' change it back to 36
        If (CharIndex = 0) Then
            CharIndex = 36
        End If

        ' Get the next character in the string
        C = FieldString(i)

        If (IsNumeric(C)) Then
            ' Subtract 48 from the ASCII value to get the algorithm value
            Value37 = Value37 + (CharIndex * (Asc(C) - 48))
        ElseIf (Asc(C) >= 65 AndAlso Asc(C) <= 90) Then
            ' Subtract 55 from the ASCII value to get the algorithm value
            Value37 = Value37 + (CharIndex * (Asc(C) - 55))
        ElseIf (Asc(C) = 32) Then
            ' We have a space (ASCII 32)
            Value37 = Value37 + (CharIndex * 36)
        End If

        ' Decrease the CharIndex by 1
        CharIndex = CharIndex - 1
    Next

    CheckDigitValue = 37 - (Value37 Mod 37)

    If (CheckDigitValue <= 9) Then
        ' We have a number
        CheckDigit = Chr(CheckDigitValue + 48)
    ElseIf (CheckDigitValue = 36) Then
        ' We have a space
        CheckDigit = Chr(32)
    Else
        ' We have A - Z
        CheckDigit = Chr(CheckDigitValue + 55)
    End If

    Return CheckDigit
End Function 
```

这为您的示例提供了 5 的值。

我还使用了更长的字符串“CA5B9AJ15642ACKUQ02DA023MSAEWDSE924ADSCAA21”，得到的 CheckDigitValue 为 21，CheckDigit 为“L”。

# sharepoint-2013 - Sharepoint 2013 基于声明的身份验证和 Azure ACS - Windows Live Id 重定向回登录

> ID：16157063
> 
> 赞同：2
> 
> 时间：2013-04-22T21:29:32.997
> 
> 标签：sharepoint-2013

我在通过 Windows Azure ACS 进行基于声明的身份验证时遇到问题。我已经建立了我信任的关系，并且可以在我的 Sharepoint 2013 网站中看到它们。我已经设置了要使用的 Google 和 Windows Live。当我使用我的 Google 帐户登录时，一切都按预期工作，我被定向到网站主页。但是，每次我尝试我的 Windows Live 帐户时，它都会每次都重定向回登录页面而没有错误。

肯

# html - JQuery - 提交后单选按钮 CSS 不刷新

> ID：16157065
> 
> 赞同：2
> 
> 时间：2013-04-22T21:29:38.427
> 
> 标签：html, css, jquery, twitter-bootstrap

我有一个带有 twitter 引导按钮的表单，如下所示

```
 <label class="control-label span3">Status of the Dispute? </label>
<div class="controls span7">
<label class="inline radio">  
<input type="radio" id="status" name="status" value="Continue"/> Continue</label>
<label class="inline radio">
 <input type="radio" id="status"  name="status" value="Resolved"/>Resolved</label>
<label class="inline radio">
<input type="radio" id="status"  name="status" value="Referred"/> Referred</label>
 <label for="status" class="error">Please tell us the dispute status</label>
</div>
</div> 
```

提交后，表单成功提交数据并刷新除单选按钮之外的所有其他元素。

我搜索了各种选项，并出现了 prop 功能。它在某种程度上帮助了我，因为它取消了内部的选择器。用户页面上的 CSS 样式表仍保持选中状态。

```
 $('input[name="status"]').prop('checked', false); 
```

我也试过这个想法

```
$('input:not(:checked)').parent().removeClass("inline radio"); 
```

但它仍然没有成功。

我的完整提交代码如下：

```
$.validator.setDefaults({

  submitHandler: function(form) {

            $.post('registermyform.php',
            $("#registermyform").serialize(),
            function(data) 
            {
            $('#results').html(data);   
            if (data="yes"){
             alert("The new Dispute has been successfully submitted!");
               $('#registerDispute')[0].reset();

                $('input[name="status"]').prop('checked', false);       

               $('input:checked').parent().removeClass("inline radio");

            }
            else    {
            alert("not submitted!");
                    } 
            });
        }
}); 
```

请协助。我想删除单选按钮的 CSS，这样它就不会出现，好像它没有被选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:03:34.707

您需要遍历元素以将它们全部重置：

```
var $items = $('input[name="status"]');
for (var i = 0; i < $items.length; i++) {
    $($items[i]).prop('checked', false);
} 
```

# java - Restlet 不支持 POST 请求中的 JSON

> ID：16157066
> 
> 赞同：1
> 
> 时间：2013-04-22T21:29:41.397
> 
> 标签：java, python, json, post, restlet

我们正在创建一个小项目，其中我们将flask 作为前端和基于restlet 的WebService。

我们尝试将登录数据作为 JSON 从烧瓶发送到 restlet：

```
def login():
    error = None
    if request.method == 'POST':
        payload = {'username' : request.form['username'], 'password' : request.form['password']}
        headers = {'Content-Type': 'application/json'}
        req = requests.post(WEBSERVICE_IP + '/login', data=json.dumps(payload), headers=headers)
        (...) 
```

基于 Flask 的网站正在大喊：

```
ValueError: No JSON object could be decoded 
```

我们不知道如何协调烧瓶和restlet之间的通信。

**编辑（格林威治标准时间 22-04 晚上 10:08）**：我发现回复是：

```
<html>
(...)
Unsupported Media Type
The server is refusing to service the request because the entity of the request is in a format not supported by the requested resource for the requested method
(...)
</html> 
```

**编辑（格林威治标准时间 22-04 晚上 11:26）**：我仍然不确定为什么，但我认为它可能是 JSON 格式的东西。在更正我的代码以便它发送正确的 JSON（说 JSONLint）之后，我仍然收到相同的消息。有人知道如何在 Python 中创建 JSONObject 吗？WebService 有方法：

```
@Post("json")
public JSONObject verifyAccount(JSONObject dane){ 
```

**编辑（格林威治标准时间 23-04 下午 7:26）**：好的。所以我们几乎可以肯定这是不可见标题的问题。任何人都可以确认这里在 python 代码中创建的标头是正确的吗？

**编辑（格林威治标准时间 24-04 下午 5:40）**：问题仍然存在。正如其他一些建议，我将请求更改回 urllib2。这有助于解决第一件事——“价值问题”。现在浏览器有

```
urllib2.HTTPError
HTTPError: HTTP Error 415: Unsupported Media Type 
```

现在发布请求：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
    error = None
    if request.method == 'POST':
        payload = {"Login": request.form['username'],
            "Haslo": request.form['haslo']}
        data = json.dumps(payload)
        clen = len(data)
        req = urllib2.Request(WEBSERVICE_IP + '/login', data,
            {'Content-Type': 'application/json', 'Content-Length': clen})
        f = urllib2.urlopen(req)
        response = f.read()
        f.close() 
```

**编辑（格林威治标准时间 24-04 下午 6:20）**：

![Wireshark 捕获了 POST 请求，看起来没问题。](https://i.stack.imgur.com/18U7k.jpg)

Wireshark 捕获了 POST 请求，看起来没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:31:53.663

如果`data`是字典，Requests 会将其序列化。你想传递一个字符串：

```
import json

req = requests.post(WEBSERVICE_IP + '/login', data=json.dumps(payload), ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:55:31.590

行。解决方案比我想象的要容易。

问题出在 WebService 方面。它是通过将 JSONObject 更改为 JsonRepresentation 来解决的：

```
@Post("json")
public JSONObject verifyAccount(JsonRepresentation data){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T21:36:01.417

除了 Blender 的观点（这更可能是罪魁祸首），值得一提的是 content-type 应该设置为`application/json`而不是`json`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T10:28:23.687

要添加危害响应，我必须编辑`@Post("json")`为`@Post("application/json")`：

```
@Post("application/json")
public JSONObject verifyAccount(JsonRepresentation data){ 
```

# php - 如何获取整个 YouTube 视频描述、php、gdata

> ID：16157069
> 
> 赞同：3
> 
> 时间：2013-04-22T21:29:52.083
> 
> 标签：php, youtube-api

我的 php 代码使用 YouTube api、标题、视频 url、观看次数、视频日期、最后评论日期和描述的前 160 个字符正确检索。我似乎无法弄清楚如何获得整个描述。我知道它在检索到的 xml 中，因为我已经转储了它。那么为什么我只得到 160 个字符呢？

整个描述被截断为 157 个字符，并添加了“...”，因此当我回显它或 var_dump 它时，它是 160 个字符。这是我的完整测试代码（没有标题、视频网址等）。

```
<?php 
    $feedURL = 'http://gdata.youtube.com/feeds/api/videos?q=phone&v=2&fields=entry[yt:statistics/@viewCount > 10000]&start-index=1&max-results=1';
    $sxml = simplexml_load_file($feedURL);
    foreach ($sxml->entry as $entry) {
        $media = $entry->children('http://search.yahoo.com/mrss/');
        echo $media->group->description;
    }
?> 
```

这是页面上显示的内容：

免费的 TuTiTu 的游戏：[http](http://www.tutitu.tv/index.php/games) : //www.tutitu.tv/index.php/games 免费的 TuTiTu 的着色页面：[http](http://www.tutitu.tv/index.php/coloring) ://www.tutitu.tv/index.php/coloring加入我们的 Facebook：https...

当我以这种方式获取 xml 时：

gdata.youtube.com/feeds/api/videos/JI-5kh_4gO0?v=2&alt=json-in-script&callback=youtubeFeedCallback&prettyprint=true

整个描述如下所示：

```
"media$description": {
"$t": "FREE TuTiTu's Games: http://www.tutitu.tv/index.php/games\nFREE TuTiTu's Coloring pages at: http://www.tutitu.tv/index.php/coloring\nJoin us on Facebook: https://www.facebook.com/TuTiTuTV\nTuTiTu's T-Shirts: http://www.zazzle.com/TuTiTu?rf=238778092083495163\n\nTuTiTu - The toys come to life\n\nTuTiTu - \"The toys come to life\" is a 3D animated television show targeting 2-3 year olds. Through colorful shapes TuTiTu will stimulate the children's imagination and creativity. On each episode TuTiTu's shapes will transform into a new and exciting toy.",
"type": "plain"
}, 
```

我确定我缺少一些基本的东西，但是当我寻找解决方案时，我还没有找到它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:36:26.367

这 2 种不同类型的 API 请求将返回不同的描述大小。我认为这是一种限制总响应大小的方法。

1）进行搜索：`http://gdata.youtube.com/feeds/api/videos?q=phone&v=2&fields=entry&alt=json&prettyprint=true`将返回短视频描述。
2）做一个视频请求，如：`http://gdata.youtube.com/feeds/api/videos/JI-5kh_4gO0?v=2&alt=json&prettyprint=true`将返回长视频描述。

顺便说一句：api 版本 3 将允许您在 1 个请求中请求视频 ID 列表（以获取其详细描述）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:08:08.180

`$media->group->{'media$description'}`应该做的伎俩

# java - Java ServerSocket 在绑定到远程 IP 地址时抛出 IOException

> ID：16157070
> 
> 赞同：0
> 
> 时间：2013-04-22T21:30:00.777
> 
> 标签：java, serversocket

因此，我正在尝试绑定并监听我学校服务器上的一个端口，以便在我的网络课程中进行分配。我遇到的是，当我在 java 中创建 ServerSocket 时，我不断地得到一个 IOException，即使我尝试绑定到高频带上的端口也是如此。

我最初尝试绑定到 1088 端口（或多或少寄予厚望），但如果不成功，我将尝试绑定到 1024 以上的随机端口（服务器上保留任何更低的端口）。

这是我得到的：

```
import java.io.IOException;

import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.UnknownHostException;
import java.util.Random;

public class main 
{

    /**
     * @param args
     */
    public static void main(String[] args) 
    {
        Random r = new Random();
        boolean connected = true;
        ServerSocket serverSocket = null;
        int welcomePortNum = new Integer(args[0]);
        if(welcomePortNum >= 65536)
        {
            System.out.println("Invalid welcome port number, terminating execution.");
            System.exit(0);
        }

        do
        {
            connected = true;
            System.out.println(welcomePortNum);
            try
            {
                serverSocket = new ServerSocket(welcomePortNum, 5, InetAddress.getByName("loki.ist.unomaha.edu"));
            }   catch(UnknownHostException e)
            {
                System.err.println("Could not connect to 'loki.ist.unomaha.edu'.");
                connected = false;
                //System.exit(1);
            }catch(IOException e)
            {
                System.err.println("Could not get the I/O for the connection to loki.ist.unomaha.edu.");
                connected = false;
                //System.exit(1);
            }
            if(connected == false)
                welcomePortNum = r.nextInt(64512) + 1024;
            System.out.println(connected);
        }
        while(connected == false);
        // TODO Auto-generated method stub

    }

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:46:31.783

Java`ServerSockets`不会“连接到远程主机”。它们可以*绑定*到*本地*IP 地址，这就是您使用的构造函数的用途。

**编辑** 对作业的评论。

1.  第 2 步中的“关联 IP 地址”部分既不正确也没有必要，让您无法在家进行测试。除非您的服务器实际上在该主机上运行，​​否则他给您的指令可能无法工作，并且无论如何通常不会在服务器中完成。只需为 IP 地址参数传递 null，它允许套接字接受来自任何本地 IP 地址的连接，并添加链接到此答案的注释。正确的词不是“关联”而是“绑定”。如果作业使用了正确的术语，就不会出现“连接”和“绑定”之间的混淆。

2.  我也不明白第3步。在其中一个连接之前，没有客户端可以初始化其状态*，**然后*是初始化其状态的时间。我也不知道他所说的“将该连接标记为非活动”是什么意思。您所要做的就是关闭该客户端接受的 Socket。

3.  如果您按照建议使用线程，则第 4 步“等待事件”作为离散步骤是无法实现的。该函数分布在连接接受线程和所有连接处理线程上。

4.  我不认为你应该在这个阶段选择使用 select() 。我会在随后的作业中完成这项工作，部分原因是出于教学原因，部分原因是为了确保您同时学习两者。

# eclipse - 以详细模式运行 Eclipse

> ID：16157071
> 
> 赞同：0
> 
> 时间：2013-04-22T21:30:12.773
> 
> 标签：eclipse, eclipse-cdt, accurev

有什么方法可以在详细模式下运行 Eclipse CDT？当我想打开一个项目时，它需要很长时间才能完成（活动滚动条不断滚动）。我希望通过查看可能以详细模式生成的日志来深入了解该问题。

Eclipse 中是否有任何日志文件可以帮助解决此类问题？

编辑：另一个数据点是我最近开始使用 Accurev 版本控制，从那时起我在 Eclipse 中遇到了这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:42:15.200

问题可能是正在重建的工作区和其他启动活动（maven 重新索引、工作区重新索引、其他工具试图通过让您现在等待更长时间来稍后运行更快）占用了大量 CPU。尝试通过关闭未使用的项目或将一组相互关联的项目分解到单独的工作区中来限制工作区中打开的项目的数量。

我认为您不会对在工作区打开时初始化工具所需的时间产生任何影响，除非您可以减少或禁用您不需要的任何工具，或者减少这些工具所针对的项目数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T13:51:30.437

如果您认为这是问题的一部分，我还建议确保您使用 Eclipse for AccuRev 的最新插件。您也可以联系 AccuRev 支持，因为他们可能有其他工具来调查此类问题。

# asp.net-mvc - ASP MVC 3 - 使用键/值对填充 typeahead.js 下拉列表

> ID：16157077
> 
> 赞同：0
> 
> 时间：2013-04-22T21:31:00.667
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery

我正在尝试创建一个下拉列表，对于每个项目，在一行中列出代理名称和 ID，并在下面的行中列出一些辅助信息（就像您在[typeahead.js 演示页面](http://twitter.github.io/typeahead.js/)中看到的一样。

我试图通过将信息从我的 ASP MVC 控制器传递到我的视图来开始简单，然后显示一条信息（代理的名字）。当我逐步执行代码时，我可以看到我正确地创建了一个我需要的对象数组，然后顺利退出控制器方法。

其次，当我查看 Fiddler 中的请求时，我可以看到我需要的所有数据都以正确的格式返回。然而...

我也看过几乎所有教程，但我似乎无法弄清楚如何正确显示信息。

这是我最近的尝试。我正在简化事情，以便能够在数组中循环并选择一个项目进行显示。

查看代码

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript" src="http://blattchat.com/demos/typeahead/js/bootstrap-typeahead.js"></script>
<script type="text/javascript">
    $(document).ready(function ($) {
        // Workaround for bug in mouse item selection
        $.fn.typeahead.Constructor.prototype.blur = function () {
            var that = this;
            setTimeout(function () { that.hide() }, 250);
        };

        $('#typeahead').typeahead({
            source: function (term, process) {
                var url = '@Url.Content("~/Agent/GetAgents")';

                return $.getJSON(url, { term: term }, function (data) {

                    var agents = [];
                    var map = {};

                    $.each(data, function (i, agent) {
                        map[agent.FirstName] = agent;
                        agents.push(agent.FirstName);
                    });

                    return process(agents);
                });
            },
            select: function (event, ui) {
                $.post('@Url.Action("Details","Agent")', { id: atrVal });
            }
        });
    })
</script> 
```

来自控制器的代码

```
 public JsonResult GetAgents(string term)
    {

            term = term.ToUpper();

                var lastAgents = from l in db.Agent
                                 where l.FirstName.Contains(term) ||
                                       l.LastName.Contains(term)
                                 select new
                                            {
                                                Name = l.FirstName,
                                                SymetraNumber = l.SymetraNumber,
                                             };

                var corp2Agents = from c in db.Agent
                                  where c.CorporateName.Contains(term)
                                  select new
                                  {
                                      Name = c.CorporateName,
                                      SymetraNumber = c.SymetraNumber,
                                  };

                return new JsonResult()
                {
                    Data = (lastAgents.Union(corp2Agents).ToArray()),
                    JsonRequestBehavior = JsonRequestBehavior.AllowGet
                };
    } 
```

这是通过 Fiddler 返回的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/fBByl.png)

同样，我在 Visual Studio 或 Chrome 的调试器中都没有看到任何错误消息，所以我认为我只是没有在`jQuery`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T18:37:45.390

仅供参考：您使用的不是 typeahead.js，而是 bootstrap-typeahead.js。不同的动物。Bootstrap 和 Typeahead.js 都来自 Twitter。Bootstrap 3.0 已放弃对 bootstrap-typeahead.js 的支持，转而支持 typeahead.js。也许这就是你没有得到太多帮助的原因之一？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T21:47:02.473

修复了使用此语法

```
 $('#typeahead').typeahead({
            source: function (term, process) {
                var url = '@Url.Content("~/Agent/GetAgents")';
                var agents = [];
                map = {};

                return ($.getJSON(url, { term: term }, function (data) {
                    $.each(data, function (i, item) {
                        map[item.Name] = item;
                        agents.push(item.Name);
                    });

                    process(agents);
                }));
            }, 
```

# multithreading - PySide，从正在运行的程序打开一个新窗口

> ID：16157078
> 
> 赞同：0
> 
> 时间：2013-04-22T21:31:02.693
> 
> 标签：multithreading, widget, window, pyside

代码：

```
import sys
from PySide import QtGui

class BrowserDevelopment(QtGui.QMainWindow):

    def __init__(self):
        super(BrowserDevelopment, self).__init__()
        self.startingUI()

    def startingUI(self):

        self.setWindowTitle('Alphabrowser')
        self.resize(800, 400)
        self.statusBar()

        #Menueinstellungen an sich

        menue = self.menuBar()

        #Actions des Menues:
        #datei menue
        menuleiste_datei = menue.addMenu('File')

        datei_exit = QtGui.QAction('Exit', self)
        datei_exit.setStatusTip('Close the programm')
        menuleiste_datei.addAction(datei_exit)
        datei_exit.triggered.connect(self.close)

        #Einstellungen menue
        menuleiste_configurations = menue.addMenu('Configurations')

        configurations_settings = QtGui.QAction('Settings', self)
        configurations_settings.setStatusTip('Configurations(Settings)')
        menuleiste_configurations.addAction(configurations_settings)
        configurations_settings.triggered.connect(self.newwindow)

        self.show()

    def newwindow(self):
        wid = QtGui.QWidget()
        wid.resize(250, 150)
        wid.setWindowTitle('NewWindow')
        wid.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = BrowserDevelopment()
    sys.exit(app.exec_())

if __name__== '__main__':
    main() 
```

如果您单击“配置”，然后单击“设置”，则会弹出一个窗口，它确实如此。但它闪烁并消失。我试图添加第二个 sys.exit(app.exec_()) 但它没有定义，因为它在另一个方法中。我应该让应用程序全球化还是与所谓的“线程”有关？问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T13:06:17.020

您需要保留新窗口的参考。否则，它是未引用的，将被垃圾收集。

```
    定义新窗口（自我）：
        self.wid = QtGui.QWidget()
        self.wid.resize(250, 150)
        self.wid.setWindowTitle('NewWindow')
        self.wid.show()

```

虽然我不会在 newwindow 方法中创建引用。您最好在 UI 初始化方法中设置首选项窗口，然后调用 self.wid.show()

# javascript - Jquery 加载 Joomla 模板页面

> ID：16157082
> 
> 赞同：0
> 
> 时间：2013-04-22T21:31:40.377
> 
> 标签：javascript, jquery, joomla-template, joomla3.0

我有一个我正在设计的 Joomla 模板，但为了帮助提高整体吸引力/gui，我想预加载创建的帖子/页面/博客，并让它们动态加载到首页。Joomla 可以做到这一点吗？它适用于我已经创建的页面，但是如果该站点具有已创建的页面呢？本质上允许前端从动态创建的列表中加载随机页面。有没有办法从 joomla 动态获取所有页面/帖子的列表，并让 javascript/jquery 预加载这些页面，或者只在主站点上加载这些页面。

简化请求。一个单页网站，用作多页界面。因此，用户有一个设置控制界面选项，允许他们加载页面而无需每次实际刷新/加载每个页面。

想知道是否有任何 Stack Overflow 用户之前设置过类似的东西，并且可以提供一些关于他们是如何实现这一点的见解。我了解如何使用预页面进行预加载，但目标是根据创建的新页面动态加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:01:47.463

据我所知，要让它工作需要相当多的覆盖，因为 joomla 默认情况下不能“ajaxified”工作。我会查看 joomla 扩展目录，看看是否已经完成了类似的操作。默认情况下，模板可能会执行此操作（我在 wordpress 中看到过类似的内容）

[http://extensions.joomla.org/search?q=ajax](http://extensions.joomla.org/search?q=ajax)

有许多插件添加了 ajax 功能，但它们与您的目标的匹配程度可能是另一回事。

要自己编写代码，您需要 jQuery/JavaScript 知识并创建模板以通过 ajax 覆盖链接到调用页面并覆盖 joomla 的功能以阻止它在所有额外页面中包含页眉/页脚（只是您需要的 html）。

进一步深入需要相当长的时间。我建议寻找一个可以默认执行此操作的插件，这样您就不必花费太多时间来更改 joomla 加载页面的方式。

# winapi - GetTickCount 准确度

> ID：16157087
> 
> 赞同：0
> 
> 时间：2013-04-22T21:32:07.700
> 
> 标签：winapi

似乎在某些情况下，使用其中一个`GetTickCount`或`CTime::GetCurrentTime`（两个 Windows 编程）测量的时间差并不相等。

我说“似乎”，因为我不能确定我找到了问题的原因。但是，在[这个论坛](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)中，有人评论说“`GetTickCount`没有针对滞后进行调整，并且会滞后于从启动时间开始的系统时间增量”。

所以我想知道如果一台计算机已经运行了很长时间（一个月或几个），那么时间是否有可能`GetTickCount`会`GetCurrentTime`产生不同的值？

另外让我感到困惑的是以下行`WinBase.h`

```
#define GetCurrentTime() GetTickCount() 
```

那么`GetCurrentTime`还有`GetTickCount`不同的功能吗？

我尝试使用`QueryUnbiasedInterruptTime`模拟系统运行了很长时间，但没有成功。

# python - 下三角矩阵的前向替换。如何？

> ID：16157088
> 
> 赞同：1
> 
> 时间：2013-04-22T21:32:15.203
> 
> 标签：python, math, matrix, linear-algebra

不确定这是否是正确的地方，但这里是。

有谁知道以下代码如何解决 x`Lx=y`其中 L 和 y 分别是给定矩阵和向量的问题？

如果你知道，你能把它分解，并将每一步与你用笔和纸解决它的方法进行比较吗？

```
def forward(L, y):
    x = []
    for i in range(len(y)):
        x.append(y[i])
        for j in range(i):
            x[i]=x[i]-(L[i, j]*x[j])
        x[i] = x[i]/L[i, i]
    return x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:54:30.177

我假设您将矩阵表示为行列表（它们是列表） - 如果不是，只需在矩阵上使用 zip 函数，并将 y 作为元组。我还假设矩阵是正方形的，因为具有另一种形式的三角矩阵并没有真正的意义。

这个过程非常相似，就好像它是上三角形一样，除了你从顶部开始。

*   制作一个结果向量将具有的任何长度的空列表，并用零填充。
*   将列表与第一行点积，从 y 的第一个元素中减去结果，然后除以第一项的系数。
*   用最终结果替换原来空列表中的第一个元素
*   继续这样做，直到完成。

本质上，您通过点积所做的是将矩阵中的每个非零项替换为正确的值（您已经找到），然后将它们全部加起来。当您从另一端减去并除以第 n 行的第 n 项的系数时，您只是在求解。

（现在输入一个示例实现）。（假设您有一个采用点积的类或函数，如果您不这样做，实现起来应该不难）。（蟒蛇2.7）

```
def solve(m, y):
    v = [0 for i in xrange(len(m))]
    for i in xrange(len(m)):
        v[i] = (y[i] - v.dotProduct(m[i]))/float(m[i][i])

    return v 
```

# vb.net - 能够在 Visual Studio 2008 中使用 Web 服务，但不能在 2010 中使用

> ID：16157089
> 
> 赞同：0
> 
> 时间：2013-04-22T21:32:16.700
> 
> 标签：vb.net, visual-studio-2010, web-services, visual-studio-2008

我正在尝试使用 Visual Studio 2010 中用 Java (XFire) 创建的 Web 服务。该服务在 Visual Studio 2008 中运行没有问题。在这两种情况下，我都使用 Web 引用来访问服务。我也试过 svcutil.exe 生成 Web 服务使用者代码并遍历它，它仍然不会返回数据。

我可以访问 log4j 日志，但我没有看到导致 Java 端执行的调用。

有谁知道我是否在某处缺少设置？或者，如果在 2010 年通过 Web 引用使用 Web 服务更加严格。

在下面的代码中，rwsResponse 是一些东西，但在调用retrieveWorker 之后 rwsResponse.WorkerServiceResponse 是 Nothing：

```
Dim rwsService As New rws.WorkerService
Dim rwsResponse As New rws.retrieveWorkerResponse
Dim rwsRequest As New rws.retrieveWorker

rwsRequest.SearchOption = New rws.RetrieveKeyType()
rwsRequest.SearchOption.Items = New String() {userID}
rwsRequest.SearchOption.ItemsElementName = New rws.ItemsChoiceType() {rws.ItemsChoiceType.user_Id}

rwsResponse = rwsService.retrieveWorker(rwsRequest)

Dim rwsWorker As rws.EnterpriseWorkerType
Dim rwsMessage As rws.MessageType

If rwsResponse Is Nothing OrElse rwsResponse.WorkerServiceResponse Is Nothing Then
    Throw New Exception(String.Format("retrieveWorkerService:WorkerServiceResponse is null{0}userID:{1}", vbCrLf, userID))
End If 
```

奇怪的是这段代码在 Visual Studio .NET 2008 中运行良好。2008 和 2010 都针对这个应用程序的 3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:52:32.543

尝试使用引用 Web 服务的旧方法。当您执行“添加服务引用”时，在出现的对话框中，单击按钮左角的“高级”按钮，然后单击添加 Web 引用。

# ruby-on-rails - 远程 Heroku 应用程序崩溃；当地很好

> ID：16157091
> 
> 赞同：0
> 
> 时间：2013-04-22T21:32:19.850
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

我有一个在本地工作的 Rails 应用程序（使用 测试`bundle exec`），但在 Heroku（Cedar 堆栈）上崩溃了。本地配置与远程配置相同（都使用 Postgres）。崩溃实际上让我很困惑，因为堆栈跟踪似乎发生在 Rails/Thin 环境中。弃用警告同样令人困惑，因为我的供应商/插件目录中没有任何内容！

```
Starting process with command `bundle exec thin start -R config.ru -e $RAILS_ENV -p 38427`
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/ and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/ and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/relation.rb:378:in `destroy': wrong number of arguments (0 for 1) (ArgumentError)
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
from /app/app/models/transcript.rb:1:in `<top (required)>'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `each'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:359:in `require_or_load'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/querying.rb:7:in `destroy'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
from /app/app/models/transcript.rb:4:in `<class:Transcript>'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:225:in `require_dependency'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
from config.ru:1:in `new'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
from config.ru:3:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/bin/thin:6:in `<top (required)>'
from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `load'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/controllers/controller.rb:71:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:313:in `depend_on'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:436:in `eager_load!'
from /app/config/environment.rb:5:in `<top (required)>'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `each'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/engine.rb:438:in `block in eager_load!'
from config.ru:3:in `block in <main>'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/thin/runner.rb:187:in `run_command'
from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.1/lib/rack/adapter/loader.rb:33:in `eval'
from config.ru:1:in `<main>'
Process exited with status 1
State changed from starting to crashed 
```

我已经运行`rake db:reset`并且`rake db:migrate`只是为了确保它不是数据库系统的问题。

成绩单文件内容：

```
class Transcript < ActiveRecord::Base
  attr_accessible :grade, :hours

  belongs_to :student, class_name: 'User', dependent: destroy
  belongs_to :course
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:59:02.973

你的模型应该是这样的。

```
class Transcript < ActiveRecord::Base
  attr_accessible :grade, :hours

  belongs_to :student, class_name: 'User', dependent: :destroy
  belongs_to :course
end 
```

发生的事情是您没有定义`destroy`为字符串或散列。因此，为什么你得到...

```
`destroy': wrong number of arguments (0 for 1) (ArgumentError) 
```

# android - 通过代码将图层列表设置为视图的背景

> ID：16157098
> 
> 赞同：3
> 
> 时间：2013-04-22T21:32:53.337
> 
> 标签：android

在列表视图的适配器中，我将孩子的背景设置为：

```
view.setBackgroundResource(R.drawable.bg_checked); 
```

这是背景文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <color android:color="@color/gold" />
    </item>
    <item>
        <nine-patch
            android:src="@drawable/bg_base_image"
            android:dither="true" />    
    </item> 
    <item>
        <bitmap 
            android:src="@drawable/bg_stripes_golden_image"
            android:antialias="true"
            android:dither="true"
            android:tileMode="repeat" />
    </item>
</layer-list> 
```

尽管如您所见，此可绘制对象是一个`<layer-list>`包含重复图像的位图。问题是当我通过 XML 设置背景时它可以正常工作，但是当我通过 Java 设置它时，背景不会重复并且图像只是被拉伸了。有没有其他方法可以通过 Java 设置这种类型的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:52:24.450

您可以尝试使用[LayerDrawable](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html#LayerDrawable%28android.graphics.drawable.Drawable%5B%5D%29)在代码中创建整个图层列表。我想你只需调用`getDrawable(R.drawable.bg_layer1)`一个`Resources`对象（这可以通过调用`context.getResources()`来获得）来获取每一层并将其放入一个`Drawable`数组中以构造`LayerDrawable`. 然后将视图的背景可绘制对象设置为您的`LayerDrawable`.

例子：

```
//Method to get the LayerDrawable
private LayerDrawable getLayerDrawable(){
    Resources res = context.getResources();
    Drawable layer1 = res.getDrawable(R.drawable.first_layer);
    Drawable layer2 = res.getDrawable(R.drawable.second_layer);
    //...
    Drawable layerX = res.getDrawable(R.drawable.x_layer);

    return new LayerDrawable(new Drawable[]{layer1, layer2, layerX});
}

//Wherever you're setting the background, just do:
view.setBackgroundDrawable(getLayerDrawable()); 
```

# css - Twitter Bootstrap - 使用图标

> ID：16157103
> 
> 赞同：0
> 
> 时间：2013-04-22T21:33:10.027
> 
> 标签：css, html, twitter-bootstrap, font-awesome

我正在使用 Twitter Bootstrap 并在显示图标时遇到问题。我正在尝试在这里重新创建一个示例：http: [//fortawesome.github.io/Font-Awesome/#examples](http://fortawesome.github.io/Font-Awesome/#examples)

这是我的代码：

```
<head>
    <meta charset="utf-8"/>     
    <script type="text/javascript" src="assets/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
</head>
<div class="control-group">
    <p><i class="icon-camera-retro icon-large"></i> icon-camera-retro</p>
    <p><i class="icon-camera-retro icon-2x"></i> icon-camera-retro</p>
    <p><i class="icon-camera-retro icon-3x"></i> icon-camera-retro</p>
    <p><i class="icon-camera-retro icon-4x"></i> icon-camera-retro</p>
</div> 
```

图标根本不出现；我需要链接到任何图标图像文件或类似的东西吗？我正在 Firefox 中进行测试，但是 Font-Awesome 示例站点确实可以正确加载，所以我很确定浏览器的选择不是问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:50:41.450

确保将 Font Awesome“字体”文件夹复制到“资产”文件夹中。

Font Awesome**会覆盖**使用**../img/glyphicons-halflings.png的 twitter 引导程序“图标”**

```
[class^="icon-"], [class*=" icon-"] {
    font-family: FontAwesome;
    font-weight: normal;
    font-style: normal;
    text-decoration: inherit;
   -webkit-font-smoothing: antialiased;
    display: inline;
    width: auto;
    height: auto;
    line-height: normal;
    vertical-align: baseline;
    background-image: none;
    background-position: 0% 0%;
    background-repeat: repeat;
    margin-top: 0;
} 
```

它将需要字体文件来呈现页面上的图标；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:38:21.347

你有安装 Firebug 吗？您应该检查 Net 选项卡中的 404 错误，根据您的描述，我猜您没有将字体文件放在服务器中的正确位置。

如果您查看[font-awesome.css](http://fortawesome.github.io/Font-Awesome/assets/css/font-awesome.css)的第一几行，您将看到以下定义：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../font/fontawesome-webfont.eot?v=3.0.1');
  src: url('../font/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-   opentype'),
       url('../font/fontawesome-webfont.woff?v=3.0.1') format('woff'),
       url('../font/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

确保将 CSS 中引用的文件（[您可以在此处找到](https://github.com/FortAwesome/Font-Awesome/tree/master/font)）下载到您的服务器并将其放在**assets/font**下。

# objective-c - 没有返回类型的方法：-()foo

> ID：16157105
> 
> 赞同：2
> 
> 时间：2013-04-22T21:33:17.557
> 
> 标签：objective-c, methods, return-value

我搜索了，但找不到关于此的问题。

我惊讶地发现你可以声明一个返回类型为空的方法：

```
- ()foo:(int)bar
{
    return @"baz";
} 
```

但是如果您不返回某些内容，编译器会抱怨。没有该行`return @"baz"`，编译器会说`"Control reaches end of non-void function"`。这段代码（甚至没有括号）似乎是一样的：

```
- foo:(int)bar
{
    return @"baz";
} 
```

这些方法是如何起作用的？方法体的返回是否暗示了返回类型？我假设有一个没有任何返回类型的方法是一个语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:34:31.847

不，只是它被隐含地假定为`id`. 这就是编译器抱怨的原因。顺便说一句，对于 aguments 也是如此（不指定显式参数类型会导致它被假定为`id`）。

[我在说什么的现场演示。](http://ideone.com/ts6peO)

此外，[古老的 Apple 代码](http://opensource.apple.com/source/objc4/objc4-208/runtime/Object.m)也使用这种可怕的符号。

# java - 执行“max”的功能方式（使用递归/不使用可变变量）

> ID：16157108
> 
> 赞同：2
> 
> 时间：2013-04-22T21:33:36.337
> 
> 标签：java, scala, functional-programming

使用命令式代码在未排序的数组中查找最大值非常简单

例如在Java中（我相信它可以写得更好，仅用于说明目的）

```
public class Main {
    public static void main(String[] args) {
        int[] array = {1,3,5,4,2};
        int max = findMax(array);
        System.out.println(max);
    }

    public static int findMax(int[] array){
        int max = Integer.MIN_VALUE; //or array[0], but it requires a null check and I want to keep it simple :)
        for (int i = 0, size = array.length; i < size ; i++) {
            int current = array[i];
            if(current > max) max = current;
        }
        return max;
    }
} 
```

这样做的功能性方式是什么？例如

*   没有可变变量（例如`val`，在 Scala / `final`Java 中使 max 成为 a）
*   没有循环（例如使用递归，尾部首选）

在 Scala 的资料中，我看到它是使用 recudeLeft 完成的，这看起来很聪明

```
 def max[B >: A](implicit cmp: Ordering[B]): A = {
    if (isEmpty)
      throw new UnsupportedOperationException("empty.max")

    reduceLeft((x, y) => if (cmp.gteq(x, y)) x else y)
  } 
```

但是假设我（由于某种原因）没有可用/实现的 reduce/reduceLeft（并且由于某种原因我不想/不能实现它，即我正在使用纯 Java）

什么是在不依赖其他函数方法的情况下完成 max 的“惯用”函数方式（例如，我将如何在基本 Java 中实现它，但要考虑函数范式）

答案可以使用任何语言（不过首选 Java / Scala）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:43:48.513

这是一个带有最大值的累加器的尾调用递归实现。

```
public class Main {

    public static void main(String[] args) {
        System.out.println(max(new int[]{6, 3, 9, 4}));
    }

    public static int max(int[] ints) {
        return max(ints, Integer.MIN_VALUE);
    }

    public static int max(int[] ints, int max) {
        if (ints.length == 0) {
            return max;
        } else {
            return max(Arrays.copyOfRange(ints, 1, ints.length), ints[0] > max ? ints[0] : max);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:53:32.393

你可以用一个普通的递归来做到这一点，但 maba 的尾递归版本应该有更好的性能。

```
import java.util.Arrays;
public class TestMax {
public static int findMax(int[] array) {
    if(array.length == 1)
        return array[0];
    int[] newArray = Arrays.copyOfRange(array, 1, array.length);
    if(array[0] > findMax(newArray))
        return array[0];
    else
        return findMax(newArray);
}
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    int[] array = {1,3,5,4,2, 9};
    int max = findMax(array);
    System.out.println(max);
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:21:41.560

基于 maba 的出色回答，如果有人感兴趣，这里是 Scala 版本

```
 def max(list: List[Int]) = {
    maxAcc(list, Int.MinValue)
  }                                               

  def maxAcc(list: List[Int], curMax:Int):Int = {
    list match {
        case Nil => curMax
        case head :: tail => maxAcc(tail, if (head > curMax ) head else curMax )
    }
  } 
```

**编辑**：感谢 maba 对 @tailrec 的评论 - 这是修改后的版本

```
 def max(list: List[Int]) = {
    @tailrec def maxAcc(list: List[Int], curMax: Int): Int = {
      list match {
        case Nil => curMax
        case head :: tail => maxAcc(tail, if (head > curMax) head else curMax)
      }
    }
    maxAcc(list, Int.MinValue)
  } 
```

# arrays - 赋值左侧的函数调用必须返回 Variant 或 Object，在两个数组中查找公共值

> ID：16157111
> 
> 赞同：4
> 
> 时间：2013-04-22T21:33:41.700
> 
> 标签：arrays, string, vba, excel, for-loop

我有两个数组，我试图提取其中的公共值，函数 findUniques 应该返回连接并用逗号分隔的字符串（它们是名称）。我想我很接近，但我找不到问题所在。第 10 行出现错误

```
Function findUniques(astrArray1() As String, astrArray2() As String) As String

    Dim blnMP5 As Boolean
    blnMP5 = False
    Dim counter1 As Long
    Dim counter2 As Long

    For counter1 = LBound(astrArray1) To UBound(astrArray1)
        For counter2 = LBound(astrArray1) To UBound(astrArray2)
            If astrArray1(counter1) = astrArray2(counter2) Then
                blnMP5 = False
                If blnMP5 = True Then
                    findUniques() = findUniques & "," & "astrArray1()"
                End If
            End If
        Next counter2
    Next counter1

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:39:36.770

您的错误在这一行：

```
findUniques() = findUniques & "," & "astrArray1()" 
```

您正在尝试为函数调用分配一个值，这没有意义。

您应该在函数的开头声明一个变量并继续添加该变量并最终返回它：

```
Function findUniques(astrArray1() As String, astrArray2() As String) As String

    Dim blnMP5 As Boolean
    blnMP5 = False    
    Dim counter1 As Long
    Dim counter2 As Long  
    Dim uniquesString as String = ""

    For counter1 = LBound(astrArray1) To UBound(astrArray1)
        For counter2 = LBound(astrArray1) To UBound(astrArray2)
            If astrArray1(counter1) = astrArray2(counter2) Then
               blnMP5 = False
               If blnMP5 = True Then
                   uniquesString = uniquesString & "," & "astrArray1()"
               End If
             End If
        Next counter2
     Next counter1

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:40:07.467

声明一个变量来保存你正在构建的字符串

```
 Dim tempString as string 
```

并在第 10 行添加

```
 tempString = tempString & "," &  astrArray1(counter1) 
```

最后

```
 findUniques = tempString 
End function 
```

# java - 出现错误 - javax.naming.NamingException：远程业务接口的 ejb ref 解析错误retail.ejb.service.CustomerSessionBeanRemote

> ID：16157117
> 
> 赞同：0
> 
> 时间：2013-04-22T21:34:07.780
> 
> 标签：java, ejb-3.0, glassfish-3

从 jsf 应用程序调用 ejb 时出现以下错误

```
javax.naming.NamingException: ejb ref resolution error for remote business interfaceretail.ejb.service.CustomerSessionBeanRemote [Root exception is java.lang.ClassNotFoundException: retail.ejb.service.CustomerSessionBeanRemote] 
```

这是下面的代码。

**接口：CustomerSessionBean**

```
package retail.ejb.service;

import retail.model.vo.Customer;

public interface CustomerSessionBean {
    public void insterCustomerDetails(Customer customer);

} 
```

```
package retail.ejb.service;

import javax.ejb.Remote;

import retail.model.vo.Customer;

@Remote
public interface CustomerSessionBeanRemote extends CustomerSessionBean{

    void insterCustomerDetails(Customer customer);

} 
```

```
package retail.ejb.service;

import javax.ejb.Local;

import retail.model.vo.Customer;

@Local
public interface CustomerSessionBeanLocal extends CustomerSessionBean{
    void insterCustomerDetails(Customer customer);
} 
```

```
package retail.ejb.service;

import javax.ejb.Stateless;

import retail.model.vo.Customer;

@Stateless(name="CustomerSessionBeanImpl", mappedName="ejb/CustomerSessionBeanImplJNDI") 
public class CustomerSessionBeanImpl implements CustomerSessionBeanRemote,CustomerSessionBeanLocal,CustomerSessionBean{

    @Override
    public void insterCustomerDetails(Customer customer) {
        // TODO Auto-generated method stub
        System.out.println("Customer object ::::" + customer);

    }

} 
```

包retail.web.mbean；

```
import java.io.Serializable;
import java.util.Properties;

import javax.faces.bean.ManagedBean;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

import retail.ejb.service.CustomerSessionBeanRemote;
import retail.model.vo.Customer;

@ManagedBean
public class CustomerMB implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = -4402277663508618618L;
    private Customer customer = new Customer();
    public void CustomerMB(){
        System.out.println("customer method +++++++++++++++++++++++"+getCustomer());
    }

public Customer getCustomer() {
    return customer;
}

public void setCustomer(Customer customer) {
    this.customer = customer;
}

public String createCustomer() throws NamingException{
    try{
    System.out.println("in Create customer method +++++++++++++++++++++++");
    Properties p = new Properties();
    //properties.put("java.naming.factory.initial","com.sun.jndi.cosnaming.CNCtxFactory");
    p.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.impl.SerialInitContextFactory");
    p.setProperty("java.naming.factory.url.pkgs", "com.sun.enterprise.naming");
    p.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");
    p.setProperty("org.omg.CORBA.ORBInitialHost", "localhost");
    p.setProperty("org.omg.CORBA.ORBInitialPort", "3700"); //any configured port different from 3700 - 34513
    InitialContext c = new InitialContext(p);
    CustomerSessionBeanRemote remote = (CustomerSessionBeanRemote) c.lookup("ejb/CustomerSessionBeanImplJNDI");
    remote.insterCustomerDetails(getCustomer());
    }catch(Exception e){
        e.printStackTrace();
    }
    //System.exit(1);
    return "viewCustomerDetails";
}

} 
```

```
Caused by: javax.naming.NamingException: ejb ref resolution error for remote business interfaceretail.ejb.service.CustomerSessionBeanRemote [Root exception is java.lang.ClassNotFoundException: retail.ejb.service.CustomerSessionBeanRemote]
    at com.sun.ejb.EJBUtils.lookupRemote30BusinessObject(EJBUtils.java:433)
    at com.sun.ejb.containers.RemoteBusinessObjectFactory.getObjectInstance(RemoteBusinessObjectFactory.java:75)
    at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
    at com.sun.enterprise.naming.impl.SerialContext.getObjectInstance(SerialContext.java:556)
    at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:514)
    ... 43 more
Caused by: java.lang.ClassNotFoundException: retail.ejb.service.CustomerSessionBeanRemote
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1509)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
    at com.sun.ejb.EJBUtils.getBusinessIntfClassLoader(EJBUtils.java:687)
    at com.sun.ejb.EJBUtils.loadGeneratedRemoteBusinessClasses(EJBUtils.java:462)
    at com.sun.ejb.EJBUtils.lookupRemote30BusinessObject(EJBUtils.java:413)
    ... 47 more 
```

请推荐任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:12:33.503

一个可能的原因可能是

EJB 3.0 规范警告`Applications that use mappedNames may not be portable` 这是在没有映射名称的情况下还是通过查找完全限定的 bean 名称来工作？

您可以在 Glassfish 日志中看到 bean 的可移植名称，请改用该名称。

# java - setFocusPainted 用于 JButton

> ID：16157120
> 
> 赞同：1
> 
> 时间：2013-04-22T21:34:17.650
> 
> 标签：java, button, user-interface

我是Java的初学者。我正在尝试创建一个小型 GUI，它将调整给定图像的大小并左对齐，右对齐。您能否解释一下或将我重定向到有关 setfocuspainted 方法的文章文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T17:33:41.913

该`setFocusPainted`方法可用于设置组件周围是否有蓝色对焦环。例如：`randomButton.setFocusPainted(true);`会给`randomButton`一个对焦环，并`randomButton.setFocusPainted(false);`会移除对焦环。

# c++ - 打印存储在具有相同祖先的不同类的 var 中的值

> ID：16157121
> 
> 赞同：1
> 
> 时间：2013-04-22T21:34:17.673
> 
> 标签：c++, inheritance, polymorphism

我有这堂课：

```
class CComputer {
public:
    // constructor    
    CComputer(string name) {
        this->name = name;
    };
    // overloaded operator << for printing
    friend ostream& operator<<(ostream& os, const CComputer& c);

    // adds some component for this computer
    CComputer & AddComponent(Component const & component) {
        this->listOfComponents.push_back(component);
        return *this;
    };

    // sets address for this computer
    CComputer & AddAddress(const string & address) {
        this->address = address;
        return *this;
    };

    string name;
    string address;
    list<Component> listOfComponents;
}; 
```

然后是这些类：

```
// ancestor for other classes...It's really dummy yet, but I dunno what to add there
class Component {
public:

    Component() {};

    ~Component() {};
};

class CCPU : public Component {
public:

    CCPU(int cores, int freq) {
        this->cores = cores;
        this->freq = freq;
    };

    int cores;
    int freq;
};

class CMemory : public Component {
public:

    CMemory(int mem) {
        this->mem = mem;
    };

    int mem;
}; 
```

现在我为我的 CComputer 类提供一些值：

```
 CComputer c("test.com");
 c . AddAddress("123.45.678.910") .
     AddComponent(CCPU(8, 2400)) .
     AddComponent(CCPU(8, 1200)).
     AddComponent(CMemory(2000)).
     AddComponent(CMemory(2000))); 
```

现在我想把它和我放在那里的所有信息一起打印出来（`CCPU`包括`CMemory`细节）

但是如何实现它，以便能够迭代`CComputer::listOfComponents`并且不在乎我是否实际访问`CCPU`或`CMemory`？我可以将它添加到该列表中，但我真的不知道如何制作它，以便能够访问这些组件的变量。

所以输出应该是这样的：

```
##### STARTING #####

CComputer:
   name:test.com
   address:123.45.678.910
      CCPU:
         cores:8,freq:2400
      CCPU:
         cores:8, freq:1200
      CMemory:
         mem:2000
      CMemory:
         mem:2000

###### FINISHED! ##### 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T22:32:21.883

正如其他人所提到的，您需要`virtual std::string ToString() const = 0;`在每个子类继承和覆盖的基类中实现一个虚函数（例如）。

然而，这还不够。当您将子类实例复制到列表中时，[您的代码会出现切片](http://en.wikipedia.org/wiki/Object_slicing)`Component`：列表包含 type 的对象，而不是相关子类的对象。

您需要做的是存储*多态*实例。值本身永远不会是多态的，您需要为此使用（智能）指针或引用。但是，引用已失效，因为您无法将它们存储在标准容器中（例如`std::list`）。现在使用原始指针被认为是不好的风格，但是从你的类的命名约定来看，你没有在你的类中学习现代 C++（对不起！）。

因此，原始指针可能是要走的路。相应地更改您的代码：

*   存储指针列表：

    ```
    list<Component*> listOfComponents; 
    ```

*   将参数类型设为`AddComponent`指针而不是`const&`.

*   通过传递一个`new`ed 对象来调用函数，例如：

    ```
    AddComponent(new CCPU(8, 2400)) 
    ```

现在你的代码在左、右和中心泄漏内存。您需要实现一个析构函数来释放内存：

```
~CComputer() {
    typedef std::list<Component*>::iterator iter_t;
    for (iter_t i = listOfComponents.begin(); i != listOfComponents.end(); ++i)
        delete *i;
} 
```

但是*现在*你的代码违反了[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)（阅读这篇文章！这很重要，它可能是你将在这个编程课程中学习的关于 C++ 的最有用的东西），因此你还需要实现复制构造函数和复制赋值运算符。但是，我们不能。对不起。为了为您的类实现复制，您必须在您的类中实现*另一个*虚函数`Component`，即克隆对象（`virtual Component* Clone() const = 0;`）的虚函数。只有*这样*我们才能继续。

这是一个示例实现`CCPU`：

```
Component* Clone() const {
    return new CCPU(cores, freq);
} 
```

...这需要在所有派生自 的类中完成`Component`，否则我们无法正确复制派生自`Component`并隐藏在指针后面的类型的对象。

*现在*我们可以在类中实现复制`CComputer`：

```
CComputer(CComputer const& other)
        : name(name)
        , address(addess) {
    typedef std::list<Component*>::iterator iter_t;
    for (iter_t i = other.listOfComponents.begin(); i != other.listOfComponents.end(); ++i)
        listOfComponents.push_back((*i)->Clone());
}

CComputer& operator =(CComputer const& other) {
    if (this == &other)
        return *this;

    name = other.name;
    address = other.address;

    listOfComponents.clear();
    for (iter_t i = other.listOfComponents.begin(); i != other.listOfComponents.end(); ++i)
        listOfComponents.push_back((*i)->Clone());

    return *this;
} 
```

这段代码很脆弱，不是线程安全的和容易出错的，没有一个称职的 C++ 程序员会写这个¹。*例如，真正*的代码会使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来代替——但如前所述，我很确定这超出了类的范围。

* * *

¹我想知道这让我现在怎么样了？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:39:17.540

只需向类组件添加一个名为 toString() 的虚拟方法，它会返回一个描述组件的字符串。然后，您可以遍历所有组件并调用 toString() 而不必担心每个组件到底是什么。如果这样做，那么对于每台计算机，您将能够打印出所有组件的值。

但是，正如其中一条评论所指出的，您在问题中给出的示例输出输出所有计算机的 CCPU，然后是所有计算机的所有内存。要像这样对输出进行排序，您需要向 Component 添加另一个名为 getType() 的虚拟方法，它返回一个表示信息类型的枚举或整数。然后，您可以有两个 for-next 循环，一个嵌套在另一个循环中，其中外部循环遍历所有类型，内部循环遍历所有调用 toString() 的计算机，所有组件与外部指定的类型匹配for 循环。

这是实现这个想法的东西。

```
#include <iostream>
#include <string>
#include <list>

using namespace std;

int const TYPE_CCPU = 1;
int const TYPE_MEMORY = 2;

class Component {
public:
    virtual int GetType() { return -1; }
    virtual std::string ToString() const {
        return "OOPS! Default `ToString` called";
    }
};

class CComputer {
public:
    typedef std::list<Component*>::iterator iter_t;

    // constructor    
    CComputer(string name) {
        this->name = name;
    };
    ~CComputer() {
        for (iter_t i = listOfComponents.begin(); i != listOfComponents.end(); ++i) {
            delete *i;
        }
    }

    // overloaded operator << for printing
    friend ostream& operator<<(ostream& os, const CComputer& c);

    // adds some component for this computer
    CComputer & AddComponent(Component *component) {
        this->listOfComponents.push_back(component);
        return *this;
    };

    // sets address for this computer
    CComputer & AddAddress(const string & address) {
        this->address = address;
        return *this;
    };

    void PrintType(int type) {
        for (iter_t i = listOfComponents.begin(); i != listOfComponents.end(); ++i) {
            if ((*i)->GetType() == type)
                std::cout << (*i)->ToString() << '\n';
        }
    }

    string name;
    string address;
    list<Component*> listOfComponents;
};

class CCPU : public Component {
public:

    CCPU(int cores, int freq) {
        this->cores = cores;
        this->freq = freq;
    };

    int GetType() { return TYPE_CCPU; }

    std::string ToString() const {
        return "CCPU::ToString()";
    }

    int cores;
    int freq;
};

class CMemory : public Component {
public:

    CMemory(int mem) { this->mem = mem; };

    int GetType() { return TYPE_MEMORY; }

    std::string ToString() const {
        return "CMemory::ToString()";
    }

    int mem;
};

typedef std::list<CComputer*>::iterator iter_c;

int main() {
    list<CComputer*> computerlist;
    CComputer *c1 = new CComputer("test.com"), *c2 = new CComputer("test2.com");
    c1->AddAddress("123.45.678.910").
        AddComponent(new CCPU(8, 1200)).
        AddComponent(new CMemory(2000));
    computerlist.push_back(c1);

    c2->AddAddress("987.65.432.10").
        AddComponent(new CCPU(8, 2400)).
        AddComponent(new CMemory(4000));
    computerlist.push_back(c2);

    for(int t=TYPE_CCPU; t<=TYPE_MEMORY; t++) 
        for (iter_c i = computerlist.begin(); i != computerlist.end(); ++i) {
            (*i)->PrintType(t);
    }

    for (iter_c i = computerlist.begin(); i != computerlist.end(); ++i) {
        delete (*i);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:00:57.337

在每个类中实现 ToString()。在 .NET 中，这甚至是“对象”类型实现的标准。

# oracle - PL/SQL XML 解析成关系表

> ID：16157122
> 
> 赞同：3
> 
> 时间：2013-04-22T21:34:26.380
> 
> 标签：oracle, error-handling, plsql, xml-parsing, oracle11g

我正在使用 PL/SQL 过程将值从 XML 插入到关系表中。XML 文件位于 XMLTYPE 列中。
包含 XML 的表 (OFFLINE_XML) 的列是

```
ID, XML_FILE, STATUS 
```

我想在两个表中插入值，即 DEPARTMENT 和 SECTIONS DEPARTMENT 的结构如下：-

```
ID, NAME 
```

SECTIONS 表的结构是：-

```
ID, NAME, DEPARTMENT_ID 
```

现在有第三个表（LIST_1），我想在其中插入上述两个表中已经存在的值。
LIST_1 的结构是：-

```
ID, DEPARTMENT_ID,DEPARTMENT_NAME,SECTIONS_ID, SECTIONS_NAME 
```

XML格式如下：-

```
<ROWSET> 
 <DEPARTMENT>
  <DEPARTMENT_ID>DEP22681352268280797</DEPARTMENT_ID>
  <DEPARTMENT_NAME>myDEPARTMENT</DEPARTMENT_NAME>
  <SECTIONS_ID>6390135666643567</SECTIONS_ID>
  <SECTIONS_NAME>mySection</SECTIONS_NAME>
 </DEPARTMENT>
 <DEPARTMENT>
  <DEPARTMENT_ID>DEP255555555550797</DEPARTMENT_ID>
  <DEPARTMENT_NAME>myDEPARTMENT2</DEPARTMENT_NAME>
  <SECTIONS_ID>63901667779243567</SECTIONS_ID>
  <SECTIONS_NAME>mySection2</SECTIONS_NAME>
 </DEPARTMENT>
</ROWSET>

DECLARE
  BEGIN
    insert all
        into department (id, name)
           values (unit_id, unit_name)
        into sections (id, name, department _id)
          values ( sect_id, sect_name, department _id)
    select department .id as department _id
          , department.name as department_name
           , sect.id as sect_id
          , sect.name as sect_name
    from OFFLINE_XML
         , xmltable('/ROWSET/DEPARTMENT'
                   passing OFFLINE_XML.xml_file
                   columns
                      "ID"  varchar2(20) path 'UNIT_ID'
                      , "NAME"  varchar2(20) path 'UNIT_NAME'
                  ) department
          , xmltable('/ROWSET/DEPARTMENT'
               passing OFFLINE_XML.xml_file
               columns
                  "ID"  varchar2(20) path 'SECTIONS_ID'
                  , "NAME"  varchar2(20) path 'SECTIONS_NAME'
              ) sect
               where status = 3;
  EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
    dbms_output.put_line('Duplicate='|| department.id );
    --insert into LIST_1 values(ID,DEPARTMENT_ID, SECTIONS_ID, DEPARTMENT_NAME,SECTIONS_NAME);
END; 
```

现在的问题是，我如何根据 DEPARTMENT 和 SECTIONS 表中已经存在的主键插入或识别值，然后在 LIST_1 表中插入现有值。 **------更新的努力 --------------**

我想出了另一个解决方案，但这又给我带来了问题。在下面提到的过程中，光标倾向于为每个 xquery 重复。我不知道我将如何处理这个问题..

```
DECLARE
    department_id varchar2(20);
    department_name varchar2(20);
    sect_id varchar2(20);
    sect_name varchar2(20);
    sections_unit_id varchar2(20);
    var number;
    CURSOR C1 IS
     select
            sect.id as sect_id
          , sect.name as sect_name
          , sect.unit_id  as sections_unit_id
    from OFFLINE_XML
           , xmltable('/ROWSET/DEPARTMENT'
                   passing OFFLINE_XML.xml_file
                   columns
                      "ID"  varchar2(20) path 'UNIT_ID'
                      , "NAME"  varchar2(20) path 'UNIT_NAME'
                  ) DEPARTMENT
          , xmltable('/ROWSET/DEPARTMENT'
               passing OFFLINE_XML.xml_file
               columns
                  "ID"  varchar2(20) path 'SECTIONS_ID'
                  , "NAME"  varchar2(20) path 'SECTIONS_NAME'
                  , "DEPARTMENT_ID" varchar2(20) path 'DEPARTMENT_ID'
              ) sect
               where status = 3;

BEGIN
      FOR R_C1 IN C1 LOOP
      BEGIN
      var :=1;
         --insert into sections_temp_1 (id, name)values ( R_C1.sect_id, R_C1.sect_name);
         -- commit;
           dbms_output.put_line('Duplicate='||var);
      EXCEPTION
         WHEN DUP_VAL_ON_INDEX THEN
         dbms_output.put_line('Duplicate='||R_C1.sect_id);
      END;
      var:=var+1;
      END LOOP;

END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:44:47.097

似乎首先您需要更复杂的 XQuery 来从 XMLType 字段中提取行。

无需单独提取部门和部门，然后尝试将其匹配回来。

试试这个变种：

```
select 
  department_id,
  department_name,
  sections_id,
  sections_name
from 
  OFFLINE_XML xml_list,
  xmltable(
    '
      for $dept in $param/ROWSET/DEPARTMENT
        return $dept
    '
    passing xml_list.xml_file as "param"
    columns
      "DEPARTMENT_ID"   varchar2(100) path '//DEPARTMENT/DEPARTMENT_ID',
      "DEPARTMENT_NAME" varchar2(4000) path '//DEPARTMENT/DEPARTMENT_NAME',
      "SECTIONS_ID"     varchar2(100) path '//DEPARTMENT/SECTIONS_ID',
      "SECTIONS_NAME"   varchar2(4000) path '//DEPARTMENT/SECTIONS_NAME'
  ) section_list
where 
  xml_list.Status = 3 
```

[SQL 小提琴 - 1](http://www.sqlfiddle.com/#!4/dc8c7/3)

之后，如果您想查找是否已经存在任何值，您将获得一个数据集，该数据集可以在其主键（或其他东西 - 取决于所需的逻辑）上外部连接到现有表：

```
select 
  offline_set.offline_xml_id,
  offline_set.department_id,
  offline_set.department_name,
  offline_set.sections_id,
  offline_set.sections_name,
  nvl2(dept.id,'Y', 'N') is_dept_exists, 
  nvl2(sect.id,'Y', 'N') is_sect_exists 
from 
  (  
    [... skipped text of previous query ...]
  ) offline_set,
  department dept,
  sections   sect
where
  dept.id (+) = offline_set.department_id
  and
  sect.id (+) = offline_set.sections_id 
```

[SQL 小提琴 - 2](http://www.sqlfiddle.com/#!4/8b3da/1)

因为我实际上不知道这个要求背后的逻辑，所以我不能建议任何未来的处理指令。但似乎您错过了对需要识别错误/重复来源的`OFFLINE_XML`表的引用。`LIST_1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:06:53.640

最好的方法是使用 Oracle 内置的错误日志记录。使用 DBMS_ERRLOG.CREATE_ERROR_LOG() 为*每个目标表*（即您的情况下的 SECTION 和 DEPARTMENT）生成一个日志记录表。 [了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_errlog.htm#CEGBBABI)。

将这些表与 INSERT ALL 一起使用的语法并不直观，但可以这样做：

```
insert all
    into department (id, name)
       values (unit_id, unit_name)
       log errors into err$_department  ('XML Load failure')
    into sections (id, name, department_id)
      values ( sect_id, sect_name, department_id)
       log errors into err$_section  ('XML Load failure') 
select department.id as department_id
        .... 
```

您可以将任何（短）字符串放入错误日志标签中，但请确保它有助于您本地化相关记录。您可能希望将 REJECT LIMIT 设置为某个值，具体取决于您是希望在一个（或几个）错误上失败，还是处理整个 XML 并在之后对其进行排序。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#BCEGDJDJ)。

* * *

我建议您为每个目标表使用单独的日志而不是一个日志，原因有两个：

1.  在我的经验中，利用 Oracle 内置恐惧的解决方案往往比手动代码更易于扩展且更健壮。
2.  它更适合可能发生的事情。您有三种情况可能会导致加载抛出 DUP_VAL_ON_INDEX：
    *   记录具有重复的部门 ID
    *   记录具有重复的部分 ID
    *   记录具有重复的部门 ID*和*重复的部门 ID

单独的表格可以更容易地理解出了什么问题。这是加载大量数据时的一大福音。

> “我需要通知我的用户，在 xml 中发现了这么多重复的条目”

您仍然可以使用两个错误日志来做到这一点。哎呀，您甚至可以将错误日志加入一个名为 LIST_1 的视图中，这对您来说非常重要。

# jquery - jquery.post 不工作

> ID：16157135
> 
> 赞同：0
> 
> 时间：2013-04-22T21:35:01.440
> 
> 标签：jquery, ajax, post

当我在本地计算机上尝试此代码时，它运行良好并放回我需要的数据，但是当我将它放在网站服务器上时，它没有通过...检查兼容性加载它在 .post 方法处停止

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
<!-- <script src="js/settings.js" type="text/javascript"></script>-->
<SCRIPT type="text/javascript">
    pic1 = new Image(16, 16);
    pic1.src = "loader.gif";

    $(document).ready(function() {

        $("#username").change(function() {

            var usr = $("#username").val();

            if (usr.length >= 3) {

                $.post("check.php", {
                    username: "donald"
                },

                function(data, status) {
                    alert("Data: " + data + "\nStatus: " + status);
                });

                $("#status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');

                $.ajax({
                    type: "POST",
                    url: "check.php",
                    data: "username=" + usr,

                    error: function() {
                        aler('error');
                    },
                    success: function(msg) {

                        $("#status").ajaxComplete(function(event, request, settings) {

                            if (msg == 'OK') {

                                $("#username").removeClass('object_error'); // if necessary
                                $("#username").addClass("object_ok");
                                $(this).html('&nbsp;<img src="accepted.png" align="absmiddle"> <font color="Green"> Available </font>  ');
                            } else {
                                $("#username").removeClass('object_ok'); // if necessary
                                $("#username").addClass("object_error");
                                $(this).html(msg);
                            }

                        });

                    }

                });

            } else {
                $("#status").html('<font color="red">The username should have at least    
    <strong>3</strong> characters.</font>');
                $("#username").removeClass('object_ok'); // if necessary
                $("#username").addClass("object_error");
            }

        });

    });

    //-->
</SCRIPT>
<style type="text/css">
    body {
        font-family:"Trebuchet MS";
        font-size:12px;
    }
    .inn {
        float:left;
        font-size:14px;
        border:solid 1px #000000;
        width:143px;
        font-family:Arial, Helvetica, sans-serif;
        color:#0066CC;
        font-weight:bold;
    }
</style>
<table>
    <tr>
        <td width="35%" align="right" valign="middle" id="abc">User Name :</td>
        <td width="65%" align="left" valign="middle">
            <input id="username" type="text" name="username" class="inn" />&nbsp; http://xyz.com/<span id="username_url" style="color:#006600; font-weight:bold;">USERNAME</span> 
        </td>
    </tr>
    <tr>
        <td></td>
        <td align="left" valign="bottom" height="20px">
            <div id="status"></div>
        </td>
    </tr>
</table> 
```

# javascript - JavaScript shift() 方法是否返回元素的引用或副本？

> ID：16157136
> 
> 赞同：0
> 
> 时间：2013-04-22T21:35:31.507
> 
> 标签：javascript, reference, pass-by-reference

可以说我有这样声明的树对象：

```
var obj1 = new Car();
var obj2 = new Car();
var obj3 = new Car(); 
```

我把它们放在一个数组中

```
var myArray = [];
myArray.push(obj1);
myArray.push(obj2);
myArray.push(obj3); 
```

最后，如果我这样做：

```
var firstElement = myArray.shift(); 
```

这让我想知道：

firstElement是对**obj1**的引用**还是**它的副本？例如，如果我更改**firstElement**的某些属性会影响**obj1**变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:38:16.580

**答：**它是元素的（副本）。但是元素是什么？与 Java 一样，JavaScript 中的每个值要么是原始值，要么是引用（指向对象的指针）。“对象”不是 JavaScript 中的值。对象只能通过引用（指向对象的指针）进行操作。

> 可以说我有这样声明的树对象：
> 
> var obj1 = new Car(); var obj2 = new Car(); var obj3 = new Car();
> 
> 我把它们放在一个数组中

不，您实际上有三个引用（指向对象的指针），它们指向您创建的对象。您将这些引用放入数组中。

> firstElement 是对 obj1 的引用还是它的副本？例如，如果我更改 firstElement 的某些属性会影响 obj1 变量吗？

`firstElement`是副本`obj1`，参考。如果您更改 所指向的对象的某些属性`firstElement`，那么它当然是可见`obj1`的，因为它们指向同一个对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T21:54:58.177

通过参考，请查看此 jsfiddle 以获取证据：

[http://jsfiddle.net/3wntu/1/](http://jsfiddle.net/3wntu/1/)

HTML：

```
<div >Shifted obj title: <span  id='display1'></span></div>
<div >firstObj title: <span  id='display2'></span></div>
<div >obj1 title: <span  id='display3'></span></div> 
```

js：

```
var myArray = [],
    firstElement = {},
    obj1 = {title:'obj1'},
    obj2 = {title: 'obj2'},
    obj3 = {title: 'obj3'};

myArray.push(obj1);
myArray.push(obj2);
myArray.push(obj3);

firstElement = myArray.shift();

document.getElementById("display1").innerHTML = firstElement.title;

//change the objects name
firstObj.title = "firstElement";

//output the reference object title
document.getElementById("display2").innerHTML = firstElement.title;

//output the original output - should be the same as the altered reference title
document.getElementById("display3").innerHTML = obj1.title; 
```

# git - TortoiseGIT 结帐永远持续下去.. 有什么转机吗？

> ID：16157138
> 
> 赞同：0
> 
> 时间：2013-04-22T21:35:38.003
> 
> 标签：git, tortoisegit

我正在尝试做一个 pull ，最初有问题，它会说“git没有干净地中止”并拉出一半的文件。在多次还原后，我认为我设法使拉动工作，但现在这个过程继续进行，并没有结束。（地球不断将乌龟扔到文件夹中：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T05:45:42.250

我做了一些研究，发现升级乌龟 git ，解决了这个问题。最终我摆脱了 Tortoise git 并转而使用 GIT bash。

# git - 通过本地提交避免工作丢失？

> ID：16157139
> 
> 赞同：2
> 
> 时间：2013-04-22T21:35:45.653
> 
> 标签：git

我是 Git 新手，只是对它进行了修改。到目前为止我真的很喜欢它，我们正在讨论开始在我工作的地方使用它。

出现的一个问题（我无法回答）是开发人员长时间在本地提交的情况，因为他们的工作还没有准备好推送到中央存储库。如果他们的硬盘崩溃，如何避免失去开发人员的工作？

在网络共享上镜像本地存储库或类似的东西是最佳实践吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:39:14.003

> 开发人员长时间在本地提交，因为他们的工作还没有准备好推送到中央存储库。

但是他们的工作*已经*准备好了。开发人员可以分支`master`分支

```
git checkout master
git branch experiment
git checkout experiment 
```

现在一旦他们完成了一些实验工作，他们可以在不影响分支的情况下推送实验`master`分支

```
git push origin experiment 
```

然后在合适的时候你可以合并分支

```
git checkout master
git merge experiment 
```

或删除分支

```
git branch -d experiment 
```

你会注意到[官方的 Git 存储库](http://github.com/git/git/branches) 是这样做的

```
master  # main branch
next    # soon to be merged to master
pu      # proposed updates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:43:40.890

尝试使用 git 来获取我的工作文件的同步副本太让人头疼了，我发现我花了更多时间与 git 争吵（并做出诸如“更新”、“更新 #2 之类的混乱提交” ", "updated #3") 比我开发的要好。

我使用单独的分支/远程和“云”（即使我讨厌使用该术语）备份解决方案的组合，例如保存我的 repo 的当前“脏”状态的 dropbox。这样我就可以打开我的笔记本电脑，并立即从我离开的地方继续，而无需尝试下拉/合并我的更改。

另一件需要注意的事情是，git 不是用于备份的，尽管它的分布式特性使得在出现问题时更容易恢复工作。这就是备份脚本的用途:)

# python - 是否有某种方法可以回滚金字塔中的 initialize_project_db 脚本？

> ID：16157144
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:05.410
> 
> 标签：python, database, pyramid

我是一名正在学习 python 的 Rails 开发人员，我正在使用金字塔框架做一个项目。如果我以某种方式更改模型，我习惯于使用某种方式回滚数据库更改。是否有某种类似于 initialize_project_db 命令的数据库回滚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:31:23.320

`initialize_db`不是迁移脚本。它用于引导您的模型，仅此而已。如果您想将迁移与升级/回滚支持联系起来，请`alembic`查看 SQL 模式迁移。

# java - 尝试使用 java.util.iterator 迭代 JCoTable 时出错

> ID：16157145
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:06.867
> 
> 标签：java, sap, jco

我正在尝试针对 JCo 对象实现一些 Java 模式（外观和迭代器）。

在这里，我试图在 JCoTable 上创建一个迭代器，就像我在 Java 中的任何集合一样。下面是我的课堂片段。在 MyClass 中，我有一个执行迭代的内部类。

我正在使用 table.getStructure(...) 方法，但缺少一些东西。我见过一些片段，他们使用元数据显式创建结构，但老实说，这些示例中没有代码，我在那里有点挣扎，担心我正在用一种复杂性换另一种。

我的目标是为其他 Java 程序员简化 SAP Bapi 调用和表处理。这是一个重构练习。我的返回变量在迭代器中不兼容。

先感谢您。

我的课：

```
class MyClass 
...
protected JCoTable table;
...

private class JCoTableIterator implements Iterator<JCoRecord> {

    public boolean hasNext() {
        return table.getRow() < table.getNumRows();
    }
    @Override
    public JCoRecord next() {
        return table.getStructure(table.getRow() + 1);
    }
    @Override
    public void remove() {
        table.deleteRow();
    }
} 
```

我的实现：

```
Iterator<JCoRecord> it = table.iterator();
while(it.hasNext()) {
    JCoRecord record = it.next(); <<<<< *Exception
    logger.info(record.getString("WERKS"));
    ... other field procesing ... 
} 
```

但是在 JCoRecord record = it.next() 行上，我收到以下错误。

```
com.sap.conn.jco.ConversionException: (122) JCO_ERROR_CONVERSION: Cannot convert field VBELN of type CHAR to StructureRecord
    at com.sap.conn.jco.rt.AbstractRecord.createConversionException(AbstractRecord.java:415)
    at com.sap.conn.jco.rt.AbstractRecord.createConversionException(AbstractRecord.java:410)
    at com.sap.conn.jco.rt.AbstractRecord.getStructure(AbstractRecord.java:2472) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:47:55.503

假设您想遍历表的行，我会说您使用`JCoTable.getStructure()`不当。顾名思义，它采用当前选择的记录的第 n 个字段并尝试将其作为结构返回。这当然只有在单个列是结构化列时才有可能 - 如果它是单个（原子）字段，那么我希望此转换会失败，并显示您遇到的错误消息。

# google-app-engine - 删除实体。获取还是发布？

> ID：16157147
> 
> 赞同：1
> 
> 时间：2013-04-22T21:36:09.500
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试删除一个实体，我应该在 GET 还是 POST 中执行它？

我认为两者都是正确的，但哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:54:45.227

虽然 GET 和 POST 是最流行的 HTTP 方法，但还有其他方法，例如合适的 DELETE 方法。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:49:28.700

您应该使用 POST，因为您正在更改数据。DELETE 虽然存在，但并不常见。

# neo4j - Neo4j 批量插入器未知错误

> ID：16157152
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:30.100
> 
> 标签：neo4j, batch-insert

我正在尝试将 java 批处理插入器用于 neo4j 数据库，但收到以下错误消息：

```
>java -server -Xmx4G -jar target/batch-import-jar-with-dependencies.jar target/db nodes6.csv, rels5.csv

Using Existing Configuration File
Nodes file nodes6.csv, does not exist

Total import time: 0 seconds 
Exception in thread "main" org.neo4j.graphdb.NotFoundException: id=4621
    at org.neo4j.unsafe.batchinsert.BatchInserterImpl.getNodeRecord(BatchInserterImpl.java:915)
    at org.neo4j.unsafe.batchinsert.BatchInserterImpl.createRelationship(BatchInserterImpl.java:468)
    at org.neo4j.batchimport.Importer.importRelationships(Importer.java:108)
    at org.neo4j.batchimport.Importer.main(Importer.java:63) 
```

Nodes6.csv 肯定存在，所以这......令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:47:30.283

这里有 2 个错误，第一个是它无法找到您的 nodes6.csv 文件，在我看来，您输入的文件名带有额外的`,`.

你有什么： `java -server -Xmx4G -jar target/batch-import-jar-with-dependencies.jar target/db nodes6.csv, rels5.csv`

应该是这样的：`java -server -Xmx4G -jar target/batch-import-jar-with-dependencies.jar target/db nodes6.csv rels5.csv`

# machine-learning - 篮球数据的预测算法

> ID：16157153
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:30.923
> 
> 标签：machine-learning, data-mining, pattern-recognition

我正在做一个项目，我需要根据篮球运动员过去的统计数据来预测未来的统计数据。我希望能够根据过去三个赛季的统计数据预测下一赛季的统计数据（如果有前三个赛季可供选择）。有没有人建议我可以使用一个好的预测算法？数据是连续的，可以有 5-14 个维度（年龄、分钟、点数等）

谢谢！

注意：我真的很想使用 Weka 程序来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:29:25.640

开箱即用，[随机森林](http://en.wikipedia.org/wiki/Random_forest)可能会给你一个强大的基线，所以我会从这个开始。

您也可以尝试[线性回归](http://en.wikipedia.org/wiki/Linear_regression)，这是一种简单但相对有效的方法，但根据数据可能需要进行更多调整（例如转换一些输入和/或输出变量）。

[梯度提升](http://en.wikipedia.org/wiki/Gradient_boosting)回归是另一个强有力的预测指标，但通常还需要更多的调整才能正常工作。

所有这些算法都有 Weka 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:51:18.493

显然没有一个正确的答案，但对于任何想要做类似事情的人，我会更好地描述我的问题和我找到的解决方案。我创建了一个 csv 文件，其中每一行是不同的季节，每一列包含不同的属性。对于我想预测的每个属性，我都有当前赛季的统计数据，然后是上一赛季统计数据的另一列。对于所有“上一季”列，第一个（新秀）赛季将为 0。有了这个数据集，我将它加载到 Weka 中，并使用了一个多层感知器，并将测试选项设置为交叉验证。我将折叠数设置为可用季节数的 80-90% 之间。

最后，为了预测下一季的统计数据，您在末尾再添加一行，并用“？”输入上一季的值。在您想要预测的列中。如果有人想要更深入的例子，我很乐意提供一个。

# sql-server - 如果表为空，则根据时间选择行或所有行

> ID：16157157
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:45.010
> 
> 标签：sql-server

我有 2 张桌子。一个是生产表，另一个是日报表。每日报表每天都会清空。每日报告表是生产表的子集。我想用生产表中的所有新行更新每日表。我考虑过使用 where 子句；

```
SELECT ftime, 
       fdate, 
       fdata, 
       fdata2 
INTO   table2 
FROM   table1 
WHERE  ftime > table2.ftime 
```

我运气不太好。我是 SQL 新手，我只是不确定如何解决这个问题，而且似乎在网上找不到任何关于这个特定问题的东西。

当我让它工作时，这最终会进入一个存储过程。

任何提示，提示，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:46:21.560

```
SELECT ftime, 
       fdate, 
       fdata, 
       fdata2 
INTO   table2 
FROM   table1 
WHERE  ftime > (select MAX(ftime) from table2)
   OR  NOT EXISTS (select * FROM table2); 
```

如果 table2 为空（例如，如果您刚刚完成了日常清除），则 table1 的所有内容都将被拉入 table2。
否则，它只会从 table1 插入`ftime`比 table2 中的新记录晚的新记录。

确保您在 table2.ftime 上有一个索引

# jsf - 已解析的日期字符串在 facelet 中未正确格式化

> ID：16157158
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:45.983
> 
> 标签：jsf, facelets

我提供的数据来自数据库视图。一列包含逗号分隔的日期列表，因为日期来自一对多表连接。所以现在我被困在我的 jsf facelet 中解析和格式化。

```
 <ui:repeat value="#{chartController.reportData}" var="c" >
   <tr>
  ...other columns
     <td>
     <ui:repeat value="#{fn:split(c[41], ',')}" var="date">
        <h:outputText value="#{date}" >
             <f:convertDateTime pattern="MM/dd/yyyy" />
        </h:outputText><br />
     </ui:repeat>
     </td>
    </tr>
 </ui:repeat>

 public List<String> getReportData() {
     return reportData;
 } 
```

但是，日期格式不正确，它显示为`30-OCT-11`但我需要它`11/30/2011` 当我处理不需要解析的单个值时，f:convertDateTime 可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:01:38.620

在呈现 HTML 输出期间`<f:convertDateTime>`从`java.util.Date`实例转换为给定模式，在处理表单提交期间从给定模式转换为实例。它不会在模式 X 中转换为模式 Y 中的另一个。`String``String``java.util.Date``String``String`

问题的根本原因在于数据模型相当差，所有内容都被字符串化了。也许你用`ResultSet#getString()`了一路而不是`ResultSet#getObject()`. 此外，一对多关系不应表示为逗号分隔的字符串，而应表示为集合或数组属性。

例如，这个模型代表一条记录：

```
public class ReportDataItem {

    private List<Date> dates;

    // ...
} 
```

引用如下：

```
public List<ReportDataItem> getReportData() {
    return reportData;
} 
```

并呈现如下：

```
<ui:repeat value="#{chartController.reportData}" var="reportDataItem" >
    ...other columns
    <tr>
        <td>
            <ui:repeat value="#{reportDataItem.dates}" var="date">
                <h:outputText value="#{date}">
                    <f:convertDateTime pattern="MM/dd/yyyy" />
                </h:outputText>
                <br />
            </ui:repeat>
        </td>
    </tr>
</ui:repeat> 
```

# c++ - 错误：在 C++ 中使用模板时，'operator<<' 的重载不明确

> ID：16157159
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:47.247
> 
> 标签：c++, templates, g++, llvm

使用 C++ 中的此模板重载 operator<<

```
template<typename T> cEnvir& operator<<(const T& t) {out << t; return *this;} 
```

我有这个模棱两可的错误。

```
error: ambiguous overload for ‘operator<<’ in ‘((cEnvir*)this)->cEnvir::out << t’
/usr/include/c++/4.2.1/ostream:169: note: candidates are: std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long int) [with _CharT = char, _Traits = std::char_traits<char>] <near match>

/usr/include/c++/4.2.1/ostream:173: note:                 std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]

... 
```

对于类型名 T，问题似乎是编译器无法决定匹配。当我注释掉时`/* out << t; */`，编译工作正常。

我该如何解决这个问题？我用`gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T16:31:35.310

如果你的代码中有这个，

```
long x = 1;
env << x; 
```

where`env`是 类型`Envir`，那么模板应该明确地解析为调用正确的流操作符`ostream`。

所以我认为错误出现在模板定义本身之外的某个地方。也许你在某个地方做过这样的事情：

```
env << n; 
```

哪里`env`是 an `Envir`，并且不知何故，`n`是一种可以强制转换为`long`或的类型`unsigned long`，但它不是`ostream::operator<<`已定义函数的任何类型。我不确定那可能是什么类型。

# php - MYSQL 插入 w。未知数量的值

> ID：16157160
> 
> 赞同：-1
> 
> 时间：2013-04-22T21:36:47.497
> 
> 标签：php, mysql, api, codeigniter, insert

当我注册用户 w。facebook 我将从 fb 收到的所有内容输入到我的用户表中，但有时会有空白列，例如 'bio' ，当您不确定哪些值将在发布请求中发送到我的 php api 时，最好的插入方式是什么.

ps 我将 codeigniter 用于我的 rest API，如果这让事情变得更容易的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:26:26.393

将所有无关紧要的值设置为可为空，然后传递所有可能的值。

基本上没有表结构很难回答这个问题，但你要做的是在获取数据之前将所有内容设置为 null，如下所示：

```
$data = array(
    'fbId'=>null,
    'email'=>null,
    'someOtherData'=>null,
    'yetMoreData'=>null
);
$data = $this->whateverYouAreDoingToGetFBData;
$this->db->insert('users',$data); 
```

显然你不希望所有字段都为空，但如果你在获取 Facebook 数据之前设置你的数组，那么只覆盖 FB 提供的值就可以了。

老实说，这是一个非常可怕的想法，决定你想要哪些数据并从那里开始，我很确定你不需要 FB 提供的所有东西，如果它看到你要求，人们也不会注册一切。想想当你得到那个应用程序弹出窗口时，如果应用程序想知道你的整个 FB 历史，你会同意吗？

# regex - 以下 modrewrite 正在生成服务器错误，我不知道为什么

> ID：16157162
> 
> 赞同：0
> 
> 时间：2013-04-22T21:36:55.073
> 
> 标签：regex, apache, mod-rewrite

以下 .htacess 文件在每个 url 上引发服务器错误，并且还破坏了图像/css 引用。

此 modrewrite 取自[Neil Crosby 的](https://stackoverflow.com/users/205096/neilcrosby)回答 [mod_rewrite 以删除 .php 但仍提供 .php 文件？](https://stackoverflow.com/questions/1698464/mod-rewrite-to-remove-php-but-still-serve-the-php-file)

唯一的变化是我已将域更改为 .co.nz 域名。

我需要发生的是：

对于此解决方案，我遵循以下规则：

1.  如果用户试图加载/something.php，他们应该被外部重定向到/something/。
2.  如果用户试图加载 /something 那么他们应该被内部重定向到 /something.php。
3.  如果用户将任何查询字符串参数传递给 URL，那么这些参数应通过重定向保留。
4.  如果用户尝试加载文件系统中确实存在的不同文件（样式表、图像等），则应按原样加载。

这与 modrewrite 应该是完全一样的，只是它抛出了服务器错误。

除此之外，我想检查是否有目录或子目录被引用，所以我认为下面的添加也可以解决这个问题。

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

这是原始的 modrewrite，这会引发服务器错误： - 主 URL（例如，没有尾部斜杠） - 存在的直接文件（例如 /file-name.php） - 存在的真实目录（例如 /directory，并且该目录包含一个索引） - 位于不同目录中的 css 和图像，它们似乎被破坏了。

```
RewriteEngine on
RewriteBase /

## Always use www.
RewriteCond %{HTTP_HOST} ^domain\.co\.nz$ [NC]
RewriteRule ^(.*)$ http://www.domain.co\.nz/$1 [L,R=301]

# Change urlpath.php to urlpath
## Only perform this rule if we're on the expected domain
RewriteCond %{HTTP_HOST} ^www\.domain\.co\.nz$ [NC]

## Don't perform this rule if we've already been redirected internally
RewriteCond %{QUERY_STRING} !internal=1 [NC]

## Redirect the user externally to the non PHP URL
RewriteRule ^(.*)\.php$ $1 [L,R=301]

# if the user requests /something we need to serve the php version if it exists

## Only perform this rule if we're on the expected domain
RewriteCond %{HTTP_HOST} ^www\.domain\.co\.nz$ [NC]

## Perform this rule only if a file with this name does not exist
RewriteCond %{REQUEST_FILENAME} !-f

## Perform this rule if the requested file doesn't end with '.php'
RewriteCond %{REQUEST_FILENAME} !\.php$ [NC]

## Only perform this rule if we're not requesting the index page
RewriteCond %{REQUEST_URI} !^/$

## Finally, rewrite the URL internally, passing through the user's query string
## using the [qsa] flag along with an 'internal=1' identifier so that our first
## RewriteRule knows we've already redirected once.
RewriteRule ^(.*)$ $1.php?internal=1 [L, QSA] 
```

此外，我对 modrewrite 和 regex 的基本了解非常少，因此对于分解每个命令及其含义的任何帮助也将不胜感激。

# facebook - 定义 Open Graph Post 的显示方式

> ID：16157165
> 
> 赞同：10
> 
> 时间：2013-04-22T21:36:59.587
> 
> 标签：facebook, facebook-opengraph

我正在成功向 Facebook 发布自定义 Open Graph 对象/操作。

我们的生产和登台环境都有自己的 FB 应用程序，它们的配置相同（除了在我们的生产应用程序中，对象和操作已获得批准，我们的应用程序详细信息页面也是如此）。

不过，出于某种原因，登台是张贴一张较大的照片，下面有标题/描述。生产帖子的图片较小，所有文字都在右侧。

我不记得在舞台上做了什么特别的事情，但最后，我们希望制作中的帖子看起来像在舞台上做的那样。知道我需要调整哪个设置吗？

**更新：** [我了解到](http://developers.facebook.com/docs/concepts/opengraph/distribution/#image)图像较大的故事被称为“图像主导的故事”。上面链接中提到的关于如何获得这个新布局的唯一内容是：

> 使用大于 200 x 200 像素的图像大小由 Open Graph 帖子生成的更大的 News Feed 故事布局。

使用 FB 调试器，可以看到 FB 抓取的两张图片都是 600x600：

*   [生产故事](http://developers.facebook.com/tools/debug/og/object?q=http://www.afar.com/highlights/kamal-mouzawaks-beirut-lebanon)（小布局）
*   [舞台上的故事](http://developers.facebook.com/tools/debug/og/object?q=http://staging.afar.com/highlights/kamal-mouzawaks-beirut-lebanon)（大布局）

![在此处输入图像描述](https://i.stack.imgur.com/x2gbi.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T18:11:37.497

令人沮丧的是，您无法调整任何设置，而且您的帖子将如何显示在某人的新闻提要中完全超出您的控制。如果你想要“以图像为主导”的显示风格，你的照片需要 >= 200x200，但除此之外，Facebook 会决定它如何显示某些内容。

经过几天的努力并通过网络阅读所有内容并最终放弃后，我发现了这一点。我们发布了这个功能，我只是告诉我的同事我们无能为力。

然后，在我的动态消息中，我看到了一位同事的帖子，它们被格式化为小图像。那天晚些时候，她发了一封电子邮件感谢我，因为她对 OG 与我们网站的集成感到兴奋，她发送的屏幕截图在她的提要中包含她的帖子以及大图。

相同的人，相同的帖子，在两个不同的提要中显示不同的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-03T11:57:02.217

如果有人遇到此问题，您可以通过设置以下内容来解决它：

1）在操作类型内的打开图形控制台上标记此选项 - >用户生成的照片 - 让用户在他们的设备上包含使用相机拍摄的照片

2) 在你的 SharePhoto 上 setUserGenerated 为真。

```
SharePhoto photo = new SharePhoto.Builder()
                .setUserGenerated(true)  // Necessary to post a big image
                .setBitmap(shareItem.getImage())
                .build(); 
```

# css - CSS 和图像错误 - 不显示图像

> ID：16157169
> 
> 赞同：0
> 
> 时间：2013-04-22T21:37:09.990
> 
> 标签：css, image

我在尝试定位我的图像时遇到了一个小问题，它没有按我的意愿显示，我一直在寻找答案几个小时。我希望我的图片显示为箭头点： ![在此处输入图像描述](https://i.stack.imgur.com/6fNzD.png) 我希望这张图片的宽度为 100%，我只是不能让它看起来像我想要的那样。我可以比较它看起来像的壁橱是 facebook 封面图片（顶部的菜单，一个大图像和一些小的 soundclouds 和 facebook，就像我已经拥有的 ;) ）。对不起我的英语：s

----我的html（对不起，如果它不可读，我会根据要求复制和上传所有内容）----

```
<html>
<head>
<link rel="stylesheet" id="default-css" href="default.css" type="text/css" media="all">
</head> 
<div id="cover-image" class="clearfix"></div>
<footer id="site-footer">
<iframe  width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F83233916"></iframe>

<object height="81" width="100%"> 
    <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F83233916&amp;show_comments=true&amp;auto_play=false&amp;color=343538&amp;theme_color=343538&amp;show_user=true&amp;show_bmp=true&amp;show_artwork=true&amp;show_bmp=true"></param> 
<param name="allowscriptaccess" value="transparent"></param> 
<embed allowscriptaccess="always" height="81" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F83233916&amp;show_comments=true&amp;auto_play=false&amp;color=343538&amp;theme_color=34353&amp;show_user=true&amp;show_bmp=true&amp;show_artwork=true&amp;show_bmp=true" 
    type="application/x-shockwave-flash" width="100%"></embed>
</object>
- Control areal -
<div class="plugin_example" id="u_0_9"><div data-href="http://www.facebook.com/DjSalling"data-send="true" data-show-faces="true" data-colorscheme="dark" class="fb-like >dark_background fb_edge_widget_with_comment fb_iframe_widget" fb-xfbml->state="rendered><span width="100%" height="61"><iframe id="f30076c07" name="f2303a14a8" scrolling="no" style="border: none; overflow: hidden; height: 61px; width: 100%;" title="Like this content on Facebook." class="fb_ltr" src="http://www.facebook.com/plugins/like.php?api_key=113869198637480&amp;locale=da_DK&amp;sdk=joey&amp;channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D22%23cb%3Df20c4c7538%26origin%3Dhttp%253A%252F%252Fdevelopers.facebook.com%252Ff5cc88ac%26domain%3Ddevelopers.facebook.com%26relation%3Dparent.parent&amp;href=http%3A%2F%2Fwww.facebook.com%2FDjSalling&amp;node_type=link&amp;width=450&amp;layout=standard&amp;colorscheme=dark&amp;show_faces=true&amp;send=true
&amp;extended_social_context=false"></iframe></span></div></div>
</footer>
</body>
</html> 
```

---- CSS ----

```
#cover-image {
      background-image: url(background_cover.jpg);
      background-repeat: no-repeat;
      background-position: left top;
        }

#site-footer { position: relative; 
    position: absolute: bottom;
    background: url(footer-divider.png) center top no-repeat;
    background-size: 100%;
    margin: 0px 0 200px 0;
    padding: 27px 0 0;
    clear: both;
        }

    #inner-footer { 
    position: absolute;
    bottom: 0;
    left: 0; 
        }

        #inner-footer .content {
            color: #bcbcbc;
            background: #272729;
            background: rgba(0,0,0, 0.15);
            background-repeat: no-repeat;
            padding: 10px;

            height: 72px;

            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
        } 
```

感谢大家 ：）

**编辑：**

@ 3rror404 谢谢，但是我的宽度是 100%，所以图像缩放会随着浏览器的大小移动并自动从 2560x1600 缩小？

```
#cover-image {
    width: 100%;
    height: 400px;
    background-image: url(background_cover.jpg);
    background-repeat: no-repeat;
    background-position: left top; 
```

现在高度为 400xp 但甚至无法查看整个图片

正如您在此处看到的，宽度有效，高度无效

@Kamal我使用了你的css，但是当我来回拖动浏览器窗口时，我可以看到图像刚刚被切断，并且在一个狭窄的浏览器窗口中，从声音云到图片有很大的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:36:06.650

我不确定我是否遵循了您的问题..但是您的意思是您设置为背景属性的图像应该缩放到容器的宽度吗？

```
#cover-image {
width: 100%;
height: 400px;
background-image: url(background_cover.jpg);
background-repeat: no-repeat;
background-size:100%;
background-position: left top; 
```

应该使您的背景图像宽度适合容器宽度..这是您要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:06:04.630

如果我正确理解你想要的问题`background-size: cover`

```
#cover-image {
    height: 400px;
    background: url(background_cover.jpg) center center;
    background-size: cover;
} 
```

这将迫使您的背景图像覆盖整个容器，同时保持纵横比并保持水平和垂直居中。

[演示](http://jsfiddle.net/Xsn7H/2/)（调整浏览器大小）

* * *

编辑

好的，如果您不关心维护纵横比使用`background-size: 100% 100%`

```
#cover-image {
    height: 400px;
    background: url(background_cover.jpg);
    background-size: 100% 100%;
} 
```

这会将您的背景图像缩放到容器的 100% 高度和 100% 宽度，即使这意味着拉伸或挤压图像。

[演示](http://jsfiddle.net/Xsn7H/7/)

# google-search-console - Google Webmaster Tools API：通过 OAUTH2 下载查询

> ID：16157170
> 
> 赞同：4
> 
> 时间：2013-04-22T21:37:29.630
> 
> 标签：google-search-console

我正在尝试使用 Google 的网站管理员工具 API 下载最近搜索查询的 CSV 文件。

我知道如何在[http://googlewebmastercentral.blogspot.com/2011/12/download-search-queries-data-using.html使用他们的 Python 示例来做到这一点](http://googlewebmastercentral.blogspot.com/2011/12/download-search-queries-data-using.html)

但我想使用 OAUTH2。

问题出在：CSV 下载的下载 url 是：

/webmasters/tools/downloads-list?hl=%s&siteUrl=%s

但是 Google 数据 API 只允许我使用 OAUTH2 来对付：/webmasters/tools/feeds/sites/

因此，我在进行身份验证时获得的令牌不提供访问权限。

他们可以通过 OAUTH2 获得一些数据，而其中一些只使用用户名/密码，这似乎很疯狂。

有谁知道我可以用来通过 OAUTH2 下载查询报告的请求 URI？还是这个 API 看起来很疯狂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T20:34:27.853

我的 $.02 会是“是的，它看起来很疯狂。”

如果您查看 Google API 控制台 ( [https://code.google.com/apis/console](https://code.google.com/apis/console) )，Webmaster Tools API 明显不存在。

我试图走同样的路并将 OATH2 用于 GWT API，但无法使其工作。使用“基本身份验证”是唯一的解决方案。

**编辑 2015 年 4 月：基本身份验证已被 Google 撤销，不再有效**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:23:37.327

我刚刚遇到这个，我确信它必须使用 OAuth2 才能实现，对应于这句话：

在 Google API 控制台的服务窗格中激活 Google Site Verification API。（如果它未在控制台中列出，则跳过此步骤。）

[https://developers.google.com/site-verification/v1/getting_started](https://developers.google.com/site-verification/v1/getting_started)

# java - 事务服务的理解——spring

> ID：16157175
> 
> 赞同：0
> 
> 时间：2013-04-22T21:37:44.277
> 
> 标签：java, spring, transactions

我有一个具有特定方法的服务实现，如下所示：

```
public class ExampleServiceImpl implements ExampleService {
  @AutoWired
  @Resource
  private RecordRepository recordRepository;

  private void processRecord() {
     // some code here
  }
  @Transactional(readOnly=false)
  public void processRecord(Record a) {
     Record original = getOriginal(a);
     recordRepository.saveChanges(a,original);
  }
} 
```

Record 类是对象图的根对象。RecordRepository 看起来类似于下面的子存储库，用于保存图中对象的各种子级。

```
public class RecordRepository extends BaseRepository<Record> {
   @AutoWired
   @Resource
   private IDao databaseDao;

   @AutoWired
   @Resource
   private SubRecordRepository subRecordRepository;

   public void saveChanges(Record a, Record b) {
      //Perform some processing on a, b
      for(SubRecord subA : a.getSubRecords()) {
         subRecordRepository.saveChanges(subA);
      }
      databaseDao.updateRecord(a);
   }
}

public class DatabaseDao extends NamedParameterJdbcDaoSupport implements IDao {

   @Autowired
   public DatabaseDao(@Qualifier("org.somewhere.Datasource") DataSource ds) {
       super();
       this.setDataSource(ds);
   }

   public void updateRecord(Record inRecord) {
       String query = (String) sql.get("updateRecord");
       SqlParameterSource parms = new BeanPropertySqlParameterSource(inRecord);
       getNamedParameterJdbcTemplate().update(query, parms);
   }

   public void insertSubRecord(SubRecord inSubRecord) {
       String query = (String) sql.get("insertSubRecord");
       SqlParameterSource parms = new BeanPropertySqlParameterSource(inSubRecord);
       getNamedParameterJdbcTemplate().insert(query, parms);
   }

   // other update and insert methods
} 
```

事务是否会应用于 processRecord 调用中所有涉及的插入\更新？换句话说，如果插入或更新失败，之前从 ExampleServiceImpl.processRecord 调用的所有插入和更新都会回滚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:46:18.977

是的。事务方面确保在调用带注释的方法之前启动事务，并且一旦方法返回，事务（如果由此方法启动）被提交或回滚。

事务拦截器不知道（也不关心）在带注释的方法中调用了哪些其他方法。Spring 事务管理器处理的对 DataSource 的每次读取和写入都将包含在同一个事务中。

# matlab - 如何在Matlab中将图像渲染到屏幕外？

> ID：16157176
> 
> 赞同：0
> 
> 时间：2013-04-22T21:37:59.603
> 
> 标签：matlab, graphics

我有一组 3D 平面凸多边形，我可以在 Matlab 中使用`patch`. 不过，作为我的代码的一部分，我需要在 3D 环境中有效地将补丁渲染到虚拟相机的图像平面。

我基于代码的算法使用 OpenGL 光线跟踪来渲染图像，但我不知道如何在 Matlab 中或从 Matlab 中做到这一点。

如何从 matlab 脚本中快速进行此渲染？

# .htaccess - 如何 .htaccess 将域重定向到子域，同时保持主域不变

> ID：16157179
> 
> 赞同：0
> 
> 时间：2013-04-22T21:38:03.397
> 
> 标签：.htaccess, redirect, dns, subdomain

我想重定向我域下的所有 url

domain.com/urls、www.domain.com/profile/user1.html 等到 subdomain.domain.com/urls 和 subdomain.domain.com/profile/user1.html 等。

但我不想将 domain.com 和 www.domain.com 重定向到 subdomain.domain.com

可以通过htaccess吗？

编辑：我只想重定向内部页面和文件。但保留主要 domain.com 完好无损。

更多示例

```
domain.com/page1.html to subdomain.domain.com/page1.html

www.domain.com/members/admin.html to subdomain.domain.com/members/admin.html

www.domain.com to www.domain.com (no redirection here) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:05:48.100

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/.+
RewriteCond %{REQUEST_URI} !^/index\.(php|htm)
RewriteCond %{HTTP_HOST} !^subdomain.domain.com$ [NC]
RewriteRule ^ http://subdomain.domain.com%{REQUEST_URI} [L,R] 
```

如果要永久重定向，请将方括号更改为：`[L,R=301]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:22:33.957

*您可以通过不*重写和使用第二条规则重定向其他所有内容来首先处理主页

```
RewriteRule ^$ - [L]
RewriteCond %{HTTP_HOST} !^subdomain.domain.com$
RewriteRule ^.+$ http://subdomain.domain.com/$0 [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

# matplotlib - 如何在 matplotlib 子图中删除填充/边框

> ID：16157180
> 
> 赞同：5
> 
> 时间：2013-04-22T21:38:05.320
> 
> 标签：matplotlib

第二个子图只是第一个绘制了覆盖图的图像。在第二个图中，似乎有白色填充/边界。如何删除此填充/空白？

![在此处输入图像描述](https://i.stack.imgur.com/jjUAE.png)

为了完整起见，这里是执行绘图的代码片段：

```
fig, ax = plt.subplots(1, 2)
fig.set_size_inches(16, 6, forward=True)
plt.subplots_adjust(0.05, 0.05, 0.95, 0.95, 0.05, 0.05)
ax[0].set_title("Region Labels")
ax[0].imshow(image_labels)

ax[1].set_title("Region Connectivity Graph")
ax[1].imshow(image_labels)
for edge in edges:
    ax[1].plot([centers[edge[0]][0],centers[edge[1]][0]],
             [centers[edge[0]][1],centers[edge[1]][1]]) 
for a in ax:
    a.set_xticks(())
    a.set_yticks(())
plt.show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T06:59:08.250

默认情况下，Matplotlib 会为绘制的数据添加一些边距。我无法测试它，因为它没有你的`image_labels`and `centers`，但这应该正常工作：

```
ax[1].autoscale_view('tight') 
```

另一种方法是手动设置轴的 xlim 和 ylim：

```
ax[1].set_xlim(0,image_labels.shape[1])
ax[1].set_ylim(0,image_labels.shape[0]) 
```

# iphone - 如何从表视图中获取 indexPath？

> ID：16157182
> 
> 赞同：0
> 
> 时间：2013-04-22T21:38:09.950
> 
> 标签：iphone, sdk, path, indexing

因此，在我的基于 的应用程序中`UITableViews`，我得到了`indexPath`如下方法的 for 行`didSelectRowAtIndexPath:`：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];

    // Extract Data

    CTCoreMessage *message = [[self allMessages] objectAtIndex:row];
} 
```

我的问题是，如果我想收到`indexPath`in`IBAction`怎么办？`NSIndexPath`由于方法的标头中没有声明，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:34:47.993

我已经用这段代码解决了问题，感谢所有帮助过的人！

```
NSUInteger nSections = [self.messagesTable numberOfSections];
NSUInteger nRows = [self.messagesTable numberOfRowsInSection:nSections];
NSInteger lastSection = nSections - 1;
NSInteger lastRow = nRows - 1;
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:lastRow inSection:lastSection]; 
```

再次感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:19:29.163

但是您并不真正想要索引路径，您想要行，是吗？您需要配置操作的发送者（某些`UIControl`）以了解您的行。

选项 1：设置发件人标签属性（快速简单）。

选项 2：子类化发送者并添加一个属性来存储行（技术上正确）。

您配置发送者的位置取决于您创建它的方式和位置以及它与表格视图的关系，可能在`-tableView:cellForRowAtIndexPath:`.

# django - 使用 TemplateView 将方法视图迁移到基于类的视图

> ID：16157184
> 
> 赞同：2
> 
> 时间：2013-04-22T21:38:11.190
> 
> 标签：django, django-1.5

在 Django 1.4 及之前的版本中，我的视图如下所示：

```
def myview(request, item_id):
    item = get_object_or_404(Item, item_id)

    if request.method == "GET":
        return direct_to_template(request, "template.html", 
            { 'form': ItemForm() })
    elif request.method == "POST":
        form = ItemForm(request.POST)

        if form.is_valid():
            return redirect("/")
        else:
            return direct_to_template(request, "template.html",
                { 'form': form }) 
```

我想重写它以与使用 TemplateView 的 Django 新的基于类的视图系统兼容，但我不确定如何实现这些方法。如何迁移到使用`TemplateView`子类来实现 POST 和 GET？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:44:45.660

您可能想使用[FormView](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/#formview)：

```
class ItemFormView(FormView):
    template_name = 'template.html'
    form_class = ItemForm
    success_url = '/' 
```

# linux - .bashrc 代码在首次登录时每天执行 1 次

> ID：16157187
> 
> 赞同：2
> 
> 时间：2013-04-22T21:38:15.570
> 
> 标签：linux, bash

有没有办法让我的 .bashrc 文件中的特定代码仅在一周中特定日期的第一次登录时执行？我已经知道使用命令替换“$(date +%u)”会给我一个 1-7 的数字，对应于一周中的每一天（1 是星期一）。但是，我不希望此代码在每次后续登录时都执行一整天。任何提示将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:16:25.203

您不必将任何内容写入磁盘。

我会从命令中提取日期：lastlog -u $USER and date

然后进行适当的匹配/比较。

逻辑是这样的：

```
    从日期获取日期
    如果从日期开始的一天是神奇的一天，那么
      从 lastlog -u $USER 获取一天
      如果日期与今天不匹配，则
        运行你的命令

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:04:49.167

您还可以使用所谓的“信号量文件”，如下所示：

```
if [[ ! -e /tmp/$(date +%u).sem ]]
then
    touch /tmp/$(date +%u).sem
    # Do your one-time stuff
fi 
```

但是，如果您选择哪种方法，我建议您使用完整日期（日期 +“%Y%m%d”）以避免如果用户在星期一登录，而他的下一次登录是在下星期一，则可能出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:01:07.477

```
date +%u |                  ## Generate timestamp (could be a better date-spec)
   tee timestamp.tmp |      ## Save a copy for later usage
   cmp - timestamp ||       ## Fail if date-spec changed
   {  
      ## In that case, update timestamp
      mv timestamp.tmp timestamp && 

      ## And only if that succeeds, run your code
      echo "Once a day" ;
    } 
```

我更喜欢在运行 de 命令之前触摸时间戳，因为通常不运行任何东西比重复运行它更安全。（分区可能已重新安装为只读，磁盘可能已满，权限可能已更改...）

# objective-c - 可变数组对象类型

> ID：16157188
> 
> 赞同：0
> 
> 时间：2013-04-22T21:38:32.807
> 
> 标签：objective-c

我第一次在 Objective C 上编程，来自 C++（到目前为止，我更喜欢后者！）。我有一个关于可变数组的问题，即我想创建一个具有我的对象之一的特定类型“CMParticle”，而不是通用 ID 类型。要从我的可变数组访问我的对象中的数据，我必须每次都将它转换为我的对象之一（我认为这很麻烦），如下所示：

```
rij[0] = ((CMParticle *)particles[*pi]).crds[0] - ((CMParticle *)particles[*pj]).crds[0]; 
```

其中“粒子”是我的可变 CMParticle 对象数组。我宁愿这样做

```
rij[0] = particles[*pi].crds[0] - particles[*pj].crds[0]; 
```

在此之前，我像这样声明我的可变数组：

```
particles = [NSMutableArray array]; 
```

如果我能以某种方式用我的类型声明这个数组，那就太好了，这样我就不必每次都进行类型转换。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:47:34.963

您尝试做的事情在Objective C中实际上没有意义。

C++ 容器是同质的，但通用的。您可以有 a`vector<CMParticle>`或 a `vector<int>`，它们是不同的类型。

ObjC 容器是异构的。你只有一个`NSArray`，它可以容纳`CMParticle`对象、`NSNumber`对象或其他任何东西，所有这些都混合在一个大数组中。

您通常根本不需要这些演员表。如果你想发送消息到`my_array[3]`，就这样做`[my_array[3] doSomething:15]`。就像高级语言（Python、Ruby、Smalltalk、Javascript 等）一样。

唯一的问题是（与 Python 等不同），在某些情况下您*确实*需要演员表。最关键（也是最烦人的），如果你想直接访问成员，你必须先施法。这是 ObjC（与 Python 等不同）鼓励您使用`@property`和/或显式访问器而不是直接访问成员的原因之一。（另外，作为一个更小的烦恼，因为变量已经声明了类型，你不能只写`tempval = my_array[3];`，你必须指定类型，比如：`CMParticle *tempval = my_array[3]`。）

另一种看待这个问题的方式：C++ 扩展了 C 的静态、弱类型系统，为您提供更强大的静态类型系统；ObjC 改为使用单独的*动态*类型系统（不幸的是，现有的 C 内容保持不变，这是偶尔出现问题的地方）。

您可以很容易地编写自己`NSMutableArray`的通用子类（在运行时获取该类，当然与 C++ 的编译时不同）和同质的，但所做的只是添加限制；元素仍将`id`无处不在。*解决这个*问题的唯一方法是为每个数组编写一个自定义类：`MutableCMParticleArray`、、`MutableNSNumberArray`等。

# core-data - 核心数据插入行和保存问题

> ID：16157190
> 
> 赞同：1
> 
> 时间：2013-04-22T21:38:47.693
> 
> 标签：core-data, uitableview, nsfetchedresultscontroller, nsmanagedobject

在将数据保存在核心数据以及行组织时，我遇到了一些问题，为了更好地理解我的问题，我将解释我所拥有的：

我有一个使用动态行的主表视图，在这个表视图中我有一个 + 按钮，每当按下 + 按钮时，如果用户可以选择“单元格类型”插入到主表视图中，就会在弹出窗口中出现一个表视图。“单元格类型”是自定义单元格，它们是一类和 xib 文件。每个自定义单元格都有各种文本字段......所以想法是：

1.  选择一种单元格类型并插入到主表视图中。
2.  用数据填充文本字段。
3.  保存的数据对应于插入的行数和文本字段中的数据。

**当调用弹出表视图时，我的主表视图中有这个方法：**

```
- (IBAction)Add:(id)sender
{

SelectProduct *typeProduct=[[self.storyboard instantiateViewControllerWithIdentifier:@"selectTable"]initWithTableViewTag:self.tableView.tag];
self.popover=[[UIPopoverController alloc]initWithContentViewController:typeProduct];
[popover presentPopoverFromBarButtonItem:buttonAdd permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
typeProduct.popView = self.popover;
typeProduct.cellSelected = self.cellSelected; //cellSelected is core data subclass.
typeProduct.delegate = self;
typeProduct.managedObjectContext = self.managedObjectContext;
} 
```

**然后在我的popover tableview的didSelectRow中，我有：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
row = indexPath.row;

if (row == 0)
{
    cellSelected=[NSEntityDescription insertNewObjectForEntityForName:@"CellSave" inManagedObjectContext:self.managedObjectContext];
    cellSelected.nameCellData = @"Olive";
    cellSelected.amountData = myCostumCell.amount.text;   
} 
```

**从这里，一个单元格被插入到我的主表视图中，这是我的主表视图相关方法：**

```
- (void)viewDidLoad
{
[self.tableView registerNib:[UINib nibWithNibName:@"myCostumCellXib" bundle:nil] forCellReuseIdentifier:@"myCostumCell"];

AppDelegate *appDelegate =[[UIApplication sharedApplication] delegate];
self.managedObjectContext=[appDelegate managedObjectContext];

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) 
{
    // Replace this implementation with code to handle the error appropriately.
    // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

[self fetchedResultsController];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
static NSString *CellIdentifier = @"myCostumCell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell.cellSelected = self.cellSelected;
cell.managedObjectContext = self.managedObjectContext;

if (cell == nil)
{
    cell = [[MyCostumCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cellSelected = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.nameCell.text = cellSelected.nameCellData;

if ([cellSelected.nameCellData isEqualToString:@"Olive"])
   {
    cell.amount.text = cellSelected.amountData;
    // i have more textfields to assign but i think you understand the rest..
   }
} 
```

**我的 fetchedResultsController 方法：（也有其他方法，但它们是标准的东西）**

```
- (NSFetchedResultsController *)fetchedResultsController
{

if (_fetchedResultsController != nil)
{
    return _fetchedResultsController;
}

// Create and configure a fetch request.
NSFetchRequest *fetchRequestCellSave = [[NSFetchRequest alloc] init];
NSEntityDescription *entityCellSave=
[NSEntityDescription entityForName:@"CellSave" inManagedObjectContext:self.managedObjectContext];
[fetchRequestCellSave setEntity:entityCellSave];

// Create the sort descriptors array.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"nameCellData" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequestCellSave setSortDescriptors:sortDescriptors];

_fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequestCellSave managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"nameCellData" cacheName:nil];
_fetchedResultsController.delegate = self;
self.fetchedResultsController = _fetchedResultsController;

return _fetchedResultsController;

} 
```

现在，如果我想退出主表视图并转到另一个表视图，我知道我必须将文本字段的内容保存在我的 managedObject 中，所以：

```
- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];

    cellSelected.amountData = cell.amount.text;

    //i have more textfields to assign but for the example i think you understand
      what i want.

    [self.managedObjectContext save:nil];

} 
```

从这里开始，一行被“保存”并且数量中的文本也......但是当我再添加一行时问题就开始了：

1.  为什么新行出现在 tableview 的顶部，而不是在插入的前一行之后？

2.  当我填充插入的第二行的文本字段（数量）时......退出表格视图并返回......文本字段似乎没有填充......我做错了什么？

3.  如果我一次插入 2 行，则会发生上一个问题，但是如果我插入一个...退出表格视图，然后返回并插入另一行...保存文本字段数量...

我的问题在哪里？它在我的自定义单元格中吗？在哪里？...我很抱歉发了这么长的帖子，但这让我发疯了...

谢谢你的时间

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:52:49.127

您需要在输入数据后立即保存数据，而不仅仅是在视图从显示中删除时保存。一旦一个单元格滚动到屏幕外，它将被重新使用或杀死，因此您必须在此之前保存您的文本。最好的地方是文本更改时的文本字段委托回调。

当您在保存之前添加 2 行时，您的内部状态已损坏（当添加了第二行但您尚未保存第一行的数据时）。

您的行按输入的文本排序，因此它取决于文本（或缺少）来确定它在屏幕上的显示位置。

您可能不应该为单元格提供对托管对象上下文（而不是 MVC）的引用。

您还应该考虑局部变量和实例变量之间的区别，因为您的代码似乎混淆了它们......

# sql - SQL 过滤空列

> ID：16157196
> 
> 赞同：1
> 
> 时间：2013-04-22T21:39:18.733
> 
> 标签：sql, sql-server

我有一个像这样的查询

```
select *
from tableName
where x='3' 
```

这给了我一些结果，但我不想看到每行都为 Null 的任何列。有没有一种简单的方法可以过滤掉这些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:43:42.000

不，没有。

你所追求的是一些语法，比如

```
select <column list::filter(where all rows are NULL)> 
```

但是，这没有任何意义。不是一般意义上的。在 SSMS 或一次性查询工具中使用它可能看起来很酷，但对于 Joe Public 在 ASP.Net 等程序中的日常使用，谁会想要不可预测的列数？

现在，如果您真的想这样做，可以使用动态 SQL 来实现，但是您必须以这种方式查询它必须编码为 ONCE-PER-TABLE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:24:03.347

您可以使用动态 SQL 尝试一些疯狂的东西，但我真的不推荐这样做。

此查询检查前两列是否都具有空值，然后将它们添加到 select 语句。如果你真的想这样做，你可以对表中的所有列都使用相同的方法。

```
DECLARE @sql nvarchar(1000)
DECLARE @columnList nvarchar(1000)
SET @columnList = ''

DECLARE @tableRowCount int
DECLARE @columnRowCount int

SET @tableRowCount = (select COUNT(*) from tableName)

SET @columnRowCount = (select COUNT(*) from tableName where column1 is null)
IF @tableRowCount <> @columnRowCount 
    SET @columnList = @columnList + 'column1, '

SET @columnRowCount = (select COUNT(*) from tableName where column2 is null)
IF @tableRowCount <> @columnRowCount 
    SET @columnList = @columnList + 'column2, '

IF LEN(@columnList) > 0
    SET @sql = 'SELECT ' + SUBSTRING(@columnList,1, LEN(@columnList) - 1) + ' FROM tableName'
ELSE
    SET @sql = 'SELECT * FROM tableName'

EXEC(@sql) 
```

# linux - AMI 上的 AWS EC2 apache 日志文件位置

> ID：16157197
> 
> 赞同：7
> 
> 时间：2013-04-22T21:39:20.030
> 
> 标签：linux, apache, logging, amazon-web-services, ec2-ami

我正在学习 AWS 和 EC2。我设置了一个 AMI linux 机器，它从 yum 运行 apache 和 mysql 设置。它工作了一段时间，但现在它变平了。这很奇怪，所以我想去检查日志。我正在通过腻子终端四处走动，但找不到日志文件的位置。有谁知道那里存储了信息。谢谢你的帮助。

编辑：我想概括并询问系统创建的任何重要日志文件的位置。这是新事物，因此任何有用文件的位置以更好地了解正在发生的事情会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-09T20:20:00.010

/var/log 目录通常包含应用程序和 unix 日志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-23T06:33:30.293

> AWS服务器下的ubuntu

```
sudo tail -100 /var/log/apache2/error.log 
```

> linux

```
/var/log 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-17T15:58:52.440

查找日志的更通用方法，因为根据安装和版本，特定文件通常位于不同的位置，因为我发现我的与以前的答案不同：

`/var/log/`是应用程序日志的常用位置。

如果它处于限制性权限下，您可以`sudo ls /var/log`获取其下的文件和目录列表以查找您的查询。

根据 apache 的版本，日志通常位于`/var/log/apache2`OR下`/var/log/httpd`。同样，如果您想在此目录下查找您要查找的特定文件，请尝试`sudo ls $location$`.

我的碰巧在`/var/log/httpd/error_log`我在 ec2 上的安装中，但 error.log 是另一个常见的文件名。

较旧的错误日志，以及相应的访问日志，在轮换出来后也保存在这里，带有轮换发生时间的时间戳。

然后查看文件最后 100 行或 X 行的快速方法是使用`tail -100 /var/log/httpd/error_log`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-23T06:21:34.167

`/var/log`如果你在try中找不到它`/usr/local/apache/logs`。

# php - 如何使用 PHP 创建一个打开新窗口的链接？

> ID：16157198
> 
> 赞同：0
> 
> 时间：2013-04-22T21:39:28.933
> 
> 标签：php, javascript, html, hyperlink

我目前正在尝试创建一个像这样的链接：

```
<a href="http://www.mymra.com" onClick="mywindow=window.open('http://www.mymra.com','mywindow','toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width=900,height=600'); return false;">Motorcycle Insurance</a></li> 
```

在 PHP 中。我试图通过我的一个 php 文件中的链接来执行此操作，但是我无法让它正常工作，也无法在没有任何错误的情况下加载。

这是我一直在使用的代码：

```
 echo '
  <a href="'.$ad_link.'" onClick="javascript: pageTracker._trackPageview(\'/outgoing/'.$ga_link.'\'); mywindow=window.open('.$ad_link.');" target=\"_blank\" title="'.$ad_alt.'"'.$ad_target.'>
  <img src="http://'.$ad_image.'" border="0" alt="'.$ad_alt.'" width="150px" height="150px" /></a>'; 
```

我很好奇我需要做什么才能使链接正常工作。

我已经尝试过：

*   准确复制并粘贴代码。（编辑链接除外）
*   剪掉代码，取出我认为可能导致错误的任何内容。
*   重新组装代码以使其工作。

我自己无法创建解决方案，所以我转向社区。如果有人至少可以引导我朝着正确的方向前进，我将不胜感激。

我上面提供的 php 代码片段不是必需的。我只需要一个示例代码即可。

感谢你们对我的帮助！

我尝试使用：

```
echo '
<a href="'.$ad_link.'" onclick="pageTracker._trackPageview(\'/outgoing/'.$ga_link.'\'); mywindow=window.open('.$ad_link.'); return false;" target=\"_blank\" title="'.$ad_alt.'"'.$ad_target.'>
<img src="http://'.$ad_image.'" border="0" alt="'.$ad_alt.'" width="150px" height="150px" /></a>'; 
```

但是，它会将 http: 之后的 // 视为注释标记，而不是对 http: 的补充，这是我之前遇到的问题之一。

我也在寻找一个灯箱，但是为了将来参考，我需要帮助来回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:57:07.550

尝试：

```
 echo '
  <a href="'.$ad_link.'" onclick="pageTracker._trackPageview(\'/outgoing/'.$ga_link.'\'); mywindow=window.open('.$ad_link.'); return false;" target=\"_blank\" title="'.$ad_alt.'"'.$ad_target.'>
  <img src="http://'.$ad_image.'" border="0" alt="'.$ad_alt.'" width="150px" height="150px" /></a>'; 
```

我不知道`$ad_target`应该包含什么，因此是否可以将其放置在那里：无论如何：开头`onclick`是`javascript:`不正确的，而且您`return false;`在结尾缺少`onlick`.

尝试查看回显的 html 并检查其中的错误，任何 js 控制台（即来自 Chrome 或 Firebug）也可能会有所帮助。

# css - CSS 媒体查询——它们应该在哪里定义？

> ID：16157200
> 
> 赞同：1
> 
> 时间：2013-04-22T21:39:31.350
> 
> 标签：css, media-queries

是否对定义 CSS 媒体查询的位置有偏好？即我应该像这样从我的html中调用它们：

```
<link rel="stylesheet" media="only screen and (min-width: 350px)" href="../assets/css/350.css" />
<link rel="stylesheet" media="only screen and (min-width: 768px)" href="../assets/css/768.css" />
<link rel="stylesheet" media="only screen and (min-width: 992px)" href="../assets/css/992.css" /> 
```

或者我应该维护一个 CSS 文件并在那里定义媒体查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:42:40.633

Whatever works best for you, really.

Personally I prefer defining them inside my main CSS file, alongside the rules that they affect. For example:

```
#someElement {font-size:24pt;}
@media all and (min-width:350px) {
    #someElement {font-size:12pt}
} 
```

This keeps them close together so I don't lose track of them. It also means fewer HTTP requests.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:51:13.130

就个人而言，我会将所有内容都放在一个文件中。您可以（或应该）通过使用 CSS 预处理器（如 less 或 sass）来管理代码的大小和结构。这样，您可以在多个文件中进行开发，并在将它们上传到您的网络服务器之前将它们组合/最小化。

使用单个文件的主要原因是速度。通常一个额外的请求比下载额外的几千字节需要更长的时间。这也是雅虎和谷歌等“大公司”的建议......

# haskell - 用 foldr 构建平衡二叉树

> ID：16157203
> 
> 赞同：7
> 
> 时间：2013-04-22T21:39:37.257
> 
> 标签：haskell, recursion, binary-tree, fold, higher-order-functions

我编写了`foldTree`从列表构建平衡二叉树的函数。我必须使用`foldr`，没关系，我用过，但我使`insertInTree`函数递归=（现在我只知道这种方式可以穿过树=））。

**更新**：我不确定功能`insertTree`：递归计算高度是否正确？=((这里需要一些帮助。

`insertInTree`是否可以在没有递归的情况下编写（带有 的东西`until/iterate/unfoldr`）或在`foldTree`没有辅助函数的情况下编写函数 => 以某种方式更短？

这是我在下面的尝试：

```
data Tree a = Leaf
            | Node Integer (Tree a) a (Tree a)
            deriving (Show, Eq)

foldTree :: [a] -> Tree a
foldTree = foldr (\x tree -> insertInTree x tree) Leaf

insertInTree :: a -> Tree a -> Tree a
insertInTree x Leaf = Node 0 (Leaf) x (Leaf)
insertInTree x (Node n t1 val t2) = if h1 < h2 
                                    then Node (h2+1) (insertInTree x t1) val t2 
                                    else Node (h1+1) t1 val (insertInTree x t2) 
  where h1 = heightTree t1
        h2 = heightTree t2

heightTree :: Tree a -> Integer
heightTree Leaf = 0
heightTree (Node n t1 val t2) = n 
```

输出：

```
*Main> foldTree "ABCDEFGHIJ"
Node 3 (Node 2 (Node 0 Leaf 'B' Leaf) 'G' (Node 1 Leaf 'F' (Node 0 Leaf 'C' Leaf))) 'J' (Node 2 (Node 1 Leaf 'D' (Node 0 Leaf 'A' Leaf)) 'I' (Node 1 Leaf 'H' (Node 0 Leaf 'E' Leaf)))
*Main> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:06:42.797

Your insertion function is in error when the two sub-trees' heights are equal, because inserting into the right sub-tree will increase its height if it was already full. It is not immediately clear to me whether such situation will ever arise or not in your code.

The apparently correct way to insert a new element into a tree seems to be

```
insertInTree x (Node n t1 val t2) 
    | h1 < h2   = Node  n (insertInTree x t1) val t2 
    | h1 > h2   = Node  n    t1 val t2n 
    | otherwise = Node (h+1) t1 val t2n  
  where h1  = heightTree t1
        h2  = heightTree t2
        t2n = insertInTree x t2
        h   = heightTree t2n     -- might stay the same 
```

This creates *almost balanced* trees (a.k.a. AVL-trees). But it pushes each new element to the very bottom of the tree.

*edit:* These trees can be nicely seen with

```
showTree Leaf = ""  
showTree n@(Node i _ _ _) = go i n
  where
  go _ (Leaf) = "" 
  go i (Node _ l c r) = go (i-1) l ++ 
    replicate (4*fromIntegral i) ' ' ++ show c ++ "\n" ++ go (i-1) r 
```

Try

> putStr . showTree $ foldTree "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"

And yes, you can write `foldTree` shorter, as

```
foldTree = foldr insertInTree Leaf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-12T12:02:48.670

Just want to point out that the accepted answer is good but will not work after having a height 3 balanced binary tree as it did not consider the fact that the left tree could have less height than the right after inserting.

Apparently, the code could've worked adding an extra condition:

```
insertInTree x (Node n t1 val t2) 
    | h1 < h2   = Node  n      t1n val t2 
    | h1 > h2   = Node  n      t1  val t2n
    | nh1 < nh2 = Node  n      t1n val t2
    | otherwise = Node (nh2+1) t1  val t2n 
  where h1  = heightTree t1
        h2  = heightTree t2
        t1n = insertInTree x t1
        t2n = insertInTree x t2
        nh1 = heightTree t1n
        nh2 = heightTree t2n 
```

# vba - 从 Access 2010 VBA 打开 Excel 2010 文件

> ID：16157205
> 
> 赞同：5
> 
> 时间：2013-04-22T21:39:42.247
> 
> 标签：vba, ms-access, excel-2010

我的机器上有 Excel 2003 和 Excel 2010。我在 Access 2010 中使用 VBA 在 Excel 中打开 2010 .xlsx 文件，但我注意到它们似乎在 Excell 2003 中“打开”，因为会弹出一小段“转换数据”对话框。

有没有一种简单的方法可以确保 Excel 2010 在文件打开之前“打开”？

谢谢，

埃德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T02:46:51.977

我的计算机上没有两个版本的 Excel，因此无法测试，但我认为以下将打开默认的 Excel 版本，我假设您将拥有 2010 版本，然后打开文件。debug.print 将告诉您打开了哪个 Excel 版本。

或者，您需要 2003 年吗？为什么不卸载？

```
Dim xlApp As Excel.Application
Set xlApp = CreateObject("Excel.Application")

xlApp.visible = TRUE

xlApp.Workbooks.Open "C:\FolderName\FileName.xlsx", True, False
Debug.Print xlApp.Version
set xlApp = NOTHING 
```

编辑：对不起，我还应该注意，这会在您的机器上打开一个新的 Excel 实例，在您想要执行的操作结束时，您应该使用

```
xlApp.Quit 
```

关闭实例，这样您的机器上就不会运行多个实例。

此外，如果您出于任何原因需要查看电子表格

```
xlApp.Visible = True 
```

会为你做的

# c++ - 使用 -O2 优化和 OpenMP

> ID：16157208
> 
> 赞同：4
> 
> 时间：2013-04-22T21:39:49.683
> 
> 标签：c++, openmp

-O2 优化标志是否有可能重新排列代码，从而可能使多线程应用程序按预期工作？

作为我`un-intended behavior`在重新安排代码时的意思的一个例子：（由程序员）为*每个*线程创建的一个变量被移动到外部，`#pragma omp parallal`这样只创建一个*副本*，由所有线程共享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:45:00.597

不，这不可能发生。如果编译器正在展开循环或者程序在编译器重新排序循环时崩溃，那么 OpenMP 将不是很有用。OpenMP 指令必须指定变量和并行范围的依赖关系和副作用，并且编译器在应用优化传递时会将它们考虑在内。

# html - HTML5 GEOLocation 2nd prompt

> ID：16157214
> 
> 赞同：7
> 
> 时间：2013-04-22T21:40:11.563
> 
> 标签：html, geolocation

Is there a way to prompt user for geolocation again on some trigger, after they denied the location sharing?

```
navigator.geolocation.getCurrentPosition 
```

fires it once, consecutive calls do not produce the same result. Cant find the answer anywhere/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T10:17:44.577

看看这个代码片段和这个 SO 答案： [处理 HTML5 位置的最佳 JQuery 插件是什么？](https://stackoverflow.com/questions/15046508/what-is-the-best-jquery-plugin-that-handles-html5-location/15046747#15046747)

```
if (navigator.geolocation) {
   navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
}else{
   errorFunction();
}

function successFunction(position) { //uses HTML5 if available
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;
}

function errorFunction(){ //uses IP if no HTML5
   $.getJSON("http://freegeoip.net/json/", function(res){
        var lat = res.latitude;
        var lng = res.longitude;
   });
} 
```

也看看这个[`Fiddle`](http://jsfiddle.net/sandesh2302/FghFZ/)链接 [`JQuery Geolocator Plugin`](http://krister.fi/jquery.geolocator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T18:10:58.557

# 在地理位置 API 中？不。

如果用户单击拒绝权限，则仅表示“不，不要再打扰我......”

但是，用户可以通过删除 Location-share-settings 来做到这一点，然后当然会再次弹出提示。

或者用户可以在浏览器允许的情况下更改设置，但是例如 Chrome 将这些设置作为例外管理（无论用户是否允许或拒绝权限），因此用户必须删除设置，resp。反正例外。

# 现在怎么办？

您唯一的选择是捕获错误并使用例如一些外部 API 通过 IP 查找用户的位置。您可以自己编程，或者当然有@Venkat 建议的现有解决方案。

但请注意，IP 地理定位是一个棘手的问题 - 有时它具有地址数字精度，有时它只是状态精度。

Mozilla[文档](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation.getCurrentPosition)中的这个示例展示了如何处理地理位置错误的一个很好的示例：

```
var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};

function success(pos) {
  var crd = pos.coords;

  console.log('Your current position is:');
  console.log('Latitude : ' + crd.latitude);
  console.log('Longitude: ' + crd.longitude);
  console.log('More or less ' + crd.accuracy + ' meters.');
};

function error(err) {
  /*
  CALL EXTERNAL API HERE
  */
  console.warn('ERROR(' + err.code + '): ' + err.message);
};

navigator.geolocation.getCurrentPosition(success, error, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T08:02:53.597

最好的选择是设置一个地理定位子域，并将其加载到 iframe 中。

```
geo-0.domain.com
geo-1.domain.com
geo-2.domain.com
geo-3.domain.com
geo-4.domain.com
geo-N.domain.com 
```

这将允许您在每个浏览器上进行无限制的尝试，您需要做的就是编写自己的重试逻辑。

# d3.js - 创建配对条形图 d3.js

> ID：16157216
> 
> 赞同：0
> 
> 时间：2013-04-22T21:40:17.937
> 
> 标签：d3.js, bar-chart

我需要帮助将第二组数据添加到我的条形图中。目前，我正在从数据集中的*glob*键填充条形图。这将是第一个系列。我想成为的第二个系列是*本地*的。我该如何添加呢？

[在这里玩我的 JSFiddle](http://jsfiddle.net/enigmarm/WXMwv/)。

```
var w = 300;
var h = 200;

var colors = ["#377EB8", "#4DAF4A"];

var dataset = [
            {"keyword": "payday loans", "glob": 1500000, "local": 673000, "cpc": "14.11"},
            {"keyword": "title loans", "glob": 165000, "local": 165000, "cpc": "12.53" },
            {"keyword": "personal loans", "glob": 550000, "local": 301000, "cpc": "6.14"}
        ];

var data = [[1500000, 165000, 550000],
        [673000, 165000, 301000]];

var tdata = d3.transpose(dataset.glob, dataset.local);

var series = 2; // Global & Local

var x0Scale = d3.scale.ordinal()
            .domain(d3.range(dataset.length))
            .rangeRoundBands([0, w], 0.05); 
var x1Scale = d3.scale.ordinal()
            .domain(d3.range(dataset.length))
            .rangeRoundBands([0, w], 0.05);

var yScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) {return d.glob;})]) 
            .range([0, h]);

var glob = function(d) {
 return d.glob;
};
var cpc = function(d) {
 return d.cpc;
};

var commaFormat = d3.format(',');

//SVG element
var svg = d3.select("#searchVolume")
        .append("svg")
        .attr("width", w)
        .attr("height", h);     

// Graph Bars
svg.selectAll("rect") 
.data(dataset, cpc, glob) 
.enter()
.append("rect")
.attr("x", function(d, i){
    return x0Scale(i);
})
.attr("y", function(d) {
    return h - yScale(d.glob);
})
.attr("width", x0Scale.rangeBand())
.attr("height", function(d) {
    return yScale(d.glob); 
})
.attr("fill", colors[1])
.on("mouseover", function(d) {
    //Get this bar's x/y values, then augment for the tooltip
    var xPosition = parseFloat(d3.select(this).attr("x")) + x0Scale.rangeBand() / 3;
    var yPosition = parseFloat(d3.select(this).attr("y")) + yScale;

    //Update Tooltip Position & value
    d3.select("#tooltip")
        .style("left", xPosition + "px")
        .style("top", yPosition + "px")
        .select("#cpcVal")
        .text(d.cpc);
    d3.select("#tooltip").classed("hidden", false);
})
.on("mouseout", function() {
    //Remove the tooltip
    d3.select("#tooltip").classed("hidden", true);
}); 

//Create labels
svg.selectAll("text")
   .data(dataset, glob)
   .enter()
.append("text")
.text(function(d) {
    return commaFormat(d.glob);
})
.attr("text-anchor", "middle")
.attr("x", function(d, i) {
    return x0Scale(i) + x0Scale.rangeBand() / 2;
})
.attr("y", function(d) {
    return h - yScale(d.glob) + 14;
})
.attr("font-family", "sans-serif") 
.attr("font-size", "11px")
.attr("fill", "white"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T01:38:40.103

最简单的方法是为每组数据创建一个 svg group ( `<g>`) 元素，然后将各个部分添加到每个组中。例如，大致：

[http://jsfiddle.net/WXMwv/1/](http://jsfiddle.net/WXMwv/1/)

```
var sets = svg.selectAll(".set") 
    .data(dataset) 
    .enter().append("g")
            .attr("class","set")
     .attr("transform",function(d,i){
         return "translate(" + x0Scale(i) + ",0)"
     })
    .on("mouseover", function(d,i) {
        //Create x value from data index
        var xPosition = parseFloat(x0Scale(i) + x0Scale.rangeBand() / 6);
        var yPosition = 0;
        //Update Tooltip Position & value
        d3.select("#tooltip")
            .style("left", xPosition + "px")
            .style("top", yPosition + "px")
            .select("#cpcVal")
            .text(d.cpc);
        d3.select("#tooltip").classed("hidden", false);
    })
    .on("mouseout", function() {
        //Remove the tooltip
        d3.select("#tooltip").classed("hidden", true);
    }); 

sets.append("rect")
    .attr("class","glob")
    .attr("width", x0Scale.rangeBand()/2)
    .attr("y", function(d) {
        return yScale(d.glob);
    })
    .attr("height", function(d){
        return h - yScale(d.glob);
    })
    .attr("fill", colors[1])

sets.append("rect")
    .attr("class","local")
    .attr("width", x0Scale.rangeBand()/2)
    .attr("y", function(d) {
        return yScale(d.local);
    })
    .attr("x", x0Scale.rangeBand()/2)
    .attr("height", function(d){
        return h - yScale(d.local);
    })
    .attr("fill", colors[0]) 
```

文本元素留给读者作为练习:)

# jquery - jquery删除选择名称具有值的类

> ID：16157218
> 
> 赞同：1
> 
> 时间：2013-04-22T21:40:20.503
> 
> 标签：jquery, select

我正在尝试组合一个小型界面构建器，根据选择的字段值，添加或删除特定的类。

我想编写 jquery 以便它可以引用任何选择字段并从该选择框中删除/添加类，而无需在 jquery 中删除选择 ID

目前我有三个用于文本颜色、背景颜色、箭头方向的选择框

到目前为止，这是我的脚本

```
$('select').change(function()
{
    var thisname = $(this).attr('name'),
        thisselect = $(this).val();

    $('#arrowlink').removeClass(thisname).val();
    $("#arrowlink").addClass(thisselect).val();

}); 
```

到目前为止我在哪里 [http://cdpn.io/nvGuH](http://cdpn.io/nvGuH)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:16:04.523

我将向您展示 2 个解决方案：

*   将您的逻辑与现有的 CSS 结合使用
*   一个没有 CSS（！是的，没有！）

假设您有一个`select` **名称**和`options` **值**，例如：

```
 <select name="bg">
    <option value="">Background</option>
    <option value="red">red</option>
    <option value="green">green</option>
    <option value="blue">blue</option>    
  </select>

  <select name="color">
    <option value="">Color</option>
    <option value="red">red</option>
    <option value="green">green</option>
    <option value="blue">blue</option>    
  </select> 
```

我们将检索选择的名称和值（如果有的话）并将它们组合在一个数组中，例如（选择后的示例）：

```
["bg-red", "color-blue"] 
```

现在将该数组设置为类，这意味着您必须在 CSS 中准备所有这些类：

```
.bg-red{  
  background:red; 
}
.bg-blue{  
  background:blue; 
}
.bg-green{  
  background:green; 
}

.color-red{  
  color:red; 
}
.color-blue{  
  color:blue; 
}
.color-green{  
  color:green; 
} 
```

比我们可以`.attr('class', classesArr.join(' '))`用来重建所有元素所需的类。

`**[LIVE DEMO](http://jsbin.com/iteqib/3/edit)**`

```
function createClasses( element ){

  var classesArr = []; // array to store all the classes

  $('select').each(function(){
     var myVal  = this.value;  // get the value // blue, red, green
     if(myVal.length)          // it there's a value join the value with the select name, ex: bg-blue, bg-red .... or color-blue, color-red ....
        classesArr.push( this.name +'-'+ this.value );
  });

  console.log(classesArr);  // open console to see what happens!
  $(element).attr('class', classesArr.join(' ') ); // rebuild all the new classes

}

$("select").on("change", function(){
    createClasses( "#arrowlink" );    // run function and pass as argument the desired element to play with
}); 
```

* * *

# 编辑：最简单的解决方案！

因为我不知道你为什么要打扰所有这些类，所以我建议你通过使用这个简单的技巧来消除创建所有这些类的麻烦：

`**[LIVE DEMO](http://jsbin.com/iteqib/7/edit)**`

CSS：

**没有CSS！！！！**

HTML：

```
 <div id="arrowlink">ARROW LINK</div>

  Please set:

  <select name="background-color">
    <option value="">Background</option>
    <option value="red">red</option>
    <option value="green">green</option>
    <option value="blue">blue</option>    
  </select>

  <select name="color">
    <option value="">Font Color</option>
    <option value="red">red</option>
    <option value="green">green</option>
    <option value="blue">blue</option>    
  </select>

  <select name="font-size">
    <option value="">Size</option>
    <option value="9">9</option>
    <option value="12">12</option>
    <option value="18">18</option>
    <option value="24">24</option>  
  </select> 
```

`.css()`为 jQuery 的方法例如创建一个对象：

```
function createClasses( element ){
  var classesArr = {};
  $('select').each(function(){
     var myVal  = this.value ;
     if(myVal.length) classesArr[this.name] = this.value;
  });
  console.log(classesArr);  
  $(element).css(classesArr);
}

$("select").on("change", function(){
    createClasses( "#arrowlink" );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:45:10.537

如果您只是想将类设置为等于选择的值，请尝试以下操作：

```
$("select").on("change", function(){
    var val = this.value;
    $("#arrowlink").attr("class", val);
}); 
```

# c# - Odata 未找到 NavigationLink 工厂

> ID：16157222
> 
> 赞同：10
> 
> 时间：2013-04-22T21:40:39.823
> 
> 标签：c#, asp.net-web-api, odata

我目前正在开发一个 mvc4 web api odata 服务，我想返回一个用户列表，其中用户有一个语言列表。当我想获取用户时，我收到以下错误：

**错误：**

```
<m:innererror>
<m:message>
The 'ObjectContent`1' type failed to serialize the response body for content type 'application/json; charset=utf-8'.
</m:message>
<m:type>System.InvalidOperationException</m:type>
<m:stacktrace/>
<m:internalexception>
<m:message>
No NavigationLink factory was found for the navigation property 'Languages' from entity type 'MvcWebRole1.Models.User' on entity set 'Users'. Try calling HasNavigationPropertyLink on the EntitySetConfiguration.
 Parameter name: navigationProperty
</m:message>
<m:type>System.ArgumentException</m:type>
<m:stacktrace>
at System.Web.Http.OData.Builder.EntitySetLinkBuilderAnnotation.BuildNavigationLink(EntityInstanceContext instanceContext, IEdmNavigationProperty navigationProperty, ODataMetadataLevel metadataLevel)
 at System.Web.Http.OData.Formatter.Serialization.ODataEntityTypeSerializer.WriteNavigationLinks(EntityInstanceContext context, ODataWriter writer, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.Serialization.ODataEntityTypeSerializer.WriteEntry(Object graph, IEnumerable`1 propertyBag, ODataWriter writer, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.Serialization.ODataEntityTypeSerializer.WriteObjectInline(Object graph, ODataWriter writer, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.Serialization.ODataFeedSerializer.WriteFeed(Object graph, ODataWriter writer, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.Serialization.ODataFeedSerializer.WriteObjectInline(Object graph, ODataWriter writer, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.Serialization.ODataFeedSerializer.WriteObject(Object graph, ODataMessageWriter messageWriter, ODataSerializerContext writeContext)
 at System.Web.Http.OData.Formatter.ODataMediaTypeFormatter.<>c__DisplayClassa.<WriteToStreamAsync>b__9()
 at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token)
</m:stacktrace>
</m:internalexception>
</m:innererror> 
```

**我的用户看起来像这样：**

```
public class User
{
    [Key]
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string UserName { get; set; }

    public string Password { get; set; }
    public virtual ICollection<Language> Languages { get; set; }

    public User()
    {
        Languages = new List<Language>();
    }
} 
```

**我的 OData 用户控制器看起来像这样：**

```
public class UsersController : EntitySetController<User, int>
{
    WorldChatContext db = new WorldChatContext();

    public override IQueryable<User> Get()
    {
        return db.Users.AsQueryable();
    }

    protected override User GetEntityByKey(int key)
    {
        return db.Users.FirstOrDefault(p => p.UserId == key);
    }

    public override HttpResponseMessage Post(User entity)
    {
        db.Users.Add(entity);
        db.SaveChanges();
        return base.Post(entity);
    }
} 
```

我正在调用我在路由中设置的以下 url：`http://127.0.0.1:81/odata/Users`如果我在我的用户模型中评论导航属性，它会起作用。

我究竟做错了什么？我已经尝试将 [Serializable, KnownType(typeof(Language))] 放在我的用户类之上，但由于某种原因我不能使用 KnownType。如何使我的 OData 与此导航属性一起使用？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-22T21:59:34.767

您缺少语言的实体集。导航属性指向一个实体，并且必须绑定到一个实体集。在您的模型构建器代码中，添加此行以解决问题。

```
builder.EntitySet<Language>("languages"); 
```

这样做是为了创建实体集“语言”。如果存在实体集，则约定模型构建器将导航属性绑定到实体集。`Languages`因此，实体类型上的导航属性`User`将绑定到实体集`languages`。

# sql - Creating a Unique PostgreSQL Index that Contains Operations

> ID：16157227
> 
> 赞同：0
> 
> 时间：2013-04-22T21:41:10.660
> 
> 标签：sql, postgresql, postgresql-9.1

I would like to create a unique PostgreSQL index that contains operations. Does anyone know if this is possible?

```
CREATE UNIQUE INDEX ux_data ON table (name, color) 
```

The operation that I would like to add is "num & new_num = 0", where num is an existing column and new_num is a value to be inserted.

Is this possible?

**Update:** Here's more detail regarding what I want to do.

Database:

```
name    color    num
one     red      5
two     green    5
one     red      8 
```

What I want to do is to prevent the case where an entry is not unique, like:

New entry 1: name = one, color = red, num = 1.

We have matching names and colors and the first num check results in 101 & 001 = 1, this New entry 1 is not unique, and should be rejected, however, if the number was changed to 2.

New entry 2: name = one, color = red, num = 2

Now we have matching names and colors. For the num in all name/color matches 101 & 010 = 0, and 1000 & 0010 = 0, so we have a unique entry.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:35:11.453

这将是一个半项目。看起来没有一种非常简单的方法可以做到这一点，但使用 PostgreSQL 一切皆有可能。我认为您想要使用 GIST 的排除约束。不幸的是，排除约束不会是一件容易的事，因为没有简单的类型支持这一点。

我认为您的基本解决方案必须涉及：

1.  转换为合适的数据类型（大概是 bit(n)）

2.  足够的运算符以允许位 (n) 的 GiST 索引。这意味着您必须为所有 GiST 操作类构建函数和运算符，创建运算符族等。

3.  使用您的操作创建排除约束。

这并不容易，而且会很复杂，但只要付出一些努力和奉献，这是可能的。我预计会涉及一到两百行代码。您可能也想编写单元测试。

# python - Calling a class's __init__ attributes and appending to that attribute

> ID：16157228
> 
> 赞同：0
> 
> 时间：2013-04-22T21:41:16.160
> 
> 标签：python

I'm trying to append an item to an argument of an external class which is a list but I need to create an instance. But how do I create an instance to that class's arguments without using that same class instance? here is a little example of what I'm trying to do

```
 class A(object):
      def __init__(self, list1, arg1)
          self.list1 = list1
          self.arg1 = arg1

  class B(object):
      def __init__(self, arg2, arg3)
          self.arg2 = arg2
          self.arg3 = arg3

      def method1(self, arg4)
          self.arg4 = arg4
          if 0 < 1:
              A(A.list1, A.arg1).list1.append('newitem')
          return list1 
```

What should I do to append that newItem to list1?

I'm sorry if i don't explain myself well. i'm really confused

EDIT (adding my actual code)

```
class SimpleVirus(object):

    def __init__(self, maxBirthProb, clearProb):
        self.maxBirthProb = maxBirthProb
        self.clearProb = clearProb

    def reproduce(self, popDensity):
        self.popDensity = popDensity 
        reproduceProb = self.getMaxBirthProb() * (1 - popDensity)
        child = SimpleVirus(self.getMaxBirthProb(),  self.getClearProb())
        VirusL = Patient.getVirusesList()
        if random.random() <= reproduceProb:
                #Down here is where I need to append to the "viruses" list
            Patient(viruses, maxPop).viruses.append(child)
            return child
        else: 
            raise NoChildException()

class Patient(object):

    def __init__(self, viruses, maxPop): #viruses is a list

        self.viruses = viruses
        self.maxPop = maxPop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:46:06.783

你的术语很混乱；“调用类论点”对我来说没有任何意义。

您的代码按原样损坏；你有`list1`and`arg1`在`A.__init__`参数列表中，但你`arg2`在正文中使用。请在示例中使用有意义的名称，并剪切并粘贴您正在运行的实际代码以及您收到的实际错误消息。

在附加字符串之前，您希望`A`'`list1`和是什么？`arg2`例如，如果您想要一个空列表附加到 并且零`arg2`，然后执行：

```
A([],0).list1.append('newitem') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T02:13:36.900

我正在尝试理解您的代码。这部分应该删除，因为它没有任何意义：

```
self.arg4 = arg4 
```

**您仅在init**方法中定义和初始化您的类变量。这里 arg4 是您的方法的输入，您只能通过其名称单独引用它，因此不需要该行。

这部分也是有问题的：

```
A(A.list1, A.arg1).list1.append('newitem') 
```

首先，您必须创建类的*实例*或*对象*，然后才将某些内容附加到其变量之一。所以最好的方法是假设 arg4 是 A 类的一个实例：

```
class A(object):
  def __init__(self, list1, arg1):
      self.list1 = list1
      self.arg1 = arg1

class B(object):
  def __init__(self, arg2, arg3):
      self.arg2 = arg2
      self.arg3 = arg3
  def method1(self, arg4):
      if 0 < 1:
          arg4.list1.append('newitem')
      return arg4.list1 
```

这是在 python shell 中测试它的方法。

```
>>> arg = A ([],1)
>>> b = B(2,3)
>>> b.method1(arg)
['newitem']
>>> 
```

首先，我创建了一个名为 arg 的类 A 的实例。然后是一个名为 b 的 B 类对象。最后我调用了b的method1，参数为arg。

# mysql - SQLAlchemy 与 Google Cloud SQL 连接到开发服务器

> ID：16157231
> 
> 赞同：1
> 
> 时间：2013-04-22T21:41:22.067
> 
> 标签：mysql, google-app-engine, python-2.7, sqlalchemy, google-cloud-sql

我将 SQLAlchemy 0.8 与 Google App Engine 和 Cloud SQL 一起使用。我想在部署之前在本地进行完整的集成测试，但是我无法让 SQLAlchemy 使用 mysql+gaerdbms 方言连接到我的开发 MySQL 服务器

```
create_engine(
    'mysql+gaerdbms:///test?instance=homingbox:instance1'
) 
```

我从命令行启动我的应用程序引擎，如下所示

```
python dev_appserver.py --mysql_user=username --mysql_password=root ../Source/HomingBox/gae 
```

每当我尝试访问数据库时，我都会得到这个可爱的堆栈跟踪

```
ERROR    2013-04-22 21:35:39,987 webapp2.py:1528] (ImportError)  None None
Traceback (most recent call last):
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/home/leon/Development/google_appengine/lib/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/home/leon/Development/Source/HomingBox/gae/rest.py", line 19, in get_list
    self.response.write(json.dumps(application.get_list()))
  File "/home/leon/Development/Source/HomingBox/gae/dal.py", line 98, in get_list
    return query.all()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/query.py", line 2140, in all
    return list(self)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/query.py", line 2252, in __iter__
    return self._execute_and_instances(context)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/query.py", line 2265, in _execute_and_instances
    close_with_result=True)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/query.py", line 2256, in _connection_from_session
    **kw)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/session.py", line 797, in connection
    close_with_result=close_with_result)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/session.py", line 801, in _connection_for_bind
    return self.transaction._connection_for_bind(engine)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/orm/session.py", line 297, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/engine/base.py", line 1669, in contextual_connect
    self.pool.connect(),
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 272, in connect
    return _ConnectionFairy(self).checkout()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 425, in __init__
    rec = self._connection_record = pool._do_get()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 855, in _do_get
    return self._create_connection()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 225, in _create_connection
    return _ConnectionRecord(self)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 318, in __init__
    self.connection = self.__connect()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/pool.py", line 368, in __connect
    connection = self.__pool._creator()
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/engine/strategies.py", line 80, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/leon/Development/Source/HomingBox/gae/sqlalchemy/engine/default.py", line 279, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/leon/Development/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 183, in __init__
    super(GoogleApiConnection, self).__init__(*args, **kwargs)
  File "/home/leon/Development/google_appengine/google/storage/speckle/python/api/rdbms.py", line 810, in __init__
    self.OpenConnection()
  File "/home/leon/Development/google_appengine/google/storage/speckle/python/api/rdbms.py", line 832, in OpenConnection
    self.SetupClient()
  File "/home/leon/Development/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 193, in SetupClient
    self._client = RdbmsGoogleApiClient(**kwargs)
  File "/home/leon/Development/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py", line 106, in __init__
    rdbms.OAUTH_CREDENTIALS_PATH)
  File "/usr/lib/python2.7/posixpath.py", line 268, in expanduser
    import pwd
  File "/home/leon/Development/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py", line 827, in load_module
    raise ImportError 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:35:16.090

这是我的假设，基于堆栈跟踪——当应用程序找不到您的主目录时，它会尝试导入 pwd 并以这种方式获取主目录信息。应用程序试图在 posixpath.py 中调用这段代码：

```
if 'HOME' not in os.environ:
        import pwd
        userhome = pwd.getpwuid(os.getuid()).pw_dir
    else:
        userhome = os.environ['HOME'] 
```

除此之外，出于安全原因，我*认为*GAE 不会允许导入 pwd。沙盒环境不会将其包含在其允许模块的白名单中，`ImportError`如果模块不在该列表中，则会引发一个。

如果我试图只做`import pwd`一个常规处理程序模块的内部，GAE 不会允许它。

# php - PHP Check for tie in vote, variable number of winners

> ID：16157234
> 
> 赞同：1
> 
> 时间：2013-04-22T21:41:50.803
> 
> 标签：php, arrays, tie

I ran an election that has a variable number of winners for each category. (One category can have 3 winners, another 1 winner, another 2 winners, etc.)

Currently I am displaying the results like this:

```
foreach($newarray as $key => $value){

                echo $key . $value . “&lt;br>”;
} 
```

This returns

```
 Barack Obama 100
    Mitt Romney 100
    John Smith 94
    Jane Smith 85 
```

What I need to do is have it echo out something if two of the values are the same based on that predetermined number. So, if the predetermined number was one, it would show this:

```
 Barack Obama 100 tie
    Mitt Romney 100 tie
    John Smith 94
    Jane Smith 85 
```

If the predetermined number was two, it would show this since the second and third values aren’t the same:

```
 Barack Obama 100 winner
    Mitt Romney 100 winner
    John Smith 94
    Jane Smith 85 
```

Thank you for your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:08:40.913

```
$max = max($array);
$tie = count(array_keys($array,$max)) > $predeterminedNumber;
foreach($newarray as $key => $value){
     echo $key . $value . ($value==$max ? ($tie ? ' tie' :' winner') : ''). '<br>';
} 
```

尽管如果您需要 3 个获胜者不一定具有相同的分数，它会变得有点复杂：

```
$predefinedNumber = whatever;
arsort($array);

//first $predefinedNumber are either winners or tied.
$winners = array_slice($array,0,$predefinedNumber,true);

//the next entry determines whether we have ties
$next = array_slice($array,$predefinedNumber,1,true);

//active tie on entries with this value
$nextvalue = reset($next);

//the above 2 statements would be equivalent to (take your pick):
//$values = array_values($array);
//$nextvalue = $values[$predefinedNumber];

foreach($array as $key => $value){
   echo $key.' '.$value;
   if($value == $nextvalue){
     echo ' tie';
   } else if(isset($winners[$key])){
     echo ' winner';
   }
   echo '<br>';
} 
```

# actionscript-3 - 在单个列表中显示 sharedObject.data 属性的多个数组类型属性

> ID：16157236
> 
> 赞同：0
> 
> 时间：2013-04-22T21:41:55.520
> 
> 标签：actionscript-3, flash-cs6

我有各种食品类别页面（例如“碳水化合物”、“肉类”、“蔬菜”等），每个页面上有 3 个组合框，用户可以从每个类别中选择 3 种不同的成分（即在“肉类”页面上，一个用户可以选择 3 种不同类型的肉）。我将这 3 个肉类作为数组写入 sharedObject，如下所示：

这是我的`saveMeat()`函数作为示例，因此您可以了解我是如何形成数组的：

```
function saveMeat(event:MouseEvent):void
{
    _categoryMeat.btn_goback.removeEventListener(MouseEvent.CLICK, saveMeat);
    removeChild(_categoryMeat);

    if (meatDisableCheckBox.selected == true)
    {
        stop();
    } 

    if (myComboBoxMeat.selectedLabel != null)
    {
        so.data.meat1 = myComboBoxMeat.selectedLabel;
        trace(so.data.meat1);
    }
    if (myComboBoxMeat2.selectedLabel != null)
    {
        so.data.meat2 = myComboBoxMeat2.selectedLabel;
        trace(so.data.meat2);
    }
    if (myComboBoxMeat3.selectedLabel != null)
    {
        so.data.meat3 = myComboBoxMeat3.selectedLabel;
        trace(so.data.meat3);
    } 
    var meat_items_array:Array = new Array(so.data.meat1, so.data.meat2, so.data.meat3);
    so.data.meatItems = meat_items_array;
    so.flush();
    trace(so.data.meatItems);
} 
```

每个类别页面都有几个这样的功能（在所有 6 个不同的功能中）。除了复选框和组合框不同之外，它们都非常相似。

我有一个名为 list 的函数`dataLoaded`，它将 sharedObject 中的项目加载到滚动列表中：

```
private function dataLoaded():void
{
    var i:Number;
    for (i=0;  i < so.data.meatItems.length; i++) {
        _item = new Item();
        // creates the var itemTextField //
        _itemTextField = new TextField();
        _itemTextField.text += '' + so.data.meatItems[i].toString();
        //adds textfield to displaylist//
        _item.addChild(_itemTextField);
    }
} 
```

如您所见，`for`循环将我的 sharedObject ( ) 的`toString()`属性之一的表示输入到 中，但我想输入我的 sharedObject 内的所有实例，无论它们具有什么子属性。另请注意，当我想评估循环中的所有项目时，我正在评估循环条件中的数组`so.data.meatItems``TextField``length``meatItems``for``sharedObject`

我怎样才能做到这一点？

编辑：我实施了以下解决方案，但收到此错误：

```
TypeError: Error #1010: A term is undefined and has no properties.
    at RecipeMatcher/dataLoaded()[/Users/adambull/Desktop/RecipeMatcherSO/RecipeMatcher.as:893]
    at RecipeMatcher/displayList()[/Users/adambull/Desktop/RecipeMatcherSO/RecipeMatcher.as:212]
    at RecipeMatcher/hideSplashScreen()[/Users/adambull/Desktop/RecipeMatcherSO/RecipeMatcher.as:192]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at SetIntervalTimer/onTimer()
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick() 
```

这是我实现以下内容的尝试（这次我已经包含了我的全部功能，以防万一我的功能中有其他东西导致问题）

```
private function dataLoaded():void
{
    // parsing of each ingredient//
    // instantiation of mcItem (the stage for each item)
    for (var item:* in so.data)
    {
        if (so.data[item] !=null)
        {
            if (so.data[item] is Array)
            {
                var a:Array = so.data[item];
                for (var i:uint = 0 ; i < a.length;i++ )
                {
                    _item = new Item();
                    // sets //over// layer to invisible / transparent //
                    _item.item_btn_over.alpha = 0;
                    // creates the var itemTextField //
                    _itemTextField = new TextField();
                    // _itemTextField visual attributes //
                    _itemTextField.x = _textFieldXPosition + _textFieldPaddingLeft;
                    _itemTextField.y = _textFieldYPosition;
                    _itemTextField.selectable = true;
                    _itemTextField.wordWrap = true;
                    itemTextField.width = _textFieldWidth;
                    _itemTextField.height = _textFieldHeight;
                    _itemTextField.embedFonts = true;
                    _defaultFormat.color = 0x111112;
                    _defaultFormat.font = _arialRounded.fontName;
                    _defaultFormat.size = 18;
                    _itemTextField.defaultTextFormat = _defaultFormat;
                    _itemTextField.appendText( so.data[item][i].toString() );
                    //adds textfield to displaylist//
                    _item.addChild(_itemTextField);
                    //vertical positioning//
                    _item.y = i * _itemPosition;
                    _item.btn_delete.visible = false;
                    _item.buttonMode = true;
                    _item.mouseChildren = false;
                    //adds items to container displaylist//
                    _container.addChild(_item);
                }
            }
        }
    }
    // Input Mask//
    _mask = new Shape();
    _mask.graphics.beginFill(0xFF0000);
    _mask.graphics.drawRect(0, 0, _maskWidth, _maskHeight);
    _mask.graphics.endFill();
    // Positioning of input mask//
    // horizontal centering of input mask//
    _mask.x = stage.stageWidth / 2 - _container.width / 2;
    _mask.y = _paddingTop;
    // adds the mask onto the stage//
    addChild(_mask);
    // assigns the above mask to the container //
    _container.mask = _mask;
    // Positioning of container with the mask//
    // horizontal centering of container //
    _container.x = stage.stageWidth / 2 - _container.width / 2;
    // vertical position of container //
    _container.y = _paddingTop;

    //Container background stylings//
    _background = new Shape();

    _background.graphics.drawRect(0, 0, _container.width, _container.height);

    _container.addChildAt(_background, 0);
    //End of container background stylings//
    _item.parent.addEventListener( MouseEvent.CLICK, itemClicked );
    _container.addEventListener(MouseEvent.MOUSE_OVER, movingOver);
    _container.addEventListener(MouseEvent.MOUSE_OUT, movingOut);
} 
```

（我尝试添加额外`if`的内容来评估每个共享对象属性的内容是否为空 - 因为我相信如果数组为空，这可能会导致另一个错误？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:56:38.497

如果我理解你的问题，这里有一个例子。它浏览 so.data，查找数组，然后对每个数组进行迭代。

```
import flash.net.SharedObject;

var my_so = SharedObject.getLocal("superfoo");
// fill some fake values
var ar:Array = [1, 2, 3, 4, 5]
var ar2:Array = ['a1', 'a2', 'a3', 'a4']
my_so.data.array1 = ar;
my_so.data.array2 = ar2;
my_so.data.notarray = 'I m not an array';
my_so.flush();

// browse the so and find arrays
var my_so2 = SharedObject.getLocal("superfoo");
for (var item:* in my_so2.data) {       
    if (my_so2.data[item] is Array) {
        var a:Array = my_so2.data[item];
        for(var i:uint = 0 ; i<a.length;i++ ) {
            trace('my_so2.data[' + item + '][' + i + ']=' + a[i])
        }
    }
} 
```

输出（它会跳过 so.data 中不是数组的项目）

```
my_so2.data[array2][0]=a1
my_so2.data[array2][1]=a2
my_so2.data[array2][2]=a3
my_so2.data[array2][3]=a4
my_so2.data[array1][0]=1
my_so2.data[array1][1]=2
my_so2.data[array1][2]=3
my_so2.data[array1][3]=4
my_so2.data[array1][4]=5 
```

# c# - ASP.NET Web Forms - Global Procedures

> ID：16157238
> 
> 赞同：0
> 
> 时间：2013-04-22T21:41:58.440
> 
> 标签：c#, asp.net, webforms

is there a way to create a page similar to a module in windows form projects where I can have multiple procedures/functions and to be able to call and access them from multiple pages? Thank you. - Gabe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:43:38.093

模块是 VB.Net 的一项功能，可用于所有 VB.Net 项目类型。

在 C# 中，您可以[创建一个`static class`](http://msdn.microsoft.com/en-us/library/79b3xss3.aspx).

# asp.net - ASP.NET VB 列表框数据绑定不工作

> ID：16157240
> 
> 赞同：0
> 
> 时间：2013-04-22T21:42:01.413
> 
> 标签：asp.net, vb.net, asp.net-membership

在我的用户控件中，我有一个用于创建新会员用户的文本框。每个列表框都有一个数据源设置`membership.getallusers()`为填充列表框。当列表框索引更改时，它会填充文本框以允许编辑。我想要完成的是：让每个用户列表框刷新以显示创建的新用户。即使我`databind()`在成功创建用户后调用，它也不会更新。在表单加载时，我检查 if `listbox.items.count < 1`，然后 call `databind()`，这确实可以正常工作。有任何想法吗？

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If ListBox3.Items.Count < 1 Then
        For Each item As MembershipUser In Membership.GetAllUsers(0, Membership.GetAllUsers.Count + 1, Membership.GetAllUsers.Count)
            ListBox3.Items.Add(item.UserName)
        Next
        Label1.Text = ListBox3.Items.Count
        username = ListBox3.Items(0).ToString
    Else
        ListBox1.DataBind()
        ListBox3.DataBind()
    End If
    user = Membership.GetUser
    ListBox1.DataSource = Membership.GetAllUsers
    ListBox1.DataBind()
    ListBox2.DataSource = Roles.GetAllRoles
    ListBox2.DataBind()
    ' ListBox3.DataSource = Membership.GetAllUsers
    'ListBox3.DataBind()
End Sub

Protected Sub ListBox3_SelectedIndexChanged(sender As Object, e As EventArgs) Handles             ListBox3.SelectedIndexChanged
    txtUsername.Text = user.UserName
    txtEmail.Text = user.Email
    txtQuestion.Text = user.PasswordQuestion     
End Sub

Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Try'Creates a new user
        Dim status As System.Web.Security.MembershipCreateStatus
        Membership.CreateUser(txtUsername.Text, txtPassword.Text, txtEmail.Text, txtQuestion.Text, txtAnswer.Text, True, status)
        Label1.Text = "User " & txtUsername.Text & " was created"
        'ListBox3.Items.Clear()
        ListBox1.DataBind()
        'ListBox3.DataBind()
    Catch ex As Exception
        Label1.Text = "Error:" & ex.Message
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:48:17.097

在进行数据绑定之前，您需要再次设置数据源，如下所示：

```
Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Try'Creates a new user
        Dim status As System.Web.Security.MembershipCreateStatus
        Membership.CreateUser(txtUsername.Text, txtPassword.Text, txtEmail.Text, txtQuestion.Text, txtAnswer.Text, True, status)
        Label1.Text = "User " & txtUsername.Text & " was created"
        'ListBox3.Items.Clear()
        ListBox1.DataSource = Membership.GetAllUsers()  ' Necessary because the DB has changed
        ListBox1.DataBind()
        'ListBox3.DataBind()
    Catch ex As Exception
        Label1.Text = "Error:" & ex.Message
    End Try
End Sub 
```

当您调用 databind 时，您可能会认为 Listbox 将调用您作为数据源提供的方法，但事实并非如此。分配数据源的那一刻，将检索数据。当您实际调用 Databind 方法时，Listbox 将创建必要的内部控件

# c++ - Change last loop

> ID：16157243
> 
> 赞同：0
> 
> 时间：2013-04-22T21:42:17.227
> 
> 标签：c++, for-loop

I want to output some numbers, all separated with a comma. In the following code also the last number will be "separated":

```
for(int i=1; i<=3; i++)
{
   cout << i << ",";         
} 
```

Is it possible to avoid that?

So instead of `1,2,3,` I want just `1,2,3`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:46:08.633

You have to put comma in diffrent place, like this:

```
const int n = 5;
int tab[n] = {1,2,3,4,5};

if(n >= 1) 
    cout << tab[0];
for(int i=1; i<n; i++)
    cout<<", "<<tab[i]; 
```

Link to [ideone.com](http://ideone.com/8b8PMg), where code can be executed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T21:44:57.733

This is what I tend to do in such cases:

```
for (int i = 1; i <= 3; i++) {
    if (i > 1) cout << ", ";
    cout << i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:44:46.537

You will probably have to write the last (or first) number by itself:

```
int i;
for (i = 1; i < 3; i++)
{
    cout << i << ",";
}
cout << i << endl; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T21:46:07.027

Your loop runs three times. If you write a comma every time, you're gonna get three commas. If you don't want the last comma, you can just use an if statement to not write it. Your loop could be:

```
cout << i;
if(i < 3)
cout << ","; 
```

# batch-file - 批处理：从文件名列表创建一个循环

> ID：16157247
> 
> 赞同：-1
> 
> 时间：2013-04-22T21:42:35.590
> 
> 标签：batch-file

我是批处理文件的新手，我需要帮助。

我有一个包含文件名列表的文件：**file_list.txt** -> 内容：“ *file1.ppt, file2.ppt, file3.ppt* ”

一个带有一些文本的文件：**text.txt** -> 内容：“*打开 xxxx 并另存为 pdf* ”

我需要创建一个看起来像这样的新文本文件（**run.txt**）：

*打开 file1.ppt 并保存为 pdf*

*打开 file2.ppt 并保存为 pdf*

*打开 file3.ppt 并保存为 pdf*

我一直在研究“For”命令，但我显然不知道从哪里开始

FOR /F "tokens=*" %%A IN (file_list.txt) DO (ECHO %%A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:10:11.647

```
@echo off
setlocal EnableDelayedExpansion
set replace=xxxx
set /P text=< text.txt
(for /F  %%a in (file_list.txt) do (
   echo !text:%replace%=%%a!
)) > run.txt 
```

`replace`只需将必须由文件名替换的字符串放入变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:12:04.820

这能解决你的任务吗？

```
@echo off
for /f "delims=" %%a in (file_list.txt) do (
>>run.txt echo open %%a and save as pdf
) 
```

# twitter - Tweeter API v1 issue with tweetable.js in my wordpress theme

> ID：16157250
> 
> 赞同：1
> 
> 时间：2013-04-22T21:42:54.603
> 
> 标签：twitter, wordpress, wordpress-theming

this question may sounds very odd but really I'm helpless. Few days ago a designer made a theme for me. After I paid him he just blocked my email address and stop giving reply to my emails and chats. Now, the problem is he made a custom twitter widget for my sitw which is working ok, but yesterday my friend told me that my sites runs on Twitter API 1.0 and I should have to upgrade to v1.1 otherwise they are gonna delete API v1\. But really have no idea how to work with twitter 1.1\. The old method of v1 is showing error. I'm giving the link of files my developer used for the tweeter widget in my wordpress theme. If anybody can fix up the things and update this tweeter widget to v1.1 I will be really really glad and will gift a 50GB free box.com account because I really dont have anything more to give. **Tweetable jQuery 1.6** http:// bit. ly/ 10uDFyh

**Scripts.js** - Custom written by the developer [http://bit.ly/11flbwG](http://bit.ly/11flbwG) - Check the line of code 330 - 350

**Widget_twitter_tweets.php** - Wordpress widget file [http://www52.zippyshare.com/v/10645901/file.html](http://www52.zippyshare.com/v/10645901/file.html)

**My website:** iSaumya .com - Check the tweeter feed under the social icons in the home page. This plugin makes this works.

Please help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:48:55.820

使用（许多）WordPress 插件之一将您的最新推文显示为小部件。它们具有更广泛的用户群和更好的支持的优势。

# actionscript-3 - AS3：函数内声明的对象，对象内的侦听器......他们都得到GC吗？

> ID：16157252
> 
> 赞同：0
> 
> 时间：2013-04-22T21:42:55.007
> 
> 标签：actionscript-3, object, garbage-collection, flashdevelop, event-listener

大家晚上好

我通常不需要问，因为有很多信息，但我找不到 - 至少，不是具体的。

这里的要点是：我在一个函数中声明一个对象，然后在该对象中添加一个监听器。问题：一旦函数运行，对象和函数都会被丢弃吗？出于显而易见的原因，我不希望没有物体的随机听众。

如果有帮助，这里是简化的代码：

（随意让它看起来更像样，对此表示歉意）

`public function textSfx(chPos:int, otlPos:int):void {`

 ````
 var sfxTimer:Timer = new Timer (300, 6);

            sfxTimer.addEventListener(TimerEvent.TIMER, textSfxHandler(chPos));

        sfxTimer.start();
    }

    public function textSfxHandler(chPos:int):Function
    {
        return function(evt:TimerEvent):void
        {
            trace("char being affected is: " + chPos);
        }
    } 
````  `它工作得非常好，但我担心听众无家可归。肯定不是这样的，对吧？正确的？？

PS 由于多个元素需要同时使用计时器，因此该对象在函数内部声明，这不适用于单个外部声明的计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:28:34.450

Timer 对象和匿名函数将保留在内存中，直到 Timer 链接到事件侦听器。你的代码不会让 GC 完成它的工作。

添加监听器时可以使用弱引用参数（第 5 个参数）：

```
sfxTimer.addEventListener(TimerEvent.TIMER, textSfxHandler(chPos), false,0,true); 
```

但无论如何使用匿名函数都是一种不好的做法

以下代码在您的情况下会很好吗？请注意，我使用命名侦听器，而不是每次都重新创建它们：

```
 private var timerPool:Dictionary = new Dictionary();
    public function textSfx(chPos:int, otlPos:int=0):void {
        var sfxTimer:Timer = new Timer (300, 6);
        timerPool[sfxTimer] = chPos;
        sfxTimer.addEventListener(TimerEvent.TIMER, textSfxHandler);
        sfxTimer.addEventListener(TimerEvent.TIMER_COMPLETE, textSfxComplete);
        sfxTimer.start();

    }
    public function textSfxHandler(e:TimerEvent):void
    {
        var sfxTimer:Timer = e.target as Timer;
        trace("char being affected is" + timerPool[sfxTimer]);
    }
    public function textSfxComplete(e:TimerEvent):void {
        var sfxTimer:Timer = e.target as Timer;
        sfxTimer.removeEventListener(TimerEvent.TIMER, textSfxHandler);
        sfxTimer.removeEventListener(TimerEvent.TIMER_COMPLETE, textSfxComplete);
        delete timerPool[sfxTimer];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:33:24.757

**在太空中，没有人能听到你的尖叫声**
这就是你在这里所拥有的。你有一个没人知道的 Timer，你有一个只有 Timer 知道的回调。因此，与其把你的宇航员（定时器）拴在你的宇宙飞船上，把你的螺丝刀拴在他身上，你把它们两个拴在一起，让它们飘到垃圾收集器随时可以捡起它们的地方，不管定时器是否已经开火并且回调是否运行。

您需要做的是添加*某种*引用以保留您的计时器，否则您无法保证它会触发/触发回调。您可能也可以声明一个变量来保存该计时器（请注意，您需要在创建闭包时将其传入）。如果您选择使用字典，则不想*使用*弱键，否则您只是将宇航员拴在一侧的螺丝刀和另一侧的扳手上。

这意味着当您不再使用创建计时器的实例时，您*确实需要将包含计时器的变量设为空并停止计时器（因为如果您使用匿名函数，则无法删除事件侦听器）。*

有关这些事情如何工作的更多信息，请查看[此博客文章](http://www.developria.com/2010/12/functional-actionscript-part-1.html)。`

# regex - 正则表达式搜索 text1 或 text2

> ID：16157256
> 
> 赞同：0
> 
> 时间：2013-04-22T21:43:09.037
> 
> 标签：regex, grep

我是正则表达式的新手，如何构建一个正则表达式来查找其中包含 name1 或 name2 的模式。

IE，

```
text = 'the lion and the tiger are animals' 
```

我想构建一个正则表达式来查找文本中是否包含字符串 lion 或字符串 tiger？

我知道通过单词你会做出 [ae] 并且会找到匹配项或 a 或 e，但对于整个单词我不确定。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:45:04.380

在正则表达式中，逻辑 OR 是`|`. 也就是说：

```
lion|tiger 
```

所以，例如，

```
^.*(lion|tiger).*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T21:50:41.160

如果您想确保“lion”或“tiger”是完整的单词（即它们仍然会匹配“footigerbar”之类的内容），那么到目前为止的答案都不会奏效。如果你想确保它是*单词*“lion”或“tiger”，而不仅仅是子字符串，如下所示：

```
\b(lion|tiger)\b 
```

`\b`表示单词边界，这将确保您的正则表达式不匹配，例如“unadsasdeflionasdeafeg”或“dandelion”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T21:45:33.387

您可以使用 OR：

```
(lion|tiger) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T21:45:56.740

您可以使用“管道”还需要`-E`选项`grep`

```
grep  -E 'lion|tiger' 
```

# python - Python评估具有相同值的整数和字符的比较为False

> ID：16157258
> 
> 赞同：1
> 
> 时间：2013-04-22T21:43:15.903
> 
> 标签：python, integer, character, comparison-operators

今天晚上我遇到了这个有趣的小“陷阱”，请考虑以下代码片段：

( chr(1) == 1 )

这个比较在 Python 2.7.4 上评估为 False，这是一个特性还是一个错误？如果是一个特性，任何人都可以解释这个设计决策背后的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:45:39.880

python中没有“char”类型，`chr`返回一个长度为1的字符串，并且对于强类型，任何字符串等于任何整数都没有意义。

# ios - 为什么我从 xml Web 服务器对 iOS 的响应中收到终止错误？

> ID：16157261
> 
> 赞同：0
> 
> 时间：2013-04-22T21:43:32.810
> 
> 标签：ios, xml, web-services

我得到这样的回应：

```
2013-04-22 15:38:38:693 Some[963:3079] __36-[SDAFParseAPIClient getDataFromWeb]_block_invoke [Line 88] parsing
2013-04-22 15:38:38:694 Some[963:3079] -[SDAFParseAPIClient parser:didStartElement:namespaceURI:qualifiedName:attributes:] [Line 64] Element started string
2013-04-22 15:38:38:695 Some[963:3079] -[SDAFParseAPIClient parser:foundCharacters:] [Line 78] The characters are { "recordcount": "62", "data": [ { "Codigo": "1", "NombrePublico": "Super Stor
2013-04-22 15:38:38:696 Some[963:3079] -[SDAFParseAPIClient parser:foundCharacters:] [Line 80] The page numbers are (null)
2013-04-22 15:38:38:698 Some[963:3079] -[SDAFParseAPIClient parser:foundCharacters:] [Line 78] The characters are es", "Horario": "LV:8:00 AM - 6:30 PM,S:8:00 AM - 5:00 PM,D:-", "Direccion": "6 Ave., 5 Calle, S.O. Bo. El", "Telefono": "2556-1242", "Coordenadas": "16.502917616794166,-85.02710920572281", "Ciudad": "SAN PEDRO SULA" }, { "Codigo": "2", "NombrePublico": "Some 3 Ave.", "Horario":
2013-04-22 15:38:39.571 Some[963:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil' 
```

这是我的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    NSLog(@"Element started %@",elementName);
    self.currentElement=elementName;

}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    NSLog(@"Element ended %@",elementName);
    self.currentElement=@"";

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if([self.currentElement isEqualToString:@"string"]){
        NSLog(@"The characters are %@",string);
        id data = [NSJSONSerialization JSONObjectWithData:[string dataUsingEncoding:NSASCIIStringEncoding] options:0 error:nil];
        NSLog(@"The page numbers are %@",[[[data valueForKey:@"List"] objectAtIndex:0] valueForKey:@"PageNumber"]);
    }
}

-(void)getDataFromWeb{
    NSURL *feedURL = [[NSURL alloc] initWithString:@"http://someserver.com?Cli_Cod=1&Key_String=34uhg934hg389j"];
    NSURLRequest *feedRequest = [[NSURLRequest alloc] initWithURL:feedURL];
    AFXMLRequestOperation *feedOperation = [AFXMLRequestOperation XMLParserRequestOperationWithRequest:feedRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, NSXMLParser *XMLParser) {
        NSLog(@"parsing");
        [XMLParser setDelegate:self];
        [XMLParser parse];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, NSXMLParser *XMLParser) {
        UIAlertView *connectionError = [[UIAlertView alloc] initWithTitle:@"Connection Error" message:error.localizedDescription delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
        [connectionError show];
    }];
    [feedOperation start];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:58:57.953

您的代码假定`foundCharacters`只会为给定标签调用一次。从日志输出来看，这是不正确的。

在您的`didStartElement`中，初始化一个可变字符串。在方法中附加到这个可变字符串`foundCharacters`。

然后在该`didEndElement`方法中，解析一个大的可变字符串（如果结束元素是该`string`元素）。

这就是我要做的：

添加私有属性：`@property (nonatomic, strong) NSMutableString *currentValue;`

然后更新您的方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    NSLog(@"Element started %@",elementName);
    if ([elementName isEqualToString:@"string"]) {
        self.currentElement = elementName;
        self.currentValue = [NSMutableString string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    NSLog(@"Element ended %@",elementName);
    if ([self.currentElement isEqualToString:@"string"]) {
        NSLog(@"The characters are %@", self.currentValue);
        id data = [NSJSONSerialization JSONObjectWithData:[self.currentValue dataUsingEncoding:NSASCIIStringEncoding] options:0 error:nil];
        NSLog(@"The page numbers are %@", [[[data valueForKey:@"List"] objectAtIndex:0] valueForKey:@"PageNumber"]);
    }

    self.currentElement = nil;
    self.currentValue = nil;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if (self.currentValue) {
        [self.currentValue appendString:string];
    }
} 
```

# email - 发送批量电子邮件密件抄送与个人的最佳方式？

> ID：16157271
> 
> 赞同：4
> 
> 时间：2013-04-22T21:43:55.580
> 
> 标签：email, sendmail, bulk

我的开发团队就如何通过 sendmail 服务器发送批量电子邮件与系统发生了争执。目前，当开发发送 1000 封收件人电子邮件时，我们将它们放入密件抄送中并向服务器发送 1 封电子邮件。我们期望电子邮件服务器会做它需要做的事情来处理“工作”。我们这样做是因为我们希望这个过程在我们这边是原子的。所以要么我们将它发送到邮件服务器，要么我们没有。我们不想单独发送它们，因为如果过程在任何时候失败，那么我们必须找出没有完成的工作并从我们中断的地方继续。

Systems 坚持认为在密件抄送上发送 1000 个收件人是很奇怪的，这会导致 sendmail 达到文件描述符限制。哪些已经到位以阻止 DoS 攻击，而要进行更改则需要编译我们自己的 sendmail。

开发人员称其为 BS，因为无论如何我们都将向邮件服务器发送相同数量的工作。

我们能得到外界的意见吗？

# laravel - xdebug、PhpStorm 和 Laravel 3 / mod_rewrite 未命中断点

> ID：16157276
> 
> 赞同：13
> 
> 时间：2013-04-22T21:44:18.140
> 
> 标签：laravel, xdebug, phpstorm, laravel-3

我非常绝望并且没有想法：

我已经为 Laravel 3 项目配置了 xdebug 和 PhpStorm。在 Mac OS X Apache 上本地运行项目，因此 PhpStorm 和 Web 应用程序在同一台机器上运行。配置一个虚拟主机，以便 localhost.lt 指向 Laravel 的公共目录。

php.ini 中的相关 xdebug 条目：

```
zend_extension = /usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so
[xdebug]
xdebug.idekey="PHPSTORM"
xdebug.remote_enable=1
xdebug.profiler_enable=1
xdebug.remote_log=/var/log/xdebug_remote.log
xdebug.remote_connect_back=1 
```

确认已加载扩展程序。

设置没有任何路径映射的 PHP Web 应用程序调试/运行配置，因为没有任何符号链接，并且 Web 服务器和 PhpStorm 上的文件夹完全相同（因为 Web 服务器在同一台机器上）。

从 IDE 通过“调试”启动时，xdebug_remote.log 正确显示了我们在应用程序/库中的文件之一中设置的断点：

```
<- breakpoint_set -i 5 -t line -f
file:///Users/RalfR/src/livetime/application/libraries/LiveTime.php -n 676
->
<response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="breakpoint_set" transaction_id="5" id="9230016"></response> 
```

但是，当我们单击调用 LiveTime.php 库中的函数的链接时，不会命中断点。日志显示：

```
<- stack_get -i 6 -> 
<response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="stack_get" transaction_id="6"><stack where="{main}" level="0" type="file" filename="file:///Users/RalfR/src/livetime/public/index.php" lineno="14"></stack></response>

<- run -i 7 -> 
<response xmlns="urn:debugger_protocol_v1" xmlns:xdebug="http://xdebug.org/dbgp/xdebug" command="run" transaction_id="7" status="stopping" reason="ok"></response>

<- run -i 8
Log closed at 2013-04-22 21:03:57 
```

与许多框架一样，Laravel 使用 .htaccess mod_rewrite 通过 public/index.php 来管道所有内容。这可能是 PhpStorm / xdebug 没有在 application/libraries/LiveTime.php 中捕获断点的原因，因为 xdebug 似乎从未执行 LiveTime.php 脚本？

如果是这样，我们该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-31T22:42:18.130

您需要设置[路径映射](http://blog.jetbrains.com/webide/2011/03/configure-php-debugging-in-phpstorm-2-0/)您不需要为每个文件设置它。为了解决我的问题，我去了 IntelliJ（与 PHPStorm 相同）Preferences > PHP > Servers .. 选择了我的服务器并设置了以下内容（见下面的注释 2）：

![在此处输入图像描述](https://i.stack.imgur.com/0yCg7.png)

注意 1：我也可以直接设置项目的路径root，但由于我对调试 Laravel“公共”文件夹和我的应用程序以外的任何东西都不感兴趣，所以我只为这两个文件夹设置路径。在此之后，一切都运行良好。

**笔记2：**上面显示的图像不是来自上述步骤中提到的“设置”对话框，而是来自“解决路径映射问题”对话框，该对话框为您提供了相同的地图映射小部件，其工作方式相同。修复任一位置的设置都将起作用。如果您没有要开始的服务器调试设置并且 IDE 检测到映射问题，则会出现“解决路径映射问题”对话框，此时它还将为您创建服务器设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T04:16:10.767

对于使用 Netbeans 和 Laravel 的用户，您需要将“Web Root”设置为您的公共文件夹，该文件夹位于您的项目-> 属性-> 源中。

[![在 Netbeans 中编辑 Web 根目录](https://i.stack.imgur.com/Tooj7.png)](https://i.stack.imgur.com/Tooj7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T11:10:36.810

在我的情况下，“ `breakpoint_set`”/“ `command is not available`”问题的原因是禁用[`xdebug.extended_info`](http://xdebug.org/docs/remote#extended_info)选项（它默认启用，但我禁用它进行分析）。
断点不起作用然后`xdebug.extended_info`被禁用。
重新启用后我有断点工作`xdebug.extended_info`。

# vb.net - 将字符从手持条形码扫描仪附加到 RichTextBox，而不为序列号中的每个字符创建新行

> ID：16157278
> 
> 赞同：0
> 
> 时间：2013-04-22T21:44:30.537
> 
> 标签：vb.net, visual-studio-2010

我正在为同事构建一个应用程序，允许用户使用手持扫描仪扫描条形码。该应用程序会自动将该条形码附加到 RichTextBox。除了一个问题外，我已经完全正常工作了：

**当用户扫描条形码时，它会扫描新行中的每个字符**。例子：

```
A 1:20 PM
R 1:20 PM
C 1:20 PM
0 1:20 PM
1 1:20 PM 
```

代替

```
ARC01 1:20 PM 
```

有人可以告诉我我在下面的代码中缺少什么吗？

```
 Private Sub RichTextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RichTextBox1.TextChanged

    Dim currentTime As String = Format(TimeOfDay, "HH:mm:ss")

    RichTextBox1.AppendText(" " + currentTime + vbLf)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:57:19.567

大概任何驱动程序正在输入输入都是一次一个字符。如果您无法控制该代码，并且条形码中有固定数量的字符，则可以等待该行包含那么多字符，*然后*添加空格、时间戳和换行符。就像是

```
Dim lastLine As String
lastLine = RichTextBox1.Lines.Last

If lastLine.Length = 5 Then
    RichTextBox1.AppendText(" " + currentTime + vbLf)
End If 
```

# powershell - 启动 PowerShell 时出现“动态操作只能在同构 appdomain 中执行”错误

> ID：16157279
> 
> 赞同：15
> 
> 时间：2013-04-22T21:44:32.663
> 
> 标签：powershell, automation, code-access-security

我有一个试图从 WCF REST 服务执行的 powershell 脚本。我正在使用`System.Management.Automation`和`System.Management.Automation.Runspaces`程序集。

C# 代码如下所示：

```
Command command = new Command(path);
command.Parameters.Add(param);
RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();
using (Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration))
{
    runspace.Open();
    ... other code
} 
```

一旦我尝试执行 open 语句，就会出现此错误：

> 动态操作只能在同构 AppDomain 中进行。

我看了又看，但没有任何效果。我已经尝试将此行添加到我的 web.config 中：但它没有为我做任何事情。

你有想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T02:01:20.863

我只是用谷歌搜索了那个错误，它似乎与[这里](https://stackoverflow.com/questions/8761113/dynamic-operations-can-only-be-performed-in-homogenous-appdomain-error)和[这里](https://stackoverflow.com/questions/5541143/legacycasmodel-true-and-dynamic-data-operations)`legacyCasPolicy`讨论的设置为 true有关。将其设置为 false 也解决了您的问题。可以在[此处](http://msdn.microsoft.com/en-us/library/c5tk9z76.aspx)找到有关此配置元素的详细信息。

# c# - MySQL try-catch 无法正常工作

> ID：16157287
> 
> 赞同：0
> 
> 时间：2013-04-22T21:45:08.997
> 
> 标签：c#, mysql, exception-handling

我正在尝试`error 1045 (access denied)`从 MySQL 中获取信息，但我遇到了一些奇怪的问题。我的代码有问题吗？

它没有处理异常，而是在 VS 中抛出了一个异常？

```
private bool connOpen()
{
    bool kleir = false;
    try
    {
        conn.Open();
        kleir = true; // throws exception here
    }
    catch (MySqlException ex)
    {
        switch (ex.Number)
        {
            case 1045:
                MainWindow.connError = true;
                break;
        }
        kleir = false;
    }
    return kleir;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:36:53.293

假设您正在 VS 中调试它。即使您有异常处理程序，VS 也会停止异常处理*，因为*您处于调试模式。如果您在工作室之外运行它，那么异常将由块处理。您还应该能够简单地按 F5（运行）以继续。

但是，在我看来，这只是一个插曲。您显示的代码非常糟糕。这个片段暗示你正在打开一个连接，使用它来进行一个或多个数据库调用，然后在某个地方你有另一种方法来关闭它。

你永远不应该在远离你实际使用它们的地方初始化/管理连接。连接池能够正确处理大量的连接/断开连接。您应该将代码保留在一起的原因很简单，在连接上打开/关闭之间的事情越多，那么您的代码就越有可能无法正确处理这些对象。当它们没有被处理掉时，连接池将出现非常奇怪且难以调试的问题，并且内存使用量会大幅上升。

连接和命令数据库对象是非托管对象。它们实现 IDisposable 是因为它们控制非托管资源。这样做的正确方法的一个例子是：

```
using (SqlConnection conn = new SqlConnection(connstring)) {
  using (SqlCommand cmd = new SqlCommand(conn)) {
    // do atomic database stuff
  }
} 
```

using 语句将自动关闭并处理这些对象。连接池（您甚至不必考虑）将确保如果您调用上述代码 1000 次，它仍然运行得非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:18:45.367

我怀疑当您尝试打开连接时会引发异常，但是菜单`DEBUG.Exceptions.Common Language Runtime Exceptions`中的 Dialog 在 column 下标记了复选框`Thrown`。这应该是您的代码在显示的行停止并且不进入 catch 块的原因

# c - C中的AES ofb解密

> ID：16157288
> 
> 赞同：1
> 
> 时间：2013-04-22T21:45:10.083
> 
> 标签：c, encryption, aes

我正在玩 AES 加密，我遇到了这个问题。我在网上某处找到了一个代码示例，并尝试使用它。（我正在使用 Gladman AES 库）

```
#include <stdlib.h>
#include <time.h>
#include <stdio.h>
#include "aes.h"

void encrypt(const char *fileIn, const char *fileOut, const unsigned char *key);

void decrypt_string(const char *fileIn, const unsigned char *key);

int main() {

  const unsigned char key[] = "password";
  srand(time(NULL));
  aes_init();
  encrypt("TEST.raw", "TEST.raw.encrypted", key);
  decrypt_string("TEST.raw.encrypted", key);
  return 0;
}

void encrypt(const char *fileIn, const char *fileOut, const unsigned char *key) {
  int i;
  aes_encrypt_ctx ctx[1];
  unsigned char iv[16]; /* initialisation vector */
  unsigned char inBuffer[200], outBuffer[200];
  FILE *inFile = fopen(fileIn, "rb");
  FILE *outFile = fopen(fileOut, "wb");

  /* pick a random initialisation vector */

  for(i = 0; i < 16; ++i)
    iv[i] = rand() & 0xFF;
  fwrite(iv, 1, 16, outFile);

  aes_encrypt_key256(key, ctx);
  while((i = fread(inBuffer, 1, sizeof(inBuffer), inFile)) > 0) {
    aes_ofb_encrypt(inBuffer, outBuffer, i, iv, ctx);
    fwrite(outBuffer, 1, i, outFile);
  }

  aes_ofb_encrypt(inBuffer, outBuffer, i, iv, ctx);
  fwrite(outBuffer, 1, i, outFile);
  fclose(inFile);
  fclose(outFile);
}

void decrypt_string(const char *fileIn, const unsigned char *key) {
  int i,j;
  aes_encrypt_ctx ctx[1];
  unsigned char iv[16]; /* initialisation vector */
  unsigned char inBuffer[200], outBuffer[200];
  FILE *inFile = fopen(fileIn, "rb");
  //FILE *outFile = fopen(fileOut, "wb");
  /* read initialization vector from file */
  if(fread(iv, 1, 16, inFile) < 16)
    return; /* error: file doesn't even contain an initialisation vector */

  aes_encrypt_key256(key, ctx);
  while((i = fread(inBuffer, 1, sizeof(inBuffer), inFile)) > 0) {
    aes_ofb_decrypt(inBuffer, outBuffer, i, iv, ctx);
    printf("%s", outBuffer);
  }

  fclose(inFile);
} 
```

现在一切正常，文件被正确解密。

但是，当我获取加密文件并尝试使用decrypt_string() 函数再次对其进行解密时，它无法正确解密。它仅在程序运行时有效。现在我一直在搜索，发现aes.h中的注释，可能与aes_mode_reset()有关。但是我只是在学习，所以我不太了解。所以我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:03:07.130

你的`key`包括垃圾。AES256 密钥不是字符串；它正好是 32 字节的二进制数据。您正在传递 8 个字节（“密码”）以及恰好在堆栈上的接下来的 24 个字节。

您不能将人工提供的密码传递给`aes_encrypt_key256()`. 您需要先使用 PBKDF2 或其他密钥派生函数（例如 bcrypt 或 scrypt）将其转换为密钥。[BSD](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libutil/pkcs5_pbkdf2.c?rev=HEAD)在 C 语言中有许多 PBKDF2 实现之一。

# python - 从字符串在python中创建JSON不起作用

> ID：16157290
> 
> 赞同：0
> 
> 时间：2013-04-22T21:45:10.880
> 
> 标签：python, json, python-3.x

我正在尝试从字符串值创建和显示数组。首先我尝试从字符串创建一个 JSON 值，然后我尝试从中显示键/值。

我得到错误：最后一条规则的语法无效......整个晚上都很忙，但找不到：（

Python3代码：

```
import urllib.request
import urllib.parse
import json

user = 'user'
pw = 'password'

login_url = 'http://www.xxxxxxx.nl/test/index.php'

data = urllib.parse.urlencode({'user': user, 'pw': pw})
data = data.encode('utf-8')
# adding charset parameter to the Content-Type header.
request = urllib.request.Request(login_url)
request.add_header("Content-Type","application/x-www-form-urlencoded;charset=utf-8")

f = urllib.request.urlopen(request, data)

## returning content from webpage: {"A":"aap","B":"noot","C":"mies"}

#json.JSONDecoder().decode(f)
#json.JSONDecoder.raw_decode(f)
#test = print(f.read().decode('utf-8'))
test = f.read().decode('utf-8')
#print (test)
#test2 = json.JSONDecoder().decode(test)

test = '{"A":"aap","B":"noot","C":"mies"}'
dest = json.loads(test)
print dest['A']  ## <<< invalid syntax ??

#json.loads(test2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:47:26.543

在 Python 3.x 中 -`print`是一个函数（即：不再是 Python 2.x 中的语句） - 您需要使用：

```
print(dest['A']) 
```

代替：

```
print dest['A'] 
```

# iphone - 在bannerViewActionDidFinish 之后，AdBannerView 移动到超级视图的顶部：Bug or Not？

> ID：16157294
> 
> 赞同：0
> 
> 时间：2013-04-22T21:45:29.037
> 
> 标签：iphone, ios, objective-c, iad, adbannerview

随意参考托管在 GitHub 上的示例 Xcode 项目来演示此问题：[IAdBannerBugDemo](https://github.com/BigSauce/IAdBannerBugDemo)

当在 UITableView 下方和 UITabBar 上方显示 AdBannerView 时，在`bannerViewActionDidFinish:`调用之后，AdBannerView 会错误地移动到其父视图的顶部。

我的问题是：

1.  是否有有效的解决方法不是手卡？如果是这样，解决方法是什么？
2.  这是 iOS SDK 的错误吗？

首先，这是两个说明我的问题的屏幕截图。

1.  按下第*一个屏幕截图*中显示的按钮。
2.  等待 iAd 加载。
3.  点击 iAd。
4.  按全屏 iAd 左上角的黑色 X 关闭 iAd。
5.  注意 iAd 移到顶部（*第二张截图*）

## 按下显示的按钮并等待 iAd 加载

![广告已加载](https://i.stack.imgur.com/CDQHc.png)

## 按下/单击 iAd 横幅以全屏查看广告

![按下/单击 iAd 横幅](https://i.stack.imgur.com/VtME0.png)

## 关闭全屏 iAd 并注意 iOS SDK 将 iAD 横幅移动到其超级视图的顶部

![错误插图](https://i.stack.imgur.com/hzPTu.png)

通过打断点等，我注意到它`[UIViewControllerWrapper setFrame:]`负责重新定位 AdBannerView，但这完全超出了我的控制，因为它是 Apple 框架的一部分。

我解决此问题的唯一方法是通过覆盖`viewWillLayoutSubviews`负责正确放置 AdBannerView 的任何视图控制器来更正 AdBannerView 的位置。

但即使这种解决方法也会将 AdBannerView 从其父视图的顶部重新定位到正确的位置（在表格视图下方，标签栏上方，包含在表格视图的超级视图中）。

一个好的答案是发布示例代码来说明如何解决这个烦人的问题。

[我也在 Apple 的开发者论坛上开设了一个帖子](https://devforums.apple.com/thread/184889)。因此，请随时咨询此线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:11:07.683

当使用 iAd 横幅和 uitableviewcontroller 时，您可以将其放在 tableview 的标题中，因为 table viewcontroller 控制 tableview 的框架和边界。如果要在表格视图上方或下方添加横幅，则必须有一个 uiviewcontroller 并将 uitableview 添加到其中，以便您可以从 uiviewcontroller 控制表格视图的框架和边界。横幅将保留在您放置的位置，并且您必须为表格视图框架和边界设置动画，横幅动画进出视图。

没有使用 uitableviewcontroller 的解决方法。而使用 uiviewcontroller 只能使用动态 tableciew。静态表视图仅在 uitableviewcontroller 中。我希望这有帮助！

# javascript - 使用 Javascript 处理格式化时间

> ID：16157295
> 
> 赞同：0
> 
> 时间：2013-04-22T21:45:28.860
> 
> 标签：javascript, time

假设我有这种格式的电视节目的开始和持续时间：`10:05`.
我想要做的是当有人输入程序数据并输入程序的开始时间和持续时间时，我的代码会将它们加在一起并自动填充下一个程序的开始时间。

我试图将这些时间转换为秒，然后在操作后再次将它们转换为格式化时间，但我不知道该怎么做。

```
function processTime(time) {    
    if (typeof time !== 'undefined') {
        var times = time.split(":");
        var minutes = times[0];
        var seconds = times[1];
        seconds = parseInt(seconds, 10) + (parseInt(minutes, 10) * 60);
    } else {
        var seconds = null;
    }
    return seconds;
}

function createTime(timestamp) {
    var output;
    if (typeof timestamp !== 'undefined') {
        // Problem is here, my timestamp is not standard unix timestamp
        var time = new Date(timestamp * 1000);
        var minutes = time.getMinutes();
        var seconds = time.getSeconds();
        output = minutes + ":" + seconds;
    }
    return output;
}

$progForm.delegate(".program-duration", 'keyup', function() {
        $(this).on('focusout', function() {
            var duration = processTime($(this).val());
            var startTime = processTime($(this).parent().prev().find(".program-time").val());
            if (duration && typeof duration !== 'undefined' && startTime && typeof startTime !== 'undefined') {
                var nextStart = duration + startTime;
                var $nextProgramTime = $(this).parent().parent().next().find(".program-time");
                if (parseInt($nextProgramTime.val()) < 1) {
                    $nextProgramTime.val(createTime(nextStart));
                }
            }
        });
    }); 
```

```
<form>
    <table>
        <tbody class="programs-inputs">
            <tr>
                <td><input type="text" class="program-time timepicker input-mini" name="programs[time][]" placeholder="00:00" /></td>
                <td><input type="text" class="program-duration timepicker input-mini" name="programs[duration][]" placeholder="00:00" /></td>
            </tr>
            <tr>
                <td><input type="text" class="program-time timepicker input-mini" name="programs[time][]" placeholder="00:00" /></td>
                <td><input type="text" class="program-duration timepicker input-mini" name="programs[duration][]" placeholder="00:00" /></td>
            </tr>
        </tbody>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:59:39.183

unix 时间戳显示自 1970 年以来的时间。由于您只对时间感兴趣，而不是日期，因此 unix 时间戳可能不适合。你可以做你之前做的相反的事情。

```
var seconds = totalSeconds;
var hours = Math.floor(seconds / 3600);
seconds -= hours * 3600;
var minutes = Math.floor(seconds / 60);
seconds -= minutes * 60;

var timeString = leadingZero(hours) + ':' + leadingZero(minutes) + ':' + leadingZero(seconds); 
```

这不会给你前导零，但这应该很容易修复。

```
function leadingZero(num) {
    var str = '';
    if (num < 10) {
        str += '0';
    }
    return str + num;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:00:11.203

只需使用您的`processTime`算法的逆：

```
function createTime(timestamp) {
    if (typeof timestamp == 'number') {
        var seconds = timestamp % 60;
        var minutes = (timestamp - seconds) / 60;
       return ("0"+minutes).slice(-2) + ":" + ("0"+seconds).slice(-2);
    }
} 
```

您最初的尝试是正确的，只是它不是时区证明。虽然`new Date(timestamp * 1000);`从 Jan 01 1970 00:00:00 *UTC*构造一个毫秒值，`getMinutes()`and`getSeconds()`方法将返回您当前*本地*时区中该时间戳的值 - 这可能是半小时的时间。切换到它们的 UTC 等效值 ( `.getUTCMinutes()`, `.getUTCSeconds()`) 它将起作用。一旦您需要包含小时甚至完整日期，使用[`Date`对象解决方案将为您节省很多麻烦:-)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# php - PHP - 在 HTML 中创建一个下载链接，指向从本地文件夹中获取的所有列表项

> ID：16157301
> 
> 赞同：0
> 
> 时间：2013-04-22T21:45:43.293
> 
> 标签：php, html, web-services, scripting, server-side

假设我在 PHP 中有以下脚本来创建目录路径 /Users/abc/bde/fgh 中所有文件的列表。现在我想让它们成为相同文件的可下载链接，我该如何实现呢？

```
$path = "/Users/abc/bde/fgh"; 

// Open the folder 
$dir_handle = @opendir($path) or die("Unable to open $path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 

if($file == "." || $file == ".." || $file == "index.php" ) 
    continue; 
    echo "<a href=\"$file\">$file</a><br />";   
  } 

// Close        
closedir($dir_handle); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:53:58.087

您正在寻找的可能是一种强制下载任何文件类型的方法吗？

看看这段代码，你可能想要添加更多的 mime 类型，具体取决于你让人们下载的文件类型。

此代码复制自：[http ://davidwalsh.name/php-force-download](http://davidwalsh.name/php-force-download)

```
// http://davidwalsh.name/php-force-download
// grab the requested file's name
$file_name = $_GET['file'];

// make sure it's a file before doing anything!
if(is_file($file_name)) {

    /*
        Do any processing you'd like here:
        1\.  Increment a counter
        2\.  Do something with the DB
        3\.  Check user permissions
        4\.  Anything you want!
    */

    // required for IE
    if(ini_get('zlib.output_compression')) { ini_set('zlib.output_compression', 'Off'); }

    // get the file mime type using the file extension
    switch(strtolower(substr(strrchr($file_name, '.'), 1))) {
        case 'pdf': $mime = 'application/pdf'; break;
        case 'zip': $mime = 'application/zip'; break;
        case 'jpeg':
        case 'jpg': $mime = 'image/jpg'; break;
        default: $mime = 'application/force-download';
    }
    header('Pragma: public');   // required
    header('Expires: 0');       // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Last-Modified: '.gmdate ('D, d M Y H:i:s', filemtime ($file_name)).' GMT');
    header('Cache-Control: private',false);
    header('Content-Type: '.$mime);
    header('Content-Disposition: attachment; filename="'.basename($file_name).'"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($file_name));    // provide file size
    header('Connection: close');
    readfile($file_name);       // push it out
    exit();

} 
```

当他们单击下载链接时，您只需要创建一个新的 php 页面（或相同的页面），它会转到带有文件名参数“file = {filename}”的新页面（或相同的页面）。为了安全起见，不要包含文件路径。这种方法存在安全问题，但对您来说可能无关紧要，这完全取决于您的情况以及正在下载的内容以及它是否是公共数据？

# c# - 处理数据馈送格式

> ID：16157305
> 
> 赞同：5
> 
> 时间：2013-04-22T21:45:55.623
> 
> 标签：c#

前几天我有一个有趣的面试问题，我真的很挣扎。（非常雄心勃勃的）规范要求我用 C# 为两个不同的数据流编写解析器。这是第一个流的虚构示例：

```
30=EUR/USD,35=3,50=ON,51=12.5,52=13.5,50=6M,51=15.4,52=16.2,50=1Y,51=17.2,52=18.3 
```

其中 30 是货币对，35 是期限数，50、51、52 ​​分别是期限、买入价和卖出价。买价和卖价是可选的，但正确的价-卖价元组将至少具有两个价格中的一个。他们提供的框架代码暗示解析这一行的结果应该是 3 个单独的对象（DataElement 实例）。我最终得到了一个相当讨厌的 switch 语句和基于循环的实现，我不确定它是否真的有效。

有什么技术可以读取这种流？我试图用递归找出一些东西，但我做错了。

编辑：基于@evanmcdonnall 的回答（已接受），这里是完整的编译和工作代码，以防它对其他人有用。

```
 List<DataElement> Parse(string row)
    {
        string currency=string.Empty;
        DataElement[] elements = null;
        int j = 0;
        bool start = false;
        string[] tokens = row.Split(',');
        for (int i = 0; i < tokens.Length; i++)
        {
            string[] kv = tokens[i].Split('=');

            switch (kv[0])
            {
                case "30":
                    currency = kv[1];
                    break;
                case "35":
                    elements = new DataElement[int.Parse(kv[1])];
                    break;
                case "50":
                    if (start)
                        j++;
                    elements[j] = new DataElement() { currency = currency, tenor = kv[1] };
                    start = true;
                    break;
                case "51":
                    elements[j].bid = double.Parse(kv[1]);
                    break;
                case "52":
                    elements[j].ask = double.Parse(kv[1]);
                    break;
            }
        }
        return elements.ToList();
    } 
```

主要概念是：

*   为每行中重复项目的“内循环”有一个单独的计数器
*   有一个布尔标志来指示“内循环”何时开始
*   分配对象数组以将“内循环”结果存储在长度已知的点（即标记 50）
*   为了简单明了，有一个只读取一行的函数，然后从一个单独的函数中多次调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:05:37.543

我看不出它有什么棘手的地方。但是，我没有看到任何解决方案比我想到的具有许多条件解决方案的非常具体的迭代更好。

首先你用逗号分割，然后循环遍历这些标记，用等号分割每个标记以获得键值对。当您开始/完成一个项目时，您可以检查每个键和一个 bool 来跟踪。您阅读货币并将其用于每个对象。您读取 key`35`并发现有 3 个对象，因此您分配了一个包含三个对象的数组，每个对象具有 3 个属性；男高音、出价和要价。当您遇到 50 时，您应该将 start 设置为 true。如果它们在那里，您设置 50、51 和 52。下面是一些示例代码；

```
 string currency;
  int j = 0;
  bool start = false;
  string[] tokens = line.Split(',');
  for (int i =0; i < tokens.length; i++)
  {
        string[] kv = tokens[i].Split('=')
        if (kv[0] == 30)
             currency = kv[1]
        elseif (kv[0] == 35)
        {
             DateElement[] elements = new DataElement[kv[1]];
        }
        elseif (kv[0] == 50)
        {
             if (start)
                 j++;
             start = true; // flip your flag after the condition so it works for element 0
             elements[j].currency = currency;
             elements[j].tenor = kv[1];
        }
        elseif (kv[0] == 51)
             elements[j].bid = kv[1];
        elseif (kv[0] == 52)     
            elements[j].ask = kv[1];
       // if these optional values aren't there we'll just fall back into the case for 50
      // and everything will work as expected.
  } 
```

代码可能不漂亮，但逻辑相当简单，假设行格式正确，它将始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:07:16.787

30=欧元/美元,35=3,50=开,51=12.5,52=13.5,50=6M,51=15.4,52=16.2,50=1Y,51=17.2,52=18.3

让我尝试。我不是在编写 C# 代码，只是概述我的方法

我会把它分成两段 Chain1={P0 , P1} 和 Chain2={P2......PN}

根据 P1 的值打破平均链 2。基于逗号的位置。

```
substr=Chain.substring(0,Chain2.IndexOf(",", P1=3)); 
```

我们可以创建一个[**元组**](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)类集合——

```
here either i can use regex to split the string or simple substring and indexof("=")  to extract value  

var seg= new Tuple<string, int, int, >("ON", 12.5, 13.5); 
```

# web-services - 调用jsp Web服务

> ID：16157314
> 
> 赞同：0
> 
> 时间：2013-04-22T21:46:27.467
> 
> 标签：web-services, jsp

我需要`http://www.domainname/isValidCardNumber.jsp`从我的 Magento 调用另一个网络服务（PHP 结帐表格以检查 Bonusid 是否有效。网络服务需要一个名为 Cardnr 的参数，它必须是 11 位或 12 位数字。

Webservice 将以 XML 格式返回响应。下面给出了成功和失败案例的 xml。

成功：

```
<?xml version="1.0" encoding="utf-8"?>
<Response>
    <Result>true</Result>
    <ResultDetails><![CDATA[]]></ResultDetails>
</Response
Failure:
<?xml version="1.0" encoding="utf-8"?>
<Response>
    <Result>false</Result>
    <ResultDetails><![CDATA[not valid id]></ResultDetails>
</Response> 
```

如何调用网络服务并读出对我的 Magento 商店的响应。一直在研究 Ajax 和 javascript，什么是最好的解决方案。代码提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:42:15.410

您将在这里有 2 个选项。

1.  **从 UI 调用，使用 ajax ：**如果你打算使用它，解析 XML 会很困难，但你不必这样做。只需找出''标签的索引并在此之后阅读文本，这就是您感兴趣的全部。更好的是，对于'true'的响应字符串的indexOf。如果您得到非负输出，则为真，否则为假。

2.  **从后端：**解析可以以与上述相同的方式完成，尽管您也可以使用 XML 解析器为您完成解析。那将很容易维护。

# batch-file - 批处理文件中的桌面运行时参数？

> ID：16157317
> 
> 赞同：-2
> 
> 时间：2013-04-22T21:47:00.373
> 
> 标签：batch-file

我需要将输入参数传递给控制台应用程序并使用批处理文件检索输出参数。

步骤是：

1.  使用输入参数运行控制台应用程序。（这是程序当前运行的方式。）

2.  然后，我想等待控制台应用程序的响应，然后再继续下一步。该程序需要等待，因为它正在调用 Web 服务。我需要确定对 Web 服务的响应代码调用 = 0。

3.  下一步取决于来自 Web 服务的响应。

    一个。如果来自 Web 服务的响应 = 0，则使用参数再次调用控制台应用程序以关闭 Web 服务上的客户帐户。

    同样在此步骤下，对控制台应用程序的第二次调用的结果应显示在用户可以看到的消息中。

    湾。如果来自 Web 服务的响应不 = 0，则应向用户显示一条消息，说明问题所在。没有进一步的调用。

因此，您能否向我展示代码和/或指出如何实现此目标的参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:06:20.290

让我们再试一次。这是应该做我*认为*你想要的批处理代码。

```
@echo off
call myApp.exe %*
set result=%errorlevel%
echo result = %result%

if %result%==0 call myApp.exe close (or whatever the paramaters are)
if %result%==1 echo "Message explaining what error code 1 means"
if %result%==2 echo "Message explaining what error code 2 means"
... 
```

这将使用您传递到批处理文件中的任何参数调用 myApp.exe。如果需要，您可以将 替换为`%*`硬编码输入。然后打印应用程序的退出代码，并且可以再次调用它来关闭或打印一条解释错误代码的消息。

* * *

从[MSDN修改](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)

```
// Start the child process.
Process p = new Process();
// Redirect the output stream of the child process.
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "externalExecutable.exe";
p.Arguments = "-arg1 -arg2";
p.Start();
// Wait for the child process to exit before
// reading to the end of its redirected stream.
p.WaitForExit();
// Read the output stream
string output = p.StandardOutput.ReadToEnd();
// Parse the output to see what you should do
// Or just use the exit code from the proccess
if (output.Equals("0") || p.ExitCode == 0) {
   // Do what you need to in this case
} else {
   // Do something else here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:43:45.363

我已经在 vbnet 中完成了这个通用函数，真的不知道这是否会帮助你，因为我们不知道你在说哪种语言。

使用此函数，您可以等待并读取进程输出（例如进程 CMD）：

```
#Region " Run Process Function "

    ' [ Run Process Function ]
    '
    ' // By Elektro H@cker
    '
    ' Examples :
    '
    ' MsgBox(Run_Process("Process.exe")) 
    ' MsgBox(Run_Process("Process.exe", "Arguments"))
    ' MsgBox(Run_Process("CMD.exe", "/C Dir /B", True))
    ' MsgBox(Run_Process("CMD.exe", "/C @Echo OFF & For /L %X in (0,1,50000) Do (Echo %X)", False, False))
    ' MsgBox(Run_Process("CMD.exe", "/C Dir /B /S %SYSTEMDRIVE%\*", , False, 500))
    '  If Run_Process("CMD.exe", "/C Dir /B", True).Contains("File.txt") Then MsgBox("File found")

    Private Function Run_Process(ByVal Process_Name As String, Optional Process_Arguments As String = Nothing, Optional Read_Output As Boolean = False, Optional Process_Hide As Boolean = False, Optional Process_TimeOut As Integer = 999999999)

        ' Returns True if "Read_Output" argument is False and Process was finished OK
        ' Returns False if ExitCode is not "0"
        ' Returns Nothing if process can't be found or can't be started
        ' Returns "ErrorOutput" or "StandardOutput" (In that priority) if Read_Output argument is set to True.

        Try

            Dim My_Process As New Process()
            Dim My_Process_Info As New ProcessStartInfo()

            My_Process_Info.FileName = Process_Name ' Process filename
            My_Process_Info.Arguments = Process_Arguments ' Process arguments
            My_Process_Info.CreateNoWindow = Process_Hide ' Show or hide the process Window
            My_Process_Info.UseShellExecute = False ' Don't use system shell to execute the process
            My_Process_Info.RedirectStandardOutput = Read_Output '  Redirect (1) Output
            My_Process_Info.RedirectStandardError = Read_Output ' Redirect non (1) Output
            My_Process.EnableRaisingEvents = True ' Raise events
            My_Process.StartInfo = My_Process_Info
            My_Process.Start() ' Run the process NOW

            My_Process.WaitForExit(Process_TimeOut) ' Wait X ms to kill the process (Default value is 999999999 ms which is 277 Hours)

            Dim ERRORLEVEL = My_Process.ExitCode ' Stores the ExitCode of the process
            If Not ERRORLEVEL = 0 Then Return False ' Returns the Exitcode if is not 0

            If Read_Output = True Then
                Dim Process_ErrorOutput As String = My_Process.StandardOutput.ReadToEnd() ' Stores the Error Output (If any)
                Dim Process_StandardOutput As String = My_Process.StandardOutput.ReadToEnd() ' Stores the Standard Output (If any)
                ' Return output by priority
                If Process_ErrorOutput IsNot Nothing Then Return Process_ErrorOutput ' Returns the ErrorOutput (if any)
                If Process_StandardOutput IsNot Nothing Then Return Process_StandardOutput ' Returns the StandardOutput (if any)
            End If

        Catch ex As Exception
            'MsgBox(ex.Message)
            Return Nothing ' Returns nothing if the process can't be found or started.
        End Try

        Return True ' Returns True if Read_Output argument is set to False and the process finished without errors.

    End Function

#End Region 
```

# java - 如何在每次调用变量时将最终数组变量设置为随机播放方法返回而不获取不同的牌组

> ID：16157318
> 
> 赞同：-1
> 
> 时间：2013-04-22T21:47:07.637
> 
> 标签：java, shuffle

所以这是我的问题：我正在创建一个 String[] 变量来调用 main 方法以进行检查。每次我调用该变量时，它都会创建一个新牌组。我已经在方法和变量上尝试了 final 。这是我的 Dealer 类，它有我的 shuffle 方法。谢谢你的帮助。

```
package blackjack;

import java.util.*;

public class Dealer {
private Deck deck = new  Deck();
private String[] deckArr = deck.deckArr;
private List list = new ArrayList<>(Arrays.asList(deckArr));
public String[] shuffDeck = shuffleDeck(deckArr);
private int count = 0 ;

public final String[] shuffleDeck(String[] deck) {
    Collections.shuffle(list);
    List<String> shufList = list;
    deck = shufList.toArray(new String[shufList.size()]);
    return deck;
    }

public String deal() {
    String dealtCard = null;
    if (count < 52) {
      dealtCard = shuffDeck[count];

    }
    else {
        shuffleDeck(deckArr);
        this.count = 0;
    }
    this.count++;
    return dealtCard;
}
} 
```

我的主要方法：主要用于测试目的。

```
package blackjack;

public class BlackJack {

public static void main(String[] args) {
    Deck deck = new Deck();
    Dealer dealer = new Dealer();
    String str = dealer.deal();

    for(int i = 0; i <52; i++)
        System.out.println(dealer.shuffDeck[i]);
        System.out.println();
        System.out.println();
        System.out.println(str);

    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:54:08.287

`Collections.shuffle()`正在使用`Random()`播种`System.currentTimeMillis()`的新牌组，因此如果计时器已更改，则每次洗牌都会给出一个新牌组。

如果您`Random()`每次使用相同的种子运行 shuffle `Collections.shuffle(list, new Random(123))`，如果您从相同的牌组开始，您可以获得相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:52:52.487

我根据问题中的有限信息在这里猜测，但我认为你做错了。您可能只想调用`shuffleDeck()`一次，并在 for 循环中调用`deal()`多次。

如果我的假设是错误的，那么*请*再次澄清您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:53:40.530

我认为你有一些错别字：

```
public final String[] shuffleDeck(String[] deck) {
    Collections.shuffle(list);
    List<String> shufList = list;
    deck = shufList.toArray(new String[shufList.size()]);
      ^------> THIS SHOULD BE shuffDeck
    return deck;
             ^------> THIS SHOULD BE shuffDeck
} 
```

因为`deck`是一个`Deck`实例，而您正在返回 a`String[]`并且基于它，您似乎真正想要的是返回`shuffDeck`。

# c# - 使用 Xamarin (Mono C#) 和 .Net 生成相同的密钥

> ID：16157323
> 
> 赞同：1
> 
> 时间：2013-04-22T21:47:12.970
> 
> 标签：c#, .net, hash, mono, xamarin.android

我试图让用户输入一个密码，然后使用一个公式来创建一个时间敏感的字符串。IE 如果您在一分钟后调用该函数，则字符串将完全不同。然后我用这个字符串通过 SHA1 算法运行它。我的问题是我需要 .Net 和 Mono 库来产生相同的结果，但它们不是。我正在使用 Xmarin studio 将单声道库部署到 android。我正在使用 .Net 3.5 框架来部署我的 Web 服务。

我已经确认作为参数传递给 sha1 aglorithm 的两个字符串在 android 和 .net 上是相同的。问题是SHA1算法的输出不同。我相信这是因为它们是如何在不同的库中实现的。两个设备上的实际 C# 代码相同。

有谁知道我可以使用的不依赖于库的简单算法？或者更好的是，关于我可能做错的建议。

这是我的 C# 3.5 web 服务的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Security.Cryptography;

namespace rasToken
{
    /// <summary>
    /// Summary description for Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX,    uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public string rasEncrypt(String userid)
    {
        //get pin from data base
        String pin = "1234";
       return generateToken(pin);

    }
    public string generateToken(String pin)
    {
        String debug="";

        int month = DateTime.Now.Month;
        debug+="month: "+month;
        int year = DateTime.Now.DayOfYear;
        debug+="year: "+year;
        int hour = DateTime.Now.Hour;
         debug+="hour: "+hour;
         int minute = DateTime.Now.Minute;
        debug+="minute: "+minute;
        int day = DateTime.Now.Day;
        debug+="day: "+day;
        int concat = month * minute * year * day * hour * 7857564;
        concat=Math.Abs(concat);
        SHA1 sh1 = SHA1.Create();
        String hash = concat + "23117345423219" + pin;
        //MD5 hasher = MD5.Create();
        byte[] result = sh1.ComputeHash(getBytes(hash));

        String final = getString(result);

       return final.Substring(0, 8)+hash;
    }

    private byte[] getBytes(String hash){
        System.Text.ASCIIEncoding  encoding=new System.Text.ASCIIEncoding();
        return encoding.GetBytes(hash);           
    }

    private String getString(byte[] bytes)
    {

        System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
        String clean = Convert.ToBase64String(bytes).Replace(@"\", string.Empty);
        return clean;
        //return encoding.GetString(bytes);
    }

}
} 
```

这是我的单声道 android 库代码

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using System.Security.Cryptography;

namespace raskey
{
[Activity (Label = "raskey", MainLauncher = true)]
public class Activity1 : Activity
{
    //int count = 1;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button> (Resource.Id.myButton);
        EditText input = FindViewById<EditText> (Resource.Id.pin);
        //button.Click += delegate {
        //  button.Text = string.Format ("{0} clicks!", count++);
        //};
        input.KeyPress+=(object sender, View.KeyEventArgs e) => {
            if (e.Event.Action == KeyEventActions.Down && e.KeyCode == Keycode.Enter) {
                generateToken(input.Text);
                Toast.MakeText (this, generateToken(input.Text), ToastLength.Short).Show ();
                e.Handled = true;
            }
        };

    }
    public string generateToken(String pin)
    {
        String debug="";

        int month = DateTime.Now.Month;
        debug+="month: "+month;
        int year = DateTime.Now.DayOfYear;
        debug+="year: "+year;
        int hour = DateTime.Now.Hour;
        debug+="hour: "+hour;
        int minute = DateTime.Now.Minute;
        debug+="minute: "+minute;
        int day = DateTime.Now.Day;
        debug+="day: "+day;
        int concat = month * minute * year * day * hour * 7857564;
        concat=Math.Abs(concat);
        SHA1 sh1 = SHA1.Create();
        String hash = concat + "23117345423219" + pin;
        //MD5 hasher = MD5.Create();
        byte[] result = sh1.ComputeHash(getBytes(hash));

        String final = getString(result);

        return final.Substring(0, 8)+" "+hash;
    }

    private byte[] getBytes(String hash){
        System.Text.ASCIIEncoding  encoding=new System.Text.ASCIIEncoding();
        return encoding.GetBytes(hash);           
    }

    private String getString(byte[] bytes)
    {

        System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
        String clean = Convert.ToBase64String(bytes).Replace(@"\", string.Empty);
        return clean;
        //return encoding.GetString(bytes);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:58:50.387

对于服务器和客户端，您的源代码看起来不同，例如

```
 return final.Substring(0, 8)+hash; 
```

和

```
 return final.Substring(0, 8)+" "+hash; 
```

这将返回一个不同的哈希值。

对于调试，您可能希望跳过哈希部分并使用*令牌*来查看它们是否匹配（如果不匹配，您知道您的问题与加密无关）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:54:31.527

我怀疑你的`hash`字符串是不同的。您应该记录它们并确保它们匹配。

# c++ - OpenCV中前景-背景分割方法的区别

> ID：16157326
> 
> 赞同：8
> 
> 时间：2013-04-22T21:47:18.430
> 
> 标签：c++, opencv, computer-vision, image-segmentation

OpenCV 2.4.5 版提供了几种不同的实现，可用于跟踪使用统计方法估计背景的移动对象。OpenCV 具有在 CPU 上实现的类`BackgroundSubtractorMOG`。`BackgroundSubtractorMOG2`此外，它还分别具有 和 的 GPU 实现`BackgroundSubtractorMOG`，`BackgroundSubtractorMOG2`即`gpu::MOG_GPU`和`gpu::MOG2_GPU`。还有另外两种算法`gpu::GMG_GPU`和`gpu::FGDStatModel`.

在我的应用程序中，我想在移动对象进入场景后立即对其进行分割。我想避免诸如阴影之类的误报。这 4 种算法似乎都专注于同一个目标——它们通过创建一个随时间变化的背景模型来将背景与前景分开。如果有这些实现经验的人可以帮助我决定使用哪个（GPU）实现，我正在徘徊。这些算法——MOG、MOG2、GMG 和 FGDStatModel——彼此之间有何不同？使用一种或另一种算法有什么优势？这些实现如何在速度、配置参数的能力、准确性、阴影检测（误报）等方面进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T16:15:52.003

我偶然发现了`bgfg_segm.cpp`位于`{opencv_folder}\samples\gpu`. 该演示显示了以下背景 - 前景分割类的用法并显示输出

```
FGDStatModel
MOG_GPU 
MOG2_GPU
VIBE_GPU  <- listed under `non-free functionality` in OpenCV documentation 
GMG_GPU 
```

这正是我比较算法所需要的。显然，需要调整算法的参数以找到适合给定应用程序的一个算法（以及一组参数）。

速度比较：

```
FGDStatModel  ~60 frames per second (fps) <-slowest 
MOG_GPU       ~650 fps
MOG2_GPU      ~650 fps
VIBE_GPU      ~1000 fps <- fastest
GMG_GPU       ~190 fps 
```

# android - 在android中请求HTTP失败

> ID：16157333
> 
> 赞同：2
> 
> 时间：2013-04-22T21:48:05.550
> 
> 标签：android, http

我正在尝试使用以下代码来获取 http 请求。网址是：

> 字符串 url = " [http://vlm1.uta.edu/~zhangzhong/questions.json](http://vlm1.uta.edu/~zhangzhong/questions.json) ";

调用时`InputStream source = retrieveStream(url)`，它给了我一个错误。顺便说一句，我已经添加了`<uses-permission android:name="android.permission.INTERNET"/>`

```
 private InputStream retrieveStream(String url) {

        DefaultHttpClient client = new DefaultHttpClient(); 

        HttpGet getRequest = new HttpGet(url);

        try {

           HttpResponse getResponse = client.execute(getRequest);
           final int statusCode = getResponse.getStatusLine().getStatusCode();

           if (statusCode != HttpStatus.SC_OK) { 
              Log.w(getClass().getSimpleName(), "Error " + statusCode + " for URL " + url); 
              return null;
           }

           HttpEntity getResponseEntity = getResponse.getEntity();
           return getResponseEntity.getContent();

        } 
        catch (IOException e) {
           getRequest.abort();
           Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
        }

        return null;   
     } 
```

以下是 LogCat：

04-22 16:36:37.042: D/dalvikvm(3840): 调试器已分离；对象注册表有 427

```
entries
04-22 16:36:37.042: I/dalvikvm(3840): ignoring registerObject request in thread=1
04-22 16:36:37.042: I/dalvikvm(3840): ignoring registerObject request in thread=1
04-22 16:36:37.042: D/AndroidRuntime(3840): Shutting down VM
04-22 16:36:37.042: W/dalvikvm(3840): threadid=1: thread exiting with uncaught exception (group=0x41760930)
04-22 16:36:37.072: E/AndroidRuntime(3840): FATAL EXCEPTION: main
04-22 16:36:37.072: E/AndroidRuntime(3840): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flashcard/com.example.flashcard.MainActivity}: android.os.NetworkOnMainThreadException
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.os.Looper.loop(Looper.java:137)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at dalvik.system.NativeStart.main(Native Method)
04-22 16:36:37.072: E/AndroidRuntime(3840): Caused by: android.os.NetworkOnMainThreadException
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at com.example.flashcard.MainActivity.retrieveStream(MainActivity.java:63)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at com.example.flashcard.MainActivity.onCreate(MainActivity.java:37)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.Activity.performCreate(Activity.java:5104)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 16:36:37.072: E/AndroidRuntime(3840):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 16:36:37.072: E/AndroidRuntime(3840):     ... 11 more
04-22 16:36:37.092: I/Process(3840): Sending signal. PID: 3840 SIG: 9
04-22 16:37:37.727: D/AndroidRuntime(3957): Shutting down VM
04-22 16:37:43.443: D/AndroidRuntime(4077): Shutting down VM
04-22 16:37:43.443: W/dalvikvm(4077): threadid=1: thread exiting with uncaught exception (group=0x41760930)
04-22 16:37:43.443: E/AndroidRuntime(4077): FATAL EXCEPTION: main
04-22 16:37:43.443: E/AndroidRuntime(4077): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flashcard/com.example.flashcard.MainActivity}: android.os.NetworkOnMainThreadException
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.os.Looper.loop(Looper.java:137)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at dalvik.system.NativeStart.main(Native Method)
04-22 16:37:43.443: E/AndroidRuntime(4077): Caused by: android.os.NetworkOnMainThreadException
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at com.example.flashcard.MainActivity.retrieveStream(MainActivity.java:63)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at com.example.flashcard.MainActivity.onCreate(MainActivity.java:37)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.Activity.performCreate(Activity.java:5104)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 16:37:43.443: E/AndroidRuntime(4077):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 16:37:43.443: E/AndroidRuntime(4077):     ... 11 more
04-22 16:37:44.865: I/Process(4077): Sending signal. PID: 4077 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:52:39.857

这里发生的事情很常见，您正试图在应用程序的主线程上执行一些长时间运行的操作。

这意味着，主线程负责更新 UI，以强制执行流畅的体验，如果 android 检测到您正在执行一些将阻塞的长时间运行操作，它将强制关闭应用程序，让您知道这很糟糕。

有许多替代解决方案，例如 AsynTask 或 IntentService。

IntentService 是在您向其发送意图时运行的服务：

```
public class NetworkHandler extends IntentService {
    @Override
    protected void onHandleIntent(Intent intent) {
         //Do your request here
    }
} 
```

要激活 IntentService，只需执行以下操作：

```
Intent intent = new Intent(mContext, NetworkHandler.class);
startService(intent); 
```

# php - 循环更新语法

> ID：16157335
> 
> 赞同：-2
> 
> 时间：2013-04-22T21:48:20.777
> 
> 标签：php, mysql

我正在调整我在[http://www.phpeasystep.com/mysql/10.html](http://www.phpeasystep.com/mysql/10.html)找到的一个示例， 以更好地满足我的需求。这是一个大的结果表，可以一次性编辑所有结果，而不是编辑单个记录。我已经修改了原来的允许传递一个搜索词来将表的内容限制为特定的条件。

我将非常感谢一些帮助找到我的错字。在初始查询 $sql 中，我不得不稍微更改引号，以便它可以与我的变量 $location 一起使用。更新一些行后，我点击提交，然后只看到表头和提交按钮。数据库没有内容，也没有更新。最后一个更新 $sql1 与第一个更新非常相似，所以我不确定它为什么不起作用。我试图弄清楚示例中的循环结构是否有问题。

```
<?php

$host="localhost"; // Host name 
$username="*****"; // Mysql username 
$password="*****"; // Mysql password 
$db_name="Inventory"; // Database name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$location=$_POST['search']; 

echo $location; 
$sql = 'SELECT * FROM `Items` WHERE `Location` = "'.$location.'"';

$result=mysql_query($sql);

// Count table rows 
$count=mysql_num_rows($result);
?>

<table width="500" border="0" cellspacing="1" cellpadding="0">
<form name="form1" method="post" action="">
<tr> 
<td>
<table width="500" border="0" cellspacing="1" cellpadding="0">

<tr>
<td align="center"><strong>Id</strong></td>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>Present Condition</strong></td>
<td align="center"><strong>Color</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td align="center">
<?php $id[]=$rows['ItemNumber']; ?> <?php echo $rows['ItemNumber']; ?>
</td>
<td align="center">
<input name="ItemName[]" type="varchar" id="ItemName" value="<?php echo $rows['ItemName']; ?>">
</td>
<td align="center">
<select name="ItemCondition[]" id="ItemCondition">
    <option value="">Select...</option>
    <option value="Excellent">Excellent !</option>
    <option value="Good">Good</option>
    <option value="OK">OK</option>
    <option value="Poor">Below Average</option>
    <option value="Change">Replace</option>
   </select>

</td>
<td align="center">
<input name="ItemColor[]" type="varchar" id="ItemColor" value="<?php echo $rows['ItemColor']; ?>">

</td>
</tr>

<?php
}
?>

<tr>
<td colspan="4" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</td>
</tr>
</form>
</table>

<?php

// Check if button name "Submit" is active, do this 
if($Submit){
    for($i=0;$i<$count;$i++){
    $sql1="UPDATE `Items` SET ItemName='$ItemName[$i]', ItemCondition='$ItemCondition[$i]', ItemColor='$ItemColor[$i]' WHERE ItemNumber='$id[$i]'";

    $result1=mysql_query($sql1);
    echo $i;
    }
}

if($result1){
header("location:inventory.php");
}
mysql_close();
?> 
```

表非常简单。ItemNumber（键）、ItemName、ItemCondition、ItemColor。目前它查询项目列表，正确显示每个项目的值，但随后无法更新。我难住了。

一百万提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:26:54.720

我注意到您的代码存在一些问题，并为您重新编写了其中的一些。希望评论/代码解释它，但随时提出任何问题！

这未经测试，所以我提前为任何错别字道歉。

```
<?php
$host = "127.0.0.1";
$username = "*****";
$password = "*****";
$db_name = "Inventory";

// When possible, you should use object-based SQL statements vs procedural
$sql = new mysqli($host, $username, $password, $db_name);

if($sql->connect_error) {
    die($sql->connect_error);
}

// This should really be checked with isset()
// It should also be sanitized to prevent SQL injections
$location = $_POST['search']; // This field should be sanitized to prevent SQL injections

$get_items = $sql->query("
    SELECT *
      FROM `Items`
     WHERE `Location` = '".$location."'
");

// count
$count = $get_items->num_rows;

// NOTE: Notice that the Submit logic comes before some of the other logic
// This is because of the header() statement. You can't change location if you've already outputted code
// One method around this is to buffer, but in this case, it's easier to just shift the code
if(isset($_POST['Submit'])) {
    for($i = 0; $i < $count; $i++) {
        $sql->query("
            UPDATE `Items`
               SET `ItemName`      = '".$_POST['ItemName'][$i]."',
                   `ItemCondition` = '".$_POST['ItemCondition'][$i]."',
                   `ItemColor`     = '".$_POST['ItemColor'][$i]."'
             WHERE `ItemNumber` = '".$_POST['id'][$i]."'
        ");
    }

    $sql->close(); // Close the connection on page-leave
    header("Location: inventory.php"); // Remember: You can't use this method to redirect if you've already displayed any content
    exit;
}
?>
<form name="form1" method="post">
    <table width="500" border="0" cellspacing="1" cellpadding="0">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Present Condition</th>
                <th>Color</th>
            </tr>
        </thead>
        <tbody>
        <?php
        while($row = $get_items->fetch_assoc()) {
        ?>
        <tr>
            <td align="center">
                <?php echo $row['ItemNumber']; ?>
                <input type="hidden" name="id[]" value="<?php echo $row['ItemNumber']; ?>">
            </td>
            <td align="center">
                <input name="ItemName[]" type="text" class="ItemName" value="<?php echo $row['ItemName']; ?>">
                <!-- This input type was "varchar" which isn't valid HTML -->
                <!-- Also, keep in mind that an ID should only be used once. Classes can be used multiple times, however. -->
            </td>
            <td align="center">
                <select name="ItemCondition[]" id="ItemCondition">
                    <option value="">Select...</option>
                    <option value="Excellent">Excellent !</option>
                    <option value="Good">Good</option>
                    <option value="OK">OK</option>
                    <option value="Poor">Below Average</option>
                    <option value="Change">Replace</option>
                </select>
            </td>
            <td align="center">
                <input name="ItemColor[]" type="text" class="ItemColor" value="<?php echo $row['ItemColor']; ?>">
            </td>
        </tr>
        <?php
        }
        ?>
        <tr>
            <td colspan="4" align="center">
                <input type="submit" name="Submit" value="Submit">
            </td>
        </tr>
        </tbody>
    </table>
</form>
<?php
$sql->close(); // Close the connection when done executing queries
?> 
```

# c++ - muparser 可以解析不同域上具有不同定义的函数吗？

> ID：16157341
> 
> 赞同：0
> 
> 时间：2013-04-22T21:48:41.417
> 
> 标签：c++, parsing, equation

我有以下函数 f(x)：

```
f(x) = fun1(x)  if x<a
f(x) = fun2(x)  if a<=x and if x<b
f(x) = fun3(x)  if b<=x 
```

有没有一种语法可以让我把这个函数写成一个字符串，这样 muparser 才能理解它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:46:08.140

muParser 理解`?:`运算符，就像在 C/C++ 和其他衍生产品中一样。因此，您可以将主体编写`f(x)`为：

```
x<a ? fun1(x) : x<b ? fun2(x) : fun3(x) 
```

我不确定这是否真的能捕捉到你想要的东西，但它会因为`?:`短路而起作用（所以第一个`:`隐含地包含条件`!(x<a)`）

# html - css rem 单元不适用于字体声明

> ID：16157342
> 
> 赞同：7
> 
> 时间：2013-04-22T21:48:47.833
> 
> 标签：html, internet-explorer, css, internet-explorer-10

此 CSS 属性不适用于 IE10：

```
font: bold 3rem/6rem Arial; 
```

但是，如果我将此属性拆分为单独的属性，则它可以工作：

```
font-size: 3rem;
font-weight: bold;
line-height: 6rem;
font-family: Arial; 
```

我也可以改用 PX，它也可以：

```
font: bold 48px/96px Arial; 
```

您可以使用 IE 调试器在每个页面上进行尝试。为什么这个属性不能在 IE 上运行，而是在所有其他浏览器上运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T00:26:02.847

IE 中不支持 rem 单位作为字体速记。这是一个已知的错误。希望这将得到解决。我知道的唯一解决方法是在字体属性之后再次指定字体大小，或者在使用 rem 时不使用简写。

错误报告是[https://connect.microsoft.com/IE/feedback/details/772679/ie10-not-recognizing-font-decloration-when-rem-is-used-as-font-size-unit-of-措施](https://connect.microsoft.com/IE/feedback/details/772679/ie10-not-recognizing-font-decloration-when-rem-is-used-as-font-size-unit-of-measure)

**更新：**请注意，这已从 IE11 开始修复。

# java - 如何在 Lucene 4.2.1 中实现一个基本的分析器？

> ID：16157345
> 
> 赞同：3
> 
> 时间：2013-04-22T21:49:04.073
> 
> 标签：java, apache, search, lucene

Lucene 4.2.1 没有 StandardAnalyzer，我不确定如何实现一个不会改变源文本的基本分析器。任何指针？

```
final SimpleFSDirectory DIRECTORY = new SimpleFSDirectory(new File(ELEMENTS_INDEX_DIR));
IndexWriterConfig indexWriterConfig = new IndexWriterConfig(Version.LUCENE_42, new Analyzer() {
        @Override
        protected TokenStreamComponents createComponents(String s, Reader reader) {
            return null;
        }
    });
    IndexWriter indexWriter = new IndexWriter(DIRECTORY, indexWriterConfig);
    List<ModelObject> elements = dao.getAll();
    for (ModelObject element : elements) {
        Document document = new Document();
        document.add(new StringField("id", String.valueOf(element.getId()), Field.Store.YES));
        document.add(new TextField("name", element.getName(), Field.Store.YES));
        indexWriter.addDocument(document);
    }
    indexWriter.close(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T22:40:46.210

您必须从 createComponents 返回一个 TokenStreamComponents。 `null`是不够的。

然而，Lucene 4.2.1**确实**有[StandardAnalyzer](http://lucene.apache.org/core/4_2_1/analyzers-common/org/apache/lucene/analysis/standard/StandardAnalyzer.html)。

如果您可能正在参考 Lucene 4.x 中 StandardAnalyzer 的更改，并且正在寻找旧的 StandardAnalyzer，那么您将需要[ClassicAnalyzer](http://lucene.apache.org/core/4_2_1/analyzers-common/org/apache/lucene/analysis/standard/ClassicAnalyzer.html)。

如果您真的想要一个不修改任何内容但只是以非常简单的方式进行标记的精简分析器，那么[WhitespaceAnalyzer](http://lucene.apache.org/core/4_2_1/analyzers-common/org/apache/lucene/analysis/core/WhitespaceAnalyzer.html)可能会满足您的目的。

如果您根本不希望它被修改或标记，那么[KeywordAnalyzer](http://lucene.apache.org/core/4_2_1/analyzers-common/org/apache/lucene/analysis/core/KeywordAnalyzer.html)。

而且，如果您必须创建自己的分析器，如您所说，则覆盖方法`createComponents`，并实际构建并返回[`TokenStreamComponents`](http://lucene.apache.org/core/4_2_1/core/org/apache/lucene/analysis/Analyzer.TokenStreamComponents.html). 如果以上四个都不能满足你的需求，我不知道你的需求是什么，所以我不会在这里尝试一个具体的例子，但这里是[分析器文档中的例子](http://lucene.apache.org/core/4_2_1/core/org/apache/lucene/analysis/Analyzer.html)

```
Analyzer analyzer = new Analyzer() {
 @Override
  protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
    Tokenizer source = new FooTokenizer(reader);
    TokenStream filter = new FooFilter(source);
    filter = new BarFilter(filter);
    return new TokenStreamComponents(source, filter);
  }
}; 
```

TokenStreamComponents 也有一个 arg ctor，所以过滤器是可选的，顺便说一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T08:38:53.833

您应该将 Common Analyzers 添加到您的项目中。它们现在位于“analysis/common”下的 Lucene-4.2.1.zip 文件中的单独 JAR 文件中。

```
 lucene-analyzers-common-4.*.jar 
```

一旦你将它添加到你的项目中（当你添加了核心）你应该有这个工作：

```
import org.apache.lucene.analysis.standard.StandardAnalyzer; 
```

# assembly - ARM：2 个 printfs 导致分段错误

> ID：16157346
> 
> 赞同：3
> 
> 时间：2013-04-22T21:49:16.167
> 
> 标签：assembly, arm

我为 ARM 编写了一个“Hello World”程序，它运行良好。一旦我重复 printf 调用（打印“Hello World”两次），程序开始给出“Segmentation Fault”。

这是带有双 printf 调用的代码：

```
.extern printf
.global main

main:
        push {ip,lr}
        ldr r0, =test
        bl printf
        bl printf

        mov r0, #0
        pop {ip,pc}

        test: .asciz "hello world\n" 
```

有关原因以及如何解决的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T21:55:25.807

ARM EABI 指定允许被调用者更改寄存器 r0-r3 和 r12，因此您的 r0 不再保存字符串的地址。事实上，它包含 printf 调用的返回值（在这种情况下为 12）。然后，您的下一个 printf 调用将尝试访问内存中地址 0xC 处的字符串，然后该过程会出现段错误。

要使双重 printf 工作，您必须这样做：

```
ldr r0, =test
bl printf
ldr r0, =test
bl printf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T21:53:14.827

`r0`不仅是第一个论点。返回值也存储在其中。在第一次调用 之后`printf()`，它将包含打印的字符数，而不是指向字符串的有效指针。你想要这个：

```
 ldr r0, =test
    bl printf
    ldr r0, =test
    bl printf 
```

# jsp - 404 未找到加载 web.xml 中映射的 servlet

> ID：16157347
> 
> 赞同：1
> 
> 时间：2013-04-22T21:49:27.637
> 
> 标签：jsp, servlets

我不知道为什么会出现 404 但我在同一个包中的另一个 servlet 工作得很好。我必须在这里遗漏一些简单的东西。如果您发现任何问题，请告诉我。我正在阅读 Murach java servlets book 并开始遇到这个问题，但我不知道我做错了什么

当我尝试通过映射 /AE 访问 AddEmailListServlet 时，我收到 404 错误。如果我尝试访问 /Emailsss 那个 servlet 加载就好了。不知道为什么？？

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<servlet>
    <servlet-name>AddEmailListServlet</servlet-name>
    <servlet-class>email.AddEmailListServlet</servlet-class>
</servlet>
<servlet>
    <servlet-name>EmailServlet</servlet-name>
    <servlet-class>email.EmailServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>AddEmailListServlet</servlet-name>
    <url-pattern>/AE</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>EmailServlet</servlet-name>
    <url-pattern>/Emailsss</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<error-page>
    <error-code>404</error-code>
    <location>/error_404.jsp</location>
</error-page>
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/error_java.jsp</location>
</error-page>
</web-app> 
```

并且 AE 映射不想对 AddEmailListServlet 起作用。这是servlet代码：

```
package email;

import business.User;
import data.UserIO;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

import java.util.Date;
import java.util.ArrayList;
import java.util.HashMap;

public class AddEmailListServlet extends HttpServlet {

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        /* TODO output your page here. You may use following sample code. */
        out.println("<!DOCTYPE html>");
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet AddToEmailListServlet</title>");            
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet AddToEmailListServlet at " + request.getContextPath() + "</h1>");
        out.println("</body>");
        out.println("</html>");
    } finally {            
        out.close();
    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
/**
 * Handles the HTTP
 * <code>GET</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    this.doPost(request, response);
    PrintWriter out = response.getWriter();
    out.println("Hello from AddEmailListServlet.java");
}

/**
 * Handles the HTTP
 * <code>POST</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    String firstName = request.getParameter("firstName");
    String lastName = request.getParameter("lastName");
    String emailAddress = request.getParameter("emailAddress");

    ServletContext sc = request.getServletContext();
    String path = sc.getRealPath("/WEB-INF/EmailList.txt");

    User user = new User(firstName, lastName, emailAddress);
    UserIO.add(user, path);

    HttpSession session = request.getSession();
    session.setAttribute("user", user);

    String url = "/ch09/dispay_email_entry.jsp";
    RequestDispatcher dispatcher = 
            request.getServletContext().getRequestDispatcher(url);
    dispatcher.forward(request, response);

    //processRequest(request, response);
}

/**
 * Returns a short description of the servlet.
 *
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:53:09.613

您的 servlet 不是 servlet。它不扩展 HttpServlet。考虑到这个错误，我什至对 webapp 的部署没有错误感到惊讶。检查日志。

当您的意图是它们覆盖超类或接口方法时，请始终使用 @Override 注释您的方法。如果你这样做了，编译器会产生一个错误，警告你该方法没有覆盖任何东西。

# mysql - 如何从命令行调用带有参数的mysql存储过程？

> ID：16157349
> 
> 赞同：51
> 
> 时间：2013-04-22T21:49:42.377
> 
> 标签：mysql, command-line, call, procedure

如何从命令行调用存储过程？

我有一个程序：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `insertEvent`(IN `dateTimeIN` DATETIME)
    NO SQL
BEGIN
    SET @eventIDOut = NULL;

    IF  EXISTS(SELECT * FROM `events` WHERE `eventDate` = dateTimeIN) THEN
        SELECT `eID` INTO @eventIDOut FROM `events` WHERE `eventDate` = dateTimeIN LIMIT 1;
        ELSE
        INSERT INTO `events` (`eventDate`) VALUES(dateTimeIN);
        SET @eventIDOut = last_insert_id();
    END IF;

    SELECT CONCAT(@eventIDOut);
END 
```

1.  **我试过这个：** `mysql> CALL insertEvent(2012.01.01 12:12:12);`

    **结果：**

    ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '.01 12:12:12)' 附近使用正确的语法

2.  **和这个：** `mysql> CALL insertEvent`

    `-> 2012.01.01 12:12:12;`

    **结果：**

    ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“2012.01.01 12:12:12”附近使用正确的语法

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-22T22:15:47.867

在日期前后加上引号：

```
mysql> CALL insertEvent('2012.01.01 12:12:12'); 
```

# javascript - 在选择之外右键单击时允许复制当前选择（与取消选择）？

> ID：16157351
> 
> 赞同：1
> 
> 时间：2013-04-22T21:49:51.367
> 
> 标签：javascript

当用户在选择之外右键单击时，如何允许用户复制当前选择？

这是一个允许用户选择 HTML 表格中的单元格[的脚本。](http://nottheoilrig.com/cellect)它将所选单元格转换为制表符分隔值并将其放入屏幕外文本区域，因此当用户在其编辑菜单中单击“复制”或按`Ctrl-C`时，他们可以将所选单元格复制并粘贴到 Google 文档或其他电子表格中。

但是我发现许多用户通过右键单击并在上下文菜单中选择“复制”来进行复制和粘贴。但是当他们选择一个表格并尝试这个时，屏幕外文本区域中的当前选择被取消选择，并且“复制”不会出现在上下文菜单中 - 至少在最近的 Firefox 和 Chrome 中没有:-(

当用户右键单击时，有什么方法可以保持当前选择被选中，因此“复制”出现在本机上下文菜单中？

我发现了一个有关 Internet Explorer 的相关问题，但在这种情况下，即使用户在选择范围*内*单击鼠标右键，也会取消选择当前选择：[Text deselected on right click in IE8](https://stackoverflow.com/questions/7329493/text-deselected-on-right-click-in-ie8)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:26:54.193

上下文菜单由浏览器管理，浏览器决定是否在其中添加复制（以及剪切和粘贴）命令。*只有*在用户选择上打开上下文菜单时才会发生这种情况。

您可以为事件添加一个侦听器`contextmenu`，您可以取消它，因此您可以创建自定义上下文菜单 - 这非常酷，但是如果没有 Flash 等一些花哨的技术的帮助，您将无法访问剪贴板。

不过，您可以使用一个（肮脏的）技巧。但`<textarea>`无论如何，诀窍都是诀窍。像这样设计它：

```
textarea {
    position: absolute;
    margin: 0;
    padding: 0;
    border: 0 none;
    opacity: 0;
} 
```

现在您可以为事件添加事件侦听器`contextmenu`：

```
var textarea = document.getElementsByTagName("TEXTAREA")[0];

document.addEventListener("contextmenu", function(e) {
    textarea.style.zIndex = 10000; // must be high enough
    textarea.style.left = e.pageX + "px";
    textarea.style.top = e.pageY + "px";
    textarea.setSelectionRange(0, textarea.value.length);
    setTimeout(function() {
        textarea.style.zIndex = -10000; // must be low enough
    }, 10);
}); 
```

您在这里要做的是将 textarea 放在光标正下方并选择其全部内容，以便光标实际上位于所选内容上。

textarea 必须位于所有其他元素之上，因此您必须将其`z-index`style 属性设置为较高的值。但是，您不希望页面上漂浮“幽灵”，这可能会阻止预期的鼠标行为，因此您在将其推到所有其他元素后面后立即（因此是`setTimeout`）。

在那里，您在上下文菜单上有一个工作副本。

我只在 Chrome 上测试过，抱歉。*我猜应该*可以在其他浏览器上工作，你只需要测试。不适用于 IE8 及更低版本（使用而不是*，*并且有完全不同的方式来选择文本 - 检查出来），绝对不能在 IE8 中工作（如果您设置事件侦听器，它总是会阻止上下文菜单出现 - 必须使用事件并检查右键单击）。`attachEvent``addEventListener``contextmenu``mousedown`

**警告**：根据用户单击的位置，文本区域可能会超出底部和右侧页面边界，从而导致出现页面滚动条。您可以尝试将 textarea 的大小调整为 1px 宽和高，并设置`overflow: hidden`.

好吧，这个答案对我自己也很有帮助。希望你会喜欢它。

**编辑**：[现场测试](http://jsfiddle.net/sfzBB/)

# jquery - JQuery：事件的顺序和遍历 DOM

> ID：16157353
> 
> 赞同：1
> 
> 时间：2013-04-22T21:50:03.250
> 
> 标签：jquery, traversal, orbit

我尝试以下方法：

一个`ul`用于链接，另一个用于幻灯片

```
<ul class="infoslider">
        <li><a data-orbit-link="slidegroup1" href="#">Slides1</a></li>
        <li><a data-orbit-link="slidegroup2" href="#">Slides2</a></li>
    </ul>

<ul id="infoslider">
    <li class=""        data-orbit-slide="slidegroup1">  <img src="img1.png" ></li>
    <li class="active"  data-orbit-slide="">             <img src="img2.png" ></li>
    <li class=""        data-orbit-slide="slidegroup2">  <img src="img3.png" ></li>
    <li class=""        data-orbit-slide="">             <img src="img4.png" ></li>
</ul> 
```

要单击“下一步”的字段

```
<a class="orbit-next" href="#">Next</a> 
```

我点击“orbit-next”来转发幻灯片。

使用 JQuery 我检查`#infoslider li data-orbit-slide`- 属性。如果它是空的，它会向上遍历，直到找到一个字符串。然后它添加相应`ul.infoslide li`的活动类。

```
$j("a.orbit-next").click(function() {

    //select the active li
    var test = $j("#infoslider > li.active");

    //test, if there is a string in "data-orbit-slide"
    if (test.attr("data-orbit-slide").length > 0) {     
        var link = test.attr("data-orbit-slide");
        } else {        
        //if not, get the elements
        var term1 = document.getElementById('infoslider');
        //and traverse up until a string is found
        var link = $j("#infoslider li.active").prevUntil(term1,"li[data-orbit-slide!='']").attr("data-orbit-slide");        
        }       

        //select the coresponding a in div.infoslider
        var target = $j("a[data-orbit-link='" + link + "']").parent();  

        //remove the classes active
        $j("div.infoslider > ul > li").removeClass("active");
        //add the active class
        target.addClass("active");
}); 
```

这几乎可以正常工作。但：

1.  ul.infoslider li 总是“落后”。即当幻灯片img3.png 出现时，活动类仍在“slidegroup1”上。直到“img4.png”出现“slidegroup2”才获得活动类。为什么？它与 JQuery/Orbit-Slider/my JQuery 执行的事件顺序有关吗？
2.  有没有更简单的方法来实现我想要的？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:04:22.987

尝试以下操作，您的代码应该可以正常工作。

```
target.next().addClass("active"); 
```

作为替代实现，您可以使用 Jquery data() 实用程序来存储活动幻灯片信息。这样可以避免遍历列表。我做了一些优化，这样就可以避免多次 DOM 遍历。

这是代码片段。

```
$(function () {
    //select the active li
    var $activeSlide = $("#infoslider > li.active");
    $("a.orbit-next").click(function () {
        if (!$activeSlide.length) { return; }
        var $nextSlide = $activeSlide.next();
        if (!$nextSlide.length) { return; }

        var slideGroup;
        //test, if there is a string in "data-orbit-slide"
        if ($nextSlide.attr("data-orbit-slide").length > 0) {
            slideGroup = $nextSlide.attr("data-orbit-slide");
            $(this).data("slideGroup", slideGroup);
        } else {
            slideGroup = $(this).data("slideGroup");
        }

        //remove the classes active
        $("ul.infoslider > li").removeClass('active');
        //select the coresponding a in div.infoslider
        $("a[data-orbit-link='" + slideGroup + "']").parent().addClass("active");
        $activeSlide.removeClass("active");
        $nextSlide.addClass("active");
        $activeSlide = $nextSlide;
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:49:21.707

结果如下：

```
//select the active li
var activeSlide = $j("#infoslider > li.active");
//populate with data, otherwise at the first click there is no data
slideStart = activeSlide.attr("data-orbit-slide");

$j("a.orbit-next").click(function () {

    //check if second-last-child, cause the slider is looping
    //2nd-child, 2nd-last, cause Orbit is cloning the first and the last slide
    if (activeSlide.is(":nth-last-child(2)") ) {
        var nextSlide = $j("#infoslider > li:nth-child(2)");
    } else {
        var nextSlide = activeSlide.next();
    }

    var slideGroup;
    //test, if there is a string in "data-orbit-slide"
    //not very elegant, but had no idea how to initiate the var slideGroup...
    if (nextSlide.attr("data-orbit-slide").length == 0 && slideStart.length > 0) {
        slideGroup = slideStart;
        slideStart = "";
    } else if(nextSlide.attr("data-orbit-slide").length > 0 && slideStart == ""){
        slideGroup = nextSlide.attr("data-orbit-slide");
        $(this).data("slideGroup", slideGroup);
    } else {
        slideGroup = $(this).data("slideGroup");
    }

    //remove the classes active
    $j("div.infoslider > ul > li").removeClass('active');
    //select the coresponding a in div.infoslider
    $j("a[data-orbit-link='" + slideGroup + "']").parent().addClass("active");
    activeSlide = nextSlide;
}); 
```

# php - 查询响应检查参考手册中的“函数名称解析和解析”部分

> ID：16157356
> 
> 赞同：9
> 
> 时间：2013-04-22T21:50:20.750
> 
> 标签：php, mysql

有人可以向我解释这有什么问题吗？

```
SELECT COUNT (`ID`) FROM `tableImSpecifying` WHERE `VisitorsEmail` = '$VarThatHoldsEmailFromA$_POSTInput' 
```

这是我在遵循教程时正在编写的程序的一部分，但我对如何解决这个问题很感兴趣。如果有人能告诉我如何解决这个问题，我将不胜感激，我提前感谢你。

这是我看到的错误：

> FUNCTION myhost_classifieds.COUNT 不存在。检查参考手册中的“函数名称解析和解析”部分

让我感到困惑的是，我在这个查询之上有类似的查询可以正常工作，并且我已经反复检查了语法，但我看不出有什么问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T21:55:25.930

这个：

> FUNCTION myhost_classifieds.COUNT 不存在。检查参考手册中的“函数名称解析和解析”部分

会提示您[阅读此内容](http://dev.mysql.com/doc/refman/5.0/en/function-resolution.html)

这导致你改变这个：

```
COUNT (`ID`) 
```

至：

```
COUNT(`ID`) 
```

（注意删除的空间）。

（您也可以摆弄[`IGNORE_SPACE`](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_ignore_space)，但我不建议新手使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T21:54:39.003

改变：

```
SELECT COUNT (`ID`) 
```

至

```
SELECT COUNT(`ID`) 
```

空间把它搞砸了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-04T04:26:10.347

简而言之，根据 Wrikken 的说法，在[SQL 手册](https://dev.mysql.com/doc/refman/5.7/en/function-resolution.html)中它说，

> 要将名称用作表达式中的函数调用，名称和后面的 ( 括号字符之间不能有空格。

所以表达式，

```
SELECT COUNT (`ID`) FROM `tableImSpecifying` WHERE `VisitorsEmail` = '$VarThatHoldsEmailFromA$_POSTInput' 
```

不起作用，因为 COUNT 和 ( ) 之间有一个空格。只需删除空格并将其更改为：

```
SELECT COUNT('ID') ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T21:54:46.093

尝试这个

```
 SELECT COUNT(`ID`) FROM `tableImSpecifying` WHERE `VisitorsEmail` = '$VarThatHoldsEmailFromA$_POSTInput'
            ^^-------remove space here 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-15T11:03:17.773

我在运行查询时也遇到了同样的问题

```
SELECT MIN (released_year) FROM books 
```

我在哪里遇到错误

```
FUNCTION records.MIN does not exist.
Check the 'Function Name Parsing and Resolution' section in the Reference Manual. 
```

但是当我删除 MIN 和 (released_year) 之间的空格时它起作用了，所以正确的是：

```
SELECT MIN(released_year) FROM books 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T21:57:37.413

MYSQL 不喜欢函数名后面的空格。尝试取出 COUNT 之后的空间。

我还认为这些变量名只是一个示例，您实际上并没有在生产中使用它们！

# python - 我对 PROJECT_PATH = os.path.abspath(os.path.dirname(__file__)) 感到困惑

> ID：16157359
> 
> 赞同：0
> 
> 时间：2013-04-22T21:50:32.177
> 
> 标签：python, python-2.7

我对这个命令有疑问，任何人都可以向我描述它！

```
PROJECT_PATH = os.path.abspath(os.path.dirname(__file__)) 
```

我想用来引用特定的文件

```
PROJECT_PATH = os.path.abspath(os.path.dirname('C://Python27//the dataset//h messages' + '/ham' 
```

和

```
'C://Python27//the dataset//s messages ' + '/spam')) 
```

不知道能不能这样用？什么是正确的方法，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:07:41.947

```
The __file__ variable contains the path to the current module. The Python documentation can explain the function of os.path.abspath() and os.path.dirname(). 
```

顺便说一句，您不需要在字符串中转义正斜杠，这里的连接完全没有意义。引用路径的正确方法是：

```
PROJECT_PATH = os.path.abspath(os.path.dirname('C:\\Python27\\the dataset\\h messages\\ham')) 
```

或者：

```
PROJECT_PATH = os.path.abspath(os.path.dirname('C:/Python27/the dataset/h messages/ham')) 
```

对垃圾邮件路径使用相同的想法。

# android - Android：onResume/onPause 和媒体播放器

> ID：16157362
> 
> 赞同：1
> 
> 时间：2013-04-22T21:50:49.633
> 
> 标签：android, scope, media-player, onresume, onpause

我有两个活动，家庭作业和更接近。我的作业中有一首歌正在播放，但是当按下按钮时，媒体播放器会暂停并打开关闭。在我的 onPause 功能中，我正在尝试暂停媒体播放器，但它不起作用，更近的活动打开并且音乐仍在播放。之前，我进行了设置，以便在活动作业的按钮侦听器中，媒体播放器暂停，但当我在 onResume 中设置它时，媒体播放器不会恢复。我认为这可能是媒体播放器的范围问题，有人可以帮我解决这个问题吗？

```
package com.cis.lab4;

import java.io.IOException;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetFileDescriptor;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Homework extends Activity {

    final MediaPlayer mediaplayer = new MediaPlayer();
    int media_length;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_homework);
        setPlayer();
        mediaplayer.start();
        Button next = (Button) findViewById(R.id.homeworkContinue);
        final Intent openCloser = new Intent(this, EndActivity.class);
        next.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                startActivity(openCloser);

            }

        });
    }

    public void onResume(Bundle savedInstanceState){
        super.onResume();
        mediaplayer.seekTo(media_length);
        mediaplayer.start();
    }

    public void onPause(Bundle savedInstanceState){
        mediaplayer.pause();
        media_length = mediaplayer.getCurrentPosition();
    }

    public void setPlayer(){
        AssetFileDescriptor afd;
        try {
            afd = getAssets().openFd("rev.mp3");
            mediaplayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
            mediaplayer.prepare();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:49:22.057

你没有正确覆盖 onPause 。

请尝试这个 onPause 代替：

```
 @Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    mediaplayer.pause();
    media_length = mediaplayer.getCurrentPosition();
} 
```

那应该可以正常工作。你应该对 onResume 做同样的事情。晚安。

# c# - 如果为空且输入数字，则验证文本框

> ID：16157365
> 
> 赞同：0
> 
> 时间：2013-04-22T21:51:24.117
> 
> 标签：c#, java

```
private void btnsave_Click(object sender, EventArgs e)
{
   if (txtfname.Text == "" )
   {
      MessageBox.Show("Please enter your First Name");
      txtfname.Focus();
   }
} 
```

我想验证一个文本框，这样一个人就不能把它留空，也不能添加数字。我是否必须编写一个“else if”语句，或者是否有任何运算符可以用来将它们全部放在同一个 if 语句中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:56:29.550

您可以使用的运算符是[`||`](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.110%29.aspx)

```
string fName = txtfname.Text;
if (string.IsNullOrWhiteSpace(fName) || fName.Any(Char.IsDigit))
{
    MessageBox.Show("Please enter your First Name without digits");
    txtfname.Select();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:53:29.373

```
private void btnsave_Click(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(txtfname.Text) ||
        txtfname.Text.Any(c => Char.IsNumber(c)) ) {
        MessageBox.Show("Please enter your First Name");
        txtfname.Focus();
    }
} 
```

# java - 每次做出错误的猜测时，我都需要让我的程序向 GUI 添加一个 .jpg。

> ID：16157366
> 
> 赞同：2
> 
> 时间：2013-04-22T21:51:40.557
> 
> 标签：java, swing, user-interface, awt, imageicon

这是我第一次在这里发帖，但是自从我开始编程以来，这个社区对我的帮助很大。基本上，我正在开发一个简单的程序，该程序有几种不同的游戏模式用于刽子手游戏。我在这个网站上做了一些研究，并通读了 API 以获得一些关于如何实现我坚持的方法的线索。程序中的所有内容都运行良好，除了每次做出错误猜测时我需要将图像添加到 GUI 的部分。我写了一个名为 wrongGuess(); 的方法。读取 .jpg 并将其分配给 JLabel，但它只会将图片添加到 GUI 一次。我对摇摆和 AWT 非常陌生，发现它们有点令人沮丧。我希望这里有人可以提供一个解决方案，这样我就可以加深我的知识基础。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class GUI {

       private static String lettersFileName;
       private static String playerType;
       private static char guess;
       private static String guessString;
       private static HangmanPlayer aiPlayer;
       private static hangmanLogic hangmanGame;
       private final JPanel hangmanPanel = new JPanel(new BorderLayout());
       private JPanel graphicsPanel = new JPanel(new GridLayout());

       //Constructor
       GUI(String playerType, String lettersFileName, hangmanLogic hangmanGame){
           GUI.playerType = playerType;
           GUI.lettersFileName = lettersFileName;
           GUI.hangmanGame = hangmanGame;   
       }

   /**
     * Private listener subclass that allows a user to initiate a guess
     * The action is specific to the type of player (i.e. systematic AI,
     * random AI, or a human player)
     */
    public void drawGUI() {
        //Constructs AI player if applicable

        if (playerType.equals("s"))

        {

           aiPlayer = new SystematicPlayer(lettersFileName); 

        }

        else if (playerType.equals("r"))

        {

           aiPlayer = new RandomPlayer(lettersFileName); 

        }

      //Constructs a hangmanFrame
      HangmanFrame hangmanFrame = new HangmanFrame(500, 500);

      //Main section
      final JPanel mainPanel = new JPanel(new GridLayout(1, 2));

      //Title section
      final JPanel titlePanel = new JPanel();
      titlePanel.setBackground(new Color(40, 40, 40));
      final JLabel title = new JLabel("Let's Hang Out...");
      title.setFont(new Font("Helvetica", Font.BOLD, 18));
      title.setHorizontalAlignment(JLabel.CENTER);
      title.setForeground(Color.WHITE);
      titlePanel.add(title);

      //Left border section
      final JPanel leftBorderPanel = new JPanel();
      leftBorderPanel.setBackground(new Color(40, 40, 40));

      //Right border section
      final JPanel rightBorderPanel = new JPanel();
      rightBorderPanel.setBackground(new Color(40, 40, 40));

      //Hangman section (left sub-section)
      //final JPanel hangmanPanel = new JPanel(new BorderLayout());
      hangmanPanel.setBackground(new Color(120, 120, 120));
      final JLabel hangmanTopCommentLabel = new JLabel("To Start Playing");
      hangmanTopCommentLabel.setFont(new Font("Helvetica", Font.BOLD, 16));
      hangmanTopCommentLabel.setHorizontalAlignment(JLabel.CENTER);
      hangmanTopCommentLabel.setForeground(Color.WHITE);
      hangmanPanel.add(hangmanTopCommentLabel, BorderLayout.NORTH);

      hangmanPanel.add(graphicsPanel);

      //Set images up for display   
      final JLabel image = new JLabel();
      hangmanPanel.add(image, BorderLayout.CENTER);

      final JLabel hangmanBottomCommentLabel = new JLabel();
      hangmanBottomCommentLabel.setFont(new Font("Helvetica", Font.BOLD, 16));
      hangmanBottomCommentLabel.setHorizontalAlignment(JLabel.CENTER);
      hangmanBottomCommentLabel.setForeground(Color.WHITE);
      hangmanPanel.add(hangmanBottomCommentLabel, BorderLayout.SOUTH);

      //Right sub-section
      final JPanel rightSubPanel = new JPanel(new GridLayout(3,1));

      //Revealed phrase section
      final JPanel phrasePanel = new JPanel(new BorderLayout());
      phrasePanel.setBackground(new Color(230, 230, 230));
      phrasePanel.setBorder(BorderFactory.createLineBorder(Color.black));
      final JLabel phraseTitleLabel = new JLabel("Revealed Phrase");
      phraseTitleLabel.setFont(new Font("Helvetica", Font.BOLD, 16));
      phraseTitleLabel.setHorizontalAlignment(JLabel.CENTER);
      phrasePanel.add(phraseTitleLabel, BorderLayout.NORTH);
      final JLabel phraseLabel = new JLabel(hangmanGame.getRevealedKeyPhrase());
      phraseLabel.setFont(new Font("Helvetica", Font.BOLD, 20));
      phraseLabel.setHorizontalAlignment(JLabel.CENTER);
      phraseLabel.setForeground(new Color(196, 0, 0));
      phrasePanel.add(phraseLabel, BorderLayout.CENTER);

      //Already guessed letters section
      final JPanel alreadyGuessedPanel = new JPanel(new BorderLayout());
      alreadyGuessedPanel.setBackground(new Color(230, 230, 230));
      alreadyGuessedPanel.setBorder(
            BorderFactory.createLineBorder(Color.black));
      final JLabel alreadyGuessedTitleLabel = new JLabel(
            "Already Guessed Letters");
      alreadyGuessedTitleLabel.setFont(new Font("Helvetica", Font.BOLD, 16));
      alreadyGuessedTitleLabel.setHorizontalAlignment(JLabel.CENTER);
      alreadyGuessedPanel.add(alreadyGuessedTitleLabel, BorderLayout.NORTH);
      final JTextArea alreadyGuessedLabel = new JTextArea("");
      alreadyGuessedLabel.setFont(new Font("Helvetica", Font.BOLD, 22));
      alreadyGuessedLabel.setBackground(new Color(230, 230, 230));
      alreadyGuessedLabel.setLineWrap(true);
      alreadyGuessedLabel.setEditable(false);
      alreadyGuessedPanel.add(alreadyGuessedLabel, BorderLayout.CENTER);

      //Guesses remaining section
      final JPanel guessesRemaining = new JPanel(new BorderLayout());
      guessesRemaining.setBackground(new Color(230, 230, 230));
      guessesRemaining.setBorder(BorderFactory.createLineBorder(Color.black));
      final JLabel guessesRemainingTitleLabel = new JLabel("Guesses Remaining");
      guessesRemainingTitleLabel.setFont(new Font("Helvetica", Font.BOLD, 16));
      guessesRemainingTitleLabel.setHorizontalAlignment(JLabel.CENTER);
      guessesRemaining.add(guessesRemainingTitleLabel, BorderLayout.NORTH);
      final JLabel guessesRemainingLabel = new JLabel(Integer.toString(
            hangmanGame.getnumberOfGuessesRemaining()));
      guessesRemainingLabel.setFont(new Font("Helvetica", Font.BOLD, 60));
      guessesRemainingLabel.setHorizontalAlignment(JLabel.CENTER);
      guessesRemaining.add(guessesRemainingLabel, BorderLayout.CENTER);

      //Guess input section
      final JPanel guessInputPanel = new JPanel(new FlowLayout());    
      guessInputPanel.setBackground(new Color(40, 40, 40));
      JButton guessButton = new JButton("Guess!");
      guessButton.setBackground(new Color(230, 230, 230));
      guessButton.setBorderPainted(false);
      guessButton.setForeground(new Color(196, 0, 0));
      final JLabel playerTypeLabel = new JLabel();
      playerTypeLabel.setFont(new Font("Helvetica", Font.BOLD, 14));
      playerTypeLabel.setHorizontalAlignment(JLabel.LEFT);
      playerTypeLabel.setForeground(Color.WHITE);
      final JTextField guessField = new JTextField(10);
      guessInputPanel.add(playerTypeLabel);

      //Nests panels
      mainPanel.add(hangmanPanel);
      rightSubPanel.add(phrasePanel);
      rightSubPanel.add(alreadyGuessedPanel);
      rightSubPanel.add(guessesRemaining);
      mainPanel.add(rightSubPanel);

      //Modifies specific components to fit the player type
      if (playerType.equalsIgnoreCase("s"))
      {
         playerTypeLabel.setText(("Systematic AI Player"));
         hangmanBottomCommentLabel.setText(("Press Guess"));
         guessInputPanel.add(guessButton);
      }
      else if (playerType.equalsIgnoreCase("r"))
      {
         playerTypeLabel.setText(("Random AI Player"));
         hangmanBottomCommentLabel.setText(("Press Guess"));
         guessInputPanel.add(guessButton);
      }
      else if (playerType.equalsIgnoreCase("h"))
      {
         playerTypeLabel.setText(("Human Player"));
         hangmanBottomCommentLabel.setText(("Enter A Guess"));
         guessInputPanel.add(guessField);
         guessInputPanel.add(guessButton);

         /**
          * Private listener subclass that selects all text
          * in the guessField when it receives a mouse click
          *
          */
         class GuessFieldMouseListener implements MouseListener
         {
            public void mousePressed(MouseEvent event)
            { 
               //Selects all text
               guessField.requestFocus();
               guessField.selectAll();

            }
            @Override
            public void mouseClicked(MouseEvent event)
            {
               // TODO Auto-generated method stub 
            }
            @Override
            public void mouseEntered(MouseEvent event)
            {
               // TODO Auto-generated method stub
            }
            @Override
            public void mouseExited(MouseEvent event)
            {
               // TODO Auto-generated method stub
            }
            @Override
            public void mouseReleased(MouseEvent event)
            {
               // TODO Auto-generated method stub  
            }
         }

         //Adds guessFieldListener to guessField
         MouseListener guessFieldListener = new GuessFieldMouseListener();
         guessField.addMouseListener(guessFieldListener);
      }

      /**
       * Private listener subclass that allows a user to initiate a guess
       * The action is specific to the type of player (i.e. systematic AI,
       * random AI, or a human player)
       */
      class GuessActionListener implements ActionListener
      {
         public void actionPerformed(ActionEvent event)
         {  
            /* 
             * Accepts a guess from a given player type and assigns guessString
             * (s - AI systematic, r - AI random, or h - human)
             * and determines if the guess is part of the key phrase
             */
               if (playerType.equals("s"))
               {
                  guess = aiPlayer.makeGuess();  

                  guessString = Character.toString(guess).toUpperCase();
               }
               else if (playerType.equals("r"))
               {
                  guess = aiPlayer.makeGuess(); 

                  guessString = Character.toString(guess).toUpperCase();
               }
               else if (playerType.equals("h"))
               {
                  guess = guessField.getText().charAt(0);

                  guessString = Character.toString(guess).toUpperCase();
               }
               //Determines if the game is already over
               if (!hangmanGame.isGameOver())
               {
                  try
                  {  
                     //Determines if the guess is part of the key phrase
                     if (hangmanGame.guessCharacter(guess))
                     {  
                        //Determines if the current guess ended the game
                        if (hangmanGame.isGameOver())
                        {
                           if (hangmanGame.getKeyPhrase().equals(
                                 hangmanGame.getRevealedKeyPhrase()))
                           {
                              //Updates comment labels
                              hangmanTopCommentLabel.setText("You Win!!!");
                              hangmanBottomCommentLabel.setText("Game Over!");
                           }
                           else
                           {
                              //Updates comment labels
                              hangmanTopCommentLabel.setText("You Lose!!!");
                              hangmanBottomCommentLabel.setText("Game Over!");
                           }
                        }
                        else
                        {
                           //Updates comment labels
                           hangmanTopCommentLabel.setText("Current Guess: " +
                                 guessString);
                           hangmanBottomCommentLabel.setText("CORRECT!");  

                           //image.setIcon( new ImageIcon("madBro.jpg") );

                        }
                     }
                     else
                     {
                        if (hangmanGame.isGameOver())
                        {
                           //Updates comment labels
                           if (hangmanGame.getKeyPhrase().equals(
                                 hangmanGame.getRevealedKeyPhrase()))
                           {
                              hangmanTopCommentLabel.setText("You Win!!!");
                              hangmanBottomCommentLabel.setText("Game Over!");
                           }
                           else
                           {
                              hangmanTopCommentLabel.setText("You Lose!!!");
                              hangmanBottomCommentLabel.setText("Game Over!");
                           }
                        }
                        else
                        {
                           //Updates comment labels
                           hangmanTopCommentLabel.setText("Current Guess: " +
                                 guessString);
                           hangmanBottomCommentLabel.setText("WRONG!");

                           //image.setIcon( new ImageIcon("realMad.jpg") );
                           wrongGuess();    

                        }
                     }

                     //Updates guessesReaminingLabel and phraseLabel
                     guessesRemainingLabel.setText(
                           Integer.toString(
                                 hangmanGame
                                 .getnumberOfGuessesRemaining()));
                     phraseLabel.setText(
                           hangmanGame.getRevealedKeyPhrase());

                     /* 
                      * Allows the alreadyGuessedLabel to be updated
                      * with a comma delimited list of the already
                      * guessed characters
                      */
                     if (alreadyGuessedLabel.getText().equals(""))
                     {
                        alreadyGuessedLabel.setText(
                              alreadyGuessedLabel.getText() + " " +
                                    guessString);
                     }
                     else
                     {
                        alreadyGuessedLabel.setText(
                              alreadyGuessedLabel.getText() +
                              ", " + guessString);
                     }
                  }
                  catch (InvalidInputException e)
                  {
                     //Updates comment labels
                     hangmanTopCommentLabel.setText("Current Guess: " +
                           guessString);
                     hangmanBottomCommentLabel.setText("Invalid Input!");

                  }
                  catch (AlreadyGuessedException e){
                     //Updates comment labels
                     hangmanTopCommentLabel.setText("Current Guess: " +
                           guessString);
                     hangmanBottomCommentLabel.setText("Already Guessed!");
                  }
               }
               else
               {
                  //Updates comment labels
                  hangmanTopCommentLabel.setText("The Game is Over!");
                  hangmanBottomCommentLabel.setText("Give It Up!");
               }
         }
      }

      //Adds guessListener to guessButton
      ActionListener guessListener = new GuessActionListener();
      guessButton.addActionListener(guessListener);

      //Adds components to the frame
      hangmanFrame.add(titlePanel, BorderLayout.NORTH);
      hangmanFrame.add(leftBorderPanel, BorderLayout.WEST);
      hangmanFrame.add(mainPanel, BorderLayout.CENTER);
      hangmanFrame.add(rightBorderPanel, BorderLayout.EAST);
      hangmanFrame.add(guessInputPanel, BorderLayout.SOUTH);

      //Makes the hangman GUI visible
      hangmanFrame.setVisible(true);
   }

    /**
     * Adds new graphic representation for each wrong guess made
     */
    private void wrongGuess()
    {
        ImageIcon broMad = createImageIcon("madBro.jpg");
        JLabel wrong = new JLabel(broMad);
        graphicsPanel.add(wrong);
    }
    /**
     * Method for creating an image icon, found in Oracle.com's knowledge base
     * @param path location of desired image file
     * @return Icon, or null if path not found
     */
    private ImageIcon createImageIcon(String path) 
    {
        java.net.URL imgURL = getClass().getResource(path);
        if (imgURL != null) {
            return new ImageIcon(imgURL);
        } else {
            JOptionPane.showMessageDialog(null,
                    "Couldn't find file: " + path);
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:57:16.127

一些建议和问题：

*   首先，您将希望摆脱变量上的所有静态修饰符。您的 Swing GUI 应该使用行为良好的面向对象代码，除了少数例外，静态变量几乎没有位置。
*   您似乎正在考虑调用`setIcon(...)`您的图像 JLabel，但已将其注释掉。为什么？当您希望交换由 JLabel 显示的图像时，这是使用的正确方法。
*   在尝试向程序添加一些新的复杂功能时，我发现通常最好先尝试使其独立工作，然后再尝试将其添加到更大更复杂的程序中。考虑创建一个*更*简单的 GUI，将几个图像读入 ImageIcons，看看您是否可以在这个更简单的程序中交换 JButton push 上的图像。如果你让它工作，那么将这个功能引入更大的程序应该是相当简单的。
*   请注意，如果您的图像不是那么大，您可以在启动时将它们全部读入程序并将它们放入 ImageIcons 中，以便在需要时进行交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:40:06.617

> ..一个刽子手游戏。

对于 Hangman，您通常会将所有图形元素绘制到一个图像中，然后您可能会在（单个）标签中显示该图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:01:04.590

我现在不在 PC 上，所以我无法运行代码，但是这个

```
 hangmanPanel.add(graphicsPanel);

  //Set images up for display   
  final JLabel image = new JLabel();
  hangmanPanel.add(image, BorderLayout.CENTER); 
```

向我扑来

基本上，您将默认情况下添加`graphicsPanel`到该位置，然后用标签覆盖它，有效地删除`hangmanPanel``CENTER``image``graphicsPanel`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T22:02:51.017

完成所有更改后，尝试在整个 JFrame 上调用 repaint()。

# c++ - 在C中以字符串格式比较2个IP地址

> ID：16157367
> 
> 赞同：0
> 
> 时间：2013-04-22T21:51:41.437
> 
> 标签：c++, networking

不知道我错过了什么。我正在尝试确定 IP 地址 172.27.12.32 是否在 IP 地址 20.0.0.0 和 255.255.252.0 的范围内

我正在做的是以下内容：

```
std::string one("200.0.0.0");
std::string two("172.27.12.32");
std::string three("255.255.255.255");

long one_addr = inet_addr(one.c_str());
long two_addr = inet_addr(two.c_str());
long three_addr = inet_addr(three.c_str()); 
```

one_addr 等于 200 two_addr 等于 537664428 three_addr 等于 4294967295

two_addr 大于 one_addr 但如果最小 IP 地址为 200.0.0.0，则 172.27.12.32 不在范围内

如何确定 172.27.12.32 是否不在 200.0.0.0 和 255.255.255.255 范围内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:58:29.093

提示：=）（[http://www.stev.org/post/2012/08/09/C++-Check-an-IP-Address-is-in-a-IPMask-range.aspx](http://www.stev.org/post/2012/08/09/C++-Check-an-IP-Address-is-in-a-IPMask-range.aspx)）

```
uint32_t IPToUInt(const std::string ip) {
    int a, b, c, d;
    uint32_t addr = 0;

    if (sscanf(ip.c_str(), "%d.%d.%d.%d", &a, &b, &c, &d) != 4)
       return 0;

    addr = a << 24;
    addr |= b << 16;
    addr |= c << 8;
    addr |= d;
    return addr;
} 
```

希望这足以回答你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:01:44.390

该[`inet_addr()`函数](http://linux.die.net/man/3/inet_addr)返回一个`in_addr_t`结构实例：

```
in_addr_t inet_addr(const char *cp); 
```

这通常是 32 位整数的 typedef，在每个架构上并不总是很长。

无论如何，请考虑将`20.0.0.0`and转换`255.255.252.0`为`in_addr_t`值。然后将这些结果与您感兴趣的值进行比较。你会期待什么？

# macos - 如何使用 Mac OS X Finder 的点击界面访问 Unix 根目录或 /usr 目录？

> ID：16157368
> 
> 赞同：5
> 
> 时间：2013-04-22T21:51:46.900
> 
> 标签：macos, unix, root

在终端应用程序窗口中，我输入 Unix 命令：

```
$cd /usr

$pwd

/usr 
```

是否可以使用 Mac OS X 的点击式界面导航到该 /usr 目录并像访问任何其他文件夹一样访问它？我的意思是，通过选择 Mac 桌面上的硬盘图标并在 Mac 文件夹层次结构中导航，直到我可以选择 Unix 将在 /usr 下显示的相同文件..？

```
$ls -F

X11/        bin/        lib/        llvm-gcc-4.2/   sbin/       standalone/
X11R6@      include/    libexec/    local/      share/ 
```

我已经查看并尝试了我能想到的所有方法，但我无法弄清楚如何做到这一点。我想这样做的原因是我认为某些 jars（如 Selenium）最合乎逻辑地放置在 /usr 的子树中，但如果我要在 /usr 树上找到这些 jars，我不知道如何在 Eclipse Project Java Build Path 中选择 jar 作为 External Jars。（回到我原来的问题。）我已将 Selenium jar 放在另一个目录中，我可以从 Eclipse 获取它们，但我不应该灵活地在 /usr 树上找到它们吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-14T15:36:41.030

1.  打开查找器
2.  在屏幕顶部单击“开始”选项
3.  选择“转到文件夹”选项。它的倒数第二个选项
4.  在弹出窗口中，写下您要访问的目录的路径

希望有帮助

或者只是在您找到查找器之后，按以下键

`command+shift+G`

# r - 如何逻辑否定运算符“！” 作品

> ID：16157372
> 
> 赞同：11
> 
> 时间：2013-04-22T21:51:57.220
> 
> 标签：r, statistics, logical-operators

我不是试图解决任何特定的问题，而是试图学习 R 并理解它的逻辑否定运算符“！” 记录在页面[http://stat.ethz.ch/R-manual/R-devel/library/base/html/Logic.html](http://stat.ethz.ch/R-manual/R-devel/library/base/html/Logic.html)

当与 = 结合使用时，它适用于我，例如：

```
1 != 2
TRUE 
```

但我不能完全理解这个运算符的独立应用程序。例如，我可以使用它来选择列表中没有特定名称的元素吗？这是我的尝试，但没有奏效：

```
vector1 <- 1:5 # just making vector of 5 numbers
vector2 <- 5:1 # same vector backwards
list <- list(Forward=vector1, Backwards=vector2) # producing list with two elements
x = "Forward"
list[!x] 
```

我的输出是：

```
Error in !x : invalid argument type 
```

在这种情况下我的逻辑出错的地方，以及除了 != case 之外，这个运算符还有什么其他好的用途，将不胜感激。

谢谢！谢尔盖

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T22:02:23.973

首先，最好不要将其`!=`视为`!`作用于`=`，而应完全视为一个单独的二元运算符。

一般来说，`!`应该只应用于布尔向量。所以这可能更像你所追求的：

```
vector1 <- 1:5 # just making vector of 5 numbers
vector2 <- 5:1 # same vector backwards
l <- list(Forward=vector1, Backwards=vector2) # producing list with two elements
x = "Forward"
l[!(names(l) %in% x)] 
```

where`names(l) %in% x`返回一个沿列表名称的布尔向量，`l`指示它们是否包含在其中`x`。最后，我避免使用`list`用作变量，因为您可以看到它也是一个相当常见的函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T22:25:27.990

我同意其他两张海报所说的一切，但想再补充一件事，我在教 R 时总是告诉我。

R 的工作原理是它从内到外评估语句，并且每个语句都需要自己运行。如果您在内部语句中已经有错误，难怪外部不会产生任何东西。

在您的情况下，可以说您有两个语句：`!x`并列出`list`通过 via访问`[`。

如果您复制 R 的行为，您会注意到`!x`已经产生错误：

```
> !x
Error in !x : invalid argument type 
```

因此，正确的解决方案试图改变这一步。

所以：**当错误发生时，一定要检查你内心深处的陈述，并向外努力。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-22T22:06:14.837

首先，我认为`!`in`!=`不是`!`运算符。它是一个 distinct`!=`运算符，意思是“不同于”。

其次，`!`运算符是逻辑运算符，即逻辑否定，它必须应用于逻辑向量：

```
R> !(c(TRUE,FALSE))
[1] FALSE  TRUE 
```

由于数字可以强制为逻辑，它也可以应用于数字向量。在这种情况下`0`，将被视为`FALSE` 和任何其他值`TRUE`：

```
R> !c(1,0,-2.5)
[1] FALSE  TRUE FALSE 
```

在您的示例中，您尝试将此逻辑运算符应用于字符串，这会引发错误。

如果您想按名称、索引或条件对列表、数据框或向量进行子集化，您应该阅读并了解 R 语言的索引部分，这在 R 手册和大多数介绍性书籍和文档中都有描述。

按名称对列表进行子集化的一种方法可能是，例如：

```
R> list[!(names(list) %in% "Forward")]
$Backwards
[1] 5 4 3 2 1 
```

# iphone - UINavigationController 子类 navigationItem 忽略 -setLeftBarButtonItem

> ID：16157373
> 
> 赞同：2
> 
> 时间：2013-04-22T21:52:07.807
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller, uinavigationitem

我目前有一个 UINavigationController 的子类，它具有以下 viewDidLoad 函数。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithTitle:@"HI" 
                                                                   style:UIBarButtonItemStylePlain
                                                                  target:self
                                                                  action:@selector(manage)];
    [self.navigationItem setLeftBarButtonItem:leftButton];

    [self.navigationBar setBackgroundImage:[[UIImage imageNamed:@"top_nav_bg.png"] stretchableImageWithLeftCapWidth:3.0 topCapHeight:0.0] forBarMetrics:UIBarMetricsDefault];

} 
```

该 UINavigationController 子类是具有以下 viewDidLoad 的 UITabBarBarController 子类中的选项卡之一。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Change some of the look of the main tab bar
    [self.tabBar setBackgroundImage:[[UIImage imageNamed:@"tab_nav_bg.png"] stretchableImageWithLeftCapWidth:2.0 topCapHeight:0.0]];
    [self.tabBar setSelectionIndicatorImage:[[UIImage imageNamed:@"tab_nav_bg_active.png"] stretchableImageWithLeftCapWidth:2.0 topCapHeight:0.0]];

    // Load the various view controllers for this view
    SBHomeViewController *homeViewController = [[SBHomeViewController alloc] init];
    [homeViewController.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"tab_home_active.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab_home.png"]];
    [homeViewController.tabBarItem setImageInsets:UIEdgeInsetsMake(5.0, 0.0, -5.0, 0.0)];

    // The navigation controller that will hold the home view
    SBMainNavigationViewController *homeNavController = [[SBMainNavigationViewController alloc] initWithRootViewController:homeViewController];

    self.viewControllers = @[homeNavController];
} 
```

一切似乎都运行良好。正在加载来自 UINavigationController viewDidLoad 的正确导航栏背景图像。但是，leftBarButtontem 根本没有设置。对于它的价值，我尝试将其设为 rightBarButtonItem，但这也不起作用。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:14:07.573

导航控制器是其他视图的容器和导航栏的宿主。但是，它绝不是导航堆栈的一部分。只有作为堆栈一部分的视图控制器才会对条形按钮项产生影响。

不要将条形按钮项设置到导航控制器导航项上，而是将其设置到根视图控制器导航项上。

# php - 如何使用增量来计算某个价格以上的东西

> ID：16157374
> 
> 赞同：2
> 
> 时间：2013-04-22T21:52:08.893
> 
> 标签：php, html, conditional

我有一个硬件问题，要求我计算超过 2 美元的汤的数量，如果有人要输入它们。我的教授暗示我应该使用递增来计算超过 2 美元的汤的数量。我的 PHP 代码如下。我对 PHP 很陌生，我的教授在给出例子、指导和做老师方面都很差。任何帮助都会很棒！

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
 <title>Cafe</title>
<style type="text/css" media="screen"> .error { color: red; } </style>
</head>

 <body>

 <?php
$monday = $_POST['monday'];
$tuesday = $_POST['tuesday'];
$wednesday = $_POST['wednesday'];
$thursday = $_POST['thursday'];
$friday = $_POST['friday'];
$monday_item = $_POST['monday_item'];
$tuesday_item = $_POST['tuesday_item'];
$wednesday_item = $_POST['wednesday_item'];
$thursday_item = $_POST['thursday_item'];
$friday_item = $_POST['friday_item'];
$m_price = $_POST['m_price'];
$t_price = $_POST['t_price'];
$w_price = $_POST['w_price'];
$th_price = $_POST['th_price'];
$f_price = $_POST['f_price'];
$total = ($m_price + $t_price + $w_price + $th_price + $f_price);

if( empty ($_POST['tuesday']))
{print '<p class="error"> You did not complete all of the required fields</p>';
$okay = FALSE;
}

if ( !is_numeric ($_POST['th_price']))
{print '<p class="error"> That is not a number </p>';
$okay = FALSE;
}

if ($_POST['m_price'] > 10)
{print '<p class="error"> That is too Much!!! </p>';
}

if($total > 10):
echo "total is greater than 10";
elseif($total == $b): // Note the combination of the words.
echo "total equals 10";
else:
echo "total is less than 10";
endif;

if ($_POST['m_price'] > 2)
{print }

print
"<table border='1'>";
print "<tr>
                    <td> $monday </td>
                    <td> $monday_item </td>
                    <td> $m_price </td>
            </tr>
            <tr>
                        <td> $tuesday </td>
                        <td> $tuesday_item </td>
                        <td> $t_price </td>
            </tr>
            <tr>
                        <td> $wednesday </td>
                        <td> $wednesday_item </td>
                        <td> $w_price </td>
            </tr>
            <tr>
                        <td> $thursday </td>
                        <td> $thursday_item</td>
                        <td> $th_price </td>
            </tr>
            <tr>
                        <td> $friday </td>
                        <td> $friday_item </td>
                        <td> $f_price </td>
            </tr>";
        print   "</table>";

    print "<p> Your total price of soups is $total </p>";

    ?>

  </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:20:16.887

*   开始创建一个编号为 0 的变量。比如 $nrsoups = 0;

*   当某一天的价格大于 2 时，将该值（变量 $nrsoups）增加 1

*   Nr 汤超过 2 美元 = $nrsoups

就像是：

```
$nrsoups = 0;
if ($_POST['m_price'] > 2) $nrsoups++;
if ($_POST['t_price'] > 2) $nrsoups++; 
```

ETC...

# ajax - 带有ajax模型绑定和验证摘要的mvc 4部分视图不起作用

> ID：16157377
> 
> 赞同：2
> 
> 时间：2013-04-22T21:52:29.000
> 
> 标签：ajax, asp.net-mvc-4, partial-views, model-binding

我有一页有 3 个部分视图。我显然需要避免身份冲突。所有三个部分视图和主页都有自己的视图模型。在主视图中，单击按钮将更新最初通过对控制器的 ajax 调用隐藏的 div 的 html，以返回部分视图（onSuccess: div.html(data) ）。在该部分视图中，我可以通过提交给控制器来更新模型。我可以看到数据正确通过。

如果我故意将必填字段留空并提交部分视图，那么它应该会返回并在验证摘要或字段中显示错误。

就像我在返回模型之前在控制器中添加它一样：

```
ModelState.AddModelError("", "There was an error submitting data to the database."); 
```

如果我不修改绑定前缀，那将有效。

如果我像以下方法一样修改绑定前缀，它将不起作用： 在控制器中：

```
public ActionResult SaveSchedHeaderSub([Bind(Prefix="SHS")]CPSchedHeaderSubViewModel theModel) 
```

在局部视图中：

```
@{ ViewData.TemplateInfo.HtmlFieldPrefix = "SHS";} 
```

是的，我拥有所有正确的 JavaScript 文件。模型状态错误在这种情况下不起作用。

任何帮助是极大的赞赏。在这种情况下，我只需要以最佳方式为字段名称添加前缀。

我是一个长期的读者，这是我的第一个问题。

提前致谢。

# haskell - 我需要一个在子节点上运行的函数

> ID：16157379
> 
> 赞同：2
> 
> 时间：2013-04-22T21:52:43.200
> 
> 标签：haskell, hxt

我正在从事我在这里从事的项目：

[我如何提前做一个块返回？](https://stackoverflow.com/questions/15441956/how-do-i-make-a-do-block-return-early)

我在函数中使用了 monad 转换器方法，看起来像这样：

```
scrapePost :: String -> IO ()                                                   
scrapePost url = liftM (fromMaybe ()) . runMaybeT $ do
  doc <- lift $ fromUrl url
  -- get a bunch of stuff from the page 
  -- send it to the db
  replies <- lift . runX $ doc >>> css ".post.reply"
  -- here is the problem
  mapM_ (parseReply url (fromJust page_id)) replies
  -- here is the problem 
```

`parseReply`是我需要的功能，但我似乎无法正确处理。

这是我启动该功能的微弱尝试：

```
parseReply :: String -> String -> XNode -> Maybe ()                                
parseReply url op_id reply = do                                                    
  reply_id <- runX $ reply ! "id"                                                     
  return () 
```

顺便说一句，我正在使用 HandsomeSoup

我将像`scrapePost`使用设置 css 规则的函数一样操作，以抓取、删除不包含所有值的回复，并将它们发送到数据库。

我想使用`mapM`，因为我希望将所有的替换为`mapM`并`liftIO`查看性能差异。

**[更新]**

所以事实证明我不需要做任何类型的杂技，我只需要一种方法将回复节点变成我在[这里](https://stackoverflow.com/a/9435726/334632)找到的根节点。

由于`parseReply`仅在`MaybeT IO ()`上下文中使用，因此其类型不需要更改并且`scrapePost`可以保持不变。

`parseReply`变成：

```
toRoot :: ArrowXml a => XmlTree -> a n XmlTree                                     
toRoot node = root [] [constA node]                                                

parseReply :: String -> String -> XmlTree -> MaybeT IO ()                          
parseReply url op_id reply = do                                                    
  let node = toRoot reply                                                        
  reply_id <-  lift . liftM (`atMay` 0) $ runX $ node >>> css "div" ! "id"
  guard (isJust reply_id)                                                        
  return () 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:28:35.030

让我们看看你的“monad runner”的类型

```
liftM (fromMaybe ()) . runMaybeT :: MaybeT IO () -> IO () 
```

所以我们需要 do 块的每一行都有 type `MaybeT IO ()`。因为`mapM_ :: (a -> m b) -> [a] -> m ()`我们需要`parseReply url (fromJust page_id)`的类型`MaybeT IO ()`不仅仅是`Maybe ()`.

幸运的是，正如人们所希望的那样，很容易注入`Maybe`纯`MaybeT IO`

```
parseReplyT :: Monad m => String -> String -> XNode -> MaybeT m ()
parseReplyT url op_id = MaybeT . return . parseReply url op_id 
```

# highcharts - 多轴图表上的多次点击事件？

> ID：16157381
> 
> 赞同：0
> 
> 时间：2013-04-22T21:52:59.020
> 
> 标签：highcharts, highstock

我有一个这样的多轴图表：[http ://www.highcharts.com/demo/combo-multi-axes](http://www.highcharts.com/demo/combo-multi-axes)

在我的特殊情况下，我只想要条形图的点击处理程序，而不是其他的。

我尝试使用

```
 series:
            cursor: 'pointer'
            point:
              events:
                click: -> 
```

但这与所有线路挂钩。

有谁知道是否可以为每条线/条/点设置不同的点击处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:53:01.290

您需要为列类型设置点击事件，而不是系列（这对所有系列类型都是通用的）。

[http://jsfiddle.net/agnHV/](http://jsfiddle.net/agnHV/)

```
plotOptions:{
            column:{
                point:{
                    events:{
                        click:function(){
                        alert('aaa');
                        }
                    }
                }
            }
        }, 
```

# grails - Grails Cache Plugin：仅使用三个参数中的两个的可缓存键

> ID：16157385
> 
> 赞同：3
> 
> 时间：2013-04-22T21:53:12.257
> 
> 标签：grails, groovy, ehcache

使用安静的 api 调用，例如

```
myserver/api/mydata?req?%7Bcode%3A%2244%22%2C%20name%3A%22sally%22%2C%20version%3A7%7D 
```

其中传入的参数是 code=44、name=sally 和 version=7，我想只使用名称和版本作为键来缓存响应——而不是代码。

我想做的是：

```
 @Cacheable(value="myCache", key="#name.concat(#version)")
 def mydata() {

 .....

 } 
```

但是#name 和#version 都解析为null。显然，该格式仅适用于方法参数，而不适用于 params.name 或 params.version。

如果我将键保留为默认值，缓存将使用所有三个参数作为键（如果我更改一个，则不使用缓存）。这会很好，除非我希望使用缓存而不考虑“代码”并基于“名称”和“版本”作为键。

我的猜测是我需要覆盖默认的 KeyGenerator，但我尝试过但失败了。关于如何做到这一点的任何建议？

或者有没有办法使用 @Cacheable 注释访问参数属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:05:20.053

Phil，最简单的解决方案是将名称和版本定义为控制器操作的参数：

```
@Cacheable(value="myCache", key="#name.concat(#version)")
def mydata(String name, String version) {
} 
```

如果不总是提供名称和版本参数，只需在方法签名中添加一个默认值：

```
@Cacheable(value="myCache", key="#name.concat(#version)")
def mydata(String name = null, String version = 0) {
} 
```

# c - 从不兼容的指针类型传递“y”的参数 x

> ID：16157387
> 
> 赞同：0
> 
> 时间：2013-04-22T21:53:26.987
> 
> 标签：c, arrays, file

这来自一个主要为我编写的程序，以便在尝试在更大的程序中使用它之前掌握 fopen 和类似语法的窍门。所以程序唯一试图完成的事情就是打开一个文件（scores.dat），读取该文件中的数据，将其分配给一个数组，然后打印该数组。

这是我有错误的代码段：

```
int scores[13][4];

FILE *score; 
score = fopen("scores.dat", "r");

fscanf("%d %d %d %d", &scores[0][0], &scores[0][1], &scores[0][2], &scores[0][3]);

printf("%d &d %d %d", scores[0][0], scores[0][1], scores[0][2], scores[0][3]);

fclose(score); 
```

编译时，我收到错误：

```
text.c: In function 'main':
text.c:15: warning: passing argument 1 of 'fscanf' from incompatible pointer type
text.c:15: warning: passing argument 2 of 'fscanf' from incompatible pointer type 
```

我将如何解决这个问题？

如果它很重要，scores.dat 看起来像这样：

```
88 77 85 91 65 72 84 96 50 76 67 89 70 80 90 99 42 65 66 72 80 82 85 83 90 89 93 
98 86 76 85 99 99 99 99 99 84 72 60 66 50 31 20 10 90 95 91 10 99 91 85 80 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:54:59.147

您缺少 的第一个参数`fscanf()`：

```
fscanf(score, "%d %d %d %d", &scores[0][0], ... etc.
       ^^^^^
       this needs to be a `FILE *`, and not `const char *`. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T21:54:54.323

你忘了提到文件：

```
fscanf(score, "%d %d %d %d", &scores[0][0], ...);
//     ^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:10:09.267

您的理解`fopen()`很好，因为您正确使用了它。但是您传递的参数`fscanf()`与它的原型不匹配。这是原型：

```
int fscanf ( FILE *, const char * , ... ); 
```

所以，你应该使用：

```
fscanf(source,"%d %d %d %d", &scores[0][0], &scores[0][1], &scores[0][2], &scores[0][3]); 
```

`fopen()`关于.It 的另一件事是包含一些在使用打开文件时出现错误`fopen()`然后退出程序时显示消息的代码，这是谨慎的做法。就像是：

```
if(source==NULL)
{
 printf("Error opening file");
 exit(1);
} 
```

# xml - XPath following-sibling 表达式似乎返回子文本而不是后续兄弟节点

> ID：16157390
> 
> 赞同：1
> 
> 时间：2013-04-22T21:53:37.397
> 
> 标签：xml, xpath

我正在尝试构建一个 xpath 表达式来评估 XML 代码，然后仅当当前段落后跟编号列表时才匹配。

这是我的 XML：

```
<para><b>Some text</b></para>
<numlist>
  <numlitem><para>List item #1</para></numlitem>
  <numlitem><para>List item #2</para></numlitem>
  <numlitem><para>List item #3</para></numlitem>
</numlitem> 
```

我使用的 xpath 表达式是：

```
para[following-sibling::*[1]=numlist] 
```

但是，这不会返回 true。如果我评估以下 xpath 表达式

```
para[following-sibling::*[1] 
```

结果是“一些文字”。然而，由于 <b> 是 <para> 的孩子，我不希望这些结果。

以下表达式返回 true

```
para[following-sibling::numlist] 
```

所以我知道它将 numlist 视为后续兄弟，但我只希望它在 <numlist> 是 <para> 之后的第一个兄弟时返回 true。

我正在使用一个 XML 软件应用程序，它根据元素的特定上下文和条件应用样式，其中 xpath 可用于确定。我试图弄清楚问题是否与软件有关（并且我需要提交错误报告），或者是否是我的 xpath 表达式的问题，我需要找出正确的表达式是什么。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:17:22.047

元素名称是在当前上下文中评估的，因此`para[numlist]`意味着“带有子`numlist`元素的 para”。同样地：

```
para[following-sibling::*[1]=numlist] 
```

表示"`para`其第一个`following-sibling::*`具有与任何子`numlist`" 元素相同的字符串值。因为 para 没有`numlist`孩子，所以这个谓词总是假的。

相等性测试适用于节点的字符串值，而不是节点身份或节点名称，因此`[element=otherelement]`几乎永远不是您想要使用的。

[如果您想了解详细信息，请阅读XPath 规范](http://www.w3.org/TR/xpath/#booleans)中有关布尔表达式的这些段落。这里重要的是：

> 如果要比较的两个对象都是节点集，那么当且仅当在第一个节点集中有一个节点并且在第二个节点集中有一个节点使得对两个节点的字符串值都为真。

您真正的意思是以下兄弟元素的*名称*是“numlist”：

```
para[name(following-sibling::*[1])='numlist'] 
```

或者：

```
para[following-sibling::*[1]/self::numlist] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:16:16.967

1）您的 xml 示例格式不正确。

2) 试试这个 xpath 表达式：

```
para/following-sibling::*[1][self::numlist] 
```

上面的表达式只是匹配节点，如果你想要一个布尔结果，你需要这个`boolean()`函数：

```
boolean(para/following-sibling::*[1][self::numlist]) 
```

# php - 当所有 tr 共享同一个类时，jquery 函数更改特定 tr 的某些 html

> ID：16157391
> 
> 赞同：0
> 
> 时间：2013-04-22T21:53:37.703
> 
> 标签：php, jquery, html

所以我有这个表有多个具有相同类的 tr，让我们称这个类“相同”现在表是动态的，这意味着我可以添加多个具有相同类的 tr。现在 tr 内部是一个 select 标记，onchange 将调用函数 type_switch，现在 type_switch 将根据所选选项在该 tr 上附加一些 html 内容，因此更改应该只发生在该特定 tr 而不是全部，现在问题是起初一切都很好，但是当我决定转移应该在 tr 内的 tr 上添加 html 内容的地方时，一切都停止了工作。有关更多信息，这里是 type_switch 的代码：

```
function type_switch(elem,act_id){
var tr = $(elem).parent('td').parent('tr');
// var tr = ".actionrow";
var appendum = "";
if(act_id!=undefined)
appendum = "&action_id="+act_id;

$(tr).children('.type-label').html("<img src='<?php echo BASE_URL;?>admin/images/ajaxloader.gif' />");
$(tr).children('.type-selection').html("<img src='<?php echo BASE_URL;?>admin/images/ajaxloader.gif' />");

$.ajax({
url: "<?php echo BASE_URL;?>somewhere.php", data: "type="+$(elem).val()+"&method=get_type_criterions"+appendum, type: "POST", dataType: "json",
success: function(d){
if(d.error==0){
$(tr).children('.type-label').html(d.label);
$(tr).children('.type-selection').html(d.cont);
$(tr).children('.type-button').html(d.btn);
}
}
});
} 
```

可以重复添加的 tr 样本：

```
<tr class="action-row">
<td valign="top">hello&nbsp;&nbsp;&nbsp;</td>
<td valign="top"><select name="crm_action[[id]]">
<option value="add">Add to Group</option>
<option value="transfer">Transfer to Group</option>
</select>
</td>
<td valign="top">Action:&nbsp;&nbsp;&nbsp;</td>
<td valign="top">
<select name="funnel_type[[id]]" class="funnel-type" onchange="type_switch(this[,id])">
<?php
$sql_tg = "some select";
$res_tg = mysql_query($sql_tg);
while($tg = mysql_fetch_object($res_tg)){
$sql_t = "some select";
$res_t = mysql_query($sql_t);
if(mysql_numrows($res_t)>0){
echo "<optgroup label=\"{$tg->label}\">";
while($t = mysql_fetch_object($res_t)){
echo "<option value=\"".$t->id."\">".$t->funnel_type_label."</option>";
}
echo "</optgroup>";
}
}
?>
</select>
</td>
<td><img src="<?php echo BASE_URL?>admin/images/action_delete.png" title="Delete" onclick="delete_row(this)" style="cursor: pointer;" /></td>
  //this is the part that i changed there should be no tr holding this 3 td but since the layout looks ugly and messy i decided to transfer it below.
      <tr class="actionrow">
  <td class="type-label" valign="top">[label]</td>
      <td class="type-selection" valign="top">[selection]</td>
  <td class="type-button" valign="top" align="right" colspan="2"></td>
  </tr>
</tr> 
```

生成的 HTML 代码：

```
 <tr class="action-row">
 <td valign="top">CRM Action:&nbsp;&nbsp;&nbsp;</td>
      <td valign="top"><select name="crm_action[]">
 <option value="add">Add to Group</option>
 <option value="transfer">Transfer to Group</option>
 </select>
 </td>
 <td valign="top">Action:&nbsp;&nbsp;&nbsp;</td>
 <td valign="top">
 <select name="funnel_type[]" class="funnel-type" onchange="type_switch(this)">
 options to determine what to display in this tr onchange
 </select>
 </td>
 <td>
 <img src="somewhere/action_delete.png" title="Delete" onclick="delete_row(this)"     style="cursor: pointer;"></td>
 </tr>
 //this part should have been inside the above tr as you can see it the php code above
 <tr class="actionrow odd">
 <td class="type-label" valign="top"></td>
 <td class="type-selection" valign="top"></td>
 <td class="type-button" valign="top" align="right" colspan="2"></td>
 </tr>
 //end              
 <tr class="action-row">
 <td valign="top">CRM Action:&nbsp;&nbsp;&nbsp;</td>
 <td valign="top">
 <select name="crm_action[]"><option value="add">Add to Group</option>
 <option value="transfer">Transfer to Group</option>
 </select>
 </td>
 <td valign="top">Action:&nbsp;&nbsp;&nbsp;</td>
 <td valign="top">
 <select name="funnel_type[]" class="funnel-type" onchange="type_switch(this)">
 another options
 </select>
 </td>
 <td>
 <img src="somewhere/action_delete.png" title="Delete" onclick="delete_row(this)"      style="cursor: pointer;">
 </td>
      </tr>
 <tr class="actionrow odd">
 <td class="type-label" valign="top"></td>
 <td class="type-selection" valign="top"></td>
 <td class="type-button" valign="top" align="right" colspan="2"></td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:37:38.007

这是您可能需要的快速示例：

```
$('.select').change(function(){
    $(this).parent().append(*your html here*)
}); 
```

这会将信息附加到 tr 中，而不是选择框。

我相信这就是您要问的，如果不是，我将更改对您评论的回答。

编辑 OP 请求：为了能够更改 tr 内的特定元素，您可以将这些特定类与 .children()、.find() 和 .closest() 一起使用。这是一个例子：

```
$('.funnel-type').change(function(){
    var thisTr = $(this).parent().parent();
    thisTr.children('.type-label').html("something here");
    thisTr.children('.type-selection').html("something here");
    thisTr.children('.type-button').html("something here");
}) 
```

基本上，我制作了一个变量，以便更容易使用选择框的父 TR (thisTr)。然后，如果每个都是主 tr 的孩子，我们只需通过它自己的类指定每个，然后对它们做任何我们想做的事情。

# regex - django 尝试了这些 url 模式

> ID：16157393
> 
> 赞同：4
> 
> 时间：2013-04-22T21:53:53.867
> 
> 标签：regex, django, url, admin

当我尝试访问我的站点时，它给了我以下信息： 使用 mysite.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式： ^admin/ 当前 URL 与其中任何一个都不匹配。

如果我访问该站点并附加 /admin，它会将我带到管理页面。如果我注释掉启用管理员的行，它可以正常工作。我如何获得两者？urlpatterns 中的第一个模式是''，所以我不明白为什么当我启用管理员时会搞砸。（注意：我只是在做教程。）

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Examples:
#url(r'^$', 'mysite.views.home', name='home'),
# url(r'^x/', include('mysite.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T22:41:44.680

这是一个常见的问题。

当根本没有定义 urlpattern 时，Django 会给你“它成功了！恭喜你的第一个 Django 驱动的页面”消息，但是一旦你定义了任何 urlpattern 就会消失。

您收到该错误是因为您没有为根 url 定义一个 urlpattern，只为“/admin”定义了一个。继续学习本教程，直到它教您如何添加自己的 urlpatters。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:03:19.833

尝试将您的默认模式替换为：

```
url(r'^$', 'foo'), 
```

代替：

```
url(r'', 'foo'), 
```

您的教程可能已过时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T00:20:23.520

输入：localhost/admin 并使用

```
 from django.contrib import admin
 admin.autodiscover()} 
```

在你的 url.py

# c++ - 拆分子图像是openCV中的错误

> ID：16157395
> 
> 赞同：0
> 
> 时间：2013-04-22T21:53:59.143
> 
> 标签：c++, opencv

我有一张由多行组成的泰文文本图像。我想将图像拆分为单独的文本行，并且可以检查行数。问题是当我拆分子图像时会产生错误。

**我的代码**

```
vector<int> point;
//Function Check Line
int checkLine(cv::Mat imgSrc){

    int temp=-1;
    int line=0;
    int CountI[32767], CountJ[32767];
    int countRange=0;
    int maxBlack = INT_MIN;

    point.clear();

    for(int y=0;y<imgSrc.size().height;y++)
     {
        for(int x=0;x<imgSrc.size().width;x++)
        {
            if(imgSrc.at<uchar>(y,x)==0){
                //cout<<y<<":";
                if(y-temp>1){
                    point.push_back(temp);
                    point.push_back(y);
                }
                temp=y;
                break;
            }
        }
    }

    point.push_back(temp);
    point.erase(point.begin(), point.begin()+1);

    for(vector<int>::size_type i = 0; i<point.size(); i++){
        CountI[i]=point[i];
    }

    for(vector<int>::size_type j = 0; j<point.size()-1; j+=2){
        CountJ[countRange++]=point[j+1]-point[j];
    }

    for(int i=0;i<countRange;i++){
        if(CountJ[i]>maxBlack) maxBlack=CountJ[i];
    }

    for(int i=0;i<countRange;i++){
        if(CountJ[i]>(maxBlack*0.5)) line++;
    }

    return line;
}

//Function Line Rect 
vector<cv::Mat> lineRect(cv::Mat imgSrc, vector<int> startPoint, vector<int> stopPoint)     {
    vector <cv::Mat> img_split;
    img_split.clear();
    for(vector<int>::size_type k = 0; k<startPoint.size(); k++){
        img_split.push_back(imgSrc(cv::Rect(0,startPoint[k],     imgSrc.cols,stopPoint[k]-startPoint[k])));
    }

    return img_split;
}    

int main()
{
    const string path = "D:\\\exam.jpg";
    cv::Mat img_src = imread(path,0);
    vector<cv::Mat> img_split;
    cv::Mat img_tmp;
    vector<int> startPoint;
    vector<int> stopPoint;
    vector<int> PBlackFont;
    vector<int> PBlackBack;
    vector<int> pointW;
    int line=-1;
    int check=-1;

    line = checkLine(img_src);
    int textLine = line;
    for(int k=0;k<textLine;k++){
        cout<<line<<endl;
        if(check==1){
              img_tmp = imread("D:\\buff\\tmp1.jpg",1);
        }
        else if(check==2){

            img_tmp = imread("D:\\buff\\tmp2.jpg", 1);
        }
        else if(check==-1){
            img_tmp = img_src;
        }

        if(line>1){
            PBlackFont.clear();
            PBlackBack.clear();
            pointW.clear();
            for(int i = 1; i<point.size()-1; i+=2){
                pointW.push_back((point[i+1]-1)-(point[i]+1));
                PBlackFont.push_back(point[i+1]-1);
                PBlackBack.push_back(point[i]+1);
            }

            int max=INT_MIN, index=-1;
            for(int j = 0; j<pointW.size(); j++){
                if(pointW[j]>max) {
                    max=pointW[j];
                    index=j;
                }
            }

            startPoint.clear();
            stopPoint.clear();
            startPoint.push_back(point[0]);
            startPoint.push_back(PBlackFont[index]);
            stopPoint.push_back(PBlackBack[index]);
            stopPoint.push_back(point[point.size()-1]);

            img_split.clear();
            img_split = lineRect(img_tmp, startPoint, stopPoint);
            if(img_split[0].size().height>img_split[1].size().height){
                char buff[3];
                std::string nameindex = itoa(1, buff, 10);
                std::string name = "crop "+nameindex;
                cv::imshow(name, img_split[1]);
                cv::imwrite("D:\\Buff\\tmp1.jpg", img_split[0]);
                img_tmp = imread("D:\\Buff\\tmp1.jpg", 1);
                cv::imshow("Crop1", img_tmp);
                line = checkLine(img_tmp);
                check=1;
            }
            else {
                char buff[3];
                std::string nameindex = itoa(2, buff, 10);
                std::string name = "crop "+nameindex;
                cv::imshow(name, img_split[0]);
                cv::imwrite("D:\\Buff\\tmp2.jpg", img_split[1]);
                Mat img_tmp = imread("D:\\Buff\\tmp2.jpg", 1);
                cv::imshow("Crop2", img_tmp);
                line = checkLine(img_tmp);
                check=2;
            }
        }  
        else {
            startPoint.push_back(point[0]);
            stopPoint.push_back(point[point.size()-1]);

            char buff[3];
            std::string nameindex = itoa(3, buff, 10);
            std::string name = "crop "+nameindex;
            cv::Mat img_t = img_split[0];
            img_split = lineRect(img_t, startPoint, stopPoint);
            cv::imshow(name, img_split[0]);
        }
    } 
```

**错误**

`Unhandled exception at 0x74dd969b in test.exe: Microsoft C++ exception: cv::Exception at memory location 0x0014ed88..`

和

**在控制台中**

`OpenCV Error: Assertion failed (0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows) in unknown function,file ..\..\..\src\opencv\modules\core\src\matrix.cpp, line 323`

# amazon-s3 - 按用户和 IP 配置 S3 存储桶访问

> ID：16157396
> 
> 赞同：1
> 
> 时间：2013-04-22T21:54:01.633
> 
> 标签：amazon-s3

感谢[Amazon S3：从 IP 授予匿名访问（通过存储桶策略）](https://stackoverflow.com/questions/16141362/amazon-s3-grant-anonymous-access-from-ip-via-bucket-policy)我能够允许匿名上传到我的存储桶。但只是为了弄清楚，我没有上传文件的访问权限。我可以删除它们，但不能打开它们或更改任何安全设置。显然这不是我想要的！

我的用例如下：

有一些像我这样的用户，应该可以从任何机器访问存储桶。这些用户将使用他们的访问密钥。并且在一些众所周知的机器上有一些脚本（即 EC2 实例的 IP 号），它们应该能够访问存储桶而无需向它们部署凭据。他们应该通过他们的 IP 号码被授予访问权限。

在这种情况下如何配置 S3 安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T20:16:07.057

亚马逊现在有这个用例的解决方案。详细信息可以在这里找到：http: [//docs.aws.amazon.com/IAM/latest/UserGuide/role-usecase-ec2app.html](http://docs.aws.amazon.com/IAM/latest/UserGuide/role-usecase-ec2app.html)

# ruby-on-rails - 在会话中存储登录前的最后一个网站 URL

> ID：16157398
> 
> 赞同：0
> 
> 时间：2013-04-22T21:54:18.817
> 
> 标签：ruby-on-rails, devise

我想将用户重定向到他登录之前访问的最后一个 URL。

我怎么做？

我尝试了什么：

在我的应用程序控制器中添加了 before_filter：

```
before_filter :store_location

def store_location
    session[:user_return_to] = request.fullpath
end 
```

但后来我也有这个：

```
 def after_sign_in_path_for(resource)
    me_path
  end 
```

我很难理解这些是如何协同工作的。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:14:34.290

在 Devise Wiki 上查看这篇文章：

*   [操作方法：登录、注销、注册、更新后重定向回当前页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update)

在你的情况下，我认为这样定义`after_sign_in_path_for`会很好：

```
def after_sign_in_path_for(resource)
  session[:user_return_to] || me_path
end 
```

此外，像这样过滤`/users`路径更安全：

```
def store_location
  session[:user_return_to] = request.fullpath || unless request.fullpath =~ /\/users/
end 
```

因为此方法也会在用户退出时触发，在这种情况下，您显然不想将它们重定向回 /users 页面。

# prolog - prolog中的斐波那契实现

> ID：16157417
> 
> 赞同：0
> 
> 时间：2013-04-22T21:55:52.090
> 
> 标签：prolog, fibonacci

我正在尝试自己实现斐波那契数列。这就是我所拥有的：

```
fibo2(N, F) :-
    fibo2(0, 1, 0, N, F).

fibo2(N-F, F, N-1, N, F).

fibo2(P, S, C, N, F) :-
    C < N,
    T is S,
    S1 is P + S,
    C1 is C + 1,
    fibo2(T, S1, C1, N, F). 
```

我知道还有其他实现，但我不知道为什么这不起作用。当我进行跟踪时，`fibo2(3, 2)`我认为这个调用应该是真的：

```
fibo2(1, 2, 2, 3, 2) ? creep 
```

但它返回错误...一些帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:42:14.630

首先，这`T is S`条线毫无用处。当您不需要执行算术运算时，更喜欢使用标准统一与`(=)/2`. 在这里，您可以直接调用`fibo2(S, S1, C1, N, F)`.

然后，您的递归没有基本情况。will的第一个子句在`fibo2/5`这里永远不成立。

你的意思当然是：

```
fibo2(P, S, C, N, F) :-
    P is N - F,
    S is F,
    C is N - 1. 
```

这里将执行算术（在头部进行统一时，不执行算术，操作完全是象征性的）。

我不确定你的`N`和`F`代表什么，所以我不会进一步评论你的代码，但这应该已经解决了一些问题。

# python - 为什么我在两台具有相同规格的不同机器上运行相同的程序得到不同的输出

> ID：16157425
> 
> 赞同：0
> 
> 时间：2013-04-22T21:56:33.877
> 
> 标签：python, centos, biopython, blast

我有一个使用 bio-python 和 blast 的 python 程序，它接受命令行。我在 Centos 5.3 final 上运行这个程序。问题是我在两台不同的机器上拥有这个，我知道相同的应用程序和相同的操作系统，但是在其中一个运行命令后，我得到类似“a.data”的输出文件，这是不正确的并且在另一个我得到三个文件作为“a.data.bak”、“a.data.dat”和“a.data.dir”，这是正确的输出。

您是否知道这里发生了什么以及为什么我从同一台机器上的相同代码中得到不同的输出。

# python - 在python中捕获字符串的选定部分

> ID：16157426
> 
> 赞同：0
> 
> 时间：2013-04-22T21:56:36.563
> 
> 标签：python

我有一个变量字段，其中存储了一个字符串，如下所示：

```
Field= "In Field 'fieldname':(Value1) from (DC) to (deleted)" 
```

或者也可以是：

```
 Field= "In Field 'fieldname':(Value1) has changed from (DC) to (1)" 
```

从存储在变量字段中的这个字符串中，我想在两个不同的变量中捕获值 (DC) 和 (deleted) 或 (DC) 到 (1)，例如：

```
OldValue=DC
NewValue=deleted

OldValue=DC
NewValue=1 
```

我在 Python 中处理这些变量，如下所示：

```
 OldValue,NewValue=re.findall(r'\((\d+)\)',Field) 
```

但这仅捕获数字而不是字符串？谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:02:48.243

您可以将现有更改`re`为：

```
>>> re.search(r'from \((.*?)\) to \((.*?)\)$', Field).groups()
('DC', 'deleted') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:04:51.667

`\d`在正则表达式中仅匹配数字。为了匹配字母（`\w`）和数字（`\d`），最好的解决方案是两者的字符类（`[\d\w]`）。

注意：这也会`(Value1)`在你的字符串中捕获。您需要一些代码来过滤掉它；或者，只需修改元组：

```
ValueName, OldValue, NewValue = tuple(re.findall(r'\(([\d\w]+?)\)', Field)) 
```

笔记：

1.  修饰符匹配 s的`+?`最小可能非零数`[\d\w]`（与 s 不同`+`，它匹配最大可能数）。
2.  有`tuple()`必要将返回的列表转换为`re.findall`左侧可以理解的元组。

# c# - 从 Dotnet Google API 获取用户电子邮件信息

> ID：16157435
> 
> 赞同：3
> 
> 时间：2013-04-22T21:57:31.240
> 
> 标签：c#, .net, google-drive-api, gdata

我正在为 gData 和 Drive C# API 使用两个单独的 Oauth2 实现，分别将令牌信息存储在 OAuth2Parameters 和 AuthorizationState 中。我能够刷新令牌并将它们用于必要的 API 调用。我正在寻找一种方法来使用它来获取用户的信息，主要是电子邮件地址或域。

[我尝试按照Retrieve OAuth 2.0 Credentials](https://developers.google.com/drive/credentials?hl=en)的演示进行操作，但我在[此处](https://stackoverflow.com/questions/11994101/c-sharp-desktop-application-simple-example-how-to-upload-a-file-to-google-drive#comment22257204_11994650)遇到类似于 rapsalands 问题的编译错误，说

```
can't convert from
'Google.Apis.Authentication.OAuth2.OAuth2Authenticator<
Google.Apis.Authenticatio‌​n.OAuth2.DotNetOpenAuth.NativeApplicationClient>'
to 'Google.Apis.Services.BaseClientService.Initializer'. 
```

我刚刚获取了最新版本的[Oauth2 api dll](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_OAuth2_API)，所以我不认为就是这样。

我看到的所有其他[代码](https://stackoverflow.com/questions/15471658/get-user-info-from-token-c-sharp) [示例](https://stackoverflow.com/questions/7130648/get-user-info-via-google-api)都提到了使用 UserInfo API，但我找不到任何类型的 C#/dotnet api 可以在不直接执行 GET/POST 请求的情况下使用它。

有没有办法使用我已经拥有的一个 C# api 的令牌来获取此信息，而无需发出新的 HTTP 请求？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T11:28:09.473

您需要使用`Oauth2Service`来检索有关用户的信息。

```
Oauth2Service userInfoService = new Oauth2Service(credentials);
Userinfo userInfo = userInfoService.Userinfo.Get().Fetch(); 
```

`Oauth2Service`在以下库中可用：[https ://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_OAuth2_API](https://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_OAuth2_API)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-28T10:41:21.740

对于上面@user990635 的问题。虽然这个问题有点过时，但以下内容可能会对某人有所帮助。代码使用 Google.Apis.Auth.OAuth2 版本

```
 var credentials =
                    await GoogleWebAuthorizationBroker.AuthorizeAsync(
                            new ClientSecrets {ClientId = clientID, ClientSecret = clientSecret},
                            new[] {"openid", "email"}, "user", CancellationToken.None);
                if (credentials != null)
                {
                    var oauthSerivce =
                        new Oauth2Service(new BaseClientService.Initializer {HttpClientInitializer = credentials});
                    UserInfo = await oauthSerivce.Userinfo.Get().ExecuteAsync();
                } 
```

# c# - 无法在按钮单击 MVC、C# 上获取选定的 Gridrow 值

> ID：16157439
> 
> 赞同：2
> 
> 时间：2013-04-22T21:57:39.757
> 
> 标签：c#, asp.net, gridview

我试图在单击它或单击按钮时获取特定gridview行中的值。问题是当我单击该行时没有任何反应，即使我单击按钮也没有。这些行是不可点击的。任何帮助

这是我的 ASPx 页面代码。

```
 <%@ Page Language="C#"Inherits="System.Web.Mvc.ViewPage<MvcApplication3.Models.Order>" %> 
```

```
 protected void Page_Load(object sender, EventArgs e)
 {
    GridView1.DataSource = ViewData["list"];
    GridView1.DataBind();
 }

 protected void Button1_Click(object sender, EventArgs e)
 {

    CheckBox x;
    foreach (DataGridItem di in GridView1.Rows)
    {
        x = (CheckBox)di.FindControl("checkBox1");
        if (x.Checked == true)
        {
            Label5.Text = GridView1.SelectedRow.Cells[2].Text;
        }
    }
 }

 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
 {
    Label5.Text = string.Format("YOu selected row{0} with {1} {2}",
                               GridView1.SelectedIndex + 1,
                               GridView1.SelectedRow.Cells[0].Text,
                               GridView1.SelectedRow.Cells[1].Text);
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
 {
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("ondblclick", "__doPostBack('GridView1','Select$" +      e.Row.RowIndex + "');");
     } 
 }
</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
  <title>Index</title>
</head>
<body>
  <form id="form1" runat="server">
 <div>

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        onrowdatabound="GridView1_RowDataBound">
        <Columns>
            <asp:TemplateField HeaderText="Tillverkning" InsertVisible="False">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%#    Bind("TillverkningsOrder") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Datum" InsertVisible="False">
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("OrderDatum")     %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Antal" InsertVisible="False">
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("Status") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Kundnamn" InsertVisible="False">
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("KundNamn")           %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:CommandField ShowSelectButton="True" />
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:CheckBox ID="CheckBox1" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>

    <br />
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />

    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

    <asp:Label ID="Label5" runat="server" Text="Label"></asp:Label>

 </div>
 </form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T13:59:24.083

丽娜，

虽然我没有你的问题的答案，但我发现了一个数据一致性问题。

当您滚动复选框时，您每次都在输入 Label5.Text。因此滚动是没有意义的，因为 Label5 只会显示它发现已被勾选的最后一个 Checkbox 的值。

我可以建议以下替代方案：

```
 CheckBox x;
        foreach (DataGridItem di in GridView1.Rows)
        {
            x = (CheckBox)di.FindControl("checkBox1");
            if (x.Checked == true)
            {
                if(Label5.Text == "")
                {Label5.Text = GridView1.SelectedRow.Cells[2].Text;} 
                else {Label5.Text = Label5.Text + " - " +  GridView1.SelectedRow.Cells[2].Text;}
            }
        } 
```

如果选择了更多 1 个复选框，这至少会将数据附加到用“ - ”分隔的字符串上。随意根据需要更改分隔符。

# subclipse - Subclipse 无法识别我的 JavaHL

> ID：16157441
> 
> 赞同：0
> 
> 时间：2013-04-22T21:57:53.687
> 
> 标签：subclipse, eclipse-juno, ubuntu-12.10, javahl

我不断收到以下错误：

```
Failed to load JavaHL Library.
These are the errors that were encountered:
no libsvnjavahl-1 in java.library.path
no svnjavahl-1 in java.library.path
no svnjavahl in java.library.path
java.library.path = "/usr/lib/x86_64-linux-gnu/jni" 
```

虽然库路径是正确的：

```
user@localhost /usr/lib/x86_64-linux-gnu/jni $ ls -l
total 336
lrwxrwxrwx 1 root root     24 Apr  6 02:06 libatk-wrapper.so -> libatk-wrapper.so.0.0.18
lrwxrwxrwx 1 root root     24 Apr  6 02:06 libatk-wrapper.so.0 -> libatk-wrapper.so.0.0.18
-rw-r--r-- 1 root root  85168 Sep 20  2012 libatk-wrapper.so.0.0.18
lrwxrwxrwx 1 root root     23 Sep 28  2012 libsvnjavahl-1.so -> libsvnjavahl-1.so.0.0.0
lrwxrwxrwx 1 root root     23 Sep 28  2012 libsvnjavahl-1.so.0 -> libsvnjavahl-1.so.0.0.0
-rw-r--r-- 1 root root 256104 Sep 28  2012 libsvnjavahl-1.so.0.0.0 
```

以上是`apt-get install libsvn-java`在 ubuntu 12.10 上安装的。[基本上这个包在这里](http://packages.ubuntu.com/quantal/amd64/libsvn-java/filelist)。

安装的svn版本是1.7.5。

subclipse 的安装版本是 1.8.19。

我知道 subclipse 1.8.x 工作所需的 svn 版本是 1.7.x。

如何让 subclipse 识别我安装的 JavaHL 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:11:08.240

好吧我找到了...

问题出在我的`eclipse.ini`文件中，如下所示：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120913-144807
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-Xms40m
-Xmx512m
-vmargs
-Djava.library.path="/usr/lib/x86_64-linux-gnu/jni" 
```

我不得不删除多余的引号：`-Djava.library.path="/usr/lib/x86_64-linux-gnu/jni"`to `-Djava.library.path=/usr/lib/x86_64-linux-gnu/jni`.

那解决了它。

# coronasdk - Corona SDK 触摸阶段 - 触摸并按住

> ID：16157448
> 
> 赞同：1
> 
> 时间：2013-04-22T21:58:24.977
> 
> 标签：coronasdk

我正在尝试在 Corona 中制作一个游戏，如果我点击并按住屏幕，滚轮会旋转，但只有当我继续点击屏幕时它才会旋转我如何更改它，这样只要我的手指按下屏幕，轮子会转动吗？这是我的代码：

```
local physics = require "physics"
physics.start()

--Variables 

--[bike = display.newImage("bike.png")
--bike.x = 70
--bike.y = 290
--physics.addBody(bike, {friction = 0.3, bounce = 0.2})

wheel1 = display.newImage("wheel.png")
wheel1.x = 480 / 2
wheel1.y = 320 / 2

wheel2 = display.newImage("wheel.png")
wheel2.x = 480 / 2 + 50
wheel2.y = 320 / 2 - 50

driveBtn = display.newImage("drive.png")

local function driveFunction( event )

    wheel1.rotation = wheel1.rotation + 3
    wheel2.rotation = wheel2.rotation + 3

end

Runtime:addEventListener("touch", driveFunction) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:10:48.823

这是一个非常简单的解决方案。顺便说一句，你从小就开始开发很好，继续编码^^如果你不明白下面的代码或背后的逻辑，只需发表评论并询问。

```
local physics = require "physics"
physics.start()

--Variables 

--[bike = display.newImage("bike.png")
--bike.x = 70
--bike.y = 290
--physics.addBody(bike, {friction = 0.3, bounce = 0.2})

local wheel1 = display.newImage("wheel.png")
wheel1.x = 480 / 2
wheel1.y = 320 / 2

local wheel2 = display.newImage("wheel.png")
wheel2.x = 480 / 2 + 50
wheel2.y = 320 / 2 - 50

local driveBtn = display.newImage("drive.png")

local function rotateWheel()
      wheel1.rotation = ( wheel1.rotation + 3 ) % 360
      wheel2.rotation = ( wheel2.rotation + 3 ) % 360
end

local function driveFunction( event )
     if event.phase == "began" then
          display.getCurrentStage():setFocus( wheel1 )
          wheel1.isFocus = true
          Runtime:addEventListener( "enterFrame", rotateWheel )
     elseif wheel1.isFocus then              
          if event.phase == "moved" then
          elseif event.phase == "ended" then
               Runtime:removeEventListener( "enterFrame", rotateWheel )
               display.getCurrentStage():setFocus( nil )
               wheel1.isFocus = false
          end
     end
end

Runtime:addEventListener( "touch", driveFunction ) 
```

# python - C 语言中的 Python union()、difference() 方法

> ID：16157452
> 
> 赞同：0
> 
> 时间：2013-04-22T21:58:42.807
> 
> 标签：python, c, methods

C 标准库中是否有与 Python 中的 union() 或 difference() 方法相同的方法？我用谷歌搜索了一些，但一无所获。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:04:13.447

C 标准库不实现集合运算符（如响应[此先前 SO 问题](https://stackoverflow.com/questions/13179605/is-there-an-equivalent-in-c-of-pythons-set?rq=1)所述）。 [这个先前的 SO 问题](https://stackoverflow.com/questions/4309669/need-c-library-that-implements-set-operations)建议`pblset`作为替代方案，我敢肯定还有其他问题，但这不是您问题的直接答案（直接答案是“否”）。 [这个 SO question](https://stackoverflow.com/questions/3252667/how-to-calculate-difference-between-two-sets-in-c?rq=1)使用哈希表解决数组比较问题。同样，对[这个 SO 问题](https://stackoverflow.com/questions/2406097/efficient-algorithm-to-find-a-maximum-common-subset-of-two-sets?rq=1)的回答解释了如何使用哈希实现交集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:08:32.167

查看基于 C 的库中的[哈希表。](http://en.wikipedia.org/wiki/Hash_table)[`klib`](https://github.com/attractivechaos/klib)您可以考虑如何使用哈希表的键来模拟一组元素，以及在为每个集合构建哈希表后如何实现集合操作。

# maps - 使用诺基亚地图图像 API 显示门牌号

> ID：16157453
> 
> 赞同：0
> 
> 时间：2013-04-22T21:58:53.077
> 
> 标签：maps, here-api

使用诺基亚地图图像 API（用于静态地图的 API）时，是否可以显示门牌号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:55:38.167

目前，图像中门牌号的显示仅限于 Map Image API 的企业版 - 这将在缩放级别为 18 或更高时显示。

![门牌号码](https://i.stack.imgur.com/TvtS8.jpg)

[要获得企业访问权限，请单击计划](http://developer.here.com/plans)页面底部的“联系我们” 。目前正在考虑将门牌号码添加到免费公共服务中，但目前尚不可用。

同时，最好的选择是使用**i**参数，例如`http://m.nok.it/?c=52.4998375,13.3924&nord&i&z=18`- 这将对图像中心的地址进行地理编码。

![地址](https://i.stack.imgur.com/PcHtH.jpg)

# dns - 创建指向另一个名称服务器的名称服务器......它会慢吗？

> ID：16157456
> 
> 赞同：0
> 
> 时间：2013-04-22T21:59:21.623
> 
> 标签：dns, nameservers

我正在 Microsoft Azure 上创建一个项目。我们只得到一个名称服务器而不是一个 IP 地址。由于我有多个指向 Azure 的域，我想将我的所有域重定向到重定向到 Azure 的名称服务器。这样，如果 Azure 更改我的名称服务器，我只需更改一个名称服务器，而不是为我的所有域更改它。

但是，创建指向另一个名称服务器的名称服务器是一种不好的做法。解析IP地址会慢吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:37:59.310

我猜你的意思是让`NS`记录指向`CNAME`记录？

[这不被允许。](https://www.rfc-editor.org/rfc/rfc2181#section-10.3)但是，它通常有效。一直不鼓励这样做，但最初的 DNS 规范从未完全清楚地说明这一点。

RFC 2181 澄清了它是不允许的，RFC 1912 也是相关的。[这个 ServerFault 问题](https://serverfault.com/questions/222641/in-dns-can-an-in-ns-point-to-a-cname)包含更多细节，是我找到这两个 RFC 的参考的地方。

尽管如此，它“通常”有效（但我不建议这样做）。在回答您的问题时，是的，它会稍微慢一些（必须解析一个额外的名称）但并不显着，并且解析器无论如何都会在第一次之后缓存所有内容。

# javascript - 如何使用jquery打开选择元素

> ID：16157459
> 
> 赞同：9
> 
> 时间：2013-04-22T21:59:30.010
> 
> 标签：javascript, jquery

我有一个选择元素如下。我想打开它而无需用户单击它。

```
 <select id="selId" class="pos_fixed">
       <option value="volvo">Option1</option>
       <option value="saab">Option2</option>
       <option value="mercedes">Option3</option>
       <option value="audi">Option4</option>
    </select> 
```

请让我知道是否可以使用 jquery 或 javascript

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T22:14:52.697

您将传递一个 CSS 选择器`openSelect()`，它会为您打开`select`元素。

```
var openSelect = function(selector){
     var element = $(selector)[0], worked = false;
    if (document.createEvent) { // all browsers
        var e = document.createEvent("MouseEvents");
        e.initMouseEvent("mousedown", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        worked = element.dispatchEvent(e);
    } else if (element.fireEvent) { // ie
        worked = element.fireEvent("onmousedown");
    }
    if (!worked) { // unknown browser / error
        alert("It didn't worked in your browser.");
    }   
}

$(function(){ // when DOM is ready
   // open .select element
   openSelect('.select'); 
}); 
```

这是一个小提琴：http: [//jsfiddle.net/Z48wF/1/](http://jsfiddle.net/Z48wF/1/)

资料来源：[如何使用 jquery](https://stackoverflow.com/questions/10453393/how-to-open-the-select-input-using-jquery) @stackoverflow.com打开选择输入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:17:52.580

你可以在这里找到一个类似的问题：[How can you programmatically tell an HTML SELECT to drop down（例如，由于鼠标悬停）？](https://stackoverflow.com/questions/249192/how-can-you-programmatically-tell-an-html-select-to-drop-down-for-example-due)

我不认为有一个单一的解决方案可以在每个浏览器中运行。

我可以确认使用`document.createEvent()`and `.dispatchEvent()`（如上述链接所述）在 WebKit 浏览器（Safari、Chrome）中效果很好，但在 Firefox、Opera 和 IE 中效果不佳。

但是，您可以尝试组合此处列出的不同解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T19:16:20.507

我这里有这个问题的完整解决方案[是否可以使用 JS 打开一个 HTML 选择以显示其选项列表？](https://stackoverflow.com/questions/430237/is-it-possible-to-use-js-to-open-an-html-select-to-show-its-option-list/21298295#21298295). 在此方案中，选择可以正确、轻松地打开，具有所有功能并保留页面布局。该解决方案安全、简单且与 Internet Explorer、FireFox 和 Chrome 兼容。

谢谢！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-11-03T12:31:46.707

您可以使用以下脚本

```
<script>
    function(){
        selectbox = $(select-selector)[0]
        selectbox.size = selectbox.options.length;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-22T22:05:54.373

```
$(document).ready(function(){  
  $('#selId').on('click',function(){
     //do stuff here
  });
  $('#selId').trigger('click');
}); 
```

这应该有效。

更新：

```
$(document).ready(function(){  
  $('#selId').click(function(){
     //do stuff here
  });
  $('#selId').click();
}); 
```

与其他答案非常相似，但也应该这样做，而不是“单击”，您可以尝试“聚焦”

# c++ - 为什么方法调用最终复制构造函数？

> ID：16157463
> 
> 赞同：0
> 
> 时间：2013-04-22T21:59:38.247
> 
> 标签：c++, constructor, copy

我不明白为什么在最后一行**return *newP;** 进入复制构造函数的方法会导致内存泄漏，因为我无法释放`Poly`从复制构造函数创建的新对象？

```
const Poly Poly::operator * (const Poly &p1) const {
Poly* newP= new Poly;
delete newP->headList->mono;
newP->headList->mono=NULL;
delete newP->headList;
newP->headList=NULL;
newP->SetCount(0);
//two pointer to run on the list

Node* tmp,* tmp2;
tmp= this->headList;
tmp2=p1.headList;
Mono* mono= new Mono;
int n,d,p;
while (tmp != NULL)
{
    while (tmp2!=NULL)
    {
        *mono=(*tmp->mono)*(*tmp2->mono);
        n=mono->GetiNom();
        d=mono->GetiDenom();
        p=mono->GetPower();
        newP->Insert(n,d,p);
        tmp2=tmp2->next;
    }   
    tmp=tmp->next;
    tmp2=p1.headList;
}
delete mono;
return *newP;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:01:14.007

您可以使用返回引用，例如`*this`，这对于[方法链接](http://en.wikipedia.org/wiki/Method_chaining)非常有用。如果对象在其他地方被删除，它不会泄漏内存。

好吧，既然你编辑了你的代码，是的，这确实泄漏了......如果你使用的是最近的编译器，你可以使用智能指针来解决这个问题，虽然如果你正在学习，我不推荐它，这很重要很好地理解内存管理。

对于这种特殊情况，函数应该返回一个指针，是的。或者，它可以通过在 return 语句中调用复制构造函数来返回对象的副本，并在主体中使用临时对象，但这不是一个非常干净的解决方案。

# c - 未修改联合的 C 数组

> ID：16157466
> 
> 赞同：0
> 
> 时间：2013-04-22T21:59:46.080
> 
> 标签：c, arrays, pointers, unions

我对以下代码有疑问。它应该是一个简单的`.obj`加载器，将数据存储在三个不同的数组中。数组被传递到函数中，但它们没有被修改。每次我使用该函数时，该行`*out_vertices[index] = gl_vector3_make(0.0, 0.0, 0.0);`也会抛出一个`EXC_BAD_ACCESS`，即使我预先分配了传入的数组并删除了函数本身中的所有相关分配代码。

对象IO.h

```
#ifndef ObjectIO_h
#define ObjectIO_h

union _vector2 {
    struct {float x, y;};
    struct {float s, t;};
    float v[2];
};
typedef union _vector2 gl_vector2;

extern inline gl_vector2 gl_vector2_make(float x, float y);

union _vector3 {
    struct {float x, y, z;};
    struct {float s, t, p;};
    struct {float r, g, b;};
    float v[3];
};
typedef union _vector3 gl_vector3;

extern inline gl_vector3 gl_vector3_make(float x, float y, float z);

union _vector4 {
    struct {float x, y, z, w;};
    struct {float s, t, p, q;};
    struct {float r, g, b, a;};
    float v[4];
};
typedef union _vector4 gl_vector4;

extern inline gl_vector4 gl_vector4_make(float x, float y, float z, float w);

extern inline int loadOBJ(const char *path, gl_vector3 **out_vertices, gl_vector2 **out_uvs, gl_vector3 **out_normals);

#endif 
```

对象IO.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "ObjectIO.h"

extern inline gl_vector2 gl_vector2_make(float x, float y) {
    gl_vector2 vector;

    vector.x = x;
    vector.y = y;

    return vector;
}

extern inline gl_vector3 gl_vector3_make(float x, float y, float z) {
    gl_vector3 vector;

    vector.x = x;
    vector.y = y;
    vector.z = z;

    return vector;
}

extern inline gl_vector4 gl_vector4_make(float x, float y, float z, float w) {
    gl_vector4 vector;

    vector.x = x;
    vector.y = y;
    vector.z = z;
    vector.w = w;

    return vector;
}

extern inline char** splitstring(char *inputstring, char *separator, size_t *lines) {
    char **res = NULL;
    char * p = strtok(inputstring, separator);
    int n_spaces = 0, i;

    while (p) {
        n_spaces ++;
        res = realloc(res, sizeof(char*) * n_spaces);
        if (res == NULL)
            exit (-1); /* memory allocation failed */

        res[n_spaces - 1] = p;

        p = strtok (NULL, separator);
    }

    res = realloc (res, sizeof (char*) * (n_spaces + 1));
    res[n_spaces] = '\0';

    /* print the result */

    for (i = 0; i < (n_spaces); i ++) printf ("res[%d] = %s\n", i, res[i]);

    /* free the memory allocated */

    *lines = (n_spaces - 1);
    free(res);

    return res;
}

extern inline int loadOBJ(const char *path, gl_vector3 **out_vertices, gl_vector2 **out_uvs, gl_vector3 **out_normals) {
    printf("Loading OBJ file %s...\n", path);
    long filesize;
    char *file_c;
    char *linesep;
    char **filecontents;
    size_t filecontentsize, result, lines, index, faces;
    float *normals = malloc(sizeof(float) * 3);
    float *uvs = malloc(sizeof(float) * 2);
    float *vertices = malloc(sizeof(float) * 3);
    FILE* file = fopen(path, "r");

    if (file == NULL) {
        printf("File %s cannot be opened.\n", path);
        fclose(file);
        return 0;
    }

    fseek(file, 0, SEEK_END);
    filesize = ftell(file);
    fseek(file, 0, SEEK_SET);
    filecontentsize = sizeof(char) * filesize;
    file_c = malloc(filecontentsize);
    result = fread(file_c, 1, filesize, file);

    linesep = malloc(sizeof(char) * 2);
    linesep[0] = '\n';
    lines = 0;
    index = 0;
    faces = 0;
    filecontents = splitstring(file_c, linesep, &lines);

    fseek(file, 0, SEEK_SET);
    while (index < lines) {
        if (filecontents[index][0] == 'v') {
            if (filecontents[index][1] == 'n') {
                normals = realloc(normals, (sizeof(float) * 3));

                fscanf(file, "vn %f %f %f\n", &normals[(index * 3) + 0], &normals[(index * 3) + 1], &normals[(index * 3) + 2]);
            }
            else {
                if (filecontents[index][1] == 't') {
                    uvs = realloc(uvs, (sizeof(float) * 2));
                    fscanf(file, "vt %f %f\n", &uvs[(index * 3) + 0], &uvs[(index * 3) + 1]);
                }
                else {
                    vertices = realloc(vertices, (sizeof(float) * 3));
                    fscanf(file, "v %f %f %f\n", &vertices[(index * 3) + 0], &vertices[(index * 3) + 1], &vertices[(index * 3) + 2]);
                }
            }
        }
        if (filecontents[index][0] == 'f') {
            faces ++;
        }

        index ++;
    }

    *out_vertices = malloc(sizeof(gl_vector3) * faces * 3);
    *out_uvs = malloc(sizeof(gl_vector2) * faces * 2);
    *out_normals = malloc(sizeof(gl_vector3) * faces * 3);

    index = 0;
    while (index <= lines) {
        *out_normals[index] = gl_vector3_make(0.0, 0.0, 0.0);
        *out_uvs[index] = gl_vector2_make(0.0, 0.0);
        *out_vertices[index] = gl_vector3_make(0.0, 0.0, 0.0);
        printf("%lu\n", index);
        index ++;
    }
    fclose(file);

    return 1;
} 
```

该函数在这里调用：

```
gl_vector3 *normals;
gl_vector2 *uvs;
gl_vector3 *vertices;

loadOBJ("/Users/justin/Downloads/OpenGL-tutorial_v0010_21/tutorial16_shadowmaps/room.obj", &vertices, &uvs, &normals);
printf("%f, %f, %f\n", vertices[0].x, vertices[0].y, vertices[0].z); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:01:23.267

您正在创建一个由 2、3 或 4 个相同匿名结构组成的联合，这很奇怪，但可以，当然可以。你的函数 gl_vector2_make、gl_vector3_make 和 gl_vector4_make 不是，因为我第一次读错了，返回指针，所以也没关系。您使用 realloc() 的方式效率非常低，但可以肯定的是，请继续。但是，您的函数`splitstring()`分配存储空间，将点填充到要处理的字符串数据中，然后在返回指向它的指针之前*释放分配的存储空间。*这是一个严重的错误。在您的函数`loadOBJ()`中，您的名为`normals`,`uvs`和的变量`vertices`都分配给固定大小，但即使您`realloc()`反复使用它们，您也永远不会*增长*任何一位。您总是分配相同的大小。然后根据您要分配的大小对它们进行索引，这又是一个主要错误。此外，在 中`loadOBJ()`，您将整个文件读入分配的内存，将其传递给它，将`splitstring()`其分解为一个近乎的字符串数组，逐行，然后不是实际*使用*它，而是倒回文件并用于`fscanf()`读取整个文件再次，一次一行。为什么不对`sscanf()`返回的每个字符串数组使用`splitstring()`？

# css - 文本缩进隐藏链接文本

> ID：16157476
> 
> 赞同：1
> 
> 时间：2013-04-22T22:00:24.303
> 
> 标签：css, seo

我一直在寻找一种方法来替换文本缩进：-9999px css-trick 用于隐藏链接文本并将图像显示为链接，例如主页徽标按钮。我找到了一个似乎可行的简单解决方案，但似乎没有得到任何炒作，所以我想知道是否有我看不到的漏洞。下面是解决方案，class="homeButton" 应用 css 翻转图像，而 class="hide" 显然隐藏了链接文本。请让我知道这是否有任何缺点，我不认为这是一种仍然具有基于文本的链接的方法，其中文本不会正常显示在屏幕上，但仍会显示在屏幕阅读器和搜索引擎中。一如既往地感谢...

```
<a class="homeButton" href="index.html"><span class="hide">Home Button</span></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:13:37.550

您没有确切地说出 .hide 的内容如何，​​但如果这个想法是使用 display:none，那就算了吧。*屏幕阅读器和*搜索蜘蛛都会忽略带有 display-none 的元素，因为隐藏的内容被认为是不相关的（尤其是黑帽 SEO 人员可以很容易地用关键字填充隐藏的文本）。

我真的不明白文本缩进解决方案有什么问题。当然，我会减少缩进值以阻止 IE6 为巨大的未使用画布保留内存，但它仍然是这些努力的推荐技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:03:20.790

**代码**

```
<h1><a class="homeButton" href="index.html">Home Button</a></h1> 
```

**CSS 代码**

```
h1 {
    display: block;
    width: 386px;
    height: 83px;
    margin: 11px 0 0 10px;
    text-align: left;
    overflow-x: hidden;
}

h1 a.homeButton {
    display: block;
    width: 386px;
    height: 83px;
    text-indent: -19999px;
    background-repeat: no-repeat;
    background-image: url("http://existstudio.pl/images//template/ex-ist/ex-ist-logotype.png");
} 
```

**演示**

[http://jsfiddle.net/bartekbielawa/rmWhF/](http://jsfiddle.net/bartekbielawa/rmWhF/)

**解释**

`<h1>`你可以改变你喜欢的东西。我`<h1>`更喜欢，因为它对 SEO 有好处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T09:07:59.770

使用字体大小 = 0

```
.hide {
 font-size: 0;
} 
```

# html - 为什么我的所有子域都被重定向到垃圾邮件站点？

> ID：16157478
> 
> 赞同：0
> 
> 时间：2013-04-22T22:00:34.437
> 
> 标签：html, apache, .htaccess, hosting

我的网站的重定向发生了一些非常奇怪的事情。我不确定错误出在哪里，我对 htaccess 文件及其所做的一切只有一个基本的了解。

假设我的网站是`www.mywebsite.com`. 如果我浏览到我网站的一个不存在的子域，例如`www.mywebsite.com/noexist`，那么我会因此被转发到一些垃圾邮件站点，但地址仍然是`www.mywebsite.com/noexist`。此垃圾邮件站点上的所有链接均采用以下形式`http://www.mywebsite.com/click3.php?S7QytarO...`

我不知道是什么导致了这种情况发生，甚至不知道我应该在哪里搜索。我可以告诉你我的网站和域的结构以及主要的 htaccess 文件，但我在文件中没有发现任何有趣的东西。为什么我会被转移到垃圾邮件站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:03:43.210

您确定它是垃圾邮件站点，而不是您的托管服务提供商设置的某些页面吗？

无论哪种情况，如果页面不存在，您需要告诉它去哪里。[本文](http://www.htaccessbasics.com/404-custom-error-page/)介绍了如何设置 htaccess，以便您可以拥有自定义 404 页面。

它的要点是您需要添加

```
ErrorDocument 404 /404.php 
```

然后把你想让你的页面说的任何东西放进去`404.php`。

另外，`www.mywebsite.com/noexist`不是子域，它只是一个页面。`www`在技​​术上是子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:18:42.280

Thanks to the many tips by the people here who suggested possible routes, I've discovered that the problem was that my Wordpress blog (which was the underlying system for my site) had been hacked. I've no idea what was causing the re-direct, but this seems to be a well known problem for Wordpress blogs.

More information can be found [on the Wordpress FAQ.](http://codex.wordpress.org/FAQ_My_site_was_hacked)

I decided to fix the problem in a dramatic fashion by completely removing the Wordpress blog from my site (I meant to do this for a while, anyways). This obviously fixed the problem.

# php - 如何解决 facebook 访问令牌过期问题？

> ID：16157486
> 
> 赞同：0
> 
> 时间：2013-04-22T22:01:01.037
> 
> 标签：php, api, facebook-graph-api

我用图形 api 创建了一个 facebook place serach。但是访问密钥每两个小时过期一次。为此，我实现了以下代码

```
 $app_id = "---";
 $app_secret = "----"; 
 $my_url = "";
$code = $_REQUEST["code"]; 
if (isset($code)) {

    $token_url="https://graph.facebook.com/oauth/access_token?client_id="
      . $app_id . "&redirect_uri=" . urlencode($my_url) 
      . "&client_secret=" . $app_secret 
      . "&code=" . $code . "&display=popup";
     $response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);
     $access_token = $params['access_token'];
}
$FacebookGraphURL = 'https://graph.facebook.com/search?fields=id,username,name,category,website,likes,location&q='.$keyword.'&type=place&center='.$center.'&distance='.$radius.'&limit=5&access_token='.$access_token;
    $FacebookGraphJSON = file_get_contents($FacebookGraphURL); 
```

但这给出了以下错误：

```
Notice: Undefined index: code in /opt/lampp/htdocs/APIcomparison/facebook_graph.php on line 24 
```

我错过了什么？另一件事我不知道如何使用 $my_url

谢谢是提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:17:15.580

您是否通过 Graph Explorer 工具生成访问令牌？如果是这样，这些令牌有 2 小时的到期时间。

您可以通过 Facebook 登录/OAuth 流程生成有效期为 60 天的访问令牌，在此期间，您可以通过单击“允许”按钮授予应用程序访问您（或任何用户）Facebook 用户帐户的权限。授权对话框。获得访问令牌后，您可以将其交换为长期存在的令牌。

Facebook OAuth 的详细信息在这里：[https ://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

生成访问令牌的一种简单方法是使用 Temboo 提供的 Facebook OAuth 支持。如果您只需要一个令牌，那么您可以使用 Facebook OAuth 向导，这意味着您不必编写任何代码来生成令牌。详情在这里：[https ://www.temboo.com/library/Library/Facebook/](https://www.temboo.com/library/Library/Facebook/)

（全面披露：我在 Temboo 工作）

# javascript - actionscript p2p - 聊天如何创建多个连接并向所有/任何一个发送消息

> ID：16157491
> 
> 赞同：2
> 
> 时间：2013-04-22T22:01:14.027
> 
> 标签：javascript, actionscript, chat, p2p

我是新的动作脚本。今天我写了这部分代码和奇怪的东西，但它有效）））

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 private const SERVER_ADDRESS:String = "rtmfp://p2p.rtmfp.net/bla-bla/";
        private var nc:NetConnection;
        private var ss:NetStream; 
        private var rs:NetStream; 
        private var myPeerID:String; 
        private var recvStreams:Object = new Object();
        private var sendStreams:Object = new Object();
        private var soundNewMsg:Class;

        private function initConnection():void{
            nc = new NetConnection();
            nc.maxPeerConnections = 1000;
            nc.addEventListener(NetStatusEvent.NET_STATUS, ncStatus);
            nc.connect(SERVER_ADDRESS);
        }

        public function ncStatus(event:NetStatusEvent):void{
            if(event.info.code == "NetConnection.Connect.Success"){
                myPeerID = nc.nearID;
                initSendStream();
                ExternalInterface.call("alert",nc.nearID);
            }
            else ExternalInterface.call("p2pError",event.info.code);
        }

        private function initSendStream():void{
            ss = new NetStream(nc, NetStream.DIRECT_CONNECTIONS);
            ss.publish('chat');
            var client:Object = new Object();
            client.onPeerConnect = function(subscriber:NetStream):Boolean{
                if(!sendStreams[subscriber.farID]&&!recvStreams[subscriber.farID]){
                    initReceiveStream(subscriber.farID);
                    sendStreams[subscriber.farID] = true;
                }
                return true;
            };
            ss.client = client;
        }

        private function initReceiveStream(peerID:String):void{
            rs = new NetStream(nc,peerID);
            rs.play('chat');
            var client:Object = new Object();
            client.receiveSomeData = receiveSomeData;
            rs.client = client;
            recvStreams[peerID] = true;
        }

        private function sendSomeData(str:String):void{
            if(str)ss.send('receiveSomeData', str);
        }

        private function receiveSomeData(str:String):void{
            ExternalInterface.call("receiveSomeData", str);
        }

        public function init():void{
            ExternalInterface.addCallback("initConnection",initConnection);
            ExternalInterface.addCallback("sendSomeData",sendSomeData);
            ExternalInterface.addCallback("initReceiveStream",initReceiveStream);
            ExternalInterface.call("p2pStartInit");
        }
    ]]>
</mx:Script> 
```

js：

```
function getP2p(){
    if(navigator.appName.indexOf("Microsoft")!=-1)return window.p2p;
    else return document.p2p;
}

function p2pStartInit(){
    try{getP2p().initConnection()}
    catch(e){p2pError('flasherror')}
}

function initReceiveStream(p2pId){
    try{getP2p().initReceiveStream(p2pId)}
    catch(e){p2pError(e)}
}

function sendSomeData(str){
    try{getP2p().sendSomeData(str)}
    catch(e){p2pError('flasherror')}
}

function p2pError(err){
    alert(err)
}

function receiveSomeData(str,id){
    alert('Received:'+str+'/'+id)
} 
```

和html：

```
<input onblur="initReceiveStream(this.value)" value="initReceiveStream(p2pId)" />
<input onblur="sendSomeData(this.value)" value="sendSomeData(str)" /> 
```

现在我在做什么：

我在歌剧中打开的第一个例子。它给了我它的 ID。然后我在 Mozilla 中打开第二个。在第一个输入字段中，我输入了一个歌剧示例的 id。它连接良好。当我尝试在这两个示例之间发送/接收消息后一切正常（它们都接收/发送消息）

我的第一个问题是：

当我在其他浏览器中打开第三个示例并将第三个示例 id 放入第二个示例（在 mozilla 中）的输入字段时，然后在歌剧中我得到“NetStream.Connect.Closed”。如果我尝试从 mozilla 示例发送一些消息，则此消息将同时出现在第三个浏览器中的 opera 中。但如果我试图从歌剧发送消息它不会去任何地方。我应该怎么做才能将来自opera的消息发送到mozilla并且可以将来自mozilla的消息发送到所有示例？

第二个问题是：

当我成功完成第一个示例时，我希望第二个示例（应包含所有已连接聊天的 id）可以选择将消息发送到的位置：发送到第一个，或第三个或两者？我怎样才能做到这一点？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:35:52.440

实际上，我刚刚发现了如何做到这一点。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 import mx.collections.ArrayCollection;

        private const SERVER_ADDRESS:String = "rtmfp://p2p.rtmfp.net/bla-bla/";
        private var nc:NetConnection;
        private var ss:NetStream; 
        private var rs:NetStream;
        private var myPeerID:String; 
        private var recvStreams:Object = new Object();
        private var sendStreams:Object = new Object();
        private var soundNewMsg:Class;

        private function initConnection():void{
            nc = new NetConnection();
            nc.maxPeerConnections = 1000;
            nc.addEventListener(NetStatusEvent.NET_STATUS, ncStatus);
            nc.connect(SERVER_ADDRESS);
        }

        public function ncStatus(event:NetStatusEvent):void{
            ExternalInterface.call("p2pError",event.info.code);
            if(event.info.code == "NetConnection.Connect.Success"){
                myPeerID = nc.nearID;
                initSendStream();
                ExternalInterface.call("alert",nc.nearID);
            }
        }

        private function initSendStream():void{
            ss = new NetStream(nc, NetStream.DIRECT_CONNECTIONS);
            ss.publish('chat');
            var client:Object = new Object();
            client.onPeerConnect = function(subscriber:NetStream):Boolean{
                if(!sendStreams[subscriber.farID])sendStreams[subscriber.farID] = subscriber;
                if(!recvStreams[subscriber.farID])initReceiveStream(subscriber.farID);
                return true;
            }
            ss.client = client;
        }

        private function initReceiveStream(peerID:String):void{
            if(peerID){
                rs = new NetStream(nc,peerID);
                rs.play('chat');
                var client:Object = new Object();
                client.receiveSomeData = receiveSomeData;
                rs.client = client;
                var peer:Object = new Object();
                peer.stream = rs;
                recvStreams[peerID] = peer;
            }
        }

        private function sendSomeData(str:String,farIds:String):void{
            if(str!=null&&str!=""){
                str = str.replace(/(^[\r\n\t\s]+)|([\r\n\t\s]$)/g,"");
                farIds = farIds == null ? "" : farIds.replace(/[^a-z0-9;]/gi,"");
                if(farIds!=""){
                    var farId:Array = farIds.split(";");
                    for(var i:int;i<farId.length;i++){
                        if(farId[i]&&sendStreams[farId[i]]){
                            sendStreams[farId[i]].send('receiveSomeData', str, myPeerID);
                        }
                    }
                }
                else{
                    for(var id:String in sendStreams){
                        sendStreams[id].send('receiveSomeData', str, myPeerID);
                    }
                }
            }
        }

        private function receiveSomeData(str:String, farId:String):void{
            ExternalInterface.call("receiveSomeData", str, farId);
        }

        public function init():void{
            ExternalInterface.addCallback("initConnection",initConnection);
            ExternalInterface.addCallback("sendSomeData",sendSomeData);
            ExternalInterface.addCallback("initReceiveStream",initReceiveStream);
            ExternalInterface.call("p2pStartInit");
        }
    ]]>
</mx:Script> 
```

我希望谷歌没有骗我）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T12:44:29.850

对于第一个问题：是的，您必须将订阅者的流对象保存在某个地方（从 onPeerConnect 处理程序中）。这将允许多个客户端连接到发布流，而不会删除旧客户端。

# excel - 如何创建本地存储文件的超链接列表？

> ID：16157500
> 
> 赞同：0
> 
> 时间：2013-04-22T22:01:58.100
> 
> 标签：excel, excel-2010, vba

我正在尝试自动创建图片文件的超链接列表。我的工作表的文件名列在 A 列中，我希望将这些文件的超链接（保存在工作表的父文件夹中）列在 B 列。我是 VBA 的初学者，但是这应该很简单，但是我无法找到一种方法来做到这一点。

我尝试使用宏记录器并得到了这个：

```
 Sub Hyperlink()
'
' Hyperlink Macro
'
' Keyboard Shortcut: Ctrl+l
'
    ActiveCell.Offset(0, -1).Range("Table1[[#Headers],[ACTIVITY '#]]").Select
    ActiveCell.FormulaR1C1 = "file(a)"
    ActiveCell.Offset(0, 1).Range("Table1[[#Headers],[ACTIVITY '#]]").Select
    ActiveSheet.Hyperlinks.Add Anchor:=Selection, Address:= _
        "..\file(a).JPG", TextToDisplay:="..\file(a).JPG"
    ActiveCell.Offset(1, 0).Range("Table1[[#Headers],[ACTIVITY '#]]").Select
End Sub 
```

任何帮助将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:36:33.330

您可以遍历单元格并创建超链接，只需引用包含数据的列。

```
Sub CreateJpgHyperLinks()
Dim iRow, iCol As Integer 'row and column counters

iRow = 1 'change to 2 if there are headers
iCol = 1 'Column A
    'this assumes there is data in all cells in column A
    Do While ActiveSheet.Cells(iRow, iCol).Value <> ""
        'set the link in column B and point it to the info in column A
        ActiveSheet.Hyperlinks.Add Anchor:=ActiveSheet.Cells(iRow, iCol + 1), Address:=ActiveSheet.Cells(iRow, iCol).Value, _
        TextToDisplay:=ActiveSheet.Cells(iRow, iCol).Value
        'move to the next row
        iRow = iRow + 1
    Loop

End Sub 
```

要查找文件夹，您可以使用以下方法

```
'get path to current workbook
workbookPath = ActiveWorkbook.Path
'find the last slash in the workbook path
iLastFolderSlash = InStrRev(workbookPath, "\")
'create the folder location by removing the last folder from the path
jpgFolderPath = Left(workbookPath, iLastFolderSlash) 
```

# jquery-mobile - 如何在 jQuery mobile Radio 和 Checkbox 的 label-for 中找到带有敲除的文本？

> ID：16157506
> 
> 赞同：2
> 
> 时间：2013-04-22T22:02:32.703
> 
> 标签：jquery-mobile, checkbox, knockout.js, radio-button, label-for

我正在使用 jQuery 1.9.1、jQM 1.3 和淘汰赛 2.2.1。

我的html如下：

```
<div data-role="page" id="coloursView">
    <div data-role="content">
        <fieldset data-role="controlgroup">
            <legend>Colour:</legend>
            <input type="radio" name="colours" data-bind="checked: colour" id="radio-1" value="1" />
            <label for="radio-1">Red</label>
            <input type="radio" name="colours" data-bind="checked: colour" id="radio-2" value="2" />
            <label for="radio-2">Blue</label>
            <input type="radio" name="colours" data-bind="checked: colour" id="radio-3" value="3" />
            <label for="radio-3">Green</label>
        </fieldset>
    </div><!--/content -->
</div><!--/page --> 
```

我的视图模型也很简单：

```
function ColoursViewModel() {
  this.template = "coloursView";
  this.colour = ko.observable("1");
  this.label = ko.observable(); // custom binding
} 
```

现在，我想获取所选颜色的描述，而不是值。在我看来，我需要一个自定义绑定，比如这个：

```
ko.bindingHandlers.label = {
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $("radio", element).filter(function(el) { return $(el).text() === value; }).prop("checked", "checked");
    }
}; 
```

但我无法获得相关标签的文本 - 文本标签。

有人可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:02:09.790

## 更新

这是另一种仅查找`:checked`项目并删除文本中*的空格的方法。*

> 复选框

```
$('input[type=checkbox]').each(function () {
 if ($(this).is(':checked')) {
  var checkbox = $(this).prev('label').text();
  alert('Checkbox: ' + checkbox.replace(/\s+/g, ' '));
 }
}); 
```

> 收音机

```
$('input[type=radio]').each(function () {
 if ($(this).is(':checked')) {
  var radio = $(this).prev('label').text();
  alert('Radio: ' + radio.replace(/\s+/g, ' '));
 }
}); 
```

[**更新的演示**](http://fiddle.jshell.net/Palestinian/PedEC/)

* * *

> 复选框

```
$('div.ui-checkbox').find('span.ui-btn-text').text(); 
```

> 收音机

```
$('div.ui-radio').find('span.ui-btn-text').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:24:13.430

对不起，如果我回答自己，但我想我明白了。**至少对于无线电输入。**

现在，我在字段集级别有一个自定义绑定处理程序，以保持标记干净且更具可读性，因为我可以：

```
<fieldset data-role="controlgroup" id="front-colours" data-bind="frontColourLabel: frontColour">
    <legend>Front Colour: <span data-bind="text: frontColourDescription"></span> (Value: <span data-bind="text: frontColour"></span>)</legend>
    <input type="radio" name="front-colours" data-bind="checked: frontColour" id="fc-radio-1" value="red" />
    <label for="fc-radio-1">Red</label>
    <input type="radio" name="front-colours" data-bind="checked: frontColour" id="fc-radio-2" value="blue" />
    <label for="fc-radio-2">Blue</label>
    <input type="radio" name="front-colours" data-bind="checked: frontColour" id="fc-radio-3" value="green" />
    <label for="fc-radio-3">Green</label>
</fieldset> 
```

这是我提出的绑定处理程序：

```
ko.bindingHandlers.frontColourLabel = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        ko.utils.unwrapObservable(valueAccessor()); 
        var id = $('input:radio[name='+element.id+']:checked').prop("id");
        var radioText = $('label[for=' + id + ']').text();
        viewModel.frontColourDescription(radioText);
    }
}; 
```

这里唯一棘手的部分是字段集的 id 等于无线电组的名称，因为很容易过滤掉我想要处理的无线电组。

**工作示例：http:** [//jsfiddle.net/h7Bmb/1/](http://jsfiddle.net/h7Bmb/1/)

我现在尝试让复选框部分工作。有人可以帮忙吗？

# google-chrome - 在 Chrome 中使用 CSS3 动画选择列表/下拉悬停跳跃

> ID：16157507
> 
> 赞同：0
> 
> 时间：2013-04-22T22:02:38.780
> 
> 标签：google-chrome, css, html-select, css-animations

也许我应该将其记录为 chrome 的错误，但我想我会在这里查看是否有解决该问题的方法。

我有一个使用 CSS3 在父 div 背景上带有动画的简单选择列表。当我打开下拉列表并将鼠标移到不同的选项上时，蓝条（悬停）会随着我的鼠标移动而跳来跳去，尤其是在列表中的最后一项上。

HTML：

```
<div id="backgroundContainer">
<select >
<option value="">-- Select a Test Case --</option>
<option value="1">Test1</option>
<option value="2">Test2</option>
<option value="3">Test3</option>
<option value="4">Test4</option>
<option value="5">Test5</option>
<option value="6">Test6</option>
<option value="7">Test7</option>
<option value="8">Test8</option>
</select>
</div> 
```

CSS：

```
#backgroundContainer {
background-repeat: no-repeat;
background-color: #CCC;
background-image:url("https://appharbor.com/assets/images/stackoverflow-logo.png");
color: #fff;
height:500px;
width:100%;
-webkit-animation: moveUpDown 240s infinite linear;
}
@keyframes moveUpDown {
0% {
    background-position-y: 25%;
}
50% {
    background-position-y: 100%;
}
100% {
    background-position-y: 25%;
}
}
@-webkit-keyframes moveUpDown {
0% {
    background-position-y: 25%;
}
50% {
    background-position-y: 100%;
}
100% {
    background-position-y: 25%;
}
} 
```

我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/ZfQU5/](http://jsfiddle.net/ZfQU5/)，它使用了上面的代码。

请看看我是否做错了什么或者是否有任何解决方法。当然，我可以只删除背景动画，但仍然奇怪的是它无论如何都会跳来跳去。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:38:55.227

麦克风，

是的，整个页面都在 Chrome 上跳转，在 Chrome 开发中也是如此，而不仅仅是下拉菜单。这不是错误，您的标记是错误的。它不会在 IE 中跳转，因为 IE 还不了解关键帧或 -webkit-keyframes。这就是跳跃的来源。您将菜单嵌套在*标签，所以菜单选择了跳转。我已经在 Chrome 上测试了它，无论是否打开开发，IE9，FF，稍后我将运行 IE10 和 Opera，只是为了看看它们对这种编码的反应，但我相信它会是一样的。*

 *我的问题是：

1.  你想实现什么动画？
2.  您是否希望从下拉选项之一触发操作？
3.  你打算有两个文件吗？一个 .html 和一个 .css 或者只是将所有代码放在 .html 中并拥有一个文件？

我修复了所有代码并让它按照我认为你想要做的事情工作，但这是假设我做了你想要的。

杰森，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:07:16.563

这真的是错误的 webkit 动画，我想你需要使用这个代码

```
<html>
<body>
<style type="text/css">
#backgroundContainer {
position: absolute;
background-repeat: no-repeat;
background-position: top center;
background-color: #CCC;
background-attachment: fixed;
background-image:url("https://appharbor.com/assets/images/stackoverflow-logo.png") ;

border-top: solid 10px #000;
    color: #fff;
    font-size: 14px;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0 25px;
    height:500px;
    width:100%;
    -webkit-animation: moveUpDown 20s infinite linear;
    z-index:6;
}
@keyframes moveUpDown {
    0% {
        background-position-y: 25%;
    }
50% {
        background-position-y: 100%;
    }
100% {
        background-position-y: 25%;
    }
}
@-webkit-keyframes moveUpDown {
0% {
background-position-y: 25%;
}

50% {
        background-position-y: 100%;
    }
100% {
        background-position-y: 25%;
    }
}
.select{
    position: relative;
    z-index: 10;
}
&lt;/style&gt;
&lt;div style="position:relative; z-index:9;"&gt;
&lt;div id="backgroundContainer"&gt;
    &lt;/div&gt;
    &lt;div class="two"&gt;
&lt;select class="select"&gt;
&lt;option class="one" value=""&gt;-- Select a Test Case --&lt;/option&gt;
&lt;option class="one" value="1"&gt;Test1&lt;/option&gt;
&lt;option class="one" value="2"&gt;Test2&lt;/option&gt;
&lt;option class="one" value="3"&gt;Test3&lt;/option&gt;
&lt;option class="one" value="4"&gt;Test4&lt;/option&gt;
&lt;/select&gt;
&lt;/div&gt;
&lt;/div&gt;
</html>
</body> 
```

还

我尝试使用这个：

动画播放状态：暂停；

-webkit-动画播放状态：暂停；/* Safari 和 Chrome */

它不是选择元素的重新区域

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T04:31:32.823

麦克风，

这是一些代码。您可以将框留在原处，只需遵循[CSS 规则](http://www.w3schools.com/css3/default.asp)就可以了。

CSS3：

```
#backgroundContainer {
   width:100%;
   height:500px;
   position:relative;
   background: #CCCCCC url("https://appharbor.com/assets/images/stackoverflow-logo.png") no-repeat;
   animation: myOption 5s infinite linear;
   -webkit-animation: myOption 5s infinite linear; 
     }

@-keyframes mymove
      {
      0%    {background:left:0px; top:0px;}
      25%   {background:left:0px; top:-250px;}
      50%   {background:left:0px; top:500px;}
      75%   {background:left:0px; top:-250px;}
      100%  {background:left:0px; top:0px;}
      }

/* Safari and Chrome */
@-webkit-keyframes mymove
      {
      0%    {background:left:0px; top:0px;}
      25%   {background:left:0px; top:-250px;}
      50%   {background:left:0px; top:500px;}
      75%   {background:left:0px; top:-250px;}
      100%  {background:left:0px; top:0px;}
      } 
```

这是html。

```
 <!DOCTYPE html>
    <html lang="en">
    <!-- <head>
      <link rel="stylesheet" type="text/css" href="css/bgContainer.css" /> 
    </head> -->
      <div id="backgroundContainer">
        <select >
            <option id="select" value="">-- Select a Test Case --</option>
                <option id="ov1" value="1">Test1</option>
                <option id="ov2" value="2">Test2</option>
                <option id="ov3" value="3">Test3</option>
                <option id="ov4" value="4">Test4</option>
                <option id="ov5" value="5">Test5</option>
                <option class="ov6" value="6">Test6</option>
                <option id="ov7" value="7">Test7</option>
                <option id="ov8" value="8">Test8</option>
                <option id="ov9" value="9">Test9</option>
                <option id="ov10" value="10">Test10</option>
        </select>
      </div>  
    </html>

You'll have to reset your timer, and your CSS import link, I didn't want to wait 240s every time I ran it. 
```

该代码在这里：[CodePen](http://codepen.io/JasonDavis34/pen/sobte)

[网络平台.org](http://docs.webplatform.org/wiki/css)

[W3C.org](http://www.w3.org/standards/techs/css#w3c_all)

杰森，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T23:13:40.493

我只想说我在客户的网站上遇到了类似的问题——当您尝试进行选择时，他们的选择元素的选择突出显示会跳来跳去，但仅限于 Chrome，然后仅限于 Windows。

我尝试了几个小时来解决这个问题，包括将所有选择元素的 -webkit-animation 设置为 none，但似乎没有任何效果，而且我也没有看到任何动画被设置。

好吧，长话短说，在整个页面（在 html 元素上）设置了一个 -webkit-animation！删除后，它解决了问题。

我只是想分享一下，以防其他人将来遇到这样的问题。*

# c++ - 架构 x86_64 的未定义符号：party::getArrival()

> ID：16157512
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:02:58.900
> 
> 标签：c++, xcode4

我有一个`party`名为的类的头文件`party.h`：

```
#ifndef party_h
#define party_h

#include <iostream>

class party{
private:
    int people;
    int waitTime;
    bool waiting;
    int arrival;

public:
    party();
    party(int, int);
    int getPeople();
    void setPeople(int);
    bool isWaiting();
    void setWaiting(bool);
    void setWaitTime(int);
    int getwaitTime();
    void setArrival(int);
    int getArrival();
    int getTotalTime(int);
    void decrement();
};

#endif 
```

及其实施`party.cpp`：

```
#include "party.h"

party::party(){}

party::party(int numPeople, int a){
    people = numPeople;
    arrival = a;
}
int party::getPeople(){
    return people;
}

void party::setPeople(int p){
    people = p;
}

bool party::isWaiting(){
    return waiting;
}

void party::setWaiting(bool w){
    waiting = w;
}

void party::setWaitTime(int t){
        waitTime = t;
}

int party::getwaitTime(){
    return waitTime;
}

void party::setArrival(int a){
    arrival =a; 
}

int party::getTotalTime(int current){
    return (current-arrival);
} 
```

每当我构建项目时，我都会收到以下错误消息，

```
Ld /Users/shade/Library/Developer/Xcode/DerivedData/ResSim-fvkhqxhiupiizxgffxqgoxgolsmv/Build/Products/Debug/ResSim normal x86_64 cd /Users/shade/Dropbox/School/Gwinnett_Tech/CIST_2362/final/ResSim setenv MACOSX_DEPLOYMENT_TARGET 10.8 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/shade/Library/Developer/Xcode/DerivedData/ResSim-fvkhqxhiupiizxgffxqgoxgolsmv/Build/Products/Debug -F/Users/shade/Library/Developer/Xcode/DerivedData/ResSim-fvkhqxhiupiizxgffxqgoxgolsmv/Build/Products/Debug -filelist /Users/shade/Library/Developer/Xcode/DerivedData/ResSim-fvkhqxhiupiizxgffxqgoxgolsmv/Build/Intermediates/ResSim.build/Debug/ResSim.build/Objects-normal/x86_64/ResSim.LinkFileList -mmacosx-version-min=10.8 -stdlib=libstdc++ -o /Users/shade/Library/Developer/Xcode/DerivedData/ResSim-fvkhqxhiupiizxgffxqgoxgolsmv/Build/Products/Debug/ResSim
Undefined symbols for architecture x86_64: "party::getArrival()", referenced from: restaurant::startSim() in restaurant.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation)
"party::getArrival()", referenced from: Restaurant::startSim() in restaurant.o Symbol(s) not found for architecture x86_64 Linker command failed with exit code 1 (use -v to see invocation) 
```

这是一条新的错误消息，因为它今天早些时候/本周末在 Visual Studio 中工作。但是从那以后我已经更改了大量的代码，要点中的代码已经更新并且是我正在使用的。我目前正试图让它在 xcode 中构建，这样我就可以完成今晚到期的项目的调试/编程。任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:04:32.727

您没有`getArrival`在`party.cpp`文件中定义。你可能想要：

```
int party::getArrival(){
    return arrival;
} 
```

# python - 并行化代码在 Python 中的运行速度比在 Matlab 中慢得多

> ID：16157513
> 
> 赞同：4
> 
> 时间：2013-04-22T22:03:05.533
> 
> 标签：python, matlab, python-2.7, numpy, multiprocessing

我有一段代码执行以下操作：

```
for each file (already read in the RAM):
    call a function and obtain a result
add the results up and disply 
```

可以并行分析每个文件。分析每个文件的函数如下：

```
# Complexity = 1000*19*19 units of work
def fun(args):
    (a, b, p) = args
    for itr in range(1000):
        for i in range(19):
            for j in range(19):
                # The following random number generated depends on
                # latest values in (i-1, j), (i+1, j), (i, j-1) & (i, j+1)
                # cells of latest a and b arrays
                u = np.random.rand();
                if (u < p):
                    a[i, j] += -1
                else:
                    b[i, j] += 1
    return a+b 
```

我正在使用`multiprocessing`包来实现并行性：

```
import numpy as np
import time
from multiprocessing import Pool, cpu_count

if __name__ == '__main__':
    t = time.time()
    pool = Pool(processes=cpu_count())
    args = [None]*100
    for i in range(100):
        a = np.random.randint(2, size=(19, 19))
        b = np.random.randint(2, size=(19, 19))
        p = np.random.rand()
        args[i] = (a, b, p)
    result = pool.map(fun, args)
    for i in range(2, 100):
        result[0] += result[i]
    print result[0]
    print time.time() - t 
```

我已经编写了在每次迭代中`MATLAB`使用`parfor`和调用的等效代码：`fun``parfor`

```
tic
args = cell(100, 1);
r = cell(100, 1);
parfor i = 1:100
   a = randi(2, 19, 19);
   b = randi(2, 19, 19);
   p = rand();
   args{i}.a = a;
   args{i}.b = b;
   args{i}.p = p;
   r{i} = fun(args{i});
end

for i = 2:100
    r{1} = r{1} + r{i};
end
disp(r{1});
toc 
```

的实现`fun`如下：

```
function [ ret ] = fun( args )
a = args.a;
b = args.b;
p = args.p;

for itr = 1:1000
    for i = 1:19
        for j = 1:19
            u = rand();
            if (u < p)
                a(i, j) = a(i, j) + -1;
            else
                b(i, j) = b(i, j) + 1;
            end
        end
    end
end
ret = a + b;
end 
```

我发现这`MATLAB`非常快，双核处理器大约需要 1.5 秒，而`Python`程序大约需要 33-34 秒。为什么会这样？

编辑：很多答案建议我应该矢量化随机数生成。实际上它的工作方式是，生成的随机数取决于最新的 a 和 b 2D 数组。我只是打了一个简单的`rand()`电话来保持程序简单易读。在我的程序的实际中，随机数总是通过查看（i，j）单元格的某些水平和垂直相邻单元格来生成。所以不可能向量化它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:37:55.190

您是否`fun`在非并行环境中对这两种实现进行了基准测试？一个可能会快很多。特别是，Python 中的那些嵌套循环`fun`看起来可能会在 Matlab 中变成更快的矢量化解决方案，或者可能通过 Matlab 的 JIT 进行优化。

将这两种实现都放在分析器中，以查看它们将时间花在哪里。将这两种实现都转换为非并行并首先对它们进行分析，以确保它们在性能上是等效的，然后再引入并行化的复杂性。

最后一项检查 - 您正在使用本地工作人员池设置 Matlab 的并行计算工具箱，对，而不是连接到远程机器或获取其他一些资源？Matlab 方面有多少工人？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T23:35:49.517

我对您的 Python 代码进行了一些测试，但没有使用该`multiprocessing`部分，并通过进行以下更改实现了大约 25 倍的加速：

*   使用 Python 列表而不是 NumPy 数组，因为后者在您需要进行大量索引时真的很慢。我的时间安排包括这样做所需的时间，`ndarray.tolist()`这实际上可能是一个可行的选择，只要我认为阵列不是很大。
*   在 PyPy 而不是常规的 Python 解释器中运行它，因为 PyPy 有一个 JIT 编译器，以使与 MATLAB 的比较更公平一点。常规 CPython 没有这样的功能。
*   对函数进行本地“随机”调用，即 do`rand = np.random.rand`和 later `u = rand()`，因为在 Python 中，本地命名空间中的查找速度更快，这在诸如此类的紧密循环中可能很重要。
*   使用 Python`random.random`代替`np.random.rand`（也绑定到函数的本地名称）。
*   换成`range`基于生成器的`xrange`.

*（这个列表从最显着的加速到只有非常小的增益排序）*

当然还有并行计算方面。在`multiprocessing`进程之间传递的所有 Python 对象都是“腌制的”，这意味着它们必须在进程之间复制之前进行序列化和反序列化。MATLAB 还可以在进程（或线程？）之间复制数据，但这样做的方式可能不太浪费。除此之外，设置 a`multiprocessing.Pool`也需要很短的时间，这可能对您的 MATLAB 基准测试不公平，但我不确定这一点。

根据您和我的时间安排，我会说 Python 和 MATLAB 对于这项特定任务可能同样快。但是，不幸的是，您必须跳过一些障碍才能使用 Python 获得这种速度。也许`@autojit`在这方面使用 Numba 的功能可能会很有趣，如果你有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:39:11.910

试试这个版本的乐趣，看看它是否能给你带来加速。

```
def fun(args):
    a, b, p = args
    n = 1000
    u = np.random.random((n, 19, 19))
    msk = u < p
    msk_sum = msk.sum(0)
    a -= msk_sum
    b += (n - msk_sum)

    return a + b 
```

这是使用 numpy 实现这种功能的更有效的方法。

这些类型的嵌套循环在 matlab 和 python 等解释语言中可能具有相当高的开销，但我怀疑 JIT 在 matlab 中至少部分地进行了补偿，因此矢量化和循环实现之间的性能差异会更小。Cpython 目前没有对这些类型的循环进行任何优化（据我所知），但至少一个 python 实现[pypy](http://pypy.org/)确实有 JIT。不幸的是，pypy 目前只有有限的 numpy 支持。

更新：

看起来你有一个迭代算法，至少根据我的经验，这些是最难用 numpy/cpython 优化的。考虑使用[cython](http://www.cython.org/)，本[教程](http://docs.cython.org/src/tutorial/numpy.html)也可能有用，用于编写嵌套循环。其他人可能有其他建议，但这是我能想到的最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T23:07:12.067

鉴于可用信息，您可能会从使用 Cython 中受益，这让您还可以使用一些[并行性](http://docs.cython.org/src/userguide/parallelism.html)。根据您需要的随机数，您可以使用 GSL 来生成它们。

## 原始问题

没有必要使用`multiprocessing`，因为`fun`可以很容易地矢量化，从而产生巨大的加速（超过 50 倍）。

我不确定为什么 matlab 没有像 numpy 那样受到重创，但它的 JIT 可能会保存它。Python 不喜欢`.`在内循环中进行两次查找，也不喜欢在那里调用昂贵的函数。

```
def fun_fast(args):
     a, b, p = args
     for i in xrange(19):
         for j in xrange(19):
             u = np.random.rand(1000)
             msk = u < p
             msk_sum = msk.sum()
             a[i, j] -= msk_sum
             b[i, j] += msk.size - msk_sum
     return a + b 
```

# python - 断开连接后重新连接到 ZMQ 提要

> ID：16157518
> 
> 赞同：3
> 
> 时间：2013-04-22T22:03:22.113
> 
> 标签：python, network-programming, zeromq, pyzmq

我有这个简单的 python 脚本，它连接到 ZMQ 提要并吐出一些数据：

```
#!/usr/bin/env python2
import zlib
import zmq
import simplejson

def main():
    context = zmq.Context()
    subscriber = context.socket(zmq.SUB)

    # Connect to the first publicly available relay.
    subscriber.connect('tcp://relay-us-east-1.eve-emdr.com:8050')
    # Disable filtering.
    subscriber.setsockopt(zmq.SUBSCRIBE, "")

    while True:
        # Receive raw market JSON strings.
        market_json = zlib.decompress(subscriber.recv())
        # Un-serialize the JSON data to a Python dict.
        market_data = simplejson.loads(market_json)
        # Dump typeID
        results = rowsets = market_data.get('rowsets')[0];
        print results['typeID']

if __name__ == '__main__':
    main() 
```

这是在我的家庭服务器上运行的。有时，我的家庭服务器失去了与互联网的连接，这是住宅连接的诅咒。但是，当网络确实退出并重新启动时，脚本就会停止。有没有办法重新初始化连接？我还是 python 的新手，在正确的方向上一点会很棒。=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T08:35:42.947

不确定这是否仍然相关，但这里有：

使用超时（[此处](https://stackoverflow.com/questions/7538988/zeromq-how-to-prevent-infinite-wait)、[此处](https://stackoverflow.com/questions/12919372/how-to-set-a-pyzmq-socket-queued-timeout)和[此处](https://gist.github.com/RussTheAerialist/2052933)的示例）。在 ZMQ < 3.0 上，它看起来像这样（未经测试）：

```
#!/usr/bin/env python2
import zlib
import zmq
import simplejson

def main():
    context = zmq.Context()
    while True:
        subscriber = context.socket(zmq.SUB)
        # Connect to the first publicly available relay.
        subscriber.connect('tcp://relay-us-east-1.eve-emdr.com:8050')
        # Disable filtering.
        subscriber.setsockopt(zmq.SUBSCRIBE, "")
        this_call_blocks_until_timeout = recv_or_timeout(subscriber, 60000)
        print 'Timeout'
        subscriber.close()

def recv_or_timeout(subscriber, timeout_ms)
    poller = zmq.Poller()
    poller.register(subscriber, zmq.POLLIN)
    while True:
        socket = dict(self._poller.poll(stimeout_ms))
        if socket.get(subscriber) == zmq.POLLIN:
            # Receive raw market JSON strings.
            market_json = zlib.decompress(subscriber.recv())
            # Un-serialize the JSON data to a Python dict.
            market_data = simplejson.loads(market_json)
            # Dump typeID
            results = rowsets = market_data.get('rowsets')[0];
            print results['typeID']
        else:
            # Timeout!
            return

if __name__ == '__main__':
    main() 
```

ZMQ > 3.0 允许您设置套接字的`RCVTIMEO`选项，这将导致其`recv()`引发超时错误，而无需`Poller`对象。

# android - 同时拥有 ActionBarSherlock + ViewPagerIndicator + HoloEverywhere 是错误的（或一团糟）吗？

> ID：16157520
> 
> 赞同：2
> 
> 时间：2013-04-22T22:03:29.293
> 
> 标签：android, actionbarsherlock, viewpagerindicator, android-holo-everywhere

**简短：** 一般来说，我认为在我的项目中将三个（ABS + VPI + HE）作为库可能对于我想要实现的目标来说是多余的，也许一个包含另一个，并且没有必要拥有三个库。

**Long：** 我正在尝试制作一个应用程序，并且我在它的 UI/UX 上花费了一些时间来让它变得非常好，因为它的功能几乎完成了。

我让它与 ActionBarSherlock + ViewPagerIndicator 配合得很好，但后来我看到在 Android 2.1 兼容性方面，一些控件陈旧而可怕。所以我发现了 HoloEverywhere 并添加了它，让 ABS+VPI+HE 一起工作非常酷且容易。

所以我的问题是，我这样做是否正确？我可以仅使用 HoloEverywhere + ActionBarSherlock 实现从 2.1 到 4.2.2 的 VPI 滑动效果吗？或者我可以在没有 ABS 但有 HE 的情况下使用 2.1 到 4.2.2 的 ActionBar？

非常感谢您提前。对不起，如果我的英语不好。

# c# - 检索手动下拉列表的数据库值

> ID：16157523
> 
> 赞同：0
> 
> 时间：2013-04-22T22:03:35.940
> 
> 标签：c#, asp.net

所以我有一个手动下拉列表，我添加了 3 个项目（无数据连接，无绑定）。

```
 **Text**                   **Value**
 blank space            blank space
 Dog                    6
 Cat                    7 
```

我这样存储下拉列表值

```
 mycommand.Parameters.AddWithValue("@ANIMAL", SqlDbType.Char).Value = ddlAnimals.SelectedItem.Text; 
```

我这样检索下拉列表值

```
 ddlAnimals.SelectedItem.Value = mySqlDataReader[1].ToString(); 
```

我遇到的问题是，尽管我的下拉列表填充了正确的文本（在我检索到它之后），但它复制了列表中的文本，并且数据库中的文本没有与之关联的值。如果我返回 Dog，则没有值 6。单击后我的下拉列表如下所示：

```
 Dog (Currently Selected upon Click)
   Dog
   Cat 
```

如果我选择其他 Dog 或 Cat 值，我会保留我的 6 和 7。但原来的“Dog”没有与文本关联的值。我到底做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:49:23.370

在加载下拉列表之前清除项目，然后重新加载它。像这样：

```
ddlAnimals.Items.Clear(); 
```

用于`ddlAnimals.SelectedValue`传递这样的参数：

```
mycommand.Parameters.AddWithValue("@ANIMAL", SqlDbType.Char).Value = ddlAnimals.SelectedValue; 
```

# jquery - 从 ajax 响应创建分组 div 的变量

> ID：16157524
> 
> 赞同：0
> 
> 时间：2013-04-22T22:03:42.507
> 
> 标签：jquery, ajax, find

好吧，这让我很困惑。

我正在对 get_post.php 页面进行 ajax 调用。在该页面上，我正在从各种数组创建 html。如果我要查看这个 get_post.php 页面的源代码，我只会看到基本的 html，没有样式。

所以在我的 ajax 响应中，我得到的只是 html，这正是我所需要的。现在到了我遇到问题的地方。

在 get_post.php 页面上，我有各种 div。

```
<div class="pictures">this div has inner elements</div>
<div class="text">this div has inner elements</div>
<div class="video">this div has inner elements</div> 
```

我将拥有许多每种类型的 div。我可以有 10 个带有班级图片的 div，10 个带有班级视频和 200 个带有文字的 div。这些 div 中的每一个都是内部内容的包装器。但是每个都根据其内容进行了风格化。

我的计划是，当 ajax 成功将所有 div 类型存储到变量时。

```
var pictures = <div class="pictures">this div has inner elements</div><div class="pictures">this div has inner elements</div><div class="pictures">this div has inner elements</div> etc etc

var text = <div class="text">this div has inner elements</div><div class="text">this div has inner elements</div><div class="text">this div has inner elements</div> etc etc

var videos = <div class="video">this div has inner elements</div><div class="video">this div has inner elements</div><div class="video">this div has inner elements</div> etc etc 
```

我需要一个变量中的所有 div，因此当单击时我可以将它们附加到列表中。

```
$('.textLink').click(function() {
$(html).append(text);
}); 
```

这会将文本的所有 div 附加到末尾。

我遇到的麻烦是设置所有 div 及其内部内容的这些变量。我怎样才能做到这一点？

这是我的ajax

```
$.ajax({
    type: 'GET',
    url: 'interactions/get_posts.php',
    dataType: 'json',
    async: true,
    cache: false,
    success: function(results) {
        var data = results.responseText;
        var pictures = ????
        var text = ????
        var videos = ????

    },
    error: function(results) {

    }
}); 
```

以及我的 ajax 响应可能是什么样子

```
 <div class="pictures">this div has inner elements</div>
<div class="text">this div has inner elements</div>
<div class="pictures">this div has inner elements</div>
<div class="video">this div has inner elements</div>
<div class="video">this div has inner elements</div>
<div class="pictures">this div has inner elements</div>
<div class="video">this div has inner elements</div>
<div class="pictures">this div has inner elements</div>
<div class="text">this div has inner elements</div>
<div class="pictures">this div has inner elements</div>
<div class="video">this div has inner elements</div>
<div class="pictures">this div has inner elements</div>
<div class="text">this div has inner elements</div>
<div class="text">this div has inner elements</div>
<div class="text">this div has inner elements</div> 
```

我觉得这很容易做到，但是我一直在循环中走了很长时间，我被卡住了......

# java - 使用 JButtons 作为选项卡

> ID：16157525
> 
> 赞同：0
> 
> 时间：2013-04-22T22:03:42.707
> 
> 标签：java, swing, jbutton, jtextarea, jtabbedpane

我可以使用 JButtons 作为选项卡吗？由于`JTabbedPane`不能在多个选项卡中保存相同的组件，因此 JButton 是否可以成为选项卡？我知道它看起来像 tiDE([网站](http://tide.olympe.in/)) 使用 JButtons 作为选项卡。我该怎么做？

我可以做这样的东西

```
JButton newTab = new JButton("New Tab");
newTab.addActionListener(
  new ActionListener() {
     public void actionPerformed(ActionEvent evt) {
        JButton tab = new JButton("Tab 1");
        JToolBar.add(tab) 
        tab.addActionListener(
          new ActionListener() {
             public void actionPerformed(ActionEvent e) {
                makeTextAreaTab();
             }
          } 
       );
     }
  }
); 
```

但是，我将如何制作该方法`makeTextAreaTab()`？它必须与我的其他编辑器 (JTextArea) 具有相同的组件，并且具有与 JTabbedPane 相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:26:41.973

你在评论中说：

> 我希望能够让按钮提供选项卡的功能。单击一个按钮，它移动到一个编辑器。单击另一个按钮，它会移动到另一个编辑器。

考虑为此使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，您的 JButton（或者更好的 JComboBox）告诉使用 CardLayout 的容器要显示哪个“卡片”（哪个组件 - 这里是 JScrollPane/JTextArea 组合）。

# javascript - 加载页面时触发代码不起作用

> ID：16157527
> 
> 赞同：0
> 
> 时间：2013-04-22T22:03:44.440
> 
> 标签：javascript, jquery, onload

我将此代码绑定到一个按钮，单击该按钮时会执行代码以隐藏表格行：

```
<script>
       $(function hideinstr() {
           $('tr.parent td').on("click", "input.instr", function () {
             var idOfParent = $(this).parents('tr').attr('id');
             $('tr.child-' + idOfParent).toggle('slow');
           });
       });
</script> 
```

我希望在页面加载时默认执行此代码，并让用户在想要显示表格行时单击按钮。当“点击”内置在此代码中时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:10:25.797

您的解决方案永远不会执行该功能`hideinstr()`。此外，[`$(document).ready`](http://api.jquery.com/ready/)如果您的代码在`<head>`. 添加额外的括号以执行函数，或删除周围的函数（函数 hideinstr）。

```
<script>
   $(document).ready(function hideinstr() {
       $('tr.parent td').on("click", "input.instr", function () {
         var idOfParent = $(this).parents('tr').attr('id');
         $('tr.child-' + idOfParent).toggle('slow');
       });
   }());
</script> 
```

或者

```
<script>
   $(document).ready(
       $('tr.parent td').on("click", "input.instr", function () {
         var idOfParent = $(this).parents('tr').attr('id');
         $('tr.child-' + idOfParent).toggle('slow');
       });
   );
</script> 
```

要直接执行事件脚本，请使用`$('tr.parent td').click();`.

# java - 如何在类之间传递对象

> ID：16157529
> 
> 赞同：0
> 
> 时间：2013-04-22T22:03:49.937
> 
> 标签：java, selenium

我试图通过将 Selenium 脚本分成三个类（Grid、Browser 和 testCase）来封装它。我能够打开浏览器，但我似乎缺少 testCase 类插入其命令的连接。

网格.java

```
package com.autotrader.grid;

import org.junit.After;
import org.junit.Test;

public class Grid {
    Browser browser = new Browser();
    TestCase testCase = new TestCase();

    public Grid() {
        browser.setUp("http://pbskids.org");
    }

    @Test
    public void main() {
        testCase.runCase();
    }

    @After
    public void tearDown() throws Exception {
        browser.stop();
    }
} 
```

浏览器.java

```
package com.autotrader.grid;

import com.thoughtworks.selenium.Selenium;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebDriverBackedSelenium;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.remote.DesiredCapabilities;

import java.util.concurrent.TimeUnit;

public class Browser {

    private String baseUrl;
    private String driverNamespace;
    private String driverLocation;

    private DesiredCapabilities capabilities;
    private WebDriver driver;
    public Selenium selenium;

    // constructor
    public Browser() {

    }

    public DesiredCapabilities getCapabilities() {
        return this.capabilities;
    }

    public String getDriverLocation() {
        return this.driverLocation;
    }

    public String getDriverNamespace() {
        return this.driverNamespace;
    }

    public Selenium getSelenium(){
        return selenium;
    }

    public void open (String url) {
        this.selenium.open(url);
    }

    public void setBaseUrl(String url) {
        this.baseUrl = url;
    }

    public void setCapabilities() {
        this.capabilities = DesiredCapabilities.firefox();
        this.driver = new FirefoxDriver(capabilities);
    }

    public void setDriverLocation(String location) {
        this.driverLocation = location;
    }

    public void setDriverNamespace(String namespace) {
        this.driverNamespace = namespace;
    }

    public void setSpeed(String speed){
        this.selenium.setSpeed(speed);
    }

    public void setUp(String url){
        setDriverNamespace("webdriver.firefox.driver");
        setDriverLocation(System.getenv("ProgramFiles(x86)") + "\\Mozilla Firefox\\firefox.exe");
        System.setProperty(driverNamespace,driverLocation);

        setCapabilities();
        setBaseUrl(url);

        this.selenium = new WebDriverBackedSelenium(driver, url);
        this.driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    public void stop(){
        this.selenium.stop();
    }
} 
```

测试用例.java

```
package com.autotrader.grid;

import com.thoughtworks.selenium.Selenium;

public class TestCase {

    Browser browser = new Browser();
    Selenium selenium;

    // constructor
    public TestCase(){
        selenium = browser.getSelenium();
    }

    public void runCase(){
        selenium.open("/privacy/termsofuse.html?campaign=fkhp_tou");
        selenium.setSpeed("1000");
    }
} 
```

所以; 驱动程序已设置，然后我使用 Selenium 对象（在 Browser.java 中）打开，但是当我尝试与 Selenium 对象（在 TestCase.java 中）进行交互时，它没有选择它。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:15:39.587

代替：

```
public class Grid {
    Browser browser = new Browser();
    TestCase testCase = new TestCase();

    public Grid() {
    ... 
```

尝试：

```
public class Grid {
    Browser browser = new Browser();
    TestCase testCase = new TestCase(browser); // <-- this line changed

    public Grid() {
    ... 
```

在这里：

```
public class TestCase {

    Browser browser = new Browser();
    Selenium selenium;

    // constructor
    public TestCase(){
        selenium = browser.getSelenium();
    }
    ... 
```

这样做：

```
public class TestCase {

    Browser browser = new Browser();             // <-- this line changed
    Selenium selenium;

    // constructor
    public TestCase(Browser browser){            // <-- this line changed
        this.browser = browser;                  // <-- this line was added
        selenium = browser.getSelenium();
    }
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:23:52.193

`setUp(String url)`除了浏览器的方法外，我没有看到您曾经初始化过 Selenium 对象。并且这里也没有调用该方法。

您还公开了浏览器的 Selenium 对象，因此您无需在 TestCase 中声明另一个由访问器方法分配的 Selenium 对象——您只需从 TestCase 的 Browser 对象中引用它即可。

# php - Doctrine 和 MySQL 多对多清除子

> ID：16157534
> 
> 赞同：0
> 
> 时间：2013-04-22T22:04:15.623
> 
> 标签：php, mysql, sql, doctrine-orm

我对多对多关系有一些严重的问题。在我的场景中， a`Candidate`可以连接很多`Projects`并且`Project`可能有很多`Candidates`.

```
CREATE TABLE `CANDIDATE` (    
  `ID` INT NOT NULL AUTO_INCREMENT ,     
  PRIMARY KEY (`ID`) )ENGINE = InnoDB;

CREATE `PROJECT` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  PRIMARY KEY (`ID`)ENGINE = InnoDB;

CREATE TABLE `PROJECT_CANDIDATE` (
  `CANDIDATE_ID` INT NULL ,
  `PROJECT_ID` INT NULL ,

  CONSTRAINT `FK_PROJECT_CANDIDATE`
    FOREIGN KEY (`CANDIDATE_ID` )
    REFERENCES `CANDIDATE` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)

  CONSTRAINT `FK_CANDIDATE_PROJECT`
    FOREIGN KEY (`PROJECT_ID` )
    REFERENCES `PROJECT` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)ENGINE = InnoDB; 
```

教义映射如下所示：

```
class Project
{
    //.... other fields

    /**
     * @var \Doctrine\Common\Collections\Collection
     *
     * @ORM\ManyToMany(targetEntity="Candidate", mappedBy="projects", fetch="LAZY",cascade={"persist","merge"},orphanRemoval=true)
     */
    private $candidates;
}

class Candidate
{
        //.... other fields
    /**
     * @var \Doctrine\Common\Collections\Collection
     *
     * @ORM\ManyToMany(targetEntity="Project", inversedBy="candidates", fetch="LAZY",cascade={"persist","merge"},orphanRemoval=true)
     * @ORM\JoinTable(name="project_candidate",
     *   joinColumns={
     * @ORM\JoinColumn(name="CANDIDATE_ID", referencedColumnName="ID")
     *   },
     *   inverseJoinColumns={
     * @ORM\JoinColumn(name="PROJECT_ID", referencedColumnName="ID")
     *   }
     * )
     */
    private $projects;
} 
```

我的问题是，为什么从这样的项目中删除候选人时：

```
 //get $project with EntityManager
 $project->candidates->clear(); 
```

表中的条目`Candidates`也被删除，即使我有`ON UPDATE/DELETE NO ACTION' for FK in`PROJECT_CANDIDATE`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T15:13:21.823

我相信这是因为`orphanRemoval=true`ManyToMany 注释声明中的选项。

请参阅 Doctrine 2 文档的适当[部分](http://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html#orphan-removal "教义 2 文档 - 孤儿移除")。

# javascript - 如何显示部分容器

> ID：16157536
> 
> 赞同：0
> 
> 时间：2013-04-22T22:04:23.647
> 
> 标签：javascript, css, zurb-foundation

我是 Foundation 4 的新手，目前正在尝试执行以下操作：

我正在使用[section-container Horizo​​ntal-nav](http://foundation.zurb.com/docs/components/section.html)并且想知道是否有人知道默认情况下让 section 容器首先显示其内容而不是隐藏它直到被点击的配置？因此，当页面加载时，该部分将首先显示，直到用户单击“第 1 部分”。

```
 <div class="section-container horizontal-nav" data-section="horizontal-nav">
 <section>
<p class="title" data-section-title>
    <a href="#">Section 1 </a>
</p>
<div class="content" data-section-content>
  <ul class="side-nav">
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li class="divider"></li>
    <li><a href="#">Link 1</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:17:13.703

> The section is placed as a horizontal nav-bar and I'd like for it to be shown when the page loads as if the user has already clicked on it.

You can achieve this by giving you menu items an `id` and open that menu in `jquery`.

```
<a href="#" id="menu1">Section 1 </a> 
```

then add this to the script section of your page:

```
$(function () {
    $("#menu1").click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:25:35.333

尝试将 active 添加到类属性中？

```
<div class="content active" data-section-content> 
```

# html - 无法在 IE 10 中删除 HTML 元素

> ID：16157541
> 
> 赞同：0
> 
> 时间：2013-04-22T22:04:53.853
> 
> 标签：html, drag-and-drop, internet-explorer-10

我正在实现一个具有一些拖放组织功能的文档管理系统。

这个[w3schools](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_draganddrop)的拖放示例在 IE10 中运行良好。

```
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div> 
```

但是，当我有非常相似的代码时，当我将拖动的对象悬停在`div`要放入的对象上时，我会看到一个交叉的红色圆圈：

```
<div class="folderHeader" ondragover="allowDrop(event)" ondrop="drop(event)">&nbsp;</div> 
```

我创建了一个有代表性的[JS Fiddle](http://jsfiddle.net/ehulburd/D4fwD/)。请注意，该`allowDrop`函数不会`folderHeader`在 IE 中调用（只是其中的按钮元素）。`folderHeader`或者，在 Chrome 和 FF 中 对整个 div 调用该函数。

请注意：我知道小提琴中的功能没有任何用处。我只是希望他们被正确地调用。

有人对我可以从哪里开始解决这个问题有建议吗？

# excel - VBA 错误 1004。方法“对象范围”_Global 失败

> ID：16157543
> 
> 赞同：2
> 
> 时间：2013-04-22T22:04:57.203
> 
> 标签：excel, vba

我已经尝试在存储库中搜索上述问题的解决方案，但我的 VBA 基础很简陋，我无法找到答案。任何指导将不胜感激。

运行下面的代码时，会在以下行出错：

```
PartNumber = Range("E" & myrow).Value 
```

代码是运行时错误“1004”：方法“对象范围”_Global 失败。

```
Dim objDrv      As Object
Dim strMsg      As String

For Each objDrv In CreateObject("Scripting.FileSystemObject").drives
    Select Case objDrv.DriveType
        Case 0: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": Unknown"
        Case 1: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": Removable Drive"
        Case 2: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": Hard Disk Drive"
        Case 3: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": Network Drive"
        'Case 4: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": CDROM Drive"
        Case 5: strMsg = strMsg & vbNewLine & objDrv.driveletter & ": RAM Disk Drive"
    End Select
Next

Set objDrv = Nothing
'MsgBox strMsg, vbInformation

Dim sdcard As String

sdcard = InputBox( _
"Confirm which drive you wnat to create the romdata directory in." & vbNewLine & vbNewLine & "Drives Found:" _
& strMsg & vbNewLine, _
"Choose SD Card Letter.", _
"Type your file name here")
If Len(sdcard) = 1 Then
MsgBox "You have selcted the " & sdcard & " drive."
        ElseIf Len(sdcard) >= 2 Then
    MsgBox " Too many characters"
    ElseIf Len(sdcard) <= 0 Then
End If

Dim myLoop As Integer

For myLoop = 7 To 9000

    If Len(Range("I" & myLoop).Value) > 0 Then

Dim aTemp As String
Dim bTemp As String
Dim dTemp As String
Dim eTemp As String
Dim subdir As String
Dim PartNumber As String
Dim otemp As String
Dim ptemp As String

aTemp = sdcard & Chr(58) & "\romdata\"
a1temp = sdcard & Chr(58) & "\romdata"
bTemp = strMsg
PartNumber = Range("E" & myrow).Value
otemp = PartNumber & ".fwu"
ptemp = "\" & PartNumber
dTemp = ActiveWorkbook.pATH
eTemp = "\Firmware files"
subdir = "\Firmware Files\" & PartNumber & "\" & otemp

MsgBox "The full path to this file is " & dTemp & "\" & PartNumber

If dir(dTemp & subdir) = "" Then
MsgBox "The file you have selected, (" & PartNumber & ") will not be copied." & vbNewLine & _
"Please check the file is suitable for uploading to the device using an SD card." & vbNewLine & _
"(It should have a .fwu extension.)"
Exit Sub
End If

MsgBox "The file " & otemp & " is being copied to " & aTemp

 If Len(dir(aTemp, vbDirectory)) = 0 Then
MkDir a1temp

End If

FileCopy dTemp & subdir, aTemp & otemp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:10:15.547

`myrow`从未在您发布的片段中定义。在使用它之前定义它。

# javascript - 表单提交后替换默认占位符

> ID：16157547
> 
> 赞同：0
> 
> 时间：2013-04-22T22:05:31.733
> 
> 标签：javascript, replace, default, placeholder

如何用提交的值替换表单中的默认占位符（使用 JQuery 或 JavaScript）？谢谢！

这是一个示例代码：

```
<form name="" id="RegForm" method="post" action="">
<table cellpadding="0" cellspacing="0" width="260" align="center">
    <tr>
        <td align="center" colspan="2" height="45" valign="middle"><input type="text" name="username" id="username" class="text" placeholder="Your Username here" style="background:url(img/bg_text.png) no-repeat;" /></td>
    </tr>
    <tr>
        <td align="left" width="120" height="50" valign="middle"><input type="image" id="submitbtn" src="img/but_register.png" class="submit" onclick="checkPreReg()"/></td>
    </tr>
</table> 
```

Javascript：

```
<script>
   function checkPreReg() { 
    var form = $("#RegForm");
    var u = $("#username", form).val();
    $('#username',form).attr('placeholder',u);
}
</script> 
```

它根本不起作用。我尝试了其他脚本，但是在新的占位符短暂出现后，该值又回到了默认的占位符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:23:59.633

我想说这个问题可能需要一些澄清，但我会试一试。

如果你的意思是：

```
<input type="text" placeholder="default_placeholder" /> 
```

然后我会尝试：

```
$(document).ready(function(){
  $('#FORM').submit(function(){
    $('#INPUT_ID').attr('placeholder','new text here');
  });
}); 
```

# java - 应用程序错误的android代码

> ID：16157556
> 
> 赞同：-3
> 
> 时间：2013-04-22T22:06:05.313
> 
> 标签：java, android

最后一行和第 4 行“EditText numTxt;” 包含错误但我似乎无法解决它们，它说缺少一个}，但是当我输入这些或其他类似的东西时它没有解决。不知道这里有什么问题，但我正在关注一个教程，这正是代码的样子

```
 public class SecondScreen extends Activity {
Button sendSMS;
EditText msgTxt;
EditText numTxt;

@Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondscreen);

    TextView SecondScreenText = (TextView) findViewById(R.id.SecondScreenText);

    Intent i = getIntent();
    // Receiving the Data
    String value = i.getStringExtra("value");

    // Displaying Received data
    SecondScreenText.setText(value);

    sendSMS = (Button) findViewById(R.id.sendsms);
    msgTxt = (EditText) findViewById(R.id.message);
    numTxt = (EditText) findViewById(R.id.number);
    sendSMS.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String myMsg = msgTxt.getText().toString();
            String theNumber = numTxt.getText().toString();
            sendMsg(theNumber, myMsg);

    Button next = (Button) findViewById(R.id.Button02);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish();
        }

    });
        }

protected void sendMsg(String theNumber, String myMsg) {
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(theNumber, null, myMsg, null, null);
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:12:48.243

只需使用此语句完成来结束您的代码，这意味着：

```
protected void sendMsg(String theNumber, String myMsg) {
   SmsManager sms = SmsManager.getDefault();
   sms.sendTextMessage(theNumber, null, myMsg, null, null);}
                  });}} 
```

希望能帮到你。

# r - 使用网格时如何在 R 绘图轴标签中停止上标

> ID：16157559
> 
> 赞同：3
> 
> 时间：2013-04-22T22:06:13.863
> 
> 标签：r, plotmath

我使用“网格”将我在 ggplot 中制作的一些图放在一起，然后使用“grid.text”为这些图提供相同的 y 轴标签。我最终想出了如何在其中获得-2的上标，但我不希望这两个后面的括号被上标。这是迄今为止我得到的最好的台词，但似乎无论我做什么，“^”之后的所有内容都会被抬起。

```
grid.text((expression(paste("Biomass (g m"^"-2*)"))), rot = 90, vjust = -20.4) 
```

到目前为止，类似的帖子很有帮助，但我认为“grid.text”与我读过的其他所有内容都不一样。

该图如下所示：[![](https://i.imgur.com/pUZKqMM.png "由 imgur.com 主办")](https://imgur.com/pUZKqMM)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:38:06.823

可以删除粘贴（和引号）。在这种情况下，它们是不需要的（在许多情况下，它们只是妨碍了经济表达）。在本机绘图形式中使用“（”的一个优点是大小可能更大以适应指数和下标的可能性。

```
expression( Biomass~(g%.%m^-2) ) 
```

我投入了更多的数学`cdot`，但你可以恢复到 g 和 m 之间的空间；

```
expression( Biomass~(g~m^-2) ) 
```

要查看“（”和“）”大小的细微差别，您可以尝试以下两个版本：

```
grid.text(expression( Biomass~(g%.%m[3]^-2) ), rot = 90, vjust = -20.4)
grid.text(expression( "Biomass~(g"%.%m[3]^-2*")" ), rot = 90, vjust = -20.4) 
```

plotmath 版本大于字符版本。

# antlr - 改进句法谓词错误消息？

> ID：16157562
> 
> 赞同：0
> 
> 时间：2013-04-22T22:06:16.523
> 
> 标签：antlr

我正在尝试改进 antlr 给出的错误消息，并注意到语法谓词似乎是错误消息的根源。

这是我目前正在研究的。这是语法结构的示例。抱歉，我无法提供实际的语法。希望这能说明这一点。

```
defs
:   (a) => a | b
;

a
:   A B c
;

//b is actually much further down the chain and due to ordering can't be moved up.
b
:   A c
; 
```

问题是，例如，如果您有标记“AB D”。您收到的错误消息来自“b”规则。我希望错误消息来自“a”规则。意思是如果“A B”匹配，那么如果“c”不匹配，我想要一个错误。

我想也许你可以这样做

```
a
:   (A B) => A B c | {EmitErrorMessage("error");}
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:38:42.200

您应该放宽句法谓词 in`defs`而不是在`a`.

```
defs
    :   (A B) => a
    |   b
    ; 
```

这将导致解析器选择第一个备选方案并`a`仅根据两个符号输入规则`A B`。

# python - 重新加载一个 django 模型来处理单元测试中的@override_settings

> ID：16157566
> 
> 赞同：1
> 
> 时间：2013-04-22T22:06:49.777
> 
> 标签：python, django, unit-testing

以下两个测试之一注定要失败，因为 @override_settings(....) 只在测试中执行一次。数据库被倒回以保持一致，但模型不会根据设置重新配置。所以如果默认设置为True，第二个testCaseFalse会失败，如果默认设置为False，testCaseTrue会失败。

我如何在以下代码中强制重新加载 Patient 模型，以便两个单元测试用例都可以工作。我希望这是我只需要在一个地方做的事情，而不是下面的 2 种注释掉的可能性，应该是某种干燥的方式并且仍然可以完成这项工作。

```
class Patient(models.Model):
    x = models.IntegerField(null=True, blank=not settings.REQUIRE_X_FOR_PATIENT)

class PatientForm(forms.ModelForm):
    #x = forms.CharField(required=settings.REQUIRE_X_FOR_PATIENT)  Don't want to have to do this
    class Meta:
        model = Patient

    #def __init__(self, *args, **kwargs):                   #Don't want to have to do this either
        #super(PatientForm, self).__init__(*args, **kwargs)
        #self.fields['x'].required = settings.REQUIRE_X_FOR_PATIENT

@override_settings(REQUIRE_X_FOR_PATIENT=True)
def testCaseTrue...
    form = PatientForm()
    self.assertTrue(form.fields['x'].required, "X should be required")

@override_settings(REQUIRE_X_FOR_PATIENT=False)
def testCaseFalse...
    form = PatientForm()
    self.assertTrue(form.fields['x'].required, "X should NOT be required") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:41:14.623

我只会使用表单中的设置。它似乎与我无关的模型。事实上，[文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.blank)中指出空白选项仅用于验证：

> 请注意，这与 null 不同。null 纯粹与数据库相关，而空白与验证相关。如果一个字段有空白=真，表单验证将允许输入一个空值。如果某个字段的空白=False，则该字段将是必需的。

```
class Patient(models.Model):
    x = models.CharField(max_length...., blank=True)

class PatientForm(forms.ModelForm):
    x = forms.CharField(required=settings.REQUIRE_X_FOR_PATIENT)  
    class Meta:
        model = Patient 
```

如果您仍然决定保留模型中的设置，您可以查看**Chad Braun-Duin**对此[问题](https://stackoverflow.com/questions/890924/how-do-you-reload-a-django-model-module-using-the-interactive-interpreter-via-m)的回答。在我看来，仅仅进行一些测试是不值得的，它可能会破坏测试运行环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T19:17:56.667

最后，我将逻辑放入模型中，然后根据配置进行不同的测试。于是测试就认识了设定，测试了正确的路径。不理想，但由于应用程序缓存，我发现无法重新加载模型。

我还在模型清理方法中添加了验证，如果配置需要它会引发验证错误。

# django - Django 测量对象 - 语言环境信息

> ID：16157567
> 
> 赞同：2
> 
> 时间：2013-04-22T22:06:50.950
> 
> 标签：django, internationalization, django-i18n

Django 有一些很好的[测量助手](https://docs.djangoproject.com/en/dev/ref/contrib/gis/measure/)，但我不知道它们是如何与它的[i18n 和 l10n 基础设施](https://docs.djangoproject.com/en/dev/topics/i18n/)联系在一起的。有什么方法可以知道用户的首选单位是什么（例如英里与公里）？使用里程的国家或多或少是众所周知的，所以我可以硬编码它们，但这似乎非常非 Pythonic。推荐的方法是什么？此外，是否有一个习惯用法用于将距离存储在数据库中，然后在用户的相关区域设置中显示它们？

# ruby-on-rails - Rails 在 URL 中隐藏 #anchor 标记

> ID：16157571
> 
> 赞同：2
> 
> 时间：2013-04-22T22:07:09.357
> 
> 标签：ruby-on-rails, url, anchor

我正在使用 JavaScript 导航到主页上的锚点。在主页中，当我单击锚链接时，url 保持不变：localhost/（使用 javascript ScrollTo），但是当我尝试从单独的页面链接到该锚标记时，它会在 url 中显示锚标记。本地主机/#anchor。

如何屏蔽 url 以不显示锚标记？

```
<li><%= link_to "Anchor", root_path(:anchor => 'anchor') %></li> 
```

jQuery：

```
$('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
        || location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
           if (target.length) {
             $('html,body').animate({
                 scrollTop: target.offset().top
            }, 1000);
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T21:53:46.937

当您单击主页上的锚点时，您实际上并没有向 Rails 提交请求，您只是在执行一个单击处理程序。但是，当您来自另一个页面时，您***正在***向 Rails 提交请求，而#fragment 是任何人都知道要滚动到页面上的哪个位置的唯一方法。

最好的办法是在加载页面时检测 JS 中的#fragment，滚动到正确的位置，然后使用

```
history.replaceState({}, '', window.location.href.substring(0, window.location.href.indexOf('#'))) 
```

假设您有一个支持`replaceState`. 如果您想对旧版浏览器友好，可以使用[History.js 。](http://balupton.github.io/history.js/demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T21:54:34.917

你可以做`window.location.hash.replace('#', '');`

# javascript - 仅输入中的数字

> ID：16157576
> 
> 赞同：0
> 
> 时间：2013-04-22T22:07:18.130
> 
> 标签：javascript, jquery

我目前有一个片段，只允许在输入中输入数字：

```
$('input').bind('keypress', function(event) { 
    var charCode = event.which;
    var keyChar = String.fromCharCode(charCode); 
    return /[0-9]/.test(keyChar); 
}); 
```

**jsFiddle：http:** [//jsfiddle.net/wgsPr/](http://jsfiddle.net/wgsPr/)

如何调整它以防止输入大于 500 的数字？

例如，如果用户键入`50`，然后键入`1`after，则不会显示 1。但是，如果用户键入`0`after，则会显示`500`。如果用户尝试键入`968`它也不会显示`8`，它只会显示`96`。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:09:41.450

你真的不应该使用这样的方法。这工作得更好：

```
<input type="number" min="0" max="500" /> 
```

但是，如果您坚持，请使用现有代码并将该`return`行替换为：

```
return /\d/.test(keyChar) && this.value <= 500; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:18:43.533

```
if ($(this).val() > 500) {
    $(this).val($(this).val().substr(0, $(this).val().length - 1));
    return false;
} 
```

我继续尝试自己解决这个问题，这很有效。基本上，它会检查该值并在使整个输入值大于 的情况下删除最后一个字符`500`。请让我知道是否应该修改任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:22:23.613

该行将是

```
return /\d/.test(keyChar) && parseInt(this.value+keyChar, 10) <= 500; 
```

（[演示](http://jsfiddle.net/wgsPr/2/)）

但是，我仍然建议不要挂钩和防止`keypress`事件的默认值 -如果输入的值无效，则执行事件并显示错误消息`keyup`。或者使用具有 min 和 max 属性`change`的 HTML5 。`<input type="number" />`

# jquery - Fancybox 弹出，在代码中找不到错误

> ID：16157580
> 
> 赞同：0
> 
> 时间：2013-04-22T22:07:27.833
> 
> 标签：jquery, html, fancybox, vimeo

试图为我的 vimeo 视频获取弹出式灯箱。我已经尝试了大约 6 种不同的类型，但似乎无法让它们工作。任何人都可以在灯箱的代码中看到问题。我正在链接到实际的 vimeo 页面，而不是它只是在同一页面上弹出

这是fancybox的代码，其余的是完整代码：

```
<div id="video"><a class="fancybox" rel="group" href="https://vimeo.com/63197306"><img src="Images/video_pic.png" name="video_pic" width="638" height="391" id="video_pic"></a></div>  

<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Motivational Productions</title>
<link href="main.css" rel="stylesheet" type="text/css">
<script tpe="text/javascript" src= src="FancyBox/lib/jquery-1.9.0.min.js"></script>
<link href="FancyBox/jquery.fancybox.css" rel="stylesheet" type="text/css">
</head><body>
<div id="content_wrap">
    <div id="header">
        <div id="logo_drop"><img src="Images/opaque_image-01-01.png" width="195" height="150"></div>
        <div id="logo"><img src="Images/main_logo-01-01.png" width="434" height="140"></div>
<div id="social">
            <div id="twitter_icon"><img src="Images/twitter_icon.png" width="25" height="25"></div>
            <div id="facebook_icon"><a href="https://www.facebook.com/motivationalpro"><img src="Images/facebook_icon.png" width="25" height="25"></a></div>
            <div id="vimeo_icon"><a href="https://vimeo.com/user2662413"><img src="Images/vimeo_icon.png" width="25" height="25"></a></div>
        </div>
        <div id="learn">Learn More About Us»</div>
        <div id="get_in_touch">Get In Touch»</div>
    </div>
  <div id="space"></div>
<div id="content">
        <div id="slider">
            <div id="right_pic"><img src="Images/right_pic.png" width="609" height="342"></div>
          <div id="video"><a class="fancybox" rel="group" href="https://vimeo.com/63197306"><img src="Images/video_pic.png" name="video_pic" width="638" height="391" id="video_pic"></a></div>
          <div id="left_pic"><img src="Images/left_pic.png" width="760" height="439"></div>
</div>
    </div>
<div id="footer">
<div id="footer_wrap">
        <div id="footer_header"><div id="footer_img"><img src="Images/footer_header-01.png" name="footers_img" width="948" height="54" id="footers_img"></div></div>
        <div id="footer_text">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. </div>
        <div id="footer_get_in_touch">Get In Touch»</div>
        <div id="footer_learn_about">Learn More About Us»</div>
        </div>
    </div>
  <div id="space"></div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:37:27.460

您需要为`fancybox.iframe`您的`fancybox`元素添加一个额外的类。此外，您需要将 Vimeo 链接更新为`http://player.vimeo.com/video/63197306?autoplay=1`

更改此块

```
<div id="video">
  <a class="fancybox" rel="group" href="https://vimeo.com/63197306">
    <img src="Images/video_pic.png" name="video_pic" width="638" height="391" id="video_pic">
  </a>
</div> 
```

至

```
<div id="video">
  <a class="fancybox fancybox.iframe" rel="group" href="http://player.vimeo.com/video/63197306?autoplay=1">
    <img src="Images/video_pic.png" name="video_pic" width="638" height="391" id="video_pic">
  </a>
</div> 
```

# jquery - 如果填写了其他表格，则启用下拉菜单

> ID：16157582
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:07:36.677
> 
> 标签：jquery

`enter code here`我有一个包含许多字段的表格。我需要的是默认情况下禁用底部名称为“Shipping Preference”的下拉菜单，直到填写 2 个或更多项目表单字段。所以填写了 2 个文本字段，下拉菜单将是启用。怎么做？我一点想法都没有。任何帮助将不胜感激。另请注意：我对字段和占位符有限制。这是代码：

```
 <SCRIPT> $("#Glass_ASTRO_165WNT").on('change', function() {
       this.value = (!Number(this.value)) ? '' : Math.max(100, Math.min(999999, Number(this.value)));
        });

    //With reference to http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html
    // 1\. Handle placeholders (in non-HTML5 compliant browsers).
    if(!supports_input_placeholder()) {
        $('[placeholder]').focus(function () {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
                input.val('');
                input.removeClass('placeholder');
            }
        }).blur(function () {
            var input = $(this);
            if (input.val() == '' || input.val() == input.attr('placeholder')) {
                input.addClass('placeholder');
                input.val(input.attr('placeholder'));
            }
        }).blur();

        //2\. Prevent placeholder values being submitted to form's action script
        $('[placeholder]').eq(0).closest('form').submit(function () {
            $(this).find('[placeholder]').each(function () {
                var input = $(this);
                if (input.val() == input.attr('placeholder')) {
                    input.val('');
                }

               });
            });
        }
    });</SCRIPT>

    <form name="amada" method="post" action="review.php"onSubmit="return validate.check(this)">

                  <div class="side1">
                  <article>
                        <h2>Silver Name Badges</h2>
                        <p class="subDetails">Min. Qty: 100 pcs <br>
                          Lead Time: 3 Weeks<br>
                        <img src="web-pics/name_badge.png" width="200" height="200" alt="badge" /><br>

                         Quantity:
                    <input type="text" default=min=100 placeholder="none" name="Silver_Name_Badges" id="Silver_Name_Badges" maxlength="10" style="width:50px" tabindex=1  >

                    </p>
                </article>

 <td valign="top"><select name="Ship_Preference" id="Ship_Preference" tabindex=20 >
       <option value="Partial Shipment">Partial Shipment</option>
       <option value="When All Items Ready">Ship When All Items Ready</option>
       </select></td>
 <td valign="top"><select name="Ship_Preference" id="Ship_Preference" tabindex=20 >
       <option value="Partial Shipment">Partial Shipment</option>
       <option value="When All Items Ready">Ship When All Items Ready</option>
       </select></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:00:32.117

一种可能的解决方案是在输入元素的内容发生变化时触发事件。当事件触发时，您可以检查表单中填充的输入元素的数量（或者换句话说，返回非空`value`属性）。像这样：

```
// Listen for 'input' events on all elements (that are not buttons)
// within the form named 'amada'
$("form[name='amada'] input[type!='button']").on("input", function(){
    // Count the number of inputs within this form that are not populated
    if($("form[name='amada"] input[value!=''][type!='button']").length >= 2){
        // If at least 2 populated inputs, enable the "Ship_Preference" select box
        $("select[name='Ship_Preference']").removeAttr("disabled");
    }else{
        // Otherwise, disable it.
        $("select[name='Ship_Preference']").attr("disabled", "disabled);
    }
}) 
```

请注意，`type!="button"`过滤器将从选择中删除按钮。如果这与您的代码无关，则为简单起见将其删除。

另请注意，每当插入一个字符时，“输入”事件（我从[这个答案](https://stackoverflow.com/a/9955724/877472)中偷来的）都会触发，而不是“更改”事件，它只会在输入框失去焦点时出现。我认为这是所需的行为，但是您可以尝试查看自己喜欢的行为。

希望有帮助。

# android - 在 android 的微调器中看不到 setOnItemSelectedListener

> ID：16157583
> 
> 赞同：0
> 
> 时间：2013-04-22T22:07:40.957
> 
> 标签：android, spinner

请您帮我找出以下代码的问题所在！当从微调器中选择的项目没有发生

即：没有看到 spinner.setOnItemSelectedListener 的主体！

代码 ：

```
 package com.example.spinner;

 import java.util.ArrayList;
 import java.util.List; 
 import org.json.JSONArray;
 import org.json.JSONObject;
 import android.os.Bundle;
 import android.app.Activity;
 import android.util.Log; 
 import android.view.View;
   import android.widget.AdapterView;
   import android.widget.ArrayAdapter;
   import android.widget.Spinner;
   import android.widget.Toast;
   import android.widget.AdapterView.OnItemSelectedListener;

   import java.util.HashMap; 
   import org.apache.http.NameValuePair; 
   import org.json.JSONException; 

   import android.annotation.SuppressLint; 
   import android.content.Intent;
   import android.os.AsyncTask;  
   public class MainActivity extends Activity {

        // Creating JSON Parser object
        JSONParser jParser = new JSONParser();

        ArrayList<HashMap<String, String>> productsList;

        // url to get all products list
        private static String url_all_products = "http://10.0.2.2/RPM-connect/get_all_patients.php";

        // JSON Node names
        private static final String TAG_SUCCESS = "success";
        private static final String TAG_DOCTOR = "products";

        private static final String TAG_ID = "id";
        private static final String TAG_F_NAME = "F_name";
        private static final String TAG_S_NAME = "S_name";
        private static final String TAG_L_NAME = "L_name"; 

        // products JSONArray
        JSONArray doctor = null;

        ArrayList<String> spinnerArray ;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            // Hashmap for ListView
            productsList = new ArrayList<HashMap<String, String>>();

            spinnerArray = new ArrayList<String>();

            // Loading products in Background Thread
            new LoadAllProducts().execute();

              Spinner spinner = new Spinner(this);
                              //ArrayAdapter <HashMap<String, String>> spinnerArrayAdapter = new ArrayAdapter<HashMap<String, String>>(

              ArrayAdapter <String> spinnerArrayAdapter = new ArrayAdapter <String >(
                        this, android.R.layout.simple_spinner_item,  spinnerArray );
                spinnerArrayAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

                spinner = (Spinner) findViewById( R.id.spinner1 );
                spinner.setAdapter(spinnerArrayAdapter);
                spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

                    @Override
                    public void onItemSelected(AdapterView<?> arg0,
                            View arg1, int arg2, long arg3) {

                        Toast.makeText(MainActivity.this, "You have selected : "  , 
                                Toast.LENGTH_SHORT).show();
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }

                } );
            }

        // Response from Edit Product Activity
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            // if result code 100
            if (resultCode == 100) { 
                Intent intent = getIntent();
                finish();
                startActivity(intent);
            }

        }

        /**
         * Background Async Task to Load all product by making HTTP Request
         * */
        @SuppressLint("NewApi")
        class LoadAllProducts extends AsyncTask<String, String, String> {

            /**
             * getting All products from url
             * */
            protected String doInBackground(String... args) {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

                // Check your log cat for JSON reponse
                Log.d("All Products: ", json.toString());

                try {
                    // Checking for SUCCESS TAG
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // products found
                        // Getting Array of Products
                        doctor = json.getJSONArray(TAG_DOCTOR);

                        // looping through All Products
                        for (int i = 0; i < doctor.length(); i++) {
                            JSONObject c = doctor.getJSONObject(i);

                            // Storing each json item in variable
                            String ID = c.getString(TAG_ID);
                            String F_name = c.getString(TAG_F_NAME);
                            String S_name = c.getString(TAG_S_NAME);
                            String L_name = c.getString(TAG_L_NAME);

                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            // adding each child node to HashMap key => value
                            map.put(TAG_ID, ID);
                            map.put(TAG_F_NAME, F_name);
                            map.put(TAG_S_NAME, S_name);
                            map.put(TAG_L_NAME, L_name);

                            // adding HashList to ArrayList
                            productsList.add(map);

                            Log.d("Before temp", productsList.toString());

                            spinnerArray.add(F_name + " " +  L_name);
                            // temp[i]=  F_name+" "+L_name ; 
                            Log.d("TT",spinnerArray.get(i) );
                        }

                    } else {
                        // no products found
                        // Launch Add New product Activity
                        Intent i = new Intent(getApplicationContext(),
                                MainActivity.class);
                        // Closing all previous activities
                        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(i);
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
            }

        }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:28:43.540

在设置适配器之前，您`ArrayList`可能不会被填充。在你那里`AsyncTask`实现并调用你的适配器。此外，您创建一个新的然后使用您的 xml 中存在的一个`onPostExecute()``AsyncTask``notifyDataSetChanged()``Spinner`

```
 Spinner spinner = new Spinner(this); 
```

这不是必需的。`Spinner`就这样声明你的

```
public class MainActivity extends Activity {
 Spinner spinner; 
```

然后像你稍后做的那样从 xml 初始化它

```
spinner = (Spinner) findViewById( R.id.spinner1 ); 
```

[notifyDataSetChanged() 文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:26:42.270

完成将项目加载到`SpinnerAdapter`内部后`AsyncTask`，您需要告诉`Adapter`刷新自身以加载新值。

这可以通过调用来完成：`spinnerArrayAdapter.notifyDataSetChanged()`。

因为`AsyncTask`在另一个线程上运行，您将需要实现

```
@Override
public void onPostExecute(String result) {
    spinnerArrayAdapter.notifyDataSetChanged()
} 
```

并调用`spinnerArrayAdapter.notifyDataSetChanged()`它的内部，如上所示。 `onPostExecute`并且`onPreExecute`在主线程上运行，因此它们可以`Views`在 UI 线程上进行更改。

# c# - 如何在 Web Api 中使用 Api 密钥进行使用表单身份验证的服务身份验证

> ID：16157586
> 
> 赞同：7
> 
> 时间：2013-04-22T22:07:49.870
> 
> 标签：c#, http, asp.net-mvc-4, asp.net-web-api

我正在使用 MVC 4 Web Api，我希望在使用我的服务之前对用户进行身份验证。

我已经实现了一个授权消息处理程序，它工作得很好。

```
public class AuthorizationHandler : DelegatingHandler
{
    private readonly AuthenticationService _authenticationService = new AuthenticationService();

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        IEnumerable<string> apiKeyHeaderValues = null;
        if (request.Headers.TryGetValues("X-ApiKey", out apiKeyHeaderValues))
        {
            var apiKeyHeaderValue = apiKeyHeaderValues.First();

            // ... your authentication logic here ...
            var user = _authenticationService.GetUserByKey(new Guid(apiKeyHeaderValue));

            if (user != null)
            {

                var userId = user.Id;

                var userIdClaim = new Claim(ClaimTypes.SerialNumber, userId.ToString());
                var identity = new ClaimsIdentity(new[] { userIdClaim }, "ApiKey");
                var principal = new ClaimsPrincipal(identity);

                Thread.CurrentPrincipal = principal;
            }
        }

        return base.SendAsync(request, cancellationToken);
    }
} 
```

问题是，我使用表单身份验证。

```
[HttpPost]
    public ActionResult Login(UserModel model)
    {
        if (ModelState.IsValid)
        {
            var user = _authenticationService.Login(model);
            if (user != null)
            {
                // Add the api key to the HttpResponse???
            }
            return View(model);
        }

        return View(model);
    } 
```

当我调用我的 api 时：

```
 [Authorize]
public class TestController : ApiController
{
    public string GetLists()
    {
        return "Weee";
    }
} 
```

处理程序找不到 X-ApiKey 标头。

只要用户登录，有没有办法将用户的 api 密钥添加到 http 响应标头并将密钥保留在那里？有没有另一种方法来实现这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T18:12:32.920

我找到了以下文章[http://www.asp.net/web-api/overview/working-with-http/http-cookies](http://www.asp.net/web-api/overview/working-with-http/http-cookies) 使用它我将我的 AuthorizationHandler 配置为使用 cookie：

```
public class AuthorizationHandler : DelegatingHandler
{
    private readonly IAuthenticationService _authenticationService = new AuthenticationService();

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var cookie = request.Headers.GetCookies(Constants.ApiKey).FirstOrDefault();
        if (cookie != null)
        {
            var apiKey = cookie[Constants.ApiKey].Value;
            try
            {
                var guidKey = Guid.Parse(apiKey);

                var user = _authenticationService.GetUserByKey(guidKey);
                if (user != null)
                {

                    var userIdClaim = new Claim(ClaimTypes.Name, apiKey);
                    var identity = new ClaimsIdentity(new[] { userIdClaim }, "ApiKey");
                    var principal = new ClaimsPrincipal(identity);

                    Thread.CurrentPrincipal = principal;

                }
            }
            catch (FormatException)
            {
            }
        }

        return base.SendAsync(request, cancellationToken);
    }
} 
```

我配置了我的登录操作结果：

```
[HttpPost]
    public ActionResult Login(LoginModel model)
    {
        if (ModelState.IsValid)
        {
            var user = _authenticationService.Login(model);
            if (user != null)
            {
                _cookieHelper.SetCookie(user);

                return RedirectToAction("Index", "Home");
            }

            ModelState.AddModelError("", "Incorrect username or password");
            return View(model);
        }

        return View(model);
    } 
```

在其中我使用的是我创建的 CookieHelper。它由一个接口组成：

```
public interface ICookieHelper
{
    void SetCookie(User user);

    void RemoveCookie();

    Guid GetUserId();
} 
```

还有一个实现接口的类：

```
public class CookieHelper : ICookieHelper
{
    private readonly HttpContextBase _httpContext;

    public CookieHelper(HttpContextBase httpContext)
    {
        _httpContext = httpContext;
    }

    public void SetCookie(User user)
    {
        var cookie = new HttpCookie(Constants.ApiKey, user.UserId.ToString())
        {
            Expires = DateTime.UtcNow.AddDays(1)
        };

        _httpContext.Response.Cookies.Add(cookie);
    }

    public void RemoveCookie()
    {
        var cookie = _httpContext.Response.Cookies[Constants.ApiKey];
        if (cookie != null)
        {
            cookie.Expires = DateTime.UtcNow.AddDays(-1);
            _httpContext.Response.Cookies.Add(cookie);
        }
    }

    public Guid GetUserId()
    {
        var cookie = _httpContext.Request.Cookies[Constants.ApiKey];
        if (cookie != null && cookie.Value != null)
        {
            return Guid.Parse(cookie.Value);
        }

        return Guid.Empty;
    }
} 
```

通过这个配置，现在我可以为我的 ApiControllers 使用 Authorize 属性：

```
[Authorize]
public class TestController : ApiController
{
    public string Get()
    {
        return String.Empty;
    }
} 
```

这意味着，如果用户未登录。他无法访问我的 api 并收到 401 错误。此外，我还可以在代码中的任何位置检索用作用户 ID 的 api 密钥，这使得代码非常干净易读。

我不认为使用 cookie 是最好的解决方案，因为某些用户可能在他们的浏览器中禁用了它们，但目前我还没有找到更好的授权方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:12:53.000

从您的代码示例来看，您似乎没有使用 Web 表单。您可能正在使用表单身份验证吗？您是否在服务中使用 Membership Provider 来验证用户凭据？

您可以使用 HttpClient 类，也可以使用它的属性 DefaultRequestHeaders 或来自将调用 API 以设置标头的代码中的 HttpRequestMessage。

这里有一些HttpClient的例子： [http ://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)

# c# - 为不同的 MvvmCross (v3) 平台处理 GoBack 的最佳方法是什么

> ID：16157597
> 
> 赞同：13
> 
> 时间：2013-04-22T22:09:11.997
> 
> 标签：c#, mvvmcross

在 MvvmCross v3 中，我使用`ShowViewModel`导航到不同的页面。在转换为 Mvx 之前，我会使用该`NavigationService.GoBack()`方法返回上一页。优点是不会重新创建页面。

由于该`GoBack`方法是特定于 WP、WInRT、Silverlight 的平台，因此处理返回上一页以使视图模型保持平台独立的最佳方法是什么？

一种解决方案可能是使用`ShowViewModel`传递视图可以看到的一些数据，然后在 WP/WinRT 的情况下，`RemoveBackEntry`从视图调用。但是对于 Mvx，可能有更好的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-23T00:30:27.260

在 MvvmCross v3 中，我们提供了一种特定的机制来允许 ViewModel 向 UI 发送他们想要更改当前呈现的消息。

这种机制是`ChangePresentation(MvxPresentationHint hint)`并且它提供了从`ViewModels`到`Presenter`.

`Presenter`处理这些消息的方式取决于平台和应用程序。

这种消息机制非常通用，将来可能会用于各种事情 - 例如，开发人员可能会提供一些提示，例如更改 UI 布局，突出显示部分 UI，迫使用户专注于某个控制，导致 SIP 显示或隐藏等。

* * *

对于关闭视图模型的情况，我们提供了一个特殊化的`MvxPresentationHint`- `MvxClosePresentationHint`- 和一个基类中的辅助方法`MvxViewModel`：

```
 protected bool Close(IMvxViewModel viewModel)
    {
        return ChangePresentation(new MvxClosePresentationHint(viewModel));
    } 
```

要使用这个 ViewModel 可以调用`Close(this)`

调用此方法时，UI 中的 Presenter 将收到有关该`ChangePresentation`方法的消息：

```
public interface IMvxViewPresenter
{
    void Show(MvxViewModelRequest request);
    void ChangePresentation(MvxPresentationHint hint);
} 
```

对于一般/典型情况 -`ViewModel`正在关闭的视图附加到最顶层的视图`Activity`// ， `Page`MvvmCross`UIViewController`中的默认演示者将能够处理此消息，并且能够`GoBack`在 Windows、`Finish`Android 和在`PopViewController`iOS 中。

但是，如果您的 UI 比这更复杂 - 例如，如果`ViewModel`您想要`Close`实际对应于 a `Tab`、 a `Flyout`、`SplitView`窗格等，或者如果`ViewModel`对应于层次结构中当前最顶层视图以外的其他内容 - 那么您将需要提供一个自定义的 Presenter 实现——并且该实现必须做平台和应用程序特定的逻辑来处理`Close`.

* * *

以上提示是我建议您使用的...

但是，作为**替代方案**：

如果您觉得这种`ChangePresentation(MvxPresentationHint hint)`机制对您的应用程序来说太重/过大了，那么您当然也可以改为使用自定义或`Message`基于机制的机制。

执行此操作的一个示例是 CustomerManagement 示例 - 它在每个平台上提供了一个自定义 IViewModelCloser 实现 - 请参阅：

*   自定义界面 - [https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/Interfaces/IViewModelCloser.cs](https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/Interfaces/IViewModelCloser.cs)
*   BaseViewModel - [https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/ViewModels/BaseViewModel.cs](https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/ViewModels/BaseViewModel.cs)
*   机器人 - [https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Droid/SimpleDroidViewModelCloser.cs](https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Droid/SimpleDroidViewModelCloser.cs)
*   WP - [https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.WindowsPhone/ViewModelCloser.cs](https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.WindowsPhone/ViewModelCloser.cs)
*   触摸 - [https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Touch/CustomerManagementPresenter.cs](https://github.com/slodge/MvvmCross/blob/v3/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement.Touch/CustomerManagementPresenter.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T22:13:29.217

我不完全确定 mvvmcross，但在 MVVM Light 中，通常所做的是创建一个 INavigationService 接口来公开这些方法。

然后，每个平台以特定于平台的方式实现此接口（例如在 WP 中，通过获取对当前帧及其内容的引用）。然后，此平台特定实例可以执行所有正确操作，以确保正确实施导航模式。

然后，您的 ViewModel 可以通过 Dependency Container 获取对 INavigationService 实例的引用。这样，您的 VM 就独立于导航的平台细节。

我还写了一篇关于如何使用接口为平台特定功能公开通用 API 的博客文章：http: [//www.kenneth-truyers.net/2013/02/24/patterns-for-sharing-code-in-windows -phone-and-windows-8-applications/](http://www.kenneth-truyers.net/2013/02/24/patterns-for-sharing-code-in-windows-phone-and-windows-8-applications/)

博客文章中的示例是关于独立存储的，但同样的原则适用于导航（或任何在不同平台上具有不同实现的特性）

# orbeon - 将 Orbeon 用作 REST 服务的最佳方式

> ID：16157601
> 
> 赞同：1
> 
> 时间：2013-04-22T22:09:53.897
> 
> 标签：orbeon, xforms, exist-db

我有一组 XForms 已经在 eXist-db 中运行，它们是由 XQuery 自动生成的。有什么方法可以让我调用 Orbeon 提供的 REST 服务，在单独的 tomcat 服务器上运行，将 XForms 文件转换为可以在 Web 浏览器中显示的 HTML？

换句话说，我想做类似的事情：

```
xquery version "1.0";
...
let $my-xforms-file := local:my-generate-xforms($spec-file)
let $orbeon-rendered-xforms := httpclient:post('http://localhost/tomcat/orbeon/getpost',  $my-xforms-file)
return $html-file 
```

我真正想要的只是 XForms 的呈现转换服务，它使用文档正文中的 XForms 获取 HTTP POST，并返回我可以使用 Web 浏览器呈现的内容。

Orbeon 中是否有一个组件可以做到这一点？我很高兴记录这一点，提供一个 XQuery 模块来支持它并与他人分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:33:19.920

有一个使用 Orbeon 表单运行器的 REST 服务，但它使用 HTTP GET，而不是 HTTP POST。

该服务是作为表单运行器“沙盒”的一部分提供的。这是一个示例：

如果您的 Tomcat 在端口 8081（不是默认端口）上运行并且 eXist 在端口 8080 上运行，那么以下将起作用：

```
http://localhost:8081/orbeon/xforms-sandbox/run?url=http://localhost:8080/exist/apps/grants/orbeon-tests/01-min.xml 
```

沙盒还可以从文件系统中获取数据

您无法从菜单中形成跑步者站立箱。要到达那里，您必须手动将以下 URL 放入浏览器：

```
http://localhost:8081/orbeon/xforms-sandbox/ 
```

# jquery - 将响应从 servlet 发送到 ajax 调用作为对象

> ID：16157602
> 
> 赞同：0
> 
> 时间：2013-04-22T22:09:54.830
> 
> 标签：jquery, jsp, jakarta-ee, servlets

我正在通过以下方式将 servlet 与 jQuery 通信。

**jQuery：**

```
$('.snd').click(function (){
    $.ajax({
        url: '/ProjectName/ServletName?action=test',
        data: {cl1: $('.t11').val()},
        success: function (response){
            $('.t12').val(response);
        }
    }); 
}); 
```

**小服务程序**

```
if (action.compareTo("test") == 0) {
            action = "abc";

            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();

            try {

                out.println("text1");
            } finally {
                out.close();
            }
        } 
```

通过这样做，我得到了结果“text1”

现在，如果不是发送普通文本，而是想向 jQuery 发送一个对象或字符串数​​组作为响应，我需要做什么？

例如

在 servlet 我有以下数组

```
String[] ss= {"n1","n2"}; 
```

在 jQuery 中我想使用

```
$('.t12').val(response[0]); 
```

得到结果“n1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:11:38.970

您不能直接在服务器和浏览器之间发送对象，但是您可以将它们序列化为 JSON 文本格式（这就是 JSON 的发明目的）。 `JSON.serialize()`（或其他语言的等价物）在服务器端和`JSON.parse()`客户端。

如果您在 jQuery ajax 调用中将数据类型指定为 JSON，它将自动为您解析，因此您甚至不必调用`JSON.parse()`.

# actionscript-3 - AS3 SWF 加载外部文件；更改默认位置

> ID：16157603
> 
> 赞同：0
> 
> 时间：2013-04-22T22:10:03.327
> 
> 标签：actionscript-3, file, flash, external, loader

如果我有一个 SWF 和一个 XML 文件位于同一个文件夹中，有没有办法让加载程序使用 SWF 的位置作为其加载外部文件的起点（而不是 SWF 在其上的 HTML 文件）播放）？我们正在复制一组网站，其中一些路径具有唯一的页面代码，但如果 SWF 只在自己的文件夹中查找，它们就可以正常运行。:)

谢谢！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:49:26.110

可以试试这个。

```
var base:String = unescape( LoaderInfo( this.root.loaderInfo ).url ); // url of SWF

// now we need to remove the SWF name from the url
var lastSlash:uint = Math.max( this.base.lastIndexOf( "\\" ), this.base.lastIndexOf( "/" ) );
return( base.substr( 0, lastSlash + 1 ) ); 
```

这将获取 SWF 的 url，遍历它并找到最后一个“\”或“/”以确定 swf 文件名的开始位置，并将基数设置为 SWF 的路径。

然后将所有 relative `URLRequest`s 从

```
var url:URLRequest = new URLRequest( "assets/blah/blah/img.png" ); 
```

至

```
var url:URLRequest = new URLRequest( base + "assets/blah/blah/img.png" ); 
```

这将是我将添加为您的应用程序类的静态属性的内容，以便您只访问一个字符串而不进行任何强制转换或 unicode 转义或任何重复的操作。只需在启动时运行一次并将其作为静态变量抛出，因为它永远不会改变。

（我确实对此进行了测试，并且至少在本地可以正常工作。但是，我看不出它与来自网络的 URL 的行为有何不同的原因）

# c - 为什么在 UNIX bash 脚本中重定向会丢失打印

> ID：16157604
> 
> 赞同：0
> 
> 时间：2013-04-22T22:10:06.333
> 
> 标签：c, bash, unix

我有一个简单的 bash 脚本，它执行一个程序并重定向文件中的每个输入并将 stdout 处的每个输出重定向到一个文件中。

当我在没有标准输出重定向的情况下执行它时，它会以正确的顺序在终端中打印我程序的每个 printf。当我对标准输出进行重定向时，它似乎会丢失其中的一些并造成它们的顺序混乱。

```
#!/bin/bash
./myprog < commands > scriptOUT.txt 
```

其中 myprog 是程序的可执行文件 commands 是一个文件，其中包含该程序执行所需的输入，而 scriptOUT.txt 是要在最后创建的所有标准输出的文件（这根本不会发生）

为什么会这样？有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:11:55.957

你的一些输出是否`stderr`也会达到`stdout`？尝试使用`>&`重定向两者`stdout`，`stderr`看看是否有帮助：

```
#!/bin/bash
./myprog < commands >& scriptOUT.txt 
```

# c++ - Windows 中的静态链接

> ID：16157605
> 
> 赞同：1
> 
> 时间：2013-04-22T22:10:08.577
> 
> 标签：c++, qt, static-linking

我在 C++ 中使用 Qt 创建了一个应用程序，问题是我需要静态链接可执行文件中的依赖项，我真的不知道如何。

我已经执行了以下步骤：

*   在 qmake.conf 中将 -static 标志添加到 QMAKE_LFLAGS
*   重新编译 Qt 源代码
*   在 Qt Creator 中添加了新的编译器 [创建了一个包含我的 qt 版本的工具包并将其添加到项目选项卡中]
*   当我尝试构建我的应用程序，甚至是来自 Qt Creator 的示例时，我收到以下输出：

    18:04:10：项目测试的运行步骤... 18:04:10：开始：“C:\Qt\Qt5.0.2\5.0.2\Src\qtbase\bin\qmake.exe”C:\my \qt\test\test.pro -r -spec win32-g++ "CONFIG+=debug" "CONFIG+=declarative_debug" "CONFIG+=qml_debug" 项目错误：QT 中的未知模块：webkit webkitwidgets widgets gui core 18:04： 10：进程“C:\Qt\Qt5.0.2\5.0.2\Src\qtbase\bin\qmake.exe”以代码3退出。构建/部署项目测试时出错（工具包：静态工具包）执行步骤时qmake' 18:04:10：经过的时间：00:00。

我想我需要使用错误中列出的依赖项重新编译。我在正确的轨道上吗？这是我第一次做静态链接，我会很感激输入。

# javascript - 确定一个词是否是保留的 Javascript 标识符

> ID：16157613
> 
> 赞同：1
> 
> 时间：2013-04-22T22:10:59.660
> 
> 标签：javascript, keyword, reserved-words

在 Javascript 中是否可以确定某个字符串是否是保留的语言关键字，例如`switch`, `if`,`function`等？我想做的是以一种不会破坏浏览器特定扩展的方式转义动态生成的代码中的保留标识符。我想到的唯一想法是`eval`在 try-catch 块中使用并检查语法错误。不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:15:12.440

一种选择是：

```
var reservedWord = false;
try {
  eval('var ' + wordToCheck + ' = 1');
} catch {
  reservedWord = true;
} 
```

唯一的问题是，这将对无效变量名但不是保留字的单词产生误报。

正如评论中所指出的，这可能是一个安全风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:17:25.027

我想你可以使用 eval 来解决它，但这似乎有点像 hack。我会去检查所有保留字。像这样的东西：

```
var reservedWords = [
    'break',
    'case',
    ...
];

function isReservedWord(str) {
    return !!~reservedWords.indexOf(str);
} 
```

以下是所有保留字的列表：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

此外，eval 方法的一个问题是某些浏览器有时允许您使用一些保留字作为标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-29T13:06:19.930

`strict`仅供参考，某些单词仅在模式下引发错误

例如：包裹

```
eval('var package = 1') // No error 
```

```
'use strict'
eval('var package = 1') // throws error 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Wdxqa.png)](https://i.stack.imgur.com/Wdxqa.png)

# google-docs - 返回文本值以查询相邻单元格中的数值？

> ID：16157618
> 
> 赞同：0
> 
> 时间：2013-04-22T22:11:42.907
> 
> 标签：google-docs

我正在尝试使用 Array Forumla 查找第二个工作表，但我不想返回值或 True / False 答案，而是想返回相邻单元格的文本标签。例如，我不想检查这些单元格中是否有值，而是想要 D11 上的标签。

=(数组公式(COUNTIF(D11&E11;"*"&"1")))

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:09:13.313

啊，明白了。

=SORT(ARRAYFORMULA(IF(Numbers!I2:I<6,Numbers!C2:C, "")))

# netlogo - netlogo中的加权有向图

> ID：16157623
> 
> 赞同：2
> 
> 时间：2013-04-22T22:12:04.150
> 
> 标签：netlogo

我想在 netlogo 中创建一个带有权重的有向图。我搜索了文档，但找不到在链接上添加权重的方法。这是我的代码：

```
to setup
  clear-all                       ;; clear everything on canvas
  setup-nodes                     ;; a procedure to set nodes
  setup-edges                     ;; a procedure to set edges
  ask turtles [ set color red]    ;; paint nodes red
  ask links [set color white]     ;; paint edges white
  reset-ticks
end

to setup-nodes
  set-default-shape turtles "circle"
  crt number-of-nodes ;; users give this number from the interface
  [
    ; for visual reasons, we don't put any nodes *too* close to the edges
    setxy (random-xcor * 0.95) (random-ycor * 0.95)
  ]
end

to setup-edges
  while [ count links < num-links ] ;; num-links given by the user from interface
  [
    ask one-of turtles 
    [
      let choice one-of other turtles

      if choice != nobody [ create-link-to choice ]
    ] 
  ]
    ; make the network look a little prettier
    repeat 10
    [
      layout-spring turtles links 0.3 (world-width / (sqrt number-of-nodes)) 1
    ]
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:38:17.780

`links-own [weight]`（在代码选项卡的顶部）添加一个名为`weight`链接的变量。

NetLogo 模型库中的一些模型使用`links-own`：Small Worlds、Team Assembly、Diffusion on a Directed Network、Artificial Neural Net、Link Breeds Example、Network Import Example。

# css - 在本机 css 中不显示优先于媒体特定 css

> ID：16157626
> 
> 赞同：1
> 
> 时间：2013-04-22T22:12:17.947
> 
> 标签：css, media-queries

我是新手，如果术语不太正确，我深表歉意。我正在构建一个具有 4 个样式表的网站：基本（桌面大小并考虑与媒体查询不兼容的旧浏览器）、移动纵向、移动横向、平板电脑。最后 3 个加载了媒体查询。

我有某些显示在 Base 中的 div 容器，但在较小设备的样式表中设置为“display:none”，这很好用。

但是我有一些在 Base 中设置为“display：none”，我想在较小的设备中显示，但是 Base 样式表中的“display：none”优先于较小设备的样式表中的 css。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:21:04.827

所以我假设你在你的html中引用你的css：

```
<link rel="stylesheet" type="text/css" href="base.css">
<link rel="stylesheet" type="text/css" href="other.css">
<link rel="stylesheet" type="text/css" href="another.css"> 
```

在基地你有：

```
#element {
 display: none;
} 
```

在 another.css 你有

```
#element {  display block; } 
```

如果它们被这样引用，那么 another.css 中的 css 将覆盖 base 中的内容。

你可能有

```
body #element {
 display: none;
} 
```

在 base.css 中

并拥有

```
#element {
 display: block
} 
```

由于您的选择器在 base.css 中占主导地位，因此在 another.css 中不起作用。

如果所有其他方法都失败了，一个 hacky 方法是在 css 规则的末尾添加 !important，例如：

```
#element {
 display: block !important;
} 
```

我不喜欢使用 !important 但如果您无法正确获取 css 选择器，这只是一个想法

这都是猜测工作，无需查看您的 css 和 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:21:24.267

在您的移动样式表中粘贴 display:block 或 display:block !important 如果它仍然拒绝。

# c# - 将构造函数参数传递给根对象的依赖项作为 Ninject 中单个解析的一部分

> ID：16157629
> 
> 赞同：2
> 
> 时间：2013-04-22T22:12:37.760
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

我有以下课程（我知道它们设计得不好；我只想表达 Ninject 问题）。

我不知道如何将构造函数参数传递给我的服务（这是一个依赖项，`Utility`它是一个依赖项`MainProgram`）：-

```
class MainProgram
{
    static IKernel kernel;
    static MainProgram mainProgram; 

    Utility Utility;

    static void Main(string[] args)
    {
        kernel = new StandardKernel(new DIModule());

        var constructorArgument1 = new ConstructorArgument("firstArg", args[0]);
        var constructorArgument2 = new ConstructorArgument("secondArg", args[1]);

        mainProgram = kernel.Get<MainProgram>(new IParameter[] { constructorArgument1, constructorArgument2 });
        mainProgram.Utility.ExportToXML();
    }

    public MainProgram(Utility utility)
    {
        this.utility = utility;
    }
}

public class Utility
{
    private IService service;
    public Utility(IService service)
    {
        this.service = service;
    }

    //methods to work with service
}

public class Service : IService 
{
    private readonly string firstArg;
    private readonly string secondArg;

    public Service(string firstArg, string secondArg)
    {
        this.firstArg = firstArg;
        this.secondArg = secondArg;
    }
}

class DIModule : NinjectModule
{
    public override void Load()
    {
        Bind<IService>().To<Service>();
        Bind<Utility>().ToSelf();
        Bind<MainProgram>().ToSelf();
    }
} 
```

失败并显示`kernel.Get<MainProgram>()`以下消息：

> 激活字符串时出错

```
No matching bindings are available, and the type is not self-bindable. 
```

我理解这是因为构造函数参数没有进入 IService。

这甚至是解决我的依赖关系的正确方法吗？我在几个地方读到如果你使用 kernel.Get() “你没有使用 DI”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:57:24.100

See ["inherited constructor arguments" in this blog post from @Remo Gloor](http://www.planetgeek.ch/2011/12/30/new-features-and-changes-of-ninject-3-0/). The `shouldInherit` argument of the `ConstructorArgument` ctor needs to be passed `true` for your case to work.

A word of caution - having magic floating arguments like this is not generally a good idea - if something needs to be passed, pass it and don't confuse matters by using container tricks (i.e. what @Steven said in his comment).

(Also obviously if you can `Bind` ... `WithConstructorArgument`, that's much better, but I assume you know that.)

Perhaps you're missing an abstraction - maybe the `Service` should be asking for a `ServiceConfiguration` rather than two strings that you can easily get backwards?

# c# - PostSharp 单例

> ID：16157632
> 
> 赞同：0
> 
> 时间：2013-04-22T22:12:49.600
> 
> 标签：c#, design-patterns, postsharp

我希望我有一个 PostSharp 驱动的单例模式？

PostSharp可以吗？

是否有现有的示例或项目？

想要这样的东西：

```
interface ISingleton
{
    void Refresh();
    object Instance{get;set;}
}

[Singleton(AutoRefresh=true, AutoRefreshInterval=20)]
public class Repository
{
    private Repository()
    {
        //Code to load data...
    }
    public DoSomething()
    {
        //Do something at instance level;
    }
    public void Refresh()
    {
        //Refresh data
    }
} 
```

SingletonAttribute 应该使类实现 ISingleton 并为 Instance Property 和 Refresh() 方法主体插入代码

使用类时：

```
((Repository as ISingleton).Instance as Repository).DoSomething(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T08:01:51.497

据我了解，你想控制一个对象的生命周期。这不是您单独使用 AOP 可以做到的。此类事情通常通过使用[IoC 容器](http://en.wikipedia.org/wiki/Dependency_injection)（[Unity](http://msdn.microsoft.com/en-us/library/ff647202.aspx)、[Windsor](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1)、[Ninject](http://www.ninject.org/)）和设置对象的生命周期（例如单调、每个线程一个实例、每个请求一个实例等选项可用）来管理。如果您使用 IoC 容器，您可以编写自己的属性，因此您可以[获取所有具有例如 [Singletone] 属性的类，](https://stackoverflow.com/questions/607178/c-sharp-how-enumerate-all-classes-with-custom-class-attribute)并将它们注册到容器中的单例生存期。然后，当您的类的消费者从容器中解析实例时，他们将始终获得相同的实例。

# c# - 动态编译和执行条件语句

> ID：16157634
> 
> 赞同：3
> 
> 时间：2013-04-22T22:13:00.857
> 
> 标签：c#, .net, roslyn, dynamic-compilation

我们想给用户一个图形格式来设计一些数据的条件语句。我们的应用程序将采用该图形格式，将其转换为 C#，对其进行编译，然后针对某些数据运行条件语句，并返回一个布尔值。

问题是这些条件语句需要在运行时编写和编译（当然，执行），因为我们不会在每次用户创建新的条件语句时重新构建应用程序。

我们考虑过使用 LINQ 表达式树，但编译后的 LINQ 表达式树无法保存，这意味着每次执行条件语句时都需要重新编译。

我们认为更好的替代方法是使用 CodeDOM 将条件语句编译为 .dll（它们将被转换为静态类的静态方法，该静态类将数据作为参数，针对条件语句运行）。这允许我们保存编译后的语句，并且我们可以在运行时加载和卸载 .dll。此外，生成 C# if 语句比生成 LINQ 表达式树更容易。

或者，我们可以使用 Roslyn 生成 .dll。据报道，这比 CodeDOM 快，但 Roslyn 仍在 CTP 中。

是否存在我们应该知道的隐藏陷阱或执行此操作的一般模式？除了非常小心地只生成对数据进行测试的函数（并且不修改数据或允许调用任何其他函数）之外，我们还应该注意什么？加载和卸载（可能数百个）这些 .dll 会导致问题吗？如果每个 .dll 都有自己独特的命名空间，加载和卸载（可能有数百个）它们会留下工件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:37:17.473

> 每次要执行条件语句时，我们都需要重新编译

我不认为这会是个问题。除非您需要每秒编译许多表达式，否则编译表达式树对性能的影响应该不会很明显。

> 我们可以在运行时加载和卸载 .dll

并不真地。您无法在 .Net 中卸载普通程序集。一旦检测到未使用可收集程序集，它将被卸载，但这仅适用于动态程序集（不是从磁盘加载的程序集）。您还可以卸载 AppDomain，这也会卸载加载到该域中的所有程序集，但这意味着在单独的 AppDomain 中运行您的语句。

> 此外，生成 C# if 语句比生成 LINQ 表达式树更容易。

这真的很重要吗？您只需要编写一次该代码。而且我不认为使用表达式树创建 if 语句实际上要困难得多，只要你知道如何去做。尤其是与 Roslyn 相比，后者在用于代码生成时非常冗长（因为这不是它的主要用例）。

> 据报道，[Roslyn] 比 CodeDOM 快，但 Roslyn 仍在 CTP 中。

你能引用一个来源吗？但我真的怀疑编译速度对你来说真的很重要。

> 如果每个 .dll 都有自己唯一的命名空间……</p>

这没有任何意义，DLL 没有命名空间。事实上，CLR 并不真正处理名称空间，它只是看到一个名称中有点的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:16:04.137

完成这件事绝非易事，但您可能需要考虑通过自己发出 IL 来动态地在内存中创建程序集。

这方面的例子可以在[这里](https://github.com/duovia/duovia-net/blob/master/src/DuoVia.Net/DuoVia.Net/ProxyFactory.cs)找到。你会做这样的事情：

```
AppDomain domain = Thread.GetDomain();
// create a new assembly for the proxy
AssemblyBuilder assemblyBuilder = 
    domain.DefineDynamicAssembly(
        new AssemblyName("ProxyAssembly"), 
            AssemblyBuilderAccess.Run);

// create a new module for the proxy
ModuleBuilder moduleBuilder = 
    assemblyBuilder.DefineDynamicModule("ProxyModule", true);

// Set the class to be public and sealed
TypeAttributes typeAttributes = 
    TypeAttributes.Class | TypeAttributes.Public | TypeAttributes.Sealed;

// Construct the type builder
TypeBuilder typeBuilder = 
    moduleBuilder.DefineType(typeof(TInterface).Name 
    + "Proxy", typeAttributes, channelType);

List<Type> allInterfaces = new List<Type>(typeof(TInterface).GetInterfaces());
allInterfaces.Add(typeof(TInterface));

//add the interface
typeBuilder.AddInterfaceImplementation(typeof(TInterface));

//construct the constructor
Type[] ctorArgTypes = new Type[] { ctorArgType };
CreateConstructor(channelType, typeBuilder, ctorArgTypes);

//...

//construct the method builders from the method infos defined in the interface
List<MethodInfo> methods = GetAllMethods(allInterfaces);
foreach (MethodInfo methodInfo in methods)
{
    MethodBuilder methodBuilder = 
        ConstructMethod(channelType, methodInfo, typeBuilder, 
            ldindOpCodeTypeMap, stindOpCodeTypeMap);
    typeBuilder.DefineMethodOverride(methodBuilder, methodInfo);
}

//create the type and construct an instance
Type t = typeBuilder.CreateType();
TInterface instance = 
    (TInterface)t.GetConstructor(ctorArgTypes).Invoke(
        new object[] { channelCtorValue });

return instance; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:01:34.497

只是一些额外的注释（在@svick -s 的回答中，我大部分时间都排在第二位），不同的角度......

1.  **如果可以的话，我会说和罗斯林一起去**——这取决于你的目标。您将获得满足您需要的下一代工具和市场上真正的“编译器服务”:)，但要认真。

2.  **如果您没有要构建的广泛表达式树**- 即有限集 - 我建议将其作为第二个选项。你不能用 CodeDom 卸载 dll-s，除非通过 AppDomain 来“沟通”（基本上是跨进程）。

3.  **如果您有更多“任意”用户代码要运行**- 或使用 C# 的完整“文件” - 这意味着您必须非常模仿 C# - 然后使用 CodeDom。CodeDOM 是可靠的并且可以工作，但我会按照这个顺序进行。

# regex - 如何通过 URL 区分 Wikipedia 文章？

> ID：16157635
> 
> 赞同：1
> 
> 时间：2013-04-22T22:13:15.307
> 
> 标签：regex, url, mediawiki, wikipedia

Wikipedia 上有很多不是文章的页面，例如讨论页等。如何通过 URL 将它们与文章区分开来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:21:14.313

简短的回答是**你不能**单独使用正则表达式。

更长的答案是 MediaWiki 文章按名称空间划分，而名称空间又使用冒号作为标记，如“Talk:Foo”。*因此，标题中没有*冒号的文章肯定位于主（= 内容）命名空间中。问题是，带有冒号的文章可能在另一个命名空间中，*或者*是[恰好包含冒号的内容文章](http://en.wikipedia.org/wiki/Wikipedia%3aNaming_conventions_%28technical_restrictions%29#Colons)，并且由于 WP 的命名空间列表很长且不断变化，您不能（或至少不应该）硬编码这个列表在一个正则表达式中。

因此，正确的答案是使用[MediaWiki API](http://www.mediawiki.org/wiki/API%3aMain_page)仅在主命名空间中迭代/搜索文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:48:08.300

您可以通过使用其 API 和以下查询来获取 Wikipedia 名称空间及其别名的列表：

[http://en.wikipedia.org/w/api.php?action=query&meta=siteinfo&siprop=namespaces](http://en.wikipedia.org/w/api.php?action=query&meta=siteinfo&siprop=namespaces)

然后，如果第一个冒号之前的页面标题部分与任何已知的命名空间匹配，则它不是文章；否则，它是。

# c# - 特殊字符编码 C# 和 Ironpython

> ID：16157636
> 
> 赞同：0
> 
> 时间：2013-04-22T22:13:27.650
> 
> 标签：c#, special-characters, ironpython

我在尝试使用 Ironpython 代码作为桥梁从两个 C# 模块传递字符串时遇到编码问题。

当接收模块接收到字符串时，像 € 、 © 这样的特殊字符会被扭曲。

谁能告诉它是否是 IronPython 问题？以及如何解决此类问题

谢谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:28:34.230

可能你做错了什么。编码和 IronPython 没有问题。检查您之前加载的脚本的编码..

# java - Java Spring中的Getter和Setter问题

> ID：16157639
> 
> 赞同：0
> 
> 时间：2013-04-22T22:13:40.403
> 
> 标签：java, spring, spring-mvc

所以，我有这个bean：

```
<bean id="toMailController" class="com.appointments.kohler.controller.ToEmailController">
    <property name="templateTransformer" ref="templateTransformer"></property>
</bean> 
```

在我的**ToEmailController.java**我有这个（只是重要的行）：

```
public ToEmailController extends AbstractController {

public TemplateTransformer _templateTransformer;

@Required
public void setTemplateTransformer(TemplateTransformer templateTransformer) 
{
    this._templateTransformer = templateTransformer;
}

public TemplateTransformer getTemplateTransformer()
{
    return this._templateTransformer;
}

} 
```

如果我从本地主机执行这个项目，它运行得很好，但是当我把他放在 weblogic 中时，我收到以下错误：

```
org.springframework.beans.NotWritablePropertyException: Invalid property 'templateTransformer' of bean class [com.appointments.kohler.controller.ToEmailController]: Bean property 'templateTransformer' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

但我无法得到它。我究竟做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:30:40.960

数千小时后，我尝试使用 ANT 部署项目并且它工作正常，之后 BEA WebLogic 界面不再给我错误。

感谢您的每一个回答！

# ruby - 已知 SOAP XML 代码时在 Ruby 中访问 API

> ID：16157640
> 
> 赞同：1
> 
> 时间：2013-04-22T22:13:46.937
> 
> 标签：ruby, api, soap

我知道有大量关于如何使用 Ruby 发出 SOAP 请求的帖子（通常引用 gem Savon），但我无法理解它们（我完全是编程新手）。我能够成功访问 API 并使用 soaupUI 执行我的 get 请求，而我只是在寻找使用 Ruby 执行这些请求的方法。这是我的输入：

*   soap = 肥皂请求的 XML 代码
*   发布“https://....”
*   接受编码：gzip,deflate
*   内容类型：文本/xml；charset=UTF-8
*   SOAPAction: "urn:provider/..."
*   内容长度：1253
*   主持人：网络服务....
*   连接：保持活动
*   用户代理：Apache-HttpClient/4.1.1 (java 1.5)

我用“....”替换了识别信息有没有一种方法可以简单地使用这些输入来启动我的肥皂请求？

谢谢！

编辑：好的，考虑到以下评论，这是我尝试访问的练习 API。端点是[http://www.thomas-bayer.com:80/axis2/services/BLZService](http://www.thomas-bayer.com:80/axis2/services/BLZService)，我从soupUI 复制了soap，在那里我能够成功执行请求。

```
require 'net/http'
require 'net/https'

http = Net::HTTP.new('thomas-bayer.com', 80)
http.use_ssl = false
path = 'axis2/services/BLZService'

data = <<-EOF
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:blz="http://thomas-bayer.com/blz/">
<soapenv:Header/>
<soapenv:Body>
<blz:blz>70070010</blz:blz>
</blz:getBank>
</soapenv:Body>
</soapenv:Envelope>
EOF

headers = {
'Referer' => 'http://www.appfusion.net',
'Content-Type' => 'text/xml',
'Host' => 'thomas-bayer.com'
}

resp, data = http.post(path, data, headers)
puts 'Code = ' + resp.code
puts 'Message = ' + resp.message
resp.each { |key, val| puts key + ' = ' + val }
puts data 
```

当我运行它时，它会返回许多不同的错误。任何帮助解决此问题将不胜感激；如果有帮助，这里是 wsdl：[http ://www.thomas-bayer.com/axis2/services/BLZService?wsdl](http://www.thomas-bayer.com/axis2/services/BLZService?wsdl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:10:49.083

我想出了一个非常简单的方法来使用 savon 中的 soap.xml 类（版本 1）：

```
client = Savon.client("www.mywsdl.wsdl")
response = client.request :get_my_request do
soap.xml ='my xml code'
end 
```

# objective-c - NSRunLoop 在任何 FSEvent 或计时器触发之前提前返回

> ID：16157646
> 
> 赞同：4
> 
> 时间：2013-04-22T22:14:29.193
> 
> 标签：objective-c, cocoa, nsthread, fsevents

我正在尝试使用 NSRunLoop 来监视代理应用程序中的 FSEvents（即，没有任何 GUI）。我*想*我了解 RunLoop 的工作原理，但我显然不了解，因为我看到的行为是难以理解的。我错过了什么？（我对几种语言的线程编程很满意，但是 Objective-C 对我来说有点新奇）。

下面复制的是一个 `EventHandler`类的（接近我能得到的）最小实现。这是通过分配和初始化一个实例从主函数调用的，然后使用 发送该 `startWatching`消息`"/tmp/fussybot-test"`，然后使用 finally发送该消息`tidyUp`。

下面的实现代码创建、调度和启动附加到默认 RunLoop 的事件流，然后循环，等待`runMode:beforeDate` 任何 FSEvents 或 RunLoop 的计时器到期。

```
#import "EventHandler.h"

void mycallback(ConstFSEventStreamRef streamRef,
                void *userData,
                size_t numEvents,
                void *eventPaths,
                const FSEventStreamEventFlags eventFlags[],
                const FSEventStreamEventId eventIds[])
{
    EventHandler *eh = (__bridge EventHandler*)userData;

    size_t i;
    char **paths = eventPaths;
    NSLog(@"callback: %zd events to process...", numEvents);
    for (i=0; i<numEvents; i++) {
        NSLog(@"Event %llu in %s (%x)", eventIds[i], paths[i], eventFlags[i]);
        [eh changedPath:paths[i]];
    }
}

@implementation EventHandler

-(void) startWatching: (NSString*) path
{
    NSRunLoop *theRL = [NSRunLoop currentRunLoop];
    [self createStream:path runLoop:theRL];

    BOOL recentFSActivity_p = YES;
    while (recentFSActivity_p) {

        NSDate* waitEnd = [NSDate dateWithTimeIntervalSinceNow:5.0];
        //NSLog(@"waiting until %@", waitEnd); // XXX
        if (! [theRL runMode:NSDefaultRunLoopMode
                  beforeDate:waitEnd]) {
            NSLog(@"the run loop could not be started");
        }

        int ps = [self pathsSeen];
        NSLog(@"Main loop: pathsSeen=%i", ps);
        if (ps == 0) {
            recentFSActivity_p = NO;
        }
    }
}

- (void) tidyUp
{
    FSEventStreamStop(event_stream);
    FSEventStreamInvalidate(event_stream);
    return;
}

- (FSEventStreamRef) createStream: (NSString*) path
                          runLoop: (NSRunLoop*) theRL
{
    pathsToWatch = [NSArray arrayWithObject:path];
    FSEventStreamContext context = {0, (__bridge void*)self, NULL, NULL, NULL};
    CFAbsoluteTime latency = 3.0; /* Latency in seconds */

    /* Create the stream, passing in a callback */
    event_stream = FSEventStreamCreate(NULL,
                                       &mycallback,
                                       &context,
                                       (__bridge CFArrayRef) pathsToWatch,
                                       kFSEventStreamEventIdSinceNow,
                                       latency,
                                       kFSEventStreamCreateFlagNone);

    FSEventStreamScheduleWithRunLoop(event_stream,
                                     [theRL getCFRunLoop],
                                     kCFRunLoopDefaultMode);
    FSEventStreamStart(event_stream);

    return event_stream;
}

-(void)changedPath:(char *)path
{
    NSLog(@"Path %s changed", path); // log that we got here
    nchangedPaths += 1;              // ...and count the number of calls
}

-(int)pathsSeen
{
    int n = nchangedPaths;      // return instance variable
    nchangedPaths = 0;          // ...and reset it
    return n;
}
@end 
```

好的，所以我们构建它，开始它，然后触摸监视目录中的一个文件：

```
% make && ./fussybot & date '+NOW: %T'; sleep 2; echo hello >/tmp/fussybot-test/hello.txt
cc -c -x objective-c -fobjc-arc -o EventHandler.o EventHandler.m
cc -o fussybot main.o EventHandler.o -framework Cocoa
[1] 57431
NOW: 22:56:54
% 2013-04-22 22:56:57.692 fussybot[57431:707] callback: 1 events to process...
2013-04-22 22:56:57.694 fussybot[57431:707] Event 645428112 in /private/tmp/fussybot-test/ (11400)
2013-04-22 22:56:57.694 fussybot[57431:707] Path /private/tmp/fussybot-test/ changed
2013-04-22 22:56:57.695 fussybot[57431:707] Main loop: pathsSeen=1
2013-04-22 22:56:57.695 fussybot[57431:707] Main loop: pathsSeen=0
Exiting...

[1]  + done       ./fussybot
% 
```

然后我们*取消注释*该行`NSLog(@"waiting until %@", waitEnd);` （`XXX`上面标有），我们再试一次：

```
% make && ./fussybot & date '+NOW: %T'; sleep 2; echo hello >/tmp/fussybot-test/hello.txt
cc -c -x objective-c -fobjc-arc -o EventHandler.o EventHandler.m
cc -o fussybot main.o EventHandler.o -framework Cocoa
[1] 57474
NOW: 22:59:01
2013-04-22 22:59:01.190 fussybot[57474:707] waiting until 2013-04-22 21:59:06 +0000
2013-04-22 22:59:01.190 fussybot[57474:707] Main loop: pathsSeen=0
Exiting...
[1]  + done       ./fussybot
% 
```

现在这里有*两*件非常奇怪的事情。

*   首先，添加`NSLog`调用会改变程序的行为。诶？！
*   其次，在这两个示例中，RunLoop 似乎立即退出，而无需等待 FSEvent。

关于第一个，`NSLog`有这样的效果的事实肯定告诉我一些非常重要的事情，但我一生无法弄清楚什么。

关于第二种情况，在每种`pathsSeen=0`情况下， `runMode:beforeDate`RunLoop 对象上的消息*都不会阻塞*，而是返回`YES`，尽管该消息的文档说它`YES`仅返回“如果运行循环运行并处理了输入源，或者如果指定的已达到超时值”，在上述情况下都不是真的`pathsSeen=0`。在每种情况下，我都希望在该`pathsSeen=0`行出现之前看到 5 秒的延迟，因为没有看到任何 FSEvent 的 RunLoop 会阻塞到`waitEnd`间隔的末尾。

这两个特点都表明我误解了一些非常基本的东西，大概是关于对象生命周期的。我想我可以陈述以下每一项：

*   我确实应该调用`NSRunLoop runMode:beforeDate`程序的主线程（程序在等待时没有其他事情可做，所以被阻塞是完全正确的事情）。[这与Threading Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)中对 RunLoops 的解释兼容。
*   每个线程只有一个 RunLoop，所以我*在*`event_stream`等待的 RunLoop 上进行调度 。
*   根据创建规则，我拥有`event_stream`，因此不会在我背后收回。
*   `waitEnd`每次循环都会不同 - 即，它不会在每次循环中保留。
*   `createStream:runLoop`初始化*实例*变量 `pathsToWatch`意味着我不必担心在使用此参数创建流后它会`FSEventStreamCreate`消失。如果这是一个局部变量，ARC 管理将在方法结束时回收它，但不是，因为它是一个实例变量。
*   没有其他事件会导致 RunLoop 解除阻塞。即使操作系统确实在这个 RunLoop 上安排了一些东西（文档似乎仔细地不排除这种情况），我也会在回调中看到这样的事件。
*   第一种情况下的`FSEventStreamEventFlags`on 事件是预期的——没有任何迹象表明任何事件已因某种原因被丢弃。

也就是说，我似乎已经证明这是行不通的。它显然不起作用，所以......我灾难性地未能得到什么？（当我得到它时，砰的一声，它会受伤吗？）。

FSEvent API 是否代表“基于端口的输入源”，根据[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)中的“事件的运行循环序列” ？如果是这样，那么肯定应该在该序列的第 7 步中接收到 FSEvent。

上面的代码非常基于[文件系统事件 API 文档](http://developer.apple.com/library/mac/#featuredarticles/FileSystemEvents/_index.html)中的示例代码。[我认为我的理解与这个深思熟虑的答案](https://stackoverflow.com/a/12092176/375147)中的解释兼容，但我一直无法找到许多其他相关的 RunLoop 问题。SO 系统建议的问题主要与专门添加 NSTimers 而不是使用 RunLoop 调用的内置计时器有关。 [这个关于 FSEvent 和 Dropbox](https://stackoverflow.com/questions/6841010/fsevents-mysteriously-fails-to-deliver-events-in-some-folders)的问题看起来很可能，但是 (a) 没有答案，并且 (b) 可能是与 Dropbox 的交互。

这是

```
% cc --version 
Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn) 
```

在 OS X 10.8.3 上。

（这是一个很长的问题：对不起。通常当你问这么长的问题时，你已经自己想出了答案，但是——不—​​—我现在和以前一样困惑。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:03:04.493

运行循环是共享资源。框架可以并且确实在运行循环上安排自己的运行循环源，尤其是在默认模式下。如果`-runMode:beforeDate:`正在返回`YES`并且它没有处理您的源之一，那么它可能处理了框架安排的一个。

如果您想以*只有*您的源和计时器触发的方式运行运行循环，那么您需要在自定义模式下安排您的源和计时器并在该模式下运行运行循环。模式实际上只是一个字符串，所以使用类似`@"com.yourcompany.yourproduct.yourmodename"`或类似的东西保证是唯一的，你会没事的。

或者您可以简单地编写代码来应对并非所有在运行循环上触发的源都属于您的事实。如果您想检测超时到期，请安排一个计时器来设置标志并停止运行循环。继续循环直到设置标志。我认为您可以使用`CFRunLoopStop()`您的计时器方法强制`-runMode:beforeDate:`返回，但如果没有，您可以使用其中`-performSelector...`一种需要线程或延迟来执行此操作的方法。

# c - 从字符串中提取数字

> ID：16157648
> 
> 赞同：0
> 
> 时间：2013-04-22T22:14:33.643
> 
> 标签：c, string

我正在尝试用 C 编写一个函数，该函数接受一个字符串，例如：`"abc123def"`并以字符串形式返回一个数字：`"123"`。

我对 C 的经验很少，所以我想知道我`isDigit()`是否正确使用了该函数。我的代码如下，如果有更好的方法来解决问题，我将不胜感激。谢谢！

```
char findNumber(char *str1)
{
    char num1[] = "";
    int i = 0;
    int j = 0;
    while(str1[i] != '\0') {
            if(isDigit(str1[i])) {
                    num1[j] = str1[i];
                    j++;
            }
            i++;
    }
    num1[j] = '\0';
    return num1;
}

int main(int argc, const char* argv[])
{
    char str2[] = "!3254";
    printf(findNumber(str2));
    return 0;
} 
```

我收到以下错误：

```
undefined reference to `isDigit' 
```

和

```
return makes integer from pointer without a cast 
```

这些可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:46:12.517

您的函数需要返回`char *`，因为您不仅返回单个字符，而且返回一堆字符。

在快速谷歌搜索后，我发现它`isdigit`是在 中定义的`ctype.h`，所以小写`D`并包含`ctype.h`。

此外，您在那里有一些[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，因为您只`num1`为长度为 0 的字符串分配内存。是一个选项，如果程序执行的时间超过几秒/分钟`char *num1 = malloc(someSize)`，它应该在某处有对应的。`free`

修复后的代码：

```
#include <ctype.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAX_SIZE 100

char *findNumber(char *str1)
{
    char *num1 = malloc(MAX_SIZE);
    // using "strlen(str1)+1" instead of MAX_SIZE might be preferred
    int i = 0, j = 0;
    while(str1[i] != '\0') {
            if(isdigit(str1[i])) {
                    num1[j] = str1[i];
                    j++;
            }
            i++;
    }
    num1[j] = '\0';
    return num1;
}

int main(int argc, const char* argv[])
{
    char str2[] = "!3254";
    printf(findNumber(str2));
    return 0;
} 
```

[测试](http://ideone.com/q32msD)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:58:26.637

这应该有效：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

char* findNumber(char *str1)
{
    char* num1=malloc(strlen(str1)+1);//allocate memory for the number
    int i = 0;
    int j = 0;
    while(str1[i] != '\0') {
            if(isdigit(str1[i])) {//isdigit() is in ctype.h
                    num1[j] = str1[i];
                    j++;
            }
            i++;
    }
    num1[j] = '\0';
    return num1;
}

int main(int argc, const char* argv[])
{
    char str2[] = "!3254";
    char* number=findNumber(str2);
    printf("%s\n",number);
    free(number);//free the allocated memory
    return 0;
} 
```

# php - 函数 preg_match() 没有正确找到行尾

> ID：16157649
> 
> 赞同：2
> 
> 时间：2013-04-22T22:14:34.700
> 
> 标签：php, regex, preg-match

我正在解析来自控制台的文件中的信息，每行的末尾是日期，但该行也可能已经列出了日期。输入行如下所示：

```
 00029 --> Ticket Received in QUEUE11 by ABCDE on 04/11/2013 at 11:   4/11/2013 
 00030 07:12\.                                                         4/11/2013 
```

（每个行号之前和行尾都有一个空格）。

我`foreach`循环中的正则表达式如下所示：

```
if (preg_match("/\s\d{5}\s(.+?)\d{1,2}\/\d{1,2}\/\d{1,4}\s\n/", $line, $match))
{
    $note = $match[1];
} 
```

正则表达式在*The Regex Coach*中工作，我找不到任何原因导致它在我的代码中不起作用。与 \n 那里，它不匹配任何行。没有它，它会在第一次约会之前中断。

我也尝试了 \r ，它的行为与什么都没有一样。一旦我在循环中回显了 $note，我正在寻找看起来像这样的最终输出。

```
Ticket Received in QUEUE11 by ABCDE on 04/11/2013 at 11:
07:12. 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:03:38.567

使末尾的空格可选：

```
if (preg_match("/\s\d{5}\s(.+?)\d{1,2}\/\d{1,2}\/\d{1,4}\s*\n/", $line, $match))
//                                                here ___^
{
    $note = $match[1];
} 
```

# xml - 尝试按照stackoverflow上看到的方法更改xslt中的节点

> ID：16157653
> 
> 赞同：0
> 
> 时间：2013-04-22T22:15:25.207
> 
> 标签：xml, xslt

我正在学习 XSLT。我正在尝试按照@Rich 的这篇文章[如何在 Xslt 中用另一个节点名替换节点名的建议将节点转换为节点？](https://stackoverflow.com/questions/1928377/how-to-replace-a-node-name-with-another-in-xslt)

这是我的输入 XML：

```
<ns:positionSkillResponse xmlns:ns="http://positionskillmanagementservice.webservices.com">
<ns:return>1</ns:return>
<ns:return>9</ns:return>
</ns:positionSkillResponse> 
```

我正在尝试使用下面的代码对其进行转换，这会导致解析器错误。我认为 ns:return 是问题所在，因为转换器代码不知道如何解析命名空间 ns。但是命名空间没有发布到 URL，所以我不能把它指向那里。那是问题吗？我该怎么办？

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:
  version="1.0">

  <xsl:output method="xml" />

<xsl:template match="ns:return">
    <parameter>
        <xsl:apply-templates select="@*|node()"/>
    </parameter>
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

结果：

```
Error:XSLTProcessor::transformToXml() [<a href='xsltprocessor.transformtoxml'>xsltprocessor.transformtoxml</a>]: No stylesheet associated to this object 
```

[通过此工具进行测试：](http://xslt.online-toolz.com/tools/xslt-transformation.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:41:22.503

您的 XSL 无效（它有一个未完成的命名空间声明并且缺少一个结束`xsl:stylesheet`标记），但即使修复了这个问题，该工具似乎也不起作用。试试这个：

[http://www.xslfiddle.net/](http://www.xslfiddle.net/)

当此 XSLT 用于该工具并带有您给定的输入时：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ns="http://positionskillmanagementservice.webservices.com"
  version="1.0">

  <xsl:output method="xml" />

  <xsl:template match="ns:return">
    <parameter>
      <xsl:apply-templates select="@*|node()"/>
    </parameter>
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

产生的结果是：

```
<?xml version="1.0"?><ns:positionSkillResponse xmlns:ns="http://positionskillmanagementservice.webservices.com"><parameter>1</parameter><parameter>9</parameter></ns:positionSkillResponse> 
```

# file-upload - 在 Amazon S3 上管理存储文档的正确方法

> ID：16157654
> 
> 赞同：0
> 
> 时间：2013-04-22T22:15:26.067
> 
> 标签：file-upload, amazon-web-services, amazon-s3, security

我有很多敏感文档想存储在我的 amazon s3 帐户中，但我不明白如何在没有其他人访问它们的情况下安全地存储它们。

我有一个经过身份验证的网站，我想在其中查看存储桶中的一些文档，因此我使用 PHP S3 库来获取文件。但是，通过链接：

```
https://s3.amazonaws.com/bucket_name/file.txt 
```

我可以从任何地方访问它。即使我使用亚马逊提供的给定安全功能：

```
URL signed documents with timeouts 
```

人们仍然可以使用 URL [https://s3.amazonaws.com/bucket_name/file.txt](https://s3.amazonaws.com/bucket_name/file.txt)访问我的文档。

关于保护网站文件，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:09:30.850

您可以控制添加到 s3 的文件的权限。如果您想控制访问，请不要将您的文件设置为公开。而是将它们保密并使用签名的 url 来提供对其他用户的访问，或者通过经过身份验证的网关加载它。

# neo4j - 获取 WrappingNeoServerBootstrapper 无法解析为类型

> ID：16157655
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:15:37.900
> 
> 标签：neo4j

我在嵌入式 Java 中使用 neo4j。

我想通过我拥有的应用程序启动一个进程中的服务器管理实例。我无法在 Eclipse 中编译应用程序，因为它一开始就说

“WrappingNeoServerBootstrapper 无法解析为类型”。它无法解决下面的行

私有 WrappingNeoServerBootstrapper srv；

我很感激在这件事上的任何帮助。

请参阅下面的课程

```
import org.neo4j.graphalgo.GraphAlgoFactory;
import org.neo4j.graphalgo.PathFinder;
import org.neo4j.graphdb.DynamicRelationshipType;
import org.neo4j.graphdb.Expander;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Path;
import org.neo4j.kernel.Traversal;
import org.neo4j.server.plugins.Description;
import org.neo4j.server.plugins.Parameter;
import org.neo4j.server.plugins.PluginTarget;
import org.neo4j.server.plugins.ServerPlugin;
import org.neo4j.server.plugins.Source;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;
import org.neo4j.graphdb.RelationshipType;      // interface
import org.neo4j.graphdb.Relationship;
import org.neo4j.graphdb.GraphDatabaseService;  // interface
import org.neo4j.graphdb.Transaction;
import org.neo4j.server.*;

public class DBFacade {

    private static enum RelTypes implements RelationshipType { KNOWS }

    private GraphDatabaseService graphDb;
    private WrappingNeoServerBootstrapper srv; 

    public void WriteNode(java.lang.String message)
    {
        Transaction tx = graphDb.beginTx(); 
        try
        {     
            // Updating operations go here     
            Node node = graphDb.createNode();
            node.setProperty( "message", message );
            tx.success();
        }
        finally
        {     
            tx.finish(); 
        }
    }

    public void WriteRelationship(Node firstNode, Node secondNode, RelTypes type)
    {
        Relationship relationship = firstNode.createRelationshipTo( secondNode, RelTypes.KNOWS ); 
        relationship.setProperty( "message", "brave Neo4j " ); 
    }

    public void CreateDB(java.lang.String path)
    {
        //newEmbeddedDatabase is an implemetation of GraphDatabaseService
        this.graphDb = new GraphDatabaseFactory().newEmbeddedDatabase( path ); 
    }

    public void Close()
    {
        graphDb.shutdown(); 
    }

    public void StartAdminInstance()
    {
        // start web admin in process
        srv = new WrappingNeoServerBootstrapper( this.graphDb ); 
        srv.start(); // The server is now running // 
        //until we stop it: 
        srv.stop(); 
    }

    public void StopAdminInstance()
    {
        srv.stop(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:40:59.477

你在使用像 Maven 这样的依赖管理框架吗？您必须包含`neo4j-server`包含该类的 jar。

您还需要`StartAdminInstance`更新`WrappingNeoServerBootstrapper srv = new WrappingNeoServerBootstrapper((AbstractGraphDatabase) graphDb);`

# git - 在等待拉取时继续在子分支上工作

> ID：16157658
> 
> 赞同：3
> 
> 时间：2013-04-22T22:15:47.900
> 
> 标签：git, github

我已经向公共 github 存储库提出了我的第一个拉取请求。我在一个分支上分叉、编码并提交了我所有的工作。让我们称之为BranchA。

在等待请求通过时，我想在包含 BranchA 更改的新分支上做更多工作。我应该从 BranchA 创建 BranchB 吗？

如果当我从上游提取更改时上述内容是正确的，假设 BranchA 已合并，BranchB 会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:17:57.330

Git 没有“子分支”的概念；分支没有父母。

如果您从分支 A 创建分支 B，则分支 B 将包含分支 A 的所有提交。
如果您随后在分支 A 中进行更多提交，则可以`git merge`（或变基）将它们放入分支 B。
同样，如果上游 master 获得更多提交，您可以`git merge`将它们放入任一分支（您`git fetch`首先需要它们）。

当拉取请求被接受时，提交也将在上游主服务器中。

# ios - 使用自动布局设置动态 UIView 以匹配容器视图

> ID：16157665
> 
> 赞同：32
> 
> 时间：2013-04-22T22:16:26.323
> 
> 标签：ios, uiview, autolayout, resize

我在 IB 中有一个 UIView，其中有另一个 UIView，我将其用作容器视图。在代码中，我创建了三个不同的视图，然后根据应用程序的状态将适当的视图动画化到容器的视图中。在任何给定时间，这三种不同观点中只有一种是有效的。问题是，当我在模拟器中的不同 iPhone 上运行时，我的新子视图没有缩放以匹配容器视图。我正在使用自动布局。出于测试目的，我将我的子视图设置为一个大按钮，它的所有边缘都限制在超级视图中。并且容器视图也有它的边缘限制到它的超级视图。我想要的是子视图与容器的视图相匹配。即按钮拉伸容器视图的整个大小。

下面是我用来初始化我的子视图并设置它相对于容器视图的约束的代码。

```
UIView *containerView = self.subView;
UIView *newSubview = [[mySubview alloc] init];
[newSubview setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.containerView addSubview:newSubview];

[self.containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:self.containerView attribute:NSLayoutAttributeTop multiplier:1.0 constant:0]];

[self.containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview attribute:NSLayoutAttributeLeading relatedBy:NSLayoutRelationEqual toItem:self.containerView attribute:NSLayoutAttributeLeading multiplier:1.0 constant:0]];

[self.containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:self.containerView attribute:NSLayoutAttributeWidth multiplier:1.0 constant:0]];

[self.containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:self.containerView attribute:NSLayoutAttributeHeight multiplier:1.0 constant:0]]; 
```

我似乎无法让它发挥作用。我对自动布局还很陌生，不确定我做错了什么，我不想再把头撞在墙上了。任何帮助都会很棒。:)

* * *

************* 附加信息 **************

* * *

抱歉，我没有尽可能清楚地说明我的问题。因此，这里有更多关于屏幕截图的信息。首先，我将描述我在代码方面所做的事情。

在 AppDelegate.m 的 didFinishLaunchingWithOptions 中，我像这样创建 MyViewController，

```
self.myViewController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil]; 
```

在 MyViewController.m 的 viewDidLoad 中，我创建了 mySubview 并将其添加到我的 containerView 并像这样为其创建约束，

```
UIView *containerView = self.containerView;
UIView *mySubview = [[MySubview alloc] init];
[mySubview setTranslatesAutoresizingMaskIntoConstraints:NO];
[containerView addSubview:mySubview];

NSDictionary *views = NSDictionaryOfVariableBindings(mySubview);
[containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[mySubview]|"
                                                                 options:0
                                                                 metrics:nil
                                                                   views:views]];
[containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[mySubview]|"
                                                                  options:0
                                                                  metrics:nil
                                                                    views:views]]; 
```

最后在 MySubview.h 的 init 中，我将笔尖添加为这样的子视图，

```
- (id)init
{
    if(self = [super init])
    {
        NSArray *nibArray = [[NSBundle mainBundle]loadNibNamed:@"MySubview" owner:self options:nil];
        [self addSubview:[nibArray objectAtIndex:0]];
    }
    return self;
} 
```

需要注意的几件事可能会有所帮助，

在 MyViewController.xib 中，我有一个 UIView 用作 containerView。它有一个到 UIView* containerView 的 IBOutlet，是上面提到的那个。我对 IB 中的 containerView 的唯一限制是 Superview 的前导、尾随和底部空间以及 Superview = 44 的顶部空间。

对于 MySubview.xib，高度和宽度为 300，（高度或宽度没有使用约束）。我觉得这些尺寸应该无关紧要，因为 mySubview 应该受限于 containerView。

在 MySubview.xib 我有 3 个对象，topButton：height = 29、middleView：height = 242 和 bottomButton：height = 29。（见附图） TopButton 具有前导、尾随和顶部到 Superview 约束和底部到 middleView 约束。MiddleView 具有前导和尾随 Superview 约束以及从上到上按钮约束和从下到下按钮约束。最后，bottomButton 具有到 Superview 约束的前导、尾随和底部以及从顶部到 middleView 的约束。

我想要发生的是让 mySubview 缩放以适应 containerView，因为已经创建并添加了约束，但是相反，mySubview 变得非常大并剪辑了 containerView。

以下是一些屏幕截图：

MyViewController.xib，标题下方的蓝色矩形是我的容器视图，并且有 IBOutlet containerView。

![http://i33.tinypic.com/14o3lmd.png](https://i.stack.imgur.com/Yxejs.png)

我的子视图.xib

![http://i37.tinypic.com/344ukk3.png](https://i.stack.imgur.com/xszS3.png)

最后，结果是不正确的。

![http://i34.tinypic.com/nbyqua.png](https://i.stack.imgur.com/KmfKl.png)

相反，我想要这个，我伪造它只是为了获取屏幕截图。

在 iPhone 4 上，

![http://tinypic.com/r/w9fp5e/4](https://i.stack.imgur.com/kv2Vn.png)

在 iPhone 5 上，

![http://tinypic.com/r/2z8nldv/4](https://i.stack.imgur.com/P1cfx.png)

正如您在假屏幕截图中看到的那样，mySubview 会缩放以适应 containerView，即使 containerView 会稍微缩放以适应不同的手机屏幕尺寸。

希望我没有过度使用这些信息。任何帮助都会很棒。我觉得我很接近，但肯定错过了一个关键步骤。呸呸呸。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-22T23:23:57.193

几个想法：

1.  这基本上看起来不错，除了一些变量名怪异：你的局部变量，`containerView`等于`self.subView`，但你所有的其他行都引用了一个不同的变量，一个类属性，`self.containerView`。您是否省略了设置`containerView`该类属性的行？但是当我解决这个问题时，你的代码对我来说很好。

2.  确保您没有尝试`frame`在设置约束后立即查看，因为更改尚未反映在`frame`设置中。`[containerView layoutIfNeeded];`如果您想强制它根据约束重新布局所有内容，您可以这样做。此外，如果您想确认`frame`设置，最好将这些值推迟到之后查看`viewDidAppear`（即`viewDidLoad`在视图构建过程中为时过早）。

3.  对您的代码稍作调整（与您的问题无关），但是当我在容器视图中设置约束时，我通常不仅会设置`NSLayoutAttributeTop`and `NSLayoutAttributeLeading`，就像您所做的那样，而且还会设置`NSLayoutAttributeBottom`and `NSLayoutAttributeTrailing`（而不是`NSLayoutAttributeWidth`and `NSLayoutAttributeHeight`）。它完成与您的代码相同的事情，但是当使用非零值时，它更直观。

    无论如何，我只是做了以下代码，你的排列，它工作正常：

    ```
    - (IBAction)didTouchUpInsideAddView:(id)sender
    {
        UIView *containerView = self.containerView;
        UIView *newSubview = [[UIView alloc] initWithFrame:CGRectZero]; // initializing with CGRectZero so we can see it change
        newSubview.translatesAutoresizingMaskIntoConstraints = NO;
        newSubview.backgroundColor = [UIColor lightGrayColor];
        [containerView addSubview:newSubview];

        [containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview
                                                                  attribute:NSLayoutAttributeTop
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:containerView
                                                                  attribute:NSLayoutAttributeTop
                                                                 multiplier:1.0
                                                                   constant:0.0]];

        [containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview
                                                                  attribute:NSLayoutAttributeLeading
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:containerView
                                                                  attribute:NSLayoutAttributeLeading
                                                                 multiplier:1.0
                                                                   constant:0.0]];

        [containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview
                                                                  attribute:NSLayoutAttributeBottom
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:containerView
                                                                  attribute:NSLayoutAttributeBottom
                                                                 multiplier:1.0
                                                                   constant:0.0]];

        [containerView addConstraint:[NSLayoutConstraint constraintWithItem:newSubview
                                                                  attribute:NSLayoutAttributeTrailing
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:containerView
                                                                  attribute:NSLayoutAttributeTrailing
                                                                 multiplier:1.0
                                                                   constant:0.0]];

        // the frame is still `CGRectZero` at this point

        NSLog(@"newSubview.frame before = %@", NSStringFromCGRect(newSubview.frame));

        // if not doing this in `viewDidLoad` (e.g. you're doing this in
        // `viewDidAppear` or later), you can force `layoutIfNeeded` if you want
        // to look at `frame` values. Generally you don't need to do this unless
        // manually inspecting `frame` values or when changing constraints in a
        // `animations` block of `animateWithDuration`.

        [containerView layoutIfNeeded];

        // everything is ok here

        NSLog(@"containerView.bounds after = %@", NSStringFromCGRect(containerView.bounds));
        NSLog(@"newSubview.frame after = %@", NSStringFromCGRect(newSubview.frame));
    } 
    ```

4.  [您可以使用可视格式语言](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW1)稍微简化该代码，例如：

    ```
    NSDictionary *views = NSDictionaryOfVariableBindings(newSubview);

    [containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[newSubview]|"
                                                                          options:0
                                                                          metrics:nil
                                                                            views:views]];
    [containerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[newSubview]|"
                                                                          options:0
                                                                          metrics:nil
                                                                            views:views]]; 
    ```

    我发现使用视觉格式语言更容易获得正确的约束。不太容易出错（至少对我来说）。但是，有些约束无法用视觉格式语言表示，在这种情况下，我会回到您概述的语法。

5.  在您修改后的问题中，您向我们展示了`init`您的子视图的方法，该方法执行*另一个* `addSubview`. 你也必须在那里设置约束。底线，无论你做什么`addSubview`，你都必须设置你的约束，例如

    ```
    - (id)init
    {
        if(self = [super init])
        {
            NSArray *nibArray = [[NSBundle mainBundle]loadNibNamed:@"MySubview" owner:self options:nil];
            UIView *subview = [nibArray objectAtIndex:0];
            subview.translatesAutoresizingMaskIntoConstraints = NO;

            [self addSubview:subview];

            NSDictionary *views = NSDictionaryOfVariableBindings(subview);
            [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[subview]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:views]];
            [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[subview]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:views]];
        }
        return self;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:16:35.120

在问题中，您声明“我的新子视图未缩放以匹配容器视图” - 但从描述中我认为它们是 - 问题是您的容器视图没有固定大小。

我认为，如果您将容器视图设置为具有应该执行的固定宽度和高度，您可能还需要调用

```
[self.containerView layoutSubviews] 
```

在更新约束后强制调整大小。

我还建议您改用基于文本的格式，您可以将上面的行换成“H：| [newSubview] |”之类的内容 和“V:|[newSubview]|”

# java - 为什么我得到空指针异常：从带有表单 url 编码的视图中获取值时为空？

> ID：16157673
> 
> 赞同：2
> 
> 时间：2013-04-22T22:16:59.073
> 
> 标签：java, playframework, nullpointerexception, forms

我在 Play 框架中使用 Java/html-scala 进行编码。

我正在尝试使用编码的表单 url 从我的视图中获取一个值，但我得到的只是空指针异常。在我的控制器中，我这样做：

```
String[] searchTag= request().body().asFormUrlEncoded().get("questionTag"); //this is where I get my null pointer exception
//questionTag is the name of my input field in the view 
```

在我看来：在我看来，我有：

```
@helper.form(action=routes.TeacherController.ValidateQuestion(), 'enctype -> "multipart/form-data", 'class -> "form-horizontal") {... //rest of my code 
```

我的输入字段：

```
<input name="questionTag" class="input-xxlarge"> 
```

在同一个视图中，我允许用户上传一个文件，然后我在控制器的相同函数中获取该文件：

```
Http:MultipartFormData body = request().body().asMultipartFormData();
Http.MultipartFormData.FilePart attachment = body.getFile("attachment"); 
```

我想知道这是否可能导致此异常，即我无法使用两种方法（multipart/form-data 并`asFormUrlEncoded().get("questionTag"))`在同一视图中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:08:32.177

你可以做到的，朋友！;)

您只需要对代码进行一点修改。因为您将表单定义为`multipart/form-data`，所以您应该在控制器中进行如下处理：

```
// get all request content as MultipartFormData
Http.MultipartFormData formData = request().body().asMultipartFormData();

// get the form data
Http.MultipartFormData.FilePart attachment = formData.getFile("attachment");
String[] searchTag = formData.asFormUrlEncoded().get("questionTag"); // works!! 
```

请注意，在`formData`变量上，也调用`asFormUrlEncoded()`了这样的方法。它将**从**您的`multipart-form`.

不要与方法混淆，`RequestBody.asFormUrlEncoded()`因为 API 说，它用于**将请求内容解析**为 URL 格式编码。

我希望，下面的 API 参考可以供您参考：

1.  [`RequestBody`API 文档](http://www.playframework.com/documentation/api/2.1.1/java/play/mvc/Http.RequestBody.html)
2.  [`MultipartFormData`API 文档](http://www.playframework.com/documentation/api/2.1.1/java/play/mvc/Http.MultipartFormData.html)

祝你好运！

# cluster-analysis - 通过集群 K 进行数据挖掘 SSE

> ID：16157674
> 
> 赞同：0
> 
> 时间：2013-04-22T22:17:03.700
> 
> 标签：cluster-analysis, weka, k-means

我正在使用 K-Means 和聚类研究 WEKA。
一般来说，我会检查项目数据集上的不同算法。
我无法决定我应该选择什么最佳 SSE/Clusters 比率。
理论上，当我增加集群时，SSE 会减少，但是直到哪里？
找到了一些 K = (n/2)^0.5 的手指规则，有人可以支持这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:05:47.967

请注意，Weka 没有很多集群。它主要是一个分类工具。

平方和是一个*非常*以 k-means 为中心的度量。不要费心将此度量与任何其他算法一起使用。这是过拟合：这是 k-means 优化的度量，所以它当然会最好（并且通过添加另一个集群，它将能够进一步改进这个度量，这不足为奇）。

如果要评估聚类的质量，最可靠（尽管也值得怀疑）的方法是使用标记数据集。

# django - 在使用 Django DirtyFields 的测试中使用固定装置的问题

> ID：16157677
> 
> 赞同：0
> 
> 时间：2013-04-22T22:17:22.713
> 
> 标签：django, unit-testing, fixtures, django-signals

如果您正在实现 Django DirtyFields，在测试中使用固定装置时是否存在已知问题？

我们将`django_nose`'s`NoseTestSuiteRunner`用于固定装置和覆盖范围。我打算尝试实施`django-dirtyfields`一些自定义`post_save()`活动。我所做的唯一更改如下：

```
from dirtyfields import DirtyFieldsMixin

class BaseModel(DirtyFieldsMixin, models.Model):
    """
    Base model
    """
    class Meta:
        abstract = True 
```

我们使用它`BaseModel`来扩展我们的大多数其他模型。添加`DirtyFieldsMixin`导致我们的测试因以下重复错误而终止的原因：

```
Problem installing fixture '/home/ricomoss/workspace/project/settings/../apps/contracts/fixtures/test_contracts_data.json': Traceback (most recent call last):
  File "/home/ricomoss/.virtualenvs/project/local/lib/python2.7/site-packages/django/core/management/commands/loaddata.py", line 193, in handle
    for obj in objects:
  File "/home/ricomoss/.virtualenvs/project/local/lib/python2.7/site-packages/django/core/serializers/json.py", line 47, in Deserializer
    raise DeserializationError(e)
DeserializationError: Field matching query does not exist. 
```

据我所知，每当夹具尝试加载时，都会发生此错误。有什么想法吗？ `DirtyFieldsMixin`不包括任何会导致我的灯具需要更新的新字段（更不用说必填字段了）。

编辑 1：看来我的问题与Django中的[装置/信号问题直接相关。](https://stackoverflow.com/questions/3499791/how-do-i-prevent-fixtures-from-conflicting-with-django-post-save-signal-code)如果我们查看`DirtyFieldsMixin`定义，我们可以立即看到问题所在（我已经验证了这一点）：

```
class DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
        post_save.connect(
            self._reset_state, sender=self.__class__,
            dispatch_uid='{}-DirtyFieldsMixin-sweeper'.format(
                self.__class__.__name__))
        self._reset_state()

    def _reset_state(self, *args, **kwargs):
        self._original_state = self._as_dict()

    def _as_dict(self):
        return dict([(f.name, getattr(self, f.name)) for f in
                     self._meta.local_fields if not f.rel])

    def get_dirty_fields(self):
        new_state = self._as_dict()
        return dict([(key, value) for key, value in
                     self._original_state.iteritems()
                     if value != new_state[key]])

    def is_dirty(self):
        # in order to be dirty we need to have been saved at least once, so we
        # check for a primary key and we need our dirty fields to not be empty
        if not self.pk:
            return True
        return {} != self.get_dirty_fields() 
```

具体来说，

```
post_save.connect(self._reset_state, sender=self.__class__,
                  dispatch_uid='{}-DirtyFieldsMixin-sweeper'.format(
                  self.__class__.__name__)) 
```

[我尝试根据给定的解决方案](https://code.djangoproject.com/ticket/8399#comment:7)创建一个装饰器。我要么错误地实现了装饰器，要么在这种情况下不起作用。我对它在这种情况下的使用有点困惑。

我会把装饰器放在`__init__`：

```
@utils.disable_for_loaddata
def __init__(self, *args, **kwargs):
    super(DirtyFieldsMixin, self).__init__(*args, **kwargs)
    post_save.connect(
        self._reset_state, sender=self.__class__,
        dispatch_uid='{}-DirtyFieldsMixin-sweeper'.format(
            self.__class__.__name__))
    self._reset_state() 
```

在这种情况下，我仍然失败。有什么建议么？

编辑 2：我也尝试将装饰器添加到`_reset_state`方法中。这也不起作用。

```
@utils.disable_for_loaddata
def _reset_state(self, *args, **kwargs):
    self._original_state = self._as_dict() 
```

编辑3：我认为我正在取得进展。我将`inspect.stack()`装饰器的一部分`__init__`直接移到了（就在`post_save`调用上方）。

尽管我的测试套件仍未正确运行，但我正在进行其他活动。我不再收到 loaddata 错误。

```
def __init__(self, *args, **kwargs):
    super(DirtyFieldsMixin, self).__init__(*args, **kwargs)

    import inspect
    for fr in inspect.stack():
        if inspect.getmodulename(fr[1]) == 'loaddata':
            return
    post_save.connect(
        self._reset_state, sender=self.__class__,
        dispatch_uid='{}-DirtyFieldsMixin-sweeper'.format(
            self.__class__.__name__))
    self._reset_state() 
```

编辑 4：我决定为此过程编写自己的 mixin。我不相信我需要为我的目的使用信号。因此，我将覆盖该`save()`方法并以特殊方式处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:50:53.413

我能够实现一个我不喜欢的 hack。如果有人提出更好的解决方案，我很乐意看到。

基本上我做了建议解决方案的装饰器所做的事情，但在堆栈上查找任何测试用例。

```
class DirtyFieldsMixin(object):
    def __init__(self, *args, **kwargs):
        super(DirtyFieldsMixin, self).__init__(*args, **kwargs)

        # Hack code used to avoid unittest failures due to the following
        # post_save.connect() call.
        import inspect
        for fr in inspect.stack():
            if inspect.getmodulename(fr[1]) == 'testcases':
                return
        post_save.connect(
            self._reset_state, sender=self.__class__,
            dispatch_uid='{}-DirtyFieldsMixin-sweeper'.format(
                self.__class__.__name__))
        self._reset_state() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T14:03:37.730

反转继承应该让您无需更改即可启动并运行。

```
class BaseModel(models.Model, DirtyFieldsMixin): 
```

# .net - 使用 C# json.net 解析 json

> ID：16157679
> 
> 赞同：0
> 
> 时间：2013-04-22T22:17:35.497
> 
> 标签：.net, json.net

我有以下json：

```
[
{
  "Action":"Create",
  "Date":"Sat, 13 Aug 2011 00:38:17 GMT",
  "EventTypeName":"CommentEvent",
  "FriendlyDate":"4 days ago",
  "Idea":{
    "Id":4479,
    "AvgRatingRounded":0,
    "BusinessUnitName":"Consumer: Personal Finance",
    "PunchLine":"API Test idea",
    "ScoreRecent":4.31,
    "StatusName":"Just an idea, not working on it",
    "SubmittedOn":"\/Date(1313195896000-0700)\/",
    "SubmitterName":"Bryant Chou"
  },
  "Subject":"Idea",
  "Summary":"Bryant Chou commented on idea API Test idea",
  "User":{
    "Id":11362,
    "DisplayName":"Bryant",
    "EmailWork":"Bryant@blah.com",
    "Location":"",
    "Phone":"650-555-5555",
    "PhotoExists":true,
    ,
    "PhotoUrl_36x36":
      "http:\/\/localhost.localhost\/Files\/Tenant_1\/DirPhotos\/Small\/11362_3.jpg"
  }
},
{
  "Action":"Create",
  "Date":"Fri, 12 Aug 2011 17:25:57 GMT",
  "EventTypeName":"CommentEvent",
  "FriendlyDate":"4 days ago",
  "Idea":{
    "Id":4477,
    "AvgRatingRounded":0,
    "BusinessUnitName":"Consumer: Personal Finance",
    "PunchLine":"API Test idea",
    "ScoreRecent":4.31,
    "StatusName":"Just an idea, not working on it",
    "SubmittedOn":"\/Date(1313169956000-0700)\/",
    "SubmitterName":"Bryant Chou"
  },
  "Subject":"Idea",
  "Summary":"Bryant Chou commented on idea API Test idea",
  "User":{
    "Id":11362,
    "DisplayName":"Bryant",
    "EmailWork":"Bryant@blah.com",
    "Location":"",
    "Phone":"650-555-5555",
    "PhotoExists":true,
    "PhotoUrl_36x36":
        "http:\/\/localhost.localhost\/Files\/Tenant_1\/DirPhotos\/Small\/11362_3.jpg"
    }
  }
] 
```

**我可以用**

```
JArray a = JArray.Parse(GetJSONPeople());

        GridView1.DataSource = a;
        GridView1.DataBind(); 
```

并绑定到网格，但它没有我需要的所有信息。

**我得到** Action Date EventTypeName FriendlyDate 主题摘要

但是我需要Idea部分中的ID，并且需要在StringBuilder中写出来。我希望这是有道理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:30:12.540

我没有正确获取数据。

我需要使用以下内容：

```
var jsonObject = JsonConvert.DeserializeObject<List<Class1>>(GetJSONPeople()); 
```

# css - 调整窗口大小时右侧的 CSS 水平菜单项重叠

> ID：16157680
> 
> 赞同：3
> 
> 时间：2013-04-22T22:17:37.017
> 
> 标签：css, position, css-float, window-resize

我已经搜索但无法找到解决方案。

我有一个 CSS 水平菜单，导航菜单向左对齐，工具栏项向右对齐。浏览器窗口展开时看起来不错，但是当它缩小时，右侧工具栏与左侧的导航菜单项重叠。显然这是因为我已经正确定位了它，但我不确定如何解决这个问题。是否可以防止工具栏重叠，而是隐藏并产生水平滚动条？

请参阅我的 jsfiddle [http://jsfiddle.net/e9etC/2/](http://jsfiddle.net/e9etC/2/)

HTML：

```
<div id="navcontainer">
<div id="menu">
    <ul>
        <li><a href="#">AAAAA</a></li>
        <li><a href="#">BBBBB</a>
            <ul>
                <li><a href="#">xxxxx</a></li>
                <li><a href="#">xxxx</a></li>
                <li><a href="#">dddd</a></li>
                <li><a class="menuparent" href="#">cccccc</a>
                    <ul>
                        <li><a href="#">1111</a></li>
                        <li><a href="#">2222</a></li>
                        <li><a href="#">333</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">CCCCC</a>
            <ul>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
                <li><a class="menuparent" href="#">SubMenu</a>
                    <ul>
                        <li><a href="#">SubSubMenu</a></li>
                        <li><a href="#">SubSubMenu</a></li>
                    </ul>
                </li>
                <li><a href="#">SubMenu</a></li>
            </ul>
        </li>
        <li><a href="#">DDDDD</a>
            <ul>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
            </ul>
        </li>
        <li><a href="#">EEEE</a>
            <ul>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
                <li><a href="#">SubMenu</a></li>
            </ul>
        </li>
        <li><a href="#">GGGGG</a></li>
    </ul>
</div>
<div id="toolbar">
    <ul>
        <li class="currentclient"><a title="Most recently selected client" href="#">1234567: John Doe</a></li>
        <li>Client Search</li>
        <li><input name="cpc" title="Search by client code, names, email address, phone numbers or CSN." id="cpc" style="width: 150px;" type="text"/></li>
        <li><input name="btnCP" class="inputbutton" id="btnCP" type="button" value="Search"/></li>
    </ul>
</div> 
```

CSS：

```
html, body
{
    padding: 0;
    margin: 0;
}

body
{
    font-size: 8pt;
    font-family: Arial, Helvetica, sans-serif;
    background-color: #eaeaea;
}

#navcontainer
{
    position: fixed;        
    top: 14px;
    left: 0;
    width:100%;
    height: 28px;
    background-color: #F5F5F5;
}

#navcontainer, #menu ul ul, #menu ul ul ul
{
    border-top: 1px solid #FFF;
    border-left: 1px solid #FFF;
    border-right: 1px solid #808080;
    border-bottom: 1px solid #808080;
}

#menu, #toolbar{

    padding:0;
    margin:0;
    position: absolute;
}
#menu ul, #toolbar ul{
    padding:0;
    margin:0;
}
#menu li, #toolbar li{
    position: relative;
    list-style: none;
    margin: 0;
    padding:0;
    white-space: nowrap;
} 

#menu li a, #toolbar li a{
    height: 28px;
    display: block;
    text-decoration:none;
    line-height: 28px;
    color: #000;
    padding: 0 10px;
    white-space: nowrap;
} 

#menu ul ul li a, #menu ul ul ul li a
{
    line-height: 20px;
    height: 20px;
}

#menu li a:hover{
    background-color: #A9A9A9;
    color: #fff;
} 
#menu ul ul, #menu ul ul ul {
    position: absolute;
    visibility: hidden;
}

#menu ul ul ul {
    left: 100%;
    top: 0;
    margin-top: -1px;
}

#menu ul li:hover > ul, #menu ul ul li:hover ul{
    visibility:visible;
}
#menu > ul > li > a {
    text-align:center;
}

#menu > ul, #toolbar > ul { 
    white-space: nowrap;
}
#menu > ul > li {
  display: inline-block;
  float: none;
  border-left: 1px solid #808080;
  margin: 0 -3px 0 0;
}
#menu ul li:first-child
{
    border-left: none;
}

#menu  a.menuparent
{
    background-image: url(greyarrow.gif);
    background-position: right center;
    background-repeat: no-repeat;
}

#toolbar
{
    right: 3px;
}

#toolbar > ul > li
{
    display: inline-block;
    float: none;
}
#toolbar .currentclient a {
    color: #1B70E0;
    text-decoration: underline;
}
.inputbutton
{
    border: solid 1px #8a9ab2;
    padding: 5px;
    padding-top: 0;
    cursor: pointer;
    height: 22px;
    background-color: #c6d2e7;
    color: #2a3341;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:25:29.407

那是因为你已经`position: absolute`为你的元素指定了。更改以下规则的定义将解决您的问题**[Checkout this Jsfiddle](http://jsfiddle.net/FZvru/)**

```
#menu, #toolbar{
    display: table-cell;
    width: 80%;
}

#toolbar{
    padding-right: 3px;
    text-align: right;
} 
```

# asp.net-mvc - 使用 Helper 方法和编辑器模板呈现复选框的 3 列表

> ID：16157683
> 
> 赞同：2
> 
> 时间：2013-04-22T22:18:18.423
> 
> 标签：asp.net-mvc, mvc-editor-templates, helpermethods

下面的代码取自本教程的讲师编辑视图：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the- asp-net-mvc 应用程序中的实体框架](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

```
 <div class="editor-field">
        <table style="width: 100%">
            <tr>
                @{
                    int cnt = 0;
                    List<ContosoUniversity.ViewModels.AssignedCourseData> courses = ViewBag.Courses;

                    foreach (var course in courses) {
                        if (cnt++ % 3 == 0) {
                            @:  </tr> <tr> 
                        }
                        @: <td> 
                            <input type="checkbox" 
                                   name="selectedCourses" 
                                   value="@course.CourseID" 
                                   @(Html.Raw(course.Assigned ? "checked=\"checked\"" : "")) /> 
                            @course.CourseID @:&nbsp; @course.Title
                        @:</td>
                    }
                    @: </tr>
                }
        </table>
    </div> 
```

此代码呈现以下课程复选框：

[编辑查看 http://i2.asp.net/media/2577999/Windows-Live-Writer_Updating-Re.NET-MVC-Application-6-of-10h_AEF7_Instructor_edit_page_with_courses_1.png](http://i2.asp.net/media/2577999/Windows-Live-Writer_Updating-Re.NET-MVC-Application-6-of-10h_AEF7_Instructor_edit_page_with_courses_1.png)

使用辅助方法和编辑器模板实现相同的结果会更优雅，对吧？例如：

**看法**

```
 <div class="editor-field">
        <table style="width: 100%">
            @Html.EditorFor(model => model.courses)
        </table>
    </div> 
```

**编辑器模板**

```
@model AssignedCourseData
@using ContosoUniversity.ViewModels

<tr>
<td>
    @Html.HiddenFor(model => model.CourseID)    
    @Html.CheckBoxFor(model => model.Assigned)
    @Html.DisplayFor(model => model.CourseName)
</td>
</tr> 
```

除了这不会将复选框呈现为 3 列表。有人可以建议怎么做吗？

# java - 如何合并/联合两个 OSGi 容器？

> ID：16157685
> 
> 赞同：2
> 
> 时间：2013-04-22T22:18:26.377
> 
> 标签：java, osgi, containers, fuseesb

我在两台虚拟机上安装了 FUSE ESB Enterprise。

1.  虚拟机 vm1 上的 FUSE ESB OSGi 容器，假设安装了三个包：

    FuseESB:karaf@vm1>osgi:list

    251 一个

    252乙

    253℃

2.  虚拟机 vm2 上的 FUSE ESB OSGi 容器，假设安装了三个包：FuseESB:karaf@vm2>osgi:list

    251 一个

    252乙

    253℃

我的目标是合并或联合这两个 OSGi 容器，以便 vm1 上的容器可以看到包 B 以及来自 vm2 的所有其他包。vm2 上的容器也可以看到包 A 以及来自 vm1 的所有其他包。也就是说，一个容器可以访问另一个容器中的所有包。

通过访问，我的意思是启动/停止/更新捆绑包并从另一个容器中发现/使用服务。

联合后，从 vm1：

```
FuseESB:karaf@vm1>osgi:list

251 A

252 B

253 C

254 A'

255 B'

256 C' 
```

因为两个容器都有同一个名为 A 的包，我想知道是否有某种机制可以自动将 A 重命名为 A' 以避免名称冲突。有可能实现这个目标吗？任何人都可以向我提供一些有关这样做的信息吗？

# c++ - C++中的数组初始化

> ID：16157688
> 
> 赞同：0
> 
> 时间：2013-04-22T22:18:45.507
> 
> 标签：c++, arrays, string, initialization

我是 C++ 新手，我想知道这是否有效。

所以我想创建一个字符串数组，但我不知道我需要的数组的大小，直到一个值被传递给我正在工作的类中的一个函数。所以，我可以这样做：

```
string sList[];

void init(unsigned int size=1)
{
    sList = new string[size];

 } 
```

如果这是一个愚蠢的问题，我很抱歉，但我是 C++ 新手。

编辑：这是一个涉及我编写数组包装类的作业。如果我可以使用vector<>，相信我，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:20:53.713

这是正确的，虽然`string sList[]`应该是`string *sList`。不要忘记`delete [] sList`最后的。

正如许多其他人所说，您可以`std::vector`根据需要使用，但对数组进行一些练习是了解内存管理如何工作的绝佳方式，我鼓励您进一步探索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:20:57.547

新*表达式*（例如`new string[size]`）返回指向动态分配对象的指针。在这种情况下，它返回一个指向`string`动态分配数组中第一个对象的指针。所以要使这项工作，`sList`应该是一个指针：

```
string* sList; 
```

请务必记住，您必须始终`delete`/和使用/`delete[]`创建的对象。所以你必须在某个时候。如果你不这样做，分配给s 数组的内存将“永远”不会被释放。`new``new[]``delete[] sList``string`

但是，如果您使用 a`std::vector<std::string>`而不是自己进行动态分配，那么您的情况会好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:21:29.097

在 C++ 中执行此操作的正确方法：

```
#include <string>
#include <vector>

std::vector<std::string> sList;

void init(unsigned int size = 1)
{
    sList.resize(size);
}

int main()
{
    init(25);
} 
```

# ruby-on-rails - 使用 devise 和 cancan 进行嵌套资源授权

> ID：16157690
> 
> 赞同：0
> 
> 时间：2013-04-22T22:19:00.973
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2, cancan

如何正确授权与 devise 和 cancan 嵌套的资源？我已经实施了文档中建议的程序，但没有成功。

此问题涉及能力模型未使用 devise 和 cancan gem 从嵌套资源的*第三层获取用户 ID。*但是，我能够从*辅助*层获取用户 ID。任何帮助是极大的赞赏！

我有一个像这样的嵌套资源：

```
 resources :users do
    resources :clients do
      resources :positions
    end
  end

  resources :clients do
    resources :positions
  end

  resources :users do
    resources :positions
  end

  resources :users
  resources :clients
  resources :positions 
```

使用`position`以下模型控制器：

```
class PositionsController < ApplicationController
  before_filter :grab_client_from_client_id
  load_and_authorize_resource :user
  load_and_authorize_resource :client, through: :user, shallow: true
  load_and_authorize_resource :position, through: :client, except: [:index], shallow: true
  ...
end 
```

能力.rb 文件：

```
class Ability
  include CanCan::Ability

  def initialize(user)

    user ||= User.new # guest user (not logged in)

    if user.has_role? :admin
      can :manage, :all
    elsif user.has_role? :management
      can [:create, :read, :update], :all
    else
      can :read, :all, user_id: user.id
    end

  end
end 
```

这会导致非管理员/非管理用户收到以下错误：

`undefined method 'user_id' for #<User:0x5227d40>`

显然有些东西没有正确设置。我一遍又一遍地浏览了每个 gem 的文档，并到处寻找解决方案。

我还将在下面提供我的模型关系。

* * *

```
class User < ActiveRecord::Base
  has_many :clients
  has_many :positions, through: :clients
  resourcify
  ...
end

class Client < ActiveRecord::Base
  resourcify
  has_many :checklogs
  has_many :positions
  belongs_to :user
end

class Position < ActiveRecord::Base
  resourcify
  belongs_to :client
  delegate :user, to: :client, allow_nil: true
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:45:08.723

问题出在这一行：

```
can :read, :all, user_id: user.id 
```

当您检查用户是否可以阅读某些内容时，它会检查您正在尝试阅读的内容。

由于您的控制器中有这一行：

```
load_and_authorize_resource :user 
```

您尝试授权的资源是用户。

你的能力将`user.user_id`与`current_user.id`。用户没有`user_id`，所以这就是错误的来源。

根据您的代码，我怀疑您希望用户只能阅读他的东西，除非他是经理或管理员。

您可以通过以下方式实现此目的：

```
if user.has_role? :admin
  can :manage, :all
elsif user.has_role? :management
  can [:create, :read, :update], :all
else
  can :read, User, id: user.id
  can :read, Client, user_id: client.id
  can :read, Position, client: { user_id: user.id }
end 
```

这样，用户只能访问与他有关系的那些模型。

# c# - C#跨线程操作在调用后无效

> ID：16157692
> 
> 赞同：2
> 
> 时间：2013-04-22T22:19:16.693
> 
> 标签：c#, multithreading, invoke

我有跨线程操作的问题。

我有以下方法

```
 private void UpdateLabel(string text)
    {
        if (this.richTextRxMessage.InvokeRequired)
        {
            this.Invoke(new Action(() => this.UpdateLabel(text)));
            return;
        }
        else
        {
            this.richTextRxMessage.AppendText(text);
        }
    } 
```

我称之为

```
UpdateLabel(richTextRxMessage.Text + szData); 
```

我不明白为什么我仍然得到这个异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:36:26.383

定义一个像

```
 public delegate void UpdateFormText(string text); 
```

并改变你的方法，比如

```
private void UpdateLabel(string text)
{
    if (!this.richTextRxMessage.InvokeRequired)
    {
        this.richTextRxMessage.Text=text;

    }
    else
    {
        var s = new UpdateFormText(UpdateLabel);
        Invoke(s, new object[] { text});
    }
} 
```

# python - TypeError：“浮动”对象没有属性“__getitem__”

> ID：16157694
> 
> 赞同：1
> 
> 时间：2013-04-22T22:19:22.070
> 
> 标签：python

此代码是开始尝试将 csv 文件读入几个列表。我收到下面的错误，我不明白为什么没有返回浮点数。谢谢你的帮助！

```
 File "main.py", line 32, in <module>
     LR.openfile('djia_temp.csv')  
 File "main.py", line 9, in openfile
     self.xs = self.tempDiff(dataAvgandtemp)   
 File "main.py", line 18, in tempDiff
     tdArray.append([vector[0]-vector[1]]) 
 TypeError: 'float' object has no attribute '__getitem__' 
```

代码：

```
from processFile import processFile
import numpy as np

class processFile:

    @staticmethod
    def wholeFile(f):
        fileArray = []
        for line in f:
            fileArray.append(line.strip())
        return fileArray

    @staticmethod
    def liner(rows, columns, delimiter):
        vectors = []
        for row in rows:
            vector = []
            tok = row.split(delimiter)
            for num in columns:
                vectors.append(float(tok[num]))
        return vectors

class linRegmain:
    def openfile(self, file):
        f = open(file)
        a = processFile.wholeFile(f)[1:]
        dataAvgandtemp = processFile.liner(a, [2,3], ";")
        self.xs = self.tempDiff(dataAvgandtemp)
        self.ys = processFile.liner(a,[1], ";")
        print self.xs
        print self.ys

    def tempDiff(self, vectors):
        tdArray = []
        for vector in vectors:
            tdArray.append([vector[0]-vector[1]])
        return tdArray

if __name__ == '__main__':
    LR = linRegmain()
    LR.openfile('djia_temp.csv') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:28:56.893

`liner()`声称返回向量列表。它不是。您正在制作一个`float`s 列表：

```
vectors.append(float(tok[num])) 
```

因此，当您`tempDiff()`使用结果调用时，`vector`is a`float`会`vector[0]`引发异常。

我认为这是它应该做的：将每个浮点数添加到当前向量，然后将向量添加到结果中：

```
@staticmethod
def liner(rows, columns, delimiter):
    vectors = []
    for row in rows:
        vector = []
        tok = row.split(delimiter)
        for num in columns:
            vector.append(float(tok[num])) # append to vector, not vectors
        vectors.append(vector)             # then append the vector to the result
    return vectors 
```

# svn - 如何将分支合并到主干，包括文件删除和文件添加？

> ID：16157698
> 
> 赞同：0
> 
> 时间：2013-04-22T22:19:35.150
> 
> 标签：svn, merge

使用“svn merge --reintegrate”成功地将分支合并回主干，关于在主干上删除的分支文件也被删除。这是我所期待和想要的。好的。

但是，它没有将文件添加到分支上添加的主干。虽然“svn merge --reintegrate”将添加的文件**复制**到主干工作目录，但它们没有添加到 svn，当然也没有提交。我没想到会这样。坏的。

如何安全地将分支合并到主干更改，包括文件删除和文件添加？

**这是我所做的**

my-bug-fix 分支是从主干上的最后一个正式版本创建的。这是一个单一的开发者项目，但我仍然设法弄乱了合并并破坏了构建。

在合并之前，我将分支和主干都检出到“暂存”文件夹中，以便于区分。我希望差异能够向我保证合并是我在提交之前所期望的。不幸的是，diff 不知道添加的文件尚未添加到 svn。

```
mkdir merge-staging
cd merge-staging
svn co https://myserver.com:8443/svn/myproject/branches/my-bug-fix/ branch
svn co https://myserver.com:8443/svn/myproject/trunk/ trunk
cd trunk
svn merge --reintegrate https://myserver.com:8443/svn/myproject/branches/my-bug-fix/
echo Perform diff between branch and trunk to verify the trunk now matches branch.
diff -r  --exclude=".svn" branch/ trunk/

svn --version
svn, version 1.6.15 (r1038135)
   compiled Nov 25 2010, 00:08:34

[esutton@esutton-vm-rhel merge]$ svn status trunk
X       trunk/common/externals
?       trunk/common/scripts/strip-dbg-sym.sh 
```

提前感谢任何方向，-Ed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:46:20.203

1.  如果`merge --reintegrate`，为什么在它之前看不到合并到 my-bug-fix 分支的主干？
2.  为什么我看不到真正的命令输出？
3.  为什么我看不到你的`svn --version`？
4.  为什么我看不到'svn log -v -q' for your repo for rev-in-question？
5.  `svn status`而不是 diff 将可用

回到问题：

我无法确认或重现所描述的效果

```
>svn log -v file:///Z:/Repo
------------------------------------------------------------------------
r9 | Badger | 2013-04-23 07:32:26 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   M /trunk
   M /trunk/fleA.txt
   D /trunk/fleB.txt
   A /trunk/fleC.txt (from /branches/corrections/fleC.txt:8)

Reintegrated branch to trunk
------------------------------------------------------------------------
r8 | Badger | 2013-04-23 07:30:04 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   M /branches/corrections
   M /branches/corrections/fleA.txt

Merged trunk to branches/corrections
------------------------------------------------------------------------
r7 | Badger | 2013-04-23 07:25:40 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   D /branches/corrections/fleB.txt

Deleted fleB.txt
------------------------------------------------------------------------
r6 | Badger | 2013-04-23 07:24:57 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   A /branches/corrections/fleC.txt

Added fleC.txt
------------------------------------------------------------------------
r5 | Badger | 2013-04-23 07:23:37 +0600 (Вт, 23 апр 2013) | 2 lines
Changed paths:
   M /branches/corrections/fleA.txt

Added string to fleA.txt

------------------------------------------------------------------------
r4 | Badger | 2013-04-23 07:22:12 +0600 (Вт, 23 апр 2013) | 2 lines
Changed paths:
   M /trunk/fleA.txt

Edited fleA.txt

------------------------------------------------------------------------
r3 | Badger | 2013-04-23 07:20:25 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   A /branches/corrections (from /trunk:2)

Branch for changes
------------------------------------------------------------------------
r2 | Badger | 2013-04-23 07:17:25 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   A /trunk/fleA.txt
   A /trunk/fleB.txt

Starting point
------------------------------------------------------------------------
r1 | Badger | 2013-04-23 07:15:06 +0600 (Вт, 23 апр 2013) | 1 line
Changed paths:
   A /branches
   A /tags
   A /trunk

Imported folder structure
------------------------------------------------------------------------ 
```

* * *

```
>svn ls -v file:///Z:/Repo/trunk
      9 Badger                апр 23 07:32 ./
      9 Badger             52 апр 23 07:32 fleA.txt
      9 Badger             40 апр 23 07:32 fleC.txt 
```

# python - 使用 Inno Setup 的 Python 分发模块

> ID：16157700
> 
> 赞同：2
> 
> 时间：2013-04-22T22:19:39.070
> 
> 标签：python, inno-setup, distutils

是否可以分发我使用 Inno Setup 而不是 Python distutils 制作的 Python 库？我说的是 distutils Windows 安装程序。如果是这样，怎么做？这些模块位于[https://code.google.com/p/mathworks/](https://code.google.com/p/mathworks/)。

**编辑：**我在谷歌搜索方面取得了一些进展。这是我的设置脚本，但它找不到 Python。也许有人可以帮忙。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{3B6685C2-D478-4410-B973-57FA36A6DA6D}
AppName=Mathworks
AppVersion=1.3
;AppVerName=Mathworks 1.3
AppPublisherURL=https://code.google.com/p/mathworks/
AppSupportURL=https://code.google.com/p/mathworks/
AppUpdatesURL=https://code.google.com/p/mathworks/
DefaultDirName={code:GetDirName}
DisableDirPage=yes
DefaultGroupName=My Program
DisableProgramGroupPage=yes
LicenseFile=C:\Users\Ryan\Documents\mathworks-git\LICENSE_1_0.txt
OutputDir=C:\Users\Ryan\Desktop
OutputBaseFilename=mathworks-mwver
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Files]
Source: "C:\Users\Ryan\Documents\mathworks-git\__init__.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\exponent.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\LICENSE_1_0.txt"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\multiples.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\ptheorem.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\shapes.py"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Code]
var CancelWithoutPrompt: boolean;

function InitializeSetup() : Boolean;
begin
  CancelWithoutPrompt := false;
  result := true;
end;

function GetDirName(Value: string): string;
var          
  InstallPath: string;
begin
  if RegQueryStringValue(HKLM, 'SOFTWARE\Python\PythonCore\2.7\InstallPath', '(Default)', InstallPath) then
    BEGIN
    Result := InstallPath
  END else
  if RegQueryStringValue(HKCU, 'SOFTWARE\Python\PythonCore\2.7\InstallPath', '(Default)', InstallPath) then
    BEGIN
    Result := InstallPath;
  END else
  if RegQueryStringValue(HKLM, 'SOFTWARE\Wow6432Node\Python\PythonCore\2.7', '(Default)', InstallPath) then
    BEGIN
    Result := InstallPath;
  END else
    MsgBox('Could not find Python',mbError,MB_OK);
    CancelWithoutPrompt := true;
    WizardForm.Close;
end;

procedure CancelButtonClick(CurPageID: Integer; var Cancel, Confirm: Boolean);
begin
  if CurPageID=wpInstalling then
    Confirm := not CancelWithoutPrompt;
end; 
```

我从[Inno Setup - Setting DefaultDir 使用通配符注册表项获得了代码？](https://stackoverflow.com/questions/15613178/inno-setup-setting-defaultdir-using-wildcard-registry-entry)和[Inno 设置：如何在安装期间中止/终止设置？](https://stackoverflow.com/questions/6345920/inno-setup-how-to-abort-terminate-setup-during-install).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T21:23:05.083

我想到了！我的代码：

```
#define AppName "Mathworks"
#define AppDir "mathworks"
#define PyVer "2.7"
#define AppVer "1.3:

[Setup]
AppId={{3B6685C2-D478-4410-B973-57FA36A6DA6D}
AppName={#AppName}
AppVersion={#AppVer}
AppVerName=Mathworks {#AppVer}
AppPublisherURL=https://code.google.com/p/mathworks/
AppSupportURL=https://code.google.com/p/mathworks/
AppUpdatesURL=https://code.google.com/p/mathworks/
DefaultDirName={code:GetDirName}
DefaultGroupName={#AppName}
DisableProgramGroupPage=yes
LicenseFile=C:\Users\Ryan\Documents\mathworks-git\LICENSE_1_0.txt
OutputDir=C:\Users\Ryan\Desktop\Inno Setup
OutputBaseFilename=mathworks-{#AppVer}-python-{#PyVer}
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Files]
Source: "C:\Users\Ryan\Documents\mathworks-git\__init__.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\exponent.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\LICENSE_1_0.txt"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\multiples.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\ptheorem.py"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\Users\Ryan\Documents\mathworks-git\shapes.py"; DestDir: "{app}"; Flags: ignoreversion

[Code]
procedure ExitProcess(exitCode:integer);
  external 'ExitProcess@kernel32.dll stdcall';

function GetDirName(Value: string): string;
var          
  InstallPath: string;
  reg1 : string;
  reg2 : string;
begin
  reg1 := 'SOFTWARE\Python\PythonCore\' + '{#PyVer}' + '\InstallPath';
  reg2 := 'SOFTWARE\Python\PythonCore\Wow6432Node\' + '{#PyVer}' + '\InstallPath';
  if RegQueryStringValue(HKLM, reg1, '', InstallPath) then
    BEGIN
    Result := InstallPath + 'Lib\site-packages\' + '{#AppDir}';
  END else
  if RegQueryStringValue(HKCU, reg1, '', InstallPath) then
    BEGIN
    Result := InstallPath + 'Lib\site-packages\' + '{#AppDir}';
  END else
  if RegQueryStringValue(HKLM, reg2, '', InstallPath) then
    BEGIN
    Result := InstallPath + 'Lib\site-packages\' + '{#AppDir}';
  END else
    BEGIN
    MsgBox('Could not find Python',mbError,MB_OK);
    ExitProcess(1);
   END
end; 
```

# c# - 使用嵌入的文本到语音

> ID：16157702
> 
> 赞同：0
> 
> 时间：2013-04-22T22:19:41.490
> 
> 标签：c#, asp.net, .net, text-to-speech

我有这段代码，它工作正常，但我一直在努力让它输出一个可以嵌入页面的 wav 文件，而不是让用户下载和收听。任何帮助是极大的赞赏。我希望能够使用查询字符串直接调用该文件，以便它与验证码文本匹配。Model.InstanceData["Code"] 是文本字符串中的验证码。我似乎无法绕过它。谢谢！

```
private void _playBtn_Click(object sender, ImageClickEventArgs e)
{
    HttpContext context = HttpContext.Current;

    if (context == null || context.Response == null)
    {
        return;
    }

    context.Response.Clear();

    context.Response.AddHeader("content-disposition", "attachment; filename=" + "captcha.wav");
    context.Response.AddHeader("content-transfer-encoding", "binary");

    context.Response.ContentType = "audio/wav";

    SoundGenerator soundGenerator = new SoundGenerator(Model.InstanceData["Code"]);

    MemoryStream sound = new MemoryStream();

    // Write the sound to the response stream 
    soundGenerator.Sound.Save(sound, SoundFormatEnum.Wav);

    sound.WriteTo(context.Response.OutputStream);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:36:04.323

基本上，在解决了很多问题之后，解决方案比我想象的要简单一些。我在我的项目中创建了一个新的 CaptchaPlayer.aspx 播放器，并且在后面的代码中使用了这个：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        PlayCaptchaSession();
    }

    private void PlayCaptchaSession()
    {
        object o = Session["captcha"];

        if (o != null)
        {
            HttpContext context = HttpContext.Current;

            if (context == null || context.Response == null)
            {
                return;
            }

            //context.Response.AddHeader("content-disposition", "inline; filename=" + "captcha.wav");
            context.Response.AddHeader("content-transfer-encoding", "binary");
            context.Response.ContentType = "audio/wav";
            SoundGenerator soundGenerator = new SoundGenerator(o as string);
            MemoryStream sound = new MemoryStream();
            // Write the sound to the response stream 
            soundGenerator.Sound.Save(sound, SoundFormatEnum.Wav);
            sound.WriteTo(context.Response.OutputStream);
        }
    }

} 
```

之后，我能够将嵌入添加到表单页面

```
 <embed id='captchaAudio' width='1' height='1' enablejavascript='true' autostart='false' name='Verification code player' src='/CaptchaPlayer.aspx'>
                <noembed><a href='/CaptchaPlayer.aspx' title='Verification code wave audio file download'>Audio File</a></noembed>
                 <script type="text/javascript">
                 $(document).ready(function(){
                     $(".capLink").click(function () {
                         //alert(".click() called.");
                         document.getElementById('captchaAudio').Play();

                     });
                 });    
                </script> 
```

这就是诀窍！我希望这可以帮助别人。

# java - Jasper Print - Java 堆空间内存

> ID：16157704
> 
> 赞同：2
> 
> 时间：2013-04-22T22:19:48.507
> 
> 标签：java, jvm, jasper-reports

我正在使用 Jasper Reports 生成报告。但是我有来自数据库的大量数据。在执行 Jasper 打印以填充报告数据时，它会占用大量内存并导致 Java 堆空间内存问题。

```
JasperPrint jasperPrint = JasperFillManager.fillReport(
                    jasperReport, params, dataSource); 
```

这是花费大量时间并给出错误的行。请帮助我，如何摆脱这个问题。

```
Stackrace : 
java.lang.OutOfMemoryError: Java heap space
    at net.sf.jasperreports.engine.fill.JRFillTextField.fill(JRFillTextField.java:691)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.fillElements(JRFillElementContainer.java:570)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:390)
    at net.sf.jasperreports.engine.fill.JRFillBand.fill(JRFillBand.java:351)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2039)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:771)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportContent(JRVerticalFiller.java:301)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:148)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:841)
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:88)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:653)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:969)
    at com.jci.eprt.web.controller.report.ReportController.previewEngineeringReport(ReportController.java:250)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.jci.eprt.service.utility.helper.JCIUserFilter.doFilter(JCIUserFilter.java:39)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:32:45.280

当您处理具有大量结果集的报表时，这是一个常见问题。一个明显的解决方案是不要一次读取整个结果集，而是尝试逐步读取它。

[Java DevZone：在 JasperReports 中生成大量报告中](http://itblackbelt.wordpress.com/2008/02/29/generating-huge-reports-in-jasperreports/)提供了有关处理此问题的详细说明。在这个参考中写了几行：

> 在为大型数据集实施 Jasper Reports 以有效处理内存时，需要注意一些事项，以免应用程序内存不足。
> 
> 他们是：
> 
> 1）数据的分页和JRDataSource的使用，
> 
> 2）报告的虚拟化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:08:08.497

Tomcat Web 服务器经常遇到 java.lang.OutOfMemoryError: PermGen space 每当您部署-取消部署您的 Web 应用程序几次。无论您使用的是 tomcat6、tomcat7 还是在 Netbeans 或 Eclipse 中使用捆绑的 tomcat，在 tomcat 服务器上开发 Web 应用程序时都会不时遇到此错误。

尝试增加 PermGen 堆的空间。你可以参考这个[链接](http://javarevisited.blogspot.in/2012/01/tomcat-javalangoutofmemoryerror-permgen.html)

# .net - 自由格式生成器

> ID：16157710
> 
> 赞同：-4
> 
> 时间：2013-04-22T22:20:33.557
> 
> 标签：.net, webforms

我想知道是否有可以用于我的网站的表单生成器/编辑器？最好基于.Net

我将允许站点管理员创建表单并保存它们，以便用户可以填写表单并保存数据。我可以处理表单和数据的使用，但如果可能的话，我宁愿避免创建 UI。

那里有许多免费的表单编辑器，但据我了解，它们都会生成 HTML，您可以将其插入您的网站。这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:42:44.217

只需谷歌搜索即可..

[http://www.dotnetgoodies.com/form_builder.aspx](http://www.dotnetgoodies.com/form_builder.aspx)

特点包括：

“即时表单构建器：创建一个完整的表单，并在几分钟内完成一个管理系统。”

希望这是你想要的。

# ruby-on-rails - ActiveRecord 在 db:reset 之后寻找用户 ID=1

> ID：16157712
> 
> 赞同：2
> 
> 时间：2013-04-22T22:20:43.103
> 
> 标签：ruby-on-rails, ruby, activerecord

我重置了我的数据库并在每个页面上都收到此错误：

```
ActiveRecord::RecordNotFound in HomeController#index

Couldn't find User with id=1

lib/authenticated_system.rb:15:in `current_user'
lib/authenticated_system.rb:23:in `logged_in?'
lib/authenticated_system.rb:36:in `login_required' 
```

中的违规代码`authenticated_system.rb`是：

```
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id].present?
end 
```

所以我不确定为什么它会寻找 id=1 的用户。没有用户。`current_user`不应该返回任何东西。为什么我会收到此错误？

供参考，`logged_in?`是：

```
def logged_in?
 !current_user.nil?
end 
```

并且`login_required`：

```
def login_required
  logged_in? && authorized? ? true : access_denied
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:25:25.757

您是否关闭了浏览器并重新启动了它？

无论您的浏览器打开多长时间，会话都会存在。仅仅因为您重置了数据库并不意味着会话消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:29:38.420

如果找不到记录，User.find 将引发异常 ActiveRecord::RecordNotFound。您可能想使用 User.find_by_id 如果找不到任何东西，它将返回 nil 。这样，如果会话引用了一个不存在的 user_id（如在这种情况下，当您重置数据库时，但会话 cookie 仍然存在 - 如果用户被删除也会发生），您将获得所需的结果。

# java - java - 如何根据java中的属性文件调用单例类的实例？

> ID：16157714
> 
> 赞同：1
> 
> 时间：2013-04-22T22:20:53.107
> 
> 标签：java, properties, junit, singleton, instance

我有一个快速的 Java 问题。哦，我对 Java 和 stackoverflow 都很陌生，所以请体谅:)

让我试着更好地解释我的问题。所以我有两个遵循单例模式的类，比如 A 类和 B 类：

```
public class A
{
    private static final A INSTANCE = new A()

    public static A getInstance()
    {
         return A.INSTANCE;
    }
}

public class B
{
    private static final B INSTANCE = new B()

    public static B getInstance()
    {
         return B.INSTANCE;
    }
} 
```

现在我正在从另一个类访问这些类的实例，比如说 C：

```
public class testClassC
{
    A class_instance = A.getInstance();
    //or
    //B class_instance = B.getInstance();
} 
```

我想要实现的是（此时的语法可能完全错误，我一直在尝试不同的东西，但没有一个对我有用）：

有一个 .properties 文件，如下所示：

```
 className=A 
```

然后以某种方式从该属性文件中读取类名，以便当我将 A 更改为 B 时，我的 testClassC 将为我获取 B 的实例。

我怎样才能做到这一点？哦，又一次 testClassC 是一个测试类，我有一大堆 JUnit 测试类，那么解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:42:45.193

这是一个使用抽象工厂模式的示例。

你有一个`interface`定义你的类 - 你需要这个，以便你可以抽象实际的实现。

然后你有一个定义`newInstance`方法的工厂接口。这使得将单例模式替换为工厂模式变得非常容易。它还使更改工厂实现以进行测试变得容易。

```
interface MyInterface {
}

interface MyInterfaceFactory {

    MyInterface newInstance();
}

class MyInterfaceFactoryFromProperties implements MyInterfaceFactory {

    final Class<? extends MyInterface> myInterfaceImpl;

    {
        final Properties properties = new Properties();
        try {
            properties.load(MyInterfaceFactoryFromProperties.class.getResourceAsStream("className.properties"));
        } catch (IOException ex) {
            throw new ExceptionInInitializerError(ex);
        }
        final String className = properties.getProperty("class.name");
        try {
            myInterfaceImpl = (Class<? extends MyInterface>) MyInterfaceFactoryFromProperties.class.forName(className);
        } catch (ClassNotFoundException ex) {
            throw new ExceptionInInitializerError(ex);
        }
    }

    @Override
    public MyInterface newInstance() {
        try {
            return myInterfaceImpl.newInstance();
        } catch (InstantiationException ex) {
            throw new RuntimeException(ex);
        } catch (IllegalAccessException ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

因此，您的工厂实现将遵循此模式，但例如，您可以缓存该值以使其成为单例。

此方法从类路径加载属性文件 - 显然这可以更改为文件系统位置。

# python - 如何使用 urllib 跟踪重定向？

> ID：16157719
> 
> 赞同：1
> 
> 时间：2013-04-22T22:21:03.920
> 
> 标签：python, redirect, python-3.x, urllib2, urllib

我正在 Python 3 中创建一个脚本，该脚本访问如下页面：

> example.com/daora/zz.asp?x=qqrzzt

使用 urllib.request.urlopen("example.com/daora/zz.asp?x=qqrzzt")，但是这段代码只给了我相同的页面（example.com/daora/zz.asp?x=qqrzzt）和在浏览器上，我重定向到如下页面：

> example.com/egg.aspx

我能做些什么来检索

> example.com/egg.aspx

而不是

> example.com/daora/zz.asp?x=qqrzzt

我认为这是相关代码，这是来自“example.com/daora/zz.asp?x=qqrzzt”的代码：

```
<head>

<script language="JavaScript">

<!--
    function Submit()

    {
        document.formzz.submit();
    }
-->
</script>

</head>

<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onLoad="javascript:Submit();">

<form name="formZZ" method="post" action="http://example.com/egg.aspx">

<input type="hidden" name="token" value="UFASGFJKASGDJFGAJS">

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:49:14.123

`urllib.request`自动跟随重定向；你不需要做任何事情。

这里的问题是没有重定向可遵循。网页一加载就使用 Javascript 伪造表单提交。`urllib`只是获取页面；它没有实现浏览器 DOM 并运行 Javascript 代码。

根据您需要脚本的通用性，最简单的解决方案可能是一些hacky。例如，如果您只是想爬取 500 个结构相似但细节不同的页面，只需找到`action`第一个页面`form`并导航到该页面。

此外，如果获取页面和处理它们是两个不同的步骤，您可能需要使用超级简单的 Javascript/Greasemonkey（在浏览器中运行，因此它已经有了一个有效的 DOM 实现等）和一个单独的幻想来编写一个提取器Python 中的处理脚本（仅在最终获取/生成的 HTML 页面上运行）。

如果您需要完全通用，最简单的解决方案可能是使用[`selenium`](http://selenium.googlecode.com)浏览器自动化框架。（或者，也许是 PyWin32 或 PyObjC 直接自动化 IE 或 Webkit。）

如果你想要最好的解决方案，并且拥有无限的资源……编写你自己的 DOM 实现并连接你最喜欢的 Javascript 解释器（可能是 spidermonkey 或 v8）。这只是编写新浏览器的 2/3 左右。（你可能会找到让你完成 80% 的工作。例如，如果你愿意使用 Jython 而不是 CPython 作为你的 Python 解释器，那就[`HtmlUnit`](http://htmlunit.sourceforge.net)很巧妙了。）

# javascript - innerHtml 命令不起作用 请建议

> ID：16157721
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:21:05.950
> 
> 标签：javascript

我是 Javascript 的初学者，这是我在 Stackoverflow 上的第一篇文章。我按照一本书来玩一些javascript函数。在这里，我通过 innerHtml 方法存储。它应该可以工作，但事实并非如此。我看了不同的地方，无法弄清楚原因。请帮忙。

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
</head>

<body>
  <a href = "popupA.html" id = "link">Link</a>
  <p id = "p1">paragraph 1</p>
  <p id = "p2">paragraph 2</p>
<script>
document.getElementById('link').href = 'popupB.html'; //works

document.getElementById('p1').innerText = 'sample1'; //works

var a = document.getElementById('p2');

a.innerHtml = "sample 2"; //innerHtml doesn't work here

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:48:25.250

欢迎来到 StackOverflow。你只是有一个错字。该属性是`innerHTML`用大写的 HTML 调用的。

```
a.innerHTML = "sample 2"; // uppercase HTML 
```

下次遇到 JavaScript 问题时，我建议使用调试器（例如，如果您使用的是 Firefox，则为 FireBug）。调试代码比*盯着*它更容易；）

# sql-server - 从 CLR 函数返回唯一标识符

> ID：16157724
> 
> 赞同：1
> 
> 时间：2013-04-22T22:21:16.517
> 
> 标签：sql-server, function, sql-server-2008-r2, clr

我正在为 SQL Server 2008 R2 创建一个 CLR 函数。CLR 函数返回一个`uniqueidentifier`，有时可能是`null`。它在返回值**不是** `null`时起作用。但是，当`null`返回值时，SQL Server 会抛出错误`Specified cast is not valid.`

该函数在数据库中注册：

```
create function MyFunc returns uniqueidentifier as external name AssemblyName.UserDefinedFunctions.MyFunc 
```

## 示例代码

```
[Microsoft.SqlServer.Server.SqlFunction(DataAccess = DataAccessKind.Read)]
public static Guid MyFunc()
{
  using (SqlConnection con = new SqlConnection("context connection=true"))
  {
    con.Open();
    using (SqlCommand cmd = new SqlCommand())
    {
      cmd.Connection = con;
      cmd.CommandText = "select cast('00000000-0000-0000-0000-000000000000' as uniqueidentifier)";
      //cmd.CommandText = "select cast(null as uniqueidentifier)";
      return (Guid)cmd.ExecuteScalar();
    }
  }
} 
```

第一个`CommandText`有效，第二个抛出`Specified cast is not valid`错误。

`Guid`我尝试在第 2 行和第 12行将返回类型从更改为`SqlGuid`，但是 SQL Server 总是抛出`Specified cast is not valid`错误，无论该值是否`null`。

## 问题

`uniqueidentifier`当返回值有时是时，从 CLR 函数返回 a 的正确方法是`null`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:58:12.310

SQL Server 唯一标识符返回无法显式转换为`Guid`.NET 数据类型的二进制结构。

请参阅此处[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ab55037d-6c62-405d-8cac-9e902d867b78](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ab55037d-6c62-405d-8cac-9e902d867b78)解决方案是将其转换为字节 [] （实际上是) 并从中创建一个新的 Guid。

```
Guid g = new Guid(cmd.ExecuteScalar() as byte[]); 
```

当然，您需要测试是否`cmd.ExecuteScalar()`为 null 并创建 Guid.Empty 代替。

我曾假设您的 T-SQL 代码仅用于演示目的，而您正在使用其他目的生成 GUID。另一方面，如果您只需要 SQL Server 中的唯一 GUID，则可以使用 NEWID() 内置函数。

```
select NEWID() 
```

# feed - OpenCart XML 提要 - 仅显示特定类别的产品

> ID：16157727
> 
> 赞同：1
> 
> 时间：2013-04-22T22:21:24.703
> 
> 标签：feed, opencart, categories, product

几天后我放弃了这个——我想不通。

这是我的 OpenCart XML 提要代码的相关部分：

代码：

```
 $this->load->model('catalog/category');

     $this->load->model('catalog/product');

     $this->load->model('tool/image');

     $products = $this->model_catalog_product->getProducts();

     foreach ($products as $product) {
        if ($product['description']) {
           $output .= '<PRODUCT>';
           $output .= '<NAME>' . $product['name'] . '</NAME>';
           $output .= '<DESCRIPTION>' . $product['description'] . '</DESCRIPTION>';
           $output .= '</PRODUCT>'; 
```

我希望能够仅显示某些类别的产品，例如`category_id`.

假设我想展示类别 (id) 中的产品`1`，`2`应该进行哪些更改？

我正在使用 OpenCart 1.5.1.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:53:36.580

如果您查看该`getProducts()`函数，您会发现它接受`array`作为参数。您可以将过滤器参数传递给它，并获取特定类别、制造商等的产品。参数是：

```
filter_category_id
filter_sub_category
filter_filter
filter_name
filter_tag
filter_description
filter_manufacturer_id 
```

[编辑：基于评论 1：示例]

例如，创建一个要作为参数传递的数组（从类别 id 10 及其子类别中获取所有产品）

```
$data = array(
    'filter_category_id' => '10',
    'filter_sub_category' => 'true'
); 
```

然后打电话

```
getProducts($data); 
```

或内联

```
getProducts(array('filter_category_id' => '10')); 
```

如果您需要多个类别，请分别获取它们然后加入它们：

```
$set1 = $this->model_catalog_product->getProducts(array('filter_category_id' => '10'));
$set2 = $this->model_catalog_product->getProducts(array('filter_category_id' => '11'));
$products = $set1 + $set2;
... 
```

# git - GitBlit - 如何忽略空间变化

> ID：16157728
> 
> 赞同：0
> 
> 时间：2013-04-22T22:21:24.910
> 
> 标签：git, gitblit

我们正在使用 GitBlit 运行一个简单的 git 存储库，并使用它来查看特定提交的文件之间的差异。我正在寻找一种可以强制 gitblit 忽略不重要的差异（如行尾或空格）并显示真正改变的设置。如果我在 git bash 中键入 gitk 并选中“忽略空间更改”复选框，这将非常有效。

注意：我是一名 Git 初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T12:34:01.290

从 1.3.1 开始，Gitblit 还没有（还）有忽略空白更改的控件。

从 1.7.x 开始，Gitblit 在差异上具有可配置的空白支持。

# qt - 如何使用 opengl dekstop 选项配置 Qt？

> ID：16157731
> 
> 赞同：6
> 
> 时间：2013-04-22T22:21:37.733
> 
> 标签：qt, opengl, desktop, configure

刚刚安装了 Qt 5.0.2（qt-windows-opensource-5.0.2-mingw47_32-x86-offline；在这里我会说“哇”，因为 IDE 的界面很酷）并且在尝试“时遇到一个警告和一个错误”运行“盒子”示例：

> Qt 是用 ANGLE 构建的，它在 DirectX 9.0c 之上仅提供 OpenGL ES 2.0
> 
> 此示例需要使用 -opengl 桌面配置 Qt

在他们的 wiki 中搜索，但没有找到我应该做些什么来修复它:(

有人想对此多加了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:33:46.840

> 此示例需要使用 -opengl 桌面配置 Qt

这是指`-opengl desktop`配置库构建时可以传递给Qt的构建系统的配置选项。您确实安装了 Qt 的预编译版本，并且无法对其构建选项进行太多更改。您必须下载 Qt 源代码并根据您的配置需要构建它们。

# java - 另一个学习 Java 的难题

> ID：16157736
> 
> 赞同：0
> 
> 时间：2013-04-22T22:21:50.630
> 
> 标签：java

我再次向专家寻求帮助。在我的上一篇文章中，我提到我还在上学，这次我们正在阅读关于接口的一章（书中没有显示代码没有示例）。这次的任务如下“创建一个名为 Tuner 的接口，带有一个方法 tune。创建两个类，分别是 radio 和 guitar 实现这个接口。在 main 中，为每个类创建实例，并为每个实例调用 tune 方法。 " 我觉得我完全在这个轨道上。和以前一样，我不需要解决方案，只需有人再次将其置于 DUMDUM 术语中即可。

这就是我到目前为止所拥有的。

```
public interface Tuner {
public abstract void tune();
}

public class Guitar extends Tuner implements Tune{

 public static void main()  {
public void tune(){

 }}}

public class Radio extends Tuner implements tune{

public static void main(){

}} 
```

我感谢任何关于此事的建议！！！！

这些是我的最新更改：

```
package interfaces;
interface Tuner {
   public abstract void tune();
 }

package interfaces;
class Radio implements Tuner {
 public void tune(){
 }

 }

package interfaces;
class Guitar implements Tuner {
 public void tune(){
 }
  } 
```

请随时告诉我，我仍然在吠叫错误的树。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:24:44.903

这应该会让你朝着正确的方向前进：在 Java 中，我们是`extend`类和`implement`接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:26:12.660

到目前为止我看到的问题：

*   在 Java 中， an`interface`的方法都是`public abstract`如此，因此它们不需要这样声明。
*   Java`class`可以扩展另一个`class`，或者`abstract class`实现一个`interface`. 因此，在您的情况下，您的 Guitar 应该实现 Tuner 类，并且将包含在它实现的接口中声明的方法的实现，在这种情况下是`tune`方法。
*   该`main`方法是应用程序的入口点，您的应用程序应该只需要其中之一。然后，在该方法中，您将创建一个 a`Guitar`的实例和一个 a 的实例，并在每个实例化对象上`Radio`调用该方法。`tune`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:27:17.650

1.  `interface`s 没有`abstract`方法——根据定义，所有方法都是抽象的。
2.  默认情况下，所有成员`interface`都是`public`- 您不需要`public`.
3.  你实现一个`interface`并扩展一个`class`。你需要`implements Tuner`。
4.  `implements Tune`只是多余的。

# xsd - MS BizTalk ESB 工具包 2.0 故障消息的架构

> ID：16157737
> 
> 赞同：1
> 
> 时间：2013-04-22T22:21:52.167
> 
> 标签：xsd, biztalk, esb, biztalk-2009, esb-toolkit-2.0

有谁知道我在哪里可以找到 BizTalk ESB 工具包错误消息的 XSD 副本？我有一个示例 XML 文件，可用于生成这样的模式，但如果有任何未填充的可空元素或类型限制，则生成的模式将无法使用这些元素。我试图找到 XSD 的副本，但到目前为止还没有任何运气。

示例文件中的命名空间和根元素包括在下面：

```
<ns0:FaultMessage xmlns:ns0="http://schemas.microsoft.biztalk.practices.esb.com/exceptionhandling">
    <!-- ... -->
</ns0:FaultMessage> 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T08:43:08.727

该架构安装在 Biztalk 应用程序 Microsoft.Practices.ESB 中。要查看架构，请转到 Biztalk 管理控制台。选择 Microsoft.Practices.ESB 应用程序并选择“架构”。您将看到那里列出的故障模式。要查看架构，请双击它。下面的屏幕截图显示了有问题的架构。![Biztalk ESB 故障消息模式查看](https://i.stack.imgur.com/BfzsH.png)

# c++ - 单击按钮时更改 ADOTable 中的 TableName

> ID：16157740
> 
> 赞同：0
> 
> 时间：2013-04-22T22:22:00.063
> 
> 标签：c++, ms-access, button, ado, c++builder-xe2

我有一个用 MS Access 制作的数据库，其中包含 2 个表。表 #1 显示在 DBGrid 中。我希望表#2 在按钮单击时显示在 DBGrid 中。以为会像： `ADOTable1->TableName = table_n2`，但我错了。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:05:48.217

这应该可以，只要确保你设置了 ADOTable1->Active = false; 然后执行此操作，然后将其设置回 true。或者可能使用 ADOTable1->Refresh();

# javascript - 如何将值从输入文本传输到按钮？

> ID：16157742
> 
> 赞同：0
> 
> 时间：2013-04-22T22:22:02.070
> 
> 标签：javascript

我想在单击按钮时将值转移到函数中的`id="insertValue"`变量...`X``insert()`

```
<input id="insertValue" type="text" />
<input type="button" value="Insert" onclick="insert('x')" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:23:16.800

`insert(document.getElementById('insertValue').value)`应该这样做。

但是你的问题与ajax无关......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:27:32.023

尝试这个。

JS：

```
function insert(e){

myValue = document.getElementById('insertValue').value;

// myValue is now set to the contents of the text field 'insertValue'
// let's check it...

alert(myValue);

} 
```

HTML：

```
<input id="insertValue" type="text" />
<input type="button" value="Insert" onclick="insert(this)" /> 
```

我不明白您是否还想将按钮的值设置为文本字段的内容。如果您想（并且没有理由需要），只需将其添加到 JS 函数中即可。

```
e.value = myValue; 
```

# c# - 如何使用 LINQ to XML 将多级 xml 转换为对象？

> ID：16157744
> 
> 赞同：1
> 
> 时间：2013-04-22T22:22:15.133
> 
> 标签：c#, .net, xml, linq-to-xml

我的 XML 文件：

```
<myobject property1="foo" property2="bar">
    <property3>value1</property3>
    <property3>value1</property3>
    <property3>value1</property3>
</myobject> 
```

我的 C# 代码：

```
List<MyObject> myObjectsInDB = (from f in xmlDoc.Descendants("myobject")
             select new MyObject()
             {
                    Property1 = f.Attribute("property1").Value,
                    Property2 = f.Attribute("property2").Value,
                    // Property3 = f.Element("property3").Value,
             }).ToList(); 
```

如果您在 xml 文件中注意到我有 3 个元素需要与 myobject 元素及其属性一起转换为 C# 类。访问 xml.xml 中的单个对象的最佳方法是什么？我知道我可能只运行一个单独的选择，但我想知道是否有更好的方法来访问它们，所以我不必两次运行所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:32:12.933

```
var result = xmlDoc.Descendants("myobject")
                .Select(m => new
                {
                    Property1 = m.Attribute("property1").Value,
                    Property2 = m.Attribute("property2").Value,
                    Property3 = m.Descendants("property3").Select(p3=>p3.Value).ToList()
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:34:46.603

```
var myobjects = 
    from myobjectEl in xdoc.Elements("myobject")
    select new 
    {
        Property1 = myobjectEl.Attribute("property1").Value,
        Property2 = myobjectEl.Attribute("property1").Value,
        Property3Texts = 
            (from prop3El in myobjectEl.Elements("property3") 
            select prop3El.Value).ToList(),
    }; 
```

顺便说一句：`Descendants("x")`返回所有名为“x”的子元素，`Elements("x")`返回所有名为“x”的*直接*子元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:57:20.827

假设： MyObject 已经被定义为类类型（见下文）。

然后，您可以将您的 xml 反序列化为一个对象，如下所示：

```
public static MyObject deserializeMyObject(){

var xmlString = @"<?xml version=""1.0"" ?><MyObject property1=""foo"" property2=""bar"">
    <property3>value1</property3>
    <property3>value1</property3>
    <property3>value1</property3>
</MyObject>";
var xdoc=XDocument.Parse(xmlString);
XmlSerializer _s = new XmlSerializer(typeof(MyObject));
var foo= (MyObject)_s.Deserialize(xdoc.CreateReader()); 
return foo;
}

//assumption about the structure of your MyObject class
public class MyObject{
 [XmlAttribute("property1")]
public string property1{get;set;}
[XmlAttribute("property2")]
public string property2 {get;set;}
 [XmlElement]
public string[] property3 {get;set;}
} 
```

希望能帮助到你。

# powershell - 如何通过 Windows 调度程序安排用于自动化 wack 进程的 powershell 脚本？

> ID：16157745
> 
> 赞同：0
> 
> 时间：2013-04-22T22:22:19.753
> 
> 标签：powershell, scripting, batch-file, scheduler

我能够从 PowerShell 提示符和命令提示符执行以下命令，但我无法使用 Windows 调度程序对其进行调度。

powershell脚本代码：

```
appcert.exe test -apptype metrostyle -packagefullname abc_somename -reportoutputpath C:\result.xml 
```

`appcert.exe`是 Microsoft 提供的用于在我的 Windows 8 应用程序上执行认证测试的 exe。我做了以下事情：

1.  我正在`ABC.ps1`用代码制作一个文件：

    ```
    appcert.exe test -apptype metrostyle -packagefullname abc_somename -reportoutputpath C:\result.xml 
    ```

2.  `PQR.bat`我用这段代码创建了一个批处理文件：

    ```
    powershell -command "& 'PathOfABC\ABC.ps1' " 
    ```

3.  我正在通过 Windows 调度程序对其进行调度。

在操作选项卡下创建任务时，我选择以下详细信息：

*   行动：启动程序

*   程序/脚本：批处理文件的路径

*   开始于：包含批处理文件的文件夹的路径

我安排它每 15 分钟运行一次。`result.xml`任务完成，但我在 C 盘中看不到任何内容。你能指出我如何安排这个批处理文件每 15 分钟执行一次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:38:41.093

用于`powershell -File "C:\path\to\ABC.ps1"`运行 powershell 脚本。或者`appcert.exe`直接将命令放在批处理脚本中。运行批处理脚本来运行 PowerShell 脚本来运行可执行文件是没有意义的。

假设在您手动运行脚本时`appcert.exe`创建：`C:\result.xml`

*   您是否已将执行策略设置为至少`RemoteSigned`？
*   运行任务的用户是否有`Log on as batch job`权限？
*   计划任务是否配置为以最高权限运行（假设启用了 UAC）？

您是否尝试在脚本中添加一些调试代码，例如

```
appcert.exe test ... >"%USERPROFILE%\appcert.log" 2>&1
exit /b %errorlevel% 
```

`appcert.log`当您尝试运行任务时是否会创建？它说什么？

# jquery - jQuery/Ajax 将未定义的参数传递给 ASP MVC 控制器

> ID：16157748
> 
> 赞同：0
> 
> 时间：2013-04-22T22:22:35.837
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

这应该是一个简单的操作，此刻我的程序感觉不一样。当用户在我的视图中的字段中输入任意数量的文本时，他们应该能够单击放大镜，这会将他们发送的文本发送到控制器，然后控制器将调用 Web 服务并执行公司名称搜索。

下面是我创建的一个函数，它只是将两个参数发送到 ASP MVC 3 控制器。当我在 Chrome 调试器和控制器的 Visual Studio 中查看变量`searchItem`时，我可以看到它是`null`或者`undefined`但是第二项总是通过的。

```
function GetCompDetails() {
    var searchItem = $('#DRMCompanyId').val;
    var request = $.ajax({
        type: 'POST',
        url: '@Url.Action("compSearch", "AgentTransmission")',
        data:
            {
                searchFilter: searchItem,
                url: location.protocol + '//' + location.host
            },
        dataType: 'html',
        success: function (data) {
            alert(data);
        },
        error: function (data) {
            alert("Unable to process your resquest at this time.");
        }
    });
} 
```

这是`<div>`我正在使用的应该传递`searchItem`参数的。如您所见，我尝试了两种不同的方法来创建文本框/输入区域。然而，两者最终都将参数传递为 is `undefined`。

任何帮助将不胜感激。

```
 <div class="M-editor-field">
        <img src="@Url.Content("~/Content/Images/magnify.gif")" onclick="GetCompDetails()" />
        @Html.TextBoxFor(model => model.BankName, new { id = "DRMCompanyId" })
        @*@Html.EditorFor(model => model.DRMCompanyId)*@
        @Html.ValidationMessageFor(model => model.DRMCompanyId)
    </div> 
```

这是我的控制器的方法签名。`searchFilter`目前是`undefined`每次但是`url`参数工作正常。

```
 [HttpPost]
    public string compSearch(string searchFilter, string url)
    { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:26:14.353

您的 Javascript 中有错误，在您的第一行中您忘记了括号

```
function GetCompDetails() {
    var searchItem = $('#DRMCompanyId').val();    // You need to add parenthesis if you call a function
    var request = $.ajax({
        type: 'POST',
        url: '@Url.Action("compSearch", "AgentTransmission")',
        data:
            {
                searchFilter: searchItem,
                url: location.protocol + '//' + location.host
            },
        dataType: 'html',
        success: function (data) {
            alert(data);
        },
        error: function (data) {
            alert("Unable to process your resquest at this time.");
        }
    });
} 
```

# html - 站点地图/子菜单中深度嵌套的 html 链接（SEO，语义 Restful）

> ID：16157750
> 
> 赞同：0
> 
> 时间：2013-04-22T22:23:02.280
> 
> 标签：html, seo, semantic-markup, restful-url

**我的问题简介**

这是其中一个晚上，我可以在我的一个项目中无休止地抱怨干净的语义编码。假设我有我的投资组合，我想在其中列出我在此过程中学到的东西。第一个列表包含语言，第二个列表包含系统。现在在这种情况下，语言还可以包含引用第二个列表中以特定语言制作的系统的子链接：

```
<nav id="categories">
<ul>
    <li>
        <a href="/languages"><span class="main_category">Languages</span></a>
        <ul id="languages">
            <li>
                <a href="/languages/php"><span class="sub_category">PHP</span></a>
                <ul id="php_systems">
                    <li>
                        <a href="/php/systems/pyrocms"><span class="sub_category">PyroCMS</span></a>
                    </li>
                    <li>
                        <a href="/php/systems/joomla"><span class="sub_category">Joomla</span></a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="/languages/javascript"><span class="sub_category">Javascript</span></a>
            </li>
        </ul>
    </li>
    <li>
        <a href="/systems"><span class="main_category">CMS Systems</span></a>
        <ul id="systems">
            <li>
                <a href="/systems/pyrocms"><span class="sub_category">PyroCMS</span></a>
            </li>
            <li>
                <a href="/systems/joomla"><span class="sub_category">Joomla</span></a>
            </li>
        </ul>
    </li>
</ul> 
```

**实际问题** 这对于用户来说似乎是最干净的方式，因为 url 是作为面包屑工作的。用户现在知道 pyrocms 实际上是一个基于 php 的 cms 系统。然而。第二个列表有一个简短的 url 方法，可能更容易维护。所以3个选项：

1.  使用长链接方法everywere（也在第二个列表中）
2.  使用短链接方法everywere（也在深层嵌套列表中）
3.  使用组合（深层嵌套中的长链接和根中的短链接）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T04:27:06.120

你的问题的答案取决于。我相信没有绝对正确的方法，因为需要更好地了解您的项目。如果您的 3 个选项可能会很好

*   您不要**创建新页面来复制内容**。可以创建多个指向同一页面的链接，但请不要创建页面只是为了遵循您的菜单模式
*   如果你想要一个面包屑，最好确保所有页面都有内容直到最后。当您在搜索结果中一直在面包屑上找到真实页面时，这在 Google 上会有所不同。
*   你的听众会理解你的分类法。

请记住，菜单不需要也是你的面包。您可以将页面的一部分用作面包屑。

# matrix - CUDA 矩阵乘法的结果不正确

> ID：16157754
> 
> 赞同：0
> 
> 时间：2013-04-22T22:23:15.947
> 
> 标签：matrix, cuda, multiplication

让我首先为这篇文章道歉。我知道有几篇帖子问我在这里提出的相同问题，但我已经尝试了给出的解决方案，但我仍然没有得到正确的 CUDA 矩阵乘法结果。

从我遵循的示例中，我很确定我在内核中的算法是正确的。我不相信我在将二维数组传递给内核时遇到任何问题，并且由于它们是通过引用传递的，我觉得二维解决方案数组应该在数组打印到主机时包含正确的答案，但事实并非如此。

这可能是我的 dim3 dimGrid(B, B) 和 dim3 dimThreads(T, T) 变量的问题吗？我是 CUDA 框架的新手，我仍在努力解决它。任何建议将不胜感激。我的代码如下：

```
#include <stdio.h>
#include <cuda.h>
#include <stdlib.h>

__global__ void MatMultiply (int *a, int *b, int *c, int N) {
    int row = blockIdx.y * blockDim.y + threadIdx.y;
    int col = blockIdx.x * blockDim.x + threadIdx.x;
    int val = 0;

    for (int e = 0; e < N; ++e) {
        val += a[row*N + e] * b[e*N + col];
    }
    c[row*N+col] = val;
}

int main(void) {
    int N, B, T;

    printf("Input integer for matrix dimension size: ");
    scanf("%d", &N);

    printf("Input number of threads in a block: ");
    scanf("%d", &T);

    printf("Input number of blocks in a grid: ");
    scanf("%d", &B);

    int size = N * N * sizeof(int);

    int *a, *b, *c;

    a = (int*)malloc(size);
    b = (int*)malloc(size);
    c = (int*)malloc(size);

    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            a[i*N+j] = j + i*N;
            b[i*N+j] = j + i*N;
            c[i*N+j] = j + i*N;
        }
    }

    int *dev_a, *dev_b, *dev_c;

    cudaMalloc((void**)&dev_a, size);
    cudaMalloc((void**)&dev_b, size);
    cudaMalloc((void**)&dev_c, size);

    cudaMemcpy(dev_a, a, size, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_b, b, size, cudaMemcpyHostToDevice);
    cudaMemcpy(dev_c, c, size, cudaMemcpyHostToDevice);

    dim3 dimGrid(B, B);
    dim3 dimThreads(T, T);
    MatMultiply<<<B, T>>>(dev_a,dev_b,dev_c, N);

    cudaMemcpy(c, dev_c, size, cudaMemcpyDeviceToHost);

    for (int i = 0; i < N; i++) {
        for (int j = 0; j < N; j++) {
            printf("%d\t", b[i*N + j]);
        }
        printf("\n");
    }

    free(a);
    free(b);
    free(c);

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    return 0;
} 
```

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:38:55.637

因此，这里的问题似乎在于设置线程和块以及使用*threadIdx*、*blockDim*和*gridDim*。

**注意：此特定问题的实用解决方案标签实用解决方案**

*threadIdx 顾名思义*就是线程的 ID。这意味着这个值，或者更准确地说，它的*threadIdx.x*和*threadIdx.y*组件将从 0 的值变为指定的线程数，或者更确切地说是存储在*blockDim.x*和*blockDim.y中的***每个块的线程**值。例如一个电话

 **```
someKernel<<<1,32>>>( .... ); 
```

将导致*threadIdx.x*的值从 0 变为 31，并且*threadIdx.y*根本不会被迭代（我认为它总是为 0）。

但是，如果您定义一个 cuda 特定结构*dim3*并将其命名为*threadsPerBlock*，然后将其用作第二个参数，如下所示：

```
dim3 threadsPerBlock( 32, 32 );

 someKernel<<<1,threadsPerBlock>>>( .... ); 
```

然后你会得到*threadIdx.x*和*threadIdx.y*从 0 到 31 在内核执行中获得它们的各种组合。

请注意，您被限制为每个启动的块的最大线程数。对于不同的显卡，或者更准确地说，它们支持的计算能力，这个数字是不同的。[在此链接](http://en.wikipedia.org/wiki/CUDA)末尾的表中查找这些数字因此，计算能力 2.x 及更高版本支持每个块最多 1024 个线程，而早期版本支持 512 个。另请注意，这意味着每个块最多 32x32 个线程二维发射。

但是如果你需要更多呢？好吧，儿子，那你发射更多的块！您还可以在 1 或 2 维中启动块。例如

```
dim3 threadsPerBlock( 32, 32 );
dim3 blocksPerGrid ( 256, 265 );

someKernel <<<blocksPerGrid,threadsPerBlock>>>( ... ); 
```

网格的大小存储在*gridDim*结构中，在这种情况下，*gridDim.x*和*gridDim.y*都是 256，使得*blockIdx.x*和*blockIdx.y*变量从 0 变为 255。

**实际解决方案：**

现在我们知道了这一点，让我们看一下您的代码。例如，在您的代码中，如果您将**T**设置为 32 并将**B**设置为 256，您将有效地得到以下信息：

```
threadIdx.x would go from 0 to 31
threadIdx.y would go from 0 to 0
blockIdx.x would go from 0 to 255
blockIdx.y would go from 0 to 0
blockDim.x would be 32
blockDim.y would be 1
gridDim.x would be 256
gridDim.y would be 1 
```

现在让我们看看你的变量对此有何反应......

```
row would go from 0 to 0
col would go from 0 to 1023 
```

所以，这可能不是你真正想要的。您希望 row 和 col 都从 0 变为**N-1**对吗？好吧，这就是你的做法：

```
int row = threadIdx.x + blockIdx.x * blockDim.x;
int col = threadIdx.y + blockIdx.y * blockDim.y; 
```

还要确保您有足够的线程来覆盖矩阵的尺寸。那是确保您将 *threadsPerBlock*blocksPerGrid* 设置为大于您的**N**。这通常最好这样做：

```
threads = 32
dim3 threadsPerBlock ( threads, threads ); 
blocks = (N / threads) + 1; 
dim3 blocksPerGrid ( blocks, blocks ); 
```

“但如果我让它大于 N，那么我可能会有一些我不需要的线程”——你说——“我不想让它们工作！” 明智的你是先生，这么说。您可以通过简单的 if 子句来解决这个问题，您将在其中包含您的计算，如下所示：

```
if ( row < N && col < N )
{
     // your add... err... code here
} 
```

希望有帮助。享受 CUDA ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:35:01.557

您没有在内核调用中使用`dimGrid`and`dimThreads`变量。相反，您只是启动一维线程块的一维网格。

除此之外，您没有检查任何错误。**

# c# - 编码的 MDB 表和内容

> ID：16157758
> 
> 赞同：0
> 
> 时间：2013-04-22T22:23:45.437
> 
> 标签：c#, ms-access, vb6, encryption

我有一个非常旧的 VB 16 位应用程序，它可以与 .MDB 文件一起使用，因为还有一个 .MDA 文件——因此我猜它是使用 access 2.0 制作的。需要把我们的表格、关系和内容拿出来。表格数据采用“丹麦语”语言。

我的老板确实有版权，但没有管理员用户名和密码。应用程序运行良好，这意味着应用程序能够连接到 MDB 文件并使用它。我在 Windows 7 32 位机器上运行它。

似乎数据库已编码。开始知道他们使用 RC4 编码并且 .MDB 标头包含它的密钥。

有没有办法从编码的.MDB 中获取表和数据。我已经尝试过我的 mdb 解锁工具，其中大多数都无法识别它是 .mdb，但该应用程序可以正常工作。

我迫不及待地想找到解决办法。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:47:18.737

> 开始知道他们使用 RC4 编码并且 .MDB 标头包含它的密钥。有没有办法从编码的.MDB 中获取平板电脑和数据。

您必须使用对象模型代码从 Access 数据库文件中删除所有内容。*这是从损坏*的Access 数据库中提取数据的脚本：

```
 Function FilterDB(strFilePath As String)
   Dim objAccess As Object
   Dim strFolder As String
   Dim strCurrentFile As String
   Dim strCurrentObject As String
   Dim strFilteredDB As String

   Dim fs
   Dim Ref
   Dim f As Object
   Dim objtype As AcObjectType

   Dim objAllObjects As New Collection
   Dim objObjectGroup As Object
   Dim intObjType As Integer
   Dim i As Integer
   Dim j As Integer
   Dim intRefNum As Integer

   Dim RefItem As Reference
   Dim arrayRefs() As String

   Dim strErrMsg As String

   'Open the source database
   Set objAccess = CreateObject("Access.Application.10")

   On Error GoTo ErrorHandler

   objAccess.OpenCurrentDatabase strFilePath, False

   strFolder = Left(strFilePath, InStrRev(strFilePath, "\", Len(strFilePath)))
   strFilteredDB = Left(strFilePath, Len(strFilePath) - 4) & "filtered.mdb"

   With objAllObjects
       .Add objAccess.CurrentData.AllQueries
       .Add objAccess.CurrentProject.AllForms
       .Add objAccess.CurrentProject.AllReports
       .Add objAccess.CurrentProject.AllMacros
       .Add objAccess.CurrentProject.AllModules
       .Add objAccess.CurrentProject.AllDataAccessPages
   End With

   Set fs = CreateObject("Scripting.FileSystemObject")

   If Not fs.folderexists(strFolder & "\texttmp") Then
       fs.CreateFolder (strFolder & "\texttmp")
   End If

   For i = 1 To objAllObjects.Count

       If objAllObjects(i).Count > 0 Then
           For j = 0 To objAllObjects(i).Count - 1

              Set objObjectGroup = objAllObjects(i)

              strCurrentObject = objObjectGroup(j).Name
              intObjType = objObjectGroup(j).Type
              objAccess.SaveAsText intObjType, strCurrentObject, _
              strFolder & "texttmp\" & strCurrentObject & intObjType & ".txt"

           Next j
       End If

   Next i

   'Bring in All the references
   On Error Resume Next

   ReDim arrayRefs(objAccess.References.Count - 1, 2) As String

   For Each RefItem In objAccess.References()
       If Not IsError(RefItem.Name) Then

           arrayRefs(intRefNum, 0) = RefItem.Name
           arrayRefs(intRefNum, 1) = RefItem.FullPath
           intRefNum = intRefNum + 1

       End If
   Next RefItem

   On Error GoTo ErrorHandler

   Debug.Print ""
   objAccess.Quit
   Set objAccess = Nothing

   Set objAccess = CreateObject("Access.Application")

   objAccess.NewCurrentDatabase strFilteredDB

   'Finds the first occurrence of a text file in the
   'texttmp folder.
   strCurrentFile = Dir(strFolder & "\texttmp" & "\*.txt")

   'Count the files in the folder.
   Set f = fs.GetFolder(strFolder)

   'Check to see if the folder is empty.
   'If not, load in all the files from there
   If f.Files.Count <> 0 Then

   Do Until strCurrentFile = ""
      intObjType = Mid(strCurrentFile, Len(strCurrentFile) - 4, 1)
      objAccess.LoadFromText intObjType, _
      Left(strCurrentFile, Len(strCurrentFile) - 5), _
      strFolder & "\texttmp\" & strCurrentFile
      strCurrentFile = Dir
   Loop
   End If

   On Error Resume Next

   For i = 0 To UBound(arrayRefs())

       Set Ref = objAccess.References.AddFromFile(arrayRefs(i, 1))

   Next i

   MsgBox "Finished creating filtered file:" & Chr(10) _
   & objAccess.CurrentProject.FullName & "."

FunctionEnd:

   On Error Resume Next
   Set fs = CreateObject("Scripting.FileSystemObject")

   If fs.folderexists(strFolder & "\texttmp") Then
       fs.deletefolder (strFolder & "\texttmp")
   End If

   objAccess.Quit
   Set objAccess = Nothing
   Set f = Nothing

   Exit Function

ErrorHandler:

   Select Case Err.Number

       Case 58, 7866
       strErrMsg = "The path\file name " & strFilePath _
           & " may be incorrect or the " _
           & Chr(10) & " database is opened exclusively by someone else." _
           & Chr(10) & Chr(10) & _
           "Please insure your path and file name are correct " _
           & Chr(10) & "and the database is not open."

       Case 7865
       strErrMsg = "The follwing database:" & Chr(10) & Chr(10) _
           & strFilteredDB & Chr(10) & Chr(10) _
           & "already exists." _
           & Chr(10) & Chr(10) & _
           " Please rename, move, or delete it before running" _
           & "the FilterDB function."

       Case Else
       strErrMsg = "Access Error #" & Err.Number & Chr(10) & Chr(10) & _
       Err.Description

   End Select

   MsgBox strErrMsg

   GoTo FunctionEnd

   End Function 
```

> 我今天不得不使用这个代码。您必须复制数据库，然后将上述代码粘贴到模块中并从即时窗口运行 mod.FilterDB("E:\PathToTheCopy.mdb")

# javascript - 用 jQuery 替换 ASP.NET AJAX 以进行 ASHX 调用

> ID：16157759
> 
> 赞同：0
> 
> 时间：2013-04-22T22:23:48.930
> 
> 标签：javascript, jquery, ajax

我一直在使用以下内容与 Web 代理进行跨域调用通信。我正在更新一些代码，并且已经在使用 jQuery，并且想要放弃 ASP AJAX，因为我现在只使用它。

是否可以仅使用 jQuery 执行以下操作？

```
function download(proxyUrl, contentUrl, isJson, callback) {
    var request = new Sys.Net.WebRequest();
    request.set_httpVerb("GET");

    var isCache = false;
    var url = proxyUrl + "?url=" + escape(contentUrl) + (isJson ? "&type=" + escape("application/json") : "") + "&cache=" + (isCache ? "10" : "0");
    request.set_url(url);

    request.add_completed(function (executor) {
        if (executor.get_responseAvailable()) {
            var content = executor.get_responseData();
            callback(content);
        }
    });

    var executor = new Sys.Net.XMLHttpExecutor();
    request.set_executor(executor);
    executor.executeRequest();
}
download("/_layouts/teamfusion/WebProxy.ashx", "http://www.twitter.com", false, function(content) {
    alert(content);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:17:41.130

这应该有效：

```
$.ajax({
    url: url,
    type: "GET",
    dataType: "json",
    contentType: "application/json",
    complete: callback
}); 
```

这是[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)的文档。

# javascript - 并非所有浏览器都支持 toLocaleString()？

> ID：16157762
> 
> 赞同：11
> 
> 时间：2013-04-22T22:23:52.810
> 
> 标签：javascript, formatting

我有这个简单的功能：

铬、火狐、IE：

```
Number(1000000).toLocaleString()
"1 000 000" // in french system, the space is the separator instead of the comma 
```

歌剧，傲游：

```
Number(1000000).toLocaleString()
"1000000" 
```

为什么 Opera 和 Maxthon 不能格式化？他们支持这种方法，但没有以正确的方式执行？

有`toLocaleString()`替代品吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T22:39:32.900

根据用户的区域设置，输出也会有所不同，即使[`Number.prototype.toLocaleString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toLocaleString)他们的浏览器支持，例如对于我在*en-GB*上，`Number(1000000).toLocaleString();`给我`"1,000,000"`。

> 有`toLocaleString()`替代品吗？

为什么不写一个来做你想做的事呢？例如，

```
function localeString(x, sep, grp) {
    var sx = (''+x).split('.'), s = '', i, j;
    sep || (sep = ' '); // default seperator
    grp || grp === 0 || (grp = 3); // default grouping
    i = sx[0].length;
    while (i > grp) {
        j = i - grp;
        s = sep + sx[0].slice(j, i) + s;
        i = j;
    }
    s = sx[0].slice(0, i) + s;
    sx[0] = s;
    return sx.join('.');
} 
```

现在

```
localeString(1000000.00001);
// "1 000 000.00001" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T22:33:01.153

[语言规范](http://es5.github.io/#x15.7.4.3)使定义非常开放：

> # 15.7.4.3`Number.prototype.toLocaleString()`
> 
> 生成一个字符串值，该值表示根据宿主环境当前语言环境的约定格式化的数字值。**此函数依赖于实现，允许但不鼓励它返回与 toString 相同的内容**。

允许不同的浏览器以不同的方式实现它，并且可以根据用户选择的语言环境以不同的方式实现它。

# javascript - Javascript - 禁用提交按钮，直到 3 个字段不为空

> ID：16157763
> 
> 赞同：1
> 
> 时间：2013-04-22T22:23:57.320
> 
> 标签：javascript, jquery, html, forms, blur

我有这个几乎可以工作的位：http: [//jsfiddle.net/HFzkW/](http://jsfiddle.net/HFzkW/) 我的代码如下所示：

```
<div id="cform-container">
<div class="alignleft" id="cform">
    <form action="<?php print site_url('/sent'); ?>" method="POST" >
    <input type="hidden" name="Contact-Form" value="contact-form" />
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="yn">Your Name</label><span id="star5">*</span></div>
            <div class="alignright cform-ti"><input type="text" name="yn" id="yn" /><br /><span id="namespan" value="0"></span></div>
            <div class="clearboth"></div>
        </div>
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="cn">Company Name</label></div>
            <div class="alignright cform-ti"><input type="text" name="cn" id="cn" /></div>
            <div class="clearboth"></div>
        </div>
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="em">Email Address</label><span id="star5">*</span></div>
            <div class="alignright cform-ti"><input type="text" name="em" id="em" /><br /><span id="emailspan" value="0"></span></div>
            <div class="clearboth"></div>
        </div>
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="ph">Phone Number</label><span id="star5">*</span></div>
            <div class="alignright cform-ti"><input type="text" name="ph" id="ph" /><br /><span id="phonespan" value="0"></span></div>
            <div class="clearboth"></div>
        </div>
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="ct">Industry</label></div>
            <div class="alignright cform-ti"><input type="text" name="ct" id="ct" /></div>
            <div class="clearboth"></div>
        </div>
        <div class="cform-row">
            <div class="alignleft cform-label"><label for="msg">Message</label></div>
            <div class="alignright cform-ti"><textarea name="msg" id="msg"></textarea></div>
            <div class="clearboth"></div>
        </div>
        <div id="cform-btn"><input type="submit" value="Submit" /></div>
    </form>
</div>
<script id="source" language="javascript" type="text/javascript">
 $(function(){  
    $("input[type=submit]").attr("disabled", "disabled");
    $("#em").blur(function() 
            {
             var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;  
             var emailaddress = $("#em").val();
             if(!emailReg.test(emailaddress) | emailaddress=="") {
                $("#emailspan").html('<font color="#cc0000">Please enter valid Email address</font>');
             }else{
                $("#emailspan").html('<font color="#cc0000"></font>');  
                }
            });
    $("#yn").blur(function() 
            {
             var namefield = $("#yn").val();
             if(namefield=="") {
                $("#namespan").html('<font color="#cc0000">Please enter your name</font>');  
             }else{
                $("#namespan").html('<font color="#cc0000"></font>');  
                }
            });                                 
    $("#ph").blur(function() 
            {
             var phonefield = $("#ph").val();
             if(phonefield=="") {
                $("#phonespan").html('<font color="#cc0000">Please enter your name</font>');  
             }else{
                $("#phonespan").html('<font color="#cc0000"></font>');  
                }
            });
$('input, textarea').change(function(){
    var validation;
    var email = $("#em").val();
    var name = $("#yn").val();
    var phone = $("#ph").val();

    if ( email == "" && name == "" && phone == "" ) {
    validation = false;
    } else if ( email != "" && name != "" && phone != "" ) {
    alert ("variables"+email+name+phone);
    validation = true;
    }
    if (validation = true) {
    $("input[type=submit]").removeAttr("disabled"); 
    } else {
    $("input[type=submit]").attr("disabled", "disabled");
    }
});
}); 
```

但是我不能让它完全工作。当用户输入其中一个字段（例如您的姓名）时，提交按钮不再被禁用。

我想保持禁用提交按钮，直到满足所有 3 个“必填”字段。我认为代码对此非常清楚 - 但它仍然无法正常工作。

此外，它可以在 JSFiddle 中工作，但不能在我试图让它工作的 Wordpress 网站上工作。任何检查的想法也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:27:10.270

尝试将 ands 切换为 ors。小心你的逻辑，试着大声说出来，看看它是否有意义：

电子邮件为空白，姓名为空白，电话为空白，则验证为假。您真正想要的是说如果任何字段为空白，则验证为假。

```
if ( email == "" || name == "" || phone == "" ) {
validation = false;
} else if ( email != "" && name != "" && phone != "" ) {
alert ("variables"+email+name+phone);
validation = true;
} 
```

此外，您正在设置`validation=true`if 语句。这将始终返回 true。改成这样：`if (validation == true) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:45:54.210

所以基本上：

```
<form id="myForm" onfocus="submitButton("myForm);">
  <input type="text" name="name" placeholder="Name">
  <input type="text" name="email" placeholder="Email">
  <input type="text" name="phone" placeholder="Phone">
</form> 
```

和

```
function submitButton(formID){

  var formObject = document.getElementById(formID);

  var name = formObject.name.value;
  var email = formObject.email.value;
  var phone = formObject.phone.value;

  if (name && email && phone) {
    showSubmitButton();
  } else {
    //keep the button hidden
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:31:54.733

从我所看到的，我会做的第一件事是调试它（代码有点混乱，所以不要复制它，我会给你一些指导）。

代替

```
 if(validation = true ) 
```

尝试

```
 if(validation) 
```

这是因为在没有任何参数的情况下，它将检查是否为 false、未定义或 null。电子邮件名称和电话也可以这样做。

# magento - 如何从前端控制器生成管理链接？

> ID：16157765
> 
> 赞同：2
> 
> 时间：2013-04-22T22:24:03.510
> 
> 标签：magento

我想要一个从前端页面到 adminhtml 页面的链接。我试过使用 Adminhtml 辅助方法：

```
Mage::helper('adminhtml')->getUrl('some/admin/path') 
```

和 Adminhtml URL 模型方法：

```
Mage::getModel('adminhtml/url')->getUrl('some/admin/path') 
```

但无济于事。我每次都被踢到管理仪表板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:24:03.510

简短的回答：你不能（除了一些例外——见这个答案的底部），至少在[不禁用管理 URL 密钥](http://blog.chapagain.com.np/magento-how-to-disable-remove-secret-key-from-admin-url/)的情况下不能——这是一个安全风险。

Magento 对会话“表单密钥”以及管理 URL 路径进行哈希处理，以生成其管理 URL 密钥。此表单密钥只是一个随机的 16 个字符的字符串，只要会话持续，它就会持续。问题是 Magento 对前端和 adminhtml 区域使用了不同的会话 cookie，因此也使用了不同的表单键。

因此，当您从前端生成管理 URL 时，Magento 使用来自前端会话的表单键。然后，当您单击该链接时，Magento 会重新生成管理 URL 密钥以与链接中的密钥进行比较，只是这一次，它使用 adminhtml 表单密钥。由于表单键不匹配，散列 URL 键不匹配，您的链接将不起作用。Magento 此时的行为是将您踢回管理仪表板（或管理登录页面）。

最终，这似乎是 Magento 的一个基本限制。我不相信有任何解决方法（但如果有人能纠正我，我会很高兴）。

* * *

更新：查看一些 Magento 的 adminhtml 控制器，似乎某些控制器操作在默认情况下不需要 URL 键：

*   adminhtml/catalog_product/编辑
*   adminhtml/catalog_product_review/编辑
*   adminhtml/sales_order/view
*   adminhtml/sales_order/index
*   所有 Oauth 操作。

任何继承自的控制器都可以通过将某些操作添加到数组中`Mage_Adminhtml_Controller_Action`来允许某些操作不需要管理员 URL 密钥。`$_publicActions`因此，对于您自己的模块，或者如果您要覆盖 Magento 模块，如果您`indexAction`的管理控制器中有一个您想公开的，您可以这样做：

```
public $_publicActions = array('index'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-01T01:04:06.503

默认情况下你不能，但由于这是 magento，你可以随时自定义它。

看看[Redirection to Admin Customer Edit (with key) from a frontend controller](https://magento.stackexchange.com/questions/33803/redirection-to-admin-customer-edit-with-key-from-a-frontend-controller)

您可以创建一个管理控制器，它将充当代理以获取 url 密钥，然后重定向到您想要的路由，而无需禁用管理 url 密钥。

您可以使用 ) 禁用管理 url 的验证`$_publicActions`。

看`Mage_Adminhtml_Controller_Action`

```
protected function _validateSecretKey()
{
    if (is_array($this->_publicActions) && in_array($this->getRequest()->getActionName(), $this->_publicActions)) {
        return true;
    }

    if (!($secretKey = $this->getRequest()->getParam(Mage_Adminhtml_Model_Url::SECRET_KEY_PARAM_NAME, null))
        || $secretKey != Mage::getSingleton('adminhtml/url')->getSecretKey()) {
        return false;
    }
    return true;
} 
```

您的代理控制器

```
class MagePal_ProxyCustomerRedirect_Adminhtml_RedirectController extends Mage_Adminhtml_Controller_Action
{
    /**
     * Array of actions which can be processed without secret key validation
     *
     * @var array
     */
    protected $_publicActions = array('redirecttocustomer');

    public function redirecttocustomerAction()
    {
        // get the customer id pass by your observer (url key)
        Mage::app()->getResponse()->setRedirect(Mage::helper("adminhtml")->getUrl("adminhtml/customer/edit/", array("id"=>$customer_id))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:21:21.373

链接到前端生成的管理员中的产品编辑页面

```
 $urlModel = Mage::getModel('core/url');
            $url = $urlModel->getUrl('adminhtml/catalog_product/edit', array(
                '_current' => false,
                'id' => $product->getId()
            )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T18:27:07.630

你可以通过这个例子来使用。

```
 Mage::helper("adminhtml")->getUrl("module_name/controller_name/action_name",
                                       array("param1"=>1,"param2"=>2)); 
```

# java - java.lang.NullPointerException 查询调用

> ID：16157768
> 
> 赞同：-2
> 
> 时间：2013-04-22T22:24:08.620
> 
> 标签：java, jakarta-ee

我是 Java EE 的新手，我正在尝试创建一种从数据库收集信息的方法。它给了我以下错误：

```
java.lang.NullPointerException
at com.universite.bean.checkmatiere.check(checkmatiere.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
at com.sun.el.parser.AstValue.getValue(AstValue.java:134)
at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227)
at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85)
at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

这是我的`check`方法。`trouver`当我调用方法时它给了我一个错误：

```
 public void check() {
    etudiant =(Etudiant) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("etudiant");
    n=etudiant.getniveau();
    result =matiereDao.trouver( n );
    if(result.size()!=0) {
        Iterator<Matiere> stIterator=result.iterator();
        while(stIterator.hasNext()){
         matiere=(Matiere)stIterator.next();
         FacesMessage message = new FacesMessage("matire: "+ matiere.getNom() );
         FacesContext.getCurrentInstance().addMessage( null,message );

        nummatiere=matiere.getIdmatiere();
            private List<Chapitre> result1;
    /*line 49*/  result1 =chapitredao.trouver( nummatiere );
          if (result1!= null)
         {if(result1.size()!=0)
                        {
                            Iterator<Chapitre> stIterator1=result1.iterator();
                            while(stIterator1.hasNext()){
                             chapitre=(Chapitre)stIterator1.next();
                             FacesMessage message1 = new FacesMessage( "chapitre: "+chapitre.getNomchapitre() );
                             FacesContext.getCurrentInstance().addMessage( null,message1 );

                            }
            }          }

         }

    }
    else  {
        FacesMessage message = new FacesMessage( "echec !" );
        FacesContext.getCurrentInstance().addMessage( null,message );
    } 
```

这是我的“trouver”功能

```
 private static final String JPQL_SELECT_PAR_nummatiere= "SELECT ufFROM              Chapitre uf where uf.nummatiere=:nummatiere";
               private static final String PARAM_nummatiere       = "nummatiere";
               public List<Chapitre> trouver(int nummatiere  ) throws DAOException {

Query requete1 = entitymanager.createQuery( JPQL_SELECT_PAR_nummatiere );
requete1.setParameter( PARAM_nummatiere, nummatiere);
try {
    results2 =  requete1.getResultList();
} catch ( NoResultException e ) {
return null;
} catch ( Exception e ) {
throw new DAOException( e );
}
return results2;
} 
```

谢谢你提供的所有帮助。我已经被这个错误困扰了三天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:38:50.840

如果您说您的错误是在您调用`trouver()`此行时：

```
result1 = chapitredao.trouver(nummatiere); 
```

那么问题是你还没有初始化这个`chapitredao`字段。也就是说，可能在你班级周围的某个地方，你有：

```
private <TYPE> chapitredao; 
```

让它像：

```
private <TYPE> chapitredao = new <TYPE>(); 
```

比如，例如：

```
private ChapitreDao chapitredao = new ChapitreDao(); 
```

或者通过，也许`ChapitreDao chapitredao = ChapitreDao.getInstance();`或者通过构造函数（甚至通过注入）初始化它。

# msmq - 我们可以更改 MSMQ 的 LogMgrFlushInterval 值吗？

> ID：16157769
> 
> 赞同：0
> 
> 时间：2013-04-22T22:24:10.263
> 
> 标签：msmq

Microsoft 警告不要在其[文档](http://technet.microsoft.com/en-us/library/cc738482(v=ws.10).aspx)中更改此值，但文档本身似乎不正确——它声明默认值为 50 毫秒，而我们的测试显示它实际上是 10 毫秒。如果我们可以安全地将值提高到 50 毫秒，我们可能会很高兴，所以问题是——我们能否做到这一点，并且不会失去 MSMQ 提供的事务保证？

PS。“我们为什么要搞乱这个值”的快速背景——我们有一个应用程序位于几个事务性 MSMQ 队列之上。应用程序定期轮询其中一个队列，如果找到消息，它将开始处理。应用程序本身运行良好。但是我们看到的是，一旦我们从队列中读取，MSMQ 将以每秒超过 50 次写入的速率开始写入磁盘，并且在每次读取完成后将继续这样做大约 10 秒应用程序（它似乎是事务日志刷新）。如果我们将 LogMgrFlushInterval 值增加到 50 毫秒，写入速率将下降到大约每秒 12 次。我们关心这个的原因是每秒写入 50 次，乘以正在运行的应用程序实例的数量，由此产生的负载基本上压倒了我们 NAS 上的 CPU。我们正在研究其他选项（减少运行实例的数量，将应用程序轮询间隔增加到 10 秒以上，获得更大的 NAS），但与更改刷新间隔相比，这些都花费更多的时间/金钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:07:06.300

事务的所有部分都必须写入磁盘以进行恢复。间隔越长，如果出现硬件故障，数据丢失的机会窗口就越大。
读取量听起来过多。您每秒处理多少条消息？

# c# - 计算 TimeSpan 的刻度

> ID：16157773
> 
> 赞同：1
> 
> 时间：2013-04-22T22:24:28.247
> 
> 标签：c#

我有一个`Keyframe`s 列表，它们只是具有 TimeSpan 的对象和一个具有自己的 timeSpan 刻度的字段（类型 long），称为`tempTicks`。完整列表从关键帧 1 - 7000 开始。

几乎每个关键帧的时间戳都比之前的要大。 **我想从 300-800 中获取这些关键帧，并且我想给它们一个从 0 滴答开始的新 TimeSpan。**

```
List<Keyframe> region = new List<Keyframe>();

long highestTicks = 0;
long durationTicks = 0; //Stores the whole duration of this new region

//beginFrame and endFrame are 300 and 800
for (int i = beginFrame; i < endFrame; i += 1)
{
    //Clip is the full list of keyframes
    Keyframe k = clip.Keyframes[i];
    if (region.Count < 1)
    {
        k.Time = TimeSpan.FromTicks(0);
    }
    else
    {
        //This is the trouble-part
        if (k.Time.Ticks > highestTicks)
        {
           highestTicks = k.Time.Ticks;
           k.Time = 
           TimeSpan.FromTicks(highestTicks - region[region.Count -1].tempTicks);
        }

     }
     durationTicks += k.Time.Ticks;
     region.Add(k);
} 
```

我不能以这种方式正确地得到所有这些。你明白为什么吗？

**示例：拍摄电影中最喜欢的场景。您希望以场景在媒体播放器中从 0:00 开始的方式导出它，而不是从 87:00 开始，即您最初拍摄它的地方。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T23:00:14.623

尝试以下方式：

```
var tickOffset = clip.Keyframes[beginFrame].Time.Ticks;
// this is your 'region' variable
var adjustedFrames = clip.Keyframes
    .Skip(beginFrame)
    .Take(endFrame - beginFrame)
    .Select(kf => new Keyframe { 
        Time = TimeSpan.FromTicks(kf.Time.Ticks - tickOffset),
        OtherProperty = kf.OtherProperty            
    })
    .ToList();
var durationTicks = adjustedFrames.Max(k => k.Time.Ticks); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T23:15:15.260

就地修改这些帧的时间有点奇怪。人们会期望您将它们提取到一个新列表中，而不是修改原始值。尽管如此，这样做的方法是使用第一个字段作为“基础”，然后从所有其他字段中减去该值。因此，如果您的时间是`[..., 27, 28, 32, 33, 35, 37, 39, ...]`并且您想将值从 27 更改为 39，它们将变为`[0, 1, 5, 6, 8, 10, 12]`：

```
List<Keyframe> region = new List<Keyframe>();

long highestTicks = 0;
long durationTicks = 0; //Stores the whole duration of this new region

long baseTicks = clip.Keyframes[beginFrame].Time.Ticks;

//beginFrame and endFrame are 300 and 800
for (int i = beginFrame; i <= endFrame; i += 1)
{
    //Clip is the full list of keyframes
    Keyframe k = clip.Keyframes[i];
    k.Time = TimeSpan.FromTicks(k.Time.Ticks - baseTicks);
    highestTicks = Math.Max(highestTicks, k.Time.Ticks);

     region.Add(k);
}

durationTicks = highestTicks; 
```

虽然我真的不明白你为什么担心蜱虫。您可以`TimeSpan`直接对值进行数学计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:34:56.507

看起来“i”值从 300 运行到 799。您需要 <= 运算符吗？

# javascript - jQuery SelectBox 插件在 IE7、8 或 9 中不起作用

> ID：16157778
> 
> 赞同：2
> 
> 时间：2013-04-22T22:24:54.057
> 
> 标签：javascript, jquery, internet-explorer, css

我有这个 jQuery selectBox 插件，我已经设计了适合我需要的样式，还有一个“Go”按钮可以转到每个选项值中给出的 href。功能和风格在 FF、Chrome 和 IE10 中运行良好。但是在 IE7、8 和 9 中根本不起作用。

我已经尝试了在这里遇到的各种事情，包括使用以下 jQuery 修复程序确保我的所有 div 上都有一个 z-index：

```
 $(function () {
        var zIndexNumber = 1000;
        $('div').each(function () {
        $(this).css('zIndex', zIndexNumber);
        zIndexNumber -= 10;
        });
    }); 
```

我尝试过的任何事情都没有对 IE 产生任何影响。我几乎可以肯定我的问题存在于我的 CSS 中。我使用了很多 css3 样式并尝试删除它们......我还没有想出一个解决方案。对此的任何帮助将不胜感激！:)

这是我的 JSFIDDLE：http: [//jsfiddle.net/defmod33/hX2Ma/](http://jsfiddle.net/defmod33/hX2Ma/)

通过“不工作”，我的意思是下拉部分根本没有出现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:33:52.127

我终于解决了这个问题。问题出在 CSS 中，就像我预期的那样。选择框下拉功能会破坏为 IE 提供渐变的“过滤器：”样式标记。我本可以删除样式标签，但我决定创建几个条件注释，以防我将来找到更好的解决方案（我想保留“过滤器：”以防以后需要它） ）。

使用的条件注释：

```
 <!--[if lte IE 9]>
      <style type="text/css">
        .sbHolder, .goButtonOne, .goButtonTwo {
           filter: none;
        }
      </style>
    <![endif]-->

    <!--[if lte IE 8]>
     <style type="text/css">
        .sbHolder {
           background:#ccc;
        }
        .goButtonOne, .goButtonTwo {
           background:#bf6c65;
        }
      </style>
    <![endif]--> 
```

第一个去掉了 IE9 及更低版本的过滤器。第二个为去掉过滤器后没有背景色的浏览器提供第二种背景颜色（IE8及以下）

# c# - 如何像使用 Telerik RadGrid 一样在 Kendo Grid 上设置“UniqueName”？

> ID：16157779
> 
> 赞同：4
> 
> 时间：2013-04-22T22:25:01.797
> 
> 标签：c#, javascript, jquery, radgrid, kendo-grid

我正在处理一项将数据集从 Telerik RadGrid 迁移到尝试设置排序的 Kendo Grid 的任务。对于大多数列，我的排序工作正常，但是有些列的数据字段名称“不明确”（同名）。RadGrid 通过允许我建立一个“UniqueName”来指定哪一列来解决这个问题。

**剑道网格示例**

```
 var assignmentColumns = 
    [
        { title: "Last Note Date", field: "NoteDateTime", template: '#= kendo.toString( toDate(NoteDateTime), "M/dd/yyyy h:mmtt" ) #' }
    ];

        var gridDataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: '-',
                    type: 'POST',
                    contentType: 'application/json'
                },
                parameterMap: function (options) {
                    return JSON.stringify(options);
                }
            },
            schema: {
                data: 'data',
                total: 'totalItems'
            },
            serverPaging: true,
            pageSize: 10,
            serverFiltering: true,
            serverSorting: true
        });

        $grid.kendoGrid({

            dataSource: gridDataSource,
            pageable: true,
            scrollable: false,
            sortable: {
                allowUnsort: true
            },
            columns: assignmentColumns
        }); 
```

**Telerik 工作示例**

```
<telerik:RadGrid ID="radGrid_Commentary" AllowSorting="true">
    <MasterTableView>
        <Columns>  
            <telerik:GridBoundColumn DataField="NoteDateTime" UniqueName="cg.Date" HeaderText="Date" DataFormatString="{0:MM/dd/yyyy}" />
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

有人对如何为 kendogrid 列指定“唯一名称”有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:48:18.723

好的，经过几个小时的思考和摆弄，我想通了。模板处理屏幕上显示的内容，该字段是排序/过滤器在将信息传递回服务器端排序/过滤时使用的内容。我可能应该早点弄清楚这一点，但我希望这可以帮助其他正在经历类似脑残的人。

从上面修改：

```
var assignmentColumns = 
[
    { title: "Last Note Date", field: "cg.Date", template: '#= kendo.toString( toDate(NoteDateTime), "M/dd/yyyy h:mmtt" ) #' }
]; 
```

# c - 3D 数组的指针算法

> ID：16157780
> 
> 赞同：1
> 
> 时间：2013-04-22T22:25:02.547
> 
> 标签：c, arrays, pointers

我知道指针如何为 1D 和 2D 数组工作，但我正试图为 3D 数组弄清楚。

对于一维数组：

```
V[i] ==> *(V+i) 
```

对于具有 C 列的二维数组

```
M[i][j] ==> *(M+(C*i+j)) 
```

3D 数组的指针算法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:33:50.330

```
M[i][j] ==> *(M+(C*i+j)) 
```

错误的。这是

```
M[i][j] ==> *(*(M+i)+j) 
```

3D

```
M[i][j][k] ==>  *(*(*(M+i)+j)+k) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:34:06.877

如果 3D 数组有 C 列和 R 行，则每个切片是 C*R 元素。

```
M[i][j][k] = *(M + C*R*i + C*j + k) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T22:38:49.393

使用指针语法重写订阅然后扩展指针算术给出：

```
M[i][j][k] = *(*(*(M + i) + j) + k) = *(&M[0][0][0] + x * y * i + y * j + k) 
```

其中 x、y 和 z（后一个未使用）是数组的维度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T22:35:10.083

对于矩阵 M[X][Y][Z]

> M[i][j][k] = *(M+(Y*Z*i+Z*j+k))

# google-maps - Google Maps API v3 Combinatorics：多人、多地点的最短路线

> ID：16157788
> 
> 赞同：2
> 
> 时间：2013-04-22T22:26:07.760
> 
> 标签：google-maps, gwt, google-maps-api-3, routes, gwt-2.5

不幸的是，我错过了解决以下问题的想法：

我有 20 个地点，必须访问一次，还有 4 个人管理路线。另外，我对每个司机都有相同的出发地和相同的目的地。

现在，我想要...

*   每个人大约在同一时间开车
*   每个地点只访问一次，与谁无关。
*   所有 4 条路线的时间和长度**加起来**是最小的，这意味着，并非绝对需要**一条**路线是最佳的。

我只知道如何缩短一条路线（`setOptimizeWaypoints:true`）以及如何使用航路点...距离矩阵...等等，所以我不知道如何组合多条路线。

我在 GWT 2.5.1 中使用 maps API v3，但我也有纯 JavaScript 方面的经验。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:32:09.503

这不是您可以通过正确调用 API 来解决的问题。看看[http://en.wikipedia.org/wiki/Travelling_salesman_problem](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

# ios - IndexPathForCell 和 IndexPathForRowAtPoint 崩溃

> ID：16157798
> 
> 赞同：0
> 
> 时间：2013-04-22T22:27:03.750
> 
> 标签：ios, uitableview, nsindexpath, heightforrowatindexpath

我有`UITableViewController`静态分组单元格。在特定视图中，我想删除一些单元格。如果我只是隐藏它们，它会留下一个空白空间，所以我想将单元格设置`rowHeight`为`0`。我在执行此操作时遇到了麻烦，因为我似乎无法获得要隐藏的单元格的 indexPath。我通过 IB 连接引用了它。在阅读之后，似乎最好的方法是通过`heightForRowAtIndexPath`方法。这是我的代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *myIndexPath = [self.tableView indexPathForRowAtPoint:self.billToPostalCell.center]; 
    //crashes here

    if ([indexPath isEqual:myIndexPath]) {
        return 0; 
    }
    return 44;
} 
```

在此之前，我正在尝试`IndexPathForCell`，但也会崩溃。从我阅读的内容来看`heightForRowAtIndexPath`，即使细胞不可见，也应该可以工作。当它崩溃时，调试器中也没有任何显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:49:23.587

你正在做的是导致无限递归导致......等待它......堆栈溢出！

在该`heightForRowAtIndexPath:`方法中，您不能向表格询问单元格或向 indexPath 询问行，因为这些方法需要知道单元格的高度。所以那些调用导致`heightForRowAtIndexPath:`被调用。而且由于您随后再次调用了相同的违规方法，因此这种情况一直持续到事情发展顺利为止。

由于您的目标是隐藏单元格，因此您应该使用正确的`UITableView`方法 ( `deleteRowsAtIndexPaths:withRowAnimation:`) 从表格中删除单元格。当然，您需要先更新您的数据模型（删除行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:40:59.337

您不应该更改单元格的可见性和高度。如果您想删除单元格并稍后添加它们，或者从不添加它们，您应该使用 UITableView 上的插入和删除方法。这是一个很好的起点[文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)。

此外，您不应该从内部使用 tableView 上的方法，`tableView:heightForRowAtIndexPath:`因为`indexPathForRowAtPoint:`tableView 必须先计算出自己的高度，然后才能计算出这样的东西。您可能会遇到错误，因为您处于无限循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:47:35.773

用于`-deleteRowsAtIndexPaths:withRowAnimation`删除行。切勿操纵单元格的可见性来代替删除它；这可能会导致严重的内存问题，并且只是一般的不良做法。只需传入一个`NSArray`填充了`NSIndexPath`您要删除的行的 。

您提到该`indexPathForRowAtPoint:`方法不起作用。这几乎肯定是您传递给它的点的问题。请务必注销 的值，`billToPostalCell.center`以确保您传递的是合法值。但是，如果您正在处理静态单元格，则确实不需要这样做，因为您应该已经知道索引路径（至少对于初始单元格删除）。

正如其他人所提到的，有关删除单元的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths%3awithRowAnimation%3a)提供了您应该需要的所有其他信息。

# facebook - Facebook：从服务器端获取访问令牌，用于从 ios 授予权限的用户

> ID：16157799
> 
> 赞同：0
> 
> 时间：2013-04-22T22:27:04.133
> 
> 标签：facebook, node.js, facebook-access-token

我有一个 ios 和 node js 应用程序，其中用户仅使用客户端授予权限，并且出于安全原因，我试图不将访问令牌发送到服务器 - 有人可以拦截该消息并使用访问令牌。所以我想从服务器端获取访问令牌。这可能吗？这样做时我不希望用户交互。目前，我刚刚获得了一个应用访问令牌，但我认为这对我来说还不够。任何建议表示赞赏。

[这个](http://facebook.stackoverflow.com/questions/12291085/facebook-graph-api-have-app-access-token-need-user-access-token-without-intera)和其他资源没有帮助

# javascript - 如何在browserify上使用jquery、three.js、processing.js等浏览器库？

> ID：16157812
> 
> 赞同：0
> 
> 时间：2013-04-22T22:28:05.867
> 
> 标签：javascript, jquery, node.js, processing, browserify

是否可以在 browserify 上使用 jquery.js、processing.js 和 three.js 等库，这样我就可以完全停止使用 HTML 来要求我的客户端库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:50:07.027

是的。

但是，要正确使用 browserify 库，需要使用 browserify 样式。好消息是转换并不难，对于大多数库来说，这主要是`module.exports`设置它们而不是导出到`window`. 对于许多模块，你不需要自己做，因为它们已经在 npm 上以 browserify 风格发布。jQuery 和三个已在 npm 中准备好供 browserify 使用。

看看这里，看看一个示例转换：[https ://github.com/spine/jqueryify/blob/master/index.js#L8730-L8757](https://github.com/spine/jqueryify/blob/master/index.js#L8730-L8757)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T09:35:51.527

您可能想看看[https://github.com/thlorenz/browserify-shim](https://github.com/thlorenz/browserify-shim)。

它允许在 Browserify 中使用与 commonJS 模块不兼容的 javascript 文件。

他们有一个 jQuery 的具体示例：[https](https://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery) ://github.com/thlorenz/browserify-shim/tree/master/examples/shim-jquery 。

如果你使用 grunt，[grunt-browserify](https://npmjs.org/package/grunt-browserify)也支持 browserify-shim。

# prolog - 第一个结果后功能不会停止 - Prolog

> ID：16157813
> 
> 赞同：0
> 
> 时间：2013-04-22T22:28:08.683
> 
> 标签：prolog

我不明白为什么函数在第一次导致这个之后没有停止：

```
getNo(A, [[A,X]|_], X).
getNo(A, [_|Tail], X):- 
    getNo(A, Tail, X), !.
getNo(_,[],0). 
```

示例输入：

```
?- getNo(a,[[a,2],[b,1]],X).
X = 2 ;
X = 0.

?- getNo(b,[[a,2],[b,1]],X).
X = 1.

?- getNo(c,[[a,2],[b,1]],X).
X = 0. 
```

当元素不是数组中的第一个元素时，句号有效。但是为什么它不停止数组中的第一个元素。为什么它在示例输入中为“a”提供两个答案。

我认为这是导致它的最后一行，但我不能在那里句号“！”。或者无法想出任何其他方法来解决这个问题。

需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:47:24.867

为清楚起见，感叹号是剪切运算符，它不*表现*为“句号”。它只是将您提交给在运行之前所做的选择。通过跟踪我们可以看到它实际上与您遇到的问题无关：

```
?- getNo(a,[[a,2],[b,1]],X).
X = 2 ; [trace]
   Redo: (6) getNo(a, [[a, 2], [b, 1]], _G221) ? creep
   Call: (7) getNo(a, [[b, 1]], _G221) ? creep
   Call: (8) getNo(a, [], _G221) ? creep
   Exit: (8) getNo(a, [], 0) ? creep
   Exit: (7) getNo(a, [[b, 1]], 0) ? creep
   Exit: (6) getNo(a, [[a, 2], [b, 1]], 0) ? creep
X = 0. 
```

所以你可以在这里看到`getNo(a, [], 0)`它也会成功。它也可以自己做，因为没有什么可以阻止它：

```
?- getNo(a,[],X).
X = 0. 
```

没有理由期望它可以通过递归调用或仅通过使用 cut 的直接调用来区分到达空列表的情况。我认为你必须重组你的谓词以获得你想要的行为。例如：

```
get_number(A, [[A,X]|_], X).
get_number(A, [_|Tail],  X)  :- get_number(A, Tail, X).

getNo(A, L, X) :- get_number(A, L, X), !.
getNo(_, _, 0). 
```

作为关于使用 Prolog 的附加说明，您经常需要创建另一个谓词。不要害怕创建辅助谓词。除此之外，没有其他方法可以真正处理需要设置初始条件或后处理的循环。在其他语言中，您可以将需要做的所有工作完全隔离在单个函数的接口后面，但在 Prolog 中，这通常是不可能的，您必须委托给助手。

# jquery - Jquery中的取消订阅事件

> ID：16157814
> 
> 赞同：0
> 
> 时间：2013-04-22T22:28:15.153
> 
> 标签：jquery

我的页面是动态的，因此我创建了一个新的 dom 元素并为它的删除事件订阅它，但是当 dom 元素被删除时，我需要删除订阅的事件。这种元素的添加和删除可能会发生很多次。我将能够获得具有相同 id 的新 dom 元素，例如 abc123、def234。

我按照以下信息创建我的 dom 元素并订阅。谁能告诉我如何退订？

[jQuery中的自定义事件？](https://stackoverflow.com/questions/399867/custom-events-in-jquery)

# android - 片段视图异步更新：ImageView 未更新，但视图中的其他子项正在更新

> ID：16157815
> 
> 赞同：4
> 
> 时间：2013-04-22T22:28:17.167
> 
> 标签：android, android-fragments, android-loadermanager

我有使用 Fragments 的 ViewPager .. 片段现在只包含一个带有 ImageView 和大 TextView 作为标题的框架布局.. 每个片段图像都在异步加载..

我的问题是在异步任务完成后，我可以看到图像的标题随着新值的变化而改变..但是 ImageView 显示的图像仅在第一次加载..

**onCreateView 方法**

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout containing a title and body text.
    ViewGroup rootView = (ViewGroup) inflater.inflate(
            R.layout.fragment_sliding, container, false);
    rootView.setId(imgId);
    return rootView;
} 
```

当我的异步加载器加载信息时

```
 @Override
public void onLoadFinished(Loader<DImage> arg0, DImage arg1) {
    View v = getView();

    ImageView im = (ImageView) v.findViewById(R.id.fragment_image);
    im.setImageBitmap(arg1.image);
    TextView tv = (TextView) v.findViewById(R.id.fragment_image_title);
    tv.setText(arg1.id + "");

} 
```

所有片段获得的结果都不同..当我滑动图像时，textview文本的显示方式也不同..我尝试将图像位图设置为null然后用新位图更新..但它不起作用..任何线索在哪里我错了？？

编辑：添加片段的 XML

```
 <ImageView
    android:id="@+id/fragment_image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:keepScreenOn="true"

    />

<TextView
    android:id="@+id/fragment_image_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:textSize="30dp" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T21:21:17.200

我也遇到了同样的问题，花了几个小时寻找解决方案。希望可以帮助其他人解决此问题。

我看到它`Fragment`正在通过`onCreateView`，我只在片段在`AsyncTask`. 我检查`onPostExecute`了位图是否设置为`ImageView`，但徒劳无功。唯一第`ImageView`一次显示图像。甚至`invalidate()`没有帮助。

经过一番搜索，我发现`FragmentPagerAdapter`重新实例化了片段。对于更大的数据，建议使用：`FragmentStatePagerAdapter`. 它使用更少的内存并破坏碎片。

在这里阅读更多： [FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)

# .net - Unity，每个请求的生命周期

> ID：16157817
> 
> 赞同：0
> 
> 时间：2013-04-22T22:28:29.607
> 
> 标签：.net, dependency-injection, asp.net-web-api, unity-container

我想知道如何使用 Unity 执行以下操作....

我有一段简单的代码，其中“每个请求”创建一个对象，在大多数情况下，我使用注入工厂来构建 ILogger 实例（每个请求）......如下......

```
container.RegisterType<ILogger>(new InjectionFactory( factory => factory.Resolve<ILoggingFactory>() )); 
```

到目前为止非常简单......但是想象一下，我在一个 Web 请求中对多个对象进行了多次调用，当请求进来时，我想创建和使用上面的记录器，但我希望后续调用可以用于已经存在的实例存在....如下

```
// This should use the RegisterType functionality (above) to create a new instance of the logger
public class A : IAIntf
{
    public AConstructor(ILogger log)
    { .. }
}

// This should use the logger which was constructed when A was created
public class B : IBIntf
{
    public BConstructor(ILogger log)
    { .. }
} 
```

此代码为 A 类正确创建了一个接口，但在创建 B 类时未能重用该接口，使用 ..

```
unity.GetService(typeof(T)); // Unity thinks T is IBIntf (which is correct) 
```

.. 但在解决方案期间，Unity 无法重用实例化类 A 时创建的 ILogger 类。

我认为问题是Unity需要维护ILogger接口的生命周期，所以我调整了容器注册如下，但是创建了一个新的ILogger :(

```
container.RegisterType<ILogger>(new HttpRequestLifetimeManager<ILogger>(), 
    new InjectionFactory( factory => factory.Resolve<ILoggingFactory>() ));

// Also tried
container.RegisterType<ILogger>(new PerResolveLifetimeManager(), 
    new InjectionFactory( factory => factory.Resolve<ILoggingFactory>() )); 
```

如何告诉 unity 给我一个 B 类的新实例，但重用也传递给 A 类的 ILogger 接口，而不是创建一个新的 ILogger 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:30:36.830

我想我已经设法解决了这个问题-我认为我的问题是 HttpContext.Current 在类库中，因此似乎无法正确解决，而是使用 callcontext 似乎可以解决问题。

# javascript - 使用 html 翻页动画书，但来自时事通讯

> ID：16157822
> 
> 赞同：0
> 
> 时间：2013-04-22T22:28:46.123
> 
> 标签：javascript, html, html-email

我成功地从这样的 html 链接翻页

```
<a href="javascript:$('#magazine').turn('page',4)">Index term</a> 
```

但我想知道的是从时事通讯转到特定页面。

“我正在制作一个 html turn.js 杂志，该杂志的所有新闻都发布在时事通讯中，我希望时事通讯中的每篇文章都能进入杂志的特定页面”我希望清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:44:09.047

Your example link didn't work, so I'm having a bit of a guess here.

I'd suggest you look into [anchor links](http://www.w3schools.com/html/html_links.asp). If you give a specific element/div an id of, for example "page01", you can target it in your email (or site) by using www.yoursite.com/page.html#page01 as the url.

# javascript - 浏览器游戏框架的硬编码图像大小与动态图像大小集？

> ID：16157828
> 
> 赞同：0
> 
> 时间：2013-04-22T22:29:02.040
> 
> 标签：javascript, image, assets

我想知道拥有一个框架的缺点和优点，其中（A）你设置图像是这样的：

```
var image = new Image("path", width, height); 
```

并且宽度和高度是硬编码的。

我的第二个想法是（B）在加载后设置图像的宽度和高度。在这种情况下，图像仅在有渲染请求时才被请求（到服务器）。加载图像后，它会根据其元数据设置宽度/高度。像这样：

```
var image = new Image("path");

    // somewhere into the renderer after the image has been loaded
    image.setWidth(width);
    image.setHeight(height); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:38:05.073

就页面重量而言，您将能够更好地负责任地使用响应式图像。想象一下在 27 英寸显示器和 iPhone 上查看同一页面。

您可以检测屏幕尺寸并加载适当尺寸的图像，这样您就不会为 320 像素宽的 iPhone 加载 600kb 的主图像。您可以加载该图像的 15kb 小弟弟。

在您的第二个示例中，您在确定大小时已经加载了图像，因此您失去了通过加载较小版本的图像来节省带宽的机会。

此外，根据此函数在源顺序中的位置，如果在加载后调整图像大小，您可能会导致重绘，这很慢而且有点蹩脚。

# hash - 有效的 md5/sha1/etc 输入字符？

> ID：16157829
> 
> 赞同：2
> 
> 时间：2013-04-22T22:29:02.210
> 
> 标签：hash, input, character-encoding, md5, sha1

哪些字符是常用哈希方法的有效输入。我猜测人/计算机已知的每个可能的符号都不是有效的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:42:47.347

md5/sha1/5 的输入**不是**字符/符号而是字节。所以这让你的问题有点没有意义。

所有字节序列都是有效输入。

字符和符号是不明确的，不能被散列。什么是md5 `a`？如果您正在回答这个问题，那么即使我可以将其编码为 UTF-16/32 或 EBCDIC 以获得完全不同的哈希值，您也错误地假设了 ASCII。不要让我开始使用非 ASCII 符号或字符。所以这个问题是模棱两可的，除非我提到字节或字符+字符编码的输入。

我推荐阅读[What Every Programmer Absolutely, Positively Needs To Know About Encodings and Character Sets to work with Text](http://kunststube.net/encoding/)。

# c# - C# 编译 Visual Studio 程序

> ID：16157830
> 
> 赞同：0
> 
> 时间：2013-04-22T22:29:03.320
> 
> 标签：c#, compiler-construction

我正在尝试创建一个程序，该程序多次编译另一个程序，每次都在一个类源文件中调整一些常量变量（如硬编码配置）。

我需要从构建器中编译程序（ac#visual studio 项目，如果有帮助的话）。这是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:32:44.950

您可以通过多种方式调用 C# 编译器：

*   您可以使用[命令行编译器](http://msdn.microsoft.com/en-us/library/vstudio/78f4aasd.aspx)将特定的 C# 文件编译为可执行文件。
*   您可以使用[`CSharpCodeProvider`](http://support.microsoft.com/kb/304655?wa=wsignin1.0).
*   如果要编译 Visual Studio 项目，可以使用[`MSBuild`](http://msdn.microsoft.com/en-us/library/vstudio/dd393574.aspx).
*   [Mono 编译器](http://www.mono-project.com/CSharp_Compiler)还可以编译 c# 代码。

但是，您正在做的事情听起来像是对问题的错误解决方案。将它作为一个变量并通过命令行参数、应用程序设置或从经过身份验证的 Web 服务器下载的变量更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:31:10.840

您可以使用调用 .net 编译器`Process.Start`

可执行文件名为 csc.exe，通常位于 c:\Windows\Microsoft.NET\Framework\vX.X.XXX

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:33:28.093

编辑：我复制/粘贴的样本不正确。我希望提供的选项是使用[CompileAssemblyFromFile](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.compileassemblyfromfile.aspx)。示例代码冷在[这里获得](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.compilerparameters.aspx)

# php - 您忘记输入密码

> ID：16157831
> 
> 赞同：0
> 
> 时间：2013-04-22T22:29:05.270
> 
> 标签：php

出于某种原因，每当我尝试运行 PHP 时，它只会说“您忘记输入密码”。关于我缺少什么的任何建议？代码本身似乎没有错误......？我尝试了多种选择，但似乎仍然没有解决此错误。我有一个数据库，它正在适当地连接，它似乎没有拉出 password1 字段。

```
 <?php
echo mysql_error(); 
// Send NOTHING to the Web browser prior to the session_start() line!
// Check if the form has been submitted.
if (isset($_POST['submitted'])) {
require_once ('../../mysql_connect.php'); // Connect to the db.
$errors = array(); // Initialize error array.
// Check for an email address.
if (empty($_POST['email'])) {
    $errors[] = 'You forgot to enter your email address.';
} else {
    $e = mysql_real_escape_string(trim($_POST['email']));
}
// Check for a password.
if (empty($_POST['password1'])) {
    $errors[] = 'You forgot to enter your password.';
} else {
    $password1 = mysql_real_escape_string($_POST['password1']);
}
if (empty($errors)) { // If everything's OK.
    /* Retrieve the user_id and first_name for 
    that email/password combination. */
    $query = "SELECT * FROM `Users` WHERE email='$e' AND  
    password1='$password1','$password2'"; 
    $result = @mysql_query ($query); // Run the query.
    $row = mysql_fetch_array ($result, MYSQL_BOTH);
    if ($row) { // A record was pulled from the database.
        //Set the session data:
        session_start(); 
        $_SESSION['first_name'] = $row[1];
        $_SESSION['last_name'] = $row[2];
        $_SESSION['email'] = $row[3];
        $_SESSION['password1'] = $row[4];
        $_SESSION['password2'] = $row[5];
        $_SESSION['registration_date'] = $row[6]; 

        // Redirect:
        header("Location:loggedin.php");
        exit(); // Quit the script.
    } else { // No record matched the query.
        $errors[] = 'The email address and password entered do not match     
those on file.'; // Public message.
    }
} // End of if (empty($errors)) IF.
mysql_close(); // Close the database connection.
} else { // Form has not been submitted.
$errors = NULL;
} // End of the main Submit conditional.

// Begin the page now.
$page_title = 'Login';
include ('header.php');
if (!empty($errors)) { // Print any error messages.
echo '<h1 id="mainhead">Error!</h1>
<p class="error">The following error(s) occurred:<br />';
foreach ($errors as $msg) { // Print each error.
    echo " - $msg<br />\n";
}
echo '</p><p>Please try again.</p>';
}

// Create the form.
?>
<body bgcolor="#c0c6c6"> 
<h2>Please, login here.</h2>
<form action="login.php" method="post">
<p>Email Address: <input type="text" name="email" size="20" maxlength="40" /> </p>
<p>Password: <input type="password" name="password" size="20" maxlength="20" /></p>
<p><input type="submit" name="submit" value="Login" /></p>
<input type="hidden" name="submitted" value="TRUE" />
</form>

<?php
include ('footer.php');
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T22:30:34.243

您的表单包含`name="password"`，但您的 PHP 正在寻找`$_POST['password1']`。这些名称必须匹配才能正常工作！

# javascript - 使用 setInterval 函数时遇到问题

> ID：16157834
> 
> 赞同：0
> 
> 时间：2013-04-22T22:29:47.967
> 
> 标签：javascript, setinterval

我在下面的工作中遇到了一些麻烦。我正在尝试运行这个名为 Chat.fetch 的异步函数，我可以获得它返回的消息以正确显示。当我尝试通过 setInterval 传递它时，它会返回一次聊天消息，但不会每 3 秒刷新一次，这就是我想要做的。任何方向都会很棒。谢谢！

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
   <script src="http://chatbuilder.hackreactor.com/ChatBuilder.js"></script>
  </head>
    <body>
      <script>
         Chat.guide.start();
      </script>

  <h2>Borken Chat</h2>

  <input class="draft" type="text"/> <button class="send" disabled>send</button>

  <ul class="messages">

     PrintChat=function(Chat_Messages){
       var y=Chat_Messages.length;
       for(i=0;i<y;i++){
         Chat.display(Chat_Messages[i]);
       }
     }

   PrintMessages=Chat.fetch(PrintChat);
   setInterval(PrintMessages,3000);

  </script>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:41:11.443

尝试这个：

```
function fetchNew() {
 var PrintChat=function(Chat_Messages){
   var y=Chat_Messages.length;
   for(i=0;i<y;i++){
     Chat.display(Chat_Messages[i]);
   }
 }
 Chat.fetch(PrintChat);
}

setInterval(fetchNew,3000); 
```

原始代码中的问题是调用函数`PrintMessages`的*结果，而不是函数本身。*

# python - 为任意对象创建哈希？

> ID：16157835
> 
> 赞同：7
> 
> 时间：2013-04-22T22:29:49.977
> 
> 标签：python

我一直在使用`pickle.dumps`它来为任意 Python 对象创建哈希，但是，我发现 dict/set 订单没有规范化，因此结果不可靠。

在 SO 和[其他地方](http://www.aminus.org/blogs/index.php/2007/11/03/pickle_dumps_not_suitable_for_hashing?blog=2)有[几个](https://stackoverflow.com/questions/5417949/computing-an-md5-hash-of-a-data-structure) [相关的](https://stackoverflow.com/questions/9339345/hash-a-python-new-style-class-instance) [问题](https://stackoverflow.com/questions/12727571/using-pickle-dumps-to-hash-mutable-objects)，但我似乎找不到使用相同基础的哈希算法（/结果）。我了解自己滚动的基本要求，但显然我更喜欢使用经过测试的东西。`__getstate__``__dict__`

有这样的图书馆吗？我想我实际上要的是一个确定性地序列化对象的库（使用`__getstate__`and `__dict__`），以便我可以散列输出。

**编辑**

为了澄清，我正在寻找与 Python [`hash`](http://docs.python.org/2/library/functions.html#hash)（或[`__hash__`](http://docs.python.org/2/reference/datamodel.html#object.__hash__)）返回的值不同的东西。我想要的本质上是任意对象的校验和，这些对象可能是可散列的，也可能不是可散列的。该值应根据对象的状态而有所不同。（我使用“状态”来指代由重新调整的字典，`__getstate__`或者，如果不存在，则对象的`__dict__`.）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T01:51:10.563

我突然想到 Pickler 可以扩展，并且可以覆盖选择函数以规范化必要的类型，所以这就是我正在做的事情。这是它的样子：

```
from copy import copy
from pickle import Pickler, MARK, DICT
from types import DictionaryType

class CanonicalizingPickler(Pickler):
    dispatch = copy(Pickler.dispatch)

    def save_set(self, obj):
        rv = obj.__reduce_ex__(0)
        rv = (rv[0], (sorted(rv[1][0]),), rv[2])
        self.save_reduce(obj=obj, *rv)

    dispatch[set] = save_set

    def save_dict(self, obj):
        write = self.write
        write(MARK + DICT)

        self.memoize(obj)
        self._batch_setitems(sorted(obj.iteritems()))

    dispatch[DictionaryType] = save_dict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:41:43.780

我假设一旦计算（并存储）了对象的哈希值，您就会将对象视为不可变的。否则，你应该对你正在做的事情非常小心（例如，不应该使用它们的散列性质量来将它们存储在集合、字典等中）。

也就是说，最优雅的方法是首先将对象中的所有成员存储`__dict__`在可散列类型中。而不是`list`s，使用元组（当然是可散列的对象）。而不是`dict`s，使用[这个](https://stackoverflow.com/questions/1151658/python-hashable-dicts)问题的任何解决方案作为你的 hashable-dict 类型（我个人使用@alex's）。同样，键和值都必须是可散列的才能使其工作。

然后，您的`__hash__`方法可以使用您正在使用的相同 hashable-dict，例如：

```
def _hashable_state(self):
    return MyHashableDict(self.__dict__)
def __hash__(self):
    return hash(self._hashable_state())
def __reduce__(self):
    return self._hashable_state() 
```

# php - 如何从 AJAX 请求返回结果

> ID：16157836
> 
> 赞同：1
> 
> 时间：2013-04-22T22:29:51.553
> 
> 标签：php, javascript, jquery, ajax

今天我正在创建一个名为“sendData”的 Javascript 函数。

这是为了方便使用，而不是写出整个 ajax 语句。

无论如何，我知道它是异步的，我想知道如何等待并获得返回的值，而不是什么都不返回。这就是我所拥有的。

```
 function returnData(data)
{
    alert(data + " ddd");
    return data;
}

function sendData(data,file) {
    var a = ""
    $.ajax({
        url: file,
        data: data,
        type: "POST",
        success: function(newData)
        {
            a = newData;

        }
    })
    returnData(a);
} 
```

我认为这会奏效，但事实并非如此。有谁知道我怎样才能等待它返回或什么？

## 最终代码

```
function sendData(data,file) {
    var a = ""
    $.ajax({
        url: file,
        data: data,
        type: "POST",
        async:false,
        success: function(newData)
        {
            a = newData;
        }
    })
    return a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:34:14.333

好吧，如果您想保持异步，请在您的 中调用您的函数`success`，即：

```
function returnData(data)
{
    alert(data + " ddd");
    return data;
}

function sendData(data,file) {
    var a = ""
    $.ajax({
        url: file,
        data: data,
        type: "POST",
        success: function(newData)
        {
            returnData(newData);
        }
    })
} 
```

这样，在您有东西要发送给它之前，您的函数不会被调用。否则，将其设置为等待响应，然后再继续`async:false,`输入参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:32:09.047

如果您设置该选项`async:false`，它将等待回调返回。

```
$.ajax({
    ...
    async:false,
    ...
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T22:33:02.500

你也可以这样做：

```
function sendData(data,file) {
    var a = ""
    $.ajax({
        url: file,
        data: data,
        type: "POST",
        success: function(newData)
        {
            returnData(newData);

        }
    })
} 
```

这是使用回调的典型方式。成功函数*是*应该在成功时执行的代码。

您可能还想查看承诺：[http ://api.jquery.com/promise/](http://api.jquery.com/promise/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T22:37:35.033

可能只是使用？

```
 function sendData(data,file) {
           var a = ""
           $.ajax({
              url: file,
              data: data,
              type: "POST",
              success: function (newData) {
                 a = newData;
                 returnData(a);

              }
           })
           return;
        } 
```

# facebook - Facebook API 自动生成 OAuth 令牌

> ID：16157837
> 
> 赞同：3
> 
> 时间：2013-04-22T22:29:57.720
> 
> 标签：facebook, facebook-graph-api

假设我有一个网站，我想从 Facebook 上的某个粉丝群中提取公共数据（即最近的帖子、喜欢、地点等），但不希望查看者必须登录 FB。了解我不会对任何特定用户的信息感兴趣，因此不需要他们特定的登录身份验证。有没有办法自动生成 OAuth 令牌以与 FB API 一起使用，以便可以在不强制用户登录的情况下发出通用请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:44:39.910

您可以做的是使用应用程序访问令牌进行这些调用。要创建您的应用程序访问令牌，只需将您的`APP_ID`和您的`APP_SECRET`与管道字符连接起来。

```
https://graph.facebook.com/FacebookDevelopers/feed?access_token=APP_ID|APP_SECRET 
```

这将返回来自 Facebook 开发人员页面提要的所有公共故事。您可以使用页面虚 URL（如果有），但您也可以使用`PAGE_ID`.

# jquery - 类方法中的打字稿“this”

> ID：16157839
> 
> 赞同：94
> 
> 时间：2013-04-22T22:30:11.960
> 
> 标签：jquery, this, typescript, proxy-classes

我知道这可能是痛苦的基本，但我很难把头绕过去。

```
class Main
{
     constructor()
     {
         requestAnimationFrame(this.update);  //fine    
     }

     update(): void
     {
         requestAnimationFrame(this.update);  //error, because this is window
     }

} 
```

似乎是我需要代理的情况，所以可以说使用 Jquery

```
class Main
{
     constructor()
     {
         this.updateProxy = $.proxy(this.update, this);
         requestAnimationFrame(this.updateProxy);  //fine    
     }

     updateProxy: () => void
     update(): void
     {
         requestAnimationFrame(this.updateProxy);  //fine
     }

} 
```

但是来自 Actionscript 3 背景，我不确定这里发生了什么。抱歉，我不确定 Javascript 从哪里开始，TypeScript 从哪里结束。

```
updateProxy: () => void 
```

而且，我不相信我做对了。我想要的最后一件事是我的大部分班级都有需要访问的 aa() 函数，`aProxy()`因为我觉得我正在写两次相同的东西？正常吗？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-04-22T23:42:47.140

如果你想`this`捕获 TypeScript 的方法是通过箭头函数。引用安德斯的话：

> `this`in 箭头函数是词法范围的

这是我喜欢使用它的方式：

```
class test{
    // Use arrow functions
    func1=(arg:string)=>{
            return arg+" yeah" + this.prop;
    }
    func2=(arg:number)=>{
            return arg+10 + this.prop;
    }       

    // some property on this
    prop = 10;      
} 
```

[在 TypeScript Playground 中查看](http://www.typescriptlang.org/Playground/#src=class%20test%7B%0A%09%2F%2F%20Use%20arrow%20functions%0A%09func1%3D(arg%3Astring)%3D%3E%7B%0A%09%09%09return%20arg%2B%22%20yeah%22%20%2B%20this.prop%3B%0A%09%7D%0A%09func2%3D(arg%3Anumber)%3D%3E%7B%0A%09%09%09return%20arg%2B10%20%2B%20this.prop%3B%0A%09%7D%09%09%0A%09%09%0A%09%2F%2F%20some%20property%20on%20this%0A%09prop%20%3D%2010%3B%0A%7D)

可以看到在生成的 JavaScript是在函数调用*之外*`this`捕获的：

 *```
var _this = this;
this.prop = 10;
this.func1 = function (arg) {
    return arg + " yeah" + _this.prop;
}; 
```

所以`this`函数调用中的值（可能是`window`）不会被使用。

要了解更多信息：[“理解`this`TypeScript”(4:05) – YouTube](https://www.youtube.com/watch?v=tvocUcbCupA&hd=1)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-07T01:55:33.227

如果你这样写你的方法，'this' 将按照你期望的方式处理。

```
class Main
{
    constructor()
    {
        requestAnimationFrame(() => this.update());
    }

    update(): void
    {
        requestAnimationFrame(() => this.update());
    }
} 
```

另一种选择是将“this”绑定到函数调用：

```
class Main
{
    constructor()
    {
        requestAnimationFrame(this.update.bind(this));
    }

    update(): void
    {
        requestAnimationFrame(this.update.bind(this));
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-22T22:52:27.547

请参阅 typescript 语言规范的第 72 页 [https://github.com/Microsoft/TypeScript/blob/master/doc/TypeScript%20Language%20Specification.pdf?raw=true](https://github.com/Microsoft/TypeScript/blob/master/doc/TypeScript%20Language%20Specification.pdf?raw=true)

## 箭头函数表达式

在示例中

```
class Messenger {
 message = "Hello World";
 start() {
 setTimeout(() => alert(this.message), 3000);
 }
};
var messenger = new Messenger();
messenger.start(); 
```

> 使用箭头函数表达式会导致回调与周围的“开始”方法具有相同的 this。将回调编写为标准函数表达式，必须手动安排对周围 this 的访问，例如通过将其复制到局部变量中：

这是实际生成的 Javascript：

```
class Messenger {
 message = "Hello World";
 start() {
 var _this = this;
 setTimeout(function() { alert(_this.message); }, 3000);
 }
}; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-15T09:46:42.400

聚会很晚，但我认为对于这个问题的未来访客来说，考虑以下几点非常重要：

其他答案，包括接受的答案，错过了一个关键点：

```
myFunction() { ... } 
```

和

```
myFunction = () => { ... } 
```

不是同一件事“除了后者捕获**”**`this`。

第一种语法在原型上创建一个方法，而第二种语法在其值为函数的对象上创建一个属性（也恰好捕获`this`）。您可以在转译的 JavaScript 中清楚地看到这一点。

要完整：

```
myFunction = function() { ... } 
```

与第二种语法相同，但没有捕获。

*因此，在大多数情况下*使用箭头语法将解决您绑定到对象的问题，但它并不相同，并且在许多情况下您确实希望在原型上使用适当的函数而不是属性。

在这些情况下，使用代理或`.bind()`实际上*是*正确的解决方案。（虽然可读性不好。）

在这里阅读更多内容（主要不是关于 TypeScript，而是原则立场）：

[https://medium.com/@charpeni/arrow-functions-in-class-properties-might-not-be-as-great-as-we-think-3b3551c440b1](https://medium.com/@charpeni/arrow-functions-in-class-properties-might-not-be-as-great-as-we-think-3b3551c440b1)

[https://ponyfoo.com/articles/binding-methods-to-class-instance-objects](https://ponyfoo.com/articles/binding-methods-to-class-instance-objects)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-11-05T12:17:19.037

当您将函数作为回调传递时，就会出现问题。到回调执行时，“this”的值可能已更改为 Window、调用回调的控件或其他内容。

确保在将引用传递给要回调的函数时始终使用 lambda 表达式。例如

```
public addFile(file) {
  this.files.push(file);
}
//Not like this
someObject.doSomething(addFile);
//but instead, like this
someObject.doSomething( (file) => addFile(file) ); 
```

这编译成类似的东西

```
this.addFile(file) {
  this.files.push(file);
}
var _this = this;
someObject.doSomething(_this.addFile); 
```

因为 addFile 函数是在特定对象引用 (_this) 上调用的，所以它不使用调用者的“this”，而是使用 _this 的值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-22T22:45:15.887

简而言之，this 关键字总是引用调用函数的对象。

在 Javascript 中，由于函数只是变量，因此您可以传递它们。

例子：

```
var x = {
   localvar: 5, 
   test: function(){
      alert(this.localvar);
   }
};

x.test() // outputs 5

var y;
y.somemethod = x.test; // assign the function test from x to the 'property' somemethod on y
y.test();              // outputs undefined, this now points to y and y has no localvar

y.localvar = "super dooper string";
y.test();              // outputs super dooper string 
```

当您使用 jQuery 执行以下操作时：

```
$.proxy(this.update, this); 
```

您正在做的是覆盖该上下文。在幕后 jQuery 会告诉你：

```
$.proxy = function(fnc, scope){
  return function(){
     return fnc.apply(scope);  // apply is a method on a function that calls that function with a given this value
  }
}; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-19T20:54:45.370

这样做怎么样？声明一个“myClass”类型的全局变量并在类的构造函数中初始化它：

```
var _self: myClass;

class myClass {
    classScopeVar: string = "hello";

    constructor() {
        _self = this;
    }

    alerter() {
        setTimeout(function () {
            alert(_self.classScopeVar)
        }, 500);
    }
}

var classInstance = new myClass();
classInstance.alerter(); 
```

注意：重要的是不要使用“自我”，因为它已经具有特殊含义。*

# java - 为什么要这样做？（使用字符串 Namevaluepairs 和 StringBuilder）

> ID：16157851
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:31:45.937
> 
> 标签：java, android, http, post

我最近看到了一个示例代码，它首先创建 NameValuePair 对象并填充它：

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("Param1", param1));
params.add(new BasicNameValuePair("Param2", param2));
params.add(new BasicNameValuePair("Param3", param3)); 
```

然后将其传递给另一种方法以将其转换为一个字符串：

```
 private String getQuery(List<NameValuePair> params) throws UnsupportedEncodingException
{
    StringBuilder result = new StringBuilder();
    boolean first = true;

    for (NameValuePair pair : params)
    {
        if (first)
            first = false;
        else
            result.append("&");

        result.append(URLEncoder.encode(pair.getName(), "UTF-8"));
        result.append("=");
        result.append(URLEncoder.encode(pair.getValue(), "UTF-8"));
    }

    return result.toString();
} 
```

在我看来，我可以通过这样做得到相同的结果：

```
String query = "";
query += URLEncoder.encode("Param1", "UTF-8") + "=" + URLEncoder.encode(Param1, "UTF-8")
query += "&" + URLEncoder.encode("Param2", "UTF-8") + "=" + URLEncoder.encode(Param2, "UTF-8")
query += "&" + URLEncoder.encode("Param2", "UTF-8") + "=" + URLEncoder.encode(Param2, "UTF-8") 
```

我的代码可以工作吗？如果不是，为什么？如果是，那么以另一种方式做的好处是什么？

我意识到前者允许您传入任意数量的 NVP，但我只是证明了在构建 NVP 所需的行数中，我能够构建整个 POST 字符串！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:37:53.237

使用`NameValuePair`s 的代码更通用。`getQuery`是可重用的，并且与传递给它的对完全无关。

如果您将设计（和语法）排除在外，那么您的第一个选择是等效的。您建议的第二种选择将**不起作用**，因为它会转义`=`s 和`&`s 以及参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:41:02.693

我认为这真的是关于可读性和可重用性。您看到的原始代码比您建议的单个内联字符串连接更具可读性。小而简洁的语句传递给灵活的方法。此外，在原始版本中，由于名称和值作为单独的字段保存，因此如果需要，该名称 List 可以用于其他用途，而您的内联方法是单一用途的。

这两段代码的性能应该完全相同。当您查看 Java 编译器对字符串连接所做的操作时，它实际上会实例化一个 StringBuilder 本身来执行类似于原始代码的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:35:36.043

从性能的角度来看并不重要，因为始终存在少量 HTTP 参数。

我个人喜欢这种方式：

```
 new Uri.Builder()
.scheme("http")
.authority("foo.com")
.path("someservlet")
.appendQueryParameter("param1", foo)
.appendQueryParameter("param2", bar)
.build(); 
```

# java - Android 中 SimpleAdapter 上的 ClassCastException

> ID：16157853
> 
> 赞同：0
> 
> 时间：2013-04-22T22:31:50.400
> 
> 标签：java, android, classcastexception, listadapter, simpleadapter

我正在尝试在我的 Android 应用程序中显示警报列表，但出现异常。我该如何解决这个问题？

这是我尝试初始化适配器的地方：

```
 List<Alarm> list;
    Database db = new Database(AlarmListActivity.this);
    list = db.getAllAlarms();

    if(!list.isEmpty() && list != null)
    {
        System.out.println("inside list");
        System.out.println(list);

        ListAdapter adapter = new SimpleAdapter(
                AlarmListActivity.this,
                (List<? extends Map<String, ?>>) list,
                R.layout.list_item, 
                new String[] { "id", "time"},
                new int[] { R.id.id, R.id.time});
        setListAdapter(adapter);

    } 
```

如果我不强制转换列表变量`(List<? extends Map<String, ?>>)`，我会收到一个错误，迫使我强制转换它。我不太确定在这里做什么。

这是我的 LogCat：

```
04-22 22:26:20.192: E/AndroidRuntime(1697): FATAL EXCEPTION: main
04-22 22:26:20.192: E/AndroidRuntime(1697): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.wakeup/com.example.wakeup.AlarmListActivity}: java.lang.ClassCastException: java.util.HashMap cannot be cast to java.util.List
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.os.Looper.loop(Looper.java:137)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at java.lang.reflect.Method.invoke(Method.java:511)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at dalvik.system.NativeStart.main(Native Method)
04-22 22:26:20.192: E/AndroidRuntime(1697): Caused by: java.lang.ClassCastException: java.util.HashMap cannot be cast to java.util.List
04-22 22:26:20.192: E/AndroidRuntime(1697):     at com.example.wakeup.AlarmListActivity.onCreate(AlarmListActivity.java:53)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.Activity.performCreate(Activity.java:5104)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 22:26:20.192: E/AndroidRuntime(1697):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 22:26:20.192: E/AndroidRuntime(1697):     ... 11 more
04-22 22:26:26.472: I/Process(1697): Sending signal. PID: 1697 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:39:33.967

这就是[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html#SimpleAdapter%28android.content.Context,%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D%29)正在寻找的东西。构造函数

```
public SimpleAdapter (Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to) 
```

其中数据是列表：

> 地图列表。列表中的每个条目对应于列表中的一行。Maps 包含每一行的数据，并且应该包括“from”中指定的所有条目。

您的解决方案，如果您想为 ListView 中的项目呈现对象，您可能会使用其他适配器。或者，您可以将警报对象转换为地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:40:16.933

将您的更改`List`为`ArrayList`. 正如消息告诉您的那样，您不能`Map`从`List`此处转换为 a

```
(List<? extends Map<String, ?>>) list, 
```

看看[这个 SO 答案](https://stackoverflow.com/questions/15522546/why-hashmap-values-are-not-cast-in-list)

# php - 来自外部 URL 的灰度图像

> ID：16157859
> 
> 赞同：0
> 
> 时间：2013-04-22T22:32:15.280
> 
> 标签：php, image-processing, gd

我想获取外部 url，转换成灰度然后显示到浏览器。

我尝试使用带有以下代码的GD：

```
$youtube_id = explode('&amp;v=', $video['youtube_link'])[1];
                                $image_colour = "http://img.youtube.com/vi/$youtube_id/0.jpg";
                                $im = imagecreatefromjpeg($image_colour);
                                $image_gray = imagefilter($im, IMG_FILTER_GRAYSCALE);
                                imagejpeg($im, $youtube_id); 
```

这似乎不起作用。

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:27:19.003

如果要显示图像，则需要设置正确的标题。

我稍微编辑了您的代码，这里有一个工作示例：

```
<?php
$video = "https://www.youtube.com/watch?v=0aFkZET3A8A";
$url_parts = explode('v=', $video);
$youtube_id = $url_parts[1];
$image_colour = "http://img.youtube.com/vi/$youtube_id/0.jpg";
$im = imagecreatefromjpeg($image_colour);
$image_gray = imagefilter($im, IMG_FILTER_GRAYSCALE);
header('Content-Type: image/jpeg');
imagejpeg($im);
?> 
```

修改它，使其适合您的需求。您还应该考虑使用正则表达式而不是explode（目前它仅适用`&v=xyz`于末尾带有短语的简单网址）。

# android - 无法加载游戏：findLibrary 返回 null：使用 cocos2d-x，多次尝试都没有成功？

> ID：16157861
> 
> 赞同：3
> 
> 时间：2013-04-22T22:32:22.533
> 
> 标签：android, android-ndk, shared-libraries, cocos2d-x

我想尝试一个使用 Eclipse Mobile For Developers、NDK、Android SDK 和 Cocos2d-x 的简单项目。

我已正确设置路径： cocos2d-x/create-android-project.sh ：

```
NDK_ROOT_LOCAL="/Users/Empon/android-ndk-r8e"
ANDROID_SDK_ROOT_LOCAL="/Users/Empon/android" 
```

并在 Eclipse 的设置中（属性中的“NDK 路径”）。

我关注了stackoverflow中的主题，但我无法让我的项目工作。与一个主题相比，一件事似乎很奇怪：我在“libs”下面没有任何东西。

我在 Mac Lion 10.7.4 上（我下载了 64 位版本的 Eclipse），我在项目中没有错误，唯一的错误是当我在 android（4.0.4，Alcatel ot 997）上运行应用程序时，这些错误（这里是 2 次尝试的总结）：

```
04-22 22:19:09.079: E/AndroidRuntime(14321): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load game: findLibrary returned null
04-22 22:19:09.079: E/AndroidRuntime(14321):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
04-22 22:19:09.079: E/AndroidRuntime(14321):    at java.lang.System.loadLibrary(System.java:535)
04-22 22:19:09.079: E/AndroidRuntime(14321):    at com.first.cocos2dx.samplecocos2dxandroid.<clinit>(samplecocos2dxandroid.java:37) 
```

你会知道这件事吗？

非常感谢

（来源：[http](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started) ://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started ）

* * *

编辑：

在正确导出 NDK_ROOT 后，我现在遇到了这个问题：`ndk-build: No such file or directory`！

> export NDK_ROOT=/Users/Empon/android-ndk-r8e/ndk-build: 没有这样的文件或目录

但是该文件确实存在于`android-ndk-r8e`......所以，我双击该文件，它说`define the NDK_PROJECT_PATH variable`：

```
Empon$ /Users/Empon/android-ndk-r8e/ndk-build ; exit;
Android NDK: Could not find application project directory !    
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it.    
/Users/Empon/android-ndk-r8e/build/core/build-local.mk:130: *** Android NDK: Aborting 
```

我在终端尝试过这个：

在终端：

```
Empon$ export NDK_PROJECT_PATH=/Users/Empon/cocos2d-x/Monday3/ >> .bash_profile
Empon$ ./build_native.sh
NDK_ROOT = :/Users/Empon/android-ndk-r8e >> .bash_profile
export NDK_ROOT=/Users/Empon/android-ndk-r8e
COCOS2DX_ROOT = /Users/Empon/cocos2d-x/Monday3/proj.android/../..
APP_ROOT = /Users/Empon/cocos2d-x/Monday3/proj.android/..
APP_ANDROID_ROOT = /Users/Empon/cocos2d-x/Monday3/proj.android
Using prebuilt externals
./build_native.sh: line 89: :/Users/Empon/android-ndk-r8e >> .bash_profile
export NDK_ROOT=/Users/Empon/android-ndk-r8e/ndk-build: No such file or directory 
```

或者只是更改 Android.mk 中的路径：

```
#LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes                   
LOCAL_C_INCLUDES := $(LOCAL_PATH)/Classes 
```

但是终端仍然出现同样的错误......知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T22:51:09.223

我认为您没有运行 build_native.sh 脚本

# c++ - VS 2012 的内置 GLUT - 不起作用

> ID：16157870
> 
> 赞同：-2
> 
> 时间：2013-04-22T22:33:55.890
> 
> 标签：c++, opengl, visual-studio-2012

我使用 openGL 所做的唯一一件事就是包含`<GL/gl.h>`头文件。

在我见过的所有 opengl 示例中，这是唯一用于启用 openGL 的声明。

但是，它不起作用。当我创建 Win32 控制台应用程序并编写包含指令时，我突然收到一大堆不同的错误。让我把它们都写下来：

1) 此声明没有存储类或类型说明符
2) 应为“;”
3) 变量 WINGDIAPI 不是类型名称

前两个错误重复了很多次，每个错误都在不同的行中。

这些错误出现在 GL.h 文件中，从第 1157 行到第 1206 行。

怎么了？

顺便提一句。我刚刚在这里发布了非常相似的问题，但主要是关于该主题的一本好书，标题也没有暗示这个案例，我没有得到答案，所以我希望它不是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:57:30.123

你必须`#include <windows.h>`在你面前`#include <GL/gl.h>`。

那只会让你得到OpenGL。如果你想使用 GLUT，你需要单独下载、构建和链接到它（但你真的不想——它很旧、有缺陷，而且它的缺点显然永远不会被修复）。GLUT 有多种替代实现，但它们遵循相同的 API，因此它们只能修复一些最轻微的缺点。

# ios - 与自定义视图控制器相比，我应该何时制作 UIView？

> ID：16157872
> 
> 赞同：1
> 
> 时间：2013-04-22T22:34:01.083
> 
> 标签：ios

我一直对此争论不休，将某种组件制作为 UIViewController 而不是视图的理由是什么？我一直假设每个屏幕有 1 个视图控制器，但如果您使用的是导航视图控制器或类似的东西，则例外

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:43:30.343

`UIViewController`当您需要一个完整的视图控制器时，您可以创建一个类。当您创建某种“小部件”时，您将创建一个`UIView`将添加到父视图（例如视图控制器的视图）的“小部件”。

将视图控制器视为“屏幕”。这个视图控制器代表整个屏幕。它的主视图可以添加很多子视图。控制器负责从视图访问数据和协调事件并向视图提供数据。

一个按钮是视图。表就是视图。图像是视图。但是视图控制器将所有这些视图组合在一起并将它们连接在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:33:09.057

您的问题与 MVC 模式以及如何分离控制器和视图部分非常相关。一个屏幕的一个视图控制器通常是有意义的，我记得以前它是在苹果指南中建议的，现在它已经改变了，但在大多数情况下仍然有效。

iOS 视图库非常全面，我通常不需要创建自定义视图，而是自定义视图控制器。因为在遵循 MVC 模式的应用程序中，viewcontroller 是与视图和数据（模型）交互的中间人，所以您的视图不应直接连接到您的模型，这在很大程度上限制了它的功能。以这种方式考虑一下通用 ios 视图库，如果它不需要包含复杂逻辑（进行计算，与其他视图或对象交互），则您的新类应该与其他控件（例如 uibutton、uiswitch、uitableview）一起驻留将用户的交互通知给控制器就足够了。

我的自定义视图的典型用法是当我需要组合 uiviews（即许多网页中的内容滑块，imdb 中电影页面中的 10 个评级星）并且需要不同的表示形式（即表示饼图中的一些数据或改进的进度条等）时但除此之外，我几乎总是选择自定义视图控制器。

# scala - 在 Heroku 上运行 spray.io spray-can 的最简单方法

> ID：16157874
> 
> 赞同：1
> 
> 时间：2013-04-22T22:34:09.097
> 
> 标签：scala, heroku, sbt, akka, spray

我是 Scala 和 SBT 的新手。我想用 Spray 和 Akka 在 Heroku 上运行简单的 hello-world http 服务器。[http://spray.io/documentation/spray-can/examples/](http://spray.io/documentation/spray-can/examples/)上的 Spray-can 文档告诉我可以这样运行的简单示例：

```
git clone git://github.com/spray/spray.git
cd spray
sbt "project simple-http-server" run 
```

它可以工作，但它依赖于喷雾罐源代码中的 akka.io.IO，并且尚未合并到最终的 Akka（`2.2-SNAPSHOT`） - [http://doc.akka.io/docs/akka/snapshot/scala/io。 .html](http://doc.akka.io/docs/akka/snapshot/scala/io.html) _

1.  `2.2-SNAPSHOT`我可以在我的 SBT 中使用来自 Akka 的 akka.io.IO吗？如何？
2.  我可以将 Spray 1.1-M8-SNAPSHOT 中的 akka.io.IO 与我的 SBT 一起使用吗？如何？
3.  还有另一种简单的方法来运行 hello-world spray-can 吗？

编辑：

广告。1., 2.: akka.io.IO 在 Akka`2.2-M3`

但是喷雾罐源代码中的示例仍然无法工作，因为缺少`spray.can.Http`Spray `1.1-M7`。任何想法我该如何解决这个问题？

```
package spray.examples

import akka.actor.{ActorSystem, Props}
import akka.io.IO
import spray.can.Http

object Main extends App {

  implicit val system = ActorSystem()

  // the handler actor replies to incoming HttpRequests
  val handler = system.actorOf(Props[DemoService], name = "handler")

  IO(Http) ! Http.Bind(handler, interface = "localhost", port = 8080)
} 
```

# dotnetnuke - DotNetNuke“发生严重错误。选择超出范围参数名称：值”使用 DnnFilePickerUploader

> ID：16157880
> 
> 赞同：0
> 
> 时间：2013-04-22T22:34:26.317
> 
> 标签：dotnetnuke, dotnetnuke-module

我刚刚开始开发 DNN 模块，我正在尝试编写一个模块，该模块采用 PDF 和 JPG（作为 PDF 的缩略图），然后将它们显示为列表。我的一切都按照我想要的方式工作，并且能够创建文件夹并上传文件，但我实际上无法将文件与数据库记录相关联。

我正在使用 DnnFilePickerUploader 可以很好地处理异步文件发布，但每次我实际选择我想要的文件并将页面发布回来时，我都会收到“发生严重错误。选择超出范围参数名称：值。” 它甚至从未在我的事件中遇到断点，所以我假设错误是在回发期间出现在引擎盖下某处的 Page_Load 上。

此控件上基本上不存在文档，因此将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:01:31.113

好的，所以我研究了这个控件的代码，发现这是一个似乎来自客户端的错误。传递给服务器的 FilePath 在文件夹和文件名之间有一个额外的“/”，因此它以类似于“myfolder/mysubfolder//myuploadedfile.ext”而不是“myfolder/mysubfolder/myuploadedfile.ext”的形式出现。

然而，根本问题是我已经意识到这不是文件系统在 DNN 中的使用方式。我试图获取文件的路径并将其存储在我的数据库中，但预期用途是从控件获取（和存储）FileId。DNN 使用数据库记录管理文件，并为每个可以使用 FileManager（和 FolderManager）类访问的文件存储大量有用的元数据。

# javascript - HTML 脚本标签中这个查询组件的用途是什么？

> ID：16157883
> 
> 赞同：3
> 
> 时间：2013-04-22T22:34:41.520
> 
> 标签：javascript, html, http, caching

我正在阅读此源代码：

[https://github.com/leobalter/PimpMyCode/blob/master/index.html#L20](https://github.com/leobalter/PimpMyCode/blob/master/index.html#L20)

```
<script src="js/compiled.min.js?v=125" async></script> 
```

如果您摆脱整行代码镜像部分将消失。但是您可以将数字更改为您想要的任何数字，并且文本框将保留。

那个**查询**是`?v=125`什么样的？

我从未见过有人使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T22:36:20.283

它会破坏浏览器缓存（即更改浏览器用来识别缓存文件的文件的 url，从而在查询字符串值更改时强制浏览器重新下载文件。）

当您想要将更新部署到文件并让所有用户立即获得更改而不是等待他们的缓存清除或手动清除它时，这很有用。

价值本身并不重要。它不会改变输出，服务器也不会使用它。它只是强制浏览器下载新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:33:56.457

像资源这样的静态文件`.js`通常被配置为被浏览器缓存很长时间（1 年）。通过使用缓存中的资源，用户体验到更快的加载时间。

难题是：如果用户在缓存中有我的 JavaScript 文件，我如何保证更新后的文件立即被所有用户使用？

输入查询字符串参数。`?v=125`是一个标识符，可能是某种版本号。当资源被修改和释放时，这个数字（或字符串）将变为一个新的、未使用的值。附加到资源名称的参数会导致缓存像全新文件一样处理资源。因此，即使用户可能拥有`script.js`或`script.js?v=124`在缓存中，`script.js?v=125`也会直接从服务器加载所有最新最好的代码。

接受的答案包含一个奇怪的短语。*“它破坏了浏览器缓存”*听起来很危险！没关系，因为这不是*字面上*发生的事情。缓存没问题。其实旧`?v=124`文件还在！独特的资源命名方案只会导致无害的**缓存未命中**。

# jquery - 如何在页面加载时在 jQuery ui 选项卡中设置一个处于活动状态的选项卡

> ID：16157885
> 
> 赞同：1
> 
> 时间：2013-04-22T22:34:53.853
> 
> 标签：jquery, jquery-tabs

如何使最终的关于页面成为默认选项卡。我正在使用 jQuery UI 来显示这些选项卡。

```
<div id="tabs">
    <li class="ui-state-default ui-corner-top"><a href="#home">Home</a></li>
    <li class="ui-state-default ui-corner-top"><a href="#strains">Strains</a></li>
    <li class="ui-state-default ui-corner-top"><a href="#GB"> Browser</a></li>
    <li class="ui-state-default ui-corner-top"><a href="#pathway">Pathway</a></li>
    <li id="pathway1" class="ui-state-default ui-corner-top"><a href="#pathway1">pathway1</a></li>
    <li class="ui-state-default ui-corner-top"><a href="#About">About</a></li> 
```

据我发现，它似乎必须按照以下方式完成。

```
$('#tabs1').addClass('active') 
```

但它不起作用。我有以下 jQuery。

```
$( "#tabs" ).tabs();
$( "#pathway1").addClass('active'); 
```

我想让 path1 页面默认处于活动状态。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T22:46:33.597

设置类不会更改默认选项卡。

代替

```
$( "#tabs" ).tabs(); 
```

尝试这个：

```
$( "#tabs" ).tabs({ active: 4 }); 
```

这将使第五个（它是零索引）选项卡成为默认的活动选项卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-27T11:35:13.970

这个对我有用：

```
$('a[href="#strains"]').click(); 
```

# java - 基本摇摆 ui 在默认之外的不同“主要”方法中使用

> ID：16157890
> 
> 赞同：2
> 
> 时间：2013-04-22T22:35:05.090
> 
> 标签：java, swing, user-interface

到目前为止，我一直使用谷歌工具包附带的默认主函数来激活我的程序的 gui，现在我期待着将一个 gui 一个一个地添加到另一个主程序，我已经添加了类对象但是运行程序时，仅出现框架和标签，而我的字段和按钮需要单击/单击空间以使其可见，为什么？

```
public LoginGui() {
        initialize();
        uc = new UserCntrl();   
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 415);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);
        frame.setVisible(true); // i have added this line 
```

主要的：

```
public static void main(String[] args){
        // init login GUI
        LoginGui loginGuiWindow;
        try {
            loginGuiWindow = new LoginGui();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:10:34.330

*   一个猜测：你可以在设置为可见*后向你的 JFrame 添加组件吗？*如果是这样，请不要这样做。`setVisible(true)`添加所有组件后调用。
*   另外，不要使用空布局。`pack()`如果您想在升级或修改 GUI 时避免一些可怕的头痛，请使用布局管理器和调用。

# nginx - nginx proxy_pass 404错误，不明白为什么

> ID：16157893
> 
> 赞同：67
> 
> 时间：2013-04-22T22:35:18.760
> 
> 标签：nginx

我正在尝试将对 /api 的所有调用传递给我的 web 服务，但我不断收到以下配置的 404。按预期调用 / 返回 index.html。有谁知道为什么？

```
upstream backend{
    server localhost:8080;
}

 server {

    location /api {
        proxy_pass http://backend;
    }

    location / {
        root /html/dir;
    }
} 
```

# 更多信息在这里

```
adept@HogWarts:/etc/nginx/sites-available$ curl -i localhost/api/authentication/check/user/email
HTTP/1.1 404 Not Found
Server: nginx/1.2.1
Date: Mon, 22 Apr 2013 22:49:03 GMT
Content-Length: 0
Connection: keep-alive

adept@HogWarts:/etc/nginx/sites-available$ curl -i localhost:8080/authentication/check/user/email
HTTP/1.1 200 OK
Content-Type: application/json
Date: Mon, 22 Apr 2013 22:49:20 GMT
Transfer-Encoding: chunked

{"user":["false"],"emailAddress":["false"]} 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-04-22T23:43:31.120

这个

```
location /api {
    proxy_pass http://backend;
} 
```

需要是这个

```
location /api/ {
    proxy_pass http://backend/;
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2020-07-06T09:35:08.210

只是想提醒其他人，您的 proxy_pass url 后面的斜杠（backend*/*）非常重要！

如果配置是

```
location /api/ {
    proxy_pass http://backend;
} 
```

而你访问`http://abc.xyz/api/endpoint`，你会被引导到`http://backend/api/endpoint`；

如果配置是

```
location /api/ {
    proxy_pass http://backend/;
} 
```

而你访问`http://abc.xyz/api/endpoint`，你会被引导到 `http://backend/endpoint`。

这就是区别。

更多可参考：[Nginx反向代理返回404](https://stackoverflow.com/questions/41609509/nginx-reverse-proxy-return-404?rq=1)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-11-15T08:50:16.823

由于某种原因，Nginx 中的 proxy_pass 在传递到上游之前会削减标头“Host”，并且默认服务器会捕获请求，甚至 proxy_header_pass 也无济于事，因此我必须明确设置它：

```
location / {
    proxy_set_header Host $host;
    proxy_pass  http://backend;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-26T15:41:16.233

尝试逐步排除故障，以确定可能导致问题的点。以下是一些可能的错误：

### Nginx 配置更改但 Nginx 没有重新加载它

当您覆盖`nginx.conf`文件但没有触发 nginx 重新加载配置时，可能会发生这种情况。可能经常发生在 docker 用户身上。
要重新加载 nginx 配置，在 Nginx 主机中，执行命令：`nginx -s reload`
使用[docker](https://docs.nginx.com/nginx/admin-guide/basic-functionality/runtime-control/)`docker exec <container_name> nginx -s reload`
： 参考：在运行时控制 NGINX 进程

### Nginx 默认配置覆盖了你的

当`nginx.conf`还包含默认 Nginx 配置并且它意外覆盖您的配置时，可能会发生这种情况，请仔细检查您`nginx.conf`是否包含任何默认配置路径。
例如：`include /etc/nginx/conf.d/*.conf;`，它还将在以下地址加载 nginx 默认配置如果是这种情况，请从您的文件 中注释掉（或删除）此配置语句。
[![在此处输入图像描述](https://i.stack.imgur.com/HSRBn.png)](https://i.stack.imgur.com/HSRBn.png)
`include``nginx.conf`

### 验证 Nginx 配置

使用 command 验证实际应用的配置`nginx -T`，这将触发 Nginx 测试并打印出配置，检查配置输出是否符合您的预期结果：
[参考：Nginx 命令行](https://www.nginx.com/resources/wiki/start/topics/tutorials/commandline/)
您应该看到类似以下内容

```
root@22a2e5de75ba:/etc/nginx/conf.d# nginx -T
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
# configuration file /etc/nginx/nginx.conf:
user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log notice;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    server {
        server_name "localhost";
        listen 80;
        location /todo_server/ {
            proxy_pass http://jsonplaceholder.typicode.com;
        }
    }
    # 

    include       /etc/nginx/mime.types;
    # default_type  application/octet-stream;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log  /var/log/nginx/access.log  main;
    sendfile        on;
    #tcp_nopush     on;
    keepalive_timeout  65;
    #gzip  on;
    # include /etc/nginx/conf.d/*.conf;
} 
```

### Nginx`proxy_pass`配置问题

*与此线程中的先前答案类似，*如果您在 URI 末尾
指定尾部斜杠，这将导致意外的代理映射。 首先，看完整的：[Nginx proxy_pass 文档](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass) ，我将使用[jsonplaceholder](https://jsonplaceholder.typicode.com/)的 API进行演示（它实际上是为您提供响应来测试）`/`

`http://jsonplaceholder.typicode.com/todos/`

**带有斜杠**
末尾的斜杠表示该`proxy_pass`指令是用 URI 指定的。在这种情况下，当请求被传递到服务器时，与位置匹配的规范化请求 URI 的部分将被指令中指定的 URI 替换。

**示例**：使用以下配置（被理解为使用 URI 指定）将导致此映射

```
location /path1/ {
    proxy_pass http://jsonplaceholder.typicode.com/todos/;  
    # Requesting http://localhost:8080/path1/ will proxy to => http://jsonplaceholder.typicode.com/todos/
    # Requesting http://localhost:8080/path1/1/ will proxy to => http://jsonplaceholder.typicode.com/todos/1
}

location /path2/ {
    proxy_pass http://jsonplaceholder.typicode.com/;
    # Requesting http://localhost:8080/path2/todos/ will proxy to => http://jsonplaceholder.typicode.com/todos/
} 
```

**不带斜杠**
不带斜杠`/`，理解为无 URI 方案，将请求 URI 以与处理原始请求时客户端发送的相同形式传递给服务器，或者在处理请求时传递完整规范化的请求 URI更改了 URI。

```
location /todos/ {
    proxy_pass http://jsonplaceholder.typicode.com; 
    # Requesting : http://localhost:8080/todos/ will proxy to ==> http://jsonplaceholder.typicode.com/todos/
    # Requesting : http://localhost:8080/todos/1 will proxy to ==> http://jsonplaceholder.typicode.com/todos/1
} 
```

另请参阅@dayo[的完整答案以及](https://stackoverflow.com/a/32543398/5668956)[Richard Smith 的答案](https://stackoverflow.com/a/41610633/5668956)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-19T05:40:31.623

我忘了在 PORT 80 上听，修好了。

nginx 配置的“http”部分，位于：/etc/nginx/nginx.conf，如下：

```
http {
    server {
        listen 192.111.111.11:80;
        location /path1/ {
            proxy_pass http://127.0.0.1:3000/path1/
        }
    }
} 
```

现在，访问
[http://192.111.111.11/path1/](http://192.111.111.11/path1/)
将得到访问
[http://127.0.0.1:3000/path1/的结果](http://127.0.0.1:3000/path1/)

注意：
将 192.111.111.11 替换为上面的 IP 地址。
运行“ifconfig”命令，“inet addr”部分会给出你的IP地址

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-05-01T16:51:51.057

请检查您是否`default.conf`从`site-enabled`文件夹中删除了文件。如果您在基于 debian 的 ubuntu 系统中，请运行该命令

```
sudo rm /etc/nginx/sites-enabled/default 
```

它对我有用。

# javascript - 使用标准 GET 请求问题的 Facebook 集成

> ID：16157902
> 
> 赞同：0
> 
> 时间：2013-04-22T22:36:07.713
> 
> 标签：javascript, facebook, cordova

每个人，

我们有一个 Phonegap 应用程序，用于 Facebook 集成，打开一个浏览器窗口，传递登录 URL（以及所有权限请求等）并等待位置成为`login_success.html#access_token=[Token]`

但是，在某些设备上，我们得到正确的令牌，而在某些设备上，我们得到`/login_success.html#\_=\_ response`.

注意：这因设备而异，而且根本不稳定。

发生这种情况有什么原因吗？我们在 iOS 5 和 iOS 6（5.1.1 和 6.1.2、6.1.3）上都有多台设备，其中一些运行良好，而另一些则存在此问题。我们已经尝试过移除应用程序和其他事情（但没有尝试重置设备），我们在某些设备上遇到了稳定的问题，而在其他设备上没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:04:47.020

对于使用 facebook，我这样做：

```
function facebookLogin() {
ref = window.open('https://www.facebook.com/dialog/oauth?client_id=YOURID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token', '_blank');
ref.addEventListener('loadstart', function(event){ manageLoadstart(event)});} 
```

和

```
function manageLoadstart(event) {
if (event.url.indexOf('https://www.facebook.com/connect/login_success.html#') !== -1) {
    var charIndex = event.url.indexOf('&');
    var firstExtraction = event.url.substring(charIndex);
    var newUrl = event.url.replace(firstExtraction, '');
    var startUrl = newUrl.substr(0, 65);
    var accessToken = newUrl.replace(startUrl, '');
    saveFacebookToken(accessToken);
    ref.close();
}} 
```

我将它与 phonegap 2.6.0 一起使用。loadstop 事件不起作用。所以它会在 manageloadstart 中运行 3 次，并且每次都检查 url。

# ruby-on-rails - 使用 Chef，我如何只运行一次 Rails 迁移？

> ID：16157904
> 
> 赞同：5
> 
> 时间：2013-04-22T22:36:11.217
> 
> 标签：ruby-on-rails, migration, chef-infra

我正在运行一个带有三个 Web 服务器和一个数据库服务器（一个 AWS RDS 服务器）的 Rails 应用程序。我与 Chef Solo 一起部署。目前，我在 rails_app 配方中设置了“migrate true”，并且“rake db:migrate”在每个 Web 服务器上运行一次。

当迁移时间很短时，这通常不是问题。（第一个成功，第二个和第三个被跳过，因为 schema_migrations 表列出了最新的模式版本。）但是当迁移需要很长时间时，第二个和第三个 Web 服务器会在第一个完成之前尝试进行迁移. 他们失败了，厨师也没有成功退出。请注意，迁移已经成功（至少在我尝试过的时候），但是新版本的整体部署失败了。（如果我再次运行它，一切都会成功，因为迁移已经运行。）

我的问题是，确保迁移只运行一次的最佳/规范方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:42:05.323

可能您可以检查 db/migrate.rb 文件的内容是否已更改。如果是，则有条件地调用 migrate true。如果你使用 git，你可以检查

执行“git diff HEAD@{1} HEAD db/migrate”

如果存在任何更改，则使用 migrate true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T16:19:13.050

我将为您的三个网络服务器之一担任领导角色，并且仅在该角色上运行 db:migrate。

另一种选择是将您的代码也部署到 dbserver，并在此处运行 db:migrate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T16:05:12.390

我将使用节点属性，而不是所有节点都运行迁移，这样只有一个会聚运行迁移。

在“rails_app”配方中，您的`migrate`财产将是；

```
migrate node['rails']['migrate'] 
```

然后在您想要执行的一个节点的节点属性 json 文件中；

```
"rails" : { "migrate" : true } 
```

对于另外两个

```
"rails" : { "migrate" : false } 
```

显然，您可以根据需要更改属性的路径/名称。

# png - 在 libpng 中重用 pngPtr 和 infoPtr

> ID：16157907
> 
> 赞同：3
> 
> 时间：2013-04-22T22:36:21.030
> 
> 标签：png, libpng

我在我正在处理的项目中使用 libpng。现在，帧被一一读取到内存中，使用以下命令将内存分配给`read`and`info`结构：

```
pngPtr = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
infoPtr = png_create_info_struct(pngPtr); 
```

目前，加载图像后，上述指针将使用以下方法销毁：

```
png_destroy_read_struct(&pngPtr, (png_infopp)0, (png_infopp)0); 
```

但是，我希望能够在将 png 文件读取到内存的过程开始之前生成指针（仅一次），并在读取所有 PNG 文件后销毁它们一次。换句话说，我希望能够创建一次指针，然后重用它们。

我使用新方法遇到的问题是，如果我在读取第一个 PNG 文件后不销毁指针，则调用

```
png_read_info(pngPtr, infoPtr); 
```

当 libPng 尝试加载第二个 PNG 文件时失败。是否需要重置指针的任何特定属性才能使它们可重用于后续 PNG 文件？

为简洁起见，我避免放太多代码，但如果需要，我可以提供更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:38:23.710

我认为重用结构是不可能的（或支持的）。在公共文档中没有提及它，并且在[当前来源](http://libpng.git.sourceforge.net/git/gitweb.cgi?p=libpng/libpng;a=blob_plain;f=png.c;hb=HEAD)中窥视显示一些旧`png_info_init`版本在新版本中已被弃用/禁用。我猜你可能会做一些黑客行为（修改或不修改 libpng 源）来实现你的目标，但我不建议这样做——这似乎比好处更麻烦。如果你真的坚持，我会去[libpng 邮件列表](http://sourceforge.net/mailarchive/forum.php?forum_name=png-mng-implement)寻求更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T20:38:46.800

当 libpng 被修补以支持 APNG 文件时，它会重用结构。重置代码在 pngrutil.c 的末尾附近。请注意，这会直接访问 png_struct 的成员，自 libpng-1.4.0 以来，应用程序不可见该成员。

不过，我不确定这是否值得。png 结构本身并不是很大。内存主要由像素数据（由 row_pointers 指向）消耗，这些数据已经在您的控制之下，并且可以在您销毁它之前重新用于您的心脏内容。

在网上搜索“apng 补丁”以找到一个。[在http://sourceforge.net](http://sourceforge.net)有两个，一个在“apng”项目中，另一个在“libpng-apng”项目中。

# ios - prepareForSegue 将不起作用

> ID：16157911
> 
> 赞同：0
> 
> 时间：2013-04-22T22:36:41.393
> 
> 标签：ios, xcode

我有一个用于收件箱的导航控制器。当您单击表中的一条消息时，它会转到一个详细视图，该视图正在通过我的 prepareForSegue 方法获取数据。

我在顶部有一个栏按钮“撰写”一条新消息。

该按钮一直有效，直到我将 prepareForSegue 方法放入其中，当我现在按下按钮时它崩溃了。我调试了它，它说这是因为 prepareForSegue 方法。我可以单击表格视图中的消息，它将转到详细视图并正确显示所有信息，但该按钮现在不起作用。

这是 prepareForSegue 的代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];

    messageDetails * dvc = segue.destinationViewController;

    messages * currentMessage = [messagesArray objectAtIndex:indexPath.row];
    dvc.subject = currentMessage.subjectMessage;
    dvc.body = currentMessage.bodyMessage;
} 
```

我收到错误消息：

```
2013-04-22 18:24:22.107 GreekConnect[3904:c07] -[newmessageController setSubject:]: unrecognized selector sent to instance 0x7558f30
2013-04-22 18:24:22.108 GreekConnect[3904:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[newmessageController setSubject:]: unrecognized selector sent to instance 0x7558f30' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:48:39.580

您是否在 newmessageController 类中正确声明和合成了“主题”？

我不明白的是，如果您有两个不同的 segues 一个到特定的 ViewController（一个用于新消息，另一个用于查看现有消息的详细信息），或者您正在重用相同的 newmessageController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:53:12.060

一种常见的做法是检查标识符的转场，以确保您“准备”的转场是您想要的。您可能需要进行此检查以确保您的 prepareForSegue: 不会被多次调用或从您不期望/不打算的地方调用。

# android - 如何检测 PreferenceActivity 的属性何时被修改

> ID：16157912
> 
> 赞同：0
> 
> 时间：2013-04-22T22:36:50.800
> 
> 标签：android, preferenceactivity

我创建了类来管理我的偏好：

```
public class ConfigurationActivity extends PreferenceActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

我可以在配置中更改用户名，但是，当发生这种情况时，我想做更多的事情，我不知道在使用此方法管理我的首选项时如何检测到属性已被修改。

具有我要更改的属性的 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory android:title="@string/dialog_based_preferences">

        <EditTextPreference
                android:key="user_name"
                android:title="@string/title_preferences_userName"
                android:summary="@string/summary_preferences_userName"
                android:dialogTitle="@string/title_preferences_userName" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:40:56.833

您需要实现[OnPreferenceChangeListener](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)接口。

您的声明将更改为

```
public class ConfigurationActivity extends PreferenceActivity implements 
   Preference.OnPreferenceChangeListener 
```

你需要实施

```
public boolean onPreferenceChange(Preference preference, Object newValue){
    //your code here
    return true;
} 
```

当然你不需要在这个类中实现接口，但作为一个例子，我认为它会做。

为了完整起见：就像`Hoan Nguyen`说的那样，您需要调用该方法来注册您的类以进行 Preference 更改。

```
Preference textPref = this.findPreference(R.id.user_name);
textPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
   @Override
   public boolean onPreferenceChange(Preference preference,
        Object newValue) {
    //Do stuff
   }
}); 
```

例如在你的`onCreate()`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:48:12.697

每次更改首选项时都会调用`registerOnSharedPreferenceChangeListener`您注册更改。如果您只想注册选定的偏好，请`onSharedPreferenceChanged`按照答案操作。`DigCamara`

# python - 在 python 中滚动 idxmax()？

> ID：16157913
> 
> 赞同：2
> 
> 时间：2013-04-22T22:36:50.880
> 
> 标签：python, pandas, time-series, finance, algorithmic-trading

我有一个 python DataFrame，其中包含一些我正在尝试为其创建一些技术指标的财务数据。我试图弄清楚如何使用移动窗口函数来加快进程，而不是逐个元素地进行。对于每个索引，我想返回过去 30 天的最大索引。我已经实现了一个元素一个元素的解决方案，但是你可以想象它非常慢。

```
 for s_sym in ls_symbols:
        for i in range(refresh, len(ldt_timestamps)):
            #Aroon-Up = ((period - Days Since High)/period) x 100 Aroon-Down = ((period - Days Since Low)/peiod) x 100'''
            whrmax = df_close[s_sym].ix[ldt_timestamps[i-uplen:i]].idxmax()
            maxaway = (df_close[s_sym].ix[whrmax : ldt_timestamps[i-1]]).count()
            aroonup = ((uplen - maxaway) / uplen ) * 100

            whrmin = df_close[s_sym].ix[ldt_timestamps[i-dnlen:i]].idxmin()
            minaway = df_close[s_sym].ix[whrmin : ldt_timestamps[i-1]].count()
            aroondn = ((dnlen - minaway) / dnlen ) * 100 
```

如何创建自定义滚动窗口函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T00:14:33.377

请参阅以下位置的文档：

[http://pandas.pydata.org/pandas-docs/dev/computation.html#moving-rolling-statistics-moments](http://pandas.pydata.org/pandas-docs/dev/computation.html#moving-rolling-statistics-moments)

还有一些很好的例子：

[http://pandas.pydata.org/pandas-docs/dev/cookbook.html#grouping](http://pandas.pydata.org/pandas-docs/dev/cookbook.html#grouping)

```
In [18]: df = DataFrame(randn(1000,4),index=pd.date_range('20000101',periods=1000),
                 columns=list('ABCD'))

In [19]: pandas.stats.moments.rolling_apply(df,30,lambda x: Series(x).idxmax())
Out[19]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 1000 entries, 2000-01-01 00:00:00 to 2002-09-26 00:00:00
Freq: D
Data columns (total 4 columns):
A    971  non-null values
B    971  non-null values
C    971  non-null values
D    971  non-null values
dtypes: float64(4)

In [47]: pandas.stats.moments.rolling_apply(df,30,lambda x: Series(x).idxmax()).tail(30)
Out[47]: 
             A   B   C   D
2002-08-28  24   3  26  21
2002-08-29  23   2  25  20
2002-08-30  22   1  24  19
2002-08-31  21   0  23  18
2002-09-01  20   6  29  17
2002-09-02  19   5  28  16
2002-09-03  18   4  27  15
2002-09-04  17   3  26  14
2002-09-05  16   2  25  13
2002-09-06  15   1  24  12
2002-09-07  14   0  23  11
2002-09-08  13  13  22  10
2002-09-09  12  12  21   9
2002-09-10  11  11  20   8
2002-09-11  10  10  19   7
2002-09-12   9   9  18   6
2002-09-13   8   8  17   5
2002-09-14   7   7  16   4
2002-09-15   6   6  15   3
2002-09-16   5   5  14   2
2002-09-17   4   4  13   1
2002-09-18   3   3  12   0
2002-09-19   2   2  11  11
2002-09-20   1   1  10  10
2002-09-21   0   0   9   9
2002-09-22  27  25   8   8
2002-09-23  26  24   7   7
2002-09-24  25  23   6   6
2002-09-25  24  22   5   5
2002-09-26  23  29   4   4 
```

仅供参考，您可能几乎肯定会更好地使用`rolling_max(df,30)`获取特定范围内的最大值，这就是我收集您所追求的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T03:53:09.587

单调双端队列可以在 O(N) 内解决它，速度要快得多。

```
def get_rolling_idxmin(l_input:[], window_size:int) -> [(int,float)]:
    res = []
    deq:[(int, float)] = []
    n = len(l_input)
    for i in range(n):
        v = l_input[i]
        if len(deq) and (i - deq[0][0]) >= window_size:
            deq.pop(0)
        while len(deq) and v <= deq[-1][1]: 
            deq.pop(-1)
        deq.append((i,v))
        res.append((deq[0][0],deq[0][1]))
    return res

l_min = get_rolling_idxmin(df.bp1[::-1].to_list(), 50)
df_min = pd.DataFrame(l_min, columns=['index_min', 'value_min'])
df_min['index_min'] = df_min.shape[0]-1-df_min.index_min
df_min = df_min[::-1]
df_min.reset_index(drop=True, inplace=True)
# print(df_min)
df = pd.concat([df,df_min], axis=1) 
```

# php - 为什么我的 mod_rewrite 规则不起作用？

> ID：16157917
> 
> 赞同：0
> 
> 时间：2013-04-22T22:37:27.223
> 
> 标签：php, apache, mod-rewrite

规则是：

```
RewriteRule ^r/([^/.]+)/?$ generateIssuePage.php?r=$1 [L] 
```

当浏览器请求 myip.com/r/thing 时，它应该重定向到 myip.com/r/generateIssuesPage.php?r=thing。

如果我只输入 www.myip.com/r/generateIssuesPage.php?r=thing，它工作正常。但是如果我请求 www.myip.com/r/thing，我会得到 404。它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:51:56.423

测试 htaccess 规则的好工具是[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

使用该工具，它表明 htaccess 设置正确，以便`http://www.myip.com/r/thing`重定向到`http://www.myip.com/r/generateIssuesPage.php?r=thing`

您是否检查过 htaccess 是否完全适合您，但创建了一个简单的全局重定向？

# vb.net - VB中的登录系统问题

> ID：16157919
> 
> 赞同：-3
> 
> 时间：2013-04-22T22:37:39.273
> 
> 标签：vb.net, winforms

我的登录系统有问题，并在使用第一个用户（管理员）时寻求一些极客帮助，系统会做它需要做的事情。但是当我尝试使用其他用户登录时，它将无法正常工作。我得到了我的错误`username and password unknown`，当我从代码中删除以下行时，我可以与所有其他用户一起登录，

```
 ElseIf (currentUser <> username AndAlso currentPassword <> password) Then
      MessageBox.Show("Username and password unknown", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
Return False 
```

源代码，

```
Public Function Login(ByVal username As String, ByVal password As String)
    Dim usersDatasSet As New DataSet()
    usersDataAdapter.FillSchema(usersDatasSet, SchemaType.Source, "Users")
    usersDataAdapter.Fill(usersDatasSet, "Users")
    Dim table As DataTable = usersDatasSet.Tables("Users")

    For i As Integer = 0 To table.Rows.Count - 1
        Dim currentUser As String = table.Rows(i)("Username").ToString().Trim()
        Dim currentPassword As String = table.Rows(i)("Password").ToString().Trim()

        'Check input

        If (currentUser <> username And currentPassword = password) Then
            MessageBox.Show("Unknown user", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Return False

        ElseIf (currentUser = username And currentPassword <> password) Then
            MessageBox.Show("Wrong password", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Return False

        ElseIf (currentUser <> username AndAlso currentPassword <> password) Then
            MessageBox.Show("Username and  password unknown", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Return False

        ElseIf (currentUser = username AndAlso currentPassword = password) Then
            usersDatasSet.Dispose()
            Connection.Close()
            Return True
        End If

    Next
    usersDatasSet.Dispose()
    Connection.Close()
    Return False
End Function 
```

感谢您在此问题上的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:14:58.637

您正在遍历表中的行，根据用户提供的 UserName 和 Password 值检查每一行的值。

由于您的第一个用户是管理员，管理员将始终能够登录。

由于您的`ElseIf (currentUser <> username AndAlso currentPassword <> password) Then`阻止，任何其他用户都会失败（您尝试使用 John 登录，但您使用的是管理员的凭据）。

当您删除`ElseIf (currentUser <> username AndAlso currentPassword <> password) Then`任何用户都可以登录时 - 因为他们实际上是以管理员身份登录的。

尝试从表中选择用户并将用户名和密码与提供的值进行比较。

**你应该做什么**

为了验证用户是否可以登录，您可以执行以下操作（而不是您的 For 循环）：

```
Public Function Login(ByVal username As String, ByVal password As String) As Boolean

    ' Set a flag for whether or not login was successful
    Dim LoggedIn As Boolean = False
    Dim usersDatasSet As New DataSet()
    usersDataAdapter.FillSchema(usersDatasSet, SchemaType.Source, "Users")
    usersDataAdapter.Fill(usersDatasSet, "Users")
    Dim table As DataTable = usersDatasSet.Tables("Users")

    ' This will return an array of DataRows that have the specified
    ' username in them.
    ' You will need to have unique usernames for this to work
    Dim credentials() As DataRow = table.Select("Username = '" + username + "'")

    If (credentials.Length = 1) Then
        Dim currentUser As String = credentials(0)("Username").ToString()
        Dim currentPassword As String = credentials(0)("Password").ToString()

        If (currentUser <> username And currentPassword = password) Then
            MessageBox.Show("Unknown user", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        ElseIf (currentUser = username And currentPassword <> password) Then
            MessageBox.Show("Wrong password", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        ElseIf (currentUser <> username AndAlso currentPassword <> password) Then
            MessageBox.Show("Username and  password unknown", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
        ElseIf (currentUser = username AndAlso currentPassword = password) Then
            LoggedIn = True
        End If
    Else
        MessageBox.Show("Mulitple users found for " & username, "Error", MessageBox.Buttons.OK, MessageBox.Icon.Error)
    End If

    usersDatasSet.Dispose()
    Connection.Close()

    Return LoggedIn
End Function 
```

这将允许您告诉用户是否是未通过验证的用户名或密码，并处理您是否有多个用户具有相同的用户名。

**然而**

我不鼓励您使用这样的系统（告诉用户登录的哪个部分失败），因为如果黑客尝试暴力攻击，它可能会向他们提供信息。（是的，我知道，这里可能有点过于偏执了）。

最好像这样简化它：

```
Public Function Login(ByVal username As String, ByVal password As String) As Boolean

    ' Set a flag for whether or not login was successful
    Dim LoggedIn As Boolean = False
    Dim usersDatasSet As New DataSet()
    usersDataAdapter.FillSchema(usersDatasSet, SchemaType.Source, "Users")
    usersDataAdapter.Fill(usersDatasSet, "Users")
    Dim table As DataTable = usersDatasSet.Tables("Users")

    ' This will return an array of DataRows that have the specified
    ' username in them.
    ' You will need to have unique usernames for this to work
    Dim credentials() As DataRow = table.Select("Username = '" + username + "' AND Password = '" + password + "'")

    If (credentials.Length =1 ) Then
        LoggedIn = True
    Else
        MessageBox.Show("Invalid username/password combination", "Error", MessageButtons.OK, MessageBoxIcon.Error)
    End If

    usersDatasSet.Dispose()
    Connection.Close()

    Return LoggedIn
End Function 
```

现在，一种更好、更安全的方法将具有以下要素：

1.  密码经过哈希处理（使用盐）并存储在您的数据库中。1a。您必须对他们输入的用户的纯文本密码进行哈希处理（使用正确的盐），并将其与存储在用户名表中的哈希值进行比较，以便他们成功登录。
2.  限制尝试次数 - 如果超过尝试次数（例如 3 次），则帐户被锁定。这可以防止暴力攻击。
3.  对表使用参数化查询来防止 SQL 注入攻击。我意识到这很可能是一个 WinForms 应用程序（基于对 MessageBox 的调用），但参数化查询是一个很好的编码实践。

# java - 延迟初始化不起作用

> ID：16157925
> 
> 赞同：3
> 
> 时间：2013-04-22T22:38:06.630
> 
> 标签：java, spring, jpa

我有一个 Web 项目，我正在使用 Spring 来管理我的 EntityManager，但我遇到了`LazyInitialization`. 我正在使用`openEntityManagerInView`，但它无法正常工作。

我认为这与我的`pom.xml`. 请问，谁能告诉我我的项目有什么问题？

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" 
   xmlns="http://java.sun.com/xml/ns/javaee" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  <filter>
    <filter-name>
      openEntityManagerInViewFilter
    </filter-name>
    <filter-class>
      org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter
    </filter-class>
  </filter>

  <!-- Include this if you are using Hibernate -->
  <filter-mapping>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>  
    <filter-name>PrimeFaces FileUpload Filter</filter-name> 
    <servlet-name>Faces Servlet</servlet-name> 
  </filter-mapping>

  <filter>  
    <filter-name>PrimeFaces FileUpload Filter</filter-name>     
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class> 
  </filter> 

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param>

  <listener>
    <listener-class>
      org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>

  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>

  <welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
  </welcome-file-list>

  <context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>bootstrap</param-value>
  </context-param>
</web-app> 
```

**pom.xml**

```
 <project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven- 4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.labcon</groupId>
  <artifactId>projetoCongresso</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>projetoCongresso</name>
  <url>http://maven.apache.org</url>
  <properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-api</artifactId>
      <version>2.1.6</version>
    </dependency>
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.1.10</version>
    </dependency> 
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
    </dependency>
    <dependency>
      <groupId>javax.persistence</groupId>
      <artifactId>persistence-api</artifactId>
      <version>1.0</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-test</artifactId>
      <version>3.2.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-expression</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-aop</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context-support</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-tx</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-jdbc</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-orm</artifactId>
      <version>3.1.2.RELEASE</version>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
      <version>3.1.2.RELEASE</version> 
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate</artifactId>
      <version>3.2.6.ga</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-annotations</artifactId>
      <version>3.3.1.GA</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-entitymanager</artifactId>
      <version>3.3.2.GA</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.15</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency> 
      <groupId>commons-collections</groupId>
      <artifactId>commons-collections</artifactId>
      <version>3.1</version> 
    </dependency> 
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>ejb3-persistence</artifactId>
      <version>1.0.1.GA</version>
    </dependency>
    <dependency>
      <groupId>javax.sql</groupId>
      <artifactId>jdbc-stdext</artifactId>
      <version>2.0</version>
    </dependency>
    <dependency>
      <groupId>javax.transaction</groupId>
      <artifactId>jta</artifactId>
      <version>1.0.1B</version>
    </dependency>
    <dependency>
      <groupId>org.primefaces</groupId>  
      <artifactId>primefaces</artifactId>
      <version>3.4.1</version>
    </dependency>
    <dependency>
      <groupId>org.primefaces.themes</groupId>
      <artifactId>all-themes</artifactId>
      <version>1.0.9</version>
    </dependency>
    <dependency>
      <groupId>commons-fileupload</groupId>
      <artifactId>commons-fileupload</artifactId>
      <version>1.2.3-SNAPSHOT</version>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.5-SNAPSHOT</version>
    </dependency>
    <dependency>
      <groupId>rome</groupId>
      <artifactId>rome</artifactId>
      <version>1.0</version>
    </dependency>
    <dependency>
      <groupId>org.apache.poi</groupId>
      <artifactId>poi</artifactId>
      <version>3.7</version>
    </dependency>   
    <dependency>
      <groupId>com.lowagie</groupId>
      <artifactId>itext</artifactId>
      <version>2.0.7</version>
    </dependency>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <version>6.0</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-web-api</artifactId>
      <version>6.0</version>
      <type>jar</type>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
          <compilerArguments>
            <endorseddirs>${endorsed.dir}</endorseddirs>
          </compilerArguments>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
          <failOnMissingWebXml>false</failOnMissingWebXml>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.1</version>
        <executions>
          <execution>
            <phase>validate</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <outputDirectory>${endorsed.dir}</outputDirectory>
              <silent>true</silent>
              <artifactItems>
                <artifactItem>
                  <groupId>javax</groupId>
                  <artifactId>javaee-endorsed-api</artifactId>
                  <version>6.0</version>
                  <type>jar</type>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  <repositories>
    <repository>
      <url>http://download.java.net/maven/2/</url>
      <id>jsf20</id>
      <layout>default</layout>
      <name>Repository for library Library[jsf20]</name>
    </repository>
    <repository>
      <url>http://repo1.maven.org/maven2/</url>
      <id>jstl11</id>
      <layout>default</layout>
      <name>Repository for library Library[jstl11]</name>
    </repository>
    <repository>  
      <id>prime-repo</id>  
      <name>PrimeFaces Maven Repository</name>  
      <url>http://repository.primefaces.org</url>  
      <layout>default</layout>  
    </repository> 
    <repository>
      <releases>
        <enabled>false</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <id>apache.snapshots</id>
      <name>Apache Snapshot Repository</name>
      <url>https://repository.apache.org/content/repositories/snapshots</url>
    </repository>
  </repositories>
</project> 
```

**错误信息：**

```
SEVERE: failed to lazily initialize a collection of role:  com.catalogor3e.entity.Sistema.relacionamentoZonaEtiquetaSistema, no session or session was  closed
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of   role: com.catalogor3e.entity.Sistema.relacionamentoZonaEtiquetaSistema, no session or  session was closed
  Sistema 2
at  org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(Abs tractPersistentCollection.java:358)
at  org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:350)
at  org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection .java:97)
at org.hibernate.collection.PersistentBag.size(PersistentBag.java:225)
at javax.faces.model.ListDataModel.isRowAvailable(ListDataModel.java:110)
at javax.faces.model.ListDataModel.setRowIndex(ListDataModel.java:185)
at javax.faces.model.ListDataModel.setWrappedData(ListDataModel.java:220)
at javax.faces.model.ListDataModel.<init>(ListDataModel.java:79)
at javax.faces.component.UIData.getDataModel(UIData.java:1804)
at             javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
at javax.faces.component.UIData.setRowIndex(UIData.java:473)
at   com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:52)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at  org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:59)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:59)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:57)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at   com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewConte xtImpl.java:518)
at  com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
at javax.faces.component.UIForm.visitTree(UIForm.java:354)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
at  com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java: 376)
at  com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:297)
at  javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java :183)
at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at   com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:409)
at  com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at  org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="windows-1252"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

  <!-- Seta anotaçoes para serem  <context:annotation-config />usadas pelo Spring -->
  <context:annotation-config />

  <!-- Define o pacote onde o Spring vai procurar por beans anotados --> 
  <context:component-scan base-package="com.labcon.projetocongresso.dao,  com.labcon.projetocongresso.service" />

  <!-- define que as transaçoes irao ser anotadas -->
  <tx:annotation-driven />

  <bean id="dataSource"  class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/bancodedados"/>
    <property name="username" value="root"/>
    <property name="password" value="852456"/>
  </bean>

  <bean id="entityManagerFactory"  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="projetoCongressoPU" />
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="databasePlatform"  value="org.hibernate.dialect.MySQLDialect" />
        <property name="showSql" value="true" /> 
      </bean>
    </property>
  </bean>

  <!-- Configuracao do gerente de transacoes do Spring -->
  <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
  </bean>
</beans> 
```

**DAO 的配置如下：**

```
@Repository("sistemasDAO")
public class SistemasDAO {

  @PersistenceContext
  private EntityManager entityManager;

  public SistemasDAO() {

  }

  public List<Sistema> getTodosOsSistemas() {

    Query query = entityManager.createQuery("select sistemas from Sistema sistemas");
    List<Sistema> sistemas = query.getResultList();

    return sistemas; 
  }

  //methods hidden
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T01:26:47.420

正如@gerrytan 建议的那样，这很可能是因为您没有在事务中访问集合。在尝试对集合进行任何访问时，数据库会话已经关闭。

您可以尝试将 添加`@Transactional`到您的`SistemasDao`类中以通过这种方式启用事务管理。

# python - 如何最好地将数据流式传输到 IP 地址？

> ID：16157927
> 
> 赞同：0
> 
> 时间：2013-04-22T22:38:08.430
> 
> 标签：python, linux, streaming, beagleboard, angstrom-linux

我正在研究一个 beaglebone（阅读：Angstrom Linux），并且有一堆我在 python 脚本中捕获的数据。

我想以图形格式将该数据流式传输到内部 IP 地址。我在使用 matplotlib 之前已经流式传输数据，但在同一台机器上。我还在 beaglebone 上设置了一个网络服务器，但我只能读取 index.html

以我有限的知识，最直接的方法是让 index.html 呈现图形的图像，然后刷新页面并快速重写图像......但这很糟糕，我知道。

我最好将图像打包成视频并流式传输吗？html5 可以接收该视频吗？有没有更好的办法？

理想情况下，我的流媒体将非常接近实时。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:35:28.603

@Chris：您是否尝试过使用基于事件的网络框架，例如 Twisted ？[https://pypi.python.org/pypi/Twisted](https://pypi.python.org/pypi/Twisted)

# c# - 堆栈<>弹出错误

> ID：16157928
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:38:14.103
> 
> 标签：c#, xna

我无法为游戏修复这个错误

```
 if (type.BoundingCircle.Intersects(Dragon.BoundingRectangle))       
            {  
                rubys.Pop(i--);        
                OnTypeCollected(type.Dragon);  
            } 
```

方法 'Pop' 没有重载需要 1 个参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:41:34.247

从堆栈中取出红宝石，看看它是什么红宝石......

```
var rubyOnTopOfStack = rubys.Pop(); 
```

尽管您可能想要：-

```
if(stack.Count > 0) rubys.Pop(); 
```

如果有任何机会 ruby​​s 将是空的，否则它将抛出异常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T22:40:01.290

该错误告诉您不需要向 提供任何参数`Pop`，并且确实[文档指定](http://msdn.microsoft.com/en-us/library/9say334k.aspx)此方法不接受任何参数。

尝试这个：

```
if (type.BoundingCircle.Intersects(Dragon.BoundingRectangle))       
{  
    rubys.Pop();        
    OnTypeCollected(type.Dragon);  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T22:40:43.873

正确的语法是：

```
 rubys.Pop(); 
```

# jquery - 窗口调整大小时的 Jquery Isotope 随机洗牌

> ID：16157930
> 
> 赞同：1
> 
> 时间：2013-04-22T22:38:18.197
> 
> 标签：jquery, jquery-isotope

我在我的网站上使用 jQuery Isotope 来加载图像墙。我的工作正常，但我想添加一些额外的东西，但我在他们的网站上找不到任何东西......

当浏览器窗口调整大小时，我希望它在重新排序图像时随机播放。

这可以做到吗？

这就是我到目前为止所拥有的：

```
(function($) {
  $(document).ready(function() {

  var $container = $('#isotope-container');

  $container.isotope({
    itemSelector: '.isotope-element',
    sortBy : 'random' // THIS IS NOT WORKING TO SORT
  });

  var $optionSets = $('#isotope-options .option-set'),
      $optionLinks = $optionSets.find('a');

      $optionLinks.click(function(){

        var $this = $(this);
        // don't proceed if already selected
        if ( $this.hasClass('selected') ) {
          return false;
        }
        var $optionSet = $this.parents('.option-set');
        $optionSet.find('.selected').removeClass('selected');
        $this.addClass('selected');

        var options = {},
            key = $optionSet.attr('data-option-key'),
            value = $this.attr('data-option-value');
        // parse 'false' as false boolean
        value = value === 'false' ? false : value;
        options[ key ] = value;
        if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
          // changes in layout modes need extra logic
          changeLayoutMode( $this, options )
        } else {
          // otherwise, apply new options
          $container.isotope( options );
        }

        return false;
      });

      $('.isotope-element img').each(function(){
        var $this = $(this);
        setTimeout(function(){ 
            $this.fadeIn(Math.floor(Math.random()*1500)); 
        }, Math.floor(Math.random()*1500));
    }
);
 });

})(jQuery); 
```

对此的任何帮助将不胜感激。

谢谢 C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T00:21:35.410

抱歉，我对此进行了更多研究，这次实际测试了它:) 试试这个：

```
$(window).resize(function() {  
    $container.isotope( 'shuffle', function() {});  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T05:49:23.327

例如，如果您想通过单击按钮进行随机播放，您可以使用这个更简单的代码

```
$('.shuffle-button').on( 'click', function() {
  $grid.isotope('shuffle');
}); 
```

# android - 如何在gridview中添加复选框？所以多选是可能的

> ID：16157932
> 
> 赞同：1
> 
> 时间：2013-04-22T22:38:23.103
> 
> 标签：android

下面是我的源代码，它适用于单选我想添加复选框以选择多张图片请帮助我该怎么办？如何更改我的 simpleadapter？或者如何在 simpleadapter 中添加复选框？请帮助我，我很困惑

```
 public class FileGridActivity extends Activity {

  GridView gridView;
  TextView textView;
  File currentParent;
  File[] currentFiles;
  String[] currentFilePath;
  ImageButton AddPictures;
  SimpleAdapter simpleAdapter;
  final Context context = this;
  DataBase db;
  List<AppPhotosData> picList;
  ProgressDialog myProgressDialog = null;
  File CameraRoll;

  File root;

Handler handle = new Handler(){ 
    public void handleMessage(android.os.Message msg) {

        if (msg.what == 1)
        {
            hideProgress();

            //list.setAdapter(new AppPhotosAdapter(getApplicationContext(),activity,0,picList));
        }
        else if (msg.what == 2)
        {
            hideProgress();
        }
        super.handleMessage(msg);   
    };
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File photos = new File(getFilesDir(),"photos");
    photos.mkdirs();

    File root1 = new File("/data/data/com.newsoftwares.folderlock/files/");

    currentParent = root1;
    currentFiles = root1.listFiles();

    currentFilePath = new String[currentFiles.length];
    int count = 0;

    for(File f:currentFiles)
    {   
        currentFilePath[count] = f.getAbsolutePath();
        count++;
    }

    gridView =(GridView)findViewById(R.id.grid);
    gridView.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View view, int position,long id) {

        if(currentFiles[position].isDirectory())
        {
            root = new File("/data/data/com.newsoftwares.folderlock/files/"+FileName(currentFilePath[position])+"/");

            Log.e("Root first",root+ " ");

            currentFiles = root.listFiles();

            inflateListView(currentFiles);
        }
        else if(currentFiles[position].isFile())
        {
                     inflateListView(currentFiles);
        }
    }

    });

                     private void inflateListView(File[] files){

List<Map<String,Object>> listItems = new ArrayList<Map<String,Object>>();

for(int i=0;i<files.length;i++)
{       
        Map<String, Object> listItem = new HashMap<String, Object>();

        if(files[i].isDirectory())
        {
            listItem.put("icon", R.drawable.folder);
        }
        else
        {
            listItem.put("icon",  files[i]);
        }

        listItem.put("fileName", files[i].getName());
        listItems.add(listItem);
    }

    simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new String[] 
   {"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
    gridView.setAdapter(simpleAdapter);

           <!-----------main.xml------------>

              <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

          <!----line.xml------------->

               <?xml version="1.0" encoding="utf-8"?>
       <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"

    android:padding="5dip" >

  <ImageView android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="10dp"

    />

    </RelativeLayout>

    <GridView 
        android:id="@+id/grid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:horizontalSpacing="0pt"
        android:verticalSpacing="1pt"
        android:numColumns="3"
        android:gravity="center"
        ></GridView>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:32:50.513

请使用以下链接供您参考

[http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

它有你所需要的！

# c++ - C++：解析文本文件并将其读入数组

> ID：16157933
> 
> 赞同：0
> 
> 时间：2013-04-22T22:38:25.177
> 
> 标签：c++, file, parsing

我希望我能在这里找到一些帮助。我有一个下周到期的作业，其中涉及从 txt 文件中读取一堆数据到一个数组中，然后打印出结果。数据格式如下：

"麦克白","威廉莎士比亚","41.04","161","23","978-88-5985-004-5"

“圣诞颂歌”、“查尔斯狄更斯”、“98.74”、“167”、“547”、“978-26-2885-780-7”。.

.

.

每行有六条我需要存储以备后用的信息。我应该编写代码来计算我们拥有的文本行数，以便创建正确大小的动态数组。我已经覆盖了。我有 39 行条目。然后我应该创建一个函数来读取 txt 文件并将所有数据保存到我创建的数组中的相应对象中。

不知道用什么方法，这几天一直在找教程和解释。我在文件和解析方面的经验非常有限，如果我有点缺乏经验，请见谅。到目前为止，这是我的代码：

```
#include <fstream>
#include <iomanip>
#include <iostream>
#include <string>

using namespace std;

class Author
{
    public:

private:
    string fname, lname;

};

class Book
{
    friend ofstream& operator<<(ofstream&, Book);

        public:
        Book();

    private:
        string bookName;
        Author author;
        double price;
        int qtyOnHand;
        int qtySold;
        double revenue;
        string ISBN;

};

Book :: Book()
{

}

int getLineNumber(ifstream &);
void parseData(ifstream &, Book []);

//void sortBookList(Book[], int, int);

int main()
{
    int numberOfBooks;

    //open the file from which to read the data
    ifstream myFile;
    myFile.open("Book List.txt");
    //function to find out how many objects to create
    numberOfBooks = getLineNumber(myFile);

    //create an array with that many objects
    Book *bptr;
    bptr = new Book[numberOfBooks];
    //function to read information from file into array of objects
    parseData(myFile, bptr);

    //loop to call sorting function and output function based on 4 different criteria

    //close the file explicitly
    return 0;
}

int getLineNumber(ifstream &myFile)
{
    int counter = 0;
    string myString;

    while(!myFile.eof())
    {
        getline(myFile, myString);
        counter++;
    }

    myFile.close();

    counter --;
    return counter;
}

void parseData(ifstream &myFile, Book bookPtr[])
{

} 
```

所以，总结一下我的问题，我不明白如何将文本文件中的数据解析到我的数组中。非常感谢任何可以提供帮助的人！干杯。

编辑：我试过玩弄代码，我认为我朝着正确的方向迈出了一步，但我还是有点迷茫。这是我为 parseData 函数提供的内容。

```
void parseData(ifstream &myFile, Book bookPtr[])
{

    string dummyLine;

    string word, line;
    myFile.open("Book List.txt");
    getline(myFile, dummyLine);
    string data[6];

    while(!myFile.eof())
    {
        getline(myFile, line, '\n');

        for (size_t i = 0; i < line.size(); ++i)
        {
            char c = line[i];

            if(c == ',' || c == '\n')
            {
                if(!word.empty())
                {
                    data[i] = word;
                    word.clear();
                }
            }
            else
            {
                word += c;
            }

        }
        if(!word.empty())
        {
            //cout << word << endl;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:00:22.957

也许您只需要知道如何处理字符串中的每个字符？

这是一些代码，它遍历字符串的每个字符来构建单词，然后单独打印它们。您会注意到它具有与( , ,等)`string`相同的接口。`vector``str[i]``str.push_back(char)``str.size()`

```
// You'll need to include <iostream> and <string>

std::string example = "This is an example string";
std::string word;

// Notice how you can loop through a string just like a vector<char>
for(size_t i = 0; i < example.size(); ++i) {
    char c = example[i];

    // When we see whitespace, print the current word and clear it
    if(c == ' ' || c == '\t' || c == '\n') {
        // Don't print anything if we don't have a word
        if(!word.empty()) {
            std::cout << word << std::endl;
            word.clear();
        }
    } else {
        // Append the current character to the end of the string
        word += c; // or word.push_back(c)
    }
}
// In case the line doesn't end with whitespace
if(!word.empty()) {
    std::cout << word << std::endl;
} 
```

（[`std::basic_string`别名`std::string`）参考](http://en.cppreference.com/w/cpp/string/basic_string)可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:56:42.057

（我强烈建议为此使用向量（或列表），因为它可以避免重复读取文件，因为您根本不需要知道行数。）

要解析具有固定数量字段的行，原则上很容易：

```
int counter = 0;
string myString;

while(!myFile.eof())
{
    getline(myFile, myString);
    counter++;
}
counter --;

//Clear the error state flag
myFile.clear()

//Return to the beginning of the file:
myFile.seekg(ios_base::beg);

const int fieldCount = 5;
string field[fieldCount ];

string buffer= "";
char c = '\0';
for( int i = 0; i < counter; ++i ) {
    for( int j = 0; j < fieldCount; ++j ) {
        myFile.ignore(); //Ignore the first '"'
        //Read each character up to the second '"'
        while( myFile.good() && (c = myfile.get()) != '"' ) {
            buffer += c;
        }
        field[j] = buffer;
        buffer = "";
        if( j != fieldCount - 1 ) {
            myFile.ignore(); //Ignore the first ','
        }
    }

    //Use the fields here.

} 
```

我没有测试这段代码，我知道缺少错误测试，但它显示了一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T23:00:15.900

您可以使用矢量数据结构来保存 book 类。矢量记录；

# python - Pandas read_csv 用字符串“nan”填充空值，而不是解析日期

> ID：16157939
> 
> 赞同：6
> 
> 时间：2013-04-22T22:39:06.903
> 
> 标签：python, date, csv, pandas, missing-data

我分配`np.nan`给 DataFrame 列中的缺失值。然后使用 to_csv 将 DataFrame 写入 csv 文件。如果我使用文本编辑器打开文件，则生成的 csv 文件在缺失值的逗号之间没有任何内容。但是当我使用 read_csv 将该 csv 文件读回 DataFrame 时，缺失的值变成了字符串`'nan'`而不是 NaN。结果，`isnull()`不起作用。例如：

```
In [13]: df
Out[13]: 
   index  value date
0    975  25.35  nan
1    976  26.28  nan
2    977  26.24  nan
3    978  25.76  nan
4    979  26.08  nan

In [14]: df.date.isnull()
Out[14]: 
0    False
1    False
2    False
3    False
4    False 
```

我做错什么了吗？我应该分配一些其他值而不是`np.nan`缺失值，以便`isnull()`能够拾取吗？

编辑：对不起，忘了提到我还设置了 parse_dates = [2] 来解析该列。该列包含缺少某些行的日期。我希望缺少的行是`NaN`.

EIDT：我刚刚发现问题确实是由于 parse_dates 造成的。如果日期列包含缺失值，read_csv 将不会解析该列。相反，它将日期作为字符串读取并将字符串“nan”分配给空值。

```
In [21]: data = pd.read_csv('test.csv', parse_dates = [1])

In [22]: data
Out[22]: 
   value      date id
0      2  2013-3-1  a
1      3  2013-3-1  b
2      4  2013-3-1  c
3      5       nan  d
4      6  2013-3-1  d

In [23]: data.date[3]
Out[23]: 'nan' 
```

pd.to_datetime 也不起作用：

```
In [12]: data
Out[12]: 
   value      date id
0      2  2013-3-1  a
1      3  2013-3-1  b
2      4  2013-3-1  c
3      5       nan  d
4      6  2013-3-1  d

In [13]: data.dtypes
Out[13]: 
value     int64
date     object
id       object

In [14]: pd.to_datetime(data['date'])
Out[14]: 
0    2013-3-1
1    2013-3-1
2    2013-3-1
3         nan
4    2013-3-1
Name: date 
```

有没有办法让 read_csv parse_dates 处理包含缺失值的列？即，将 NaN 分配给缺失值并仍然解析有效日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T00:05:19.430

这目前是解析器中的一个 buglet，请参阅：[https](https://github.com/pydata/pandas/issues/3062) ://github.com/pydata/pandas/issues/3062 简单的解决方法是在您读入该列后强制转换该列（并将使用 NaT 填充 nans，即非时间标记，相当于日期时间的 nan）。这应该适用于 0.10.1

```
In [22]: df
Out[22]: 
   value      date id
0      2  2013-3-1  a
1      3  2013-3-1  b
2      4  2013-3-1  c
3      5       NaN  d
4      6  2013-3-1  d

In [23]: df.dtypes
Out[23]: 
value     int64
date     object
id       object
dtype: object

In [24]: pd.to_datetime(df['date'])
Out[24]: 
0   2013-03-01 00:00:00
1   2013-03-01 00:00:00
2   2013-03-01 00:00:00
3                   NaT
4   2013-03-01 00:00:00
Name: date, dtype: datetime64[ns] 
```

如果字符串 'nan' 确实出现在您的数据中，您可以这样做：

```
In [31]: s = Series(['2013-1-1','2013-1-1','nan','2013-1-1'])

In [32]: s
Out[32]: 
0    2013-1-1
1    2013-1-1
2         nan
3    2013-1-1
dtype: object

In [39]: s[s=='nan'] = np.nan

In [40]: s
Out[40]: 
0    2013-1-1
1    2013-1-1
2         NaN
3    2013-1-1
dtype: object

In [41]: pandas.to_datetime(s)
Out[41]: 
0   2013-01-01 00:00:00
1   2013-01-01 00:00:00
2                   NaT
3   2013-01-01 00:00:00
dtype: datetime64[ns] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T22:47:54.493

您可以在函数调用中传递`na_values=["nan"]`参数。`read_csv`这将读取字符串 nan 值并将它们转换为正确的`np.nan`格式。

请参阅[此处](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T19:35:07.617

我遇到了同样的问题。使用导入 csv 文件

```
dataframe1 = pd.read_csv(input_file, parse_date=['date1', 'date2']) 
```

其中 date1 包含有效日期，而 date2 是一个空列。显然 dataframe1['date2'] 充满了一整列'nan'。

情况是，在从数据框中指定日期列并使用 read_csv 导入数据后，空的日期列将填充“nan”字符串而不是 NaN。

后者可以被 numpy 和 pandas 识别为 NULL 而第一个不能。

一个简单的解决方案是：

```
from numpy import nan
dataframe.replace('nan', nan, inplace=True) 
```

然后你应该好好去！

# odbc - 未找到数据源名称且未指定默认驱动程序（VS & Access）

> ID：16157944
> 
> 赞同：0
> 
> 时间：2013-04-22T22:39:34.370
> 
> 标签：odbc, connection-string

我正在使用如下连接字符串：

```
<add name="ConnectionString" connectionString="Driver={Microsoft Access Driver (*.mdb, *.accdb)};dbq=D:\Year1213\projects\arshad0413\App_Data\Database21.accdb;defaultdir=D:\Year1213\projects\arshad0413\App_Data;driverid=25;fil=MS Access;maxbuffersize=2048;pagetimeout=5;uid=admin"
  providerName="System.Data.Odbc" /> 
```

我收到了这个错误。

异常详细信息：System.Data.Odbc.OdbcException：错误 [IM002] [Microsoft][ODBC 驱动程序管理器] 未找到数据源名称且未指定默认驱动程序

它在本地主机上工作正常，但是当上传到服务器时它不起作用。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T10:17:38.087

您可能正在使用`64bit JVM`.use`32bit JVM`代替。我在使用时遇到了同样的问题`64bit JVM`，但`32bit jvm`解决了我的问题。

# elasticsearch - 无法使过滤查询与 geo_distance 一起使用。弹性搜索

> ID：16157951
> 
> 赞同：0
> 
> 时间：2013-04-22T22:40:31.457
> 
> 标签：elasticsearch

这是我的问题。我有一些数据存储在带有字段的索引中`"location"`。这是映射

```
{
    "data":{
        "properties":{
        ...
        "location":{
            "type": "geo_point",
            "lat_lon": true,
            "store": "yes"
        },
        ...
        }
    }
} 
```

这是索引中存在的数据的示例

```
{
  "metadata": {
    "total": 2887,
    "maxScore": 4.8634477
  },
  "data": [
    {
      "_index": "data",
      "_type": "data",
      "_id": "8-HtWNILQrqrobwchhgNIQ",
      "_score": 4.8634477,
      "_source": {
        "generique": "Chemin",
        "_datasetId": "5175b2b4a652945a0500000d",
        "liaison": "",
        "specifique": "Sainte-Foy",
        "direction": "",
        "nomTopo": "Chemin Sainte-Foy",
        "ville": "Québec",
        "arrond": "Sainte-Foy-Sillery-Cap-Rouge",
        "location": {
          "lon": -71.322135,
          "lat": 46.768526
        }
      }
    },
    {
      "_index": "data",
      "_type": "data",
      "_id": "sSZ3u-uDQIuPDc2qnPir0g",
      "_score": 4.8634477,
      "_source": {
        "generique": "Chemin",
        "_datasetId": "5175b2b4a652945a0500000d",
        "liaison": "",
        "specifique": "Sainte-Foy",
        "direction": "",
        "nomTopo": "Chemin Sainte-Foy",
        "ville": "Québec",
        "arrond": "Sainte-Foy-Sillery-Cap-Rouge",
        "location": {
          "lon": -71.286977,
          "lat": 46.784508
        }
      }
    }
  ]
} 
```

如果我想使用 geo_distance 执行请求，它会返回不相关的数据。

这是请求

```
{
  "query": {
    "filtered": {
      "query_string": {
        "query": "_datasetId:5175b2b4a652945a0500000d"
      },
      "filter": {
        "geo_distance": {
          "location": {
            "lat": 46.815569,
            "lon": -71.208401
          },
          "distance": "1km"
        }
      }
    }
  }
} 
```

收到的数据不包含权利`"_datasetId"`，也不包含`"location"`查询中给定的数据。

我希望我足够清楚谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T15:25:32.910

我实际上从邮件列表中得到了答案，我想分享它。

[https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/cxZMZX-bWFA](https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/cxZMZX-bWFA)

# lex - flex词法分析器不重复一组字符

> ID：16157953
> 
> 赞同：0
> 
> 时间：2013-04-22T22:40:33.040
> 
> 标签：lex, flex-lexer

我有表情

```
[A-E]|[A-E]{3}|[A-E]{4} 
```

它用于识别角度`(A,B,C,D,E)`或三角形等`(ABC,BCD)`或矩形`(ABCD,EDCB)`等的名称

但

我想更改表达式，以便用户不能输入具有相同字母的名称 2 次，诸如 AAC 或 ABAE 之类的名称不应该是三角形或矩形的有效名称。

我[在这里](https://stackoverflow.com/questions/10332894/regex-to-check-non-repetition-of-a-set-of-characters)看到了此类问题的正则表达式解决方案，但看不到我如何在 flex 上执行此操作，并且无法在 flex 手册的模式上找到解决此问题的方法。任何帮助/指南都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:16:32.093

在 flex 中执行此操作的最简单方法可能是`REJECT`：

```
[A-E]|[A-E]{3}|[A-E]{4}  { for (int i = 0; i < yyleng-1; i++) {
                               if (strchr(yytext+i+1, yytext[i])) {
                                   /* duplicate letter in string */
                                   REJECT; } }
                           return whatever...; }
[A-Z]+                   { return something_else...; } 
```

有了这个，如果你有一个类似的输入`ABA`，它将匹配模式，但由于重复`A`，它将拒绝该匹配并去匹配下一个最佳模式（`[A-Z]+`在这种情况下）并返回 something_else...

另请注意 flex 文档：

> 就扫描仪性能而言，“拒绝”是一项特别昂贵的功能；如果在扫描仪的*任何*操作中使用它，它将减慢扫描仪的*所有*匹配速度。此外，“REJECT”不能与“-Cf”或“-CF”选项一起使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:59:48.337

我已经做到了

```
names [A-E]{4}|[A-E]{3}|[A-E]
%%

{names} {int i; for (i = 0; i < yyleng-1; i++) {
                               if (strchr(yytext+i+1, *yytext)) {
                                   /* duplicate letter in string */
                                   REJECT; } }
                           return printf( " %s :VALID NAME \n", yytext ); }
[A-Z]+                   { return printf( " %s :INVALID NAME\n", yytext ); } 
```

但它仅适用于表达式开头的重复字母

前 ABA：无效 ABCD：有效 ABCA：无效

但

ABBA :valid (应该是无效的) ACBC :valid (应该是无效的)

我必须找到一种方法让我适应各种情况

# wpf - WPF MVVM 将数据网格列动态绑定到集合

> ID：16157954
> 
> 赞同：1
> 
> 时间：2013-04-22T22:40:37.840
> 
> 标签：wpf, mvvm, wpfdatagrid

我有一个需要使用 MVVM 设计 WPF 屏幕的请求。此屏幕有两个 DataGrid。

第一个数据网格将绑定到一个集合，数据网格将能够从中添加或删除项目。

现在，棘手的部分是我需要第二个 DataGrid 使其列从第一个 datagrid 绑定到的集合中的项目自动生成。

例子：

如果第一个 DataGrid 有三行：

```
| Value 1 |
| Value 2 |
| Value 3 | 
```

我需要我的第二个数据网格有这三列：

```
| Value 1 | Value 2 | Value 3 | 
```

但是，我正在尝试一种不涉及手动将这些列添加到第二个数据网格的方法来实现这一点，因为我相信这会扼杀“MVVM 方式”的做事方式，原因有两个：

1.  我希望我的视图的代码隐藏文件保持“空”（除了视图构造函数上自动生成的“InitializeCOmponent（）”之外，我不能向其中添加任何代码）

2.  我不能让我的 ViewModel 实际持有对 DataGrid 的引用，因为我相信这会在 View 和 ViewModel 之间建立牢固的联系。

由于这两个原因，有没有人知道一种只涉及绑定的方法（或不违反这两个规则的其他解决方案？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:08:12.420

1.  将 a 绑定`DataTable`到`first`DataGrid。
2.  然后`transpose`是DataTable（交换行和列）并将它绑定到`second`DataGrid。

在这里，您必须将`AutoGeneratedColumns`DataGrid 的属性设置为`true`.

请看这篇[文章](http://www.codeproject.com/Articles/44274/Transpose-a-DataTable-using-C)来转置一个DataTable。

[这](https://stackoverflow.com/a/15780178/873979)是绑定`DataTable`到 DataGrid 的简单解决方案。

如果您已经将 a 绑定`Collection`到第一个 DataGrid，则可以定义一个`new`DataTable 和`logically assigned`Collection 中的值，然后您也可以将 DataTable 绑定到 DataGrid。

# razor - 使用具有不显眼验证的 MVC4 Razor 站点的隐藏字段的 Javascript 验证错误

> ID：16157959
> 
> 赞同：0
> 
> 时间：2013-04-22T22:41:01.183
> 
> 标签：razor, asp.net-mvc-4, jquery-validate, unobtrusive-validation

在使用启用了不显眼验证的 ASP.NET MVC 时，我曾多次需要将 ID 作为隐藏字段嵌入到 Razor 表单中。我学会了始终包含验证消息，例如：

```
@Html.HiddenFor(x => x.ParentId)
@Html.ValidationMessageFor(x => x.ParentId) 
```

如果验证消息被忽略，这将在提交时触发 javascript 错误，因为默认情况下隐藏字段包含不显眼的验证属性，需要相应的验证错误消息。我意识到我可以通过手动编码字段来获得我正在寻找的 html 输出：

```
<input data-val="false" id="ParentId" name="ParentId" type="hidden" value="@Model.ParentId" /> 
```

但是，如果我采用这种方法，我将失去使用`InputExtensions.HiddenFor`辅助方法的好处。有什么方法可以简单地使用扩展方法而不产生 JavaScript 错误？

**编辑：**

这是一个 jquery 验证问题。我的 jquery 验证脚本卡在 1.8.1 版上（见下面的注释）。我手动更新到 jquery.validate 1.11.1，问题就消失了。

*注意*：

jQuery validate 没有更新的原因是 NuGet 没有安装原始的 jquery validate 1.8.1 脚本。在这种情况下，NuGet 会检测到库并提供更新，但执行更新时不会替换原始脚本。NuGet 将其视为非致命警告。故事的寓意：阅读所有 NuGet 输出！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:14:44.417

我想我理解了这个问题，但可能我错过了一些东西。我使用隐藏字段来保存相关记录的 ID，并且从未使用过验证器方法。

如果您需要使用 hidden 来保存 ID，是因为您不想/不需要向用户显示该 ID 并让他更改该值......所以，不应该需要验证器。

如果此字段是必需的，并且由于用户无法输入...尝试使用 Firebug 更改您的 html 或制作帖子）。

如果你的逻辑（JS/Razor）可以在你的隐藏中放置一些东西，但有时你需要在那里放置一个空值，因为 ID 通常从 1 开始，你可以使用从 0 到负值的数字来表示空值。然后，您可以发布值并在控制器中进行检查。如果您使用这种方法，您甚至可以使用您的验证器逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T00:02:51.823

你错了。

这段代码工作得很好：

```
@model MyViewModel;

@using(BeginForm()) {
    @Html.HiddenFor(m => m.HiddenId)
    @Html.TextBoxFor(m => m.TextField);
    <input type="submit" />
} 
```

模型：

```
public class MyViewModel {
    public int HiddenId {get;set;}
    public string TextField {get;set;}
} 
```

行动方法：

```
public ActionResult Index() {
    return View(new MyViewModel { HiddenId = 1, 
                TextField = "We Don't need no steekin Validation Messages" });
}

[HttpPost]
public ActionResult Index(MyViewModel model) {
    if (ModelState.IsValid) {
         return Content("It's Valid!");
    }

    return View(model);
} 
```

# opengl-es - 纹理不会加载 OpenGL ES 2.0 PowerVR SDK

> ID：16157965
> 
> 赞同：1
> 
> 时间：2013-04-22T22:41:25.163
> 
> 标签：opengl-es, opengl-es-2.0, powervr-sgx

我目前在使用 PVR SDK 加载纹理时遇到问题。我知道我的两个纹理都有一个线性采样过滤器。但是，如果纹理加载失败，它会触发我设置的消息。这就是我加载纹理的方式。

```
const unsigned int NoTex = 3;

     // PVR texture files
const char* const  TextureFile[NoTex]   =
{ "n_Map1.pvr",
  "DUDV_map.pvr",
  "Skybox.pvr"}; 
```

这是我加载纹理的方法

```
bool OGLES2Skybox2::LoadTextures(CPVRTString* const pErrorStr)
{
    for(int i = 0; i < 2; ++i)
    {
        if(PVRTTextureLoadFromPVR(TextureFile[i], &TextureID[i]) != PVR_SUCCESS){
            *pErrorStr = CPVRTString("ERROR: Could not open texture file ") + TextureFile[i];
            return false;
        }

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    }

    // Load cube maps
    if(PVRTTextureLoadFromPVR(TextureFile[2], &TextureID[2]))
    {
        *pErrorStr = CPVRTString("ERROR: Could not open texture file ") + TextureFile[2];
        return false;
    }

    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    return true;
} 
```

在我的 initView 方法（）中调用 LoadTextures 之后

```
 bool OGLES2Skybox2::InitView()
    {
        // Sets the clear colour
        glClearColor(0.6f, 0.8f, 1.0f, 1.0f);

        // Enables depth test using the z-buffer
        glEnable(GL_DEPTH_TEST);

        CPVRTString ErrorStr;

        /*
            Load textures
        */
        if(!LoadTextures(&ErrorStr))
        {
            PVRShellSet(prefExitMessage, ErrorStr.c_str());
            return false;
        }
    ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:54:02.513

对不起我的错。原因是我使用了 PVR FileWrap 工具，并且由于内容已经绑定到应用程序并自动生成了一个 .cpp 文件，我忘记将 .cpp 重新添加到项目中。

# node.js - Node.js 流错误：TypeError：对象 [对象对象] 没有方法“结束”

> ID：16157973
> 
> 赞同：0
> 
> 时间：2013-04-22T22:42:12.417
> 
> 标签：node.js

你好 Stackoverflow 大师！

我一直被困在这个问题上，我尝试做一些非常简单的事情，我只想在流中获取网站 HTML 并将其打印到控制台。

我得到了 HTML 但由于某种原因我也得到了一个错误：

stream.js:66
dest.end();
^
TypeError: Object [object Object] 没有方法'end'

请检查我的代码，只需点击运行，您将看到相同的错误： [http](http://runnable.com/UXW8Hg_t3PpsAABh) ://runnable.com/UXW8Hg_t3PpsAABh ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:19:24.793

您还需要实现最终功能。

```
CustomStream.prototype.end = function() {}; 
```

# c++ - 在父对象上调用成员函数？

> ID：16157976
> 
> 赞同：0
> 
> 时间：2013-04-22T22:42:26.483
> 
> 标签：c++, class, superclass

我有两个类：`World`和`Entity`。

在 World 内部，我有两个 Entity 指针，我是这样制作的：

```
Entity* ent1;
Entity* ent2; 
```

我想允许 Entity 对象调用 World 的公共成员函数。我认为我可以简单地将引用或世界的指针传递给实体。

但是当我包含`World.h`from时`Entity.h`，我开始收到错误。这似乎有点错误，因为它们相互包含，但我不知道如何实现此功能。

在其他编程语言中我见过*parent*关键字，在 C++ 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:51:38.860

`Entity`在*World.h*中前向声明类。

**世界.h：**

```
class Entity; // #include "Entity.h" is not needed, because
              // only a pointer to Entity is used at the moment.

class World {
  public:
    void foo() {}

    void letEntityDoFooToMe(); // Implementation must be defined later, because it
                               // will use the whole Entity class, not just a
                               // pointer to it.
  private:
    Entity* e;
}; 
```

**实体.h：**

```
#include "World.h" // Needed because Entity::doFooToWorld calls a method of World.

class Entity {
  public:
    Entity(World& world) : w(world) {}

    void doFooToWorld() {
      w.foo();
    }

  private:
    World& w;  
}; 
```

**世界.cpp：**

```
#include "World.h"  // Needed because we define a method of World.
#include "Entity.h" // Needed because the method calls a method of Entity.

void World::letEntityDoFooToMe() {
  e->doFooToWorld();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:48:30.407

您可以做的是使父类中的方法成为虚拟方法并在实体类中覆盖它。

```
class World
{
public:
    virtual void Func();
}

class Entity: public World
{
public:
    void Func();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:49:06.043

根据您的描述，我的猜测是您遇到了一些循环依赖问题。您是否尝试过使用#pragma 一次。这是一个参考[链接](https://stackoverflow.com/questions/3768966/c-recursive-header-file-inclusion-problem)。如果您不喜欢这样，您也可以尝试在每个标题中添加一些 ifndef。

```
// World.h
#ifndef WORLD_H
#define WORLD_H

// ... World declaration code goes here.

#endif

// Entity.h
#ifndef ENTITY_H
#define ENTITY_H

// ... Entity declaration code goes here.

#endif 
```

# html - 尽管宽度和高度为 100%，但父 div 大于子 div

> ID：16157984
> 
> 赞同：1
> 
> 时间：2013-04-22T22:42:58.747
> 
> 标签：html, css

我有两个 div，一个容器和一个具有两种不同颜色的孩子。当我将 body 或父 div 上的边距更改为百分比量时，我会在边缘上看到一条父级背景颜色，表明父级在某种程度上比子级稍大（尽管事实上子级是父级宽度和高度的 100%（或更多）。

HTML：

```
<div id="parent">
    <div id="child">test
    </div>
</div> 
```

CSS：

```
body, html {
width: 100%;
height: 100%;
margin: 0;
padding: 0;
}

#parent {
width: 98%;
height: 60%;
margin: 1% auto;
position: relative;
overflow-x: hidden;
background-color: red;
}

#child {
width: 200%;
height: 100%;
background-color: #337788;
position: absolute;
left: 0;
} 
```

这是jsfiddle：

[http://jsfiddle.net/Cd2Sd/](http://jsfiddle.net/Cd2Sd/)

我知道这与使用边距百分比值有关，因为这取决于我如何缩放浏览器。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:07:16.263

这应该解决它

```
body 
{
  width: 100%;
  height: 100%;
  margin: 0px;
  padding: 0px;
}

#parent 
{
  width: 98%;
  height: 60%;
  margin: 0px 1% 0px 1%;
  overflow: hidden;
  background-color: red;
}

#child
{
  width: 100%;
  height: 100%;
  background-color: #337788;
} 
```

我已经去掉了我认为令人困惑的额外 CSS。

此外，边距样式必须格式化如下

```
Margin: Top Left Bottom Right; 
```

html

```
<div id="parent">
  <div id="child">test</div>
</div> 
```

# 更新

试试这个，我已经把你的定位绝对和相对放回去，并将 CHILD 样式重置回 0px 的边距。我还实现了“大纲样式”css 样式，它在我的 IE9 和 Opera 12 浏览器中看起来都很好

```
body
{
  width: 100%;
  height: 100%;
  margin: 0px;
  padding: 0px;
}

#parent 
{
  width: 98%;
  height: 60%;
  margin: 1%;
  position: relative;
  overflow: hidden;
  background-color: red;
  outline-style: none;
}

#child 
{
  width: 100%;
  height: 100%;
  background-color: #337788;
  position: absolute;
  left: 0px;
  outline-style: none;
} 
```

我没有安装 Chrome，所以无法在该浏览器中测试它

# database - 在线获取专辑封面

> ID：16157986
> 
> 赞同：0
> 
> 时间：2013-04-22T22:43:36.187
> 
> 标签：database, ftp

是否有一些常用的专辑封面数据库？我能找到的最好的是： [http ://www.albumartexchange.com/](http://www.albumartexchange.com/)

为了查询特定封面然后下载它，我应该熟悉哪些特定主题，特别是如果我正在寻找跨平台功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:20:27.240

看到[这个问题](https://stackoverflow.com/questions/7543574/is-there-any-free-unlimited-album-artwork-search-api-service)

如那里的答案所述，Cover Fetcher 使用 AudioScrobbler/LastFM。几个月前我用过它，请求类似于

```
http://ws.audioscrobbler.com/2.0/?
      method=album.getinfo
     &api_key=XXXXXXXX
     &album=YYYYYY
     &artist=ZZZZZZ 
```

（响应是带有链接的 XML）

我只是查看了[源代码](http://sourceforge.net/projects/coverfetcher/files/)，它们仍然使用相同的 URL。[这](https://gist.github.com/felipeochoa/5439424)是我使用的代码的要点（Python3）我已经删除了 API 密钥，但是服从企鹅的源代码在那里。

# ruby-on-rails - Rails 通过 html 响应 restful 输入

> ID：16157988
> 
> 赞同：0
> 
> 时间：2013-04-22T22:43:43.487
> 
> 标签：ruby-on-rails, rest

我们有一个 Rails 应用程序，我们通过 Restful 界面添加工作订单。

这是控制器代码：

```
# POST /workorders
# POST /workorders.json
def create
  @workorder = Workorder.new(params[:workorder])

  respond_to do |format|
    if @workorder.save
      format.html { redirect_to @workorder, notice: 'Workorder was successfully created.' }
      format.json { render json: @workorder, status: :created, location: @workorder }
  else
      format.html { render action: "new" }
      format.json { render json: @workorder.errors, status: :unprocessable_entity }
    end
  end
end 
```

添加工单后，响应来自以下代码行：

```
format.html { redirect_to @workorder, notice: 'Workorder was successfully created.' } 
```

另一个应用程序得到的回报是：

```
<html><body>You are being <a href="http://ndeavor.ameipro.com/workorders/50">redirected</a>.</body></html> 
```

50 是新的 workorder.id，但我们无法解析它。

有没有办法将 workorder.id 放入返回的标题中？我们需要发送数据的应用程序来知道新的 workorder.id 是什么。

此外，有没有办法知道请求来自其他应用程序，而不是在 Rails ui 中创建的新工作订单。

谢谢你的帮助！！

更新 1

请为我澄清一些关于 REST 的事情。如果 restful 输入是 json，那么控制器会返回 json？如果输入是html，控制器可以响应json还是只响应html？

当我使用 RestClient 进行测试时，是否有办法将此 url 转换为 json 输入或添加一些要求 json 响应的内容？

```
http://localhost:5000/types?type[id]=318&type[typecode]=test4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:30:22.993

`response.headers['ETag'] = @workorder.id`可能会奏效。

但更好的方法是通过 json 发送并让您的客户端解析它，而不是尝试从 HTML 中抓取数据。

查看 Mule的[文档](http://www.mulesoft.org/documentation-3.2/display/MULE2USER/Using+the+Mule+Client#UsingtheMuleClient-AssociatingPropertieswiththeMessage)，看起来您应该能够像这样设置接受标头：

```
props.put("Accept", "application/json"); 
```

rails 应用程序将使用`format.json`块对其进行响应。

`render :json`或者，您可以通过将调用从块中取出来使其始终以 json 响应`respond_to`：

```
def create
  @workorder = Workorder.new(params[:workorder])
  if @workorder.save
    render json: @workorder, status: :created, location: @workorder
  else
    render json: @workorder.errors, status: :unprocessable_entity
  end
end 
```

# php - 获取 mysql_fetch_array 中的下一行

> ID：16157990
> 
> 赞同：1
> 
> 时间：2013-04-22T22:43:50.300
> 
> 标签：php, mysql, arrays, row

我怎样才能得到下一行`mysql_fetch_array`？我想获得第一行和第二行而没有`while`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:46:04.770

`mysql_fetch_array()`第二次打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:45:17.190

最好直接在您的 SQL 查询中执行此操作

您可以使用`LIMIT 0, 2`;

因为您仍然使用while，但查询中的确切行数。此外，如果您只需要前两个结果，则无需查询整个表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:48:22.093

当您有一个 while 循环时，您实际上所做的就是重复调用`mysql_fetch_array()`与行数一样多的次数。

如果您只想显示 2 行，您可以简单地调用`mysql_fetch_array()`两次，每次调用它都会从结果集中获取下一行。

如果你知道你只会使用两个结果，你也应该使用 a`LIMIT 0,2`这样你就不会在只使用 2 时加载成堆的行，这是一种资源浪费，并且会随着时间的推移减慢你的速度。

# c# - 使用 C# 在 Exchange (2010) 中获取用户的邮箱数据库

> ID：16157991
> 
> 赞同：0
> 
> 时间：2013-04-22T22:43:50.617
> 
> 标签：c#, exchangewebservices

我一直在寻找一种在 Exchange 中查找用户邮箱数据库的方法，但除了 powershell 脚本之外没有找到任何东西。我确实找到了一个我认为可以工作的自动发现服务，但我没有得到我认为可以的响应。

```
 try
        {
            AutodiscoverService autodiscoverService = new AutodiscoverService("mynetwork.ext",ExchangeVersion.Exchange2010);
            autodiscoverService.Credentials = new NetworkCredential("Administrator@mynetwork.ext", "mypassword");

            // Get the user settings.
            // Submit a request and get the settings. The response contains only the
            // settings that are requested, if they exist. 

            GetUserSettingsResponse autoResponse = autodiscoverService.GetUserSettings(
                "testuser@theusersdomain.com",
                UserSettingName.UserDN,
                UserSettingName.MailboxDN
                );

        } 
```

根据 MS 的文档，“MailboxDN”应该是邮箱专有名称。 [http://msdn.microsoft.com/en-us/library/exchange/dd633650(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633650(v=exchg.80).aspx) - “MailboxDN - 用户邮箱的邮箱数据库的可分辨名称。”

但是，我从响应中得到的是：“{[MailboxDN, /o=MyMail/ou=Exchange Administrative Group /(EYDIBOHF23SPDLT)/cn=Configuration/cn=Servers/cn=EXCHANGESERVER/cn=Microsoft Private MDB]}”

用户所在的实际消息数据库是“test1”。

有谁知道如何检索这些信息？

谢谢！

# apache - 如何使用 Apache htaccess 文件使服务器处理所有小写目录（但 PHP 获取变量保持原样）

> ID：16157994
> 
> 赞同：0
> 
> 时间：2013-04-22T22:43:56.727
> 
> 标签：apache, .htaccess, mod-rewrite

我已经阅读了[这个线程](https://stackoverflow.com/questions/3450032/apache-mod-speling-case-insensitive-urls-issue)，该方法实际上将获取我网站上的任何 URL 并将其转换为小写。我打算然后使用它，并根据需要修改它，以确保 URL 的最后一部分不会改变（所以我的 PHP Get 变量可以保留，但它们应该是，但任何目录都是在服务器端变成小写）。

不幸的是，它会产生 500 内部服务器错误。

所以有一两个例子：

`www.domain.com/FirstDirectory1/ThisDirectory2/page.php?var=sdmkfsDFLMSD`

变成

`www.domain.com/firstdirectory1/thisdirectory2/page.php?var=sdmkfsDFLMSD`

或者

`www.Domain.com/firstdirectory1/ThisDireCTory2/Page.php?var=sdmkfsDFLMSD`

变成：

`www.domain.com/firstdirectory1/thisdirectory2/Page.php?var=sdmkfsDFLMSD`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:50:09.373

首先，您需要`tolower`通过将此指令添加到您的`<virtualhost>`配置（而不是`.htaccess`文件）来在您的上下文中包含外部函数：

```
RewriteMap lc int:tolower 
```

然后在你的 `.htaccess`：

```
 RewriteEngine On
   RewriteCond %{REQUEST_URI} [A-Z].+/.+\.php
   RewriteRule (.+)(/.+\.php)$ ${lc:$1}$2 [NC,R=301,L] 
```

请注意，Apache 区分大小写，因此 example.com/Directory/ 和 example.com/directory/ 指向不同的位置，如果您有一个名为 Dir/ 的目录，使用上述指令将导致 404 错误。如果你想让它不区分大小写，通过在 htaccess 顶部添加这个指令来启用 CheckSpelling 模块：

```
CheckSpelling On 
```

# c - 遗传算法二进制编码负整数

> ID：16157995
> 
> 赞同：-1
> 
> 时间：2013-04-22T22:44:17.637
> 
> 标签：c, genetic-algorithm

我正在尝试实现遗传算法以最大化 n 个整数变量 x1..xn 的函数，其中每个变量都属于范围 [-n, n]。我正在考虑使用二进制编码来表示染色体，但我不确定如何编码负整数。我已经搜索了很长时间，但我还没有遇到二进制编码的通用公式。对于遗传算法，在 [-n,n] 范围内编码整数的最常见方法是什么？我希望交叉和突变具有更少的复杂性（更少的条件检查）。如果对于初始种群，而不是生成 -n 和 n 之间的数字，而是生成从 0 到 2n 的数字并将它们编码为二进制，然后在解码时，我每次减去 n（对于每个后续代），它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T23:25:37.213

user1765444 的回答很有意义......我刚刚阅读了 sashkello 的建议（使用偏移二进制文件将消除在 GA 内使用带符号整数的麻烦）。那样做交叉和变异等会很容易 - 使用 shashkello 和 user1765444 的答案的组合。问题是如果您的数据类型的宽度大于您的范围，那么交叉可能会产生无效的子代。

假设 int32 具有您需要的宽度。然后是 int32 数组 [n]。您知道有 32n 位，因此您可能会在随机 m 处取一个交叉点，其中 m >=0 且 m < 32n。您知道位 m 出现在数组 [m/n] 中，位位置 m%n 从 msb 开始（想象数组只是一个长二进制字符串）。

然后说你有 2 个父母 int32 parent1[n] 和 int32 parent2[n]。类似于下面的伪代码？在这个交叉中，为了交叉，字符串只是一个二进制字符串（即符号位被视为另一个位）......

免责声明：对不起，下面的代码是粗略的，未编译的，所以可能包含错误......只是一个想法！

```
int child1[n];
uint32 m = rand_like_func(); // random cross over point, a bit position
                             // in the binary string of length n*32;
uint32 arraySlotForCrossOvr = (uint32)(m / n);
uint32 bitInSlotForCrossOvr = 31 - m % n;
uint32 maskForCrossOvrP2 = (1 << bitInSlotForCrossOvr) - 1;
uint32 maskForCrossOvrP1 = ~maskForCrossOvrP2;

// crossover to create child 1
memcpy(child1, parent1, arraySlotForCrossOvr);
child1[arraySlotForCrossOvr] = 
    (int32)( ((uint32)parent1[arraySlotForCrossOvr] & maskForCrossOverP1) |
             ((uint32)parent2[arraySlotForCrossOvr] & maskForCrossOvrP2) )
memcpy(
    child1, 
    parent2 + arraySlotForCrossOvr + 1, 
    total_num_slots - arraySlotForCrossOvr); 
```

然后您可能必须检测超出范围的孩子，或者让超出范围的孩子在下一轮中得分为零。也许您可以通过一些智能来增加交叉，例如将无效值限制为最接近的有效值等？

希望有帮助吗？

此外，我发现“如何解决它：Z. Michalewicz 和 D Fogel 的现代启发式”在尝试理解问题的编码等时非常有用：)

# html - 限制字符显示在输入 html 标记处

> ID：16157996
> 
> 赞同：2
> 
> 时间：2013-04-22T22:44:30.353
> 
> 标签：html

如何限制字符显示在输入标签上？我以这种格式从服务器获取时间：`hh:mm:ss`，我想用这种格式显示一些东西`hh:mm`，有办法得到它吗？
我尝试在chrome上使用maxlength，size，但我无法得到它..

```
<input id="timetable_start" name="start" type="text" value="07:31:00" maxlength=5 pattern="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" size=5> 
```

[http://jsfiddle.net/8FtAX/](http://jsfiddle.net/8FtAX/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:56:09.240

如果您无法控制传入的数据，您可以使用 javascript 来显示您想要的，使用 jquery + timeentry.js 您可以轻松完成并获得更多功能：

```
$(function () {
    $("#timetable_start").timeEntry({show24Hours: true});
}); 
```

在这里试试：http: [//jsfiddle.net/cespinoza/e3anw/10/](http://jsfiddle.net/cespinoza/e3anw/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:47:59.277

这是工作。

尝试更改初始值，从：

```
value="07:31:00" 
```

至：

```
value="07:31" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T04:51:11.520

您应该真正在服务器端处理数据（例如，通过将字符串截断为特定长度），以便 HTML 文档中的数据是您想要显示的。但如果这是不可能的，您可以使用该`size`属性以字符指定文本输入框的可见宽度（如您所尝试的那样）*并将*字体设置为等宽，例如

```
size="5" style="font-family: Consolas, Lucida Console, monospace" 
```

添加到`input`标签中。关键是“字符的（平均）宽度”除了等宽字体之外没有明确的含义，并且浏览器传统上`size`以完全不同的方式实现该属性，除了等宽字体。

但是，请注意，提交时发送的表单数据可用于客户端脚本，并通过浏览器检查是否支持该`pattern`属性，最初仍将是您放置在该`value`属性中的内容。所以用户需要猜测这个并删除“不可见”的部分。这听起来像是可用性的噩梦。

# vba - 如何在 SmartArt 图形中设置与节点关联的图片？

> ID：16157999
> 
> 赞同：1
> 
> 时间：2013-04-22T22:45:01.330
> 
> 标签：vba, vsto, ms-office, office-2010

SmartArt 图形可以具有与“节点”关联的图片（尽管这仅由某些 SmartArt 模板使用）。我知道如何通过 VBA/VSTO 自动化设置节点的文本，但我不知道如何设置图片。

可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T02:17:51.480

尝试这样的事情 - 如果您使用 smartart 在 VBA 中完成了任何工作，这应该是有道理的。

```
Dim oSALayout As SmartArtLayout
Dim QNode As SmartArtNode
Dim oShp As Shape

Set oSALayout = Application.SmartArtLayouts(91) 'reference to organization chart
Set oShp = Chart.Shapes.AddSmartArt(oSALayout, ileft, 2, iWidth, iHeight)    
Set QNode = oShp.SmartArt.AllNodes.Add

...

' note that there may be more than one shape associated with each node, I found that those org chart/smart art layouts with a specific "picture box" typically use Shapes.Item(2) 

With QNode.Shapes.Item(1).Fill
    .Visible = msoTrue
    .UserPicture "c:\somepath\picture.jpg"
    .TextureTile = msoFalse
End With 
```

希望这是有道理的！