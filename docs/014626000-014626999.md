# StackOverflow 问答 14626000-14626999

# javascript - 未在单选按钮上选中默认值

> ID：14626000
> 
> 赞同：0
> 
> 时间：2013-01-31T12:38:19.480
> 
> 标签：javascript, html, css

我有 10 个具有唯一名称的单选按钮，这些单选按钮分为两个 div。我的意思是每个 div 有 5 个单选按钮，我想一次只显示一个 div，并选中第一个单选按钮。我想要的是可见的 div 应该默认选中第一个单选按钮。但请注意，所有单选按钮在同一页面上都有唯一的名称。

下面是我的代码供参考。

```
<style>
#secondopt, #firstopt { display: none;}
</style>

<script>
function checkme(){
if (document.getElementById("opt1").checked == true){
document.getElementById("firstopt").style.display = "block"
document.getElementById("secondopt").style.display = "none";
}
if (document.getElementById("opt2").checked  == true){
document.getElementById("firstopt").style.display = "none"
document.getElementById("secondopt").style.display = "block";
}
}   
</script>

<form name="form1">
<label><input type="radio" name="opt" id="opt1" onclick="checkme()" /> First opt</label>
<label><input type="radio" name="opt" id="opt2" onclick="checkme()" /> Second Opt</label>
<div id="firstopt">
<label><input type="radio" name="items" value="data1" />Item 1</label>
<label><input type="radio" name="items" value="data2" />Item 2</label>
<label><input type="radio" name="items" value="data3" />Item 3</label>
<label><input type="radio" name="items" value="data4"/>Item 4</label>
<label><input type="radio" name="items" value="data5"/>Item 5</label>
</div>
<div id="secondopt">
<label><input type="radio" name="items" value="data6"/>Item 6</label>
<label><input type="radio" name="items" value="data7"/>Item 7</label>
<label><input type="radio" name="items" value="data8"/>Item 8</label>
<label><input type="radio" name="items" value="data9"/>Item 9</label>
<label><input type="radio" name="items" value="data10"/>Item 10</label>
</div>
</form> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:47:48.883

由于您将单选按钮划分为两个 div，因此您还应该使用单选按钮的组属性/名称。这里给出两个不同的组名称，然后使用单选按钮 id 使用 selected/checked 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:58:18.693

```
do this

<form name=frmone>
<INPUT TYPE="Radio" Name="payment" Value="CC">Credit Card
<INPUT TYPE="Radio" Name="payment" Value="DC">Debit Card
<INPUT TYPE="Radio" Name="payment" Value="PP">PayPal
</form>
<script>
var len = document.frmOne.payment.length;
for (i = 0; i < len; i++) {

document.frmOne.payment[i].checked ;
break;

}

</script> 
```

# linux - 根据第一列/行中字符的长度对文件进行排序

> ID：14626004
> 
> 赞同：4
> 
> 时间：2013-01-31T12:38:55.097
> 
> 标签：linux, sorting, sed, awk, grep

我需要根据第一列中的字符数对文件进行排序。

我不知道该怎么做。我使用的是 Linux，所以 sed/awk/sort 都可用。

```
.abs 是 bla bla 12
.abc 是 bla se 23 bla
.fe 是 bla bla bla
.jpg 是图片扩展名
.se 用于瑞典域名

```

我想要的是根据每行第一列的长度对这些行进行排序。有些行以 4 个字符开头，有些以 3 或 2 开头。我希望结果类似于：

```
.fe 是 bla bla bla
.se 用于瑞典域名
.abs 是 bla bla 12
.abc 是 bla se 23 bla
.jpg 是图片扩展名

```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T12:42:41.753

将每一行增加第一个单词的长度，然后排序：

```
awk '{ print length($1) " " $0; }' $FILE | sort -n 
```

如有必要，请在之后删除辅助字段`cut -d ' ' -f 2-`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T01:40:32.987

或者你也可以像这样之后使用 sed

`awk '{print length($1)" "$0}' temp.txt | sort -k 1,2| sed -re 's/^[0-9]+ //'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:43:41.647

你也可以用 coreutils 来做，虽然效率很低：

```
paste -d' ' <(cut -d' ' -f1 infile | xargs -l sh -c 'echo "$1" | wc -c' '{}') infile |
  sort -n | cut -d' ' -f2- 
```

或者使用 GNU 并行（如果可用）：

```
paste -d' ' <(cut -d' ' -f1 infile | parallel wc -c '<<< {}') infile | 
  sort -n | cut -d' ' -f2- 
```

或使用 bash：

```
<infile while read c1 rest; do echo ${#c1} "$c1" "$rest"; done |
  sort -n | cut -d' ' -f2- 
```

# javascript - 通过 onclick 复选框为隐藏值添加值

> ID：14626005
> 
> 赞同：0
> 
> 时间：2013-01-31T12:39:02.600
> 
> 标签：javascript, html, forms

我有一个带有一些输入复选框的表单。例如：

```
 <input type="checkbox" name="felhasznal_1" id="felhasznal_1" onclick="felhasznal(this)">
 <input type="checkbox" name="felhasznal_2" id="felhasznal_2" onclick="felhasznal(this)">
 <input type="checkbox" name="felhasznal_3" id="felhasznal_3" onclick="felhasznal(this)"> 
```

我有一个表单的隐藏值：

```
<input type="hidden" name="felhasznalas" value=""> 
```

我的表格是这样命名的：

```
 <form method="post" name="ujpartner_ceg" enctype="multipart/form-data" id="ujpartner_ceg"> 
```

我想为 felhasznalas 的值添​​加一个蒙面的 id。但是我有 2 个具有相同输入的表单，所以这就是我命名这些表单的原因，我想通过 getelementByid 使用表单名称来访问它们。

这是我的javascript（由php生成）：

```
function felhasznal() {
document.ujpartner_ceges.getElementById('felhasznalas').value = '|x|';

if (document.ujpartner_ceges.getElementById('felhasznal_1').checked) {
document.ujpartner_ceges.getElementById('felhasznalas').value = document.ujpartner_ceges.getElementById('felhasznalas').value + '1|x|';
}
if (document.ujpartner_ceges.getElementById('felhasznal_2').checked) {
document.ujpartner_ceges.getElementById('felhasznalas').value = document.ujpartner_ceges.getElementById('felhasznalas').value + '2|x|';
}
if (document.ujpartner_ceges.getElementById('felhasznal_3').checked) {
document.ujpartner_ceges.getElementById('felhasznalas').value = document.ujpartner_ceges.getElementById('felhasznalas').value + '3|x|';
}
} 
```

我做错了什么？

编辑：我收到此错误：TypeError：document.ujpartner_ceges 不是函数。

注意：我有一个名为 ujpartner_magan 的具有相同输入的表单！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:55:45.390

首先，我将使用没有“ujpartner_ceges”的 document.getElementById。

主要问题是您的输入没有 ID，如果您使用的 ID 与您的函数将按预期工作的名称完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:44:06.100

这可能是一个问题：`onclick="felhasznal(this)"`

但是你的函数没有参数......

`function felhasznal() {`

为函数添加参数：

`function felhasznal(myCheckbox) {`

或者

`this`从处理程序中删除`onclick`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T13:08:00.217

您的隐藏输入没有 ID，只是一个名称。

改为使用`<input type="hidden" id="felhasznalas" value="">`。

DOM（页面）的 ID 必须是唯一的，而不仅仅是表单，因此如果您有多个表单，则必须为控件添加前缀，例如：`<input type="hidden" id="form1_felhasznalas" value="">`.

然后使用 document.getElementById 代替 document.ujpartner_ceges.getElementById。

我还需要几个小时来学习[jquery](http://jquery.com/)，这是一个很棒的 javascript-cross-browser-framework/helper 做这样的事情:)！

这是一个小提琴： http: [//jsfiddle.net/3AguQ/](http://jsfiddle.net/3AguQ/) 我已将隐藏的输入更改为文本，因此您可以查看结果...

这是一些代码：

```
<script>
  function felhasznal(prefix)
  {
    document.getElementById(prefix + '_felhasznalas').value = '|x|';

    if (document.getElementById(prefix + '_felhasznal_1').checked)
    {
      document.getElementById(prefix + '_felhasznalas').value = document.getElementById(prefix + '_felhasznalas').value + '1|x|';
    }

    if (document.getElementById(prefix + '_felhasznal_2').checked)
    {
      document.getElementById(prefix + '_felhasznalas').value = document.getElementById(prefix + '_felhasznalas').value + '2|x|';
    }

    if (document.getElementById(prefix + '_felhasznal_3').checked)
    {
      document.getElementById(prefix + '_felhasznalas').value = document.getElementById(prefix + '_felhasznalas').value + '3|x|';
    }
  }      
</script>

<form method="post" enctype="multipart/form-data">
   <input type="hidden" id="form1_felhasznalas" value="">
   <input type="checkbox" name="felhasznal_1" id="form1_felhasznal_1" onclick="felhasznal('form1')">
   <input type="checkbox" name="felhasznal_2" id="form1_felhasznal_2" onclick="felhasznal('form1')">
   <input type="checkbox" name="felhasznal_3" id="form1_felhasznal_3" onclick="felhasznal('form1')">
</form>

<form method="post" enctype="multipart/form-data">
   <input type="hidden" id="form2_felhasznalas" value="">
   <input type="checkbox" name="felhasznal_1" id="form2_felhasznal_1" onclick="felhasznal('form2')">
   <input type="checkbox" name="felhasznal_2" id="form2_felhasznal_2" onclick="felhasznal('form2')">
   <input type="checkbox" name="felhasznal_3" id="form2_felhasznal_3" onclick="felhasznal('form2')">
</form> 
```

# macros - 如何在 clojure 中编写此宏？

> ID：14626007
> 
> 赞同：0
> 
> 时间：2013-01-31T12:39:08.873
> 
> 标签：macros, clojure, ring, gensym

我有这个功能：

```
(defn handler [request]
  (case (request :uri)
    "/" (home request)
    "/good" (good request)
    "/evil" (evil request)
    "/neutral" (neutral request)
    (status-response 404 (str "<h1>404 Not Found: " (:uri request) "</h1>" )))) 
```

但我一直在更改页面列表-which-resolve-to-functions-with-the-same-name，我希望能够写：

（def-handler 善恶中立）

反而：

但我被困住了。到目前为止，我最好的镜头如下：

```
(defmacro def-handler [& addresses]
  `(defn handler [request#]
     (case (request# :uri)
       ~@(mapcat (fn[x] [(str "/" x) (list x 'request)]) addresses)
       "/" (home request#)
       (status-response 404 (str "<h1>404 Not Found: " (:uri request#) "</h1>" ))))) 
```

但它不太有效，因为生成的调用中的请求不是 gensym，我不知道如何在其中获取 gensym。

这看起来很有希望，直到我注意到它产生了一个新的 gensym：

```
(defmacro def-handler [& addresses]
  `(defn handler [request#]
     (case (request# :uri)
       ~@(mapcat (fn[x] [(str "/" x) `( ~x request#)]) addresses)
       "/" (home request#)
       (status-response 404 (str "<h1>404 Not Found: " (:uri request#) "</h1>" ))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:18:38.000

我认为您完全可以避免使用 gensym 。我看不出不使用 gensym 如何“污染”环境。没有 gensym 的示例：

```
(defmacro def-handler [& addresses]
  `(defn handler [~'request]
     (case (~'request :uri)
       ~@(mapcat (fn[x] [(str "/" x) (list x 'request)]) addresses)
       "/" (home ~'request)
       (status-response 404 (str "<h1>404 Not Found: " (:uri ~'request) "</h1>" ))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:37:05.123

您的宏代码的问题在于，作为准引用一部分的动态符号不能在引用部分之外使用，即在取消引用/取消引用拼接代码中。但是另一种方法是可能的，即您在宏执行部分执行 gensym 并在 quasiquoting 部分使用该部分，如下所示：

```
(defmacro def-handler [& addresses]                                                                                                                  
  (let [request (gensym)]                                                                                                                            
  `(defn handler [~request]                                                                                                                          
     (case (~request :uri)                                                                                                                           
       ~@(mapcat (ƒ [x] [(str "/" x) (list x request)]) addresses)                                                                                   
       "/" (home ~request)                                                                                                                           
       (status-response 404 (str "<h1>404 Not Found: " (:uri ~request) "</h1>")))))) 
```

# r - 如何实现在两年而不是 1 年期间评估的折扣水平之间的变动？

> ID：14626008
> 
> 赞同：0
> 
> 时间：2013-01-31T12:39:12.400
> 
> 标签：r, statistics, poisson

下面的代码可以工作，以便每年评估折扣级别之间的变动。例如，在 1 年内没有提出索赔，上调折扣水平，在下一年提出索赔，降低折扣水平，一年中提出 2 次或更多索赔，降回 0% 的折扣水平，这是根据索赔率 0.1,...,0.8。如果我们现在将时间段更改为两年。例如，如果在第 1 年或第 2 年没有提出索赔，则提高折扣水平，现在如果在第 1 年或第 2 年提出 1 次索赔，则降低折扣水平，或者如果在这两者上提出 2 次或更多次索赔年期间，降至 0% 的折扣水平。如何编辑此代码以更改时间段？

```
a <- array(0:0,dim=c(21,5000)) # over time period t=21, 5000 policy holders
d<-array(1:5) 
e<-array(1:5) # five discount levels used
p<-array(1:8) # premium charged for 8 separate claim rates
z=0
e[1]=1 # discount 0%
e[2]=.8 # discount 20%
e[3]=.7 # discount 30%
e[4]=.6 # discount 40%
e[5]=.5 # discount 50%

for (l in seq(0.1,0.8,.1)){ # claim rates 0.1,0.2,0.3...0.8
  for (j in 1:20){
    for (i in 1:5000) {
      b<-min(2,rpois(1,l))
      if (b==2) {a[j+1,i]=0}     # b is the number of claims made, if 2 or more, drop down to 0%discount
      if (b==1) {a[j+1,i]=max(0,a[j,i]-1)} # if 1 claim made, drop back one discount level
      if (b==0) {a[j+1,i]=min(4,a[j,i]+1)} # if 0 claims made, go to next level of discount
    }
  }    
  for (k in 1:5){
    d[k]=1000*e[k]*(length(subset(a[21,],a[21,]==(k-1)))/5000)
  }
  z=z+1;p[z]=sum(d)
}
p 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:05:19.613

你真的只需要在内存中保存以前的值并将它添加到你的'if'语句中并翻转你的'i'和'j'循环。这可能看起来像这样：

```
for (i in 1:5000) {
  b_prev <- 0
  for (j in 1:20){    
    b<-min(2,rpois(1,l))
    if (b + b_prev >=2) {a[j+1,i]=0}     # b is the number of claims made, if 2 or more, drop down to 0%discount
    if (b + b_prev ==1) {a[j+1,i]=max(0,a[j,i]-1)} # if 1 claim made, drop back one discount level
    if (b + b_prev ==0) {a[j+1,i]=min(4,a[j,i]+1)} # if 0 claims made, go to next level of discount
    b_prev <- b
  }
} 
```

我们在这里所做的是计算单个保单持有人的所有 20 年，而不是计算所有 5,000 名保单持有人的一年。您的数学应该完全相同，因为您使用的是显式引用。但是，循环的这种重新排列允许我们使用滞后变量“b_prev”来保存一年索赔的最后一个值，并在决定如何降低折扣水平时将其添加到当前年份的索赔中。但是请注意，2 不再是您的最大值，因为您可以有两年的 2 次索赔，最多 4 次。我添加了一个`>=`用于将折扣降回零的计算。

# ruby - Ruby 1.9.3 Mountain Lion 上的加载错误

> ID：14626009
> 
> 赞同：1
> 
> 时间：2013-01-31T12:39:15.463
> 
> 标签：ruby, osx-mountain-lion

我是 Ruby 新手，刚刚安装了 Ruby 1.9.3。在我的带有 RVM 和 Homebrew 的 Moutnain Lion MacOSx 上。

安装 Ruby 后，我编写了我的第一个教程程序（带有文本、textmate 和 Tincta）并将其保存为 file.rb。现在的问题是我收到此错误消息：

```
users-MacBook-Pro:~ user$ ruby calc.rb
ruby: No such file or directory -- calc.rb (LoadError) 
```

brew doctor 命令给了我这个，但我什至不知道这是否与问题有关：

```
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

    bashbug
    gcov-4.2
    git
    git-cvsserver
    git-receive-pack
    git-shell
    git-upload-archive
    git-upload-pack
    gitk 
```

考虑修改您的 PATH，以便在您的 PATH`/usr/local/bin` 之前发生`/usr/bin`。警告：在您的路径中找不到 Homebrew 的 sbin。考虑修改您的 PATH 变量，使其包含：

```
/usr/local/sbin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:13:09.243

Ruby 抱怨它找不到`calc.rb`. 根据您的描述，您将文件保存为 file.rb，然后您尝试运行 calc.rb。试试`ruby file.rb`。

如果这不起作用，请验证 ruby​​ 是否正在使用

```
echo "puts 'hello'" | ruby 
```

它应该输出`hello`. 然后尝试从文件中运行它：

```
echo "puts 'hello'" > test.rb
ruby test.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:21:38.197

在您的 shell 中需要解决的一些问题：

1 - 验证`calc.rb`存在：

```
ls calc.rb  # will complain if calc.rb doesn't exist in the current directory 
```

2 - 检查`ruby`可执行文件的位置：

```
which ruby  # this might help narrow down issues with your $PATH 
```

关于自制问题，请查看以下是否有帮助：

*   [brew doctor 说“错误：/usr/bin 发生在 /usr/local/bin 之前”如何解决？](https://stackoverflow.com/q/11335908/2004045)
*   [OS X 10.6 Snow Leopard 中的 $PATH 设置在哪里？](https://superuser.com/a/69190)- 在山狮 AFAIK 中仍然相关。

# asp.net - IIS服务器增加用户

> ID：14626010
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:39:18.950
> 
> 标签：asp.net, iis

在 IIS 7 中，有人告诉我，由于默认设置，只有一定数量的客户端可以访问系统。我目前有 100 个客户端，只有 10 个可以使用我创建的系统，并且想知道如何增加可以访问我的 asp.net 应用程序的客户端总数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:46:06.667

吉姆，我可以知道你使用什么操作系统吗？如果您使用的是 Windows Server 操作系统，那么可以访问您的应用程序的用户数量应该没有问题。但是，如果您使用的是 XP、Vista、7 等 Windows 客户端操作系统，那么同时连接到您的 Web 服务器会受到限制。

# php - 根据某些值对 url 进行排序

> ID：14626015
> 
> 赞同：-2
> 
> 时间：2013-01-31T12:39:41.807
> 
> 标签：php, arrays, sorting, amazon-s3

我存储了一系列 url。每个网址都有某种格式。我需要对 urls 数组进行排序。喜欢

```
https://s3.amazonaws.com/photos/1358086239.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D
https://s3.amazonaws.com/photos/1358066630.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D 
```

这些 url 由 amazon S3 PHP SDK [get_object_url](http://docs.aws.amazon.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/get_object_url)方法重新调用。

我有 1000 个这些 url，但我想根据`1358086239.jpg`值对这些 url 进行排序，这个值每次都是整数值，我想根据这个值按 Asc 顺序对 url 进行排序。

我如何对这些 urls 数组进行排序。我尝试使用 php 内置函数[ksort()](http://php.net/manual/en/function.ksort.php)但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:54:44.760

嗯，像这样的东西......

```
usort($array, function($a, $b) {
  $aKey = substr($a, 33, 10);
  $bKey = substr($b, 33, 10);
  return $aKey < $bKey;
}
//$array is sorted now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:45:19.563

尝试遍历 URL 并将它们中的每一个分配到数组中，其中 key 是文件名中的数字。然后简单地按键排序，然后......你就完成了！

你需要的是：

*   [排序（）](http://php.net/manual/en/function.ksort.php)
*   [一种在两个字符串之间获取值的方法](https://stackoverflow.com/questions/1445506/get-content-between-two-strings-php)- 第一个字符串是“ `[https://s3.amazonaws.com/photos/](https://s3.amazonaws.com/photos/)`”，第二个是“ `.jpg?`”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:46:27.097

`sed 's/photos\/\([0-9]+.jpg\)/\1/' | sort`将按顺序给出文件名。将`grep -f`其作为第一个输入，将 URL 作为第二个输入将产生您想要的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T12:55:05.280

```
<?php
$url_array  = array('https://s3.amazonaws.com/photos/1358086239.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D', 'https://s3.amazonaws.com/photos/1358066630.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D');
$res_aray = array();
foreach($url_array as $val){
   preg_match('/photos\/(?P<numb>\d+)\.jpg/', $val, $matches);   
   $res_aray[$matches['numb']] = $val;
}
ksort($res_aray);
print_r($res_aray);

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T12:50:50.490

试试这个（固定）：

```
$urls = array(
'https://s3.amazonaws.com/photos/1358086239.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D',
'https://s3.amazonaws.com/photos/1358066630.jpg?response-content-type=image%2Fjpeg&AWSAccessKeyId=AKIAI2U3TRTNGXNCQHYQ&Expires=1359636889&Signature=l9GnekYT0wK9AznkPWWjBuCRgBY%3D',
);

$list = array();
foreach ($urls as $v) {
   $tmp = explode('https://s3.amazonaws.com/photos/', $v);
   $tmp = explode('.jpg?response-content', $tmp[1]);

   $list[$tmp[0]] = $v;
} 

ksort($list);

var_dump($list); 
```

# xcode - 将 .dylib 库从一个 xcode 项目复制到另一个

> ID：14626021
> 
> 赞同：0
> 
> 时间：2013-01-31T12:39:54.350
> 
> 标签：xcode, compilation, linker, shared-libraries, dylib

因此，我下载了一个 Xcode 项目，该项目带有一个 ~.dylib 文件和一个名为“include”的文件夹，其中包含该库的所有文件。

我想要做的是将这些文件复制到另一个 XCode 项目中。

但是我不知道如何让 XCode 识别 ~.dylib 文件。现在 XCode 允许我创建在这个库中定义的类的实例，但是每当我尝试调用任何关联的方法时，它都会说它找不到这些方法并给出错误（可能是因为 ~.dylib 文件没有正确链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:51:37.037

试试这个：选择你的项目文件，选择你的目标，构建设置，然后搜索“库搜索路径”，然后将你的 dylib 文件的路径添加到它。

# c++ - 定义函数的宏

> ID：14626022
> 
> 赞同：0
> 
> 时间：2013-01-31T12:39:54.063
> 
> 标签：c++, if-statement, macros

我使用下面的宏来生成函数代码

```
#define EXTRACT_INSTRUCTION32_FIELD(insName,fieldName,fieldOffset) \
    insName##Instruction::##fieldName val; \
    val = static_cast<##insName##Instruction::##fieldName##>((hexIstruction & ##insName##Mask_##fieldName) >> fieldOffset); \
    return val 
```

但我不想总是使用`return val`。另外我不想把这个宏拆分为2个宏。我该怎么做？想用一些`isRet`

```
 #define EXTRACT_INSTRUCTION32_FIELD(insName,fieldName,fieldOffset,isRet) \
        insName##Instruction::##fieldName val; \
        val = static_cast<##insName##Instruction::##fieldName##>((hexIstruction & ##insName##Mask_##fieldName) >> fieldOffset); \
        if (##isRet)\
        return val 
```

我不喜欢那个解决方案，它会降低性能 - 有什么建议很热吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:33:13.520

我倾向于使用更正确的 C++ 方法来使用内联函数或模板，类似于：

```
template <class T, U, V>
U extractInstruction32Field(T insName, U fieldName, V fieldOffset, W hexInstruction, bool isRet = false)
{
    U retval;
    retval = static_cast<U>((hexInstruction& insName::fieldName) >> fieldOffset);
    if isRet    {   return retval;  }
} 
```

请注意，`isRet`布尔值默认为 false，因此只有当您选择使用它时才会返回一个值。在不知道您的 mask ( `##Mask_`) 值是什么的情况下，上面纯粹是示例性的，我不应该认为它有效，但它应该为您指明一条新的方法。这种方法将允许类型安全和体面的错误检查，其中定义不能很好地发挥作用。

# regex - 如何在文本中出现的第一个 + 之后在 perl 中插入换行符

> ID：14626026
> 
> 赞同：0
> 
> 时间：2013-01-31T12:40:15.187
> 
> 标签：regex, perl, search, replace

例如

```
*aabc aacb  aavg +gf avb avb abf 
```

应该

```
*aabc aacb  aavg 
+gf avb avb abf 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T12:45:45.023

使用替换：

```
my $text =  '*aabc aacb  aavg +gf avb avb abf';
$text    =~ s/\+/\n+/;
print $text; 
```

`+`必须加反斜杠才能失去其特殊含义，`\n`是换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:48:56.050

```
my $str = "*aabc aacb  aavg +gf avb avb abf";
$str =~ s/\+/\n\+/;
print $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:05:33.447

```
> echo "abcd +gkj +bcd" | perl -pe 's/\+/\n\+/'
abcd 
+gkj +bcd 
```

# google-chrome - Chrome getUserMedia 视频无法在本地主机上运行

> ID：14626028
> 
> 赞同：4
> 
> 时间：2013-01-31T12:40:18.807
> 
> 标签：google-chrome, video, html5-video, google-chrome-devtools, getusermedia

我正在尝试让 Chrome 的 getUserMedia 在我的本地主机上工作。

我的 index.php 文件是：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/script.js"></script>
        <title></title>
    </head>
    <body>
<video id="MediaStreamVideo" autoplay=""></video>    
    </body>
</html> 
```

我的 script.js 文件是：

```
var stream;
var video = document.getElementById('MediaStreamVideo'); 
navigator.webkitGetUserMedia(
    {video: true, audio: true}, // Options
    function(localMediaStream) { // Success
        stream = localMediaStream;
        video.src = window.webkitURL.createObjectURL(stream);
    },
    function(err) { // Failure
        alert('getUserMedia failed: Code ' + err.code);
    }
); 
```

Chrome 要求我允许使用摄像头和麦克风（我接受），但没有任何反应。

它在[jsfidde上运行良好](http://jsfiddle.net/3fvkQ/1/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:03:39.213

问题应该与脚本的执行顺序有关。执行脚本时，视频元素“MediaStreamVideo”将不可用。

最后加载脚本总是一个好习惯。此外，将代码包装在一个函数中并在加载时执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T23:23:52.440

如果您在 Chrome 中并使用`file:///`URL，那么您需要使用`--allow-file-access-from-files`.

您可能想查看[此 SO Q&A](https://stackoverflow.com/questions/18586921/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T21:39:42.513

只需尝试：

```
var stream;
var video = document.getElementById('MediaStreamVideo'); 
navigator.webkitGetUserMedia(
    {video: true, audio: true}, // Options
    function(localMediaStream) { // Success
        stream = localMediaStream;
        //video.src = window.webkitURL.createObjectURL(stream);
        video.srcObject = stream;
   },
   function(err) { // Failure
      alert('getUserMedia failed: Code ' + err.code);
   }
); 
```

# php - 使用 CodeIgniter 框架解析 JSON 数据

> ID：14626032
> 
> 赞同：1
> 
> 时间：2013-01-31T12:40:31.087
> 
> 标签：php, codeigniter, json

我是 Codeigniter 的新手，我想在这个框架中解析 JSON 数据，请给我一些教程或示例。

我已经用 Android 完成了 JSON 解析......请帮助我使用那个 PHP 框架。

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:41:35.953

PHP 有它自己的 JSON 函数（即它与框架无关），您可以使用它来操作 JSON： http: [//php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)

要将 JSON 转换为 PHP 数组/对象，请使用[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

# c++ - 未定义模板“类”的隐式实例化

> ID：14626033
> 
> 赞同：13
> 
> 时间：2013-01-31T12:40:37.047
> 
> 标签：c++, function, templates, constants, overloading

在我的库中尝试为 const 和非 const 模板参数提供函数时，我遇到了一个奇怪的问题。以下源代码是一个最小的示例现象：

```
#include <iostream>

template<typename some_type>
struct some_meta_class;

template<>
struct some_meta_class<int>
{
    typedef void type;
};

template<typename some_type>
struct return_type
{
    typedef typename some_meta_class< some_type >::type test;

    typedef void type;
};

template<typename type>
typename return_type<type>::type foo( type & in )
{
    std::cout << "non-const" << std::endl;
}

template<typename type>
void foo( type const & in )
{
    std::cout << "const" << std::endl;
}

int main()
{
    int i;

    int const & ciref = i;
    foo(ciref);
} 
```

我试图为 foo 实现一个非 const 版本和一个 const 版本，但不幸的是，这段代码无法在 CLANG 3.0 和 gcc 4.6.3 上编译。

> main.cpp:18:22：错误：未定义模板“some_meta_class”的隐式实例化

因此，出于某种原因，编译器希望将非 const 版本的 foo 用于 const int 引用。这显然会导致上面的错误，因为 some_meta_class 没有实现。奇怪的是，如果您进行以下更改之一，代码编译得很好并且可以工作：

*   取消注释/删除非常量版本
*   取消注释/删除 return_type::test 的 typedef

这个例子当然是简约和纯粹的学术。在我的库中，我遇到了这个问题，因为 const 和非 const 版本返回不同的类型。我通过使用部分专业化的辅助类来解决这个问题。

但是为什么上面的例子会导致这种奇怪的行为呢？为什么编译器不想使用 const 版本有效且匹配更好的非 const 版本？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T14:37:17.767

原因是执行函数调用解析的方式，以及模板参数推导和替换。

1.  首先，执行**名称查找**。这为您提供了两个具有匹配名称的函数`foo()`。

2.  其次，执行**类型推导**：对于*每个*具有匹配名称的模板函数，编译器尝试推导函数模板参数，这将产生可行的匹配。你得到的错误发生在这个阶段。

3.  第三，**重载决议**进入游戏。这仅*在*执行了类型推导并且确定了用于解析调用的可行函数的签名之后，这是有道理的：编译器只有在找到所有候选者的确切签名后才能有意义地解析您的函数调用。

您收到与非常量重载相关的错误并不是因为编译器选择它作为解决调用的最可行候选者（这将是第 3 步），而是因为编译器在实例化其返回类型时产生错误在步骤 2 中确定其签名。

但是，为什么这会导致错误**并不完全**清楚，因为人们可能会期望**SFINAE**适用（替换失败不是错误）。为了澄清这一点，我们可以考虑一个更简单的例子：

```
template<typename T> struct X { };

template<typename T> typename X<T>::type f(T&) { }  // 1
template<typename T> void f(T const&) { }           // 2

int main()
{
    int const i = 0;
    f(i); // Selects overload 2
} 
```

在本例中，SFINAE 适用：在第 2 步中，编译器将为`T`上述两个重载中的每一个进行推断，并尝试确定它们的签名。在重载 1 的情况下，这会导致*替换失败*：`X<const int>`未定义任何`type`（no `typedef`in `X`）。但是，由于 SFINAE，编译器简单地**将其丢弃，**并发现重载 2 是可行的匹配项。因此，它选择了它。

现在让我们以反映*您的*示例的方式稍微更改示例：

```
template<typename T> struct X { };

template<typename Y>
struct R { typedef typename X<Y>::type type; };

// Notice the small change from X<T> into R<T>!
template<typename T> typename R<T>::type f(T&) { }  // 1
template<typename T> void f(T const&) { }           // 2

int main()
{
    int const i = 0;
    f(i); // ERROR! Cannot instantiate R<int const>
} 
```

改变的是，重载 1 不再返回`X<T>::type`，而是返回`R<T>::type`。这又与中的声明**相同**，因此人们可能期望它产生相同的结果。但是，在这种情况下，您会收到编译错误。为什么？`X<T>::type``typedef``R`

该标准有答案（第 14.8.3/8 段）：

> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[...] 只有在函数类型及其模板参数类型的**直接上下文**中的无效类型和表达式才会导致推导失败。

显然，第二个示例（以及您的示例）在**嵌套上下文**中生成错误，因此 SFINAE 不适用。我相信这回答了你的问题。

顺便说一句，有趣的是，**自 C++03 以来，这种情况发生了变化**，更一般地说（第 14.8.2/2 段）：

> [...]如果模板参数或函数模板的函数类型中的替换导致类型无效，则类型推导失败。[...]

如果您对事情发生变化的原因感到好奇，*本文*可能**[会给](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html)**您一个想法。

# java - 选择在 Ubuntu 中使用的 JVM

> ID：14626040
> 
> 赞同：-2
> 
> 时间：2013-01-31T12:40:53.063
> 
> 标签：java, linux, ubuntu, jvm

我在不同的目录 (/usr/java) 中有 Java 1.6 和 Java 1.7，还有一个指向其中一个的软链接（我当时希望使用的那个）。

IE：

```
total 16
drwxr-xr-x  4 root  root  4096 Jan 31 12:16 ./
drwxr-xr-x 11 root  root  4096 Jan 30 12:52 ../
lrwxrwxrwx  1 root  root     6 Jan 31 12:16 default -> java6//
lrwxrwxrwx  1 root  root    12 Jan 31 12:15 java6 -> jdk1.6.0_37//
lrwxrwxrwx  1 root  root    12 Jan 31 12:15 java7 -> jdk1.7.0_11//
drwxr-xr-x  8 david david 4096 Jan 30 18:16 jdk1.6.0_37/
drwxr-xr-x  8 david david 4096 Jan 31 12:14 jdk1.7.0_11/ 
```

这意味着我可以更改默认链接指向的位置，并更改我的 JAVA_HOME 指向的位置。

然而，我的系统充斥着 OpenJDK 和冰茶。我已经删除了它们（我认为），所以我根本没有系统 java。

我的问题是，如何让我的系统查找默认链接指向的 Java？

谢谢大家

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:51:46.813

1.  sudo update-alternatives --config java
2.  选择java版本
3.  在项目设置中设置你想要工作的 wich jdk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:54:46.417

如果你不喜欢终端，这里有一个 GUI `galternatives`：. 这是非常容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:48:51.113

这些链接可以帮助您：

*   [https://askubuntu.com/questions/199065/replacing-the-openjdk-with-the-oracle-jdk](https://askubuntu.com/questions/199065/replacing-the-openjdk-with-the-oracle-jdk)
*   [http://news.softpedia.com/news/How-to-Install-Oracle-Java-in-Ubuntu-309861.shtml](http://news.softpedia.com/news/How-to-Install-Oracle-Java-in-Ubuntu-309861.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:03:56.840

只需按照此博客上的步骤操作：

[如何在 Ubuntu Linux 上安装 Oracle Java：18 个步骤](http://www.wikihow.com/Install-Oracle-Java-on-Ubuntu-Linux)

它似乎已经做了我想要的。

不过感谢大家的建议。

# windows-phone - Windows Phone 7.8 磁贴大小

> ID：14626049
> 
> 赞同：4
> 
> 时间：2013-01-31T12:41:24.770
> 
> 标签：windows-phone, tile, live-tile

我有点困惑。我昨天收到了 7.8 更新，因为现在图块更大了，我需要更新我的应用程序吗？就像现在一样，瓷砖看起来有点模糊，不像以前那么锋利。

根据模拟器，新瓷砖是 210 x 210 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:34:05.003

您*不需要*更新图块，因为正如您所注意到的，操作系统将缩放图像以满足新的尺寸要求。实际上，这种缩放可以向上或向下，这取决于它是针对中小型瓷砖的。

不幸的是，还有另一个复杂因素：新的磁贴大小取决于设备屏幕的分辨率。WVGA 的中型磁贴为 210x210 像素（将覆盖所有 WP7.8 手机），但运行 720p 或 WXGA 的手机（请记住，所有针对 WP7.8 的应用程序也可以在 WP8 上运行）具有 336x336 像素的中型磁贴。您可以在此处获取所有分辨率的所有磁贴大小的完整列表：[Windows Phone 8 开始屏幕磁贴大小和边距](https://stackoverflow.com/questions/12837720/windows-phone-8-startscreen-tile-sizes-and-margins)。

您可以使用以下帮助方法（取自[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206974%28v=vs.105%29.aspx#BKMK_Resolutiondependentbackgroundsandassets)）发现设备的当前分辨率。

```
public enum Resolutions { WVGA, WXGA, HD720p };

public static class ResolutionHelper
{
   private static bool IsWvga
   {
      get
      {
         return App.Current.Host.Content.ScaleFactor == 100;
      }
   }

   private static bool IsWxga
   {
      get 
      { 
         return App.Current.Host.Content.ScaleFactor == 160; 
      }
   }

   private static bool Is720p
   {
      get 
      { 
         return App.Current.Host.Content.ScaleFactor == 150; 
      }
   }

   public static Resolutions CurrentResolution
   {
      get
      {
         if (IsWvga) return Resolutions.WVGA;
         else if (IsWxga) return Resolutions.WXGA;
         else if (Is720p) return Resolutions.HD720p;
         else throw new InvalidOperationException("Unknown resolution");
      }
   }
} 
```

# python - （python中的xpath）我想选择一个没有“body”作为其祖先的节点

> ID：14626051
> 
> 赞同：1
> 
> 时间：2013-01-31T12:41:27.027
> 
> 标签：python, xml, lxml, elementtree

我想选择一个没有作为其祖先的节点。

例如，

```
<root>
  <e>
    <head>
       <id>3</id>
       <word>abandon</word>
    </head>
    <body>
       <head>
          <word>accept</word>
       </head>
    </body>
  </e>
</root> 
```

我想选择第一个元素，而不是第二个。

我试过：

```
import xml.etree.ElementTree as ET

root = ET.fromstring(fin).getroot()
word = root.find('.//word[not(ancestor::body)]') 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:46:02.400

您可以将[XPath 1.0](http://www.w3.org/TR/xpath/)与[lxml](http://lxml.de/)一起使用：

```
import lxml.etree as ET

fin = '''\
<root>
  <e>
    <head>
       <id>3</id>
       <word>abandon</word>
    </head>
    <body>
       <head>
          <word>accept</word>
       </head>
    </body>
  </e>
</root>'''

root = ET.fromstring(fin)
word = root.xpath('.//word[not(ancestor::body)]')
print(ET.tostring(word[0]))
# <word>abandon</word> 
```

# c# - 通过实体框架执行 SProc 时未获取毫秒数据

> ID：14626054
> 
> 赞同：2
> 
> 时间：2013-01-31T12:41:29.480
> 
> 标签：c#, sql-server, winforms, entity-framework, c#-4.0

我在从我的 sql server 数据库中获取所有数据时遇到了一些问题。以下是我存储在数据库中的 DateTime 值之一：

```
2012-12-31 21:39:08.8940 
```

不幸的是，当我通过实体框架运行相同的 SProc 时，我得到以下信息：

```
2012-12-31 21:39:08 
```

有没有办法纠正这个问题，所以所有的数据都被返回了？

SProc代码如下：

```
CREATE PROCEDURE [dbo].[DataRetrieval]
    @StartDateTime      DateTime2(4)        ='2012-12-31 21:59:08.2050',
    @EndDateTime        DateTime2(4)        ='2012-12-31 21:59:08.2050',
    @Pair               nchar(6)            ='EurUsd'
AS

SET NOCOUNT ON;
BEGIN

SELECT Pair,DateTime,Ask,Bid,AskVolume,BidVolume
FROM 
    dbo.ForexData
WHERE
    PAIR = @Pair
    AND ( DateTime = @StartDateTime  
               OR DateTime >= @StartDateTime )
    AND ( DateTime = @EndDateTime
           OR DateTime < @EndDateTime )
ORDER BY
    DateTime
END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:04:41.810

确保在您的 *.edmx 中的 ComplexType 部分下，正确填写 Precision 属性

# vb.net - 如何记录 NHibernate 查询？

> ID：14626061
> 
> 赞同：0
> 
> 时间：2013-01-31T12:41:42.413
> 
> 标签：vb.net, nhibernate, asp.net-mvc-4, fluent-nhibernate, nlog

我在 VB.Net 中有一个 Asp.Net MVC 4 项目，它使用 Fluent Nhibernate、NHibernate 和 NLog。我想记录 NHibernate 查询。我想将查询保存在我的数据库中的表中，但它也可以显示在日志文件中。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:18:20.177

查看这个关于如何配置 NHibernate 以使用 NLog 的[答案。](https://stackoverflow.com/a/11001810/62024)

NHibernate 会将所有查询记录到`NHibernate.SQL`记录器中。

# mongodb - 地理空间数据和多个查询的数据模型

> ID：14626063
> 
> 赞同：0
> 
> 时间：2013-01-31T12:41:51.267
> 
> 标签：mongodb

我有一些 mongodb 对象，我们称它为`place`包含地理信息的对象，请看示例：

```
{
   "_id": "234235425e3g33424".
   "geo": {
             "lon": 12.23456,
             "lat": 34.23322
          }
   "some_field": "value"
} 
```

对于 every `place`，功能列表与以下内容相关联：

```
{
  "_id": "2334sgfgsr435d",
  "place_id": "234235425e3g33424",
  "feature_field" : "some_value"
} 
```

如您所见，由于`place_id`字段，功能与地点相关联。现在我想找到：`features`与最近连接的列表`places`。但我还想在`place.some_field`and上添加搜索条件`feature.feature_field`。重要的是我想限制结果。

现在我正在使用这样的方法：

1.  我查询`places`条件为`geo`和`some_filed`
2.  我查询`features`条件 on`feature_field`和`place_id`（仅限于 1 中的条件。）
3.  我在我的应用程序代码中限制了结果

我的问题是：有没有更好的方法来完成这项任务？现在我不能使用 mongo`limit()`函数，因为当我这样做时，`places`我可能会以太少的结果结束，因为我需要进行第二次查询。我不能`limit()`进行第二次查询，因为结果会出现随机顺序，我想按距离对其进行排序。

我知道我可以将数据放入一个文档中，但我认为列表`features`会很长并且我可能会超过 BSON 大小限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:27:55.850

仅功能就用完 16mb 似乎不太可能……但这是可能的。我认为您没有意识到 16mb 是多少，所以在做任何假设之前先进行数学计算！

在任何情况下，使用 MongoDB，您都**无法**使用来自两个集合的字段进行查询。查询总是只处理一个特定的集合。不过，我已经完成了与您在此处所做的非常相似的事情，我在一篇文章中对此进行了描述：http: [//derickrethans.nl/indexing-free-tags.html](http://derickrethans.nl/indexing-free-tags.html) — 看看它以获得更多灵感。

# url - url重写然后重定向

> ID：14626064
> 
> 赞同：0
> 
> 时间：2013-01-31T12:41:51.373
> 
> 标签：url, redirect, nginx, rewrite

我有一个文件链接，我想在最后添加一些东西（&下载）然后重定向到新修改的链接

原始链接 [https://file.example.com/public.php?service=files&t=c2a4f63a15bac9c26815af3c4cd29a59](https://file.example.com/public.php?service=files&t=c2a4f63a15bac9c26815af3c4cd29a59)

修改链接以重定向 [https://file.example.com/public.php?service=files&t=c2a4f63a15bac9c26815af3c4cd29a59&download](https://file.example.com/public.php?service=files&t=c2a4f63a15bac9c26815af3c4cd29a59&download)

网络服务器是 nginx 这怎么可能？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:46:20.057

`location`当您管理此链接（第一个链接）时，您可以在块内使用`set`带变量的指令，`$args`如下所示：

```
set $args $args&download; 
```

变量`$args`表示当前执行的查询字符串。再长一点的例子：

```
location /public.php {
   set $args $args&download;

   # rest of your code here
} 
```

其他方法在这里：

```
location ~ ^/public.php?service=([^&]+)&t=([^&]+)$ {
   set $args "";   # it's needed for nginx to it doesn't append two times query string
   rewrite .* $uri?$query_string&download;
}

location ~ ^/public.php?(.*)&download$ {
    # do your job here
} 
```

写回它是否可以解决您的问题。

# android - getRotation 总是返回零

> ID：14626066
> 
> 赞同：5
> 
> 时间：2013-01-31T12:42:01.923
> 
> 标签：android, orientation

`getRotation`无论屏幕朝向哪种方式，始终返回零。我在运行 2.3 的真实设备上运行它。有什么理由吗？

```
 Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
 int rotation = display.getRotation(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T13:42:30.270

getRotation 仅在应用程序具有 UI 并且允许 UI 旋转时才有效。操作系统有一个设置可以防止任何应用程序自动旋转：

设置 > 显示 > 自动旋转屏幕

这必须启用。在我的设备上它被禁用了。然而，关于 getRotation 的 Android 文档不仅没有指出这一点，甚至还假设 getRotation 即使没有 UI 也会返回旋转。你需要一个用户界面。对于没有 UI 但需要知道设备的方向以实现与用户交互无关的目的的服务，这当然是一个问题。就个人而言，我一直对谷歌雇佣业余程序员感到恼火，他们认为访问硬件功能几乎总是需要某种 UI。这种问题在很多场合都会出现，比如必须有一个 SurfaceView 才能录制视频。

最后，应用程序显然不需要 getRotation 来确定设备是否旋转了 0、90、180 或 270 度。关闭自动旋转屏幕后，默认相机应用程序仍然能够计算出角度旋转，因此它不能来自 getRotation，除非它能够以某种方式打开自动旋转屏幕设置。

# android - 返回字符串数组并在 AutoCompleteTextview 上使用它

> ID：14626068
> 
> 赞同：0
> 
> 时间：2013-01-31T12:42:04.570
> 
> 标签：android, sqlite, android-sqlite, autocompletetextview

我正在开发一个 android 应用程序，在其中我从 SQLite 数据库表中检索一些数据（所有村庄名称）。我通过字符串数组返回了这个。代码是

```
public String[] getAllVillage()
 {
     String[] villagelist=new String[2000];
     int i=0;
     Cursor c=sqLiteDatabase.rawQuery("SELECT * FROM " + MYDATABASE_TABLE2 ,null);
     if (c.moveToFirst())
     {
         do
         {
             villagelist[i]=c.getString(1);
             i++;
         }while(c.moveToNext());
     }
     c.close();
    return villagelist;
 } 
```

并且，在我的 android 应用程序中，我将此数组传递给 AutoCompleteTextview，如下所示：

```
private SQLiteAdapterv vadapter;
String[] village=new String[2000];
String newone[] = new String[2000];
village=vadapter.getAllVillage();
 for(int h=0;h<2000;h++)
 {
newone[h]=village[h];
 }
   ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line,newone);
   final AutoCompleteTextView acTextView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);

   acTextView.setThreshold(0);
   acTextView.setAdapter(adapter);
   acTextView.addTextChangedListener(this); 
```

但是代码没有效果，这意味着当我单击 AutocompleteTextview 时，它不会显示任何村名。我的方法正确吗？如果没有，那么请帮助我做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:49:18.603

首先，您的代码中的问题是

```
String[] village=new String[2000];// assigning large size
String newone[] = new String[2000]; 
```

原因是假设您的数据库中只有 1000 条记录。这两个字符串数组包含 1000 个结果和空值，直到剩下的。您可以通过断点检查。AutoComplete Textview 不支持这种格式。

所以你应该在你的代码中做一些改变

```
int count;
count=vadapter.getCount();
String[] village=new String[count];
village=vadapter.getAllVillage(); 
```

然后你可以直接使用 setAdapter 中的村庄作为

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line,village); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:01:48.213

> ArrayAdapter 适配器 = new ArrayAdapter(this,android.R.layout.simple_dropdown_item_1line,newone);

用这个代替；

> ArrayAdapter 适配器 = new ArrayAdapter(this,android.R.layout.simple_dropdown_item_1line,village);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:02:40.277

尝试这个 ：

```
acTextView.setThreshold(1);

acTextView.addTextChangedListener(this);

acTextView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, newone)); 
```

# file - 批处理文件到 telnet 并在 unix 服务器上运行命令

> ID：14626071
> 
> 赞同：0
> 
> 时间：2013-01-31T12:42:17.330
> 
> 标签：file, unix, batch-file, telnet

我被困在这里，我真的可以使用你的帮助。这是我的情况。

我期待创建一个可以使用 telnet 访问 unix 服务器的批处理脚本。在这里，unix 服务器会询问用户名/密码。在对用户进行身份验证后，我想对特定文件执行一些操作，例如 chown 。

这就是我想做的事情：

```
 telnet
    open xyz.abc.com
    username
    password

    command 1
    command 2
    command 3
    exit 
```

在哪里

```
xyz.abc.com is the unix server where i want to connect.
username and password are the credentials to access this server 
command 1,command 2,command 3 are the commands i want to run in the server. 
```

我的问题是我不能使用 SSH。它应该从文件中获取所有数据，而不是提示用户输入数据，并且应该作为自动脚本运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:44:54.160

这是我创建的 .bat 文件，用于 telnet 到服务器，更改文件权限，然后将文件 ftp 到我的 PC 并打开它。希望它会帮助你。变量文件名在那里，因为我每次都登录并移动到相同的目录名。您可以将其更改为提示，以便用户可以输入他们想要 cd 到的位置。如果您有任何问题，请告诉我。

```
:: This will telnet to the server, change the permissions, 
:: download the file, and then open it from your PC. 

:: Add your username, password, servername, and file path to the file.
:: I have not tested the server name with an IP address.

:: Note - telnetcmd.dat and ftpcmd.dat are temp files used to hold commands

@echo off
SET username=
SET password=
SET servername=
SET filepath=

set /p id="Enter the file name: " %=%

echo user %username%> telnetcmd.dat
echo %password%>> telnetcmd.dat
echo cd %filepath%>> telnetcmd.dat
echo SITE chmod 777 %id%>> telnetcmd.dat
echo exit>> telnetcmd.dat
telnet %servername% < telnetcmd.dat

echo user %username%> ftpcmd.dat
echo %password%>> ftpcmd.dat
echo cd %filepath%>> ftpcmd.dat
echo get %id%>> ftpcmd.dat
echo quit>> ftpcmd.dat

ftp -n -s:ftpcmd.dat %servername%

SET mypath=%~dp0
%mypath%%id%

del ftpcmd.dat
del telnetcmd.dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:45:40.137

退房[期待](http://en.wikipedia.org/wiki/Expect)。上面的Thie正是它的设计目的。

> Expect 是一个 Unix 自动化和测试工具，由 Don Libes 作为 Tcl 脚本语言的扩展编写，用于 telnet、ftp、passwd、fsck、rlogin、tip、ssh 等交互式应用程序。它使用 Unix 伪终端透明地包装子进程，允许通过终端访问的任意应用程序的自动化。

# python - 在win7上的eclipse中创建一个django项目？

> ID：14626077
> 
> 赞同：2
> 
> 时间：2013-01-31T12:42:33.777
> 
> 标签：python, django, eclipse, pydev

我已经在 win 7 上安装了 python 和 django。两者都可以在命令行中正常运行。我证明了这一点，`import django`然后得到了版本`print django.get_version()`。在这一步之后，我从 Eclipse 的更新页面安装了 pydev。我在首选项窗口中自动配置了 python 路径。但是，当我创建一个 python 项目时，我得到：

![在此处输入图像描述](../Images/d169ee70f40edc91fa832fbfc3801120.png)

在这里您可以看到创建了一个“空”项目。但是我研究了两个应该定义的变量：

**DJANGO_MANAGE_LOCATION**和**DJANGO_SETTINGS_MODULE**

但是我得到：

![在此处输入图像描述](../Images/113f4a30ba662e9ee62a7d337afc62f5.png)

因此我的问题是：

新建django项目时如何设置manage.py获取django结构？

**更新**

好的，伙计们，我想出了解决方案：

1.  在 pydev 中创建一个项目
2.  用 django 创建一个项目
3.  pydev 和 django 项目应该具有相同的名称
4.  将项目复制到eclipse工作区并按F5
5.  玩得开心;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:50:14.083

我昨天刚做了这个，遇到了同样的问题。我必须`django-admin.py startproject [projectname]`从项目工作区目录中的命令行运行才能自动生成所有文件。完成此操作后，您需要将项目配置设置为什么是不言而喻的（将在项目目录中生成一个 manage.py 和 settings.py 文件，您只需提供一个相对路径到 manage.py 和相应项目配置字段中设置的包路径）。

# cookies - Web 存储是否比用于存储 sessionId 的 cookie 更可取？

> ID：14626082
> 
> 赞同：2
> 
> 时间：2013-01-31T12:42:52.163
> 
> 标签：cookies, local-storage, session-cookies, session-storage, web-storage

使用本地存储或会话存储而不是使用 cookie 在客户端保存 sessionId（以避免每次登录）是否更安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T01:11:54.447

不！将 sessionid 保留在客户端是一个坏主意，因为它很容易被攻击者（例如 XSS）捕获。网络存储中的任何信息都不受保护。

将您的 sessionid 保存在 cookie 中，不要忘记标记 HttpOnly 和安全标志。

# ruby - Ruby 什么是 *args ？一个数组还是？在一个方法中

> ID：14626092
> 
> 赞同：2
> 
> 时间：2013-01-31T12:43:23.083
> 
> 标签：ruby

如果我编写如下方法，那么 *args 或 *urls 是什么：

```
def test(*args)
@test = args
end 
```

我也看到`*urls`它是一个数组还是？类似的选项是用 hash 创建的`options = {}`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:45:19.360

我相信这是为了使函数[可变参数](http://en.wikipedia.org/wiki/Variadic_function)（即函数的参数是任意数量的参数）。

类型是一个数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T12:45:09.283

试试这个（它应该回答你的问题）：

```
def test *args
  puts args.class
end

test

>> Array 
```

# php - Magento：连接管理器错误/Aitoc 扩展

> ID：14626095
> 
> 赞同：2
> 
> 时间：2013-01-31T12:43:28.077
> 
> 标签：php, magento, magento-1.4

我有一个本地 magento 安装来测试新的扩展和配置。现在我尝试在本地打开 Connect Manager，但出现空白屏幕，并出现以下错误：

```
PHP 警告：输入中的意外字符：'\x16' (ASCII=22) state=0 in /var/www-vhosts/magento.local/htdocs/app/code/local/Aitoc/Aitsys/Model/Module/License/ Light/Performer/Reader.php(36) : eval()'d code(18) : eval()'d code(1395) : eval()'d code on line 1
PHP 解析错误：语法错误，/var/www-vhosts/magento.local/htdocs/app/code/local/Aitoc/Aitsys/Model/Module/License/Light/Performer/Reader.php(36) 中的意外 T_STRING： eval()'d code(18) : eval()'d code(1395) : eval()'d code on line 1
PHP 致命错误：在第 111 行的 /var/www-vhosts/magento.local/htdocs/downloader/Maged/Pear.php 中调用未定义的方法 PEAR_Error::set()

```

我看到这与 Aitoc 扩展或许可证有关。修复此错误或在本地禁用扩展的最佳方法是什么？

* * *

解决方案（感谢 Mcnab）

使用 freegento.com/ddl-magento-extension.php，您可以使用 magentoconnect 扩展密钥下载文件，并且可以完全避免使用 Magento Connect。这并不能解决我在这里描述的问题，但对我来说它有效并且足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T14:14:07.030

您可以使用[freegento.com/ddl-magento-extension.php](http://freegento.com/ddl-magento-extension.php)并粘贴 magentoconnect 扩展密钥来下载模块所有文件的 tarball。

这意味着您至少可以看到已添加到安装中的内容和位置。当然，这意味着您还可以在将其添加到 Magento 安装之前查看要添加的代码 - 即识别冲突和彻头彻尾的狡猾代码。

# php - Cookie 创建错误

> ID：14626096
> 
> 赞同：0
> 
> 时间：2013-01-31T12:43:28.717
> 
> 标签：php, wordpress

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我的 wordpress 主题主页上的标题已经发送错误。我的功能像;

```
function LoopCokiee() {
    if(isset($_COOKIE['PozCounter'])) 
    { 

         setcookie("PozCounter", ++$_COOKIE['PozCounter'], time()+3600); 
    } 
    else 
    { 

         setcookie("PozCounter", 1, time()+3600); 
    } 

    return $_COOKIE['PozCounter'];

}

function LoopCokieeUpdate () {
    $Kuki = $_COOKIE['PozCounter'];
    $Topl = '20'; //wp_count_posts()->publish;

    if ($Kuki > $Topl ) {
        setcookie("PozCounter", 1, time()+3600); 
    } else {
        return $_COOKIE['PozCounter'];
    }

} 
```

这在我的本地功能上非常完美，但我没有理解**hostgator**有什么问题？

当我调用我的函数时；

```
<?php 
 LoopCokiee();
 LoopCokieeUpdate();
echo '<!--LoopResults--'.LoopCokiee().'//'.LoopCokieeUpdate().'-->'
?> 
```

出现此错误；

```
Warning: Cannot modify header information - headers already sent by (output started at /home/igze/public_html/ddddd.com/wp-content/themes/smooth/home.php:1) in /home/igze/public_html/ddddd.com/wp-content/themes/smooth/PozHook/index.php on line 11

Warning: Cannot modify header information - headers already sent by (output started at /home/igze/public_html/ddddd.com/wp-content/themes/smooth/home.php:1) in /home/igze/public_html/ddddd.com/wp-content/themes/smooth/PozHook/index.php on line 11 
```

我应该怎么办 ？任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:51:44.637

在发送标头之前不要使用任何输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:52:34.203

在数据已经发送到网络浏览器进行输出后，您无法设置 cookie。您必须在此之前设置 cookie 或使用[输出缓冲](http://www.php.net/manual/en/ref.outcontrol.php)。

# javascript - 使用jquery进行数学计算

> ID：14626102
> 
> 赞同：-5
> 
> 时间：2013-01-31T12:43:53.443
> 
> 标签：javascript, jquery

这个问题与 [使用 jQuery/Ajax 的数学计算不同](https://stackoverflow.com/questions/10245216/mathematical-calculations-using-jquery-ajax)

所以请拒绝投票。

我使用两组单选按钮 我找到的这个小提琴显示了我想要的确切内容 [http://jsfiddle.net/8FXFE/6/](http://jsfiddle.net/8FXFE/6/)

我可以为那些我可以在任何计算中使用的按钮添加另一种隐藏类型的值吗？

HTML

```
<div class="textForm">
<input type="radio" name="txtNumber" value="100" checked="checked" />100
<input type="radio" name="txtNumber" value="200" />200
<input type="radio" name="txtNumber" value="500" />500
<input type="radio" name="txtNumber" value="1000" />1000
<input type="radio" name="txtNumber" value="10000" />10000
<input type="radio" name="txtNumber" value="other" />other
<input type="text" name="other_field" id="other_field" onblur="checktext(this);"
/>
</div>
<div class="formText">
    <input type="radio" name="txtSpace" value="RJ" checked="checked"
    />Space 1.
    <br />
    <input type="radio" name="txtSpace" value="SM" />Space 2.
    <br />
</div>

<h3>Output:</h3>

<div id="output"></div> 
```

就像假设我想制作这样的公式..

如果选择了 100 并且选择了空格 1.

那么公式应该像 (name="txtSpace" value="RJ") 的隐藏值 + (name="txtNumber" value="100") 的隐藏值

可以吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:55:31.583

试试这个脚本。只需复制并粘贴此代码。

```
 <script type="text/javascript">
function fnc()
{
count1=document.getElementsByName("txtNumber").length;
count2=document.getElementsByName("txtSpace").length;
for(i=0;i<count1;++i)
{
    el=document.getElementsByName("txtNumber").item(i);
    if(el.checked)
        firstnumber=el.value;

}

for(i=0;i<count2;++i)
{
    el=document.getElementsByName("txtSpace").item(i);
    if(el.checked)
        secondnumber=el.value;

}
if(firstnumber=='100' && secondnumber=='RJ')
{
    alert("now you can write your formula here");
}
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:49:45.953

您需要这样的函数来跟踪表单值：

```
updateForm = function()
{
      var $txtNumber = $('[name=txtNumber]:checked'),
          $txtSpace = $('[name=txtSpace]:checked'),
          out = $txtSpace.val();

    if ($txtNumber.val() == 'other') {
        out += $('#other_field').val(); // use value of other_field
    } else {
        out += $txtNumber.val(); // use value from radio button
    }

    $('#output').text(out);
} 
```

然后，初始化：

```
updateForm();
$("input[name='txtNumber'],input[name='txtSpace']").change(updateForm); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:54:26.567

利用

```
<input data-fieldname=""> 
```

和jQuery

```
$(this).data('fieldname') 
```

[http://jsfiddle.net/FRu67/](http://jsfiddle.net/FRu67/) <--整理东西

*   尽量避免使用 input[name='txtNumber'] 类型选择器，因为它们是最慢的

# javascript - 从 JSON 对象中获取属性的最大值

> ID：14626107
> 
> 赞同：1
> 
> 时间：2013-01-31T12:44:18.297
> 
> 标签：javascript, json, sorting

我有以下 JSON 对象：

```
{
"nodeId": 2965,
"appId": 208,
"navigationType": 0,
"displaySeq": 0,
"displayText": "Delete Testing",
"customerAttribute": "",
"saveAsDefault": false,
"ussdDisplayText": "Delete Testing",
"headerForChild": "",
"Nodes": [
    {
        "nodeId": 3081,
        "appId": 208,
        "navigationType": 0,
        "displaySeq": 1,
        "displayText": "New node2967",
        "customerAttribute": "",
        "saveAsDefault": false,
        "ussdDisplayText": "New node2967",
        "headerForChild": "",
        "parentNodeId": 2965,
        "Nodes": [
            {
                "nodeId": 3086,
                "appId": 208,
                "navigationType": 0,
                "displaySeq": 1,
                "displayText": "abcd",
                "customerAttribute": "",
                "saveAsDefault": false,
                "ussdDisplayText": "New node1",
                "headerForChild": "",
                "parentNodeId": 3081,
                "Nodes": [],
                "concatWithHeader": false,
                "nodeCode": "208_3085_1",
                "parentCode": "3080",
                "extResponseType": 0,
                "canAdd": false,
                "canEdit": false,
                "canDelete": false,
                "canView": false,
                "setChileNode": false
            }
        ],
        "concatWithHeader": false,
        "nodeCode": "3080",
        "parentCode": "RN",
        "extResponseType": 0,
        "canAdd": false,
        "canEdit": false,
        "canDelete": false,
        "canView": false,
        "setChileNode": false
    }
],
"concatWithHeader": false,
"nodeCode": "RN",
"parentCode": "ROOT_NODE",
"responseType": 1,
"responseText": "Thank you!",
"dynamicResponseFlag": false,
"extResponseType": 0,
"canAdd": false,
"canEdit": false,
"canDelete": false,
"canView": false,
"setChileNode": false
} 
```

我想要这个对象的属性的最大值，`**nodeId**`即`3080`

我该怎么做？我不想对其进行排序。只需获得最大值。

我试过这个：

```
var data = rootNode;
        var maxProp = "nodeId";
        var maxValue = -1;
        for (var prop in data) {
          if (data.hasOwnProperty(prop)) {
            var value = data[prop];
            if (value > maxValue) {
              maxProp = prop;
              maxValue = value;
            }
          }
        } 
```

但这会迭代属性，而不是子元素。因此，我只得到第一个值作为最大值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:56:49.497

尝试这个：

```
var nodes = data.Nodes, // data is your json
    maxProp = "nodeId",
    maxVal = 0, maxInd = 0;

for (var i = 0; i < nodes.length; i++) {
    var value = parseInt(nodes[i][maxProp], 10);
    if (value > maxVal) {
        maxVal = value;
        maxInd = i;
    }
}

console.log(nodes[maxInd]) // array with maximal nodeId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:17:43.337

`Math.max`如果您有一个应该确定最大值的值数组，您也可以使用。使用 ES5 的 array `map`，你可以从你的节点中提取它。如果你不支持 ES5 (IE9+)，你也可以使用[jQuery](http://api.jquery.com/jQuery.map/)或[Underscore.js](http://underscorejs.org/#map)实现。

```
var maxProp = 'nodeId',
    propValues, maxvalue;

propValues = data.Nodes.map(function(node) {
    return node[maxProp];
});

maxValue = Math.max.apply(null, propValues); 
```

JSFiddle：http: [//jsfiddle.net/g2YeW/](http://jsfiddle.net/g2YeW/)

# javascript - Javascript函数无法正常工作

> ID：14626112
> 
> 赞同：0
> 
> 时间：2013-01-31T12:44:25.083
> 
> 标签：javascript

好的，所以我的网站上有以下 javascript 用于倒数计时器：

```
<script type="text/javascript">
function timer(elementid, totaltime, format, color, style, trigger_a, trigger_b, done) {

  var hours = 0; var minutes = 0; var seconds = 0;

  if (totaltime > 0) {

    while (totaltime >= 3600) { hours++; totaltime -= 3600; }
    if (hours < 10) { hours = '0' + hours; }
    while (totaltime >= 60) { minutes++; totaltime -= 60; }
    if (minutes < 10) { minutes = '0' + minutes; }
    seconds = totaltime;
  }

  function display() {

    if (hours == 0 && minutes == 0 && seconds == 0) {

      if (trigger_a == "reload") { location.href="page.php"; }
      else if (trigger_a == "enable" && trigger_b != "") { document.getElementById(trigger_b).disabled = false; }
      else { /* do nothing */ }

      document.getElementById(elementid).innerHTML = done;      
    }

    else {

      var output = '';

      if (seconds > 0 && seconds <= 59) { seconds--; if (hours < 10) { hours = '0' + hours; } }
      else {
        if (minutes > 0 && minutes <= 59) { minutes--; if (minutes < 10) { minutes = '0' + minutes; } }
        else {
          if (hours > 0) { hours--; minutes = 59; }
        }
        seconds = 59;
      }

      if (hours > 0) {        
        if (format == 'long') { output += hours + " hours "; }
        else if (format == 'small') { output += hours + "h "; }
      }

      if (minutes > 0) {       
        if (format == 'long') { output += minutes + " minutes "; }
        else if (format == 'small') { output += minutes + 'm ';}
      }

      if (seconds < 10) { seconds = '0' + seconds; }
      if (format == 'long') { output += seconds + ' seconds'; }
      else if (format == 'small') { output += seconds + 's'; }

      if (color == '') {

        if (style == 'bold') { document.getElementById(elementid).innerHTML = '<b>' + output + '</b>'; }
        else { document.getElementById(elementid).innerHTML = output; }
      }

      else {

        if (style == 'bold') { document.getElementById(elementid).innerHTML = '<font color='+color+'><b>' + output + '</b></font>'; }
        else { document.getElementById(elementid).innerHTML = '<font color='+color+'>' + output + '</font>'; }
      }      
      setTimeout(display, 1000);
    }
  }
  display();  
}
</script> 
```

我添加了一个像这样的跨度框：

```
<?php
$time_left = $from_database['time_left']; //timestamp;
?>
<span id="test"></span>
<script>
timer("test", "<?php echo $time_left - Time(); ?>", "long", "", "", "enable", "unlock_this", "Done");
</script>

<input type="submit" id="unlock_this" <?php if ($time_left - Time() > 0) { echo 'disabled'; } ?> /> 
```

问题是，当我刷新此页面时（在 $time_left 之后），没有显示“完成”消息，并且我收到一个 javascript 错误（document.getElementById = null），它指向

```
else if (trigger_a == "enable" && trigger_b != "") { document.getElementById(trigger_b).disabled = false; } 
```

这可能只是一件小事，但我无法弄清楚我做错了什么，所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:59:58.313

看起来问题只是您在带有id 的输入有机会加载`timer`之前执行了该函数。`unlock_this`我意识到您已经延迟`setTimeout`调用 of`display`但您是否尝试将脚本放在`input`元素下方？

还是`timer`在加载整个窗口时调用更好？执行第二个选项的最简单方法是：

```
window.onload = function () {
    timer("test", "<?php echo $time_left; ?>", "long", "", "", "enable", "unlock_this", "Done");
}; 
```

但是您已经在使用`onload`窗口的属性，您需要以更智能的方式加载它（使用 JQuery 之类的库，或者使用包装函数保护现有函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:02:50.057

我认为问题在于您的 html 看起来像

```
<span id="test"></span>
<script>
timer("test", "<?php echo $time_left - Time(); ?>", "long", "", "", "enable", "unlock_this", "Done");
</script>

<input type="submit" id="unlock_this" disabled /> 
```

在调用 display() 的 timer() 被调用时，ID 为“unlock_this”的输入尚未被解析并添加到浏览器 DOM。

您应该延迟对 timer() 的调用，直到浏览器完成对文档的解析，如下所示：

```
<script>
window.onload = function(){
    timer("test", "<?php echo $time_left - Time(); ?>", "long", "", "", "enable", "unlock_this", "Done");
}
</script> 
```

尽管此方法不会覆盖任何先前添加的 window.onload 处理程序。

# c++ - 在 Mac 上使用 Clang/LLVM 加速和优化 C++ 程序

> ID：14626123
> 
> 赞同：1
> 
> 时间：2013-01-31T12:44:56.793
> 
> 标签：c++, performance, optimization, compiler-construction, llvm

好的，这是我的问题：

*   我正在做一个超级复杂的项目，速度和性能至关重要——有很多琐碎的东西和低级的东西*（你可能会问我是否有什么具体的需要知道的）*
*   我正在使用 Mac
*   我正在使用**clang++编译和链接它**

* * *

```
Apple clang version 4.0 (tags/Apple/clang-421.0.60) (based on LLVM 3.1svn) 
```

我目前使用的所有优化标志都是`-O3`（老实说，这给了我意想不到的提升；所以我没有再看下去；但是我仍然注意到其他程序使用各种标志......所以我觉得有点失落……）。

还有什么我应该考虑的吗？如果是这样，是什么？

* * *

**编辑：（** *尝试使用`-O4`但我收到错误；任何想法为什么会发生这种情况？）*

```
0  0x10be24280  __assert_rtn + 144
1  0x10be89659  ld::tool::HeaderAndLoadCommandsAtom<x86_64>::copyEntryPointLoadCommand(unsigned char*) const + 169
2  0x10be8853c  ld::tool::HeaderAndLoadCommandsAtom<x86_64>::copyRawContent(unsigned char*) const + 1084
3  0x10be7da56  ld::tool::OutputFile::writeAtoms(ld::Internal&, unsigned char*) + 598
4  0x10be79c14  ld::tool::OutputFile::writeOutputFile(ld::Internal&) + 564
5  0x10be74963  ld::tool::OutputFile::write(ld::Internal&) + 147
6  0x10be248ef  main + 1263
7  0x10be13234  start + 52
A linker snapshot was created at:
    /tmp/myapp-2013-00-31-150316.ld-snapshot
ld: Assertion failed: (_mode == modeFinalAddress), function finalAddress, file /SourceCache/ld64/ld64-133.3/src/ld/ld.hpp, line 657.
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:34:39.620

在做了明显的事情（编译选项：O3、lto 并且不使用任何调试标志）之后，这是我加快程序的步骤：

1) 简介。分析后，您将知道需要查看哪些部分/模块。

2) 仪器/基准。在关键部分周围放置一些时序代码。

3）实际上尝试更改您的代码，看看它是否更慢或更快。最大的罪魁祸首：糟糕的算法或数据结构；过度使用 malloc/new。

# c# - 从 Visual C# 执行 sql 更新

> ID：14626129
> 
> 赞同：0
> 
> 时间：2013-01-31T12:45:09.590
> 
> 标签：c#, sql

我有我的项目，从我的可视化 c# 访问 oracle 数据库我无法使用更新命令

这是我的代码

```
string updatetodb = "update tugas_oop ";
updatetodb += "set stok = :i_stok, ";
updatetodb += "dana_keluar = :i_dana_keluar ";
updatetodb += "where nama_barang = '" + nama_barang[i] + "' and satuan = '" + satuan[i] + "';";

cmd.CommandText = updatetodb;

OracleParameter istok = new OracleParameter();
istok.OracleDbType = OracleDbType.Int32;
istok.Value = updatestok;
istok.ParameterName = "i_stok";

OracleParameter idana_keluar = new OracleParameter();
idana_keluar.OracleDbType = OracleDbType.Int32;
idana_keluar.Value = updatedanakeluar;
idana_keluar.ParameterName = "i_dana_keluar";

cmd.Parameters.Add(istok);
cmd.Parameters.Add(idana_keluar);
cmd.ExecuteNonQuery(); 
```

我收到错误消息 ora-00911 你能告诉我，我在哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:54:48.693

用。。。来代替

```
istok.ParameterName = ":i_stok";

idana_keluar.ParameterName = ":i_dana_keluar"; 
```

我建议您使用`string.Format`（确保您对报价没有问题）

```
string.Format("update tugas_oop set stok = :i_stok, dana_keluar = :i_dana_keluar where nama_barang = {0} and satuan = {1}",nama_barang[i],satuan[i]); 
```

注意：对我来说，我更喜欢在调用之前使用存储过程来验证您的查询

# ruby-on-rails-3 - 带有图像浏览器的富编辑器？

> ID：14626139
> 
> 赞同：0
> 
> 时间：2013-01-31T12:45:21.807
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

有哪些选项可以让丰富的编辑器与图像浏览器集成并与 amazon s3 一起使用？

我需要人们通过浏览他们上传的图像来编辑、上传图像、使用图像。有没有准备好的宝石可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:46:23.277

试试这个 Ckediotor 插件：

[http://forums.aurigma.com/yaf_postst4033_Amazon-S3-File-Manager-for-TinyMCE-and-CKEditor.aspx](http://forums.aurigma.com/yaf_postst4033_Amazon-S3-File-Manager-for-TinyMCE-and-CKEditor.aspx)

# drupal - Drupal 到 Pear Mail UTF-8 编码失败

> ID：14626140
> 
> 赞同：1
> 
> 时间：2013-01-31T12:45:21.557
> 
> 标签：drupal, utf-8, pear

我有一个由 Venture Web 为我开发的完美运行的 Drupal 站点。

我的问题是我的服务器上没有可用的 php mail() 但有 Pear 邮件实用程序。我目前正在从 Drupal 链接到我自己用 PHP 开发的一个邮件实用程序，该实用程序调用 Pear 邮件函数。

除了 UTF-8 编码似乎存在问题之外，它工作正常。最明显的是涉及法语字符的地方。

例如，如果我尝试邮寄这句话：

测试倒 les caractères spéciaux。À, ç, ê, ù

当我显示要捕获消息的变量 $message 的内容时，我得到的正是您在上面看到的内容。

但是当电子邮件送达时，我得到：

测试倒 les caractéres spéciaux。Ã€, Ã§, Ãª, Ã¹

这是相关的PHP代码：

```
 $hdrs = array(
    'From'      => $email,
    'To'        => $tomail,
    'Cc'        => not included for security reasons,
    'Subject'   => $subjectline,
    'Content-Transfer-Encoding' => 'quoted-printable'
                       );
    $recipients=$tomail.', inquiries@barkbusters.ca';
    $mime = new Mail_mime($crlf);
    $mime->setTXTBody($text);
    $mime->setHTMLBody($html);

    //do not ever try to call these lines in reverse order
    $body = $mime->get(array('text_charset' => 'utf-8'));
    $hdrs = $mime->headers($hdrs);

    $params["host"] = 'smtp.barkbusters.ca';
    $params["port"] = "26";
    $params["auth"] = true;
    $params["username"] = not included for security reasons;
    $params["password"] = not included for security reasons;

    $mail =& Mail::factory('smtp', $params);
    $mail->send($recipients, $hdrs, $body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:48:23.837

所以我不太确定你的梨邮件实用程序，但 utf-8 的普通 php 标头看起来像这样

`$headers = array("Content-Type: text/html; charset=UTF-8");`

这是一些有用的信息。 [如何发送 UTF-8 电子邮件？](https://stackoverflow.com/questions/7266935/how-to-send-utf-8-email-php)

# hbase - 如何定义 Titan Graph DB Vertex 的数据类型？

> ID：14626142
> 
> 赞同：2
> 
> 时间：2013-01-31T12:45:26.347
> 
> 标签：hbase, titan

我正在使用 Titan 和 Blueprint API 创建一个图形数据表。我使用 HBase 作为后端。我知道如何为关键索引定义数据类型。

### 例子：

```
TitanKey name = graph.makeType().name("name").dataType(String.class).functional().makePropertyKey(); 
```

现在我实际上想在 Titan DB Graph 中表示一个 RDBMS 表。是否有任何过程可以在 Titan Graph Model 中实现“列数据类型”（如在 RDBMS 表中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:46:37.453

与关系数据库不同，Titan 的模式是灵活的。这意味着，您可以在数据库运行时添加新的属性键和边缘标签，而无需昂贵的“ALTER TABLE”命令。此外，Titan 没有“表”的概念，因为每个实体都由一个顶点表示，并且每个顶点都可以通过一条边连接到任何其他顶点。

如果您有一个包含 NAME、AGE、UID 列的 USER 表（其中 UID 是该表的唯一主键），您将在 Titan 中定义以下属性键：

```
graph.makeType().name("name").dataType(String.class).functional().makePropertyKey()
graph.makeType().name("age").dataType(Integer.class).functional().makePropertyKey()
graph.makeType().name("uid").dataType(Long.class).functional().indexed().unique().makePropertyKey() 
```

然后，为该表中的每个用户创建一个顶点并设置这些属性：

```
v = g.addVertex(null);
v.setProperty("name","john");
v.setProperty("age",29);
v.setProperty("uid",23482234); 
```

# msmq - 在事务队列和非事务队列之间交替时 MSMQ 性能急剧下降？

> ID：14626148
> 
> 赞同：2
> 
> 时间：2013-01-31T12:45:42.010
> 
> 标签：msmq

我一直在运行一些测试来检查 MSMQ 的性能，并测试它在将大量消息传递给单独的服务进行处理方面是否符合我们的需求。我们的要求是某些消息很重要，并且必须使用事务以可恢复的方式传递，而其他消息则不是。

我的实验包括向 MSMQ 发送 1000 个 108 字节长的文本字符串，并执行 50 次，以获得平均值并记录每批 1000 条消息的最小、最大和平均性能。

我正在使用 C++ 服务将消息分派到两个本地私有队列，一个是非事务性的，一个是事务性的（在必要时）。我进行了四个实验，它们是：

1) 仅交易发送

2) 仅非事务性发送

3) 以非事务方式发送每组 1000 条消息中的 500 条，然后以事务方式发送另外 500 条

4) 发送 500 条事务性消息和 500 条非事务性消息，在事务性和非事务性之间交替发送，以便每个事务性后跟一个非事务性消息，依此类推

我已经消除了任何其他外部因素，得到的结果很奇怪，所以我想知道是否有人可以解释一下？结果如下：

1) 事务性

```
Average: 1436   
Min: 398
Max: 1902 
```

2) 非交易性

```
Average: 35
Min: 30
Max: 100 
```

3）混合跟进

```
Average: 40
Min: 29
Max: 323 
```

4）混合穿插

```
Average: 4944
Min: 1214
Max: 5941 
```

让我感到困惑的两个问题是，首先在事务性发送和非事务性发送之间交替导致比以事务方式发送所有内容的性能降低大约 5 倍——我曾认为以事务方式发送所有内容比只发送一半消息更昂贵无论以何种方式完成事务，都不会慢 5 倍。其次，在 500 条非事务性消息之后发送 500 条事务性消息似乎实际上加快了事务性发送的速度，而当它们作为单批 1000 个单独的事务发送时，根据该测试的平均发送速率仅为 40 毫秒来判断。

将单个消息写入事务性消息和非事务性队列之间的交替是否由于 MSMQ 必须在以同步方式或类似方式序列化的文件之间切换而重复？

作为参考，我正在使用 MSMQ 中内置的单个消息事务。我也进行了几次这些实验，结果总是大体相似。我还验证了数据计算正确。

任何帮助解释切换队列的性能影响，以及在事务队列之前发送到非事务队列的性能增益将不胜感激。

提前致谢。

# php - 在 PHP 中使用 PDO 语句显示每个条目

> ID：14626150
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:45:49.717
> 
> 标签：php, mysql

我正在尝试使用此代码获取表格的几个条目

```
$statement = $conn->prepare('SELECT * FROM players WHERE longitude > :long1 AND longitude < :long2 AND latitude > :lat1 AND latitude < :lat2 AND id != :mPlayerId ');
            $statement->bindParam(':long1', $long1, PDO::PARAM_INT);
            $statement->bindParam(':long2', $long2, PDO::PARAM_INT);
            $statement->bindParam(':lat1' , $lat1, PDO::PARAM_INT);
            $statement->bindParam(':lat2' , $lat2, PDO::PARAM_INT);
            $statement->bindParam(':myPlayerId' , $myPlayerId, PDO::PARAM_INT);
            $statement->execute();

            if(!($players = $statement->fetchAll(PDO::FETCH_ASSOC))) 
            {
                return false;
            }

            $conn = null;
        } catch(PDOException $e) {
            throw $e;
        } 
```

现在我想得到每个条目。假设每个条目包含 id、name、email。我怎样才能得到每个条目的数据？

我脑子里有这段代码，有人可以检查这是我需要的还是需要别的东西？

```
foreach($players as $player)
        {
        this->ShowResult($player->id,$player->email);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:50:35.903

使用类似的东西

```
foreach($players as $player)
{
    this->ShowResult($player['id'],$player['email']);
} 
```

应该做的

# java - JSONArray 删除在 JAVA 中找不到符号错误

> ID：14626151
> 
> 赞同：0
> 
> 时间：2013-01-31T12:45:52.027
> 
> 标签：java, json, arrays

[描述]
1.使用Java
2.使用org.json.JSONArray和org.json.JSONObject
[问题]
我调用JSONArray的`remove()`方法时，编译我的项目时总是出现“找不到符号：方法remove(int)”，任何帮助为了这？

这是一个类似的问题：[How to remove JSONArray element using Java](https://stackoverflow.com/questions/8740377/how-to-remove-jsonarray-element-using-java)
但答案似乎不正确，因为这只会删除内部 JSONObject 的键值对，而不是整个 insinde JSONObject。

示例代码：

```
JSONArray test_arr = new JSONArray("[{'id':'1', 'name': 'name1'},{'id':'2', 'name':'name2'}]");
test_arr.remove(1);  // here will cause the "cannot find symbol" error. 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:36:29.730

好吧，有趣的是，Maven Central 中最新的 org.json JAR 确实包含一个**没有**remove 方法的`JSONArray`类。这是从 json-20090211.jar 中提取的类上 javap 的摘录：

 **```
public org.json.JSONArray put(int, long) throws org.json.JSONException;
public org.json.JSONArray put(int, java.util.Map) throws org.json.JSONException;
public org.json.JSONArray put(int, java.lang.Object) throws org.json.JSONException;
public org.json.JSONObject toJSONObject(org.json.JSONArray) throws org.json.JSONException;
public java.lang.String toString();
public java.lang.String toString(int) throws org.json.JSONException;
java.lang.String toString(int, int) throws org.json.JSONException;
public java.io.Writer write(java.io.Writer) throws org.json.JSONException; 
```

这个编译后的代码与[JSON.org 官方网站](http://www.json.org/java/index.html)提供的[源代码](https://github.com/douglascrockford/JSON-java/)不一致，所以我***不会***使用它。该库非常简单，我建议您自己获取源代码，或者：

 **   将其编译成 JAR
*   将其直接包含在您的项目中。***

# android - Listview 包含一个复选框和多个文本视图，复选框动态生成但给出空指针异常

> ID：14626164
> 
> 赞同：0
> 
> 时间：2013-01-31T12:46:52.197
> 
> 标签：android

我的`ListView`包含一个`CheckBox`和多个`TextViews`，并且复选框在特定点击时动态生成，但是当我运行代码来生成这些复选框时，它在前 10 个列表视图行中运行良好，之后它给出了一个`NULLPointerException`.

我该如何纠正它

以下是我的代码片段：

```
ListView listView = (ListView) findViewById(R.id.listview);
int size = listView.getAdapter().getCount();

for(int i = 0; i<size; i++) {
    View view = listView.getChildAt(i);
    CheckBox chk = (CheckBox) view.findViewById(R.id.check);
    chk.setVisibility(1);
}

Button btnDone = (Button) findViewById(R.id.btnDone);
btnDone.setVisibility(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:09:48.600

因为现在列表上只有 10 个项目可见，所以 listView.getAdapter().getCount() 获取总列​​表上的项目数，而不仅仅是可见的。

您可能会在 listView.getChildAt(i) 上获得空指针。

ListViews 只有现在可见的项目，例如，如果你可以显示 10 个项目并且你滚动到项目 10，它会显示从索引 10 到 19 的项目，所以在这种情况下 listView.getChildAt(0) 将为你提供10 项而不是 0。

我建议您更改 getView() 方法上复选框的显示与否，如果运行时更改，您只更改可见的复选框。

# email - 如何制作一张能填满整个屏幕的桌子？

> ID：14626167
> 
> 赞同：0
> 
> 时间：2013-01-31T11:07:23.813
> 
> 标签：email, bulk-email

```
<table cellpadding="0" cellspacing="0" class="auto-style1" style="width: 100%; height: 100%">
    <tr>
        <td>edtretrt</td>
    </tr>
</table> 
```

尽管我指定高度为 100%，但它并没有填满整个屏幕。

我想用那个表来设置背景，因为我想发送 html 电子邮件，我不能只改变背景`<body>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:14:46.850

当您在浏览器中将其视为 html 文件时，您的浏览器会假定它具有正文，并且正文默认情况下具有一定的边距。我可以通过指定正文并从正文中删除边距来摆脱边框。我还切换到了 div 而不是表格，以使代码更简单并从 div 中删除边距。

```
<body style="margin:0;">
<div style="width:100%;height:100%;background-color:orange;margin:0;">
edtretrt
</div>
</body> 
```

我搜索了更改电子邮件的背景颜色。似乎大多数邮件客户端都会忽略或去除任何正文标签。似乎更改电子邮件中的背景颜色并不完全可靠。该站点似乎表明您应该使用表格，并且您应该使用带有六个字符颜色代码的 bgcolor 属性，以由最大数量的邮件客户端支持：http: [//litmus.com/blog/background-colors-html -电子邮件](http://litmus.com/blog/background-colors-html-email)

# css - 将块元素过滤成两列

> ID：14626169
> 
> 赞同：0
> 
> 时间：2013-01-31T12:47:02.287
> 
> 标签：css, css-float

我要问的可能是不可能的，但仍然。

给定一系列块元素，如下所示：

```
<p>...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<div class="toc">...</div>
<p>...</p>
<img class="pic">...</img>
<p>...</p>
<img class="pic">...</img> 
```

我们希望所有 .toc 和 .pic 元素在左侧的一列中排列，所有其他元素在右侧的一列中。第一个`p`的顶部和第一个的顶部`div`应该是水平的。`img`应保持原来的垂直位置。`div`和原来的位置应该没有空间`img`。

大多数这似乎可以通过设置`img`to `position:relative; left: -100px`(etc) 和`div.toc`to 来实现`position:absolute`。

这是问题所在：`img`可能与`div.toc`. 有什么解决办法吗？解决方法？

在这里编辑小提琴：http: [//jsfiddle.net/4CAgn/](http://jsfiddle.net/4CAgn/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:20:07.570

如果我说得对，我认为[**这**](http://jsfiddle.net/onury/mgWmA/)是你能得到的最好的：

```
div.content { 
    width: 400px; 
    position: relative;
}

div.content p {
    display: block;
    position: relative;
    margin-left: 220px;
}

div.toc { 
    display: block;
    position: absolute; 
    background: #cc9;
    margin: 1em; 
    width: 180px; 
    left: 0px; 
    top: 0px;
    line-height: 2em;
}

img { 
    display: block;
    position: absolute;
    margin: 1em;
    width: 180px; 
    left: 0px;
} 
```

演示小提琴：http: [//jsfiddle.net/onury/mgWmA/](http://jsfiddle.net/onury/mgWmA/)

**这方面的问题：**

*   如果 TOC 前面的文字（段落）短于 TOC 高度；下一个图像（在 TOC 之后）仍将重叠。
*   如果图像后面的任何文字短于图像的高度；该图像可以与下一个图像重叠。

**真正的解决方法：**

我了解您只想使用 CSS 来实现这一点；但我认为完美的实现是不可能的（因为您想将一些无序的内容放入列中）。但是如果你考虑javascript，它是可能的。（例如）您可以通过在生成的容器中以所需的顺序分离然后重新附加元素来操作 DOM。

# c# - sql查询从数据库中获取数据

> ID：14626171
> 
> 赞同：0
> 
> 时间：2013-01-31T12:47:14.703
> 
> 标签：c#, sql, sql-server-2008

我有一个这样的sql命令

```
SqlCommand cmd = new SqlCommand(
"IF NOT EXISTS(SELECT english from dic where english='"+e_word+"') " +
"Insert INTO dic VALUES('"+e_word+"',N'"+b_word+"') " +
"else " +
"UPDATE dic SET english='"+e_word+"',bangla=N'"+b_word+"' WHERE  english='"+e_word+"'",con);   

      cmd.ExecuteNonQuery(); 
```

但我得到了像这样的错误

```
Incorrect syntax near 's'.
Incorrect syntax near 's'. 
```

我该如何解决这个问题？？？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:52:08.873

自由贸易区：

```
SqlCommand cmd = new SqlCommand(@"
IF NOT EXISTS(SELECT english from dic where english=@e_word)
Insert INTO dic (english, bangla) VALUES(@e_word,@b_word)
else UPDATE dic SET bangla=@b_word WHERE english=@e_word",con);   

cmd.Parameters.AddWithValue("e_word", e_word);   
cmd.Parameters.AddWithValue("b_word", b_word);
cmd.ExecuteNonQuery(); 
```

（实际上，我通常会做我的 upserts 有点不同，但我不想重写整个事情）

# css - 具有等宽 3 列的布局在 Opera 和 Safari 中呈现不均等

> ID：14626172
> 
> 赞同：2
> 
> 时间：2013-01-31T12:47:16.890
> 
> 标签：css, fluid-layout

我有一个非常简单的页面，其中包含一个包含 3 个 seciotns 的包装器（浮动：左；宽度：33.333%）。

```
#wrapper{
    position: relative;
    max-width: 960px;
    margin: 0 auto;
}

.row{
    width: 100%;
    _height: expression(this.height > 384 ? 384: true);
    max-height: 384px;  
    margin-bottom: 30px;
    overflow: hidden;
}  
.row:after
{
    content: "";
    display: table;
    clear: both;
}
.row .column{
    float: left;    
    width: 33.333%;
    height: 100%;
    line-height: 0; 
    overflow: hidden;
} 
.row .column .item {
    width: 100%;
    height: 50%;
    overflow: hidden;
} 
```

现在我让它们与除 Safari 和 Opera 之外的所有浏览器完美配合，在搜索堆栈溢出和谷歌很多之后，我发现了几个类似的问题，没有真正的工作解决方案......一个人建议让第三列浮动正确并且是 34% 宽，而第一列和第二列是 33%，但这并没有成功..右边仍然有一个超小像素..

所以基本上它似乎是一个四舍五入的问题，我读了很多，但由于我无法改变设计，所以我正在寻找解决方法......

我目前的解决方案是避免在 safari/opera 上进行流畅的设计……但我绝对不会为此感到自豪……

在这里，我快速地处理 html + css：http: [//jsfiddle.net/ventie30/N9SFJ/](http://jsfiddle.net/ventie30/N9SFJ/)

只是为了给你更多信息，我有 3 行和 3 列，行由 40px 分隔。

# batch-file - 运行批处理文件后如何关闭命令行窗口？

> ID：14626178
> 
> 赞同：59
> 
> 时间：2013-01-31T12:47:42.223
> 
> 标签：batch-file, windows-7, batch-processing

我有一个批处理文件。完成运行后，即所有命令行都已执行，*cmd.exe*窗口保持打开状态。但是，我希望在批处理文件完成其工作后立即关闭它。

到目前为止，我已经尝试使用`exit`批处理文件中的命令来关闭 cmd 窗口（我在桌面上也有一个快捷方式），但它似乎不起作用：

```
tncserver.exe C:\Work -p4 -b57600 -r -cFE -tTNC426B
exit 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-31T12:53:47.180

它应该自动关闭，如果没有，则表示它卡在第一个命令上。

在您的示例中，它应该自动关闭（没有`exit`）或使用 . 显式关闭`exit`。我认为问题在于您运行的第一个命令没有正确返回。

作为解决方法，您可以尝试使用

```
start "" tncserver.exe C:\Work -p4 -b57600 -r -cFE -tTNC426B 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-31T13:01:01.893

你的代码绝对没问题。它只需要“exit 0”即可获得更干净的出口。

```
 tncserver.exe C:\Work -p4 -b57600 -r -cFE -tTNC426B
 exit 0 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-10T19:45:24.163

我添加了`start`and`exit`哪个有效。没有这两个它是行不通的

```
start C:/Anaconda3/Library/bin/pyrcc4.exe -py3 {path}/Resourses.qrc -{path}/Resourses_rc.py
exit 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-10-30T20:20:09.840

如果您只需要自己执行一个命令并且不需要等待，您应该尝试“cmd /c”，这对我有用！

```
cmd /c start iexplore "http://your/url.html" 
```

cmd /c 表示执行命令然后退出。

您可以通过在命令提示符下键入来了解开关的功能

```
anycmd /? 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-02-03T07:27:31.690

%启动的程序或命令% | taskkill /F /IM cmd.exe

**例子：**

记事本.exe | taskkill /F /IM cmd.exe

不幸的是，如果您打开了其他 cmd 窗口，它也会杀死它们。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-16T14:42:52.383

使用它来启动 Xming，将 bat 文件放在 Start->Startup 目录中，现在我在启动时运行 xming。

```
start "" "C:\Program Files (x86)\Xming\Xming.exe" -screen 0 -clipboard -multiwindow 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-30T20:50:36.253

为了关闭 cmd 窗口，尤其是在使用 Ctrl+C 结束 weblogic 或 JBOSS 应用服务器控制台之后，我在批处理文件中使用了“ `call`”命令而不是“ `start`”。我的*startWLS.cmd*文件看起来像：

```
call [BEA_HOME]\user_projects\domains\test_domain\startWebLogic.cmd 
```

Ctrl+C（和“Y”回答）后，cmd 窗口会自动关闭。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-07T22:52:12.700

我在搜索相同主题但对于 Windows 时遇到了这个问题所以，如果有人想知道如何在这里完成它

```
echo | set /p=Your Text 
```

输出：

```
Your Text 
```

我用它在剪贴板上保存数据，所以修剪文本是必要的它看起来像这样

```
echo | set /p=Text| clip 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-15T23:15:48.347

Max Lorens 的回答，目前是投票最少的回答，是唯一适用于我的特定脚本的回答。

我相信对于输出并在其中暂停的复杂脚本，例如“超时/t 4 /nobreak”，他的想法是最好的。简单地强制杀死 cmd.exe 可以/将弄乱在 cmd.exe 容器内运行后台进程的系统，而该命令只会杀死标题中带有 cmd.exe 的可见窗口。

作为参考，它是：

```
REM EXECUTE TASK KILL TO CLOSE CMD PROGRAM.-
wmic Path win32_process Where "Caption Like 'cmd%.exe'" Call Terminate 
```

将它放在批处理文件程序的最后一行代码中。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-06-17T18:52:16.270

```
REM EXECUTE TASK KILL TO CLOSE CMD PROGRAM.-
wmic Path win32_process Where "Caption Like 'cmd%.exe'" Call Terminate 
```

PD：把它放在你的批处理文件程序的最后一个代码行中。-

# alignment - 嘈杂文本语料库中的句子分割和对齐

> ID：14626185
> 
> 赞同：3
> 
> 时间：2013-01-31T12:48:14.233
> 
> 标签：alignment, nlp, corpus, text-segmentation, giza++

我有一个平行语料库，其中包含大约 100,000 个阿拉伯语和波斯语对齐的段落。

我的语料库是一个嘈杂的语料库，它的段落相互翻译不完整（即阿拉伯语段落的部分没有翻译成波斯语，标点符号也不匹配）。

为了将段落划分为句子，我使用了标点符号，但句子数量不匹配。

然后，我使用Microsoft Aligner 对齐句子，但结果确实是错误的。

如何分割和对齐语料库的句子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:47:09.987

您在问题中使用了 Giza++ 标签：您是否考虑过使用那里的对齐工具？我知道很多人使用的另一个选项是[Moses](http://www.statmt.org/moses/)，它是一个功能齐全的统计 MT 包，但我相信如果这真的是你想要的，你可以单独调用对齐模型。

# mmap - mmap local v/s nfs 文件：当底层文件在磁盘上被替换时会发生什么？

> ID：14626188
> 
> 赞同：3
> 
> 时间：2013-01-31T12:48:16.027
> 
> 标签：mmap, nfs

假设文件被大量替换（同名）而不是就地修改（即创建一个临时文件，然后重命名为文件名）。

我想更改不会影响本地 mmap，因为内核仍然具有磁盘上旧文件（inode）的句柄。

但是，由于 NFS 是无状态的，在 mmap 的（长）生命周期中，mmap 是否会混淆并混淆旧/新文件内容？

在我看来 read/readv 是处理 NFS 挂载文件的唯一安全方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:29:31.333

如果您有一个文件的开放引用，该引用将继续引用同一个文件，只要引用存在，即使文件本身被删除或重命名，即使它的名称在之后被全新的文件重用它被删除。引用可以是文件描述符或内存映射。这是 POSIX 的一部分，无论使用哪种类型的文件系统，它都是正确的（或者应该是！）。

换句话说：如果您在 NFS 文件系统上打开一个文件并将其映射到内存中，只要您不取消映射它，您就可以继续使用该内存映射，即使其他进程（或同一进程）删除该文件并将其替换为具有相同名称的新文件。

NFS 协议确实是无状态的，因此实现必须采取特殊步骤来确保正确处理这种情况。自从我查看它是如何完成的已经很长时间了，但是我最后一次这样做（在 Solaris 上）是通过将文件重命名为特殊的隐藏名称（`.nfsXXXXX`）而不是在链接计数减少到零时删除它们而完成仍然有对它们的公开引用。无论如何，无论实现使用什么技巧，作为文件系统的用户，您都不应该担心它。

# python - 在 Python 中的字典上实现 for 循环

> ID：14626189
> 
> 赞同：2
> 
> 时间：2013-01-31T12:48:20.760
> 
> 标签：python

> **可能重复：**
> [python 循环似乎不遵循顺序？](https://stackoverflow.com/questions/4123266/python-looping-seems-to-not-follow-sequence)
> [python以什么顺序显示字典键？](https://stackoverflow.com/questions/4458169/in-what-order-does-python-display-dictionary-keys)

```
d = {'x': 9, 'y': 10, 'z': 20}
for key in d: 
    print d[key] 
```

上面的代码每次运行时都会给出不同的输出。不是完全不同的输出，而是以不同的顺序输出。我使用 Aptana 3 多次执行代码。

**第一次执行：10 9 20**

**第二次处决：20 10 9**

**我还在在线 IDE [http://labs.codecademy.com](http://labs.codecademy.com)中执行了代码。那里的输出总是 10 9 20**

我只是想知道这是为什么。理想情况下，每次执行上述代码时它都应该打印 9 10 20 。请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:52:15.550

字典是键到值的映射；它没有订单。

你想要一个`collections.OrderedDict`：

```
collections.OrderedDict([('x', 9), ('y', 10), ('z', 20)])
Out[175]: OrderedDict([('x', 9), ('y', 10), ('z', 20)])

for key in Out[175]:
    print Out[175][key] 
```

但是请注意，字典排序*是*确定性的——如果您对同一个字典进行两次迭代，您将得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:50:55.480

字典是无序的集合。因此，理论上元素的顺序可能会随着您对其执行的每个操作而改变。如果您希望按顺序打印密钥，则必须在打印之前对其进行排序（即收集密钥然后对其进行排序）。

# jquery - 自定义函数上的jQuery回调

> ID：14626193
> 
> 赞同：0
> 
> 时间：2013-01-31T12:48:40.537
> 
> 标签：jquery, callback

我的自定义函数的回调不起作用。请问有人能帮我吗？

```
<html>
<body>
<script src='jquery-1.8.2.js'></script>
<script>
$(document).ready(function(e){
  function cb(){
    alert('animation finish');
  }
  $('button').bind({
    'click':function(e,cb){
        e.preventDefault();
        $('div').animate({'height':200,'width':200},1000);
        cb();
     }
  })
})
</script>
<style>
div{
  height:5px;width:5px;background-color:yellow;
}
</style>

<button>click me</button>
<div></div>

</body>
</html> 
```

**编辑：** 我做不到`.animate(...,1000,function(){...})` 我用了这条线

```
$('div').animate({'height':200,'width':200},1000); 
```

只是为了表示执行中的其他一些函数——它相对复杂，条件更多，并且根据各种参数调用不同的动画。

基本上，在所有这些动画结束之后，我想要一个结束函数`cb()`来执行；这就是我遇到问题的地方。

也许这样的事情是合适的：

```
<script>
$(document).ready(function(e){
  var status=0;
  var tmp1=2;tmp2=7;
  function cb(){
    alert('animation finish');
    console.log(status);
  }

  function do_func1(){
     status = tmp1+tmp2;
     $('#ele1').animate({'height':200,'width':200},1000);
  }
  function do_func2(){
     status = tmp1*tmp2;
     $('#ele2').animate({'height':300,'width':300},2000);
  }
  function do_func3(){
     status = tmp1+tmp1;
     $('#ele3').animate({'height':400,'width':400},500);
  }

  function func1(){
     if('a'=='b'){
         do_func1();
     }else if('a'=='c'){
         do_func2();
     }else{
         do_func3();
     }
  }

  $('button').on({
    'click':function(e,cb){
        e.preventDefault();
        func1();
        cb();
     }
  })
})
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:57:55.290

试试这个 ：

```
$(document).ready(function (e) {
  $('button').bind({
    'click': function (e) {
        $('div').animate({
            'height': 200,
            'width': 200
        }, 1000, function () {
            cb()
        });
        e.preventDefault();
    }
  })
})

function cb() {
alert('animation finish');
} 
```

例如：http: [//jsfiddle.net/xP25Q/2/](http://jsfiddle.net/xP25Q/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:51:05.450

您正在调用事件提供的回调函数，而不是您之前在单击事件处理程序中定义的回调函数。

如果要调用方法，可以在事件处理程序中重命名参数或重命名函数并更改方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:18:59.773

你可以做这样的事情

```
 <script>

    function cb(){
        alert('animation finish');
    }

    //-----------------------
    $(function()
      {
        $('button').on('click',function(e)
          {
              e.preventDefault();
              var steps=0;
              var totalSteps=5;    // for example

              var checking=setInterval(function()
                                       {
                                         if(steps===totalSteps)
                                         {
                                           cb();
                                           clearInterval(checking);
                                         }
                                       },30);

            $('div').animate({'height':200,'width':200},1000, function(){steps++;});
            $('div').animate({...  another animation  },1000, function(){steps++;});
            ...
            $('div').animate({...  another animation  },1000, function(){steps++;});

         })  // ..on
    }) // ready function
 </script> 
```

您还可以将其更改为`step++`您想要的任何其他内容，然后在检查函数中编写一个适当的条件以便对其采取行动......

# ios - 无法在 UIScrollView 中设置正确的 UIScrollView 大小

> ID：14626194
> 
> 赞同：0
> 
> 时间：2013-01-31T12:48:40.357
> 
> 标签：ios, objective-c, xcode, uiscrollview

我正在尝试创建一个聊天应用程序，为此我有一个具有聊天功能的 UIScrollView。而这个 UIScrollView 在另一个被禁用的 UIScrollView 内（这样当键盘出现时，整个视图都会向上滚动）。

所以我希望顶部 UIScrollView 内的文本一直到底部（可滚动）。

**编辑：像这样：http: [//i.imgur.com/dhXzTv0.png](http://i.imgur.com/dhXzTv0.png)**

但是看起来滚动视图并没有一直向下。

**编辑：像这样：http: [//i.imgur.com/ULUREI7.png](http://i.imgur.com/ULUREI7.png)**

有什么帮助吗？

PS：我不会以任何方式通过代码修改滚动视图。

提前致谢，

里卡多·阿门多埃拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:09:01.230

是否按照此屏幕截图设置了滚动视图的自动调整![在此处输入图像描述](../Images/4fbc126a19722944d6677b2c856415e9.png)大小，并且检查了 Autoresize Subviews

# scala - 将play项目打包成jar/war文件

> ID：14626195
> 
> 赞同：3
> 
> 时间：2013-01-31T12:48:44.560
> 
> 标签：scala, playframework, playframework-2.0, executable-jar, self-contained

有没有办法将播放项目打包成独立的 jar/war 文件？

（我发现的唯一方法是使用阶段任务，然后使用启动脚本运行服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:55:34.207

有一个名为 play2war 的插件可以做到这一点。在这里查看：[https ://github.com/dlecan/play2-war-plugin](https://github.com/dlecan/play2-war-plugin)

我自己没试过。。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:05:46.570

我个人觉得舞台任务非常好。

您还可以使用 dist 任务来创建一个包含所需内容的 zip 文件。（[https://plus.google.com/u/0/108788785914419775677/posts/5kNbVAE1ZYe](https://plus.google.com/u/0/108788785914419775677/posts/5kNbVAE1ZYe)）

要部署为 war 文件，请使用前面提到的 play2war 插件。但是将游戏应用程序部署为战争并不是最佳选择。要获得完整的表现，更喜欢舞台任务。

# r - R中的gputools - 无效的设备功能错误

> ID：14626196
> 
> 赞同：2
> 
> 时间：2013-01-31T12:48:43.883
> 
> 标签：r, cuda, gpu, nvidia

我已经安装了 Nvidia 显卡（GeForce GT 640 M）和 CUDA 5.0。然后我在 R 中安装了 gputools 包。该包安装完美，但是当我尝试在其中使用一个函数时，它给了我一个无效的设备功能错误。

```
require("gputools")
mat = matrix(runif(25),5,5)
gpuCor(mat)
Error in gpuCor(mat) : invalid device function 
In addition: Warning message:
In gpuCor(mat) : PMCC function : kernel finish and memcpy 
```

我已确保 cuda 示例可以正常工作，并且我自己的 cuda 脚本也可以正常工作。gpuMatMult 函数在包中工作（我检查了源文件，它没有任何设备函数）但带有设备函数的函数正在折腾。

以下是我的系统详细信息操作系统 - Ubuntu 12.04 Cuda - CUDA - 5.0 显卡 - NVIDIA GEFORCE GT 640 M RAM - 12 GB

还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:31:36.443

我找到了解决这个问题的方法。问题出在包的 makefile 中，编译架构是使用 (arch_compute = sm_10) 传递给编译器的，其中包的作者已经放入了应该处理大多数设备的架构列表。GeForce 640 M 出于某种原因不在该列表中。我删除了整个列表并且没有传递任何架构参数并且包安装得很好。

# iphone - 具有动态高度的tableview（每个部分）内的奇怪挑战UIScrollView

> ID：14626198
> 
> 赞同：0
> 
> 时间：2013-01-31T12:48:50.883
> 
> 标签：iphone, ios, objective-c, uitableview, uiscrollview

感谢您在我遇到困难时帮助我。

这完全是一个不同的挑战，我想显示类似于 tableview 使用的部分标题，我将不得不在每个部分中使用滚动视图。

我有大约 4-5 个部分，但是这些部分的内容和它们本身是动态的，如果没有数据，则不会显示它们，如果有任何数据，则显示一个部分及其相应的数据，但我每个部分都有一个滚动视图部分（1 部分中的 1 行）的 contentSize 基于内容是动态的（在我的情况下，这些是不同高度的动态图像）。

那么用新高度更新节行的最佳方法是什么，或者用新高度更新行单元格并相应地更新我相信的表格的内容大小的最佳方法是什么。

非常感谢，

雷诺琼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:37:56.407

你需要覆盖几个方法`uitableview`

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

在 viewForHeader 方法中，您可以创建一个单独的 .nib 文件，将其作为视图并正确配置数据以作为标题返回。并计算当然的高度

而且当然

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

再次，创建一个单独的 .nib 文件作为您的单元格视图，您可以简单地将滚动视图拖放到其中。并且您必须考虑要在单元格中显示的数据来计算高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:22:13.500

```
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {return calculatedHeight:} 
```

使用此 UITableView 委托方法来传递节标题的高度。

但是您需要重新加载 tableview 才能调用此函数。

此致。

# c# - 更改权限以在 windows8 中使用当前位置

> ID：14626201
> 
> 赞同：1
> 
> 时间：2013-01-31T12:48:53.860
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

在使用 c# 和 xaml 的 Metro 风格应用程序中，我想使用设备的位置信息。为此，我使用了以下代码。

```
var _geolocator = new Geolocator();
await _geolocator.GetGeopositionAsync(); 
```

在此之后显示一个消息框，其中包含两个选项允许和阻止。当我选择允许选项时，我得到当前位置信息。但我的问题是当我选择阻止时，我再次使用此代码后无法获得位置。当我先选择阻止然后使用此代码时，如何获取位置信息？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:04:46.777

当应用程序运行时，打开超级按钮 (start+c)，然后选择设置。

在设置窗格中选择权限 - 您应该在那里看到更改位置的选项。

# javascript - 表单元素样式

> ID：14626205
> 
> 赞同：-3
> 
> 时间：2013-01-31T12:49:10.053
> 
> 标签：javascript, css

我想为通常无法在旧浏览器中完成的所有表单元素设置样式 - 所以我问他们是否存在一个易于使用的 javascript 插件，可以轻松设置样式

检查按钮 - 单选按钮 - 选择列表

（需要在ie7和8中支持）

一个小提琴来做会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:52:39.273

IE7 和 8 支持 JQuery UI。它可能是最流行的插件。

[这里](http://jqueryui.com/)

# html - 背景图像上出现流氓白线

> ID：14626206
> 
> 赞同：4
> 
> 时间：2013-01-31T12:49:17.343
> 
> 标签：html, css

```
html {
    height: 100%;
    overflow: hidden;
    background:url('http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg')no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

弟兄们好。我一直试图让这个可扩展的背景图像在这个网站上工作，但是这个东西在左边有一条奇怪的流氓白线。

[http://jsfiddle.net/49n73/1/](http://jsfiddle.net/49n73/1/)

使用小提琴来了解问题，确保将“结果”窗口拉到尽可能大，这样你才能真正看到流氓线。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:41:37.973

这个问题似乎是一个缩放错误与`background-image`中心对齐相结合。

它可以通过更改来修复：

```
background:url('http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg')no-repeat center center fixed; 
```

对此：

```
background:url('http://farm9.staticflickr.com/8345/8208481483_fc6b1bdf7d_h.jpg')no-repeat 0 0 fixed; 
```

所以它所做的就是将`background-position`from更改`center center`为`0 0`。所以它总是从左上角开始缩放，并且永远不会在侧面留下间隙（白线）。

现场演示：http: [//jsfiddle.net/49n73/11/embedded/result/](http://jsfiddle.net/49n73/11/embedded/result/)

# .net - 是否有检测 .NET 探查器存在的 API？

> ID：14626208
> 
> 赞同：2
> 
> 时间：2013-01-31T12:49:35.547
> 
> 标签：.net, profiling, clr

我正在开发一个使用 Profiling API 即时重写 IL 指令的模拟工具。通常，我们的客户拥有不止一种使用 Profiling API 的商业产品，并且在许多情况下，我们的分析器不会被加载。

我想通过检测 .NET 分析器的存在来改善客户体验。如果找到第三方分析器，我想打印一条消息，帮助客户正确配置他们的环境。

到目前为止，我还没有找到一种可靠的方法来检测 .NET 探查器的存在。我考虑过解析 ID 为 1022 的 Windows 应用程序日志消息并尝试按进程 ID 进行匹配，但它似乎很不稳定。我检查了 SSCLI 实现，结果发现有一个函数**IsProfilerPresent()**可以进行所需的检查。我可以使用类似的公共 Microsoft API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:17:47.513

Microsoft 提供了一个[非托管分析](http://msdn.microsoft.com/en-us/library/ms404386.aspx)API，它使分析器能够通过公共语言运行时 (CLR) 监视程序的执行。API 引用两个环境变量，进程是否应该连接到分析器。这些是

> *   COR_ENABLE_PROFILING：仅当此环境变量存在且设置为 1 时，CLR 才会连接到分析器。
> *   COR_PROFILER：如果 COR_ENABLE_PROFILING 检查通过，CLR 将连接到具有此 CLSID 或 ProgID 的分析器，该 CLSID 或 ProgID 必须先前已存储在注册表中。COR_PROFILER 环境变量被定义为一个字符串。

取自[这里](http://msdn.microsoft.com/en-us/library/bb384689.aspx)

我不是分析应用程序的专家，但 API 似乎是您需要的来源。

# wpf - 无法将页面添加到我的项目

> ID：14626210
> 
> 赞同：2
> 
> 时间：2013-01-31T12:49:44.733
> 
> 标签：wpf, winforms, visual-studio-2012

我在 Visual Studio 中的一个项目是 WPF 项目。

我有创建的默认文件加上我添加的 2 个类和几个文件夹。

![在此处输入图像描述](../Images/b2aac00a267b85f48396f0e7f15c0211.png)

我遇到的问题是，当我尝试将 Window 添加到我的 View 文件夹时，我不能，因为我没有 Window （或页面）选项。

![在此处输入图像描述](../Images/2b79697b5b13ca728219ad8d548767bf.png)

如您所见，出于某种原因，尽管我的应用程序被创建为 WPF 项目，但它现在认为它是一个 WinForms 项目。

如何将其从 WinForms 还原/更改为 WPF 项目？

* * *

**编辑**
请注意，我使用的是 Visual Studio 2012 Premium。

如果我添加一个新的 WPF 项目，我会得到页面/窗口等选项，所以这个错误是项目特定的。

根据评论，这是我单击添加新项目时得到的屏幕（抱歉，我无法放入整个列表）

![在此处输入图像描述](../Images/129d0d65f42608bbf59e215e8918923f.png)

这是 WPF 菜单的视图

![在此处输入图像描述](../Images/c1dc5383ca42d38149f8122c6fb0cd31.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:01:33.900

手动编辑 proj 文件并为 C# 和 WPF 添加 ProjectTypeGuids。它应该是这样的：

```
<ProjectTypeGuids>{60dc8134-eba5-43b8-bcc9-bb4bc16c2548};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

重新加载项目后，您应该有 WPF 项目类型的正常选项。

有关 ProjectTypeGuids 的更多信息，请[点击此处](https://stackoverflow.com/questions/2911565/what-is-the-significance-of-projecttypeguids-tag-in-the-visual-studio-project-fi)。

# javascript - 无法访问对象的子属性。

> ID：14626211
> 
> 赞同：1
> 
> 时间：2013-01-31T12:49:45.410
> 
> 标签：javascript, jquery, jquery-mobile, backbone.js

我有一个 javascript 对象设置如下：

```
“someObject” : {
    “A” : { “id” : “323klj”, “name” : “subObject1”, “value” : “0” }
    “B” : { “id” : “63sdf”, “name” : “subObjectB”, “value” : “9” }
} 
```

我正在尝试访问子对象的“值”属性。但是，当我像这样访问它们时

```
console.log(someObject.A.value) 
```

结果未定义。

如果我尝试像这样将以下内容输出到控制台（一行接一行）

```
console.log(someObject)
console.log(someObject.A) 
console.log(someObject.A.value) 
```

在控制台中，我将看到以下内容：

-第一行：someObject 将按预期显示，所有子对象和属性都完好无损

-第二行：我将看到子对象 A，但是缺少“值”属性

-第三行：未定义。

我的问题是有人对可能导致这种情况发生的原因有任何想法吗？我很难解决这个问题，我什至不明白这怎么可能。我知道这应该在正常情况下工作。仅供参考：这是一个更大的主干应用程序的一部分，我也在其中使用 jquery mobile。这可能与这些框架之一有关吗？（实际代码太复杂，无法粘贴在这里，我只是想举个例子来说明发生了什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:09:38.653

这对我有用：

```
var someObject = {
    A : { id : "323klj", name : "subObject1", value : "0" },
    B : { id : "63sdf", name : "subObjectB", value : "9" }
}
console.log(someObject.A.value); //returns 0
console.log(someObject.B.value); //returns 9 
```

注意：复制粘贴您的文本我必须更改双引号，在我的浏览器中它们显示为“”所以我将它们更改为“

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:13:53.100

好吧，我最终使用了一种解决方法，所以我讨厌让其他人花时间在这个问题上并将其标记为已回答，但我仍然很困惑发生了什么......

# frameworks - Zend 框架 2 模块

> ID：14626224
> 
> 赞同：3
> 
> 时间：2013-01-31T12:50:20.333
> 
> 标签：frameworks, module, structure, zend-framework2

我是 Zend Framework 2 的新手。我几天前开始使用它。在过去的三天里，我一直在为模块结构而苦苦挣扎。我想要 2 个模块：主模块和管理员模块。

我有 application.config.php 文件：

```
return array(
    'modules' => array(
        'main', 'Administrator',
    ),
    'module_listener_options' => array(
        'module_paths' => array(
            './module',
            './vendor',
        ),
        'config_glob_paths' => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
    ),
); 
```

“管理员”模块的module.config.php：

```
return array(
    'router' => array(
        'routes' => array(
            'Administrator' => array(
                'type' => 'Literal',
                'options' => array(
                    'route' => '/administrator',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Administrator\Controller',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type' => 'Segment',
                        'options' => array(
                            'route' => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Administrator\Controller\Index' => 'Administrator\Controller\IndexController',
            'Administrator\Controller\Blogs' => 'Administrator\Controller\BlogsController',
            'Administrator\Controller\Design' => 'Administrator\Controller\DesignController',
            'Administrator\Controller\FAQ' => 'Administrator\Controller\FAQController',
            'Administrator\Controller\Interests' => 'Administrator\Controller\InterestsController',
            'Administrator\Controller\Main' => 'Administrator\Controller\MainController',
            'Administrator\Controller\Pages' => 'Administrator\Controller\PagesController',
            'Administrator\Controller\RSS' => 'Administrator\Controller\RSSController',
            'Administrator\Controller\Users' => 'Administrator\Controller\UsersController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions' => true,
        'doctype' => 'HTML5',
        'not_found_template' => 'error/404',
        'exception_template' => 'error/index',
        'template_map' => array(
            'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
            'administ/index/index' => __DIR__ . '/../view/administrator/index/index.phtml',
            'error/404' => __DIR__ . '/../view/error/404.phtml',
            'error/index' => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

和“主”模块的module.config.php：

```
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Main\Controller',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),
                ),
            ),
            'Main' => array(
                'type' => 'Literal',
                'options' => array(
                    'route' => '/main',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Main\Controller',
                        'controller' => 'Index',
                        'action' => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type' => 'Segment',
                        'options' => array(
                            'route' => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Main\Controller\Index' => 'Main\Controller\IndexController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions' => true,
        'doctype' => 'HTML5',
        'not_found_template' => 'error/404',
        'exception_template' => 'error/index',
        'template_map' => array(
            'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
            'main/index/index' => __DIR__ . '/../view/main/index/index.phtml',
            'error/404' => __DIR__ . '/../view/error/404.phtml',
            'error/index' => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

这是我的文件结构： ![结构体](../Images/a206556193457a60a8c5fedb0817e7fa.png)

**我稍微编辑了这篇文章**。现在看来，现在的问题只出在布局上。无论我打开什么，它都会显示“管理员”模块的布局和正确的页面内容（或错误消息，这取决于控制器/模块/操作是否存在）。所以问题似乎只出在布局上。

PS当我首先在application.config.php中列出管理员模块时：

```
'modules' => array(
    'Administrator', 'Main'
), 
```

它仅显示“主”模块布局，反之亦然 - 当“主”是模块数组中的第一个元素时 - 管理员布局随处可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:13:37.790

```
'view_manager' => array(
    'display_not_found_reason' => true,
    'display_exceptions' => true,
    'doctype' => 'HTML5',
    'not_found_template' => 'error/404',
    'exception_template' => 'error/index',
    'template_map' => array(

        // The following key will be overriden, and the last loaded module config
        // is the one used, just comment it (for both modules config) the default 
        // behavior will pick-up the default/conventional layout.

        //'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',

        'administ/index/index' => __DIR__ . '/../view/administrator/index/index.phtml',
        'error/404' => __DIR__ . '/../view/error/404.phtml',
        'error/index' => __DIR__ . '/../view/error/index.phtml',
    ),
    'template_path_stack' => array(
        __DIR__ . '/../view',
    ),
), 
```

# android - 无法从 Util 类型对非静态方法 getIMEI() 进行静态引用

> ID：14626228
> 
> 赞同：1
> 
> 时间：2013-01-31T12:50:27.083
> 
> 标签：android, exception, imei

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String test =  Util.imei();
}

import android.content.Context;
import android.telephony.TelephonyManager;

public class Util{
    Context context;

    public Util(Context context) {
        this.context = context;
    }

    public String imei() {
        TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        return telephonyManager.getDeviceId();
    }
} 
```

出现错误“无法从 Util 类型对非静态方法 imei() 进行静态引用”。如果我将行更改为：

```
public static String imei() {
    ...
    static Context context; 
```

我收到错误并崩溃应用程序。（“E/AndroidRuntime(629): Caused by:java.lang.NullPointerException”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:58:14.597

两种写法：

**第一个** *非静态*

```
public class Util {
    Context context;

    public Util(Context context) {
        this.context = context;
    }

    public String imei() {
        TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        return telephonyManager.getDeviceId();
    }
} 
```

然后在`onCreate`方法中

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Util u = new Util(this);
    String test =  u.imei();
} 
```

**第二个** *静态*

```
public class Util {
    public static String imei(Context context) {
        TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        return telephonyManager.getDeviceId();
    }
} 
```

然后在`onCreate`方法中

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String test =  Util.imei(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:53:09.677

在访问其方法之前，首先创建 Util 类的引用。

```
Util util = new Util();
String _imei = util.imei(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:02:28.027

您正在尝试访问类中的方法而不为它创建对象。只有静态方法我们可以这样调用。在您的情况下，为该对象创建一个对象`Util`并调用`imei()`该对象。

像，

```
Util utilObj = new Util();
String imei = utilObj.imei(); 
```

希望这可以帮助。

# java - 如何在java中按升序对xml代码进行排序

> ID：14626229
> 
> 赞同：1
> 
> 时间：2013-01-31T12:50:29.637
> 
> 标签：java, android

下面是我需要按升序显示“节点名称”的 XML 代码。

XML：

```
<node label="Tree Data">
<node name="View" type="Page">
<node name="Organisational Structure" type="Page"/>
<node name="Experience" type="Page"/>
<node name="Expertise" type="Language">
<node name="Flex" type="Language"/>
<node name="Android" type="Language"/>
<node name="Java" type="Language"/>
</node>
<node name="Project" type="Project">
<node name="Sabre" type="Project"/>
<node name="Android Project" type="Project"/>
<node name="Media Framework" type="Project"/>
<node name="CCD" type="Project"/>
<node name="Redbus" type="Project"/>
<node name="India Today" type="Project"/>
<node name="Money Control" type="Project"/>
</node>
</node>
<node name="Reorganize" type="Action"/>
<node name="Add New Employee" type="Action">
<node name="Dir" type="Page"/>
<node name="P.M" type="Page"/>
<node name="S.E" type="Page"/>
<node name="JUN" type="Page"/>
<node name="EMP" type="Page"/>
</node>
<node name="Add Project Members" type="Action"/>
</node> 
```

以下是我的java代码：

JAVA代码：

```
import java.io.IOException;
        import java.io.StringWriter;
        import java.net.URL;
        import java.util.ArrayList;
        import java.util.Collections;
        import java.util.List;

        import javax.xml.parsers.DocumentBuilder;
        import javax.xml.parsers.DocumentBuilderFactory;
        import javax.xml.parsers.ParserConfigurationException;
        import javax.xml.transform.OutputKeys;
        import javax.xml.transform.Transformer;
        import javax.xml.transform.TransformerException;
        import javax.xml.transform.TransformerFactory;
        import javax.xml.transform.dom.DOMSource;
        import javax.xml.transform.stream.StreamResult;

        import org.w3c.dom.Document;
        import org.w3c.dom.Element;
        import org.w3c.dom.NamedNodeMap;
        import org.w3c.dom.Node;
        import org.w3c.dom.NodeList;
        import org.xml.sax.InputSource;
        import org.xml.sax.SAXException;

        import android.os.Bundle;
        import android.app.Activity;
        import android.view.Menu;

        public class MainActivity extends Activity {

            Document dom;

            public MainActivity() {
                MainActivity();

                ArrayList<Element> listGroup = getGroups();

            }

            private ArrayList getGroups() {
                try {
                    Element documentElement = (Element) dom.getDocumentElement();
                    System.out.println("root element is :"+documentElement.getNodeName());
                    NodeList childNodes = documentElement.getElementsByTagName("node");

                    for (int i = 0; i < childNodes.getLength(); i++) {

                        if (childNodes.item(i).getNodeType() == Node.ELEMENT_NODE) {
                            Element element = (Element) childNodes.item(i);
                            if(((Element) childNodes.item(i)).hasAttribute("name")) {
                            String name = element.getAttribute("name");
                            String type = element.getAttribute("type");
                            System.out.println("name : " + name);
                            System.out.println("type : " + type);
                        }}
                    }
                } catch (Exception e) {
                }
                return null;

            }

            private void MainActivity() {
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

                try {
                    String sURL = "huhhadjdhjshdjks.com";
                    URL url = new URL(sURL);
                    DocumentBuilder db = dbf.newDocumentBuilder();

                    dom = db.parse(new InputSource(url.openStream()));

                } catch (ParserConfigurationException pce) {
                    pce.printStackTrace();
                } catch (SAXException se) {
                    se.printStackTrace();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }
            }
        } 
```

我得到以下输出：

日志猫：

```
01-31 17:45:59.330: I/System.out(1871): root element is :node
01-31 17:45:59.340: I/System.out(1871): name : View
01-31 17:45:59.360: I/System.out(1871): type : Page
01-31 17:45:59.380: I/System.out(1871): name : Organisational Structure
01-31 17:45:59.380: I/System.out(1871): type : Page
01-31 17:45:59.400: I/System.out(1871): name : Experience
01-31 17:45:59.400: I/System.out(1871): type : Page
01-31 17:45:59.400: I/System.out(1871): name : Expertise
01-31 17:45:59.400: I/System.out(1871): type : Language
01-31 17:45:59.400: I/System.out(1871): name : Flex
01-31 17:45:59.410: I/System.out(1871): type : Language
01-31 17:45:59.410: I/System.out(1871): name : Android
01-31 17:45:59.420: I/System.out(1871): type : Language
01-31 17:45:59.420: I/System.out(1871): name : Java
01-31 17:45:59.430: I/System.out(1871): type : Language
01-31 17:45:59.430: I/System.out(1871): name : Project
01-31 17:45:59.430: I/System.out(1871): type : Project
01-31 17:45:59.440: I/System.out(1871): name : Sabre
01-31 17:45:59.440: I/System.out(1871): type : Project
01-31 17:45:59.440: I/System.out(1871): name : Android Project
01-31 17:45:59.450: I/System.out(1871): type : Project
01-31 17:45:59.450: I/System.out(1871): name : Media Framework
01-31 17:45:59.460: I/System.out(1871): type : Project
01-31 17:45:59.460: I/System.out(1871): name : CCD
01-31 17:45:59.460: I/System.out(1871): type : Project
01-31 17:45:59.460: I/System.out(1871): name : Redbus
01-31 17:45:59.460: I/System.out(1871): type : Project
01-31 17:45:59.460: I/System.out(1871): name : India Today
01-31 17:45:59.480: I/System.out(1871): type : Project
01-31 17:45:59.480: I/System.out(1871): name : Money Control
01-31 17:45:59.489: I/System.out(1871): type : Project
01-31 17:45:59.489: I/System.out(1871): name : Reorganize
01-31 17:45:59.500: I/System.out(1871): type : Action
01-31 17:45:59.500: I/System.out(1871): name : Add New Employee
01-31 17:45:59.500: I/System.out(1871): type : Action
01-31 17:45:59.500: I/System.out(1871): name : Dir
01-31 17:45:59.500: I/System.out(1871): type : Page
01-31 17:45:59.510: I/System.out(1871): name : P.M
01-31 17:45:59.510: I/System.out(1871): type : Page
01-31 17:45:59.510: I/System.out(1871): name : S.E
01-31 17:45:59.530: I/System.out(1871): type : Page
01-31 17:45:59.530: I/System.out(1871): name : JUN
01-31 17:45:59.530: I/System.out(1871): type : Page
01-31 17:45:59.530: I/System.out(1871): name : EMP
01-31 17:45:59.530: I/System.out(1871): type : Page
01-31 17:45:59.530: I/System.out(1871): name : Add Project Members
01-31 17:45:59.530: I/System.out(1871): type : Action 
```

我需要所有的名字都按升序排列。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:08:50.137

创建一个变量`items`来存储`name`和`type`：

```
Map<String, String> items = new HashMap<>();
items.put(name, type); 
```

排序`names`：

```
List<String> keys = new ArrayList(items.keySet());
Collections.sort(keys); 
```

然后输出它们：

```
for (String key : keys) {
    System.out.println("name : " + key);
    System.out.println("type : " + items.get(key));        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:53:31.370

您将其加载到数组中并对其进行排序。XML 以两种方式读取（通常）。

1.）您构建一棵树（DOM），因此它不是按升序排列的。您可以进行树遍历并对结果进行排序。

2.) SAX 喜欢解析它解析标签的位置，您需要进行一些处理，但在读取文档时占用的内存量非常少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:10:18.063

这是一个递归元素排序器。不幸的是，它只适用于 XOM 元素。

```
private void sortElement(Element e) {
  // Remove them all.
  Nodes nodes = e.removeChildren();

  // Sort them.
  Map<String, List<Element>> sorted = new TreeMap<String, List<Element>>();
  for (int i = 0; i < nodes.size(); i++) {
    Node n = nodes.get(i);
    if (n instanceof Element) {
      Element it = (Element) n;
      // Get it sorted.
      sortElement(it);
      // Key it by name and then its xml.
      String key = it.getLocalName() + "!" + it.toXML();
      // Add it.
      List<Element> in = sorted.get(key);
      if (in == null) {
        in = new ArrayList<Element>();
      }
      in.add(it);
      sorted.put(key, in);
    }
  }
  // Add them all back in.
  for (Entry<String, List<Element>> entry : sorted.entrySet()) {
    for (Element a : entry.getValue()) {
      e.appendChild(a);
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T22:55:45.483

在这里您可以找到[静态方法 sortNodes](https://stackoverflow.com/questions/726395/order-of-xml-attributes-after-dom-processing/32575759#32575759)以按任何属性对 NodeList 进行排序

以及简单的 XML 示例：

```
*** Sort by id ***
1 : 100.00
2 : 5.10
3 : 29.99
*** Sort by price ***
2 : 5.10
3 : 29.99
1 : 100.00 
```

希望能帮助到你。

# sql-server-2008-r2 - Orchard CMS 在尝试更新任何内容时给出 Sql Server 错误

> ID：14626231
> 
> 赞同：1
> 
> 时间：2013-01-31T12:50:34.467
> 
> 标签：sql-server-2008-r2, orchardcms

我已经获取了一个实时 Orchard 网站并将其放在开发机器上。数据库在 Sql Server 2008r2 上运行。

登录并从数据库中检索按预期工作，但是当我尝试编辑任何内容（电子邮件设置、内容部分）时，我收到以下 SQL 错误：-

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP Provider，错误：0 - 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。）

Orchard 日志文件中没有错误。

SQL Server 上启用了命名管道和 TCP/IP。这可能是什么原因造成的？

# wcf - WCF - 为单个 OperationContract 设置 MaxReceivedMessageSize

> ID：14626233
> 
> 赞同：2
> 
> 时间：2013-01-31T12:50:36.367
> 
> 标签：wcf, wcf-binding

是否可以为单个 OperationContract 而不是为绑定到绑定的所有 ServiceContract 全局设置 WCF 绑定的 MaxReceivedMessageSize？我的 ServiceContract 中有大约两打操作，其中只有一个可能会接收大于默认值的（流式传输的）消息，并且我想将所有其他操作的默认消息大小保留为简单的 DoS 保护机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T06:17:29.120

一种可能的解决方案可能是您可以通过对特定操作/方法进行编码来添加绑定。

# servicestack - RouteAttribute, AttributeUsage, Inherited = true

> ID：14626235
> 
> 赞同：4
> 
> 时间：2013-01-31T12:50:37.773
> 
> 标签：servicestack

我目前在 DTO 之间有继承，只要我为每个具体（叶节点）DTO 定义了一个 [Route]，而不是在某个超类上，它就可以很好地工作。到目前为止，超类都是抽象的。现在我的情况是，我有一个具体的 DTO，并且定义了一个 [Route] 属性，它也是另一个具有自己路由的 DTO 的超类。

两个 DTO 都有自己的服务，但不能按预期工作。两个 DTO 都“路由”到叶节点。

```
superclass DTOA
subclass DTOB where DTOB : DTOA 
```

当我在 DTOA 上执行 GET 时，响应的是 DTOB 的服务。除了对我的继承进行不同的建模之外，我怎样才能修复路由按我希望的那样工作？

所以：

```
DTOA routed to serviceA
DTOB routed to serviceB 
```

发生这种情况是因为 RouteAttributes 是继承的吗？RouteAttribute 上有 Inherited = true 的原因是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T13:51:34.423

不要在请求 DTO 中使用继承。[从一开始就继承 DTO 是个坏主意](https://stackoverflow.com/a/10759250/85785)，在为每个服务定制的请求 DTO 中应该特别避免它们。

Route 属性可以应用于服务和/或请求 DTO，并支持允许继承的[新 API和旧 API。](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)

# c# - 如何计算xna中目标光标的位置和方向？

> ID：14626248
> 
> 赞同：0
> 
> 时间：2013-01-31T12:51:15.787
> 
> 标签：c#, xna, cursor, position, game-engine

我开发了一个像“我的世界”这样的小游戏。我在光标方向的计算上停留了几天。让我解释。我想用我的光标在屏幕中间定位一个立方体，然后单击它使其消失。但我没有看到任何如何恢复这些信息..有人可以指点我一个“示例/教程”或解释吗？非常感谢你。

我的截屏图片游戏： ![在此处输入图像描述](../Images/911b108c1cf912e5efff029a79d2b792.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:00:04.937

当然，这在很大程度上取决于您如何组织数据。但是，如果您将多边形和网格存储在某处（我不是在谈论顶点缓冲区！！），就像在八叉树中一样，您可以执行以下操作：

您从您的相机设置中创建一条射线并通过您的场景“发射”它。通常可以扩展八叉树或类似结构以轻松进行射线测试以返回命中元素。当然，您可以暴力迭代所有四边形，但这很快就会成为性能瓶颈。从那里您可以将结果用于您想要的任何东西。

这整个过程通常被称为“挑选”，[这](http://ghoshehsoft.wordpress.com/2010/11/25/xna-picking-tutorial-part-i/)是一个非常好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:03:41.380

我对其中的大部分内容不以为然——这是我在我的 3D XNA 游戏中使用的，并且它有效。这些评论是相当解释性的。基本上，它`Ray`从您的光标位置投射一条直线并检查它是否`Intersects()`是任何地图对象的边界球（`Unit`在这种情况下为 s ）

```
 /// <summary>
    /// Creates a Ray translating screen cursor position into screen position
    /// </summary>
    /// <param name="projectionMatrix"></param>
    /// <param name="viewMatrix"></param>
    /// <returns></returns>
    public Ray CalculateCursorRay(Matrix projectionMatrix, Matrix viewMatrix)
    {
        // create 2 positions in screenspace using the cursor position. 0 is as
        // close as possible to the camera, 1 is as far away as possible.
        Vector3 nearSource = new Vector3(mousePosition, 0f);
        Vector3 farSource = new Vector3(mousePosition, 1f);

        // use Viewport.Unproject to tell what those two screen space positions
        // would be in world space. we'll need the projection matrix and view
        // matrix, which we have saved as member variables. We also need a world
        // matrix, which can just be identity.
        Vector3 nearPoint = GraphicsDevice.Viewport.Unproject(nearSource,
            projectionMatrix, viewMatrix, Matrix.Identity);

        Vector3 farPoint = GraphicsDevice.Viewport.Unproject(farSource,
            projectionMatrix, viewMatrix, Matrix.Identity);

        // find the direction vector that goes from the nearPoint to the farPoint
        // and normalize it....
        Vector3 direction = farPoint - nearPoint;
        direction.Normalize();

        // and then create a new ray using nearPoint as the source.
        return new Ray(nearPoint, direction);
    }

    private Vector3 cursorRayToCoords(Ray ray, Vector3 cameraPos)
    {
        Nullable<float> distance = ray.Intersects(new Plane(Vector3.Up, 0.0f));
        if (distance == null)
            return Vector3.Zero;
        else
        {
            return cameraPos + ray.Direction * (float)distance;
        }
    }

    public override void Update(GameTime gameTime)
    {
        cursorRay = CalculateCursorRay(camera.Projection, camera.View);
        cursorOnMapPos = cursorRayToCoords(cursorRay, cursorRay.Position);
        checkInput(gameTime);

        base.Update(gameTime);
    }

    /// <summary>
    /// Returns the nearest unit to the cursor
    /// </summary>
    /// <returns>The unit nearest to the cursor</returns>
    private Unit getCursorUnit()
    {
        Unit closestUnit = null;
        float? nearestDistance = null;
        float? checkIntersect = null;

        foreach (Unit unit in map.Units)//checks to see if unit selection
        {
            checkIntersect = cursorRay.Intersects(unit.BoundingSphere);
            if (checkIntersect != null)//if intersection detected
            {
                if (nearestDistance == null) //first unit found
                {
                    closestUnit = unit;
                    nearestDistance = (float)checkIntersect;
                }
                else if ((float)checkIntersect < (float)nearestDistance)//for any others, only find the nearest
                {
                    closestUnit = unit;
                    nearestDistance = (float)checkIntersect;
                }
            }
        }

        return closestUnit;
    } 
```

# ssrs-2008 - 导出为 PDF - 多页

> ID：14626256
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:51:38.647
> 
> 标签：ssrs-2008, reporting, reporting-services, export-to-pdf

我创建了一份包含各种子报告的报告。我在报告中设置了以下属性页面大小和交互式大小，以及正文中的页面大小，全部为 A4 大小。当我导出为 pdf 时，它会为呈现的报告中的每一页创建多个页面，切割表格并放入另一个页面。与我在报告中看到的相比，字体大小很大。

有人有解决这个问题的建议吗？这似乎是问题的大小，但是一旦你将所有东西都设置为 A4，我看不出还有什么可以做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:54:22.883

我认为您的问题是 ssrs 的正常行为，让我解释一下：

如果您有一个主报告，可以说其中有 1 个子报告。并且您的子报表是一个表格，那么您的表格行会导致此问题：在主报表中，子报表可能看起来像一个小矩形。实际的子报表包含一个可以根据数据量增长的表。 ![在此处输入图像描述](../Images/94229340c3b17ddf11061607f3bd8a3a.png)

解决方案很简单：

*   如果您知道表的最大记录，并且您设法适应子报表的大小 - 您很好。

*   附加选项是定义子报表的`canGrow`属性（在主报表中）

# php - 在 php 中检索扩展版本

> ID：14626262
> 
> 赞同：27
> 
> 时间：2013-01-31T12:51:47.037
> 
> 标签：php, php-extension

是否可以在 php 中获取扩展版本？

`get_loaded_extensions`仅返回加载的扩展名，但不返回版本:(

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-31T12:53:35.013

我相信这就是您正在寻找的：

`$version = phpversion("extensionName");`

[更多信息](http://php.net/manual/en/function.phpversion.php)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-09-29T16:21:43.790

在命令行中，*extension*是扩展名。

`php --re extension | head -1`

如果不确定扩展名，请使用 列出扩展名`php -m`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T04:56:39.380

[http://php.net/manual/en/reflectionextension.getversion.php](http://php.net/manual/en/reflectionextension.getversion.php)

```
<?php
    $ext = new ReflectionExtension('mysqli');
    var_dump($ext->getVersion());
?> 
```

# java - 应用程序服务器设置的 Cookie 带有双引号

> ID：14626263
> 
> 赞同：6
> 
> 时间：2013-01-31T12:51:52.230
> 
> 标签：java, servlets, cookies, jetty

我正在尝试在 Servlet 响应中设置一个值为 unkown#4?Wn5pZ1JwQnlLEGRJAgB4WQU%3D 的 cookie。

但是，当我在浏览器中设置 cookie 时，它​​会返回带有引号，如下所示：

“未知#4？Wn5pZ1JwQnlLEGRJAgB4WQU%3D”。

为什么会这样？我们使用 Jetty 作为应用服务器。

我会把我写的代码

```
String cookieValue = "unkown#4?Wn5pZ1JwQnlLEGRJAgB4WQU%3D";
Cookie zedoCookie = new Cookie("cookiename", cookieValue);
zedoCookie.setMaxAge(31536000); // this is one year duration.
zedoCookie.setDomain("somedomain.com");
zedoCookie.setPath("/");
response.addCookie(zedoCookie); 
```

有人可以对此有所了解吗？

我已经看过[了](https://stackoverflow.com/questions/14582334/java-cookies-and-double-quoted-marks)。但这似乎并没有解决我的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T18:52:51.100

Jetty 8（或更早版本）似乎将以下字符视为 Cookie 中不允许的字符：（`"\\n\r\t\f\b%+ ;=`HttpFields [-](https://github.com/eclipse/jetty.project/blob/e1c516c7d1937b8604864dfe57236877ef5be4ea/jetty-http/src/main/java/org/eclipse/jetty/http/HttpFields.java) > `__COOKIE_DELIM`）。如果这些字符之一包含在 cookie 的值中，则该值将在 HTTP-Header 中用双引号引起来。URL-Encoding 不能解决问题，从那时起你仍然会有`%`字符在里面。对我来说，这似乎是一个错误。我向[Jetty 邮件列表](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03095.html)发布了一个问题。邮件列表上还有另一篇文章，解释了 Jetty 版本 9 中为什么会提出 cookie 版本。

# windows-phone-7 - Windows Phone 7.0 类库的计划任务

> ID：14626265
> 
> 赞同：4
> 
> 时间：2013-01-31T12:52:04.483
> 
> 标签：windows-phone-7, scheduled-tasks, class-library, background-agent

大家
好，我想将计划任务工具添加到我的类库中。用户应该能够定期获取位置，并且他应该能够使用我的类库中的类来确定时间间隔。它必须与 Windows Phone 7.0 兼容。我找到了一些使用 Microsoft.Phone.Schedule 命名空间的解决方案，但它仅适用于 7.1 和 8，我无法将其添加到我的 7.0 库中。[此链接](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202941%28v=vs.105%29.aspx)为 7.1 和 8 提供了解决方案。有什么方法可以在 Windows Phone 7.0 中完成这项工作。
提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:44:10.910

不是一个真正的答案.. 但你为什么不将你的图书馆升级到 7.1？这将使您的许多想法变得更容易。无需维护 7.0 应用程序，因为 7.1 是强制性的，只有运行 7.1 的设备才能从商店下载应用程序。

# iphone - uitableviewcell中的文本对齐不均？

> ID：14626268
> 
> 赞同：0
> 
> 时间：2013-01-31T12:52:15.243
> 
> 标签：iphone, objective-c, uitableview

这是我的`UItableView`样子：

![在此处输入图像描述](../Images/fe6292d243b61046f8587e79e296609e.png)

最后一个单元格**可乐**与其他单元格没有正确对齐。我怎样才能解决这个问题？

这是我的所有代码：

```
#import "SearchViewController.h"

@interface SearchViewController ()
{
    NSMutableArray *filteredStrings;
    NSMutableArray *arrayDataFromServer;
    NSMutableArray *totalStrings;
    BOOL isFiltered;
}

@end

@implementation SearchViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.SearchBar.delegate = self;
    self.tableView.delegate = self;
    self.tableView.dataSource = self;

    NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/Search.php?choice=name"];
    NSArray *arrayImagesNames = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:strURL]];

    arrayDataFromServer = [[NSMutableArray alloc]init];

    NSEnumerator *enumForNames = [arrayImagesNames objectEnumerator];

    id objName;

    while ( objName = [enumForNames nextObject]) {
       [arrayDataFromServer addObject:[NSDictionary dictionaryWithObjectsAndKeys:objName, @"name", nil]];
    }

}

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    NSString *strURL = [NSString stringWithFormat:@"http://localhost:8888/Search.php?choice=name"];
    NSArray *arrayImagesNames = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:strURL]];
    NSLog(@"%@", arrayImagesNames);

    if (searchText.length == 0)
    {
        isFiltered = NO;
    }
    else
    {
        isFiltered = YES;

        filteredStrings = [[NSMutableArray alloc]init];

        for (NSString *str in arrayImagesNames)
        {
            NSRange stringRange = [str rangeOfString:searchText options:NSCaseInsensitiveSearch];

            if (stringRange.location != NSNotFound)
            {
                [filteredStrings addObject:str];
            }
        }
    }
    [self.tableView reloadData];

}

-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self.SearchBar resignFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
    // Return the number of rows in the section.
    if (isFiltered)
    {
        return [filteredStrings count];
    }
    return [arrayDataFromServer count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    if (!isFiltered)
    {

        NSString *nn = [[arrayDataFromServer objectAtIndex:indexPath.row] objectForKey:@"name"];
        cell.textLabel.text = nn;

    }
    else
    {
        cell.textLabel.text = [filteredStrings objectAtIndex:indexPath.row];
    }

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    return cell;
} 
```

我使用 SearchBar 搜索单元格。单元格中的所有信息都是从服务器调用的。我尝试使用普通数组`..@"1", @"2", @"3"...,nil];`并且文本正确对齐。

任何帮助将不胜感激！提前致谢！

我使用 NSLog 来显示数组：

![在此处输入图像描述](../Images/2e744fc3693c2161a64b2b79db7ba407.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:02:32.337

设置文本时，在 cellForRowAtIndexPath 中尝试以下操作。

```
cell.textLabel.text = [someText stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:16:17.360

你可以试试这个

```
cell.textAlignment = UITextAlignmentLeft; 
```

# jquery - 更新面板淡出中的asp.net jquery单选按钮列表

> ID：14626270
> 
> 赞同：0
> 
> 时间：2013-01-31T12:52:26.050
> 
> 标签：jquery, asp.net, fadeout

我更新了我的帖子，以便向您展示 html。顺便谢谢

我想单击提交按钮，这将使`Radiobuttonlist`淡出。我尝试了很多事情，但无法做到。

```
<div id="ctl00_ContentPlaceHolder1_UpdatePanel1">

                                                    <span>Looking at the image attached, what is the most likely diagnosis?</span>
                                                    <br />
                                                    <br />
                                                    <table id="ctl00_ContentPlaceHolder1_rbl_poll" border="0">
    <tr>
        <td><input id="ctl00_ContentPlaceHolder1_rbl_poll_0" type="radio" name="ctl00$ContentPlaceHolder1$rbl_poll" value="Item 1" /><label for="ctl00_ContentPlaceHolder1_rbl_poll_0">Item 1</label></td>
    </tr><tr>
        <td><input id="ctl00_ContentPlaceHolder1_rbl_poll_1" type="radio" name="ctl00$ContentPlaceHolder1$rbl_poll" value="Item 2" /><label for="ctl00_ContentPlaceHolder1_rbl_poll_1">Item 2</label></td>
    </tr><tr>
        <td><input id="ctl00_ContentPlaceHolder1_rbl_poll_2" type="radio" name="ctl00$ContentPlaceHolder1$rbl_poll" value="Item 3" /><label for="ctl00_ContentPlaceHolder1_rbl_poll_2">Item 3</label></td>
    </tr><tr>
        <td><input id="ctl00_ContentPlaceHolder1_rbl_poll_3" type="radio" name="ctl00$ContentPlaceHolder1$rbl_poll" value="Item 4" /><label for="ctl00_ContentPlaceHolder1_rbl_poll_3">Item 4</label></td>
    </tr>
</table>
                                                    <br />
                                                    <br />
                                                    <input type="submit" name="ctl00$ContentPlaceHolder1$btn_poll_submit" value="Button" onclick="fadePoll();" id="ctl00_ContentPlaceHolder1_btn_poll_submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:08:01.480

您可以使用此代码

```
$("*[name$='ctl00$ContentPlaceHolder1$rbl_poll'").attr("disabled", "disabled"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:12:35.017

我做了一些更改，现在我可以在 btn_poll_submit click 上看到它的淡出

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >
    <ContentTemplate>
        <asp:RadioButtonList ID="rbl_poll" runat="server">
            <asp:ListItem>Item 1</asp:ListItem>
            <asp:ListItem>Item 2</asp:ListItem>
            <asp:ListItem>Item 3</asp:ListItem>
            <asp:ListItem>Item 4</asp:ListItem>
        </asp:RadioButtonList>

        <asp:Button ID="btn_poll_submit" runat="server" Text="Button" />
    </ContentTemplate>
</asp:UpdatePanel>

 <script type="text/javascript" language="javascript">    
     $(document).ready(function () {

         $("input[id$=btn_poll_submit]").click(function (e) {    
             $("table[id$='rbl_poll']").fadeOut();
             e.preventDefault();
         });
     });         
</script> 
```

# video - 在本机视频应用 WinRT 中播放视频 URL

> ID：14626271
> 
> 赞同：0
> 
> 时间：2013-01-31T12:52:30.807
> 
> 标签：video, windows-runtime, live

我们如何通过 C# 代码在原生视频应用程序中打开视频 URL？

谢谢，卡维特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:11:58.057

`Launcher.LanuchUriAsync`会为你做这件事。您可以参考[MSDN](http://msdn.microsoft.com/en-gb/library/windows/apps/hh701484.aspx)以获取更多信息，但以下内容应该可以解决问题：-

```
// The URI to launch
string uriToLaunch = @"MICROSOFTVIDEO://www.example.com/myFile.wmv";
var uri = new Uri(uriToLaunch);

async void DefaultLaunch()
{
   // Launch the URI with a warning prompt
   var success = await Windows.System.Launcher.LaunchUriAsync(uri);    
} 
```

# vb.net - 在 Combobox 中查找最大字符串

> ID：14626274
> 
> 赞同：1
> 
> 时间：2013-01-31T12:52:34.443
> 
> 标签：vb.net, visual-studio-2010

我正在尝试根据组合框项目中的最大字符串来更改组合框的 DropDownWidth 。下面的代码返回所有项目的最大字符串长度。

```
 Dim maxStringLength As Integer = cboDt.AsEnumerable().
                  SelectMany(Function(row) row.ItemArray.OfType(Of String)()).
                  Max(Function(str) str.Length) 
```

cboDt 是附加到组合框的数据表。
我想返回实际的字符串。例如，如果组合框项目是：
“aaa”
“bbbb”
“ccccc”
我的代码返回maxStringLength = 5（因为5是所有项目的最大字符数-这里是ccccc）我希望代码重新调整“ccccc”（当然在字符串变量中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:57:02.273

按字符串长度降序排列列表，然后取第一个结果。

```
Dim maxStringLength As Integer = 
    cboDt.AsEnumerable().
    SelectMany(Function(row) row.ItemArray.OfType(Of String)()).
    OrderByDescending(Function(str) str.Length).
    First()  ' You can use FirstOrDefault here, if you are
             ' not certain there will be a result. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:07:34.247

假设 的第一列`DataTable`显示在`ComboBox`：

```
Dim maxStringLength As Integer = cboDt.AsEnumerable().
        Max(Function(r) r.Field(Of String)(0).Length) 
```

请注意，这假定这要求此列是 never `null`。

（我看不出你为什么要测量表的（可能可用的）其他列的长度，因为它们根本没有显示`ComboBox`。）

**更新**

> 在 Combobox 中查找最大字符串

现在我明白了，你想要的是字符串而不是长度：

```
Dim longestString = cboDt.AsEnumerable().
        OrderByDescending(Function(r) r.Field(Of String)(0).Length).
        First().Field(Of String)(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:08:34.987

您可以使用 linq 和 Find the Index of`maxStringLength = 5`

```
Dim ls = comboBox4.Items.Cast(Of String)().ToList()
Dim index = ls.FindIndex(Function(c) c.ToString().Count() >= 5)
comboBox4.SelectedIndex = index 
```

或使用[Max() 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.max.aspx)

```
Dim ls = comboBox4.Items.Cast(Of String)().ToList()
Dim index = ls.Max()
comboBox4.Text = index 
```

# ruby-on-rails - 无法将 nil 转换为确切的数字

> ID：14626278
> 
> 赞同：0
> 
> 时间：2013-01-31T12:52:41.960
> 
> 标签：ruby-on-rails

我希望用户能够评论其他人的微博，但我不断收到以下错误：无法将 nil 转换为确切的数字

它来自下面 View/comments/_form 文件中的时间戳。出于某种原因，@comment.created_at 以 nil 的形式返回

View/comments/_form:(这个部分在每个微博结束时调用）

```
<span class="content"><%= @comment.content %></span>
<span class="timestamp">Said <%= time_ago_in_words(@comment.created_at) %> ago.</span
<%= form_for(@comment) do |f| %>
  <%= f.text_field :content, placeholder: "Say Something..." if signed_in? %>
<% end %> 
```

用户模型：

```
attr_accessible :name, :email, :password, :password_confirmation #is this secure with password there?
attr_protected :admin   #attr_protected necessary?
has_many :microposts, dependent: :destroy
has_many :comments, :through => :microposts, dependent: :destroy 
```

微贴模型：

```
attr_accessible :comment #basically the content of the post
attr_protected :user_id
has_many :comments, dependent: :destroy 
```

评论型号：

```
attr_accessible :content, :micropost
belongs_to :user
belongs_to :micropost
validates :user_id, presence: true
validates :micropost_id, presence: true
validates :content, presence: true
default_scope order: 'comments.created_at ASC'   #is this necessary? 
```

评论控制器：

```
def create
  @micropost = Micropost.find_by_id(params[:id])   #is this necessary?
  @comment = current_user.comments.create(:micropost => @micropost)
  redirect_to :back
end 
```

用户控制器：

```
def show
  @user = User.find_by_id(params[:id])
  @microposts = @user.microposts.paginate(page: params[:page])
  @micropost  = current_user.microposts.build
  @comments = @micropost.comments
  @comment = current_user.comments.create(:micropost => @micropost) #build, new or create??
end 
```

路线：

```
resources :users 
resources :microposts, only: [:create, :destroy] 
resources :comments, only: [:create, :destroy] 
```

SQL：

"comment"=>{"content"=>"EXAMPLE"}} 用户负载 (0.8ms) SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'H09yZpAv5qhmT3ok5fXfnQ' LIMIT 1 Micropost Load (0.7 ms) SELECT "microposts".* FROM "microposts" WHERE "microposts"."id" IS NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:02:40.027

@micropost 尚未创建

`@micropost.save`之后添加`@micropost = current_user.microposts.build`

```
@micropost  = current_user.microposts.build
@micropost.save
@comments = @micropost.comments
@comment = current_user.comments.create(:micropost => @micropost) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:57:03.490

`@comment`很可能是一项已`created_at`创下的新纪录`nil`

# python - 继承最佳实践：*args、**kwargs 或显式指定参数

> ID：14626279
> 
> 赞同：61
> 
> 时间：2013-01-31T12:52:45.910
> 
> 标签：python, inheritance, method-signature

我经常发现自己覆盖了父类的方法，并且永远无法决定是否应该明确列出给定的参数或只使用一揽子`*args, **kwargs`结构。一个版本比另一个更好吗？有最佳实践吗？我缺少什么（不利）优势？

```
class Parent(object):

    def save(self, commit=True):
        # ...

class Explicit(Parent):

    def save(self, commit=True):
        super(Explicit, self).save(commit=commit)
        # more logic

class Blanket(Parent):

    def save(self, *args, **kwargs):
        super(Blanket, self).save(*args, **kwargs)
        # more logic 
```

**显式变体的感知好处**

*   更明确（Python 之禅）
*   更容易掌握
*   易于访问的函数参数

**毯式变体的感知好处**

*   更干
*   父类很容易互换
*   在不触及其他代码的情况下传播父方法中默认值的更改

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-08T10:54:06.427

**里氏替换原则**

通常，您不希望方法签名在派生类型中有所不同。如果您想交换派生类型的使用，这可能会导致问题。这通常被称为[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

**显式签名的好处**

同时，我认为您的所有方法都具有 , 的签名并不`*args`正确`**kwargs`。显式签名：

*   通过良好的参数名称帮助记录方法
*   通过指定需要哪些参数以及哪些具有默认值来帮助记录该方法
*   提供隐式验证（缺少必需的参数会引发明显的异常）

**可变长度参数和耦合**

不要将可变长度参数误认为是良好的耦合实践。父类和派生类之间应该有一定的凝聚力，否则它们不会相互关联。相关代码产生反映内聚程度的耦合是正常的。

**使用可变长度参数的地方**

使用可变长度参数不应该是您的首选。当您有充分的理由时应该使用它，例如：

*   定义一个函数包装器（即装饰器）。
*   定义参数多态函数。
*   当您可以采用的参数确实是完全可变的（例如，通用的数据库连接函数）。DB 连接函数通常采用多种不同形式的[连接字符串](http://en.wikipedia.org/wiki/Connection_string)，包括单 arg 形式和多 arg 形式。不同的数据库也有不同的选项集。
*   ...

**你做错了吗？**

如果您发现您经常创建带有许多参数或具有不同签名的派生方法的方法，那么您可能在如何组织代码方面遇到更大的问题。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-31T13:10:23.067

我的选择是：

```
class Child(Parent):

    def save(self, commit=True, **kwargs):
        super(Child, self).save(commit, **kwargs)
        # more logic 
```

它避免了访问提交参数，`*args`并且`**kwargs`如果签名`Parent:save`更改（例如添加新的默认参数），它可以保证事情的安全。

**更新**：在这种情况下，如果将新的位置参数添加到父级，则拥有 *args 可能会导致麻烦。我只会保留`**kwargs`和管理具有默认值的新参数。它将避免错误传播。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T13:40:58.060

如果您确定 Child 会保留签名，那么明确的方法肯定是更可取的，但是当 Child 更改签名时，我个人更喜欢使用两种方法：

```
class Parent(object):
    def do_stuff(self, a, b):
        # some logic

class Child(Parent):
    def do_stuff(self, c, *args, **kwargs):
        super(Child, self).do_stuff(*args, **kwargs)
        # some logic with c 
```

这样，签名中的更改在 Child 中非常可读，而原始签名在 Parent 中非常可读。

在我看来，当你有多重继承时，这也是更好的方法，因为`super`当你没有 args 和 kwargs 时，调用几次是很恶心的。

对于它的价值，这也是很多 Python 库和框架（Django、Tornado、Requests、Markdown 等等）中的首选方式。尽管人们不应该将他的选择基于这些事情，但我只是暗示这种方法非常普遍。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-07T19:16:33.610

我更喜欢显式参数，因为自动完成允许您在进行函数调用时查看函数的方法签名。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-10T13:11:04.073

不是真正的答案，而是更多的旁注：如果您真的非常想确保将父类的默认值传播到子类，您可以执行以下操作：

```
class Parent(object):

    default_save_commit=True
    def save(self, commit=default_save_commit):
        # ...

class Derived(Parent):

    def save(self, commit=Parent.default_save_commit):
        super(Derived, self).save(commit=commit) 
```

但是我不得不承认这看起来很丑，我只会在我觉得我真的需要它的时候使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-26T15:36:01.353

除了其他答案：

拥有可变参数可能会将父级与子级“分离”，但会在创建的对象和父级之间创建耦合，我认为这更糟糕，因为现在您创建了一个“长距离”对（更难发现，更难维护，因为您可能会在应用程序中创建多个对象）

如果您正在寻找解耦，请查看[组合而不是继承](https://en.wikipedia.org/wiki/Composition_over_inheritance)

# liferay - 如何在 wollflow 定义中进行动态更改

> ID：14626281
> 
> 赞同：1
> 
> 时间：2013-01-31T12:52:54.187
> 
> 标签：liferay, liferay-6

我正在使用 liferay 6.1.1CE。

我正在使用 kaleo 作为我的工作流引擎。

据我所知，工作流程是作为 xml 文件上传的。我做到了（上传具有 2 个批准级别的工作流程）。

我的问题是，我们能否通过在我的门户中提供给特定用户的用户界面来动态更改该工作流程中的角色、用户 ID？

第二件事是

例如：我有一个所有用户通用的 portlet，在我的门户中，有 2 个用户组。

两组的批准标准不同。所以我可以为这两个组创建两种类型的工作流。

我的问题是，基于用户（在哪个组中），我可以将 portlet 重定向到相应的工作流...？

分享您的建议..这可能吗？

# django - 美味派中的自定义逻辑

> ID：14626283
> 
> 赞同：1
> 
> 时间：2013-01-31T12:52:56.673
> 
> 标签：django, tastypie

我可以在哪里放置自定义逻辑或者我应该重载哪个函数来在tastepie中添加自定义逻辑。例如：想要返回`CustomObject`其中包含`name`的大写字母，但在返回之前我想将其设为小写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:46:57.587

如果您想提供类似的自定义内容，我建议您在`dehydrate`. 查看[文档](http://django-tastypie.readthedocs.org/en/latest/resources.html#dehydrate-foo)，该示例几乎就是您要查找的内容：

```
class MyResource(ModelResource):
    # The ``title`` field is already added to the class by ``ModelResource``
    # and populated off ``Note.title``. But we want allcaps titles...

    class Meta:
        queryset = Note.objects.all()

    def dehydrate_title(self, bundle):
        return bundle.data['title'].upper() 
```

好吧，除了你正在寻找`.lower()`的当然:)

```
class CustomObjectResource(ModelResource):

    class Meta:
        queryset = CustomObject.objects.all()

    def dehydrate_title(self, bundle):
        return bundle.data['name'].lower() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:58:50.473

您可以恕我直言覆盖任何字段：

```
class CustomResource(ModelResource):

    name = fields.CharField(
        attribute='get_lowercased_name', 
        readonly=True 
    )

    class Meta:
        queryset = Custom.objects.all() 
```

你需要在你的模型类上定义`get_lowercased_name`方法。`Custom`

# visual-studio-2010 - 我无法从 visualstudio.com (TFS) 中删除我的项目？

> ID：14626299
> 
> 赞同：1
> 
> 时间：2013-01-31T12:53:43.483
> 
> 标签：visual-studio-2010, tfs, azure-devops

当我在 visualstudio.com 上登录我的 tfs 时，我找不到删除项目的位置，有人知道吗？

很不幸，但我的项目是用 VS2012 创建的。我在我的 VS2010 文件夹结构中尝试了 TFSDeleteProject，但它抱怨它不能，因为它的版本不同。

那么网络上那个漂亮的删除按钮在哪里呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:36:46.463

这是因为您使用的是[Buck Hodges 博客文章](http://blogs.msdn.com/b/buckh/archive/2011/09/19/how-to-delete-a-team-project-from-tfs-on-azure.aspx)中提到的 VS 2010 命令提示符。

安装 VS 2012 或 Team Explorer 2012

# dynamics-crm-2011 - 如何在“添加多个用户”对话框中列出所有 AD 用户

> ID：14626300
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:53:46.110
> 
> 标签：dynamics-crm-2011

在 Dynamics CRM 2011 中使用添加多个用户功能时，您会看到一个可供选择的 AD 用户列表，当有很多用户时，该列表会被截断（至少根据我的经验）。

有没有办法显示所有用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:47:40.397

不，但如果您真的在问“我怎样才能让我的所有或几乎所有 AD 用户一次性进入 CRM”，那么答案是肯定的，但不是通过 GUI。

使用 dsget 之类的命令行工具从 AD 输出用户的必要详细信息，包括他们的 SAMID。

使用此输出创建包含相关列的 csv 文件，并像导入任何其他数据一样导入用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:12:07.487

不幸的是，您的问题没有直接的方法。这意味着，在 CRM 应用程序中您不能这样做。可能是一个插件可以帮助你。

# cxf - cxf 中的 WSDLToJava 是如何工作的？

> ID：14626307
> 
> 赞同：6
> 
> 时间：2013-01-31T12:54:14.580
> 
> 标签：cxf, wsdl2java

'org.apache.cxf.tools.wsdlto.WSDLToJava' 将 wsdl 转换为 java 类。

它是在内部使用 JAXB 吗？为什么这个命令能够生成类似于“xjc”创建的类？有人可以解释一下它是如何工作的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T10:35:14.993

CXF 在内部使用 xjc 进行代码生成。

更多信息请参考以下（来自CXF官方页面）

在 2.3.0 之前的 CXF 版本中，xjc 插件直接隐藏在大 cxf 捆绑 jar 中。在 2.3.0 中，它们已从 jar 中删除，并单独放入发行版的 lib 目录中。xjc 插件只是代码生成实用程序，在运行时根本不使用，这就是它们被撤出的原因。

Apache CXF XJC-Utils 子项目提供了一组实用程序，用于与 JAXB 一起生成更好或更可用的代码。

目前，它由以下模块组成：

```
cxf-xjc-plugin   Provides a maven wrapper around the JAXB XJC utility
cxf-xjc-dv   Initialize fields mapped from elements/attributes with their default values
cxf-xjc-ts   Implements the toString() method
cxf-xjc-boolean  Generate getters named getXXX() for Booleans instead of isXXX()
cxf-xjc-wsdlextension    Adds extensions methods to allow generated beans to be used as WSDL4J extensors
cxf-xjc-bug671   Provides a workaround for https://jaxb.dev.java.net/issues/show_bug.cgi?id=671
- Not needed for JAXB >=2.1.12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:30:50.470

WSDL2Java 是一个命令行工具，可以从现有的 WSDL 文档生成 Java 类。生成的类代表客户端存根、服务器骨架和数据类型，它们将帮助您为 WSDL 文档中定义的 Web 服务编写客户端和服务器 Java 程序。

DEFAULT_FRONTEND_NAME = "jaxws";

DEFAULT_DATABINDING_NAME = "jaxb";

有关详细信息，

[http://cxf.apache.org/docs/wsdl-to-java.html](http://cxf.apache.org/docs/wsdl-to-java.html) [http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-bundle/2.0.6/org/apache/cxf/tools/wsdlto/WSDLToJava.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.cxf/cxf-bundle/2.0.6/org/apache/cxf/tools/wsdlto/WSDLToJava.java)

# javascript - 将表单值从花哨的弹出框传递到主窗口

> ID：14626314
> 
> 赞同：0
> 
> 时间：2013-01-31T12:54:49.977
> 
> 标签：javascript, jquery, html, django

我目前正在使用 python 和 Django 开发一个 Web 应用程序，并且我有一个使用 fancybox jquery 插件的带有弹出窗口的屏幕。

当点击链接时，它会在我的服务器上打开一个 url，它基本上是一个表单。

我想要实现的是能够在弹出窗口关闭后将表单输入的值传递到我的主页。

我有一种有趣的感觉，这是不可能的，我最好使用隐藏的 div（在命令中隐藏）而不是弹出窗口。

我的测试页面：

```
<div class='link'>
    <a class='fancy' href='create/' > click me </a>
</div 
```

javascript自动取款机：

```
$(function(){
  $('.fancy').fancybox(
   {
     type:'ajax',
     afterClose: function(){
        alert('done!');
     }
   }
}); 
```

主要思想是弹出窗口有一个表单，其中包含将添加到 Django 数据库中的值，但主窗口上还有一个表，它也显示这些值。我想让主窗口成为创建对象、保存它然后将其加载到表单中的主窗口（这是通过我使用 ajax 的 API 调用处理的）

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:23:44.073

`change`以下是一个非常简单的发布/订阅，它创建一个存储的对象并使用表单输入的事件更新对象和页面元素

html:

```
<!-- table, match "data-bind" to form input name -->
<td data-bind="fname" class="subscriber">Foo</td>
<td data-bind="lname"  class="subscriber">Bar</td>
<!-- form -->
<input type="text" name="fname" class="data_source" /> 
```

JS：

```
/* declare empty object */
var storedData = {};

var $subscribers=$('.subscriber');
/* this event triggered when input changes*/
$(document).on('upDataData', function( event, key, value){
    storedData[key]=value;
    $subscribers.filter( '[data-bind="'+key+'"]').text( value );
});

/* change handler for form inputs*/
$(document).on('change', 'form input.data_source', inputChange);

function inputChange(){       
    $(document).trigger('upDataData',[ this.name, this.value]);
}
/* populate storedData from table elements when page loads*/
function createInitialData(){
    $subscribers.each(function(){
        storedData[ $(this).data('bind')]= $(this).text();
    });
}

 createInitialData() 
```

然后在您的fancybox代码中将对象发送到服务器并使用服务器代码将值解析为表单：

```
$('.fancy').fancybox({
     type:'ajax',
     /* same as "options" for "$.ajax"*/
     ajax: { data : storedData},
     afterClose: function(){
        alert('done!');
     }       
}); 
```

演示：http: [//jsfiddle.net/xg9ML/2/](http://jsfiddle.net/xg9ML/2/)

# c# - GoogleMailSettingsService 在所有内容上都给出错误 403

> ID：14626316
> 
> 赞同：0
> 
> 时间：2013-01-31T12:54:52.647
> 
> 标签：c#, .net, google-data-api, google-email-settings-api

我正在尝试`GoogleMailSettingsService`通过 C# 代码检索标签，但出现 403 Forbidden 错误。我使用的是管理员用户名/密码，选中了“使用配置 API”选项，并且我们有一个企业帐户。

```
GoogleMailSettingsService service = new GoogleMailSettingsService(domain, app_name);
service.setUserCredentials(user_name, password);
AppsExtendedFeed labels = service.RetrieveLabels(user_name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:44:04.050

我想将此作为评论而不是答案发布。从 Google 提供的文档来看，当收到 403 错误时，您使用的帐户可能不是管理员。 [https://developers.google.com/google-apps/help/articles/provisioningoauth](https://developers.google.com/google-apps/help/articles/provisioningoauth)

您是否尝试使用超级管理员帐户运行它，看看问题是否仍然存在？

# c++ - 我什么时候必须释放内存？

> ID：14626318
> 
> 赞同：11
> 
> 时间：2013-01-31T12:55:00.167
> 
> 标签：c++, memory

我学习了 C#，现在我正在学习 C++。释放内存的全部意义对我来说是新的，我想知道什么时候需要担心内存释放，什么时候不需要。

据我了解，我唯一需要担心内存释放的情况是我使用`new`运算符时，所以我应该使用`delete`.
但在这些情况下，不需要释放内存：

*   类变量（成员），或静态变量。
*   函数中的局部变量。
*   STL 系列（字符串、列表、向量等）。

这是真的？
还有其他情况我必须担心内存释放吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T12:56:45.470

你基本上是对的：你需要平衡`new`、`delete`和。`new[]``delete[]``malloc``free`

编写良好的 C++ 将几乎不包含这些，因为您将动态内存和生命周期管理的责任留给合适的容器或管理器类，最值得注意的是`std::vector`和`std::unique_ptr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:14:33.100

作为一般经验法则，我倾向于遵守以下规定：

*   如果我编码 a`new/new[]`我立即编码相应的`delete/delete[]`
*   同样，任何`malloc/calloc`紧随其后的是相关的`free`

这避免了许多可能产生内存泄漏的令人讨厌的情况。如果你是 C++ 的新手，我不会习惯`malloc`它的许多变体，它需要大量的脚手架来保持类型安全，除非真的有必要，否则这可以算作一件**坏事**，但是，如前所述，有时它是必要的：例如，当必须使用基于 C 的库/API 时，您可能需要使用它们。

主要是远离它们，你的生活会容易得多。

**注意：**我提到了上面的几点，因为我已经从 C 转到 C++，我不得不面对许多来自 C 的旧的经过试验和测试的技术，这些技术会导致 C++ 出现问题。

# php - 返回一个数组以从 sql 查询中回显

> ID：14626319
> 
> 赞同：2
> 
> 时间：2013-01-31T12:55:02.770
> 
> 标签：php, sql, echo

对于 user_name，第二个回显可以正确打印，但第一个回显只会打印数组并给出“数组到字符串错误”。

我的查询应该返回一个包含大约 6 个名称的数组。

我是否缺少某些东西导致它无法正确返回数组，或者我该如何调整它以便我可以选择要回显的 $single_name ？

```
function get_all_names(){
    $this->db->select('username');
    $this->db->from('users');
    $Query = $this->db->get();
    $rows = $Query->result_array();
    return $rows;
}

 $all_names = array();
 $all_names = self::get_all_names();
 // $single_name = $all_names[1]; 
 // Above line did not work, I needed to add in ['username'] to it. 
 $single_name = $all_names[1]['username'];
 $user_name = ($_SESSION['username']);

 echo "<script type='text/javascript'> alert( '{$single_name }'); </script>";
 echo "<script type='text/javascript'> alert( '{$user_name }'); </script>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T19:17:13.237

改变

```
$single_name = $all_names[1] 
```

到

```
$single_name = $all_names[1]['username']; 
```

# gwt - GWT 和视图。这是如何运作的？

> ID：14626329
> 
> 赞同：-2
> 
> 时间：2013-01-31T12:55:30.023
> 
> 标签：gwt

我已经看过一些基本的 GWT 教程，但这只是一页。具有许多页面的 GWT 应用程序如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:10:50.897

在 GWT 中，您拥有 Page，一切都发生在这里。如果你想加载一个子页面，那么这会通过 AJAX 请求来实现。

这意味着您有一个导航面板（例如新闻和联系）和一个内容面板，内容将在其中呈现。

因此，您单击新闻，新闻内容将呈现在内容面板中。或者您单击联系人，联系人内容将呈现在内容面板中。

您没有页面重新加载，只有部分重新加载。

阅读[本教程](https://developers.google.com/web-toolkit/articles/mvp-architecture)，了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:24:36.270

具有许多页面的 GWT 应用程序如何工作？

如您所知，GWT 是一个单页应用程序。在历史机制的帮助下，您可以显示一个然后更多页面的行为。

参考链接：

*   [GWT中的历史机制](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)

# javascript - Jquery .toggle 替换代码

> ID：14626335
> 
> 赞同：0
> 
> 时间：2013-01-31T12:56:02.927
> 
> 标签：javascript, jquery, jquery-ui

我的网站上有（有）一个按钮，可以在文章的宽窄布局之间切换。自 JQuery 1.9 以来，由于不推荐使用切换，这一直没有奏效。我不是 JS 方面的高手，也没有设法从这里拼凑出各种问题的答案，所以如果可能的话，希望有人能看看我的具体案例。我很感激对于更有能力的人来说，这可能非常明显，但我仍在学习！

该网站在这里，例如：

[http://www.davidsmith.name/2011/09/04/Real-surreal-and-hyperreal-in-crash-and-the-beach/](http://www.davidsmith.name/2011/09/04/Real-surreal-and-hyperreal-in-crash-and-the-beach/)

适用部分代码如下：

```
<span><a id="switch" href="#" title="switch the menu"><span id="blogview">Switch to Article View</span>
 <span id="articleview" class="hide">Switch to Blog View</span></a></span><br/>
 <span id="readability" class="hide"><span class="rdbWrapper" data-show-read="1" data-show-send-to-kindle="1" data-show-print="1" data-show-email="0" data-orientation="0" data-version="1" data-bg-color="transparent"></span><script type="text/javascript">(function() {var s = document.getElementsByTagName("script")[0],rdb = document.createElement("script"); rdb.type = "text/javascript"; rdb.async = true; rdb.src = document.location.protocol + "//www.readability.com/embed.js"; s.parentNode.insertBefore(rdb, s); })();</script></span>

<script type="text/javascript">
            $('a#switch').(function () {
            $('div#right').hide('slide', { direction: 'right' }, 300);
            $('div#left').delay(300).animate({width: 950}, 600);
            $('span#blogview').toggleClass('hide');
            $('span#articleview').toggleClass('hide');
            $('span#readability').toggleClass('hide');
            }, function () {
            $('div#right').delay(500).show('slide', { direction: 'right' }, 500);
            $('div#left').animate({width: 430}, 500);
            $('span#blogview').toggleClass('hide');
            $('span#articleview').toggleClass('hide');
            $('span#readability').toggleClass('hide');}
            );
</script><br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:01:36.943

[在这里](https://stackoverflow.com/a/14604538/295783)查看我的答案

这将转化为

```
$(function() {                      
   $('a#switch').on("click",function(e) {
      e.preventDefault();
      if ($(this).data("show")=="no") {
            $('div#right').hide('slide', { direction: 'right' }, 300);
            $('div#left').delay(300).animate({width: 950}, 600);
            $('span#blogview').toggleClass('hide');
            $('span#articleview').toggleClass('hide');
            $('span#readability').toggleClass('hide');
        $(this).data("show","yes");
      }   
      else {
            $('div#right').delay(500).show('slide', { direction: 'right' }, 500);
            $('div#left').animate({width: 430}, 500);
            $('span#blogview').toggleClass('hide');
            $('span#articleview').toggleClass('hide');
            $('span#readability').toggleClass('hide');
        $(this).data("show","no");     
      }
  });
}); 
```

# django - 在backbone.js中创建与修改

> ID：14626336
> 
> 赞同：1
> 
> 时间：2013-01-31T12:56:10.177
> 
> 标签：django, backbone.js, tastypie

这是我第一个使用主干和 REST API 的应用程序，当涉及到创建编辑时，我对一些特定的场景有点困惑。因此，如果模型在服务器上退出，它将编辑，如果它没有创建。

当我在我的模型中传递一个唯一标识符时，它知道它退出了，但是如果我传递一个没有唯一标识符的现有数据的组合，它总是假设它应该创建。我不确定这是否应该在客户端或服务器上解决。

例如：

```
var exportationMod = new Backbone.Model({ 'asset': '/api/v1/asset/'+this.assetID+'/', 'export_configuration': '/api/v1/exportconfiguration/'+this.model.get('id')+'/' });
exportationMod.url = '/api/v1/exportation/';
exportationMod.save(); 
```

好的，所以服务器正在使用 django + sweetpie 运行。客户端是否应该通过首先在服务器上进行额外的查询来验证这一点（也许有一种方法可以设置唯一键的组合，如 mysql），还是我可以调整其他设置以便编辑而不是创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:26:33.390

如果您将数据传递给没有唯一 ID 的服务器，那么服务器如何知道要更新什么？

如果这对您的情况有意义，您可以`isNew()`在模型中覆盖。

```
var MyModel = Backbone.Model.extend({
   idAttribute: 'somethingUnique',
   url: '/api/v1/exportation/',
   isNew: function(){
      // return true if you want create (POST),
      // return false if you want update (PUT)
   }
}); 
```

默认情况下它看起来像这样（对于上面的模型，this.id 将是上面的 idAttribute 值）：

```
// A model is new if it has never been saved to the server, and lacks an id.
isNew: function() {
  return this.id == null;
}, 
```

如果你想编辑服务器上已经存在的东西，你应该在编辑/保存之前先获取它。此外，如果有一些不称为“id”的唯一 id，您也可以在模型上覆盖它（见上文）。

# tomcat - Coldfusion 10 throwing Software 导致连接中止：套接字写入错误

> ID：14626337
> 
> 赞同：1
> 
> 时间：2013-01-31T12:56:14.940
> 
> 标签：tomcat, coldfusion, socketexception, coldfusion-10

我们最近将我们的两台 ColdFusion 9 服务器升级到 ColdFusion 10 服务器，现在我在提供 pdf 文件时每天在 cfcontent 标签上收到错误“软件导致连接中止：套接字写入错误”10-20 次。

我读了这个条目：[对等连接重置：套接字写入错误 - Coldfusion 10 上的 cfcontent](https://stackoverflow.com/questions/12141659/connection-reset-by-peer-socket-write-error-cfcontent-on-coldfusion-10)，它似乎是完全相同的问题。我阅读了答案，但这不是用户在浏览器或其他东西上点击停止的问题。这两个应用程序都在 ColdFusion 9 下完美运行，现在都抛出错误。

有谁知道可能导致此问题的 Tomcat 设置？这又不是软件问题，而是新的 ColdFusion 10 服务器的服务器问题。有没有其他人有这个问题，你解决了吗？谢谢。

# javascript - 在实现悬停在另一个元素上后，如何将 opacity=1 再保持 5 秒？

> ID：14626338
> 
> 赞同：0
> 
> 时间：2013-01-31T12:56:22.533
> 
> 标签：javascript, jquery, css

所以我有一张地图，悬停在某个点上，地址就会出现。但我更愿意将不透明度再保持 5 秒，以便用户可以复制该气泡中的文本。我有一个我现在[在这里](http://jsfiddle.net/wLsa4/1/)的例子。如果可能的话，我宁愿只使用 javascript 来做到这一点。

```
#harta {
width:958px;
height:465px;
background:url(https://mail-attachment.googleusercontent.com/attachment/u/0/?ui=2&ik=9315d35c80&view=att&th=13c903efbb6093fa&attid=0.1&disp=inline&realattid=f_hclsb8jy0&safe=1&zw&saduie=AG9B_P9aYbjGhKjTXzh9nfNdKFkW&sadet=1359636669888&sads=BF04ljTz2X-4v_L8ApM49KM_Bgo);
margin:0 auto;
position:relative;
}

.town {
position:absolute;
width:25px;
height:30px;
display:block;
cursor:pointer;
}

#point1 {
top:85px;
left:435px;
}

#point2 {
top:107px;
left:415px;
}

#point3 {
top:117px;
left:387px;
}

#point4 {
top:137px;
left:410px;
}

#point5 {
top:212px;
left:491px;
}

#point6 {
top:432px;
left:490px;
}

.info {
background:white;
position:absolute;
border-radius:5px;
padding:10px;
opacity:0;
display:inline-block;
min-width:250px;
}

#point1:hover+ #info_point1 {
top:55px;
left:460px;
opacity:1;
}

#point2:hover+ #info_point2 {
top:77px;
left:440px;
opacity:1;
}

#point3:hover+ #info_point3 {
top:87px;
left:412px;
opacity:1;
}

#point4:hover+ #info_point4 {
top:107px;
left:435px;
opacity:1;
}

#point5:hover+ #info_point5 {
top:182px;
left:516px;
opacity:1;
}

#point6:hover+ #info_point6 {
top:402px;
left:515px;
opacity:1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:26:44.943

这里有一个小技巧。我找不到如何运行 5 秒的功能，所以我更改了要在 5 秒后恢复的功能。

```
$("#point1").on("mouseleave", function(){
    $("#point1").css("opacity", "1");
    setTimeout(function(){
        console.log("called");
        $("#point1").css("opacity", "0.3");
    }, 5000);
}); 
```

工作[小提琴](http://jsfiddle.net/upPbA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:27:53.947

获得它的最佳方法是为悬停添加过渡延迟：

```
#point1:hover + info{transition:all 0s 5s;-webkit-transition:all 0s 5s;-o-transition:all 0s 5s;} 
```

# regex - 与非常大的模式集进行字符串匹配的高效算法

> ID：14626339
> 
> 赞同：6
> 
> 时间：2013-01-31T12:56:24.470
> 
> 标签：regex, pattern-matching, string-matching

我正在寻找一种能够找到与特定字符串匹配的所有模式的有效算法。模式集可以非常大（超过 100,000 个）和动态（随时添加或删除模式）。模式不一定是标准的正则表达式，它们可以是正则表达式的子集或类似于 shell 模式的东西（即：）`file-*.txt`。**首选正则表达式子集的解决方案（如下所述）。**

**仅供参考：我对基于 RegExp 列表的蛮力方法不感兴趣。**

通过简单的正则表达式，我的意思是支持`?`, `*`, `+`, 字符类`[a-z]`和可能的逻辑运算符的正则表达式`|`。

为了澄清我的需要：我希望找到与 URL 匹配的所有模式：

```
http://site1.com/12345/topic/news/index.html 
```

响应应该是基于下面设置的模式的这些模式。

```
http://*.site1.com/*/topic/*
http://*.site1.com/* 
http://* 
```

模式集：

```
http://*.site1.com/*/topic/*
http://*.site1.com/*/article/*
http://*.site1.com/* 
http://*.site2.com/topic/*
http://*.site2.com/article/*
http://*.site2.com/* 
http://* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-13T01:48:25.490

这是我们非常成功地使用的一种方法（[在此处实现](https://github.com/zeek/paraglob)）：

**添加模式：**

对于任何模式，都存在一个字符串必须包含的一组子字符串，以便有机会匹配它。称这些元词。例如：

```
dog*fish -> [dog, fish]
[lfd]og  -> [og]
dog?     -> [dog] 
```

当您向数据结构添加模式时，将其分解为元词并将它们存储在 Aho-Corasick 字符串匹配数据结构中。维护一个内部数据结构以将元词映射回模式词。

**运行查询：**

给定一个输入字符串，使用您构建的 Aho-Corasick 数据结构来获取该字符串中包含的所有元词。然后，使用您创建的地图，测试与这些元词相对应的模式。

这很有效，因为虽然字符串匹配相当慢，但您可以快速缩小实际必须匹配的模式数量。我们的[实现](https://github.com/zeek/paraglob)可以在普通笔记本电脑上每秒执行大约 200,000 个查询，针对 150,000 多个模式集。请参阅程序中的基准测试模式来测试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:40:06.053

想到的一种方法是创建模式的树结构。

示例：`http://*`将包含所有模式（如上所列）。 `http://*.site1.com/*`将包含所有`site1.com`的。这可以显着减少需要检查的模式数量。

此外，您可以确定哪些模式是互斥的，以进一步修剪您搜索的列表。

所以首先取出所有的模式并从中创建树。搜索所有根以确定需要分析哪些分支和节点。

通过确定哪些分支是互斥的来改进算法，这样一旦你在给定的分支上找到命中，你就会知道哪些分支/节点不需要访问。

要开始，您可能会很懒惰，您的第一遍可能是对模式进行排序并执行简单的下一个模式是否包含此模式类型逻辑以确定“this”是否包含在下一个中。前任：`if( "http://*.site1.com/*".startsWith("http://*") == true )`

您可以更复杂地确定一种模式是否确实包含另一种模式，但这会让您开始。

为了更好地确定问题：

> “这个模式包含那个模式吗？”

我相信你需要能够解析正则表达式......这篇文章看起来是一个很好的起点来了解如何实现这一点：[Parsing regular expressions with recursive descent](http://matt.might.net/articles/parsing-regex-with-recursive-descent/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:49:28.403

如果这组 URL 的变化不是很快，你真的应该使用一个正则表达式引擎来编译它的模式。Java 提供了其中之一，但如果您想知道*哪种*模式匹配，它可能并不令人满意。

*用于执行此操作并*确定哪个匹配的广泛使用的机制是各种词法分析器生成器，例如 FLEX 和类似工具。他们接受每个“词位”的正则表达式，并构建一个集成的 FSA 来识别其中任何一个执行效率极高的词。

当你的集合改变时，你可以调用 Flex。如果速度太慢，请获取 Flex 的开源版本并集成到您的引擎中；它在内部构建 FSA，因此您可以直接使用它。（一些工程可能是必要的）。但是如果你真的有一个高性能匹配问题，一些工作做好它不会打扰你。

如果 URL 集的更改速度快于 FLEX 生成 FSA（奇数）的速度，那么您就遇到了真正的问题。在这种情况下，您可以通过从左到右扫描“正则表达式”并将您看到的字符/谓词集成到现有的区分树中来构建在线区分树。然后匹配包括沿着鉴别树走，执行各种测试；如果你到达一片叶子，你有一个匹配，否则没有。如果处理得当，这可能与 FLEX 生成的自动化一样快，但可能要大得多。

# asp.net-mvc-3 - 如何在 Asp.net mvc 3 中进行乐观并发编辑而不在视图中使用隐藏字段？

> ID：14626340
> 
> 赞同：2
> 
> 时间：2013-01-31T12:56:29.197
> 
> 标签：asp.net-mvc-3, razor, entity-framework-4, entity-framework-4.1

我现在正在学习 asp.net mvc 3，并且正在学习本教程 Contoso University

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

我在这部分使用乐观并发处理编辑模型

我知道通过使用类似的东西

```
[HttpPost]
public ActionResult Edit(Department department) 
```

模型会自动绑定，即使没有要编辑的部门id的隐藏字段，编辑也不会失败。

但是每当我尝试删除这个视图中的两个隐藏字段时：

```
@model MvcContosoUniversity.Models.Department

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Department</legend>

       @Html.HiddenFor(model => model.DepartmentID) 
         @Html.HiddenFor(model => model.Timestamp)
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Budget)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Budget)
            @Html.ValidationMessageFor(model => model.Budget)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.StartDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.StartDate)
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.InstructorID, "Administrator")
        </div>
        <div class="editor-field">
            @Html.DropDownList("InstructorID", String.Empty)
            @Html.ValidationMessageFor(model => model.InstructorID)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我在控制器中收到错误，这是控制器的代码：

```
 // GET: /Department/Edit/5

        public ActionResult Edit(int id)
        {
            Department department = db.Departments.Find(id);
            ViewBag.InstructorID = new SelectList(db.Instructors, "InstructorID", "FullName", department.InstructorID);
            return View(department);
        }

        //
        // POST: /Department/Edit/5

        [HttpPost]
        public ActionResult Edit(Department department)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    db.Entry(department).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            catch (DbUpdateConcurrencyException ex)
            {
                var entry = ex.Entries.Single();
                //Another option is to put the try-catch inside a function
                try
                {
                    var databaseValues = (Department)entry.GetDatabaseValues().ToObject();
                    var clientValues = (Department)entry.Entity;
                    if (databaseValues.Name != clientValues.Name)
                        ModelState.AddModelError("Name", "Current value: "
                            + databaseValues.Name);
                    if (databaseValues.Budget != clientValues.Budget)
                        ModelState.AddModelError("Budget", "Current value: "
                            + String.Format("{0:c}", databaseValues.Budget));
                    if (databaseValues.StartDate != clientValues.StartDate)
                        ModelState.AddModelError("StartDate", "Current value: "
                            + String.Format("{0:d}", databaseValues.StartDate));
                    if (databaseValues.InstructorID != clientValues.InstructorID)
                        ModelState.AddModelError("InstructorID", "Current value: "
                            + db.Instructors.Find(databaseValues.InstructorID).FullName);
                    ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                        + "was modified by another user after you got the original value. The "
                        + "edit operation was canceled and the current values in the database "
                        + "have been displayed. If you still want to edit this record, click "
                        + "the Save button again. Otherwise click the Back to List hyperlink.");
                    department.Timestamp = databaseValues.Timestamp;
                }

                catch(NullReferenceException e)
                {
                    ModelState.AddModelError("","Error \n "+e.Message);
                }
            }
            catch (DataException)
            {
                //Log the error (add a variable name after Exception)
                ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
            }

            ViewBag.InstructorID = new SelectList(db.Instructors, "InstructorID", "FullName", department.InstructorID);
            return View(department);
        } 
```

这是模型的代码：

```
public class Department
    {
        public int DepartmentID { get; set; }

        [Required(ErrorMessage = "Department name is required.")]
        [MaxLength(50)]
        public string Name { get; set; }

        [DisplayFormat(DataFormatString = "{0:c}")]
        [Required(ErrorMessage = "Budget is required.")]
        [Column(TypeName = "money")]
        public decimal? Budget { get; set; }

        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "Start date is required.")]
        public DateTime StartDate { get; set; }

        [Display(Name = "Administrator")]
        public int? InstructorID { get; set; }

        public virtual Instructor Administrator { get; set; }
        public virtual ICollection<Course> Courses { get; set; }

         [Timestamp]
        public Byte[] Timestamp { get; set; }
    } 
```

是否可以在不使用隐藏字段的情况下使其工作？

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:37:30.603

您需要有`id`来自*某个地方*的值，否则无法保存该实体...... EF 没有它如何知道它正在保存的 ID？

它不必通过隐藏字段；`GET`它可能存在于对编辑操作的初始请求的查询字符串中。

# java - 如何在 Hibernate 中设置只读列？

> ID：14626341
> 
> 赞同：4
> 
> 时间：2013-01-31T12:56:31.390
> 
> 标签：java, database, hibernate, orm, relational-database

我不知道如何在 Hibernate 中强制只读列。

我想将 idgroup 设置为只读列。即使我设置`insertable=false`and `updatable=false`，在休眠 SQL 中我也可以阅读：

```
Hibernate: insert into groups (description, name, account_idaccount, idgroup) values (?, ?, ?, ?) 
```

但我想获得：

```
insert into groups (description, name, account_idaccount) values (?, ?, ?) 
```

这是我的课程：

```
@Entity
@Table(name = "groups")
public class Group implements java.io.Serializable {

private static final long serialVersionUID = -2948610975819234753L;
private GroupId id;
private Account account;
private String name;
private String description;

@EmbeddedId
@AttributeOverrides({@AttributeOverride(name = "idgroup", column = @Column(name = "idgroup", insertable = false)),
        @AttributeOverride(name = "accountIdaccount", column = @Column(name = "account_idaccount", nullable = false))})
public GroupId getId() {
    return id;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "account_idaccount", nullable = false, insertable = false, updatable = false)
public Account getAccount() {
    return account;
}

@Column(name = "description", length = 512)
public String getDescription() {
    return description;
}

@Column(name = "name", nullable = false, length = 128)
public String getName() {
    return name;
}
..
} 
```

```
@Embeddable
public class GroupId implements java.io.Serializable {

private int idgroup;
private int accountIdaccount;

@Column(name = "idgroup", insertable= false, updatable= false)
public int getIdgroup() {
    return this.idgroup;
}

@Column(name = "account_idaccount", nullable = false)
public int getAccountIdaccount() {
    return this.accountIdaccount;
}
..
} 
```

我想为 idgroup 设置一个只读列，因为我可以利用 DBMS 的 id 自动生成，我不想在 Hibernate 中使用密钥自动生成，因为它不是集群安全的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T13:05:32.047

我认为您可以将`@Column`注释标记为`updatable=false`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-03T00:46:06.707

简单的：

```
@Column(insertable = false, updatable = false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T14:35:31.047

我能够通过使用 2 个 DAO 对象来实现这一点。我知道它可能不是首选，但我没有看到另一种解决方法。将字段设置为`insertable=false`并且`updatable=false`不从插入 SQL 中删除列，因此 Postgres 不会调用`default`操作来填充这些列值。

```
 // GroupWrite

   @Entity
   @Table(name = "group")
   public class GroupWrite {

      @Id
      @Column(name = "account")
      private Account account;

      @Column(name = "name")
      private String name;

      @Column(name = "description")
      private String description;

      /* Getters and Setters */
  } 
```

--

```
 // GroupRead

   @Entity
   @Table(name = "group")
   public class GroupRead {

      @EmbeddedId
      @Column(name = "id")
      private GroupId id;

      @Column(name = "account")
      private Account account;

      @Column(name = "name")
      private String name;

      @Column(name = "description")
      private String description;

      /* Getters and Setters */
  } 
```

然后您需要`GroupRead`在使用`select`查询时和`GroupWrite`在执行`insert`或`update`查询时使用。

如果您想以一种通用的方式使用两者的属性，您可以实现一个描述重叠字段的接口。

```
 public interface Group {

        Account getAccount();

        void setAccount(Account account);
   }

   public class GroupWrite implements Group {...}

   public class GroupRead implements Group {...} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-18T13:49:29.683

解决方案是使用包装类，例如`Integer`，**而不是原始**类型，例如`int`. 当 Hibernate 将获得一个空指针时，它会将 id 的生成委托给 DBMS。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-08-18T09:14:34.380

在这种情况下，@ReadOnlyProperty 注释将帮助您。

# android - Android中许多活动中的布局的一部分

> ID：14626343
> 
> 赞同：0
> 
> 时间：2013-01-31T12:56:36.013
> 
> 标签：android, android-layout

这是我的想法的概念。我有我的活动：

```
public class FirstActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.first_activity);

        Button next = (Button) findViewById(R.id.nextActivity);
        next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
                startActivity(intent);
            }
        });
    }
} 
```

这是xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.example.actionbartest.ClassTabs
        android:id="@+id/tab"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        />

</LinearLayout> 
```

这是 ClassTabs 类：

```
public class ClassTabs extends LinearLayout{

    Button nextButton;
    LinearLayout tabs;
    private int count = 0;

    public ClassTabs(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public ClassTabs(Context context) {
        super(context);
    }
    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        ((Activity)getContext()).getLayoutInflater().inflate(R.layout.tabview, this);
        setupViewItems();
    }

    private void setupViewItems() {
        nextButton = (Button) findViewById(R.id.nextActivity);
        tabs = (LinearLayout) findViewById(R.id.toptab);

    }
    public void addTab(Button child){
        if(child!=null){
            tabs.addView(child);
            count++;
        }
    }
    public int getCount() {
        return count;
    }
    public void setCount(int count) {
        this.count = count;
    }
} 
```

和标签视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
   >

    <LinearLayout
        android:id="@+id/toptab"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:orientation="horizontal" 
        android:background="@color/blue">
    </LinearLayout>

    <Button
        android:id="@+id/nextActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Next" />

</LinearLayout> 
```

我想做这样的事情：你在第一个活动中。只有您看到的是蓝色 40dp 布局和“下一步”按钮。单击按钮，您会看到第二个活动，并且您会看到与蓝色布局和按钮相同的布局，但在蓝色布局中，左侧是一个按钮。当您再次单击“下一步”按钮时，您将看到第三个具有相同布局的活动，但在蓝色布局中是两个按钮，一个紧挨一个，等等。我该怎么做？我在每个活动中都有相同的布局，但第二个活动应该知道在第一个活动中添加了按钮，第三个活动应该知道并显示两个按钮等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:02:51.523

将所有按钮放到您的布局中，但将它们的可见性设置为消失，然后

活动 1：将 button1 可见性设置为可见

活动 2：将 button2 可见性设置为可见

活动 2：将按钮 2 和按钮 1 的可见性设置为可见

[编辑1]

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

通过捕获大小，您可以使用 if 条件来决定将显示哪个按钮

# magento - Magento - 如何将 UserId 而不是 OrderId 传递给 ADYEN SKIN

> ID：14626344
> 
> 赞同：-1
> 
> 时间：2013-01-31T12:56:37.547
> 
> 标签：magento, payment

我正在使用 adyen 通过信用卡付款，我注意到当用户付款时，Magento 上的模块将订单 ID 作为 MerchantReference 传递给 Adyen。为了在使用 adyen SKIN 付款期间激活“记住我的数据”，我需要传递 UserId 而不是 orderId。

任何建议如何解决它？

- - 更多信息 - -

这是特定模块： http: [//www.magentocommerce.com/magento-connect/adyen-payment.html](http://www.magentocommerce.com/magento-connect/adyen-payment.html)

而且，这是我们在另一个环境中为 Adyen 上的付款生成的表单示例。可以看到，merchantReference 是一个唯一值，它标识了第一个用户付款。该值是使用 UserId 计算的，因此我们可以识别用户进行下一次付款。

我应该需要知道插件 Adyen (for Magento) 在哪里生成这个表单，所以我可以使用 UserId 而不是 OrderId 来更改 MercerReference 参数

```
<form action="https://test.adyen.com/hpp/pay.shtml" 
      method="post" id="gatewayPaymentForm">
      <input type="hidden" name="merchantReference" value="Ajx">
      <input type="hidden" name="paymentAmount" value="2900">
      <input type="hidden" name="currencyCode"  value="EUR">
      <input type="hidden" name="shipBeforeDate" value="2013-02-03">
      <input type="hidden" name="skinCode" value="XDFGG">
      <input type="hidden" name="merchantAccount" value="NameAccount">
      <input type="hidden" name="shopperLocale" value="es">
      <input type="hidden" name="sessionValidity" value="2013-01-31T16:35:31+01:00">
      <input type="hidden" name="merchantSig" value="bcbXNhsd">
      <input type="hidden" name="shopperEmail" value="asd@gmail.com">
      <input type="hidden" name="shopperReference" value="5">
      <input type="hidden" name="recurringContract" value="ONECLICK">
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:08.853

已经解决了，我们修改了文件：/Madia/Adyen/Model/Adyen/Hpp.php

```
//To identify and remind user data with mail.
$adyFields['shopperReference'] = $customerEmail; 
```

它对我们有用。

# jquery - jquery live fastfilter (1.03) - 崩溃

> ID：14626346
> 
> 赞同：1
> 
> 时间：2013-01-31T12:56:41.533
> 
> 标签：jquery, jquery-plugins, filter, crash

我有一个巨大的名字列表，我想“过滤现场”。jquery live fastfilter 这样做： [http ://anthonybush.com/projects/jquery_fast_live_filter/demo/](http://anthonybush.com/projects/jquery_fast_live_filter/demo/)

它也为我这样做。但是，当您“过滤”（意味着删除字符，以使搜索范围再次扩大）时，它总是会崩溃。它与演示数据无关。和我的一样。任何想法？这是带有原始数据的小提琴 [例如尝试“nabokov”，它是 20 年代柏林的俄罗斯人的名字]：

该代码无济于事：

```
$('#search_input').fastLiveFilter('#search_list', {
    timeout: 200
}); 
```

[http://jsfiddle.net/Wp8bJ/](http://jsfiddle.net/Wp8bJ/)

# c# - C# DateTime 被复制而不改变格式

> ID：14626348
> 
> 赞同：0
> 
> 时间：2013-01-31T12:56:45.307
> 
> 标签：c#, datetime

我有一个日期和时间，应该将其复制到 DateTime 对象而不更改其格式。有没有办法解决它？

请看下面的代码

```
string dateTime = "07/20/11 14:40:28";
DateTime copyDateTime = Convert.ToDateTime(dateTime);
string dateTime2 = copyDateTime.ToString(); 
```

输出：

{7/20/2011 下午 2:40:28}

如果您注意到输出，它已更改为 PM。我想要它原来的样子。如何得到它？

编辑：我希望 dateTime2 的值与 dateTime 的值完全相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:57:45.417

格式本质上与`DateTime`. 格式只是一个显示属性。

如果您需要以您喜欢的格式显示它，而不是简单地调用：

```
Console.WriteLine(copyDateTime.ToString("G")); 
```

有关标准格式字符串的完整列表，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:00:15.817

在输出之前，您需要将 DateTime 转换回字符串。默认情况下，它只调用“ToString”，它使用为当前用户/语言环境配置的默认 DateTime 格式。

使用 ToString 并指定格式将日期时间转换回字符串，然后您可以控制格式。

# php - 请帮助我进行 URL 路由

> ID：14626355
> 
> 赞同：-3
> 
> 时间：2013-01-31T12:57:30.907
> 
> 标签：php, mod-rewrite

我是这个路由和 mod-reqrite 等的完整初学者。东西。我在这里遵循了有关 URL 路由的教程：[http://wettone.com/code/clean-urls](http://wettone.com/code/clean-urls)，但无法使其正常工作。

我只想路由 ALL 和任何类型的 URL，例如

```
http://wettone.com/weblog/2000/01/01/example
http://wettone.com/weblog/2000/01/01
http://wettone.com/weblog/2000/01
http://wettone.com/weblog/2000 
```

到文档根目录中的 weblog 文件夹中的 index.php 脚本，目录路径为：

```
http://wettone.com/weblog/index.php?y=2000&m=01&d=01&n=example
http://wettone.com/weblog/index.php?y=2000&m=01&d=01
http://wettone.com/weblog/index.php?y=2000&m=01
http://wettone.com/weblog/index.php?y=2000 
```

我怎样才能做到这一点。顺便说一句，我更喜欢保持简单而不使用任何框架

提前谢谢...

**编辑：我可以知道为什么投反对票吗？我做错了什么？我不能在这里问这种类型的问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:04:29.480

所以基本上你希望一切都映射到 index.php？如果是，这里的片段取自 symfony1 htaccess

```
# we check if the .html version is here (caching)
RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f

# no, so we redirect to our front web controller
RewriteRule ^(.*)$ index.php [QSA,L] 
```

在 php 中，如果我没记错的话，你必须使用 $_SERVER['REQUEST_URI'] 来解析 uri 并决定显示什么

最好只使用 symfony2 组件来完成这项工作[http://symfony.com/doc/current/components/routing/introduction.html](http://symfony.com/doc/current/components/routing/introduction.html) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:00:47.600

使用 htaccess

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /weblog/

RewriteRule (.*)/(.*)/(.*)/(.*)$ index.php?y=$1&m=$2&d=$3&n=$4 
```

# facebook - Facebook 请求对话框 - 有没有办法禁用无摩擦请求？

> ID：14626359
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:37.463
> 
> 标签：facebook, social-networking, facebook-requests

我正在开发一个 Facebook 应用程序。

在那个应用程序中，我必须向多个用户发送应用请求。我正在使用“[请求”对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)发送请求。

在对话框中，朋友列表会出现一个复选框，上面写着“在从这个应用程序向这些朋友发送请求之前不要再询问”。

我不想要那个复选框。我怎样才能删除该选项？我在哪里可以在 JS SDK 或开发者应用程序设置中更改该设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:21:16.707

除非文档不正确，否则您需要传递`frictionlessRequests: true`您的调用`FB.init()`以触发无摩擦请求。

如果您正在这样做并且不想要无摩擦请求，请不要在调用`FB.init()`.

如果不是，并且复选框仍然自动出现，您应该使用`Report Documentation Bug`文档上的链接要求 Facebook 更新文档

# php - 主页上精选帖子的 Wordpress 滑块

> ID：14626363
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:47.823
> 
> 标签：php, jquery, jquery-plugins, wordpress

这就是我想要做的 - 来源 - [http://www.torontostandard.com/](http://www.torontostandard.com/)

![可滚动](../Images/fe36255ae9c53c668159f164bd4afcac.png)

有这种外观和感觉的插件吗？

我使用这段时间来获取带有特色标签的帖子。

但是，如果我可以使用 jquery 循环会更好，但找不到任何关于此的教程:(

```
<?php query_posts('tag=featured'); ?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
<?php the_post_thumbnail('thumbnail'); ?>
<?php the_title(); ?>
<?php the_excerpt(); ?>  
<?php endwhile; endif; ?> 
```

PS-这个插件用谷歌搜索了很多，但找不到任何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:09:44.357

我总是发现，如果我想从网站上窃取 jquery 插件，我只需查看源代码并搜索 js 文件：

```
<script type="text/javascript" src="/js/libraries/jquery.scrollTo-min.js"></script> 
```

但是我总是只建立自己的，但那就是我。

# emacs - 在 grep 模式下评估 sexp 并在新缓冲区中显示输出

> ID：14626364
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:47.693
> 
> 标签：emacs, lisp

按照[这个食谱](http://emacswiki.org/emacs/GrepMode#toc19)，我准备了这个搜索命令：

```
(shell-command "grep . /tmp/listoffiles | xargs grep -n mystring" 1) 
```

如果我使用`eval-last-sexp`( `^`++ `x`)运行它`e`，则在命令之后将出现一个包含匹配项的列表，其格式与`grep-mode`. 但是这个缓冲区*不在*，`grep-mode`所以我不能自动跳转到所需的文件/行。

我想要的是：我将使用一个缓冲区来输入我的搜索命令；转到其中一个命令的末尾，然后按下组合键将触发一个功能`run-grep-in-other-buffer`。此函数必须执行以下操作：

1.  在 处评估搜索命令`point`，如下所示`eval-last-sexp`
2.  创建一个**新**缓冲区
3.  在新缓冲区中输出搜索命令的结果
4.  将新缓冲区设置为`grep-mode`
5.  激活新缓冲区。

我`lisp`的真的很有限。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:05:26.913

您可以直接使用此功能，而不是使用 shell 命令进行构造：

```
(defun run-grep-in-other-buffer (str)
  (interactive)
  (let ((grep-host-defaults-alist nil)
        (grep-command str))
    (call-interactively 'grep))) 
```

运行这个`eval-last-sexp`：

```
(run-grep-in-other-buffer "grep . /tmp/listoffiles1 | xargs grep -n list")
(run-grep-in-other-buffer "grep . /tmp/listoffiles2 | xargs grep -n list") 
```

# jquery - 将淡入更改为幻灯片

> ID：14626367
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:53.393
> 
> 标签：jquery, fadein, slide, fade

我有一个菜单结构：

```
<ul id="nav">
    <li id="button1" class="active"><a href="#page-1" title="creative">creativ</a><
    <li id="button1"><a href="#page-1" title="creative">creativ</a>
</ul> 
```

我每`.active`堂课都添加背景图片：

```
#nav li.active a {
    cursor: default;
    background: url(images/nav-li-a_hover.png) no-repeat bottom center;
    padding-bottom: 5px;
} 
```

我在课堂上添加了`fadeIn`效果。`active`

```
$('ul#nav li').click(function() {
    $(this).hide().addClass('.active').fadeIn(500);
}); 
```

但是现在，我想更改为幻灯片效果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:16:27.380

将fadeIn 更改为slideDown 并将fadeOut 更改为slideUp 一个有效的dom 将是

```
<ul id="nav">
    <li class="button1 active"><a href="#page-1" title="creative">creativ</a></li>
    <li class="button1"><a href="#page-1" title="creative">creativ</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:59:14.593

使用 slideUp 方法

```
$(this).hide().addClass('.active').slideUp(); 
```

# php - 在 googlemaps 上实现自定义信息窗口？

> ID：14626368
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:53.513
> 
> 标签：php, google-maps, customization, infowindow

我需要在我的谷歌地图上实现一个自定义信息窗口。

我在这里找到了这个自定义信息窗口：[在 Google 地图中创建自定义信息窗口](https://stackoverflow.com/questions/2579777/creating-custom-info-windows-in-google-maps)

我使用 Googles Developers page 提供的代码来创建地图，并且在典型的信息窗口中一切正常。现在我更改了代码以尝试实现上述自定义信息窗口，称为“信息框”。但是它不起作用。我不确定我是否正确使用了代码。

这是我的谷歌地图代码。注意 infoBox 功能，是自定义信息窗口。

```
<!DOCTYPE html >
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL and Google Maps Example</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 15,
        mapTypeId: 'roadmap'
      });

      //var infoWindow = new google.maps.InfoWindow;
      infobox = new InfoBox({ width: "260px" }); // initialize

      // Change this depending on the name of your PHP file
      downloadUrl("testing.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infobox, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infobox, html) {
      google.maps.event.addListener(marker, 'click', function() {
        //infoWindow.setContent(html);
        //infoWindow.open(map, marker);
        infobox.setContent(html);  // set content
        infobox.open(map, marker);   // open on the marker
        infobox.draw(); // to redraw if infobox size changed
        //infobox.close();

      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function InfoBox(opt_opts) {
        opt_opts = opt_opts || {};
        this.imgPath='img/infoBox/';
        google.maps.OverlayView.apply(this, arguments);
        // Standard options (in common with google.maps.InfoWindow):
        this.content_ = opt_opts.content || "";
        this.maxWidth_ = opt_opts.maxWidth || 0;
        this.pixelOffset_ = opt_opts.pixelOffset || new google.maps.Size(0, 0);
        this.position_ = opt_opts.position || new google.maps.LatLng(0, 0);
        this.zIndex_ = opt_opts.zIndex || null;

        // Additional options (unique to InfoBox):
        this.boxStyle_ = opt_opts || {};
        this.infoBoxClearance_ = new google.maps.Size(1, 1);
        this.isHidden_ = opt_opts.isHidden || false;
        this.pane_ = "overlayMouseTarget";
        this.enableEventPropagation_ = opt_opts.enableEventPropagation || false;
        this.div_ = null;
        this.closeListener_ = null;
        this.eventListener1_ = null;
        this.eventListener2_ = null;
        this.eventListener3_ = null;
        this.contextListener_ = null;
        this.fixedWidthSet_ = null;
    }

    /* InfoBox extends OverlayView in the Google Maps API v3\. */
    InfoBox.prototype = new google.maps.OverlayView();

    // Creates the DIV representing the InfoBox. @private
    InfoBox.prototype.createInfoBoxDiv_ = function(){
        var bw, me = this;

        // This handler prevents an event in the InfoBox from being passed on to the map.
        var cancelHandler = function (e){ e.cancelBubble = true; if (e.stopPropagation) e.stopPropagation(); };
        // This handler ignores the current event in the InfoBox and conditionally prevents the event from being passed on to the map. It is used for the contextmenu event.
        var ignoreHandler = function (e) { e.returnValue = false; if (e.preventDefault) e.preventDefault(); if (!me.enableEventPropagation_){ e.cancelBubble = true; if (e.stopPropagation) e.stopPropagation(); } };

        if (!this.div_){    // first time create
            this.div_ = document.createElement("div");
            this.div_.className = 'infowindow';
            this.setBoxStyle_();

            // Apply required styles:
            if (this.zIndex_ !== null) this.div_.style.zIndex = this.zIndex_;

            this.div_.contentDiv = document.createElement('div');
            this.div_.contentDiv.className = 'infowindow-wrapper';
            this.div_.contentDiv.innerHTML = this.content_;
            this.div_.innerHTML = '<img src="'+this.imgPath+'close.png" align="right" class="infowindow-close">';
            this.div_.appendChild(this.div_.contentDiv);

            // Add the InfoBox DIV to the DOM
            this.getPanes()[this.pane_].appendChild(this.div_);
            this.addClickHandler_();
            if (this.div_.style.width) this.fixedWidthSet_ = true;
            else {
                if (this.maxWidth_ !== 0 && this.div_.offsetWidth > this.maxWidth_) {
                    this.div_.style.width = this.maxWidth_;
                    this.fixedWidthSet_ = true;
                } 
                else { // The following code is needed to overcome problems with MSIE
                    bw = this.getBoxWidths_();
                    this.div_.style.width = (this.div_.offsetWidth - bw.left - bw.right) + "px";
                    this.fixedWidthSet_ = false;
                }
            }

            //add shadow
            this.shadowContainer_ = document.createElement("div");
            this.shadowContainer_.style.position='absolute';
            this.shadowContainer_.style.display = 'block';
            this.shadowContainer_.style.zIndex='-99';
            this.getPanes()['overlayShadow'].appendChild(this.shadowContainer_);

            this.shadow = document.createElement('img');
            this.shadow.src = this.imgPath+'shadow.png';
            this.shadow.style.position='absolute';
            this.shadow.style.width = '100%';
            this.shadow.style.height    = '100%';

            this.shadowContainer_.appendChild(this.shadow);
            if (!this.enableEventPropagation_) {
                this.eventListener1_ = google.maps.event.addDomListener(this.div_.contentDiv, "mousedown", cancelHandler);
                this.eventListener2_ = google.maps.event.addDomListener(this.div_, "click", function(e){
                    e.cancelBubble = true; if (e.stopPropagation) e.stopPropagation();
                    if (GoogleMap && GoogleMap.closeEditors) GoogleMap.closeEditors(true);              
                });
                //this.eventListener3_ = google.maps.event.addDomListener(this.div_, "dblclick", cancelHandler);
                try{ this.eventListener3_ = google.maps.event.addDomListener(this.div_, "dblclick", facilityEditor);}catch(e){}
            }
            this.contextListener_ = google.maps.event.addDomListener(this.div_, "contextmenu", ignoreHandler);

            var contentWidth = parseInt(this.div_.style.width.slice(0,-2)), contentHeight = this.div_.offsetHeight;
            this.wrapperParts = { //create an object to reference each image
                tl:{l:-26, t:-26, w:26, h:26},
                t:{l:0, t:-26, w:contentWidth, h:26},
                tr:{l:contentWidth, t:-26, w:26, h:26},
                l:{l:-26, t:0, w:26, h:contentHeight},
                r:{l:contentWidth, t:0, w:26, h: contentHeight },
                bl:{l:-26, t:contentHeight, w:26, h:26},
                b:{l:0, t:contentHeight, w:contentWidth, h:26},
                br:{l:contentWidth, t:contentHeight, w:26, h:26},
                p:{l:contentWidth-170, t:contentHeight+18, w:92, h:77 }
            }
            for (i in this.wrapperParts){ //create the image DOM objects
                var img = document.createElement('img');
                img.src = this.imgPath + i + '.png'; //load the image from your local image directory based on the property name of the wrapperParts object
                img.style.position='absolute'; //set the appropriate positioning attributes
                img.style.top=this.wrapperParts[i].t+'px';
                img.style.left=this.wrapperParts[i].l+'px';
                img.style.width=this.wrapperParts[i].w+'px';
                img.style.height=this.wrapperParts[i].h+'px';
                this.div_.appendChild(img);
                this.wrapperParts[i].img = img;
            }
            google.maps.event.trigger(this, "domready");
        }

        else {
            var contentWidth = parseInt(this.div_.style.width.slice(0,-2)), contentHeight = this.div_.offsetHeight, twp=this.wrapperParts;
            twp.t.img.style.width=contentWidth+'px';
            twp.tr.img.style.left=contentWidth+'px';
            twp.l.img.style.height=contentHeight+'px';
            twp.r.img.style.left=contentWidth+'px';
            twp.r.img.style.height=contentHeight+'px';
            twp.bl.img.style.top=contentHeight+'px';
            twp.b.img.style.top=contentHeight+'px';
            twp.b.img.style.width=contentWidth+'px';
            twp.br.img.style.left=contentWidth+'px';
            twp.br.img.style.top=contentHeight+'px';
            twp.p.img.style.left=(contentWidth-170)+'px';
            twp.p.img.style.top=(contentHeight+18)+'px';
        }
    };

    InfoBox.prototype.addClickHandler_=function(){ 
        this.closeListener_ = google.maps.event.addDomListener(this.div_.firstChild, 'click', this.getCloseClickHandler_());
        try{ this.eventListener3_ = google.maps.event.addDomListener(this.div_, "dblclick", facilityEditor);}catch(e){}
    };
    InfoBox.prototype.getCloseClickHandler_=function () { var me = this; return function(){ me.close(); google.maps.event.trigger(me, "closeclick"); }; };

    //Pans the map so that the InfoBox appears entirely within the map's visible area. @private
    InfoBox.prototype.panBox_ = function (disablePan) {
      if (!disablePan) {
        var map = this.getMap();
        var bounds = map.getBounds();
        // The degrees per pixel
        var mapDiv = map.getDiv();
        var mapWidth = mapDiv.offsetWidth;
        var mapHeight = mapDiv.offsetHeight;
        var boundsSpan = bounds.toSpan();
        var longSpan = boundsSpan.lng();
        var latSpan = boundsSpan.lat();
        var degPixelX = longSpan / mapWidth;
        var degPixelY = latSpan / mapHeight;

        // The bounds of the map
        var mapWestLng = bounds.getSouthWest().lng();
        var mapEastLng = bounds.getNorthEast().lng();
        var mapNorthLat = bounds.getNorthEast().lat();
        var mapSouthLat = bounds.getSouthWest().lat();

        // The bounds of the box
        var position = this.position_;
        var iwOffsetX = this.pixelOffset_.width;
        var iwOffsetY = this.pixelOffset_.height;
        var padX = this.infoBoxClearance_.width;
        var padY = this.infoBoxClearance_.height;

        var iwWestLng = position.lng() + (iwOffsetX - padX - this.div_.contentDiv.offsetWidth/2 - 450) * degPixelX; // 450 - move right - from under the sidebar
        var iwEastLng = position.lng() + (iwOffsetX + padX + 220) * degPixelX;
        var iwNorthLat = position.lat() - (iwOffsetY - padY - this.div_.contentDiv.offsetHeight - 180) * degPixelY; // 180 - move down - from under the top search bar
        var iwSouthLat = position.lat() - (iwOffsetY + padY + 20) * degPixelY;

        // Calculate center shift
        var shiftLng = (iwWestLng < mapWestLng ? mapWestLng - iwWestLng : 0) + (iwEastLng > mapEastLng ? mapEastLng - iwEastLng : 0);
        var shiftLat = (iwNorthLat > mapNorthLat ? mapNorthLat - iwNorthLat : 0) + (iwSouthLat < mapSouthLat ? mapSouthLat - iwSouthLat : 0);
        if (!(shiftLat === 0 && shiftLng === 0)) {
          // Move the map to the new shifted center.
          var c = map.getCenter();
          map.setCenter(new google.maps.LatLng(c.lat() - shiftLat, c.lng() - shiftLng));
        }
      }
    };

    // Sets the style of the InfoBox. @private
     InfoBox.prototype.setBoxStyle_ = function () {
      var i;
      var boxStyle = this.boxStyle_;
      for (i in boxStyle)  if (boxStyle.hasOwnProperty(i))  this.div_.style[i] = boxStyle[i];
      // Fix up opacity style for benefit of MSIE:
      if (typeof this.div_.style.opacity !== "undefined")  this.div_.style.filter = "alpha(opacity=" + (this.div_.style.opacity * 100) + ")";
    };

    // Get the widths of the borders of the InfoBox. @private; @return {Object} widths object (top, bottom left, right)
    InfoBox.prototype.getBoxWidths_ = function () {
      var computedStyle;
      var bw = {top: 0, bottom: 0, left: 0, right: 0};
      var box = this.div_;
      if (document.defaultView && document.defaultView.getComputedStyle) {
        computedStyle = box.ownerDocument.defaultView.getComputedStyle(box, "");
        if (computedStyle) {
          // The computed styles are always in pixel units (good!)
          bw.top = parseInt(computedStyle.borderTopWidth, 10) || 0;
          bw.bottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;
          bw.left = parseInt(computedStyle.borderLeftWidth, 10) || 0;
          bw.right = parseInt(computedStyle.borderRightWidth, 10) || 0;
        }
      } 
      else if (document.documentElement.currentStyle) { // MSIE
        if (box.currentStyle) {
          // The current styles may not be in pixel units, but assume they are (bad!)
          bw.top = parseInt(box.currentStyle.borderTopWidth, 10) || 0;
          bw.bottom = parseInt(box.currentStyle.borderBottomWidth, 10) || 0;
          bw.left = parseInt(box.currentStyle.borderLeftWidth, 10) || 0;
          bw.right = parseInt(box.currentStyle.borderRightWidth, 10) || 0;
        }
      }
      return bw;
    };

    // Invoked when <tt>close</tt> is called. Do not call it directly.
    InfoBox.prototype.onRemove = function () {
      if (this.div_) {
         this.shadowContainer_.parentNode.removeChild(this.shadowContainer_);
        this.div_.parentNode.removeChild(this.div_);
        this.div_ = null;
      }
    };

    //Draws the InfoBox based on the current map projection and zoom level.
    InfoBox.prototype.draw = function(){
        this.createInfoBoxDiv_();
        var pixPosition = this.getProjection().fromLatLngToDivPixel(this.position_);

        this.div_.style.left = (pixPosition.x - this.div_.offsetWidth + 180 ) + "px";
        this.div_.style.top = (pixPosition.y - this.div_.offsetHeight - 125) + "px";

        this.shadowContainer_.style.left = (pixPosition.x - this.div_.offsetWidth + 220 ) + 'px';
        this.shadowContainer_.style.top = (pixPosition.y - this.div_.offsetHeight - 130) + "px";

        this.shadowContainer_.style.height = (this.div_.offsetHeight+100 ) + 'px';
        this.shadowContainer_.style.width = (this.div_.offsetWidth+100 ) + 'px';

        if (this.isHidden_) this.div_.style.visibility = 'hidden';
        else this.div_.style.visibility = "visible";

        this.panBox_();
    };

    InfoBox.prototype.setContent = function(content){
        this.content_ = content;
        if (this.div_){// Odd code required to make things work with MSIE.
            this.div_.style.visibility='hidden'
            if (!this.fixedWidthSet_) this.div_.style.width = "";
            this.div_.contentDiv.innerHTML = content;
            // Perverse code required to make things work with MSIE. (Ensures the close box does, in fact, float to the right.)
            if (!this.fixedWidthSet_){ this.div_.style.width = this.div_.offsetWidth + "px"; this.div_.contentDiv.innerHTML = content; }
            this.addClickHandler_();
        }
        // This event is fired when the content of the InfoBox changes. @name InfoBox#content_changed; @event
        google.maps.event.trigger(this, "content_changed");
    };

    //Sets the geographic location of the InfoBox. @param {LatLng} latlng
    InfoBox.prototype.setPosition = function (latlng) { 
      this.position_ = latlng;
      if (this.div_) this.draw();
      //This event is fired when the position of the InfoBox changes. @name InfoBox#position_changed;  @event
      google.maps.event.trigger(this, "position_changed");
    };

    InfoBox.prototype.getContent = function () {  return this.content_; }; //Returns the content of the InfoBox. @returns {string}
    InfoBox.prototype.show = function (){ this.isHidden_ = false; this.div_.style.visibility = "visible"; }; //Shows the InfoBox.
    InfoBox.prototype.hide = function (){ this.isHidden_ = true; this.div_.style.visibility = "hidden"; }; //Hides the InfoBox.

    InfoBox.prototype.open = function (map, anchor) {
        if (anchor) this.position_ = anchor.getPosition();
        this.setMap(map);
    };

    //Removes the InfoBox from the map.
    InfoBox.prototype.close = function (){
      if (this.closeListener_) {
        google.maps.event.removeListener(this.closeListener_);
        this.closeListener_ = null;
      }
      if (this.contextListener_) {
        google.maps.event.removeListener(this.contextListener_);
        this.contextListener_ = null;
      }

      this.setMap(null);
    };

    function doNothing() {}

    //]]>

  </script>

  </head>

  <body onload="load()">
    <div id="map" style="width: 100%; height: 600px"></div>
  </body>

</html> 
```

在上面的代码中，我只是用新的 infobox 更改了所有提到 infowindow 的内容，并添加了新的函数 InfoBox()。但是我不确定，我应该如何以及在哪里使用

```
infobox.setContent(html);  // set content
infobox.open(map, marker);   // open on the marker
infobox.draw(); // to redraw if infobox size changed
infobox.close(); 
```

我应该在哪里使用 infobox.close() 函数？在我的代码中，我评论了这一行，因为我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:00:40.050

我相信您缺少`position: absolute`信息框的样式以及未在 css 中设置的背景颜色（最初我在 css 中设置了该样式，这就是它对我有用的原因:-)）

在您的代码中查找这一行：

```
this.div_.className = 'infowindow'; 
```

并在下面添加：

```
this.div_.style.position = 'absolute';
this.div_.style.backgroundColor = '#fff'; 
```

您还应该为信息框添加一些图像，因为整个框是基于图像构建的（您将在脚本中找到参考）。

# ruby-on-rails - 如何为红宝石安装win32ole

> ID：14626371
> 
> 赞同：2
> 
> 时间：2013-01-31T12:57:56.680
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, win32ole

有谁知道为 ruby​​ 安装 win32ole 的命令。宝石安装 win32ole 不起作用

我正在尝试让 require 'win32ole' 工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:19:23.817

`win32ole`是用于公开 Windows 操作系统内部 API 的 gem。[Ruby on Windows](http://rubyonwindows.blogspot.com/)是一个很棒的博客，它利用 gem 来自动化许多 Windows 应用程序。

但是，由于 gem 严重依赖于公开 Windows API（因此 gem 的名称），因此 gem 在 Windows 以外的任何其他操作系统上均不可用。

# sql - 如何在 SQL 中替换 PIVOT 中的空值

> ID：14626372
> 
> 赞同：0
> 
> 时间：2013-01-31T12:57:59.870
> 
> 标签：sql, null, pivot

我有以下代码，我试图用零替换使用枢轴时出现的 Null。我做了以下，但它说“'ISNULL'附近的语法不正确。” 我不确定我做错了什么？请有任何建议

```
select *
from #tempfinaltable
pivot ISNULL(sum(TotalXSAAL),0) for Section_desc in
([Communication],[Construction],[Energy],[Financial Institutions],
 [General Property],[HIGHER ED & HEALTHCARE],
 [Inland Marine],[Real Estate])) AS AALs 
```

我正在使用的动态 SQL 相同。上面的查询只是显示名称，所以你可以看到我正在使用什么

```
 select *
from #tempfinaltable
pivot (sum(TotalXSAAL) for Section_desc in
' + '('+@BranchNames++')) AS AALs' 
```

你能告诉我这个说法有什么问题吗？我有一个语法问题：

```
BEGIN 

    Set @ISNullBranchNames = @ISNullBranchNames + 'ISNULL('+(@BranchNames+',0),' 
    Set @BranchNames = @BranchNames + '['+@BranchName+'],'

    FETCH NEXT FROM CUR1 INTO @BranchName

END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:01:11.333

所有`PIVOT`子句必须在括号中。

结果查询必须如下所示：

```
SELECT 
      'TotalXSAAL' as Col,
      ISNULL([Communication], 0) AS [Communication],
      ISNULL([Construction], 0) AS [Construction],
      ...,
      ...,
      ... 
FROM #tempfinaltable
PIVOT
(
  SUM(TotalXSAAL) for
  Section_desc in
  (
    [Communication],[Construction],[Energy],[Financial Institutions],
    [General Property],[HIGHER ED & HEALTHCARE],
    [Inland Marine],[Real Estate]
  )
)AS AALs 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/82630/5)**

**更新**

如何生成部分动态 SQL。

```
DECLARE @ISNullBranchNames nvarchar(MAX) = N'' -- you mast add empty string first, otherwise you will get NULL inresult
DECLARE @BranchNames nvarchar(MAX) = N''
.....
BEGIN 

    Set @ISNullBranchNames =
             @ISNullBranchNames + 'ISNULL([' + @BranchName + '], 0) AS [' + @BranchName +'], '
    Set @BranchNames = @BranchNames + '['+@BranchName+'],'

    FETCH NEXT FROM CUR1 INTO @BranchName

END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-17T16:39:15.447

如果你想**`NULL`**用空字符串替换 PIVOT TABLE 然后

```
ISNULL ( CAST (SUM(UnitPrice]) as NVARCHAR),'') 
```

这会将 UnitPrice 的 SUM 值转换为 VARCHAR，然后使用 ISNULL 将其替换为空字符串

# symfony - Symfony2, Doctrine, getDoctrine() 没有 __construct() 方法

> ID：14626377
> 
> 赞同：1
> 
> 时间：2013-01-31T12:58:25.923
> 
> 标签：symfony, service, controller, doctrine

我们有服务

```
services:
    service_name:
        class: One\SomeBundle\Controller\OurController 
```

我们需要添加什么来使 $this->getDoctrine() 在我们的 "OurController" 中工作？我在“OurController”中尝试过

```
$this->countainer->get('doctrine') 
// and
$this->getDoctrine() 
```

但什么也没发生，只是错误。

我希望这个控制器使用本机方法，例如 $this->getDoctrine()。据我所知，我们可以为控制器提供参数（services.yml 中的参数），然后应用它，但我们可以将其设置为默认值吗？没有

```
function __construct($em)
{
    $this->em = $em;
} 
```

和其他额外的东西。我所需要的只是让 $this->getDocrine() 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:21:21.790

我认为该学说适用于所有这样的控制器

`$em = $this->getDoctrine()->getEntityManager();`

如果您希望在您的服务中使用该学说，请使用类似这样的东西

```
services:
    your.service:
        class: YourVendor\YourBundle\Service\YourService
        arguments: [ @doctrine.orm.entity_manager ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:22:27.223

定义服务时，必须将参数作为参数传递如下（因为默认情况下服务无权访问主容器）：

```
<services>
    <service id="myservice" class="path/to/my/class">
        <argument type="service" id="doctrine" />
        ...
    </service>
</services> 
```

这是在 xml 中配置的，但如果您愿意，我会让您将其转换为 yml。

然后在您的服务类中，您只需将构造函数设置为：

```
class MyServiceClass
{
    protected $doctrine;

    public function __construct(\Doctrine $doctrine, ...)
    {
        $this->doctrine = $doctrine;
        ....
    }
} 
```

现在，学说服务将在您自己的服务类中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:32:27.053

您可以使用 JMSDiExtra 为 Controller 中的属性设置服务：

控制器代码：

```
<?php

namespace Acme\DemoBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use JMS\DiExtraBundle\Annotation as DI;

/**
 * Controller class
 */
class MyController extends Controller
{
    /**
     * @DI\Inject
     */
    protected $request;

    /**
     * @DI\Inject("doctrine.orm.entity_manager")
     */
    protected $em;

    // .....

    /**
     * Action
     */
    public function myAction()
    {
        // ....
        $this->em->persist($myObject);
        // ....
    }
} 
```

更多关于 JMSDiExtra 的文档 - [http://jmsyst.com/bundles/JMSDiExtraBundle](http://jmsyst.com/bundles/JMSDiExtraBundle)

这个包是 Symfony2 框架中的默认包

# html - Chrome在创建和销毁后重新下载相同的视频 标签

> ID：14626379
> 
> 赞同：1
> 
> 时间：2013-01-31T12:58:32.483
> 
> 标签：html, google-chrome, video, dynamic

我正在创建一个视频库。每当用户点击缩略图时，“视频”元素会动态附加到页面以让用户观看视频（我已经尝试显示/隐藏视频，但 chrome 加载页面速度很慢，所以我选择了动态方法）。问题是，如果用户关闭视频（破坏“视频”元素）并点击相同的缩略图（因此，重新创建了“视频”元素），Chrome 会产生一个新的网络请求来下载视频，但是这个请求在队列中挂起，因为服务器每次只允许每个文件和每个 IP 1 个请求（因为之前打开视频导致视频被下载）。这在 Firefox 中不会发生，浏览器不会重新下载视频，而是重用之前下载的视频......

谢谢你。

**更新**

这是我用来添加的代码：

```
$(this).find(".gallery > li").append("<video id=\"articlevideoobj\" class=\"videoProd\" preload=\"none\" controls=\"true\"><source src=\"" + video_src + ".mp4\" type=\"video/mp4\"><source src=\"" + video_src + ".ogg\" type=\"video/ogg\"</video>"); 
```

这是我用来删除它的代码：

```
if (video_mode) {
    $('#articlevideoobj').remove();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:38:25.797

在删除视频之前，请在视频对象上调用 .stop() 方法并将 src 设置为 '' ：

```
 function stopVideo(elementId)
 {
   var video = document.getElementById(elementId);

   video.pause();
   video.src = '';
   video.parentNode.removeChild(video);
 } 
```

# vba - 从图形系列中检索参考

> ID：14626381
> 
> 赞同：1
> 
> 时间：2013-01-31T12:58:39.377
> 
> 标签：vba, excel, graph, charts

我在 excel 中有两个主表（模板），其中包含数据和图表的格式。使用 VBA，我创建了一个代码来自动复制这些主表。但是我在让图表从正确的表格中获取数据时遇到了一些问题。

主表中的 graph.collectionseries.Value 具有如下参考：

```
"=Master_sheet!A1:B2" 
```

每次我复制并熟练使用此主表时，我都需要更改所有参考

```
"=Master_sheet!A1:B2" --> "=LocationX!A1:B2"  or "=LocationY!A1:B2" 
```

我的不起作用的方法如下：

`Value_old = ActiveChart.SeriesCollection().Value` <-- 这将返回一个字符串值，而不是带有引用的字符串！

```
Value_new = Replace(Value_Old, "Master_sheet", " LocationX")
ActiveChart.SeriesCollection().Value = Value_new 
```

如何从 SeriesCollection.Value 或名称中获取参考？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:14:22.230

目前尚不清楚您要达到的目标。但是，如果您想获取`Chart.SeriesCollection`源数据地址，请尝试以下操作：

```
ActiveChart.SeriesCollection(1).FormulaLocal 
```

因此，如果您需要获取每个系列，那么您必须循环遍历..

# javascript - 选择另一个 TD 类时，TD 类保持活动状态

> ID：14626382
> 
> 赞同：0
> 
> 时间：2013-01-31T12:58:39.113
> 
> 标签：javascript, class, html-table, dom-events

我需要指导编辑文件。我在下面发布了 Javascript。这是我的工作示例[http://www.closetos.com/top-shelf-awards_copy_copy](http://www.closetos.com/top-shelf-awards_copy_copy)的链接。

当我向表中添加额外的行时出现了问题。现在，当您在第二行的单元格中选择文本链接时，当单击顶行中的某些内容时，它会保持选中状态并处于活动状态。

```
function $(id)
{
return document.getElementById(id);
}

function Coalesce(Value, Default)
{
if(Value == null)
return Default;

return Value;
}

function Switcher(numberOfSections, sectionContainerID, activeClass, inactiveClass)
{
this.NumberOfSections   = Coalesce(numberOfSections, 1) - 1;
this.SectionContainerID = Coalesce(sectionContainerID, "sectionContainer");
this.ActiveClass        = Coalesce(activeClass, "active");
this.InactiveClass      = Coalesce(inactiveClass, "");
}

Switcher.prototype.Switch = function(TheLink, SectionID)
{
// Make sure all sections are hidden
var SectionContainer = $(this.SectionContainerID);
for(var ct = 0; ct < SectionContainer.childNodes.length; ct++)
{
var node = SectionContainer.childNodes[ct];
if(node.nodeType != 1)
    continue;

node.style.display = "none";
}

var First = true;
// Reset button styles
for(var ct = 0; ct < TheLink.parentNode.childNodes.length; ct++)
{
if(TheLink.parentNode.childNodes[ct].nodeType != 1)
    continue;
else node = TheLink.parentNode.childNodes[ct];

node.className = this.InactiveClass;

if(First)
{
    node.className += " firstCell";
    First = false;
}
}

// Show the selected section
$(SectionID).style.display  = "block";

TheLink.className = this.ActiveClass;
if(TheLink == node)
TheLink.className += " lastCell";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:37:28.437

您的问题出在这部分代码中。这仅查看单击的单元格所在的行。`TheLink.parentNode`是对单元格所在行的引用。

```
for(var ct = 0; ct < TheLink.parentNode.childNodes.length; ct++) <--- parenNode == row
{
    if(TheLink.parentNode.childNodes[ct].nodeType != 1)
    {
         continue;
    }
    else 
    {
        node = TheLink.parentNode.childNodes[ct];
    }

    node.className = this.InactiveClass;

    if(First)
    {
        node.className += " firstCell";
        First = false;
    }
} 
```

为了使它与多行一起工作，您需要对其进行修改以查看表中的其他行：

```
for(var ct = 0; ct < TheLink.parentNode.parentNode.childNodes.length; ct++) 
    {   

        for( innerL = 0; innerL < TheLink.parentNode.parentNode.childNodes[ct].childNodes.length; innerL++)
        { 
            if(TheLink.parentNode.parentNode.childNodes[ct].childNodes[innerL].nodeType != 1)
            {
                 continue;
            }
            else 
            {
                node = TheLink.parentNode.parentNode.childNodes[ct].childNodes[innerL];
            }

            node.className = this.InactiveClass;

            if(First)
            {
                node.className += " firstCell";
                First = false;
            }
        }
    } 
```

在上面的块中，您正在查看 parentNode 的 (tr) parentNode (tbody)，然后遍历它的孙子节点。这允许您捕获表中的所有单元格，而不仅仅是行。

[这是它工作的一个例子。](http://tinkerbin.com/9wn5Gymg)当您点击链接时，您需要点击页面左下方的绿色“运行”按钮以加载脚本。

# android - android 如何 [dependency] API<=15：将 annotations.jar 添加到类路径

> ID：14626388
> 
> 赞同：0
> 
> 时间：2013-01-31T12:59:03.577
> 
> 标签：android, ant, android-build

我通过编译android项目`"ant debug"`。（[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)）**

```
...
-build-setup:
     [echo] Resolving Build Target for MyFirstApp...
[gettarget] Project Target:   Android 2.3.3
[gettarget] API level:        10
     [echo] ----------
     [echo] Creating output directories if needed...
    [mkdir] Created dir: D:\myproj\android\MyFirstApp\bin
    [mkdir] Created dir: D:\myproj\android\MyFirstApp\bin\res
    [mkdir] Created dir: D:\myproj\android\MyFirstApp\gen
    [mkdir] Created dir: D:\myproj\android\MyFirstApp\bin\classes
    [mkdir] Created dir: D:\myproj\android\MyFirstApp\bin\dexedLibs
     [echo] ----------
     [echo] Resolving Dependencies for MyFirstApp...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency]
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath.
     [echo] ----------
     [echo] Building Libraries with 'debug'...
   [subant] No sub-builds to iterate on 
```

> 我在 ${sdk}\tools\support 下找到了 annotations.jar，并在 ${sdk}\tools\ant\build.xml 下面跟踪了 build.xml

```
<echo level="info">Resolving Dependencies for ${ant.project.name}...</echo>
        <dependency
                libraryFolderPathOut="project.library.folder.path"
                libraryPackagesOut="project.library.packages"
                libraryManifestFilePathOut="project.library.manifest.file.path"
                libraryResFolderPathOut="project.library.res.folder.path"
                libraryBinAidlFolderPathOut="project.library.bin.aidl.folder.path"
                libraryRFilePathOut="project.library.bin.r.file.path"
                libraryNativeFolderPathOut="project.library.native.folder.path"
                jarLibraryPathOut="project.all.jars.path"
                targetApi="${project.target.apilevel}"
                verbose="${verbose}" /> 
```

如何将 annotation.jar 添加到 CLASSPATH？PS：我已经在下添加`annontation.jar`了`D:\myproj\android\MyFirstApp\libs`，但仍然报告该消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:09:32.343

在您的 Android 清单 xml 中更改它需要 API 级别 15 的最低 SDK 版本

```
<uses-sdk
        android:minSdkVersion="10"
 /> 
```

至

```
<uses-sdk
        android:minSdkVersion="15"
/> 
```

因为依赖是 API 级别 15

# wpf - 需要帮助静态与单例对象

> ID：14626390
> 
> 赞同：0
> 
> 时间：2013-01-31T12:59:09.190
> 
> 标签：wpf, c#-4.0

我的应用程序需要一个对象。为了实现这一点，我有两种方法

1.  将对象定义为静态。

    ```
    public class App
    {
        public static MyClass myObject;
    } 
    ```

2.  使类单例

    ```
    public class MyClass
    {
        private MyClass()
        {
        }
        public static MyClass Instance
        {
            get
            {
                return Nested.instance;
            }
        }
        class Nested
        {
            static Nested()
            {
            }
            internal static readonly MyClass instance = new MyClass();
        }
     } 
    ```

任何人都可以帮助我了解这两种方法的优缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:01:21.413

我认为这两种方法都不好，您应该通过[依赖注入来调查](http://en.wikipedia.org/wiki/Dependency_injection)[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。

为什么上述解决方案不好？他们使测试成为一场噩梦，“全局”对象的生命周期由其消费者决定。[有关单例反模式的更多问题，](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)请参见此处。

相反，您最好创建对象，然后*将*其注入需要它的对象中。在这种情况下，注入只是意味着通过 setter 或构造函数参数提供它。

通过使用注入，您只配置需要这个“全局”组件的组件，并且通过使用接口，您可以替换不同的版本（例如，真实与模拟变体）。重要的是，“注入”组件的生命周期由周围的框架控制，而不是由消费实体控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:08:20.620

我认为这两个选项之间的主要区别是何时创建它的对象。在静态成员的情况下，它将在您的`App`对象被创建或第一次将类用于其他静态方法/成员时创建。

在单例的情况下，可能不需要从一开始就使用它，因此在时间消耗不那么明显的时候启动它。

# jquery - Jquery Mobile listview 不使用 json 数据呈现

> ID：14626391
> 
> 赞同：2
> 
> 时间：2013-01-31T12:59:09.527
> 
> 标签：jquery, json, css, cordova, jquery-mobile

我无法使用从 mySQL 本地数据库呈现的数据来呈现 Jquery 列表。json数据很好地连接到项目，但我的模拟器呈现给我的内容不正确。

我的 php 文件是：

```
<?php

$link = mysql_pconnect("localhost", "root", "") or die ("Could not Connect to DB");

mysql_select_db("findadeal") or die("Could not select database");

$arr = array();

$rs = mysql_query("SELECT * FROM deal");

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}

echo '{"Deals":'.json_encode($arr).'}';

?> 
```

这会呈现以下 JSON 结果：

```
{"Deals":[{"dealid":"1","name":"Set Lunch Menu","description":"Enjoy lunch ","limit":"10","restaurantid":"1"}]} 
```

我的 HTML 代码如下：

```
<!DOCTYPE html>
<html>

<meta charset="utf-8" />
<title>Find A Deal</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<style>
    img.fullscreen {
        max-height: 100%;
        max-width: 100%;
    }
    </style>

<link rel="stylesheet" href="themes/deal.css" />
<link rel="stylesheet"         href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

</head>

<body>
<div data-role = "content">

   <div data-role="header" data-position="fixed">
            <h1>Current Deals</h1>
            </div>

  <div class="content-primary">
     <ul id="list" data-role="listview" data-filter="true"></ul>
 </div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">            </script>

<script type="text/javascript">

    $(document).ready(function(){

                      var url="http://localhost/findadeal/json2.php";

                      $.getJSON(url,function(json){
                                //loop through deals
                                $.each(json.deals,function(i,dat){
                                       $("#list").append("<li><b>ID: </b>"+dat.dealid+
                                                         "<b> Name: </b>"+dat.name+
                                                         "<b> Description: </b>"+dat.description+
                                                         "<b> Limit: </b>"+dat.limit+
                                                         "<b> Rest ID </b>"+dat.restaurantid+
                                                         "</li>");
                                       });
                                });
                      });

    </script>

<footer data-role="footer" data-position="fixed">
    <nav data-role="navbar">
        <ul>
            <li><a href="index.html" data-icon="home">Home</a></li>
            <li><a href="mydeal.html" data-icon="grid">My Deals</a></li>
        </ul>
    </nav>
  </footer>

 </body>
</html> 
```

当我不添加动态数据时，我可以很好地呈现一般列表视图，但是现在出现了问题。

如果有人可以帮助我，我将不胜感激！！在过去的几天里，我遇到了很多困难，这里的人们真的帮了我很多，所以我很感激你的所有时间！提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:11:54.157

这应该被删除：

```
 $(document).ready(function(){ 
```

（这种语法不能与 一起使用**`jQuery Mobile`**，如果您想了解更多信息，请查看此**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或查看**[此处](https://stackoverflow.com/a/14469041/1848600)**。）。一切都应该更改为在页面成功加载时运行，但页面也需要包装页面内容，**`data-role="page"`**所以这样做：

```
<div data-role = "page" id="index">
    // Your body content should go here
</div> 
```

由于此更改**`$(document).ready(function(){`** 为：

```
$(document).on('pagebeforeshow', '#index', function(){ 
```

附加内容时**`listview()`**必须触发功能以增强内容标记：

```
$("#list").listview('refresh'); 
```

如果您想了解有关如何处理动态添加**`jQuery Mobile`**的内容的更多信息，请查看这篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，更透明的是我的个人博客。或者你可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

我也不知道为什么，但你引用了 2 个**`jQuery`**脚本，你应该删除这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js">            </script> 
```

当前**`jQuery Mobile`**不适用于 jQuery 1.9，仅使用 1.8.3 或更低版本。

一切都应该是这样的：

```
<html>
    <meta charset="utf-8" />
    <title>Find A Deal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
        img.fullscreen {
            max-height: 100%;
            max-width: 100%;
        }
    </style>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>

<body>
    <div data-role="page" id="index">
        <div data-role="header" data-position="fixed">
           <h1>Current Deals</h1>
        </div>

        <div data-role = "content">
              <div class="content-primary">
                 <ul id="list" data-role="listview" data-filter="true"></ul>
              </div>
        </div>

        <script type="text/javascript">
            $(document).on('pagebeforeshow', '#index', function(){ 
                var url="http://localhost/findadeal/json2.php";
                $.getJSON(url,function(json){
                    //loop through deals
                    $.each(json.deals,function(i,dat){
                        $("#list").append("<li><b>ID: </b>"+dat.dealid+
                                          "<b> Name: </b>"+dat.name+
                                          "<b> Description: </b>"+dat.description+
                                          "<b> Limit: </b>"+dat.limit+
                                          "<b> Rest ID </b>"+dat.restaurantid+
                                          "</li>");
                     });
                     $("#list").listview('refresh');
                });
             });
        </script>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="index.html" data-icon="home">Home</a></li>
                    <li><a href="mydeal.html" data-icon="grid">My Deals</a></li>
                </ul>
            </div>
        </div>
    </div>
 </body>
</html> 
```

# python - 如何正确地将 C ioctl 调用转换为 python fcntl.ioctl 调用？

> ID：14626395
> 
> 赞同：9
> 
> 时间：2013-01-31T12:59:25.027
> 
> 标签：python, python-2.7, ioctl, fcntl

[按照在 Linux 中重置串行端口](http://www.roman10.net/how-to-reset-usb-device-in-linux/)的示例，我想翻译以下代码段

```
fd = open(filename, O_WRONLY);
ioctl(fd, USBDEVFS_RESET, 0);
close(fd); 
```

进入有效的python代码。这是我到目前为止尝试过的

```
file_handler = open(self._port, 'w')
fcntl.ioctl(file_handler, termios.USBDEVFS_RESET)
file_handler.close() 
```

以错误结束`'module' object has no attribute 'USBDEVFS_RESET'`。[termios 文档](http://docs.python.org/2/library/termios.html#module-termios)在这一点上不是很有帮助，因为它没有列出`termios`. 另请参阅[fcntl 文档](http://docs.python.org/2/library/fcntl.html)`termios`以获取此类属性的示例。

如何正确地将 C 代码“转换”为 python2.7 代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-22T01:43:53.317

我在寻找如何执行 USBDEVFS_RESET 时遇到了这个问题，并认为我会分享我对 _IO 的发现： [https ://web.archive.org/web/20140430084413/http://bugcommunity.com/wiki/index.php /Develop_with_Python#Introduction_to_ioctl_calls_in_python](https://web.archive.org/web/20140430084413/http://bugcommunity.com/wiki/index.php/Develop_with_Python#Introduction_to_ioctl_calls_in_python)

所以，到目前为止，我有以下内容：

```
from fcntl import ioctl

busnum = 1
devnum = 10

filename = "/dev/bus/usb/{:03d}/{:03d}".format(busnum, devnum) 

#define USBDEVFS_RESET             _IO('U', 20)
USBDEVFS_RESET = ord('U') << (4*2) | 20

fd = open(filename, "wb")
ioctl(fd, USBDEVFS_RESET, 0)
fd.close() 
```

您可以`busnum`从`devnum`.`lsusb`

编辑：以上链接已失效，URL 已替换为最后一个存档版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-13T07:28:06.607

[ioctl-opt](https://github.com/vpelletier/python-ioctl-opt) ( [pypi](https://pypi.python.org/pypi/ioctl-opt) ) 是一个小型 python 模块，将所需的 C 预处理器宏转换为 python。有关简单的使用示例，请参阅此[hidraw](https://github.com/vpelletier/python-hidraw/blob/master/hidraw/__init__.py)实现。

请注意，可能需要定义 ctype 结构（取决于调用类型），因此您可以实际传递参数。

披露：我是这两个模块的作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:06:11.610

宏`USBDEVFS_RESET`是在某个系统头文件中定义的。

您可以搜索它并替换`termios.USBDEVFS_RESET`为实际值。

# chef-infra - Vagrant vm 上的食谱存储在哪里？/ 需要设置吗？

> ID：14626396
> 
> 赞同：1
> 
> 时间：2013-01-31T12:59:33.030
> 
> 标签：chef-infra, vagrant

作为诊断我的 Vagrant VM 问题的一部分，我发布了

```
vagrant@lucid32:~$ sudo mount -t vboxsf -o uid=`id -u vagrant`,gid=`id -g vagrant` v-csc-1 /tmp/vagrant-chef-1/chef-solo-2/cookbooks 
```

我得到：

```
/sbin/mount.vboxsf: mounting failed with the error: No such file or directory 
```

网络上的各种博客表明这是一个路径问题，可能与在 VM 本身上设置说明书的位置以及 Vagrantfile（在主机上）指示 Chef 找到它们的位置有关。所以问题：

*   我如何找到食谱的位置以便我可以纠正这个问题？
*   我怎么知道我是否已经设置了 Chef - 命令运行？
*   我将如何设置厨师？

**背景** 我的问题源于试图找到一个明确的、完整的端到端指南，以在 Windows 7 64 位主机上的 VM 上设置一个通用的全花园香草 LAMP 堆栈。我做了很多研究并使用了[http://iostudio.github.com/LunchAndLearn/2012/03/21/vagrant.html](http://iostudio.github.com/LunchAndLearn/2012/03/21/vagrant.html)并在我的 Vagrantfile 中添加了以下代码

```
 config.vm.provision :chef_solo do |chef|
    chef.cookbooks_path = ["cookbooks","site-cookbooks"]
    chef.add_recipe "apt"
    chef.add_recipe "openssl"
    chef.add_recipe "apache2"
    chef.add_recipe "mysql"
    chef.add_recipe "mysql::server"
    chef.add_recipe "php"
    chef.add_recipe "php::module_apc"
    chef.add_recipe "php::module_curl"
    chef.add_recipe "php::module_mysql"
    chef.add_recipe "apache2::mod_php5"
    chef.add_recipe "apache2::mod_rewrite"
    chef.json = {
        :mysql => {
            :server_root_password => 'root',
            :bind_address => '127.0.0.1'
        }
    }
  end 
```

我看到的问题是网络上有很多建议，但是： - 问题有不同的解决方案 - 他们没有精确指定他们的起点/先决条件，即他们的解决方案*之前*的设置状态被应用所以你不能知道你的问题是否和他们的一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:17:13.440

所以正如我在评论中所说：

```
chef.cookbooks_path = ["cookbooks","site-cookbooks"] 
```

这一行显示了从 Vagrantfile 到*主机*系统中的 cookbooks 目录的相对路径。如果您的 Vagrantfile 的完整路径是`C:\Users\<user>\<folder to hold vagrant setup>\Vagrantfile`，那么应该有 2 个目录：

1.  `C:\Users\<user>\<folder to hold vagrant setup>\cookbooks`

    这应该保存你的食谱。

2.  `C:\Users\<user>\<folder to hold vagrant setup>\site-cookbooks`

    这应该包含网站食谱（从厨师社区下载的食谱，以防您单独持有它们）。

在当前设置中，这些是 2 个目录，该 vagrant 将安装在*来宾*操作系统中并搜索说明书。您收到错误消息，因为您的设置中没有这样的目录。

您必须提供食谱的路径，否则 vagrant 不知道从哪里获取它们。查看Vagrant[的 Setting the Cookbooks Path](http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html)帮助页面。

# windows-installer - Installshield 在小升级期间不替换文件

> ID：14626405
> 
> 赞同：6
> 
> 时间：2013-01-31T13:00:08.147
> 
> 标签：windows-installer, upgrade, installshield

我的应用程序有一个 installshield 安装程序。现在我为应用程序创建了一个小升级，并且我的一些组件中的一些文件被更改了。不幸的是，在小升级后，文件并没有被替换，而是保留了它们的旧内容。这些是文本文件，因此很容易验证。我还在升级期间尝试覆盖的每个文件的属性中明确检查了始终覆盖。

我厌倦了创建自定义操作来执行 installshield 应该执行的操作。您知道为什么会发生这种情况吗？如何强制 installshield 覆盖这些文件？

我正在使用 installshield 2008，真的，真的，真的希望我可以选择改变它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:50:45.120

不要粗鲁，但这是一个培训问题而不是工具问题。[Windows Installer 是底层技术，它在组件规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370561%28v=vs.85%29.aspx)和[文件版本控制规则](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368599%28v=vs.85%29.aspx)方面的操作方式非常明确。如果它不起作用，那是因为您实施错误。如果您正在编写自定义操作来绕过它，这清楚地表明您不了解自己在做什么，并且正在创建黑客来规避 MSI。

现在我没有您的 FOO.msi (v1) 和 FOO.msi (v1.1) 或升级的安装程序日志的副本，因此您的问题无法回答，除了建议您研究诸如哪些组件、密钥文件等主题和配套文件是，文件成本计算/版本控制如何工作，主要和次要升级如何工作，然后将这些知识应用于您自己的安装程序。

是的，这是晦涩难懂的，通常是迂腐的东西。但它是 MSI 工作方式的核心，您确实需要了解它。一旦你这样做了，它就会变得容易得多。相信我，我去过那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T19:47:58.087

我刚刚遇到了类似的问题。即使我更改了 AssemblyInfo.cs 中文件的版本，Install Shield LE 也没有选择新的编译文件。在构建解决方案之前，我似乎必须在“指定应用程序数据”中实际打开“文件”菜单。

# centos - 将完整的文件系统恢复到默认的安全上下文

> ID：14626407
> 
> 赞同：1
> 
> 时间：2013-01-31T13:00:16.927
> 
> 标签：centos, selinux

我是一个 selinux 新手，必须更改 CentOS 机器上的 mercurial repo 和配置文件的安全上下文才能从 httpd 获取它。

不小心我发出了“chcon -Rv --type=httpd_sys_script_exec_t /”，只有在已经修改了大量文件和目录时我才能停止。

我阅读了有关 restorecon 将某些内容恢复到其默认上下文的信息，但它对我不起作用，我得到“权限被拒绝”。

我该怎么做才能将整个文件系统恢复到其 selinux 默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:58:26.997

您可以尝试进行[修复文件重新标记](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/5/html/Deployment_Guide/sec-sel-fsrelabel.html)以使事情恢复正常。否则，您可以编辑*/etc/selinux/config*并将系统设置为不再强制执行 SELinux。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:43:15.740

您可以使用以下任一方法来解决此问题。

1.  修复文件

2.  创建一个文件`/.autorelabel`并重新启动系统。

3.  restorecon -f file 通常conf文件是`/etc/selinux/targeted/contexts/files/file_contexts`

# php - 覆盖在查找中的关联中定义的条件

> ID：14626409
> 
> 赞同：0
> 
> 时间：2013-01-31T13:00:34.027
> 
> 标签：php, cakephp, cakephp-1.3

我有一项服务，用户可以将汽车上传到网站，并从列表中选择制造商和型号。如果该车型不存在，用户可以在特定制造商下保存一个新车型。

现在我的问题是，所有模型都必须由版主确认为有效类型、拼写正确且不重复等。所有确认的模型对其他用户可见。我通过在 Car 的关联中指定一个条件来做到这一点，如下所示：

```
$belongsTo = array(    
  'CarModel' => array(
      'className' => 'CarModel',
      'foreignKey' => 'car_model_id',
      'conditions' => array('CarModel.confirmed' => 1),
      'fields' => '',
      'order' => ''
  )); 
```

但是，我想在编辑操作中覆盖此条件，以便用户可以看到他的模型，即使它们尚未确认。在查找条件下这可能吗？

问候，罗兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:57:17.273

您可以在调用*find()*方法之前**绑定模型。**在你的行动中试试这个。

 *```
 $this->ModelName->bindModel(
        array('belongsTo' => array(
                'CarModel' => array(
                    'className' => 'CarModel',
                    'conditions' => array('CarModel.confirmed' => 0),  // Define your new condition here
                )
            )
        )
    );
$data = $this->ModelName->find('all'); // Now you will get the data for new condition applied 
```

希望它会奏效。*

# security - 保护/保护网站管理区域

> ID：14626411
> 
> 赞同：1
> 
> 时间：2013-01-31T13:00:36.050
> 
> 标签：security, coldfusion, coldfusion-7

我正在尝试锁定网站管理区域，首先我需要将会话检查添加到 Application.cfm！这应该处理所有 CFM 文件，无论位置如何。

但是对于直接访问的 CSS、JS 和 HTML 文件，我该怎么办？

还有其他安全建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:04:39.983

任何静态文件（html、jpg、css、pdf、mdb(lol) 等）都可以通过将它们放在 Web 根目录之外并使用`cfheader`和`cfcontent`访问文件来保护。您的 CFM 文件包含`cfheader`并`cfcontent`应包含在您的应用程序安全性中。

```
<cfheader name="content-disposition" value="attachment; filename=myAwesomeAccessDatabaseIsTheBombDigity.mdb">
<cfcontent type="application/x-msacces" file="c:\NotMyWebsite\myAwesomeAccessDatabaseIsTheBombDigity.mdb"> 
```

使用文件执行此`HTML`操作有点愚蠢，因为如果链接的资产（CSS、JS、JPG 等）也在您的 Web 根目录下，则它们将无法访问。Html、css、js、图像（除非您正在运行一个图形销售网站）通常不需要像这样保护。

# angularjs - AngularJS 将 JSON 数据绑定到 Form

> ID：14626414
> 
> 赞同：2
> 
> 时间：2013-01-31T13:00:42.310
> 
> 标签：angularjs

我打算设置这样的机制：1）向服务器请求 JSON 对象 2）JSON 对象包含这样的结构

```
{"type":"address","fields":[{"name":"street"},{"name":"city"}]} 
```

基于此对象，应创建一个带有两个输入字段（街道和城市）的表单，并且应进一步绑定到 angularJS 模型。

```
$scope.formData = {"type":"address","fields":[{"name":"street","value":"Main Street"},{"name":"city","value":"NYC"}]} 
```

这种方法可以用 AngularJS 实现吗？我想从 JSON 对象动态构建一个表单（或者更好地说是绑定到 AngularJS 模型的输入元素）并将模型绑定到该表单。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:57:24.453

如果我理解正确，您可以直接绑定您的对象：[http ://plnkr.co/edit/kZ2H5pFIibXFwkCk3zEV?p=preview](http://plnkr.co/edit/kZ2H5pFIibXFwkCk3zEV?p=preview)

```
 <div ng-repeat="field in data.fields">
      {{field.name}}: <input ng-model="field.value">
    </div> 
```

# html - iFrame 中的全屏模式

> ID：14626416
> 
> 赞同：1
> 
> 时间：2013-01-31T13:00:46.787
> 
> 标签：html, iframe, fullscreen

我有一个带有 iFrame 的 HTML，其中源是另一个 HTML。我想在嵌入的 HTML 上包含一个“全屏按钮”，这样如果我点击它，该 HTML 就会变成全屏。

换句话说，当您单击“全屏按钮”时，我想做与 Youtube 对嵌入在 HTML 中的视频所做的相同的事情。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:09:34.490

afaik 拥有真正全屏的最简单方法是通过 Flash。因此，您可以做的是让“全屏按钮”成为一个 Flash 播放器，它可以提取您的 HTML 内容并全屏显示。

这是 flash 的全屏模式的起点：http: [//www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html](http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html)

更新：还有一个用于浏览器的全屏 API——就像 mozilla 中的这个 API——但这取决于客户端兼容性： [https ://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en -US&redirectslug=DOM%2FUsing_full-screen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en-US&redirectslug=DOM%2FUsing_full-screen_mode)

PS：当然Flash也需要客户端兼容性..:)

# outlook - 使用 c# 自定义 Outlook 通讯簿

> ID：14626423
> 
> 赞同：0
> 
> 时间：2013-01-31T13:01:07.640
> 
> 标签：outlook

如何使用 C# 插件在 Outlook 通讯簿中添加按钮、图像、文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:11:22.463

Outlook 通讯簿窗口不可自定义。

# c++ - 将函数分配给具有相同签名但不同调用约定的 std::function 失败

> ID：14626424
> 
> 赞同：2
> 
> 时间：2013-01-31T13:01:09.960
> 
> 标签：c++, mingw, std-function, stdcall, cdecl

以下使用 mingw 4.7.2 和 -m64 标志编译并运行得很好。

但使用 -m32 或任何 mingw 32 位版本无法编译。是错误还是我缺少编译器标志？

```
 #include <iostream>
    #include <functional>

    using namespace std;

    int __cdecl ccall(int i)
    {
        cout << i << endl;
        return 0;
    }

    int __stdcall stdcall(int i)
    {
        cout << i << endl;
        return 0;
    }

    int __fastcall fastcall(int i)
    {
        cout << i << endl;
        return 0;
    }

    int main() {

        std::function<int(int)> fnc = ccall;
        fnc(10);

        std::function<int(int)> fnstd = stdcall;
        fnstd(100);

        std::function<int(int)> fnfast = fastcall;
        fnfast(200);

        return 0;
    } 
```

错误信息：

```
 ...\Local\Temp\cc4ekW9J.s: Assembler messages:
    ...\Local\Temp\cc4ekW9J.s:30: Error: symbol `__ZNSt17_Function_handlerIFiiEPFiiEE9_M_invokeERKSt9_Any_datai' is already defined 
    ...\Local\Temp\cc4ekW9J.s:80: Error: symbol `__ZNSt14_Function_base13_Base_managerIPFiiEE10_M_managerERSt9_Any_dataRKS4_St18_Manager_operation' is already defined
    ...\Local\Temp\cc4ekW9J.s:114: Error: symbol `__ZNSt14_Function_base13_Base_managerIPFiiEE10_M_managerERSt9_Any_dataRKS4_St18_Manager_operation' is already defined 
```

在将调用“隐藏”在 lambda 函数中之后，我最终这样做了，它工作得很好：

```
 template<class Ret, class... Args> class StdCall
    {
    public:
        typedef Ret(__stdcall Fn_t)(Args...);
        typedef std::function<Ret (Args...)> Functor_t;
        Functor_t get(Fn_t pFn)
        {
            return [pFn](Args... as){
                return pFn(as...);
            };
        }
    };

    auto fn1 = CdeclCall<int,int>().get( ccall );
    auto fn2 = StdCall<int,int>().get( stdcall );

    fn1(123);
    fn2(156); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:09:12.880

算自己幸运。想想调用约定错误的函数调用可能造成的破坏！哦，只需使用调用“错误”的“正确”调用约定创建一个 shim 函数。也许您可以将其隐藏在单独编译的文件中。

# javascript - 如何定位 -moz-opacity 属性

> ID：14626426
> 
> 赞同：2
> 
> 时间：2013-01-31T13:01:17.083
> 
> 标签：javascript, cross-browser, mozilla

通常我们使用以下方式定位 CSS 不透明度：

```
document.getElementById('wrapper').style.opacity="1"; 
```

如何定位`-moz`扩展？我试过使用：

```
var moz = document.getElementById('wrapper').style.-moz-opacity="1"; 
```

但是脚本在这样做时卡住了。我想用纯 JavaScript 来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:05:41.780

[**关注**](https://developer.mozilla.org/en-US/docs/CSS/opacity)MDN ：

> Gecko 1.9.1 (Firefox 3.5) 及更高版本不支持`-moz-opacity`，并且在 Gecko 13 中删除了对`MozOpacity`in javascript 的支持。到目前为止，您应该使用简单`opacity`的 .

所以以前是：

```
var opacity = document.getElementById("wrapper").style.MozOpacity; 
```

现在是：

```
var opacity = document.getElementById("wrapper").style.opacity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:12:57.357

您是否尝试过使用与 z-index "style.zIndex" 相同的驼峰式案例？“style.MozOpacity”，M 是大写字母，因为它以 - 开头，跳过第一个小写字母。但是新的 FF 浏览器不会有这个属性。

[http://jsfiddle.net/kNbhg/3/](http://jsfiddle.net/kNbhg/3/)

```
<div id="demo" style="-moz-opacity:1.0"></div>

var str = "";
var elm = document.getElementById("demo");
for(var p in elm.style)
    str += p + " " + typeof(elm.style[p]) + "<br/>";
document.body.innerHTML += str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:21:25.803

你应该能够做这样的事情：

document.getElementById('wrapper').style["-moz-opacity"]="1";

“style”只是一个对象，所以你应该可以用方括号表示法来调用它。

# android - android浏览具有定义扩展名的文件意图

> ID：14626433
> 
> 赞同：15
> 
> 时间：2013-01-31T13:01:43.973
> 
> 标签：android, file-extension, intentfilter

我需要创建将打开文件管理器（如果已安装）的意图，并且我希望文件管理器仅向用户显示 txt 文件，因此用户无法选择扩展名错误的文件。

```
 private static final int FILE_SELECT_CODE = 0;

private void showFileChooser() {
    Intent intent = new Intent(Intent.ACTION_GET_CONTENT); 
    intent.setType("*/*");
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    try {
        startActivityForResult(
                Intent.createChooser(intent, "Select txt file"),
                FILE_SELECT_CODE);
    } catch (android.content.ActivityNotFoundException ex) {
        // Potentially direct the user to the Market with a Dialog
        Toast.makeText(this.getActivity(), "Please install a File Manager.", 
                Toast.LENGTH_SHORT).show();
    }
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case FILE_SELECT_CODE:      
    if (resultCode == Activity.RESULT_OK) {  
        // Get the Uri of the selected file 
        Uri uri = data.getData();
        String path = uri.getPath();
        input = new File(path);
        try {
            txtParser = new TxtFileParser(input);
        } catch (FileNotFoundException e) {
            /* Exception handler must be here! */
        }
    }           
    break;
}
    super.onActivityResult(requestCode, resultCode, data);
} 
```

我设法做到了。但我不知道如何定义 txt 扩展名。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T14:12:17.967

> 我希望文件管理器只向用户显示 txt 文件，因此用户无法选择扩展名错误的文件

这在字面上是不可能的。欢迎您使用 MIME 类型`text/plain`代替`*/*`，但是：

*   不能保证这只会返回带有`.txt`扩展名的文件
*   无法保证设备上是否有任何应用程序可以处理`ACTION_GET_CONTENT`该 MIME 类型
*   无法保证任何“文件管理器”都会尊重您的 MIME 类型；他们可能会选择显示所有文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T18:09:18.383

对 MaterialFilePicker() 进行研究。

new MaterialFilePicker().withFilter(Pattern.compile(".*\.txt$")).start();

像上面一样，您可以使用模式匹配来做到这一点。

# android - 为两个 Android 应用程序共享相同的 SQLite DB

> ID：14626438
> 
> 赞同：3
> 
> 时间：2013-01-31T13:02:00.507
> 
> 标签：android, database, sqlite

我想为两个应用程序维护单个 sqlite DB。我看过其他链接，这很有帮助[在 2 个 android 应用程序之间共享 SQLite 数据库？](https://stackoverflow.com/questions/7053809/share-sqlite-database-between-2-android-apps)

但是当我声明共享用户 ID 和共享上下文时，我仍然无法实现它。

在我的第一个应用程序中，SQLite 是用几个表创建的。在我的第二个应用程序中=-我将在我在第一个应用程序中创建的同一个数据库中创建表

而且在几篇文章中，我读到这可以通过远程数据库来实现。

请有人建议我很好的教程，我可以对如何进行有一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:03:14.470

我会推荐您所询问的内容-使用远程数据库。

看看这个：[如何在安卓应用中使用免费的云数据库？](https://stackoverflow.com/questions/12104756/how-to-use-free-cloud-database-with-android-app)

查看云中的托管数据库。其中不少可以让您免费入门。我知道 IrisCouch 可以让您免费使用，而且非常简单。[http://www.iriscouch.com/](http://www.iriscouch.com/) CouchDB 的好处是您可以通过 HTTP 完成所有工作——这对于 Android 设备来说并不难。

# bash - 在bash中并行设置变量

> ID：14626443
> 
> 赞同：4
> 
> 时间：2013-01-31T13:02:30.103
> 
> 标签：bash, parallel-processing

这是一个示例程序：

```
#!/bin/bash

for x in {1..5}
do
  output[$x]=$(echo $x) &
done

wait

for x in {1..5}
do
  echo ${output[$x]}
done 
```

我希望它能够运行并打印出分配给`output`数组每个成员的值，但它什么也不打印。删除`&`正确分配的变量。我必须使用不同的语法来并行实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:12:26.000

这个

```
output[$x]=$(echo $x) & 
```

将*整个*分配放在后台任务（子流程）中，这就是您看不到结果的原因，因为它没有传播到父流程。

您可以使用[wait 来等待 subprocesses](https://stackoverflow.com/questions/356100/how-to-wait-in-bash-for-several-subprocesses-to-finish-and-return-exit-code-0)，但返回结果（除了状态码）会很困难。也许您可以将中间结果写入文件，并在所有进程完成后收集这些结果？（不太好，我很感激）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:28:26.023

如果要避免写入文件，可以使用`GNU parallel`：

```
#!/bin/bash
output=(`parallel -k --gnu echo {1} ::: {1..5}`)
for i in ${output[@]}
do
   echo $i
done 
```

`-k`是为了保持输出的 顺序

# ios - ios中的wsdl解析

> ID：14626451
> 
> 赞同：2
> 
> 时间：2013-01-31T13:03:04.983
> 
> 标签：ios, web-services, wsdl

谁能帮助我如何在 iPhone 应用程序中使用 WCF 服务？我正在拼命寻找它。我还从[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)安装了 wsdl2objc 。但我仍然没有得到任何线索，我如何使用它来获得正确的回应。

请让我摆脱这个麻烦......我需要正确的解决方案！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T13:48:43.883

如果您要使用 SOAP 服务，我的建议是不要......因为对于 SOAP 服务，您可以使用[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)构建基类，但是您将从服务获得的响应将提供参考和整个数据结构以及响应，您无法解析响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:29:46.330

你可以使用这个名为[CSOAP的奇妙框架](http://csoap.sourceforge.net/)

# magento - $product->name 变量在 Magento Bestsellers 模块中未正确处理

> ID：14626453
> 
> 赞同：0
> 
> 时间：2013-01-31T13:03:10.053
> 
> 标签：magento, magento-1.4

我的 Magento 没有显示 Best Selling products 模块时遇到问题，因为它似乎没有正确处理*$product->name*变量。

mostpopular.phtml 中的相关代码为：

```
<?php if($counter <= $totalPerPage): ?>

<?php $productUrl =  $product->getProductUrl() ?>
<li>
    <a href="<?php echo $productUrl ?>" title="View <?php echo $product->name ?>">
      <?php echo $product->name ?>
    </a>
</li>
<?php endif; $counter++; ?> 
```

然后 HTML 输出如下。问题是<a>标签中的Title参数缺少产品名称，而<a></a>标签之间什么也没有：

`<a href="http://mysite.com/correct-product-url-is-here-and-working-correctly.html" title="View "> </a>`

站点正在运行 Magento 1.4.1.1

我不是全职工作在这些东西上，所以有时它有点在我头上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:08:36.233

尝试`$product->getName()`代替`$product->name`

# grails - 检查用户是否在过滤器中使用 spring security 进行了身份验证

> ID：14626454
> 
> 赞同：0
> 
> 时间：2013-01-31T13:03:14.147
> 
> 标签：grails, spring-security, grails-plugin

我正在尝试在`src`我的 grails 应用程序目录中的 groovy 类中执行此操作。

它是一个`Filter`. 该类看起来像这样：

```
class Proxy implements Filter {
} 
```

在`init`我正在`springSecurityService`使用的方法中获取bean：

```
GrailsApplication application = org.codehaus.groovy.grails.commons.ApplicationHolder.getApplication()
springSecurityService = application.getMainContext().getBean("springSecurityService") 
```

在我的内部，我`doFilter`试图找出用户是否已通过身份验证。我试过：

```
springSecurityService.isLoggedIn() 
```

但它总是回来`false`。

我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:23:29.417

尝试使用 SecurityContextHolder

```
SecurityContextHolder.getContext().getAuthentication() 
```

（但这是 Java；我相信您可以找到类似的东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:02:44.107

您的过滤器顺序是否可能不正确？您的自定义过滤器需要在 Spring 安全过滤器之后调用。如果您`new Exception().printStackTrace()`在过滤器中执行，您是否看到`SecurityContextPersistenceFilter`堆栈中的？如果没有，那么您需要将您的过滤器（代理）更改为在 springSecurityFilterChain 之后。

# vb.net - 从 NHibernate 中的表中删除所有行

> ID：14626456
> 
> 赞同：2
> 
> 时间：2013-01-31T13:03:22.827
> 
> 标签：vb.net, nhibernate, fluent-nhibernate

我有一个使用 Fluent NHibernate 和 NHibernate 的应用程序，我有一个通用 DAO 类，在这个类中我有通用方法来保存数据，但我想创建一个通用方法来删除一个表中的所有记录。此刻我有这个方法：

```
Public Sub ClearTable(ByVal sTable As String)
    Using session = SessaoNHibernate.OpenSession()
        Using transaction = session.BeginTransaction()
            Try
                session.CreateSQLQuery("delete from " & sTable).ExecuteUpdate()
                transaction.Commit()
                session.Flush()
            Catch ex As Exception
                transaction.Rollback()
            End Try
        End Using
    End Using
End Sub 
```

我有一个泛型类，所以我想创建一个不需要传递表名的方法。因为泛型类知道他的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:17:31.333

只是不要将其作为 SQL 查询运行，您可以改为传递类名：

```
session.CreateQuery("delete from EntityClass").ExecuteUpdate() 
```

# jquery - IE8 中的 Highchart 渲染器路径问题

> ID：14626462
> 
> 赞同：0
> 
> 时间：2013-01-31T13:04:00.910
> 
> 标签：jquery, css, highcharts

我一直在使用

```
chart.renderer.path(['M', 12, 0, 'L', 6, 12, 'L', 18, 12, 'Z']).attr({
    'stroke-width' : 2,
    'fill' : 'black',
    'transform' : "translate(" + x + "," + y + ")"        
  }).add(); 
```

在图表上绘制三角形路径并使用 Translate 属性移动到所需位置。

但在 IE8 中，transform 属性被忽略（三角形出现在左上角），但在 FF、Chrome 等中工作正常。这是 CSS3 支持问题的问题吗？

有什么办法可以解决这个问题吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:41:49.227

旧版 IE 不直接支持 transform 属性。相反，使用 translate 方法，如下所示：

```
chart.renderer.path(['M', 12, 0, 'L', 6, 12, 'L', 18, 12, 'Z']).attr({
    'stroke-width' : 2,
    'fill' : 'black'
  })
  .translate(x, y)
  .add(); 
```

您还可以使用特定的 translateX 和 translateY 属性，除了 .attr() 之外，它们还可以与 .animate() 一起使用。

编辑：这是一个现场演示：http: [//jsbin.com/iwocow/1/edit](http://jsbin.com/iwocow/1/edit)

# php - 在 IIS 7 上托管的 wordpress 网站上加载主页时出现延迟问题

> ID：14626466
> 
> 赞同：1
> 
> 时间：2013-01-31T13:04:21.457
> 
> 标签：php, javascript, windows, performance, wordpress

我目前已经接管了以下站点的运行：

[http://www.claimsnational.co.uk](http://www.claimsnational.co.uk)。

但是，主页的加载似乎存在某种问题。页面甚至开始加载之前需要 11 秒的时间，但所有其他页面都可以正常工作。

例如：

[http://www.claimsnational.co.uk/claim-type/personal-injury/](http://www.claimsnational.co.uk/claim-type/personal-injury/)

我真的不知道是什么导致了这种情况，因为服务器上的所有其他站点都很好。任何帮助将不胜感激！

谢谢

安德鲁

# jquery - JQuery自定义验证错误

> ID：14626467
> 
> 赞同：0
> 
> 时间：2013-01-31T13:04:23.753
> 
> 标签：jquery, jquery-validate

我在使用 JQuery 验证器时遇到以下问题：我有一个表单，我在其中使用提供的默认验证规则，并且一切正常。但是，一旦我添加了自定义验证，就会引发以下错误：

1.  在 Chrome 中：未捕获的 TypeError：无法调用未定义的方法“addMethod”

2.  在 IE8 中：'validator' 为 null 或不是对象

3.  FireFox：没有错误信息，但 JQuery 默认验证逻辑中断；

导致错误发生的代码是这样的（它位于 ready 函数内）：

```
$().validator.addMethod("defaultInvalid", 
   function(value, element) {   
    alert("validate");
   }
 ); 
```

如您所见，我已对回调函数的大部分代码进行了注释，以消除任何其他错误。如果我发表评论，一切都会恢复正常。但是，我想在文本框上使用这个自定义规则，它必须具有默认值“名字”，并且在提交时它不应该允许用户发送“名字”作为值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:14:51.430

看着这个，验证器不会被发现，因为它在里面看`$()`。您只需要使用`$.validator.addMeth....`哪个进入默认的 jquery 对象。

像这样：

```
$.validator.addMethod("defaultInvalid", 
   function(value, element) {   
    alert("validate");
}); 
```

**或者**你用来访问 Jquery 对象的任何东西

```
JQuery.validator.addMethod("defaultInvalid", 
   function(value, element) {   
    alert("validate");
}); 
```

# dll - 为什么 VB6 编译的应用程序需要 VB5 VM？

> ID：14626471
> 
> 赞同：5
> 
> 时间：2013-01-31T13:04:57.463
> 
> 标签：dll, vb6, vb5

我已将`VB5`产品升级到IDE`VB6`并从`VB6`IDE 生成可执行文件。没有`MSVBVM50.DLL`. 没有它会产生以下错误：

```
Automation error - cannot find specified module. 
```

这可能是什么原因？

是否有可能`DLL`已经编译了`VB5`一个需要`VB5`VM 的组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:45:40.407

在 VB6 IDE 中，Project > Components 菜单将显示 Components 对话框，Project > References 将显示 References 对话框。

找到打勾的组件并确保它们是 VB6 版本而不是 VB5 版本。许多标准控件都使用 VB6 进行了更新。

特别要查找各种“Microsoft windows 通用控件”条目，因为它们是您最不可能注意到更改的条目，因为它们在工具箱中的外观相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:05:46.280

你的建议是正确的。如果您正在使用依赖于 VB5 运行时的组件（DLL、OCX），那么没有它您将无法运行您的程序。

您需要检查引用的 DLL 和组件以使用 VB5 VM 搜索。

# sql-server-2008 - CTE 使用 SQL Server 获取两个日期之间的日期

> ID：14626473
> 
> 赞同：11
> 
> 时间：2013-01-31T13:05:06.743
> 
> 标签：sql-server-2008

我想获取两个日期之间的缺失日期

说`@maxDate = '2013-01-28'`

说`@curDate = GetDate()`

我已经写了 CTE 来做到这一点。这是我的 CTE：

```
create procedure EmpDate  
as  begin  
declare @curDate Date  
set @curDate = GETDATE()  
declare @maxDate Date  
select @maxDate = MAX(EmpAttendance.Sdate)  
from EmpAttendance

;with GetDates As  
(  
select 1 as counter, @maxDate as Date   
UNION ALL  
select counter + 1, DATEADD(day,counter,@maxDate)  
from GetDates  
where DATEADD(day, counter, @maxDate) < @curDate  
)  
select Date from GetDates  
end   
go 
```

结果是

```
Date  
2013-01-28  
2013-01-29  
2013-01-30 
```

但我想要

```
2013-01-29  
2013-01-30 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T13:52:11.627

改变

```
select 1 as counter, @maxDate as Date 
```

至

```
select 1 as counter, DATEADD(day,1,@maxDate) as Date 
```

通过更改 CTE 使其更简单

```
;with GetDates As  
(  
select DATEADD(day,1,@maxDate) as TheDate
UNION ALL  
select DATEADD(day,1, TheDate) from GetDates  
where TheDate < @curDate  
)
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-31T11:25:22.710

```
DECLARE @STARTDATE      DATETIME;
DECLARE @ENDDATE        DATETIME;
DECLARE @YEARS          INTEGER;

SET @YEARS = 10;
SET @STARTDATE = '20170101';

SELECT  @ENDDATE = DATEADD(DAY,-1,DATEADD(YEAR,@YEARS,@STARTDATE));
DECLARE @FirstDayOfWeek INTEGER;

SET @FirstDayOfWeek = 6;

;WITH CTE_DATES
AS
(
    SELECT @STARTDATE AS [DATE],
    1 AS [Level]
    UNION ALL
    SELECT 
        DATEADD(DAY,1, [DATE] )  , [Level] + 1  
    FROM CTE_DATES
    WHERE [DATE] < @ENDDATE
)
SELECT 
    [DATE],
    DATENAME(dw,[Date]) AS Daynamelong,
    LEFT(DATENAME(dw,[Date]),3) AS DaynameShort,
    DATEPART(dw,[Date]) AS NaturalDayNumber,
    CASE WHEN DATEPART(dw,[Date]) >= @FirstDayOfWeek THEN  (DATEPART(dw,[Date]) - (@FirstDayOfWeek)) +1
    ELSE 
        ((DATEPART(dw,[Date]) - (@FirstDayOfWeek)) +1) + 7
    END AS SpecialDayNumber,
    [Level]
FROM 
    CTE_DATES 
ORDER BY
    [DATE] ASC
OPTION (MAXRECURSION 5000); 
```

# java - VisualVM 和自拍时间

> ID：14626475
> 
> 赞同：65
> 
> 时间：2013-01-31T13:05:11.923
> 
> 标签：java, performance, profiling, cpu, visualvm

我一直在寻找一个一致且清晰的解释，说明 VisualVM 上下文中的“自我时间”实际上指的是什么，以及它与“自我时间 (cpu)”有何不同。'self time [%]' 也是指 self time 或 self time cpu。

似乎没有太多关于此的文档，或者至少我没有找到它。因此，任何想法/输入将不胜感激。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-01T20:29:28.807

*   `Self Time`是方法本身所花费*的挂钟时间（***包括等待/睡眠**的时间）。
*   `Self Time (CPU)`是一个时间*处理器时间*，所以它不**包括****等待、睡眠**等 所花费的时间。

*   这两列都不包括在从该方法调用的方法中花费的时间。
*   `Self Time`采样器和`Self Time (CPU)`采样器都是实际数据的*近似值*。
*   `Self Time [%]`指两个选定`Self Time [(CPU)]`列之一。

# java - 如何让我的精灵在 Slick2D 中具有透明背景？

> ID：14626476
> 
> 赞同：0
> 
> 时间：2013-01-31T13:05:11.250
> 
> 标签：java, image, transparency, pixels, slick2d

我使用 GIMP 创建了一个使用透明背景的精灵。一旦我将它放入 Image Packer 中，透明背景就会消失，整个图像就会变得混乱。经过一番谷歌搜索而没有找到任何有用的东西后，我决定使用粉红色背景，但我找不到将像素设置为 alpha 的支持（虽然我可以读取像素的颜色！）

如何解决这个问题并在我的精灵中拥有透明背景（准确地说是 org.newdawn.slick.Image）？

有用的链接：据我所知没有。我花了 45 分钟跳到这个网站寻求帮助，所以要么几乎没有任何支持，要么几乎没有支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:22:25.363

您确定图像以支持透明度的格式保存吗？例如 JPG 不支持透明度。PNG可以。

您还确定保存图片时背景确实是透明的而不是白色的吗？为了仔细检查背景是否透明，大多数图像编辑器会显示一个灰色和白色的格子以显示透明度。

# python - 我想拆分节点的文本，然后将它们中的每一个放入独立元素中

> ID：14626477
> 
> 赞同：1
> 
> 时间：2013-01-31T13:05:13.813
> 
> 标签：python, lxml, elementtree

有一个这样的xml文件：

示例.xml

```
<root>
    <keyword_group>
        <headword>sell/buy</headword>
    </keyword_group>
</root> 
```

我想用'/'分割headword.text，然后用标签包装它们。最后我需要删除标签。我期望的输出是：

```
<root>
    <keyword_group>
        <word>sell</word>
        <word>buy</word>
    </keyword_group>
</root> 
```

我丑陋的脚本是：

```
import lxml.etree as ET

xml = '''\
<root>
    <keyword_group>
        <headword>sell/buy</headword>
    </keyword_group>
</root>
'''

root = ET.fromstring(xml)
headword = root.find('.//headword')
if headword is not None:
    words = headword.text.split('/')
    for word in words:
        ET.SubElement(headword, 'word')
        for wr in headword.iter('word'):
            if not wr.text:
                wr.text = word
    headword.text = ''

print(ET.tostring(root, encoding='unicode')) 
```

但这太复杂了，我没有删除词条标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:17:39.950

使用[lxml](http://lxml.de/)：

```
import lxml.etree as ET

xml = '''\
<root>
    <keyword_group>
        <headword>sell/buy</headword>
    </keyword_group>
</root>
'''

root = ET.fromstring(xml)
headword = root.find('.//headword')
if headword is not None:
    words = headword.text.split('/')
    parent = headword.getparent()
    parent.remove(headword)
    for word in words:
        ET.SubElement(parent, 'word').text = word

print(ET.tostring(root, encoding='unicode')) 
```

产量

```
<root>
    <keyword_group>
        <word>sell</word><word>buy</word></keyword_group>
</root> 
```

# postgresql - postgres 9.2 中的 ROWID 等效项

> ID：14626481
> 
> 赞同：25
> 
> 时间：2013-01-31T13:05:24.580
> 
> 标签：postgresql, postgresql-9.2

有什么方法可以在 postgres 中获取记录的 rowid 吗？

在甲骨文我可以使用喜欢

```
SELECT MAX(BILLS.ROWID) FROM BILLS 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-31T13:28:36.933

是的，有与 rowid 等效的 ctid 列。但是对你没用。Rowid 和 ctid 是物理行/元组标识符 => 可以在重建/清理后更改。

请参阅：[*第 5 章。数据定义 > 5.4。系统列*](https://www.postgresql.org/docs/current/static/ddl-system-columns.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-09T02:17:32.817

PostgreSQL row_number() 窗口函数可用于大多数使用 rowid 的目的。而在 Oracle 中，rowid 是结果数据行的固有编号，而在 Postgres 中 row_number() 计算返回数据的逻辑顺序内的编号。通常，如果您想对行进行编号，则意味着您希望它们按特定顺序排列，因此您可以在对行进行编号时指定对行进行排序：

```
select client_name, row_number() over (order by date) from bills; 
```

如果您只是想要任意编号的行，您可以将 over 子句留空：

```
select client_name, row_number() over () from bills; 
```

如果要计算行号的聚合，则必须使用子查询：

```
select max(rownum) from (
    select row_number() over () as rownum from bills
) r; 
```

如果您只需要表中的最后一项，并且有一列要按顺序排序，那么有一种比使用 row_number() 更简单的方法。只需反转排序顺序并选择第一项：

```
select * from bills 
order by date desc limit 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T08:44:14.567

使用序列。您可以选择 4 或 8 字节值。

[http://www.neilconway.org/docs/sequences/](http://www.neilconway.org/docs/sequences/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-13T12:30:33.143

将任何唯一列添加到您的表中（名称可能为 rowid）。并通过创建 BEFORE UPDATE 触发器来防止更改它，如果有人尝试更新，它将引发异常。您可以使用@JohnMudd 提到的序列填充此列。

# c# - 用户代码未处理 HttpCompileException。错误代码：CS0433

> ID：14626483
> 
> 赞同：3
> 
> 时间：2013-01-31T13:05:26.863
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我遇到了一个错误，例如：

d:\Temp Works\31_1_2013\CRMEvent\CRMEvent\Views\CRMDashboard\RecentRequests.ascx(4)：错误 CS0433：类型 'System.Web.Helpers.WebGrid' 存在于两个 'c:\Windows\Microsoft.NET\ assembly\GAC_MSIL\System.Web.Helpers\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.Helpers.dll' 和 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Web.Helpers\v4.0_1 .0.0.0__31bf3856ad364e35\System.Web.Helpers.dll'

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:23:53.777

在您的网络配置中，您有`<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />`. 尝试将版本号更改为`2.0.0.0`

编辑：有关 web.config 的信息来自该用户一小时前就类似问题提出的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:29:22.097

要解决此错误，请从参考文件夹中删除程序集。

# php - 两页随机图片

> ID：14626494
> 
> 赞同：2
> 
> 时间：2013-01-31T13:05:48.833
> 
> 标签：php, mysql

我有一个存储三类图像的表：汽车、自行车、公共汽车。这些图像出现在两页上。在第一页上，您应该看到每个类别的图像，定义如此随机。在第二页上，您应该会看到剩余的图片。我怎样才能使用 php 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:48:28.233

我更喜欢在 MySQL 中执行此操作，您可以将顺序设置为：

`ORDER BY MD5(ImageNo+UserRandomNumber)`

[SQL 小提琴](http://www.sqlfiddle.com/#!2/a8f41/10/0)

您可以为每个用户生成一个随机数，将其存储在会话中，然后将其应用于排序，只要提供的数字保持不变，订单也将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:39:38.033

您确实可以使用会话来存储在第一页上显示的图像，然后将它们留在第二页上。在不知道您确切的表结构的情况下，这样的事情应该可以工作：

```
<?php

// page 1
session_start();

function get_random_image_id($category)
{
    // SELECT id FROM images WHERE category = $category ORDER BY RAND() LIMIT 1
}

function show_image($id)
{
    // SELECT * FROM images WHERE id = $id
    // echo <img ...>
}

$_SESSION['image_ids'] = array(
    get_random_image_id("cars"),
    get_random_image_id("bikes"),
    get_random_image_id("buses"),
);

foreach($_SESSION['image_ids'] as $image_id)
{
    show_image($id);
}

?>

<?php

// page 2
session_start();

function show_images($exclude_ids)
{
    $ids = implode(",", $exclude_ids);
    // SELECT * FROM images WHERE id NOT IN ($ids)
}

$exclude = array();
if(isset($_SESSION['image_ids'])) // has the user visited page 1?
{
    $exclude = $_SESSION['image_ids'];
}

show_images($exclude);

?> 
```

# javascript - 如何使用 jquery 和 servlet 从数据库中检索图像

> ID：14626496
> 
> 赞同：0
> 
> 时间：2013-01-31T13:05:53.707
> 
> 标签：javascript, jquery, json, servlets

我需要检索存储在我的 oracle 11g R2 数据库中的图像。我正在尝试使用 Jquery 和 servlet 检索图像，并将其放入 css 部门。但我是这方面的新手。我知道使用 json 对象我们可以做这些事情。请任何人告诉我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:11:44.807

1.  发出一个返回所有图像名称列表的请求（以便您知道要检索什么）

2.  制作一个提供图像的 servlet - 获取名称作为 GET 参数，在数据库中查找它（例如通过 JDBC）并将结果流式传输回`response.getOutputStream()`，并设置正确的内容类型

# c# - 如何定义一个 C# 类来反序列化特定的 XML 表达式

> ID：14626499
> 
> 赞同：1
> 
> 时间：2013-01-31T13:05:57.240
> 
> 标签：c#, xml, serialization, .net-4.0

我的序列化/反序列化工作正常，但我想稍微更改 xml-File 以使其更具人类可读性。我现在拥有的是：

```
<Options>
  <Option>
    <Key>Backup</Key>
    <RegEx>.exe%</RegEx>
  </Option>
</Options> 
```

我想这样写：

```
<Options>
  <Option key="Backup" regex=".exe%" />
</Options>

[Serializable]
public class Option
{
    //[XmlElement("key")]
    public EOptions Key;
    //[XmlElement("regex")]
    public string RegEx;

    public override string ToString()
    {
        return Key.ToString();
    }
}

...
public List<Option> Options; 
```

我从一个小时开始用谷歌搜索并尝试了很多，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:07:16.367

替换你`XmlElement`的`XmlAttribute`.

```
[Serializable]
public class Option
{
    [XmlAttribute("key")]
    public EOptions Key;
    [XmlAttribute("regex")]
    public string RegEx;

    public override string ToString()
    {
        return Key.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:08:55.860

您使用[`XmlAttributeAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)类而不是`XmlElementAttribute`.

```
[Serializable]
public class Option
{
    [XmlAttribute("key")]
    public EOptions Key;
    [XmlAttribute("regex")]
    public string RegEx;

    public override string ToString()
    {
        return Key.ToString();
    }
} 
```

# php - 在 mysql 中存储 URL

> ID：14626502
> 
> 赞同：6
> 
> 时间：2013-01-31T13:06:09.877
> 
> 标签：php, mysql

我想从 php 执行一个 mysql 查询。

```
$sql = insert into q_links values ( 'garment.png', 'imgs\ques\p1\garment.png' ); 
```

我无法按原样存储 url，而是像这样存储它：`imgsquesp1garment.png`. 但我想像这样存储网址：`imgs\ques\p1\garment.png`. 所以我尝试了这个：

```
$sql = mysql_real_escape_string($sql); 
```

但是这样我`$sql`看起来像：

```
insert into q_links values ( \'garment.png\', \'imgs\\ques\\p1\\garment.png\' ); 
```

这在 mysql 数据库中不起作用。

我必须将此 url 插入数据库中以供以后使用。网址是`imgs\ques\p1\garment.png`。我怎样才能做到这一点？

**更新：** 我尝试了第一个对我有用的评论。

**所以解决方案是：**

```
$sql = "insert into q_links values ( 'garment.png', '".mysql_real_escape_string( 'imgs\ques\p1\garment.png' )."' );"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:08:33.667

```
$url = "imgs\ques\p1\garment.png";

$url = mysql_real_escape_string($url);
$sql = "INSERT INTO q_links VALUES ('garment.png', '$url')"; 
```

附带说明一下，不推荐使用 mysql_* 函数，您应该使用[mysqli_*](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/book.pdo.php)转到 Prepared 语句。

PDO 中的示例：

```
$pdo = new PDO("mysql:host=localhost;port=3306;dbname=mydb", "user", "password");
$stmt = $pdo->prepare("INSERT INTO q_links VALUES (?, ?)");
$stmt->execute(array("garment.png", "imgs\ques\p1\garment.png"));
$stmt->closeCursor(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:52:25.277

仅为 img 字段添加转义：

```
$sql = "insert into q_links values ( 'garment.png', '".mysql_real_escape_string( 'imgs\ques\p1\garment.png' )."' );" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:08:20.277

不要逃避单引号，只有`\`

```
$var = "insert into q_links values ( 'garment.png', 'imgs\\ques\\p1\\garment.png');" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T13:08:27.407

你为什么不用正斜杠来存储它呢？

```
$sql = insert into q_links values ( 'garment.png', 'imgs/ques/p1/garment.png' ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T13:12:34.863

```
I can be like this:
$img=addslashes("imgs\ques\p1\garment.png");
$sql=insert into q_links values('garment.png',$img);
and while retriving you can use stripslashe(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T13:31:05.680

您可以使用此代码在数据库中输入图像 url

```
$url =mysql_real_escape_string('imgs\ques\p1\garment.png');
$sql = "insert into q_links values ( 'garment.png', '".$url."' ); 
```

如果您执行查询：插入 q_links 值（'garment.png', 'imgs\ques\p1\garment.png'）；

它将成功插入数据库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T13:09:10.603

使用 PDO。`mysql_`无论如何都已弃用。

```
 $params = array('value_one','value_two')
    $dbh = new PDO('credentials go here');
    $sql = 'insert into q_links values ( ?, ? );';
    $stmt = $dbh->prepare($sql);
    $stmt->execute($params); 
```

使用 PDO，您将准备您的语句，然后使用您想要的确切变量调用执行它。它会为你逃脱这一切。

# html - CSS不同的高度

> ID：14626504
> 
> 赞同：0
> 
> 时间：2013-01-31T13:06:12.700
> 
> 标签：html, css, height

我正在学习 html、css 和 php。我用页眉、菜单（左）、内容（右）和页脚创建了这个结构。在'right'里面有一个php表单。当用户将表单发送到服务器时，服务器会用一个表格来回答。此表可以大于“左”高度。这样左和右处于不同的高度。

HTML结构：

```
<div class="header">
<h1>AGENDA ELETRÔNICA</h1>
</div>
<div class="container">
<div class="left">
<ul>
<ol><a class="menu" href="index.php">Home</a></ol>
<ol><a class="menu" href="cadastrar_pessoas.php">Cadastrar</a></ol>
<ol><a class="menu" href="buscar_pessoas.php">Buscar</a></ol>
<ol><a class="menu" href="gerenciamento.php">Alterar</a></ol>
</ul>
</div>

<div class="right">
FORM PHP
</div>
</div>
<div class="footer">
<small><a class="rodape" href="">Sobre</a></small>
<small> || </small>
<small><a class="rodape" href="">Contato</a></small>
<small> || </small>
<small><a class="rodape" href="">Ajuda</a></small>
</div> 
```

和 CSS 结构直到现在：

```
.container{

}

.header, .footer{
text-align: center;
background-color: #777;
color: white;
border-style: dotted;
border-width: 1px;
border-color: black;
width: 100%;
}

.footer{
text-align: center;
line-height: 100%;
float: left;
height: 5%;
margin-bottom: 3px;
}

.left{
border-style: dotted;
border-width: 1px;
border-color: black;
background-color: #CCC;
float: left;
width: 11%;
min-height: 500px;
margin: 2px 0px 2px 0px;
padding: 0px 0px 0px 0px;
height: 100%;
}

.right{
border-style: dotted;
border-width: 1px;
border-color: black;
width: 88%;
float: right;
min-height: 500px;
margin: 2px -2px 2px 8px;
padding: 0px 0px 0px 0px;
height: 100%;
} 
```

我在 stackoverflow 和其他网站上尝试了许多解决方案，但我无法满足我的需求。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:56:42.913

我看不出高度不同有什么问题，但我建议你使用桌子；在这种情况下：

```
<div id="header">...</div>

<table width="100%">
<tr>
<td valign="top id="left">....</td>
<td valign="top id="right">....</td>
</tr>
</table>

<div id="footer">...<.div> 
```

这样，两个“边”将具有相同的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:49:20.323

如果我正确理解您的问题，您希望左右 div 始终具有相同的高度，而右 div 中的内容并不总是已知的。

这是一个无表格的 CSS 解决方案：http: [//jsfiddle.net/panchroma/Hxh9x/](http://jsfiddle.net/panchroma/Hxh9x/)

我为左右 div 添加了一个大填充和一个同样大的负边距，然后环绕它们的容器 div 都隐藏了溢出。

**CSS**

```
.left{
padding-bottom: 99999px;
margin-bottom: -99999px;
/* more stuff */
}  

.right{
padding-bottom: 99999px;
margin-bottom: -99999px;
/* more stuff */
}

.container{
overflow: hidden;   
} 
```

**HTML**

```
<div class="header">
</div> <!-- end header -->

<div class="container">

<div class="left">
</div> <!-- end left -->

<div class="right">
</div> <!-- end right -->

</div> <!-- end container -->

<div class="footer">
</div> <!-- end footer --> 
```

这种技术也适用于跨浏览器。

为简单起见，我注释掉了一些额外的 CSS。在此示例中，我还删除了这些 div 周围的边框。请记住，边框实际上会为 div 增加额外的宽度，因此这可能会导致您的宽度计算失败。如果您需要边框，请查看[box-sizing:border-box](http://css-tricks.com/box-sizing/)方法，该方法强制您的 div 内的边框。

希望这可以帮助！

# c# - 防止弹出窗口停留在新启动的模式窗口之上

> ID：14626508
> 
> 赞同：0
> 
> 时间：2013-01-31T13:06:46.620
> 
> 标签：c#, .net, wpf, mvvm

我有一个使用弹出窗口的窗口。弹出窗口设置为按照规范的要求保持打开状态。此窗口还会启动一个新的模式窗口。我遇到的问题是新的模式窗口出现在原始窗口的顶部，而不是弹出窗口。弹出窗口出现在所有内容之上，这一切看起来都很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:07:27.227

Adrian Faciu 提到的[**NonTopmostPopup**](https://gist.github.com/903202)让我很幸运。它仅位于其父窗口的最顶层，因此，假设您的模态窗口确实是一个新的`Window`（不仅仅是另一个看起来像一个的控件），它应该可以正常工作。如果我记得，它唯一的小问题是一个非常偶然的闪烁或刷新期，具体取决于被拖到它前面的 Windows 等（但对于我来说，不使用它还不足以成为问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:20:34.213

```
public class PopupParentWindowFocusBehavior : Behavior<Popup>
{
    private bool _hidden;
    private UIElement _lastPlacementTarget;
    private System.Windows.Window _lastWindow;
    private PropertyChangeNotifier _placementTargetNotifier;

    protected override void OnAttached()
    {
        base.OnAttached();
        InitializeForPlacementTarget();

        _placementTargetNotifier = new PropertyChangeNotifier(AssociatedObject, Popup.PlacementTargetProperty).AddValueChanged(OnPlacementTargetChanged);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        DetachWindowEvents();

        if (_lastPlacementTarget != null)
        {
            ((Control)_lastPlacementTarget).Loaded -= OnPlacementTargetLoaded;
        }
        _placementTargetNotifier.ValueChanged -= OnPlacementTargetChanged;
    }

    private void OnPlacementTargetChanged(object sender, EventArgs e)
    {
        InitializeForPlacementTarget();
    }

    private void InitializeForPlacementTarget()
    {
        if (_lastPlacementTarget != null)
        {
            ((Control)_lastPlacementTarget).Loaded -= OnPlacementTargetLoaded;
        }
        if (AssociatedObject.PlacementTarget != null)
        {
            ((Control)AssociatedObject.PlacementTarget).Loaded += OnPlacementTargetLoaded;
            AttachWindowEvents();
        }
        _lastPlacementTarget = AssociatedObject.PlacementTarget;
    }

    private void OnPlacementTargetLoaded(object sender, RoutedEventArgs e)
    {
        AttachWindowEvents();
    }

    private void OnWindowClosed(object sender, EventArgs e)
    {
        DetachWindowEvents();
    }

    private void AttachWindowEvents()
    {
        if (_lastWindow != null)
        {
            DetachWindowEvents();
        }

        System.Windows.Window window = System.Windows.Window.GetWindow(AssociatedObject.PlacementTarget);
        if (window != null)
        {
            window.Deactivated += OnWindowDeativated;
            window.Activated += OnWindowActivated;
            window.Closed += OnWindowClosed;
        }

        _lastWindow = window;
    }

    private void DetachWindowEvents()
    {
        if (_lastWindow != null)
        {
            _lastWindow.Deactivated -= OnWindowDeativated;
            _lastWindow.Activated -= OnWindowActivated;
            _lastWindow.Closed -= OnWindowClosed;
        }
    }

    private void OnWindowDeativated(object sender, EventArgs e)
    {
        System.Windows.Window window = System.Windows.Window.GetWindow(AssociatedObject.PlacementTarget);
        if (window != null && AssociatedObject.IsOpen)
        {
            _hidden = true;
            AssociatedObject.IsOpen = false;
        }
    }

    private void OnWindowActivated(object sender, EventArgs e)
    {
        if (_hidden)
        {
            _hidden = false;
            AssociatedObject.IsOpen = true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:11:11.630

Popup 是一个控件，它在 XBAP 中非常有用，在 XBAP 中您不能（或者如果您这样做，您会收到安全警告）由于权限而打开第二个窗口，并且 Popup 是显示消息框的一种方便的方式。如果您在普通 WPF 中工作，我建议您使用普通窗口（如果需要，使用 WindowStyle.None）而不是弹出窗口。

说，据我所知，弹出窗口总是显示在顶部，我无论如何都没有找到避免这种情况的方法。

参考 :: [http://social.msdn.microsoft.com/Forums/en/wpf/thread/7467957a-08e9-4e9b-a03f-51c79a94bccb](http://social.msdn.microsoft.com/Forums/en/wpf/thread/7467957a-08e9-4e9b-a03f-51c79a94bccb)

# c# - 当 DB 值为 NULL 时，将整数值显示为零的问题

> ID：14626509
> 
> 赞同：2
> 
> 时间：2013-01-31T13:06:52.187
> 
> 标签：c#, asp.net, gridview

大家好我写了以下内容来显示从数据库到gridview列的整数值，如下所示

```
<asp:TemplateField>
<ItemTemplate>
<asp:Label ID="lblTotalReplies" runat="server" Text='<%#Eval("TotalReplies")==System.DBNull ?  "0" : Convert.ToInt16(Eval("TotalReplies")).ToString() %>'></asp:Label>&nbsp;&nbsp;Replies</li>
</ItemTemplate>
</asp:TemplateField> 
```

但是我遇到了一个错误，当我在数据库中有空值时，`System.DBNull' is a 'type', which is not valid in the given context`有人可以帮助我如何显示。`0`我不想绑定使用`rowdatabound`或其他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:10:11.990

与[DBNull.Value比较](http://msdn.microsoft.com/en-us/library/system.dbnull%28v=vs.100%29.aspx)

```
<asp:Label ID="lblTotalReplies" runat="server" 
     Text='<%#Eval("TotalReplies") ==System.DBNull.Value ?  "0" : 
           Convert.ToInt16(Eval("TotalReplies")).ToString() %>'>
</asp:Label>&nbsp;&nbsp;Replies</li> 
```

DBNull 是类型，而 Value 属性

> 表示 DBNull 类的唯一实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:10:31.833

这是真的。它是一种类型。也许您正在寻找[`Value`](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)它上面的静态字段？

```
Eval("TotalReplies")==System.DBNull.Value 
```

> 表示[`DBNull`](http://msdn.microsoft.com/en-us/library/system.dbnull.aspx)类的唯一实例。

* * *

Ravi 的评论指出，如果您的 SQL 当前如下所示：

```
SELECT TotalReplies, ... 
```

然后您可以将其更改为：

```
SELECT ISNULL(TotalReplies,0) as TotalReplies, ... 
```

我通常使用`COALESCE`而不是`ISNULL`，在这种情况下它看起来相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:10:45.250

该`System.DBNull`类型有一个静态字段`Value`，您应该与之比较：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label ID="lblTotalReplies" runat="server" Text='<%#Eval("TotalReplies") == System.DBNull.Value ?  "0" : Convert.ToInt16(Eval("TotalReplies")).ToString() %>'></asp:Label>&nbsp;&nbsp;Replies</li>
    </ItemTemplate>
</asp:TemplateField> 
```

# safari - Safari - 网站在 iOS 6.0.1 而不是在 iOS 5.x 中崩溃

> ID：14626513
> 
> 赞同：0
> 
> 时间：2013-01-31T13:07:11.597
> 
> 标签：safari, crash, ipad-3

我正在尝试在 iPad 3 Safari 浏览器中打开以下 URL。 [http://www.pearsonschool.com/index.cfm?locator=PS1yJe&PMDbProgramId=110081&sampleId=11241](http://www.pearsonschool.com/index.cfm?locator=PS1yJe&PMDbProgramId=110081&sampleId=11241)

并执行以下步骤：

点击“自己探索Teacher Place的创新技术” 在左上角，点击“Dash” -> Teacher Content 然后选择 CMP3 Grade 7 点击 Accentuate the Negative 然后点击“3”（乘除法..）选择“问题3.1”点击“启动”按钮

在这里，我们有 3 个选项来扩展即启动视频、连接到先前或知识和提出挑战。通过单击这些选项右侧的“>”按钮展开所有 3 个项目。滚动到底部

它崩溃了。

它在 iOS 5 Safari 上运行良好。但它在 iOS 6.0.1 Safari 上崩溃了。

以下是我在崩溃期间注意到的消息：

```
??Jan 31 07:21:13 Happiestminds kernel[0] <Debug>: 008192.238887 wlan.A[568] AppleBCMWLANNetManager::checkRealTimeTraffic():  now 8192.238881625 num entries 4
??Jan 31 07:22:07 Happiestminds ReportCrash[355] <Notice>: Formulating crash report for process MobileSafari[230]
??Jan 31 07:22:07 Happiestminds ReportCrash[355] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
??Jan 31 07:22:07 Happiestminds com.apple.launchd[1] (UIKitApplication:com.apple.mobilesafari[0x61fb][230]) <Warning>: (UIKitApplication:com.apple.mobilesafari[0x61fb]) Job appears to have crashed: Segmentation fault: 11
??Jan 31 07:22:07 Happiestminds backboardd[51] <Warning>: Application 'UIKitApplication:com.apple.mobilesafari[0x61fb]' exited abnormally with signal 11: Segmentation fault: 11
??Jan 31 07:22:07 Happiestminds ReportCrash[355] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/MobileSafari_2013-01-31-072206_Happiestminds.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

我不明白为什么它会在最新的 safari 中崩溃......当我用谷歌搜索时，我发现一些 URL 说它的问题与重定向有关，一些说关于书签，还有一些说关于内存管理。但我找不到确切的问题。

有人可以帮我确定确切的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T06:48:42.727

您可以尝试在 mac 上使用 chrome 调试 javascript，将 console.log 添加到您的代码中并按照本教程进行操作：

[http://devcoma.blogspot.it/2014/03/how-to-investigate-ios-safari-crashes.html](http://devcoma.blogspot.it/2014/03/how-to-investigate-ios-safari-crashes.html)

我使用安装在我的 mac 上的代理来调试和跟踪从 ios safari 到 chrome 开发工具。

我发现在我的网络应用程序上，当使用 iframe、css 转换、css 溢出属性和 jQuery 就绪事件时，safari 显然不会同时崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-29T07:39:11.703

当浏览器有更新时，我们也必须分别更改代码中的 javascript 等。

# batch-file - 批处理命令替换文件中的文本

> ID：14626516
> 
> 赞同：0
> 
> 时间：2013-01-31T13:07:20.560
> 
> 标签：batch-file, command-prompt

我知道这个问题被问了很多次，但我没有得到我正在搜索的答案。我想使用 windows`.bat`文件替换模式。

我知道如何替换`X`为`Y`.

但我试图`installPath`用`C:\Programfiles\Install\`.

在这里，我面临问题，因为新值字符串包含`\`特殊字符。

请让我知道如何替换它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:38:58.360

Followinf 脚本将在文件中查找字符串并替换为另一个字符串。前任。“installPath”将替换为“C:\Programfiles\Install”

```
@echo off
for /f "usebackq tokens=*" %%a in ("test.txt") do call :Replace "%%a"
del "test.txt" 
rename "newfile.txt" test.txt 

exit /b

:Replace
set str1=%~1 
set str1=%str1:installPath=C:\Programfiles\Install% 
echo.%str1%>>"newfile.txt" 

exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:20:32.337

这对我来说很好

```
set p=installPath
set p=%p:installPath=C:\Programfiles\Install\%
echo %p% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:09:27.700

也许这个工具可以帮助你：

[http://sourceforge.net/projects/fart-it/](http://sourceforge.net/projects/fart-it/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T18:06:22.220

这应该工作......顺便说一句，这是我在这个网站上的第一篇文章。以下使用延迟扩展，以便您可以使用两个不同的“变量符号”：

```
 setlocal enabledelayedexpansion
    set iPath=installPath
    set input=C:\Programfiles\Install\
    set p=!iPath:installPath=%input%! 
```

希望这可以帮助

# css - CSS 无法在 ie7 或更早版本上加载

> ID：14626518
> 
> 赞同：0
> 
> 时间：2013-01-31T13:07:30.003
> 
> 标签：css, internet-explorer-7, internet-explorer-6

我在 ie7 中遇到一个问题，我的样式表根本没有加载，我检查了它是否编码为没有 BOM 的 utf-8，并且页面上的字符集设置为 utf-8。这是头部：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="public/themes/dark/less/style.css">

        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    </head> 
```

如果有任何帮助，请访问该网站：http: [//www.mattjonesmusic.com/](http://www.mattjonesmusic.com/)

我认为这个错误也可能发生在 ie6 上，尽管我没有虚拟机设置来测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:23:20.670

找到了答案，这是一个编译问题（我正在从源代码自己编译引导程序）。我已经摆脱了一个包含定义仅在 ie 过滤器中使用的变量的方法。

感谢所有试图提供帮助的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:21:11.650

尝试删除以下标记 meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"

# mysql - SQL - 获取最后更改的唯一值

> ID：14626526
> 
> 赞同：1
> 
> 时间：2013-01-31T13:08:02.430
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
key data created
1   a    14:15
2   b    14:16
2   c    14:17
1   a    14:18
3   b    14:19
3   c    14:20
3   a    14:21
1   b    14:22
2   c    14:23
2   c    14:24 
```

我想获得插入最新数据的最后 2 个唯一键。换句话说，我想要一个能得到我的查询：1,2

但是当我做这样的事情时：

```
SELECT distinct(key) FROM logs ORDER BY created DESC LIMIT 0,1 
```

或这个：

```
SELECT key FROM logs GROUP BY key ORDER BY created DESC LIMIT 0,1 
```

我只得到：2,3 可能是因为这些是表中的最后一个键。我不知道如何使用最新数据获取 2 个密钥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:35:45.360

试试这个：

```
SELECT `key`, MAX( `created` ) AS `maxcreated`
FROM `logs`
GROUP BY `key`
ORDER BY `maxcreated` DESC 
LIMIT 0,2 
```

您没有选择每个密钥的最大值（即最新创建时间）。

所以只需使用`GROUP BY`to select per`key`并添加 a`MAX( created )`来选择 each 的最后一个外观`key`。应用相应的`ORDER BY`and`LIMIT`子句，您将获得所需的结果。

[**示例小提琴**](http://sqlfiddle.com/#!2/ac059/2)

# javascript - 带有 Marionette 视图的 Backbone-relational 示例

> ID：14626538
> 
> 赞同：4
> 
> 时间：2013-01-31T13:08:32.803
> 
> 标签：javascript, backbone.js, marionette, backbone-relational

我最近刚开始使用backbone.js，因为我有一个相当大的数据结构，我使用backbone-relational 以使其尽可能精简和快速。

现在我想使用木偶视图，但我一直在努力获得集合和子视图集合的渲染以及所有这些都可以很好地工作。

所以我想知道是否有人有一个同时使用骨干关系和牵线木偶的例子，它显示了如何正确处理视图。

任何帮助是极大的赞赏

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:06:33.873

Marionette 有一个 CompositeView 最适合嵌套集合。

[Marionette Composite 查看文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

[木偶复合材料 查看文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# javascript - 使用 Javascript 从我的 Windows URL 获取基本 URL 和文件路径

> ID：14626544
> 
> 赞同：4
> 
> 时间：2013-01-31T13:08:46.743
> 
> 标签：javascript, html

嗨，我试图从我的 Windows URL 获取基本 URL 和文件路径..但​​我无法得到它..请纠正我..

**网址是：**

[http://sample.com:30023/portal/site/samples/index.jsp](http://sample.com:30023/portal/site/samples/index.jsp)

**当前输出为：** [http](http://sample.com:30023/index.jsp) ://sample.com:30023/index.jsp ?

**所需的输出是：** [http ://sample.com:30023/portal/site/samples/](http://sample.com:30023/portal/site/samples/)

**使用的代码：**

```
var baseURL = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + "/"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:14:16.133

添加location.pathname，所以它变成

```
var baseURL = location.protocol + "//" + location.hostname + (location.port && ":" + location.port) + location.pathname; 
```

另外，为什么不简单地使用 location.href 来获取整个内容呢？

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)的良好参考

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:18:51.020

也许是这样的：

```
var sBase = location.href.substr(0, location.href.lastIndexOf("/") + 1); 
```

# asp.net - 是否有任何工具可以验证 .aspx 页面嵌套和样式结构？

> ID：14626546
> 
> 赞同：0
> 
> 时间：2013-01-31T13:08:52.157
> 
> 标签：asp.net, html, css, nested

我正在开发一个基于 Web 的应用程序。我有一个 .aspx 页面，其中包括 html、css、javascript 和 asp.net 控件。

以下是嵌套元素/标签的情况：

1.  桌子
2.  asp:面板
3.  asp:更新面板
4.  div

我使用了各种嵌套组合，如下所示：

```
 1\. <asp:Panel>
    <asp:UpdatePanel>
       <table></table>

    </asp:UpdatePanel>
 </asp:Panel>

 2\. <table>
    <asp:Panel>
    <asp:UpdatePanel> 
         <table></table>
     <asp:UpdatePanel>
   </asp:Panel>
 </table>

 3\. <asp:Panel>
 <asp:UpdatePanel> 
         <table></table>
     <asp:UpdatePanel>
 </asp:Panel>

 4\. <table>
   <asp:UpdatePanel>
      <table>
        <asp:Panel></asp:Panel>
     </table>
    </asp:UpdatePanel>
 </table>

 5\. <table>
   <asp:UpdatePanel>
      <table>
        <div></div>
     </table>
   </asp:UpdatePanel>
  </table> 
```

**但是当我使用这样的结构时，发生页面回发时不会应用 css 样式。**

**问题：** 是否有任何聪明的方法来识别适当的结构。有什么工具吗？或者我使用过的任何不支持的格式？请帮助我解决此页面结构问题。因为每次手动做这些东西，很烦人。

编辑：或有关页面结构、嵌套和行为的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:11:55.190

您可以使用 Visual Studio Express 版本

设计师可以帮助您验证您的结构吗

链接： http: [//www.microsoft.com/france/visual-studio/essayez/express.aspx](http://www.microsoft.com/france/visual-studio/essayez/express.aspx)

# javafx-2 - 将 JavaFx fxml 或 JavaFx swing 应用程序隐藏到系统托盘

> ID：14626550
> 
> 赞同：11
> 
> 时间：2013-01-31T13:09:03.403
> 
> 标签：javafx-2, system-tray, fxml

我想为网站开发一个客户端应用程序。

我希望应用程序**在最小化时驻留在系统托盘中。**

我不知道如何完成这项任务。

他们是此类操作的任何示例。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-31T20:09:46.360

这里的关键是将隐式退出设置为 false`Platform.setImplicitExit(false);` 在新线程中显示和隐藏阶段也很重要。

```
 Platform.runLater(new Runnable() {
    @Override
    public void run() {
        stage.show();
    }
 });

 Platform.runLater(new Runnable() {
    @Override
    public void run() {
        stage.hide();
    }
 }); 
```

接下来，整个代码：

```
import java.awt.AWTException;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.TrayIcon;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.net.URL;
import javafx.application.Application;
import javafx.application.Platform;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.stage.Stage;
import javafx.stage.WindowEvent;
import javax.imageio.ImageIO;

/**
 *
 * @author alvaro
 */
public class TrayTest extends Application {

    private boolean firstTime;
    private TrayIcon trayIcon;

    public static void main(String[] args)
    {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        createTrayIcon(stage);
        firstTime = true;
        Platform.setImplicitExit(false);
        Scene scene = new Scene(new Group(), 800, 600);
        stage.setScene(scene);
        stage.show();

    }

    public void createTrayIcon(final Stage stage) {
        if (SystemTray.isSupported()) {
            // get the SystemTray instance
            SystemTray tray = SystemTray.getSystemTray();
            // load an image
            java.awt.Image image = null;
            try {
                URL url = new URL("http://www.digitalphotoartistry.com/rose1.jpg");
                image = ImageIO.read(url);
            } catch (IOException ex) {
                System.out.println(ex);
            }

            stage.setOnCloseRequest(new EventHandler<WindowEvent>() {
                @Override
                public void handle(WindowEvent t) {
                    hide(stage);
                }
            });
            // create a action listener to listen for default action executed on the tray icon
            final ActionListener closeListener = new ActionListener() {
                @Override
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    System.exit(0);
                }
            };

            ActionListener showListener = new ActionListener() {
                @Override
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            stage.show();
                        }
                    });
                }
            };
            // create a popup menu
            PopupMenu popup = new PopupMenu();

            MenuItem showItem = new MenuItem("Show");
            showItem.addActionListener(showListener);
            popup.add(showItem);

            MenuItem closeItem = new MenuItem("Close");
            closeItem.addActionListener(closeListener);
            popup.add(closeItem);
            /// ... add other items
            // construct a TrayIcon
            trayIcon = new TrayIcon(image, "Title", popup);
            // set the TrayIcon properties
            trayIcon.addActionListener(showListener);
            // ...
            // add the tray image
            try {
                tray.add(trayIcon);
            } catch (AWTException e) {
                System.err.println(e);
            }
            // ...
        }
    }

    public void showProgramIsMinimizedMsg() {
        if (firstTime) {
            trayIcon.displayMessage("Some message.",
                    "Some other message.",
                    TrayIcon.MessageType.INFO);
            firstTime = false;
        }
    }

    private void hide(final Stage stage) {
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                if (SystemTray.isSupported()) {
                    stage.hide();
                    showProgramIsMinimizedMsg();
                } else {
                    System.exit(0);
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:03:53.083

据我所知，这在 JFX 8 中是可能的。现在最好的解决方案是将您的应用程序嵌入 AWT 并隐藏 AWT 窗口本身。

# linq - Linq 联盟不工作

> ID：14626555
> 
> 赞同：2
> 
> 时间：2013-01-31T13:09:15.330
> 
> 标签：linq

我正在尝试`Linq Union`将其他记录添加到结果中，但 Union 不起作用。也许有人可以指出我正确的方向。

```
 public class ProductView
                    {
                        public int Id { get; set; }
                        public bool Active { get; set; }
                        public string Name { get; set; }
                        public int ProductTypeId { get; set; }
                        public int UserCount { get; set; }

        }

void Main()
{

var product = Products.Select(p => new ProductView
   {
        Id = p.Id,
        Active = p.Active,
        Name = p.Name,
        ProductTypeId = p.ProductTypeId,
        UserCount = 1
   }).ToList();

    //The new item is not jointed to the result above   
    product.Union(new[] {
            new ProductView
            {
            Id = 9999,
            Active = true, 
            Name = "Test",
            ProductTypeId=0,
            } 
         });

 product.Dump();                                          
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:11:48.677

您需要存储输出：

```
 var product2 = product.Union(new[] {
    new ProductView
    {
    Id = 9999,
    Active = true, 
    Name = "Test",
    ProductTypeId=0,
    } 
 });

 product2.Dump(); 
```

除此之外，覆盖 Equals 行为会很有用——因为您可能只想使用 Id 字段来检查相等性？

* * *

例如，如果您不覆盖 Equals 行为，那么您将获得 Object 引用 equals，如下所示：

```
void Main()
{

    var list = new List<Foo>()
    {
    new Foo() { Id = 1},
    new Foo() { Id = 2},
    new Foo() { Id = 3},
    };

    var list2 = new List<Foo>()
    {
    new Foo() { Id = 1},
    new Foo() { Id = 2},
    new Foo() { Id = 3},
    };

    var query = list.Union(list2);

    query.Dump();

}

// Define other methods and classes here

public class Foo
{
 public int Id {get;set;}
} 
```

生产六件商品！

但是，如果您将 Foo 更改为：

```
public class Foo
{
    public int Id {get;set;}

    public override bool Equals(object obj)
    {
     if (obj == null || !(obj is Foo)) return false;
     var foo= (Foo)obj;
     return this.Id == foo.Id;
    }

    public override int GetHashCode()
    {
         return this.Id.GetHashCode();
    }    
} 
```

那么您将获得 3 件物品 - 这可能是您所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:14:50.010

如果您想以有意义的方式使用（除了通过引用进行比较），您需要覆盖`Equals`和`GetHashCode`。`ProductView``Union`

```
public class ProductView
{
    public int Id { get; set; }
    public bool Active { get; set; }
    public string Name { get; set; }
    public int ProductTypeId { get; set; }
    public int UserCount { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null || !(obj is ProductView)) return false;
        ProductView pv2 = (ProductView)obj;
        return this.Id == pv2.Id;
    }

    public override int GetHashCode()
    {
        return this.Id.GetHashCode();
    }
} 
```

您也可以`IEqualityComparer<ProductView>`以类似的方式实现 ，并将其[用于`Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx).

# html - 格式化网站设计

> ID：14626560
> 
> 赞同：0
> 
> 时间：2013-01-31T13:09:34.667
> 
> 标签：html

以下代码显示表单上方和谷歌地图下方。我应该如何编辑代码以在同一行中的左侧显示表单和在网页右侧显示谷歌地图？

```
<form action="php/process.php" method="post" enctype="multipart/form-data">
    <p>
        Subject<br>
        <input type="text" name="subject" size="40">
    </p>
    <p>
        Email<br>
        <input type="text" name="email" size="40">
    <p>
        Comment<br>
        <textarea name="message" rows="5" cols="40"></textarea>
    </p>
    <p>
        <button type="submit">Send</button>
    </p>
</form>

</div>
<!--contact form ends-->

<!--google map starts-->
<h2 align="right">
&nbsp;&nbsp;&nbsp;&nbsp;
<iframe width="400" height="250" frameborder="1" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/ms?msa=0&amp;msid=202307324044817298386.0004b64eed9ece46b338e&amp;ie=UTF8&amp;t=h&amp;z=17&amp;output=embed"></iframe>
<br /><small>
<h2>View <a href="https://maps.google.com/maps/ms?msa=0&amp;msid=202307324044817298386.0004b64eed9ece46b338e&amp;ie=UTF8&amp;t=h&amp;z=17&amp;source=embed" style="color:#0000FF;text-align:left">KsV's HoMe</a> in a larger map</small></h2>
<!--gogle map ends--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:18:13.193

你可以这样做：

div id="box" 将两者都包裹起来，所以说你的“line” div id="formleft" 使表单向左浮动， div id="mapright" 使地图向右浮动

```
<div id="box" style="position:relative;height:250px;width:820px;margin:0;padding:0;">
<div id="formleft" style="position:relative;float:left;width:400px;height:250px">
<form action="php/process.php" method="post" enctype="multipart/form-data">
<p>
  Subject<br>
<input type="text" name="subject" size="40">
</p>
<p>
Email<br>
<input type="text" name="email" size="40">
<p>
Comment<br>
<textarea name="message" rows="5" cols="40"></textarea>
</p>
<p>
<button type="submit">Send</button>
</p>

 </form>

</div>
<!--contact form ends-->
<div id="mapright" style="position:relative;float:right;width:400px;height:250px">
<!--google map starts--><h2 align="right">
&nbsp;&nbsp;&nbsp;&nbsp;     <iframe width="400" height="250" frameborder="1"        scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/ms?msa=0&amp;msid=202307324044817298386.0004b64eed9ece46b338e&amp;ie=UTF8&amp;t=h&amp;z=17&amp;output=embed">    </iframe><br /><small><h2>View <a href="https://maps.google.com/maps/ms?msa=0&amp;msid=202307324044817298386.0004b64eed9ece46b338e&amp;ie=UTF8&amp;t=h&amp;z=17&amp;source=embed" style="color:#0000FF;text-align:left">KsV's HoMe</a> in a larger map</small></h2>
<!--gogle map ends-->
</div>
</div> 
```

# wpf - WPF 更改填充颜色画笔

> ID：14626568
> 
> 赞同：0
> 
> 时间：2013-01-31T13:09:54.737
> 
> 标签：wpf, binding, relative-path

在资源字典中，我存储了一个带有 Canvas 的 ViewBox

```
<Style x:Key="MyPathStyle" TargetType="Path">
    <Setter Property="Fill" Value="{Binding BackgroundColorBrush, 
        RelativeSource={RelativeSource AncestorType=iconcontrols:IconAsVisualBrush}}"/>
</Style>
<Viewbox x:Key="Icon2">
        <Canvas Width="40.000" Height="40.000">
            <Canvas>
                <Path Fill="#ff99baf4" Data="F1 M 14.377,23.798" />
                <Path Style="{StaticResource MyPathStyle}"  Data="..." />
             </Canvas>
         </Canvas>
</Viewbox> 
```

所以我想使用我的控件容器（称为 IconAsVisualBrush ）的 BackgroundColorBrush 更改第二个 Path 的颜色。这是

```
<Grid x:Name="GridIconBrush" Width="40" Height="40">
        <Grid.Background>
            <VisualBrush x:Name="CtrlVisualBrush"  Stretch="Uniform" />
        </Grid.Background>
 </Grid> 
```

VisualBrush 在 cs 中设置：

```
private static void OnIconBrushResourceChanged(DependencyObject source
            , DependencyPropertyChangedEventArgs e)
        {
IconAsVisualBrush control = source as IconAsVisualBrush;
control.CtrlVisualBrush.Visual = (Viewbox)Application.Current.FindResource(e.NewValue);
        } 
```

在我的 UserControl 中，我可以使用以下 xaml 绘制 ViewBox：

```
<iconcontrols:IconAsVisualBrush BackgroundColorBrush="White"
                                IconBrushResource="Icon2"/>
<iconcontrols:IconAsVisualBrush BackgroundColorBrush="Red"
                                IconBrushResource="Icon2"/> 
```

画布已正确绘制，但颜色未正确绘制。我收到： *找不到与引用'RelativeSource FindAncestor，AncestorType='IconAsVisualBrush'，AncestorLevel='1''的绑定源。BindingExpression:Path=BackgroundColorBrush; 数据项=空；目标元素是'路径'（名称=''）；目标属性是“填充”（输入“画笔”）*

有没有办法只更改所有者控件中设置的路径填充颜色（不是使所有 IconAsVisualBrush 具有相同颜色的动态资源），以便我可以用不同的填充颜色绘制相同的形状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:27:09.743

您的问题是您的样式中的 Setter 无法找到 IconAsVisualBrush，大概是因为它不是路径视觉树的一部分。您是否考虑过使用触发器？在不了解您的应用程序架构和调用 OnIconBrushResourceChanged 的​​内容的情况下，很难提出解决方案 - 但是，由于我们谈论的是 WPF，所以我会做出有根据的猜测，即您正在使用 MVVM。如果是这样，您可以像这样使用 DataTriggers：

```
<Style x:Key="MyPathStyle" TargetType="Path">
    <Setter Property="Fill" Value="White" />
    <Style.Triggers>
        <DataTrigger Binding="{MyColourChangedProperty}"
                     Value="True">
            <DataTrigger.Setters>
                <Setter Property="Fill" Value="Red"/>
            </DataTrigger.Setters>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

编辑：澄清一下，我在这里建议的样式会给你一个默认的白色填充，但如果你将'MyColourChangedProperty'（或你绑定的任何东西）设置为true，它会变成红色。

# mysql - MySQL 存储过程 - 如何在 FROM 子句中使用参数

> ID：14626569
> 
> 赞同：0
> 
> 时间：2013-01-31T13:10:11.210
> 
> 标签：mysql, sql, stored-procedures

我有以下存储过程：

```
DELIMITER ///

CREATE PROCEDURE tmp_test_proc(__TABLE__NAME varchar(255))
BEGIN
  SELECT COUNT(*) FROM __TABLE__NAME;
END///

DELIMITER ; 
```

我想从参数中选择`__TABLE__NAME`，但 MySQL 告诉我没有表`__TABLE__NAME`......那么有没有办法在 from 子句中使用参数的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:12:39.317

默认情况下，您不能参数化表名（*以及列名*），您需要为此创建`PreparedStatement`，

```
DELIMITER ///

CREATE PROCEDURE tmp_test_proc(__TABLE__NAME varchar(255))
BEGIN
    SET @sql = CONCAT('SELECT COUNT(*) FROM ', __TABLE__NAME);

    PREPARE stmt FROM @sql;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END///

DELIMITER ; 
```

# android - 绘制背景RelativeLayout时出现NullPointerException

> ID：14626573
> 
> 赞同：1
> 
> 时间：2013-01-31T13:10:18.200
> 
> 标签：android, nullpointerexception, android-relativelayout, background-color

像这样的愚蠢错误让我发疯，只想为每个视图绘制两种颜色的布局的背景，但我得到了一个 nullPointerException。

XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <RelativeLayout
        android:id="@+id/background_areas"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
.... 
```

JAVA文件：

```
 for (int o = 0; o < areas.size(); o++) {
        LayoutInflater li_area= (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View vArea = li_area.inflate(R.layout.areas_detalles_cpa, null);
        RelativeLayout fondo_area = (RelativeLayout)findViewById(R.id.background_areas);
        if(o%2==0){ 
```

空指针异常`fondo_area.setBackgroundColor(Color.rgb(104, 2, 64));`

```
 }else{
                 fondo_area.setBackgroundColor(Color.rgb(197, 5, 120));
        }
...... 
```

日志猫：

```
01-31 14:11:47.956: W/System.err(12950): java.lang.NullPointerException
01-31 14:11:47.964: W/System.err(12950):    at com.hiberus.campus.cpa.views.AreasEstudiosCPA.cargarListaAreas(AreasEstudiosCPA.java:125)
01-31 14:11:47.964: W/System.err(12950):    at com.hiberus.campus.cpa.views.AreasEstudiosCPA$task.onPostExecute(AreasEstudiosCPA.java:200)
01-31 14:11:47.964: W/System.err(12950):    at com.hiberus.campus.cpa.views.AreasEstudiosCPA$task.onPostExecute(AreasEstudiosCPA.java:1)
01-31 14:11:47.964: W/System.err(12950):    at android.os.AsyncTask.finish(AsyncTask.java:602)
01-31 14:11:47.964: W/System.err(12950):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
01-31 14:11:47.964: W/System.err(12950):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
01-31 14:11:47.964: W/System.err(12950):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 14:11:47.964: W/System.err(12950):    at android.os.Looper.loop(Looper.java:137)
01-31 14:11:47.964: W/System.err(12950):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-31 14:11:47.964: W/System.err(12950):    at java.lang.reflect.Method.invokeNative(Native Method)
01-31 14:11:47.964: W/System.err(12950):    at java.lang.reflect.Method.invoke(Method.java:511)
01-31 14:11:47.964: W/System.err(12950):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-31 14:11:47.964: W/System.err(12950):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-31 14:11:47.964: W/System.err(12950):    at dalvik.system.NativeStart.main(Native Method) 
```

我是否检查了 id、xml 文件的名称并且一切似乎都很好，这正在发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:16:36.967

我认为您缺少这部分..使用**vArea.findViewById()**而不是仅**findViewById()**

```
final View vArea = li_area.inflate(R.layout.areas_detalles_cpa, null);
        RelativeLayout fondo_area = (RelativeLayout)vArea.findViewById(R.id.background_areas); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:21:56.650

检查您的areas_detalles_cpa 布局是否包含fondo_area。另外，请记住，您无法按照您的方式在循环中找到具有相同 ID 的多个视图。

仅当只有一个具有该 ID 的视图并且您在循环中执行此操作时，才能通过 ID 查找视图。您可以执行 vArea.findViewById(R.id.background_areas) 来获取您需要的特定视图。

# c# - 使用单例类的事件处理程序为空

> ID：14626575
> 
> 赞同：0
> 
> 时间：2013-01-31T13:10:27.717
> 
> 标签：c#, wpf, extension-methods, inotifypropertychanged

我有一个客户端服务器应用程序。从服务器我得到一个简单的数据传输对象。例如

```
public class Person:BaseObject
{
  public string Name { get; set; }

  public string Course { get; set; }

  public Person( string name )
  {
    this.Name = name;
  }
} 
```

在客户端我有一个 WPF 应用程序，所以我必须使用 INotifyPropertyChanged。现在我寻找一种优雅的方式在我的对象中实现它。我的优势是大多数对话框只显示，因此没有理由在那里实现它，因为在这些情况下，整个对象将被切换（为此，我在包含该对象的 ViewModel 中使用 INotifyPropertyChanged）。现在我遇到了一个属性在更深的结构中发生变化的情况，而我的观点没有注意到它。

我尝试通过继承和扩展来解决它。我写了我的“自己的”课。

```
public class PersonCm : Person
{
    public new string Course
    {
      get
      {
        return base.Course;
      }
      set
      {
        base.Course = value;
        this.PropertyChanged( );
      }
} 
```

所以我从我的基类中获得了所有属性，并且只在我需要 INotifyPropertyChanged 的​​地方“覆盖”了这些属性。要添加我的功能，我使用以下两个类：

```
public class ClientFunctions : INotifyPropertyChanged
{
    public static readonly ClientFunctions Instance = new ClientFunctions( );

    private ClientFunctions( )
    {
      // Empty
    }

    [field: NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;

    public bool SetProperty<T>( ref T storage, T value, [CallerMemberName] string propertyName = "" )
    {
      if ( object.Equals( storage, value ) )
      {
        return false;
      }

      storage = value;
      this.OnPropertyChanged( propertyName, storage );
      return true;
    }

    public void OnPropertyChanged( string propertyName, object sender )
    {

      var eventHandler = this.PropertyChanged;
      if ( eventHandler != null )
      {
        eventHandler( this, new PropertyChangedEventArgs( propertyName ) );
      }
    }
} 
```

具有 INotifyPropertyChanged 代码的单例类。

```
 public static class Extension
 {
   public static void PropertyChanged( this BaseObject obj, [CallerMemberName] string propertyName = "" )
   {
    ClientFunctions.Instance.OnPropertyChanged( propertyName, obj );
   }
} 
```

还有一个扩展名为我的单例类。

我现在的问题是，每次我调用我的 INotifyPropertyChanged 代码时，我的 PropertyChangedEventHandler 都是空的，我不知道为什么。

有没有人对我有想法或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:41:34.737

~~在您的`PersonCm`班级中，您需要传递正在更改的属性的名称。~~

```
public class PersonCm : Person
{
    public new string Course
    {
      get
      {
        return base.Course;
      }
      set
      {
        base.Course = value;
        this.PropertyChanged("Course"); // should fix it
      }
} 
```

**编辑**

我现在看到您正在使用，`[CallerMemberName]`所以这不是解决方法。

好像`ClientFunctions.Instance.PropertyChanged`从来没有订阅过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:41:00.143

从我可以看到你有一个`PersonCm`带有属性的对象（你的），但是当它的属性发生变化时，扩展方法会导致`ClientFunctions.Instance`对象引发一个`PropertyChanged`事件。仅当您绑定到该对象`PropertyChanged`的属性时才会订阅。`ClientFunctions.Instance`包含你的属性的对象必须`INotifyPropertyChanged`用它自己的`PropertyChanged`事件来实现它自己（例如通过继承一个基类）。

（`PropertyChanged`如果该事件没有订阅者，则为 null - 即没有任何内容绑定到对象上的任何属性。）

# ruby - 当方法被意外调用的次数超过指定次数时，有没有办法从 rspec 获取堆栈跟踪？

> ID：14626576
> 
> 赞同：2
> 
> 时间：2013-01-31T13:10:27.293
> 
> 标签：ruby, rspec, trace, expectations

我设置了一个模拟对象并告诉它期望检查 nil 并返回 false：

```
status = double('status')
status.should_receive(:nil?).and_return(false) 
```

我只希望电话为零？发生一次，但我在我的 rspec 测试中遇到错误，说状态接收为零？两次。

有没有办法让 rspec 显示每个呼叫发生的位置/方式？

添加“--backtrace”选项不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:33:53.833

尝试这样的事情：

```
status.should_receive(:nil?).twice { puts caller; false } 
```

这告诉 rspec 允许两次调用并每次调用关联的块。该`caller`方法会生成一个完整的回溯，您应该能够对其进行分析`stdout`。我们还会返回`false`以留在我们正在测试的代码路径上。

如果这两个回溯很难区分并且您只对第二个（意外）调用感兴趣，那么设置两个连续的期望：

```
status.should_receive(:nil?).and_return(false)
status.should_receive(:nil?) { puts caller; false } 
```

这里 double 将在第一次调用时返回 false 并在第二次调用块。

*设置期望响应的参考：*
[https ://github.com/rspec/rspec-mocks#setting-responses](https://github.com/rspec/rspec-mocks#setting-responses)

# android - 如何在没有设备的情况下在 Nexus 4 上调试 OPENGL ES 2.0 错误？

> ID：14626577
> 
> 赞同：6
> 
> 时间：2013-01-31T13:10:28.700
> 
> 标签：android, opengl-es-2.0, nexus-4

我有一个带有一堆照片过滤器的 android 应用程序。过滤器是用 OpenGL ES 2.0 实现的，所以当我想保存最终图像时，我会调用 glReadPixels。它适用于我测试过的每台设备，但它似乎不适用于 Nexus 4。用户报告说他们可以应用过滤器，但是当他们保存最终图像时，他们在设备上找不到它。我想知道是否有任何方法可以模拟 nexus 4 并在模拟器上测试我的应用程序？我已经在模拟器上进行了测试，它工作正常也很高兴知道是否有人对 Nexus 4 有类似的问题。

我的 glReadPixels 电话。

```
GLES20.glReadPixels(0, 0, saveWidth, saveHeight, GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, mPixels); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:40:05.313

添加额外的日志记录并让一些测试用户向您发送输出；这可以帮助您缩小特定问题的范围，无论是 glReadPixels 还是文件保存。特别是，使用 glGetError() 并记录它的值，并在文件 I/O 周围添加 try/catch 块：

```
try {
    .... file ops
} catch (Exception e) {
    e.printStackTrace();
} 
```

# c#-4.0 - 如何将现有视图附加到控制器操作？

> ID：14626582
> 
> 赞同：5
> 
> 时间：2013-01-31T13:10:33.090
> 
> 标签：c#-4.0, asp.net-mvc-4

如何将现有视图附加到操作？我的意思是，我已经将这个视图附加到了一个动作，但我想要附加到第二个动作。

示例：我有一个名为 Index 的操作和一个视图，同名，附加到它，右键单击，添加视图...，但是现在，如何附加到第二个？假设有一个Action叫Index2，如何实现呢？

这是代码：

```
//this Action has Index View attached
public ActionResult Index(int? EntryId)
{
   Entry entry = Entry.GetNext(EntryId);

   return View(entry);
}

//I want this view Attached to the Index view...
[HttpPost]
public ActionResult Rewind(Entry entry)//...so the model will not be null
{
   //Code here

   return View(entry);
} 
```

我用谷歌搜索并找不到正确的答案......这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:13:57.543

您不能将操作“附加”到视图，但您可以使用`Controller.View`Method定义您希望操作方法返回的视图

```
public ActionResult MyView() {
    return View(); //this will return MyView.cshtml
}
public ActionResult TestJsonContent() {
    return View("anotherView");
} 
```

[http://msdn.microsoft.com/en-us/library/dd460331%28v=vs.98%29.aspx](http://msdn.microsoft.com/en-us/library/dd460331%28v=vs.98%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T13:38:00.507

这有帮助吗？您可以使用 View 的重载来指定不同的视图：

```
 public class TestController : Controller
{
    //
    // GET: /Test/

    public ActionResult Index()
    {
        ViewBag.Message = "Hello I'm Mr. Index";

        return View();
    }

    //
    // GET: /Test/Index2
    public ActionResult Index2()
    {
        ViewBag.Message = "Hello I'm not Mr. Index, but I get that a lot";

        return View("Index");
    }

} 
```

这是视图（Index.cshtml）：

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>@ViewBag.Message</p> 
```

# html - SVG img preserveAspectRatio Chrome

> ID：14626588
> 
> 赞同：3
> 
> 时间：2013-01-31T13:10:46.153
> 
> 标签：html, google-chrome, svg

当我对 SVG 文件中的图像使用 preserveAspectRatio=none 时，它​​似乎在 Google Chrome 中不起作用。SVG 不会根据图像的宽度和高度进行缩放。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg  id="test" 
xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
viewBox="0 0 1024 768"> 
<defs>
</defs>
<image x="288" y="140" width="368" height="160" xlink:href="image.svg" preserveAspectRatio="none" />
</svg>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg  id="test" 
xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
viewBox="0 0 1024 768"> 
<defs>
</defs>
<image x="288" y="140" width="368" height="160" xlink:href="image.svg" preserveAspectRatio="none" />
</svg> 
```

在 IE9、最新的 Opera 和 FF 中运行！

如果应该包含的图像没有属性 preserveAspectRatio=none，它似乎不起作用。我不能假设每个 SVG 都有这个属性。所以我需要知道如何覆盖这样的属性，以防 SVG 嵌入了“图像”标签。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T09:18:15.133

[http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)
请尝试“推迟”。
但我认为 chrome 不支持这个值。

# php - 非 SSL 网站的 OAuth1 或 OAuth2？

> ID：14626591
> 
> 赞同：2
> 
> 时间：2013-01-31T13:10:56.657
> 
> 标签：php, codeigniter, ssl, oauth, oauth-2.0

我想在我的 PHP 服务器上实现 OAuth 服务器，它有一个 SSL 连接。PHP-codeigniter 还没有像样的 OAuth 2 框架。那么我应该使用哪一个 OAuth1 或 OAuth2 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T11:04:08.990

简短的回答是：您应该考虑使用 OAuth 1.0a [1] 而不是 OAuth 2.0

长答案如下：

默认情况下，OAuth 2.0 需要使用 SSL/TLS 来确保传输层安全。因此，在实施符合 OAuth 2.0 的授权服务器时，您需要允许客户端应用程序通过安全通道连接到授权端点和令牌端点。请参阅 OAuth 2.0 规范 [2] 中的以下部分：

3.1（授权端点）

“[...] 向授权端点发送请求时，授权服务器必须要求使用第 1.6 节所述的 TLS。”

3.2（令牌端点）

“[...] 向令牌端点发送请求时，授权服务器必须要求使用第 1.6 节中所述的 TLS。”

在您的情况下，当您没有 SSL 连接时，您仍然**可以**考虑使用 OAuth 2.0 和 MAC 访问身份验证 [3]，它指定如何通过发出 MAC 类型的访问令牌来发出 OAuth 2.0 请求。此类令牌使用共享对称密钥进行加密签名（密钥在客户端应用程序和服务器之间共享）。

**重要提示：**但是，在这样的设置中，您仍然需要为客户端提供一种机制，以便能够以安全的方式与您的 OAuth 2.0 服务器建立共享密钥（如何完成取决于您 - 可以通过一些SSL 通道或带外，具体取决于您的具体用例）。这是允许客户端安全访问受保护资源的严格要求！

“MAC 方案需要在客户端和服务器之间建立共享对称密钥。该规范提供了一种这样的方法，用于使用 OAuth 2.0 以 MAC 类型访问令牌的形式向客户端颁发一组 MAC 凭据。

该机制的主要设计目标是简化和改进不愿意或无法对每个请求使用 TLS 的服务的 HTTP 身份验证。特别是，此机制利用初始 TLS 设置阶段在客户端和服务器之间建立共享机密。然后通过不安全的通道使用共享秘密来提供针对被动网络攻击者的保护。”

基于上述解释，我会考虑使用 OAuth 1.0a [3]，它不需要使用传输级安全性来进行客户端和授权服务器之间的通信（OAuth 1.0a 使用术语“服务提供者”，顺便说一句）。相反，它依赖于使用共享对称密钥（或 RSA 密钥）对消息进行签名。然而。请注意，除非您使用 HMAC-SHA1 或 RSA-SHA1 签名（即您决定使用 PlAINTEXT 签名类型），否则无论如何您都需要使用 SSL/TLS。

[1] [https://www.rfc-editor.org/rfc/rfc5849](https://www.rfc-editor.org/rfc/rfc5849)

[2] [https://www.rfc-editor.org/rfc/rfc6749](https://www.rfc-editor.org/rfc/rfc6749)

[3] [https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:15:31.387

从客户的角度来看，OAuth 2 更容易集成到应用程序中，还有其他好处：[OAuth 2 与 OAuth 1 有何不同？](https://stackoverflow.com/questions/4113934/how-is-oauth-2-different-from-oauth-1)

只需将任何外部 Oauth2 库与 Codeigniter 集成。这是一个：[https ://github.com/bshaffer/oauth2-server-php](https://github.com/bshaffer/oauth2-server-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:17:30.480

我使用 OAuth2 已经 2 年了，我强烈推荐使用它，因为它非常可靠。关于 SSL，据我所知，OAuth 应该利用 SSL 来获得正确的实现，避免这种情况根本不会采用 OAuth 协议。

# java - 如何在正则表达式中添加多个匹配条件

> ID：14626592
> 
> 赞同：0
> 
> 时间：2013-01-31T13:10:59.073
> 
> 标签：java, regex

我有一个这样的字符串：`String x = "return function ('ABC','DEF')";`

我正在使用这个：

```
Pattern pattern = Pattern.compile("'(.*?)'");
Matcher matcher = pattern.matcher(formula);
while (matcher.find()) {
    System.out.println("------> " + matcher.group();
} 
```

检索单引号之间的字符串。

我的问题是：我如何调整这个正则表达式，以便它检查单引号和字符串之间的字符串，如“，'DEF'”（意味着以'开头并以'结尾）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:15:00.390

您可以使用正则表达式模式：

```
Pattern.compile(",?'(.*?)'"); 
```

`,?`表示 0 或 1 个逗号。这 ？是贪心的，所以如果有逗号，它将被包含在匹配中。

**所以：**这将匹配：

*   逗号，后跟用单引号括起来的字符串

*   OR.. 仅用单引号括起来的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:18:40.320

这种模式应该做你想做的事：

```
"(?:,\s*)?'[^']*'" 
```

这`?`意味着第一组将匹配零次或一次。

我使用`(?:...)`是因为这是一个非捕获组。当您不需要捕获匹配的那部分时，最好使用它。

此外，我替换`.*?`为`[^']*`，这意味着单引号字符串包含任何不是单引号的内容。与`.*?`.

（注意：这个正则表达式允许逗号和字符串开头之间有空格。起初看你的例子，我认为你的例子是这样的。但现在我发现它不是。不过，那可能是有用取决于你的数据是什么样的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:18:55.063

您可以使用此模式：

```
'[^']+'|"[^"]+" 
```

只是为了匹配带引号的空字符串，将“+”更改为“*”。

见[测试](http://regexr.com?33k15)。

# android - 从最近使用的应用列表启动时应用崩溃

> ID：14626594
> 
> 赞同：1
> 
> 时间：2013-01-31T13:11:04.003
> 
> 标签：android

我有一个带有 LAUNCHER 和 MAIN 意图过滤器的特殊启动器活动，它启动了我的服务。当我的应用程序从最近使用的应用程序列表启动时，它会崩溃，因为服务没有启动。解决这个问题的正确方法是什么？也许我的应用程序架构不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:54:17.053

尝试调用`startService()`Activity 的`onStart()`方法。这样，每次您的 Activity 进入前台时都会调用它（包括从最近使用的应用程序列表中调用）。但请记住遵循 Activity 的生命周期并停止 Service in`onStop()`方法。

# kendo-ui - 来自孩子的剑道树视图头节点

> ID：14626597
> 
> 赞同：0
> 
> 时间：2013-01-31T13:11:12.163
> 
> 标签：kendo-ui, kendo-treeview

我有一个剑道树视图我使用这个函数来绑定事件更改

```
 change: function (e) {
        if (e.field == "checked") {
            gatherStates(e.items);
            alert(e.items);
        }
    } 
```

如果我想知道所选孩子的“爸爸节点”（包含所选孩子的节点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:13:59.393

我对 IE8 中的剑道树视图复选框有同样的问题

```
jQuery("#treeview").kendoTreeView({
    dataSource: ss,
    dataTextField: ["ss_"],
    checkboxes: {
        checkChildren: true
    },
    select: function (e) {
        jQuery(e.node).find("input")[0].click();
    }
});

var treeview = jQuery("#treeview").data("kendoTreeView");
treeview.expand(".k-item");
treeview.dataSource.bind("change", onCheckboxClicked); 
```

选择复选框的文本会触发树视图的选择事件，在这种情况下，我手动单击复选框（我的要求）...这反过来会触发 IE-9 中数据源的更改事件。但它不会触发 IE-8 中数据源的更改事件。问题是什么？

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:20:28.160

您可以从以下位置获取父节点`e.node`：

```
tree.dataSource.bind("change", function (e) {
    if (e.field == "checked") {
        var node = e.items[0];
        console.log("node", node.text);
        console.log("parent", e.node.text);
    }
}); 
```

这里的例子（[http://jsfiddle.net/OnaBai/ECnef/](http://jsfiddle.net/OnaBai/ECnef/)）

# ios - iOS - 分配泄漏是什么？

> ID：14626605
> 
> 赞同：0
> 
> 时间：2013-01-31T13:11:51.147
> 
> 标签：ios, memory, memory-management, memory-leaks

我使用 Allocations 分析了我的一个应用程序，并发现每当我调用特定方法时，我的“Live Bytes”数量都会增加 300 KB。我不知道是什么原因造成的。

以下代码行是罪魁祸首：

```
CNTile *newTile = [self getTileAtPosition:3]; 
```

关联的方法如下所示：

```
- (CNTile *)getTileAtPosition:(int)pos
{
    CNTile *tileToReturn;

    for (int x = 0; x < [row count]; x++)
    {
        for (int y = 0; y < [col count]; y++)
        {
            The code here generates four CGPoints and a CGMutablePathRef,
            then uses CGPathContainsPoint to determine which CNTile to return.
        }
    }

    return tileToReturn;
} 
```

我应该提一下，我的`CNTile`类只包含一个`UIView`and `UIImageView`，以及一些简单的变量（例如`int`s 和`BOOL`s）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:22:00.160

你是如何创作的`CGMutablePathRef`？与`CGPathCreateMutable`？如果是，请确保使用`CGPathRelease`释放它：

```
CGMutablePathRef thePath = CGPathCreateMutable();
...
CGPathRelease(thePath); 
```

# python - 如何从 JSON 递归地在 Python 中添加字典？

> ID：14626613
> 
> 赞同：1
> 
> 时间：2013-01-31T13:12:13.253
> 
> 标签：python, json, recursion, dictionary

亲爱的 Stackoverflow 会员，

我有这个 JSON 数组，它由以下项目组成（基本上）：

```
{
    {
        'Name': 'x',
        'Id': 'y',
        'Unsusedstuff' : 'unused',
        'Unsusedstuff2' : 'unused2',
        'Children': []
    },
    {   'Name' : 'xx',
        'Id': 'yy',
        'Unsusedstuff' : 'unused',
        'Unsusedstuff2' : 'unused2',
        'Children': [{
            'Name': 'xyx',
            'Id' : 'yxy',
            'Unsusedstuff' : 'unused',
            'Unsusedstuff2' : 'unused2',
            'Children: []
        } 
```

你得到了基本的想法。我想使用以下代码在 Python 列表中模拟这个（并且只获取 id 和名称和结构）：

```
names = []
def parseNames(col):
    for x in col:
        if(len(x['Children'])> 0):
            names.append({'Name' : x['Name'], 'Id' : x['Id'], 'Children' : parseNames(x['Children'])})
        else:
            return {'Name' : x['Name'], 'Id' : x['Id']} 
```

但是，它似乎只返回第一个“根”和第一个嵌套文件夹，但并没有遍历它们。

我将如何解决这个问题？

问候，

垫子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:54:05.363

按照我的阅读方式，您正试图将这棵树转换为只有 Id、Name 和 Children 的节点树。在这种情况下，我认为它是清洁节点。

清理节点：

1.  使用原始节点的名称和 ID 创建一个节点。
2.  将新节点的子节点设置为原始节点子节点的清理版本。（这是递归调用。）

在代码中，这将是：

```
def clean_node(node):
    return {
        'Name': node['Name'],
        'Id': node['Id'],
        'Children': map(clean_node, node['Children']),
    }

>>> print map(clean_node, data)
[{'Name': 'x', 'Children': [], 'Id': 'y'}, {'Name': 'xx', 'Children': [{'Name': 'xyx', 'Children': [], 'Id': 'yxy'}], 'Id': 'yy'}] 
```

我发现像这样分解递归问题更容易——尝试使用全局变量会使简单的事情很快变得非常混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:20:06.693

检查这个

```
def parseNames(col):
    for x in col:
        if(len(x['Children'])> 0):
            a = [{
                'Name' : x['Name'],
                'Id' : x['Id'],
                'Children' : x['Children'][0]['Children']
                }]
            parseNames(a)
        names.append({'Name' : x['Name'], 'Id' : x['Id']})
    return names 
```

我得到的输出是

```
[{'Name': 'x', 'Id': 'y'}, {'Name': 'xx', 'Id': 'yy'}, {'Name': 'xx', 'Id': 'yy'}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:18:55.547

您可以使用以下方法解析 Json 对象：

```
import json
response = json.loads(my_string) 
```

现在`response`是一个字典，其中包含每个 Json 对象的键。

# android - 设置重复警报

> ID：14626614
> 
> 赞同：0
> 
> 时间：2013-01-31T13:12:13.973
> 
> 标签：android, android-alarms, android-calendar

我是警报功能的新手。我正在开发一个警报应用程序。我可以在其中设置警报。当闹钟响起时，自定义注释会出现在弹出窗口中。我的代码是：

主.java

```
import java.util.Calendar;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;

public class AlarmMainActivity extends Activity {    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.MONTH, 0);
        cal.set(Calendar.YEAR, 2013);
        cal.set(Calendar.DAY_OF_MONTH, 31);
        cal.set(Calendar.HOUR_OF_DAY, 17);
        cal.set(Calendar.MINUTE, 40);

        //Create a new PendingIntent and add it to the AlarmManager
        Intent intent = new Intent(this, AlarmReceiverActivity.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this,12345, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),pendingIntent);
        finish();
    }
} 
```

AlarmRecieverActivity.java

```
import java.io.IOException;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;

public class AlarmReceiverActivity extends Activity {
    private MediaPlayer mMediaPlayer; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.alarm);

        callStop();

       playSound(this, getAlarmUri());        
    }

    private void playSound(Context context, Uri alert) {
        mMediaPlayer = new MediaPlayer();
        try {
            mMediaPlayer.setDataSource(context, alert);
            final AudioManager audioManager = (AudioManager) context
                .getSystemService(Context.AUDIO_SERVICE);
            if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        } catch (IOException e) {
             System.out.println("OOPS");
        }
    }

    //Get an alarm sound. Try for an alarm. If none set, try notification, 
    //Otherwise, ringtone.
    private Uri getAlarmUri() {
        Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
        if (alert == null) {
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            if (alert == null) {
            alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
            }
        }
        return alert;
    }

    private void callStop(){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
    alertDialogBuilder.setTitle("Medicine Alert");
    alertDialogBuilder.setMessage("ABC");
    alertDialogBuilder.setNeutralButton("Ok", new DialogInterface.OnClickListener() {                   
                public void onClick(DialogInterface dialog, int which) {
            mMediaPlayer.stop();
                    finish();
        } //end onClick.
    }); // end alertDialog.setButton.
    alertDialogBuilder.show();  
    }
} 
```

要求是：现在我想设置多个警报。

随着参数传递，警报应设置为接下来的 5 到 6 天。

用户可以一次编辑警报、删除警报和删除所有警报。

我应该在代码中做哪些更改以及我应该添加更多内容。请建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:17:00.107

看看[`AlarmManager.setRepeating`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)。

# facebook - 获取用户创建的事件 Graph API 语法

> ID：14626620
> 
> 赞同：1
> 
> 时间：2013-01-31T13:12:37.890
> 
> 标签：facebook, facebook-graph-api

我想通过 Facebook Graph Api 检索用户创建的事件。我已授予权限，范围内有 user_events，语法为 $events = $facebook->api('/me/events'); 但这是返回一个空数组？谁能对问题进行排序？

# python - 在 Python 程序中实现 API

> ID：14626624
> 
> 赞同：0
> 
> 时间：2013-01-31T13:12:49.340
> 
> 标签：python, api, curl, python-requests

我正在使用 Requests 与一个简单的 api 进行通信。

代码如下所示：

```
payload = {'text': reply, 'name': varname, 'avatar': varavatar}
r = requests.get('http://example.de/create.json', params=payload) 
```

但是，结果如下所示：

```
{"result": "error", "error": "error_no_direct_connection"} 
```

这可能是 api 的问题，但我不确定。所以我打印出 Requests 创建的 URL ( `print r.url`)。它看起来像这样：`http://url.com/create.json?text=Test&name=myname&avatar=http%3A%2F%2Fa0.url.com%2Fnormal.png`

为了确保这不是我使用 curl 尝试的 api 的问题。该命令有效！

```
curl --data-urlencode "text=Test" -d "name=myname" -d "avatar=http://url.com/normal.png" http://url.com/create.json 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:35:39.223

curl 选项`--data`使 curl 提交一个 POST 请求，而不是一个 GET 请求。试试`request.post(..., data=...)`。

# database - 如何避免 ScriptDb 中的重复？

> ID：14626625
> 
> 赞同：0
> 
> 时间：2013-01-31T13:12:49.740
> 
> 标签：database, google-apps-script, javascript-objects

我有一些对象要保存在数据库中，但每次执行脚本时它们都必须是唯一的。这些对象只会改变应用程序的每个实例的值。问题是当我创建第一个对象时，之后每次执行脚本时也会创建更多副本。我尝试再次使用同一个对象，但是当我执行查询时，我从以前的执行中获取对象，给我错误的值。我只是希望能够将相同的对象重置为其默认值，并且在 ScriptDb 中没有很多不必要的副本。

这是一些代码：

```
// Get a database instance
var database = getDb();

// Create a new employee instance
var myEmployee = {
element: "currentEmployee",
firstName: "",
lastName: "",
ID: 0,
manager: "",
managerEmail: "",
department: "1 - University Store",
startDate: "",
endDate: "",
regularHours: 0,
vacationHours: 0,
sickHours: 0,
personalHours: 0,
H2Hours: 0,
overtimeHours: 0,
totalHours: 0,
rowLocation: 0,
salaryType: "H",
};

var week1 = {
// Identify the week and for query purposes 
element: "Week1",

// User entries
HW: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
VH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
SH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
PH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
TH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},

// Calculated totals
TotalHW:0, TotalVH: 0, TotalSH: 0, TotalPH: 0, TotalHours: 0,

// Week totals
Vacation: 0, Sick: 0, Personal: 0, H2: 0, OT: 0, Regular: 0,
}

var week2 = {
// Identify the week and for query purposes 
element: "Week2",

// User entries
HW: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
VH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
SH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
PH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},
TH: {THUR: 0, FRI: 0, SAT: 0, SUN: 0, MON: 0, TUES: 0, WED: 0},

// Calculated totals
TotalHW:0, TotalVH: 0, TotalSH: 0, TotalPH: 0, TotalHours: 0,

// Week totals
Vacation: 0, Sick: 0, Personal: 0, H2: 0, OT: 0, Regular: 0,
}

// Save these to the database
database.save(myEmployee);
database.save(week1);
database.save(week2); 
```

然后，我将使用该语句`ScriptDb.getMyDb.query({element: element}).next()`来检索对象。包含“currentEmployee”、“Week1”或“Week2”的字符串元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T03:48:39.240

为避免在 ScriptDb 中重新创建*唯一键*对象，您必须首先检查您要保存的对象是否已经存在。如果是，那么您需要获取存储对象的句柄以用于更新。如果它不存在，您将`save()`使用新对象，返回值将是数据库中副本的句柄。

一般模式是这样的：

```
// Get a database instance
var db = getDb();

var result = db.query( {key:keyval, ...} );
if (result.hasNext()) {
  // The object already exists in ScriptDb
  var obj = result.next()
}
else {
  // The object doesn't exist in ScriptDb, so create it
  // This example would start by creating only the key values,
  // expanding the object during the update stage below.
  // Alternatively, you could create the entire object with all
  // its properties.
  obj = db.save({key:keyval, ...})
}

// Can now update the obj that is in ScriptDb
obj.prop1 = value1;
obj.prop2 = value2;
...

// Save updated object
db.save(obj); 
```

这是该模式如何应用于您的代码的示例。您将在此处看到正在使用创建新对象的替代方法，其中新对象是在 ScriptDb 中同时创建的及其所有属性。

```
// Get a database instance
var database = getDb();

// Find or create employee instance
var result = database.query({element: "currentEmployee"});
if (result.hasNext()) {
  var myEmployee = result.next();
} else {
  myEmployee = database.save({
    element: "currentEmployee",
    firstName: "",
    lastName: "",
    ID: 0,
    manager: "",
    managerEmail: "",
    department: "1 - University Store",
    startDate: "",
    endDate: "",
    regularHours: 0,
    vacationHours: 0,
    sickHours: 0,
    personalHours: 0,
    H2Hours: 0,
    overtimeHours: 0,
    totalHours: 0,
    rowLocation: 0,
    salaryType: "H"
  });
};

// Find or create Week1 instance
result = database.query({element: "Week1"});
if (result.hasNext()) {
  var week1 = result.next();
} else {
  week1 = database.save({
    // Identify the week and for query purposes 
    element: "Week1",

    // User entries
    HW: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    VH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    SH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    PH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    TH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},

    // Calculated totals
    TotalHW: 0, TotalVH: 0, TotalSH: 0, TotalPH: 0, TotalHours: 0,

    // Week totals
    Vacation: 0, Sick: 0, Personal: 0, H2: 0, OT: 0, Regular: 0,
  });
}

// Find or create Week2 instance
result = database.query({element: "Week2"});
if (result.hasNext()) {
  var week2 = result.next();
} else {
  week2 = database.save({
    // Identify the week and for query purposes 
    element: "Week2",

    // User entries
    HW: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    VH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    SH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    PH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},
    TH: {THUR: 0,FRI: 0,SAT: 0,SUN: 0,MON: 0,TUES: 0,WED: 0},

    // Calculated totals
    TotalHW: 0, TotalVH: 0, TotalSH: 0, TotalPH: 0, TotalHours: 0,

    // Week totals
    Vacation: 0, Sick: 0, Personal: 0, H2: 0, OT: 0, Regular: 0,
  });
}

// At this point, myEmployee, week1 and week2 refer to the ScriptDb objects.
// While we can use them as any javascript object, they also contain information
// relevant to their state as ScriptDb objects.
... 
```

# ssh - 我可以在不使用 vi 的情况下在我的服务器上编辑 my.cnf 文件吗

> ID：14626626
> 
> 赞同：0
> 
> 时间：2013-01-31T13:12:53.747
> 
> 标签：ssh, putty, whm

如何在不使用高度混乱的 vi 命令的情况下编辑我的服务器上的 my.cnf 文件..？

我使用 WHM

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:21:19.470

您可以使用其他一些文本编辑器。如果`vi`令人困惑，也许你很幸运已经`mcedit`安装了。

您还可以使用 复制计算机上的文件，`scp`使用您喜欢的编辑器在本地编辑它，然后将其复制回来。[我选择的令人困惑的编辑器](http://www.gnu.org/software/emacs/)透明地做这种事情，就好像我在处理本地文件一样。

# android - Amazon In App Billing 将值传递给 PurchasingManager.initiateItemDataRequest 以显示商品内容，如价格、标题

> ID：14626628
> 
> 赞同：0
> 
> 时间：2013-01-31T13:13:03.567
> 
> 标签：android, in-app-purchase, amazon

我正在使用适用于 Android 的 Amazon In app Purchase 我想在用户界面上显示商品的价格，但我不知道如何显示价格？

有一个方法被调用`PurchasingManager.initiateItemDataRequest`，但我不知道我需要传递给那个方法以便它会调用`onItemDataResponse`并给出详细信息？

**编辑：**

请看我下面的答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T19:37:43.343

是的，最后在做了很多研究之后，我知道如何才能得到下面显示的价格是程序：

```
 Set<String> skuSet = new HashSet<String>();
        skuSet.add("Your sku string here");
        PurchasingManager.initiateItemDataRequest(skuSet); 
```

现在我们将把 sku传递`initiateItemDataRequest`给`onItemDataResponse``ButtonClickerObserver``ItemDataAsyncTask().execute(itemDataResponse);`

我们可以在 UI TextView 或 Button Text 中更新价格，可以通过这种方式完成，只需在`ItemDataAsyncTask()`.

```
@Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            baseActivity.updateButtonWithPrice(itemPrice);// here i am setting the price of the Button Text
        } 
```

注意：updateButtonWithPrice(itemPrice) 是一种以字符串为参数的方法，我在我的活动中编写了该方法。

希望这将在未来对其他人有所帮助。:)

# c# - 尝试使用 Nancy SuperSimpleViewEngine 渲染局部时获取 [ERR!] 作为输出

> ID：14626630
> 
> 赞同：4
> 
> 时间：2013-01-31T13:13:06.743
> 
> 标签：c#, nancy

我正在使用的示例实际上是他们示例页面中的示例：[https ://github.com/NancyFx/Nancy/wiki/The-Super-Simple-View-Engine](https://github.com/NancyFx/Nancy/wiki/The-Super-Simple-View-Engine)

所以我在根目录中设置了我的文件`index.sshtml`和`master.sshtml`（从示例中逐字复制/粘贴），并提供结果：

```
Get["/"] = result => View["index.sshtml"]; 
```

然后，当我在浏览器中访问 localhost 时，我会收到一条简单的文字“[ERR！]”，而不是我预期的“这是索引页面上的内容”。

我究竟做错了什么？我必须明确做些什么来启用 SSVE 的 Master/Section 功能吗？

**编辑：** 意见：

大师.sshtml

```
<html>
<body>
@Section['Content'];
</body>
</html> 
```

索引.shtml

```
@Master['master.sshtml']

@Section['Content']
   This is content on the index page
@EndSection 
```

文件结构：

```
+ Debug
|---ConsoleApplication1.exe
|---index.sshtml
|---master.sshtml
|---(rest of files Visual Studio outputs) 
```

我很确定这是可能工作的最简单的例子，但由于某种原因，它没有。没有抛出（未捕获的）异常，调试窗口中没有输出，也没有其他迹象表明出现问题，除了 [ERR!] 正在打印。它是唯一被打印的内容，所以我假设它是“主”块中失败的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-04T20:08:07.333

如果其他人看到这一点，请确保所有 .sshtml 文件都标记为**“复制到输出目录”：**文件属性下的“始终复制”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-21T19:33:40.753

就我而言，我必须：

1.  在另一个文本编辑器中打开`sshtml`文件，将编码更改为 ``UTF-8 no BOM``` 然后
2.  删除第一个位置“@Master['MasterPage']”的空格（可能是 UTF8-BOM？）
3.  保存文件。
4.  转到 Visual Studio，一个对话框将通知您“外部更改”，单击`Reload all`，一切都应该很好。

# ios - 照片浏览器的方向问题

> ID：14626633
> 
> 赞同：1
> 
> 时间：2013-01-31T13:13:13.443
> 
> 标签：ios, uitabbarcontroller, uiinterfaceorientation

我正在使用[KTPhotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)。谁能告诉我为什么当我在我的项目中使用此代码的 TabBarSample 时，我无法使照片适用于风景？照片始终以纵向模式显示，因为我的项目仅以纵向模式运行。我该如何解决这个问题？我添加了以下内容

```
-(BOOL)shouldAutorotate { 
    return YES; 
} 
```

但`SDWebImageRootViewController.m`仍然没有运气。

请任何人都可以下载[这个](https://github.com/kirbyt/KTPhotoBrowser)，看看为什么 TabBarSample(project) 不适用于景观？

![在此处输入图像描述](../Images/649adb9ef0a0a8e274af0c7bd6d253ca.png) ![在此处输入图像描述](../Images/be53d811e612b9b8f8444d8d52d07507.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:08:04.653

我强烈推荐瑞安的回答给其他读过这篇文章的人。

但在这种特殊情况下，发生的事情是 UITabBarController 没有被设置为应用程序窗口中的根视图控制器。我只能猜测这在 iOS 6 之前的工作方式有所不同（Github 项目已有 3 年历史）。因此，您在日志中收到此消息：

```
Application windows are expected to have a root view controller at the end of application launch 
```

要解决此问题，请在您的应用委托中更改此行：

```
[window addSubview:tabBarController.view]; 
```

对此：

```
[self.window setRootViewController:tabBarController]; 
```

然后正如 Anill 所说，我们需要确保选项卡栏中的所有视图控制器都同意旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:34:04.453

iOS6 旋转需要两行。你说是的，我希望你自动旋转，这是支持的方向。将这些添加到您的所有视图控制器中。

```
// iOS5 Rotation
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// iOS6 Rotation
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

您可能还需要进入您的项目设置并确保您的 plist 也支持横向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:36:34.887

已解决 添加以下代码

```
SDWebImageRootViewController.m  
LocalImageRootViewController.m  
FlickrRootViewController.m

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
return YES;
} 
```

# objective-c - 使用委托协议初始化

> ID：14626634
> 
> 赞同：10
> 
> 时间：2013-01-31T13:13:19.480
> 
> 标签：objective-c, delegates, initialization, protocols

每当我创建一个具有符合协议的委托的 init 时，我将 init 编写为：

```
- (id)initWithDelegate:(id<ProtocolToConform>)delegate; 
```

这样，如果创建对象不符合协议，我将收到警告。

但是我注意到 ie `UIAlertView`init 方法看起来像这样：

```
- (id)initWithTitle:(NSString *)title message:(NSString *)message delegate:(id)delegate cancelButtonTitle:(NSString *)cancelButtonTitle otherButtonTitles:(NSString *)otherButtonTitles, ... 
```

委托参数没有指定符合`UIAlertViewDelegate`协议？任何线索为什么Apple会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:22:00.330

好问题！我做同样的事情是希望在编译时发现更多错误。

苹果似乎符合自己的标准；如[Objective-C 中的概念中](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)所述：

> 要为您的自定义类实现委托，请完成以下步骤：
> 
> 在类头文件中声明委托访问器方法。

```
- (id)delegate;
- (void)setDelegate:(id)newDelegate; 
```

> 实现访问器方法。在内存管理的程序中，为避免保留循环，setter 方法不应保留或复制您的委托。

```
- (id)delegate {
    return delegate;
}

- (void)setDelegate:(id)newDelegate {
    delegate = newDelegate;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:42:52.930

我的理解是几年前 API 是一团糟，他们仍在修复所有这些问题。

请注意，直到最近，许多协议都是非正式的，并且几乎在 API 中的任何地方，您都只能在`id`. Apple 在每个版本中逐步修复它，例如`NSURLConnection`iOS 6.0 附带的正式代表。或者请注意，在 iOS 6.1 中，一些`id`返回类型已更改为`instancetype`.

嗯，这是我最初的想法，在检查了头文件之后：

```
@property(nonatomic,assign) id /*<UIAlertViewDelegate>*/ delegate
```

很明显有人想将协议添加到声明中，但只添加了注释。我猜他们在没有协议的情况下留下了兼容性。

# node.js - 如何立即关闭 Node.js http(s) 服务器？

> ID：14626636
> 
> 赞同：63
> 
> 时间：2013-01-31T13:13:21.650
> 
> 标签：node.js, http, connection, keep-alive

我有一个包含 http(s) 服务器的 Node.js 应用程序。

在特定情况下，我需要以编程方式关闭此服务器。我目前正在做的是调用它的`close()`函数，但这无济于事，因为它等待任何保持活动的连接首先完成。

所以，基本上，这会关闭服务器，但只有在至少 120 秒的等待时间之后。但我希望服务器立即关闭——即使这意味着中断当前处理的请求。

我不能做的是一个简单的

```
process.exit(); 
```

因为服务器只是应用程序的一部分，应用程序的其余部分应保持运行。我正在寻找的是概念上的东西，例如`server.destroy();`或类似的东西。

我怎么能做到这一点？

PS：连接的保持活动超时通常是必需的，因此减少此时间不是一个可行的选择。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-31T22:52:20.320

诀窍是您需要订阅服务器`connection`事件，该事件为您提供新连接的套接字。您需要记住这个套接字，然后在调用 之后直接`server.close()`使用 销毁该套接字`socket.destroy()`。

此外，如果它自然离开，您需要侦听套接字的`close`事件以将其从数组中删除，因为它的保持活动超时确实用完了。

我编写了一个小示例应用程序，您可以使用它来演示此行为：

```
// Create a new server on port 4000
var http = require('http');
var server = http.createServer(function (req, res) {
  res.end('Hello world!');
}).listen(4000);

// Maintain a hash of all connected sockets
var sockets = {}, nextSocketId = 0;
server.on('connection', function (socket) {
  // Add a newly connected socket
  var socketId = nextSocketId++;
  sockets[socketId] = socket;
  console.log('socket', socketId, 'opened');

  // Remove the socket when it closes
  socket.on('close', function () {
    console.log('socket', socketId, 'closed');
    delete sockets[socketId];
  });

  // Extend socket lifetime for demo purposes
  socket.setTimeout(4000);
});

// Count down from 10 seconds
(function countDown (counter) {
  console.log(counter);
  if (counter > 0)
    return setTimeout(countDown, 1000, counter - 1);

  // Close the server
  server.close(function () { console.log('Server closed!'); });
  // Destroy all open sockets
  for (var socketId in sockets) {
    console.log('socket', socketId, 'destroyed');
    sockets[socketId].destroy();
  }
})(10); 
```

基本上，它所做的就是启动一个新的 HTTP 服务器，从 10 数到 0，然后在 10 秒后关闭服务器。如果没有建立连接，服务器会立即关闭。

如果一个连接已经建立并且它仍然是打开的，它就会被销毁。如果它已经自然死亡，那么在那个时间点只会打印一条消息。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-04-24T23:27:24.487

我找到了一种方法来做到这一点，而不必跟踪连接或强制它们关闭。我不确定它在 Node 版本之间有多可靠，或者是否对此有任何负面影响，但它似乎对我正在做的事情非常有效。诀窍是`setImmediate`在调用`close`方法后立即发出“关闭”事件。这像这样工作：

```
server.close(callback);
setImmediate(function(){server.emit('close')}); 
```

至少对我来说，这最终释放了端口，以便我可以在调用回调时启动一个新的 HTTP(S) 服务（这几乎是立即的）。现有连接保持打开状态。在更新 Let's Encrypt 证书后，我使用它来自动重启 HTTPS 服务。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-19T19:05:24.493

如果您需要在关闭服务器后保持进程处于活动状态，那么 Golo Roden 的解决方案可能是最好的。

但是，如果您在正常关闭进程的过程中关闭服务器，您只需要这样做：

```
var server = require('http').createServer(myFancyServerLogic);

server.on('connection', function (socket) {socket.unref();});
server.listen(80);

function myFancyServerLogic(req, res) {
    req.connection.ref();

    res.end('Hello World!', function () {
        req.connection.unref();
    });
} 
```

基本上，您的服务器使用的套接字只会在它们实际服务请求时使进程保持活动状态。虽然他们只是闲坐在那里（因为 Keep-Alive 连接），`server.close()`但只要没有其他东西使进程保持活动状态，调用就会关闭进程。如果您在服务器关闭后需要做其他事情，作为您优雅关闭的一部分，您可以挂接`process.on('beforeExit', callback)`以完成您的优雅关闭过程。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-13T18:37:12.043

[https://github.com/isaacs/server-destroy](https://github.com/isaacs/server-destroy)库为具有问题中所需行为的服务器提供了一种简单的方法（`destroy()`通过跟踪打开的连接并在服务器销毁时销毁每个连接，如其他答案中所述）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-21T16:26:44.710

正如其他人所说，解决方案是跟踪所有打开的套接字并手动关闭它们。我的 node package [killable](https://www.npmjs.com/package/killable)可以为你做到这一点。一个示例（使用 express，但您可以在任何`http.server`实例上调用 use killable）：

```
var killable = require('killable');

var app = require('express')();
var server;

app.route('/', function (req, res, next) {
  res.send('Server is going down NOW!');

  server.kill(function () {
    //the server is down when this is called. That won't take long.
  });
});

var server = app.listen(8080);
killable(server); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-29T11:34:17.800

另一个执行关闭终止连接的 nodejs 包：[http-shutdown](https://github.com/thedillonb/http-shutdown)，在撰写本文时（2016 年 9 月）似乎得到合理维护，并在 NodeJS 6.x 上为我工作

从文档

**用法**

目前有两种方法可以使用这个库。第一个是对 Server 对象的显式包装：

```
// Create the http server
var server = require('http').createServer(function(req, res) {
  res.end('Good job!');
});

// Wrap the server object with additional functionality.
// This should be done immediately after server construction, or before you start listening.
// Additional functionailiy needs to be added for http server events to properly shutdown.
server = require('http-shutdown')(server);

// Listen on a port and start taking requests.
server.listen(3000);

// Sometime later... shutdown the server.
server.shutdown(function() {
  console.log('Everything is cleanly shutdown.');
}); 
```

第二个是向 Server 对象隐式添加原型功能：

```
// .extend adds a .withShutdown prototype method to the Server object
require('http-shutdown').extend();

var server = require('http').createServer(function(req, res) {
  res.end('God job!');
}).withShutdown(); // <-- Easy to chain. Returns the Server object

// Sometime later, shutdown the server.
server.shutdown(function() {
  console.log('Everything is cleanly shutdown.');
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-31T14:01:17.990

我最好的猜测是手动终止连接（即强行关闭它的套接字）。

理想情况下，这应该通过挖掘服务器的内部结构并手动关闭它的套接字来完成。或者，可以运行一个执行相同操作的 shell 命令（前提是服务器具有适当的权限 &c。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-20T02:45:01.197

[我在不同的node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")支持渠道上多次回答了“如何终止 HTTP 服务器”的变体。不幸的是，我不能推荐任何现有的库，因为它们以一种或另一种方式[缺乏](https://github.com/gajus/http-terminator#alternative-libraries)。从那以后，我已经组合了一个包，（我相信）它可以处理所有预期的优雅 HTTP 服务器终止的情况。

[https://github.com/gajus/http-terminator](https://github.com/gajus/http-terminator)

[http-terminator](https://github.com/gajus/http-terminator)的主要好处是：

*   它没有猴子补丁 Node.js API
*   它会立即销毁所有没有附加 HTTP 请求的套接字
*   它允许对正在进行的 HTTP 请求的套接字进行优雅的超时
*   它正确处理 HTTPS 连接
*   它通过设置连接来通知连接使用保持活动服务器正在关闭：关闭标头
*   它不会终止 Node.js 进程

用法：

```
import http from 'http';
import {
  createHttpTerminator,
} from 'http-terminator';

const server = http.createServer();

const httpTerminator = createHttpTerminator({
  server,
});

await httpTerminator.terminate(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-26T07:56:19.740

```
const Koa = require('koa')
const app = new Koa()

let keepAlive = true
app.use(async (ctx) => {
  let url = ctx.request.url

  // destroy socket
  if (keepAlive === false) {
    ctx.response.set('Connection', 'close')
  }
  switch (url) {
    case '/restart':
      ctx.body = 'success'
      process.send('restart')
      break;
    default:
      ctx.body = 'world-----' + Date.now()
  }
})
const server = app.listen(9011)

process.on('message', (data, sendHandle) => {
  if (data == 'stop') {
    keepAlive = false
    server.close();
  }
})
```

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2016-05-17T19:38:15.280

进程.退出（代码）；// 代码 0 表示成功，1 表示失败

# powershell - 仅运行一项作业时 Get-Job 的意外行为

> ID：14626637
> 
> 赞同：2
> 
> 时间：2013-01-31T13:13:21.523
> 
> 标签：powershell, powershell-2.0

我是 Powershell 的新手，我遇到了 Get-Job 命令的问题。在我的脚本中，我正在测试多线程并正在做类似的事情：

```
$Program = {
    "Thread " + $args[0];
    Start-Sleep 5;
}
Start-Job $Program -ArgumentList @($i) | Out-Null 
```

Start-Job 调用实际上是在我创建多个作业的循环中。在此之下，我有：

```
Get-Job
"Jobs Running: " + $(Get-Job -State Running).count 
```

如果有多个作业正在运行，我将得到如下输出：

```
Id              Name            State      HasMoreData     Location             Command
--              ----            -----      -----------     --------             -------
2201            Job2201         Running    True            localhost            ...
2199            Job2199         Running    True            localhost            ...
2197            Job2197         Running    True            localhost            ...
2195            Job2195         Running    True            localhost            ...
2193            Job2193         Completed  True            localhost            ...
2191            Job2191         Completed  True            localhost            ...
2189            Job2189         Completed  True            localhost            ...
2187            Job2187         Completed  True            localhost            ...
Jobs Running: 4 
```

但是，如果只有一项工作正在运行，似乎`$(Get-Job -State Running).count`没有返回任何内容：

```
Id              Name            State      HasMoreData     Location             Command
--              ----            -----      -----------     --------             -------
2207            Job2207         Running    True            localhost            ...
Jobs Running: 
```

如您所见，有一个作业正在运行，但`$(Get-Job -State Running).count`没有返回任何内容。知道这里发生了什么吗？对我来说，如果有多个作业，则`$(Get-Job -State Running)`返回具有 .count 属性的作业集合，而如果只有一个作业，则仅返回该作业，并且没有 .count 属性。如果是这种情况（或者如果我做错了什么），我应该使用什么命令来获得我的预期结果`$(Get-Job -State Running).count == 1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:19:23.563

尝试使用测量对象

```
$(Get-Job -State Running | Measure-Object).count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:25:49.667

在 PS 2.0`count`中仅适用于数组。当`Get-Job`只返回一个作业时，它将它作为一个对象返回，而不是一个数组。为了使其工作，您可以例如强制`Get-Job`始终通过使用返回一个数组`@(code)`。试试这个：

```
$Program = {
    "Thread " + $args[0];
    Start-Sleep 5;
}
Start-Job $Program -ArgumentList @($i) | Out-Null

Get-Job
"Jobs Running: " + $(@(Get-Job -State Running).count) 
```

# android - 从自定义 ListView 类中刷新 ListView

> ID：14626638
> 
> 赞同：2
> 
> 时间：2013-01-31T13:13:22.583
> 
> 标签：android, listview, android-listview, android-arrayadapter, android-loadermanager

我使用 a用数据`LoaderManager`填充我的适配器`ListView`。我实现了`LoaderManager.Callbacks`但我无法刷新`ListView`以显示新数据。调用`adapter.notifyDatasetChanged()`，`invalidate()`或者`postInvalidate()`什么都不做。

一些代码：

```
@Override
public void onLoadFinished(Loader<ArrayList<Items>> arrayListLoader, ArrayList<Items> entries) {
    Log.i("TAG", "+++ onLoadFinished() called! +++");
    switch (arrayListLoader.getId()) {
        case LOADER_ID:
            mAdapter.setData(entries);
            mAdapter.notifyDataSetChanged();
            invalidate();
            break;
    }
} 
```

在类的`adapter`默认构造函数中初始化`ListView`。

Adapter 和 ListView 初始化（精简到相关部分）：

```
public CustomListView(Activity activity) {
    [...]
    mAdapter = new CustomEntryAdapter(mActivity, R.layout.row_monthlistview);
    setAdapter(mAdapter);
    mCallbacks = this;
    LoaderManager loaderManager = mActivity.getSupportLoaderManager();
    loaderManager.initLoader(LOADER_ID, null, mCallbacks);
    [...]
} 
```

`setData`我的自定义方法`Adapter`：

```
public void setData(ArrayList<Items> data) {
    clear();
    if (data != null) {
        for (Items aData : data) {
            add(aData);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:25:31.077

在我的具体情况下似乎是不可能的。这`LoaderManager`是问题的根源，我无法将 n 绑定`LoaderManager`到 n `views`。

lim n -> ∞</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:23:20.510

尝试这个 ：

```
yourGlobalList.clear();
yourGlobalList.addAll(entries)
mAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-31T13:18:47.277

我认为您需要在调用 notifyDataSetChanged() 后调用 listView.setAdapter() 方法

# performance - Hibernate，使用参数查询 SQL。表现不佳

> ID：14626646
> 
> 赞同：2
> 
> 时间：2013-01-31T13:13:55.977
> 
> 标签：performance, oracle, hibernate, jpa, glassfish

我有一个与使用 JPA 的 SQL 查询的性能有关的问题。

响应时间：

*   使用 Toad - **200 毫秒**
*   在我的项目中使用**Glassfish 2.1、Java 1.5、Hibernate 3.4.0.ga** - **27 s**

**甲骨文 10g**

Glassfish 和 Toad 托管在同一台机器上。我已经从同一个 Glassfish、JPA 等连接到其他 ddbb，并且性能很好。所以我不知道发生了什么。

我有两种不同的环境。在其中之一（理论上最坏的情况下）它运行得很快。另一方面，这是我遇到问题的地方。

**使用Javax.persistence.Query**对象执行查询，并在该对象中使用 setParameter() 方法插入参数。之后，我调用 getResultList() 方法，该方法将寄存器返回给我。在这一点上是时间过多的地方。

**但是，如果我替换代码中的参数并直接调用 getResultList() 方法，而不在 Query 对象中设置参数，性能会好很多。**

任何人都可以帮助我提供有关问题的任何线索或如何追踪它？

**询问**

```
SELECT A, B, ..., DATE_FIELD FROM
     (SELECT A, B, C FROM Table1 
        WHERE REGEXP_LIKE(A, NVL(UPPER(:A),'')) AND DATE_FIELD = :DATE
        UNION
      SELECT A, B, C FROM Table2 
        WHERE REGEXP_LIKE(A, NVL(UPPER(:A),'')) AND DATE_FIELD = :DATE) 
```

**Java 代码**

```
public Query generateQuerySQL(String stringQuery, HashMap<String, Object> hParams) {
    Query query = em.createNativeQuery(stringQuery);
    if (hParams != null) {
        for (Iterator<String> paramNameList = hParams.keySet().iterator();  paramNameList.hasNext() {
            String name = paramNameList.next();
            Object value = hParams.get(name);
            query.setParameter(name, value);
           }
       }
    return query;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:25:52.467

`Query query = em.createNativeQuery(stringQuery);`

将详细说明执行查询的查询计划。不幸的是，用于详细说明查询计划的元数据与执行查询时将使用的实际参数值不匹配。

如果您在详细说明计划之前替换参数：计划很好并且运行得非常快。

类似的问题[在这里](https://stackoverflow.com/questions/14294735/slow-performance-on-hibernate-java-but-fast-when-i-use-toad-with-the-same-nati/14295140#14295140)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-20T13:38:54.210

您应该在 oracle 中更改**cursor_sharing = FORCE**以在 JPA 中为 oracle 启用休眠支持。

[详情请参阅以下内容](https://docs.oracle.com/database/121/TGSQL/tgsql_influence.htm#TGSQL251)

# mongodb - How can two Amazon EC2 instances share the same data?

> ID：14626653
> 
> 赞同：1
> 
> 时间：2013-01-31T13:14:24.003
> 
> 标签：mongodb, networking, amazon-ec2

I am working on a solution deployed on an Amazon EC2 server instance that has its region set to US WEST. The solution uses mongodb for data storage and contains a web service that is used by a mobile application. The user base of the mobile application is split 40:60 between US and Asia, as such I need to set up another EC2 instance in the Asia Pacific region to lower their latency and connection time.

Since the data storage is located on an instance in US WEST, how would I set up a new instance in asia pacific that can share the same data with the US WEST instance? I am open to moving the mongodb databse elsewhere but I do not want to change to a different NoSQL soltion.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:34:31.953

There are various different solutions here. I will try to provide a few.

**Replica Sets**

Perhaps the easiest solution would be to use a Replica Set, where you have **two** servers in US-EAST and one in ASIA. Replica Sets in MongoDB require a minimum of three nodes to work and as you have a higher amount of users near US-EAST it makes sense to put it there.

Now, with just the three nodes you only solve having the data available closer to ASIA with one of the nodes. You then need to use Read Preferences, to instruct your application to either read from one of the US-EAST or ASIA nodes. I have written an article about how PHP deals with those Read Preferences at [http://derickrethans.nl/readpreferences.html](http://derickrethans.nl/readpreferences.html) — other language drivers will have a similar solution.

All drivers will maintain connections to each of the Replica Set nodes, so connection overhead should not be too much of a problem. But at least you can do reads from a node closest by to solve latency. Writes still always have to go to a primary (which will likely be in US-EAST).

*   *Pros*: Fairly easy to set-up, only three nodes required
*   *Cons*: Only good for directing reads, but not writes

**Sharding**

Sharding is a method in MongoDB that allows you to separate your whole data set into smaller piece so that is possible to fit a huge dataset into MongoDB, without having the constraints of the resources of one server. Typically, a sharded set-up consists of at least two shard, each containing a (3 node) replica set, but it also possible to have a replicaset consist of only one node which means you'd end up having two shards, each containing one data node.

Sharding in MongoDB supports "Tag Aware Sharding" ([http://mongodb.onconfluence.com/display/DOCS/Tag+Aware+Sharding](http://mongodb.onconfluence.com/display/DOCS/Tag+Aware+Sharding)) which makes it possible to redirect specific documents to specific shards depending on a field in your document. If your documents f.e. have a range of user ideas, or country codes, you can use that to redirect documents to the correct shard.

Setting this up is however not very easy as it requires quite a good understanding of sharding with MongoDB. There is a really nice introduction at [http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)

*   *Pros*: Allows you to have data localized to one specific location for both read and write
*   *Cons*: Not easy to setup, you need two data nodes, config servers and proxy servers.

Hopes this helps!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:46:58.637

If your application is read heavy I would use mongodb's [Replica sets:](http://docs.mongodb.org/manual/replication/)

# asp.net-mvc - 当我添加自定义错误页面时，我是否也返回错误状态代码？

> ID：14626655
> 
> 赞同：0
> 
> 时间：2013-01-31T13:14:29.527
> 
> 标签：asp.net-mvc, error-handling

我在 de 中创建了一个通用异常处理程序`global_asax`。

在那里我记录异常，并重定向到`/error`

在该控制器中，我显示带有友好消息的视图，并且我还设置了`Response.StatusCode = 500`;

现在我想知道这是否可以....

在我的本地主机`cassini`中，这工作正常，但是当部署时`IIS`我得到标准`IIS 500 page`而不是我的自定义友好视图。

这是设计使然吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:43:28.753

尝试在错误处理程序中设置[TrySkipIisCustomErrors属性：](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.tryskipiiscustomerrors.aspx)

```
Response.TrySkipIisCustomErrors = true; 
```

它将防止 IIS 错误页面妨碍您。另外，请确保您在 Web.config中正确配置了[customErrors](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)

# c - C char 在编译时显示为 int

> ID：14626657
> 
> 赞同：0
> 
> 时间：2013-01-31T13:14:34.253
> 
> 标签：c, char, int, printf, compiler-warnings

我正在学习 C，并且一直在尝试制作一个接受用户输入的程序，并删除其中的任何双空格，然后再次打印出来。我们还没有完成数组，所以我需要一个字符一个字符地做这个。这是我的代码：

```
#include <stdio.h>

main()
{
    char c;
    int count;
    count = 0;

    while ((c = getchar()) != '\n')
        if (c == ' ')
            count++;
        if (c != ' ')
            count = 0;
        if (count <= 0)
            printf("%s", c);
} 
```

但是，此代码不起作用。编译器返回错误

```
:15: warning: format ‘%s’ expects type ‘char *’, but argument 2 has type ‘int’ 
```

有什么帮助吗？我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T13:15:40.453

使用`%c`格式说明符打印单个`char`

```
printf("%c", c); 
```

`%s`格式说明符告诉我们`printf`期待一个以 null 结尾的 char 数组（又名字符串）。

错误消息是指由于参数的默认提升（超出格式字符串）而导致`c`类型传递给. [这个先前的答案](https://stackoverflow.com/a/3959702/311966)对默认促销有很好的描述；[这个先前的线程](https://stackoverflow.com/q/1255775/311966)解释了为什么需要默认提升的一些原因。`int``printf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T14:38:36.513

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:18:59.387

您正在使用`%s`which 用于字符串，并且需要终止 NULL 字符（\0）..

使用`%c`将逐字符打印您。

# jquery - jQuery 中的 AJAX 表单提交

> ID：14626658
> 
> 赞同：0
> 
> 时间：2013-01-31T13:14:44.877
> 
> 标签：jquery, ajax, form-submit

当我尝试发送一些数据时遇到问题`$.post(jquery ajax function)`- 它不起作用。我的代码在这里：

```
$.post(
    $(this).attr("action"),
    {     
        task: "add",
        $(this).serialize()
    },
    function(data) {
        if (data.length > 0 ) {
            alert("Success");
        }
    }
); 
```

我猜问题出在发送的数据上，实际上我有一个完整的 AJAX 页面，其中包含许多要执行的 switch case 语句，因此我需要在`task`每次发送和 AJAX 请求时指定变量。

如果有关于如何解决此问题的更好解决方案，请随时分享您的想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:23:32.793

问题出在这部分：

```
{     
    task: "add",
    $(this).serialize()
} 
```

这将引发语法错误，因为它不是有效的对象文字。调用`$(this).serialize()`返回一个字符串，这是请求的查询字符串。你可以做的是：

```
$.post($(this).attr('action'), $(this).serialize() + '&task=add', function(data) {...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:20:44.563

我想应该像下面这样。

```
$.post(
    $(this).attr("action"),
    {task:"add",'data': $(this).serialize()},
    function(data){
        if(data.length > 0 ){
            alert("Success");
        }
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:25:39.453

问题可能是该部分

```
{task:"add",$(this).serialize()} 
```

无效，因为逗号后需要一个标签。

```
{task: "add", data: $(this).serialize()} 
```

至少会产生一个有效的对象，但不是一个有意义的发布到服务器。

我认为最简单的解决方案是

```
$.post($(this).attr("action"),
$(this).serialize() + '&task=add',
function(data){
 if(data.length > 0 ){
   alert("Success");
}
}); 
```

# android - Android XML解析结果无法在ListView中显示

> ID：14626665
> 
> 赞同：-2
> 
> 时间：2013-01-31T13:15:01.937
> 
> 标签：android, xml-parsing, android-listview

我是 Android 软件开发的新手，也是这个网站的新手。我希望有人能帮帮忙。

我的 Android 应用程序无法将 XML 解析的数据显示到**ListView 中**。它只显示 Toast 消息。

帮助我，您的帮助将不胜感激。

我的代码是：.java

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ll = (LinearLayout) findViewById(R.id.layout);

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo ni = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        if(ni.isAvailable())
        {
            if(!(ni.isConnected()))
            {
                Toast.makeText(getApplicationContext(), "No WIFI Connected...", Toast.LENGTH_LONG).show();
            }
        }
        else
        {
            /*ni = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

            if(ni.isAvailable())
            {
                if(ni.isConnected())
                {

                }
            }*/

            b = (Button) findViewById(R.id.button1);

            //intent = new Intent(getApplicationContext(), display.class);

            b.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    ed1 = (EditText) findViewById(R.id.what);
                    ed2 = (EditText) findViewById(R.id.where);

                    String what = ed1.getText().toString();
                    String where = ed2.getText().toString();

                    if(what.equals("") || where.equals(""))
                    {
                        Toast.makeText(getApplicationContext(), "Please, Enter Some Missing Value.", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(),"Wait... Searching.....", Toast.LENGTH_LONG).show();

                        try {

                            URL text = new URL("My_URL");

                            XmlPullParserFactory xppf=XmlPullParserFactory.newInstance();

                            XmlPullParser xpp=xppf.newPullParser();

                            xpp.setInput(text.openStream(),null);

                            int pe =xpp.getEventType();
                            boolean status=false;

                            while(pe!=XmlPullParser.END_DOCUMENT)
                            {
                                switch(pe)
                                {
                                case XmlPullParser.START_TAG:

                                    String tag=xpp.getName();
                                    if(tag.equals("status"))
                                    {
                                        status=true;
                                    }
                                    if(tag.equals("name"))
                                    {
                                        nameTag=true;
                                    }
                                    if(tag.equals("formatted_address"))
                                    {
                                        addTag=true;
                                    }
                                    break;

                                case XmlPullParser.TEXT:
                                    String value;
                                    if(status==true)
                                    {
                                        value=xpp.getText();
                                        if(value.equals("ZERO_RESULTS"))
                                        {
                                            Toast.makeText(getApplicationContext(), "No Results Found for "+ed1.getText().toString(), Toast.LENGTH_LONG).show();
                                        }
                                    }
                                    if(nameTag==true)
                                    {
                                        value=xpp.getText();
                                        newName.add(value);
                                    }
                                    if(addTag==true)
                                    {
                                        value=xpp.getText();
                                        newAdd.add(value);
                                    }

                                    break;
                                case XmlPullParser.END_TAG:
                                    String txt=xpp.getName();

                                    if(txt.equals("name"))
                                    {
                                        nameTag=false;
                                    }
                                    if(txt.equals("formatted_address"))
                                    {
                                        addTag=false;
                                    }
                                    break;

                                }//end switch

                                pe=xpp.next();
                            }//end while

                            //ArrayList to String[] for name
                            String name[] = new String[newName.size()];

                            name = newName.toArray(name);

                            //ArrayList to String[] for Address
                            String add[] = new String[newAdd.size()];

                            add = newAdd.toArray(add);

                            Intent i = new Intent(getApplicationContext(), List.class);
                            i.putExtra("nameTag", name);
                            i.putExtra("addTag", add);

                            startActivity(i);

                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();

                        }
                    }//else
                }//onClick
            });//listener
        }//else
    }
} 
```

XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent" android:id="@+id/linear">

   <ListView 
    android:layout_height="wrap_content" 
    android:id="@+id/listview1" 
    android:layout_width="fill_parent"/> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:20:36.653

当我学习解析 xml 并在 ListView 中显示它时，本教程对我帮助很大，看看： [http ://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:16:09.673

这里有一个例子，它是一个 RSS feedert，它接受一个 XML，解析它并在 ListView 中显示它，一切都使用 AsyncTask。 [https://github.com/Jachu5/RssFeeder_sherlock/blob/master/src/com/example/serverUtil/RSS_server_util.java](https://github.com/Jachu5/RssFeeder_sherlock/blob/master/src/com/example/serverUtil/RSS_server_util.java)

希望能帮助到你！

# c# - 仅在客户端确认后执行服务器端代码

> ID：14626666
> 
> 赞同：0
> 
> 时间：2013-01-31T13:15:02.290
> 
> 标签：c#, asp.net

在计算复杂的公式服务器端后，我必须显示客户端确认。就像是

```
//Server side
        On ButtonClick(){
            FetchRate(field1,field2,.... fieldn);
            // Show Client side confirmation
            // Execute server side code if confirmed client side 
    } 
```

我所做的是创建了一个客户端功能，但无论我选择什么客户端，我的服务器端代码总是在回发时执行

```
// Server side    
ScriptManager.RegisterStartupScript(this,this.GetType(), Guid.NewGuid().ToString(), "ConfirmAction('"+ myRate +"');", true);
//Client side
    function ConfirmAction(myRate) {
            if (confirm('Are you sure?. Rate is exceeding '+ myRate +', proceed ?')) {
                document.getElementById('hfSaveUpdate').value = 1;
                return true;
            }
            else
                return false;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:22:40.247

您不能在服务器端代码之间放置客户端操作。

您的代码准备客户端确认，但在响应完成之前不会将其发送到浏览器。然后服务器立即继续处理您的数据。完成后，响应将发送到浏览器，用户会看到确认对话框。太晚了：数据已经被处理过了。并且对话的结果永远不会被发送到服务器。

您需要将该过程分成两部分：首先获得有关该费率的确认（可能使用 ajax），然后提交要处理/存储的表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:27:35.837

您可以使用[Ajax 模型弹出](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)窗口并处理其确定和取消按钮。

```
<ajaxToolkit:ModalPopupExtender ID="ModelPopupID" runat="server"  
    TargetControlID="LinkButton1"  
    PopupControlID="Panel1"  
    BackgroundCssClass="modalBackground"   
    DropShadow="true"   
    OkControlID="OkButton"   
    OnOkScript="onOk()"  
    CancelControlID="CancelButton"   
    PopupDragHandleControlID="Panel3" /> 
```

从服务器代码启动模态弹出窗口：

服务器端代码：

```
ClientScript.RegisterStartupScript(this.GetType(), "key", "launchModal();", true); 
```

客户端代码：

```
<script type="text/javascript">
 var launch = false;
 function launchModal() 
 {
 launch = true;
 }
function pageLoad() 
 {
 if (launch) 
 {
 $find("ModelPopupID").show();
 }
 }
</script> 
```

在模型弹出窗口的确定单击上，在构造代码之后执行服务器端。单击取消按钮时，只需隐藏模型弹出窗口。

有关更多详细信息，请检查以下内容：

[ModalPopup 教程](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/modalpopup/launching-a-modal-popup-window-from-server-code-cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:17:21.630

你可以`onclientclick attribute`在你的按钮上设置

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick(v=vs.80).aspx)

# java - 双括号初始化 - 优势

> ID：14626669
> 
> 赞同：8
> 
> 时间：2013-01-31T13:15:22.807
> 
> 标签：java, collections, initialization

知道我们可以通过使用双括号初始化在 java 中初始化一个集合。并对此进行了一些搜索，发现由于其性能问题，不建议使用它。

```
private static final Set<String> VALID_CODES = new HashSet<String>() {{
    add("XZ13s");
    add("AB21/X");
    add("YYLEX");
    add("AR2D");
 }}; 
```

只是想知道，双括号初始化有什么积极的一面或优势吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:16:53.710

> 不建议使用它，因为它的性能问题。

我没有看到任何性能问题。每当您看到有人说我出于性能原因做了/没有做某事时，您应该期望看到详细的分析比较替代方案，解释一个如何满足特定要求的性能而另一个没有。如果您没有看到所有这些，您可能会认为作者只是在猜测。

编辑：虽然我承认每个类都需要少量时间来加载，但运行性能完全相同。我在这里演示了 [https://stackoverflow.com/a/14627268/57695](https://stackoverflow.com/a/14627268/57695)

如果您认为它更简单、更清晰，我会使用双括号表示法。

一个缺点是您正在更改集合的类型，这可能会混淆意想不到的功能。例如等于。

注意：正如 Lukas Eder 所指出的，如果在非静态上下文中执行此操作，请务必小心。匿名子类集合将隐式引用外部实例，如果它的寿命比集合长，这将是内存泄漏。 [你有没有想过内存泄漏的可能性？](http://blog.jooq.org/2014/12/08/dont-be-clever-the-double-curly-braces-anti-pattern/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:19:14.237

没有特别的性能问题（除了通过类加载器加载类的成本 - 可以忽略不计）

上面*确实*创建了一个匿名类，因此它包含`this`对周围实例的隐式引用。这可能会给序列化框架造成一些混乱。例如，你序列化你创建的匿名类，你突然发现你也在尝试序列化包含的实例。

我要强调的是，匿名类可以在不同的框架和语言中大量使用（Scala - 我在看着你）。我从来没有听说过有人建议 Scala 由于类加载而存在性能问题。初始启动可能会*稍微*慢一些，但请记住 JVM 启动、JIT 预热、*任何*网络访问等。

您可能会争辩说，由于类更多，您的应用程序占用空间更大。我怀疑（再次）影响可以忽略不计（除非你用匿名类构建整个应用程序！）

# php - 如果 mysql 表中不存在结果，则回显其他内容？

> ID：14626670
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:15:25.843
> 
> 标签：php, mysql

有人可以帮助我吗，我正在尝试根据我在“权限”表中为每个用户拥有的记录来显示不同的图像。我在用 。

如果表中不存在记录，我想包含不同的文件路径，即

目前，如果用户权限设置为 1 或 0，它会显示结果，但我想这样做，以便如果在表中找不到任何结果，它会默认显示某些内容。

代码：

```
<?php if (logged_in()) { 
    $account_perms = account_perms();
    while ($perms = mysql_fetch_array($account_perms)) {
    if ($perms['privellages'] == '1')  {
        if ( mysql_num_rows( $perms ) > 0 )
              include('includes/mod_profile/mod_photos/private.php'); 
    } 
    }
    $account_perms = account_perms();
    while ($perms = mysql_fetch_array($account_perms)) {
    if ($perms['privellages'] == '0')  {
     include('includes/mod_profile/mod_photos/private2.php'); 
    } 
    } 
    $account_perms = account_perms();
    while ($perms = mysql_fetch_array($account_perms)) {
      if($perms->num_rows > 0) {
         include('includes/mod_profile/mod_photos/private2.php'); 
      } 
    } 
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:20:30.510

尝试这个：

```
<?
if (logged_in()) {

    $account_perms = account_perms();
    if (mysql_num_rows($account_perms)) {
        while ($perms = mysql_fetch_array($account_perms)) {
            if ($perms['privellages'] == '1') {
                if (mysql_num_rows($perms) > 0)

                    include ('includes/mod_profile/mod_photos/private.php');
            }
        }
    } else {
        echo 'No records';
    }

    $account_perms = account_perms();
    if (mysql_num_rows($account_perms)) {
        while ($perms = mysql_fetch_array($account_perms)) {
            if ($perms['privellages'] == '0') {

                include ('includes/mod_profile/mod_photos/private2.php');

            }
        }
    } else {
        echo 'No records';
    }

    $account_perms = account_perms();
    if (mysql_num_rows($account_perms)) {
        while ($perms = mysql_fetch_array($account_perms)) {
            if ($perms -> num_rows > 0) {

                include ('includes/mod_profile/mod_photos/private2.php');

            }
        }
    } else {
        echo 'No records';
    }
}
?> 
```

# python - 在 Python 中，使用通配符导入所有属性是一种好习惯吗？

> ID：14626674
> 
> 赞同：3
> 
> 时间：2013-01-31T13:15:33.487
> 
> 标签：python

为什么？

有时我需要导入模块的所有属性，所以我使用通配符导入，但我的一个 Vim 脚本（使用 flake8 作为其语法检查器）总是给我一个警告并告诉我无法检测到未定义的名称。

使用通配符导入还有其他缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:19:16.977

通常使用`from module import *`. 通配符导入导致命名空间污染；您导入的名称超出了您的需要，如果您不小心引用了导入的名称，您可能不会得到您想要的 NameError。

此外，如果该库的未来版本添加了其他名称，您最终可能会*屏蔽其他名称*，这仍然会导致奇怪的错误：

```
from foo import bar
from spam import * 
```

如果您升级`spam`并且它现在包含 a `spam.bar`，它将替换`foo.bar`上面一行中的导入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:22:03.443

使用通配符导入可能会导致细微的错误：

## foo.py

```
import sys
os = sys # just for the fun of it... :-D 
```

## 蟒蛇控制台

```
>>> import os
>>> from foo import *
>>> os.path.join('p1', 'p2')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'list' object has no attribute 'join' 
```

这在更新库版本时尤其重要。他们可能会也可能不会添加新变量并以可怕的方式破坏您的代码。

如果您真的想使用`*`导入，请始终将其放在首位，以便其他导入和定义优先。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:03:14.990

[Martijn](https://stackoverflow.com/a/14626751/748858)的答案正确地解决了命名空间污染的问题，但我认为这里的任何答案都没有正确解决我认为是最大的问题......它不是*明确*的。

考虑一个假设的模块：

```
#foo.py
from bar import *
from baz import *
from qux import *

def breakfast(x):
    with corn_beef_hash(x) as yummy:
        for egg in yummy:
            yield ham(egg.scrambled) 
```

现在几个月后，你似乎不记得`corn_beef_hash`实际*做*了什么，所以你去查看文档——除了你不记得是否`corn_beef_hash`是`bar`or `baz`or的一部分`qux`。这使得追踪变得更加困难。此外，如果您知道函数最初是在哪里定义的，这会给您一些关于它应该做什么的提示，这可以使代码更易于阅读。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T13:20:18.330

到目前为止很好的答案，但总是很高兴参考[PyDocs](http://docs.python.org/2/tutorial/modules.html#importing-from-a-package)：

> 尽管某些模块设计为在您使用 import * 时仅导出遵循某些模式的名称，但在生产代码中仍被认为是不好的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T13:19:40.237

是的，如果您使用通配符导入所有内容，则从该包中获取所有内容并将其转换为脚本中的实例，这样做的更好方法是简单地导入包：

前任。导入包

```
package.x 
```

这样你就不会遇到命名问题。

# django - 如何在 Django 模板中插入已翻译的字符串？

> ID：14626680
> 
> 赞同：2
> 
> 时间：2013-01-31T13:15:45.470
> 
> 标签：django, templates, interpolation

我有一个通用的删除视图，其中包含一个确认问题作为包含一个占位符的翻译字符串。我想像这样插入它：

```
<p class="text-error">
    {% message % object %}
</p> 
```

变量`message`包含一个字符串，例如：“您要删除用户 %s 吗？”。

*如何在模板中使用字符串插值？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:58:00.690

最后我做了一个自定义过滤器：

```
from django.template.base import Library

register = Library()

@register.filter
def interpolate(value, arg):
    """
    Interpolates value with argument
    """

    try:
        return value % arg
    except:
        return '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:41:21.763

您可以将以下字典与字符串一起使用：

```
strings = { 'object': 'word' } 
```

如下：

```
{{ strings|stringformat:message }} 
```

使用[stringformat](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#stringformat)过滤器。请注意，前导`%`从字符串中删除（有关详细信息，请参阅文档）。

# ruby - 如何创建假的 has_many 关系，并让每个关系都包含类方法作为实例方法？

> ID：14626686
> 
> 赞同：0
> 
> 时间：2013-01-31T13:16:22.180
> 
> 标签：ruby, gem

我有一堂课，我想实现一些虚假的关系：

```
module FormStack
   class Connection
      def forms; end
      def fields; end   
   end 
end 
```

我为表单和字段都生成了元编程类（因为它们是 RESTful 资源，它们共享相同的操作名称和参数），并且我想将这些方法包含在我的 FormStack::Connection 类中的假关系中。可以这样做吗？

我本质上想`<FromStack::Connection Instance>.forms`表现得好像它是一样`FormStack::Form`，所以我可以做类似`<connection>.forms.all`或的事情`<connection>.forms.find(id)`。

这可能吗？我应该看的任何最佳实践？（这对我来说似乎有点奇怪，但我认为这是一种以有用的方式实现方法的优雅方式，同时仍然具有静止资源/对象的 ActiveRecord 式抽象）。

这是我正在使用的代码，如果您想查看：[https ://github.com/TinderBox/formstack/tree/connection_instances](https://github.com/TinderBox/formstack/tree/connection_instances)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:58:29.810

为什么不只使用简单的组合？当您初始化一个新的 FormStack::Connection 实例时，传递任何具有`has_many`FormStack::Form 关系的对象。然后可以直接调用 FormStack::Form 集合实例上的#forms 方法，也可以使用委托。

```
FormStack::Connection.new(FormStack::FormCollection.new(params[:form]) #sample class name -- obviously use whatever has the real has_many :forms

module FormStack
  class Connection
    def initialize(form_collection)
      @form_collection = form_collection
    end
    def forms
      @form_collection.forms
    end
    def fields
      @form_collection.fields
    end   
  end 
end 
```

或者

```
module FormStack
  class Connection
    extend Forwardable
    def_delegators :@form_collection, :forms, :fields

    def initialize(form_collection)
      @form_collection = form_collection
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:36:08.963

除非有更好的方法，否则这就是我现在解决问题的方法：

```
def method_missing(meth, *args, &block)
    method_name = meth.to_s

    if "forms" == method_name
        FormStack::Form.connection = self
        FormStack::Form
    elsif ...
    else
        super
    end
end 
```

[https://github.com/TinderBox/formstack/blob/082793bed97e97cc65c703c8ca3cb382cbdf743a/lib/formstack/connection.rb](https://github.com/TinderBox/formstack/blob/082793bed97e97cc65c703c8ca3cb382cbdf743a/lib/formstack/connection.rb)

# facebook - 使用字段扩展的 Facebook Graph API 调用对速率限制的计数是否与批量调用不同

> ID：14626689
> 
> 赞同：10
> 
> 时间：2013-01-31T13:16:29.057
> 
> 标签：facebook, facebook-graph-api, limit, facebook-field-expansion

我正在寻找优化我的 Facebook 应用程序。

今天我使用四个图形 API 调用进行批处理调用：

```
/me
/me/friends
/me/likes
/me/feed 
```

如果我使用这样的字段扩展将其更改为单个图形 API 调用：

```
/me?fields=id,name,username,friends,likes,feed 
```

出于速率限制的目的，现在这是否会算作对 API 的一次命中而不是四次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T12:32:56.560

不幸的是，批处理中的每个调用都被计为一次 api 调用，在批处理中调用它们会更快，因为它将是 1 个请求。请参阅此处有关 Facebook API 的文档：

**限制**
我们目前将一个批次中的请求数量限制为 50 个，但为了计算 API 调用限制和资源限制，批次中的每个调用都是单独计算的。例如，一批 10 次 API 调用将计为 10 次调用，并且批处理中的每个调用都会以相同的方式影响 CPU 资源限制。

来源： [https ://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T17:35:39.747

根据实际测试，我发现字段扩展可以在速率限制下进行多次使用。例如，从安静状态开始，对单个 api (graph.facebook.com/IDENTITY/posts) 的 63 次字段扩展调用序列将我们带到了 600 次调用速率限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T01:48:12.303

根据[Facebook 文档](https://developers.facebook.com/docs/reference/api/field_expansion/)，

> Graph API 的字段扩展功能允许您有效地将多个图形查询“加入”到单个调用中。

因此，您上面的查询将代表批处理表单中的四个调用，以及字段扩展表单中的一个调用。

正如我在上面的评论中指出的那样：批处理在单个请求中向 Facebook 发送多个但不一定相关的查询。字段扩展就像在 SQL 中通过单个查询进行连接。

# sencha-touch-2 - Sencha Touch 工具栏高度

> ID：14626691
> 
> 赞同：1
> 
> 时间：2013-01-31T13:16:43.117
> 
> 标签：sencha-touch-2, toolbar, sencha-touch-theming

我动态创建了一个底部工具栏，但无论我为 height 属性赋予的值如何，它都有其默认高度。我尝试了百分比，像素，简单的数字，但没有任何效果。

```
myComponent.add({
                        xtype:'toolbar',

                        autoDestroy:true,
                        docked:'bottom',
                        bottom:0,

                        width:'100%',
                        height:'5px',

                        margin:'0 0 0 0',
                        padding:'0 0 0 0',

                        layout:{
                            pack:'middle',
                            align:'middle'
                        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:25:40.740

您必须更改`minHeight`属性。

我的代码中的一个工作示例：

```
Ext.define('MyApp.view.FailureBar', {
    extend : 'Ext.Toolbar',
    alias : 'widget.failureBar',
    config : {
        docked : 'bottom',
        minHeight : '30px',
        zIndex : 1,
        cls : 'failureBar'
    }
}); 
```

# qt - QML SectionScroller 和 QList

> ID：14626692
> 
> 赞同：0
> 
> 时间：2013-01-31T13:16:51.807
> 
> 标签：qt, listview, scroll, qml, qlist

我`QList<QObject*>`在我的应用程序中用作模型。由于可能有很多元素，我决定使用 SectionScroller。当我尝试使用 SectionScroller 滚动时，我得到一个

`Error: Unable to assign [undefined] to QString`

我究竟做错了什么？

我的列表视图是：

```
ListView
{
    id: irrview
    width: parent.width
    model: irregulars.db // QList<QObject*>
    anchors.top: caption.bottom
    anchors.bottom: parent.bottom
    clip: true
    section.criteria: ViewSection.FirstCharacter
    section.property: "form0"
    section.delegate: Item {height: 10; width: parent.width; Text { text: section } } // for testing purposes
    delegate: Rectangle
    {
        /**/
    }
} 
```

谢谢

编辑：更多代码：

`irregulars`标题_

```
class IrregularListWrapper : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QList<QObject*> db READ getdb NOTIFY langChanged)
    Q_ENUMS(Language)
public:
    enum Language
    {
        English = 0,
        German = 1
    };

    IrregularListWrapper() : db(0) { setLang(German); }
    ~IrregularListWrapper() { delete db; }
    QList<QObject*> getdb() const { return *db; }

    Q_INVOKABLE void changeLang(Language l) { delete db; setLang(l); }

signals:
    void langChanged();
protected:
    void setLang(Language);
    QList<QObject*> * db;
}; 
```

和函数体

```
void IrregularListWrapper::setLang(Language l)
{
    switch (l)
    {
    case English:
        db = new english;
        langName = "English";
        break;
    case German:
        db = new german;
        langName = "German";
        break;
    }
    emit langChanged();
} 
```

德语、英语的课是这样的

```
class german : public QList<QObject*>
{
public:
    german();
};

german::german()
{
    append(new IrregularVerb("anfangen", "fing an", "angefangen"));
    /*more like that*/
} 
```

和不规则动词：

```
class IrregularVerb : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString form0 READ getForm0 NOTIFY formChanged)
    Q_PROPERTY(QString form1 READ getForm1 NOTIFY formChanged)
    Q_PROPERTY(QString form2 READ getForm2 NOTIFY formChanged)
public:
    QString forms[3];
    QString getForm0() const { return getForm(0); }
    QString getForm1() const { return getForm(1); }
    QString getForm2() const { return getForm(2); }
    IrregularVerb(QString a, QString b, QString c) { forms[0] = a; forms[1] = b; forms[2] = c; }
protected:
    const QString& getForm(const int& ind) const { return forms[ind]; }
signals:
    void formChanged();

}; 
```

编辑2：这不起作用如果我这样做

```
QVariantList getdb() const { return QVariant::fromValue(*db); }

IrregularListWrapper.h:24: error: could not convert 'QVariant::fromValue(const T&) [with T = QList<QObject*>; QVariant = QVariant]()' from 'QVariant' to 'QVariantList {aka QList<QVariant>}' 
```

如果我去掉星号，错误是相似的。

编辑3：

我发现了这个[http://ruedigergad.com/2011/08/22/qml-sectionscroller-vs-qabstractlistmodel/](http://ruedigergad.com/2011/08/22/qml-sectionscroller-vs-qabstractlistmodel/)

并发现这`irregulars.db.get`是未定义的

并将德语和英语改为

```
class german : public AbstractIrregularList 
```

和

```
class AbstractIrregularList : public QObject, public QList<QObject*>
{
    Q_OBJECT
public:
    Q_INVOKABLE QObject* get(int index) {return at(index);}
}; 
```

但即使是现在，regulars.db.get(0) 也会出错（表达式 'irregulars.db.get' [undefined] 的结果不是函数。）

为什么会发生这样的情况，即未检测到 Q_INVOKABLE？Q_OBJECT 宏在那里

/edit5：即使使用 QVariant，错误仍然存​​在。它可以被视为 QList 或 QObject*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:44:46.240

如果我没记错的话，您应该使用 QVariantList 而不是 QList<SomeClass> 将元素列表从 C++ 公开到 QML。

它应该解决问题。

* * *

[QML 中支持的类型](http://doc.qt.digia.com/4.7/qtbinding.html#supported-data-types)

* * *

尝试使代码看起来像这样（在**不规则**标题中）：

```
Q_PROPERTY(QVariantList db READ getdb NOTIFY langChanged)
//...
QVariantList getdb() const {/*convert db to QVariantList*/ return converted_db;} 
```

或者，如果您想从您提供的链接中编写代码：

```
Q_PROPERTY(QVariantList db READ getdb NOTIFY langChanged)
//...
QVariant getdb() const {return QVariant::fromValue(db);} 
```

# php - Zend_Date、ISO_8601、日期解析和本地系统时钟

> ID：14626694
> 
> 赞同：0
> 
> 时间：2013-01-31T13:16:58.027
> 
> 标签：php, zend-framework, zend-date

我对 Zend_Date 对象有一个奇怪的问题。

似乎设置器使用不同的系统时钟日期执行不同的操作。假设系统日期为 2013 年 1 月 28 日，代码如下：

```
$now=new Zend_Date(Zend_Date::ISO_8601);
$now->now();
echo '<br/>now: ' . $now->toString();
echo '<br/>now->day: ' . $now->get(Zend_Date::DAY);
echo '<br/>now->month: ' . $now->get(Zend_Date::MONTH);
echo '<br/>now->year: ' . $now->get(Zend_Date::YEAR);
$end=new Zend_Date('2013-02-25 14:23:34', Zend_Date::ISO_8601);
echo '<br/>end: ' . $end->toString();
$end->setHour('23')->setMinute('59')->setSecond('59')->setDay($now->get(Zend_Date::DAY))->setMonth($now->get(Zend_Date::MONTH))->setYear($now->get(Zend_Date::YEAR));
echo '<br/>endAfterSetters: ' . $end->toString(); 
```

将产生以下输出：

```
now: 28-01-2013 14:04:28
now->day: 28
now->month: 01
now->year: 2013
end: 25-02-2013 14:23:34
endAfterSetters: 28-01-2013 23:59:59 
```

但是，如果您将系统时钟更改为 2013 年 1 月 29 日，则输出与预期不同：

```
now: 29-01-2013 14:07:22
now->day: 29
now->month: 01
now->year: 2013
end: 25-02-2013 14:23:34
endAfterSetters: 01-01-2013 23:59:59 
```

最后输出是**01-01** -2013 23:59:59，但应该是**29-01** -2013 23:59:59 ！

它发生在 PHP 5.3.2 和 5.3.16、Zend_Framework 10.7、最新的 Zend_Date 24880 版本上。

Everyting过去工作得很好。

任何想法为什么会发生？

PS：我在 1 月 29,30,31 日使用 jquery datatime plugin malfunciton 时也发现了它......但我会在其他问题中描述它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:43:39.033

请记住，您的 setter 是按顺序调用的。因此，当您致电时，`setDay(29)`您是在告诉它将日期更改为*29th February 2013*，这不是一个有效日期，因此它会将其滚动到*1st March 2013*。然后你打电话`setMonth(1)`，将月份更改为一月，给你*1st January 2013*。

您可以通过将 extend_month 选项传递给`Zend_Date`构造函数来控制此行为，请参阅：http: [//framework.zend.com/manual/1.12/en/zend.date.overview.html#zend.date.options.extendmonth](http://framework.zend.com/manual/1.12/en/zend.date.overview.html#zend.date.options.extendmonth)

# django - 带有 json 字段的 Django-Forms

> ID：14626702
> 
> 赞同：20
> 
> 时间：2013-01-31T13:17:18.730
> 
> 标签：django, django-forms

我希望在表单字段中接受 json 数据，然后使用一些数据库操作对其进行验证。数据将主要由整数数组组成。所以你能帮我看看我该怎么做。

我试图用谷歌搜索，但没有得到任何体面的答案。请帮忙。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-31T13:31:52.060

您需要使用`CharField`. 在该字段的 clean 方法中，您可以根据您的要求对其进行验证，以检查输入是否有效。

就像是：

```
class myForm(forms.Form):
     jsonfield = forms.CharField(max_length=1024)

    def clean_jsonfield(self):
         jdata = self.cleaned_data['jsonfield']
         try:
             json_data = json.loads(jdata) #loads string as json
             #validate json_data
         except:
             raise forms.ValidationError("Invalid data in jsonfield")
         #if json data not valid:
            #raise forms.ValidationError("Invalid data in jsonfield")
         return jdata 
```

您还可以找到用于 JSON 数据输入的自定义字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-17T00:41:30.527

[您可以根据该决定](https://github.com/abbasovalex/django-SplitJSONWidget-form)使用 JSON 数据中的字段制作表单

例子：

**表格.py**

```
# -*- coding: utf-8 -*-
from django import forms
from splitjson.widgets import SplitJSONWidget

class testForm(forms.Form):
    attrs = {'class': 'special', 'size': '40'}
    data = forms.CharField(widget=SplitJSONWidget(attrs=attrs, debug=True)) 
```

**视图.py**

```
# -*- coding: utf-8 -*-
from django.shortcuts import render_to_response
from django.template import RequestContext
from forms import testForm

def test_dict(request):
    json = {'a': 1,
            'b': 2,
            'c': 3,
            'd': 4}
    form = testForm(request.POST or None, initial={'data': json})
    if form.is_valid():
        # validate and save
        pass

    template = 'test_template.html'
    context = RequestContext(request, {'form': form})
    return render_to_response(template, context) 
```

**模板.py**

```
<!doctype html>
<html>
    <head></head>
    <body>
        Errors: 
        {% for field, error in form.errors.items %}
            <ul>
            <li>{{ error }}</li>
            </ul>
        {% empty %}
            no errors 
        {% endfor %}
        <hr/>
        List of:
            <form action="" method="post">
                {% csrf_token %}
                {{ form.as_p}}
                <input type="submit" value="Submit" />
            </form>
    </body>
</html> 
```

**结果：**

![](../Images/b2f2691b8a9c719fbf4cdcaabf07099a.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T10:46:19.063

检查实现 JSONField 和相关表单字段[的 django-json- field。](https://github.com/derek-schaefer/django-json-field)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-01T06:49:12.090

如果你的 Django 模型包含一个名为的 JSON 字段，比如`scope`，它要么是 a 要么是`django.contrib.postgres.forms.jsonb.JSONField`a `jsonfield.fields.JSONField`，那么简单地将你的 Django 重写`ModelForm`为：

```
from django.form import fields
from entangled.forms import EntangledModelForm

class MyForm(EntangledModelForm):
    field1 = fields.CharField()
    ...
    class Meta:
        entangled_fields = {'scope': ['field1', ...]} 
```

该类`EntangledModelForm`是 Django 的一个特殊变体，`ModelForm`必须从第三方库[django-entangled](https://pypi.org/project/django-entangled/)导入。

这允许您编辑一个或多个 JSON 字段，并具有标准 Django 表单提供的所有好处，例如表单验证和数据清理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-23T17:17:40.463

有[JSONField](https://github.com/dmkoch/django-jsonfield/)实现的最流行的 github 存储库。您可以使用以下方式安装它：

```
pip install jsonfield 
```

例如，如果您有一个模型

```
from jsonfield import JSONField
from django.db import models

class MyModel(models.Model):
    json_field = JSONField(default='', blank=True) 
```

您可以简单地定义一个带有 JSON 验证的表单

```
from django import forms
from jsonfield.fields import JSONFormField
from myapp import models

class MyModelForm(forms.ModelForm):
    class Meta:
        model = models.MyModel
        fields = '__all__'
        field_classes = {
            'json_field': JSONFormField,
        } 
```

并在您的管理模型中使用此表单

```
from django.contrib import admin

from myapp.forms import MyModelForm
from myapp.models import MyModel

@admin.register(MyModel)
class MyModelAdmin(admin.ModelAdmin):
    form = MyModelForm 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-04T17:15:40.160

`django.contrib.postgres`有一个 JSONField 表单字段。这是[docs](https://docs.djangoproject.com/en/2.1/ref/contrib/postgres/forms/)的链接。字段由 HTML 表示`<textarea>`。

```
from django import forms
from django.contrib.postgres.forms.jsonb import JSONField

class ExampleForm(forms.Form):
    ...

    metadata = JSONField()
    ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-01T05:35:05.983

**简单来说：**

您不想更改所有表单的默认行为，只需使用一个函数即可将您的请求转换为对象。

```
form = myForm(jsonForm(request))

if form.is_valid():
   # Continue your stuffs 
```

您可以将请求正文转换为 Python 对象并传递给您的表单，而不是直接传递请求。

```
def jsonForm(req):
    return json.loads(req.body.decode('utf-8')) 
```

# sql - 像 '%text%' 条件一样优化而不删除它

> ID：14626712
> 
> 赞同：0
> 
> 时间：2013-01-31T13:17:32.293
> 
> 标签：sql, sql-server, full-text-search

尽管我无权访问应用程序源代码，但我需要优化查询。简化查询如下：

```
select from eu.myview where name like '%text%' 
```

到目前为止，我通过生成全文索引并用包含条件替换 like 来解决这个问题。那工作得很好。但是，在这种情况下，我无权访问应用程序源代码，也无法删除类似条件。我可以访问数据库并且可以更改 eu.myview 源。
我能做些什么来优化这个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:01:54.900

不。

前导 % 使索引*查找*的使用无效，因此必须检查每一行......无论是通过索引还是表*扫描*

# r - 在函数中访问 plyr id 变量

> ID：14626713
> 
> 赞同：6
> 
> 时间：2013-01-31T13:17:34.470
> 
> 标签：r, plyr

我经常遇到使用`d*ply`or时需要访问实际 id 变量的问题`l*ply`。一个简单（但毫无意义）的例子是：

```
df1 <- data.frame( p = c("a", "a", "b", "b"), q = 1:4 )
df2 <- data.frame( m = c("a", "b" ), n = 1:2 )

d_ply( df1, "p", function(x){
 actualId <- unique( x$p )
 print( mean(x$q)^df2[ df2$m == actualId, "n" ] )
}) 
```

所以在`d*ply`功能的情况下，我可以帮助自己`unique( x$p )`。但是说到`l*ply`，我不知道如何访问相应列表元素的名称。

```
l_ply( list(a = 1, b = 2, c = 3), function(x){
  print( <missing code> )
})
# desired output
[1] "a"
[1] "b"
[1] "c" 
```

有什么建议么？有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:22:40.803

我解决这个问题的一种方法是遍历索引（名称）并在函数中进行子集化。

```
l <- list(a = 1, b = 2, c = 3)
l_ply(names(l), function(x){
  print(x)
  myl <- l[[x]]
  print(myl)
}) 
```

`myl`然后将与

```
l_ply(l, function(myl) {
  print(myl)
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:41:00.313

这是一个想法。

```
l_ply( list(a = 1, b = 2, c = 3), function(x){
     print(eval(substitute(names(.data)[i], parent.frame())))
})
# [1] "a"
# [1] "b"
# [1] "c" 
```

（看看最后的代码块，`l_ply`看看我在哪里得到了名字`.data`和`i`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:21:30.830

我不确定有没有办法做到这一点，因为匿名函数的唯一参数是列表元素值，没有它的名称：

```
l_ply( list(a = 1, b = 2, c = 3), function(x){
  print(class(x))
})
[1] "numeric"
[1] "numeric"
[1] "numeric" 
```

但是，如果您将命令的结果作为列表或数据框取回，则会保留名称以供您以后使用：

```
llply( list(a = 1, b = 2, c = 3), function(x){
  x
})
$a
[1] 1

$b
[1] 2

$c
[1] 3 
```

除了 Josh 解决方案，您还可以将列表元素的名称和值传递给带有`mapply`or的函数`m*ply`：

```
d <- list(a = 1, b = 2, c = 3)
myfunc <- function(value, name) {
  print(as.character(name))
  print(value)
}
mapply(myfunc, d, names(d))
m_ply(data.frame(value=unlist(d), name=names(d)), myfunc) 
```

# c - c中整数后面的点（.）是什么意思？

> ID：14626715
> 
> 赞同：5
> 
> 时间：2013-01-31T13:17:37.060
> 
> 标签：c, operator-keyword

我想知道是否有人知道 . 在 C 中的整数之后表示。

我有这段代码要转换，这是我唯一不确定它的作用。

if (y>=0.) . 这里呢？

完整代码：

```
double angleOf(double x, double y) {

  double  dist=sqrt(x*x+y*y) ;

  if (y>=0.) return acos( x/dist);
  else       return acos(-x/dist)+.5*CIRCLE_RADIANS; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T13:19:18.050

它与 相同`0.0`，它会将其视为双精度而不是整数，因此您不需要强制转换它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:19:00.880

尾随点使文字成为浮点（双）文字，而不是整数。

# ssis - SSIS - 使用 StartDate 创建动态命名的日志文件会生成两个日志文件

> ID：14626720
> 
> 赞同：1
> 
> 时间：2013-01-31T13:17:49.793
> 
> 标签：ssis

我在 SSIS 包中启用了文件日志记录，对于日志文件连接字符串，我使用下面的表达式生成格式为`housekeepinglog2013_01_31_12_07.xml`

```
@[User::VAR_LOG_PATH] +"\\housekeepinglog" + 
(DATEDIFF( "dd", @[System::StartTime], GETDATE() ) < 1 ?
(DT_STR,4,1252)DATEPART( "yyyy" , @[System::StartTime]) +  "_" +
RIGHT("0" + (DT_STR,4,1252)DATEPART("mm", @[System::StartTime]), 2) + "_" +
RIGHT("0" + (DT_STR,4,1252)DATEPART("dd", @[System::StartTime]), 2) +  "_" +
RIGHT("0" + (DT_STR,4,1252)DATEPART("hh", @[System::StartTime]), 2) +  "_" +
RIGHT("0" + (DT_STR,4,1252)DATEPART("mi", @[System::StartTime]), 2) +  "_" +
RIGHT("0" + (DT_STR,4,1252)DATEPART("ss", @[System::StartTime]), 2)
: "") 
+ ".xml" 
```

问题是我没有创建一个日志文件，而是得到了两个。一个包含正确的日期，另一个仅包含有关包验证的日志信息，但日期大约为一天。似乎 StartTime 系统变量会在包启动后设置，但这是在验证后完成的，并且验证正在创建日志条目。在此之前，StartDate 变量保存一些在编辑包时创建的任意日期。

这只是轻微的刺激，但我想知道是否有人知道抑制第二个日志文件的非笨拙方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:03:28.190

我猜“旧”的日志也有这个`PackageStart`事件，是吗？您在这里看到的内容与许多人尝试的努力有些相关，即在不修改包的情况下动态启用/禁用日志记录。他们遇到的挑战是基础 dtexec.exe 在您进入表达式开始验证的地方之前验证了包以及所有这些。

想到的两个选项是从命令行为您的连接字符串提供值。就像是`dtexec /file .\mypackage.dtsx /set \Package.Connections[XmlLogCM].Properties[ConnectionString];\"c:\housekeepinglog_SomeDosSyntaxForDateTime.xml\"`

第二个是以不同的方式启动包。[通过使用Microsoft.SqlServer.Dts.Runtime](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.aspx)的自定义 .NET 代码或下载并使用[DTLoggedExec](http://dtloggedexec.codeplex.com/)

# javascript - selectSingleNode 覆盖/覆盖跨浏览器

> ID：14626721
> 
> 赞同：0
> 
> 时间：2013-01-31T13:17:51.247
> 
> 标签：javascript, cross-browser

基本上我的任务是修复一个非跨浏览器应用程序。问题是它过度使用 .selectSingleNode 函数。（其中 ofc 仅适用于 IE）。

我有一个替代品：

```
function selectOneNode(key, node) {
try {
    Response = node.selectSingleNode(key);
}
catch (err) {

    var xpe = new XPathEvaluator();
    var nsResolver = xpe.createNSResolver(node.ownerDocument == null ? node.documentElement : node.ownerDocument.documentElement);
    var results = xpe.evaluate(key, node, nsResolver, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
    //Response.ErrorNumber = results.singleNodeValue.text.toString().ToInt(); 
    Response = results.singleNodeValue;
}
return Response; 
```

}

但是这个 .selectSingleNode 函数在许多文件中使用了 2000 多次，但不知道如何覆盖 .selectSingleNode 函数，所以我不需要更改每个实例。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:28:53.893

如果您想覆盖某些功能，您可以再次编写它。我有类似的问题，但有警报功能。我刚刚做了这样的事情：

```
function alert(){
//custom code goes here
} 
```

# java - 生产环境中的 JUnit 测试用例

> ID：14626724
> 
> 赞同：2
> 
> 时间：2013-01-31T13:18:15.537
> 
> 标签：java, unit-testing, junit

我们最近开始了 TDD，并且正在为我们开发的每个 RESTful Web 服务编写 JUnit 测试用例。发布新版本时在生产环境中运行 JUnit 测试用例是个好主意吗？

**背景：** 我们的网络应用程序是企业网络应用程序，具有复杂的业务逻辑。计划是使用@After 和@AfterClass 来清理运行测试用例生成的测试数据。

该网络应用程序可作为 SaaS 和本地版本提供，如果可行且是良好做法，我们计划验证这两个版本的升级。我知道我们将让这个测试用例在暂存环境中运行，但要确保我们在升级/部署期间没有破坏任何东西，或者环境没有产生任何不同的影响。

现在的问题是，“这是好的做法吗？如果没有，建议什么？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:28:14.063

您的单元测试应该只测试代码。它们不应该使用数据库和/或 Web 服务等外部资源进行修改，然后它们就会成为集成测试。

一般来说，我建议在将项目构建/部署到生产之前运行单元测试，这些可以在构建服务器或 QA / 登台服务器上运行。只有当它们都通过时，您才会部署到生产环境，那么您就知道构建在这个意义上是稳定的。

如果您有与其他服务对话并且可能修改数据等的集成测试，我不会在生产环境中运行这些测试。我会在您的 QA/Staging 服务器上针对即将发布到生产环境的代码运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:29:11.283

这是个有趣的问题; 我会说不，您不想运行完整的单元测试套件，但是您可能想投资维护单独的部署冒烟测试套件。

原因 - 您的测试套件可能会影响产品数据库，例如实际测试中的错误无法回滚或其他原因。

此外，您不想在 prod 中测试整个代码库，只需验证其部署是否正常（假设您在运行整个测试套件时获得了令人满意的结果）。

# c# - 在 HTML 文本中添加指向关键字的链接

> ID：14626725
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:18:15.280
> 
> 标签：c#, html, find, keyword

我有一个 HTML 文本作为输入，关键字作为输入，URL 地址也作为输入。

我应该如何在文本中找到该关键字并用锚元素包围它，将 URL 放在 href 属性中，将关键字放在元素的 InnerText 部分中？

请注意，关键字不能是 HTML 文本中某些其他元素的属性，也不能已经在锚点内（已经在链接内）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:21:26.207

通常为此推荐的工具是[Html Agility Pack](http://html-agility-pack.net/)。它将采用格式错误的 HTML 并将其转换为 XHTML，然后是可遍历的 DOM，因此对于您在野外找到的代码非常有用，而不是像 RegEx 这样注定会破坏的方法。

这里有一些示例和 API 文档：

[http://html-agility-pack.net/api](http://html-agility-pack.net/api)

一些有用的链接：

*   [如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)
*   [使用 Html Agility Pack 解析 HTML 文档](http://www.4guysfromrolla.com/articles/011211-1.aspx)
*   [使用 HtmlAgilityPack 抓取网站](http://www.beletsky.net/2010/09/crawling-web-sites-with-htmlagilitypack.html)
*   [HTML 敏捷包入门](http://www.c-sharpcorner.com/UploadFile/9b86d4/getting-started-with-html-agility-pack/)

# c# - File.AppendAllText 中的 FileNotFoundException

> ID：14626728
> 
> 赞同：6
> 
> 时间：2013-01-31T13:18:18.027
> 
> 标签：c#, io

我正在阅读`File.AppendAllText`msdn 的方法

[http://msdn.microsoft.com/en-us/library/ms143356.aspx](http://msdn.microsoft.com/en-us/library/ms143356.aspx)

我看到他们已经列出`FileNotFoundException`了该方法的可能例外列表，但根据同一页面上关于方法的描述

> 打开文件，将指定的字符串附加到文件，然后关闭文件。如果文件不存在，此方法创建一个文件，将指定的字符串写入文件，然后关闭文件。

这部分

> 如果文件不存在，此方法创建一个文件

似乎这个方法永远不会抛出这个异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T13:29:36.980

如果你看一下（比如说）Mono 的实现（它与微软的兼容），所有`File.AppendAllText`最终都会做的（除了参数检查之外）是`StreamWriter`用你的路径创建 a 并`Write`在该对象上调用 a 。

`FileNotFoundException`据我所知，使用的构造函数和方法都没有列出来抛出 a ，所以它*可能*是一个文档错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T12:53:17.097

该线程可能很旧，但是One-man-crew上面给出的正确答案被其他人忽略了。事实是 FileNotFoundException 不是拼写错误。它存在，我明白了。原因在异常消息中，如下所示：“找不到路径的一部分”。如前所述，**如果文件不存在，File.AppendAllText 将打开该文件**，但它必须具有**有效路径**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-28T07:41:20.577

我面临着同样的问题。问题是我提供的路径不可用。

AppendAllLines 或 AppendAllText 不会创建路径，它只会创建文件。

为了解决这个问题，我使用 System.IO.Directory.CreateDirectory("Folder Path"]) 创建了路径。

然后我使用了 AppendAllLines 和 AppendAllText 方法。

# javascript - 在 EditorFor 字段上使用 Javascript？

> ID：14626732
> 
> 赞同：2
> 
> 时间：2013-01-31T13:18:31.340
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4

在 MVC4 中，我有一个 EditorFor 字段，它表示一个布尔值并呈现为一个复选框，如果选中该复选框，我想让其他 EditorFor 字段更改为不可编辑。这在纯 html 中很简单，但使用剃刀语法我不知道该怎么做。

```
<div class="editor-field">
        @Html.EditorFor(model => model.Draw)
        @Html.ValidationMessageFor(model => model.Draw)
    </div>

<script type="text/javascript">
function validate() {
    if (document.getElementById('@Html.EditorFor(model => model.Draw)').checked) {
        alert("checked")
    } else {
        alert("You didn't check it! Let me check it for you.")
    }
} 
```

正在尝试使用该脚本对其进行测试，但由于我不知道编辑器的 ID，因此我不确定该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:52:36.823

如果您使用 CheckBoxFor 而不是 EditorFor（它是一个通用帮助器），您可以通过方法重载轻松添加 HTML 属性。添加 ID 允许您从 JavaScript 访问它。

```
<div class="editor-field">
    @Html.CheckBoxFor(model => model.Draw, new { ID = "cbxDraw" })
    @Html.ValidationMessageFor(model => model.Draw)
</div>

<script type="text/javascript">
$(document).ready(function() {
    $('#cbxDraw').on('change', function() {
        var $cbx = $(this),
            isChecked = $cbx.is(':checked');

        $cbx.closest('.editor-field')
            .siblings()
            .find(':input')
                .prop('disabled', isChecked);
    });
});
</script> 
```

（注：本例使用 jQuery）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T13:43:01.597

ASP.NET MVC 4 有[`NameExtensions`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.nameextensions%28v=vs.108%29.aspx)提供方法`IdFor`的新类`NameFor`。你可以像这样使用它：

```
document.getElementById('@Html.IdFor(model => model.Draw)') 
```

# paypal - PayPal API证书概念理解

> ID：14626737
> 
> 赞同：0
> 
> 时间：2013-01-31T13:18:42.113
> 
> 标签：paypal

它的混乱而不是技术问题。我在 Paypal 上有商家帐户，前段时间我开发了一个应用程序，其中 API 认证身份验证与 Paypal 集成。现在我已经开发了一个新的应用程序，并想用相同的帐户附加到 Paypal。但是在这个应用程序中，我使用了带有 API 签名方法的快速结帐 API。现在我有两个疑问：

1.  是否可以同时具有 API 身份验证的类型。
2.  一个更蹩脚的问题，我如何将我的商家帐户与开发者帐户相关联？

# jquery - 如何防止标签重叠？

> ID：14626745
> 
> 赞同：1
> 
> 时间：2013-01-31T13:18:58.963
> 
> 标签：jquery, html, css

如果单击第一个“a”标签，那么我通过 jquery 第二个“a”标签将“selected”类添加到此标签，然后第一个标签与第二个标签重叠。我不想改变它的立场。只想将 z-index 添加到选定的选项卡。

我的代码有什么问题：

html:

```
<div class="kumar-tabs">
            <ul>
                <li><a href="javascript:void(0)" id="residential">Residential</a></li>
                <li><a href="javascript:void(0)" id="commercial" >Commercial</a></li>
                <div class="kumar-links-bottom-line"></div>
            </ul>
            <div class="residential" style="">
                <div class="kumar-projet-row">
                    <span class="kumar-bullet"></span>
                    <a href="project-overview.php?PID=9" class="kumar-project-name">Kumar Surabhi</a>
                    <span class="kumar-project-desc">- Swargate</span>
                </div>

            </div>
            <div class="commercial" style="display: none;">
                <div class="kumar-projet-row">
                    <span class="kumar-bullet"></span>
                    <a href="project-overview.php?PID=21" class="kumar-project-name">Connaught Place</a>
                    <span class="kumar-project-desc">- Bund Garden Road</span>
                </div>      
            </div>
</div> 
```

CSS：

```
.kumar-tabs {
overflow: hidden;
}
.kumar-tabs ul {
position: relative;
overflow: hidden;
margin: 7px 0;
}
.kumar-tabs li {
float: left;
}
.kumar-tabs li a {
display: block;
margin: 0 5px;
background: #cacaca;
border: 1px solid #a2a2a2;
border-bottom: none;
padding: 5px;
color: #606060;
}
.kumar-tabs li a.selected {
background: #ffffff;
position: absolute;
z-index: 1;
color: #2f2f2f;
}
.kumar-links-bottom-line {
background: #a2a2a2;
height: 1px;
width: 100%;
position: absolute;
bottom: 0px;
} 
```

查询：

```
$(document).ready(function(){
    $('#commercial').removeClass('selected');
    $('#residential').addClass('selected'); 
    $('.commercial').hide();
    $('.residential').show();

    $('#residential').click(function(){
        $('#commercial').removeClass('selected');
        $('#residential').addClass('selected'); 
        $('.commercial').hide();
        $('.residential').show();   
    });
    $('#commercial').click(function(){
        $('#residential').removeClass('selected');  
        $('#commercial').addClass('selected');
        $('.residential').hide();
        $('.commercial').show();
    });
}); 
```

感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:18:07.747

“*我不想改变它的立场*”我认为你的意思是`left`和`top`立场。
在你的 CSS 中；`position`将 selected 的值更改为而`relative`不是`absolute`.

```
.kumar-tabs li a.selected {
    background: #ffffff;
    position: relative; /* « or remove this line */
    z-index: 1;
    color: #2f2f2f;
} 
```

这是一个**[演示小提琴](http://jsfiddle.net/onury/gryww/)**。

# visual-c++ - 创建犰狳 DLL 时未解决的外部符号错误

> ID：14626747
> 
> 赞同：1
> 
> 时间：2013-01-31T13:19:02.583
> 
> 标签：visual-c++, dll, armadillo, lnk2001

我正在尝试在 Win XP 上使用 VC++ 2010 创建[Armadillo](http://arma.sourceforge.net/license.html "主页")线性代数库的动态库，该库最初是一个仅包含标头的库。我创建了一个新项目，添加了源文件，并创建了一个 .def 文件，指定仅导出一个 Armadillo 函数（Col 类），但 Col 类出现 LNK2001 错误。我可以创建一个 main 并很好地使用 Col，所以我认为 Col 被正确包含。

我还尝试在函数定义上使用“__declspec(dllexport)”并编译，但由于使用 dumpbin 没有显示任何内容，因此函数未导出，并且我无法成功使用 .dll。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:57:52.943

由于[Armadillo](http://arma.sourceforge.net)是一个使用表达式模板的 C++ 模板库，我认为不可能从中创建 DLL。

每当编译使用 Armadillo 类的代码时，表达式模板由 C++ 编译器在*编译时*执行（运行） 。每当 C++ 库使用表达式模板（[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)的一部分）时，该库都可以被视为 C++ 编译器的扩展。

所有犰狳代码都在标题中。因此，即使您设法导出其中一个类（例如 Col 类），也不会导出任何相关的数学机制（例如，加法、乘法等），这在图书馆。

# jquery - 内部 Jquery.post() 函数返回未定义

> ID：14626756
> 
> 赞同：0
> 
> 时间：2013-01-31T13:19:26.043
> 
> 标签：jquery, function, model-view-controller, undefined, encapsulation

我对以下 Jquery 代码有疑问：

```
function isAuthorised() {
  $.post("Action/Controller")', function (data) {
    return data;
  });
} 
```

我已经测试了`MVC`控制器的返回值，这很好。但是当我使用以下内容检查授权时：

```
function onLoad() {
  var result = isAuthorised();
  alert(result); // undefined
  if (!result) 
    // redirect
} 
```

返回值未定义。我在[这里](https://stackoverflow.com/questions/9829639/why-does-this-inner-function-return-undefined)看到了一个类似的帖子，并认为这可能是一个问题`encapsulation`，但不同之处在于我需要返回从`JQuery.post()`.

**编辑**：好的，我不想在回调中进行重定向，所以我现在尝试通过使用 .Ajax 并将 Async 设置为 false 来返回值。我现在返回`[Object object]`下面的代码。有人可以解释现在我将 async 设置为 false 并帮助我返回值的区别吗？

```
var request = $.ajax({
        url: 'Action/Controller',
        type: 'post',
        async: false
      });

      var result = request.done(function (data) {
        return data;
      });
      alert(result); // [Object object] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:26:45.470

您应该检查`dataType`jQuery ajax 调用的参数。根据您想要的返回值，显式设置数据类型（xml、json、text、...）可能是一个好习惯

如果您返回一个 json，它将被转换为一个 JavaScript 对象。根据您的警报，我假设是这种情况。

试试这个 mod 来获取一个字符串：

```
var request = $.ajax({
    url: 'Action/Controller',
    type: 'post',
    dataType: 'text',
    async: false
});

alert(request.responseText); // [now it will be outputted as text] 
```

在同步 ajax 调用`request`中将被填充为一个对象，因此您必须使用它的一个属性来提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:23:15.227

你不能从那里回来。使用 ajax 你必须以不同的方式构造你的代码，IE 你可以在回调中重定向

```
function isAuthorised() {
  $.post("Action/Controller", function (data) {
    if (!data) {
        //redirect
    }
  });
} 
```

无论如何，用javascript检查授权对我来说没有意义，你应该在提供页面服务器端之前这样做

# javascript - 从 html 请求中解析 json

> ID：14626762
> 
> 赞同：0
> 
> 时间：2013-01-31T13:19:54.327
> 
> 标签：javascript, json

当我想通过 javascript 请求获取 JSON 数据时，我`origin is not allowed b access-control-allow-origin`遇到了错误，但是当我在浏览器上输入 JSON 数据的 url 时，我可以成功读取数据。

有没有办法以某种方式从浏览器页面获取 JSON 数据？

# regex - double(10,2) 上的正则表达式

> ID：14626763
> 
> 赞同：1
> 
> 时间：2013-01-31T13:19:56.823
> 
> 标签：regex

我有这个正则表达式

```
[0-9]+(,[0-9][0-9]?)? 
```

它匹配 345563,24 但如何将左侧部分限制为 8 个字符？
88888888,00 - true 因为 8 个字符
999999999,00 - false 因为 9 个字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:24:32.387

用这个：

```
[0-9]{0,8}(,[0-9][0-9]?)? 
```

`{m,n}`表示前一个字符/组的最小和最大出现次数。您可以通过将表达式的一侧留空来指示最小值或最大值。所以上面的表达式允许一个数字出现 0 到 8 次。如果您希望在表达式开头出现 1 到 8 个数字，请使用以下命令：

```
[0-9]{1,8}(,[0-9][0-9]?)? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:30:36.177

我会做 ：

```
 ^[1-9][0-9]{,7}(,[0-9][0-9]?)?$ 
```

*   数字 (10,2) 将被匹配
*   空字符串将不匹配
*   第一个数字不应为 0（零）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:44:51.517

[从@Kent](https://stackoverflow.com/a/14626942/486504)和[@user1775603](https://stackoverflow.com/a/14626838/486504)的答案中借用元素，我会尝试以下方法：

```
^([1-9][0-9]{0,7}|0)(,[0-9][0-9])?$ 
```

这将匹配：

*   任何以非零开头的最多八位数字，逗号后有零位或两位小数
*   任何数字 >= 0 和 < 1，逗号后有零或两位小数（匹配数字`0,xx`在哪里`x`）

请注意，小数分隔符，除非您注意不这样做，否则通常取决于语言环境。究竟如何解决这个问题取决于您使用的语言和/或框架，但这是需要注意的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:54:33.653

我会推荐`\b`而不是`^`和`$`：

```
\b([1-9][0-9]{0,7}|0)(,[0-9][0-9]?)?\b 
```

这样输入就不需要单独输入，也可以在大文本的中间找到。

# jsf-2 - 如何在 selectOneMenu 中对 selectItems 进行分组

> ID：14626764
> 
> 赞同：9
> 
> 时间：2013-01-31T13:19:59.097
> 
> 标签：jsf-2, primefaces, selectonemenu

我想使用 primefaces[展示](http://www.primefaces.org/showcase-labs/ui/selectOneMenu.jsf)中的示例对 selectOneMenu 中的 selectItems 进行分组：

```
<h:outputText value="Grouping: " />  
    <p:selectOneMenu value="#{formBean.car}">  
        <f:selectItem itemLabel="Select One" itemValue="" />  
        <f:selectItems value="#{formBean.cars}" />  
    </p:selectOneMenu> 
```

我的问题是，没有 bean 的实现。现在我不知道，如何在getCars() 方法中实现selectItems 的分组。我找不到任何其他例子。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T14:15:23.040

展示的源代码`#{formBean}`可[在此处](http://primefaces.googlecode.com/svn/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/FormBean.java)获得。这是相关性的摘录：

```
private List<SelectItem> cars;

public FormBean() {
    SelectItemGroup g1 = new SelectItemGroup("German Cars");
    g1.setSelectItems(new SelectItem[] {new SelectItem("BMW", "BMW"), new SelectItem("Mercedes", "Mercedes"), new SelectItem("Volkswagen", "Volkswagen")});

    SelectItemGroup g2 = new SelectItemGroup("American Cars");
    g2.setSelectItems(new SelectItem[] {new SelectItem("Chrysler", "Chrysler"), new SelectItem("GM", "GM"), new SelectItem("Ford", "Ford")});

    cars = new ArrayList<SelectItem>();
    cars.add(g1);
    cars.add(g2);
} 
```

因此，您缺少的关键是[`SelectItemGroup`](http://docs.oracle.com/javaee/6/api/javax/faces/model/SelectItemGroup.html).

### 也可以看看：

*   [我们的`selectOneMenu`wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)- “动态列表与组”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:28:00.770

在此示例`getCars()`中返回`javax.faces.model.SelectItem`对象列表。这个类有一个子类，命名为`SelectItemGroup`代表`selectOneMenu`. 此对象的值字段被忽略，仅使用标签。因此，在您的列表中，您可以混合`SelectItem`和`SelectItemGroup`对象来分组组织您的列表。请注意，`SelectItem`属于组的对象在对象中作为数组存在`SelectItemGroup`。您可以通过构造函数或 setter ( `setSelectItems()`) 设置该数组。

# c# - 在没有为 Wpf 产品安装 MS Office 的情况下导出到 Excel

> ID：14626765
> 
> 赞同：2
> 
> 时间：2013-01-31T13:20:02.417
> 
> 标签：c#, wpf, excel, export-to-excel, binaries

我有一个小型 wpf 产品，需要在客户端机器上未安装 excel 的情况下将数据导出到 excel。如何在 C# 中实现这一点。导出后，此 excel 可以通过 Open Office 打开。我想要的只是将 excel 文件保存到客户端硬盘。即使没有安装excel，他也应该可以保存文件，没有excel可能无法读取文件，但应该可以保存。我不想任何第 3 方或其他一些开放的 xml。最近我下载了一个产品，它能够在没有安装 excel 的情况下导出到 excel 并且能够用 open office 打开它。

当我检查他们的二进制文件时，它们只包含 office.dll、Microsoft.Vbe.Interop.dll 和 Microsoft.Office.Interop.Excel.dll。我想知道他们如何使用这些 dll 进行管理。

我已经为此编写了代码，但是在未安装 excel 时它会中断。

我已经阅读了许多与此相关的开放 xml 和其他内容，但并不满意。我的要求太简单了，只是将数据表数据导出到excel，不读回数据，也不用excel做花哨的操作。

请给我建议和链接将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:25:52.587

要么使用 CSV 格式，要么你可能喜欢使用[EPPlus](http://epplus.codeplex.com/)库。[在此处](https://stackoverflow.com/questions/10528754/export-to-excel-c-sharp/10528825#10528825)查看类似的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:48:32.853

您可以使用 CSV、XML 或 ADO

[如何使用 ADO.NET 通过 Visual Basic .NET 检索和修改 Excel 工作簿中的记录](http://support.microsoft.com/kb/316934)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:47:32.363

xslt 改造也能胜任。我用它来导出 wpf datagrid 数据。

# c# - DLL 中的 ResolveEventHandler（类库）

> ID：14626773
> 
> 赞同：3
> 
> 时间：2013-01-31T13:20:24.037
> 
> 标签：c#, events, dll, assemblyresolve

在 C# 中，如果外部 dll 不在应用程序目录中，则有 ResolveEventHandler 事件来加载它们。

要在 winform 应用程序中使用它，我在 Program.cs Main() 函数中注册事件，如下所示：

```
AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(ResolveAssembly); 
```

然后是每次触发事件时都会调用的 ResolveAssembly 函数：

```
 static Assembly ResolveAssembly(object sender, ResolveEventArgs args)
    {
        //MessageBox.Show(String.Format("Assembly {0} is missing", args.Name));

        //This handler is called only when the common language runtime tries to bind to the assembly and fails.

        //Retrieve the list of referenced assemblies in an array of AssemblyName.
        Assembly MyAssembly, objExecutingAssemblies;
        string strTempAssmbPath = "";
        string AssemblyName = new AssemblyName(args.Name).Name;

        objExecutingAssemblies = Assembly.GetExecutingAssembly();
        AssemblyName[] arrReferencedAssmbNames = objExecutingAssemblies.GetReferencedAssemblies();

        //Loop through the array of referenced assembly names.
        foreach (AssemblyName strAssmbName in arrReferencedAssmbNames)
        {
            //Check for the assembly names that have raised the "AssemblyResolve" event.
            if (strAssmbName.Name == AssemblyName)
            {
                //Build the path of the assembly from where it has to be loaded.                
                strTempAssmbPath = @"C:\PowerVision\libraries\" + AssemblyName + ".dll";
                break;
            }

        }
        //Load the assembly from the specified path.                    
        MyAssembly = Assembly.LoadFrom(strTempAssmbPath);

        //Return the loaded assembly.
        return MyAssembly;
    } 
```

问题是如何在/从类库中添加/调用此事件？

我有一个类库（DLL），它有 3 个对外部 DLL 的引用。我不想将这些 dll 复制到应用程序目录中，也不想将它们放入应用程序的子目录中。这些 DLL 应保留在特定的外部文件夹中（因此使用事件）。

问题是我不知道在 DLL（类库）中将这个事件注册放在哪里：

```
AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(ResolveAssembly); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T03:15:36.210

You just need to put the event registration in your DLL in a place that gets called sometime BEFORE any of your 3 external DLLs get referenced.

A constructor of an object in your top DLL would be the first place to look. However, if that object is a sub-type of an object that is in one of those 3 external DLLs, then you may need to create a parent object for that object, and call the parent object first, and add the event registration in that parent's constructor.

E.g. if your DLL is a UserControl that is based on another UserControl that is in one of those 3 external DLL's, like this:

```
public partial class TopLevelUserControl: ExternalDllUserControl
{
    InitializeComponent();
} 
```

then you may need to write code like this: Create a new user control called TopLevelUserControlLauncher, and place TopLevelUserControl in that userControl, docked. Then write code like this:

```
public partial class TopLevelUserControlLauncher: UserControl
{
    AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(ResolveAssembly);
    InitializeComponent(); // this will construct TopLevelUserControl
} 
```

# java - 为什么 Java 小程序可以在 Windows 上运行，但不能在 Mac 10.6.8 上运行？

> ID：14626781
> 
> 赞同：0
> 
> 时间：2013-01-31T13:20:51.900
> 
> 标签：java, macos, applet, osx-snow-leopard

我正在使用 webmin，我想在其中使用名为“文件管理器”的插件。
它基于 Java Applet，可与 Windows XP 上的 Internet Explorer 完美配合。

但是在 MacOSX 10.6.8 上使用 Safari，它会显示“非活动插件”，并且不会显示任何内容。
如果我点击它，MacOSX 开始检查是否有新的更新。
但是没有更新。

我花时间研究这个。然后我发现了这个。

> 转到 java 首选项 => 单击启用小程序插件和 Web 启动应用程序。

它已经启用...

我不知道我能做什么。直到昨天我才能使用这个“文件管理器”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:02:36.533

10.6有同样的问题

找到[了这个](http://derflounder.wordpress.com/2013/01/)。

我个人将其中的版本更改为，`XProtect.meta.plist`而`434`不是`435`重新启用插件。

# mysql - MySql 如果不存在则插入两列对否则更新

> ID：14626782
> 
> 赞同：3
> 
> 时间：2013-01-31T13:20:51.543
> 
> 标签：mysql, sql, sql-insert

我有这样的Mysql表

```
CREATE  TABLE IF NOT EXISTS tbl_member_doc_read (
`read_id` INTEGER(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT ,
`member_id` INTEGER(10) UNSIGNED NOT NULL ,
`doc_id` INTEGER(10) UNSIGNED NOT NULL ,
`status` INTEGER(1) DEFAULT '0',
FOREIGN KEY (`member_id`) REFERENCES tbl_member(`member_id`),
FOREIGN KEY (`doc_id`) REFERENCES tbl_doc(`doc_id`)
) ENGINE=InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

假设该表的示例数据 id

```
read_id  member_id  doc_id  status
 1          1           1       1
 2          1           2       0
 3          2           2       1 
```

现在我想在该表中插入如果组合或对 (member_id,doc_id) 存在，否则如果状态为 0，则更新状态。这是我使用的 sql 查询

```
INSERT INTO tbl_member_doc_read (member_id, doc_id, status) VALUES(1,2,1) ON DUPLICATE KEY UPDATE status = VALUES(status) WHERE status = 0; 
```

它应该用数据 2 1 2 1 更新第二行

如果我插入这个

```
INSERT INTO tbl_member_doc_read (member_id, doc_id, status) VALUES(2,1,0) ON DUPLICATE KEY UPDATE status = VALUES(status) WHERE status = 0; 
```

它应该插入一个带有数据 4 2 1 0 的新行

但我无法解决这个问题。而且我认为在 innodb 引擎中，member_id 和 doc_id 被引用到另一个表的主键，它们是唯一的。在 innodb 中我无法创建唯一索引。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:26:18.297

为了使`ON DUPLICATE KEY UPDATE`语句生效，您需要`unique`在两列上定义键，

```
CREATE  TABLE IF NOT EXISTS tbl_member_doc_read 
(
`read_id` INTEGER(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT ,
`member_id` INTEGER(10) UNSIGNED NOT NULL ,
`doc_id` INTEGER(10) UNSIGNED NOT NULL ,
`status` INTEGER(1) DEFAULT '0',
FOREIGN KEY (`member_id`) REFERENCES tbl_member(`member_id`),
FOREIGN KEY (`doc_id`) REFERENCES tbl_doc(`doc_id`),
CONSTRAINT tb_uq UNIQUE (member_id, doc_id)
) ENGINE=InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

然后删除该`WHERE`子句

```
INSERT INTO tbl_member_doc_read (member_id, doc_id, status) 
VALUES(1,2,1) 
ON DUPLICATE KEY UPDATE 
status = VALUES(status) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5e782/1)

# vb.net - 检索数据库架构 Linq 到 SQL VB.Net

> ID：14626785
> 
> 赞同：2
> 
> 时间：2013-01-31T13:21:15.187
> 
> 标签：vb.net, linq, linq-to-sql, mapping, schema

我想检索每个列名和数据类型，然后检查列是否是外键，然后查询该关系的键表！！！可以做吗？？我用谷歌搜索了 3 天，我知道我必须使用映射模型或反射或两者，但我做不到。

我将简化我需要的假设： TABLE1 hase 外键（COL3）指的是 TABLE0 中的主键（COL1）：

1.  迭代 TABLE1 列检查每个列是否是外键（也获取其数据类型）

2.  获取关系以确定关联表（TABLE0）

3.  检索主键表 (TABLE0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:04:27.007

我知道了，我做了一个函数，返回每个外键的类型和相关的表类类型

```
Private Function GetForeignKeyTables(ByVal myTableType As Type) As List(Of myForeignKeys)

    Dim myDx = New Tester.DataClasses1DataContext
    Dim mymodel As New AttributeMappingSource

    Dim myAsociations = mymodel.GetModel(GetType(DataClasses1DataContext)).GetTable(myTableType).RowType.Associations

    Dim asc = From m In myAsociations Where m.IsForeignKey
               Select New myForeignKeys With {.KeyDataType = m.ThisKey.First.DbType, .RelatedTableType = m.OtherType}

    Return asc.ToList

End Function

Private Class myForeignKeys
    Property KeyDataType As String
    Property RelatedTableType As MetaType

End Class 
```

但我仍然需要从那些相关表中检索数据。

我的意思是如何从其 MetaType 变量创建类的实例？

# git - Git+Heroku：如何从新分支部署代码？

> ID：14626789
> 
> 赞同：0
> 
> 时间：2013-01-31T13:21:21.730
> 
> 标签：git, heroku, git-branch

在 localhost 上的项目中，我创建了一个新分支（我们称之为它`update1`）并在那里提交了新的更新。然后我把它推到 Heroku。

当我在 Heroku 上打开项目时，仍然有来自原始（主）分支的数据，而不是来自`update1`.

如何显示`update1`分支中的新修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:01:28.587

```
git push heroku update1:master 
```

成功了。

# google-bigquery - 我可以安全地查询被替换为 WRITE_TRUNCATE 的 BigQuery 表吗

> ID：14626793
> 
> 赞同：5
> 
> 时间：2013-01-31T13:21:35.463
> 
> 标签：google-bigquery

如果在加载作业期间[`configuration.load.writeDisposition`](https://developers.google.com/bigquery/docs/reference/v2/jobs#configuration.load.writeDisposition)设置为`WRITE_TRUNCATE`，是否有一段时间查询表会引发错误？

*   *作业被标记为PENDING*和/或*RUNNING*的整个期间？
*   在加载作业结束时更换桌子的小时刻？

会是什么错误？*status.errors[].reason => "notFound"*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:35:08.110

WRITE_TRUNCATE 是原子的，并在加载作业结束时应用。因此，在此期间发生的任何查询都只会看到旧数据或所有新数据。在任何情况下都不会出现查询表时出错的情况。

如果加载失败，那么表应该没有变化，如果加载成功，所有数据应该立即出现在表中。

如果该表尚不存在，并且加载作业指定了 CREATE_IF_NEEDED，则在加载作业完成之前查询该表将不会找到。

我们正在对文档进行重写，以使这一点更加清晰。

# excel - Excel中计算IRR的数值方法是什么？

> ID：14626795
> 
> 赞同：0
> 
> 时间：2013-01-31T13:21:38.753
> 
> 标签：excel, excel-formula

我想知道在 Excel 中用于计算 IRR 函数的数值方法是否已知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:07:06.820

Excel 文档指出它使用 Newton Raphson 方法进行 IRR 计算

但是我使用 Excel IRR 对样本数据的测试和我自己的 IRR 代码在许多情况下使用默认种子值显示了不同的结果，这让我认为这是他们应用于 Excel IRR 函数的牛顿拉夫森方法的一种改变形式

# c# - 为什么在控制台应用程序中做截图时html页面是内存增长的

> ID：14626796
> 
> 赞同：1
> 
> 时间：2013-01-31T13:21:44.583
> 
> 标签：c#, memory-management, console, browser, screenshot

为什么c#控制台应用程序，在循环截取html页面的时候——应用程序占用的内存数量增长了？它工作得越多，音量就越大。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Drawing;
using System.Windows.Forms;

namespace ConsoleAppScreenShot
{
class Program
{
static String pathApp = System.Windows.Forms.Application.StartupPath.ToString();
static string url = "http://www.ya.ru";
static int width = 960, height = 1380;
static bool isDownloadScreenComplete = false;

[STAThread]
static void Main(string[] args)
{
    Console.WriteLine("hi");

    try
    {
        for (int i = 0; i < 100; i++)
        {
            isDownloadScreenComplete = false;
            RunGenerateScreenshotThread(url, i);

            int number = 0;
            while (!isDownloadScreenComplete) // 5-ти минутный цикл ожидания скрина
            {
                Thread.Sleep(100);
                if (number > 3000)
                    throw new Exception(string.Format(" Ошибка цикла ожидания потока закачки снимка экрана. Ожидание составляет: {0} минут.", (number / 600).ToString()));

                number++;
            }
        }

        Console.ReadKey(true);
    }
    catch (Exception ex)
    {
        Console.WriteLine("Ошибка: {0}", ex.Message);
    }
}

static void RunGenerateScreenshotThread(string url, int count)
{
        var th = new Thread(() =>
        {
            WebBrowser wb = new WebBrowser();
            // Set the size of the WebBrowser control
            wb.Width = width;
            wb.Height = height;

            //wb.DocumentCompleted += GenerateScreenshotCompleted;
            wb.Navigate(url);
            while (wb.ReadyState != WebBrowserReadyState.Complete) { System.Windows.Forms.Application.DoEvents(); }
            try
            {
                // Get a Bitmap representation of the webpage as it's rendered in the WebBrowser control
                Bitmap bitmap = new Bitmap(wb.Width, wb.Height);
                wb.DrawToBitmap(bitmap, new Rectangle(0, 0, wb.Width, wb.Height));
                wb.Dispose();

                // Save Thumbnail to a File
                bitmap.Save(string.Format("d:\\1\\Screenshot{0}.png", count), System.Drawing.Imaging.ImageFormat.Png);
                bitmap.Dispose();

                count++;
                Console.WriteLine("Natigated to OK {0}", count);
            }
            catch (Exception ex)
            {
                Console.WriteLine("Ошибка: {0}", ex.Message);
            }
            finally
            {
                isDownloadScreenComplete = true;
                Application.ExitThread();   // Stops the thread
            }
        });
        th.SetApartmentState(ApartmentState.STA);
        th.Start();
}
}
} 
```

* * *

在一些迭代挂起等待大约 5 分钟后，使用 WebBrowser 流：

```
while (wb.ReadyState != WebBrowserReadyState.Complete) 
 { System.Windows.Forms.Application.DoEvents(); } 
```

其中状态的值为：

```
wb.ReadyState == Uninitialized or Interactive 
```

最终返回页面“导航取消” - 或返回它有 5 分钟的延迟。

1.  如果我的系统是IE8，为什么WebBrowser组件使用IE作为第七版？
2.  为什么 WebBrowser 组件停止给页面？
3.  为什么内存量会因应用程序而增加并占用大约 800 mb？

我的任务是使用控制台应用程序将显示的页面保存到硬盘驱动器。也许我们可以以某种方式将pdf格式保存在其中，这样您就可以看到页面的HTML内容。

我很高兴收到任何有价值的评论。

```
class Program
{
static string url = "http://www.whatbrowser.org";
static int width = 960, height = 1380;
static int count = 0;

[STAThread]
static void Main(string[] args)
{
    Console.WriteLine("hi");

    try
    {
        int number = 1000;
        for (int i = 0; i < number; i++)
        {
            var th = new Thread(obj => RunGenerateScreenshotThread((string)obj));
            th.SetApartmentState(ApartmentState.STA);
            th.Start(url);
            th.Join();

            count++;
        }

        Console.WriteLine("All successfully completed!");
        Console.ReadKey(true);
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error: {0}", ex.ToString());
    }
}

static void RunGenerateScreenshotThread(string url)
{
    try
    {
        using (WebBrowser wb = new WebBrowser())
        {
            // Set the size of the WebBrowser control
            wb.Width = width;
            wb.Height = height;
            wb.Navigate(url);

            while (wb.ReadyState != WebBrowserReadyState.Complete) 
              { System.Windows.Forms.Application.DoEvents(); }

            if (wb.DocumentTitle == "Navigation Canceled")
                Console.WriteLine("Natigated ERROR {0}", count);
            else
                Console.WriteLine("Natigated OK {0}", count);
            }
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error: {0}", ex.ToString());
    }
    finally
    {
        Application.ExitThread();   // Stops the thread
    }
}
} 
```

# git - Bitbucket 存储库

> ID：14626797
> 
> 赞同：3
> 
> 时间：2013-01-31T13:21:55.777
> 
> 标签：git, bitbucket

我创建了一个 Bitbucket 帐户，用于与朋友共享代码。当我尝试克隆存储库时，使用命令

```
$ git clone https://wallstrass@bitbucket.org/wallstrass/wall-strass.git 
```

他们说 ：

```
$ git clone https://wallstrass@bitbucket.org/wallstrass/wall-strass.git
Cloning into 'wall-strass'...
fatal: https://wallstrass@bitbucket.org/wallstrass/wall-strass.git/info/refs not
found: did you run git update-server-info on the server? 
```

我尝试执行命令“git update-server-info”，但它不起作用。我不明白该怎么做，请问您有什么想法吗？

[更新]这是我的命令：

```
XXXX-PC /c/repos (master)
$ export http_proxy="http://XXXXX"

XXXX /c/repos (master)
$ export https_proxy="https://XXXXX"

XXXX /c/repos (master)
$ cd c:/repos

XXXX /c/repos (master)
$ git init
Reinitialized existing Git repository in c:/repos/.git/

XXXX /c/repos (master)
$ git remote add origin https://wallstrass@bitbucket.org/wallstrass/wall-strass
.git
fatal: remote origin already exists.

XXXX /c/repos (master)
$ echo "# This is my README" >> README.md

XXXX /c/repos (master)
$ git add README.md
warning: LF will be replaced by CRLF in README.md.
The file will have its original line endings in your working directory.

XXXX /c/repos (master)
$ git commit -m "First commit. Adding a README."
# On branch master
nothing to commit (working directory clean)

XXXX /c/repos (master)
$ git push -u origin master
fatal: https://wallstrass@bitbucket.org/wallstrass/wall-strass.git/info/refs not
 found: did you run git update-server-info on the server? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:29:48.747

如果你还没有在那里推送任何东西，那么就没有任何东西可以克隆。

完成第一次提交后，将其推送到 bitbucket，然后您应该能够克隆存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:35:42.940

听起来 HTTPS 传输在某种程度上是 b0rked。尝试使用 ssh 传输进行克隆：

```
git clone git@bitbucket.org:wallstrass/wall-strass.git 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-25T05:04:55.990

把这个[https://wallstrass@bitbucket.org/wallstrass/wall-strass.git](https://wallstrass@bitbucket.org/wallstrass/wall-strass.git)代替

$ git clone [https://wallstrass@bitbucket.org/wallstrass/wall-strass.git](https://wallstrass@bitbucket.org/wallstrass/wall-strass.git)

# javascript - jquery - 在表单重新加载时显示文本区域和标签是选中的单选按钮

> ID：14626803
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:22:03.263
> 
> 标签：javascript, jquery, zend-form

我正在设计一个 zend 驱动的表单，所以不想更改标记。

我试图在单选按钮值为 no 时隐藏 textarea 和它的标签，但当它是时 textarea 和标签应该出现。

我遇到的问题是，如果选择 yes 后 textarea 没有填写，并且按下了提交按钮，zend 会显示它自己的错误消息，这很好，但是由于提交操作导致页面重新加载，它保留了 yes 的值在表单上但隐藏了文本区域和标签，因此您必须重新单击“是”值才能让它们再次出现。

目标 - 如果选择 yes 按钮，则会出现 textarea 和 label，但如果未填写 textarea 并点击提交按钮，则会出现错误，但仍然选择 yes 值并且 textarea 和 label 仍然可见，直到没有被击中！

到目前为止我的代码 -

```
$(function(){
    if ($('#declarations-refused-y').is(':selected')) {
        $('#declarations-refusedText-label, #declarations-refusedText-element').show();
    }
    else {
        $('#declarations-refusedText-label, #declarations-refusedText-element').hide();
    }          
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:25:07.630

使用`:checked`而不是`:selected`.

```
$(function(){
  if ($('#declarations-refused-y').is(':checked')) {
    $('#declarations-refusedText-label, #declarations-refusedText-element').show();
  } else {
    $('#declarations-refusedText-label, #declarations-refusedText-element').hide();
  }          
}); 
```

# c# - 在 IEnumerable 的所有成员上调用方法

> ID：14626805
> 
> 赞同：3
> 
> 时间：2013-01-31T13:22:05.663
> 
> 标签：c#, linq, extension-methods

我最近一直在玩一些 c# 扩展，我有一个问题。我为 IEnumerables 做了一个“ForEach”扩展（List 有一个来自 Linq，尽管 IEnumerables 不存在。）这是一个非常简单的扩展：

```
public static void ForEach<T> (this IEnumerable<T> source, Action<T> action)
{
    foreach (T element in source) {
        action(element);
    }
} 
```

你称之为`MyArray.ForEach(element=>element.ElementMethod());`

虽然现在我想知道，我可以更进一步，让它像：`MyArray.ForEach(ElementMethod);`？

编辑：已经有一些有趣的答案，虽然我正在尝试这样的事情：

```
public static void CallOnEach<T> (this IEnumerable<T> source, Action action)
{
    foreach (T element in source) {
        element.action();
    }
} 
```

当然编译器不知道'action'是T的一个方法，所以这不起作用:(也许有办法确保编译器这样做？像`public static void CallOnEach<T> (this IEnumerable<T> source, Action action) where action isFunctionOf T`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:28:22.227

如果`ElementMethod`是类型`Action<T>`，您现在可以将它与您的扩展一起使用。它与`static void`type 的方法相同`T`：

```
public static void ElementMethod<T>(T parameter){}

//or

public static void ElementMethod(MyElement element){} 
```

*但是没有办法让它更通用。你不能在你的元素上调用一些方法而不参考它。*

*恕我直言：没什么大不了的。您只保存了几个字符。*

```
MyArray.ForEach(e=>e.ElementMethod());
MyArray.ForEach(ElementMethod);1234567 - // characters saved ;-) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:26:37.690

您可以使 ElementMethod 成为扩展方法，并且可以执行后者

# asp.net-mvc-3 - 在 mvc4 中没有回发的分页

> ID：14626811
> 
> 赞同：1
> 
> 时间：2013-01-31T13:22:45.510
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, paging

我必须在没有回发的情况下在 MVC4 中实现分页。我已经使用回发实现了分页。

```
public ActionResult Index(int? page)
{
    var model = from r in db.Country                        
                orderby r.Description ascending
                select r;
    int pageSize = 10;
    int pageNumber = (page ?? 1);
    return View(model.ToPagedList(pageNumber, pageSize));           
} 
```

我在视图中使用了以下代码

```
<div id="pagelist">
Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

@if (Model.HasPreviousPage)
{
    @Ajax.ActionLink("<<", "Index", new { page = 1 },null)
    @Html.Raw(" ");
    @Ajax.ActionLink("< Prev", "Index", new { page = Model.PageNumber - 1 },null)
}
else
{
    @:<<
    @Html.Raw(" ");
    @:< Prev
}

@if (Model.HasNextPage)
{
    @Ajax.ActionLink("Next >", "Index", new { page = Model.PageNumber + 1 },null)
    @Html.Raw(" ");
    @Ajax.ActionLink(">>", "Index", new { page = Model.PageCount },null)
}
else
{
    @:Next >
    @Html.Raw(" ")
    @:>>
} 
```

这段代码实现了分页。但是每次当我点击下一个链接时，页面都会刷新。我想要不刷新页面的分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:06:54.993

你会想看看`Partial Views`and `Ajax.BeginForm`。这将允许您通过 ajax 获得新结果，而不会导致页面回发。

这篇博文：http: [//blachniet.com/2011/08/10/partial-views-with-unobtrusive-ajax/](http://blachniet.com/2011/08/10/partial-views-with-unobtrusive-ajax/)可以帮助您入门。

# c++ - 合并排序 c 异常 OOR UPD::output 问题

> ID：14626813
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:22:58.893
> 
> 标签：c++, recursion, output, mergesort

在尝试使用递归调用创建这种合并排序算法时，我最终得到了 std::out_of_range 的异常。

我对调试和查找错误原因了解不多。下面我将发布代码（不完整，只有部分）和包含相同代码的源文件（当然是完整版）。

我很乐意听取建议，即使他们没有针对此错误提供任何帮助，所以请随时评论此代码并开我的玩笑:)

[https://docs.google.com/file/d/0ByVN9ccAyFY2dkVLN0ZlTWVHZG8/edit](https://docs.google.com/file/d/0ByVN9ccAyFY2dkVLN0ZlTWVHZG8/edit)

主要功能

```
int main()
{
vector<int> original;   //input vector
input (&original);      //write input to vector<int> original

divide(&original);      //pass the vector

for(unsigned int i=0;i<original.size();i++)//output the results
cout<<original.at(i);
} 
```

输入功能

```
 int input(vector<int> *inVec) //read all input until non-integer
{
int tmp;
while (cin>>tmp)
inVec->push_back(tmp);
for(unsigned int i=0;i<inVec->size();i++)
cout<<inVec->at(i)<<endl;
} 
```

划分

```
int divide(vector<int> *original)
{
int origL=original->size();
if(origL>1)
{
vector<int> first;      //vectors for holding 2 halfs of "original"
vector<int> second;     //

first.assign(original->begin(),original->begin()+origL/2);//1st half of "original"
second.assign(original->begin()+origL/2+1,original->end());//2nd half

divide(&first);     //recursive call until "first" and
divide(&second);    //"second" include only one number

merge(&first,&second,original);//merge first and second back into one vector
}
} 
```

合并函数

```
int merge(vector<int> *A,vector<int> *B,vector<int> *original)
{
//clear the original vector. we will use it to store sorted results.
original->erase(original->begin(),original->end());
unsigned int i=0,j=0;                                   

//out the smallest number from A and B into
//original[0] and so on. This makes it a 
//sorting algorithm.
for(i=0;i<A->size();i++)
{
if(j<B->size())
    if(A->at(i)<=B->at(j))
        original->push_back(A->at(i));
    else{
        original->push_back(B->at(j));
        i--;j++;}
}
//the ABOVE loop scans whole vector A or B.
//if there are still uncopied elements in
//the other vector, then we check for them and
//push them into original.
if(j<B->size())
    for(i=j;i<B->size();i++)
        original->push_back(B->at(i));
if(i<A->size())
    for(j=i;j<A->size();j++)
        original->push_back(A->at(j));

return EXIT_SUCCESS;
} 
```

EDIT1：对 MERGE 进行了更改，因此现在没有运行时错误。但是，输出不对。如果有人注意到可能导致问题的原因，请告诉我。同时，我将尝试自己找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:25:42.510

`B`当函数中的元素用完时会发生什么`merge`？哦。`B`当所有元素都小于其中的元素时尝试一个测试用例，`A`并且只调用 merge 来了解我的意思。

这也是c ++，请优先使用引用而不是指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:34:59.387

*您的合并*函数中存在错误，您应该测试向量*B*或向量*A*是否为空，否则访问向量将导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:07:08.360

下一部分不正确：

```
first.assign(original->begin(),original->begin()+origL/2);
second.assign(original->begin()+origL/2+1,original->end()); 
```

Fe 当你有 origL==2 时，第一个向量将为 { original[0] }，第二个向量将为空。您必须为第二个向量重新实现填充：

```
second.assign(original->begin()+origL/2,original->end()) 
```

# jquery - JScrollpane 斜体 IE8 无法正常工作

> ID：14626816
> 
> 赞同：0
> 
> 时间：2013-01-31T13:23:08.520
> 
> 标签：jquery, jscrollpane

我使用 JScrollpane 版本 12，但在早期版本中也有同样的问题。

当我将段落或长句设为斜体时，文本会位于 IE8 中的垂直滚动条下方。所有其他浏览器和版本都运行良好，但 IE8 不行。

有人可以帮我为 IE8 解决这个问题吗？当我将斜体改回正常字体时，IE8 工作正常

提前致谢， 米贾姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:55:43.220

找到了解决方案！

文本所在的 div 有这个 css：

```
.content {
     width: 100%;
} 
```

当您像这样向 div添加**最大宽度时：**

```
.content {
     width: 100%;
     max-width: 700px; // change the width to the width of your text div
} 
```

最大宽度确保在**IE8**中使用斜体时文本块不会中断。

# java - Gwt 检查对象是否有焦点

> ID：14626819
> 
> 赞同：1
> 
> 时间：2013-01-31T13:23:14.583
> 
> 标签：java, gwt, focus

> **可能重复：**
> [为什么 GWT 中没有 isFocused()？](https://stackoverflow.com/questions/7394297/why-is-there-no-isfocused-in-gwt)

大家好，可以检查特定对象是否有焦点？我的网络应用程序中的问题是确定当我按下选项卡按钮时哪个对象具有焦点，对于每个焦点我需要执行特定操作。谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-31T14:48:06.627

这已经在这里解决了 -[为什么 GWT 中没有 isFocused() ？](https://stackoverflow.com/questions/7394297/why-is-there-no-isfocused-in-gwt)

请使用stackvoverflow搜索！！！！

# x++ - 插入新记录时动态链接被清除

> ID：14626828
> 
> 赞同：1
> 
> 时间：2013-01-31T13:23:44.043
> 
> 标签：x++, axapta, dynamics-ax-2012

我在 AX 2012 中有一个表单，我从中调用另一个子表单，该表单显示与父表单（动态链接）中所选记录相关的记录。

现在，当我尝试在子表单中创建新记录时，此表单与其父表单之间的动态链接被清除，子表单开始根据其数据源显示所有数据，而不是任何我不想要的过滤记录.

我想知道，如何在子表单中创建新记录时坚持使用动态链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:52:40.803

检查您的网格是否确实属于正确的数据源。如果没有，就会发生奇怪的事情。

# maven - 在 maven 配置文件更改属性后强制 maven 程序集插件运行

> ID：14626832
> 
> 赞同：2
> 
> 时间：2013-01-31T13:23:55.517
> 
> 标签：maven, maven-plugin, maven-assembly-plugin, maven-profiles

我正在使用带有配置文件的 maven 程序集插件来生成具有应用程序结构的 zip 文件并保证路径正确：

```
<profiles>
    <profile>
        <id>desenvolvimento</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <arquivo_tef4j>classpath:tef4j.properties</arquivo_tef4j>
            <arquivo_bd>classpath:bancoDados.properties</arquivo_bd>
            <arquivo_aplicacao>classpath:aplicacao.properties</arquivo_aplicacao>
            <modelo_dav>classpath:modelos_relatorio/dav.rptdesign</modelo_dav>
        </properties>
    </profile>
    <profile>
        <id>producao</id>
        <properties>
            <arquivo_tef4j>file:../config/tef4j.properties</arquivo_tef4j>
            <arquivo_bd>file:../config/bancoDados.properties</arquivo_bd>
            <arquivo_aplicacao>file:../config/aplicacao.properties</arquivo_aplicacao>
            <modelo_dav>file:../modelos/dav.rptdesign</modelo_dav>
        </properties>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jar-plugin</artifactId>
                    <configuration>
                        <finalName>${project.artifactId}</finalName>
                        <archive>
                            <manifest>
                                <addClasspath>true</addClasspath>
                                <classpathPrefix>../lib/</classpathPrefix>
                                <mainClass>com.hrgi.pdv.App</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <configuration>
                        <descriptors>
                            <descriptor>src/main/assembly/assembly.xml</descriptor>
                        </descriptors>
                        <archive>
                            <manifest>
                                <mainClass>com.hrgi.pdv.App</mainClass>
                            </manifest>
                        </archive>
                    </configuration>
                    <executions>
                        <execution>
                            <id>make-assembly</id>
                            <phase>package</phase>
                            <goals>
                                <goal>single</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

名为“desenvolvimento”的配置文件用于与 IDE 一起开发，另一个配置文件用于生成生产的 zip 文件。如您所见，配置文件的差异基本上在于属性值。当我使用“desenvolvimento”配置文件时，它们运行良好，但是第二个配置文件中的属性“modelo_dav”有一些问题。该属性在“aplicacao.properties”中使用，但程序集插件复制“aplicacao.properties”而不更改属性${modelo_dav}，如果我打开jar文件“aplicacao.properties”文件具有正确的值，所以我'我假设程序集插件在 maven 更改属性之前复制文件。maven更改属性后，有没有办法强制程序集插件复制文件？另一个问题是：如何从最终的 jar 文件中删除属性文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:54:58.067

您的程序集在`package`与 jar 相同的阶段上运行，并且在`process-resources`处理过滤的阶段之后，至少在默认情况下是这样。因此，这表明这不是排序问题。

我建议您仔细检查并进行某种测试，以确定程序集从何处获取文件。它可能是直接从未处理的源端抓取一个，而不是目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T09:11:45.553

您可以做的是让程序集插件从构建目录而不是源目录复制资源文件，如下所示：

```
<fileSet>
  <directory>${project.basedir}/src/main/resources</directory>
  <outputDirectory>conf</outputDirectory>
  <includes>
    <include>*.properties</include>
  </includes>
</fileSet>
```

进入

```
<fileSet>
  <directory>${project.build.directory}/classes</directory>
  <outputDirectory>conf</outputDirectory>
  <includes>
    <include>*.properties</include>
  </includes>
</fileSet>
```

# java - 如何压缩小字符串

> ID：14626834
> 
> 赞同：0
> 
> 时间：2013-01-31T13:23:58.923
> 
> 标签：java, gzipoutputstream

> **可能重复：**
> [短文本字符串的最佳压缩算法](https://stackoverflow.com/questions/1138345/best-compression-algorithm-for-short-text-strings)

我在压缩和解压缩字符串方面需要帮助。

当我尝试压缩较小的字符串时，它会转换为比原始大小更多的字节。但是当我添加更大的字符串时，它会以更少的字节压缩。

我在下面给出我的代码：

```
package string_compress;

import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.zip.GZIPInputStream;
import java.util.zip.GZIPOutputStream;

 //@author Administrator

   public class Main
  {

   public static String compress(String str) throws IOException {
     if (str == null || str.length() == 0) {
        return str;
    }
    System.out.println("String length : " + str.length());
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    GZIPOutputStream gzip = new GZIPOutputStream(out);
     gzip.write(str.getBytes());

    gzip.close();

   String outStr = out.toString("ISO-8859-1");//ISO-8859-1
    System.out.println("Output String lenght : " + outStr.length());

    return outStr;
   }

   public static String decompress(String str) throws IOException {
    if (str == null || str.length() == 0) {
        return str;
    }
    System.out.println("Input String length : " + str.length());
    GZIPInputStream gis = new GZIPInputStream(new   ByteArrayInputStream(str.getBytes("ISO-8859-1")));
    BufferedReader bf = new BufferedReader(new InputStreamReader(gis, "ISO-8859-1"));
    String outStr = "";
    String line;
    while ((line=bf.readLine())!=null) {
      outStr += line;
    }
    System.out.println("Output String lenght : " + outStr.length());
    return outStr;
 }
  /**
  * @param args the command line arguments
  */
 public static void main(String[] args)throws IOException {

        //String filePath = ".\response.txt";

 //   String string = getFileData(filePath);
    String string= "rishi jain is tring to compress the string";

     System.out.println("after compress:");
    String compressed = Main.compress(string);
    System.out.println(compressed);
    System.out.println("after decompress:");
    String decomp = decompress(compressed);
    System.out.println(decomp);

  }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:36:10.737

不要压缩短字符串，因为 GZIP 仅适用于输入的特定大小，可能是 18 或更多，见下文。如果压缩版本比未压缩的长，则放置长度阈值或丢弃压缩版本。

在您需要解压缩时，请在字符串的开头查找[GZIP 标头魔术序列](http://www.onicos.com/staff/iz/formats/gzip.html)( )。`0x1f, 0x8b`如果不存在，则字符串不会被压缩，应该“按原样”返回。

偶然从这个魔术序列开始的字符串必须独立于其大小进行压缩（应该很少见，因为两个字节都不是可打印的 ASCII 符号）。

当然，魔术序列后的第一个字节指定格式，还有一个选项“已存储”（未压缩）。但是，如果您有很多空字符串或非常短的字符串，这可能还不够好，因为 gzip 有一个 10 字节的标题和一个 8 字节的页脚。

# javascript - javascript - 无法更改图像的位置

> ID：14626842
> 
> 赞同：0
> 
> 时间：2013-01-31T13:24:50.980
> 
> 标签：javascript, css, image

我正在尝试使用 javascript 更改我在 HTML 中的图像的位置。如果我有以下代码，我实际上可以让它工作：

```
function main()
{
    var catOne = document.getElementById("cat1");
    catOne.style.left = cat1.getX().toString() + "px";
    catOne.style.top = cat1.getY().toString() + "px";
} 
```

但是当我将代码更改为此：

```
var catOne = new Cat("cat1", 300, 100);

function main()
{

    catOne.setUp();
} 
```

它不起作用。而且我不知道为什么，但它只给了我一个错误“TypeError：无法读取null的属性'style'”

这是我在 javascript 中的 Cat 类：

```
function Cat(id, x, y)
{
    this.cat = document.getElementById(id);
    this.x = x;
    this.y = y;
}

Cat.prototype.setUp = function ()
{
    this.cat.style.left = this.x.toString() + "px";
    this.cat.style.top = this.y.toString() + "px";
};

Cat.prototype.getX = function ()
{
    return this.x;
};

Cat.prototype.getY = function ()
{
    return this.y;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:56:20.027

`TypeError: Cannot read property 'style' of null`表示您`catOne`在 DOM 树中不存在。

您应该在 DOM 准备好（或在窗口加载时）实例化 Cat 类。我不知道您为什么需要该`main()`功能，但它何时执行？它也应该在 DOM 准备好时执行。

```
var catOne;
function main() {
    catOne.setUp();
}

window.onload = function() {
    catOne = new Cat("cat1", 300, 100);
    main();
} 
```

我还建议你将`position`你的猫设置为，`absolute`如果你在你的`setUp()`函数中定位它。（我想你已经用你的 CSS 做到了）：

```
Cat.prototype.setUp = function ()
{
    this.cat.style.position = 'absolute';
    this.cat.style.left = this.x.toString() + "px";
    this.cat.style.top = this.y.toString() + "px";
}; 
```

[**这**](http://jsfiddle.net/onury/mpUkm/)是小提琴。
除此之外，您的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:50:33.380

和：

```
var catOne = new Cat("cat1", 300, 100);
catOne.setUp(); 
```

工作得很好。

我不太明白你是如何设法得到错误你提到的

链接：http: [//jsfiddle.net/Z74mM/](http://jsfiddle.net/Z74mM/)

# javascript - 试图使字母可拖动以构成单词

> ID：14626849
> 
> 赞同：0
> 
> 时间：2013-01-31T13:25:24.087
> 
> 标签：javascript, jquery, html

我正在尝试使字母可拖动以构成单词。但由于某种原因，它只是行不通。

我的 HTML：

```
 <html>
  <head>
    <title>Word Maker</title>
    <script type='text/javascript' src='script.js'></script>
     <script src="js/jquery-1.6.2.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui-1.8.16.custom.min.js" type="type/javascript"></script>
    <script src="js/ui/jquery.ui.draggable.js" type="type/javascript"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="letters" class="makeDraggable">
        <div id="letter1" class="makeDraggable">
          <p>w</p>
        </div>
    <div id="letter2" class="makeDraggable">
      <p>p</p>
      </div>
    <div id="letter3" class="makeDraggable">
      <p>i</p>
    </div>
    <div id="letter4" class="makeDraggable">
      <p>r</p>
    </div>
    <div id="letter5" class="makeDraggable">
      <p>o</p>
    </div>
    <div id="letter6" class="makeDraggable">
      <p>m</p>
    </div>
    <div id="letter7" class="makeDraggable">
      <p>l</p>
    </div>
    <div id="letter8" class="makeDraggable">
      <p>l</p>
    </div>
    <div id="letter9" class="makeDraggable">
      <p>w</p>
    </div>
    <div id="letter10" class="makeDraggable">
      <p>y</p>
    </div>
    <div id="letter11" class="makeDraggable">
      <p>u</p>
    </div>
    <div id="letter12" class="makeDraggable">
      <p>o</p>
    </div>
    <div id="letter13" class="makeDraggable">
      <p>g</p>
    </div>
    <div id="letter14" class="makeDraggable">
      <p>t</p>
    </div>
    <div id="letter15" class="makeDraggable">
      <p>o</p>
    </div>
    <div id="letter16" class="makeDraggable">
      <p>o</p>
    </div>
  <div id="letter17" class="makeDraggable">
    <p>i</p>
    </div>
    <div id="letter18" class="makeDraggable">
      <p>t</p>
    </div>
    <div id="letter19" class="makeDraggable">
      <p>h</p>
    </div>
    <div id="letter20" class="makeDraggable">
      <p>e</p>
    </div>
    <div id="letter21" class="makeDraggable">
      <p>m</p>
    </div>
  </div>
  </body>
</html> 
```

JS代码：

```
$(function() {
    $("letters").draggable();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:32:32.013

您应该尝试使用`.draggable()`class 应用于所有元素`makeDraggable`。看看[这个例子](http://jsfiddle.net/VwT2U/)。只需更改您的 jquery 选择器，您就可以使单个字母可拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:00:12.817

可能你要使用的是.sortable()，最好是创建单词，看看这个fiddle：http: [//jsfiddle.net/CqqxE/](http://jsfiddle.net/CqqxE/)

在你的 js 中你所要做的就是：

```
$(function () {
    $("#letters").sortable();
}); 
```

然后你可以添加一些花哨的 css 来让事情变得更酷

```
.makeDraggable {
    width: 20px;
    height: 20px;
    background-color: #CDE;
    float: left; /* Important to align letters */
    text-align: center;
    cursor: pointer;
}
.makeDraggable:active {
    background-color: #DCC;
    width: 24px;
    height: 24px;
} 
```

* * *

## **编辑＃1：**

当然，现在你不需要所有这些类...... [http://jsfiddle.net/promatik/CqqxE/1/](http://jsfiddle.net/promatik/CqqxE/1/)

造词：

```
<div class="word">
    <div>w</div>
    <div>o</div>
    <div>r</div>
    <div>d</div>
</div>
<div class="word">
    <div>a</div>
    <div>n</div>
    <div>o</div>
    <div>t</div>
    <div>h</div>
    <div>e</div>
    <div>r</div>
</div> 
```

和 JS：

```
$(function () {
    $(".word").sortable();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:29:25.193

您遇到的第一个问题是`$('letters')`. 该选择器告诉 jQuery 查找由`<letter>`标签创建的所有元素，但没有。

您可能的意思是`$('#letters')`，它会选择一个元素，`<div>`with an `id`of `letters`。

您可能会从一些关于[jQuery 选择器](http://api.jquery.com/category/selectors/)的附加阅读中受益。

# php - 如何使用复选框将 $1.00 添加到 $amount

> ID：14626850
> 
> 赞同：0
> 
> 时间：2013-01-31T13:25:29.687
> 
> 标签：php, javascript, jquery

我可以让`$amount`显示在页面上，但是在我收到错误消息后告诉我我需要添加一个数量才能让它通过脚本运行

我只需要`$amount`添加`$payment`, `$donation`, 然后发布`$amount`

```
<label>Payment:</label>
<input name="payment" id="payment" class="small-field" value="<?php echo $payment;?>"   />
*
<div class="clr"></div>

<label>Donation:</label>
<input type="checkbox"  id="donation" name="donation" value="1.00"  />

<div class="clr"></div>

<?php echo $amount;?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:30:09.730

我认为您的意思是 JavaScript（或 jQuery 包对您来说可能更容易）。

1.  为复选框设置事件；
2.  捕捉复选框的值；
3.  值加+1；
4.  用新创建的值替换原始值；

如果我理解正确的话。[这](https://stackoverflow.com/questions/786142/how-to-retrieve-checkboxes-values-in-jquery)是有关如何执行此操作的示例。

```
<html>
  <head>
    <title>Test page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="Dainis Abols" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
  </head>
  <body>

    <input id="check2" type="checkbox" name="test" value="1">
    <div id="check1" style="float: left;">1.00</div>

    <!-- The event for checkbox with id 'check2' -->
    <script>
    $("#check2").click(function() {
        var value = $(this).val(); /* Catching value of checkbox */
        value++; /* Increasing value by one */
        $(this).val(value); /* Replacing original value */
        $(this).attr('checked', false); /* Removing CHECKED ( if needed ) */
        $('#check1').html(value + '.00'); /* Just for visual aid */
    });
    </script>
    <!-- End of event -->

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:37:24.047

如果您不想使用 html 脚本更改某些 php 值，则需要一个表单来将信息发布到服务器，或者使用 ajax 来执行此操作。

PHP 仅在服务器端工作，您的 HTML 页面在客户端。两者互不互动。

我建议使用 ajax 在“实时”中做到这一点。类似的东西： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$(function () {
$("#payment").bind('change',function () {   
    if($(this).checked){
    $.ajax({
        type: "GET",
        url: "test.php",            
        success: function(){
            alert('value as incremented by 1');
        }
    });
    }
}); 
```

});

# c# - 从n中获取k个元素的所有组合的算法

> ID：14626852
> 
> 赞同：2
> 
> 时间：2013-01-31T13:25:38.680
> 
> 标签：c#, algorithm, combinations

我有一个列表，我想从 2 的组合开始对列表的元素进行一些操作。

假设下面是我的清单：

```
List<string> strArr = new List<string> { "A", "B", "C", "D", "E", "F", "G", "H" }; 
```

如果我们一次选择 2 个元素，它将生成以下组合：- (A,B) (A,C) (A,D) (A,E) (A,F) (A,G) (A,H) (B,C) (B,D) 等等

如果我们一次选择 3 个元素，它将生成以下组合：- (A,B,C) (A,B,D) (A,B,E) (A,B,F) (A,B,G) (A,B,H) (A,C,D) (A,C,E) (A,C,F) (A,C,G) (A,C,H) (A,D,E) ( A,D,F) (A,D,G) (A,D,H) (A,E,F) (A,E,G) (A,E,H) (A,F,G) (A ,F,H) (A,G,H) (B,C,D) (B,C,E) (B,C,F) 等等

获得这些组合非常容易。我按照[算法从 n 返回 k 元素的所有组合，](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n) 它给了我准确的输出。

但是我不能使用此代码，因为我有另一个要求，我将继续从列表中删除元素，以防它们满足某些条件，因此组合的数量将继续减少。所以我不想使用 LINQ 获得所有组合，因为它会妨碍我的性能。

我想通过以下方式做到这一点：

```
List<string> strArr = new List<string> { "A", "B", "C", "D", "E", "F", "G", "H" };
// Loop for selecting combination of two elements at time
for (int i = 0; i < strArr.Count; i++)
{
    for (int j = i + 1; j < strArr.Count; j++)
    {
        // Writing on Console
        // Actually do some operation to check whether these two elements in list needs to be removed or not
        Console.Write(strArr[i] + strArr[j]);
        Console.WriteLine();

        // Check whether current combination of 2 elements need to be removed or not
        if (<< condition >>)
        {
            // Remove both the current elements

            // Remove current element of outer loop
            strArr.RemoveAt(i);
            // Remove current element of inner loop
            // Subtracting one as list size is reduced by 1
            strArr.RemoveAt(j - 1);

            //
            i--;
            break;
        }
    }
}

bool isRemoved = false;
// Loop for selecting combination of three elements at time
for (int i = 0; i < strArr.Count; i++)
{
    for (int j = i + 1; j < strArr.Count; j++)
    {
        for (int k = j + 1; k < s.Count; k++)
        {
            // Writing on Console
            // Actually do some operation to check whether these three elements in list needs to be removed or not
            Console.Write(strArr[i] + strArr[j] + strArr[k]);
            Console.WriteLine();

            // Check whether current combination of 3 elements need to be removed or not
            if (<< condition >>)
            {
                // Remove all the three elements

                // Remove current element of outer loop
                strArr.RemoveAt(i);
                // Remove current element of inner loop
                // Subtracting 1 as list size is reduced by 1
                strArr.RemoveAt(j - 1);
                // Subtracting 2 as list size is reduced by 2
                strArr.RemoveAt(k - 2);
                isRemoved = true;
                i--;
                break;
            }

            // If elements are removed then exit from loop with variable j
            if (isRemoved)
            {
                break;
            }
        }
    }
}

// Now make loop for selecting combination of four elements at time
// and keep removing the elements depending upon condition 
```

删除元素将确保我获得更快的性能，并且我想执行此操作直到结束。我无法思考如何在递归中保持这些深层次的循环。谁能帮我在递归中添加这些无穷无尽的for循环？

感谢您花时间为我编写解决方案，但这不是我想要的......我将在没有代码的情况下简要介绍要求。

1.  假设我有 10 个元素的列表。
2.  我想选择从 2 到 9 组开始的所有组合。如果总元素为 10，则可能组合的总数将为 1012。
3.  现在我想开始评估 2 组中的所有组合。假设第一组 (A,B)。我将根据某些条件评估该组，如果该组合满足条件，那么我将从 10 个元素的列表中删除元素 (A,B)。所以我将在列表中留下 8 个元素。
4.  现在剩下 8 个元素的组合总数将是 246 个。我没有尝试组合 (A,C) (A,D) 等等。
5.  但我仍在评估 2 组中的组合。现在我将选择 2 组中的剩余组合...下一个组合将是 (C,D) (C,E)..假设所有剩余的组合都没有满足从列表中删除它们的条件。然后我想开始评估 3 组中的组合。
6.  第一组 3 将是 (C,D,E)...如果它将通过特定条件，那么我将从列表中删除所有 3 个元素，我将只剩下 5 个元素。现在我想在这 5 个元素上运行我的 3 组合测试。
7.  在那组 4 人之后，依此类推

我希望您现在了解用例。

任何人都可以帮助我实施上述用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:19:26.247

以下解决方案将遍历输入列表中所有可能的元素组合，从 2 个元素的组合开始并从那里向上移动。如果提供的过滤器函数返回 true，则从考虑中删除选择的元素；因此，随着移除更多元素，迭代的总数会减少。结果不会自动跟踪；由调用者根据需要跟踪结果。我要遵循的示例用法将演示如何跟踪结果。

```
public static void PermutateElements<T>(
    IEnumerable<T> elements,
    Predicate<IEnumerable<T>> filterGroup)
{
    var chooseFrom = new LinkedList<T>(elements);
    var chosen = new List<T>(chooseFrom.Count);
    for (int chooseCount = 2; chooseCount < chooseFrom.Count - 1; chooseCount++)
    {
        Permutate(chooseFrom, chooseCount, filterGroup, chosen, 0);
    }
}

static bool Permutate<T>(LinkedList<T> chooseFrom, int chooseCount,
    Predicate<IEnumerable<T>> filterPermutation, IList<T> chosen, int skipLast)
{
    int loopCount = chooseFrom.Count;
    for (int i = 0; i < loopCount; i++)
    {
        var choosingNode = chooseFrom.First;
        chooseFrom.RemoveFirst();

        bool removeChosen = false;
        if (i < loopCount - skipLast)
        {
            chosen.Add(choosingNode.Value);
            if (chooseCount == 1)
                removeChosen = filterPermutation(chosen);
            else
                removeChosen = Permutate(chooseFrom, chooseCount - 1, filterPermutation, chosen, skipLast + i);
            chosen.RemoveAt(chosen.Count - 1);
        }
        if (!removeChosen)
            chooseFrom.AddLast(choosingNode);
        else if (chosen.Count > 0)
            return true;
    }
    return false;
} 
```

下面的示例使用这些函数来对字母进行分组；我们希望将字母 A 到 Z 放入任意组中，使每个组包含的辅音多于元音，并且至少包含一个元音：

```
HashSet<char> vowels = new HashSet<char>(new char[] { 'A', 'E', 'I', 'O', 'U', 'Y' });
var results = new List<IEnumerable<char>>();
Predicate<IEnumerable<char>> processGroup = delegate(IEnumerable<char> groupElements)
{
    int vowelCount = groupElements.Count(x => vowels.Contains(x));
    int consonantCount = groupElements.Count(x => !vowels.Contains(x));
    if (vowelCount < consonantCount && vowelCount > 0)
    {
        results.Add(new List<char>(groupElements));
        return true;
    }
    else
        return false;
};

var elements = new char[26];
for (int i = 0; i < elements.Length; i++)
    elements[i] = (char)('A' + i);
PermutateElements(elements, processGroup); 
```

执行 3131 次迭代的结果（远少于迭代所有可能的组合而不删除），如下所示：

ABC DEF GHI JKO PQU VWY

此时所有的元音都用完了，所以不可能有更多的合法组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T19:58:53.290

这是我用 C++ 编写的用于解决类似问题的算法。如果您稍微修改它以在 c# 中工作，您应该能够将其用于您的目的。

```
void r_nCr(const unsigned int &startNum, const unsigned int &bitVal, const unsigned int &testNum) // Should be called with arguments (2^r)-1, 2^(r-1), 2^(n-1)
{
    unsigned int n = (startNum - bitVal) << 1;
    n += bitVal ? 1 : 0;

    for (unsigned int i = log2(testNum) + 1; i > 0; i--) // Prints combination as a series of 1s and 0s
        cout << (n >> (i - 1) & 1);
    cout << endl;

    if (!(n & testNum) && n != startNum)
        r_nCr(n, bitVal, testNum);

    if (bitVal && bitVal < testNum)
        r_nCr(startNum, bitVal >> 1, testNum);
} 
```

[您可以在此处](https://stackoverflow.com/questions/27308438/how-to-cheaply-calculate-all-possible-length-r-combinations-of-n-possible-elem/27308439#27308439)查看其工作原理的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:37:06.197

不确定这是否正是您所需要的，但它可能被视为一种方法。

```
namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Tuple<Expression, Expression>>  conditions = new List<Tuple<Expression, Expression>>();

            // a complex condition, that the current item contains both "B" and "H"
            Expression<Func<IEnumerable<string>, bool>> expression1 = item => item.Contains("B") && item.Contains("H");

            // an expression which is used to exclude the elements from the list
            Expression<Func<string, bool>> expression2 = j => j != "B" && j != "H";

            // associate the condition with the exclusion filter
            var condition = new Tuple<Expression, Expression>(expression1, expression2);

            conditions.Add(condition);

            List<string> strArr = new List<string> { "A", "B", "C", "D", "E", "F", "G", "H" };

            IEnumerable<IEnumerable<string>> result = Process(strArr, conditions);
        }

        private static IEnumerable<IEnumerable<string>> Process(IEnumerable<string> strArr, List<Tuple<Expression, Expression>> conditions)
        {
            List<IEnumerable<string>> response = new List<IEnumerable<string>>();
            int k = 0;
            for (int i = 1; i <= strArr.Count(); i++)
            {
                k++;
                var r = strArr.Combinations(Math.Min(strArr.Count(), k));
                bool stop=false;
                foreach (IEnumerable<string> item in r)
                {
                    if (stop)
                    {
                        break;
                    }
                    foreach (Tuple<Expression, Expression> condition in conditions)
                    {
                        if (Enumerable.Repeat<IEnumerable<string>>(item, 1).Any(Evaluate(condition.Item1) as Func<IEnumerable<string>, bool>))
                        {
                            var initialCount = strArr.Count();
                            strArr = strArr.Where(Evaluate(condition.Item2) as Func<string, bool>);
                            i -= initialCount - strArr.Count();
                            stop = true;
                            break;
                        }
                        else
                        {
                            foreach (var item1 in r)
                            {
                                response.Add(item1);
                            }
                        }
                    }

                }
            }
            return response;
        }

        public static object Evaluate(Expression e)
        {
            if (e.NodeType == ExpressionType.Constant)
                return ((ConstantExpression)e).Value;
            return Expression.Lambda(e).Compile().DynamicInvoke();
        }
    }

    public static class Helper
    {
        public static IEnumerable<IEnumerable<T>> Combinations<T>(this IEnumerable<T> elements, int k)
        {
            return k == 0 ? new[] { new T[0] } :
              elements.SelectMany((e, i) =>
                elements.Skip(i + 1).Combinations(k - 1).Select(c => (new[] { e }).Concat(c))
                );
        }
    }
} 
```

我已将此[答案](https://stackoverflow.com/a/1898744/674700)用作帮助者。您还可以看到该`Process`方法与一组条件（本例中只有一个）松散耦合。

# c# - .NET Regex：如何在多行上检索多个匹配项

> ID：14626857
> 
> 赞同：0
> 
> 时间：2013-01-31T13:25:50.707
> 
> 标签：c#, .net, regex

我有以下正则表达式：

```
\b((.|\n)*)=((.|\n)*)new((.|\n)*)\(\) 
```

它用于从 ac# 源代码字符串中检测对象分配，

像这个：`var a = new Person();`

当我只有一场比赛时它工作正常，但如果我尝试处理这个：

```
var a = new Person();
var x = new WebClient(); 
```

它只返回一个匹配项，如下所示：`{var a = new Person(); var x = new WebClient()}`

我需要提取两个匹配项。我该怎么做，我对正则表达式比较陌生，我不知道该怎么做。

当我在 RegExr 上测试我的正则表达式时，它工作得很好（选中了全局复选框）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:36:06.950

\n 允许它匹配新行。

这对我来说适用于你在 expresso 中的测试数据：

```
\b((.)*)=((.)*)new((.)*)\(\) 
```

如果您不需要匹配组 - 括号 - 这似乎也可以：

```
\b.*=.*new.*\(\) 
```

这可能比使用更合适。（任何字符）。

```
\b[\w\s]*=[\w\s]*new[\w\s]*\(\) 
```

如果您确信代码库具有精确的间距（例如，由 StyleCop 之类的东西强制执行），那么您可以再次获得更具体的 \w（单词字符）和 \s（空格字符）。

另外我不确定这是否是故意的，但你不匹配 ; 在行尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:36:10.943

这个表达式应该让你开始。尝试传入 Multiline regex 选项，而不是尝试在 regex 本身中处理换行符：

```
var src = @"var a = new Person();
var x = new WebClient();";
var pattern = @"(\w+\s*)(\w*\s*)=\s+new\s+(\w+)\(\)";
var expr = new System.Text.RegularExpressions.Regex(pattern,RegexOptions.Multiline);
foreach(Match match in expr.Matches(src) )
{
    var assignType = match.Groups[1].Value;
    var id = match.Groups[2].Value;
    var objType = match.Groups[3].Value;        
} 
```

也就是说，有（很多）比 RegEx 更好的工具来处理 C# 解析，你对这些感兴趣吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:39:29.050

您可以使用命名组。我将模式修改为以下内容，命名的组`asgn`将匹配整个作业：

```
(?<asgn>\b\w+\s+\w+\s*\=\s*new\s+\w+\([^)]*\)\s*;) 
```

这是访问命名组的方法：

```
string pat = @"(?<asgn>\b\w+\s+\w+\s*\=\s*new\s+\w+\([^)]*\)\s*;)";
string input = @"var a = new Person();
                var x = new WebClient();";
foreach (Match m in Regex.Matches(input, pat))
{
    Console.WriteLine(m.Groups["asgn"].Value);
} 
```

如果您需要解析和提取作业的每个部分，您可以将更多组命名到模式中，如下所示：

```
(?<asgn>\b(?<vtype>\w+)\s+(?<name>\w+)\s*\=\s*new\s+(?<type>\w+)\((?<args>[^)]*)\)\s*;) 
```

您可以使用它从匹配的字符串中提取变量类型、变量名称、类型和构造函数参数。

# c# - 将滚动条保持在 WPF 应用程序的可编辑和不可编辑文本框中

> ID：14626863
> 
> 赞同：5
> 
> 时间：2013-01-31T13:26:11.417
> 
> 标签：c#, asp.net, wpf-controls

在 WPF 应用程序中，我如何才能拥有一个文本框，该文本框可以根据不同的场景进行编辑或不可编辑，但仍然有一个滚动条，可以在两种场景中滚动浏览文本。现在文本框配置为：

```
VerticalScrollBarVisibility="Auto"
IsEnabled="(either False or true)" 
```

现在，即使出现滚动条，当文本框被禁用时，我也无法滚动文本。

甚至 `IsReadOnly`没有帮助。

我需要在这两种情况下都可用的滚动选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-22T15:14:40.393

答案是按照评论所说的：而不是使用`IsEnabled`use `IsReadOnly`，并使用以下设置器来获取禁用的样式：

```
<Setter Property="Panel.Background" TargetName="Bd" Value="{DynamicResource ResourceKey={x:Static SystemColors.ControlBrushKey}}" />
<Setter Property="TextElement.Foreground" Value="{DynamicResource ResourceKey={x:Static SystemColors.GrayTextBrushKey}}" /> 
```

[来源](http://social.msdn.microsoft.com/Forums/en-US/e5909cc3-8ad1-4ddd-8efa-dc14bf0dace5/enable-scrollbar-on-disabled-textbox)

# c - Linux 的 C 头文件中的“_IO(...)”是什么意思？

> ID：14626867
> 
> 赞同：10
> 
> 时间：2013-01-31T13:26:34.830
> 
> 标签：c, header-files, c-preprocessor

我有一个 Linux 标准头文件，例如

```
/usr/src/linux-headers-3.2.0-35/include/linux/usbdevice_fs.h 
```

其中包含`define`如下语句：

```
#define USBDEVFS_SUBMITURB32       _IOR('U', 10, struct usbdevfs_urb32)
#define USBDEVFS_DISCARDURB        _IO('U', 11)
#define USBDEVFS_REAPURB           _IOW('U', 12, void *) 
```

“_IOR”、“_IO”和“_IOW”是什么意思？例如，实际上赋予了什么价值`USBDEVFS_DISCARDURB`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T14:18:50.187

它们根据 ioctl 函数和输入参数定义 ioctl 编号。在内核中定义，在`include/asm-generic/ioctl.h`.

您需要在程序中包含`<linux/ioctl.h>`（或`linux/asm-generic/ioctl.h`）。包括之前
`/usr/src/linux-headers-3.2.0-35/include/linux/usbdevice_fs.h`

您不能“预编译”这些值（例如`USBDEVFS_DISCARDURB`），因为它们在其他平台上可能不同。例如，您正在普通的旧 x86 上开发代码，但随后有人会尝试在 x86_64/arm/mips/etc 上使用它。因此，您应该始终包含内核`ioctl.h`以确保您使用的是正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:28:13.223

这些也是在别处定义的宏。

一般来说，如果您想在计算预处理器后查看您的代码，请使用

```
gcc -E foo.c 
```

这将输出您的代码预处理

例如：

foo.c

```
#define FORTY_TWO 42

int main(void)
{
  int foo = FORTY_TWO;
} 
```

会给你`gcc -E foo.c`：

```
int main(void)
{
  int foo = 42;
} 
```

# java - 如何从字符串中读取和删除数字？

> ID：14626868
> 
> 赞同：1
> 
> 时间：2013-01-31T13:26:34.387
> 
> 标签：java, string

例如，我有这个字符串：

`0no1no2yes3yes4yes`

这里的第一个 0 应该被删除并使用数组的索引。我这样做是通过以下声明：

```
string = string.replaceFirst(dataLine.substring(0, 1), ""); 
```

但是，当我说这个字符串时：

`10yes11no12yes13yes14no`

我的代码失败，因为我想处理 ，`10`但我的代码只提取`1`.

所以在排序中，个位数可以正常工作，但两位数或三位数会导致`IndexOutOfBound`错误。

这是代码： http: [//pastebin.com/uspYp1FK](http://pastebin.com/uspYp1FK)

这是一些示例数据： http: [//pastebin.com/kTQx5WrJ](http://pastebin.com/kTQx5WrJ)

这是示例数据的输出：

```
Enter filename: test.txt
Data before cleanUp: {"assignmentID":"2CCYEPLSP75KTVG8PTFALQES19DXRA","workerID":"AGMJL8K9OMU64","start":1359575990087,"end":"","elapsedTime":"","itemIndex":0,"responses":[{"jokeIndex":0,"response":"no"},{"jokeIndex":1,"response":"no"},{"jokeIndex":2,"response":"yes"},{"jokeIndex":3,"response":"yes"},{"jokeIndex":4,"response":"yes"}],"mturk":"yes"},
Data after cleanUp: 0no1no2yes3yes4yes
Data before cleanUp: {"assignmentID":"2118D8J3VE7W013Z4273QCKAGJOYID","workerID":"A2P0GYVEKGM8HF","start":1359576154789,"end":"","elapsedTime":"","itemIndex":3,"responses":[{"jokeIndex":15,"response":"no"},{"jokeIndex":16,"response":"no"},{"jokeIndex":17,"response":"no"},{"jokeIndex":18,"response":"no"},{"jokeIndex":19,"response":"no"}],"mturk":"yes"},
Data after cleanUp: 15no16no17no18no19no
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 2
    at java.lang.String.substring(String.java:1907)
    at jokes.main(jokes.java:34) 
```

基本上，代码应该做的是将数据剥离成字符串，如上所示，然后读取数字，如果后面跟着`yes`增加它的索引值 in `dataYes`，或者如果后面跟着`no`增加 in 的值`dataNo`。说得通？

我能做些什么？如何使我的代码更灵活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:40:10.730

对你起作用吗？

```
string = string.replaceAll("^\\d+",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:56:18.703

怎么样： -

```
String regex = "^\\d+";
String myStr = "10abc11def";

Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(myStr);

if(m.find())
{
    String digits = m.group();
    myStr = m.replaceFirst("");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:47:01.300

试试这个

```
 System.out.println("10yes11no12yes13yes14no".replaceFirst("^\\d+","")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:29:40.527

另一种更具体的尝试：-

```
 String regex = "^(\\d+)(yes|no)";
    String myStr = "10yes11no";

    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(myStr);

    while (m.find())
    {
        String all = m.group();
        String digits = m.group(1);
        String bool = m.group(2);

        // do not try and combine the next 2 lines ... it doesn't work!
        myStr = myStr.substring(all.length());
        m.reset(myStr);

        System.out.println(String.format("all = %s, digits = %s, bool = %s", all, digits, bool));
    } 
```

# css - 用于更高分辨率的布局字段集

> ID：14626877
> 
> 赞同：1
> 
> 时间：2013-01-31T13:27:21.913
> 
> 标签：css, jquery-mobile

jquery mobile的自动布局有问题：

我有一个带有字段集的表单：

```
<div data-role="collapsible" data-collapsed="false" data-theme="a">
<h3>Test</h3>
    <div data-role="fieldcontain">
       <label for="TextInput"> Textinput </label>
       <input type="text" name="TextInput" id="TextInput">
    </div>

    <div data-role="fieldcontain">
       <label for="ButtonInput"> Button </label>
       <a href="javascript:alert('works')" data-icon="arrow-r" data-role="button" data-iconpos="right">
          <label id="ButtonInput" name="ButtonInput"> Testvalue </label>
       </a>
    </div>
</div> 
```

在分辨率较低的显示器上一切正常。标签显示在第一行，输入显示在第二行：

文本输入
[输入框]

按钮
[按钮]

在分辨率更高的显示器上，输入字段和标签显示在 1 行
Textinput [InputBox]

但按钮仍显示为 2 行：
按钮
[按钮]

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:35:50.067

这不是错误，jQM 就是这样构建的。

如果你想修复它，只需使用这个简单的 css：

```
#TextInput {
    width: 100% !important;
} 
```

工作示例：http: [//jsfiddle.net/Gajotres/xrVU2/](http://jsfiddle.net/Gajotres/xrVU2/)

# jquery - 隐藏孩子父母而不是孩子

> ID：14626878
> 
> 赞同：0
> 
> 时间：2013-01-31T13:27:22.117
> 
> 标签：jquery, css, ajax

请帮我解决这个问题...

```
<li id="4331">Region
      <ul>
         <li id="4332">Asia</li>
         <li id="6621">Europe</li>
      </ul>
</li> 
```

这是我的查询，如果我单击区域
它是 ul 的父级，
仅显示亚洲和欧洲并在单击时隐藏区域（父级）

```
i am using the .hide() method 
```

这是我到目前为止所做的：

```
$(document).ready(function() {
    $("li").live("click", function(event) {
        $("li").hide(); 
        event.cancelBubble = true;
        loadChild($(this).attr("id"), event);
        return false;
    })
}); 
```

我目前的输出是：

```
<li id="4331" style="display: none;">
Region
   <ul>
      <li id="4332">Asia</li>
      <li id="6621">Europe</li>
   </ul>
</li> 
```

它隐藏了一切...

但我只想隐藏父区域
我希望能够单击它隐藏区域并仅显示亚洲和欧洲。
请帮我解决这个问题
。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:28:46.730

`$("li")`是`li`页面所有元素的集合，而不仅仅是您单击的元素。

代替

```
$("li").hide(); 
```

和

```
$(this).parent().closest("li").hide(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:30:13.443

我认为您想隐藏文本`Region`，因此您可以将其粘贴在`<span>`标签中并将其隐藏。

```
<li id="4331"><span id="region_text">Region</span>
  <ul>
    <li id="4332">Asia</li>
    <li id="6621">Europe</li>
  </ul>
</li> 
```

然后你可以使用

```
$("#region_text").hide(); 
```

请注意，我不了解 jQuery，但我对 HTML 和 DOM 了解一些 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:33:15.427

您需要更改 DOM，文本“Region”不是 ul 的父级，而是兄弟级

```
<li id="4331">
      <span class="region">Region</span>
      <ul>
         <li id="4332">Asia</li>
         <li id="6621">Europe</li>
      </ul>
</li> 
```

jquery（不推荐使用live，使用'on'）

```
$(document).ready(function() {
    $("li").on("click", function(event) {
        $(this).find('.region').hide(); 
        loadChild($(this).attr("id"), event);
        return false;
    })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T18:13:42.083

我发现[这个答案](https://stackoverflow.com/a/5521514/2019817)非常有用：

```
$('#4331').css('position','relative').css('left','-9999px');

$('#4331>ul').css('position','relative').css('left','9999px') 
```

# php - 基于 jquery 和 php 的自定义订单表单，具有自动计算的总数

> ID：14626879
> 
> 赞同：0
> 
> 时间：2013-01-31T13:27:22.850
> 
> 标签：php, jquery, html

我正在尝试创建一个带有动态项目列表、价格和数量的订单。这里的数量是一个输入字段，用户可以输入任何数量，根据这个数量输入，在提交表单之前，总价格将在表单上实时更新。

我在while循环中显示来自mysql数据库表名“PRODUCTS”的项目列表和价格。这是我在 while 循环中使用的行：

```
<tr>
<td style="width:200px;"><span class="tdlist"><?php echo $item?></span></td>
<td style="width:120px; text-align:center;"><span class="tdlist"><?php echo $price?></span></td>
<td style="width:150px;"><input type='text'  maxlength=9 name='item<?php echo $id?>' value=''  id='item<?php echo $id?>' style="width:60px;"/><select name='quantity<?php echo $id?>' id='quantity<?php echo $id?>' ><option value='Kg' >Kg.</option><option value='gms' >gms</option></select></td>
</tr> 
```

这是普通的html，如下所示：

```
<tr>
<td style="width:200px;"><span class="tdlist">Sugar</span></td>
<td style="width:120px; text-align:center;"><span class="tdlist">57</span></td>
<td style="width:150px;"><input type='text'  maxlength=9 name='item1' value='1'  id='item1' style="width:60px;"/><select name='quantity1' id='quantity1' ><option value='Kg' >Kg.</option><option value='gms' >gms</option></select></td>
</tr>

<tr>
<td style="width:200px;"><span class="tdlist">Rice</span></td>
<td style="width:120px; text-align:center;"><span class="tdlist">98</span></td>
<td style="width:150px;"><input type='text'  maxlength=9 name='item2' value='1'  id='item2' style="width:60px;"/><select name='quantity2' id='quantity2' ><option value='Kg' >Kg.</option><option value='gms' >gms</option></select></td>
</tr> 
```

我有一个 div，它根据用户在表单上输入的数量显示总值，如下所示：

```
<div><span class="thlist">Approx Total:</span> <span id="total" class="total">0</span></div> 
```

我试过这个：

```
<script type="text/javascript">
    $(document).ready(function(){

var tot = $('#total').html();

$('#item<?php echo $id?>').keyup(function(){

var itemValue = $('#item<?php echo $id?>').val() * <?php echo $price?>;

if($(this).val())
{
var tot = $('#total').html();
var totalVal = itemValue + parseInt(tot);
}
else
{
var totalVal = parseInt(tot) - itemValue;
}

    $('#total').text(totalVal);

}); 

}); 
```

但这不能正常工作，请需要您的专家建议如何使用 Jquery 执行此操作。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:45:47.260

[http://jsfiddle.net/eNFAY/](http://jsfiddle.net/eNFAY/)

首先，我会将保存价格的跨度类别从`tdlist`更改为`price`

`<span class="price">57</span>`

接下来，将一个类添加到您的数量输入`class="item_input"`并选择`class="measure"`

`<input type='text' maxlength=9 name='item2' value='1' id='item2' style="width:60px;" class="item_input" />`

`<select name='quantity1' id='quantity1' class="measure">`

从那里，我们可以编写我们的 js。请注意，假设单价是每公斤。如果您希望价格为每克，则需要更改`item_cost`计算。

```
$(document).ready(function () {
    $('.item_input, .measure').bind('keyup, change', function () {
        var total = 0;
        var item_qty = 0;
        var item_cost = 0;
        var measure = 'kg';
        $('.item_input').each(function () {
            item_qty = $(this).val();
            if (item_qty == '') {
                item_qty = 0;
            }
            parseFloat(item_qty);
            item_cost = parseFloat($(this).parent().prev().find('.price').html());
            measure = $(this).next('select').val();
            if (measure == 'gms') {
                item_cost = item_cost / 1000;
            }
            total = total + (item_cost * item_qty);
            // log to console for debugging
            console.log("item_qty=" + item_qty + ' item_cost=' + item_cost + ' measure=' + measure);
        });
        // log to console for debugging
        console.log(total);
        $('#total').html(total);
    })
    // call change event on ready to populate total on page load
    $('.item_input').change();
}); 
```

# image-processing - “未聚焦”图像的模拟

> ID：14626880
> 
> 赞同：4
> 
> 时间：2013-01-31T13:27:27.343
> 
> 标签：image-processing, opencv

我正在使用可编程轴控制器对显微镜进行自动对焦编程。为了测试，我实现了一个模拟，它根据曝光、轴位置等返回一个图像。模拟拍摄了一张好的图像，并扭曲了它——例如变得更亮、更暗。

良好对焦的首要指标是锐利的边缘（适用于我的图像类型）。基本上我总结了相邻像素之间的强度差异。总和越高，焦点越好。

**我的问题是，如何模拟未聚焦的图像？有人已经实施了吗？一系列过滤器会很棒。**

我试过 cvSmooth，但它没有给出实际的结果。

PS：我目前的解决方法是改变与焦点位置的距离成反比的 ROI 大小。它适用于测试我的算法，但不适用于演示 - 因为图像在模拟过程中不会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:36:47.727

（我不确定堆栈溢出是否适合您的问题，因为它是特定于域的）

**在点扩散函数**(PSF)的范围内查看您的显微镜。PSF 是描述显微镜中点状光源图像的函数。如果您从 3D 点扩散函数中获取单个平面，则您会在此轴向距离上出现散焦行为。用点扩散函数图像折叠你的图像，你就有了散焦的图像。此操作通常称为“折叠”、“卷积”或“带核平滑”。

当然，您的显微镜需要点扩散功能，并且有很多细节需要考虑 - 最重要的是，所涉及的光学器件类型、数值孔径等。请咨询相关的光学文献。Sibaritas[反卷积显微镜](http://www2.ujf-grenoble.fr/medecine/iab/clientzone/plforme9/fichiers/DeconvolutionMicroscopy_Sibarita_Springer.pdf)似乎是一个好的开始。

请注意，一般而言，3D 散焦涉及通过相位集成贝塞尔函数。如果轴向散焦在显微镜横向分辨率的大约 2 倍范围内，您可能可以使用高斯掩模来近似该行为。这就像普通显微镜上的一到两微米。对于较大的轴向散焦，您需要计算积分。我怀疑这是否在 OpenCV 的范围内，因此您需要预先计算散焦函数。

我的论文项目[rapidSTORM](http://www.super-resolution.biozentrum.uni-wuerzburg.de/research_topics/rapidstorm/)有一个石油目标的实现，但代码（pixelatedBessel.cpp）不在 opencv 中。

尤其是对于大光圈显微镜，计算变得相当复杂，然而——在我的实验室，我们通常更喜欢在显微镜上放置一个点状光源（例如量子点），让 Z 阶段完成这项工作。

# pdf - NSString 到 PDF 文件 - 格式化内容

> ID：14626881
> 
> 赞同：1
> 
> 时间：2013-01-31T13:27:33.760
> 
> 标签：pdf, nsstring, formatting

我想将 iPad 应用程序中存在的几个字段写入 PDF 文件。

例如名字，姓氏，出生日期，就业日期，雇主，地址等......

我能够捕获其中一个 NSString 中的所有字段（我正在附加由新行 \r\n 分隔的每个字段）。

但是当内容写入文件时，这是不正确的。

是否有可能以某种方式捕获列中的所有标题及其值并将其写入 PDF 文件？

问候，

尼拉夫

# arrays - VBA Excel 将范围存储为数组，提取公式的单元格值。其他变量的偏移量

> ID：14626883
> 
> 赞同：0
> 
> 时间：2013-01-31T13:27:45.073
> 
> 标签：arrays, loops, excel, range, vba

我对此有点陌生。我将如何获取列并将其单元格数据放入整数并遍历该范围内的所有值以将其放入函数中以将结果输出到 excel 工作簿中的另一列中。所以我的输出列将是整个 Comm 列，使用列 G、J 和 K 作为函数的输入`=100000*slotNumber+300*xpos+ypos`

```
 A    B     C      D     E    F       G          H    I       J    K
1 Proc Equip Operat Shift Comm Casette SlotNumber Diam Measure XPos YPos
2
3' 
```

所以想如果我获取每个值并创建一个 for 循环，我可以获取这些值并以某种方式完成所有这些，只是不知道如何！谢谢，麻烦您了！

编辑：我存储了所有列，现在我必须将数组值一一传递给函数，对于公式`Z = 100000*slotArr(i)+300xList(i)+yList(i)`，或者我可以将它放在 for 循环中。

编辑：将函数放在循环中......我得到一个对象超出范围错误......在函数的行。

```
Sub cmdMeans_Click()
Dim i As Long, j As Long
Dim slotList As Range, slotArr() As Variant, xList As Range, xArr() As Variant
Dim yList As Range, yArr() As Variant, cArr() As Variant

Set slotList = Range("P2", Range("P2").End(xlDown))
slotArr() = slotList.Value

Set xList = slotList.Offset(0, 4)
xArr() = xList.Value

Set yList = slotList.Offset(0, 5)
yArr() = yList.Value

'Only one counter required because of the dependancy on the range slotList
For i = 2 To UBound(slotArr, 1)
    'Dimensioning Array
    ReDim cArr(UBound(slotArr, 1), 1)
    cArr(i, 1) = (100000 * slotArr(i, 1)) + (300 * xList(i, 1)) + yList(i, 1)
    'MsgBox ("Comment Cell Value" & cArr(i, 1))
Next

'Resizing Array
ReDim Preserve cArr(i)
'This is where the new values will be written to the comment column

Dim cRng As Range
Set cRng = Range(Cells(14, 1), Cells(UBound(cArr(i))))
cRng.Value = Application.Transpose(cArr)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:57:37.083

我很担心看你的样本 - appolgy 但真的不是***`decipherable`***......所以我坚持你的问题标题和评论：

***`VBA Excel Store Range as Array, extract cell values for formula. Offset for other variables`***.

**如何将范围存储为数组：-**

```
Dim vArray as Variant

vArray = Sheets(1).Range("A2:G50").Value) 
```

**如何将数组传递给以数组为参数并返回数组的函数：-**

```
Function passArray(ByRef vA as Variant) as Variant
   Dim myProcessedArray as Variant
   '----your code goes here

   passArray = myProcessedArray
End Function 
```

**将一维数组输出到工作表范围：-**

```
Sheets(1).Range("E2").Resize(1, _
         UBound(Application.Transpose(singleDArray))) = singleDArray 
```

**将多维数组输出到工作表范围：-**

```
Sheets(1).Range("E2").Resize(UBound(multiDArray) + 1, _
UBound(Application.Transpose(multiDArray))) = multiDArray 
```

# .net - PostSharp 1.5、.net 3.5 和 Visual Studio 2012

> ID：14626887
> 
> 赞同：1
> 
> 时间：2013-01-31T13:28:04.437
> 
> 标签：.net, visual-studio-2012, postsharp

我将此作为类似问题的答案发布，但没有得到回应，所以在这里试试运气。

我们有一个 PostSharp 1.5 运行良好的 .net 2.0 程序集。我们已获准升级到使用 VS2012。

该项目已由 VS2012 自动转换，但出现错误。我已经确保在所有项目中都以 .net 3.5 为目标，但我仍然得到

```
 Error   27  Unhandled exception: PostSharp.CodeModel.BindingException: Cannot find the type 'System.Func`2' in assembly 'System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
 at PostSharp.CodeModel.AssemblyEnvelope.GetTypeDefinition(String typeName, BindingOptions bindingOptions)
 at PostSharp.CodeModel.Domain.FindTypeDefinition(String assemblyQualifiedTypeName, BindingOptions bindingOptions)
 at PostSharp.CodeModel.TypeRefDeclaration.GetTypeDefinition(BindingOptions bindingOptions)
 at PostSharp.CodeModel.TypeSpecDeclaration.GetTypeDefinition(BindingOptions bindingOptions)
 at PostSharp.Extensibility.Tasks.IndexGenericInstancesTask.Execute()
 at PostSharp.Extensibility.Project.ExecutePhase(String phase)
 at PostSharp.Extensibility.Project.Execute()
 at PostSharp.Extensibility.PostSharpObject.ExecuteProjects()
 at PostSharp.Extensibility.PostSharpObject.InvokeProject(ProjectInvocation projectInvocation)
 at PostSharp.MSBuild.PostSharpRemoteTask.Execute(PostSharpTaskParameters parameters, TaskLoggingHelper log) 
```

我检查了对 System.Core 的引用，它肯定指向版本 3.5.0.0，所以上面的 4.0.0.0 引用也让我有些困惑。

我读过 PostSharp 1.5 在针对 3.5 和 4.0 的 VS 2010 中运行良好。但是有些人不得不在项目文件等中做一些魔法黑客。

有没有人如上所述设置环境？（.net 3.5、VS2012 和 PostSharp 1.5）

我已经在寻找替代方案，并且 PostSharp 2.0 的社区版本看起来像是要走的路。但与此同时，这可以在当前环境下完成吗？黑客需要什么？

干杯

果酱

更新：这里的一个人认为这可以通过破解 MSBuild 工具集来实现。任何人都可以解释一下吗？

更新：在下面添加属性组代码部分后，VS 2012 给了我这个：

```
Error   26  The PostSharp build step failed (exit code 9009). See previous errors or the build log for details. Connectivity.Service.Client.Acl – 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T08:35:45.633

该错误是由于 PostSharp 1.5 中的缺陷已在 PostSharp 2.0 中解决。由于 Microsoft 尚未使用类型转发器，因此在维护 PostSharp 1.5 时该错误并未暴露。

# xpages - 如何处理 Xpage 中的本地化数值？

> ID：14626897
> 
> 赞同：1
> 
> 时间：2013-01-31T13:28:26.810
> 
> 标签：xpages, xpages-ssjs

我有一个包含三个字段的 Xpage，全部声明为 Number；名义、价格和付款金额。我想使用名义 * 价格计算 PaymentAmount。

在 SSJS onChange 我使用以下代码：

```
var price = getComponent("Price").getValue(); 
```

从“价格”字段中获取值。

在瑞典，我们输入数值为 #.###,## 1.234,56

如果我在我的 Xpage 中输入值 Nominal=10 和 Price=2,5 并尝试使用上述公式计算存储在 var "price" 中的值将转换为 25 并且类型为 long。

请指教

/米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:49:56.890

我是个白痴，不幸的是。

做过这个：

```
<inputText value="#{document1.Price}" id="Price" required="true" size="10">
    <this.validators>
        <validateRequired message="Price is required">
        </validateRequired>
    </this.validators>
    <this.converter>
        <convertNumber type="number" locale="sv">
        </convertNumber>**
    </this.converter>
</inputText> 
```

它有效！

谢谢大家的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:41:35.627

我认为“价格”是一个编辑框？如果是这样，您可以将其设置为数字字段，然后将显示格式设置为货币。货币代码将定义该数字的显示方式。

![在此处输入图像描述](../Images/621a3b768ee2a79984f9f68f2a32b8d5.png)

当您获得组件值时，它应该作为您可以使用的正常数字返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:41:38.307

`getComponent`获取 UI 组件值，这就是为什么它不一定反映将要保存的数据类型（在 UI 中一切都是字符串）。这也是一种获取价值的缓慢方式。

试试`datasourcename.getItemValueDouble("itemname")`吧。请注意，您需要在 Form 上使用字段名称，而不是组件名称。

关于数字格式，请确保您的 djConfig 语言环境是瑞典，可能是`se-se`. 对我在芬兰来说，它看起来像这样：

```
<script type="text/javascript" src="/xsp/.ibmxspres/dojoroot-1.6.1/dojo/dojo.js" djConfig="locale: 'fi-fi', parseOnLoad: true"></script> 
```

它应该使用浏览器语言环境。要在 SSJS 中强制执行此操作，您可以执行以下操作：

```
context.setLocaleString("se-SE"); 
```

在*beforePageLoad*事件中。

# asp.net-mvc - 将 MVC 部署到共享主机导致安全异常

> ID：14626898
> 
> 赞同：1
> 
> 时间：2013-01-31T13:28:26.810
> 
> 标签：asp.net-mvc, deployment, shared-hosting

我正在尝试将我的 MVC3（我也尝试过 MVC4）发布到我的共享主机（安装了 MVC3），但是我收到了这个安全异常：

> 安全异常
> 
> 说明：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

```
Exception Details: System.Security.SecurityException: Request failed. 
```

> 源错误：

```
Line 20: @foreach (var item in Model) { 
```

以下是错误的前几行：

```
System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessSecurityEngine.Check(PermissionSet permSet, StackCrawlMark& stackMark) +31
   System.Security.PermissionSet.Demand() +68
   System.Data.LocalDBAPI.**DemandLocalDBPermissions**() +241
   System.Data.LocalDBAPI.CreateLocalDBInstance(String instance) +32
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) +5306971
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +145
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +262
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +225 
```

我的共享主机运行信任级别 = 中。所以在我本地机器上的项目中，我还在网络配置中将信任设置为中等，它运行得很好：

```
<trust level="Medium" originUrl="" /> 
```

我将我的数据库上传到服务器，所以我没有重新使用 EF 在服务器上重建我的数据库。

但看看错误，我认为**LocalDbConnectionFactory**可能是罪魁祸首？还是应该在部署后留在那里？我的 web.config 的一部分：

```
<connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=liveServer,com;Initial Catalog=sarmie;Persist Security Info=True;User ID=liveServer;Password=liveServer;" providerName="System.Data.SqlClient" />
</connectionStrings>
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
<parameters>
    <parameter value="v11.0" />
</parameters>
</defaultConnectionFactory>
</entityFramework> 
```

这是我的上下文类：

```
public class MvcApplication4Context : DbContext
    {
        //public MvcApplication4Context()
        //{
        //    System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges<MvcApplication4.Models.MvcApplication4Context>());
        //}

        public DbSet<MvcApplication2.Models.Ad> Ads { get; set; }
    } 
```

我错过了什么吗？共享主机是否应该安装一些东西来使 LocalDB 工作？或者有没有办法绕过这个并使我的 LINQ 查询工作？

请帮忙

问候大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:05:56.537

您需要[选择正确的数据库初始化程序](http://sankarsan.wordpress.com/2010/10/14/entity-framework-ctp-4-0-database-initialization/)。

如果您使用的是*可以*创建数据库的初始化程序，那么当这种情况发生时，它将在您的托管方案中*失败。*

您可能需要考虑使用 EF 迁移，因为它们可以“就地”更新架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:38:27.457

好的，这花了我一些时间才弄清楚。第一步，不要使用LOCALDB或LocalDbConnectionFactory，我认为共享主机不支持。[而是使用此处](https://stackoverflow.com/questions/4762857/using-sql-server-ce-4-on-a-remote-host-with-mvc-3/5430976#5430976)提到的 SQLCE 4.0

通过 nuget 安装 EntityFramework.SqlServerCompact

请记住将其放入您的 web.config 中（如果尚未添加）。MvcApplication8.Models.MvcApplication8Context 将是您的上下文类：

```
<connectionStrings>
  <add name="MvcApplication8.Models.MvcApplication8Context" connectionString="Data Source=|DataDirectory|mvc8Context.sdf" providerName="System.Data.SqlServerCe.4.0" />
  <add name="DefaultConnection" connectionString="Data Source=****;Initial Catalog=testing;Persist Security Info=True;User ID=****;Password=****;" providerName="System.Data.SqlClient" />
</connectionStrings>

<entityFramework>
 <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="System.Data.SqlServerCe.4.0" />
  </parameters>
 </defaultConnectionFactory>
</entityFramework>
<system.data>
<DbProviderFactories>
  <remove invariant="System.Data.SqlServerCe.4.0" />
  <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
</DbProviderFactories>
</system.data> 
```

如上面链接中所述，请记住将以下 DLL 设置为“复制本地”= true。Entityframework SqlserverCE SqlserverCE.Entity

然后，您需要将您的数据库从本地 PC 复制/导出到共享主机。

作为旁注：不要使用自动映射器，我已经尽一切努力使这项工作在中等信任下工作，我认为这是不可能的。你会得到错误：

> System.Security.SecurityException：请求“System.Security.Permissions.ReflectionPermission，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。我现在正在使用 valueinjecter，它运行良好。

现在它终于开始工作了。

# wpf - XAML Datagrid 列宽问题

> ID：14626899
> 
> 赞同：0
> 
> 时间：2013-01-31T13:28:27.463
> 
> 标签：wpf, width, wpfdatagrid

我有 WPF 数据网格。我想用

i）“描述”文本块的最大可用宽度（存在于第一列内）
ii）图像控件的自动宽度（存在于第一列内）和
iii）列其余部分的“自动”宽度。

我已经编写了以下 xaml 代码。但是宽度不能按要求工作。

**编辑** 问题：相反，第二列文本被截断。

截屏：

![在此处输入图像描述](../Images/8970884720e573d3e24a45dd621672c9.png)

有什么建议么？谢谢！

```
 <Grid Margin="10,0,10,0">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <DataGrid Grid.Row="0" Grid.ColumnSpan="2"  ItemsSource="{Binding SelectedItemsCollectionView}" HorizontalAlignment="Stretch" AutoGenerateColumns="False">

            <DataGrid.Columns>
                <!--Get maixmum available space for 1st Column-->
                <DataGridTemplateColumn Width="*">

                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Grid Margin="5,0,0,0">
                                <Grid.ColumnDefinitions>

                                   <!--Get "Auto" space for Image control-->
                                    <ColumnDefinition Width="Auto" />

                                   <!--Get remaining available space for Description textblock-->  
                                    <ColumnDefinition Width="*" ></ColumnDefinition>

                                </Grid.ColumnDefinitions>

                                <Image Grid.Column="0" Stretch="None" Margin="0,0,5,0" Source="{Binding Converter={StaticResource ShowHideToImageConverterRef}, Path=IsHidden}"
                                       Visibility="{Binding Converter={StaticResource VisibilityConverterRef}, Path=RowType}" HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="{Binding Description}"  VerticalAlignment="Center" HorizontalAlignment="Left" />
                            </Grid>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!--Get "Auto" space for 2nd Column-->
                <DataGridTextColumn Binding="{Binding Comments}" Width="Auto"   /> 

            </DataGrid.Columns>
        </DataGrid>

        <Label Grid.Row="1" Grid.Column="0" Content="Name"  ></Label>
        <TextBox Grid.Row="1" Grid.Column="1" Margin="10,0,0,0" Text="{Binding EmpName}"/>

    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:36:01.707

[在应用 Scott 在其他 stackoverflow 帖子“ DataGrid column width doesn't auto-update](https://stackoverflow.com/questions/5549099/datagrid-column-width-doesnt-auto-update) ”上建议的以下解决方案后，问题已解决。

1）在您的 DataGridTextColumn 绑定（除您的 * 大小列之外的所有列）中设置 NotifyTargetUpdated=True。
2) 在您的 DataGrid 上，将处理程序添加到 TargetUpdated 事件。
3) 在 TargetUpdated 事件处理程序中：
-- a) 将 DataGrid 的 * 大小列的宽度设置为 0。
-- b) 在 DataGrid 上调用 UpdateLayout() 方法。
-- c) 将 DataGrid 的 * 大小列的宽度设置回 new DataGridLength(1, DataGridLengthUnitType.Star)

# ruby-on-rails - 如何在rails中通过tcp发送值？

> ID：14626900
> 
> 赞同：0
> 
> 时间：2013-01-31T13:28:28.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sockets, tcp

我正在开发 Rails 应用程序，以下是我已经做过和需要做的事情。

1.  我正在为 iphone 应用程序使用 rails，并且我有一个用于将值发送到服务器的 api。
2.  当用户将值发送到服务器时，该值必须存储在 db 中，我需要将值显示给其他用户。
3.  另一个用户应该监听 tcp 服务器并且该用户应该接收到该值。
4.  我已经阅读了来自[https://www6.software.ibm.com/developerworks/education/l-rubysocks/l-rubysocks-a4.pdf](https://www6.software.ibm.com/developerworks/education/l-rubysocks/l-rubysocks-a4.pdf)的几个示例以及其他几个示例，但我不知道如何继续。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:49:13.167

You can just use plain http (or https) to communicate with iphone app.

# prestashop - 如何在 PrestaShop 中创建类别/子类别友好 URL？

> ID：14626903
> 
> 赞同：0
> 
> 时间：2013-01-31T13:28:41.313
> 
> 标签：prestashop

我有一个关于格式化类别和子类别的友好 URL 并获取匹配产品的问题。我正在使用 PrestaShop 1.5.2.0

假设我们有这样的结构：

**第一类**

*   备件
*   配件

**第 2 类**

*   筹码
*   配件

我想显示这样的链接：**/category-1/accessories**并显示类别 1->accessories 中的产品。我怎样才能做到这一点？

当前的行为是当我单击附件时，属于类别 1，链接是**/accessories**并且显示的产品属于 /category-1/accessories 和 /category-2/accessories

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:33:38.523

这个问题在 PrestaShop 论坛上得到了回答。你可以在这里找到它[http://www.prestashop.com/forums/topic/220017-category-subcategory-url/](http://www.prestashop.com/forums/topic/220017-category-subcategory-url/)

解决方案 - 将此更改添加到休闲课程

**类/Dispatcher.php**

```
'rule' => '{categories:/}{id}-{rewrite}/',
'categories' => array('regexp' => '[/_a-zA-Z0-9-\pL]*'), 
```

**类/链接.php**

```
$cats = array();    
foreach ($category->getParentsCategories() as $cat)    
if (!in_array($cat['id_category'], array(1, 2, $category->id)))//remove root, home and current category from the URL    
$cats[] = $cat['link_rewrite'];    
$params['categories'] = implode('/', array_reverse($cats)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-22T19:43:50.847

上述代码对旧版本有效，但不适用于较新/最新版本。我为较新的版本（1.7.7.4.）更新了相同的解决方案，它可能用于其他人。

更改课程/`Dispatcher.php`

在上述文件中的大约第 55 行复制粘贴

```
public $default_routes = [
        'category_rule' => [
            'controller' => 'category',
             **/**  added 1 line below*/
            'rule' => '{category:/}{id}-{rewrite}/',
             /** commented   1line below*/
            /**'rule' => '{id}-{rewrite}',*/
            'keywords' => [
                'id' => ['regexp' => '[0-9]+', 'param' => 'id_category'],
                /*** added  1 line below*/
                'category' => ['regexp' => '[_a-zA-Z0-9-\pL]*'],
                'rewrite' => ['regexp' => self::REWRITE_PATTERN],
                'meta_keywords' => ['regexp' => '[_a-zA-Z0-9-\pL]*'],
                'meta_title' => ['regexp' => '[_a-zA-Z0-9-\pL]*'],**
            ],
        ], 
```

在文件 classes/`link.php`中找到函数`getCategoryLink`并将其替换为下面的函数代码

```
 /**
     * Create a link to a category.
     *
     * @param mixed $category Category object (can be an ID category, but deprecated)
     * @param string $alias
     * @param int $idLang
     * @param string $selectedFilters Url parameter to autocheck filters of the module blocklayered
     *
     * @return string
     */
    public function getCategoryLink(
        $category,
        $alias = null,
        $idLang = null,
        $selectedFilters = null,
        $idShop = null,
        $relativeProtocol = false
    ) {
        $dispatcher = Dispatcher::getInstance();

        if (!$idLang) {
            $idLang = Context::getContext()->language->id;
        }

        $url = $this->getBaseLink($idShop, null, $relativeProtocol) . $this->getLangLink($idLang, null, $idShop);

        // Set available keywords
        $params = [];

        if (!is_object($category)) {
            $params['id'] = $category;
        } else {
            $params['id'] = $category->id;
        }

        // Selected filters is used by the module ps_facetedsearch
        $selectedFilters = null === $selectedFilters ? '' : $selectedFilters;

        if (empty($selectedFilters)) {
            $rule = 'category_rule';
        } else {
            $rule = 'layered_rule';
            $params['selected_filters'] = $selectedFilters;
        }

        if (!$alias) {
            $category = $this->getCategoryObject($category, $idLang);
        }
        $params['rewrite'] = (!$alias) ? $category->link_rewrite : $alias;
        if ($dispatcher->hasKeyword($rule, $idLang, 'meta_keywords', $idShop)) {
            $category = $this->getCategoryObject($category, $idLang);
            $params['meta_keywords'] = Tools::str2url($category->getFieldByLang('meta_keywords'));
        }
        if ($dispatcher->hasKeyword($rule, $idLang, 'meta_title', $idShop)) {
            $category = $this->getCategoryObject($category, $idLang);
            $params['meta_title'] = Tools::str2url($category->getFieldByLang('meta_title'));
        }

        if ($category !='var'){
        $category = $this->getCategoryObject($category, $idLang);
        $pcategory= new Category($category->id_parent, $idLang);
        if($category->id_parent!=1 && $category->id_parent!=2){
            $params['category'] = $pcategory->link_rewrite;
            //append the categoryID with its name
            $params['category'] = $category->id_parent . '-'. $params['category'];
        }
    }

        return $url . Dispatcher::getInstance()->createUrl($rule, $idLang, $params, $this->allow, '', $idShop);
    } 
```

在相同的文件 classes/link.php 中更新 if 条件如下在代码中的第 218 行 (function getProductLink)

```
if ($dispatcher->hasKeyword('product_rule', $idLang, 'categories', $idShop)) {
            $product = $this->getProductObject($product, $idLang, $idShop);
            $params['category'] = (!$category) ? $product->category : $category;
            $cats = [];

            foreach ($product->getParentCategories($idLang) as $cat) {

                if (!in_array($cat['id_category'], Link::$category_disable_rewrite)) {
                    //remove root and home category from the URL
                    //commented the line below 
                    //$cats[] = $cat['link_rewrite'];
                    //replaced the above line with the line below to append the category ID in the products link

                    $cats[] = $cat['id_category'].'-'.$cat['link_rewrite'];
                }
            }
            $params['categories'] = implode('/', $cats);
        } 
```

我碰巧使用的是 prestashop 版本 1.7.7.4。您可以在我的网站[https://jinbaba.pk上看到此解决方案](https://jinbaba.pk)

同样在代码文件中进行上述更改后，不要忘记更新`shopparameters-->SEO&URL`设置，更改类别和产品路线如下（如果它们还不是这样）

`"Route to category" = {category:/}{id}-{rewrite}`

`"Route to product" = {categories:/}{id}{-:id_product_attribute}-{rewrite}{-:ean13}.html`

只是对 SEO 的建议：您不需要从 URL 中删除类别 ID 和产品 ID。它们对 SEO 的影响很小或没有影响。

about 解决方案也适用于 2 级嵌套，例如

yourdomain.com/category-1/category-2/1-product.html

不要在目录中创建更多的类别嵌套。如果您打算创建更深的嵌套站点，则需要更新此解决方案。但是，对于 SEO，不建议使用深度嵌套。

# asp.net - 如何将对象列表从视图传递到 mvc3 中的控制器？

> ID：14626904
> 
> 赞同：0
> 
> 时间：2013-01-31T13:28:43.707
> 
> 标签：asp.net, asp.net-mvc

```
public class EmployeeViewModel
    {
        public Employee Employee { get; set; }
        public IList<Address> Addresses { get; set; }
    } 
```

控制器 ：-

```
[HttpPost]
    public ActionResult InsertAddress(EmployeeViewModel model)
    {
           //code for insert data into db
    } 
```

看法 ：- ![在此处输入图像描述](../Images/1cb0107ddccf27316bb95657a7f903fa.png)

在这里，我想通过将多个地址对象以及单个员工对象从视图传递到控制器来调用 InsertAddress 操作。

是否可以 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:35:03.747

您只需要使用正确的命名约定来让模型绑定器理解。

财产.财产

或者

属性[索引]. 集合的属性

如果索引不是基于 0 的顺序，则需要添加一个隐藏字段 Property.Index 以及索引的值

例子：

```
<input name="Employee.Name" value="1234 5678"/>
<input name="Employee.Phone value="1234 5678"/>
<input name="Employee.Email" value="me@example.com"/>
<input name="Addresses.Index" value="0" type="hidden"/>
<input name="Addresses[0].Suburb" value="Melbourne"/>
<input name="Addresses[0].Postcode" value="3000"/>
<input name="Addresses.Index" value="1" type="hidden"/>
<input name="Addresses[1].Suburb" value="Sydney"/>
<input name="Addresses[1].Postcode" value="2000"/> 
```

插入行时，只需使用命名约定，不要忘记添加 .Index 字段。

如果您为您的 Address 类创建自定义 EditorTemplate，大多数默认 EditorFor 将为您透明地处理所有这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:33:43.420

是的，有可能，但需要您做一些工作。

您需要为您的 Address 类创建一个 EditorTemplate ，然后在主视图中使用`@Html.EditorFor(m => m.Addresses)`

此设置将导致您的`EmployeeViewModel`实例返回到包含完整地址列表（而不是为空）的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T23:39:05.033

我在绑定复杂模型时提到了一些常见问题，请看这里 [http://jayakarant.blogspot.de/2014/05/handling-complex-view-models-in-razor.html](http://jayakarant.blogspot.de/2014/05/handling-complex-view-models-in-razor.html)

# perl - 更新：在一行中初始化和清除多个哈希

> ID：14626908
> 
> 赞同：3
> 
> 时间：2013-01-31T13:28:49.903
> 
> 标签：perl

如何在一行中初始化和清除多个哈希。

前任：

```
my %hash1 = ();
my %hash2 = ();
my %hash3 = ();
my %hash4 = (); 
```

到

```
my ( %hash1, %hash2, %hash3, %hash4 ) = ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:37:30.070

就像做一样简单

```
my ( %hash1, %hash2, %hash3, %hash4 ); 
```

并且它们此时将不包含任何键或值。

相同的技术适用于标量和数组。

对于`undef`多个哈希，你可以做

```
undef %$_ for ( \%hash1, \%hash2 ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T13:56:15.943

看来（从您的评论中）您确实想清空其中已经包含内容的哈希。你可以这样做：

```
(%hash1,%hash2,%hash3) = (); 
```

完整示例：

```
use strict;
use warnings;

my %hash1 = ('foo' => 1);
my %hash2 = ('bar' => 1);
my %hash3 = ('baz' => 1);

(%hash1,%hash2,%hash3) = ();

print (%hash1,%hash2,%hash3); 
```

变量声明总是为您提供一个空变量，因此无需将其设置为空。即使在循环中也是如此：

```
for (0..100)
{
    my $x;
    $x++;
    print $x;
} 
```

`1`这将一遍又一遍地打印；即使您可能希望`$x`保留它的价值，它也不会。

**解释：** Perl 允许像`($foo,$bar) = (1,2)`. 如果右侧的列表较短，则分配任何剩余的元素`undef`。因此，将空列表分配给变量列表会使它们全部未定义。

设置一堆东西的另一种有用方法是`x`操作符：

```
my ($x,$y,$z) = (100)x3; 
```

这会将所有三个变量都设置为 100。不过，它对于散列来说效果不佳，因为每个变量都需要一个分配给它的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:31:09.800

您可以将其初始化为：

我的 %hash1 = %hash2 = %hash3 = %hash4 = ();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:48:57.533

您无需为**新**变量分配任何内容以确保它为空。如果没有分配任何变量，所有变量都是空的。

```
my %hash;  # hash contains nothing
%hash = () # hash still contains nothing 
```

*将空*列表分配给散列的唯一一次是如果您想删除以前分配的值。即便如此，只有在无法通过对散列应用*正确的范围*限制来解决的情况下，这才是有用的事情。

```
my (%hash1, %hash2);
while (something) {
    # some code
    (%hash1,%hash2) = ();   # delete old values
} 
```

清空哈希。最好写成：

```
while (something) {
    my (%hash1, %hash2);    # all values are now local to the while loop
    # some code
} 
```

# hadoop - 发送到 Mapper 类中的 map 方法的值不正确或读取不完整

> ID：14626910
> 
> 赞同：0
> 
> 时间：2013-01-31T13:28:53.483
> 
> 标签：hadoop, amazon-s3, amazon-emr, emr

我有一个由 3 个步骤组成的工作。我的输入是存储在 Amazon S3 中的加密 JSON 对象（每行一个）。(s3e://)。

作业参数：

```
job.setInputFormatClass(TextInputFormat.class);
job.setOutputFormatClass(TextOutputFormat.class);
job.setOutputKeyClass(Text.class);
job.setOutputValueClass(Text.class); 
```

其他一些重要参数：

```
mapred.min.split.size           0
mapred.job.reuse.jvm.num.tasks  -1
fs.s3.block.size             67108864 
```

我面临的问题是我的第二步的映射器几乎总是失败，除了我的 JSON 被错误地终止。经过进一步调查，我确定 JSON 本身在输入文件中是正确的，并且是映射器读取了不完整的值。读取的值`TextInputFormat`不完整且错误终止。

```
JsonException Value: {..."tag_action_code":"ndi","tag_value":"tribhutes
FATAL - JSON exception while handling exception 
org.json.JSONException: Unterminated string at character 390
    at org.json.JSONTokener.syntaxError(JSONTokener.java:410)
    at org.json.JSONTokener.nextString(JSONTokener.java:244)
    at org.json.JSONTokener.nextValue(JSONTokener.java:341)
    at org.json.JSONObject.<init>(JSONObject.java:190)
    at org.json.JSONObject.<init>(JSONObject.java:402)
    at com.amazon.associates.lib.ExtractItemMapReduce.putItemProcessingStateToExtracItemText(ExtractItemMapReduce.java:92)
    at com.amazon.associates.mapred.common.FatTireMapper$1.putItemProcessingState(FatTireMapper.java:51)
    at com.amazon.associates.mapred.common.FatTireMapReduceExecutor.handleException(FatTireMapReduceExecutor.java:35)
    at com.amazon.associates.mapred.common.FatTireMapperExecutor.execute(FatTireMapperExecutor.java:55)
    at com.amazon.associates.mapred.common.FatTireMapper.map(FatTireMapper.java:63)
    at com.amazon.associates.mapred.common.FatTireMapper.map(FatTireMapper.java:21)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Filename: part-00004 Split Details: Start: 0 Length: 593575152
Key: 536936059 Value: {..."tag_action_code":"ndi","tag_value":"tribhutes 
```

这种情况一直在发生。但有趣的是，有时第二步通过，第三步失败。

我的测试数据非常庞大，在成功完成第一步（总是通过）后，我得到了 5 550-600 MB 的检查点间歇文件，这些文件将输入到第二步。

在第二步的输入未加密的尝试之一中，它成功了。

我很困。任何类型的指针或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:31:02.070

您的加密方案是否有可能记录的加密版本可能包含换行符？如果是这样，这将导致 Hadoop 错误地将 JSON 对象视为两个单独的记录。这是我对这里发生的事情的猜测。使用 TextInputFormat 时，请务必非常小心地从数据中转义或删除换行符。

# c# - 旧列表的唯一值

> ID：14626916
> 
> 赞同：3
> 
> 时间：2013-01-31T13:29:13.627
> 
> 标签：c#, linq, list

> **可能重复：**
> [从列表中删除子列表](https://stackoverflow.com/questions/14388834/remove-sublist-from-a-list)

我有 2 个列表：

```
var oldList = new List<int>(){1,2,3,4,5};

var newList = new List<int>(){1,2,3,6,7}; 
```

我怎样才能拥有旧列表的唯一值（使用 LINQ）？

```
//hardcoded list:
var list =  new List<int>(){4,5};

//LINQ:
var list = ?? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:30:38.030

```
var unique = oldList.Except(newList); 
```

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:30:45.900

```
var list = oldList.Except(newList).ToList(); 
```

这意味着它将返回所有`oldList`不在的元素`newList`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:31:07.663

您的意思是 oldList 中的值不在 newList 中？如果是这样的话：

```
var list = oldList.Except(newList); 
```

请参阅MSDN 上的[Enumerable.Except](http://msdn.microsoft.com/en-us/library/bb300779.aspx)。

`ToList()`如果您确实需要列表，请添加呼叫。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T13:31:54.617

你可以使用[`Enumerable.Except()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)方法。

> 产生两个序列的集合差。

```
var oldList = new List<int>() { 1, 2, 3, 4, 5 };
var newList = new List<int>() { 1, 2, 3, 6, 7 };

var value = oldList.Except(newList);

foreach (var i in value)
{
    Console.WriteLine(i);
} 
```

这是一个[`DEMO`](http://ideone.com/4bfoBC).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T13:32:59.687

你必须有`Except`方法。

```
var list = oldList.Except(newList); 
```

> 产生两个序列的集合差。[[文档](http://msdn.microsoft.com/en-us/library/bb356791.aspx)]

# android - Jellybean 升级 - 在 itemchecked 后调用 setOnItemClickListener

> ID：14626917
> 
> 赞同：0
> 
> 时间：2013-01-31T13:29:19.543
> 
> 标签：android, android-4.2-jelly-bean, onitemclicklistener, checkedtextview, ischecked

我正在尝试捕获对我的列表视图的点击，其中包含一个checkedtextview 我的代码如下

```
listview.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) 
        { 
            CheckedTextView Item_Check = (CheckedTextView) view;
            if (Item_Check.isChecked())
            {
//code to handle the when item is turned off 
//i.e. previous state was checked and presently its being unchecked
            }
            else 
            {
            } 
```

这在 ICS 中运行良好，但是在 Jellybean 中我遇到了完全相反的情况，即当按钮打开时，我的关闭代码正在执行，反之亦然。

Jellybean 中是否有任何变化导致了这种情况，我的意思是当 setOnItemClickListener 被调用时，或者它是我采取的错误方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:33:08.490

这实际上是一个已知的 Android 错误，如下所示：[https ://code.google.com/p/android/issues/detail?id=35885](https://code.google.com/p/android/issues/detail?id=35885)

我只是偶然发现了同样的问题，我目前正在尝试为它找到一个好的和简单的解决方法。有东西我就发上来。

# c# - c#中的表单失去焦点

> ID：14626919
> 
> 赞同：2
> 
> 时间：2013-01-31T13:29:22.113
> 
> 标签：c#

我有一个主表单，打开表单A，从表单AI可以打开表单B，从表单BI可以打开表单C。问题是如果我打开到表单B，一切正常，但是如果我打开表单C同样，然后关闭表格C和B，表格A在主表格后面。对于表单，我只是创建表单的一个实例，然后使用`.Show()`

```
cNewForm form = new cNewForm();
form.Show(); 
```

我为每种形式都这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:37:23.687

您没有正确设置窗口所有权，因为您使用的是`Show()`. 您需要通过调用[`Show()`](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)接收所有者参数的重载来设置所有者。或者，您可以[`Owner`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.owner.aspx)直接设置属性，但最好在调用`Show()`.

窗口所有者是一个重要的 Win32 概念。我建议阅读有关该主题的[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)。

> *   在 z 顺序中，拥有的窗口始终位于其所有者之上。
> *   当所有者被销毁时，系统会自动销毁拥有的窗口。
> *   拥有的窗口在其所有者最小化时被隐藏。

在您的情况下，我认为您希望表格 A 归主表格所有，表格 B 归表格 A 拥有，表格 C 归表格 B 所有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:35:16.793

我经常发现这些类型的问题可以通过将所有者分配给 windows 来解决。当您显示窗口时：

```
FormA formA = new FormA();
formA.Show(this); // assuming this code is in the main form 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:34:03.030

尝试使用`ShowDialog();`方法而不是将`show()`其显示为模态形式。见[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog%28v=vs.71%29.aspx)

# exception - GWT RPC 调用失败

> ID：14626922
> 
> 赞同：0
> 
> 时间：2013-01-31T13:29:35.993
> 
> 标签：exception, gwt, parameters, rpc

我创建了一个远程过程调用。服务器端连接到 Web 服务，以获取信息，然后将其交给客户端。这是客户端代码。

```
public void statusFor(GwtLaneServiceAsync laneProxy){

    AsyncCallback<LaneInformation> callback = new AsyncCallback<LaneInformation>()
    {

        @Override
        public void onFailure(Throwable caught)
        {

        }

        @Override
        public void onSuccess(LaneInformation information)
        {
            doStatusForSuccess(information);
        }
    };

    for (Lane lane : this.mainmenu.getSlidePanel().getLaneMenu().getProperLanes().values())
    {
        if (lane.isChecked().booleanValue())
            laneProxy.statusFor("admin", "password", true, lane.getId(), callback);
        else
            laneProxy.statusFor("admin", "password", false, lane.getId(), callback);
        this.laneIndex++;
    }
} 
```

现在我想做以下...

当服务器无法访问 Web 服务时，会引发 WebServiceException。如果发生这种情况，我想在我的 GUI 按钮之一上键入“离线”。但我需要告诉哪个按钮。它不能被硬编码，因为它取决于 Web 服务失败的“通道”。

1.  我需要捕捉异常
2.  我需要告诉“onFailure”-Part，服务在哪条车道上失败了。我可以以某种方式将 statusFor()-Parameters 传递给该部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:51:43.220

没有办法处理这种情况。当服务器无法访问 Web 服务时，您可以从服务器端抛出任何自定义异常。然后它会`onFailure`阻塞。或者您可以在响应变量中返回任何消息字符串。这里您使用的是 `LaneInformation`bean 的响应变量。所以在那里取新变量`result`，并根据您的要求设置消息。

`OnFailure`只有在 RPC 调用中发生任何异常或发生任何错误时才会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:51:17.163

为什么不将您包装`LaneInformation`在通用响应对象中并将异常/错误代码添加到该响应中，以表明服务器端出现问题，例如：

```
public class RemoteResult<T> 
{
    T payload;
    String errorCode;
} 
```

和

```
public abstract class AbstractAsyncCallBack<T> implements AsyncCallback<RemoteResult<T>>
{
    public void onSuccess( RemoteResult<T> rr ) 
    {
        if ( rr.getErrrorCode() != null ) { failure( rr.getErrorCode() ); }
        else { success( rr.getPayload() ); }
    }

    public abstract void success( T payload );
    public void failure( String errorCode ) { /* Ignore by default */ }
} 
```

总而言之，当服务器无法连接到其他服务时，您不应该在服务器端抛出异常，您应该很好地与客户端通信，而不是通过（重新）抛出异常:-)

该`onFailure()`方法主要用于 RPC 通信中出现问题时。

干杯，

# java - 无法从 Controller 外部的 MessageSource 获取消息

> ID：14626926
> 
> 赞同：5
> 
> 时间：2013-01-31T13:29:47.847
> 
> 标签：java, spring

当我尝试在 @Controller 类中获取消息时，一切正常，但是当我尝试在 @Service 或 @Component 类中实现相同时，我收到以下错误：

```
org.springframework.context.NoSuchMessageException: 
No message found under code 'email.ativacao.title' for locale 'pt_BR'. 
```

我的控制器：

```
@Controller
public class TestController {

    @Autowired
    TestService service;

    @Autowired
    TestComponent component;

    @Autowired
    private MessageSource message;

    @RequestMapping(value = "/send", method = RequestMethod.GET)
    public String go() {

            String message = message.getMessage
                   ("email.ativacao.title", null, new Locale("pt", "BR"));

            service.getMessage();

            component.getMessage();

            return "signsucess";
     }

} 
```

我的服务：

```
@Service
public class TestService {

    @Autowired
    private MessageSource message;

    public void getMessage() {
        //Error
        String message = message.
            getMessage("email.ativacao.title", null, new Locale("pt", "BR"));
    }

} 
```

我的组件：

```
@Component
public class TestComponent {

    @Autowired
    private MessageSource message;

    public void getMessage() {
        //Error
        String message = message.
            getMessage("email.ativacao.title", null, new Locale("pt", "BR"));
    }

} 
```

我的配置：

```
<!-- i18n -->
<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.
                LocaleChangeInterceptor" p:paramName="lang"/>
</mvc:interceptors>

<!-- Mesage Source Config -->       
<bean id="messageSource"
    class="org.springframework.context.support.
        ReloadableResourceBundleMessageSource" p:fallbackToSystemLocale="true" >
    <property name="basename" value="WEB-INF/i18n/messages" />
</bean>

<!-- Mapeia o cookie que irá salvar as opções de idioma -->
<bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"
    id="localeResolver" p:cookieName="locale"/> 
```

@Service 和 @Component 上的 MessageSource 都不为空，但它们无法获取消息（上述异常）。我的属性：

网页内容/WEB-INF/i18n

*   消息_pt_BR
*   messages_en_US

我真的找不到问题。有什么建议可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T13:57:30.837

根据您的描述，我猜控制器 bean 和 messageSource 是在相同的上下文中声明的。这样就可以找到对方了。

如果您的服务 bean 和控制器 bean 未在同一上下文中声明，您的服务将找不到消息源。

相同的上下文并不意味着相同的文件。您的 one.xml 可以包括 two.xml。

无论如何，如果它对您有用，那很好。

# android - JBox2d：负重力导致物体上升？

> ID：14626929
> 
> 赞同：0
> 
> 时间：2013-01-31T13:29:55.947
> 
> 标签：android, box2d, jbox2d

我是 JBox2D 的新手学习者。我只是第一次在 Android 上尝试 JBox2D（我知道 Android 开发并且我擅长它），因为我的项目需要物理。

现在，Box2D的教程和“官方用户手册”都说负重力会导致物体被向下吸引。***但是，在我的情况下，当我将Vec2*****的第二个参数设置为负****时，对象被向上吸引！奇怪的。**

 **这是导致圆形自行上升的代码：*

重力：

```
Vec2 gravity = new Vec2(0.0f, -50.0f);
boolean doSleep = true;
world = new World(gravity, doSleep); 
```

圆形是通过以下代码制作的：

```
 //body definition
    BodyDef bd = new BodyDef();
    bd.position.set(200, 500);  
    bd.type = BodyType.DYNAMIC;

    //define shape of the body.
    CircleShape cs = new CircleShape();
    cs.m_radius = 10f;  

    //define fixture of the body.
    FixtureDef fd = new FixtureDef();
    fd.shape = cs;
    fd.density = 1f;
    fd.friction = 0.2f;        
    fd.restitution = 0.8f;

    //create the body and add fixture to it
    body =  world.createBody(bd);
    body.createFixture(fd); 
```

我正在使用 SurfaceView 画布绘制：

```
canvas.drawCircle(body.getPosition().x, body.getPosition().y, 10, paint); 
```

并且步进如下：

```
float timeStep = 1.0f / 60.f;
int velocityIterations = 6;
int positionIterations = 2;

world.step(timeStep, velocityIterations, positionIterations); 
```

那么，我的代码有什么问题？我无法确定我所犯的错误。

另外， *我正在使用 JBox2D 在 Android 上制作类似网球的 2D 游戏。那么，谁能告诉我有关 JBox2D 的教程/书籍？虽然我用谷歌搜索，但我找不到一个好的教程。（虽然 Box2D 似乎比 JBox2D 更受欢迎）*

如果有人可以在这里帮助我，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:58:21.557

在 Box2D 中有标准坐标系：Y 向上，X 向右。在图形系统中，通常，坐标系的 Y 方向向下，因为窗口具有静态的左上角。看起来你的图形系统都一样。所以，在 Box2D 中向下移动，你看到向上移动。

这是一个烦人的问题，引导重力向上并不是最好的解决方案。如果你只改变重力，那么在许多其他情况下你将需要考虑上下问题，例如，在定义物体时，施加力等等。最烦人的，不容易理解，物理坐标如何符合图形（例如，在我的一个项目中，我必须在纸上画点，然后将纸转回，旋转 180 级并在灯光下看 :) .

您无法更改 Box2D 坐标系，但很可能，您可以通过更改平移矩阵轻松更改图形系统的坐标系。例如，在 OpenGL 中它看起来像这样：

```
glScalef(1.0, -1.0, 1.0); 
```

但请注意，在此之后，所有具有正 Y 坐标的内容都将在屏幕上不可见（它将在窗口的顶部边缘上方）。因此，您将需要使用负坐标。如果你不想要这个，你可以像这样翻译矩阵：

```
glTranslatef(0.0, -windowHeight.0, 0.0) 
```

但在此之前，想想如果窗口要调整大小该怎么办。

关于第二个问题。我怀疑您是否可以在任何地方找到 JBox2D 的教程或书籍。JBox2D 是 Box2D 的移植版（也就是说，它是 Box2D 的完全副本），为它写专门的书看起来很奇怪。学习Box2D，JBox2D就没有问题。例如，你可以看看[那里](https://www.iforce2d.net/b2dtut/)。*

# google-app-engine - 访问部署在 Google 应用引擎上的“Google Accounts API”认证资源

> ID：14626932
> 
> 赞同：2
> 
> 时间：2013-01-31T13:30:02.323
> 
> 标签：google-app-engine

我们公司的另一个团队在 Google App Engine 上部署了一个应用程序，他们为我提供了一种通过他们部署的 API 访问应用程序中数据的方法。他们正在使用 Google Accounts API 进行身份验证，去年秋天我们让承包商进行了概念验证，部分使用了使用 gdata.service 库和 ClientLogin 的 Python 脚本。

我想用 Java 重做这件事，但是当我访问他们的 URL 时，我很难找到有关如何对应用程序进行身份验证的信息。据我所知，ClientLogin 方法已被弃用，甚至不再存在于 Java 库中。

谁能指出我如何从 Java 客户端使用 Google Accounts API 登录到此应用程序的示例或文档？到目前为止，我挖掘的所有代码示例和文档要么严重过时，要么旨在访问 Google API。

正在运行的 Python 代码如下所示：

```
def auth(self, email, password):
    service = GDataService(service='ah')
    service.ClientLogin(email, password)
    authToken = service.GetClientLoginToken()
    authUrl = self.base_url + '/_ah/login?auth=' + authToken
    authResponse = self.opener.open(authUrl) 
```

我只是希望能够从 Java 中做同样的事情。

# java - 如何显示选择和取消选择 JRadio 按钮？

> ID：14626935
> 
> 赞同：1
> 
> 时间：2013-01-31T13:30:13.580
> 
> 标签：java, swing, actionlistener, joptionpane, jradiobutton

我的摇摆应用程序上有 5 个 JRadio 按钮。当我单击我的 Jradio 按钮时。我创建了一个 joption 对话框以显示它已被单击。但是当我取消选择它时，它也会显示它已被选中。问题是什么？我的 Jradio 按钮编码之一。

```
 private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{
      JOptionPane.showMessageDialog(null,"one is selected");
} 
```

所以我终于得到了答案

在@Neil Locketz 的帮助下

```
 private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) 
     {
        if(jRadioButton1.isSelected())
          {
            JOptionPane.showMessageDialog(null,"one is selected");
          }
     } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:38:12.507

*   不可能直接，必须包装，延迟此事件以显示`JOptionPane`内部`invokeLater()`

*   这是[Java6 版本 6924233 的错误：JCheckBox itemListener 中的 JOptionPane 导致 setSelected(false)](http://bugs.sun.com/view_bug.do?bug_id=6924233)

*   [更多在我的（类似？？？）问题中](https://stackoverflow.com/questions/8282488/why-does-setselected-on-jcheckbox-lose-effect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:32:32.313

您需要对 JRadioButton 对象的引用，以便您可以调用 button.isSelected() 这将返回一个布尔值，表明您正在测试的按钮是否被选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:38:52.100

请记住，这完全是伪代码

```
 JRadioButton testButton1=new JRadioButton("button1");
     JRadioButton testButton2=new JRadioButton("button2");

     ButtonGroup btngroup=new ButtonGroup();  

     btngroup.add(testButton1);  
     btngroup.add(testButton2);  

     boolean test;

     foreach(JRadioButton b in btngroup){
        test = b.isSelected();
        if(test)
           JOptionPane.showMessageDialog(null, b.getValue() + "is selected");
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:38:57.890

我建议您创建一个`ActionListener`实例并将其添加到您的所有按钮中。像这样的东西：

```
ButtonGroup group = new ButtonGroup();
JRadioButton radio = new JRadioButton("1");
JRadioButton radio2 = new JRadioButton("2");
JRadioButton radio3 = new JRadioButton("3");
group.add(radio);
group.add(radio2);
group.add(radio3);
ActionListener a = new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        JRadioButton source = (JRadioButton) e.getSource();
        System.out.println(source.getText() + " selected " + source.isSelected());
    }
};
radio.addActionListener(a);
radio2.addActionListener(a);
radio3.addActionListener(a); 
```

# c - 在测试真实条件后如何执行 printf ？

> ID：14626940
> 
> 赞同：5
> 
> 时间：2013-01-31T13:30:26.520
> 
> 标签：c

我是 C 的初学者，所以如果这个问题很愚蠢或者问得很奇怪，请原谅我。

我正在阅读*C prime plus ，**第 8 章*中的示例之一是一些循环，用于测试用户是否输入 - *`a newline character or not`*，我无法理解。

代码很短，所以我将向您展示：

```
int main(void)
{
    int ch; /* character to be printed */
    int rows, cols; /* number of rows and columns */
    printf("Enter a character and two integers:\n");
    while ((ch = getchar()) != '\n')
    {
        if (scanf("%d %d",&rows, &cols) != 2)
            break;
        display(ch, rows, cols);
        while (getchar() != '\n')
            continue;
        printf("Enter another character and two integers;\n");
        printf("Enter a newline to quit.\n");
    }
    printf("Bye.\n");
    return 0;
}
void display(char cr, int lines, int width) // the function to preform the printing of the arguments being passed 
```

我不明白的就在这里：

```
while (getchar() != '\n')
                continue;
            printf("Enter another character and two integers;\n");
            printf("Enter a newline to quit.\n"); 
```

首先，`while (getchar() != '\n')`正在测试输入的第一个 ch 对吗？其次，如果这是真的，为什么 continue 没有跳过 printf 语句并转到第一个 while？这不是应该做的吗？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T13:33:20.587

因为`while`语句后面没有大括号，所以只有下一行包含在循环中。因此，`continue`继续 while 循环，直到找到换行符，然后继续执行`printf`语句。

它等价于：

```
 while (getchar() != '\n')
 {
    continue;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:32:37.193

continue 应用于两个-s`while`之前的位置，因此当您进入时，您将离开最里面的位置，同时返回该行`printf``\n`

```
printf("Enter another character and two integers;\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:13:10.880

这里的 while() 循环只与 continue 语句相关联。所以它与 printf 语句没有关系............

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:34:35.363

`continue`适用于最近的循环`while`。

```
while (stuff)
  continue; 
```

是相同的

```
while (stuf); 
```

（注意分号）。

你只是说“继续循环直到条件变为假”。

# django - Django - 多字段搜索问题

> ID：14626944
> 
> 赞同：1
> 
> 时间：2013-01-31T13:30:38.617
> 
> 标签：django

我正在尝试构建一个相对简单的搜索表单，允许用户搜索三个搜索字段之一或三个搜索字段的任意组合。结果应根据给定的术语过滤查询集。这是我来自 search_form.html 的表单：

```
<form class="form-horizontal" action="/search/" method="get">
    <legend>Generate a Quiz:</legend>
    <div class="control-group">
        <label class="control-label" for="q">Search term</label>
        <div class="controls">
            <input type="text" name="q" placeholder="Search term" autocomplete="on"/>
        </div>
    </div>  
    <div class="control-group">
        <label class="control-label" for="yr">Year</label>
        <div class="controls">
            <input type="text" name="yr" placeholder="Year" autocomplete="on"/>
        </div>
    </div>  
    <div class="control-group">
        <label class="control-label" for="ct">Category</label>
        <div class="controls">
            <input type="text" name="ct" placeholder="Category" autocomplete="on"/>
        </div>
    </div>  
    <div class="controls">
        <button type="submit" class="btn btn-primary">Fetch  &raquo;</button>
    </div>          
</form> 
```

这是我的观点：

```
def search(request):
    error = False
    if 'q' in request.GET:
        q = request.GET['q']
        yr = request.GET['yr']
        ct = request.GET['ct']
        if not ((q or yr) or ct):
            error = True
        else:
            question_set = Uroquiz.objects.filter(question__icontains=q).filter(year=yr).filter(cat_icontains=ct)
            paginator = Paginator(question_set, 1)
            page = request.GET.get('page')

            try:
                question_set = paginator.page(page)
            except PageNotAnInteger:
                question_set = paginator.page(1)
            except EmptyPage:
                question_set = paginator.page(paginator.num_pages)
            return render_to_response('search_results.html',
                {'question': question_set, 'query': q, 'year': yr, 'ct': ct})
    return render_to_response('search_form.html', {'error': error}) 
```

问题：

1.  当我只用'q'文件构建它时，它工作得很好。当我将“yr”字段链接到我的过滤器时，只要表格中输入了一年，它就可以正常工作。如果年份（我的数据库中的一个整数字段）为空，它将为 int() 以 10 为底的 ValueError 无效文字：''。

2.  当我在“ct”字段中链接并尝试搜索所有字段时，出现错误：无法将关键字“cat_icontains”解析为字段。我可以将过滤器更改为 (cat=ct) 并且它工作正常，但我应该能够在我的数据库中的“cat”字段上使用 _icontains。我确定我缺少一些基本的东西，感谢您的帮助。

更新：这是我目前基于以下答案的解决方案，允许搜索任何字段组合：

```
def search(request):
    q = request.GET.get('q')
    yr = request.GET.get('yr', 0)
    ct = request.GET.get('ct')
    question_set = Uroquiz.objects.all()

    if q:
        if not (yr or ct):
            question_set = Uroquiz.objects.filter(question__icontains=q)
    if yr:
        if not (q or ct):
            question_set = Uroquiz.objects.filter(year=yr)
    if ct:
        if not (q or yr):
            question_set = Uroquiz.objects.filter(cat__icontains=ct)
    if (q and yr):
        if not ct:
            question_set = Uroquiz.objects.filter(question__icontains=q).filter(year=yr)
    if (q and ct):
        if not yr:
            question_set = Uroquiz.objects.filter(question__icontains=q).filter(cat__icontains=ct)
    if (yr and ct):
        if not q:
            question_set = Uroquiz.objects.filter(year=yr).filter(cat__icontains=ct)
    if ((q and yr) and ct):
        question_set = Uroquiz.objects.filter(question__icontains=q).filter(year=yr).filter(cat__icontains=ct)
    if not ((q or yr) or ct):
        return render_to_response('search_form.html')
    paginator = Paginator(question_set, 1)
    page = request.GET.get('page')
    try:
        question_set = paginator.page(page)
    except PageNotAnInteger:
        question_set = paginator.page(1)
    except EmptyPage:
        question_set = paginator.page(paginator.num_pages)
    return render_to_response('search_results.html',
        {'question': question_set, 'query': q, 'yr': yr, 'ct': ct}) 
```

这似乎是解决这个问题的“忙碌”方式。是否有更惯用/pythonic 的方式来完成此搜索结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:46:43.290

不保证用户将提交`q`、`yr`和`ct`。您不能信任您的用户数据。如果用户没有提交任何这些参数，我认为这将导致错误`KeyError`

您可以使用这些设置默认值[`get`](http://wiki.python.org/moin/KeyError)

```
 q = request.GET.get('q')
    yr = request.GET.get('yr', 0)
    ct = request.GET.get('ct') 
```

您也可以在找到每个参数时构建您的查询集。记住查询集是[惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)

```
question_set = Uroquiz.objects.all()    
q = request.GET.get('q')
if q:
  question_set = question_set.filter(question__icontains=q)
etc 
```

对于您的第二个问题，我相信它是与语法相关`cat__icontains`的 2 个下划线（而不是`filter(cat_icontains=ct)`, 就像您在代码中所使用的那样）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:50:11.093

```
def search(request):
    q, yr, ct = "", "", ""
    question_set = Uroquiz.objects.filter()

    if request.GET.get('q'):
        question_set = question_set.filter(question__icontains=q)

    if request.GET.get('yr'):
        question_set = question_set.filter(year=yr)

    if request.GET.get('ct'):
        question_set = .filter(cat__icontains=ct)

    paginator = Paginator(question_set, 10)

    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    try:
        question_set = paginator.page(page)
    except (EmptyPage, InvalidPage):
        question_set = paginator.page(paginator.num_pages)

    return render_to_response('search_results.html',
        {'question': question_set, 'query': q, 'year': yr, 'ct': ct}) 
```

# ios - 如何为 ruby motion 应用程序添加动画？

> ID：14626950
> 
> 赞同：0
> 
> 时间：2013-01-31T13:31:00.703
> 
> 标签：ios, core-animation, rubymotion

我目前正在向按钮添加动画并查看

```
 @button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
            @button.frame = [[0,0],[50,50]]
            @button.setTitle("Click to move",forState:UIControlStateNormal)
            @button.addTarget(self, action:'animate_button',forControlEvents:UIControlEventTouchUpInside)
            view.addSubview @button 

      def animate_button
            @button.frame = [[0,0],[0,0]]
            UIView.beginAnimations(nil,context:nil)
            UIView.setAnimationDuration(0.05)
            UIView.setAnimationDelay(0.2)
            UIView.setAnimationCurve(UIViewAnimationCurveEaseOut)
            @button.frame = [[280,400],[50,50]]
            UIView.commitAnimations
     end 
```

任何人都可以帮助使用高级动画

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:47:27.683

你看过方糖吗？它非常受欢迎 - 与 BubbleWrap 一起，它是 ruby​​motion 最常用的宝石之一。它拥有越来越多的动画相关方法，并使用新的块语法（就像 Paul.s 提到的那样）

最通用的是`UIView.animation { animations_go_here }`

```
UIView.animation {
  my_view.frame = new_frame
  # or apply a transform to a layer
  my_view.layer.transform = CATransform3DMakeScale(2, 2, 1)
} 
```

有关更多变换函数，请参阅[核心动画函数参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreAnimation_functions/Reference/reference.html "核心动画函数参考")。

但是如果你想做一个“普通”的动画，你可以通过添加一些 UIView 来做很多事情：

```
my_view.slide :left, 100
my_view.move_to CGPoint.new(10, 20)  # or [10, 20] works, too
my_view.fade_out 
```

这些都采用类似的选项：

```
my_view.fade_out(duration: 1)  # 1 second fade out
my_view.fade_out(delay: 1)  # 1 second later, fade out 
```

您可以轻松地将它们链接起来：

```
my_view.slide :left, 120 {
  my_view.fade_out {
    my_view.removeFromSuperview
  }
} 
```

它们可以分组：

```
UIView.animate {
  my_view.slide :left, 120
  my_view.fade_out
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:59:27.233

要使用首选的块语法，它看起来像这样

```
def animate_button
  @button.frame = [[0,0],[0,0]]

  animations = lambda { @button.frame = [[280,400],[50,50]] }
  UIView.animateWithDuration(0.2, delay:0.05, options:UIViewAnimationOptionCurveEaseOut , animations:animations, completion: nil)
end 
```

# jquery - 密码字段未在任何 IE 上使用带有占位符 2.0.7 的 jquery 验证 1.10 进行验证

> ID：14626951
> 
> 赞同：2
> 
> 时间：2013-01-31T13:31:03.070
> 
> 标签：jquery, jquery-validate, placeholder, conflicting-libraries

[我对 jquery 1.8、jquery 验证 1.10 和占位符 2.0.7（ https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)）的使用有疑问。我注意到如果使用占位符插件，任何版本的 IE 都会跳过密码字段的验证。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:53:13.887

我发现了如何解决它。

只需将`$("form").validate({ignore:[], ...});`“form”设置为您的选择器，而 ... 是您的选项。

错误的原因是因为 jquery 验证跳过验证输入设置为 display:none。占位符插件将密码元素设置为 display:none 而不是集中的，这就是它通过验证的原因。如果将忽略设置为 []，它将覆盖 jquery 验证的默认行为，即不验证 display:none 元素。

# multithreading - 多线程 perl 脚本中的 Control+C 处理

> ID：14626952
> 
> 赞同：3
> 
> 时间：2013-01-31T13:31:03.117
> 
> 标签：multithreading, perl, unix, keyboardinterrupt

我是 perl 新手，在我的 perl 脚本中处理 ^C 时遇到问题。当我在睡眠期间收到 ^C 后尝试继续执行脚本时，我只在 $FLAG = 2; 之前输出 之后什么都没有：

```
# perl test.pl 
sleeping...
^Cawaiking...  =  
# 
```

代替：

```
# perl test.pl 
sleeping...
awaiking...    ====                                              
some..
# 
```

它接缝 ^C 正在杀死进度条线程，并且在它死后没有任何动作，但可以在主线程中执行打印。谁能帮我解决这个问题？

```
$SIG{INT} = 'IGNORE';
our $FLAG : shared = 1; 
...
sub call1{
    $FLAG = 1;
    my $pBar = threads->new(\&progressBarInit);
    $pBar->detach;
    print "sleeping...\n";
    sleep 5;
    print "awaiking...\n";
    $FLAG = 2;
    print "some..\n";
    return @result;
}

call1();

sub progressBarInit{
my $max = 50;
    my $counter = 1;
    while($FLAG == 1){
        progressBar( $counter, $max, 50, '=' );
        $counter++;
        if($counter > $max){$counter=1;}
        sleep 1;
    }
}

sub progressBar {
    my ( $counter, $max, $width, $char ) = @_;
    local $| = 1;
    printf "               %-${width}s\r", $char x (($width-1)*$counter/$max);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:02:03.417

我认为问题在于您在父级中设置了信号处理程序。

据此： http: [//perldoc.perl.org/threads.html](http://perldoc.perl.org/threads.html)

> 需要在线程中设置信号处理程序，以处理它们预期作用的信号。这是取消线程的示例：

您可以使用信号进行通信，而不是使用标志：

```
sub progressBarInit    {
  # Thread 'cancellation' signal handler
  $SIG{'KILL'} = sub { threads->exit(); };
  $SIG{INT} = 'IGNORE';
  ...
}
...
# Signal the thread to terminate, and then detach
# it so that it will get cleaned up automatically
   my $pBar = threads->new(\&progressBarInit);    
    print "sleeping...\n";
    sleep 5;
    print "awaiking...\n";
    $pBar->kill('KILL')->detach(); 
```

# qt - 为整数控制一个 linedit 中的间隔

> ID：14626958
> 
> 赞同：0
> 
> 时间：2013-01-31T13:31:18.980
> 
> 标签：qt, qlineedit

我有一个我使用的 lineEdit，因此用户可以输入频率间隔，

```
// Making the lineedit objects only accept numbers and align it leftside
ui->frequency->setValidator(new QIntValidator(36, 1000, this));
ui->frequency->setAlignment(Qt::AlignRight); 
```

它可以正常工作到上限 1000，但下限不能。所以我创建了一个插槽来控制它，

```
// Control freqeuncy interval
void gui::f_interval()
{
    QString f = ui->frequency->text();
    freq = f.toInt();

    if (freq < 36)
    {
        int status = QMessageBox::warning(this,"Warning","Invalid frequency interval",QMessageBox::Ok);
    }
} 
```

并将其连接到 lineEdit 的信号，

```
// Control frequency interval
connect(ui->frequency, SIGNAL(editingFinished()), this, SLOT(f_interval())); 
```

这样当用户输入一个低于 36 的数字时，它会收到一个警告对话框窗口。

但这似乎不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:38:50.290

您想连接[textChanged](http://qt-project.org/doc/qt-4.8/qlineedit.html#textChanged)信号而不是 editingFinished。

LE：我也不记得验证器有问题，所以你能提供更多细节，比如 Qt 版本、Os 版本、编译器，也许看看这个问题是否在示例项目中重现。

# javascript - 如何实现伪动态css？

> ID：14626959
> 
> 赞同：-3
> 
> 时间：2013-01-31T13:31:20.003
> 
> 标签：javascript, css

我无法管理页面上的自定义颜色元素。

例如，我们在页面上有 100 个导航方块，每个方块都有自己的颜色，除了为每种颜色创建 css 类之外，想不出任何办法。这将产生大量的 CSS 代码。

需要一些帮助，谢谢

*添加了javascript和jquery标签作为解决这个问题的可能方法之一

**更新：** 感谢大家的回复，感觉我需要详细说明。我的搜索页面上有平方类别导航，颜色可以来自服务器端，也可以存储在客户端的 js 中。我从服务器获取类别列表（假设我也为每个类别获取颜色）然后我构建所有正方形（默认情况下它们是白色的，但是在 :hover 上它们会改变颜色）所以我会选择这样的解决方案：

```
<ul id="squares">
<li class="greencolor"></li>
<li class="redcolor"></li>
<li class="bluecolor"></li>
</ul> 
```

用CSS：

```
#squares li.redcolor:hover{
 background:red;
}
#squares li.greencolor:hover{
 background:green;
}
#squares li.bluecolor:hover{
 background:blue;
} 
```

希望现在您可以看到我所说的为 100 个元素引用大量 CSS 代码。

是的，我知道我可以寻求这样的解决方案：

```
var colorsMap={'redcolor':'red','greencolor':'green'};     
$('#squares li').on('hover',function(e){

    $(this).css('background-color', colorsMap[$(this).attr('class')];

}); 
```

但这对我来说听起来不是一个优雅的解决方案，我试图找到通过 css 实现它的方法，而不是 js 的内联 css 更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:04:44.373

虽然我推荐使用 CSS 来实现，但是还是有一个比内联样式更好的解决方案：

```
var selector = '#squares li'
  , css = []
  , style = document.createElement( 'style' )
  , colorsMap= {
      'redcolor': 'red',
      'greencolor': 'green',
      'bluecolor': 'blue'
    }
$( selector ).each( function() {
  css.push( selector + 
            '.' + 
            // recommand to use data-attr to store color info
            // assuming `className == 'bluecolor'`
            this.className + 
            ':hover' +
            '{' +
            'background:' +
            colorsMap[ this.className ] +
            '}'
            )
})
style.textContent = css.join('')
document.head.appendChild( style ) 
```

通过将 CSS 动态插入`<head>`，您仍然可以从普通 CSS 中获得好处，[演示](http://jsbin.com/urokud/1/edit)。

而且，您还可以在后端生成动态 CSS 文件，通过配置表单或其他方式更轻松地管理颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:24:30.660

首先，我的英语很差（但我正在努力学习）。所以我不能说我理解你很清楚。但是你说的话让我想起了选择者。我不知道是不是你想要，但我认为这不是一个坏主意。就像这些：等等。 他们的作用我就不说了。我觉得有必要学习，他们很有用。
`$(":header").css("color","#FF00FF");
$("div:contains('test')").css("background","#666600");
$("div:empty").css("background","#888800");
$("div:has(span)").css("background","#008080");`

# c++ - 为什么 C++ 没有幂运算符？

> ID：14626960
> 
> 赞同：31
> 
> 时间：2013-01-31T13:31:22.287
> 
> 标签：c++, operator-keyword

许多语言都有幂运算符；为什么没有 C++？例如，Fortran 和 Python 使用`**`并且通常使用`^`.

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-31T13:58:00.497

C++ 确实有一个幂运算符——它被写成`pow(x, y)`.

最初，C 的设计考虑了系统软件，并没有太多需要强大的操作符。（但它有按位运算符，例如`&`and `|`，这在许多其他语言中是不存在的。）在 C++ 标准化期间有一些关于添加一个的讨论，但最终的共识或多或少是：

*   不可能`^`，因为优先级是错误的（当然，有`2\. ^ 8 == 256.`，但`2 ^ 8 == 10`也不是很愉快）。

*   不可能`**`，因为那会破坏现有程序（可能有类似`x**p`,和`x`an 的东西）。`int``p``int*`

*   可能是`*^`，因为这个序列目前在 C 或 C++ 中是不合法的。但这仍然需要引入额外的优先级。

*   C 和 C++ 已经有了足够多的特殊标记和优先级，在与数字社区讨论后，得出的结论是 `pow(x, y)`.

所以 C++ 保持原样，这似乎没有造成任何问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T13:32:56.073

有两个原因

1.  该符号`^`保留用于按位异或[运算](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)

2.  您可以使用`std::pow`来实现相同的功能。

C++ 的好处是你可以重载`operator`来做你喜欢做的任何事情！

```
template< typename T >
T operator^( T x, T y ) {
    return std::pow( x, y );
} 
```

**但是**请注意，当您这样做时，其他认识`C++`和不认识您的人（我相信其中有不少）可能在理解您的代码时遇到**重大问题！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:32:21.703

因为那是排他或按位运算符。

有一些名为“pow”的函数可以做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:56:20.940

如果你愿意，你可以帮助自己

```
struct DoubleMock
{
    DoubleMock(double v){_v = v;}
    double _v;
};

double operator^(DoubleMock x, DoubleMock y)
{
    return pow(x._v,y._v);
}

double v = DoubleMock(2.0) ^ 2.0; 
```

# mysql - 如何连接此结果集？

> ID：14626964
> 
> 赞同：1
> 
> 时间：2013-01-31T13:31:47.723
> 
> 标签：mysql, sql, select

我已经阅读了所有相关的问题，但无法让这个简单的事情发挥作用。我想连接这个查询的结果：

```
SELECT DISTINCT ord.uid AS u
  FROM  `uc_order_products` ord_prod,  `uc_orders` ord,  `uc_roles_expirations` re
WHERE ord.order_id = ord_prod.order_id
  AND ord_prod.title LIKE  '2012\. évi%'
  AND ord.uid NOT 
IN (SELECT uid FROM uc_roles_expirations re) 
```

它看起来像这样：

```
U
----
1234
1235
... 
```

这是我尝试过的：

```
SELECT GROUP_CONCAT(DISTINCT ord.uid AS u
  FROM  `uc_order_products` ord_prod,  `uc_orders` ord,  `uc_roles_expirations` re
WHERE ord.order_id = ord_prod.order_id
  AND ord_prod.title LIKE  '2012\. évi%'
  AND ord.uid NOT 
IN (SELECT uid FROM uc_roles_expirations re) SEPARATOR ',') 
```

..并没有工作。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:32:56.410

只有 columnName 应该在`GROUP_CONCAT`函数中。

```
SELECT GROUP_CONCAT(DISTINCT ord.uid SEPARATOR ',')AS u
FROM  `uc_order_products` ord_prod,  
        `uc_orders` ord,  
        `uc_roles_expirations` re
WHERE ord.order_id = ord_prod.order_id
  AND ord_prod.title LIKE  '2012\. évi%'
  AND ord.uid NOT 
IN (SELECT uid FROM uc_roles_expirations re) 
```

*PS：作为旁注，由于此表上缺少连接条件，此 uqery 将产生笛卡尔结果`uc_roles_expirations`。另一张桌子上的桌子是什么关系？*

*我不确定*，但我认为你想要这个查询的结果，

```
SELECT GROUP_CONCAT(DISTINCT ord.uid SEPARATOR ',')AS u
FROM  `uc_order_products` ord_prod
       INNER JOIN `uc_orders` ord
          ON ord.order_id = ord_prod.order_id
WHERE ord_prod.title LIKE  '2012\. évi%' AND 
      ord.uid NOT IN (SELECT uid FROM uc_roles_expirations) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:36:40.767

```
select GROUP_CONCAT(u ORDER BY u)
from
(
SELECT DISTINCT ord.uid AS u
  FROM  `uc_order_products` ord_prod,  `uc_orders` ord,  `uc_roles_expirations` re
WHERE ord.order_id = ord_prod.order_id
  AND ord_prod.title LIKE  '2012\. évi%'
  AND ord.uid NOT 
IN (SELECT uid FROM uc_roles_expirations re)
) t 
```

# cordova - phonegap：显示图像源路径

> ID：14626966
> 
> 赞同：0
> 
> 时间：2013-01-31T13:31:49.290
> 
> 标签：cordova, jquery-mobile

我一直在使用文档中的以下示例代码在 iOS 上试用 PhoneGap。现在我想将上次拍摄的图像的来源添加到文本区域。如果我理解正确，destinationType.FILE_URI 是文件路径，但是如何在照片成功后将其作为字符串传递给文本区域？

获取来源：

```
 function getPhoto(source) {
            // Retrieve image file location from specified source
            navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
                                        destinationType: destinationType.FILE_URI,
                                        sourceType: source });
        } 
```

完整代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" charset="utf-8"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css"/>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">    </script>

    <script>
        var pictureSource;   // picture source
        var destinationType; // sets the format of returned value

        // Wait for Cordova to connect with the device
        //
        document.addEventListener("deviceready",onDeviceReady,false);

        // Cordova is ready to be used!
        //
        function onDeviceReady() {
            pictureSource=navigator.camera.PictureSourceType;
            destinationType=navigator.camera.DestinationType;
        }

        // Called when a photo is successfully retrieved
        //
        function onPhotoDataSuccess(imageData) {
            // Uncomment to view the base64 encoded image data
            // console.log(imageData);

            // Get image handle
            //
            var smallImage = document.getElementById('smallImage');

            // Unhide image elements
            //
            smallImage.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            //
            smallImage.src = "data:image/jpeg;base64," + imageData;
        }

        // Called when a photo is successfully retrieved
        //
        function onPhotoURISuccess(imageURI) {
            // Uncomment to view the image file URI
            // console.log(imageURI);

            // Get image handle
            //
            var largeImage = document.getElementById('largeImage');

            // Unhide image elements
            //
            largeImage.style.display = 'block';

            // Show the captured photo
            // The inline CSS rules are used to resize the image
            //
            largeImage.src = imageURI;

        }

        // A button will call this function
        //
        function capturePhoto() {
            // Take picture using device camera and retrieve image as base64-encoded string
            navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
                                        destinationType: destinationType.DATA_URL });
        }

        // A button will call this function
        //
        function capturePhotoEdit() {
            // Take picture using device camera, allow edit, and retrieve image as base64-encoded string
            navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 20, allowEdit: true,
                                        destinationType: destinationType.DATA_URL });
        }

        // A button will call this function
        //
        function getPhoto(source) {
            // Retrieve image file location from specified source
            navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
                                        destinationType: destinationType.FILE_URI,
                                        sourceType: source });
        }

        // Called if something bad happens.
        // 
        function onFail(message) {
            alert('Failed because: ' + message);
        }

        </script>
</head>
<body>
    <div data-role="controlgroup" data-theme="e">
        <button onclick="capturePhoto();">Capture Photo</button>
        <button onclick="capturePhotoEdit();">Capture Editable Photo</button>
        <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button>
        <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
        <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
        <img style="display:none;" id="largeImage" src="" />
    </div>

    <div data-role="fieldcontain">
        <label for="textarea">Textarea:</label><br>
        <textarea name="textarea" id="textarea"></textarea>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:20:02.587

您的函数似乎是`onPhotoURISuccess(imageURI)`放置该代码的最佳位置。我看到已经有一个`console.log`为此注释掉了。相反，您可以执行以下操作：

```
$("#ELEMENT_WHERE_YOU_WANT_TO_SEE_URI").text( imageURI ); 
```

其中大写选择器是`id`您希望用来填充图像 URI 的 HTML 元素。那是`#textarea`元素吗？`onPhotoURISuccess()`在函数内的任何地方添加它应该没问题。

# spring-security - spring安全方法级别注解应该应用在控制器层还是服务层？

> ID：14626969
> 
> 赞同：40
> 
> 时间：2013-01-31T13:31:54.583
> 
> 标签：spring-security

我一直在我的控制器方法上使用带有@PreAuthorize 的spring security。我的理由是，我希望授权检查在一层中以可预测的方式发生，并且在请求中尽可能早地发生。但是，我刚刚阅读了 spring security 3 文档，并看到他们建议在服务层上应用方法级别的安全性（但他们没有说明原因）。

我的问题是：spring security方法级别的注解应该应用在控制器层还是服务层？（或“两者”，或“视情况而定”？）更重要的是：为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T14:23:00.990

“这取决于” ：）。如果您的应用程序有一个服务层，通过该服务层应用您的所有业务逻辑，那么这通常是一个干净的地方来应用您的安全约束并确保您没有错过任何极端情况。

Web 代码通常比较混乱，数量更多，变化更快，最终您可能会从多个地方调用相同的服务方法。有人可能会添加一个新控制器而忘记正确保护它。或者，您可能有不同类型的客户端调用相同的服务。

但这取决于您的应用程序的结构以及您的用例是什么。对于为什么要保护控制器，您可能有一个很好的论据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-25T09:42:25.237

考虑代码重用。您打算在其他地方使用您的服务吗？不只是为了满足您的网络层？我们还通过 jms 桥重用我们的服务，因此我们保护了我们的服务层。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-06T10:42:54.483

我认为该服务是使用它的更好地方。

尽管可能会在[Controller上](https://stackoverflow.com/a/27080921/2387977)[产生](https://stackoverflow.com/a/27652048/2387977)[一些问题](https://stackoverflow.com/a/32443631/2387977)，并且 Spring Security FAQ[建议](https://stackoverflow.com/a/11347824/2387977)将这种注释**放在 Service 上**，但我理解某些操作的授权更多的是业务规则，而不是 Web 层的责任。`@PreAuthorize`

# c++ - C++ 虚方法覆盖

> ID：14626973
> 
> 赞同：7
> 
> 时间：2013-01-31T13:32:10.353
> 
> 标签：c++, inheritance, virtual-functions

> **可能重复：**
> [在构造函数中调用虚函数](https://stackoverflow.com/questions/962132/calling-virtual-functions-inside-constructors)

*主文件*

```
#include <iostream>

class BaseClass {

    public:

    BaseClass() {
        init();
    }

    virtual ~BaseClass() {
        deinit();
    }

    virtual void init() {
        std::cout << "BaseClass::init()\n";
    }

    virtual void deinit() {
        std::cout << "BaseClass::deinit()\n";
    }

};

class SubClass : public BaseClass {

    public:

    virtual void init() {
        std::cout << "SubClass::init()\n";
    }

    virtual void deinit() {
        std::cout << "SubClass::deinit()\n";
    }

};

int main() {
    SubClass* cls = new SubClass;
    delete cls;
    return 0;
} 
```

为什么没有被正确覆盖，`init()`并且`deinit()`调用 BaseClasses 的方法而不是 SubClasses 的方法？使它工作的要求是什么？

```
BaseClass::init()
BaseClass::deinit() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:34:35.630

他们被覆盖就好了。

但是您已经从*基础构造函数*调用了它们，并且当基础构造函数正在执行时，对象的*派生*部分还不存在。

因此，这在很大程度上是一项安全功能，并且是 C++ 标准规定的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T13:34:57.437

因为您在构造函数中调用虚拟方法。在构造基类时，派生类（子类）仍未构造，因此实际上它并不存在。

避免在构造函数中调用虚方法通常是一个好习惯。

# gwt - FormPanelImpl.submit() 上的 gwt-test-utils UnsatisfiedLinkError

> ID：14626976
> 
> 赞同：1
> 
> 时间：2013-01-31T13:32:26.817
> 
> 标签：gwt, gwt-test-utils

> 我正在使用 GWT 2.5 和 GWT-Boostrap 2.2.1.0-SNAPSHOT.gwt-test-util 版本是 0.44-SNAPSHOT

我有一个由用户名和密码组成的**WellForm元素。**当我尝试使用**Browser.submit()**提交表单时，它会抛出 WellForm 无法转换为 FormPanel 的错误（我认为这是一个问题）。此外，如果我获取 loginForm 实例然后显式调用**submit()**方法，则会收到以下错误。

> java.lang.UnsatisfiedLinkError: com.google.gwt.user.client.ui.impl.FormPanelImpl.submit(Lcom/google/gwt/dom/client/Element;Lcom/google/gwt/dom/client/Element;)V

最初似乎没有在*FormPanelImplPatched.java中定义***submit()**方法。我添加了相同的内容并重新编译了代码。但我面临同样的问题。

 *除了将方法添加到 PatchClass 之外，还有其他方法可以解决此问题。*

# android - 注册接收器不起作用

> ID：14626977
> 
> 赞同：3
> 
> 时间：2013-01-31T13:32:30.270
> 
> 标签：android

我正在尝试处理我的主类中的推送通知（而且我也有 GCMBroadcastReceiver - 对于我没有运行主类时出现的所有通知）

但 registerReceiver 不起作用（GCMBroadcasrReceiver 工作正常）

我的代码：

```
public class Main extends Activity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        registerReceiver(mHandleMessageReceiver, new IntentFilter("com.google.android.c2dm.intent.RECEIVE"));
    }

    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            Log.d("BroadcastReceiver","Working");
        }
    };

} 
```

显现：

```
<receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    </intent-filter>
</receiver> 
```

*仅适用于我的 4.1.2 (S3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:05:26.810

好吧，找到了解决方案：

在我的 GCMIntentService.java 中，我需要像这样设置 sendBroadcast：

```
@Override
protected void onMessage(Context context, Intent intent) {

        Intent i = new Intent("com.my.app.DISPLAY_PUSH");

        i.putExtra("msg", intent.getExtras().getString("msg"));
        context.sendBroadcast(i);
    } 
```

并且广播接收器应该是

```
protected void onCreate(Bundle savedInstanceState) {
    registerReceiver(mHandleMessageReceiver, new IntentFilter("com.my.app.DISPLAY_PUSH"));
    }
.
.
.

private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("BroadcastReceiver","Working with msg:" + intent.getExtras().getString("msg")  );
        }
}; 
```

我想知道为什么它在没有 sendBroadcast 的情况下在 4.1.2 中工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T15:01:58.707

如果你像这样调用 sendBroadcast

```
Intent  intent = new Intent(context, mBroadcastReceiver.getClass());
intent.setAction(ACTION_ON_CLICK);
context.sendBroadcast(intent);

// or

Intent  intent = new Intent(context, MyBroadcastReceiver.class);
intent.setAction(ACTION_ON_CLICK);
context.sendBroadcast(intent); 
```

将其更改为：

```
Intent  intent = new Intent(ACTION_ON_CLICK);
context.sendBroadcast(intent); 
```

# mysql - 使用 mySQL 将时间四舍五入到最接近的 6 分钟

> ID：14626982
> 
> 赞同：3
> 
> 时间：2013-01-31T13:32:42.703
> 
> 标签：mysql, datetime

我`DATETIME`在 mySQL ( `fromStamp`) 中有一个字段，其中包含有效的日期/时间戳。我需要能够将分钟向上舍入到下一个 6 分钟间隔。秒数应被忽略或视为 :00

因此，如果我的 DATETIME 是，`2013-01-31 13:07:17`我需要将结果`2013-01-31 13:12:00` 排除在 :00 和 :06 以及 :31 和 :36 之间的时间之外，那些需要四舍五入**DOWN**。

```
 :00-06 round DOWN to 00
 :07-12 round UP to 12
 :13-18 round UP to 18
 :19-24 round UP to 24
 :24-30 round UP to 30
 :31-36 round DOWN to 30
 :37-42 round UP to 42
 :43-48 round UP to 48
 :49-54 round UP to 54
 :55-00 round UP to 00 
```

我找到了一种合理的方法来选择性地向下舍入：

```
SELECT
  fromStamp, 
  CONCAT(DATE_FORMAT(`fromStamp`, '%Y-%m-%d'), ' ',
         SEC_TO_TIME((TIME_TO_SEC(`fromStamp`) DIV 360) * 360))
FROM `table` 
WHERE (
    DATE_FORMAT(`fromStamp`, '%i') BETWEEN 0 AND 6 
    OR DATE_FORMAT(`fromStamp`, '%i') BETWEEN 31 AND 36
); 
```

有没有一种很好的方法可以将其他所有内容四舍五入到接下来的 6 分钟间隔？（我觉得我错过了一些简单的东西）

**更新**

所以我将采用@mellamokb 的解决方案，但他关于秒的评论是正确的，它确实发挥了作用。

2013-01-22 12:24:13 的 DATETIME 向上舍入到 12:30，这不是所需要的，所以我首先要做：

```
UPDATE table SET fromStamp = CONCAT(DATE_FORMAT(fromStamp, '%Y-%m-%d %h:%i'), ':00'); 
```

摆脱几秒钟，然后他的查询得到了我正在寻找的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:48:30.320

向上舍入是非常相似的逻辑，除了您添加`1`移位到下一个最近的`6-minute`间隔。我还减去`1`了`TIME_TO_SEC`作为校正因子，否则边界值，例如`06:00`在下一个 6 分钟间隔上移，即`12:00`.

```
SEC_TO_TIME( ( (TIME_TO_SEC(`fromStamp`) - 1) DIV 360 + 1) * 360))
                                                      ^^^ add one 
```

要将两者结合起来，请使用`CASE`语句来控制每条记录使用哪种形式的舍入：

```
SELECT
  fromStamp, 
  CASE WHEN
    DATE_FORMAT(`fromStamp`, '%i') BETWEEN 0 AND 6 
    OR DATE_FORMAT(`fromStamp`, '%i') BETWEEN 31 AND 36
  THEN
    CONCAT(DATE_FORMAT(`fromStamp`, '%Y-%m-%d'), ' ',
         SEC_TO_TIME((TIME_TO_SEC(`fromStamp`) DIV 360) * 360))
  ELSE
    CONCAT(DATE_FORMAT(`fromStamp`, '%Y-%m-%d'), ' ',
         SEC_TO_TIME(((TIME_TO_SEC(`fromStamp`) - 1) DIV 360 + 1) * 360))
  END
FROM `table` 
```

（[**演示**](http://www.sqlfiddle.com/#!2/c9341/2)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:40:40.920

根据提供的标准，我认为处理这种奇怪类型的舍入的最直接方法是：

```
 SELECT `fromStamp`
      , DATE_FORMAT(`fromStamp`,'%Y-%m-%d %H') + INTERVAL
        CASE
            WHEN TIME_FORMAT(`fromStamp`,'%i') <=  6 THEN  0  -- round DOWN
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 12 THEN 12  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 18 THEN 18  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 24 THEN 24  -- round up
         -- WHEN TIME_FORMAT(`fromStamp`,'%i') <= 30 THEN 30  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 36 THEN 30  -- round DOWN
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 42 THEN 42  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 48 THEN 48  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') <= 54 THEN 54  -- round up
            WHEN TIME_FORMAT(`fromStamp`,'%i') >= 55 THEN 60  -- round up
        END MINUTE AS rnd_fromStamp 
```

对于未来的审稿人来说，这似乎是表达正在发生的事情的最直接的方式，他们会想知道“该声明对 fromStamp 做了什么*塑料？”*

可能会有稍快（更有效）的算法，但我认为这些算法中的任何一个都不会更优雅，或者像这样容易阅读和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T06:56:56.183

这我用于四舍五入到分钟

> SELECT MINUTE(SEC_TO_TIME(((TIME_TO_SEC(call_duration)) DIV 60 +1)*60)) call_duration FROM call_log

# c - 我在哪里放置我的 DLL 的声明？+ 如何在其他语言中使用它 [C]

> ID：14626997
> 
> 赞同：0
> 
> 时间：2013-01-31T13:33:18.487
> 
> 标签：c, dll

1）假设我在c中创建了这个名为MyDLL的DLL。我有 2 个文件，1 个是 MyDLL.c，第二个是 MyDLL.h，然后我编译代码并获得 MyDLL.a 和 MyDLL.dll。我知道如何在新的 C 项目中使用这个 dll，我只包含我的 MyDLL.h 并为链接器提供 MyDLL.a 的路径现在可以说我没有 MyDLL.h，而不是我需要调用`LoadLibrary()`但是MyDLL.h 中的所有函数原型和所有 typdefs MACRO 和结构，那么程序如何知道所有这些声明？或者说我想在 C# 项目或 JAVA 项目中使用 DLL？我不能包含 MyDLL.h ..

2) 如果我在 dll 中有一个函数将指针作为参数（`void *`等`int *`），如果我没有 C# 和 JAVA 或任何其他语言的指针，我该如何发送指针作为参数？或者如果函数获取参数结构？甚至是指向函数的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:42:42.473

您提到的大多数语言都定义了自己的[外部函数接口（FFI）](http://en.wikipedia.org/wiki/Foreign_function_interface)，这是一种调用用其他语言编写的代码的机制。Java 的 FFI 称为[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)，而 C# 的 FFI - [P/Invoke](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)。