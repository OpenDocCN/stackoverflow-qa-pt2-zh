# StackOverflow 问答 13255000-13255999

# ms-access - 将数据导出到预先格式化的文件中

> ID：13255004
> 
> 赞同：1
> 
> 时间：2012-11-06T16:13:06.870
> 
> 标签：ms-access, text, export

我正在使用 Access 2007，我希望将我的数据导出到带有“。”的文本文件中。分隔器。我似乎没有任何运气找到答案，所以我想知道是否有可能有一个预先格式化的文本或 CSV 文件，它将我的数据导出到这样我就可以拥有我的“。” 分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:21:13.863

右键单击--->导出---->文本文件---->选择位置（不要检查带有格式和布局的导出数据---->确定---->分隔，确定--->下一个-----> 其他“。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:42:39.803

使用 schema.ini 文件

在 MS Access 中

```
 Sub TransferData()
    'Assuming file exits
    Kill "z:\docs\export.txt"
    CurrentDb.Execute "select * into [text;database=z:\docs\].[export.txt] from table1"
 End Sub 
```

Schema.ini 文件，必须位于用于导出的目录中：

```
[export.txt]
Format=Delimited(.)
DecimalSymbol=, 
```

更多信息：[Schema.ini](http://msdn.microsoft.com/en-us/library/ms709353%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:41:02.933

这是一种方法（从我对重复问题的原始答案重新发布）：

1.  在导航窗格中选择要导出的表/查询
2.  右键单击您的表/查询并选择“导出”>“文本文件”（或单击功能区“外部数据”选项卡的“导出”部分上的“文本文件”按钮。
3.  选择保存文本文件的位置，然后单击“确定”按钮
4.  在向导对话框的下一个屏幕上，选择“分隔”并单击“下一步”按钮
5.  选择“其他”作为分隔符，然后在旁边的框中键入一个点
6.  如果您希望在输出中引用文本字段，请从下拉列表中选择一个文本限定符
7.  如果您愿意，请选中“在第一行包含字段名称”框
8.  单击“高级”按钮以获取更多选项
9.  将“十进制符号”选项更改为点以外的内容。（这是必要的，因为您的输出字段分隔符与您的十进制符号不匹配，否则导出操作将失败。）
10.  单击“确定”按钮
11.  点击“完成”按钮

那应该处理它。我假设您的任何文本字段中都没有十进制数字或点，否则您将在解析输出时遇到问题...

# file - Aptana Studio 3 本地/远程文件比较

> ID：13255007
> 
> 赞同：6
> 
> 时间：2012-11-06T16:13:08.307
> 
> 标签：file, compare, aptana

我一直在对 Aptana 进行采样，看看我是否更喜欢它而不是 Dreamweaver，并且我肯定希望继续使用它，但它缺少我需要的一个重要功能 - 一种在上传之前比较本地文件和远程文件的简单方法。

我在这个线程中找到了一些信息，但它并没有完全解决我的问题： [Aptana File Diff?](https://stackoverflow.com/questions/6742486/aptana-file-diff)

上面的线程提到如果同步可以比较本地/远程，但是如果我右键单击项目视图中的文件并选择同步，随后的菜单似乎没有做任何事情。或者它可能正在尝试同步整个站点。但我不清楚同步应该如何工作。我不想冒在远程环境中无意覆盖文件的风险。

如果有人可以对此有所了解，请随意！

# silverlight - 使用浏览器的 HTTP 堆栈

> ID：13255009
> 
> 赞同：0
> 
> 时间：2012-11-06T16:13:27.120
> 
> 标签：silverlight, vmware, silverlight-5.0, webrequest

我试图以某种方式解决这里描述的问题：[Silverlight 5 - Debugging npctrl.dll crash](https://stackoverflow.com/questions/9382809/silverlight-5-debugging-npctrl-dll-crash)

他们提出了两种解决方案。其中之一是“停止使用客户端网络堆栈”。不确定这意味着什么，但在 app.xaml.cs 我们有以下行：

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp); 
```

这是否意味着我们使用客户端网络堆栈？如果是这样，那么我该如何切换到浏览器 http 堆栈？我尝试删除此行并将其更改为：

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.BrowserHttp); 
```

但是在两种方式中，当我执行 HTTP 请求时，我都没有得到响应。根本没有任何反应。

有什么建议么？

**更多细节：**

首先，它是一个OOB 应用程序。所以我把它改成了

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.BrowserHttp); 
```

正如我上面解释的那样。我尝试通过以下方式执行 HTTP 请求：

```
m_restClient = new RestClient
    {
Authority = http://172.30.2.73:8182/;
    Timeout = TimeSpan.FromMinutes(2),
    Deserializer = deserializer,
    Serializer = serializer,
    GetErrorResponseEntityType = GetErrorResponseEntityType,
    Encoding = serializer.ContentEncoding
  };

var request = new RestRequest
    {
      Path = "emulation/parameters",
      Method = WebMethod.Get,
    };

m_restClient.BeginRequest<EmulationParametersResponse>(request, RestGetEmulationParamsCompleted); 
```

在提琴手中，似乎我确实收到了状态码为 200 的响应，我也可以在那里看到响应，但是我在回调和反序列化器中设置了一个断点，它并没有就此停止。

# ruby-on-rails - 选择框选择的项目在搜索后停留

> ID：13255011
> 
> 赞同：0
> 
> 时间：2012-11-06T16:13:35.247
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3, drop-down-menu, html-table

我目前有一个按几个选择框排序的表格。选择框可以正常工作并对表格进行排序/过滤，但是每当用户提交搜索时，页面都会刷新并且选择框会重置。我希望在搜索后保留所选项目，例如，如果您选择男性，然后点击 go，在页面刷新后，仍然选择男性。我目前已经成功实现了无限滚动，如果有帮助的话，我正在为我的框架使用 rails 3 和 twitter-bootstrap。

这是我的代码：

**index.html.erb**

```
 <form class="form-inline"
        <p>
         <label class="radio">
          <input type="radio" name="gender_search" value="M">M
         </label>
        <label class="radio">
          <input type="radio" name="gender_search" value="F">F
        </label>

        <select name="state_search" class="span2">
          <option value="">Select a State</option>
          <option>----------------</option>
          <option>LA</option>
          <option>MS</option>
          <option>TX</option>
        </select>
        <select name="city_search" class="span2">
          <option value="">Select a City</option>
          <option>----------------</option>
          <option>Mandeville</option>
          <option>Covington</option>
        </select>
        <button type="submit" class="btn">GO</button>
        </p>
      </form>
      <table class="table table-striped table-bordered span8 table-condensed"     
       id="articles_table" >
        <thead class="header">
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Description</th>
            <th>Created_At</th>
          </tr>
        </thead>
        <tbody>
          <%= render @articles %>
        </tbody> 
```

**_article.html.erb**

```
<tr>
      <td> <%= article_counter +1 %> </td>
      <td> <%= article.Title %> </td>
      <td> <%= article.Description %> </td>
      <td> <%= article.Created_At %> </td>
</tr> 
```

**文章控制器.rb**

```
def index
@articles = Article.state_search(params[:state_search]).gender_search(params[:gender_search]).city_search(params[:city_search]).page(params[:page]).limit(50).order('NTRP DESC', 'Last_Name ASC')
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @articles }
    format.js
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:18:18.403

好，

```
select_tag(:city_id, options_for_select([['Lisbon', 1], ['Madrid', 2]], @previous_choice) 
```

首先，我建议你使用 Rails 的表单助手让事情变得更整洁！你的表格看起来像：

```
<%= form_tag articles_path, :method => "GET" do %>

    <%= radio_button_tag :gender_search, "M" %>
    <%= label_tag :gender_search_M, "M" %>
    <%= radio_button_tag :gender_search, "F" %>
    <%= label_tag :gender_search_F, "F" %>

    <%= select_tag :state_search, options_for_select([['Select a state', 0],['-----------', 0],['LA', 'LA'],['MS', 'MS'], ['TX', 'TX']], @prev_state) %>
    <%= select_tag :city_search, mptions_for_select([['Select a city', 0],['----------', 0],['Mandeville', 'Mandeville'],['Covington', 'Covington']], @prev_city) %>

    <%= submit_tag "Go" %>

<% end %> 
```

注意 select_tag 中的 @prev_state 和 @prev_city。这些在articles_controller 中设置：

```
def index

    @prev_city = params[:city_search]
    @prev_state = params[:state_search]

    # other stuff
end 
```

所以这个想法是每次用户提交时， params[:xxx] 包含她选择的任何内容。然后，您制作视图中可用的变量，我们将这些变量提供给 options_for_select。

希望这会有所帮助，快乐的栏杆！

# user-controls - Umbraco NodeByAlias？

> ID：13255012
> 
> 赞同：2
> 
> 时间：2012-11-06T16:13:35.973
> 
> 标签：user-controls, umbraco

我正在使用 umbraco 中的 usercontrolwrapper 开发自定义数据类型。我有一些我需要的数据编辑器设置。

```
dynamic landkaart = new DynamicMedia(umbraco.library.GetPreValues(1100));
dynamic pointer = new DynamicMedia(umbraco.library.GetPreValues(1100)); 
```

如您所见，我正在使用该`GetPrevalue()`方法，因此可以访问这些值。现在唯一的问题是我不想对这些 id 进行硬编码。我想我需要一些类似`NodeById()`的方法，除了我想要它的属性别名。有谁知道这样的方法，或者知道我可以用来获取属性ID的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:10:09.683

如果您使用 uComponents，您可以从其名称中获取 Id - 但我不确定这是否适用于 PreValues（您使用的是 Umbraco Contour 吗？）

```
var prevalueId = uComponents.Core.uQuery.GetNodesByName("MyPrevalueName").First().Id; 
```

要删除幻数硬编码，您可以将“1100”移动到 web.config 中并为其命名：

```
<add key="PrevalueNodeName" value="MyPrevalueName"/>

var prevalueId = uComponents.Core.uQuery.GetNodesByName(ConfigurationManager.AppSettings["PrevalueNodeName"].ToString()).First().Id;
dynamic landkaart = new DynamicMedia(umbraco.library.GetPreValues(prevalueId)); 
```

或者如果预值不喜欢按名称访问：

```
<add key="PrevalueNodeName" value="1100"/>

var prevalueId = ConfigurationManager.AppSettings["PrevalueNodeName"].ToString())
dynamic landkaart = new DynamicMedia(umbraco.library.GetPreValues(prevalueId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T07:59:06.500

这是我想出的解决方案：

```
Document d = new Document(@Model.Id);
var pt = d.getProperty(propAlias).PropertyType;
var preVals = PreValues.GetPreValues(pt.DataTypeDefinition.Id); 
```

# arrays - 如何在数组中找到空元素？

> ID：13255018
> 
> 赞同：1
> 
> 时间：2012-11-06T16:13:46.317
> 
> 标签：arrays, coldfusion, null

我有一堆问题和答案，未回答的问题必须在顶部抛出错误消息，答案在数组中，如果未回答，则数组将值存储为未定义的数组元素。

我试图通过将元素转换为列表来检索元素的位置，但是在循环列表时丢失了空元素。当我用简单的循环循环它时：

```
 <cfloop from ="1" to="#arraylen(currentinfo.answers)#" index="ele">
  <cfset i = i+1>
   <cfif not listlen(currentinfo.answers[ele],'-')><cfset j=#i#>#j#</cfif>
  </cfloop> 
```

我在下面收到错误：

```
Element 5 is undefined in a Java object of type class coldfusion.runtime.Array.  

The error occurred in D:\sites\askseaton\sections\PSSurvey\Clients\tags\surveydisplay.cfm: line 194

192 : <cfloop from ="1" to="#arraylen(currentinfo.answers)#" index="ele">
193 : <cfset i = i+1>
194 :   <cfif not listlen(currentinfo.answers[ele],'-')><cfset j=#i#>#j#</cfif>
195 : </cfloop>
196 : <div>Question(s)#j# must be answered to proceed further.</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:30:32.930

从 ColdFusion 8 开始，就有一个[`arrayIsDefined()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7ed3.html)功能可以做你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:48:46.267

或者尝试循环遍历数组的另一种方法：

```
 <cfloop array="#currentinfo.answers#" index="ele">
  <cfset i++>
   <cfif not listlen(ele,'-')><cfset j=i>#j#</cfif>
  </cfloop> 
```

# jms - 如何将 OpenMQ 与 Jboss-4.2.3.GA 集成？

> ID：13255020
> 
> 赞同：1
> 
> 时间：2012-11-06T16:13:51.097
> 
> 标签：jms, jboss-4.2.x, openmq

我正在尝试将 OpenMq 与 Jboss-4.2.3.GA 集成，以进行面向消息传递的中间件的性能评估研究。我想使用 imqjmsra.ra 作为默认资源适配器。我需要一步一步的帮助来整合这两者。我想让 OpenMq 成为我的 jboss 服务器的默认 JMS 提供程序。文档和确切的链接或正确的步骤将不胜感激。请帮忙。

# objective-c - 带有源的 UITableView：字典数组

> ID：13255023
> 
> 赞同：2
> 
> 时间：2012-11-06T16:14:00.763
> 
> 标签：objective-c, cocoa-touch, uitableview

我正在构建一个以字典数组为源的 UITableView。每个字典都有一个字母作为键，一个联系人数组作为值，例如：键“A” - 值“Adam, Alex, Andreas”。我现在的问题是我无法获得每个部分的正确行数或部分标题......顺便说一下，我是 Objective-C 的新手，所以如果我的问题看起来很奇怪，我很抱歉。一些指导将不胜感激！

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    //tableContent is my array of dictionaries
    return [self.tableContent count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //here I don't know how to get the dictionary value array length that would be the
    //the number of contacts per letter
    return ?
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
{
    //here I don't know how to get the dictionary key to set as section title
    retrun ?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:27:06.383

您似乎无缘无故地将数据包装在数组中。如果您的数据只是一个字典，那对您来说会更容易

```
@property (nonatomic, strong) NSDictionary *tableContent;

...

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  return [self.tableContent count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  NSString *key = [self tableView:nil titleForHeaderInSection:section];
  return [[self.tableContent objectForKey:key] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
{
  return [[self sortedKeys] objectAtIndex:section];
}

- (NSArray *)sortedKeys;
{
  return [self.tableContent.allKeys sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:31:58.707

当我读到它时，似乎每个字典只有一个键（和一个匹配的数组）。如果是这样，请获取位于`self.tableContent`节偏移量处的字典。`numberOfRowsInSection:`返回联系人数组中对象的数量并返回`titleForHeaderInSection:`键。从字典中获取`allValues`和`allKeys`从字典中获取可能比尝试跟踪每个字典中的**哪个**键更简单。

（如果你有一个自定义对象数组而不是字典，它也可能更容易。然后，每个对象都可以有一个 title 属性和一个 contacts 数组属性。）

# ios - 访问父视图控制器的父视图

> ID：13255024
> 
> 赞同：0
> 
> 时间：2012-11-06T16:14:02.657
> 
> 标签：ios, xcode, ios6, parentviewcontroller

我有一个 Viewcontroller A，我添加了一个 Viewcontroller B 作为子视图。B有很多childviewcontroller C,D,E。C,D,E 是 3 个 UItableViewcontroller。这就是我正在尝试的，当按下 C、D 或 E 的 UitableViewcells 时，我想从 A 切换到另一个视图控制器 F。

第一个问题：这是最好的方法吗？

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:17:55.143

一种解决方案是使用并向其中包含 A 和 B`NSNotificationCenter`的通知发送通知。`UINavigationController`

# xcode4.5 - 我的“下一步”按钮链接没问题，但我的构建崩溃了

> ID：13255026
> 
> 赞同：1
> 
> 时间：2012-11-06T16:14:17.350
> 
> 标签：xcode4.5

我将功能附加到按钮上，当我运行应用程序时，它工作得很好，但是当我单击按钮时，我的应用程序停止运行，我被提示返回 xcode。

我做错什么了吗？

我试图使用 IBAction 制作“下一个功能”，当我单击按钮时，它会将我的页面移动到另一个名为“关于我们”的应用页面。我使用了一些来自 youtube 的指南，并提出了如下编码；

**视图控制器.h**

```
@interface ViewController : UIViewController
{}
-(IBAction)next; 
```

**视图控制器.m**

```
@implementation ViewController

-(IBAction)next;
{
    About_Us *AU = [[About_Us alloc] initWithNibName:nil bundle:nil];
    self.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:AU animated:NO completion:NO];
} 
```

*下面的代码上突出显示了一个绿色文本*，上面写着“ `Thread 1:breakpoint 3.1 4.1`”

```
About_Us *AU = [[About_Us alloc] initWithNibName:nil bundle:nil]; 
```

最近我使用的指南可能已经过时，因为 xcode 的版本已经升级，如果我能得到一些帮助会很好。

# sql - 如何使用数据字典

> ID：13255030
> 
> 赞同：1
> 
> 时间：2012-11-06T16:14:31.153
> 
> 标签：sql, oracle

我正在尝试使用 oracle sql，并试图使用每个索引中的索引键的名称来查找用户拥有的所有索引的名称。

我尝试从系统目录视图中的 user_indexes 中查找并显示 INDEX_NAME、INDEX_TYPE、COLUMN_NAME、COLUMN_POSITION 但

以下是我尝试过的：

```
select table_name, column_name, data_type from user_tab_columns; 
```

但它似乎不足以显示所有 user_indexes .. 我该怎么办

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:21:48.533

要查看索引的简单列表和它们使用的列，只需使用 user_ind_columns..

```
SELECT * FROM user_ind_columns 
```

希望我能帮上忙。。

# c# - textBox 和 if 语句

> ID：13255032
> 
> 赞同：-3
> 
> 时间：2012-11-06T16:14:35.233
> 
> 标签：c#

我试图让 Windows 窗体中的一些文本框将数据放入列表框中。

我只想要列表框中的一些东西。所以我需要知道的是：

如何为 textBox 创建 if 语句？

* * *

EG：如果 textBox2 显示“N/A”输出“”

EG：如果 textBox2 显示“25”输出“25 岁”

**编辑：**

另一个问题：我想说，如果 textbox3 包含 "ANYTHING HERE" 输出 ANYTHING + "message" ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:16:39.847

```
if (textBox2.Text == "N/A")
    listBox2.Items.Add("");
else if (textBox2.Text == "25")
    listBox2.Items.Add("25 years old"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:18:56.603

也许您可以简单地使用*TextChanged*事件并将您的 if 放在那里：

```
private void Initialize()
{
  textBox1.TextChanged += new EventHandler(m_textBox1_TextChanged);
}

void m_textBox1_TextChanged(object sender, EventArgs e)
{
  if (textBox1.Text == "N/A")
    ...
  else
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:17:02.540

像这样的东西？

```
if(textBox1.Text == "N/A")
{
    listBox1.Items.Add("");
}
if(textBox1.Text == "25")
{
    listBox1.Items.Add("25 years old");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:17:24.920

在最基本的层面上，这将是：

```
if(textbox2.Text == "N/A")
    listbox.Items.Add(" "); 
```

但是这种方法非常脆弱，我敦促您更深入地研究需求，以找到更实质性的东西来进行测试。如果您在问题或评论中提供有关您的问题的更多详细信息，我很乐意帮助您解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T16:17:55.763

```
if( string.Compare(textBox1.Text, @"N/S") == 0)
{
    listBox.Add(string.Empty);
}   
else if( string.Compare(textBox1.Text, "25") == 0)
{
    listBox.Add("25 years old");
} 
```

# apache-flex - 从 TitleWindow 读取输入值的问题

> ID：13255033
> 
> 赞同：0
> 
> 时间：2012-11-06T16:14:36.550
> 
> 标签：apache-flex, flex4, adobe

我在从 TitleWindow mxml 检索 ActionScript 中的值时遇到问题。以下是 UpdateRelease.mxml

```
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" 
            title="Title Window" x="168" y="86">
<mx:Script>
    <![CDATA[
        import com.paul.data.ReleaseVO;
        import mx.controls.Alert;
        import mx.controls.Text;
        import mx.managers.PopUpManager;

        [Bindable]
        public var i_ReleaseVO:ReleaseVO = null;

        // Event handler for the OK button.
        protected function updateReleaseData(): void {
            if(releaseName.text == '')
                Alert.show("Release Name cannot be null");
            else if(releaseDate.text == '')
                Alert.show('Release Date cannot be null');
            else
                (parentApplication as Main).mainScreen.updateReleaseEvent();
        }
    ]]>
</mx:Script>
<mx:Canvas>
    <mx:VBox>
    <mx:HBox>
        <mx:Label text="Release Name"/>
        <mx:TextInput id="releaseName" width="100%" text="{i_ReleaseVO.release}"/>
    </mx:HBox>
    <mx:HBox>
        <mx:Label text="Release Date"/>
        <mx:DateField id="releaseDate" width="100%" selectedDate="{DateField.stringToDate(i_ReleaseVO.relDate, 'YYYY/MM/DD')}"/>
    </mx:HBox>
    <mx:HBox>
        <mx:Label text="Other Info"/>
        <mx:TextInput id="relOtherInfo" width="100%" text="{i_ReleaseVO.otherInfo}"/>
    </mx:HBox>
    <mx:HBox>
        <mx:Button label="OK" click="updateReleaseData();"/>
        <mx:Button label="Cancel" click="PopUpManager.removePopUp(this);"/>
    </mx:HBox>
    </mx:VBox>
</mx:Canvas> 
```

以下是 ActionScript 代码片段

```
 public function updateReleaseEventHandler( pEvent:Event ): void {

        if(i_RequestServiceProxy != null) {
            var i_RequestParams:Object ={};
            i_HttpXMLRequest = new HttpXMLRequest();
            var obj:Object = new Object();
            obj["release"] = this.mainView.updateReleaseValueView.releaseName.text;
            obj["releaseDate"] = this.mainView.updateReleaseValueView.releaseDate.text;
            obj["otherInfo"] = this.mainView.updateReleaseValueView.relOtherInfo.text;
            i_RequestParams = i_HttpXMLRequest.getUpdateReleaseParams( obj );
            i_RequestServiceProxy.updateRelease( i_RequestParams );
        } else {
            Alert.show("i_RequestServiceProxy is NULL");
        }
    } 
```

以下是 MainView.mxml 显示包含 UpdateRelease.mxml

```
<s:VGroup width="100%" height="100%" >
    <mx:ViewStack id="vs">
        <views:UpdateRelease id="updateReleaseValueView" width="100%" height="100%"/>
    </mx:ViewStack>
</s:VGroup> 
```

问题出在 ActionScript 文件中的以下语句中。我发现以下语句没有按预期工作。执行在下面的第一个失败。有人可以指出这里的错误是什么吗？

```
 obj["release"] = this.mainView.updateReleaseValueView.releaseName.text;
            obj["releaseDate"] = this.mainView.updateReleaseValueView.releaseDate.text;
            obj["otherInfo"] = this.mainView.updateReleaseValueView.relOtherInfo.text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:11:39.900

我还没有弄清楚问题所在。但我找到了一种不同的方法来解决这个问题。我在父 mxml 中声明了一些变量（从我启动弹出窗口的位置），并在处理“确定”按钮单击时使用弹出窗口中的值设置这些变量。现在可以了。我认为这不是一个好主意，但我将继续采用这种方法，直到找出上述代码的问题为止。

而且，我感谢那些花时间阅读问题以找到问题的人:)

# c# - 使用 C# API 从 Rackspace CloudFiles 启用 CDN 的容器中检索图像

> ID：13255035
> 
> 赞同：0
> 
> 时间：2012-11-06T16:14:51.733
> 
> 标签：c#, rackspace-cloud

我正在使用[Rackspace Cloud Files API](https://github.com/rackspace/csharp-cloudfiles)。我可以使用以下代码从未启用 CDN 的容器中检索我的图像。但是，当我尝试使用启用了 CDN 的容器时，找不到该容器。

如何从 Rackspace Cloud Files 上启用 CDN 的容器中检索文件？

```
 var creds = new UserCredentials(username, api);
    var client = new CF_Client();
    Connection conn = new CF_Connection(creds, client);
    conn.Authenticate();

    var container = new CF_Container(conn, "TestContainer");
    var list = container.GetObjectList(true); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:37:40.073

为了跟进，我采访了 Rackspace 代表。他澄清说，这个容器是在达拉斯端点上创建的，而 API 只从默认端点（芝加哥）提取。我最终放弃了绑定 API，直接使用了 REST API。HTH。

# r - 如何在auto.key（格）中的符号后放置文本？

> ID：13255036
> 
> 赞同：2
> 
> 时间：2012-11-06T16:14:53.693
> 
> 标签：r, plot, lattice

使用`auto.key`in 时`lattice`，我可以交换符号和文本的默认位置吗？也就是说，我希望图例中的文本相对于符号位于右侧。我知道这很容易做到`key`，但是将颜色与每个图的组分别链接不仅乏味，而且非常容易出错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:37:09.803

不，你不能`auto.key`为你做这件事。原因如下：

*   `auto.key`通过将参数列表传递给`simpleKey()`. 来自`?xyplot`：

    > auto.key：一个逻辑的，或一个包含组件的列表，用作“simpleKey”的参数。

*   `simpleKey()`依次构造一个列表（最终传递给`draw.key()`），其中**文本元素始终排在第一位**。以下是关键行`simpleKey()`：

    ```
    ans <- list(text = list(lab = text), col = col, cex = cex, 
        alpha = alpha, font = font, fontface = fontface, fontfamily = fontfamily, 
        ...) 
    ```

# ruby-on-rails - 您将如何提供用不同（区域设置）语言编写的菜单，而不是在每一页中重复它们？

> ID：13255037
> 
> 赞同：1
> 
> 时间：2012-11-06T16:15:01.183
> 
> 标签：ruby-on-rails, ruby, menu

以下是法语菜单的示例，我还将提供另外五种语言的菜单：

```
<a href="/<%= @lang %>/">Jeux</a>
<a href="/<%= @lang %>/get-the-player">Obtenir le lecteur</a>
<a href="/<%= @lang %>/about">À propos</a>
<a href="/<%= @lang %>/faq">FAQ</a>
<a href="/<%= @lang %>/contact">Contact</a> 
```

目前菜单位于​​相关页面（.html.erb）中，使用下面列出的代码

```
<%= content_for :menu do %>    
    <a href="/<%= @lang %>/">Jeux</a>
    <a href="/<%= @lang %>/get-the-player">Obtenir le lecteur</a>
    <a href="/<%= @lang %>/about">À propos</a>
    <a href="/<%= @lang %>/faq">FAQ</a>
    <a href="/<%= @lang %>/contact">Contact</a>
<% end %> 
```

完成上述操作后，我就获得了 application.html.erb 的参考

```
<%= yield :menu %> 
```

对于其他语言，它可以以完全相同的方式完成，但是，有没有一种方法可以避免重复代码。也许让控制器去寻找它并将它呈现在确切的位置？请帮忙，

提前致谢！

==================================================== ==========================

```
 **CHECK BELOW FOR SOLUTIONS THAT I HAVE PROVIDED** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:26:57.363

查看内置的[国际化 (i18n) API](http://guides.rubyonrails.org/i18n.html)。

编辑：另一种方法是使用本地化视图，如[ruby​​ on rails i18n guides 中所述](http://guides.rubyonrails.org/i18n.html#localized-views)。例如，您可以将文件命名`index.fr.html.erb`为`index.en.html.erb`. 然后，根据您的`I18n.locale`设置，呈现适当的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:37:26.677

如果您在自己的网站上有很多这样的事情要做，我建议您看看 Google Closure Templates (Soy)。它有一个本地化框架，您可以使用它来实现这一点。

如果您使用它，那么您编写一个 Soy 模板来生成菜单和（站点的其他部分）并使用本地化功能为用户显示适当的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:03:43.147

这是需要做的。在我的 _header.html.erb（或 application.html.erb，具体取决于您的操作方式）上，我创建了如下所示的 if 语句：

```
<% if params[:lang]=="es" %>
    <a href="/<%= @lang %>/">Jeux</a>
    <a href="/<%= @lang %>/get-the-player">Obtenir le lecteur</a>
    ..........
    ..........
<% end %>

<% if params[:lang]=="en" %>
    <a href="/<%= @lang %>/">Games</a>
    <a href="/<%= @lang %>/get-the-player">Get the Player</a>
    ..........
    ..........
<% end %> 
```

如果我/你愿意，你可以通过这个操作获得更多。是的，伙计们，您可以使用国际化 API 来做到这一点，但是这次我正在编辑一个大型应用程序，这可能会浪费更多时间，而且会降低工作效率。所以上面的源代码可能是另一种方式。:)。谢谢你们对这个问题的所有投入。

# ruby-on-rails - 需要帮助显示用户的个人资料照片而不保存它们

> ID：13255039
> 
> 赞同：0
> 
> 时间：2012-11-06T16:15:04.933
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

我的应用程序使用omniaauth 和omniauth-facebook gem 来连接facebook。我可以提取我需要的所有数据，但我无法呈现个人资料图片。

我想通过使用图片的 URL 来显示用户的个人资料图片，而不是将其保存到磁盘。

我试过这个：

```
<%= image_tag "#{@user.facebook.info.image}" %> 
```

还有这个：

```
<img src="http://graph.facebook.com/<UID>?fields=picture" > 
```

但两者都没有奏效。

我在 facebook 文档中没有发现任何禁止我使用 URL 而不是保存到磁盘的内容。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:56:33.323

您可以使用像[Avatars.io](http://avatars.io/)这样的服务，它提供以下 URL 模式：

```
http://avatars.io/facebook/:id
http://avatars.io/facebook/:username 
```

这种方法的优点之一是它也适用于其他服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:24:58.480

利用：

```
<img src="http://graph.facebook.com/<UID>/picture" /> 
```

这个端点返回一个 301 重定向到图片。使用`?fields=`返回一个 json 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:35:07.017

这是解决方案。[我不得不利用我通过这篇文章](https://stackoverflow.com/questions/4379700/how-to-get-302-redirect-location-in-rails-have-tried-httparty-net-http-and-re)了解到的 CURB gem 。

最终，我把这个方法放在了我的应用程序助手中。

```
def redirect_location_for(url)
  uri_str = URI.encode(url)

  result = Curl::Easy.http_get(uri_str) do |curl|
    curl.follow_location = false
  end

  result.header_str.split('Location: ')[1].split(' ')[0]
end 
```

然后我能够在我的视野中拥有这一点。

```
<%= image_tag redirect_location_for("https://graph.facebook.com/<nickname>/picture?type=square"), :size => "60x60" %> 
```

请注意，该解决方案要求我对图形 URL 使用“https”而不是“http”。这最终将我重定向到与 http 不同的 URL，并且由于某种原因，如果您使用 HTTPS 拉取图片，Facebook 不会限制您下载和呈现图片的方式。

# soapui - 如何使用 SoapUI 模拟 XMLHTTP 接口？

> ID：13255040
> 
> 赞同：0
> 
> 时间：2012-11-06T16:15:07.100
> 
> 标签：soapui

我正在使用 SoapUI 为各种 http 调用创建一个模拟。

其中大部分是正确的 SOAP 调用，我有 WSDL 文件，但有些只是丑陋的 XML-over-HTTP，没有正确的服务定义，我不知道如何处理这些（真正的底层系统是 zOS/CICS，在您感兴趣的案例）

我有来自日志文件的请求样本，但我没有管理员权限，所以我不能（至少不容易）记录实际的通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:59:48.273

已解决，对 MockService 使用以下 OnRequest 脚本和一个虚假的模拟操作（否则 OnRequest 脚本将不会触发）：

```
mockRunner.returnFile(mockRequest.httpResponse, new File("response.xml"))
return new com.eviware.soapui.impl.wsdl.mock.WsdlMockResult(mockRequest) 
```

另见： http: [//www.soapui.org/Service-Mocking/mocking-rest-services.html](http://www.soapui.org/Service-Mocking/mocking-rest-services.html)

# java - Java 选择递归函数

> ID：13255041
> 
> 赞同：7
> 
> 时间：2012-11-06T16:15:11.063
> 
> 标签：java, string, recursion

我在这里有两个不同的递归函数，用于在 Java 中反转字符串：

```
 Long ms1 = System.currentTimeMillis();
    String str1 = reverse1(str);
    ms1 = System.currentTimeMillis() - ms1;

    Long ms2 = System.currentTimeMillis();
    String str2 = reverse2(str);
    ms2 = System.currentTimeMillis() - ms2;

    System.out.println("Input: " + str);
    System.out.println("  Length: " + str.length());
    System.out.println("Reverse 1:");
    System.out.println("  " + herp + " function calls");
    System.out.println("  " + ms1 +  " milliseconds");
    System.out.println("Reverse 2:");
    System.out.println("  " + derp + " function calls");
    System.out.println("  " + ms2 +  " milliseconds");
}
public static String reverse1(String str){
    herp++;
    if(str.length() == 1) return str;
    return reverse1(str.substring(str.length()/2)) + reverse1(str.substring(0, str.length()/2));
}
public static String reverse2(String str){
    derp++;
    if(str.length() == 1) return str;
    return reverse2(str.substring(1)) + str.charAt(0);
} 
```

给定一个长度为 5000 的字符串，这是程序的输出：

```
Input: ...
  Length: 5000
Reverse 1:
  9999 function calls
  16 milliseconds
Reverse 2:
  5000 function calls
  52 milliseconds 
```

现在为什么函数调用两倍的函数要快 3 倍？我应该如何构建我的递归函数以在 Java 中实现最大速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T16:23:32.370

这是一个很好的旧算法分析问题。您`reverse1`应该在 O(n logn) 时间内运行，而需要 O(n²) 时间，因此要反转的字符串越长，速度就`reverse2`越快。`reverse2``reverse1`

资源使用量不是由调用次数决定的，而是由将字符复制到在每个字符串连接操作中创建的新 String 对象所花费的时间决定的。in 中的字符串连接*平均*比in`reverse2`处理更长的字符串，因此它的总执行时间更长。*`reverse1`*

 **   在`reverse1`中，每个字符都被复制 log2(n) 次（其中 n 是原始字符串的长度），因为递归调用树的深度约为 log2(n)。

*   每个字符被复制的次数等于它在`reverse2`原始字符串中的位置（±1，我不关心）。这使得每个字符平均有 n/2 个副本。

对于较大的 n，log2(n) 远小于 n/2，因此`reverse1`往往更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:22:49.730

大约 50% 的第一种类型的调用没有做任何工作就结束了，因为`str.length() == 1`. 这使得具有非平凡工作的调用数量大致相等。如果您在退出条件之后移动`derp++`并`herp++`调用，您将获得“非平凡”调用的数量，并且它们将相等。

其他调用也会更快，因为平均而言它们会连接较短的字符串，弥补 3 倍的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:27:36.673

@HenningMakholm's answer is excellent, but I just wanted to throw this out there, based on a comment about iterative methods and immutable strings by @cHao. This would probably be most appropriate for a comment but I wanted the space real estate of an answer...

```
public static String reverse3(String str){
    StringBuilder sb = new StringBuilder();
    int i;
    for(i = str.length() - 1; i >= 0; i--) {
        sb.append(str.charAt(i));
    }
    return sb.toString();
} 
```

This iterative method which creates only one immutable `String` object at the end, and runs in `O(n)` time yields the following results:

```
 Length: 5406
Reverse 1:
  10811 function calls
  59 milliseconds
  5406 length correctness test
Reverse 2:
  5406 function calls
  126 milliseconds
  5406 length correctness test
Reverse 3:
  3 milliseconds
  5406 length correctness test 
```*

# android - 如何在列表视图中加载大量项目？

> ID：13255043
> 
> 赞同：0
> 
> 时间：2012-11-06T16:15:18.013
> 
> 标签：android

我正在开发一些需要从服务器下载许多帖子的应用程序。列表项包含一些文本信息，用户图片和图像被插入到消息中。

为了更新列表视图，我从那里使用 PullToRefreshListView [https://github.com/chrisbanes/Android-PullToRefresh并从这个](https://github.com/chrisbanes/Android-PullToRefresh)[http://codehenge.net/blog/2011/06/android-development-](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)延迟加载和缓存列表视图图像[tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)。

一切正常，但我有下一个问题：当我滚动列表视图并下载越来越多的项目时，我收到有关内存不足的错误消息。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:44:52.763

**-** Android 上的图像（特别是位图）内存异常存在很多问题，其中许多问题在 stackoverflow 上进行了讨论。如果您检查现有问题以查看您的问题是否与现有问题之一相匹配，那么最好写出使您的情况不同的原因。

**一些例子：**

[由于大位图大小导致内存不足异常](https://stackoverflow.com/questions/5321579/out-of-memory-exception-due-to-large-bitmap-size)

[Android：图库中的内存不足异常](https://stackoverflow.com/questions/3238388/android-out-of-memory-exception-in-gallery)

[Android处理图像处理内存不足异常](https://stackoverflow.com/questions/3724082/android-handling-out-of-memory-exception-on-image-processing)

等：[https ://stackoverflow.com/search?q=android+out+of+memory+exception+bitmap](https://stackoverflow.com/search?q=android+out+of+memory+exception+bitmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:21:45.193

尝试仅加载可见项目图像并在它们不可见时立即回收它们。）这样您就可以回收无限图像。

延迟加载创建一个缓存文件夹。您也可以使用它来检索回收的图像。

# jersey - 使用 Jersey 客户端设置“Origin”和“Access-Control-Request-Method”标头

> ID：13255051
> 
> 赞同：6
> 
> 时间：2012-11-06T16:15:39.393
> 
> 标签：jersey

泽西客户端没有为我设置“原点”标题，我想知道我是否遗漏了什么。

```
String origin="http://www.localhost.com";
ClientResponse response= webResourceBuilder("my/endpoint")
            .header( "origin" , origin)
            .header("Access-Control-Request-Method", "POST")
            .header("xorigin", origin)
            .header("whatever", "test")
            .accept("application/xml")
            .get(ClientResponse.class); 
```

当我在运行时检查服务器端的请求标头时，我发现“xorigin”和“whatever”标头，但没有“origin”和“Access-Control-Request-Method”

如何设置这些标题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T09:21:01.713

默认 Jersey 客户端使用[HttpURLConnection](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/net/www/protocol/http/HttpURLConnection.java#HttpURLConnection)向服务器发送请求。`HttpUrlConnection`限制在请求中发送的一些标头，请参阅：

```
/*
 * Restrict setting of request headers through the public api
 * consistent with JavaScript XMLHttpRequest2 with a few
 * exceptions. Disallowed headers are silently ignored for
 * backwards compatibility reasons rather than throwing a
 * SecurityException. For example, some applets set the
 * Host header since old JREs did not implement HTTP 1.1.
 * Additionally, any header starting with Sec- is
 * disallowed.
 *
 * The following headers are allowed for historical reasons:
 *
 * Accept-Charset, Accept-Encoding, Cookie, Cookie2, Date,
 * Referer, TE, User-Agent, headers beginning with Proxy-.
 *
 * The following headers are allowed in a limited form:
 *
 * Connection: close
 *
 * See http://www.w3.org/TR/XMLHttpRequest2.
 */
private static final boolean allowRestrictedHeaders;
private static final Set<String> restrictedHeaderSet;
private static final String[] restrictedHeaders = {
    /* Restricted by XMLHttpRequest2 */
    //"Accept-Charset",
    //"Accept-Encoding",
    "Access-Control-Request-Headers",
    "Access-Control-Request-Method",
    "Connection", /* close is allowed */
    "Content-Length",
    //"Cookie",
    //"Cookie2",
    "Content-Transfer-Encoding",
    //"Date",
    //"Expect",
    "Host",
    "Keep-Alive",
    "Origin",
    // "Referer",
    // "TE",
    "Trailer",
    "Transfer-Encoding",
    "Upgrade",
    //"User-Agent",
    "Via"
}; 
```

您有两种选择如何处理这种情况：

1.  使用默认 Jersey 客户端，您需要设置系统属性

    ```
    -Dsun.net.http.allowRestrictedHeaders=true 
    ```

    它禁止从请求中删除受限制的标头。

2.  使用似乎没有此限制的[ApacheHttpClient](http://java.net/projects/jersey/sources/svn/content/tags/jersey-1.15/jersey/contribs/jersey-apache-client/src/main/java/com/sun/jersey/client/apache/ApacheHttpClient.java?rev=5805) / [ApacheHttpClient4 。](http://java.net/projects/jersey/sources/svn/content/tags/jersey-1.15/jersey/contribs/jersey-apache-client4/src/main/java/com/sun/jersey/client/apache4/ApacheHttpClient4.java?rev=5805)只需将以下依赖项之一添加到您的项目中：

    ```
    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-apache-client</artifactId>
        <version>1.15</version>
    </dependency> 
    ```

    或者

    ```
    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-apache-client4</artifactId>
        <version>1.15</version>
    </dependency> 
    ```

    然后创建您的客户，例如：

    ```
    ApacheHttpClient.create(com.sun.jersey.api.client.config.ClientConfig); 
    ```

    或者

    ```
    ApacheHttpClient4.create(com.sun.jersey.api.client.config.ClientConfig); 
    ```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-26T12:30:43.520

或者只是在设置标题之前动态设置此属性（如果您不想将其设置为全局设置）：

```
System.setProperty("sun.net.http.allowRestrictedHeaders", "true"); 
```

# java - 包括来自 xml 的其他数据集

> ID：13255057
> 
> 赞同：2
> 
> 时间：2012-11-06T16:15:57.843
> 
> 标签：java, testing, junit, dbunit

DBUnit 建议使用[Small Datasets](http://www.dbunit.org/bestpractices.html#smalldatasets)，但我没有发现数据集中包含小数据集的示例。我需要类似于（伪代码）的东西

```
<dataset>
<!-- this tag is what I am looking for... ;-)-->
     <include_other_datasets_which_is_shared_between_different_datasets datasetname="other.xml"/>
<!-- normal xmldataset-definition begins... -->
<table name="foo">...</table>
</dataset> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:02:23.357

据我所知，dbUnit 中不存在这样的功能，而且您也不需要它。

因为您可以简单地为不同的数据集多次执行操作。

```
DatabaseOperation.CLEAN_INSERT.execute(conn, "first_table.xml");
DatabaseOperation.CLEAN_INSERT.execute(conn, "second_table.xml"); 
```

或在运行时使用[CompositeDataSet](http://www.dbunit.org/apidocs/org/dbunit/dataset/CompositeDataSet.html)将多个数据集合并为一个。

# android - 空闲几秒钟后隐藏虚拟键盘，Android

> ID：13255059
> 
> 赞同：1
> 
> 时间：2012-11-06T16:15:59.183
> 
> 标签：android, android-widget

**在android设备中空闲几秒钟后是否可以自动隐藏虚拟键盘？如何？**

我目前正在开发一个应用程序，它可以让用户搜索，结果将显示在 EditText 的底部。这里的问题是虚拟键盘几乎占据了屏幕的一半，要隐藏它我必须按“返回”。我的目标是至少在不使用设备时使其在 10-15 秒后自动隐藏。

还没有在真实设备上尝试过，我只使用模拟器 2.2 版。

# c++ - QLineEdit 聚焦时无法设置快捷方式

> ID：13255061
> 
> 赞同：3
> 
> 时间：2012-11-06T16:16:05.167
> 
> 标签：c++, qt, user-interface, qlineedit

我正在实施一个基于文本的待办事项程序。我有一个`CommandInput`继承自`QLineEdit`. 基本上有一些命令，以关键字“add”、“delete”、“edit”等开头。

我想实现一些快捷方式。

1.  `Ctrl+A`这样当小部件有焦点时，我可以将`setText("add \"\"")`光标放在倒数第二个位置，所以它看起来是`add "|"`
2.  `Tab`这样当小部件有焦点时，当用户输入第一个关键字时，例如，`add`然后我可以完成命令`add "|"`

关键问题是当小部件有焦点时，快捷方式不起作用。我尝试了以下方法：

1/ 覆盖`keyPressEvent`。`Tab`密钥无法按预期工作。即使它有效，我也不知道如何为 keySequence （如`Ctrl+A`.

```
void CommandInput::keyPressEvent(QKeyEvent *keyEvent)

{
    switch(keyEvent->key())
    {
    case Qt::Key_Tab;
        emit add_activated();
    default:
        QLineEdit::keyPressEvent(keyEvent);
    }
} 
```

2/ 初始化时创建快捷方式。这也不起作用。

```
CommandInput::CommandInput(QWidget *parent)
    : QLineEdit(parent)
{
    tab_shortcut = new QShortcut(QKeySequence("Tab"),this);
    add_shortcut = new QShortcut(QKeySequence("Ctrl+A"),this);

    connect(tab_shortcut, SIGNAL(activated()),
            this, SIGNAL(tab_activated()));
    connect(add_shortcut, SIGNAL(activated()),
            this, SIGNAL(add_activated()));
} 
```

希望你能在这个问题上帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:09:44.700

覆盖`keyPressEvent`可能是这里的首选方法。我猜想“Tab”不能按预期工作的原因是因为你`break`在 emitting 之后没有声明`add_activated()`。对于“Ctrl+A”，您必须查看`modifiers()`关键事件。因此，您`keyPressEvent`将看起来像这样：

```
void CommandInput::keyPressEvent(QKeyEvent* keyEvent)
{
   if (keyEvent->key() == Qt::Key_Tab)
   {
      emit add_activated();
   }
   else if (keyEvent->key() == Qt::Key_A && 
            keyEvent->modifiers() == Qt::ControlModifier)
   {
      // Code for Ctrl+A goes here.
   }
   else
   {
      QLineEdit::keyPressEvent(keyEvent);
   }
} 
```

这似乎适用于我的（Linux）机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-23T06:08:43.333

为了让 Tab 键正常工作，我必须在 event() 中捕获 keyPressEvent，如下所示：

```
bool MyQTextBox::event(QEvent* event) {
    if (event->type() == QEvent::KeyPress) { // this did the trick for me
        this->keyPressEvent(dynamic_cast<QKeyEvent*>(event));
        return true;
    }
    return QWidget::event(event);
} 
```

# opengl - OpenGL中的平滑移动方向转换

> ID：13255080
> 
> 赞同：0
> 
> 时间：2012-11-06T16:17:24.527
> 
> 标签：opengl, animation, for-loop, rotation

我有一个带有小字符的 OpenGL 程序，可以用箭头键在屏幕上移动。当一个人改变方向时，角色也会相应地改变它的方向，基本上是这样的：

```
 //Pressing the up arrow to go in the up direction 

 if(prevSwimDirection == RIGHT)
         swimAngle = 90;
 ...
 glutPostRedisplay(); 
```

游泳方向在代码其他地方的显示功能中得到处理：

```
 if(changesMode == SWIM_AROUND)
     glRotatef((GLfloat)swimAngle, 0.0, 0.0, 1.0); 
```

当然，这会导致即时的、突然的方向变化。我试图像这样平滑它们，但没有运气：

```
 if(prevSwimDirection == RIGHT)
     for(double i = swimAngle; i < 90; i += 0.00001){
       swimAngle = i;
       glutPostRedisplay();
     } 
```

我尝试用各种值增加 i 并最终意识到计算似乎是在重新显示之前执行的，即使我在整个循环中都调用了 glutPostRedisplay() 。换句话说，它仍然会突然改变方向，但有轻微的初始延迟。

有没有办法让它正常工作（或者，更好的是，有效地）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:45:08.740

glutPostRedisplay 不会导致立即重绘，而只是设置一个标志，即下次事件循环迭代时将调用显示函数。

作为一般规则，您永远不应该从输入事件处理程序播放动画。相反，您应该设置动画参数，在您的情况下是新的目标方向，它应用于显示函数调用之间的动画代码。测量显示调用之间的时间并相应地推进动画。**永远不要** *通过循环播放动画！*

# drupal-7 - 带有干净 URL 的 Drupal7 上下文过滤器

> ID：13255084
> 
> 赞同：1
> 
> 时间：2012-11-06T16:17:48.543
> 
> 标签：drupal-7, views

我在使用干净 URL + 视图的网页中工作时遇到了一点问题

我有一个包含一些视图的网页。其中一个视图有四个参数。

Contextual_Filter > 提供默认值 > URL 中的原始值 > PathComponent > 3

然后我的过滤器可以使用类似这样的东西-> 551/550/73/2012-08-11

在我的网页中翻译此内容时，会出现类似这样的内容。www.mydomain.com/node/551/550/73/2012-08-11

例如这个Id对应一个内容。

www.mydomain.com/node/julio-iglesias/Barcelona/My_song/2012-08-11

但我不能翻译成正确的网址...

有人知道这样做的方法。

谢谢 ！！！

# workflow-foundation-4 - WF4 在我的自定义序列中禁用 WorkflowItemsPresenter 中的复制粘贴

> ID：13255088
> 
> 赞同：0
> 
> 时间：2012-11-06T16:17:52.130
> 
> 标签：workflow-foundation-4, workflow-activity, activitydesigner

我在我的自定义序列活动中使用 WorkflowItemsPresenter，我想在那里禁用活动的复制和粘贴。我找到了一些使用 ICompositeView 接口的解决方案，我试图将其应用于 WorkflowItemsPresenter 但它不起作用。有谁知道如何在 WorkflowItemsPresenter 中禁用复制粘贴行为？

谢谢你。

这是我的疯狂代码

BranchSequenceDesigner.xaml

```
<sap:ActivityDesigner x:Class="MyActivities.BranchSequenceDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
    >
    <Canvas Name="ContentCanvas" Width="600" Height="600"/>
    <sap:ActivityDesigner.Template>
        <ControlTemplate >
            <sap:WorkflowItemsPresenter Name="test" Items="{Binding Path=ModelItem.Children}">
                <sap:WorkflowItemsPresenter.SpacerTemplate>
                    <DataTemplate>
                        <Label HorizontalAlignment="Center" Content="Drop MyActivity Here !!!!!" FontStyle="Italic" Foreground="Red" />
                    </DataTemplate>
                </sap:WorkflowItemsPresenter.SpacerTemplate>
            </sap:WorkflowItemsPresenter>
        </ControlTemplate>
    </sap:ActivityDesigner.Template>

</sap:ActivityDesigner> 
```

BranchSequenceDesigner.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Activities.Presentation;
using System.Activities.Presentation.Model;
using System.Activities;
using System.Activities.Presentation.Services;

namespace MyActivities
{
    public partial class BranchSequenceDesigner : ICompositeView
    {
        public BranchSequenceDesigner()
        {
            InitializeComponent();
        }

        protected override void OnModelItemChanged(object newValue)
        {
            ModelItem canvasActivity = (ModelItem)newValue;
            Update(canvasActivity);
            canvasActivity.Properties["Children"].Collection.CollectionChanged +=
                new System.Collections.Specialized.NotifyCollectionChangedEventHandler
                   ((senders, args) => Update(this.ModelItem));
        }

        void Update(ModelItem canvasActivity)
        {

            this.ContentCanvas.Children.Clear();
            foreach (ModelItem modelItem in canvasActivity.Properties["Children"].Collection)
            {
                var view = Context.Services.GetService<ViewService>().GetView(modelItem);
                this.ContentCanvas.Children.Add((UIElement)view);
                DragDropHelper.SetCompositeView((WorkflowViewElement)view, this);
            }
        }

        protected override void OnPreviewDragEnter(DragEventArgs e)
        {
            if (DragDropHelper.AllowDrop(

                    e.Data,
                    this.Context,
                    typeof(Activity)))
            {
                e.Effects = (DragDropEffects.Move & e.AllowedEffects);
                e.Handled = true;
            }

            base.OnDragEnter(e);
        }

        protected override void OnPreviewDragOver(DragEventArgs e)
        {
            if (DragDropHelper.AllowDrop(

                    e.Data,
                    this.Context,
                    typeof(Activity)))
            {
                e.Effects = (DragDropEffects.Move & e.AllowedEffects);
                e.Handled = true;
            }

            base.OnDragOver(e);
        }

        protected override void OnPreviewDrop(DragEventArgs e)
        {
            ModelItem canvasActivity = this.ModelItem;
            object droppedItem = DragDropHelper.GetDroppedObject(this, e, this.Context);
            using (ModelEditingScope scope = canvasActivity.BeginEdit())
            {
                ModelItem droppedModelItem = canvasActivity.Properties["Children"].Collection.Add(droppedItem);
                scope.Complete();
            }
            e.Handled = true;
            DragDropHelper.SetDragDropCompletedEffects(e, DragDropEffects.Move);
            base.OnDrop(e);
        }

        bool ICompositeView.CanPasteItems(List<object> itemsToPaste)
        {
            return false;
        }

        System.Activities.Presentation.View.TypeResolvingOptions ICompositeView.DroppingTypeResolvingOptions
        {
            get { throw new NotImplementedException(); }
        }

        bool ICompositeView.IsDefaultContainer
        {
            get { throw new NotImplementedException(); }
        }

        void ICompositeView.OnItemMoved(System.Activities.Presentation.Model.ModelItem modelItem)
        {
            throw new NotImplementedException();
        }

        object ICompositeView.OnItemsCopied(List<System.Activities.Presentation.Model.ModelItem> itemsToCopy)
        {
            throw new NotImplementedException();
        }

        object ICompositeView.OnItemsCut(List<System.Activities.Presentation.Model.ModelItem> itemsToCut)
        {
            throw new NotImplementedException();
        }

        void ICompositeView.OnItemsDelete(List<System.Activities.Presentation.Model.ModelItem> itemsToDelete)
        {
        }

        void ICompositeView.OnItemsPasted(List<object> itemsToPaste, List<object> metadata, Point pastePoint, WorkflowViewElement pastePointReference)
        {
            throw new NotImplementedException();
        }
    }
} 
```

分支序列.cs

```
using System.Activities;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows.Markup;

namespace MyActivities
{
    [Designer(typeof(BranchSequenceDesigner))]
    [ContentProperty("Children")]
    public sealed class BranchSequence : NativeActivity
    {
        [DefaultValue(null)]
        private Collection<Activity> _children;
        public Collection<Activity> Children {
            get
            {
                return (_children = _children ?? new Collection<Activity>());
            }
        }

        protected override void Execute(NativeActivityContext context) {}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:56:47.683

我通过使用 DesignerView 中的 CommandBinding 解决了我的复制粘贴问题。这是一个有用的[链接](http://blogs.msdn.com/b/tilovell/archive/2010/10/22/customizing-commands-in-workflow-designer-for-custom-activities-in-vs.aspx)！

```
using System.Activities.Presentation.View;
using System.Windows;
using System.Windows.Input;

namespace MyActivities
{
    public partial class BranchSequenceDesigner
    {
        public BranchSequenceDesigner()
        {
            InitializeComponent();
            this.Loaded += new RoutedEventHandler(this.BaseWorkflowDesigner_Loaded);
        }

        private void BaseWorkflowDesigner_Loaded(object sender, RoutedEventArgs e)
        {

            foreach (CommandBinding cb in this.Designer.CommandBindings)
            {
                if (cb.Command.Equals(ApplicationCommands.Delete))
                {
                    cb.CanExecute += new CanExecuteRoutedEventHandler(this.OnDeleteCommandCanExecute);
                }
                else if (cb.Command == DesignerView.CopyCommand)
                {
                    cb.CanExecute += new CanExecuteRoutedEventHandler(this.OnCopyCommandCanExecute);
                }
                else if (cb.Command == DesignerView.PasteCommand)
                {
                    cb.CanExecute += new CanExecuteRoutedEventHandler(this.OnPasteCommandCanExecute);
                }
                else if (cb.Command == DesignerView.CutCommand)
                {
                    cb.CanExecute += new CanExecuteRoutedEventHandler(this.OnCutCommandCanExecute);
                }
            }
        }

        private void OnDeleteCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = false;
        }

        private void OnCutCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = false;
        }

        private void OnCopyCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = false;
        }

        private void OnPasteCommandCanExecute(object sender, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = false;
        }
    }
} 
```

# matlab - 在matlab中重组两条染色体

> ID：13255092
> 
> 赞同：0
> 
> 时间：2012-11-06T16:17:56.027
> 
> 标签：matlab, matrix, genetic-algorithm

我想重组（交叉）两条染色体（遗传算法）。这是我的伪代码，我的问题在哪里？

**popu**是 50 * 10 矩阵。（我的人口）
**popsize** =50
**选择**的是 1*50 矩阵（选择具有适应度评估器的最佳个体）

```
function pop = recombin( popu,selected )
    global popsize;
    pop=zeros(50,10);
    for i=1:popsize/2
        rc=randi([1,10]);
        for j=1:10
            if(j<=rc)
                pop(i,j)=popu(selected(i),j);
                pop(i+25,j)=popu(selected(i+25),j);
            else
                pop(i,j)=popu(selected(i+25),j);
                pop(i+25,j)=popu(selected(i),j);
            end
            %keyboard
        end
    end
end 
```

我的代码工作正常（语法上）。但我不确定这是在通用算法中组合 2 个染色体的正确方法:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:22:33.570

对您的问题的简短回答是：代码（几乎）正确，它执行单点交叉。

这段代码几乎是正确的，因为每个个体的第一个元素永远不会被交换：因为 rc 在 [1, 10] 中并且交换是 when`j`严格大于 rc，所以这意味着`pop(i, 1)`总是分配给`popu(selected(i), 1)`（而不是`popu(selected(i + 25), j)`）。

这可能是一个想要的特性，但看起来像是一个不想要的边框效果。可以通过使用此行来防止它：`rc = randi([0,10]);`.

所以考虑比尔的评论，代码看起来像这样：

```
function pop = recombin(popu, selected)
    [popsize, dimension] = size(popu);
    pop = zeros(popsize, dimension);
    halfpopsize = floor(popsize / 2)

    for i = 1:halfpopsize
        rc = randi([0, 10]);
        pop(i, :) = [popu(selected(i), 1:rc), popu(selected(i + halfpopsize), rc + 1:end)];
        pop(i + halfpopsize, :) = [popu(selected(i + halfpopsize), 1:rc), popu(selected(i), rc + 1:end)];
    end
end 
```

# crystal-reports - 如何将参数传递给水晶报表，其中 2 个实际上并未使用？

> ID：13255093
> 
> 赞同：0
> 
> 时间：2012-11-06T16:17:59.740
> 
> 标签：crystal-reports

我有一个自由格式的 SQL 查询，我想在报告中使用它。我想传递一个报告参数，但我还想传递另外 2 个参数，但实际上没有使用。添加它们的原因是因为报告生成器代码被其他遗留系统使用，并且这些报告需要这两个参数。

目前看来，如果参数在查询中未使用，它们将从参数列表中删除。因此，我想我可能会尝试将参数添加到选择中以确保它们被使用，但这会导致语法错误。

例如

```
select o.*, {?param2}, {?param3} from orders as o where o.orderid = {?OrderqId} 
```

请原谅我对水晶的了解有限。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:11:54.793

假设`param2`and`param3`是字符串，请尝试：

```
SELECT  O.*, '{?param2}' PARAM2, '{?param3}' PARAM3
FROM    ORDERS O
WHERE   O.ORDERID = {?OrderqId} 
```

# android - Android 项目的 Gradle assembleDebug 失败并出现 aapt 错误

> ID：13255098
> 
> 赞同：3
> 
> 时间：2012-11-06T16:18:07.290
> 
> 标签：android, gradle, aapt

我正在尝试为 Android 库项目建立 gradle 构建，但目前在 processDebugRes 期间构建失败并出现 aapt 错误：

```
:packageDebugAidl UP-TO-DATE
:packageDebugRes UP-TO-DATE
:prepareDebugDependencies UP-TO-DATE
:processDebugManifest UP-TO-DATE
:processDebugRes
ERROR: Unknown option '--output-text-symbols'
Android Asset Packaging Tool

Usage:
 aapt l[ist] [-v] [-a] file.{zip,jar,apk}
   List contents of Zip-compatible archive.

(...)

:processDebugRes FAILED

FAILURE: Build failed with an exception. 
```

build.gradle 非常简单，如下所示：

```
buildscript {

    repositories { mavenCentral() }
    dependencies { classpath 'com.android.tools.build:gradle:0.1' }
}

apply plugin: 'android-library'

dependencies {

    compile fileTree(dir: 'libs', include: '*.jar')
}

android {

    target = 'android-16'

    defaultConfig {

        versionCode = 16
        versionName = "1.0"
        minSdkVersion = 8
    }
} 
```

顺便说一句，aapt 版本是 0.2。

我是整个 Gradle 的新手，所以提前感谢您提供有关如何解决此问题的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:52:47.703

终于自己找到了问题——我用的是Android SDK平台工具的revision 14，不是rev​​ision 15的preview，根据[http://tools.android.com/tech-docs/new-build-系统/使用新构建系统](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system)。

# php - 检查是否有任何数组值设置 PHP

> ID：13255102
> 
> 赞同：4
> 
> 时间：2012-11-06T16:18:17.420
> 
> 标签：php, arrays, is-empty

检查数组是否设置了任何值的最佳/最简单方法是什么？我自己设置钥匙，无论如何我不能根据钥匙去。我的代码将显示我在做什么，以及想要做什么：

```
 $array = array(
                "Birthday" => $row3['birthday'],
                "Sex" => $row3['sex'],
                "Lives In" => $row3['livesIn']
            );
    if(empty($array))
    {
        foreach($array as $key => $value)
        {
            if($value)
            {       
                echo "<tr><td>".$key."</td><td>".$value."</td></tr>";   
            }
        }
    }
    else
    {
        echo "This user has not provided any information yet";  
    } 
```

因此，例如， if `$row3['birthday']`, `$row3['sex']`,`$row3['livesIn']`都是空的，那么它应该将第一个 if 语句呈现为 false，并移至 else 语句。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T16:20:25.677

我相信您正在寻找[`array_filter()`](http://php.net/array_filter)，它带有一个参数将删除所有等于`false`类型转换为布尔值时的数组值：

```
if( count( array_filter( $array)) == 0) {
    echo "Array contained 'empty' values\n";
} 
```

您可以[查看手册](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)以了解哪些值将变为 boolean `false`。

# android - 当应用程序在后台时，当通知到来时防止打开活动

> ID：13255103
> 
> 赞同：0
> 
> 时间：2012-11-06T16:18:15.950
> 
> 标签：android, android-notifications, android-alarms

我有一个应用程序来设置状态栏通知。我可以设置它们，当我单击状态栏通知时，它会打开应用程序。问题是如果我按下主页按钮，它应该将应用程序发送到后台，当通知到来时，应用程序会自动出现在前面。

```
 public void setNotification(String date, String alertText, String alertTitle, String sound,String notificationId,int repeatOption, long eventsJni) {
    alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent("sprat.notifier.run");

    intent.putExtra("alertText", alertText);
    intent.putExtra("alertTitle", alertTitle);
    intent.putExtra("sound", sound);
    int id = (int)Integer.valueOf(notificationId);
    intent.putExtra("notificationId", id);

    PendingIntent pendingIntent;
    long time = getDate(date).getTime();
    if(repeatOption == 1){
        pendingIntent = PendingIntent.getActivity(this.getApplicationContext(), id, intent, Intent.FLAG_ACTIVITY_NEW_TASK);
        alarm.set(AlarmManager.RTC_WAKEUP, time, pendingIntent);
    } 
```

}

当闹钟时间到来时，它会在另一个活动中设置通知。

```
public class Notifications extends Activity {
        private int date;
        private String alertText;
        private String alertTitle;
        private String sound;
        private int id;
        private int repeatOption;

        @Override
        protected void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            Intent intent = getIntent();
            if (intent == null){
                finish();
                return;
            }
            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            if(intent.getExtras().getString("notif_id") != null && intent.getExtras().getString("notif_type") != null) {
                mNotificationManager.cancel((int)Integer.valueOf(intent.getExtras().getString("notif_id")));
                Intent i = new Intent(this.getApplicationContext(), A.class);
                i.putExtra("notif_id", intent.getExtras().getString("notif_id"));
                i.putExtra("notif_type", intent.getExtras().getString("notif_type"));
                startActivity(i);
                finish();
                return;
            }

            set(intent);            

        }

        private void set(Intent intent){

            alertText = intent.getExtras().getString("alertText");
            alertTitle = intent.getExtras().getString("alertTitle");
            sound = intent.getExtras().getString("sound");
            id = intent.getExtras().getInt("notificationId");

            Vibrator v = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
            v.vibrate(100);

            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            int icon = R.drawable.icon;
            CharSequence tickerText = alertTitle;
            long when = System.currentTimeMillis();
            Notification notification = new Notification(icon, tickerText, when);

            Context context = getApplicationContext();
            CharSequence contentTitle = alertTitle;
            CharSequence contentText = alertText;
            Intent notificationIntent = new Intent(this, SpNotifications.class);
            notificationIntent.putExtra("notif_id", String.valueOf(id));
            notificationIntent.putExtra("notif_type", "Local");

            PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, PendingIntent.FLAG_ONE_SHOT);
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
            notification.defaults  |= Notification.DEFAULT_VIBRATE;
            notification.defaults  |= Notification.DEFAULT_SOUND;
            mNotificationManager.notify(id, notification);

            finish();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:48:10.247

我不确定这里发生了什么。如果您单击通知，应用程序应该会出现在前台。单击主页时，应出现主屏幕。该应用程序无法自动出现在最前面以获取通知。

检查文档中的新通知指南。特别是，它描述了如何处理从通知启动的应用程序的导航。

# facebook-graph-api - 获取安装特定 facebook 应用程序的朋友列表

> ID：13255104
> 
> 赞同：0
> 
> 时间：2012-11-06T16:18:20.390
> 
> 标签：facebook-graph-api, facebook-fql

我可以使用以下 URL 获取安装了 Skype 应用程序的朋友列表。

> ```
> https://www.facebook.com/browse/friends_using_app/?app_id=260273468396 
> ```

我想在 fql 或图形 api 中获取此列表，但找不到任何查询或与此相关的任何内容。任何人都知道如何实现这一目标。

感谢您阅读我的问题。

# objective-c - 有没有办法在访问特定属性时生成编译器警告？

> ID：13255106
> 
> 赞同：3
> 
> 时间：2012-11-06T16:18:21.887
> 
> 标签：objective-c, xcode, cocoa

例如，我想在每次`-[UIViewController navigationController]`访问该属性时生成一个警告。

出于好奇，原因是我正在使用自定义导航控制器，并且希望在我（或项目中的其他开发人员）尝试访问此属性时得到警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:43:11.953

唯一想到的是将 UIViewController 子类化，并且仅将您的自定义子类用作项目中其他视图控制器的基础。这样，您可以覆盖该方法并使用 #warning 让预处理器发出诊断信息。**（如下所述，#warning 实际上不起作用。相反，您需要在重写的方法中编写代码以生成您认为合适的任何诊断。）** 也许您的自定义导航控制器可以检查其内容控制器是否属于正确的基础班级。

绕过这是一个微不足道的演员，但如果重点是防止意外使用，它可能有一些价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:35:44.517

您可以创建一个自定义 getter 并将其声明为已弃用：

```
- (UINavigationController*)navigationController __attribute__ ((deprecated))
{
    // do something
} 
```

这样，只有当有人试图调用这个 getter 时，他才会收到警告。

# c# - 我可以在将 MVC 视图模型传递到 Partial 之前修改它吗

> ID：13255107
> 
> 赞同：0
> 
> 时间：2012-11-06T16:18:21.830
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, partial-views

如果我有一个模型传递到 Index.cshtml

我可以在 Index.cshtml 中的代码块内修改模型的属性，然后将修改后的模型传递给 Html.Partial("_MyView", Model)

```
@model.Name = "Joe"

@Html.Partial("_MyView", Model)

@model.Name = "Ann"

@Html.Partial("_MyView", Model) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:21:38.303

你当然可以; 你只需要使用`Model`属性，而不是`@model`指令。

```
@{ Model.Name = "Joe" }

@Html.Partial("_MyView", Model)

@{ Model.Name = "Ann" }

@Html.Partial("_MyView", Model) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T16:51:59.820

您可以修改模型中的属性值，以便在您的视图中但在渲染之前进一步使用。一是渲染值不能修改需要服务器端交互，你可以将值设置为

```
<% Model.Address="none" ;%>
<%: Model.Address %> 
```

# java - 为什么 hbm2ddl 不喜欢我在 GregorianCalendar 上的 @Temporal 注释？

> ID：13255108
> 
> 赞同：1
> 
> 时间：2012-11-06T16:18:24.673
> 
> 标签：java, hibernate, maven, hbm2ddl, hibernate3-maven-plugin

这是背景：我有一个带注释的`@Embeddable`Java 类，它有一个`GregorianCalendar`字段。我正在尝试使用 hibernate3:hbm2ddl 通过 hibernate3 Maven 插件生成模式，以便我可以持久保存嵌入它的另一个对象，但它遇到了关于使用`@Temporal`.

这是可嵌入类：

```
@Embeddable
public class OperationalStatus implements Serializable {
        .
        .
        .
    /**
     * Recorded date/time that the status value is valid
     */
    private GregorianCalendar time;

    /**
     * No-argument constructor.
     */
    public OperationalStatus() {}
        .
        .
        .
    /**
     * @return the time
     */
    @Temporal(TemporalType.TIMESTAMP) 
    public GregorianCalendar getTime() {
        return time;
    }

    /**
     * @param time the time to set
     */
    public void setTime(GregorianCalendar time) {
        this.time = time;
    }
} 
```

这是错误读数：

> [错误] 无法在项目 STRIPES_V2 上执行目标 org.codehaus.mojo:hibernate3-maven-plugin:2.2:hbm 2ddl (default-cli)：执行目标 org.code haus.mojo:hibernate3-maven-plugin 的 default-cli :2.2:hbm2ddl 失败：@Temporal 只能在 java.util.Date 或 java.util.Calendar 属性上设置：stripes.datamodel。util.OperationalStatus.time

以下是 pom 的一些摘录：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>hibernate3-maven-plugin</artifactId>
<version>2.2</version>
<configuration>
    <components>
        <component>
            <name>hbm2ddl</name>
            <implementation>annotationconfiguration</implementation>
        </component>
    </components>
    <componentProperties>
        <drop>false</drop>
        <configurationfile>src/main/resources/hibernate.cfg.xml</configurationfile>
        <outputfilename>schema.sql</outputfilename>
    </componentProperties>
</configuration>
<dependencies>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.2-1000.jdbc4</version>
    </dependency>
</dependencies>
</plugin>
.
.
.
<dependency>
    <groupId>org.hibernate</groupId>
    <version>4.1.7.Final</version>
    <artifactId>hibernate-core</artifactId>
</dependency> 
```

我错过了什么？GregorianCalendar 是 Calendar 的具体扩展，那么有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:41:39.593

规范中的任何内容都没有限制提供者能够出售您想要的任何特定的 Calendar 任意实现，因此如果他们允许您要求它提供特定的日历，这将是一个兼容性问题。（并不是说任何头脑正常的人都会创建一个新的 Calendar 子类，但这种可能性是存在的。一个只知道如何返回自己的自定义 Calendar 子类的 JPA 实现不会因为规范中的任何内容而真正出错，你不能要求它知道如何改用 GregorianCalendar。）

或者另一方面，如果我要创建 org.affe.MyAwesomeCalendar，期望 JPA 提供者能够为我创建实例是不合理的！

> 11.1.47 时间注释
> 
> 必须为 java.util.Date 和 java.util.Calendar 类型的持久字段或属性指定 Temporal 注释。只能为这些类型的字段或属性指定它。

Hibernate 也不会让您直接选择 java.sql.Date 等。基本上，他们将其解释为由持久性提供者决定使用什么日历实现。

# xaml - 自定义形状作为按钮 Windows 8

> ID：13255111
> 
> 赞同：2
> 
> 时间：2012-11-06T16:18:28.680
> 
> 标签：xaml, window

我正在尝试在 Windows 8 的应用程序中制作具有某些国家/地区形状的自定义按钮，我已将路径作为按钮内容。我遇到的问题是将鼠标悬停在按钮上，我在图像中有这个方形边缘（板），我想做链接中的第三张图像。任何人都知道如何做到这一点？我接受所有可能的想法，谢谢大家的关注。

[https://skydrive.live.com/redir?resid=FB358590F3727A63!183&authkey=!AHwzOa2dQPSj338](https://skydrive.live.com/redir?resid=FB358590F3727A63!183&authkey=!AHwzOa2dQPSj338)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T14:58:11.547

在设置按钮样式时，检查包装内容演示者的边框。尝试更改 PointOver Viewstate 上的边框颜色或粗细属性，或者如果您根本不需要它，您可以完全删除所有状态的边框粗细，如下所示，

```
<Style x:Key="ButtonStyle1" TargetType="Button">
        <Setter Property="Background" Value="{StaticResource ButtonBackgroundThemeBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource ButtonForegroundThemeBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonBorderThemeBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ButtonBorderThemeThickness}"/>
        <Setter Property="Padding" Value="12,4,12,4"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPointerOverBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPointerOverForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonPressedForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledBackgroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ButtonDisabledForegroundThemeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="Border" Background="{TemplateBinding Background}" Margin="3">
                            <ContentPresenter x:Name="ContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                        <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:51:27.503

尝试做

```
<Style x:Key="BasicRichTextStyle" TargetType="RichTextBlock">
    <Setter Property="Foreground" Value="{StaticResource ApplicationForegroundThemeBrush}"/>
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
    <Setter Property="TextTrimming" Value="WordEllipsis"/>
    <Setter Property="TextWrapping" Value="Wrap"/>
    <Setter Property="Typography.StylisticSet20" Value="True"/>
    <Setter Property="Typography.DiscretionaryLigatures" Value="True"/>
    <Setter Property="Typography.CaseSensitiveForms" Value="True"/>
</Style> 
```

你可以使用visualstatemanager来设置我认为的悬停属性的属性

# javascript - 在javascript中检索一年中的最后一天

> ID：13255114
> 
> 赞同：23
> 
> 时间：2012-11-06T16:18:31.720
> 
> 标签：javascript, datetime

今天是 2012 年 6 月 11 日。我需要使用 javascript 检索当年的最后一天。

```
function getLastDayOfYear(date)
{
    var x = document.getElementById("demo");

    var year = date.getFullYear();
    var month = date.getMonth();
    var day = 0; // ?????

    x.innerHTML = day + "-" + month + "-" + year;
} 
```

是否有任何功能可以检索它，或者我必须做一个完整的实现？如果我需要实现这一点，有人可以帮助我吗？

我做了一个简单的小提琴，你可以在这里查看：http: [//jsfiddle.net/EyzCD/](http://jsfiddle.net/EyzCD/)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-06T16:20:48.357

由于一年的最后一天总是 12 月 31 日，因此很容易：

```
new Date(new Date().getFullYear(), 11, 31) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T16:35:26.877

如果某天一年中的最后一天发生变化，使用临时日期和下个月的第一天然后返回上一个日期可能很有用

```
tmp_date = new Date(2012, 12, 1)
last_day = new Date(tmp_date - 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:25:31.443

```
alert(new Date(2012, 12, 0)); 
```

将返回

```
Mon Dec 31 00:00:00 CST 20102 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:26:41.113

这会为你做吗？这将返回整批供您选择。

```
function LastDayOfMonth(Year, Month) {
   return new Date( (new Date(Year, Month,1))-1 );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T16:28:36.203

我认为OP希望得到本月的最后一天。

尝试：

```
var tmp = new Date(year, month+1, 1);
var days = new Date(tmp-1).getDate(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T11:15:55.413

这将返回一年的最后一天

```
var actualDate = new Date()
var eoYear = new Date(actualDate.getFullYear(),12,0) 
```

如果您需要在今年的最后一秒返回

```
var actualDate = new Date()
var eoYear = new Date(actualDate.getFullYear(),12,0,23,59,59) 
```

# iphone - 停止 MKMap 在加载时放大

> ID：13255117
> 
> 赞同：0
> 
> 时间：2012-11-06T16:18:38.213
> 
> 标签：iphone, objective-c, ios, xcode

这可能是一个简单的问题，但我无法在文档中或通过搜索找到答案。

当我的地图加载时，它会从远处放大到我设定的区域。我该如何阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:01:00.247

调用时设置`animated`为。如下：`NO``setRegion:animated:`

```
[map setRegion:region animated:NO]; 
```

# ruby - 使用 AWS ruby sdk 时出现错误“请求中包含的安全令牌无效”

> ID：13255118
> 
> 赞同：3
> 
> 时间：2012-11-06T16:18:47.477
> 
> 标签：ruby, amazon-web-services, amazon-route53

我在尝试使用 AWS Ruby SDK 从 Route53 获取托管区域列表时收到此错误**“请求中包含的安全令牌无效” ，即使我从具有“完全权限”IAM 角色的实例运行我的脚本。**这是完整的跟踪：

```
/usr/lib/ruby/gems/1.8/gems/aws-sdk-1.6.9/lib/aws/core/client.rb:318:in `return_or_raise': The security token included in the request is invalid (AWS::Route53::Errors::InvalidClientTokenId)
  from /usr/lib/ruby/gems/1.8/gems/aws-sdk-1.6.9/lib/aws/core/client.rb:419:in `client_request'
  from (eval):3:in `list_hosted_zones'
  from test.rb:7 
```

和 test.rb 文件：

```
require 'rubygems'
require 'aws-sdk'

AWS.config()

r53 = AWS::Route53.new
resp = r53.client.list_hosted_zones
resp[:hosted_zones].each do |zone|
  puts zone
end 
```

似乎该问题与 Route53 sdk 方法有关，因为我已经使用另一个代码进行了测试，以使用相同的 SDK 管理 EC2 和 Elastic Load Balancer，它工作得很好。

你怎么看 ？我错过了什么吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:00:39.073

签名版本 3 https 签名者中存在一个错误，该错误从请求中省略了会话令牌。今天发布了一个新版本 (1.7.1)，解决了这个问题。

# c++ - OpenCV 实现 Adob e Photoshops 亮度/对比度功能

> ID：13255121
> 
> 赞同：0
> 
> 时间：2012-11-06T16:18:59.827
> 
> 标签：c++, opencv

我想在 Adob​​e Photoshop 中实现亮度/对比度功能。有谁知道如何做到这一点？（一个公式或其他东西会很好;））

# vb.net - 不需要的 URL 异常错误（可能是广告软件）

> ID：13255122
> 
> 赞同：0
> 
> 时间：2012-11-06T16:19:01.810
> 
> 标签：vb.net, url, jscript

我正在尝试通过 vb.net 创建一个简单的多边形，当我尝试将其发布到输出流时出现错误。即使我创建了一个新程序，这种情况也会发生。我做了很多在线搜索，但找不到解决方案。有些人谈论插件。我检查了我的 IE，插件窗口上没有显示任何内容。我现在迷路了。我真的不明白该怎么办。任何帮助表示赞赏。

非常感谢。

以下是我收到的错误消息：

> *Microsoft JScript 运行时错误：抛出异常但未捕获*

它打开了以下内容：

```
m = url.match(/^https?:\/\/([^\/]+\.)?([a-z0-9\-_]+?)\.(co|org|net|com|gov|name|arpa|mil|edu|biz|mobi|aero|asia|cat|coop|info|int|jobs|museum|pro|tel|travel|xxx|[a-z][a-z]|(co|edu|gov|net|org|com)\.[a-z][a-z])(\/|$)/i);
    if (m === null) {
        if(url.indexOf('dnserror') != -1 || url.indexOf('ieframe.dll') != -1)
        {   
            var loc_sp = url.split("#");
            if(loc_sp[1] && loc_sp[1] != '')
                window.location = "http://404bucks.com/landing/?uid="+affiliate+subid+"&domainname="+loc_sp[1];
        }
        else
            throw 'Not a valid URL: ' + url;
    }
    if(m[2] == "co" && url.indexOf('bbc') != -1)
        return "bbc";
    else if(m[2] == "yahoo" && url.indexOf('omg') != -1)
        return "omg";

    return m[2];
} 
```

“throw not a valid url”部分被突出显示。我也不知道 404buckx 网站是什么或来自哪里。

以下是我在*`simple.aspx`*文件中使用的代码：

```
 Dim bmp As Bitmap
    bmp = New Bitmap(200, 300)
    Dim gr As Graphics
    gr = Graphics.FromImage(bmp)
    gr.Clear(Color.Transparent)

    Dim pts() As Point = { _
        New Point(10, 10), New Point(100, 50), _
        New Point(190, 10), New Point(190, 250), _
        New Point(100, 298), New Point(10, 250)}

    Dim brred As Brush
    brred = Brushes.Red

    gr.DrawPolygon(Pens.Red, pts)
    gr.FillPolygon(brred, pts)

    bmp.Save(Response.OutputStream, ImageFormat.Jpeg) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:49:12.397

好的，所以错误终于消失了。我在我的电脑上运行了 spybot 和恶意软件字节。删除了他们要求我做的任何事情。猜猜这行得通。虽然我仍然无法在我的计算机上安装防病毒软件，但它还是蓝屏。不管它是什么，它仍然存在。如果你想这么说，那就换个方向。我想我会重新安装windows。现在虽然我可以编码:)

# java - 使用鼠标移动和调整外壳大小（自定义标题栏）

> ID：13255127
> 
> 赞同：1
> 
> 时间：2012-11-06T16:19:22.873
> 
> 标签：java, titlebar

我想创建自定义标题栏，所以我必须编写允许用户调整大小和移动外壳的代码（我正在使用 SWT），但我遇到了问题

a) 捕获鼠标

b) 调整大小

```
 shell.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseDown(final MouseEvent arg0) {
            move=true;
            oldx=arg0.x;
            oldy=arg0.y;
            Display.getDefault().syncExec(new Runnable() {
                @Override
                public void run() {
                    while (move) {
                            shell.setLocation(MouseInfo.getPointerInfo().getLocation().x-oldx, MouseInfo.getPointerInfo().getLocation().y-oldy);
                    }
                }

            });
        }
        @Override
        public void mouseUp(MouseEvent arg0) {
            move=false;
        }
    }); 
```

移动外壳正在工作*，但*它不捕获鼠标向上事件。我也不知道如何调整大小。我试过了

```
shell.setSize(MouseInfo.getPointerInfo().getLocation().x-shell.getBounds().x, MouseInfo.getPointerInfo().getLocation().y-shell.getBounds().y); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:42:34.530

我认为您的问题是移动外壳的 while 循环在 UI 线程中同步运行。这将锁定 UI 并阻止任何其他事件（包括鼠标向上）注册。

尝试将您的移动线程作为单独的后台线程运行，以允许`mouseDown`调用返回并且仅将调用包装`shell.setLocation`在`Display.getDefault().syncExec`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:48:10.893

您的问题是您期望事件 #2 (mouseDown) 在事件 #1 (mouseUp) 完成触发之前触发。SWT 一次处理一个事件。您需要启动 #2 以完成 #1 中的操作，这永远不会发生，因为 #2 不会运行。这是一个僵局的情况。您需要在鼠标移动时移动窗口，而不是基于 mouseDown 事件。看看这个[例子](http://www.java2s.com/Tutorial/Java/0280__SWT/Compositeinterceptmouseeventsdragabuttonwiththemouse.htm)。

# css - 在帖子中强制图像大小

> ID：13255128
> 
> 赞同：1
> 
> 时间：2012-11-06T16:19:23.260
> 
> 标签：css, wordpress

我正在使用一个提要聚合网站。有时我会收到这样的帖子：http: [//food101.co.il/%D7%90%D7%95%D7%98%D7%95%D7%9C%D7%A0%D7%92%D7%99 -%D7%A2%D7%95%D7%9C%D7%94-%D7%9C%D7%99%D7%A8%D7%95%D7%A9%D7%9C%D7%99%D7%9D /](http://food101.co.il/%D7%90%D7%95%D7%98%D7%95%D7%9C%D7%A0%D7%92%D7%99-%D7%A2%D7%95%D7%9C%D7%94-%D7%9C%D7%99%D7%A8%D7%95%D7%A9%D7%9C%D7%99%D7%9D/)

图片大于帖子文本框的地方。这是一个屏幕截图： ![在此处输入图像描述](../Images/fe45659db0f943e2865e7e441c3f7794.png)

有没有办法确保在网站的 css 中这个太大而无法适应的图像将以某种方式重新调整大小？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:22:17.893

您只需要编辑您的 css 样式并修复一个度量值（在这种情况下，宽度会更好），因此您的图像将被缩放以适合该值

```
img {
    width: <value_here>
} 
```

如果你不指定你的高度，图像将被调整大小并相应地保持比例。您还可以指定最大宽度，这样小图像就不会降低质量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:42:37.310

我绝对不会使用`max-width`，尤其是不会`width`直接在`img`选择器上使用。然后，您会影响您网站上的每个图像。

使用更具体的东西，比如`.entry-content img { max-width: 500px; }`

这将针对发布在帖子或文章中的任何图像。

# validation - Drools 规则引擎或任何其他适合此要求的规则引擎

> ID：13255131
> 
> 赞同：2
> 
> 时间：2012-11-06T16:19:27.633
> 
> 标签：validation, drools, rule-engine

我正在从事这个项目，我的角色是开发一项使用标准健康保险 xml 的服务。服务必须对不同的 xml 字段进行验证，这涉及将 xml 数据与数据库表中的数据进行比较。目前，我们假设所有保险公司的验证保持不变。但我怀疑它会保持不变，并且每个公司可能有不同的验证要求。在这种情况下，使用 Drools 规则引擎并为每个公司开发 drl 文件并使用规则引擎进行 xml 验证是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:44:02.623

尝试解决此问题的一种可能方法是首先将每个公司特定文件解析为通用格式（中间表示），一个 xml 文件，它可以是您自己的标准来表达您之前解析的文件的数据。

然后为特定的中间格式编写验证引擎文件。

如果您这样做，那么您可以使用一个文件来定义所有验证规则，而不是为所有不同的公司拥有单独的文件。

# javascript - 引用类型和 GetValue()

> ID：13255133
> 
> 赞同：3
> 
> 时间：2012-11-06T16:19:35.403
> 
> 标签：javascript

为什么如果我们运行以下 javascript 代码：

```
 var foo = {
           bar: function () {
               alert('s');
           }
       }

      //1\. foo.bar();
      //2\. var a = foo.bar;
      //3\. var b = (foo.bar);          
       (foo.bar)(); 
```

我们将收到一条错误消息“foo is undefined”，但如果我们取消注释 1\. 或 2\. 或 3\. 行，我们将收到警报“s”？我知道这是关于引用类型和 GetValue()，但我不太明白这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T16:21:20.597

这是因为 . 之前没有分号`(foo.bar)`。

这导致`(...)`被解释为函数调用运算符，因此它试图调用前面的表达式，就好像它是一个函数一样。

```
 var foo = {
       bar: function () {
           alert('s');
       }
   }(foo.bar) // <-- It sees it like this 
```

如果你用 a 终止前一个`;`，它会起作用。

```
 var foo = {
       bar: function () {
           alert('s');
       }
   }; // <--- right here

  //1\. foo.bar();
  //2\. var a = foo.bar;
  //3\. var b = (foo.bar);          
   (foo.bar)(); 
```

因此，当其他行未注释时它起作用的原因是它们被终止了。

如果你想排除分号*（我就是这样做的）*，如果你遵循这些规则，你通常是安全的：

*   永远不要以 a 开始新行，`(`除非`;`它之前有 a
*   永远不要以 a 开始新行，`[`除非`;`它之前有 a

每当我用其中一个字符开始一行时，我都会`;` *在*它前面放一个，这样我就知道前面的语句已经终止了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:21:16.257

您需要`;`在定义`foo`.

您的代码被解析为`var foo = { ... }(foo.bar)`.

这被解释为定义一个对象，将它作为一个函数调用（如果它到达那一点，它会给出不同的错误），然后将该函数的返回值作为另一个函数调用。

您得到的错误是`foo`它的定义中不存在。

# seo - 网址中的类别名称或编号？

> ID：13255134
> 
> 赞同：5
> 
> 时间：2012-11-06T16:19:37.563
> 
> 标签：seo

从 SEO 的角度来看，哪个 url 会更好，或者我是否强调它太多，这并不重要。

1.  www.site.com/forum/category-name/question-title
2.  www.site.com/forum/category-number/question-title

唯一的区别是第一个 url 有完整的类别名称，第二个 url 使用类别编号。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:36:37.230

绝对要使用类别名称！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T09:27:41.853

绝对是类别名称，因为您在 URL 中输入的所有内容都是 google 可以使用的。

f.ex：site.com/forum/webdevelopment/ 比 site.com/forum/3/ 更有意义

谷歌会理解第一个 URL，让你更容易在“网络开发”上得分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:39:13.857

我会选择类别名称而不是类别编号，因为它不容易记住或关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T16:21:45.860

想想访问者会搜索什么。可能不是数字。所以我会选择类别名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-24T12:24:29.527

我会推荐你​​使用第一个。使用类别名称代替 Google 的编号以及使用也是一种很好的做法。它可以提高您的索引和排名。

# ms-access - Northwind 操作查询错误消息“select into 语句中不允许多值字段”

> ID：13255135
> 
> 赞同：0
> 
> 时间：2012-11-06T16:19:43.663
> 
> 标签：ms-access, northwind

我下载了一个 Northwind 模板，但无法在应用程序的表上运行任何类型的操作查询。我收到错误消息，例如：

1.  “select into 语句中不允许使用多值字段”。

2.  “当源表或目标表包含多值字段时，不能在插入查询中使用 Select*”

有没有办法在不使用 VBA 的情况下对该应用程序的表运行操作查询？

非常感谢你，纳撒尼尔

```
SELECT Orders.*, * INTO d
FROM Orders;

INSERT INTO [Copy Of Products] ( [Product Code], [Product Name], [List Price], [Supplier IDs], Discontinued, Category, Attachments )
SELECT Sheet4.ID, Sheet4.DESCRIPTION, "1" AS Expr1, "11" AS Expr2, "False" AS Expr3, Sheet4.COMMODITY_CODE, "0" AS Expr4, *
FROM Sheet4; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:20:08.070

从标准设计的角度来看，产品表存在三个问题。

1.  它与供应商表相关联（在属性表和供应商 ID 字段中）。
2.  类别是一个多值字段。
3.  附件是附件类型。

只要不包含这些字段，您就应该能够运行更新查询。在您的示例中，您有 [供应商 ID]。在标准设计中，您将有一个用于产品/供应商的连接表。

# jodconverter - JODConverter & Open Office - 其他导出选项

> ID：13255138
> 
> 赞同：2
> 
> 时间：2012-11-06T16:19:55.933
> 
> 标签：jodconverter

我想知道是否有人知道在使用 JODConvertor 3 & Open Office 从 Word 文档转换为 PDF 时如何添加额外的导出选项。

我们想要实现的是在转换发生后阻止用户点击复选框。

我发现以下文档包含我需要的内容，但我目前正在从命令行使用转换库。

[http://www.artofsolving.com/node/18](http://www.artofsolving.com/node/18)

看来我需要将“更改”选项添加到“0”。这是在“document-formats.js”文件中完成的吗？

如果非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T13:17:05.553

我通过下载 jodconverter 的源代码并编辑 DefaultDocumentFormatRegistry 类解决了这个问题。在此之后，我将其编译为 JAR 并将其添加到我的 web 服务项目中。

# ajax - 复合组件中的 Primefaces dataTable 和 rowUnselect 事件

> ID：13255142
> 
> 赞同：3
> 
> 时间：2012-11-06T16:20:03.420
> 
> 标签：ajax, jsf, primefaces

## 实施和目的：

我实现了一个复合组件，其中包含一个 primefaces p:dataTable。我还为 rowSelect 和 rowUnselect 事件在表中添加了 p:ajax 侦听器，这些事件的侦听器可以由使用复合组件的实际页面定义。

## 错误情况：

对于 rowSelect 事件及其侦听器，此定义可以正常工作。在未选择行的情况下，调用unselect监听器，但是会抛出异常，表明组合组件在使用页面中无法通过组合组件中实际使用的EL表达式（请参阅日志）解析为动态查找传递的侦听器。这对我来说听起来完全正确，这是行不通的。异常的日志条目被声明为警告，但由于未执行更新定义，因此 jsf 处理周期中断。

## 问题：

我是否在我的定义中遗漏了一些东西，或者 primefaces p:ajax 实现做了一些不打算做的事情？为什么我在 primefaces unselectRow 事件中遇到这种行为，但在 selectRow 事件中却没有？

我的复合组件是：

```
<composite:interface>
    <composite:attribute name="selectListener" method-signature="void f()" />
    <composite:attribute name="selectUpdate" />
    <composite:attribute name="unselectListener" method-signature="void f()" />
    <composite:attribute name="unselectUpdate" />
  </composite:interface>

  <composite:implementation>
    <p:dataTable id="abnormalityTable" var="abnormality" value="#{abnormalityTableView.model}" lazy="true"
      paginator="true" rows="10" rowsPerPageTemplate="5,10,15" selection="#{abnormalityTableView.selectedRow}"
      selectionMode="single"
      paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

      <c:if test="#{!empty cc.getValueExpression('selectListener')}">
        <p:ajax event="rowSelect" listener="#{cc.attrs.selectListener}" update="#{cc.attrs.selectUpdate}" />
      </c:if>
      <c:if test="#{!empty cc.getValueExpression('unselectListener')}">
        <p:ajax event="rowUnselect" listener="#{cc.attrs.unselectListener}" update="#{cc.attrs.unselectUpdate}" />
      </c:if>

      <p:column headerText="#{docText['abnormality.name']}" filterBy="#{name}">
        <h:outputText value="some dummy output" />
      </p:column>
    </p:dataTable>
  </composite:implementation> 
```

日志中的堆栈跟踪是：

```
16:59:40,868 WARNUNG [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http-localhost-127.0.0.1-8443-2) Unable to resolve composite component from using page using EL expression '#{cc.attrs.unselectListener}': javax.faces.FacesException: Unable to resolve composite component from using page using EL expression '#{cc.attrs.unselectListener}'
    at com.sun.faces.facelets.tag.TagAttributeImpl$AttributeLookupMethodExpression.invoke(TagAttributeImpl.java:444) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.primefaces.component.behavior.ajax.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxBehaviorListenerImpl.java:44) [primefaces-3.5-SNAPSHOT.jar:]
    at org.primefaces.event.UnselectEvent.processListener(UnselectEvent.java:40) [primefaces-3.5-SNAPSHOT.jar:]
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIData.broadcast(UIData.java:1071) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIData.broadcast(UIData.java:1093) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIData.broadcast(UIData.java:1093) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:126) [prettyfaces-core-3.3.2.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:112) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488) [jbossweb-7.0.13.Final.jar:]
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118) [prettyfaces-core-3.3.2.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90) [shiro-core-1.2.0.jar:1.2.0]
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83) [shiro-core-1.2.0.jar:1.2.0]
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:380) [shiro-core-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125) [shiro-web-1.2.0.jar:1.2.0]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26] 
```

# android - 让 Android 设备成为音乐服务器

> ID：13255145
> 
> 赞同：0
> 
> 时间：2012-11-06T16:20:10.783
> 
> 标签：android, streaming, rtp, http-live-streaming, audio

所以我正在做的项目是让 Android 设备成为音乐服务器。我在从哪里开始时遇到了一些麻烦，特别是如果这是可能的。

我想要 HTTP Live Streaming，但还没有看到可以让我在 Android 上按照我需要的方式分解文件的工具。第二种选择是使用 RTP。

任何例子都会很棒！我一直在研究 AudioStream Android 原生类，但我对这个领域很陌生，而且我在入门时遇到了麻烦。我相信我已经在我的本地 IP 地址上打开了一个流，但不知道从那里去哪里。

```
 audioStream = new AudioStream(InetAddress.getByAddress(myLocalIP); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:38:02.917

使用可以集成到应用程序中并用作服务的小型 Http Server 会更容易。检查这个[http://www.freeutils.net/source/jlhttp/](http://www.freeutils.net/source/jlhttp/)

# c# - 我可以在中继器内管理#Eval 上的变量吗？

> ID：13255146
> 
> 赞同：1
> 
> 时间：2012-11-06T16:20:11.330
> 
> 标签：c#, .net, eval, repeater

试过：

```
string immagine = (Eval("Immagine").ToString()); 
```

在 C# 中继器 .ascx 中，但似乎我不能？*System.InvalidOperationException：Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。*

**编辑**

我发现的唯一方法是写：

```
<%#(Eval("Immagine").ToString() != Eval("Immagine").ToString() ? "" : "")%> 
```

不知道为什么它不适用于 if/else 语句...

# python - 班级分配问题

> ID：13255148
> 
> 赞同：0
> 
> 时间：2012-11-06T16:20:18.083
> 
> 标签：python

当我尝试为反转计数算法实现一个简单的类时，为什么 PyDev 会给我这个错误：“类变量未定义”？这是我的代码：

```
from collections import deque

Class inversionCount:

    def __init__(self, n):
        self.n = n
    def inversionMergeSort(m, n):
        print m
        if len(m) <= 1:
            n = 0
            return (m, n)
        half = len(m)/2
        left = m[0:half]
        right = m[half:]
        left = mergeSort(left)
        right = mergeSort(right)
        return inversionSort(left, right)

    def inversionSort(left, right, n):
        leftQueue = deque(i for i in left)
        rightQueue = deque(j for j in right)
        orderedList = []
        while len(leftQueue) > 0 or len(rightQueue) > 0:
            if len(leftQueue) > 0 and len(rightQueue) > 0:
                if leftQueue[0] < rightQueue[0]:
                    orderedList.append(leftQueue[0])
                    leftQueue.popleft()
                else:
                    orderedList.append(rightQueue[0])
                    if len(leftQueue) > 1:
                        self.n += len(leftQueue)
                    rightQueue.popleft()
            elif len(leftQueue) > 0:
                orderedList.append(leftQueue[0])
                leftQueue.popleft()
            elif len(rightQueue) > 0:
                orderedList.append(rightQueue[0])
                rightQueue.popleft()
        return (orderedList, n) 
```

然而 PyDev 没有认识到 inversionCount 确实是一个类。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T16:20:51.580

`class`是小写：

```
class inversionCount: 
```

抛出错误是因为变量`Class`确实没有定义；python 区分大小写，与`Class`; 不同`class`。前者被视为变量名，而被视为`class`关键字。

如果你用解释器运行你的代码，它会抛出一个语法错误；PyDev 的解释略有不同。

# typescript - 何时在 TypeScript 中使用类与模块？

> ID：13255158
> 
> 赞同：18
> 
> 时间：2012-11-06T16:21:01.670
> 
> 标签：typescript

我正在将大型代码库迁移到 Typescript，但想很好地掌握我应该在何时何地使用某些东西。

现在我在模块中有一些大的命名空间：

```
(function (nameSpace) {

    var privateVariables = '';

    function privateFunctions () { }        

    // Public methods
    nameSpace.someMethodHere = function () { };

}(window.nameSpace = window.nameSpace || {})); 
```

我的问题是**TypeScript**，我只是把这些变成类有什么区别/好处吗？还是应该只是一个包含类（每个方法）的大模块？

```
module nameSpace {

    export class someMethodHere {
       // etc
    }

    // more classes (my methods) here ??
} 
```

**-或者-**

```
class nameSpace {

    someMethodHere () {
        // code
    }
    // more prototyped methods here
} 
```

或者我应该以我目前拥有的相同模块方式设置它们？我正在尝试，但它一直给我错误，不知道`nameSpace.someMethodHere`在没有类的模块中我是如何做的！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-10-07T05:10:48.010

*   考虑使用模块作为[单例](https://stackoverflow.com/questions/30174078/how-to-define-singleton-in-typescript)（一个随处可访问的静态对象）的一个很好的选择，其中常见的用法是库。
*   当您需要创建此类的多个实例或计划扩展此类时，请考虑使用一个类。

基本上，模块很适合将所有代码打包到一个方便的全局对象中，而类可以智能地构建代码和数据表示。

[编辑] [“内部模块”已重命名为“命名空间”](https://www.typescriptlang.org/docs/handbook/namespaces.html)，而且现在不鼓励在可以导入模块时使用命名空间。命名空间可以是部分的（即在许多文件中描述），虽然这有时很有用，但这种方法过于全局而无法被编译器正确优化。[在这里阅读更多](https://michelenasti.com/2019/01/23/is-typescript-namespace-feature-deprecated.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T17:09:58.203

这取决于。一个模块应该是一组离散的“事物”，而不仅仅是杂乱无章的不同类的集合，所以如果事物看起来像是属于一起的，请使用模块将它们分组。

我相信 TypeScript 团队在发布指南之前正在等待看看人们如何使用该语言，但我想人们会在他们当前发布脚本的地方发布一个模块 - 所以 jQuery 将是一个模块，每个 jQuery 插件都是一个模块，一个测试框架将是一个模块，而 AOP 框架将是一个模块 - 例如。

# jquery - ASP.net 标签在后面的代码中获取价值

> ID：13255159
> 
> 赞同：1
> 
> 时间：2012-11-06T16:21:02.523
> 
> 标签：jquery, asp.net, code-behind

嘿，我正在尝试从代码中的标签中获取值：

```
<div id="chkHaz" data-checked="no">
   <asp:Label ID="lblchkHaz" runat="server" Text="no" ClientIDMode="Static" Style="visibility: hidden; display: none;"></asp:Label>
   <asp:Image ID="check_chkHaz" runat="server" ImageUrl="~/images/chkOFF.png" ClientIDMode="Static" />
</div> 
```

我根据用户是否通过 JQuery “检查”了它来设置它：

```
$("#chkHaz").click(function (input) {
   if ($(this).attr("data-checked") == "no") {
      $('#check_' + $(this).attr('id')).attr("src", "/images/chkON.png");
      $(this).attr("data-checked", "yes");
      $('#lbl' + $(this).attr('id')).attr("text", "yes");
      $('#lbl' + $(this).attr('id')).html("yes");
   } else {
      $('#check_' + $(this).attr('id')).attr("src", "/images/chkOFF.png");
      $(this).attr("data-checked", "no");
      $('#lbl' + $(this).attr('id')).attr("text", "no");
      $('#lbl' + $(this).attr('id')).html("no");
   }
}); 
```

但是，当我通过后面的代码检查它时：

```
Dim strChkHaz As String = lblchkHaz.text & "" 
```

即使我**知道它将****“no”的****HTML 值**更改为**“yes”**并且将**“text”**从**“no”**更改为**“** yes”，它始终是**“no ”**

 ******![在此处输入图像描述](../Images/daf4961f0963d19d2e7e76313e3318cb.png)

更改为...

![在此处输入图像描述](../Images/44101545708d2f406629d4da6f512169.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:22:23.833

标签值不会回发，您必须使用隐藏字段。您可以使用标签在客户端浏览器上显示值，但要在回发时发送值，您需要使用隐藏字段。

您可以使用 input、type="hidden" 或 asp:hidden 字段来检索标签的值。

**在 html 中**

```
<input type="hidden" runat=server ID="hdnForLabel" /> 
```

**在jQuery中**

```
$('<%= hdnForLabel %>').value = "some value"; 
```

**在后面的代码中**

```
string strLabelVal = hdnForLabel.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:25:11.873

1）在 .aspx 文件中添加

```
<asp:HiddenField runat=server ID="..." /> 
```

2）在JS中找到隐藏字段并在更改标签时同时更新它。

3) 现在在代码隐藏中读取隐藏字段中的 .Value 属性，而不是查看标签文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:26:03.627

看起来您的选择器首先是错误的。当`runat="server"`应用于 ASP.NET 控件时，id 会与 container 一起添加。所以你的 id 看起来与 HTML 中的不一样。所以在这种情况下，你需要使用属性以开头或属性有选择器

```
$('#check_' + $(this).attr('id')) 
```

必须

```
$('[id*="check_' + $(this).attr('id') + '"]') 
```******

# r - 如何生成具有截断边缘分布的随机场？

> ID：13255163
> 
> 赞同：0
> 
> 时间：2012-11-06T16:21:10.107
> 
> 标签：r, simulation, spatial, truncated, geor

是否有可以生成具有截断分布的随机字段的 R 包或函数？

我正在尝试模拟对数正态空间随机场，但我需要一定范围内的模拟值。所以我需要一些易于使用的函数来生成截断的高斯场。具体来说，我需要一个`GaussRF`来自 RandomFields 包或 geoR 包`grf`的函数来生成一个具有截断边缘分布的随机场和一个具有指定范围直接的相关结构。

如果没有可用的read-to-use函数或包，我是否可以很容易地编写自己的函数或包？

# java - X509 证书 CSR DN 解析

> ID：13255164
> 
> 赞同：3
> 
> 时间：2012-11-06T16:21:13.273
> 
> 标签：java, x509certificate, pki, x509

我遇到了 X.509 证书 DN 解析问题。生成的 CSR 格式如下：

/C=/ST=/L=/O=/OU=/CN=

CA 签发的签名证书格式如下：

C=USA, ST=NJ, L=test, O=Google, OU=Adwords, CN=test

我需要 Java 中的实用程序类，最好是采用这些符号中的任何一种并将 DN 规范化为标准格式的标准，以便我可以比较 CSR 和 X.509 证书数据以确定 DN 是否匹配。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:10:18.627

要解析 CA 颁发的 X509 证书，可以使用以下 java api： *[java.security.cert.X509Certificate](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/cert/X509Certificate.html)*

代码片段：

```
 extractX509DN(X509Certificate cert) {
        String domainName;
        domainName = cert.getSubjectDN().getName();
    } 
```

同样，您可以使用 api 中的其他方法来提取所需证书的详细信息。

要解析原始 CSR，您可以使用[BouncyCastle](http://www.bouncycastle.org/latest_releases.html)提供的 api 。我找到了一个方便的教程，您可能可以使用它来理解解析 CSR 所涉及的方法：

*[解析 CSR 代码片段](http://code.google.com/p/eid-pki-ra/source/browse/trunk/eid-pki-ra-util-crypto/src/main/java/be/fedict/eid/pkira/crypto/CSRParserImpl.java?r=91)*

浏览上面的链接，了解以下功能：

```
 public CSRInfo parseCSR (String csr); 
```

您的答案在上述代码片段的第 76 行。

# c# - 提交后获取列表框中所选值的值

> ID：13255170
> 
> 赞同：0
> 
> 时间：2012-11-06T16:21:18.623
> 
> 标签：c#, webforms, listbox, submit

我有一个列表框和一个提交按钮，单击时会触发一个事件。在事件处理程序中，我需要现在选择列表框中的哪个元素的信息。问题是每次索引都是-1？？

```
<form id="form1" runat="server">
    <div>

        <asp:ListBox ID="ListBox1" runat="server" Height="400px" Width="200px"></asp:ListBox>

    </div>
        <asp:Button ID="Button1" runat="server" Height="60px" Text="Send"  Width="100px" OnClick="send"/>

    </form> 
```

这是 .aspx 文件中的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:27:55.020

您可以使用[**GetSelectedIndices()**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listbox.getselectedindices.aspx)方法来获取选定的索引。

```
int[] selectedItemsIndexes = myListbox.GetSelectedIndices(); 
```

或者你可以使用

```
foreach(Object selecteditem in listBox1.SelectedItems)
{

} 
```

# ios - MBProgressHUD 完成后闪烁并阻塞 UI 2 秒

> ID：13255172
> 
> 赞同：0
> 
> 时间：2012-11-06T16:21:23.647
> 
> 标签：ios, xcode, afnetworking, mbprogresshud, hud

我对 MBProgressHUD 有一些问题。我正在下载一些图像和 JSON 并尝试显示状态。

这是在我的`viewdidload`：

```
HUD = [[MBProgressHUD alloc] initWithView:self.view];
HUD.labelText = @"Lade Bilder runter...";
HUD.mode = MBProgressHUDModeAnnularDeterminate;
HUD.detailsLabelText = @"Schritt 1 von 2";
HUD.yOffset = -10;
[self.view addSubview:HUD];
[HUD show:YES];
[self downloadImages]; 
```

`showWhileExecuting`不与`NSOperationQueue`. 我不知道为什么。因此，该方法`downloadImages`使用`NSOperationQueue`以处理下载`AFNetworking`。NSOperationQueue 完成后，我调用`finishedDownload`.

该方法调用

```
[HUD hide:YES]; 
```

这是有效的。HUD 隐藏，但 UITableView 被阻止约 2 秒。在那 2 秒后，HUD 闪烁并立即隐藏。在那次闪光之后，我可以与 UITableView 进行交互。

这里有什么问题？我真的很感激帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:57:20.023

我会按照其他答案所说的那样做，并将您的逻辑移动到 viewDidLoad 或 viewDidAppear 以防止视图出现任何启动问题。

此外，在开始网络调用之前，您需要给 UI 线程足够的时间来显示 HUD。由于您显然需要数据才能在视图中执行任何操作，因此您走在正确的道路上。您只需要让 HUD 有时间显示和关闭。

HUD 在显示时通常会阻塞 UI……因此用户无法对当前视图（后退按钮、其他按钮）执行任何操作，但可以访问其他内容，例如标签栏项目或任何未链接到您将 HUD 添加到的视图的内容。

我实际上会改变你的网络电话。

改变这个：

```
[self downloadImages]; 
```

对此：

```
[self performSelector:@selector(downloadImages) withObject:nil afterDelay:0.1]; 
```

这将释放您的线程以完成显示 HUD。解雇通常不是问题，因为无论如何您的操作都会在 HUD 关闭时完成。但有时您可能会遇到类似的问题，因此您可以考虑将 HUD 解除调用移动到可以在主线程上调用的方法。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:39:43.000

我会尝试将这段代码移动到`-viewDidAppear:`而不是`-viewDidLoad:`. 当子视图执行动画之前超级视图没有完全定位时，肯定会出现一些[奇怪的问题。](https://stackoverflow.com/questions/1371346/wait-fences-failed-to-receive-reply-10004003)

# algorithm - 查找由二分图的连通分量引起的顶点子集的算法

> ID：13255175
> 
> 赞同：2
> 
> 时间：2012-11-06T16:21:28.333
> 
> 标签：algorithm, graph, matrix, bipartite

给定一个二部图**G** = ( **U** , **V** , **E** )，我想找到**V的所有（最大）子集，它们是****G**的连通分量的一个“边” 。

例如，对于关联矩阵

```
 0 1 0 0 0 1
    1 0 0 0 0 1
    0 0 0 0 0 0
A = 0 0 0 0 1 0
    0 0 1 0 1 0
    0 1 0 0 0 0
    0 0 0 1 0 0 
```

其中行索引表示**U**而列索引表示**V**，输出应该是集合 {0, 1, 5}, {2, 4} 和 {3}。

这是否等同于任何标准问题？更重要的是，有没有有效的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:12:13.190

这类似于查找图的所有连通分量，其在边和顶点的数量上是线性的。这种方法的标准算法是对每个顶点进行广度或深度优先搜索。

我不认为通过利用图的二分性来提高复杂性，除了减少与该算法相关的常数。

# jboss - jboss 7.1 调用 ejb 到 jboss 4.2

> ID：13255176
> 
> 赞同：2
> 
> 时间：2012-11-06T16:21:35.440
> 
> 标签：jboss, ejb, jboss7.x

所以我的应用程序是在 Jboss-server 7.1.1 final 上开发的，但需要在 Jboss-server 4.2.3 上引用 Ejb。我调用 EJB 的代码是

```
String IP = "X.X.X.X";
String Port = "1234";
String Lookup = "dummy/dummy/dummy";

    Properties props = new Properties();
    props.put("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
    props.put("java.naming.factory.url.pkgs", "org.jboss.naming:org.jnp.interfaces");
    String ejbServiceURL = "jnp://"+IP +":"+Port; 
    props.put("java.naming.provider.url", ejbServiceURL);

    try {
        log.debug("looking up ejb by servie url:"+ejbServiceURL);
        remoteEjb = (EjbRemote) new InitialContext(props).lookup(Lookup);            
        log.debug("found ejb from context returning it.");
    } catch (NamingException e) {
        log.error("exception operating on ejb bean:" + e, e);
    } 
```

这在 Jboss-4.2.3 应用程序环境中运行良好，但 remoteEjb 总是在 Jboss-7.1.1 Final 上返回 null

所以你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:07:17.327

EJB JNDI 查找不同于 JBoss 4.2.3 和 Jboss 7.1。您在上面发布的代码适用于 JBoss 4.2.3，但不适用于 JBoss 7.1。在 Jboss 7.1 中，您必须设置以下内容：

```
Hashtable jndiProperties = new Hashtable();
jndiProperties.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");

Context context = new InitialContext(jndiProperties); 
```

现在，您可以通过调用进行查找：

```
context.lookup("ejb-jndi-name-here"); 
```

此外，JBoss 4.2.3 和 JBoss 7.1 中的命名上下文也不同。在 Jboss 7.1 中，jndi 将是： 对于无状态 bean：

```
ejb:<app-name>/<module-name>/<distinct-name>/<bean-name>!<fully-qualified-classname-of-the-remote-interface> 
```

对于有状态 bean：

```
ejb:<app-name>/<module-name>/<distinct-name>/<bean-name>!<fully-qualified-classname-of-the-remote-interface>?stateful 
```

您还可以在日志文件中查看 ejb 服务部署到 JBoss 7.1 时的映射名称。

# mysql - 带有索引的mysql表优化

> ID：13255181
> 
> 赞同：2
> 
> 时间：2012-11-06T16:21:45.917
> 
> 标签：mysql, optimization

我想优化我的表以加快查询结果。目前我正在使用 MyISAM 而不是 InnoDB。

问题是，第一个邮政编码是 5 个字符长并且不以**A**字母开头。所有以**A**字母开头的邮政编码都是 6 或 7 个字符长，大约位于表格记录的中间。您认为我的表中的记录应该按 AZ 顺序排列还是按邮政编码的长度（表顶部列出的字符较少的那些）更适合优化？

或者你还有什么建议？

**表结构：**

```
CREATE TABLE `postcodes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `postcode` varchar(10) NOT NULL,
  `latitude` decimal(25,20) NOT NULL,
  `longitude` decimal(25,20) NOT NULL,
  `fk_areas_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_postcodes_postcode` (`postcode`) USING HASH
) ENGINE=MyISAM AUTO_INCREMENT=1696089 DEFAULT CHARSET=utf8; 
```

**询问：**

```
SELECT
                    (@rownum := @rownum + 1) AS No,
                    postcode AS Postcode,
                    latitude AS Latitude,
                    longitude AS Longitude,
                    (
                        (
                            ACOS(SIN((SELECT latitude FROM postcodes WHERE postcode = $postcode) * PI() / 180) * SIN(latitude * PI() / 180) +
                            COS((SELECT latitude FROM postcodes WHERE postcode = $postcode) * PI() / 180) * COS(latitude * PI() / 180) *
                            COS(((SELECT longitude FROM postcodes WHERE postcode = $postcode) - longitude) * PI() / 180)) * 180 / PI()
                        ) * 60 * 1.1515
                    ) AS Distance
                FROM postcodes, (SELECT @rownum := 0) AS No
                HAVING Distance <= 0.5 /*miles*/
                ORDER BY Distance ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:56:16.380

我建议使用具有索引的物化视图。每当您执行诸如`COS`或`SIN`数据库必须重新计算该功能时，因此您的索引将被忽略。您应该创建一个为您预先计算解决方案的物化视图（我认为在 MySQL 中它们只是视图）。一旦计算出该解决方案，您就可以索引物化视图并针对它进行查询。

显然，在 MySQL 中执行此操作的方法如下：

```
Create table computed_view  
  --Complex and lengthy sql here  
create index on foo
create index on bar
create index on baz 
```

然后你会这样做：

```
select * from computed_view where foo = ? and bar = ? 
```

或者更简单的解决方案。在插入之前计算距离，这样您的数据库就只是一个数据存储库（应该处理它的方式）。如果您发现自己在数据库中进行数学计算，那么您就走错了路。将此偏移到 PHP 或您使用的任何语言，然后保留计算值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:37:13.797

记录的顺序可能没有影响。您可以通过简化查询来优化一些东西，通过预先计算值来优化一些东西，以及通过以最低要求的精度存储数据来优化一些东西。

我一直在对大约 10,000 个随机生成的邮政编码进行一些测试，并且我看到上述所有内容和这个指数的性能提高了（大约）25%：

```
CREATE INDEX postcodes_ndx ON postcodes(postcode, latitude, longitude); 
```

您的结果将取决于每行中存在哪些其他数据，以及平台和其他参数。

还要考虑利用 MySQL 的[空间扩展](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)的可能性。否则，您可能会尝试为每个邮政编码存储一个现成的 UTM 位置（只要您没有覆盖像俄罗斯那么宽的区域），并将第一个表限制为边上三英里平方内的值，以 为中心`$postcode`。这将立即将检索到的行减少几个数量级，从而成比例地提高查询速度。

我从 JOIN 而不是子选择开始：

```
SELECT
(@rownum := @rownum + 1) AS No,
A.postcode AS Postcode,
A.latitude AS Latitude,
A.longitude AS Longitude,
ACOS(
        SIN(B.latitude * PI() / 180) * SIN(A.latitude * PI() / 180) +
        COS(B.latitude * PI() / 180) * COS(A.latitude * PI() / 180) *
        COS((B.longitude - A.longitude) * PI() / 180)
) * 180 / PI() * 60 * 1.1515
AS Distance
FROM postcodes AS A,
(SELECT * FROM postcodes WHERE postcode = $postcode) AS B,
(SELECT @rownum := 0) AS No
HAVING Distance <= 0.5 /*miles*/
ORDER BY Distance ASC; 
```

另外，我认为您存储的纬度和经度过于精确。

一旦你有了三位数加六位小数的位置，那大约是一英寸的精度，而你使用的数学公式有一个比这更好的错误。

您还可以通过将纬度和经度存储在辐射度而不是度数中来压缩一些性能；这样您就可以保存大部分`PI()/180`计算。您可以使用触发器来执行此操作，并使用 and 存储两个额外的列`lat_rad`（`lng_rad`它们需要比 lat 和 lng 多三个小数）。

您还可以预先计算一些值，例如您可以直接乘以的 arccos`3958.57`而不是`180/PI()*60*1.1515`.

您还可以在 JOIN 中移动一些三角计算：

```
SELECT A.postcode AS Postcode,    
       A.latitude AS Latitude,
       A.longitude AS Longitude,
      ACOS(
        sinlat * SIN(A.latitude * PI() / 180)
      + coslat * COS(A.latitude * PI() / 180)
      * COS((B.longitude - A.longitude) * PI() / 180)
      ) * 3958.57 AS Distance
FROM postcodes AS A,
(SELECT latitude, longitude,
 COS(latitude*PI()/180) AS coslat,
 SIN(latitude*PI()/180) AS sinlat
 FROM postcodes WHERE postcode = $postcode
) AS B HAVING Distance <= 0.5
ORDER BY Distance ASC; 
```

最后，您可以删除`@rownum`计算并将其添加回 PHP：

```
$rownum = 1;
while($tuple = SQLFetchTuple($exec))
{
    $tuple['No'] = $rownum++;
    ... same code as before...
} 
```

## 修剪第一张桌子

这*确实*会受益于空间扩展，但我们可以强制第一组邮政编码与第一组*相差十分之一度*。

当然，除非你在赤道，否则这两个距离不会相同——你可以计算出大约两三英里对应的经纬度增量，以获得安全的余量。

```
SELECT A.postcode AS Postcode,
   A.latitude AS Latitude,
   A.longitude AS Longitude,
   ACOS(
       sinlat * SIN(A.latitude * PI() / 180) +
       coslat * COS(A.latitude * PI() / 180) * COS((B.longitude - A.longitude) * PI() / 180)
   ) * 3958.57 AS Distance
FROM postcodes AS A,
(SELECT latitude, longitude,
  COS(latitude*PI()/180) AS coslat,
  SIN(latitude*PI()/180) AS sinlat
 FROM postcodes WHERE postcode = $postcode) AS B
WHERE
    ABS(A.latitude  - B.latitude ) < 0.1
AND ABS(A.longitude - B.longitude) < 0.1
HAVING Distance <= 0.5 
```

按距离 ASC 排序；

# networking - ping 问题，一个可以 ping 另一个，但另一个不能以相反的方式

> ID：13255187
> 
> 赞同：0
> 
> 时间：2012-11-06T16:22:20.373
> 
> 标签：networking, ping

我有两台笔记本电脑通过无线局域网 Ad hoc 网络连接。

笔记本电脑 A：IP：192.168.1.119，子网：255.255.255.0，Windows 7 Enterprise X64，手动将 IP 分配给 WLAN NIC，域成员，防火墙 - 关闭（对所有、公共、私有、域配置文件关闭）。

笔记本电脑 B：IP：192.168.1.111，子网：255.255.255.0，Windows 7 Home Basic X64，手动将 IP 分配给 WLAN NIC，不是域成员（我们可以说是工作组“WORKGROUP”的成员），防火墙 - 关闭（关闭所有，公共，私人，域配置文件）。

笔记本电脑 A 可以 ping 到笔记本电脑 B。但是当我尝试从笔记本电脑 B ping 笔记本电脑 A 时，它显示超时。

请帮我。防火墙都关闭了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:36:33.350

您是否确认两台机器上的所有防火墙都已关闭？通常，这对我个人而言是关于 ping 的主要问题。您是否检查过 Windows 防火墙和您安装的任何防病毒软件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:31:01.663

尝试检查笔记本电脑 B 上应输出数据包的接口上的 tcpdump 或 wireshark。也许这是一个路由问题，数据包堆叠在某个地方，而没有从笔记本电脑 B 发送。

如果不是这种情况，请尝试在笔记本电脑 A 上执行相同操作，以查看 ICMP 数据包是否到达笔记本电脑 A。在这种情况下，您还将查看笔记本电脑 A 是否正在发送 ICMP 请求。

# groovy - Groovy 中下划线的含义

> ID：13255191
> 
> 赞同：9
> 
> 时间：2012-11-06T16:22:27.020
> 
> 标签：groovy

Groovy 模板中的下划线是什么意思？

```
if(_.isString(document.get....))
    .... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T16:25:53.077

`_`是 Groovy（和 Java）中的有效标识符

即：这个：

```
def _ = 13
println _ 
```

打印`13`。您必须提供更多背景信息才能了解`_`您给定情况下的设置

# android - Android google.navigation 意图模式？

> ID：13255192
> 
> 赞同：7
> 
> 时间：2012-11-06T16:22:35.690
> 
> 标签：android, android-intent, navigation

我目前正在开发一个将启动导航意图的应用程序。我知道这不是官方 API，但它可以按照我想要的方式完美运行。

我允许用户选择开车、步行和公交车导航到某个位置。直接启动到 Google 地图导航的意图如下所示：

`google.navigation:ll=`+ 纬度和经度，然后 +`&mode=`然后是您的交通方式。例如，要使用步行路线导航到某个区域：

`google.navigation:ll=blah,blah&mode=w`

驾驶是默认设置，或`&mode=d`，骑自行车是`&mode=b`，但我不知道公共汽车（公共交通）。

有没有人这样做过？

谢谢！

编辑：到目前为止，我发现`mode=public`提供自行车方向，`mode=transit`提供驾驶，令人沮丧的是，`mode=bus`还返回自行车方向。

更多：`mode=train`还可以开车...有办法做到这一点...

**另一个编辑：**我刚刚意识到我很确定它不存在，因为在尝试了一些术语之后，我意识到我应该通过公共汽车搜索来启动谷歌地图意图，但是有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:14:12.767

经过一番猜测和四处寻找，我决定直接启动巴士导航是不可能的，因为这将涉及选择一辆巴士供人们乘坐，这没有任何意义。

相反，您可以将它们启动到谷歌地图搜索到目的地，感谢您对类似问题的回答[：](https://stackoverflow.com/a/2853515/839947)

`"http://maps.google.com/maps?daddr=lat,long&dirflg=r"`

与`&dirflag`指定的公共交通。（为什么“r”我不知道......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:28:40.930

您应该能够根据需要附加[出行模式](https://developers.google.com/maps/documentation/directions/)，以下列出了出行模式。

*   *驾驶*（默认）指示使用道路网络的标准行车路线。
*   *步行*请求通过人行道和人行道（如果有）的步行路线。
*   *骑自行车*请求通过自行车道和首选街道（如果有）的自行车路线。
*   *交通*通过公共交通路线（如果可用）请求方向。

如果您想启动`Intent`并允许用户在地图或浏览器之间进行选择，您可以这样做。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
Uri.parse("http://maps.google.com/maps?saddr="+ starting_point_lat+","+starting_point_long+"&daddr="+dest_point_lat+","+dest_point_long+"&mode=transit"));
startActivity(intent); 
```

# sql - 如何获取“最高”数据

> ID：13255193
> 
> 赞同：0
> 
> 时间：2012-11-06T16:22:37.067
> 
> 标签：sql, plsql, oracle11g

我想从类似的表中获取“最重要”的数据：

```
美国广播公司 | ID
1 2 3 | 1
  4 5 | 1
    6 | 1
```

AC=Columns
1-6 values (未设置的字段为空)
数据按id降序排列

当我查询我想获取最新的写入数据时，在这个例子中，查询应该在一行中给我 1、4 和 6：

```
美国广播公司 | ID
1 4 6 | 1

```

这是我尝试过的，但后来我得到了正确的结果，但在不同的行中：

```
select * from
( select id, a from dataTable where id=(select max(dt.dataRow) from dataTable dt where dt.id = 1)) a_query
full outer join
( select id, b from dataTable where id=(select max(dt.dataRow) from dataTable dt where dt.id = 1)) b_query
on a_query.id=b_query.id 
full outer join
( select id, c from dataTable where id=(select max(dt.dataRow) from dataTable dt where dt.id = 1)) c_query 
on nvl(a_query.id, b_query.id)=c_query.id 
```

首选Oracle SQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:26:13.517

这似乎过于复杂，只需获取每列的最大值（并在列的空值的情况下使用 COALESCE）：

```
SELECT [id], MAX(COALESCE(a, 0)) AS a, 
    MAX(COALESCE(b, 0)) AS b, 
    MAX(COALESCE(c, 0)) AS c
FROM dataTable 
GROUP BY [id] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:40:38.983

我可能已经稍微简化了我的例子。A、B、C 中的数据可能是非数字且未排序的，依此类推。

我发现 last_value() [http://www.oracle.com/technetwork/issue-archive/2006/06-nov/o66asktom-099001.html](http://www.oracle.com/technetwork/issue-archive/2006/06-nov/o66asktom-099001.html)非常适合这将返回：

```
美国广播公司 | ID
1 2 3 | 1
1 4 5 | 1
1 4 6 | 1

```

让我继续操作。

然后查询看起来像这样：

```
select distinct 
last_value(a ignore nulls) over (order by id) a,
last_value(b ignore nulls) over (order by id) b,
last_value(c ignore nulls) over (order by id) c
from datatable
where datatable.id IN (select id from datatable where datatable.id = 1) 
```

# objective-c - 从 iOS 而不是 FbAppName 发送的 Facebook 原生共享对话框？

> ID：13255194
> 
> 赞同：3
> 
> 时间：2012-11-06T16:22:43.480
> 
> 标签：objective-c, ios, facebook, social-networking, facebook-ios-sdk

我正在 iOS 应用程序中实现 Facebook SDK 3.1。我已经完成了所有工作，除了一个小问题。

当我使用下面的代码通过 SDK 共享本机时，实际发布的内容据说是从 iOS 发布的，而不是我的 facebook 应用程序。

```
[FBNativeDialogs presentShareDialogModallyFrom:viewController
                                       session:FBSession.activeSession
                                   initialText:postText
                                        images:[NSArray arrayWithObjects:postImage, nil]
                                          urls:[NSArray arrayWithObjects:postURL, nil]
                                       handler:^(FBNativeDialogResult result, NSError *error) {
                                           [self handleShareResult:result error:error];

                                       }]; 
```

这是一个示例图片：

[![Facebook 帖子文本：9 分钟前通过 iOS 点赞、评论、分享](../Images/527ab47bd0b4794fc07b3a5c452ad04c.png)](https://i.stack.imgur.com/TZLuW.png)

我想通过“Facebook 应用名称”而不是 iOS 来表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:16:51.180

目前使用 iOS6 原生共享对话框，您将获得“通过 iOS”属性。

# jquery - 回调函数的问题

> ID：13255201
> 
> 赞同：0
> 
> 时间：2012-11-06T16:23:21.927
> 
> 标签：jquery

以下站点工作正常，但是当我单击导航选项卡以淡入和淡出相关内容时，页脚也会淡入和淡出，我不希望这种情况发生。

链接到工作网站：[http ://www.alessandrosantese.com/Pilates/Pilates/HTML/](http://www.alessandrosantese.com/Pilates/Pilates/HTML/)

```
$(document).ready(function() 
{

    var
        home = $('.home'),
        classes = $('.classes'),
        contacts = $('.contacts'),
        home_tab = $('.home_tab'),
        classes_tab = $('.classes_tab'),
        contacts_tab = $('.contacts_tab'),
        h_c = home.add(contacts),
        h_cl = home.add(classes),
        c_cl = contacts.add(classes),
        fast = 1200;

    home.css('display', 'block'); // display the home section on page load to start with

    classes.css('display', 'none');
    contacts.css('display', 'none');

    classes_tab.click(function(evt){
        evt.preventDefault();
        h_c.fadeOut(fast, function(){
        classes.fadeIn(fast);
        });
    });

    contacts_tab.click(function(evt){
        evt.preventDefault(evt);
        h_cl.fadeOut(fast, function(){
            contacts.fadeIn(fast);
        });
    });

    home_tab.click(function(evt){
        evt.preventDefault();
        c_cl.fadeOut(fast, function(){
            home.fadeIn(fast);
        });
    });

}); 
```

所有这些都发生在页眉和页脚之间，也许我的 jQuery 有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:30:40.373

页脚不会褪色。它被推到我们的视图下方，因为两个内容 div（一个淡出，一个淡入）在动画期间都是可见的。

您应该做的只是在旧内容完全消失后淡入新内容。

您的缺陷是使用 h_cl，它会快速触发回调，因为您隐藏了已经隐藏的元素。

试试这个：

```
h_cl.filter(':visible').fadeOut(... 
```

this will make sure you are fading only the visible elements, which will only fire the callback once it really is gone.

# java - 如何在使用自定义操作时避免按钮文本中的冗余

> ID：13255202
> 
> 赞同：1
> 
> 时间：2012-11-06T16:23:27.817
> 
> 标签：java, swing, action, jbutton

我正在用 SWING 创建一个 GUI。一些按钮附加了自定义操作。我的代码如下所示：

```
JButton btn = new JButton(text);
btn.setAction(new MyAction()); 
```

我的动作类构造函数：

```
super(text) //set the label of the button 
```

**我的问题是：因为我重复相同的参数（文本**）两次似乎是错误的，我应该如何处理？创建没有文本的按钮并让操作设置文本（可能作为构造函数参数）？处理这个问题的*正确*方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:00:42.440

使用[`AbstractAction(String name)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractAction.html#AbstractAction%28java.lang.String%29)包含`name`. [这里](https://stackoverflow.com/a/10491517/230513)引用了几个例子。

附录：正如@MadProgrammer 评论的那样，`Action.NAME`可`key`用于`putValue()`. 此相关[示例](https://stackoverflow.com/a/5129757/230513)说明`putValue()`了其他属性。

# sqlite - SQLite - 外键比 int 列更有效吗？

> ID：13255206
> 
> 赞同：2
> 
> 时间：2012-11-06T16:23:38.910
> 
> 标签：sqlite, processing-efficiency, space-efficiency

我有一张桌子：

```
 CREATE TABLE pupils (
     id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
     name TEXT, surname TEXT, address TEXT, score INTEGER
  ); 
```

其中`score`是百分比。

将整数值放入其中或将外键放入像这样的表中是否更有效？

```
 CREATE TABLE score (percentage INTEGER PRIMARY KEY NOT NULL); 
```

显然，该表将填充 0-100。

我的想法是，如果您有 1000 名学生，将其保留为整数列将意味着查询速度更快，但使用的空间更多，使用外键意味着使用的空间更少，但查询速度更慢。

不确定这是否正确？

所以我想我会把它扔在那里！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:38:23.233

如果你使用 FOREIGN KEY 来保护表`score`中的值`pupils`，你*仍然*需要在`pupils`. 如果没有两个表中的列，就不能有 FOREIGN KEY 关系。

FOREIGN KEY 的唯一优点是它可以让您将`score`列中允许的值限制为 1 到 100 之间的整数。但是，可以在列上使用 CHECK 约束来完成相同的操作，而无需额外的桌子。

如果您使用 FOREIGN KEY，您的 DDL 将如下所示：

```
CREATE TABLE pupils (
 id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
 name TEXT, surname TEXT, address TEXT, score INTEGER REFERENCES score(percentage)
); 
```

请注意，分数列仍然存在。

在这种情况下， FOREIGN KEY 方法添加了一个必须维护的整个表和两个索引。使用一个表和一个 CHECK 约束要高效得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:33:46.703

不需要标准化 score 的值。

这是一个值，它属于第一个表。

这将创建一个不需要的链接（到一个整数），这不会真正影响性能，但会影响可读性。

# scrapy - 可以根据关键字对来源进行优先排序的智能爬虫？

> ID：13255211
> 
> 赞同：1
> 
> 时间：2012-11-06T16:23:53.270
> 
> 标签：scrapy, web-crawler, nutch

我正在尝试创建一个网络爬虫，它会不断地爬网寻找包含某些关键字的网页。有很多开源解决方案（Nutch、Scrapy 等），但我需要一个可以优先考虑“丰富”资源的智能解决方案。

我希望机器人从某个页面开始，fe [http://www.dmoz.org](http://www.dmoz.org)，提取所有链接并继续抓取它们。现在，如果页面包含某个关键字 fe 'foo'，它应该将此 url 发送到数据库。

现在，困难的部分来了。如果我创建并运行这样的机器人，蜘蛛可能需要很长时间才能找到包含指定关键字的新页面，因为它正在爬取整个网络。如果蜘蛛能够识别出它经常在哪个域上找到关键字，那么这个过程将会大大加快，从而可以更频繁地抓取这些关键字。

有没有为此的开源解决方案？

到目前为止，我已经看过 Nutch 和 Scrapy。Nutch 看起来是满足我需要的最佳选择，但我对 Java 没有任何经验，也找不到有关此问题的任何特定文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:04:32.137

还没有尝试过，但我认为你可以在 Nutch 中通过控制如何对外链进行评分来做到这一点。如果您当前的页面包含您的关键字，您可以给该页面的外链更高的分数。

[http://sujitpal.blogspot.in/2012/01/nutchgora-scoring-and-indexing-plugins.html](http://sujitpal.blogspot.in/2012/01/nutchgora-scoring-and-indexing-plugins.html)中给出了扩展 ScoringFilter 的插件的实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T07:46:10.527

如果您愿意使用基于 Java 的解决方案，您可能想看看[Infant](http://www.infant-ir.info/)。Infant 是一个微型网络爬虫库。它不是一个开源项目，但完全免费，即使用于商业用途。您应该能够为 Infant 编写自己的插件，以控制 Infant 维护其 URL 队列的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T12:12:49.047

如果您仍在寻找类似的东西，您可以使用我们非常相似的开源软件之一

[Github 链接](https://github.com/theupscale/context-parser)

它适用于基于上下文的规则引擎，您可以在其中为任何关键字或文本分配一个从 0 到 9 的单个值作为权重，当它解析它时，将让您抓取您想要的内容

它基于 ROR

MYSQL、MONGO 和 Ubuntu 14.04 以及您可以自己管理的其他常规 gem，

# android - 图像内存泄漏

> ID：13255212
> 
> 赞同：6
> 
> 时间：2012-11-06T16:23:55.047
> 
> 标签：android, memory-leaks

我正在尝试在我的代码库中解决此内存问题。我正在使用 ImageManager 来跟踪所有分配，但其中一些正在逃避我的掌握。这是泄漏嫌疑人，但我无法追踪他们或知道如何解释泄漏嫌疑人窗口。

![泄漏](../Images/858eda04a5ae9d24cec9c575aa22a8eb.png)

# duplicates - DELETE ADJACENT DUPLICATES 不会删除重复项

> ID：13255213
> 
> 赞同：4
> 
> 时间：2012-11-06T16:24:01.897
> 
> 标签：duplicates, abap, internal-tables

我有一个包含 108 个条目的内部表。从 9 到 9 个条目，它重复了这些条目，我想删除这些重复项。由于它们完全相同，我使用了`delete adjacent duplicates from itab comparing all fields`. 也试过没有`comparing all fields`. 没有成功。

如果有帮助，我的表有 9 个字段：bukrs、hkont、gjahr、belnr、budat、waers、shkzg、wrbtr、dmbtr 和 dmbe2。他们来自 BSIS，他们也按照这个顺序。这是`DO`SELECT 所在的循环`enter code here`。我已经把循环的`DELETE`外部。`DO`

两个 first`SELECT`工作正常，属于以前存在的代码。

```
DO 12 TIMES.
         lv_aux = lv_aux + 1.
         lv_tamanho = STRLEN( lv_aux ).
         IF lv_tamanho = 1.
           CONCATENATE '0' lv_aux INTO lv_aux.
         ENDIF.
         CONCATENATE p_gjahr lv_aux '01' INTO z_v_first_day.

         PERFORM get_last_day_of_month USING z_v_first_day
                                       CHANGING lv_last_day.

         " some other code irrelevant to the issue

         SELECT bukrs hkont gjahr belnr budat waers shkzg dmbtr wrbtr dmbe2 FROM bsis
           APPENDING CORRESPONDING FIELDS OF TABLE gt_bancbsis
           WHERE hkont = '0051100001'
           AND bukrs EQ p_bukrs
           AND budat <= lv_last_day.

         " some other code irrelevant to the issue
ENDDO.

DELETE ADJACENT DUPLICATES FROM gt_bancbsis COMPARING ALL FIELDS. 
```

这是 dubugger 中内部表 gt_bancbsis 的图片。 ![调试器中的 itab](../Images/776e26af3b05ccdf2fb8f25c3d48e43d.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T11:27:25.800

`ADJACENT`声明中的词`DELETE ADJACENT DUPLICATES`有一个很好的理由：它指出只删除彼此相邻的重复行。[在线关键字文档](http://help.sap.com/abapdocu_702/en/abapdelete_duplicates.htm)中也说明了这一点：

> 如果相邻行的内容在检查的组件中相同，则认为行是重复的。在多个重复行相继出现的情况下，所有行（第一行除外）都将被删除。

这意味着：如果您的表包含值

```
 A B
 C D
 A B
 C D 
```

它包含重复值，但由于它们不相邻，`DELETE ADJACENT DUPLICATES`因此无论您指定什么，都不会删除它们。

`SELECT`另一方面，该语句不保证返回所选数据集时的特定顺序，除非您将其告知`ORDER BY`一个或多个列。这些行只是按任意顺序返回，如果`DELETE ADJACENT DUPLICATES`语句有效，那纯属巧合。它甚至可能在一个系统上工作，在另一个系统上停止工作，并且在第三个系统上只删除一半的重复项。所以，基本规则：

**在删除重复项之前，请确保您的内部表按要检查重复项的字段进行排序。**

为了获得更好的可伸缩性，您应该使用该`SORT`语句而不是让数据库使用`ORDER BY`. 所以你可以使用

```
SORT gt_bancbsis.
DELETE ADJACENT DUPLICATES FROM gt_bancbsis. 
```

或者，如果您只想检查某些字段，

```
SORT gt_bancbsis BY foo bar baz.
DELETE ADJACENT DUPLICATES FROM gt_bancbsis COMPARING foo bar baz. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:29:26.503

在**BSIS**表中，您使用 4 个 jey 字段（**bukrs、hkont、gjahr、belnr**）。这些字段仅用于排序。

1.  **首先对内部表进行**排序。****

     **```
    SORT ITAB WITH KEY ITAB-FIELDS. 
    ```** 
***   然后**比较**字段。

    ```
     DELETE ADJACENT DUPLICATES FROM ITAB 
    ```

    它会正常工作。**

# javascript - Google Plus 固定滚动条

> ID：13255217
> 
> 赞同：0
> 
> 时间：2012-11-06T16:24:18.393
> 
> 标签：javascript, jquery, css

我已经看到 Google+ 有这种很酷的布局，唯一可以滚动的地方是页面中间的内容，但实际的滚动条固定在窗口的右侧。我搜索了很多也许自己找到一种方法来做到这一点，但没有运气.. :) 有人知道这是怎么做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:26:51.653

它们用于`position: fixed`使边缘元素保持在原位。

比如，如果你有：

```
<div style="position: fixed; top: 10px; left: 10p;">
  This will always be 10px from the top left of your window, even when you scroll
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:32:01.020

灰色边界元素用 固定，位置用`position: absolute;`设置`top: ...px; left: ...px; right: ...px; or bottom: ...px;`。因此，您声明了一些具有宽度和高度的元素以及它们的位置。

代码中的示例：（其左侧灰色区域）

```
.Zaa, .MHPMSc {
    bottom: -74px;
    outline: medium none;
    position: absolute;
    top: 0;
    width: 100px;
} 
```

问候！

# ruby-on-rails - Rails：单向关联

> ID：13255218
> 
> 赞同：1
> 
> 时间：2012-11-06T16:24:30.717
> 
> 标签：ruby-on-rails, associations, belongs-to, has-one

这是一个场景：我有一个`IssueType`模型和一个`IssueTypeColour`模型。An `IssueType` `has_one` `IssueTypeColour`，但 an`IssueTypeColour`不一定`belongs_to`是特定的`IssueType`; 它可以属于许多不同的`IssueType`。换句话说，许多`IssueType`s 可以有相同的`IssueTypeColour`。

`has_one`根据这种情况，在模型上有关联而在`IssueType`模型上没有`belongs_to`关联是有意义的`IssueTypeColour`。

但这可以接受/可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:47:37.673

我想知道您是否真的需要该 IssueTypeColor 模型，您只需将 TypeColour 属性添加到 IssueType。

如果您想使用这两个模型，您的关系实际上是一对多的，因此您需要：

```
IssueType :belongs_to ....
IssueTypeColour :has_many ... 
```

我会推荐你​​这个链接：

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

在那里你会找到一个详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-21T16:46:41.013

对我来说没关系。在我的场景中，我有拥有一家航空公司的机票模型，但航空公司不属于机票，因为可能不止一张拥有该航空公司的机票。我解决了这个问题，将外键ticket_id 放在航空公司模型中。所以，当我有票对象时，我可以请求与这张票关联的航空公司。但是，当我有航空公司对象时，我无法请求机票，因为关联从机票对象一侧是单向的。此外，我认为在不必要的时候建立双向关联并不是一个好主意。但是，并不是所有的场景都是一样的。

这是迁移文件：

```
add_reference :airlines, :ticket, index: true 
```

# php - 使用 jquery ajax 发送数组

> ID：13255224
> 
> 赞同：2
> 
> 时间：2012-11-06T16:24:44.047
> 
> 标签：php, jquery, ajax

我有这个 jquery 代码：

```
 var myarr = ["aa","ss","dd"];

        $.ajax({
            url: "proces.php",
            data: "arr="+myarr,
            type: "POST",
            success: function () {
                alert("data is send");
            }
        }); 
```

我看到消息`data is send`，但在`proces.php`文件中我有这个代码

```
$str = '';
foreach ($_POST['arr'] as $k=>$v) {
    $str = $str.$v;
}

$hand = fopen("t.txt","w+");
fwrite($hand,$str); 
```

在文件中`t.txt`没有写任何内容，请告诉我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:26:40.370

您可以将其发送为：

```
$.ajax({
    url: "proces.php",

    data: 'arr=' + JSON.stringify({arr: myarr}),

    type: "POST",
    success: function () {
        alert("data is send");
    }
}); 
```

在服务器端，您可以将其解读为：

```
$arr = jsondecode($_POST['arr']);

foreach($x in $arr->arr) {
   // stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:31:26.163

如果你对一个数组进行字符串化并将其附加到`arr=`然后你会得到：

```
arr=1,2,3 
```

但是通过 HTTP 发送数据数组的标准方法是：

```
arr=1&arr=2&arr=3 
```

PHP 有一个额外的要求。它希望名称以`[]`

```
arr[]=1&arr[]=2&arr[]=3 
```

不要尝试自己构建表单编码数据。让 jQuery 来做。它默认为数组生成 PHP 样式的键名，并且会处理由于在 URI 中具有特殊含义的字符（例如，如果您的数据包含 a `&`）而需要的任何转义。

改变：

```
data: "arr="+myarr, 
```

到

```
data:{ "arr": myarr }, 
```

然后在 PHP`$_POST['arr']`中将是一个数组。

# php - 将mysql调用加载到数组中

> ID：13255226
> 
> 赞同：0
> 
> 时间：2012-11-06T16:24:47.863
> 
> 标签：php, mysql, arrays

通常不必经常这样做，但这次我的过程似乎无法正常工作，所以我要求澄清一下

这适用于查询中的单个项目：

```
 $query="SELECT data1 as product FROM Products ORDER BY Title"; 
    $result = mysql_query($query)
        or die("Query failed -".$query);        
    $rows=array();
    while($row = mysql_fetch_array($result, MYSQL_BOTH)) {
        $rows[] = $row;
    } 
```

正如我所说，这对于返回的单个项目很好，查询中返回的所有项目最终都在一个名为 $rows 的数组中

```
 $query="SELECT data1 as product, data2 as info FROM Products ORDER BY Title"; 
    $result = mysql_query($query)
        or die("Query failed -".$query);        
    $i=0;
    $data1=array();
    $data2=array();

    while($row = mysql_fetch_array($result, MYSQL_BOTH)) {
        $data1[$i] = $row[0];
        $data2[$i++] = $row[1];
    } 
```

这似乎没有做同样的事情，或者我错过了一些东西。

我错过了什么吗？如果不是，那么我需要将其他问题视为我的问题，但需要确保这一点。

我想要的结果是两个数组，一个包含查询结果中的所有第一项，第二个数组包含查询结果中的所有第二项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:32:46.250

尝试：

```
$row = array();
while($row[] = mysql_fetch_array($result, MYSQL_BOTH)) {} 
```

并且，如前所述，使用 mysqli 或 PDO。mysql_* 已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:32:45.203

```
 $query="SELECT data1 as product, data2 as info FROM Products ORDER BY Title"; 
$result = mysql_query($query)
    or die("Query failed -".$query);        
$i=0;
$data1=array();
$data2=array();

while($row = mysql_fetch_array($result, MYSQL_BOTH)) {
    $data1[$i] = $row[0];
    $data2[$i] = $row[1];
    $i++;
} 
```

# objective-c - UIscrollview 滚动其他scrollview

> ID：13255229
> 
> 赞同：0
> 
> 时间：2012-11-06T16:24:58.683
> 
> 标签：objective-c, ios

我有一个 3 `uiscrollviews`，例如 myscroll1、myscroll2、myscroll3..etc..，我已将其作为子视图添加到我的视图类中，**每个都位于一个之下**。就像， 在这里我需要同时滚动所有![在此处输入图像描述](../Images/6435c509020c74552b91810846bdf426.png)滚动视图，即如果我触摸并滚动任何必须滚动的内容。是否可以。？`scrollview``scrollview`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:36:29.043

为您的滚动视图设置委托并实施`scrollViewDidScroll:`以更新其他滚动视图的内容偏移量。

# jquery - 支持没有新功能的浏览器

> ID：13255231
> 
> 赞同：3
> 
> 时间：2012-11-06T16:25:06.350
> 
> 标签：jquery

> **可能重复：**
> [浏览器检测与特征检测](https://stackoverflow.com/questions/1294586/browser-detection-versus-feature-detection)

我一直在阅读有关特征检测的内容（使用 Google/Wikipedia/Docs），但不太了解它。弹出一些问题

1.  为什么需要特征检测。我们不能只检测浏览器并为其编写代码吗？
2.  进行特征检测的不同方法。最好的？
3.  你能给我一个实用的真实世界例子，其中特征检测起作用。我们如何处理旧浏览器以及如何在其中复制相同的功能>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:28:07.920

> 为什么需要特征检测。我们不能只检测浏览器并为其编写代码吗？

不，很快你的每个浏览器所做的事情的列表就会过时，而且它本质上是不完整的。（三年前的黑莓浏览器是否支持输入中的占位符文本？我不知道，我也不需要关心。）例如，它曾经是 IE 没有`addEventListener`. 现在确实如此。如果你开始一直检测到浏览器*版本*级别，那么当新版本出现时你会怎么做？这是维护的噩梦。

> 进行特征检测的不同方法。最好的？

没有单一的特征检测，它取决于特征。[您可以在此页面上](http://kangax.github.com/cft/)找到大量功能检测列表。还有像[Modernizr](http://modernizr.com/)这样的库可以为您进行特征检测。

> 你能给我一个实用的真实世界例子，其中特征检测起作用。我们如何处理旧浏览器以及如何在其中复制相同的功能>

当然。我在上面给了你两个，让我们深入研究一下（以相反的顺序）。

`addEventListener`：这在不使用 jQuery、YUI 等库的代码中很常见：

```
if (elm.addEventListener) {
    // Standard
    elm.addEventListener("click", myClickHandler, false);
}
else if (elm.attachEvent) {
    // IE fallback
    elm.attachEvent("onclick", myClickHandler);
} 
```

上面代码的好处在于，当 IE9 出现并拥有`addEventListener`（在标准模式下）时，代码就可以工作了。无需更新数据库即可说“IE9 现在拥有它”。

或者输入字段中有占位符文本，例如：

```
<input type="text" name="firstName" placeholder="First name"> 
```

当浏览器不支持占位符文本时，它们就没有`placeholder`元素的属性；当他们这样做时，他们会这样做。所以这个特性——检测浏览器是否支持占位符：

```
if ('placeholder' in document.createElement('input')) {
    // Supports the placeholders
}
else {
    // Doesn't, need to do something
} 
```

如果没有，你可能会连接代码来自己做。我在我的 place5 插件中执行此操作，该插件是此功能的 polyfill。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:35:14.983

一些答案，但像往常一样开放讨论:)

1）要回答这个问题，只需想想你有多少不同的浏览器及其版本......如果你想支持尽可能多的浏览器，你需要为每个浏览器编写不同的代码......并且使用移动浏览，数字加起来。具有“检测”功能的能力将只允许您编写两段代码，一段用于启用该功能的浏览器，另一段用于其他。

2）这当然是主观的。我使用[Modernizr](http://modernizr.com/)

3) 查看 Modernizr 可以检测到的功能，您会看到。例如，如果您想启用地理定位客户端，最好的方法是使用功能检测库，而不是保留您自己的浏览器特定代码数据库（这与问题 1 相关）。通常，为了覆盖未实现的功能，您可以在 if-then-else 中编写自己的代码或使用所谓的 poly-fill，您可以在[此处](http://remysharp.com/2010/10/08/what-is-a-polyfill/)阅读有关它的信息。基本上，它们是实现旧浏览器中不存在的功能的代码片段。美妙之处在于它们是完全透明的，您只需使用它们，而不关心它们是使用真正的实现还是回退到变通方法。[sessionStorage](https://gist.github.com/350433)的示例值得一读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:30:09.583

1.  因为浏览器可能会伪造他们的身份。还因为您永远无法了解所有可能的浏览器的功能。
2.  取决于功能。如果它是 JavaScript 方法，您通常只需像这样检查它：`if (window.XMLHttpRequest) { alert('it supports the XML HTTP requests!'); }`. 不同的功能可能需要不同的方法来检查它们。
3.  使用与以前相同的示例 - 如果检查返回`false`，您将退回创建 ActiveX 对象（如果支持 - 它在旧 IE 版本上）。或者您可能会向用户显示一条消息，说明他们将无法在您的应用程序中执行某些操作。

# ruby-on-rails - 使用 pry-rails 时如何清理 Rails 控制台输出？

> ID：13255242
> 
> 赞同：1
> 
> 时间：2012-11-06T16:25:45.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pry

我的 Gemfile 中有撬轨 gem。我想将 pry 用作 rails 控制台，但下面没有该文本。

如何清理我的 rails 控制台输出，现在我收到很多不必要的文本：

```
>> Subscription.where(user_id: User.last.id)
  User Load (1.8ms)  SELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT 1
#<ActiveRecord::Relation:0x7f7f9ad69c70
  @implicit_readonly = nil,
  @join_dependency = nil,
  @order_clause = nil,
  @records = [],
  @should_eager_load = nil,
  attr_accessor :bind_values = [],
  attr_accessor :create_with_value = {},
 ... 
```

[https://gist.github.com/4025796](https://gist.github.com/4025796)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:34:01.783

根据[第二个 Pry 提示](https://twitter.com/pryrepl/status/255080531228778496)，您可以在表达式末尾使用分号。

```
>> Subscription.where(user_id: User.last.id);
>> 
```

# c# - 如何根据另一个字段的输入验证字段

> ID：13255244
> 
> 赞同：0
> 
> 时间：2012-11-06T16:25:52.563
> 
> 标签：c#, asp.net

我有 2 个字段，只有当另一个字段中包含“NO”值的内容时，我才需要将其中一个字段设为必填字段。因此，我在网上进行了研究，这就是我最终拥有的。我唯一需要并需要帮助的问题是它调用此代码的第一部分：`.getElementByID`. 我该如何构建它？或者如果你能点亮一些灯会很棒。

```
<script>
        function Validate(source, args) {
                if (document.getElementById('<%= TextBox1.ClientID %>').value.toUpperCase() == "NO" &&
                document.getElementById('<%= TextBox2.ClientID %>').value.length == 0)
                        args.IsValid = false;
                else
                        args.IsValid = true;
        }
</script>
</head>
<body>
        <form id="form1" runat="server">
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        <asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="TextBox2 Should Be Filled"
                Display="Dynamic" ClientValidationFunction="Validate" OnServerValidate="CustomValidator1_ServerValidate"></asp:CustomValidator>
        <asp:Button ID="Button1" runat="server" Text="Button" />
        </form>
</body>
</html>

protected void Page_Load(object sender, EventArgs e)
        {
                if (!Page.IsPostBack)
                {
                        Page.Validate();
                        if (!Page.IsValid)
                                Response.Write("TextBox2 should be filled");

                }
        }

        protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
        {
                args.IsValid = !(this.TextBox1.Text.Equals("NO", StringComparison.CurrentCultureIgnoreCase) && this.TextBox2.Text.Length == 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:28:21.257

眼前的第一个错误是：

```
if (!Page.IsPostBack)  // <--- here
{
        Page.Validate();
        if (!Page.IsValid)
                Response.Write("TextBox2 should be filled");

} 
```

更改`!Page.IsPostBack`为，`Page.IsPostBack`因为如果页面还没有发回，验证用户输入是没有意义的。

根据您关于客户端验证代码的问题：实际上是什么问题？您的代码是否有效，是否出现异常，即使无效也会回发吗？怎么了？

# cocos2d-iphone - 导致游戏结束的坚实障碍

> ID：13255245
> 
> 赞同：0
> 
> 时间：2012-11-06T16:25:57.067
> 
> 标签：cocos2d-iphone

我是 cocos2d 环境的新手。我最近购买了线游戏入门套件，我的第一款游戏几乎完成了，我对此感到非常兴奋。

我有一个障碍要克服，希望你们能帮忙。

我的游戏在背景中有一面墙，我想让玩家避开它。

目前，如果我的角色撞到对方，游戏就结束了，但如果角色撞到墙上，我想使用相同的规则。

任何建议将不胜感激。

谢谢

保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:43:07.853

你的墙是雪碧吗？如果是，那么您可以像这样进行简单的碰撞检测-

--CCSprite *wall= [CCSprite spriteWithSpriteFrameName:@"wall.png"]; --CCSprite *player = [CCSprite spriteWithSpriteFrameName:@"player.png"];

if (CGRectIntersectsRect(wall.boundingBox, player.boundingBox)) {
//玩家撞墙 }

（我希望你已经有墙和播放器实体 - 只需在上面的代码中使用它们代替墙和播放器

# javascript - 处理触摸开始和触摸结束事件

> ID：13255256
> 
> 赞同：0
> 
> 时间：2012-11-06T16:26:19.120
> 
> 标签：javascript, touch

我正在尝试为触摸设备制作基于画布的益智游戏，但我正在为触摸事件而苦苦挣扎。我希望 touchFunction 触发两次，一次用于 touchstart 事件，一次用于具有适当 x 和 y 坐标的 touchend 事件。

以下是我所拥有的，它适用于touchstart，但对touchend没有任何作用，谁能指出我的问题是什么？任何帮助都会很棒，谢谢。

```
 canvas.addEventListener('touchstart', touchFunction, false);
    canvas.addEventListener('touchend', touchFunction, false);

    function touchFunction(ev) {   
    console.log(ev.touches[0].pageX + " " + ev.touches[0].pageY);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:29:59.033

你看过`touchmove`活动吗？

这将为您提供当前*“按下”*位置的 xy 坐标。非常相似`mousemove`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:41:51.467

你可能想研究一个像hammer.js这样的抽象层，这样你就可以处理鼠标事件和各种平台特定的触摸事件：[http ://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

# objective-c - 在按钮单击时刷新/重新加载模态 ViewController

> ID：13255257
> 
> 赞同：0
> 
> 时间：2012-11-06T16:26:22.653
> 
> 标签：objective-c, ios, xcode

如何在按钮单击时刷新/重新加载模态视图控制器？我需要重新加载整个视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:42:13.047

您可以关闭模​​态视图控制器并再次显示它，将动画参数设置为 NO。另一种解决方案是将您的 ViewController 嵌入 UINavigationController 作为它的 RootViewController（并以模态方式呈现这个）。当您必须重新加载 ViewController 时，只需使用：

```
 - (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated 
```

在 navigationController 上，带有一个包含 ViewController 的新实例的数组。

无论如何，你真的确定你不能简单地重置 UIViewController 的所有内容而不从头开始“重新加载”它吗？

# html - 有没有一种有效的方法可以为抓取机器人提供特定的缩略图？

> ID：13255258
> 
> 赞同：0
> 
> 时间：2012-11-06T16:26:31.433
> 
> 标签：html, .htaccess, css-sprites

我的网站使用了一些激进的缓存技术来将请求保持在最低限度，其中包括：

*   .htaccess 重定向到缓存的 HTML 文件；
*   将内容图像自动合并到 CSS 精灵中。

这对人流量很有用，但是当一篇文章发布在 Facebook、Pinterest、Google+、Reddit 等上时，机器人无法找到合适的缩略图，因为页面图像都是大精灵 JPEG。

一种解决方案是当机器人发出请求时绕过缓存的 .htaccess 规则。最好不必专门命名每个可能的机器人用户代理。我不确定如何做到这一点。

另一种解决方案是在机器人会下载但真正的网络浏览器不会下载的每个页面上嵌入一个好的缩略图。任何想法如何做到这一点？

欢迎提出其他建议。如果一切都失败了，我将重新编写我的脚本以从自动精灵中排除每个帖子的第一张图片，但这将有效地使我可怜的过度劳累的服务器必须容纳的图片请求数量增加一倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:50:56.343

无论您要解决什么问题，向机器人展示与向人类展示不同的东西都是一种非常糟糕的方法。谷歌有时甚至会惩罚搜索排名较低的网站。更好的方法是访问每个机器人的网站，看看是否有办法告诉机器人显示与该页面相关的图像。

例如，Facebook 在`head`您的 html 中接受以下元标记，以告诉它与您的页面相关的图像：

```
<meta property="og:image" content="[url to the image]"> 
```

# binding - 如何使用引用来自 jsf2 中的支持 bean 的 POJO 的操作来渲染 commandLink？

> ID：13255260
> 
> 赞同：0
> 
> 时间：2012-11-06T16:26:31.467
> 
> 标签：binding, jsf-2

我需要渲染一个对行、列、标题、样式等进行精确控制的 html 表。
我以这种方式使用 primeFaces panelGrid：

```
<p:panelGrid binding="#{myBean.tableComponent}"/> 
```

在我的支持 bean 中，我有：

```
private UIComponent tableComponent;

public UIComponent getTableComponent() {        
    if (tableComponent == null) {
        tableComponent = new PanelGrid();
        populateTableComponent(); // Populate datatable.
    }
    return tableComponent;
}

public void setTableComponent(UIComponent tableComponent) {
    this.tableComponent = tableComponent;
}

private void populateTableComponent() {
    PanelGrid tbl = (PanelGrid) tableComponent;
    //...
    for (MyPojo row : data.getRows) { 
        // ...here I create the row/column UIComponent subtree
    }
} 
```

现在，我的问题是：对于特定列，我必须在每一行中呈现一个 commandLink。
这个链接应该 AJAX 调用一个 bean 的方法，该方法应该做一些与点击的行相关的事情。
类似的东西，`<p:commandLink action="#{myBean.myFieldClick(***row***)}">`但
我怎么能指`row`？

其他想法？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:30:24.950

`var`只需使用与数据表属性中定义的完全相同的变量名称即可。换句话说，写下与通常将其写入视图文件而不是支持 bean 时完全相同的 EL 表达式字符串。

因此，视图中以下命令链接示例的操作属性

```
<p:dataTable ... var="row">
    ...
    <p:commandLink ... action="#{myBean.myFieldClick(row)}"> 
```

可以以编程方式表示为

```
MethodExpression action = createMethodExpression("#{myBean.myFieldClick(row)}", null, Row.class); 
```

使用这个辅助方法

```
public static MethodExpression createMethodExpression(String expression, Class<?> returnType, Class<?>... parameterTypes) {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    return facesContext.getApplication().getExpressionFactory().createMethodExpression(
        facesContext.getELContext(), expression, returnType, parameterTypes);
} 
```

# javascript - ANSI 日期（COBOL 整数日期）到当前日期

> ID：13255272
> 
> 赞同：1
> 
> 时间：2012-11-06T16:27:19.833
> 
> 标签：javascript, date

我需要将表示自 01.01.1601（截至 2012 年 11 月 6 日：150422）以来的天数的整数转换为 javascript`Date`对象。

每年大约有`365.242199`几天，所以计算应该如下：

```
var daysPerYear = 365.242199;
var daysSince = 150422;

var year = 1601 + Math.floor(daysSince / daysPerYear); // correct, gives me 2012
var days = Math.floor(daysSince % daysPerYear); // wrong, gives me 307 
```

现在我创建`Date`对象：

```
var date = new Date(year, 0);
date.setDate(days); 
```

现在`date`指向`'Fri Nov 02 2012 00:00:00 GMT+0100 (CET)'`的时间大约相差 4 天。

我的计算有什么问题？有没有更简单的方法来获取`Date`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:29:53.280

克隆出 OpenCOBOL 1.1 的副本，并查看**libcob/intrinsic.c**进行计算。

具体参见**cob_intr_date_of_integer**。

对于 SVN 只读结帐

```
svn checkout svn://svn.code.sf.net/p/open-cobol/code/trunk open-cobol-code 
```

或浏览至

```
http://sourceforge.net/projects/open-cobol/files/open-cobol/1.1/open-cobol-1.1.tar.gz/download 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:44:37.643

JavaScript 日期从 1970 年 1 月 1 日午夜开始计算。`new Data().getTime()`例如，如果您这样做，您将返回从该点开始的毫秒数。因此，要转换从 1601 年 1 月 1 日开始的日期，您需要计算 1601 年 1 月 1 日和 1970 年 1 月 1 日之间的确切毫秒数，并取您的日期的差值（也转换为毫秒）。

这样，您所做的就是将数字相加，并且不会因您的近似值而出现任何浮点不准确或错误。

# matomo - Piwik：使用 ImageGraph API 获取自定义日期范围内的唯一访问者图表

> ID：13255276
> 
> 赞同：1
> 
> 时间：2012-11-06T16:27:28.097
> 
> 标签：matomo

我才刚刚开始使用 piwik，但已经被卡住了。

我想获得一个图表，显示**自定义**日期范围（从 2 月到 4 月）的唯一身份访问者，以便计算每一天。就像它显示在 Piwik 中的“Visitors => Overview”下一样。但不知何故，ImageGraph API 似乎不可能。

我正在尝试做什么（使用 ImageGraph API）：我想显示一个图表，显示特定日期范围内每天的唯一身份访问者数量。下面我想显示一个图表，显示同一日期范围内每天的所有目标转化。

它应该显示这两个值之间的关系，因为如果转化的增加伴随着独立访问者的增加，它是高度相关的。

如果两条迷你图都在同一个图表中，那就太好了，但我认为这是不可能的。

有谁知道如何实现这一目标？任何帮助，将不胜感激。

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:58:21.443

对于日常访问，您可以通过调用下一个 URL 来生成图形：

```
 $this->baseSite. 
    'index.php?module=API&graphType=evolution&width=800&height=200&method=ImageGraph.get&idSite=' .
    $this->siteId . '**&period=day**'. **'&date=' .
    $this->startDate->format('Y-m-d') . ',' .
    $this->endDate->format('Y-m-d')** .                     
    '&apiModule=VisitsSummary&apiAction=get&token_auth='.
    $this->apiKey 
```

# javascript - 操作子元素的属性

> ID：13255277
> 
> 赞同：0
> 
> 时间：2012-11-06T16:27:30.317
> 
> 标签：javascript, jquery

我有以下带有双击事件的行元素。

```
<tr ondblclick="onLabelDoubleClicked(this)">
   <td><label id="labelId" >My Label</label></td>
   <td><input type="text" id="myInput" data-bind="kendoDropDownList: { data: source, value: myValue, enable: true }" /></td>
</tr> 
```

双击时，我需要将输入元素的`enable`属性设置为切换真/假。`kendoDropDownList`

javascript:

```
onLabelDoubleClicked = function (event) {

    } 
```

我搜索了`event`属性，但找不到任何有用的东西来获取`enable property`和操作它。任何有关工作示例的帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:33:10.090

如果将处理程序放在 JS 代码中并从那里遍历/更改 DOM，则不是内联双击事件，而是更容易。

我不确定该`data-bind`属性中的 Kendo 内容，但对我来说它看起来像一个字符串，所以除非你有更好的方法，否则你需要进行字符串替换。

尝试这个：

```
$('tr').dblclick(function() {
    var $el = $(this).find(':text'),
        data = $el.data('bind');
    if (/true/.test(data)) {
        data = data.replace(/true/,'false');
    } else if (/false/.test(data)) {
        data = data.replace(/false/,'true');
    }
    $el.prop('data-bind', data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:35:13.273

如果您可以使用 jQuery（并且标签集意味着您可以），为什么不直接使用 jQuery（和 Kendo）方法呢？

```
$('tr').dblclick(function() {
  var $kd = $(this).find('input').data("kendoDropDownList");
  $kd.enable( $kd.element.is(':disabled') );
}); 
```

# mysql - 多用户 Web 应用程序

> ID：13255279
> 
> 赞同：1
> 
> 时间：2012-11-06T16:27:38.750
> 
> 标签：mysql, jsf, jpa, ejb, multi-user

我知道这个问题被问了很多，但我没有找到任何可以帮助我的东西。

我正在使用 Java、JSF、EJB、JPA、GlassFish、MySQL。

我使用这些技术开发了带有身份验证的网站，但仅从一个位置（一次一个会话），如果另一个用户从另一个位置登录，他可以看到第一个用户会话的状态。

现在我需要开发一个具有通用主页和一些通用功能的多用户 Web 应用程序，但其余的需要依赖于用户对 Web 应用程序和数据库的多线程访问。

我需要：

*   限制用户只能从一个位置开始会话的能力，一台计算机
*   让他们让他们在网站上注册一段有限的时间（可以说，个人资料应该活跃 1 年）
*   让他们在 1 小时后超时，依此类推......

请帮助我了解我必须做什么！我`t know how and where to start, I read a lot of articles about this, but it was just bits and pieces and I don`没有这方面的全貌。

感谢您抽出宝贵的时间，祝您编码愉快，并继续您在这里所做的出色工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:39:25.797

> *如果另一个用户从另一个位置登录，他可以看到第一个用户会话的状态。*

这个不对。这个应用程序从一开始就设计得很糟糕。当您将请求和/或会话范围的数据存储在`static`变量或应用程序范围内时，可能会发生这种情况。这个不对。请求范围的数据应该存储在`static`请求范围 bean 的非变量中。会话范围的数据应该存储在`static`会话范围 bean 的非变量中。

换句话说，`static`在你真正理解变量的含义之前停止使用变量，并且不要将数据存储在太宽的范围内。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# websphere-7 - 如何在 WAS7 中创建符合 XA 的主题连接工厂？

> ID：13255280
> 
> 赞同：0
> 
> 时间：2012-11-06T16:27:39.400
> 
> 标签：websphere-7

我使用 WAS7 中的 WebSphere MQ 消息传递提供程序创建了一个主题连接工厂。当我查找 JNDI 名称时，我得到一个 com.ibm.ejs.jms.JMSTopicConnectionFactoryHandle 类型的工厂对象。这实现了 TopicConnectionFactory，但没有实现 XATopicConnectionFactory。

在我的主题连接工厂中，我选中了“支持分布式两阶段提交协议”框。

如何创建实现 XA 接口的主题连接工厂？我需要吗？这个 JMSTopicConnectionFactoryHandle 是否仍然处理 XA 消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:41:25.110

XATopicConnectionFactory 定义了一个在 JMS 提供者和应用程序服务器（更准确地说是事务管理器）之间使用的 API。另一方面，返回给应用程序的主题连接工厂是一个从不实现该接口的包装器。原因是应用程序不会直接干扰 XA 功能；管理分布式事务中的各个资源是事务管理器的专属职责。

# c++ - 如何使用 QWebView 作为独立的 JavaScript 引擎？

> ID：13255281
> 
> 赞同：0
> 
> 时间：2012-11-06T16:27:41.557
> 
> 标签：c++, qt, qtwebkit, qwebview

在我当前的项目中，我们使用的是 c++、QT、QTWebview。完整的业务逻辑驻留在使用 QWebView 加载到 .exe/.app 中的 JavaScript 中。本机操作系统逻辑位于 C++ 中。使用 QT Signal & Slots 可以实现从 C++ 到 Javascript 的往返通信。在 Javascript 中，我们还使用了 HTML5 网络工作者，只是为了确保 C++ QT UI 线程能够响应最终用户。

事实上，Javascript 不需要任何 DOM 交互。我们使用 Javascript 作为一种简单的编程语言。由于完整的 QT webkit 涉及 Layout 引擎和 Javascript 引擎。我觉得内存消耗有些沉重。

是否可以将 QWebView 用作纯 Javascript 引擎？

此外，如果您能向我推荐任何处理 QWebView 的最佳内存管理技术，那就太好了。我们看到内存消耗正在急剧增长

# java - JTable根据不在表中的属性对行进行排序

> ID：13255282
> 
> 赞同：1
> 
> 时间：2012-11-06T16:27:43.643
> 
> 标签：java, swing, jtable, abstracttablemodel, rowfilter

我写了这个简单的排序函数：

```
public void applyFilter(String filter, int col)
{
    if(filter.length() == 0)
        sorter.setRowFilter(null);

    RowFilter<Object, Object> rf = null;
    try 
    {
        rf = RowFilter.regexFilter(filter, col);
    } 
    catch (java.util.regex.PatternSyntaxException e) 
    {
        return;
    }

    sorter.setRowFilter(rf);
    refreshTable();
} 
```

但后来我意识到我想根据我没有显示给视图的 id 过滤表（所以它没有它的列）。java过滤器是基于列的，但是如何根据其他未显示的属性过滤表？我可以轻松地获取由该行表示的底层对象并获取 id，但是我该如何进行基于此的过滤呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:06:04.597

这在很大程度上取决于您的数据是如何建模的，但基本上您可以编写自己的过滤器......

这是我在示例中使用的过滤器实现...

```
 public class IDFilter extends RowFilter<MyModel, Integer> {

        private int id;

        public IDFilter(int id) {
            this.id = id;
        }

        public boolean include(RowFilter.Entry<? extends MyModel, ? extends Integer> entry) {
            MyModel personModel = entry.getModel();
            RowValue value = personModel.getValueAt(entry.getIdentifier());
            if (value.getId() == id) {
                return true;
            }
            return false;
        }

    } 
```

这是它运行的示例...

```
public class TestTableFilter {

    public static void main(String[] args) {
        new TestTableFilter();
    }

    public TestTableFilter() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FilterPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class FilterPane extends JPanel {

        private JTable table;
        private int filter;
        private TableRowSorter<MyModel> sorter;

        public FilterPane() {
            setLayout(new BorderLayout());
            MyModel model = new MyModel();
            sorter = new TableRowSorter<MyModel>(model);
            table = new JTable(model);
            table.setRowSorter(sorter);
            add(new JScrollPane(table));

            JButton filterButton = new JButton("Filter");
            filterButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    filter++;
                    System.out.println(filter);
                    RowFilter<MyModel, Integer> rowFilter = null;
                    switch (filter) {
                        case 1:
                            rowFilter = new IDFilter(0);
                            break;
                        case 2:
                            rowFilter = new IDFilter(1);
                            break;
                        default:
                            filter = 0;
                    }
                    sorter.setRowFilter(rowFilter);
                }
            });
            add(filterButton, BorderLayout.SOUTH);
        }

    }

    public class MyModel extends AbstractTableModel {

        private List<RowValue> values;

        public MyModel() {
            values = new ArrayList<>(25);
            for (int index = 0; index < 10; index++) {
                values.add(new RowValue(index % 2, Character.toString((char) (65 + index)), index));
            }
        }

        @Override
        public int getRowCount() {
            return values.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            RowValue row = values.get(rowIndex);
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = row.getName();
                    break;
                case 1:
                    value = row.getValue();
                    break;
            }
            return value;
        }

        public RowValue getValueAt(int row) {
            return values.get(row);
        }

    }

    public class RowValue {

        private int id;
        private String name;
        private int value;

        public RowValue(int id, String name, int value) {
            this.id = id;
            this.name = name;
            this.value = value;
        }

        public int getId() {
            return id;
        }

        public String getName() {
            return name;
        }

        public int getValue() {
            return value;
        }

    }

    public class IDFilter extends RowFilter<MyModel, Integer> {

        private int id;

        public IDFilter(int id) {
            this.id = id;
        }

        public boolean include(RowFilter.Entry<? extends MyModel, ? extends Integer> entry) {
            MyModel personModel = entry.getModel();
            RowValue value = personModel.getValueAt(entry.getIdentifier());
            if (value.getId() == id) {
                return true;
            }
            return false;
        }

    }

} 
```

# maven - IntelliJ - 如何为 Maven 目标链接模块

> ID：13255283
> 
> 赞同：1
> 
> 时间：2012-11-06T16:27:48.187
> 
> 标签：maven, intellij-idea

我已成功将带有子模块的父 pom 导入 IntelliJ。子模块之间存在依赖关系，并且 IntelliJ 已正确设置类路径，以便对模块 A 的更改反映在模块 B 中。但是，当我在 IntelliJ 中执行 maven 目标（编译、码头：运行等）时，不会维护这些依赖关系。这是我的结构：

```
client_libs
 -- servlet-filter
 -- filter-example 
```

filter-example 依赖于 servlet-filter。但是，当我在 filter-example 上运行 maven compile 时，我得到：

```
The POM for com.cloudseal.client:servlet-filter:jar:1.0-SNAPSHOT is missing, no dependency information available 
```

在执行 maven 目标之前，我可以通过手动将 servlet-filter 安装到本地存储库中来解决此问题，但显然这并不理想。执行 maven 目标时，如何让 IntelliJ 维护模块之间的关系？

![家长会](../Images/db1a0b94242764dc522b7f7ee7ae1da8.png)

![过滤器示例](../Images/f7d330689ef27f0cd7e9dd80b10cf2bf.png)

![项目结构](../Images/9c8b285e660dc850d5fb258a088e295e.png)

![依赖关系](../Images/856c2f72a378c1e736dc563ab69706a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:41:49.360

您应该能够只运行*mvn package*，但可以从父 pom 所在的位置/路径运行。

如果这对您不起作用，请发布您的 pom.xml 文件。

# ruby-on-rails - 使用 geocoding.rb 存根 Gmaps4rails

> ID：13255284
> 
> 赞同：0
> 
> 时间：2012-11-06T16:27:53.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails, gmaps4rails

我已经查看了一些 Gmaps4rails 存根问题，并认为我非常接近，但并不完全在那里。原谅我：在 Rails 中进行 stubbing 和 mocking 非常新。

所有这些代码都适用于现实世界，只是试图让它在测试期间跳过地理编码。现在测试*有时会*工作，*有时*会因**Gmaps4rails 地址地址无效**错误而失败

所以，我有一个非常简单的party.rb 模型，它是acts_as_gmappable：

```
def gmaps4rails_address
   "#{self.city}, #{self.country}" 
end 
```

我从 github 粘贴了 geocoding.rb 并将其放在 /spec/support 中，未修改

但是，我似乎无法告诉我的party_controller_spec 使用存根而不是真实的存根。我确定我错过了一些简单的东西......我试过了：

```
include Geocoding 
```

乃至

```
Gmaps4rails.set_gmaps4rails_options!({:msg => "quack"}) 
```

并且我没有看到“quack”作为错误消息，我看到**Validation failed: Gmaps4rails address Address invalid**

也试过：

```
Gmaps4rails.set_gmaps4rails_options!({:validation => false, :check_process => false, :process_geocoding => false}) 
```

但是没有效果。

我的 factory.rb 有一个简单的 :party 定义：

```
Factory.define :party do |party|
party.name      "Thai New Year"
party.city      "Phuket"
party.country   "Thailand"
...
end 
```

所以，我很确定我没有正确地告诉 rspec 使用存根的 Gmaps4rails。那么，我将告诉 Gmaps4rails 使用您的 stub_geocoding 方法而不是实际尝试执行地理编码的代码放在哪里？

任何帮助将不胜感激......对不起，如果这是一个平凡的问题。

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:57:00.830

如果您不想要任何地理编码，请执行此操作：

```
Factory.define :party do |party|
  party.name      "Thai New Year"
  party.city      "Phuket"
  party.country   "Thailand"
  party.gmaps     true #<= this is what tells the gem not to fire geocoding
  party.latitude  whatever_if_relevant
  party.longitude whatever_if_relevant
  ...
end 
```

# vb.net - 使用 VB.NET 重置打印机

> ID：13255291
> 
> 赞同：3
> 
> 时间：2012-11-06T16:28:23.410
> 
> 标签：vb.net, printing, calibration

最近，我一直在 VB Web 应用程序中开发一个标签系统，该系统可以打印到东芝 TEC 条码打印机，但它似乎从来没有正确排列。我尝试更改设置并调整纸张尺寸，仅重新校准打印机似乎有所帮助，然后对齐再次消失。

我一直在考虑尝试解决此问题的方法是在页面上放置一个按钮，以允许用户重新设置/重新校准打印机。认为这比他们拉标签重新排列要好。

这是用于打印标签的代码：

```
Public Sub SetPrintSettings(ByVal pd As PrintDocument, ByVal printer As String, ByVal printerselected As Integer)    

    Dim pSize As PaperSize    
    'set the printer
    pd.PrinterSettings.PrinterName = printer
    pd.DefaultPageSettings.Landscape = False

    pSize = New PaperSize("USER", 400, 202)
    pd.DefaultPageSettings.PaperSize = pSize
    pd.DefaultPageSettings.Margins = New Margins(0, 0, 0, 0)
End Sub 
```

我已经浏览了 PrinterSettings 和 DefaultPageSettings，但里面没有任何东西可以让我重置打印机。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:09:09.630

*这确实是一条评论，但我已将其作为答案，因此格式更好：*

我对导致此问题的原因的猜测。

*   标签之间的间隙太小。这些打印机对检测间隙可能非常挑剔
*   打印机上的间隙传感器损坏
*   发送到打印机的命令不正确，例如指定的标签尺寸大于实际尺寸。

# soap - 从 SOAP 响应创建 WSDL 消息

> ID：13255300
> 
> 赞同：0
> 
> 时间：2012-11-06T16:28:53.693
> 
> 标签：soap, wsdl

我有一个 WSDL，其中包含与实际响应不同的响应。我想用 API 响应的格式更新 WSDL，但是遇到了麻烦。是否有从 SOAP XML 生成 WSDL 响应的工具？

我应该提一下，他们将 WSDL 作为文件提供给我，没有可见的公共 WSDL。

响应包含这个未知的匿名 xml 元素，s-gensym3。它应该是用户标识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:34:22.293

如果它是 .NET Web 服务，您可以浏览到 [serviceurl]?WSDL 以获取 WSDL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T16:35:44.080

肯定有您与之通信的服务端点。您应该能够在浏览器中调用此端点并添加到末尾：

```
?wsdl
i.e. http://service:8123/operationName?wsdl 
```

这将为您打印整个 WSDL。只要确保你有相同的，你就完成了。

# java - 从文本文件中读取整数

> ID：13255302
> 
> 赞同：0
> 
> 时间：2012-11-06T16:28:59.237
> 
> 标签：java

我有一个文本文件，我在其中写了 3 件事

例如每个单词的 <int,int,char>。

现在，我正在读取文件，因此我认为第 3.1 个块我总是考虑一个整数，第 2 个也作为整数，第 3 个作为字符。当整数从 0-9 时没有问题，但是当它超过 10,100 那么我的程序由于显而易见的原因无法运行。

就像我必须阅读这篇文章时没有问题一样

```
11a     here <1=int,1=int,a=char> 
```

但是当这样的事情发生时，我面临着问题

```
152a    here <15=int,2=int,a=char> 
```

我已将整个文本文件放在一个字符串中。现在，我如何读取不再面临上述问题的字符

更多信息：我的文本文件包含这样的字符
11a22d33f1234f

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:33:16.317

鉴于您当前对问题的描述，无法确定诸如

```
152a 
```

对应`(15,2,a)`或`(1,52,a)`。

为什么不在元素之间使用一些分隔符写入文件，然后`split()`在从文件读回时围绕分隔符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:36:04.683

您的文本文件格式不正确，那么您要如何区分“1 11 a”和“11 1 a”，例如您不能使用 csv 或类似的东西？

# ruby-on-rails - 如何在 ruby /ruby on rails 中生成包含太多数据的折线图？

> ID：13255304
> 
> 赞同：1
> 
> 时间：2012-11-06T16:29:04.903
> 
> 标签：ruby-on-rails, ruby, charts, google-visualization, linechart

我正在尝试使用从数据库中获取的数据生成折线图。

数据基本上有一个日期字段、一个估计进度字段和一个实际进度字段。

进度可能为零，但日期始终存在。

由于我不知道日期的间隔是多少，并且我需要均匀分布的日期间隔，所以我想以 1 天的步骤制作从第一个日期到最后一个日期的数据。

例如，假设我在数据库中有这个：

```
| date        | estimated progress        | real progress        |
| 2012-08-01  | 0.0                       |                      |
| 2012-08-02  |                           | 0.15                 |
| 2012-08-05  | 0.3                       |                      | 
```

我想用这个信息生成一个折线图：

```
x = [2012-08-01, 2012-08-02, 2012-08-03, 2012-08-04, 2012-08-05]
ep = [0.0 , 0.0, 0.0, 0.0, 0.3]
rp = [nil , 0.15, 0.15, 0.15, 0.15 ] 
```

但由于开始日期和结束日期可能太分开，我想用自定义间隔显示 x 标签。可能每 3、5 或 7 天一次，具体取决于这些日期之间的距离。

我正在尝试`gchartrb`使用 google chart api，但我意识到我的数据中不能有 nil 值。所以我应该用 0.0 替换它，即使它不是 0。它是未知的。

我发现的另一个问题是我不知道如何指定标签来显示我之前所说的那些间隔。它只是向我显示每个标签，因此它不可读。

我正在寻找另一种宝石、gchartrb 的解决方案或想法以不同方式生成数据并使其易于理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:15:13.470

也许你应该检查这个链接： [http](http://railscasts.com/episodes/223-charts) ://railscasts.com/episodes/223-charts 。

这里也是很好的图表库： [Flotr 2](https://github.com/HumbleSoftware/Flotr2)和 gem for it [fltr2-rails](https://github.com/littlebtc/flotr2-rails)。

对于 Flotr 2，值得检查轴上带有时间/日期标签的[示例。](http://www.humblesoftware.com/flotr2/#!basic-time)

# python - 漂亮的汤从标签中获取标签（不是可导航字符串）的孩子

> ID：13255308
> 
> 赞同：13
> 
> 时间：2012-11-06T16:29:24.480
> 
> 标签：python, beautifulsoup, tree-traversal

美丽的汤文档提供属性 .contents 和 .children 来访问给定标签（分别为列表和可迭代）的子级，并包括可导航字符串和标签。我只想要标签类型的孩子。

我目前正在使用列表理解来完成此操作：

```
rows=[x for x in table.tbody.children if type(x)==bs4.element.Tag] 
```

但我想知道是否有更好/更pythonic/内置的方式来获取标签孩子。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T15:08:30.877

感谢[JFSebastian](https://stackoverflow.com/users/4279/j-f-sebastian)，以下将起作用：

```
rows=table.tbody.find_all(True, recursive=False) 
```

此处的文档：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/#true](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#true)

就我而言，我需要表格中的实际行，所以我最终使用了以下内容，这更精确，我认为更具可读性：

```
rows=table.tbody.find_all('tr') 
```

同样，文档：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigating-using-tag-names](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigating-using-tag-names)

我相信这是比遍历标签的所有子代更好的方法。

使用以下输入：

```
<table cellspacing="0" cellpadding="0">
  <thead>
    <tr class="title-row">
      <th class="title" colspan="100">
        <div style="position:relative;">
          President
            <span class="pct-rpt">
                99% reporting
            </span>
        </div>
      </th>
    </tr>
    <tr class="header-row">
        <th class="photo first">

        </th>
        <th class="candidate ">
          Candidate
        </th>
        <th class="party ">
          Party
        </th>
        <th class="votes ">
          Votes
        </th>
        <th class="pct ">
          Pct.
        </th>
        <th class="change ">
          Change from &lsquo;08
        </th>
        <th class="evotes last">
          Electoral Votes
        </th>
    </tr>
  </thead>
  <tbody>
      <tr class="">
          <td class="photo first">
            <div class="photo_wrap"><img alt="P-barack-obama" height="48" src="http://i1.nyt.com/projects/assets/election_2012/images/candidate_photos/election_night/p-barack-obama.jpg?1352320690" width="68" /></div>
          </td>
          <td class="candidate ">
            <div class="winner dem"><img alt="Hp-checkmark@2x" height="9" src="http://i1.nyt.com/projects/assets/election_2012/images/swatches/hp-checkmark@2x.png?1352320690" width="10" />Barack Obama</div>
          </td>
          <td class="party ">
            Dem.
          </td>
          <td class="votes ">
            2,916,811
          </td>
          <td class="pct ">
            57.3%
          </td>
          <td class="change ">
            -4.6%
          </td>
          <td class="evotes last">
            20
          </td>
      </tr>
      <tr class="">
          <td class="photo first">

          </td>
          <td class="candidate ">
            <div class="not-winner">Mitt Romney</div>
          </td>
          <td class="party ">
            Rep.
          </td>
          <td class="votes ">
            2,090,116
          </td>
          <td class="pct ">
            41.1%
          </td>
          <td class="change ">
            +4.3%
          </td>
          <td class="evotes last">
            0
          </td>
      </tr>
      <tr class="">
          <td class="photo first">

          </td>
          <td class="candidate ">
            <div class="not-winner">Gary Johnson</div>
          </td>
          <td class="party ">
            Lib.
          </td>
          <td class="votes ">
            54,798
          </td>
          <td class="pct ">
            1.1%
          </td>
          <td class="change ">
            &ndash;
          </td>
          <td class="evotes last">
            0
          </td>
      </tr>
      <tr class="last-row">
          <td class="photo first">

          </td>
          <td class="candidate ">
            div class="not-winner">Jill Stein</div>
          </td>
          <td class="party ">
            Green
          </td>
          <td class="votes ">
            29,336
          </td>
          <td class="pct ">
            0.6%
          </td>
          <td class="change ">
            &ndash;
          </td>
          <td class="evotes last">
            0
          </td>
      </tr>
      <tr>
        <td class="footer" colspan="100">
          <a href="/2012/results/president">President Map</a> &nbsp;|&nbsp;
          <a href="/2012/results/president/big-board">President Big Board</a>&nbsp;|&nbsp;
          <a href="/2012/results/president/exit-polls?state=il">Exit Polls</a>
        </td>
      </tr>
  </tbody>
</table> 
```

# html - padding 增加 div 的宽度和高度

> ID：13255311
> 
> 赞同：4
> 
> 时间：2012-11-06T16:29:27.167
> 
> 标签：html, css

如何修改这些 div，以便在更改它们的填充时，它们的高度和宽度不会扩大？我试图实施

```
.outer, .inner {
    display: block;
}

.outer {
    /* specify fixed width */
    width: 300px;
    padding: 0;
}

.inner {
    /* specify padding, can be changed while remaining fixed width of .outer */
    padding: 5px;
} 
```

从[这里](https://stackoverflow.com/a/2225620/1252748)

通过给父 div`fixed_width`和，但是当我对or`relative_container` `width:700px;height:100px; padding:0px;`应用填充时，div 扩展为覆盖。谢谢！`.content``.obscure``.extra_margins below`

[http://jsfiddle.net/loren_hibbard/ZmJ9R/](http://jsfiddle.net/loren_hibbard/ZmJ9R/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T16:34:05.200

您可以使用 CSS3`box-sizing`属性来执行此操作：

```
box-sizing: border-box; 
```

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

在 IE8+ 中受支持，但某些浏览器可能需要前缀：

[http://caniuse.com/css3-boxsizing](http://caniuse.com/css3-boxsizing)

# rest - REST和相关资源的自动创建

> ID：13255312
> 
> 赞同：8
> 
> 时间：2012-11-06T16:29:36.807
> 
> 标签：rest

我正在学习 REST 原则，但我对使用复杂资源有疑问。

假设我们有两个资源，Foo 和 Bar，对于每个 Foo，我必须有一个 Bar。我想使用我的 API 让开发人员清楚地了解 bar 从 foo 的依赖关系，所以：

1) 我将使用从 Foo 实例到 Bar 实例的链接，反之亦然

```
GET /foos/1
Foo: {
    'name': 'Foo instance',
    'rel_bar': '/foos/1/bar'
}

GET /foos/1/bar
Bar: {
    'name': 'Bar instance',
    'rel_foo': '/foos/1',
} 
```

2) 我将使用一个 URI 模板来显示从 Foo 到 Bar 的依赖关系（这仅适用于人类，因为 URI 对于 REST 应该是不透明的）。

```
/foos               --> Foo resource collection
/foos/{foo_id}      --> An instance of a Foo resource
/foos/{foo_id}/bar  --> The bar instance associated to the foo instance foo_id 
```

所以再一次，没有相应的 foo 就没有 bar。

现在我想创建一个 Foo 资源。

```
POST /foos
{
   'name': 'Yet again another foo instance',
} 
```

并让服务器创建对应的 Bar 默认（或空）资源，这样下一次读取就会给出：

```
GET /foos/2
{
   'name': 'Yet again another foo instance',
   'rel_bar': '/foos/2/bar'
} 
```

和...

```
GET /foos/2/bar
{
   'name': null,  --> Let's say that null is the default value.
   'rel_foo': '/foos/2/bar'
} 
```

'RESTfully 正确' 这样做吗？我的担忧是：

1.  让服务器自动创建相关资源是否正确？或者我应该分两步拆分 Bar 和 Foo 的创建？
2.  POST 一个表示（只是“name”属性）并返回一个不同的表示（“name”和分配的“rel_foo”）是正确的。

我个人的想法是，既然 Bar 没有 Foo 就没有意义，可能是的，我应该让服务器来创建它。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:36:50.543

我不确定您所描述的是否是独立资源 Foo 和 Bar。你说：

> 对于每个 Foo 我必须有一个 Bar

连同您描述的“JSON”和 URI，我将其称为**子资源**关系：对于每个 Foo，必须有一个且只有一个 Bar，该 Bar 不能存在于该 Foo 之外。

如果这种解释是正确的，我会保留您的 URI，但将表示更改为：

**`GET /foos/1`**

```
{
    'name': 'Foo instance',
    'Bar': {
        'name': 'Bar instance'
    }
} 
```

请注意，我没有包括不必要的`rel_bar`和。`rel_bar`

您*只能* `GET`使用 Bar 子资源：

**`GET /foos/1/bar`**

```
{
    'name': 'Bar instance'
} 
```

请注意，在此表示中，没有返回父 Foo 的链接元素。这样的链接是不必要的，因为 URI 使资源/子资源关系清晰。

**你的问题1：**

> 让服务器自动创建相关资源是否正确？或者我应该分两步拆分 Bar 和 Foo 的创建？

是否在某个后端实际*创建*了 bar 子资源并不重要。重要的是它作为 Foo 表示的成员是可访问的。仅`POST`Foo 表示后， Bar 子资源的表示将具有您描述的默认值。它可以在以后被覆盖：

**`PUT /foos/1/bar`**

```
{
    'name': 'A name for this Bar'
} 
```

**你的问题2：**

> POST 一个表示（只是“name”属性）并返回一个不同的表示（“name”和分配的“rel_foo”）是正确的。

对，那是正确的。客户可以`POST`或`PUT`不完整的表示。重要的是始终以一致的方式处理这种不完整的表示。我发现为每个新的 Foo 创建一个 Bar 子资源是完全可以接受的。

# c++ - CHOOSECOLOR 未声明的标识符

> ID：13255313
> 
> 赞同：0
> 
> 时间：2012-11-06T16:29:47.353
> 
> 标签：c++, visual-studio-2010, winapi, visual-c++

我正在创建一个 win32 项目，出于某种奇怪的原因，Visual Studio 无法识别 CHOOSECOLOR 函数。我不断收到“选择颜色”：未声明的标识符“错误。我该怎么办？？

我当前导致错误的代码。

```
void cColor(HWND hwnd, int select)
{
CHOOSECOLOR cc; //common dialog box structure

} 
```

任何有关我如何解决此问题的帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:41:15.303

`CHOOSECOLOR`结构在 中定义，`Commdlg.h`包含时会自动包含`Windows.h`。您可以通过查看页面底部的“标题”来在[Microsoft 的文档中找到它。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646830%28v=vs.85%29.aspx)

经常`Windows.h`会被包含在`stdafx.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T07:56:55.527

我知道这是非常古老的。但是我遇到了同样的问题并为未来的寻求者找到了解决方案：确保你不

```
#define WIN32_LEAN_AND_MEAN 
```

它使得它不包括很少使用的东西，包括 CHOOSECOLOR。

# android - ListActivity 项目唯一标识符

> ID：13255314
> 
> 赞同：1
> 
> 时间：2012-11-06T16:29:49.333
> 
> 标签：android, android-activity

我有一个`ListActivity`点击时，我得到点击的显示文本。有没有更好的方法，比如使用唯一标识符？

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="adjustments">
        <item>Item 1</item>
        <item>Item 2</item>
        <item>Item 3</item>
    </string-array>
</resources> 
```

然后我将其作为代码：

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    String[] adjustments = getResources().getStringArray(R.array.adjustments);
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, adjustments));
    getListView().setTextFilterEnabled(true);
}

protected void onListItemClick(ListView l, View v, int position, long id){
    super.onListItemClick(l, v, position, id);
    Intent intent = new Intent();
    Bundle bundle = new Bundle();
    try{
        bundle.putString("adjustment", l.getItemAtPosition(position).toString());
        intent.putExtras(bundle);
        setResult(RESULT_OK, intent);
    }catch(Exception e){
        setResult(RESULT_CANCELED, intent);
    }
    finish();
} 
```

然后我想做的是给每个项目一个唯一的标识符，而不是让它的文本来决定下一步做什么。有可能吗？每个选项在使用反射单击后都会调用相同的方法，因此如果我可以调用该方法一次而不是执行 100 条 if/else 语句来检查单击了什么，那将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:34:18.797

你可以使用这个位置。这些项目每次都以相同的顺序排列，因此您可以根据传入的位置参数决定要做什么`onListItemClick`。

您的另一个选择是定义一个自定义适配器，为每个适配器提供一个唯一的 id，但如果列表没有太大变化，该位置可能同样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:04:08.913

我所做的是使用返回文本来调用使用反射的类。因此，如果返回文本是，`Adjust RGB`我将删除空格并`AdjustRGB`基于实现启动类和运行函数。

# python - 并行 Python - RuntimeError：通信管道读取错误

> ID：13255315
> 
> 赞同：5
> 
> 时间：2012-11-06T16:29:54.290
> 
> 标签：python, py2exe, parallel-python

我正在使用并行 python 使用名为 OrcFxAPI 的模块运行多个动态模拟。如果该程序在我的机器上作为 python 程序运行，则该程序可以完美运行，但是如果我使用 py2exe 将其转换为 exe 文件然后运行，则会出现以下错误：

```
Traceback (most recent call last):
    File "Analysis.pyc", Line 500, in multiprocessor
    File "pp.pyc", Line 342, in __init__
    File "pp.pyc", Line 506, in set_ncpus
    File "pp.pyc", Line 140, in __init__
    File "pp.pyc", Line 152, in start
    File "pptransport.pyc", Line 140, in receive
RuntimeError: Communication pipe read error 
```

它在我的程序中的这一行失败：

```
job_server = pp.Server(ppservers=ppservers) 
```

但我认为这可能与提交作业时用于导入 OrcFxAPI 模块的路径有关：

```
job = job_server.submit(max_seastate, (gui_vars, case_list, case, line_info, output_vars), (), ("OrcFxAPI",), callback=finished, callbackargs=(case_no, no_of_cases,)) 
```

# tortoisesvn - Sublime Text 2 side bar SVN status

> ID：13255324
> 
> 赞同：4
> 
> 时间：2012-11-06T16:30:29.843
> 
> 标签：tortoisesvn, sublimetext2

I am new to the Sublime Text 2 IDE.

I have installed the TortoiseSVN package, but was wondering if there is a way to show a file's status (needing commit/up-to-date) in the file list?

I used to get that with eclipse and e-texteditor.

Have looked literally everywhere for it!

Thanks in advance. James

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:31:02.563

In the sidebar you can't get the file status like eclipse. You have to run command to check the status . Then it will show the status in a text file

# objective-c - collectionViewLayout sizeForItemAtIndexPath 使视图看起来空白

> ID：13255337
> 
> 赞同：1
> 
> 时间：2012-11-06T16:31:01.330
> 
> 标签：objective-c

我正在尝试实现一个 CollectionViewController，其中图像大小显示正确。但是当我实现方法“collectionViewLayout sizeForItemAtIndexPath”时，没有显示任何图像。有人知道为什么吗？这是我的 CollectionViewController 代码：

```
#import "PhotosViewController1.h"

@interface PhotosViewController1 ()

@end

@implementation PhotosViewController1

- (void)viewDidLoad
{

    [super viewDidLoad];
    _carImages = [@[@"Wild-Love.jpg",
                  @"d919004663f99c934b20c1bd46fcad3e.jpg",

                  @"164_v-viergalerie.jpg"] mutableCopy];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark -
#pragma mark UICollectionViewDataSource

-(NSInteger)numberOfSectionsInCollectionView:
(UICollectionView *)collectionView
{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView
    numberOfItemsInSection:(NSInteger)section
{
    return _carImages.count;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                 cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    PhotosCell *myCell = [collectionView
                                    dequeueReusableCellWithReuseIdentifier:@"MyCell"
                                    forIndexPath:indexPath];

    UIImage *image;
    int row = [indexPath row];

    image = [UIImage imageNamed:_carImages[row]];

    myCell.imageView.image = image;

    return myCell;
}

#pragma mark -
#pragma mark UICollectionViewFlowLayoutDelegate

-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UIImage *image;
    int row = [indexPath row];

    image = [UIImage imageNamed:_carImages[row]];

    return image.size;
}

@end 
```

# autohotkey - 仅编译为一个独立的 exe 时是否可以保存设置和加载资源？

> ID：13255339
> 
> 赞同：3
> 
> 时间：2012-11-06T16:31:03.727
> 
> 标签：autohotkey

如果我编译一个脚本以作为独立的 exe 分发，有什么方法可以将设置存储在 exe 本身中，以节省写入外部文件的时间？这样做的主要动机是不必开发安装过程。我只需要存储几个字节。

还有，图片等资源可以编译成exe吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-25T13:50:20.903

使用备用数据流会打开一罐蠕虫，所以我不会那样做。将配置数据写回 exe 本身将不起作用，因为文件在执行期间被锁定以进行写访问。

我通常做的是`%A_AppData%\%A_ScriptName%\%A_ScriptName%.ini` 在脚本启动时存储配置数据，我使用 IniRead 如果找不到密钥，它也会提供默认值 - 这是脚本第一次执行的情况。OnExit 子例程/函数中的补充 IniWrite 将在必要时创建 ini 文件。这样就不需要安装，并且配置存储在适当的、熟悉的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:08:50.123

这个`autohotkey`问题之前论坛已经讨论过了。在这种情况下，用户不想要额外的文件——句号。

方法是使用文件系统来保存备用数据。不幸的是，我找不到帖子。

更简单的方法是使用`fileinstall`命令。编译脚本时，外部文件存储在 exe 中。

当脚本执行与 exe 相同的命令时，文件将复制到与正在运行的脚本相同的目录中。这是一个简单而有效的“安装”。通过对配置文件进行一些测试，`fileinstall`可以跳过该命令。

跳过`fileinstall`可能允许在“安装”后对配置进行更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T22:26:33.757

我没有尝试在编译的 exe 文件中保存设置，但我已经包含了资源。我不确定您使用的是哪个版本的 AHK 或如何编译，但我可以右键单击我的脚本进行编译。有一个使用选项编译的选项，您可以在编译的 exe 中包含资源。[使用选项编译](http://i.stack.imgur.com/bUPdG.png)

# xcode - Xcode 引用旧的/已删除的框架，导致多个接口声明

> ID：13255342
> 
> 赞同：3
> 
> 时间：2012-11-06T16:31:25.040
> 
> 标签：xcode, frameworks, reference, duplicates

我在尝试构建时遇到接口重新声明错误，因为 xcode 一直在引用我已经从项目中删除的这些旧框架和标头。我已经筛选了我的构建阶段和构建设置，似乎没有任何东西指向这些文件。

有趣的是，当 xcode 向我显示我的错误以及应该重新声明接口的代码行时，当我单击“在项目导航器中显示”时，它不会显示任何特定文件。但是，如果我要求它“在 finder 中显示”，它会立即在我的实际项目目录（而不是 xcode 项目目录）中找到该文件。所以这意味着 XCode 正在拾取我留在项目目录中的不需要的框架。我不希望 XCode 这样做。我该如何清理这个？我试过清理，重新启动 xcode 并重新启动。

我查看了另一个具有相同问题的 SO 讨论，但用户没有给出正确的解决方案（http://stackoverflow.com/questions/11759444/xcode-referencing-old-framework）。如何禁用自动框架搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:17:25.613

以防万一：你检查过 FRAMEWORK_SEARCH_PATHS 吗？（项目构建设置）。我遇到了类似的情况，发现那里引用了我删除的旧路径，并且成功了。

*添加：当我将我的 Xcode-Project 移动到另一个位置时，编译器抱怨“库搜索路径”指向旧位置。请参阅 => 构建设置，“库搜索路径”。*

# android - 如何覆盖键盘上的按下？

> ID：13255344
> 
> 赞同：0
> 
> 时间：2012-11-06T16:31:26.537
> 
> 标签：android

> **可能重复：**
> [用 android 捕获按键](https://stackoverflow.com/questions/2261914/catch-keypress-with-android)

当用户按下 Enter 按钮键盘时，我想执行一些操作。我怎样才能得到这个动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:47:20.473

使用以下代码：

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_ENTER:
         /* This is a sample for handling the Enter button */
      return true;
    }
    return false;
} 
```

并实施`YourView.setOnKeyListener(this);`

**这是直接取自** [这篇文章。](https://stackoverflow.com/questions/2261914/catch-keypress-with-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:51:42.537

您也可以使用 InputFilter：

```
InputFilter filter = new InputFilter()
{
    public CharSequence filter(CharSequence source, int start, int end,
    Spanned dest, int dstart, int dend)
    {
        for (int i = start; i &lt; end; i++)
        {
            if (source.charAt(i) == '\n')
            {
                // Add whatever you want;
            }
        }
        return null;
    }
}; 
```

# javascript - 带有Phonegap的离线自定义平铺谷歌地图？

> ID：13255348
> 
> 赞同：11
> 
> 时间：2012-11-06T16:31:38.337
> 
> 标签：javascript, ios, google-maps, cordova

我有一个为谷歌地图定制的瓷砖。在线工作非常好，但是当我关闭手机上的数据时，它只显示加载图标，因为它无法与谷歌通信。

由于我有自己的瓷砖，是否可以通过 phonegap 离线使用谷歌地图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:01:10.740

我不相信可以离线使用 Google 的 API。但是，如果您有自己的图块，并将它们嵌入到您的应用程序存档中，则可以使用 Leaflet 来呈现本地图块。 [http://leafletjs.com/](http://leafletjs.com/) 如果您的自定义切片是远程的（托管在服务器上），那么您仍然无法在离线场景中使用它们。

# java - Java Hangman - 用字符替换下划线

> ID：13255349
> 
> 赞同：-3
> 
> 时间：2012-11-06T16:31:42.397
> 
> 标签：java, arrays, char, stringbuilder

所以我正在为我的 java 类创建一个刽子手游戏，但是我在用字母替换单词中的下划线时遇到了麻烦。我让它用下划线打印出这个词，比如：

```
 for(int i = 0; i < GuessWord.length(); i++) { 
                if (guesses[GuessWord.charAt(i) - 'a']) { 
                    mainword.append(words[i].charAt(i));
                }
                else {
                    mainword.append("_");

                }
                mainword.append(" ");
            } 
```

其余的是我的代码的其余部分。我应该提到我正在使用 Netbeans IDE 7.2 并且我使用 JLayeredPane 来显示所有内容，而不是 System.out.print。谢谢！

```
 import java.util.Random;
    import java.util.Scanner;
    import javax.swing.JOptionPane;

    public class MainFrame extends javax.swing.JFrame {

        public MainFrame() {
            initComponents();
        }

    //declare variables                      
    static String SecretWord = "";
    static String Letters = "";
    double Result = 0;
    String SetMain = null;
    StringBuilder mainword = new StringBuilder();
    StringBuilder gletters = new StringBuilder();
    boolean[] guesses = new boolean[26];
    String[] words = {"technology", "computer", "camera", "graphic design", "digital", "media", "technician", "photography", "troubleshoot", "pixels", "application", "download"};
    Random r = new Random();
    int randvalue = r.nextInt(11);
    String GuessWord = words[randvalue];

        private void GoButtonActionPerformed(java.awt.event.ActionEvent evt) {                                         
    mainword.append(SecretWord);
    //make word in underscore form
        for(int i = 0; i < GuessWord.length(); i++) { 
                if (guesses[GuessWord.charAt(i) - 'a']) { 
                    mainword.append(words[i].charAt(i));
                }
                else {
                    mainword.append("_");

                }
                mainword.append(" ");
            }

   //put in label
   SetMain = mainword.toString();
   WordLabel.setText(SetMain);
   GuessButton.setEnabled(true);
   GoButton.setEnabled(false);
}                           

private void GuessButtonActionPerformed(java.awt.event.ActionEvent evt) {                                      
    //declare variables      
    String strGuess = GuessText.getText();
    String SetMain = null;
    String GuessedLetters = null;
    Result = 1;//(int)(Math.random() * 11) + 1;
    int errors = 0;
    int i = 0;
    char guess2 = strGuess.charAt(i);
    gletters.append(Letters);

    //*******MAJOR PROBLEM AREA FOCUS HERE*******
    do{
        //replace underscore with guessed letter
        for(i = 0; i < GuessWord.length(); i++) { 
                if (GuessWord.charAt(i) == guess2) { 
                   mainword.replace(0,i,strGuess.toUpperCase()); 
                }
                else {
                    mainword.append("_");

                }
                mainword.append(" ");
            }

    //put in labels
    SetMain = mainword.toString();
    GuessedLetters = gletters.toString();
    WordLabel.setText(SetMain);
    GuessedLabel.setText(GuessedLetters);
    GuessText.setText(null);
    GuessText.requestFocusInWindow();
    }//end of do

while(SetMain == null);
if (SetMain.equalsIgnoreCase(GuessWord)){
    //show winning message to user and reset game
    JOptionPane.showMessageDialog(null, "Congrats!");
    GuessButton.setEnabled(false);
    GoButton.setEnabled(true);
    WordLabel.setText(null);
    GuessedLabel.setText(null);
    WinsLabel.setText("1");
}
//if too many errors show lost message
else if (errors >= 5){
    JOptionPane.showMessageDialog(null, "You Lost!");
    GuessButton.setEnabled(false);
    GoButton.setEnabled(true);
    WordLabel.setText(null);
    GuessedLabel.setText(null);
    LossesLabel.setText("1");
}
    }//end of 1GAME
} 
```

任何帮助都会很棒！请不要太复杂。我还在上面的代码中标记了我的主要问题区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:39:05.297

我会尝试一种更简单的方法，您可以在其中保存一组字符，您可以根据输入进行更改。这是对该想法的总体描述：

```
char guess[] = {'_', '_', '_', '_', '_', ' ', '_', '_', '_', '_', '_'};
// It's "Hello World" :)
if(input == answer.getCharAt(inputIndex))
    guess[inputIndex] = answer.getCharAt(inputIndex); 
    //replace the underscore with the correct character
else
    //Add it to a list of used characters, ignore it or do as you've been asked to 
```

`guess`在您的情况下，通过调用`answer.toCharArray()`where`answer`是具有正确单词的字符串来创建此数组。您需要使用下划线替换该字符串中的所有字符`replaceAll("[A-Za-z0-9]", "_")`（请记住也要保留原始答案）。第一个参数是一个正则表达式，意思是“从 A 到 Z、从 a 到 z 和从 0 到 9 的所有字符组”，你需要检查一些[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)来习惯它们，相信我，您迟早会使用它们。

然后，您只需在每次正确完成猜测时替换`guess[i]`为`answer.getCharAt(i)`，避免逐个字符构建字符串的繁琐工作，这可能很棘手。

这是对不同方法的简要描述，因为它是一个分配，您可以决定是否要尝试它，一般实施取决于您。我只会描述一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:12:15.700

这是一种不同的方法。我们不会尝试用占位符替换未猜到的字母。在这里，我们记住到目前为止（在一组中）已经猜到的所有字母，并为每一轮重新创建秘密单词的“视图”。演示代码包括一个愚蠢的玩家，它只是随机猜测字母表中的所有字母。

```
public static void main(final String[] args) {

    String secretWord = "fibonacci";
    Set<Character> guessedLetters = new HashSet<>();

    // (1) create some test input (all letters randomized)
    List<Character> chars = new ArrayList<>();
    for (char c = 'a'; c <= 'z'; c++) {
        chars.add(c);
    }
    Collections.shuffle(chars);

    // (2) Let's guess
    for (char guessedLetter : chars) {
        // (3) memorize all letters that have been guessed
        guessedLetters.add(guessedLetter);

        // (4) print the display version of the secret word
        boolean guessedCompletely = true;
        System.out.print("My guess: [" + guessedLetter + "] -> ");
        for (char letterOfSecretWord : secretWord.toCharArray()) {
            if (guessedLetters.contains(letterOfSecretWord)) {
                // (4a) - we already guessed this letter
                System.out.print(letterOfSecretWord);
            } else {
                // (4b) - we haven't guessed it so far
                guessedCompletely = false;
                System.out.print('_');
            }
        }
        System.out.println();
        // (5) check, if the game is won
        if (guessedCompletely) {
            System.out.println("Yeah!");
            break;
        }
    }
} 
```

# php - 在 Symfony2 中创建一个假用户用于测试目的

> ID：13255350
> 
> 赞同：8
> 
> 时间：2012-11-06T16:31:56.510
> 
> 标签：php, testing, symfony, phpunit

我对 PHP 测试有些陌生。我已经使用 Cucumber、RSpec、Capybara 和 Factory Girl 对 Rails 进行了相当多的测试，但我几乎没有使用 PHP 进行任何测试。

我将尽可能以最笼统的方式问一个关于我当前挑战的问题，因为我已经走了几条特定的道路，只是遇到了挫折。

**我想编写一个用于登录用户的功能测试。创建我需要的测试用户对象以尝试登录的好方法是什么？**

更一般地说，在 Symfony2 中创建测试对象的事实标准是什么？夹具？某种工厂？

在 Ruby 中，我会使用 Factory Girl，因为它可以让您以干净、干燥的方式处理任何对象的依赖关系。在 Phactory 中的 PHP 中似乎有一个 Factory Girl 等价物，但不幸的是，该工具似乎没有被广泛使用并且不再维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:47:54.710

我只是自己编写[测试数据构建器](http://nat.truemesh.com/archives/000714.html)，因为无论如何几乎没有样板。顺便说一句，Factory Girl 就是这种模式的实现。

[您可以在“ Growing Object-Oriented Software, Guided by Tests](https://rads.stackoverflow.com/amzn/click/com/0321503627) ”一书中找到关于该模式和许多其他有用内容的很好的讨论。

我建议不要使用固定装置，因为它们是应用程序范围的。每个测试都更好地只准备它自己需要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:20:03.093

[测试环境配置](http://symfony.com/doc/current/book/testing.html#testing-configuration)上的[装置](http://symfony.com/doc/2.0/bundles/DoctrineFixturesBundle/index.html) 可能是要走的路！

关于[固定装置是应用程序范围的评论](https://stackoverflow.com/a/13255597/807239)，我不同意。

如果您进行单元测试，那可能会很有意义。

然而，[功能测试应该是应用程序范围的。](http://symfony.com/doc/current/book/testing.html#functional-tests)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:02:29.473

我使用夹具进行功能测试，但我不同意它们仅适用于应用程序。我在捆绑范围内使用它，在捆绑中的适当目录中定义。在测试设置中，我从正确的目录运行控制台固定装置：加载方法，可能不是最佳解决方案，但它对我很有用。如果有人有更好的解决方案，我会很乐意阅读它:)

# kml - 在 Google 地球插件/KML 中组织地标

> ID：13255352
> 
> 赞同：3
> 
> 时间：2012-11-06T16:31:59.613
> 
> 标签：kml, google-earth, google-earth-plugin

我正在寻找一些关于是否/如何更好地创建我的 KML 的见解，以便在通过围绕 Google 地球插件开发的自定义应用程序加载时使我的数据更具可读性。

我的限制是：

1.  我无法对自定义应用程序或插件做任何事情，我只能提供 KML 文件并利用 Google 地球插件内置的任何功能。
2.  您选择要显示的数据的侧栏不会像我在 Google 地球中看到的那样将所选 KML 的文件夹列为子菜单。

我的数据看起来像：

1.  数百个数据点有时非常靠近，我目前将其显示为地标，没有设置名称（在地图上太吵了）。我在描述气泡/气球中提供了有关地标的更多详细信息。
2.  地标经常相互关联（即可能有 4 个地标代表不同的组（例如咖啡店））。

到目前为止我发现了什么：

1.  我无法对引脚进行分组，因为我在无法访问 JavaScript API/无法进行一些前端编程的情况下放大和缩小（即无法在 KML 中指定引脚应基于缩放进行分组级别。我已经注意到缩放级别的可见性设置，我认为这些设置无法完成我想要做的事情）。
2.  单击地标时，无法识别同一组（即所有咖啡店）中的其他地标，例如通过更改其样式（再次注意，要为我工作，这必须是本机功能，其行为可以在 KML 中预先指定）。我希望该插件可以为文件夹提供一些默认功能，但我找不到任何东西。

我的问题：

1.  我的上述假设是否正确？
2.  KML 规范的某些方面以及它是如何由 google-earth 显示的，考虑到我的数据的性质，这可能是我花更多时间理解的好地方？

任何建议或见解都将受到欢迎。

编辑：还考虑创建 KML 游览以调整可见性/识别相关地标，但看不到我如何从给定地标开始/停止游览（例如，通过单击描述气球中的链接？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:27:08.580

首先，问你一个问题。

您是否希望在移动设备上加载您的“应用程序”？还是您只是想在普通计算机上做某事？

我问是因为您提到了“应用程序”-但在这一行中

> 我无法对自定义应用程序或插件做任何事情，我只能提供 KML 文件并利用 Google 地球插件内置的任何功能。

移动设备（目前）还不支持Google Earth **PLUGIN**，所以如果你能利用它，你一定是在谈论普通的计算机场景。所以要么是网页，要么是嵌入在另一个程序中的网页。

至于

> 我无法对引脚进行分组，因为我在无法访问 JavaScript API/无法进行一些前端编程的情况下放大和缩小（即无法在 KML 中指定引脚应基于缩放进行分组级别。我已经注意到缩放级别的可见性设置，我认为这些设置无法完成我想要做的事情）。

您是否考虑过使用[Regions](https://developers.google.com/kml/documentation/regions)？有了它们，您可以控制地标在什么“缩放”（即什么 POV）下变得可见。

至于

> 单击地标时，无法识别同一组（即所有咖啡店）中的其他地标，例如通过更改其样式（再次注意，要为我工作，这必须是本机功能，其行为可以在 KML 中预先指定）。我希望该插件可以为文件夹提供一些默认功能，但我找不到任何东西。

这取决于您是否真的在使用插件（以及 JS）。使用直接的 KML，我认为没有任何可能。但是，如果您使用的是插件（和一些 JS），您有许多选项，具体取决于您设置 .kml 的方式。

1.  您可以“遍历”您的 kml 文件并找到所有具有相同的地标`<style>`
2.  您可以通过 - 然后使用像这样的访问器来分配所有地[标](https://developers.google.com/earth/documentation/accessors)ID`var placemark = ge.getElementById('unique_id');`

然而，听起来你没有使用 JS，所以我可能在浪费时间。

使用游览也是如此，如果您正在使用插件并且如果您愿意做一些 JS 编码，那么是的，您可以使用游览来处理各种事情。

但是，如果您谈论的是移动设备应用程序，那么什么都不可能（地区除外），我建议您编辑您的问题以删除“google-earth-plugin”标签。

# internet-explorer - 使用 IE 开发人员工具登录时，如何确定返回 URL 是否通过表单发布传回？

> ID：13255359
> 
> 赞同：0
> 
> 时间：2012-11-06T16:32:30.937
> 
> 标签：internet-explorer, url, authentication, return, form-submit

我正在一个有几个安全页面的网站上工作。当我单击任何链接访问这些页面时，IM 会自动重定向到登录页面，这是正常行为。

然而，在登录时，我并没有被引导到我请求或点击的原始页面，而是被带回了主页。

我想知道在登录时是否通过表单帖子传回了返回 URL。

如何使用 IE 开发人员工具或 firebug 找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:46:41.920

据我所知，您无法在 IE 开发人员工具栏中记录请求/响应。但是有强大的工具，如[Fiddler Web Debugger](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)（我自己还没有尝试过）为此目的。

在 Firebug 中，您可以切换到*Net*选项卡并访问数据传输相关信息。如果展开 POST 请求，您会发现一个选项卡显示随请求发布的数据。*在 Google Chrome 中，您将获得与“网络*”选项卡上的内置开发人员工具相同的功能。

如果您正在调试加密 (https) 页面，使用 Firebug 是最简单的，因为 Fiddler 和 Wireshark 必须经过特殊配置才能允许这样做。

# php - asp.net 无法将 index.php 识别为索引页面

> ID：13255360
> 
> 赞同：1
> 
> 时间：2012-11-06T16:32:39.527
> 
> 标签：php, asp.net

该网站使用 asp.net 框架。

问题是我有一个`index.php`作为索引页的文件夹。它仅在我将路径指定为 时加载`/folder/index.php`，但如果我仅使用`/folder`. （`/folder`如果`index.html`文件夹中有一个则有效）

如何解决？我对 asp.net 一点经验都没有，如果可能的话，我不想弄乱任何现有的配置文件。

注意：PHP 页面可以正常加载。问题是 asp.net 没有将 index.php 页面识别为索引页面。

解决方案：我按照 EdSF 的建议在该文件夹中创建了一个 web.config 文件，其中包含以下内容

```
<configuration>
   <system.webServer>
    <defaultDocument>
        <files>
            <add value="index.php" />
        </files>
    </defaultDocument>
   </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:52:44.173

您需要将 'index.php' 设置为 IIS 中的默认内容页面。如何执行此操作可能会略有不同，具体取决于您使用的 IIS 版本。

在 IIS6 中，您转到网站属性（通过右键单击上下文菜单），转到“文档”选项卡并将它们添加到那里。

正如你们中的一些人在评论中所问的那样进行编辑——下面是微软关于通过 web.config 将 index.php 设置为默认内容页面的指南：

[如何使用 IIS7 web.config 添加默认文档](http://blogs.iis.net/bills/archive/2008/03/22/how-to-add-a-default-document-with-iis7-web-config.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:40:09.830

看看这个[线程](https://stackoverflow.com/questions/4761769/can-php-and-asp-net-run-together-within-the-same-web-site-in-iis-7-5)是否对你有帮助。我从来没有尝试过在asp下运行php。我要么做要么。但显然这是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:40:32.373

```
can you do a javascript redirect from index.html 

<script>
window.document.location = "index.php";
</script> 
```

# android - 为可扩展列表视图设置展开图标的垂直位置

> ID：13255361
> 
> 赞同：0
> 
> 时间：2012-11-06T16:32:39.580
> 
> 标签：android, android-layout, expandablelistview

我正在尝试在可展开列表视图中编辑展开图标的位置。我使用在另一个讨论中找到的以下代码设置它的水平位置，但没有看到改变它的垂直位置的方法......

```
Display newDisplay = getWindowManager().getDefaultDisplay(); 
int width = newDisplay.getWidth();
newListView.setIndicatorBounds(width-50, width); 
```

# apache - 搜索页面的 mod_rewrite

> ID：13255363
> 
> 赞同：0
> 
> 时间：2012-11-06T16:32:44.847
> 
> 标签：apache, mod-rewrite

我已经通过 stackoverflow 进行了搜索，但找不到解决此问题的方法。

我想匹配这样的搜索字符串

```
localhost/Care/Search?name=pane&title=mrs. 
```

我想获取名称和标题查询。

我如何从 mod_rewrite 执行此操作。

谢谢

# svn - 创建标签时修改一行文本

> ID：13255366
> 
> 赞同：0
> 
> 时间：2012-11-06T16:32:54.897
> 
> 标签：svn, batch-file, tortoisesvn

当我创建一个分支时，我想要一个挂钩脚本来更改文本文件的第一行，以记录修订号。我想这样做的原因是因为这个文本文件与其他脚本接口，然后从存储库中提取其他文件的正确修订版。

我觉得一定有一种方法可以编写一个预提交钩子脚本，如果你正在提交某个路径，它会更改一行文本，预提交。

```
Set "SVNHEAD=SVN HEAD"
set REPOS=%1%
Set "SVNREV=%REVISION%" (get the revision number somehow from SVN)

gsar -s%PARTSDIR:I:\=I::\% -r%SVNHEAD% -i -f %SVNREV% 
```

可执行 gsar 替换 ascii 文件中的文本行，如果有一种简单的方法可以做到这一点 .bat 文件，但我会很感激听到它。有谁知道这是否可能/如何做？

非常感谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:48:22.550

*   您**无法**在挂钩中获得未来的修订号，因为它还不存在。您**无法预测**修订号，因为它可以是“HEAD”+N（其中 N -**任何**正数）：不要忘记同时并行提交性质
*   修改 hook 中的 transaction-content 被认为是非常糟糕的做法，每个人都必须避免
*   如果你想在文件中有修订号，你可以（有？）使用 SVN 关键字。

$Revision$ 关键字将被转换为字符串，其中包含（以及其他数据）此文件最后提交的修订，即在您的情况下 - 创建分支的修订并将包含此数据，除非您在分支内修改文件

*   如果您无法使用 $Revision$ 技巧，您可以依赖其他数据
    *   `svn log -q BRANCH-URL`在创建分支的最后一个数据字符串版本中返回
    *   通过分支后的额外提交，您可以`svn propset somepropertry somevalue BRANCH-URL`稍后使用 propget|proplist 阅读它（somevalue=revision of branching，因为它已经存在）

在您的情况下*，我更喜欢*使用特殊（未用于其他任务）文件，该文件必须在分支之前立即创建，并且仅在分支修订中提交一次（不优雅，但最简单的方式）

# jquery - 格式化 jquery timepicker 以加载到 django TimeField

> ID：13255371
> 
> 赞同：2
> 
> 时间：2012-11-06T16:33:12.323
> 
> 标签：jquery, django, django-forms

我在格式化我的[jquery timepicker 时遇到](http://trentrichardson.com/examples/timepicker/)问题。我的问题是我希望时间以 HH:MM AM/PM 格式显示在表单中（以便用户可以这样查看），但将其作为军事时间 (%H:%M) 加载到时间字段中。我的表单域如下所示：

```
 if isinstance(f, models.TimeField):
    formfield.widget.format = '%H:%M'
    formfield.widget.attrs.update({'class':'timepicker', 'readonly':'true'}) 
```

我正在使用带有`time without time zone`类型的 Postgresql。jquery（来自上面的链接）看起来是这样的：

```
 <script type="text/javascript">
     $(document).ready(function() {
            $( ".timepicker" ).timepicker({
                showPeriod: true,
                showLeadingZero: true
            });
     });
 </script> 
```

如果我不使用 showPeriod 和 showLoadingZero，它可以正常工作，但它不像我想要的那样用户友好。

谢谢！

编辑：我正在使用模板系统，所以该字段的 html 如下所示：

```
 <div class="fieldWrapper">
    {{ form.starttime.errors }} 
    <label for="id_starttime">Start Time:</label> 
    {{ form.starttime }} 
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T15:22:41.560

也许您需要做的就是`HH:MM AM/PM`在整个站点中显示，并让`TimeField`您处理它在数据库中的存储方式。如果您对此感到满意，则可以使用以下设置：

```
# settings.py

...

TIME_INPUT_FORMATS = ['%I:%M %p'] 
```

有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/ref/settings/#time-input-formats)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T21:41:07.733

我正在使用[这个时间](https://fgelinas.com/code/timepicker/)选择器，但遇到了类似的问题。

在我的 forms.py 中，我改变了

`def make_custom_datefield(f): formfield = f.formfield() if isinstance(f, models.TimeField): formfield.widget.format = '%H:%M' formfield.widget.attrs.update({'class':'timepicker', 'readonly':'true'})`

至

`time_widget = forms.widgets.TimeInput(attrs={'class': 'timepicker', 'readonly':'true'}) time_widget.format = '%I:%M %p'`

然后，在我的表单课上，我有

`class DonationForm(forms.ModelForm): ... time = forms.TimeField(input_formats=['%I:%M %p'],widget=time_widget) ...`

另外请务必注意您的格式掩码`'%H'`不适用于`'%p'`因此使用`'%I'`。

我不知道为什么另一种方法不起作用，或者这种解决方法是否正确，但它似乎对我有用。

# php - 将参数传递给排序函数

> ID：13255380
> 
> 赞同：1
> 
> 时间：2012-11-06T16:33:38.983
> 
> 标签：php, sorting

我正在使用这样的 uasort 函数：

```
uasort($entity_list, 'sortArray');

function sortArray($a, $b) {
  if($a['fixed_column_name'] == $b['fixed_column_name']) {
      return 0;
  }

  return ($a['fixed_column_name'] < $b['fixed_column_name']) ? -1 : 1;
} 
```

我想将参数传递给 sortArray 函数，如下所示：

```
uasort($entity_list, 'sortArray($arg)');

function sortArray($a, $b, $arg) {

  $larg = $arg;

  if($a[$larg] == $b[$larg]) {
      return 0;
  }

  return ($a[$larg] < $b[$larg]) ? -1 : 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:36:30.870

如果您使用的是 PHP 5.3+（此时您确实应该这样做），您可以使用闭包：

```
uasort($entity_list, function ($a, $b) use ($arg) {
    if ($a[$arg] == $b[$arg]) {
        return 0;
    }
    return ($a[$arg] < $b[$arg]) ? -1 : 1;
}); 
```

否则，您将不得不使用`global`变量（哦，不！）或类来解决相同的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:41:59.350

你总是可以使用一个类：

```
$sorter = new Sorter($arg);
usort($entity_list, array($sorter, "sort")); //will use $sorter->sort as callback

class Sorter {
    function __construct($arg) {
        $this->arg = $arg;
    }
    function sort($a, $b) {
        // sort using $a, $b and $this->arg
    }
} 
```

虽然闭包更好^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:37:40.060

在 PHP 手册的[usort()](http://www.php.net/manual/en/function.usort.php)页面上使用闭包查看示例 #4 。相同的技术可用于所有基本排序，包括 uasort()

# clojure - 分支函数组合：if/cond 的组合版本？

> ID：13255381
> 
> 赞同：4
> 
> 时间：2012-11-06T16:33:44.190
> 
> 标签：clojure, functional-programming

在 Clojure 中，有多种组合函数的选项。有组合功能：

*   应用：用于“展开”参数
*   部分：对于尚未给出的论点
*   Comp：用于通过多个函数传递连续结果
*   Juxt：用于在多个函数上应用一个参数

但是，AFAIK 没有包含分支的此类组合功能。是否有任何以分支方式组成函数的函数，例如`if`or的函数版本`cond`？

当然，一个 if 版本很容易制作（尽管这个实现可能不是最快的）：

```
(defn iff
  ([pred rtrue] (iff pred rtrue identity))
  ([pred rtrue rfalse]
    (fn [& args]
      (if (apply pred args)
        (apply rtrue args)
        (apply rfalse args))))) 
```

可能会讨论默认情况下在“else”情况下返回身份是正确的选择，或者在这种情况下是否应该返回 nil。

使用此类功能可以生成更易于阅读的代码。取而代之的是`#(if (string? %) (trim %) %)`，`(iff string? trim)`或带有 cond 版本：

```
(condf string? trim,
       vector? (partial apply str),
       :else identity) 
```

其他 FP 语言有这样的结构吗？我可以想象它在与 comp 和 juxt 的组合中可能会很方便。为什么没有 Clojure ？

好的 iff / condf 实现的奖励积分:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:04:20.260

我不确定这是否与您正在寻找的内容直接匹配（对我来说，这个问题有点模糊），但您应该研究一下 Monads 和 Arrows。

Monad 允许您将函数与定义如何链接它们的特定“绑定”函数链接在一起。它可以进行某种 if/else 流水线操作，例如在 Maybe 和 Either monad 中，或者它可以模拟状态，例如在 State monad 中。

单子内置于 Haskell（作为单子）和 F#（作为“工作流”）中。我已经看过 Clojure 的 monad 库（[检查一下](https://github.com/clojure/algo.monads)），并且可能也有 Arrow 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T01:48:08.647

这接近了战略规划的想法。您可能会发现以下感兴趣的论文

*Ralf Lämmel 和 Eelco Visser 以及 Joost Visser*的战略规划的本质**

 *[http://homepages.cwi.nl/~ralf/eosp/](http://homepages.cwi.nl/~ralf/eosp/)

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.1969](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.1969)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T04:30:40.557

好吧，您可能会想出许多这样的组合模式并问为什么这不在核心语言中。原因很明显，不可行。该语言的核心为您提供了构建此类模式的所有结构。这些特性更像是`contrib`一种东西，而不是语言的核心。

就实现而言，它就像下面所示的那样简单：

```
(defn condf [& args]
  (let [chain (partition 2 args)]
    (fn [& params]
      (first (for [[p f] chain :when (or (= :else p) (apply p params))]
                (apply f params))))))

(def my-func (condf string? clojure.string/trim 
                  vector? (partial apply str)
                  :else identity))

(my-func "Ankur ") ==> "Ankur"
(my-func [1 2 3]) ==> "123"
(my-func '(1 2 3)) ==> (1 2 3) 
```*

# mysql - 每个单独的列都应该定义其字符集吗？

> ID：13255383
> 
> 赞同：0
> 
> 时间：2012-11-06T16:33:53.773
> 
> 标签：mysql

简单的问题：在创建数据库表时，我已经为整个表指定了排序规则，但是，各个列也有一个排序规则字段。这应该留空还是填充与表格相同的排序规则（对于非数字类型）？

任何人都可以阐明这个领域的确切用途吗？我怀疑它用于列的排序规则与表的排序规则不同的情况，但是，我想确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:35:35.027

将其留空，它将使用表格的排序规则。（请参阅[手册中的此处](http://dev.mysql.com/doc/refman/5.5/en/charset-column.html)。）

至于这一切的用途，请参阅手册部分[字符集支持](http://dev.mysql.com/doc/refman/5.5/en/charset.html)，特别是[指定字符集和排序规则](http://dev.mysql.com/doc/refman/5.5/en/charset-syntax.html)。

# javascript - 在使用 try/catch 的 Javascript 中，除了错误消息外，我如何捕获函数名称和传递的所有参数名称/值？

> ID：13255384
> 
> 赞同：0
> 
> 时间：2012-11-06T16:33:54.547
> 
> 标签：javascript

我想使用 try / catch 创建一个**通用**调试例程，在 catch 段中我想要一段代码，它将记录函数名称和所有传递的参数（名称 => 值）。

这可能吗？

```
try{
    // code
} catch(e) {
    var function_name = ''; // how can I get this?
    var function_params = ''; // how can I get this?
    var errorText = 'UNEXPECTED ERROR: \n\n Error Details: '+e.toString();
    errorText = errorText+' Called:'+function_name+'('+function_params+')';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:35:46.543

在 Chrome 和 Firefox 中，您可以使用`e.stack`，但在 Internet Explorer 中没有这样的运气。

该`stack`属性是一个可以循环的数组。它可能因浏览器而异，但制作可读的堆栈跟踪应该不会太难。

您目前无法在所有浏览器中捕获参数。

在 Chrome 中，您可能需要使用：

```
Error.prepareStackTrace = function (error, stack) {
    return stack;
};  // augments Chrome's Error.stack property with context data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:40:12.380

尝试使用`arguments.callee`函数名称

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:50:26.727

这不是一个确切的答案，因为我没有给出函数名称，但这会返回整个函数体......

工作样本：http: [//jsfiddle.net/sS6sY/](http://jsfiddle.net/sS6sY/)

```
Object.prototype.getArgs = function(){
//returns the arguments passed to a function.        
var els = [];
        for(i=0; i< this.arguments.length; i++){
            els.push(this.arguments[i]);
        }

        return els.join(',')
}

Object.prototype.getMethod = function(){
    //returns the function as a string.
    return this.constructor;

}

var Foo = function(){
   this.arguments = arguments;
   try{
        throw {
            name: 'Oops',
            message: 'Didn\'t mean to make a Foo!'
        }
    }
    catch(e){
        console.log(this.getArgs());
        console.log(this.getMethod());
    }
   } 
```

# android - 在 googlemap android 之上添加视图

> ID：13255385
> 
> 赞同：0
> 
> 时间：2012-11-06T16:33:58.643
> 
> 标签：android, views

我想有 2 个视图。我的第一个是谷歌地图，然后我想在四个角落添加一些图形。我希望当用户移动地图时图像留在四个角落。我找不到任何关于这方面的教程，我不知道从哪里开始搜索，所以如果你有任何链接或关于做什么的任何建议，请通知我，我会回来提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:40:06.787

扩展 MapView 类并覆盖 dispatchDraw() 方法。

它给了你一个画布，你可以随意在上面画画。之后只需将它发送到 super() ，你就会得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:37:40.747

可能您可以使用覆盖类。您可以在 Google 上找到许多关于叠加的教程。只需按照您的意愿定位图像。

# javascript - ldapjs 身份验证（用户登录设置）

> ID：13255389
> 
> 赞同：7
> 
> 时间：2012-11-06T16:34:14.483
> 
> 标签：javascript, node.js, ldap

**所以我目前正在运行安装了 ldapjs 的 node.js。**我的目标是拥有一个使用 ldapjs 允许用户使用用户名和密码登录的系统。

我已经阅读了一段时间的[http://ldapjs.org](http://ldapjs.org)文档，但我很难理解 ldap 和 ldapjs 实现它的整个想法。

我目前从文档中得到这个

```
var ldap = require('ldapjs');

var server = ldap.createServer();

server.bind('cn=root', function(req, res, next) {
  if (req.dn.toString() !== 'cn=root' || req.credentials !== 'secret')
    return next(new ldap.InvalidCredentialsError());

  res.end();
  return next();
});

server.listen(1389, function() {
  console.log('LDAP server up at: %s', server.url);
}); 
```

这允许我运行以下内容并成功绑定到服务器。

```
ldapsearch -H ldap://localhost:1389 -x -D cn=root -w secret -LLL -b "o=myhost" objectclass=* 
```

但我真的不确定从这里去哪里，或者即使这是正确的方法......

理想的设置是拥有一系列用户和密码，并在成功的 ldap 连接上确认详细信息正确，如果用户名/密码不正确，则返回 true 或 false。

有谁知道有什么好的资源可以找到更多关于这个的信息，或者更好的是可以建议一些基本的客户端/服务器端代码，让我知道下一步该去哪里！

任何答复将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-02T05:54:30.993

我从未使用过 ldapjs，但根据我刚刚在其看似不完整的文档中快速阅读的内容，它可用于实现 LDAP 服务器或 LDAP 客户端，这似乎是您正在尝试做的事情（即，我假设您要针对现有 LDAP 服务器对应用程序中的用户进行身份验证）。其文档中的大多数示例都集中在创建一个侦听某个端口并与后端数据库交互的 LDAP 服务器。如果您不想在后端数据库或用户和密码存储之间放置基于 LDAP 的接口，那么您可能不需要服务器 API。如果您已经有一个 LDAP 服务器正在运行，那么您将需要使用它的客户端 API 来执行以下操作：

1\. 匿名绑定到提供目录服务（包括身份验证服务）的 LDAP 服务器。看起来你可以这样做：

```
var ldap = require('ldapjs');
var client = ldap.createClient({
    url: 'ldap://my.ldap.server'
}); 
```

2.通过用户名（例如，电子邮件地址）搜索相应条目的DN

```
var opts = {
  filter: '(mail=USERNAME)',
  scope: 'sub'
};

client.search('ou=users,o=acme.com', opts, function(err, res) {
  assert.ifError(err);

  res.on('searchEntry', function(entry) {
    console.log('entry: ' + JSON.stringify(entry.object));
  });
  res.on('searchReference', function(referral) {
    console.log('referral: ' + referral.uris.join());
  });
  res.on('error', function(err) {
    console.error('error: ' + err.message);
  });
  res.on('end', function(result) {
    console.log('status: ' + result.status);
  });
}); 
```

3.获取返回条目的DN（entry.object）。这个库的文档并没有过多地讨论如何使用这些对象（例如，它们的方法、属性等是什么）。因此，您必须弄清楚如何实际获取您刚刚从目录服务器检索到的条目的 DN 或字符串表示形式。[*请参阅此答案下方的评论*]

4.使用该DN重新绑定到服务器：

```
client.bind(DN_RETRIEVED, PASSWORD_USER_ENTERED, function(err) {
  assert.ifError(err);
}); 
```

5.上面绑定的结果是你需要用来判断认证是否成功的。

如果您尝试在您的用户/密码数据存储前实现基于 LDAP 的身份验证的 LDAP 服务器，那么您将需要遵循他们的服务器示例。我个人认为这是一种矫枉过正的做法，并且在安全性方面可能存在问题。

# php - 使用 AWS 迁移 Drupal 站点

> ID：13255396
> 
> 赞同：1
> 
> 时间：2012-11-06T16:34:41.313
> 
> 标签：php, drupal, amazon-ec2, amazon-web-services, open-atrium

我正在尝试将开放中庭（基于 drupal）站点迁移到新的 AWS EC2 实例。我正在按照从[http://drupal.org](http://drupal.org)迁移站点的步骤进行操作。我确定`settings.php`新数据库配置正确。但是当我尝试打开新站点时，它总是显示一个空白页面。谁能帮我找出问题？

Ps，我确实尝试了全新安装，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:32:40.123

您需要确保为您的 EC2 实例正确定义了安全组（例如，端口 80 已打开...）。

如果您为 apache 和数据库使用不同的实例 - 请确保也为这些实例正确配置了安全组。

此外，请尝试使用与迁移前相同的发行版的亚马逊实例（例如 CentOS、Ubuntu 等），并确保 settings.php 和新数据库已按应有的方式进行配置。

或者 - 您可以尝试[http://www.ravellosystems.com](http://www.ravellosystems.com)之类的东西- 它可以让您使用与您正在迁移的虚拟机 100% 相同的虚拟机，甚至只是上传您当前的虚拟机。

——全面披露——我在 Ravello Systems 工作。

# java - 在 Android 之外使用 Parcelable 模型类，并带有 Parcelable 包装器

> ID：13255397
> 
> 赞同：3
> 
> 时间：2012-11-06T16:34:41.553
> 
> 标签：java, android, parcelable

我想创建一些实现 Android 的 Parcelable 接口的模型类，但我希望这些类可以在 Android 之外使用。我考虑为所有这些模型类实现一个包装器（它们以相同的方式序列化，内部使用 Google 协议缓冲区），但我不知道该怎么做。

假设我有一个接口模型和一个实现类 ModelImpl。目前，Model 扩展了 Parcelable，但我想将 Model 和 ModelImpl 从 Parcelable 中解耦，并使用 ParcelWrapper。最好，这都应该是类型安全且美观的。关于如何解决这个问题的任何指示？

如果我遇到解决方案，我当然会在这里发布。

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:11:37.660

我最终使用了装饰器模式。所以现在我有：

*   模型，定义我需要的公共方法的接口。
*   ModelImpl，实际实现模型类（使用 Google Protocol Buffers 进行序列化）
*   ModelParcelDecorator，它实现了 Model 和 Parcelable，并获取 Model 实现的实例并将其存储为引用，将 Model 接口中的所有方法委托给该实例。ModelParcelDecorator 直接使用协议缓冲区序列化机制，所以我不需要序列化成 Parcel 并手动返回。

Model 和 ModelImpl 现在可以驻留在它们自己的库中，并在 Android 之外使用。

不幸的是，我需要为我的每个模型类编写一个装饰器，但这是迄今为止我找到的最佳解决方案。如果我发现更好的东西，我会在这里发布。

# c# - LINQ 查询步骤

> ID：13255398
> 
> 赞同：4
> 
> 时间：2012-11-06T16:34:42.437
> 
> 标签：c#, linq

我有以下代码。它运行良好。

在我标记的地方，我想写一个查询（我假设用`LINQ`）提取`CompanyName` `where``MainKey == 3028`

我怀疑这是微不足道的，但我是新手`LINQ`，我在[MSDN](http://msdn.microsoft.com/en-us/library/bb397927.aspx)`LINQ`上查找了一些基本信息，似乎无法让它工作。

```
namespace EntityFrameworkExperiment {
class Program {

    static void Main(string[] args) {
        var models = SelectTop100Models("SELECT top 100 * FROM WH.dbo.vw_DimXXX");
        Console.Write("hello world");

        //<<<<<<<linq query to pull out companyname when MainKey == 3028

        Console.Read();
    }

    static IEnumerable<MyModel> SelectTop100Models(string myCommandText) {
        var connectionString = ConfigurationManager.ConnectionStrings["XXX"].ConnectionString;
        using(var conn = new SqlConnection(connectionString))
        using(var cmd = conn.CreateCommand()) {
            conn.Open();
            cmd.CommandText = myCommandText;
            using(var reader = cmd.ExecuteReader()) {
                while(reader.Read()) {
                    yield return new MyModel {

                        MainKey = reader.GetInt32(reader.GetOrdinal("MainKey")),
                        ServerId  = reader.GetInt32(reader.GetOrdinal("ServerId")),
                        CompanyId = reader.GetInt32(reader.GetOrdinal("CompanyId")),
                        CompanyName = reader.GetString(reader.GetOrdinal("CompanyName")),

                    };
                }
            }
        }
    }
}

public class MyModel {

    public int MainKey { get; set; }
    public int ServerId { get; set; }
    public int CompanyId { get; set; }
    public string CompanyName { get; set; }

}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T16:37:31.737

添加`using System.Linq`

查询应该是

```
var companyName = models
  .Where(o => o.MainKey == 3028) // apply the filter
  .Select(o => o.CompanyName)    // tell it you only need the one property
  .FirstOrDefault();             // take the first result it finds or use 'null' if the MainKey does not exist 
```

但是你必须记住一件事——这里你没有使用对 SQL 服务器的 LINQ 查询——而是检索内存中的所有数据，然后在 .NET 中过滤它们。这意味着如果数据库包含数百万行，它们将全部从 SQL 服务器中提取。您正在申请 TOP 100，但如果密钥 3028 不在前 100 名之内，那将给您带来麻烦。

您应该做的是使用实体框架（或类似工具）创建一个模型，然后编写一个针对由它生成的类的查询。好消息是**LINQ 查询将完全相同**- 它只是在幕后转换为 SQL。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T16:37:16.543

linq 查询将是。

```
var result = from rec in ModelOfWHData.vw_DimCasinos
where (rec.MainKey == 3028)
select rec.CompanyName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T16:41:14.473

下面的 LINQ 查询将对您从 T-SQL 查询生成的 IEnumerable 进行后处理，返回单个匹配对象，如果未找到则返回 null：

```
MyModel result = (from m in MyModel
                  where m.MainKey == 3028
                  select m).SingleOrDefault();

string companyName = result.CompanyName; 
```

但是，我怀疑您最好使用 LINQ-to-SQL 并实际让 LINQ 为您生成和执行 T-SQL 查询。

# ssl - 为指向同一文件夹的多个网站使用 SSL 重定向时保留 URL

> ID：13255401
> 
> 赞同：0
> 
> 时间：2012-11-06T16:35:08.153
> 
> 标签：ssl, iis-7.5, http-redirect

我有多个网站指向一个中央文件夹（IIS 7.5）

company1.domain.com/wo 指向 D:\inetpub\wo

company2.domain.com/wo 指向 D:\inetpub\wo

company3.domain.com/wo 指向 D:\inetpub\wo

所有网站都适用于 HTTP 和 HTTPS（如果手动输入）。但是，这些站点必须通过 HTTPS 连接。我想设置自动 SSL 重定向但遇到问题。我创建了 URL 重写规则，但由于这只是一个 webconfig 文件，因此 URL 仅重定向到一个网站（不维护 URL）。如何设置 SSL 重定向以便保留 URL 并且所有网站都指向同一个文件夹？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:48:29.890

检查是否启用了 HTTPS 时应包含主机标头，然后重定向到相应域的 https URL。

这是一个例子：

```
<rewrite>
    <rules>
        <clear />
        <rule name="Force HTTPS - www.domain1.com" stopProcessing="true">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{HTTPS}" negate="true" pattern="^ON$" />
                <add input="{HTTP_HOST}" pattern="\.domain1\.com$" />
            </conditions>
            <action type="Redirect" url="https://www.domain1.com{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
        </rule>
        <rule name="Force HTTPS - www.domain2.com" stopProcessing="true">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{HTTPS}" negate="true" pattern="^ON$" />
                <add input="{HTTP_HOST}" pattern="\.domain2\.com$" />
            </conditions>
            <action type="Redirect" url="https://www.domain2.com{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
        </rule>
        <!-- add more rules for other domains if needed -->
        </rule>
    </rules>
</rewrite> 
```

您可以根据需要为域名添加任意数量的规则。

**编辑：**对不起，我误读了你的问题。在这种情况下，它甚至更简单：

```
<rewrite>
    <rules>
        <clear />
        <rule name="Force HTTPS" stopProcessing="true">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{HTTPS}" negate="true" pattern="^ON$" />
            </conditions>
            <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

无需检查主机标头，只需在重定向中包含主机名即可。您只需确保您拥有所有域名的 SSL 证书。

# objective-c - 以编程方式更改 UISwitch 错误的状态

> ID：13255404
> 
> 赞同：-1
> 
> 时间：2012-11-06T16:35:18.977
> 
> 标签：objective-c, ios, uiswitch

我正在尝试使用该方法动态更改 UISwitch`[self.mySwitch setOn:YES animated:YES];`

代码中的状态也发生了变化，因此机制工作正常，但在视图中状态没有改变。所以我得到一个 UISwitch 显示为 OFF 并像 ON 一样工作。

当我点击它时，开关变为ON。所以我必须点击它两次才能启动代码的 inCaseOff 部分。

我希望这足够清楚。

[编辑]

这是你问的代码

```
- (void)viewDidLoad
{
   [self manageTheSwitch];
}

- (void) manageTheSwitch{
    self.mySwitch = [[UISwitch alloc]init];
    if(randomObject != nil){
        [self.mySwitch setOn:YES animated:YES];
    }else{
        [self.mySwitch setOn:NO animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:53:51.383

您正在以编程方式将不同的 UISwitch 设置为视图中显示的那个。您根本不必这样做`[[UISwitch alloc]init]`，而是应该通过`IBOutlet`控制器中的属性检索它（连接到您在 IB 中的视图）。

假设您确实连接了 mySwitch，那么您需要做的就是删除此行：

```
self.mySwitch = [[UISwitch alloc]init]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:54:48.117

您的问题是，您在 manageTheSwitch 方法中实例化了一个新按钮，而不是访问您在情节提要中创建的按钮。只需消除该 alloc init 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:54:27.557

尝试使用从 UIControl 继承的“选定”属性 UISwitch： `self.mySwitch.selected = YES;`

# wpf - 与 ControlTemplates 一起使用时，Property Setter 对应的是什么？

> ID：13255406
> 
> 赞同：0
> 
> 时间：2012-11-06T16:35:28.180
> 
> 标签：wpf

我有以下风格（为简洁起见），并有一些基于它的问题。据我了解，如果 ControlTemplate 替换了 Style 所基于的控件的整个可视化树，那么 Setters 属性会产生什么影响？

在此示例中，FontSize、Margin、Height 等的属性 Setters 是否与 CheckBox 本身的相应属性相对应？如果替换控件的 Template 属性，如果 CheckBox 不再呈现其默认外观，这些 Setter 将对应什么？

```
<Style x:Key="KeyName" TargetType="CheckBox">
    <Setter Property="FontSize" Value="11" />
    <Setter Property="Margin" Value="0 0 1 0" />
    <Setter Property="VerticalAlignment" Value="Top" />
    <Setter Property="Height" Value="18" />
    ... common property setters etc.

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="CheckBox">
                <Border>
                    <StackPanel>
                        <Ellipse Name="Ellipse" Width="7" Height="7" />
                        <ContentPresenter Content="{TemplateBinding Content}" />
                    </StackPanel>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.Setters>
                            <Setter Property="Foreground" Value="WhiteSmoke" />
                        </Trigger.Setters>
                    </Trigger>
                        ... custom triggers etc ...
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:43:35.010

它们是一种为正在设置样式的对象的属性提供初始默认值的方法，它们不会为您自动强制模板上的任何内容。但是，它们可以在控制模板中使用。

使用样式中的设置器设置的值可以被 xaml 中的本地值覆盖。例如。

这个 xaml 文件绘制了一个标签，该标签的样式已更改为包含一个采用背景颜色的网格，我在 setter 中将颜色默认为红色，它显示为红色。

```
<Window x:Class="ContextMenu.MainWindow"      
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"      
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type Label}">
            <Setter Property="Background" Value="Red"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Label}">
                        <Grid Background="{TemplateBinding Background}">
                            <TextBlock Text="{TemplateBinding Content}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

        </Style>
    </Window.Resources>

    <Label>Test</Label>
</Window> 
```

如果我要将标签实例上的标签线更改为蓝色，您可以看到这会覆盖设置器。

```
<Window x:Class="ContextMenu.MainWindow"      
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"      
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type Label}">
            <Setter Property="Background" Value="Red"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Label}">
                        <Grid Background="{TemplateBinding Background}">
                            <TextBlock Text="{TemplateBinding Content}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

        </Style>
    </Window.Resources>

    <Label Background="Blue">Test</Label>
</Window> 
```

# scala - 如何在 Play 中保护文件上传！框架（斯卡拉）

> ID：13255407
> 
> 赞同：2
> 
> 时间：2012-11-06T16:35:30.100
> 
> 标签：scala, playframework

如教程中所述，我已经实现了 Secured 特征：

```
trait Secured {
...

def IsAuthenticated(f: => String => Request[AnyContent] => Result) = Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  }
...
} 
```

并像这样使用它：

```
def list = IsAuthenticated { username => _ =>
...
} 
```

现在，我对文件上传有以下定义：

```
def upload = Action(parse.multipartFormData) { request =>
...
} 
```

是否可以结合 IsAuthenticated 和 parse.multipartFormData 以便我能够在文件上传期间检查用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:53:02.807

您实现的版本没有收到 BodyParser。在教程中有一个接受 BodyParsers 的版本：

```
def Authenticated[A](p: BodyParser[A])(f: AuthenticatedRequest[A] => Result) = {
  Action(p) { request =>
    request.session.get("user").flatMap(u => User.find(u)).map { user =>
      f(AuthenticatedRequest(user, request))
    }.getOrElse(Unauthorized)      
  }
} 
```

使用这个。您需要的所有代码都[在页面底部](http://www.playframework.org/documentation/2.0.4/ScalaActionsComposition)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:04:56.863

您可能必须重载该功能。

```
 def IsAuthenticated[A](p: BodyParser[A])(f: => String => Request[A] => Result): Action[A] ={
    ...
   }

    def IsAuthenticated[AnyContent](f: => String => Request[AnyContent] => Result): Action[AnyContent] = 
       IsAuthenticated(BodyParsers.parse.anyContent)(f) 
```

我在我的应用程序中做了类似的事情。

# python - 在 python MySQLdb 中抑制 cursor.execute() 消息

> ID：13255410
> 
> 赞同：1
> 
> 时间：2012-11-06T16:35:41.397
> 
> 标签：python, cursor, mysql-python

如何抑制 MySQLdb 中的 cursor.execute() 消息。

```
>>> from warnings import filterwarnings
>>> import MySQLdb
>>> filterwarnings('ignore', category = MySQLdb.Warning)
>>> db = MySQLdb.connect('127.0.0.1', 'root', '','')
>>> cursor = db.cursor()
>>> cursor.execute("select version()")
1L 
```

我需要禁止显示此“1L”消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:37:14.790

你看到的不是警告信息，而是`cursor.execute()`. 这是受影响的行数，1。

该 API 恰好返回一个 Python[`long`整数](http://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex)，但它在其他方面与常规`int`值相同：

```
>>> 1L
1L
>>> 1
1
>>> 1 == 1L
True 
```

如果您不希望 Python 控制台将返回值回显给您，请将它们分配给一个变量：

```
>>> somevariable = 1L 
```

# javascript - javascript canvas 拉伸我的图像

> ID：13255413
> 
> 赞同：2
> 
> 时间：2012-11-06T16:35:44.973
> 
> 标签：javascript, jquery, image, canvas, drawimage

```
 $.fn.imageCanvas = function() {

    if (!document.getElementById('bgCanvas')){
        $('body').append($('<canvas>',{id:'bgCanvas', width:'500px', height: '500px'}))
        var canvas = document.getElementById('bgCanvas');
        var ctx = canvas.getContext('2d');
    }
    var img = new Image();
    img.onload = function() {
        ctx.drawImage(img,0,0,438,300);
        console.log(this.width);
        console.log(this.height);
    }
    img.src= 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';
} 
```

在 ctx.drawImage 我写了 x,y,width,height。但是画布拉伸了这个图像。如何使用原始宽度/高度进行图像处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:44:21.967

如果您只是想在不缩放的情况下显示图像，请使用只有 x 和 y的[三参数变体](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images#drawImage)：`drawImage`

```
ctx.drawImage(img,0,0); 
```

如果要将底部和右侧边缘裁剪为指定大小，请使用[九参数变体](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Using_images#Slicing)：

```
ctx.drawImage(img,0,0,362,240,0,0,362,240); 
```

前四个数字设置裁剪矩形的 x/y 和宽度/高度，接下来的四个数字设置绘制到画布上的裁剪图像矩形的 x/y 和宽度/高度。

**编辑：**

问题在于 jQuery 函数将第二个参数中 options 对象中的`width`和属性视为**CSS 属性**，*而不是*DOM 对象属性。如果您检查生成的 HTML，您会发现：`height`

 ***```
<canvas id="bgCanvas" style="width: 500px; height: 500px;"></canvas> 
```

而不是你想要的，应该是：

```
<canvas id="bgCanvas" width="500" height="500"></canvas> 
```

有关[该问题](https://stackoverflow.com/questions/10433046/creating-a-canvas-element-and-setting-its-width-and-height-attributes)的讨论，请参阅此问题。作为解决方案，我建议改用：

```
$('body').append($('<canvas>',{id:"bgCanvas"}).attr({'width':500,'height':500})) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T11:27:54.743

尝试使用我最近创建的这个库，它可以加载图像，调整其固定宽度和高度或百分比，并从或转换为 base64 或 blob。

[https://github.com/vnbenny/canvawork.js](https://github.com/vnbenny/canvawork.js)

希望这对你有帮助！***

# jquery - 回发后 jQuery Show/Hide 不起作用

> ID：13255420
> 
> 赞同：0
> 
> 时间：2012-11-06T16:36:08.377
> 
> 标签：jquery, c#-4.0, postback

在回发使用 jQuery 显示隐藏的 div 后，我遇到了问题。有人建议我将可见性值存储在隐藏字段中，但我遇到了一些问题。继承人的代码：

```
<script type="text/javascript">
$(document).ready(function () {
    $(".slidingDiv").hide();
    $(".show_hide").show();
    $("goBtn").click(function () {
        $(".slidingDiv").slideToggle();
    });
    return false;
});  
</script>

<div class="create">
            <asp:TextBox ID="createTextbox" runat="server" Width="350px" Height="22px"></asp:TextBox>
            <asp:ImageButton ID="goBtn" ImageUrl="img/goBtn.gif" runat="server" BorderStyle="None" onclick="createButton_Click"/>
        </div>
 <div class="slidingDiv" runat="server">
        <asp:HiddenField ID="IsCreatePostbackVisible" runat="server" Visible="False" value="false"/>
            <asp:Literal ID="Literal1" runat="server"></asp:Literal><br />
        </div> 
```

代码隐藏：

```
 protected void createButton_Click(object sender, ImageClickEventArgs e)
    {
        string randAlias = Base62Random();
        string aliasInput = createTextbox.Text;
        DateTime date = DateTime.Now;
        DateTime endDate = (DateTime.Now.AddYears(5));
        string UserID = HttpContext.Current.User.Identity.Name.ToUpper();
        string aliasType = "alias";
        if (aliasInput == "")
        {
            ClientScript.RegisterClientScriptBlock(GetType(), "Javascript", "<script>alert('You must enter a valid URL')</script>");
        }
        else
        {
            Literal1.Text = "<a href=http://go/" + randAlias + ">go/" + randAlias;
        }

        using (DataClasses1DataContext dc1 = new DataClasses1DataContext())
        {
            tblData tblData = new tblData();
            tblData.ALIAS_ID = randAlias;
            tblData.URL = aliasInput;
            tblData.START = date;
            tblData.END = endDate;
            tblData.USER = UserID;
            tblData.TYPE = aliasType;
            dc1.tblDatas.InsertOnSubmit(tblData);
            dc1.SubmitChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:54:35.137

您可能需要将点击事件“重新注册”到您的按钮。

过去我在隐藏和回发方面遇到过类似的问题。

如果你定义一个函数：

```
 function ClickListener() {
    $("#goBtn").click(function () {
            $(".slidingDiv").slideToggle();
            ClickListener();
        });
    } 
```

然后希望它会不止一次地工作。

编辑：我也遇到过类似的问题，将 document.ready() 更改为 document.live() 已经解决了这个问题。请参见此处：[live() 和 ready() 之间的 jQuery 区别？](https://stackoverflow.com/questions/1772863/jquery-difference-between-live-and-ready)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:21:37.537

这是我最终得到的答案：

```
<script type="text/javascript">
    $(document).ready(function () {
    $(".slidingDiv").hide();
    $(".show_hide").show();
    $("#goBtn").click(function () {
        $(".slidingDiv").slideToggle();
    })
    if (isPostBack){$(".slidingDiv").show();}
});  
</script> 
```

代码背后：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {ClientScript.RegisterClientScriptBlock(GetType(), "IsPostBack", "var isPostBack = true;", true);}
        else 
        {ClientScript.RegisterClientScriptBlock(GetType(), "IsPostBack", "var isPostBack = false;", true);}
    } 
```

# visual-c++ - 调试清单中可以允许“Microsoft.VC90.CRT”吗？

> ID：13255422
> 
> 赞同：1
> 
> 时间：2012-11-06T16:36:21.040
> 
> 标签：visual-c++

在 VC++ 9.0 中从我的 x64 应用程序调试 R6034 错误（“应用程序尝试错误地加载 c 运行时库......”）期间，我发现我的调试版本清单文件之一包含“Microsoft.VC90.CRT '。为什么不是“Microsoft.VC90.DebugCRT”？这是潜在的问题吗？

谢谢，

*   顺光

# java - Bean 验证不起作用。我正在使用 JPA 2.0 和 Hibernate 3.3

> ID：13255424
> 
> 赞同：0
> 
> 时间：2012-11-06T16:36:24.850
> 
> 标签：java, jpa, bean-validation

验证适用于前端 (jsf)。但是，它没有在 prepersist 上得到验证。我将制造商设置为空，它被存储在数据库中，而不是抛出约束冲突异常。谢谢。

这是我实体的相关部分：

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;
import javax.validation.constraints.AssertTrue;
import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

/**
 * The persistent class for the CAR database table.
 * 
 */
@Entity
@Table(name="CAR")
public class Car implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="CAR_ID")
    private int carId;

    @Column(name="MANUFACTURER")
    @NotNull(message = "A manufacturer is required.")
    private String manufacturer; 
```

这是我的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="src_persistence">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>jdbc/BEAN_VALIDATION_DS</jta-data-source>
        <class>
            xxx.beanvalidation.persistence.Car
        </class>
        <validation-mode>CALLBACK</validation-mode>
        <properties>
            <property name="javax.persistence.validation.mode" value="callback"/>
            <property name="openjpa.Optimistic" value="false"/>
            <property name="openjpa.LockManager" value="none"/>
            <property name="openjpa.jdbc.Schema" value="dbo"/>
            <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.CMTTransactionFactory" />
            <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.WebSphereExtendedJTATransactionLookup" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.current_session_context_class" value="thread" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider" />
        </properties>
    </persistence-unit>
</persistence> 
```

这是我的 DAO：

```
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

import com.westfieldgrp.beanvalidation.persistence.Car;
import com.westfieldgrp.beanvalidation.persistence.Driver;
import com.westfieldgrp.beanvalidation.persistence.Person;
import com.westfieldgrp.common.data.dao.DAOInterface;

public class CarDAO  {

    private EntityManager entityManager;

    public void save(Person convertedPerson, Driver convertedDriver, Car convertedCar) {
        EntityManager em = getEntityManager();
        //convertedPerson.setName(convertedPerson.getName()); // To test JPA validation
        Person savedPerson =  em.merge(convertedPerson);
        convertedDriver.setPersonId(savedPerson.getPersonId());
        Driver savedDriver = em.merge(convertedDriver);
        convertedCar.setDriverId(savedDriver.getPersonId());
        if("test".equals(convertedCar.getManufacturer())){
            convertedCar.setManufacturer(null);// To test JPA validation
        }
        em.persist(convertedCar);
        em.flush();
    }

    public EntityManager getEntityManager() {
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("src_persistence");
            entityManager = emf.createEntityManager();
        return entityManager;
    }

    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T16:10:37.050

Hibernate 3.3 不是 JPA2.0 实现。对于 JPA2.0，您需要 Hibernate >=3.5.1。Hibernate 3.3 中没有集成 bean-validation API

要将 bean-validation 集成到 hibernate 3.3 中，您必须实现 BeanValidationEventListener。以 Hibermate 实现为例：

[https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/beanvalidation/BeanValidationEventListener.java](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/beanvalidation/BeanValidationEventListener.java)

# macos - 在 Automator 中遇到 shell 脚本问题会导致 applescript

> ID：13255425
> 
> 赞同：0
> 
> 时间：2012-11-06T16:36:25.593
> 
> 标签：macos, shell, applescript, automator

我有一个脚本，它只允许我通过右键单击文件来将标签添加到文件中。我选择标签，脚本会自动添加它们。它们有一个特定的形式：“&tag”，它们用空格分隔。

我想做的是拥有一个自动化应用程序，其中一个 shell 脚本按特定条件搜索文件，并且该脚本将结果传递给一个 applescript。

所以我的自动化应用程序以“运行 Shell 脚本”块开头，这是其中唯一的内容。

```
mdfind '(kMDItemContentTypeTree == "public.image" || kMDItemContentTypeTree == "public.video") && kMDItemFinderComment == "*&tag*"cd' 
```

这将返回一个文件列表及其 POSIX 路径。像这样：{"/User/path1/file1","/User/path2/file2",etc.}

然后我有一个“运行 Applescript”框，我想在其中访问文件及其评论，但无论我尝试多少，它都不起作用。我试过使用 POSIX 文件，或者从“tell finder”块访问评论。没有任何效果。

这是最简单的代码，我认为应该可以正常工作，但事实并非如此！

```
on run {input, parameters}
  repeat with f in input
    display dialog (comment of f) as text
  end repeat
  return input
end run 
```

有谁知道问题可能是什么？我错过了什么？请帮帮我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:29:37.963

Try something like this:

```
on run {input, parameters}
    tell application "Finder"
        repeat with i from 1 to number of items in input
            display dialog comment of (POSIX file (item i of input) as alias) as text
        end repeat
    end tell
    return input
end run 
```

# c# - C# .net 3.5+ 字典 键/值对显示值作为默认选项 - MVC 选择列表

> ID：13255426
> 
> 赞同：4
> 
> 时间：2012-11-06T16:36:28.053
> 
> 标签：c#, linq, dictionary, key, key-value

我试图找出任何方法来检索特定类实例的某些元素，以便在我试图对其执行一些维护的下拉列表中使用。目标是选择所有联系人并将其分配给键/值对字符串数组（联系人是公司的相关实体，具体而言，1:n 关系 - 1 家公司有多个联系人）然后选择第一个联系人的名字和姓氏属性与布尔类属性 Primary 设置为 True 的顺序不同。

```
public class Company 
{
    public string Name { get; set; }
    public virtual ICollection<Contact> Contacts { get; set; }
}

public class Contact
{
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public bool IsPrimary { get; set; }
} 
```

以下代码：

```
private Company CreateViewModel(Company company)
{
    var contacts = _contactService.CompanyContacts(company);

}

public Dictionary<string, string> CompanyContacts(Company company)
            {
                    var results = new Dictionary<string, string>();

                    foreach (var contact in company.Contacts)
                    {
                            var key = string.Format("{0} {1}|{2}", contact.FirstName, contact.LastName, contact.IsPrimary());

                            var val = string.Format("{0} {1}|{2}", contact.FirstName, contact.LastName, contact.IsPrimary());

                            if (results.ContainsKey(key)) continue;

                            results.Add(key, val);
                    }

                    return results;
            }

    public void InitContactList(Dictionary<string, string> contacts)
    {

        var firstOrDefault = contacts
            .Where(x => x.Key.Contains("true"))
            .Select(x => x.Value)
            .FirstOrDefault();

        var selectedContact = contacts.FirstOrDefault().Value;

            if (firstOrDefault != null)
            {
                var selectedContact =  firstOrDefault;

                ContactList = new SelectList(contacts, "Key", "Value")
                .SelectByText(selectedContact.ToString()).ToList();
            }

            ContactList = new SelectList(contacts, "Key", "Value")
                .SelectByText(selectedContact.ToString()).ToList();
    } 
```

虽然默认情况下不会在选择列表中显示第一个“主要”联系人。我希望第一个 isPrimary=1 联系人成为选择列表中的第一个选择。我很确定 InitContactList 中的 firstOrDefault 变量需要让密钥执行 .contains(“true”) 以外的其他操作。任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:22:57.797

代码中的内容让我印象深刻的是

```
x.Key.Contains("true") 
```

部分。这会与区分大小写进行字符串比较。您对字典项的值将布尔值转换为值为“False”或“True”的字符串。最简单的解决方案是将您的 linq where 语句更改为：

```
x.Key.Contains("True") 
```

但这可能不是最好的解决方案，因为它会在字符串的任何部分查找“True”，并且仍然区分大小写。“更好”的解决方案是使用允许不区分大小写的比较方法。我在项目中使用过几次的扩展方法是这样的：

```
public static bool Contains(this string source, string toCheck, StringComparison comp)
{
    if (string.IsNullOrEmpty(toCheck) || string.IsNullOrEmpty(source))
        return false;
     return source.IndexOf(toCheck, comp) >= 0;
} 
```

您可以将 where 语句更改为：

```
x.Key.Contains("True", StringComparison.InvariantCultureIgnoreCase) 
```

如果您不使用 .NET 3.0 或更高版本，您可以轻松地将其更改为静态实用程序方法。

# sql - 替换字段中的第一个字母 Oracle

> ID：13255427
> 
> 赞同：0
> 
> 时间：2012-11-06T16:36:28.660
> 
> 标签：sql, oracle, oracle11g

嗨，伙计们，我有这张桌子 ![我的原始表](../Images/8992316adf1f7851f818accd5c389044.png)

我需要用 ACCT_SHORT_NAME 的名字替换 ACCT_NAME 中的首字母。不应更改像 Higlilighted(RAFFMAN) 这样的记录。我努力了：

```
select acct_name, ACCT_SHORT_NAME,replace(acct_name, substr(acct_name, 1, 1),      ACCT_SHORT_NAME)
 from tbaadm.gam where schm_type = 'TDA' and rcre_user_id  = 'SYSTEM' and substr(acct_name,2,1) = ' ' 
```

我正进入（状态：

![选择后的表格](../Images/1f68bf2ca41ecb480ce24f07090780a7.png)

这意味着正在选择 ACCT_SHORT_NAME 中的整个值。做我想做的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:49:54.027

[使用INSTR](http://www.techonthenet.com/oracle/functions/instr.php)函数提取名字以获取第一个空格的位置

```
 replace(acct_name, substr(acct_name, 1, 1),  subst(ACCT_SHORT_NAME,1,INSTR(ACCT_SHORT_NAME,' '))) 
```

要考虑仅具有名字的短名称，请使用`CASE`

# c++ - Windows 进程内存转储是什么样的

> ID：13255443
> 
> 赞同：1
> 
> 时间：2012-11-06T16:37:36.667
> 
> 标签：c++, windows, memory-management, assembly, process

我只是尝试了解 Windows 中进程的内存布局结构，所以这是我的主要目标。

我认为它看起来像这样：

![prossesMemoryLayout](../Images/97063fce5313bc1866e7e8a585a14318.png)

但后来我读到 Windows 下的进程*可以*有多个堆栈 - 这是真的吗？

此外，我找到了一个小程序，应该与上图相对应。

![进程内存布局程序](../Images/cf3304e2cab41278cd104bb60792051f.png)

但它没有！结果是：

编 00411145

资料00417160

堆 00706D90

堆栈 0018FF38

增加堆指针：00706D91

增加堆指针：00706D92

但我从视觉工作室的反汇编窗口得到的是：

![Disassambly Process Memory Layout prog](../Images/f9a5099e250a5ee18c1c418d4b68dc44.png)

除了主入口，我没有看到任何对应的地址。

有没有人有一个很好的解释，或者一个**很好**的教程来涵盖这个主题并回答我的问题。

我也不明白链接器映射文件，也许这可以使事情站得住脚。

# android - 联系人游标中的列 data4 无效

> ID：13255444
> 
> 赞同：1
> 
> 时间：2012-11-06T16:37:39.507
> 
> 标签：android, cursor, android-contacts, contactscontract

我正在尝试创建一个类，其字段是联系信息（姓名、地址等）。

```
 public class ContactObject {

private Activity actividad;
private Uri contactUri;`enter code here`
// variable para asegurarse que la consulta de contacto se realizó correctamente
private boolean isOK = true;

private String displayName;
private String givenName;
private String familyName;
private String region;
private String postcode;
private String city;
private String street;

public ContactObject(Activity actividad, Uri contactUri) {
    super();
    this.actividad = actividad;
    this.contactUri = contactUri;

    Cursor c = null;
    try{
        String[] selection = new String[]{
                ContactsContract.CommonDataKinds.StructuredPostal.STREET,
            ContactsContract.CommonDataKinds.StructuredPostal.CITY,
                ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE,
            ContactsContract.CommonDataKinds.StructuredPostal.REGION,
            ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME,
            ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME,
            ContactsContract.Contacts.DISPLAY_NAME                      
        };

        c = actividad.getContentResolver().query(contactUri, selection,null, null, null);
        if (c != null && c.moveToFirst()) {
            this.street = c.getString(0);
            this.city = c.getString(1);
            this.postcode = c.getString(2);
            this.region = c.getString(3);
            this.givenName = c.getString(4);
            this.familyName = c.getString(5);
            this.displayName = c.getString(6);
        }
    }catch(Exception e){
        CLog.e("peta constructor ContactObject: " + e.getMessage());
        isOK = false;
    }
}
// getters and setters
}

// code to launch contact picker
Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,
                Contacts.CONTENT_URI);
startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);

// code to create the ContactObject
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {
        switch (requestCode) {
        case CONTACT_PICKER_RESULT:
            Uri uri = data.getData();

            if (uri != null) {
                ContactObject co = new ContactObject(actividad, uri);
                String mensaje;
                if (co.isOK()){
                    mensaje = "Contacto encontrado: " + co.getDisplayName();
                }else{
                    mensaje = "error recuperando datos del contacto " + uri.toString();
                }
                CToast.mensajeLargo(mensaje, actividad.getApplicationContext());
            }
        }
    }
} 
```

在模拟器中，我创建了几个联系人（只有姓名和电话）。在测试应用程序中，我调用 contactPicker onResult，并使用联系人 uri 创建 ContactObject。当我执行它时，它会抛出一个异常，它的消息是“无效的列 data4”。

正如我所收集的，“data4”是常量 ContactsContract.CommonDataKinds.StructuredPostal.STREET 的值。但是，如果我只查询 DISPLAY_NAME，我就可以毫无问题地得到它。

我知道这些联系人没有地址，但是我的许多（实际）电话联系人都没有地址，并且应用程序不会因此而崩溃。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:44:33.317

您使用的是什么内容 URI？

您的投影包含来自三个不同位置的列名称： StructuredPostal StructuredName 联系人

您的错误表明您正在尝试在没有该列名的表中获取列名。

特别是，我可以看到 ContactsContract.CommonDataKinds.StructuredPostal.STREET = "data4"。如果您的查询不是针对表 ContactsContract.DATA，您将遇到错误。

您可能需要返回查看 Contacts Provider 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:57:18.993

我通过更改启动联系人选择器的意图来使其工作：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.setType(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE);
        startActivityForResult(intent, CONTACT_PICKER_RESULT); 
```

使用这个并在我的（实际）手机上对其进行测试，它要求我选择要使用的操作：文件管理器、联系人或（因为它已安装）保管箱。选择联系人可以正常工作，我从所选联系人那里获得所有信息。但是，我想知道是否没有办法专门调用联系人选择器而不是将其留给用户选择？

# c++ - 使用 boost::asio 的 AF_NETLINK (netlink) 套接字

> ID：13255447
> 
> 赞同：6
> 
> 时间：2012-11-06T16:37:42.970
> 
> 标签：c++, sockets, boost, boost-asio, netlink

我正在基于[this](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/multicast/sender.cpp%20and)和[this](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/multicast/receiver.cpp)编写多播客户端/服务器应用程序；效果很好。

但是，当计算机中活动网络接口的数量发生变化时，我还需要做一些事情，就像[本页](http://www.kernel.org/doc/man-pages/online/pages/man7/netlink.7.html)示例部分中的程序所做的那样。

我想我应该使用 boost::asio::local 中的工具，但我不确定是否应该使用`boost::asio::local::datagram_protocol`or`boost::asio::local::stream_protocol`或...

一个如何做尽可能相似的事情的例子真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T22:02:23.330

正如您注意到的那样，必须编写一些额外的代码才能做到这一点。

Netlink 使用自己的地址族 (PF_NETLINK)，而不是 TCP 或 UDP。相反，它使用 RAW 套接字。由于它是一个私有家族（不是 PF_INET 或 PF_INET6），我们需要自己定义它。

我使用一个基本的 unix 本地套接字作为模板来实现这个（测试程序见底部）。如果你不想复制粘贴所有代码，我也把它放在github上（[http://github.com/gille/boost_netlink](http://github.com/gille/boost_netlink)）：

```
template <typename Protocol>
class nl_endpoint
{
private:
    sockaddr_nl sockaddr;
public:
    /// The protocol type associated with the endpoint.
    typedef Protocol protocol_type;
    typedef boost::asio::detail::socket_addr_type data_type;        

    /// Default constructor.
    nl_endpoint()
    {
        sockaddr.nl_family = PF_NETLINK;
        sockaddr.nl_groups = 0;
        sockaddr.nl_pid = getpid(); 
    }

    /// Construct an endpoint using the specified path name.
    nl_endpoint(int group, int pid=getpid())
    {
        sockaddr.nl_family = PF_NETLINK;
        sockaddr.nl_groups = group;
        sockaddr.nl_pid = pid;
    }

    /// Copy constructor.
    nl_endpoint(const nl_endpoint& other)
    {
        sockaddr = other.sockaddr;
    }

    /// Assign from another endpoint.
    nl_endpoint& operator=(const nl_endpoint& other)
    {
        sockaddr = other.sockaddr;
        return *this;
    }

    /// The protocol associated with the endpoint.
    protocol_type protocol() const
    {
        return protocol_type();
    }

    /// Get the underlying endpoint in the native type.
    data_type* data()
    {
        return &sockaddr;
    }

    /// Get the underlying endpoint in the native type.
    const data_type* data() const
    {
        return (struct sockaddr*)&sockaddr;
    }

    /// Get the underlying size of the endpoint in the native type.
    std::size_t size() const
    {
        return sizeof(sockaddr);
    }

    /// Set the underlying size of the endpoint in the native type.
    void resize(std::size_t size)
    {
    /* nothing we can do here */
    }

    /// Get the capacity of the endpoint in the native type.
    std::size_t capacity() const
    {
        return sizeof(sockaddr);
    }

    /// Compare two endpoints for equality.
    friend bool operator==(const nl_endpoint<Protocol>& e1,
               const nl_endpoint<Protocol>& e2)
    {
        return e1.sockaddr == e2.sockaddr;
    }

    /// Compare two endpoints for inequality.
    friend bool operator!=(const nl_endpoint<Protocol>& e1,
               const nl_endpoint<Protocol>& e2)
    {
        return !(e1.sockaddr == e2.sockaddr);
    }

    /// Compare endpoints for ordering.
    friend bool operator<(const nl_endpoint<Protocol>& e1,
              const nl_endpoint<Protocol>& e2)
    {
        return e1.sockaddr < e2.sockaddr;
    }

    /// Compare endpoints for ordering.
    friend bool operator>(const nl_endpoint<Protocol>& e1,
              const nl_endpoint<Protocol>& e2)
    {
        return e2.sockaddr < e1.sockaddr;
    }

    /// Compare endpoints for ordering.
    friend bool operator<=(const nl_endpoint<Protocol>& e1,
               const nl_endpoint<Protocol>& e2)
    {
        return !(e2 < e1);
    }

    /// Compare endpoints for ordering.
    friend bool operator>=(const nl_endpoint<Protocol>& e1,
               const nl_endpoint<Protocol>& e2)
    {
        return !(e1 < e2);
    }
}; 
```

协议：

```
class nl_protocol
{
private:
    int proto; 
public:
    nl_protocol() {
        proto = 0;
    }
    nl_protocol(int proto) {
        this->proto = proto;
    }
    /// Obtain an identifier for the type of the protocol.
    int type() const
    {
        return SOCK_RAW;
    }
    /// Obtain an identifier for the protocol.
    int protocol() const
    {
        return proto;
    }
    /// Obtain an identifier for the protocol family.
    int family() const
    {
        return PF_NETLINK;
    }

    typedef nl_endpoint<nl_protocol> endpoint;
    typedef boost::asio::basic_raw_socket<nl_protocol> socket;
}; 
```

然后从这里我们需要做的就是创建一个原始套接字并读取它：

```
void handle_netlink(struct nlmsghdr *nlm);

int main(int argc, char* argv[])
{
    try
    {
        boost::asio::io_service io_service;
        boost::asio::basic_raw_socket<nl_protocol> s(io_service ); 

        s.open(nl_protocol(NETLINK_ROUTE));
        s.bind(nl_endpoint<nl_protocol>(RTMGRP_LINK)); 

        char buffer[max_length];
        int bytes;

        while((bytes=s.receive(boost::asio::buffer(buffer, max_length)))) {
             struct nlmsghdr *nlm;

            for (nlm = (struct nlmsghdr *)buffer;
              NLMSG_OK(nlm, (size_t)bytes);
              nlm = NLMSG_NEXT(nlm, bytes))
            {
            handle_netlink(nlm);
            }
        }
    }
    catch (std::exception& e)
    {
        std::cerr << "Exception: " << e.what() << "\n";
    }        
    return 0;
}

/* This code just prints out what interface went up or down */    
void handle_netlink(struct nlmsghdr *nlm) {
    int len;
    char ifname[IF_NAMESIZE + 1];
    ifinfomsg *ifi;
    rtattr *rta;

    if (nlm->nlmsg_type == RTM_NEWLINK) {
        len = nlm->nlmsg_len - sizeof(*nlm);
        if ((size_t)len < sizeof(*ifi)) {
            errno = EBADMSG;
            return;
        }
        ifi = (ifinfomsg*)NLMSG_DATA(nlm);
        if (ifi->ifi_flags & IFF_LOOPBACK)
            return;

        rta = (rtattr *) ((char *)ifi + NLMSG_ALIGN(sizeof(*ifi)));
        len = NLMSG_PAYLOAD(nlm, sizeof(*ifi));
        ifname[0] = '\0';
        while (RTA_OK(rta, len)) {
            switch (rta->rta_type) {
                case IFLA_IFNAME:
                strncpy(ifname, (char*)RTA_DATA(rta), sizeof(ifname));
                break;
                default:
                    break;
            }
            rta = RTA_NEXT(rta, len);       
        }
    }
    if (nlm->nlmsg_type == RTM_NEWLINK)
        len = ifi->ifi_change == ~0U ? 1 : 0;

    std::cout << "Interface " << ifname << " changed status, now: ";
    if((ifi->ifi_flags&IFF_LOWER_UP)==IFF_LOWER_UP)
        std::cout << " Up" << std::endl;
    else
        std::cout << " Down" << std::endl;    
} 
```

# django - 在 Django admin 中删除内联模型

> ID：13255449
> 
> 赞同：1
> 
> 时间：2012-11-06T16:37:51.453
> 
> 标签：django

我正在尝试使用 Django admin 删除内联模型。我收到一条错误消息

> [u'选择一个有效的选项。该选择不是可用的选择之一。']

我检查引发异常的位置。看起来内联模型已被删除，然后在父模型上发生了表单验证，删除的内联模型仍作为表单的值。这导致了失败。

在我的管理模型中，我`save_formset`定义了一个方法，称为`formset.save(commit=False)`. 是`commit=False`不是告诉 Django 不要删除相关模型？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:59:42.930

快速查看代码后，似乎 formset[`save`](https://github.com/django/django/blob/stable/1.4.x/django/forms/models.py#L487)方法调用 了[`save_existing_objects`](https://github.com/django/django/blob/stable/1.4.x/django/forms/models.py#L591)，它确实删除了实例，即使`commit`是`False`.

[在表单集中保存对象](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#saving-objects-in-the-formset)的文档没有指定当您指定时标记为删除的对象会发生什么`commit=False`。它只是说：

> 传递`commit=False`以返回未保存的模型实例：

# c# - 创建上下文后如何更改实体源表？

> ID：13255452
> 
> 赞同：0
> 
> 时间：2012-11-06T16:37:55.233
> 
> 标签：c#, entity-framework, entity-framework-4.1

我有同样的问题，我[在运行时将实体映射更改为另一个“未知”表，](https://stackoverflow.com/questions/11142530/change-entity-map-to-another-unknown-table-at-runtime)但现在在创建上下文后我需要它。我在 EF 4.1 版中使用 Code First。我是否必须再次创建整个上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:40:39.913

[这](http://theruntime.com/blogs/jacob/archive/2008/08/27/changing-table-names-in-an-orm.aspx)对于在运行时映射到不同的表可能很有用。

编辑：[这](http://weblogs.asp.net/guybarrette/archive/2008/07/23/linq-to-sql-dynamic-mapping.aspx)也可能派上用场。

# asp.net - ASP.NET 向 div 添加不需要的填充

> ID：13255453
> 
> 赞同：0
> 
> 时间：2012-11-06T16:37:58.727
> 
> 标签：asp.net, html, css

我在`style="padding:10px;"`ASP.NET 内容 div 中添加了不需要的内容。

为 div 标签生成的 HTML 是：

```
<div id="ctl00_oMasterContentDiv" class="SCMainContent" style="padding:10px;"> 
```

主文件中的定义是：

```
<div class="SCMainContent" runat="server" id="oMasterContentDiv">
    <asp:ContentPlaceHolder ID="oCPH1" runat="server">
    </asp:ContentPlaceHolder>
</div> 
```

尝试添加`style="padding: 0px;"`到 div 定义会导致该属性被删除和覆盖。

什么会或可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:52:55.390

您的代码中必须有添加样式的内容。我看不出 ASP.Net 默认情况下如何或为什么会添加填充。

# python - 嵌套循环中不同值的相同变量名。

> ID：13255455
> 
> 赞同：0
> 
> 时间：2012-11-06T16:38:08.667
> 
> 标签：python

这段代码是完全有效的 Python

```
x=[[1,2,3,4], [11,22,33,44]]
for e in x:
    for e in e:
        print e 
```

有人可以告诉我为什么，以及这是如何工作的吗？

我知道这两个`e`' 都在不同的范围内，但是如何像这样一起使用它们不会导致错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T16:44:22.027

范围没有什么不同。在 Python 中，函数具有单个本地范围（就像在控制台中在全局级别输入的代码一样）。

代码正常的原因是您在将外部值`e`重新绑定到内部值之前完成了使用；尝试查看打印的内容：

```
x=[[1,2,3,4], [11,22,33,44]]
for e in x:
    for e in e:
        print e
    print e 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T16:43:13.997

`e`只是一个标签。外循环的每次迭代都`e`被分配第`n`th 值`x`，并且每次内循环迭代都被分配第`m`th 值`x[n]`。这是完全有效的 Python 代码，只是从样式的角度来看是不可取的，因为除了一个简单的示例之外，它很快就会使`e`代码中的什么代表变得混乱，因此很可能导致错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T16:43:25.040

我想您可以将上述表达式中的内部循环大致翻译为：

```
for e in x:
    ee = iter(e)
    try:
        e = next(ee)
        while True
            print e
            e = next(ee)
    except StopIteration
        pass 
```

请注意，这里的关键是在语句中： `for e in ...`,`...`通过[迭代器协议](http://docs.python.org/2/library/stdtypes.html#iterator-types)转换为迭代器。您实际迭代的对象是与您最初提供*的对象不同的对象。*`e`由于它是一个单独的对象（与其名称分开存储在当前范围内以允许对其进行迭代），因此在当前范围内将新变量绑定到该名称没有问题——也许我应该说没有问题除了它使代码真的很难遵循。

这实际上与您这样做没有问题的原因相同：

```
A = [['foo']]  #Define A
b = A[0]       #Take information from A and rebind it to something else
c = A          #We can even take the entire reference and bind/alias it to a new name.
A = 'bar'      #Re-assign A -- Python doesn't care that A already existed. 
```

* * *

这里还有一些需要考虑的事情：

```
x = [1,2,3,4]
for a in x:
    print a
    next(a)   #Raises an error because lists aren't iterators! 
```

现在很少使用（但有时是必要的）成语：

```
x = [1,2,3,4]
y = iter(x)   #create an iterator from the list x
for a in y:
    print a
    #This next line is OK.  
    #We also consume the next value in the loop since `iter(y)` returns `y`!
    #In fact, This is the easiest way to get a handle on the object you're
    #actually iterating over.
    next(y) 
```

最后：

```
x = [1,2,3,4]
y = iter(x)   #create an iterator from the list x
for a in y:
    print a
    #This effectively does nothing to your loop because you're rebinding
    #a local variable -- You're not actually changing the iterator you're
    #iterating over, just as `A = 'bar'` doesn't change the value of
    #the variable `c` in one of the previous examples.
    y = iter(range(10)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:45:20.780

因为第二个`e`绑定在第一个`e`评估到列表之后。因此，所有其他迭代步骤都不是从变量中获取项目，而是从列表中获取项目。例如，在下一个代码中重新评估`e`对迭代没有影响：

```
for e in x:
    for i in e:
        print i
        e = [8, 8, 8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-17T12:06:23.603

坦率地说，我没有发现这个问题的任何当前答案是令人满意的。我认为根本的解释是 Python 将 for 循环作用域作为一种特殊情况处理。

看起来 Python 认识到 for 循环变量是特殊的，并且在 for 循环结束时，根据需要将变量的当前值复制到封闭范围。

这解释了为什么可以编写以下代码：

```
for i in range(3):
    i = 5
    print("hello") 
```

它将执行3次。for 循环变量 i 是*特殊*的，与赋值为 5 的变量 i*不同。*

Python 可能将其视为：

```
for i_12349678 in range(3):
    i = 5
    print("hello") 
```

对于使用相同变量 i 的嵌套 for 循环：

```
for i in range(3):
    for i in range(4):
        print("i = %s" % i) 
```

Python 可能认为它更像：

```
for i_18987982221 in range(3):
    for i_9870272721 in range(4):
        print("i = %s" % i_9870272721) 
```

更多信息： http: [//mail.python.org/pipermail/python-ideas/2008-October/002109.html](http://mail.python.org/pipermail/python-ideas/2008-October/002109.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-01T20:03:41.407

在这种情况下，“e”在同一范围内。如果你做类似...

```
for i in range(MAX):
    if(some_condition == True):
        for i in range(5):
            #do stuff 
```

如果代码遍历到内部 for 循环，它将增加“外部 i”5 次，导致您跳过这些运行。

使用您发布的代码，它不会产生语法错误，并且从逻辑角度来看它恰好可以解决，但可能还有其他示例您会得到错误的结果。

# css - Primefaces和primefaces mobile之间的区别

> ID：13255456
> 
> 赞同：2
> 
> 时间：2012-11-06T16:38:11.620
> 
> 标签：css, jsf, primefaces

我的目标是开发一个可通过桌面浏览器和手机访问的系统。Primefaces 是我已经确定的（尽管如果有人有更好的建议，这可能会改变）。无论如何，我一直在寻找 primefaces 和 primefaces mobile 之间的区别，似乎没有太多区别。我能找到的最好的讨论是[http://forum.primefaces.org/viewtopic.php?f=8&t=23193](http://forum.primefaces.org/viewtopic.php?f=8&t=23193)。否则我的谷歌搜索技巧让我失望，或者没有太多的信息。

否则，您似乎应该只知道它们之间的区别。遗憾的是，我不知道。虽然这对你们中的许多人来说似乎很简单，但我大约 3 个月前刚大学毕业，从那时起就一直在 yii 框架中使用 php，所以这个转换对我来说是一项艰巨的任务，我没有经验在任何类似的事情。所以我向你们寻求帮助。有人可以解释一下其他两个针对小屏幕进行优化的primefaces mobile之间是否存在更大的差异。这听起来，如果我只在 primefaces 中编程，它将同时显示在浏览器和手机中，但手机可能存在 CSS 问题。

可以通过查明用户是使用台式机还是移动设备并只是切换到不同的 CSS 文件来避免这种情况，还是这很荒谬？桌面版和移动版都需要 2 个单独的页面吗？如果我这样做，您能否提供一个非常基本的代码差异示例？有谁知道一个很好的教程，它突出了两者之间的区别并向你展示了一些例子？

感谢您提供的任何帮助。非常感谢。

更多信息：我将 Eclipse indigo 与 Maven、JSF、Jboss 和 Primefaces 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:27:27.623

`Could this be avoided by finding out if the user is using a desktop or mobile and just switching to a different CSS file or is this plain ridiculous?`

您对响应式网页设计和为您的网站拥有专用移动页面感到困惑。借助响应式网页设计方法，我们在媒体查询的帮助下利用灵活流畅的布局来适应几乎任何屏幕尺寸，这样您就不需要为现有网站设置特定的移动版本网站。另一方面，当您拥有专用的移动站点时，会检测到用户设备并将其路由到适当的桌面/移动站点。这通常是关于 UX 是否需要专用移动站点的争论，这取决于您采用哪种方法。

也可以看看：

*   [http://boagworld.com/mobile-web/separate-mobile-site-vs-responsive-design/](http://boagworld.com/mobile-web/separate-mobile-site-vs-responsive-design/)

`Would I require 2 seperate pages for both the desktop and the mobile version?`

如上所述，这是您采用的方法。Primefaces Mobile 基于 jQuery Mobile，它有助于创建独立的移动网站，与兼容各种设备的普通桌面网站相比，这些网站通常会删除重要内容。

也可以看看：

*   [http://goodchee.com/blog/the-mobile-web-responsive-design-or-jquery-mobile/](http://goodchee.com/blog/the-mobile-web-responsive-design-or-jquery-mobile/)

`If I do would you be able to provide a very basic example of the difference between the code please?`

从代码方面来看，您可以在 primefaces 展示上看到代码，但我想您不需要比较代码，您需要比较两者不同的功能。这是一个[单独的移动响应网站总统 smackdown 网站](http://mobile.smashingmagazine.com/2012/08/22/separate-mobile-responsive-website-presidential-smackdown/)，它将桌面版本与移动版本进行比较。

`Does anyone know a good tutorial that highlights the difference between both and shows you some examples?`

查看上面答案中的站点，它有很多要解释的地方。

也可以看看：

*   [http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

*   [http://msdn.microsoft.com/en-us/magazine/hh653584.aspx](http://msdn.microsoft.com/en-us/magazine/hh653584.aspx)

# ios - 动画滚动视图高度 - 内容在动画之前突然跳跃

> ID：13255458
> 
> 赞同：0
> 
> 时间：2012-11-06T16:38:25.890
> 
> 标签：ios, animation, uiscrollview

这是正在发生的事情的一些屏幕截图。

绿色背景是滚动视图中的一个视图（即标记“内容大小”和“内容偏移量”）。

橙色是滚动视图框架。

**键盘启动了……滚动视图很好地滚动了内容。**

![在此处输入图像描述](../Images/ff1a28e94d42aaaaaeb95150d219f191.png)

**现在我单击文本字段，键盘开始隐藏**

![在此处输入图像描述](../Images/5e265919906850800119584e54efd6b8.png)

尽管滚动视图（橙色）似乎是正确的高度，但内容现在已经跳跃了大约 100 像素（绿色）。

我不知道是什么原因造成的 - 无论是 ios 错误还是什么（它也发生在我的设备上）。

这是根据键盘何时显示/隐藏来调整视图大小的代码。

```
- (void)keyboardWillShow:(NSNotification *)notif {
    [self.mainScrollView setAutoresizesSubviews:NO];
    // get the scroll view frame size
    CGRect frame = [self.mainScrollView frame];
    frame.size.height = self.view.frame.size.height-216;

    [UIView beginAnimations:@"scrollViewAnimations" context:nil];
    [UIView setAnimationDuration:0.3];
    [self.mainScrollView setFrame:frame];
    [UIView commitAnimations];

    // add tap gesture recognizer
    _tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(_dismissKeyboard:)];
    [_tap setDelegate:self];
    [self.view addGestureRecognizer:_tap];
}

- (void)keyboardWillHide:(NSNotification *)notif {
    CGRect frame = [self.mainScrollView frame];
    frame.size.height = self.view.frame.size.height;

    [UIView beginAnimations:@"scrollViewAnimations" context:nil];
    [UIView setAnimationDuration:0.3];
    [self.mainScrollView setFrame:frame];
    [UIView commitAnimations];

    [self.view removeGestureRecognizer:_tap];
} 
```

任何帮助或指导都会很棒，谢谢！为什么要这样做？它是一个错误 - 它是埋在我的代码中的某个地方吗？如果是的话，我找不到。这是我制作视图动画的方式的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:46:53.120

这是我对 RubyMotion 中类似问题的解决方案：

```
def keyboardWillShow(notification)
  point = searchBar.convertPoint(searchBar.frame.origin, toView:tableView)
  tableView.setContentOffset(point, animated: true)
end

def keyboardWillHide(notification)
  info = notification.userInfo
  duration = info.objectForKey(UIKeyboardAnimationDurationUserInfoKey)

  UIView.beginAnimations(nil, context:nil)
  UIView.setAnimationDuration(duration)
  tableView.setContentOffset([0,0], animated: false)
  UIView.commitAnimations
end 
```

这里的想法是你真的不想改变你想要调整 UIScrollView 的内容偏移量的框架

# java - 需要一个服务器来管理登录和从 ios 应用程序客户端到另一个应用程序客户端的数据传输

> ID：13255461
> 
> 赞同：1
> 
> 时间：2012-11-06T16:38:43.177
> 
> 标签：java, json, network-programming, ios6, client-server

我正在制作一个 ios 应用程序，它将数据从客户端发送到另一个客户端。

计划为 ios 客户端应用程序使用 AFnetwork 框架，但现在我需要一个服务器处于数据交​​换的中间，该数据交换也将管理登录。

我在java中做了一个小程序来尝试在ios应用程序和服务器之间建立连接，但我认为它是原始的并且不支持应用程序的http协议。

知道 java 代码是微不足道的，我将不得不做其他事情，我将发布 java 代码和 ios 代码，这样你们就知道我到目前为止有什么。

我正在为服务器寻找简单的解决方案，因为我在这方面没有太多经验。

如果你能给我一个简单的服务器，它可以同时接收和发送。基于我计划使用 ios AFnetwork 的事实，我会欣赏它

提前谢谢 ;)

爪哇代码：

```
 class MobileTestServer
  {
  public static void main(String argv[]) throws Exception
  {
     String clientSentence;
     String capitalizedSentence;
     ServerSocket welcomeSocket = new ServerSocket(6789);
     System.out.println("Servidor");
     while(true)
     {
        Socket connectionSocket = welcomeSocket.accept();
        System.out.println("Connection received from " + connectionSocket.getInetAddress().getHostName());
        BufferedReader inFromClient =
           new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
        clientSentence = inFromClient.readLine();
        System.out.println("Received: " + clientSentence);
        capitalizedSentence = clientSentence.toUpperCase() + '\n';
        outToClient.writeBytes(capitalizedSentence);
     }
  } 
```

}

ios代码：

```
 NSMutableDictionary *dataToSend;
    [dataToSend setObject:password forKey:login];

    AFHTTPClient *httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://localhost:6789"]];

    NSMutableURLRequest *signInRequest = [httpClient requestWithMethod:@"GET" path:@"http://localhost:6789/login" parameters:dataToSend];
    signInRequest.timeoutInterval = 15.0;
    signInRequest.cachePolicy = NSURLRequestReloadIgnoringLocalAndRemoteCacheData;

    AFJSONRequestOperation *signInOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:signInRequest success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
    {
        NSLog(@"sent");
    }
                                                                                              failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
    {
        NSLog(@"not sent");
    }];

    [httpClient enqueueHTTPRequestOperation:signInOperation]; 
```

# symfony - 在带有 Doctrine ODM 的 Symfony2 中，如何在文档中动态创建字段？

> ID：13255471
> 
> 赞同：1
> 
> 时间：2012-11-06T16:39:36.687
> 
> 标签：symfony, doctrine, doctrine-odm, odm

我有一个站点记录，其中可以包含任意数量的具有不同信息的 AdProvider 配置字段。不幸的是，fieldNames（提供者的名称）是独一无二的，而且还会有更多。我可以在 Document 中将它们中的每一个硬编码为哈希类型，但是每次添加新的 Provider 时我都必须更新 Document。

我想动态修改 Document 本身，查看我可以从另一个 Mongo 集合中获得的提供者列表，但我不知道如何做到这一点。

我的第一次尝试是在 loadClassMetaData 事件上创建一个侦听器并映射新字段。我看到了字段映射，但它们没有反映在文档中。显然，这些字段没有任何 getter 和 setter，所以我尝试使用魔术 __get 和 __set 方法访问它们，但我得到它们不存在的错误。

也许我会以错误的方式解决这个问题？

示例 Mongo 记录：

```
{
    "_id" : ObjectId("4ff1d29d99c6667722000000"),
    "_type" : [
        "Models_Site"
    ],
    "enabledAdProviders" : [
        "provider1",
        "provider2",
        "provider3",
        "provider4"
    ],
    "provider1" : {
        "id" : "4028cbff38e2d7c00666fd2fdc770208"
    },
    "provider2" : {
        "placements" : {
            "Top_300x50" : "477",
            "Btm_300x50" : "478",
            "Top_320x50" : "477",
            "Btm_320x50" : "478"
        }
    },
    "provider3" : {
        "id" : "8a809449013331fdcdc6662708532b20"
    },
    "siteId" : "PsTl",
    "siteName" : "Publisher Site",
    "provider4" : {
        "placements" : {
            "Top_300x50" : "430",
            "Btm_300x50" : "430"
        }
    }
} 
```

我的听众：

```
<?php
namespace BIM\DataBundle\Listener;

use BIM\DataBundle\Document\AdPublisherRecord;
use BIM\DataBundle\Document\AdProviderRecord;
use Doctrine\ODM\MongoDB\Mapping\ClassMetadata;

class AdPublisherSiteSetup
{
private $serviceContainer;

/**
 * This service is called every time Ads doctrine odm loads a document. 
 * We are dynamically creating the ad provider setting nodes on the AdPublisher Record 
 * 
 */
public function __construct($serv){
    $this->serviceContainer = $serv;
}

public function loadClassMetadata(\Doctrine\ODM\MongoDB\Event\LoadClassMetadataEventArgs $args)
{
    $metaData = $args->getClassMetadata();
    $document = (string)$metaData->getName();

    if($document == "BIM\DataBundle\Document\AdPublisherRecord"){
        //query for ad providers
        //create as a hash type to store each providers settings.
        $providerList = $this->serviceContainer->get('ads.publisher.factory')->getProviderList();
        foreach ($providerList as $name => $value) {
            $metaData->mapField(array('fieldName' => $name, 'type' => 'hash'));
        }   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T10:13:40.373

你不能用普通的 Doctrine-odm 做到这一点，但是我使用了一个简单的技巧来做几乎相同的事情：

* * *

由于 MongodDB 文档可以嵌套，只需`@Hash`在您的文档中创建一个属性，该属性将包含无模式属性（将其视为哈希袋）：

```
class Doc {

   /** 
    * Schema-less dynamic properties goes here:
    * @MongoDB\Hash 
    */
   public $extraFields;

   /** @MongoDB\Date */
   public $createdDate;

   //Other static properties...
} 
```

唯一需要注意的是，无模式属性将进入`$extraFields`属性，而不是根。

然而，这只是一个美学问题，您可以在这些字段上做任何事情（索引、查询、map reduce、ecc）

通过这种方式，您可以拥有静态定义的属性（如 Id、createdDate、ecc）和动态属性的哈希包。

如果您想记录其中一些动态属性的存在（并避免给您的同事带来常见的拼写错误），您可以在 Doc 中定义一些访问方法：

```
class Doc {

    public getExtraName() {
        if(empty($this->extraFields['name'])) return null;
         return $this->extraFields['name'];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:37:41.930

我为 Symfony2 和 Doctrine2-ODM 编写了一个扩展的 EAV 系统，其中任何文档都可以变成传统字段和属性的“混合”。这些属性都在另一个具有特定类型（地址、电话号码、字符串、文档参考等）的文档中定义。我不能分享代码，因为它是公司财产，但它的要点如下。

*   属性的所有值都必须能够简化为数组（多维也可以），因为这些值存储在文档的哈希字段中。
*   创建一个可以在文档中扩展的抽象类（AbstractAttributeAware）是我使用的。在那个类里面应该有以下内容。
    *   **一个名为“updateCount”的字段或类似的东西。每当修改属性时，更新此更新计数以强制更新文档。**
    *   用于存储压缩值的哈希字段。
    *   存储对象的属性（未存储在 DB 中）。
    *   “deflate”和“inflate”方法获取哈希值并将它们转换为对象或获取对象并将它们转换为哈希值。
*   创建一个侦听持久化、更新和加载的侦听器。这些侦听器应该“膨胀”和“放气”任何扩展您的 AbstractAttributeAware 类的文档。
*   创建一个类作为处理通货膨胀和通货紧缩的“AttributeHandler”。基本上是一个容纳充气和放气功能的类。我想您可以将它们放在您的听众中，而不是您想要的。

很抱歉，我不能放下更多，但如果需要进一步澄清，我很乐意提供帮助。关键是粗体的 updateCount 字段（我花了很长时间才找到那个字段的底部）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T20:51:39.670

经过大量研究，我想出了以下解决方案。希望对您有所帮助.... 1\. 在 services.yml 中注册一个事件监听器

服务：my_doctrine_listener：类：Test\SamplerestBundle\Listener\ModifyColumn 标签：- {名称：doctrine_mongodb.odm.event_listener，事件：loadClassMetadata }

2.  在 Test\SamplerestBundle\Listener\ModifyColumn 添加以下方法

公共函数 loadClassMetadata(LoadClassMetadataEventArgs $eventArgs) { $classMetadata = $eventArgs->getClassMetadata(); $document = (string)$classMetadata->getName();

```
 if($document == "TestBundle\\Document\\TestDocument"){
        $fieldMapping = array(
            'fieldName' => 'columnTest',
            'type' => 'string'
        );

        /*
        the field is registered as private method
        */
        $classMetadata->reflFields['columnTest'] = new \ReflectionProperty($classMetadata->name,'about');
        $classMetadata->mapField($fieldMapping);
    }

} 
```

3.  在 Document 中添加魔法方法

    ```
    public function __set($column,$value){
        $this->$column = $value;
    }

    public function __get($column){
        return $this->$column;
    } 
    ```

# grails - 如何使用 amazon s3 grails 插件上传和下载文件

> ID：13255473
> 
> 赞同：0
> 
> 时间：2012-11-06T16:39:47.457
> 
> 标签：grails, plugins, file-upload, amazon-s3, download

我正在使用 Amazon s3 grails 插件在 s3 上上传 csv 文件。我真的可以使用这个插件上传 csv 文件吗？我正在尝试这个。我没有收到任何错误，也没有上传文件。插件无法从 s3 下载文件。请告诉我如何下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:40:27.540

我建议不要使用该插件，而是将 jets3t 库导入您的项目。然后你可以做这样的事情：

```
String awsAccessKey = "YOUR_AWS_ACCESS_KEY"
String awsSecretKey = "YOUR_AWS_SECRET_KEY"
AWSCredentials awsCredentials = new AWSCredentials(awsAccessKey, awsSecretKey)
S3Service s3Service = new RestS3Service(awsCredentials)

S3Bucket[] myBuckets = s3Service.listAllBuckets()
println "How many buckets to I have in S3? " + myBuckets.length 
```

查看本指南了解更多信息： http: [//www.jets3t.org/toolkit/code-samples.html](http://www.jets3t.org/toolkit/code-samples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T02:16:37.100

我的回答有点晚了，但我最近遇到了这个问题，所以想把它分享给未来的读者。

我正在使用 Grails 版本：3.2.7 和[Grails AWS SDK S3 插件](https://github.com/agorapulse/grails-aws-sdk/tree/master/grails-aws-sdk-s3)

这是我的*上传控制器*

```
class UploadController {

    def amazonS3Service
    def s3Bucket = 'YOUR-BUCKET-NAME'

    def index() {
        def multipartFile = request.getFile('file')

        if (multipartFile && !multipartFile.empty) {
            def fileName = multipartFile.getOriginalFilename()

            // push uploaded file to S3
            amazonS3Service.storeMultipartFile(s3Bucket, fileName, multipartFile)
            log.debug "written to s3"
        } else {
            log.debug "No file uploaded"
        }
        return
    }
} 
```

根据文档从 s3 下载：

```
// Get a file
file = amazonS3Servuce.getFile('asset/foo/someKey.jpg', '/Users/ben/Desktop/photo.jpg') 
```

# wso2 - WSO2 API 管理器 SSL 与 nginx

> ID：13255475
> 
> 赞同：0
> 
> 时间：2012-11-06T16:39:53.387
> 
> 标签：wso2, wso2carbon, wso2-am

我必须使用 nginx 作为使用安全 SSL 连接的 API 管理器安装的代理。关于如何配置所有以使其工作的任何提示？

谢谢

卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:53:12.780

Current version of API manager doesnt support "https" endpoints...We have that in our roadmap and will fix that in future release. But you can use ESB between APIManager and your backend service to route the request

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:09:51.317

从 WSO2 API Manager 版本 1.3.0 开始，添加了对调用安全后端服务的支持。请参阅下面调用安全后端服务的示例 API 的突触配置。目前支持仅适用于通过基本身份验证保护的服务。

```
<api xmlns="http://ws.apache.org/ns/synapse" name="admin--SecuredAPI" context="/secure" version="1.0.0" version-type="url"> 
    <resource methods="POST GET OPTIONS DELETE PUT" url-mapping="/*"> 
        <inSequence> 
            <property name="Authorization" expression="fn:concat('Basic ', base64Encode('username:password'))" scope="transport"/> 
            <property name="POST_TO_URI" value="true" scope="axis2"/> 
            <filter source="$ctx:AM_KEY_TYPE" regex="PRODUCTION"> 
                <then> 
                    <send> 
                        <endpoint name="admin--SecuredAPI_APIEndpoint_0"> 
                            <address uri="https://securebackend.com/search"> 
                                <timeout> 
                                    <duration>30000</duration> 
                                    <responseAction>fault</responseAction> 
                                </timeout> 
                                <suspendOnFailure> 
                                    <errorCodes>-1</errorCodes> 
                                    <initialDuration>0</initialDuration> 
                                    <progressionFactor>1.0</progressionFactor> 
                                    <maximumDuration>0</maximumDuration> 
                                </suspendOnFailure> 
                                <markForSuspension> 
                                    <errorCodes>-1</errorCodes> 
                                </markForSuspension> 
                            </address> 
                        </endpoint> 
                    </send> 
                </then> 
                <else> 
                    <sequence key="_sandbox_key_error_"/> 
                </else> 
            </filter> 
        </inSequence> 
        <outSequence> 
            <send/> 
        </outSequence> 
    </resource> 
    <handlers> 
        <handler class="org.wso2.carbon.apimgt.gateway.handlers.security.APIAuthenticationHandler"/> 
        <handler class="org.wso2.carbon.apimgt.usage.publisher.APIMgtUsageHandler"/> 
        <handler class="org.wso2.carbon.apimgt.usage.publisher.APIMgtGoogleAnalyticsTrackingHandler"/> 
        <handler class="org.wso2.carbon.apimgt.gateway.handlers.throttling.APIThrottleHandler"> 
            <property name="id" value="A"/> 
            <property name="policyKey" value="gov:/apimgt/applicationdata/tiers.xml"/> 
        </handler> 
        <handler class="org.wso2.carbon.apimgt.gateway.handlers.ext.APIManagerExtensionHandler"/> 
    </handlers> 
</api> 
```

谢谢，努万。

# java - WebView 下不可点击的项目

> ID：13255476
> 
> 赞同：1
> 
> 时间：2012-11-06T16:39:57.320
> 
> 标签：java, android, air, air-native-extension

我在 Adob​​e AIR 中有这个测试应用程序，使用 Android ANE 插入 VideoView 来观看视频。问题是一旦添加了视频，屏幕的其余部分就无法点击。

这是用于插入 VideoView 的代码：

```
// File:  VideoPlayerTestActivity.java
protected void onCreate(Bundle savedInstance) 
{
    super.onCreate(savedInstance);  // always call this

    VideoView videoHolder = new VideoHolder(this);
    this.programaticallyAddToLayout(videoHolder);

    // Add the media controllers at bottom of video, instead of screen bottom
    videoHolder.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            mp.setOnVideoSizeChangedListener(new OnVideoSizeChangedListener() {
                public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
                    MediaController mc = new MediaController(VideoPlayerTestActivity.this);
                    videoHolder.setMediaController(mc);
                    mc.setAnchorView(videoHolder);
                }
            });
        }
    });
    videoHolder.setMediaController(new MediaController(this));
    videoHolder.setVideoURI( Uri.parse(mediaURL) );
    videoHolder.requestFocus();
    videoHolder.start();
} 
```

这里是程序化 AddToLayout() 方法的代码，它创建了应该在 XML 中的布局。（我没有使用 xml 布局文件，出于某种我仍然无法理解[的原因，应用程序找不到 xml 文件](https://stackoverflow.com/questions/13187223/)）：

```
private void programaticallyAddToLayout( VideoView videoView ) 
{
    FrameLayout layout = new FrameLayout(this);
    FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(800, 600);
    layoutParams.gravity = Gravity.CENTER;
    layout.setId(1);
    layout.setLayoutParams(layoutParams);

    videoView.setId(2);
    layout.addView( videoView, layoutParams );
    this.setContentView( layout );
} 
```

这是应用程序的屏幕截图，供参考：

![抓屏](../Images/fa886952e39567c49a14583150c82c19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:24:27.787

我在 Android 2.1 和 2.2 中遇到了这个问题，但在我移植到 2.3 时没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:30:00.610

关于如何解决这个问题，我想到了几件事。首先，你为什么`requestFocus()`打电话`VideoView`？这可能会产生不利影响。

如果这使您`VideoView`落后于其他视图，您可以将其移至前面，如下所示：

```
videoview.setZOrderMediaOverlay(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T18:45:25.310

在 say red 的视频视图上放置背景以进行测试。视频或布局可能会覆盖您的按钮，如果 clickable=true 则事件不会传播到该布局并点击按钮。

# mysql - 简单的 MySQL 查询帮助：如何获取具有一个字段值但没有另一个字段值的所有用户

> ID：13255478
> 
> 赞同：0
> 
> 时间：2012-11-06T16:40:05.000
> 
> 标签：mysql

MySQL 非常糟糕，因为我只在 oracle dbs 上完成了轻量级的网页设计和 SQL。假设我有一张桌子，列出了人们喜欢的所有水果。

```
name   fruit
------------
john   bananas
john   oranges
marcy  bananas
dave   oranges
lucy   bananas
lucy   oranges 
```

假设我想获取所有喜欢橙子但没有具体说明他们是否喜欢香蕉的人的名字。这张表中只有两种可能的水果。（它可能会扩展到更多，但通常只有两个）。

查询会是什么？我想要一个只返回“dave”的查询，因为 marcy 只指定了她喜欢香蕉，而 john 和 lucy 说他们都喜欢。我认为我不需要加入，因为这只是一张桌子。

我正在努力

```
select name from table
where(--uhm.. use the stuff below somehow
select name from table
where fruit like 'bananas';
select name from table
where fruit like 'oranges';
) 
```

如果一个查询返回所有喜欢橙子但不喜欢香蕉，或喜欢香蕉但不喜欢橙子的人，我也会非常高兴。我不知道哪个查询会更容易。

此外，我确信我能够在互联网上找到其他有同样问题的人。你会在谷歌上使用什么查询来回答我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:44:23.063

我想这应该可以解决问题：

```
SELECT DISTINCT name 
  FROM fruits
 WHERE fruit = 'likedFruit'
   AND name NOT IN (
     SELECT name 
       FROM fruits
      WHERE fruit = 'hatedFruit'); 
```

最好从内部读取此查询：

*   首先（使用`NOT IN`嵌套查询）你收集不喜欢某些特定水果的人的所有名字（我们称他们为“水果仇恨者”）
*   然后，*对于每一行*，您都检查该行是否存储有关某些好水果的数据，如果是，则该行中的名称属性是否不是这些讨厌的“水果仇恨者”中的一个。

我们必须在这里使用嵌套查询或连接，因为单行没有关于某人最喜欢的水果的所有信息。而且，实际上，`DISTINCT`在这种特殊情况下不需要 - 但如果`(name, fruit)`组合不是，它将很有用`UNIQUE`。

这是可以使用的**[SQL Fiddle](http://sqlfiddle.com/#!2/943d7/3)**。这是一篇非常[有用的文章](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)，比较（性能方面）实现相同结果的几种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:33:43.087

您也可以尝试以下查询。

> SELECT Name FROM (SELECT Name, GROUP_CONCAT(Fruit) as Fruits FROM Table GROUP BY Name) t1 where Fruits not like '%HatedFruit%';

# c++ - unsigned char ** 到 opencv mat

> ID：13255480
> 
> 赞同：7
> 
> 时间：2012-11-06T16:40:08.223
> 
> 标签：c++, image-processing, opencv, double-pointer

我快到了，但我不太明白如何转换

```
unsigned char ** to a cv::Mat 
```

我知道 cv::Mat 的 .data 部分是 uchar*

我正在使用一个以...的形式返回和图像的函数

```
unsigned char ** output; 
```

但我的其余代码使用 cv::Mat's。我也没有我正在使用的库的源代码，所以我真的不知道它在做什么。

**编辑** 感谢您的帮助，我已经做到了...

```
cv::Mat TempMat = cv::Mat(h, w, CV_8UC1, *output);
imshow("this is a test",TempMat); 
```

但图像是黑色的，所以我现在需要找出那里是否真的有任何东西。

抱歉缺乏研究，我的截止日期很紧，不，这不是家庭作业，试图准备一些东西来向教授展示结果！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T17:03:53.533

您必须使用带有指向数据的指针的[Mat 构造函数：](https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a9fa74fb14362d87cb183453d2441948f)

```
 // constructor for matrix headers pointing to user-allocated data
    Mat(int _rows, int _cols, int _type, void* _data, size_t _step=AUTO_STEP);
    Mat(Size _size, int _type, void* _data, size_t _step=AUTO_STEP); 
```

您必须转换`void**`为`void*`并在此之后使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T09:32:17.220

也许你应该`*`删除

```
cv::Mat TempMat = cv::Mat(h, w, CV_8UC1, *output); 
```

让它像这样：

```
cv::Mat TempMat = cv::Mat(h, w, CV_8UC1, output); 
```

# c# - 以 C# UK 和 US 格式将 String 转换为 DateTime

> ID：13255484
> 
> 赞同：10
> 
> 时间：2012-11-06T16:40:29.847
> 
> 标签：c#

我正在尝试将字符串转换为日期时间

我一直在使用

```
DateTime convertedDate = DateTime.Parse(lastModificationDate); 
```

转换日期

我的问题是，有时日期是英国格式，有时是美国格式

即英国`11/09/2011 10:34` 美国`2/28/2010 13:56`

当我不确定字符串将采用哪种格式（即 us 或 uk）时，如何处理这两种格式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T16:42:17.463

你根本做不到。你没有足够的数据。作为*人类*，这里涉及哪个日期？

```
11/09/2011 10:34 
```

是 9 月 11 日还是 11 月 9 日？

如果您无法分辨出*人类*的区别，那么计算机就没有机会这样做。

现在，如果您可以从同一数据源中的其他地方获得信号，那么这就是一个开始 - 例如，您可以试探性地尝试将所有日期解析为美国格式，将所有日期解析为英国格式，如果 100% 传递为英国格式，但 60% 的美国格式失败（由于试图将天数解析为无效月份），那么您可以合理地假设它们是英国日期。

不过，这永远不会是一个完整的解决方案——因为您可以拥有一个数据源，其中包含一堆日期，这些日期在两种格式中*都是有效的（但具有不同的含义）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:45:30.600

出于这个原因，您应该以标准化格式（通常是 UTC）将日期时间存储在数据库中。

然后，您可以使用 javascript 等从 UTC 解析用户本地日期时间。

# excel - 带有 WHERE 参数的 Excel SUM 语句？

> ID：13255490
> 
> 赞同：1
> 
> 时间：2012-11-06T16:40:40.650
> 
> 标签：excel

我有下面的代码，它可以让我得到从“第一个”到“最后一个”的所有工作表上 F18 的总值

```
=SUM(First:Last!F18) 
```

我该如何修改它，使其使用以下逻辑：

First 和 Last WHERE B12 = "Name1" 之间的所有工作表中的 F18 总数

Name1 可以出现在多个工作表上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:02:52.687

除非您有所有工作表的列表，否则使用公式并不容易。如果您将该列表命名为，`WSList`则可以使用以下公式：

```
=SUMPRODUCT(SUMIF(INDIRECT("'"&WSList&"'!B12"),"Name1",INDIRECT("'"&WSList&"'!F18"))) 
```

# windows - CMake 内部错误 (TEST_BIG_ENDIAN)

> ID：13255491
> 
> 赞同：4
> 
> 时间：2012-11-06T16:40:44.850
> 
> 标签：windows, cmake, itk

我在 Windows 7 64 位上使用 CMake（尽管我正在编译 32 位）。

我正在尝试安装[vxl](http://vxl.sourceforge.net/)库，当我（从界面）运行 CMake 时，出现以下错误：

```
The C compiler identification is unknown
The CXX compiler identification is unknown
Check if the system is big endian
Searching 16 bit integer
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/TestBigEndian.cmake:44 (message):
  no suitable type found
Call Stack (most recent call first):
  config/cmake/config/CMakeLists.txt:287 (TEST_BIG_ENDIAN)

Configuring incomplete, errors occurred! 
```

我将 VS 2008 的默认编译器用于 32 位。它看起来像一个内部 CMake 错误，我在互联网上找不到任何有用的东西。问题是当我尝试重新配置-已经安装的-ITK 库时，我得到了同样的[错误](http://www.itk.org/)。

**注意：**当我第一次尝试配置 CMake 时，我得到了无数类型的错误：

```
CMake Error: Internal CMake error, TryCompile configure of cmake failed 
```

创建 CMakeCache 并设置 cmake 变量后，它们不会再次出现。在第二个“配置”中尝试只出现第一个错误。

我真的不知道如何继续，有人可以帮忙吗？先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-12T17:40:13.367

刚遇到这个问题。由于 gcc 问题，我之前的构建出错了。

修复构建后，我运行 cmake 而不将构建文件夹擦干净并收到此错误。

一个简单的`rm -rf *`（确保您在使用它时位于正确的目录中！）删除了不需要的文件/文件夹（CMakeFiles、CMakeCache.txt 等）。

再次运行 cmake 给了我一个成功的构建。所以是的，在运行 cmake 之前确保你的目录是干净的，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T20:16:50.407

以管理员身份运行 cmake-gui 解决了我的类似问题。

# python - RNCryptor 和 Python 服务器

> ID：13255493
> 
> 赞同：4
> 
> 时间：2012-11-06T16:41:08.387
> 
> 标签：python, ios, encryption, rncryptor

我正在使用 RNCryptor 在 iOS 上加密 NSData 并将其发送到 Python 服务器。到目前为止，非常正确。当我尝试在服务器端解密 NSData 时，我的问题就来了。

RNCryptor 将所有相关数据嵌入到加密的标头中，但我无法在服务器端获取 IV 来解密接收到的数据。

任何的想法？

**配置：** *带有 RNCryptor / Python + Tornado Web 服务器的 iOS 5.0*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:22:05.003

好吧，它没有加密，它只是将标头信息添加到 NSData。如果您不使用基于密码的加密，我认为您需要跳过 2 个字节，然后读取 IV 的长度以获取 iv。但根据各种设置，标题长度有条件地更改，请参阅完整详细信息：

*   [数据格式](https://github.com/rnapier/RNCryptor/wiki/Data-Format)
*   [RNCryptor 标头读取代码](https://github.com/rnapier/RNCryptor/blob/master/RNCryptor/RNDecryptor.m#L153)

# wpf - 动态更新 WPF 数据模板

> ID：13255494
> 
> 赞同：0
> 
> 时间：2012-11-06T16:41:10.787
> 
> 标签：wpf, datatemplate

我有以下按钮 XAML

```
<Button Name="btnLogoff" DockPanel.Dock="Left" Click="btnToolbar_Click" CommandParameter="LOGOFF"
                    Template="{DynamicResource ToolbarButton}"
                        Style="{StaticResource ToolbarButtonDisplay}" z:ButtonProperties.Image="..\..\Resources\Images\Logoff.GIF" Content="Logoff">
                </Button> 
```

ButtonProperties如下

```
public class ButtonProperties
    {
        public static ImageSource GetImage(DependencyObject obj)
        {
            return (ImageSource) obj.GetValue(ImageProperty);
        } 

        public static void SetImage(DependencyObject obj, ImageSource value)
        {
            obj.SetValue(ImageProperty, value);
        } 

        public static readonly DependencyProperty ImageProperty = DependencyProperty.RegisterAttached("Image", typeof(ImageSource), typeof(ButtonProperties), new UIPropertyMetadata((ImageSource)null));
    } 
```

效果很好，给我一个按钮模板，我可以在整个应用程序中使用具有图像和文本组件的按钮。

我想要做的是在某些后台线程方法上将样式从 ToolbarButton 动态更改为 ToolbarButtonRed，例如通知用户即将发生事件，按钮将变为红色样式。两种样式都在 XAML 页面的资源中，但我不知道如何以编程方式更改模板。

我努力了..

```
 public DataTemplate AlarmTemplate
        {
            get
            {
                if (_alarmTemplate != null)
                    return _alarmTemplate;
                else
                    return (DataTemplate)_parent.FindResource("ToolbarButton");
            }
            set
            {
                _alarmTemplate = value;
                OnPropertyChanged("AlarmTemplate");
            }
        }

private void SetAlarmIcon(bool red)
        {
            if (red)
                AlarmTemplate = (DataTemplate)_parent.FindResource("ToolbarButtonRed");
            else
                AlarmTemplate = (DataTemplate)_parent.FindResource("ToolbarButton");
        } 
```

并像这样绑定 XAML

但没有喜悦。该按钮甚至根本不显示。有什么建议么？

更新：

下面的样式

```
<Style x:Key="ToolbarButtonDisplay" TargetType="Button">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <Image Source="{Binding Path=(Windows:ButtonProperties.Image), RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}" Margin="0,2,0,0" Width="32"/>
                        <TextBlock FontSize="9" FontWeight="Normal" FontFamily="Arial" Foreground="White" HorizontalAlignment="Center" Margin="2,2,2,2">
                                <ContentPresenter Content="{Binding Path=Content, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}"></ContentPresenter>
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=IsEnabled}" Value="True">
                <Setter Property="Template" Value="{StaticResource ToolbarButtonRed}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

最终更新 - 我得到了一个触发器，如下所示

```
<Style.Triggers>
            <DataTrigger Binding="{Binding Path=DisplayToolbar}" Value="True">
                <Setter Property="Template" Value="{DynamicResource ToolbarButtonRed}"/>
            </DataTrigger>
        </Style.Triggers> 
```

通过仅在数据上下文（DisplayToolbar）上使用任意属性，因为我不确定如何针对按钮执行此操作。解释一下，我在页面上有大约 30 个按钮，它们都使用相同的样式，因此使用相同的触发器，因此上面的代码会将所有 30 个设置为红色。我需要一种方法让每个按钮来锻炼 IT 和 IT ALONE 是否应该是红色的，所以我正在考虑设置按钮控件的某些属性（如果有一个我可以使用），并让数据触发器查看按钮属性，而不是数据上下文。绑定到按钮自身属性而不是数据上下文的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:50:46.580

它应该像将 Style 属性设置为 FindResource 中的值一样简单。

```
Dispatcher.Invoke(() => { btnLogoff.Style = (Style)FindResource("ToolbarButtonRed"); }); 
```

此处使用调度程序调用，因为您无法从后台线程设置控件的依赖项属性。

根据下面的评论，可以以完全相同的方式设置控件模板。

```
 Dispatcher.Invoke(() => { btnLogoff.Template = (ControlTemplate)FindResource("ToolbarButtonRed"); }); 
```

# php - 根据 jquery 请求找不到页面

> ID：13255506
> 
> 赞同：1
> 
> 时间：2012-11-06T16:41:52.443
> 
> 标签：php, jquery, codeigniter

我试图弄清楚我在这里做错了什么。我有这个用于我的 jQuery 代码，我还有一个名为 delete 的 php 控制器函数，看起来像这样。现在，当我单击带有 delete 类的元素时，它会尝试向该页面发出请求，但找不到它。

```
mysite.com/cms/ctrlpanel/users/delete 

public function delete($user_id)
{
}    

$route['cms/ctrlpanel/users/delete/(:num)'] = 'users/delete/$1';

$('.delete').click(function(e){
    var element = $(this);
    e.preventDefault();
    $.post('/cms/ctrlpanel/users/delete', { 'user_id' : element.attr('rel') }, function(data) 
    {

    ), 'json');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:49:56.563

```
$('.delete').click(function(e){
    var element = $(this).attr('rel');
    e.preventDefault();
    $.post('users/delete/' + element);
}); 
```

哎呀。

```
public function delete($user_id){
    $user_id = (int)$user_id; 
```

# mysql - MySQL 错误：“字段列表”错误中的未知列

> ID：13255517
> 
> 赞同：0
> 
> 时间：2012-11-06T16:42:29.147
> 
> 标签：mysql

嘿伙计们，我的 MySQL 有问题，我正在尝试在表中插入数据，但它返回此错误消息

> 致命错误：SQL: SELECT e.idtarea AS 'idTarea', e.detalle AS 'detalle', e.precio AS 'precio', e.idOrdenReparacion AS 'idOrdenReparacion', `e.fecha`AS 'fecha', concat('Editar', ' Eliminar' ) AS Opciones 来自 Tarea e WHERE e.idtarea like '%%' ORDER BY e.idtarea;，错误：/opt/lampp/htdocs/scep/tareas 中的 'field list' 中的未知列 'e.fecha'。第 75 行的 php

**这是我的代码：**

```
 $SQL="

      SELECT 
        e.idtarea AS 'idTarea', 
        e.detalle AS 'detalle', 
        e.precio AS 'precio', 
        e.idOrdenReparacion AS 'idOrdenReparacion', 
        e.fecha AS 'fecha', 
        concat('<a href=\'editarTarea.php?id=',e.idtarea,'\'>Editar</a>&nbsp;','<a href=\'eliminarTarea.php?id=',e.idtarea,'\' onclick=javascript:confirm(\'Eliminar?>\')>Eliminar </a>') AS Opciones 
      FROM Tarea e ".$FILTRAR_POR." 
      ORDER BY e.idtarea;";

      $RESULT = mysql_query($SQL) or trigger_error("SQL: $SQL, Error: " . mysql_error(), E_USER_ERROR); 
```

**来自数据库的表 Tarea：**

```
CREATE TABLE IF NOT EXISTS `Tarea` (
   `idTarea` int(11) NOT NULL AUTO_INCREMENT,
   `detalle` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,
   `precio` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,
   `idOrdenReparacion` int(11) NOT NULL DEFAULT '0',
   `fecha` date DEFAULT NULL,
   PRIMARY KEY (`idTarea`,`idOrdenReparacion`),
   KEY `fk_Tarea_OrdenReparacion1_idx` (`idOrdenReparacion`)
  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=2 ;

.....

  ALTER TABLE `Tarea`
  ADD CONSTRAINT `fk_Tarea_OrdenReparacion1` FOREIGN KEY (`idOrdenReparacion`) 
  REFERENCES `OrdenReparacion` (`idOrdenReparacion`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:46:11.343

您是否已验证该表的先前版本在该列不存在的情况下不存在？如果表已经有一个版本，那么您的 SQL 将不会更改表中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:54:04.700

字段名和别名必须用反引号括起来，而不是像您那样用单引号括起来。更新查询：

```
$SQL="SELECT 
    e.idtarea AS `idTarea`, 
    e.detalle AS `detalle`, 
    e.precio AS `precio`, 
    e.idor AS `idOrdenReparacion`, 
    e.fecha AS `fecha`, 
    concat('<a href=\'editarTarea.php?id=',e.idtarea,'\'>Editar</a>&nbsp;','<a href=\'eliminarTarea.php?id=',e.idtarea,'\' onclick=javascript:confirm(\'Eliminar?>\')>Eliminar </a>') AS Opciones 
  FROM Tarea e ".$FILTRAR_POR." 
  ORDER BY e.idtarea;"; 
```

# triggers - 触发更新表

> ID：13255523
> 
> 赞同：0
> 
> 时间：2012-11-06T16:42:42.813
> 
> 标签：triggers, sql-server-2000

我正在尝试创建一个触发器，该触发器将使用 OrderDetail 表中的订单信息更新我的 Orders 表。明细表可以为订单中的多个项目包含多行。这些通过 OrderID 链接在一起。到目前为止，我所拥有的是：

```
CREATE TRIGGER AfterOrderDetailInsert ON OrderDetail 
AFTER INSERT AS
UPDATE Orders 
SET OrderTotal = (
    SELECT (
        SELECT Sum(orderdetail.quantity * OrderDetail.Price * 
            ( 1.0 -OrderDetail.ItemDiscount / 100.0 )
        )
        FROM orderdetail 
        WHERE OrderDetail.OrderId = Orders.OrderId
    ) * 
    ( 1 - Orders.OrderDiscount / 100.0 ) * 
    ( 1.0 - Orders.CustomerDiscount / 100.0 )     
    FROM OrderDetail 
    INNER JOIN Orders on OrderDetail.OrderID=Orders.OrderID 
    WHERE OrderDetail.OrderID IN (SELECT OrderID FROM Inserted)
) 
```

我现在收到一个错误，说子查询返回了超过 1 个值。这不应该只返回一个总值吗？我尝试添加 SUM 以使其 UPDATE Orders Set OrderTotal = SUM(SELECT (SELECT OrderTotal Stuff))，但这在第一个 SELECT 之前给了我一个语法错误。

这是在 SQL Server 2000 上。

编辑：我已将查询更改为插入后，因为我希望在任何插入后更新 ordertotal

第二次编辑：我正在尝试包含插入的元表，因为它应该包含最新插入行的订单 ID，并且一次只能插入一行。现在虽然我收到一条错误消息，提示“键列信息不足或不正确。更新影响了太多行”。查看订单总额列，我表中的每一行都会更新为该订单总额。所以我想我已经接近了，但我仍然缺少一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T18:58:21.503

好吧，终于弄明白了。该技巧最终使用 Inserted 表的 Order ID 用于查询中引用 OrderID 的所有地方以及更新查询，因此我的最终查询如下所示：

```
CREATE TRIGGER AfterOrderDetailInsert ON OrderDetail 
AFTER INSERT AS
UPDATE Orders 
SET OrderTotal = (
SELECT (
    SELECT Sum(orderdetail.quantity * OrderDetail.Price * 
        ( 1.0 -OrderDetail.ItemDiscount / 100.0 )
    )
    FROM orderdetail 
    WHERE OrderDetail.OrderId = Orders.OrderId AND OrderDetail.OrderID in
   (SELECT TOP 1 OrderID From Inserted)) * 
( 1 - Orders.OrderDiscount / 100.0 ) * 
( 1.0 - Orders.CustomerDiscount / 100.0 )     
FROM OrderDetail 
INNER JOIN Orders on OrderDetail.OrderID=Orders.OrderID 
INNER JOIN INSERTED on Orders.OrderID=Inserted.OrderID
) WHERE Orders.OrderID IN (SELECT TOP 1 OrderID FROM Inserted) 
```

主要区别是我从未为更新子句设置任何条件，因为我将它与 SELECT 查询的条件混合在一起。

# wordpress - 隐藏菜单时无法创建新的 CPT

> ID：13255525
> 
> 赞同：2
> 
> 时间：2012-11-06T16:42:50.153
> 
> 标签：wordpress

我正在添加大量自定义帖子类型和分类法，因此如果我没有将它们全部添加到管理菜单的顶层，它通常会在视觉上更清晰。相反，我更愿意将它们添加到适当的子菜单下。我用这两个步骤的方法没有太多的努力做到了这一点：

1.  注册 CPT 时使用“show_ui”属性隐藏 CPT
2.  使用 add_submenu_page() 调用将它们添加回来

例如，下面是一个名为“companies”的 CPT 的 add_submenu_page 调用示例：

```
add_submenu_page (LG_ADMIN_MENU,"Companies","Companies","manage_options",'edit.php?post_type=companies'); 
```

通过这两个步骤，我现在可以查看 CPT，我可以修改现有属性，甚至可以删除一条记录，但我不能做的是添加一条记录。当我单击“添加新”按钮时，它会返回一个仅显示“无效帖子类型”的白屏。

现在，如果我只是打开普通的顶级菜单（不理会所有其他设置），我会得到菜单现在显示为子菜单（来自我的 add_submenu_page 调用）和顶级菜单（因为我已经打开用“show_ui”重新打开。然后我可以毫无问题地添加新项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:33:43.633

那是因为在第一行`/wp-admin/post-new.php`我们有这个：

```
if ( !isset($_GET['post_type']) )
    $post_type = 'post';
elseif ( in_array( $_GET['post_type'], get_post_types( array('show_ui' => true ) ) ) )
    $post_type = $_GET['post_type'];
else
    wp_die( __('Invalid post type') ); 
```

你没有通过那个`'show_ui' => true`条件。

是时候发挥创意了：）

```
add_action( 'admin_menu', 'so_13255525_admin_menu' );

function so_13255525_admin_menu() 
{
    global $submenu;

    $submenu['index.php'][25] = $submenu['edit.php?post_type=portfolio'][5];
    $submenu['index.php'][30] = $submenu['edit.php?post_type=portfolio'][10];

    remove_menu_page( 'edit.php?post_type=portfolio' ); 
} 
```

**结果是：**
![$submenu 全局操作](../Images/77e22ddacbf1a00e86133d2f22de7cd6.png)

* * *

`show_ui`设置为真。您必须对其进行调整以适应您的需求。

使用它来检查全局：

```
add_action( 'admin_notices', 'so_13255525_admin_notice' );

function so_13255525_admin_notice() 
{
    if( !current_user_can( 'delete_plugins' ) )
        return;
    global $submenu;
    echo '<pre>' . print_r( $submenu, true ) . '</pre>';
} 
```

# r - 在 R 中手动创建图框

> ID：13255527
> 
> 赞同：1
> 
> 时间：2012-11-06T16:42:57.727
> 
> 标签：r, plot, frame

我需要控制 R 中基本 xy 图的样式，因此构建了这样的绘图区域：

```
frame()
plot.window(xlim=c(0,1), ylim=c(-.6, .8))
axis(1, at=c(0, .2, .4, .6, .8, 1.0), lwd=2)
axis(2, at=c(-.6, -.4, -.2, 0, .2, .4, .6, .8), lwd=2) 
```

但是，我无法弄清楚如何围绕该图创建一个物理框架（使用 lwd = 2）。是否可以（有必要？）使用`line()`or `polygon()`？还是有更多内置的东西？

我也对如何更改使用该`plot()`函数创建的绘图的框架和轴权重感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:58:39.190

您可能的意思是`box()`：

```
frame()
plot.window(xlim=c(0,1), ylim=c(-.6, .8))
axis(1, at=c(0, .2, .4, .6, .8, 1.0), lwd=2)
axis(2, at=c(-.6, -.4, -.2, 0, .2, .4, .6, .8), lwd=2)
box(lwd = 2) 
```

![在此处输入图像描述](../Images/ad588015614cb6a39fbfca7713a85caa.png)

# java - unicode中的id3字节顺序标记

> ID：13255532
> 
> 赞同：1
> 
> 时间：2012-11-06T16:43:25.883
> 
> 标签：java, id3, unicode-string, byte-order-mark

我正在使用 java 中的 id3V2.3，我已经使用 setTextEncoding 将 textencoding 更改为 unicode。问题是我找不到将 BOM 更改为小端的方法。我检查了我生成的 ID3 标签，似乎他们默认在框架体字符串的开头添加了 FE FF。我想将其更改为 FF FE 作为小端。如果有人知道如何处理它？太感谢了！PS：这是 unicode 还是 id3 的问题？我在 ID3 java 包中找不到任何与 BOM 设置相关的方法。

# zend-framework2 - 选择元素验证

> ID：13255535
> 
> 赞同：4
> 
> 时间：2012-11-06T16:43:40.620
> 
> 标签：zend-framework2, zend-form2

我的表单中有一个 Select 元素，如下所示：

```
$this->add(array(
    'name' => 'cat_id',
    'type' => 'Zend\Form\Element\Select',
    'options' => array(
        'label' => 'Categoria',
        'empty_option' => '',
        'value_options' => array(
            '' => '',
        ),
    ),
)); 
```

在我的`value_options`控制器中充满了数据库信息......（有更好的方法吗？）

我为他准备了一个 InputFilter，如下所示：

```
$this->add(array(
    'name' => 'cat_id',
    'required' => true,
    'validators' => array(
        array(
            'name' => 'NotEmpty',
            'break_chain_on_failure' => true,
            'options' => array(
                'messages' => array('isEmpty' => 'O campo "Categoria" é obrigatório'),
            ),
        ),
    ),
)); 
```

请注意，我想更改`isEmpty`消息……这就是问题所在！

当我提交表格时，我仍然收到相同的英文信息：

```
cat_id:
    isEmpty : Value is required and can't be empty 
```

所以我的问题是：为什么我还有这个消息？它是从哪里来的？我怎样才能改变它？

Ps.：使用 Text 元素，效果很好。只有使用 Select 元素我才会遇到这个问题。

额外的问题：

如果我想使用 InArray Validator，如下所示：

```
array(
    'name'    => 'InArray',
    'options' => array(
        'haystack' => array( ... ),
        'messages' => array(
            'notInArray' => 'Valor não encontrado no banco de dados' 
        ),
    ),
), 
```

我需要总是填补这个`haystack`领域？没有办法告诉验证器使用表单`value_options`？

天呐！

**编辑**

**我不确定**，因为没有人证实这一点，但我猜 ZF2 在您设置表单元素时会对表单元素进行默认验证`type`。

举个例子，

```
$this->add(array(
    'name' => 'cat_id',
    'type' => 'Zend\Form\Element\Select',
    'options' => array(
        'empty_option' => '',
        'value_options' => array(
            // ...
        ),
    ),
    'attributes' => array(
        // ...
    ),
)); 
```

在这种情况下，ZF2 会为 Select 元素创建一些默认验证，例如检查是否为空并检查大海捞针。

那么如何覆盖此验证中的消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:27:29.127

有一种方法可以解决这个问题。它应该删除默认的验证消息。只需在表单的构造函数中添加该行。

**$this->setUseInputFilterDefaults(false);**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T15:20:44.483

所以这是旧的，但我想我会给出一个答案，希望能帮助未来的搜索。

你有`'required' => true,`你的选择之一。这也会导致在现场进行验证。本质上与 Select Elements 的 NotEmpty 验证器相同。

我没有对此进行测试，但我猜如果你删除`'required' => true`并留下 NoEmpty 验证器，你会收到你的消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T17:33:26.983

```
 $inputFilter = new InputFilter();

    $factory = new InputFactory();

    $inputFilter->add($factory->createInput(array(
        'name' => 'username',
        'required' => true,
        'filters' => array(
            array('name' => 'StripTags'),
            array('name' => 'StringTrim'),
        ),
        'validators' => array(
            array(
              'name' =>'NotEmpty', 
                'options' => array(
                    'messages' => array(
                        \Zend\Validator\NotEmpty::IS_EMPTY => 'User name can not be empty.' 
                    ),
                ),
            ),
            array(
                'name' => 'StringLength',
                'options' => array(
                    'encoding' => 'UTF-8',
                    'min' => 4,
                    'max' => 20,
                    'messages' => array(
                        'stringLengthTooShort' => 'Please enter User Name between 4 to 20 character!', 
                        'stringLengthTooLong' => 'Please enter User Name between 4 to 20 character!' 
                    ),
                ),
            ),

        ),
    ))); 
```

# oracle - 如何在 Oracle 中进行自外连接？

> ID：13255537
> 
> 赞同：1
> 
> 时间：2012-11-06T16:43:46.290
> 
> 标签：oracle, outer-join, self-join

如何在 oracle 中进行自我外部加入？（我用的是 11g）

我尝试了以下查询，其中有很多 (+) 无处不在和 left/right 的组合：

```
select t1.name, t1.status, t2.status
from my_tab t1 outer join my_tab t2
on t1.name = t2.name
where t1.year= X and t2.year = Y and t1.status <> t2.status; 
```

预期结果：在 X 年和 Y 年之间改变身份的人，以及新的人和失踪的人

只有改变状态的人

* * *

甲骨文的[文档](http://docs.oracle.com/cd/B12037_01/server.101/b10759/queries006.htm)说

> 您不能使用 (+) 运算符将表外连接到自身

它是否仅适用于 (+) 运算符，还是我应该阅读“您不能将表外部连接到自身”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:55:03.903

肮脏的解决方案：

```
--request presented above
select t1.name, t1.status as status_X, t2.status as status_Y
from my_tab t1 join my_tab t2
on t1.name = t2.name
where t1.year = X and t2.year = Y and t1.status <> t2.status

union
--stuff that disappeared from X to Y
select name, status, null
from my_tab
where year = X and name not in (select name from my_tab where year = Y)

union
--new stuff
select name, null, status
from my_tab
where year = Y and name not in (select name from my_tab where year = X) 
```

# android - Android 来电显示指定

> ID：13255538
> 
> 赞同：0
> 
> 时间：2012-11-06T16:43:52.700
> 
> 标签：android

在 Android 手机中，当人们接到电话时，他们可以看到联系人、姓名和手机号码的图片。我也想知道如何在该列表中显示名称。

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:56:42.247

您无法修改来电屏幕，只能覆盖它，除非您正在创建自定义 Android ROM。

[在来电屏幕上弹出](https://stackoverflow.com/questions/8699257/popup-over-incoming-call-screen)

# jakarta-ee - 如何在一次查询中将文件中项目的选定项目设置为类？

> ID：13255543
> 
> 赞同：0
> 
> 时间：2012-11-06T16:44:18.083
> 
> 标签：jakarta-ee, jpa, ejb-3.0

我希望，一个人在一次查询中获得该人拥有的每个选定报价的请求列表（例如，'select * from Request r where r.selectedOffer = (select o from Offer r.offerList.owner = :owner(? ?)). 有可能吗？或者我必须使用两个查询（一个用于请求，一个用于报价），然后我必须将选定的报价设置为请求？

```
@Entity
public class Request() {

.....
@OneToMany(mappedBy = "requestId", fetch = FetchType.LAZY)
private Set<Offer> offerList = new HashSet<Offer>();

@Transient (or @OneToOne(mappedBy = "requestId"?? or another ways?)
private Offer selectedOffer;
.....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:48:30.347

试试下面：

```
 "FROM Request req JOIN req.offerList offer "+
      " WHERE req.selectedOffer.offerId = offer.offerId AND offer.owner = :owner" 
```

或者我认为这应该这样做：

```
 "FROM Request req WHERE req.selectedOffer.owner = :owner" 
```

我假设`offerId`是`Offer`实体的主键。

# android - 在 if 块中提供短值并将它们提供给不同活动中的另一种方法

> ID：13255544
> 
> 赞同：0
> 
> 时间：2012-11-06T16:44:18.920
> 
> 标签：android

我有一段代码可以在点击时为短 gridSize 提供一个值（这就是我希望它做的事情，如果您发现任何错误，请纠正我）。但现在它还没有做任何事情......

给出短值的代码：

```
public static short getGridSize(PuzzleActivity puzzleActivity, ImageButton view)  {
        if ( mIbtn3x3 == view) {
            String puzzle3 = "3";
            Short gridSize = Short.parseShort(puzzle3);
        } else if (mIbtn4x4 == view ) {
            String puzzle4 = "4";
            Short gridSize = Short.parseShort(puzzle4);
        } else if (mIbtn5x5 == view ) {
            String puzzle5 = "5";
            Short gridSize = Short.parseShort(puzzle5);
        }
        return Short.parseShort(PuzzleActivity.gridSize);
    } 
```

应该接收值的代码（拼图活动）：

```
 createGameBoard(SizeSelection.getGridSize(this));
            break; 
```

在 if 块代码中：gridSize 收到以下错误：“gridSize 无法解析或不是字段”。

在 PuzzleActivity 代码中：.getGridSize 收到以下错误：“SizeSelection 类型中的方法 getGridSize(PuzzleActivity, ImageButton) 不适用于参数 (PuzzleActivity)”。

显然我不是专业的编码员。请帮我解决这个问题。在此先感谢~olijf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:57:11.897

First - variable range. Java variable lives between brackets - {} At this line:

```
return Short.parseShort(PuzzleActivity.gridSize); 
```

You just have not declared static field "gridSize" in your class. Do something like that:

```
static short getGridSize(){
private short gridSize;
if{...}
else if{...}
return gridSize;
} 
```

Seccond error indicates that you call getGird() with wrong arguments (types) and use PuzzleActivity instead of ImageButton

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:50:47.060

这里发生了一些事情。我要介绍的第一件事是编译器错误。

听起来您`getGridSize`从代码中调用错误，它希望您`ImageButton`与活动一起传递。

假设您的`ImageButton`被调用`imageButton`，代码看起来像这样（将其绑定，`view`以便您可以打开它）：

```
createGameBoard(SizeSelection.getGridSize(this, imageButton)); 
```

在内部`getGridSize`，您不会重置 gridSize 变量，而是在每个 if/then 块中创建一个新变量。你需要做这样的事情：

```
Short gridSize = -1;
if(mIbtn3x3 == view) {
    String puzzle3 = "3";
    gridSize = Short.parseShort(puzzle3);
}
else if(mIbtn4x4 == view) {
    String puzzle4 = "4";
    gridSize = Short.parseShort(puzzle4);
}
...
return Short.parseShort(gridSize); 
```

但实际上，您正在对`parseShort`. 我会做更多这样的事情：

```
public static short getGridSize(...) {
     switch(view) {
          case mIbtn3x3:
               return 3;
          case mIbtn4x4:
               return 4;
          case mIbtn5x5:
               return 5;
     }
} 
```

# cakephp - cakephp中搜索结果的分页

> ID：13255548
> 
> 赞同：5
> 
> 时间：2012-11-06T16:44:30.983
> 
> 标签：cakephp, cakephp-2.0

我已经实现了一个用户模型，并且我有一个简单的搜索表单，用于按性别、年龄、位置进行搜索。我正在使用分页器对结果进行分页。问题是它只记住第一页上的搜索条件。当我单击第 2 页或下一步等时。它默认返回搜索所有用户。

这是我的控制器中的脏搜索代码，基本上它只是检查提交的表单字段并对用户表中的匹配字段进行查询，然后对结果进行分页：

```
if (!empty($this->data)) { 
    // by name 
    if (!empty($this->data['User']['search_name'])) { 
  $this->paginate = array('conditions' => array('visible'=>1, 
'OR'=>array( 
                'User.username LIKE' => '%'.$this->data['User']['search_name'].'%', 
                'User.firstname LIKE' => '%'.$this->data['User']['search_name'], 
                'User.lastname LIKE' => '%'.$this->data['User']['search_name']) 
                 ), 'limit'=>'10', 'order'=>'User.username'); 
   } 
   // by gender 
   else if (!empty($this->data['User']['search_gender'])) { 
  $this->paginate = array('conditions' => array( 
  'visible'=>1, 
                'User.gender' => $this->data['User']['search_gender'] 
                ), 'limit'=>'10', 'order'=>'User.username'); 
  } 
  // by state 
  else if (!empty($this->data['User']['search_state'])) { 
  $this->paginate = array('conditions' => array( 
  'visible'=>1, 
                'User.state' => $this->data['User']['search_state'] 
                ), 'limit'=>'10', 'order'=>'User.username'); 
  } 

   // Send the results for the above criteria to the view 
   $results = $this->paginate('User'); 
   $this->set('users', $results); 

     } 
     // Default retrieval of all users 
    else { 
        $this->paginate = array('conditions'=>array('visible'=>1), 
'limit'=>'10', 'order'=>'User.username'); 
    $this->set('users', $this->paginate('User')); 
  } 
```

我试图弄清楚如何使分页的后续页面记住我的搜索条件。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T17:04:11.873

`$this->data`在第二页上是空的，因为它是通过发布您的搜索表单（未发布到第二页）填充的。

将您的搜索表单帖子更改为 GET ( `$this->Form->create('ModelName', array('type'=>'get')`) 并解析`$this->params`而不是`$this->data`

# php - 在包含的文件中使用外部变量 (PHP)

> ID：13255552
> 
> 赞同：0
> 
> 时间：2012-11-06T16:44:41.657
> 
> 标签：php, variables, include

我的目标是让多个站点运行相同的文件，但有一组变量来确定要访问的数据库：

```
<?php 

$siteDB = "this";
$domainName = "thisdomain";
$twitterName = "thistwitter";
$facebookName = "thisfacebook";

include 'http://www.mysite.com/site_files/index.php'; 

?> 
```

当我尝试访问它们中的变量时，`site_files/index.php`它们返回 NULL。我也尝试过使用`$GLOBALS['siteDB']`，但没有运气，这并不让我感到惊讶。

我知道有几个与此类似的问题，但我也想问这是否是最好的方法。我应该使用某种类型的配置文件还是会话变量？

* * *

我的网站文件组织如下：

`www.mysite.com/site1`

`www.mysite.com/site2`

`www.mysite.com/site3`

`www.mysite.com/site4`

* * *

这些站点的文件位于：

`www.mysite.com/site_files`

* * *

当文件更新时，因为所有站点都访问同一个文件，所以它们都会更新。上面的文件将位于：

`www.mysite.com/siteX/index.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:46:46.073

制作一个配置文件，并将其包含在您的其他文件中。

配置文件示例：

```
$config = array('site' => "this",
 'domain' =>  "thisdomain",
  'twitter' => "thistwitter",
 'facebook' => 'thisfacebook'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:53:38.690

我认为是 $GLOBALS['siteDB'] 而不是 $GLOBAL['siteDB']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T01:29:59.917

我最终通过使用绝对 URL 开始工作。

代替：

```
<?php 

$siteDB = "this";
$domainName = "thisdomain";
$twitterName = "thistwitter";
$facebookName = "thisfacebook";

include 'http://www.mysite.com/site_files/index.php'; 

?> 
```

* * *

我被建议使用：

```
<?php 

include $_SERVER['DOCUMENT_ROOT'].'/site1/config.php'; 
include $_SERVER['DOCUMENT_ROOT'].'/site_files/index.php'; 

?> 
```

其中`/site1/config.php`包含：

```
$siteDB = "this";
$domainName = "thisdomain";
$twitterName = "thistwitter";
$facebookName = "thisfacebook"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T01:51:02.680

由于没有一个答案可以解释实际问题是什么，因此尽管问题已经解决，但我会尝试一下。

当您使用：

```
include 'http://www.mysite.com/site_files/index.php'; 
```

您的服务器向地址发出 http 请求`www.mysite.com/site_files/index.php`，就像您请求页面时浏览器所做的一样。

上的服务器`mysite.com`将简单地解析其 php 并返回结果。此结果将包含在您的脚本中，但它不会（可能...）包含 php 代码，而是包含来自`/site_files/index.php`.

如果您想将变量传递给您请求的 url，您可以使用：

```
include 'http://www.mysite.com/site_files/index.php?var1=some_value;etc=value'; 
```

但这可能不是您想要的，因为如果所有文件都驻留在同一个文件系统上，它会使您的设置不必要地复杂化。

最重要的是，如果您想包含一个 php 脚本，请不要从 Web 服务器请求它，而是从文件系统请求它。

# .htaccess - 重定向整个域

> ID：13255553
> 
> 赞同：4
> 
> 时间：2012-11-06T16:44:47.833
> 
> 标签：.htaccess, redirect, dns, subdomain

是否可以将整个域重定向到另一个域？

我希望它以这种方式重定向：

```
domain.com/something --> www.domain.eu/something
sub.domain.com/folder/file.type --> sub.domain.eu/folder/file.type
super.mega.sub.domain.com --> super.mega.sub.domain.eu 
```

（对于任何子域和 / 之后的任何内容。）

我只能访问 com 域。

到目前为止，我已经为 .htaccess 文件发明了这段代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^domain.com$ [OR]
RewriteCond %{HTTP_HOST} ^domain.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule (.*)$ http://www.domain.eu/$1 [R=permanent,L] 
```

但它的工作方式如下：

```
sub.domain.com/something --> www.domain.eu/sub/something 
```

所以这是错误的。请问有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:20:07.940

试试这个，而不是你所拥有的：

```
RewriteEngine On

# for main domain
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.eu/$1 [L,R=301]

# for all subdomains
RewriteCond %{HTTP_HOST} !^www\.domain\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://%1.domain.eu/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:16:33.493

好的，我假设您想将整个域重定向到另一个页面，而不仅仅是一个页面..

因此，只需在您的 htaccess 文件中写入以下行

重写引擎开启

RewriteCond %{HTTP_HOST} ^yourolddomain.com$ [OR]

RewriteCond %{HTTP_HOST} ^www.yourolddomain.com$

RewriteRule (.*)$ [http://www.yournewdomain.com/](http://www.yournewdomain.com/) $1 [R=301,L]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T07:44:27.317

我通常只创建一个 index.html 文件并使用元标记重定向它：

```
<meta http-equiv="refresh" content="0;URL=http://www.newdomain.ext">
<meta http-equiv="refresh" content="0;URL=http://subdomain.newdomain.ext"> 
```

# xml - 为什么 JAXB Moxy 会抛出 ArrayIndexOutOfBoundsException？

> ID：13255557
> 
> 赞同：2
> 
> 时间：2012-11-06T16:45:13.333
> 
> 标签：xml, scala, jaxb, moxy

当使用 Moxy 作为 JAXB 实现时，以下类会导致异常：

```
@XmlRootElement(name="fraPage")
@XmlAccessorType(XmlAccessType.FIELD)
case class FraPage(@ScalaXmlTypeAdapter(value=classOf[FraSeqAdapter]) @ScalaXmlElementWrapper(name="fras") data:Seq[Fra],@XmlTransient id: FraPageId, @ScalaXmlElement header:FraPageHeader) extends PageWithId[FraPageId]{

  private def this()= this(null,null,null)
  lazy val isEmpty = data.isEmpty

}

Exception in thread "main" javax.xml.bind.JAXBException: 0
 - with linked exception:
[java.lang.ArrayIndexOutOfBoundsException: 0]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:908)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:157)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:170)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:157)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:117)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:107)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:363)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    at com.gottex.gottware.services.Dummy$.main(Dummy.scala:16)
    at com.gottex.gottware.services.Dummy.main(Dummy.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.ArrayIndexOutOfBoundsException: 0
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateDirectCollectionMapping(MappingsGenerator.java:2004)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMapping(MappingsGenerator.java:501)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMappings(MappingsGenerator.java:2265)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateMappings(MappingsGenerator.java:2225)
    at org.eclipse.persistence.jaxb.compiler.MappingsGenerator.generateProject(MappingsGenerator.java:201)
    at org.eclipse.persistence.jaxb.compiler.Generator.generateProject(Generator.java:185)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:913)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:905)
    ... 20 more

Process finished with exit code 1 
```

发生了什么，为什么？我正在使用 JDK 1.6.0.25 和 Moxy 版本 2.4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:14:13.187

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

这似乎是一个 MOXy 错误。类中调用`hasActualTypeArguments()`了`org.eclipse.persistence.jaxb.javamodel.reflection.JavaClassImpl`一个返回误报的方法。您可以使用以下错误跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/393809](http://bugs.eclipse.org/393809)

# javascript - 将 HTML 属性放入数组

> ID：13255562
> 
> 赞同：-6
> 
> 时间：2012-11-06T16:45:34.603
> 
> 标签：javascript, jquery

> **可能重复：**
> [采用来自 HTML 数据属性的变量值](https://stackoverflow.com/questions/13253556/adopting-variable-values-from-html-data-atributes)

我如何获得其中的属性

```
<li data-number-input="2" data-completion-number="2"></li> 
```

推入这些阵列

```
var numberInput = [];
var completionNumber = []; 
```

我已经尝试过了，但它使我的程序崩溃

```
 numberInput.push({
        "input": elm.data("number-input")
    });
 completionNumber.push({
        "completion": elm.data("completion-number")
    }); 
```

这是上一个问题的扩展...[采用 HTML 数据属性中的变量值](https://stackoverflow.com/questions/13253556/adopting-variable-values-from-html-data-atributes)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:47:52.027

尝试这个：

```
var numberInput = [];
var completionNumber = [];

$('li[data-number-input],li[data-completion-number]').each(function(){
   numberInput.push($(this).attr('data-number-input'));
   completionNumber.push($(this).attr('data-completion-number'));
}); 
```

这将遍历所有`li`具有属性的 's，`data-number-input`并且`data-completion-number`对于其中的每一个，它将各自的值推送到这些数组中。

# android - relaitveLayout上的android listview不能查看所有图像

> ID：13255563
> 
> 赞同：0
> 
> 时间：2012-11-06T16:45:36.880
> 
> 标签：android, android-listview, android-relativelayout

我正在做android应用程序，我只是在做一个listView，我希望我的rowview在左边有一个ImageView，在中间行有一个NAme，在右边有5个图像，但我的问题是图像2、3、4、5不是固定图像并取决于是否出现的行，但对我来说，它从不查看图像 2、3、4、5，只有 1 个（对不起，数字 1、2、3、4、5 是图标）。

我想要这个，对于这个数字，2、3、4、5 是可选视图。

![在此处输入图像描述](../Images/cad0b8445232bae80d85546c37c8daac.png)

这是我的 row.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content" android:id="@+id/row_def"
    android:orientation="horizontal" android:layout_width="fill_parent">

    <ImageView
        android:id="@+id/profile_picture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="6dip" />

    <TextView 
        android:id="@+id/Nombre_Amigo" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:layout_toRightOf="@id/profile_picture"
        android:gravity="center_vertical"  />

     <ImageView
        android:id="@+id/proveedor_icon"
        android:layout_width="16dip"
        android:layout_height="16dip"    
        android:layout_marginRight="6dip"
        android:layout_alignParentRight="true"   
        android:layout_alignParentBottom="true"
         />

      <ImageView
        android:id="@+id/proveedor_icon2"
        android:layout_width="16dip"
        android:layout_height="16dip"
        android:layout_above="@+id/proveedor_icon" 
        android:layout_marginRight="6dip"
        android:layout_alignParentRight="true"  />

       <ImageView
        android:id="@+id/proveedor_icon3"
        android:layout_width="16dip"
        android:layout_height="16dip"                       
        android:layout_toLeftOf="@+id/proveedor_icon"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="3dip"/>

        <ImageView
        android:id="@+id/proveedor_icon4"
        android:layout_width="16dip"
        android:layout_height="16dip"              
        android:layout_marginRight="3dip"    
        android:layout_toLeftOf="@+id/proveedor_icon2"
        android:layout_above="@+id/proveedor_icon3"
        />          

         <ImageView
        android:id="@+id/proveedor_icon5"
        android:layout_width="16dip"
        android:layout_height="16dip"        
        android:layout_marginRight="3dip"  
        android:layout_alignParentBottom="true"         
        android:layout_toLeftOf="@+id/proveedor_icon4" />

</RelativeLayout> 
```

这是我的适配器：

```
 @Override
  public View getView(int position, View convertView, ViewGroup parent) {

      View rowView = convertView;
    if (convertView == null ){//&& !myList.get(position).getIdTeneaPhoneAmigo().equals("NO")) { 

      LayoutInflater inflater = LayoutInflater.from(context);//context.getLayoutInflater();  
      rowView = inflater.inflate(R.layout.row_def, null);            
      ViewHolder viewHolder = new ViewHolder();
      viewHolder.text = (TextView) rowView.findViewById(R.id.Nombre_Amigo);
      viewHolder.image = (ImageView) rowView.findViewById(R.id.profile_picture);
      viewHolder.image.setAdjustViewBounds(true);
      viewHolder.image.setMaxHeight(48);
      viewHolder.image.setMaxWidth(48);
      viewHolder.icon_proveedor = (ImageView) rowView.findViewById(R.id.proveedor_icon);
      viewHolder.icon_proveedor2 = (ImageView) rowView.findViewById(R.id.proveedor_icon2);
      viewHolder.icon_proveedor3 = (ImageView) rowView.findViewById(R.id.proveedor_icon3);
      viewHolder.icon_proveedor4 = (ImageView) rowView.findViewById(R.id.proveedor_icon4);
      viewHolder.icon_proveedor5 = (ImageView) rowView.findViewById(R.id.proveedor_icon5);
      rowView.setTag(viewHolder);

    }

    Log.d("MyPerformanceArrayAdapter","getView, fora del if (convertView == null)");
    ViewHolder holder = (ViewHolder) rowView.getTag();

        Bitmap bitmap = myList.get(position).getPicSquare();
        Log.d("MyPerformanceArrayAdapter","Bitmap: "+bitmap);
        holder.image.setImageBitmap(bitmap);
        String nombre = myList.get(position).getNombreAmigo();
        holder.text.setText(nombre);
        Log.d("MyPerformanceArrayAdapter","name: "+nombre);
        int idRow = myList.get(position).getIdRowAmigo();
        int prov = myList.get(position).getIDRedsocial();

        if (prov == 0){
            holder.icon_proveedor.setImageResource(R.drawable.facebook_icon);
        }

        if (prov == 1){
            holder.icon_proveedor.setImageResource(R.drawable.agenda);
        }

        if(prov == 2){
            holder.icon_proveedor.setImageResource(R.drawable.linkedin_icon);
        }
        if(prov == 3){
            holder.icon_proveedor.setImageResource(R.drawable.twitter_icon);
        }
        if (prov == 4){
            holder.icon_proveedor.setImageResource(R.drawable.google_icon);
        }

        //////FUSION

        /////// FUSION DE SOLO 2 CONTACTOS
        if (prov == 5){
            Log.d("Adapter"," Fusion idRow: "+idRow);
            db = new DatabaseHandler(context);
            database = db.getReadableDatabase();    
            List<Integer> lista_prov = new ArrayList<Integer>();

            lista_prov = db.ObetenrProveedorSocial(idRow);
            Log.d("Adapter"," lista_prov: "+lista_prov);
            int i=0;
            for(int proveedor : lista_prov){

                    if(i==0){
                        if (proveedor == 0){
                            holder.icon_proveedor.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor.setImageResource(R.drawable.google_icon);
                        }
                        Log.d("ADAPTER","i: "+i);
                        Log.d("ADAPTER","proveedor: "+proveedor);
                    }

                    if(i==1){
                        if (proveedor == 0){
                            holder.icon_proveedor2.setImageResource(R.drawable.facebook_icon);
                        }
                        if (proveedor == 1){
                            holder.icon_proveedor2.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor2.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor2.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor2.setImageResource(R.drawable.google_icon);
                        }
                        Log.d("ADAPTER","i: "+i);
                        Log.d("ADAPTER","proveedor: "+proveedor);
                    }

                    i++;
                    Log.d("ADAPTER FINAL","i: "+i);
            }

        }

    /////// FUSION DE SOLO 3 CONTACTOS
        if (prov == 6){
            List<Integer> lista_prov = db.ObetenrProveedorSocial(idRow);
            int i=0;
            for(int proveedor : lista_prov){

                    if(i==0){
                        if (proveedor == 0){
                            holder.icon_proveedor.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==1){
                        if (proveedor == 0){
                            holder.icon_proveedor2.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor2.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor2.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor2.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor2.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==2){
                        if (proveedor == 0){
                            holder.icon_proveedor3.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor3.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor3.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor3.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor3.setImageResource(R.drawable.google_icon);
                        }

                    }

                    i++;
            }
        }

        /////// FUSION DE SOLO 4 CONTACTOS
        if (prov == 7){
            List<Integer> lista_prov = db.ObetenrProveedorSocial(idRow);
            int i=0;
            for(int proveedor : lista_prov){

                    if(i==0){
                        if (proveedor == 0){
                            holder.icon_proveedor.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==1){
                        if (proveedor == 0){
                            holder.icon_proveedor2.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor2.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor2.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor2.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor2.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==2){
                        if (proveedor == 0){
                            holder.icon_proveedor3.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor3.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor3.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor3.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor3.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==3){
                        if (proveedor == 0){
                            holder.icon_proveedor4.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor4.setImageResource(R.drawable.agenda);
                        }
                        if(proveedor == 2){
                            holder.icon_proveedor4.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor4.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor4.setImageResource(R.drawable.google_icon);
                        }

                    }

                    i++;
            }

        }

        /////// FUSION DE SOLO 5 CONTACTOS
        if (prov == 8){
            List<Integer> lista_prov = db.ObetenrProveedorSocial(idRow);
            int i=0;
            for(int proveedor : lista_prov){

                    if(i==0){
                        if (proveedor == 0){
                            holder.icon_proveedor.setImageResource(R.drawable.facebook_icon);
                        }
                        if (proveedor == 1){
                            holder.icon_proveedor.setImageResource(R.drawable.agenda);
                        }
                        if(proveedor == 2){
                            holder.icon_proveedor.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==1){
                        if (proveedor == 0){
                            holder.icon_proveedor2.setImageResource(R.drawable.facebook_icon);
                        }
                        if (proveedor == 1){
                            holder.icon_proveedor2.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor2.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor2.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor2.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==2){
                        if (proveedor == 0){
                            holder.icon_proveedor3.setImageResource(R.drawable.facebook_icon);
                        }
                        if (proveedor == 1){
                            holder.icon_proveedor3.setImageResource(R.drawable.agenda);
                        }       
                        if(proveedor == 2){
                            holder.icon_proveedor3.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor3.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor3.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==3){
                        if (proveedor == 0){
                            holder.icon_proveedor4.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor4.setImageResource(R.drawable.agenda);
                        }
                        if(proveedor == 2){
                            holder.icon_proveedor4.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor4.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor4.setImageResource(R.drawable.google_icon);
                        }

                    }

                    if(i==4){
                        if (proveedor == 0){
                            holder.icon_proveedor5.setImageResource(R.drawable.facebook_icon);
                        }                           
                        if (proveedor == 1){
                            holder.icon_proveedor5.setImageResource(R.drawable.agenda);
                        }
                        if(proveedor == 2){
                            holder.icon_proveedor5.setImageResource(R.drawable.linkedin_icon);
                        }
                        if(proveedor == 3){
                            holder.icon_proveedor5.setImageResource(R.drawable.twitter_icon);
                        }
                        if (proveedor == 4){
                            holder.icon_proveedor5.setImageResource(R.drawable.google_icon);
                        }

                    }

                    i++;
            }
        }
         rowView.setTag(holder);

   return rowView;

  } 
```

但它不起作用，我不知道为什么。在某些情况下，它应该显示多于 1，但它只显示 1。为什么？

有人能帮我吗？谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:01:20.867

我已经解决了我的问题！我的适配器没问题，问题出在 row_def.xml 上，因为它不是正确的项目参数，但现在我明白了！

这是正确的方法：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content" android:id="@+id/row_def"
    android:orientation="horizontal" android:layout_width="fill_parent">

    <ImageView
        android:id="@+id/profile_picture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="6dip" />

    <TextView 
        android:id="@+id/Nombre_Amigo" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:layout_toRightOf="@+id/profile_picture"
        android:gravity="center_vertical"  />

     <ImageView
        android:id="@+id/proveedor_icon"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="6dip"
        android:layout_alignParentRight="true"   
        android:layout_alignParentBottom="true"/>

      <ImageView
        android:id="@+id/proveedor_icon2"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/proveedor_icon" 
        android:layout_marginRight="6dip"
        android:layout_marginBottom="6dip"
        android:layout_alignParentRight="true" 
        android:layout_alignParentTop="true"/>

       <ImageView
        android:id="@+id/proveedor_icon3"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/proveedor_icon"
        android:layout_marginRight="6dip"
        android:layout_alignParentBottom="true"/>

        <ImageView
        android:id="@+id/proveedor_icon4"
          android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/proveedor_icon2"
        android:layout_above="@+id/proveedor_icon3"
        android:layout_marginRight="6dip"
        android:layout_marginBottom="6dip" 
        android:layout_alignParentTop="true"/>          

         <ImageView
        android:id="@+id/proveedor_icon5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/proveedor_icon3"
        android:layout_marginRight="6dip"  
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

感谢：D

# apache - mod_rewrite 不起作用

> ID：13255564
> 
> 赞同：2
> 
> 时间：2012-11-06T16:45:48.877
> 
> 标签：apache, mod-rewrite, ubuntu

网址是*`localhost/testing`*，我有 2 个文件，一个是*`bad.html`*，第二个是*`good.html`*（都只显示一条消息）。

*`.htaccess`*我在该文件夹中的文件：

```
 RewriteEngine on
    RewriteRule .* good.html 
```

如果我运行，`phpinfo();`我会在“加载的模块”中看到 mod_rewrite。我使用 ubuntu 12.04，该文件夹*`/etc/apache2/mods-available`*包含`rewrite.load`文件。

`.htaccess`我去时使用的那些指令不应该*`localhost/testing/bad.html`*将我重定向到*`localhost/testing/good.html`*吗？

# php - SQL - 从两个不同的表中选择 ID

> ID：13255566
> 
> 赞同：0
> 
> 时间：2012-11-06T16:45:50.693
> 
> 标签：php, sql, join

我有两个表，其中包含不同操作的日志信息。我想从两个记录表中选择信息并显示它。我无法修改应用程序，因此无法修改表结构。假设我想要 30 条记录，我想我可以编写某种连接查询，它只会按时间顺序返回每个表的 ID。然后我可以简单地运行两个单独的查询，从各个表中选择这些 ID。我不知道该怎么做，或者你是否能做到这一点，我有点不知所措。任何人都可以帮忙吗？如果有更清洁的解决方案，我也很高兴听到，我正在使用 PHP。

示例数据：

魔法选择？FROM table1 MAGIC JOIN table2 MAGICALLY ORDER BY date DESC LIMIT 3

表格1

```
|------|-------|------------|
| id   | date  | other data |
|------|-------|------------|
| 1    | 8     | ...        |
| 2    | 5     | ...        |
| 3    | 3     | ...        |
|------|-------|------------| 
```

表 2

```
|------|-------|------------|
| id   | date  | other data |
|------|-------|------------|
| 1    | 6     | ...        |
| 2    | 4     | ...        |
| 3    | 12    | ...        |
|------|-------|------------| 
```

输出

```
|-----------|-----------|
| table1_id | table2_id |
|-----------|-----------|
| NULL      | 3         |
| 1         | NULL      |
| NULL      | 1         |
|-----------|-----------| 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T16:49:00.620

```
SELECT table1_id, table2_id
FROM
(
    SELECT id AS table1_id, NULL AS table2_id, ctime AS time
    FROM Table1
    UNION ALL
    SELECT NULL AS table1_id, id AS table2_id, date AS time
    FROM Table2
) x
ORDER BY time DESC
LIMIT 3 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/5732e/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:39:37.863

我想我的阅读方式与其他答案不同。在我看来，您想要一个按时间排序的前 30 个 ID 的列表，而不关心它们来自哪个表。

```
Select table1_id, table2_id From 
(
   Select ID as table1_id, NULL as table2_id, Date From Table1
   UNION ALL
   Select NULL as table1_id, ID as table2_id, Date From Table2 
)
Order by Date DESC 
Limit 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:49:59.887

```
SELECT table1.id AS table1_id, table2.id AS table2_id 
FROM table1 
JOIN table2 
ON table1.id = table2.id 
ORDER BY table2.date DESC 
```

# c - 如何确定点是否位于矩形内？

> ID：13255569
> 
> 赞同：1
> 
> 时间：2012-11-06T16:45:59.820
> 
> 标签：c, points, rectangles

我正在做一个任务，我必须为用户创建一个程序来输入矩形的坐标。

该程序旨在成为结构中的结构。

如果无效，我必须输出一条错误消息并让用户无限期地重试，直到用户正确为止。

程序会反复询问用户一个点的坐标，当用户分别为 x 和 y 输入 0 和 0 时，程序将退出。

程序必须说明点是在矩形的内部还是外部，并打印出内部的点。我还需要弄清楚将 main 函数放在哪里，以及在其中放置什么。谢谢。

这是我的代码：

```
#include <stdio.h>
typedef struct
{
int x;
int y;
} point_t;

typedef struct
{
point_t upper_left;
point_t lower_right;
} rectangle_t;

int is_inside (point_t* pPoint, rectangle_t* pRect)
{
return ((pPoint->x >= pRect->upper_left.x ) &&
(pPoint->x <= pRect->lower_right.x) &&
(pPoint->y >= pRect->upper_left.y ) &&
(pPoint->y <= pRect->lower_right.y));

}

point_t get_point(char* prompt)
{
point_t pt;
printf("Given a rectangle with a side parallel to the x axis and a series of points on          the xy plane this program will say where each point lies in relation to the rectangle. It   considers a point on the boundary of the rectangle to be inside the rectangle\n");
printf ("Enter coordinates for the upper left corner\n");
printf ("X: ");
scanf ("%d", &pt.x);
printf ("Y: ");
scanf ("%d", &pt.y);

return pt;
}

rectangle_t get_rect(char* prompt)
{
rectangle_t rect;
printf (prompt);
rect.upper_left = get_point("Upper left corner: \n");
rect.lower_right = get_point("Lower right corner: \n");

return rect;
}
int main(){
/* calls goes here */
return 0;
} 
```

编辑：我添加了 main，但我不知道如何调用函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:00:47.157

我建议你修改一下你的风格，并应用这样的东西：

1.  在 main 之前声明函数的原型。
2.  我认为您不需要为大多数函数使用指针（引用传递函数）`is_inside`，因为它们不会修改值。
3.  将矩形点声明为点类型（因为实际上您将它们用作点）。

要进行调用，您只需在 main.xml 中填充函数的参数。例子：

```
/* Headers, libs, definitions, etc must be here */
/* Prototypes must be here */

int main (void)
{
    /* Variables declarations */
    int test_point;
    point_t point;
    rectanle_t rectangle;

    /* Functions calls... */
    /* holder = function_name( argument1, argument2 ); */

    test_point = is_inside( &point, &rectangle ); 

}
/*Function Declarations must be here*/ 
```

# api - 如何在操作消息中翻译 facebook 应用程序名称？

> ID：13255570
> 
> 赞同：3
> 
> 时间：2012-11-06T16:46:01.123
> 
> 标签：api, action, translation, facebook-opengraph

在我的情况下，用户“收听”我的应用程序中的曲目，并且发送到用户个人资料的有关它的消息已翻译应用程序名称，如屏幕截图（右下角）所示：http: [//img35.imageshack.us/ img35/7752/screenshot20121106at195.png](http://img35.imageshack.us/img35/7752/screenshot20121106at195.png) 但是，我看不到此翻译的指定位置：它不在应用程序设置的本地化选项卡中，也不在应用程序翻译列表中。我需要在俄语的介词情况下设置翻译，但找不到在哪里。

# python - Python 分布式应用程序中的持久架构

> ID：13255571
> 
> 赞同：2
> 
> 时间：2012-11-06T16:46:02.667
> 
> 标签：python, rest, web-applications, distributed-computing

想知道分布式 Python 应用程序的持久架构。 [我之前问过的这个问题](https://stackoverflow.com/questions/13238930/architecture-solution-for-python-web-application)应该为它是什么类型的应用程序提供一些指导。我们希望有能力拥有多个代码服务器和多个数据库服务器，理想情况下是一些易于管理且不太痛苦的部署方法。

我提到的问题提供了我喜欢的答案，但我想知道如何使它更耐用，或者这样做是否需要使用其他技术。尤其：

> 我会让我的前端端点是 WSGI（因为你已经写好了）并编写后端以通过消息分发。然后，您将拥有一个后端节点池，这些节点将从 Celery 队列中提取消息并完成所需的工作。它看起来有点像：
> 
> Apache -> WSGI 容器 -> Celery 消息队列 -> Celery Workers。
> 
> apache 节点将位于某种负载均衡器的后面。这将是一个相当简单的扩展架构，如果做得正确，相当可靠。像这样的系统中的失败代码，你会没事的。

制作持久应用的最佳方式是什么？关于如何“为失败编码”或以不同方式设计它的任何建议，以便我们不必这样做？如果您认为 Python 可能不适合此，那也是一个有效的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:03:35.383

好吧，继续我之前给出的答案。

在我的项目中，我为失败编写代码，因为我使用 AWS 来满足我的很多托管需求。

我已经实现了数据库后端，它将确保数据库、区域是可访问的，如果不能访问，它将从指定的列表中选择另一个区域。这对该节点上的系统其余部分透明地发生。因此，如果east-1a 区域出现故障，我还会托管一些其他区域，因为它将故障转移到，例如西海岸。我跟踪当前正在进行的数据库事务，并将它们发送到西海岸并将它们转储到一个文件中，这样我就可以在旧数据库区域可用时将它们导入。

我的前端服务器位于分布在多个区域的弹性负载均衡器后面，这样可以在区域发生故障时进行持久恢复。但是，它不能被依赖，所以我正在寻找解决方案，例如运行 HAProxy 并在我的 ELB 出现故障的情况下切换我的 DNS。这是一项正在进行的工作，我无法详细说明我自己的解决方案。

为了使您的数据处理持久化，请查看 Celery 并将数据存储在分布式 mongo 服务器中，以确保您的结果安全。使用持久数据存储来保存您的结果可以让您在节点崩溃时恢复它们。它是以牺牲一些性能为代价的，但如果你只依赖软实时约束，它应该不会太糟糕。

[http://www.mnxsolutions.com/amazon/designing-for-failure-with-amazon-web-services.html](http://www.mnxsolutions.com/amazon/designing-for-failure-with-amazon-web-services.html)

上述文章主要讨论 AWS，但这些想法适用于您需要保持高可用性和系统持久性的任何系统。请记住，只要您为一部分用户最小化停机时间就可以了。

# iphone - NSArray 和 NSMutableArray 的 Objective-c 内部结构

> ID：13255572
> 
> 赞同：8
> 
> 时间：2012-11-06T16:46:04.463
> 
> 标签：iphone, objective-c, ios

对于所有进入 Objective-c 内部的人来说，这是一个非常有趣的问题......

所以......返回和对象和类`NSObject`的相同实现（如我所料）。`copy`但是，`NSArray`不仅`NSMutableArray`返回`objectAtIndex:`对象和类的不同实现，而且每个对象都有不同的实现。

有谁知道为什么下面的代码会产生这种行为？...（至少 和 的类实现`NSArray`是`NSMutableArray`相同的:)）

```
NSObject *obj = [[[NSObject alloc] init] autorelease];
NSLog(@"NSObject instance %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod(object_getClass(obj), @selector(copy)))]);
NSLog(@"NSObject class %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod([NSObject class], @selector(copy)))]);

NSArray *array = [[[NSArray alloc] init] autorelease];
NSLog(@"NSArray instance %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod(object_getClass(array), @selector(objectAtIndex:)))]);
NSLog(@"NSArray class %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod([NSArray class], @selector(objectAtIndex:)))]);

NSMutableArray *array1 = [[[NSMutableArray alloc] init] autorelease];
NSLog(@"NSMutableArray instance %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod(object_getClass(array1), @selector(objectAtIndex:)))]);
NSLog(@"NSMutableArray class %@", [NSValue valueWithPointer:method_getImplementation(class_getInstanceMethod([NSMutableArray class], @selector(objectAtIndex:)))]); 
```

日志

```
2012-11-06 16:35:22.918 otest[71367:303] NSObject instance <c0fa7200>
2012-11-06 16:35:23.757 otest[71367:303] NSObject class <c0fa7200>
2012-11-06 16:35:30.348 otest[71367:303] NSArray instance <809a9b00>
2012-11-06 16:35:31.121 otest[71367:303] NSArray class <70bfa700>
2012-11-06 16:35:33.854 otest[71367:303] NSMutableArray instance <f05f9a00>
2012-11-06 16:35:34.824 otest[71367:303] NSMutableArray class <70bfa700> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-06T17:27:52.703

实施细节，全部。因此，这是一个*相对充分*的猜想。

首先，不需要跳过这样的箍来打印十六进制值，只需执行以下操作：

```
NSLog(@"imp: %p", [NSObject instanceMethodForSelector:@selector(...)]); 
```

请注意，调用`methodForSelector:`类对象会返回类方法的 IMP。

现在，谈到手头的问题。

将 Objective-C 与其他流行的 OO 语言（但不是全部）区分开来的一件事是 Class 对象实际上是 Metaclass 的实例。那个元类——实际上除了“元类”之外没有名字——碰巧响应了`NSObject`协议（或多或少）。事实上，它有点像`NSObject`.

因此，当您`NSObject`为实例和类获得某些选择器的实现时，它们通常是相同的。请注意，这是允许 Class 成为 NSDictionary 中的键的原因；类可以复制。 `NSObject`的`copy`方法只是这样做`return [self retain];`，当然，`retain`在一个类上是无操作的，因为它们[几乎总是]作为单例静态编译到二进制文件中。好吧，从技术上讲，确实可以`copy`调用（这就是即使不推荐使用区域，您也必须进行子类化的原因）。`copyWithZone:``return [self retain];``copyWithZone:`

现在，正如 Hot Licks 所指出的，`NS*Array`是一个类集群，其内部实现细节在最近几个版本中发生了变化。过去，所有实例都桥接到`NSCFArray`配置不同的实例。在最近的版本中，您将看到（原文如此）`__NSArrayI`和`__NSArrayM`对应于不可变和可变实例的实例。大多数情况下——还有更多的事情发生，但这是非常典型的。

`objectAtIndex:`两个类之间的实例方法不同是类集群的典型特征。集群的目的是提供一个原始接口，其中包含一堆根据该原始接口实现的方法（这就是为什么标头在核心`@interface`和一系列分类之间划分的原因`@interfaces`；基类中的类别完全实现在核心 API 条款）。

在内部，集群中有公开声明的类的具体子类。这些具体的子类针对特定任务进行了高度优化——在这种情况下，不可变与可变数组存储（但可能有更多针对不同目的优化的非公共子类）——其中子类覆盖广告 API 以提供高度各种方法的优化版本。

因此，您在这两个类中看到的是`objectAtIndex:`针对可变和不可变情况进行优化的不同实现。

现在，为什么类方法相同？好问题。让我们尝试调用它：

```
((void(*)(id,SEL,int))[[NSArray class] methodForSelector: @selector(objectAtIndex:)])([NSArray class], @selector(objectAtIndex:), 0);

2012-11-06 09:18:23.842 asdfasdf[17773:303] *** Terminating app due to uncaught
   exception 'NSInvalidArgumentException', reason: '+[NSArray objectAtIndex:]:
   unrecognized selector sent to class 0x7fff7563b1d0' 
```

啊哈！因此，您要求实现一种方法，该方法在调用时会引发“无法识别此方法”异常。实际上：

```
NSLog(@"%@", 
 [NSArray class] respondsToSelector:@selector(objectAtIndex:)] ? @"YES" : @"NO");

2012-11-06 09:24:31.698 asdfasdf[17839:303] NO 
```

看起来运行时正在返回一个 IMP，它会发出一个很好的错误，表明您尝试 - 通过迂回方式 - 使用目标对象（在本例中为元类实例）不响应的选择器。这就是为什么在可能对目标是否实现选择器存在疑问的情况下`instanceMethodForSelector:`，您应该事先使用的状态的文档。`respondsToSelector:`

（嗯，这变成了一本书而不是预期......希望仍然有用！）

# function - while循环和i = i + 1，Matlab中的函数提示

> ID：13255576
> 
> 赞同：2
> 
> 时间：2012-11-06T16:46:22.473
> 
> 标签：function, matlab, while-loop

我对matlab中的一个函数有疑问。此特定功能用于过滤光信号。正如您在下面看到的，我添加了我在函数和 while 循环本身中使用的编码。该代码是为 NXT Lego 机器人编写的。

是否有任何提示如何让计数变量（ i = i + 1 ）在函数中工作，以便我们可以绘制 Light(i)？因为当我们尝试不同的代码使其工作时，我们会收到一堆错误消息。

```
function  [light]  = filter_func( i)
  lightI(i) = GetLight(SENSOR_3);  

  if i==1
    light(i)=lightI(i)

  elseif i==2
    light(i) =  0.55*lightI(i) + 0.45*lightI(i-1)
  else
    light(i) =  0.4*lightI(i) + 0.3*lightI(i-1) + 0.3*lightI(i-2);
  end

end

i=1
while true
  lightI(i) = GetLight(SENSOR_3); % Get’s a lightvalue between    0 and 1024.
  if i>2
    light =filter_func(i)
    light=round(light); 
  else
    light(i) = GetLight(SENSOR_3);;
  end
  i=1+i  

  plot(light(end-90:end), 'r-');
  title('Lightvalue')
  axis([0 100 0 1023]) ;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:45:43.170

您可能主要会遇到错误，因为您不允许在 MATLAB 中混合这样的脚本和函数（就像您在 Python 中一样）。

您的过滤器功能仅在 i>2 时使用，那么您为什么要进行前 2 次测试？似乎您希望将 lightI 作为全局变量，但这不是您所做的。函数内部的 lightI 与 while 循环中的不一样。

由于您的 while 循环永远运行，也许您不必担心前两次更新绘图。在这种情况下，您可以这样做：

```
filter                  = [0.4 0.3 0.3]';
latest_filtered_light   = nan(90,1);
lightI                  = [];
p                       = plot(latest_filtered_light, 'r-');
title('Lightvalue')
axis([0 100 0 1023]) ;

while True
    lightI(end+1,1) = rand*1024; % Get’s a lightvalue between    0 and 1024.
    if i>=3
        new_val               = lightI(end-2:end,1)'*filter;
        latest_filtered_light = [latest_filtered_light(2:end);...
                                new_val];
        set(p, 'ydata', latest_filtered_light)
        drawnow
    end
end 
```

我认为重要的一点是不要每次都调用 plot - 至少如果你最不关心性能的话。

# c++ - 包含标头时的 C++ OpenGL LNK2001

> ID：13255577
> 
> 赞同：0
> 
> 时间：2012-11-06T16:46:24.507
> 
> 标签：c++, opengl, lnk2001

我得到 28

> 错误 LNK2001：未解析的外部符号

消息。例如，我知道一个事实

```
glBindVertexArray 
```

在 _int_gl_exts.h 中，果然我包含了它。

```
#include <glload\_int_gl_exts.h> 
```

我不知道这是否是一个问题，但我的错误消息中有三个下划线字符

```
symbol ___gleBindVertexArray 
```

而在文件中，它前面只有两个下划线。这是包含文件中的确切行

```
extern PFNGLBINDVERTEXARRAYPROC __gleBindVertexArray;
#define glBindVertexArray __gleBindVertexArray 
```

我直接从教程中提取了很多东西，即使我的包含和功能相同，我仍然遇到问题。如有必要，我会发布完整的代码，但是在这里停留了大约 2 天后我没有想法。

编辑：我实际上两者都有

```
#pragma comment(lib, "opengl32.lib") 
```

以及我尝试更改链接器中的项目属性以将其添加到其他库中。

我的整个代码如下。我知道还有很多其他的东西需要改变，但这是我首先要克服的。

```
#include <algorithm>
#include <string>
#include <vector>
#include <fstream>
#include <sstream>
#include <exception>
#include <stdexcept>
#include <string.h>
#include <glload/gl_3_3.h>
#include <glload/gll.hpp>
#include <glutil/Shader.h>
#include <GL/freeglut.h>
#include "framework.h"
#include "directories.h"
#include <glload/_int_gl_exts.h>

#ifdef LOAD_X11
#define APIENTRY
#endif

namespace Framework
{
GLuint LoadShader(GLenum eShaderType, const std::string &strShaderFilename)
{
    std::string strFilename = FindFileOrThrow(strShaderFilename);
    std::ifstream shaderFile(strFilename.c_str());
    std::stringstream shaderData;
    shaderData << shaderFile.rdbuf();
    shaderFile.close();

    try
    {
        return glutil::CompileShader(eShaderType, shaderData.str());
    }
    catch(std::exception &e)
    {
        fprintf(stderr, "%s\n", e.what());
        throw;
    }
}

GLuint CreateProgram(const std::vector<GLuint> &shaderList)
{
    try
    {
        GLuint prog = glutil::LinkProgram(shaderList);
        std::for_each(shaderList.begin(), shaderList.end(), glDeleteShader);
        return prog;
    }
    catch(std::exception &e)
    {
        std::for_each(shaderList.begin(), shaderList.end(), glDeleteShader);
        fprintf(stderr, "%s\n", e.what());
        throw;
    }
}

float DegToRad(float fAngDeg)
{
    const float fDegToRad = 3.14159f * 2.0f / 360.0f;
    return fAngDeg * fDegToRad;
}

std::string FindFileOrThrow( const std::string &strBasename )
{
    std::string strFilename = LOCAL_FILE_DIR + strBasename;
    std::ifstream testFile(strFilename.c_str());
    if(testFile.is_open())
        return strFilename;

    strFilename = GLOBAL_FILE_DIR + strBasename;
    testFile.open(strFilename.c_str());
    if(testFile.is_open())
        return strFilename;

    throw std::runtime_error("Could not find the file " + strBasename);
}
}

void init();
void display();
void reshape(int w, int h);
void keyboard(unsigned char key, int x, int y);

unsigned int defaults(unsigned int displayMode, int &width, int &height);

void APIENTRY DebugFunc(GLenum source, GLenum type, GLuint id, GLenum severity, GLsizei length,
           const GLchar* message, GLvoid* userParam)
{
std::string srcName;
switch(source)
{
case GL_DEBUG_SOURCE_API_ARB: srcName = "API"; break;
case GL_DEBUG_SOURCE_WINDOW_SYSTEM_ARB: srcName = "Window System"; break;
case GL_DEBUG_SOURCE_SHADER_COMPILER_ARB: srcName = "Shader Compiler"; break;
case GL_DEBUG_SOURCE_THIRD_PARTY_ARB: srcName = "Third Party"; break;
case GL_DEBUG_SOURCE_APPLICATION_ARB: srcName = "Application"; break;
case GL_DEBUG_SOURCE_OTHER_ARB: srcName = "Other"; break;
}

std::string errorType;
switch(type)
{
case GL_DEBUG_TYPE_ERROR_ARB: errorType = "Error"; break;
case GL_DEBUG_TYPE_DEPRECATED_BEHAVIOR_ARB: errorType = "Deprecated Functionality"; break;
case GL_DEBUG_TYPE_UNDEFINED_BEHAVIOR_ARB: errorType = "Undefined Behavior"; break;
case GL_DEBUG_TYPE_PORTABILITY_ARB: errorType = "Portability"; break;
case GL_DEBUG_TYPE_PERFORMANCE_ARB: errorType = "Performance"; break;
case GL_DEBUG_TYPE_OTHER_ARB: errorType = "Other"; break;
}

std::string typeSeverity;
switch(severity)
{
case GL_DEBUG_SEVERITY_HIGH_ARB: typeSeverity = "High"; break;
case GL_DEBUG_SEVERITY_MEDIUM_ARB: typeSeverity = "Medium"; break;
case GL_DEBUG_SEVERITY_LOW_ARB: typeSeverity = "Low"; break;
}

printf("%s from %s,\t%s priority\nMessage: %s\n",
    errorType.c_str(), srcName.c_str(), typeSeverity.c_str(), message);
}

int main(int argc, char** argv)
{
glutInit(&argc, argv);

int width = 500;
int height = 500;
unsigned int displayMode = GLUT_DOUBLE | GLUT_ALPHA | GLUT_DEPTH | GLUT_STENCIL;
displayMode = defaults(displayMode, width, height);

glutInitDisplayMode (displayMode);
glutInitContextVersion (3, 3);
glutInitContextProfile(GLUT_CORE_PROFILE);
#ifdef DEBUG
glutInitContextFlags(GLUT_DEBUG);
#endif
glutInitWindowSize (width, height); 
glutInitWindowPosition (300, 200);
int window = glutCreateWindow (argv[0]);

glload::LoadFunctions();

glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_CONTINUE_EXECUTION);

if(!glload::IsVersionGEQ(3, 3))
{
    printf("Your OpenGL version is %i, %i. You must have at least OpenGL 3.3 to run this tutorial.\n",
        glload::GetMajorVersion(), glload::GetMinorVersion());
    glutDestroyWindow(window);
    return 0;
}

if(glext_ARB_debug_output)
{
    glEnable(GL_DEBUG_OUTPUT_SYNCHRONOUS_ARB);
    glDebugMessageCallbackARB(DebugFunc, (void*)15);
}

init();

glutDisplayFunc(display); 
glutReshapeFunc(reshape);
glutKeyboardFunc(keyboard);
glutMainLoop();
return 0;
}

#pragma comment(lib, "opengl32.lib")

#include <string>
#include <vector>
#include <math.h>
#include <stdio.h>
#include <string.h>
#include <glload/gl_3_3.h>
#include <glload\_int_gl_exts.h>
#include <GL/freeglut.h>
#include <glload\_int_gl_1_5.h>
#include <glload\_int_gl_1_1_rem_3_1.h>
#include "../../framework/framework.h"

#define GL_GLEXT_PROTOTYPES
#ifdef __APPLE__
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif

GLuint theProgram;
GLuint elapsedTimeUniform;

void InitializeProgram()
{
std::vector<GLuint> shaderList;

shaderList.push_back(Framework::LoadShader(GL_VERTEX_SHADER, "calcOffset.vert"));
shaderList.push_back(Framework::LoadShader(GL_FRAGMENT_SHADER, "calcColor.frag"));

theProgram = Framework::CreateProgram(shaderList);

elapsedTimeUniform = glGetUniformLocation(theProgram, "time");

GLuint loopDurationUnf = glGetUniformLocation(theProgram, "loopDuration");
GLuint fragLoopDurUnf = glGetUniformLocation(theProgram, "fragLoopDuration");

glUseProgram(theProgram);
glUniform1f(loopDurationUnf, 5.0f);
glUniform1f(fragLoopDurUnf, 10.0f);
glUseProgram(0);
}

const float vertexPositions[] = {
0.25f, 0.25f, 0.0f, 1.0f,
0.25f, -0.25f, 0.0f, 1.0f,
-0.25f, -0.25f, 0.0f, 1.0f,
};

GLuint positionBufferObject;
GLuint vao;

void createCube() {
  glBegin(GL_LINES);
  glLineWidth(99.0);

  glColor3f(   1.0,  0.0, 1.0 );

  glVertex3f(  0.5,0.5,0.5 );
  glVertex3f(  0.5,0.5,-0.5 );

  glVertex3f( 0.5,0.5,-0.5 );
  glVertex3f( -0.5,0.5,-0.5 );

  glVertex3f( -0.5,0.5,-0.5 );
  glVertex3f( -0.5,0.5,0.5 );

  glVertex3f( -0.5,0.5,0.5 );
  glVertex3f( 0.5,0.5,0.5 );

  glVertex3f(  0.5,-0.5,0.5 );
  glVertex3f(  0.5,-0.5,-0.5 );

  glVertex3f( 0.5,-0.5,-0.5 );
  glVertex3f( -0.5,-0.5,-0.5 );

  glVertex3f( -0.5,-0.5,-0.5 );
  glVertex3f( -0.5,-0.5,0.5 );

  glVertex3f( -0.5,-0.5,0.5 );
  glVertex3f( 0.5,-0.5,0.5 );

  glVertex3f( 0.5,0.5,0.5 );
  glVertex3f( 0.5,-0.5,0.5 );

  glVertex3f( -0.5,-0.5,-0.5 );
  glVertex3f( -0.5,0.5,-0.5 );

  glVertex3f( 0.5,0.5,-0.5 );
  glVertex3f( 0.5,-0.5,-0.5 );

  glVertex3f( -0.5,0.5,0.5 );
  glVertex3f( -0.5,-0.5,0.5 );

  glEnd();
}

void InitializeVertexBuffer()
{
glGenBuffers(1, &positionBufferObject);

glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertexPositions), vertexPositions, GL_STREAM_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0);
}

//Called after the window and OpenGL are initialized. Called exactly once, before the main loop.
void init()
{
InitializeProgram();
InitializeVertexBuffer();

glGenVertexArrays(1, &vao);
glBindVertexArray(vao);
}

//Called to update the display.
//You should call glutSwapBuffers after all of your rendering to display what you rendered.
//If you need continuous updates of the screen, call glutPostRedisplay() at the end of the function.
void display()
{
glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glClear(GL_COLOR_BUFFER_BIT);

glUseProgram(theProgram);

glUniform1f(elapsedTimeUniform, glutGet(GLUT_ELAPSED_TIME) / 1000.0f);

glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

createCube();
glColor3f(1.0,0.0,0.0);
glutSolidSphere(0.04,10,10);

glDrawArrays(GL_TRIANGLES, 0, 3);

glDisableVertexAttribArray(0);
glUseProgram(0);

glutSwapBuffers();
glutPostRedisplay();
}

    //Called whenever the window is resized. The new window size is given, in pixels.
    //This is an opportunity to call glViewport or glScissor to keep up with the change in size.
void reshape (int w, int h)
{
glViewport(0, 0, (GLsizei) w, (GLsizei) h);
}

//Called whenever a key on the keyboard was pressed.
//The key is given by the ''key'' parameter, which is in ASCII.
//It's often a good idea to have the escape key (ASCII value 27) call glutLeaveMainLoop() to 
//exit the program.
void keyboard(unsigned char key, int x, int y)
{
switch (key)
{
case 27:
    glutLeaveMainLoop();
    return;
}
}

unsigned int defaults(unsigned int displayMode, int &width, int &height) {return displayMode;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:01:19.200

如果您确实说明[了您要链接到的库](http://glsdk.sourceforge.net/docs/html/index.html)，那就太好了。我知道它是哪一个的唯一原因是因为我认识自己的工作；）

无论如何，[文档清楚地说明了您应该链接到哪个库](http://glsdk.sourceforge.net/docs/html/pg_use.html#page_use_native)。如果您使用的是 Premake4 构建系统，那么您应该只`UseLibs {"glload"}`在您的`premake4.lua`项目中使用。如果您正在使用其他东西，那么您需要分别手动链接到`glloadD`或`glload`在调试和发布中。在 Windows 上，您需要一个 .lib 后缀；在 Linux 上，你会使用`libglloadD`等。

无论您是使用编译指示链接还是使用项目设置都无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:49:17.927

包括声明是一回事；他们的定义是另一个。

构建可执行文件时，必须*链接*到 OpenGL 库。

按照您的 OpenGL 书籍或参考资料中的说明进行操作，但通常您会将类似的内容传递`-lopengl32`给您的构建命令；看起来您可能正在使用 Visual Studio，它为您处理特定的构建命令，在这种情况下，您应该将 OpenGL 库添加到您的项目属性[或使用`#pragma`](https://stackoverflow.com/a/5055320/560648)：

```
#pragma comment(lib, "opengl32.lib") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:49:55.627

您可能没有链接 opengl lib 文件。

在您的编译器设置中，将“opengl32.lib”添加到包含的库列表中。

# tsql - 消除 SQL 结果集中的匹配值

> ID：13255582
> 
> 赞同：2
> 
> 时间：2012-11-06T16:46:48.930
> 
> 标签：tsql, sql-server-2000, grouping, matching, suppress

我有一个包含交易列表（发票和信用）的表格，我需要获取发票和信用不匹配的所有行的列表。

例如

```
user     product    value
bill     ThingA     200
jim      ThingA    -200
sue      ThingB     100
liz      ThingC      50 
```

我只想看到第三行和第四行，因为其他行的值匹配。

如果我选择 product, sum(value) ... 按具有 sum(value) <> 0 的产品分组，我可以这样做

效果很好，但我也想返回用户名。

一旦我将用户添加到选择中，我也需要按它进行分组，这会导致数量与用户和产品不匹配，这会造成混乱。

有任何想法吗 ？我正在使用 MS SQL 2000...

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:52:46.700

你可以这样做：

```
 SELECT tab2.user, product, sum_val
  FROM 
     (SELECT product, SUM(value) sum_val 
     FROM your_table
     GROUP BY product HAVING SUM(value) <> 0) tab1 
  INNER JOIN your_table tab2 
  ON tab1.product = tab2.product 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:59:15.530

@LolCoder solution is good, but given a context where you have "Thing B" with a "100" value by both "sue" and "liz", you could be able to retrieve the following resultset with my query :

```
| product | value | users    |
+----------------------------+
| Thing B | 200   | sue, liz | 
```

Here is the query :

```
select product
      ,sum(value) as value
      ,Stuff(( select ',' + convert(varchar(40), SQ.user)
                 from YourTable SQ
                where Q.product = SQ.product
                for xml path('')
            ), 1, 1, '') as users
  from YourTable Q
 group by Q.product 
```

# ios - 使用fancybox时禁用iOS滚动？

> ID：13255585
> 
> 赞同：2
> 
> 时间：2012-11-06T16:47:14.227
> 
> 标签：ios, fancybox, fullscreen, scrollbars

我正在使用 fancybox 在我的网站上创建一个全屏画廊。这是一个相当长的站点，当启动幻想框时，您仍然可以滚动，我想这可能会让用户感到困惑。有没有一种方法可以在启动花哨的盒子层时禁用滚动？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:00:58.610

我对fancybox也有同样的问题。经过一番谷歌搜索，我找到了答案。

```
$.fancybox({
    maxHeight   : '200',
    width       : '38%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    scrolling   : 'no',
    autoDimensions : 'true',
    closeEffect : 'none'
}); 
```

在你的 jQuery 集中

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:50:29.200

```
UIScrollView *scrollView = // get your scroll view
scrollView.scrollingEnabled = NO;
// initialize your fancybox
scrollView.scrollingEnabled = YES; 
```

# java - 如何在 Java 中使用 AVRO 序列化日期

> ID：13255589
> 
> 赞同：17
> 
> 时间：2012-11-06T16:47:23.663
> 
> 标签：java, datetime, serialization, avro

我实际上是在尝试使用 Avro 序列化包含日期的对象，并且反序列化的日期与预期值不匹配（使用 avro 1.7.2 和 1.7.1 测试）。这是我正在序列化的课程：

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class Dummy {
    private Date date;
    private SimpleDateFormat df = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss.SSS");

    public Dummy() {
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public Date getDate() {
        return date;
    }

    @Override
    public String toString() {
        return df.format(date);
    }
} 
```

用于序列化/反序列化的代码：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.Date;

import org.apache.avro.Schema;
import org.apache.avro.io.DatumReader;
import org.apache.avro.io.DatumWriter;
import org.apache.avro.io.Decoder;
import org.apache.avro.io.DecoderFactory;
import org.apache.avro.io.Encoder;
import org.apache.avro.io.EncoderFactory;
import org.apache.avro.reflect.ReflectData;
import org.apache.avro.reflect.ReflectDatumReader;
import org.apache.avro.reflect.ReflectDatumWriter;

public class AvroSerialization {

    public static void main(String[] args) {
        Dummy expected = new Dummy();
        expected.setDate(new Date());
        System.out.println("EXPECTED: " + expected);
        Schema schema = ReflectData.get().getSchema(Dummy.class);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        Encoder encoder = EncoderFactory.get().binaryEncoder(baos, null);
        DatumWriter<Dummy> writer = new ReflectDatumWriter<Dummy>(schema);
        try {
            writer.write(expected, encoder);
            encoder.flush();
            Decoder decoder = DecoderFactory.get().binaryDecoder(baos.toByteArray(), null);
            DatumReader<Dummy> reader = new ReflectDatumReader<Dummy>(schema);
            Dummy actual = reader.read(null, decoder);
            System.out.println("ACTUAL: " + actual);
        } catch (IOException e) {
            System.err.println("IOException: " + e.getMessage());
        }
    }
} 
```

和输出：

```
EXPECTED: 06/11/2012 05:43:29.188
ACTUAL: 06/11/2012 05:43:29.387 
```

它与已知错误有关，还是与我序列化对象的方式有关？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-10-10T18:07:58.617

Avro 1.8 现在有一个日期“logicalType”，它注释 int。例如：

{“名称”：“日期”，“类型”：“int”，“逻辑类型”：“日期”}

引用规范：“日期逻辑类型注释 Avro int，其中 int 存储从 unix 纪元 1970 年 1 月 1 日（ISO 日历）开始的天数。”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T00:37:36.910

我认为 AVRO 此时不会序列化日期。我要做的是将它包装在另一个类中并存储为 long (date.gettime()) 而 avro 人添加[此功能](https://issues.apache.org/jira/browse/AVRO-739)。您看到不同 Date 值的原因是每次您（和 avro）创建 Date 对象时，它都会使用当前系统时间初始化 Date。

# javascript - 如何使 ul 下的任何 listItem 可排序并启用在 ul 下的任何位置放置新列表项？

> ID：13255591
> 
> 赞同：0
> 
> 时间：2012-11-06T16:47:33.623
> 
> 标签：javascript, jquery, jquery-ui

我有一些可以拖到可排序列表中的项目。我怎样才能使我拖动的项目可以放置在元素内的任何位置，即使在 childs ul 元素中。例如

```
<li id='target'>Item To be dropped </li>

<ul class='ui-sortable id='root'>
   <li> <div>position 1</div> </li>
   <li> <div>position 2</div> </li>
   <li> 
       <div>position 3></div> 
       <ul> 
          <li> position 3.a </li>
          <li> position 3.b </li>
       </ul>
  </li>
</ul> 
```

我正在尝试使根目录下的每个列表项都可以放在根目录下的任何位置，并且可以将目标 listItem 放在根目录下的任何位置？我让它只在根目录下的 1 级上工作，但在使它工作在 n 级深时遇到了麻烦。有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:52:02.650

您可能正在寻找这个[http://mjsarfatti.com/sandbox/nestedSortable/](http://mjsarfatti.com/sandbox/nestedSortable/)

# python - numpy数组切片，从每个第三维获取一个

> ID：13255593
> 
> 赞同：3
> 
> 时间：2012-11-06T16:47:42.487
> 
> 标签：python, multidimensional-array, numpy, indexing

我有一个 3D 数据数组。我有一个二维索引数组，其中形状与数据数组的前两个维度相匹配，并且它指定了我想从数据数组中提取的索引以创建一个二维数组。例如：

```
 from numpy import *
 a = arange(3 * 5 * 7).reshape((3,5,7))
 getters = array([0,1,2] * (5)).reshape(3,5) 
```

我正在寻找的是一种语法`a[:, :, getters]`，它通过独立索引到每个项目的第三维来返回一个形状为 (3,5) 的数组。但是，`a[:, :, getters]`返回一个形状为 (3,5,3,5) 的数组。我可以通过迭代和构建一个新数组来做到这一点，但这很慢：

```
 array([[col[getters[ri,ci]] for ci,col in enumerate(row)] for ri,row in enumerate(a)])
 # gives array([[  0,   8,  16,  21,  29],
 #    [ 37,  42,  50,  58,  63],
 #    [ 71,  79,  84,  92, 100]]) 
```

有没有简洁+快速的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:00:32.540

如果我理解正确的话，我已经使用花哨的索引做了这样的事情：

```
>>> k,j = np.meshgrid(np.arange(a.shape[1]),np.arange(a.shape[0]))
>>> k
array([[0, 1, 2, 3, 4],
       [0, 1, 2, 3, 4],
       [0, 1, 2, 3, 4]])
>>> j
array([[0, 0, 0, 0, 0],
       [1, 1, 1, 1, 1],
       [2, 2, 2, 2, 2]])
>>> a[j,k,getters]
array([[  0,   8,  16,  21,  29],
       [ 37,  42,  50,  58,  63],
       [ 71,  79,  84,  92, 100]]) 
```

当然，您可以随心所欲地保留`k`和`j`使用它们。正如 DSM 在下面的评论中指出的那样，`j,k = np.indices(a.shape[:2])`也应该代替`meshgrid`. 哪个更快（显然）取决于您使用的元素数量。

# c# - 如何获取当前文化的卫星集会位置？

> ID：13255599
> 
> 赞同：1
> 
> 时间：2012-11-06T16:48:05.727
> 
> 标签：c#, winforms, satellite-assembly

我的 C#/WF 应用程序使用了一些文件，这些文件因不同的语言而异。这些文件**不能**作为资源放置在附属程序集中。但是，我希望将它们放在与附属程序集相同的目录中，但我需要知道程序集的实际位置（包括使用嵌入在二进制文件中的默认语言时的情况）。

例如，当应用程序自动切换到波兰语时，我希望检索位置：

D:\<应用程序文件夹>\pl-PL\

有没有办法这样做？请注意，我希望从程序集中检索此信息，而不是通过猜测文件夹位置。

* * *

在史蒂夫 B 的帮助下，这里有一个解决方案：

```
string FindSatelliteAssemblyLocation(CultureInfo culture)
{
    if (culture == CultureInfo.InvariantCulture)
        return Path.GetDirectoryName(Application.ExecutablePath);

    try
    {
        Uri location = new Uri(Assembly.GetExecutingAssembly().GetSatelliteAssembly(culture).CodeBase);
        return Path.GetDirectoryName(location.LocalPath);
    }
    catch
    {
        return FindSatelliteAssemblyLocation(culture.Parent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:52:41.537

您可以使用当前线程 UI 文化来获取语言：

```
var subfolder = System.Threading.Thread.CurrentUICulture.Name; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T16:55:29.590

我觉得你可以使用`System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase)`和的组合`CultureInfo.CurrentUICulture`来解决这个问题。

例如，如果您的程序集位于 C:\Program Files\MyCompany\App\ 并且当前 UI 文化是 en_US，则可以将两者结合起来：

```
string exeDir = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
string culture = CultureInfo.CurrentUICulture.Name;

string langDir = System.IO.Path.Combine(exeDir, culture); 
```

生成“C:\Program Files\MyCompany\App\en_US”

# expressionengine - 文件同步实用程序中的 MIME 类型无效

> ID：13255603
> 
> 赞同：3
> 
> 时间：2012-11-06T16:48:26.103
> 
> 标签：expressionengine

我在 ExpressionEngine 控制面板文件同步实用程序中收到以下错误：“无效的 mime 类型，无法处理文件”

只有在通过 FTP 上传文件后同步某些文件上传目录时才会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:48:26.103

ExpressionEngine 需要知道目录中的每个文件是什么类型的文件。为了做到这一点，它在 config/mimes.php 中保留了一个文件/MIME 类型列表。但是，某些文件扩展名不存在（flv 和 mobi 是您可以上传的两个相对常见的文件）。

如果它没有在该列表中看到该文件，它将引发该错误。

您可以将新的文件 MIME 类型添加到 mimes.php 的列表中，如下所示：

```
'mobi' => 'application/x-mobipocket-ebook', 
```

有关文件扩展名及其 MIME 类型的完整列表，请查看此列表： [http ://www.iana.org/assignments/media-types/media-types.xhtml](http://www.iana.org/assignments/media-types/media-types.xhtml)

# matlab - 在matlab中用遗传算法找到数学函数的最小值

> ID：13255606
> 
> 赞同：0
> 
> 时间：2012-11-06T16:48:33.887
> 
> 标签：matlab, genetic-algorithm

我想在 matlab 中使用遗传算法找到函数的最小值（我知道 matlab 有 GA 工具箱，但我想以编程方式实现它）。我有四个 m 文件，迭代 50 次，并且在每个循环步骤中保存**最佳**和**平均**适应度，但是当我运行此代码时，代码不会在最佳和平均中返回较低的值，这是不正常的。我的问题在哪里？

我的数学函数是 find minmun of **f(x)= -|x*sin(sqrt(|x|))|**

**主文件**

```
global population;
global fitness;
global popsize;
format bank;
popsize=50;
report=zeros(popsize,2);
selected=ones(1,50);
fitness=zeros(1,50);
population = randi([0 1], 50, 10);
for j=1:popsize
calFitness();
for i=1:popsize
   selected(1,i)=(rol_wheel(fitness));
end;
population =recombin(population,selected);
report(j,:)=[min(fitness),mean(fitness)];
end 
```

**加州健身**

```
function [] = calFitness(  )
%UNTITLED2 Summary of this function goes here
%   Detailed explanation goes here
global population;
global fitness;
global popsize;
%population=population.*2;
for i=1:popsize
    x=bin2dec(num2str(population(i,:)))/2;
    fitness(1,i)= abs(x*sin(sqrt(abs(x))));

 %disp(fitness);
end

%disp(); 
```

**滚轮**

```
% ---------------------------------------------------------
% Roulette Wheel Selection Algorithm. A set of weights
% represents the probability of selection of each
% individual in a group of choices. It returns the index
% of the chosen individual.
% Usage example:
% fortune_wheel ([1 5 3 15 8 1])
%    most probable result is 4 (weights 15)
% ---------------------------------------------------------
function choice = rol_wheel(weights)
  accumulation = cumsum(weights);
  p = rand() * accumulation(end);
  chosen_index = -1;
  for index = 1 : length(accumulation)
    if (accumulation(index) > p)
      chosen_index = index;
      break;
    end
  end
  %keyboard
  choice = chosen_index; 
```

**重组**

```
function pop = recombin( popu,selected )
global popsize;
pop=zeros(50,10);
for i=1:popsize/2
    rc=randi([1,10]);
    for j=1:10
            pop(i,1:rc-1)=popu(selected(i),1:rc-1);
            pop(i,rc:end)=popu(selected(i+25),rc:end);
            pop(i+25,1:rc-1)=popu(selected(i+25),1:rc-1);
            pop(i+25,rc:end)=popu(selected(i),rc:end);
          %keyboard
    end
end  
end 
```

我将不胜感激任何答案和帮助。

# java - 解析原始 HTTP 请求

> ID：13255622
> 
> 赞同：9
> 
> 时间：2012-11-06T16:49:26.687
> 
> 标签：java, http-headers

我正在研究由完整的 POST 和 GET 请求组成的 HTTP 流量数据集，如下所示。我已经在 java 中编写了代码，将这些请求中的每一个分开并将其保存为数组列表中的字符串元素。*现在我很困惑如何在java中解析这些原始HTTP请求有没有比手动解析更好的方法？*

```
GET http://localhost:8080/tienda1/imagenes/3.gif/ HTTP/1.1
User-Agent: Mozilla/5.0 (compatible; Konqueror/3.5; Linux) KHTML/3.5.8 (like Gecko)
Pragma: no-cache
Cache-control: no-cache
Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
Accept-Encoding: x-gzip, x-deflate, gzip, deflate
Accept-Charset: utf-8, utf-8;q=0.5, *;q=0.5
Accept-Language: en
Host: localhost:8080
Cookie: JSESSIONID=FB018FFB06011CFABD60D8E8AD58CA21
Connection: close 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-24T01:42:38.617

为了您的方便，这里有一个适用于所有方法类型（GET、POST 等）的通用 Http 请求解析器：

```
 package util.dpi.capture;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.StringReader;
import java.util.Hashtable;

/**
 * Class for HTTP request parsing as defined by RFC 2612:
 * 
 * Request = Request-Line ; Section 5.1 (( general-header ; Section 4.5 |
 * request-header ; Section 5.3 | entity-header ) CRLF) ; Section 7.1 CRLF [
 * message-body ] ; Section 4.3
 * 
 * @author izelaya
 *
 */
public class HttpRequestParser {

    private String _requestLine;
    private Hashtable<String, String> _requestHeaders;
    private StringBuffer _messagetBody;

    public HttpRequestParser() {
        _requestHeaders = new Hashtable<String, String>();
        _messagetBody = new StringBuffer();
    }

    /**
     * Parse and HTTP request.
     * 
     * @param request
     *            String holding http request.
     * @throws IOException
     *             If an I/O error occurs reading the input stream.
     * @throws HttpFormatException
     *             If HTTP Request is malformed
     */
    public void parseRequest(String request) throws IOException, HttpFormatException {
        BufferedReader reader = new BufferedReader(new StringReader(request));

        setRequestLine(reader.readLine()); // Request-Line ; Section 5.1

        String header = reader.readLine();
        while (header.length() > 0) {
            appendHeaderParameter(header);
            header = reader.readLine();
        }

        String bodyLine = reader.readLine();
        while (bodyLine != null) {
            appendMessageBody(bodyLine);
            bodyLine = reader.readLine();
        }

    }

    /**
     * 
     * 5.1 Request-Line The Request-Line begins with a method token, followed by
     * the Request-URI and the protocol version, and ending with CRLF. The
     * elements are separated by SP characters. No CR or LF is allowed except in
     * the final CRLF sequence.
     * 
     * @return String with Request-Line
     */
    public String getRequestLine() {
        return _requestLine;
    }

    private void setRequestLine(String requestLine) throws HttpFormatException {
        if (requestLine == null || requestLine.length() == 0) {
            throw new HttpFormatException("Invalid Request-Line: " + requestLine);
        }
        _requestLine = requestLine;
    }

    private void appendHeaderParameter(String header) throws HttpFormatException {
        int idx = header.indexOf(":");
        if (idx == -1) {
            throw new HttpFormatException("Invalid Header Parameter: " + header);
        }
        _requestHeaders.put(header.substring(0, idx), header.substring(idx + 1, header.length()));
    }

    /**
     * The message-body (if any) of an HTTP message is used to carry the
     * entity-body associated with the request or response. The message-body
     * differs from the entity-body only when a transfer-coding has been
     * applied, as indicated by the Transfer-Encoding header field (section
     * 14.41).
     * @return String with message-body
     */
    public String getMessageBody() {
        return _messagetBody.toString();
    }

    private void appendMessageBody(String bodyLine) {
        _messagetBody.append(bodyLine).append("\r\n");
    }

    /**
     * For list of available headers refer to sections: 4.5, 5.3, 7.1 of RFC 2616
     * @param headerName Name of header
     * @return String with the value of the header or null if not found.
     */
    public String getHeaderParam(String headerName){
        return _requestHeaders.get(headerName);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-07T09:17:21.693

> 我 [正在] 处理 [an] HTTP 流量数据集，该数据集由完整的 POST 和 GET 请求组成

因此，您要解析包含多个 HTTP 请求的文件或列表。你想提取什么数据？无论如何[，这里](http://www.java2s.com/Code/Java/Network-Protocol/HttpParser.htm)有一个 Java HTTP 解析类，它可以读取请求行中使用的方法、版本和 URI，并将所有标头读取到 Hashtable 中。

如果你想重新发明轮子，你可以使用那个或者自己写一个。查看[RFC](https://www.rfc-editor.org/rfc/rfc2616#section-5)以了解请求的外观以便正确解析它：

```
Request       = Request-Line              ; Section 5.1
                    *(( general-header        ; Section 4.5
                     | request-header         ; Section 5.3
                     | entity-header ) CRLF)  ; Section 7.1
                    CRLF
                    [ message-body ]          ; Section 4.3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-26T12:09:38.767

如果您只想按原样发送原始请求，这很容易，只需使用 TCP 套接字发送实际的字符串！

像这样的东西：

```
 Socket socket = new Socket(host, port);

    BufferedWriter out = new BufferedWriter(
            new OutputStreamWriter(socket.getOutputStream(), "UTF8"));

    for (String line : getContents(request)) {
        System.out.println(line);
        out.write(line + "\r\n");
    }

    out.write("\r\n");
    out.flush(); 
```

有关完整代码，请参阅 JoeJag 的这篇[博文。](https://code.joejag.com/2012/how-to-send-a-raw-http-request-via-java.html)

**更新**

我开始了一个项目，[RawHTTP](https://github.com/renatoathaydes/rawhttp)为请求、响应、标头等提供 HTTP 解析器......结果非常好，它使得在其上编写 HTTP 服务器和客户端变得非常容易。如果您正在寻找低级别的东西，请查看它。

# api - 实现 RESTful API 资源

> ID：13255626
> 
> 赞同：0
> 
> 时间：2012-11-06T16:49:32.183
> 
> 标签：api, url, rest, uri

我在网上找到的关于 restful api uri 的每一个资源都只涵盖了标准和实践。但是如何开发一个安静的 uri 呢？一直以来，我都在开发带有扩展的网页。如何制作没有扩展的页面？我很迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:58:28.373

Restful API 一般通过 URL 重写或转发来服务；“页面”不完全是页面，而是对服务的请求。所以是这样的：

```
 myco.com/people/jonny/house 
```

将是强尼家的资源。但是没有这样的页面，只有一个服务可以看到它并直接调用`requestPerson('jonny').house`或可能将其重写为可以实现的页面请求。

尽量少将其视为文件位置，而将其更多视为请求字符串，因此它更像`myco.com/people`是被要求的`'jonny/house'`.

开发 RESTful 接口时要做的两件事是决定您的数据结构和决定您的请求结构/映射。所以你有人和车，你允许对人、车或两者的请求。在某种程度上，它就像通过存储过程查询数据库一样；必须设置程序以响应查询，并且它们将以可预测的方式这样做。不同之处在于有一个引擎管理请求和响应，并且响应通常是 html 格式（尽管它们可以是 JSON、XML 等）。

# xcode - 我是否需要 Xcode 4.5.2 才能构建兼容 iPad mini 的应用程序？

> ID：13255628
> 
> 赞同：0
> 
> 时间：2012-11-06T16:49:33.650
> 
> 标签：xcode, ipad-mini

我已经知道，如果一个应用程序与 iPad 1/2 兼容，它会在 iPad Mini 上正常工作，因为它们具有相同的分辨率。前几天我将我的 Xcode 从 4.5 更新到 4.5.2，其中一个更新描述行提到了如下内容：

> 此版本允许 iPad Mini 和 iPad 第 4 代兼容

假设我的所有视图框架都准备好在任何屏幕上运行，如果我使用 Xcode 4.5 而不是 4.5.2 编译这些应用程序，这些应用程序是否可以在 iPad Mini 上运行？

谢谢你，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:59:54.020

我想你回答了你自己的问题。看到在 Xcode 4.5.2 之前构建的所有 iPad 应用程序都已运行，是的，您的应用程序当然也会运行。

# java - Java 中的 A-star 实现

> ID：13255629
> 
> 赞同：1
> 
> 时间：2012-11-06T16:49:35.597
> 
> 标签：java, algorithm, a-star

我正在尝试在 Java 中实现 A*，但我遇到了障碍，基本上不知道如何从这一点着手。

我目前正在关注来自[Wikipedia](http://en.wikipedia.org/wiki/A%2a_search_algorithm#Pseudocode)的伪代码。

我的节点是这样构造的：

```
static class Node {
    int col;
    int row;
    int g;
    int h;
    int f;
    public Node(int col, int row, int g, int h) {
        this.col = col;
        this.row = row;
        this.g = g;
        this.h = h;
        this.f = g+h;
    }
} 
```

重要的是要注意`f`在创建节点时计算。

我当前的 A* 代码不完整：

```
public void makeAstar(MapParser parsedMap) {
        // create the open list of nodes, initially containing only our starting node
        ArrayList<Node> openList = new ArrayList<Node>();
        // create the closed list of nodes, initially empty
        Map closedMap = new Map(rowSize, columnSize, "Closed map");
        // Fill closedMap with 0's
        closedMap.buildMapWithValue(0); 
        // Create neighbourlist
        ArrayList<Node> neighbourList = new ArrayList<Node>();

        // Some vars
        int rowTemp = 0;
        int colTemp = 0;
        int currentCost = 0;
        int tempCost = 0;

        //TODO hardcore cost! rowTemp+colTemp

        // Initialize with the first node
        openList.add(new Node(0,0,9,this.getMapValue(0, 0)));

        while(!openList.isEmpty()) {
            // Consider the best node, by sorting list according to F
            Node.sortByF(openList);
            Node currentNode = openList.get(0);
            openList.remove(0);

            // Stop if reached goal (hardcoded for now)
            if(currentNode.getCol() == 4 && currentNode.getRow() == 4) {
                System.out.println("Reached goal");
                break;
            }

            // Move current node to the closed list
            closedMap.setMapValue(currentNode.getRow(), currentNode.getCol(), 1);

            // Get neighbours
            rowTemp = currentNode.getRow()-1;
            colTemp = currentNode.getCol();
            if(!currentNode.isTopRow()) {  // Add value ^
                neighbourList.add(new Node(rowTemp, colTemp,rowTemp+colTemp,this.getMapValue(rowTemp, colTemp)));
            } 

            rowTemp = currentNode.getRow();
            colTemp = currentNode.getCol()-1;
            if(!currentNode.isRightColumn()) { // Add value <
                neighbourList.add(new Node(rowTemp, colTemp,rowTemp+colTemp,this.getMapValue(rowTemp, colTemp)));
            }

            rowTemp = currentNode.getRow();
            colTemp = currentNode.getCol()+1;
            if(currentNode.isLeftColumn()) { // Add value >
                neighbourList.add(new Node(rowTemp, colTemp,rowTemp+colTemp,this.getMapValue(rowTemp, colTemp)));
            }

            rowTemp = currentNode.getRow()+1;
            colTemp = currentNode.getCol();
            if(currentNode.isBottomColumn()) { // Add value v
                neighbourList.add(new Node(rowTemp, colTemp,rowTemp+colTemp,this.getMapValue(rowTemp, colTemp)));
            }

            // As long as the neighbour list is not empty
            while(!neighbourList.isEmpty()) {
                Node temp = neighbourList.get(0);
                neighbourList.remove(0);

                if(!isNotInClosedMap(temp.getRow(), temp.getCol())) {
                    continue;
                }

                //Stuck here !          

            }   
        }           
    } 
```

最后一行的注释基本上是我结束的地方，相当于`for each neighbor in neighbor_nodes(current)`伪代码中的东西。此外，我知道这`G`是起始节点的总成本，但我如何计算这个值？

有些人可能会注意到我`G`在邻居的初始创建时添加了一个硬编码值`row+col`，这与起始位置有关`0,0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:08:39.947

我认为您正在寻找的计算是：

```
tentative_g_score := g_score[current] + dist_between(current,neighbor) 
```

这意味着您需要每个节点沿着迄今为止找到的最佳路径存储分数。您有当前节点的新分数，目标是如果通过当前节点的路径优于邻居节点的最佳先前分数，则更新其每个邻居的最佳分数。

我不确定您的硬编码 G 值相对于算法的重要性。如果您已经知道到达每个节点的最佳成本，我认为您不需要 A*。

我强烈建议重构以重命名您的字段以匹配您正在使用的伪代码中的标识符。这将使您更容易看到您的代码如何与伪代码相关和不相关。它还可以帮助将伪代码作为注释交错。

# bash - 使用 tee 输出时保留颜色

> ID：13255642
> 
> 赞同：20
> 
> 时间：2012-11-06T16:50:17.170
> 
> 标签：bash

我正在尝试获取程序（具有颜色）的输出并使用`tee`. 我希望输出在终端（stdout）上有颜色，但在输出文件上没有。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:15:11.830

一种可能的方法是，在 stderr 上打印转义字符，在 stdout 上打印主要内容。我已经在其中一个脚本中完成了它。这当然不是一个可扩展的选项。

编写一个专门的脚本来解析标准输入，将转义序列放在标准错误上，其他的放在标准输出上，这将是一个有趣的练习。:-)
然后 `./myScript.sh | filter_escapes | tee outfile.log`
我还没有看到任何脚本可以做到这一点，但我认为，如果还没有的话，写一个会很有趣。

就您的问题而言，我认为以下就足够了：

```
ls --color=always | sed -r 'w /dev/stderr' | sed -r 's/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g' > /tmp/test 
```

`ls --color=always`用 ./your_script &替换`/tmp/test`为您想要的输出文件名。

其他实现：

```
ls --color=always | tee >(sed -r 's/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g' > /tmp/abcd) 
```

注意：`tee >(sed .... > logfile)`语法

笔记：

1.  正则表达式借鉴了 sampson-chen 的回答。

2.  sed 中 /dev/stderr 的 w 命令是 GNU sed 的补充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:06:25.160

是的，这是可能的。通过管道将您想要进入输出文件的结果`sed`删除用于格式化颜色的转义字符：

在 Linux 上：

```
sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g" 
```

在 OS X 上，因为它不是 GNU sed：

```
sed -E "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]//g" 
```

我最近编写的工具的一部分完全符合您的描述`tee`：

[https://github.com/sampson-chen/sack/blob/master/sack](https://github.com/sampson-chen/sack/blob/master/sack)

```
 ack --color $sack__flags $@ $sack__cwd | tee >$sack__dev_null >(display_shortcuts) >(process_shorcut_paths | remove_escaped_chars > $sack__shortcut_file) 
```

其中函数`remove_escaped_chars`包含对操作系统版本的检查，然后应用`sed`如上所示的脚本。

（注1：`tee`自动将输出的副本重定向到stdout，所以我曾经`>$sack__dev_null`阻止这种情况：因为我想向打印到stdout的内容添加附加信息，如函数中定义的那样`display_shortcuts`）

（注 2：`tee`当我使用它时，它本身绝对不会删除颜色格式：我怀疑是其他工具对管道的默认行为。）

# algorithm - 销毁双向图中的加权边

> ID：13255643
> 
> 赞同：2
> 
> 时间：2012-11-06T16:50:18.870
> 
> 标签：algorithm, graph-theory, dynamic-programming

在我最近的采访中，我被问到以下问题：有一个没有循环的双向图 G。每个边缘都有一些重量。还有一组节点 K 应该彼此断开（通过删除一些边）。K集合中任意两个节点之间只有一条路径。目标是最小化移除边的总权重，并将所有节点（从集合 K）彼此断开。

我的方法是为 K 集中的每个节点运行 BFS，并确定来自 K 的所有节点对之间的所有路径。所以我将拥有一组路径（每条路径都是一组边）。我的下一步是应用动态规划方法来找到移除边缘的最小总重量。在这里我卡住了。您能否帮助我（直接指导我）应该如何完成 DP。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:52:35.683

这听起来像树中的多路切割问题，假设“双向”图​​就像一个无向图。它可以通过简单的动态规划在多项式时间内求解。参见 Chopra 和 Rao：“ [On the multiway cut polyhedron](http://dx.doi.org/10.1002/net.3230210106) ”，Networks 21(1):51–89, 1991。另请参见[这个问题](https://stackoverflow.com/questions/11097519/minimum-damaging-costs-in-graph/11099280)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-14T17:58:19.483

这个问题可以使用不相交的集合来解决。在这个问题中，您需要像森林一样设置每个顶点。然后，通过图中的边连接属于两个不同集合的顶点，使得 -

1）如果集合中的一个包含在k个节点集合中提到的节点，则该节点成为代表元素。

2）如果两个集合都包含不需要的节点（节点存在于k个节点集合中），则在两个集合中找到最小权重边并进行比较，然后将其中最小的一个与要连接的边进行比较并找到最低。然后删除我们找到的边，这样它们就没有路径存在了。

3）如果集合中没有一个包含不需要的节点，则将一个集合连接到另一个集合。

通过这种方式，您可以在 O(nlogn) 量级的非常好的时间复杂度中找到被破坏边缘的最小总权重。你的方法也行得通，但在时间复杂度方面证明是昂贵的。

这是完整的代码 - (GameAlgorithm.cpp) [https://github.com/KARTHEEKCIC/RoboAttack](https://github.com/KARTHEEKCIC/RoboAttack)

# spring - Spring 3.0.7 CronTrigger 触发时多次执行任务

> ID：13255644
> 
> 赞同：1
> 
> 时间：2012-11-06T16:50:20.447
> 
> 标签：spring, schedule, crontrigger

好的，我已经浏览了所有我能找到的东西，但还没有找到我的问题的答案。有几个项目很接近，但还不够接近。我有一个在 Tomcat 7 中运行的基于 Spring 3.0.7 的 Web 应用程序。在 applicationContext.xml 中，我有：

```
<task:scheduler id="scheduledReportsScheduler" pool-size="1"/> 
<task:scheduled-tasks scheduler="scheduledReportsScheduler"> 
        <task:scheduled ref="scheduledReportsQueuer" method="process" cron="0 */1 * * * *"/> 
</task:scheduled-tasks>
<bean id="scheduledReportsQueuer" class="com.foo.scheduledServices.ScheduledReportsQueuerService"></bean> 
```

这将每分钟执行一次我的 ScheduledReportsQueuerService 类。这很好用。然后在该类中，我检查了一些数据库表，如果尚未安排任务，则尝试根据 CronTrigger 安排任务：

```
if(!_workers.containsKey(schedule.getRptScheduleId())){
    _logger.debug(Thread.currentThread().getName() + " Creating and scheduling ScheduledReportQueuerWorker for scheduled report ID: "+schedule.getRptScheduleId()+"("+schedule.getReportName()+") "+schedule.getCronPattern());
    ScheduledReportQueuerWorker newWorker = new ScheduledReportQueuerWorker(schedule);
    newWorker.setRptRequestDAO(getRptRequestDao());
    newWorker.setRptScheduleDAO(getRptScheduleDao());
    _workers.put(schedule.getRptScheduleId(), newWorker);
    ScheduledFuture<?> newFuture = _scheduler.schedule(newWorker, new CronTrigger(schedule.getCronPattern()));
    _futures.put(schedule.getRptScheduleId(), newFuture);
}

private ConcurrentTaskScheduler _scheduler; 
```

这似乎也可以在执行新任务（上面的 newWorker）时起作用。问题是它们在正确的触发时间被多次执行。例如，如果一个新任务的 cron 模式为 '* */2 * * * *'，它应该每 2 分钟执行一次。相反，该任务每 2 分钟连续执行 50-60 次。

这让我发疯了，你能提供的任何帮助都会很棒。

更多信息 这是一些日志输出，您可以看到基于 XML 的线程已启动，它告诉我们正在为每两分钟运行一份报告创建一个线程。然后您会看到报告每两分钟连续运行 60 次。

```
// here it schedules a single report to be run every 2 minutes
2012-11-19 08:30:02,876 DEBUG - ScheduledReportsQueuerService - scheduledReportsScheduler-1 Creating and scheduling ScheduledReportQueuerWorker for scheduled report ID: 20182(Jasper Test Report 1) * */2 * * * *

// here the worker thread gets kicked off 57 times
2012-11-19 08:30:03,016 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)
...
2012-11-19 08:30:59,012 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)

// two minutes later the worker thread gets kicked off 60 times
2012-11-19 08:32:00,017 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)
...
2012-11-19 08:32:59,003 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)

// two minutes later the worker thread gets kicked off 60 times
2012-11-19 08:34:00,019 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)
...
2012-11-19 08:34:59,014 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)

// two minutes later the worker thread gets kicked off 60 times
2012-11-19 08:36:00,010 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *)
...
2012-11-19 08:36:59,006 INFO  - workers.ScheduledReportQueuerWorker - !!!!!!!!!!!!! 20182 (* */2 * * * *) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:14:35.623

知道了。现在我觉得自己很愚蠢。原来我不理解 cron 模式。我用了

```
* */2 * * * * 
```

认为应该每两分钟运行一次。真正做的是每两分钟运行一次，自上次触发以来经过的每一秒运行一次。正确的模式是：

```
0 */2 * * * * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:19:33.463

看起来您正在安排更多任务作为计划任务的一部分？

您的 xml 配置中的原始 cron 触发器将无限期地运行……您真的想安排更多任务吗？

# ios - 使用 pragma ifdef 有条件地为 mac 和 ios 编译相同的协议头？

> ID：13255645
> 
> 赞同：1
> 
> 时间：2012-11-06T16:50:20.423
> 
> 标签：ios, xcode, cocoa, compiler-construction

> **可能重复：**
> [使用哪个条件编译在 Mac 和 iPhone 特定代码之间切换？](https://stackoverflow.com/questions/3181321/which-conditional-compile-to-use-to-switch-between-mac-and-iphone-specific-code)

我已经定义了一个在 Mac 和 iOS 上都可以正常工作的协议。但是，协议的其中一种方法最好返回特定的对象类（而不仅仅是“id”），但该类不是基础类，因此在两个平台上有所不同（例如，UIButton 和 NSButton）。

如何使用编译指示标记，例如`#ifdef TARGET_OS_IPHONE`在两个库中包含相同的协议头，一个是为 iOS 构建的，一个是为 Mac 构建的？

这是我的实际协议和我在条件编译中的（失败的）尝试

```
#import <Foundation/Foundation.h>

@protocol SharedAppDelegate <NSObject>

#ifdef TARGET_OS_IPHONE
@protocol UIApplicationDelegate;
+ (NSObject<UIApplicationDelegate> *)sharedAppDelegate;
#else
@protocol NSApplicationDelegate;
+ (NSObject<NSApplicationDelegate> *)sharedAppDelegate;
#endif

@end 
```

我立即知道的一件事是目标不包括模拟器，但我找不到一个涵盖 Mac 和另一个所有 iOS 版本的目标的可靠示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:52:02.440

你会踢自己的。`#if`不是`#ifdef`。_ `TARGET_OS_IPHONE`是为 iOS 和mac`#define`设置的。您想使用简单的.`1``0``#if`

```
#if TARGET_OS_IPHONE
    NSLog(@"is iPhone or simulator");
#else
    NSLog(@"is mac... probably");
#endif 
```

此外，您不能在协议定义中包含协议的前向声明。您必须执行以下操作：

```
#if TARGET_OS_IPHONE
@protocol UIApplicationDelegate;
#else
@protocol NSApplicationDelegate;
#endif

@protocol SharedAppDelegate <NSObject>
#if TARGET_OS_IPHONE
+ (NSObject<UIApplicationDelegate> *)sharedAppDelegate;
#else
+ (NSObject<NSApplicationDelegate> *)sharedAppDelegate;
#endif 
```

# php - 从外部文件加载 div 内容

> ID：13255646
> 
> 赞同：1
> 
> 时间：2012-11-06T16:50:22.030
> 
> 标签：php, jquery, load, external

我已经尝试了几个选项来尝试将内容从 id="container" 的一个页面上的 div 加载到另一个 html 页面 id="landing" 上的 div 中。

我在这里使用了答案以及它的很多变体 [在另一个页面上加载 div 的内容](https://stackoverflow.com/questions/4101770/load-content-of-a-div-on-another-page)

我已经运行了一个测试，并且正在加载 Jquery。

测试文件在这里[http://www.salcombeyurts.co.uk/test/landing.html](http://www.salcombeyurts.co.uk/test/landing.html)

我的代码如下所示：

```
<script type="text/javascript">
$('#landing').load('source.html #container');
</script> 
```

这最终会出现在 PHP 页面上。Joomla 网站的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:55:58.397

似乎您得到的建议是执行 AJAX 请求并将整个页面加载到当前页面上的 #container div 中，这不是一个坏主意。另一方面，您似乎想要做的是加载页面，然后在该页面内获取 div 的内容并将其放入当前页面上的容器 div 中，这过于复杂并且是一个糟糕的解决方案有什么问题。

这是我的解决方案

```
$(function() {
    $.get('page with the div you want', function(data) {
        var content = $(data); //turn the page into a jquery object
        var div = content.find('#div'); // this is the div you want the content from
        $('#container').html(div.html()); // this will set the content of the current div
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:52:59.147

`#landing`在定义 div之前运行脚本。

在 DOM 就绪事件之后运行您的代码

```
$(function(){
    $('#landing').load('source.html #container');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:53:31.263

我会将您的脚本移动到页面底部并像这样替换它。

原来的：

```
<script type="text/javascript">
    $('#landing').load('source.html #container');
</script> 
```

新的：

```
<script type="text/javascript">
$(document).ready(function() {

    $('#landing').load('source.html #container');
});
</script> 
```

~~`source.html`注意和之间的空格删除`#container.`~~

# node.js - node.js 中长期项目的最佳资源

> ID：13255654
> 
> 赞同：0
> 
> 时间：2012-11-06T16:51:12.270
> 
> 标签：node.js, web-applications, frameworks, resources, express

到目前为止，我一直在使用 PHP 进行开发。现在我即将开始几个新项目，我认为 node.js 非常适合它们。我阅读了一些关于该语言的一般（面向互联网）指南，我可以毫无问题地理解它们，但是当将它们放在一个真实的开发环境中时，它似乎变得非常混乱（通过使用很多很多可用的框架）。当我尝试遵循它们时，我能找到的最好的指南看起来确实过时了。

因此，我亲自来询问您是否可以为我提供一些关于如何完全用 javascript 开发应用程序（服务器端和客户端）的最新且模糊完整的教程/资源。

我通常倾向于只在长期（和中到大型）项目中工作，因此我希望将库保持在最低限度。但我也不是hackery类型：我喜欢能够专注于程序的逻辑，并且完全接受框架的使用。我只是不想被我永远不会使用（或者可以轻松实现自己）的函数重载。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:08:51.703

Node.js 是从头开始构建的，其理念是拥有一个轻量级核心，可以使用任意数量的库进行扩展（即[node 核心与 userland](https://github.com/joyent/node/wiki/node-core-vs-userland)）。因此，如果您使用节点，您将 - 内生地 - 最终使用很多小库（或捆绑了很多库的库）。

这里的精彩之处在于，您可以自己选择哪种堆栈最适合手头的具体情况。Node 的包管理器 (npm) 在这种方式上表现出色——它让您轻松管理非常异构的堆栈。

如果您来自像 PHP（或 rails）这样更加固执己见的环境，那么不同的框架和库的数量起初可能会让人不知所措。Node.js 不强制您使用任何特定的堆栈或约定，这使您可以更灵活地做任何您喜欢的事情。事实上，您甚至不应该将 node.js 视为一个框架——它是一个 JavaScript 运行时环境，您可以在其上构建 Web 服务器（和 Web 框架）。

如果您正在寻找人们应用 node.js 的流行方式，一个很好的起点是检查 npm 中各种包的流行程度（和依赖程度）（请参阅[https://npmjs.org/](https://npmjs.org/)）。根据包的受欢迎程度（和依赖计数），可以推荐使用以下类型的堆栈：

*   使用[express.js](http://expressjs.com/)（基于 connect.js）作为您的 Web 应用程序框架
*   [用jade](http://jade-lang.com/)编写服务器端标记
*   使用[request](https://github.com/mikeal/request)、[async](https://github.com/caolan/async)和 underscore 作为辅助库
*   使用[mocha](http://visionmedia.github.com/mocha/)编写测试
*   可选择在[CoffeeScript中编写您的应用程序](http://coffeescript.org/)
*   使用 MongoDB 作为您的数据库（以及可选的 redis 用于类似会话）

请注意，此堆栈仅基于 npm 用户中流行的库选择——它并没有告诉您哪种堆栈最适合您的特定情况。

# php - 数组中的自定义排序

> ID：13255657
> 
> 赞同：-3
> 
> 时间：2012-11-06T16:51:50.130
> 
> 标签：php, arrays, sorting, multidimensional-array

> **可能重复：** [PHP 自定义排序](https://stackoverflow.com/questions/7262783/php-custom-sorting)

我有一个数组，

```
Array
(
    [Flag]      =>  2
    [Pending]   => 11
    [Received]  => 11
    [Sent]      =>  8
    [Skip]      =>  5
    [Complaint] =>  1
    [Query]     =>  1
) 
```

我对上述数组有两个请求：

1.  我怎样才能将它分类为接收、发送、待处理、标记、跳过、查询、请求、投诉的顺序。

2.  正如我们看到的“请求”在数组中不可用，我如何将它推送到值为零的数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:54:41.407

```
$array = array
(
    "Flag" => 2
    "Pending" => 11
    "Received" => 11
    "Sent" => 8
    "Skip" => 5
    "Complaint" => 1
    "Query" => 1
);

$array["Request"] = 0;

function my_sort($a, $b) {
    $order = array("Received", "Sent", "Pending", "Flag", "Skip", "Query", "Request", "Complaint");
    return array_search($b, $order) - array_search($a, $order);
}

uksort($array, "my_sort");

print_r($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:54:25.653

使用[PHP](http://en.wikipedia.org/wiki/PHP)函数[usort()](http://php.net/manual/en/function.usort.php)，您可以创建一个用户定义的函数并根据此函数的结果对数组进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:55:08.123

尝试[usort](http://php.net/manual/en/function.usort.php)，然后，

```
$array['Request'] = 0; 
```

# javascript - 在不使用谷歌自定义搜索的情况下在 html 网站中添加搜索框的代码？

> ID：13255661
> 
> 赞同：-1
> 
> 时间：2012-11-06T16:52:00.010
> 
> 标签：javascript, html, css

大家好，我有一个充满 html 的网站。我需要在该网站中添加搜索框，我搜索了 go ogle ！他们中的大多数搜索结果产生于 go ogle 自定义搜索。我需要搜索我的 html 网站并在我的 html 网站本身中显示结果的搜索框。

谢谢，任何人都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:55:31.547

搜索并不像你想象的那么简单。

要实现搜索功能，您需要为服务器上的所有页面编制索引，然后使用某种服务器端代码来处理查询并返回搜索结果。

我建议您学习 PHP 和 MySQL，因为这些对于我理解您正在尝试做的事情至关重要。

希望我有所帮助。

# wordpress - post_content 在多个字段上？

> ID：13255664
> 
> 赞同：0
> 
> 时间：2012-11-06T16:52:20.053
> 
> 标签：wordpress, function, post, syntax

一个表单上是否可以有多个 name="post_content"？

我有一个联系表 7，我需要将 post_content 分配给多个输入字段。现在它只需要并发布最后一个字段的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:12:50.077

如果您要拥有超过 1 个同名字段，那么您必须将其设为数组，否则它将无法工作

```
name="post_content[]" 
```

# apache - 我如何（我可以）为 ubuntu 上 dav_svn 的错误设置自定义错误页面

> ID：13255667
> 
> 赞同：1
> 
> 时间：2012-11-06T16:52:32.690
> 
> 标签：apache, svn, mod-dav-svn

我已经使用 dav_svn 配置了颠覆并发挥作用。现在我想在用户尝试导航到他们无权访问的区域时显示自定义网页。目前显示的是

```
<?xml version="1.0" encoding="utf-8"?>
<D:error xmlns:D="DAV:" xmlns:m="http://apache.org/dav/xmlns" xmlns:C="svn:">
<C:error/>
<m:human-readable errcode="13">
Can't open directory '/dhproj': Permission denied
</m:human-readable>
</D:error> 
```

而且我似乎无法找到我生成或存储的位置。我正在运行命令行 Ubuntu 服务器 12.10，其中包含用于 apache2、dav 和 subversion 的 apt-get 包。谢谢。

# html - 如何在 IE9 中获取 html5 画布、kineticjs 图像旋转？

> ID：13255668
> 
> 赞同：2
> 
> 时间：2012-11-06T16:52:35.043
> 
> 标签：html, internet-explorer-9, kineticjs

我们有一个网站，它使用 HTML5 画布和 KineticJS 来缩放、调整大小和旋转另一个图像上的图像，然后将它们一起保存为新图像。由于某种原因，它在 IE9 中无法正确显示。它在 FireFox、Chrome 和 Safari 中完美运行，但在 IE9 中唯一不起作用的是旋转工具。它以 15 度为增量设置，通过向左或向右拖动滑块来工作，它会根据您拖动它的方向将图像略微旋转 15 度。

它不能工作，因为 IE9 不支持 html5 标签..我很困惑。

# nginx - https请求中的Nginx代理ssl损坏管道超过5秒

> ID：13255669
> 
> 赞同：2
> 
> 时间：2012-11-06T16:52:37.423
> 
> 标签：nginx, reverse-proxy

我们在 unicorn 上的 rails 应用程序前面有 nginx 作为反向代理。

我们没有覆盖任何超时默认值。

我遇到的问题是：

当通过 http 请求超过 5 秒的页面时，它可以正常工作。

当通过 httpS 请求超过 5 秒的特定页面时，我得到一个 324（服务器的空响应）当请求系统上的任何其他页面时，它在 https 上工作得很好。

我可以确认这是一个时间问题，因为我剥离了模板并设置了 sleep 6 以使模板等待渲染为空。

该请求对 js 和 css 有几个子请求，这些子请求在单独调用时可以正常工作。

nginx 错误日志在问题 url 的情况下显示套接字读取错误。

当在 http 中进行模板渲染和子请求时，

当在 https 上的失败 url 中，它向上游发送请求*两次*但在那里死掉，而不发送子请求。（rails 应用程序声称它可以正常工作）

奇怪的是它向上游发送了两次原始请求，然后死了，

日志和配置文件如下，

**NGINX 错误日志**（仅在 HTTPS 上读取需要很长时间才能呈现的特定 url）：

2012/11/06 15:05:00 [info] 5717#0: *4012 SSL_write() failed (SSL:) (32: Broken pipe) while reading upstream, client: 10.2.20.98, server: cloud.zia4buildings.com ，请求：“GET /admin/datasets HTTP/1.1”，上游：“http://127.0.0.1:3000/admin/datasets”，主机：“cloud.zia4buildings.com”，引用者：“https://cloud .zia4buildings.com/admin/sage_categories"

2012/11/06 15:05:03 [info] 5717#0: *4027 SSL_write() failed (SSL:) (32: Broken pipe) while reading upstream, client: 10.2.20.98, server: cloud.zia4buildings.com ，请求：“GET /admin/datasets HTTP/1.1”，上游：“http://127.0.0.1:3000/admin/datasets”，主机：“cloud.zia4buildings.com”，引用者：“https://cloud .zia4buildings.com/admin/sage_categories"

**[编辑]** 问题是 https 代理通行证超时，如果我在任何页面（甚至是超轻页面）中休眠 6 秒，则 https 请求失败。

```
**APPLICATION LOGS:**
(my comments in (-- --)
**HTTP:**

Started GET "/admin/datasets" for 127.0.0.1 at 2012-11-06 09:19:40 -0700
  Processing by Admin::DatasetsController#index as HTML
(--  lots of these ok --)
Rendered admin/datasets/_dataset.html.erb (0.0ms)
Rendered admin/datasets/_dataset_category.html.erb (5.4ms)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered layouts/_admin_links.html.erb (4.1ms)
Rendered admin/datasets/index.html.erb within layouts/admin (5694.0ms)
Completed 200 OK in 5704ms (Views: 5171.9ms | ActiveRecord: 531.4ms)

Started GET "/stylesheets/dyn_stylesheets/dynamic.css" for 127.0.0.1 at 2012-11-06 09:15:31 -0700
  Processing by DynStylesheetsController#index as CSS
  Parameters: {"id"=>"dynamic"}
Exist fragment? views/rating_system_css_colors (1.4ms)
Read fragment views/rating_system_css_colors (0.1ms)
Exist fragment? views/leed_category_css_colors (0.4ms)
Read fragment views/leed_category_css_colors (0.0ms)
Exist fragment? views/sage_category_css_colors (0.3ms)
Read fragment views/sage_category_css_colors (0.0ms)
Exist fragment? views/node_css_colors (3.3ms)
Read fragment views/node_css_colors (0.0ms)
Rendered dyn_stylesheets/dynamic.css.erb (9.8ms)
Completed 200 OK in 17ms (Views: 12.1ms | ActiveRecord: 4.0ms)
(-- EOF HTTP success request --)

**HTTPS:**

Started GET "/admin/datasets" for 127.0.0.1 at 2012-11-06 09:20:44 -0700
  Processing by Admin::DatasetsController#index as HTML
Rendered admin/datasets/_set_field.html.erb (15.8ms)
(--  lots of these ok --)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered layouts/_admin_links.html.erb (3.0ms)
Rendered admin/datasets/index.html.erb within layouts/admin (5973.3ms)
Completed 200 OK in 5982ms (Views: 5419.4ms | ActiveRecord: 561.5ms)

(-- (here starts a second, identical request without no apparent reason) --)

Started GET "/admin/datasets" for 127.0.0.1 at 2012-11-06 09:20:47 -0700
  Processing by Admin::DatasetsController#index as HTML
Rendered admin/datasets/_set_field.html.erb (15.9ms)
Rendered admin/datasets/_set_field.html.erb (0.5ms)
(--  lots of these ok --)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered admin/datasets/_dataset_category.html.erb (0.0ms)
Rendered layouts/_admin_links.html.erb (4.1ms)
Rendered admin/datasets/index.html.erb within layouts/admin (5944.9ms)
Completed 200 OK in 5955ms (Views: 5419.8ms | ActiveRecord: 549.8ms)

(-- here the browser gets the error 324, empty response --) 
```

**会议：**

这是经典配置：

```
upstream unicorn_server {
  # this socket is set up on the config/unicorn.rb file
  server unix:/home/sage/apps/sage/production/shared/.unicorn.sock;
}

server {
  listen       80; 

  root /home/sage/apps/sage/production/current/public;

  location / {
    proxy_set_header X-Forwarded-For $scheme;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (!-f $request_filename) {
      proxy_pass http://unicorn_server;
      break;
    }
  }

}

server {
  listen       localhost:443; 
  listen       10.2.20.84:443; 

  ssl                  on;
  ssl_certificate      /etc/ssl/certs/cert.chained.crt;
  ssl_certificate_key  /etc/ssl/certs/cert.com.key;

  root /home/sage/apps/sage/production/current/public;

  location / {
    proxy_set_header X-Forwarded-For $scheme;
    proxy_set_header X-Forwarded-Proto https;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (!-f $request_filename) {
      proxy_pass http://unicorn_server;
      break;
    }
  }
} 
```

任何指向正确方向的指针都非常感谢，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:27:16.137

没关系，

罪魁祸首是 haproxy，它位于我们防火墙中整个堆栈的前面。并因此发送这些超时，

# css - 一行中多个框的 HTML 布局

> ID：13255674
> 
> 赞同：1
> 
> 时间：2012-11-06T16:52:48.630
> 
> 标签：css, html

我正在为这个看似简单的问题而烦恼，也许有人可以提供帮助。我想要任意数量的输入，带有标签，像图像中一样水平堆叠在一条线上。

![在此处输入图像描述](../Images/1a318ffb42a3b29adf9515783c302f82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:19:39.467

这种经典的“GUI 小部件布局引擎”布局的最佳选择是 CSS 3 *flexbox*功能，但浏览器支持还不够一致，我建议使用它。

如果没有这一点，灵活的“填充空间”布局通常需要表格布局。多亏了 CSS `display`，没有必要将表格写成 HTML 表格。以下示例类似于您的示例图像：

```
<html><head>
<title>example</title>
  <style type="text/css">
    ul.myform { display: table; width: 100%; margin: 0; padding: 0; border-collapse: collapse; }
    .myform li { display: table-cell; border: .1em solid gray; }
    .myform li > * { display: table; width: auto; margin: .4em; }
    .myform label { display: table-cell; width: 1%; padding-right: .4em; white-space: nowrap; }
    .myform input { display: table-cell; width: 100%; }
    .col1 { width: 33%; }
    .col2 { width: 33%; }
    .col3 { width: 34%; }
  </style>
</head><body>
  <form>
    <ul class="myform">
      <li class="col1"><span><label for="a">Label</label>              <input id="a" name="a"></span></li>
      <li class="col2"><span><label for="b">Label</label>              <input id="b" name="c"></span></li>
      <li class="col3"><span><label for="c">Label a bit longer</label> <input id="c" name="c"></span></li>
    </ul>
  </form>
</body></html>
```

在标记中只为布局引入了一个元素：`<span>`需要用作表格单元格中的表格。

标签单元格的`width: 1%;`不是实际尺寸，而只是迫使它尽可能窄（绝对而不是百分比不会产生相同的效果）。这`white-space: nowrap;`可以防止标签因此而被包裹。

`.col1`等等用于指定列的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:39:51.617

编辑：更新以解决固定宽度的标签。（任意设置为100px）

[http://jsfiddle.net/SebastianPataneMasuelli/XHrSr/](http://jsfiddle.net/SebastianPataneMasuelli/XHrSr/)

HTML：

```
<div>
 <div>
     <div class="label">LABEL</div>
     <div>filler</div>
 </div>
  <div>
     <div class="label">LABEL</div>
     <div>filler</div>
 </div>
  <div>
     <div class="label">LABEL</div>
     <div>filler</div>
 </div>
</div> 
```

CSS：

```
div { width: 100%; } 
div div { 
    width: 33%; 
    background-color: salmon; 
    float: left; 
    position: relative
}
div div div { 
    background-color: pink; 
    position: relative; 
    z-index: 2
}
div div div:last-child { 
    background-color: red;  
    position: absolute; 
    width: 100%; 
    z-index: 1 
}
.label { width: 100px } 
```

​</p>

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:44:42.617

通常，当您想要“占用剩余空间”（例如您的输入框）时，您有 3 个选项：

1.  Flexbox，这将是理想的，但尚未得到广泛支持。
2.  表格，如 Kevin Reids 回答中所解释的
3.  建立单独的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)，示例如下

HTML

```
<div class="container">
    <div class="field">
        <label for="in1">Label</label>
        <div><input type="text" id="in1"></div>
    </div>
    <div class="field">
        <label for="in2">Label</label>
        <div><input type="text" id="in2"></div>
    </div>
    <div class="field">
        <label for="in3">Label</label>
        <div><input type="text" id="in3"></div>
    </div>
</div>​ 
```

CSS

```
.container {
    padding: 20px;
    background: #999;
    overflow: hidden; /* for float containment */
}

.field {
    padding: 4px;
    background: #fff;
    border: 2px solid #999;
    float: left;        
    width: 33%;
    -webkit-box-sizing: border-box; /* 33% effective width */
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

label {
    float: left;
    width: 100px; /* fixed width of label */ 
}

.field div {
    overflow: hidden; /* create a new Block Formatting Context */ 
}

/* inputs fill the new BFC */
input {
    width: 100%;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
​ 
```

仅添加了 1 个布局元素，即包装`input`. 这是因为`input`不想表现得像块元素，[即使你告诉他这样做](https://stackoverflow.com/questions/1030793/input-with-displayblock-is-not-a-block-why-not)。

小提琴：http: [//jsfiddle.net/RqzJC/](http://jsfiddle.net/RqzJC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T17:05:36.143

有很多方法可以解决这个问题。就个人而言，我喜欢使用表格来处理这种类型的数据（但如果不是表格数据，建议使用 DIV 等其他方式）。我将尝试展示一个表格的快速示例：

桌子：

```
<table width="100%" cellpadding="0" callspacing="0" border="0">
 <tr>
  <td width="200">LABEL 1</td><td>&nbsp;</td> <!-- this is the padding table cell -->
  <td width="200">LABEL 2</td><td>&nbsp;</td>
  <td width="200">LABEL 3</td><td>&nbsp;</td>
 </tr>
</table> 
```

[示例表 JSFiddle](http://jsfiddle.net/XX7BQ/)

使用 Div 稍微复杂一些，因为它们默认是内联的；你会得到你的标签在不同的行。您可以查看诸如“display: table-cell”之类的 CSS 属性以实现与上述相同的结果，否则您可以使用 CSS 查看绝对定位和相对定位。

```
<div width="100%">
 <div style="position:absolute; top:0px; width: 33%;">LABEL 1</div>
 <div style="position: absolute; top:0px; left: 33%; width: 33%;">LABEL 2</div>
 <div style="position: absolute; top:0px; left: 66%; width: 34%;">LABEL 3</div>
</div> 
```

但是，这仍然存在一些问题，因为它假设您的布局是页面/浏览器查看区域宽度的 100%。

# scala - Try/Catch：对象异常不是一个值

> ID：13255680
> 
> 赞同：2
> 
> 时间：2012-11-06T16:53:01.050
> 
> 标签：scala

我正在尝试捕获不同类型的异常，但我遇到了一个错误。我进口的`scala.util.control.Exception._`

```
try {
        isAuthenticatedJson(f)
    }catch {
      //object RuntimeException is not a value
      case RuntimeException => {}
      //object Exception is not a value
      case Exception => {}
    } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T16:54:30.073

试试这个（注意下划线）：

```
try {
    isAuthenticatedJson(f)
} catch {
  case _: RuntimeException => {}
  case _: Exception => {}
} 
```

这是一种“类型化模式”。请参阅[http://www.scala-lang.org/node/120](http://www.scala-lang.org/node/120)。

# joomla - Joomla 3.0 和 modules.php：静态变量（2d）和缓存 - 输出错误

> ID：13255684
> 
> 赞同：3
> 
> 时间：2012-11-06T16:53:10.063
> 
> 标签：joomla, static-variables, joomla3.0

我有以下问题：

我使用 Joomla 3.0.1 和我自己开发的模板（带引导程序）。当我打开正常的 Joomla 缓存时，我的网站有输出错误。这些错误与`modules.php`我的模板有关，因为我使用静态变量（数组）将所有加载的模块位置和计算或预设的跨度保存`bootstrap`在二维数组中。像这样：

```
top ->2,4,6
left ->3,3,3,3
right ->4,4,4
bottom ->1,2,3,4,2
header ->12
footer ->6,6 
```

没有缓存它可以完美运行，但是当我打开它时，我有以下错误：

> 注意：未定义索引：第 82 行 /root/templates/jooag_workframe30/html/modules.php 中的徽标 注意：未定义索引：第 72 行 /root/templates/jooag_workframe30/html/modules.php 中的主菜单

我知道这意味着什么以及在哪里看，但我没有解决这个问题的解决方案。

**modules.php 代码在这里：**

[http://pastebin.com/s4tjXcKR](http://pastebin.com/s4tjXcKR)

**整个模板在这里：**

[http://www.mediafire.com/?qrkbatdcbs4iq2v](http://www.mediafire.com/?qrkbatdcbs4iq2v)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:59:31.803

如果一个位置不包含任何模块（即 $modCount = 0）$spanMatrix 数组将没有它的键，所以你应该在尝试访问它之前检查它是否存在

我建议您将第 72-75 行和第 82 行包装`modules.php`在以下语句中：

```
if( isset( $spanMatrix[$modPosition] ))
{
.....
} 
```

让我知道它是否有效

# mysql - 使用带有 INSERT 语句的 MySQL Workbench 导出数据库

> ID：13255685
> 
> 赞同：66
> 
> 时间：2012-11-06T16:53:16.277
> 
> 标签：mysql, mysql-workbench

我正在尝试导出我在 MySQL Workbench 上拥有的数据库，但在 .sql 文件上生成 INSERT 语句时遇到了麻烦。

我为了导出数据，对要导出的数据库进行逆向工程。然后，我去

> 文件/导出/转发工程师 SQL CREATE 脚本

在那里，我选择选项**Generate INSERT Statements for Tables**。

结果仅生成创建表的代码。

有没有办法为数据创建插入语句？

谢谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-06T17:11:25.033

**对于旧版本：**

打开 MySQL Workbench > Home > Manage Import / Export（右下角）/选择 Required DB > Advance Exports Options Tab >Complete Insert [Checked] > Start Export。

* * *

**对于 6.1 及更高版本，感谢 ryandlf：**

单击管理选项卡（在模式旁边）并选择数据导出。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-07-14T16:51:59.810

我在较新版本中找到此选项时遇到了一些问题，因此对于 Mysql Workbench 6.3，请转到模式并输入您的连接：

[![在此处输入图像描述](../Images/319cfaf90faf16f4e9ffe2f7c6d6ce4d.png)](https://i.stack.imgur.com/TRCr0.png)

* * *

## 转到工具 -> 数据导出

[![在此处输入图像描述](../Images/6fe49239d20f4af4b57adf11667795cf.png)](https://i.stack.imgur.com/1WaEe.png)

* * *

## 点击高级选项

[![在此处输入图像描述](../Images/3b4311e2c967c4e01fe16126f92f4387.png)](https://i.stack.imgur.com/RAiYM.png)

* * *

## 向下滚动并取消选中`extended-inserts`

[![在此处输入图像描述](../Images/ac21693569d34f0adfac37237fe12117.png)](https://i.stack.imgur.com/FIKnp.png)

* * *

然后导出你想要的数据，你会看到结果文件是这样的：

[![在此处输入图像描述](../Images/d9d5c8164b3346db87c8ba6090a5d7bd.png)](https://i.stack.imgur.com/DXRTg.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-11T12:13:41.537

您可以在命令行中使用 mysqldump 工具执行此操作：

```
mysqldump your_database_name > script.sql 
```

这将创建一个包含数据库创建语句和插入语句的文件。

有关 mysql 转储选项的更多信息：[https ://dev.mysql.com/doc/refman/5.7/en/mysqldump-sql-format.html](https://dev.mysql.com/doc/refman/5.7/en/mysqldump-sql-format.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-10T10:26:50.513

在 MySQL`Workbench 6.1`中。

我不得不点击`Apply changes`插入面板中的按钮（仅一次，因为两次和 MWB 崩溃......）。

你必须为你的**每一张桌子**做这件事。

![应用更改按钮](../Images/6199258539e3b89b4bbd3e4fea3f9661.png)

## 然后导出您的架构：

![导出架构](../Images/0ca9a17f44e5a03c1f0538382a543de0.png)

## 查看`Generate INSERT statements for table`

![检查插入](../Images/c44d775d983753fa143573f9cadb0ad6.png)

## 没关系 ！

![插入正常](../Images/93a51a01bd9adef1542918da6711dfc2.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-13T14:24:29.737

如果您只想导出单个表或某个表中的数据子集，您可以直接从结果窗口中执行此操作：

1.  点击导出按钮： [![在此处输入图像描述](../Images/cdc827f6f2c811e8f9301fbbcf7abaee.png)](https://i.stack.imgur.com/KMtcf.png)

2.  将另存为类型更改为“SQL 插入语句” [![在此处输入图像描述](../Images/4bca689ff53317a85fc46e8f1ddb7820.png)](https://i.stack.imgur.com/SPEkw.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-13T07:38:21.347

Go to Menu Server and Click on Data Export. There you can select the table and select the option Dump Structure and Data' from the drop-down.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-12T09:51:34.967

对于最新版本的 MySql Workbench

1.  单击顶部菜单栏中的服务器菜单
2.  选择“数据导出”子菜单
3.  它将打开“对象选择”窗口，您可以在其中选择具有所需表的适当数据库
4.  在左侧选择数据库后，所有表格都将显示在右侧，并带有单选按钮
5.  选择所需表格前面的单选按钮
6.  在表格选择的正下方，您可以看到一个下拉菜单，用于选择仅转储结构或仅数据或结构和数据
7.  如果您还需要存储过程或事件，请在要导出的对象下勾选该框。如果您不需要这些，请取消勾选那些
8.  在导出选项下更改导出文件名和路径
9.  如果您想在导入转储文件后创建架构，请勾选包含创建架构
10.  按右上角的开始导出按钮。成功后，摘要将显示在“导出进度”选项卡中

# php - wordpress 视频调整大小

> ID：13255698
> 
> 赞同：0
> 
> 时间：2012-11-06T16:53:58.307
> 
> 标签：php, html, css, wordpress, video

> **可能重复：**
> [使用 php 调整嵌入视频的大小](https://stackoverflow.com/questions/4132893/resizing-embedded-videos-with-php)

我想在我的 wordpress 主页上将视频设置为高度 280、宽度 520。当前代码使用原始 youtube 高度和宽度：

```
 <div class="entry">

            <?php the_content(''); ?>

        </div> 
```

当我输出代码时，视频仍然是 640x480。关于如何调整大小的任何建议？我试过没有运气的css。这是针对我们正在开发的自定义 wordpress 主题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:01:03.877

`<?php the_content();?>`只是从页面或帖子中提取“内容”。在该页面或帖子中应该是您实际拥有嵌入代码的位置，并且您可以在其中更改 html 的高度和宽度属性。

除非某处涉及插件，否则它可能在插件代码中的某处。但我不这么认为，因为您使用“the_content”在模板中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:11:09.013

如果您想更好地了解它的工作原理，可以查看[Youtube 文档。](https://developers.google.com/youtube/player_parameters#Embedding_a_Player)您应该能够将 iframe 大小更改为任何大小，但在玩了一会儿之后，您似乎总是在流式传输 320x240。

# c++ - 如何迭代 128 位块中的字符串？

> ID：13255700
> 
> 赞同：6
> 
> 时间：2012-11-06T16:54:13.920
> 
> 标签：c++, iterator, stdstring

我有一个函数可以对任意长度字符串的 128 位数据块进行操作。如果字符串不能均匀地分成 128 位的块，则会相应地对其进行填充。

目的是转换输入函数的字符串中的数据。

我最初想通过这样的字符串循环：

```
//This might have stupid errors.  Hopefully it stillg gets the point across.
for (int i = 0; i < strn.size(); i += 16)
{
    string block = strn.substr(i, i + 15);
    strn.replace(i, i + 15, block);
} 
```

我想这会起作用，但我认为必须有一种更优雅的方式来做到这一点。想到的一个想法是封装`strn`在一个类中并实现我自己的迭代器，它可以读取 128 位块中的内容。这很吸引人，因为构造函数可以处理填充，并且我当前使用的一些函数可以设为私有，从而避免潜在的误用。这看起来是一种富有成效的方法吗？如果是这样，如何实现他自己的迭代器？非常欢迎详细的解释，因为我对 C++ 非常缺乏经验。

还有其他的，或许更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:02:33.473

有很多方法。一种更简单直接的方法是：您可以创建自己的类型，大小正好为 128 位；简单`struct`就可以了。

```
typedef struct
{
    char buf[16];
} _128bit; 
```

并用它来迭代你的字符串。将字符串的开头转换为此结构类型：`_128bit* start = (_128bit*)buffer;`并使用整数指针算法开始对其进行迭代。上的所有操作`start`都将根据其大小进行操作。例如，`start++`将向前移动 128 位；`start--`将向后移动 128 位。到达所需位置后，将其重铸为所需类型并执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:50:01.183

我可能会使用迭代器而不是索引来执行此操作，仍然使用您自己的 for 循环：

```
const int NUM_BITS_IN_CHUNK = 128;
const int CHUNK_SIZE = NUM_BITS_IN_CHUNK / CHAR_BIT;

for(std::string::const_iterator iter = str.begin(); iter < str.end(); iter += CHUNK_SIZE)
{
    your_func(iter, iter + CHUNK_SIZE);
} 
```

boost::iterator_adaptor 代码看起来像这样。请注意，为简单起见，在示例中我只获得每个块的四个字节而不是 16 个字节：

```
#include <iostream>
#include <string>

#include <boost/iterator_adaptors.hpp>

struct string_chunk_iterator : public boost::iterator_adaptor<string_chunk_iterator, std::string::const_iterator>
{
    string_chunk_iterator(const std::string::const_iterator& base) : iterator_adaptor(base) { }

private:
    friend class boost::iterator_core_access;
    void increment() { this->base_reference() = this->base() + 4; }
    void advance(typename iterator_adaptor::difference_type n)
    {
        this->base_reference() = this->base() + (4 * n);
    }
};

int main()
{
    const std::string tester(20, 'A');

    string_chunk_iterator iter(tester.begin());
    string_chunk_iterator str_end(tester.end());

    for(; iter != str_end; ++iter)
    {
        std::string chunk(&*iter, &*(iter + 1));

        std::cout << chunk << std::endl;
    }

    return 0;
} 
```

# css - Dynamic width of absolutely positioned div

> ID：13255706
> 
> 赞同：0
> 
> 时间：2012-11-06T16:54:32.673
> 
> 标签：css

So i'm having this:

```
 <style>
    div {
      position: absolute;
      top: 15px;
      width: 500px;
      background-color: lightblue;
    }

  </style>
  <div>
    <input type="submit" style="float: left" value="leftButton">
    <input type="submit" style="float: right" value="rightButton">

  </div> 
```

[an absolutely positioned button bar](http://jsbin.com/oxunuy/1/edit)

What I want: If the user resizes the window and makes it smaller than 500px, the buttons should get closer together instead of adding a scrollbar. Is this somehow possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:03:46.883

Use width specified as percentage.

```
width: 80%; 
```

And if you need you can combine this with:

```
min-width: 30px; 
```

To cover the case where user sizes too small to fit items in div.

If you want flexible button widths you can simply put them in a table row where the table cells are specified using percentages. Then they will size as user adjusts width. And here again you can combine with min-width and padding etc, to keep proper spacing. Eg.

```
<table style="width:90%;">
    <tr>
        <td style="width:10%;"></td>
        <td style="width:80%;"></td>
        <td style="width:10%;"></td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:02:49.323

***EDIT:***

there is a solution!

```
width: 70%;
max-width: 500px; 
```

This will make your bar adjust to the window width, but never exceed 500px. (optionally, add a min-width also)

# c# - 在 Linux 上使用 Jenkins 运行用 C# 编写的 NUnit 测试

> ID：13255716
> 
> 赞同：8
> 
> 时间：2012-11-06T16:55:06.633
> 
> 标签：c#, jenkins, nunit

是否可以在 Linux 操作系统上使用 Jenkins 运行测试（使用 NUnit 用 C# 编写）？

我可以找到很多关于使用 Jenkins 运行 NUnit 测试的信息，但找不到任何关于我的情况的说法。

**更新**

看起来有[可能](http://jenkins.361315.n4.nabble.com/Hooks-to-execute-windows-dll-and-exe-builds-tp3400504p3400853.html)。我需要在 Linux 中使用 Master Jenkins 在 Windows 中运行 Slave Jenkins。[文章](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Windows+service)中描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:26:36.947

看起来有[可能](http://jenkins.361315.n4.nabble.com/Hooks-to-execute-windows-dll-and-exe-builds-tp3400504p3400853.html)。我需要在 Linux 中使用 Master Jenkins 在 Windows 中运行 Slave Jenkins。[文章](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Windows+service)中描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T16:29:32.893

事实证明，在 Linux 上使用 mono 相对轻松

1) 安装 NUnit 控制台。

sudo apt-get install monodevelop-nunit

2）在您的 Jenkins 项目中的 Build 下，在您的 MSBuild 步骤之后“添加构建步骤”“执行 shell”

```
cd "$WORKSPACE"
# so nunit does not fail on file operations
export MONO_IOMAP=all
nunit-console ./UnitTests/UnitTests.csproj 
```

我遇到的唯一问题是由于 Nancy 试图访问项目 bin/Debug 目录而导致涉及 NancyFx 的测试失败。（该项目在相同的环境设置下使用单声道正常运行）当我们离开 Nancy 时，结果证明这不是问题。

# c# - 布尔转换器未命中转换器

> ID：13255718
> 
> 赞同：2
> 
> 时间：2012-11-06T16:55:11.040
> 
> 标签：c#, wpf, xaml

我在 WPF 项目的 XAML 中使用布尔转换器。我想在“IsBusy”为真时禁用一些按钮。我绝对确定 IsBusy 已正确设置为 true/false。我能够在没有转换器的情况下成功地直接绑定到 IsBusy。以下内容目前不起作用。我已经在实际的转换器类中放置了断点，并且永远不会命中“Convert”和“ConvertBack”方法。这里有什么问题？

```
IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBooleanConverter}}" 
```

资源：

```
<Window.Resources>
    <converters:InvertedBooleanConverter x:Key="InvertedBooleanConverter" />
</Window.Resources> 
```

转换器：

```
xmlns:converters="clr-namespace:MyProject.Converters" 
```

转换器：

```
namespace MyProject.Converters
 {

    [ValueConversion(typeof(bool), typeof(bool))]
    public class InvertedBooleanConverter : IValueConverter
    {
        #region IValueConverter Members

        public object Convert(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            if (targetType != typeof(bool))
                throw new InvalidOperationException("The target must be a boolean");

            return !(bool)value;
        }

        public object ConvertBack(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:11:03.053

如果 isBusy 依赖属性？如果不是，则 IsBusy 的更改表单将不会传输到 isEnable

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T18:34:04.620

退后一步检查绑定是否在正确的位置——添加`<TextBlock Text="{Binding}" />`并确保它显示正确的类（包含 IsBusy 的类）。

# c++ - 如何为 C++ 创建命令行模拟器 GUI

> ID：13255719
> 
> 赞同：0
> 
> 时间：2012-11-06T16:55:12.943
> 
> 标签：c++, cmd, simulation

我正在研究开发一款类似于 hackRUN 或 uplink 的基于文本的网络安全游戏，但我没有 GUI 编程经验，我怀疑我家里的任何人都想学习如何制作和运行 .cpp 文件。所以我需要创建一个具有自定义命令行的 GUI，类似于 Linux 或 Windows“cmd”。该地区有可用的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:06:24.193

您可以创建一个与整个窗口大小相同的文本框控件，并对其进行自定义以使其看起来像一个控制台。例如，将背景设置为黑色，将字母颜色设置为白色等。

如何创建该文本框取决于您使用的 UI 框架。对于 C++，有 MFC 或托管的 WinForms，或者您可以使用 WPF 在 C# 中创建 UI 部分，并使用 C++/CLI 作为 C++ 和 C# 之间的桥梁。但是如果你想让它同时在 Windows 和 Linux 上运行，你可以使用 wxWidgets 或 Qt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:13:40.527

您可以通过从用户读取一行并在第一个空格（Python/pseudocode*）上拆分来模拟命令行：

```
for line in raw_input():
    command,arguments = line.split(' ',1) 
```

例如带有参数`read book`的命令。`read``book`

然后，您可以使用自己的逻辑处理他们给出的命令。这种方法的优点是您可以通过桌面上的快捷方式（无论是 linux 还是 windows）运行游戏，并且操作系统控制台将支持交互。

有一类游戏称为“文字冒险”游戏，在图形有限或不存在时很流行，您可能会发现它特别相关。考虑使用现有的文本冒险引擎，这样您就可以专注于游戏本身，而不是文本输入和解析的机制。

* 考虑用 Python 或类似的脚本语言编写它，因为它们提供了对字符串等的直接处理。对于命令行风格的家庭游戏，您不太可能需要 C++ 的原始功能和复杂性。

# machine-learning - 使用神经网络进行连续回归的梯度

> ID：13255724
> 
> 赞同：6
> 
> 时间：2012-11-06T16:55:25.027
> 
> 标签：machine-learning, neural-network, gradient, regression

我正在尝试实现具有 3 层的回归 NN（1 个输入层、1 个隐藏层和 1 个具有连续结果的输出层）。作为基础，我从[coursera.org](https://www.coursera.org/ml)类中获取了分类 NN，但更改了成本函数和梯度计算以适应回归问题（而不是分类问题）：

我的 nnCostFunction 现在是：

```
function [J grad] = nnCostFunctionLinear(nn_params, ...
                                   input_layer_size, ...
                                   hidden_layer_size, ...
                                   num_labels, ...
                                   X, y, lambda)

Theta1 = reshape(nn_params(1:hidden_layer_size * (input_layer_size + 1)), ...
                 hidden_layer_size, (input_layer_size + 1));

Theta2 = reshape(nn_params((1 + (hidden_layer_size * (input_layer_size + 1))):end), ...
                 num_labels, (hidden_layer_size + 1));

m = size(X, 1);

a1 = X;
a1 = [ones(m, 1) a1];
a2 = a1 * Theta1';
a2 = [ones(m, 1) a2];
a3 = a2 * Theta2';
Y = y;

J = 1/(2*m)*sum(sum((a3 - Y).^2))

th1 = Theta1;
th1(:,1) = 0; %set bias = 0 in reg. formula
th2 = Theta2;
th2(:,1) = 0;

t1 = th1.^2;
t2 = th2.^2;
th = sum(sum(t1)) + sum(sum(t2));
th = lambda * th / (2*m);
J = J + th; %regularization

del_3 = a3 - Y;
t1 = del_3'*a2;
Theta2_grad = 2*(t1)/m + lambda*th2/m;

t1 = del_3 * Theta2;
del_2 = t1 .*  a2;
del_2 = del_2(:,2:end);
t1 = del_2'*a1;
Theta1_grad = 2*(t1)/m + lambda*th1/m;

grad = [Theta1_grad(:) ; Theta2_grad(:)];
end 
```

然后我在**fmincg**算法中使用这个函数，但在第一次迭代 fmincg 结束它的工作。我认为我的渐变是错误的，但我找不到错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:49:27.453

如果我理解正确，您的第一个代码块（如下所示） -

```
m = size(X, 1);

a1 = X;
a1 = [ones(m, 1) a1];
a2 = a1 * Theta1';
a2 = [ones(m, 1) a2];
a3 = a2 * Theta2';
Y = y; 
```

就是在输出层得到输出a ^((3))。

Ng 关于 NN 的幻灯片具有以下配置来计算 a ^((3))。它与您的代码呈现的不同。

*   在中间/输出层，您没有执行激活函数`g`，例如`sigmoid`函数。

![在此处输入图像描述](../Images/b79525d0033c78fa960d9f776f5e1741.png)

就没有正则化项的成本函数`J`而言，Ng 的幻灯片具有以下公式：

![在此处输入图像描述](../Images/b0e3a2a07601c36f0e67690bea614fca.png)

我不明白为什么您可以使用以下方法计算它：

```
J = 1/(2*m)*sum(sum((a3 - Y).^2)) 
```

因为您根本不包括该`log`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T22:13:59.657

Mikhaill，我也一直在使用 NN 进行连续回归，并且在某些时候遇到过类似的问题。最好的办法是在运行模型之前针对数值计算测试梯度计算。如果这不正确，fmincg 将无法训练模型。（顺便说一句，我不鼓励你使用数值梯度，因为所涉及的时间要大得多）。

考虑到您从 Ng 的 Coursera 课程中获得了这个想法，我将为您实施一个可能的解决方案，以尝试对 Octave 使用相同的符号。

```
 % Cost function without regularization.
    J = 1/2/m^2*sum((a3-Y).^2); 

    % In case it´s needed, regularization term is added (i.e. for Training).
    if (reg==true);
 J=J+lambda/2/m*(sum(sum(Theta1(:,2:end).^2))+sum(sum(Theta2(:,2:end).^2)));
    endif;

    % Derivatives are computed for layer 2 and 3.
    d3=(a3.-Y);
    d2=d3*Theta2(:,2:end);

    % Theta grad is computed without regularization.
    Theta1_grad=(d2'*a1)./m;
    Theta2_grad=(d3'*a2)./m;

    % Regularization is added to grad computation.
    Theta1_grad(:,2:end)=Theta1_grad(:,2:end)+(lambda/m).*Theta1(:,2:end);
    Theta2_grad(:,2:end)=Theta2_grad(:,2:end)+(lambda/m).*Theta2(:,2:end);

    % Unroll gradients.
    grad = [Theta1_grad(:) ; Theta2_grad(:)]; 
```

请注意，由于您已取出所有 sigmoid 激活，因此导数计算非常简单，并且会简化原始代码。

后续步骤： 1\. 检查此代码以了解它是否对您的问题有意义。2.使用梯度检查来测试梯度计算。3\. 最后，使用 fmincg 并检查你得到不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T21:56:19.587

尝试包含 sigmoid 函数来计算第二层（隐藏层）值，并避免在计算目标（输出）值时使用 sigmoid。

```
function [J grad] = nnCostFunction1(nnParams, ...
                                   inputLayerSize, ...
                                   hiddenLayerSize, ...
                                   numLabels, ...
                                   X, y, lambda)

Theta1 = reshape(nnParams(1:hiddenLayerSize * (inputLayerSize + 1)), ...
                 hiddenLayerSize, (inputLayerSize + 1));

Theta2 = reshape(nnParams((1 + (hiddenLayerSize * (inputLayerSize + 1))):end), ...
                 numLabels, (hiddenLayerSize + 1));

Theta1Grad = zeros(size(Theta1));
Theta2Grad = zeros(size(Theta2));

m = size(X,1);

a1 = [ones(m, 1) X]';
z2 = Theta1 * a1;
a2 = sigmoid(z2);
a2 = [ones(1, m); a2];
z3 = Theta2 * a2;
a3 = z3;

Y = y';

r1 = lambda / (2 * m) * sum(sum(Theta1(:, 2:end) .* Theta1(:, 2:end)));
r2 = lambda / (2 * m) * sum(sum(Theta2(:, 2:end) .* Theta2(:, 2:end)));

J = 1 / ( 2 * m ) * (a3 - Y) * (a3 - Y)' + r1 + r2;

delta3 = a3 - Y;
delta2 = (Theta2' * delta3) .* sigmoidGradient([ones(1, m); z2]);
delta2 = delta2(2:end, :);

Theta2Grad = 1 / m * (delta3 * a2');
Theta2Grad(:, 2:end) = Theta2Grad(:, 2:end) + lambda / m * Theta2(:, 2:end);
Theta1Grad = 1 / m * (delta2 * a1');
Theta1Grad(:, 2:end) = Theta1Grad(:, 2:end) + lambda / m * Theta1(:, 2:end);

grad = [Theta1Grad(:) ; Theta2Grad(:)];

end 
```

在将输入传递给 nnCostFunction 之前对其进行规范化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T10:21:53.787

根据线性系统 NN 的第 5 周讲义指南，您应该在初始代码中进行以下更改：

1.  删除**num_lables**或将其设为 1（也在**reshape()**中）
2.  无需将**y**转换为逻辑矩阵
3.  对于**a2** - 将**sigmoid()**函数替换为**tanh()**
4.  在**d2**计算中 - 将**sigmoidGradient(z2)**替换为**(1-tanh(z2).^2)**
5.  从输出层移除 sigmoid ( **a3 = z3** )
6.  将非正则部分中的成本函数替换为线性函数：J = (1/(2*m))*sum((a3-y).^2)
7.  创建**predictLinear()**：使用 predict() 函数作为基础，将 sigmoid 替换为**tanh()**用于第一层假设，删除第二个 sigmoid 用于第二层假设，删除带有**max()**函数的行，使用隐藏层的输出作为预测结果的假设
8.  在讲义中的测试用例上验证您的**nnCostFunctionLinear()**

# javascript - JavaScript 捕获（与气泡）事件（在根目录中拦截一些事件，将其他事件传递给 iframe）

> ID：13255725
> 
> 赞同：0
> 
> 时间：2012-11-06T16:55:25.733
> 
> 标签：javascript

我的最终目标是在“我的页面”中捕获特定事件，同时将所有其他事件传递给 iFrame。起初我想尝试 z-index 并在 iFrame 上放置一个 div，但这会捕获所有事件。从这个网站上的[答案](https://stackoverflow.com/questions/1026060/handling-click-events-on-z-indexd-layers)中得到[线索](http://www.quirksmode.org/js/events_tradmod.html)，但由于某种原因，它似乎不起作用。我是新手所以可能很简单，只是看不到，希望您指出错误。

这是我的测试：

```
<script language="javascript" type="text/javascript">
function fH() {alert("a trunk, Hello World!");}
function fG() {alert("a branch, Goodbye Moon!");}
function fS() {alert("a leaf, Here comes the sun!");}
function RightMouseDown() {return false;}   
x=document.getElementById("b");
x.addEventListener('click','fH()',false);
</script>

<body>
<div id="trunk" onmousedown="fH()"> <p id="branch" onmousedown="fG()">Stout and strong, <em onmousedown="fS()">green and broad</em></p></div>
<div id="t"><p id="b">Stout and strong, <em id="l">green and broad</em></p></div>
</body> 
```

*   当我在第一个 div 中单击“绿色和广泛”时，我得到 S、G、然后是 H 警报 - 气泡（Firefox 和 Chrome）
*   我想反转并捕获所以认为 x=doc... 和 x.addEv... 会这样做，但在第二个 div 中没有任何动作？？？

第二次测试验证建议：

```
<body>
<div id="iframe" onmousedown="fH()"><h3>iFrame</h3></div>
<div id="wpane" onmousedown= "fG()"><h3>wPane</h3></div>
<body> 
```

CSS：

```
#iframe {color: blue; position: absolute; border: 1px solid blue; top: 100px; left: 100px; z-index: 0;}
#wpane {color: black; border: 1px solid black; position: absolute; top: 115px; left: 135px; z-index: 0; opacity: 0;} 
```

看起来我不知道什么是“隐形元素”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:21:23.403

如果你想在 iframe 之间传递数据而不使用点击劫持（这通常是一个坏主意），你可能想看看[OpenAjax Hub 2.0 PubSub](http://www.openajax.org/member/wiki/OpenAjax_Hub_2.0_Specification_Publish_Subscribe_Overview)（还有一个你可以使用的参考实现）

# lisp - 尾递归函数将元素附加到列表

> ID：13255731
> 
> 赞同：9
> 
> 时间：2012-11-06T16:55:49.800
> 
> 标签：lisp, scheme, racket, tail-call-optimization, tailrecursion-modulo-cons

我见过几个`append`将元素实现到列表的示例，但都没有使用**尾递归**。如何以功能风格实现这样的功能？

```
 (define (append-list lst elem)
    expr) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T17:52:35.973

下面是一个[尾递归模 cons](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)优化的实现，得到一个完全尾递归的代码。它复制输入结构，然后以自上而下的方式通过突变将新元素附加到它。由于此突变是对其内部新创建的数据进行的，因此它在外部仍然有效（不会更改传递给它的任何数据，并且除了产生结果之外没有可观察到的影响）：

```
(define (add-elt lst elt)
  (let ((result (list 1)))
    (let loop ((p result) (lst lst))
      (cond 
        ((null? lst) 
           (set-cdr! p (list elt)) 
           (cdr result))
        (else 
           (set-cdr! p (list (car lst)))
           (loop (cdr p) (cdr lst))))))) 
```

我喜欢使用“head-sentinel”技巧，它极大地简化了代码，代价是只分配了一个额外的 cons 单元格。

此代码使用低级突变原语来完成某些语言（例如 Prolog）中由编译器自动完成的工作。在 TRMC 优化假设方案中，我们将能够编写以下尾递归*模 cons*代码，并让编译器自动将其转换为与上述代码等效的代码：

```
(define (append-elt lst elt)              ;; %% in Prolog:
  (if (null lst)                          ;; app1( [],   E,R) :- Z=[X].
    (list elt)                            ;; app1( [A|D],E,R) :-
    (cons (car lst)                       ;;  R = [A|T], % cons _before_
          (append-elt (cdr lst) elt))))   ;;  app1( D,E,T). % tail call 
```

如果不是为了`cons`操作，`append-elt` *将*是尾递归的。这就是 TRMC 优化发挥作用的地方。

*2021 年更新：*当然，拥有*尾递归*函数的全部意义在于表达一个循环（以函数式风格，是的），例如，在 Common Lisp（在 CLISP 实现中）中，循环表达式

```
(loop for x in '(1 2) appending (list x)) 
```

（这是一种高级规范——如果它甚至没有以它自己非常具体的方式发挥作用）被翻译成相同的 tail-cons-cell 跟踪和改变风格：

```
[20]> (macroexpand '(loop for x in '(1 2) appending (list x)))
(MACROLET ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-ERROR)))
 (BLOCK NIL
  (LET (**(#:G3047 '(1 2))**)
   (PROGN
    (LET ((X NIL))
     (LET ((**#:ACCULIST-VAR-30483049** NIL) (**#:ACCULIST-VAR-3048** NIL))
      (MACROLET ((LOOP-FINISH NIL '(GO SYSTEM::END-LOOP)))
       (TAGBODY SYSTEM::BEGIN-LOOP (WHEN (ENDP #:G3047) (LOOP-FINISH))
        (SETQ X **(CAR #:G3047)**)
        (PROGN
         (LET (**(#:G3050 (COPY-LIST (LIST X)))**)
          (IF #:ACCULIST-VAR-3048
           (SETF #:ACCULIST-VAR-30483049
            (LAST **(RPLACD #:ACCULIST-VAR-30483049 #:G3050)**))
           (SETF #:ACCULIST-VAR-30483049
            (LAST **(SETF #:ACCULIST-VAR-3048 #:G3050)**)))))
        (PSETQ #:G3047 **(CDR #:G3047)**) (GO SYSTEM::BEGIN-LOOP) SYSTEM::END-LOOP
        (MACROLET
         ((LOOP-FINISH NIL (SYSTEM::LOOP-FINISH-WARN) '(GO SYSTEM::END-LOOP)))
         (RETURN-FROM NIL **#:ACCULIST-VAR-3048**)))))))))) ;
T
[21]>
```

（所有结构变异原语之母拼写为`R.P.L.A.C.D.`）所以这是 Lisp 系统（不仅仅是 Prolog）的一个例子，它实际上做了类似的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T17:17:10.860

好吧，*可以*编写一个尾递归`append-element`过程......

```
(define (append-element lst ele)
  (let loop ((lst (reverse lst))
             (acc (list ele)))
    (if (null? lst)
        acc
        (loop (cdr lst) (cons (car lst) acc))))) 
```

......但它的效率更低`reverse`（为了很好的衡量）。我想不出另一种*功能*（例如，不修改输入列表）方法来将此过程编写为尾递归，而无需先反转列表。

对于这个问题的*非功能性*答案，@WillNess 提供了一个很好的 Scheme 解决方案来改变内部列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-20T21:38:57.713

这是一个使用延续的功能性尾递归附加elt：

```
(define (cont-append-elt lst elt)
  (let cont-loop ((lst lst)
                  (cont values))
    (if (null? lst)
        (cont (cons elt '()))
        (cont-loop (cdr lst)
                   (lambda (x) (cont (cons (car lst) x))))))) 
```

性能方面，它接近威尔在 Racket 和 Gambit 中的变异，但在 Ikarus 和 Chicken Óscar 的反面中表现更好。突变总是表现最好的。然而，我不会使用这个，而是 Óscar 条目的一个小版本，纯粹是因为它更容易阅读。

```
(define (reverse-append-elt lst elt)
  (reverse (cons elt (reverse lst)))) 
```

如果你想要改变性能，我会这样做：

```
(define (reverse!-append-elt lst elt)
  (let ((lst (cons elt (reverse lst))))
     (reverse! lst)
     lst)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T18:12:36.123

您不能天真，但另请参阅提供 TCMC - Tail Call Modulo Cons 的实现。这允许

```
(cons head TAIL-EXPR) 
```

`TAIL-EXPR`如果 cons 本身是尾调用，则进行尾调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T17:40:54.553

这是 Lisp，不是 Scheme，但我相信你可以翻译：

```
(defun append-tail-recursive (list tail)
  (labels ((atr (rest ret last)
             (if rest
                 (atr (cdr rest) ret
                      (setf (cdr last) (list (car rest))))
                 (progn
                   (setf (cdr last) tail)
                   ret))))
    (if list
        (let ((new (list (car list))))
          (atr (cdr list) new new))
        tail))) 
```

我保留返回列表的头部*和*尾部，并在遍历列表参数时修改尾部。

# c# - StreamWriter 中的 Windows-1252 编码返回 ANSI 编码文件

> ID：13255733
> 
> 赞同：5
> 
> 时间：2012-11-06T16:55:54.627
> 
> 标签：c#, string, c#-4.0

我尝试使用 StreamWriter 在 Windows-1252 中对字符串进行编码。输入字符串 (dataString) 以 UTF8 编码。

```
StreamWriter sw = new StreamWriter(@"C:\Temp\data.txt", true, Encoding.GetEncoding(1252));
sw.Write(dataString);
sw.Close(); 
```

当我在 Notepad++ 中打开文件时，我得到一个 ANSI 文件。我需要一个 Windows-1252 编码文件。

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:59:07.053

您的文件是 Windows-1252 编码的。非 Unicode 的文件中没有数据来指示文件是如何编码的。在这种情况下，ANSI 只是意味着不是 Unicode。如果您在哪里将其编码为俄语/Windows-1251 并在 Notepad++ 中打开它，Notepad++ 也会将其显示为 ANSI。

有关详细信息，请参阅[Unicode、UTF、ASCII、ANSI 格式差异](https://stackoverflow.com/questions/700187/unicode-utf-ascii-ansi-format-differences)。

# xml - 匹配任何具有特定属性且其父节点具有相同属性的节点？

> ID：13255734
> 
> 赞同：0
> 
> 时间：2012-11-06T16:55:57.347
> 
> 标签：xml, xpath, xsl-fo

[所以不久前我在这里](https://stackoverflow.com/questions/8056547/match-a-node-if-it-has-a-certain-attribute-and-its-parent-has-the-same-attribute)问了一个关于匹配具有级别“文件”的父级的级别“文件”的子级的问题。解决方案如下：

```
 <xsl:template match="*[@level='file' ]/*[@level='file']"> 
```

这在当时很有效，但我现在意识到我需要超越第二级。所以除了匹配这个：

```
 <c01 level="file">
   <c02 level="file"></c02>
 </c01> 
```

我还需要匹配这个及其他：

```
<c01 level="file">
  <c02 level="file">
     <c03 level="file"></c03>
  </c02>
</c01> 
```

简而言之，有没有办法匹配级别“文件”文档中具有级别“文件”的直接父级的任何节点，无论深度如何？我需要这个来在 xsl-fo 文档中指定缩进。我真的只需要我的样式表来继续缩进孩子而不是他们的父母。

我希望这有点意义。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:11:07.883

```
//*[@level="file" and ../*[@level="file"]] 
```

此 XPath 表达式匹配`level="file"`其父节点也具有`level="file"`. 这是你需要的吗？

# javascript - 如何在文本框中获取值

> ID：13255737
> 
> 赞同：0
> 
> 时间：2012-11-06T16:56:03.140
> 
> 标签：javascript, jquery

我已经在 html 和 JavaScript 中编写了一些代码......我的查询是当我点击时`<td>`，无论与之关联的值是什么，都必须显示在相应的文本框中......在`<td>`我前面已经取了文本框...例如，我采用了 3 个`<td>`和 3 个文本框

```
 <script type="text/javascript">
       function click3(x) {
       x = document.getElementById("name").innerHTML
       var a = document.getElementById("txt"); 
       a.value = x; 
       }
       function click1(y) {
       y = document.getElementById("addr").innerHTML
       var b = document.getElementById("txt1");
       b.value = y;
       }
       function click2(z) {
       z = document.getElementById("email").innerHTML
       var c = document.getElementById("txt2");
       c.value = z;
         }
       </script> 
```

这是我的 JavaScript 代码，我知道这不是处理此类问题的适当方法，因为它提供了静态方法来处理此问题，是否有人对此问题有更好的解决方案？在 JavaScript/jQuery 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:17:17.850

据我了解您的问题，您可以尝试以下操作，假设您的 HTML 是这样构造的：

**HTML 标记**：

```
<table id="mytable">
  <tr>
    <th>Name</th>
    <th>Address</th>
     <th>Email</th>
  </tr>
  <tr>
    <td class="name">Tom</td>
    <td class="addr">789</td>
    <td class="email">tom@dot.com</td>
  </tr>
  <tr>
    <td class="name">Dick</td>
    <td class="addr">456</td>
    <td class="email">dick@dot.com</td>
  </tr>
  <tr>
    <td class="name">Harry</td>
    <td class="addr">123</td>
    <td class="email">harry@dot.com</td>
  </tr>
</table>

<input id="txt1" type="text" />
<input id="txt2" type="text" />
<input id="txt3" type="text" />​ 
```

**jQuery** :

```
$(".name").click(function(){
   $("#txt1").val($(this).text());
   $("#txt2").val($(this).nextAll().eq(0).text());
   $("#txt3").val($(this).nextAll().eq(1).text());
});​

$(".addr").click(function(){
   $("#txt2").val($(this).text());
   $("#txt1").val($(this).prevAll().eq(0).text());
   $("#txt3").val($(this).nextAll().eq(0).text());
});

$(".email").click(function(){
   $("#txt3").val($(this).text());
   $("#txt2").val($(this).prevAll().eq(0).text());
   $("#txt1").val($(this).prevAll().eq(1).text());
}); 
```

**演示**：http: [//jsfiddle.net/Z9weS/](http://jsfiddle.net/Z9weS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:59:59.000

如果 click1、click2 和 click3 应该是三个事件，那么您必须保留所有三个函数，您可以缩短为文本字段分配值的脚本代码。

```
<script type="text/javascript">
   function click3(x) {
      document.getElementById("txt").value = document.getElementById("name").innerHTML;
   }
   function click1(y) {
     document.getElementById("txt1").value = document.getElementById("addr").innerHTML;
   }
   function click2(z) {
     document.getElementById("txt2").value = document.getElementById("email").innerHTML; 
   }
   </script> 
```

如果您有单击事件并像这样缩短分配代码，则可以创建一个函数，

```
function SomeClick(x) {
   document.getElementById("txt").value = document.getElementById("name").innerHTML;
   document.getElementById("txt1").value = document.getElementById("addr").innerHTML;
   document.getElementById("txt2").value = document.getElementById("email").innerHTML;    
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:28:01.707

You can combine columns and rows. Per cell consisting id you give it th column title and

number of series it could be the index of the row combination of row and column gives the

address as per table cell by a specific event you can read the value of the id

Then you know to pull the cell value.

```
 $('tr')
        .click(function() {
        ROW = $(this)
            .attr('id');
        $('#display_Colume_Raw')
            .html(COLUME + ROW);

        $('#input' + COLUME + ROW)
            .show();
        STATUS = $("#input" + COLUME + ROW)
            .val();
    }); 
```

# php - 如何根据第一个条目从数据库中填写输入框。？

> ID：13255741
> 
> 赞同：0
> 
> 时间：2012-11-06T16:56:15.537
> 
> 标签：php, javascript

首先，我是 PHP 和 JavaScript 的新手。

我有多个输入框用于在 PHP 中输​​入日期。我想做的是，如果用户根据输入的日期在第一个输入框中输入日期，其余输入框应在从第一个输入框（OnChange）离开时从 SQL 表（按周显示日期）中自动填充。

我不知道我该怎么做。任何帮助将不胜感激..谢谢

我有输入框的代码

```
echo '<div class = "start_date" >'; //Start_Date class start
echo '<strong><label for="start_date">Start Date</label></strong>';
echo '<br/><br/>'; 
for($k=1;$k<=$textboxindex;$k++)
    {
    echo "<input type=\"text\" class='textboxsize' id= \"inputField$k\" name=\"start_date[]\" value=\"$start_date\" tabindex='$k'/>";
    echo "<br/>";
    }

echo '</div>'; //Start_date Class End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:49:56.863

 `````
$('.date1').change(function() {
 //prepopulate other select boxes

    var newDate = $(this).val();

    var date = new Date(newDate);//if its not already a timestamp
    var theday = date.getDate();
    var themonth = date.getMonth()+1;
    var theyear = date.getFullYear();

    var nextDay = new Date(theyear+'-'+themonth+'-'+theday+1);//if its not already a timestamp

$('.date2').val(nextDay);

}); 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:09:44.450

您需要使用 javascript 来运行 ajax 调用来预填充其他选择框。

 `````
$('.date1').change(function() {
 //prepopulate other select boxes

$.ajax({
  url: 'ajax/date2.html',
  success: function(data) {
    $('.date2').html(data);

  }
});
}); 
```````

# java - 尝试使用 Jena 的 java api 创建 Sparql 查询

> ID：13255744
> 
> 赞同：3
> 
> 时间：2012-11-06T16:56:26.833
> 
> 标签：java, sparql, jena

我使用 Apache Jena 库在 Java 中创建了一个本体模型，然后我输入了披萨本体。我正在尝试进行 sparql 查询，但表格打印为空白，尽管我的查询通常有答案。难道我做错了什么...？这是代码：

```
OntModel model = ModelFactory.createOntologyModel( OntModelSpec.OWL_MEM_MICRO_RULE_INF);
String inputFileName="pizza.owl";
InputStream in = FileManager.get().open( inputFileName );
if (in == null) {
    throw new IllegalArgumentException(
         "File: " + inputFileName + " not found");
}
model.read(in, null);

String queryString =
        "prefix pizza: <www.co-ode.org/ontologies/pizza/pizza.owl#Pizza> "+        
        "prefix rdfs: <" + RDFS.getURI() + "> "           +
        "prefix owl: <" + OWL.getURI() + "> "             +
        "select ?pizza where {?pizza a owl:Class ; "      +
        "rdfs:subClassOf ?restriction. "                  +
        "?restriction owl:onProperty pizza:hasTopping ;"  +
        "owl:someValuesFrom pizza:PeperoniSausageTopping" +
        "}";
Query query = QueryFactory.create(queryString);
QueryExecution qe = QueryExecutionFactory.create(query, model);
com.hp.hpl.jena.query.ResultSet results =  qe.execSelect();

ResultSetFormatter.out(System.out, results, query);
qe.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:52:32.423

您的前缀声明是错误的。您不小心包含了`Pizza`类的名称，并且还遗漏了`http`协议前缀。更正了，应该是：

```
"prefix pizza: <http://www.co-ode.org/ontologies/pizza/pizza.owl#> "+ 
```

前缀在 RDF 和 SPARQL 中的工作方式是您将 替换为`prefix:`任何定义的前缀，并且生成的字符串必须与您尝试匹配的资源的 URI*完全*匹配。它必须是完全匹配的——即使是字母大小写的差异也是显着的。

顺便说一句，您还可以通过以下方式简化加载本体`FileManager`：

```
OntModel model = ModelFactory.createOntologyModel( 
                                  OntModelSpec.OWL_MEM_MICRO_RULE_INF);
FileManager.get().readModel( model, "pizza.owl" ); 
```

# c# - 将自定义环境变量传递给 System.Diagnostics.Process

> ID：13255745
> 
> 赞同：5
> 
> 时间：2012-11-06T16:56:29.757
> 
> 标签：c#, .net, environment-variables

我正在开发一个调用外部进程的应用程序，如下所示：

```
ProcessStartInfo startInfo = new ProcessStartInfo(PathToExecutable, Arguments){
     ErrorDialog = false,
     RedirectStandardError = true,
     RedirectStandardOutput = true,
     UseShellExecute = false,
     CreateNoWindow = true,
     WorkingDirectory = WorkingDirectory
 };

using (Process process = new Process()) {
    process.StartInfo = startInfo;

    process.Start();
    process.BeginErrorReadLine();
    process.BeginOutputReadLine();
    process.WaitForExit();

    return process.ExitCode;
} 
```

我正在调用的进程之一取决于我不希望我的用户设置的环境变量。有没有办法修改发送到外部进程的环境变量？理想情况下，我可以让它们只对正在运行的进程可见，但如果我必须以编程方式在系统范围内设置它们，我会满足于此（但是，UAC 会强迫我以管理员身份运行吗？ )

ProcessStartInfo.EnvironmentVariables 是只读的，所以很多帮助就是......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:59:10.573

不过，您可以为其添加值。

来自[MSDN ProcessStartInfo.EnvironmentVariables 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx)：

> 虽然不能设置 EnvironmentVariables 属性，但可以修改该属性返回的 StringDictionary。例如，以下代码添加了一个 TempPath 环境变量： `myProcess.StartInfo.EnvironmentVariables.Add("TempPath", "C:\\Temp")`. 在更改 EnvironmentVariables 属性后，您必须将**UseShellExecute**属性设置为**false**才能启动进程。如果 **UseShellExecute**为**true**，则在调用 Start 方法时会引发 InvalidOperationException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:59:54.147

您可以使用索引器设置环境变量：

```
process.StartInfo.EnvironmentVariables['name'] = value; 
```

# sql-server - 可以执行程序但运行程序错误的作业？

> ID：13255746
> 
> 赞同：0
> 
> 时间：2012-11-06T16:56:38.633
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个从我的数据库中提取数据并使用 MSDB.DBO.sp_send_dbmail 发送电子邮件的程序。当我使用“EXEC myprocedure”时，该过程本身运行顺利。但是当我为该过程设置作业时，作业失败并出现以下错误

> '错误格式化查询，可能是无效参数 [SQLState 42000]（错误 22050）。步骤失败'

TSQL 语句“EXEC myprocedure”的工作有一个步骤，使用存储我的过程的数据库。有谁知道可能导致此错误的原因？

**更新**

我已经缩小了问题的范围。这与我使用的 Exchange 服务器有关。我在数据库邮件的帐户配置向导下使用域地址（即 mail.mycompany.com）作为“服务器名称”。我无法使用此域地址向列表服务器和外部用户发送电子邮件。我与我们的 Exchange 人员交谈，他建议使用其中一台邮件服务器的实际 IP 地址（即 10.123.53.53）。这解决了 listservs 和外部用户的问题，但是现在当我使用作业运行我的过程时，我无法发送电子邮件（当我手动运行它时，过程本身可以正确执行）。有谁知道我需要更改 Exchange 服务器上的哪些标准来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:15:16.503

这就像是一个权限问题。从给出的信息中无法准确指定问题所在的权限，但 TSQL 作业步骤将在服务器代理服务帐户的上下文中运行，因此请确保该帐户对用于构建的表具有 SELECT 权限查询，然后确保它对您在数据库邮件中使用的配置文件具有权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:34:59.693

问题出在 sp_send_dbmail 使用的 @query 参数上。由于某种原因，我的 SQL Server 代理帐户（它是域管理员）被拒绝访问以使用带有 @query 参数的 sp_send_dbmail。我最终完全删除了@query 参数，并将所有内容都放在了@body 参数中。@body 参数变成了常规文本和 SELECT 查询返回的内容的串联。

# oracle - 授予 Oracle 权限并不能修复 WebSphere XAER_RMERR 异常？

> ID：13255747
> 
> 赞同：1
> 
> 时间：2012-11-06T16:56:41.100
> 
> 标签：oracle, websphere-7, xa

我在 WebSphere ND 7.0.0.21 上部署了一个应用程序。其中我配置了一个 Oracle XA 数据源。最近应用程序崩溃了，当我重新启动它时，我开始每秒在 SystemOut.log 中收到以下异常。

```
[11/6/12 13:55:38:650 GMT] 0000000c InternalGener I   DSRA8205I: JDBC driver name  : Oracle JDBC driver
[11/6/12 13:55:38:651 GMT] 0000000c InternalGener I   DSRA8206I: JDBC driver version  : 11.2.0.2.0
[11/6/12 13:55:38:661 GMT] 0000000c InternalOracl I   DSRA8212I: DataStoreHelper name is: com.ibm.websphere.rsadapter.Oracle11gDataStoreHelper.
[11/6/12 13:55:38:662 GMT] 0000000c WSRdbDataSour I   DSRA8208I: JDBC driver type  : ""
[11/6/12 13:55:38:685 GMT] 0000000c WSRdbXaResour E   DSRA0304E:  XAException occurred. XAException contents and details are: The cause is               : null.
[11/6/12 13:55:38:837 GMT] 0000000c WSRdbXaResour E   DSRA0302E:  XAException occurred.  Error code is: XAER_RMERR (-3).  Exception is: <null>
[11/6/12 13:55:38:837 GMT] 0000000c XARminst      E   WTRN0037W: The transaction service encountered an error on an xa_recover operation. The resource was com.ibm.ws.rsadapter.spi.WSRdbXaResourceImpl@7b867b86\. The error code was XAER_RMERR. The exception stack trace follows: javax.transaction.xa.XAException
        at oracle.jdbc.xa.OracleXAResource.recover(OracleXAResource.java:709)
        at com.ibm.ws.rsadapter.spi.WSRdbXaResourceImpl.recover(WSRdbXaResourceImpl.java:1088)
        at com.ibm.ws.Transaction.JTA.XARminst.recover(XARminst.java:141)
        at com.ibm.ws.Transaction.JTA.XARecoveryData.recover(XARecoveryData.java:626)
        at com.ibm.tx.jta.PartnerLogTable.recover(PartnerLogTable.java:389)
        at com.ibm.tx.jta.RecoveryManager.resync(RecoveryManager.java:1530)
        at com.ibm.tx.jta.RecoveryManager.performResync(RecoveryManager.java:2265)
        at com.ibm.ws.tx.jta.RecoveryManager.performResync(RecoveryManager.java:114)
        at com.ibm.tx.jta.RecoveryManager.run(RecoveryManager.java:2218)
        at java.lang.Thread.run(Thread.java:736) 
```

当没有在数据库上授予适当的权限时，这似乎是一个标准问题，以允许 db 用户访问需要恢复的事务 - [http://www-01.ibm.com/support/docview.wss?uid= swg21196663](http://www-01.ibm.com/support/docview.wss?uid=swg21196663)

但是，我随后在该页面上运行 SQL 并重新启动应用程序服务器，但问题仍然存在。仅当我删除事务日志（在 IBM 页面上描述为解决方法）时，该问题才消失。

为什么授予权限不能解决问题？其他原因会导致 XAER_RMERR 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:36:17.283

我建议启用相关 MustGather (http://www-01.ibm.com/support/docview.wss?uid=swg21153216) 中描述的跟踪，以便查看数据库返回的实际错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T09:40:18.147

删除事务日志和合作伙伴日志可以解决问题。当然，在具有复杂事务方案的生产环境中执行此操作必须谨慎，否则 WebSphere 无法自行恢复它们。

# linux - 如何在perl中将ulimit设置为unlimited？

> ID：13255749
> 
> 赞同：0
> 
> 时间：2012-11-06T16:56:48.243
> 
> 标签：linux, perl, ulimit

我希望我的 perl 脚本的所有子进程在发生意外故障时生成核心文件。那么如何设置`ulimit`到`unlimited`perl 内部呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:10:58.543

您必须更改启动 perl 脚本的用户的 openfiles 参数。因此，您可以通过以下方式即时更改限制：

```
ulimit -n unlimited && perl path/to/your/script.pl 
```

或者你可以制作一个 bash 脚本`foo.sh`：

```
#!/bin/bash
ulimit -n unlimited
perl path/to/your/script.pl 
```

# java - 音高改变时声音发生器发出咔哒声

> ID：13255750
> 
> 赞同：1
> 
> 时间：2012-11-06T16:56:55.510
> 
> 标签：java, audio, wave

我有一个声音生成程序，它目前有一个充满音高的枚举类型，从 A0 开始，音高为 27.5 Hz。每次我循环抛出所有包含的音高的半音音阶，直到 G#5，无论音高持续什么时间，声音都会在转换之间发出咔哒声。我用作模型的代码是[https://stackoverflow.com/a/2065693/1777648](https://stackoverflow.com/a/2065693/1777648)，声波字节数组的生成方式相同，但我不知道如何修复点击。我有一种感觉，这可能是因为一个音高波的结束与下一个音高波的开始没有联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:11:06.250

你的假设是正确的。如果你不想点击，你必须确保生成了正弦波，以便在字节数组中只写入完整的句点。否则你会切断波浪，这会导致咔哒声。

对于实现：你可以有一个变量“nextPitch”，一旦一个完整的周期被写入，它将成为当前音高。

# python - numpy.savetxt“元组索引超出范围”？

> ID：13255758
> 
> 赞同：7
> 
> 时间：2012-11-06T16:57:14.357
> 
> 标签：python

我正在尝试将几行写入文本文件，这是我使用的代码：

```
import numpy as np

# Generate some test data
data = np.arange(0.0,1000.0,50.0)

with file('test.txt', 'w') as outfile:      
    outfile.write('# something')

    for data_slice in data: 
        np.savetxt(outfile, data_slice, fmt='%1.4e')

        outfile.write('# New slice\n') 
```

当代码运行到 savetxt 行时，我收到此错误：

```
 IndexError: tuple index out of range 
```

知道为什么会这样吗？我尝试删除“fmt”部分，但我得到了同样的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T17:08:45.797

问题是 numpy.save 期望一个包含一些形状信息的数组，而您只传递一个数字。

如果您想同时传递一个元素（但我建议您保存整个数组），您必须先将其转换为形状至少为 1 的 numpy 数组

```
np.savetxt(outfile, array(data_slice).reshape(1,), fmt='%1.4e') 
```

这是因为单个数字的形状是一个空元组，并且要写入文件，它会尝试沿第一维拆分

```
array(1).shape == tuple()
#True 
```

要保存整个数组就足够了：

```
np.savetxt(outfile, data, fmt='%1.4e') 
```

# php - 是否可以在 PHP 中临时更改 PATH？

> ID：13255760
> 
> 赞同：3
> 
> 时间：2012-11-06T16:57:21.377
> 
> 标签：php, windows, path

我尝试使用以下代码`PATH`在使用`exec()`.

```
$s1 = getenv ('PATH');
putenv('PATH=c:\bins');
$s2 = getenv ('PATH');
putenv('PATH='.$s1);
$s3 = getenv ('PATH');
var_dump($s1);
var_dump($s2);
var_dump($s3); 
```

脚本第一次运行时，一切都按预期工作。这是输出：

```
string 'C:\Program Files (x86)\'... (length=1400)
string 'c:\bins' (length=7)
string 'C:\Program Files (x86)\'... (length=1400) 
```

但是，似乎 PHP`PATH`在此脚本运行后会破坏，因为第二次运行它会产生以下输出。

```
boolean false
string 'c:\bins' (length=7)
string '' (length=0) 
```

我通过 fastcgi 在带有 lighttpd 和 PHP 5.3 的 Windows 上得到了这种行为。我还没有使用 Linux/Apache 进行测试。

以下方法在 Windows 上不起作用（即使您使用 &）： [如何在 PHP 中设置 $PATH？](https://stackoverflow.com/questions/3550449/how-to-set-path-in-php)

有谁知道一种与操作系统无关的改变方式`PATH`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:53:14.000

我相信您正在寻找 set_include_path [http://www.php.net/set_include_path](http://www.php.net/set_include_path)

```
<?php
//Set a new path
set_include_path('/usr/lib/pear');

// Works in all PHP versions
ini_set('include_path', '/usr/lib/pear');

//Add a new path to the already existing path throug get_include_path()
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
?> 
```

# jquery - JQUERY-UI：未捕获的 SyntaxError：意外的令牌

> ID：13255764
> 
> 赞同：0
> 
> 时间：2012-11-06T16:57:36.553
> 
> 标签：jquery, jquery-ui

我一直试图让一个[可拖动的 Jquery UI](http://jqueryui.com/draggable/)工作，但我遇到了以下错误，我似乎无法弄清楚如何修复它。

有任何想法吗？

![截图错误](../Images/933c0ace107f2cdf96dc2269b62df8e4.png)

-编辑-这是代码：

```
<script>
jQuery(function() {
    jQuery( "#draggable3" ).draggable({ 
        containment: "#containment-wrapper",
        cursor: "move",
            scroll: false,
        stop: function(e , ui) {
            jQuery("#mottox").val($(this).position().left);
            jQuery("#mottoy").val($(this).position().top);
        }
    });
});​&lt;/script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:04:52.737

您的代码中有一个额外的字符，见下文：

```
<script>
jQuery(function() {
    jQuery( "#draggable3" ).draggable({ 
        containment: "#containment-wrapper",
        cursor: "move",
            scroll: false,
        stop: function(e , ui) {
            jQuery("#mottox").val($(this).position().left);
            jQuery("#mottoy").val($(this).position().top);
        }
    });
});?</script> 
```

*   ^`?`闭幕前`</script>`

复制下面的代码并改用它：

```
<script>
jQuery(function() {
    jQuery( "#draggable3" ).draggable({ 
        containment: "#containment-wrapper",
        cursor: "move",
            scroll: false,
        stop: function(e , ui) {
            jQuery("#mottox").val($(this).position().left);
            jQuery("#mottoy").val($(this).position().top);
        }
    });
});</script> 
```

# php - PHP 和 CSV 每列数据没有被包裹在附件中

> ID：13255767
> 
> 赞同：1
> 
> 时间：2012-11-06T16:57:52.220
> 
> 标签：php, csv

我有以下代码，

```
function Warrantyform($to, $subject, $template, $replaceArray)
{
    $return = "";
    $str = valString($template);
    //die(var_dump($replaceArray));
    CallDatabase("insert into sales_formsholder 
     (iformtype, cto, csubject, cmsg, chtmlmsg) 
     values ( 1 ,'" . $to . "', '" . $subject . "', '" . $str . "', '')");
    //$handle = fopen($_SERVER["DOCUMENT_ROOT"]. "/cron/" . date(dMY) . ".csv");
    $aList = array();
    foreach ($replaceArray as $k => $v) {
        $aList[] = (string)$v ;
    }    
    $aList[] = date("d.m.Y h:i:s");
    $aCsvLine = array(
        $aList
    );
    $fp = fopen($_SERVER['DOCUMENT_ROOT'] . 
      "/cron/register_warranty_" . date("dMY") . ".csv", 'a');
    //die(var_dump($fp));
    foreach ($aCsvLine as $fields) {
        fputcsv($fp, $fields);
    }
    fclose($fp);
} 
```

我期待得到这样的输出，

```
"column 1", "column 2", "column 3", "column 4", "column 5" 
```

但我得到的更像是，

```
"column 1", column 2, column 3, "column 4", "column 5" 
```

我需要正确封闭 CSV 中的每个条目，为什么没有发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:01:32.883

我会在您的 fputcsv 调用中提供分隔符和字段附件。

```
 fputcsv($fp,$fields,',','"') 
```

# java - 带有 PrintDialog 的 PDF 渲染器

> ID：13255768
> 
> 赞同：1
> 
> 时间：2012-11-06T16:57:54.197
> 
> 标签：java, printing, swt, pdfrenderer

这可能吗？

我正在获取现有 PDF 文档的目录和文件名。 `C:\temp\FileName.pdf`

1.  使用 PDF Renderer 查看文档或打印文档 我的 Eclipse 项目中包含 PDF Renderer，只是不知道如何使用它

2.  然后使用 PrintDialog 打印出 PDF 文档。我认为 PDF Renderer 必须做一些事情才能使 PDF 文档可打印

我想在我的表单上有 2 个按钮

*   查看 PDF -> 以只读方式打开 pdf 文档
*   打印 PDF -> 准备好打印的 pdf 文档，然后调用 PrintDialog 选择本地打印机，然后打印

我没有找到任何显示如何在查看模式下打开 PDF 文档的 PDFRenderer 示例代码。我还没有看到有关如何将 PDF 渲染器结果发送到 PrintDialog 进行打印的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:14:01.073

您当然可以在您的应用程序中实现 PDF 渲染。问题是，是否真的有必要。由于您没有指定要包含的库，因此我无法为您提供`PDFRenderer`.
但是，为了启动外部 PDF 查看器以及如何实现打印按钮，这些 API 类很有用：

*   [`org.eclipse.swt.program.Program`](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fprogram%2FProgram.html)
*   [`org.eclipse.swt.printing.PrintDialog`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fprinting%2FPrintDialog.html)

至少它会帮助（部分）解决你的问题。

# python - 卡在while循环python中

> ID：13255769
> 
> 赞同：1
> 
> 时间：2012-11-06T16:58:03.857
> 
> 标签：python, while-loop

我正在用 python 创建一个聊天服务器，并且在该语言中已经是一个菜鸟了。我目前有 1 个问题，我想在进一步解决之前解决，但我似乎无法找到解决问题的方法。

这是一个持续的while循环..

在下面的代码中是出错的地方

```
while 1:
    try:
        data = self.channel.recv ( 1024 )
        print "Message from client: ", data
        if "exit" in data:
            self.channel.send("You have closed youre connection.\n")
            break
    except KeyboardInterrupt:
        break
    except:
        raise 
```

当这段代码被执行时，在我的客户端上我需要输入“exit”来退出连接。这很有魅力，但是当我使用 CTRL+C 退出连接时，我的服务器会打印几千次“来自客户端的消息：”。

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T17:03:21.757

您在客户端按 Ctrl-C。这会导致服务器`self.channel`关闭。

由于在关闭的通道上调用`recv()`会立即返回一个空白字符串，因此您的服务器代码会陷入无限循环。

要解决此问题，请将以下行添加到您的服务器代码中：

```
data = self.channel.recv ( 1024 )
if not data: break # <<< ADD THIS 
```

或者，正如@sr2222 所建议的，您可以将这和您当前的检查合并为一个：

```
if not data or 'exit' in data: 
```

如果通道已关闭，这将退出循环。

# .net - 控制 pdf 的打印选项

> ID：13255770
> 
> 赞同：1
> 
> 时间：2012-11-06T16:58:04.477
> 
> 标签：.net, pdf, printing

> **可能重复：**
> [如何将 pdf 页面设置设置为打印属性对话框？](https://stackoverflow.com/questions/8922323/how-to-set-pdf-page-settings-to-print-properties-dialog)

我正在使用 SSRS 或使用 HTML 到 PDF 组件生成许多 PDF。我想要为每个文档做的是将要打印的第一页设置到纸盘 1 和后续页面。

有没有办法做到这一点？System.Drawing.Printing 和 System.Printing 似乎是不错的候选者，但它们似乎对 PDF 没有用（我可能错了）。Adobe sdk 乍一看似乎也没有那种粒度级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:45:06.857

您是否尝试在要打印的机器上的打印选项中创建配置文件？您可以为第 1 页和后续页面指定不同的纸张来源。在我看来，这正是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:39:15.650

据我所知，您无法在 PDF 文件本身中指定此类信息。您确实可以从打印应用程序中获得一些选项：

**选项 1**：使用 P/Invoke 和商业图书馆[Amyuni PDF Creator ActiveX](http://www.amyuni.com/en/developer/pdfcreatoractivex/) *（通常的免责声明适用）*：

对于使用自定义配置的静默打印，您可以尝试使用 Win32 API。您需要创建一个 DEVMODE 结构，并在打印期间使用它。

MSDN 中的这篇文章可能会有所帮助：
[如何使用 DocumentProperties() 函数修改打印机设置](http://support.microsoft.com/kb/167345)

[在 Amyuni PDF Creator ActiveX 中，您可以在调用Document.Print](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_ACTIVE_X/Using_the_PDF_Creator_Control/Methods/Printing/Print_Method.htm)方法之前为文档对象设置一个 DEVMODE 结构。

```
byte[] devmode = GetMyDevModeAsByteArray();
pdfCreator1.Document.AttributeByName(”PrinterDevMode”).Value = devmode; 
```

我必须说我没有测试过这个。“PrinterDevMode”属性上使用的 DEVMODE 结构是由 ActiveX 控件本身通过显示打印设置对话框生成的，但我认为可以安全地假设它可以通过其他方式获得，因为在所有情况下，最终定义结构的是打印机驱动程序。如果我有时间，我可以稍后测试。

Amyuni PDF Creator 还可以根据为 PDF 文件中的每个页面指定的页面大小选择纸盘。因此，如果这是您真正想要实现的目标，您可以使用[“FormToBinMap”文档属性](http://www.amyuni.com/WebHelp/Developer_Documentation.htm#Amyuni_PDF_Creator_for_NET/Object_Attributes/Document_Attributes.htm)来配置您要为每个页面大小使用的托盘。在这种情况下，您不需要自定义 DEVMODE 结构。

**选项 2：**使用 WPF：

如果您使用 WPF，并且如果目标打印机提供 XPS 驱动程序，那么您可以使用[PrintTicket.InputBin执行此操作](http://msdn.microsoft.com/en-us/library/system.printing.printticket.inputbin.aspx)

来自 MSDN：

**PrintTicket.InputBin**属性：

> 获取或设置一个值，该值指示要使用的输入纸盒（纸盘）。

您可以使用 Amyuni PDF Creator .Net 或 ActiveX 将您的 PDF 文件转换为 XPS。
或者，如果 GPL 许可证适合您的需要，您可以使用 ghostscript 将文件转换为光栅图像，然后[将其包装在 XPS 文件](http://social.msdn.microsoft.com/Forums/en-US/windowsxps/thread/8c6eb3ee-f541-4e00-b0e9-a982db7c73f5/)中。

**选项 3：**

如果您的目标打印机是 PostScript 打印机，您可以将文件拆分为 1 页文件，然后使用 ghostscript 将每个文件转换为 PostScript 格式，然后在打印之前为每页指定托盘，但据我所知，这是最后部分是特定于设备的（我可能错了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:40:34.803

这在 PDF 中无法解决，因为 PDF 与硬件无关。

[JDF](http://www.adobe.com/products/jdf/)就是为此而开发的，但只有印刷厂才能处理。

# c# - CRM 2011 中自定义活动的 scheduleend 字段在更新时设置为空

> ID：13255772
> 
> 赞同：0
> 
> 时间：2012-11-06T16:58:09.130
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

当我尝试更新自定义活动时，计划结束日期字段被设置为空。

我正在使用通用实体类来创建和更新自定义活动。

这发生在控制台应用程序和 Web 服务中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:58:09.130

这似乎是因为我还在创建和更新期间将预定开始日期字段设置为`null`.

如果我在调用 update 时在 Entity 类中删除 schedulestart date 字段的包含，或者将其设置为一个值，则 scheduleend date 字段更新就可以了。

评论中指出的另一个解决方案是仅使用 SDK 中的 Crm Service Util 生成的早期绑定实体类型。

# eclipse - Eclipse RCP & tycho - org.eclipse.swt.widgets.Button 类型无法解析。它是从所需的 .class 文件中间接引用的

> ID：13255774
> 
> 赞同：3
> 
> 时间：2012-11-06T16:58:11.857
> 
> 标签：eclipse, eclipse-rcp, tycho

**情况：** 我有一个 Eclipse RCP 应用程序，我正在尝试使用 Eclipse 的 tycho 插件构建它。
当我在 IDe 中执行我的 Eclipse 应用程序时 - 应用程序正常执行。
使用 tycho 构建应用程序时 - 抛出以下错误：

```
The type org.eclipse.swt.widgets.Button cannot be resolved. It is indirectly referenced from required .class files 
```

**我做了什么：**
在其他情况下，我发现抛出“缺少要求”异常 -[缺少传递插件依赖是原因](https://issues.sonatype.org/browse/TYCHO-400)。

In my case an SWT widget "Button" is missing, so I am trying to import swt. SWT is platform dependant so I am importing swt inside of the **product**, as described [here](http://wiki.eclipse.org/Tycho/FAQ).

Anyway, during compilation the error occurs again.

**Question:**
Do someone have any Idea, how to solve this Problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:41:50.557

我从邮件列表中得到了答案（Thnx Jeff MAURY！） - 这似乎是第谷的错误。 [这](https://git.eclipse.org/r/#/c/8163/)是一个可用的补丁。

对于那些还不了解 GIT 的人，比如我：

*   在 Windows 上检查补丁时，使用 TortoiseGit 或 MSYGit 客户端，而不是 EGit 客户端 - 它不会识别存储库。
*   另外使用**https**存储库，而不是 git 存储库 - git 对我不起作用
*   checkot 语法是`git clone https://git.eclipse.org/r/tycho/org.eclipse.tycho.git`- [https://git.eclipse.org/r/tycho/org.eclipse.tycho.git](https://git.eclipse.org/r/tycho/org.eclipse.tycho.git)是这里的存储库 URL

# html - Browser support for left: 0; right: 0;

> ID：13255776
> 
> 赞同：-3
> 
> 时间：2012-11-06T16:58:17.473
> 
> 标签：html, css

Pretty much as per the title really.

Is it safe to use the following CSS to make the element fit to its parent's width?

```
.element {
    position: absolute;
    left: 0;
    right: 0;
    background-color: #ccc;
    border-top: 1px solid #ddd;
} 
```

We can ignore IE < 8.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:12:49.497

这是安全的。但是不要让我坚持。本声明按原样提供，不提供任何形式的保证。

这是一篇不错的文章：[冲突的绝对位置](http://www.alistapart.com/articles/conflictingabsolutepositions/)

此外，父母需要应用位置（即`static`通常不是`relative`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:00:25.673

`left`并且`right`被所有主流浏览器完全支持

![在此处输入图像描述](../Images/bfebfa1919ae137ce4024c7a9651bcb1.png)

**IE7**和**更早版本**`inherit` 不支持该值 。

# c# - C# 套接字中的并发连接

> ID：13255779
> 
> 赞同：0
> 
> 时间：2012-11-06T16:58:37.220
> 
> 标签：c#, sockets

三个应用程序同时运行，2 个客户端和 1 个服务器。整个系统应具有以下功能：

*   客户端向服务器发送一个序列化对象，然后服务器将该对象作为流接收，最后另一个客户端从服务器获取该流并对其进行反序列化。

这是发件人：

```
 TcpClient tcpClient = new TcpClient();
            tcpClient.Connect("127.0.0.1", 8888);

            Stream stream = tcpClient.GetStream();
            BinaryFormatter binaryFormatter = new BinaryFormatter();
            binaryFormatter.Serialize(stream, event); // Event is the sending object

            tcpClient.Close(); 
```

服务器代码：

```
 TcpListener listener = new TcpListener(IPAddress.Parse("127.0.0.1"), 8888);
        listener.Start(); 
        Console.WriteLine("Server is running at localhost port 8888 ");

        while (true)
        {
            Socket socket = listener.AcceptSocket();
            try 
            {
                Stream stream = new NetworkStream(socket);
                // Typically there should be something to write the stream
                // But I don't knwo exactly what should the stream write
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception: " + e.Message);
                Console.WriteLine("Disconnected: {0}", socket.RemoteEndPoint);
            }
        } 
```

收件人：

```
 TcpClient client = new TcpClient();
        // Connect the client to the localhost with port 8888
        client.Connect("127.0.0.1", 8888);
        Stream stream = client.GetStream();
        Console.WriteLine(stream); 
```

当我只运行发送方和服务器并检查服务器时，服务器正确接收数据。问题是当我运行接收器时，一切都断开了。那么我的问题在哪里？谁能指出我？谢谢

# sql - 如何按列名加入

> ID：13255780
> 
> 赞同：0
> 
> 时间：2012-11-06T16:58:36.937
> 
> 标签：sql, join, sybase

我有一张桌子 T1 这样

```
gsdv   |nsdv  |esdv
-------------------
228.90 |216.41|0.00 
```

和一个表 T2 使得

```
ds                 |nm
--------------------------
'Non-Revenue Sales'|'ESDV'
'Gross Sales'      |'GSDV'
'Net Sales'        |'NSDV' 
```

如何获得下表？

```
ds                 |nm    |val
---------------------------------
'Non-Revenue Sales'|'ESDV'|0.00
'Gross Sales'      |'GSDV'|228.90
'Net Sales'        |'NSDV'|216.41 
```

我知道我可以通过以下方式做到这一点

```
SELECT ds,nm,esdv val FROM T1,T2 WHERE nm = 'esdv'
UNION
SELECT ds,nm,gsdv val FROM T1,T2 WHERE nm = 'gsdv'
UNION
SELECT ds,nm,nsdv val FROM T1,T2 WHERE nm = 'nsdv' 
```

但我正在寻找更通用/更好的解决方案。我正在使用 Sybase，但如果您能想出一种方法来使用其他 DBMS 执行此操作，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:51:54.370

你可以用 CASE 试试。看起来像

```
SELECT ds,nm,(CASE WHEN nm = 'esdv' THEN esdv WHEN nm = 'gsdv' THEN gsdv WHEN nm = 'nsdv' THEN nsdv END) val FROM T1,T2 
```

# regex - 正则表达式 if-else 表达式

> ID：13255784
> 
> 赞同：1
> 
> 时间：2012-11-06T16:58:51.870
> 
> 标签：regex, oracle, oracle10g

我正在尝试使用 Oracle 的`REGEXP_SUBSTR()`函数从文本字段中提取分钟数。

数据：

```
Treatment of PC7, PT1 on left. 15 min.
15 minutes.
15 minutes
15 mins.
15 mins
15 min.
15 min
15min
15 
```

在每种情况下，我都希望提取字符串的“15”部分。

尝试：

*   `\d+`获取所有数值，包括“7”和“1”，这是不可取的。
*   `(\d)+(?=\ ?min)`从除最后一行之外的所有行中获取“15”。
*   `(?((\d)+(?=\ ?min))((\d)+(?=\ ?min))|\d+)`，一个条件语句，不匹配任何东西。

我的条件语句有什么问题？

** 编辑 **

```
WITH DATA AS (

  SELECT 'Treatment of PC7, PT1 on left. 15 min.' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 minutes.' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 minutes' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 mins.' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 mins' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 min.' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15 min' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15min' COMMENTS FROM DUAL

  UNION ALL

  SELECT '15' COMMENTS FROM DUAL

)

SELECT  COMMENTS,
        REGEXP_SUBSTR(COMMENTS, '(\d+)\s?(?:min.*)?$', 1, 1) A,
        REGEXP_SUBSTR(COMMENTS, '\d+?(?= ?min)|^\d+$', 1, 1) B,
        REGEXP_SUBSTR(COMMENTS, '\d+?(?: ?min)|^\d+$', 1, 1) C

FROM DATA 
```

结果（必须有比“代码示例”更好的方式来格式化列）：

```
COMMENTS A B C
Treatment of PC7, PT1 on left. 15 min.          
15 minutes.         
15 minutes          
15 mins.            
15 mins         
15 min.         
15 min          
15min           
15  15  15  15 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:08:33.090

此正则表达式将为您工作。

```
^.*?(\d+)(( ?min.*$)|$) 
```

**解释**

*   `^.*?`- 匹配字符串的开头，后跟任意字符 0 次或更多次
*   `(\d+)`- 匹配至少一位数字并将其存储在反向引用位置 1
*   `( ?min.*$)`- 匹配空格（可能）、`min`、任何字符（可能），然后是字符串的结尾。
*   `(...|$)`- 如果找不到`min`，它将查看是否有字符串的结尾。

然后，不要使用`REGEXP_SUBSTR()`，而是`REGEXP_REPLACE()`像这样使用，将整个字符串替换为存储在反向引用位置 1 （您的号码）中的内容：

```
REGEXP_REPLACE(COMMENTS, '^.*?(\d+)(( ?min.*$)|$)', '\1') A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:12:32.830

如果您可以保证时间戳将始终显示为字符串的最后一部分，则可以：

```
(\d+)\s?(?:min.*)?$ 
```

我不知道 Oracle 是否支持非捕获组，但这很容易解决。我的经验是它的 RegExp 引擎仅限于非常普通的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:57:08.077

使用多个表达式的替代工作解决方案：

```
TO_NUMBER(
    CASE
        -- number only
        WHEN LENGTH( REGEXP_SUBSTR(MEAS_COMMENT, '^\d+$', 1, 1) ) >0 THEN REGEXP_SUBSTR(MEAS_COMMENT, '^\d+$', 1, 1)
        -- XX min
        WHEN LENGTH( REGEXP_SUBSTR(MEAS_COMMENT, '\d+( ?min)', 1, 1) ) >0 THEN REGEXP_SUBSTR(REGEXP_SUBSTR(MEAS_COMMENT, '\d+( ?min)', 1, 1), '\d+', 1, 1)
    END
) MINUTES 
```

** 编辑 **

```
-- same results without the `CASE` statement:
TO_NUMBER( REGEXP_SUBSTR(REGEXP_SUBSTR(COMMENTS, '(\d+)( ?min|$)', 1, 1), '\d+', 1, 1) ) 
```

# c++ - Boost.Log - 一个日志文件的多个进程？

> ID：13255785
> 
> 赞同：2
> 
> 时间：2012-11-06T16:59:01.653
> 
> 标签：c++, logging, boost

通读Boost.Log[的文档](http://boost-log.sourceforge.net/libs/log/doc/html/index.html)，它解释了如何从一个应用程序很好地“扇出”到多个文件/接收器，以及如何让多个线程一起工作以登录到一个地方，但是是否有任何文档说明如何让多个进程记录到一个日志文件？

我想象的是每个进程都会记录到自己的“私有”日志文件中，但此外，任何超过一定严重性的消息也会进入“公共”日志文件。Boost.Log 有可能吗？是否有一些水槽配置可以让这变得容易？

我知道我可能会[遇到此处的常见问题解答](http://boost-log.sourceforge.net/libs/log/doc/html/log/rationale/why_weak_record_ordering.html)中描述的相同“时间戳乱序”问题，但没关系，只要时间戳正确，我就可以使用它。这一切都在一台机器上，所以也没有远程文件系统问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:28:23.210

我的期望是直接写入日志文件的 Boost.Log 后端将在写入日志条目之间保持这些文件打开。这将导致在多个进程中使用同一个日志文件时出现问题，因为文件系统通常不允许多个进程写入一个文件。

有一些 Boost.Log 后端可用于将所有日志记录放在一个地方。这些是[系统日志](http://boost-log.sourceforge.net/libs/log/doc/html/log/detailed/sink_backends.html#log.detailed.sink_backends.syslog)和[Windows 事件](http://boost-log.sourceforge.net/libs/log/doc/html/log/detailed/sink_backends.html#log.detailed.sink_backends.event_log)日志后端。其中，syslog 后端可能是最容易使用的。

# coffeescript - 通过循环通过咖啡脚本中的对象动态字符串函数调用

> ID：13255789
> 
> 赞同：1
> 
> 时间：2012-11-06T16:59:37.470
> 
> 标签：coffeescript

[这与我之前发布的一个问题](https://stackoverflow.com/questions/13198945/coffeescript-dynamically-create-call-a-function-from-a-list-on-select-box-value)松散相关，尽管使用了不同的图像编辑库（[CamanJS](http://camanjs.com/docs)而不是 Pixastic）并且代码有所重构。

我正在尝试编写一个函数`changify`，将 HTML5 图像画布恢复为其原始状态，然后对其进行一些预设更改。此代码`imageClipName`从名为 的列表中加载正确的画布元素，其`camanCache`工作原理：

```
changify = (imageClipName) ->
    camanCache[imageClipName].revert ->
        camanCache[imageClipName]
            .brightness(10)
            .contrast(10)
            .noise(10)
            .render()
    console.log(camanCache[imageClipName]) 
```

但我想要的是从另一个名为的列表中找到保存的预设更改，`imageValues`并从该列表的键值对中动态创建图像函数更改字符串。这是我尝试做的，但失败了：

```
imageClipName = "image_1"
imageValues = {image_1:{brightness: 10, contrast: 10, noise: 10}, image_2:{...}...}

changify = (imageClipName) ->
    camanCache[imageClipName].revert ->
        camanCache[imageClipName]
            for o in imageValues when o.id == imageClipName
                for key, val of o
                    .#{key}(val)
            .render() 
```

`changify`这给了我函数（ ）第三行的咖啡脚本语法错误`Unexpected 'INDENT'`，但我怀疑这`.#{key}(val)`不适用于将多个函数附加到`camanCache[imageClipName]`. 如何在coffeescript中动态字符串函数调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:01:24.787

我认为您正在尝试这样做：

```
changify = (imageClipName) ->
    camanCache[imageClipName].revert -> 
        clip = camanCache[imageClipName]
        for id, methods of imageValues when id == imageClipName
            for name, arg of methods
                clip = clip[name](arg)
            clip.render() 
```

`for ... of`请注意，由于您正在迭代一个对象，所以在外循环中切换到的`for ... in`是 CoffeeScript 中的数组。

所以鉴于此：

```
{brightness: 10, contrast: 10, noise: 10} 
```

在`methods`，这个循环：

```
clip = camanCache[imageClipName]
for name, arg of methods
    clip = clip[name](arg)
clip.render() 
```

将具有与以下相同的效果：

```
camanCache[imageClipName].brightness(10).contrast(10).noise(10).render() 
```

`key, val`迭代对象时对的顺序`o`未定义，因此无法保证`brightness`,`contrast`和`noise`调用的顺序。如果您按特定顺序需要它们，则必须使用数组`methods`：

```
imageValues = {image_1: [['brightness', 10], ['contrast', 10], ['noise', 10]], ... }

changify = (imageClipName) ->
    camanCache[imageClipName].revert -> 
        clip = camanCache[imageClipName]
        for id, methods of imageValues when id == imageClipName
            for method in methods
                clip = clip[method[0]](method[1])
            clip.render() 
```

或者更好一点：

```
imageValues = {image_1: [ {name: 'brightness', arg: 10}, {name: 'contrast', arg: 10}, {name: 'noise', arg: 10}], ... }

changify = (imageClipName) ->
    camanCache[imageClipName].revert -> 
        clip = camanCache[imageClipName]
        for id, methods of imageValues when id == imageClipName
            for method in methods
                clip = clip[method.name](method.arg)
            clip.render() 
```

# java - 使用工厂模式的最佳方式是什么？

> ID：13255790
> 
> 赞同：-4
> 
> 时间：2012-11-06T16:59:40.653
> 
> 标签：java, factory-pattern

我的 Java 应用程序中有一个工厂。看起来像：

```
// Common Interface
 interface Currency {
   String getSymbol();
  }

// Concrete Rupee Class code
class Rupee implements Currency {
       @Override
       public String getSymbol() {
              return "Rs";
       }
}

// Concrete SGD class Code
class SGDDollar implements Currency {
       @Override
       public String getSymbol() {
              return "SGD";
       }
}

// Concrete US Dollar code
class USDollar implements Currency {
       @Override
       public String getSymbol() {
              return "USD";
       }
} 
```

我有一个FactoryClass：

```
class CurrencyFactory {

       public static Currency createCurrency (String country) {
       if (country. equalsIgnoreCase ("India")){
              return new Rupee();
       }else if(country. equalsIgnoreCase ("Singapore")){
              return new SGDDollar();
       }else if(country. equalsIgnoreCase ("US")){
              return new USDollar();
        }
       throw new IllegalArgumentException("No such currency");
       }
} 
```

因此，例如，如果一个国家/地区字符串是“印度”，它会返回卢比。我需要实现，如果国家字符串是“全部”，它会将所有对象返回为卢比、新元和美元。有这样的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:12:54.283

你为什么不使用 a`Map`来查找它？您**不必**为了花哨而使用模式。在某些情况下，它们只会使您的代码变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:23:45.690

尝试这样的事情

创建一个类作为 AllCurrency

```
 public class AllCurrency implements Currency{

private Rupee rupee;
private SGDDollar sgdDollar;
private USDollar useDoler;

public AllCurrency (Rupee rupee,SGDDollar sgDoler,USDollar usDoller){
    this.rupee = rupee;
    this.sgdDollar = sgDoler;
    this.usDoller = usDoller
}

@Override
   public String getSymbol() {
          return "all";
   }

// add getters and setters 
```

}

还有你的工厂

```
public static Currency createCurrency (String country) {
   if (country. equalsIgnoreCase ("India")){
          return new Rupee();
   }else if(country. equalsIgnoreCase ("Singapore")){
          return new SGDDollar();
   }else if(country. equalsIgnoreCase ("US")){
          return new USDollar();
    }else if(country. equalsIgnoreCase ("all")){
          return new AllCurency(new Rupee(),new SGDDollar(),new USDollar());
    }
   throw new IllegalArgumentException("No such currency");
   } 
```

# objective-c - 如何找出字符串中的第一个字符是否是拉丁字母表中的字母

> ID：13255796
> 
> 赞同：3
> 
> 时间：2012-11-06T16:59:55.283
> 
> 标签：objective-c

我有一个带字符串的数组。检查数组中每个字符串的第一个字符是否来自拉丁字母的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T17:07:24.877

基本上你可以使用这样的字符集：

```
NSString* string = @"This is a string";
NSCharacterSet *letters = [NSCharacterSet letterCharacterSet];
if([letters characterIsMember:[string characterAtIndex:0]]) {
    // This is a letter
} 
```

这个例子不言自明:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:10:13.207

这取决于你是在处理 Objective-C 对象还是 C（我假设是 Objective-C，但让我们两者都做）

Objective-C - 数组`NSArray`是`NSStrings`：

1.  获取第一项：`NSString *firstString = [array objectAtIndex:0];`
2.  获取一个字母的范围：`NSRange lettersRange = [firstString rangeOfCharacterFromSet:[NSCharacterSet letterCharacterSet];
3.  检查范围从字符串的开头开始：`BOOL isFirstCharALetter = lettersRange.location = 0;`

C - 数组是`char *`（即`char *[]`）的数组：

1.  获取第一项：`char *firstString = strings[0];`
2.  获取字符串的第一个字符：`char firstChar = firstString[0];`
3.  检查第一个字符是否包含 ASCII 字符的字母范围：`BOOL isFirstCharALetter = (firstChar >= 'A' && firstChar <='Z') || (firstChar >= 'a' && firstChar <='z');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:12:51.817

简单的oneliner：

```
if ( [string length] && iswalpha([string characterAtIndex:0]) )
{
    // stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T19:54:12.920

```
//Defines only alphabet that we will compare with
NSCharacterSet *alphaBetFromAToZ = [NSCharacterSet letterCharacterSet];
NSCharacterSet *numberFrom0To9 = [NSCharacterSet decimalDigitCharacterSet];

//My string
NSString *myStringToCheck = @"String";

//Check if string is not empty and if so, make it a not empty string otherwise the app could throw up an exception
myStringToCheck = ([myStringToCheck length] == 0) ? @" ":myStringToCheck;

//Check if first string is from the alphabet
if ([alphaBetFromAToZ characterIsMember:[myStringToCheck characterAtIndex:0]])
{
    //First character is from the alphabet
}
else if ([numberFrom0To9 characterIsMember:[myStringToCheck characterAtIndex:0]])
{
    //First character is a number
}
else
{
    //First character is NOT from the alphabet and also is not a number, is something like @ [ ] $ % ^ ......
} 
```

# windows - 删除用户时，AD 组成员身份不显示更改事件

> ID：13255798
> 
> 赞同：0
> 
> 时间：2012-11-06T16:59:58.720
> 
> 标签：windows, active-directory, windows-server-2003, windows-server-2008-r2, windows-server

我有一个使用 Dirsync 来监视 AD 更改的应用程序。当我向组添加/删除用户时，AD 会为其创建一个事件。但是当我从 AD 中删除用户时，它只会为用户删除创建一个更改日志。我没有收到“用户从组中删除”的更改日志

我也可以启用一些设置来查看这些更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:11:08.463

当您删除用户时，他们不会自动从组中删除。除非您手动将其删除，否则他们的 SID 会留在组成员中。访问控制也会发生这种情况，如果您向该用户授予了共享权限，您将在删除该用户后看到共享上没有用户信息的 SID。

我的组织采用了禁用用户并将他们移动到附加了 GPO 的“终止用户”OU 的策略，如果有人设法重新启用该帐户，他们的会话将无法使用。这使我们能够避免悬空 SID，并且不必担心每次员工离开时都要对组成员进行全面审核。

如果您愿意，您可以每年进行一次审核，删除用户的所有权限，然后删除该用户，但我真的觉得没有必要。

# java - 我的 Android 模拟器显示模拟器错误

> ID：13255800
> 
> 赞同：1
> 
> 时间：2012-11-06T17:00:18.077
> 
> 标签：java, android

我做了一个Android应用程序。Eclipse 没有报告我的代码中有哪些错误。

但是如果我运行我的项目，那么模拟器会显示：

[模拟器错误 http://s2.ipicture.ru/uploads/20121106/466GCZH9.png](http://s2.ipicture.ru/uploads/20121106/466GCZH9.png)

我的Java代码是（`MainActivity.java`）：

```
package ru.startandroid.develop.AppLog;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{
    TextView myText = (TextView) findViewById(R.id.myText);
    Button myBtnCancel = (Button) findViewById(R.id.myBtnCancel);
    Button myBtnOK = (Button) findViewById(R.id.myBtnOK);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.myBtnCancel: 
            myText.setText("Нажата кнопка Cancel"); 
        break;
        case R.id.myBtnOK: 
            myText.setText("Нажата кнопка ОК"); 
        break;
     }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:02:29.590

您只能`findViewById()`在调用后使用`setContentView()`：

```
public class MainActivity extends Activity implements OnClickListener{
    TextView myText;
    Button myBtnCancel;
    Button myBtnOK;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myText = (TextView) findViewById(R.id.myText);
        myBtnCancel = (Button) findViewById(R.id.myBtnCancel);
        myBtnOK = (Button) findViewById(R.id.myBtnOK);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:04:07.053

您需要`findById`在方法之后绑定小部件（TextView 和按钮）调用`setContentView`，因为它取决于它：

```
TextView myText;
Button myBtnCancel;
Button myBtnOK;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myText = (TextView) findViewById(R.id.myText);
    myBtnCancel = (Button) findViewById(R.id.myBtnCancel);
    myBtnOK = (Button) findViewById(R.id.myBtnOK);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:02:59.323

更改您的代码，如下所示：

在实例级别声明变量并在里面赋值`onCreate()`

```
public class MainActivity extends Activity implements OnClickListener{
    TextView myText = null;
    Button myBtnCancel = null;
    Button myBtnOK = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myText = (TextView) findViewById(R.id.myText);
        myBtnCancel = (Button) findViewById(R.id.myBtnCancel);
        myBtnOK = (Button) findViewById(R.id.myBtnOK);
    } 
```

# c# - TextBox 值不是从外部方法更新的吗？

> ID：13255802
> 
> 赞同：-1
> 
> 时间：2012-11-06T17:00:28.140
> 
> 标签：c#, winforms, .net-4.0

我有一个带有 6 个文本框的简单 GUI。

我有一个需要 7 个参数的方法，1 个是长字符串，另外 6 个是文本框。该方法如下所示：

```
SetTextBoxesFromTokens(string s, string a, string b, string c, string d, string e, string f)
{
string[] tokens = s.Split('-');

a = tokens[0];
b = tokens[1];
c = tokens[2];
d = tokens[3];
e = tokens[4];
f = tokens[5];
} 
```

我这样调用上述方法，但它没有更新文本框：

```
SetTextBoxesFromTokens("1-2-3-4-5-6",
        txtA.Text,txtB.Text,txtC.Text,txtD.Text,txtE.Text,txtF.Text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:02:23.827

这些值是按值传递的，即[**值类型的参数传递，**](http://msdn.microsoft.com/en-us/library/0f66670z%28v=vs.71%29.aspx)即为参数创建一个新变量，并将文本框的文本复制到它。参数值的变化不应该反映在文本框中。如果要更改函数中文本框的值，请传递 TextBoxes 对象而不是 Text。

```
SetTextBoxesFromTokens(string s, TextBox txta, TextBox txtb, TextBox txtc, TextBox txtd, TextBox txte, TextBox txtf)
{    
  string[] tokens = s.Split('-');

  txta.Text = tokens[0];
  txtb.Text  = tokens[1];
  txtc.Text  = tokens[2];
  txtd.Text  = tokens[3];
  txte.Text  = tokens[4];
  txtf.Text  = tokens[5];    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:20:21.253

调用您的方法时，会创建字符串的副本。这意味着您没有将标记数组分配给相应 TextBox 控件的 .Text 属性。您只是在为块末尾超出范围的事物分配值。

为您的需求提供更合适的数据结构将更好地为您服务。

改为考虑：-

```
SetTextBoxesFromTokens(Dictionary<string,TextBox> tokenDict) 
{
  tokenDict
    .Keys
    .ToList()
    .ForEach(k => tokenDict[k].Text = k);
} 
```

像这样称呼它：-

```
// Define key value pair set containing
// token
// textbox to set
var dict = new Dictionary<string,TextBox>()
  {
    { "a", txtA },
    { "b", txtB },
    { "c", txtC }, 
    { "d", txtD },
    { "e", txtE },
    { "f", txtF }
  };

SetTextBoxesFromTokens(dict); 
```

使用这种方法，`Dictionary<string,TextBox>`参数（和 中的`TextBox`对象）通过引用传递，并且您的方法不再与特定数量的 绑定，或者如果没有足够的令牌，则`TextBox`耦合实现会中断。`string.Split`

# c# - 需要实现属性的接口

> ID：13255803
> 
> 赞同：6
> 
> 时间：2012-11-06T17:00:31.853
> 
> 标签：c#, generics, interface

有没有办法创建具有实现接口的类必须使用的属性的接口？

即如果类 Foo 实现了接口 IFoo，并且 IFoo 被定义为必须具有 ObserveMeAttribute，那么 Foo 必须在其上定义 ObserveMe 才能实现 IFoo。

编辑：

属性称为EntityTypeAttribute，用于为视图模型指定实体类型，用法：

```
[EntityType(typeof(User))]
public class UserViewModel
{
...
} 
```

属性用于扩展方法 AddModel(T TModel) 中，其中属性是从 TModel 读取的，它的属性类型 entityType 用于创建实体存根对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:08:58.963

简单的答案是“不”。如果每个对象都*必须*有这个值来实现 IFoo 为什么不让它成为 IFoo 接口的一部分呢？

属性主要是一种通过使用反射在**运行时查找有关类/方法/参数的附加声明性信息的机制。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T16:21:02.953

你不能这样做。但是您可以通过使用 Model 类泛型参数使 ViewModel 类泛型来解决您的问题：

```
public abstract class Model
{
...
}

public abstract class ViewModel<TModel> where TModel : Model
{
...
} 
```

并在这个抽象类中为每个模型和视图模型实现你的重复逻辑。然后你将拥有：

```
public class User : Model
{
...
}

public class UserViewModel : ViewModel<User>
{
...
} 
```

# java - 如果尝试对未排序的数据集进行二分搜索会发生什么？

> ID：13255805
> 
> 赞同：3
> 
> 时间：2012-11-06T17:00:47.670
> 
> 标签：java, binary-search

如果尝试对未排序的数据集进行二分搜索会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T17:01:57.993

结果是不可预测的。如果数据集有目标，它可能找到也可能找不到。

**编辑**只是为了好玩，我做了一个小实验。首先，我选择了一个数组大小并生成了一个 int 数组 {0, 1, ..., size-1}。然后我打乱了数组，对每个值 0、1、...、size-1 进行了二进制搜索，并计算找到了多少。对于每种大小，我重复 shuffle/search-for-each-value 步骤 100,000 次，并记录成功搜索的百分比。（对于已排序的数组，这将是 100%。）结果是（四舍五入到最接近的百分比）：

```
Size    % Hit
 10      34%
 20      22%
 30      16%
 40      13%
 50      11%
 60      10%
 70       9%
 80       8%
 90       7%
100       6% 
```

所以数组越大，不排序的效果越差。即使对于相对较小的阵列，结果也非常激烈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:05:45.420

Binary Search 是**针对**Sorted Array 的，如果在 Non-Sorted Array 上进行，那么**结果**肯定是**不可预测和不可靠**的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:06:09.173

二进制搜索依赖于被排序的数据。它在数组中选择一个元素并确定 1\. 如果这是它正在搜索的元素 2\. 如果它不是它正在寻找的元素，它可能在哪里找到该元素。

第二点依赖于对数据进行排序来做出决定。想象一个未排序的数据。仅通过将搜索键与我们选择的元素进行比较，我们将无法确定该元素可能出现的位置。

因此，二进制搜索无法在未排序的数据中始终如一地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T17:01:56.327

您几乎肯定找不到您一直在寻找的元素。如果数组*大部分是*排序的，那么你可能会很幸运。

该算法可以以某种概率检测到这一点的方式实现，但除非它对数组进行全面扫描，否则无法*保证*二进制搜索会检测到这种错误情况。

# knockout.js - 选择框中所选项目的绑定不粘连

> ID：13255806
> 
> 赞同：0
> 
> 时间：2012-11-06T17:00:49.870
> 
> 标签：knockout.js

我有一个嵌套集合...对象集合（LearningPath），每个对象都有一个集合（LearningItems）。在 UI 中，我为所有 LearningPaths 绑定了一个表，然后为每个 LearningPath 的 LearningIUtems 绑定了一个 SELECT 框。当我选择一个项目时，所选项目总是回到标题项目。这几乎就像它没有设置我所选项目的值。

下面是对象和视图模型的样子：

```
// namespace
var CPT = CPT || {};

// entities
CPT.LearningItem = function (liId, liTitle, liDescription, liType, liUrl) {
  this.id = liId;
  this.title = liTitle;
  this.description = liDescription;
  this.itemType = liType;
  this.url = liUrl;
};

CPT.LearningPath = function (lpId, lpTitle, lpDescription, lpPublishDate, lpPublishedBy) {
  this.id = lpId;
  this.title = lpTitle;
  this.description = lpDescription;
  this.pubDate = lpPublishDate;
  this.pubBy = lpPublishedBy;
  this.status = "";
  this.learingItems = ko.observableArray();

  if (this.pubDate !== null)
    this.status = "Published";
  else
    this.status = "Unpublished";
};

// view model
CPT.ViewModel = function () {
  this.selectedLearningItem = ko.observable();
  this.learningPaths = ko.observableArray();
}; 
```

这是绑定：

```
var learningPathsViewModel;

// This code runs when the DOM is ready and creates a context object which is needed to use the SharePoint object model
$(document).ready(function () {
  // setup view model
  learningPathsViewModel = CPT.ViewModel.Init();
}); 
```

这是选择框...

```
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Status</th>
      <th>Learning Items</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: learningPaths">
    <tr>
      <td data-bind="text: id"></td>
      <td data-bind="text: title"></td>
      <td data-bind="text: status"></td>
      <td>
        <select data-bind="optionsCaption: 'Select to view details...',
                            options: learingItems,
                            optionsText: 'title', 
                            value: learningPathsViewModel.selectedLearningItem">
        </select>
      </td>
    </tr>
  </tbody>
</table>
  <div class="displayBox"
    data-bind="with: selectedLearningItem">
  <h2>Learning Paths</h2>
    Selected item: (id:<span data-bind="text: id" />) <span data-bind="text: title" />
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:16:14.287

`selectedLearningItem`属性应该在`CPT.LearningPath`对象内部。因为在您的实现中，有相同的属性用于存储每行中的选定值。

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/w72bn/](http://jsfiddle.net/vyshniakov/w72bn/)

# asp.net - 样式规则中的选择器后缺少左大括号“({)”

> ID：13255807
> 
> 赞同：2
> 
> 时间：2012-11-06T17:00:51.277
> 
> 标签：asp.net, visual-studio, css

在 ASP.NET 4.0 中编程，我想我会在我的一个客户端站点上从 CSS3 开始。

我首先做了一个很好用的小提琴。小提琴中使用的样式是

```
.newmainblock{
    background:rgb(254,254,253) ; /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(254,254,253,1) 0%, rgba(220,227,196,1) 42%, rgba(174,191,118,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(254,254,253,1)), color-stop(42%,rgba(220,227,196,1)), color-stop(100%,rgba(174,191,118,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fefefd', endColorstr='#aebf76',GradientType=0 ); /* IE6-9 */

    border: 1px solid #000000;
    height: 440px;
}​

#newbuttonbar {     
    background: rgb(180,221,180); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I0ZGRiNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE3JSIgc3RvcC1jb2xvcj0iIzgzYzc4MyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjMzJSIgc3RvcC1jb2xvcj0iIzUyYjE1MiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjY3JSIgc3RvcC1jb2xvcj0iIzAwOGEwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjgzJSIgc3RvcC1jb2xvcj0iIzAwNTcwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDI0MDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  rgba(180,221,180,1) 0%, rgba(131,199,131,1) 17%, rgba(82,177,82,1) 33%, rgba(0,138,0,1) 67%, rgba(0,87,0,1) 83%, rgba(0,36,0,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(180,221,180,1)), color-stop(17%,rgba(131,199,131,1)), color-stop(33%,rgba(82,177,82,1)), color-stop(67%,rgba(0,138,0,1)), color-stop(83%,rgba(0,87,0,1)), color-stop(100%,rgba(0,36,0,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b4ddb4', endColorstr='#002400',GradientType=0 ); /* IE6-8 */    
}​ 
```

（[演示在这里](http://jsfiddle.net/codovations/CSDSq/)）

现在我将它复制到我的视觉工作室中的 css 并运行它。令我沮丧的是，我发现我根本看不到 a `newbuttonbar`。我问了萤火虫，他们告诉我根本没有`newbuttonbar`定义。

![在此处输入图像描述](../Images/bf93c0b57b6af7eddbcc4fc99ebcebd8.png)

此外，即使未应用样式，它仍会显示在 Firebug CSS 控制台中

![在此处输入图像描述](../Images/71399207ae1ca93c33a44711e30168d7.png)

最后我找到了原因。（*我不确定这是否正确*） CSS 编辑器
抱怨说`newmainblock`

> 样式规则中的选择器后缺少左大括号“({)”

所以它省略了紧随其后的标签`newmainblock`。那就是`newbuttonbar`。所有其他样式都被考虑在内。为什么会发生这种情况，我做错了什么以及如何纠正？

在我的 ASP.NET 生成页面的一个不相关的旁注 DTD 以及我的小提琴上是 XHTMl1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:35:47.093

右花括号后的 CSS 中有一些无效字符。您的代码编辑器只是没有显示它们。在 Chrome 中尝试该页面，然后打开 Web 检查器 (F12)。切换到“资源”或“源”选项卡并查看您的 CSS。你会明白我的意思。

这是固定的CSS：

```
.newmainblock{
    background:rgb(254,254,253) ; /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(254,254,253,1) 0%, rgba(220,227,196,1) 42%, rgba(174,191,118,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(254,254,253,1)), color-stop(42%,rgba(220,227,196,1)), color-stop(100%,rgba(174,191,118,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(254,254,253,1) 0%,rgba(220,227,196,1) 42%,rgba(174,191,118,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fefefd', endColorstr='#aebf76',GradientType=0 ); /* IE6-9 */

    border: 1px solid #000000;
    height: 440px;
}
#newbuttonbar {     
    background: rgb(180,221,180); /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2I0ZGRiNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjE3JSIgc3RvcC1jb2xvcj0iIzgzYzc4MyIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjMzJSIgc3RvcC1jb2xvcj0iIzUyYjE1MiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjY3JSIgc3RvcC1jb2xvcj0iIzAwOGEwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjgzJSIgc3RvcC1jb2xvcj0iIzAwNTcwMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDI0MDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  rgba(180,221,180,1) 0%, rgba(131,199,131,1) 17%, rgba(82,177,82,1) 33%, rgba(0,138,0,1) 67%, rgba(0,87,0,1) 83%, rgba(0,36,0,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(180,221,180,1)), color-stop(17%,rgba(131,199,131,1)), color-stop(33%,rgba(82,177,82,1)), color-stop(67%,rgba(0,138,0,1)), color-stop(83%,rgba(0,87,0,1)), color-stop(100%,rgba(0,36,0,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(180,221,180,1) 0%,rgba(131,199,131,1) 17%,rgba(82,177,82,1) 33%,rgba(0,138,0,1) 67%,rgba(0,87,0,1) 83%,rgba(0,36,0,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b4ddb4', endColorstr='#002400',GradientType=0 ); /* IE6-8 */    
} 
```

# android - SetContentView 找不到资源

> ID：13255811
> 
> 赞同：1
> 
> 时间：2012-11-06T17:01:04.173
> 
> 标签：android

我是 Android 环境的新手。出于某种原因，我在尝试构建时遇到错误。`activity_main.xml`具体来说，布局文件报告为未找到的这些类型。但是，我确实在那里看到了它。我的环境中似乎有一些东西搞砸了，但我不知道是什么？无论资源是否存在，我都会不断收到这些类型的错误。

```
setContentView(R.layout.activity_main); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:10:19.150

我假设您正在导入错误的“R”文件..

检查您的活动中的导入.. 看看您是否有 import android.R;

如果是这样，请将其删除.. 并确保为您自己的项目导入正确的 R 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:12:05.000

试试这些......

**-**第一次当你创建一个`,XML`像**main.xml**文件这样的文件时，你需要一个`Class`扩展**并且** `Activity`必须**在文件中提到**的`AndroidManifest.xml`文件。

**- 清理**项目。

**- 关闭**Eclipse，然后重新启动。**不要重新启动而是关闭它**。Eclipse 的行为确实很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:08:57.413

检查 res/layout 文件夹中是否存在 activity_main.xml（确保它不在 res/xml 中）。如果它存在于正确的目录中，请尝试打开它并检查是否有任何错误。

*此外，通过运行Project -> Clean*来重建您的项目，以确保重新加载所有资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T17:04:36.660

如果您的 XML 文件之一有错误，则资源编译器可能没有生成 R.java 文件。当您在代码中引用任何资源 ID 时，这将导致错误。

在担心在代码中找不到资源 ID 之前，请始终修复 XML 文件中的任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-01T13:39:01.317

检查包名称中的拼写错误。如果您重命名了任何包文件夹，90% 的情况下，此错误是由 AndroidManifest.xml 文件中的拼写错误引起的。检查您是否与 app/java/com/packagename/yourappname 上的软件包名称匹配

# jquery - 在轮播中显示图像的计数 - jQuery

> ID：13255814
> 
> 赞同：1
> 
> 时间：2012-11-06T17:01:12.710
> 
> 标签：jquery

我希望显示轮播中的图像数量以及当前处于活动状态的图像数量，例如 3/5。我正在为响应式轮播使用以下插件：

[https://github.com/mrbinky3000/responsive_carousel](https://github.com/mrbinky3000/responsive_carousel)

我已经到处寻找如何做到这一点并且没有运气并且不知道从哪里开始，因为我对 jQuery 的了解很少。任何帮助将不胜感激。

这是我用于轮播的代码示例的链接：

[http://matthewtoledo.com/creations/responsive-carousel/example/example-1.html](http://matthewtoledo.com/creations/responsive-carousel/example/example-1.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:08:49.117

以下是使用 jQuery 计算元素数量的方法：http: [//jsfiddle.net/qMeKT/](http://jsfiddle.net/qMeKT/)

jQuery：

```
var n = $("div img").length;
jQuery("#count").html(n); 
```

的HTML：

```
<div class="container">
 <img src="http://jsfiddle.net/img/logo.png" alt="" />
 <img src="http://jsfiddle.net/img/logo.png" alt="" />
 <img src="http://jsfiddle.net/img/logo.png" alt="" />
 <img src="http://jsfiddle.net/img/logo.png" alt="" />
</div> 
```

为了以 3/5 或类似的方式显示它，您需要查看哪个元素当前处于活动状态。在没有看到您的代码的情况下，我只能想象滑块在循环遍历它们时标记了哪个元素处于活动状态。你只需要抓住它并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:28:27.947

Match the Images LI Container Position to the .slider-target Offset.

**HTML**

```
<div class="slider-mask">
     <ul class="slider-target">
          <li>
             <img src="img/01.jpg">
          </li>
          <li>
             <img src="img/02.jpg">
          </li>
          <li>
             <img src="img/03.jpg">
          </li>     
          <li>
             <img src="img/04.jpg">
          </li>                                     
       </ul>
       div class="clearfix"></div>
</div>

<div id="count"></div> 
```

**JQuery**

```
function matchimage() {
    var targetposition =  Math.abs($('.slider-target').position().left);
    var matchthis = targetposition;
    var visible = $('.slider-target li').filter(function () { return $(this).position().left == matchthis }).index();
    var total = $('.slider img').length;
    $("#count").html((visible + 1) + ' of ' + total); 
} 
```

# c# - 在 Modal Popup asp.net 顶部显示警报

> ID：13255818
> 
> 赞同：0
> 
> 时间：2012-11-06T17:01:22.600
> 
> 标签：c#, javascript, asp.net, alert, modalpopupextender

我想知道如果可能的话，如何在模态弹出窗口上显示一个警报框。我正在使用模态弹出扩展器来显示用户填写的表单。在表单上有用户必须填写的字段，如果他们不填写字段并单击提交，那么我想显示一个警告框。就像现在一样，当 modalpopup 仍然处于活动状态时，我根本无法显示警报框。这是我正在尝试使用的警报框的代码：

```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "error", "alert('Please coomplete all of the required fields');", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:08:21.513

```
 string Msg = "Your Message";
            Response.Write(@"<script language='javascript'>alert('" + Msg + " .');</script>"); 
```

这对我来说可以

# azure - 未启用芥末 Azure 约束规则

> ID：13255821
> 
> 赞同：0
> 
> 时间：2012-11-06T17:01:37.453
> 
> 标签：azure, azure-web-roles, wasabi

我在 Windows Azure 上有一个托管服务，我正在尝试使用 Wasabi Azure 规则来影响缩放，但是我的规则没有得到执行。我的 rules.xml 和 serviceinformation-store.xml 都已上传到我的自动缩放 Azure 存储容器。这是我的 rules.xml

```
<rules xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/rules" enabled="true">
  <constraintRules>
    <rule name="default" enabled="true" rank="1" description="The default constraint rule">
      <timetable startDate="2012-11-05" startTime="05:34:00" utcOffset="-07:00" duration="02:00:00">
        <daily/>
      </timetable>
      <actions>
        <range min = "4" max="4" target="myWebService"/>
      </actions>
    </rule>
    <rule name="ScaledownAtBusinessClose" enabled="true" rank="1" description="Scale down after hours">
      <timetable startDate="2012-11-02" startTime="10:25:00" utcOffset="-07:00" duration="02:00:00">
        <daily/>
      </timetable>
      <actions>
        <range min ="1" max="1" target="myWebService" />
      </actions>
    </rule>  
   </constraintRules>
  </rules> 
```

这是我的服务信息存储

```
<serviceModel xmlns="http://schemas.microsoft.com/practices/2011/entlib/autoscaling/serviceModel">
  <subscriptions>
    <subscription name="Windows Azure MSDN - Visual Studio Ultimate" subscriptionId="<myid>" certificateThumbprint= "<mythumbprint>" certificateStoreName="My" certificateStoreLocation="CurrentUser" >
      <services>
        <service dnsPrefix="xxxxxxxxx" slot="Production" scalingMode="Scale">
          <roles>
            <role alias="myWebService" roleName="myWebService" wadStorageAccountName="<myaccount>"/>
          </roles>
        </service>
      </services>
      <storageAccounts>
        <storageAccount alias="<myaccount>" connectionString="DefaultEndpointsProtocol=https;AccountName=<acctname>;AccountKey=<accountkey>">
          <queues>           
          </queues>
        </storageAccount>
      </storageAccounts>
    </subscription>
  </subscriptions>
</serviceModel> 
```

我从一个实例开始 Web 角色，但在 MST 下午 5:34，托管服务 (myWebService) 无法扩展到 4 个实例。

在项目引用中，我有 Microsoft.WindowsAzure.Diagnostics、Microsoft.WindowsAzure.ServiceRuntime、Microsoft.WindowsAzure.StorageClient

# c++ - 为什么从 void 函数模板返回时不会出现编译器错误？

> ID：13255826
> 
> 赞同：4
> 
> 时间：2012-11-06T17:01:52.893
> 
> 标签：c++, templates

考虑：

```
void f() {
    return 5;
} 
```

以上将引发错误。但为什么不这样呢？：

```
template <typename = void> void f() {
    return 0;
} 
```

我正在使用 gcc-4.5.1 进行编译。为什么使用模板会有所不同，这样我就不会因为执行与非模板函数相同的非法返回语句而收到错误？我得到的唯一挫折是我不能在`f()`没有得到的情况下调用函数（即）：

> `error: return-statement with a value, in function returning 'void'`

但是，我能够为 void 函数模板定义 return 语句的原因可能是什么？

这是我的代码：

```
template <typename = void> void f() {
    return 0;
}

// pass

int main() {

} 
```

尽管在返回 void 的函数中可能存在非法的 return 语句，上述代码仍将通过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T17:03:26.750

大多数检查仅在您实例化模板时完成。

这通常是一件好事，因为代码可以与一种模板参数一起正常工作，但无法与另一种模板参数一起编译。如果您有模板重载，编译器甚至会忽略无法编译的候选者，请参阅[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T17:04:13.933

[你*这样做*](http://ideone.com/PHxUJ5)：

```
template <typename = void> void f() {
    return 0;
}

int main()
{
    f<int>();
} 
```

> prog.cpp：在函数'void f（）[with = int]'中：
> prog.cpp：7：12：从这里实例化
> prog.cpp：2：12：错误：带有值的返回语句，在函数返回'空白'

尽管程序仍然是格式错误*的，但编译器选择不*诊断语义错误（这是它的特权），因为您实际上从未实例化该函数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-06T17:55:06.203

这是实施质量问题。标准中的特定报价是：

> 14.6/8 [...] 如果无法为模板定义生成有效的特化，并且该模板未实例化，则模板定义格式错误，无需诊断。[...]

也就是说，您的程序格式错误，因为该模板不能用于生成任何*有效*的特化，但编译器不需要对此进行诊断。当您稍后实例化模板时，编译器必须生成特化，该特化无效并且编译器会抱怨。

您不会在模板定义中遇到错误，因为编译器遵循*不需要诊断*的路径，即忽略问题，直到它在实例化中不再忽略它。

# sql - 基于变量的动态 WHERE 条件

> ID：13255829
> 
> 赞同：0
> 
> 时间：2012-11-06T17:02:00.947
> 
> 标签：sql, sql-server

我在 SQL Server 中有以下行

```
((@data_inicial IS NULL OR @data_inicial = '') 
OR 
tbSO.dt_criacao >= CAST(@data_inicial AS DATE)) 
```

我需要使用字段 tbSO.dt_criacao，具体取决于我收到@cod_status 的一个参数。

如果@cod_status = 1 我必须使用 tbSO.dt_criacao
如果@cod_status = 2 我必须使用 tbSO.dt_abertura
如果@cod_status = 3 我必须使用 tbSO.dt_fechamento

你能帮我解决这个问题吗？

此致

米尔顿·卡马拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:07:32.990

像下面这样的 CASE 语句不能满足您的需求吗？您可以让 then 语句设置一个变量。

```
CASE @cod_status 
 When 1 then tbSO.dt_criacao 
 When 2 Then tbSO.dt_abertura 
 When 3 Then tbSO.dt_fechamento 
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:26:07.567

希望这可以帮助

```
((@data_inicial IS NULL OR @data_inicial = '') 
OR 
(@cod_status = 1 and tbSO.dt_criacao >= CAST(@data_inicial AS DATE))
OR 
(@cod_status = 2 and tbSO.dt_abertura  >= CAST(@data_inicial AS DATE))
OR 
(@cod_status = 3 and tbSO.dt_fechamento >= CAST(@data_inicial AS DATE)) 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:29:15.490

CASE 语句是将条件放入 Query 的野兽方式。您可以使用 Case 语句计算任何依赖于其他列或条件的新列。您也可以在 SUM、AVG、count 等函数中使用 case 语句。您也可以将 case 语句放在 where 条件中。

您可以使用以下语法..

```
SELECT *
FROM TABLE
WHERE
1 = CASE 
        WHEN (
               (@data_inicial IS NULL OR @data_inicial = '') 
               OR 
               (
               CASE @cod_status 
                    When 1 then tbSO.dt_criacao 
                    When 2 Then tbSO.dt_abertura 
                    When 3 Then tbSO.dt_fechamento 
               END >= CAST(@data_inicial AS DATE)
               )
             ) THEN 1 ELSE 0 
    END 
```

# c# - 控制台应用程序在 Visual Studio 中打开后立即关闭

> ID：13255832
> 
> 赞同：4
> 
> 时间：2012-11-06T17:02:10.910
> 
> 标签：c#, windows, visual-studio-2010, windows-7, console

我正在尝试在用 C# 构建的 Visual Studio 中打开一个控制台应用程序。我一打开它，它就立即关闭。

我知道 Windows 设置这是一个安全默认值（至少我认为）。我该如何解决？

我知道我可以编译它并创建一个快捷方式并修改目标，使其在应用程序位置之前具有命令提示符的位置。尽管创建此程序的程序员已将其生成信息到 Visual Studio 的输出中，但我必须只在此处打开它。

大多数应用程序都会发生这种情况，而不仅仅是在 Visual Studio 中，只是在这种情况下，我需要它在 VS 2010 中打开。我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T17:40:13.430

这是一个古老的问题，并启发了几部有趣的漫画：

![在此处输入图像描述](../Images/079462d782139ef912a142dab0c4eec1.png)

让我们修复它。您要做的是在从桌面、Windows 资源管理器或 Visual Studio 上的快捷方式启动控制台应用程序时提示用户按 Any 键。但不是当它从运行自己的控制台的命令处理器启动时。您可以通过一点点 pinvoke 来执行此操作，您可以确定该进程是否是控制台窗口的唯一所有者，如下所示：

```
using System;

class Program {
    static void Main(string[] args) {
        Console.WriteLine("Working on it...");
        //...
        Console.WriteLine("Done");
        PressAnyKey();
    }

    private static void PressAnyKey() {
        if (GetConsoleProcessList(new int[2], 2) <= 1) {
            Console.Write("Press any key to continue");
            Console.ReadKey();
        }
    }

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    private static extern int GetConsoleProcessList(int[] buffer, int size);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-06T17:11:43.273

您也可以按 (Ctrl + F5) .. 运行应用程序。这将允许它在“发布”模式下运行，默认情况下，您需要按“返回”关闭窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T17:03:47.943

尝试`Console.ReadKey();`在 Main() 方法的末尾添加。这是阻止窗口自行关闭的一种快速而肮脏的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T17:04:47.777

您需要等待用户输入。使用`Console.ReadLine()`,`Console.Read()`或`Console.ReadKey()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-28T13:43:21.590

所以，根据[这里](https://devblogs.microsoft.com/oldnewthing/20160125-00/?p=92922)

> 如果您的进程是唯一连接到控制台的进程，那么当您的进程退出时，控制台将被销毁。如果控制台上附加了其他进程，那么控制台将继续存在（因为您的程序不会是最后一个）。

如果我们将代码改编为 C#，你最终会得到这样的结果：

```
using System;
using System.Runtime.InteropServices;

namespace CheckIfConsoleWillBeDestroyedAtTheEnd
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            // ...

            if (ConsoleWillBeDestroyedAtTheEnd())
            {
                Console.WriteLine("Press any key to continue . . .");
                Console.ReadKey();
            }
        }

        private static bool ConsoleWillBeDestroyedAtTheEnd()
        {
            var processList = new uint[1];
            var processCount = GetConsoleProcessList(processList, 1);

            return processCount == 1;
        }

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern uint GetConsoleProcessList(uint[] processList, uint processCount);
    }
} 
```

# c++ - 方法是否覆盖虚拟

> ID：13255835
> 
> 赞同：0
> 
> 时间：2012-11-06T17:02:21.413
> 
> 标签：c++, inheritance, polymorphism, overriding, virtual-functions

有什么区别：

一种）

```
class base{
   int a;
public:
   virtual int function();
}; 
class derived : public base{
   int b;
public:
   int function();
}; 
```

b)

```
class base{
   int a;
public:
   int function();
};    
class derived : public base{
   int b;
public:
   int function();
}; 
```

为什么要使用 (a) 以及为什么要使用 (b)？

(b) 是一种多态性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:03:22.110

a) 覆盖基类中的方法。b) 隐藏它。b) 不是多态性。

这是一个有用的链接：[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:03:15.057

第一个是**overidding**而第二个是**方法隐藏**。

首先用于动态调度和动态多态。即：在运行时根据对象的实际类型调用适当的方法。

二是用于方法隐藏。
好读：
[什么意思，警告：Derived::f(char) 隐藏 Base::f(double)？](http://www.parashift.com/c++-faq/hiding-rule.html)

# c++ - 具有绝对路径的 LoadLibrary 返回不正确的 HMODULE，没有错误

> ID：13255845
> 
> 赞同：4
> 
> 时间：2012-11-06T17:03:03.303
> 
> 标签：c++, winapi, dll, absolute-path, loadlibrary

我有一些试图加载 Dll 的代码。

我遇到了一个奇怪的“错误”。当尝试从绝对路径加载 dll 时，我得到一个 Non-Null HMODULE，它在 GetLastError 调用中没有给出 Windows 错误代码（即 GetLastError 根据[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)返回 '0' 或成功）。调用此 dll 中的函数时，我得到不正确的值。

这种行为很特殊，因为如果相反，我使用 SetCurrentDirectory 将当前目录切换为当前 dll 的目录并使用对 LoadLibrary 的相对路径调用，我会得到正确的值。

以下是描述情况的片段：

使用绝对路径：

```
std::string libLoc = get_dll_location(); // Get the directory of this dll
HMODULE myDLL = LoadLibraryA(libLoc.c_str()); // Non-null value
DWORD lastError = GetLastError(); // returns 0

MyObj * value = UseDLL(myDLL); // bad value 
```

使用相对路径：

```
SetCurrentDirectory("c:\\path\\containing\\dll\\"); // hard coded path to dll's folder
HMODULE myDLL = LoadLibrary("myDll.dll");  // Non-null value
MyObj * value = UseDLL(myDLL);  // Good value 
```

我真的很想避免使用 SetCurrentDirectory，因为使用此 Dll 的应用程序可能是多线程的，并且需要目录保持不变。

对此问题的任何见解将不胜感激。希望这只是我的一个小错误。

**更新**：使用[LoadLibraryEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx)似乎是不可能的，因为我似乎无法使用 LOAD_LIBRARY_SEARCH_* 标志（我已经尝试安装[KB2533623 更新](http://support.microsoft.com/kb/2533623)）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T17:23:17.417

最有可能的问题是`MyDll.dll`依赖于与`MyDll.dll`. 当您的应用程序位于与 不同的文件夹中时`MyDll.dll`，这些依赖项将不会从包含`MyDll.dll`. 相反，它们由系统[DLL 搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx)解决。

您的使用`SetCurrentDirectory`会影响系统 DLL 搜索顺序。这意味着 的依赖关系`MyDll.dll`是从包含`MyDll.dll`.

例如，您可以通过在配置文件模式下使用 Dependency Walker 来测试此假设。这将告诉您如何`MyDll.dll`在运行时解决 的依赖关系。

你不喜欢使用`SetCurrentDirectory`. 最好的解决方案是将所有 DLL 放在与应用程序相同的目录中。

当然，另一种可能性是对工作目录的调用`UseDLL`依赖于工作目录。您可以通过在调用`LoadLibrary`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T17:34:09.073

尝试设置 SetDllDirectory 或 AddDllDirectory 而不是 SetCurrentDirectory，并使用带有标志 LOAD_LIBRARY_SEARCH_USER_DIRS 的 LoadLibraryEx 而不是 LoadLibrary。可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686203%28v=vs.85%29.aspx)的 MSDN 上找到有用的信息。

更新：Windows 7 上的 AddDllDirectory 和相关调用示例（需要 KB2533623）

```
#include "stdafx.h"
#include <iostream>
#include <Windows.h>

typedef DLL_DIRECTORY_COOKIE (WINAPI *ADD_DLL_PROC)(PCWSTR);
typedef BOOL (WINAPI *REMOVE_DLL_PROC)(DLL_DIRECTORY_COOKIE);

#ifndef LOAD_LIBRARY_SEARCH_USER_DIRS
#define LOAD_LIBRARY_SEARCH_USER_DIRS       0x00000400
#endif

int main()
{

    ADD_DLL_PROC lpfnAdllDllDirectory = (ADD_DLL_PROC)GetProcAddress(GetModuleHandle(TEXT("kernel32.dll")), "AddDllDirectory");
    REMOVE_DLL_PROC lpfnRemoveDllDirectory = (REMOVE_DLL_PROC)GetProcAddress(GetModuleHandle(TEXT("kernel32.dll")), "RemoveDllDirectory");
    if(lpfnAdllDllDirectory && lpfnRemoveDllDirectory)
    {

        DLL_DIRECTORY_COOKIE cookie = ((ADD_DLL_PROC)lpfnAdllDllDirectory)(L"c:\\windows\\system32\\");
        std::cout << cookie << std::endl;
        HMODULE module = LoadLibraryEx(L"cabview.dll", NULL, LOAD_LIBRARY_SEARCH_USER_DIRS);
        if(module)
        {
            std::cout << "Locked and loaded" << std::endl;
            FreeLibrary(module);
        }
        if(cookie && ((REMOVE_DLL_PROC)(cookie)))
        {
            std::cout << "Added and removed cookie" << std::endl;
        }

    }
    std::cin.get();
    return 0;
} 
```

# c - 使用指针在c中复制字符串

> ID：13255846
> 
> 赞同：1
> 
> 时间：2012-11-06T17:03:06.670
> 
> 标签：c, pointers

C中的代码复制字符串

```
#include <stdio.h>
char *copyString(char *,char *);
void main()
{
    char *first = (char *)calloc(sizeof(char),10);
    char *second = (char *)calloc(sizeof(char),10);
    printf("Enter first string:\t");
    scanf("%s",first);
    printf("%s",copyString(first,second));
}
char *copyString(char *a,char *b)
{
    int i=0;
    while(*(a+i)!='\0')
    {
        *(b+i)=*(a+i);
        i++;
    }
    *(b+i)='\0';
    return b;
} 
```

**`Case 1:`**

* * *

**输入：**你好

**输出：**你好

**`Case 2:`**

* * *

**输入：**你好世界

**输出：**你好

所以，我的问题是是否`space`被认为是`newline/null`?? 因为，在第二种情况下，它显示如下..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T17:05:02.400

默认情况下，遇到`scanf`空格字符时停止读取标准输入流`' '`。要修复它，您可以使用扫描集。

```
scanf("%[^\n]", first); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T17:05:54.407

`scanf()`默认情况下在第一个空格之后停止读取。使用`fgets()`或`gets()`[不安全]。关于*为什么*会这样，您可能想在此处阅读 POSIX 页面：[http](http://www.unix.com/man-page/POSIX/3posix/scanf/) ://www.unix.com/man-page/POSIX/3posix/scanf/和此处的 ISO C 标准：[http://www .open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)。它对如何`scanf()`以及`fscanf()`（以及所有其他标准 C 函数）应该如何工作进行了冗长的描述。这些通常是关于 C 库中的函数*应该*如何工作的指南。

所有编译器都努力创建兼容 POSIX 的标准 c 库，这些库在大多数 UNIX'ish 平台上都可以正常工作。

标准的 C 函数实际上在这里定义：[http ://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:06:31.707

这是因为当您输入字符串时在空格后停止读取。所以你实际上只有`"Hello"`在你的`first`字符串中，而不是`"Hello world"`.

用于`fgets()`阅读整行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T17:06:48.897

正如建议`scanf`在第一个空格处停止，您可以`fgets`改为使用来阅读整行。当你开始工作时分配更多空间，因为“Hello World”是 12 个字节而不是 10 个字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T17:08:12.920

您`scanf`正在扫描一个字符串以获取要扫描的两个字符串，您应该编写：

```
 scanf("%s %s",first,second); 
```

同样，对于要扫描的更多字符串，您应该这样做，即提供尽可能多`%s`的要扫描的字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T17:10:35.533

此处的 scanf 函数将读取输入，直到遇到空格。您将需要实现一个 readline 函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-06T17:12:59.490

使用 #include 并利用 string.h lib 的这个函数 strcpy。以下是示例：

```
 strcpy(first, second); 
```

这应该运行良好。

# c# - ASP.NET ConfirmButtonExtender 在 IE 中没有背景

> ID：13255854
> 
> 赞同：0
> 
> 时间：2012-11-06T17:03:24.283
> 
> 标签：c#, html, css, asp.net-ajax

我在取消按钮上使用 ConfirmButtonExtender。直到最近，我一直在 Firefox 中运行此代码，并且它显示得恰到好处（半透明背景，简单的模式弹出窗口）。

但是，当我切换到在 IE 中进行测试时，我得到了通用的“javascript-style-alert-box”。

ModalPopupExtender 似乎在两种浏览器中都能正常工作，我猜这是因为你可以更好地控制 CSS（虽然不确定）。

其他人是否使用 ConfirmButtonExtender 遇到过这个问题？我只是想在切换到 ModalPopupExtender 之前检查是否有修复。

```
<div class="base-container-controls-100pct">
    <asp:Button ID="UxCancel" runat="server" Text="Cancel" CssClass="button-sm" OnClick="UxCancelClick" />
    <asp:ConfirmButtonExtender ID="ConfirmButtonExtender2" runat="server" TargetControlID="UxCancel">
    </asp:ConfirmButtonExtender>
</div> 
```

CSS

```
.button, .button-sm, .button-ms, .button-md, .button-lg, .button-xl, .button-disabled, .button-status-close,
.button-grid, .button-grid-sm, .button-grid-ms, .button-grid-md, .button-grid-lg, .button-grid-xl
{   
    margin: 2px;
    background-color: #0088C2;

    color: #f2f2f2;

    border-color: #DDDDDD #AAAAAA #AAAAAA #DDDDDD; 
    border-width: 1px;
    border-style: none;

    font-size: .8em;
    height: 30px;
    padding: 2px 12px 2px 12px;
    cursor: pointer;
    -moz-user-select: none;
}

.button-grid, .button-grid-sm, .button-grid-ms, .button-grid-md, .button-grid-lg, .button-grid-xl 
{
    height: 25px;
    font-size: .8em;    
}

.button-sm, .button-grid-sm 
{
    width: 75px;
}

        .base-container-controls-100pct
    {
        width: 100%;
        float: left;
        padding: 0px;
        margin: 0px;
        border: none;
        height: auto;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:08:47.310

如果它使用标准的 Javascript `window.confirm()`（听起来确实如此），那么您将无法控制它的外观，因为它内置在浏览器本身中。Firefox 和 Chrome（也许是其他的）在几年前将它的外观从旧的弹出式 javascript 样式警报框更改为更好的样式。IE 仍在使用您所看到的旧标准样式。

如果您想对外观有更多控制权，听起来您必须进行切换。

# json - 未为 json 定义 DataTable fnRowCallback 链接

> ID：13255862
> 
> 赞同：1
> 
> 时间：2012-11-06T17:03:57.443
> 
> 标签：json, datatable, hyperlink, undefined

我正在处理从 json 数据在 DataTable 中创建链接。事情会好起来，但链接名称似乎不正确。无论我试图改变什么，它都会一直说“未定义”。这是我的代码：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        var oTable = $('#tablez').dataTable( {
            "bProcessing": true,
            "bJQueryUI": true,
            "sAjaxSource": 'inc/all_cars_json.php',
            "sPaginationType": "full_numbers",
            "aaSorting": [[ 0, "desc" ]],                   
             "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    $('td:eq(1)', nRow).html('<a href="car/=' + nRow[0] + '">' +
                        nRow[1] + '</a>');
                    return nRow;
                }
        } );
    } );
</script> 
```

JSON数据：

```
{"aaData": [
["2715","Toyota","Soluna","VIOS 1.5E VVT-i","2007","\u0e14\u0e33","430,000"],
["2589","Toyota","","MIGHTY X","1995","\u0e40\u0e02\u0e35\u0e22\u0e27","159,000"],["2997","Mazda","Fighter","Freestyle CAB TURBO","2003","\u0e1a\u0e23\u0e2d\u0e19\u0e0b\u0e4c\u0e40\u0e07\u0e34\u0e19","329,000"],
["3002","Isuzu","Rodeo","LS 4WD","2000","\u0e1a\u0e23\u0e2d\u0e19\u0e0b\u0e4c\u0e17\u0e2d\u0e07","319,000"],
["3126","Toyota","Hilux","TIGER D4D CAB","2003","\u0e02\u0e32\u0e27","465,000"],["3127","Mitsubishi","Triton","DID Commonrail","2006","\u0e1a\u0e23\u0e2d\u0e19\u0e0b\u0e4c\u0e17\u0e2d\u0e07","455,000"],
["3128","Honda","City","1.5 i-VTEC","2009","\u0e14\u0e33","0"]
]} 
```

这是预览：

![在此处输入图像描述](../Images/3c75e8932f85237346122e06a80dd5cf.png) **问题是**：在这种情况下，如何让链接标题和值 (nRow[0]) 起作用。问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T09:22:06.673

这可以使用以下方法完成：

```
 "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
            $('td:eq(1)', nRow).html('<a href="car/=' + nRow[0] + '">' +
                $('td:eq(1)', nRow)[1].textConent + '</a>');
            return nRow;
        } 
```

或命名您的列

```
"aoColumns": [
              { "bSortable": false, "sWidth": "34px", "mDataProp": "Id" },
              { "mDataProp": "Brand" },
              { "mDataProp": "Type" },
              { "mDataProp": "SubType" },
              { "mDataProp": "Year" }] 
```

然后你可以使用这个：

```
 "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        $('td:eq(1)', nRow).html('<a href="car/=' + nRow[0] + '">' +
            aData.Brand + '</a>');
        return nRow;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T04:48:32.270

在函数中更改`nRow`为。`aData``fnRowCallback`

```
"fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                    $('td:eq(1)', nRow).html('<a href="car/=' + aData[0] + '">' +
                        aData[1] + '</a>');
                } 
```

# excel - VBA打开工作簿忽略“缺少库”错误？

> ID：13255863
> 
> 赞同：0
> 
> 时间：2012-11-06T17:04:02.177
> 
> 标签：excel, vba

我目前正在使用以下代码打开工作簿并搜索特定字符串：

```
 Set workbook = Application.Workbooks.Open(Path)

    Set VBProj = workbook.VBProject
    Set oComp = VBProj.VBComponents("Module1")

    Set CodeMod = oComp.CodeModule

    FindWhat = ToFindStr

    With CodeMod
        SL = 1
        EL = .CountOfLines
        SC = 1
        EC = 255
        Found = .Find(target:=FindWhat, StartLine:=SL, StartColumn:=SC, _
            EndLine:=EL, EndColumn:=EC, _
            wholeword:=True, MatchCase:=False, patternsearch:=False)
        Do Until Found = False
            Print #fnum1, "found"
            EL = .CountOfLines
            SC = EC + 1
            EC = 255
            Found = .Find(target:=FindWhat, StartLine:=SL, StartColumn:=SC, _
                EndLine:=EL, EndColumn:=EC, _
                wholeword:=True, MatchCase:=False, patternsearch:=False)
        Loop
    End With 
```

问题是当我打开几个电子表格时似乎存在一些编译器错误（缺少库）。有什么办法可以解决这个问题吗？我只需要将 CodeMod 内容放到可搜索的地方——但问题似乎在于打开工作簿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:43:02.977

您需要`Microsoft Visual Basic for Applications Extensibility`添加参考才能运行您的代码。

工具>参考>然后检查它并单击确定。

# vb.net - 针对父数据表的更新命令接受对子数据表的更改？

> ID：13255864
> 
> 赞同：0
> 
> 时间：2012-11-06T17:04:04.713
> 
> 标签：vb.net, ado.net

我在两个表之间设置了父子关系。父表设置为其主键的自动增量值。`Update`这工作正常，父 DataTable 中的新行使用我调用TableAdaptor时刚刚插入的键的实际值进行刷新。

问题是子表中的行没有被插入到数据库中。出于调试目的，我将`changesBefore`和添加`changesAfter`到代码示例中以查看子表中存在哪些更改的行。当我使用调试器单步执行代码时，`changesBefore`包含新的子行。`changesAfter`是`Nothing`。几乎就好像`Update`对标题表的调用正在`AcceptChanges`子表上触发。

我熟悉使用 DataTables 和 TableAdapters 进行插入/更新，但这是我第一次尝试在父表上使用自动增量。我在这里想念什么？

```
 Dim changesBefore = _ds.ResponseDetails.GetChanges

        headersTa.Update(_ds.ResponseHeaders)

        Dim changesAfter = _ds.ResponseDetails.GetChanges

        detailsTa.Update(_ds.ResponseDetails) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:57:16.267

完成标头更新后，您需要使用标头记录中自动生成的 id 更新详细记录中的链接字段。这不会为您自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:19:27.677

现在正在工作。事实证明，`AcceptRejectRule`数据集中的每个关系都有一个属性。我设置了规则，`Cascade`所以当被调用反对父时，它基本上是级联`AcceptChanges`到子表的。`Update`更改规则以`None`解决我的问题。

[http://msdn.microsoft.com/en-us/library/system.data.acceptrejectrule(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.data.acceptrejectrule(v=vs.80).aspx)

# crowdsourcing - 提高众包信息的质量

> ID：13255871
> 
> 赞同：1
> 
> 时间：2012-11-06T17:04:15.717
> 
> 标签：crowdsourcing

我正在开发一款基于众包信息的实时交通警报应用程序。换句话说，人们使用该应用程序并报告交通问题，同时他们被告知他们所在地区的交通问题。

一项艰巨的任务是如何区分真实警报报告和虚假警报报告，以便应用程序正常运行并有用。

您是否知道有关此问题的任何文档或任何程序员故事，对此问题的见解？这个问题应该如何解决？

到目前为止，我想出的是：

*   每个使用该应用程序的人都有唯一标识
*   每个警报报告都有一个间隔为 1 .. x 的可靠性值
*   报告的可靠性是根据报告或确认报告的用户数量以及这些人的声誉来计算的。但具体如何？
*   每个人都有一个以某种方式计算的声誉值。但是怎么做？

我不知道如何处理声誉/可靠性的东西，所以我很想对此提供一些意见。必须有一些关于如何创建有效的众包产品的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:22:24.730

[Panos Ipeirotis](http://www.ipeirotis.com/research/talks/crowdsourcing-achieving-data-quality-with-imperfect-humans)就这个主题发表了[精彩的演讲。](http://www.youtube.com/watch?v=MU_2pxHEmE8)是的，你想激励良好的行为。如果 Waze 太复杂，这个演讲也会很复杂，但是如果你把厨房水槽扔给它，它会让你很好地了解什么是可能的。

# node.js - Node.js 事件范围？

> ID：13255873
> 
> 赞同：2
> 
> 时间：2012-11-06T17:04:26.740
> 
> 标签：node.js, events, scope

我想在 node.js 中使用一个事件来执行一些代码；我的问题是，调用的事件代码的范围是什么？具体来说，它是共享事件调用者的范围，还是“孤立”的？我知道我可以将参数传递给事件调用的代码以实现类似的效果，但理想情况下我希望调用范围可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:43:22.583

该事件与调用者的范围相关联。即从模块导出的EventEmitter，只能用于侦听从同一个EventEmitter 发出的事件。

[Nodejs EventEmitter - 定义侦听器函数的范围](https://stackoverflow.com/questions/8005563/nodejs-eventemitter-define-scope-for-listener-function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T18:59:31.400

当您发出一个事件时，您将其放入队列中，稍后由节点事件系统处理。发出事件的范围内的任何变量都必须`emit`作为参数传递。当节点接受该事件并触发所有绑定的回调时，这会在不同的“干净”范围和不同的“干净”堆栈下发生。（旁注，这就是为什么节点中的堆栈跟踪可能会妨碍调试）。

```
var events = require('events');

var myEmitter = new events.EventEmitter();

function closure1(word, number) {
  function closure2(animal, vegetable) {
    myEmitter.emit('hey', word, number, animal, vegetable, 43);
  }
  closure2("horse", "carrot");
}

myEmitter.on('hey', function (word, number, animal, vegetable, anotherNumber) {
  console.log('hey event fired with', word, number, animal, vegetable, anotherNumber);
});
closure1("table", 42); 
```

当你运行它时，它会打印“嘿，用表 42 马胡萝卜 43 触发的事件”。

[请参阅emitter.emit(event, [arg1], [arg2], [...] 上的 node.js 文档](http://nodejs.org/api/events.html#events_emitter_emit_event_arg1_arg2)

# android - Android远程服务器应用程序设计

> ID：13255875
> 
> 赞同：1
> 
> 时间：2012-11-06T17:04:44.697
> 
> 标签：android, remote-server

我是android开发的新手。我想提出一个具体的申请：我们有一家外卖餐厅。餐厅接受来自安卓设备的订单（他们可能会向远程服务器发送请求）餐厅的某个人必须实时查看订单才能处理它。

**我的问题是：**设计这样一个系统的首选android方式是什么（如果有的话）。例如，我听说这样做的一个好方法是通过带有 JSON 信息的 http 查询 php 服务器。你会推荐哪些其他方法，为什么？

# c# - 创建文档的打印预览

> ID：13255879
> 
> 赞同：1
> 
> 时间：2012-11-06T17:04:55.697
> 
> 标签：c#, wpf, pdf, xps, print-preview

我需要创建一个软件，该软件将创建以下格式的文档的打印预览：MS Office 文档（`.doc(x)`、`.ppt(x)`、`.xls(x)`）、图像、`.txt`文件和 PDF 文件。我已经使用`XPS`文件制作了一个工作原型。所以基本上我会执行以下操作：我将办公文件转换为`.xps`使用办公自动化，然后将`.xps`文档渲染为图像。我只是从图像中创建 XPS 文件，然后`.txt`将文本或图像添加到`FlowDocument`，然后渲染它。但是我发现没有办法快速将 PDF 转换为 XPS（一个 600 页的文档需要 2 多分钟才能转换，这完全不适合）。所以我被困在这一点上。看来我应该重新开始，使用不同的文件格式。例如，我应该使用 PDF 重写我的程序，还是有其他方法来完成我的任务？如果我应该使用 PDF，您能否建议我一个好的 PDF C# 库来尽可能快地呈现页面预览？我尝试使用**Websupergoo 的 ABCPdf**，但它太慢了，因为它不允许我将预览呈现为`System.Windows.Media.Imaging.BitmapSource`, only `System.Drawing.Bitmap`，所以我必须转换`Bitmap`为`BitmapSource`并且它占用了大量时间。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:03:28.217

使用 Ghostscipt 将 PDF 转换为图像。不过，我不知道您为什么不只使用 PDF。我已经将 GhostScript 用于许多 PDF/图像处理任务。

[http://www.wibit.net/blog/integrating_ghostscript_c](http://www.wibit.net/blog/integrating_ghostscript_c)

Ghostscript 会将任何 PDF 输出到您指定的设置的图像。我认为您可以将其用作 DLL 或命令行进程。

# c# - 通过 CommandParameter 传递数据

> ID：13255882
> 
> 赞同：1
> 
> 时间：2012-11-06T17:05:07.410
> 
> 标签：c#, wpf, xaml

我正在尝试通过UserName**传递**`CommandParameter`。

```
<GridViewColumn   Width="Auto" Header="UserName" >
   <GridViewColumn.CellTemplate>
       <DataTemplate>
          <Button Click="Button_Click" Content="..." CommandParameter="{Binding Path=UserName}"></Button>                                                                                                         </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

但在这里我不确定我必须用什么来捕捉它......

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    // How to get UserName  here?
} 
```

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:20:37.080

使用这种方法可以做的最好的事情是：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var button = (Button) sender;
    var userName = button.CommandParameter;
} 
```

虽然它会完成这项工作，但它不是`CommandParameter`应该如何使用的。`CommandParameter`应该作为参数传递给按钮的命令。因此，如果您将使用`Command`而不是处理`Button.Click`您的命令，则会在其`Execute`和`CanExecute`处理程序中接收您的数据。请参阅 google 中的命令和按钮示例。这是来自谷歌的第一个链接，例如：[How to use Commands in WPF](http://www.codeproject.com/Articles/238657/How-to-use-Commands-in-WPF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:51:06.603

如果要使用点击处理程序，为什么不将 Button 的 Tag 属性绑定到 UserName？更多地符合 Tag 属性的意图，而不是滥用 Commanding 主体。

```
<Button Click="Button_Click" Content="Button Content" Tag="{Binding UserName}"/>

private void Button_Click(object Sender, RoutedEventArgs e)
{
    var Button = (Button)Sender;
    var UserName = (string)Button.Tag;
} 
```

# semantic-zoom - 如何让 SemanticZoom 缩放到正确的区域

> ID：13255884
> 
> 赞同：1
> 
> 时间：2012-11-06T17:05:16.247
> 
> 标签：semantic-zoom

我看过的所有 SemanticZoom 示例都涉及在缩小视图上以这种方式链接到数据源，当您单击一个类别时，它会缩放到放大视图上的正确位置。

我的问题是我不显示数据只是由几个包含文本框和文本块的网格组成的界面。

我已经让 SemanticZoom 在视觉上工作，但是当我在缩小视图上选择一个类别时，它总是把我带到放大视图的开头。

我知道它正在这样做，因为缩小视图中没有参考告诉它去哪里，但我不知道我必须添加什么才能使它工作。我的 XAML 下面很长：

```
 <SemanticZoom Grid.Row="1">
        <SemanticZoom.ZoomedInView>
    <GridView  IsRightTapEnabled="False" IsTapEnabled="False" IsHoldingEnabled="False" SelectionMode="None">

                    <!-- Length Input Area -->
        <Grid Margin="70,0,70,0" Background="#FFBFFFD9" Width="320" Height="545" IsDoubleTapEnabled="False" IsHoldingEnabled="False" IsRightTapEnabled="False">
               <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
               </Grid.ColumnDefinitions>
               <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                Various Text Boxes and Textblocks                   
            </Grid>

            <!-- Weight Input Area -->
                <Grid Margin="0,0,70,0" Background="#FFC7D6FF" Width="320" Height="545">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                 Various Text Boxes and Textblocks                      </Grid>

            <!-- Speed Input Area -->
                <Grid Margin="0,0,70,0" Background="#FFF0B2BA" Width="320" Height="545">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                 Various Text Boxes and Textblocks                    </Grid>

            <!-- Area Input Area -->
                <Grid Margin="0,0,70,0" Background="#FFFFFBB0" Width="320" Height="545">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                Various Text Boxes and Textblocks                    </Grid>

            <!-- Volume Input Area -->
                <Grid Margin="0,0,70,0" Background="#FFFFD9A2" Width="320" Height="545">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                 Various Text Boxes and Textblocks                    </Grid>

            <!-- Fuel Input Area -->
                <Grid Margin="0,0,70,0" Width="320"  Height="545" Background="#FFAA9C9B">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                Various Text Boxes and Textblocks    
            </Grid>

            <!-- Pressure Input Area -->
                <Grid Margin="0,0,0,0" Width="320" Background="#FFB9F8FB" Height="545">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width ="*"/>
                    <ColumnDefinition Width ="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>

                </Grid.RowDefinitions>

                Various Text Boxes and Textblocks    
            </Grid>

    </GridView>

        </SemanticZoom.ZoomedInView>

        <SemanticZoom.ZoomedOutView>
             <GridView  Margin="100,0,0,0"  Height="300" IsRightTapEnabled="False" IsTapEnabled="False" IsHoldingEnabled="False" SelectionMode="None">

                    <!-- Length Input Area -->
                    <Grid Margin="0,0,0,0" Background="#FFBFFFD9" Width="150" Height="245" IsDoubleTapEnabled="False" IsHoldingEnabled="False" IsRightTapEnabled="False">

                <TextBlock TextWrapping="Wrap" Text="Length" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>
         </Grid>

            <!-- Weight Input Area -->
                <Grid Margin="0,0,0,0" Background="#FFC7D6FF" Width="150" Height="245">

                <TextBlock TextWrapping="Wrap" Text="Weight" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>
     </Grid>

            <!-- Speed Input Area -->
                <Grid Margin="0,0,0,0" Background="#FFF0B2BA" Width="150" Height="245">

                <TextBlock TextWrapping="Wrap" Text="Speed" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>
       </Grid>

            <!-- Area Input Area -->
                <Grid Margin="0,0,0,0" Background="#FFFFFBB0" Width="150" Height="245">

                <TextBlock TextWrapping="Wrap" Text="Area" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>
         </Grid>

            <!-- Volume Input Area -->
                <Grid Margin="0,0,0,0" Background="#FFFFD9A2" Width="150" Height="245">

                <TextBlock TextWrapping="Wrap" Text="Volume" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>
        </Grid>

            <!-- Fuel Input Area -->
                <Grid Margin="0,0,0,0" Width="150"  Height="245" Background="#FFAA9C9B">

                <TextBlock TextWrapping="Wrap" Text="Fuel" Style="{StaticResource PageHeaderTextStyle}" Margin="10,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>

            </Grid>

            <!-- Pressure Input Area -->
                <Grid Margin="0,0,0,0" Width="150" Background="#FFB9F8FB" Height="245">

                <TextBlock TextWrapping="Wrap" Text="Pressure" Style="{StaticResource PageHeaderTextStyle}" Margin="8,10,0,0" VerticalAlignment="Top" Grid.ColumnSpan="2" FontSize="40"/>

            </Grid>

    </GridView>
        </SemanticZoom.ZoomedOutView>
    </SemanticZoom> 
```

# python - 为什么我们不能腌制一个 InteractiveInterpreter 的实例？

> ID：13255893
> 
> 赞同：0
> 
> 时间：2012-11-06T17:06:01.150
> 
> 标签：python, serialization, pickle

尝试腌制 InteractiveInterpreter 的实例会导致以下错误

```
 File "", line 1, in 
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 725, in save_inst
    save(stuff)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "/usr/lib/python2.7/pickle.py", line 663, in _batch_setitems
    save(v)
  File "/usr/lib/python2.7/pickle.py", line 306, in save
    rv = reduce(self.proto)
  File "/usr/lib/python2.7/copy_reg.py", line 70, in _reduce_ex
    raise TypeError, "can't pickle %s objects" % base.__name__
TypeError: can't pickle ellipsis objects 

```

据我所知，这很奇怪 InteractiveInterpreter 不是 Ellipsis 对象。有什么理由吗？还有其他方法可以腌制 InteractiveInterpreter 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:37:23.830

由于某种原因`Ellipsis`不能在腌料机中腌制。但是您可以使用[`persistent id`](http://docs.python.org/2/library/pickle.html#pickling-and-unpickling-external-objects)功能来实现这一点。

首先，你应该使用and对象而不是`pickle.dump`and 。`pickle.load``Pickler``Unpickler`

其次，您必须定义两个函数 - 第一个将获取一个对象并返回其 id（或`None`用于常规酸洗），第二个将在 unpickling 时将此 id 转换为对象。

工作示例：

```
import cPickle as pickle

def dump_ellipsis(obj):
    if obj is Ellipsis:
        return "Ellipsis"

def load_ellipsis(persid):
    if persid == "Ellipsis":
        return Ellipsis

storage = open("tmp.pkl", "w")

pickler = pickle.Pickler(storage)

pickler.persistent_id = dump_ellipsis

pickler.dump(Ellipsis)

storage.close()

storage = open("tmp.pkl")

unpickler = pickle.Unpickler(storage)

unpickler.persistent_load = load_ellipsis

print unpickler.load() 
```

# linq - LINQ 根据项目值获取不同的记录

> ID：13255894
> 
> 赞同：0
> 
> 时间：2012-11-06T17:06:01.430
> 
> 标签：linq, entity-framework, linq-to-sql, linq-to-entities

我有以下 LINQ 查询

```
 var unallocatedOrders = (from orderLine in context.OrderLineItemDboes
     where (orderLine.Status == unallocated || orderLine.Status == null)
         && orderLine.orderline.order.order_status_fk == verified
     group orderLine
         by new { orderLine.orderline.ol_id,orderLine.orderline.order.order_id }
         into g
     select new { OrderLineId = g.Key.ol_id, Count = g.Count(), OrderId = g.Key.order_id })
 .ToList(); 
```

上面的查询通过以下方式给我结果

```
Order1 ol1 2
order1 ol2 3
order1 ol3 1
order2 ol1 1
order2 ol2 2
order3 ol1 4
order3 ol2 3
order3 ol3 2 
```

我需要根据订单id遍历上面的列表，并需要获取相应的行和数量。我需要将此行 ID 和数量添加到字典中。有人可以建议我如何完成它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:13:53.007

下面介绍如何使用 GroupBy 选择项目。（你的问题并没有真正说明你想如何使用这些行，所以我只是将它们输出到调试控制台。）

```
// group by the OrderId
foreach (var group in unallocatedOrders.GroupBy(row => row.OrderId))
{
    Debug.WriteLine(

        // for each line, output "Order x has lines y1, y2, y3..."
        string.Format("Order {0} has lines {1}", 

            // here the key is the OrderId
            group.Key,

            // comma-delimited output
            string.Join(", ", 

                // select each value in the group, and output its OrderLineId, and quantity
                group.Select(item => 
                    string.Format("{0} (quantity {1})", item.OrderLineId, item.Count)
                )
            )
        )
    );
} 
```

* * *

您可以使用`ToDictionary`.

```
// two-level lookup: 1) OrderId 2) OrderLineId
var lookup = new Dictionary<int, Dictionary<int, long>>();

foreach (var group in unallocatedOrders.GroupBy(row => row.OrderId))
{
    // add each order to the lookup
    lookup.Add(group.Key, group.ToDictionary(

        // key selector 
        keySelector: item => item.OrderLineId,

        // value selector
        elementSelector: item => item.Count()
    ));
} 
```

# parsing - Excel, VB - 数组内的字符操作和日期重新格式化

> ID：13255896
> 
> 赞同：0
> 
> 时间：2012-11-06T17:06:11.550
> 
> 标签：parsing, date, excel, formatting, vba

# 问题

在特定字段中包含许多不正确或不一致输入的日期的大型数据集。在大约 60,000 条记录中输入日期的方式大约有 19 种。有些条目完全无效，必须丢弃，其他条目必须正确格式化。我将范围加载到数组中，然后执行操作。**我写出了我认为我需要的操作，但是我需要一些帮助才能真正让它们工作。请参阅下面的代码；评论中的错误。**

# 当前问题

对于像“54 Days”这样的条目，下面的代码应该只取空格左边的字符，然后检查它们是否是数字。如果是，则保留它们，如果不是，则清空该数组元素。**在实践中，什么都没有发生，我仍然在数组元素中有完整的条目？**

```
ElseIf delType = "String" And Len(del(i, 1)) < 10 And InStrRev(del(i, 1), " ") Then 'Takes the number from entries like 2194 Days or 23 DPD
    del(i, 1) = Left(del(i, 1), Len(del(i, 1)) - InStrRev(del(i, 1), " "))
    If IsNumeric(del(i, 1)) = False Then 'If the characters to the left of the space are not numbers, discard
        del(i, 1) = Empty
    Else
        del(i, 1) = Format((CLng(Range("E" & i + 1).Value) - Abs(del(i, 1))), "mm/dd/yy") 'Pull order date and subtract days from it for delinquency date
    End If 
```

# 输入模板

**九月。25, 20**（没有年份，没有年份！删除。）
**SEPT**（没有年份，没用，删除。）
**N/A**（垃圾！删除。）
**LONG TIME AG**（傻瓜认为这是个好主意，删除。）
**6 月 30 日, 200**（显然该字段只能保存 12 个字符，删除。）
**CHARGED OFF**（无用，删除。）
**94 DAYS**（取空格前的所有字符并从包含订单日期的其他字段中减去以获得拖欠日期。）
**94 DPD**（DPD in某人聪明的头脑代表我相信过期的日子。同上。）
**2008-7-15 12**（不确定额外的数字是什么，取空格前的所有字符并转换。）
**无效**（删除。）
**空白**（什么都不做。）
**12282009**（使用嵌套的 LEFT 和 RIGHT 并在其间使用 / 连接。）
**9202011**（添加前导零，然后同上。）
**92410**（添加前导零，这将转换为 09/24/10）
**41261**（自 1899 年 12 月 31 日以来的天数，这将转换为 12/08/12）
**1023**（自拖欠日期以来的天数，从 ORDER DATE 中减去以获得拖欠日期。）
**452**（同上。）
**12**（同上。）
**1432.84**（货币价值，智商低的走狗误入，删除。）

# 代码（正在进行中）

```
'Perform housekeeping on delinquency date
Columns("AH:AH").Select
Selection.NumberFormat = "0"
Selection.Copy
Selection.PasteSpecial Paste:=xlValues, Operation:=xlNone, SkipBlanks:= _
    True, Transpose:=False
Dim del()
ReDim del(1 To importwsRowCount, 1 To 1)
del = Range("AH1:AH" & importwsRowCount).Value
Dim delChars As Long
Dim delType As String
For i = LBound(del, 1) To UBound(del, 1)
    delChars = Len(del(i, 1)) 'Determine length of entry
    If IsNumeric(del(i, 1)) = True Then 'Determine datatype of entry
        delType = "Numeric"
    Else
        delType = "String"
    End If
    If InStr(del(i, 1), ".") Then 'Removes monetary entries like 142.84
        del(i, 1) = Empty
    ElseIf InStr(del(i, 1), "*") Then 'Removes ***INVALID*** entries
        del(i, 1) = Empty
    ElseIf delChars = 12 Then 'Removes all entries that extend beyond the 12 character limit of the field and get cut off
        del(i, 1) = Empty
    ElseIf delType = "String" And Len(del(i, 1)) < 10 And InStrRev(del(i, 1), " ") Then 'Takes the number from entries like 2194 Days or 23 DPD
        del(i, 1) = Left(del(i, 1), Len(del(i, 1)) - InStrRev(del(i, 1), " "))
        If IsNumeric(del(i, 1)) = False Then 'If the characters to the left of the space are not numbers, discard
            del(i, 1) = Empty
        Else
            del(i, 1) = Format((CLng(Range("E" & i + 1).Value) - Abs(del(i, 1))), "mm/dd/yy") 'Pull order date and subtract days from it for delinquency date
        End If
    ElseIf delType = "Numeric" And Len(del(i, 1)) = 5 Then
        If del(i, 1) > CLng(Date) Then 'Value is greater than todays date, improperly formated date that needs character manipulation and / added
            del(i, 1) = Format(del(i, 1), "000000") 'Add leading zero
            del(i, 1) = DateSerial(Right(del(i, 1), 2), Left(del(i, 1), 2), Right(Left(del(i, 1), 2), 4)) 'Grab year, then month, then day for serialize
        Else
            del(i, 1) = Format(del(i, 1), "mm/dd/yy") 'Properly formated date that just needs format conversion
        End If
    ElseIf delType = "Numeric" And (delChars = 7 Or delChars = 8) Then
        If delChars = 7 Then
            del(i, 1) = Format(del(i, 1), "00000000") 'Add leading zero
        End If
        del(i, 1) = DateSerial(Right(del(i, 1), 4), Left(del(i, 1), 2), Right(Left(del(i, 1), 2), 6)) 'Grab year, then month, then day for serialize
    ElseIf delType = "Numeric" And delChars < 5 Then
        del(i, 1) = Format((CLng(Range("E" & i + 1)) - Abs(del(i, 1))), "mm/dd/yy")
    End If
Next i
Set delRange = Range("AJ1:AJ" & importwsRowCount)
iWS.names.Add Name:="dRange", RefersTo:=delRange
Range("dRange").Value = del 'Write array to worksheet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:50:04.253

“54 天”包含 7 个字符，所以`Len("54 Days")`是 7

空格字符出现在位置 3 并`InStrRev("54 Days", " ")`返回 3

所以，我们有`Left("54 Days", 7 - 3)`哪个产生`"54 D"`显然不是数字的

`Left(del(i, 1), InStrRev(del(i, 1), " ") - 1)`也许试试

# drupal - drupal 7不呈现自定义区域

> ID：13255898
> 
> 赞同：4
> 
> 时间：2012-11-06T17:06:20.200
> 
> 标签：drupal, drupal-7, render, region

我的问题是我在我的 .info 文件中添加了一个新区域作为第二个侧边栏。之后，我在结构 > 块区域中附加了块。最后在 page.tpl 我让它通过

```
<?php print render($page['sidebar_second']); ?> 
```

它最初可以工作，然后我将所有内容移至新域，复制了所有文件并重新附加了所有块，但现在它根本不渲染。

这是 .info 文件

```
regions[sidebar_first] = Sidebar first
regions[sidebar_second] = Sidebar second
regions[sidebar_bob] = Sidebar B0b! 
```

这是出现在“结构”> “块”下[的附加块](http://i.stack.imgur.com/5vOo9.png)

最后我打印出来了

```
<pre><?=print_r($page,1)?></pre> 
```

这里显示[sidebar_second 是空的](http://i.stack.imgur.com/7t5ve.png)

最后，我创建了一个简单的红色 div 块，尺寸为 200 像素，应该显示在每个页面上，所以我不知道为什么它没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:34:38.667

您是否尝试过清除主题注册表？过去，当清除缓存似乎没有效果时，这是我的下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T13:36:02.090

验证您的 中是否存在以下行`page.tpl.php`：

```
<?php print render($page['sidebar_second']);?> 
```

# linux - OpenGL，GLSL：制服中的垃圾值

> ID：13255904
> 
> 赞同：3
> 
> 时间：2012-11-06T17:06:56.890
> 
> 标签：linux, opengl, glsl, shader, glut

我的问题非常相似，如果不一样的话：[http ://www.opengl.org/discussion_boards/showthread.php/169185-glUniform1f()-seems-broken-where-is-the-error](http://www.opengl.org/discussion_boards/showthread.php/169185-glUniform1f()-seems-broken-where-is-the-error)

除了它不仅限于 glUniform1f 函数。基本上，**任何**传递给 GLSL 程序的制服都会无缘无故地获得一个总垃圾值。对 glGetUniformfv 的调用也证实了这一点。将预期值硬编码到着色器中会产生预期的结果。什么可能出错？

除了提供的链接外，我无法找到有关此主题的任何相关信息，这对我没有任何帮助。

C代码：

```
void display(void) {
    double time = get_time() - g_starttime;
    double delta = time - g_lasttime;

    printf("%f [%f]\n", time, delta);    

    GLint m_viewport[4];
    glGetIntegerv(GL_VIEWPORT, m_viewport);
    printf("%i, %i, %i, %i\n", m_viewport[0], m_viewport[1], m_viewport[2], m_viewport[3]);

    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0f, 1.0f, 1.0f);
    glUseProgram(g_prog);
    glUniform2f(u_view, (float)m_viewport[2], (float)m_viewport[3]);
    glUniform1f(u_time, (float)time);
    glRectf(-1.0f, 1.0f, 1.0f, -1.0f);
    glUseProgram(0);
    glutSwapBuffers();
    glutPostRedisplay();

    g_lasttime = time;
} 
```

GLSL 片段着色器（没有顶点着色器）：

```
#version 120

uniform vec2 view;
uniform float time;

void main(void) {
    vec2 pos = vec2(gl_FragCoord);
    gl_FragColor = vec4(pos.x/view.x, 0.0, 0.0, 1.0);
} 
```

**编辑**：我还添加了一个基本的顶点着色器，正如 Aki Suihkonen 建议的那样。它没有帮助。

```
#version 120

void main(void) {
    gl_Position = gl_ProjectionMatrix * gl_ModelViewMatrix * gl_Vertex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:35:44.977

您可能已经解决了这个问题，但您可能需要在设置制服之前添加一些检查：

当您获得统一的索引时，如果不使用统一并且已被编译器优化，则它可能会失败。在 u_time 的测试用例中没有使用。下面是获取统一索引的示例函数。仅当您可以获得有效位置时才设置制服的值（即它正在使用或尚未优化）

```
bool findUniformLocation( const String& name, UInt32& location )
    {
        printGLSLLog(m_program);
        CHECK_GL_ERROR;
        location = (UInt32)glGetUniformLocation( m_program, name.c_str() );

        printGLSLLog(m_program);
        CHECK_GL_ERROR;

        return ( location != (UInt32)-1 );
    } 
```

因此，垃圾可能是由您在 u_time 上设置的值引起的，该值是不正确的索引，或者可能与 u_view 本质上设置垃圾值相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:17:05.677

我还目睹了着色器，尤其是着色器编译器的一些奇怪行为。他们似乎对未使用的变量没有那么宽容。或者使用 webGL Opera 的着色器编译器甚至在顶点着色器和片段着色器中都使用某个变量时甚至没有编译（并且出于完全正当的理由）。

也许您还应该包含一个顶点着色器而不是默认着色器。

恐怕技术还没有那么成熟...

还有一件事：“u_view”是如何初始化的？我只习惯于为 u_view 分配一个来自编译器的句柄......

# pointers - 在 Go HTTP 处理程序中，为什么 ResponseWriter 是一个值，而 Request 是一个指针？

> ID：13255907
> 
> 赞同：100
> 
> 时间：2012-11-06T17:07:09.153
> 
> 标签：pointers, go

我正在通过为 GAE 编写应用程序来学习 Go，这是处理函数的签名：

```
func handle(w http.ResponseWriter, r *http.Request) {} 
```

我在这里是指针新手，那么为什么`Request`对象是指针，但`ResponseWriter`不是？是否需要以这种方式使用它，或者这只是为了使某种基于高级指针的代码成为可能？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-06T17:08:37.390

你得到的`w`是一个指向非导出类型的指针，`http.response`但作为`ResponseWriter`一个接口，它是不可见的。

从[server.go](http://golang.org/src/pkg/net/http/server.go)：

```
type ResponseWriter interface {
    ...
} 
```

另一方面，`r`是指向具体结构的指针，因此需要显式传递引用。

从[request.go](http://golang.org/src/pkg/net/http/request.go)：

```
type Request struct {
    ...
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-06T17:33:57.940

`http.ResponseWriter`是一个接口，实现这个接口的现有类型是指针。这意味着不需要使用指向此接口的指针，因为它已经由指针“支持”。[此处](http://www.airs.com/blog/archives/281)的一位 go 开发人员描述了这个概念虽然实现 http.ResponseWriter 的类型不需要是指针，但它并不实用，至少在 go http 服务器中不可行。

`http.Request`不是一个接口，它只是一个结构体，既然我们想改变这个结构体并让网络服务器看到这些变化，它必须是一个指针。如果它只是一个结构值，我们只需修改它的副本，调用我们的代码的 Web 服务器看不到它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-07-03T17:20:15.523

正如在此处和其他地方的许多其他答案中正确提到的那样，`ResponseWriter`是一个接口，其含义已在*SO*答案和博客中详细描述。

我想解决的是我认为这里存在的一个大而危险的误解，即请求通过“引用”传递的原因（尽管*Go*中并不真正存在这样的事情）是“我们想要做出改变它对服务器可见”。

引用几个答案：

> [..] 它只是一个结构，因为我们想要更改这个结构并让 Web 服务器看到这些更改，所以它必须是一个指针 [..][所以](https://stackoverflow.com/a/13256311/989991)
> 
> [..] 处理程序对请求的更改需要对服务器可见，因此我们仅通过引用而不是通过值传递它 [..] [SO](https://stackoverflow.com/a/48679117/989991)

**这是错误的**；事实上[，文档明确警告不要篡改/改变请求](https://godoc.org/net/http#Handler)：

> 除了读取正文，处理程序不应修改提供的请求。

恰恰相反，不是吗？:-)

如果您想更改请求，例如在将其传递给中间件链中的下一个处理程序之前附加一个跟踪标头，*您必须复制请求*并将复制的版本传递到链中。

[Go 团队已提出](https://github.com/golang/go/issues/27277)更改行为以允许修改传入请求的请求，但更改此类内容可能会导致至少一些现有代码意外中断。

如果我们明确告诉人们不要改变请求，为什么还要使用指针？**Performance**是`Request`一个大型结构，复制它会降低性能，尤其是考虑到长中间件链。团队必须取得平衡，这绝对不是一个理想的解决方案，但这里的权衡显然是在性能方面（而不是 API 安全）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-08T06:38:01.820

它是 Request 指针的原因很简单：处理程序对 Request 的更改需要对服务器可见，所以我们只通过引用而不是值传递它。

如果你深入研究 net/http 库代码，你会发现 ResponseWriter 是一个非导出结构响应的接口，我们通过引用传递结构（我们传递一个指向响应的指针）而不是值. ResponseWriter 是处理程序用来创建 HTTP 响应的接口。备份 ResponseWriter 的实际结构是未导出的结构 http.response。因为是非导出的，所以不能直接使用；您只能通过 ResponseWriter 接口使用它。

也就是说，两个参数都是通过引用传入的；只是方法签名采用了一个 ResponseWriter，它是一个指向结构的指针的接口，所以它看起来好像是按值传递的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-20T18:17:36.907

`Request`我认为将对象作为指针传递的主要原因是`Body`字段。对于给定的 HTTP 请求，主体只能读取一次。如果`Request`对象被克隆，就像它没有作为指针传递一样，我们将有两个对象，它们具有不同的信息，即从主体中读取了多少信息。

# c# - 如何实现像List的Reverse这样的扩展方法Shuffle而不返回？

> ID：13255909
> 
> 赞同：1
> 
> 时间：2012-11-06T17:07:17.357
> 
> 标签：c#, list, extension-methods, reverse, shuffle

到目前为止，我有以下随机播放代码，

```
 public static IList<T> Shuffle<T>(this IList<T> list)
    {
        var rnd = new Random();
        return list.OrderBy(element => rnd.Next());
    } 
```

我像使用它一样，

```
 list = list.Shuffle(); 
```

我希望能够像使用它一样

```
 list.Shuffle(); // like list.Reverse(); 
```

所以基本上我想通过参考洗牌

我尝试了以下代码，

```
 public static void Shuffle<T>(this ref IList<T> list)
    {
        var rnd = new Random();
        list.OrderBy(element => rnd.Next());
    } 
```

但它不起作用。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:10:01.550

我很久以前写过这个。可能值得检查它是否适用于链接算法。众所周知，这类事情很容易出错。

```
 //Fisher-Yates_shuffle http://en.wikipedia.org/wiki/Fisher-Yates_shuffle
    private static readonly ThreadLocal<Random> RandomThreadLocal =
        new ThreadLocal<Random>(() => new Random());
    public static void Shuffle<T>(this IList<T> list, int seed = -1)
    {
        var r = seed >= 0 ? new Random(seed) : RandomThreadLocal.Value;
        var len = list.Count;
        for (var i = len - 1; i >= 1; --i)
        {
            var j = r.Next(i);
            var tmp = list[i];
            list[i] = list[j];
            list[j] = tmp;
        }
    } 
```

根据下面的评论，可以重载以获得更大的灵活性：

```
 private static readonly ThreadLocal<Random> RandomThreadLocal =
        new ThreadLocal<Random>(() => new Random());
    public static void Shuffle<T>(this IList<T> list, int seed)
    {
        list.Shuffle(new Random(seed));
    }

    public static void Shuffle<T>(this IList<T> list)
    {
        list.Shuffle(null);
    }

    public static void Shuffle<T>(this IList<T> list, Random rand)
    {
        var r = rand ?? RandomThreadLocal.Value;

        var len = list.Count;
        for (var i = len - 1; i >= 1; --i)
        {
            var j = r.Next(i);
            var tmp = list[i];
            list[i] = list[j];
            list[j] = tmp;
        }
    } 
```

# php - 无法移动上传的文件

> ID：13255913
> 
> 赞同：0
> 
> 时间：2012-11-06T17:07:38.217
> 
> 标签：php, file-upload

我只是想将上传的文件移动到我服务器上的某个位置。这是我的代码。

```
 $target_path = $_SERVER['DOCUMENT_ROOT'] . "img/uploads/";
    $target_path = $target_path . basename($_FILES['imageURL']['tmp_name']);

    if (move_uploaded_file($_FILES['imageURL']['tmp_name'], $target_path)) {
        echo "The file has been moved";
    } else {
        echo "There was an error.";
    } 
```

我不断收到错误错误，我无法弄清楚为什么它不会移动它。我已经用 if 语句验证了它的位置，结果为真。

我编辑了数组中 tmp_name 的名称路径..仍然没有工作。我做了一个转储，我没有那个数组的 tmp_key。为什么我没有拿到钥匙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:09:16.587

`$_FILES['imageURL']['name']`是文件的**名称**，而不是 OS-temp 目录中的**位置**。

我认为你需要使用`$_FILES['imageURL']['tmp_name']`.

# jsf-2 - 发送缺少必填字段的 jsf 请求时遇到问题

> ID：13255915
> 
> 赞同：0
> 
> 时间：2012-11-06T17:07:44.187
> 
> 标签：jsf-2, primefaces

这几天我遇到了一些麻烦，我们在网上找不到解决问题的好方法。所以我会放在这里，希望任何人都可以帮助我和其他有同样问题的人。

我们有一个很大的表格，`p:selectOneMenu`上面有一些组件。当用户想要一个额外的选项时，他可以单击组件侧面的加号按钮，以重定向到新页面以创建新选项并将其保存在数据库中。

我们使用 keepAlive 函数使它工作得很好，该函数通过屏幕保存所需的对象。但是我们有一些必填字段会在空白时阻止加号按钮。

将按钮切换到`immediate="true"`并没有真正帮助，因为那时字段没有被传递给属性。

* * *

所以我们需要一种将字段传递给属性的方法，这样即使某些必填字段为空白，我们也可以跨屏幕保持！有没有人有一个可行的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:14:03.363

仅在真正按下保存按钮时才让`required`属性评估。`true`

```
<c:set var="saveButtonPressed" value="#{not empty param['form:save']}" />

<h:form id="form">
    <p:selectOneMenu ... required="#{saveButtonPressed}" />
    <p:inputText ... required="#{saveButtonPressed}" />
    ...
    <p:commandButton id="save" ... />
</h:form> 
```

# xslt - XSLT 高级数学

> ID：13255916
> 
> 赞同：1
> 
> 时间：2012-11-06T17:07:46.173
> 
> 标签：xslt, xslt-1.0

请帮我解决 XSLT 中的数学问题。我需要对具有相同 unit_id 的 price*VAT 字段求和。

输入 XML：

```
 <Root> 
<RowSet>
            <unit_id>1<unit_id>
            <price>100<unit_id>
            <VAT>2<VAT> 
</RowSet> 
<RowSet>
            <unit_id>1<unit_id>
            <price>200<unit_id>
            <VAT>3<VAT> 
</RowSet> 
<RowSet>
            <unit_id>2<unit_id>
            <price>300<unit_id>
            <VAT>4<VAT> 
</RowSet>
 </Root> 
```

预期的输出必须是这样的：

```
<Root>
<Output>
        <unit_id>1<unit_id>
        <total>800<total> <?-(100*2+200*3)-?>
</Output>
<Output>
        <unit_id>2<unit_id>
        <total>1200<total>  <?-(300*4)-?>
</Output>
</Root> 
```

我在每个周期中都尝试过 sum(price*VAT) ，但没有帮助。

我试着用这个：

```
<Root>
<xsl:variable name="ID">
<xsl:value-of select="unit_id"/>
</xsl:variable>                   
<xsl:for-each select="/Root/RowSet[unit_id = $ID]">
<Output>
<xsl:if test="position() = count (/Root/RowSet[unit_id = $ID])">
<total>
<xsl:value-of select="sum(/Root/RowSet[unit_id = $ID]/price * /Root/RowSet[unit_id = $ID]/VAT)"/>
</total>
</xsl:if>
</Output>
</Root> 
```

错误的输出是：

```
 <Root>
    <Output>
            <unit_id>1<unit_id>
            <total>200<total> <?-(100*2)-?>
    </Output>
    <Output>
            <unit_id>2<unit_id>
            <total>1200<total>  <?-(300*4)-?>
    </Output>
    </Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:20:34.503

**这是一个非递归的两遍解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kRSByUId" match="RowSet" use="unit_id"/>

 <xsl:variable name="vrtfPass1"><xsl:apply-templates/></xsl:variable>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates mode="pass2" select="ext:node-set($vrtfPass1)/*"/> 
 </xsl:template>

 <xsl:template mode="pass2" match="/*">
  <Root>
   <xsl:apply-templates mode="pass2" select=
    "RowSet[generate-id()
           =
            generate-id(key('kRSByUId', unit_id)[1])]"/>
  </Root>
 </xsl:template>

 <xsl:template mode="pass2" match="RowSet">
  <RowSet>
   <xsl:copy-of select="unit_id"/>
   <total>
     <xsl:value-of select="sum(key('kRSByUId', unit_id)/subTotal)"/>
   </total>
  </RowSet>
 </xsl:template>

 <xsl:template match="RowSet/price">
  <subTotal><xsl:value-of select=". * ../VAT"/></subTotal>
 </xsl:template>

 <xsl:template match="VAT"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档**时（已纠正严重的格式错误）：

```
<Root>
    <RowSet>
        <unit_id>1</unit_id>
        <price>100</price>
        <VAT>2</VAT>
    </RowSet>
    <RowSet>
        <unit_id>1</unit_id>
        <price>200</price>
        <VAT>3</VAT>
    </RowSet>
    <RowSet>
        <unit_id>2</unit_id>
        <price>300</price>
        <VAT>4</VAT>
    </RowSet>
</Root> 
```

**产生了想要的正确结果**：

```
<Root>
   <RowSet>
      <unit_id>1</unit_id>
      <total>800</total>
   </RowSet>
   <RowSet>
      <unit_id>2</unit_id>
      <total>1200</total>
   </RowSet>
</Root> 
```

**说明**：

1.  在第一遍中，我们将源 XML 文档转换为：

* * *

```
<Root>
   <RowSet>
      <unit_id>1</unit_id>
      <subTotal>200</subTotal>
   </RowSet>
   <RowSet>
      <unit_id>1</unit_id>
      <subTotal>600</subTotal>
   </RowSet>
   <RowSet>
      <unit_id>2</unit_id>
      <subTotal>1200</subTotal>
   </RowSet>
</Root> 
```

.2\. 在第二遍中，我们执行经典的 Muenchian 分组，并在每个组中汇总`subTotal`子节点并生成一个`total`元素，其文本节点子节点是计算得出的总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:41:21.667

运行总计是 XSLT 中的一个常见问题。递归是解决这个问题的方法。（这不是 XSLT 独有的——任何没有可变变量的语言都是这样工作的。）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <Root>
      <xsl:apply-templates select="Root/RowSet" />
    </Root>
  </xsl:template>

  <xsl:template match="RowSet">
    <!-- only do work for the *first* RowSet with any particular ID -->
    <xsl:if test="not(preceding-sibling::RowSet/unit_id = current()/unit_id)">
      <Output>
        <xsl:copy-of select="unit_id" />
        <total>
          <xsl:call-template name="running-total">
            <xsl:with-param name="values" select="/Root/RowSet[
              unit_id = current()/unit_id
            ]" />
          </xsl:call-template>
        </total>
      </Output>
    </xsl:if>
  </xsl:template>

  <xsl:template name="running-total">
    <xsl:param name="values" />
    <xsl:choose>
      <xsl:when test="count($values)">
        <xsl:variable name="curr" select="$values[1]" />
        <xsl:variable name="rest" select="$values[position() &gt; 1]" />
        <!-- recursive step: calculate the total of all remaining values -->
        <xsl:variable name="subtotal">
          <xsl:call-template name="running-total">
            <xsl:with-param name="values" select="$rest" />
          </xsl:call-template>
        </xsl:variable>
        <xsl:value-of select="$subtotal + $curr/price * $curr/VAT" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="0" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

见[http://www.xmlplayground.com/NF7D2o](http://www.xmlplayground.com/NF7D2o)

笔记

`<xsl:if test="not(preceding-sibling::RowSet/unit_id = current()/unit_id)">`是一种对数据进行分组的方法。执行此操作的更高级方法称为 Muenchian 分组，但为了这个答案，我不想深入探讨。

模板在 JavaScript中`running-total`看起来像这样：

```
function runningTotal(values) {
  if (values.length) {
    var curr = values.pop();              // pop() shortens values array by one
    var subtotal = runningTotal(values);  // recurses over remaining values
    return subtotal + curr.price * curr.VAT;
  } else {
    return 0;
  }
} 
```

# ravendb - 带有 ravendb 的切面

> ID：13255918
> 
> 赞同：0
> 
> 时间：2012-11-06T17:08:06.357
> 
> 标签：ravendb

我正在尝试使用 ravendb 中的方面能力，但得到了奇怪的结果。

我有这样的文件：

```
 {
  "SearchableModel": "42LC2RR ",
  "ModelName": "42LC2RR",
  "ModelID": 490578,
  "Name": "LG 42 Television 42LC2RR",
  "Desctription": "fffff",
  "Image": "1/4/9/8/18278941c",
  "MinPrice": 9400.0,
  "MaxPrice": 9400.0,
  "StoreAmounts": 1,
  "AuctionAmounts": 0,
  "Popolarity": 3,
  "ViewScore": 0.0,
  "ReviewAmount": 2,
  "ReviewScore": 45,
  "Sog": "E-TV",
  "SogID": 1,
  "IsModel": true,
  "Manufacrurer": "LG",
  "ParamsList": [
    "1994267",
    "46570",
    "4134",
    "4132",
    "4118",
    "46566",
    "4110",
    "180676",
    "239517",
    "750771",
    "2658507",
    "2658498",
    "46627",
    "4136",
    "169941",
    "169846",
    "145620",
    "169940",
    "141416",
    "3190767",
    "3190768",
    "144720",
    "2300706",
    "4093",
    "4009",
    "1418470",
    "179766",
    "190025",
    "170557",
    "170189",
    "43768",
    "4138",
    "67976",
    "239516",
    "3190771",
    "141195"
  ],
} 
```

其中每个 ParamList 代表产品的一个属性，在我们的应用程序中，我们在缓存中缓存了每个参数代表的内容。

在搜索特定产品时，我想计算所有返回属性，以便能够在搜索后添加每个项目的数量。

在电视类别中搜索 lg 后，我想得到：

Param:4134 女巫是 LCD 的代表，数量：65。

但不幸的是，我得到了奇怪的结果。只有一些参数被计算在内，一些不被计算。在一些我得到结果的搜索者上，我没有得到任何回报。

我正在使用最新的稳定版本的 RavenDB。

指数 ：

```
from doc in docs
from param in doc.ParamsList
select new {Name=doc.Name,Description=doc.Description,SearchNotVisible = doc.SearchNotVisible,SogID=doc.SogID,Param =param} 
```

方面：

```
 DocumentStore documentStore = new DocumentStore { ConnectionStringName = "Server" };
        documentStore.Initialize();
        using (IDocumentSession session = documentStore.OpenSession())
        {
            List<Facet> _facets = new List<Facet>
                        {
                            new Facet {Name = "Param"}

                        };

            session.Store(new FacetSetup { Id = "facets/Params", Facets = _facets });
            session.SaveChanges();
        } 
```

用法示例：

```
IDictionary<string, IEnumerable<FacetValue>> facets = session.Advanced.DatabaseCommands.GetFacets("FullIndexParams", new IndexQuery { Query = "Name:lg" }, "facets/Params"); 
```

我尝试了许多变化但没有成功。

有谁知道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:37:46.477

使用此索引，它应该可以解决您的问题：

```
from doc in docs
select new {Name=doc.Name,Description=doc.Description,SearchNotVisible = doc.SearchNotVisible,SogID=doc.SogID,Param = doc.ParamsList} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T03:43:12.977

您为“名称”字段设置的分析器。我看到您按名称“lg”搜索。默认情况下，Ravendb 使用 KeywordAnalyzer，这意味着您必须按确切名称进行搜索。您应该为名称或描述字段设置另一个分析器（例如 StandardAnalyzer）。

# tomcat - 触发 tomcat contentType 检测

> ID：13255922
> 
> 赞同：0
> 
> 时间：2012-11-06T17:08:18.477
> 
> 标签：tomcat, configuration, mime-types, content-type

我有一个在 tomcat 中运行的应用程序。在我的应用程序中，我有一些我想以正确的内容类型提供的静态文件。

我发现 conf/web.xml 中有很多已经定义的类型。

但是当我检查我的服务器的响应时，我没有定义内容类型。通过检查响应，我的意思是我查看 chrome 开发工具上的响应标头

问题是我需要检测并正确应用这些内容类型才能使用 tomcat ExpiresFilter。

有没有人知道我的错误可能是什么？

-编辑

我刚刚注意到，当未设置过期过滤器时，内容类型已正确定义

-编辑 2

我刚刚读到 304 响应没有内容，所以这些响应中没有内容类型。

-编辑 3

所以我的问题与ExpiresFilter 无关。问题是 304 响应没有正文，因此无法定义 contentType。但是 expiresFilter 不能对响应头做任何事情。而且由于我的资源在禁区内，过期标头设置为 epoc。有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T00:54:52.470

使用 mime 映射根据文件扩展名定义内容类型：

```
<mime-mapping>
    <extension>abs</extension>
    <mime-type>audio/x-mpeg</mime-type>
</mime-mapping> 
```

**参考**

*   [StandardContext（Apache Tomcat 7.0.78 API 文档）](https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/core/StandardContext.html)

# c++ - 在 C++11 中将（1 元组到 10 元组）参数转换为 n 元组参数

> ID：13255923
> 
> 赞同：2
> 
> 时间：2012-11-06T17:08:19.130
> 
> 标签：c++, c++11, tuples, variadic-templates

> **可能重复：**
> [漂亮打印 std::tuple](https://stackoverflow.com/questions/6245735/pretty-print-stdtuple)

在数据库库 (soci) 中，下面有一大段代码可以处理`std::tuple<>`1 到 10 个参数。

*静态类方法`from_base()`，并`to_base()`为 1-tuple 到 10-tuple 的参数实现。*

胆量基本上将每个 n 元组元素流进和从传入的流中流出。一切都是硬编码的。

**如何将此代码转换为使用 C++11 的可变参数模板（对参数没有限制）？** *实际上是否使用可变参数模板是次要的。我们真正想做的是用 n 元组参数的一般情况替换硬编码。*

部分问题是，从技术上讲，只有一个参数，但该参数是一个 n 元组，所以我不能完全使用[Wikipedia 中描述的内容](http://en.wikipedia.org/wiki/Variadic_template)。最好的方法是什么？

```
#include "values.h"
#include "type-conversion-traits.h"
#include <tuple>

namespace soci
{

template <typename T0>
struct type_conversion<std::tuple<T0> >
{
    typedef values base_type;

    static void from_base(base_type const & in, indicator ind,
        std::tuple<T0> & out)
    {
        in
            >> std::get<0>(out);
    }

    static void to_base(std::tuple<T0> & in,
        base_type & out, indicator & ind)
    {
        out
            << std::get<0>(in);
    }
};

template <typename T0, typename T1>
struct type_conversion<std::tuple<T0, T1> >
{
    typedef values base_type;

    static void from_base(base_type const & in, indicator ind,
        std::tuple<T0, T1> & out)
    {
        in
            >> std::get<0>(out)
            >> std::get<1>(out);
    }

    static void to_base(std::tuple<T0, T1> & in,
        base_type & out, indicator & ind)
    {
        out
            << std::get<0>(in)
            << std::get<1>(in);
    }
};

// ... all the way up to 10 template parameters

} 
```

**可运行的答案（基于下面灰熊的帖子）**

```
#include <iostream>
#include <tuple>

using namespace std;

// -----------------------------------------------------------------------------

template<unsigned N, unsigned End>
struct to_base_impl 
{
    template<typename Tuple>
    static void execute(Tuple& in, ostream& out) 
    {
      out << std::get<N>(in) << endl;
      to_base_impl<N+1, End>::execute(in, out);
    }
};

template<unsigned End>
struct to_base_impl<End, End>
{ 
    template<typename Tuple>
    static void execute(Tuple& in, ostream& out) 
    {
      out << "<GAME OVER>" << endl;
    }
};

// -----------------------------------------------------------------------------

template <typename Tuple>
struct type_conversion
{
    static void to_base(Tuple& in, ostream& out )
    {
        to_base_impl<0, std::tuple_size<Tuple>::value>::execute(in, out);
    }
};

template <typename... Args>
struct type_conversion<std::tuple<Args...>>
{
    static void to_base(std::tuple<Args...>& in, ostream& out )
    {
        to_base_impl<0, sizeof...(Args)>::execute(in, out);
    }
};

// -----------------------------------------------------------------------------

main()
{
    typedef tuple<double,int,string> my_tuple_type;
    my_tuple_type t { 2.5, 5, "foo" };

    type_conversion<my_tuple_type>::to_base( t, cerr );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:48:04.873

如果我正确理解您的问题，您基本上需要为元组的每个元素分别调用运算符`<<`或on in 。`>>`在这种情况下，您可以使用部分特化和递归构造类似于 for 循环的东西（有点，因为它实际上每次调用不同的函数）：

```
template<unsigned N, unsigned End>
struct to_base_impl {
    template<typename Tuple>
    void execute(Tuple& in, base_type& out) {
      out<<std::get<N>(in);
      to_base_impl<N+1, End>::execute(in, out);
    }
};

template<unsigned End>
struct to_base_impl<End, End> { //End of loop
    template<typename Tuple>
    void execute(Tuple& in, base_type& out) {}
};

template <typename Tuple>
struct type_conversion
{
    typedef values base_type;

    static void to_base(Tuple& in, base_type & out, indicator & ind){
        to_base_impl<0, std::tuple_size<Tuple>::value>::execute(in, out);
    }
}; 
```

这将从零迭代到元组的大小并调用`out<<std::get<N>(in);`每次迭代。`from_base`仅使用`in>>std::get<N>(out);`. 如果你想确保你的转换器只用元组调用，你可以使用可变参数模板：

```
template <typename... Args>
struct type_conversion<std::tuple<Args...>>
{
    typedef values base_type;

    static void to_base(std::tuple<Args...>& in, base_type & out, indicator & ind){
        to_base_impl<0, sizeof...(Args)>::execute(in, out);
    }
}; 
```

当然，您可以更通用地编写此代码，但这会使源代码更加复杂，并且可能不会给您带来太多回报。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:15:45.337

我喜欢[索引技巧](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)：

```
template<unsigned...> struct seq{};
template<unsigned N, unsigned... Is>
struct gen_seq : gen_seq<N-1, N-1, Is...>{};
template<unsigned... Is>
struct gen_seq<0, Is...> : seq<Is...>{};

template<class T> using Alias = T;

template<class... Ts, unsigned... Is>
void to_base(std::tuple<Ts...> const& t, base_type& out, seq<Is...>){
  Alias<char[]>{ (void(out << std::get<Is>(t)), '0')... };
}

template<class... Ts, unsigned... Is>
void to_base(std::tuple<Ts...> const& t, base_type& out){
  to_base(t, out, gen_seq<sizeof...(Ts)>{});
} 
```

对于`from_base`. （[基于 jrok 的实时示例。](http://liveworkspace.org/code/f8acfc4d1c324d724110b5ff7e00317c)）

代码“利用”可变参数解包机制来`out << get<Is>(t)`精确调用`sizeof...(Is)`（与 相同`sizeof...(Ts)`）时间。从to ( )`gen_seq<N>`生成一个编译时整数列表。此列表保存到，然后将其解压缩到, ，一直到. （一个临时数组）提供了一个可以使用包扩展的上下文。我在这里特别选择了数组初始化，因为可以保证对传递的参数进行从左到右的评估。将评估，丢弃值，并作为初始化程序传递（用于强制选择内置逗号运算符，而不是任何可能的重载）。`0``N-1``seq<0, 1, 2, ..., N-1>``unsigned... Is``get<Is>(t)``get<0>(t)``get<1>(t)``get<N-1>(t)`
`Alias<char[]>{ ... }``(void(expression), '0')``expression``'0'``void(...)`

# drupal-7 - Sheetnode 公式

> ID：13255929
> 
> 赞同：1
> 
> 时间：2012-11-06T17:08:39.463
> 
> 标签：drupal-7, phpexcel

我目前正在为 Drupal 7 使用一个名为“Sheetnode”的模块。这是一个很棒的模块，但是似乎 excel ROUNDUP 函数不起作用或不受支持。我导入的 excel 数据（通过 PHPEXCEL）是 .xlsx 格式，包含多个计算。然而，一些公式不正确，导致错误的总数和四舍五入的值。电子表格上的所有数字都必须准确。有没有人有过这个模块的经验？以及可能的解决方法？

非常感谢

# java - HQL 查询连接表

> ID：13255932
> 
> 赞同：7
> 
> 时间：2012-11-06T17:08:45.807
> 
> 标签：java, hql

我正在使用休眠连接到我的数据库以进行项目。

我想要一个查询，以某种语言从我的数据库中获取产品的描述和名称。我拥有的参数是语言的简称，所以首先我必须获取语言的 id，然后获取所需语言的文本。

我尝试了以下 hql 查询，但没有成功。

```
from Products as p
where p.productlanguages.languages.shortname like 'eng' 
```

这是数据应该来自的数据库部分的图像： ![数据库](../Images/c56400ce0c7bb815ca3654922cb130d9.png)

我通过 sql 查询得到了想要的结果，但我似乎无法让它在休眠状态下工作。但我更愿意在 hql 中执行此操作。

```
SELECT * FROM products p 
INNER JOIN productlanguage pl ON pl.Products_id = p.id 
WHERE pl.Languages_id = 
(
SELECT id FROM languages 
WHERE Shortname = 'eng'
); 
```

谁能告诉我如何构建这个 hql 查询？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:12:51.470

试试下面：

```
 from Products p INNER JOIN p.productlanguages pl
   where pl.languages.shortname ='eng' 
```

我假设您已将`Product-Productlanguages`关系映射为`OneToMany`和`Productlanguages-Langages`关系，`ManyToOne`如您的 ER 图中所示。

**编辑：**`Productlanguage` line 的映射似乎有错字`public Languages getLanguages() {barcode`，最后删除`barcode`。

```
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="Languages_id", nullable=false, insertable=false, updatable=false)
public Languages getLanguages() {barcode

    return this.languages;
} 
```

# cqrs - EventStore - 与 protobuf-net 集成的问题

> ID：13255934
> 
> 赞同：3
> 
> 时间：2012-11-06T17:08:47.117
> 
> 标签：cqrs

我正在考虑将 EventStore 与 SQL Server 一起用于数据存储。大多数性能损失是 SQL Server 实际存储数据，并且在 Web 服务器中也分配了大量内存。事实证明，这一切都归结为标头的序列化（来自 CommonDomain 的 EventStoreRepository 类）和 EventMessage（来自 EventStore）。

所以我尝试从二进制序列化器切换到 Protobuf-net 序列化器。但是需要序列化的类型没有正确序列化所需的属性。

是否可以将 protobuf-net 与 EventStore + CommonDomain 一起使用？有人做过吗？

# visual-c++ - 如何让 MDI MFC 应用在任务栏中显示一个实例？

> ID：13255935
> 
> 赞同：4
> 
> 时间：2012-11-06T17:08:46.803
> 
> 标签：visual-c++, mfc, mdi

我有一个 MDI 应用程序，当我单击新文档时，它会打开一个单独的选项卡。这将在 Windows 的任务栏中创建另一个图标实例。有什么办法可以改变这种行为，以便任务栏上只显示一个图标实例？

我知道一种方法是使用 SDI 并为我的视图使用选项卡，但我想将其保留为 MDI。这甚至可能吗。

我试图模仿这个名为“Dameware NT Utilities”的特定应用程序的视图： [http ://www.dameware.com/v3-dameware/media/DameWare/DW%20NTU/Carousel/DRS-Primary-medium.png ?width=490&height=276&ext=.png](http://www.dameware.com/v3-dameware/media/DameWare/DW%20NTU/Carousel/DRS-Primary-medium.png?width=490&height=276&ext=.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T03:44:46.770

经过一天的挖掘，我找到了解决方案。天哪，终于弄清楚这一点感觉很好。无论如何，这是解决方案。

我只需要重写子框架的`CanShowOnTaskBarTabs()`方法来返回 FALSE。这是类方法：

首先，在 childframe.h 文件中，将以下代码放入类声明中

```
public:
     virtual BOOL CanShowOnTaskBarTabs() override; 
```

然后在您的 childframe.cpp 文件中，将以下代码放在最底部：

```
BOOL CChildFrame::CanShowOnTaskBarTabs()
{
    return FALSE;
} 
```

以下是有关该主题的更多信息：http: [//msdn.microsoft.com/en-us/library/ee256255 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ee256255(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T16:16:15.277

我有一个更简单的解决方案。在应用程序类`InitInstance()`方法上，只需调用

```
EnableTaskbarInteraction(FALSE); 
```

在创建主框架之前。然后，当鼠标悬停在其任务栏图标上时，您将获得每个应用程序实例的一个视图，而不是每个 seub-window 一个视图。

# seo - 网站/服务/黑客通过浏览量而不是在网站/子域级别获取竞争情报数据？

> ID：13255938
> 
> 赞同：0
> 
> 时间：2012-11-06T17:08:50.040
> 
> 标签：seo, analytics

这是我的 SEO/分析网站和服务的大而脏的列表。据我所知，他们都不能为我提供一个按单位时间查看某个任意域或子域（或整个 Internet）的最多浏览 URL 的表。我怎样才能得到那个，或者很好地接近它的东西，付费或免费？

*   Google Analytics 的页内分析
*   竞争网
*   亚历克萨
*   unica 的网络洞察力
*   莉莉丝总部
*   核心指标
*   知觉
*   进料燃烧器
*   客户关系管理矩阵
*   民族
*   预见
*   疯狂的鸡蛋
*   点击故事
*   亲吻洞察
*   Ahrefs/arefs
*   搜索洞察力
*   按命中
*   技术专家
*   SerpIQ
*   SerpFox
*   微型网站管理员
*   Xrumer
*   剪贴箱
*   长尾亲
*   雄伟的搜索引擎优化
*   乌鸦工具
*   seoMOZ Pro
*   尖叫的青蛙
*   搜索指标要领
*   可爱等级

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:59:51.360

感谢您提及 serpIQ！我在公司工作，能被包括在内总是很高兴。要回答您的问题，我认为您列出的任何工具（或我自己能想到的任何工具）都不能满足您的要求。唯一可能的可能是 Google Analytics 的自定义报告，或其他一些跟踪 SaaS 的指标——我知道我们不会将它作为我们产品的一部分提供。希望有帮助！

# objective-c - 目标 C：名称、绑定和范围

> ID：13255942
> 
> 赞同：0
> 
> 时间：2012-11-06T17:08:57.413
> 
> 标签：objective-c, c, variables, binding, scope

我正在寻找有关 Objective-C 如何识别程序中的实体的信息。允许多少个字符，等等。我试过用谷歌搜索它，但我什么也想不出来。既然它是基于 C 的一方，那么命名/绑定/范围是否遵循 C 的命名/绑定/范围？任何帮助，将不胜感激。如果您有任何讨论这些事情的链接，它也会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:23:40.893

Objective-C 遵循与 C 相同的规则，然后为 C 中没有的 OO 特性添加了一些自己的规则。

与 C 中一样，变量名中可以包含的字符数没有硬性限制。

范围和可见性规则与 C 中的相同，尽管 Objective-C 对象几乎总是通过指针访问——并且对象本身的生命周期[是通过引用计数或垃圾收集来管理的](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html#//apple_ref/doc/uid/10000127i)——因此范围在某种程度上不如 C 或C++。

一个主要区别是实例变量的作用域是它们所属的实例，[您可以控制外部调用者是否可以使用](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocDefiningClasses.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF127),`@public`和`@protected`关键字`@private`访问它们。

另一种区别是块。它们是^(Apple 对 C 的非标准 †</sup> 补充。块捕获它们周围的范围，只要块存在就保持周围的东西。块通常也会保留它们引用的对象，以确保这些对象不会被释放。您可以阅读 Apple 的[块编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)中的详细信息。)

^(†</sup> [Apple 已经提交了区块以进行标准化，但它还没有发生，而且可能永远不会真正发生，尽管如果这样做会非常好。])

# jakarta-ee - 为什么我的 RESTEasy MessageBodyReaderInterceptor 不能在 Tomcat 中运行？

> ID：13255944
> 
> 赞同：2
> 
> 时间：2012-11-06T17:08:59.743
> 
> 标签：jakarta-ee, tomcat, jax-rs, resteasy, interceptor

我有一个简单的 RESTEasy 应用程序，方法如下：

```
@POST
@Path("/stuff")
@Produces({"application/json", "application/xml"})
public MyObject doStuff(MultivaluedMap<String, String> String formParams) {
    // do stuff
} 
```

我想拦截进来的消息，但不知何故我的拦截器没有触发。这里是：

```
@Provider
@ServerInterceptor
@Precedence("SECURITY")
public class JAXRSInterceptor implements MessageBodyReaderInterceptor {

    public Object read(MessageBodyReaderContext context) throws IOException, WebApplicationException {
        //do stuff

        return context.proceed();
    }
} 
```

这是我的 RESTEasy 依赖项：

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxrs</artifactId>
    <version>2.3.4.Final</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jaxb-provider</artifactId>
    <version>2.3.4.Final</version>
</dependency>

<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jackson-provider</artifactId>
    <version>2.3.4.Final</version>
</dependency> 
```

这是 web.xml 的一部分：

```
<web-app>
    <display-name>My frontend</display-name>

    <context-param>
        <param-name>resteasy.scan</param-name>
        <param-value>true</param-value>
    </context-param>

    <listener>
        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
    </listener>

    <context-param>
        <param-name>resteasy.use.builtin.providers</param-name>
        <param-value>true</param-value>
    </context-param>

    <servlet>
        <servlet-name>Frontend</servlet-name>
        <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Frontend</servlet-name>
        <url-pattern>/api/*</url-pattern>
    </servlet-mapping>

    ... 
```

REST 服务运行良好，而且我还有一个[ExceptionMapper](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html/ExceptionHandling.html#ExceptionMappers)可以正常工作。

拦截器仍然不起作用。我已经尝试过 Tomcat 6 和 7。我做错了什么？

我做了一个简单的例子来演示[https://github.com/henrik242/resteasy-interceptor-demo](https://github.com/henrik242/resteasy-interceptor-demo)上的问题。在 Tomcat 下构建和部署，并访问`http://localhost:8080/resteasy-interceptor-demo`. 运行测试#1、#2 和#3。

**编辑：**这看起来像一个错误。我已将其归档为[https://issues.jboss.org/browse/RESTEASY-797](https://issues.jboss.org/browse/RESTEASY-797)

# javascript - ajaxOptions 是什么？

> ID：13255945
> 
> 赞同：1
> 
> 时间：2012-11-06T17:09:01.540
> 
> 标签：javascript, ajax, jquery

我在一些 javaScript 代码中发现了这一点：

```
ajaxOptions = {
    data: {},
    success: function(data){
       $('#revenue_paginator').html(data);
    },
    error: function(){},
    complete: function(xhr){ 
        onCompleteCheck(xhr);
        }
    }; 
```

我只是想知道它是什么。我最初以为是 jquery，但 jquery 文档中没有关于它的内容。谷歌搜索将我引导到涉及 ajaxOptions 但没有像 ajaxOptions 那样简单的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:10:41.883

`ajaxOptions`是开发人员指定的任意名称，重要的部分是对象中的内容以及它与 jQuery 的关系，您可以查看 jQuery 文档[`ajaxSetup()`](http://api.jquery.com/jQuery.ajaxSetup/)以获得更好的理解。

> 说明：为未来的 Ajax 请求设置默认值。
> 添加的版本：1.1 jQuery.ajaxSetup(options)
> 选项：一组配置默认 Ajax 请求的键/值对。所有选项都是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T17:10:42.060

`ajaxOptions`你所拥有的只是一个 javascript 对象，它定义了可以传递给`$.ajax`jQuery 函数的不同配置参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T17:11:07.453

`ajaxOptions`对我来说只是一个普通的变量名。您可以执行以下操作：

```
ajaxOptions = ...
$.ajax(ajaxOptions); 
```

# .net - 是否可以在面板中嵌入属性网格的集合编辑器？

> ID：13255947
> 
> 赞同：2
> 
> 时间：2012-11-06T17:09:10.433
> 
> 标签：.net, propertygrid, collectioneditor

标准行为是在新窗口中启动它。

![在此处输入图像描述](../Images/17e29590dd888a039896f209e35bb53e.png)

有没有办法可以将表单嵌入到另一个表单的面板中？基本上让PropertyGrid 和Colelction Editor 在一个表单中并排站立？

# sqlite - Vici CoolStorage 主键未设置为 INTEGER AUTOINCREMENT

> ID：13255950
> 
> 赞同：2
> 
> 时间：2012-11-06T17:09:36.783
> 
> 标签：sqlite, xamarin.ios, vici

我想这与我对 MonoTouch 的 Vici CS ORM 的工作原理缺乏了解有关。在为 Monotouch 使用 Vici CS 时，当主键未设置为 INTEGER AUTOINCREMENT 时，实例化一个 DB 映射对象需要很长时间（几十秒）。当 PK 为 INTEGER AUTOINCREMENT 时，执行顺利。

我的 DB 映射类如下所示：

```
[MapTo("Employees")]
public class Employee : CSObject<Employee, int>
{
    public Employee () { }

    public int EmployeeId { get { return (int)GetField ("EmployeeId "); } }
    public string Name{ get { return (string)GetField ("Name"); } set { SetField ("Name",value); } }
    public string Address{ get { return (string)GetField ("Address"); } set { SetField ("Address",value); } }
} 
```

以及数据库创建脚本：

```
CREATE TABLE Employees (EmployeeId INTEGER PRIMARY KEY AUTOINCREMENT, Name TEXT, Address TEXT)"); 
```

删除表创建脚本中的 AUTOINCREMENT 关键字会减慢 Employee 对象实例化的速度。不删除它工作正常。

有没有推荐的方法避免这种约束？例如，是否可以将 TEXT 字段作为主键，然后可以包含一个 guid？

# couchbase - 在 Couchbase .Net 1.2 客户端中存储桶大小必须是 2 的幂的日志中出现错误

> ID：13255952
> 
> 赞同：1
> 
> 时间：2012-11-06T17:09:48.013
> 
> 标签：couchbase

我正在使用 Couchbase server 2.0 beta 并尝试推送 JSON 文档并失败。检查客户端日志时，我发现我遇到了异常...

> 2012-11-06 12:02:29,812 [22] 错误 Couchbase.CouchbasePool [(null)] <(null)> - 无法初始化池。System.ArgumentException：桶数必须是 2 的幂！在 Enyim.Caching.Memcached.VBucketNodeLocator..ctor(String hashAlgorithm, VBucket[] buckets) 在 Couchbase.CouchbasePool.InitVBucket(ClusterConfig config, ISaslAuthenticationProvider auth) 在 Couchbase.CouchbasePool.ReconfigurePool(ClusterConfig config)

不知道怎么回事，有大神能指点一下吗？我尝试将存储桶大小更改为 2048，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:31:26.063

您是否尝试在 Windows 8 上安装 couchbase 服务器？我遇到了同样的问题并将其安装在 Windows 服务器 VM 中解决了它，尽管有报告的解决方法，

请参阅： http: [//www.couchbase.com/issues/browse/MB-6395](http://www.couchbase.com/issues/browse/MB-6395)

# jquery - 在 jQuery 移动单页模板中放置脚本标签的位置

> ID：13255953
> 
> 赞同：2
> 
> 时间：2012-11-06T17:09:47.893
> 
> 标签：jquery, jquery-mobile, ibm-mobilefirst, jquery-events

我有两页以单页模板方式编写。

Login.html 有`<script src="login.js" />`他的`<head></head>`，这就像：

```
$(document).on("pageinit", "#loginPage", function(){
   $("#loginBtn").on("tap", function(){
      // if you are already authenticate or login success...
      $.mobile.changePage("Main.html");
   });
}); 
```

Main.html`<script src="main.js" />`在他的文件`<div data-role="page" id="main"></div>`中，就像：

```
$(document).on("pageinit", "#main", function(){
//if not authenticated go to login
   $.mobile.changePage("Login.html");

    callJsonService();

$("#btnLogout").on("tap", function(){
            //do logout operatio and go back to login
    $.mobile.changePage("Login.html");
}).on("vmousedown", function(){
    $(this).addClass("tapped");
}).on("vmouseup", function(){
    $(this).removeClass("tapped");
}); 
```

如果您来回导航这 2 个页面，则每次访问该页面时，绑定的事件都会`on()`触发两次，然后是 3 次，然后是 4 次等等。

为什么会这样？是因为“pageinit”事件吗？或者将 main.js 放在带有 data-role=page 的 div 中是不正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:56:28.560

不要在您的内部加载 JS，`<div data-role="page"/>`它会触发多次，我喜欢将`on`侦听器绑定到我包含在每个页面上的 js 文件中的文档根目录

```
$(document).on('pageinit pageshow', 'div:jqmData(role="page"),   
div:jqmData(role="dialog")', function(event){ 
```

现在放置某种数据变量或类`<div data-role="page" data-pageid="foo"/>`来区分不同的页面，现在你有两个变量来分支你的代码

1.  **event.type** = pageinit/pageshow：第一个只为每个页面触发一次，后者将在第一次加载时触发，如果您按下返回并导航回页面，则会重新触发

2.  **$(this).data('pageid')** = 任何你想要的，在这种情况下，当页面*foo*触发任一事件时，你可以适当地处理，这并不奇怪

有关更多详细信息，请参阅我的旧答案：[https ://stackoverflow.com/a/10542821/737023](https://stackoverflow.com/a/10542821/737023)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:49:53.763

您在这里似乎有一些不一致之处。使用 SPA 模板并加载多个物理页面会导致逻辑页面（包含在您的`<div data-role="page"></div>`标签中）通过 ajax 加载并添加到 DOM。通过在这些逻辑页面中放置脚本标签，脚​​本会触发多次（每次页面加载一次）并导致您的多个事件绑定。

您应该将所有脚本放在逻辑页面之外。一个好的地方是在您的初始页面（main.html）的标题中。

# java - JNLP 扩展安装程序在 JRE 安装之前运行

> ID：13255956
> 
> 赞同：1
> 
> 时间：2012-11-06T17:09:58.080
> 
> 标签：java, deployment, jnlp, java-web-start

我有一个扩展安装程序，它总是在客户端安装新的 java jre 之前运行。我需要它之后运行。根据 JNLP 规范：

1.  ..
2.  ..
3.  确定要使用的正确 JRE。这可能需要下载和安装适当的 JRE。（参见第 4.6.2 节。）
4.  下载 JNLP 文件中使用的所有扩展的扩展描述符。此步骤使用下载的扩展描述符中指定的扩展递归地继续。第 6 节规定了如何下载和缓存扩展描述符。
5.  为尚未运行安装程序的任何所需扩展运行安装程序。这将在 5.6 节中解释。

....如果我理解正确，安装程序应该在下载新的 JRE 后运行？（但它没有，是马上开始）

# php - .php 页面下载而不是在浏览器中打开

> ID：13255960
> 
> 赞同：0
> 
> 时间：2012-11-06T17:10:16.313
> 
> 标签：php, browser, download

我发现很多帖子告诉我如何强制浏览器下载文件而不是打开它，但我有点困惑为什么我的文件本来是要在浏览器中打开的，但是却被发送到下载.

这些是 .php 页面，可以在之前的 URL 下完美运行。它们已通过新 URL 上传到同一服务器，但我不确定需要调整哪些内容才能在浏览器中正确打开它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:14:23.940

似乎您的新站点没有 .php 文件处理程序。

因此，当 Web 服务器遇到这样的文件时，它会将其显示为下载文件，而不是通过 php.ini 运行。

检查您的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:16:19.300

这意味着您的服务器无法从该 php 页面呈现 html。

因此服务器可能存在一些问题，因为它没有处理文件中的 php 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:15:46.847

您可能需要进入控制面板或托管服务提供商提供的任何其他管理界面，并在新 URL 上启用 PHP 支持。

如何做到这一点取决于您的主机提供的接口，但在我见过的大多数工具中，它只是简单地标记为“PHP”，您可能需要简单地打开它。

# c# - 冒号后字段命名值的正则表达式

> ID：13255961
> 
> 赞同：1
> 
> 时间：2012-11-06T17:10:16.717
> 
> 标签：c#, regex

使用 c# 我正在尝试使用正则表达式来获取出现在冒号后的一段文本的值。我知道字段名称，但后面的冒号位于可变位置。该值将在下一个空格处结束。

因此：

已知字段名称：值

然后，我想将值放入一个组中。

我发现了许多类似的问题，但没有一个能真正为我指明解决这个问题的方向。

这是一段较大代码的一部分，但基本上它适合这里：

```
 foreach (var v in fieldsToParse)
                {
                    var match = Regex.Match(line, v.pattern, RegexOptions.IgnorePatternWhitespace);

                    if (match.Success)
                        v.value = match.Groups[v.name].Value;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:15:56.367

您正在寻找的正则表达式应该类似于`(?<knownfieldname>[a-zA-Z]+)(\s+):(\s+)(?<value>[a-zA-Z]+)`或`knownfieldname(\s+):(\s+)(?<value>[a-zA-Z]+)`

当然，这假定 KnownFieldName 和 Value 都只是字母字符。如果可以输入数字，您可能还想添加`0-9`到范围中，或者如果除了空格之外的任何内容确实有效，您可以使用`\S`我猜的通配符。

编辑以合并可变数量的空格。此外，根据下面的评论，您可能会考虑将[Derek Slager 的超棒正则表达式测试器](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)和[这个简单的正则表达式备忘单](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)加入书签。对这种情况有很大帮助。

# php - 模块“Mage_Api”需要magento中的模块“Mage_Core”错误

> ID：13255967
> 
> 赞同：-1
> 
> 时间：2012-11-06T17:10:40.073
> 
> 标签：php, magento

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:06:29.817

此错误消息让您知道 Magento 尝试加载`Mage_Api`模块的声明，但找不到该模块的声明`Mage_Core`。由于`Mage_Api`配置为依赖于这个模块，Magento 放弃了。

发生这种情况的原因有很多，而且您的问题中没有足够的信息来推断发生了什么。您需要自己进一步调试此问题。

首先，此异常源自以下方法

```
#File: app/code/core/Mage/Core/Model/Config.php
protected function _sortModuleDepends($modules)
{
    ...
} 
```

该`$modules`数组包含`app/etc/modules`为您的系统加载的信息。您的异常出现在第一个循环中

```
foreach ($modules as $moduleName => $moduleProps) {
    $depends = $moduleProps['depends'];
    foreach ($moduleProps['depends'] as $depend => $true) {
        if ($moduleProps['active'] && ((!isset($modules[$depend])) || empty($modules[$depend]['active']))) {
            Mage::throwException(
                Mage::helper('core')->__('Module "%1$s" requires module "%2$s".', $moduleName, $depend)
            );
        }
        $depends = array_merge($depends, $modules[$depend]['depends']);
    }
    $modules[$moduleName]['depends'] = $depends;
} 
```

检查的内容`$modules`。如果没有`Mage_Core`密钥（我怀疑），这意味着 Magento 无法加载`app/etc/modules`声明`Mage_Core`. 默认情况下这是`Mage_All.xml`. 检查此文件的权限，并检查它是否是有效的 XML。如果粗略检查通过，此文件将加载到`_loadDeclaredModules`

```
protected function _loadDeclaredModules($mergeConfig = null)
{
    //...
    foreach ($moduleFiles as $file) {
        $fileConfig->loadFile($file);
        $unsortedConfig->extend($fileConfig);
    }    
    $moduleDepends = array();
    foreach ($unsortedConfig->getNode('modules')->children() as $moduleName => $moduleNode) {
        if (!$this->_isAllowedModule($moduleName)) {
            continue;
        }

        $depends = array();
        if ($moduleNode->depends) {
            foreach ($moduleNode->depends->children() as $depend) {
                $depends[$depend->getName()] = true;
            }
        }
        $moduleDepends[$moduleName] = array(
            'module'    => $moduleName,
            'depends'   => $depends,
            'active'    => ('true' === (string)$moduleNode->active ? true : false),
        );
    }

    //...
} 
```

确定`Mage_Core`节点丢失的原因，您将找到问题的解决方案。

# facebook-graph-api - Facebook API 部分在生产中工作

> ID：13255970
> 
> 赞同：-1
> 
> 时间：2012-11-06T17:10:41.757
> 
> 标签：facebook-graph-api, facebook-php-sdk

我通过 JS SDK 和 Php SDK 使用 Facebook 图形 API。虽然一切都在开发环境中工作，在生产中，在共享主机上，它是部分工作的，这很令人不安。

首先，facebook 应用程序在 dev 中的测试和 prod 中的测试之间完全一样，我刚刚更改了域。其次，在我的托管服务提供商上打开了出站端口 80 和 443。

**开发**：windows，php 5.3.8，curl 7.21.7 **产品**：Linux，php 5.3.17，curl 7.24.0

我在这里根据我的测试结果进行介绍。

**开发**

*   在用户中发布消息：确定
*   在页面中发布消息：确定
*   在用户中发布照片：好的
*   在页面中发布照片：好的
*   删除用户中的消息：确定
*   删除页面中的消息：确定
*   删除用户中的照片：确定
*   删除页面中的照片：确定

**产品**

*   在用户中发布消息：确定
*   在页面中发布消息：确定
*   在用户中发布照片：好的
*   在页面中发布照片：OAuthException：发生意外错误。请稍后重试您的请求。
*   删除用户中的消息：未测试
*   删除页面中的消息：OAuthException: (#100) Invalid parameter
*   删除用户中的照片：OAuthException: (#221) 照片不可见
*   删除页面中的照片：无法测试

有人对此有所了解吗？如何调试正在发生的事情（我在共享托管服务提供商上）？

**编辑**

这是在产品中为 KO 的页面上发布照片的代码

```
 // I´m using Yii framework with a wrapper around Facebook php sdk
  // retreiving the page acces token
  $page_at = Yii::app()->facebook->api('/'.$fb_page->page_id.'?fields=access_token');

  Yii::app()->facebook->setFileUploadSupport(true);

  // model contains the post data from the user. For the message it is a text area
  // Yii::app()->params->uploadPath is a global param with path where the image resides.
  // Directory separator where created with php´s DIRECTORY_SEPARATOR
  $data = array(
          "message" => $model->attributes['descricao'],
          "source" => "@".Yii::app()->params->uploadPath.$model->image,
          "access_token" => $page_at['access_token']);         

  $result = Yii::app()->facebook->api('/'.$fb_page->page_id.'/photos', "POST", $data); 
```

这是发布给用户的代码，在产品中可以

```
 Yii::app()->facebook->setFileUploadSupport(true);
  $data = array(
         "message" => $model->attributes['descricao'],
          "source" => "@".Yii::app()->params->uploadPath.$model->image,
  );
  $result = Yii::app()->facebook->api('/'.$fb_page->page_id.'/photos', "POST", $data); 
```

两者之间的唯一区别是我不需要用户的 access_token

**编辑**

删除问题似乎可以通过将页面访问令牌放在 url 中而不是放在帖子中来解决。奇怪，因为我记得我被迫将它放在我的开发中的帖子中以使删除工作......

现在，我专注于在无数不同组合之后我得到相同行为的图像帖子。尽管出现错误，API 调用仍在执行某些操作：如果应用相册不存在但图像未上传，它会创建应用相册。

是否与此错误有关：[https ://developers.facebook.com/bugs/376442565760536?browse=search_5099ba94055685677909148](https://developers.facebook.com/bugs/376442565760536?browse=search_5099ba94055685677909148)

**编辑**

遵循 cpiko 的建议，我研究了 CRLF 潜在问题。我已将 CURLOPT_CRLF 设置为 true。现在我得到：OAuthException：请求此资源需要用户访问令牌。

**编辑**

在与提琴手打了一会儿之后，我可以比较 dev 和 prod 之间发送的 facebook api curl 请求。嗯....绝对相同。我开始没主意了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:53:39.217

经过这么多测试，阻止的是facebook应用程序高级设置中的国家限制设置。

问题是我的托管服务提供商在美国，我将 facebook 应用程序限制在我的国家（不是美国）。奇怪的是，此设置仅适用于我的照片上传，而不适用于其他情况（例如提要发布）。此外，它不基于客户端（浏览器）来源进行限制，但在这种情况下，来自发起 curl 的服务器。

**更新**

删除用户照片（照片不可见）时的错误是不同的。即使我是通过我的 facebook 应用程序发布照片的人，我也必须添加 user_photos 权限，这样我才能删除它

# drupal - Drupal Webform 中并排的表单字段

> ID：13255980
> 
> 赞同：0
> 
> 时间：2012-11-06T17:11:13.970
> 
> 标签：drupal, drupal-6, drupal-forms, drupal-webform

有谁知道在 Drupal Webform 中并排显示两个表单字段的最简单方法。我正在使用 Webform 模块创建一个表单，但很明显，当您创建它时，所有字段一个接一个地列出。我有两个字段希望并排显示。这可能吗？哦，我正在使用 Drupal 6，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:49:50.040

您可以使用[排列字段](http://drupal.org/project/arrange_fields)模块。这将允许您在任何地方拖放和字段，并且应该足以处理您需要的内容。

# java - 抽象类的具体实现的生成器（Joshua Bloch 风格）？

> ID：13255985
> 
> 赞同：3
> 
> 时间：2012-11-06T17:11:51.160
> 
> 标签：java, abstract, builder, concrete

假设我有一个抽象类（BaseThing）。它有一个必需参数（“base required”）和一个可选参数（“base optional”）。我有一个扩展它的具体类（事物）。它还具有一个必需参数（“required”）和一个可选参数（“optional”）。所以像：

```
public abstract class BaseThing {
    public static final String DEFAULT_BASE_OPTIONAL = "Default Base Optional";

    private final String baseRequired;
    private String baseOptional = DEFAULT_BASE_OPTIONAL;

    protected BaseThing(final String theBaseRequired) {
        this.baseRequired = theBaseRequired;
    }

    final void setBaseOptional(final String newVal) {
        this.baseOptional = newVal;
    }

    public final void selfDescribe() {
        System.out.println("Base Required: " + baseRequired);
        System.out.println("Base Optional: " + baseOptional);

        selfDescribeHook();
    }

    protected abstract void selfDescribeHook();
} 
```

和：

```
public final class Thing extends BaseThing {
    public static final String DEFAULT_OPTIONAL = "Default Optional";

private final String required;
    private String optional = DEFAULT_OPTIONAL;

    Thing(final String theRequired, final String theBaseRequired) {
        super(theBaseRequired);
        required = theRequired;
    }

    @Override
    protected void selfDescribeHook() {
        System.out.println("Required: " + required);
        System.out.println("Optional: " + optional);
    }

    void setOptional(final String newVal) {
        optional = newVal;
    }
} 
```

我想为 Thing 对象创建一个 Joshua Bloch 风格的构建器。不过，更一般地说，我想让 BaseThing 的具体实现更容易拥有构建器，所以我真正想要的（我认为）是一个 BaseThing 构建器，它可以很容易地用于制作 ThingBuilder、OtherThingBuilder 或 SuperThingBuilder .

有没有比我想出的以下更好的方法（或者我想出的方法有问题）？

```
public abstract class BaseThingBuilder<T extends BaseThing> {
    private String baseOptional = BaseThing.DEFAULT_BASE_OPTIONAL;

    public BaseThingBuilder<T> setBaseOptional(final String value) {
        baseOptional = value;
        return this;
    }

    public T build() {
        T t = buildHook();
        t.setBaseOptional(baseOptional);

        return t;
    }

    protected abstract T buildHook();
} 
```

和：

```
public final class ThingBuilder extends BaseThingBuilder<Thing> {
    private final String baseRequired;
    private final String required;
    private String optional = Thing.DEFAULT_OPTIONAL;

    public ThingBuilder(final String theRequired,
            final String theBaseRequired) {
        required = theRequired;
        baseRequired = theBaseRequired;
    }

    public ThingBuilder setOptional(final String value) {
        optional = value;
        return this;
    }

    protected Thing buildHook() {
        Thing thing = new Thing(required, baseRequired);
        thing.setOptional(optional);

        return thing;
    }
} 
```

可用于以类似于以下方式构建 Thing 对象：

```
 BaseThingBuilder<Thing> builder = 
                new ThingBuilder("Required!", "Base Required!")
                    .setOptional("Optional!")
                    .setBaseOptional("Base Optional!");
        Thing thing = builder.build();
        thing.selfDescribe(); 
```

哪个输出：

```
Base Required: Base Required!
Base Optional: Base Optional!
Required: Required!
Optional: Optional! 
```

我知道但我认为不是特别重要的一个问题（尽管如果可以改进它会很好）是您必须在设置任何基本选项之前设置所有非基本选项：做否则会导致语法错误，因为 setBaseOptional() 返回的是 BaseThingBuilder 而不是 ThingBuilder。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:28:22.880

我认为以这种方式考虑建造者并不是一个好主意。构建器的层次结构通常会导致令人头疼的问题和脆弱的代码。

减少需要在具体构建器中编写的代码量并重用来自基本构建器的逻辑与领域密切相关。开发一个通用的解决方案并不容易。但是，无论如何，让我们尝试通过一个示例：

```
public interface Builder<T> {
  T build();
}

public class Person {
  private final String name;

  //the proper way to use a builder is to pass an instance of one to
  //the class that is created using it...
  Person(PersonBuilder builder) {
    this.name = builder.name;
  }

  public String getName(){ return name; }

  public static class PersonBuilder implements Builder<Person> {
    private String name;
    public PersonBuilder name(String name){ this.name = name; return this; }

    public Person build() {
      if(name == null) {
        throw new IllegalArgumentException("Name must be specified");
      }
      return new Person(this);
    }
  }
} 
```

厉害了，宝贝！怎么办？也许你想添加一个类来代表一个学生。你做什么工作？你扩展人吗？当然，这是有效的。采取更“奇怪”的路线并尝试聚合如何？是的，您也可以这样做...您的选择将影响您最终将如何实施构建器。假设您坚持传统的路径并扩展 Person （您应该已经开始问自己，`Person`成为一个具体的类是否有意义？如果我把它抽象化，我真的需要一个构建器吗？如果类是抽象的应该builder 是抽象的？）：

```
public class Student extends Person {
  private final long id;

  Student(StudentBulder builder) {
    super(builder);
    this.id = builder.id;
  }

  public long getId(){ return id; }

  //no need for generics, this will work:
  public static class StudentBuilder extends PersonBuilder {
    private long id;
    public StudentBuilder id(long id){ this.id = id; return this; }

    public Student build() {
      if(id <= 0) {
        throw new IllegalArgumentException("ID must be specified");
      }
      return new Student(this);
    }
  }
} 
```

好的，这看起来与您想要的完全一样！所以，你试试看：

```
Person p = new PersonBuilder().name("John Doe").build();
Student s = new StudentBuilder().name("Jane Doe").id(165).build(); 
```

看起来很棒！除了，它没有编译......第 2 行有一个错误，它指出`The method id(int) is undefined for the type Person.PersonBuilder`. 问题是它`PersonBuilder#name`返回了一个 type 的构建器`PersonBuilder`，这不是你想要的。在`StudentBuilder`您实际上希望返回类型`name`为`StudentBuilder`. 现在，您提前思考并意识到，如果有任何扩展`StudentBuilder`，您会希望它完全返回其他东西……这可行吗？是的，使用泛型。然而，它非常丑陋，并且引入了相当多的复杂性。因此，我拒绝发布说明它的代码，因为担心有人会看到这个线程并在他们的软件中实际使用它。

您可能认为重新安排方法调用会起作用（在调用`id`之前调用`name`） ：，`new StudentBuilder().id(165).name("Jane Doe").build()`但它不会。至少在没有明确转换为`Student`:`(Student)new StudentBuilder().id(165).name("Jane Doe").build()`的情况下并非如此，因为在这种情况下，`PersonBuilder#build`正在调用其返回类型为`Person`... 这简直是不可接受的！即使它在没有显式转换的情况下工作，它也应该让你畏缩，知道必须以特定顺序调用构建器的方法。因为如果你不这样做，有些事情就不会奏效......

如果您继续尝试使其正常工作，将会出现更多问题。即使你确实让它工作了，我认为它不容易理解，当然也不优雅。当然，请随时证明我错了并在此处发布您的解决方案。

顺便说一句，您还应该问自己什么是**抽象**构建器？因为，这听起来很矛盾。

最后，我认为这个问题的范围太大了。答案是特定领域的，在没有您的要求的情况下很难提出。请记住，构建者的一般准则是让它们尽可能简单。

另外，看看一个[相关的问题](https://stackoverflow.com/questions/6734553/java-builder-pattern-and-a-deep-object-hierarchy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:34:48.057

As far as I can tell if you remove the generics then

```
BaseThingBuilder<Thing> builder = 
            new ThingBuilder("Required!", "Base Required!") 
```

changes to

```
BaseThingBuilder builder = 
            new ThingBuilder("Required!", "Base Required!") 
```

The rest of it all remains same, including the restriction that subclass has to be initialized first. So I really don't think this warrants use of generics. Maybe I am missing something.

I seem to remember something like this from Bjarne Stroustrup, long back...

# mysql - Ruby on Rails - 如何将代码从浮点数迁移到十进制？

> ID：13255987
> 
> 赞同：5
> 
> 时间：2012-11-06T16:34:03.510
> 
> 标签：mysql, ruby-on-rails, ruby

所以我有一个 ruby​​ on rails 代码，它经常使用浮点数（很多“to_f”）。它使用一个数据库，其中一些数字也存储为“浮点”类型。

我只想将此代码和数据库迁移到十进制。是否像将数据库列迁移到十进制一样简单（添加一个十进制列，将浮点列复制到十进制一，删除浮点列，将十进制列重命名为旧的浮点列名称），并将代码中的“to_f”替换为“to_d” ? 还是我需要做的不止这些？

非常感谢大家拉斐尔

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T17:12:42.987

您可以轻松地使用迁移来执行此操作，Rails 将为您生成一些代码。

在命令提示符下，创建一个新的迁移：

```
rails generate migration change_price_column_to_decimal 
```

Rails 将在目录中创建迁移`db/migrate`。文件名将是一个时间戳，后跟`_change_price_column_to_decimal.rb`.

在生成的迁移中，您将添加转换字段的方法`up`：`down`

```
class ChangePriceColumnToDecimal < ActiveRecord::Migration
  def up
    change_column :products, :price, :decimal, :precision => 15, :scale => 2, null: false
  end

  def down
    # Either change the column back, or mark it as irreversible with:
    raise ActiveRecord::IrreversibleMigration
  end
end 
```

要执行迁移，请从命令提示符运行适当的 rake 任务：

```
rake db:migrate 
```

这将为您转换数据库。请记住，从浮点数转换为十进制数时，您将丢失一些有效数字，具体取决于您设置`scale`的内容，但如果您处理的是产品价格，这可能不是什么大问题。

# ios - Xcode 4.2 与 iOS SDK 6.0，编译 .xcdatamodeld 文件时出错

> ID：13255992
> 
> 赞同：1
> 
> 时间：2012-11-06T17:12:14.033
> 
> 标签：ios, xcode, compilation, xcdatamodel

我使用带有 xcode 4.2 的雪豹将 iOS 6 SDK 文件从 xcode 4.5 (dmg) 复制到我的计算机上：

sudo cp -R /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ sudo cp -R / Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/ sudo cp -R /Volumes/Xcode/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/6.0\ (10A403) /Developer/Platforms/iPhoneOS.platform/DeviceSupport/ sudo rm -f /Developer/Platforms/iPhoneOS.platform/DeviceSupport/Latest cd /Developer /Platforms/iPhoneOS.platform/DeviceSupport/sudo ln -s ./6.0\ (10A403) ./Latest

我在 xcode 4.2 中打开了我的 iPad 项目，这里显示一个错误，上面写着：

“未分类。路径'/User/desarrollo/Library/Developer/Xcode/DerivedData/.../Build/Products/Debug-iphonesimulator/...app/...momd/...mom 的数据模型编译失败'"

xcdatamodeld 参考和文件存在于项目和文件夹中。

你能帮我解决这个问题吗？

我认为这不是与 iOS 6 SDK 相关的问题，因为我一直在尝试以 iOS 5.1 作为目标来清理和构建项目，但它显示了相同的错误。

提前致谢。

# javascript - 关于这个'NOT_FOUND_ERR：Dom exception 8'的一些东西让我感到困惑

> ID：13255995
> 
> 赞同：1
> 
> 时间：2012-11-06T17:12:15.763
> 
> 标签：javascript, exception, dom, appendchild

好吧，在这里我继续，尝试学习这种非常好的语言......所以我之前有一个非常丑陋的代码，里面充满了'document.write（）'和更丑陋的东西，现在我正在将它转换成一个非常好的符合标准的代码代码，我喜欢它！但是我发现了一个我看不到逻辑的问题。它是这样的：

在 html 文件中，我有这个：

```
<body onload="generatetable(0)"> 
```

在 .js 文件中我有这个：

```
function generatetable(product) {    
    var tbinfo = document.createElement("table");  //table
    var tbbody = document.createElement("tbody");  //tbody
    var row = document.createElement("tr");     // creates row
    for (var i = 0; i < 4; i++) {               // creates 4 cells
        var cell = document.createElement("td");
        }

    var tname = arraypro[product].Name;
    cell.appendChild(tname); 
```

（我不粘贴表格的其余部分，因为它似乎工作正常）

运行时，我`var tname = arraypro[product].Name`在行上得到“异常 8”错误

但如果我只做一个

```
alert(arraypro[0].Name); 
```

它准确地输出它应该输出的东西，非常正确的词。怎么可能 in 的值`arraypro[product].Name`可以被 an 检索`alert`（如果你传递 'product' 的值）而不是`appendChild`?

我仍然不太习惯编程的逻辑，但我尝试...

PD：`arraypro`信息所在的 . 已被声明为全局值，可以访问所有内容，以防万一知道。

非常感谢您在这里的任何输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:14:02.830

`appendChild()`需要一个 DOM 节点，我相信你正在传递一个字符串。

您可以将其更改为：

```
var tname = arraypro[product].Name;
cell.appendChild(document.createTextNode(tname)); 
```

# android - beaglebone 和 android 之间的摄像机接口

> ID：13255996
> 
> 赞同：1
> 
> 时间：2012-11-06T17:12:22.053
> 
> 标签：android, beagleboard

我正在尝试开发一个应用程序，其中 Beaglebone 平台从连接到它的摄像头捕获视频图像，然后将它们（通过互联网套接字）发送到 Android 应用程序，以便应用程序显示视频图像。

我已经读过 openCV 可能是从相机捕获图像的一个很好的选择，但是我不确定如何通过套接字发送图像。

另一方面，我认为Android应用程序接收到的视频图像可以用简单的图像来处理。考虑到这一点，我想我可以每秒左右刷新一次图像。

我不确定我的实施方式是否正确，因此我非常感谢您提供的任何建议和帮助。

在此先感谢，格斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:25:22.450

OpenROV 的人已经做了你所说的事情。他们没有使用定制的 Android 应用程序，这当然是可能的，而是简单地使用网络浏览器来显示捕获的图像。

[https://github.com/OpenROV/openrov-software](https://github.com/OpenROV/openrov-software)

该应用程序使用 OpenCV 执行捕获和分析，使用 Node.JS 应用程序通过 socket.io 将数据传输到 Web 浏览器，并使用 Web 客户端显示视频。此处给出了有关其工作原理的架构描述：

[http://www.youtube.com/watch?v=uvnAYDxbDUo](http://www.youtube.com/watch?v=uvnAYDxbDUo)

您还可以查看运行类似 mjpg-streamer 的内容：

[http://digitalcommons.calpoly.edu/cgi/viewcontent.cgi?article=1051&context=cpesp](http://digitalcommons.calpoly.edu/cgi/viewcontent.cgi?article=1051&context=cpesp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:36:01.343

请注意，将视频流显示为一组图像可能会对性能产生很大影响。例如，如果您不注意如何对每个帧进行编码，则可能会使两个系统之间的流量增加一倍以上。ARGB 需要 32 位来编码一个像素，YUV 需要 12 位，因此即使考虑到帧压缩，每帧的存储空间仍然会增加一倍。此外，渲染 ARGB 比渲染 YUV 慢得多，因为大多数 Android 手机实际上都有硬件优化的 YUV 渲染（因为 GPU 可以直接在显存中 blit YUV）。此外，渲染单独的帧作为方法通常使sone采用简单的方法并在画布上渲染位图，如果您对 10-15 fps 的内容感到满意，但它永远无法达到 60 fps，

如果 Beaglebone 板上有硬件 MPEG 编码器，则应该使用它来编码和流式传输视频。这将允许您直接将 MPEG 流传递到标准 Android 媒体播放器进行渲染。当然，使用标准媒体播放器将不允许您实时处理视频流，因此根据您的情况，这可能不适合您。

# node.js - nodejs 新贵的配置文件

> ID：13255997
> 
> 赞同：3
> 
> 时间：2012-11-06T17:12:24.047
> 
> 标签：node.js, ubuntu, upstart

你能在 ubuntu 上为 nodejs 推荐一个新贵的配置文件吗？我找到了以下教程：[http](http://howtonode.org/deploying-node-upstart-monit) ://howtonode.org/deploying-node-upstart-monit但它似乎很旧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:53:10.857

我有一个小 shell 脚本来创建我的配置文件。

```
create_upstart() {
  project=$1
  file=$2
  conf="/etc/init/${project}_${file}.conf"

  cat > $conf << EOF
  #!upstart

  description "Node Process - $1"
  author      "Geert Pasteels"

  respawn

  start on (local-filesystems and net-device-up IFACE=eth0)
  stop  on shutdown

  script
    export NODE_ENV="production"
    export PORT="3001"
    exec /usr/bin/node /var/www/$project/current/$file.js >> /var/www/$project/shared/logs/$file 2>&1
  end script
EOF

  echo $conf

  # Restart upstart script
  stop ${project}_${file}
  start ${project}_${file}
  echo Restarted ${project}_${file}
}

create_upstart "$1" "$2" 
```

我将它与[TJ 的 deploy](https://github.com/visionmedia/deploy)结合使用。所以在我的发布后部署钩子中我做`startup app file.`