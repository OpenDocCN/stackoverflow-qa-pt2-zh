# StackOverflow 问答 13485000-13485999

# html - 按钮不移动到 Div 的中心

> ID：13485001
> 
> 赞同：0
> 
> 时间：2012-11-21T01:24:54.350
> 
> 标签：html, css

所以我有这个 HTML-

```
 <div class="title" id="questionTitle">
    <input type="button" class="button green" value="Save"/>
    <input type="button" class="button blue" value="Preview"/>
    <input type="button" class="button yellow" value="Save And Exit"/>
    <input type="button" class="button red" value="Exit Without Saving"/>
</div> 
```

我正在尝试定位按钮，使它们位于 .title div 的中心。

我的 CSS 是

```
.button{
top:50%;
left:50%;
height:30px;
-moz-border-radius:10px;
border-radius:10px;
font-family:Arial;
font-weight:normal;
position:absolute;
top:50%; 
```

}

```
.title{
    -moz-border-radius:15px;
    border-radius:15px;
    width:30%;
    height:100px;
    background:#BDBDBD;
} 
```

当我执行 position:absolute 时，所有元素都位于页面的中心，这对我来说没有意义，因为每个 .button 的祖先都是一个 id 为 questionTitle 的 div，所以它应该相对于它定位。

为什么按钮被定位在页面的中心，我如何让它位于 div 的中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:56:06.840

正如乔纳森所说，您不应该使用绝对位置，因为它与父级无关。也许您根本不需要使用位置。让浏览器做正确的事。使用它垂直显示按钮：

```
.button {
    margin-left: 10%;
    margin-right: 10%;
    width: 80%;
} 
```

[http://jsfiddle.net/7dYAA/](http://jsfiddle.net/7dYAA/)

如果您想要从左到右的按钮，请单独保留定位，只需为按钮添加一些填充：`.title { padding: 10px 10%; }`和/或边距/填充。见[http://jsfiddle.net/HY8UR/](http://jsfiddle.net/HY8UR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:07:09.890

添加中断标记。

```
 <input type="button" class="button green" value="Save"/><br>
    <input type="button" class="button blue" value="Preview"/><br>
    <input type="button" class="button yellow" value="Save And Exit"/><br>
    <input type="button" class="button red"
    value="Exit Without Saving"/>

</div>​ 
```

**css**

```
.button{

    height:30px; 
    -moz-border-radius: 10px;
    border-radius: 10px;
    font-family: Arial;
    font-weight: normal;

}

.title{

    text-align: center;
    -moz-border-radius: 15px;
    border-radius: 15px;
    width: 30%;
    height: auto;
    background: #BDBDBD;

}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T01:31:09.563

`Position: absolute`使属性沟它的容器。它基本上释放了元素做它想做的任何事情。

我做了一个小提琴并解决了你的问题。我将其更改为`position: relative`并使它们居中。显然，由于您在百分比上有很多差异，因此这注定不会首先起作用..这将尽可能好。

[http://jsfiddle.net/jaEpt/1/](http://jsfiddle.net/jaEpt/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T01:42:57.153

首先，如果您将元素绝对定位，它将相对于其祖先中的第一个非静态定位元素进行绝对定位，并且在这里它到达主体祖先并使其适合主体尺寸的 50%/50%。有关定位检查的参考：http: [//www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)。

在您的标题 css 中放置一个“位置：相对”以获得所需的结果。此外，如果您想将按钮完美居中，则减去您尝试居中的按钮像素的一半。您可以通过应用按钮宽度一半的负边距来做到这一点。

我已经对 IE6 的解决方案进行了测试，并且可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T06:15:21.727

您可以使用 text-align: center; 在父母上：

```
<div class="title">
    <input type="button" value="Save"/>
    <input type="button" value="Preview"/>
    <input type="button" value="Save And Exit"/>
    <input type="button" value="Exit Without Saving"/>
</div> 

.title { text-align: center; border: 1px solid #090; background: #efe; padding: 20px; }
.title [type=button] { display: inline; } 
```

[http://jsfiddle.net/chovy/cDafD/1/](http://jsfiddle.net/chovy/cDafD/1/)

# objective-c - Bizzare 方法签名，带有未命名的参数（obj-c）

> ID：13485002
> 
> 赞同：4
> 
> 时间：2012-11-21T01:25:12.710
> 
> 标签：objective-c, method-names

我不知道这种语法是有效的。

```
+ (void) methodName:(TypeObject *)typeObject1:(TypeObject *)typeObject2; 
```

然后这样调用：

```
[object methodName:obj1:obj2]; 
```

我觉得它丑陋和令人不安，但它会建立。

有人可以指出我的参考资料，它解释了为什么这是有效的。

FWIW 这个代码库（继承的）充斥着草率、懒惰的东西、几十个拼写错误，看起来它是由不需要再次阅读的人格式化的。（再次感谢[unrustify](http://uncrustify.sourceforge.net/)。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T01:46:15.893

这是一个[众所周知且记录在案的功能 (pdf, p. 14)](http://www.cedricve.me/wp-content/uploads/2012/09/ObjC.pdf)

> 原则上，一个 Rectangle 类可以代替`setOrigin::` 为第二个参数实现一个没有标签的方法，该方法将被调用如下：
> 
> `[myRectangle setOrigin:30.0 :50.0]; // This is a bad example of multiple parameters`

但苹果[不鼓励任何人使用不带关键字的参数传递](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-1001751-BCIJHEDH)：

> 在所有参数之前使用关键字。
> `- (void)sendAction:(SEL)aSelector to:(id)anObject forAllCells:(BOOL)flag;`-> 对。
> `- (void)sendAction:(SEL)aSelector :(id)anObject :(BOOL)flag;`-> 错误。

为什么它被objective-C的创造者允许，我不知道。也许这与 Smalltalk 的传统有关。

# matplotlib - matplotlib，如何在不影响轴标签的情况下更改绘图大小

> ID：13485009
> 
> 赞同：0
> 
> 时间：2012-11-21T01:26:06.857
> 
> 标签：matplotlib

我想在 matplotlib 中绘制一个又宽又短的图。[我可以按照这个问题](https://stackoverflow.com/q/332289/1082727)的回答来操纵绘图的大小。

但是，如果绘图不够高，x 轴标签会消失。我想在保持轴标签可见的同时更多地挤压情节。

有没有办法在不摆脱轴标签的情况下操纵绘图的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:20:57.253

更改绘图大小后，运行[`tight_layout()`](http://matplotlib.org/users/tight_layout_guide.html). 请注意，这需要 matplotlib v1.1 或更高版本。如果你有旧版本的 matplotlib，你可以手动运行`subplot_tool()`或`subplots_adjust`调整绘图。

# python - 如何在 matplotlib 中设置轴的限制？

> ID：13485015
> 
> 赞同：1
> 
> 时间：2012-11-21T01:26:49.053
> 
> 标签：python, matplotlib, bounds, axes

我有这个代码：

```
ax = fig.add_axes([0.1, 0.1, 0.55, 0.8]) 
```

我想在`args.avg_window`ax 的 x 轴上设置一个下限。我尝试使用 xlim、set_xlim、set_xbound，现在添加`xrange=(args.avg_window, args.posts_limit)`到该函数调用，但似乎没有任何效果：

和

```
ax = fig.add_axes([0.1, 0.1, 0.55, 0.8], xrange=(args.avg_window, args.posts_limit)) 
```

我收到此错误：

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/Users/d3admin6/python_phpBB_scraper/analysis/liwc/plot_forum_emos.py", line 334, in <module>
    .format(args.xattr, args.yattr, window_str))
  File "/Users/d3admin6/python_phpBB_scraper/analysis/liwc/plot_forum_emos.py", line 247, in plot_emos_line
    ax = fig.add_axes([0.1, 0.1, 0.55, 0.8], xrange=(args.avg_window, args.posts_limit))
  File "/Library/Python/2.7/site-packages/matplotlib/figure.py", line 806, in add_axes
    a = projection_class(self, rect, **kwargs)
  File "/Library/Python/2.7/site-packages/matplotlib/axes.py", line 499, in __init__
    martist.setp(self, **kwargs)
  File "/Library/Python/2.7/site-packages/matplotlib/artist.py", line 1229, in setp
    func = getattr(o, funcName)
AttributeError: 'Axes' object has no attribute 'set_xrange' 
```

和

```
ax.set_xlim(left = args.avg_window) 
```

我收到此错误：

```
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/Users/d3admin6/python_phpBB_scraper/analysis/liwc/plot_forum_emos.py", line 335, in <module>
    .format(args.xattr, args.yattr, window_str))
  File "/Users/d3admin6/python_phpBB_scraper/analysis/liwc/plot_forum_emos.py", line 256, in plot_emos_line
    ax.set_xbound(lower=args.avg_window)
  File "/Library/Python/2.7/site-packages/matplotlib/axes.py", line 2477, in set_xbound
    self.set_xlim(upper, lower, auto=None)
  File "/Library/Python/2.7/site-packages/matplotlib/axes.py", line 2553, in set_xlim
    left, right = mtransforms.nonsingular(left, right, increasing=False)
  File "/Library/Python/2.7/site-packages/matplotlib/transforms.py", line 2567, in nonsingular
    if (not np.isfinite(vmin)) or (not np.isfinite(vmax)):
NotImplementedError: Not implemented for this type 
```

我做错了什么，我能做些什么来设置轴的界限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:20:26.357

在您的第一次调用中，这是一个错误的关键字参数：要设置 x 轴限制，您应该传递`xlim`给`add_axes`：

```
ax = fig.add_axes([0.1, 0.1, 0.55, 0.8], xlim=(args.avg_window, args.posts_limit)) 
```

之后设置轴限制

```
ax.set_xlim(left=args.avg_window) 
```

为我工作。也许您之前的代码出了问题，或者您的 matplotlib 版本中确实没有实现。我使用 1.2 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T23:01:18.283

您`args.avg_window`被存储为用户输入返回的字符串。在将其作为 matplotib 轴限制参数传递之前，您需要将其转换`int()`为 a，无论您想采用哪种方式。

```
set_xlim(int(args.avg_window), right=1) 
```

将设置最小 x 轴限制，同时保持最大值不变。

# cuda - cudaStreamSynchronize vs CudaDeviceSynchronize vs cudaThreadSynchronize

> ID：13485018
> 
> 赞同：30
> 
> 时间：2012-11-21T01:27:03.207
> 
> 标签：cuda

这三个功能有什么区别，尤其是最后两个？图书馆手册说

> 请注意，此函数已被弃用，因为它的名称不反映其行为。它的功能类似于不推荐使用的函数 cudaDeviceSynchronize()，应该使用它来代替。

但不太清楚是什么意思。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-21T03:28:20.007

这些都是*障碍*。障碍会阻止代码执行超出障碍，直到满足某些条件。

1.  [cudaDeviceSynchronize()](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__DEVICE_1g32bdc6229081137acd3cba5da2897779)暂停 CPU/主机线程（发出 cudaDeviceSynchronize 的线程）中的执行，直到 GPU 完成处理所有先前请求的 cuda 任务（内核、数据副本等）
2.  如您所见， [cudaThreadSynchronize()](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__THREAD__DEPRECATED_1g6e0c5163e6f959b56b6ae2eaa8483576)`cudaDeviceSynchronize`只是. Deprecated 只是意味着它现在仍然有效，但建议不要使用它（使用 cudaDeviceSynchronize 代替），将来可能会不受支持。但是`cudaThreadSynchronize`() 和`cudaDeviceSynchronize`() 是相似的。
3.  [cudaStreamSynchronize()](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__STREAM_1geb3b2f88b7c1cff8b67a998a3a41c179)类似于上述两个函数，但它会阻止 CPU 主机线程中的进一步执行，直到 GPU 完成处理所有先前请求*的在引用流中发出的*cuda 任务。所以`cudaStreamSynchronize`() 将流 id 作为其唯一参数。当 CPU 代码执行继续超出此障碍时，在其他流中发出的 cuda 任务可能会或可能不会完成。

# javascript - 谷歌浏览器，同源策略杀死 Tampermonkey 脚本

> ID：13485020
> 
> 赞同：2
> 
> 时间：2012-11-21T01:27:13.627
> 
> 标签：javascript, jquery, google-chrome, greasemonkey, tampermonkey

我自己编写了一个脚本，当我访问它时，它使用 jQuery Ajax 函数从网页记录一些数据。它需要一些信息并将其发送到我的本地 Apache 主机以保存在文本文件中。

*它工作了几个月，但我现在收到与此同源策略*相关的错误（我知道它是如何工作的及其用途），并且浏览器现在正在结束显示此消息的脚本执行：

```
The page at https://www.website.com/ displayed insecure content from
http://127.0.0.1:8081/whatever.php 
```

紧随其后的是：

```
Refused to connect to connect 'http://127.0.0.1:8081/whatever.php?arguments=1' because it 
violates the following Content Security Policy directive: "connect-src
https://www.website.com/* https://*.website.com/
https://*.website.net xhr: error: SECURITY_ERR: DOM Exception 18 
```

最后一个域在错误消息中显示为*红色。*一个奇怪的细节是，在*Tampermonkey*上的 JavaScript 代码中，我有`@includes`这些域中的一个，但没有红色标记的域。我已经添加并测试了它，但是没有用。

我在 Google 上找到的每个讨论都告诉我如何禁用此策略，但如果您正在开发扩展程序，那不是我的情况。

这段代码只会在我的机器上运行，我无意以任何方式分发它，因此任何解决方案都会受到赞赏，即使解决方案是直接更改浏览器配置。

如果这有用，我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:28:56.660

[Tampermonkey Beta 将其修复`GM_xmlHttpRequest`为独立于页面的 CSP。](http://tampermonkey.net/changelog.php?version=2.9.2952&ext=gcal)
不幸的是，它无法修复 jQuery AJAX 请求，因为它不知道要联系哪些站点。

如果您联系的页面是***Facebook***，则[CSP 仅发送到 Chrome 21-23，而不是 Chrome 24。](http://socialfixer.com/blog/2012/12/10/update-social-fixer-7-321-resolves-browser-errors/)因此您可以使用[Tampermonkey 的`@user-agent`标签](http://tampermonkey.net/documentation.php#@user-agent)来模拟 Chrome 24。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T01:31:28.030

在您的本地服务器上，`whatever.php`您将数据发送到，设置[**CORS**](https://developer.mozilla.org/en/docs/HTTP_access_control)（即发送标头`Access-Control-Allow-Origin: *`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:24:48.853

你不需要来自上面的任何东西。您在 ajax 调用中所要做的就是添加

> script.php?callback=?&your_parametars_here

在 php 文件中你只需要在检索数据时添加这个：

```
echo $_GET['callback'].$your_data_here 
```

就这样！

# c# - 即时编译和运行程序

> ID：13485026
> 
> 赞同：2
> 
> 时间：2012-11-21T01:28:24.240
> 
> 标签：c#, csc

我有一个奇怪的要求，我被要求在 VBScript 中编写某个验证脚本，因为它是纯文本的。但我在 c# 中更舒服。那么无论如何在Task Scheduler中安排它，以便编译器编译程序（.cs文件中的源代码）并即时运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T02:13:13.417

作为一个单独的自编译 CMD 批处理文件，这真的很容易。这是纯文本且可运行的（来自我的博客条目 - [Dynamically Create an Executable from user-data Text](http://danieljsinclair.wordpress.com/2012/07/20/a-couple-of-quick-and-dirty-ways-to-bootstrap-bare-ec2-instances/ "从用户数据文本动态创建可执行文件")）。

您可以直接将此文本文件作为批处理文件调用，它将作为 EXE 运行。只需使用 .CMD 扩展名（包括所有 C# 代码）保存文件并正常运行。

```
/* This section is run in batch file mode
%FrameworkDir%%FrameworkVersion%\csc.exe /nologo /out:bootstrap.exe /Reference:%FrameworkDir%%FrameworkVersion%\System.Net.dll "%0"
goto end
*/

using System;

static class Program
{
    static void Main(string[] argv)
    {
        if (argv.Length > 0)
            Console.Write(argv[0]);
        Console.WriteLine();
    }
}
/*
:end

REM ** Run the program
BootStrap.exe "Hello world!"
REM */ 
```

注释允许您将`/* */`批处理文件命令自己编译，当然它们会被 C# 编译器忽略。批处理 (CMD) 文件会跳过错误到下一行，所以这个文件运行起来就像一个 EXE，它是文本。作为改进，您可能希望将`/out`目标更改为 %TEMP% 中的某个位置。

**[更新]**更简单的 Hello World 示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T01:30:34.250

您正在寻找的是[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)。

这允许您从源代码编译或评估 C# 代码并运行它。它可以在运行中和从另一个进程中完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T01:40:35.473

假设您希望在命令行中的行为类似于 VBScript/JavaScript，它们的行为类似于普通的 EXE 文件。要查看 JS/VBS 是如何执行的，请检查`assoc .js`和`ftype JSType`命令的输出。

基本上，您想创建 CMD/BAT 文件，该文件将启动 CSC 以编译您的 .cs 文件，然后使用 CMD 文件的所有原始参数运行可执行文件。然后将此新 CMD 文件与 .CS 文件类型相关联。配置关联检查`ftype /?`提供了大量信息。

请注意，使用自定义扩展名而不是默认的 .cs（即 .cssript）可能是个好主意，以避免与常规 .cs 文件混淆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T01:47:38.153

[这里](http://www.developerfusion.com/code/4590/executing-a-cs-file/)有一个很好的例子， 提供了源代码。本质上，您创建了一个运行器，它是一个执行您的 cs 文件的 exe。

runner 是一个控制台应用程序。您只需将您的 CS 文件作为参数传入。一个警告是你必须将你的类命名为“CSScript”。但它看起来像下面的课程。该链接使用[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)类即时编译您的源代码。

```
using System;
using System.Windows.Forms;

class CScript {
    public void Main() {
        // your dynamic code here
    }
} 
```

该示例通过动态编译传入的cs文件来执行源代码，然后使用反射调用Main Method。

void ExecuteSource(String sourceText) { CSharpCodeProvider codeProvider = new CSharpCodeProvider();

```
 ICodeCompiler compiler = codeProvider.CreateCompiler();
        CompilerParameters parameters = new CompilerParameters();
        parameters.GenerateExecutable = false;
        parameters.GenerateInMemory = true;
        parameters.OutputAssembly = "CS-Script-Tmp-Junk";
        parameters.MainClass = "CScript.Main";
        parameters.IncludeDebugInformation = false;

        foreach (Assembly asm in AppDomain.CurrentDomain.GetAssemblies()) {
            parameters.ReferencedAssemblies.Add(asm.Location);
        }

        CompilerResults results = compiler.CompileAssemblyFromSource(parameters, sourceText);

        if (results.Errors.Count > 0) {
            string errors = "Compilation failed:\n";
            foreach (CompilerError err in results.Errors) {
                errors += err.ToString() + "\n";
            }
            MessageBox.Show(errors, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }   else {
            object o = results.CompiledAssembly.CreateInstance("CScript");
            Type type = o.GetType();
            MethodInfo m = type.GetMethod("Main");
            m.Invoke(o, null);
            if (File.Exists("CS-Script-Tmp-Junk")) { File.Delete("CS-Script-Tmp-Junk"); }
        }
    } 
```

要调用您，请运行以下命令

```
CS-SCript.exe yourcsfile.cs 
```

# extjs - 尝试使用视图时出现 extjs 4 错误

> ID：13485027
> 
> 赞同：1
> 
> 时间：2012-11-21T01:28:33.043
> 
> 标签：extjs, view, namespaces, controller, extjs4

使用 extjs 4 尝试在我的视口中使用视图时出现错误。我认为这是如何定义视图/包含视图的问题。但是，我找不到我做错了什么。我知道这是一个简单的错误，我只是不明白。我将在下面发布代码。错误是

类型错误：名称未定义

我想使用的视图：

```
Ext.define('MC.view.SideBar', {
    extend: 'Ext.Container',
    alias: 'widget.SideBar',
    items:[
        { xtype: 'panel',
        bodyPadding: 5,
        html:'facebook'
        },
        { xtype: 'panel',
        bodyPadding: 5,
        html:'twitter?'
        }

    ]
    //... more configuration ...
}); 
```

视口

```
Ext.create('Ext.container.Viewport', {
    layout: {
        //align:'center',
        pack:'center',
        type:'hbox',
        align:'stretch',
        border:true
    },
    items: [
        {xtype:'panel',
            layout:{
            type:'vbox',
            align:'stretch',
            pack:'start'
            },
            border:true,
            width: '80%',
            items:[
                {xtype:'panel',
                    border:true,
                    flex:2,
                    //width:'100%',
                    html:'toolbar/logo'
                },
                {xtype:'panel',
                    border:true,
                    flex:8,

                    layout:{
                        type:'hbox',
                        align:'stretch',
                        pack:'start'
                    },
                    items: [
                        //{xtype:'SideBar'},
                        **{xtype:'SideBar',**
                            flex:22,
                            height:'100%'
                        },
                        {xtype:'panel',
                            flex:88,
                            height:'100%'
                        }
                    ],

                    html:'lower'
                }
            ]
        }
    ]
}); 
```

引用视图的控制器

```
Ext.define('MC.controller.Monolith', {
    extend: 'Ext.app.Controller',

    views: [
        'TopBar', 'SideBar'
    ],

    init: function() {
        console.log('Initialized Monolith controller! This happens before the Application launch function is called');
    }
}); 
```

最后是申请文件

```
Ext.application({
    name: 'MC',
    //appFolder: 'app', 
    autoCreateViewport: true,
    controllers: [
        'Monolith'
    ],
    //models: [],
    //stores: [],
    launch: function() {
        console.log('mesacart');

        // This is fired as soon as the page is ready
    }
}); 
```

我已经尝试了我能想到的一切，但它必须很简单，因为这里还没有太多代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:26:13.693

对于视图和控制器，在声明它们时**不需要**指定它们的 'MC.controller' 和 'MC.view' 前缀。

所以你最终得到：

```
views: [
        'TopBar', 'SideBar'
    ], 
```

等等。

编辑：当您要求自动创建视口时，您需要将视口类定义为 MC.view.Viewport 在 jsfiddle 中查看您的完整代码示例：http: [//jsfiddle.net/dbrin/qW4hR/](http://jsfiddle.net/dbrin/qW4hR/)

```
Ext.define('MC.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: {...} 
```

# jsf - JSF2 h:selectOneMenu 在验证失败时显示旧值

> ID：13485028
> 
> 赞同：6
> 
> 时间：2012-11-21T01:28:33.727
> 
> 标签：jsf, jsf-2, facelets

我有一个包含几个输入字段和一个选择一个菜单的表单。所有字段都是必需的 =“true”、名字、姓氏、电子邮件地址、密码、国家。

测试用例#1：1）在所有输入字段中输入值，离开firstName字段不输入任何值，
选择一个国家（例如：美国）并提交表单，我们可以看到firstName字段必填的错误消息。

2) 保持表格原样，离开firstName字段不输入任何值，然后选择国家“选择一个”，然后提交表格。我们可以看到名字和国家/地区字段的错误消息，但是在下拉列表中它没有显示“选择一个”，它显示了美国（之前的选择）。

我对输入字段有同样的问题，但我用转换器解决了。有没有办法解决这个问题。我在 stackoverflow 中发表了几篇文章，才知道这是 mojarra 中的一个错误。

这是我的代码...

## 用户注册.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" >      
 <h:body>
    <h:form id="registrationForm">     
    <h:messages layout="table" infoClass="infoMsgs" errorClass="errMsgs"/>

    <table>
        <tr>
            <td>First Name:</td>
            <td>
                <h:inputText size="40" maxlength="100" 
                             required="true" 
                             styleClass="#{component.valid ? '' : 'text_error'}"
                             value="#{registrationAction.firstName}" />
            </td>
        </tr>
        <tr>
            <td>Last Name:</td>
            <td>
                <h:inputText size="40" maxlength="100" 
                             required="true" 
                             styleClass="#{component.valid ? '' : 'text_error'}"
                             value="#{registrationAction.lastName}" />
            </td>
        </tr>
        <tr>
            <td>Email Address:</td>
            <td>
                <h:inputText size="40" maxlength="100" 
                             required="true" 
                             styleClass="#{component.valid ? '' : 'text_error'}"
                             value="#{registrationAction.emailAddress}" />
            </td>
        </tr>
        <tr>
            <td>Password:</td>
            <td>
                <h:inputSecret size="20" maxlength="15" 
                             required="true" 
                             styleClass="#{component.valid ? '' : 'text_error'}"
                             value="#{registrationAction.password}" />
            </td>
        </tr>
        <tr>
            <td>Country:</td>
            <td>
                <h:selectOneMenu id="yourCountry" name="yourCountry"    
                                 value="#{shortRegistrationAction.shortRegistrationForm.selectedCountry}"
                                 required="true" 
                                 styleClass="#{component.valid ? '' : 'text_error'}">
                    <f:selectItem itemValue="#{null}" itemLabel="-Select One-" />
                    <f:selectItems value="#{registrationAction.countryList}" />
                </h:selectOneMenu>
            </td>
        </tr>
        <tr>
            <td>&#160;</td>
            <td>
                <h:commandButton name="RegisterButton" id="RegisterButton" 
                                 styleClass="submitbutton"
                                 value="Register"
                                 action="#{registrationAction.registerUser}" />
            </td>
    </table>
    </h:form>
</h:body>
</html> 
```

## 注册操作.java

```
package com.ebiz.web.bean;

import java.io.Serializable;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;
import com.ebiz.service.ICountryService;
import com.ebiz.service.IUserService;
import com.ebiz.vo.UserVO;
import org.apache.log4j.Logger;

@ManagedBean(name = "registrationAction")
@ViewScoped
public class RegistrationAction implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger log = Logger.getLogger(RegistrationAction.class);

    @ManagedProperty("#{countryService}")
    private ICountryService countryService;

    @ManagedProperty("#{userService}")
    private IUserService userService;

    private String firstName;
    private String lastName;
    private String emailAddress;
    private String password;
    private String selectedCountry;
    private List<String> countryList;

    @PostConstruct
    public void init(){
        countryList = countryService.getCountryList();
    }

    public void registerUser() {

        UserVO userVO = new UserVO();
        userVO.setFirstName(firstName);
        userVO.setLastName(lastName);
        userVO.setEmailAddress(emailAddress);
        userVO.setPassword(password);
        userVO.setCountry(selectedCountry);

        userService.registerUser(userVO);

    }
} 
```

## InputTextTrimmer.java

```
package com.ebiz.web.converter;

import javax.faces.component.EditableValueHolder;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

@FacesConverter(forClass=String.class)
public class InputTextTrimmer implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        //return value != null ? value.trim() : null;
         if (value == null || value.trim().isEmpty()) {
             if (component instanceof EditableValueHolder) {
                 ((EditableValueHolder) component).setSubmittedValue(null);
                 ((EditableValueHolder) component).resetValue();
             }
             return null;
         }
         return value;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return (value == null) ? null : value.toString();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:29:41.400

经过长时间的研究，我没有找到在 JSF 中实现这一点的任何方法。所以我使用jQuery来处理它的客户端，可能这个答案不是最好的解决方案，但至少对需要解决方案的人有用。

这里下拉值将显示一个旧值，但它仍然显示下拉的验证错误。在上面的 xhtml 页面中，如果您查看下拉菜单部分，

```
 <h:selectOneMenu id="yourCountry" name="yourCountry"    
                     value="#{shortRegistrationAction.shortRegistrationForm.selectedCountry}"
                     required="true" 
                     styleClass="#{component.valid ? '' : 'text_error'}">
             <f:selectItem itemValue="#{null}" itemLabel="-Select One-" />
             <f:selectItems value="#{registrationAction.countryList}" />
</h:selectOneMenu> 
```

即使它显示验证失败情况的旧值，styleClass 仍然会变为 text_error。关闭标签后，我在我的 xhtml 页面中添加了以下代码`<h:body>`。ie ( `</h:body>`) 它只适用于这个特定 xhtml 页面中的所有下拉菜单，但是我们可以将它放在一个公共位置，如 commonTemplate.xhtml 以在所有页面上执行它。

```
 <script>
    //<![CDATA[
        jQuery(document).ready(function() {
            jQuery("select").each(function () {
                var dropDownClass = jQuery(this).attr('class');
                if(dropDownClass == 'text_error'){
                    jQuery(this).val('');
                }
              });
        });
    //]]>
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:42:25.660

看看下面的**BalusC**博客文章[Reset non-processed input components on ajax update](http://balusc.blogspot.co.il/2012/03/reset-non-processed-input-components-on.html)

您可以将[OmniFaces](http://omnifaces.org)添加到您的项目中并使用它的[ResetInputAjaxActionListener](http://omnifaces.org/docs/javadoc/current/org/omnifaces/eventlistener/ResetInputAjaxActionListener.html)

所以你必须更新你的代码（你最好`f:ajax`也使用）：

```
<h:commandButton name="RegisterButton" id="RegisterButton" 
    styleClass="submitbutton"
    value="Register"
    action="#{registrationAction.registerUser}">
    <f:ajax execute="@form" render="@form" />
    <f:actionListener type="org.omnifaces.eventlistener.ResetInputAjaxActionListener"/>
</h:commandButton> 
```

另外，看看这个**BalusC** 答案[如何在发生验证错误后使用 primefaces ajax 填充文本字段？](https://stackoverflow.com/a/6845800/617373)

# jquery - 使用 onchange 事件在 Jquery 中存储数据

> ID：13485029
> 
> 赞同：0
> 
> 时间：2012-11-21T01:28:47.000
> 
> 标签：jquery, html

扩展我的最后一个问题，如何从下拉列表中存储最后选择的值，但每次用户更改他的选择时，我都会保留（*上一个选择的值*）和（*当前选择的值*）。我需要使用数组并使用推送/弹出还是有其他方法可以做到这一点？

```
$(document).on('change', 'select[name=options]', function() {

var prev_selected =  $(this).val();
$(this).data('prev_selected',prev_selected);
alert(prev_selected );

//alert(current_selected );

}); 
```

**HTML**

```
<table id="Final">
<thead>
<th>Tie</th> <th>Pie</th><th>Lie</th>
</thead>

<tr>
<td><select class="Member" name="options">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">ball</option>
    <option value="4">4</option></td>
    <td>
    <select class="Member" name="options" price="200">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option></td>

    <td>
    <select class="Member" name="options" price="200">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">shoe</option>
    <option value="4">4</option></td>

    </tr>

    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:41:42.620

您基本上想在焦点上捕获先前的值，这发生在更改之前。

这是回答您的问题的类似帖子：[在更改之前获取选择的价值（下拉菜单）](https://stackoverflow.com/questions/4076770/getting-value-of-select-dropdown-before-change)

```
(function () {
    var previous;

    $("select").focus(function () {
        // Store the current value on focus, before it changes
        previous = this.value;
    }).change(function() {
        // Do something with the previous value after the change
        alert(previous);
    });
})(); 
```

# sql - 奇怪的 PostgreSQL“对于类型字符变化的值太长（500）”

> ID：13485030
> 
> 赞同：78
> 
> 时间：2012-11-21T01:28:49.420
> 
> 标签：sql, database, django, postgresql, postgresql-9.1

我有一个 Postgres 模式，它看起来像：

![在此处输入图像描述](../Images/3d430d23178ef3299f365a3f5d3ab14e.png)

问题是，每当我在描述列中保存超过 500 个字符的文本时，我都会收到错误消息：

```
value too long for type character varying(500) 
```

在 Postgres 的文档中，它说 type text 可以有无限的字符。

我正在使用 postgresql-9.1。

该表是使用 Django 1.4 生成的，模型中的字段类型是 TextField，如果这有助于进一步解释问题。

关于为什么会发生这种情况以及我能做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-21T01:40:31.317

通过指定列，因为`VARCHAR(500)` 您设置了明确的 500 个字符限制。你自己可能没有明确地做到这一点，但 Django 已经在某个地方为你做到了。当您没有显示您的模型、完整的错误文本或产生错误的查询时，告诉您在哪里很难。

如果您不想要，请使用不合格的`VARCHAR`，或使用`TEXT`类型。

`varchar`并且`text`长度仅受系统对列大小的限制（大约 1GB）和您的内存限制。但是，添加长度限定符以`varchar`手动设置较小的限制。以下所有内容在很大程度上是等效的：

```
column_name VARCHAR(500)

column_name VARCHAR CHECK (length(column_name) <= 500) 

column_name TEXT CHECK (length(column_name) <= 500) 
```

唯一的区别在于如何报告数据库元数据以及违反约束时引发的 SQLSTATE。

在prepared statement参数、函数调用等中一般不遵守长度约束，如图：

```
regress=> \x
Expanded display is on.
regress=> PREPARE t2(varchar(500)) AS SELECT $1;
PREPARE
regress=> EXECUTE t2( repeat('x',601) );
-[ RECORD 1 ]-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
?column? | xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
```

并在显式转换中导致截断：

```
regress=> SELECT repeat('x',501)::varchar(1);
-[ RECORD 1 ]
repeat | x 
```

所以我认为您*正在*使用一`VARCHAR(500)`列，并且您正在查看错误的表或错误的数据库实例。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-21T01:33:24.083

字符变化不同于文本。尝试运行

```
ALTER TABLE product_product ALTER COLUMN code TYPE text; 
```

这会将列类型更改为文本，这仅限于一些非常大量的数据（您可能永远不会真正点击它。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-20T11:46:18.393

我们有同样的问题。我们解决了在实体属性定义中添加“长度”的问题：

```
@Column(columnDefinition="text", length=10485760)
private String configFileXml = ""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T11:35:49.663

我的问题是我在表中有数据，所以 PostgreSQL 不允许我对我的表进行更改！

将其更改为更大的价值！

# asp.net - 将生成的 html 文档保存到 ASP.NET 中的特定文件夹

> ID：13485032
> 
> 赞同：0
> 
> 时间：2012-11-21T01:28:56.277
> 
> 标签：asp.net, html, file, save

因此，我编写了一个简单的程序，该程序根据用户对多个字段的输入创建一个 html 文档。目前，当用户按下按钮时，它会生成文档并使用以下内容自动下载到用户的机器上：

```
 Response.ContentType = "text/plain";
        Response.Write(HTML.ToString());
        Response.Flush();
        Response.End(); 
```

但是，当用户按下按钮时，我希望将文件写入用户机器上的文件夹。所以，假设我希望他们按下按钮，它会自动将文件写入他们的桌面。这段代码会是什么样子？（C＃）

谢谢，

ps我一直在尝试这样的事情，但没有运气：

```
 string filename = Server.MapPath("~/C:/Users/Sean/Desktop/new.html");
            System.IO.StreamWriter textWriter = default(System.IO.StreamWriter);
            textWriter = System.IO.File.AppendText(filename);
            textWriter.Write(HTML);
            textWriter.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:21:50.070

使用 ASP.Net，您不能强制用户将任何文件保存在任何特定位置。此外，您希望用户保存的文件是 HTML，它将直接在浏览器上呈现，即不会提示用户将其保存在他们的机器上。

因此，要回答您的问题，您不能将任何文件自动保存到用户的机器上。用户必须进行一些手动干预（以选择他/她想要保存的路径。）

# sql - Access 2003 查询困境

> ID：13485034
> 
> 赞同：-1
> 
> 时间：2012-11-21T01:29:07.970
> 
> 标签：sql, ms-access

我很难为每个用户返回多个值。我尝试了 Select Distinct 的变体，但无济于事。我需要我的代码只为每个用户 ID 重新调整一个值。

```
SELECT Roster.UserID, 
    EventLog.Type, 
    IIf([EventLog]![LogType] Like "Acc*" And [EventLog]![Action] Like "Wri*",[EventLog]![Date],Date()-183) AS [Review Date]
FROM EventLog 
INNER JOIN Roster 
    ON EventLog.UserID = Roster.UserID
GROUP BY Roster.UserID, 
    EventLog.Type, 
    IIf([EventLog]![LogType] Like "Acc*" And [EventLog]![Action] Like "Wri*",[EventLog]![Date],Date()-183)
HAVING (((EventLog.Type) Like "Att*")); 
```

当它们满足第一个条件时，代码将从 IIf 返回两个值。我如何限制其中一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:24:34.500

You're getting multiple values per user because you've listed multiple fields in your `GROUP BY` clause:

```
 GROUP BY Roster.UserID, 
        EventLog.Type, 
        IIf([EventLog]![LogType] Like "Acc*" And 
[EventLog]![Action] Like "Wri*",[EventLog]![Date],Date()-183) 
```

I'm not sure why you're grouping at all, as you're not performing any aggregate functions. Would `SELECT DISTINCT` work?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:21:52.010

感谢反馈的人。根据 Beth 的回复并清理我的表和查询以发送 dBase 的副本，问题似乎只需添加少量代码即可自行解决。

```
SELECT Roster.UserID, 
EventLog.Type, 
Max(IIf(EventLog!LogType Like "Acc*" And EventLog!Action Like "Wri*",EventLog!Date,Date()-183)) AS [Review Date]
FROM EventLog 
INNER JOIN Roster 
ON EventLog.UserID = Roster.UserID
GROUP BY Roster.UserID,
EventLog.Type
HAVING (((EventLog.Type) Like "Att*")); 
```

清理贝丝的多场工作真是太棒了！！！

# ios - Django 和 iOS 中的 CSRF 令牌

> ID：13485035
> 
> 赞同：11
> 
> 时间：2012-11-21T01:29:09.670
> 
> 标签：ios, django, ios6, tastypie, django-csrf

所以我试图了解在这里做什么......我正在从 iOS 对我的 Django 服务器进行 POST 调用，并且我不断收到 403 错误（无效的 CSRF 令牌）。我正在考虑实现一个将返回令牌的函数（您需要登录才能访问该函数），然后将令牌添加到我的 POST 调用中。

现在......我不明白这样做有什么意义？如果我使用 TastyPie 并且所需的登录名是 APIKey ......我应该免除 csrf 检查吗？

为了确保我理解正确...... CSRF 是每个用户会话生成的吗？因此，如果我不使用 Cookies，就不需要 CSRF 了吗？

人们通常如何将他们的 Django 服务器与 iOS 一起使用并进行此类 POST 调用？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T16:19:47.043

你是对的：如果你不使用 cookie 来管理你的会话，你就不需要 CSRF 保护。CSRF 之所以有效，是因为会话 cookie 会自动附加到请求中；访问令牌不是。

我个人觉得[这篇文章](http://sitr.us/2011/08/26/cookies-are-bad-for-you.html)非常有用。这绝对值得一读，并且可能会回答你的很多问题。

至于美味派：它允许[SessionAuthentication](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#sessionauthentication)。如果您允许在 sweetpie 中进行会话身份验证，我建议您研究一种保护您的用户免受 CSRF 攻击的方法。对于其他身份验证方案，这似乎没有必要。据我所知，Dmitry 关于默认情况下禁用 CSRF 是正确的，这意味着您收到 403 错误很奇怪。也许还有其他事情发生。尝试将视图包装在 @csrf_exempt 中。

至于 CSRF 令牌，它们也被称为*会话无关的随机数*。它们应该是永久性的，但您可能知道这对于 cookie 是不可能的。无论如何，这意味着 CSRF cookie 通过会话持续存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T04:18:58.107

没错，CSRF 在这种情况下没有多大意义，因为它的目的是保护用户免受浏览器中的数据篡改。

我相信 Tastypie 默认在其视图上禁用 CSRF。

# java - 日期格式Java？

> ID：13485038
> 
> 赞同：0
> 
> 时间：2012-11-21T01:30:20.947
> 
> 标签：java, date

我有 3 个用于月、日和年的 int 变量。

如何将它们转换为`java.util.Date`对象（或其他）。

例如，月 = 12，日期 = 20，年 = 2011

它应该以中等日期格式打印：`**Dec 20, 2011**`

非常感谢！

在这里编辑我的尝试：

```
String yourBirthDay = Integer.toString(birthMonth) + "." + Integer.toString(birthDay) + "." + Integer.toString(birthYear);
        DateFormat format = DateFormat.getDateInstance(DateFormat.SHORT);

        try {
            Date date = format.parse(yourBirthDay);
            System.out.println("Your birth date is : " + date.toString());

        } catch (ParseException pe) {
            System.out.println("ERROR: could not parse date in string \""
                    + yourBirthDay + "\"");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T01:42:52.950

我使用[Calendar.set(int year,int month, int date)](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)做了这个小测试：

```
@Test
public void testDate() throws ParseException {

    int year = 2011, month = 12, date = 20;

    Calendar calendar = Calendar.getInstance();

    calendar.set(year, month - 1, date);

    Date javaDate = calendar.getTime();

    // SimpleDateFormat format = new SimpleDateFormat("MMM dd, yyyy");

    DateFormat format = DateFormat.getDateInstance(DateFormat.MEDIUM);

    String stringDate = format.format(javaDate);

    assertEquals("Dec 20, 2011", stringDate);

} 
```

您需要从月份中删除 1，因为 java.util.Calendar 使用从零开始的月份。

# c - c中for循环的分段错误

> ID：13485039
> 
> 赞同：1
> 
> 时间：2012-11-21T01:30:23.463
> 
> 标签：c

我正在写一个磁力计采样功能。

它按预期经历循环，其中 samplesPerAxis = 33 且 MAX_AXES 为 3 且 MAX 为 999

如您所见，在 for 循环完成后发生分段错误，但最终的“结束”不打印。

```
void createSamplingData(){
    int i, indexOfValue,  numaxis=0, sampling_value ;
    printf("%i %i %i\n", magmin[0], magmin[1], magmin[2]);
    printf("%i %i %i\n", magmax[0], magmax[1], magmax[2]);

    for (numaxis = 0; numaxis < MAX_AXES; numaxis++){
        printf("beginAxis: %i\n", numaxis);

        sampling_value = magmin[numaxis];
        for (i = samplesPerAxis*numaxis ; i < samplesPerAxis*(numaxis+1) ; i++){
            indexOfValue = findIndexOfClosestValue(sampling_value, numaxis);
            printf("%i: %i => %i\t", i, sampling_value, indexOfValue);
            MagSamples[i][0] = MagInput[indexOfValue][0];
            MagSamples[i][1] = MagInput[indexOfValue][1];
            MagSamples[i][2] = MagInput[indexOfValue][2];            
            printf("%i %i %i\n", MagSamples[i][0], MagSamples[i][1], MagSamples[i][2]);
            sampling_value = sampling_value + (magmax[numaxis]-magmin[numaxis])/samplesPerAxis;
        // creates and even range between mag in min in each axis
        }
        printf("end axis\n");
    }
    printf("\nend");
} 
```

我得到的输出：...

```
beginAxis: 0
0: 32648 => 263         32648 32760 32916
1: 32656 => 258         32656 32724 32888
2: 32664 => 130         32664 32754 32898
...
29: 32880 => 488    32880 32774 32804
30: 32888 => 469    32888 32706 32822
31: 32896 => 990    32896 32752 32812
32: 32904 => 973    32904 32808 32844
end axis
beginAxis: 1
33: 32624 => 463    32790 32624 32906
34: 32631 => 685    32784 32632 32884
35: 32638 => 652    32756 32638 32926
36: 32645 => 465    32833 32645 32867
...
63: 32834 => 601    32690 32834 32930
64: 32841 => 597    32689 32841 32923
65: 32848 => 627    32690 32848 32914
end axis
beginAxis: 2
66: 32769 => 511    32793 32749 32769
67: 32777 => 512    32785 32755 32777
68: 32785 => 520    32769 32731 32785
69: 32793 => 504    32853 32707 32793
...
98: 33025 => 86 32805 32775 33025
end axis

Segmentation fault: 11 
```

这是怎么回事？

编辑： samplesPerAxis 定义为

```
#define samplesPerAxis 33 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:18:27.350

作为一种猜测，我会说故障在功能之外。函数以打印结束

```
 printf("\nend"); 
```

注意没有尾随的'\n'，所以“end”直到稍后才会被刷新。因此，您在输出中看不到它。同时，您继续并遇到故障。

编辑：

```
i think you are right. Could you elaborate on how the flush would 
process with the trailing \n? 
```

该`printf`函数会缓冲您发送的`stdout`内容并在遇到换行符“\n”（在您给它的内容中）时将其刷新（即发送到终端）。要在不添加换行符的情况下强制刷新，可以使用`fflush(stdout);`.

# performance - 使用 gamma 函数实现嵌套循环的更快方法

> ID：13485040
> 
> 赞同：3
> 
> 时间：2012-11-21T01:30:28.253
> 
> 标签：performance, matlab, loops, integral

我正在尝试评估以下积分：

![在此处输入图像描述](../Images/f43ea4e1c59c7d052a8ceb3f2467fee1.png)

我可以找到以下多项式的区域，如下所示：

```
pn =

   -0.0250    0.0667    0.2500   -0.6000         0 
```

首先使用辛普森规则积分

```
fn=@(x) exp(polyval(pn,x));

area=quad(fn,-10,10);
fprintf('area evaluated by Simpsons rule : %f \n',area) 
```

结果是`area evaluated by Simpsons rule : 11.483072` Then 使用以下代码使用 gamma 函数评估上述公式中的总和

```
a=pn(1);b=pn(2);c=pn(3);d=pn(4);f=pn(5);
area=0;
result=0;
for n=0:40;
    for m=0:40;
        for p=0:40;
            if(rem(n+p,2)==0)
                result=result+ (b^n * c^m * d^p) / ( factorial(n)*factorial(m)*factorial(p) ) *...
                    gamma( (3*n+2*m+p+1)/4 ) / (-a)^( (3*n+2*m+p+1)/4 );
            end
        end
    end
end

result=result*1/2*exp(f) 
```

这将返回 11.4831。`quad`该函数的结果或多或少相同。现在我的问题是我是否有可能摆脱这个嵌套循环，因为我将构建累积分布函数，以便我可以使用逆 CDF 变换从这个分布中获取样本。（为了构建 cdf，我将使用`gammainc`不完整的 gamma 函数而不是`gamma`）

我需要从可能具有不同多项式系数的密度中进行采样，并且速度是我关心的问题。我已经可以使用蒙特卡洛方法从这样的密度中采样，但我想看看我是否可以使用密度中的精确采样来加快速度。非常感谢您提前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T02:19:43.860

一个人可以做几件事。最简单的是避免调用阶乘。相反，可以使用以下关系

```
factorial(n) = gamma(n+1) 
```

由于 gamma 似乎实际上比调用阶乘更快，因此您可以在那里节省一点。更好的是，你可以

```
>> timeit(@() factorial(40))
ans =
      4.28681157826087e-05

>> timeit(@() gamma(41))
ans =
      2.06671024634146e-05

>> timeit(@() gammaln(41))
ans =
      2.17632543333333e-05 
```

更好的是，一个人可以在一次调用 gammaln 时完成所有 4 次调用。例如，想想这是做什么的：

```
gammaln([(3*n+2*m+p+1)/4,n+1,m+1,p+1])*[1 -1 -1 -1]' 
```

请注意，如果您的数字足够大，此调用不会出现溢出问题。而且由于 gammln 是矢量化的，所以一个调用很快。计算 4 个值所花费的时间比计算 1 个值要多一点。

```
>> timeit(@() gammaln([15 20 40 30]))
ans =
      2.73937416896552e-05

>> timeit(@() gammaln(40))
ans =
      2.46521943333333e-05 
```

不可否认，如果你使用 gammaln，你需要在最后调用 exp 来恢复最终结果。但是，您也可以通过一次调用 gamma 来做到这一点。或许是这样的：

```
g = gamma([(3*n+2*m+p+1)/4,n+1,m+1,p+1]);
g = g(1)/(g(2)*g(3)*g(4)); 
```

接下来，您可以在 p 的内部循环中更有创意。而不是一个完整的循环，再加上一个测试来忽略你不需要的组合，为什么不这样做呢？

```
for p=mod(n,2):2:40 
```

该语句将仅选择那些本来会使用的 p 值，因此现在您可以完全删除 if 语句。

以上所有内容将为您提供我猜想是您的循环速度提高了 5 倍。但它仍然有一组嵌套循环。通过一些努力，您也可以改进它。

例如，与其多次计算所有这些阶乘（或伽马函数），不如执行一次。这应该有效：

```
a=pn(1);b=pn(2);c=pn(3);d=pn(4);f=pn(5);
area=0;
result=0;
nlim = 40;
facts = factorial(0:nlim);
gammas = gamma((0:(6*nlim+1))/4);
for n=0:nlim
  for m=0:nlim
    for p=mod(n,2):2:nlim
      result = result + (b.^n * c.^m * d.^p) ...
         .*gammas(3*n+2*m+p+1 + 1) ...
         ./ (facts(n+1).*facts(m+1).*facts(p+1)) ...
         ./ (-a)^( (3*n+2*m+p+1)/4 );
    end
  end
end

result=result*1/2*exp(f) 
```

在我的机器上的测试中，我发现你的三重嵌套循环需要 4.3 秒才能运行。我上面的版本产生了相同的结果，但只需要 0.028418 秒，加速大约为 150 比 1，尽管有三重嵌套循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T02:14:10.493

好吧，甚至无需更改您的代码，您就可以安装来自 Microsoft 的 Tom Minka 的名为[lightspeed](http://research.microsoft.com/en-us/um/people/minka/software/lightspeed/)的出色软件包，它用更快的版本替换了一些内置的 matlab 函数。我知道有一个替代品`gammaln()`。

您将获得非平凡的速度改进，尽管我不确定多少，而且安装起来很简单。

# twitter-bootstrap - Bootstrap 流体布局在小屏幕上的保留比例

> ID：13485043
> 
> 赞同：5
> 
> 时间：2012-11-21T01:31:02.653
> 
> 标签：twitter-bootstrap, fluid-layout

我正在尝试使用 twitter bootstrap 构建一个干净的流体布局，无论屏幕大小如何，它都会保留跨度的相对比率。

我不确定这是否可能以一种干净的方式（围绕它的黑客是创建 html 表），但我对肮脏的黑客不感兴趣，重点是编写干净的代码。

所以想法是，在引导网站上，他们给人的印象是这是可能的：

[http://twitter.github.com/bootstrap/scaffolding.html#layouts](http://twitter.github.com/bootstrap/scaffolding.html#layouts)

（尝试让你的浏览器窗口变小，你会看到流畅的布局保持它的相对比例，即使减少到最大（他们在网站上使用了不同的代码，因为类名不同）

但是当您下载流体布局演示时，如果您将窗口大小调整为很小的东西，一切都会堆积起来，我还没有找到避免这种情况的方法：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

我认为这是不可能的，但想知道是否有人对此有所了解。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:39:06.263

这种行为是由于包含`bootstrap-responsive.css`. 在狭窄的窗口 ( `< 767px`) 中，这[会堆叠列](https://github.com/twitter/bootstrap/blob/master/less/responsive-767px-max.less)。所以，如果你真的不想有这种行为，那就不要包括`bootstrap-responsive.css`.

# ruby-on-rails - 在我的 Rails 应用程序上发送电子邮件时出现 Net::SMTPUnknownError (could not get 3xx (550)) 错误

> ID：13485049
> 
> 赞同：3
> 
> 时间：2012-11-21T01:31:44.140
> 
> 标签：ruby-on-rails, email, smtp, gmail

我正在使用谷歌在我的 Rails 3.2 应用程序上发送电子邮件。大多数电子邮件功能都运行良好。然后我做了一些测试，因为delayed_job 不起作用。我收到来自谷歌的警告，我需要通过网络登录帐户才能解锁它（我在 1 小时内发送了大约 20 封电子邮件）。事情又恢复了正常。现在，我无法发送任何电子邮件。我的服务器日志中有此错误消息：

`Net::SMTPUnknownError (could not get 3xx (550))`

Google 是否已将我列入发送 50 封电子邮件的黑名单？我更改了帐户的密码，通过网络登录了几次，将设置恢复到电子邮件正常工作时的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:17:40.137

通过创建一个新的电子邮件地址，我的电子邮件再次正常工作。必须创建一个新的而不使用旧的别名才能使其工作。我还创建了一个 SPF 记录条目，这是我以前没有的。

# split - 如何将短语拆分为帕斯卡中的单词？

> ID：13485050
> 
> 赞同：1
> 
> 时间：2012-11-21T01:32:02.940
> 
> 标签：split, pascal, procedure, phrase

我必须创建一个程序，使用 pascal 中的过程将短语（带有特殊字符，例如 % 和 $）拆分为单词。

所以如果我输入：

```
This is a valid word: 12$%ab 
```

该程序必须返回我：

```
This
is
a
valid
word:
12$#ab 
```

没有空格，一个在另一个之下。

我不能使用数组，并且“调用”该过程的变量必须是一个字符串。

提前致谢！

这是我的代码：

```
program words;
uses crt;
var 
 phrase  :string;
 word:string;
 letter  :char;
 x      :integer;

begin
 clrscr;
 phrase:='';
 word:='';
 x:=1;                         
 repeat
  write('type a phrase: ');
  readln(phrase);
  until phrase<>'';
 while x<=length(phrase) do
 begin
  letter:=phrase[x];
  case letter of
   'a'..'z','A'..'Z':
    begin
     word:=word+letter;
     repeat
       x:=x+1;
       letter:=phrase[x];
       word:=word+letter;
      until (letter=' ') or (x=length(phrase));
     writeln(word);
     word:='';
    end;
  end;
  x:=x+1;
 end;
writeln;
readkey;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T12:58:05.607

我看不出提供的代码有什么问题（尽管如果给定的字符串中有数字，它会失败），但我可以看到它效率低下 - 不需要所有字符串连接。我可以看到其他两种处理问题的方法 -

第一种方法 - 搜索、打印和删除

```
repeat
 write ('type a phrase: ');
 readln (phrase);
until phrase <>'';

while phrase <> '' do
 begin
  i:= pos (' ', phrase);
  if i = 0 then
   begin
    writeln (phrase);
    phrase:= ''
   end
  else
   begin
    writeln (copy (phrase, 1, i-1));  // no need to write the terminating space!   
    phrase:= copy (phrase, i + 1, length (phrase) - i)
   end
 end; 
```

第二种方法：搜索、打印并继续

```
repeat
 write ('type a phrase: ');
 readln (phrase);
until phrase <>'';

j:= 1;
i:= 1;
len:= length (phrase);
repeat
 while (phrase[i] <> ' ') and (i < len) do inc (i);
 writeln (copy (phrase, j, i - 1));
 j:= i;
 inc (i)
until i > len; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:01:34.657

循环遍历每个字符以获取字符串的长度，检查是否为空格，如果是，则打印前面的字符，如果不是，则添加到包含前面字符的变量中。

# r - ggplot:boxplot:演示文稿

> ID：13485054
> 
> 赞同：0
> 
> 时间：2012-11-21T01:32:26.263
> 
> 标签：r, ggplot2, boxplot

我有以下内容：

```
t1      t2    res
103    19  28.66667
222    49  28.66667
140    36  28.66667
102    33  24.66667
88     37  24.66667
38     22  24.66667
34     19  36.00000
102    25  36.00000
506    25  36.00000
73     9   39.00000
55     17  39.00000
34    17   39.00000
20    22   38.33333
50    67   38.33333
30    19   38.33333
27    15   34.00000
40    21   34.00000
35    16   34.00000
34    17   37.00000
22    29   37.00000
12    30   37.00000
25    39   26.33333
20    53   26.33333
22    20   26.33333 
```

在我重塑数据并融化它们之后，我在 Y 轴上绘制了 t1 和 t2 的箱线图，在 X 轴上绘制了 res 的箱线图。我的问题是如何选择每个结果中的颜色，是否可以将填充更改为网格或阴影填充，所以如果我以黑白打印图表，我仍然能够区分 t1 和 t2 箱线图。下面是我的代码，它会自动生成不同的颜色，但我希望能够选择！！：

```
ggplot(df_melted, aes(x = factor(res), y =value, fill=variable)) +
geom_boxplot(las=1,varwidth=T,border="black",col="red",medlwd=3,whiskcol="black",staplecol="blue",top=T)+
coord_cartesian(ylim = c(0, 200)) 
```

注意：df_melted 是应用了 melt 命令后的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:34:35.350

`scale_fill_grey`并且`theme_bw`可能是你所追求的。尝试这个：

```
ggplot(df_melted, aes(x = factor(res), y =value, fill=variable)) +
   geom_boxplot()+
   scale_fill_grey(start = .5, end = .9) +
   theme_bw() 
```

# drag-and-drop - HTML DOM 拖放

> ID：13485063
> 
> 赞同：1
> 
> 时间：2012-11-21T01:33:28.073
> 
> 标签：drag-and-drop, dom

是的，这听起来像是一个常见的问题，但 Google 和 stackoverflow 都给了我想要的答案。我确实在 WWW 上偶然发现了一些结果，但只为这一项功能找到了巨大的脚本。

问题是，我记得以前这样做过，但我不记得是如何做到的。我是在 ONE 函数中完成的，并通过添加事件侦听器和类似的东西。

基本上，我需要一个纯 DOM 脚本来拖放 HTML 元素，以便退回到不支持新 HTML5 标准的旧 Web 浏览器。必须使用偶数'onmousedown' 按下，并且在调用拖动之前必须按住文本/图像至少 1.5 秒。

想法和想法？伙计们，我们将不胜感激。

我对屏幕坐标和其他东西也有点生疏。使用此代码，我希望文本完全跟随光标。如果您知道我的意思，则不是 5 像素“关闭”。

我之前拥有的（moveText 的参数应该是 HTMLDivElement，它是 innerText）：

```
function moveText(t){
            var id=t.id;
            var interval=setInterval(function(){
                increment=increment+1;
                if(increment>=3){
                    clearInterval(interval);
                    t.addEventListener("mousemove",function(event){
                        t.style.position="absolute";
                        t.style.top=event.screenY+"px";
                        t.style.left=event.screenX+"px";
                    });
                }
            },500);
            t.addEventListener("mouseup",function(){
                increment=0;
                clearInterval(interval);
            });

        } 
```

# java - 如何以不同的方法从子类中关闭 JFrame？

> ID：13485065
> 
> 赞同：1
> 
> 时间：2012-11-21T01:33:28.690
> 
> 标签：java, swing

我的 GUI 中有一个按钮，应该关闭它的窗口。但是，它的事件处理程序位于一个`AbstractAction`子类中，该子类位于与`JFrame`. 因此，我看不到一种方法来告诉`JFrame`关闭我的`AbstractAction`.

这是我的代码的基本布局：

```
public PointWindow()
  {
    initialize();
  }

  public void initialize()
  {
    JFrame frame = new JFrame();
    // JFrame stuff
    frame.setContentPane(createGUI());
    frame.setVisible(true);
  }

  public JPanel createGUI()
  {
    JPanel gui = new JPanel();

    // Code....

    class MakeGraphACT extends AbstractAction 
    {
      public void actionPerformed(ActionEvent e)
      {
        frame.setVisible(false);  // <--- How to get this to work?
        frame.dispose();          // <---
        new GraphWindow(pointList);
      }
    }

    //Code...

    return gui;
  } 
```

我是否在规划代码方面做得不好，或者我只是遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:34:40.307

您需要将帧作为`final`参数传递给该`createGUI()`方法。
然后，您将能够从内部类中访问它。

# iphone - 识别按下的标签按钮以移动到下一个响应者

> ID：13485066
> 
> 赞同：1
> 
> 时间：2012-11-21T01:33:39.860
> 
> 标签：iphone, ios, ipad, uicontrol, uiresponder

我有多个从键盘输入的自定义类实例。你可以想到`UITextField`（但他们不是`UITextField`，他们是`NSObject`）。但是，它们都有一个属性`UIControl *control`。

这些对象被实例化并放入一个数组（顺序很重要），并且它们以相同的顺序放置在屏幕上。

**场景 1：**用户在第一个对象上的选项卡，它成为第一响应者。用户点击另一个对象（来自同一类）并成为第一响应者。没问题。

**场景 2：**用户在第一个对象上的选项卡，它成为第一响应者。用户点击`TAB`键盘按钮（iPad 或 iPhone 或无线键盘），**我希望数组中的下一个对象成为下一个响应者**。iOS 随机选择 [? 或者有些逻辑我不清楚]另一个与我想要的顺序不同的对象。

**问题：**因为这些对象都是`NSObject`s，如何截取到下一个对象的过渡。我尝试使用标签或跟踪谁是第一响应者，但问题是，如果用户无序地点击对象，那很好 - 我不想拦截它。我只想拦截从一个对象到花药的转换，**只有**通过点击键盘的`TAB`（或`Next`或`Return`）按钮。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:08:38.637

您可以将自定义类设置为具有这样的内容

```
@interface testClassButtonSub : UIButton

@property (weak,nonatomic) IBOutlet UIButton *nextButton;

@end 
```

然后，您甚至可以使用界面构建器来设置执行某个操作时的下一个响应者。（用户在自定义类的文本字段内按回车键）

对于回报，您必须将您的视图控制器声明为特定文本视图的代表。

首先，您像这样设置 viewcontroller 标头：

```
@interface RegisterViewController : UIViewController <UITextFieldDelegate> 
```

然后你在实现中设置代表

```
// Set Delegates of the Text Fields
eMail.delegate = self;
userPassword.delegate = self;
userNickname.delegate = self; 
```

然后你使用这个委托方法跳转到下一个对象

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{    
    // Jumping code here
    return NO;
} 
```

**但是**，在您的情况下，您的文本字段必须在您的对象内，因此您必须将该对象设为委托，并在该对象的实现跳转代码中添加

```
[thisObjectsTextfield becomeFirstResponder]; 
```

# cordova - 我在 phonegap 中的代码有多安全

> ID：13485068
> 
> 赞同：5
> 
> 时间：2012-11-21T01:33:47.537
> 
> 标签：cordova

Phonegap 允许我们使用**HTML、Javascript 和 CSS**构建应用程序，并通过将这些文件上传到它们，他们为我们构建了几个二进制文件。
如果我将我的代码作为私人项目上传给他们，代码有多安全。

其他人或任何一方是否可以阅读我的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:41:10.207

您可以详细查看 phonegap[常见问题](http://build.phonegap.com/faq)解答以了解有关 phonegap 构建程序的想法，从该网站我为您找到了一些有用的信息。

**我可以将 PhoneGap Build 与私有 Github 存储库一起使用吗？**

是的！在 PhoneGap Build 的最新更新中，您现在可以将该服务指向一个私有 GitHub 存储库。在用户设置中将您的构建帐户连接到您的 GitHub 帐户后，您只需提供您的身份验证信息，构建服务就会在创建代码的新构建时使用它。

**公共应用程序和私有应用程序有什么区别？**

公共应用程序的源代码托管在可公开访问的 GitHub 存储库中。私有应用程序的源代码托管在私有（不可公开访问）GitHub 存储库中，或者在开发人员将包含源代码和资产的 ZIP 文件上传到 PhoneGap Build 服务时创建。

**我在哪里可以找到 PhoneGap Build 帮助？**

在我们的社区论坛上提问：http: [//community.phonegap.com](http://community.phonegap.com)，或在 Twitter 上提问：http: [//twitter.com/PhoneGapBuild](http://twitter.com/PhoneGapBuild)

您将在此处获得有关代码安全性的更多信息 - [how_secure_is_my_code_on_phonegap_build](http://community.phonegap.com/nitobi/topics/how_secure_is_my_code_on_phonegap_build)

提示：

*   不要在应用程序内硬编码用户或服务器的凭据。
*   避免永久存储/保存用户或服务器的凭据，将其加密或明文。
*   仅以 SSL 模式（https、ftps）连接到您的服务器。
*   在上传到 Build 之前，尽可能混淆每个源文件。

# oauth-2.0 - WSO2 ESB (4.5.0) Oauth Mediator 是否支持 OAuth2.0 Bearer 令牌？

> ID：13485069
> 
> 赞同：1
> 
> 时间：2012-11-21T01:33:54.010
> 
> 标签：oauth-2.0, wso2, wso2esb

当我向 WSO2 ESB (4.5.0) Oauth Mediator 发送 OAuth2.0 Bearer 令牌时收到“验证 OAuth2 请求时出错”消息。

WSO2 ESB (4.5.0) Oauth Mediator 是否支持 OAuth2.0 Bearer token ？Oauth Mediator 的正确要求是什么？

我的不记名标题...

```
conn = (HttpURLConnection)url.openConnection();
conn.setRequestProperty("Authorization", "bearer " + request.getParameter("accessToken").toString() );      
conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded"); 
```

# windows - Windows 驱动程序签名的复杂性（重命名和重新签名 OpenVPN Tap 驱动程序）

> ID：13485070
> 
> 赞同：4
> 
> 时间：2012-11-21T01:34:25.100
> 
> 标签：windows, driver, openvpn

我不清楚在我的具体情况下应该如何签署司机。

OpenVPN 有一个 Tap 驱动程序，它由 tap0901.sys、tap0901.cat 和 OemWin2k.inf 文件组成。

当我在我的 64 位 win7 上使用“devcon install OemWin2k.inf tap0901”安装它时，它会静默安装，没有可怕的警告。

我将驱动程序重命名为不同的名称 ogtap100（通过将文件重命名为 ogtap100.sys、ogtap100.cat 并将 OemWin2k.inf 中的“tap0901”字符串替换为“ogtap100”，根据[http://community.openvpn.net/openvpn /wiki/ManagingWindowsTAPDrivers](http://community.openvpn.net/openvpn/wiki/ManagingWindowsTAPDrivers)和 OemWin2k.inf 中的注释）。

但是，当我在重命名的驱动程序上运行“devcon install OemWin2k.info ogtap100”时，我收到来自 Windows 的可怕警告，即驱动程序来自未知来源。它会安装，但我计划将它作为我的应用程序的一部分发布，所以可怕的警告并不好。

当我运行“signtool verify /v ogtap100.cat”时，我得到：“SignTool 错误：已处理证书链，但在信任提供者不信任的根证书中终止。” 即使它还说根证书是“颁发给：DigiCert High Assurance EV Root CA”。

我尝试使用自己的证书（在签署常规 .exe 文件时有效）重新签名（signtool sign /f cert.pfx ogtap100.cat），但我得到了同样可怕的警告。

我错过了什么？

会不会…… 与目录（.cat）文件有关吗？

我已经阅读了[http://msdn.microsoft.com/en-us/windows/hardware/gg463050](http://msdn.microsoft.com/en-us/windows/hardware/gg463050)但它假设我会自己生成 .cat 文件。我已经有来自 OpenVPN 的 .cat 文件。重命名文件和 OewmWin2k.inf 后是否必须重新生成它？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T14:15:59.643

1）您是否确保您获得了高保证数字证书？他们发布的标准并不适用于司机。更改很简单... [https://www.digicert.com/code-signing/driver-signing-in-windows-using-signtool.htm](https://www.digicert.com/code-signing/driver-signing-in-windows-using-signtool.htm)

2) 如果您下载 Windows 7 DDK 并稍微“阅读意图和代码”而不是仅仅按照说明进行操作，您可以成功构建自己的驱动程序（cat 和 sys 文件），并正确重命名和签名。 [https://community.openvpn.net/openvpn/wiki/BuildingTapWindows](https://community.openvpn.net/openvpn/wiki/BuildingTapWindows)

查看生成的 OemWin2k.inf 以获得一些重命名的强烈提示。注意：时间戳需要正确，并且是（荒谬的）mm/dd/yyyy 格式。

3) 至于警告信息，至少您可以让它正确显示您的公司名称，并且 Windows 将接受（而不是禁用）正确签名的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T18:58:29.300

有关驱动程序签名的详细信息，请查看 [https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/0b00c9d4-dff9-4fbe-b741-768c9b39349c/practical-windows-code-and-driver-signing-讨论？论坛=wdk](https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/0b00c9d4-dff9-4fbe-b741-768c9b39349c/practical-windows-code-and-driver-signing-discussion?forum=wdk)

这是指向一些参考文档的摘要。从 inf 生成 .cat 文件很简单。

查看语法和操作顺序。我也在使用 Digicert 证书。确保您有一张用于驱动程序签名的证书，并注意确保交叉证书正确无误。

构建脚本使用 inf2cat 方法，因此如果您遵循整个说明（并在设置中搜索 inf 未告诉您的内容...查找常量），那么您正在生成 .cat 文件。

对于我的安装，我认为应该在生成 .cat 并对其进行签名之前对 .sys 文件进行签名。

另外，请确保您的电脑具有所有 Windows 更新。这实际上确实可以“修复”具有相同错误签名的电脑。（它没有验证交叉证书所需的证书，它会自动下载。）

# arrays - 矢量搜索算法

> ID：13485075
> 
> 赞同：2
> 
> 时间：2012-11-21T01:34:42.887
> 
> 标签：arrays, algorithm, r

我有以下问题。假设我有一个向量：

```
v = [1,2,3,4,5,1,2,3,4,...] 
```

我想从向量中按顺序对点进行采样，这些点的绝对差值高于先前采样点的阈值。所以说我的门槛是2。

我从索引 1 开始，对第一个点 1 进行采样。然后在 v[3] 处满足我的条件，我对 3 进行采样（因为 3-1 >= 2）。然后 3，新的采样点成为我检查的参考点。下一个采样点是 5，即 v[5] (5-3 >= 2)。然后下一点是 1，即 v[6] (abs(1-5) >= 2)。

不幸的是，我在 R 中的代码耗时太长。基本上我正在反复扫描数组并寻找匹配项。我认为这种方法很幼稚。我有一种感觉，我可以通过阵列一次完成这项任务。我不知道如何。任何帮助表示赞赏。我想我遇到的问题是下一个采样点的位置可以在数组中的任何位置，我需要从当前点扫描数组到末尾才能找到它。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T02:00:40.143

我看不出没有循环可以做到这一点，所以这里有一个：

```
my.sample <- function(x, thresh) {
   out <- x
   i <- 1
   for (j in seq_along(x)[-1]) {
      if (abs(x[i]-x[j]) >= thresh) {
         i <- j
      } else {
         out[j] <- NA
      }
   }
   out[!is.na(out)]
}

my.sample(x = c(1:5,1:4), thresh = 2)
# [1] 1 3 5 1 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:22:33.513

您可以使用一些递归来执行此操作而无需循环：

```
vsearch = function(v, x, fun=NULL) {
  # v: input vector
  # x: threshold level

  if (!length(v) > 0) return(NULL)

  y = v-rep(v[1], times=length(v))
  if (!is.null(fun)) y = fun(y)

  i = which(y >= x)

  if (!length(i) > 0) return(NULL)
  i = i[1]

  return(c(v[i], vsearch(v[-(1:(i-1))], x, fun=fun)))
} 
```

使用上面的矢量：

```
> vsearch(c(1,2,3,4,5,1,2,3,4), 2, abs)
[1] 3 5 1 3 
```

# java - Linux 上的 Java Robot - 没有大写字符（使用 x11vnc）

> ID：13485079
> 
> 赞同：2
> 
> 时间：2012-11-21T01:35:07.940
> 
> 标签：java, linux, shift, awtrobot

我正在尝试使用**Java Robot Class**在我的 vps 服务器上使用 debian lenny 模拟键盘。我正在使用这些命令（与 VNCviewer 连接）查看结果：

```
Xvfb :2 -screen 0 1366x768x16 & fluxbox & x11vnc -display :2 -bg -usepw -nomodtweak -xkb 
```

我可以输入小写字母，但它不适用于大写字母。我使用了来自互联网的以下代码+我的修改：

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;

public class TypingRobot extends Robot {

public TypingRobot() throws AWTException {
    super();
    // TODO Auto-generated constructor stub
}

public void keyType(int keyCode) {
 keyPress(keyCode);
 delay(50);
 keyRelease(keyCode);
}

public void keyType(int keyCode, int keyCodeModifier) {

 keyPress(keyCodeModifier);
 keyPress(keyCode);  
 delay(50);
 keyRelease(keyCode);
 keyRelease(keyCodeModifier);
}

public void type(String text) {
  //String textUpper = text.toUpperCase();
  String textUpper = text;

  for (int i=0; i<text.length(); ++i) {
   typeChar(textUpper.charAt(i));
  }  
 }

 private void typeChar(char c) {
  boolean shift = true;
  int keyCode;

  switch (c) {
  case '~':
   keyCode = (int)'`';
   break;
  case '!':
   keyCode = (int)'1';
   break;
  case '@':
   keyCode = (int)'2';
   break;
  case '#':
   keyCode = (int)'3';
   break;
  case '$':
   keyCode = (int)'4';
   break;
  case '%':
   keyCode = (int)'5';
   break;
  case '^':
   keyCode = (int)'6';
   break;
  case '&':
   keyCode = (int)'7';
   break;
  case '*':
   keyCode = (int)'8';
   break;
  case '(':
   keyCode = (int)'9';
   break;
  case ')':
   keyCode = (int)'0';
   break;
  case ':':
   keyCode = (int)';';
   break;
  case '_':
   keyCode = (int)'-';
   break;
  case '+':
   keyCode = (int)'=';
   break;
  case '|':
   keyCode = (int)'\\';
   break;
  case '?':
   keyCode = (int)'/';
   break;
  case '{':
   keyCode = (int)'[';
   break;
  case '}':
   keyCode = (int)']';
   break;
  case '<':
   keyCode = (int)',';
   break;
  case '>':
   keyCode = (int)'.';
   break;
  case '/':
   keyCode = 47;
   shift = false;
   break;
  case ' ':
   keyCode = (int)' ';
   shift = false;
   break;
  case '.':
   keyCode = (int)'.';
   shift = false;
   break; 
  default:
   if( (int)c>=65 && (int)c<=90 ){
       keyCode = (int)c;
   }
   else{
   keyCode = (int)c-32;
   shift = false;
   }
  }
  if (shift)
   keyType(keyCode, KeyEvent.VK_SHIFT);
  else
   keyType(keyCode);
 } } 
```

我的输入看起来像：

```
robot.type("Some string..."); 
```

但它将大写字母变为小写字母。我认为我的服务器存在一些问题，因为此代码的 Windows 版本对我来说效果很好。我可以在 VNCviewer 上按 SHIFT 并且它可以工作，但可能是 Robot/x11vnc 或相关的东西不能为我按下它。

任何想法如何启用 SHIFT 键？（我也测试过CAPSLOCK，也没有发生任何事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:56:08.100

答案是 - 不要使用 x11vnc，shift/ctrl/alt 键在那里不起作用。改用**tightvncserver**。

# c# - 如何通过 WCF 服务公开 ADO 实体？

> ID：13485080
> 
> 赞同：1
> 
> 时间：2012-11-21T01:35:11.963
> 
> 标签：c#, asp.net, wcf, ado.net, datacontract

我将我的数据库链接到 Ado 实体数据模型。但是，当我尝试运行公开模型中所有成员的方法时，结果是：未收到数据

无论如何我可以在不为每个实体创建单独的 DataContract 对象的情况下公开 ADO 实体吗？

界面

```
 [OperationContract]
    [WebInvoke(UriTemplate = "/GetAllMembers",
        Method = "GET",
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare)]
    List<Member> GetAllMembers(); 
```

服务等级

```
 public List<Member> GetAllMembers()
    {
        using (var context = new DataBaseEntities())
        {
          return context.Members.ToList<Member>();
        }
    } 
```

# php - PHP：将 2 个数组组合成 1 个具有公共索引的数组

> ID：13485083
> 
> 赞同：1
> 
> 时间：2012-11-21T01:35:33.483
> 
> 标签：php, arrays, multidimensional-array

```
username(
 [0] => 'andrew';
 [1] => 'teddy';
 [2] => 'bear';
)

email(
 [0] => 'andrew@andrew.com';
 [1] => 'teddy@teddy.com';
 [2] => 'bear@bear.com';
) 
```

我有 2 个数组从帖子进来。我正在用 PHP 处理这个。我想组合数组，所以它看起来像这样。所以我可以在数组上使用循环在数据库上插入查询。

```
[1] => Array (
 [0] => 'andrew';
 [1] => 'andrew@andrew.com';

)

[2]  => Array (
 [0] => 'teddy';
 [1] => 'teddy@teddy.com';

)

[3] => Array (
 [0] => 'bear';
 [1] => 'bear@bear.com';

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:48:06.443

看看[array_combine()](http://php.net/manual/en/function.array-combine.php)

如果这不能解决您的问题，您总是可以使用一个简单的循环：

```
foreach($usernameArray as $k=>$val)
{
    if(array_key_exists($k, $emailArray))
    {
        $combinedArray[$k] = array($val, $emailArray[$k]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:49:22.813

你需要类似的东西：

```
$res = array ();
for($i=0;$i<count($username);$i++) {
   $res[$i][0] = $username[$i];
   $res[$i][1] = $email[$i];
} 
```

# arrays - Groovy 从数组中删除空间索引

> ID：13485086
> 
> 赞同：0
> 
> 时间：2012-11-21T01:36:18.697
> 
> 标签：arrays, groovy

headers 是一个从文件填充的数组。当我打印标题时，我得到：

```
headers = ["The Year", , , "The Make", "The Model"] 
```

我试图用来`headers.remove(' ')`摆脱这两个只是空格的单元格。它不会使用该语法运行或编译，而且我找不到我做错了什么。我已经测试过：

```
def list1 = ['j', 2, 3, 4]

list1.remove('j') 
```

它工作得很好。我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:44:19.233

假设这`["The Year", , , "The Make", "The Model"]`实际上是列表的 toString 表示

```
groovy:000> ["The Year", , , "The Make", "The Model"]
ERROR org.codehaus.groovy.control.MultipleCompilationErrorsException:
startup failed:
groovysh_parse: 1: unexpected token: , @ line 1, column 14.
   ["The Year", , , "The Make", "The Model"]
            ^
groovy:000> ['"The Year"', '', '', '"The Make"', '"The Model"']
===> ["The Year", , , "The Make", "The Model"] 
```

我认为`headers.remove(' ')`不起作用，因为元素实际上不是空格，它们是空的。我不确定为什么`headers.remove('')`不起作用，除非您需要使用`headers.removeAll('')`.

更好的选择是使用类似`headers.findAll { it.trim() != '' }`.

# java - Java中的“循环”是一种“条件语句”吗？

> ID：13485087
> 
> 赞同：4
> 
> 时间：2012-11-21T01:36:29.820
> 
> 标签：java, if-statement, for-loop, switch-statement, conditional-statements

我有一个项目，上面写着：“不会有条件语句（if、switch 或……）。” 我不确定这是否包括`for`和`while`循环，因为两者在技术上都是在条件下运行的。我可以说它们是“条件循环”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T01:50:57.560

`for`使用循环 ( , ,...)可能是可以接受的`while`，但您需要与项目作者核实。我倾向于分别处理循环和条件语句，因为它们通常有不同的目的......

*   条件语句喜欢`if`并且`switch`将从选项列表中做出选择。它们只运行一次。
*   循环类似`for`并且`while`通常被设计为多次运行一段代码。

当然这只是一个概括，可能每个人都有不同的看法，但我肯定会区别对待它们，因为它们有不同的主要目的。

对于额外的功劳，维基百科似乎同意。[If 语句](http://en.wikipedia.org/wiki/If_statement)是条件运算符，For[循环](http://en.wikipedia.org/wiki/For_loop)是迭代语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:15:44.110

`for`和`while`循环使用（终止）*条件*，而不是条件*语句*，所以在此基础上循环是可以的。

除了循环，另一种选择是[三元运算符`?`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)- 它不是*语句*，它是*运算符*，您可以使用这些代码编写一些条件流，即以下代码：

```
int x;
if (<some condition>)
    x = 1;
else
    x = 2; 
```

可以使用三元运算符编码为：

```
int x = <some condition> ? 1 : 2; 
```

# java - 转换方法错误信息

> ID：13485089
> 
> 赞同：1
> 
> 时间：2012-11-21T01:36:33.790
> 
> 标签：java

我收到此代码的最后一部分“成本”的消息，

> Convert 类型中的 toDoubleString(double, boolean) 方法不适用于参数 (Double, int)，

不知道如何解决这个问题。如果我把它拿出来，我会收到这条消息，

> Convert 类型中的 toLeftPaddedString(String, int) 方法不适用于参数 (Double, int)。

帮助，谢谢。

```
public String printSummaryOutput() {
    return Convert.toRightPaddedString(make, 8) + printSummaryOutput() +  
               Convert.toRightPaddedString(model, 11) + Convert.toLeftPaddedString(color, 6) + 
               Convert.toLeftPaddedString(purchaseDate, 10) + Convert.toLeftPaddedString(Convert.toDoubleString(cost, 10));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:42:54.370

作为记录，我们不知道`Convert`类是什么，也不知道它的方法期望什么参数。

然而，有件事告诉我，而不是......

```
Convert.toLeftPaddedString(Convert.toDoubleString(cost, 10)) 
```

……你可能是说……

```
Convert.toLeftPaddedString(Convert.toDoubleString(cost), 10) 
```

...因为`Convert.toLeftPaddedString`do 的其他调用接受第二个参数的整数参数。

正如其他人所说，根据错误消息，您需要为 提供`boolean`第二个参数`Convert.toDoubleString`，但该方法可能会重载；如果没有更多信息，我们无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:41:51.497

在您的代码中，您正在调用方法`Convert.toDoubleString(cost, 10)`。此方法希望您将 a`double`和 a`boolean`作为 2 个参数传递给它，但您却给了它 a`Double`和 an `int`。

因此，您需要更改方法调用以为其提供正确的值，可能是这样的......

```
Convert.toDoubleString(cost.doubleValue(), true); 
```

这同样适用于所有其他方法，例如`toLeftPaddedString()`- 确保为方法提供正确的类型。

# javascript - 指向我服务器上的文件

> ID：13485094
> 
> 赞同：1
> 
> 时间：2012-11-21T01:36:54.903
> 
> 标签：javascript, file, directory, webserver

我在指向服务器上的一个 JS 文件时遇到了一些困难。我有一个非常标准的设置：

*   索引.html
*   .js 文件夹
*   css 文件夹

困难是我有另一个文件夹叫

*   6_toggle

`1.html`在这个文件夹中，我有六个名为、等的 HTML 文件`2.html`。我需要这些单独的文件指向我的 JS 文件夹中的一个文件。我以为会是：

```
<script src="../../js/view.min.js?auto"></script> 
```

我也试过：

```
<script src="../js/view.min.js?auto"></script> 
```

但这似乎不起作用。有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:21:30.410

当你有这个结构

```
 root/
    -index.html
    -js_folder
    -css_folder
    -6_toggle
      -1.html
      -2.html
      -etc 
```

您可以随时访问`js_folder`< `<script type="text/javascript" src="/js_folder/file.js"></script>`- 我认为这是访问服务器上文件资产的最佳实践。`..`通过包含根，您可以忘记需要返回多少

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:42:21.080

假设您的树结构如下所示：

```
-index.html
-js_folder
-css_folder
-6_toggle
  -1.html
  -2.html
  -etc 
```

从索引，您首先需要进入 js 文件夹，然后是 file.js，如下所示：

```
<script type="text/javascript" src="js_folder/file.js"></script> 
```

从您的 1.html 和 2.html 文件中，您可以像这样访问该文件：

```
<script type="text/javascript" src="../js_folder/file.js"></script> 
```

您必须首先进入父文件夹，然后进入其子文件夹的 js 文件夹

# javascript - 列表项的单独功能

> ID：13485097
> 
> 赞同：0
> 
> 时间：2012-11-21T01:37:19.873
> 
> 标签：javascript, list, onclick

我试图让此代码以一种方式工作，即我单击第一项它将执行一个功能，而当我单击第二项时它将执行不同的功能。现在他们都做同样的事情，我似乎无法把它分开。

```
 var list = [];

list[0] = ["zero"];
list[1] = ["one"];
list[2] = ["two"];
list[3] = ["three"];

function Make(){
for ( var i = 0; i < 4 ; i++ ) {
    var div = document.createElement("div");
    div.style.width = "10px";
    div.style.height = "10px";
    div.style.background = "white";
    div.style.color = "black";
    div.style.top = "0px";
    div.style.left = "0px";
    div.style.margin = "10px 10px auto";
    div.style.cursor = "pointer";
    div.innerHTML = list[i];
    !function(){
        var index = 0;
        div.onclick = function () { alert("this works"); };
    }();
    document.body.appendChild(div);
}
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:44:50.427

你的意思是这样的吗？

```
 <script type="text/javascript">
        var list = [];

        list[0] = ["zero"];
        list[1] = ["one"];
        list[2] = ["two"];
        list[3] = ["three"];

        function Make(){
            for ( var i = 0; i < 4 ; i++ ) {
                var div = document.createElement("div");
                div.style.width = "10px";
                div.style.height = "10px";
                div.style.background = "white";
                div.style.color = "black";
                div.style.top = "0px";
                div.style.left = "0px";
                div.style.margin = "10px 10px auto";
                div.style.cursor = "pointer";
                div.innerHTML = list[i];
                !function(){
                    var index = 0;
                    div.onclick = function () { doSomething(this); };
                }();
                document.body.appendChild(div);
            }
        }

        function doSomething(element){
            var value = element.innerHTML;
            alert('clicked : '+ value);
            switch(value){
                case "zero":
                //Your code here
                break;
                case "one":
                //Your code here
                break;
            }
        }
        Make();
    </script> 
```

# web-applications - IIS 7.5 中的 Web 应用程序别名

> ID：13485100
> 
> 赞同：0
> 
> 时间：2012-11-21T01:38:06.913
> 
> 标签：web-applications, redirect, iis-7, iis-7.5, alias

我需要在 IIS 7.5 中为 Web 应用程序创建别名。

例如，假设我有一个名为“MyHappyApp”的应用程序位于[http://server.com/MyHappyApp](http://server.com/MyHappyApp)

我想创建一些重定向到该应用程序的别名，例如：

*   [http://server.com/MyHappyApp2](http://server.com/MyHappyApp2)
*   [http://server.com/HappyAppPart3](http://server.com/HappyAppPart3)

在 IIS 7.5 中完成此行为的最佳做法是什么？请说明可以在 IIS 管理器中配置的位置以及`web.config`可能的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:06:34.293

您需要使用[重写](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)模块，

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="MyHappyApp2_To_HappyAppPart3" stopProcessing="true">
                    <match url="MyHappyApp2" ignoreCase="true" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{URL}" pattern="^/$" ignoreCase="true" />
                    </conditions>
                    <action type="Rewrite" url="/HappyAppPart3" />
                </rule>
            </rules>
        </rewrite>
        <security>
            <requestFiltering allowDoubleEscaping="true" />
        </security>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:14:24.723

您需要安装 URL 重写模块。您可以通过 IIS 管理器配置规则或手动添加到 web.config。

虽然可以在一个规则中完成所有操作，但创建两个单独的规则可能更容易，一个用于您要重定向的每个别名。

这应该有效：

```
<rewrite>
    <rules>
        <clear />
        <rule name="Redirect MyHappyApp2 to MyHappyApp" stopProcessing="true">
            <match url="^MyHappyApp2(/.*)?$" />
            <action type="Redirect" url="http://server.com/MyHappyApp{R:1}" appendQueryString="true" redirectType="Permanent" />
        </rule>
        <rule name="Redirect HappyAppPart3 to MyHappyApp" stopProcessing="true">
            <match url="^HappyAppPart3(/.*)?$" />
            <action type="Redirect" url="http://server.com/MyHappyApp{R:1}" appendQueryString="true" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

上述规则也支持人们去`http://server.com/HappyAppPart3/somepage?id=1`（只是一个例子）。他们将被重定向到`http://server.com/MyHappyApp/somepage?id=1`.

# r - 使用索引计算序列中的连续更改

> ID：13485105
> 
> 赞同：1
> 
> 时间：2012-11-21T01:38:33.247
> 
> 标签：r, indexing, sequence

使用 R，从索引中计算字符值序列中更改次数的最佳方法是什么。例如，我有固定数量的站点：

> ```
> sites<-as.factor(LETTERS[seq(from=1,to=20)]) 
> ```

在这些地点，一些受到保护，而另一些则可以钓鱼，

> ```
> protected<-as.factor(c("A","D","E","M","L","S")) 
> ```

使用模拟，我得到了这个站点序列（受保护/非受保护站点的组合）

> ```
> result<-as.factor(c("A","A","A","B","C","D","D","L","L","F","F","T","S","N")) 
> ```

基本上，我想计算我的结果序列中有多少次从“受保护”站点变为“不受保护”站点。在这个例子中，我正在寻找的答案是 3，因为“A”是一个受保护的站点，它正在移动到不受保护的“B”（一次移动），“B”正在移动到“C”（两者都不受保护，因此不会改变），...，“L”到“N”（两次移动）等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T01:45:17.613

使用 %in% 和 diff 查找从受保护更改为不受保护的位置。然后计算你想要的值。在这里，受保护的 -> 不受保护的给出 -1。

```
sum(diff(result %in% protected) < 0) 
```

# php - 在 linux 机器中通过 SSH 隧道运行 php 脚本

> ID：13485106
> 
> 赞同：4
> 
> 时间：2012-11-21T01:38:42.123
> 
> 标签：php, linux, ssh, tunnel

我现在在我拥有的位于 linux .us 的服务器上成功运行了一个 php 脚本。我拥有另一个没有 apache/php 服务的 linux .de 定位服务器。我可以将第二个盒子用作 ssh 隧道或代理或端口反弹或其他东西，这样我就可以从第一个盒子隐藏我的 ip 以及如何？我已经在第二个盒子中安装了[pbnc](http://duncanthrax.net/pbnc/)，但我不知道这是否可以实现？我已经知道如何使用 windows 和 putty 来实现这一点，但是 linux 终端怎么可能做到这一点。对不起我的英语不好，提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:59:05.983

如果我理解的话，您想通过 ssh 执行另一个服务器上的脚本吗？对？如果是这种情况，您需要在没有密码的情况下登录到二号服务器。这很简单。

**第一种方式**：您所要做的就是生成 ssh 密钥（无密码）。[下面是如何做到这一点](http://goo.rs/TYS6KR)。 **第二种方式**（更好）：我猜您没有权限在第二号服务器上执行脚本。如果您可以访问第二台服务器，这很容易解决。这就是你的做法：

*   输入 visudo
*   在文件末尾添加这一行

> apache ALL=(user) NOPASSWD: script_path

**例子**

```
 apache ALL=(clamav) NOPASSWD: /usr/bin/clamscan 
```

在括号中输入有权执行脚本的用户。srcipt_path 在上面的示例 /usr/bin/clamscan 中。

*   使用服务器一的 curl，您可以在服务器二上打开一些文件（称为 script.php）
*   编辑 script.php 并添加

> $do = exec("some_script some_arguments")

就是这样。

# mysql - 如何在sql server中提取xml值字段（mysql中的extractvalue函数）

> ID：13485110
> 
> 赞同：0
> 
> 时间：2012-11-21T01:39:46.100
> 
> 标签：mysql, sql-server, xml, extract

我必须在 sql server 中提取 xml 值。通常，当我提取存储在 mysql 中的值字段时，我可以简单地使用`extractvalue(data,'parent/child/node') as value`

谁能告诉我如何在 sql server 中做到这一点？谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:58:30.110

像这样：

```
declare @x xml = '<foo><bar>my value</bar></foo>'

select @x.value('(/foo/bar)[1]', 'varchar(30)') 
```

这同样适用于 XML 列。

# c++ - 互联网连接速度与 HTTP 请求的编程语言速度？

> ID：13485112
> 
> 赞同：3
> 
> 时间：2012-11-21T01:40:12.050
> 
> 标签：c++, python, performance

我知道如何用 Python 编程，但我也有兴趣学习 C++。我听说它比 python 快得多，对于我目前正在编写的程序，我希望它们尽可能快速有效地运行。我知道其中大部分来自于编写好的代码，但我也想知道使用另一种语言（例如 C++）是否会有所帮助。

当我思考这个问题时，我意识到，由于我的大多数程序将主要使用互联网（如在实现 Google API 并使用来自它们的信息向其他网站提交数据），那么语言的速度可能并不重要如果我的互联网连接速度总是相对相同。我有两种连接互联网的方式：Selenium（或某种自动浏览器）用于需要浏览器的事物，以及只是 HTTP 请求。

即使我的程序主要关注互联网，我会在 python 和其他语言之间看到多少差异？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:06:58.210

# 场景

使用编译为机器代码的语言所获得的主要好处是，您可以执行大量字节和位魔术。比方说，修改图像数据、转换音频、分析基因组序列数据库的索引。

# 典型任务

提供完全不同的网页通常会遇到问题：您将从硬盘加载资源，如果它是图像或音频则直接提供它们，或者您将对文本资源执行不同的转换步骤，直到它成为最终的 HTML 文档。后者将使用模板引擎、数据库查询等。

如果你看一下，你会发现大多数东西，比如 90-99% 都是相当高级的东西——在 Python 中，你将使用一个由许多用户优化的 API 以获得最佳性能（意思是：时间和空间）。“打开文件”在 C 中的速度几乎与在 Python 中一样快，因此读取文件并将其提供给某个 Socket 也是如此。在 C++ 中转换文本数据可能比在 Python 中要快一些，但是......它必须有多快？一个用户很可能愿意等待200ms，不是吗？对于一个漂亮的高级模板引擎来转换一些文本来说，这需要很多时间。

# C++ 和 Python 能为您做什么

与用 C++ 编写的服务器相比，典型的 Python Web 服务编写起来要快得多，部署起来也更容易。如果您*要*在 C++ 中执行此操作，您首先需要处理套接字和连接——对于那些将使用现有库或编写您自己的处理。如果您使用现有的库（我强烈推荐），那么您基本上没有做任何与 Python 不同的事情。如果您编写自己的处理程序，那么您可能会做*很多**很多*低级的事情，这些事情会破坏您想要的性能。不，这*不是*一个选择。

如果您需要速度，而 Python 以及服务器和模板框架还不够，您应该重新考虑您的架构方法。然后看看[c10k-problem](http://www.kegel.com/c10k.html)并用 C 编写小片段。（也看看[这个 c10k 非常热门的话题](https://stackoverflow.com/tags/c10k/hot)）但是我看不出有很多理由不使用像 Python 这样的高级语言，如果你只是看用于中等复杂的 Web 服务应用程序的性能。

# 总结：区别

如果您只是从硬盘驱动器提供文件，我猜您的 Python 程序甚至会比您手工制作的 C++ 服务器更快。如果你使用一个用 C 或 C++ 编写的框架并且只是放入你的静态页面，我猜你会得到比 Python 高 2-5 倍的提升。再说一次，如果您的 Web 应用程序比提供静态内容更复杂一点，我估计差异会很快减小，并且您最多会获得 1-2 倍的速度增益。

# 这不仅仅是关于速度...

关于 C++ 和 Python 之间另一个区别的注意事项不应该忘记：由于 C++ 是真正编译的并且不像 Python 那样动态，因此使用 Python 可以获得大量*静态错误分析*。编写正确的代码总是很困难，但可以在 C++ 和 Python 中通过良好的*测试*和*静态分析*来完成——后者在 C++ 中更简单（我认为）。如果这对你来说是个问题，你可能会再想一想，但你问的是速度。

# ruby-on-rails - Rails 的预构建可扩展 Web 应用程序？

> ID：13485115
> 
> 赞同：2
> 
> 时间：2012-11-21T01:40:27.500
> 
> 标签：ruby-on-rails, ruby, rubygems

我想知道 Rails 是否有一个标准的预构建 Web 应用程序，它具有所有基本功能，如用户登录、用户个人资料、个人资料图片上传器、评论、搜索，也许还有付款和一组其他常见的 Web 应用程序功能，所有这些都捆绑在一起并且准备使用和扩展。

我喜欢 Twitter bootstrap 带有一组预先构建的界面功能和样式，您可以在以后开始使用和修改它们。我正在寻找类似的东西，可以让我快速设置一个工作应用程序并从那里开始。

这样的框架存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:54:05.277

那里[有](https://github.com/RailsApps/rails3-devise-rspec-cucumber) [很多](https://github.com/RailsApps/rails3-bootstrap-devise-cancan) [例子](https://github.com/rafaelfranca/simple_form-bootstrap) 。[_](https://github.com/foxycoder/rails_template) [_](https://github.com/hugodias/railStrap)

但是，您确实应该做两件事：

1.  阅读许可证以确保您可以按照您想使用的方式使用它。

2.  确保您了解原始作者所做的设计决策和选择。如果您只是复制货物狂热的风格而不了解其他人在设计决策中所做的权衡，那么您最终将陷入维护痛苦的世界。

列出的任何一个链接都足以让您入门。它们可能没有您列出的所有功能，但它们可能涵盖了您的所有基础。但是，您必须付出一些努力才能使所有这些功能协同工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T01:57:03.077

RailsApps项目很棒，因为它们都有介绍基本设置的教程[。](http://railsapps.github.com/)它们也都是使用[Rails Composer](https://github.com/RailsApps/rails-composer/)工具构建的，它允许您为您的应用程序选择某些选项。

# c++ - g++ 4.7.1 中的奇怪迭代器行为

> ID：13485118
> 
> 赞同：3
> 
> 时间：2012-11-21T01:40:50.563
> 
> 标签：c++, c++11, g++

我最初编写了一些`std::array`在 Microsoft VS 2012 中使用的代码。但是，将其移植到 g++ 4.7.1 时，出现了一些问题。它被缩小到平台之间迭代器行为的差异。

以下是隔离差异的基本代码示例：

```
#include <vector>
#include <array>
#include <iostream>

const std::array<std::array<int, 3>, 3> scoring_segment_codes_ = {{
    {{1, 2, 0}}, {{3, 4, 0}}, {{99, 100, 0}}
}};

int main()
{
    // This works on: g++ (Debian 4.5.3-9) 4.5.3
    // and Visual Studio 2012 (Windows 8)
    // but NOT g++ (Debian 4.7.1-7) 4.7.1
    for (auto i = scoring_segment_codes_.at(1).begin(); *i != 0; ++i)
    {
        std::cout << "Bad: " << *i << std::endl;
    } 

    std::cout << std::endl;

    // works on all three
    for (unsigned i = 0; i < scoring_segment_codes_.at(1).size(); i++) {
        std::cout << "Good: " << scoring_segment_codes_.at(1)[i] << std::endl;
    }

    std::cout << std::endl;

    // works on all three
    auto bees = scoring_segment_codes_.at(1);
    for (auto i = bees.begin(); *i != 0; ++i)
    {
        std::cout << "Good: " << *i << std::endl;
    }
    return 0;
} 
```

该样本在`g++ (Debian 4.5.3-9) 4.5.3`and上的输出`Microsoft VC++`为：

```
Bad: 3
Bad: 4

Good: 3
Good: 4
Good: 0

Good: 3
Good: 4 
```

这就是我所期望的输出。但是，`g++ (Debian 4.7.1-7) 4.7.1`产生输出：

```
Bad: 3
Bad: 32513
Bad: 6297664

Good: 3
Good: 4
Good: 0

Good: 3
Good: 4 
```

不同之处似乎在于检索迭代器的方式。我曾认为结果`auto i = scoring_segment_codes_.at(1).begin()`是定义的行为。不是吗？还是问题完全是其他问题？

如果这是 g++ 4.7.1 的问题，那么不幸的是，这是一个我坚持使用的系统。有什么我可以让它在 g++ 4.7.1 上工作的吗？我知道通过并确保所有迭代器的使用是兼容的是一种选择，但这似乎是一个非常丰富的错误来源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:59:27.967

~~根据我的评论，我使用的 g++ 版本略有不同（4.7.0）。查看他们的数组实现的实际代码可以得出：~~

 ~~```
#ifdef __EXCEPTIONS
  constexpr const_reference
  at(size_type __n) const
  {
return __n < _Nm ? 
       _M_instance[__n] : throw out_of_range(__N("array::at"));
  }
//#else path 
```~~ 

从[Consexpr GCC Wiki](http://gcc.gnu.org/wiki/Constexpr)中，我们得到“常量表达式是 noexcept，即使它涉及对未声明为 noexcept 的 constexpr 函数的调用。”。因此看起来有人错误地将其标记为`constexpr`即使它可以投掷。

我不确定这是否与错误报告相关，但它确实看起来像一个错误。一个临时的解决方法是使用`operator[]`- 但这看起来原因`operator[]`有效而`at`无效。

~~编辑：要回答评论，修改标准库头是一种可能性，尽管这肯定有问题。~~

另一种可能是创建一个如下所示的包装器（请注意，我尚未对此进行测试）：

```
template <typename T, std::size_t sz>
const T& at(const std::array<T, sz>& arr, typename std::array<T, sz>::size_type index)
{
    if(index < arr.size())
        return arr[index];
    throw std::out_of_range("array::at");
} 
```

对于非常量参考版本也是如此。请注意，这可以`array.at()`直接调用，因为非常量版本`at()`是正确的。

这些解决方案都不是完美的，但它们至少可以帮助您解决此错误。

**第二次编辑：**仔细研究一下，显然我错了，声明`constexpr`使用三元运算符抛出的函数是合法的。我将把修复留在这里，因为它有效，但我对正在发生的事情的分析是不正确的。

# javascript - 访问从 Greasemonkey 到 Page 的变量，反之亦然

> ID：13485122
> 
> 赞同：11
> 
> 时间：2012-11-21T01:41:49.993
> 
> 标签：javascript, firefox, firefox-addon, greasemonkey

我在 </body> 之前运行的*test.js*中有以下代码：

```
alert('stovetop');
alert(greasy); 
```

*我在test.user.js*中有以下代码：

```
(function () {

    'use strict';
    var greasy = 'greasy variable';
    document.title = 'greasy title';

}()); 
```

'stovetop' 收到警报，所以我知道页面 javascript 有效，并`document.title`得到更改，所以我知道脚本 javascript 有效。但是，在网页上我收到错误：

> 错误：ReferenceError：未定义油腻源文件：/test.js

我如何从网页访问 Greasemonkey 设置的变量，反之亦然？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-21T02:55:16.613

*   Greasemonkey 脚本在单独的范围内运行，也可能在沙箱中运行，具体取决于[`@grant`设置](http://wiki.greasespot.net/@grant)。

*   此外，问题代码`greasy`在函数范围内隔离（如gladoscc所说）。

*   最后，默认情况下，***test.js***将在 Greasemonkey 脚本之前触发，因此无论如何它都不会看到任何设置的变量。用来[`@run-at document-start`](http://wiki.greasespot.net/Metadata_Block#.40run-at)解决这个问题。

所以，给定这个***test.js***，在之前运行`</body>`：

```
window.targetPages_GlobalVar = 'stovetop';

console.log ("On target page, local global: ", targetPages_GlobalVar);
console.log ("On target page, script global: ", gmScripts_GlobalVar); 
```

然后以下将起作用：

**没有沙箱：**

```
// ==UserScript==
// @name        _Greasemonkey and target page, variable interaction
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @include     http://output.jsbin.com/esikut/*
// @run-at      document-start
// @grant       none
// ==/UserScript==

//--- For @grant none, could also use window. instead of unsafeWindow.
unsafeWindow.gmScripts_GlobalVar = 'greasy';

console.log ("In GM script, local global: ", unsafeWindow.targetPages_GlobalVar);
console.log ("In GM script, script global: ", gmScripts_GlobalVar);

window.addEventListener ("DOMContentLoaded", function() {
    console.log ("In GM script, local global, after ready: ", unsafeWindow.targetPages_GlobalVar);
}, false); 
```

**使用沙箱，没有功能范围，`unsafeWindow`:**
==>**重要更新：** [Greasemonkey 更改了 2.0 版的 unsafeWindow 处理，下一个示例脚本将不适用于 GM 2.0 或更高版本](https://stackoverflow.com/a/24720223/331508)。其他两种解决方案仍然有效。

```
// ==UserScript==
// @name        _Greasemonkey and target page, variable interaction
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @include     http://output.jsbin.com/esikut/*
// @run-at      document-start
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

unsafeWindow.gmScripts_GlobalVar = 'greasy';

console.log ("In GM script, local global: ", unsafeWindow.targetPages_GlobalVar);
console.log ("In GM script, script global: ", unsafeWindow.gmScripts_GlobalVar);

window.addEventListener ("DOMContentLoaded", function() {
    console.log ("In GM script, local global, after ready: ", unsafeWindow.targetPages_GlobalVar);
}, false); 
```

**使用沙箱，无功能范围，*脚本注入*：**

```
// ==UserScript==
// @name        _Greasemonkey and target page, variable interaction
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @include     http://output.jsbin.com/esikut/*
// @run-at      document-start
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

function GM_main () {
    window.gmScripts_GlobalVar = 'greasy';

    console.log ("In GM script, local global: ", window.targetPages_GlobalVar);
    console.log ("In GM script, script global: ", window.gmScripts_GlobalVar);

    window.addEventListener ("DOMContentLoaded", function() {
        console.log ("In GM script, local global, after ready: ", window.targetPages_GlobalVar);
    }, false);
}

addJS_Node (null, null, GM_main);

function addJS_Node (text, s_URL, funcToRun, runOnLoad) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    if (runOnLoad) {
        scriptNode.addEventListener ("load", runOnLoad, false);
    }
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

* * *

笔记：

1.  [**您可以针对此页面**(output.jsbin.com/esikut/1)](http://output.jsbin.com/esikut/1)测试这些脚本。
2.  没有沙箱，`unsafeWindow`都`window`一样。
3.  所有这些脚本在控制台上产生相同的输出：

    ```
    In GM script, local global: undefined
    In GM script, script global: greasy
    On target page, local global: stovetop
    On target page, script global: greasy
    In GM script, local global, after ready: stovetop 
    ```

4.  *脚本注入*代码将在除 Firefox 之外的各种浏览器中工作。`unsafeWindow`目前仅适用于 Firefox+Greasemonkey（或 Scriptish）或 Chrome+Tampermonkey。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T01:46:35.780

您的变量`greasy`是在匿名函数的范围内定义的。您甚至无法`greasy`在您的用户脚本中访问，除非它是您功能的一部分。例子：

```
(function(){
    var foo = 5;
    alert(foo);
}();
alert(foo); //ERROR, because foo is undefined outside of the function. 
```

这样做：

```
var foo = 5;
(function(){
     alert(foo);
}();
alert(foo); 
```

另外，为什么要将所有代码放在匿名函数中然后执行它？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-09T21:12:01.600

您还可以使用[localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)：

```
localStorage.setItem("numberOfThings", "42");

localStorage.getItem("numberOfThings"); 
```

# node.js - 无法在 socket.io 中调用方法“on”

> ID：13485128
> 
> 赞同：0
> 
> 时间：2012-11-21T01:42:18.247
> 
> 标签：node.js, terminal, socket.io

我在尝试编写 socket.io 代码的第一步时遇到了这个错误，我实际上是在遵循[socket.io 官方网站中](http://socket.io/#how-to-use)的指南，然后当我运行我的代码时，在我的终端中显示错误“不能在第 18 行调用未定义的“on”方法。为什么会发生这种情况？我之前正确安装了socket.io。[这是这里](http://i1193.photobucket.com/albums/aa344/hiatus1/socketio.png)的截图

任何建议和建议都会非常感激，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:21:20.837

您的屏幕截图表明`io.socket`不存在。从该示例页面并快速查看[源代码](https://github.com/LearnBoost/socket.io/blob/master/lib/manager.js#64)，您的意思似乎是`io.sockets`？

`io.socket`似乎不存在，因此“无法调用未定义的方法'on'”错误。

# wpf - 将单个 DataGrid 单元格绑定到单个数组元素

> ID：13485130
> 
> 赞同：1
> 
> 时间：2012-11-21T01:42:21.763
> 
> 标签：wpf, data-binding, datagrid

正如标题中所说，我正在尝试将单个列单元格绑定到我的加载数组中的单个元素，但我不确定如何执行绑定。

VM 实现 INotifyCollectionChanged。

```
foreach( Load L in VM.GetLoads()) //returns an ienumerable array of loads
{
    LoadGrid2.Columns.Add(new DataGridTextColumn());
    LoadGrid2.Columns[L.Index].Binding = VM.Loads[L.Index]; // this doens't work but illustrates what I am trying to get done
} 
```

[编辑] 更改 VM 以实现 IDynamicMetaObjectProvider 是否有帮助？ [http://msdn.microsoft.com/en-us/vstudio//ff800651.aspx](http://msdn.microsoft.com/en-us/vstudio//ff800651.aspx)

[编辑] 现在我在想，也许我应该使用 xaml 定义的 UserControl？

# c++ - 重载分辨率解析为尚不可见的功能

> ID：13485132
> 
> 赞同：5
> 
> 时间：2012-11-21T01:42:30.463
> 
> 标签：c++

[这是对这个](https://stackoverflow.com/questions/13484308/what-set-of-functions-is-considered-when-resolving-overloaded-functions-assignin)问题的一种跟进。

```
#include <iostream>

struct type1 {};
struct type2 {};

void foo(type1 x)
{
  std::cout << "foo(type1)" << std::endl;
}

template<typename T>
void bar() {
  foo(T());
}

int main()
{
  bar<type1>();
  bar<type2>();
  return 0;
}

void foo(type2 x)
{
  std::cout << "foo(type2)" << std::endl;
} 
```

上面的代码在in`foo(type2)`的实例化时是不可见的。然而代码编译并产生以下输出：`bar<type2>``main`

```
foo(type1)
foo(type2) 
```

编译器如何知道`foo(type2)`在实例化时`bar<type2>`可用`main`？

编辑：我试图更多地了解模板实例化期间的重载解析是如何工作的。考虑下面的代码：

```
#include <iostream>

struct type1 {};
struct type2 {};
struct type3 {
  operator type2() { return type2(); }
};

void foo(type1 x)
{
  std::cout << "foo(type1)" << std::endl;
}

void foo(type2 x)
{
  std::cout << "foo(type2)" << std::endl;
}

int main()
{
  foo(type3());
  return 0;
}

void foo(type3 x)
{
  std::cout << "foo(type3)" << std::endl;
} 
```

输出是

```
foo(type2) 
```

即使有更接近的匹配`foo(type3)`可用，调用也会`foo(type3())`解析为，`foo(type2)`因为这是编译器在此之前解析过的唯一候选对象。现在考虑以下代码：

```
#include <iostream>

struct type1 {};
struct type2 {};
struct type3 {
  operator type2() { return type2(); }
};

void foo(type2 x)
{
  std::cout << "foo(type2)" << std::endl;
}

template<typename T>
void bar() {
  foo(T());
}

int main()
{
  bar<type3>();
  return 0;
}

void foo(type3 x)
{
  std::cout << "foo(type3)" << std::endl;
} 
```

输出是

```
foo(type3) 
```

也就是说，在调用点`bar<type3>()`，即使 only`foo(type2)`是可见的，编译器仍然会选择`foo(type3)`稍后出现的，因为这是更接近的匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T01:50:13.690

任何没有定义的符号都将在链接过程中被替换，因为该函数`foo(type2)`可以在另一个文件中提供。

编译器是说在整个过程结束时是否已经定义了需要的函数，此时不能再进行替换。

为了澄清理解，您必须了解编译（例如，一个普通的 C 程序）所需的步骤：

*   首先，展开代码中的所有宏；

*   然后根据语言语法验证您的代码，以便将其转换为汇编语言——编译过程本身；在此步骤中，找到的每个没有定义的符号都将在一个带有条目的表中进行注释，这些条目`(symbol, definition)`将在以后完成，从而使您的程序能够正确构建；

*   接下来，您编译成汇编的代码将被转换为机器语言，即创建对象；

*   最后，您需要链接您已经可执行的对象，以解决对符号定义的任何依赖；最后一步检查您的对象是否有未定义的符号，添加来自其他模块或库的定义，从而完成程序。

如果任何符号未正确“链接”到其定义，编译器将指出您程序中的错误——经典的`undefined reference to...`.

考虑到您发布的代码，该过程将一直执行，直到它到达编译器。编译器会遍历代码，注意`type1`、`type2`、`foo(type1 x)`和的定义`bar<T>()`。

```
struct type1 {};
struct type2 {}; 
```

当它到达 main 时，它会找到对 的调用`bar<type1>();`，并且会调用`foo(type1())`，这是已知的，可以正确使用。

```
void foo(type1 x) {
    std::cout << "foo(type1)" << std::endl;
}

template<typename T>
void bar() {
    foo(T());
}

int main() {

    bar<type1>();
    bar<type2>();
    return 0;

} 
```

一旦它到达下一次调用，`bar<type2>();`它会尝试调用`foo(type2())`，但是没有这样的定义可供使用，所以它会将这个调用作为一个未知符号关联起来，在以后的过程中必须用一个定义替换它。

在编译器运行完之后`main`，它会得到一个新的定义，这正是正在创建的“翻译表”上缺少定义的那个。

```
void foo(type2 x) {
    std::cout << "foo(type2)" << std::endl;
} 
```

因此，在下一步中，编译能够将符号替换为其各自的定义，并且程序可以正确编译。

问候！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T03:22:55.937

答案是通过与参数相关的名称查找 (ADL) 找到的（在链接的问题中也提到了这一点）。`foo(T());`有两个查找。首先在模板定义时，在定义点定义的任何函数都包含在重载集中。这意味着当编译器看到`foo(T());`内部时，*它只*`bar`添加到重载集。但是，会执行**第二次**查找，称为 ADL。在模板实例化时，即它在与提供的参数相同的命名空间中查找 a ，在本例中为. 由于是在全局命名空间中，它会寻找一个需要一个 *`void foo(type1 x)`**`bar<type2>();``foo``type2``type2``foo``type2`在全局命名空间中找到它，然后解析调用。如果您正在寻找来自标准的信息，请参阅`14.6.4.2 Candidate functions`。***

 ***尝试以下操作并观察代码失败。这是因为它无法`foo`在与`a::type1`.

```
#include <iostream>

namespace a
{
  struct type1 {};
}

template<typename T>
void bar() {
  foo(T());
}

int main()
{
  bar<a::type1>();
  return 0;
}

void foo(a::type1 x)
{
  std::cout << "foo(a::type1)" << std::endl;
} 
```***

# html - html图片没有出现

> ID：13485149
> 
> 赞同：0
> 
> 时间：2012-11-21T01:44:54.280
> 
> 标签：html, css

我有以下代码行：

```
<IMG SRC= "Home.png"> 
```

我直接从我工作的代码的不同部分复制了这个。但是，现在主页图像不会显示在我的网站上。它说它打印它，但它不可见。这是怎么回事？

编辑：

```
if(isset($_SESSION['userInfo']['username'])){
    echo '<div class = "header"><a href = "mainPage.php"><IMG SRC= "Home.png" ALT="image"></a>  
    <a href = "myProfile.php"><IMG SRC= "ViewProfile.png" ALT="image"></a>  <a href="cartContents.php"><IMG SRC= "ViewCart.png" ALT="image"></a>';
    echo '</div>';
else{
    echo '<div class = "header">
    <IMG SRC= "Home.png">
    <IMG SRC= "FAQ.png"></div>';
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:05:20.290

您缺少**if**语句`}`的右括号。这可能是问题所在。

 **尝试这个...

```
if(isset($_SESSION['userInfo']['username'])){
    echo '<div class = "header"><a href = "mainPage.php"><IMG SRC= "Home.png" ALT="image"></a>  
    <a href = "myProfile.php"><IMG SRC= "ViewProfile.png" ALT="image"></a>  <a href="cartContents.php"><IMG SRC= "ViewCart.png" ALT="image"></a>';
    echo '</div>';
} else {
    echo '<div class = "header">
    <IMG SRC= "Home.png">
    <IMG SRC= "FAQ.png"></div>';
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:07:04.327

尝试

```
<div class="header">
  <img src="Home.png"/>
  <img src="FAQ.png"/>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T01:56:34.570

它是浏览器上损坏的图像图标吗？

一件事可能是 Home.png 在另一个目录中。您是从同一个文件或另一个文件（可能位于另一个目录中）复制此代码吗？如果您从位于另一个目录的文件中复制此代码，则需要相应地格式化图像源链接。

例如，假设您有这样的目录结构：

-index.htm（文件）-Home.png（文件）-js（目录）-css（目录）-pages（目录）---example.htm（文件在Pages目录中）

如果您随后将代码从 index.htm 文件复制到位于 pages 目录中的 example.htm，您将需要修改 example.htm 页面中的链接，如下所示：

```
<img src="../Home.png" /> 
```

请注意“..”，它告诉浏览器从您的 html 页面所在的位置向上查找一个目录。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-21T02:00:05.980

确保图像和文件在同一个文件夹中，并确保图像首页的名称以 H 为大写字母**

# java - 超类/子类程序中的主要方法错误

> ID：13485153
> 
> 赞同：-1
> 
> 时间：2012-11-21T01:45:45.330
> 
> 标签：java, subclass, main, superclass

刚刚编辑了这个，所以它显示了所有的代码。希望对您有所帮助

我不知道如何为我的程序声明一个主要方法。

这就是我尝试的方法，我得到了大约 45 个错误，主要是非法异常：

```
public class Rectangle1{

private double width;
private double height;

public Rectangle1(){
}

public Rectangle1(double width, double height){
    this.width = width;
    this.height = height;
    }

public double getWidth(){
    return width;
    }

public void setWidth(double width) {
    this.width = width;
    }

public double getHeight(){
    return height;
    }

public void setHeight(double height){
    this.height = height;
    }

public double getArea(){
    return width * height;
    }

public double getPerimeter(){
    return 2 * (width + height);
    }
public static void main (String [] args){
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:50:00.457

您必须确保关闭所有括号

```
public class Rectangle1{

    private double width;
    private double height;

public Rectangle1(){
}

public static void main (String [] args){

}

public Rectangle1(double width, double height){
    this.width = width;
    this.height = height;
    }

} 
```

您可能是，但您只是没有显示您的代码，如果您关闭它们，我将删除它们。

编辑：我更改了代码以匹配您的新代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T01:51:01.547

您在 main 方法 ( ) 中声明了一个*构造*函数`public Rectangle1(double width, double height){...`。将其移到方法之外。此外，不言而喻，您将不得不关闭所有括号。

```
public class Rectangle1 {

    private double width;
    private double height;

    public Rectangle1() {
    }

    public Rectangle1(double width, double height) {
        this.width = width;
        this.height = height;
    }

    public static void main(String[] args) {

    }
} 
```

正如我在上面所做的那样，如果您正确缩进它，您可能会发现您的代码更容易管理/更新。

* * *

***编辑***：看到您编辑的代码后，看起来您基本上在 main 方法中声明了所有内容（这就是您遇到这么多错误的原因）......将所有垃圾移出并放入类主体本身。

# php - php foreach echo 将“Array”打印为值

> ID：13485156
> 
> 赞同：6
> 
> 时间：2012-11-21T01:45:54.987
> 
> 标签：php, arrays, foreach

也许我只是无法理解 php 如何处理数组。

我正在尝试使用 foreach 循环打印出一个数组。我似乎能从中得到的只是“数组”这个词。

```
<?php 
    $someArray[]=array('1','2','3','4','5','6','7'); // size 7
    foreach($someArray as $value){ 
        echo $value;    
?> 

<br />

<?php
    }
?> 
```

这打印出来：

```
Array 
```

我很难理解为什么会这样。如果我像上面一样预先定义一个数组，它将打印“Array”。似乎我必须手动定义所有内容......这意味着我一定做错了什么。

这有效：

```
<?php 
    $someArray[0] = '1';
    $someArray[1] = '2';
    $someArray[2] = '3';
    $someArray[3] = '4';
    $someArray[4] = '5';
    $someArray[5] = '6';
    $someArray[6] = '7';

    for($i=0; $i<7; $i++){
        echo $someArray[$i]."<br />";
    }
?> 
```

为什么 foreach 不起作用？

这是一个查看它的链接>> [http://phpclass.hylianux.com/test.php](http://phpclass.hylianux.com/test.php)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T01:47:01.987

您没有正确声明数组。
您必须删除方括号：`[]`。

```
<?php 
$someArray=array('1','2','3','4','5','6','7'); // size 7
foreach($someArray as $value){ 
    echo $value;    
?>  <br />
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T01:53:13.913

尝试：

```
<?php 
$someArray = array('1','2','3','4','5','6','7'); // size 7
foreach($someArray as $value){ 
    echo $value . "<br />\n";
}
?> 
```

或者：

```
<?php
$someArray = array(
  0 => '1',
  'a' => '2',
  2 => '3'
);
foreach($someArray as $key => $val){
  echo "Key: $key, Value: $val<br/>\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:20:54.003

实际上，您正在将一个数组添加到另一个数组中。

```
$someArray[]=array('1','2','3','4','5','6','7'); 
```

正确的方法是

```
$someArray=array('1','2','3','4','5','6','7'); 
```

# php - 在 CakePhp 中，我怎样才能从我的数据库中只检索一列？

> ID：13485159
> 
> 赞同：6
> 
> 时间：2012-11-21T01:46:12.260
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-model

我有一个非常简单的应用程序，有 1 个表，每行包含一个单词、它的定义和一个示例。

定义和示例字段是 varchars(5000)。

在每一页上，我都有一个显示单词列表的侧边栏。经过一定数量的单词后，我开始收到以下错误：

```
Error: Allowed memory size of 33554432 bytes exhausted 
```

控制器中设置元素中使用的变量的代码：

```
$this->set('allWords', $this->Word->find('all', array('order' => array('Word.text ASC')))); 
```

我怀疑 find 方法读取了所有行数据，包括定义和示例，我现在真的不需要，这会导致错误。

有没有办法只读取 id 和 word，而不是每行的定义和示例值？

**更新**

在我的 Element 中，我循环遍历 $allWords 数组以打印出每个单词以及一个链接：

```
echo '<h3>Words ('.count($allWords).')</h3>';
echo $this->Html->link('Add new', array('controller' => 'words', 'action' => 'add'));
echo '<br/><br/>';

foreach($allWords as $thisWord)
{
    echo $this->Html->link($thisWord['Word']['text'], array('controller' => 'words', 'action' => 'edit', $thisWord['Word']['id']));

    if( ($thisWord['Word']['example'] == '') || ($thisWord['Word']['definition'] == '') )
    {
        echo '&nbsp;' . $this->Html->image('warning.png');
    }
    echo '<br \>';
} 
```

看来，如果我注释掉 foreach 循环的内部部分，我不会收到内存错误。

本例中的 SQL 输出为：

```
SELECT `Word`.`id` FROM `idioms`.`words` AS `Word` WHERE 1 = 1 ORDER BY `Word`.`text` ASC` 
```

受影响的行数为 339 行。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T01:52:56.190

传递关联数组中的**字段参数**

```
'fields'=>array('Word.id','Word.word') 
```

你能试试这个吗？

```
$this->set('allWords', $this->Word->find('all', array('order' => array('Word.text ASC'), 'fields'=>array('Word.id','Word.word') ))); 
```

更多信息 [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T09:01:44.860

## 使用 find('list')

获取单个字段值列表的一种简单方法是使用[find('list')](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)：

```
$values = $this->find('list', array(
    'fields' => array('id', 'text'),
    // ^ what to use for key and value of `$values`
    'order' => Word.text'
)); 
```

如果`text`是相关模型的[displayField](http://book.cakephp.org/2.0/en/models/model-attributes.html#model-displayfield)，则根本不需要指定字段，因为主键字段，并且显示字段是默认值：

```
$values = $this->find('list', array(
    'fields' => array('id', 'text'),
    'order' => Word.text'
)); 
```

# ruby - 如何找到数组和数组数组之间的交集

> ID：13485164
> 
> 赞同：0
> 
> 时间：2012-11-21T01:46:40.810
> 
> 标签：ruby

我有两个数组：

```
 array1 = [:key1, :key2]
 array2 = [[:key1,2],[:key2,8],[:key3,1]] 
```

我想要一个数组数组，`array2`其中`:key...`存在`array1`. 例如，对于上述：

```
 result = [[:key1,2],[:key2,8]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T01:51:35.513

这满足您的示例：

```
array2.select {|key,value| array1.include?(key) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:18:06.270

这可以使用快速哈希切片：

```
array1.zip(Hash[array2].values_at(*array1))
=> [[:key1, 2], [:key2, 8]] 
```

如果重复的键值将不起作用`array2`，因为它们会踩到以前的实例。否则，如果他们不重复，这将非常快，尤其是在`array2`增长的情况下。

# jquery - 如何一次暂停所有视频（html5）？

> ID：13485167
> 
> 赞同：11
> 
> 时间：2012-11-21T01:47:03.583
> 
> 标签：jquery, video.js

```
// now pause all active videos
$('.vid').get(0).pause();
$('.vid').get(1).pause();
$('.vid').get(2).pause(); 
```

这就是我现在所拥有的，但它并不理想。我有点累了，所以我可能会遗漏一些明显的东西，但是我怎么能告诉它暂停页面上所有 .vid 类的实例呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T20:49:49.300

尝试

```
$('.vid').each(function() {
    $(this).get(0).pause();
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-12-02T13:37:46.990

没有真正需要 jQuery，ES6 方式（应该在大多数现代浏览器中工作......）

对于所有`<video>`标签：

```
document.querySelectorAll('video').forEach(vid => vid.pause()); 
```

或在您的情况下（寻找`.vid`课程）：

```
document.querySelectorAll('.vid').forEach(vid => vid.pause()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-07T19:38:26.140

```
$("video").each(function() {
    $(this).get(0).pause();
}); 
```

更一般？所有视频！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T15:27:12.823

Video.js 将页面上的所有播放器存储在*V* .players 中的一个对象中，因此您可以执行以下操作。

## 视频 JS 3.x

**普通JS**

```
for( player in window._V_.players ) {
    window._V_.players[player].pause();
} 
```

[http://jsfiddle.net/3n1gm4/SNZAS/](http://jsfiddle.net/3n1gm4/SNZAS/)

**jQuery**

```
jQuery.each( window._V_.players, function( i, player ) {
    player.pause();
}); 
```

[http://jsfiddle.net/3n1gm4/cJ8jx/](http://jsfiddle.net/3n1gm4/cJ8jx/)

## 视频 JS 4.x

**普通JS**

```
for( player in window.vjs.players ) {
    window.vjs.players[player].pause();
} 
```

**jQuery**

```
jQuery.each( window.vjs.players, function( i, player ) {
    player.pause();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T01:50:11.773

将

`jQuery.each($('.vid'), pause)`

工作？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-25T19:03:52.550

此选项适用于所有浏览器。这是一个简单的`for`循环来获取所有视频标签，然后暂停每个标签。

```
var videoList = document.getElementsByTagName("video");
for (var i = 0; i < videoList.length; i++) {
    videoList[i].pause();
} 
```

# c++ - C，如何将多维数组传递给 CLR/类库项目中的函数

> ID：13485172
> 
> 赞同：0
> 
> 时间：2012-11-21T01:47:59.813
> 
> 标签：c++, vb.net, pointers, dll, multidimensional-array

我正在尝试用 c++（在 CLR/类库下）编写一个 dll，以作为 vb.net 项目中的引用添加。我解释了我遇到的问题：当我在不使用数组或指针的情况下编写通用函数时，一旦我构建了我的 c++ 项目并将生成的 dll 作为参考添加到我的 vb.net 项目中，我就可以可视化并使用这个函数。但是，当我尝试编写一个必须使用多维数组的函数时，在 vb 的“对象查看器”中显示的方法中，我的新函数不存在。

有什么我应该知道的特别是使用多维数组作为函数中的参数，当我添加作为引用我的 dll 时可见？或者也许我必须遵循完全不同的方式？

请让我知道如何解决这个问题。

谢谢你能给我的任何帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:10:15.740

一种解决方案，使用 C++/CLI DLL 作为中介。C++/CLI 可以处理本机类型和托管类型。因此，您可以先将 natvie 多维数组作为参数传递给 C++/CLI，然后在 C++/CLI Dll 中创建托管多维数组，并将本机多维数组的值分配给托管多维数组。最后，这个托管的可以传递给 VB.NET。

我曾经使用这个解决方案将多维数组从C传递到C#，当时我试图找到更好的解决方案，但我没有。我希望现在会有。

# php - Ajax 和 JSON 响应的问题

> ID：13485175
> 
> 赞同：1
> 
> 时间：2012-11-21T01:48:40.510
> 
> 标签：php, javascript, jquery

我是一个非常新手的程序员，他正在制作一个应用程序，其中有多个带有**jcontainer**类的 div 。每个**jcontainer**都有一个与之关联的 id，它对应于数据库中名为**apptid的字段。**在 Jquery 中，我每 5 秒向 php 页面发送一个 AJAX 请求，以检索数据库中名为**currentlocation**的字段（对应于**apptid**），每个**jcontainer 都会**发生这种情况。

这是我的代码：

HTML：

```
<div class='jcontainer' data-param='jcontainer_IDNUMBER'>

  <button class='checkIn' data-param='button_IDNUMBER'>Check In</button>
  <form method='post' class='myForm' action=''>
       <select name='locationSelect' class='locationSelect' data-param='location_IDNUMBER'>
            <option value='1'>Exam Room</option>
            <option value='2'>Exam Room 2</option>
            <option value='3'>X-Ray Room</option>
            <option value='1000'>Check Out</option>
       </select>
  </form>
  <div class='finished' style='color:#ff0000;'>Checked Out</div>

</div> 
```

jQuery：

```
<script type="text/javascript">
$(document).ready(function() {

  setInterval(function(){

    $('.jcontainer').each(function() {
        var $e = $(this);
        var dataid = $e.data("param").split('_')[1] ;

        $.ajax({
            url: 'heartbeat.php',
            method: 'post',
            contentType: "application/json",
            dataType: "json",
            data: dataid,
            success: function(data){
                var msg = $.parseJSON(response);
                alert(msg);
            }
        });

    });
  },5000);

  //other code that I didn't post, because it's not really relevant, but can post if needed be 
```

和php页面：

```
<?php

$hostname = 'localhost';

$username = '******';

$password = '*************';

$apptid = $_POST['dataid'];

$db = new PDO("mysql:host=$hostname;dbname=sv", $username, $password);
$statement = $db->prepare("SELECT currentlocation FROM schedule WHERE apptid = :apptid");
$statement->execute(array(':apptid' => $apptid));
$row = $statement->fetch();

$currentlocation = array('CurrentLocation' => $row['currentlocation']);
echo json_encode($currentlocation);

?> 
```

问题是我无法从警报（msg）中得到任何响应。为什么是这样？我检查了 Chrome 开发人员，没有出现任何错误。

最终目标是将当前位置编号记录在 jquery 变量中。前->`var currentLocation = Number`

感谢您的所有帮助，如果您需要更多详细信息来解决问题，我可以很高兴地发布！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T01:58:13.080

这段代码：

```
success: function(data){
            var msg = $.parseJSON(response);
            alert(msg);
        } 
```

应该读

```
success: function(data){
            var msg = $.parseJSON(data);
            alert(msg);
        } 
```

导致`response`变量未声明且未定义，因此您应该`data`在 parseJSON 方法中使用该变量，因为这是接收到的实际数据。希望这可以为您解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:22:00.603

你不需要`$.parseJSON`，jQuery 会自动解析 JSON，因为你告诉它`dataType: "json"`。你`alert`应该说`Object`。使用浏览器控制台，`console.log(data)`查看对象的结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:39:57.507

您可以使用我的库自动为您执行此操作[http://phery-php-ajax.net](http://phery-php-ajax.net)

```
function heartbeat($data){
  $r = new PheryResponse;

  $hostname = 'localhost';

  $username = '******';

  $password = '*************';

  $apptid = $data['id'];

  $db = new PDO("mysql:host=$hostname;dbname=sv", $username, $password);
  $statement = $db->prepare("SELECT currentlocation FROM schedule WHERE apptid = :apptid");
  $statement->execute(array(':apptid' => $apptid));
  $row = $statement->fetch();

  // If you want to manipulate the DOM inside the jcontainer use:
  // $r->this()->find('.locationSelect'); 
  // for examplee
  return $r->set_var('currentLocation', $row['currentlocation']); //set the global var
}

Phery::instance()->set(array(
  'heartbeat' => 'heartbeat'
))->process(); 
```

你会改变你的 HTML 以适应 Phery 库

```
<div class='jcontainer' data-remote='heartbeat' data-args="<?php echo Phery::args(array('id' => $number)); /* place your number in here */ ?>" id='jcontainer_IDNUMBER'>
  <button class='checkIn' data-param='button_IDNUMBER'>Check In</button>
  <form method='post' class='myForm' action=''>
     <select name='locationSelect' class='locationSelect' data-param='location_IDNUMBER'>
        <option value='1'>Exam Room</option>
        <option value='2'>Exam Room 2</option>
        <option value='3'>X-Ray Room</option>
        <option value='1000'>Check Out</option>
     </select>
  </form>
  <div class='finished' style='color:#ff0000;'>Checked Out</div>
</div> 
```

你的新 jquery 每个都将是：

```
$('.jcontainer').each(function(){
  var $this = $(this);
  $this.phery('remote'); // call the remote AJAX with the data
}); 
```

如果你想在开发控制台中检查数据，你可以使用，PHP 变量将被转储到控制台中

```
$r->dump_var($row, $apptid); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T01:56:47.423

你应该使用[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)

```
$.getJSON("heartbeat.php?jsoncallback=?",
    {dataid},
    function(data){
        console.log(data);  
    }
); 
```

然后在您的 PHP 中，您必须像这样使用 jsoncallback：

```
echo $_GET['jsoncallback'].'('.json_encode($currentlocation).')'; 
```

这里需要注意两点。

1、我把json的返回值`data`放在了`console`，而不是`alert()`

2，您可能需要检查`dataid`变量，因为它使用传统的数组值（`id:3,key:value`）方法而不是“ `id=3&key=vaule`”

# ruby - 第一次运行 ruby 应用程序

> ID：13485180
> 
> 赞同：0
> 
> 时间：2012-11-21T01:49:10.120
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试在我的 Snow Leopard Mac 上运行 Rails 应用程序。我以前从未使用过 Ruby 或 Rails，所以欢迎任何提示。

在终端中，我转到应用程序的文件夹，然后运行`rails server` 并收到以下错误：

```
Could not find gem 'mysql2 (>= 0) ruby' in any of the gem sources
listed in your Gemfile. Run `bundle install` to install missing gems. 
```

我的 gemfile 看起来像：

```
source 'http://rubygems.org'

gem 'rails', '3.1.0'

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'mysql2'
end

group :production do
  gem 'pg'
  gem 'thin'
end 
```

并且适用`database.yml`于`adapter: mysql2`所有环境。我已经跑了`bundle install`，从跑步中`gem list`我得到了：

```
mysql2 (0.3.11) 
```

我的宝石环境是：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.17
  - RUBY VERSION: 1.9.3 (2012-02-16 patchlevel 125) [x86_64-darwin10.8.0]
  - INSTALLATION DIRECTORY: /Users/user/.rvm/gems/ruby-1.9.3-p125@rails3
  - RUBY EXECUTABLE: /Users/user/.rvm/rubies/ruby-1.9.3-p125/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/user/.rvm/gems/ruby-1.9.3-p125@rails3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-10
  - GEM PATHS:
     - /Users/user/.rvm/gems/ruby-1.9.3-p125@rails3
     - /Users/user/.rvm/gems/ruby-1.9.3-p125@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

到目前为止，我一直在解决这个问题超过两个小时，但没有运气。

# javascript - 我可以访问显示给用户的语言环境格式的字符串吗?

> ID：13485184
> 
> 赞同：1
> 
> 时间：2012-11-21T01:49:36.070
> 
> 标签：javascript, html, date, dom, input

在 Chrome 的最后几个主要版本中，您可以显示一个日期输入字段，其值格式化为用户的区域设置，如下所示：

```
<input type="date" value="2012-11-20"> 
```

在 Mac OS X 上，将美国设置为我的地区（使用默认日期格式），Chrome 向我显示：

![显示日期输入字段](../Images/34fdc6435f4b2b04511dccdb4693c80d.png)

有什么方法可以访问 JavaScript 中显示的字符串？（[这个答案](https://stackoverflow.com/questions/7372038/is-there-any-way-to-change-input-type-date-format)将其称为**演示格式**。）属性和方法喜欢`input.value`并`input.valueAsDate.toLocaleDateString()`以各种格式给我相同的日期，但没有一个与演示格式完全匹配。

这是我的一些尝试：http: [//jsfiddle.net/peterjmag/7KSbA/2/](http://jsfiddle.net/peterjmag/7KSbA/2/)。在我的 Mac 上使用 Chrome 23，它给了我以下输出：

```
[11/20/12]

input.value
2012-11-20

input.valueAsDate
Mon Nov 19 2012 17:00:00 GMT-0700 (MST)

input.valueAsDate.toDateString()
Mon Nov 19 2012

input.valueAsDate.toLocaleDateString()
Monday, November 19, 2012

input.valueAsDate.toISOString()
2012-11-20T00:00:00.000Z 
```

**编辑**：[这是一个类似的问题](https://stackoverflow.com/questions/2388115/get-locale-short-date-format-using-javascript)，让我认为这是不可能的（也就是说，没有定义重新格式化字符串的方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:00:00.503

无法直接获取文本，因为显示日期完全由浏览器处理（为了进一步说明这一点，请尝试使用 Inspect Element 在 Chrome 或 Firefox 上查找您要查找的字符串 - 您将无法到）。

但是，由于每个浏览器每次都会以相同的格式显示日期，因此*可以*让脚本检测浏览器并以与浏览器本身相同的方式格式化日期。恐怕这将是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:05:13.777

```
input.select();
var displayString = window.getSelection().toString(); 
```

这适用于 Chrome 23。但我认为它不适用于 Chrome 24。

# sql-server - SQL Server 在 CodeIgniter 中最后插入 id 返回数组

> ID：13485189
> 
> 赞同：0
> 
> 时间：2012-11-21T01:50:17.617
> 
> 标签：sql-server, codeigniter

我在 CI 中使用 sqlsrv 驱动程序但是，当我使用 $this->db->insert_id() 它返回给我一个数组

我在插入数据库后在控制器中执行此操作

错误号：42S22

[Microsoft][SQL Server Native Client 11.0][SQL Server]列名“数组”无效。

有人可以帮忙吗？非常感谢

```
Model
function insert_message($data)
{
 $this->db->insert('message', $data);
 $last_id = $this->db->insert_id();
 return $last_id;
}   

Controller
$message = $this->Message->insert_message(
$data = array(
        'admin_account_id'        => $accountid,
        'message_subject'     => $subject,
        'message_content'     => $content,
        'message_priority'    => $priority,
        'date_send'           => $date_send,
        'message_status'      => $status,
        'message_createddate' => date("Y-m-d H:i:s"),
        'message_send_usergroup'=> $usergroup
    );

);

Database driver (sqlsrv_driver.php)
function insert_id()
{

    return $this->query('select @@IDENTITY as insert_id')->row('insert_id');
} 
```

$data 不包括标识列。这是我现在使用的代码，但我仍然从 $last_id 获取一个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T14:05:12.240

代替 ：

```
return $this->db->insert_id(); 
```

您将替换为：

```
$query = $this->db->query("SELECT IDENT_CURRENT('<table_name>') as last_id");
$res = $query->result();
return $res[0]->last_id; 
```

这是一个临时解决方案。

# javascript - 将无序列表组划分为 3 个子组

> ID：13485191
> 
> 赞同：0
> 
> 时间：2012-11-21T01:50:23.160
> 
> 标签：javascript, jquery, count

我有一组无序列表，我试图将每个列表组动态划分为 3 个子组。到目前为止，我有这个：

```
var uls = $("ul > li");
for(var i = 0; i < uls.length; i+=3) {
uls.slice(i, i+3).wrapAll("<ul class='new'></ul>");
} 
```

...对于下面的一些示例 HTML

```
<h2>Group 1</h2>
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
</ul>

<h2>Group 2</h2>
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
<li>Item 7</li>
</ul> 
```

我遇到的问题是我的代码只是将所有`<ul>`s 混在一起而不考虑组，即我尝试使用的“组 1”“组 2” `.each(function() {`，`$("ul > li")`但我只是得到错误。我还尝试在 .length 之后向下移动每个函数，但这也不起作用。

所以最终的 HTML 看起来像这样：

```
<h2>Group 1</h2>
<ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
</ul>

<ul>
    <li>Item 4</li>
    <li>Item 5</li>
</ul>

<h2>Group 2</h2>
    <ul>
etc... 
```

[我的小提琴在这里，](http://jsfiddle.net/highrockmedia/aXqwt/6/)但你可以看到它还没有完全工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T01:55:52.103

这个怎么样？[http://jsfiddle.net/4Bms6/](http://jsfiddle.net/4Bms6/)

```
$('ul').each(function(){
    var uls = $("li", this);

    for(var i = 0; i < uls.length; i+=3) {

    var lis = $("li", this);

        uls.slice(i, i+3).wrapAll("<ul class='new'></ul>");
    }
});​ 
```

你得到不正确分组的原因是因为你从收集每个 li 开始（“ul > li”等于所有 li 是任何 ul 的子级）。您应该做的是选择作为每个 ul 的子级的所有 li，执行分组，然后转到下一个 ul。

# c++ - #include 来自宏 __FILE__ 的文件？

> ID：13485192
> 
> 赞同：5
> 
> 时间：2012-11-21T01:50:27.117
> 
> 标签：c++, macros, include, c-preprocessor

观察以下程序：

```
#include __FILE__
main(){} 
```

预处理器陷入无限递归，包括自身内部的副本并抱怨`main()`已被定义。

* * *

如果我可以使用宏来包含文件，我可以根据它派生文件名`__FILE__`并包含它吗？

* * *

例如，我想包含`"foo.h"`while inside `"foo.cpp"`，但从`__FILE__`.

*   [`##`](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)将连接宏。
*   也可以对宏 进行[字符串化。](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html#Stringification)

可以用预处理器完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T02:18:59.743

C标准规定了三种形式`#include`：

```
#include <file>
#include "file"
#include ANYTHING ELSE 
```

在前两种情况下，不会发生宏扩展，因此无法改变行为。在第三种情况下，C99 说（§6.10.2p4）：

> 指令中的预处理标记`#include`是[宏扩展]。所有替换后产生的指令应匹配前两种形式之一[脚注：请注意，相邻的字符串文字不会连接成单个字符串文字]。将 < 和 > 预处理标记对或一对 " 字符之间的一系列预处理标记组合成单个标头名称预处理标记的方法是实现定义的。

略有不同但实际上等效的措辞出现在 C++98 §16.2p4 中。

任何带有“shall”的句子都提出了一个硬性要求：在这种情况下，如果`ANYTHING ELSE`扩展为除了以 开头`<`和结尾`>`或以 开头和结尾的标记序列之外的任何内容，则程序是非良构的`"`。该标记序列的确切解释是实现定义的，但请注意脚注特别禁止字符串文字连接。

因此，由于 的扩展`__FILE__`是一个字符串常量，在 an 中使用它的唯一方法`#include`是

```
#include __FILE__ 
```

正如您所发现的，这会导致无限递归，并且

```
#define LT <
#define GT >
#include LT __FILE__ etc GT 
```

这对我可以方便地测试的所有编译器都有有趣但无用的影响。假设以上内容在一个名为的文件中`test.c`：

*   GCC 尝试打开一个名为 的文件`"test.c" etc`，其中包含引号和空格。
*   clang 更加字面化，并查找相同的文件名，但带有前导和尾随空格。
*   MSVC 宏*仅*`LT`扩展（我认为这是违反一致性的观点），抱怨没有匹配的`>`，然后尝试打开一个名为`__FILE__ etc GT`.

（[GCC 的行为记录在这里](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/cpp/Computed-Includes.html)；其他任何事情你都靠自己。）

tl; dr：没有办法从预处理器内部做你想做的事。我建议从您的构建系统中计算出要包含的文件的名称，并使用`-D`开关通知编译器（在 Unixy 系统上，您需要双引号，`-DINCLUDEME='"includeme.h"'`；我不会说 CMD）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:07:09.737

我想出的最好的是：

```
#define foo(x) #x
#include foo(x) 
```

> prog.cpp:2:16: 错误: x: 没有这样的文件或目录

# java - Android setContentView 与 Textview

> ID：13485193
> 
> 赞同：0
> 
> 时间：2012-11-21T01:50:32.423
> 
> 标签：java, android

我对 Android 应用程序编程完全陌生，我正在阅读 Google 的教程：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)。

在此页面上，在“显示消息”部分下，他们创建`TextView`对象，并使用`setContentView`该`textView`对象作为参数，以显示一些文本。我想知道，如果我理解正确，而不是`TextView`在代码中创建对象，你可以用 XML 来定义它吗？如果您在 XML 中定义它，是否需要您在 main_activity.xml 之外创建一个新的 XML 文件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:57:17.180

您可以在 xml 中声明所有布局和视图。对于给定的示例，代码如下所示

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set your parent view
    setContentView(R.layout.main_layout);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Get the reference to the TextView and update it's content
    TextView textView = (TextView)findViewById(R.id.my_text_view);
    textView.setText(message);
} 
```

你的 main_layout.xml 看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<TextView  xmlns:android="http://schemas.android.com/apk/res/android"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:textSize="40sp"
           android:id="@+id/my_text_view"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:54:07.440

您可以任意创建视图文件（XML 文件）并指定视图的主要类型及其包含的子视图。您可以`TextView`在 main_activity.xml 视图中创建元素并通过相对 ID 找到它。

*如果您只想为元素有一个单独*的视图，那么在相关文章中已经说过，如果您不想以`TextView`编程方式指定它，您可能需要另一个 XML 文件来定义该视图。

在标准应用程序中，您可能会有一个预定义的视图（XML 文件），您将把它设置为内容视图并从中引用元素（以及可能添加新元素）。

它非常灵活，简而言之，回答您的问题不，您*不需要*生成新的 XML 视图文件，您可以简单地将 a 添加`TextView`到现有视图文件或在运行时指定它。

# objective-c - 如何创建一个依赖于符合特定协议的对象的类别？

> ID：13485194
> 
> 赞同：0
> 
> 时间：2012-11-21T01:50:41.663
> 
> 标签：objective-c, xcode4.5

我的大部分 tableView 都有一个恒定的表格行高。该表的高度可以更改，但只能在设计时更改。我不想对该表格行高进行两次编码。

所以我做这样的事情：

```
@interface UIViewController (cellHeightofFirstRowForTable) <UITableViewDataSource>

@end

#import "UIViewController+cellHeightofFirstRowForTable.h"

@implementation UIViewController (cellHeightofFirstRowForTable)
-(CGFloat) cellHeightForTable: (UITableView *) tableView
{
    cellHeight= [self tableView:tableView heightForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
}
@end 
```

基本上第一次询问表高度，我想计算一次，将其存储在静态变量中，然后简单地使用该值。

我得到了这个编译错误：

```
 No visible @interface for 'UIViewController' declares the selector 'tableView:heightForRowAtIndexPath:' 
```

但是，嘿，我已经在界面中指定这是一个符合 UITableViewDataSource 委托的 UIViewController 协议。

那么有什么问题呢？

我应该只复制代码吗？

注意：现在我已经知道这个设计很愚蠢。问题仍然存在以备将来使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:08:27.993

不管明智的直觉会告诉你什么，`tableView:heightForRowAtIndexPath:`是 的一部分`UITableViewDelegate`，而不是`UITableViewDataSource`。`@optional`即使您确实声明了实现该协议的类别，它也被标记为`UIViewController`，这实际上并不能保证该方法已实现。

# c++ - 执行类型转换的中介模板

> ID：13485200
> 
> 赞同：0
> 
> 时间：2012-11-21T01:51:28.660
> 
> 标签：c++, templates, observer-pattern

我正在评估观察者模式的实现策略，其中一个要求是基`Subject`类能够到达类的派生（具体）类中的方法`Event`。

在原型实现中，我在具体事件类中达到了这个代码：

```
// a concrete event
class evZoom : public AbstractEvent
{
public:
    virtual void Fill( Subject *aZoomManager)
    {
        mRatio = dynamic_cast<ZoomManager *>(aZoomManager)->mRatio;
    }

    int mRatio;
}; 
```

现在我对每个 concreate 事件都必须执行这种类型转换这一事实感到困扰。

换句话说，我关心代码的简单性和简洁性，我宁愿使用具体的类（其中有很多）来拥有更优雅的代码，并用更复杂的基类代码（有一个）进行交易。

所以我想出的解决方案是使用中介（即基类和具体类之间的一个）模板来进行类型转换。

完整的实现如下所示：

```
// For Dec
class Subject;

// A non template abstract base class for the Subject class to work with.
class AbstractEvent
{
public:
    virtual void Fill ( Subject *aSubject ) = 0;
};

// A mediator class to do the type casting
template < class TSubject >
class Event : public AbstractEvent
{
public:
    // This is where we do the type cast.
    virtual void Fill ( Subject *aSubject )
    {
        TSubject *iSubject = dynamic_cast<TSubject *>(aSubject);
        // Somehow the compiler knows to call the abstract method below, but if
        // we change its name we'll get an infinite loop - cranky.
       Fill( iSubject );
    }

    // And a new abstract method to be implemented by concrete events.
    virtual void Fill ( TSubject *aSubject ) = 0;
};

// The subject base class
class Subject
{
public:
    // virtual destructor to make this class polymorphic 
    // so we can cast it dynamically.
    virtual ~Subject() { }

    void Subscribe( AbstractEvent *aEvent )
    {
        aEvent->Fill( this );
    }
};

// A concrete subject class.
class ZoomManager : public virtual Subject
{
public:
    int mRatio;
};

// The concrete event
class evZoom : public Event< ZoomManager >
{
public:
    virtual void Fill( ZoomManager *aZoomManager )
    {
        mRatio = aZoomManager->mRatio;
    }

    int mRatio;
};

int main(int argc, const char * argv[])
{
    ZoomManager iZoomManager;
    evZoom      *iEvent = new evZoom();

    iZoomManager.Subscribe( iEvent );

    return 0;
} 
```

唯一的问题是我有一种直觉，认为有更好的解决方案。主要是因为我不记得曾经在任何来源或库中看到过像上面那样的中介类 - 但可能是我的经验不足。

有人可以就上述问题提出更好的解决方案吗？

# javascript - 单击按钮时如何从其上方的文本框中获取文本

> ID：13485205
> 
> 赞同：0
> 
> 时间：2012-11-21T01:52:11.780
> 
> 标签：javascript, jquery, html

我有一些代码，例如：

```
<input type="text" class="searchpersontxtbox" />
<input type="button" value="Find" class="findpersonbtn btn" disabled="disabled" /> 
```

有一个按钮点击事件：

```
$(document).ready(function () {

        $('.findpersonbtn').click(function () {

            var findpersonbutton = $(this);

            var searchbox = $(this).closest('.searchpersontxtbox');
            alert(show the searchbox text here);

        });
    }); 
```

因此，当单击按钮时，我试图在搜索框中获取文本并将其提醒到屏幕上。

需要注意的一点是，页面上可能有多个带有“searchpersontxtbox”类的搜索框。

所以我想从按钮正上方的文本框中获取文本。

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:15:35.233

我认为他在寻找一些相对的东西......像这样......

```
$(document).ready(function(){ 

$('.findpersonbtn ').click(function () {
     var findpersonbutton = $(this);

//do relative search here...
     var searchbox = findpersonbutton.parent().find('.searchpersontxtbox');
     alert(searchbox.val());

}); 
```

});

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T01:56:00.733

这不是[`closest`](http://api.jquery.com/closest)工作方式。在没有看到其余标记的情况下，一种方法是：

```
$(document).ready(function () {
    $('.findpersonbtn').click(function () {
        var findpersonbutton = $(this)
            , searchbox = $(this).prev();

        alert(searchbox.val());
    });
}); 
```

您可以使用[`prev`](http://api.jquery.com/prev/)来获取 clicked 正上方的元素`.findpersonbtn`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T01:55:19.683

```
$(function(){
    $('button').click(function() {
    var text = $('textarea').val();
    alert(button);
    }
}); 
```

类似的东西？使用 jQuery 搜索获取 textarea 值，然后在变量中应用该方法并提醒它的文本。应该管用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T01:56:38.217

您可能想要检查`.previousSibling()`，它应该返回以前的输入。

[http://jsfiddle.net/TbYup/](http://jsfiddle.net/TbYup/)

# android - 为什么启动我的活动的 Intent 不包含我在发送给 startActivity() 的 Intent 中放入的额外数据？

> ID：13485208
> 
> 赞同：6
> 
> 时间：2012-11-21T01:52:49.440
> 
> 标签：android, android-intent, android-activity

我最初解释得很糟糕。这是我的问题：我发送给 startActivity() 方法的 Intent 包含一个私有字段 mMap，它是一个包含我发送给 putExtra() 的字符串的 Map。当目标活动开始时，对 getIntent() 的调用会返回一个**不**包含这些值的 Intent。mMap 字段为**null**。显然，由于对象 ID 不同，View 层次结构的内部或启动新活动的操作系统部分创建了一个新的 Intent 传递给它。

但为什么？为什么 putData() 值没有被带到新的 Intent 中？

启动新活动的活动扩展了活动。这是启动代码：

```
public boolean onOptionsItemSelected(final MenuItem item) {
    switch (item.getItemId()) {
    case 4:
        i = new Intent(this, StatList.class);
        i.putExtra("Name1", "Test1");
        i.putExtra("Name3", "Test2");
        startActivity(i);
     }   
 } 
```

我已经尝试了带有和不带有（推荐的）完整包名称前缀的键值。

在 Eclipse 调试器中，我已验证玩家名称的值是否已正确插入到 i.mExtras.mMap 中。

这是来自startee的代码：

```
public class StatList extends ListActivity {
private final StatsListAdapter statsAdapter;

public StatList() {
    statsAdapter = StatsListAdapter.getInstance(this);
} // default ctor

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final Intent i = getIntent();
    final Bundle extras = i.getExtras();
          < more code here >
} 
```

当执行到此方法时， mIntent.mExtras.mMap 为**null**，并且 mIntent.mExtras.mParcelledData 现在包含一些看起来不合理的值（调用 startActivity() 时为**null ）。**getIntent() 返回 mIntent。

我也尝试过 startActivityForResult()，结果相同。

从我在网上和示例应用程序中看到的文档和示例中，这应该很容易。我找到了另一种方法来满足我的迫切需要，但我想知道是否有人可以帮助我理解为什么这么简单的事情不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:16:20.580

在您的主要活动中：

```
i = new Intent(this, StatList.class);
i.putExtra("Name1", "Test1");
i.putExtra("Name3", "Test2");
startActivity(i); 
```

然后在`StatList.class`

```
Bundle extras = getIntent().getExtras();
String name1 = extras.getString("Name1");
String name3 = extras.getString("Name3");
Log.i("StatList", "Name1 = " + name1 + " && Name3 = " + name3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:22:15.233

更新以下两行

最终意图 i = getIntent(); 最终捆绑附加服务 = i.getExtras();

将其替换为

```
Bundle extras = getIntent().getExtras();
if(extras!= null){
String var1= extras.getString("Name1");
String var2= extras.getString("Name2");
} 
```

# sql - 如何在sql server中使用select语句更新表

> ID：13485210
> 
> 赞同：5
> 
> 时间：2012-11-21T01:52:56.867
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试更新一个表，其中字段的值等于 select 语句的结果。我有一张这样的桌子：

```
Type     Total#
A           4
B           8
C           1 
```

我想根据 select 语句的结果更新上表。这是我的代码：

```
update MainTable
  set [Total#] = 
  (SELECT count(distinct r.[ID])as Type
  FROM dbo.TableA r left join
  dbo.TableB a
  on r.Post_ID = a.Post_ID
  where a.Status is null) 
```

如果我按原样运行代码，它将更新所有行，但我只想更新 select 语句中的类型等于我的 MainTable 中的类型。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T02:13:35.823

试试这个，

```
UPDATE  x
SET     x.[Total#] = y.totalCount
FROM    MainTable x
        INNER JOIN
        (
            SELECT  [Type], COUNT(DISTINCT r.[ID]) totalCount
            FROM    dbo.TableA r
                    LEFT JOIN dbo.TableB a
                        ON r.Post_ID = a.Post_ID
            WHERE   a.STATUS IS NULL
            GROUP BY    [Type]
        ) y ON x.[Type] = y.[Type] 
```

***PS：问这样的问题时，请添加表格的结构。它有很大帮助。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:58:26.863

给你一个别名，`MainTable`你可以在子查询中使用它：

```
update MainTable mt
   set [Total#] = (SELECT count(distinct r.[ID]) as Type
                     FROM dbo.TableA r 
                          left join dbo.TableB a on r.Post_ID = a.Post_ID
                    where a.Status is null
                      and a.AType = mt.AType )
 where mt.AType = @Value 
```

# jquery - jQuery 倒数计时器在 IE8 和 IE9 上“跳跃”

> ID：13485211
> 
> 赞同：0
> 
> 时间：2012-11-21T01:52:59.173
> 
> 标签：jquery, internet-explorer-8, internet-explorer-9, countdown, countdowntimer

倒计时计时器在时钟每滴答一秒时上下跳动。

代码安装在： [http ://www.gotmemories.com/content/article/124/place-order-from-quote-payment-order-form](http://www.gotmemories.com/content/article/124/place-order-from-quote-payment-order-form)

```
<div id="defaultCountdown" class="hasCountdown"><span class="countdown_row countdown_show3"><span class="countdown_section"><span class="countdown_amount">0</span><br>Hours</span><span class="countdown_section"><span class="countdown_amount">0</span><br>Minutes</span><span class="countdown_section"><span class="countdown_amount">0</span><br>Seconds</span></span></div> 
```

我正在使用以下标准安装： http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

非常感谢帮助！我尝试添加“max-height”css 属性和“height”，但没有解决。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:21:16.470

解决了。

jQuery 每秒添加和删除一个名为“countdown_rtl”的类

`<div id="defaultCountdown" class="hasCountdown">`

CSS是

```
.countdown_rtl {
      direction: rtl;
} 
```

我所要做的就是把它注释掉，它就停止了反弹。

```
.countdown_rtl {
    /* direction: rtl; */
} 
```

不知道那个 css 是做什么用的，但它似乎不适用于 IE，并且不需要它用于其他任何事情！希望这对其他人有帮助。

# mobile - 使用 Google 广告通过 PhoneGap 应用获利（使用 PhoneGap Build 构建）

> ID：13485212
> 
> 赞同：11
> 
> 时间：2012-11-21T01:53:00.843
> 
> 标签：mobile, admob, adsense, ads

在 AdMob 上，[不再有 HTML5 应用程序的选项](https://support.google.com/admob/bin/answer.py?hl=en&answer=1678439)，而在 AdSense 上，移动应用程序（即使是那些明确提到的基于 webview 的应用程序）[也被禁止](http://support.google.com/adsense/bin/answer.py?hl=en&answer=68724)。

如何使用 Google 广告通过 PhoneGap 应用（使用 PhoneGap Build 构建）获利？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-13T00:23:49.787

AdMob 插件之前在 PhoneGap Build 中不可用，因为旧政策不允许提交二进制文件。

但是现在，他们对他们的政策做了很大的改变（[http://phonegap.com/blog/2014/12/09/phonegap-build-new-features/](http://phonegap.com/blog/2014/12/09/phonegap-build-new-features/)），现在允许您使用 Cordova 插件注册表中的插件.

要在您的应用中使用 Admob 插件，只需在您的 config.xml 中配置它：

`<gap:plugin name="com.google.cordova.admob" source="plugins.cordova.io" />`

要显示横幅广告：

```
if(AdMob) AdMob.createBanner( {
    adId:admobid.banner, 
    position:AdMob.AD_POSITION.BOTTOM_CENTER, 
    autoShow:true} ); 
```

要显示全屏广告：

```
// preppare and load ad resource in background, e.g. at begining of game level
if(AdMob) AdMob.prepareInterstitial( {adId:admobid.interstitial, autoShow:false} );

// show the interstitial later, e.g. at end of game level
if(AdMob) AdMob.showInterstitial(); 
```

更详细的说明和示例代码记录在其 github 项目主页：

[https://github.com/floatinghotpot/cordova-admob-pro](https://github.com/floatinghotpot/cordova-admob-pro)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:28:17.703

PhoneGap 构建原生应用程序，因此您必须使用原生 AdMob SDK。网上有关于如何进行 AdMob 原生实施的指南。但是，如果您更喜欢插件，请查看适用于 Cordova 的 AdMob 插件（[Android](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin) | [iOS](https://github.com/rajpara11/phonegap-plugins/tree/master/iOS/AdMobPlugin)）。

# html - 在我的会话中注销时遇到问题

> ID：13485215
> 
> 赞同：1
> 
> 时间：2012-11-21T01:53:07.597
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3

我在 Michael Hartl 教程第 8 章登录和注销。我已经成功登录了。但是注销不起作用。我在尝试注销后保持登录状态。注销后测试登录按钮时的 rspec 未捕获错误这里是代码。为了

**视图/布局/header.html.erb**

```
<header class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
           <%= link_to "sample app", root_path , id: "logo"%>
             <nav>
                <ul class="nav pull-right">
                    <li><%= link_to "Home", root_path %></li>
                    <li><%= link_to "Help", help_path %></li>
                    <% if signed_in? %>
                    <li><%= link_to "Users", '#' %></li>
                    <li id="fat-menu" class="dropdown">
                       <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                          Account <b class="caret"></b>
                       </a>
                         <ul class= "dropdown-menu">
                           <li><%= link_to "Profile", user_path(current_user) %></li>
                           <li><%= link_to "Settings", '#' %></li>
                           <li class="divider"></li>
                           <li>
                            <%= link_to "Sign out", signout_path, method: "delete" %>
                           </li>
                        </ul >

                    <% else %>
                    <li><%= link_to "Sign in", signin_path %></li>
                    <% end %>
                </ul>
             </nav>
        </div>
    </div>
</header> 
```

**助手/sessions_helper.rb**

```
module SessionsHelper

   def sign_in(user)
     cookies.permanent[:remember_token] = user.remember_token
     current_user = user
   end

   def signed_in?
     !current_user.nil?
   end

   def curent_user=(user)
     @current_user = user
   end

   def current_user
     #@current_user = @current_user || User.find_by_remember_token(cookies[:remember_token])
     # same thing 
      @current_user ||=  User.find_by_remember_token(cookies[:remember_token])
   end

   def sign_out
      current_user = nil
      cookies.delete(:remember_token)
   end
end 
```

**控制器/sessions_controller.rb**

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
     flash.now[:error] = "Invalid email or password combination"
         render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:22:45.737

终于让它工作了`rake db:reset`

# iphone - 是否可以在 Approved 状态下删除应用内购买？

> ID：13485217
> 
> 赞同：0
> 
> 时间：2012-11-21T01:53:35.347
> 
> 标签：iphone, in-app-purchase, app-store-connect

是否可以在 Approved 状态下删除应用内购买？我有一个产品在应用购买中获得批准，现在我想在应用购买中删除它怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:51:50.307

是的，可以在 Approved 状态下删除应用内购买。

1 - 登录 iTunes Connect 并导航到“管理您的应用程序”部分；在那里选择你的应用程序。

2-导航到“管理应用内购买”

3-现在您需要将已批准的应用内购买标记为“不明确出售”。单击第一个“编辑”按钮，您可以更改应用内购买的摘要/详细信息。将打开一个新表单/页面。搜索“清除出售”选项并选择“否”。保存更改。

4-“删除”按钮现在将出现在应用内详细信息页面的左上角。只需单击该按钮，应用内将被删除。

# c - 谁能帮我在 C 中创建一个共享内存段

> ID：13485218
> 
> 赞同：0
> 
> 时间：2012-11-21T01:53:44.600
> 
> 标签：c, struct, shared-memory

我需要创建一个共享内存段，以便我可以让多个读者和作者访问它。我想我知道我在做什么就信号量和读者和作家去......

但我对如何创建共享内存段一无所知。我希望该段包含 20 个结构的数组。每个结构将包含一个名字、一个 int 和另一个 int。

任何人都可以帮助我至少开始这个吗？我很绝望，我在网上读到的一切都让我更加困惑。

编辑：好的，所以我做这样的事情开始

```
int memID = shmget(IPC_PRIVATE, sizeof(startData[0])*20, IPC_CREAT); 
```

使用 startData 作为保存我的数据的结构数组已初始化，我收到一条错误消息“分段错误（核心转储）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:52:52.350

获取共享内存的现代方法是使用由 Single UNIX Specification 提供的 API。这是一个包含两个进程的示例 - 一个创建共享内存对象并将一些数据放入其中，另一个读取它。

第一道工序：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/mman.h>
#include <fcntl.h>

#define SHM_NAME "/test"

typedef struct
{
   int item;
} DataItem;

int main (void)
{
   int smfd, i;
   DataItem *smarr;
   size_t size = 20*sizeof(DataItem);

   // Create a shared memory object
   smfd = shm_open(SHM_NAME, O_RDWR | O_CREAT, 0600);
   // Resize to fit
   ftruncate(smfd, size);
   // Map the object
   smarr = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, smfd, 0);

   // Put in some data
   for (i = 0; i < 20; i++)
      smarr[i].item = i;

   printf("Press Enter to remove the shared memory object\n");
   getc(stdin);

   // Unmap the object
   munmap(smarr, size);
   // Close the shared memory object handle
   close(smfd);
   // Remove the shared memory object
   shm_unlink(SHM_NAME);

   return 0;
} 
```

该进程使用`shm_open()`. 该对象的初始大小为零，因此使用 放大`ftruncate()`。然后对象被内存映射到进程的虚拟地址空间，使用`mmap()`. 这里重要的是映射是读/写的（`PROT_READ | PROT_WRITE`）并且它是共享的（`MAP_SHARED`）。一旦映射完成，它就可以作为常规的动态分配内存进行访问（事实上，`malloc()`在`glibc`Linux 上使用匿名内存映射来进行更大的分配）。然后该进程将数据写入数组并等待直到按下 Enter。然后它使用 取消映射对象`munmap()`，关闭其文件句柄并取消与对象的链接`shm_unlink()`。

第二道工序：

```
#include <stdio.h>
#include <sys/mman.h>
#include <fcntl.h>

#define SHM_NAME "/test"

typedef struct
{
   int item;
} DataItem;

int main (void)
{
   int smfd, i;
   DataItem *smarr;
   size_t size = 20*sizeof(DataItem);

   // Open the shared memory object
   smfd = shm_open(SHM_NAME, O_RDONLY, 0600);
   // Map the object
   smarr = mmap(NULL, size, PROT_READ, MAP_SHARED, smfd, 0);

   // Read the data
   for (i = 0; i < 20; i++)
      printf("Item %d is %d\n", i, smarr[i].item);

   // Unmap the object
   munmap(smarr, size);
   // Close the shared memory object handle
   close(smfd);

   return 0;
} 
```

这个打开共享内存对象仅用于读取访问，并且内存映射它仅用于读取访问。任何写入`smarr`数组元素的尝试都将导致传递分段错误。

编译并运行第一个进程。然后在单独的控制台中运行第二个进程并观察输出。当第二个进程完成后，回到第一个进程并回车，清理共享内存块。

有关更多信息，请查阅每个函数的手册页或 SUS 的[内存管理](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sysmman.h.html)部分（最好查阅手册页，因为它们记录了这些函数的系统特定行为）。

# ruby-on-rails - strftime 没有方法错误

> ID：13485224
> 
> 赞同：2
> 
> 时间：2012-11-21T01:54:20.963
> 
> 标签：ruby-on-rails, nomethoderror, strftime

我不确定错误存在于哪里。相同的代码正在为合作者工作，我无法让它工作！让我知道需要显示哪些其他代码，我不确定错误在哪里......在数据库中？谢谢。

```
NoMethodError in Static_pages#home
undefined method `strftime' for nil:NilClass 
```

...views/shared/_event_detail.html.erb

```
 </span>
       </div>
       <div class="span6 start_date">
         <%=event.start_date.strftime('%B %d, %Y') %>
       </div>
     </div>
     <div class="row-fluid"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T01:59:01.863

`event.start_date`是零。您正在尝试调用`strftime`NilClass 的一个实例。您想要下面的“尝试”并调用该方法，但如果该方法不可用（即，如果 event.start_date 为 nil）将静默失败。

```
 <%=event.start_date.try(:strftime, '%B %d, %Y') %> 
```

# ios - 修复了在核心数据中枚举问题时发生变异的问题

> ID：13485225
> 
> 赞同：1
> 
> 时间：2012-11-21T01:54:22.553
> 
> 标签：ios, multithreading, core-data

我目前正在做从外部服务器下载的项目。然后我进行 JSON 序列化，然后将其保存到核心数据数据库中。我收到一个错误

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSCFSet: 0x69c8a10> was mutated while being enumerated. 
```

它指向我在查询数据库时使用的一行代码：

`NSArray *matches = [context executeFetchRequest:request error:&error];`

我在查询数据库时使用的完整代码：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Product"];
request.predicate = [NSPredicate predicateWithFormat:@"product_id = %@", [productInfo  objectForKey:@"id"]];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSError *error = nil;
NSArray *matches = [context executeFetchRequest:request error:&error]; 
```

我只传递一个包含单个 UIManagedDocument 的对象。关于同一个问题，我在 SO 中浏览了不同的帖子，很多人指出这是一个线程问题。

大多数情况下，他们建议有一种父子上下文，它将位于不同的线程上；一个上下文将负责下载内容，另一个将在负责 UI 的主线程上。然后所做的更改将在稍后合并。正如Whitney Young在这篇[***文章***](http://wbyoung.tumblr.com/post/27851725562/core-data-growing-pains)中所说，我们已经在启动它，但是这个提议的解决方案似乎有很多问题。这些问题是，我引用

*   子上下文阻止祖先
*   对父上下文进行更改可能会很慢
*   在子上下文中获取结果是错误的
*   无法访问未保存对象的子上下文中的关系
*   当父上下文发生更改时，不支持排序
*   NSFetchedResultsController 死锁

这些似乎是一个真正的痛苦@_@，所以如果你们中的任何人对如何做到这一点有一些其他的好主意，将得到极大的认可。谢谢大家！

# java - 在 JScrollPane 中查找可见组件的快速方法

> ID：13485229
> 
> 赞同：1
> 
> 时间：2012-11-21T01:55:52.717
> 
> 标签：java, swing, user-interface, visibility

给定 a`JScrollPane`包含一千个使用 some 的组件`LayoutManager`。每个组件可以处于*加载*或*卸载*状态。没有足够的资源供所有人加载。

我只想`load()`在内存中编辑可见组件，并`unload()`编辑不可见组件。当用户滚动时，监听器需要不断更新组件的状态：`unload()`以前可见的和`load()`新可见的。

1.  在任何给定时刻，我如何知道哪些组件是可见的？
2.  我可以在不迭代整个千人的情况下知道这一点吗？（好像一个有效率的`viewPort.getVisibleComponents()`）

我将准备好所有组件 Y 的排序列表，然后在运行时二进制搜索中`ViewPort`的 Y 以达到可以引导我找到可见的索引的索引。这失败了，因为组件 Ys 在列表准备期间全部返回 0。这需要高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:42:47.627

具体而言，我将假设有 1000 条记录，每条记录由`class Record`. 每个这样`Record`的都应该包含一个唯一的、有意义`key`的 type `Key`。

*   获取`List<Key>`, 可能在后台任务中。

*   构造一列[`TableModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)值`key`。

*   使用此模型构建一个`JTable`, `table`。

*   `table`在合适的`JScrollPane`布局左侧添加。

*   在右侧，添加一个面板，可以`Display`显示单个、选定的详细信息`Record`。

*   让我们`Display`包含一个`ListSelectionListener`，在[这里](https://stackoverflow.com/a/12306104/230513)看到，它更新`Record`当前在`table`.

*   将每个选定`Record`的内容添加到[缓存](https://stackoverflow.com/q/224868/230513)中，从存储中检索`Record`，可能在后台任务中，前提是缓存中尚未存在。

# arrays - Fortran 选择排序子例程、错误、数组无法读取

> ID：13485233
> 
> 赞同：3
> 
> 时间：2012-11-21T01:56:30.520
> 
> 标签：arrays, sorting, runtime, fortran

```
!find smallest number
subroutine findsmall(z, i, j, small, count0, y)
implicit none
integer:: i, j, small, count0
real:: z(121), temp, y(121)

300 format(//, t1, 9(f6.2, 2x))

read(*, 300) z(1:121)

do i=1, 120, 1

 small = i

 do j=i+1, 121, 1

  if (z(small) > z(j)) then

  small = j

  end if

 end do

temp = z(i)
z(i) = z(small)
z(small) = temp

y(i) = z(i)

count0 = count0 + 1

end do

print 300, y(1:121)
print*, count0

end subroutine findsmall 
```

这是我的子程序。它接受来自打印生成随机数的打印语句的输入数据。打印发生后，需要将输入读入数组，我的尝试发生在第 26 行，即：

```
read(*, 300) z(1:121) 
```

我收到一条错误消息，显示“fortran 运行时错误：浮点读取期间的值错误”。我不明白这里出了什么问题，它之前排序的结果好坏参半。我改变了一些事情，比如将温度从整数移动到实数，以保持百分之一的数字，现在到处都是 fubar，fubar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T17:39:16.360

正如 MSB 所说，很可能是您的格式导致了问题，特别是浮点格式规范。该错误消息暗示您的数据条目之一与指定的格式（1234.56 形式的浮点数）不匹配。尝试删除 f6.2 或使用列表导向读取（假设条目由空格分隔）。

有关格式规范的严格性的更多详细信息，请参阅[FORTRAN READ()](https://stackoverflow.com/questions/1126028/fortran-read)。

# linux - pg_restore 分隔符

> ID：13485238
> 
> 赞同：1
> 
> 时间：2012-11-21T01:56:58.760
> 
> 标签：linux, bash, postgresql

我有一个 Postgresql 转储（使用 pg_dump 创建，自定义压缩格式）。我想将其 pg_restore 为 STDOUT，但用管道替换制表符分隔。我试过只通过 tr 使用管道，但我确实有大量实际包含选项卡的文本字段，并且 tr 显然不尊重引号。有数百亿的输出行（压缩文件> 500 GB），所以我确实需要一个相对高效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T13:06:20.910

如果它必须很快，请使用 C。保存

```
#include <stdio.h>
int main()
{
    int c, quoted = 0;
    while (c = getchar(), c != EOF)
    {
        if (c == '"') quoted = !quoted;
        if (c == '\t' && !quoted) c = '|';
        putchar(c);
    }
    return quoted;
} 
```

例如，作为 bartab.c，使用 编译`gcc bartab.c -o bartab`并通过生成的程序进行管道传输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:09:14.337

你最好的选择是使用

```
COPY tablename TO STDOUT WITH CSV DELIMITER '|'; 
```

从数据库内部执行此操作，而不是使用您的转储文件。

第二种选择是使用 --inserts 开关进行新的转储，然后解析以 INSERT 开头的行。那也会很慢。

# python - 如何从 PyPNG 的阅读器中读取 itertools.imap 对象

> ID：13485243
> 
> 赞同：2
> 
> 时间：2012-11-21T01:57:58.093
> 
> 标签：python, pypng

我正在使用 PyPNG 包来读取一个简单的 png 文件。
返回的像素数据是一个 itertools.imap 对象。
我如何读取这些数据。

```
import png, array  
reader = png.Reader(filename='image.png')  
w, h, pixels, metadata = reader.read()  

(877, 615, <itertools.imap object at 0x2a956a5b50>, {'bitdepth': 8, 'interlace': 0, 'planes': 3, 'greyscale': False, 'alpha': False, 'gamma': 0.45455, 'size': (877, 615)}) 
```

像素是这个 itertools.imap 对象，我假设它包含像素信息。

谢谢

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:06:52.313

`itertools.imap`返回一个可迭代的。您应该能够像迭代任何其他列表一样对其进行迭代。

当然，一个关键的区别是因为它是一个迭代器，所以你只能迭代它一次。你也不能索引到它

**编辑**（根据 OP 的要求）：

## 如何遍历列表

假设您有一个名为 的列表`L`，`L`如下所示：

```
L = ['a', 'b', 'c', 'd'] 
```

那么，位于 of 的元素`L`及其各自的索引为：

```
+-------+---------+
| index | element |
+-------+---------+
|   0   |   'a'   |
+-------+---------+
|   1   |   'b'   |
+-------+---------+
|   2   |   'c'   |
+-------+---------+
|   3   |   'd'   |
+-------+---------+ 
```

请注意，因为 python 有从零开始的索引，所以没有索引 4，即使`L`.

现在，如果你想要索引 3 in 的项目`L`，你会做`L[3]`. 如果你想要索引 2 中的项目`L`，你会这样做`L[s]`，依此类推。

迭代一个`L`（假设你想打印出值）：

```
for elem in L:
    print elem 
```

其他方式：

```
for i in range(len(L)): # lookup range() and len()
    print L[i] 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:50:30.920

最简单的（不一定对大图像有效）是使用内置`list`函数将迭代器转换为列表：

```
pixelsAsList = list(pixels)
print pixelsAsList[0] # the first row
print pixelsAsList[0][0] # The Red channel from the first pixel on the first row. 
```

# php - php mysql没有返回所需的整数，简单的错误

> ID：13485245
> 
> 赞同：0
> 
> 时间：2012-11-21T01:58:16.303
> 
> 标签：php, mysql

我对以下 php/sql 有疑问。我在 mysql 终端中运行了 sql，它运行良好。我还尝试了我的连接语句来提醒一个字符串，它在连接到数据库时成功地提醒了这个字符串。此代码中存在一些错误，当它应该返回两个整数时返回 null。有什么建议么？

```
$xmax = mysql_fetch_row(mysql_query('SELECT MAX(x) AS xmax FROM headerfooter WHERE site = "Brighter_Vista" AND location = 0'));
$xmax = $xmax['xmax'];
$ymax = mysql_fetch_row(mysql_query('SELECT MAX(y) AS ymax FROM headerfooter WHERE site = "Brighter_Vista" AND location = 0'));
$ymax = $ymax['ymax'];
echo '<script>alert("'.$xmax.$ymax.'")</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:04:40.707

最简单的解决方案是使用以下命令检查 sql 语句是否返回错误：

```
mysql_query('SELECT MAX(y) AS ymax FROM headerfooter WHERE site = "Brighter_Vista" AND location = 0') or die('Error: '.mysql_error()); 
```

旁注：不要再使用 mysql_* 函数了，那个时候已经过去了。使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:15:36.560

我们看不到您的其余代码，但是，您可以将其细化为一个查询，执行以下操作：

```
 $connection = mysql_connect(
        $DB_hostname, 
        $DB_username, 
        $DB_password) or die(mysql_error());
  mysql_select_db($DB_name, $connection);

  $query = mysql_query("
      SELECT MAX(x) AS xmax, MAX(y) AS ymax 
      FROM headerfooter 
      WHERE site = 'Brighter_Vista' AND location = '0'
  ", $connection) or die(mysql_error());

  while ($row = mysql_fetch_array($query))
  {
     $xmax = $row['xmax'];
     $ymax = $row['ymax'];
  }

  echo '<script>alert("'.$xmax.$ymax.'")</script>'; 
```

但是，如果您有时间、有能力并希望学习，您应该（正如其他人所指出的）查看和使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/intro.pdo.php)。明智的建议，随着时间的推移，你会明白为什么。

# c# - 麻烦将 double 与 int 相乘

> ID：13485252
> 
> 赞同：0
> 
> 时间：2012-11-21T01:59:15.867
> 
> 标签：c#, xna

所以基本上我在我的 C# XNA 游戏中为我的敌人制作健​​康条。我得到了剩余生命值的百分比，例如 80/100 = 0.8 = 80%，所以我的游戏知道绘制生命值条的绿色部分有多大。因此，如果有 80% 的生命值，它会将生命条拉到 80%。我遇到的问题是，一旦生命值从 100 下降，百分比就会自动下降到 0.0/0% 并且没有绘制任何内容。这是我的代码：

```
 //calculate the width of the green portion of healbar
        //zDay.Game1.hp_top.Width = Original size of image (35px)
        float size = (hp/max_hp) * zDay.Game1.hp_top.Width;

        //draw percentage of health
        sb.DrawString(zDay.Game1.CourierNew, (hp/max_hp).ToString(), new Vector2(50, 80), Color.Black);
        //draw size of green portion
        sb.DrawString(zDay.Game1.CourierNew, (size).ToString(), new Vector2(50, 50), Color.Black);

        //draw green portion of health bar
        Rectangle bg = new Rectangle(x - 20, y - 30, (int)size, zDay.Game1.hp_top.Height);
        sb.Draw(zDay.Game1.hp_top, bg, Color.White); 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:03:05.047

我猜问题不在于乘法，而在于除法；该声明：

```
(hp/max_hp) 
```

最有可能被评估为零（因为您正在通过 int 潜水（我假设）并且结果将在 0 和 1 之间，或者在整数术语中为 0）。

尝试使用

```
((float)hp/(float)max_hp) 
```

反而。

# c# - 如何在不更改选定项的情况下在列表视图中插入元素

> ID：13485253
> 
> 赞同：0
> 
> 时间：2012-11-21T01:59:18.640
> 
> 标签：c#, wpf, list, listview

在 WPF 中，我在列表视图中选择多个项目。在代码隐藏中，我使用 ObservableCollection.SetItem() 在索引 2 处插入了一个元素。我之前选择的多个项目将被取消选择。如何在不丢失我选择的多个项目的情况下在列表视图中插入一个元素？下面的代码触发取消选择所选项目。

```
this.SetItem(index2, new student("name",age,"school")); 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:46:30.623

一方面，`SetItem()`不插入项目，而是替换它。要插入项目，请使用`Insert()`.

至于多选，你最好实现一个可绑定的多选`ListView`。一个问题`ListView`是它`SelectedItems`不是一个`DependencyProperty`，所以它不能被绑定，也不是在 ViewModels 或代码中处理的最可靠的事情。

`ListView`可以在[此处](http://grokys.blogspot.com.au/2010/07/mvvm-and-multiple-selection-part-iii.html)找到如何实现更好的一个很好的示例。那里有一个关于绑定的 3 部分系列，`ListViews`它也可以提供一些有用的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:53:27.540

为清单中的每个项目创建一个布尔列表。

在插入新项目之前，检查每个现有项目并查看它是否被选中并将结果存储在布尔列表中。

插入项目后，只需解析布尔列表并重新设置先前选择的项目。

# c++ - 从一个给定整数中提取两个有符号整数？

> ID：13485256
> 
> 赞同：0
> 
> 时间：2012-11-21T01:59:29.307
> 
> 标签：c++, bit-manipulation

我有以下结构：

```
struct
{
   int a:4;
   int b:7;
   int c:21;
} example; 
```

我想在 C++ 中将 a 和 b 组合成一个整数 d。例如，我希望 a 的位值位于 b 的位值的左侧，以便形成整数 d。这是如何在 C++ 中实现的？

例子：

一个= 1001

b = 1010101

我想要 int d = 10011010101 xxxxxxxxxxxxxxxxxxxxx

其中 x 可以是之前属于 d 的 21 位。我希望将 a 和 b 的值分别放在位位置 0-3 和 4-10 中，因为 a 占据结构“示例”中的前 4 位，而 b 占据接下来的 7 位。

我感到困惑的部分是变量 a 和变量 b 在最高有效位都有一个“符号”位。这会影响结果吗？变量 a 和变量 b 中的所有位是否都用于整数 d 的最终结果？整数 d 看起来像变量 a 的位和变量 b 的位的串联吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:17:55.463

请注意，`int`位域是有符号还是无符号是实现定义的。C++ 标准是这样说的，而 C 标准用不同的措辞实现了相同的最终结果：

## ISO/IEC 14882:2011 — C++

> ### §7.1.6.2 简单类型说明符
> 
> ¶3 ... [注意：`char`类型和某些位域（9.6）的对象是否表示为有符号或无符号数量是实现定义的。说明`signed`符强制`char`对对象和位域进行签名；它在其他情况下是多余的。——尾注]
> 
> ### §9.6 位域
> 
> ¶3 ...位字段应具有整数或枚举类型（3.9.1）。普通（既没有显式签名也没有无符号）、、、、或`char`位字段是有符号还是无符号是实现定义的。`short``int``long``long long`

## ISO/IEC 9899:2011 — C

> ### §6.7.2.1 结构和联合说明符
> 
> ¶10 位字段被解释为具有由指定位数组成的有符号或无符号整数类型。^(125))
> 
> ^(125))如上面 6.7.2 所述，如果实际使用的类型说明符是 int 或定义为 int 的 typedef-name，那么位域是有符号还是无符号是实现定义的。
> 
> ### §6.7.2 类型说明符
> 
> ¶5 ... 对于位域，说明符`int`指定与 相同的类型`signed int`还是与 . 相同的类型是实现定义的`unsigned int`。

§6.7.2 的上下文表明`int`可以与`short`,`long`等结合使用，规则将适用；C++ 更清楚地说明了这一点。当然，plain 的签名`char`已经由实现定义。

* * *

## 无符号位域

如果位域的类型是无符号的，那么表达式相当简单：

```
int d = (example.a << 7) | example.b; 
```

## 有符号位域

`example.a`如果这些值是有符号的，那么你需要进行一个主要的解释练习，决定如果是负数和正数应该是什么值`example.b`，反之亦然。在某种程度上，即使这些值都是负数或正数，也会出现问题。

假设`example.a = 7;`-`example.b = 12;`的值应该是`d`多少？可能相同的表达式适用，但您可能会争辩说最好少移动 1 个位置：

```
assert(example.a >= 0 && example.b >= 0);
int d = (example.a << 6) | example.b;      // Alternative interpretation 
```

其他情况由您决定；这取决于您要对这些值进行的解释。例如：

```
int d = ((example.a & 0x0F) << 7) | (example.b & 0x7F); 
```

这会强制将有符号值视为无符号值。这可能不是你所追求的。

* * *

## 修改后的问题

> ```
> example.a = 1001     // binary
> 
> example.b = 1010101  // binary
> 
> d = 10011010101 xxxxxxxxxxxxxxxxxxxxx 
> ```
> 
> 其中 x 可以是之前属于 d 的 21 位。

为此，您需要：

```
 d = (d & 0x001FFFFF) | ((((example.a & 0x0F) << 7) | (example.b & 0x7F)) << 21); 
```

您可能可以使用更少的括号；我不确定我会冒险这样做。

## 联盟

但是，使用此修订后的规范，您可能很想查看以下内容`union`：

```
union u
{
    struct
    {
       int a:4;
       int b:7;
       int c:21;
    } y;
    int x;
} example; 
```

但是，未指定位字段中位的布局`int x;`（它们可能是最高有效位在前或最低有效位在前），并且总是有关于“如果您访问联合中的值”的说法这不是分配给您的最后一个调用未定义的行为'。因此，您需要处理位字段的多个平台定义方面。事实上，这种难题通常意味着位域与一种特定类型的机器 (CPU) 以及编译器和操作系统密切相关。在您所追求的细节级别上，它们非常非常不便携。

# c# - 在程序运行之间保持变量值

> ID：13485258
> 
> 赞同：5
> 
> 时间：2012-11-21T01:59:38.713
> 
> 标签：c#, .net, windows-applications, stateful

我有一个简单的 c# 控制台应用程序，每 5 分钟安排一次。程序的每次调用都需要最后一次运行的输出。

我现在正在做的是使用文本文件并将结果存储在其中。下次运行时，它会打开文本文件并知道上一次运行的输出。

还有其他不需要任何此类文本文件的方法吗？像维护会话变量等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T02:08:17.760

您可以使用设置文件。每次程序关闭时，只需将设置文件添加到您的项目并保存您要存储的值。当程序启动时，它会检查设置文件中的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T02:04:10.230

好吧，您必须将数据保存在某处。控制台应用程序没有会话变量（甚至会话）。您可能是指环境变量。如果将其存储在环境变量中，则程序必须从相同的环境（即从相同的控制台窗口）运行。如果机器崩溃，环境变量就会丢失。您可能最好使用文件。

如果它每 5 分钟运行一次，你能让程序休眠直到它需要再次运行吗？然后数据将在内存中可用。如果机器崩溃仍然是一个问题，因此您仍然可能需要保留文件作为备份。

如果您不希望用户看到一个文件，并且它不是*太多*数据（尽管几个 K 字节可能是可行的），正如@Quintin Robinson 建议的那样，您可以使用注册表。只需确保您正在写入一个合乎逻辑且您拥有正确权限的区域。

如果您不希望用户能够看到文件中的内容，您可以打乱内容以使其不可读。如果您使用加密，您将需要本地密钥来解密，以便熟练或坚定的攻击者仍然能够获取文件。最好只压缩数据并称其为好。

如果您不希望用户能够轻松更改文件中的内容，您可以将校验和、哈希或 HMAC 与数据一起存储。您必须在本地验证它，这意味着这可能会受到攻击，但应该阻止临时用户进行位黑客攻击。

当然，您可以结合注册表存储、加扰和校验和，这取决于您的需要和关注点。

我考虑过提到 PStor 和 CryptProtectData/CryptUnprotectData 但后来我意识到它们的安全性是基于**USER**的，所以在这里没有帮助。

如果机器连接到 Internet，您可以考虑云存储，但我不知道这是否适合您的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T02:22:53.677

首先使用[互斥锁](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application)解决方案强制app同时只运行一个实例。

然后创建一个可序列化的类来保存应用程序状态和一个辅助类来加载并将其保存到文件中。参见示例：

```
[XmlRoot("RegexTesterPersistantSettings")]
[Serializable]
public class State
{
    public State()
    {
        this.Pattern = string.Empty;
        this.TestString = string.Empty;
        this.Options = 0;
    }
    [XmlElement("Pattern")]
    public string Pattern{get;set;}

    [XmlElement("TestString")]
    public string TestString{get;set;}

    [XmlElement("Options")]
    public int Options { get; set; }

    public override int GetHashCode()
    {
        return this.Options.GetHashCode() ^ this.Pattern.GetHashCode() ^ this.TestString.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        State anotherState = obj as State;
        if (anotherState == null)
        {
            return false;
        }

        return this.Equals(anotherState);
    }

    public bool Equals(State anotherState)
    {
        return this.GetHashCode() == anotherState.GetHashCode();
    }

    public static bool operator ==(State a, State b)
    {
        // If both are null, or both are same instance, return true.
        if (System.Object.ReferenceEquals(a, b))
        {
            return true;
        }

        // If one is null, but not both, return false.
        if (((object)a == null) || ((object)b == null))
        {
            return false;
        }
        return a.Equals(b);
    }

    public static bool operator !=(State a, State b)
    {
        return !a.Equals(b);
    }

}

public class PersistantHelper
{
    private string filename;
    private State _state;

    public PersistantHelper(string xmlFilename = "RegexTesterSettings")
    {
        string appDataPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
        this.filename  = Path.Combine(appDataPath, xmlFilename);
    }

    private XmlSerializer _serializer;
    private XmlSerializer Serializer
    {
        get
        {
            if (this._serializer == null)
            {
                this._serializer = new XmlSerializer(typeof(State));
            }
            return this._serializer;
        }
    }

    private void SaveState(State state)
    {
        if (File.Exists(this.filename))
        {
            File.Delete(this.filename);
        }
        var stream  = new FileStream(this.filename,  FileMode.OpenOrCreate, FileAccess.Write,FileShare.None);
        this.Serializer.Serialize(stream, state);
        stream.Close();
    }

    public State State
    {
        get
        {
            if (this._state == null)
            {
                this._state = this.GetState();
            }
            return this._state;
        }
        set 
        {
            if (this.State != value)
            {
                this.SaveState(value);
            }
        }
    }

    private State dummyState = new State() { Options = 0 };
    private State GetState()
    {
        if (!File.Exists(this.filename))
        {
            return this.dummyState;
        }
        Stream stream = null;
        try
        {
            stream = new FileStream(this.filename, FileMode.Open, FileAccess.Read,FileShare.None);
            var o = this.Serializer.Deserialize(stream);
            return (State)o;
        }
        catch
        {
            return this.dummyState;
        }
        finally
        {
            if (stream != null)
            {
                stream.Close();
            }
        }

    }
} 
```

然后从您的应用加载并保存状态：

```
 private PersistantHelper persistantHelper;
    public frmTester()
    {
        InitializeComponent();
        this.persistantHelper = new PersistantHelper();
        .
        .
        .
    }

private void LoadPersistantData()
{
    State state = this.persistantHelper.State;
    this.txtPattern.Text = state.Pattern;
    this.txtTest.Text = state.TestString;
    foreach (Control c in this.pnlOptions.Controls)
    {
        if (c is CheckBox)
        {
            var chk = c as CheckBox;
            int tag = int.Parse(c.Tag.ToString());
            chk.Checked = (state.Options & tag) == tag;
        }
    }
}

private void SavePersistantData()
{
    this.persistantHelper.State = new State()
    {
        Options = (int)this.GetOptions(),
        Pattern = txtPattern.Text,
        TestString = txtTest.Text
    };
} 
```

# spring - 使用 Java EE 或 Spring 启动 java

> ID：13485259
> 
> 赞同：0
> 
> 时间：2012-11-21T01:59:40.843
> 
> 标签：spring, jakarta-ee

我已经知道 Java 的语法，我的下一个教育目标是学习一个框架（或库），一些朋友建议我去 Spring 一些其他建议我去 Java EE 6。

我想知道从哪个开始学习和练习更好。请您帮我选择一本书或手册来进入 Java 的实际世界吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:01:59.357

我认为最好开始学习基本的 Java EE 概念（正如你所说的你是 php 开发人员，你刚刚开始学习 java 语法）。因为要了解 Java EE 框架，您需要了解什么是[***Servlet***](http://en.wikipedia.org/wiki/Servlet)和[***JSP***](http://en.wikipedia.org/wiki/JavaServer_Pages)以及其他基本概念，如过滤器或 servlet 容器（如[***tomcat***](http://en.wikipedia.org/wiki/Apache_Tomcat)）。在您使用 Servlet 和 JSP 开发了一些简单的 Java EE 应用程序之后，您将准备好学习更高级的概念和框架（如 Spring）。我的建议是开始阅读[***Head First Servlet 和 JSP***](https://rads.stackoverflow.com/amzn/click/com/0596516681)或任何学习这些概念的在线资源。

祝你好运。

# android - 在另一个布局上添加透明/水印文本

> ID：13485262
> 
> 赞同：1
> 
> 时间：2012-11-21T02:00:39.793
> 
> 标签：android, android-layout

我正在编写一个具有一个主要布局的简单应用程序。该应用程序具有用户可以切换的状态。如果状态为“开启”，我想要透明（带水印，虽然我知道这可能有不同的含义）文本覆盖主布局。我猜我必须定义第二个布局来覆盖主布局。或者可能不是。如果我不是完全疯了，我会很感激任何指导。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:08:13.193

您不应该需要创建另一个布局。只需在主布局中放置一个 TextView 并使用它来更改其透明度

```
int alpha = 100;
mTxt.setTextColor(Color.argb(alpha, 0, 0, 0)); 
```

alpha 可以是 0-255 之间的任何值，0 表示透明，255 表示 100% 实心。`0,0,0`如果您不想要黑色文本，也可以将其更改为不同的 RGB 值。

如果需要，您还可以从 xml 设置 alpha（除非您需要在运行时更改它，否则您应该这样做）：

```
<TextView
...
...
android:background="#55000000" /> 
```

在这种情况下，前两位数字表示 alpha 值（示例中为 55），它们可以介于 00 和 FF 之间。接下来的 6 位数字是十六进制的 RGB 值。

# jquery - jquery .keydown 和 .click 方法的索引似乎不同步

> ID：13485264
> 
> 赞同：0
> 
> 时间：2012-11-21T02:01:08.907
> 
> 标签：jquery, javascript-events

我想使用键盘和鼠标导航图像（单击左右箭头图像）。

我正在使用 Jquery 来执行此操作，但共享的 imgIndex 似乎与 .keydown 函数和 .click 函数无关...每当 .keydown 函数或 ++ imgIndex 时，不是也使用了更改的索引在点击功能？那么它们不应该总是在同一个索引上吗？

**按键功能：**

```
<script type="text/javascript">
var imgArray = [<?php echo implode(',', getImages($site)) ?>];

$(document).ready(function() {      

    var img = document.getElementById("showimg");
    img.src = imgArray[<?php echo $imgid ?>];
    var imgIndex = <?php echo $imgid ?>;
    alert(imgIndex);

    $(document).keydown(function (e) {
        var key = e.which;
        var rightarrow = 39;
        var leftarrow = 37;
        var random = 82;

        if (key == rightarrow) 
        {
            imgIndex++;
            if (imgIndex > imgArray.length-1) 
            {
                imgIndex = 0;

            }
            img.src = imgArray[imgIndex];
        }
        if (key == leftarrow) 
        {
            if (imgIndex == 0) 
            {
                imgIndex = imgArray.length;
            }

            img.src = imgArray[--imgIndex];
        }   
    }); 
```

**点击功能：**连接左右可点击图片

![在此处输入图像描述](../Images/4577b44f24fe5a5f4a7cfa4dae015594.png)

```
 $("#next").click(function() {
        imgIndex++;
            if (imgIndex > imgArray.length-1) 
            {
                imgIndex = 0;
            }
            img.src = imgArray[imgIndex];
    });
    $("#prev").click(function() {
        if (imgIndex == 0) 
            {
                imgIndex = imgArray.length;
            }           
            img.src = imgArray[--imgIndex];
    });
}); 
```

*只是为了让您对 getImages php 函数有一些了解：*

```
<?php
function  getImages($siteParam) {
include 'dbconnect.php';
if ($siteParam == 'artwork') { 
    $table = "artwork"; 
}       
else { 
    $table = "comics"; 
}   

$catResult = $mysqli->query("SELECT id, title, path, thumb, views, catidFK FROM $table");   
$img = array();
while($row = $catResult->fetch_assoc()) 
{
    $img[] = "'" . $row['path'] . "'";
}
return $img;
}
?> 
```

非常感激！

脚本在“view image.php”上的快照

![在此处输入图像描述](../Images/2a1ed0024817fa658a4409a3d5b9fd0f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:40:45.367

我认为问题在于您将 imgIndex 定义为“就绪”处理程序中的局部变量，并尝试用作全局变量。在这种情况下，两个 prev/next 处理程序都将获得它们自己的 imgIndex 副本。

检查这个小提琴：http: [//jsfiddle.net/BuddhiP/f2WzJ/](http://jsfiddle.net/BuddhiP/f2WzJ/)

```
var imgArray = ['img1', 'img2', 'img3', 'img4', 'img5'];
var imgIndex = 3;

$(document).ready(function() {
    var $img = $("#imgIndex");
    $img.text(imgIndex);
    //alert(imgIndex);

    $(document).keydown(function(e) {
        var key = e.which;
        var rightarrow = 39;
        var leftarrow = 37;
        var random = 82;

        if (key == rightarrow) {
            imgIndex++;
            if (imgIndex > imgArray.length - 1) {
                imgIndex = 0;

            }
            //img.src = imgArray[imgIndex];
             $img.text(imgIndex);
        }
        if (key == leftarrow) {
            if (imgIndex == 0) {
                imgIndex = imgArray.length;
            }

            //img.src = imgArray[--imgIndex];
            $img.text(--imgIndex);
        }
    });

    $("#next").click(function() {
        imgIndex++;
        if (imgIndex > imgArray.length - 1) {
            imgIndex = 0;
        }
        $img.text(imgIndex);
        //img.src = imgArray[imgIndex];
    });
    $("#prev").click(function() {
        if (imgIndex == 0) {
            imgIndex = imgArray.length;
        }
        $img.text(--imgIndex);
        //img.src = imgArray[--imgIndex];
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:31:53.663

如果您对点击和按键的处理方式不同

```
$(document).ready(...) 
```

块，那么变量将不会被共享。这是因为该块中的代码被视为匿名函数，并且您在其中声明的任何变量都将被提取到该块中。

# c++ - 如何在 C++ 中使用 matlab tic toc？

> ID：13485266
> 
> 赞同：5
> 
> 时间：2012-11-21T02:01:18.843
> 
> 标签：c++

在matlab中：

```
tic
do something ...
toc 
```

我尝试拥有此功能：

```
#define tic      double tic_t = clock();
#define toc      std::cout << (clock() - tic_t)/CLOCKS_PER_SEC \
                           << " seconds" << std::endl; 
```

现在我可以在 C++ 中做到这一点：

```
tic
doSomething();
toc 
```

问题是我不能在函数内多次调用它，因为 tic_t 将被定义多次。我想做这样的事情：

```
tic
doSomething1();
toc
tic
doSomething2();
toc 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T02:46:10.503

我会将它实现为堆栈。然后，你可以递归，多次调用它，做任何你想做的事情，它不会中断，只要你`toc()`在每个`tic()`. 作为奖励，您不必求助于使用宏：

```
#include <iostream>
#include <stack>
#include <ctime>

std::stack<clock_t> tictoc_stack;

void tic() {
    tictoc_stack.push(clock());
}

void toc() {
    std::cout << "Time elapsed: "
              << ((double)(clock() - tictoc_stack.top())) / CLOCKS_PER_SEC
              << std::endl;
    tictoc_stack.pop();
}

int main(int argc, char *argv[]) {
    tic();
    doSomething();
    toc();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:14:58.400

要么`double tic_t;`作为一个全局变量，要么在每个方法的顶部`#define tic tic_t = clock();`添加一个你使用的（并按上述方式进行更改）`#define tictoc_init double tic_t``tic`

第二种方法更好，因为“doSomething()”可能包含会覆盖全局变量的 tic 和 tocs。

# objective-c - 键盘隐藏后 UIWebView 无法滚动

> ID：13485267
> 
> 赞同：1
> 
> 时间：2012-11-21T02:01:33.347
> 
> 标签：objective-c, ios, uiwebview, uiscrollview

我有一个 iPad 应用程序，它的 UIWebView 包含多个文本输入。我将网络视图设置为仅垂直滚动。当我单击文本输入并显示和隐藏键盘时——我无法再上下滚动。我可以点击更多输入，但无法滚动。

这很奇怪，因为当我点击输入时，我可以在显示键盘的同时上下滚动。但是，一旦我隐藏键盘，我就不能再滚动了。

我目前正在使用 NSNotification 中心来捕获隐藏键盘时发生的事件，但我不确定需要发生什么。我已经尝试重新启用滚动或将第一响应者退回到 Web 视图或 Web 视图的滚动视图。

```
- (void)viewDidLoad
{
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(keyboardHidden) name:UIKeyboardWillHideNotification object:nil];

}

-(void)keyboardHidden
{
    // Does something need to happen in here??
} 
```

# c# - 使用 SortedList 进行 Linq 查询 >

> ID：13485269
> 
> 赞同：0
> 
> 时间：2012-11-21T02:01:37.657
> 
> 标签：c#, .net, linq, c#-4.0, linq-to-sql

我目前正在使用 Linq 从我的数据表中检索不同值的列表。然后我遍历列表并再次调用 linq 查询来检索第一个列表中每个值的值列表。

```
_keyList = new SortedList<int, List<int>>();
var AUGroupList = ProcessSummaryData.AsEnumerable()
                  .Select(x => x.Field<int>("AUGroupID"))
                  .Distinct()
                  .ToList<int>();
foreach (var au in AUGroupList)
{
    var AUList = ProcessSummaryData.AsEnumerable()
                      .Where(x => x.Field<int>("AUGroupID") == au)
                      .Select(x => x.Field<int>("ActivityUnitID"))
                      .ToList<int>();
    _keyList.Add(au, AUList);
} 
```

然后，我将该值与相应的第二个列表一起添加到排序列表中。如何将上述两个查询合并为一个 Linq 查询，这样我就不必单独调用它们了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:30:56.387

您应该能够执行以下操作：

```
var groupQuery = from d in ProcessSummary.AsEnumerable()
                 group d by new { Key = d.Field<int>("AUGroupID") } into g
                 select new { GroupID = g.Key, Values = g.Distinct().ToList() }; 
```

然后您可以遍历`groupQuery`并填充排序列表。该`Key`属性将包含组 ID，并且该`Values`属性将具有不同的值列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:24:08.603

你试过这个吗？

```
var _keyList = new SortedList<int, List<int>>();
var AUGroupList = ProcessSummaryData.AsEnumerable()
                  .Select(x => x.Field<int>("AUGroupID"))
                  .Distinct()
                     .Where(x => x.Field<int>("AUGroupID") == au)
                     .Select(x => x.Field<int>("ActivityUnitID"))
                     .ToList<int>();
    _keyList.Add(au, AUList);
} 
```

您的提供者应该处理这个问题，如果没有，还有其他一些方法。

# google-maps-api-3 - API V3 在过去 24 小时内发布？

> ID：13485270
> 
> 赞同：-1
> 
> 时间：2012-11-21T02:01:40.580
> 
> 标签：google-maps-api-3

有人知道过去 24 小时内是否有 API 版本发布吗？我不认为这是我的问题，但我想我会问以防万一。如果我特别要求 V=3.9 站点工作正常，使用 3.10 或 3.11 我会收到错误消息。

自发布以来，代码使用 3.10 运行良好，突然我看到一个错误：

```
Timestamp: 21/11/2012 1:00:09 PM
Error: TypeError: a.b.Ud is undefined
Source File: https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/10/15a/%7Bmain,geometry,weather%7D.js
Line: 137 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:38:48.890

我认为您的代码可以访问某个类的内部变量。但这不是更好的方法。所以我建议您应该仅使用 Google Maps API 更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:31:15.287

[API 更改日志](http://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)显示最后一次更新是在 9 月。

# linux - 为什么我们不能在内核开发中使用 C 标准库函数？

> ID：13485271
> 
> 赞同：13
> 
> 时间：2012-11-21T02:01:40.930
> 
> 标签：linux, linux-kernel

我刚开始学习内核开发并且有一个小小的疑问。为什么我们不能在内核开发中使用 c 函数与 c 库链接后使用它？为什么内核从未与 ac 库链接，而是有自己的一些标准 c 函数的实现，例如`printk()`而不是`printf()`. 如果内核是用 c 编写并在 ac 编译器的帮助下编译的，那么为什么我们不能使用 c 库中的标准函数呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T02:07:18.677

因为您熟悉的 GNU C 库是针对用户模式而不是内核模式实现的。内核无法访问用户空间 API（这可能会调用*Linux*内核的系统调用）。

来自[KernelNewbies 常见问题解答](http://kernelnewbies.org/FAQ/LibraryFunctionsInKernel)

> 我可以在内核中使用库函数吗？
> 
> 通常可供用户空间程序员使用的系统库（例如 glibc、libreadline、libproplist 等）对内核程序员来说是不可用的。当一个进程被加载时，加载器会自动将所有依赖库加载到进程的地址空间中。内核程序员无法使用这种机制：忘记 ISO C 库，唯一可用的是内核中已经实现（和导出）的内容以及您可以自己实现的内容。
> 
> 请注意，可以“转换”库以在内核中工作；但是，它们不太适合，过程繁琐且容易出错，并且堆栈处理可能存在重大问题（内核仅限于少量堆栈空间，而用户空间程序没有此限制）导致随机内存损坏。
> 
> 许多常用的功能已经在内核中实现了，有时是在“轻量级”版本中，它们的功能不如用户空间对应的功能。在从头开始编写自己的版本之前，请务必对您可能使用的任何函数的标题进行 grep。一些最常用的在 include/linux/string.h 中。
> 
> 每当您觉得需要一个库函数时，您应该考虑您的设计，并问自己是否可以将部分或全部代码移至用户空间。

如果您需要使用标准库中的函数，您必须重新实现该功能，原因很简单——没有标准 C 库。

C 库基本上是在 Linux 内核（或其他操作系统的内核）之上实现的。

例如，C 库的 mkdir(3) 函数基本上只不过是 Linux 内核系统调用 mkdir(2) 的包装器。

[http://linux.die.net/man/3/mkdir](http://linux.die.net/man/3/mkdir) [http://linux.die.net/man/2/mkdir](http://linux.die.net/man/2/mkdir)

# c++ - 如何检测一个窗口已经被最大化？

> ID：13485272
> 
> 赞同：5
> 
> 时间：2012-11-21T02:01:44.920
> 
> 标签：c++, winapi, visual-c++

有谁知道窗口最大化时发送的 WM_MESSAGE（通过在标题栏中按下最大化按钮，或者通过双击标题栏？）

是否有关于按下最大化按钮的 Windows 消息？

Win32/C++，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:06:57.490

您会在 wParam 中获得值为 SIZE_MAXIMIZED的[WM_SIZE消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646%28v=vs.85%29.aspx)

**编辑**

下面的@jamesdlin 评论让我注意[WM_WINDOWPOSCHANGED](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632652%28v=vs.85%29.aspx)文档，该文档指出（强调我的）：

> **备注** 默认情况下，DefWindowProc 函数将 WM_SIZE 和 WM_MOVE 消息发送到窗口。如果应用程序处理 WM_WINDOWPOSCHANGED 消息而不调用 DefWindowProc，**则不会发送 WM_SIZE 和 WM_MOVE 消息。**在 WM_WINDOWPOSCHANGED 消息期间执行任何移动或大小更改处理而不调用 DefWindowProc 会更有效。

谢谢詹姆斯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:28:08.347

我最近处理了这个问题，我决定的方法是检查`IsZoomed`响应`WM_WINDOWPOSCHANGED`，将其结果与前一个结果进行比较以检测何时发生转换，然后转发`WM_WINDOWPOSCHANGED`到默认窗口过程。

如果您可以完全控制应用程序中的消息处理，并且知道没有（也永远不会）`WM_WINDOWPOSCHANGED`抑制`WM_MOVE`/的处理程序`WM_SIZE`，那么您应该能够直接在`WM_SIZE`处理程序中处理它，如[jachguate 的回答](https://stackoverflow.com/a/13485303/179715)中所述.

# jquery - 使用 btn-primary 的 Twitter boostrap 按钮组

> ID：13485273
> 
> 赞同：2
> 
> 时间：2012-11-21T02:01:51.860
> 
> 标签：jquery, twitter-bootstrap

我想定义一个`btn-group`（`buttons-radio`模式，即单选风格），如此处所述[，](http://twitter.github.com/bootstrap/components.html#buttonGroups)但`active`我不想使用所选按钮的类，而是使用`btn-primary`，以便使所选按钮更清晰可见。

我的问题是：我是否需要实现自定义 javascript/jQuery 来实现这一点，或者我可以以某种方式告诉引导程序使用`btn-primary`而不是`active`选定按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:03:53.910

我不建议更改任何引导 JS。最好创建自定义 onclick 事件和“回收”引导代码。

就我而言，我的 HTML 如下：

```
<div id="bar" class="btn-group" data-toggle="buttons-radio">
    <button type="button" class="btn btn-large btn-success active">First</button>
    <button type="button" class="btn btn-large">Second</button>
    <button type="button" class="btn btn-large">Third</button>
</div> 
```

**编辑：** 我来了如何覆盖切换功能

```
$.fn.button.Constructor.prototype.oldtoggle = $.fn.button.Constructor.prototype.toggle
$.fn.button.Constructor.prototype.toggle = function(){
    var $parent = this.$element.parent('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.btn-success')
      .removeClass('btn-success')

    this.$element.toggleClass('btn-success')
    this.oldtoggle()
} 
```

这允许您仅设置您想要的 btn 组的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:31:53.530

您需要做的就是修改 js 库。更改以下代码（请在 bootstrap-button.js 中找到它们）：

```
 Button.prototype.toggle = function () {
    var $parent = this.$element.parent('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.active')
      .removeClass('active')

    this.$element.toggleClass('active')
  } 
```

如下：

```
 Button.prototype.toggle = function () {
    var $parent = this.$element.parent('[data-toggle="buttons-radio"]')

    $parent && $parent
      .find('.btn-primary')
      .removeClass('btn-primary')

    this.$element.toggleClass('btn-primary')
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T16:37:50.540

我同意darkless，不要修改现有的javascript。

我做了一些类似的事情：

HTML：

```
<div class="my-parent-row">
    <div class="btn-group" data-toggle="buttons-radio" data-selected-class="btn-success">
        <button class="btn btn-success active">First option</button>
        <button class="btn">Other option</button>                
    </div>
</div> 
```

Javascript：

```
$(".my-parent-row .btn-group .btn").on("click", function () {
    var selectedClass = $(this).parent().data("selected-class");
    $(this).siblings("." + selectedClass).removeClass(selectedClass);
    $(this).addClass(selectedClass);
}); 
```

# wpf - 鼠标悬停时的情节提要执行

> ID：13485274
> 
> 赞同：3
> 
> 时间：2012-11-21T02:02:05.383
> 
> 标签：wpf, animation, storyboard, expression-blend

我在 Expression Blend 中开发了一个 WPF 应用程序，这是一个带有反弹效果的故事板的简单按钮附加。

到目前为止一切顺利，现在我希望我的按钮在鼠标进入它时弹跳，它确实如此。但它一直在这样做。我移动鼠标一次，再次弹跳后落入鼠标区域（我没有移动鼠标，鼠标光标仍然）并再次开始弹跳。

这是我正在使用的全部代码

```
 <Window.Resources>
    <Storyboard x:Key="Storyboard1">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="button">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="button">
            <EasingDoubleKeyFrame KeyTime="0" Value="0">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BounceEase EasingMode="EaseIn"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
            <EasingDoubleKeyFrame KeyTime="0:0:1" Value="-29">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BounceEase EasingMode="EaseIn"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource Storyboard1}"/>
    </EventTrigger>
</Window.Triggers>

<Grid x:Name="LayoutRoot">
    <Button x:Name="button" Content="Button" HorizontalAlignment="Left" Height="51" Margin="76,100,0,0" VerticalAlignment="Top" Width="130" RenderTransformOrigin="0.5,0.5">
        <Button.RenderTransform>
            <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform/>
                <TranslateTransform/>
            </TransformGroup>
        </Button.RenderTransform>
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseEnter">
                <ei:ControlStoryboardAction Storyboard="{StaticResource Storyboard1}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Button>
</Grid> 
```

只需将其复制粘贴到您的 xaml 窗口中即可。

将鼠标保持在鼠标的上角。你会看到问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:01:53.333

我们以这个按钮动画为例：

```
<Grid>  
    <Button HorizontalAlignment="Center" VerticalAlignment="Center" Content="Test  ">
      <Button.RenderTransform>
        <ScaleTransform ScaleX="1.0" ScaleY="1.0" />
      </Button.RenderTransform> 
      <Button.Style>
        <Style TargetType="Button">
          <Style.Triggers>
            <EventTrigger RoutedEvent="MouseEnter">
              <EventTrigger.Actions>
                <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleX" To="2.0" />
                    <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleY" To="2.0" />
                  </Storyboard>
                </BeginStoryboard>
              </EventTrigger.Actions>
            </EventTrigger>
            <EventTrigger RoutedEvent="MouseLeave">
              <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.0" />
                    <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.0" />
                  </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
          </Style.Triggers>
        </Style>
      </Button.Style>     
    </Button>
  </Grid> 
```

所以当你的鼠标进入按钮区域时，它会变大，当鼠标离开时，它会收缩回来。

默认情况下，StoryBoard 的：

*   `AutoReverse = False`，如果为真，动画一结束就会恢复。
*   `FillBehavior = HoldEnd`，这使得按钮的外观在动画结束后保持不变（即：只要您将鼠标放在按钮上方，按钮就会保持 2 倍大）。如果设置为`Stop`，它将在动画完成后立即恢复到原始状态（没有动画，这与 AutoReverse 不同）。
*   `RepeatBehavior = 1x`，您可以将其设置为 a `TimeSpan`，`nx`其中**n**是您希望动画重复的次数，否则`Forever`它将永远循环。

您应该检查这些设置是否被篡改。

最后但并非最不重要的一点是，确保与动画相关的逻辑是有意义的并且不会导致循环（这反过来会导致动画循环）。例如，如果您基于鼠标悬停在一个元素上进行动画制作，并且动画移动了该元素，那么您的鼠标不再悬停在该元素上，因此动画将恢复，将鼠标下的按钮带回，等等，永远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:59:25.587

弹出的内容是当按钮高 51 像素时，您将按钮向下移动 29 像素。按钮可能会从鼠标移开并开始向后移动以反转动画。

您可以通过重新设计按钮和动画来解决此问题： - 将按钮放在容器中（网格、堆栈面板 - 任何适合您的东西） - 使容器的背景“透明”（与“null”不同） -使按钮与该容器的底部对齐 - 在容器上触发动画并更改容器的高度 结果是，当按钮移开时，鼠标仍在其容器上方，因此动画不会停止和反转。- 使用 AutoReverse 和 RepeatBehavior 控制动画行为

-- 这显然不是你使用的全部代码（“i”命名空间声明在哪里？）所以我看不到你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T04:35:15.703

您可以尝试将鼠标放在具有透明（非空）背景的画布内，并在鼠标移到画布上时为按钮设置动画。按钮会离开它的位置，但画布不会。例如，您可以在模板控件中使用该解决方案。

# java - 如何在 MasterDetailFlow Android Java 示例中动态添加/删除项目片段？

> ID：13485275
> 
> 赞同：0
> 
> 时间：2012-11-21T02:02:05.703
> 
> 标签：java, android, fragment, master-detail

我有一个使用“MasterDetailFlow”向导创建的 Android Java 项目。

我已经获得了几个我想作为主项目碎片显示的项目。

我使用异步任务来执行网络 io，因此它不会阻止主线程上的 UI 更新。

现在如何更新 ListFragment？有一个列表适配器，一个持有项目的虚拟类......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:05:08.087

这很简单。您只需调用 adapter.notifyDataSetChanged()。

# php - 根据在另一个列表中选择的值在 drupal 7 中动态加载列表

> ID：13485276
> 
> 赞同：4
> 
> 时间：2012-11-21T02:02:06.010
> 
> 标签：php, drupal, drupal-7, drupal-fapi, drupal-forms

作为drupal 7的新手，我有以下要求我有一个基于该业务列表中所选项目的业务下拉列表（drupal中的列表），另一个具有用户的列表应该被填充，并且还有一个列表分支在字段集合中还应根据业务下拉列表中选择的值加载。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:50:53.327

尝试[分层选择](http://drupal.org/project/hierarchical_select)模块。

[演示](http://wimleers.com/demo/hierarchical-select)。

> 该模块定义了“hierarchical_select”表单元素，这是一种让用户在层次结构中选择项目的极大增强方式。

**更新**

另一个选项[简单的分层选择](https://drupal.org/project/shs)

# javascript - 将跨越多个节点的范围划分为多个范围

> ID：13485277
> 
> 赞同：4
> 
> 时间：2012-11-21T02:02:33.263
> 
> 标签：javascript, jquery, html, range, rangy

如何将范围拆分为[跨](http://code.google.com/p/rangy/)多个节点的多个范围？

例如，我有一个用`{`and表示的范围`}`（标记实际上不在内容中）：

```
<p>
    I {like eggs.
</p>
<p>
    Yes I} do!
</p> 
```

我想将一个范围分成2个，每个在自己的节点中，例如：

```
<p>
    I {like eggs.
}</p>
<p>{
    Yes I} do!
</p> 
```

# css - 元素位于元素外部

> ID：13485281
> 
> 赞同：0
> 
> 时间：2012-11-21T02:03:05.253
> 
> 标签：css, html, position

我正在尝试制作一个 HTML DOM 幻灯片创建器，它将文本、图像等插入幻灯片以进行演示。考虑的主要浏览器是 Nintendo DSi 和 3DS 浏览器，但我也想要计算机功能，这意味着我正在使用 CSS 百分比。

但这里有个问题：一个 HTML span 元素的相对定位是 top 100% 和 left:90%。

左侧位置很好-顶部位置不是...我不明白为什么，但是跨度从顶部位置完全显示在元素之外。

[在这里](http://nos.heliohost.org/NintendOS%20Office/create_show.php "这里")亲自检查一下。

“幻灯片 1”应该位于我拥有的浅灰色 div 的底部边框之上。当定位应该相对于那个 div 时，为什么这在外面？

我一直对 CSS 定位感到困惑……有人可以帮我解决这个问题吗？这越来越令人沮丧。顺便说一句，您要寻找的是 HTML div 之外的“幻灯片 1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:47:28.990

正是因为`top: 100%`. 那是告诉它移动`span`容器高度的 100%，当然，因为它从容器顶部开始，所以它刚好超过容器底部。请注意，`relative`正如您所说，定位不是“相对于那个 div”完成的，它实际上是相对于那个`span`（[你可能想对此做一些阅读](http://www.w3.org/TR/CSS21/visuren.html#comparison)）。但是，当使用百分比偏移量时，它会计算相对于容器大小的偏移量。

由于您的`div.slide`容器本身就是容器`position:relative`，因此我相信您想要的是将您的容器设置`span`为`position:absolute`而不是进行`top`定位，`bottom: 0`而是将其直接放置在`div`您尝试将其放置在底部的底部。你可以保留你的`left: 90%`.

# javascript - 如何在按钮单击时导入图像/更改它们？JavaScript

> ID：13485282
> 
> 赞同：0
> 
> 时间：2012-11-21T02:03:11.707
> 
> 标签：javascript, button, photo

我正在尝试严格使用 JavaScript 从服务器上的文件夹导入图像，以便我可以在单击按钮时使用新图像将其切换出来。我知道如何使用 HTML 导入照片，但是有没有办法通过 JavaScript 来做到这一点？做这个的最好方式是什么？任何帮助、指导或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:23:56.370

您可以在页面上的 dom 元素中嵌入图像。这是一个非常简单的示例 html 文件，假设`myimage.jpg`文件位于同一目录中。查看[w3schools](http://www.w3schools.com/js/default.asp)了解更多关于 javascript 的信息。

```
<html>
    <head>
    <script type="text/javascript">
    function btnClick()
    {
        spanElement = document.getElementById("imgContainer");
        spanElement.innerHTML = '<img src="myimage.jpg" />';
    }
    </script>
    </head>
    <body>
        <button onclick="btnClick()">Show Image</button>
        <span id="imgContainer"></span>
    </body>
</html> 
```

# css - 如何使 div 垂直但与水平 div 的左下角坐标对齐？

> ID：13485283
> 
> 赞同：0
> 
> 时间：2012-11-21T02:03:27.647
> 
> 标签：css

这里有一个粗略的草图。有没有办法在没有 div 的高度和宽度的硬编码值的情况下实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:48:34.373

您可以使用 定义要旋转的点`transform-origin`。

```
-webkit-transform-origin: 0% 100%; 
```

这将围绕左下角旋转元素。默认情况下，它设置为元素的中心 (50% 50%)。

[演示](http://jsfiddle.net/Actss/16/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:49:24.187

这是`transform-origin`应该帮助的。

我看过你的小提琴。您需要绝对定位 div 吗？如果没有，那么设置[`transform-origin`](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)为`0 0`足以使其工作。（我想这就是你想要的：http: [//jsfiddle.net/Actss/17/](http://jsfiddle.net/Actss/17/)）

从 div 中删除`position: absolute`确保第二个`div`的左上角接触第一个`div`的左下角。使第二个旋转`div`发生在同一点（通过使用`transform-origin`），您将获得所需的效果。

# php - 如何返回从 jQuery Ajax 请求提交的数据？

> ID：13485284
> 
> 赞同：0
> 
> 时间：2012-11-21T02:03:34.967
> 
> 标签：php, javascript, jquery, ajax

我真的迷失了如何使用 AJAX jquery 返回以前提交给 PHP 文件的值。我刚开始学习 jquery，所以我仍然在概念上苦苦挣扎。

这是我的 jquery 代码：

```
$('#button2').click(function(e) {
    $.post("status.php", 
        {name: $('#name').val(),
        email: $('#email').val()},
        function(data){
            $('#message').html(data);
        });
    return false;
});

$('#button3').click(function(e){
    $.get({
        url: "status.php",
        data: 'information=',
        success: function(data) {
            $('#content').data(data); },
            datatype: "text"
    });
    return false;
}); 
```

我让用户将他们的姓名和电子邮件提交到 php 文件，该文件正确通过并显示输出消息。但我想有另一个按钮来显示他们的提交，所以名称：xxxxx 电子邮件：#content div 中的 xxxxx

这是PHP文件

```
<?php
extract($_GET);
extract($_POST);

$data = array();

if(isset($name) && isset($email))
{
$data[$email] = $name;
echo "User information submitted.";
}

if(isset($information))
{
foreach($data as $key => $value)
{
    $name .= $key.",";
    $email .= $value.",";
}

echo $name."|".$email."\n";
}
?> 
```

我们的老师为我们提供了 PHP 文件，我们将编写 jquery 和 ajax 代码。然而，我很失落。关于如何使用 $information 检索用户提交的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:07:19.903

你没有在你的 PHP 文件中请求你的`$name`和变量。`$email`将此添加到顶部：

```
$name = $_REQUEST['name'];
$email = $_REQUEST['email']; 
```

在旁注中，您的 $('#button3') 正在使用 $.post 并且您正在使用`type:"GET"`. 您需要选择要使用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:07:41.647

请注意，对于 button3 处理程序，您不应使用 $.post，而应使用 $.get。

然后你可以删除类型：''GET'

# javascript - 播放 youtube 视频时淡出页面

> ID：13485287
> 
> 赞同：1
> 
> 时间：2012-11-21T02:03:49.197
> 
> 标签：javascript, jquery, css, youtube, youtube-api

当嵌入的 youtube 视频正在播放时，如何淡出/或在整个页面上放置黑色半透明封面，并在视频结束或暂停时恢复正常？

javascript？jQuery？

据我所知，我不知道足够的编码（只是 html/css）来使用它： [https ://developers.google.com/youtube/js_api_reference#Adding_event_listener](https://developers.google.com/youtube/js_api_reference#Adding_event_listener)

我想出了如何使用 API 来调用视频，并在 API 中找到了一些事件监听器代码来调用状态变化的函数（例如播放和结束视频），但我不确定为什么监听器部分不是工作..我在这个级别没有任何API或javascript经验..

```
$(document).ready(function(){

var params = { allowScriptAccess: "always" };
var atts = { id: "myytplayer" };
swfobject.embedSWF(
    "http://www.youtube.com/v/TEHWDA_6e3M?enablejsapi=1&playerapiid=ytplayer&version=3",
    "ytapiplayer", 
    "960", 
    "540", 
    "8", 
    null, 
    null, 
    params, 
    atts
);

function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById("myytplayer");
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

function onytplayerStateChange(newState) {
   alert("Player's new state: " + newState);
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:17:55.993

放置一个覆盖整个页面的 div，然后通过侦听播放器的 onStateChanged 事件将视频放在其顶部`position:fixed`。`background-color: rgba(0, 0, 0, 0.75)`您必须使用 javascript player api 才能工作。

# google-app-engine - 带有宏的编译模板不适用于应用引擎

> ID：13485294
> 
> 赞同：3
> 
> 时间：2012-11-21T02:05:12.973
> 
> 标签：google-app-engine, python-2.7, module, jinja2, gae-module

我使用 Jinja2 编译模板和模块加载器从数据存储中加载编译模板（python 代码）。但是，当我的模板包含宏时，它不适用于应用引擎：TypeError: 'NoneType' object is not callable

但在应用引擎 SDK 中它工作正常。当我跳过宏调用时，我收到同样的错误。

没有宏它工作正常。在没有解决这个宏问题的情况下，我在模板中调用了一个 python 函数来实现宏的功能。

更新：这是导致错误的模板源代码：

```
{% extends "mainpage.html" %}
{% block form %}
    {% macro test_macro(name) %}
        <p>{{ name }}</p>
    {% endmacro %}
    <div>
    {{ test_macro('John Doe') }}
    </div>
{% endblock %} 
```

这是编译后的模板代码（表单块部分）：

```
def block_form(context, environment=environment):
    if 0: yield None
    yield u'\n'
    def macro(l_name):
        t_1 = []
        pass
        t_1.extend((
            u'\n<p>', 
            to_string(l_name), 
            u'</p>\n', 
        ))
        return concat(t_1)
    l_test_macro = Macro(environment, macro, 'test_macro', ('name',), (), False, False, False)
    yield u'\n<div>\n\t%s\n</div>\n' % (
        context.call(l_test_macro, 'John Doe'), 
    ) 
```

更新：经过一些调试它工作。不过我明白！！！问题：我失去了我的进口。当我在代码中重新定义我的导入时。有效。

模块顶部：

```
from __future__ import division
from jinja2.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, identity, TemplateNotFound
__jinja_template__ = None 
```

为了使它工作，我必须添加一个内联导入：

```
from jinja2.runtime import Macro     # import again ?????     
l_test_macro = Macro(environment, macro, 'test_macro', ('name',), (), False, False, False) 
```

有人可以解释一下，我怎么能失去我的进口？？？我只在应用程序引擎中遇到这个问题，而不是在 SDK 中？？？这是命名空间问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:17:02.017

我能够通过将模块添加到 sys.modules 来解决它。但是我不明白为什么当我使用宏时它在 SDK 中而不是在 GAE 中工作

这是我更改的模块加载器的代码。

```
def get_module(self, environment, template):
    # Convert the path to a module name
    name = template.replace('.html', '').replace('.txt','').replace('/', '.')   # NO extensions   
    module = None

    if self.package == None :                                           # load from db and not from package
        logging.info('load module : ' + name)                           # load module from runtimes db 
        if name in sys.modules : return sys.modules[name]               # already imported              
        try :
            runtime = models.Runtimes.rtimes_get_by_key_name(template)
            module_code = db.Text(runtime.compiled)                                 
            module = imp.new_module(name)
            exec module_code in module.__dict__                                         
            sys.modules[name] = module                                  # add to sys modules, so no import again
            return module
        except (ImportError, AttributeError):
            logging.error('load failed : ' + name)

    else : .... # load from package

    raise TemplateNotFound(template) 
```

# c# - 我如何找到字符串中第三长的单词

> ID：13485298
> 
> 赞同：-2
> 
> 时间：2012-11-21T02:05:48.620
> 
> 标签：c#

你好，我有点卡住了，我不知道如何在字符串中找到第三长的单词，我有我的代码来找到最长的单词，但我无法让它找到第三长的单词。有什么帮助吗？

```
public void longestWord()
    {
        string sentance, word;
        word = " ";
        char[] a = new char[] { ' ' };
        sentance = textBox1.Text;  //<--string here

        foreach (string s1 in sentance.Split(a))
        {
            if (word.Length < s1.Length)
            {
                word = s1;
            }
        }
        label9.Text = ("The longest word is " + word + " and its length is " + word.Length + " characters long");
    } 
```

PS字符串即时测试的一个例子是：

DarkN3ss 是我最有经验的基于 Windows 的商业解决方案提供商。我专注于通过最好地理解这些技术和方向来提供我的商业价值。DarkN3ss 根据我在 Windows 和 Linux 产品方面的能力和经验，将我视为实施解决方案的“精英业务合作伙伴”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:14:08.947

使用linq怎么样？

```
sentance.Split(' ').OrderByDescending(w => w.Length).Skip(2).FirstOrDefault() 
```

在一个函数中：

```
public void nthLongestWord(int index = 0)
{
    string word = null;
    if(index <= 0)
    {
        word = sentance.Split(' ').OrderByDescending(w => w.Length).FirstOrDefault();
    }
    else
    {
        word = sentance.Split(' ').OrderByDescending(w => w.Length).Skip(index - 1).FirstOrDefault();
    }

    if(!string.IsNullOrWhitespace(word))
    {
        label9.Text = ("The longest word is " + word + " and its length is " + word.Length + " characters long");
    }
    else 
    {
        // display something else?
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:11:31.547

如果您想对当前代码进行最少的更改，那么您应该做的是存储三个最长的单词（即，而不是`word`、 have `word1`、`word2`和`word3`，或者如果您愿意，可以使用数组）。

然后，在 if 语句中，设置 word3=word2、word2=word1 和 word1=s1。

这样，第三大单词将在`word3`.

不是最有效的，但您可以在一定程度上保留当前代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:29:10.733

**解决方案：**获取所有第三大词

```
 string[] splitStr = sentence.Split(' ');

   if (splitStr.Length > 2)
   {
        List<int> allLengths = splitStr.Select(x => x.Length).Distinct().ToList();

        int thirdLargestWordLength = allLengths.OrderByDescending(x => x)
                                               .Skip(2).Distinct().Take(1).FirstOrDefault();

        if (splitStr[0].Length != thirdLargestWordLength && 
         splitStr[1].Length != thirdLargestWordLength)
         {

            string[] theThirdLargestWords = splitStr.Where(x => x.Length == thirdLargestWordLength)
                                                                  .ToArray();

             if (theThirdLargestWords.Length == 1)
             {
                label9.Text = "The third longest word is " + theThirdLargestWords[0];
             }
             else
             {
                string words = "";

                for (int i = 0; i < theThirdLargestWords.Length; i++)
                {
                   if (i == 0)
                   {
                     words = theThirdLargestWords[i];
                }
               //else if ((i + 1) == theThirdLargestWords.Length)
               //{
               //   words += " and " + theThirdLargestWords[i];
               //}
                else
                {
                    words += ", " + theThirdLargestWords[i];
                }
             }

             label9.Text = "The third longest words are " + words;
        }
      }
   } 
```

我注释掉了“and”部分，因为我不确定你是否想要在你的字符串中。我还添加了第一个 if 语句，这样如果您的单词少于 3 个，您就不会收到错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T02:08:59.743

如果你觉得使用临时数组很舒服，你应该在那里复制你的单词，对它们进行排序并取第三长的单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T02:17:49.190

这可能有编译错误，但只是为了给你一个想法。

var words = sentence.split();

words.OrderBy (w => w.length ).ToArray ()[2]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T02:54:48.677

GroupBy 长度解决方案

```
var thirdLongests = words.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).GroupBy(x => x.Length).OrderByDescending(x => x.Key).Skip(2).First().ToArray(); 
```

# parsing - lisp 解析“不”

> ID：13485300
> 
> 赞同：2
> 
> 时间：2012-11-21T02:06:24.920
> 
> 标签：parsing, recursion, lisp

```
(defun simplify (x) 

 (if (and (not (null x)) (listp x))
   (if (and (equal '(car x) '(cadr x)) (equal '(car x) 'not))
      (simplify (cddr x))
      (cons (car x) (simplify (cdr x)))
     )
    'nil
  )
) 
```

这个 lisp 函数旨在将表达式作为参数，然后从中删除多余的 'not's 并返回它。它检查参数是否为非空列表，如果不是则返回 nil（基本情况）。如果它非空，我想检查 car(x) = car(cdr(x)) = 'not'。如果没有检测到它们是一对“不是”，那么它应该递归并建立在一个列表上以返回。如果检测到它们都是“非”，那么它应该仍然递归但也跳过 car(x) 和 car(cdr(x))。现在所有这些代码所做的只是返回一个与参数相同的表达式，所以我认为问题是我在嵌套 if 语句中的条件没有正确设置，我如何检查 car(x) 和 cadr(x)两者都是'不是'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:35:51.947

“当你假设……”

实际上，测试是半好的（但你最终会参加`(car nil)`if `x`is `(not)`）。问题是递归。在纸上试一试：

```
(simplify '(and (not (not y)) (or x (not (not z))))` 
```

1.  (车 x) 不是`not`。

2.  所以：`(cons (car x) (simplify (cdr x))`

3.  现在`x`是'((not (not y)) (or x (not (not (not z)))) `So`(car x) `is`(not (not y)) `, which is not equal to`not`。再次递归

4.  现在`x`是 ((or x (not (not z))) `and`(car x) `is`(or x (not (not (not z))))`。但你可能明白了。

提示：`(map simplify x)`并修复您的终止条件以返回`x`if`x`是一个原子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:37:25.243

`(equal '(car x) '(cadr x))`总是假的，因为 list 与 list`(car x)`不同`(cadr x)`。如果你想得到某个特定的`car`and ，你不需要引用这些表达式。`cadr``x`

# c# - 如何在 C# 的主线程中生成工作线程并处理它们的输出？

> ID：13485304
> 
> 赞同：4
> 
> 时间：2012-11-21T02:06:58.227
> 
> 标签：c#, multithreading, task-parallel-library

我想在 C# 控制台应用程序中实现以下功能：

1.  在主线程中产生几个工作线程；
2.  每个工作线程定期处理数据并向主线程发送字符串消息；
3.  主线程处理消息并等待所有工作线程完成；
4.  主线程退出。

现在我正在使用 TPL，但我不知道如何将消息从工作线程发送到主线程。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:37:07.913

您可以将生产者/消费者模式与 TPL 一起使用，如[MSDN 博客上的此示例所示](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)。

或者，您可以将其踢老派并使用信号，请参阅[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)。

或者，如果您希望在*非常*低的级别上工作，请使用`Monitor.Pulse`with `Monitor.WaitOne`（如此处所示[）](http://www.codeproject.com/Articles/28785/Thread-synchronization-Wait-and-Pulse-demystified)。

无论哪种方式，您都在寻找同步，您可以在[此处](http://msdn.microsoft.com/en-us/library/ms173179.aspx)阅读。

* * *

其他选项，如果您实际上并不关心更新在哪个线程上运行，则将委托作为参数并在那里打印更新，à la：

```
static Task<string> ReadFile(string filename, Action<string> updateStatus)
{

    //do stuf synchronously
    return Task<string>.Factory.StartNew(() => {
        System.Threading.Thread.Sleep(1000);
        //do async stuff
        updateStatus("update message");
        //do other stuff
        return "The result";
    });
}

public static void Main(string[] args) 
{
    var getStringTask = ReadFile("File.txt", (update) => {
        Console.WriteLine(update)
    });
    Console.Writeline("Reading file...");
    //do other stuff here
    //getStringTask.Result will wait if not complete
    Console.WriteLine("File contents: {0}", getStringTask.Result);
} 
```

会打印：

```
Reading file...
update message
File contents: The result 
```

`"update message"`调用`Console.WriteLine`仍会在线程上发生，`ThreadPool`但它仍可能满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:35:51.833

我会将工作线程包装到他们自己的`Func`或常规方法中，`IEnumerable<string>`并将其作为返回类型。然后，我将为每个调用/ 方法并处理其消息`foreach`的工作人员创建一个任务。`Func`

这是一个使用两种常规方法的简单示例。如果方法是任意的，您将需要创建一个`List<Task>`

```
static void Main(string[] args)
{
    var task1 = Task.Factory.StartNew(()=>{foreach (var n in Back1(13)) Console.WriteLine("From Back 1, said "+n);});
    var task2 = Task.Factory.StartNew(() => { foreach (var n in Back2(5)) Console.WriteLine("From Back 2, said " + n); });
    task1.Wait();
    task2.Wait();
    Console.WriteLine("All done");
    Console.ReadLine();
}

static IEnumerable<string> Back1(int it)
{
    for (int i = 0; i < it; i++)
    {
        System.Threading.Thread.Sleep(100);
        yield return i +" of "+it;
    }

    yield return "I'm done";
}

static IEnumerable<string> Back2(int it)
{
    for (int i = 0; i < it; i++)
    {
        System.Threading.Thread.Sleep(150);
        yield return i +" of "+it;
    }

    yield return "I'm done";
} 
```

# eclipse - 使eclipse删除未使用的导入但保持未解决

> ID：13485313
> 
> 赞同：5
> 
> 时间：2012-11-21T02:07:45.837
> 
> 标签：eclipse

**有没有办法让 Eclipse 继续使用但未解决的导入？**

我正在使用 Eclipse 的保存操作来删除未使用的导入。不幸的是，它还删除了已使用但未解决的导入。

在下面的示例中`GeneratedClass`，如果我`MyClass`在生成`GeneratedClass`. 当我晚生成代码时，`MyClass`会丢失导入。

```
import a.b.GeneratedClass;
public class MyClass extend GeneratedClass {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:33:53.900

感谢 Bananeweizen 和 Krispy 的贡献，但到目前为止，这个问题的答案似乎是**否定**的。

对我来说最有效的工作就是每次保存带有未解析导入的文件时都按 ctrl+z。

~~我已经向 Eclipse 的 bugtracker 提交了一个错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=395538](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395538)~~

此 Eclipse 错误跟踪此问题：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=357795](https://bugs.eclipse.org/bugs/show_bug.cgi?id=357795)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:10:01.873

不要使用保存宏，而是按 Ctrl-Shift-O，这将使您更明确地控制何时应该整理导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:31:29.677

您可以禁用清理操作，而是手动删除不需要的导入，`Ctrl``1`以调用快速修复。

然而，你只是试图隐藏真正的问题。真正的问题是您生成的代码不是在正确的时间生成的。你应该解决这个问题。如果您不知道如何在每个项目构建期间自动涉及 Eclipse 中的操作，请查看[这个示例](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm)（它会在每次构建期间自动创建一个带有自定义脚本的 jar 文件）。您可以按照您想要的任何顺序将这些构建器应用到项目中，因此您始终可以在保存 Java 文件时在 Java 编译器之前自动调用代码生成。

# php - php html下拉到mysql

> ID：13485314
> 
> 赞同：1
> 
> 时间：2012-11-21T02:08:01.843
> 
> 标签：php, html

好吧，我在最后一天左右一直在试验 php 和我的 sql。

但是我一直在尝试制作一个简单的输入表单，用户将在网页上填写然后它流入我的（mysql）服务器到目前为止，我有它采用 FirstName LastName Gender 和 City 但下一个问题是状态和提出一个问题，我在所有 50 个州都有一个下拉列表，但我认为我的 html 缺少一个因素，女巫将允许我的 php 脚本抓取它

这是我的状态下拉列表的代码

```
State: <select>
<option value="Alabama">Alabama</option>
<option value="Alaska">Alaska</option>
<option value="Arizona">Arizona</option>
<option value="Arkansas">Arkansas</option>
<option value="California">California</option>
<option value="Colorado">Colorado</option>
<option value="Connecticut">Connecticut</option>
<option value="Delaware">Delaware</option>
<option value="Florida">Florida</option>
<option value="Georgia">Georgia</option>
<option value="Hawaii">Hawaii</option>
<option value="Idaho">Idaho</option>
<option value="Illinois">Illinois</option>
<option value="Indiana">Indiana</option>
<option value="Iowa">Iowa</option>
<option value="Kansas">Kansas</option>
<option value="Kentucky">Kentucky</option>
<option value="Louisiana">Louisiana</option>
<option value="Maine">Maine</option>
<option value="Maryland">Maryland</option>
<option value="Massachusetts">Massachusetts</option>
<option value="Michigan">Michigan</option>
<option value="Mississippi">Mississippi</option>
<option value="Missouri">Missouri</option>
<option value="Montana">Montana</option>
<option value="Nebraska">Nebraska</option>
<option value="Nevada">Nevada</option>
<option value="New Hampshire">New Hampshire</option>
<option value="New Jersey">New Jersey</option>
<option value="New Mexico">New Mexico</option>
<option value="New York">New York</option>
<option value="North Carolina">North Carolina</option>
<option value="North Dakota">North Dakota</option>
<option value="Ohio">Ohio</option>
<option value="Oklahoma">Oklahoma</option>
<option value="Oregon">Oregon</option>
<option value="Pennsylvania">Pennsylvania</option>
<option value="Rhode Island">Rhode Island</option>
<option value="South Carolina">South Carolina</option>
<option value="South Dakota">South Dakota</option>
<option value="Tennessee">Tennessee</option>
<option value="Texas">Texas</option>
<option value="Utah">Utah</option>
<option value="Vermont">Vermont</option>
<option value="Virginia">Virginia</option>
<option value="Washington">Washington</option>
<option value="West Virginia">West Virginia</option>
<option value="Wisconsin">Wisconsin</option>
<option value="Wyoming">Wyoming</option>
</select><br> 
```

这就是我选择其他元素的方式

```
<?php
include"config.php";
$FirstName = $_POST['FirstName'];
$LastName = $_POST['LastName'];
$Gender = $_POST['Gender'];

$insert = 'INSERT into content(FirstName, LastName, Gender)     VALUES("'.$FirstName.'","'.$LastName.'", "'.$Gender.'")';
mysql_query($insert); 
```

不知道该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T02:12:52.013

首先你`<select>`需要一个名称属性：

```
<select name="state"> 
```

然后你需要在你的 php 中捕获它：

```
$state = $_POST['state']; 
```

然后你需要将它添加到你的sql语句中

```
$insert = 'INSERT into content(FirstName, LastName, Gender, State)     VALUES("'.$FirstName.'","'.$LastName.'", "'.$Gender.'", "'.$state.'")'; 
```

这是假设您的`content`表中有一个名为 state 的列，它直接位于性别之后。

并且一如既往地不要使用 mysql_* 函数。使用 mysqli 或 PDO。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T02:12:41.730

为您的选择控件命名：

```
<select name="State"> 
```

并从您的 php 脚本中抓取它，如下所示：

```
$state = $_POST['State'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:15:13.080

在标签中放置一个名称属性：

```
<select name="State"> ... 
```

是的，不推荐使用 mysql_ 函数。寻找 mysqli_ ... 或者更好，考虑使用来自成熟框架的 ORM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T02:12:18.880

你必须给`<select>`标签一个 id 或一个名字，像这样：

```
<select id="state" name="state"> 
```

然后，您可以像这样在 PHP 中获取它：

```
$state= $_POST['state']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T02:12:45.000

HTML

```
State: <select name="State">
<option value="Alabama">Alabama</option>
<option value="Alaska">Alaska</option>
<option value="Arizona">Arizona</option>
<option value="Arkansas">Arkansas</option>
<option value="California">California</option>
<option value="Colorado">Colorado</option>
</select> 
```

PHP

```
$State = $_POST['State']; 
```

使用 mysqli 或 PDO 连接 mysql，不要使用上述易受攻击的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T02:31:50.933

您的状态列表框需要一个名称属性

<`select name="state" value="Alabama">Alabama</select>`

那么您可以通过以下方式捕获该值：

```
$state= $_POST['state']; 
```

然后将其添加到您的 SQL 语句中。

就是这样。

# c# - 从复选框列表中移动和删除选定的项目

> ID：13485319
> 
> 赞同：0
> 
> 时间：2012-11-21T02:08:26.293
> 
> 标签：c#, .net

嗨，我有一个带有 2 个按钮的 GUI 论坛 一个按钮将学生添加到一个复选框另一个按钮将教师添加到同一个复选框，直到我有一个小的摘要 oif 每个

我想要做的是当只选择学生或选择教师时，它会将他们移动到某种列表框，也许是另一个清单框

如果同时选择了学生和教师，则应该给出某种错误，例如必须只在消息框中选择学生或教师

或者我的其他想法如果更容易做到，学生按钮会将学生添加到清单框 1 和 2 并且教师按钮会将教师添加到清单框 1 和 3

然后，当您在清单中选择一名学生或教师并删除/删除它时，它会将他们从其他清单中删除

例如，如果我在复选框列表 1 中选择学生并将其删除，那么它将删除复选框列表 2 中的同一个学生

有可能这样做吗？如果是这样，最好的或最简单的编码方法是什么？如果可以给出一些示例代码，那么如果真的很感激

希望我的问题足够清楚，如果有点抱歉，我希望我提出问题的方式是正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:12:08.410

当用户单击按钮时，让它遍历所有选中的值并将它们添加到另一个列表或删除它们。

# c++ - 链接器错误（VS 2005 与 VS 2012）

> ID：13485326
> 
> 赞同：2
> 
> 时间：2012-11-21T02:09:28.570
> 
> 标签：c++, visual-studio-2005, visual-studio-2012, linker-errors

我正在尝试`libxml2`使用 VS 2012 编译和链接`DDK 7`头文件和库来构建库。使用 VS 2005 构建良好，但使用 VS 2012，我收到链接器错误。仔细检查生成的符号 -

在 VS 2005 上，

```
Found __imp___vsnprintf
    Referenced in error.obj
    Referenced in xmlreader.obj
    Referenced in xmlwriter.obj
    Referenced in xmlstring.obj
    Loaded msvcrt.lib(msvcrt.dll) 
```

在 VS 2012 上，

```
error.obj     : error LNK2019: unresolved external symbol __imp__vsnprintf  
                               referencedin function ___xmlRaiseError
xmlreader.obj : error LNK2001: unresolved external symbol __imp__vsnprintf
xmlwriter.obj : error LNK2001: unresolved external symbol __imp__vsnprintf
xmlstring.obj : error LNK2001: unresolved external symbol __imp__vsnprintf 
```

`__imp__vsnprintf`,`__imp___vsnprintf`在 VS 2012 和 VS 2005 上分别用于相同的功能（注意VS 2005`_`之前的额外标记`vsnprintf`）。我在构建日志中查看了 VS 2005 和 VS 2012 的编译器和链接器选项。两者都是一样的。将`showIncludes`选项传递给编译器后，我看到 VS 2005 和 VS 2012 上的源文件使用的头文件集完全相同。

为什么 VS 2012 中的符号生成仍然不同？如何在不编译和链接默认头文件和库的情况下解决问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:46:51.447

**不要** `DDK`用于构建用户模式组件。`DDK`代表`Driver Development Kit`。将其用于用户模式是未定义的行为。改为使用`SDK`。

# sas - 在 SAS 中输入 YYYY-mm-dd hh:mm:ss' 的正确命令

> ID：13485333
> 
> 赞同：2
> 
> 时间：2012-11-21T02:10:27.273
> 
> 标签：sas

我有 csv 格式的数据，其中包含这种格式的特定时间戳字段：

'2009-07-30 20:50:19'

如何将其读入 SS 数据集？我一直在尝试这个，但没有成功。

```
 data filecontents;
             infile       "C:\es.txt" dlm=',' MISSOVER DSD firstobs=2 lrecl=32767 ;
             input  START_TIME :ANYDTDTM. 
             FORMAT START_TIME datetime. 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:16:28.147

对我来说似乎很好。下面的代码适用于我的机器（9.3 TSM2）。你会发生什么？您是否只是在输入语句后缺少分号（您的示例代码是）？

```
data test;
infile "c:\temp\test.csv" dlm=',' missover;
input 
    dtvar :YMDDTTM.
    var1 $
    var2 $;
format dtvar DATETIME19.;
put dtvar= DATETIME19.;
run; 
```

结果：

```
608  data test;
609  infile "c:\temp\test.csv" dlm=',' missover;
610  input
611      dtvar :YMDDTTM.
612      var1 $
613      var2 $;
614  format dtvar DATETIME19.;
615  put dtvar= DATETIME19.;
616  run;

NOTE: The infile "c:\temp\test.csv" is:
      Filename=c:\temp\test.csv,
      RECFM=V,LRECL=256,File Size (bytes)=31,
      Last Modified=20Nov2012:20:20:51,
      Create Time=20Nov2012:20:17:51

dtvar=30JUL2009:20:50:19
NOTE: 1 record was read from the infile "c:\temp\test.csv".
      The minimum record length was 29.
      The maximum record length was 29.
NOTE: The data set WORK.TEST has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds 
```

对于它的价值，YMDDTTMw.d 是特定的信息（当然，ANYDTDTM. 也可以）。

# java - 在多维数组中存储信息并在 JOptionPane 中显示信息

> ID：13485335
> 
> 赞同：2
> 
> 时间：2012-11-21T02:10:36.483
> 
> 标签：java, arrays, multidimensional-array, joptionpane, dimensions

我将首先列出任务是什么。然后我会列出我的问题。最后，我将列出到目前为止的代码，请注意，它远未完成，但在我完成这一步之前我无法继续。

任务：

本编程作业的目的是让您亲身体验使用 Java 多维数组、使用 Button 进行事件驱动编程以及使用 JFrame 和 JOptionPane 类应用 AWT 和 Swing。

节目要求：

使用 init() 编写一个 Java Applet 用于课程分数计算，具有以下要求：

使用 JoptionPane 允许教师输入学生人数、G 数字（不需要学生姓名。）、课程数量、课程 ID（CIT230、CIT352 等）和每门课程的分数。课程成绩必须存储在二维数组中。二维数组的一个例子是：

然后显示一个表格。请记住，我们没有使用 JTables。

添加按钮并使用事件驱动编程技术，允许用户点击三个按钮，“排序和列出学生的分数”、“显示每个学生的平均分数”和“退出”。

1.  “排序并列出学生的分数”按钮——显示每个学生的排序分数。
2.  “显示每个学生的平均分”——显示每个学生的平均分。
3.  “退出”——创建一个是或否对话框让用户退出程序。

我的问题：我不知道如何创建这个多维数组，其维度取决于用户输入的内容。行是学生人数，列是课程数。当我的程序有些工作时，JOptionPane 将显示 [[null][null]]。我知道如何创建一个不在 JOptionPane 中并且具有先前设置的维度的二维数组，但这让我很失望。我不是要直接回答代码，我只需要一个示例或一些正确编写方法的指导。

我的代码：

（我有一些东西被注释掉了，我已经尝试过但没有奏效。我尝试了很多不同的方法，但我只是删除了它们。）

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;

public class ScoreApplet extends JApplet implements ActionListener 
{
    private JLabel mainMenu;
    private JButton sortScores;
    private JButton displayAverage;
    private JButton exit;
    private String[][] tableStudentScores; 

    private int studentNumber;
    private int courseNumber;
    private String studentNumberString;
    private String courseNumberString;
    private String scoresString;
    private double scores;

    public void init() 
    {
        Container contentPane = getContentPane();
        contentPane.setBackground(Color.WHITE);

        contentPane.setLayout(new FlowLayout());

        mainMenu = new JLabel("What would you like to do?");
            sortScores = new JButton("Sort And List Student's Scores");
            displayAverage = new JButton("Display Average Score for Each Student");
            exit = new JButton ("Exit");

        contentPane.add(mainMenu);
        contentPane.add(sortScores);
        sortScores.addActionListener(this);
        contentPane.add(displayAverage);
        displayAverage.addActionListener(this);
        contentPane.add(exit);
        exit.addActionListener(this);

        mainMenu.setVisible(false);
        sortScores.setVisible(false);
        displayAverage.setVisible(false);
        exit.setVisible(false);

        studentNumberString = JOptionPane.showInputDialog("Please enter the number of students:");
        studentNumber = Integer.parseInt(studentNumberString);
        tableStudentScores = new String[studentNumber][];
        courseNumberString = JOptionPane.showInputDialog("Please enter the number of courses:");
        courseNumber = Integer.parseInt(courseNumberString);
        tableStudentScores = new String[studentNumber][courseNumber];

        for (int index = 0; index < studentNumber; index++)
            for (index = 0; index < courseNumber; index++)

                scoresString = JOptionPane.showInputDialog("Please enter the scores for Student " + (index+1));
                scores = Double.parseDouble(scoresString);

        /*
        for (int index = 0; index <= (courseNumber - 1); index++)
        {

            scoresString = JOptionPane.showInputDialog("Please enter the scores for Student " + (index+1) );
            scores = Double.parseDouble(scoresString);

        }
        */

        JOptionPane.showMessageDialog(null, Arrays.deepToString(tableStudentScores));

        mainMenu.setVisible(true);
        sortScores.setVisible(true);
        displayAverage.setVisible(true);
        exit.setVisible(true);
    }

    public void actionPerformed(ActionEvent e)
    {

        if (e.getActionCommand().equals("Sort And List Student's Scores"))
        {
            /*
        }
            for (int index = 0; index < anArray.length - 1; index++)
            {   // Place the correct value in anArray[index]
                int indexOfNextSmallest = getIndexOfSmallest(index, anArray);
                interchange(index, indexOfNextSmallest, anArray);
                */
        }
        else if (e.getActionCommand().equals("Display Average Score for Each Student"))
        {

        }
        else if (e.getActionCommand().equals("Exit"));
        {
            int answer =
                       JOptionPane.showConfirmDialog(null, "End program?",
                                     "Click Yes or No:", JOptionPane.YES_NO_OPTION);

                  if (answer == JOptionPane.YES_OPTION)
                      System.exit(0);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T08:39:09.970

您应该使用括号在循环之间包含语句以将其相乘。

其次，如果您不使用列索引器的另一个变量名，则某些值将为空。

```
 for (int  column = 0; column < table_Columns_numbers  ; column++)

   for (int  row = 0; row < table_rows_numbers; row++)
   {

   //Statement 1   ask user to enter the value 

    JOptionPane.showInputDialog("Please enter the value"); 

   //Statement 2   assign the value to your multidimensional array 

    array[row][column] = the value entered

    } 
```

代码中的列号是课程编号

行号是学号的编号。

所以你使用 for 循环在 col 的课程号中输入学号 index+1 的分数。

并且每次您将输入的分数分配给表格单元格

```
for (int  col = 0; col < courseNumber; col++)

      for (int  index = 0; index < studentNumber; index++)
      {
      scoresString = JOptionPane.showInputDialog("Please enter the scores for Student " + (index+1));
      scores = Double.parseDouble(scoresString);

      //This is statement for explanation  

      System.out.println("scoresString  for student no \t"+(index+1)+"\t and course number \t"+ (col+1)+"\t"+scoresString);

     //Assigning value to   tableStudentScores[index][col] cell.

     tableStudentScores[index][col]=String.valueOf( scores);

    }

    JOptionPane.showMessageDialog( null ,Arrays.deepToString(tableStudentScores)); 
```

# jquery - 如何修改 jQuery 选项卡脚本以使用嵌套选项卡？

> ID：13485337
> 
> 赞同：2
> 
> 时间：2012-11-21T02:10:44.340
> 
> 标签：jquery

> **可能重复：**
> [嵌套的 jQuery 选项卡](https://stackoverflow.com/questions/1661949/nested-jquery-tabs)

我有这个代码：http: [//jsfiddle.net/ynts/C5FvD/](http://jsfiddle.net/ynts/C5FvD/)

**html:**

```
<ul class='tabs'>
    <li><a href='#tab1'>Tab 1</a></li>
    <li><a href='#tab2'>Tab 2</a></li>
    <li><a href='#tab3'>Tab 3</a></li>
</ul>
<hr>
<div id='tab1'>
    <p>Hi, this is the first tab.</p>
</div>
<div id='tab2'>
    <p>This is the 2nd tab.</p>
    <ul class='tabs2'>
        <li><a href='#tab2-1'>Tab 2 → 1</a></li>
        <li><a href='#tab2-2'>Tab 2 → 2</a></li>
        <li><a href='#tab2-3'>Tab 2 → 3</a></li>
    </ul>
    <div id='tab2-1'>
        <p>This is Tab 2 → <strong>1</strong>.</p>
    </div>
    <div id='tab2-2'>
        <p>This is Tab 2 → <strong>2</strong>.</p>
    </div>
    <div id='tab2-3'>
        <p>This is Tab 2 → <strong>2</strong>.</p>
        <ul class='tabs2-3'>
            <li><a href='#tab2-3-1'>Tab 3 → 3 → 1</a></li>
            <li><a href='#tab2-3-2'>Tab 3 → 3 → 2</a></li>
        </ul>
        <div id='tab2-3-1'>
            <p>This is Tab 2 → 3 → <strong>1</strong>.</p>
        </div>
        <div id='tab2-3-2'>
            <p>This is Tab 2 → 3 → <strong>2</strong>.</p>
        </div>
    </div>
</div>
<div id='tab3'>
    <p>And this is the 3rd tab.</p>
</div>​ 
```

**这个脚本：**

```
$.fn.myTabs = function() {

    return this.each(function() {

        // For each set of tabs, we want to keep track of
        // which tab is active and it's associated content
        var $active, $content, $links = $(this).find('a');

        // If the location.hash matches one of the links, use that as the active tab.
        // If no match is found, use the first link as the initial active tab.
        $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
        $active.parent('li').addClass('active');
        $content = $($active.attr('href'));

        // Hide the remaining content
        $links.not($active).each(function () {
                $($(this).attr('href')).hide();
        });

        // Bind the click event handler
        $(this).on('click', 'a', function(e){
                // Make the old tab inactive.
                $active.parent('li').removeClass('active');
                $content.hide();

                // Update the variables with the new link and content
                $active = $(this);
                $content = $($(this).attr('href'));

                // Make the tab active.
                $active.parent('li').addClass('active');
                $content.show();

                // Prevent the anchor's default click action
                e.preventDefault();
        });
    });

};    

$('.tabs, .tabs2, .tabs2-3').myTabs(); 
```

这在单击时效果很好，但是当我尝试转到嵌套选项卡[http://fiddle.jshell.net/ynts/C5FvD/show/#tab2-3-2](http://fiddle.jshell.net/ynts/C5FvD/show/#tab2-3-2)的超链接时，第一个顶部选项卡会打开。我想编辑我的代码以启用指向嵌套选项卡的链接，但我不能。

*© 我使用了本教程中的 tabs 脚本代码：[jacklmoore.com/notes/jquery-tabs](http://jacklmoore.com/notes/jquery-tabs)。*

# java - 如何从 udp 数据包中读取 1 位

> ID：13485340
> 
> 赞同：1
> 
> 时间：2012-11-21T02:11:39.897
> 
> 标签：java

我想从 udp 数据包中读取 1 位。

udp 数据包如下所示（c 代码）：

```
struct typedef struct s_foo
{
   __u32 foo;
   __u8  bar:1,
         bob:1;
} __attribute__((packed)) s_foo; 
```

我如何在java中阅读这个？

到目前为止，我有这个，但我无法阅读 foo 或 bar 或 bob ......

```
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;

public class BroadcastListener
{
    public static void main(String[] args) throws IOException
    {
        if (args.length != 1) {
            System.out.println("usage: <program> port");
            System.exit(1);
        }

        int port = Integer.parseInt(args[0]);
        DatagramSocket dgram = new DatagramSocket(port);

        byte[] buffer = new byte[2048];
        DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

        while (true) {
            dgram.receive(packet);

            String msg = new String(buffer, 0, packet.getLength());

            System.out.println(packet.getAddress().getHostName() + ": "
                    + msg);

            packet.setLength(buffer.length);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:22:51.607

要测试一下，您必须使用按位运算符示例：

这将测试该值是否设置了位 0b00001000

```
boolean result = value & 0x0A; 
```

这将返回位 0b00001000 的内容

int 值 = 值 & ~0x0A;

这是一个可以帮助您的链接：http: [//vipan.com/htdocs/bitwisehelp.html](http://vipan.com/htdocs/bitwisehelp.html)

编辑 ：

一次读取两位：

```
int nMask = 0x1A; // 0b00011000

nValue = nValue & nMask;
nValue = nValue >> 3;

nValue will contain bits at 0b00000011 
```

# bash - 用于打印元素列表的 Shell 脚本

> ID：13485341
> 
> 赞同：2
> 
> 时间：2012-11-21T02:11:54.507
> 
> 标签：bash, shell, tcl, sh

shell 脚本中是否有任何类似于 tcl 中的“list”的命令？我想将元素列表写入文件（每个都在单独的行中）。但是，如果元素与特定模式匹配，则它旁边的元素和元素本身应该打印在同一行中。shell脚本中是否有任何命令可以执行此操作？

示例：我的字符串类似于“执行命令 run abcd.v” 我想将每个单词写在文件的单独行中，但如果单词是“run”，则 abcd.v 和 run 必须打印在同一行中。所以，输出应该是这样的，

```
execute
the
command
run abcd.v 
```

如何在 shell 脚本中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T04:55:06.653

```
line="execute the command run abcd.v"
for word in $line    # the variable needs to be unquoted to get "word splitting"
do
    case $word in
        run|open|etc) sep=" " ;;  
        *) sep=$'\n' ;;
    esac
    printf "%s%s" $word "$sep"
done 
```

请参阅[http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:35:29.053

以下是在 bash 中执行此操作的方法：

*   将此以下脚本命名为`list`
*   将其设置为可执行
*   将其复制到您的`~/bin/`：

`List:`

```
#!/bin/bash
# list

while [[ -n "$1" ]]
do
   if [[ "$1" == "run" ]]; then
       echo "$1 $2"
   else
       echo "$1"
   fi
   shift
done 
```

这就是您可以在命令提示符下使用它的方式：

```
list execute the command run abcd.v > outputfile.txt 
```

你的`outputfile.txt`遗嘱写成：

```
execute
the
command
run abcd.v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:36:47.483

您可以使用以下脚本来完成它。它不会是一个单一的命令。下面是一个 for 循环，它有一个 if 语句来检查关键字 run。它不附加换行符（`echo -n`）。

```
for i in `echo "execute the command run abcd.v"`
do 
  if [ $i = "run" ] ; then  
    echo -n "$i " >> fileOutput
  else 
    echo $i >> fileOutput
  fi
done 
```

# java - 普通数组的列表操作

> ID：13485342
> 
> 赞同：0
> 
> 时间：2012-11-21T02:12:03.613
> 
> 标签：java, arrays

我正在寻找一种方法来“自动化”所有需要的转换，以使 List 操作可用于普通数组。问题是

```
public static Object[] arrayRemoveAll(Object[] oA, Object[] removeA) {
    List<Object> l = new ArrayList<Object>(Arrays.asList(oA));
    l.removeAll(Arrays.asList(removeA));
    return l.toArray(new Object[l.size()]);
} 
```

当我尝试将对象转换回其原始数组类型时（例如，如果我调用 (String[])arrayRemoveAll(strA, strA2)），总是给我 ClassCastException。

我理解为什么会发生这种情况，但是有什么巧妙的方法可以规避这种情况吗？我希望能够为一些标准的 List 操作使用通用功能。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:27:09.077

怎么样

```
public static <T> T[] arrayRemoveAll(T[] oA, Object[] removeA) {
    List<T> l = new ArrayList<T>(Arrays.asList(oA));
    l.removeAll(Arrays.asList(removeA));
    return l.toArray(Arrays.copyOf(oA, l.size()));
} 
```

不过，就个人而言，我会避免列出所有转换并手动编写循环的成本开销。它并没有变得更加冗长。

此外，如果您已经在使用 Commons Lang，它有[ArrayUtils#removeElements](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/ArrayUtils.html#removeElements%28T%5B%5D,%20T...%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:14:41.307

你可以使用泛型。例如：

```
@SuppressWarnings("unchecked")
public static <T> T[] arrayRemoveAll(T[] oA, T[] removeA) {
    java.util.List<T> l = new ArrayList<T>(Arrays.asList(oA));
    l.removeAll(Arrays.asList(removeA));
    Class<T> clazz = (Class<T>)removeA.getClass().getComponentType();
    return l.toArray((T[]) Array.newInstance(clazz, l.size()));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:37:22.323

您不能将`Object[]`转换为另一种数组类型，因为如您所知，数组不会扩展`Object[]`. 但是，您可以遍历数组并将每个元素转换回原始类型。

# ruby-on-rails - M. Hartl 的 Ruby on Rails 教程。第 10.2.1 章 - 未定义的局部变量或方法 `micropost'

> ID：13485344
> 
> 赞同：0
> 
> 时间：2012-11-21T02:12:10.937
> 
> 标签：ruby-on-rails

我在第 10.2.1 章中不断收到以下错误 - 未定义的局部变量或方法“micropost”。我正在尝试让所有帖子在显示页面上呈现。

这是我的用户控制器：

```
class UsersController < ApplicationController
      before_filter :signed_in_user, only: [:index, :edit, :update, :show, :destroy]
      before_filter :correct_user, only: [:edit, :update]
      before_filter :admin_user, [:destroy]

      def index
        #@users = User.all
        @users = User.paginate(page: params[:page])
      end

      def new
        @user = User.new
      end

      def destroy
      @user = User.find(params[:id]).destroy
      flash[:success] = "User has been deleted!"
      redirect_to users_path
      end

      def show
        @user = User.find(params[:id])
        @microposts = @user.microposts.paginate(page: params[:page])
      end

      def edit
        @user = User.find(params[:id])
      end

      def update
        @user = User.find(params[:id])

        if @user.update_attributes(params[:user])
          #good!
          sign_in @user
          flash[:success] = "Profile"
          redirect_to user_path(@user)
        else
          render 'edit'
        end

      end

      def create
        @user = User.new(params[:user])
        if @user.save
            sign_in @user
            flash[:success] = "Welcome to the Ruby app!"
            redirect_to user_path(@user)
        else
            render 'new'
        end
      end

      private

      def signed_in_user
        if !signed_in?
          store_location
          flash[:error] = "Please sign in!"
          redirect_to signin_url
        end
      end

      def correct_user
        @user = User.find(params[:id])
        if !current_user?(@user)
          redirect_to '/'
        end
      end

      def admin_user
        if current_user.admin?
          #nothing
        else
          redirect_to '/'
      end
    end

    end 
```

这是我的看法

```
<% provide(:title, @user.name) %>
      <div class="row">
        <aside class="span4">
          <section>
            <h1>
              <%= gravatar_for @user %>
              <%= @user.name %>
            </h1>
          </section>
        </aside>

       <div class="span8">
          <% if @user.microposts.any? %>
            <h3>Microposts (<%= @user.microposts.count %>)</h3>
            <ol class="microposts">
                  <li>
                    <span class="content"><%= micropost.content %></span>
                    <span class="timestamp">
                    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
                    </span>
                  </li>
            </ol>
            <%= will_paginate @microposts %>
          <% end %>
        </div>
      </div> 
```

这是微博模型：

```
# == Schema Information
        #
        # Table name: microposts
        #
        #  id         :integer          not null, primary key
        #  content    :string(255)
        #  user_id    :integer
        #  created_at :datetime         not null
        #  updated_at :datetime         not null
        #

        class Micropost < ActiveRecord::Base
          attr_accessible :content

          belongs_to :user

          validates :content, presence: true, length: { maximum: 140 }
          validates :user_id, presence: true

          default_scope order: 'microposts.created_at DESC'
        end 
```

最后，这是用户模型：

```
# == Schema Information
  #
  # Table name: users
  #
  #  id              :integer          not null, primary key
  #  name            :string(255)
  #  email           :string(255)
  #  created_at      :datetime         not null
  #  updated_at      :datetime         not null
  #  password_digest :string(255)
  #  remember_token  :string(255)
  #  admin           :boolean          default(FALSE)
  #

  class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password
   has_many :microposts, dependent: :destroy
    before_save { |user| user.email = email.downcase }
    before_save :create_remember_token
    validates :name, presence: true, length: { maximum: 50 }
    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
    validates :email, presence:   true,
                      format:     { with: VALID_EMAIL_REGEX },
                      uniqueness: { case_sensitive: false }
    validates :password, presence: true, length: { minimum: 6 }
    validates :password_confirmation, presence: true

    private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
  end 
```

如果您希望我发布更多代码，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:32:41.213

在您看来，您没有循环`@user.microposts`，请尝试以下操作：

```
 <% if @user.microposts.any? %>
        <h3>Microposts (<%= @user.microposts.count %>)</h3>
        <ol class="microposts">
          <% @user.microposts.each do |micropost| %>
            <li>
              <span class="content"><%= micropost.content %></span>
              <span class="timestamp">
              Posted <%= time_ago_in_words(micropost.created_at) %> ago.
              </span>
            </li>
          <% end %>
        </ol>
        <%= will_paginate @microposts %>
      <% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T02:20:51.290

如果您想像 micropost.content 一样直接使用局部变量（micropost），那么您必须制作一个部分（html.erb）文件并使用 render 方法在视图中调用该文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:17:08.257

在您看来，我看到有时您将微博称为：

```
micropost.content 
```

在其他的作为类属性：

```
@micropost 
```

你应该检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T02:29:34.993

看起来您的视图缺少一条循环通过用户微博以显示它们的行。添加行：

```
<% @microposts.each do |micropost| %> 
```

`micropost`现在您的行中的局部变量`<%= micropost.content %>`将存在。

# javascript - Parse.com/Backbone 全局错误处理程序

> ID：13485348
> 
> 赞同：0
> 
> 时间：2012-11-21T02:12:17.963
> 
> 标签：javascript, backbone.js, parse-platform

我有一个两部分的问题。

1.  如何*全局*处理 Parse (Backbone) 中的错误
2.  这样，每当发生连接错误时，都会显示警报，并在隐藏警报后重新**发送请求。**

第 1 部分已[在此处](https://stackoverflow.com/questions/6150514/global-error-handler-for-backbone-js-ajax-requests)回答。我的困惑在于，当该答案中表达的全局错误处理程序未指向原始请求的位置以及它定义的成功和错误回调时，重新发送请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:56:04.100

jQuery提供了一种非常方便的方式，

```
$(document).ajaxError(function(event, request, settings) {
    setTimeout( function(){
       $.ajax(settings);
    }, 2000)
}); 
```

关键部分是`settings`包含传递的原始设置的参数， `$.ajax`您可以再次将其传递给新`ajax`请求

# f# - 并行化数组创建

> ID：13485349
> 
> 赞同：3
> 
> 时间：2012-11-21T02:12:19.767
> 
> 标签：f#, array-initialization

F＃

```
[|for index in 1 .. items.Count()-1 -> (* create object here - complex operations *)|] 
```

C＃

```
Object[] newItemArray= new Object[items.Count];

Parallel.For(0, items.Count, index=>
{
    /*complex stuff here*/
    newItemArray[index] = new Object();
}); 
```

我有上面的 C# 和 F# 做同样的事情。没有`Parallel.For`F# 会稍微快一些。使用`Parallel.For`C# 只需一半的时间来执行。如何正确并行化 F# 以获得与 C# 相同的性能提升？

到目前为止我尝试过的方法是`Array.Parallel.Iteri`，所以我可以在 C# 中使用的数组技巧中使用相同的索引，但它减慢了速度而不是加快了速度。

**编辑：**

关于我在做什么的更多细节：

我有一个可枚举的`byte array array array`. 我有另一个`byte array array array`我正在比较其他人。我正在对可枚举的百分比相似性进行排序并返回前 500 个。

在 F# 和 C# 中，我都在做一个简单的嵌套 for 循环，它会增加一个计数器。当循环遍历我的可枚举中的特定项目时，我创建了一个 (item, counter) 的元组。完成创建新的 (item, counter) 可枚举项后，我对 counter 变量进行排序，获取前 500 个，然后转换回仅可枚举项。

我放入 Parallel.For 的部分是创建`IEnumerable<Tuple<item, int>>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T02:19:27.930

```
Array.Parallel.init items.Count (fun index ->
    (* create object here - complex operations *)) 
```

官方文档：[Parallel.init<'T> Function (F#)](http://msdn.microsoft.com/en-us/library/ee821138.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T02:25:24.630

在这种情况下，您不应该使用数组理解。它比高阶函数慢一点，不能并行化。

虽然我更喜欢@ildjarn 的解决方案，但这里是您的 C# 解决方案的等效解决方案：

```
// You need an uninitialized array to fill in later
let newItemArray = Array.zeroCreate items.Count

// Fill in the array in a parallel manner
Array.Parallel.iteri (fun i v ->
    (* create object here - complex operations *)) newItemArray 
```

也可以`Parallel.For`直接使用：

```
let newItemArray = Array.zeroCreate items.Count 

Parallel.For(0, items.Count, 
             (fun index ->
                 (* complex stuff here *)
                 newItemArray.[index] <- Object())
) |> ignore 
```

它更冗长，但可以让您更好地控制[并行度](http://msdn.microsoft.com/en-us/library/ff963552.aspx)。

# codeigniter - 会话的 IF 语句 - 格式化 Q

> ID：13485354
> 
> 赞同：1
> 
> 时间：2012-11-21T02:13:02.197
> 
> 标签：codeigniter, codeigniter-2

所以我认为我有这个 IF 语句。它有效，但想知道是否有更好的方法来写这个。有两个会话调用似乎没有必要......

```
if($this->session->userdata('campaign_name')){
    echo $this->session->userdata('campaign_name');
}
else {
    echo 'this';
} 
```

**请注意**，此函数将在文本输入中内联使用。所以我正在寻找尽可能少的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:20:25.410

请注意，如果不`campaign_name`存在，CI 的 Session 类的 userdata 方法将返回 false。因此将一个变量分配给可能未定义的数组键（campaign_name）

```
$campaign_name = $this->session->userdata('campaign_name');

if($campaign_name)
{
    echo $campaign_name;
}
else
{
    echo 'this';
} 
```

**或者**

```
if($campaign_name = $this->session->userdata('campaign_name'))
{ 
   echo $campaign_name;
} 
```

**控制器方法**（/application/controllers/test_controller.php）

```
 <?php if (!defined('BASEPATH')) exit('No direct script access allowed');

    class Test_Controller extends CI_Controller
    {
        function __construct()
        {
            parent::__construct();

        }
        public function myFunction()
        {
            $data['campaign_name'] = $this->session->userdata('campaign_name');
            $this->load->view('test_view',$data);

        }
    } 
```

**查看**（/application/view/test_view.php）

```
<html>
<head></head>
<body>
     <input type="text" value="<?php echo $campaign_name; ?>">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:23:23.153

In your controller, you can store the value of that session data into a variable and pass that along to the view. In the view, you can then have your if else statements that just look at the variable. I would advise against setting a variable in the view as RPM did. While it works, it breaks the separation of concerns you have going.

Also, look into using the [alternative PHP syntax](http://codeigniter.com/user_guide/general/alternative_php.html) for views in CodeIgniter. It'll make your code neater and more maintainable.

Edit: I see now that RPM has updated his answer to set the variable in the controller. That's a good example to follow.

# struts2 - 存在索引时 Struts2 和约定插件的行为（扩展 ActionSupport）

> ID：13485356
> 
> 赞同：2
> 
> 时间：2012-11-21T02:13:08.173
> 
> 标签：struts2, action-mapping, struts2-namespace

我们在 com.example.common.action 下有一个名为 'Index' 的 Action 类，并在 struts.xml 中的 package 指令中声明了 @ParentPackage('default') 并为其命名空间使用“/”并扩展了“struts” -默认”。它还声明了@Result，以便它响应与其execute() 方法返回的字符串值相对应的jsp 文件。

在我们的 struts.xml 中，配置了以下 struts 设置以及约定插件所需的其他必要配置。

```
<constant name="struts.action.extension" value=","/> 
```

当访问 /my_context/none_existing_path 时，请求显然会命中这个 Index 类，并返回 Index 的 @Result 部分中声明的 jsp 的内容。但是，如果我们提供 /my_context/，我们会收到以下错误：

HTTP 状态 404 - 没有为与上下文路径 [/my_context] 关联的命名空间 [/] 和操作名称 [] 映射的操作。

我们想知道为什么访问/my_context/none_existing_path，其中none_existing_path没有匹配的动作，可以回退到Index类，但是当请求的URL只是/my_context/时返回错误。

目前，我们的约定插件设置声明如下：

```
<constant name="struts.convention.package.locators.basePackage" value="com.example"/>

<constant name="struts.convention.package.locators" value="action"/> 
```

奇怪的是，如果我们将struts.convention.package.locators.basePackage的值改为om.example.common，通过缩小搜索范围可以立即找到前面提到的Index文件，请求/my_context/显示的内容在 Index 类的 @Result 部分中声明的 jsps。但是，由于我们的操作类分布在 com.example.[az].action 包中，其中 [az] 表示我们在包结构中拥有的大量目录，因此我们不能使用此技巧作为解决方法。我们还尝试将 index.jsp 放置在类路径的顶层，并将 index.jsp 重定向到 /my_context/index，这确实有效，但不是我们想要的。这可能是一个错误吗？

我们感谢您的回复。先感谢您。

编辑：[已注册 JIRA，问题已解决（从 Struts 2.3.12 开始）](https://issues.apache.org/jira/browse/WW-3925)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:53:11.350

尝试将 struts.convention.redirect.to.slash 设置为 false，看看是否有帮助：

```
<constant name="struts.convention.redirect.to.slash" value="false" /> 
```

# objective-c - 什么是“呼叫队列”？

> ID：13485358
> 
> 赞同：0
> 
> 时间：2012-11-21T02:13:21.557
> 
> 标签：objective-c, ios

新手问题，请多多包涵。我无法理解什么是“呼叫队列”。我四处寻找，但找不到定义。也许它太简单了，不值得定义？例如，Apple 文档说以下完成处理程序“在调用队列上调用”。谁能告诉我以下代码中的调用队列是什么？

编辑：我熟悉 GCD 以及队列和线程概念。只是不确定呼叫队列..

```
dispatch_async(DownloadQ, ^{
    //
    // Download (json to map to array)
    //
    NSArray* array = [DoubanDownloader downloadEvent];
    //
    // Map (Do NOT do this in main queue, will block UI)
    //
    [FillDatabase mapArray:array toManagedObjectsinContext:self.document.managedObjectContext byCommand:YES];
    //
    // commit changes to store 
    //
    [self.document.managedObjectContext performBlock:^{  // This will get main thread!
        [self.document saveToURL:self.document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success){
            // what's the calling queue?
        }];
    }];
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:16:36.323

调用队列是对 进行调用的队列`saveToURL:forSaveOperation:completionHandler:`。因此，例如，如果您从主队列中调用它，那么您的完成处理程序也将出现在主队列中。

所以'calling'是一个形容词，而不是'calling queue'是一个复合名词。

# jquery - 需要完整日历 jquery 的帮助

> ID：13485359
> 
> 赞同：1
> 
> 时间：2012-11-21T02:13:26.153
> 
> 标签：jquery, jquery-ui, yii, fullcalendar

我正在尝试将此完整日历添加到我的 yii 应用程序中。因为这是我第一次，我已经尝试从[http://arshaw.com/fullcalendar/docs](http://arshaw.com/fullcalendar/docs)学习教程。但这对我来说很难理解，因为我在 JQuery、JSON 和其他方面很弱。所以任何人都可以一步一步地帮助我，我需要做什么才能从我的数据库中添加事件？

这是我的 json-events.php：

```
<?php

$query = Yii::app()->db->createCommand('SELECT TASKID, STARTTIME, ENDTIME
            FROM task');

$result = $query->queryAll();
foreach ($result as $row) {
    $data[] = array(
        'id' => $row['TASKID'],
        'start' => $row['STARTTIME'],
        'end' => $row['ENDTIME'],
        'allDay' => false,
        'editable' => true,
    );
}

echo json_encode($data); 
```

这是否正确？我应该把这个php放在哪里？

这是我的calendar.js：

> jQuery('#calendar').fullCalendar({ eventSources: [
> 
> ```
>  // your event source
>     {
>         url: '/path/todirectory/protected/views/task/json-events.php',
>         backgroundColor: '#3D8BFF',
>         textColor: '#7AE4FF'
>     }
> 
>     ],
>     header: {
>         left: 'prev,next today',
>         center: 'title',
>         right: 'month,agendaWeek,agendaDay'
>     },
>     editable: true,
>     droppable: true, 
>     drop: function(date, allDay) { 
> 
>         var originalEventObject = jQuery(this).data('eventObject');
>         var copiedEventObject = jQuery.extend({}, originalEventObject);
> 
>         copiedEventObject.start = date;
>         copiedEventObject.allDay = allDay;
> 
>         jQuery('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
> 
>         jQuery(this).remove();
> 
>     }
> 
> }); 
> ```

要问的另一件事是，当我尝试使用数组添加事件时，它可以工作。但它不可拖动。如何使它可拖动？

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:35:08.787

提出请求的第一个坏理由`protected`，您需要为输出 json 创建操作

在 TaskController.php

```
public function actionGetTasks()
{
  $query = Yii::app()->db->createCommand('SELECT TASKID, STARTTIME, ENDTIME
            FROM task');
  $result = $query->queryAll();
  foreach ($result as $row) {
      $data[] = array(
          'id' => $row['TASKID'],
          'start' => $row['STARTTIME'],
          'end' => $row['ENDTIME'],
          'allDay' => false,
          'editable' => true,
      );
  }
  echo json_encode($data);
} 
```

在全日历中更改路径

```
jQuery('#calendar').fullCalendar({ eventSources: [
    // your event source
    {
        url: '/path/todirectory/index.php?r=task/getTasks', 
```

对于可拖动的您的要求，请阅读：[http ://arshaw.com/fullcalendar/docs/event_ui/Requirements/](http://arshaw.com/fullcalendar/docs/event_ui/Requirements/)

你加`Yii::app()->ClientScript->registerCode('jquery.ui');`吗？

* * *

更新：

你需要通过 Yii::app()->clientScript->registerScriptFile 包含任何 js，

并且您在其中包含 js，您还需要在之前添加：（它可能在 /views/layout/main.php 中）

```
Yii::app()->ClientScript->registerCode('jquery.ui');
Yii::app()->ClientScript->registerScriptFile(Yii::app()->baseUrl . '/js/plugins/fullcalendar.min.js');
Yii::app()->ClientScript->registerScriptFile(Yii::app()->baseUrl . '/js/custom/calendar.js'); 
```

# asp.net - 像 Fiddler 一样获取 HttpRequest

> ID：13485361
> 
> 赞同：0
> 
> 时间：2012-11-21T02:13:41.237
> 
> 标签：asp.net, fiddler

将整个 HttpWebRequest 转换为单个字符串的最简单方法是什么。类似于将 Fiddler 的请求窗格切换到 Raw 选项卡时 Fiddler 显示的内容？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:16:28.077

使用`System.Net.WebClient`.

此代码结合了类似于 Fiddler 的 URL 的 HTTP 标头和正文：

```
string url = "http://stackoverflow.com";
var webClient = new System.Net.WebClient();           
var body = webClient.DownloadString(url);
var headers = webClient.ResponseHeaders.ToString();
var raw = headers + "\r\n" + body; 
```

# xml - 如何获取基于字符的子字符串

> ID：13485363
> 
> 赞同：1
> 
> 时间：2012-11-21T02:13:50.293
> 
> 标签：xml, xslt, xpath

就像如果

```
 <email>bob@smith.com</email> 
```

我怎样才能让 xsl 只给我 smith.com？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:30:34.623

使用函数**[substring-after()](http://www.w3.org/TR/xpath/#function-substring-after)**

> substring-after 函数返回第一个参数字符串中第二个参数字符串第一次出现之后的第一个参数字符串的子字符串，如果第一个参数字符串不包含第二个参数字符串，则返回空字符串。例如，substring-after("1999/04/01","/") 返回 04/01，substring-after("1999/04/01","19") 返回 99/04/01。

```
<xsl:template match="email">
    <xsl:value-of select="substring-after(., '@')"/>
</xsl:template> 
```

# python - 无法安装 Kivy：Cython/GCC 错误

> ID：13485364
> 
> 赞同：19
> 
> 时间：2012-11-21T02:13:52.790
> 
> 标签：python, c, gcc, cython, kivy

所以我尝试按照官方网站的说明安装 Kivy：

```
$ sudo apt-get install python-setuptools python-pygame python-opengl \
  python-gst0.10 python-enchant gstreamer0.10-plugins-good python-dev \
  build-essential libgl1-mesa-dev libgles2-mesa-dev python-pip

$ sudo pip install --upgrade cython

$ sudo easy_install kivy 
```

这就是我得到的：

```
Searching for kivy
Reading http://pypi.python.org/simple/kivy/
Best match: Kivy 1.4.1
Downloading http://pypi.python.org/packages/source/K/Kivy/Kivy-1.4.1.tar.gz#md5=94bba894269e4bdecc7881f256367e01
Processing Kivy-1.4.1.tar.gz
Running Kivy-1.4.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-MMi2Fv/Kivy-1.4.1/egg-dist-tmp-EcKbfC
[INFO   ] Kivy v1.4.1
Found GLES 2.0 headers at /usr/include/GLES2/gl2.h
Build configuration is:
 * use_opengl_es2  =  True
 * use_glew  =  False
 * use_opengl_debug  =  False
 * use_mesagl  =  False
Generate config.h
Generate config.pxi
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c: In function ‘__pyx_f_4kivy_8graphics_14transformation_6Matrix_identity’:
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:2774:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c: In function ‘__pyx_f_4kivy_8graphics_14transformation_6Matrix_inverse’:
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:2978:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:2980:13: error: incompatible types when assigning to type    ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c: In function ‘__pyx_f_4kivy_8graphics_14transformation_6Matrix_multiply’:
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:3364:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:3366:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:3368:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c: In function ‘__pyx_pf_4kivy_8graphics_14transformation_6Matrix_20__str__’:
/tmp/easy_install-MMi2Fv/Kivy-1.4.1/kivy/graphics/transformation.c:3674:13: error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’
 error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

在网上找不到答案后，我开始调查产生错误的文件：transformation.c、transformation.pyx 和 transformation.pyd。我还阅读了一些关于 Cython 的信息。

首先，所有错误都是同一种错误：

```
error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’ 
```

第一个错误在这里提出：

```
__pyx_t_3 = __pyx_v_self->mat; 
```

**__pyx_t_3**的类型是：

```
__pyx_t_4kivy_8graphics_14transformation_matrix_t 
```

它有这个奇怪的名字，因为它是从 **transformation.pxd**文件自动生成的：

```
ctypedef double matrix_t[16] 
```

所以，类型（**__pyx_t_3**）==类型（matrix_t）==双*。

**__pyx_v_self**的类型是：

```
struct __pyx_obj_4kivy_8graphics_14transformation_Matrix * 
```

同样，它是从**transformation.pxd**生成的：

```
ctypedef double matrix_t[16]

cdef class Matrix:
    cdef matrix_t mat
    ... 
```

因此， type( **__pyx_v_self->mat** ) == type(Matrix.mat) == type(matrix_t) == double *

正如我们所看到的，任务的双方：

```
__pyx_t_3 = __pyx_v_self->mat; 
```

属于 (double *) 类型。

为什么会出现这个错误：

```
error: incompatible types when assigning to type ‘__pyx_t_4kivy_8graphics_14transformation_matrix_t’ from type ‘double *’ 
```

那时被抚养？

看起来编译器没有将**matrix_t**的类型识别为双 *。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T06:35:01.990

刚刚遇到同样的错误。使用 Cython 0.17.1 可以帮助我：

```
sudo pip install Cython==0.17.1 
```

如果您不只是想解决问题，您可以深入检查这两个版本之间的更改。 [https://github.com/cython/cython/blob/master/CHANGES.rst#0172-2012-11-20](https://github.com/cython/cython/blob/master/CHANGES.rst#0172-2012-11-20) - 在这里你可以找到相关的问题，但不幸的是我不是 C/Cython 的大师和快速浏览区分 master 和 0.17.1 并没有告诉我问题出在哪里，但如果你希望你可以自己调查问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T02:07:09.563

我也有同样的错误。我将其追溯到一个小例子，并向 Cython 邮件列表发送了一封电子邮件：[https ://groups.google.com/forum/?fromgroups=#!topic/cython-users/fSZgHqrlCOc](https://groups.google.com/forum/?fromgroups=#!topic/cython-users/fSZgHqrlCOc)

# android - 使用蓝牙时，Android 音乐在睡眠模式下跳过

> ID：13485371
> 
> 赞同：2
> 
> 时间：2012-11-21T02:14:30.580
> 
> 标签：android, audio, bluetooth, skip, standby

几天前我编写了一个简单的 mp3 播放器。该代码位于[在 Android 2.3.3 中以睡眠/待机模式播放音乐](https://stackoverflow.com/questions/13361280/playing-music-in-sleep-standby-mode-in-android-2-3-3)

当 mp3 播放器（三星 3.6、Android 2.2）自行播放音乐时，一切正常。我买了一个蓝牙音箱（A2DP 3.0）并将它连接到 mp3 播放器。音乐仍然可以正常播放，但是当 mp3 播放器屏幕变暗进入睡眠模式时，蓝牙扬声器上的音乐开始跳动。

*   如果 mp3 在睡眠模式下自行播放音乐，则不会发生这种情况
*   mp3 播放器中的其他音乐播放器应用程序似乎即使在睡眠模式下通过蓝牙扬声器也能正常播放
*   如果我禁用蓝牙，并使用通过电缆连接的扬声器播放音乐，那么即使在待机模式下，音乐也能正常播放。

这让我相信我的代码可能有问题。

这是我的完整代码：

```
public class MainActivity extends Activity {

private static String audioPath;
private static ArrayList<String> devotionalList;
private static ArrayList<String> christmasList;
private static ArrayList<String> cinemaList;
private static ImageButton playPauseButton;
private static TextView appMsg;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    int maxVolume = audioManager
            .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    SeekBar volControl = (SeekBar) findViewById(R.id.volumeBar);
    volControl.setMax(maxVolume);
    volControl.setProgress(curVolume);
    volControl
            .setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int arg1,
                        boolean arg2) {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                            arg1, 0);
                }
            });

    File baseDir = Environment.getExternalStorageDirectory();
    audioPath = baseDir.getAbsolutePath() + "/external_sd/music/";

    devotionalList = loadSongs(audioPath + "devotional/");
    christmasList = loadSongs(audioPath + "christmas/");
    cinemaList = loadSongs(audioPath + "cinema/");
}

private ArrayList<String> loadSongs(String songDirectory) {
    File directory = new File(songDirectory);
    ArrayList<String> al1 = new ArrayList<String>();
    for (String filename : directory.list()) {
        al1.add(songDirectory + filename);
    }
    return al1;
}

public void playPauseSong(View v) {
    if (MP3PlayerService.isPlaying) {
        playPauseButton.setImageResource(android.R.drawable.ic_media_play);
        // Intent i1 = new Intent(this, MP3PlayerService.class);
        stopService(new Intent(this, MP3PlayerService.class));
    } else {
        if (MP3PlayerService.playerStarted) {
            playPauseButton
                    .setImageResource(android.R.drawable.ic_media_pause);
            startService(new Intent(this, MP3PlayerService.class));
        }
    }
}

public void playNextSong(View v) {
    if (MP3PlayerService.playerStarted) {
        startService(new Intent(this, MP3PlayerService.class));
    }
}

public void playPreviousSong(View v) {
    if (MP3PlayerService.playerStarted) {
        MP3PlayerService.previousSong = true;
        startService(new Intent(this, MP3PlayerService.class));
    }
}

@Override
protected void onPause() {
    super.onPause();
    playPauseButton = null;
    appMsg = null;
}

@Override
protected void onResume() {
    super.onResume();
    appMsg = (TextView) this.findViewById(R.id.txtAppMsg);
    appMsg.setText("");
    playPauseButton = (ImageButton) this.findViewById(R.id.btnPlayPause);
}

public void playDevotional(View v) {
    playPlayList(devotionalList);
}

public void playChristmas(View v) {
    playPlayList(christmasList);
}

public void playCinema(View v) {
    playPlayList(cinemaList);
}

private void playPlayList(ArrayList<String> playList) {
    if (MP3PlayerService.isPlaying) {
        MP3PlayerService.mediaPlayer.stop();
        MP3PlayerService.mediaPlayer.reset();
        MP3PlayerService.mediaPlayer.release();
    }
    MP3PlayerService.songPosition = 0;
    playPauseButton.setImageResource(android.R.drawable.ic_media_pause);
    Intent i1 = new Intent(this, MP3PlayerService.class);
    i1.putExtra("playListChoice", playList);
    startService(i1);
}

} 
```

这是我的媒体播放器服务代码：

```
public class MP3PlayerService extends Service implements OnCompletionListener {
private static ArrayList<String> al1;
private static FileInputStream fis;
private static FileDescriptor fd;
static boolean previousSong;
static boolean playerStarted = false;
static int songPosition;
static boolean isPlaying = false;
static String currentSong;
static ArrayList<String> songHistory;
static MediaPlayer mediaPlayer;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {
    songHistory = new ArrayList<String>();
}

@Override
public void onDestroy() {
    songPosition = mediaPlayer.getCurrentPosition();
    mediaPlayer.pause();
    isPlaying = false;
}

@Override
public void onStart(Intent intent, int startid) {

    if (songPosition == 0) {
        Bundle extras = intent.getExtras();
        if (extras == null) {
            if (previousSong) {
                playSong();
            } else {
                // Next Song Button clicked
                playNextSong();
            }
        } else {
            // A Playlist button is clicked
            al1 = (ArrayList<String>) extras.get("playListChoice");
            playSong();
        }
    } else {
        songPosition = 0;
        mediaPlayer.start();
    }
    isPlaying = true;
}

private void playNextSong() {
    if (isPlaying) {
        mediaPlayer.release();
        playSong();
    }
}

private void playSong() {
    if (previousSong) {
        mediaPlayer.release();
        if (songHistory.size() > 1) {
            currentSong = songHistory.get(songHistory.size() - 2);
            songHistory.remove(songHistory.size() - 1);
        } else {
            currentSong = songHistory.get(0);
        }
        previousSong = false;
    } else {
        currentSong = al1.get(new Random().nextInt(al1.size()));
        songHistory.add(currentSong);
    }
    try {
        fis = new FileInputStream(currentSong);
        fd = fis.getFD();
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setDataSource(fd);
        mediaPlayer.prepare();
        mediaPlayer.seekTo(songPosition);
        mediaPlayer.setOnCompletionListener(this);
        mediaPlayer.start();
        playerStarted = true;
    } catch (FileNotFoundException e) {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
        e.printStackTrace();
    } catch (IOException e) {
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
}

@Override
public void onCompletion(MediaPlayer arg0) {
    playNextSong();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:06:12.527

我想我修好了。滑块音量代码是问题的根源。没有那块，该应用程序在待机模式下仍然可以使用蓝牙扬声器工作。我想要滑动条，所以我在为每首歌曲实例化媒体播放器后尝试获取部分唤醒锁定，并保持应用程序在待机模式下正常运行（滑块音量控制也是应用程序的一部分）。我在每首歌曲之后释放锁定。

# haskell - Haskell的铁路图？

> ID：13485374
> 
> 赞同：7
> 
> 时间：2012-11-21T02:14:59.040
> 
> 标签：haskell, grammar

任何人都知道一本书或一个网站，其中包含一组简单的 Haskell 语法铁路图？

像这样的东西，但用英语：

[http://www.cs.uu.nl/wiki/pub/FP/CourseLiterature/haskellsyntax-main.pdf](http://www.cs.uu.nl/wiki/pub/FP/CourseLiterature/haskellsyntax-main.pdf)

“简单”是这里的关键词。正式的 BNF 过于神秘，无法用作备忘单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:37:03.307

Haskell 2010 报告中有一些 BNF（尤其是在“语法”一章中）：

[http://www.haskell.org/onlinereport/haskell2010/](http://www.haskell.org/onlinereport/haskell2010/)

请注意，大多数程序使用语言扩展，这些扩展将语法添加到基本 Haskell 语言中——例如，FunctionalDependencies 扩展。此外，GHC 还添加了新语法（最近是 lambda-case / lambda-if）。GHC 7.6（当前最新）支持的语法扩展列表可在以下位置获得：

[http://www.haskell.org/ghc/docs/7.6-latest/html/users_guide/syntax-extns.html](http://www.haskell.org/ghc/docs/7.6-latest/html/users_guide/syntax-extns.html)

# android - 在 Android 中使用 Jsoup 将 GET 提交到表单

> ID：13485375
> 
> 赞同：1
> 
> 时间：2012-11-21T02:14:59.323
> 
> 标签：android, http, jsoup

我正在尝试“模拟”按钮按下并使用用户名和密码提交表单，以使用以下源登录网站。我已经尝试过这个：

```
Document con = Jsoup.connect("http://www.twinrinks.com/adulthockey/subs/subs_entry.html")
            .data("subs_data1",autoLogInUsername)
            .data("subs_data2",autoLogInPassword)
            .post(); 
```

（autoLogInUsername 和 autoLogInPassword 是 String 对象）

但这似乎并不想正常工作。我在这里阅读了有关堆栈溢出的信息，并且尝试了许多建议，但似乎无法使其正常工作。我在想我的问题是表单是 GET 而不是 POST，或者我没有对提交按钮做任何事情（但我不知道如何引用它，因为它没有名称）。谢谢你的帮助！

```
<html>
<head>
<title>Login Page</title>
<FONT FACE="ARIAL" SIZE="5" color="#FF00FF">Twin Rinks Ice Pavilion, Inc. Attendance & Subs Program<BR></font>
</head>
<body onLoad="document.forms.myform.subs_data1.focus()">
<form name="myform" method="GET" action="subs_entry.php">
Username:<input type=text name=subs_data1 size="70" value="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
(your email address)<br>
Password:<input type=password name=subs_data2 size="25" value=""><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type=submit value="Login!">
<br><br>Leisure next session  
    schedule is done.<br>Bronze next session schedule is done.<br>Silver 
    next session schedule is done<br>Gold 
    next session schedule is done.<br>Platinum next session  
    schedule is done.</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:24:45.650

您可以将 GET 信息直接放在您正在访问的网站的 URL 中。POST 会更难，但你没有处理这个问题。

例如，如果你想发送变量，`x=3`你可以简单地调用`y=4``foo.com/index.html`

```
http://www.foo.com/index.html?x=3&y=4 
```

# c# - 如何使用 System.Drawing 绘图？

> ID：13485376
> 
> 赞同：1
> 
> 时间：2012-11-21T02:15:01.640
> 
> 标签：c#, .net, winforms, drawing

我在 Java 中使用 Swing 做过一些类似的工作，但从来没有必要尝试在 C# 中做同样的事情。在网上简单看了一下，我似乎找不到任何关于如何使用简单绘图工具的简洁教程。谁能指出我一个好的方向？

此外，我希望在大小不固定的自定义用户控件上绘制直线和矩形框。这意味着当在 Visual Studio UI 中调整控件的大小时，它需要相应地重新绘制线条以考虑新的控件尺寸。我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:20:37.470

查看[GDI+](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533798%28v=vs.85%29.aspx)以了解 Windows 上的基本图形控制。

这是[关于 GDI+ 的 C# 教程](http://www.c-sharpcorner.com/UploadFile/mahesh/gdi_plus12092005070041AM/gdi_plus.aspx)

或者

查看[Libgdiplus](http://www.mono-project.com/Libgdiplus)以获得 GDI+ 的跨平台版本

这应该让你开始......显然你不想在每次调用paint时都在你的对象上调用new......但你明白了。

```
public partial class Form1 : Form
{
    Graphics g = null;
    public Form1()
    {
        InitializeComponent();
        g = Graphics.FromHwnd(Handle);

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        Brush b = new SolidBrush(Color.Black);

        Pen pen = new Pen(b, 20.5f);
        Point p1 = new Point(0, 0);
        Point p2 = new Point(this.Width, this.Height);

        g.DrawLine(pen, p1, p2);
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T02:26:22.240

下面的代码将绘制一个矩形并将其显示在图片框中。您可以连接一个事件来检测调整大小，然后重绘矩形。

```
Graphics GR;
Bitmap BM;
Rectangle myrect = new Rectangle(10,10,10,10);
Pen penTest = new System.Drawing.Pen(Brushes.Red);

using (GR = Graphics.FromImage(BM))
{
    GR.DrawRectangle(penTest, myrect);
}

picturebox1.Image = BM; 
```

# applescript - 无效的密钥形式applescript

> ID：13485388
> 
> 赞同：3
> 
> 时间：2012-11-21T02:17:12.343
> 
> 标签：applescript

我正在处理的程序中有以下代码

```
set outPath to "/Users/student/Desktop/Accounts.txt"
set x to text returned of (display dialog "Username" default answer "")
set y to text returned of (display dialog "Password" default answer "")
set RAccounts to (read POSIX file "/Users/student/Desktop/Accounts.txt")
if file path outPath exists
then 
get word 1 
else 
```

然后它继续，但是每当我尝试编译它时，它都会给我以下错误

> 无效的密钥形式

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:34:18.687

尝试：

```
set outPath to "/Users/student/Desktop/Accounts.txt"
set x to text returned of (display dialog "Username" default answer "")
set y to text returned of (display dialog "Password" default answer "")
try
    set RAccounts to read POSIX file outPath
on error
    -- file outPath does not exist … do things
end try 
```

或者

```
tell application "Finder"
    if exists POSIX file "/Users/student/Desktop/Accounts.txt" then
        beep
    else
        beep 2
    end if
end tell 
```

# scope - SSAS 中的条件聚合

> ID：13485396
> 
> 赞同：0
> 
> 时间：2012-11-21T02:17:59.080
> 
> 标签：scope, ssas, mdx

我的多维数据集中有一个 SCOPE 语句，可以防止在不兼容的维度成员中聚合某些度量值：

```
SCOPE (MeasureGroupMeasures('Measure Group'), [User Type].[User Type].[All]);                                                                                        
this = IIF(DISTINCTCOUNT(NONEMPTY(EXISTING([User Type].[User Type].[All].Children)
                ,[Measures].[Measure Group Count])) > 1
       , NULL
       , [Measures].CurrentMember); 
```

基本上，如果我们试图从度量组中聚合多个“用户类型”的数据，则会返回一个空值。虽然这种方法效果很好，但性能还有很多不足之处。有什么方法可以更快地实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:23:11.157

使用与用户类型维度相同的数据源添加度量组。唯一的度量应该是一个计数，例如用户类型计数，不可见。唯一的维度关系应该是用户类型维度。

现在你可以说：

IIF ( [Measures].[User Type Count] > 1 , ...

# algorithm - 下达从图中删除顶点的命令，这样它就不会断开图的连接

> ID：13485400
> 
> 赞同：3
> 
> 时间：2012-11-21T02:18:13.417
> 
> 标签：algorithm, graph

这是 Steven Skiena 的算法设计中的一个问题（用于面试准备）：

图 G 的一个关节顶点是一个其删除断开 G 的顶点。设 G 是一个具有 n 个顶点和 m 个边的图。给出一个简单的 O(n + m) 找到 n 个顶点的删除顺序，这样没有删除会断开图的连接。

这就是我的想法：

1.  在图上运行 DFS 并不断更新每个节点最旧的可达祖先（根据它我们决定它是桥切节点、父可爱节点还是根切节点）

2.  如果我们找到叶节点（顶点）或不是关节顶点的节点，则将其删除。

3.  在 DFS 结束时，我们将在图中留下所有那些被发现是关节顶点的节点

由于关节顶点完好无损，该图将保持连接状态。我已经在几个图表上进行了尝试，它似乎有效，但对于这本书来说感觉太简单了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T05:50:22.077

假设图是连通的，那么任何随机节点都会到达一个子图，其生成树可以在不破坏图的连通性的情况下按后序删除。以这种方式重复，直到图形全部消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-06T18:25:37.587

1.  利用DFS跟踪每个顶点的退出时间；
2.  按照记录的退出时间顺序删除顶点；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T08:27:03.810

分两步：

1.  使用任何遍历算法制作图 DAG
2.  做拓扑排序

每一步都在不超过 O(m+n) 的情况下完成

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-18T13:05:09.230

如果我们总是一棵一棵地删除一棵树的叶子，树的其余部分仍然保持连接。这样做的一种特殊方法是在使用 DFS 或 BFS 遍历图时为每个顶点分配一个预订编号。按降序对顶点进行排序（基于预购编号）。从图中按该顺序删除顶点。请注意，叶子总是首先被删除。

# wordpress - wordpress 插件创建 get_post_meta

> ID：13485401
> 
> 赞同：2
> 
> 时间：2012-11-21T02:18:14.097
> 
> 标签：wordpress

我正在构建我的第一个插件，并使用以下链接作为参考。 [http://www.sitepoint.com/create-a-voting-plugin-for-wordpress/](http://www.sitepoint.com/create-a-voting-plugin-for-wordpress/)

我试图理解代码的以下部分：

```
function voteme_addvote()
{
    $results = '';
    global $wpdb;
    $post_ID = $_POST['postid'];
    $votemecount = get_post_meta($post_ID, '_votemecount', true) != '' ? get_post_meta($post_ID, '_votemecount', true) : '0';
    $votemecountNew = $votemecount + 1;
    update_post_meta($post_ID, '_votemecount', $votemecountNew);
    $results.='<div class="votescore" >'.$votemecountNew.'</div>';
    // Return the String
    die($results);
} 
```

我运行代码并且它可以工作，但我只是不明白以下内容：

*   “get_post_meta”在做什么？
*   它是否创建了一个自定义元字段，与 add_post_meta 相同？如果没有，为什么没有 add_post_meta？
*   我检查了数据库，看起来它正在创建一个自定义元字段......所以按照这个顺序，get_post_meta 和 add_post_meta 有什么区别？

非常感谢您帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:37:40.920

第一次运行代码时，get_post_meta 返回 ''，因此 $votemecount 设置为 0。以下 update_post_meta 创建新的元字段，如下所述。不显示以 _ 开头的值（是隐藏的元字段）。

函数 update_post_meta() 更新指定帖子的现有元键（自定义字段）的值。

这可以用来代替 add_post_meta() 函数。这个函数要做的第一件事是确保 $meta_key 已经存在于 $post_id 上。如果没有，则改为调用 add_post_meta($post_id, $meta_key, $meta_value) 并返回其结果。

# android - javax.net.ssl.SSLPeerUnverifiedException：当我在 android 中使用 google place api 时没有对等证书

> ID：13485405
> 
> 赞同：8
> 
> 时间：2012-11-21T02:18:58.283
> 
> 标签：android, ssl, google-places-api, apache-httpclient-4.x

我面临一个 javax.net.ssl.SSLPeerUnverifiedException: No peer certificate exception while using google place api in android emulator.Below is my url:

```
https://maps.googleapis.com/maps/api/place/search/json?&location=28.632808,77.218276&radius=1000&sensor=false&key=AIzaSyC3y3fOMTqTkCjNNETQTCKustG7BRk_eVc 
```

当我简单地在浏览器地址栏中粘贴上面的url时，它简单地给出了Json字符串。所以，我认为不需要任何证书认证。

在做了这么多谷歌搜索并投入了 2-3 天之后，我使用了 org.apache.http.conn.ssl.SSLSocketFactory 包的 SSLSocketFacory 类来避免对等证书错误。

下面是我的代码：

```
public static HttpClient wrapClient(HttpClient base) {
        try {
            SSLContext ctx = SSLContext.getInstance("TLS");
            X509TrustManager tm = new X509TrustManager() {

                public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {
                }

                public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
                }

                public X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
            };
            X509HostnameVerifier verifier = new X509HostnameVerifier() {

                public void verify(String string, SSLSocket ssls) throws IOException {
                }

                public void verify(String string, X509Certificate xc) throws SSLException {
                }

                public void verify(String string, String[] strings, String[] strings1) throws SSLException {
                }

                public boolean verify(String string, SSLSession ssls) {
                    return true;
                }
            };
            ctx.init(null, new TrustManager[]{tm}, null);
            SSLSocketFactory ssf = new SSLSocketFactory(ctx);
            ssf.setHostnameVerifier(verifier);
            ClientConnectionManager ccm = base.getConnectionManager();
            SchemeRegistry sr = ccm.getSchemeRegistry();
            sr.register(new Scheme("https", ssf, 443));
            return new DefaultHttpClient(ccm, base.getParams());
        } catch (Exception ex) {
            ex.printStackTrace();
            return null;
        }
    } 
```

我正在使用 android api 16 ，当我使用 SSLSocketFactory(SSLSocketContext) 构造函数时，eclipse给出了编译错误，所以我搜索了很多并下载了具有 SSLSocketFactory(SSLSocketContext) 的 jar，即“httpclient-4.1.1.jar”文件。而且我还在项目构建路径中设置了该 jar 的顺序，设置了最高优先级。现在我收到以下警告：

```
VFY:unable to resolve direct method 4253:Lorg/apache/http/conn/ssl/SSLSocketFactory.<init> 
```

并遵循由

```
java.lang.NoSuchMethodError : org.apace.http.conn.ssl.SSLSocketFactory.<init> 
```

请帮助我，我不知道，我错在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:06:59.663

我也有这个问题，在网上搜索了很多东西，但我**通过一个简单的步骤解决了**

我不知道确切的原因，但我通过**Restarting Emulator 或创建一个 NEW Emulator**解决了它，并在那个新的 Emulator 中运行项目

我不会说这是确切的答案，但在使用复杂代码**修改编码之前尝试一下**

# macos - rj包编译失败

> ID：13485407
> 
> 赞同：1
> 
> 时间：2012-11-21T02:19:17.253
> 
> 标签：macos, r, compilation, java-native-interface, statet

非常感谢您看一看。这里有一篇以前的帖子，带有相同的错误消息“无法编译简单的 JNI 程序”，解决方案是更新到 R 1.15。但我已经拥有最新版本中的所有内容。虽然它说“查看 config.log 了解详细信息”，但它没有给出位置，并且终端上的“find / -name config.log”什么也不返回。

试图让它发挥作用是一个令人筋疲力尽和令人沮丧的过程。任何帮助都感激不尽。

R 版本 2.15.1，64 位（我使用 Homebrew 安装，但这应该不是问题）

Eclipse 4.2 Cocoa，64 位（也试过 3.7，也没有用）

OSX 10.7.5

这是错误消息：

```
install.packages(c("rj"), repos="http://download.walware.de/rj-1.1")
将软件包安装到“/Library/Frameworks/R.framework/Versions/2.15/Resources/library”
（因为“lib”未指定）
尝试 URL 'http://download.walware.de/rj-1.1/src/contrib/rj_1.1.0-4.tar.gz'
内容类型 'application/x-tar' 长度 314501 字节 (307 Kb)
打开网址
====================================================
已下载 307 KB

* 安装 *source* 包 'rj' ...
检查 R 配置...找到
    R_HOME：/usr/local/Cellar/r/2.15.1/R.framework/Resources
检查 gcc ... cc
检查 C 编译器默认输出文件名... a.out
检查 C 编译器是否工作......是的
检查我们是否在交叉编译...否
检查可执行文件的后缀...
检查目标文件的后缀... o
检查我们是否正在使用 GNU C 编译器...是的
检查 cc 是否接受 -g... 是
检查 cc 选项以接受 ISO C89... 不需要
检查 R 中的 Java 支持...好的
    JAVA_HOME：/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
    JAVA：/usr/bin/java
    JAVAC：/usr/bin/javac
    JAVAH：/usr/bin/javah
    JAVA_CPPFLAGS：-I/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/include
    JAVA_LIBS：-框架JavaVM
    罐子：/usr/bin/jar

配置：创建 ./config.status
config.status：创建 src/Makevars
=== 在 jri 中配置 (/private/var/folders/7p/q7qb1n2d277c9tqt65s5wy_c0000gn/T/RtmpVlP2YK/R.INSTALL2c9175fac4e/rj/jri)
配置：运行 /bin/sh ./configure --disable-option-checking '--prefix=/usr/local' --cache-file=/dev/null --srcdir=.
检查构建系统类型... i386-apple-darwin11.4.2
检查主机系统类型... i386-apple-darwin11.4.2
检查 gcc ... cc
检查 C 编译器默认输出文件名... a.out
检查 C 编译器是否工作......是的
检查我们是否在交叉编译...否
检查可执行文件的后缀...
检查目标文件的后缀... o
检查我们是否正在使用 GNU C 编译器...是的
检查 cc 是否接受 -g... 是
检查 cc 选项以接受 ISO C89... 不需要
检查如何运行 C 预处理器... cc -E
检查处理长行的 grep 和 -e... /usr/bin/grep
检查 egrep... /usr/bin/grep -E
检查 ANSI C 头文件... rm: conftest.dSYM: 是一个目录
rm: conftest.dSYM: 是一个目录
是的
检查Java解释器是否工作...检查JNI程序是否可以编译...配置：错误：无法编译简单的JNI程序。有关详细信息，请参阅 config.log。
配置：错误：./配置 jri 失败
错误：包 'rj' 的配置失败
* 删除 '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rj'
*恢复以前的'/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rj'

下载的源码包在
    '/private/var/folders/7p/q7qb1n2d277c9tqt65s5wy_c0000gn/T/RtmpNM4Pyx/downloaded_pa​​ckages'
警告信息：
在 install.packages(c("rj"), repos = "http://download.walware.de/rj-1.1") ：
  软件包“rj”的安装具有非零退出状态

```

这是会话信息。

```
会话信息（）
R 版本 2.15.1 (2012-06-22)
平台：x86_64-apple-darwin11.4.0（64位）

语言环境：
[1] 丙

附加的基础包：
[1] stats graphics grDevices utils datasets methods base     

通过命名空间加载（未附加）：
[1] tcltk_2.15.1 工具_2.15.1

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-10T02:23:15.883

我遇到了同样的问题，下面的解决方案对我有用。请按照步骤

1.）您需要在终端上运行此命令 - R CMD javareconf 2.）然后检查 StatET 与 rJ 包的兼容性，其顺序如下。

对于 RJ 2.0 (StatET 3.4 - 3.5)： install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-2.0")

对于 RJ 1.1 (StatET 3.0 - 3.3)： install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1")

对于 RJ 1.0 (StatET 2.0)： install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.0")

对于 RJ 0.5 (StatET 0.10)： install.packages("rj", repos="http://download.walware.de/rj-0.5")

3.) 一旦您根据 StatET 知道您的兼容版本，然后运行包安装命令。例如。我使用的是 StatET 3.5，因此对我来说 RJ 2.0 可以工作，而其他人则不行。

所以命令是 {install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-2.0")}

4.) 安装完成后，请检查环境变量是否设置正确，以防您使用任何 IDE（如 Eclipse）。库路径应在 Eclipse 或任何其他 IDE 中设置。

如有任何问题，请点击此链接 - [http://www.walware.de/?page=/it/statet/installation.html](http://www.walware.de/?page=/it/statet/installation.html)

# php - 启用域转发时在页面上显示 URL

> ID：13485409
> 
> 赞同：-1
> 
> 时间：2012-11-21T02:19:36.190
> 
> 标签：php, javascript, asp.net, html, css

**概述：** 我一直在努力设置一个托管在可访问性有限的服务器上的页面，但可以通过带有掩码的域转发访问。我需要一种方法来显示该人输入的 URL，而不是服务器路径。

详细信息：我有一个朋友使用不允许访问托管根的托管服务。我可以放置任何东西的唯一地方是 httpdocs 文件夹内。目前拥有他的网站。此外，我无权访问主机的 DNS 设置。

因为它是我可以放置新文件的唯一地方，所以我创建了一个新文件夹，其中包含一个单页 php 网站，实际上将有 20 个不同的域指向它。我打算使用php代码：

```
<?php $domain = $_SERVER['HTTP_HOST']; ?>
<?php echo $domain ?> 
```

显示用户输入的 url。

然后我前往 GoDaddy，他在那里购买了接下来 8 年的域（GoDaddy 不是他的主机），并使用域转发选项 W/Masking 将域定向到 www.HisMainWebsite.com/otherdomains/index.php

GoDaddy 屏蔽域的方式是应用框架集/Iframe，据我所知，将包含框架集的实际源文件保留在自己的服务器上。与实际将域转发到指定的实际目标相反。

我遇到的问题是上面的代码最终显示了主网站（www.HisMainWebsite.com），而不是用户输入的新域（www.HisAdditionalDomain.com）。这样做的原因是，上面的代码从存储文件的服务器而不是实际域中提取信息。

意识到这一点后，我尝试使用以下 javascript 代码：

document.getElementById('domain').innerHTML = window.location.href;

不幸的是，这给出了类似的结果，但包含了完整的文件路径 - www.HisMainWebsite.com/otherdomains/index.php

经过数小时的研究，我向您寻求帮助。尽管文件存储在当前网站中，但我需要一种方法来显示用户输入的 URL。你会推荐什么？

我的背景是设计师，而不是开发人员。所以对我放轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:15:06.027

您可以通过 $_SERVER["HTTP_REFERER"] 访问引用 URL。我不太确定您是如何进行转发设置的，如果没有示例，很难知道此解决方案是否有效。不过，希望确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T23:03:58.110

这很简单：在 godaddy 网站上将域重定向到这样的 URL：www.HisMainWebsite.com/otherdomains/index.php?domain=domainbeingredirected.com

并在您的 PHP 文件中像这样轻松访问它： echo $_GET[domain];

或像这样：

$domain = $_GET[域]; 回声$域；

玩得开心:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T21:41:44.407

解决：

我正在研究与我们的 Godaddy 转发域不兼容的 URL 推荐/PHP。

我们在 godaddy 有 100 个域，想知道哪个域将人们带到我们的登录页面，以便我们可以自定义响应。

推荐 URL 不起作用...我们尝试了所有方法。

然后我发现 - 我们只是在转发域......使用 GoDaddy 域转发功能。

一旦我们打开了带有掩码的域转发 - 那么推荐 URL 就可以正常工作了。

解决方案：使用 GoDaddy 的“带屏蔽的域转发”，并且引用 URL php 代码将起作用。

# objective-c - 如何忽略“X 没有可见的@interface 声明选择器”？

> ID：13485414
> 
> 赞同：9
> 
> 时间：2012-11-21T02:19:56.897
> 
> 标签：objective-c, ios, xcode, warnings, automatic-ref-counting

在 ARC 之前，我有一个“X 可能无法响应 xxx”**警告**，这是一个非常无害的警告，不会阻止它编译。现在，我正在尝试将我的项目转换为 ARC，并且出现“No visible @interface for X declarations the selector xxx”**错误**，这会阻止它编译。

我确切地知道我在做什么，以及为什么出现警告，我可以告诉你程序是正确的。以前，编译器编译它没有问题，现在不应该阻止它编译。

确实，类 X 的接口没有声明该选择器，但是 X 是一个使用（这是 Objective-C 的美丽之处之一）动态处理发送给它的任何选择器的*任何*`forwardInvocation:`消息的类，因此它的接口不可能声明所有可以在其上调用的选择器。并且选择器*在*某处声明，而不是在 X 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:42:35.227

> 我确切地知道我在做什么，以及为什么出现警告，我可以告诉你程序是正确的。

好的 - 只需使用`objc_msgSend`等。如果你想直接做编译器的工作。

> 确实，类 X 的接口没有声明该选择器，但是 X 是一个使用 forwardInvocation 动态处理发送给它的任何选择器的任何消息的类：（这是关于 Objective-C 的美妙之处之一），所以它的接口不可能声明所有可以在其上调用的选择器。并且选择器在某处声明，而不是在 X 上。

如果声明太乏味，但在消息传递中使用似乎与您的程序对选择器的使用相矛盾……听起来像是生成代码的危险领域，需要大量人工干预。

也许您应该考虑声明一个协议，以便编译器至少可以为您正确设置消息调用 - 如果您更改或破坏某些内容，它有机会适应或通知您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:54:53.763

我不确定，但我相信在 ARC 下，编译器可以看到方法签名更重要，因为它需要知道需要什么内存管理。所以你要么需要：

1.  通过其中一种常规方法声明您正在使用的方法（即理想情况下在真实接收器上，但如果没有其他作为类别，即使仅在 上`NSObject`）。
2.  通过或其他类似方式手动执行操作`NSInvocation`，对内存管理负全部责任（这可能很棘手，因为您必须在 ARC 之间进行桥接）。

**更新**：我刚刚检查了 clang 源，确实是这样 -使用 ARC 时*需要签名。*这不仅仅是试图变得刻薄。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T23:32:42.837

> 确实，类 X 的接口没有声明该选择器，但是 X 是一个使用 forwardInvocation 动态处理发送给它的任何选择器的任何消息的类：（这是关于 Objective-C 的美妙之处之一），所以它的接口不可能声明所有可以在其上调用的选择器。并且选择器在某处声明，而不是在 X 上。

如果要丢弃静态类型信息，请转换为 id。或者，如果您的对象是另一个类的代理，则可能会转换为该类。

只要该方法在标头中的某处声明（无论如何都必须如此），并且参数类型没有歧义，这应该可以解决错误。

如果您对为什么这只是启用 ARC 的问题感兴趣，请查看我提出的这个问题的答案：[为什么 'no known method for selector x' 在 ARC 下是一个硬错误？](https://stackoverflow.com/questions/9245317/why-is-no-known-method-for-selector-x-a-hard-error-under-arc)

# javascript - Javascript对象使用变量获取对象

> ID：13485415
> 
> 赞同：0
> 
> 时间：2012-11-21T02:19:56.947
> 
> 标签：javascript, object

我正在尝试使用变量从对象中收集信息。我是一名 php 程序员，我还不太擅长 javascript。

```
var priceobj= {'Youth Small':'0', 'Youth Meduim':'0', 'Youth Large':'0','Adult Small':'0','Adult Medium':'0','Adult Large':'0','Adult XL':'0','Adult XXL':'2','Adult XXXL':'3'};

var os0 = $('#os0').val(); // value will be one of the options in priceobj

var value = priceobj.os0 // this should read 0,2,3 depending on the value of os0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:21:09.037

尝试

```
var value = priceobj[os0]; 
```

os0 不是键，它是代表键的值。你叫它的方式，它必须是一把钥匙。

# objective-c - 如何在 iOS 后台监控位置？

> ID：13485419
> 
> 赞同：1
> 
> 时间：2012-11-21T02:20:47.623
> 
> 标签：objective-c, ios, gps, geofencing

我目前正在为客户编写一个家庭自动化应用程序，当他们到达距离他们家 150 米范围内时，它会打开他们的车库、打开客厅和办公室的灯以及其他类似的东西。当他们离开时，它会做相反的事情。我非常感谢iOS内置了地理围栏，当应用程序在前台时，该功能可以完美运行，但是当用户关闭应用程序并且手机仍在监控地理围栏时，应用程序在事件发生时什么也不做。除了 locationManager:didEnterRegion: 之外，我应该为我的应用程序的后台通知实现一个单独的方法吗？这是我现在正在使用的代码：

```
- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region {
    NSLog(@"Entered Region - %@", region.identifier);
    [self showRegionAlert:@"Entering Region" forRegion:region.identifier];
    [self sendCommand:true];
}

- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSLog(@"Exited Region - %@", region.identifier);
    [self showRegionAlert:@"Exiting Region" forRegion:region.identifier];
    [self sendCommand:false];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:34:53.757

我发现这不是问题。这一切的工作方式与应用程序处于活动状态时完全相同。调用相同的方法。我确保为后台启动优化应用程序，以便它更像是即时响应。我想我做错了什么，或者一开始它没有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:00:09.367

要在您的应用处于后台时使用定位服务，您需要更改应用的 info plist 文件。应该在**Supporting Files 文件**夹中找到，如下所示，**YourAppName-Info.plist**

在信息属性列表中添加一个项目并键入**Required Background Modes**作为键，它的类型是Array。将一个项目添加到该数组并输入**App registers 以将位置更新**为该项目的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-19T14:52:58.840

在 Target Settings/Capabilities 中打开 BackgroundModes 并启用位置更新。由于应用程序处于后台，您将几乎没有时间进行处理，应用程序将进入睡眠模式。使用 expireHandler 使应用程序活动一段时间以进行大型处理。

# java - Eclipse 不再打开，它给了我以下错误：

> ID：13485421
> 
> 赞同：1
> 
> 时间：2012-11-21T02:21:01.207
> 
> 标签：java, eclipse

下面的错误。有谁知道为什么会这样？

> 发生了错误。查看日志文件 /Users/Christian/Dropbox/Projects/Java Projects/.metadata/.log。

日志文件：

（太大了，无法在 SO 上发布，所以这里是要点：）

[https://gist.github.com/4122659](https://gist.github.com/4122659)

# java - 数组和方法

> ID：13485426
> 
> 赞同：-6
> 
> 时间：2012-11-21T02:21:32.923
> 
> 标签：java, arrays, methods

好吧，所以这个问题让我发疯了。

如何在方法中使用数组作为参数

假设我有 SetTemperature 作为一种方法，我将如何复制它来表示温度数组？

另外，我如何使用一种方法在我的数组中获得最高的 int/value 等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:31:51.230

您可以像使用任何其他变量一样使用数组作为参数；代替：

```
public void someMethod(int foo) {
    //important code
}

int foobar = 1;
someMethod(foobar); 
```

你会说，

```
public void someMethod(int[] foo) {
    //important code
}

int foobar = {1, 3, 2};
someMethod(foobar); 
```

至于在数组中找到最高的 int 值，我邀请您结合使用 Google 和您自己的问题解决技能来尝试自己解决这个问题 - 如果您仍然遇到问题，那就是另一个话题另一个问题。

# ruby-on-rails - 提交表单以从索引中执行 UPDATE 操作

> ID：13485430
> 
> 赞同：1
> 
> 时间：2012-11-21T02:22:07.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms

我正在尝试创建一个功能，允许用户直接从索引页面编辑客户端条目。当用户单击“编辑”时，将呈现部分内容，该部分内容将元素替换为输入文本字段。但是当按下“更新客户端”按钮时，出现错误：

```
"No route matches [POST] "/clients/27" 
```

我能够直接从索引中**创建**新客户端并**销毁**客户端......更新操作我做错了什么？

部分：

```
<tr id="test">
  <%= form_for Client.find(27), :method => :PUT do |f| %>
    <td class="input">
      <%= f.text_field :name, :value => "Test" %>
    </td>
    <td class="input">
      <%= f.text_field :company %>
    </td>
    <td class="input">
      <%= f.text_field :email %>
    </td>
    <td class="grayedOut"></td>
    <td class="actions">
      <%= f.submit "Confirm edit" %>
    </td>
  <% end %>
</tr> 
```

routes.rb 文件：

```
resources :clients do
  resources :projects do
    resources :items
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T19:20:20.063

我想到了。无论出于何种原因，将表单嵌套在表格中似乎会扰乱表单提交的方式。当我将部分呈现在表格之外时，表单提交更新操作没有问题。

我仍然对为什么会发生这种情况感到困惑。我对这个问题的解决方案是使用 div 而不是表格。

编辑：好的，所以我对该主题进行了更多研究，发现“表单”不是`<table>`or的有效子级`<tr>`。为了解决这个问题，我把`<%= form_for %>`标签放在 first 里面，`<td>`把`<% end %>`标签放在 last 里面`<td>`。现在它工作得很好！这是我的部分现在的样子：

```
<tr id="test">
    <td class="input">
      <%= form_for Client.find(27), :method => :PUT do |f| %>
      <%= f.text_field :name, :value => "Test" %>
    </td>
    <td class="input">
      <%= f.text_field :company %>
    </td>
    <td class="input">
      <%= f.text_field :email %>
    </td>
    <td class="grayedOut"></td>
    <td class="actions">
      <%= f.submit "Confirm edit" %>
      <% end %>
    </td>
</tr> 
```

# php - UUID_SHORT 如果重复则重新生成

> ID：13485431
> 
> 赞同：0
> 
> 时间：2012-11-21T02:22:19.097
> 
> 标签：php, mysql, pdo

我有这个查询：

```
$query = "INSERT INTO users (users_uuid, type_id) VALUES (UUID_SHORT(), :type_id)"; 
```

我的问题是，如果`UUID_SHORT()`生成的已经存在，有没有办法告诉 MySQL`UUID_SHORT()`在该查询中生成另一个？我现在的想法是捕获返回错误响应，然后再次执行查询，我发现这效率低下。

基于@eicto 评论，我阅读`ON DUPLICATE KEY UPDATE`然后尝试重建我的查询，我实现了一个新查询：

```
$query = "INSERT INTO users (users_uuid, type_id) VALUES (UUID_SHORT(), :type_id) ON DUPLICATE KEY UPDATE (users_uuid) = VALUES(UUID_SHORT())"; 
```

但是，我在日志中收到一条错误消息：

**“SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 '(users_uuid) = VALUES(UUID_SHORT()) 附近使用的正确语法'在第 1 行"**

这是什么意思？

# ios - UINavigationController 中的常量 UIBarButtonItem

> ID：13485432
> 
> 赞同：5
> 
> 时间：2012-11-21T02:22:49.413
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem

有什么方法可以让我拥有一个并且无论它被推送多少次`UINavigationController`都始终显示相同？`UIBarButtonItem`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:45:18.833

尝试这个-

1.  创建子类（`CustomNavigationController`）`UINavigationController`并使用它来推送您的视图控制器。
2.  在`CustomNavigationController`创建`UIBarButtonItem`中`init`或中`viewDidLoad`。添加`target`&`action`到它。
3.  在委托方法中为每个视图控制器实现`UINavigationControllerDelegate`委托`CustomNavigationController`并设置`barButtonYouCreated`为右栏或左栏按钮项。

利用

```
- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
     viewController.navigationItem.leftBarButtonItem = barButtonYouCreated;
} 
```

或者

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:14:38.690

或者尝试使用 UINavigationController 类别，并自定义 back item，这样无论推送多少次，都只需为 navigationController 的 back item 设置相同的视图。就像是：

```
@implementation UIViewController (CustomNavigation)

- (void)setLeftBarButtonItem:(UIButton*)leftview
{    
    UIBarButtonItem *customItem = [[[UIBarButtonItem alloc] initWithCustomView:leftview] autorelease];
    self.navigationItem.leftBarButtonItem = customItem; 
    [(UIButton*)self.navigationItem.leftBarButtonItem.customView addTarget:self.navigationController action:@selector(popViewControllerAnimated:) forControlEvents:UIControlEventTouchUpInside];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:18:15.547

您可以使用`UINavigationControllerDelegate`如下：

```
- (void)navigationController:(UINavigationController *)navigationController 
      willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

在此委托方法中，您可以检查是否将 barButtonItem 添加到导航栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:39:29.600

您可以创建一个包含您的推送控制器的全局，然后隐藏您的`UITabBarController`推送控制器`UINavigationController``navigationbar`

# c# - 将 XNA 编译为 64 位

> ID：13485435
> 
> 赞同：8
> 
> 时间：2012-11-21T02:22:59.990
> 
> 标签：c#, memory, xna, 64-bit, xna-4.0

我正在开发一个模拟许多对象之间非常复杂的交互的模拟器，我的意思是数百万。

我使用 XNA 是因为它可以让我轻松完成一些有用的事情，尤其是在渲染方面。

我的问题是我在`OutOfMemoryException`模拟几秒钟后就遇到了 s 。我很快意识到我的程序只在 32 位模式下运行，所以我只获得了几 GB 的稍大一点的 RAM。

如何在 64 位模式下运行 XNA 游戏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:32:28.087

XNA 曾经只有 32 位。您可以尝试编译为 64 位，但是您会遇到问题，因为不会加载任何 64 位 XNA 库。我发现试图支持这一点的所有内容都是提醒观众编译为 x86 的评论。

~~要编译为 x64：右键单击您的解决方案并转到配置管理器。从那里选择 x64 作为您的 Active Solution 平台。您可能必须创建它，然后将所有项目选择为 x64。您也可以尝试构建为 Any CPU，因为您使用的是 64 位 Windows，它应该会自动以 64 位模式启动。~~

编辑：我发现我的一台旧 VM 上安装了 XNA 4。似乎没有办法强制它编译为 64 位。即使我尝试创建一个新平台，它也只允许我选择 x86。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T03:13:53.643

这并不能直接回答问题。我已经赞成 TyCobb 的回答。

我过去也遇到过同样的问题。

您是否考虑过切换到[SlimDX](http://slimdx.org/)？它是 DirectX 的包装器，允许您使用 DirectX 开发 .Net 应用程序。根据文档：

```
SlimDX sports complete support for both 32 and 64 bit targets. 
```

它可能不像 XNA 那样用户友好，但我认为它对你来说可能是一个不错的选择。

# jquery - 检查框是否被选中，如果没有隐藏 div

> ID：13485442
> 
> 赞同：0
> 
> 时间：2012-11-21T02:24:10.800
> 
> 标签：jquery, html, checkbox

所以我有这方面的基础知识，但它没有按照我想要的方式工作

问题：

当页面加载时，即使未选中该框，它也会显示 div。

编码：

```
<div class="element">
<label for="jtf">Jackpot Times: <a href='javascript:void(0);'
NAME='Help' title=' Help '
onClick=window.open('raffle.html','Ratting','width=520,height=570,0,status=0,');><font size='1'>[?]</font></a></label>
<table width='100%'><tr><td align='right'>Daily:</td><td align='left'><input type='checkbox' <?php echo $checkered ?> name='daily' id='daily' value='1' /></td><td align='right'>Weekly:</td><td align='left'><input type='checkbox' <?php echo $checkered1 ?> name='weekly' value='1' /></td><td align='right'>Monthly:</td><td align='left'><input type='checkbox' <?php echo $checkered2 ?> name='monthly' value='1' /></td><td align='right'>Yearly:</td><td align='left'><input type='checkbox' name='yearly' <?php echo $checkered3 ?> value='1' /></td></tr></table>
</div>
<div id='daily_x'>
<div class='element'>
<label for='daily_x'>Daily Jackpot Starting Pot:</label>
<input type='text' name='daily_x' value='<?php echo $rafde?>' />
</div>
</div>
<script>
$('#daily').change(function() {
    if(this.checked){
      $('#daily_x').show();
    }
    else{
      $('#daily_x').hide();
    }
});
</script> 
```

当页面加载时，ID为daily的复选框未选中，但仍显示div。

我为选择框设置了类似的设置，但是能够添加`$(document).ready(function()`以在未选择某些内容时隐藏，但是在使用复选框时这似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T02:29:56.763

首先，使用onready，onload()状态，触发变化，设置监听器后：

```
<div class='element'>
<label for='daily_x'>Daily Jackpot Starting Pot:</label>
<input type='text' name='daily_x' value='<?php echo $rafde?>' />
</div>
</div>
<script>
$(function() {
 $('#daily').change(function() {
     if($(this).attr('checked')){
       $('#daily_x').show();
     }
     else{
       $('#daily_x').hide();
     }
 });
 $('#daily').trigger('change');
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T02:28:40.713

```
if($(this).attr('checked')){
    $('#daily_x').show();
}else{
    $('#daily_x').hide();
} 
```

如果您希望隐藏/显示 div “onload”，那么只需调用 .change() 函数

```
$('#daily').change(function() {
    if($(this).attr('checked')){
        $('#daily_x').show();
    }else{
        $('#daily_x').hide();
    }
});

$('#daily').change(); 
```

# hibernate - 我的jsp页面中的Struts 2会话访问问题

> ID：13485443
> 
> 赞同：1
> 
> 时间：2012-11-21T02:24:16.927
> 
> 标签：hibernate, session, struts2, ognl

我有一个 JSP 页面，我想以这种方式显示会话中的一些信息

```
<div>Fonction : <s:property value="%{#session.employe.emploi.nomEmploi}"/> 
```

但它不显示任何内容的问题。

所以为你解释我有一个包含另一个类emploi的员工类，这是示例代码

雇员：

```
public class Employe 
{
  private Long employeId;
  private Emploi emploi;
  private String nom;
  private String prenom;
  private String adresse;
  private String civilite;

  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "ID", unique = true, nullable = false)
  public Long getEmployeId() {
    return this.employeId;
}

public void setEmployeId(Long employeId) {
    this.employeId = employeId;
}

    @ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "EMP_ID", nullable = false)
    public Emploi getEmploi() {
    return this.emploi;
}

public void setEmploi(Emploi emploi) {
    this.emploi = emploi;
}
    @Column(name = "NOM", nullable = false)
    public String getNom() {
    return this.nom;
}

public void setNom(String nom) {
    this.nom = nom;
}
    @Column(name = "PRENOM", nullable = false)
    public String getPrenom() {
    return this.prenom;
}

public void setPrenom(String prenom) {
    this.prenom = prenom;
}

    @Column(name = "ADRESSE", nullable = false)
    public String getAdresse() {
    return this.adresse;
}

public void setAdresse(String adresse) {
    this.adresse = adresse;
}
    @Column(name = "CIVILITE", nullable = false, length = 20) 
    public String getCivilite() {
    return this.civilite;
}

public void setCivilite(String civilite) {
    this.civilite = civilite;
}
} 
```

雇用：

```
public class Emploi
{
  private Long emploiId;
  private String nomEmploi;
  private Set<Employe> employes = new HashSet<Employe>(0);
  @Id
  @GeneratedValue(strategy = IDENTITY)
  @Column(name = "EMP_ID", unique = true, nullable = false)
  public Long getEmploiId() {
    return this.emploiId;
}

public void setEmploiId(Long emploiId) {
    this.emploiId = emploiId;
}
    @Column(name = "NOM_EMPLOI", nullable = false)
public String getNomEmploi() {
    return this.nomEmploi;
}

public void setNomEmploi(String nomEmploi) {
    this.nomEmploi = nomEmploi;
}
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "emploi")
    public Set<Employe> getEmployes() {
    return this.employes;
}

public void setEmployes(Set<Employe> employes) {
    this.employes = employes;
}

} 
```

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T04:14:11.920

确保该对象在会话中可用；

使用下面的标签，您将了解 ValueStack 中可用的对象是什么。

```
<s:debug/> 
```

输出值栈的内容。

另一种方法是让您的项目`devMode`在 struts.xml 中添加下面的常量。

```
<constant name="struts.devMode" value="true" /> 
```

> `http://localhost:8080/yourApplication/yourActionName.action?debug=xml`

# mysql - MySQL 通过键选择行或回退到默认键选择

> ID：13485448
> 
> 赞同：4
> 
> 时间：2012-11-21T02:25:58.013
> 
> 标签：mysql, sql, translation

我在 MySQL 中有以下语言表来选择不同语言的文本。

```
CREATE TABLE `lang` (
`id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
`group` INT(10) UNSIGNED NOT NULL,
`text` VARCHAR(255) NULL DEFAULT NULL,
`language` VARCHAR(10) NOT NULL DEFAULT 'def',
PRIMARY KEY (`id`),
UNIQUE INDEX `group_language` (`group`, `language`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
ROW_FORMAT=DEFAULT 
```

该表包含以下数据

```
id  group  text               language
1   1      This is English    def
2   2      Helo sir           def
3   3      how are you?       def
4   3      Wie geht es dir?   de 
```

组字段告诉我哪些文本属于每个翻译。在上面的示例中，组 '3' 具有默认文本（英语）和德语翻译。

现在我想为德语选择所有文本，如果它们不存在，我会想要备用英文文本。

有人知道我如何将它们组合成一个 SQL 语句吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:47:45.850

```
SELECT  DISTINCT
        COALESCE(b.ID, a.ID) ID,
        COALESCE(b.`GROUP`, a.`GROUP`) `GROUP`,
        COALESCE(b.`text`, a.`text`) `text`,
        COALESCE(b.language, a.language) language
FROM   TableName a
       LEFT JOIN
        (
            SELECT ID, `GROUP`, `text`, language
            FROM tableName
            WHERE language = 'de'
         ) b ON a.ID <> b.ID AND a.`GROUP` = b.`GROUP` 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/2157b/10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:28:54.937

以下查询将对其自身执行 lang 表的 LEFT JOIN，其中第一组列将保存与默认语言相对应的值，第二组保存`de`语言的值（如果存在），否则为空。如果存在，您将选择`de.text`，否则使用默认语言文本，使用标准`ISNULL`功能。

```
SELECT IFNULL(de.text, def.text) 
FROM
    lang def
    LEFT JOIN lang de
    ON def.group = de.group AND def.language = 'def' AND de.language = 'de' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:49:35.300

是的，它似乎以这种方式工作。感谢 Vikdor 提供 JOIN：

```
SELECT
    def.id,
    def.`group`,
    IFNULL(curr.`text`, def.`text`) AS `text`
FROM
    lang def
LEFT JOIN
    lang curr
ON
    def.`group` = curr.`group` AND
    def.`language` = 'def' AND
    curr.`language` = 'de'
GROUP BY
    def.`group` 
```

# c++ - GNU Make：如何在列表的每个条目前添加一个选项

> ID：13485450
> 
> 赞同：1
> 
> 时间：2012-11-21T02:26:14.743
> 
> 标签：c++, c, makefile, gnu-make

我有一个问题，我想创建一个看起来像这样的变量，

```
INCDIRS = -I dir0 -I dir1 -Idir2 -I dir3 ... -I dirN 
```

其中**dir1, ... , dirN**是某个基目录**base_dir**的所有子目录的名称。

我将如何构建这个变量？最初，我认为我可以执行以下操作，

```
INCDIRS = $(shell for x in `find base_dir -type -d -print`; do echo -I $x; done;) 
```

但这只会导致

```
INCDIRS = -I -I -I -I ... -I 
```

如果有人能解释如何做到这一点，或者解释为什么我的原始命令得到了它的输出，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:45:32.493

You could first get the list of directories, then add -I in front of each one:

```
SOURCE_DIRS := $(shell find base_dir -type d -print)
INCDIRS      = $(addprefix -I,$(SOURCE_DIRS)) 
```

which may be better if you need $(SOURCE_DIRS) for something else.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T02:33:49.603

你的`INCDIRS`作业中有两个错误。一是在`find`命令中。它应该是`find -type d -print`（或只是`find -type d`；`-print`这里是多余的）。使用的另一个错误`$x`。你需要`$`用另一个来逃避`$`：

```
INCDIRS = $(shell for x in `find base_dir -type d -print`; do echo -I $$x; done;) 
```

# c# - 从 MVC3 中的模型列表创建局部视图

> ID：13485451
> 
> 赞同：0
> 
> 时间：2012-11-21T02:26:16.257
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, razor

所以，我在这里有这门课：

```
public class Platillo
{
    public virtual int ID { get; set; }
    public virtual String NombrePlatillo { get; set; }
    public virtual int idRestaurante { get; set; }
    public virtual String DescripcionPlatillo { get; set; }
    public virtual bool esAprobado { get; set; }
    public virtual bool esDisponible { get; set; }
    public virtual double precio { get; set; }
    public virtual DateTime vigenciaPlatillo { get; set; }
    public virtual List<ListaIngredientes>  listadeIngredientes { get; set;}
} 
```

我创建了一个强类型的 PlatilloController，它可以进行所有基本的 CRUD 操作。问题是，视图呈现除列表之外的所有内容。我的想法是创建一个列表，允许添加新成分 (Ingredientes) 和每道菜 (Platillo) 上的份量 (Porciones)。

```
public class ListaIngredientes
{
    public virtual int ID { get; set; }
    public virtual Ingrediente ingrediente { get; set; }
    public virtual int porciones { get; set; }
}

public class Ingrediente
{
    public virtual int ID { get; set; }
    public virtual String NombreIngrediente { get; set; }
    //...
} 
```

所以，我在想的是实现一个 PartialView 来呈现菜肴中每种成分的列表，并允许添加新的成分。我该怎么做？而且，由于我计划在同一页面上创建和更新新成分，我确信我应该考虑 AJAX。我究竟如何使用 Ajax 创建和显示 ListaIngrediente 的列表条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:35:05.830

只是一个使用部分视图页面的示例，试试这个：

```
@model <Project>.Models.Platillo

@foreach(ListaIngredientes ing in listadeIngredientes)
{
      <div>@ing.ID</div>
      <div>@ing.Ingrediente.NombreIngrediente</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:39:49.460

我对你的设计有点困惑你为什么要使用公共列表

`virtual List<ListaIngredientes> listadeIngredientes { get; set;}`我会开始，但首先在您的 ListaIngredientes 中创建一个 Platillo 外键，该外键将与 Platillo 匹配，例如 PlatilloID，因此现在您将拥有一个与 Platilloios 及其成分匹配的 ListaIngredientes 列表。

然后确保您可以创建一个 ajax 局部视图，您可以在其中添加成分，然后将特定成分与您的 Platilloio 匹配在另一个单词中的单独视图上分别创建 ingridiets 和 Platilloio，然后在另一个视图中从您的 Ingridients 表中的成分中添加 ingridiet到佩拉蒂奥。

# javascript - 什么版本的javascript引入了任意构造函数返回？

> ID：13485455
> 
> 赞同：0
> 
> 时间：2012-11-21T02:26:42.710
> 
> 标签：javascript, constructor

有人在问题中[是否有任何理由在构造函数中手动返回](https://stackoverflow.com/questions/13484895/is-there-any-reason-to-manually-return-in-a-constructor-function/13484919#13484919)提到他认为在构造函数调用中返回任意对象可能已在最近版本的 Javascript 中引入。

我现在无法访问其他浏览器，也找不到任何有关此的信息，那么是什么版本引入了这个，或者它一直存在？

如果它的存在时间不长，那么哪些浏览器版本会支持它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:23:01.933

在构造函数中手动返回有几个原因。辛格尔顿只是其中之一。

构造函数只是与`new`运算符一起使用的函数。当以这种方式调用时，`this`将绑定到基于该函数原型创建的对象。这`this`也是当您使用调用该函数时返回的（或者如果您不使用`new`则绑定到）。`window``new`

*这是对该过程的轻微简化，但这应该可以很好地概述*

当您`Object`从这样的构造函数显式返回 an 时 - 使用该函数的原型创建的原始对象将被丢弃，并返回显式对象（正如人们所期望的那样）。

据我所知，它总是这样——或者至少只要函数被允许返回一个值。:)

这是一个链接：

[来自 ECMA-262 3rd edition LS-like(1999 - 所以是的，几乎永远:)](http://bclary.com/2004/11/07/#a-13.2.2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T06:47:48.067

如果您查看[ECMA-262 ed 1](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%201st%20edition,%20June%201997.pdf)（仍可从 ECMA 站点在线获得），您将看到：

> 11.2.2 新运算符
> 
> 产生*式 NewExpression : new NewExpression*的评估如下：
> 
> 1.  评估 NewExpression。
> 2.  调用 GetValue(Result(1))。
> 3.  如果 Type(Result(2)) 不是 Object，则生成运行时错误。
> 4.  如果 Result(2) 未实现内部 [[Construct]] 方法，则生成运行时错误。
> 5.  在 Result(2) 上调用 [[Construct]] 方法，不提供任何参数（即一个空的参数列表）。
> 6.  如果 Type(Result(5)) 不是 Object，则生成运行时错误。
> 7.  返回结果（5）。

然后在 §15.3.2.1 #18`[[Construct]]`中解释了该方法（在下文中，F 是一个新构造的 Function 对象）：

> `18.`将 F 的 [[Construct]] 属性设置为一个方法，该方法在被调用时构造一个新对象，其 [[Prototype]] 属性等于 [[Construct]] 方法时 F.prototype 的值被调用（但是如果这个值不是一个对象，那么使用 Object.prototype 的值），然后调用 F 作为一个函数（使用它的 [[Call]] 属性），新对象作为这个值和给定的参数到 [[Construct]] 方法作为参数。如果调用 [[Call]] 方法的结果是一个对象，则该对象成为调用 [[Construct]] 方法的结果；否则，新对象将成为调用 [[Construct]] 方法的结果。

因此默认返回的构造函数`this`从一开始就存在于 ECMAScript 中。

# maps - 如何在 asmx 网络服务中使用 google.maps

> ID：13485460
> 
> 赞同：0
> 
> 时间：2012-11-21T02:27:54.223
> 
> 标签：maps, asmx

我需要计算 Web 服务中某些逻辑的距离并假设 google.maps API 是合适的。我所看到的一切都是 Jscript 并且需要在 html tags 中引用脚本`<script>`，这在此处不适用。一个 .dll 会让事情对我来说很明显，但这似乎不可用......

您如何在 ac# .asmx 中访问 google.maps？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:38:14.337

您将不得不做与您作为示例看到的 JavaScript 代码所做的相同的事情。您`WebClient`可能希望使用该类或`WebRequest`该类来执行网络 I/O，但您必须发送和接收 HTTP 消息。

当然，“添加服务参考”是行不通的。

请注意，此问题并非特定于 ASMX Web 服务。您将在控制台程序或 Winforms 应用程序中遇到完全相同的问题。

# c++ - C++、Linux、fork、execvp、waitpid 和 SIGTSP

> ID：13485462
> 
> 赞同：2
> 
> 时间：2012-11-21T02:28:18.880
> 
> 标签：c++, linux, signals, fork, execvp

我正在为家庭工作实施终端。
我几乎完成了，我只需要实现一个 bg ( Background ) 和一个 fg ( Foreground ) 命令。
我的代码如下所示：

```
void run(){

    string command[] = parseMyInput( getInput() );  
    int fork_result = fork();
    if( -1 == fork_result )
        //handle error
    else if( 0 == fork_result ){  // child

         setpgrp();  // I don't want the children to get the signals

         if( -1 == execvp( command[0], makeArgs(command) ) )
             //handle error
    }
    else {  // parent

        if( command[ length - 1 ] != "&" ){

            int status;
            waitpid( fork_result, &status, 0 );

            //continue after child is finished
           //( need to be here also after a SIGTSTP is raised by ctrl+z )
        }
    } 
```

如果它是前台进程（如果最后没有“&”符号），那么我需要能够使用 ctrl+z（SIGTSTP）停止前台进程（子进程），然后将控制权返回给父亲（我的终端）从它停止的点（waitpid）开始。

问题是在按下 ctrl+z 之后（并且在父级在信号句柄方法中获得控制并使用 kill(child_pid, SIGTSTP) 停止子级之后）父级不会从它停止的位置继续（waitpid ）。我不知道信号处理方法完成后它继续在哪里。

如果我在信号处理方法中调用 run() 它将起作用，但我不想要递归。我猜我很快就会得到一个 StackOverFlow ......

这是信号处理方法的代码：

```
void sigtstp_handel( int signal ){  

    if( is_foreground_process_alive() )
        kill( foreground_process_pid, SIGTSTP );

    // run();
} 
```

编辑：我不知道这是否重要，但我使用的是 Linux Ubuntu 12.10。尽管如此，对于家庭作业，我需要它在其他系统上工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:39:40.257

阅读官方 POSIX 参考[`waitpid`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)：

> 未追踪
> 
> ```
> The status of any child processes specified by pid that are stopped,
> and whose status has not yet been reported since they stopped, shall
> also be reported to the requesting process. 
> ```

因此，如果您添加`WUNTRACED`标志，则`waitpid`调用应在其等待的进程停止时返回。

# jquery - Fancybox 未在灯箱中加载 SWF

> ID：13485465
> 
> 赞同：0
> 
> 时间：2012-11-21T02:28:57.730
> 
> 标签：jquery, fancybox, fancybox-2

[http://kevin-plunkett.com/beta/index.html](http://kevin-plunkett.com/beta/index.html)

虽然图像加载正常，但 SWF 和 iFrame（在广告部分中）正在整个浏览器窗口中加载。我是否遗漏了一些在 Fancybox 中启用 SWF 和 iFrame 支持的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:57:16.370

似乎 swf 正在工作......在 iframe 的情况下

这节课

```
class="fancybox.iframe" 
```

应该

```
class="fancybox fancybox.iframe" 
```

因为选择器“ `fancybox`”是绑定到fancybox的，而“ `fancybox.iframe`”设置内容的类型。

# ruby - 如何在 Ruby 中映射和删除 nil 值

> ID：13485468
> 
> 赞同：407
> 
> 时间：2012-11-21T02:29:13.470
> 
> 标签：ruby

我有一个`map`更改值或将其设置为零的值。然后我想从列表中删除 nil 条目。该列表不需要保留。

这是我目前拥有的：

```
# A simple example function, which returns a value or nil
def transform(n)
  rand > 0.5 ? n * 10 : nil }
end

items.map! { |x| transform(x) } # [1, 2, 3, 4, 5] => [10, nil, 30, 40, nil]
items.reject! { |x| x.nil? } # [10, nil, 30, 40, nil] => [10, 30, 40] 
```

我知道我可以做一个循环并有条件地收集到另一个数组中，如下所示：

```
new_items = []
items.each do |x|
    x = transform(x)
    new_items.append(x) unless x.nil?
end
items = new_items 
```

但这似乎不是惯用的。有没有一种很好的方法可以将函数映射到列表上，随时删除/排除 nil？

* * *

## 回答 #1

> 赞同：1049
> 
> 时间：2012-11-21T02:30:55.620

你可以使用[`compact`](https://ruby-doc.org/core-1.9.3/Array.html#method-i-compact)：

```
[1, nil, 3, nil, nil].compact
=> [1, 3] 
```

* * *

我想提醒人们，如果你得到一个包含 nils 的数组作为`map`块的输出，并且该块试图有条件地返回值，那么你就有了代码异味，需要重新考虑你的逻辑。

例如，如果你正在做这样的事情：

```
[1,2,3].map{ |i|
  if i % 2 == 0
    i
  end
}
# => [nil, 2, nil] 
```

然后不要。相反，在 之前`map`，`reject`您不想要的东西或您想要的东西`select`：

```
[1,2,3].select{ |i| i % 2 == 0 }.map{ |i|
  i
}
# => [2] 
```

我考虑使用`compact`清理烂摊子作为最后的努力，以摆脱我们没有正确处理的事情，通常是因为我们不知道会发生什么。我们应该始终知道在我们的程序中抛出了什么样的数据；意外/未知数据是错误的。每当我在我正在处理的数组中看到 nil 时，我都会深入研究它们存在的原因，看看我是否可以改进生成数组的代码，而不是让 Ruby 浪费时间和内存来生成 nil，然后筛选数组以删除他们以后。

```
'Just my $%0.2f.' % [2.to_f/100] 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2015-03-04T18:40:42.653

尝试使用`reduce`或`inject`。

```
[1, 2, 3].reduce([]) { |memo, i|
  if i % 2 == 0
    memo << i
  end

  memo
} 
```

我同意我们不应该接受的答案`map`和`compact`，但出于相同的原因。

我内心深处觉得`map`then`compact`就等于`select`then `map`。考虑：`map`是一个一对一的函数。如果您从一组值映射，并且您`map`，那么您*希望*输出集中的一个值对应输入集中的每个值。如果您必须事先准备`select`好，那么您可能不希望`map`在现场使用。如果您必须`select`事后（或`compact`），那么您可能不希望`map`在片场使用 a。在任何一种情况下，您都在整个集合上迭代两次，而 a`reduce`只需要执行一次。

此外，在英语中，您正在尝试“将一组整数减少为一组偶数”。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2019-08-02T09:42:37.780

**红宝石 2.7+**

*现在有！*

Ruby 2.7 正是`filter_map`为此目的而引入的。它是惯用的和高性能的，我希望它很快就会成为常态。

例如：

```
numbers = [1, 2, 5, 8, 10, 13]
enum.filter_map { |i| i * 2 if i.even? }
# => [4, 16, 20] 
```

在您的情况下，当块评估为假时，只需：

```
items.filter_map { |x| process_x url } 
```

“ [Ruby 2.7 添加了 Enumerable#filter_map](https://blog.saeloun.com/2019/05/25/ruby-2-7-enumerable-filter-map.html) ” 是关于该主题的好读物，其中针对该问题的一些早期方法进行了一些性能基准测试：

```
N = 100_000
enum = 1.upto(1_000)
Benchmark.bmbm do |x|
  x.report("select + map")  { N.times { enum.select { |i| i.even? }.map{ |i| i + 1 } } }
  x.report("map + compact") { N.times { enum.map { |i| i + 1 if i.even? }.compact } }
  x.report("filter_map")    { N.times { enum.filter_map { |i| i + 1 if i.even? } } }
end

# Rehearsal -------------------------------------------------
# select + map    8.569651   0.051319   8.620970 (  8.632449)
# map + compact   7.392666   0.133964   7.526630 (  7.538013)
# filter_map      6.923772   0.022314   6.946086 (  6.956135)
# --------------------------------------- total: 23.093686sec
# 
#                     user     system      total        real
# select + map    8.550637   0.033190   8.583827 (  8.597627)
# map + compact   7.263667   0.131180   7.394847 (  7.405570)
# filter_map      6.761388   0.018223   6.779611 (  6.790559) 
```

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-11-21T17:35:20.257

绝对`compact`是解决此任务的最佳方法。但是，我们可以通过简单的减法获得相同的结果：

```
[1, nil, 3, nil, nil] - [nil]
 => [1, 3] 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2012-11-21T06:08:27.193

在您的示例中：

```
items.map! { |x| process_x url } # [1, 2, 3, 4, 5] => [1, nil, 3, nil, nil] 
```

除了被替换之外，这些值看起来并没有改变`nil`。如果是这样的话，那么：

```
items.select{|x| process_x url} 
```

就足够了。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2014-08-11T21:22:01.670

如果你想要一个更宽松的拒绝标准，例如，拒绝空字符串和 nil，你可以使用：

```
[1, nil, 3, 0, ''].reject(&:blank?)
 => [1, 3, 0] 
```

如果您想更进一步并拒绝零值（或对流程应用更复杂的逻辑），您可以传递一个块来拒绝：

```
[1, nil, 3, 0, ''].reject do |value| value.blank? || value==0 end
 => [1, 3]

[1, nil, 3, 0, '', 1000].reject do |value| value.blank? || value==0 || value>10 end
 => [1, 3] 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-07-05T13:28:49.887

您可以`#compact`在结果数组上使用方法。

```
[10, nil, 30, 40, nil].compact => [10, 30, 40] 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-10T05:40:23.003

`each_with_object`可能是去这里最干净的方式：

```
new_items = items.each_with_object([]) do |x, memo|
    ret = process_x(x)
    memo << ret unless ret.nil?
end 
```

在我看来，在条件情况下`each_with_object`比`inject`/更好`reduce`，因为您不必担心块的返回值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-30T21:50:46.803

实现它的另一种方法如下所示。在这里，我们使用[`Enumerable#each_with_object`](http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_with_object)来收集值，并利用[`Object#tap`](http://ruby-doc.org/core-2.2.3/Object.html#method-i-tap)来摆脱临时变量，否则`nil`检查`process_x`方法的结果时需要这些变量。

```
items.each_with_object([]) {|x, obj| (process x).tap {|r| obj << r unless r.nil?}} 
```

* * *

说明的完整示例：

```
items = [1,2,3,4,5]
def process x
    rand(10) > 5 ? nil : x
end

items.each_with_object([]) {|x, obj| (process x).tap {|r| obj << r unless r.nil?}} 
```

* * *

**替代方法：**

通过查看您正在调用的方法`process_x url`，不清楚`x`该方法中输入的目的是什么。如果我假设您要`x`通过传递一些值来处理 的值，`url`并确定哪些`x`s 真正被处理为有效的非零结果 - 那么，可能[`Enumerabble.group_by`](http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by)是比 . 更好的选择`Enumerable#map`。

```
h = items.group_by {|x| (process x).nil? ? "Bad" : "Good"}
#=> {"Bad"=>[1, 2], "Good"=>[3, 4, 5]}

h["Good"]
#=> [3,4,5] 
```

# mongodb - 无法在 OSX 中使用 mongoose 进行 mongodb 控制台

> ID：13485473
> 
> 赞同：0
> 
> 时间：2012-11-21T02:29:36.690
> 
> 标签：mongodb, mongoose

我能够在我的苹果控制台中运行 mongodb，而`vim`现在`mongo.log` ，我只想打开 mongodb 控制台，以便我可以在控制台中测试查询，就像[http://www.mongodb.org/display中的示例一样/文档/教程](http://www.mongodb.org/display/DOCS/Tutorial)

目前，光标没有返回：

```
> mongodb
all output going to :/usr/local/var/log/mongodb/mongo.log 
```

并且不返回游标。我期待光标返回，所以我可以执行以下操作：

```
 > mongodb
 all output going to :/usr/local/var/log/mongodb/mongo.log
 > test = {name : "bouncingHippo"}
 > db.family.save(test)
 > "ok" 
```

我究竟做错了什么？我正在使用猫鼬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:35:51.593

我不完全清楚您从哪个控制台获取此输出，因为如果您只输入 Node 控制台将不会返回任何可用的内容`mongodb`。

如果您尝试做的只是启动一个 MongoDB 控制台，您将需要首先启动该`mongod`进程，然后使用 MongoDB 控制台附加到该进程。MongoDB 控制台称为`mongo`. 在最简单的测试中，您可以`mongod`从一个终端窗口启动，然后`mongo`从另一个窗口启动。`mongo`然后，您可以在正在运行的终端窗口中完成[教程](http://www.mongodb.org/display/DOCS/Tutorial)中的示例。您的伪代码将如下所示：

```
MongoDB shell version: 2.2.1
connecting to: 127.0.0.1:18070/test
> test = {name : "bouncingHippo"}
{ "name" : "bouncingHippo" }
> db.family.save(test) 
```

如果您尝试将 Mongoose 用于您的问题中的伪代码，它更像是 Node 控制台中的以下内容（假设安装了 Node.js 和 Mongoose）

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('mongodb://localhost/test');
var testSchema = new mongoose.Schema({
    name: String
})
var Test = db.model('Test', testSchema)
var test = new Test({ name: 'bouncinghippo' })
test.save() 
```

# php - 出现错误无法获取您地址的主机名

> ID：13485474
> 
> 赞同：-4
> 
> 时间：2012-11-21T02:29:45.403
> 
> 标签：php, mysql

我在使用该`mysql_connect`功能时遇到问题。当我尝试它时，我得到：

> 无法为您的地址获取主机名

然后我尝试用谷歌搜索错误，我发现将skip-name-resolve的答案在我`.ini`的[mysqld]下的配置文件中。

我设置后，这个错误仍然发生。任何人都有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:43:03.300

第一个问题 Fariezza，如果你只是开始一个新脚本：不要使用 mysql_connect。切换到 PDO 或 MySQLi。

其次，没有代码，就没有调试或建议。如果您要请求帮助，我们需要代码。

最后但同样重要的是，在进行数据库查询时，我发现最好在单个 config.php 文件中简单地定义您的 SQL 数据库、用户名和密码，包含该文件，然后调用数据库连接。稍后您将能够使用 .htaccess 来防止对配置文件进行简单的 http 访问，同时确保它对所有其他脚本都是 chmod 可读的。

附录：

好的..让我们重新开始你的代码；

配置文件

```
Define('DB_SERVER', '<server>');
Define('DB_NAME', '<database_name>');
Define('DB_USERNAME', '<database_username>');
Define('DB_PASSWORD', '<database_password>'); 
```

数据库.php

```
require_once('Config.php');
class dbConn {
   function __construct() {
      $this->db_conn = new mysqli(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_NAME);
      if (mysqli_connect_error()) {
          echo '(<p>Unable to connect to database</p><p>' . mysqli_connect_errno() . '</p>)';
      }
   }
} 
```

接着; 这将让您的配置正确，连接到数据库（dbConn）并允许您稍后通过 mysqli 进行数据库查询。

请停止使用 mysql，将来你会感谢我的——尽管如果你想在以后离开 MySQL，PDO 是 MySQLi 的一个很好的替代品。

# delphi - 在delphi中建立tcp ip连接时无法读取消息

> ID：13485475
> 
> 赞同：2
> 
> 时间：2012-11-21T02:29:53.443
> 
> 标签：delphi, sockets, tcp, delphi-xe2, indy

我有在本地机器（127.0.0.1）上运行的 exe。此 exe 在端口 1234 写入并在 5678 读取。exe 每 50 秒写入一个整数值，例如 1212、4545、6767 等。我想读取该整数值并显示。所以我使用 Indy Client 来达到这个目的。我为此开发了以下代码片段。

```
IdTCPClient1.Port  := 1234; //Set port to connect to
IdTCPClient1.Host := '127.0.0.1'; //Set host to connect to
IdTCPClient1.Connect; //Make connection

sMsg := IdTCPClient1.Socket.ReadLn; //Read the response from the server
ShowMessage(sMsg); 
```

但它不读书。在调试时它卡在了一行 (sMsg := IdTCPClient1.Socket.ReadLn;)

当我尝试通过使用类似 telnet 127.0.0.1 1234 这样的 telnet 命令来执行此操作时，一些杂项或特殊字符会在定期间隔后显示，而不是服务器发送的整数值。

请为此提出任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T03:05:58.770

我不确定您的问题出在哪里，因此，我发布了一个完整示例来创建基本的 Indy 服务器和客户端应用程序。

首先，我有一个带有[`IdTCPServer`](http://www.indyproject.org/docsite/html/TIdTCPServer.html)组件和按钮的服务器应用程序。相关属性是：

```
object Button1: TButton
  Text = 'Listen'
  OnClick = Button1Click
end
object IdTCPServer1: TIdTCPServer
  DefaultPort = 1234
  OnExecute = IdTCPServer1Execute
end 
```

服务器上的[`IdTCPServer.OnExecute`](http://www.indyproject.org/docsite/html/TIdTCPServer_OnExecute.html)and`Button.OnClick`方法如下所示：

```
procedure TServerForm.Button1Click(Sender: TObject);
begin
  IdTCPServer1.Active := not IdTCPServer1.Active;
  if IdTCPServer1.Active then
    Button1.Text := 'Close'
  else
    Button1.Text := 'Listen';
end;

procedure TServerForm.IdTCPServer1Execute(AContext: TIdContext);
var
  Num: Integer;
begin
  while (IdTCPServer1.Active) and (AContext.Connection.Connected) do
  begin
    Num := Random(MaxInt);
    AContext.Connection.IOHandler.WriteLn(IntToStr(Num));
    Sleep(1000);
  end;
end; 
```

如您所见，对于每个连接的客户端，我们将进入一个循环，其中每秒将向套接字写入一个随机数（作为字符串）。

我执行服务器并按下按钮开始监听，接受防火墙警告以允许端口打开，然后我可以成功连接并通过 telnet 从该服务器获取信息：

![telnet 连接到我的服务器](../Images/5f3a52cb234a8e40dad3dca270639665.png)

现在，我创建了客户端应用程序。

表单上的一个Button、Memo和IdTCPClient，相关属性有：

```
object Button1: TButton
  Text = 'Connect'
  OnClick = Button1Click
end
object Memo1: TMemo
end
object IdTCPClient1: TIdTCPClient
  Host = 'localhost'
  Port = 1234
end 
```

代码如下所示：

```
procedure TClientForm.ReadResults;
var
  S: string;
begin
  while IdTCPClient1.Connected do
  begin
    S := IdTCPClient1.IOHandler.ReadLn;
    Memo1.Lines.Add(S);
    //don't repeat this approach in production code, it's just a test here
    Application.ProcessMessages;
  end;
end;

procedure TClientForm.Button1Click(Sender: TObject);
begin
  if IdTCPClient1.Connected then
  begin
    IdTCPClient1.Disconnect;
    Button1.Text := 'Connect';
  end
  else
  begin
    IdTCPClient1.Connect;
    Button1.Text := 'Disconnect';
    Button1.Repaint;
    ReadResults;
  end;
end; 
```

在运行时它看起来像这样：

![客户端和服务器运行](../Images/3b10db4bfd2222ef6f44cd6b5d2aca1d.png)

该项目是在 FireMonkey 中使用 Delphi XE3 制作的，但它也应该与支持 Indy 10 的任何 Delphi 版本的 VCL 一起使用。

# c# - PictureBox 可以在 Windows 应用程序中显示动画 GIF 吗？

> ID：13485477
> 
> 赞同：10
> 
> 时间：2012-11-21T02:30:17.310
> 
> 标签：c#, .net, vb.net, animation, animated-gif

我想在.Net Winform 中显示一个动画 gif。**这个怎么做？**

我以前使用过 VB 6.0。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T04:29:13.943

1.  将 a`PictureBox`放在表单上，​​然后指定一个带有 Gif 扩展名的图片文件。或者：

2.  以编程方式将 gif 图像加载到`PictureBox`带有代码的帧中，这是 Gif 类：

**VB.NET**

```
 Imports System.Drawing.Imaging
 Imports System.Drawing

 Public Class GifImage
    Private gifImage As Image
    Private dimension As FrameDimension
    Private frameCount As Integer
    Private currentFrame As Integer = -1
    Private reverse As Boolean
    Private [step] As Integer = 1

    Public Sub New(path As String)
        gifImage = Image.FromFile(path)
        'initialize
        dimension = New FrameDimension(gifImage.FrameDimensionsList(0))
        'gets the GUID
            'total frames in the animation
        frameCount = gifImage.GetFrameCount(dimension)
    End Sub

    Public Property ReverseAtEnd() As Boolean
        'whether the gif should play backwards when it reaches the end
        Get
            Return reverse
        End Get
        Set
            reverse = value
        End Set
    End Property

    Public Function GetNextFrame() As Image

        currentFrame += [step]

        'if the animation reaches a boundary...
        If currentFrame >= frameCount OrElse currentFrame < 0 Then
            If reverse Then
                [step] *= -1
                '...reverse the count
                    'apply it
                currentFrame += [step]
            Else
                currentFrame = 0
                '...or start over
            End If
        End If
        Return GetFrame(currentFrame)
    End Function

    Public Function GetFrame(index As Integer) As Image
        gifImage.SelectActiveFrame(dimension, index)
        'find the frame
        Return DirectCast(gifImage.Clone(), Image)
        'return a copy of it
    End Function
End Class 
```

**C＃**

```
using System.Drawing.Imaging;
using System.Drawing;

public class GifImage
{
    private Image gifImage;
    private FrameDimension dimension;
    private int frameCount;
    private int currentFrame = -1;
    private bool reverse;
    private int step = 1;

    public GifImage(string path)
    {
        gifImage = Image.FromFile(path);
        //initialize
        dimension = new FrameDimension(gifImage.FrameDimensionsList[0]);
        //gets the GUID
        //total frames in the animation
        frameCount = gifImage.GetFrameCount(dimension);
    }

    public bool ReverseAtEnd {
        //whether the gif should play backwards when it reaches the end
        get { return reverse; }
        set { reverse = value; }
    }

    public Image GetNextFrame()
    {

        currentFrame += step;

        //if the animation reaches a boundary...
        if (currentFrame >= frameCount || currentFrame < 0) {
            if (reverse) {
                step *= -1;
                //...reverse the count
                //apply it
                currentFrame += step;
            }
            else {
                currentFrame = 0;
                //...or start over
            }
        }
        return GetFrame(currentFrame);
    }

    public Image GetFrame(int index)
    {
        gifImage.SelectActiveFrame(dimension, index);
        //find the frame
        return (Image)gifImage.Clone();
        //return a copy of it
    }
} 
```

**C#用法：**

打开一个 Winform 项目，拖放一个`PictureBox`、一个 Timer 和一个 Button，`GifImage.cs`类如上所示。

```
public partial class Form1: Form
{
    private GifImage gifImage = null;
    private string filePath = @"C:\Users\Jeremy\Desktop\ExampleAnimation.gif";

    public Form1()
    {
        InitializeComponent();
        //a) Normal way
        //pictureBox1.Image = Image.FromFile(filePath);

        //b) We control the animation
        gifImage = new GifImage(filePath);
        gifImage.ReverseAtEnd = false; //dont reverse at end
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Start the time/animation
        timer1.Enabled = true;
    }

    //The event that is animating the Frames
    private void timer1_Tick(object sender, EventArgs e)
    {
        pictureBox1.Image = gifImage.GetNextFrame();
    }
} 
```

![在此处输入图像描述](../Images/f428155199cfcd30a349963aa2c08d74.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-17T13:20:16.027

在@JeremyThompson 的回答上进行开发我想添加一个代码片段来展示如何实现第一种方法，因为它更简单，并且不需要您手动为 gif 设置动画，因为它`PictureBox`具有内置功能处理这种情况。只需将 a 添加`PictureBox`到您的表单中，然后在表单构造函数中将图像路径分配给`PictureBox.ImageLocation`

C＃

```
 public PictureForm()
 {
      InitializeComponent();
      pictureBoxGif.ImageLocation = "C:\\throbber.gif";
 } 
```

VB.Net

```
Public Sub New()
    InitializeComponent()
    pictureBoxGif.ImageLocation = "C:\throbber.gif"
End Sub 
```

在我看来，这是一个更简单的解决方案，尤其是对于刚接触 .NET 的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-21T01:20:24.557

我已经玩过这个，如果您不在同一个线程上执行另一个长时间运行的操作，动画就会播放。当您执行另一个长时间运行的操作时，您希望在另一个线程中执行它。

最简单的方法是使用 BackgroundWorker 组件，您可以将其从工具箱拖到表单上。然后将长时间运行的操作代码放入 BackgroundWorker 的 DoWork() 事件中。最后一步是通过调用 BackgroundWorker 实例的 RunWorkerAsync() 方法来调用您的代码。

# javascript - 使用Javascript从数组中提取值

> ID：13485484
> 
> 赞同：2
> 
> 时间：2012-11-21T02:31:19.810
> 
> 标签：javascript, jquery, arrays, extract

我在使用 Javascript 获取准确值时遇到问题。

以下是我们在单项上上课时的工作版本。 [http://jsfiddle.net/rtnNd/](http://jsfiddle.net/rtnNd/)

实际上，当代码块有更多具有相同类的项目时（参见：http: [//jsfiddle.net/rtnNd/3](http://jsfiddle.net/rtnNd/3)），它只选择使用类名的第一个项目。

我的问题是我只想选择使用类名的最后一项。所以我使用了以下代码：

```
var item = $('.itemAnchor')[6]; 
var href = $($('.hidden_elem')[1].innerHTML.replace('<!--', '').replace('-->', '')).find(item).attr('href'); 
```

但它不起作用。我真的不知道为什么。

可能包含项目的代码使用相同的类，类可能在 2 项、3 项或第 6 次中使用。这就是为什么，我只想拿起最后一个要提取的项目。

你能解释一下吗，谢谢大家阅读我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:04:42.393

> *“我的问题是我只想选择使用类名的最后一项。”*

好的，所以在一般意义上，您将使用以下`.last()`方法：

```
var lastItem = $('.itemAnchor').last(); 
```

除了 DOM 中没有该类的元素，因为（在你的小提琴中）它们都被注释掉了。这也是您在问题中显示的代码不起作用的原因。第一行：

```
var item = $('.itemAnchor')[6]; 
```

...将`item`变量设置为`undefined`. 选择器`'.itemAnchor'`不返回任何元素，因此`$('.itemAnchor')`是一个空的 jQuery 对象，并且它在 index 处没有元素`6`。

您需要在使用语句删除开始和结束注释*后*`'.itemAnchor'`获得的 html 上使用选择器，因此：*`.replace()`*

 *```
var href = $($('.hidden_elem')[0].innerHTML.replace('<!--','').replace('-->',''))
          .find('.itemAnchor').last().attr('href'); 
```

演示：http: [//jsfiddle.net/rtnNd/4/](http://jsfiddle.net/rtnNd/4/)

**编辑回应评论：**

> *“我们如何才能在最后一个之前拿起 itemElement。”*

如果您知道您总是希望倒数第二个项目使用`.slice(-2,-1)`而不是`.last()`，如下所示：http: [//jsfiddle.net/rtnNd/5/](http://jsfiddle.net/rtnNd/5/)

或者如果你知道你想要任何一个`href`包含参数的选择器，`h=`那么你可以使用像`'.itemAnchor[href*="h="]'`with这样的选择器`.find()`，在这种情况下你不需要`.last()`or `.slice()`：

```
var href = $($('.hidden_elem')[0].innerHTML.replace('<!--','').replace('-->',''))
          .find('.itemAnchor[href*="h="]').attr('href'); 
```

演示：http: [//jsfiddle.net/rtnNd/6/](http://jsfiddle.net/rtnNd/6/)

请注意，尽管最后一种使用[属性包含选择器](http://api.jquery.com/attribute-contains-selector/)的方法是拾取在*任何地方*`href`都有文本“h =”的元素，因此它适用于您的情况，但也可以拾取或其他。您可以避免这种情况并进行如下测试：*`hh=something``math=easy``h=`*

 *```
var href = $($('.hidden_elem')[0].innerHTML.replace('<!--','').replace('-->',''))
    .find('.itemAnchor')
    .filter(function() {
        return /(\?|&)h=/.test(this.href);
    }).attr('href'); 
```

演示：http: [//jsfiddle.net/rtnNd/7/](http://jsfiddle.net/rtnNd/7/)**

# perl - Perl 从哈希中提取元素范围

> ID：13485485
> 
> 赞同：1
> 
> 时间：2012-11-21T02:31:44.747
> 
> 标签：perl, hash

如果我有一个哈希：

```
%hash = ("Dog",1,"Cat",2,"Mouse",3,"Fly",4); 
```

如何提取此哈希的前 X 个元素。例如，如果我想要前 3 个元素，%newhash 将包含 ("Dog",1,"Cat",2,"Mouse",3)。

我正在使用大散列（~ 8000 个键）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:14:28.260

“这个哈希的前 X 个元素”没有任何意义。前三个元素按数值顺序排列？

```
my %hash = ( 'Dog' => 1, 'Cat' => 2, 'Mouse' => 3, 'Fly' => 4 );
my @hashkeys = sort { $hash{$a} <=> $hash{$b} } keys %hash;
splice(@hashkeys, 3);

my %newhash;
@newhash{@hashkeys} = @hash{@hashkeys}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:52:37.810

你可能想使用这样的东西：

```
my %hash = ("Dog",1,"Cat",2,"Mouse",3,"Fly",4);
for ( (sort keys %hash)[0..2] ) {
    say $hash{$_};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:58:00.787

你应该有一个数组 1：

```
my %hash = ("Dog" => 1,"Cat"=>2,"Mouse"=>3,"Fly"=>4);
my @array;
foreach $value (sort {$hash{$a} <=> $hash{$b} }
           keys %hash)
{
  push(@array,{$value=>$hash{$value}});
}

#get range:
my @part=@array[0..2];
print part of result;
print $part[0]{'Cat'}."\n"; 
```

# jasper-reports - 仅在第一页上打印页脚

> ID：13485488
> 
> 赞同：11
> 
> 时间：2012-11-21T02:31:51.840
> 
> 标签：jasper-reports, ireport, footer

我想让页脚只出现在碧玉报告的第一页上。

在搜索论坛后，我看到这个问题在这里被问了好几次，并且回答不当。正如许多人所建议的那样，我尝试在页脚带上放置一个 print when 表达式，以防止它在不是第一页时打印，例如：

```
new Boolean($V{PAGE_NUMBER}.intValue() == 1) 
```

但这不起作用。结果是没有打印页脚的任何属性，但页脚块仍然打印并占用空间，从而阻止细节使用整个页面。实际上，您在第一页上有一个带有数据的页脚，而在每一页上都有一个没有数据的页脚。

有谁知道如何真正做到这一点的技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:12:20.147

显然，似乎没有直接的方法来实现它，至少在当前版本的 Jasper 库可用的情况下。然而，这是一个非常粗略的解决方法，它在类似的要求中对我们有用。今天早上我只将代码的页脚管理部分分离到一个示例项目中，它工作正常。

**笔记：**

*   不确定这是否适用于复杂的报告（特别是如果需要打印列页脚，因为我们手动修改了 columnFooterOffsetY 值）。我们必须生成一个只有标题、详细信息和页脚区域的简单报告。
*   重要的是，我不建议将此解决方案用于复杂的需求，因为它可能会导致长期的可维护性问题（特别是如果您将来迁移到可能修改了报告填充逻辑的更高版本的 jasperreports 库）。
*   我使用 JasperReports 库版本 5.0.0 进行测试。

**示例是如何构建的：**

*   使用 iReport 创建了 JRXML，带有 printwhen 表达式，`new Boolean($V{PAGE_NUMBER}.intValue() == 1`用于页脚带。
*   创建了一个自定义报告填充器实例，扩展了 JRVerticalFiller 类。

**使用的示例源 XML：（**在 XML 中添加额外的行，以便报告换行到多个页面）

```
<?xml version="1.0" encoding="UTF-8"?>

<employees>
    <employee id="1001" name="AAA" email="aaa@somecorp.com" salary="20500.125"/>
    <employee id="1002" name="BBB" email="bbb@somecorp.com" salary="10000.500"/>
    <employee id="1003" name="CCC" email="ccc@somecorp.com" salary="12275.750"/>
    <employee id="1004" name="DDD" email="ddd@somecorp.com" salary="10750.750"/>
</employees> 
```

**使用 iReport 创建的 JRXML（带有用于页脚区域的 printwhen 表达式）：**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="jr_footer_display_test" pageWidth="792" pageHeight="288" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="27ac3ae2-27da-484b-b088-b4d79aa973cc">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString language="xPath">
        <![CDATA[//employee]]>
    </queryString>
    <field name="email" class="java.lang.String">
        <fieldDescription><![CDATA[./@email]]></fieldDescription>
    </field>
    <field name="id" class="java.lang.String">
        <fieldDescription><![CDATA[./@id]]></fieldDescription>
    </field>
    <field name="name" class="java.lang.String">
        <fieldDescription><![CDATA[./@name]]></fieldDescription>
    </field>
    <field name="salary" class="java.lang.String">
        <fieldDescription><![CDATA[./@salary]]></fieldDescription>
    </field>
    <background>
        <band splitType="Stretch"/>
    </background>
    <columnHeader>
        <band height="50">
            <staticText>
                <reportElement uuid="c3d42e71-672e-402f-9fbb-4889be2a269b" x="29" y="2" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="a4c42dc4-4276-485a-b5a6-b4e6bd2bc217" x="136" y="2" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="157e527b-7ad5-46bf-a06d-2fa0a2686b1e" x="253" y="2" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Email]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="4d87c542-7057-4bc1-9a7e-fbd6a554f33a" x="386" y="2" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Salary]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="21" splitType="Stretch">
            <textField>
                <reportElement uuid="31d09543-a128-469a-be38-3d8987ba781b" x="29" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="ce5c11f8-68da-4efd-93fa-e1f1b5ce407f" x="136" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="300dcc3b-8a2a-489d-8518-7283c95b2f88" x="253" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{email}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="a37f2df9-2459-446d-bc47-488a336aa60e" x="386" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{salary}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <pageFooter>
        <band height="40" splitType="Stretch">
        <printWhenExpression><![CDATA[new Boolean($V{PAGE_NUMBER}.intValue() == 1)]]></printWhenExpression>
            <textField>
                <reportElement uuid="3d9beff7-69b8-44d9-af80-2962b9262368" x="29" y="12" width="80" height="20"/>
                <textElement textAlignment="Left"/>
                <textFieldExpression><![CDATA["Page: "+$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport> 
```

**自定义报告填充器实现：（**这处理高度重置逻辑以确保从第 2 页开始的详细信息带延伸更长）

```
public class CustomVerticalFiller extends JRVerticalFiller {

    private JRFillBand detailBand = null;

    private int pageNumber = -1;

    protected CustomVerticalFiller(JasperReportsContext jasperReportsContext, JasperReport jasperReport) throws JRException {
        super(jasperReportsContext, jasperReport);

        detailBand = detailSection.getFillBands()[0];
    }

    // this method gets called after each detail band row is filled
    protected void resolveBandBoundElements(JRFillBand band, byte evaluation) throws JRException {
        if(band == detailBand) {
            if((detailBand.getBreakHeight() > columnFooterOffsetY - offsetY) && (columnIndex == columnCount - 1)) {
                // we have reached end of a page

                pageNumber++;

                // we reset the offset when we are at the end of page 2, so that jasper continues to fill data
                if(pageNumber == 1) {
                    columnFooterOffsetY += pageFooter.getHeight();
                }
            }
        }
    }
} 
```

**以及实际使用自定义填充器导出 PDF 的 Java 代码：**

```
InputStream inputStream = new FileInputStream(new File(<my jrxml file path>));

JRDataSource dataSource = new JRXmlDataSource(new File(<my source xml file path>), "//employee");

Map parameters = new HashMap();

JasperDesign jasperDesign = JRXmlLoader.load(inputStream);
JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);

CustomVerticalFiller customVerticalFiller = new CustomVerticalFiller(DefaultJasperReportsContext.getInstance(), jasperReport);
JasperPrint jasperPrint = customVerticalFiller.fill(parameters, dataSource);

JasperExportManager.exportReportToPdfFile(jasperPrint, <target pdf file path>); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-06T07:18:18.070

当 PageFooter 的表达式时，您应该将此代码放在 Band Properties Print 上

```
new Boolean( $V{PAGE_NUMBER}.intValue() == 1 ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-16T06:59:15.640

不幸的是，@emecheon 的答案不适用于当前的 jasper 版本（我使用`6.7.0`），但治疗方法几乎相同。

我`columnFooterOffsetY`在第一页后更改。

这样，您可以为每个页面设置不同大小的页脚。

```
public class CustomVerticalFiller extends JRVerticalFiller {

    private int pageNumber = 0;

    public CustomVerticalFiller(JasperReportsContext jasperReportsContext, JasperReport jasperReport) throws JRException {
        super(jasperReportsContext, jasperReport);
    }

    @Override
    protected void addPage(JRPrintPage page) {
        super.addPage(page);
        pageNumber++;
        if (pageNumber == 2) {
            columnFooterOffsetY += pageFooter.getHeight();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T11:15:10.977

我用于仅在第一页上打印页脚的表达式如下：
在*Print When Expression*字段中

```
IF($V{PAGE_NUMBER}.intValue()==1,TRUE( ),FALSE( )) 
```

它检查这是否是第一页，如果是，则返回 true 并打印带区。如果没有，它不会打印任何东西。

如果您想在第一页打印一个页脚，在后面的页面打印一个不同的页脚。我将此代码用作子报表属性的*表达式*。（表达式时不打印）

```
IF($V{PAGE_NUMBER}.intValue()==1,"subreportFooter1.jasper","subreportFooter2.jasper") 
```

# linux - 用于文件输入“<”的 Linux Shell“变量”

> ID：13485494
> 
> 赞同：0
> 
> 时间：2012-11-21T02:32:42.370
> 
> 标签：linux, shell, variables, redirect, input

我正在尝试从文件中输入 mysql 数据库。但是`db filename`将来自变量`filename= /file/path/name.sql`。但是当使用`<`它输入时显示`ambiguous redirect`错误。

我的完整脚本是：

```
filename= /var/backup/mydatabase.sql
echo $filename
mysql -uxxxx -pxxxx -hxxxx databasename < $filename 
```

输出是：

```
/var/backup/mydatabase.sql

./myscript.sh: line 3: $filename: ambiguous redirect 
```

请注意以下几点：

*   请假设由于`filename`某种原因需要该变量
*   我是根用户

所以我的问题是：

*   如何`shell variables`用于文件输入目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:34:48.183

```
filename= /var/backup/mydatabase.sql
         ^ 
```

`=`定义变量时，周围不允许有空格。
请去掉后面的空格`=`。

* * *

```
./myscript.sh: line 3: $filename: ambiguous redirect 
```

此错误消息告诉您`$filename`可能会扩展到多个单词。
请双引号`"$filename"`。

* * *

确保脚本文件在行尾不包含任何不可见的 ctrl 字符。
使用命令`xxd myscript.sh`检查。

# android - 按下 4 时 EditText 打印 $

> ID：13485495
> 
> 赞同：4
> 
> 时间：2012-11-21T02:33:00.243
> 
> 标签：android, android-edittext

我有一个 EditText，我只允许字符 $0123456789。

一切正常，除了当我按下数字 4（在虚拟或硬件键盘上）时，它会打印一个美元符号 ($)。

为什么要这样做？

这是我的 EditText 的 XML：

```
<EditText
    android:id="@+id/amount_text"
    style="@style/textbox"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@null"
    android:cursorVisible="false"
    android:digits="$0123456789."
    android:gravity="left|center_vertical"
    android:hint="@string/amount_hint"
    android:inputType="textPhonetic|numberDecimal" /> 
```

次要问题：

```
mAmountTxt.setKeyListener(DigitsKeyListener.getInstance(false, true)); 
```

这实现了我想要的（无 $）。但是，它将虚拟键盘更改为我不想要的。我想要带有大数字按钮的电话键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:06:20.177

首先，我 100% 确定它与您的 EditText xml 没有直接关系。我已经在 Emu 2.1、Emu 4.0、Emu 4.1 和 Real Phone 4.0 中尝试过您的 xml，并且在每个版本中都运行良好。

其他可能的原因：

*   它可能是模拟器 - 他们有时是错误的。您可以尝试制作模拟器的新实例并进行测试吗？或者，尝试重新启动 adb？

*   它可能是程序化的东西。你会做任何更换或类似的事情吗？

*   我不确定这是做什么的：`style="@style/textbox"`

* * *

其次，要使键盘布局看起来像电话，请使用 this 而不是 setKeyListener

```
mAmountTxt.setInputType(InputType.TYPE_CLASS_PHONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:30:38.403

你写了：

```
I want the phone keyboard with the big number buttons. 
```

设置`inputType`为：

```
android:inputType="phone" 
```

代替：

```
 android:inputType="textPhonetic|numberDecimal" 
```

# opengl - gluLookAt 问题

> ID：13485498
> 
> 赞同：1
> 
> 时间：2012-11-21T02:33:34.993
> 
> 标签：opengl, camera, rendering, curves, bspline

我一直在尝试在 OpenGL 中创建一个过山车模拟器，它使用一系列 gluLookAt 调用来使相机“乘坐”过山车。过山车本身基于带有坐标数组中控制点的 b 样条曲线。b0(u)、b1(u) 等是 b 样条曲线的混合函数，bprime0(u) 等是它们的导数。这是我的代码的相关部分：

```
for (int i = 0; i <= 10; i++){
        for (float u = 0; u <= 1.1; u+=0.1){

            x = (b0(u)*coords[(i)%10].x + b1(u)*coords[(i+1)%10].x
                + b2(u)*coords[(i+2)%10].x + b3(u)*coords[(i+3)%10].x)*2.0f;
            y = (b0(u)*coords[(i)%10].y + b1(u)*coords[(i+1)%10].y
                + b2(u)*coords[(i+2)%10].y + b3(u)*coords[(i+3)%10].y)*2.0f;
            z = (b0(u)*coords[(i)%10].z + b1(u)*coords[(i+1)%10].z
                + b2(u)*coords[(i+2)%10].z + b3(u)*coords[(i+3)%10].z)*2.0f;

            xprime = (bprime0(u)*coords[(i)%10].x + bprime1(u)*coords[(i+1)%10].x
                    + bprime2(u)*coords[(i+2)%10].x + bprime3(u)*coords[(i+3)%10].x)*-2.0f;
            yprime = (b0(u)*coords[(i)%10].y + bprime1(u)*coords[(i+1)%10].y
                    + bprime2(u)*coords[(i+2)%10].y + bprime3(u)*coords[(i+3)%10].y)*-2.0f;
            zprime = (b0(u)*coords[(i)%10].z + bprime1(u)*coords[(i+1)%10].z
                    + bprime2(u)*coords[(i+2)%10].z + bprime3(u)*coords[(i+3)%10].z)*-2.0f;

            Coords nvector = {xprime,yprime,zprime};
            float magn = sqrt(nvector.x*nvector.x+nvector.y*nvector.y+nvector.z*nvector.z);
            nvector.x= nvector.x/magn;
            nvector.y= nvector.y/magn;
            nvector.z= nvector.z/magn;

            glLoadIdentity();
            if (rotateCam == 1){
                theta+=0.0001;
                if (theta > 360) {
                    theta = 0;
                }
                gluLookAt(20*cos(theta),15,20*sin(theta),0,0,0,0,1,0);
                }//if
            else{
                printf("%f\t%f\t%f\n", x+xprime,y+yprime,z+zprime);
                gluLookAt(x,y+1,z,x+xprime,y+yprime,z+zprime,0,1,0);
            }//else

        }//for
}//for 
```

空格键切换 'rotateCam' 变量，它应该在两种查看模式之间切换；一个围绕过山车环绕相机（“if”语句）和一个骑过山车（“else”语句）。

事情是这样的：盘旋模式工作正常，模式之间的切换工作正常，但相机在“骑行”模式下总是静止的。printf 语句显示 x、xprime、y、yprime 等都随着每个计时器滴答而变化，但相机从不移动。

如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:04:59.920

`gluLookAt`不定位 cemera，它只会将其旋转到正确的角度。在此之后，您也可以翻译它。所以这应该可以解决问题：

```
gluLookAt(x,y+1,z,x+xprime,y+yprime,z+zprime,0,1,0);
gluTranslated(x,y+1,z); 
```

# iphone - 带有 CoreData 的 AFNetworking 是线程安全的吗？

> ID：13485499
> 
> 赞同：3
> 
> 时间：2012-11-21T02:33:46.937
> 
> 标签：iphone, ios, core-data, afnetworking

我在我的 iPhone 应用程序上遇到了间歇性的、难以重现的错误，因此我正在检查我对并发性的假设。

运行 AFNetworking v0.10.x，我有以下网络调用：

```
[self postPath:@"/myEndPoint"
    parameters:params
       success:^(AFHTTPRequestOperation *request, id response)
          {
              AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
              // do stuff with object context here
              [appDelegate.objectContext save];
          }     
]       
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
// do other stuff with object context
[appDelegate.objectContext save]; 
```

在我的 AppDelegate 中：

```
-(NSManagedObjectContext*) objectContext
{
    if(nil == _objectContext)
    {
        ... set up sqlite persistent store coordinator and object model ...

        _objectContext = [[NSManagedObjectContext alloc] init];
        [_objectContext setPersistentStoreCoordinator:persistentStoreCoordinator];
        [_objectContext setMergePolicy:NSOverwriteMergePolicy];
    }
    return _objectContext;
} 
```

在这种情况下，是否有可能最终出现并发问题？或者，换句话说，AFNetworking 的 API 是线程安全的吗？我认为 NSOverwriteMergePolicy 会覆盖我的冲突，但崩溃仍然存在（尽管是间歇性的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T21:58:52.723

AFNetworking 的回调在主线程上执行。因此，它们是“线程安全的”，因为只有一个线程与 CoreData 交互。如果您只有一个托管对象，事情会很简单。

来自苹果：

> 添加到此队列的任务在主线程本身上串行执行。因此，您可以将此队列用作应用程序其他部分中正在完成的工作的同步点。

使用多线程 CoreData 和多个托管对象上下文时仍有许多注意事项，对于那些我建议您参考[rsswtmr 的出色答案](https://stackoverflow.com/questions/13485499/is-afnetworking-with-coredata-thread-safe/13486748#13486748)，它没有正确回答我的问题，但提供了指向许多有用信息的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T05:12:18.470

您不能让多个线程在同一个对象上下文上工作。想一想 Core Data 如何在更改/提交数据的过程中参与其中，而另一个更改来自另一个线程。您需要为每个线程创建一个单独的上下文，并在安全/适当时合并更改。这`NSOverwriteMergePolicy`将使您不必在合并时手动处理冲突。

[在这里](http://www.duckrowing.com/2010/03/11/using-core-data-on-multiple-threads/)寻找线程核心数据访问的一个很好的解释。

# java - 如何编辑转换为图像的文本？或任何其他实现/编辑文本的方法

> ID：13485501
> 
> 赞同：1
> 
> 时间：2012-11-21T02:33:55.280
> 
> 标签：java, swing, text, awt, jtextpane

对于我的项目，我想像在 Adob​​e Photoshop 中一样调整文本大小。但是当我尝试调整（通过鼠标拖动）文本窗格的大小时，只有文本窗格被调整大小，而不是其中的文本。然后我尝试将我的文本转换为图像并再次尝试调整它的大小（如[如何在 java 中调整文本大小一文中](https://stackoverflow.com/questions/13440201/how-to-resize-text-in-java)所述）并且效果很好。现在我有另一个编辑文本的问题。即，一旦我的文本转换为图像，那么我该如何编辑它（例如：更改文本颜色等）。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T03:59:59.190

> ..一旦我的文本转换为图像，那么我该如何编辑它（例如：更改文本颜色等）。

不。当请求时，在所需的`Font`、开始`Point`的`AffineTransform`、`RenderinhHints`和`Color`（等）中，用文本绘制每个选择的图像会更好（质量）且更容易。

![拉伸标签](../Images/bf34c0a5ca25d6cd49872bf6e5ecf9ef.png)

```
import java.awt.*;
import java.awt.geom.AffineTransform;

import javax.swing.*;

public class StretchLabels {

    String s = "The quick brown fox jumps over the lazy dog!";
    Font font = new Font(Font.SERIF, Font.PLAIN, 24);

    public JComponent getGUI() {
        JPanel gui = new JPanel(new BorderLayout());

        JLabel l1 = new StretchTextLabel(s);
        l1.setFont(font);
        gui.add(l1, BorderLayout.CENTER);

        return gui;
    }

    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame("Streeetch me!");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.setLocationByPlatform(true);

                StretchLabels eg = new StretchLabels();
                f.setContentPane(eg.getGUI());
                f.pack();

                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }
}

class StretchTextLabel extends JLabel {
    private static final long serialVersionUID = 1L;

    public StretchTextLabel(String s) {
        super(s);
    }

    @Override
    public void paintComponent(Graphics gr) {
        Color c = gr.getColor();
        setForeground(new Color(0,0,0,0));
        super.paintComponent(gr);
        setForeground(c);
        gr.setColor(c);
        Graphics2D g = (Graphics2D)gr; 
        g.setRenderingHint(
                RenderingHints.KEY_TEXT_ANTIALIASING, 
                RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

        double pw = this.getPreferredSize().width;
        double ph = this.getPreferredSize().height;
        double w = this.getSize().width;
        double h = this.getSize().height;

        // Set FG (text) color
        g.setColor(this.getForeground());

        // stretch
        AffineTransform stretch =
                AffineTransform.getScaleInstance(w/pw, h/ph);
        g.setTransform(stretch);
        g.drawString(getText(), 0, this.getFont().getSize());
    }
} 
```

> ..如何编辑图像中的文字？

我通常会提供这样的控件：

![文本控件](../Images/2b731d31f602380b31453cf5bf9c301a.png)

但当然，这不包括：

1.  颜色，在主 GUI（一个基本的绘画应用程序）中有一个控件。
    ![基本的绘画应用程序。](../Images/946358de18c383b0341df4df24a292ce.png)
2.  通过“拖动”缩放结果文本。这可以通过使用@trashgod 或我自己（上图）演示的可调整大小的元素来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:44:49.960

与其将文本转换为图像，不如增加文本的大小以使其与窗格一起增长？

# android - 从现有代码创建新项目

> ID：13485502
> 
> 赞同：0
> 
> 时间：2012-11-21T02:34:12.940
> 
> 标签：android, eclipse, compiler-errors

我将工作中的程序复制到另一台计算机上，这样我就可以在这里处理它。当我尝试创建时，`New project from existing code`我会感到害怕`R. cannot be resolved to a variable`。显然，**R.java**应该在**gen**文件夹中，但它不是。Eclipse 告诉我要导入**R.java**，但我们都知道这是不正确的。

我看到的许多答案都没有解释或解决我的问题。任何帮助是极大的赞赏。

在做了其他事情后，我已经按照建议清理了该项目很多次，但它什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:43:57.573

R.java 生成。（这就是 gen 代表“gen 文件夹”）不要按照 Android 的建议导入 R.java，清理您的项目并重建它，R.java 文件将在 gen 文件夹中创建，除非您的项目有错误。

让我知道事情的后续

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:52:33.913

`R.java`如果它在另一台计算机上工作，请不要修改源（例如导入）。

右键单击项目并选择**Android Tools** -> **Fix Project Properties**。

如果您的 xml 文件中没有错误，则应该可以。

编辑：

如果您不介意其他 IDE，我认为 IntelliJ IDEA 非常适合 Android 开发。（与 Eclipse 相比）它应该可以节省很多问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:20:52.440

尝试做类似 R 类型的事情并给出一个控制 + 空间。它将给出一些建议，其中您可能拥有与您的项目相关的 R.java 文件。导入该 R 而不是默认的 android.R 。在进行所有这些检查之前，请检查您的项目是否在 xml 文件中显示任何错误。如果您的任何 xml 文件中有任何错误，则不会创建 R.java 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:04:55.817

尝试手动导入您的 R 类。转到您的一项活动中的 java 文件并在您的导入语句中尝试此操作。

```
import com.yourpackage.name.R; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T02:53:44.190

也许您也可以尝试这样做，而不是从现有代码创建“新项目”：

在您的日食中转到：文件->导入->常规->将现有项目放入工作区->浏览到您的项目->完成

希望有帮助。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T03:22:02.310

除了其他解决方案之外，请尝试删除“gen”文件夹下导致问题的包，然后让 eclipse 重建它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T03:22:13.553

除了其他解决方案，尝试通过以下方式更改您的应用程序的构建

属性 > 安卓

然后将其恢复为原始版本。

或者以防万一，尝试检查您的布局或 res 文件夹

如果我没记错的话，如果 res 文件夹有问题，则无法构建 R。

# ios - 使用 GL_FLOAT 和 GL_LUMINANCE 进行线性插值？

> ID：13485507
> 
> 赞同：2
> 
> 时间：2012-11-21T02:34:52.253
> 
> 标签：ios, opengl-es, opengl-es-2.0, linear-interpolation, luminance

我正在 iPad 3 上使用 OpenGL ES 2.0 开发应用程序。我试图从`GL_UNSIGNED_BYTE`调用“ ”时`glTexImage2D()`切换为“ ”和“ ”参数。（以前）`GL_FLOAT``type``GL_LUMINANCE``internalFormat``format``GL_RGBA`

问题：线性插值现在消失了。当你放大时，它是非常像素化的而不是平滑的，就像线性插值一样。我需要切换到`GL_RGBA`而不是`GL_LUMINANCE`？是否使用`GL_LUMINANCE`自动禁用插值？

在我的着色器中，我开始：

```
highp vec4 tex = texture2D(Texture, TexCoordOut); 
```

就像我之前使用`GL_UNSIGNED_BYTE`. `TexCoordOut`是顶点着色器的插值输出。为什么在切换到亮度和浮动后不再插值？

ps 我在打电话：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

就在之前`glTexImage2D()`，但我的印象是这些调用在 OpenGL ES 2.0 下什么都不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:20:55.170

我只记得：当使用 GL_FLOAT 时，GL_LINEAR 在 OpenGL ES 2.0 上不可用，除非支持 GL_OES_texture_float_linear 扩展，它在 iPad 3 和更早版本上不支持。

由于支持 GL_OES_texture_half_float_linear 扩展，我将不得不考虑使用它。

# perl - 从 LWP 获取原始响应标头？

> ID：13485508
> 
> 赞同：3
> 
> 时间：2012-11-21T02:35:13.047
> 
> 标签：perl, http-headers, lwp

有没有办法从使用 LWP 发出的 HTTP 请求中获取原始的、未修改的响应标头？这是一个诊断工具，需要识别可能格式错误的标头问题。

我发现的最接近的是：

```
use LWP::UserAgent;
my $ua = new LWP::UserAgent;
my $response = $ua->get("http://somedomain.com");
print $response->headers()->as_string(); 
```

但这实际上会解析标头，然后从解析的数据中重建它们的规范化、清理版本。我真的需要与服务器返回的格式完全相同的整个标题文本，因此任何格式错误或非标准的内容都可以清楚地识别。

如果事实证明没有办法用 LWP 做到这一点，是否有其他 Perl 模块可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T03:55:39.270

[Net::HTTP](https://metacpan.org/module/Net::HTTP)以较少的处理提供较低级别的访问。由于它是[IO::Socket::INET](https://metacpan.org/module/IO::Socket::INET)的子类，因此您可以在发出请求后直接从对象中读取。

```
use Net::HTTP;

# Make the request using Net::HTTP.
my $s = Net::HTTP->new(Host => "www.perl.com") || die $@;
$s->write_request(GET => "/", 'User-Agent' => "Mozilla/5.0");

# Read the raw headers.
my @headers;
while(my $line = <$s>) {
    # Headers are done on a blank line.
    last unless $line =~ /\S/;
    push @headers, $line;
}
print @headers; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:18:34.087

基于对`HTTP::Response`对象（及其`HTTP::Headers`包含的对象）的检查，标头在解析时被丢弃。

我建议你试试`WWW::Curl`。

**使用 WWW::Curl**编辑片段：****

 **```
use WWW::Curl::Easy;

my ($header, $body);

my $curl = WWW::Curl::Easy->new;
$curl->setopt(CURLOPT_URL, $url_to_get); # get this URL
$curl->setopt(CURLOPT_WRITEHEADER, \$header); # save header text in this var
$curl->setopt(CURLOPT_WRITEDATA, \$body); # save body text in this var

my $code = $curl->perform;
if (0 == $code) {
  # header text is in $header, body text in $body 
} else {
  print $curl->strerror($code).": ".$curl->errbuf."\n";
} 
```**

# xcode - 在视图控制器上动态创建标签使其在 Xcode 中重置

> ID：13485509
> 
> 赞同：1
> 
> 时间：2012-11-21T02:35:16.033
> 
> 标签：xcode, reset, addsubview

我一直在搜索 addsubview 函数，发现有人说使用该函数实际上会使视图控制器重置自身，当然还有之前创建的所有对象。

这是我的代码：

```
- (IBAction)CrearEst:(id)sender {
    for(int i=0; i< 10; i++)
    {
        float x = arc4random() %300;
        //float x = arc4random() %300;
        UILabel *estrella = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 4, 4)];
        estrella.tag = i;
        estrella.center = CGPointMake(x,100);
        estrella.text = @".";
        estrella.textColor = [UIColor whiteColor];
        [self.view insertSubview:(estrella) atIndex: 0];
    }
} 
```

这很好用，但问题是，就像我之前说的，所有以前创建的对象，它的位置都被重置了，所以当我移动我的角色并执行该函数时，对象再次回到屏幕中间并且再次。

如果实际上有另一种方法可以做到这一点，我会很高兴听到它！

解决方案：经过数小时的尝试，我发现解决方案是将“self.view”替换为“self.view.superview”，这样你就会有这样的东西

```
[self.view.superview insertSubview:(estrella) atIndex: 0] 
```

使用“superview”而不是 view 解决了这个问题。

再见！

# message - 是否可以使用 REDDIT Api 向其他 Reddit 用户发送 PM？

> ID：13485511
> 
> 赞同：2
> 
> 时间：2012-11-21T02:35:23.687
> 
> 标签：message, reddit

我一直在查看 REDDIT api 文档，只是通过查看它，似乎一个不能（？）向另一个 Reddit 用户发送 PM 消息。请证明我错了:)

是否可以查看其他用户的 subredddit 订阅？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:52:20.277

[您可以使用compose](http://www.reddit.com/dev/api#POST_api_compose)通过 reddit 的 API 发送 PM 。

您看不到其他用户的 subreddit 订阅。

根据您使用的语言，您可能需要查看现有的[API 库](https://github.com/reddit/reddit/wiki/API%3A-Third-Party-Clients)。根据我的经验， [PRAW](https://github.com/praw-dev/praw/wiki) for python 是功能最完整的（披露：我是包维护者）。

# jquery - jQuery If 语句 - 小提琴有效，网站无效

> ID：13485515
> 
> 赞同：1
> 
> 时间：2012-11-21T02:35:53.973
> 
> 标签：jquery, if-statement, addclass, jsfiddle, removeclass

好吧。我在这里完全被难住了。

我有一个水平滚动列表，当您无法再滚动时，按钮/箭头会改变颜色（通过 addClass removeClass）。我的小提琴（几乎）完美地工作。另一方面，我的代码没有...

小提琴：http: [//jsfiddle.net/4rKPT/8/](http://jsfiddle.net/4rKPT/8/)

jQuery：

```
$(document).ready(function() {

    var $item = $('div.mainBodyContentListItem'),
        //Cache your DOM selector
        visible = 2,
        //Set the number of items that will be visible
        index = 0,
        //Starting index
        endIndex = ($item.length / visible) - 1; //End index
    $('div.mainBodyContentArrowR').click(function() {
        if (index < endIndex) { //can scroll
            index++;
            $item.animate({
                'left': '-=592px'
            });
        }
    });

    $('div.mainBodyContentArrowR').click(function() {
        if (index > endIndex) { //can't scroll
            $('div.mainBodyContentArrowR').addClass('disable');
        }
    });

    $('div.mainBodyContentArrowR').click(function() {
        if (index < endIndex) { //can scroll
            $('div.mainBodyContentArrowL').removeClass('disable');
        }
    });

    $('div.mainBodyContentArrowL').click(function() {
        if (index > 0) { //can scroll
            index--;
            $item.animate({
                'left': '+=592px'
            });
        }
    });

    $('div.mainBodyContentArrowL').click(function() {
        if (index < 0) { //can't scroll
            $('div.mainBodyContentArrowL').addClass('disable');
        }
    });

    $('div.mainBodyContentArrowL').click(function() {
        if (index > 0) { //can scroll
            $('div.mainBodyContentArrowR').removeClass('disable');
        }
    });

}); 
```

这可以正常工作（除了还没有弄清楚如何解决向左返回并再次击中滚动结尾的问题，就像页面加载时一样，不会添加回类并更改颜色 -随意解决，但这不是这个线程的问题）。

我的实际代码在这种情况下正确地做到了：

```
 $('div.mainBodyContentArrowR').click(function() {
            if (index < endIndex) { //can scroll
                $('div.mainBodyContentArrowL').removeClass('disable');
            }
        }); 
```

但没有别的地方。我被难住了。奇怪的是，我上面概述的那条线工作正常。第一次单击时将删除“禁用”类，然后那些 addClass removeClass 行不执行任何操作（来回滚动确实可以正常工作并停止）。

请任何帮助表示赞赏。我觉得我只是盯着一堵 50 英尺的砖墙，看不到我穿过或越过的路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:58:42.333

如果你改变

```
if(index < endIndex) 
```

至

```
if(index <= endIndex) 
```

它有效吗？

你提到的另一个问题（不是这个线程的主题也应该得到解决，如果

```
if(index > 0) 
```

改为

```
if(index >= 1) 
```

我知道你在评论中提到的问题来了。要解决该问题，您需要在计算结束索引的行之后添加以下行

```
if(($item.length % visible) == 0){
    enIndex = endIndex - 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:06:52.117

You could also try it this way:

```
$(document).ready(function () {
    'use strict';
    var $item = $('div.mainBodyContentListItem'), //Cache your DOM selectors
        mbcArrowR = $('div.mainBodyContentArrowR'),
        mbcArrowL = $('div.mainBodyContentArrowL'),
        visible = 2, //Set the number of items that will be visible
        index = 0, //Starting index
        endIndex = ($item.length / visible) - 1; //End index
    mbcArrowR.click(function () {
        if (index < endIndex) { //can scroll
            index += 1;
            $item.animate({
                'left': '-=592px'
            });
            mbcArrowL.removeClass('disable');
        }
        mbcArrowR.toggleClass('disable', index >= endIndex);
    });
    mbcArrowL.click(function () {
        if (index > 0) { //can scroll
            index -= 1;
            $item.animate({
                'left': '+=592px'
            });
            mbcArrowR.removeClass('disable');
        }
        mbcArrowL.toggleClass('disable', index <= 0);
    });
});​ 
```

Updated fiddle: [http://jsfiddle.net/4rKPT/9/](http://jsfiddle.net/4rKPT/9/)

# ios - 是否可以使用通过代码完成的 sqlite 查询来访问核心数据数据库？

> ID：13485528
> 
> 赞同：0
> 
> 时间：2012-11-21T02:37:35.647
> 
> 标签：ios, sqlite, core-data

只是好奇我们是否可以通过 sqlite 查询访问核心数据数据库。在搜索的过程中，我发现了[Chris Miles](http://blog.chrismiles.info/2011/07/core-data-debugging-with-sqlite.html)用 sqlite 调试核心数据的帖子。在这里，他指出，我们可以使用终端输入 sqlite 查询，然后实际访问核心数据数据库。

请通过objective-c代码澄清这是否可能。如果可以做到这一点，我可以询问一些我可以学习的好教程的链接。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:45:43.443

您当然可以从 Objective-C 方法中进行 C sqlite3 调用。但是，如果您在 Core Data 中定义数据模型并创建托管对象环境时遇到了麻烦，那么很难想象您为什么要绕过它。

还要考虑的是，不能保证 Core Data 下的当前表格布局将与下一个 iOS 版本保持一致，因此您对存储的任何假设都是脆弱的。

# ruby-on-rails - Rails 重定向不断从我的关联模型中删除数据

> ID：13485529
> 
> 赞同：1
> 
> 时间：2012-11-21T02:37:47.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个带有创建方法的表单，该方法将数据输入到我的“users”表和“user_details”表中。

当我在创建方法完成后被重定向时，有一个“删除”查询会从“user_details”表中删除我的新记录。

为什么会发生这条删除线？

显示删除发生的日志

```
Redirected to http://localhost:3000/home
Completed 302 Found in 518ms

Started GET "/home" for 127.0.0.1 at 2012-11-20 20:32:25 -0600
  Processing by SessionsController#index as HTML
  SQL (0.2ms)  BEGIN
   (0.1ms)  COMMIT
  User Load (0.3ms)  SELECT `users`.* FROM `users` ORDER BY id DESC LIMIT 5
  UserDetails Load (0.6ms)  SELECT `user_details`.* FROM `user_details` WHERE `user_details`.`user_id` = 34 LIMIT 1
  SQL (0.1ms)  BEGIN
  SQL (0.2ms)  DELETE FROM `user_details` WHERE `user_details`.`id` = ?  [["id", 8]]
   (6.0ms)  COMMIT
  UserDetails Load (0.5ms)  SELECT `user_details`.* FROM `user_details` WHERE `user_details`.`user_id` = 1 LIMIT 1
  SQL (0.1ms)  BEGIN
   (0.0ms)  COMMIT
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  CACHE (0.0ms)  SELECT `user_details`.* FROM `user_details` WHERE `user_details`.`user_id` = 1 LIMIT 1
  SQL (0.1ms)  BEGIN
   (0.1ms)  COMMIT
Rendered sessions/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 235ms (Views: 63.6ms | ActiveRecord: 93.7ms) 
```

用户模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :authentication_keys => [:login]

  # Virtual attribute for authenticating by either username or email
  # This is in addition to a real persisted field like 'username'
  attr_accessor :login

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :login, :home_phone, :cell_phone, :work_phone, :birthday, :home_address, :work_address, :position, :company, :user_details_attributes

  has_one :user_details, :dependent => :destroy
  accepts_nested_attributes_for :user_details
  after_initialize :build_user_details

  # validates email or username when logging in
  def self.find_first_by_auth_conditions(warden_conditions)
    conditions = warden_conditions.dup
    if login = conditions.delete(:login)
      where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
    else
      where(conditions).first
    end
  end

end 
```

User_details 模型

```
class UserDetails < ActiveRecord::Base
  belongs_to :user

  attr_accessible :first_name, :last_name, :home_phone, :cell_phone, :work_phone, :birthday, :home_address, :work_address, :position, :company

  def full_name
    [self.first_name, self.last_name].compact.join(' ')
  end

end 
```

会话控制器

```
class SessionsController < ApplicationController
    layout 'application'

    before_filter :authenticate_user!

    def index
        render :layout => 'application'
    end

    def new
        render :layout => 'login'
    end
end 
```

应用控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :instantiate_user, :instantiate_message, :recent_users, :authenticate_user!

    def instantiate_user
        @user = User.new
    end

    def instantiate_message
        @message = Message.new
    end

    def recent_users
        @recents = User.last(5).reverse
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:47:35.477

从用户模型中注释掉`after_initialize :build_user_details`解决了我的问题。我添加它是因为我遇到了[Rails how to get associated model attributes](https://stackoverflow.com/questions/13484555/rails-how-to-get-associated-model-attributes)这个问题，但这个问题现在也解决了。

# django - 使用 TastyPie 过滤不同的字段

> ID：13485530
> 
> 赞同：2
> 
> 时间：2012-11-21T02:37:47.950
> 
> 标签：django, tastypie

假设我有一个`Person`模型，它有一个名字字段和一个姓氏字段。会有很多人有相同的名字。我想编写一个 TastyPie 资源，它允许我获取唯一名字的列表（不重复）。

直接使用 Django 模型，您可以通过说类似`Person.objects.values("first_name").distinct()`. 我如何使用 TastyPie 实现相同的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:47:39.167

**更新**

`distinct`我已经调整了下面链接的 apply_filters 方法，以便在调用之前使用这些值。

```
def apply_filters(self, request, applicable_filters):
    qs = self.get_object_list(request).filter(**applicable_filters)

    values = request.GET.get('values', '').split(',')
    if values:
        qs = qs.values(*values)

    distinct = request.GET.get('distinct', False) == 'True'
    if distinct:
        qs = qs.distinct()

    return qs 
```

`values`返回字典而不是模型对象，所以我认为您不需要覆盖`alter_list_data_to_serialize`.

**原始回复**

[这里](https://groups.google.com/forum/?fromgroups=#!topic/django-tastypie/YWyeYjmhqUQ)有一个很好的解决方案，`distinct`涉及到.`apply_filters`

我很惊讶我没有看到一种巧妙的方法来过滤返回哪些字段，但是您可以通过[`alter_list_data_to_serialize`](http://django-tastypie.readthedocs.org/en/latest/resources.html#alter-list-data-to-serialize)在序列化之前覆盖和删除对象中不需要的字段来实现它。

```
def alter_list_data_to_serialize(self, request, data):
    data = super(PersonResource, self).alter_list_data_to_serialize(request, data)
    fields = request.GET.get('fields', None)
    if fields is not None:
        fields = fields.split(',')
        # Data might be a bundle here. If so, operate on data.objects instead.
        data = [
            dict((k,v) for k,v in d.items() if k in fields)
            for d in data
        ]
    return data 
```

将这两者结合起来使用类似的东西`/api/v1/person/?distinct=True&values=first_name`来获得你想要的东西。这通常可以工作，并且仍然可以使用额外的过滤（`&last_name=Jones`）。

# javascript - 不断循环字符串

> ID：13485531
> 
> 赞同：1
> 
> 时间：2012-11-21T02:37:48.933
> 
> 标签：javascript

在 PHP 中制作不断循环的字符串的有效方法是什么？

我试图让字符串 $r 在这些字符之间循环：

-

\

|

/

这样当它被回显时，它看起来就像是动画一样。我尝试制作这样的无限循环：

```
while(1) {
    $r = "-";
    $r = "\";
    $r = "|";
    $r = "/";
} 
```

但是页面不会加载，所以我假设它不会加载，因为在循环完成之前它不会加载任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T02:40:03.550

`while(1)`只是要锁定浏览器。这需要在 javascript 中完成，但即便如此，您仍然会遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:42:37.150

请参阅我的这个答案：[用于 grails 的 javascript spinner](https://stackoverflow.com/questions/12218994/javascript-spinner-for-grails/12219277#12219277)

```
document.getElementById("button").onclick = function() {
    var spinner = document.getElementById("spinner_container")​​​​;
    spinner.anim_mode = 0;
    var animation = ["|", "/", "–", "\\"]
    var spin = function() {
        spinner.anim_mode = (spinner.anim_mode + 1) % animation.length;
        spinner.innerHTML = animation[spinner.anim_mode];
    };
    spin();
    setInterval(spin, 100);
};​ 
```

[http://jsfiddle.net/dGL8X/](http://jsfiddle.net/dGL8X/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:42:23.203

这可以在 php 中完成，但这样做没有任何意义。

您只需要`echo $r;`打开输出缓冲。您必须回显一些 Javascript 以清除屏幕上已有的内容，然后回显新字符。但这确实是个坏主意。我见过像这样完成的加载栏，但是，曾经有（现在仍然是？）一个基于它的库。

# c# - WPF RichTextBox 无缝文本框作为 InlineUIContainers

> ID：13485533
> 
> 赞同：1
> 
> 时间：2012-11-21T02:38:15.800
> 
> 标签：c#, wpf, richtextbox

我正在尝试在 WPF RichTextBox 控件内“标记”文本。每当用户键入“;”时，它之前的文本就会被放入 InlineUiContainer 中包含的新 TextBox 中。这允许文本以编程方式不同，但仍可编辑。

我能够删除边框并使背景透明，以便文本看起来直接位于 RichTextBox 内部，如所愿；但是，如果您尝试仅选择“标记”中的部分文本以及其中的一些文本，则无论如何都会选择整个文本框。

那么我的问题是：有没有办法让文本框无缝选择？也许是为了让它用箭头向左/向右移动以移动到文本框而不是在它上面移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:36:25.963

我刚刚使用了 Run 类的扩展。

# ios - 如何将 OpenSSH 源代码编译到 ios 应用程序中

> ID：13485534
> 
> 赞同：1
> 
> 时间：2012-11-21T02:38:20.290
> 
> 标签：ios, openssh

我已经写了一个`iOS`应用程序，`OpenSSH`但是这需要设备越狱和安装`OpenSSH`。`Cydia`目前，我正在寻找一种方法来将`OpenSSH`源代码编译到我的`iOS`应用程序中，并以 Apple Enterprise Developer 的“内部”方式分发这个应用程序。如果这有效，则不需要越狱。

但是我找不到任何可以集成到`XCode iOS`设备项目中的示例或源代码。任何信息表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:30:54.610

如果需要服务器，则可以使用[libssh](http://www.libssh.org/)代替 OpenSSH，如果客户端足够，则可以使用[libssh2 。](http://www.libssh2.org/)对于 libssh2，x2on 已经进行了迁移工作。您可以在此处获取 repo：[https](https://github.com/x2on/libssh2-for-iOS) ://github.com/x2on/libssh2-for-iOS 。

如果您打算使用 libssh，请注意它是 LGPL 许可的，因此它与 AppStore 不兼容（但应该与内部分发兼容）。

# objective-c - AVAudioPlayer - 你必须创建一个属性让它工作吗？(Xcode)

> ID：13485536
> 
> 赞同：2
> 
> 时间：2012-11-21T02:38:26.813
> 
> 标签：objective-c, ios, xcode, audio, avaudioplayer

这是我现在正在使用的代码，它不起作用（当我按下调用此方法的按钮时没有任何反应）。以前，我有一个用于 audioPlayer 的属性并且它可以工作（下面的所有 audioPlayer 显然都是 self.audioPlayer）。问题是当我尝试播放两次声音时，它会结束第一个声音的播放。

这不好，因为我正在制作音板并希望声音能够重叠。我以为我可以让 audioPlayer 成为局部变量而不是属性，一切都会好起来的，但现在声音根本不起作用，我不知道为什么。在我为 AVAudioPlayer 找到的所有教程中，都创建了一个属性，但没有人解释原因。如果这不起作用，我有什么替代方法可以发出可以重叠的声音？

```
- (void)loadSound:(NSString *)sound ofType:(NSString *)type withDelegate:(BOOL)delegate {
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:sound
                                     ofType:type]];

AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
if (delegate) audioPlayer.delegate = self;
[audioPlayer prepareToPlay];

[audioPlayer play];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T04:36:43.597

您需要属性或 ivar 的原因是因为它提供了强大的参考。使用 ARC 时，任何没有指向它的强指针的对象都是释放的公平游戏，事实上这就是您所看到的。

你也是正确的，一个`AVAudioPlayer`强指针一次只允许一个音频播放器被引用。

如果您选择继续使用，解决方案`AVAudioPlayer`是使用某种集合对象来持有对所有播放器实例的强引用。您可以使用`NSMutableArray`如下所示的：

**编辑**我稍微调整了代码，所以播放声音的方法需要一个`NSString` `soundName`参数。

```
@synthesize audioPlayers = _audioPlayers;
-(NSMutableArray *)audioPlayers{
    if (!_audioPlayers){
        _audioPlayers = [[NSMutableArray alloc] init];
    }
    return _audioPlayers;
}
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag{
    [self.audioPlayers removeObject:player];
}
-(void)playSoundNamed:(NSString *)soundName{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:soundName
                                         ofType:@"wav"]];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    if (audioPlayer){
        [audioPlayer setDelegate:self];
        [audioPlayer prepareToPlay];
        [audioPlayer play];
        [self.audioPlayers addObject:audioPlayer];
    }
} 
```

通常，`AVAudioPlayer`对于音效/音板应用程序来说，这是过度杀伤力。对于快速的声音“下降”，您可能会找到音频工具箱框架，如[我对这个问题的回答中所述。](https://stackoverflow.com/a/8867468/927947)

> 通过查看 System Sound 类参考，您似乎一次只能播放一种声音。

它一次只能播放一个`SystemSoundID`。例如，如果您有 soundOne 和 soundTwo。您可以在 soundTwo 播放时播放 soundOne，但一次不能播放多个声音的一个实例。

> 能够播放可以重叠的声音同时仍然有效地利用代码和内存量的最佳方式是什么？

最好的是意见。

*如果您需要同时播放相同声音的两个实例*，那么我会说此答案中发布的代码将是要使用的代码。由于同一声音的每个重叠实例都需要创建一个新资源，这样的代码`audioPlayerDidFinishPlaying:`更易于管理（内存可以很容易地回收）。

如果相同声音的重叠实例不会破坏交易，那么我认为仅使用`AudioServicesCreateSystemSoundID()`为每个声音创建一个实例会更有效。

我绝对不会尝试`SystemSoundID`通过每次按下按钮来管理 s 的创建和处置。那会很快出错。在那种情况下`AVAudioPlayer`，仅在可维护性方面显然是赢家。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T04:59:13.163

我假设您正在使用 ARC。音频播放器不起作用的原因是因为对象正在被释放，然后在方法终止`AVAudioPlayer`后随后被销毁。`loadSound:`这是由于 ARC 的对象管理而发生的。在ARC之前，代码：

```
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
if (delegate) audioPlayer.delegate = self;
[audioPlayer prepareToPlay];
[audioPlayer play]; 
```

会按预期播放声音。但是，在方法终止`AVAudioPlayer`后，该对象仍将存在很长时间。`loadSound:`这意味着每次播放声音时，都会泄漏内存。

**关于属性的一些事情**

引入属性是为了减少开发人员必须编写和维护的代码量。在属性之前，开发人员必须为每个实例变量手动编写 setter 和 getter。这是很多冗余代码。属性的一个幸运的副作用是它们处理了为基于对象的实例变量编写 setter/getter 所需的大量内存管理代码。这意味着许多开发人员开始专门使用属性，即使对于不需要公开的变量也是如此。

由于 ARC 为您处理所有内存管理细节，因此属性应仅用于其原始目的，从而减少冗余代码的数量。传统的 iVars 默认会被强引用，这意味着一个简单的赋值比如： `title = [NSString stringWithFormat:@"hello"];` 本质上和代码一样： `self.title = [NSString stringWithFormat:@"hello"];`。

**好的，回到你的问题。**

如果要`AVAudioPlayer`在方法中创建实例，则`loadSound:`需要对每个`AVAudioPlayer`实例保持强引用，否则 ARC 会破坏它。我建议将新创建的`AVAudioPlayer`对象添加到`NSMutableArray`数组中。如果采用`AVAudioPlayerDelegate`协议，则可以实现该`audioPlayerDidFinishPlaying:successfully:`方法。您可以在其中从数组中删除`AVAudioPlayer`对象，让 ARC 知道可以销毁该对象。

# iphone - 我应该如何将我在地图中的当前位置设置为我的起点？

> ID：13485539
> 
> 赞同：-2
> 
> 时间：2012-11-21T02:38:59.203
> 
> 标签：iphone, objective-c, ios

我是ios开发的初学者。我需要的是我将我的起点设置为我的当前位置？

```
- (void)loadView {
    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f,   372.0f)];
    self.view = contentView;

    routeMapView = [[MKMapView alloc] initWithFrame:contentView.frame];
    routeMapView.delegate = self;
    routeMapView.showsUserLocation = YES;
    [contentView addSubview:routeMapView];

    routeOverlayView = [[UICRouteOverlayMapView alloc] initWithMapView:routeMapView];

    diretions = [UICGDirections sharedDirections];
    diretions.delegate = self;

}

- (void)viewDidLoad 
{
    [super viewDidLoad];

    CLLocationCoordinate2D sOri,sDest;

    startPoint=@"";
    endPoint= @"34 Jalan Yew, 55100 Kuala Lumpur, Wilayah Persekutuan Kuala Lumpur, Malaysia";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:47:48.900

[你可以在这里](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/cl/MKMapView)找到 MKMapView 的文档。 **操作地图部分的可见部分**是您正在寻找的。

# erlang - rebar：缺少应用程序目录

> ID：13485541
> 
> 赞同：5
> 
> 时间：2012-11-21T02:39:10.123
> 
> 标签：erlang, rebar, reltool

我正在测试钢筋

*   视窗 8 64Bis
*   二郎 64 位 R15B02

我从 github 代码编译 rebar 并创建了一个基本应用程序

```
$ mkdir testapp; cd testapp
$ mkdir rel
$ rebar create-app appid=testapp
$ echo "{sub_dirs, ["rel"]}." > rebar.config
$ cd rel
$ rebar create-node nodeid=testnode
$ cd -
$ rebar compile
$ rebar generate    
ERROR: generate failed while processing testapp/rel: {'EXIT',{{badmatch,{error,"testapp: : Missing application directory."}
... 
```

我正在阅读 reltool 文档，但我找不到有关应用程序目录的任何信息，唯一相关的选项是`incl_cond`，但默认情况下由`rebar`命令定义

### src/testapp.app.src

```
{application, testapp,
 [
  {description, ""},
  {vsn, "1"},
  {registered, []},
  {applications, [
                  kernel,
                  stdlib
                 ]},
  {mod, { testapp_app, []}},
  {env, []}
 ]}. 
```

### 相对/reltool.config

```
{sys, [
       {lib_dirs, []},
       {erts, [{mod_cond, derived}, {app_file, strip}]},
       {app_file, strip},
       {rel, "testapp", "1",
        [
         kernel,
         stdlib,
         sasl,
         testapp
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "testapp"},
       {profile, embedded},
       {incl_cond, derived},
       {mod_cond, derived},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs
       {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                           "^erts.*/(doc|info|include|lib|man|src)"]},
       {excl_app_filters, ["\.gitignore"]},
       {app, testapp, [{mod_cond, app}, {incl_cond, include}]}
      ]}.

{target_dir, "testapp"}.

{overlay, [
           {mkdir, "log/sasl"},
           {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
           {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
           {copy, "files/testapp", "bin/testapp"},
           {copy, "files/testapp.cmd", "bin/testapp.cmd"},
           {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
           {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
           {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
           {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
          ]}. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-06T09:48:00.017

就我而言，我不得不修改默认`rel/reltool.config`行

```
 {lib_dirs, []}, 
```

至

```
 {lib_dirs, ["../../"]}, 
```

我的项目的布局是：

```
Makefile
ebin/   
rebar.config
rel/    
src/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T06:55:31.337

[这可能会帮助你](https://groups.google.com/forum/m/?fromgroups#!topic/erlang-programming/fr5ccgnBSck)。*（如果原始链接消失，请在下面引用）*

不过，不完全确定 R15B01 之后的版本发生这种变化的原因是什么。

> 感谢 Siri，R15B01 中的 reltool 包含一个非常有用的功能。
> 
> 许多 Erlang 项目使用以下结构：
> ./src/foo.app.src
> ./src/foo.erl
> ./rel/reltool.config
> 
> 当您想在 rel/reltool.config 中引用应用程序 foo 时，您之前有三个选项：
> * 项目本地库 / 或应用程序 / 目录
> * 不安全 {lib_dirs, "../.."} reltool.config 设置
> * rebar_reltool_link fake_lib_dir 插件
> 
> 从 R15B01 开始，您现在要做的就是 在 reltool.config 中为不在 lib_dirs 中的应用程序指定
> {app, foo, [{incl_cond, include}, {lib_dir, ".."}]} 。
> 
> 虽然 R15B01 还在开发中，但是这个功能是完整的，可以在 otp.git maint 分支中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T15:20:31.510

请参阅本指南， [https://github.com/rebar/rebar/wiki/Release-handling](https://github.com/rebar/rebar/wiki/Release-handling)

如果您使用的是 R15B01 或更新的更改，

{app, exemplar, [{mod_cond, app}, {incl_cond, include}, {lib_dir, ".."}]}

上面提到路径的方式为我解决了应用程序目录未找到的问题。

# javascript - 在 Ajax 和服务器端之间加载 RSS 提要的最智能方法

> ID：13485545
> 
> 赞同：0
> 
> 时间：2012-11-21T02:39:41.387
> 
> 标签：javascript, ajax, node.js, optimization, rss

考虑到在您的主页上加载和呈现小型 RSS 提要的技术选择，您会选择 Ajax（异步）解决方案还是更面向服务器端的解决方案（我使用的是 node.js）？

我知道每种方法的一些优点/缺点，但是我忽略了服务器端请求在页面的初始加载时间上会更重的程度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:28:33.820

我使用 Google Feed API 在网站上实现 RSS 提要输出取得了很大的成功。

它允许您查询一个或多个 RSS 端点并返回一个 JSON 响应，然后很容易解析出来并根据需要显示。

[https://developers.google.com/feed/v1/devguide#hiworld](https://developers.google.com/feed/v1/devguide#hiworld)

我通常在 AJAX 调用中使用它，但我看不出有什么理由不能在 node.js 中使用这个服务器端。

您的决定将取决于您是要在页面具有加载器后将 RSS 项目加载到浏览器中，还是要在初始页面加载时提供它（通过节点服务器端代码）。

也很容易将它与 JQuery $.getJSON() 混合使用。这是我选择的方法。适用于您可能想要实现的任何其他客户端魔法，例如滚动新闻项目等。

# python - 将Unicode转换为python

> ID：13485546
> 
> 赞同：3
> 
> 时间：2012-11-21T02:39:41.713
> 
> 标签：python, unicode, utf-8

> **可能重复：**
> [将 Unicode 转换为 UTF-8 Python](https://stackoverflow.com/questions/6740865/convert-unicode-to-utf-8-python)

我是一个非常新的 python 程序员，正在编写我的第一个脚本。该脚本从 plist 字符串中提取文本，然后对其执行一些操作，然后将其打包为 HTML 电子邮件。

从一些条目中，我得到了可怕的 Unicode“outside ordinal 128”错误。

在阅读了尽可能多的关于编码和解码的信息后，我知道获得编码对我来说很重要，但我很难理解何时或如何准确地做到这一点。

有问题的变量首先使用 plistlib 引入，然后从 markdown 转换为 HTML，如下所示：

```
entry = result['Entry Text']
donotecontent = markdown2.markdown(entry) 
```

后来，它像这样放在电子邮件中：

```
html = donotecontent + '<br /><br />' + var3
part1 = MIMEText(html, 'html')
msg.attach(part1) 
```

我的问题是，确保此内容中的 Unicode 字符不会导致此错误的最佳方法是什么。我宁愿不忽略角色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T04:40:01.973

对不起我的英语不好。我说中文/日文，每天都使用 CJK 字符。Ceron几乎解决了这个问题，因此我不会再谈论如何使用`encode()`/ `decode()`。

当我们使用`str()`强制转换任何 unicode 对象时，它会将 unicode 字符串编码为字节数据；当我们用来`unicode()`转换`str`对象时，它会将字节数据解码为 un​​icode 字符。

而且，编码必须是从`sys.getdefaultencoding()`.

默认情况下，默认`sys.getdefaultencoding()`返回'ascii'，在做`str()`/ `unicode()`casting时可能会抛出编码/解码异常。

如果你想通过`str()`or进行 str <-> unicode 转换`unicode()`，以及使用 'utf-8' 进行隐式编码/解码，你可以执行以下语句：

```
import sys    # sys.setdefaultencoding is cancelled by site.py
reload(sys)    # to re-enable sys.setdefaultencoding()
sys.setdefaultencoding('utf-8') 
```

它将导致稍后执行`str()`并`unicode()`转换任何编码为 utf-8 的 basestring 对象。

但是，我更喜欢显式使用`encode()`/ `decode()`，因为它使代码维护对我来说更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T03:45:21.557

假设您使用的是 Python 2.x，请记住：有两种类型的字符串：`str`和`unicode`. `str`是字节字符串，而是`unicode`unicode 字符串。`unicode`字符串可用于表示任何语言的文本，但要将文本存储在计算机中或通过电子邮件发送，您需要使用字节表示该文本。要使用字节表示文本，您需要一种编码格式。编码格式有很多种，Python默认使用*ascii*，但是*ascii*只能表示几个字符，大多是英文字母。如果您尝试使用*ascii*对带有其他字母的文本进行编码，您将得到著名的“外部序数 128”。例如：

```
>>> u'Cerón'.encode('ascii')
Traceback (most recent call last):
  File "<input>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf3' in position 3:
 ordinal not in range(128) 
```

如果使用 . 也会发生同样的情况`str(u'Cerón')`，因为 Python 默认使用*ascii*转换`unicode`为`str`.

要完成这项工作，您必须使用不同的编码格式。*UTF-8*是一种编码格式，可以将任何 unicode 文本表示为字节。要将`u'Cerón'`unicode 字符串转换为字节，您必须使用：

```
>>> u'Cerón'.encode('utf-8')
'Cer\xc3\xb3n' 
```

这次没有错误。

现在，回到您的电子邮件问题。我可以看到您正在使用`MIMEText`，它接受已经编码的`str`参数，在您的情况下是`html`变量。`MIMEText`还接受指定使用哪种编码的参数。因此，在您的情况下，如果`html`是 unicode 字符串，则必须将其编码为`utf-8`并传递 charset 参数（因为`HTMLText`默认情况下使用 ascii）：

```
part1 = MIMEText(html.encode('utf-8'), 'html', 'utf-8') 
```

但要小心，因为如果`html`已经是 a`str`而不是`unicode`，那么编码将失败。这是 Python 2.x 的问题之一，它允许您对已经编码的字符串进行编码，但会引发错误。

要添加到列表中的另一个问题是*utf-8*与*ascii*字符兼容，Python 将始终尝试使用*ascii*自动编码/解码字符串。如果你没有正确编码你的字符串，但你只使用*ascii*字符，一切都会正常工作。但是，如果由于某种原因某些*非 ascii*字符滑入您的消息中，您将收到错误，这使得错误更难检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:12:10.480

记住：你不能解码一个 unicode，你不能编码一个 str

```
>>> u"\xa0".decode("ascii", "ignore")

Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    u"\xa0".decode("ascii", "ignore")
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 0: ordinal not in range(128)

>>> "\xc2".encode("ascii", "ignore")

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    "\xc2".encode("ascii", "ignore")
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 0: ordinal not in range(128) 
```

签出这个优秀的[教程](http://farmdev.com/talks/unicode/)

# ios6 - iOS6 和 xCode4.5 上的 ARC

> ID：13485555
> 
> 赞同：1
> 
> 时间：2012-11-21T02:41:44.307
> 
> 标签：ios6, automatic-ref-counting, xcode4.5

我使用下面的代码来测试弧并帮助理解弧

```
NSArray __strong*  myArray = [NSArray arrayWithObjects:@"123", nil];
NSArray __weak*  yourArray = myArray;
NSArray __unsafe_unretained*  theirArray = yourArray;
myArray = nil;
NSLog(@"yourArray = %@, theirArray = %@", yourArray, theirArray); 
```

据我了解，日志应该是：yourArray = (null), theirArray = (null) 面对日志是：yourArray = (123), theirArray = (123)

如果我更改代码并删除 __unsafe_unretained：

```
NSArray __strong*  myArray = [NSArray arrayWithObjects:@"123", nil];
NSArray __weak*  yourArray = myArray;
//NSArray __unsafe_unretained*  theirArray = yourArray;
myArray = nil;
NSLog(@"yourArray = %@", yourArray); 
```

日志是正确的：yourArray = (null)

为什么如果我添加 __unsafe_unretained 局部变量来弱引用我的 NSArray 对象，它就像保留或加强我的 NSArray 对象。

任何人都可以帮助回答这个疑问。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:50:45.330

在这种范围有限的简单示例中，编译器非常擅长确定对象的生命周期。它可以告诉它不应该释放数组，直到到达范围的末尾（或者至少通过这些简单的分配到达最后一次读取的末尾）。

如果您使用标记为 的 ivar，`__unsafe_unretained`在弱分配之后对其进行分配，并使用完全优化进行构建，您可能会看到不同的结果，即使在这种简单的情况下也是如此。此外，基本上虽然编译器可能能够处理这样的情况，其中`__weak`变量仍然设置并且`__unsafe_unretained`变量仍然能够在没有灾难的情况下读取，但关键是您不能*指望*它以这种方式运行。您*可以*指望的是，一个`__weak`变量在其最后一个引用消失后将被 nil'd `__strong`，并且编译器不会插入保留/释放指令`__unsafe_unretained`多变的。只要你遵守规则，你就会得到可预测的结果。一旦你不遵守规则，任何发生或不发生的事情都是不确定的......所以它可能在模拟器和 iPod 4G 上工作，但在 4S 和 5 上严重失败，而在任何 iPad 上工作一半时间。 ..关键是，结果是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:55:04.330

[NSArray arrayWithObjects:@"123", nil] 返回的对象是自动释放的，并且在自动释放池被刷新之前不会被释放。在对象被释放之前，弱引用不会被清除。unsafe_unretained 引用永远不会被 nil'd 出并且一旦对象被释放就会变得无效。

所以日志应该是

yourArray = ( 123 ), theirArray = ( 123 )

但是后来当对象被释放时，它应该是

yourArray = ( NULL ), theirArray = undefined

undefined 因为指针无效并且可能指向一个新对象或只是垃圾，它甚至可能使代码崩溃

# c# - DataRow[] 项数组

> ID：13485556
> 
> 赞同：0
> 
> 时间：2012-11-21T02:42:20.600
> 
> 标签：c#, datatable, datarow

我似乎无法访问我的 DataRow 从我的 DataTable 中提取的元素，我也没有太多的 c# 练习

这是我的代码：

`DataRow[] results = dt.Select("[Acc No] = '"+ search +"'");`

我尝试将数据行中的对象转换为字符串，但这不起作用。搜索只是来自文本框的字符串。

调试时，我可以看到包含所有数据的项目数组，所以我知道选择正在工作，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:52:34.897

您需要提供更多代码...例如您如何尝试访问`DataRow`. 要从行中获取值，我相信语法类似于 results[rowNumber][columnNumber/name]

即`results[0][0]`从第一行获取第一列值，或`results[0]["Id"]`从第一行获取“Id”列。

当然，您应该`results.Count()`在尝试访问`DataRow`阵列之前进行检查。

# ios - IOS - 保存或缓存 DrawRect 图像

> ID：13485560
> 
> 赞同：0
> 
> 时间：2012-11-21T02:42:52.057
> 
> 标签：ios, drawrect, save

我有一个 UIView 有很多图像是从 drawRect 绘制完成后绘制的，我想保存（缓存）所有图像

如何在drawRect或类似的东西中保存（缓存）所有图像！

感谢大家看这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:29:49.407

如果你以性能的名义盲目地缓存，它可能会产生非常*负面*的性能成本。缓存不是免费的——明智地使用它以实现资源的最佳平衡。理想情况下，您会考虑其他几种替代方法来确定哪种方法最适合您的确切需求。

一种快速/有效的方法是`CALayer.shouldRasterize`.

# sql-server - 在 SQL Server 过程中聚合错误消息

> ID：13485561
> 
> 赞同：1
> 
> 时间：2012-11-21T02:43:00.303
> 
> 标签：sql-server, stored-procedures, error-handling

从应用程序的角度来看，存储过程允许更好地抽象和分离关注点。在我的公司，有让 DBA 编写程序并完成所有 DB 工作的传统。而且，它是一个最有效的模型。

作为 .NET 开发人员，我使用资源文件来汇总我的所有错误/成功/验证消息。这使我可以将错误消息保持标准化和集中化，因此，一旦实现完成并且我们需要记录“应用程序消息”，该过程就很简单了。

但是，我们的 DBA 有一个坏习惯，即在整个过程中散布错误消息，这使得记录系统变得困难。当前的解决方案是始终返回`@Result`并`@Message`使用 Redgate 工具来搜索和查找这些变量。然而，这很乏味，听起来也不是一个很好的解决方案。

我想知道是否有任何推荐的做法来集中数据库端的错误消息，同时仍然不会降低性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:08:10.173

在我们的应用程序中，我们从存储过程中返回一个错误代码。这些错误代码是固定的整数，例如，如果要求更新的用户 ID 在数据库中不存在，我们将返回错误代码 10。我们使用这些错误代码作为资源文件中的键来针对它们定义标准错误消息。

我们还定义了对应于这些错误代码的枚举，只是为了让我们的生活更轻松

# jquery - 为什么这些（几乎）相同的演示中只有一个陷入循环？

> ID：13485564
> 
> 赞同：0
> 
> 时间：2012-11-21T02:43:15.557
> 
> 标签：jquery, event-handling, infinite-loop, jquery-events

我一直在与最奇怪的循环作斗争。我将我的代码简化为这两个几乎相同的 jsFiddles。

1.  [http://jsfiddle.net/brentonsrine/crzTB/5/](http://jsfiddle.net/brentonstrine/crzTB/5/)（无限循环）
2.  [http://jsfiddle.net/brentonsrine/crzTB/7/](http://jsfiddle.net/brentonstrine/crzTB/7/)（按我的预期运行）

其中一个卡在一个循环中（打开你的控制台）。其中之一没有。

唯一的区别是类名。说真的，在两个选项卡中打开它们，然后返回第四个。它们是相同的。

我已经在多台计算机上的 Chrome、Firefox 和 IE 中对此进行了测试，不同的是我先打开哪一个。每次都是一样的结果。为什么？？？？？？？？？？？？？？

```
$("body").on("keydown", ".fixedValue:not(input)", function (e) {
    e.preventDefault();
    console.log("the div (which is not input?) was triggered.");

    $(".fixedValue input").trigger("keydown", e.keyCode);
});

$(".fixedValue input").on("keydown", function (e) {
    console.log("input (e.g. not the div) triggered.");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:50:25.017

没有陷入循环的那个在某些带有 class 的项目中`fixedValue`没有输入，因此没有要触发的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T02:54:10.483

正如 JayC 所说，不递归的原因是您没有更改类名的所有实例。要解决您的实际问题，请尝试以下操作：

```
$(".fixedValue input").on("keydown", function (e) {
    e.stopPropagation();
    console.log("input (e.g. not the div) triggered.");
}); 
```

见[这里](http://jsfiddle.net/crzTB/8/)。

keydown 事件冒泡到父 div，然后在子 div 上再次触发。

# php - 将 xdebug 与 Netbeans 一起用于 php - 套接字异常

> ID：13485566
> 
> 赞同：2
> 
> 时间：2012-11-21T02:43:25.673
> 
> 标签：php, macos, netbeans, xdebug

我正在尝试使用 Netbeans 使用 xdebug 进行 php 调试，但我在 netbeans 中抛出了一个套接字异常。它正确地停在断点处，但是当我单击“跳过”或“步入”或任何其他内容时，它将显示套接字异常并崩溃。非常感谢这里的任何帮助，我花了很多时间试图解决这个问题。

我运行的环境是：

```
Mac OSX 10.7.4
Netbeans IDE 7.2
MAMP Version 2.1.1
php5.4.4
xdebug 
```

来自 phpinfo：

```
This program makes use of the Zend Scripting Language Engine:
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
with XCache v2.0.0, Copyright (c) 2005-2012, by mOo
with Xdebug v2.2.0, Copyright (c) 2002-2012, by Derick Rethans 
```

来自 php.ini：

```
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_mode=req
xdebug.remote_log="/Applications/MAMP/logs/xdebug_remote.log"

zend_extension="/Applications/MAMP/bin/php/php5.4.4/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so" 
```

发生异常时我的 IDE 日志的输出如下。

```
INFO [org.netbeans.modules.parsing.impl.TaskProcessor]: Task: class org.netbeans.modules.csl.hints.GsfHintsProvider ignored cancel for 266 ms.
INFO [org.netbeans.modules.php.dbgp.URIMapper]: class org.netbeans.modules.php.dbgp.URIMapper$1: /Applications/MAMP/htdocs/glog/index.php -> file:///Applications/MAMP/htdocs/glog/index.php
INFO [org.netbeans.modules.php.dbgp.URIMapper]: class org.netbeans.modules.php.dbgp.URIMapper$1: /Users/Manachi/Work/myapp/index.php -> file:///Users/Manachi/Work/myapp/index.php
INFO [org.netbeans.modules.php.dbgp.URIMapper]: class org.netbeans.modules.php.dbgp.URIMapper$1: /Users/Manachi/Work/adwaf/php/adwaf/portal/index.php -> file:///Users/Manachi/Work/adwaf/php/adwaf/portal/index.php
INFO [org.netbeans.modules.php.dbgp.URIMapper]: class org.netbeans.modules.php.dbgp.URIMapper$1: file:///Users/Manachi/Work/adwaf/php/adwaf/portal/index.php -> /Users/Manachi/Work/adwaf/php/adwaf/portal/index.php
SEVERE [org.netbeans.modules.php.dbgp.packets.DbgpMessage]
SEVERE [org.netbeans.modules.php.dbgp.packets.DbgpMessage]
INFO [org.netbeans.modules.php.dbgp.DebugSession]
java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:124)
    at org.netbeans.modules.php.dbgp.packets.DbgpCommand.send(DbgpCommand.java:92)
    at org.netbeans.modules.php.dbgp.DebugSession.sendCommands(DebugSession.java:211)
[catch] at org.netbeans.modules.php.dbgp.DebugSession.run(DebugSession.java:143)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T12:37:39.217

您正在运行一个旧的（已知损坏的）Xdebug 版本。您想使用最新的（目前为 2.2.1）。其次，众所周知，XCache 也会干扰 Xdebug，因此您也需要禁用它。

# javascript - Javascript onsubmit 连续函数

> ID：13485567
> 
> 赞同：-1
> 
> 时间：2012-11-21T02:43:48.990
> 
> 标签：javascript, onsubmit

我有一个带有 javascript 的表单来验证必填字段，还有一个表单来强制 php 服务器消息显示在弹出窗口中。

此外，如果禁用了 javascript，我在服务器中有一个 php 验证器。

如果 javascript 验证器没有消息，我希望弹出功能能够工作。

现在，当我将必填字段留空时，我会收到来自 javascript 验证器的消息，以及一个带有 php 验证消息的弹出窗口：

```
form action="http://myserver.com/formmail.php" method="post" name="SampleForm"  onsubmit="return (validateForm() || createTarget(this.target)" target="formtarget")" 
```

我不确定我是否清楚......有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:22:52.710

尽我所能，您的要求是在提交时您`validateForm()`要先调用该函数，如果它返回，则`false`停止处理并停止提交。否则，如果`validateForm()`返回`true`，您想调用`createTarget()`并允许提交继续。您可以通过使用 AND 而不是 OR 条件来实现这一点，即使用`&&`代替`||`：

```
onsubmit="return (validateForm() && createTarget(this.target));" 
```

请注意`)`，虽然您根本不需要外括号，但您错过了结尾：

```
onsubmit="return validateForm() && createTarget(this.target);" 
```

您的代码无法使用的原因`||`是，如果左侧操作数为`false`（或错误），则计算右侧操作数，整个表达式的结果是右侧操作数的值。如果左边的操作数是`true`（或真）右边的操作数根本不被评估。因此，如果您`validateForm()`因为验证错误而返回 false，则该`createTarget()`函数仍将被调用，并且如果它返回的值不是`false`提交，则该函数将继续。

（当然，我假设如果没有错误并且有错误，则`validateForm()`返回。）`true``false`

有关更多信息，请阅读[JavaScript 的逻辑运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Logical_operators)。

# php - 清理字符串周围的空白而不删除空格

> ID：13485575
> 
> 赞同：-3
> 
> 时间：2012-11-21T02:45:08.410
> 
> 标签：php

所以我目前有一系列字符串。他们可能可以访问空格，所以我想通过将“书”变成“书”来摆脱它。但是，如果我使用修剪，诸如“some title”之类的字符串将变为“sometitle”。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T02:47:04.023

Trim 是您正在寻找的功能，文档[在这里](http://ca3.php.net/trim)。和你说的相反：

```
trim — Strip whitespace (or other characters) from the beginning and end of a string 
```

中间不受影响！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:49:43.353

```
$str[] = " book ";
$str[] = " book";
$str[] = "book ";
$str[] = "b o o k";
foreach($str as $s){
    echo trim($s).'<br>';
} 
```

[trim()](http://php.net/manual/en/function.trim.php)在空白之前和之后剪切。从来没有在中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:53:04.470

使用：

```
trim(" Some title"); 
```

不会删除单词之间的空格 - 仅在字符串的开头和结尾，因此结果：

```
"Some title" 
```

还有`ltrim()`和`rtrim()`函数，分别从字符串的左（开始）和右（结束）删除字符。

你可以在这里阅读更多关于它们的信息：

*   [修剪（）](http://php.net/manual/en/function.trim.php)
*   [ltrim()](http://www.php.net/manual/en/function.ltrim.php)
*   [rtrim()](http://www.php.net/manual/en/function.rtrim.php)

# java - 保持 AutoCompleteTextView 的值不会在方向更改时重置

> ID：13485578
> 
> 赞同：1
> 
> 时间：2012-11-21T02:45:26.723
> 
> 标签：java, android, android-layout, google-places-api, android-orientation

我正在制作我的第一个 android 应用程序，并且我有一个 AutoCompleteTextView，其中包含来自 Google Places API 的建议。从建议中选择一个项目时，我会在下面显示有关它的更多信息。这很好用，但是当屏幕方向改变时，值会不断消失，就好像没有选择任何项目一样。如果我选择另一个项目，建议显示得很好，但是当屏幕方向改变时，有什么方法可以保留我的 TextViews 和 AutoCompleteTextView 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:49:05.067

您只需将所选项目存储在 onSaveInstanceState(Bundle outState) 中，然后像这样在 onCreate(Bundle savedInstanceState) 上加载它。

```
public class MainActivity extends Activity {

    final String KEY = "save key";
    int mSelectedItemIndex = -1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState != null) {
            mSelectedItemIndex = savedInstanceState.getInt(KEY);
        }

        if (mSelectedItemIndex != -1) {
            // bind selected item to AutoCompleteTextView
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        // Save your current index
        if (mSelectedItemIndex != -1) {
            outState.putInt(KEY, mSelectedItemIndex);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T02:47:58.653

将此添加到清单中的 Activity

```
android:configChanges="locale|keyboardHidden|orientation" 
```

作为

```
<activity android:name=".youractivityname"
              android:label="youractivityname"
              android:configChanges="locale|keyboardHidden|orientation"/> 
```

# asp.net - Viewstate 和动态添加的行

> ID：13485580
> 
> 赞同：0
> 
> 时间：2012-11-21T02:45:37.500
> 
> 标签：asp.net, viewstate

我遇到了一些麻烦`ViewState`，也许我不明白它是如何工作的。

我有一个表并动态添加行，但是当我尝试将行添加到 时`ViewState`，表中不会显示（添加？）行。

```
private void randomPageMethod()
{

     ...get data & generate row...
     ViewState.Add(tr.ID, tr);
     tableLSHTime.Rows.AddAt(1, tr);
} 
```

如果我删除该`ViewState.Add(tr.ID, tr)`行，则会添加行，但`ofc`不会保留。

我想这样使用`Page_Load`（当我使用时`ViewState`）：

```
protected void Page_Load(object sender, EventArgs e)
{

      ...code code...
      if (IsPostBack)
      {
            foreach (TableRow tr in ViewState)
            {
                tableLSHTime.Rows.Add(tr);
            }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:17:00.000

不要直接将行添加到视图状态，而是使用数据表并向其添加行，然后将数据表添加到视图状态。如果可以通过 page_load 处理程序内部检索和循环。

# c - C 编程：在 C89 中使用 malloc 为 char 数组分配内存

> ID：13485585
> 
> 赞同：1
> 
> 时间：2012-11-21T02:46:44.160
> 
> 标签：c

> **可能重复：**
> [如何在 C 中使用动态多维数组？](https://stackoverflow.com/questions/917783/how-do-i-work-with-dynamic-multi-dimensional-arrays-in-c)
> [指向数组类型的指针，c](https://stackoverflow.com/questions/8937028/pointer-to-array-type-c)

如果我的 C89 ANSI（例如不是 C99）C 代码声明一个变量并使用以下方法分配内存：

```
char myArray[30000][3]; 
```

有没有办法可以通过使用将声明与内存分配分离`malloc()`？例如（请原谅我的新手）：

```
char *myArray;
int i, arrayLength;
...
/* compute arrayLength */
...
myArray = malloc( sizeof(char) * arrayLength * 3);
for (i=0; ii<arrayLength; i++) 
   strncpy(myArray[i], "ab", 3);
...
free(myArray); 
```

目标是创建`myArray`看起来像，例如：

```
myArray[0] = "ab"
myArray[1] = "ab"
myArray[2] = "ab"
...
myArray[arrayLength-1] = "ab" 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T02:49:54.310

看起来您想让第一个数组大小成为可变的运行时值（由 指定`arrayLength`），同时将第二个大小保持为固定的编译时值（`3`）。在那种特定情况下，这很容易

```
char (*myArray)[3];
int arrayLength;
...
/* compute arrayLength */
...
myArray = malloc(arrayLength * sizeof *myArray);
for (i = 0; i < arrayLength; ++i) 
  strcpy(myArray[i], "ab");
...
free(myArray); 
```

如果您决定将第二个数组大小也设为运行时值，事情会变得更加复杂。

PS`strncpy`不应该用作`strcpy`（参见[https://stackoverflow.com/a/2115015/187690](https://stackoverflow.com/a/2115015/187690)，[https://stackoverflow.com/a/6987247/187690](https://stackoverflow.com/a/6987247/187690)）的“安全”版本，所以我`strcpy`在我的代码中使用. `strncpy`但如果你愿意，你可以坚持下去。

# php - 在 Laravel 中为控制器传递默认数据

> ID：13485588
> 
> 赞同：3
> 
> 时间：2012-11-21T02:47:25.703
> 
> 标签：php, laravel

我想从 Laravel 中的数组构建一个菜单。我目前正在做的是将数组放在视图中

```
$menu = ['home', 'users' => ['create users' , 'update user', 'activity log']]; 
```

然后循环通过它来生成菜单：

```
<section>
    <!-- Left Nav Section -->
    <ul class="left">
        <li class="divider"></li>
        @foreach($menu as $key => $nav)
            <li class="has-dropdown">
                <a href="#" class="active">{{ $key }}</a>
                <ul class="dropdown">
                    @foreach($nav as $subnav)
                        <li>
                            <a href="">{{ $subnav }}</a>
                        </li>
                    @endforeach
                </ul>
            </li>
        @endforeach
    </ul>
</section> 
```

有没有其他方法可以在不将数据放入视图的情况下获得相同的结果？

我还尝试在控制器中创建一个构造函数：

```
public function __construct() {
    $menu = ['home', 'users' => ['create users' , 'update user', 'activity log']];

    return $menu;
} 
```

但我想这不是它的工作原理。我很感激任何关于如何解决这个问题的想法。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T10:50:33.030

[查看作曲家](http://laravel.com/docs/views#view-composers)的救援！

每次渲染视图之前都会执行它们，因此您可以使用它来将标准数据传递给它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T06:27:05.403

如果您使用控制器布局，您可以从构造函数中将数据绑定到布局。只需确保首先调用父构造函数，以便正确实例化布局。

```
public function __construct()
{
    parent::__construct();

    $this->layout->menu = ['home', 'users' => ['create users' , 'update user', 'activity log']];
} 
```

这会将`$menu`变量绑定到布局，并且也可用于与 Blades 一起使用的任何嵌套视图`@include`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:12:46.863

看看视图作曲家： [http ://www.laravel.com/docs/views#view-composers](http://www.laravel.com/docs/views#view-composers)

# html - 用 CSS3/HTML 显示家谱

> ID：13485592
> 
> 赞同：4
> 
> 时间：2012-11-21T02:47:51.240
> 
> 标签：html, css

## 我想要的是

我正在尝试使用 CSS 获得类似血统的视图。

*   **不是表**
*   它需要**兼容 IE8+**（如果我没有找到任何适用于 IE8 的解决方案，我可能会考虑 IE9+）
*   它需要**可由浏览器打印**

问题是：在网络上，我们有家谱资源（**parent -> childs**），但没有谱系资源（**child -> parents**）

* * *

***有用的链接，但对于家谱：***

我有这个脚本工作 [http://thecodeplayer.com/walkthrough/css3-family-tree](http://thecodeplayer.com/walkthrough/css3-family-tree)

但我需要完全反转它（我的主节点需要在底部），我没有尝试解决这个问题。

* * *

## 我想在视觉输出中拥有什么：

```
 G FATHER
      FATHER
            G MOTHER
CHILD

      MOTHER 
```

（我也可以接受孩子位于底部，父母位于顶部的解决方案）

但如果可能的话，我想用干净的 HTML 和 CSS 来完成它。

我正在使用简单的 UL 容器和用于信息的 A 容器。这表示：

```
<ul>
    <li>
        <a>Child</a>
        <ul>
            <li>
                <a>Father</a>
                ...other ULs if available...
            </li>
            <li>
                <a>Mother</a>
                ...other ULs if available...
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 我尝试过的（jsfiddles）

我尝试了几种情况，一种是浮点数，另一种是绝对定位，但我没有得到我想要的结果。

我必须摆弄才能展示：

[http://jsfiddle.net/darknessm0404/bZGFA/](http://jsfiddle.net/darknessm0404/bZGFA/)

和旧版本：

[http://jsfiddle.net/darknessm0404/4SDNm/](http://jsfiddle.net/darknessm0404/4SDNm/)

如果您有任何建议或解决方案，请告诉我。网络上有很好的 CSS 家谱，但我不想要它们，因为它们与我想要的相反。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T10:09:09.377

只需从[http://thecodeplayer.com/walkthrough/css3-family-tree](http://thecodeplayer.com/walkthrough/css3-family-tree)获取代码并添加到 css

```
.tree{
   -webkit-transform: rotate(180deg);
   -moz-transform: rotate(180deg);
   transform:  rotate(180deg);
   filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); /* IE6, IE7 */
   -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)" /* IE8 */
   -ms-transform: rotate(180deg);
} 
```

[编辑] 您还可以添加一个名为[Sandpaper](http://www.useragentman.com/blog/csssandpaper-a-css3-javascript-library/)的脚本，以使 IE 中的生活更轻松。

并添加到`.tree li a`旋转。这将旋转所有内容，您仍然可以阅读文本。问题是，您必须重新定位 div。因此，添加`.tree`以下行并使用这些值：

```
 position: relative;
   top: 300px;
   left: -200px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T18:58:49.270

## 概念证明

我的解决方案是纯 css，但如果祖先的数量未知，或者显示的数量可变或非常大，则可能不切实际。它也可能需要一些改进，特别是对于更好的跨浏览器显示。

我在这里所做的工作是*严格针对 3 代祖先*（数字和 css 会随着显示的不同代数而变化）。它基于[您原来的 fiddle html（带有一个额外的类）和修改后的 css](http://jsfiddle.net/bZGFA/32/)，并且在 Chrome 和 Firefox 中看起来不错，在 IE9 中还可以（对我来说有点偏离），在 IE7-8 中更偏离（当然没有显示 7行）。

**HTML**

```
<ul class="tree anscestors-3">
    <li>
        <a href="#">Child</a>
        <ul>
            <li>
                <a href="#">Ancestor 1</a>
                <ul>
                    <li>
                        <a href="#">Ancestor 1A</a>
                        <ul>
                            <li>
                                <a href="#">Ancestor 1AA</a>
                            </li>
                            <li>
                                <a href="#">Ancestor 1AB</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Ancestor 1B</a>
                        <ul>
                            <li>
                                <a href="#">Ancestor 1BA</a>
                            </li>
                            <li>
                                <a href="#">Ancestor 1BB</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">Ancestor 2</a>
                <ul>
                    <li>
                        <a href="#">Ancestor 2A</a>
                        <ul>
                            <li>
                                <a href="#">Ancestor 2AA</a>
                            </li>
                            <li>
                                <a href="#">Ancestor 2AB</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Ancestor 2B</a>
                        <ul>
                            <li>
                                <a href="#">Ancestor 2BA</a>
                            </li>
                            <li>
                                <a href="#">Ancestor 2BB</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>            
</ul> 
```

**CSS**

```
ul.tree li
{
    display: block;
    float: left;
    clear: left;
    position:relative;
    white-space:nowrap;
    list-style: none;
    height: 1em;
    padding-right: 1em;
}

ul.tree li:after {
    content: '';
    position: absolute;
    border-right: 1px solid #000;
    right: .5em;
}

ul.tree a {
   display: block;
   background-color:#CCC;
   font-size: .8em;
   position: relative;
}

ul.tree a:before,
ul.tree a:after {
   content: '';
   position: absolute;
   border-top: 1px solid #000;
   top: .6em;
   width: .6em;    
}

ul.tree a:before {
   right: 100%;
}

ul.tree li > ul
{
    margin:0;
    padding:0;
    position:absolute;
    left:100%;
}

ul.anscestors-3 {
    height: 15em; /*3 for child + 2*1 + 2*2 + 2*3 */
}

ul.anscestors-3 > li {
    margin-top: 7em;
}

ul.anscestors-3 > li > a:before {
    display: none;
}

ul.anscestors-3 > li:after {
    height: 8em;
    top: -3.5em;
}

ul.anscestors-3 anscestors-3 > li > ul > li:first-child {
    margin-top: -5em;
}
ul.anscestors-3 > li > ul > li:last-child {
    margin-top: 3em;
}

ul.anscestors-3 > li > ul > li:after {
    height: 4em;
    top: -1.5em;
}

ul.anscestors-3 > li > ul > li > ul > li:first-child {
    margin-top: -3em;
}
ul.anscestors-3 > li > ul > li > ul > li:last-child {
    margin-top: 1em;
}
ul.anscestors-3 > li > ul > li > ul > li:after {
    height: 2em;
    top: -.5em;
}

ul.anscestors-3 > li > ul > li > ul > li > ul > li:first-child{
    margin-top: -2em;
}
ul.anscestors-3 > li > ul > li > ul > li > ul > li:last-child {
    margin-top: 0em;
}
ul.anscestors-3 > li > ul > li > ul > li > ul > li > a:after {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T10:26:08.860

如果你愿意，你可以使用一张桌子来做你想做的事。

```
<table border=1>
<tr >
   <td rowspan=3>
      test
   </td>
</tr>

<tr>
    <td >test1</td>

</tr>

<tr>
    <td >test2</td>

</tr>
</table> 
```

[你可以在这个Jsfiddle](http://jsfiddle.net/M2r7D/1/)中看到 4 代的结果

# php - Zend $db->quote 不编码特殊字符

> ID：13485597
> 
> 赞同：0
> 
> 时间：2012-11-21T02:48:12.693
> 
> 标签：php, zend-framework, zend-db

我正在尝试将 Zend 的**插入**与以下字符串一起使用：

```
Almoço 
```

无论我是否使用zend的**quoteInto**函数，字符串都被插入到数据库中：

```
AlmoÃ§o 
```

如何修复它以使我向数据库写入/读取/从数据库读取的字符串与原始字符串相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:20:49.257

`ç`您应该指定在其字符集中具有字符的正确编码（用于 db 列和连接） 。

在这种情况下，大概是`UTF-8`

# php - PHP/MySql 更新将不起作用

> ID：13485606
> 
> 赞同：0
> 
> 时间：2012-11-21T02:50:08.677
> 
> 标签：php, html, mysql, database, phpmyadmin

我创建了 2 页

```
update.php
edit.php 
```

我们从 edit.php 开始，所以这里是 edit.php 的脚本

```
<?php
$id = $_SESSION["id"];
$username = $_POST["username"];
$fname = $_POST["fname"];
$password = $_POST["password"];
$email = $_POST["email"];

mysql_connect('mysql13.000webhost.com', 'a2670376_Users', 'Password') or     die(mysql_error());
echo "MySQL Connection Established! <br>";

mysql_select_db("a2670376_Pass") or die(mysql_error());
echo "Database Found! <br>";

$query = "UPDATE members SET username = '$username', fname = '$fname', 
password = '$password' WHERE id = '$id'";

$res = mysql_query($query);

if ($res)
echo "<p>Record Updated<p>";
else
echo "Problem updating record. MySQL Error: " . mysql_error();
?>

<form action="update.php" method="post">
<input type="hidden" name="id" value="<?=$id;?>">
ScreenName:<br> <input type='text' name='username' id='username' maxlength='25'   style='width:247px' name="username" value="<?=$username;?>"/><br>
FullName:<br> <input type='text' name='fname' id='fname' maxlength='20' style='width:248px'     name="ud_img" value="<?=$fname;?>"/><br>
Email:<br> <input type='text' name='email' id='email' maxlength='50' style='width:250px'    name="ud_img" value="<?=$email;?>"/><br>
Password:<br> <input type='text' name='password' id='password' maxlength='25'     style='width:251px' value="<?=$password;?>"/><br>
<input type="Submit">
</form> 
```

现在这是我遇到主要问题的 update.php 页面

```
<?php
session_start();
mysql_connect('mysql13.000webhost.com', 'a2670376_Users', 'Password') or   die(mysql_error());
mysql_select_db("a2670376_Pass") or die(mysql_error());

$id = (int)$_SESSION["id"];

$username = mysql_real_escape_string($_POST["username"]);
$fname = mysql_real_escape_string($_POST["fname"]);
$email = mysql_real_escape_string($_POST["email"]);
$password = mysql_real_escape_string($_POST["password"]);

$query="UPDATE members
SET username = '$username', fname = '$fname', email = '$email', password = '$password'
WHERE id='$id'";

mysql_query($query)or die(mysql_error());
if(mysql_affected_rows()>=1){
echo "<p>($id) Record Updated<p>";
}else{
echo "<p>($id) Not Updated<p>";
}
?> 
```

现在在edit.php上，我填写表格以编辑帐户“test”，同时我现在登录它，一旦填写表格，我点击|提交！| 按钮，它需要我 update.php 并返回这个

```
(0) Not Updated  

(0) <= id of user logged in

Not Updated <= MySql Error from  

mysql_query($query)or die(mysql_error());
if(mysql_affected_rows()>=1){ 
```

我希望它更新登录的用户，如果我在这个脚本中没有记错的话，它会说

```
 $id = (int)$_SESSION["id"]; 
```

女巫用登录者的 id 更新用户

但它没有更新它的说法，即没有表受到影响

如果它有助于继承我的 MySql 数据库图片，只需单击此处 [http://i50.tinypic.com/21juqfq.png](http://i50.tinypic.com/21juqfq.png)

即使

```
session_start(); 
```

它不会工作返回与以前相同的薄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T02:53:22.633

看来您尚未开始会话，因此`$_SESSION['id']`未设置。

```
session_start(); 
```

而且，一如既往不要使用 mysql_* 函数，那个时候已经过去了。使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:56:22.843

看来您的会话可能会超时，或者您甚至根本没有对其进行初始化。

从你的输出它显示 id 是 0 所以有你的问题

# java - 我应该在 for-each 循环中在哪里初始化数组？

> ID：13485610
> 
> 赞同：3
> 
> 时间：2012-11-21T02:50:38.190
> 
> 标签：java, loops, foreach

以下是否会造成不必要的内存使用

```
 String[] words = text.split(" ");
    for (String s : words)
    {...} 
```

`text.split(" ")`或者每次循环重复时都会进行以下调用

```
 for (String s : text.split(" "))
    {...} 
```

哪种方式更可取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T02:54:22.903

编写循环的每种方式都有优点：

*   第一种方式更易于调试：您可以在`for`, 上设置断点并检查`words`
*   第二种方法避免将名称`words`引入命名空间，因此您可以在其他地方使用该名称。

就性能和可读性而言，两种方式都一样好：`split`将在循环开始之前调用一次，因此使用第二个代码片段不会对性能或内存使用造成影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:01:12.177

因为，我认为在性能方面没有区别：

```
String[] words = text.split(" ");
for (String s : words)
{...} 
```

应该使用，因为您仍然可以使用生成的单词`text.split(" ")`进行进一步的数据操作。在第二种方法中，您只能将单词放在循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:05:26.173

在下面的代码中，getList() 只被调用一次。所以我认为你问的两种方式在性能方面没有差异。

```
class Test {

    static int[] list = {1,2,3,4,5};

    static int[] getList() {
        System.out.println("getList executed");
        return list;
    }

    public static void main(String[] args) {
        for(int n: getList()) {
            System.out.println("n = "+n);
        }
    }
} 
```

输出：

```
getList executed
n = 1
n = 2
n = 3
n = 4
n = 5 
```

# c++ - 未找到 Windows7 pthread.h

> ID：13485613
> 
> 赞同：0
> 
> 时间：2012-11-21T02:50:48.660
> 
> 标签：c++, windows, cmake, pthreads

我正在尝试使用 cmake 在 Windows 中编译 libaws (http://sourceforge.net/projects/libaws/) 库。我已经包含了 openssl、libxml、libcurl，我正在使用这个命令行。

```
C:\libaws>cmake -G "Visual Studio 10" -DCURL_LIBRARY="C:\tools\curl-7.28.1\lib" -DCURL_INCLUDE_DIR="C:\tools\curl-7.28.1\include" -DLIBXML2_LIBRARIES="C:\tools\libxml22.7.8.win32\lib" -DLIBXML2_INCLUDE_DIR="C:\tools\libxml2-2.7.8.win32\include" -DPTHREAD_INCLUDE_DIR="C:\tools\pthread\include"  ..\tools\libaws-0.9.2
-- 
```

它抛出以下错误：

```
-- Check for working C compiler using: Visual Studio 10
-- Check for working C compiler using: Visual Studio 10 -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler using: Visual Studio 10
-- Check for working CXX compiler using: Visual Studio 10 -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Found CURL: C:/tools/curl-7.28.1/lib (found version "7.28.1")
-- Found OpenSSL: optimized;C:/openssl/lib/ssleay32.lib;debug;C:/openssl/lib/ssleay32.lib;optimized;C:/openssl/lib/libeay32.lib;debug;C:/openssl/lib/libeay32.lib (found version "1.0.1c")
-- Found LibXml2: C:/tools/libxml2-2.7.8.win32/lib (found version "2.7.8")
-- Looking for include file pthread.h
-- Looking for include file pthread.h - not found. 
```

CMakeLists.txt:78 (MESSAGE) 处的 CMake 错误：找不到 pthread 开发标头

我在 C:\tools\pthread\include 中包含了 ptherad.h、semaphore.h 等，并将其作为命令行标志：-DPTHREAD_INCLUDE_DIR="C:\tools\pthread\include"。在我的 CMakeLists.txt 中，我添加了

```
INCLUDE_DIRECTORIES(${PTHREAD_INCLUDE_DIR}) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T03:02:23.233

~~Visual Studio 不附带“pthread”实现。我想你需要使用另一个编译器，比如 MinGW。~~

@jens-a-koch 是对的：我的回答不应该被接受！请“不接受”，以便我将其删除。

我相信您的 CMake 查找模块可能没有使用 PTHREAD_INCLUDE_DIR 定义（类似于@ drescherjm 所说的）。

# c# - 使用 webdriver PageFactory 选择特定页面

> ID：13485615
> 
> 赞同：1
> 
> 时间：2012-11-21T02:51:12.653
> 
> 标签：c#, webdriver, pageobjects

我有一个网络项目，单击按钮导航到另一个页面。根据服务器中的数据，新页面可以是三个可能页面之一。（其中 2 个页面的 url 可能相同）

我有三个使用 PageObject 模型表示每个页面上的预期元素的类。

实际找到实际加载的页面的最佳方法是什么？是否有一种 OR 类型的等待，我可以等待三个独特的元素并获得实际加载的那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T13:38:55.537

我有一个类似的问题，我需要检测登录是否是针对新用户的（登录页面然后转到条款和条件页面，而不是直接转到主页）。

最初我只是等待然后测试第二页，但这只是一种痛苦，所以我想出了这个。

用这个测试结果：

```
var whichScreen = waitForEitherElementText(By.CssSelector(HeaderCssUsing), "HOME SCREEN", "home", terms.getHeaderLocator(), terms.headerText, "terms", driver, MAX_STALE_RETRIES);

        if(whichScreen.Item1 && whichScreen.Item2 == "terms")
        {
            terms.aggreeToTerms();
        } 
```

这个调用的方法是：

```
 protected Tuple<bool, string> waitForEitherElementText(By locator1, string expectedText1, string return1Ident,
        By locator2, string expectedText2, string return2Ident, IWebDriver driver, int retries)
    {
        var retryCount = 0;
        string returnText = "";
        WebDriverWait explicitWait = new WebDriverWait(driver, TimeSpan.FromSeconds(globalWaitTime));
        driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(0.5));
        while (retryCount < retries)
        {
            try
            {
                explicitWait.Until<bool>((d) =>
                {
                    try
                    {
                        if (Equals(d.FindElement(locator1).Text, expectedText1)) { returnText = return1Ident; };
                    }
                    catch (NoSuchElementException)
                    {
                        if (Equals(d.FindElement(locator2).Text, expectedText2)) { returnText = return2Ident; };
                    }
                    return (returnText != "");
                });
                return Tuple.Create(true, returnText);
            }
            catch (StaleElementReferenceException e)
            {
                Console.Out.WriteLine(DateTime.UtcNow.ToLocalTime().ToString() +
                    ":>>> -" + locator1.ToString() + " OR " + locator2.ToString() + "- <<< - " +
                    this.GetType().FullName + "." + System.Reflection.MethodBase.GetCurrentMethod().Name +
                    " : " + e.Message);
                retryCount++;
            }
        }
        return Tuple.Create(false,"");
    } 
```

显式等待直到使用布尔值，因此将循环整个等待时间（我有一个非常慢的测试服务器，所以我将其设置为 60 秒）。隐式等待设置为半秒，因此元素测试将每半秒尝试一次并循环直到返回 true 或失败。我使用元组，以便我可以检测我在哪个屏幕上，在这种情况下同意条款和条件，然后让我回到我的正常页面路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:04:58.133

是的，可以检查唯一元素（标识页面）的存在，然后在框架中返回相应的页面。

但是，测试应该知道它接下来期望的页面，并且应该假设正确的页面已经加载并执行进一步的操作/断言。您甚至可以在此处放置一个断言来验证是否已加载正确的页面。如果加载了不同的页面，则测试最终会失败，因为断言会失败。这种方式测试变得更具可读性并描述了应用程序的流程。

此外，始终建议为测试预先设置测试数据。通过这种方式，您将知道服务器上有哪些数据可用，并且测试将知道将呈现哪个页面。

# jquery - JQuery JCrop Image MVC 4 Razor 失败

> ID：13485616
> 
> 赞同：0
> 
> 时间：2012-11-21T02:51:30.367
> 
> 标签：jquery, asp.net-mvc-4, razor, crop, jcrop

我正在尝试为我的 MVC 应用程序实现图像裁剪功能。

我正在关注本教程：[http ://www.askamoeba.com/Opensource/Opensourcedetail/132/Crop-Resize-Upload-Images-in-C-MVC3-MVC4-using-Jquery-Razor](http://www.askamoeba.com/Opensource/Opensourcedetail/132/Crop-Resize-Upload-Images-in-C-MVC3-MVC4-using-Jquery-Razor)

我正在使用这个库：[http ://deepliquid.com/content/Jcrop.html](http://deepliquid.com/content/Jcrop.html)

我是使用 MVC 和 Razor 的 JQuery 新手。

由于某种原因，这个 JQuery 甚至没有注册：

```
@{
    ViewBag.Title = "Avatar Editor Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model SimsTemplate.Models.ViewModels.AvatarEditorModel

<script type="text/javascript">

    $(function() {
     jQuery('#avatarImageEditor').Jcrop({
        onChange: showPreview,
        onSelect: showPreview,
        setSelect: [@Model.Top, @Model.Left, @Model.Right, @Model.Bottom],
        aspectRatio: 1
    });
 });

function showPreview(coords)  {
     if (parseInt(coords.w) > 0)  {
         $('#Top').val(coords.y);
         $('#Left').val(coords.x);
         $('#Bottom').val(coords.y2);
         $('#Right').val(coords.x2);

         var width = @Model.Width;
         var height = @Model.Height;
         var rx = 100 / coords.w;
         var ry = 100 / coords.h;

         jQuery('#preview').css({
             width: Math.round(rx * width) + 'px',
             height: Math.round(ry * height) + 'px',
             marginLeft: '-' + Math.round(rx * coords.x) + 'px',
             marginTop: '-' + Math.round(ry * coords.y) + 'px'
         });
     }
}

</script>

 <div id="cropContainer">

     <div id="cropPreview">
     Preview:
        <img src="@Model.Avatar.ImageUrl" id="preview" alt="" />
    </div>

 <div id="cropDisplay">
 Display:
     <img src="@Model.Avatar.ImageUrl" id="avatarImageEditor" alt="" />
</div>

<input id="Top" name="Top" type ="text"/>
<input id="Bottom" name="Top" type ="text"/>
<input id="Left" name="Top" type ="text"/>
<input id="Right" name="Top" type ="text"/>

</div>

<div id="mainform">

@using (Html.BeginForm("Edit", "Avatar", FormMethod.Post))
{
    @Html.DisplayFor(x => x.Avatar.ImageUrl)         
    @Html.HiddenFor(x => x.Left)
    @Html.HiddenFor(x => x.Right)
    @Html.HiddenFor(x => x.Top)
    @Html.HiddenFor(x => x.Bottom)
    @Html.HiddenFor(x => x.Avatar.ImageUrl)
    <input type='submit' name='action' value='Crop' />
}
</div> 
```

我正确设置了视图模型和控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:24:34.590

你必须

关闭（div id="mainform"）

添加：在编辑视图中

```
@{
    @Scripts.Render("~/bundles/jquery")
    <script src="@Url.Content("~/Scripts/JCrop/jquery.Jcrop.js")" type="text/javascript"></script>
    <link rel="stylesheet" href="@Url.Content("~/Content/JCrop/jquery.Jcrop.css")" type="text/css" />
} 
```

# ios - 使 UICollectionView 可缩放？

> ID：13485617
> 
> 赞同：13
> 
> 时间：2012-11-21T02:51:53.743
> 
> 标签：ios, ios6, uicollectionview

有没有什么方法可以制作`UICollectionView` `zoomable`，即当你捏的时候，所有的单元格都可以放大和缩小。
我可以`UIScrollView`通过返回唯一`subview`的`UIScrollView`from`delegate`方法 来实现这一点

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

既然`UICollectionView`是那种`UIScrollView`，有没有办法或解决办法来实现这个？是否`UICollectionView`有一个包含所有单元格的直接子视图？
谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T14:38:05.510

我认为您所要求的内容与标题为**[Advanced Collection Views and Building Custom Layouts](https://www.youtube.com/watch?v=8vB2TMS2uhE)**`WWDC1012`的视频中的内容相似（演示从 20:20 开始）。

您基本上必须添加`pinchGesture`到 you `UICollectionView`，然后将`pinch properties`(scale, center) 传递给`UICollectionViewLayout`(这是 a `subclass`of `UICollectionViewFlowLayout`)，然后您的布局将在所需的单元格上执行`transformations`所需的 to `zoom`。

# c# - 无论值如何，可空的布尔值一直传递给控制器 null

> ID：13485621
> 
> 赞同：0
> 
> 时间：2012-11-21T02:52:38.907
> 
> 标签：c#, asp.net-mvc-3

我正在尝试将一个可为空的布尔值传递给我的控制器。但是当我将 bool 值从我的视图传递到控制器时，它一直被传递为 null，而不管它在我的视图中的值如何。

这是我的看法：

```
@model Cars.Models.Car

@using (Html.BeginForm("Index", "Home", FormMethod.Post,
new { id = "CategoryFormID"})) {
    <label>Convertible:</label>
    <input type="checkbox" id="ConvertibleID" name="convertible"/>
    <button type="submit" name="submit" value="search" id="SubmitID">Search</button>
} 
```

我的控制器：

```
[HttpPost]
public ActionResult Index(bool? convertible){
    var cars = from d in db.Car
               select d;

    if (convertible.HasValue)
        {
            cars = cars.Where(x => x.Convertible == convertible);
        }

    return View("SearchResult", cars);
} 
```

我还有其他字段，例如下拉列表和文本字段，但它们被完美传递。任何帮助将非常感激。

更新：感谢您的快速回复。但是，我确实尝试按照你们的建议给它一个 value="True" 。现在只有 2 个选项：null 和 true。但我的意图是使用可为空的 bool 来提供三个选项：null（当用户不触摸复选框时）、true（选中）和 false（未选中）。我知道这听起来既不聪明也不愚蠢，但我只是想弄清楚可为空的 bool 是如何工作的，以及在 C# 中使用这样的东西的目的是什么（我是 C# 新手）。我想知道是否可以仅使用复选框而不使用下拉列表或单选按钮来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T02:54:40.380

1 在您的复选框中给出一个值

```
<input type="checkbox" value="True" id="ConvertibleID" name="convertible"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:57:24.613

也许你可以从请求中获取

```
Request.Form["convertible"] 
```

# python - matplotlib 中的 R 样式数据轴缓冲区

> ID：13485623
> 
> 赞同：7
> 
> 时间：2012-11-21T02:52:43.553
> 
> 标签：python, r, matplotlib, plot

R 绘图会自动设置 x 和 y 限制，以便在数据和轴之间放置一些空间。我想知道 matplotlib 是否有办法自动执行相同的操作。如果没有，对于 R 如何设置其轴限制，是否有一个好的公式或“经验法则”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T06:57:17.743

在 matplotlib 中，您可以通过设置[`margins`](http://matplotlib.org/api/axes_api.html?highlight=xlim#matplotlib.axes.Axes.margins)

```
import matplotlib.pyplot as plt 

fig, ax = plt.subplots()
ax.margins(0.04)
data = range(1, 11) 
ax.plot(data, 'wo') 
plt.savefig('margins.png') 
```

![边距](../Images/ec6f8e5b393642b4208157fe3d030678.png)

但是，似乎没有 rc 参数可以自动获取它。

**2013 年 4 月更新**

现在可以在 matplotlib [master](https://github.com/matplotlib/matplotlib/pull/1908)中为边距添加 rc 参数 （感谢@tcaswell）。所以它应该适用于下一个 matplotlib 版本（当前版本是 1.2.1）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-21T03:08:57.417

查看`?par`参数`xaxs`：

> 用于 x 轴的轴间隔计算样式。可能的值是“r”、“i”、“e”、“s”、“d”。样式通常由数据范围或 xlim（如果给定）控制。
> **样式“r”（常规）首先在每一端将数据范围扩展 4%，然后找到一个带有漂亮标签且适合扩展范围的轴。**

因此，如果我们尝试一下：

```
par(xaxs="r")       #The default  
plot(1:10, 1:10) 
```

![在此处输入图像描述](../Images/8af888c807436f72964d52d1abd214e6.png)

我们实际上可以证明它是每边范围的 +/- 4%：

```
abline(v=1-(diff(range(1:10)))*0.04, col="red")
abline(v=10+(diff(range(1:10)))*0.04, col="red") 
```

![在此处输入图像描述](../Images/3622546e808d0746b83802f738e08299.png)

# android - Virtualbox API CopyTo 失败 (C/C++)

> ID：13485626
> 
> 赞同：2
> 
> 时间：2012-11-21T02:53:11.187
> 
> 标签：android, c, linux, virtualbox

我想通过 Virtualbox API 将文件（time.txt）从主机（ubuntu12.04-64bit）复制到来宾（android 4.0.3）。而virtualbox是4.2.4。正如您在下面看到的 C/C++ 代码一样，“一切顺利”。已打印，但我找不到“/data/local/tmp/time.txt”。谢谢你的帮助！

```
rc = guest->CreateSession(NS_LITERAL_STRING("testUsr").get(),
                          NS_LITERAL_STRING("testPWD").get(),
                          NS_LITERAL_STRING("android").get(),
                          NS_LITERAL_STRING("sessionName").get(),
                          &guestSession);
if (NS_FAILED(rc)) {
    printf("fail to CreateSession ! rc = 0x%x\n", rc);
    return -1;
}
rc = guestSession->CopyTo(NS_LITERAL_STRING("/home/hat/time.txt").get(),
                          NS_LITERAL_STRING("/data/local/tmp/time.txt").get(),
                          1, &flag, &sessionProgress);
if (NS_FAILED(rc)) {
    printf("fail to CopyTo ! rc = 0x%x\n", rc);
    return -1;
} 
```

>

```
sessionProgress->WaitForCompletion(-1);
printf("all goes well.\n"); 
```

# ruby - 从哈希中删除密钥的非破坏性方法

> ID：13485630
> 
> 赞同：8
> 
> 时间：2012-11-21T02:53:28.073
> 
> 标签：ruby, hash, side-effects

是否有从哈希中删除键值对的非破坏性方法？

例如，如果你做了

```
original_hash = {:foo => :bar}
new_hash = original_hash
new_hash = new_hash.reject{|key, _| key == :foo} 
```

或者

```
original_hash = {:foo => :bar}
new_hash = original_hash
new_hash = new_hash.dup
new_hash.delete(:foo) 
```

then`original_hash`没有改变，`new_hash`也改变了，但它们有点冗长。但是，如果你这样做了

```
original_hash = {:foo => :bar}
new_hash = original_hash
new_hash.delete(:foo) 
```

然后`original_hash`改变了，这不是我想要的。

有没有一种方法可以满足我的要求？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T03:08:04.893

是的，你想要`reject`：

```
new_hash = original_hash.reject{|key, _| key == :foo} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T03:09:39.363

ActiveSupport 提供了一个哈希扩展：[Hash#except](http://rubydoc.info/docs/rails/2.3.8/ActiveSupport/CoreExtensions/Hash/Except)。它允许您在不修改原始键的情况下返回除指定键之外的新哈希。

假设您已经安装了 active_support gem：

```
ruby-1.9.3> require 'active_support/core_ext/hash/except.rb'
 => true
 ruby-1.9.3> a = {x: 2, y: 1, z: 3}
 => {:x=>2, :y=>1, :z=>3} 
ruby-1.9.3> b = a.except(:x)
 => {:y=>1, :z=>3} 
ruby-1.9.3> c = a.except(:x, :y)
 => {:z=>3} 
ruby-1.9.3> a
 => {:x=>2, :y=>1, :z=>3} 
ruby-1.9.3> b
 => {:y=>1, :z=>3} 
ruby-1.9.3> c
 => {:z=>3} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:02:11.097

问题是 new_hash 是一个引用，除非您明确告诉 Ruby 复制该对象。您使用 dup 走在正确的轨道上，我唯一推荐的就是这样做

```
new_hash = original_hash.dup 
```

因为我认为你在做什么更明确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:03:42.793

如何链接 dup 以使其不那么冗长？

```
new_hash = original_hash.dup.delete_if{|key, _| key == :foo} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T05:20:24.817

```
original_hash.clone.tap {|h| h.delete key} 
```

`tap`可以说没有声明一个新变量那么笨重，主要是因为它在同一行。

`clone`我认为，它比 更明确地是一个平面副本`dup`，尽管当然对于哈希来说它几乎没有什么区别。

# java - 我不确定如何修复堆栈溢出错误

> ID：13485633
> 
> 赞同：1
> 
> 时间：2012-11-21T02:53:39.837
> 
> 标签：java, stack-overflow

我收到一个错误：

```
Exception in thread "main" java.lang.StackOverflowError
    at CreateCardDeck.<init>(CreateCardDeck.java:6)
    at CardStack.<init>(CardStack.java:7)
    at CreateCardDeck.<init>(CreateCardDeck.java:8)
    at CardStack.<init>(CardStack.java:7)
    at CreateCardDeck.<init>(CreateCardDeck.java:8)
    ...
    ...
    ...
    at CardStack.<init>(CardStack.java:7)
    at CreateCardDeck.<init>(CreateCardDeck.java:8) 
```

但我不明白为什么会有错误。在我的代码中，我指定了卡片数量等。那么这里有什么问题呢？

```
public class CreateCardDeck
{
    int deckSize = 52;
    CardStack cardStack;

    CreateCardDeck()
    {
        cardStack = new CardStack(deckSize); --------------- problem here -----
    }
} 
```

和

```
class CardStack extends CreateCardDeck
{
    public CardStack(int s) ------------ problem here --------------
    {
        maxSize = s;
        stackArray = new Card[maxSize];
        top = -1;
    }
......
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T02:55:41.063

您通过 CardStack 扩展 CreateCardStack 无意中使用了递归。不要在这里使用继承。除了导致您的 StackOverflowError 错误之外，这完全是错误的。CardStack*不是*CreateCardStack 的更专业版本，因此不应扩展它。事实上，CardStack 根本不应该知道 CreateCardStack。

您的递归和 SO 错误：

您的 CardStack 构造函数将默认调用 super 的构造函数，该构造函数创建另一个 CardStack 对象，其构造函数默认调用 super 的构造函数，该构造函数创建另一个 CardStack 对象，其构造函数默认调用 super 的构造函数，该构造函数创建另一个 CardStack 对象，其构造函数将由默认调用 super 的构造函数，该构造函数创建另一个 CardStack 对象，其构造函数默认调用 super 的构造函数，该构造函数创建另一个 CardStack 对象，其构造函数.....几乎无限，直到内存耗尽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:02:41.800

CardStack 继承自 CreateCardDeck。CreateCardDeck 的构造函数实例化了一个 CardStack，这会导致 CreateCardDeck 的构造函数被再次调用，以此类推。

我建议重新排列和重新设计您的代码。CreateCardDeck 看起来像一个方法的名称（因为它以动词开头）。也许你想要的实际上是 CardStack 中一个名为 createCardDeck 的*静态*方法。

# javascript - 调试自定义 Javascript MVC 项目

> ID：13485644
> 
> 赞同：0
> 
> 时间：2012-11-21T02:54:42.550
> 
> 标签：javascript, debugging, javascriptmvc

我有这个庞大的项目，它是在自定义 Javascript MVC 框架样式中完成的。每个视图都是通过 Javascript 的事件触发的。这是我第一次处理这样的应用程序。特别是我热衷于了解我应该如何调试这样的应用程序。

# c# - C# 与 Asp.net MySQL 与 OBDC 使登录和注册不工作问题

> ID：13485645
> 
> 赞同：-1
> 
> 时间：2012-11-21T02:54:43.923
> 
> 标签：c#, asp.net, mysql, login, registration

如果有人可以帮助我解决问题，我将不胜感激：使用 OBDC 在 C# for MySql 中注册页面

我不能使用任何内置的 asp.net 功能。

我是为了上课。虽然我知道还有其他可能更好的方法来制作连接字符串，但这就是讲师的做法。我创建了一个名为 User 的类，并且正在尝试制作注册页面。尚未在登录页面上开始，但需要使用会话 ID 进行登录，并在登录和注册页面上输入一个条目，如果用户登录或未登录，则该条目将显示在该页面上。

所以对于初学者来说，我的注册页面不断收到错误`"NewRegis.create()" line 23.`

它还说：

```
c:\Users\Lau\Documents\SQL Class\Project_homework3\App_Code\User.cs(23,34): error CS1002: ; expected
        Line 21:                 NewRegis.email = email.Text;
        Line 22:                 NewRegis.password = password.Text;
        Line 23:                 NewRegis.create()
        Line 24:             }
        Line 25: 
```

所以这里是注册aspx文件的代码和隐藏文件的代码.....

这是registration.aspx文件的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="registration.aspx.cs" Inherits="registration.NewRegis" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
   <head runat="server">
   <title></title>
   </head>
        <body>
            <div>
            <div>
            <h1>Registration Page</h1> 
            <p>To register, please enter the following information and then submit.</p>
            </div>
            <br />
            <br />
            <br />
            <div>
            <form id="form1" runat="server">
            <asp:Label ID="EmailLab" runat="server" Text="Email Address (will be login)" 
                Value=""></asp:Label>
            <br />
            <asp:TextBox ID="email" runat="server" Width="205px"></asp:TextBox>
            <br />
            <br />
            <asp:Label ID="FirstName" runat="server" Text="First Name"></asp:Label>
            <br />
            <asp:TextBox ID="first_name" runat="server" Width="205px"></asp:TextBox>
            <br />
            <br />
            <asp:Label ID="LastNameLab" runat="server" Text="Last Name"></asp:Label>
            <br />
            <asp:TextBox ID="last_name" runat="server" Width="205px"></asp:TextBox>
            <br />
            <br />
            <asp:Label ID="passLab" runat="server" 
                Text="Password (Six Characters.)"></asp:Label>
            <br />
            <asp:TextBox ID="password" runat="server" Width="205px"></asp:TextBox>
            <br />
            <br />
            <br />

<asp:Button ID="ButtonSubmit" OnClick="submit" PostBackUrl="~/registration.aspx" Text="Submit" runat="server" />

<asp:RequiredFieldValidator ID="ReqFieldValFirst" ControlToValidate="first_name" Text="First name is required!" runat="server" />  

<asp:RequiredFieldValidator ID="ReqFieldValLast" ControlToValidate="last_name" Text="Last name is required!" runat="server" /> 

<asp:RequiredFieldValidator ID="ReqFieldValEmail" ControlToValidate="email" Text="Email is required!" runat="server" /> 

<asp:RequiredFieldValidator ID="ReqFieldValPass" ControlToValidate="password" Text="Password is required!" runat="server" /> 

<br />
<br />
<br />

        </form>
     </div>
   </div>
 </body>
</html> 
```

* * *

这是 NewRegis.create 出错的代码隐藏文件的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace registration
{
    public partial class NewRegis : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            if (IsPostBack)
            {

                User NewRegis = new User()
                NewRegis.first_name = first_name.Text;
                NewRegis.last_name = last_name.Text;
                NewRegis.email = email.Text;
                NewRegis.password = password.Text;

                NewRegis.create();

            }
        }
    }
} 
```

* * *

## 我没有包含用户类文件，但如果有帮助，我可以重新加载它。我应以下要求最小化了这篇文章。

对于我所拥有的任何帮助，我将不胜感激。我不知道为什么我一直在 NewRegis.create(); 但是当我将鼠标悬停在 User NewRegis = new User() 中的“用户”上时，提示告诉我`'System.Web.UI.Page.User' is a 'property' but is used like a 'type'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:36:09.963

花了一些时间来完成所有这些;-)

```
error CS1002: ; expected 
```

正如它所说的那样，意味着您忘记了行尾的终止分号。解决这个问题对你来说应该是微不足道的，对吧？

```
System.Web.UI.Page.User is a 'property' but is used like a 'type 
```

编译器将您的用户类解释为与 System.Web.UI.Page.User 属性相同。名称冲突。

您可以通过将 User-class 重命名为其他名称来解决它`MyUser`，而不仅仅是更改命名空间（！）

或者在您的情况下指定类的完整限定名

```
PET.User NewRegis = new PET.User(); 
```

# c - 从 ANSI C 中的字符串中获取特定行

> ID：13485659
> 
> 赞同：0
> 
> 时间：2012-11-21T02:56:26.790
> 
> 标签：c, string, ansi

我需要在 char * 中得到一个特定的行，但我对数组做错了......有什么想法我该怎么做？

函数是这样的：

`char * line get_line(char * code, int num_line);`

我应该把frees和mallocs放在哪里？

谢谢！

对不起......我必须更明确，这就是我解决它的方法（西班牙语）

```
char* obtenerLinea(char*cont, int numLinea)
{
    int32_t lineaActual=0,comienzoLinea=0,caracterActual=0;        // línea
    char *cadena;

    while(lineaActual<numLinea)
    {
        comienzoLinea=caracterActual;
        while(contenido[caracterActual]!='\n')
            {caracterActual++;}
        caracterActual++;
        lineaActual++;
    }
    cadena = sub_string(contenido, comienzoLinea, caracterActual-comienzoLinea);

    return cadena;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:21:11.360

我的简短回答是：把`malloc`函数放在里面，放在`free`外面。

但是你问问题的方式几乎就像是在说“我想举办一个茶会......我应该把桌子和椅子放在哪里？”

我的意思是你的问题可以解释：

1.  您*不想*修改输入字符串（即使您已经说过不做它是允许的`const`）。
2.  您*确实*想修改输入字符串，并希望返回一个指向它的指针。
3.  无论您是否修改输入字符串都没有关系 - 您仍然想从中复制一个字符串。

好吧，事实证明，在上述情况 1 和 3 中，您将调用函数中的一个`malloc`或`strdup`内部。如果`malloc`，您将把字符串数据复制到新内存中。因为`strdup`您必须修改输入字符串以空终止该行。在这些情况下，您将返回一个新分配的指针，调用者在完成后负责释放该指针。请注意，也可以在`strndup`不修改缓冲区的情况下使用。

在数字 2 的情况下，将不会调用`malloc`or`free`因为您只是在修改缓冲区并返回指向其中某个部分的指针。

在所有情况下，我都假设您已经知道在哪里调用`malloc`以及`free`输入缓冲区本身！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:03:38.417

我不是 100% 清楚你的要求，这是你正在寻找的那种功能：

```
char *get_line(char *code,int line) {
    size_t size = strlen(code);

    size_t current_line = 0;
    for(size_t n=0;n<size;n++) {
        if(current_line == line) return code+n;
        if(code[n] == '\n') current_line++;
    }

    return 0;
}

char *data = "line1\nline2\nline3\nline4";

char *line = get_line(data,2); 
```

# mysql - 创建将 UNIX_TIMESTAMP() 插入日志表的触发器

> ID：13485665
> 
> 赞同：1
> 
> 时间：2012-11-21T02:57:42.747
> 
> 标签：mysql, triggers, phpmyadmin, unix-timestamp

嗨，我坚持使用此触发器将值插入我的日志表的语法。使用 phpmyadmin 中的 sql 选项卡，在执行 sql 语句之前出现错误

```
`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 8 ` 
```

这是我在创建触发器时的 sql 语句

```
CREATE TRIGGER after_insert_list  
AFTER INSERT ON list FOR EACH ROW  
BEGIN  
    INSERT INTO log (user_id, action, date_log)  
    VALUES (
        NEW.user_id,  
        NEW.action, 
        UNIX_TIMESTAMP()
    );
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:25:03.493

如下创建触发器：

```
delimiter |
CREATE TRIGGER testref 
BEFORE INSERT ON test1FOR EACH ROW BEGIN
INSERT INTO test2 SET a2 = NEW.a1;
DELETE FROM test3 WHERE a3 = NEW.a1;
UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
END;
|
delimiter ; 
```

# powershell - Foreach 驱动器号数组

> ID：13485666
> 
> 赞同：3
> 
> 时间：2012-11-21T02:57:56.310
> 
> 标签：powershell, powershell-2.0

我正在编写一个脚本来检查逻辑驱动器是 USB 还是 iSCSI 目标。如果是忽略相关的驱动器号。

```
Get-WmiObject win32_logicaldisk -Filter "DriveType='3'" |
where-object{$_.DeviceID -ne $usbletters -and $_.DeviceID -ne $iSCSIletters} | %
{$_.Name} | out-file $kreports\avail.txt 
```

我的问题是，当检测到相同类型的多个驱动器时，它们会被不等于选项简单地忽略。我假设我需要做某种形式的 foreach 循环？

如果有人能指出我正确的方向，那就太好了！

这是完整的脚本。

```
#Variables and Arguments
$kreports = "C:\Kworking\reports"

# Create kworking Reports folder
if (!(Test-Path -path $kreports))
{New-Item $kreports -type directory}

# USB Drive check
$diskdrive = gwmi win32_diskdrive | ?{$_.interfacetype -eq "USB"}
$usbletters = $diskdrive | %{gwmi -Query "ASSOCIATORS OF 
{Win32_DiskDrive.DeviceID=`"$($_.DeviceID.replace('\','\\'))`"} WHERE

AssocClass = Win32_DiskDriveToDiskPartition"} | %{gwmi -Query "ASSOCIATORS

OF {Win32_DiskPartition.DeviceID=`"$($_.DeviceID)`"} WHERE AssocClass =

Win32_LogicalDiskToPartition"} | %{$_.DeviceID}

# iSCSI Drive check
$iSCSIdrive = gwmi win32_diskdrive | ?{$_.model -match "iSCSI"}
$iSCSIletters = $iSCSIdrive | %{gwmi -Query "ASSOCIATORS OF 
{Win32_DiskDrive.DeviceID=`"$($_.DeviceID.replace('\','\\'))`"} WHERE

AssocClass = Win32_DiskDriveToDiskPartition"} | %{gwmi -Query "ASSOCIATORS

OF {Win32_DiskPartition.DeviceID=`"$($_.DeviceID)`"} WHERE AssocClass =

Win32_LogicalDiskToPartition"} | %{$_.DeviceID}

# Disk Information
Get-WmiObject win32_logicaldisk -Filter "DriveType='3'" | where-object{$_.DeviceID -ne
$usbletters -and $_.DeviceID -ne $iSCSIletters} | %{$_.Name} | out-file
$kreports\avail.txt

# Fix Output Line Spacing
$InputFile = "$kreports\avail.txt"
$OutputFile = "$kreports\availdisks.txt"

$Writer = New-Object IO.StreamWriter "$OutputFile"
$Writer.Write( [String]::Join("`r`n", $(Get-Content $InputFile)) )
$Writer.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:51:15.620

问题是`Win32_LogicalDisk`' 的成员`DeviceID`包含驱动器号和冒号。例如，由于值是，`C:`并且您针对 测试是否相等`C`，`where-object`所以 没有找到任何东西。

要么在驱动器号上包含冒号，要么使用 Powershell 方式的正则表达式。

```
$disks = gwmi win32_logicaldisk -Filter "DriveType='3'"
# Select all devices that do not have deviceids a,b,c,k or l, followed by colon
$avail = $disks | ? { $_.DeviceID -notmatch "[abckl]:"}
# Do something with filtered results 
```

# c++ - VC++ HeapAlloc内部函数给出空指针

> ID：13485672
> 
> 赞同：0
> 
> 时间：2012-11-21T02:58:52.073
> 
> 标签：c++, c, visual-c++, malloc, heapalloc

我试图用来`HeapAlloc()`分配一个由`SetupDiGetDeviceRegistryProperty()`.

里面`GetDeviceInformation()`我有：

```
HANDLE hHeap = GetProcessHeap();

while (SetupDiEnumDeviceInfo(DeviceInfoSet, MemberIndex++, DeviceInfoData)) 
{
    DWORD DataT;
    LPTSTR buffer = NULL;
    DWORD buffersize = 0;
    // port of device
    DWORD portnum = 0;

    GetRegistryProperty(DeviceInfoSet, DeviceInfoData, SPDRP_FRIENDLYNAME, 
         &DataT, buffer, &buffersize, &buffersize);

    if (!buffer) 
    {
        cerr << "Null Ptr!" << endl;
        exit(1);
    }
    // Do stuff, uninstall device

    if (buffer) HeapFree(hHeap, NULL, buffer); 

    }
} 
```

在里面`GetRegistryProperty()`我有：

```
void GetRegistryProperty(HDEVINFO DeviceInfoSet, PSP_DEVINFO_DATA DeviceInfoData, 
    DWORD Property, PDWORD DataT, LPTSTR buffer, PDWORD buffersize, PDWORD size)
{

    HANDLE hHeap = GetProcessHeap();

    while (!SetupDiGetDeviceRegistryProperty(
        DeviceInfoSet,
        DeviceInfoData,
        Property, //SPDRP_FRIENDLYNAME or SPDRP_CLASS
        DataT, //&DataT
        (PBYTE)buffer,
        *buffersize,
        size)) //&buffersize
    {
        if (GetLastError() == ERROR_INSUFFICIENT_BUFFER)
        {
            // Change the buffer size.
            if (buffer) HeapFree(hHeap, NULL, buffer); 

            // Double the size to avoid problems on 
            // W2k MBCS systems per KB 888609\. 
            buffer = (LPTSTR)HeapAlloc(hHeap, HEAP_ZERO_MEMORY |
                HEAP_GENERATE_EXCEPTIONS, *buffersize * 2);
        }
        else
        {
            // error handling
            break;
        }
    }
} 
```

`HeapAlloc()`按预期工作（缓冲区被属性填充）直到`GetRegistryProperty()`返回。此时，缓冲区始终为 NULL。这也是预期的吗？如何返回一个 char * 指向一个在创建它的函数生命周期之后存在的数组？我假设我不明白 HeapAlloc() 是如何工作的。

我将它放在单独的函数中的原因是我想`GetRegistryProperty()`用不同的 s 多次调用`DWORD Property`。在我将代码移动到单独的函数之前，它运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:06:51.920

`buffer`通过引用传递（注意LPTSTR **&**）：

```
void GetRegistryProperty(HDEVINFO DeviceInfoSet, PSP_DEVINFO_DATA DeviceInfoData, 
    DWORD Property, PDWORD DataT, LPTSTR& buffer, PDWORD buffersize, PDWORD size) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:09:07.947

您是`buffer`按值传递的，因此在 GetRegistryProperty 中，当您重新分配它时，您只需覆盖 GetRegistryProperty 中的指针副本。

将 GetRegistryProperty 的签名更改为：

```
void GetRegistryProperty(HDEVINFO DeviceInfoSet, PSP_DEVINFO_DATA DeviceInfoData, DWORD Property, PDWORD DataT, LPTSTR& buffer, PDWORD buffersize, PDWORD size) 
```

# protocols - ProtocolBuffers/Thrift 是否适合数据中心之间的通信和消息传递？

> ID：13485677
> 
> 赞同：1
> 
> 时间：2012-11-21T02:59:51.050
> 
> 标签：protocols, soa, thrift

我们目前在多个地理区域拥有数据中心，每个数据中心都托管需要相互通信的不同应用程序和服务。目前我们正在使用 http 进行通信，并且出于性能原因想探索其他协议。可以使用 ProtocolBuffers 或 Thrift 在地理区域之间通过 tcp/ip 进行流量吗？如果是这样，延迟是否会扼杀 ProtocolBuffers 或 Thrift 提供的任何性能提升？还有其他合适的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:13:43.143

我不熟悉 Apache Thrift，但我认为您误解了 Protocol Buffers 的用途。Protocol Buffers 是一种数据序列化格式，很像 JSON 或 XML；它没有指定或实现任何特定的网络传输（您可以将它放在 TCP 或 UDP 上，或者将它保存到磁盘，或者如果您愿意，甚至可以通过 HTTP 传输它）。甚至 Protocol Buffers 的[服务功能](https://developers.google.com/protocol-buffers/docs/proto#services)也只是为您生成接口和存根实现；由开发人员来实现一种来回发送消息的方法。

请参阅[Protocol Buffers 开发人员指南](https://developers.google.com/protocol-buffers/docs/overview)以了解有关 Protocol Buffers 的实际含义以及它如何使您受益的更多信息。在您的情况下（替换基于 HTTP 的协议），Protocol Buffers 可能会减少您现在可能发送的 XML 或 JSON 中固有的一些大小开销，因为它不会在人类可读性上浪费字节。

# html - 如何垂直和水平对齐div中的图像？

> ID：13485682
> 
> 赞同：3
> 
> 时间：2012-11-21T03:00:31.233
> 
> 标签：html, css

> **可能重复：**
> [图像中心垂直和水平对齐](https://stackoverflow.com/questions/5481821/image-center-align-vertically-and-horizontally)

我正在将图像上传到一个 php 文件，这样我就可以将它们调整为某个宽度或高度，无论哪个更小。我正在使用的图像调整器是来自 phpclasses.org 的一个类，它似乎工作得很好。问题是，并非所有图像的大小都相同。有些宽而窄，而有些几乎是方形的。所以这导致所有图像都位于我的 div 顶部而不是中间。我的想法是让 CSS 将图像完美居中，以便查看不同尺寸时看起来不错，但我可以让它们水平居中但不能垂直居中。这是我试图居中的屏幕截图：

![在此处输入图像描述](../Images/f4f52e18230c0b2af4ccb48bf51aaadb.png)

如您所见，枪支在 div 顶部对齐？我不能使用硬编码的图形将其推到中心，因为其他图像会有不同的高度。我需要一些方法来确定图像的大小并从那里计算出来。

这是图像所在的div的代码：

```
#product {
    float:left;
    margin:5px;
    width:200px;
    height:200px;
    border:1px solid #999;
}
#product-image {
    margin:2px auto;
    width:194px;
    height:145px;
    border:1px solid #999;
    text-align:center;
} 
```

谢谢你看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:06:12.890

```
#product
{
    width: 200px;
    height: 200px;
    line-height: 200px;
    text-align: center;
}
#product img
{
    vertical-align: middle;
    max-height: 200px;
    max-width: 200px;
} 
```

Max-Height / Max-Width 用于处理可能太大的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:36:25.413

对于不能使用绝对位置的动态垂直对齐，我建议在所有情况下使用 javascript 进行绝对修复，但您可以使用以下[指南中的几种技术进行垂直对齐](http://www.student.oulu.fi/~laurirai/www/css/middle/)

```
$(document).ready(function(){
    var image = ​$('#product-image')​​​​​​​​​;
    var container = $(image).parent();

    var margin = (container.height() - image.height()) / 2;
    image.css('margin-top', margin); 
}); 
```

使用以下 CSS

```
#product
{
    float:left;
    margin:5px;
    width:200px;
    height:200px;
    border:1px solid #999;
    text-align:center;
}

#product-image
{
    margin:2px auto;
    width:194px;
    height:145px;
    border:1px solid #999;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T05:40:48.050

```
<div id="product">

    <div id="product-Inner">

        <img id="product-image" src="imageURL" />

    <div>

<div> 
```

**样式 css**

```
#product {

    float:left;
    display: table;
    box-sizing: border-box;
    margin:5px;
    width:200px;
    height:200px;
    border:1px solid #999;
    text-align:center;

}

#product-Inner {

    display: table-cell;
    vertical-align: middle;
    text-align:center;
}

#product-image {

    box-sizing: border-box;
    max-height: 100%;
    max-width: 100%;
    border:1px solid #999;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T05:41:09.023

`display:table-cell`您可以通过&轻松获得您想要的结果`vertical-align:middle;`

**CSS**

```
 #parent {
    width:200px;
    height:200px;
    display:table;
    background-color: black;
    float:left;
    margin:5px;
}

#parent-image {
   display:table-cell;
   vertical-align:middle;
   text-align:center;
} 
```

**[演示](http://tinkerbin.com/qCeBpDdI)**

# xcode - 如何在 XCode 上复制粘贴代码而没有不必要的目标操作链接？

> ID：13485688
> 
> 赞同：0
> 
> 时间：2012-11-21T03:01:59.913
> 
> 标签：xcode, storyboard, copy-paste, target-action

当我创建一个新项目并从旧项目中复制粘贴代码时，将添加粘贴方法和旧项目中故事板之间的目标操作链接。

但我不想要旧的操作目标链接。如果我单击方法左侧的目标操作点，它会将我带到旧项目中的情节提要。

到目前为止，我修复它的方法是修改方法的名称，比如“foo”到“foo2”。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:19:34.807

用于`Add Files to <your project>`清除所有不必要的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:08:46.523

您总是可以删除连接并将其重新连接到新的操作目标，或者先将其放入notepad ++之类的东西（没有尝试过，只是一个想法）

# c# - 从另一个没有 GUI 的类从 Windows 窗体应用程序调用计时器滴答事件

> ID：13485693
> 
> 赞同：0
> 
> 时间：2012-11-21T03:02:49.480
> 
> 标签：c#, windows, timer

我正在尝试运行最初在我的 Windows 窗体上运行的计时器滴答事件，当使用线程加载到另一个类时也是如此。我尝试在另一个线程上调用计时器事件，但没有帮助。我应该使用相同的计时器还是为该线程创建一个新的计时器。这是我目前的实现：

```
namespace XT_3_Sample_Application
{
      public partial class Form1 : Form
      {

       Queue<string> receivedDataList = new Queue<string>();

       System.Timers.Timer tmrTcpPolling = new System.Timers.Timer(); 

       public Form1()
       {
        InitializeComponent();
        TM702_G2_Connection_Initialization();

         }

         static void threadcal()
         {
        Class1 c = new Class1();
        c.timer_start();
        c.test("192.168.1.188",9999);

        }

       public string Connection_Connect(string TCP_IP_Address, int TCP_Port_Number)
          {

                if (tcpClient.Connected)
                {
                    Socket_Client = tcpClient.Client;
                    TcpStreamReader_Client = new StreamReader(tcpClient.GetStream(), Encoding.ASCII);
                    tmrTcpPolling.Start();
                    Status = "Connected\r\n";
                }
                else
                {
                    Status = "Cannot Connect\r\n";
                }

        }

       public string Connection_Disconnect()
       {
           tmrTcpPolling.Stop();

          // do something

          return "Disconnected\r\n";
      }

     void TM702_G2_Connection_Initialization()
    {
        tmrTcpPolling.Interval = 1;
        tmrTcpPolling.Elapsed += new ElapsedEventHandler(tmrTcpPolling_Elapsed);
    } 

    #region Timer Event
    void tmrTcpPolling_Elapsed(object sender, ElapsedEventArgs e)
    {
        try
        {
            if (tcpClient.Available > 0)
            {

                receivedDataList.Enqueue(TcpStreamReader_Client.ReadLine());
            }
        }
        catch (Exception)
        {

            //throw;
        }
    }

    private void tmrDisplay_Tick(object sender, EventArgs e)
    {
        Tick();
    }

    public void Tick()
    {
        Console.Write("tick" + Environment.NewLine);
        if (receivedDataList.Count > 0)
        {
            string RAW_Str = receivedDataList.Dequeue();
            //tbxConsoleOutput.AppendText(RAW_Str + Environment.NewLine);
            tbxConsoleOutput.AppendText(Parser_Selection(RAW_Str) + Environment.NewLine);
        }

    }

    #endregion

    private void btnConnect_Click(object sender, EventArgs e)
    {
        tbxConsoleOutput.AppendText(Connection_Connect(tbxTCPIP.Text, Convert.ToInt32(tbxPort.Text, 10)));
        Thread t = new Thread(threadcal);
        t.Start(); 
    }

   }
} 
```

但是计时器滴答事件在应用程序启动但不是在按钮单击时开始 - private void btnConnect_Click(object sender, EventArgs e)。我正在尝试为 Class1 类的测试方法调用一个单独的线程。对于这个线程，我正在尝试使用类似的计时器事件来接收来自服务器的输出。

```
 namespace XT_3_Sample_Application
 {
   class Class1
   {

    TcpClient tcpClient;
    Socket Socket_Client;
    StreamReader TcpStreamReader_Client;    // Read in ASCII
    Queue<string> receivedDataList = new Queue<string>();
    System.Timers.Timer tmrTcpPolling = new System.Timers.Timer();

    void TM702_G2_Connection_Initialization()
    {
        tmrTcpPolling.Interval = 1;
        tmrTcpPolling.Elapsed += new ElapsedEventHandler(tmrTcpPolling_Elapsed);
    } 
    public void test(string TCP_IP_Address, int TCP_Port_Number)
    {
        TM702_G2_Connection_Initialization();

        try
        {
            string Status = "";
            Ping pingSender = new Ping();
            PingOptions options = new PingOptions();

            PingReply reply = pingSender.Send(TCP_IP_Address, timeout, buffer, options);

            if (reply.Status == IPStatus.Success)
            {
                tcpClient = new TcpClient();
                tcpClient.Connect(TCP_IP_Address, TCP_Port_Number);

                if (tcpClient.Connected)
                {
                    Socket_Client = tcpClient.Client;
                    TcpStreamReader_Client = new StreamReader(tcpClient.GetStream(), Encoding.ASCII);
                    tmrTcpPolling.Start();
                    Status = "Connected\r\n";
                }
                else
                {
                    Status = "Cannot Connect\r\n";
                }
            }
            else
            {
                Status = "Ping Fail\r\n";
            }

            MessageBox.Show(TCP_IP_Address + " :" + Status);
        }
        catch (System.Exception ex)
        {
            MessageBox.Show(TCP_IP_Address + " :" +  ex.Message);
        }

        setFilterType();

        setButtonRadioLvl();
        heloCmd();

    }
    public void timer_Start()
    {
    Form1 f = new Form1();
    f.Tick();
    }
   }
} 
```

尝试上述方法时，不会在新线程上触发计时器。对此有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:20:45.230

如果没有任何阻塞代码或循环，您的线程将不会存活很长时间。以下每隔一秒调用一次您的测试方法并且不使用计时器

```
 static void threadcal()
    {
        while (true)
        {
            Thread.Sleep(1000);
            Class1 c = new Class1();
            c.test("192.168.1.188", 9999);
        }
    } 
```

# ruby-on-rails - Rails 多态关联 has_many

> ID：13485697
> 
> 赞同：1
> 
> 时间：2012-11-21T03:03:04.907
> 
> 标签：ruby-on-rails, multiple-inheritance, polymorphic-associations, single-table-inheritance

我想创建一个运动统计网页，我可以在其中存储每个球员的不同运动统计数据。玩家可以拥有来自不同运动的统计数据。

我想这样做的方法是创建一个整体 Stat 模型，其中包含每个 stat 的基本属性，无论运动如何，例如地点、日期、对手等。这样，每项运动都将从*统计*模型 - 例如*FootballStat*和*BasketballStat*。

似乎使用单表继承将被证明是非常低效的，因为每项运动都有非常不同的统计数据。因此，我只找到了另外两个选项：

*   多态关联，和
*   多表继承。

在这种情况下，您认为哪一种会更有效？以及如何实施它？

* * *

这就是我想要做的，也许你可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:33:34.647

多态关联肯定是要走的路。您可以按如下方式实现它。

```
Class Stat 
  belongs_to :sportable, 
  belongs_to :player
end

Class Sport1
  has_many :stats, :as => :sportable
  # various attributes for sport1
end

Class Sport2
  has_many :stats, :as => :sportable
  # various attributes for sport2
end

Class Player
  has_many :stats
end 
```

# uiviewcontroller - 如何使 UIViewController Title 显示在 UINavigationController 的 titleView 上？

> ID：13485699
> 
> 赞同：0
> 
> 时间：2012-11-21T03:03:07.937
> 
> 标签：uiviewcontroller, uinavigationcontroller

我想了想，可能我错了，什么都不做，UINavigationController的titleView默认为UIViewController的title。

我的不是这样，我想知道为什么？

我将故事板中 UIViewController 的标题设置为 @"Nearby"。我确认它确实是 viewDidLoad 中的标题

```
- (void)viewDidLoad
{
    PO(self.title);
    PO(self.navigationController.title); 
```

生产

```
self.title: Nearby
self.navigationController.title: (null) 
```

我想我可以以编程方式强制我的方式并将 titleView 设置为带有我的标题的 UILabel，但我不确定这是否是正确的方法。

我想知道为什么 self.navigationController.title 没有自动设置为 self.title？如果是这样，应该在什么时候设置，在哪里设置？

顺便说一句，我添加了这一行：

```
self.navigationController.title=self.title; 
```

那没有帮助。

更新：更改 NavigationItem 标题有效。但这很尴尬。另外我如何以编程方式更改它？

# video - CUDA：实时视频后处理

> ID：13485700
> 
> 赞同：2
> 
> 时间：2012-11-21T03:03:10.193
> 
> 标签：video, cuda, rendering, real-time, post-processing

我想知道是否有人可以在这里为我指明正确的方向。

假设我有一个采用某种编码（例如 H.264）的视频文件，并且我使用 CUDA 的视频解码库（https://developer.nvidia.com/nvidia-codec-libraries）对该视频进行解码。这会做什么（我想），它会解码视频并在屏幕上播放。到目前为止，一切都很好。

现在，我真正想做的是修改解码库（或编写包装器或类似的东西），以对视频帧执行一些后处理。

例如，假设视频有 1000 帧，我想（实时）为*某些*（由用户指定）帧添加一些自定义效果（例如，渲染 3d 模型---由用户---并将输出覆盖到框架中的某个位置等）。

我想我的问题真的是：

1.  这可能吗？
2.  有谁知道任何可以完成此操作或类似内容的代码示例（或教程、论文、手册等）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:50:35.377

这当然是可能的。CUDA 视频解码库会将视频帧作为 NV12 格式矩阵提供给您，然后您可以随心所欲地使用它。它不会自动将解码的帧显示到屏幕上；你必须自己照顾那部分。如果您希望它实时运行，那么您可能应该研究 CUDA <--> OpenGL 互操作性，因为您可以将 OpenGL 缓冲区、纹理和渲染缓冲区对象映射到 CUDA 的地址空间中，所以如果您将处理后的帧输出到映射对象中，您可以直接显示。我建议查看 CUDA 示例 cudaDecodeGL 或 cudaDecodeD3D9（如果您喜欢 DirectX 而不是 OpenGL）。

当然，得到你提议的实时运行是另一回事......

# entity-framework - 检查导航属性是否为空实体框架

> ID：13485704
> 
> 赞同：1
> 
> 时间：2012-11-21T03:04:14.620
> 
> 标签：entity-framework, entity-framework-4

我有一个包含用户的模型。每个用户都必须有一个人员记录。个人记录可能有也可能没有地址记录。

当我获取当前登录的用户地址时，我目前正在使用以下内容，这对我来说似乎非常混乱。有一个更好的方法吗？

```
public Address GetAddress()
    {
        using (eziTraceEntities db = new eziTraceEntities())
        {
            if (db.Users.Where(u => u.ID == Globals.UserID).FirstOrDefault().Person.Address != null)
                return db.Users.Where(u => u.ID == Globals.UserID).FirstOrDefault().Person.Address;
            else
                return new Address();
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:07:18.723

您可以使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

```
using (eziTraceEntities db = new eziTraceEntities())
    {
        return db.Users.Where(u => u.ID == Globals.UserID).FirstOrDefault().Person.Address ?? new Address();
    } 
```

# javascript - 有没有办法在弹出框外单击时关闭 Twitter Bootstrap 弹出框？

> ID：13485705
> 
> 赞同：1
> 
> 时间：2012-11-21T03:04:21.083
> 
> 标签：javascript, jquery, twitter-bootstrap

> **可能重复：**
> [如何从页面上的任何位置（其他）单击关闭 Twitter Bootstrap 弹出窗口？](https://stackoverflow.com/questions/8947749/how-can-i-close-a-twitter-bootstrap-popover-with-a-click-from-anywhere-else-on)

我希望 Twitter Bootstrap 弹出框**仅**在用户单击弹出框外部时关闭。我不想在弹出框内点击**关闭**弹出框。我已经搜索过，对此的答案是即使单击弹出框的内部也会关闭弹出框。如果可能的话，也请不要推荐 gem，因为我正在寻找代码解决方案。谢谢！

html:

```
<a id="test-button" href="#" class="btn">Popover</a> 
```

javascript/jquery：

```
$('#test-button').popover({content:"stuff", trigger:'click'}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T03:40:06.467

我发现这个问题似乎是重复的，但是最重要的答案对我不起作用。我最终修改了代码，每次切换时添加一个新的单击绑定到 .popover，从而产生了预期的效果。

工作 jsFiddle：http: [//jsfiddle.net/asanger/AFffL/266/](http://jsfiddle.net/asanger/AFffL/266/)

```
var isVisible = false;
var clickedAway = false;

$('.popup-marker').popover({
        html: true,
        trigger: 'manual'
    }).click(function(e) {
        $(this).popover('show');
        clickedAway = false
        isVisible = true
        e.preventDefault()
            $('.popover').bind('click',function() {
                clickedAway = false
                //alert('popover has been clicked!');
            });
    });

$(document).click(function(e) {
  if(isVisible && clickedAway)
  {
    $('.popup-marker').popover('hide')
    isVisible = clickedAway = false
  }
  else
  {
    clickedAway = true
  }
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:14:16.140

### 使用手动触发器：

```
$('.popup-marker').popover({
    html: true,
    trigger: 'manual'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:24:21.103

您可以附加到顶级元素的点击事件。IE

```
$("#main").click(function () {
    $('#mything').popover('hide')
}); 
```

# session-cookies - 如何获得围攻以使用 cookie 进行基准测试和负载测试

> ID：13485706
> 
> 赞同：0
> 
> 时间：2012-11-21T03:04:21.390
> 
> 标签：session-cookies, performance-testing

我已经设置了 siege (v2.70) 来测试一个有登录名的 webapp，然后我有一个大约 180 个 url 的列表来对应用程序的速度进行压力测试。问题是登录 url 返回时 cookie 被忽略。

这是 siege 和应用程序之间网络流量的 tcpdump（box.example.org 已替换为实际 url，这不是问题）

您可以在第一个响应中看到 Set-Cookie，然后在下一个 GET 请求中看不到 cookie。我找到了这个：

[如何使用 --header 选项通过 Siege 发送 cookie？](https://stackoverflow.com/questions/10242914/how-do-i-use-the-header-option-to-send-cookies-with-siege)

但我需要发送的 cookie 取决于登录，我不能硬编码它。[常见问题解答](http://www.joedog.org/siege-faq/h/siege-faq#a18)说它支持它们，但 tcpdump 反对：

```
20:25:48.003094 IP (tos 0x0, ttl 64, id 31699, offset 0, flags [DF], proto TCP (6), length 223)
    192.168.20.34.48923 > 192.168.20.81.80: Flags [P.], seq 2734994720:2734994891, ack 3331849910, win 913, options [nop,nop,TS val 2229194446 ecr 50245070], length 171
E...{.@.@......"...Q...P... ...............
........GET /saml/testlogon/ HTTP/1.1^M
Host: box.example.org^M
Accept: */*^M
Accept-Encoding: gzip^M
User-Agent: JoeDog/1.00 [en] (X11; I; Siege 2.70)^M
Connection: close^M
^M

20:25:48.406571 IP (tos 0x0, ttl 64, id 21369, offset 0, flags [DF], proto TCP (6), length 427)
    192.168.20.81.80 > 192.168.20.34.48923: Flags [P.], seq 1:376, ack 171, win 972, options [nop,nop,TS val 50245160 ecr 2229194446], length 375
E...Sy@.@.<....Q...".P...............*.....
...(....HTTP/1.1 302 FOUND^M
Date: Wed, 21 Nov 2012 02:33:32 GMT^M
Server: Apache/2.2.22 (Ubuntu)^M
Vary: Cookie,Accept-Encoding^M
Set-Cookie: sessionid=233511e6001797ec77f7f3a08683ce97; httponly; Path=/^M
Location: http://box.example.org/viewer/start/^M
Content-Encoding: gzip^M
Content-Length: 20^M
Connection: close^M
Content-Type: text/html; charset=utf-8^M
^M
....................
20:25:49.410684 IP (tos 0x0, ttl 64, id 3041, offset 0, flags [DF], proto TCP (6), length 221)
    192.168.20.34.48924 > 192.168.20.81.80: Flags [P.], seq 1168563186:1168563355, ack 1414846755, win 913, options [nop,nop,TS val 2229194798 ecr 50245422], length 169
E.....@.@..v..."...Q...PE...TT.#...........
........GET /viewer/start/ HTTP/1.1^M
Host: box.example.org^M
Accept: */*^M
Accept-Encoding: gzip^M
User-Agent: JoeDog/1.00 [en] (X11; I; Siege 2.70)^M
Connection: close^M
^M

20:25:49.419109 IP (tos 0x0, ttl 64, id 30222, offset 0, flags [DF], proto TCP (6), length 375)
    192.168.20.81.80 > 192.168.20.34.48924: Flags [P.], seq 1:324, ack 169, win 972, options [nop,nop,TS val 50245424 ecr 2229194798], length 323
E..wv.@.@......Q...".P..TT.#E........*.....
...0....HTTP/1.1 302 FOUND^M
Date: Wed, 21 Nov 2012 02:33:34 GMT^M
Server: Apache/2.2.22 (Ubuntu)^M
Vary: Cookie,Accept-Encoding^M
Location: http://box.example.org/saml/testlogon/?next=/viewer/start/^M
Content-Encoding: gzip^M
Content-Length: 20^M
Connection: close^M
Content-Type: text/html; charset=utf-8^M
^M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:00:47.923

原来问题在于围攻本身。我修复了代码并将其推送到这个 repo

[https://github.com/mark0978/siege](https://github.com/mark0978/siege)

围攻没想到httponly；（没有=），如果过期时间不存在，它也得到了过期错误。最后一个我可以通过在我的应用程序中设置过期时间来修复，但我只是修复了计算。

# c# - 使用批处理文件从命令行运行 CSC.exe

> ID：13485714
> 
> 赞同：0
> 
> 时间：2012-11-21T03:05:04.447
> 
> 标签：c#, csc

我正在使用以下批处理脚本代码来编译 c# 代码，但我看到的是一个黑色窗口 (csc.exe) 闪烁，我看不到创建的 exe 文件。

```
start /wait C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.exe /out:aa.exe Program.cs
start aa.exe
pause 
```

我想在与 Program.cs 相同的位置创建文件 aa.exe

基本上我想要的是动态编译 Program.exe 中的代码并运行它。我是

```
using this following references:  
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Threading;
using System.Net.Mail; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T05:36:16.960

不要忘记在命令中添加引用：

```
/reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\<dotnet_version>\Microsoft.CSharp.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\<dotnet_version>\mscorlib.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\<dotnet_version>\System.Core.dll" /reference:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\<dotnet_version>\System.dll" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:33:00.540

`start`与其使用启动程序，不如考虑`cmd`. 如果您使用`cmd /K`它，它应该在命令运行后保持打开状态，让您有时间检查输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:29:55.267

采用：

```
csc.exe /out:StackBackTraceOrRT_FATAL.exe StackBackTraceOrRT_FATAL.cs 
```

或者你想使用` [CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)？

# c# - 内联存储 XML 文档，还是存储在单独的文件中？

> ID：13485718
> 
> 赞同：2
> 
> 时间：2012-11-21T03:06:05.017
> 
> 标签：c#, visual-studio-2012, xml-documentation

多年来，我一直在我的源代码中内联存储 XML 文档并忍受“绿色海洋”，但我最近发现了`<include file="..." path="..."/>`可以在 Visual Studio 中用于将文档移动到它自己的 XML 文件中的指令。显然智能感知仍然可以使用这种方法，Sandcastle 等用于帮助文件生成。

我只是想知道其他人如何处理代码被埋在大量文档下的“绿色海洋”问题？您只是学会使用它，还是将 XML 文档移动到一个单独的文件中，并在可能需要澄清代码的地方使用内联注释？

**优点**

*   代码文件变得“更干净”了。
*   它使浏览代码和定位特定代码块/方法变得更加容易。

**缺点**

*   如果没有内联文档，可能会使陌生人更难理解代码。
*   缺少文档可能会导致在代码更改时忘记 XML 文件而不更新文档的趋势。

[http://msdn.microsoft.com/en-us/library/9h8dy30z.aspx](http://msdn.microsoft.com/en-us/library/9h8dy30z.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T03:24:58.353

我只是将它内联并使用这些[Visual Studio - 命令折叠所有代码部分？](https://stackoverflow.com/questions/982677/visual-studio-command-to-collapse-all-sections-of-code)查看大文件时折叠和展开代码的命令。在这种情况下，我认为利大于弊。除非您和您的开发人员对文档非常勤奋，否则我认为该方法效果不佳。我见过的大多数代码库中已经缺少文档，因此在我看来，增加添加它的难度是一个坏主意。

# python - Blender Python脚本，试图防止UI在进行大型计算时锁定

> ID：13485720
> 
> 赞同：9
> 
> 时间：2012-11-21T03:06:13.533
> 
> 标签：python, blender

我正在搅拌机中为 N 个对象编写脚本。运行我的脚本时，它会在工作时锁定用户界面。我想写一些东西来防止这种情况发生，这样我就可以看到屏幕上发生了什么，并使用我的自定义 UI 来显示进度条。关于如何在 python 或搅拌机中实现这一点的任何想法？大多数计算只需要几分钟，我知道这个请求可能会使它们花费比正常时间更长的时间。任何帮助，将不胜感激。

完成大部分工作的函数是 a **for a in b**循环。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-24T21:40:38.340

如果您想在 Blender 中进行大型计算，并且仍然拥有响应式 UI，您可能需要使用 python 计时器检查模型运算符。

它会是这样的：

```
class YourOperator(bpy.types.Operator):
    bl_idname = "youroperatorname"
    bl_label = "Your Operator"

    _updating = False
    _calcs_done = False
    _timer = None

    def do_calcs(self):
        # would be good if you can break up your calcs
        # so when looping over a list, you could do batches
        # of 10 or so by slicing through it.
        # do your calcs here and when finally done
       _calcs_done = True

    def modal(self, context, event):
        if event.type == 'TIMER' and not self._updating:
            self._updating = True
            self.do_calcs()
            self._updating = False
        if _calcs_done:
            self.cancel(context)

        return {'PASS_THROUGH'}

    def execute(self, context):
        context.window_manager.modal_handler_add(self)
        self._updating = False
        self._timer = context.window_manager.event_timer_add(0.5, context.window)
        return {'RUNNING_MODAL'}

    def cancel(self, context):
        context.window_manager.event_timer_remove(self._timer)
        self._timer = None
        return {'CANCELLED'} 
```

您必须自己处理正确的模块导入和操作员注册。

我有一个 Conways Game Of Life 模态运算符实现来展示如何使用它：[https ://www.dropbox.com/s/b73idbwv7mw6vgc/gol.blend?dl=0](https://www.dropbox.com/s/b73idbwv7mw6vgc/gol.blend?dl=0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T05:36:16.253

我建议您使用[greenlets](http://greenlet.readthedocs.org/en/latest/)或[spawn a new process](http://docs.python.org/2/library/multiprocessing.html)。Greenlets 通常更容易使用，因为您不需要担心锁和竞争条件，但它们不能在所有情况下都使用。使用[多进程](http://docs.python.org/2/library/multiprocessing.html)或[线程](http://docs.python.org/2/library/threading.html)模块肯定会解决这个问题。

# amazon-s3 - AWS - 在 EC2 实例启动时，boto.connect_s3() 报告“没有处理程序准备好进行身份验证”

> ID：13485725
> 
> 赞同：5
> 
> 时间：2012-11-21T03:07:22.493
> 
> 标签：amazon-s3, amazon-ec2, boot, boto, amazon-iam

我正在尝试创建一个引导脚本来设置 EC2 实例。我希望实例在启动期间自动从 S3 存储桶下载源代码。我最近阅读了有关将 IAM 角色分配给我的 EC2 实例的信息，以便它们可以从元数据服务器获取临时凭证。这样，我不必在我的映像上存储 AWS 凭证或在启动期间传递它们。

我编写了一个 Python 脚本，通过使用 boto 连接到 S3 来执行下载。我将该脚本连接到 init.d 配置。当我在远程 SSH 会话中手动运行它时，我的脚本工作正常，但由于某种原因，它在启动时执行时失败。

我的代码以下列方式使用 boto：

```
import boto
try:
    conn = boto.connect_s3()
except:
    # log error
    exit(-1) 
```

理论上，对于 boto 2.6，该代码应该联系 AWS 元数据服务器以获取基于当前 EC2 实例的 IAM 角色的临时安全凭证。

出于某种原因，在启动时，[boto.connect_s3()](https://github.com/boto/boto/blob/develop/boto/__init__.py)引发了 boto.exception.NoAuthHandlerFound： *“没有处理程序准备好进行身份验证。检查了 1 个处理程序。['HmacAuthV1Handler'] 检查您的凭据”。*

我在 get_auth_handler 函数中将错误追溯到[boto.auth 模块](https://github.com/boto/boto/blob/develop/boto/auth.py)（引发此异常的唯一地方）。创建 HmacAuthV1Handler 对象时，如果访问密钥 id 或密钥为 None，则 HmacKeys 基类构造函数将失败。事实上，在我的脚本中进行了一些实验后，我发现如果我显式创建一个带有 name='aws' 且没有凭据的[boto.provider.Provider 类](https://github.com/boto/boto/blob/develop/boto/provider.py)的实例，则 Provider 实例的 access_key/secret_key 字段都保持为 None （但仅在启动期间；如果我之后手动运行脚本，凭据将被初始化）。然而，我知道元数据服务器不是罪魁祸首（GET 确实返回了预期的凭据，即使在启动期间也是如此）。

所以... 有什么问题吗？这可能是boto的问题吗？配置问题？还是我只是做错了什么？哎呀，是不是Ubuntu在启动时没有处于这种操作的“正确状态”？

**- - 编辑 - -**

感谢garnaat在下面的回答，我发现问题是python路径（sys.path）在启动期间与我的远程SSH会话期间完全不同。

启动时：

```
['/home/bitnami', 
'/usr/lib/python2.7', 
'/usr/lib/python2.7/plat-linux2', 
'/usr/lib/python2.7/lib-tk', 
'/usr/lib/python2.7/lib-old', 
'/usr/lib/python2.7/lib-dynload', 
'/usr/local/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages'] 
```

从我的 SSH 会话运行它时：

```
['/home/bitnami', 
'/opt/bitnami/python/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', 
'/opt/bitnami/python/lib/python2.7/site-packages/MySQL_python-1.2.3c1-py2.7-linux-i686.egg', 
'/opt/bitnami/python/lib/python2.7/site-packages/html5lib-0.90-py2.7.egg', 
'/opt/bitnami/python/lib/python2.7/site-packages/boto-2.6.0-py2.7.egg', 
'/opt/bitnami/python/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg', 
'/opt/bitnami/apps/django/lib/python2.7/site-packages', 
'/home/bitnami/deploy', 
'/opt/bitnami/python/lib/python27.zip', 
'/opt/bitnami/python/lib/python2.7', 
'/opt/bitnami/python/lib/python2.7/plat-linux2', 
'/opt/bitnami/python/lib/python2.7/lib-tk', 
'/opt/bitnami/python/lib/python2.7/lib-old', 
'/opt/bitnami/python/lib/python2.7/lib-dynload', 
'/opt/bitnami/python/lib/python2.7/site-packages', 
'/opt/bitnami/python/lib/python2.7/site-packages/PIL'] 
```

（我使用 32 位 BitNami DjangoStack 1.4.2-1 图像作为我的基础图像。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T04:29:16.613

你提到你在 Ubuntu 上运行。我知道许多 Ubuntu 发行版都预装了旧版本的 boto。我认为在启动过程中它可能正在查找并使用不了解如何从 IAM 角色获取凭证的旧版本的 boto。

要对此进行测试，请尝试在脚本中记录 boto.Version 并查看它是否为 2.6.0。

# php - jQuery.ajax() 的“成功”回调能否区分对同一脚本的两次调用？

> ID：13485733
> 
> 赞同：3
> 
> 时间：2012-11-21T03:08:38.103
> 
> 标签：php, jquery, http

这是代码：

```
$.ajax({
        url: "script.php",
            success : oneHandler
        });

$.ajax({
        url: "script.php",
            success : twoHandler
        }); 
```

同时调用这两个函数调用时，是否确保在第一次调用的响应中真正调用了“oneHandler”？换句话说，是否检查了附加的字符串是否匹配？

如果我添加数据怎么办：

```
dataType: 'json',
data: {"json": "one"} ,

dataType: 'json',
data: {"json": "two"} , 
```

分别？

如果我使用该`post`方法怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:13:05.470

当然，JavaScript 是浏览器中的单线程模型，不存在真正的并发。只有非常接近。

在内部，为您通过`$.ajax`和朋友提出的每个请求创建一个对象；此对象是与服务器对话并接收响应的对象。您的成功回调附加到该对象。

因为每个请求都是一个单独的对象，所以可以保证执行正确的回调。注意多个请求可以同时共存，它们不会互相等待完成；如果你想要，你可以使用[`Deferred.pipe`](http://api.jquery.com/deferred.pipe/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:11:06.580

> 同时调用这两个函数调用时，是否确保在第一次调用的响应中真正调用了“oneHandler”？

是的

> 如果我使用 post 方法怎么办？

没关系。保证调用正确的回调

# exception - 存储浮点数时出错是 MIPS 程序集

> ID：13485734
> 
> 赞同：0
> 
> 时间：2012-11-21T03:08:43.447
> 
> 标签：exception, ip-address, mips

为什么此代码在存储浮点数时给出异常。我无法弄清楚问题所在。这是代码：

```
li $t1,0

Loop:

add $t0,$t1,$s0

li $v0,6
syscall
mov.s $f1,$f0

swc1 $f1,0($t0)

addi $t1,$t1,4

beq $t1,20,Mult

j Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T12:54:50.953

您可能正在执行未对齐异常`swc1 $f1,0($t0)`。该指令`swc1`需要第二个参数是在字边界对齐的有效内存地址。这意味着此有效内存地址的两个最低有效位（在您的情况下存储在的地址`$t0`）需要为零。

您发布的代码未显示其初始化`$s0`可能至少有两个最低有效位之一为 1。

要修复您的代码，请确保`$s0`以零位开始，以便使用的有效内存地址`swc1`是字对齐的。

如果初始化`$s0`完成，`la $s0, label`您可能希望`.align 2`在声明缓冲区以存储数据时使用指令，例如：

```
label: .align 2
       .space ... 
```

# objective-c - Objective-C ivar BOOL 不保持价值

> ID：13485737
> 
> 赞同：2
> 
> 时间：2012-11-21T03:08:47.480
> 
> 标签：objective-c, ios, variables

**编辑**- 为错字道歉，我很着急，因为我不得不离开大楼，但是嗯......我可以问一下，为什么不赞成？仅仅因为一些语法错误？我愿意接受批评，但请有建设性吗？

感谢您的建设性回答，我都投了赞成票。

==============================================

我有一个 iVar BOOL，我想在整个课程中使用它。我试图将它初始化为`YES`，但我第一次读出来时，它是`NO`。这是为什么？这对我来说很奇怪，因为我`int`的 s 都被保留了。

在我的`.mm`文件中，我有这样的东西：

```
@interface MyClass : NSObject {
    BOOL myBool;
    int myInt;
}

@end

@implementation MyClass

-(id)init{
    //...
    myInt = 3;
    myBool = YES; //here i set it
    //...
    [self addObjectsToGame];
    //...
}

-(void)addObjectsToGame{
    //...
    assert(myInt == 3);
    assert(myBool);    // <---- this line would fail
    //...
}

@end 
```

我知道我可以将@property 与assign 一起使用，但为什么这个iVar 不能保留它的价值？

**编辑**

好吧，是的，哇，这里真的有些乱了......我试图用它来替换它，`@property`但它仍然无法正常工作。然后我尝试为变量“在项目中查找所有内容”，`myBool`并且我没有在其他任何地方更改它

注意：我正在使用 cocos2d，但我认为这不会影响任何事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:39:48.807

我已经为你修复了 Objective-C 语法，一切都按预期工作

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject {
    BOOL myBool;
    int myInt;
}
-(void)addObjectsToGame;
@end

@implementation MyClass

-(id)init{
    if (self = [super init])
    {
        myInt = 3;
        myBool = YES; //here i set it
        [self addObjectsToGame];
    }
    return self;
}

-(void)addObjectsToGame{
    assert(myInt == 3);
    assert(myBool);
    NSLog(@"OK");
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        [MyClass new];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:25:41.633

这个 iVar**将**保留它的价值，只要你不做任何其他事情来搞砸它

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject {
    BOOL myBool;
    int myInt;
}
@end

@implementation MyClass

-(id)init{
    //...
    myInt = 3;
    myBool = YES; //here i set it
    //...
    [self addObjectsToGame];
    //...
    return self;
}

-(void)addObjectsToGame{
    //...
    assert(myInt == 3);
    assert(myBool);    // <---- this line would fail
    //...
    NSLog(@"didn't fail");
}

@end 
```

这段代码没有失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T21:39:11.123

哦，哇，我在 iOS 上真是个菜鸟——

所有`BOOL`值都初始化为`NO`（而不是随机的），我不断得到的原因`NO`是因为我在分配它之前一直在使用`BOOL`它，而且我已经做到了`non-atomic`（尽管这在大多数情况下并不重要）

这是真正的原因；但是，我会接受别人的回答，因为这是一个微不足道的错误

# javascript - Sitecore Preview 无法加载 JavaScript

> ID：13485748
> 
> 赞同：1
> 
> 时间：2012-11-21T03:09:58.480
> 
> 标签：javascript, sitecore, sitecore6

当我设置 Sitecore 并使用 Preview 功能时，所有的 javascript 都无法加载（如下拉效果、叠加等）。

只是想确认一下sitecore的预览功能是否不支持javascript？不然怎么解决？我在设置过程中遗漏了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:19:29.587

解决此问题的更好方法是使用当前最佳实践在隔离范围内编写 JavaScript，无论使用哪个库，您的代码都不会出现问题。

[使用 Prototype 和 Sitecore 避免 jQuery 的 noConflict() 模式](http://blog.navigationarts.com/avoiding-jquerys-noconflict-mode-with-prototype-and-sitecore/)

```
var Example = {};

(function($){
   Example.test = function(){
      $("#worker").remove();
   }

   $(function(){ // domloaded shortcut
      Example.test();
   });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:52:11.377

有几件事要检查：

*   Sitecore 6.5 之前的版本使用绑定到“$”变量的 Prototype javascript 库。如果您在页面上使用 jQuery，请使用显式的“jQuery”引用或“jQuery.noConflict()”。6.5 之后的版本使用 jQuery 并将其版本分配给非冲突变量 ('S$' iirc
*   确保您自己的 javascript 中没有任何错误。这听起来很明显，但考虑到 javascript 的性质，一个小错误就会导致其余代码失效。

# asp.net-mvc-4 - HttpSelfHostServer 未绑定到主机名

> ID：13485750
> 
> 赞同：0
> 
> 时间：2012-11-21T03:10:15.277
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在`HttpSelfHostServer`与`asp net mvc 4 web api`

当我创建服务器时，我指定一个基地址，通常类似于`http://foo.com:8080`

让我们说这个服务器有多个 ips `10.0.0.0`, `10.0.0.1`,`10.0.0.2`

我们也会说

*   `http://foo.com`指着`10.0.0.0`
*   `http://bar.com`指着`10.0.0.1`
*   `http://baz.com`指着`10.0.0.2`

如果 HttpSelfHostServer 绑定到`http://foo.com:8080`为什么我仍然可以访问`http://bar.com:8080`它`http://baz.com:8080`

这是实例化服务器的代码

```
 public Server(string name, Uri baseAddress)
    {
        Name = name;
        TimeCreated = DateTime.Now;
        BaseAddress = baseAddress;
        var config = new HttpSelfHostConfiguration(BaseAddress);

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new {id = RouteParameter.Optional}
            );

        // Create server
        _server = new HttpSelfHostServer(config);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:48:31.027

您可以通过更改 HttpSelfHostConfiguration 上的 HostNameComparisionMode 属性来修改此行为。默认情况下，该值为 StrongWildCard。

config.HostNameComparisonMode = System.ServiceModel.HostNameComparisonMode.StrongWildcard;

您可以在此处阅读有关此设置的更多信息：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.hostnamecomparisonmode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.hostnamecomparisonmode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:22:02.927

有可能所有三个地址都将访问 127.0.0.1 您是否尝试从不同的机器访问它们？

# java - JPQL 和连接表

> ID：13485752
> 
> 赞同：9
> 
> 时间：2012-11-21T03:10:27.717
> 
> 标签：java, jpa, jpql

我对 SQL 和 JPQL 的理解不是很好，我一直在尝试创建以下 sql 语句的 JPQL 查询：

```
select group.* from user, user_group, group 
where user_group.user_id = user.id 
and user_group.group_id = group.id 
and user.id = [userID to search] 
```

编辑：糟糕，我忘记将按用户 ID 搜索的部分添加到查询中。我想获取用户所属的所有组。

但我只是无法正确地获取语法。任何帮助将不胜感激。

相关代码片段：

组.java

```
@Table(name = "group")
@Entity
public class Group implements Serializable {

@Id
@GeneratedValue
@Column(name = "id")
private Integer id;

@JoinTable(name = "user_group", joinColumns = {
    @JoinColumn(name = "group_id", referencedColumnName = "id")}, inverseJoinColumns = {
    @JoinColumn(name = "user_id", referencedColumnName = "id")})
@ManyToMany
private Collection<User> userCollection;

} 
```

用户.java

```
@Table(name = "user")
@Entity
public class User implements Serializable {

@Id
@NotNull
@GeneratedValue
@Column(name = "id")
private Integer id;

@Column(name = "email", unique=true, nullable=false)
private String email;

@ManyToMany(mappedBy = "userCollection")
private Collection<Group> GroupCollection;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T03:27:14.670

使用 JPQL 将是：

```
TypedQuery<Group> query = em.createQuery(
    "SELECT DISTINCT g FROM User u LEFT JOIN u.groupCollection g " +
    "WHERE u = :user", Group.class);
query.setParameter("user", user);
List<Group> = query.getResultsList(); 
```

`em`您的 EntityManager在哪里，并且`user`是要为其加载组列表的 User 类的实例。如果您只有用户 ID，请更改为：

```
TypedQuery<Group> query = em.createQuery(
    "SELECT DISTINCT g FROM User u LEFT JOIN u.groupCollection g " +
    "WHERE u.id = :user", Group.class);
query.setParameter("user", userId); 
```

最好使用 a `Set`or `SortedSet`（或者`List`如果用户可以多次在同一个组中，则可以使用 a ）而不是 a `Collection`。

# graph - 如何比较两个概念图之间的相似性

> ID：13485753
> 
> 赞同：0
> 
> 时间：2012-11-21T03:11:03.387
> 
> 标签：graph, map, comparison, data-mining, concept

我正在为一家公司做一个简历短名单项目。我有整个公司文件的概念图。而且我已经从 CV 中提取了数据，现在我有每个 CV 的概念图。我想将每份简历与公司概念图进行比较，以获得与公司的相关顺序。谁能告诉我概念图比较算法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T10:10:46.163

这是一个相当古老的问题，但也许我的建议对其他人有所帮助。在此特定示例中，无法查看公司 CM 的所有元素，因此该建议可能不正确。

假设两个 CM 都以文本格式存储，以图形或树的形式。我的想法是简单地计算（使用蛮力）出现在两个 CM 中的那些概念。在 CV 地图中，您可以根据公司需求确定各个分支机构中概念的具体权重。例如。“课外活动”中的概念重叠可以乘以 0.25，而“技术”中的概念重叠可以乘以 0.75。

计数时，我会在 CV 图的第 3 层开始形成概念，因为如我所见，前两个层的概念在公司 CM 中不存在。您搜索公司 CM 树的所有分支，并计算两个地图中每个出现的概念。每个 CV CM 的总值等于重叠的总和（用特定 CV 分支的“值”归一化）。最后，只需按计算出的总价值对 CV 进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:30:40.987

在谈论比较时，您通常需要距离/相似性度量。如果您能说出您要比较的内容以及您是否已经定义了一些相似性度量，这将非常有帮助。

# ios - 执行 popViewControllerAnimated:YES 时应用程序与 Zombie 一起崩溃

> ID：13485756
> 
> 赞同：0
> 
> 时间：2012-11-21T03:11:29.920
> 
> 标签：ios, xcode4.5

这是我第一次发帖，我被困在一个简单的问题上。我正在使用一个框架，该框架会导致雪落在用户选择的 UIImage 上。下面是创建降雪类实例的代码：

```
- (void)viewDidAppear:(BOOL)animated
{

    // Animate
     SnowFalling *snowfalling = [[SnowFalling alloc]
                            initWithView:self.view];
     snowfalling.hidden = NO;
     snowfalling.numbersOfFlake = 175;
     [snowfalling startAnimating];

} 
```

在此之后，我想使用自定义后退按钮返回到上一个视图：

```
// Custom back button on toolbar.
- (IBAction)backButton:(UIBarButtonItem *)sender {
  [[self navigationController] popViewControllerAnimated:YES];
} 
```

这很好接受，当我点击后退按钮时，应用程序崩溃并出现一个僵尸，上面写着：“[uiview frame] message sent to deallocated object”

如果我放置：

```
 [snowfalling stopanimating]; 
```

在降雪的实例中，当前视图控制器只是将雪冻结在屏幕上。但它会让我毫无问题地弹出到以前的控制器。

那么我的问题是，当点击后退按钮 (popViewControllerAnimated:YES) 时如何停止动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:31:25.830

你可以`stopAnimating`在`viewWillDisappear`
记得设置降雪自动释放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:25:33.127

1.  在你的控制器类中创建一个属性来保存降雪的值：

    ```
    @property(nonatomic,retain) SnowFalling *snowfalling; // in @interface

    @synthesize snowfalling; // in @implementation 
    ```

2.  在您的 viewDidAppear 中：将新创建的 SnowFalling 分配给该属性而不是局部变量。

3.  请记住在将 SnowFalling 分配给属性后立即 [release] SnowFalling。整个方法应该是这样的：

    ```
    - (void)viewDidAppear:(BOOL)animated
    {    
        // Animate
         self.snowfalling = [[SnowFalling alloc]
                            initWithView:self.view];
         [self.snowfalling release];
         self.snowfalling.hidden = NO;
         self.snowfalling.numbersOfFlake = 175;
         [self.snowfalling startAnimating];
    } 
    ```

4.  在 [backButton:] 调用中

    ```
     [self.snowfalling stopanimating];
     self.snowfalling = nil; 
    ```

在调用 popViewControllerAnimated 之前。更好的是，将这两行放在 [viewWillDisappear:] 中，这样它们总是会被调用。

# delphi - Delphi TListview OwnerDraw SubItems - 更改默认字体（在画布上绘制后以某种方式变粗）

> ID：13485761
> 
> 赞同：4
> 
> 时间：2012-11-21T03:11:57.017
> 
> 标签：delphi, ownerdrawn, tlistview

如果您将 ownerdraw 与 TListView 一起使用，则子项默认情况下都是 BOLD 字体样式，即使 listview font.style 设置为 []，对于自定义绘制后的所有子项也是如此。

我发现的一种解决方法是强制在 CustomDrawSubItem 事件中设置样式：

```
ListView2.Canvas.Font.Style := [fsItalic];
ListView2.Canvas.Font.Style := []; 
```

（除非默认样式设置为 [] 以外的其他内容，否则带有 [] 的简单调用将不起作用，因为 SetStyle 调用不认为样式已更改）

然而，这是一个丑陋的修复，需要额外的处理时间。有更好的解决方案吗？

演示项目：[http ://www.mediafire.com/?v8bsdpvpfqy47vn](http://www.mediafire.com/?v8bsdpvpfqy47vn)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:13:48.190

我没有遇到你描述的确切情况，但我遇到了类似的问题。当我使用所有者绘制`TListView`的`OnAdvancedCustomDrawSubItem`事件并分配一个事件来更改`Canvas.Font`每个子项时，我发现在我更改了`Sender.Canvas.Font`一个子项之后，即使我更改了后续子项的设置，后续子项也会使用错误的设置进行绘制`Sender.Canvas.Font`。`Sender.Canvas.Font.OnChange`我的解决方法是在事件处理程序结束时手动调用事件处理`OnAdvancedCustomDrawSubItem`程序。这表明向 Windows`TListView`报告`CDRF_NEWFONT`，然后一切都被正确绘制。就好像`Sender.Canvas.Font.OnChange`事件`TListView`在所有者绘制时未正确连接，因此它不会检测到字体更改，因此不会正确地向 Windows 报告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T18:17:24.190

我同意 jachguate 的[评论](https://stackoverflow.com/questions/13485761/delphi-tlistview-ownerdraw-subitems-change-default-font-its-bold-somehow-aft#comment18454436_13485761)，即 VCL 控件似乎存在问题；一个可能的设计问题`TCustomListView.CNNotify`。但要遵循那里的逻辑并不容易。

一种解决方案是在 DefaultDraw 为 true 时强制更改控件的画布，以便 VCL 在自定义绘图通知返回之前再次创建并选择控件的字体到传递的 DC。例子：

```
procedure TForm1.LVCustomDrawSubItem(Sender: TCustomListView; Item: TListItem;
  SubItem: Integer; State: TCustomDrawState; var DefaultDraw: Boolean);
Var R: TRect;
    bmp: TBitmap;
    x: Integer;
begin
  DefaultDraw := True;

  if SubItem = 1 then begin
    DefaultDraw := False;
    ...
      ...       
      Sender.Canvas.Draw(R.Left - 2, R.Top, Bmp);
      Bmp.Free;
    end;
  end;

  if DefaultDraw then
    Sender.Canvas.Brush.Color := ColorToRGB(clWindow);     // <--
end; 
```

如果可能的话，我更喜欢的方法是避免使用控件的画布。您可以为您的情况使用临时 DC，这也避免了问题评论中提到的黑色背景问题。

```
uses
  commctrl;

  ...

procedure TForm1.LVCustomDrawSubItem(Sender: TCustomListView; Item: TListItem;
  SubItem: Integer; State: TCustomDrawState; var DefaultDraw: Boolean);
Var R: TRect;
    bmp: TBitmap;
    x: Integer;
    DC: HDC;
begin
  DefaultDraw := True;

  if SubItem = 1 then begin
    DefaultDraw := False;
    ...
      ...

      DC := GetDC(Sender.Handle);
      ImageList_Draw(TypeImages.Handle, 0, DC, R.Left - 2, R.Top, ILD_NORMAL);
      ReleaseDC(Sender.Handle, DC);

      Bmp.Free;
    end;
  end;
end; 
```

# iphone - 将自签名证书导入我的 iPhone

> ID：13485764
> 
> 赞同：1
> 
> 时间：2012-11-21T03:12:19.740
> 
> 标签：iphone, ios, ssl

我正在开发一个使用 SSL 与我的服务器通信的应用程序。

连接不断失败`The certificate for this server is invalid. You might be connecting to a server that is pretending to be (removed.com) which could put your confidential information at risk.`

我尝试将证书通过电子邮件发送给自己并将其导入到我的 iPhone 上，但错误仍然存​​在。

即使通过 safari 访问网页，它也会警告我并询问我是否要接受证书。

我怎样才能让我的 iPhone 忽略无效的证书？真的很烦人！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T11:07:31.243

您描述的问题听起来像是服务器证书的错误配置。您确定证书未过期、与域（或子域）匹配并且有效。

为了快速尝试和开发目的，您可以对 UIWebView 和标准连接使用以下解决方法。（**注意**：这将被 App Store 拒绝）：

```
[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];
```

如果您可以指定您正在使用的连接类型或发布一些代码，我们可能会找到一种禁用 SSL 验证的方法。

# java - 基于 Java 的 Google App Engine 报告

> ID：13485765
> 
> 赞同：2
> 
> 时间：2012-11-21T03:12:28.453
> 
> 标签：java, google-app-engine, jasper-reports, reporting

有没有为 Google App Engine（Java 基础）做报告的指南？Jasper 报告是否符合 GAE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:45:32.147

我在用

[http://code.google.com/p/xdocreport/](http://code.google.com/p/xdocreport/)

并且对此非常满意。

他们最近对我的要求进行了小修改，以使事情符合 GAE。看[这里](http://code.google.com/p/xdocreport/issues/detail?id=132&can=1&q=appengine)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:51:34.740

您可以尝试以下解决方法：

1) 使用 Google Docs 存储您的报告（使用 Google Docs API）。

2) 使用 Google Docs API 将文档转换为 PDF。参考这个[例子](http://blog.programmableweb.com/2009/02/20/google-api-now-lets-you-get-documents-in-many-formats/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-11T03:47:32.730

Google Cloud Platforms 允许您在与 AppEngine 相同的项目中运行独立的 Jaspersoft 服务器。因此，实际上没有理由在 AppEngine 本身内部运行它。只需让您的 servlet 使用 Jaspersoft 的 RESTful Web 服务版本 2 并以您想要的任何受支持格式返回 Jasper 报告。

# java - 如何将片段中的非默认构造函数更改为默认构造函数？

> ID：13485767
> 
> 赞同：2
> 
> 时间：2012-11-21T03:12:44.110
> 
> 标签：java, android

代码：

```
public PlacePickerFragment() {
    this(null);
}
public PlacePickerFragment(Bundle args) {
    super(GraphPlace.class, R.layout.com_facebook_placepickerfragment, args);
    setPlacePickerSettingsFromBundle(args);
} 
```

您好，我想从上面的代码中删除弃用警告，有没有办法将其更改为默认构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T03:35:18.290

创建片段时，请使用 setArgument()：

```
Bundle args = new Bundle();
// Construct your bundle here
Fragment mFragment = new PlacePickerFragment();
mFragment.setArguments(args);
mFragment.initialize(); 
```

并使用片段的默认构造函数。您可能需要`setPlacePickerSettingsFromBundle()`在设置参数后调用，如下所示：

```
public PlacePickerFragment() {
    super(GraphPlace.class, R.layout.com_facebook_placepickerfragment, args);
}

public void initialize() {
    Bundle args = getArguments();
    setPlacePickerSettingsFromBundle(args);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:20:19.243

摆脱`Bundle`参数并使构造函数不带参数。然后使用`setArguments()`传递捆绑。如有必要，创建静态工厂方法以使用必要的参数创建您的片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T09:33:41.900

Lawrence Choy 的回答非常有帮助，但对我不起作用，因为 super() 调用不接受 args 变量。这对我有用：

```
public void initialize() {
  Bundle args = getArguments();
  setPlacePickerSettingsFromBundle(args);
}

/**
  * Default constructor. Creates a Fragment with all default properties.
  */
public PlacePickerFragment() {
  super(GraphPlace.class, R.layout.com_facebook_placepickerfragment, null);
} 
```

# android - 数据传递问题

> ID：13485772
> 
> 赞同：0
> 
> 时间：2012-11-21T03:13:24.980
> 
> 标签：android, listview, android-intent, notifications

我喜欢通过通知服务将数据从 ServicesActivity.java 传递到 NotificationView.java。但是第一次传递的数据是正确的，当我向它发送另一个数据时，它并没有更新它以前的数据。正如你所看到的，下面的 logcat 输出，第一次，我将两个数据发送到通知中并输出它在 NotificationView.java 处传递是没有问题的。之后，我重新向其中发送三个数据，它在 NotificationView.java 处的输出仍然是两个数据。无论我将多少数据发送到通知中，它在 NotificationView.java 的输出仍然遵循它的第一次输出。这里是 logcat 输出：

```
11-21 10:42:03.645: D/String(25694): admin,admin
11-21 10:42:33.645: D/String(25694): admin,admin,admin
11-21 10:42:06.308: D/how(25694): admin,admin
11-21 10:42:36.518: D/how(25694): admin,admin 
```

** Log.d("String",str) 位于 ServicesActivity.java 的 displayNotification() 中，Log.d("how",i) 位于 NotificationView.java。

服务活动.java

```
public class ServicesActivity extends Activity {

IntentFilter intentFilter;
int notification = 1;
String datapassed; 
String str = "";
String[] data;
int dlength;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_services);

    intentFilter = new IntentFilter();
    intentFilter.addAction(MyService.MY_ACTION);
    registerReceiver(intentReceiver, intentFilter);
}

public void startService(View view){
    startService(new Intent(getBaseContext(),MyService.class));
    Toast.makeText(getBaseContext(), "start",
            Toast.LENGTH_SHORT).show();
}

public void stopService(View view){
    stopService(new Intent(getBaseContext(),MyService.class));
    Toast.makeText(getBaseContext(), "stop",
            Toast.LENGTH_SHORT).show();
}

private BroadcastReceiver intentReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
    datapassed = intent.getStringExtra("DATAPASSED");
    if(datapassed.length()>0){

        data = datapassed.split("[*]");
        dlength = data.length;

        for(int i=0;i<dlength;i++){
            if(i==dlength-1){
                str += String.valueOf(data[i]);                 
            }else{
                str += String.valueOf(data[i]) + ",";
            }   
        }
        Log.d("dataServices",str);
        displayNotification();
            str = "";           
    }
    }
    };

    protected void displayNotification(){
        Intent i = new Intent(this,NotificationView.class);
        i.putExtra("notification", notification);
        i.putExtra("name",str);
        Log.d("String",str);
        PendingIntent pi = PendingIntent.getActivity(this, 0, i, 0);

        NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        Notification notis = new Notification(R.drawable.notices2,"Reminder:You have " + dlength + " new friend request",System.currentTimeMillis());
        notis.setLatestEventInfo(this,"Friend Request", str + "has sent you a friend request",pi);
        notis.vibrate = new long[]{100,250,100,500};
        mnotis.notify(0, notis);
    }
  } 
```

NotificationView.java

```
public class NotificationView extends Activity{

String[] people;
ListView lv;
Button btn1,btn2;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view);  
    NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    mnotis.cancel(getIntent().getExtras().getInt("notificationID"));
    String i = getIntent().getExtras().getString("name");
    people = i.split("[,]");
    Log.d("how",i);

    lv= (ListView) findViewById(android.R.id.list);
    btn1 = (Button)findViewById(R.id.acceptbtn);
    btn2 = (Button)findViewById(R.id.closebtn);
    ArrayAdapter<String> list = new ArrayAdapter<String>(NotificationView.this,R.layout.friendlist_item, R.id.friend_name,people);
    lv.setAdapter(list); 

    btn2.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            finish();
        }
    });
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:17:55.880

默认情况下，如果您只更改 extras，Android 将使用现有的 (cached) `PendingIntent`。使用该`FLAG_UPDATE_CURRENT`标志强制它创建一个具有指定附加功能的新标志。

[http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT)

# html - how to use customs fonts in emails or email templates

> ID：13485780
> 
> 赞同：20
> 
> 时间：2012-11-21T03:14:39.070
> 
> 标签：html, css, email, html-email

how to use customs fonts in emails or email templates Why we cant use custom fonts in emails, why @font-face style is not supported by most of the mail providers

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-21T03:16:37.923

Simply put.. you can't. Or rather, you shouldn't due to lack of support.

The only way to use custom fonts is by creating images for the text. That may or may not be feasible depending upon the amount of text.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-18T05:00:23.887

While the answer above may have been true up until now. Looks like the answer may be changing.

Good email marketing design is about graceful degradation. While some major email clients do not support web fonts, some do... including clients on mobile devices. If your willing to make sure that your fall back fonts do not break your design in an unacceptable way then campaign monitor has a great article about the state of support for different clients and best practices.

[http://www.campaignmonitor.com/blog/post/3897/using-web-fonts-in-email](http://www.campaignmonitor.com/blog/post/3897/using-web-fonts-in-email)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T14:03:19.010

Atleast you can always put pictures instead of text just like in the good old times ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T08:58:54.097

I disagree with some of the previous answers saying that you cant or shouldnt.

A lot of modern email clients do have support for web fonts using the @import and @FONT_FACE method.

Whilst the list of email clients that will support these fonts inst exhaustive, they are all still in the list of 10 most used clients.

Clients that will support these methods are:

AOL Mail

Native Android mail app (not Gmail app)

Apple Mail

iOS Mail

Outlook 2000

Outlook.com app

When using web fonts just make sure you provide a fallback web-safe font for clients that dont want to play ball, not setting a fallback web-safe font will default the font to something like Times New Roman.

As others have said, if you absolutely need a font that isnt supported which is important to your design (for example: in a header), it may be best to make the text as part of the image. Just be aware that in email clients that dont load images, it may be unclear what your email is about.

You can read more about web-font best practices within emails [here](https://litmus.com/blog/the-ultimate-guide-to-web-fonts)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-03-24T08:14:32.030

If ya wanna use 'em, just copy and paste them from your Microsoft Office Word. It worked for me. I used Live and ProtonMail to test it, and used 2 different browsers (Chrome and Opera).

# php - 在 WHERE 子句中使用 SELECT IF

> ID：13485781
> 
> 赞同：0
> 
> 时间：2012-11-21T03:14:39.040
> 
> 标签：php, mysql, sql

在下面的查询中，SELECT 语句有一个 IF 情况，如果表**a**中的价格等于 999999，那么我将 n_price 设置为 0，否则价格保持不变。

我想知道的是是否有一种简单的方法可以在 WHERE 子句中使用 n_price （查询中的更新值）而不是`a.price`进行计算？如果不是，那么在 WHERE 子句中检索值的简单方法是什么

```
SELECT 
IF(a.price = 999999, 0, a.price)            AS n_price, 
l.quantity                                  AS n_quantity,
l.condition                                 AS n_condition

FROM b_products b  

LEFT JOIN a_products a ON b.id = a.id
LEFT JOIN l_products l ON b.id = l.id

WHERE 
AND ROUND((a.price/100*80) - l.price) >= (l.price/100*30) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:16:34.620

我认为这应该有效：

```
AND ROUND((IF(a.price = 999999, 0, a.price)/100*80) - l.price) >= (l.price/100*30) 
```

您不能使用`n_price`您在 select 子句中定义的名称。

# c# - 无限循环异步

> ID：13485788
> 
> 赞同：3
> 
> 时间：2012-11-21T03:15:55.113
> 
> 标签：c#, c#-4.0, asynchronous

我有一个需要实时更新的数据集列表。我想一次处理 100 多个中的 10 个，然后一旦完成，就抓取下一个最旧的行。基本上让这个循环持续无限长的时间。我对线程世界很陌生，并且一直在 AsyncTask 上闲逛。有没有人可以指出我的例子？我用谷歌搜索了很多，但找不到我要找的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:40:54.250

如果您知道我的意思，至少在 .Net 4.5 中，异步编程变得非常有趣。

这是一组简单的示例：

```
public async void DoAsync()
{
      await Task.Run( () =>
      { 
         // Do task! 
      } );
}

public async Task<string> GetStringAsync()
{
       string s = "";
       await Task.Run( () =>
       {
            for(int I = 0; I < 9999999; I++)
            {
                   s += I.ToString();
            }
       }
       return s;
} 
```

# 有用的资源

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T04:19:27.787

`AsyncTask`更适合一次性操作。对于正在进行的任务，您可以考虑使用工作线程。

免责声明：我不认为这是最好的方法，但它应该给你一些想法和东西来阅读。

```
 public class ThreadingSample : IDisposable
{
    private Queue<SomeObject> _processingQueue = new Queue<SomeObject>();
    private Thread _worker;
    private volatile bool _workerTerminateSignal = false;
    private EventWaitHandle _waitHandle = new EventWaitHandle(false, EventResetMode.AutoReset);

    public bool HasQueuedItem
    {
        get
        {
            lock(_processingQueue)
            {
                return _processingQueue.Any();
            }
        }
    }

    public SomeObject NextQueuedItem
    {
        get
        {
            if ( !HasQueuedItem )
                return null;

            lock(_processingQueue)
            {
                return _processingQueue.Dequeue();
            }
        }
    }

    public void AddItem(SomeObject item)
    {
        lock(_processingQueue)
        {
            _processingQueue.Enqueue(item);
        }
        _waitHandle.Set();
    }
    public ThreadingSample()
    {
        _worker = new Thread(ProcessQueue);
        _worker.Start();
    }

    private void ProcessQueue()
    {
        while(!_workerTerminateSignal)
        {
            if ( !HasQueuedItem )
            {
                Console.WriteLine("No items, waiting.");
                _waitHandle.WaitOne();
                Console.WriteLine("Waking up...");
            }
            var item = NextQueuedItem;
            if (item != null)   // Item can be missing if woken up when the worker is being cleaned up and closed.
                Console.WriteLine(string.Format("Worker processing item: {0}", item.Data));
        }
    }

    public void Dispose()
    {
        if (_worker != null)
        {
            _workerTerminateSignal = true;
            _waitHandle.Set();
            if ( !_worker.Join( TimeSpan.FromMinutes( 1 ) ) )
            {
                Console.WriteLine("Worker busy, aborting the thread.");
                _worker.Abort();
            }
            _worker = null;
        }
    }

    public class SomeObject
    {
        public string Data
        {
            get;
            set;
        }
    }
} 
```

测试它我使用单元测试来启动它。您可以将单元测试扩展为适当的测试，以确保按预期执行操作。在我的情况下，它们是一个很好的初始断言，可以消除行为。

```
 [Test]
    public void TestThreading()
    {
        using ( var sample = new ThreadingSample() )
        {
            sample.AddItem(new ThreadingSample.SomeObject {Data = "First Item"});
            sample.AddItem(new ThreadingSample.SomeObject {Data = "Second Item"});
            Thread.Sleep(50);
            sample.AddItem(new ThreadingSample.SomeObject {Data = "Third Item"});
        }

    } 
```

测试的相关输出：

> ------ 测试开始： 程序集：NHMapping.dll ------
> 
> Worker 处理项：First Item
> Worker 处理项：Second Item
> 无项，等待。
> 醒来...
> 没有物品，等待。
> 醒来...
> 工人处理项目：第三个项目
> 没有项目，等待。
> 醒来...
> 
> 1 次通过，0 次失败，0 次跳过，耗时 0.12 秒（临时）。

在这里，您可以看到工作人员进入睡眠状态，然后醒来处理队列中的项目。从技术上讲，您可以使用一个列表，然后从列表中获取 10 个项目，然后再将其从锁中释放，并在再次检查列表之前处理这 10 个项目。

当类被释放时，它会释放循环，然后等待工作线程在中止之前终止。在这里，您可能想要检查任何未完成的项目并记录它们将不会被处理，或者将它们保存到文件以供以后处理。

编辑：我发现了双重事件的问题......更好的实现是`ManualReset`在`EventWaitHandle`

```
private EventWaitHandle _waitHandle = new EventWaitHandle(false, EventResetMode.ManualReset); 
```

然后在处理处理项目的情况时，重新发送句柄：

```
 var item = NextQueuedItem;
            if (item != null)   // Item can be missing if woken up when the worker is being cleaned up and closed.
            {
                Console.WriteLine(string.Format("Worker processing item: {0}", item.Data));
                _waitHandle.Reset();
            } 
```

这会产生更好的测试结果：

> ------ 测试开始： 程序集：NHMapping.dll ------
> 
> Worker 处理项：First Item
> Worker 处理项：Second Item
> 无项，等待。
> 醒来...
> 工人处理项目：第三个项目
> 没有项目，等待。
> 醒来...
> 
> 1 次通过，0 次失败，0 次跳过，耗时 0.13 秒（临时）。

# .net - 如何设置依赖于嵌套属性的触发条件？

> ID：13485789
> 
> 赞同：0
> 
> 时间：2012-11-21T03:15:55.367
> 
> 标签：.net, wpf, triggers, styles

我可以设置一个类似这样的触发器吗？

```
<Style x:Key="ContextMenuSelector" TargetType="{x:Type TreeView}">
    <Style.Triggers>
        <Trigger Property="SelectedItem.Tag" Value="MyTag">
            <Setter Property="ContextMenu" Value="{StaticResource MyTagContextMenu}"><!-- change context menu depending on selected item --></Setter>
        </Trigger>
        <!-- Other triggers depending on the value of the SelectedItem's Tag -->
    </Style.Triggers>
</Style> 
```

我希望能够根据所选项目的标签更改树视图的 ContextMenu。但是，上面的代码无法编译，因为似乎`Property="SelectedItem.Tag"`不允许嵌套属性 like。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:39:35.957

SelectedItem 是对象类型[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)但标签是 FrameworkElement 类型的属性。要指定 SelectedItem 类型，请尝试使用 Property="(FrameworkElement.SelectedItem).Tag"

[http://msdn.microsoft.com/en-us/library/ms742451.aspx](http://msdn.microsoft.com/en-us/library/ms742451.aspx)请参阅关于类型限定的部分

# php - 如何编码以检查数组相交的数据？

> ID：13485791
> 
> 赞同：-4
> 
> 时间：2012-11-21T03:16:10.157
> 
> 标签：php, arrays, array-intersect

我想检查将数据输入数据库。检查如下

```
$implode1 = "apple, orange, banana";

$implode2 = "banana, mango"; 
```

如果变量中的香蕉`$implode1`也包含在变量`$implode2`中，则应显示警告消息。如果变量的值为空，则执行将被忽略。例子：

```
$implode1 = "";

$implode2 = ""; 
```

如何为上述问题编码？

请帮帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:21:33.340

```
$implode1 = "apple, orange, banana";
$implode2 = "banana, mango";

$implode1Array = explode(", ", $implode1);
$implode2Array = explode(", ", $implode2);

$result = array_intersect($implode1Array, $implode2Array);

if(count($result) > 0) {
    exit('Error!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:26:16.083

通常我会假设 cat 你的意思是连接，但在这里似乎不合适。但是，假设这就是您的意思，您只需检查两个变量中的相同连接字符（逗号），如下所示：

```
if ( stristr($implode1, ",") && stristr($implode2, ",") ) {
    // error
} else {
    // success, do something
} 
```

但是，假设您的意思是在两个变量中输入相同的项目，在这种情况下是水果，您可以这样检查：

```
$im1 = explode(",", $implode1);
$im2 = explode(",", $implode2);
foreach($im1 as $i) {
    if ( array_search($i, $im2) ) {
        // error
    } else {
        // success, do something
    }
} 
```

您当然可以在两个字符串中搜索给定值，但我认为这不是您想要的。但假设它是，这里是代码：

```
$duplicate = "apple"; // the item you are searching for a duplicate of
if ( stristri($implode1, $duplicate) && stristr($implode2, $duplicate) ) {
    // error
} else {
    // success, do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:27:07.890

```
if (count(array_intersect)) { /* warning */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:28:26.557

您可以使用 PHP 的`array_intersect`函数来获取交集（参见[http://php.net/manual/en/function.array-intersect.php](http://php.net/manual/en/function.array-intersect.php)）：

```
$arr1 = explode(", ", "apple, orange, banana");
$arr2 = explode(", ", "banana, mango");
$intersection = array_intersect($arr1, $arr2);
if (count($intersection) > 0) {
    echo "WARNING: the lists have a non-empty intersection!";
} 
```

# php - PHP gzipping JSON，保存到内存缓存...... Node.js 服务 - 正确的标题？

> ID：13485794
> 
> 赞同：2
> 
> 时间：2012-11-21T03:16:41.413
> 
> 标签：php, node.js, http-headers, memcached, gzip

在 PHP 中，我正在做类似的事情：

```
$gzdata = gzencode(json_encode($data), 9);
$mc->set("latest", $gzdata); 
```

所以我从数据库中提取关联数组，将其转换为 JSON，Gzip 并存储到内存缓存

在我的 Node.js 中，我读取了 memcached 条目并为其提供服务（其中客户端是 memcache 客户端）

```
client.get('latest', function(err, response) {
            if (err) { console.log("GET", err.type ); } 
            else{
                result.writeHead(200,{
                    "Content-Type": "application/json",
                    "content-encoding":"gzip"
                });

                result.end(response['latest']);
            }
        }); 
```

我正进入（状态

> 内容编码错误

在页面上

> 您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。

我什至无法检查 FB 中的标题...任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:37:29.293

您知道 Memcache 客户端已经可以为您进行压缩了吗？

```
$memcache_obj = new Memcache;
$memcache_obj->addServer('memcache_host', 11211);
$memcache_obj->setCompressThreshold(20000, 0.2); 
```

这将在大于 20k 时压缩值，最小压缩率为 20%。

也可以看看：[`Memcache::setCompressThreshold`](http://php.net/manual/en/memcache.setcompressthreshold.php)

# c++ - 直方图均衡实现

> ID：13485795
> 
> 赞同：0
> 
> 时间：2012-11-21T03:16:41.560
> 
> 标签：c++, image, graphics, histogram

我发现的所有资源都非常不同，我不确定我必须做什么。

现在我已经得到了非常简单的直方图，我也得到了累积直方图

我不知道如何使用这个新的直方图来获得更好的图像对比度。它是从 0 到 255 -> 黑色到白色的图像（伪代码就足够了）

我无法自己建立这种联系。

ps：这是关于大体的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:54:22.313

高对比度图像有间隙（零或接近零），出现在直方图的“左”和“右”（高和低）侧。可以通过将亮度值重新映射到更宽的范围来降低对比度。
假设在直方图上，所有值都填充为 0，直到 index=35（histogram[35]），然后在 index=200（histogram[200]）之后全部为 0。将 35 重新映射到 0，将 200 重新映射到 255 并相应地插值其间的所有内容将降低总图像对比度。
为了增加对比度，应该应用上述相反的方法，以便从低端和高端“压缩”直方图。

# php - Elasticsearch - 全文搜索

> ID：13485799
> 
> 赞同：0
> 
> 时间：2012-11-21T03:17:26.080
> 
> 标签：php, elasticsearch

我正在尝试在搜索中匹配“纽约”（不是分别包含“新”或“约克”的地方）

这是我当前的查询：

```
"query" : {                        
    "query_string" : {            
        "query" : "new york" ,
        "fields" : ["city"]
    }
},
"filter" : {
    "and" : [{
        "query" : {                 
            "query_string" : {                    
                "query" : "country:US"               
             }            
        }
    }]
} 
```

但是，这会不断返回名为“york”而不是“new york”的地方

我不完全理解它是如何工作的，并且希望能得到一些帮助以使其真正为我工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:37:59.940

如果您希望两个单词出现在同一个文档中，则需要更改默认运算符，如下所示：

```
"query" : {                        
    "query_string" : {            
        "query" : "new york" ,
        "fields" : ["city"],
        "default_operator" : "AND"
    }
} 
```

或在查询中指定它：

```
"query" : {                        
    "query_string" : {            
        "query" : "new AND york" ,
        "fields" : ["city"]
    }
} 
```

查看[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)文档。

否则，如果您希望两个单词在同一个文档中彼此靠近，则需要进行如下的[短语查询](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)：

```
"query" : {
    "match_phrase" : {
        "message" : "new york"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T12:37:15.820

默认情况下，Elasticsearch“分析”中的城市字段对单词进行默认标记化。

```
New York => *New*, *York* 
```

为了保持令牌完整（主要用于聚合），您需要使用多字段显式使城市字段“未分析”

```
'city' => [
            'type' => 'string',
            'fields' => [
            'raw' => [
              'type'  => 'string',
              'index' => 'not_analyzed'
              ]
            ]
        ] 
```

现在您可以使用`city.raw`来获取未分析的值。

# c# - db4o 似乎没有存储添加到列表中的项目

> ID：13485800
> 
> 赞同：1
> 
> 时间：2012-11-21T03:17:34.510
> 
> 标签：c#, .net, db4o

假设我有一个看起来像这样的模型（假的，但作为示例）

```
public class PackageItem
{
    public string Name { get; set;}
    public bool Available { get; set;}
}

public class Package
{
    public string Recipient { get; set;}
    public List<PackageItem> Items { get; set;}
} 
```

首先创建一个新的 Package 实例，其中仅将 Recipient 设置为某个值。

一段时间后，（数据库已在其间关闭），我从数据库中检索它并向其中添加项目：

```
var packages = database.Query<Package>()
foreach(var package in packages)
{
    package.Recipient = "Bla bla bla";
    package.Items.Add(new PackageItem() { Name = "SomeName", Available = true });
    database.Store(package);
}
database.Commit(); 
```

此时，对 Recipient 属性的更改保存在数据库中，但对 Items 属性的添加没有。

我发现一些关于 db4o 的信息不知道发生了什么变化，因为对 List 的引用没有改变，并且 db4o 不知道 List 本身的变化......这是正确的吗？

使用 db4o 时应该如何处理 T 列表？

**更新：**我认为执行

```
database.Store(package.Items); 
```

会有所帮助，但它没有。

这都是在带有 Mono 2.11 的 Debian 上使用 db4o v8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T14:05:16.660

您偶然发现了激活深度。

看看[文档](http://community.versant.com/documentation/reference/db4o-8.1/net/reference/Content/basics/update_concept/updating_collections.htm)。您要么需要明确地将更改存储在集合中：

```
 database.Store(page.Items) 
```

或者增加[更新深度](http://community.versant.com/documentation/reference/db4o-8.1/net/reference/Content/configuration/common/update_depth.htm)。或者切换到[透明持久性](http://community.versant.com/documentation/reference/db4o-8.1/net/reference/Content/basics/transparent_persistence.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T22:16:14.213

除了 Gamlor 提到的选项之外，您还可以在 Store 方法本身中显式定义更新深度（重载的 Store 方法隐藏在 Ext 中），例如：

```
database.Ext().Store(package, int.MaxValue); 
```

# mysql - 如何通过 sys_exec 从 mysql 过程中调用 java 类？

> ID：13485803
> 
> 赞同：2
> 
> 时间：2012-11-21T03:17:49.700
> 
> 标签：mysql, exec

我想通过他在 MySQL 中的 sys_exec 执行 java 代码。我通过**CREATE FUNCTION sys_exec RETURNS STRING SONAME 'lib_mysqludf_sys.dll' 配置了 sys_exec；** 当我运行命令**SELECT sys_exec(" java HelloWorld ") FROM dual**时，这是行不通的。

但它适用于窗口命令行。 **C:\Program Files\MySQL\MySQL Server 5.5\data>java HelloWorld**

你好

系统命令也可以正常工作，如下所示。 **SELECT sys_exec(concat("dir"," /s > C:\out.txt") ) FROM dual** 在 mysql 中工作正常。

如果我想在mysql程序中执行**SELECT sys_exec(" java -cp .;mail.jar;mailapi-1.4.2.jar SendMailTest ") FROM dual ；**我该怎么办，我在使用这个命令时错过了什么？你能举个例子供参考吗？

**C:\Program Files\MySQL\MySQL Server 5.5\data>java -cp .;mail.jar;mailapi-1.4.2.jar SendMailTest** 也可以在窗口命令行中使用。

# iphone - UISearchbar 上的 UITextfield 在模拟器和实际 iPhone 上看起来不同

> ID：13485811
> 
> 赞同：0
> 
> 时间：2012-11-21T03:18:36.783
> 
> 标签：iphone, objective-c, ios, uisearchbar

我设法使用以下代码在 UISearchBar 自定义 UITextfield 的外观：

> ```
> for (UIView *subview in [searchBar subviews]) 
> {
>         if ([subview isKindOfClass:NSClassFromString(@"UISearchBarTextField")]){
>             [(UITextField *)subview setBackground:[UIImage imageNamed:@"background_searchField.png"]];
>             [(UITextField *)subview setTextColor:[UIColor redColor]];
>         }
> } 
> ```

当我使用模拟器时，它看起来正是我想要的。但是，当我在实际的 iPhone 上测试它时，背景图像是不可见的。

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:33:13.863

您在模拟器和设备上是否有相同版本的 iOS？

无论如何，不​​要使用这个黑魔法，UISearchFiled 是通过 UIAppearance 协议高度可定制的，请查看[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)中的“定制外观”部分。[UITextField](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html)也是如此，您可以使用属性覆盖文本颜色和背景，并在“绘图和定位覆盖”中进行更复杂的自定义

# c# - Xna 3D 中的 2D 叠加文本？

> ID：13485812
> 
> 赞同：1
> 
> 时间：2012-11-21T03:19:14.393
> 
> 标签：c#, 3d, xna

当我的游戏是 3D 时，我将如何在 Xna 中绘制 2D 文本。基本上我希望它覆盖在屏幕上，而不是在 3D 环境中的某个位置绘制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:23:17.590

[此处](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.aspx)记录的 SpriteBatch将允许您编写 2D 文本，查看类似[这样](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Writing_text.php)的教程。请参阅[拉绳](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritebatch.drawstring.aspx)。[这](http://msdn.microsoft.com/en-us/library/bb447673.aspx)是一个来自微软的简单例子。

# plone - Dexterity 可以在 sql 中存储字段（包括 uid 或 parentid）吗？

> ID：13485813
> 
> 赞同：0
> 
> 时间：2012-11-21T03:19:25.360
> 
> 标签：plone, dexterity

Archetypes在设计schema时有一个sqlstorage属性，那么Dexterity呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:05:40.223

SQLStorage is deprecated and never really worked in the first place. There is no equivalent for Dexterity, and there will not be. If you need to deploy Plone with a SQL backend, you should use RelStorage, it is modern and battle-tested. [http://pypi.python.org/pypi/RelStorage](http://pypi.python.org/pypi/RelStorage)

# sql - 保存点从未创建错误

> ID：13485818
> 
> 赞同：3
> 
> 时间：2012-11-21T03:19:47.273
> 
> 标签：sql, windows-7, oracle11g, savepoints

我正在尝试在 Oracle 11g 中创建一个保存点。

```
ALTER TABLE ORDERS
DISABLE CONSTRAINT ORDERS_C_ID_FK;

DELETE FROM CUSTOMER;

SELECT * FROM CUSTOMER;

ROLLBACK;

SELECT * FROM CUSTOMER;

SAVEPOINT SAVEPOINT1;

ALTER TABLE ORDERS
DISABLE CONSTRAINT ORDERS_OS_ID_FK;

ALTER TABLE ORDER_LINE
DISABLE CONSTRAINT ORDER_LINE_O_ID_FK;

TRUNCATE TABLE CUSTOMER;
TRUNCATE TABLE ORDER_SOURCE;
TRUNCATE TABLE ORDERS;
DELETE FROM ORDERS;

ROLLBACK TO SAVEPOINT1; 
```

但我不断从 SQL Developer 收到此错误

> ROLLBACK TO SAVEPOINT1 错误报告：SQL 错误：ORA-01086：保存点 'SAVEPOINT1' 从未在此会话中建立或无效 01086\. 00000 - “保存点 '%s' 从未建立” *原因：试图回滚到一个保存点从未成立。*行动：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T03:24:17.917

`DDL`语句`ALTER TABLE`——`TRUNCATE TABLE`在这种情况下——在它们执行之前和之后发出隐式提交。创建保存点的事务在`ALTER TABLE`执行第一条语句之前结束。`DDL`由于只能回滚到当前事务中定义的保存点，因此发出语句后不能回滚到保存点。

# windows-phone-7 - WP7 什么是 E_FAIL

> ID：13485834
> 
> 赞同：0
> 
> 时间：2012-11-21T03:21:39.530
> 
> 标签：windows-phone-7, audio-playback-agent

我正在使用`AudioPlayerAgent`在 Windows Phone 7 上构建音乐应用程序。但是，当`OnPlayStateChanged`在代理中处理事件时，我通常在处理事件时收到**E_FAIL**错误`TrackEnded`

```
case PlayState.TrackReady:
     player.Play();
     break; 
```

那么什么是 E_FAIL 以及如何处理呢？在这里尝试 catch 不是一个好的解决方案

# cakephp-2.1 - cakephp 2.1 包含二级不同的字段名称

> ID：13485839
> 
> 赞同：0
> 
> 时间：2012-11-21T03:22:12.693
> 
> 标签：cakephp-2.1, belongs-to, contain

我无法使用不同的字段名称作为链接从二级包含的值中获取值。

Asistencia 型号：

```
var $belongsTo = array('Employee'); 
```

霍拉里奥型号：

```
var $belongsTo = array('Employee'); 
```

员工模型：

```
 var $hasMany = array(
            'Horario' => array(
                'foreignKey' => 'employee_id',
                'dependent' => true
            ),
            'Asistencia' => array(
                'foreignKey' => 'employee_id',
                'dependent' => true
            )
        ); 
```

我将在我的示例记录中解释使用这些值：

```
Asistencia: employee_id = 3701
Employee  : id          = 3701 
```

在我来自 Asistencia 的 find() 中，我可以通过切换 Employee primaryKey 来包含 Employee 就好了：

```
 $this->Asistencia->Employee->primaryKey = 'id';

    $this->paginate = array(
        'contain' => array(
            'Employee' => array(
                'foreignKey' => 'employee_id',
                //'fields' => array('id', h('emp_ape_pat'), h('emp_ape_mat'), h('name')),
             'Horario' => array(
                    'foreignKey' => 'employee_id',
                //'fields' => array('id' )
            ))
        ),
        'conditions' => $conditions,
        'order' => 'Asistencia.employee_id'); 
```

但是，我的 Horario 记录通过另一个字段链接到员工：emp_appserial

```
Employee  : emp_appserial         =  373
Horario   : employee_id           =  373 
```

我的 Employee 数组如何包含 Horario 数组？（他们确实共享刚刚提到的价值）。

目前，Harario 包含使用 Asistencia.employee_id 和 Employee.id (3701) 上的值。（检查了 sql_dump 并试图通过

```
"WHERE `Horario`.`employee_id` = (3701)" 
```

但要让 Employee 包含 Horario，它应该使用 Employee.emp_appserial 和 Horario.employee_id (373) 上的值。

这就是我得到的（底部的空数组）

```
array(
(int) 0 => array(
    'Asistencia' => array(
        'id' => '5',
        'name' => null,
        'employee_id' => '3701',
        'as_date' => '2012-11-19',
    ),
    'Employee' => array(
        'id' => '3701',
        'emp_appserial' => '373',
        'emp_appstatus' => '8',
        'AgentFullName' => '3701 PEREZ LOMELI JORGE LORENZO',
        'FullNameNoId' => 'PEREZ LOMELI JORGE LORENZO',
        'Horario' => array()
    ))) 
```

请注意：

```
'employee_id' => '3701',  (Asistencia) 
```

和

```
'emp_appserial' => '373',  (Employee) 
```

我的 Horario 有 'employee_id' = 373。

我如何进行切换以使关系 Employee<->Horario 基于 emp_appserial？预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:34:07.353

首先，您可能会遇到问题，因为您在模型名称中使用了西班牙语单词，我怀疑您也在将它们用于控制器。

这是一个非常糟糕的做法，因为 CakePHP 的想法是：

> 约定优于配置。

这是通过[Inflector](http://book.cakephp.org/2.0/en/core-utility-libraries/inflector.html)类实现的，该类“*接受一个字符串并可以操纵它来处理诸如复数或骆驼化之类的单词变化，并且通常是静态访问的*”。但这**仅适用于** 英语单词。这对您来说意味着您可能会丢失数据，因为 Cake 无法正确构建数据库查询，因为您使用的是西班牙语单词。通过这样做，您将放弃使用 CakePHP 灵活的持久层——您将不得不手动进行所有配置。也很可能分页将不起作用。框架的其他部分也可能无法正常工作：HtmlHelper、FormHelper、组件等......

如果您尝试使用更复杂的模型关联，例如 HABTM 或“通过加入模型的 hasMany”，这些问题将会扩大。所以我不知道为什么你没有看到`Horario`记录，但我刚才解释的最有可能是你的问题。

你试图做的是违背 CakePHP 的核心原则，如果你稍微重构一下并使用英文单词，你会为自己省去很多问题。你的另一个选择是不使用蛋糕。

# c++ - 如何将宏 SIGNAL 和 SLOT 实现为 QT 函数

> ID：13485841
> 
> 赞同：0
> 
> 时间：2012-11-21T03:22:49.863
> 
> 标签：c++, qt, pointers, macros

好吧，我想要的是实现像宏 SIGNAL 和 SLOT 一样工作的函数，但使用我自己的实现，所以目标是函数（或者我自己的宏，如果我可以创建它）接收像字符串“mycustomsignal”这样的参数他返回一个 const char* "2mycustomsignal(double,int)" 所以我使用 QMap 来存储这个关联 QMap<"signal name","signal signature">，我将它填充到另一个函数中。

在这种情况下，我的 QMap 是`this->signals`，所以我使用密钥“mycustomsignal”搜索签名“mycustomsignal（something）”并预先添加 QObject::connect 识别信号的代码，我得到“2mycustomsignal（something）”所以我将其转换为 const char* 因为 QObject::connect 具有这种格式的参数，我也想与 SIGNAL 和 SLOT MACROS 结合使用，如下所示：

```
QObject::connect(customwidget, customwidget->getSignal("somesignal"), 
                 somewidget, SLOT(someslot())); 
```

我使用的功能是（仅用于了解我的工作）：

```
const char* SomeClass::getSignal(QString signalName) {
    QString signalsignature = this->signals.value(signalName); 
    signalsignature.prepend(QString::number(QSIGNAL_CODE)); 
    QByteArray ba = signalsignature.toLatin1();
    return signalformated; //Here is the lost of data because QByteArray only exist in the function
} 
```

但这会返回一个指向本地的指针，并且当函数结束时数据源被破坏，那么我如何使用函数或创建自己的宏来做到这一点？

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:24:07.003

您必须从您的方法返回 QByteArray `return ba;`，然后`const char*`从返回值中获取：

```
QObject::connect(customwidget, customwidget->getSignal("somesignal").constData(),
                 somewidget, SLOT(someslot())); 
```

If you really want to return char pointer, then you have to keep the QByteArray around, for example by adding it to a QList member variable of the same object, so it will get destructed when the instance gets destructed.

# database-design - 数据库设计：两个表具有相同的列但不同的外键

> ID：13485844
> 
> 赞同：1
> 
> 时间：2012-11-21T03:22:56.423
> 
> 标签：database-design

我有一个原始表：

```
CREATE TABLE [dbo].[tblSalesOrderPayment]  
(  
    [PaymentID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,  
    [SalesOrderID] [int] NOT NULL,  
    [PaymentType] [int] NOT NULL,  
    [AmountPaid] [decimal](18, 2) NOT NULL,  
    [AmountTendered] [decimal](18, 2) NOT NULL,  
    [PaymentDate] [datetime] NOT NULL,  
    [Cashier] [int] NOT NULL,  
    [PaymentStatus] [bit] NOT NULL  
) 
```

..我设计了另一张这样的桌子

```
CREATE TABLE [dbo].[tblReturnOrderPayment]  
(  
    [PaymentID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,  
    [ReturnOrderID] [int] NOT NULL,  
    [PaymentType] [tinyint] NOT NULL,  
    [AmountPaid] [decimal](18, 2) NOT NULL,  
    [AmountTendered] [decimal](18, 2) NOT NULL,  
    [PaymentDate] [datetime] NOT NULL,  
    [Cashier] [int] NOT NULL,  
    [PaymentStatus] [bit] NOT NULL  
) 
```

.. 如您所见，它具有相同数量的列和类型，但它们具有不同的外键。tblSalesOrderPayment 具有来自 tblSalesOrder 的 SalesOrderID，并且 tblReturnOrderPayment 具有来自 tblReturnOrder 的 ReturnOrderID。

* * *

1.  一旦销售订单已经退回，所有付款明细都应该转移到 tblReturnOrderPayment，但我需要保留 tblSalesOrderPayment 的记录以供参考。
2.  一旦销售订单退回，未来的付款将保存到 tblReturnOrderPayment。

这些桌子的正确设计应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:09:39.893

在表设计级别，您应该询问两个表是否包含相同类型（类）的数据。如果任一表中的一行引用同一类实体的实例，那么它们可能应该在同一个表中，并带有一个标志字段来说明它是否被返回。如果外键不属于给定行，则将其保留为空。

如果这两种行属于同一类但属于不同的子类，那么您可以选择两种设计。这些被称为“单表继承”和“类表继承”。您可以在 SO 中查找相应的标签，或者您可以在网络上查看文章。

# jquery - jquery 手风琴图像

> ID：13485845
> 
> 赞同：0
> 
> 时间：2012-11-21T03:22:55.760
> 
> 标签：jquery, jquery-ui, css, jquery-plugins

我正在尝试将箭头图标包含到我的手风琴中...我不知道如何为这个组合图像编写 css 这是我的图像链接[http://code.jquery.com/ui/1.9.1/themes/base/图像/ui-icons_454545_256x240.png](http://code.jquery.com/ui/1.9.1/themes/base/images/ui-icons_454545_256x240.png)

这是我的js代码

[http://jsfiddle.net/Uf7Nj/3/](http://jsfiddle.net/Uf7Nj/3/)

```
/*!
 * Vallenato 1.0
 * A Simple JQuery Accordion
 *
 * Designed by Switchroyale
 * 
 * Use Vallenato for whatever you want, enjoy!
 */

$(document).ready(function()
{
    //Add Inactive Class To All Accordion Headers
    $('.accordion-header').toggleClass('inactive-header');

    //Set The Accordion Content Width
    var contentwidth = $('.accordion-header').width();
    $('.accordion-content').css({'width' : contentwidth });

    // The Accordion Effect
    $('.accordion-header').click(function () {
        if($(this).is('.inactive-header')) {
            $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }

        else {
            $(this).toggleClass('active-header').toggleClass('inactive-header');
            $(this).next().slideToggle().toggleClass('open-content');
        }
    });

    return false;
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:58:15.637

[只需从jquery-ui css](http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css)中提取所需的图标位置：

CSS：

```
.ui-icon { 
    width: 16px; 
    height: 16px; 
    background-image: url("http://code.jquery.com/ui/1.9.1/themes/base/images/ui-icons_454545_256x240.png");
}

.ui-icon-arrowthick-1-n { background-position: 0 -48px; }
.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }
.ui-icon-arrowthick-1-e { background-position: -32px -48px; }
.ui-icon-arrowthick-1-se { background-position: -48px -48px; }
.ui-icon-arrowthick-1-s { background-position: -64px -48px; }
.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }
.ui-icon-arrowthick-1-w { background-position: -96px -48px; }
.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }
.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }
.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }
.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }
.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; } 
```

[样本](http://jsfiddle.net/oceog/Uf7Nj/10/)

要获得图标的名称，请转到[主题滚动页面](http://jqueryui.com/themeroller/)，将 鼠标悬停在您需要的图标上，打开 css 文件，在那里找到图标的名称，将代码复制到新的 css。

# java - ListView 中的组件不会在 AJAX 刷新时更新

> ID：13485850
> 
> 赞同：0
> 
> 时间：2012-11-21T03:23:24.887
> 
> 标签：java, wicket

我有一个包含 ListView 和子项（表单控件）的 Wicket 面板，但是当我按下内部 CheckBox 时，一些子项的可见性应该会改变。

但是，在 AJAX 更新期间重绘 ListView 后，调用 WebMarkupContainer.setVisible(false) 不会隐藏 ListView 中的项目。

下面的代码：

```
public class ImagePanel extends Panel {

private ArrayList<ImageEntry> imageEntryList;

public class ImageEntry implements Serializable {

    private static final long serialVersionUID = -3987685200930059655L;

    public String thumbnail;
    public String filename;
    public boolean webDownloaded;
    public WebMarkupContainer fileUpload;
    public WebMarkupContainer webDownload;
}

public ImagePanel(String id) {
    this(id, IMAGE_NORMAL);
}

public ImagePanel(String id, int type) {
    super(id);
    this.type = type;

    wmc = new WebMarkupContainer ("wmc");
    wmc.setOutputMarkupId(true);
    add(wmc);

    imageEntryList = new ArrayList<ImageEntry>();
    ImageEntry imageEntry = new ImageEntry();
    imageEntry.thumbnail = "blah";
    imageEntry.filename = "blah";
    imageEntryList.add(imageEntry);

    ListView<ImageEntry> llv = new LargeImageListView("large_image_list", imageEntryList);
    wmc.add(llv);

    SmallImageListView slv = new SmallImageListView("small_image_list", imageEntryList);
    wmc.add(slv);
}

private final class SmallImageListView extends ListView<ImageEntry> {

    private SmallImageListView(String id, List<? extends ImageEntry> list) {
        super(id, list);
    }

    @Override
    protected void populateItem(final ListItem<ImageEntry> item) {

            ... 

        if (type == IMAGE_WIZARD) {
            item.getModelObject().fileUpload = showWizardFileUpload(item);
            item.getModelObject().webDownload = showWizardWebDownload(item);
            showSortUpDown(item);
            showWebCheckbox(item);
        }

    }
}

private void showWebCheckbox(final ListItem<ImageEntry> item) {

    AjaxCheckBox checkbox = new AjaxCheckBox("use_web_image", new PropertyModel<Boolean>(item.getModelObject(), "webDownloaded")) {

        public void onUpdate(AjaxRequestTarget target) {

            if (getModelObject()) {
                System.out.println("Show");
                item.getModelObject().fileUpload.setVisible(false);
                item.getModelObject().webDownload.setVisible(false);
            } else {
                System.out.println("Hide");
                item.getModelObject().fileUpload.setVisible(false);
                item.getModelObject().webDownload.setVisible(false);
            }

            target.add(wmc);
        }

    };

    item.add(checkbox);
}   

    ... 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:23:24.887

使用 ListView.setReuseItems(true) 确保 ListView 中的对象被正确序列化...否则，您每次都会收到不同的对象，并且 .setVisible() 属性将被重置为其默认值（例如 'true' ）。

```
slv.setReuseItems(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:13:50.757

尝试

```
WebMarkupContainer.add(new AttributeModifier("style", new Model("display:none"))); 
```

或者

```
WebMarkupContainer.add(new AttributeAppender("style", new Model("display:none"), "=")); 
```

反而。

# mysql - 是否应该使用 id 或时间戳来确定数据库表中行的创建顺序？（考虑到错误设置系统时钟的可能性）

> ID：13485852
> 
> 赞同：3
> 
> 时间：2012-11-21T03:23:27.893
> 
> 标签：mysql, database, schema

数据库表用于存储对文本文档的编辑更改。

数据库表有四列： { `id`, `timestamp`, `user_id`, `text`}

每次用户编辑文档时，都会向表中添加一个新行。新行具有自动递增的 id，以及与数据保存时间相匹配的时间戳。

为了确定用户在特定编辑期间进行了哪些编辑更改，将`text`响应他或她的编辑而`text`插入的行中的 与先前插入的行中的 进行比较。

要确定哪一行是先前插入的行，可以使用`id`列或`timestamp`列。据我所知，每种方法都有优点和缺点。

**使用确定创建顺序`id`**

*   优点：不受错误设置系统时钟导致的问题的影响。

*   缺点：似乎是对`id`列的滥用，因为它为列规定了除身份之外的含义`id`。管理员可能出于任何原因（例如，在数据迁移期间）更改一组 id 的值，因为只要它们是唯一的，这些值是什么并不重要。然后无法再确定行的创建顺序。

**使用确定创建顺序`timestamp`**

*   优点：该`id`列仅用于标识，而`timestamp`用于时间，因为它应该是。
*   缺点：只有在每次将行插入表时都知道系统时钟已正确设置时，此方法才可靠。怎么能相信每个插入的系统时钟都正确设置了呢？如果发现系统时钟在过去某个不准确的时期被错误地设置，那么如何修复表的状态？

我寻求一个强有力的论据来选择一种方法而不是另一种方法，或者描述另一种比我正在考虑的两种方法更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:43:01.713

使用标识。这很简单并且有效。

唯一需要注意的是，如果您经常从存储转发服务器添加行，那么可以稍后添加行，但应将其视为较早添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:46:46.870

使用顺序`id`会更简单，因为它可能是（？）主键，因此被索引并且访问速度更快。鉴于您拥有`user_id`，您可以快速断言上次和之前的编辑。

使用`timestamp`也是适用的，但它可能是一个更长的条目，而且我们根本不知道它是否被索引，以及发生冲突的可能性。您正确地指出系统时钟可以改变......而序列`id`的不能。

**鉴于您的更新：**

由于很难看出您的确切要求是什么，因此我将其作为特定项目需要 200K+ 复杂文档和数百万次修订的证据。

根据我自己的经验（为 60 多名全职研究人员组成的内部团队构建一个完全可审计的文档/分析系统）。我们最终使用了一个`id`和许多其他字段（包括`timestamp`）来提供审计跟踪和完整版本控制。

我们为每个配置文件构建的系统有 200 多个字段，因此对文档进行版本控制远比为每个配置文件存储一块更改的文本/内容要复杂得多；然而，每个配置文件都可以被编辑、批准、拒绝、回滚、发布，甚至可以导出为 PDF 或其他格式作为一个文档。

我们最终做的（经过大量策略/计划）是存储配置文件的顺序版本，但它们***主要*****在****字段上****键入*`id`****。*

 ***时间戳**

时间戳也被捕获作为辅助检查，我们通过使用定期检查时间对齐并在必要时更正它们的 cron 脚本确保保持系统时钟准确（在服务器集群中）。我们还使用[Ntpd](http://en.wikipedia.org/wiki/Ntpd)来防止时钟漂移。

**其他捕获的数据**

为每次编辑捕获的其他数据还包括（但不限于）：

```
User_id
User_group
Action
Approval_id 
```

还有其他表格满足内部要求（包括为文档自动生成的注释） - 因为一些配置文件编辑是使用来自机器人的数据完成的（使用 NER/机器学习/AI 构建），但需要获得其中之一的批准可以发布编辑/更新之前的团队。

还保存了所有用户操作的操作日志，以便在审核时，可以查看单个用户的操作 - 即使他们没有执行此类操作的权限，它仍然被记录下来.

关于迁移，我不认为这是一个大问题，因为您可以轻松地在移动/转储/传输数据中保留 id 序列。也许唯一的问题是您是否需要合并数据集。在那种情况下，您总是可以编写一个迁移脚本 - 所以从个人角度来看，我认为这个缺点有所减少。

可能值得查看那里的数据浏览器的 Stack Overflow 表结构（相当复杂）。您可以在此处查看表结构：[https](https://data.stackexchange.com/stackoverflow/query/new) ://data.stackexchange.com/stackoverflow/query/new ，它来自关于元的问题：[SO 如何存储修订？](https://meta.stackexchange.com/questions/87224/how-does-so-store-revisions)

作为一个修订系统，SO 运行良好，降价/修订功能可能是一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:49:37.177

或者添加另一列，其唯一目的是记录编辑顺序。我建议您不要为此使用日期时间。*

# php - 如何将不同的智能应用横幅添加到 wordpress 网站上的各个页面？

> ID：13485853
> 
> 赞同：0
> 
> 时间：2012-11-21T03:23:54.503
> 
> 标签：php, ios, wordpress, escaping, double-quotes

我的移动网站（wordpress，自托管）有多个页面，每个页面都应该有一个独特的智能应用横幅，以鼓励用户下载与该特定页面相关的应用。

如果我遗漏了一些简单的东西，我深表歉意，但我对 php 很陌生。

在 header.php 文件中，我将以下代码块放在“/head”之前

```
<?php if ( is_page_template( 'read.php' ) ) 
print ("<meta name="apple-itunes-app" content="app-id=574041839"/>"); ?> 
```

不幸的是，我在第一行得到了一个错误。解析错误：语法错误，第 32 行 /home/content/b/e/r/berrymed/html/wp-content/themes/TheCorporation/header.php 中的意外 T_STRING

任何意见，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:32:15.963

您需要转义`"`要使用输出的 html 代码中的符号`print`。如果你不这样做，php 会认为你想要输出`"<meta name="`，然后它会得到意外的字符串（如错误中引用的那样）`apple-itunes-app`。以下是它的外观：

```
<?php if ( is_page_template( 'read.php' ) ) 
print ("<meta name=\"apple-itunes-app\" content=\"app-id=574041839\"/>"); ?> 
```

* * *

或者，如果您`"`在输出字符串中使用双引号 ( )，则可以将其用单引号括起来（`'`就像使用`is_page_template`) 一样，这样您就不必转义：

```
<?php if ( is_page_template( 'read.php' ) ) 
print ('<meta name="apple-itunes-app" content="app-id=574041839"/>'); ?> 
```

# r - R-Lattice 封装：1 个 x 轴用于多个 y 轴

> ID：13485854
> 
> 赞同：1
> 
> 时间：2012-11-21T03:24:04.247
> 
> 标签：r, lattice

我的问题与此类似： [Plotting bar plot below xyplot with same x-axis?](https://stackoverflow.com/questions/10028137/plotting-bar-plot-below-xyplot-with-same-x-axis) ，但对于 lattice 包而不是 ggplot。

我有 21 个 xyplots，都具有相同的 x 轴刻度，但不同的 y 轴刻度。我想用只有 1 个 x 轴但 21 个不同的 y 轴比例（每行一行）绘制所有 21 条线。我几乎在这里：![21 个 xyplots，1 个 x 轴](../Images/a6cd13b9e3491176cabdcbcc7bcc484d.png)，但是每个面板上打印的冗余 x 轴使这个数字变得荒谬。我的脚本：

```
xyplot(numhr~year | spp, xlab = "Time(years)", 
ylab = "Abundance (# per party hr)", type = "l", aspect = "fill",
strip = FALSE, scales = list(relation = "free"), as.table = TRUE,
layout = c(1,21), xlim = c(1940,2010)) 
```

有什么帮助吗？

〜凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:15:41.403

根据上面的评论，对我的代码进行必要的更改以使其工作涉及将 'y = list(relation = "free")' 添加到 'scales' 组件。编辑代码如下：

```
xyplot(numhr~year | spp, xlab = "Time(years)", 
ylab = "Abundance (# per party hr)", type = "l", aspect = "fill",
strip = FALSE, scales = list(y = list(relation = "free")), as.table = TRUE,
layout = c(1,21), xlim = c(1940,2010)) 
```

这会产生这个（不幸的是，y轴仍然太紧凑，但这确实解决了最初提出的问题）： ![改进的带有 1 个 x 轴的 xyplot](../Images/7ed1a73d48606c01718b1d69e14a20b2.png)

# c# - 计算每个句子中有多少个单词

> ID：13485856
> 
> 赞同：1
> 
> 时间：2012-11-21T03:24:11.347
> 
> 标签：c#

我被困在如何计算每个句子中有多少单词，一个例子是：`string sentence = "hello how are you. I am good. that's good."` 并让它像这样出现：

```
//sentence1: 4 words
//sentence2: 3 words
//sentence3: 2 words 
```

我可以得到句子的数量

```
 public int GetNoOfWords(string s)
    {
        return s.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries).Length;
    }
    label2.Text = (GetNoOfWords(sentance).ToString()); 
```

我可以得到整个字符串中的单词数

```
 public int CountWord (string text)
    {
        int count = 0;
        for (int i = 0; i < text.Length; i++)
        {
            if (text[i] != ' ')
            {
                if ((i + 1) == text.Length)
                {
                    count++;
                }
                else
                {
                    if(text[i + 1] == ' ')
                    {
                        count++;
                    }
                }
            } 
        }
        return count;
    } 
```

然后按钮1

```
 int words = CountWord(sentance);
        label4.Text = (words.ToString()); 
```

*但*我数不清每句话有多少个单词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:27:42.027

而不是像你在`CountWords`我做的那样循环字符串;

```
 int words = s.Split(' ').Length; 
```

它更加干净和简单。您在空白处拆分，它返回所有单词的数组，该数组的长度是字符串中的单词数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T03:28:57.463

为什么不使用拆分呢？

> ```
>  var sentences = "hello how are you. I am good. that's good.";
> 
>         foreach (var sentence in sentences.TrimEnd('.').Split('.'))
>             Console.WriteLine(sentence.Trim().Split(' ').Count()); 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:30:25.597

如果你想要每个句子中的单词数，你需要

```
string s = "This is a sentence. Also this counts. This one is also a thing.";
string[] sentences = s.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries);
foreach(string sentence in sentences)
{
    Console.WriteLine(sentence.Split(' ').Length + " words in sentence *" + sentence + "*");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T03:32:14.693

对 s.Split 返回的数组的每个元素使用 CountWord：

```
string sentence = "hello how are you. I am good. that's good.";
string[] words = sentence.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries).Length;

for (string sentence in sentences)
{
    int noOfWordsInSentence = CountWord(sentence);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T03:33:23.060

```
string text = "hello how are you. I am good. that's good.";
string[] sentences = s.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries);
IEnumerable<int> wordsPerSentence = sentences.Select(s => s.Trim().Split(' ').Length); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T03:34:50.517

正如此处的几个答案中所述，请查看拆分、修剪、替换等字符串函数以帮助您进行操作。这里的所有答案都将解决您的简单示例，但这里有一些句子可能无法正确分析；

```
"Hello, how are you?" (no '.' to parse on)
"That apple costs $1.50."  (a '.' used as a decimal)
"I   like     whitespace    .    "   
"Word" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-13T10:08:18.027

如果您只需要计数，我会避免`Split()`- 它占用了不必要的空间。也许：

```
static int WordCount(string s)
{
    int wordCount = 0;
    for(int i = 0; i < s.Length - 1; i++)
        if (Char.IsWhiteSpace(s[i]) && !Char.IsWhiteSpace(s[i + 1]) && i > 0)
            wordCount++;
    return ++wordCount;
}

public static void Main()
{
    Console.WriteLine(WordCount(" H elloWor    ld g  ")); // prints "4"
} 
```

它根据空格数（1 个空格 = 2 个单词）计算。连续的空格被忽略。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-21T03:30:46.160

你的句子拼写是：

```
int words = CountWord(sentance); 
```

有什么关系吗？

# svg - @font-face 在 iphone/ipad 上不起作用

> ID：13485857
> 
> 赞同：3
> 
> 时间：2012-11-21T03:24:14.410
> 
> 标签：svg, mobile-safari, font-face, mime-types

我从 Font Squirrel 下载了两个字体套件，它们可以在除 iphone/ipad 之外的任何地方使用。这让我觉得 svg 文件有问题。

我在另一个站点（通过同一主机）上从 font squirrel 下载了另一种字体，该字体在我的移动设备上运行良好，我看不出它们之间有什么区别可以使字体在一个站点上工作而不是在另一个站点上工作。

我的主机识别 svg（这里这么说：[http](http://wiki.dreamhost.com/MIME_Types) ://wiki.dreamhost.com/MIME_Types ），所以我认为这不是 MIME 类型的问题。不过我对此知之甚少，可能会遗漏一些东西。

我还检查了我的 svg 文件中的 id，它们与我的 @font-face 声明中的 #id 匹配：

```
@font-face {
    font-family: 'BebasNeueRegular';
    src: url('BebasNeue-webfont.eot');
    src: url('BebasNeue-webfont.eot?#iefix') format('embedded-opentype'),
         url('BebasNeue-webfont.woff') format('woff'),
         url('BebasNeue-webfont.ttf') format('truetype'),
         url('BebasNeue-webfont.svg#BebasNeueRegular') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'OswaldStencilRegular';
    src: url('Oswald-Stencil-webfont.eot');
    src: url('Oswald-Stencil-webfont.eot?#iefix') format('embedded-opentype'),
         url('Oswald-Stencil-webfont.woff') format('woff'),
         url('Oswald-Stencil-webfont.ttf') format('truetype'),
         url('Oswald-Stencil-webfont.svg#OswaldStencilRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

有谁知道这里可能出现什么问题？

# mysql - 我怎样才能找出最近 4 周的记录数？

> ID：13485860
> 
> 赞同：1
> 
> 时间：2012-11-21T03:24:16.600
> 
> 标签：mysql

我的表结构就像

```
CREATE TABLE `survey` (
  `id` int(11) NOT NULL auto_increment,
  `submitdate` datetime default NULL,
 `answer` varchar(5) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=499 ; 
```

现在我想计算过去 4 周的记录数。

一件事是，如果假设在特定的一周没有记录，它应该列为 0

这里的示例输出就像

```
count(*) week 
  0      mon-sun  //29 oct -  4 nov every week starts from monday and ends with sunday 
  4      mon-sun  //5 nov -  11 nov
  45     mon-sun  //12 nov -  18 nov  last week 
  0      mon-sun  //18 nov - 25 nov  latest week 
```

假设今天是星期一，然后周范围更改为最近一周的周一至周日。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:30:44.350

查询将如下所示：

```
SELECT
    s.id,
    DATE(DATE_SUB(s.submitdate,INTERVAL(DAYOFWEEK(s.submitdate) - 2) DAY)) AS weekStart,
    ADDTIME(SUBTIME(SUBDATE(s.submitdate,INTERVAL(DAYOFWEEK(s.submitdate) - 8)DAY),TIME(s.submitdate)),MAKETIME(23,59,59)) AS weekEnd,
    COUNT(*) AS total
FROM survey s
GROUP BY weekStart
LIMIT 0,3 
```

# sql-server-ce - Sql Compact 3.5 同步失败

> ID：13485864
> 
> 赞同：0
> 
> 时间：2012-11-21T03:24:50.183
> 
> 标签：sql-server-ce, microsoft-sync-framework

我有一个在 2 个数据库之间同步的应用程序：中央数据库托管在 Sql Server 2008 上，本地数据库是 Sql Compact 3.5 数据库。

有时我需要升级同步范围中包含的一个表的架构，我不想再次取消配置和配置，所以我使用[了这种](http://jtabadero.wordpress.com/2011/04/13/modifying-sync-framework-scope-definition-part-3-workarounds-addingremoving-columns/)方法，对于 Sql Compact，我有这样的东西：

```
public void UpdateProvisionSchema(string connString, string scopeName, string newConfigData)
{
    _log.Verbose("UpdateProvisionSchema: " + scopeName);

    try
    {
        string query = string.Format("SELECT [scope_config_id] FROM [scope_info] WHERE [sync_scope_name]='{0}'", scopeName);
        Guid config_id = (Guid)SqlCompactManager.ExecuteScalar(connString, query);

        string updateCommand = string.Format("UPDATE scope_config SET [config_data]='{0}' WHERE [config_id] ='{1}'", newConfigData, config_id);
        SqlCompactManager.ExecuteCommand(connString, updateCommand);
    }
    catch (Exception ex)
    {
        _log.Error(ex, string.Format("Failed to upgrade schema for scope {0}", scopeName));
        throw new Exception(string.Format("Update of provisioned schema failed for scope: {0}", scopeName));
    }
} 
```

我手动更改表的配置范围。我认为我发送的范围配置是正确的，因为我通过配置一个空表来生成它。

我刚刚向包含在同步范围内的表中添加了一个列（其数据仅从中央数据库下载到本地数据库），现在我在 ApplyChangeFailed 上收到错误消息。

似乎在Sql Compact数据库中，存在问题的同步范围中包含的表有这一列：中央表上不存在的__sysTrackingContext。

我第一次创建表并配置它们，然后我添加了 2 个新列（BusinessType、HideCommentAndSerialNumber）。如果我查看 DbApplyChangeFailedEventArgs 并检查列，我会看到以下内容：

中央：

..| 业务类型 | 隐藏评论和序列号 | sync_update_peer_timestamp | sync_update_peer_key | sync_create_peer_timestamp | sync_create_peer_key |

当地的：

..| __sysTrackingContext | 业务类型 | sync_update_peer_key | 隐藏评论和序列号 | sync_update_peer_timestamp | sync_create_peer_key | sync_create_peer_timestamp |

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:39:58.410

我发现了问题。发生问题的范围是，它仅将数据从中央数据库下载到本地数据库。

当我更新表架构时，我执行了以下操作： - 将列添加到两个数据库 - 更新两个数据库上新列的值 - 更新两个数据库上的配置架构

问题是我执行了一个脚本来更新两个数据库上的列值。它只需要在中央数据库上执行，同步时数据会下载到客户端。

我已经改变了它，现在它可以工作了；并且它以前也适用于类似的场景（添加/删除/更改已经在同步范围内的表的列类型）。

# sql-server - 删除所有文件和文件组示例

> ID：13485871
> 
> 赞同：2
> 
> 时间：2012-11-21T03:25:48.963
> 
> 标签：sql-server, sql-server-2008

这是一个简单的文件组，

```
USE master
GO
ALTER DATABASE AdventureWorks2012
ADD FILEGROUP Test1FG1;
GO
ALTER DATABASE AdventureWorks2012 
ADD FILE 
(
    NAME = test1dat3,
    FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\t1dat3.ndf',
    SIZE = 5MB,
    MAXSIZE = 100MB,
    FILEGROWTH = 5MB
),
(
    NAME = test1dat4,
    FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\t1dat4.ndf',
    SIZE = 5MB,
    MAXSIZE = 100MB,
    FILEGROWTH = 5MB
)
TO FILEGROUP Test1FG1;
GO 
```

在此我想删除与组 Test1FG1 和组 Test1FG1 关联的所有文件。怎么做？

提前致谢

# php - log4php：无法创建日志文件

> ID：13485872
> 
> 赞同：2
> 
> 时间：2012-11-21T03:25:57.180
> 
> 标签：php, log4php

我使用 log4php 来写文件日志。这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns="http://logging.apache.org/log4php/">
    <appender name="default" class="LoggerAppenderDailyFile">
        <layout class="LoggerLayoutPattern">
            <param name="conversionPattern" value="%date %logger %-5level %msg%n" />
        </layout>
        <param name="file" value="/path/to/log/register-%s.log" />
        <param name="datePattern" value="Y-m-d" />
        <param name="append" value="true" />
    </appender>
    <root>
        <level value="info" />
        <appender_ref ref="default" />
    </root>
</configuration> 
```

这是 PHP 中的初始化代码：

```
require_once('/path/to/log4php/Logger.php');
require_once('/path/to/log4php.xml');
$logger = Logger::getLogger(basename(__FILE__));
$logger->info('Testing'); 
```

文件夹权限设置为 777（它是 Ubuntu Linux 服务器），但未创建日志文件。如何调试 log4php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:08:19.807

使用配置调用的正确方法是：

```
require_once('/path/to/log4php/Logger.php');
Logger::configure('/path/to/log4php.xml');
$logger = Logger::getLogger(basename(__FILE__));
$logger->info('Testing'); 
```

正如 Shivan Raptor 所说，首先要做的是检查日志是否存在权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T07:42:31.707

**试试这个**

起初看起来很复杂，但事实并非如此。

**主文件**

```
require_once('/path/to/log4php/Logger.php');
Logger::configure('log4php.xml');

Class Log
{
    private $log;

    public function __construct()
    {
        $this->log = Logger::getLogger(__CLASS__);
    }
    public function myLog()
    {
        //this prints your data.
        $this->log->info("Hello, this is log here");
    }
}

//simply call the function
$log=new Log();
$log->myLog(); 
```

**log4php.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<log4php:configuration xmlns:log4php="http://logging.apache.org/log4php/">
    <appender name="fileappender" class="LoggerAppenderFile">
        <layout class="LoggerLayoutSimple" />
        <param name="file" value="/path/to/log/register-%s.log" />
        <!-- <param name="append" value="true" /> -->
    </appender>
    <logger name="Log">
        <appender_ref ref="fileappender" />
    </logger>
</log4php:configuration> 
```

**注意**：不要忘记给文件夹 777 权限 :)

# java - 为什么这行不通？

> ID：13485873
> 
> 赞同：0
> 
> 时间：2012-11-21T03:26:11.187
> 
> 标签：java

```
import java.util.*;

class HashingDemo {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);

        System.out.print("Please input the size of the hash table: ");
        int tableSize = keyboard.nextInt();

        LinkedListN[] hashTable = new LinkedListN[tableSize];

        // this works
        LinkedListN list = new LinkedListN();
        list.addToEnd(50);
        System.out.println(list);
        //

        System.out.print("Enter the number of keys to be hashed: ");
        int numberOfKeys = keyboard.nextInt();

        Random randomGenerator = new Random();

        for (int i = 0; i < numberOfKeys; i++) {
            int randomNumber = randomGenerator.nextInt(10000) + 1;

            int location = randomNumber % tableSize;

            hashTable[location].addToEnd(randomNumber);
        }
    }
} 
```

LinkedListN 是一个自定义类（代码附在下面），因为数组不能很好地处理泛型。

但是每次我运行这个程序时，我都会收到以下错误：

```
Please input the size of the hash table: 10
LinkedListN@5265a77f
Enter the number of keys to be hashed: 20
Exception in thread "main" java.lang.NullPointerException
    at HashingDemo.main(HashingDemo.java:30) 
```

即使正如我上面评论的那样，如果我只有一个 LinkedListN 并向其中添加数据，也没有问题。这是怎么回事？我已经尝试并试图弄清楚，但我做不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T03:29:13.750

`LinkedListN[] hashTable = new LinkedListN[tableSize];`只是分配数组，而不是其中的对象。为了克服`NullPointerException`你必须为每个元素分配对象：

```
for (int i = 0; i < numberOfKeys; i++) {
    int randomNumber = randomGenerator.nextInt(10000) + 1;
    int location = randomNumber % tableSize;
    if(hashTable[location]==null) {
        hashTable[location] = new LinkedListN();
    }
    hashTable[location].addToEnd(randomNumber);
} 
```

你错过了这条线**`hashTable[location] = new LinkedListN();`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:31:01.763

将循环更改为：

```
for (int i = 0; i < numberOfKeys; i++) {
    int randomNumber = randomGenerator.nextInt(10000) + 1;
    int location = randomNumber % tableSize;

    if(hashTable[location] == null)
        hashTable[location] = new LinkedListN();
    hashTable[location].addToEnd(randomNumber);
} 
```

否则，`hashTable[location]`当您第一次使用它们时，s 将为空。

# c# - 如何创建故障转移窗口服务？

> ID：13485874
> 
> 赞同：1
> 
> 时间：2012-11-21T03:26:12.500
> 
> 标签：c#, windows-services, high-availability

我有一个要求，我需要同时运行自定义窗口服务代码的两个实例，但只有一个应该做这项工作，直到另一个失败或死亡。

我试图想出干净简单的设计来做到这一点。

单程：

1.  创建临时表
2.  并让这两个服务通过表格相互交谈
3.  如果正在运行的人出现故障，则可能使用桌子上最后修改的日期时间
4.  然后另一个将开始

但这是非常手动的。我正在使用 c# 4.0。

有没有更好的方法来实现这一目标？

我看到有类似[EventWaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle%28v=vs.100%29.aspx)的东西，但不确定使用它是否简单。

谢谢~m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T06:57:52.150

1.  使用通用数据库实现一种锁/互斥锁（如您所述）
2.  如果不同服务器上的实例彼此认识（配置？），他们可以互相聊天并决定谁是老板。
3.  如果实例彼此不认识，请尝试使用 UDP 广播向彼此宣布自己，然后决定谁是老板。

如果您能够做到 #1 并通过 Web 服务对其进行通用公开，那么该解决方案也可以用于其他应用程序。我自己使用这样的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T04:02:01.970

考虑在两个服务上公开一个 ping api 端点（简单的 Rest API ping 方法），以便每个服务都可以监控另一个服务状态。

# dojo - CheckMultiSelect - Dojo

> ID：13485878
> 
> 赞同：1
> 
> 时间：2012-11-21T03:26:52.813
> 
> 标签：dojo

```
 <input data-dojo-type="dijit.form.FilteringSelect"    
            data-dojo-props="name: 'jobSelect', store:Practiv.Q.jobStore, searchAttr:'JobNumber'"   
            id="jobIdSelect"  /> 
```

目前，上面的代码显示了一个下拉菜单，其中包含可以选择的项目。我目前想在下拉列表中添加一个复选框。我已经用下面的代码替换了它。

```
<select data-dojo-type="dojox.form.CheckedMultiSelect"  
            data-dojo-props="name: 'jobSelect', store:Practiv.Q.jobStore, searchAttr:'JobNumber'"   
            id="jobIdSelect" ></select> 
```

不幸的是它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:34:34.993

而不是像这样在 data-dojo-props 集中设置存储：-

```
<select data-dojo-type="dojox.form.CheckedMultiSelect"  store="Practiv.Q.jobStore" 
            data-dojo-props="name: 'jobSelect', searchAttr:'JobNumber'"   
            id="jobIdSelect" ></select> 
```

首先，您必须确保您的商店已连接到 CheckMultiSelect。

# ruby-on-rails - 应用程序配置不允许给定 URL... 仅有时

> ID：13485880
> 
> 赞同：1
> 
> 时间：2012-11-21T03:27:12.593
> 
> 标签：ruby-on-rails, facebook, localhost, koala

我正在使用 facebook SDK 进行本地 Rails 开发，并将我的站点 URL 和画布 URL 分别更改为`localhost:3000/settings`和`localhost:3000/facebook/index`。在用户进行身份验证后，`settings/`他们将被重定向到`facebook/index` 但是在任一页面上我都会收到此消息

应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

这种情况偶尔会发生，而不是一直发生，当我尝试登录时，它会导致 facebook SDK（弹出登录）给出相同的错误消息。我不确定是什么原因造成的，有谁知道为什么?

编辑：NVM 这是固定的，我发现 fb.js 被加载了两次，严重错误！

# javascript - 从 iframe 打开弹出窗口 > 使用该弹出窗口转发（打开器）父窗口（IE 问题）

> ID：13485883
> 
> 赞同：0
> 
> 时间：2012-11-21T03:27:40.083
> 
> 标签：javascript, internet-explorer, iframe, popup, postmessage

这段代码我在 Chrome/FF/safari 中工作，但在 IE9 中没有。我试图弄清楚 IE 有什么问题。

Domain1.com 有一个托管在 domain2.com 上的 iframe - iframe 触发一个弹出窗口（托管在 domain2.com 上），然后该弹出窗口上的链接 a）将 domain1.com 页面转发到 domain2.com 上的某个位置，b）关闭弹出。

我有这个基于[这篇文章/答案的代码](https://stackoverflow.com/questions/1860470/changing-parent-windows-url-from-iframe)

1）domain1.com（上面有 iframe 和 IE 特定代码用于处理事件）

```
 <script type="text/javascript">
    if(navigator.appName == "Microsoft Internet Explorer")          
        window.attachEvent("onmessage", receiveMessage);
    else
        window.addEventListener("message", receiveMessage, false);            

    function receiveMessage(e) {
      if(e.origin == "http://www.domain2.com") //important for security
        if(e.data.indexOf('redirect:') == 0)
          document.location = e.data.substr(9);
    }
  </script>
<iframe src="http://www.domain2.com/iframetest_deleteme.html" width="400" height="150">      
</iframe> 
```

2）domain2.com（iframe的内容，JS只是一个poup）

```
<script type="text/javascript" >
 jQuery(function($){ 
        $("a[rel*=external]").click(function(){ 
            window.open("http://domain2.com/iframetest_deleteme_popup.html", "", "location=0, menubar=0, resizable=no, toolbar=no, menubar=no, scrollbars=no, width=300, height=100")
            return false; 
        });
 }); 
 </script>
<a href="#" rel="external">open popup from iframe</a> 
```

3）domain2.com（弹出的内容-JS应该重定向弹出的父级）

```
<script type="text/javascript">
 jQuery(function($){ 
        $("a[rel*=external]").click(function(){             
            opener.parent.postMessage('redirect:http://www.google.com', 'http://domain1.com');
            window.close(this);         
            return false; 
        });
 }); 
 </script>

 <p><a href="#" rel="external">javascript link</a></p> 
```

我已经玩了很长时间了，无法弄清楚为什么 IE9 不能使用它。

它是实时的，可以在所有非 IE 浏览器中进行测试/查看：http: [//alexhays.com/test/](http://alexhays.com/test/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T12:27:57.700

postmessage 在 ie8 和 ie9 上无法用于弹出通信

[http://www.felocity.com/article/window_postmessage_problems_and_workarounds_for_ie8/](http://www.felocity.com/article/window_postmessage_problems_and_workarounds_for_ie8/)

# solr - SolrCloud 正在检测不存在的节点

> ID：13485885
> 
> 赞同：0
> 
> 时间：2012-11-21T03:27:41.823
> 
> 标签：solr, apache-zookeeper, solrcloud

我在 SolrCloud 遇到了一个有趣的情况。基本上，我不知道为什么，但是通常不在云中的 Solr 实例显示在 SolrCloud 页面上，并且`live_nodes`在 Zookepeer 的路径中也可见。

以下是有关情况的详细信息：

我有一个 Solr 实例，在虚拟机上作为独立应用程序运行，位于删除机器上。`virtual1`从现在开始，我们将调用它。

这是运行它的脚本：

```
java
-server
-XX:+UnlockExperimentalVMOptions
-XX:+UseG1GC
-XX:+UseCompressedStrings
-Dcom.sun.management.jmxremote
-d64
-Xmx4096m
-Dcom.sun.management.jmxremote.port=9999
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=false
-Djava.rmi.server.hostname=remotehost -jar start.jar 
```

该实例在 8983 端口上运行，因此当您转到 时`virtual1:8983`，您会看到 solr 的经典管理页面。其余的配置与示例 solr 相同，示例 solr 附带 solr 分布。

然后，在我的本地机器上（`local`将从现在开始调用），我在端口上运行我的 zookeeper 服务器，`2181`并且`2182`

然后为了将我的 solr 实例添加到云中，我只是在我的本地机器上运行一个实例，然后再运行两个实例`virtual1`，启动它们的脚本如下：

我本地的 Solr 实例：

```
java -Dbootstrap_conf=true -DzkHost=zkhost:2181 -Djetty.port=8984 -jar start.jar 
```

Solr 远程实例：

```
java -DzkHost=zkhost:2181 -Djetty.port=8985 -jar start.jar
java -DzkHost=zkhost:2182 -Djetty.port=8986 -jar start.jar 
```

直到这里，Solr 或 Zookeeper 日志中都没有异常或错误。

当我检查`virtual1:8985 and virtual1:8986`它们都在运行时，以及我本地的实例。

但是当我检查云时（来自 Solr 管理页面和 zookeeper CLI）。我只能在云中看到`local:8983`和，而根本没有添加...奇怪的是，从上面的启动脚本中可以看到，它对 Zookeeper 服务器一无所知。`virtual1:8983``virtual1:8985 and virtual1:8986``virtual1:8983`

除了上述事实，我还尝试了另一件事。`virtual2`在与 运行在同一台硬盘上的另一台虚拟机（ ）上`virtual1` ，我创建了 Solr 实例：

```
java -DzkHost=zkhost:2181 -Djetty.port=8985 -jar start.jar
java -DzkHost=zkhost:2182 -Djetty.port=8986 -jar start.jar 
```

因此，在这种情况下，我将拥有实例`virtual2:8985 and virtual2:8986`，它们应该在云中。但它没有发生......我只能看到`virtual2:8983`，这在现实中并不存在。它只是显示了独立 Solr 的端口，该端口在`virtual1`.

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T13:14:10.360

您应该尝试删除 zookeeper 数据并指定 -Dbootstrap_confdir=/path/to/conf/dir 将配置和节点状态推送到 zookeeper。此外，如果您正在运行 zookeeper 合奏，请检查他们的状态（领导者或追随者，或者是否没有与节点的连接）

```
echo stat | nc zk_host zk_port 
```

您可以使用 zkCli.sh 查看集群状态

```
get /clusterstate.json 
```

并显示 zookeeper 配置，它们应该看起来像这样：

```
clientPort=2181 (2182 for second instance)
server.1=zk_host:2888:3888
server.2=zk_host:2888:3888 
```

并检查 Solr 和 Zookeeper 日志以获取成功的连接。

# ruby-on-rails - 回形针几何类不再有效

> ID：13485887
> 
> 赞同：2
> 
> 时间：2012-11-21T03:27:55.030
> 
> 标签：ruby-on-rails, geometry, imagemagick, paperclip

我正在使用带有 Paperclip gem 的 Rails 来上传图片。我不知道它是什么时候发生的，因为我现在才注意到，但在最近的某个时候，他们一定已经更改了 Geometry 类，因为它现在抛出了一个错误。我正在使用回形针 3.3.1

我曾经使用：

```
Paperclip::Geometry.from_file(photo.path(style)) 
```

获取照片几何图形，但现在当我这样做时，我得到：

```
undefined method `to_file' for #<Paperclip::Attachment:0x007feba0009fb8> 
```

我一直在寻找一些线索的来源，但这不是我的强项，我没有发现任何太有启发性的东西。

任何人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T05:14:02.417

我正在使用 3.3.1，并在我的 photo.rb 中有这个，以便在保存之前更新我的照片记录。

```
 def do_before_save
    temp = self.image.queued_for_write[:original]
    unless temp.nil?
      geo = Paperclip::Geometry.from_file(temp)
      self.image_width = geo.width
      self.image_height = geo.height
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T15:20:27.810

这应该适用于具有隐私设置的 S3，因为它将文件下载到 /tmp 文件夹

```
Paperclip::Geometry.from_file(Paperclip.io_adapters.for(photo).path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T22:12:32.340

弄清楚了。如果其他人在 Paperclip 上使用 Railscast 中的裁剪代码，我所要做的就是将 photo.path 更改为 photo.url。我正在使用 S3，出于某种原因，相对路径曾经可以工作，但现在它需要完整的 URL。

# css - 无序列表不在 DIV 中居中。

> ID：13485890
> 
> 赞同：0
> 
> 时间：2012-11-21T03:28:13.003
> 
> 标签：css, html, html-lists, responsive-design

在进行响应式设计时，我注意到除了我的无序列表之外的所有内容都是响应式的。当我调整浏览器的大小时，列表不会移动或保持在其 DIV 的中心。我一整天都尝试了很多东西，但就是想不通。对于上下文，#sitecontent 是包含所有内容的容器，#sitecontent .leftsidebar 包含图像和无序列表，#sitecontent .leftsidebar ul 是无序列表。有人可以检查一下并告诉我出了什么问题吗？请访问我的网站[http://www.tommaxwell.me](http://www.tommaxwell.me)并查看源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:18:04.380

嗨，用我的更新你的**css**实际上我已经给了`padding`你的水平，`.leftsidebar ul parent div`并对其进行了一些更改，`list-items`现在它工作正常.. 请参阅附图以供参考：-

![在此处输入图像描述](../Images/1f47d4a2be3b82dc8680c81c13cf25ad.png)

**直到 iPad 的 CSS**

```
#sitecontent .leftsidebar ul {
    padding: 0 25%;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
}

#sitecontent .leftsidebar ul li {
    border-bottom: 1px solid #E5E5E5;
    display: block;
    font-family: helvetica;
    line-height: 25px;
    margin: 2px;
} 
```

而且`iphone`你必须编写**css**： -

iphone的图片参考：-![在此处输入图像描述](../Images/74a159d215d0bc5f5081ce96fbe989ff.png)

**直到 iPhone 的 CSS**

```
#sitecontent .leftsidebar ul {
    margin-top: 10%;
    margin-bottom:20%;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:33:54.483

试试这个 CSS：

```
#sitecontent .leftsidebar ul {
position: relative;
top: -5px;
list-style-type: none;
font-family: 'Patua One', cursive;
padding-left: 10px;
}

#sitecontent .leftsidebar ul li {
margin-bottom: 3%;
clear: both;
border-bottom: 1px solid #E5E5E5;
font-family: helvetica;
text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:36:32.603

我的浏览器正在向列表中添加一些填充，这对于浏览器来说是很常见的事情。您可能会考虑使用重置（[meyer](http://meyerweb.com/eric/tools/css/reset/)，[yui](http://yuilibrary.com/yui/docs/cssreset/)），或者只是在 ul 和 li 上设置显式填充/边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T05:13:36.483

我想我把整个事情复杂化了，在这个过程中，首先忘记了响应式设计的全部意义。在这种情况下，在列表周围添加填充/边距是绝对可以接受的，因为我将在断点处使用媒体查询。不知道为什么我把事情搞得这么复杂！

# xcode - 自动将源文件链接到 XCode 项目

> ID：13485892
> 
> 赞同：0
> 
> 时间：2012-11-21T03:28:22.390
> 
> 标签：xcode, applescript

我从另一个 IDE 自动生成 C/C++ 源代码，并希望将源文件自动添加/删除到要编译的打开的 XCode 项目中。

我想知道的是是否可以“链接”到 XCode 一个可以找到所有要编译的源文件的文件夹？

还是我每次都需要编写并手动运行 AppleScript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:11:34.233

经过更多研究，我发现基本上解析和编辑 .xcodeproj 包内容是最简单的路线。

# ios - Facebook 图表结果为 ios 的英文

> ID：13485896
> 
> 赞同：0
> 
> 时间：2012-11-21T03:28:41.220
> 
> 标签：ios, facebook-graph-api

我通过以下方式通过 iOS 提取图形结果：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"place",@"type",
                               loc,@"center",
                               @"500",@"distance", 
                               nil];

[self.facebook requestWithGraphPath:@"search" andParams: params andDelegate:self]; 
```

一切正常，花花公子。我遇到的问题是地名以中文返回（我假设是因为该位置来自这样的地方）。我知道我要检索的地方有英文名称，因为如果你访问他们的 Facebook 页面，它就有英文名称。有没有办法将语言设置为英语？我似乎无法为此找到参数设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:25:30.673

尝试添加语言环境参数：

```
locale=en_US 
```

更多信息在这里： [Facebook graph api 搜索结果取决于位置？](https://stackoverflow.com/questions/3595518/facebook-graph-api-search-results-depends-on-location)

# haskell - 找不到模块 Data.Color

> ID：13485906
> 
> 赞同：0
> 
> 时间：2012-11-21T03:30:21.953
> 
> 标签：haskell

无法导入模块Data.Colour，报错如下：

找不到模块 `Data.Colour' 使用 -v 查看搜索的文件列表。失败，加载模块：无。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:40:18.150

哈[约！搜索](http://holumbus.fh-wedel.de/hayoo/hayoo.html#0%3aData.Colour)显示该模块位于您可能尚未安装的[颜色包中。](http://hackage.haskell.org/package/colour)要安装它，运行`cabal update`后跟`cabal install colour`.

# javascript - angular-ui 示例中的角度链接函数 iElement 魔术

> ID：13485908
> 
> 赞同：0
> 
> 时间：2012-11-21T03:30:24.783
> 
> 标签：javascript, angularjs, angular-ui

Angular 在链接函数中提供了当前作用域的实例元素。

iElement角度*通道*能够做超出标准 HTML 元素的事情。角度如何做到这一点？先用 jQuery 包装它？

[这个angular-ui tinymce 实现](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/tinymce/tinymce.js)中的链接元素如何获得 tinymce 方法，例如下面第 49 行所示的方法：

```
elm.tinymce(); 
```

我知道 ui-tinymce 属性链接到名为 uiTinymce 的指令，并且 tinymce 包含在主 html 中，但我不明白 elm 如何获取方法 tinymce。

作为参考，我在下面的[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)中提供了有关 iElement 的相关文档。

> **联动功能：**

```
function link(scope, iElement, iAttrs, controller) { ... } 
```

> 链接函数负责注册 DOM 监听器以及更新 DOM。> 它在模板被克隆后执行。这是大多数指令逻辑 > 将被放置的地方。
> 
> **scope** - 范围 - 指令用于注册手表的范围。
> 
> **iElement** - 实例元素 - 使用指令的元素。仅在 postLink 函数中操作元素的子元素是安全的，因为子元素已经被链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:36:48.517

从[`angular.element`](http://docs.angularjs.org/api/angular.element)页面：

> 注意：Angular 中的所有元素引用总是用 jQuery 或 jqLit​​e 包裹；它们绝不是原始的 DOM 引用。

所以是的，`iElement`参数是一个 jQueryLite 或完整的 jQuery 对象，它具有 jQuery/jQueryLite 提供的所有相关附加方法。

这包括通过 jQuery 的插件机制添加的任何其他方法，这些方法具有能够直接在 jQuery 对象本身上调用这些方法的效果。

所以 TinyMCE JS 文件将有代码添加`.tinymce()`到所有 jQuery 对象的函数中，这就是`iElement`对象的方式。

那有意义吗？

# python - Pyobjc如何访问带有下划线前缀的objective-c方法

> ID：13485910
> 
> 赞同：1
> 
> 时间：2012-11-21T03:30:35.883
> 
> 标签：python, objective-c, pyobjc

我试图通过 Pyobjc 访问以下 Objective-C 方法

```
[foo _bar] 
```

不幸的是，这似乎给 Pyobjc 带来了问题，因为下划线通常被冒号替换，所以如果我在 PyObjc 中使用以下内容

```
foo._bar_() 
```

我收到对象 foo 没有方法的错误，即：

```
Attribute Error: No Selector :bar: 
```

那么如何正确“转义”前缀下划线呢？

# android - 无法卸载 /mnt/secure/staging

> ID：13485913
> 
> 赞同：1
> 
> 时间：2012-11-21T03:30:52.113
> 
> 标签：android, unmount

android无法访问SD卡中的文件####Android无法访问SD卡中的文件</p>

我正在开发在 SD 卡中创建文本文件的应用程序。

我有一个接收器，它将执行逻辑以在 SD 卡中创建文件，从那时起我将继续将一些数据存储到其中。

到目前为止它工作正常，但突然我停止工作。

我检查了 logcat 输出，发现了一些与 SD 卡安装相关的日志。

但是不知道如何解决这个问题。

以下是日志语句：

```
 1.464 W/Vold    ( 2357): Failed to unmount /mnt/secure/staging (Device or resource busy, retries 3, action 0)
     08-23 07:26:31.783 E/ProcessKiller( 2357): Process logcat (3344) has open file /mnt/secure/staging/abc1.txt
     08-23 07:26:31.783 E/ProcessKiller( 2357): Process logcat (3345) has open file /mnt/secure/staging/abc2.txt
     08-23 07:26:32.845 W/Vold    ( 2357): Failed to unmount /mnt/secure/staging (Device or resource busy, retries 2, action 1)
     08-23 07:26:33.173 E/ProcessKiller( 2357): Process logcat (3344) has open file /mnt/secure/staging/abc1.txt 
```

我已添加权限`android.permission.WRITE_EXTERNAL_STORAGE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:34:59.080

我认为这只是因为您使用多线程来访问文件。因此，请尝试在您的打开文件功能中使用同步。

```
synchronized void openFile(String filePath) {
        // Code to open file
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:47:35.917

在将文本文件写入 SD 卡之前，您必须始终检查媒体状态

```
if(Environment.getExternalStorageState().equalsIgnoreCase(Environment.MEDIA_MOUNTED))
{
    // read or write file logic here //
} 
```

# android - Android - 单独类中的 OnClick 侦听器

> ID：13485918
> 
> 赞同：30
> 
> 时间：2012-11-21T03:31:07.360
> 
> 标签：android, class, onclicklistener

是否可以创建一个二级类来保存 OnClick 侦听器？意味着不在 Activity 类中创建？

我只是发现将 OnClick 侦听器放在主要活动类中很麻烦，我宁愿将它们放在单独的类中。谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-21T03:40:37.900

当然，这是可能的。只需创建一个实现`View.OnClickListener`并将其设置为`View`. 例如：

```
public class ExternalOnClickListener implements View.OnClickListener {

    public ExternalOnClickListener(...) {
        // keep references for your onClick logic 
    }

    @Override public void onClick(View v) {
        // TODO: add code here
    }

} 
```

然后将上述类的一个实例设置为监听器：

```
view.setOnClickListener(new ExternalOnClickListener(...)); 
```

参数化构造函数是可选的，但很可能您需要传递一些东西才能真正使您的`onClick(...)`逻辑正常工作。

不过，匿名实现一个类通常更容易使用。只是一个想法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-21T03:38:48.273

`onCLicklistener`您为什么不尝试在`onClickListener`外部定义，而不是将其放在单独的类中`onCreate()`？

例如：像这样

**onCreate()**

```
yourViewName.setOnClicklistener(listener): 
```

**在 onCreate() 之外**

```
private OnClickListener listener    =   new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    }; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-21T03:39:08.780

是的你可以。然而，将监听器设为内部类有一个优势——它可以直接访问活动类的字段和变量。如果你将它设为一个单独的类，并且你的监听器实际上需要访问 5 个视图，你的监听器构造函数可能如下所示：

`MyListener listener = new MyListener(context, button, textView1, textView2, ratingBar, imageView);`

这也有点笨重。如果您的听众很简单，请继续将其设为单独的类。否则，它取决于您的可读性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-16T03:28:28.997

让我分享一下我是如何使用 MVP 进行编码的。这是编写干净代码的最佳方式。请记住，每个类都必须有一个接口来控制它。我会告诉你一个最简单的。

假设您想在 onClick 上 Toast 一个文本并从另一个类控制它。这是它的工作原理。创建接口只是为了相互连接，您可以轻松地查看代码。

1.  为该 MainActivity 类创建一个接口。

    ```
    public interface MainActivityView {
        void showToast();
    } 
    ```

2.  为 Presenter 类创建另一个接口。

    ```
    public interface IMainPresenter<V extends MainActivityView> {
        /*Generic Type is to make sure it comes from MainActivity class only and to avoid other class to access it.*/
        void onAttach(V mainView);
        void onButtonClick();
    } 
    ```

请记住，接口只不过是覆盖每个类的方法。

3.  创建演示者类

    ```
    public class MainPresenter<V extends MainActivityView> implements IMainPresenter<V> {

        private V mainActivityView;

        @Override
        public void onAttach(V mainActivityView) {
            this.mainActivityView=mainActivityView;
        }

        public V getView() {
            return mainActivityView;
        }

        @Override
        public void onButtonClick() {
            getView().showToast(); //This is the method from MainActivity controlling with this class
        }
    } 
    ```

4.  我将跳过 activity_main.xml 布局，因为只有一个 id="@+id/buttonId" 的按钮。在 MainActivityClass 中，

    ```
    public class MainActivity extends AppCompactActivity implements MainActivityView {

    Button btn;

        @Override
        protected void onCreate(@Nullable Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            MainPresenter mainPresenter = new MainPresenter();
            mainPresenter.onAttach(this);

            btn = findViewById(R.id.buttonId);

            btn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    mainPresenter.onButtonClick(); //Here, check No.3 again!
                }
             });
        }

        @Override
        public void showToast() {
             Toast.makeText(this, "Hello", Toast.LENGTH_SHORT).show();
        }
    } 
    ```

5.  我只想告诉你的是。如果在类中创建对象，则无法进行单元测试。这就是为什么您没有看到任何新对象在 android 中调用。因此，您可以在 Presenter 类中使用单例模式（这里是惰性类型）。我将删除它的界面和通用以清楚地看到它。

    ```
    public class MainPresenter {

           private static final MainPresenter mainPresenter = new MainPresenter();

           MainPresenter() {}

           public static MainPresenter getInstance() {
                   return mainPresenter;
           }

           //Some methods here can be get it once you create an object with getInstance();
    } 
    ```

所以你可以像这样从 MainActivity 获取它的方法。而不是创建这样的对象......

```
 MainPresenter mainPresenter = new MainPresenter(); 
```

你可以像这样得到它...

```
 MainPresenter mainPresenter = mainPresenter.getInstance(); 
```

可以在此处找到更多单例模式示例， [https://www.journaldev.com/1377/java-singleton-design-pattern-best-practices-examples](https://www.journaldev.com/1377/java-singleton-design-pattern-best-practices-examples)

6.  最后，使用静态不是一个很好的选择，因为无论你使用与否，它都会占用内存空间。因此，您可以在 Application Layer 中创建对象，并通过 Typecasting 获取它。我确定您不需要对该应用程序层进行单元测试。

    ```
    public class AppLayer extends Application {

        private MainPresenter mainPresenter;

        @Override
        public void onCreate() {
            super.onCreate();

            mainPresenter = new MainPresenter();
        }

        public MainPresenter getMainPresenter() {
            return mainPresenter;  
        } 
    ```

你需要在 manifest.xml 中的 Application 中给出一个类名

```
 <application
    android:name=".AppLayer"
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/AppTheme">

    </application> 
```

你可以像这样在 MainActivity 中使用 Typecast 来获得它！

```
 MainPresenter mainPresenter = ((AppLayer)getApplication()).getMainPresenter(); 
```

7.  为了进一步的学习，我建议你学习 ButterKnife、Dagger 2 和 SOLID 原理。它将帮助您创建干净的编码。玩得开心！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T03:37:49.240

你能行的。但是只是认为您不会引用活动，也不会引用它的属性，包括所有视图。（除非您将它们公开或使用 getters 方法访问）。

此外，在存储对活动或侦听器上任何成员的引用时要格外小心，因为它们可能会避免垃圾收集器取回侦听器内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-17T08:42:12.137

```
public class CommonClick {
    public static  void commonClick(final AppCompatActivity context){
        context.findViewById(R.id.appbar).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

            }
        });
    }
} 
```

# asp.net - HTML 样式问题

> ID：13485922
> 
> 赞同：0
> 
> 时间：2012-11-21T03:31:27.190
> 
> 标签：asp.net, html, css, stylesheet

我正在为网站创建母版页并尝试在 .NET Web 应用程序中使用 CSS3 下拉菜单。我遇到的问题是我无法让导航元素显示背景颜色。我之前已经实施过几次，没有任何问题，但由于某种原因，它在这个项目中不起作用。

标记：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="MirandasWebsite.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <link href="Styles/Mir3.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type='text/javascript'></script>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
    <title></title>
</head>
<body runat="server">
    <form id="form1" runat="server" method="post">
    <div class="wrap">
        <nav>
                <ul class="menu">
                <div id="HomePage" class="zoom" runat="server"><li class="menuitem"><a href="Default.aspx" id="aDefault" runat="server">Home</a></li></div>
                <li class="menuitem"><a id="aMedia" href="#" runat="server">Media</a>
                    <ul>
                                    <div id="Photos" class="zoom" runat="server"><li class="menuitem"><a href="#" id="aPhotos" runat="server">Photos</a></li></div>
                                    <asp:HiddenField ID="hfPhotos" runat="server" Value="#" />
                                    <div id="Videos" class="zoom" runat="server"><li class="menuitem"><a href="#" id="aVideos" runat="server">Videos</a></li></div>
                                    <asp:HiddenField ID="hfVideos" runat="server" Value="#" />
                                    <div id="Audio" class="zoom" runat="server"><li class="menuitem"><a href="#" id="aAudio" runat="server">Audio</a></li></div>
                                    <asp:HiddenField ID="hfAudio" runat="server" Value="#" />
                   </ul>
                </li>
                <li class="menuitem"><a id="a1" href="#" runat="server">About Me</a>
                    <ul>
                                    <div id="Biography" class="zoom" runat="server"><li class="menuitem"><a href="#" id="aBiography" runat="server">Biography</a></li></div>
                                    <asp:HiddenField ID="hfBiography" runat="server" Value="#" />
                                    <div id="Resume" class="zoom" runat="server"><li class="menuitem"><a href="#" id="aResume" runat="server">Resume</a></li></div>
                                    <asp:HiddenField ID="hfResume" runat="server" Value="#" />
                    </ul>
                </li>
                <div id="ContactMe" class="zoom" runat="server"><li class="menuitem"><a id="a2" href="#" runat="server">Contact Me</a></li></div>
                </ul>
                <div class="clearfix"></div>
            </nav>
    </div>
<div class="Contents">
    <asp:ContentPlaceHolder ID="MainContent" runat="server">
    </asp:ContentPlaceHolder>
</div>
</form>
</body>
</html> 
```

CSS：

```
/*------------Main Styles------------*/
html
{
    height: 100%;
    width: 100%;
}

body
{
    position: relative;
    min-height: 100%;
    min-width: 100%;
    height: 100%;
    width: 100%;
    background: -webkit-radial-gradient(center, circle farthest-corner, #680000 0%, Black  100%); /* for Chrome and Safari*/
    background: -moz-radial-gradient(center, circle farthest-corner, #680000 0%,  Black 95%); /* for Firefoex */
    background: -ms-radial-gradient(center, circle farthest-corner, #680000 0%, Black 95%); /* For IE10 */
    background: -o-linear-gradient(top, #680000, Black); /* For Opera */

}

ul
{
    list-style: none;
}

/*------------Drop Down Menu------------*/

.wrap
{
    max-width: 100%;
    margin: 4em auto;
}

nav
{
    background: -webkit-gradient(linear, center top, center bottom, from(#cccccc), to(#999999));
    background:  -moz-radial-gradient(center, circle farthest-corner, #cccccc 0%,  #999999 95%);
    background: -ms-radial-gradient(center, circle farthest-corner, #cccccc 0%, #999999 95%); /* For IE10 */
    background: -o-linear-gradient(top, #cccccc, #999999); /* For Opera */
    position: relative;
    text-align: center;
}

.menu
{
    text-align: center;
    margin: auto%;
    background-color: Silver;
}

.menu li
{
    float: left;
    position: relative;
    padding: 0% 1%;
}

.menu li a
{
    color: #cccccc;
    display: block;
    font-size: 110%;
    line-height: 100%;
    padding: 0% 0%;
    margin: 0% 0%;
    vertical-align: middle;
    text-decoration: none;
}

.menu li a:hover
{
    background: -webkit-gradient(linear, center top, center bottom, from(#cccccc), to(#999999));
    background:  -moz-radial-gradient(center, circle farthest-corner, #cccccc 0%,  #999999 95%);
    background: -ms-radial-gradient(center, circle farthest-corner, #cccccc 0%, #999999 95%); /* For IE10 */
    background: -o-linear-gradient(top, #cccccc, #999999); /* For Opera */
    color: #222;
}

/* Dropdown styles */

.menu ul
{
    position: absolute;
    list-style: none;
    opacity: 0;
    -webkit-transition: opacity 1.5s ease;/*For Chrome and Safari */
    -moz-transition: opacity 1.5s ease;/* For Firefox */
    -o-transition: opacity 1.5s ease;/*For Opera */
    min-width: 75%;
    text-align: left;
}

.menu ul li
{
    float: none;
}

.menu ul a
{
    white-space: nowrap;
}

/* Displays the dropdown on hover and moves back into position */
.menu li:hover ul
{
    background: -webkit-gradient(linear, center top, center bottom, from(#999999), to(#cccccc));
    background: -moz-radial-gradient(center, circle farthest-corner, #999999 0%,  #cccccc 95%);
    background: -o-linear-gradient(top, #999999, #cccccc); /* For Opera */
    background: -ms-radial-gradient(center, circle farthest-corner, #999999 0%, #cccccc 95%); /* For IE10 */
    left: 5%;
    opacity: .8;
    text-align: center;
    margin: auto;
    min-width: 100%;
    min-height: 100%;
}

/* Persistant Hover State */
.menu li:hover a
{
    background: -webkit-gradient(linear, center top, center bottom, from(#999999), to(#cccccc));/* for Chrome and Safari */
    background: -moz-radial-gradient(center, circle farthest-corner, #999999 0%,  #cccccc 95%);/* For Firefox */
    background: -ms-radial-gradient(center, circle farthest-corner, #999999 0%, #cccccc 95%); /* For IE10 */
    background: -o-linear-gradient(top, #999999, ##cccccc); /* For Opera */
    color: Black;
}

.menu li:hover ul a
 {
    background: none;
    border-radius: 0%;
    box-shadow: none;
}

.menu li:hover ul li a:hover
{
     color: #680000;
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:47:31.537

您的导航无法计算任何宽度，因为其中的所有元素都没有宽度，这就是它无法显示任何背景的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:06:32.773

只需将`height`属性赋予您的`nav`元素：-

**CSS**

```
nav
{
    background: -webkit-gradient(linear, center top, center bottom, from(#cccccc), to(#999999));
    background:  -moz-radial-gradient(center, circle farthest-corner, #cccccc 0%,  #999999 95%);
    background: -ms-radial-gradient(center, circle farthest-corner, #cccccc 0%, #999999 95%); /* For IE10 */
    background: -o-linear-gradient(top, #cccccc, #999999); /* For Opera */
    position: relative;
    text-align: center;
    height:30px;
} 
```

**[演示](http://tinkerbin.com/9zRpJ8Jm)**

# jquery - JQuery：帮助使用 .each() 和 .append() 将图片添加到 HTML

> ID：13485925
> 
> 赞同：8
> 
> 时间：2012-11-21T03:32:10.567
> 
> 标签：jquery, html, append, each

需要修复的简单错误，我不知道出了什么问题。我需要将同一张图片附加到 HTML 中的多个（五个）div 中。出于某种原因，我的代码向每个 div 附加了五次相同的图片。更清楚地说，五个 div 中的每一个都需要一张图片。现在，这五个人各有五张照片。这是JQUERY：

```
$(".faq").each(function(){
        $('.faq .letter-q').append('<img src="images/faq-q.png" alt="Question">');
}); 
```

这是它被插入的地方：

```
<div class="letter-q"></div> 
```

其中有五个散布在全身。

这可能是我想念的小东西。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T03:37:33.257

如果您想首先使用五个 .letter-q div，请先选择它们，以便“.each”函数在运行时使用这些 div：

```
$('.faq .letter-q').each(function(){
    //this wrapped in jQuery will give us the current .letter-q div
    $(this).append('<img src="images/faq-q.png" alt="Question">');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T03:35:39.157

```
$(".faq").each(function(){
        $('.letter-q', this).append('<img src="images/faq-q.png" alt="Question">');
}); 
```

将 a 添加`context`到您的选择器

阅读更多：[http ://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

或者你可以不使用循环......

```
$('.faq .letter-q').append('<img src="images/faq-q.png" alt="Question">'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T03:37:09.390

尝试使用这个：

```
$(".faq").each(function(){
    $('.letter-q', this).append('<img src="images/faq-q.png" alt="Question">');
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T03:45:57.143

值得注意的是，这个问题可能也有一个纯 CSS 解决方案。`<img>`您可以使用图像的源作为目标的背景（如果它还没有背景），而不是在页面中插入标签。

如果不知道所应用的 HTML 和其他 CSS 的结构，则无法确定，但这里有一个猜测：

```
.faq .letter-q {
  padding-right: 20px; /* or however wide the image is */
  min-height: 20px; /* or however tall the image is */
  background-image: url(images/faq-q.png);
  background-position-x: 100%;
  background-position-y: 50%;
  background-repeat: no-repeat;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T03:39:19.693

你根本不需要外部`.each()`调用。只是内线应该做你想要的：

```
$('.faq .letter-q').append('<img src="images/faq-q.png" alt="Question" />'); 
```

您的代码相当于“对于每个 .faq（其中有五个），在页面上查找所有 .faq .letter-q 并添加图像”。您真正需要的是该句子的最后一个子句。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T03:40:23.197

如果我了解您的需求，您所要做的就是运行一次而不是循环。

我想主要的问题是当你做这个循环时，结果应该是这样的。

循环前：

```
<div class="letter-q"></div>
<div class="letter-q"></div>
<div class="letter-q"></div>
<div class="letter-q"></div>
<div class="letter-q"></div> 
```

第一次将导致：

```
<div class="letter-q"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"></div> 
```

第二次：

```
<div class="letter-q"><img src="images/faq-q.png" alt="Question"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"><img src="images/faq-q.png" alt="Question"></div>
<div class="letter-q"><img src="images/faq-q.png" alt="Question"><img src="images/faq-q.png" alt="Question"></div> 
```

等等 ....

问候， 埃迪杜

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T03:42:23.473

试试这个，

```
$(".faq").each(function(){
        $(this).find('.letter-q').html('<img src="images/faq-q.png" alt="Question">');
}); 
```

# ios - iOS 和 miniadsb（或其他 ADS-B 接收器）之间的接口

> ID：13485928
> 
> 赞同：0
> 
> 时间：2012-11-21T03:32:30.743
> 
> 标签：ios, interface

这是一个以前在stackoverflow上没有见过的问题:-)

我试图弄清楚如何将 miniadsb 小工具——http://miniadsb.web99.de——[与](http://miniadsb.web99.de)iOS 接口。或者，如果失败了，我想将任何 ADS-B 接收器连接到 iOS。

任何指向正确方向的指针将不胜感激！

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-12T01:33:54.883

我知道这是一篇旧帖子，但这个答案可能会对某些人有所帮助。

ADS-B数据由硬件广播，由硬件接收。有时，软件对这些广播进行解码并通过网络将它们转发到“虚拟”雷达或跟踪管理系统。过去，这种硬件非常昂贵，但由于新公司和 2020 年任务的临近，现在可以负担得起。以下是让 ADS-B 数据显示在 iOS 设备上的简单方法的链接。

设备： [https ://www.uavionix.com/products/pingusb/](https://www.uavionix.com/products/pingusb/)

应用程序： [https ://itunes.apple.com/us/app/foreflight-mobile-efb/id333252638?mt=8](https://itunes.apple.com/us/app/foreflight-mobile-efb/id333252638?mt=8)

# file - createReadStream 发送文件 http

> ID：13485933
> 
> 赞同：4
> 
> 时间：2012-11-21T03:33:17.440
> 
> 标签：file, node.js, stream

我正在尝试打开一个 img 文件并通过 http 发送它。我读过最好的方法是 creatReadStream 因为它是异步的并且性能更好。

这是我的代码：

```
var file = fs.createReadStream(image);

    file.on("error", function(err){
        ...
    });

    res.writeHead(200, {"Content-Type" : "image/png"});

    file.on("data", function(data) {
        res.write(data);
    })

    file.on("end", function() {
        res.end();
    }) 
```

我如何知道文件大小以让 res 知道以便在标题中发送它？

我不喜欢 writehead 不在回调中，我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T04:19:37.943

该`res.writeHead()`调用位于正确的位置，但事件侦听器可以替换为，`file.pipe(res);`因为您只是将数据从读取流转发到`res`. 此外，HTTP 响应代码`202`似乎不合适，为什么不使用`200`.

```
var file = fs.createReadStream(image);
res.writeHead(200, {"Content-Type" : "image/png"});
file.pipe(res); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T04:24:48.540

```
var stat = fs.statSync('path/to/imagefile');
response.writeHead(200, {
  'Content-Type' : 'image/png',
  'Content-Length': stat.size
});
fs.createReadStream('path/to/imagefile').pipe(response); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:33:56.157

@wayne 非常感谢您的回答，但异步使用 stat 不是更好吗？

```
var stat = fs.stat(image, function(err,stats) {
        if (err) {
            req_error(res,err);
        } else {
            res.writeHead(200, {
            'Content-Type' : 'image/png',
            'Content-Length': stats.size
            });

            var file = fs.createReadStream(image);
            file.pipe(res);
        };
    }); 
```

# xcode4.5 - XCode 4.5 中导航器的快捷方式是什么？

> ID：13485935
> 
> 赞同：1
> 
> 时间：2012-11-21T03:33:34.717
> 
> 标签：xcode4.5

![快捷快照](../Images/7ec26e0f8e565808ecb5ca3e3aff483a.png)

我在想这个的捷径是什么？我不知道 XCode 中的确切名称。因此我无法绑定我的快捷键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:16:50.597

它是“显示文档项目”。

使用`CTRL`+`6`键盘快捷键。

在“键绑定”下列为“标准编辑器 > 显示已记录的项目”或从菜单：“查看”->“标准编辑器”->“显示已记录的项目”。

# opengl-es-2.0 - 如何正确使用 GL_HALF_FLOAT_OES 纹理？

> ID：13485937
> 
> 赞同：1
> 
> 时间：2012-11-21T03:33:47.840
> 
> 标签：opengl-es-2.0, textures, linear-interpolation, glteximage2d

我在 iPad 2 / 3 上使用 OpenGL ES 2.0。我想在创建纹理时使用 GL_FLOAT：

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texWidth, texHeight, 0, GL_RGBA, GL_FLOAT, rawData);

但问题是，如果您的支持扩展列表中没有显示 GL_OES_texture_float_linear，则使用 GL_FLOAT 时不支持 GL_LINEAR 作为 GL_TEXTURE_MAG_FILTER。（所有 iPad 都没有。）

但是我的扩展列表中确实有 GL_OES_texture_half_float_linear 。因此，使用半浮点纹理应该与线性插值一起使用。

问题是，将我的纹理创建切换为：

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texWidth, texHeight, 0, GL_RGBA, GL_HALF_FLOAT_OES, rawData);

当我运行应用程序时导致 EXC_BAD_ACCESS。(libGPUSupportMercury.dlylib'gpus_ReturnGuiltyForHardwareRestart)

自从使用 GL_FLOAT 调用数据后，我没有更改数据的格式。输入数据是否需要以某种方式更改为 HALF_FLOAT？如果是这样，怎么做？我不知道如何将输入浮点数分成两半。目前每个组件都是 GLfloat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:28:05.330

我现在的“解决方案”是将我自己的双线性插值添加到片段着色器中，因为当使用 GL_FLOAT 时 OpenGL 不会为我做这件事。

# javascript - 非常奇怪的 iframe 事件行为

> ID：13485940
> 
> 赞同：3
> 
> 时间：2012-11-21T03:34:05.827
> 
> 标签：javascript, jquery, html, google-chrome, iframe

这个问题把我彻底难住了。由于它位于浏览器扩展程序中，因此我无法发布我的代码。

问题显然是 iframe 内的鼠标事件（悬停在链接上、文本上、选择...）关闭了大约 200 像素，这包括右键单击，如下图所示：

![红点是实际的鼠标点击位置](../Images/66b6e63d2ab272dd80276d5b0a7ecdd3.png)

红点是实际的鼠标点击位置。同样，因为这是一个扩展（我实际上是在 Tampermonkey 中做 JS 部分，它更容易）我无法在其他浏览器中尝试它，所以它可能只是 chrome。

iframe 将包含第三方动态加载的内容，因此我不能使用 div 或其他元素。它也被重用并在加载时动态插入。

这也不会在第一次插入内容时发生，而是需要几个“周期”才能出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:15:19.353

这显然是一个 Chrome 错误，尽管是一个奇怪的错误。我开始遇到其他问题，所以我重新安装了 Chrome 并升级到 Windows 8（我本来打算这样做），这个错误似乎已经消失了。

**编辑：**它刚刚回来，事实证明问题是我`-webkit-transform: scale()`用来显示和隐藏带有过渡的框架，删除它可以解决问题。

因此，对于所有在 Chrome/WebKit 中存在 iframe 鼠标事件问题的人：检查所有转换和任何 CSS3 效果，尝试一次删除它们。

# c++ - 为什么基类函数没有被覆盖？

> ID：13485941
> 
> 赞同：0
> 
> 时间：2012-11-21T03:34:14.977
> 
> 标签：c++, class, inheritance, mfc, overriding

我在子类中覆盖了基类函数`ShowProperties`，但仍然调用了基类函数。为什么是这样？

**类层次结构：**

```
class CDiagramEntity : public CObject
{
public:
  virtual void ShowProperties( CWnd* parent, BOOL show = TRUE );
}

class CNetworkSymbol : public CDiagramEntity
{
  /*NO 'ShowProperties' Function*/
}

class CDeviceEntity : public CNetworkSymbol
{
  /*NO 'ShowProperties' Function*/
}

class CSwitch : public CDeviceEntity
{
public:
  virtual void ShowProperties( CWnd* parent, BOOL show = TRUE );
} 
```

利用：

```
/*Use Here*/
{
  CDiagramEntity* obj = GetSelectedObject();
  if( obj )
  {
    CSwitch* sw = (CSwitch*)obj;
     sw->ShowProperties( this );    
     /*calls CDiagramEntity's function, not CSwitch's function*/
  }
} 
```

**PS：**

1.  正如@iammilind 建议的那样，我从 CDiagramEntity 中删除了 virtual 并使用强制转换，调用了 CSwitch 的函数，并从它显示的属性中（属性只能更改为创建 CSwitch 时显示的内容），我很确定它是一个 CSwitch。
2.  正如@user1610015 评论，如果我使用

    ```
    CSwitch* sw = dynamic_cast<CSwitch*>(obj); 
    ```

    它返回`NULL`。

3.  正如@Andrian Sham 所说，我得到了问题的原因：

    ```
    GetSelectedObject()--->finally calls--->
    {
      CDiagramEntity* result = NULL;
      if ( index < m_objs.GetSize() && index >= 0 )
        result = static_cast< CDiagramEntity* >( m_objs.GetAt( index ) );
      /*m_objs is defined as: CObArray m_objs;*/
      return result;
    } 
    ```

m_objs：

```
CObArray m_objs; 
```

对象存储为：

```
...( CDiagramEntity* obj )
{
  obj->SetParent( this );
  m_objs.Add( obj );
  SetModified( TRUE );
} 
```

但是有人可以更详细地解释这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:20:01.390

我不确定您如何进行调试。你说你可以看到 CSwitch 的一个成员变量。如果您的意思是您检查`CSwitch* sw = (CSwitch*)obj;`并看到这样的 var in `sw`，那么您实际上是错了。调试器只是“解释”指向的内存块，`sw`因为它是一个 CSwitch。这并不意味着它真的是一个 CSwitch。

我只能想到一个案例。您是否将对象实例放在任何 STL 容器中并将其取出以将其作为选择项？

（我完全忘记了 MFC，这只是一个例子）

```
vector<CDiagramEntity> entities;  // note it is of type CDiagramEntity, not CDiagramEntity*

CSwitch aCSwitch;
entities.push_back(aCSwitch);

// later
SetItem("SomeValue", entities[i]); 
```

您可能认为您的实体 [i] 应该返回 CSwitch 的实例，但事实并非如此。

（如果您非常确定所选项目应该是 CSwitch，这是我能猜到的最好的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T03:43:18.970

因为即使您将 CDiagramEntity 对象强制转换为 CSwitch 对象，调用也是通过虚拟调度进行的。因此，如果 GetSelectedObject 返回的对象实际上不是 CSwitch，则调用 CDiagramEntity 的 ShowProperties。

为什么要将对象转换为 CSwitch？从设计的角度来看，这没有意义。您有一个多态对象，但您想将其视为其特殊派生之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T03:41:42.010

因为`ShowProperties()`是一个**`virtual`**函数。

当`virtual`机制启动时，函数绑定发生在**运行时**。
如果`ShowProperties()`返回 的对象`class CDiagramEntity`，则`CDiagramEntity::ShowProperties()`无论`static type`调用指针的类型如何，都将被调用（此处`sw`）。

仅出于实验目的，删除`virtual`关键字并运行代码。您将获得预期的行为。但要注意可能的未定义行为。

# cloud-foundry - Cloud Foundry 开发工作流程

> ID：13485943
> 
> 赞同：4
> 
> 时间：2012-11-21T03:34:42.527
> 
> 标签：cloud-foundry

[当我从Cloud Foundry 博客](http://blog.cloudfoundry.com/2012/11/08/new-release-of-micro-cloud-foundry/)中阅读以下内容时，我试图弄清楚如何使用 Micro CloudFoundry 进行开发：

“无需安装 Web 服务器（Tomcat 等）、运行时（Java、Ruby 等）和服务（Postgres、MongoDB 等），您只需下载 Micro Cloud Foundry，启动它，并使用“vmc push”部署您的应用程序。”

当我开发（Node、Grails 或 Java Web 应用程序）时，我习惯于刷新并查看我的更改（嗯，总是针对客户端代码，有时针对服务器端）；它可以实现非常快速和高效的开发。

在开发过程中不断调用“vmc push”对我来说几乎是不可能的。反馈周期太慢了，不实用。有没有更好的办法？真的有人这样做吗？

您的 Cloud Foundry 开发工作流程是什么样的？Micro Cloud Foundry 适合哪些地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:30:45.983

除了将应用程序推送到 Cloud Foundry 所涉及的所有延迟问题外，我经常使用 Micro Cloud Foundry 来提供服务（MySQL、MongoDB、Redis 等），然后使用本地隧道通过 vmc tunnel 命令连接到它们。

# node.js - Node.js - 子进程处理与自身相关的 url

> ID：13485945
> 
> 赞同：0
> 
> 时间：2012-11-21T03:35:02.607
> 
> 标签：node.js, socket.io

我正在尝试使用 socket.io + 集群来扩展一个聊天应用程序。子进程是否可以处理属于其进程 ID 的传入请求（分叉时分配）？
例如：

```
http://mydomain/calculate?process=1 
```

上述请求仅由进程 1 处理，其他进程将忽略它。这样，我想确保同一个房间的请求由同一个进程处理，所以我可能不必使用 RedisStore 作为 socket.io 后端。

我也想知道 RedisStore 是如何工作的，因为在使用它时，我发现 io.sockets.manager.rooms 数据在所有进程中并不准确。

**编辑：**
换一种说法：集群主进程可以根据查询字符串将请求分派到不同的子进程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:24:55.630

答案是*否定*的。操作系统在这种情况下负责负载平衡，为了处理查询字符串，您必须连接到 Web 服务器（在您的情况下为子进程）。

根据我的经验，我发现集群有点没用。生成多个 NodeJS 进程（在多个端口上）并在它们前面放置一个代理（nginx？）要容易得多。它简单且可扩展。

至于socket.io：我认为它不能与集群正常工作（因为共享全局变量，这会导致问题）。同样：产生单独的 NodeJS 进程应该可以解决问题。此外，一旦您达到必须扩展到多台机器的地步，它也会很有用。在这一点上，任何关于集群的技巧都对你没有帮助。

最后一点：socket.io 不能很好地扩展。我建议编写自己的 WebSocket 服务器（例如[基于 WS](https://github.com/einaros/ws)）并实现自己的缩放机制。例如，基于 all-to-all UDP ping，在处理少量服务器（50？100？）时应该可以很好地扩展。

# google-maps - 访问谷歌地图区域坐标（郊区边界）

> ID：13485954
> 
> 赞同：11
> 
> 时间：2012-11-21T03:36:00.830
> 
> 标签：google-maps, maps, data-visualization

我试图展示一些关于澳大利亚郊区的数据。“郊区”是澳大利亚人用来描述一个地区的术语，如果您来自世界其他地方，请考虑邮政编码或类似的东西。

我希望能够访问地图中已经存在的区域边界。这些是我正在谈论的边界类型的示例：

悉尼马里克维尔 (2204)：http: [//goo.gl/maps/QYRhx](http://goo.gl/maps/QYRhx)

伦敦克莱普顿 (E5)：http: [//goo.gl/maps/3an2Y](http://goo.gl/maps/3an2Y)

我希望能够在地图上绘制边界，在地图上绘制多个边界（例如，显示哪些区域构成了“内西区”），对这些区域进行着色以表明它们对某事或其他事物的价值。通常和他们一起做事。

*   [这个问题](https://stackoverflow.com/questions/8088755/boundaries-in-google-map)询问如何获得手动绘制的边界，但我想访问已经存在的边界。
*   [这个问题](https://stackoverflow.com/questions/10597683/google-maps-shading-of-australian-suburbs)提出了一个类似的问题，但没有得到回答。
*   [这个问题](https://stackoverflow.com/questions/3383147/uk-how-do-you-get-maps-of-council-locations-on-google-maps-like-twitter-does?rq=1)是相似的，但回复建议使用形状文件，而不是直接从谷歌获取。
*   我还尝试了[地图样式向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)，虽然我需要显示行政、社区边界，但它似乎无法影响地图。

我查看了api文档无济于事。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:40:17.663

不，这是不可能的。区域边界功能（还没有？）在 API 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T05:09:57.437

如果您明确需要*来自 Google 的*数据，那么我无法帮助您。

但是，如果您只需要澳大利亚郊区的数据而不关心从哪里获得数据（如果您碰巧对 SA 或 NSW 感兴趣），那么您可以从[data.sa.gov.au/获取用于 SA 的 GeoJSON 或 KML data/dataset/suburb-boundaries和来自](https://data.sa.gov.au/data/dataset/suburb-boundaries)[data.gov.au/dataset/nsw-suburb-locality-boundaries-psma-administrative-boundaries](https://data.gov.au/dataset/nsw-suburb-locality-boundaries-psma-administrative-boundaries)的新南威尔士州。

你也可以在[data.gov.au/dataset](https://data.gov.au/dataset)找到其他人，我没有搜索那么多。

# ruby-on-rails - Rails 3 - mysql 返回的结果与 postgresql 不同

> ID：13485966
> 
> 赞同：1
> 
> 时间：2012-11-21T03:37:49.843
> 
> 标签：ruby-on-rails, postgresql, math

我正在尝试在我的查询中进行一些计算，我认为 postgresql 处理数学的方式与 mysql 不同，但我不确定差异在哪里。这是我的控制器的查询：

```
Invoice.find(params[:id], :joins => :invoice_line_items, :select => "invoices.id, SUM(invoice_line_items.hours * invoice_line_items.rate) as subtotal, SUM(invoice_line_items.hours * invoice_line_items.rate) - (SUM(invoice_line_items.hours * invoice_line_items.rate) * (invoices.discount_percentage / 100)) as total", :group => "invoices.id") 
```

在我的开发环境中，我使用的是 mysql，而在我的生产环境中，我使用的是 postgresql。这些是我得到的输出。作为参考，discount_percentage 为 20。

**MySQL：**

```
 |  id  |  subtotal  |  total         |
----------------------------------------
 |  21  |  570.0000  |  456.00000000  | 
```

**PostgreSQL：**

```
 |  id  |  subtotal  |  total         |
----------------------------------------
 |  9   |  570.0000  |  570.00000000  | 
```

看起来这与百分比和总数有关。有人有想法么？顺便说一句，我想要的是 MySQL 结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:44:32.173

Postgres 正在做整数除法。

```
Select                    MySQL   Postgres
-----------------------   -----   --------
select 999 / 100 as a     9.99    9
select 999 / 100.0 as a   9.99    9.99 
```

因此，将 更改`x / 100`为`x / 100.0`以使它们的行为相同。

# c++ - 一个函数使用多少内存？

> ID：13485967
> 
> 赞同：4
> 
> 时间：2012-11-21T03:38:15.543
> 
> 标签：c++, function, memory-management

我在一次采访中被问到这个问题——“一个函数使用多少内存？”。所以我试图回答说你可以将所有数据变量占用的所有内存，它实例化的数据结构相加 - 例如，为 long 添加 4 个字节，为 char 添加 1 个字节，为 int 添加 4 个字节，为 32 位指针添加 32 位系统，并添加任何动态分配的输入。面试官对我的回答很不满意。

我正在学习 C++，并将不胜感激任何见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T03:40:48.003

问题是非常不确定的。函数本身将只占用调用者的[激活记录](http://en.wikipedia.org/wiki/Call_stack)、参数和堆栈上的局部变量的空间。根据架构，激活记录将包含诸如保存的寄存器、调用函数时返回的地址等内容。

但是一个函数可以在堆上分配它需要多少内存，所以没有一个准确的答案。

哦，另外，如果函数是递归的，那么它可能会使用大量内存，这总是因为每次调用之间都需要激活记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T03:45:59.210

我认为这个[关于功能足迹的指南](http://www.programmingincpp.com/memory-footprint-of-a-function.html)就是你所说的。他们可能正在寻找“32/64 位（整数），因为它是一个指针”......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T03:53:50.443

从静态行为的角度来看， 1\. 它使用的数据 - 所有变量内存大小的总和 2\. 指令大小 - 写入函数内部的每条指令将以二进制形式占用一些内存。这就是你的函数的大小将如何被识别。这只不过是您编译的代码大小。从动态行为（运行时）的角度来看， 1\. 由于函数调用而产生的堆内存是函数内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T06:05:18.373

我敢打赌，正确的答案可能是“未定义”。一个空函数不消耗任何东西。

```
function func(){} 
```

一个链接的需要比我们实际估计的要多。

```
function funcA()
{
   funcB();
   funcC();
   //...
} 
```

大多数编译器将优化一个没有在其范围内使用的本地对象，因此它在其容器中也占用零内存。

```
function func()
{
   var IamIgnored=0;
   //don't do anything with IamIgnored
} 
```

并且请不要错过内存对齐，所以我认为计算对象或函数使用的内存不能简单地通过在其范围内累积所有对象的内存大小来完成。

# java - 返回使用“包含”比较两个字符串的结果

> ID：13485968
> 
> 赞同：0
> 
> 时间：2012-11-21T03:38:22.907
> 
> 标签：java, if-statement, boolean

因此，我输入了两个字符串，并在 mString 中查找 subString。当我将方法更改为布尔值时，它会返回正确的输出 true 或 false（通过在 contains 语句上使用 return）。

我不知道如何使用该语句来检查包含运算符的结果。我已经完成了以下工作。

```
public class CheckingString
{

    public static void main(String[] args)
    {
        // adding boolean value to indicate false or true
        boolean check;

        // scanner set up and input of two Strings (mString and subString)
        Scanner scan = new Scanner(System.in);
        System.out.println("What is the long string you want to enter? ");
        String mString = scan.nextLine();
        System.out.println("What is the short string that will be looked for in the long string? ");
        String subString = scan.nextLine();

        // using the 'contain' operator to move check to false or positive.
        // used toLowerCase to remove false negatives
        check = mString.toLowerCase().contains(subString.toLowerCase());

        // if statement to reveal resutls to user
        if (check = true)
        {
            System.out.println(subString + " is in " + mString);
        }
        else
        {
            System.out.println("No, " + subString + " is not in " + mString);
        }
    }

} 
```

有没有办法使该检查字段正常工作以在 if-else 语句中返回一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:40:01.997

```
if (check = true){ 
```

应该：

```
if (check == true){ 
```

通常你会写：

```
if(check) 
```

检查真假

和：

```
if(!(check)) 
```

或者：

> 如果（！检查）

检查假的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T03:40:57.170

小错误：

改为`if(check = true)`或`if(check == true)`只是`if (check)`

通过这样做`check = true`，您将 true 分配给检查，因此条件`if(check = true)`将始终为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:43:40.667

在 if 语句中使用布尔变量的首选方法是

```
if (check) 
```

请注意，您不需要使用相等运算符，这样可以避免您犯的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:43:50.663

尝试一下

```
 if (check) {
        System.out.println(subString + " is in " + mString);
    } else {
        System.out.println("No, " + subString + " is not in " + mString);
    } 
```

# php - PHP在mysql行下获取值

> ID：13485971
> 
> 赞同：3
> 
> 时间：2012-11-21T03:38:51.483
> 
> 标签：php, mysql, database

我正在尝试通过选项表单获取一个与唯一 ID 相关联的值（通过 mysql 数据库行）：

```
<form>
<td>
<select name='rolo'>
   <option value='$id'>$item</option>
</td>
<td>
   $value
</td>
</select>
</form> 
```

因此，当我选择一个选项时，我会在 next 中获得与之关联的对应 $value 。

到目前为止我已经尝试过：

```
$query = "SELECT * FROM rolostock WHERE id='$id' ";
$result = mysql_query($query);
while ($row = mysql_fetch_array($result)) {
echo $row['value'];
} 
```

我不是 php 专家，我认为这样做可以吗？提前致谢！

编辑：

我正在尝试的是 (html form) SELECT > OPTION $id > (php) get $value of $id in the next (html) TD 。:\

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T04:03:58.243

试试这个：

```
$query = "SELECT * FROM `rolostock` WHERE id = '$id';";
$result = mysql_query($query);
if (!$result) exit("The query did not succeded");
else {
    while ($row = mysql_fetch_array($result)) {
        echo $row['value'];
    }
} 
```

如果运行此打印`The query did not succeded`，则您的查询中有错误。尝试通过 PhpMyAdmin 运行它。

也可以使用：

```
<option value='<?php echo $id;?>'><?=php echo $item;?></option> 
```

代替：

```
<option value='$id'>$item</option> 
```

# jquery - 绑定到页面 html 而不是 Backbone 视图的主干和通用事件

> ID：13485974
> 
> 赞同：0
> 
> 时间：2012-11-21T03:39:03.223
> 
> 标签：jquery, backbone.js

我正在评估将一些 jQuery 代码移动到 Backbone 并且有一个完全的菜鸟问题。我有大量仅存在于标准 html 上的 jQuery 事件（与主干视图无关）。处理这些的合适的地方是什么。jQuery中的一些简单的东西：

```
<div class='my-thing'>click me</div>
<script>
  $(document).ready(function(){
     $('.my-thing').on('click',function(){
       alert('say hello');
     });
  });
</script> 
```

在 Backbone 中，它似乎是这样的：

```
events: {
     "mouseenter .my-thing":"say_again"
 },
 say_again: function(){
   alert('i want to say something');
 }, 
```

但我会把这个放在哪里？或者构造这个？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:49:45.373

通常你会按视图组织它们——这就是你声明事件的地方。这需要模块化 UI 的布局，以便将每个事件限制在视图范围内。

**模板**

```
<script type='text/template' id='say-template'>
    <div class='say-container'>
        <div class='my-thing'>click me</div>
    </div>
</script> 
```

**看法**

```
var SayView = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, "render");
        this.render();
    },

    el: "#container",

    template: _.template($("#say-template").html()),

    events: {
        "mouseenter .my-thing": "say_again"
    },

    say_again: function() {
        alert('i want to say...');
    },

    render: function() {
        this.$el.html(this.template());
    }
});

var sayView = new SayView(); 
```

**HTML**

```
<div id="container"></div> 
```

[这是一个工作演示。](http://jsfiddle.net/Xm5eH/3/)

* * *

Of course, nothing is stopping you from wiring up events in the normal way in the global scope of the application, if you need to. It's just best to avoid as doing that tends to break the MVC pattern.

# magento - 在 Magento 中更改时事通讯侧边栏的位置

> ID：13485976
> 
> 赞同：1
> 
> 时间：2012-11-21T03:39:15.670
> 
> 标签：magento

感谢您提前提供任何帮助。

我正在尝试更改边箱在 magento 中出现的顺序。例如：我的购物车、时事通讯、投票、最近浏览的产品。

目前我正在尝试让时事通讯框显示在最后。

在 app/design/frontend/default/MY_TEMPLATE/layout/newsletter.xml

我有以下代码：

```
 <default>

    <!-- Mage_Newsletter -->
    <reference name="left">
        <block type="newsletter/subscribe" name="newsletter" after="-" template="newsletter/subscribe.phtml" />
    </reference>

</default> 
```

然而，即使在代码中显示了 after="-" 时，时事通讯仍然出现在第 1 位。

我已经刷新了所有缓存，并且每次更改都无济于事时重新索引。

编辑：

改变

```
<reference name="left"> 
```

到

```
<reference name="right"> 
```

将其移动到列表的底部。但是，该列实际上在左侧。任何想法为什么这有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T04:15:28.313

这一切都是按照**left**`sortedChildren`条目的顺序。尝试摆脱自定义*newsletter.xml*，在您的自定义主题中创建一个*local.xml*文件，并添加以下内容：

```
<?xml version="1.0"?>
<layout>
    <default>
        <action method="unsetChild" block="left">
            <block>left.newsletter</block>
        </action>
        <action method="insert" block="left">
            <block>left.newsletter</block>
            <sib />
            <after>1</after>
        </action>
    </default>
</layout> 
```

这样做是从排序的子块列表中删除块引用，然后在最后再次添加它。参考。[`Mage_Core_Block_Abstract::insert()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Block/Abstract.php#L625)。

我`block`为标签使用了一个未使用但有效的属性，`<action />`而不是将其包装在`<reference />`. 我相信效果是一样的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T06:18:32.017

检查左侧/右侧边栏中显示的块名称（在布局 xml 文件中）。你可以找到这样的东西

```
 <reference name="right">
            <block type="catalog/product_compare_sidebar" after="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
 </reference> 
```

上面的代码将显示购物车侧边栏，然后比较侧边栏。考虑这是您侧边栏中的最后一个块。如果您想在此块之后发布时事通讯，您必须指定

```
<reference name="right">
        <block type="newsletter/subscribe" name="newsletter" after="catalog.compare.sidebar" template="newsletter/subscribe.phtml" />
    </reference> 
```

您必须在元素标记之后/之前指定块名称。找到您的左/右侧边栏最后一个块名称，并在您的通讯块中使用该名称。

# c++ - 自定义类的 unordered_set 是否有默认哈希函数？

> ID：13485979
> 
> 赞同：9
> 
> 时间：2012-11-21T03:39:27.307
> 
> 标签：c++, hash, unordered-set

我`std::unordered_set`第一次使用 a 并且对哈希函数有疑问。据我了解，如果您不指定哈希函数，它将默认为`std::hash<Key>`.

我的`mySet`一个班级中有一名成员：

```
typedef std::unordered_set<MyClass> USetType;
USetType mySet; 
```

当我尝试构建时，我收到以下错误：

> 错误 C2440：“类型转换”：无法从“const MyClass”转换为“size_t”

`size_t`如果要`unordered_set`与自定义类一起使用，是否需要定义转换函数 (to )？有没有办法避免编写自己的哈希函数而只使用默认值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T04:06:07.587

如果您不指定自己的哈希函子作为模板参数，它将默认为`std::hash<MyClass>`，除非您定义它，否则它不存在。

最好定义您自己的`std::hash`内部命名空间专业化`std`：

```
namespace std {
  template <>
  struct hash<MyClass>
  {
    typedef MyClass      argument_type;
    typedef std::size_t  result_type;

    result_type operator()(const MyClass & t) const
    {
       /* ..calculate hash value for t */
    }
  };
} 
```

并确保在声明哈希*之前*包含此代码。通过这种方式，您可以简单地声明哈希，`std::unordered_set<MyClass>`而无需进一步的模板参数。

You didn't specify what `MyClass` looks like inside, but a typical situation is that your user-defined type simply consists of several simple-type members, for which a default hash function exists. In this case, you will probably want to combine the hash values for the individual types to a hash value for the entire combination. The Boost library provides a function called `hash_combine` for this purpose. Of course, there is no guarantee that it will work well in your particular case (it depends on the distribution of data values and the likelihood of collisions), but it provides a good and easy-to-use starting point.

Here is an example of how to use it, assuming `MyClass` consists of two string members:

```
#include <unordered_set>
#include <boost/functional/hash.hpp>

struct MyClass
{
  std::string _s1;
  std::string _s2;
};

namespace std {
  template <>
  struct hash<MyClass>
  {
    typedef MyClass      argument_type;
    typedef std::size_t  result_type;

    result_type operator()(const MyClass & t) const
    {
      std::size_t val { 0 };
      boost::hash_combine(val,t._s1);
      boost::hash_combine(val,t._s2);
      return val;
    }
  };
}

int main()
{
  std::unordered_set<MyClass> s;
  /* ... */
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-15T15:20:44.413

I'd like to expand on the [answer](https://stackoverflow.com/a/13486174/2675154) given by *jogojapan*. As mentioned in a [comment](https://stackoverflow.com/questions/13485979/hash-function-of-unordered-set?noredirect=1&lq=1#comment33035701_13486174) by *CashCow* on that answer, you also have to either [overload the equality comparison operator](https://en.cppreference.com/w/cpp/language/operators) (`operator==`) for `MyClass` or define a separate comparison function and provide it to the `unordered_set`. Otherwise, you will get another error message. For example, VS 2013 throws:

> error C2678: binary '==' : no operator found which takes a left-hand operand of type 'const MyClass' (or there is no acceptable conversion)

Moreover, you can use [lambda expressions](https://en.cppreference.com/w/cpp/language/lambda) instead of defining the hash and comparison functions. If you don't want to use *Boost*, then you can also [handcraft a hash function](https://computinglife.wordpress.com/2008/11/20/why-do-hash-functions-use-prime-numbers). I understand, that you want to use some default function, but a compiler doesn't know how to calculate a meaningful hash for a custom class. However, you can use `std::hash` for the members of your class. If you put everything together, then your code could be written as follows:

```
class MyClass {
public:
    int i;
    double d;
    std::string s;
};

int main() {
    auto hash = [](const MyClass& mc){
        return (std::hash<int>()(mc.i) * 31 + std::hash<double>()(mc.d)) * 31 + std::hash<std::string>()(mc.s);
    };
    auto equal = [](const MyClass& mc1, const MyClass& mc2){
        return mc1.i == mc2.i && mc1.d == mc2.d && mc1.s == mc2.s;
    };
    std::unordered_set<MyClass, decltype(hash), decltype(equal)> mySet(8, hash, equal);

    return 0;
} 
```

[Code on Ideone](https://ideone.com/ksjnVU)

# python - 如何使用 FastCGI 部署 django 1.5

> ID：13485984
> 
> 赞同：1
> 
> 时间：2012-11-21T03:40:02.213
> 
> 标签：python, django, python-3.x

如何使用 FastCGI 部署 django 1.5

我找不到python3的flup包！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:40:19.620

您可以改用[uwsgi](http://projects.unbit.it/uwsgi/)，它类似于 FastCGI，但要好得多。

看看 B)

# javascript - Firefox 扩展中的脚本上下文

> ID：13485989
> 
> 赞同：0
> 
> 时间：2012-11-21T03:40:29.207
> 
> 标签：javascript, firefox-addon, xul

我有一些与 Firefox 扩展中的上下文相关的查询。

1.  当我们从覆盖 xul 加载脚本时，我们可以访问窗口/文档吗？如果是，我如何从这里访问网页内容？
2.  `@mozilla.org/moz/jssubscript-loader;1`从 xul、popup 和使用scriptloader加载的脚本加载的脚本的生命周期是多少？
3.  从非阻塞弹出窗口访问网页内容的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:54:08.513

> 当我们从覆盖 xul 加载脚本时，我们可以访问窗口/文档吗？如果是，我如何从这里访问网页内容？

覆盖通常适用于`browser.xul`- 主浏览器窗口。它们加载的任何脚本都会在浏览器窗口的上下文中加载，这就是全局`window`和`document`变量所指的内容。`gBrowser.contentWindow`您可以通过和`gBrowser.contentDocument`(`gBrowser`是对[`<tabbrowser>`元素](https://developer.mozilla.org/en-US/docs/XUL/tabbrowser)的引用 )访问当前选择的浏览器选项卡。

> `@mozilla.org/moz/jssubscript-loader;1` 从 xul、popup 和使用scriptloader加载的脚本加载的脚本的生命周期是多少？

脚本加载器将脚本加载到由第二个参数给定的上下文中`loadSubScript()`。如果省略该参数，则它将脚本加载到调用者的上下文中。只要上下文仍然存在，脚本将至少存在 - 如果有任何外部引用，脚本将持续存在（这通常不是一个好主意）。

> 从非阻塞弹出窗口访问网页内容的最佳方式是什么？

这在很大程度上取决于您认为“弹出窗口”的内容。XUL 对话框？一个 XUL `<panel>`？在新浏览器窗口中打开的网页？

# c# - 只在 catch 中抛出语句有意义吗？

> ID：13485994
> 
> 赞同：1
> 
> 时间：2012-11-21T03:40:54.297
> 
> 标签：c#, exception-handling

如果我有一个异常代码

```
 catch
 {
      throw;

 } 
```

这有什么意义吗？如果假设我不在函数中编写此代码，异常会在函数中被处理相似还是有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T03:45:08.573

代码本身什么都不做，但这并不意味着它一文不值。把它想象成一个存根。

我已经让这样的代码投入生产，每次这意味着我在某个时候遇到了麻烦，并且在开发过程中我有额外的代码用于调试，后来被删除......就像一个额外的日志消息、消息框或跟踪调用，甚至只是一种无操作类型的行 ( `string s = "";`)，我可以在其中设置断点。如果您回顾源代码管理，您将能够看到这些语句。

我喜欢把存根留在后面，以提醒这部分可能比看起来更难。

然而，看看任何随机的代码，很多时候这段代码存在是因为一些不太了解的人只是认为那里应该有一个 try/catch 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T03:43:13.580

不，它本身真的没有任何意义。

如果不添加某种日志记录或其他逻辑，这将等同于根本不使用 try/catch 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T03:43:23.003

这是多余的。它会捕获任何异常，然后重新抛出它。你最好根本不使用`catch`，结果是一样的，代码也不那么混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T03:43:26.803

在这种情况下，如果您没有其他错误处理，则抛出实际上是重新抛出并且完全没有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T03:43:57.370

不，没有意义，因为它没有处理异常，而只是重新抛出

# javascript - 使用 jquery 缩放 div 的高度 - 谷歌将如何反应（SEO）？

> ID：13485996
> 
> 赞同：0
> 
> 时间：2012-11-21T03:41:11.003
> 
> 标签：javascript, seo

假设我有一个包含很多文本的大 div。我只想向我的读者展示前几行文本。所以我想用javascript/jquery缩小div的高度并添加一个“阅读更多”按钮。像那样：

```
 $('#content').height(20); 
```

这是一个完整的例子：http: [//jsfiddle.net/zvQsX/1/](http://jsfiddle.net/zvQsX/1/)

我猜谷歌会将所有内容编入索引，但谷歌会将其解释为垃圾邮件吗？

谢谢你的帮助！

最好的

和我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:36:05.340

我不确定，但我认为谷歌解释了一些 CSS 和 display:none 并且简单地将隐藏的内容视为不存在或至少与您直接显示的内容不相关。

你的技术是不同的，老实说我不知道​​谷歌会如何解释它。如果我们考虑法律的意图，您实际上是在为您的用户提供全部内容（如果他们愿意，他们可以阅读并且在同一页面上），并且不应将其视为黑帽事物。

也就是说，为什么要使用 div 的缩放而不是 display:none 或 text-indent:-9999px ？