# StackOverflow 问答 14112000-14112999

# laravel - 与 first()/all() 链接时，Laravel Eager 加载缺失的关系

> ID：14112000
> 
> 赞同：1
> 
> 时间：2013-01-01T16:16:55.813
> 
> 标签：laravel, eager-loading, eloquent, eager, laravel-3

使用 L3 可以正常工作：

```
$r = Site::with('services')->get() 
```

这正是我所期望的。一组`Site`对象，所有**服务**关系都整齐地填充。

**但是**，如果相反，我只使用以下内容：

```
$r = Site::with('services')->first() 
```

或者

```
$r = Site::with('services')->all() 
```

站点对象的关系完全为空。

这对我来说就像一个错误，但我想做的事情有什么不对吗？目前要获得与`first()`代替使用相同的效果，`get()`我必须从返回的数组中提取第一个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:09:38.260

首先，使用`->first()` *应该*按预期工作。再试一次，我有，它有效。如果它不适合您，请检查您的版本。我的是 3.2.10。

`->all()`不应该那样工作，它只是一个简单的快捷方式。[文档说](http://laravel.com/docs/database/eloquent#get)要检索整个表，请使用静态*方法* `all`。请注意，它是一个静态方法，您在对象上下文中使用它。但是无论如何，您可以忘记这一点并使用`->get()`，这有什么问题？

如果您查看源代码`laravel/database/eloquent/model.php`，您会看到：

```
public static function all()
{
    return with(new static)->query()->get();
} 
```

如您所见，此函数只是创建一个 new `Model`，然后检索所有行。

# wcf - 使用 WCF 的基于代理的应用程序

> ID：14112005
> 
> 赞同：0
> 
> 时间：2013-01-01T16:17:32.417
> 
> 标签：wcf, nettcpbinding, agent, wshttpbinding

我即将决定在运输系统领域中使用的基于代理的应用程序的技术选择。

基本上将有一个托管后端的中央系统，以及位于城镇各处（安装在桌面上）的多个代理，它们与收集数据的设备/信息亭进行通信，然后将它们传输回中央服务器。中央服务器也可以托管在云上。

以下很重要

*   保护设备与代理以及代理与中央服务器之间的数据和通信。
*   代理应该很容易安装，只需很少或不需要配置。
*   接近 100% 的正常运行时间和可用性

WCF 是否适合这里的账单？如果是这样，我应该选择什么绑定类型？带有 SSL/HTTPS 的 netTCP 或 wsHttp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:27:21.973

WCF 绝对是这种场景的合适选择。对于您的绑定，实际问题是您将使用什么技术。如果您想让代理在Java 等非.NET 环境中运行，那么您应该选择wsHttpBinding。此绑定通过 SOAP 进行通信，并且具有很强的互操作性。

如果您选择使用 .NET 代理，您不妨使用 netTcpBinding，因为它们使用相同的 WCF 框架。它还支持二进制编码。如果您真的需要做出选择，请查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms730879.aspx)。

对于您的代理，您可以使用作为 Windows 服务在后台运行的简单控制台应用程序。WIX 可以帮助您（将应用程序安装为 Windows 服务），但这就是我所知道的。WIX 还可以帮助您进行基本的安装和配置，但它具有很高的学习曲线，因此您可能需要在它上面投入时间。

# linux - 在 UNIX 中基于字段连接两个文件

> ID：14112015
> 
> 赞同：-2
> 
> 时间：2013-01-01T16:18:45.500
> 
> 标签：linux, shell, unix, join, merge

我有一个要求，其中`fileA`包含一个包含多列的行列表，其中一列`emaillist`被命名为`emaillist[1,2,3,..]`. 我已经定义了另一个文件`fileB`，我在其中为`emailist[1,2,3,..]`变量赋值。我阅读`fileA`并想`emailist`阅读`fileB`.

**档案A：**

```
XXX1 YYY1 emailist1
XXX2 YYY2 emailist2 
```

**文件B：**

```
emailist1=abcd@xyz.com 
emailist2=xyz@zbc.com 
```

**外壳脚本：**

```
Read fileA

email = $3 
```

`emailist1`这是我的挑战，如何阅读`fileB`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:35:44.693

使用`join`命令：

```
$ cat fileA
XXX1 YYY1 emailist1
XXX2 YYY2 emailist2

$ cat fileB
emailist1 abcd@xyz.com 
emailist2 xyz@zbc.com

$ join -1 3 -2 1 -o '1.1 1.2 2.2' <(sort fileA -k3,3) <(sort fileB)
XXX1 YYY1 abcd@xyz.com 
XXX2 YYY2 xyz@zbc.com 
```

该`join`命令要求首先对数据进行排序，因此我们在`sort`文件中`emaillist`加入ie 。该选项用于以几乎相同的方式指定要输出的字段，因为您没有明确指定我猜字段 1 和2 来自: 。`column 3``file 1``column 1``file 2``-1 3 -2 1``-o``fileA``fileB``1.1 1.2 2.2`

*注意：将like`=`中的 改为空格。`fileB``sed 's/=/ /' fileB`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T01:24:14.483

您需要先读取`fileB`并将值添加到关联数组中，然后在`fileA`读取时将第三列替换为数组中的值。这个逻辑可以很容易地实现`awk`：

```
awk 'FNR==NR { sub(/=/," "); a[$1]=$2; next } $3 in a { $3=a[$3] }1' fileB fileA 
```

结果：

```
XXX1 YYY1 abcd@xyz.com
XXX2 YYY2 xyz@zbc.com 
```

# actionscript-3 - Flash AS3：如何创建一个功能来播放不同按钮的声音？

> ID：14112016
> 
> 赞同：0
> 
> 时间：2013-01-01T16:18:47.263
> 
> 标签：actionscript-3, flash

我正在制作音板，并且正在使用动作脚本。我想要一个带有代码的功能，可以根据按下的按钮播放不同的声音。我还将从库而不是 URL 播放。这是我想做的一些与伪混合的真实代码：

```
var soundEffect:SoundEffect = new SoundEffect();

sound1_btn.addEventListener(MouseEvent:CLICK, buttonName, playSoundEffect); //possible?

function playSoundEffect(e:Event, buttonName):void {
    soundEffect.attachSound = buttonName + ".mp3"  //pseudo code
    soundEffect.play();
} 
```

SoundEffect 类只是我在 Linkage 中使用的名称。我不知道改变一个类所代表的声音的最佳方法，或者一般来说最好的方法。理想情况下，我不想*用*50 个不同的声音变量和 50 个函数创建 50 个不同的类。我宁愿每个按钮都有某种标识符，并且在函数中我可以使用按钮名称或标识符来分配适当的声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:33:41.720

如果您使用的是 Button 符号，则可以使用在按钮名称中编码类名称的命名约定。

因此，如果您的音效类名称是`sfx_jump`，您将命名您的实例：

```
sfx_jump_btn 
```

然后你像这样设置你的事件监听器：

```
sfx_jump_btn.addEventListener(MouseEvent.CLICK, clickHandler); 
```

您想要在 clickHandler 函数中做的是首先根据按钮名称属性生成您的 className 字符串。然后您通过使用 getDefinitionByName 获得类定义，以便您可以创建声音的实例，以下代码是您如何做到这一点：

```
public function clickHandler(e:MouseEvent):void
{
     var button:SimpleButton = e.target as SimpleButton;
     // use replace to clip off the _btn suffix
     var className:String = button.name.replace("_btn","");
     var SoundClass:Class = getDefinitionByName(className) as Class;
     var newSound:Sound = new SoundClass();
     newSound.play();
} 
```

您还需要添加此导入：

```
import flash.utils.getDefinitionByName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:15:57.723

是的，你可以做到。由于您有多个按钮，因此将一个属性附加到每个按钮，如下所示，我将“soundToPlay”属性附加到 sound1_btn。

```
sound1_btn.soundToPlay = "1.mp3";
sound1_btn.addEventListener( MouseEvent.CLICK, handleBtnClick);

function handleBtnClick( e:Event ):void{
    soundEffect.attachSound = e.target.soundToPlay;
    soundEffect.play();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:49:02.157

@hrehman 为您提供答案，但如果您的按钮类没有该属性`soundToPlay`，您可以将该`name`属性用作 ID。并返回`currentTarget`事件的属性。

```
sound1_btn.name = "Sound1";
sound1_btn.addEventListener(MouseEvent:CLICK, playSoundEffect);

function playSoundEffect(e:Event):void {
    soundEffect.attachSound = e.currentTarget.name + ".mp3";
    soundEffect.play();
} 
```

# c++ - c++中的快速输入和输出

> ID：14112018
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:18:57.383
> 
> 标签：c++

在网上搜索 c++ 中的快速 i/o 时，这是我遇到的“最好的”（根据我）

```
#include <stdlib.h>
#include <stdint.h>
#include <unistd.h>
class FastInput {
public:
    FastInput() {
        m_dataOffset = 0;
        m_dataSize = 0;
        m_v = 0x80000000;
    }
    uint32_t ReadNext() {
        if (m_dataOffset == m_dataSize) {
            int r = read(0, m_buffer, sizeof(m_buffer));
            if (r <= 0) return m_v;
            m_dataOffset = 0;
            m_dataSize = 0;
            int i = 0;
            if (m_buffer[0] < '0') {
                if (m_v != 0x80000000) {
                    m_data[m_dataSize++] = m_v;
                    m_v = 0x80000000;
                }
                for (; (i < r) && (m_buffer[i] < '0'); ++i);
            }
            for (; i < r;) {
                if (m_buffer[i] >= '0') {
                    m_v = m_v * 10 + m_buffer[i] - 48;
                    ++i;
                } else {
                    m_data[m_dataSize++] = m_v;
                    m_v = 0x80000000;
                    for (i = i + 1; (i < r) && (m_buffer[i] < '0'); ++i);
                }
            }
        }
        return m_data[m_dataOffset++];
    }
public:
    uint8_t m_buffer[32768];
    uint32_t m_data[16384];
    size_t m_dataOffset, m_dataSize;
    uint32_t m_v;
};
class FastOutput {
public:
    FastOutput() {
        m_dataOffset = 0;
    }
    ~FastOutput() {
    }
    void Flush() {
        if (m_dataOffset) {
            if (write(1, m_data, m_dataOffset));
            m_dataOffset = 0;
        }
    }
    void PrintUint(uint32_t v, char d) {
        if (m_dataOffset + 11 > sizeof(m_data)) Flush();
        if (v < 100000) {
            if (v < 1000) {
                if (v < 10) {
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 1;
                } else if (v < 100) {
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 2;
                } else {
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 3;
                }
            } else {
                if (v < 10000) {
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 4;
                } else {
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 5;
                }
            }
        } else {
            if (v < 100000000) {
                if (v < 1000000) {
                    m_data[m_dataOffset + 5] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 6;
                } else if (v < 10000000) {
                    m_data[m_dataOffset + 6] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 5] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 7;
                } else {
                    m_data[m_dataOffset + 7] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 6] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 5] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 8;
                }
            } else {
                if (v < 1000000000) {
                    m_data[m_dataOffset + 8] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 7] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 6] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 5] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 9;
                } else {
                    m_data[m_dataOffset + 9] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 8] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 7] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 6] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 5] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 4] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 3] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 2] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 1] = v - v / 10 * 10 + 48;
                    v /= 10;
                    m_data[m_dataOffset + 0] = v + 48;
                    m_dataOffset += 10;
                }
            }
        }
        m_data[m_dataOffset++] = d;
    }
    void PrintChar(char d) {
        if (m_dataOffset + 1 > sizeof(m_data)) Flush();
        m_data[m_dataOffset++] = d;
    }
    void ReplaceChar(int offset, char d) {
        m_data[m_dataOffset + offset] = d;
    }
public:
    uint8_t m_data[32768];
    size_t m_dataOffset;
};

int main()
{
    ;
} 
```

但是，它没有写任何关于如何获取输入或给出输出的内容。

如果您可以`a integer and a c++ string`通过示例说明如何获取输入和提供输出，那将有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:39:13.403

以下代码从标准输入中读取一个无符号整数值：

```
FastInput fi;
uint32_t value = fi.ReadNext(); 
```

将无符号整数值写入标准输出：

```
FastOutput fo;
fo.PrintUint(123456, '\n');
fo.Flush(); 
```

但说真的：**忘记这些课程。**我无法想象这个类如何以任何方式对你想要实现的目标有用。

# python - 确保两个 Pandas DatetimeIndexes 相同？

> ID：14112020
> 
> 赞同：4
> 
> 时间：2013-01-01T16:19:09.267
> 
> 标签：python, pandas

`DatetimeIndex`在比较两个具有不同长度的 's时，我遇到了一个问题`assert`，如下所示：

```
In [1]: idx1 = pd.date_range('2010-01-01','2010-12-31',freq='D')

In [2]: idx2 = pd.date_range('2010-01-01','2010-11-01',freq='D')

In [3]: assert (idx1 == idx2).all() 
```

我得到错误：

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-17-ad2cfd6d11c2> in <module>()
----> 1 assert (idx1 == idx2).all()

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas-0.10.1.dev_dcd9df7-py2.7-macosx-10.8-x86_64.egg/pandas/tseries/index.pyc in wrapper(self, other)
     75         result = func(other)
     76 
---> 77         return result.view(np.ndarray)
     78 
     79     return wrapper

AttributeError: 'NotImplementedType' object has no attribute 'view' 
```

如果这还没有实现，那很好，但是有一些**熊猫**方法可以做到这一点吗？

**注意：** 我已经成功使用了以下内容：

```
In [3]: assert list(idx1) == list(idx2) 
```

因此，以下方法也有效：

```
In [3]: assert list(df.index) == list(testindex) 
```

但我想知道是否有更`pandas`-ish的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:31:08.917

```
In [1]: import pandas as pd

In [2]: idx1 = pd.date_range('2010-01-01','2010-12-31',freq='D')

In [3]: idx2 = pd.date_range('2010-01-01','2010-11-01',freq='D')

In [4]: idx3 = pd.date_range('2010-01-01','2010-12-31',freq='D')

In [5]: help(idx1.equals)
Help on method equals in module pandas.tseries.index:

equals(self, other) method of pandas.tseries.index.DatetimeIndex instance
    Determines if two Index objects contain the same elements.

In [6]: print(idx1.equals(idx2))
False

In [7]: print(idx1.equals(idx3))
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T14:44:22.863

您现在有了[pandas.Index.Difference](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.difference.html)，它可能适合您的需求。

就这么简单：

```
idx_common = idx1.difference(idx2) 
```

# android - 如何在 Android App 中创建用户手册？

> ID：14112031
> 
> 赞同：6
> 
> 时间：2013-01-01T16:20:20.250
> 
> 标签：android, hint, user-manual

我看到了一些应用程序的漂亮用户手册。在那里，当用户进入一个新页面时，它的大部分表面都是灰色的，除了用户必须点击它的区域。此外，这里用户看到了一些提示。例如像这张图片：

![在此处输入图像描述](../Images/61712339bd9e3f226dd9dd4bf35c8d2a.png)

当用户点击较亮的区域时，将显示下一个提示，例如：

![在此处输入图像描述](../Images/75bafb219ad2b593ad00b036f309946d.png)

现在我的问题是：我们如何创建用户手册或用户提示，比如这些？

# php - PHP：从另一个脚本回显heredoc

> ID：14112033
> 
> 赞同：-2
> 
> 时间：2013-01-01T16:20:35.247
> 
> 标签：php, while-loop, echo, heredoc

我无法将`heredoc`一个 php 文件中的语句回显到另一个文件中。我有一个脚本用于检索 API 数据库信息，然后将该信息格式化为一个`heredoc`以将信息回显到`index.php`页面中。我拥有的代码是：

```
while($artist_info = $artist_details_resource->fetch_assoc()){
   $artist = <<<DOC
             <img src="{$artist_info['image_url']}" alt="$artist_info['artist_name']" />
             <p>{$artist_name}</p>
DOC;
} 
```

在 index.php 脚本中，我在希望打印此 he​​redoc 的地方开始了一个 php 子句。代码是：

```
<?php
  if($artist){
     echo $artist;
  }
?> 
```

但是，这只会打印 while 循环中的最后一个 heredoc 字符串，并且不会在每次迭代中回显每个 heredoc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:23:06.540

为什么会呢？您不是在循环中回显它，也不是在连接字符串。您在每次迭代时都会覆盖字符串。

```
while($artist_info = $artist_details_resource->fetch_assoc()){
   $artist .= <<<DOC
             <img src="{$artist_info['image_url']}" alt="$artist_info['artist_name']" />
             <p>{$artist_name}</p>
} 
```

注意`.=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:25:41.783

当然，这只会打印最后一个字符串，因为您使用`$artist = <<<DOC`所以您会在每个循环中覆盖 $artist 变量的值。

尝试`$artist .= <<<DOC`或将其放入数组中：`$artists[] = <<<DOC`

# oracle - oracle更新语句错误

> ID：14112039
> 
> 赞同：0
> 
> 时间：2013-01-01T16:21:47.430
> 
> 标签：oracle, subquery

我需要使用基于匹配的源表中的值更新`assignment_type_desc`表中调用的列。问题是NULL中有两条记录，而. 我不需要这些记录，因此我在更新语句中包含了条件。但是更新语句仍然返回*单行子查询返回多行*错误。`randm_sampler``clm_snapshot``claim_id``clm_snapshot``claim_id``assignment_type_desc``NOT NULL`

 *```
UPDATE RANDM_SAMPLER SET ASSIGNMENT_TYPE_DESC =
  (SELECT DISTINCT A.ASSIGNMENT_TYPE_DESC 
     FROM CLM_SNAPSHOT A, 
          RANDM_SAMPLER B
    WHERE A.CLAIM_ID = B.CLAIM_ID 
      AND A.CURRENT_SNAPSHOT_IND='Y'
      AND A.HO_CONSULTANT_SEQ_NBR = (SELECT MAX(HO_CONSULTANT_SEQ_NBR) 
                                       FROM CLM_SNAPSHOT C 
                                      WHERE A.CLAIM_ID = C.CLAIM_ID 
                                        AND C.CLAIM_ID IS NOT NULL 
                                      GROUP BY CLAIM_ID)
      AND A.CLAIM_ID IS NOT NULL ) 
```

我绝对肯定重复项来自`NULL`具有`claim_id`. 但是这个`NOT NULL`条件在这里似乎并不有效。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:46:09.690

尝试遵循 UPDATE 语句：

```
UPDATE RANDM_SAMPLER SET ASSIGNMENT_TYPE_DESC =
  (SELECT DISTINCT A.ASSIGNMENT_TYPE_DESC 
     FROM CLM_SNAPSHOT A
    WHERE A.CLAIM_ID = RANDM_SAMPLER.CLAIM_ID 
      AND A.CURRENT_SNAPSHOT_IND='Y'
      AND A.HO_CONSULTANT_SEQ_NBR = (SELECT MAX(HO_CONSULTANT_SEQ_NBR) 
                                       FROM CLM_SNAPSHOT C 
                                      WHERE A.CLAIM_ID = C.CLAIM_ID 
                                        AND C.CLAIM_ID IS NOT NULL 
                                      GROUP BY CLAIM_ID)
      AND A.CLAIM_ID IS NOT NULL ) 
```

我已经从子查询中删除了 RANDM_SAMPLER 的 JOIN ，而是添加了非常重要的条件，因为它使指向要更新的表的链接：

```
A.CLAIM_ID = RANDM_SAMPLER.CLAIM_ID 
```

您可能尝试过相同的方法，但添加表 B 会使事情变得更糟。而且与外面的桌子没有任何联系。*

# php - Codeigniter 将默认表单值从 Controller 设置为 View

> ID：14112042
> 
> 赞同：1
> 
> 时间：2013-01-01T16:22:13.967
> 
> 标签：php, codeigniter-2, crud

我只是想知道为什么我的 Codeigniter 项目会生成以下警告消息。

```
A PHP Error was encountered

Severity: Warning

Message: Creating default object from empty value

Filename: controllers/person.php

Line Number: 268 
```

在我的人控制器中，

```
function __construct()
    {
        parent::__construct();

        // load library
        $this->load->library(array('table','form_validation'));

        // load helper
        $this->load->helper('url');
        $this->load->config('array_constant', TRUE);

        // load model
        $this->load->model('Person_model','',TRUE);
    }
// set empty default form field values
    function _set_fields()
    {
        Line No: 268 $this->form_data->id = '';
        $this->form_data->name = '';
        $this->form_data->gender = '';
        $this->form_data->dob = '';
        $this->form_data->district = '';
        $this->form_data->education = '';
        $this->form_data->occupation = '';
        $this->form_data->annual_income = '';
        $this->form_data->company_name = '';
        $this->form_data->description = '';
    } 
```

在我的视图文件中，

```
<table width="100%">
          <tr>
            <td width="30%">ID</td>
            <td><input type="text" name="id" disabled="disable" class="text" value="<?php echo set_value('id'); ?>"/></td>
            <input type="hidden" name="id" value="<?php echo set_value('id',$this->form_data->id); ?>"/>
        </tr>
        <tr>
            <td valign="top">Name<span style="color:red;">*</span></td>
            <td><input type="text" name="name" class="text" value="<?php echo set_value('name',$this->form_data->name); ?>"/>
<?php echo form_error('name'); ?>
            </td>
        </tr> 
```

抑制上述警告的任何想法或建议！

```
echo "<pre>";
        var_dump($this->form_data);
        echo "</pre>";

object(stdClass)#21 (10) {
  ["id"]=>
  string(0) ""
  ["name"]=>
  string(0) ""
  ["gender"]=>
  string(0) ""
  ["dob"]=>
  string(0) ""
  ["district"]=>
  string(0) ""
  ["education"]=>
  string(0) ""
  ["occupation"]=>
  string(0) ""
  ["annual_income"]=>
  string(0) ""
  ["company_name"]=>
  string(0) ""
  ["description"]=>
  string(0) ""
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T17:30:24.603

此通知在 PHP 5.4 及更高版本中生成。这不是错误，而是通知 - 旨在帮助您调试应用程序并提高对可能问题的认识。

当您`_set_fields`最初调用`$this->form_data`is`NULL`时，您尝试使用以下行将 NULL 视为对象：

```
$this->form_data->id = ''; 
```

`NULL`不能有像“id”这样的属性，所以通知告诉你 PHP 假设你想要一个对象，所以它会自动为你创建一个。

有很多方法可以解决这个问题，需要对代码进行一些重组，但有一个简单的解决方案可以使通知静音：

```
$this->form_data = new stdClass;
$this->form_data->id = '';
// etc. 
```

更好的解决方案是为您的对象使用一个类，非常简单的示例：

```
$this->form_data = new MY_Form_Data_Object();

class MY_Form_Data_Object { // use a better name that describes what this is
    public $name = '';
    public $gender = '';
    public $dob = '';
    // etc.
    // add some helpful methods here when needed, like validation
    // maybe a constructor to initialize some values
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T13:35:49.767

我有同样的问题，除了我无法更改我的所有代码。

为了让 CI 抑制警告，我在 index.php 中将 ENVIRONMENT 设置为生产：

```
//define('ENVIRONMENT', 'development');
define('ENVIRONMENT', 'production'); 
```

基本上 CI 设置错误报告

```
error_reporting(0); 
```

# android - Android：如何获取父视图的 ID？

> ID：14112044
> 
> 赞同：14
> 
> 时间：2013-01-01T16:22:16.477
> 
> 标签：android

`View.getRoot()`返回`View`，所以我们可以很容易地通过使用找出哪个是根视图`getResourceName(View.getId())`。

`View.getParent()`...，虽然我希望它也返回`View`它是父级，但实际上只返回一个`ViewParent`似乎很少有用的方法/字段的实例。糟透了。

那么，有没有办法知道父母的ID？我相信 a`View`的父母也是`View`，因此它应该有 mID 字段。

我真的很想知道为什么谷歌不让`View.getParent()`return `View`。这是有道理的，只有当其他东西不是`View`父类时，据我所知，它仅限于`View`及其子类。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-01T17:34:46.053

`ViewParent`只是任何可以有子视图的视图实现的接口。大多数情况下，您返回的类将是 a `ViewGroup`、like`LinearLayout`或的实例`RelativeLayout`。我不确定您所说的“名称”是什么意思，但如果您想获得类名，您可以像往常一样这样做：`view.getParent().getClass().getName()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T18:15:45.227

[文档](https://developer.android.com/reference/android/view/View.html#getParent%28%29)声明父母不一定`View`是：

> public final ViewParent getParent()
> 
> 在 API 级别 1 中添加 获取此视图的父级。请注意，父级是 ViewParent 而不一定是 View。
> 
> 返回此视图的父级。

[`ViewParent`](https://developer.android.com/reference/android/view/ViewParent.html)但是继承自的所有实现`View`。尽管 SDK 中的所有实现都是视图，但这应该是一个将父级与`View`使用接口分离的设计决策。`ViewParent`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T18:22:59.000

尝试先投射它。例如，如果您尝试获取 id 的 View 的父级是 TableRow，则执行

```
((TableRow)View.getParent()).getID() 
```

# ruby - 在 rspec 中为 after_create 钩子创建存根

> ID：14112057
> 
> 赞同：2
> 
> 时间：2013-01-01T16:23:32.157
> 
> 标签：ruby, ruby-on-rails-3, rspec, rspec2, rspec-rails

我的模型代码是：

```
class User < ActiveRecord::Base
  after_create :create_node_for_user

   def create_node_for_user
     UserGraph.create(user_id: self.id)
   end
end 
```

并测试用户模型：

```
it "create node in graph database on user creation" do
  userr = FactoryGirl.build(:user)
  UserGraph.should_receive(:create).with(user_id: userr.id)
  userr.save
end 
```

但我的测试失败并显示消息

```
Failure/Error: userr.save
   <UserGraph (class)> received :create with unexpected arguments
     expected: ({:user_id=>nil})
          got: ({:user_id=>94}) 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T20:00:26.467

Yves 给出的解释是正确的：用户 id 为 nil 直到记录被保存，因为它是由数据库自动生成的。这是另一种方法：

```
it "create node in graph database on user creation" do
  userr = FactoryGirl.build(:user)

  create_args = nil
  UserGraph.should_receive(:create) { |*args| create_args = args }
  userr.save

  expect(create_args).to eq(:user_id => userr.id)
end 
```

本质上，这改变了对参数应该是什么的期望，以便它*在*记录保存之后出现，当记录具有`id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:42:13.920

问题是`userr`您使用 FactoryGirl 构建的没有 ID。这就是为什么期望告诉你你期望`:user_id=>nil`。ID 会在 AR 保存记录时生成，所以无法提前猜出生成的 ID。您可以在模拟上使用限制较少的断言：

```
UserGraph.should_receive(:create).with(hash_including(:user_id)) 
```

这将验证散列是否通过`:user_id`密钥传递。你可以在这里找到更多信息`hash_including`：[http ://rubydoc.info/gems/rspec-mocks/RSpec/Mocks/ArgumentMatchers:hash_include](http://rubydoc.info/gems/rspec-mocks/RSpec/Mocks/ArgumentMatchers:hash_including)

您可以尝试的另一件事（不确定它是否有效）是`kind_of`匹配 rspec 的匹配器。这将确保一个数字通过`:user_id`

```
UserGraph.should_receive(:create).with(:user_id => kind_of(Numeric)) 
```

# iphone - NSString 添加到邮件正文时丢失新行

> ID：14112060
> 
> 赞同：1
> 
> 时间：2013-01-01T16:23:58.720
> 
> 标签：iphone, ios, cocoa, nsstring, mfmailcomposeviewcontroller

我将一些文本存储为`NSString`. 文本包含多个段落。当我记录或显示文本时，新行字符被正确插入。

但是，当我使用`MFMailComposeViewController`并将文本添加到邮件正文时，新行被删除并且文本一起运行。

是什么原因造成的，如何保留格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:30:01.600

我相信你这样做的方式应该是有效的，如果你指的是换行符`\n`。一种替代方法是替换出现的`\n`with`<br>`并将作曲家的 isHTML 标志设置为 YES：

```
NSString *emailString = [myParagraphs stringByReplacingOccurrencesOfString:@"\n" withString:@"<br>"];
[mailComposer setMessageBody:emailString isHTML:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:40:25.427

（好吧，如果每个人都从我的评论中写一个答案，那么我也写一个......）

如果您指示视图控制器将文本视为 HTML，则可以保留其格式，否则它将被丢弃。请注意，在这种情况下，您当然必须为其提供实际的 HTML（`\n`在 HTML 中没有任何好处）。所以试试：

```
NSCharacterSet *set = [NSCharacterSet newlineCharacterSet];
NSString *html = [[body componentsSeparatedByCharactersInSet:set]
    componentsJoinedByString:@"<br />"];
[viewController setMessageBody:html isHTML:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:32:05.687

正如 H2CO3 在评论中提到的，您需要将其包装为 HTML 内容。

```
NSString *myEmailBody = @"First Line <br/> Second <br/> Third";
[composer setMessageBody:myEmailBody isHTML:YES]; 
```

# c++ - 从函数指针向量调用成员函数的函数指针

> ID：14112067
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:25:19.077
> 
> 标签：c++, vector, function-pointers, event-driven-design

我认为这主要是一个语法错误（虽然在编译期间没有捕获，但只有在运行时才会发生错误）

我正在尝试开发一个事件驱动的架构，在其中我保留一个 eventReceiver 的向量并尝试从该向量中调用它们。

**通用IO.h**

```
 class CommonIO {
    public:
        typedef void (*incomingMsgReceiver)(char*);
            void registerForIncomingMsg(incomingMsgReceiver);
            void incomingMsgReceived(char*);
    } 
```

**通用IO.cpp**

```
 std::vector<void (*)(char*)> listeners;

    void CommonIO::registerForIncomingMsg(incomingMsgReceiver receiverFunction) {
        listeners.push_back(receiverFunction);
    }

    void CommonIO::incomingMsgReceived(char* buf) {
        for (unsigned int j = 0; j < listeners.size(); j++) {
                listeners[i](buf);  //error, segmentation fault..how do i call it?
            }
    } 
```

**主文件**

```
class Main {
public:
     static void msgReceived(char*);
     void mainLoop();

} 
```

**主文件**

```
void Main::msgReceived(char* msg)
{
    printf("\n\n --------->>>>> %s \n\n" , msg);
}

void Main::mainLoop()
{
     CommonIO::incomingMsgReceiver receiver = &Main::msgReceived;
     CommonIO::getInstance()->registerForIncomingMsg( receiver );
} 
```

异步进程调用incomingMsgReceived 函数

该程序编译得很好..但是在：listenersi; 线。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:40:32.003

为什么不使用继承和通用基类？制作更简单的代码，并且您正在使用对象进行详细说明，以便您拥有数据、其他方法等。

即这样的东西

```
class incomingMsgReceiver {
   public:
      virtual void msgReceived(char *msg) = 0;
};

class MyMessage : public incomingMsgReceiver {
   public virual void msgReceieved(char *msg);
}

class OtherMyMessage : public incomingMsgReceiver {
   public virual void msgReceieved(char *msg);
}

void MyMessage::msgReceived(char *msg)
{
   /// Do stuff here

}

void msgReceived::OtherMyMessage(char *msg)
{
   /// Do stuff here

} 
```

然后为您的`common.h`：

```
class CommonIO
{
   private:
      std::vector<incomingMsgReceiver *> listeners;
   public:
      void addListner(incomingMsgReceiver *reveiver) { listners.push_back(reveiver); }

      void incomingMsgReceived(char*msg)
      {
         for (unsigned int j = 0; j < listeners.size(); j++)
         {
            listeners[j]->msgReceived((msg);
         }
      }
}; 
```

# regex - 正则表达式和 preg_replace

> ID：14112071
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:25:49.600
> 
> 标签：regex, preg-match

这条线是什么意思：

```
$fields = explode("\r\n", preg_replace('/\x0D\x0A[\x09\x20]+/', ' ', $header)); 
```

我从这个答案[cURL 得到它，将重定向 url 到一个变量](https://stackoverflow.com/questions/4062819/curl-get-redirect-url-to-a-variable/4243667#4243667)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:31:10.530

将展开[拆分为多行的](https://www.rfc-editor.org/rfc/rfc2822#section-2.2.3 "Long Header Fields")`preg_replace`电子邮件标题行。然后调用会将生成的字符串拆分为一个数组，每个数组单元格有一个标题行。`explode`

例如，字符串：

```
Subject: This is a long subject
    line split across
  multiple lines
From: user@example.com 
```

将转化`preg_replace`为：

```
Subject: This is a long subject line split across multiple lines
From: user@example.com 
```

以下`explode`将为您提供：

```
Array(
    [0] => 'Subject: This is a long subject line split across multiple lines',
    [1] => 'From: user@example.com'
) 
```

# python - 使用 PyYaml 将 Python 字典转换为 yaml 文档

> ID：14112072
> 
> 赞同：3
> 
> 时间：2013-01-01T16:25:57.943
> 
> 标签：python, yaml, pyyaml

我有两个要写入单个 yaml 文件的 python 字典，其中包含两个文档：

```
definitions = {"one" : 1, "two" : 2, "three" : 3}
actions = {"run" : "yes", "print" : "no", "report" : "maybe"} 
```

yaml 文件应如下所示：

```
--- !define
one: 1
two: 2
three: 3

-- !action
run: yes
print: no
report: maybe
... 
```

使用 PyYaml 我没有找到明确的方法来做到这一点。我确信有一个简单的方法，但是深入研究 PyYaml 文档，只会让我感到困惑。我需要翻斗车、发射器还是什么？这些类型中的每一种都会产生什么类型的输出？Yaml 文本？yaml 节点？YAML 对象？无论如何，我将不胜感激任何澄清。

* * *

以下是unutbu的回答，这是我能想到的最简洁的版本：

DeriveYAMLObjectWithTag 是一个创建新类的函数，它从 YAMLObject 派生并带有所需的标签：

```
def DeriveYAMLObjectWithTag(tag):
    def init_DeriveYAMLObjectWithTag(self, **kwargs):
        """ __init__ for the new class """
        self.__dict__.update(kwargs)

    new_class = type('YAMLObjectWithTag_'+tag,
                    (yaml.YAMLObject,),
                    {'yaml_tag' : '!{n}'.format(n = tag),
                    '__init__' :  init_DeriveYAMLObjectWithTag})
    return new_class 
```

以下是如何使用 DeriveYAMLObjectWithTag 获取所需的 Yaml：

```
definitions = {"one" : 1, "two" : 2, "three" : 3, "four" : 4}
actions = {"run" : "yes", "print" : "no", "report" : "maybe"}
namespace = [DeriveYAMLObjectWithTag('define')(**definitions),
             DeriveYAMLObjectWithTag('action')(**actions)]

text = yaml.dump_all(namespace,
                     default_flow_style = False,
                     explicit_start = True) 
```

感谢所有回答的人。我似乎在 PyYaml 中缺少功能，这是克服它的最优雅的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T17:07:08.400

好吧，我仍在研究自动评论（无法立即找到相关文档），但这应该可以解决问题：

```
import yaml

definitions = {"one" : 1, "two" : 2, "three" : 3}
actions = {"run" : "yes", "print" : "no", "report" : "maybe"}

output = yaml.dump(actions, default_flow_style=False, explicit_start=True)
output += yaml.dump(definitions, default_flow_style=False, explicit_start=True)

print output 
```

需要注意的是，字典是无序的，因此无法保证生成的 YAML 的顺序。如果你想在家里订购 - 看看[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:09:53.613

怎么样：

```
class Bunch(yaml.YAMLObject):
    yaml_tag = u'!Bunch'
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)
    def __repr__(self):
        return '{c}({a})'.format(
            c = self.__class__.__name__,
            a = ', '.join(
                ['='.join(map(str,item)) for item in self.__dict__.items()]))
tag_names = ['define', 'action']
namespace = {}
for name in tag_names:
    namespace[name] = type(name, (Bunch,), {'yaml_tag':u'!{n}'.format(n = name)})

definitions = {"one" : 1, "two" : 2, "three" : 3}
actions = {"run" : "yes", "print" : "no", "report" : "maybe"}
text = yaml.dump_all([namespace['define'](**definitions),
                      namespace['action'](**actions)],
                     default_flow_style = False,
                     explicit_start = True)
print(text) 
```

产生

```
--- !define
one: 1
three: 3
two: 2
--- !action
print: 'no'
report: maybe
run: 'yes' 
```

并将 YAML 加载回 Python 对象：

```
for item in  yaml.load_all(text):
    print(item)
    # define(one=1, three=3, two=2)
    # action(print=no, report=maybe, run=yes) 
```

YAMLObject 的子类用于创建[特定于应用程序的标签。](http://pyyaml.org/wiki/PyYAMLDocumentation#Constructorsrepresentersresolvers)

# jquery - 通过表格元素连续暂停循环

> ID：14112073
> 
> 赞同：2
> 
> 时间：2013-01-01T16:26:24.063
> 
> 标签：jquery

我想连续循环浏览表格的行，突出显示一行，然后暂停并移动到下一行。当我到达终点时，我想回到原点重新开始。

我最喜欢 roXon 的答案，因为它感觉更简洁和实用，所以我将它扩展为使用三个表。但是现在有代码重复——在没有重复的情况下编写代码的最优雅的方法是什么，它允许使用不同的表格和颜色？这是有效的三表解决方案（另外，内部函数是否绝对必要？）：

```
<!doctype html>
<html>
<head>
<style>
.highlight1 { background:gold; }
.highlight2 { background:lightblue; }
.highlight3 { background:lightgreen; }
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script language="javascript" type="text/javascript">
$(document).ready(function() {
  $(function() {
    var $TR1=$('#table1 tr:gt(0)'), TRn1=$TR1.length, c1=0;
    var $TR2=$('#table2 tr:gt(0)'), TRn2=$TR2.length, c2=0;
    var $TR3=$('#table3 tr:gt(0)'), TRn3=$TR3.length, c3=0;
    function loop(){
      $TR1.eq(c1++%TRn1).addClass('highlight1').siblings().removeClass('highlight1');
      $TR2.eq(c2++%TRn2).addClass('highlight2').siblings().removeClass('highlight2');
      $TR3.eq(c3++%TRn3).addClass('highlight3').siblings().removeClass('highlight3');
    }
    setInterval(loop, 1000);
  });
});
</script>
</head>
<body>
<table id="table1" border="1">
  <th>Table One</th>
  <tr><td>Table Row 1</td></tr>
  <tr><td>Table Row 2</td></tr>
  <tr><td>Table Row 3</td></tr>
  <tr><td>Table Row 4</td></tr>
  <tr><td>Table Row 5</td></tr>
  <tr><td>Table Row 6</td></tr>
</table>
<table id="table2" border="1">
  <th>Table Two</th>
  <tr><td>Table Row 1</td></tr>
  <tr><td>Table Row 2</td></tr>
  <tr><td>Table Row 3</td></tr>
  <tr><td>Table Row 4</td></tr>
  <tr><td>Table Row 5</td></tr>
  <tr><td>Table Row 6</td></tr>
</table>
<table id="table3" border="1">
  <th>Table Three</th>
  <tr><td>Table Row 1</td></tr>
  <tr><td>Table Row 2</td></tr>
  <tr><td>Table Row 3</td></tr>
  <tr><td>Table Row 4</td></tr>
  <tr><td>Table Row 5</td></tr>
  <tr><td>Table Row 6</td></tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:32:16.477

您可以`setInterval()`为此使用：

```
var $rows = $('table tr td');
var index = 0;

setInterval(function() {
    $('.highlighted').removeClass('highlighted');
    $rows.eq(index).addClass('highlighted');

    index = (index + 1) % $rows.length;
}, 100);​ 
```

如果您只打算一次使用一个活动元素，请使用 a`id`而不是`class`.

**演示：http: [//jsfiddle.net/JCSL3/3/](http://jsfiddle.net/JCSL3/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:42:15.570

jQuery delay() 方法用于动画。尝试改用 setInterval 计时器。

```
var rows =  $('tr:gt(0)'),
   rowIndex = 0,
   interval;

interval = setInterval(function() {
    rows.removeClass('highlight');
    $(rows[rowIndex]).addClass('highlight');
    rowIndex++;
    if (rowIndex > rows.length) {
        rowIndex = 0;            
    }
},1500); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T16:45:36.770

创建 CSS 类`.highlight`
在使用选择器时更加具体。我添加了一个表 ID

```
var $TR = $('#highlight_table tr:gt(0)'),
    TRn = $TR.length,
      c = 0 ;

function loop(){
   $TR.eq( c++ % TRn ).addClass('highlight').siblings().removeClass('highlight');
}

setInterval(loop, 1000); 
```

**[现场演示](http://jsbin.com/ecukub/1/edit)**

`c++%TRn`将在每次循环迭代时增加我们的计数器，但是由于`Modulo`操作员 - 一旦计数器和 TR 元素的数量匹配 - 我们的计数器将重置为`0`（例如`4%4=0`）

# javascript - 画布宽度和高度计算已关闭

> ID：14112074
> 
> 赞同：0
> 
> 时间：2013-01-01T16:26:48.233
> 
> 标签：javascript, css, canvas, height, width

我正在使用我在 Git 上找到的一些脚本，它会产生雪花效果。在代码中的某处，我必须设置生成雪的画布的宽度和高度。我将画布设置为窗口全宽/高度：

```
canvas.width = $(window).width();
canvas.height = $(window).height(); 
```

但是当在浏览器中渲染时，在高度和宽度上都会有一些额外的像素向窗口添加滚动条。你可以在这里看到行为：[画布](http://disneyquet.com/)；我不太确定为什么宽度/高度计算错误，或者是否有其他东西干扰这些计算，使其大于实际窗口宽度/高度。也许有人对这种行为有不同的看法或以前遇到过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:56:29.020

该`canvas`元素默认内联显示，您可以[在此处](https://stackoverflow.com/questions/5849923/still-have-space-after-margin-padding-border-all-zero)阅读有关类似问题的信息。

解决方案非常简单:) 将以下 css 代码添加到画布元素： `display: block;` 滚动条应该会消失。

* * *

旧答案： `$(window).width()`工作正常，但我不知道为什么`$(window).height()`返回太大的值。它还导致显示垂直滚动条，因为早期计算的宽度不包括水平滚动条的大小。

# java - Spring MVC - 在控制器上设置初始化属性

> ID：14112076
> 
> 赞同：1
> 
> 时间：2013-01-01T16:26:59.693
> 
> 标签：java, spring, jakarta-ee, spring-mvc, properties

我有一个 Spring MVC，它使用我无法访问代码的外部库。这个外部库使用标准 system.getProperty 调用读取一些属性。我必须在使用服务之前设置这些值。

由于我的应用程序是 Spring MVC 应用程序，我不确定如何初始化这些属性。这是我到目前为止所做的，但由于某种原因，我的值始终为空。

我将属性放在属性文件中`/conf/config.properties`

```
my.user=myuser
my.password=mypassowrd
my.connection=(DESCRIPTION=(LOAD_BALANCE=on)(ADDRESS=(PROTOCOL=TCP)(HOST=xxxx.xxxx.xxxx)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=xxx.xxx.xxx)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=myService))) 
```

然后我在我的`applicationContext.xml`

```
<context:annotation-config/>
<context:property-placeholder location="classpath*:conf/config.properties"/> 
```

我阅读了设置初始化代码的文档，您可以实现 InitializingBean 接口，因此我实现了该接口并实现了 afterPropertiesSet() 方法。

```
private static @Value("${my.user}") String username;
private static @Value("${my.password}") String password;
private static @Value("${my.connection}") String connectionString;  

@Override
    public void afterPropertiesSet() throws Exception {     
        System.setProperty("username",username);
        System.setProperty("password",password);
        System.setProperty("connectionString",connectionString);
    } 
```

问题是调用该`afterPropertiesSet()`方法时这些值始终为空。

*   上述方法是初始化代码的正确方法，尤其是对于控制器吗？如果第二次调用 Controller 会发生什么？
*   由于初始化，值是否为空？即春天还没有设置它们吗？
*   是否可以在控制器之外添加初始化代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:34:30.690

您确定您的 bean/controller 的定义与您的定义在同一个 spring 上下文配置文件中`property-placeholder`吗？

看看鲍里斯对这个问题的回答：[@Controller 类中的 Spring @Value annotation not evaluate to value inside properties file](https://stackoverflow.com/questions/11890544/spring-value-annotation-in-controller-class-not-evaluating-to-value-inside-pro)

如果你想从你的控制器中移动你的代码，你可以添加一个组件来监听 spring 何时完成初始化，然后调用代码：

```
@Component
public class ApplicationStartedListener implements ApplicationListener<ContextRefreshedEvent> {

    private static @Value("${my.user}") String username;
    private static @Value("${my.password}") String password;
    private static @Value("${my.connection}") String connectionString;

    public void onApplicationEvent(ContextRefreshedEvent event) {
        System.setProperty("username",username);
        System.setProperty("password",password);
        System.setProperty("connectionString",connectionString);
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T21:47:47.540

修复应该相当简单，只需`static`从您的字段中删除修饰符，然后`AutoWiredAnnotationPostProcessor`负责注入用`@AuotWired`and注释的字段`@Value`，将能够正确注入值并且您`afterPropertiesSet`应该被干净地调用

# matlab - matlab中矩阵的平均矩阵

> ID：14112079
> 
> 赞同：1
> 
> 时间：2013-01-01T16:28:04.550
> 
> 标签：matlab

我是matlab的新手，我想问一些问题。matlab中是否有任何函数可以让我制作矩阵的平均矩阵？

给你一些图片，例如我有这样的矩阵：

```
A = [ 1 2
      3 4 ]

B = [ 3 2 
      1 2 ] 
```

然后我想要的平均矩阵是这样的

```
Mean = [ 2 2
         2 3 ] 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T22:20:21.560

另外一个选项：

```
 mean([A(:) B(:)]')

 ans =

        2     2     2     3 
```

这将从两个矩阵生成一个向量并返回一个您想要的均值向量，然后您可以使用`reshape`,将其重新整形为 2x2

```
reshape(mean([A(:) B(:)]'),size(A))

ans =

     2     2
     2     3 
```

**编辑：** Eitan 建议了以下更有效的单线解决方案：

```
mean(cat(ndims(A) + 1, A, B), ndims(A) + 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:17:07.583

你可以像下面这样简单地做到这一点：

```
a = [1 2 ;...
     3 4];

b = [1 3 ;...
     1 2];

sum = a + b;

mean = sum ./ 2; 
```

它将是：

```
mean =

    1.0000    2.5000
    2.0000    3.0000 
```

# logic - Tableaux 真值树 - 只有二叉树？

> ID：14112080
> 
> 赞同：0
> 
> 时间：2013-01-01T16:28:05.307
> 
> 标签：logic

是否可以使用通用树？例如，给定以下公式：

notC 或 notF 或 E

L or F or not E

F

我想检查这个知识库是否连贯。每个节点使用 3 个分支是否正确？每个节点（不包括叶子）都有 3 个子节点我在网上看到的所有示例都使用二叉树。这是一个规则还是只是内存优化？

.....................F............

......不是C............不是F............E

.L....F...notE.......L....F....notE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:18:23.557

是的，您可以从一个节点使用 2 个以上的分支。

# web-applications - 为 iphone webapp 自动创建带有“抓取”内容的页面

> ID：14112083
> 
> 赞同：1
> 
> 时间：2013-01-01T16:28:37.273
> 
> 标签：web-applications, webpage, scrape, hint

我不确定这是否是正确的部分。

到目前为止，我已经为意大利足球新闻网站（[Pianeta Lecce](http://www.pianetalecce.it/)）制作了一个 HTML iphone webapp。

我的 webapp 有一个标签栏，您可以在其中根据主题选择新闻，我成功地做到了这一点，这要归功于我用来从网站上抓取新闻的PHP Simple Html DOM Parser（ [PHP Simple HTML Dom Parser ）。](http://simplehtmldom.sourceforge.net/)

现在**这就是问题所在**：如果我单击带有图片和新闻简短摘要的链接，**它显然会加载新闻的外部页面**。但这不是我想要的：我想要的是，当我点击新闻时，它应该**以某种方式** 创建一个页面，其中的新闻内容再次从引用该新闻的网站页面中抓取（我只需要图片和新闻！）。

我认为这是一个非常**好的问题**，但我真的不知道**实现这一目标的最佳方法**是什么，尤其是关于**简单性**的问题。

因此，我希望您向我建议可能的方法以及您将如何做到这一点。还请记住，**这是一个 iPhone 网络应用程序**。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:32:21.773

我分三步完成：

1.  从网络上抓取内容
2.  规范化内容并将其添加到您的数据库中
3.  从您的数据库中以已知形式提供新闻详细信息

这样，您的应用程序不依赖于您正在抓取的任何网站，因为您提供相同的元素 - 标题，新闻的简短预览和链接 - 由您的抓取工具存储在您的数据库中的元素。

除此之外，您还可以更好地控制抓取过程，并能够监控坏消息。

# joomla2.5 - 如何向组件添加前端编辑功能？

> ID：14112086
> 
> 赞同：1
> 
> 时间：2013-01-01T16:29:11.973
> 
> 标签：joomla2.5

我按照[本教程](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Using_the_database)构建了一个组件。一切都按预期工作。现在我对如何向前端添加编辑功能感到困惑。用户（具有适当权限）应该能够单击编辑链接并编辑组件显示的数据以及添加新数据。就像在后端一样。

我感觉我错过了一些明显的东西，但我无法让我的代码工作。我想，我可以复制后端代码，但没有成功。

您可以给我一个教程或其他提示吗？

谢谢萨沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T07:15:17.643

我是对的：我错过了一些明显的东西，因为它就在那里。

看看[这个教程](http://docs.joomla.org/Using_the_editor_in_a_component)。它指导您完成将编辑器集成到前端的过程。但这也表明

*   如何显示编辑表单和
*   保存数据。

最好的问候萨沙

# c++ - c++ 全局对象声明

> ID：14112087
> 
> 赞同：0
> 
> 时间：2013-01-01T16:29:29.537
> 
> 标签：c++, object, declaration

目前我正在尝试在 C++ 中声明一个全局对象，如下所示：

在 globals.h 中

```
#pragma once
#include "Class.h"

extern Class *obj; 
```

然后在一个名为 globals.cpp 的单独文件中，我有

```
#include "globals.h"
Class *obj; 
```

然后在 main.cpp 我有

```
#include "globals.h" 
```

但是编译器向我抛出了这个错误

```
in globals.h: error C2143: syntax error : missing ';' before '*' 
```

我不明白这一点，因为这篇文章：[c++ global object](https://stackoverflow.com/questions/4918010/c-global-object)解释说这是它的完成方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:38:43.200

`C2143`通常意味着您的编译器`class Class`在变量声明之前没有找到定义/声明。

一种方法是您可能错过了`class.h`.

在`class.h`

你有

```
class Class
{
    ....
} 
```

您忘记了上面的分号。

改成

```
class Class
{
    ....
} ; 
```

如果不是这种情况，是否还有其他原因在 class.h 中找不到类 Class 的定义 - 是在 #ifdefs 内还是什么？

尝试使用 /P 编译，然后`main.i`在编辑器中打开并检查是否在语句`class Class`之前看到`extern`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:43:20.313

问题在于`class.h`包含`globals.h`. 你说如果你这样做，程序会编译但会引发访问冲突。然后逻辑上有错误，这是一个不同的问题。

首先修复编译器错误。访问冲突可能是因为您没有正确初始化全局 - 即您拥有它，它只是一个`NULL`指针。

# c# - Int32.Parse() 如何准确解析字符串？

> ID：14112091
> 
> 赞同：2
> 
> 时间：2013-01-01T16:29:51.190
> 
> 标签：c#, .net, parsing, int32

我是 C# 初学者。我知道这种语言的基本概念。在修改概念时，我偶然发现了一个问题 - Int32.Parse() 究竟是如何工作的？

现在我知道它的作用以及输出和过载。我需要的是完成此解析的确切方式。

我在 MSDN 网站上搜索。它给出了这个方法的一个非常笼统的定义（将数字的字符串表示形式转换为其等效的 32 位有符号整数。）所以我的问题是 - 它如何将字符串转换为 32 位有符号整数？

在阅读更多内容时，我发现了两件事 -

1.  使用“NumberStyles”枚举解释字符串参数
2.  使用“NumberFormatInfo”类对字符串参数进行格式化和解析

我需要这个概念背后的理论。另外，我不理解 NumberFormatInfo 类定义中的“文化特定信息”一词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T21:11:23.427

[这是相关代码](http://referencesource.microsoft.com/#mscorlib/system/int32.cs)，您可以在[MS-RSL](http://referencesource.microsoft.com/license.html)条款下查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:44:14.453

“文化特定信息”是指数字在不同文化中的书写方式。例如，在美国，您可以将 100 万写为：

```
1,000,000 
```

但其他文化使用逗号作为小数分隔符，因此您可能会看到

```
1'000'000 
```

或者：

```
1 000 000 
```

或者，当然（在任何文化中）：

```
1000000 
```

# windows-phone-7 - 在 WP7 上通过 Linq 2 SQL 存储拉丁字符

> ID：14112096
> 
> 赞同：3
> 
> 时间：2013-01-01T16:30:36.687
> 
> 标签：windows-phone-7, linq-to-sql, sql-server-ce

我在 WP7 中使用 SQL CE 数据库。我有一个带有 nvarchar 列的表。当我通过 linq 插入实体时，我看到符号 � 存储为拉丁字符。

**数据库连接字符串：** “Data Source=test.sdf;Locale Identifier=1035”

**预计存储：** Tuulisp ***ää*** t
**从 SSMS 中可以看出：** Tuulisp��t

我试图设置线程文化，但问题仍然存在。

当我从 SSMS 执行插入 SQL 语句时，它按预期插入。那么为什么在使用 Linq2SQL 插入时会出现问题？

有人可以阐明我错过了什么吗？任何解决方法或指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:30:58.240

您只需要将数据转换为 UTF8 编码。使用此类在 wp7 上进行转换。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class ISO88591Encoding : Encoding
{
    /// <summary>
    /// Gets the name registered with the
    /// Internet Assigned Numbers Authority (IANA) for the current encoding.
    /// </summary>
    /// <returns>
    /// The IANA name for the current <see cref="System.Text.Encoding"/>.
    /// </returns>
    public override string WebName
    {
        get
        {
            return "iso-8859-1";
        }
    }

    private char? fallbackCharacter;

    /// <summary>
    /// A character that can be set in order to make the encoding class
    /// more fault tolerant. If this property is set, the encoding class will
    /// use this property instead of throwing an exception if an unsupported
    /// byte value is being passed for decoding.
    /// </summary>
    public char? FallbackCharacter
    {
        get { return fallbackCharacter; }
        set
        {
            fallbackCharacter = value;

            if (value.HasValue && !charToByte.ContainsKey(value.Value))
            {
                string msg = "Cannot use the character [{0}] (int value {1}) as fallback value "
                + "- the fallback character itself is not supported by the encoding.";
                msg = String.Format(msg, value.Value, (int)value.Value);
                throw new EncoderFallbackException(msg);
            }

            FallbackByte = value.HasValue ? charToByte[value.Value] : (byte?)null;
        }
    }

    /// <summary>
    /// A byte value that corresponds to the <see cref="FallbackCharacter"/>.
    /// It is used in encoding scenarios in case an unsupported character is
    /// being passed for encoding.
    /// </summary>
    public byte? FallbackByte { get; private set; }

    public ISO88591Encoding()
    {
        FallbackCharacter = '?';
    }

    /// <summary>
    /// Encodes a set of characters from the specified character array into the specified byte array.
    /// </summary>
    /// <returns>
    /// The actual number of bytes written into <paramref name="bytes"/>.
    /// </returns>
    /// <param name="chars">The character array containing the set of characters to encode. 
    /// </param><param name="charIndex">The index of the first character to encode. 
    /// </param><param name="charCount">The number of characters to encode. 
    /// </param><param name="bytes">The byte array to contain the resulting sequence of bytes.
    /// </param><param name="byteIndex">The index at which to start writing the resulting sequence of bytes. 
    /// </param>
    public override int GetBytes(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        return FallbackByte.HasValue
                 ? GetBytesWithFallBack(chars, charIndex, charCount, bytes, byteIndex)
                 : GetBytesWithoutFallback(chars, charIndex, charCount, bytes, byteIndex);
    }

    private int GetBytesWithFallBack(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        for (int i = 0; i < charCount; i++)
        {
            var character = chars[i + charIndex];
            byte byteValue;
            bool status = charToByte.TryGetValue(character, out byteValue);

            bytes[byteIndex + i] = status ? byteValue : FallbackByte.Value;
        }

        return charCount;
    }

    private int GetBytesWithoutFallback(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        for (int i = 0; i < charCount; i++)
        {
            var character = chars[i + charIndex];
            byte byteValue;
            bool status = charToByte.TryGetValue(character, out byteValue);

            if (!status)
            {
                //throw exception
                string msg =
                  "The encoding [{0}] cannot encode the character [{1}] (int value {2}). Set the FallbackCharacter property in order to suppress this exception and encode a default character instead.";
                msg = String.Format(msg, WebName, character, (int)character);
                throw new EncoderFallbackException(msg);
            }

            bytes[byteIndex + i] = byteValue;
        }

        return charCount;
    }

    /// <summary>
    /// Decodes a sequence of bytes from the specified byte array into the specified character array.
    /// </summary>
    /// <returns>
    /// The actual number of characters written into <paramref name="chars"/>.
    /// </returns>
    /// <param name="bytes">The byte array containing the sequence of bytes to decode. 
    /// </param><param name="byteIndex">The index of the first byte to decode. 
    /// </param><param name="byteCount">The number of bytes to decode. 
    /// </param><param name="chars">The character array to contain the resulting set of characters. 
    /// </param><param name="charIndex">The index at which to start writing the resulting set of characters. 
    /// </param>
    public override int GetChars(byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex)
    {
        return FallbackCharacter.HasValue
                 ? GetCharsWithFallback(bytes, byteIndex, byteCount, chars, charIndex)
                 : GetCharsWithoutFallback(bytes, byteIndex, byteCount, chars, charIndex);
    }

    private int GetCharsWithFallback(byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex)
    {
        for (int i = 0; i < byteCount; i++)
        {
            byte lookupIndex = bytes[i + byteIndex];

            //if the byte value is not in our lookup array, fall back to default character
            char result = lookupIndex >= byteToChar.Length
                            ? FallbackCharacter.Value
                            : byteToChar[lookupIndex];

            chars[charIndex + i] = result;
        }

        return byteCount;
    }

    private int GetCharsWithoutFallback(byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex)
    {
        for (int i = 0; i < byteCount; i++)
        {
            byte lookupIndex = bytes[i + byteIndex];
            if (lookupIndex >= byteToChar.Length)
            {
                //throw exception
                string msg = "The encoding [{0}] cannot decode byte value [{1}]. Set the FallbackCharacter property in order to suppress this exception and decode the value as a default character instead.";
                msg = String.Format(msg, WebName, lookupIndex);
                throw new EncoderFallbackException(msg);
            }

            chars[charIndex + i] = byteToChar[lookupIndex];
        }

        return byteCount;
    }

    /// <summary>
    /// Calculates the number of bytes produced by encoding a set of characters
    /// from the specified character array.
    /// </summary>
    /// <returns>
    /// The number of bytes produced by encoding the specified characters. This class
    /// alwas returns the value of <paramref name="count"/>.
    /// </returns>
    public override int GetByteCount(char[] chars, int index, int count)
    {
        return count;
    }

    /// <summary>
    /// Calculates the number of characters produced by decoding a sequence
    /// of bytes from the specified byte array.
    /// </summary>
    /// <returns>
    /// The number of characters produced by decoding the specified sequence of bytes. This class
    /// alwas returns the value of <paramref name="count"/>. 
    /// </returns>
    public override int GetCharCount(byte[] bytes, int index, int count)
    {
        return count;
    }

    /// <summary>
    /// Calculates the maximum number of bytes produced by encoding the specified number of characters.
    /// </summary>
    /// <returns>
    /// The maximum number of bytes produced by encoding the specified number of characters. This
    /// class alwas returns the value of <paramref name="charCount"/>.
    /// </returns>
    /// <param name="charCount">The number of characters to encode. 
    /// </param>
    public override int GetMaxByteCount(int charCount)
    {
        return charCount;
    }

    /// <summary>
    /// Calculates the maximum number of characters produced by decoding the specified number of bytes.
    /// </summary>
    /// <returns>
    /// The maximum number of characters produced by decoding the specified number of bytes. This class
    /// alwas returns the value of <paramref name="byteCount"/>.
    /// </returns>
    /// <param name="byteCount">The number of bytes to decode.</param> 
    public override int GetMaxCharCount(int byteCount)
    {
        return byteCount;
    }

    /// <summary>
    /// Gets the number of characters that are supported by this encoding.
    /// This property returns a maximum value of 256, as the encoding class
    /// only supports single byte encodings (1 byte == 256 possible values).
    /// </summary>
    public static int CharacterCount
    {
        get { return byteToChar.Length; }
    }

    #region Character Table

    /// <summary>
    /// This table contains characters in an array. The index within the
    /// array corresponds to the encoding's mapping of bytes to characters
    /// (e.g. if a byte value of 5 is used to encode the character 'x', this
    /// character will be stored at the array index 5.
    /// </summary>
    private static char[] byteToChar = new char[]
{
  (char)0 /* byte 0 */  ,
  (char)1 /* byte 1 */  ,
  (char)2 /* byte 2 */  ,
  (char)3 /* byte 3 */  ,
  (char)4 /* byte 4 */  ,
  (char)5 /* byte 5 */  ,
  (char)6 /* byte 6 */  ,
  (char)7 /* byte 7 */  ,
  (char)8 /* byte 8 */  ,
  (char)9 /* byte 9 */  ,
  (char)10 /* byte 10 */  ,
  (char)11 /* byte 11 */  ,
  (char)12 /* byte 12 */  ,
  (char)13 /* byte 13 */  ,
  (char)14 /* byte 14 */  ,
  (char)15 /* byte 15 */  ,
  (char)16 /* byte 16 */  ,
  (char)17 /* byte 17 */  ,
  (char)18 /* byte 18 */  ,
  (char)19 /* byte 19 */  ,
  (char)20 /* byte 20 */  ,
  (char)21 /* byte 21 */  ,
  (char)22 /* byte 22 */  ,
  (char)23 /* byte 23 */  ,
  (char)24 /* byte 24 */  ,
  (char)25 /* byte 25 */  ,
  (char)26 /* byte 26 */  ,
  (char)27 /* byte 27 */  ,
  (char)28 /* byte 28 */  ,
  (char)29 /* byte 29 */  ,
  (char)30 /* byte 30 */  ,
  (char)31 /* byte 31 */  ,
  (char)32 /* byte 32 */  ,
  (char)33 /* byte 33 */  ,
  (char)34 /* byte 34 */  ,
  (char)35 /* byte 35 */  ,
  (char)36 /* byte 36 */  ,
  (char)37 /* byte 37 */  ,
  (char)38 /* byte 38 */  ,
  (char)39 /* byte 39 */  ,
  (char)40 /* byte 40 */  ,
  (char)41 /* byte 41 */  ,
  (char)42 /* byte 42 */  ,
  (char)43 /* byte 43 */  ,
  (char)44 /* byte 44 */  ,
  (char)45 /* byte 45 */  ,
  (char)46 /* byte 46 */  ,
  (char)47 /* byte 47 */  ,
  (char)48 /* byte 48 */  ,
  (char)49 /* byte 49 */  ,
  (char)50 /* byte 50 */  ,
  (char)51 /* byte 51 */  ,
  (char)52 /* byte 52 */  ,
  (char)53 /* byte 53 */  ,
  (char)54 /* byte 54 */  ,
  (char)55 /* byte 55 */  ,
  (char)56 /* byte 56 */  ,
  (char)57 /* byte 57 */  ,
  (char)58 /* byte 58 */  ,
  (char)59 /* byte 59 */  ,
  (char)60 /* byte 60 */  ,
  (char)61 /* byte 61 */  ,
  (char)62 /* byte 62 */  ,
  (char)63 /* byte 63 */  ,
  (char)64 /* byte 64 */  ,
  (char)65 /* byte 65 */  ,
  (char)66 /* byte 66 */  ,
  (char)67 /* byte 67 */  ,
  (char)68 /* byte 68 */  ,
  (char)69 /* byte 69 */  ,
  (char)70 /* byte 70 */  ,
  (char)71 /* byte 71 */  ,
  (char)72 /* byte 72 */  ,
  (char)73 /* byte 73 */  ,
  (char)74 /* byte 74 */  ,
  (char)75 /* byte 75 */  ,
  (char)76 /* byte 76 */  ,
  (char)77 /* byte 77 */  ,
  (char)78 /* byte 78 */  ,
  (char)79 /* byte 79 */  ,
  (char)80 /* byte 80 */  ,
  (char)81 /* byte 81 */  ,
  (char)82 /* byte 82 */  ,
  (char)83 /* byte 83 */  ,
  (char)84 /* byte 84 */  ,
  (char)85 /* byte 85 */  ,
  (char)86 /* byte 86 */  ,
  (char)87 /* byte 87 */  ,
  (char)88 /* byte 88 */  ,
  (char)89 /* byte 89 */  ,
  (char)90 /* byte 90 */  ,
  (char)91 /* byte 91 */  ,
  (char)92 /* byte 92 */  ,
  (char)93 /* byte 93 */  ,
  (char)94 /* byte 94 */  ,
  (char)95 /* byte 95 */  ,
  (char)96 /* byte 96 */  ,
  (char)97 /* byte 97 */  ,
  (char)98 /* byte 98 */  ,
  (char)99 /* byte 99 */  ,
  (char)100 /* byte 100 */  ,
  (char)101 /* byte 101 */  ,
  (char)102 /* byte 102 */  ,
  (char)103 /* byte 103 */  ,
  (char)104 /* byte 104 */  ,
  (char)105 /* byte 105 */  ,
  (char)106 /* byte 106 */  ,
  (char)107 /* byte 107 */  ,
  (char)108 /* byte 108 */  ,
  (char)109 /* byte 109 */  ,
  (char)110 /* byte 110 */  ,
  (char)111 /* byte 111 */  ,
  (char)112 /* byte 112 */  ,
  (char)113 /* byte 113 */  ,
  (char)114 /* byte 114 */  ,
  (char)115 /* byte 115 */  ,
  (char)116 /* byte 116 */  ,
  (char)117 /* byte 117 */  ,
  (char)118 /* byte 118 */  ,
  (char)119 /* byte 119 */  ,
  (char)120 /* byte 120 */  ,
  (char)121 /* byte 121 */  ,
  (char)122 /* byte 122 */  ,
  (char)123 /* byte 123 */  ,
  (char)124 /* byte 124 */  ,
  (char)125 /* byte 125 */  ,
  (char)126 /* byte 126 */  ,
  (char)127 /* byte 127 */  ,
  (char)128 /* byte 128 */  ,
  (char)129 /* byte 129 */  ,
  (char)130 /* byte 130 */  ,
  (char)131 /* byte 131 */  ,
  (char)132 /* byte 132 */  ,
  (char)133 /* byte 133 */  ,
  (char)134 /* byte 134 */  ,
  (char)135 /* byte 135 */  ,
  (char)136 /* byte 136 */  ,
  (char)137 /* byte 137 */  ,
  (char)138 /* byte 138 */  ,
  (char)139 /* byte 139 */  ,
  (char)140 /* byte 140 */  ,
  (char)141 /* byte 141 */  ,
  (char)142 /* byte 142 */  ,
  (char)143 /* byte 143 */  ,
  (char)144 /* byte 144 */  ,
  (char)145 /* byte 145 */  ,
  (char)146 /* byte 146 */  ,
  (char)147 /* byte 147 */  ,
  (char)148 /* byte 148 */  ,
  (char)149 /* byte 149 */  ,
  (char)150 /* byte 150 */  ,
  (char)151 /* byte 151 */  ,
  (char)152 /* byte 152 */  ,
  (char)153 /* byte 153 */  ,
  (char)154 /* byte 154 */  ,
  (char)155 /* byte 155 */  ,
  (char)156 /* byte 156 */  ,
  (char)157 /* byte 157 */  ,
  (char)158 /* byte 158 */  ,
  (char)159 /* byte 159 */  ,
  (char)160 /* byte 160 */  ,
  (char)161 /* byte 161 */  ,
  (char)162 /* byte 162 */  ,
  (char)163 /* byte 163 */  ,
  (char)164 /* byte 164 */  ,
  (char)165 /* byte 165 */  ,
  (char)166 /* byte 166 */  ,
  (char)167 /* byte 167 */  ,
  (char)168 /* byte 168 */  ,
  (char)169 /* byte 169 */  ,
  (char)170 /* byte 170 */  ,
  (char)171 /* byte 171 */  ,
  (char)172 /* byte 172 */  ,
  (char)173 /* byte 173 */  ,
  (char)174 /* byte 174 */  ,
  (char)175 /* byte 175 */  ,
  (char)176 /* byte 176 */  ,
  (char)177 /* byte 177 */  ,
  (char)178 /* byte 178 */  ,
  (char)179 /* byte 179 */  ,
  (char)180 /* byte 180 */  ,
  (char)181 /* byte 181 */  ,
  (char)182 /* byte 182 */  ,
  (char)183 /* byte 183 */  ,
  (char)184 /* byte 184 */  ,
  (char)185 /* byte 185 */  ,
  (char)186 /* byte 186 */  ,
  (char)187 /* byte 187 */  ,
  (char)188 /* byte 188 */  ,
  (char)189 /* byte 189 */  ,
  (char)190 /* byte 190 */  ,
  (char)191 /* byte 191 */  ,
  (char)192 /* byte 192 */  ,
  (char)193 /* byte 193 */  ,
  (char)194 /* byte 194 */  ,
  (char)195 /* byte 195 */  ,
  (char)196 /* byte 196 */  ,
  (char)197 /* byte 197 */  ,
  (char)198 /* byte 198 */  ,
  (char)199 /* byte 199 */  ,
  (char)200 /* byte 200 */  ,
  (char)201 /* byte 201 */  ,
  (char)202 /* byte 202 */  ,
  (char)203 /* byte 203 */  ,
  (char)204 /* byte 204 */  ,
  (char)205 /* byte 205 */  ,
  (char)206 /* byte 206 */  ,
  (char)207 /* byte 207 */  ,
  (char)208 /* byte 208 */  ,
  (char)209 /* byte 209 */  ,
  (char)210 /* byte 210 */  ,
  (char)211 /* byte 211 */  ,
  (char)212 /* byte 212 */  ,
  (char)213 /* byte 213 */  ,
  (char)214 /* byte 214 */  ,
  (char)215 /* byte 215 */  ,
  (char)216 /* byte 216 */  ,
  (char)217 /* byte 217 */  ,
  (char)218 /* byte 218 */  ,
  (char)219 /* byte 219 */  ,
  (char)220 /* byte 220 */  ,
  (char)221 /* byte 221 */  ,
  (char)222 /* byte 222 */  ,
  (char)223 /* byte 223 */  ,
  (char)224 /* byte 224 */  ,
  (char)225 /* byte 225 */  ,
  (char)226 /* byte 226 */  ,
  (char)227 /* byte 227 */  ,
  (char)228 /* byte 228 */  ,
  (char)229 /* byte 229 */  ,
  (char)230 /* byte 230 */  ,
  (char)231 /* byte 231 */  ,
  (char)232 /* byte 232 */  ,
  (char)233 /* byte 233 */  ,
  (char)234 /* byte 234 */  ,
  (char)235 /* byte 235 */  ,
  (char)236 /* byte 236 */  ,
  (char)237 /* byte 237 */  ,
  (char)238 /* byte 238 */  ,
  (char)239 /* byte 239 */  ,
  (char)240 /* byte 240 */  ,
  (char)241 /* byte 241 */  ,
  (char)242 /* byte 242 */  ,
  (char)243 /* byte 243 */  ,
  (char)244 /* byte 244 */  ,
  (char)245 /* byte 245 */  ,
  (char)246 /* byte 246 */  ,
  (char)247 /* byte 247 */  ,
  (char)248 /* byte 248 */  ,
  (char)249 /* byte 249 */  ,
  (char)250 /* byte 250 */  ,
  (char)251 /* byte 251 */  ,
  (char)252 /* byte 252 */  ,
  (char)253 /* byte 253 */  ,
  (char)254 /* byte 254 */  ,
  (char)255 /* byte 255 */  
};

    #endregion

    #region Byte Lookup Dictionary

    /// <summary>
    /// This dictionary is used to resolve byte values for a given character.
    /// </summary>
    private static Dictionary<char, byte> charToByte = new Dictionary<char, byte>
{
  { (char)0, 0 },
  { (char)1, 1 },
  { (char)2, 2 },
  { (char)3, 3 },
  { (char)4, 4 },
  { (char)5, 5 },
  { (char)6, 6 },
  { (char)7, 7 },
  { (char)8, 8 },
  { (char)9, 9 },
  { (char)10, 10 },
  { (char)11, 11 },
  { (char)12, 12 },
  { (char)13, 13 },
  { (char)14, 14 },
  { (char)15, 15 },
  { (char)16, 16 },
  { (char)17, 17 },
  { (char)18, 18 },
  { (char)19, 19 },
  { (char)20, 20 },
  { (char)21, 21 },
  { (char)22, 22 },
  { (char)23, 23 },
  { (char)24, 24 },
  { (char)25, 25 },
  { (char)26, 26 },
  { (char)27, 27 },
  { (char)28, 28 },
  { (char)29, 29 },
  { (char)30, 30 },
  { (char)31, 31 },
  { (char)32, 32 },
  { (char)33, 33 },
  { (char)34, 34 },
  { (char)35, 35 },
  { (char)36, 36 },
  { (char)37, 37 },
  { (char)38, 38 },
  { (char)39, 39 },
  { (char)40, 40 },
  { (char)41, 41 },
  { (char)42, 42 },
  { (char)43, 43 },
  { (char)44, 44 },
  { (char)45, 45 },
  { (char)46, 46 },
  { (char)47, 47 },
  { (char)48, 48 },
  { (char)49, 49 },
  { (char)50, 50 },
  { (char)51, 51 },
  { (char)52, 52 },
  { (char)53, 53 },
  { (char)54, 54 },
  { (char)55, 55 },
  { (char)56, 56 },
  { (char)57, 57 },
  { (char)58, 58 },
  { (char)59, 59 },
  { (char)60, 60 },
  { (char)61, 61 },
  { (char)62, 62 },
  { (char)63, 63 },
  { (char)64, 64 },
  { (char)65, 65 },
  { (char)66, 66 },
  { (char)67, 67 },
  { (char)68, 68 },
  { (char)69, 69 },
  { (char)70, 70 },
  { (char)71, 71 },
  { (char)72, 72 },
  { (char)73, 73 },
  { (char)74, 74 },
  { (char)75, 75 },
  { (char)76, 76 },
  { (char)77, 77 },
  { (char)78, 78 },
  { (char)79, 79 },
  { (char)80, 80 },
  { (char)81, 81 },
  { (char)82, 82 },
  { (char)83, 83 },
  { (char)84, 84 },
  { (char)85, 85 },
  { (char)86, 86 },
  { (char)87, 87 },
  { (char)88, 88 },
  { (char)89, 89 },
  { (char)90, 90 },
  { (char)91, 91 },
  { (char)92, 92 },
  { (char)93, 93 },
  { (char)94, 94 },
  { (char)95, 95 },
  { (char)96, 96 },
  { (char)97, 97 },
  { (char)98, 98 },
  { (char)99, 99 },
  { (char)100, 100 },
  { (char)101, 101 },
  { (char)102, 102 },
  { (char)103, 103 },
  { (char)104, 104 },
  { (char)105, 105 },
  { (char)106, 106 },
  { (char)107, 107 },
  { (char)108, 108 },
  { (char)109, 109 },
  { (char)110, 110 },
  { (char)111, 111 },
  { (char)112, 112 },
  { (char)113, 113 },
  { (char)114, 114 },
  { (char)115, 115 },
  { (char)116, 116 },
  { (char)117, 117 },
  { (char)118, 118 },
  { (char)119, 119 },
  { (char)120, 120 },
  { (char)121, 121 },
  { (char)122, 122 },
  { (char)123, 123 },
  { (char)124, 124 },
  { (char)125, 125 },
  { (char)126, 126 },
  { (char)127, 127 },
  { (char)128, 128 },
  { (char)129, 129 },
  { (char)130, 130 },
  { (char)131, 131 },
  { (char)132, 132 },
  { (char)133, 133 },
  { (char)134, 134 },
  { (char)135, 135 },
  { (char)136, 136 },
  { (char)137, 137 },
  { (char)138, 138 },
  { (char)139, 139 },
  { (char)140, 140 },
  { (char)141, 141 },
  { (char)142, 142 },
  { (char)143, 143 },
  { (char)144, 144 },
  { (char)145, 145 },
  { (char)146, 146 },
  { (char)147, 147 },
  { (char)148, 148 },
  { (char)149, 149 },
  { (char)150, 150 },
  { (char)151, 151 },
  { (char)152, 152 },
  { (char)153, 153 },
  { (char)154, 154 },
  { (char)155, 155 },
  { (char)156, 156 },
  { (char)157, 157 },
  { (char)158, 158 },
  { (char)159, 159 },
  { (char)160, 160 },
  { (char)161, 161 },
  { (char)162, 162 },
  { (char)163, 163 },
  { (char)164, 164 },
  { (char)165, 165 },
  { (char)166, 166 },
  { (char)167, 167 },
  { (char)168, 168 },
  { (char)169, 169 },
  { (char)170, 170 },
  { (char)171, 171 },
  { (char)172, 172 },
  { (char)173, 173 },
  { (char)174, 174 },
  { (char)175, 175 },
  { (char)176, 176 },
  { (char)177, 177 },
  { (char)178, 178 },
  { (char)179, 179 },
  { (char)180, 180 },
  { (char)181, 181 },
  { (char)182, 182 },
  { (char)183, 183 },
  { (char)184, 184 },
  { (char)185, 185 },
  { (char)186, 186 },
  { (char)187, 187 },
  { (char)188, 188 },
  { (char)189, 189 },
  { (char)190, 190 },
  { (char)191, 191 },
  { (char)192, 192 },
  { (char)193, 193 },
  { (char)194, 194 },
  { (char)195, 195 },
  { (char)196, 196 },
  { (char)197, 197 },
  { (char)198, 198 },
  { (char)199, 199 },
  { (char)200, 200 },
  { (char)201, 201 },
  { (char)202, 202 },
  { (char)203, 203 },
  { (char)204, 204 },
  { (char)205, 205 },
  { (char)206, 206 },
  { (char)207, 207 },
  { (char)208, 208 },
  { (char)209, 209 },
  { (char)210, 210 },
  { (char)211, 211 },
  { (char)212, 212 },
  { (char)213, 213 },
  { (char)214, 214 },
  { (char)215, 215 },
  { (char)216, 216 },
  { (char)217, 217 },
  { (char)218, 218 },
  { (char)219, 219 },
  { (char)220, 220 },
  { (char)221, 221 },
  { (char)222, 222 },
  { (char)223, 223 },
  { (char)224, 224 },
  { (char)225, 225 },
  { (char)226, 226 },
  { (char)227, 227 },
  { (char)228, 228 },
  { (char)229, 229 },
  { (char)230, 230 },
  { (char)231, 231 },
  { (char)232, 232 },
  { (char)233, 233 },
  { (char)234, 234 },
  { (char)235, 235 },
  { (char)236, 236 },
  { (char)237, 237 },
  { (char)238, 238 },
  { (char)239, 239 },
  { (char)240, 240 },
  { (char)241, 241 },
  { (char)242, 242 },
  { (char)243, 243 },
  { (char)244, 244 },
  { (char)245, 245 },
  { (char)246, 246 },
  { (char)247, 247 },
  { (char)248, 248 },
  { (char)249, 249 },
  { (char)250, 250 },
  { (char)251, 251 },
  { (char)252, 252 },
  { (char)253, 253 },
  { (char)254, 254 },
  { (char)255, 255 }
};

    #endregion
} 
```

# database - 在线存储用户图片并检索

> ID：14112097
> 
> 赞同：1
> 
> 时间：2013-01-01T16:30:45.843
> 
> 标签：database, image, file-upload

作为我的应用程序注册过程的一部分，用户可以选择个人资料图片。我的第一个想法是将图片存储在我的数据库中，但我读到这不是一个好主意。我认为另一种解决方案是将图像上传到文件系统并将路径存储在数据库中。这是执行此操作的正确方法吗？是否可以保存在我的系统中存储未知文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:33:53.590

您必须**始终**使用上传功能检查您接受哪些文件。
至于图片[检查这篇文章](https://stackoverflow.com/questions/6484307/how-to-check-if-an-uploaded-file-is-an-image-without-mime-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:47:28.127

`database`当有一些相关数据时，最好存储图片。

将图片存储在`filesystem`其中可能会导致您自己处理的并发和其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:19:34.923

将图像和其他二进制资产存储在数据库中可能会很痛苦 - 您无法从 SQL 命令行轻松查看它们，对图像进行编码和解码的过程可能是一个性能问题，并且您可以执行的数据库操作相对较少在二进制blob上做。

但是，也有许多好处 - 图像与数据库的其余部分一起备份，并且在负载平衡的服务器场中，您不必担心跨多个 Web 服务器文件系统复制图像。

为了两全其美，我建议将图像存储在数据库中，但将它们缓存在 Web 服务器的文件系统中。这样，如果您向服务器场添加更多服务器，缓存将在请求映像时建立。通过缓存图像，您无需为每个请求支付“解码”性能损失。

您永远不应该相信您的用户所做的任何事情 - 您至少应该限制用户可以上传到图像的文件类型（.png、.jpg 等）。如果您正在运行一个大型的公共网站，请考虑通过病毒扫描程序运行上传的文件——据我所知，目前图像文件类型中没有任何漏洞，但几年前有[一些](https://security.stackexchange.com/questions/600/what-is-the-corrupted-image-vulnerability-how-does-it-work)漏洞，他们可能会回来。

# android - 从我的 android 应用程序上的服务器下载视频或音频文件

> ID：14112105
> 
> 赞同：0
> 
> 时间：2013-01-01T16:31:42.547
> 
> 标签：android

我正在开发一个 android 应用程序来使用链接从我的服务器下载视频文件。我正在使用对浏览器的意图调用来做到这一点。
使用任何浏览器打开链接会打开文件并开始播放。但我想做的是开始将视频下载到 SD 卡。
视频格式是 .mp4
，我调用在我的应用程序中打开链接的方式是这样的：

```
Intent browserIntent=new Intent(Intent.ACTION_VIEW,Uri.parse(myUrl));
startActivity(browserIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-02T14:28:50.120

伟大的！无论如何，您找到了最佳答案，我使用以下代码从服务器下载视频。你可以参考。谢谢。

```
class DownloadFileFromURL extends AsyncTask<Object, String, Integer> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

        }

        @Override
        protected void onCancelled() {
            super.onCancelled();

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected Integer doInBackground(Object... params) {

            try {

                URL url = new URL((String) params[1]);

                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                // Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                File download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                }
                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
            return 0;

        }

        protected void onPostExecute(String file_url) {

         // Do after downloaded file

        }

    } 
```

# php - PHP money_format() -- 没有逗号分隔符？

> ID：14112111
> 
> 赞同：2
> 
> 时间：2013-01-01T16:32:49.677
> 
> 标签：php

> **可能重复：**
> [PHP money_format](https://stackoverflow.com/questions/4158517/php-money-format)

为什么会这样：

```
setlocale(LC_MONETARY, 'en_US');
echo money_format('%i', 1234.56); 
```

输出我给它的值（1234.56）？我正在使用带有基本 LAMP 安装的 Linux。

预期输出为“1,234.56”

编辑： `locale -a`返回以下列表：

```
C
C.UTF-8
en_AG
en_AG.utf8
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_IN.utf8
en_NG
en_NG.utf8
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZM
en_ZM.utf8
en_ZW.utf8
POSIX
zh_CN.utf8
zh_SG.utf8 
```

这很烦人。en_US.utf8 工作得很好！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T16:46:36.240

我猜有人认为将其命名`en_US.utf8`而不是`en_US`.

那些混蛋！

# eclipse - Eclipse Egit 不会在工作区中导入 repo

> ID：14112112
> 
> 赞同：2
> 
> 时间：2013-01-01T16:32:55.557
> 
> 标签：eclipse, git, egit

我正在尝试将现有的 git 存储库作为 eclipse 项目导入。存储库存储在 ~/src/repo_dir 位置，而 ~/src/ 是我的 eclipse 工作区目录。

如果我使用菜单操作的顺序：

```
File --> Import --> Git --> Projects from Git --> Local --> (Select my repo) 
--> "Import as General Project" 
```

我得到错误：

```
/Users/me/src/repo_dir overlaps the location of another project: 'repo_dir' 
```

而且我无法导入该项目。这似乎是因为 Egit 不希望正在导入的原始存储库已经在工作区中。但是，如果我将repo_dir移出工作区目录〜/ src /，然后通过上述方法导入项目，它不会将内容复制到工作区目录，所以现在我的文件位于其他地方，即不可取。我发现的唯一解决方法是将 repo 从 ~/src 中移出，导入它，删除生成的项目，将 repo 移回 ~/src，然后使用 git 将其作为“现有项目”导入。有谁知道更清洁的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T18:39:20.613

这里有两个不同的问题：

1.  Git 将您计算机中选定的文件夹作为存储库处理 - 并在其中存储一些与 git 相关的元数据。
2.  Eclipse 将您计算机中的选定文件夹作为您的工作区处理。它存储 Eclipse 配置文件（不打算共享），更糟糕的是，它需要项目的单级文件夹层次结构。

这意味着，将 Git 存储库放在工作区中可能会导致很多不必要的问题 - 所以我不推荐这种方式（即使通过一些 hack 它是可行的）。但是，如果您想组织与 Eclipse 工作区相关的所有内容，您可以创建一个文件夹结构，如下所示：

*   日食的东西
    *   工作区
    *   混帐
        *   git-repo1
        *   git-repo2

*工作区*文件夹作为工作区文件夹提供给 Eclipse，而*git-repo1*和*git-repo2*是您的 Git 存储库。

另一方面，我喜欢将我所有的 git 存储库放在一个公共文件夹中，而不管我在哪个 Eclipse 工作区中使用它们，但是如果你想组织内容，这对你来说可能还不够。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T19:41:56.757

Eclipse Kepler 有这个问题。

最后安装 Eclipse Mars 并将新项目导入另一个工作区。（Luna 也可以正常工作）

如果您需要处理当前项目并为即将到来的项目设置环境......

# cordova - 我试图让“config.xml”在我的 Phonegap 应用程序中工作，但得到“格式错误的 config.xml”

> ID：14112115
> 
> 赞同：0
> 
> 时间：2013-01-01T16:33:19.130
> 
> 标签：cordova, navigation, malformed

在我尝试放入 rim:navigation 之前，它正在工作，

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.example"
    version   = "1.0.0">

<name>---</name>
<preference name="disable-cursor" value="true" />
 <rim:navigation mode="focus"/>
 <feature id="blackberry.ui.dialog"/>

<icon src="icon.png" width="100px" height="100px" />
<gap:splash src="splash.png" />
<gap:splash src="splash.png" gap:platform="blackberry" />
<description>
A simple PhoneGap Build application.
</description>

<author href="https://example.com" email="you@example.com">
S---- Y----
</author>
</widget> 
```

注意：破折号是隐藏个人信息如果有人知道哪里错了请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:50:18.003

您在 xml 中没有为 rim 定义命名空间，这就是您收到格式错误的 XML 错误的原因。

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    xmlns:rim = "http://????"
    id        = "com.phonegap.example"
    version   = "1.0.0"> 
```

我不知道应该针对哪个 URL 定义 rim 命名空间，但我猜它会在 phonegap 文档中提到。

# html - 如何在 html 文件中的 onload 过程中运行 soundcloud 文件

> ID：14112117
> 
> 赞同：0
> 
> 时间：2013-01-01T16:33:36.693
> 
> 标签：html, soundcloud

我想替换网站上的现有迷你播放器，该迷你播放器在通过加载 JavaScript 打开页面后开始播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:19:30.857

soundcloud 自定义播放器小部件有一个自动播放选项，看起来很适合您的需求。

[http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)

# r - 将 if b=0 用于 R 中具有不同长度的向量

> ID：14112119
> 
> 赞同：0
> 
> 时间：2013-01-01T16:34:06.767
> 
> 标签：r

我有一个长度不同的变量 b。

例如。有可能

```
b=0 or b=c(1,4,5) 
```

我有一个 if 条件说明如果

```
b=0 then it should do something. 
```

每当 b 不为 0 或长度大于 1 时，我都会收到警告：

```
the condition has length > 1 and only the first element will be used 
```

基本上我想要的是：如果 b=0 则做某事，否则做其他事情，而不管向量的长度如何。

我应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:12:04.647

有一个替代解决方案使用相同，任何和所有。

根据您的描述，我会推断出三种情况，不确定您实际需要哪一种：

1.  仅当 时才做某事`b==0`。如果`b!=0`或如果`length(b)>1`那么不要这样做。 `TRUE`只为`b <- 0`

    ```
    if (isTRUE(identical(b, 0))) {
      # do something
    } 
    ```

2.  `b==0`如果b 的所有元素都为 0 ，则做某事。 `TRUE`for `b <- 0`and `b <- c(0, 0)`and `b <- c(0, 0, 0)`and ...

    ```
    if (all(b==0)) {
      # do something
    } 
    ```

3.  `b==0`如果b 的任何元素为 0 ，则做某事。 `TRUE`for `b <- 0`and `b <- c(12, 0, 34, 2, 3)`and `b <- c(0, 0, 3, 2)`and ...

    ```
    if (any(b==0)) {
      # do something
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:37:30.767

尝试`%in%`如下：

```
foo <- function(b) {
  if(0 %in% b) {
    ## do something
    writeLines("Zero was in `b`")
  }
}

> b <- 0
> foo(b)
Zero was in `b`
> b <- c(1,4,5)
> foo(b)
> b <- c(b, 0)
> foo(b)
Zero was in `b` 
```

这里的重点是检查你感兴趣的东西（这里`0`）是否包含在通过 vector 提供的项目集中`b`。

对于“做其他事情”的情况，您需要`foo()`使用`else`子句进行扩展：

```
foo <- function(b) {
  if(0 %in% b) {
    ## do something
    writeLines("Zero was in `b`")
  } else {
    ## do something else
    writeLines("Zero was not in `b`")
  }
}

> b <- 0
> foo(b)
Zero was in `b`
> b <- c(1,4,5)
> foo(b)
Zero was not in `b`
> b <- c(b, 0)
> foo(b)
Zero was in `b` 
```

# linux - 我可以从 Linux cut 命令更改输出字段的顺序吗？

> ID：14112120
> 
> 赞同：9
> 
> 时间：2013-01-01T16:34:07.320
> 
> 标签：linux, bash, shell, awk, cut

我在命令行中使用 cut 命令，似乎无法获得我喜欢的输出。你知道我为什么会得到这个吗？是我做错了什么吗？

这是正常输出，我想以不同的顺序输出：

```
[root@upbvm500 root]# ls -al IDS_DIR/a | tr -s " "
-rw-r--r-- 1 root root 0 Jan 1 17:18 IDS_DIR/a
[root@upbvm500 root]#

[root@upbvm500 root]# ls -al IDS_DIR/a | tr -s " " | cut -d" " -f5,6,7,8,3,4,1
-rw-r--r-- root root 0 Jan 1 17:18 
```

但正如您所看到的，这并没有像预期的那样工作。知道他们为什么要换地方吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-01T16:56:27.987

来自`man cut`：

> 所选输入的写入顺序与读取顺序相同，并且只写入一次。

使用`awk '{print $5,$6,$7,$8,$3,$4,$1}'`而不是`cut`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T16:42:44.277

`cut`不会重新排序其输出。它只是收集要打印的列的列表，然后在它们到达时将它们打印出来。

使用不同的工具（例如 Awk）对输出列重新排序。

但是，在这种特殊情况下，请尝试使用`stat`or`find`代替`ls`。通常不建议尝试从`ls`. 见[http://mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-01T20:26:02.557

正如其他人所提到的，不要解析 ls。如果您想要文件信息，请使用[`stat`](http://man.cx/stat)

```
stat -c "%s %y %U %G %A %n" filename 
```

您可能需要做一些额外的工作才能根据需要格式化时间戳。

```
$ ls -l data
-rw-r--r-- 1 glennj glennj 13 2013-01-01 11:19 data
$ LC_TIME=POSIX ls -l data
-rw-r--r-- 1 glennj glennj 13 Jan  1 11:19 data

$ stat -c "%s %y %U %G %A %n" data 
13 2013-01-01 11:19:53.670015242 -0500 glennj glennj -rw-r--r-- data
$ stat -c "%s %Y %U %G %A %n" data | awk '{$2 = strftime("%b %e %H:%M", $2)} 1'
13 Jan  1 11:19 glennj glennj -rw-r--r-- data 
```

# javascript - Javascript ajax post，如何获取变量？

> ID：14112125
> 
> 赞同：-1
> 
> 时间：2013-01-01T16:34:41.267
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何访问 Ajax 调用中的变量集](https://stackoverflow.com/questions/5820902/how-to-access-a-variable-set-within-an-ajax-call)

我有点挣扎，我有一个 ajax 帖子，我从电话中得到一个号码。我的问题是，如何将结果编号转换为可以在`$.post`调用之外看到的变量？

例如：

```
 //code here

    $.post('../utility/width.php', { adress:adr } , 
            function(width) {
            //this width result, I want it to be used
            });
         // here
         //code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:37:46.143

AJAX 是异步的。您必须使用在 AJAX 请求完成时调用的回调函数：

```
$.post('../utility/width.php',
    {adress:adr},
    function(width) {
        alert(width);
    }
}); 
```

另一种方法是使请求同步，但这可能不是您想要的。

# c# - 将 DataTable 作为参数发送到存储过程

> ID：14112128
> 
> 赞同：4
> 
> 时间：2013-01-01T16:35:14.127
> 
> 标签：c#, stored-procedures, .net-2.0, sql-server-2012-express

我正在尝试使用 c#、.net 2.0 和 SQLServer 2012 Express 将 DataTable 发送到存储过程。

这大致就是我正在做的事情：

```
 //define the DataTable
        var accountIdTable = new DataTable("[dbo].[TypeAccountIdTable]");

        //define the column
        var dataColumn = new DataColumn {ColumnName = "[ID]", DataType = typeof (Guid)};

        //add column to dataTable
        accountIdTable.Columns.Add(dataColumn);

        //feed it with the unique contact ids
        foreach (var uniqueId in uniqueIds)
        {
            accountIdTable.Rows.Add(uniqueId);
        }

        using (var sqlCmd = new SqlCommand())
        {
            //define command details
            sqlCmd.CommandType = CommandType.StoredProcedure;
            sqlCmd.CommandText = "[dbo].[msp_Get_Many_Profiles]";
            sqlCmd.Connection = dbConn; //an open database connection

            //define parameter
            var sqlParam = new SqlParameter();
            sqlParam.ParameterName = "@tvp_account_id_list";
            sqlParam.SqlDbType = SqlDbType.Structured;
            sqlParam.Value = accountIdTable;

            //add parameter to command
            sqlCmd.Parameters.Add(sqlParam);

            //execute procedure
            rResult = sqlCmd.ExecuteReader();

            //print results
            while (rResult.Read())
            {
                PrintRowData(rResult);
            }
        } 
```

但后来我收到以下错误：

```
ArgumentOutOfRangeException: No mapping exists from SqlDbType Structured to a known DbType.
Parameter name: SqlDbType 
```

`SqlParameter.TypeName`经过进一步调查（在 MSDN、SO 和其他地方），似乎 .net 2.0不支持将 DataTable 发送到数据库（缺少诸如声称此功能在 .net 2.0 中不可用

这是真的？

如果是这样，是否有另一种方法可以将数据集合发送到数据库？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:44:28.257

开箱即用，ADO.NET 没有充分的理由支持这一点。DataTable 可以包含任意数量的列，这些列可能会映射到数据库中的真实表，也可能不会。

如果我了解您想要做什么 - 将 DataTable 的内容快速上传到具有相同结构的预定义真实表中，我建议您调查[SQLBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)。

从文档中：

> Microsoft SQL Server 包括一个名为 bcp 的流行命令提示实用程序，用于将数据从一个表移动到另一个表，无论是在单个服务器上还是在服务器之间。SqlBulkCopy 类允许您编写提供类似功能的托管代码解决方案。还有其他方法可以将数据加载到 SQL Server 表中（例如 INSERT 语句），但 SqlBulkCopy 提供了比它们显着的性能优势。
> 
> SqlBulkCopy 类可用于仅将数据写入 SQL Server 表。但是，数据源不限于 SQL Server；可以使用任何数据源，只要数据可以加载到 DataTable 实例或使用 IDataReader 实例读取。
> 
> 将 SqlDateTime 类型的 DataTable 列大容量加载到类型是 SQL Server 2008 中添加的日期/时间类型之一的 SQL Server 列时，SqlBulkCopy 将失败。

但是，您可以在更高版本的 SQL Server 中定义表值参数，并使用它以您要求的方法发送表（DateTable）。[在http://sqlwithmanoj.wordpress.com/2012/09/10/passing-multipledynamic-values-to-stored-procedures-functions-part4-by-using-tvp/](http://sqlwithmanoj.wordpress.com/2012/09/10/passing-multipledynamic-values-to-stored-procedures-functions-part4-by-using-tvp/)有一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T18:06:05.727

根据我的经验，如果您能够在 C# 中编译代码，则意味着 ADO.Net 支持该类型。但是如果在执行代码时它失败了，那么目标数据库可能不支持它。在您的情况下，您提到了 [Sql Server 2012 Express]，因此它可能不支持它。根据我的理解，[Sql Server 2005] 支持表类型，但您必须将数据库兼容模式保持在大于 99 或其他值。我 100% 肯定它会在 2008 年工作，因为我已经使用它并广泛使用它通过使用 [**用户定义的表类型**]（又名 UDTT）作为存储过程的参数的存储过程进行批量更新。同样，您必须保持数据库兼容性大于 99 才能使用 MERGE 命令进行批量更新。

And of course you can use SQLBulkCopy but not sure how reliable it is, is depending on the

# eclipse - 通过 Eclipse 部署 Web 应用程序时，是否可以在 server.xml 中维护 tomcat 配置？

> ID：14112130
> 
> 赞同：2
> 
> 时间：2013-01-01T16:35:29.040
> 
> 标签：eclipse, tomcat, gridgain

当 webapps 通过 Eclipse 部署到 Tomcat 时，$catalina_home/conf/server.xml 将被 Eclipse 覆盖。这意味着，我在应用程序部署之前对 server.xml 所做的任何更改都会被 Eclipse 覆盖。

我的应用程序使用 GridGain，因此我需要将以下行添加到 server.xml：

```
<Listener className="org.gridgain.grid.loaders.tomcat.GridTomcatLoader" configurationFile="config/default-spring.xml"/> 
```

由于 Eclipse 每次部署新版本的应用程序时都会覆盖 server.xml，因此我需要指示 Eclipse 在部署期间插入上述行（这适用于所有 tomcat 事件侦听器）。这可能吗？如果没有，是否有通过 Eclipse 部署基于 GridGain 的应用程序的解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T19:17:41.907

Eclipse`${workspace}/Servers/${server-name}/server.xml`用于其配置。该目录是在您设置新服务器时创建的。它不会在您每次部署应用程序时被覆盖，但只有在您在服务器配置 UI 中进行更改时才会被覆盖。如果您需要手动添加一些内容，`server.xml`然后将文件设置为只读，例如直接在 Eclipse 中：

*   找到文件（见上面的路径）
*   右键点击
*   特性
*   资源
*   启用“只读”

这样，Eclipse 每次尝试更改文件时都会询问/通知您，您可以允许/禁止该操作。

# java - Java ^ 正则表达式与字符串中的新行不匹配

> ID：14112138
> 
> 赞同：0
> 
> 时间：2013-01-01T16:36:38.017
> 
> 标签：java, regex, newline, match

这是我的字符串

```
REGISTER sip:192.168.178.1 SIP/2.0
Call-ID: bla@192.168.178.60
CSeq: 1441 REGISTER
From: "620" <sip:620@192.168.178.20>;tag=bla
To: "620" <sip:620@192.168.178.20>
Via: SIP/2.0UDP 192.168.178.60:59488;branch=bla;rport
Max-Forwards: 70
User-Agent: bla
Contact: *
Expires: 0
Content-Length: 0 
```

所以这个字符串有几个换行符。我的正则表达式是这种形式：

```
sipRequest = sipRequest.replaceFirst("(From: \")(.*)(\" <sip:)(.*)@(.*)>", "$1$2$3$4@" + sipServer + ">"); 
```

此正则表达式匹配，但不匹配以下一个：

```
sipRequest = sipRequest.replaceFirst("(^From: \")(.*)(\" <sip:)(.*)@(.*)>", "$1$2$3$4@" + sipServer + ">"); 
```

注意：唯一的区别是“From”之前的“^”符号。那么为什么这个表达式不匹配呢？它从一个新行开始，所以它应该匹配。

感谢帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T16:40:47.937

引用 JavaDoc 的`Pattern`：

> 默认情况下，正则表达式 ^ 和 $ 忽略行终止符，仅分别匹配整个输入序列的开头和结尾。如果 MULTILINE 模式被激活，则 ^ 在输入的开头和除输入结尾之外的任何行终止符之后匹配。在 MULTILINE 模式下，$ 在行终止符或输入序列的结尾之前匹配。

所以你需要设置多行标志，因为它的默认含义`^`是**字符串的开头**，而不是行的开头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T16:41:28.337

该操作`^`仅在您使用`Pattern.MULTILINE`. 由于`string.replaceAll()`创建没有选项的模式，您必须自己创建模式，而不是创建匹配器并使用匹配器的替换工具。

# c# - 自定义边框 Windows 窗体和滚动条可见性

> ID：14112140
> 
> 赞同：1
> 
> 时间：2013-01-01T16:36:46.143
> 
> 标签：c#, winforms

我必须使用 Windows 窗体创建自定义边框窗口。目前我正在使用 WM_NCCALSIZE 修改边框的大小，并使用 WM_NCPAINT 进行自定义绘图。我意识到，当我在处理 WM_NCCALSIZE 消息时不调用 base WndProc 时，不会绘制滚动条。那么，如果我手动处理 WM_NCCALSIZE，我可以拥有一个原生的、正常的滚动条吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:03:26.663

您可以做的是先调用`base.WndProc(ref m)`然后处理消息以修改边框的大小。

```
protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        ...
        case WM_NCCALCSIZE:
        {
            base.WndProc(ref m);
            //Work your magic...
        }
        default: base.WndProc(ref m);
    }
} 
```

# android - 如何在 Universal Android Image Loader 中向 Gallery 添加按钮？

> ID：14112142
> 
> 赞同：0
> 
> 时间：2013-01-01T16:36:51.767
> 
> 标签：android, gallery

我正在开发一个示例项目，并且正在使用通用图像加载器。UIL 很棒，但我想修改一些东西，我只想在图库中放置 Next/Previous 之类的按钮。

但我在图库中看不到我的按钮视图。

这是 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Gallery Demo"
    android:id="@+id/txt"
    />
    <Gallery
    android:id="@+id/gallery"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:spacing="100px"
    android:scrollbars="horizontal"
    android:scrollbarFadeDuration="0"
    android:scrollX="100px"
    />
    <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:layout_marginTop="5px"
     >
     <Button
     android:text="Previous"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:id="@+id/btnPrev"
     android:onClick="onClick"
      />
      <Button
     android:text="Next"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:id="@+id/btnNext"
     android:onClick="onClick"
      />

    </LinearLayout> 

</LinearLayout> 
```

画廊视图似乎填满了屏幕的整个空间。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:51:32.827

请检查您的 I`magePagerAdapter extends BaseAdapter` `imageview` `android:layout_width`和`android:layout_height`，它可能是`Fill_parent`或`wrap_content.`

如果它，`wrap_content`那么如果你的图像很大，那么它会全屏显示。

谢谢

# git - 将代码上传到创建的存储库

> ID：14112145
> 
> 赞同：1
> 
> 时间：2013-01-01T16:37:14.223
> 
> 标签：git, upload, github, github-for-windows

我已经[为 Windows 安装了 Git](http://windows.github.com/)。既有图形外壳，也有带有 CUI 的外壳。我使用图形外壳创建了一个存储库：

![在此处输入图像描述](../Images/d1600535397fee69fed2b0f9bd043217.png)

如何将代码推送到 Git 存储库？在存储库 URL 中，我看到了这个推送 URL：

```
git remote add origin https://github.com/suhailgupta03/Nappster.git
git push -u origin master 
```

谁能告诉我如何使用这个 URL 来推送代码？就像我有一个名为的目录`x`，我想将该目录中的代码上传到名为的存储库`Nappster`（我在上面给出的 url。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:23:14.960

如果您`suhailgupta03`在 GitHub 上，只需单击“推送到 GitHub”就足够了。

如果没有，该按钮将推`Napster`送到您的 GitHub 帐户中新创建的 GitHub ' ' 存储库。
或者你可以定义一个主要的远程仓库，正如我在“同时用于 BitBucket 和 Github”中所说明[的`GitHub for Windows`那样](https://stackoverflow.com/questions/13664949/use-github-for-windows-for-both-bitbucket-and-github/13665100#13665100)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:38:55.927

你可以做两件事，你可以

一种。将目录“x”中的代码复制到“Nappster”并从 Git CLI 运行以下命令

```
cd /w/GitHub/Nappster
git add .
git remote add origin https://github.com/suhailgupta03/Nappster.git
git push -u origin master 
```

或 b。将“x”初始化为 git repo

```
cd path/to/x
git init
git add .
git remote add origin https://github.com/suhailgupta03/Nappster.git
git push -u origin master 
```

您可以随意称呼您的来源，例如。github

```
git remote add github https://github.com/suhailgupta03/Nappster.git
git push -u github master 
```

每次从那里进行推送时，都应该删除 -u 标志，这样就可以了

```
git push github master 
```

警告词，例如，如果您有一个包含数据库连接信息的文件，则需要将该文件名（例如 db_credentials.php）添加到 .gitignore 文件并创建另一个文件，例如。没有敏感信息的 db_credentials.php.dist

# spring-mvc - 使用 AngularJS 配置 Spring MVC

> ID：14112146
> 
> 赞同：5
> 
> 时间：2013-01-01T16:37:20.297
> 
> 标签：spring-mvc, angularjs, tomcat7

我希望能够在客户端使用 Spring MVC 作为 REST 服务器和 AngularJS。

我有几个 REST 网址：

*   /休息/产品
*   /rest/products/{id}

我有几个 UI 网址：

*   /商店/产品
*   /shop/products/{id}

因为它是 AngularJS 在客户端做的伎俩，我只想能够将所有默认的 ui url（而不是其余的）重定向到 AngularJS 使用的 index.html 文件。

所以，在 Spring MVC 配置中，我希望能够做这样的事情：

```
@EnableWebMvc
@Configuration
@ComponentScan(basePackages = "com.mypackage.web")
public class WebAppConfiguration extends WebMvcConfigurerAdapter {

    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        registry.addViewController("/**").setViewName("index");
    }

    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/");
        resolver.setSuffix(".html");
        return resolver;
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

} 
```

有了这个，我想将所有 UI url 处理委托给 AngularJS。

我还希望如果用户在浏览器中写入错误的 url，Spring MVC 将在 index.html 文件上重定向他，它将是 AngularJS，它将在错误 ui 页面上进行重定向。我在网上看到过几个项目，只有一个 index.html 文件，但没有人处理这种错误情况。

我一直在努力尝试这个技巧，但我找不到解决方案。

所以我的问题是：我该怎么做？更一般地说，我对这个 Spring MVC-AngularJS 想要的配置有错吗？

非常重要：我使用没有 web.xml 的 Spring MVC 3.2 和 Tomcat 7.34（完整的 Servlet 3.0）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:12:49.873

也许可以通过[$routeProvider](http://docs.angularjs.org/api/ng.$routeProvider)解决它：

```
$routeProvider.when('/redirect/:redirectParams', {templateUrl: 'partials/homePartial', controller: redirectController});
$routeProvider.when('/home', {templateUrl: 'partials/homePartial', controller: homeController});
$routeProvider.when('/someRoute', {templateUrl: 'partials/somePartial', controller: someController});
$routeProvider.when('/error/', {templateUrl: 'partials/errorPartial', controller: errorController});
$routeProvider.when('/error/:errorMessage', {templateUrl: 'partials/errorPartial', controller: errorController});
$routeProvider.otherwise({redirectTo: '/error'}) 
```

`$routeProvider`当找不到路由时，只需让重定向到错误页面。

**编辑：**

我在上面的示例中添加了一个 redirectController。`$routeParams`在这种情况下，此控制器将读取,`$routeParams.redirectParams`并使用[$location](http://docs.angularjs.org/api/ng.$location)将路由更改为`/error`.

Spring 只是重定向到`http://host:port/index.html/#/redirect/error=blabla`. 您可以而且应该对此进行微调并支持多个 routeParams。

在 Spring 中，您将基本上拥有三个[请求映射](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html)：

*   [REST 请求映射](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch18s02.html)
*   index.html 请求映射
*   其他url请求映射

重定向所有其他请求：

```
@RequestMapping(value = "{path}", method = RequestMethod.GET)
public String redirect(@PathVariable String path) {
   String route = null;
   if (path.equals("/") || path.startsWith("/index.html")) {
     // load index.html
   } else {
     route = "redirect:/index.html/#/redirect/" + path; 
   }
   return route;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T04:04:59.007

我认为你可以编写一个**拦截器**，它允许一些已知的 URL，如**/rest/ *、 /resources/*、 /webjars/***以及任何其他 URL 重定向到**index.html**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T22:11:11.577

尝试使用[urlrewritefilter](http://www.tuckey.org/urlrewrite/)

这应该为您完成工作。您必须在 web.xml 中配置/添加它，以便处理每个 url，并且您可以操纵它以重定向到 index.html

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T10:07:51.030

我知道它有点晚了，但如果有人遇到同样的麻烦，这里是放在你的类路径 urlwrite.xml 中的 URL 过滤器示例

您可以设置要过滤的某些 url 的重定向。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">

<!-- Configuration file for UrlRewriteFilter http://www.tuckey.org/urlrewrite/ -->

<urlrewrite>

    <rule>
        <note>
            The rule means that requests to /test/status/ will be redirected
            to
            /rewrite-status
            the url will be rewritten.
        </note>
        <from>/index.ipxs/directory</from>
        <to type="redirect">/index.ipxs/marketplace</to>

    </rule>
    <rule>
        <from>/index.ipxs/faq</from>
        <to type="redirect">/index.ipxs/marketplace</to>
    </rule>
    <rule>
        <from>/index.ipxs/marketplace</from>
        <to type="redirect">/iPlexus/index.ipxs</to>
    </rule>

</urlrewrite> 
```

# java - 用java反射实例化私有内部类

> ID：14112166
> 
> 赞同：40
> 
> 时间：2013-01-01T16:39:53.010
> 
> 标签：java, class, reflection, private, inner-classes

是否可以使用 Java 反射从另一个类实例化私有内部类。例如，如果我使用此代码

```
public class Main {
    public static void main(String[] args) {}
}

class OtherClass {
    private class Test {}
} 
```

是否可以从 main 类中的 main 方法实例化并获得对 Test 的访问权限。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-01T16:51:21.717

是的，您可以使用 Java 反射实例化私有内部类。为此，您需要有一个外部类的实例并调用内部类构造函数，该构造函数将在其第一个参数中使用外部类实例。

```
class OuterClass {
    private class InnerClass {
        {
            //this block is just to confirm that the inner object was created
            //it will be added to every constructor of this class
            System.out.println("inner object created");
        }
    }
} 
```

当我们不知道私有内部类的名称并且我们假设它具有无参数构造函数时：

```
class Main {

    //no comment version
    public static Object giveMeInnerInstance() throws Exception{
        OuterClass outerObject = new OuterClass();
        Class<?> innerClass = OuterClass.class.getDeclaredClasses()[0];
        Constructor<?> constructor = innerClass.getDeclaredConstructors()[0];
        constructor.setAccessible(true);
        return constructor.newInstance(outerObject);
    }

    //commented version
    public static void main(String[] args) throws Exception {
        //we need an outer class object to use the inner object constructor
        //(the inner class object needs to know about its parent object)
        OuterClass outerObject = new OuterClass();

        //let's get the inner class 
        //(we know that the outer class has only one inner class, so we can use index 0)
        Class<?> innerClass = OuterClass.class.getDeclaredClasses()[0];
        //or if we know name of inner class we can use 
        //Class<?> innerClass = Class.forName("full.package.name.OuterClass$InnerClass")

        //since constructor so we could use it to pass instance of outer class and change 
        //its accessibility. We can use this code to get default constructor of InnerClass 
        //since we know that this is the only constructor here
        Constructor<?> constructor = innerClass.getDeclaredConstructors()[0];
        //we could also use 
        //Constructor<?> constructor = innerClass.getDeclaredConstructor(OuterClass.class);

        //the default constructor of the private class has same visibility that class has
        //so it is also private, so to be able to use it we need to make it accessible
        constructor.setAccessible(true);

        //now we are ready to create inner class instance
        Object innerObject = constructor.newInstance(outerObject);
    }
} 
```

* * *

现在，如果我们有类似的信息，我们可以使这段代码更清晰

*   内部类的名称，
*   构造函数参数

因此，我们可以通过名称获取选定的内部类，而不是检查内部类列表并选择第一个，使用

```
Class<?> inner = Class.forName("our.pack.age.OuterClass$InnerClass")
//                                                     ^^^^^^^^^^^ 
```

同样，我们可以通过调用来选择我们想要使用的构造函数，`getDeclaredConstructor(outerType,rest,of,parameter,types)`所以如果我们的内部类看起来像

```
class OuterClass {
    private class InnerClass {

        private int x;

        public InnerClass(int x) {
            this.x = x;
            System.out.println("inner object created");
        }

    }
} 
```

我们的代码可能是

```
class ReflectionDemo {

    //no comment version
    public static Object giveMeInnerInstance() throws Exception{
        OuterClass outerObject = new OuterClass();
        Class<?> innerClass = Class.forName("com.stackoverflow.q14112166.OuterClass$InnerClass");
        Constructor<?> constructor = innerClass.getDeclaredConstructor(OuterClass.class, int.class);
        constructor.setAccessible(true);
        return constructor.newInstance(outerObject,42);
    }

    public static Object getFieldValue(Object obj, String fieldName) throws Exception{
        Class<?> clazz = obj.getClass();
        Field field = clazz.getDeclaredField(fieldName);
        field.setAccessible(true);
        return field.get(obj);
    }

    //lets test our code
    public static void main(String[] args) throws Exception {
        Object innerClassObject = giveMeInnerInstance();
        System.out.println(getFieldValue(innerClassObject, "x"));           
    }
} 
```

输出：

```
inner object created
42 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-01T17:01:27.960

使用反射时，您会发现该内部类的构造函数将外部类的实例作为附加参数（始终是第一个参数）。

有关相关信息，请参阅这些问题：

*   [实例化内部类](https://stackoverflow.com/q/4070716/1175253)

*   [如何通过 Android 上的反射实例化成员类](https://stackoverflow.com/q/10253533/1175253)

*   [在Java中，当我不在内部类中时如何访问外部类？](https://stackoverflow.com/questions/763543/in-java-how-do-i-access-the-outer-class-when-im-not-in-the-inner-class)

**例子：**

```
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

public class OuterClass {

    private class InnerClass {

    }

    public OuterClass() {
        super();
    }

    public static void main(String[] args) {
        // instantiate outer class
        OuterClass outer = new OuterClass();

        // List all available constructors.
        // We must use the method getDeclaredConstructors() instead
        // of getConstructors() to get also private constructors.
        for (Constructor<?> ctor : OuterClass.InnerClass.class
                .getDeclaredConstructors()) {
            System.out.println(ctor);
        }

        try {
            // Try to get the constructor with the expected signature.
            Constructor<InnerClass> ctor = OuterClass.InnerClass.class
                    .getDeclaredConstructor(OuterClass.class);
            // This forces the security manager to allow a call
            ctor.setAccessible(true);

            // the call
            try {
                OuterClass.InnerClass inner = ctor.newInstance(outer);
                System.out.println(inner);
            } catch (InstantiationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-26T16:16:37.773

您可以执行以下操作：

```
public static void main(String[] args) throws Exception {
    // to get first class in OtherClass
    Class<?> innerClass = OtherClass.class.getDeclaredClasses()[0];
    // getDeclaredConstructors for private constructor
    Constructor<?> constructor = innerClass.getDeclaredConstructors()[0];
    // to enable accessing private constructor
    constructor.setAccessible(true);
    OtherClass outerObject = new OtherClass();
    //// create instance of Test by reflection
    Object o = constructor.newInstance(outerObject);
    System.out.println(o);
} 
```

# ios - 为什么引用 Bool 会发出警告

> ID：14112169
> 
> 赞同：0
> 
> 时间：2013-01-01T16:40:20.480
> 
> 标签：ios

学习ios编程，请澄清为什么对布尔类型的引用会给我一个警告，但使用布尔类型的属性创建的变量不会有任何警告？

```
@property (nonatomic) BOOL *userTyped; //-> userTyped is pointer to BOOL type

-(IBAction) button:(UIButton *)sender {
    self.userTyped = YES; //-> will give a warning saying assigning char to BOOL
} 
```

* * *

```
@property (nonatomic) BOOL userTyped; //-> userTyped acts as variable of BOOl type

-(IBAction) button:(UIButton *)sender {
    self.userTyped = YES; //-> this will not give warning.
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:45:24.593

`BOOL *`是一个指向布尔值的指针。请不要那样做。`BOOL`不是一个对象。如果要将其设置为`self.userTyped = YES`，则只需使用`BOOL`而不是`BOOL *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:46:00.147

在这一行：

```
self.userType = YES; 
```

您正在尝试将指向 a 的指针设置为第一个示例中`BOOL`的`BOOL`值。您需要将其设置为指向 a 的指针`BOOL`，或将类型从 更改`BOOL*`为`BOOL`。

# c++ - MSVC中<>和""的区别

> ID：14112174
> 
> 赞同：1
> 
> 时间：2013-01-01T16:40:32.093
> 
> 标签：c++, visual-studio-2010, include, crystal-space-3d

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)
> [include “file.h” 与 <file> 有什么区别？](https://stackoverflow.com/questions/8160089/include-file-h-vs-file-what-is-the-difference)

我在使用外部库时遇到过几次这种情况，我认为这纯粹是因为我的经验不足。正如标题所说，我的问题是在包含和“”中使用 <> 有什么区别，这显然是一个很大的问题，因为您不能使用 <> 包含自己的标题，但您可以使用“”，反之亦然'不包括`<string>`带有“”的标题。

我目前正在使用 Crystal Space SDK，我正在努力掌握它并遵循教程。我正在遵循 Creating-External-MSVC-Application Howto 指南并遇到此错误：

```
1>------ Build started: Project: NewDawn, Configuration: Debug Win32 ------
1>  simple1.cpp
1>f:\project\newdawn\newdawn\include\cs\csplatform.h(26): fatal error C1083: Cannot open include file: 'csutil/win32/csconfig-msvc.h': No such file or directory
1>  main.cpp
1>f:\project\newdawn\newdawn\include\cs\csplatform.h(26): fatal error C1083: Cannot open include file: 'csutil/win32/csconfig-msvc.h': No such file or directory
1>  Generating Code...
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我去找到文件 csplatform.h 并发现它包含文件 csconfig-msvc.h 使用 < >：

```
#if defined (CS_WIN32_CSCONFIG)
/* Use manually maintained settings when not building on environments not
* using configure (specifically, MSVC) */
#  include <csutil/win32/csconfig-msvc.h>
#else
#  include <csconfig.h>
#endif 
```

理论上我可以将 #include csutil/win32/csconfig-msvc.h 从 < > 更改为 " " 但我不应该这样做，这是一个完善的代码库，最简单的教程应该可以直接使用。

我想知道为什么它用 < > 而不是“”。如果我没记错的话，我看到 Boost 也这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:43:48.770

`#include <some file>`使用包含搜索路径。`#include "some file"`相对于正在编译的文件。所以如果你想使用`#include <some file>`你需要修改包含搜索路径。

# android - 如何在不绑定的情况下访问服务？

> ID：14112177
> 
> 赞同：0
> 
> 时间：2013-01-01T16:40:56.567
> 
> 标签：android, service

我完成了我的 android 应用程序，一个 mp3 播放器，但现在我有一些问题，我不确定我是否正确。

为了更简单，我将只谈谈主要问题。

我有 2 个活动（程序（主要行为）和效果（用于均衡器、低音增强器））。

我有一个名为 ServicePlayer 的服务，用于播放音乐（使用 Mediaplayer）

现在，我启动应用程序。

1.  程序活动启动，在这个活动中，我启动服务并绑定它来控制音乐。

2.  我启动了效果活动（只需按下程序动作上的按钮），在此活动中，我不绑定到之前创建的服务。我只是使用：

    ServicePlayer mSer = new ServicePlayer();* 注意：我没有在 ServicePlayer 类中定义任何构造函数，只使用默认构造函数（因此，在创建新的 servicelayer 对象时没有初始化变量）。

然后我使用：

```
mSer.stop()// method to stop music in serviceplayer ( just call mediaplayer object to stop) 
```

我在徘徊：

1.  为什么上面的方法可以工作，而效果活动没有绑定到它？

2.  代码行 (*) 是否创建了 serviceplayer 的新对象？如果是，那么有 2 个可以播放音乐的 serviceplayer 对象？如果没有，那么第一次只创建了1个serviceplayer对象，然后，在下一个回调中，没有创建新的服务，只是使用之前创建的服务？

3.  如何在不绑定的情况下访问 serviceplayer 类的数据？实际上，我可以这样做，但我不知道为什么，因为没有初始化 serviceplayer 的变量（请参见上面的 (*) 行。

太感谢了。

更新答案，感谢 Snicolas 的帮助：

1.  因为方法 stop() 将停止一个静态对象媒体播放器。（注：静态成员）。如果它不是静态成员，您将收到 NullPointerException。

2.  是的，它创建了一个新对象，但不是一个新服务。只有 1 和 1 个服务（当然是同一个服务）可以启动，当一个服务启动时，下一个 startService 或 bindService 方法回调不会创建新的服务。只需使用旧服务。

3.  原始变量，甚至String，枚举类型都可以正常访问，但那不是之前启动的服务的数据，而是你创建的新对象的数据。对于对象类型，如果你不在构造函数中初始化，就会发生 NullPointerException。但是，您可以访问静态成员数据。

这就是我现在所理解的，所以当然，它可能是错误的，也可能是不够的。如果你能贡献，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T16:52:08.537

以下是一些答案：

1.  如果您的媒体播放器是静态的，那么它将由您的所有 ServicePlayer 实例共享。但请阅读第 2 点以了解更多信息。
2.  当你使用new时，你只是创建了服务，但它是一个简单的java对象，而不是术语android含义中的服务：它不是由系统启动的，没有系统管理的生命周期，无法绑定, 无法正常启动和停止。但在 Android 中也不例外：每个 new 都会创建一个新对象。因此，程序活动将正确启动您的服务的一个实例，而第二个实例仅像 POJO 一样实例化。
3.  我不明白。只需从您的第二个活动绑定到您的服务即可。

# python - 使用 __class__ 创建实例

> ID：14112179
> 
> 赞同：9
> 
> 时间：2013-01-01T16:41:16.930
> 
> 标签：python, python-3.x, code-duplication

`__class__`在类中创建新实例是个好主意吗？

以下代码是执行此操作的示例：

```
from collections import namedtuple

_Position = namedtuple('Position', ['x', 'y'])
class Position(_Position):
    def __add__(self, other):
        return __class__(self.x + other.x, self.y + other.y) 
```

对我来说，使用实际的类名听起来像是重复的代码。如果类的名称发生更改，我必须在所有情况下都更改它，即使现代 IDE 可以为您做到这一点。

顺便提一句。什么样的变量是`__class__`？您不应该只能使用 访问它`self.`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-01T17:08:10.670

为了支持 的零参数形式，编译器会在类方法中使用或正在使用时[`super()`](http://docs.python.org/3/library/functions.html#super)添加对类的隐式引用。请参阅[创建类对象](http://docs.python.org/3/reference/datamodel.html#creating-the-class-object)。`__class__``super()`

您找到的示例代码 (ab) 使用这个小事实来创建`Position`添加时的新实例。

就个人而言，我会`type(self)`改用它，因为这是确定任何对象的类型或类的正确 API 方法。`type(self)`将`self.__class__`在适当的地方使用：

```
def __add__(self, other):
    return type(self)(self.x + other.x, self.y + other.y) 
```

如果您想支持子类化，这*是一个好主意。*的任何子`Position`类在添加在一起时都将返回正确的子类类型。Using`__class__`不会这样做，*因为*它总是指向`Position`，即使对于子类：

```
>>> class Foo:
...     def method(self):
...         print(__class__)
...         print(type(self))
... 
>>> class Bar(Foo):
...     pass
... 
>>> Bar().method()
<class '__main__.Foo'>
<class '__main__.Bar'> 
```

当然，如果这是您一直以来的意图（绕过子类），我仍然更喜欢使用显式类名而不是 using `__class__`; 显式优于隐式。

# hadoop - 启动 Hive 服务器和 Hive Web 界面时遇到问题

> ID：14112183
> 
> 赞同：2
> 
> 时间：2013-01-01T16:41:50.880
> 
> 标签：hadoop, hive

((1))

启动 Thrift 服务器时出现以下错误：

```
hive --service hiveserver

Starting Hive Thrift Server
org.apache.thrift.transport.TTransportException: Could not create ServerSocket on address 0.0.0.0/0.0.0.0:10000. 
```

当我运行 netstat 端口 10000 已经在使用中..

```
$ netstat -nl | grep 10000
tcp6       0      0 :::10000                :::*                    LISTEN 
```

我该如何解决这个问题？

((2))

启动配置单元 Web 界面时出现以下错误

```
hive --service hwi

$ hive --service  hwi
13/01/01 22:05:36 INFO hwi.HWIServer: HWI is starting up
13/01/01 22:05:37 INFO mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
13/01/01 22:05:37 INFO mortbay.log: jetty-6.1.26
13/01/01 22:05:37 INFO mortbay.log: Extract /opt/hive/lib/hive-hwi-0.9.0.jar to /tmp/Jetty_127_0_0_1_3606_hive.hwi.0.9.0.jar__hwi__.6ogsv5/webapp
13/01/01 22:05:37 WARN mortbay.log: failed SocketConnector@127.0.0.1:3606: java.net.BindException: Address already in use
13/01/01 22:05:37 WARN mortbay.log: failed Jetty20SShims$Server@21e554: java.net.BindException: Address already in use
Exception in thread "main" java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method) 
```

请帮忙。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:49:06.347

您的端口地址似乎被其他程序使用，您可以按照以下步骤操作：-

((1)) 使用另一个端口地址启动 hive 服务器

```
 hive --service hiveserver -p 10001 & 
```

((2))

a] 如果 $HIVE_HOME/conf 文件夹中不存在，则创建 hive-site.xml 文件 b] 将以下行放入其中

```
 <?xml version="1.0"?>
   <?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
   <configuration>
   <property>
    <name>hive.hwi.listen.host</name>
    <value>localhost</value>
   </property>
   <property>
    <name>hive.hwi.listen.port</name>
    <value>9998</value>
   </property>
   <property>
    <name>hive.hwi.war.file</name>
    <value>lib/hive-hwi-0.10.0.war</value>
    <description>This sets the path to the HWI war file, relative to ${HIVE_HOME}. </description>
   </property>
   </configuration> 
```

c] 启动 hive web 界面

```
 hive --service hwi 
```

d] 浏览 localhost:9998/hwi/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T01:27:12.850

我在这里遇到同样的问题是我得到的解决方案

1)设置端口号

```
 export HIVE_PORT=10000 
```

2）检查哪些服务正在监听

```
 sudo lsof -i -P | grep -i "listen" 
```

3）如果有与端口 10000 相关的进程，将其杀死

```
 kill -9 pid 
```

4）启动配置单元服务器

```
 $HIVE_HOME/bin --service hiveserver 
```

如果它不起作用，请转到步骤 2 并再次启动服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T11:28:01.510

停止蜂巢；

在 hive-site.xml 中添加以下属性

1) hive.hwi.listen.host = 主机

2) hive.hwi.listen.port = 9999

3) hive.hwi.war.file = /lib/hive-common-0.12.0.2.0.6.1-102.jar {这将设置 HWI 战争文件的路径，相对于 $HIVE_HOME}

再次启动 Hive

使用命令在 Hive 服务器上启动 HWI

nohup hive --service hwi &

现在，您可以以 host:9999/hwi 的身份访问 HWI

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T14:09:50.567

如果出现此类问题，请运行

```
$ bin/metatool -listFSRoot 
```

如果它运行没有错误然后尝试运行`metastore`然后检查配置单元是否可以从表中获取记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T14:19:12.113

通常会出现这个问题。您正在更改主机名，以便您在元存储中创建的用户仍然引用旧的元存储主机名。

案例 -1 或者 Metastore 未启动，这会引发上述错误，因此如果运行 bin/metatool -listFSRoot 没有错误，则您可以安全地连接配置单元。

但问题仍未解决案例-2

Case-2 在配置单元中创建的表仍然指向指向旧主机名的旧配置单元用户，因此您无法从配置单元表中获取记录。

解决方案：- 使用旧主机名恢复所有文件中的主机名，然后依次运行 hadoop 和 hive 堆栈。

除此之外，如果有人有其他解决方案，请分享。我在我的生产框中解决了这个问题。

# java - @Transactional 和 AOP 之间的混淆

> ID：14112184
> 
> 赞同：0
> 
> 时间：2013-01-01T16:41:52.247
> 
> 标签：java, spring, aop, spring-transactions

@Transactional 是否在 Spring 3 中替代了 AOP。它们是一样的吗？我可以说@Transactional 在内部实现 AOP 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:54:51.050

注释只是一种简单的`@Transactionnal`方式来声明一个方法是（或一个类的所有方法都是）事务性的。

Spring Framework 将使用 AOP 代理来拦截对方法的调用并管理事务。

所以，我们可以说在`@Transactionnal`内部使用 AOP。

更多信息[在这里](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:48:43.933

你可以说的是，Spring 使用 AOP 为 bean 方法添加了一个事务方面，注释为`@Transactional`：在执行此类方法之前，它会启动一个事务（如果需要），并且在执行该方法之后，它会提交或回滚该事务。

# ruby-on-rails - 使用 MongoID、自定义身份验证、密码摘要的 Rspec 测试失败

> ID：14112187
> 
> 赞同：0
> 
> 时间：2013-01-01T16:42:40.240
> 
> 标签：ruby-on-rails, authentication, mongoid

我已经完成了 Rails 教程[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)，并尝试实现[用户模型](http://ruby.railstutorial.org/chapters/modeling-users)，但在 MongoDB 中，使用 MongoID。

我有以下代码，与教程几乎完全相同，但在其中一个测试用例上失败了。

```
class User
  include Mongoid::Document
  include ActiveModel::SecurePassword

  attr_accessible :name, :email, :password, :password_confirmation

  field :name, type: String
  field :email, type: String
  field :password_digest, type: String

  has_secure_password

  before_save { |user| user.email = email.downcase }

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :name, presence: true, length: { maximum: 50}
  validates :email, presence: true, format: { with: email_regex },
                                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 5}
  validates :password_confirmation, presence: true
end 
```

和 rspec 测试：

需要'spec_helper'

```
describe User do
  before do
     @user = User.new(name: "Example User", email: "user@example.com", 
                     password: "foobar", password_confirmation: "foobar") 
  end

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:authenticate) }

 describe 'without a name' do
    before { @user.name = "" }
    it { should_not be_valid }
  end

 describe 'without an email' do
    before { @user.email = "" }
    it { should_not be_valid }
 end

  describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
  end

  describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                     foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
      end      
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end      
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

 describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

    describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by(email: @user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }

      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end
end 
```

规范上的失败是：

```
........F..........

Failures:

  1) User return value of authenticate method with valid password 
     Failure/Error: it { should == found_user.authenticate(@user.password) }
       expected: #<User _id: 50e30a678bffa61a9e000001, _type: nil, name: "Example User", email: "user@example.com", password_digest: "$2a$10$C6klW7B9ok4OIHFopy5AfuncvwNYTZqHWTbqpdd8gXmruSLlwizPO">
            got: #<User _id: 50e30f158bffa6df67000001, _type: nil, name: "Example User", email: "user@example.com", password_digest: "$2a$10$mDCz9JVPXGSvpGBwbyHIsuV/k.lJ/ux1TuvgRzxSLYlIna/CdztN2"> (using ==)
       Diff:
       @@ -1,2 +1,2 @@
       -#<User _id: 50e30a678bffa61a9e000001, _type: nil, name: "Example User", email: "user@example.com", password_digest: "$2a$10$C6klW7B9ok4OIHFopy5AfuncvwNYTZqHWTbqpdd8gXmruSLlwizPO">
       +#<User _id: 50e30f158bffa6df67000001, _type: nil, name: "Example User", email: "user@example.com", password_digest: "$2a$10$mDCz9JVPXGSvpGBwbyHIsuV/k.lJ/ux1TuvgRzxSLYlIna/CdztN2">
     # ./spec/models/user_spec.rb:89:in `block (4 levels) in <top (required)>'

Finished in 1.79 seconds
19 examples, 1 failure 
```

更新：

做了更多的挖掘，并查询了测试数据库，似乎在每个测试用例之前数据都没有被清除。

更新2：

我设法通过在我的 Spec Helper 中包含以下内容来解决此问题：

```
 config.before :each do
    Mongoid.purge!
  end 
```

但是现在测试明显变慢了！知道如何加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:57:08.230

问题是调用保存，它重新创建`password_digest`

```
describe "return value of authenticate method" do
   #before { @user.save }  #comment this line
   #....
end 
```

# mysql - Adobe Air SQLite 同步

> ID：14112199
> 
> 赞同：0
> 
> 时间：2013-01-01T16:43:57.947
> 
> 标签：mysql, sqlite, air, desktop-application, data-synchronization

我想在 Adob​​e Air 中开发一个具有持久本地存储的桌面应用程序，它将由 Adob​​e Air 的 SQLite 提供服务。我想实现基于行的同步，并且我已经创建了这样做的算法（使用表中的时间戳字段并与 lastsynced 时间戳等进行比较）。我希望这个应用程序可以离线和在线访问。在线时，我想将本地数据库新编辑的行同步到在线数据库（MySQL），但是当应用程序离线使用时，我想记录所有编辑的行，一旦互联网连接恢复，我想同步所有在离线模式下编辑的行到在线数据库。我是 Adob​​e Air 的新手，所以任何人都可以指导一旦我们将数据存储在 SQLite 中，我们如何将所需的行传输/同步到在线数据库？谁能建议我为此使用库或 API？另外，如果我在客户端使用 SQlite，在服务器端使用 MySQL，它会带来什么问题吗？请指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:45:42.300

在本地数据库中添加 3 个标志字段 is_created、is_updated、is_deleted，其值可以为 0 或 1。对于从远程数据库获取的行，将所有 3 个字段设置为 0。

当您编辑本地行时，将 is_updated 设置为 1。当您创建新的本地行时，将 is_created 设置为 1。当您再次联机时，从本地数据库中检索所有已将 is_created、is_updated 或 is_deleted 标志设置为 1 的行，将它们与远程数据库同步，然后从本地数据库中清除标志。

# map - 在 clojure 中转换嵌套映射

> ID：14112203
> 
> 赞同：1
> 
> 时间：2013-01-01T16:44:29.010
> 
> 标签：map, clojure, traversal

我有一个看起来像这样的嵌套地图：

```
{"a" {:points 2} "b" {:points 7} "c" {:points 1} "d" {:points 3}} 
```

我想把它变成一系列地图，以便排序（使用**sort-by**）并在之后打印。

```
({:name "a" :points 2}
 {:name "b" :points 7}
 {:name "c" :points 1}
 {:name "d" :points 3}) 
```

从文档中我认为我需要像**postwalk**这样的东西，但我无法绕过它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:04:26.883

```
(sort-by :name
         (map #(conj {:name (key %)}
                      (val %))
              {"a" {:points 2}
               "b" {:points 7}
               "c" {:points 1}
               "d" {:points 3}}))

-> ({:points 2, :name "a"}
    {:points 7, :name "b"}
    {:points 1, :name "c"}
    {:points 3, :name "d"}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T21:28:42.780

如果您的目标是按排序顺序打印，为什么不简单地将其放入排序地图中呢？`(into (sorted-map) m)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T00:00:33.123

我建议像：

```
(sort-by :name 
  (for [[n m] my-map] 
    (into m {:name n}))) 
```

这利用了一些方便的技术：

*   解构以将 my-map 分解为 [key value] 对
*   您已经在值中有映射的事实，因此您可以使用它`into`来添加它们
*   A for comprehension 构建列表
*   `sort-by`对最终结果进行排序

# javascript - 如何存储和重现 jQuery 事件

> ID：14112204
> 
> 赞同：2
> 
> 时间：2013-01-01T16:44:34.013
> 
> 标签：javascript, json, jquery

我正在尝试将 jQuery 事件存储在数据库中。

```
//Calling this Function On Click 

function trackevent(event){
    window.events.push(event)
}

$.each(window.events, function(i, item){
    console.log(i +" - "+ $.parseJSON(item));
}); 
```

事件被存储到数组中。这很酷，但如果我尝试循环访问，`window.events`我将无法取回 jQuery 事件 JSON。我无法弄清楚我的错误。任何建议都会有所帮助。

![在此处输入图像描述](../Images/00a746d7b977b05daf972d8b6027a3de.png)

如果我将 parseJSON 更改为 JSON.stringify，我会收到此错误

```
$.each(window.events, function(i, item){
    console.log(i +" - "+ JSON.stringify(item));
}); 
```

![在此处输入图像描述](../Images/f53cd1a88b4aff50fcf8a0f90e5760ad.png)

![在此处输入图像描述](../Images/ac0049c27d46779eb7bae2b73a9cce59.png)

```
$(document).ready(function(){
window.events = []
// Function to enable the hidden checkbox button
$(".answers_checkbox").click(function(){
    current_click = $(this).attr("data-attr");

    // If the Hidden checkbox is Checked , it means its already selected (blue)
    if($("."+this.id).attr('checked') == 'checked') {
        $(this).css('background-image', '');
    } else {
        // Changing the Background Image to current_click option
        $(this).css('background-image',"url('/assets/choice_buttons/choice"+current_click+"_Sq_Blue.png')");
    }

    $("."+this.id).attr('checked',!$("."+this.id).attr('checked'));
    trackevent(event);
});

function trackevent(event){
    window.events.push(event)
}

});

// Function to Save Events
$(window).bind('beforeunload', function(){
    $.each(window.events, function(i, item){
        console.log(i +" - "+ item);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:52:20.253

`parseJSON`解析JSON**字符串并返回一个对象。**您不应该将对象传递给它。

由于您无论如何都要登录到控制台，因此您不妨记录完整的对象而不是字符串表示：

```
console.log(i, item); 
```

这是一个演示：http: [//jsfiddle.net/HjcGT/1/](http://jsfiddle.net/HjcGT/1/)

# java - 无法访问由 maven 导入的 jar 文件中的类

> ID：14112206
> 
> 赞同：1
> 
> 时间：2013-01-01T16:45:00.610
> 
> 标签：java, maven, jar

我想使用外部`jar`文件。因为我使用 maven，所以我搜索了一下，找到了一个看起来像这样的解决方案：

`pom.xml:`

```
<repository>
    <id>ProjectRepo</id>
    <name>ProjectRepo</name>
    <url>file://${project.basedir}/lib</url>
</repository>

<dependency>
    <groupId>myGroupId</groupId>
    <artifactId>myArtifactId</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</dependency> 
```

在 FS 上，我将`jar`文件放在：`...\MyProject\lib\myGroupId\myArtifactId\myArtifactId-1.0.0-SNAPSHOT.jar`

该`pom.xml`文件看起来不错（那里没有错误）。但问题是我无法访问位于该`jar`文件内的任何类。

我找到[了本](http://www.mkyong.com/maven/how-to-include-library-manully-into-maven-local-repository/)教程并执行了其中的内容，但我仍然无法使用任何课程......

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:57:20.833

您缺少文件系统上的版本号文件夹：

`..\MyProject\lib\myGroupId\myArtifactId\1.0.0\myArtifactId-1.0.0-SNAPSHOT.jar`

注意`1.0.0`文件夹是包含jar文件的文件夹

# c++ - 是否可以指向任何类型的变量？

> ID：14112210
> 
> 赞同：0
> 
> 时间：2013-01-01T16:45:42.717
> 
> 标签：c++, pointers

我想知道是否有可能（以及是否，如何）创建一个 X 值的指针
现在，假设我知道可以在这个指针中分配哪些类型。

例如，一个 X 值的指针（当然可以随意更改这个值的名称），它可以指向 string、bool 和自定义类的变量

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T16:50:43.603

通常你所描述的是一个坏主意。

`void*`作品，为作品的边际价值。它抛弃了所有类型的安全性，要求您跟踪它。

创建根类型是可行的，但它不适用于原始类型，而且相当侵入。

A是一个变量，可以包含指向这 3 种类型（或）`boost::variant< bool*, std::string*, MyClass* >`中任何一种的指针。您可能会发现使用起来很有挑战性，因为它强制类型安全，而且语法会让人讨厌。`bool``std::string``MyClass`

同样，指向的指针`boost::variant< bool, std::string, MyClass >`可能是您想要的，但它不会让您指向`bool`您没有在胡闹的变量。

完整的 C++11 支持，`union`可以包含任意类型，再加上一个枚举可以让你做一些非常像`boost::variant`. 不利的一面是，这需要你被指出的东西是`union`. 无论有没有完整的 C++11 支持，指针联合都是合理的。在这两种情况下，您都必须手动跟踪类型并保持同步。

您真正需要考虑的是“我为什么要问这个？”，因为与许多问题一样，动机很重要。你可能没有问正确的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T17:03:36.647

我今天学了一个新表达，所以我要用它，“这是一个XY问题”，你想做X，所以你认为解决方案是Y，所以你问怎么做Y。你可能应该问如何做 Y 代替。这有点像你发现你的汽车前轮被刺破了，你去和机械师谈谈，但你不问“我该如何修理爆胎”，你问“我如何解开车轮螺母”，而只是在您卸下所有车轮螺母并且汽车翻倒后，您是否意识到应该在汽车下方放置一个千斤顶，以便能够在汽车不会翻倒的情况下取下车轮...

当然，有 void 指针和联合，这没什么大不了的。但是，您仍然需要知道您的指针实际指向什么，否则您将一团糟。

所以一般来说，在 C++ 中，你可能不应该这样做。

您应该做的是将您的“事物”包装在另一个对象中，该对象知道内容是什么，并且可以处理它。这样，您就没有其他东西来维护对象是什么以及如何使用它的状态。

例如，我们可以这样：

```
class AnyThing
{
   public:
     virtual ~AnyThing();
     virtual std::string ToString() = 0; 
     ... // other things you want to do with your "things". 
};

class IntThing: public AnyThing 
{
     private:
        int value;

     public:
        virtual std::string ToString() { ... convert int to string ... }
};

class StringThing : public Anything
{
    private: 
       std::string value;
    public:
        virtual std::string ToString() { return value; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T16:48:00.633

您可以使用[指向 void](http://www.learncpp.com/cpp-tutorial/613-void-pointers/)的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T16:48:23.007

如果您想要一个只能用于指向这三种类型的指针，那么我会看到三个选项：

1.  为从某个基类派生的每种类型创建一个包装类：

    ```
    class Thingy { protected: Thing() {} };

    class BoolThingy   : public Thingy { bool x; }
    class StringThingy : public Thingy { String x; }
    class CustomThingy : public Thingy { Custom x; }

    ...

    Thingy *p = new BoolThingy; 
    ```

2.  创建一个智能指针类，重载接受`bool *`, `String *`,`Custom *`的赋值运算符，并重载运`*`算符（虽然那会做什么，我不知道！）

3.  使用变体类（例如`boost::variant`）。

但是对于任何选项，尚不清楚这样的东西会有什么用......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T17:27:33.637

`void*`具有指向任何数据类型的属性。它实际上用作容器或柜子，您可以在其中放置任何数据类型的变量，然后将其传递`void*`给函数。

您必须知道您传递的数据的数据类型，才能使用它。

例如：

```
int main()
{
    int a;

    void *x=&a;

    func(x);

    ....

}

void func(void *argument)
{

   int i=*(int *)argument;

   ....

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T19:10:38.573

**不**，您不能有一个指针指向未指定类型的对象。指针的全部意义在于它指向特定类型的对象。`int*x`指向一个`int`，`A*a`指向一个`A`。

当然，您可以做的是拥有一个`void*`完全不指向任何内容的类型变量 ( `void`)，但*可以保存任何地址*。如果您以某种方式记住它的地址，那么您可以使用 a`static_cast<>`强制转换为适当的指针。或者，您可以使用`dynamic_cast<>`在运行时找出您是否`void*`指向给定类型。这可以实现如下

```
struct AnyPointerWrapper
{
  struct null_pointer {};
  struct wrong_pointer_type {};

  AnyPointerWrapper() : ptr(0) {}

  AnyPointerWrapper(AnyPointerWrapper const&) = default;

  AnyPointerWrapper&operator=(AnyPointerWrapper const&) = default;

  template<typename T>
  explicit AnyPointerWrapper(T*p)
  : ptr(p) {}

  template<typename T>
  AnyPointerWrapper&operator=(T*p)
  { ptr=p; return*this; }

  bool is_null() const
  { return ptr==0; }

  template<typename T>
  bool is() const
  { return dynamic_cast<T*>(ptr) != 0; }

  template<typename T>
  T* pointer()
  {
     if(p==0) throw null_pointer;
     T*p = dynamic_cast<T*>(ptr);
     if(p==0) throw wrong_pointer_type;
     return p;
  }

private:
  void*ptr;
}; 
```

并像这样使用

```
int X;
AnyPointerWrapper a;
assert(a.is_null());
a = &X;
assert(a.is<int>());
int*p = a.pointer<int>(); 
```

（您可以添加更多功能，包括对`const`指针的支持）。**但是请注意**，这`dynamic_cast<>`并非微不足道，即会导致一些性能损失。另请注意，这`AnyPointerWrapper`不是指针：您不能使用`->`运算符来调用地址存储在`AnyPointerWrapper::ptr`;中的对象的成员函数。它只是一个包装器，您可以从中获得适当的指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T17:37:48.210

您可以拥有指向任何类型（对象、指针、原始类型等）的指针，但不能拥有指向引用的指针。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-01T16:55:33.137

如果您事先知道类型并且它们没有构造函数。然后你可以使用联合。

```
class CustomClass {};
union MyType
{
    char const*  a;
    bool         b;
    float        c;
};

MyType    stuff;
MyType*   ptrToStuff = &stuff;

int main()
{
    ptrToStuff->a = "Plop";
    ptrToStuff->b = false;
    ptrToStuff->c = 12.0;
} 
```

Boost 也有 ANY 类型。
你可以在里面存储任何东西。

```
boost::any x = 12;
x = new CustomClass;
x = new std::string("Hi There");
x = std::string("Plop");  // even works without pointers. 
```

# mysql - MySQL - 选择具有空列的行

> ID：14112211
> 
> 赞同：8
> 
> 时间：2013-01-01T16:45:57.357
> 
> 标签：mysql, sql, select, isnull

如何选择包含空列或空列的任何行？

我正在尝试对我的表进行检查，我想在其中查看我的任何行是否包含不包含值的列..

示例表：演示

```
+----+------+------+
| ID | col1 | col2 |
+----+------+------+
| 1  | VAL1 | Val2 |
| 2  | NULL | Val2 |
| 3  | VAL1 | NULL |
+----+------+------+ 
```

我希望查询返回第 2-3 行，注意我在实际表中有很多列，所以我不想将它包含在带有“where or”的查询中。

可以用mysql完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T16:48:47.530

```
select * from tablename where col1 is NULL or col2 is NULL 
```

**结果**

```
 ID | col1  | col2
 ------------------     
 2  | NULL  | Val2     
 3  | VAL1  | NULL 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T17:06:02.800

如果你真的不想使用 OR，你可以使用这个：

```
SELECT *
FROM demo
WHERE concat(col1, col2, ...) is Null 
```

或这个：

```
SELECT *
FROM demo
WHERE col1+col2+... is null 
```

但是虽然它使查询更容易编写，但它不会使它更快。我建议你只使用 OR。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-08T18:03:34.210

不需要对列名进行硬编码的最佳答案是：

```
DECLARE @sqlStr VARCHAR(max) = (
        SELECT stuff((
                    SELECT 'and ' + c.NAME + ' is null '
                    FROM sys.columns c
                    WHERE object_name(object_id) = 'yourtablename'
                    ORDER BY c.NAME
                    FOR XML PATH('')
                    ), 1, 3, '')
        )

SET @sqlStr = 'select * from ' + yourtablename + ' where ' + @sqlStr

PRINT @sqlStr

EXEC (@sqlStr) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-01T16:50:10.697

```
SELECT 
    IFNULL(col1,0),
    IFNULL(col2,0)
FROM mytable
WHERE col1 IS NULL or col2 IS NULL 
```

您可以使用 IFNULL 设置默认值

# android - Android从后台堆栈中删除活动

> ID：14112219
> 
> 赞同：79
> 
> 时间：2013-01-01T16:46:15.740
> 
> 标签：android, stack

好的，所以我有点难过如何处理这个问题。所以我有 MainActivity，可以从那里启动一个 Activity 到 DegreePlanActivity，然后从那里启动另一个 Activity 到 EditDegreePlan。我在 AndroidManifest 中将 EditDegreePlan 设置为 noHistory。问题是在他们保存 EditDegreePlan 后，它会向 DegreePlan 启动一个活动。因此，如果用户按 Back，他们必须按两次才能再次进入 MainActivity。我想摆脱它，所以他们只需要按一次。不过，我对如何做到这一点感到困惑。

如果我将 DegreePlanActivity 设置为 noHistory，那么他们在 EditDegreePlan 中无法按返回。

我已经尝试覆盖 onBackPressed 方法并启动 MainActivity 的意图。那么问题是他们必须多次按 Back 才能退出应用程序。

我应该怎么办？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-01-01T16:53:17.690

[**FLAG_ACTIVITY_CLEAR_TOP**](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)清除您的 Activity 堆栈，您可以使用以下代码：

```
Intent intent = new Intent(this, Activity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

请记住，此标志仅清除 Intermediate Activities ，例如，如果您有 A,B,C 在您的`Back Stack`然后从 C Activity 到 D 使用此标志这**不会**清除`Back Stack`并且堆栈将为 A,B,C,D 但如果您使用此标志从 Activity D 转到 Activity A，B,C,D 活动将从堆栈中弹出，您将只有 A 在 Back Stack 中。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-04T18:03:46.863

API >= 15 到 API 23 用户活动名称的简单解决方案。

```
 Intent nextScreen = new Intent(currentActivity.this, MainActivity.class);
 nextScreen.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | IntentCompat.FLAG_ACTIVITY_CLEAR_TASK);
 startActivity(nextScreen);
 ActivityCompat.finishAffinity(currentActivity.this); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-05T15:03:45.383

我建议您在启动 EditDegreePlan-Activity 时使用`startActivityForResult()`，而不是简单地`startActivity()`，如[Android 教程](http://developer.android.com/training/basics/intents/result.html)中所述。

然后在 EditDegreePlan-Activity 中调用

```
setResult(RESULT_OK);
finish(); 
```

如果您不期望来自 EditDegreePlan-Activity 的任何数据，那么您不必实施`onActivityResult`.

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-06-27T03:16:25.393

要从清单`android:noHistory="true"`内的后台堆栈中删除活动，请添加到清单文件中的活动。

请参阅下面的示例。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.activity"
      android:versionCode="1"
      android:versionName="1.0">
 <application android:name="MyApp" android:label="My Application">
    <activity android:name=".LoginActivity" 
      android:noHistory="true"> //add this line to your activity inside manifest
     <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
      </intent-filter>
   </activity>
 </application>
</manifest> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-01T16:56:19.813

看来，如果您根本不指定任何标志，您将获得所需的行为。后退按钮只会做正确的事情。要从您的代码中关闭活动，请使用`finish()`它与用户按下后退按钮具有相同效果的方法。因此，当您完成 EditDegreePlan 时，您将自动到达 DegreePlan，也无需调用任何`Intents`。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-28T20:48:58.310

您可以在开始新活动之前调用完成。这将从堆栈中删除当前活动，因此当您从下一个活动按后退按钮时，不会从堆栈历史记录中调用第一个活动。

```
Intent i = new Intent(MainActivity.this, NextActivity.class);
finish();  
startActivity(i); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-01T17:03:47.787

这是您的流程：

MainActivity --> DegreePlanActivty --> EditDegreePlan--> DegreePlan --> MainActivty

在“DegreePlan”中覆盖这些方法

```
public void onBackPressed() {
   super.onBackPressed();
   Intent goToMainActivity = new Intent(getApplicationContext(), MainActivity.class);
   goToMainActivity.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // Will clear out your activity history stack till now
   startActivity(goToMainActivity);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-22T05:14:54.547

使用它来清除堆栈：

```
 menuIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-17T15:39:59.490

```
Intent intent = new Intent(getContext(), MainActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK); 

startActivity(intent); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-12T11:50:20.153

您可以按如下方式添加标志并启动 Activity，请尝试以下代码

```
Intent i = new Intent(activity, Payment.class);
i.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_CLEAR_TOP);
activity.startActivity(i); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-30T14:44:39.337

```
This code should help you out: It is in Kotlin
private fun verifyIfUserIsLoggedIn(){
        val uid = FirebaseAuth.getInstance().uid
        if(uid== null){
            val intent = Intent(this, MainActivity::class.java)
            intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TASK.or(Intent.FLAG_ACTIVITY_NEW_TASK)
            startActivity(intent)
        }
    } 
```

# java - Android 数据库在后台

> ID：14112224
> 
> 赞同：0
> 
> 时间：2013-01-01T16:46:58.457
> 
> 标签：java, android, database, sqlite, oop

我的 android 数据库有点问题。基本上问题是，当我在活动运行时从数据库中检索我的值时，它运行良好，但是当我的应用程序在后台并且我使用了广播类时，所以当我收到短信时，它会将值传递给活动它必须从数据库（SQLite）接收数据我崩溃问题是数据库仅在应用程序活动运行时检索数据所以我的问题是当我的应用程序在后台时如何从数据库中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:51:59.627

您需要始终运行[服务。](http://developer.android.com/guide/components/services.html)服务在后台运行您的活动任务。无需显示活动视图。

# c++ - 删除控件 wxWidgets

> ID：14112227
> 
> 赞同：6
> 
> 时间：2013-01-01T16:47:45.220
> 
> 标签：c++, wxwidgets

我发现这很难从搜索中找到，但很简单，如何从面板中删除控件？我有一些 wxStaticText 和 wxTextCtrl，我想交换删除现有项目并用新项目替换它们？有什么命令我可以调用还是我必须自己做点什么？干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:31:25.260

**编辑**：正如 ravenpoint 指出的那样，仅仅删除控件是不够的。一些控件在`Destroy()`.

您可以简单地`Destroy()`控制。wxWidgets 会自动从父窗口中移除它并释放它的内存。

```
wxWindow* ctrl = new wxStaticText(this);
ctrl->Destroy();
ctrl = new wxTextCtrl(this); 
```

如果你没有指向控件的指针，你可以使用`FindWindowById`,`FindWindowByLabel`或`FindWindowByName`来获取它：

```
if(wxWindow* ctrl = wxWindow::FindWindowById(ID_MYCTRL,this))
    ctrl->Destroy(); 
```

如果控件被添加到一个sizer，它必须在它仍然有效时被替换：

```
newCtrl = new wxWindow(...);
sizer->Replace(oldCtrl,newCtrl); // both oldCtrl and newCtrl must be valid
oldCtrl->Destroy();
Layout(); // update sizer 
```

或者，您可以从一开始就创建一个 wxTextCtrl 并将其设为只读。但是，需要进行额外的样式修改以使其看起来像 wxStaticText（例如背景颜色、边框等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:15:42.203

最简单的做法是隐藏小部件。 [http://docs.wxwidgets.org/trunk/classwx_window.html#a7ed103df04014cb3c59c6a3fb4d95328](http://docs.wxwidgets.org/trunk/classwx_window.html#a7ed103df04014cb3c59c6a3fb4d95328)

但是，如果您想永久删除小部件，请调用 Destroy [http://docs.wxwidgets.org/trunk/classwx_window.html#a6bf0c5be864544d9ce0560087667b7fc](http://docs.wxwidgets.org/trunk/classwx_window.html#a6bf0c5be864544d9ce0560087667b7fc)

# c# - GroupBy 与 elementSelector 和 resultSelector

> ID：14112230
> 
> 赞同：17
> 
> 时间：2013-01-01T16:47:58.703
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

`Enumerable.GroupBy`and`Queryable.GroupBy`扩展有 8 个重载。其中两个（对于`Enumerable.GroupBy`）是：

```
// (a)
IEnumerable<TResult> GroupBy<TSource, TKey, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, TKey> keySelector,
    Func<TKey, IEnumerable<TSource>, TResult> resultSelector);

// (b)
IEnumerable<TResult> GroupBy<TSource, TKey, TElement, TResult>(
    this IEnumerable<TSource> source,
    Func<TSource, TKey> keySelector,
    Func<TSource, TElement> elementSelector,
    Func<TKey, IEnumerable<TElement>, TResult> resultSelector); 
```

（`Queryable.GroupBy`同样，只是用`Expression<Func<...`而不是`Func<...`）

`(b)`有一个额外`elementSelector`的 as 参数。

在 MSDN 上是[重载 (a)](http://msdn.microsoft.com/en-us/library/bb549393.aspx)的[示例和重载 (b) 的示例](http://msdn.microsoft.com/en-us/library/bb534493.aspx)。它们都使用相同的示例源集合：

```
List<Pet> petsList = new List<Pet>
{
    new Pet { Name="Barley", Age=8.3 },
    new Pet { Name="Boots", Age=4.9 },
    new Pet { Name="Whiskers", Age=1.5 },
    new Pet { Name="Daisy", Age=4.3 }
}; 
```

示例 (a) 使用此查询：

```
var query = petsList.GroupBy(
    pet => Math.Floor(pet.Age), // keySelector
    (age, pets) => new          // resultSelector
    {
        Key = age,
        Count = pets.Count(),
        Min = pets.Min(pet => pet.Age),
        Max = pets.Max(pet => pet.Age)
    }); 
```

示例 (b) 使用此查询：

```
var query = petsList.GroupBy(
    pet => Math.Floor(pet.Age), // keySelector
    pet => pet.Age,             // elementSelector
    (baseAge, ages) => new      // resultSelector
    {
        Key = baseAge,
        Count = ages.Count(),
        Min = ages.Min(),
        Max = ages.Max()
    }); 
```

两个查询的结果完全相同。

问题 1：是否有任何我无法`resultSelector`单独使用的查询以及我真正需要的地方`elementSelector`？或者这两个重载的能力是否总是相同的，使用其中一种或另一种方式只是个人喜好问题？

问题 2：在使用 LINQ 查询语法时，这两种不同的重载是否存在对应关系？

（作为一个附带问题：当`Queryable.GroupBy`与实体框架一起使用时，两个重载都会被翻译成完全相同的 SQL 吗？）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-01T19:07:20.480

对于 IEnumerable：

```
petsList.GroupBy(
    pet => Math.Floor(pet.Age), // keySelector
    (age, pets) => new          // resultSelector
    {
        Key = age,
        Count = pets.Count(),
        Min = pets.Min(pet => pet.Age),
        Max = pets.Max(pet => pet.Age)
    }); 
```

相当于：

```
var query = petsList.GroupBy(
    pet => Math.Floor(pet.Age), // keySelector
    pet => pet,             // elementSelector
    (baseAge, ages) => new      // resultSelector
    {
        Key = baseAge,
        Count = ages.Count(),
        Min = ages.Min(pet => pet.Age),
        Max = ages.Max(pet => pet.Age)
    }); 
```

使用 elementSelector 可以简化 resultSelector 中的表达式（比较下一个和上一个）：

```
var query = petsList.GroupBy(
    pet => Math.Floor(pet.Age), // keySelector
    pet => pet.Age,             // elementSelector
    (baseAge, ages) => new      // resultSelector
    {
        Key = baseAge,
        Count = ages.Count(),
        Min = ages.Min(), //there is no lambda due to element selector
        Max = ages.Max() ////there is no lambda due to element selector
    }); 
```

在 IQueryable 中，就没有这么简单了。您可以查看此方法的来源：

```
public static IQueryable<TResult> GroupBy<TSource, TKey, TElement, TResult>(this IQueryable<TSource> source, Expression<Func<TSource, TKey>> keySelector, Expression<Func<TSource, TElement>> elementSelector, Expression<Func<TKey, IEnumerable<TElement>, TResult>> resultSelector)
        {
            if (source == null)
                throw Error.ArgumentNull("source"); 
            if (keySelector == null)
                throw Error.ArgumentNull("keySelector"); 
            if (elementSelector == null) 
                throw Error.ArgumentNull("elementSelector");
            if (resultSelector == null) 
                throw Error.ArgumentNull("resultSelector");
            return source.Provider.CreateQuery<TResult>(
                Expression.Call(
                    null, 
                    ((MethodInfo)MethodBase.GetCurrentMethod()).MakeGenericMethod(typeof(TSource), typeof(TKey), typeof(TElement), typeof(TResult)),
                    new Expression[] { source.Expression, Expression.Quote(keySelector), Expression.Quote(elementSelector), Expression.Quote(resultSelector) } 
                    )); 
        }

public static IQueryable<TResult> GroupBy<TSource, TKey, TResult>(this IQueryable<TSource> source, Expression<Func<TSource, TKey>> keySelector,Expression<Func<TKey, IEnumerable<TSource>, TResult>> resultSelector)
        {
            if (source == null)
                throw Error.ArgumentNull("source"); 
            if (keySelector == null)
                throw Error.ArgumentNull("keySelector"); 
            if (resultSelector == null) 
                throw Error.ArgumentNull("resultSelector");
            return source.Provider.CreateQuery<TResult>( 
                Expression.Call(
                    null,
                    ((MethodInfo)MethodBase.GetCurrentMethod()).MakeGenericMethod(typeof(TSource), typeof(TKey), typeof(TResult)),
                    new Expression[] { source.Expression, Expression.Quote(keySelector), Expression.Quote(resultSelector) } 
                    ));
        } 
```

如您所见，它们返回不同的表达式，因此我不确定结果 SQL 查询在所有情况下都相同，但我*认为*使用 elementSelector + resultSelector 进行重载的 SQL 查询不会比没有 elementSelector 的重载慢。

答案 1：不，对于 IEnumerable，没有无法`resultSelector`单独使用的查询。

回答 2。不，当使用 LINQ 查询语法时，这两种不同的重载没有对应物。与 LINQ 查询语法相比，扩展方法具有更多可能性。

答案 3（对于附带问题）：不能保证 sql 查询对于此重载将是相同的。

# node.js - 如何在一个 url 上设置到 node.js 服务器的多个实例的路由？

> ID：14112232
> 
> 赞同：1
> 
> 时间：2013-01-01T16:48:09.167
> 
> 标签：node.js, webserver

我构建了一个简单的 node.js 服务器应用程序，希望能尽快进行测试。它是单线程的，无需任何子处理即可正常工作。我的问题是服务器盒有多个核心，我认为使用它们的最简单方法是运行服务器应用程序的多个实例。但是，这将要求它们都在同一个域名上，因此需要某种请求路由。我个人一般对服务器没有太多经验，不知道这是node.js执行的任务还是其他一些不太复杂的程序（或更复杂）。如果有node.js机制来解决例如，如果一个正在运行的实例可以将传入请求发送到下一个实例，那么我将如何检测何时需要发生这种情况？横向，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:07:24.557

Node.js 包含对管理应用程序实例集群的内置支持，以通过[`cluster`](http://nodejs.org/api/cluster.html)模块利用多个内核。

# python - 如何创建一个元素都等于指定值的数组？

> ID：14112235
> 
> 赞同：24
> 
> 时间：2013-01-01T16:48:35.347
> 
> 标签：python, numpy, scipy

如何创建一个数组，其中每个条目都是相同的值？我知道`numpy.ones()`并`numpy.zeros()`为 1 和 0 执行此操作，但是呢`-1`？

例如：

```
>>import numpy as np
>>np.zeros((3,3))
array([[ 0.,  0.,  0.],
       [ 0.,  0.,  0.],
       [ 0.,  0.,  0.]])

>>np.ones((2,5))
array([[ 1.,  1.,  1.,  1.,  1.],
       [ 1.,  1.,  1.,  1.,  1.]])

>>np.negative_ones((2,5))
??? 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-10-17T13:18:13.817

使用[`np.full()`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.full.html)如下：

```
np.full((2, 5), -1.) 
```

回报：

```
array([[-1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1.]]) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-01T17:01:11.490

我不知道是否有一个没有算术运算的好单行，但可能最快的方法是使用创建一个未初始化的数组`empty`，然后使用它`.fill()`来设置值。为了比较：

```
>>> timeit m = np.zeros((3,3)); m += -1
100000 loops, best of 3: 6.9 us per loop
>>> timeit m = np.ones((3,3)); m *= -1
100000 loops, best of 3: 9.49 us per loop
>>> timeit m = np.zeros((3,3)); m.fill(-1)
100000 loops, best of 3: 2.31 us per loop
>>> timeit m = np.empty((3,3)); m[:] = -1
100000 loops, best of 3: 3.18 us per loop

>>> timeit m = np.empty((3,3)); m.fill(-1)
100000 loops, best of 3: 2.09 us per loop 
```

但老实说，我倾向于添加到零矩阵或乘以一个矩阵，因为初始化很少是瓶颈。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-01T16:58:19.403

-1 * np.ones((2,5))

乘以矩阵中需要的数字就可以了。

```
In [5]: -1 * np.ones((2,5))
Out[5]: 
array([[-1., -1., -1., -1., -1.],
       [-1., -1., -1., -1., -1.]])

In [6]: 5 * np.ones((2,5))                                                                                                                                                                                                                  
Out[6]:                                                                                                                                                                                                                                      
array([[ 5.,  5.,  5.,  5.,  5.],                                                                                                                                                                                                            
       [ 5.,  5.,  5.,  5.,  5.]]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-01T16:59:38.627

对于 -1 的数组

```
-1 * np.ones((2,5)) 
```

简单地乘以常数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-14T20:21:36.373

怎么样：

```
[[-1]*n]*m 
```

其中 n 是列数，m 是行数？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-01T17:05:45.920

```
foo = np.repeat(10, 50).reshape((5,10)) 
```

将创建一个 10s 的 5x10 矩阵。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-01T04:51:38.443

据我说，这些是创建具有指定值的数组的好方法

> `arr=[value for x in range(num)]`

或者

> `[VALUE]*NUM`

其中 num 是数组的长度 & value 是指定的值。

# javascript - jQuery / JavaScript：将项目推送到多维数组中的最少完整“行”

> ID：14112236
> 
> 赞同：0
> 
> 时间：2013-01-01T16:48:37.937
> 
> 标签：javascript, jquery, arrays, multidimensional-array

好的，所以我有一个多维坐标数组。

```
var coords = [],
    rows = 3;

coords[0] = [{x:35,y:35}...];
coords[1] = [{x:35,y:35}...];
coords[2] = [{x:35,y:35}...];

// Assume each row has a different number of entries in. 
```

本质上，我希望能够推送到数组中最少的“行”。因此，如果**coords[0].length***大于*coords **[2].length**，则推送到*coords[2]*。

我知道我可以循环，但我正在寻找最有效的方法，或者编写一个小函数来做到这一点。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:54:10.580

我的解决方案怎么样

```
var coords = [],
    rows = 3, 
    whereToPush = 0;

coords[0] = [];
coords[1] = [];
coords[2] = [];

function push(a){
    coords[whereToPush].push(a);
    whereToPush += 1;
    if(whereToPush >= rows) whereToPush = 0;
} 
```

# java - 快速修复（java）协议重新连接

> ID：14112240
> 
> 赞同：0
> 
> 时间：2013-01-01T16:48:48.840
> 
> 标签：java, quickfix

我正在使用快速修复协议，如果我的登录（从 SocketInitiator 开始）被拒绝修复协议尝试每 5 秒一次又一次地连接（使用“ReconnectInterval”），有没有办法使重新连接不等间隔? 例如尝试每 5 秒连接 3 次，然后每 1 分钟连接一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:18:05.797

如果我正确阅读了[AbstractSocketInitiator](http://sourceforge.net/p/quickfixj/code/1113/tree/trunk/core/src/main/java/quickfix/mina/initiator/AbstractSocketInitiator.java#l181)和[SessionSettings](http://sourceforge.net/p/quickfixj/code/1113/tree/trunk/core/src/main/java/quickfix/SessionSettings.java#l734)的源代码，您可以简单地使用分号分隔值指定重新连接间隔设置：例如。“5;5;5;60”表示，前 3 次在 5 秒后重试，下一次在 60 秒后重试。

注意：请添加到使用的框架的链接，这是一个假设。

# java - 为什么Android回调方法的名称以'on'开头？

> ID：14112241
> 
> 赞同：2
> 
> 时间：2013-01-01T16:48:55.893
> 
> 标签：java, android

我只是好奇。（也许不仅在 Android 中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:57:17.997

Android 的回调响应事件。当事件发生时，您会对事件做出反应。所以当`an event occurs`你`do something`. 所以：

```
onOccurrence() {
  doSomething;
} 
```

这只是一个约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T16:56:26.503

好吧，Java 编程被设计为可读性强，尽管有时它确实显得臃肿，但它仍然非常易读，尤其是 Android。我猜 SDK 开发人员想要给出的名称可以以非常易读的方式阅读。

```
onPause(){
Do stuff here when app is paused.
} 
```

它可以变得更加明显吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:53:44.947

因为它们对应于“事件”，并且在 Android 中所有“事件”方法都以“on”前缀开头。一开始我真的不喜欢这个，因为它不是 Java 约定，但毕竟，为什么不呢。

# ios - 应用内购买 - 通常在每个打开的应用上获取产品列表？

> ID：14112242
> 
> 赞同：2
> 
> 时间：2013-01-01T16:48:58.263
> 
> 标签：ios

我正在阅读这个应用内购买教程：

[http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

为了进行购买，我们需要执行以下操作：

```
SKProduct* product = ...;
SKPayment* payment = [SKPayment paymentWithProduct:product];
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

看起来我们需要一个实例`SKProduct`来传递给`addPayment:`方法。这是否意味着每次用户打开我们的应用时，我们都需要从应用商店获取我们的应用提供的产品列表？

就我而言，我有一个硬编码产品标识符列表。我想知道人们是否会`SKProduct`一次获取实例列表，然后将它们缓存到磁盘。然后，在您为应用添加更多产品之前，无需重新获取。不过，我猜想像本地化价格这样的动态属性会阻止缓存。

那么每次应用程序运行时重新获取产品列表是否很典型？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T19:17:16.683

No it's not mandatory to make product request each time when application launches. It just depends on application requirement.Suppose in Your Application First Screen is Something Like The Store SCreen Where You display the Item To be sold. In that case You should make the Product request to the Itunes Store So that You can display The Most updated Information Corresponding to Products each time when application launches.

Suppose If in your Application you display The Products List on clicking of some Store Button(Say any Button on clicking you load Store Content). then in that case you should make the Product request at that Time and display these product on screen. And As clicking on any one of them(product) you can pass that `SKProduct` to the `SKPaymentQueue`.And In that case no need to make The Product request to the Itunes Store each time when application launches.

So here I Would Say You Firstly Need To think About Your Application requirement. I hope It may help you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:01:12.140

在我自己的应用程序中，每次用户进入我的应用程序中的“商店”屏幕时，我都会获取 SKProducts，而不是每次运行应用程序时。如果用户此时没有购买任何东西的意图，则无需获取产品。等到用户选择查看有关可以在您的应用中进行哪些应用内购买的详细信息。

# android - 过度滚动列表视图底部不起作用

> ID：14112244
> 
> 赞同：2
> 
> 时间：2013-01-01T16:49:21.430
> 
> 标签：android, listview, overscroll

编辑：最近又开始工作了，让它工作了，所以不再需要答案了。 [关联](https://github.com/Larphoid/android-Overscroll-ListView)

我制作了一个可过度滚动的列表视图，一切正常，除非您使用方向键/轨迹球滚动超出最后一项。当用手指在屏幕上滚动时，所有检查顶部和底部过度滚动的工作，即使使用 d-pad/轨迹球滚动超出列表中的第一项......但不是底部。这就是为什么它把我吓坏了，因为其他检查所有工作......我不会发布整个活动，因为它非常大，我只会发布我认为必要的内容。所有检查都在 OverscrollListview 类中完成。

活动：

```
package com.somepackage;

public class SomeActivity extends ListActivity
{
  private OverscrollListview mNotesList;
    protected void onCreate(Bundle savedInstanceState)
    {
      mNotesList = (OverscrollListview) findViewById(android.R.id.list);
      /* just a view in xml that can be sized so that the header and footer are always
         the height of the complete screen no matter what device it runs on ...
      */
      header = LayoutInflater.from(this).inflate(R.layout.listview_overscrollview, null);
      header.findViewById(R.id.overscroll)
        .setMinimumHeight(getWindowManager()
        .getDefaultDisplay()
        .getHeight());
      mNotesList.addHeaderView(header, null, false);
      mNotesList.addFooterView(header, null, false);
      mNotesList.setOnScrollListener(mNotesList);
      mNotesList.setAdapter(mainadapter);
      populateNotesList();
    }
  ...
}

public void populateNotesList()
{
  ...
  // whenever the listview gets populated, these values need to be 0 again
  mNotesList.item = mNotesList.itemOffset = 0;
} 
```

overscrollview 类：

```
package com.somepackage;

import android.content.Context;
import android.os.Handler;
import android.util.AttributeSet;
import android.view.View;
import android.widget.AbsListView;
import android.widget.ListView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.Toast;

public class OverscrollListview extends ListView implements OnScrollListener
{
    public int item = 0, itemOffset = 0, first = 0, count = 0, total = 0;
    private int currentScrollState = OnScrollListener.SCROLL_STATE_IDLE;
    private Handler mHandler = new Handler();
    private Toast toast;
    private View  listitem;

    public OverscrollListview(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        toast = Toast.makeText(context, "", Toast.LENGTH_LONG);
    }

    public OverscrollListview(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        toast = Toast.makeText(context, "", Toast.LENGTH_LONG);
    }

    public OverscrollListview(Context context)
    {
    super(context);
        toast = Toast.makeText(context, "", Toast.LENGTH_SHORT);
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount)
    {
    first = firstVisibleItem;
    count = visibleItemCount;
    total = totalItemCount;
      mHandler.postDelayed(checkListviewTopAndBottom, 100);
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState)
    {
    currentScrollState = scrollState;
      mHandler.postDelayed(checkListviewTopAndBottom, 100);
    }

    private final Runnable checkListviewTopAndBottom = new Runnable()
    {
    @Override
    public void run() {
        toast.setText("first="+first+"\ncount="+count+"\nlast="+getLastVisiblePosition()+"\ntotal="+total+"\nitem="+item);
        toast.show();
        if ( getCount() <= 2 ) return; // do nothing, listview has no items, only header & footer
        if ( currentScrollState != OnScrollListener.SCROLL_STATE_IDLE ) return; // do nothing, still scrolling
        if ( getFirstVisiblePosition() < 1 ) {
        setSelectionFromTop(1, getDividerHeight());
        return;
        }
        if ( getLastVisiblePosition() == getCount()-getHeaderViewsCount() ) {
        if ( item == 0 ) {
            if ( getFirstVisiblePosition() < 1 ) {
            item  = 1;
            itemOffset = getDividerHeight();
            } else {
            item  = getCount()-getHeaderViewsCount();
            listitem = getChildAt(item);
            if ( listitem != null ) {
                itemOffset = getHeight()-listitem.getHeight()+getDividerHeight();
            } else {
                itemOffset = getHeight()+getDividerHeight();
            }
            }
            }
        //toast.setText("LastVisPos()==getCount()-1\nitem="+item+"\nitemOffset="+itemOffset);
        //toast.show();
            if ( item == getCount()-getHeaderViewsCount() || (item == 1 && getFirstVisiblePosition() < 1) ) {
                setSelectionFromTop(item, itemOffset);
            }
        }
    }
    };
} 
```

虽然它的大部分工作，我可以忍受，如果有人能看到出了什么问题，我会很感激，因为它只是让我烦恼......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:53:24.097

这不是回答你的主要问题，只是想留下一些笔记。

页眉/页脚的高度可以这样设置：

```
public class OverscrollListview extends ListView implements OnScrollListener
{
    // ...

    @Override
    protected void layoutChildren() {
        View v = findViewById(R.id.HEADER_VIEW_ID);
        ViewGroup.LayoutParams lp = v.getLayoutParams();
        lp.height = getHeight();
        v.setLayoutParams(lp);

        v = findViewById(R.id.FOOTER_VIEW_ID);
        v.setLayoutParams(lp);

        super.layoutChildren();
    }
} 
```

这似乎是更方便的方式。这样header/footer的高度就可以设置为它的LsitView的高度。

# shell - 壳牌 crontab 不工作

> ID：14112246
> 
> 赞同：0
> 
> 时间：2013-01-01T16:49:27.780
> 
> 标签：shell, cron

GNU nano 2.0.9 文件：/tmp/crontab.XXXXzBQgwS

```
*/5 * * * * ~/check_phpfpm.sh
*/5 * * * * ~/check_nginx.sh
*/5 * * * * ~/disk-clean.sh
*/5 * * * * ~/loadcheck.sh 
```

按理我的代码应该每 5 分钟运行一次。但它不运行

```
[root@4D13 ~]# ls -l
total 756
-rw-------. 1 root root   1688 Dec 18 09:45 anaconda-ks.cfg
-rwxrwxrwx  1 root root    139 Dec 28 18:18 check_nginx.sh
-rwxrwxrwx  1 root root    140 Dec 28 18:19 check_phpfpm.sh
-rwxrwxrwx  1 root root    456 Dec 28 18:18 disk-clean.sh
-rw-r--r--. 1 root root  15469 Dec 18 09:45 install.log
-rw-r--r--. 1 root root   5267 Dec 18 09:44 install.log.syslog
-rwxrwxrwx  1 root root    503 Dec 19 19:26 loadcheck.sh
drwxr-xr-x  9 1001 1001   4096 Dec 18 11:08 nginx-1.3.2
-rw-r--r--  1 root root 722119 Jun 26  2012 nginx-1.3.2.tar.gz
[root@4D13 ~]# 
```

如果我手动运行它应该运行 ~/check_phpfpm.sh 作为我的代码

```
[root@4D13 ~]#
[root@4D13 ~]# ~/check_phpfpm.sh
Stopping php-fpm:                                          [FAILED]
Starting php-fpm:                                          [  OK  ] 
```

有关 check_phpfpm 的更多信息，它是一个检查服务 php-fpm 是否正在运行的脚本，如果它不工作，它将执行并重新启动 php-fpm，但问题是如果我手动运行它的工作。但是 crontab 没有重新启动，服务器 php-fpm 崩溃并进入停止模式，但是这个脚本没有重新启动，我的 crontab 应该每 5 分钟执行一次脚本来检查。

我的 crontab 设置有什么问题？感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:57:26.617

您确定 CRON 服务正在触发吗？也许它甚至没有运行。

根据您的发行版，您可以检查它是否正在运行它而不是使用类似...

```
# service crond status 
```

如果它正在运行，并且您的脚本没有触发，则可能存在权限或位置问题。你可以通过 CRON 使用 ~ 吗？例如，也许可以尝试将脚本的绝对路径放在 /home/user/check_phpfpm.sh 中。

如果您从 CRON 收到错误消息，请检查您的 CRON 日志，可能位于 /var/log/cron 或类似位置，或者通过在您的 CRONTAB 的第一行添加以下内容将 CRON 输出通过电子邮件发送给您...

```
MAILTO="you@whatever.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:04:20.567

首先确保您的脚本是可执行的：

```
chmod u+x name_of_script 
```

现在将其添加到 crontab：

```
crontab -e 
```

还要确保您在 crontab 中写入完整路径，例如：

```
*/5 * * * * /home/user/loadcheck.sh 
```

# macos - 除非我让用户选择路径，否则保存到路径不起作用

> ID：14112247
> 
> 赞同：1
> 
> 时间：2013-01-01T16:49:41.843
> 
> 标签：macos, cocoa, nsstring, nssavepanel

我使用此代码告诉我的第二个班级将文件保存到给定路径：

```
if ([defaults boolForKey:@"SaveAutomatically"]) {
        basepath = [defaults objectForKey:@"SaveAutomaticallyPath"];
        basepath = [basepath stringByAppendingPathComponent:[defaults objectForKey:@"SaveAutomaticallyName"]];
}
[NSThread detachNewThreadSelector:@selector(saveTo:) toTarget:controller withObject:basepath]; 
```

因此，该`saveTo:`方法被调用。它首先检查给定的路径是否正常

```
if (![[[aPath pathExtension] lowercaseString] isEqualToString:@"icns"]) {
    aPath = [aPath stringByAppendingPathExtension:@"icns"];
}

if ([[NSFileManager defaultManager] fileExistsAtPath:aPath]) {
    [delegate error:@"File exists already."];
    [self performSelectorOnMainThread:@selector(fs)
                           withObject:nil waitUntilDone:NO];
} 
```

然后它做一些事情并创建一个`CGImageDestinationRef`：

```
NSURL *fileURL = [NSURL fileURLWithPath:aPath];
CGImageDestinationRef dr = CGImageDestinationCreateWithURL((CFURLRef)fileURL, kUTTypeAppleICNS , count, NULL);
if (!dr) {
    [delegate error:@"Unable to save icon file."];
    [self performSelectorOnMainThread:@selector(fs)
                           withObject:nil waitUntilDone:NO];
    return;
} 
```

`dr`每次都是零。如果我`saveTo`使用 a 给 a 路径，`NSSavePanel`它不会抱怨并且工作正常。我尝试登录路径，`saveTo:`但效果很好（例如*/Users/Home/Desktop/Result.icns*）。

换句话说，当上面的代码保存到*/Users/Home/Desktop/Result.icns*时它会失败，但是当我让用户决定使用 保存到同一路径`NSSavePanel`时，没有问题。

我正在使用沙盒。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:55:32.373

沙盒应用程序在其自己的容器文件夹之外没有文件访问权限，除非用户使用打开/保存面板或通过拖放明确允许它。您将需要允许用户选择他们希望保存到的路径并保留该文件夹的安全范围书签以供以后使用（即，如果您想在应用程序重新启动后更新该文件）。

这是[苹果沙盒设计指南中的](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW4)一段话：

> 您的沙盒应用可以通过以下三种方式访问​​其容器外的文件系统位置：
> 
> *   在用户的特定方向
> *   通过使用特定文件系统位置的权利（在“权利和系统资源访问”中描述）
> *   当文件系统位置位于世界可读的某些目录中时

# java - 在java中使用数组作为switch case语句

> ID：14112249
> 
> 赞同：0
> 
> 时间：2013-01-01T16:50:08.527
> 
> 标签：java, arrays, io, switch-statement

我正在制作游戏，我希望控件是可编辑的。好吧，我已经把那部分记下来了，但是它们正在被读取和更改为 .txt 文件。这就是我希望它现在工作的方式。这些值存储为键值（即 KeyEvent.VK_W 等于 83，因此该行的值为 83）。我还让它读取值并将它们保存到我的核心类中的字符串数组变量中。在我的键事件类中，处理按键的推送，我让它引用数组来检查是否按下了命令键。我不断收到此错误：`case expressions must be constant expressions`当我尝试时。这是错误的代码：

```
switch(key){
  case Integer.parseInt(commands[1]):
      ...
      break;
} 
```

我得到了那个错误。的值为`commands[1]`83。它是“W”的值。这是我对变量的声明：

```
for (int i = 0; i < commands.length; i++) {
                commands[i] = io.readSpecificLine(FILES.controlsFileFinalDir,
                        i + 1);
} 
```

如果我让它打印出每个值，它确实有效。我试过制作阵列`final`，但没有奏效。大约 2 年前，我曾经遇到过该解决方案，但我再也找不到它了。有人对如何解决这个问题有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T16:54:52.123

正如编译器所说，case 表达式必须是常量表达式。您不能将数组元素用作 case 表达式。您可以简单地使用`if`//子句`else if`。`else`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:00:35.673

您不能在`case`语句中使用非常量表达式。另一种方法是构建从值到操作的映射。所以代替这个（这对我来说实际上没有任何意义）：

```
switch (key) {
case Integer.parseInt(commands[1]):
    // action 1
    break;
// other cases...
default: 
    // default action
} 
```

你可以这样做：

```
static Map<Integer, Runnable> keyMap = new HashMap<Integer, Runnable>();
static {
    keyMap.put(83, new Runnable() {
        @Override
        public void run() {
            // actions for code 83
        }
    });
    . . .
} 
```

（如果它更有意义，这也可以在每个实例的基础上完成，而不是作为静态地图。）然后：

```
Runnable action = keyMap.get(Integer.parseInt(commands[1]));
if (action != null) {
    action.run();
} else {
    // default action
} 
```

如果您需要将变量传递给您的操作，您可以定义自己的接口而不是使用`Runnable`操作。

# java - 实施类似推的技术

> ID：14112251
> 
> 赞同：3
> 
> 时间：2013-01-01T16:50:12.447
> 
> 标签：java, android, client-server

我希望能够在我的应用程序和服务器之间交换数据，每一方都必须能够启动数据发送。我希望它快速发生，并且在我的情况下，从客户端轮询新消息的速度不够快。推动技术如何运作？

我正在考虑保持从设备到服务器的打开套接字连接，并以某种自定义格式发送接收原始字节。这是一个好方法吗？我可能会遇到什么问题？你会建议什么作为替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:08:26.343

Push 技术被粗略地称为 Comet。基本逻辑是打开与服务器的持久 HTTP 连接（通常称为 HTTP 流式传输）。由于此连接不会永远持续（由于默认情况下服务器的限制），您应该能够重新打开连接。我不确定如何在 android 中具体执行此操作，但这应该是可能的。

[这篇博](http://deepusnath.ning.com/profiles/blogs/comet-a-server-side-push-ajax-explained)文解释了这背后的基本概念

由于这是一个概念，它可以用您选择的任何服务器端编程语言来实现。本[教程](http://www.zeitoun.net/articles/comet_and_php/start)公平地介绍了如何在 php 中实现 COMET。如果您熟悉 javascript，[socket.io是另一个这样的库。](http://socket.io)这个 SOF[线程](https://stackoverflow.com/questions/824604/online-tutorials-for-implementing-comets-server-push)提供了一些有用的链接。

说到优点和缺点，

1.  如果您想要几乎即时更新，COMET 是最好的。
2.  如果您对一次与服务器的连接数有限制，则可能必须根据权衡来考虑 COMET。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:13:39.283

在消息传递方面，初始化服务器和客户端之间的新连接所需的时间通常远远超过发送数据本身所需的时间——至少对于简单的类似状态的消息而言。这显着增加了通信延迟，这似乎是您主要关心的问题。

有两种主要的方法来处理这个问题：

*   *始终保持两端之间的连接打开：*这是处理此问题的标准方法 - 它具有编程简单的优点，*但*您可能需要定期使用保持活动数据包以保持连接打开。这可能会降低移动设备的电池寿命并略微增加网络成本。它还可能与移动设备的电源管理功能进行不利的交互。

    此外，无论您做什么，都无法*完全*消除需要在不方便的时间建立新连接的可能性——大部分空闲的连接在当今的网络基础设施中表现不佳，恐怕......

*   *使用无连接协议，例如 UDP：*此解决方案有可能最大限度地减少通信和电力成本，*但*它要求您的服务器和客户端旨在处理此类协议固有的不可靠性。

也就是说，我不会认为数据的实际格式是一个主要问题，直到一些分析表明自定义格式确实会带来显着的节省。我认为在开发阶段使用现成的网络监控和分析软件的能力更为重要......

# indexeddb - 移动 Safari 上的 IndexedDB 使用 IndexedDBShim polyfill

> ID：14112257
> 
> 赞同：1
> 
> 时间：2013-01-01T16:50:47.077
> 
> 标签：indexeddb

[有没有人在使用polyfill](http://nparashuram.com/IndexedDBShim/)的 iOS 设备上运行将在 Safari 中使用 Indexed DB API 的生产项目的经验？

可以预料到哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T20:32:56.597

它可以工作，但目前有一些限制，更新或删除在索引上打开的游标还不能工作，但它很快就会工作！索引未定义的问题已在几分钟前修复。某些方法当前不支持 IDBKeyRanges（如 idbobjectstore.get 和 idbobjectstore.delete），但在传递原始值时可以工作。传递原始值也适用于本机 indexedDB，因此在大多数情况下您可以使用它。

我们现在正在我们的项目中使用它，它确实工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T05:08:18.690

是的，我们正在进行 indexeddb 使用的分析和可行性测试，我们正面临这样的问题 [Safari 在 indexeddb polyfill 上显示未定义的索引列。如何在 safari 中使用索引检索数据](https://stackoverflow.com/questions/20629010/safari-shows-indexed-column-undefined-on-indexeddb-polyfill)

没有索引很难使用 indexeddb，即使使用 polyfill，safari 也不支持索引键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T15:57:11.057

我们在 iOS、Android 和 Chrome 上使用 IndexedDb 和那个 polyfill。我们过去遇到过一些问题，但我们几乎解决了所有问题。polyfill 的所有者不是很活跃，但他以管理员身份撰写了我的一位同事。留意[他的叉子](https://github.com/DickvdBrink/IndexedDBShim)，他很快就会合并一些修复。前几天我什至听到他谈论索引。

PS：更改可能在自定义分支中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T17:10:09.277

目前，对象存储中的多个键不起作用。检查 onupgradeneeded 事件。有时它不会在您期望的时候抛出。objectStoreNames 方法由 objectStoreNames._items 替换。还有一些我不记得的限制/更改。请务必一次又一次地测试您的应用程序。这并不容易。检查存储库以获取最新更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-18T06:55:20.337

试试我的图书馆[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)。它支持所有，我的意思是你能想到的任何东西。

# python - 使用 sqlalchemy (ORM) 进行外部连接

> ID：14112259
> 
> 赞同：1
> 
> 时间：2013-01-01T16:51:04.543
> 
> 标签：python, sql, orm, sqlalchemy

我正在尝试`relationship()`使用 OUTER JOIN 进行操作，以便在有什么要加入的情况下加入第二个表。我目前被困在如何做到这一点上，我似乎无法找出正确的组合`options()`,`relationship()`和`outerjoin()`.

我有以下表格，如果存在具有应用程序 ID 和艺术家 ID（由函数提供）的行，我正在尝试将 AppLike 加入应用程序

很高兴提供任何其他信息，我已经有一个连接工作，如下所示，但总会有一行与那个匹配。

```
from sqlalchemy import Column
from . import Base
from . import DBSession
from sqlalchemy.dialects.mysql import (
    INTEGER,
    VARCHAR,
    TEXT,
    TINYINT,
    )
from sqlalchemy.sql import and_
from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship, joinedload
import time

# 0 = new
# 1 = Denied
# 2 = Accepted
def getNewApplications(artistID):
    query =  DBSession.query(Application).\
        options(joinedload('pieces')).\
        options(joinedload('vote')).\
        filter(AppLike.artist_id==artistID).\
        filter(Application.approved==0)
        #join(AppPiece, Application.app_id==AppPiece.app_id).\

        #outerjoin(AppLike, and_(Application.app_id==AppLike.app_id,
        #    AppLike.artist_id==artistID)).\

    import pdb; pdb.set_trace()
    return query.all()    

class Application(Base):
    """ The SQLAlchemy declarative model class for a FileFavorite object. """
    __tablename__ = 'applications'
    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    app_id = Column(INTEGER(11), autoincrement=True, primary_key=True, nullable=False)
    name = Column(VARCHAR(64), nullable=False)
    nickname = Column(VARCHAR(64), nullable=False)
    email = Column(VARCHAR(255), nullable=False)
    description = Column(TEXT(), nullable=False)
    profile_link = Column(VARCHAR(128), nullable=False)
    location = Column(VARCHAR(64), nullable=False)
    approved = Column(TINYINT(4), nullable=False)
    pieces = relationship("AppPiece", lazy='joined')
    vote = relationship("AppLike", lazy='joined')

    def __init__(self, name, nickname, email, desc, profileLink,
                 location, approved):
        self.name = name
        self.nickname = nickname
        self.email = email
        self.description = desc
        self.profile_link = profileLink
        self.location = location
        self.approved = approved

class AppPiece(Base):
    """ The SQLAlchemy declarative model class for a FileFavorite object. """
    __tablename__ = 'app_pieces'
    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    app_piece_id = Column(INTEGER(11), autoincrement=True, primary_key=True, nullable=False)
    app_id = Column(INTEGER(11), ForeignKey('applications.app_id'))
    link = Column(VARCHAR(128), nullable=False)

    def __init__(self, appID, link):
        self.app_id = appID
        self.link = link

class AppLike(Base):
    """ The SQLAlchemy declarative model class for a FileFavorite object. """
    __tablename__ = 'app_likes'
    __table_args__ = {
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    }

    app_id = Column(INTEGER(11), ForeignKey('applications.app_id'))
    artist_id = Column(INTEGER(11), primary_key=True, nullable=False)
    vote = Column(TINYINT(4), nullable=False)

    def __init__(self, appID, artistID, vote):
        self.app_id = appID
        self.artist_id = artistID
        self.vote = vote 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:51:25.390

你绝对不需要`options(joinedload('pieces'))`，它已经在你的模型（`lazy='joined'`）中定义了。连接条件是这里比较棘手的部分，需要使用子查询来完成，因为我们也想在那里进行过滤。所以，最终的查询应该是这样的：

```
# We do the filtering on AppLike in the subquery and later join
# Application to it.
applike_subq = DBSession.query(AppLike).\
    filter(AppLike.artist_id == artistID).subquery()
query = DBSession.query(Application).\
    outerjoin(applike_subq, Application.vote).\
    filter(Application.approved == 0).all() 
```

# jenkins - 在不占用工人的情况下触发工作

> ID：14112276
> 
> 赞同：0
> 
> 时间：2013-01-01T16:52:38.663
> 
> 标签：jenkins, jenkins-plugins

我们将测试作业设计为某种“抽象”测试作业，这些作业根据一组参数运行。这些作业被触发使用“运行器”作业，只需使用正确的参数（主要由矩阵作业生成）触发它们。

当我们运行多个“跑步者”时，他们所做的只是简单地触发抽象作业，它们占用了急需的工人（特别是当它是一个矩阵作业时，会创建多个临时的“跑步者”作业）。

有没有办法告诉詹金斯不要把一个工人花在只触发其他工作的工作上，或者在同一个工人内触发工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:54:00.970

我希望我的构建等到触发作业完成，用于报告等目的（由于它们的抽象性质，我不希望触发作业中的逻辑）。

我决定做什么，因为触发作业非常轻量级，所以我将它们全部限制在 master 上。我分配了大量的工人给主人，因为他们不会做太多的工作，他们只会管理其他工作的触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:50:09.117

这取决于您使用什么来触发作业

如果您**在其他项目操作上使用触发/调用构建**，它可以选择**阻止直到触发的项目完成其构建**。如果选中，触发的父作业将继续运行并等待触发的作业完成（因此占用至少 2 个执行器）。但是，如果您不选中它，它将启动触发的作业，并且触发的作业将很快结束。

# javascript - 缩放滚动页面

> ID：14112277
> 
> 赞同：1
> 
> 时间：2013-01-01T16:52:41.640
> 
> 标签：javascript, three.js, dom-events

放大 html 页面时遇到问题：我正在使用 threejs 库来实现缩放功能；但是，当我放大页面时，缩放会滚动页面；有一种方法可以在我缩放时禁用页面滚动：这是我的代码：

```
function onDocumentMouseWheel(event) {
    if (ZoomOut && event.wheelDeltaY<0) {
        camera.fov -= event.wheelDeltaY * 0.05;
        if(camera.fov<-1 || camera.fov>180){
            //alert(camera.fov);
            camera.fov=50;
        }
        camera.updateProjectionMatrix();
    }

    if (ZoomIn && event.wheelDeltaY>0) {
        camera.fov -= event.wheelDeltaY * 0.05;
        if(camera.fov<-1 || camera.fov>180){
            //alert(camera.fov);
            camera.fov=50;
        }
        camera.updateProjectionMatrix();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:44:32.587

这很可能可以通过 CSS 设置来解决。

```
body {
    overflow: hidden;
} 
```

# networking - Windows 7 中的多个以太网网络配置文件

> ID：14112278
> 
> 赞同：2
> 
> 时间：2013-01-01T16:52:58.567
> 
> 标签：networking, windows-7, profile, lan

我有一个带有静态 IP 地址的大学局域网连接和一个带有动态 DHCP 工作的家庭互联网连接（有线）。我需要经常更改本地连接属性中的 tcp/ip v4 设置。

有没有办法让我拥有 2 个用于有线连接的网络配置文件——一个用于大学，一个用于家庭，这样我就可以简单地选择要使用的一个。

实际上，我希望能够使用此功能最终编写一个批处理文件，该批处理文件会自动检测我的代理设置并设置系统代理设置，这样每次切换配置文件时也不必更改浏览器设置。我能够使用 bash 脚本在 ubuntu 中完成此操作。我想在 Windows 中做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:08:53.020

您是否查看过 Windows 中可用的[备用 IP 地址配置](http://windowstipoftheday.blogspot.com/2011/03/windows-7-alternate-ip-address.html)

# cmake - cmake 解析错误：无效的转义序列 \o

> ID：14112279
> 
> 赞同：3
> 
> 时间：2013-01-01T16:53:12.603
> 
> 标签：cmake

我有很多类似的错误警报信息，例如这种类型：

```
 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
    Syntax error in cmake code at

      C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

    when parsing string

      Header Files\\ogr\ogrsf_frmts

    Invalid escape sequence \o 
```

该文件`C:/yumen/wxgisgdal-read-only/cmake/common.cmake`是这样的：

```
#add data
 macro(add_files_macro FPATH FGROUP)
     file(GLOB GDAL_AHHEADERS ${FPATH}/*.h  ${FPATH}/*.hpp)
     set(GDAL_HHEADERS ${GDAL_HHEADERS} ${GDAL_AHHEADERS})
     source_group("Header Files\\${FGROUP}" FILES ${GDAL_AHHEADERS})
     file(GLOB GDAL_ACSOURCES ${FPATH}/*.cpp ${FPATH}/*.cc ${FPATH}/*.c)
     set(GDAL_CSOURCES ${GDAL_CSOURCES} ${GDAL_ACSOURCES})
     source_group("Source Files\\${FGROUP}" FILES ${GDAL_ACSOURCES})
 endmacro() 
```

以下是 CMake 错误信息：

```
gdal version=[1.9.0]
 GDAL lib name ... wxgisgdal19
 c++ compiler ... cl
 CMake Error at CMakeLists.txt:92 (option):
   option called with incorrect number of arguments: BUILD_RELEASE_DEBUG_DIRS
   Set OFF to build each co# uninstall target

   configure_file(

        C:/yumen/wxgisgdal-read-only/cmake_uninstall.cmake.in 
        C:/yumen/wxgisgdal-read-only/build/cmake_uninstall.cmake 
       IMMEDIATE @ONLY)nfiguration to a separate directory ON 

 Found GEOS: C:/geos-3.2.3/lib/geosd.lib
 Found Proj: C:/PROJ/lib/proj.lib
 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:121 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:121 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\generic

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:122 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\generic

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:122 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\mem

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:125 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\mem

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:125 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\vrt

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:130 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\vrt

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:130 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\csv

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:135 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\csv

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:135 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\dxf

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:140 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\dxf

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:140 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\shp

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:145 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\shp

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:145 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 Found PostgreSQL: C:/pgsql/lib
 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\pg

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:158 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\pg

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:158 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\gml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:163 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\gml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:163 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\mitab

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:168 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\mitab

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:168 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 Found LIBKML: C:\Users\Public\libkml-read-only\msvc\Debug
 Found LIBKML Headers: C:/Users/Public/libkml-read-only/src
 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\libkml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:184 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\libkml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:184 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\kml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:187 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\kml

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:187 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\geojson

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:193 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\geojson

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:193 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:5 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:5

   when parsing string

     Header Files\\ogr\ogrsf_frmts\geojson\jsonc

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:195 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 CMake Warning (dev) at cmake/common.cmake:8 (source_group):
   Syntax error in cmake code at

     C:/yumen/wxgisgdal-read-only/cmake/common.cmake:8

   when parsing string

     Source Files\\ogr\ogrsf_frmts\geojson\jsonc

   Invalid escape sequence \o

   Policy CMP0010 is not set: Bad variable reference syntax is an error.  Run
   "cmake --help-policy CMP0010" for policy details.  Use the cmake_policy
   command to set the policy and suppress this warning.
 Call Stack (most recent call first):
   cmake/ogr.cmake:195 (add_files_macro)
   CMakeLists.txt:135 (include)
 This warning is for project developers.  Use -Wno-dev to suppress it.

 Found JPEG: C:/GnuWin32/lib/jpeg.lib 
 Configuring incomplete, errors occurred! 
```

一个人告诉我，我应该添加这样的东西：

需要像这样`Header Files\\ogr\ogrsf_frmts`添加终止符`'\'`：

```
"Header Files\\ogr\\ogrsf_frmts" 
```

但是当我粘贴`common.cmake`文件内容第 5 行时：

```
source_group("Header Files\\${FGROUP}" FILES ${GDAL_AHHEADERS}) 
```

头文件后的字符串被`FGROUP`宏替换，可能由CMake自动生成，所以我不能编辑它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T18:39:45.680

The error is happening because the contents of the variable `${FGROUP}` contain paths with Windows-style separators. These are treated by CMake as escape characters.

You should change your [`macro`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3amacro) to a [`function`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afunction) to avoid this. From the docs for `macro`:

> Note that the parameters to a macro and values such as `ARGN` are not variables in the usual CMake sense. They are string replacements much like the c preprocessor would do with a macro. If you want true CMake variables you should look at the `function` command.

# mysql - MySQL如何从分区中选择行

> ID：14112283
> 
> 赞同：11
> 
> 时间：2013-01-01T16:53:51.323
> 
> 标签：mysql, sql, partitioning, database-partitioning, mysql-5.1

我对我的 300MB 表进行了分区，并尝试`p0`使用此命令从分区中进行选择查询

```
SELECT * FROM employees PARTITION (p0); 
```

但我收到以下错误

```
ERROR 1064 (42000): You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use near '(p0)' at line 1 
```

如何编写选择查询以从特定分区获取数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-06-06T02:52:13.650

实际上，从 MySQL 5.6 开始，支持的语法是：

```
SELECT * FROM table PARTITION (partitionName); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-01T17:02:40.940

根据您的 MySql 版本，关键字在[MySQL 5.6.2](http://dev.mysql.com/doc/refman/5.6/en/partitioning-selection.html)`PARTITION`之前不存在。您将使用 MySQL 5.5 甚至 5.1，但不是 5.6。如果您正在使用，那么您可以执行一些解决方法，如下所示`MySQL 5.1`

```
SELECT partition, count(ID)
FROM
(
    SELECT ID,
      case when condition then p1
           when condition then p2
      .....
      end as partition

    FROM
      table
) s1
GROUP BY partition 
```

**注意：**上述解决方案只是让您获得所需输出的解决方法。

您也可以尝试使用此查询来计算分区的总行数。

```
SELECT table_rows as 'count(*)' FROM information_schema.partitions WHERE table_schema = schema() and table_name ='employees' and partition_name = 'p0'; 
```

**注意：**您可以更改`table_schema = schema()`为`table_schema = 'yourschema'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:02:10.300

没错，5.1.54 版本不支持显式选择 PARTITION。看到[这个](https://dba.stackexchange.com/questions/23138/unable-to-select-the-records-from-specific-partition-in-mysql)帖子

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-06T10:52:56.573

的正确形式`query`如下，对我来说很好。

```
select * from employees partition (`p0`); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T17:09:00.947

当前版本的 MYSQL 不支持它。

在 DBA 上检查这个[问题](https://dba.stackexchange.com/questions/23138/unable-to-select-the-records-from-specific-partition-in-mysql)。您还可以查看 MYSQL 开发[文章](http://bugs.mysql.com/bug.php?id=20279)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-08T06:39:59.497

从分区中选择* `invoice_detail`（p1）；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-22T20:25:44.390

我正在拔头发然后意识到我的错误

```
select * from user_info as ui PARTITION (`p0`) 
```

该查询失败，因为必须在分区列表之后指定别名

```
 select * from user_info PARTITION (`p0`) as ui 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-02-08T08:20:48.450

我认为值得向可能偶然发现此页面的其他人指出，300MB 的表不需要分区。

对于任何现代（甚至不是那么现代）的数据库来说，300MB 的数据量都是微不足道的，因此，如果您将数据留在一个分区的一个数据库中的一个表中，一切都会更好。

# iphone - 整个应用程序中的单个动画 UIImageView 背景

> ID：14112296
> 
> 赞同：3
> 
> 时间：2013-01-01T16:56:01.690
> 
> 标签：iphone, ios, ios6

我一直在阅读我能在这里找到的关于这个主题的所有内容，但仍然不确定最好的方法。我有一个`UIImageView`使用一系列脂肪`UIImages`作为动画循环的重物。这`UIImageView`是应用程序中每个屏幕的背景。（客户的要求，不是我的，所以不要讨厌。）我们已将 png 文件优化得尽可能小，但它仍然是一个相当大的负载。

我已经阅读了几篇关于如何`UIImage`在缓存中搜索该名称的现有图像的文章（例如[，在整个应用程序中共享 UIImageView 以获取背景图像 - Singleton Property](https://stackoverflow.com/questions/4122726/shared-uiimageview-for-background-image-throughout-app-singleton-property)），但这似乎没有发生。我也一直在这里阅读有关单例和在 appdelegate 中实例化的信息，但我不确定其中任何一个是否是正确的继续方式。

在应用程序的整个生命周期中加载`UIImageView`一次并在每个视图控制器的后台使用它的最佳方法是什么？顺便说一句，因为加载需要几秒钟，我将在应用程序启动时添加一个“加载”页面，该页面使用单个静态图像和一个活动指示器。

另外，我对测试和性能工具不太熟悉。我应该使用哪一个来测试性能并确保这是导致整个应用程序犹豫不决的原因？

提前为菜鸟问题道歉——我通常完全避免提问，但有时，在这种情况下，我什至不知道从哪里开始研究。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:27:50.163

我对自己比较满意。我使用了 AppDelegate 技术，它运行良好。我在 AppDelegate 中声明了一个 UIImageView 属性，然后将图像代码添加到它的 getter：

```
- (UIImageView *)backgroundImageView {
    if (!_backgroundImageView) {
        NSMutableArray *tempArray = [NSMutableArray arrayWithCapacity:150];
        for (int imageNum = 0; imageNum < 150; imageNum++) {
            [tempArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"image_00%03i.png",imageNum]]];
        }
        _backgroundImageView = [[UIImageView alloc] initWithImage:[UIImage animatedImageWithImages:tempArray duration:4.0]];
    }
    return _backgroundImageView;
} 
```

这也允许我杀死 applicationDidReceiveMemoryWarning 中的对象。

然后我创建了一个帮助类，我可以将它弹出到我所有的 UIViewController 类中：

```
+ (void)placeBackgroundImageUnderView:(UIView *)masterView {
    myAppDelegate *appDelegate = (myAppDelegate *)[[UIApplication sharedApplication] delegate];
    //Correct for shrinkage
    appDelegate.backgroundImageView.frame = masterView.frame;
    [masterView addSubview:appDelegate.backgroundImageView];
    [masterView sendSubviewToBack:appDelegate.backgroundImageView];
} 
```

这允许我在每个 viewDidLoad 方法中添加一行：

```
[HelperClass placeBackgroundImageUnderView:self.view]; 
```

问题是，仅使用 UIImage 就应该缓存整个内容并加快加载时间。但似乎不时需要重新加载图像 - 内存问题？因此，这允许我通过实例化对象一次并使用同一个对象来更好地控制它，同时还可以将该对象设置为 nil 以在需要时释放内存。

自从添加它以来，整个应用程序的加载速度要快得多。我添加了一个额外的加载屏幕，其中包含一个用于初始加载的活动指示器（也可以很好地工作），之后的一切都是即时的。

# css - Phonegap，480x720、480x800 和 480x854 的 css 样式问题

> ID：14112297
> 
> 赞同：1
> 
> 时间：2013-01-01T16:56:10.220
> 
> 标签：css, cordova, screen-size

我已经工作了几天来解决 Phonegap 的 CSS 问题。

我有一个显示地图的应用程序和一些控制按钮。我需要设置地图大小，以便为按钮留出空间。

它适用于大多数屏幕分辨率，但对于 480x720、480x800 和 480x854，它不适用于三种不同风格的我。我在这里看到过其他有问题的人，但仍然有问题。三种屏幕分辨率选择相同的风格。

例如，这适用于 480x720：

> @media screen and (min-device-width: 455px) and (max-device-width : 720px) and (orientation: portrait){ /* Styles */ }
> 
> 块引用

但随后 480x800 选择相同的样式。如果我再为 480x800 创建一个新样式：

> @media only screen and (min-device-width : 480px) and (orientation: portrait){ /* Styles*/ }

然后它适用于 480x800，但 480x720 也使用它。

我尝试了很多不同的东西，最小设备宽度、最大设备宽度等。我也不知道为什么 (min-device-width: 455px) 适用于 480x720（在[这里](https://stackoverflow.com/questions/6047884/media-queries-not-behaving-as-expected-on-android/14111600#14111600)找到）

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:14:59.673

这只是我的想法，但我相信你需要做这样的事情：

```
@media screen and (max-device-width: 480px) and (max-device-height: 720px) and (orientation: portrait)
@media screen and (max-device-width: 480px) and (max-device-height: 800px) and (orientation: portrait)
@media screen and (max-device-width: 480px) and (max-device-height: 854px) and (orientation: portrait) 
```

为每个屏幕分辨率提供正确的样式。

# sql - 在设计不会接收更新的表时我应该注意哪些性能注意事项

> ID：14112301
> 
> 赞同：0
> 
> 时间：2013-01-01T16:56:19.253
> 
> 标签：sql, database-design

我们的数据库中有一个包含几十行的表。唯一适用于表的 DML 是：

1.**插入**- 由于在另一个表上执行触发器而插入行。

2.**删除**- 一个计划的过程正在将请求的记录加载到临时表，处理这些记录，然后从特定表中删除它们（还有一个 SELECT 从表中，以便在每次过程运行时填充临时表） .

我们已经使用 PK 构建了表，当我们运行删除时，该表将使用 PK 列的 ID 逐行删除。

只是为了澄清，我们在桌子上没有任何**更新操作。**

创建这样的表（没有更新）时是否有任何具体的指导方针或建议？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:05:04.247

您不打算更新的表没有什么特别之处。

如果出于安全原因需要，您可以拒绝每个人的更新权限，因为您实际上只想允许插入、删除和选择，但设计没有什么特别之处，也没有强迫您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:54:44.500

您可以在另一个模式中创建此表，并在不授予更新的情况下授予您的模式选择、插入、删除，因此任何从当前模式执行更新状态的尝试都不会执行。

这是一个例子：

```
connect system/manager

grant connect, resource to user1 identified by user1; 

grant connect, resource to user2 identified by user2;

disconnect

connect user1/user1

create table user1.table1(col1 number, col1_desc varchar2(16));

grant select, insert, delete on user1.table1 to user2;

disconnect

conn user2/user2

select * from user1.table1

insert into user1.table1 values (1, 'insert-user2');

commit;

insert into user1.table1 values (2, 'insert-user2');

commit;

delete from user1.table1 t where t.col1 = 2;

commit;

update user1.table1 t set t.col1_desc = 'ins-user2' where t.col1 = 1;

commit;

-- last update statement will throw ORA-01031: insufficient privileges 
```

注意：您可以使用 user1.table1 的同义词直接从 user2 使用 table1 表名

问候，

# c# - 事件订阅的性能注意事项

> ID：14112305
> 
> 赞同：2
> 
> 时间：2013-01-01T16:56:30.000
> 
> 标签：c#, performance, events, observer-pattern

考虑这段代码：

```
class GameEventsManager
{
    public void StartGameEvent(GameEvent TheGameEvent)
    {       
        SubscribeToGameEvent(TheGameEvent);
        TheGameEvent.Begin();
        UnsubscribeToGameEvent(TheGameEvent);
    }

    private void SubscribeToGameEvent(GameEvent TheGameEvent)
    {
        TheGameEvent.OnPlaySound += OnPlaySound;
        TheGameEvent.OnShowWrittenItem += OnShowWrittenItem;
            ...
    }

    private void UnsubscribeToGameEvent(GameEvent TheGameEvent)
    {
        TheGameEvent.OnPlaySound -= OnPlaySound;
        TheGameEvent.OnShowWrittenItem -= OnShowWrittenItem;
            ...
    }
} 
```

GameEvent 是一个基本上执行此操作的类：当 Begin() 被调用时，它会引发传递给 GameEventManager 的事件，以便它可以“做出”对游戏环境的适当更改（这是通过进一步将事件传播到负责执行每个特定指令的对象，如观察者模式中的对象）。

现在考虑到我所有的 InventoryItem（可以触发事件，例如 OnConsume、OnUse）都是其特定类中的静态字段。虽然这看起来有点粗糙，但我觉得能够做到：

```
AddItem(WrittenItems.NoteFromKing) //NoteFromKing is a static field in WrittenItems 
```

让事情变得更简单，考虑到我正在开发一款非常复杂的游戏，这是一个受欢迎的景象。

然而，这让我很难在某处列出所有游戏项目，以防万一。这让我们想到了我的问题：

LevelManager 管理诸如玩家何时与关卡中的特定项目交互等事情，如果需要，它会告诉 GameEventsManager 运行特定的 GameEvent。GameEventsManager 然后订阅 GameEvent，启动它，然后取消订阅。在遵循此订阅/运行/取消订阅模式时，我是否应该期望看到明显的性能问题？最后，经理可能会订阅/取消订阅 GameEvent 中的大约 20 个事件。

如果订阅/取消订阅机制很慢，我可以创建一个在游戏初始化时运行的订阅过程，但这会迫使我构建一个额外的结构，以列出所有项目。

所以，简而言之，我想知道我是否应该期待这种实施会出现相当大的放缓。或者更准确地说，如果订阅大约 20 个事件，然后取消订阅它们会相当慢。

语言为 C#，使用 Unity 4 下的 .NET 2.0 子集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:14:29.330

> 然而，这让我很难在某处列出所有游戏项目

为什么这样？您可以创建一个 ItemManager （这是一个单例）：

```
public class ItemManager
{
    private static volatile ItemManager _instance;
    private static object syncRoot = new Object();

    private ObservableCollection<ItemBase> _registeredItems = new ObservableCollection<ItemBase>();
    private ItemManager()
    {
    }

    public ItemManager Instance
    {
        get
        {
             if (instance == null) 
             {
                 lock (syncRoot) 
                 {
                     if (instance == null) 
                         instance = new ItemManager();
                 }
             } 
             return instance;
        }
    }

    public void RegisterItem(ItemBase item)
    {
        _registeredItems.Add(item);
        // Do some stuff here, subscribe events, etc.
    }

    public void UnregisterItem(item)
    {
        // Do some stuff here, unregister events, etc.
        _registeredItems.Remove(item)
    }

} 
```

之后，您使所有项目类派生自一个名为“ItemBase”的类。在 ItemBases 构造函数中，你称之为：

```
ItemManager.Instance.RegisterItem(this); 
```

因此，您不必手动添加每个项目。有关单例模式的更多信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx)。

这样做的一个小好处是，您可以实现 GameManager 和 ItemManager 之间的一般通信。

# shell - Shell+java错误

> ID：14112306
> 
> 赞同：0
> 
> 时间：2013-01-01T16:56:30.767
> 
> 标签：shell, java, sh

我想在 Sentrick 的 modules/editor/scripts 下运行 editor.sh 或 snippetCollector.sh。所以我得到了它`git clone git://sentrick.git.sourceforge.net/gitroot/sentrick/sentrick`。那不是问题。我阅读了 doc 文件夹下的文档。它说运行 editor.sh 或 snippetCollector.sh。我去，我做： `./editor.sh`它不起作用。所以我在网上看到你也可以使用`sh editor.sh`它也不起作用。它说

```
Exception in thread "main" java.lang.NoClassDefFoundError: de/denkselbst/sentrick/sbeditor/SbEditor
Caused by: java.lang.ClassNotFoundException: de.denkselbst.sentrick.sbeditor.SbEditor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: de.denkselbst.sentrick.sbeditor.SbEditor.  Program will exit. 
```

我没有编辑任何东西，所以我认为它应该可以工作，但它没有！

在里面`editor.sh`（我想运行但不能运行的那个）它只说：

```
java -cp @CP.UNIX@ de.denkselbst.sentrick.sbeditor.SbEditor 
```

snippetCollector.sh 的问题是一样的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:58:39.003

`-cp`正在配置 CLASSPATH，它应该包含对包含您的类的目录的引用。我怀疑没有正确设置，[这](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)是设置它的有用参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:08:53.927

您似乎在运行代码时丢失了一些类文件。请检查您是否遵循文档中提到的所有步骤。确保设置 CLASSPATH 并尝试重新运行程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:17:40.127

很明显，您遇到了类路径问题。Normaly 当我在 linux 环境中运行应用程序时，我的 sh 看起来像下面这样。

```
#!/bin/sh

THE_CLASSPATH=/home/pathto/lib

java -cp ${THE_CLASSPATH}/required.jar de.denkselbst.sentrick.sbeditor.SbEditor 
```

# c - && 运算符在两个字符串之间时会做什么？

> ID：14112308
> 
> 赞同：1
> 
> 时间：2013-01-01T16:56:55.227
> 
> 标签：c, syntax, boolean-logic, and-operator

在下面的代码中，语句`str1[i] && str2[i];`和具体`count1[str1[i]]++;`做什么？

```
char str1[4]="rate";
char str2[4]="tear";

int count1[256] ;
int count2[256] ;

int i=0;

for (i = 0; str1[i] && str2[i];  i++)
{
   count1[str1[i]]++;//count1['g']++what does that mean ?
   count2[str2[i]]++;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T16:59:19.267

```
for (i = 0; str1[i] && str2[i];  i++) 
```

是相同的

```
for (i = 0; (str1[i] != 0) && (str2[i] != 0);  i++) 
```

这与

```
for (i = 0; (str1[i] != '\0') && (str2[i] != '\0';  i++) 
```

基本上，如果在条件语句中使用了任何表达式，则检查该值是否为布尔值 - 真或假。如果它不是布尔值 - 说它是一个整数类型，那么 0 就是`false`其他任何东西`true`。

这`str[i]`是一个`char`- 它是一个整数类型。因此，如果 str[i] 为 0，则它的计算结果为 false，否则它的计算结果为 true。

例如。

```
char c = 'A';

if(c) 
```

是相同的

```
if (c != 0) 
```

这与

```
if (c != '\0') 
```

c 是“A”（在 ascii 中是 65）。65 != 0，因此它的计算结果为 true 并且`if`将被输入。

如果相反，你有

```
char c = 0; 
```

或者

```
char c = '\0'; 
```

然后 c 评估为 0。因此 if(c) 评估为 false 并且未输入 if。

您可以将相同的逻辑扩展到 str[i] ，它是一个`char`.

如果有`str1[]="rate"`，则与 相同 `str1[0] = 'r', str1[1] = 'a', str1[2] = 't', str1[3] = 'e', str1[4] = 0`。

有关`count1[str1[i]]++;`

这是每个字符出现次数的计数 - 例如。如果 char 集是 ascii，则在字符串遍历结束时，count['A']（与 count[65] 相同）将包含字符串中出现 'A' 的次数。

只有当计数数组的每个成员都初始化到`0`某个地方（或者它们是全局的）时，它才会起作用。

考虑

```
str1[] = "ABAB"; 
```

`count[str1[0]]`与`count['A']`which 相同`count[65]`（如果 char set 是 ascii）。

将`++`导致 count['A'] 变为 1

当`i`变为 1 时，`count[str1[1]]++`导致`count['B']`变为 1. `i`= 2，然后`count['A']`变为 2. `i`= 3，然后`count['B']`变为 2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:02:31.503

该算法同时计算两个字符串中每个 ascii 字符的出现次数。

```
str1[i] && str2[i] 
```

检查是否到达两个字符串的末尾。`count1[str1[i]]++`增加字符 str1[i] 的出现次数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T16:59:09.867

&& 适用于 2 个字符，而不是字符串。在这种情况下，它正在检查两个字符是否都不是空字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T17:01:55.180

`for (i = 0; str1[i] && str2[i]; i++)`
循环运行较小的字符串长度的次数。
因为 '\0' 的 ASCII 值为零 (0) ，str1[i] 或 str2[i] 零表示并且零和循环结束

# ubuntu - Pyglets Window.on_key_press 和 Window.on_key_release 受统一的 ubuntu 12.10 上的键重复影响

> ID：14112309
> 
> 赞同：3
> 
> 时间：2013-01-01T16:56:58.033
> 
> 标签：ubuntu, pyglet, ubuntu-unity

在[pyglet 的文档](http://www.pyglet.org/doc/programming_guide/keyboard_events.html)中指出

```
The Window.on_key_press and Window.on_key_release events are fired when
any key on the keyboard is pressed or released, respectively. These events 
are not affected by "key repeat" -- once a key is pressed there are no more
events for that key until it is released. 
```

然而，当 Unity 的键盘设置称为“按住键时重复按键”时，pyglet (1.2alpha1) 将在按键保持按下时重复 on_key_press 和 on_key_release。

可以通过以下脚本切换设置来测试这种意外行为：

```
import pyglet

window = pyglet.window.Window()

@window.event
def on_key_press(symbol, modifiers):
    print "key press"

@window.event
def on_key_release(symbol, modifiers):
    print "key release"

pyglet.app.run() 
```

有没有办法覆盖单个窗口的键重复？也欢迎任何其他解决方法。

此设置默认开启，游戏要求将其关闭是不愉快的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-09T17:47:26.730

一个简单的解决方法是：

```
pressed_keys = []

@window.event
def on_key_press(symbol, modifiers):
    if symbol in pressed_keys:
        return
    # handle pressed key
    pressed_keys.append(symbol)

@window.event
def on_key_release(symbol, modifiers):
    if symbol in pressed_keys:
        pressed_keys.remove(symbol) 
```

# javascript - 可以居中图像但不能在 IE7 中居中 div

> ID：14112310
> 
> 赞同：0
> 
> 时间：2013-01-01T16:57:05.037
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

我将元素垂直和水平居中。一切正常，除了一个问题：我可以`img`在 IE7 中垂直居中，但我不能居中`div`。什么风格的 IE 适用于图像而不适用于 div？

HTML

```
<!-- image - works correctly -->
<div class="container">
    <img class="inner" src="http://placekitten.com/200/200?image=2" />
</div>
<br/>
<!-- div - doesn't work (aligned to top) -->
<div class="container">
    <div class="inner">123</div>
</div> 
```

CSS：

```
.container {
  height: 300px;

    background: #EEE;
    text-align: center;
    line-height:  300px;
}

.inner { vertical-align: middle; width: 100px;
 height: 100px; background:red; display: inline-block; line-height: 1.3; }​ 
```

小提琴：

[http://jsfiddle.net/kpdxu/7/](http://jsfiddle.net/kpdxu/7/)

还：

*   我不知道 DIV 的大小
*   我可以使用 JavaScript，但我无法获得 DIV 的大小，因为它包含动态内容

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:07:49.470

使用这个`css`：

```
.container {
   height: 300px;
   background: #EEE;
   text-align: center;
   line-height:  300px;
   position:relative; //<--this will hold the absolute positioned elements
}

.inner { 
   vertical-align: middle; 
   width: auto;
   height: auto; 
   background:red; 
   display: block; // <--display block will do for ie 7
} 
```

通过jQuery：

```
$.fn.center = function () {
   this.css("position","absolute");
   this.css("top", ( $('.container').height() - this.height() ) / 2 + "px");
   this.css("left", ( $('.container').width() - this.width() ) / 2 + "px");
   return this;
} 
```

然后像这样使用它

```
$('.inner').each(function(){
   $(this).center();
}); 
```

但父母必须是`position relative`。

检查小提琴：http: [//jsfiddle.net/kpdxu/14/](http://jsfiddle.net/kpdxu/14/)

# javascript - 在动态加载的内容上使用 bootstrap .modal()

> ID：14112311
> 
> 赞同：4
> 
> 时间：2013-01-01T16:57:06.133
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我在这里有我的代码，它在正文的末尾插入了一个预定义的模态标记：

```
var languageModal = 
'<div id="lngModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="lngModalLabel" aria-hidden="true">'+
'   <div class="modal-body"></div>'+
'   <div class="modal-footer">'+
'       <form class="inline" id="lngModalForm">'+
'           <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">'+
'               <span lang="hu"'+((langAfterInit == 'hu') ? '' : ' style="display:none;"')+'>Bezárás</span>'+
'               <span lang="en"'+((langAfterInit != 'hu') ? ' style="display:none;"' : '')+'>Close</span>'+
'           </button>'+
'       </form>'+
'   </div>'+
'</div>';

$('body').append(languageModal); 
```

但是，当我调用`.modal()`它时，它不会加载，只出现黑色覆盖：

```
$('#lngModal').modal({
    backdrop    : 'static',
    keyboard    : false,
    remote      : '/language.html',
}); 
```

我试过了`.on('modal',{...})`，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:48:54.983

试试这个：

```
 $('body').append(languageModal,function(){
console.log('modal appended');
    $('#lngModal').modal({
                    backdrop    : 'static',
                    keyboard    : false,
                    remote      : '/language.html',
                }); 

console.log('modal init');
    }); 
```

代替

```
$('body').append(languageModal);
            $('#lngModal').modal({
                backdrop    : 'static',
                keyboard    : false,
                remote      : '/language.html',
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T21:14:44.713

您的代码确实有效。你在加载引导 css 吗？

[http://jsfiddle.net/xjCAN/](http://jsfiddle.net/xjCAn/)

我不能发布这个没有一些代码：

```
' Nothing, really 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T22:51:13.427

**经过@Badabooooooom**和@ **ic3b3rg**的大量帮助后，我不得不将脚本标记中的标签替换`.modal({... remote : '...', ..})`为标签，并且还必须删除from 。`data-remote="..."``.fade``#lngModal`

```
var languageModal =  '<div id="lngModal" class="modal hide"  data-remote="/language.html">'+
//other stuff

$('#lngModal').modal('show',{
    backdrop: true,
    keyboard: false,
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:24:04.273

我也有过一次，但只有当我想通过使用以下 css 来增加模态大小时：

```
var modal = $('#lngModal');
modal.css({
   width: '60%',
   left: '20%',
   margin: 'auto auto auto auto',
   top: '10%'
}); 
```

`max-height`我通过设置来修复它`modal-body`：

```
var modalBody = modal.children('.modal-body');

modalBody.css({
   maxHeight: '800px'
}); 
```

您是否更改了模态CSS？

# mysql - 带有审计表的数据更改历史记录：分组更改

> ID：14112314
> 
> 赞同：7
> 
> 时间：2013-01-01T16:57:17.260
> 
> 标签：mysql, triggers, audit-tables

假设我想将用户和组存储在 MySQL 数据库中。他们有一个关系n：m。为了跟踪所有更改，每个表都有一个审计表 user_journal、group_journal 和 user_group_journal。MySQL 触发器在每次 INSERT 或 UPDATE 时将当前记录复制到日志表（不支持删除，因为我需要应用程序用户删除记录的信息——所以有一个标志`active`将被设置为`0`而不是删除）。

我的问题/问题是：假设我一次将 10 个用户添加到一个组中。当我稍后在应用程序的用户界面中单击该组的历史记录时，我希望将这 10 个用户的添加视为**一个步骤**，而不是 10 个独立的步骤。**有没有很好的解决方案将这些更改组合在一起？**也许每次触发器被触发时都会增加一个计数器？我从未使用过触发器。

最好的解决方案是将事务中所做的所有更改放在一起。因此，当用户更新组的名称并一步添加 10 个用户（一个表单控制器调用）时，这将是历史记录中的一步。也许可以在每次启动事务时定义一个随机散列或增加一个全局计数器并在触发器中访问该值？

我不想让表格设计比为每个“真实”表格拥有一个日记帐表格更复杂。我不想在每个数据库表中添加事务哈希（意思是“真实”表，而不是审计表——当然可以）。我也想在数据库中有一个解决方案——而不是在应用程序中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T16:18:21.550

我玩了一下，现在我找到了一个很好的解决方案：

## 数据库设置

```
# First of all I create the database and the basic table:

DROP DATABASE `mytest`;
CREATE DATABASE `mytest`;
USE `mytest`;
CREATE TABLE `test` (
    `id` INT PRIMARY KEY AUTO_INCREMENT,
    `something` VARCHAR(255) NOT NULL
);

# Then I add an audit table to the database:

CREATE TABLE `audit_trail_test` (
    `_id` INT PRIMARY KEY AUTO_INCREMENT,
    `_revision_id` VARCHAR(255) NOT NULL,
    `id` INT NOT NULL,
    `something` VARCHAR(255) NOT NULL
);

# I added a field _revision_id to it. This is 
# the ID that groups together all changes a
# user made within a request of that web
# application (written in PHP). So we need a
# third table to store the time and the user
# that made the changes of that revision:

CREATE TABLE `audit_trail_revisions` (
    `id` INT PRIMARY KEY AUTO_INCREMENT,
    `user_id` INT NOT NULL,
    `time` DATETIME NOT NULL
);

# Now we need a procedure that creates a
# record in the revisions table each time an
# insert or update trigger will be called.

DELIMITER $$

CREATE PROCEDURE create_revision_record()
BEGIN
    IF @revision_id IS NULL THEN
        INSERT INTO `audit_trail_revisions`
            (user_id, `time`)
                VALUES
            (@user_id, @time);
        SET @revision_id = LAST_INSERT_ID();
    END IF;
END;

# It checks if a user defined variable
# @revision_id is set and if not it creates
# the row and stores the generated ID (auto
# increment) into that variable.
# 
# Next I wrote the two triggers:

CREATE TRIGGER `test_insert` AFTER INSERT ON `test` 
    FOR EACH ROW BEGIN
        CALL create_revision_record();
        INSERT INTO `audit_trail_test`
            (
                id,
                something,
                _revision_id
            ) 
        VALUES
            (
                NEW.id,
                NEW.something,
                @revision_id
            );
    END;
$$

CREATE TRIGGER `test_update` AFTER UPDATE ON `test` 
    FOR EACH ROW BEGIN
        CALL create_revision_record();
        INSERT INTO `audit_trail_test`
            (
                id,
                something,
                _revision_id
            ) 
        VALUES
            (
                NEW.id,
                NEW.something,
                @revision_id
            );
    END;
$$ 
```

## 应用程序代码 (PHP)

```
$iUserId = 42;

$Database = new \mysqli('localhost', 'root', 'root', 'mytest');

if (!$Database->query('SET @user_id = ' . $iUserId . ', @time = NOW()'))
    die($Database->error);
if (!$Database->query('INSERT INTO `test` VALUES (NULL, "foo")'))
    die($Database->error);
if (!$Database->query('UPDATE `test` SET `something` = "bar"'))
    die($Database->error);

// To simulate a second request we close the connection,
// sleep 2 seconds and create a second connection.
$Database->close();
sleep(2);
$Database = new \mysqli('localhost', 'root', 'root', 'mytest');

if (!$Database->query('SET @user_id = ' . $iUserId . ', @time = NOW()'))
    die($Database->error);
if (!$Database->query('UPDATE `test` SET `something` = "baz"'))
    die($Database->error); 
```

## 而且……结果

```
mysql> select * from test;
+----+-----------+
| id | something |
+----+-----------+
|  1 | baz       |
+----+-----------+
1 row in set (0.00 sec)

mysql> select * from audit_trail_test;
+-----+--------------+----+-----------+
| _id | _revision_id | id | something |
+-----+--------------+----+-----------+
|   1 | 1            |  1 | foo       |
|   2 | 1            |  1 | bar       |
|   3 | 2            |  1 | baz       |
+-----+--------------+----+-----------+
3 rows in set (0.00 sec)

mysql> select * from audit_trail_revisions;
+----+---------+---------------------+
| id | user_id | time                |
+----+---------+---------------------+
|  1 |      42 | 2013-02-03 17:13:20 |
|  2 |      42 | 2013-02-03 17:13:22 |
+----+---------+---------------------+
2 rows in set (0.00 sec) 
```

如果有我遗漏的地方，请告诉我。我必须`action`在审计表中添加一列才能记录删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:20:38.500

假设您将一批用户添加到一个组的速率小于每秒一次....

`added_timestamp`我建议简单地添加一个时间戳类型的列，名称类似于`user_group`and `user_group_journal`。 **不要将此设置为自动更新时间戳或将其默认设置为 CURRENT_TIMESTAMP**，而是在您的代码中，当您批量插入 user_group 时，计算当前日期和时间，然后为所有新的 user_group 记录手动设置它。

您可能需要调整设置以将要复制的新`user_group`记录的其余部分的字段添加到`user_group_journal`表中。

然后，当您可以创建在 a`group_id`和新`added_timestamp`列上分组的查询/视图时。

如果需要更高的保真度，那么 1 秒您可以使用字符串列并用更精细时间的字符串表示填充它（您需要生成您使用的语言允许的库）。

# html - 对实体“子集”的引用必须以“;”结尾 分隔符

> ID：14112318
> 
> 赞同：15
> 
> 时间：2013-01-01T16:57:26.963
> 
> 标签：html, xml, google-webfonts

我正在尝试在 Blogger 博客的模板中包含 webfonts：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:version='2' class='v2' expr:dir='data:blog.languageDirection' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Share:400,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Istok+Web:400,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>
    <b:if cond='data:blog.isMobile'>
      <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0' name='viewport'/>
    <b:else/> 
```

当我尝试保存模板时，我得到：

```
Error parsing XML, line 5, column 76: The reference to entity "subset" must end with the ';' delimiter. 
```

我试图添加一个`;`但不成功。这些链接是从 Google Web Font 生成和获取的。

我应该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-01T17:03:23.107

这是因为`&`是 XML 中的一个保留字符，意思是“一个 XML 实体从这里开始”。XML 实体允许您打印难以按字面意思嵌入到文档中的字符或字符序列，这可能是因为您的键盘上没有它，或者是因为文档编码禁止它。例如，在 (X)HTML 中，`&eacute;`打印字符“é”，这在大多数美式键盘上都不容易找到。（可用实体取决于`<!DOCTYPE>`您的 XML 文档的声明。）

该方案的问题在于，如果文字`&`字符可以作为实体的开头，您就不能在文档周围明确地留下文字字符，因此您需要将它们编码为实体来解决该问题。

您将需要用 替换所有杂散`&`，`&amp;`这将打印`&`而不会激怒 XML 解析器。在您的情况下，您应该擅长在两个标签中替换`&subset=`by 。`&amp;subset=``<link>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T17:03:22.360

XML 中的 & 符号表示实体引用的开始。它以 & 开头，然后是一个标记，指示它所指的是哪个实体，然后是一个分号来结束它。为了在文档中包含文字 & 符号，您需要使用引用 & 符号的字符实体引用，即`&amp;`.

由于您尚未执行此操作，因此解析器正在尝试解析以下数据，就好像它是实体引用一样，但事实并非如此。这就是它无法解析的原因——它在实体引用的末尾找不到分号，因为它不应该是实体引用。

例如，您有：

```
http://fonts.googleapis.com/css?family=Share:400,700&subset=latin,latin-ext 
```

你应该有：

```
http://fonts.googleapis.com/css?family=Share:400,700&amp;subset=latin,latin-ext 
```

# java - Android Java - 随机时间范围内的消息，每秒检查一次

> ID：14112319
> 
> 赞同：2
> 
> 时间：2013-01-01T16:57:28.750
> 
> 标签：java, android

对于我的一个副项目，我正在用 java 开发一个 android 应用程序。我不太了解java，但我正在尝试^^。

该项目是在一定范围内的随机时间有一个警报。问题是我的计时器和按钮冻结了，但一切仍然有效！有没有人可能对 thread.sleep 有另一种解决方案？

```
 public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }
    public void StartChrono(View view) {
         final Chronometer chrono = (Chronometer)findViewById(R.id.chronometer1);
         chrono.setBase(SystemClock.elapsedRealtime());
         chrono.start();
         //Tick();
     }
     public int RandomTime(int min, int max)
     {
         int random = max - min;
         Random rand= new Random();
         random = rand.nextInt(random)+min;
         return random;
     }
     public boolean CheckUp(int randomtime,int chronotime)
     {
        boolean check = false;

        if(randomtime== chronotime)
         {
             check = true;
         }

        return check;
     }
     public void Tick()
     {
        boolean check = false;
        int randomtime = RandomTime(20,150);
        int time=1;

        do
         {  
            check = CheckUp(randomtime,time);
            time = time +1;
            try {
                Thread.sleep(1000);
                } 
            catch (InterruptedException e) {
                AlertDialog alertDialog;
                alertDialog = new AlertDialog.Builder(this).create();
                alertDialog.setTitle("Error - 000");
                alertDialog.setMessage("Could not check!");
                alertDialog.show();
            }

         }while(check == false);

        if(check == true)
        {
            AlertDialog alertDialog;
            alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setTitle("Yuy");
            alertDialog.setMessage("Switch!");
            alertDialog.show();
        }
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:17:37.073

我不会使用 Thread.sleep()，我会使用 Timer。

您可以设置一个时间，定时器会自动调用相关的任务。

在 Android 中，它会像这样工作：

[http://android.okhelp.cz/timer-simple-timertask-java-android-example/](http://android.okhelp.cz/timer-simple-timertask-java-android-example/)

我自己用过一次，但那是很久以前的事了。

顺便提一句。：

您不必编写方法来检查布尔值。

这也有效：

```
boolean  check = 5>3;
System.out.println("check: " + check);//"check true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:39:21.960

我肯定会为此任务使用处理程序：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

一个基本的例子是这样的：

```
long timeDelay = 1000; // Set this to your random number.
Handler handler = new Handler();
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
     // Do whatever you need to do after a specified interval.  
    }
}, timeDelay); 
```

在 onCreate 中实例化 Handler 并保留引用，以便您可以在方法中调用它。

只是为了澄清一下，为什么你不能使用 Thread.sleep() 来“休眠”特定的时间，是这样的：当你调用 Thread.sleep() 时，你会在 UI 线程上调用它，所以每个组件都在UI 线程（按钮、文本字段等）将在给定的时间内“休眠”，因此您基本上会停止整个应用程序。

另请参阅 Thread.sleep 的文档：

> 使发送此消息的线程在给定的时间间隔内休眠（以毫秒为单位）。

# html - 在水平列表中居中图像

> ID：14112320
> 
> 赞同：1
> 
> 时间：2013-01-01T16:57:33.250
> 
> 标签：html, css, html-lists, image

我有一个用作导航的水平列表，我想将图像/图标放在列表中的文本上方。

但是，我无法让图像与每个列表项居中。

图像具有完全相同的大小。

HTML：

```
<div id="nav">

<ul>
    <li><img src="images/kranznav.png" alt="kranz" /><a href="index.php">COMPETE</a></li>
    <li><img src="images/thumbnav.png" alt="thumb" /><a href="index.php">SCORE</a></li>
    <li><img src="images/bagnav.png" alt="bag" /><a href="index.php">SHOP</a></li>
    <li><img src="images/morenav.png" alt="more" /><a href="index.php">MORE</a></li>
</ul>
</div>
<div class="clear">
</div> 
```

CSS：

```
#nav {
    background:#ffffff;
    width:100%;
    margin-top:-2em;

}

#nav ul {
    list-style-type:none;
}

#nav li {
    display:inline;
    float:left;
    width:2%;
    margin-left:10%;
    margin-right:10%;
    margin-top:5%;
}

#nav a {
    display:block;
    width:20%;
    margin-right:0% auto;
    padding-left:0% auto;
    color:#5E09CB;
    text-decoration:none;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:59:23.917

添加`text-align:center;`到`#nav li`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:27:00.040

您的错误是您给列表项的宽度为 2%。这限制了宽度

[http://jsfiddle.net/bukfixart/Z9uc7/](http://jsfiddle.net/bukfixart/Z9uc7/)

试试这种方式：

```
#nav li {
display:inline;
float:left;
/*width:2%;*/
margin-left:10%;
margin-right:10%;
margin-top:5%;

text-align:center;
} 
```

# vbscript - VBScript 中变量的作用域

> ID：14112321
> 
> 赞同：1
> 
> 时间：2013-01-01T16:57:49.330
> 
> 标签：vbscript, scope

考虑下面的代码：

```
Option Explicit

Dim Count : Count = 4

'Case-I
Sub Display1()

 MsgBox(Count)

End Sub

'Case-II

Sub Display2(Count)

 MsgBox(Count)

End Sub 
```

***困惑***

*   这里的变量应该`Count`可以被两者访问 `method`还是只能被`Display2`方法访问？
*   如果变量`count`无法通过`Display1`方法访问，那么有什么方法可以使其在任何子或函数中可用，而无需将其传递给该变量`Sub`或`Function`
*   现在，如果我`Count`从 sub 更新变量，`Display2`则该值可以用于其他值，`function`或者`sub`假设 VBScript 具有`global`变量声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:10:14.177

变量`count`在任何函数或子过程之外声明，因此它的范围在这里是全局的。全局变量可以在任何函数或子过程中使用，其值可以在程序流程中的任何地方更改。

现在，如果您调用此过程并运行 .vbs 文件，`4`两种情况下都会显示消息框。

```
Option Explicit

Dim Count : Count = 4
'Case-I
Sub Display1()
 MsgBox(Count)
End Sub

'Case-II
Sub Display2(Count)
 MsgBox(Count)
End Sub

Call Display1()
Call Display2(Count) 
```

如果您`count`在任何函数或子过程中更改变量的值，它的值也会在其他过程中发生变化，因为它的范围是全局的。

选项显式

```
Dim Count : Count = 4
'Case-I
Sub Display1()
 Count = 5               ''value changed here 
 MsgBox(Count)
End Sub

'Case-II
Sub Display2(Count)
 MsgBox(Count)
End Sub

Call Display1()
Call Display2(Count) 
```

在上述情况下，两个消息框都会显示`5`

# java - 如何检查正则表达式匹配是否可以耗尽字符串？

> ID：14112331
> 
> 赞同：0
> 
> 时间：2013-01-01T16:59:36.317
> 
> 标签：java, regex

所以问题是确定字符串中的每个字符是否都包含在特定正则表达式的匹配中。或者，换一种说法，如果可以包含在特定正则表达式的某些匹配中的所有字符位置的集合包括字符串中的所有字符位置。

我的想法是做这样的事情：

```
boolean matchesAll(String myString, Matcher myMatcher){
    boolean matched[] = new boolean[myString.size()];
    for(myMatcher.reset(myString); myMatcher.find();)
        for(int idx = myMatcher.start(); idx < myMatcher.end(); idx++)
            matched[idx] = true;

    boolean allMatched = true;
    for(boolean charMatched : matched)
        allMatched &= charMatched;

    return allMatched
} 
```

但是，有没有更好的方法来做到这一点？

另外，当我写这篇文章时，我突然想到，在像这样的情况下，这不会做我想要的

```
matchesAll("abcabcabc", Pattern.compile("(abc){2}").matcher()); //returns false 
```

因为`Matcher`只尝试在最后一场比赛结束时开始匹配。我希望它返回 true，因为如果您在位置 3 开始匹配器，它可能会`abc`在匹配中包含第三个。

```
boolean matchesAll(String myString, Matcher myMatcher){

    boolean matched[] = new boolean[myString.size()];
    boolean allMatched = true;

    for(int idx = 0; idx < myString.size() && myMatcher.find(idx);
            idx = myMatcher.start() + 1) {

        for(int idx2 = myMatcher.start(); idx2 < myMatcher.end(); idx2++)
            matched[idx2] = true;
    }

    boolean allMatched = true;
    for(boolean charMatched : matched)
        allMatched &= charMatched;

    return allMatched;
} 
```

有什么方法可以让这段代码更好、更快或更易读吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:47:59.463

我有 2 个答案给你，虽然我不确定我是否正确理解了这个问题。

1.  调用 Pattern.matcher(str2match).matches() 方法而不是 find()。在一个镜头中，一个真正的返回值会告诉你整个字符串是否匹配。
2.  在正则表达式前面加上“^”（字符串的开头），并在“Pattern.compile(str)”之前的末尾添加一个“$”（用于字符串的结尾） - 正则表达式。

这两种解决方案也可以一起使用。下面是一个示例类 - 您可以将其复制到 AllMatch.java 中，使用“javac AllMatch.java”编译它并作为“java AllMatch”运行（我假设您的 CLASSSPATH 中有“.”）。只需选择您认为更优雅的解决方案 :) 新年快乐！

```
import java.util.regex.Pattern; 
```

公共类 AllMatch {

```
private Pattern pattern;

public AllMatch (String reStr) {
    pattern = Pattern.compile ("^" + reStr + "$");
}

public boolean checkMatch (String s) {
    return pattern.matcher(s).matches();
}

    public static void main (String[] args) {
    int n = args.length;
    String  rexp2Match = (n > 0) ? args[0] : "(abc)+",
        testString = (n > 1) ? args[1] : "abcabcabc",
        matchMaker = new AllMatch (rexp2Match)
                .checkMatch(testString) ? "" : "un";
    System.out.println ("[AllMatch] match " + matchMaker +
                "successful");
    } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:53:41.240

这有效：

```
private static boolean fullyCovered(final String input,
    final Pattern pattern)
{
    // If the string is empty, check that it is matched by the pattern
    if (input.isEmpty())
        return pattern.matcher(input).find();

    final int len = input.length();
    // All initialized to false by default
    final boolean[] covered = new boolean[len];

    final Matcher matcher = pattern.matcher(input);

    for (int index = 0; index < len; index++) {
        // Try and match at this index:
        if (!matcher.find(index)) {
            // if there isn't a match, check if this character is already covered;
            // if no, it's a failure
            if (!covered[index])
                return false;
            // Otherwise, continue
            continue;
        }
        // If the match starts at the string index, fill the covered array
        if (matcher.start() == index)
            setCovered(covered, index, matcher.end());
    }

    // We have finished parsing the string: it is fully covered.
    return true;
}

private static void setCovered(final boolean[] covered,
    final int beginIndex, final int endIndex)
{
    for (int i = beginIndex; i < endIndex; i++)
        covered[i] = true;
} 
```

执行起来可能不会更快，但我想它更容易阅读；）另外，`.find(int)`重置匹配器，所以这是安全的。

# javascript - jQuery 文档就绪调用序列

> ID：14112334
> 
> 赞同：1
> 
> 时间：2013-01-01T16:59:48.137
> 
> 标签：javascript, jquery

我对 jQuery 有以下问题。我使用这段代码：

```
function populate_select_from_json(select, json_url) {
    select.empty();
    $.getJSON(json_url, function(data) {
        $.each(data, function(key, value) {
            $("<option></option>")
                .attr("value", value.name)
                .text(value.title)
                .appendTo(select);
        });
    });
    select.children(":first").attr("selected", true);
}
$(document).ready(function() {
    var value_type = $("#value_type");
    populate_select_from_json(value_type, SOME_URL);

    var unit = $("#unit");
    populate_select_from_json(unit, ANOTHER_URL + value_type.val());

}); 
```

我想：

1.  加载文档
2.  从关联的数据库中获取一些 JSON 数据
3.  将数据放入`#value_type <select>`item
4.  获取`#value_type`select 的值，并再次查询数据库以填充另一个选择项。

问题是，当我调用时`value_type.val()`，它总是输出`null`，即使 `#value_type <select>`正确填充。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:14:52.717

我想这样的事情可能会更好地与[`promises`](http://api.jquery.com/category/deferred-object/).

沿着这些思路（未经测试）：

```
var populate_select_from_json = function($select, json_url) {
    $select.empty();
    return $.getJSON(json_url, function(data) {
        $.each(data, function(key, value) {
            $("<option></option>")
                .attr("value", value.name)
                .text(value.title)
                .appendTo($select);
        });
        $select.children(":first").attr("selected", true);
    });
}; 
```

```
$(document).ready(function() {
    var $value_type = $("#value_type");
    var $unit = $("#unit");

    populate_select_from_json($value_type, SOME_URL).done(function(){
      populate_select_from_json($unit, ANOTHER_URL + $value_type.val());
    });
}); 
```

# python - Flask 请求和 application/json 内容类型

> ID：14112336
> 
> 赞同：31
> 
> 时间：2013-01-01T17:00:10.743
> 
> 标签：python, json, dictionary, flask, mime-types

我有一个具有以下视图的烧瓶应用程序：

```
@menus.route('/', methods=["PUT", "POST"])
def new():
    return jsonify(request.json) 
```

但是，这仅在请求的内容类型设置为 时才有效`application/json`，否则 dict`request.json`为 None。

我知道`request.data`请求正文为字符串，但我不想每次客户端忘记设置请求的内容类型时都将其解析为字典。

有没有办法假设每个传入请求的内容类型都是`application/json`？我想要的只是始终可以访问有效的`request.json`字典，即使客户端忘记将应用程序内容类型设置为 json。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-01T17:07:31.590

使用[`request.get_json()`](http://flask.pocoo.org/docs/latest/api/#flask.Request.get_json)并设置`force`为`True`：

```
@menus.route('/', methods=["PUT", "POST"])
def new():
    return jsonify(request.get_json(force=True)) 
```

从文档中：

> 默认情况下，如果 mimetype 是，此函数将仅加载 json 数据，`application/json`但这可以被*force*参数覆盖。
> 
> 参数：
> 
> *   **force** – 如果设置为*True*，则 mimetype 将被忽略。

对于较旧的 Flask 版本，< 0.10，如果您想宽容并允许 JSON，则始终可以明确地自己进行解码：

```
from flask import json

@menus.route('/', methods=["PUT", "POST"])
def new():
    return jsonify(json.loads(request.data)) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-25T13:03:21.283

该`request`对象已经有一个方法`get_json`可以为您提供 json，如果您执行它，则不管内容类型如何，`force=True`因此您的代码将类似于以下内容：

```
@menus.route('/', methods=["PUT", "POST"])
def new():
    return jsonify(request.get_json(force=True)) 
```

事实上，烧瓶文档说`request.get_json`应该使用而不是`request.json`： http: [//flask.pocoo.org/docs/api/?highlight=json#flask.Request.json](http://flask.pocoo.org/docs/api/?highlight=json#flask.Request.json)

# web-scraping - iOpus iMacro 网页抓取循环

> ID：14112340
> 
> 赞同：1
> 
> 时间：2013-01-01T17:01:03.097
> 
> 标签：web-scraping, nested-loops, imacros

我正在使用带有 Internet Explorer 的 Opus iMacros 插件。以下宏从我的 excel CSV 文件的第一行获取一个变量，并在网站上执行搜索。来自网站的搜索结果可能有 10 到 200 条记录，每页 20 条（1-10 页）。然后，该宏将每个页面提取到一个文本文件中以供将来参考。

```
SET !ERRORIGNORE YES
SET !EXTRACT_TEST_POPUP NO
TAB T=1
TAB CLOSEALLOTHERS
SET !DATASOURCE 7Digits.csv
SET !DATASOURCE_Columns 1
SET !DATASOURCE_LINE {{!LOOP}}
'Login
URL GOTO=https://SomeWebsite.com/login
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:form1 ATTR=NAME:USER_NAME CONTENT=ABC123
TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:form1 ATTR=NAME:PASSWORD CONTENT=XXX

'set search criteria on multiple search page
TAG POS=1 TYPE=TEXTAREA FORM=NAME:form1 ATTR=NAME: NUMBER CONTENT={{!COL1}}
TAG POS=1 TYPE=INPUT:IMAGE FORM=NAME:form1 ATTR=ID:SEARCH
‘Extract results and SAVE
TAG POS=1 TYPE=A ATTR=TXT:1
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:2
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:3
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:4
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:5
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:6
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:7
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:8
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:9
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
TAG POS=1 TYPE=A ATTR=TXT:10
TAG POS=2 TYPE=TABLE ATTR=TXT:*location* EXTRACT=TXT
SAVEAS TYPE=txt FOLDER=* FILE=mytable_{{!NOW:yymmdd_hhnnss}}
'END 
```

我的挑战是想办法在搜索结果少于 10 页时取消“<code>SAVEAS”。例如，如果搜索只返回 60 个结果，则宏只需要执行`SAVEAS`命令 3 次 (20 x 3)。如何在`{{!LOOP}}`不保存相同文本文件 7 次的情况下移至下一个？

我尝试了“<code>!FAIL_ON_ALL_NAVIGATEERRORS”命令，但宏完全停止。我想移动到下一条记录而不是停止宏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:24:19.220

这就是将 iMacros 代码转换为 JavaScript 的方式。

[如何从 JavaScript 调用 iMacro？](https://stackoverflow.com/questions/14135483/how-to-invoke-an-imacro-from-javascript)

你的问题也有答案，因为你问“**如果**有那么少”。所以你必须将代码转换为 JS 并使用 if 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T08:06:33.513

如果公式，您可以通过 imacro javascript 来完成。

```
if(search result<10) {

perform your script

}else { go to next page } 
```

# javascript - popstate 事件处理程序似乎不起作用

> ID：14112341
> 
> 赞同：14
> 
> 时间：2013-01-01T17:01:04.907
> 
> 标签：javascript

我在使用“popstate”事件处理程序时遇到问题，这是我的代码：

```
window.addEventListener("popstate", function (event){
    if (event.state) {
        alert('abc')
    }
});

// The data object is arbitrary and is passed with the popstate event.
var dataObject = {
    createdAt: '2011-10-10',
    author: 'donnamoss'
};

var url = '/posts/new-url';
history.pushState(dataObject, document.title, url); 
```

我希望这段代码在执行时会弹出一个警告框，但是什么也没发生。

这里有什么问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T03:42:56.523

`pushState`不触发`popstate`事件，仅单击后退/前进按钮（或使用退格键）或调用`history.back()`/`history.go(n)`会触发此事件。

另外，在 webkit 浏览器中，`popstate`会在页面`onload`事件之后触发事件，但 Firefox 和 IE 没有这种行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T03:44:07.537

不，它不会，

根据[MDN 文档](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/popstate)

> 请注意，仅调用 history.pushState() 或 history.replaceState() 不会触发 popstate 事件。popstate 事件仅通过执行浏览器操作来触发，例如单击后退按钮（或在 JavaScript 中调用 history.back()）。

再次根据[这个问题](https://stackoverflow.com/questions/8195502/chrome-onpopstate-pushstate-bug)，当您调用时`popstate`不会触发事件。`Chrome``pushState()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T05:28:13.343

[`history.pushState()`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)根据定义不会触发[`popstate`](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#event-popstate)事件。

> 在导航到会话历史条目时，在某些情况下会触发 popstate 事件。

此事件仅在导航到历史条目时触发，通过按后退/前进按钮或`history.go/back`。

# jquery - 通过ajax对服务器端进行排序的数据表？

> ID：14112346
> 
> 赞同：0
> 
> 时间：2013-01-01T17:01:44.310
> 
> 标签：jquery, jquery-plugins, datatable

我似乎找不到用于通过服务器端进行排序的 jquery 数据表。

我可以完全控制要返回的数据，我会返回有多少页以及每页的总量。

我试图找到某种数据表，以便我可以显示页数、前进和后退按钮以及可排序的列标题。

我不希望 jquery 插件为我完成所有工作，我只想启动一个 jquery 事件，以便我可以进行 jquery ajax 调用并获取新页面信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:20:08.037

您可以使用：[http](http://www.datatables.net) : //www.datatables.net jquery 插件并实现服务器端部分，并且仍然可以完全控制返回的数据以及排序部分。

客户示例：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#members').dataTable( {
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
            "aLengthMenu": [[10, 25, 50, 100], [10, 25, 50, 100]],
            'bProcessing'    : true,
            'bServerSide'    : true,
            'sAjaxSource'    : 'example.com/sudo/get_list',
            "aaSorting": [[ 5, "desc" ]],
            'fnServerData'   : function(sSource, aoData, fnCallback){
                aoData.push( { "name": "model", "value": "user" } );                
              $.ajax({
                'dataType': 'json',
                'type'    : 'POST',
                'url'     : sSource,
                'data'    : aoData,
                'success' : fnCallback
              }); 
            },
            "aoColumns": [
                  {"bVisible": false},
                          { "sTitle": "Email" },
                          {"bVisible": false},
                          {"bVisible": false},
                          {"bVisible": false},
                          {"bVisible": false},                        
                          { "sTitle": "Type", "bSearchable": true },
                          { "sTitle": "State", "bSearchable": true },
                          { "sTitle": "Registered on", "bSearchable": true },
                          { "sTitle": "Last Login", "bSearchable": true },
                          null                                                
                        ]           
        });
    });
    </script> 
```

注意："aaSorting": [[ 5, "desc" ]]。按第 6 列排序（例如 member_id 等）但不显示。

对于服务器端，您通常可以使用您的查询。或者您可以使用像这样的本机 php 库：[https](https://github.com/n1crack/IgnitedDatatables-native-php-version)
://github.com/n1crack/IgnitedDatatables-native-php-version 在任何情况下，使用 JSON 格式的服务器响应与此类似：

```
sEcho
iTotalRecords
iTotalDisplayRecords
aaData
sColumns 
```

当然，每个 json 键都将填充您的数据。
更多信息：[http ://datatables.net/forums/discussion/5133/ignited-datatables-native-php-version](http://datatables.net/forums/discussion/5133/ignited-datatables-native-php-version)

# c# - 使用 DbLINQ 时出现 LINQ to PostgreSQL 错误

> ID：14112347
> 
> 赞同：3
> 
> 时间：2013-01-01T17:01:50.783
> 
> 标签：c#, linq, postgresql, npgsql, dblinq

我通过 DbLINQ 使用 LINQ to SQL (PostgreSQL)。

我在执行 LINQ to PostgreSQL 时遇到问题。我用 dbmetal 成功生成了 .dbml 和 .cs 文件，我想我得到了所有的引用，代码编译了。参考：

```
DbLinq
DbLinq.PostgreSql
DbLinq.SqlServer
Npgsql

using DbLinq.PostgreSql; 
```

我得到一个例外：

> {“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）"}

内部异常：

> {“该系统找不到指定的路径”}

连接字符串：

```
server=127.0.0.1;database=xxxxx;user id=postgres;password=xxxxx;
ili
server=localhost;database=xxxxx;user id=postgres;password=xxxxx; 
```

如果我尝试使用 NpgsqlConnectionStringBuilder 我得到：

> HOST=localhost;PORT=5432;PROTOCOL=3;DATABASE=xxxxx;USER ID=postgres;PASSWORD=xxxxx;SSL=False;SSLMODE=Disable;TIMEOUT=15;SEARCHPATH=;POOLING=True;CONNECTIONLIFETIME=15;MINPOOLSIZE= 1;MAXPOOLSIZE=20;SYNCNOTIFICATION=False;COMMANDTIMEOUT=20;ENLIST=False;PRELOADREADER=False;USEEXTENDEDTYPES=False;INTEGRATED SECURITY=False;COMPATIBLE=2.0.12.0;APPLICATIONNAME=

有一个例外`{"Keyword not supported: 'host'."}`

我在 Win7 64 位、Postgres 9.2 64 位上通过 SquirrelSQL 和 jdbc 驱动程序成功连接

编辑：这很好

```
xxxxxDC dc = new xxxxxDC("server=127.0.0.1;database=xxxxx;user id=postgres;password=xxxxx;DbLinqProvider=PostgreSql;");
         var q = from r in dc.xxxxx
                 select r; 
```

但我得到一个错误

```
dataGridView1.DataSource = q 
```

现在我知道这是因为查询没有立即执行。但问题依然存在。**“服务器未找到或无法访问”**

F1！

LP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T23:43:34.087

您正在显示一系列完全不同的错误。

第一个是因为您没有告诉 LINQ 使用 nPgSQL，所以它正在尝试使用 MS SQL Server 并且无法连接 - 因为机器上可能没有任何 MS SQL Server。这就是错误说的原因`while establishing a connection to SQL Server`。

然后显示一个 nPgSQL 连接字符串 from`NpgsqlConnectionStringBuilder`以及由此产生的关于`host`关键字的错误。尽我所能猜到，这是因为该类生成的连接字符串是为 nPgSQL 自己的连接处理例程而设计的，而不是用于 LINQ。您需要一个指定 PostgreSQL 提供程序的 LINQ 连接字符串。

然后，您显示另一个您说是“很好”的连接字符串已`DbLinqProvider=PostgreSql;`附加到它，但说您在之后的语句中得到“错误”。您没有显示错误消息，也没有显示用于设置连接的代码，因此我们无法真正帮助您。无论如何，这与您最初提出的问题确实是一个不同的问题。请针对新问题发布新问题，而不是重写您的原始问题。

您需要**PostgreSQL 的 LINQ 提供程序**。请参阅[此问题](https://stackoverflow.com/q/4787255/398670)和[LINQ 上的维基百科页面](http://en.wikipedia.org/wiki/Language_Integrated_Query#Other_providers)。查看带有 PostgreSQL 驱动程序的[dbLinq](http://dblinq.codeplex.com/)、[LINQ to Entities或](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)[dotConnect](http://www.devart.com/dotconnect/)。

在撰写本文时，**nPgSQL 不包含 LINQ 提供程序，因此您需要添加一个 3rd party one**。AFAIK，您不能直接将 LINQ 与 nPgSQL 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:16:09.803

I think postgresql uses a different default port than 1433\. Try specifying the port 5432

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:05:21.867

仅供参考，DbLinq 项目已死）在我的情况下，它没有立即工作。您的架构现在可能可以工作，但稍后您可能需要花费时间来更新项目）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T22:32:29.800

在我使用 ConnectionStringBuilder 类创建连接字符串后它起作用了。谢谢你的帮助！

# jquery - 如何使用 JQuery 和 Jersey 传递 Web 表单的参数

> ID：14112348
> 
> 赞同：0
> 
> 时间：2013-01-01T17:01:50.893
> 
> 标签：jquery, rest, jersey

我的问题是我有一个 Web 表单，我想将此数据发送到 Jersey `restFULL`Method。

在我的 Javascript 我有这个电话：

```
 console.log('Sending event creation ---> '+eventInJsonString);
$.ajax({
    url: "/Bxip/rest/events/",
//  dataType: 'json',
    type: 'post',
    data: eventInJsonString,
    contentType: 'multipart/form-data',
    success: function(data) {
        console.log("success ", data.response);
    },
    error: function(data) {
        console.log("error ", data.error);
    }
}); 
```

我的球衣方法是：

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.TEXT_HTML)
//Retornará HTTP_STATUS 204 (on success)
public String addEvent(
        @FormParam("title") String title,
        @FormParam("fechaInicio") String fechaInicio,
        @FormParam("lugar") String lugar,
        @FormParam("categoria") String categoria,
        @FormParam("description") String description,
        @FormParam("fechaFin") String fechaFin) throws IOException {

    System.out.println("ENTRAAA    = " + title + description); 
```

以及发送数据前的结果：

```
 Sending event creation ---> {"title":"aaaa","description":"        aaaaa","fechaInicio":"bbbb","categoria":"Beber y comer","fechaFin":"forever"} 
```

但在 Java 服务器端，参数为空：

```
ENTRAAA    = nullnull 
```

我怎样才能`@POST`从客户端发送到这个球衣方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:39:17.270

有几种方法可以做到这一点。在这里，您有两种可能性：

*   **使用参数**

要在泽西岛接收@FormParam，您应该发送在帖子正文中编码的数据 url。

请求的 ContentType 应该是

```
application/x-www-form-urlencoded 
```

eventInJsonString 的内容应该是

```
title=aaaa&description=aaaaa&fechaInicio=bbbb&categoria=Beber y comer&fechaFin=forever 
```

要在 Jersey 中处理此问题，您应该将 @Consumes 类型更改为

```
@Consumes(MediaType.APPLICATION_FORM_URLENCODED) 
```

这样，您将获得@FormParam 的填充。

*   **使用 json**

问题是您正在尝试以 json 格式发送数据。如果你想以这种方式发送它，你也需要改变一些东西：

您需要将请求 ContentType 更改为

```
application/json 
```

在泽西岛，您需要将 @Consumes 类型更改为

```
@Consumes(MediaType.APPLICATION_JSON) 
```

如果您以这种方式发送，您还需要从方法中删除@FormParam：

```
public String addEvent(String jsonBody) throws IOException {

    // Now you need to parse the json to get your parameters... 
```

# php - 调用javascript函数运行php代码

> ID：14112349
> 
> 赞同：0
> 
> 时间：2013-01-01T17:01:52.020
> 
> 标签：php, javascript, jquery, cookies

我正在尝试创建一个登录页面，当您单击注销时，它会将您注销然后刷新页面，但是，只要 JavaScript $.get 是它，它就不会运行 php 代码，但是它会刷新页面. 帮助将不胜感激。

索引.php

```
 <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
   <script type="text/javascript">
    function logOut() {
            $.get("logout.php");
            location.Reload();
            return false;
        }
   </script>
   <a href="#" onclick="logOut();">Log Out</a> 
```

注销.php

```
<?php
    setcookie('username', '', 0);
    setcookie('password', '', 0);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T17:05:58.103

您必须在成功时添加刷新，或者至少等待呼叫结束。

```
 <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
   <script type="text/javascript">
    function logOut() {
            $.get("logout.php" , returndata , function() {
            location.Reload(); });
        }
   </script>
   <a href="#" onclick="logOut();">Log Out</a> 
```

更改您的 setcookie 也将立即删除。常用的方法是输入过去的时间戳：

```
setcookie('cookiename',0,( time() - 3600 )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:11:47.617

为什么不使用 javascript 来删除 cookie，而不是使用 php 作为 PHP cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:07:54.287

**首先** ，您错误地实现了注销功能。如果您想删除所有 cookie（假设您的系统并不复杂，比如您不需要保留用户偏好，如主题、语言、UI 参数）

那么`logout.php`应该类似于

```
<?php

//Will remove all cookies
if ( !empty($_COOKIE) ){
  foreach($_COOKIE as $key){
     //Set each key in past
     setcookie($key, null, time() - 84600);

  }
}

//Would destroy the session if it does exists
if ( !empty($_SESSION) ){
  session_destroy();
}

//Don't forget to redirect back to home page
header('Location: /');
exit(); 
```

如果您 100% 确定 cookie 已设置，但`setcookie()`没有删除它们，那么可能 99% 它们位于不同的路径上。

确保在设置/删除它们时，它们位于同一路径上。 `setcookie()`接受第 4 个可选参数，称为`path`.

```
<?php

//So when you set a cookie
setcookie('cookie_key', 'cookie_value', time() + some_lifetime_in_seconds, '/');

//And when you remove a cookie:
setcookie('cookie_key', '', time() - 86400, '/'); 
```

**其次**
，您不应该使用类似 AJAX 的注销功能。这是不明智的，有点浪费内存。

编码：

```
 <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
   <script type="text/javascript">
    function logOut() {
            $.get("logout.php");
            location.Reload();
            return false;
        }
   </script>
   <a href="#" onclick="logOut();">Log Out</a> 
```

应该改写为

```
 <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
 <a href="/logout.php">Log Out</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T17:17:24.650

根据[`setcookie`](http://php.net/manual/en/function.setcookie.php)

```
setcookie('username', '', 0); 
```

在会话结束时过期

> ***expire***
> cookie 过期的时间。这是一个 Unix 时间戳，因此是自纪元以来的秒数。换句话说，您很可能会使用 time() 函数加上您希望它过期之前的秒数来设置它。或者你可以使用 mktime()。time()+60*60*24*30 将设置 cookie 在 30 天内过期。如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

如果要删除 cookie，则应使用除`0`

```
setcookie('username', '', 1); 
```

# javascript - 我可以使用 ASP.NET MVC4 作为 ActionResult 发送消息而不是视图吗

> ID：14112354
> 
> 赞同：0
> 
> 时间：2013-01-01T17:02:30.420
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我在 ASP.NET MVC4 中有以下操作

```
 public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                WebSecurity.Login(model.UserName, model.Password);
                // ?? Need some code here 
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

我有以下代码调用它：

```
$('#article').on('submit', '#loginForm, #registerForm', function (e) {
     e.preventDefault();
     var $form = $(this);
     var href= $form.attr('data-href');
     $form.validate();
     if (!$form.valid()) {
         return false;
     }
     var data = $form.serializeArray();
     $.ajax(
     {
         data: data,
         type: 'POST',
         url: href
     })
         .done(submitDone)
         .fail(submitFail);
     function submitDone(content) {
         $('#article').html(content)
     }
     function submitFail() {
         alert("Failed");
     }
     return false;
 }); 
```

如果注册有效，我想强制刷新整个网页。有没有办法让我**从 actionmethod 向 javascript 发回一条消息，**告诉它注册有效并且 javascript 应该刷新整个网页？

我确实尝试过 return RedirectToLocal("/"); 但这绝对行不通。它的作用是返回一个新页面，然后将其填充到#article DIV 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:26:29.517

没有什么会自动从服务器刷新浏览器。

要从服务器刷新浏览器，您需要从服务器向客户端发送一些信息，表明您要刷新页面。您需要编写 javascript 来寻找刷新浏览器的指示。

客户代码

```
function submitDone(content) {

 var json = $.parseJson(content);

  if(json.isSuccess) {

   //Do something here   

  }

     $('#article').html(json.content)

 } 
```

服务器代码

```
public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                WebSecurity.Login(model.UserName, model.Password);
                // ?? Need some code here 
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

    // If we got this far, something failed, redisplay form
    return Json(new {isSuccess = true, content = model});
} 
```

如果要清除表单字段，我不确定您要通过刷新页面来完成什么。同样可以通过使用 JavaScript 来实现。通过使用 javascript 而不是页面刷新，您不会丢失页面状态，例如错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:30:58.117

好吧，我可以想到一个快速的javascript技巧来刷新这样的成功页面

```
function submitDone(content) {
     window.location.reload();
 } 
```

这将成功重新加载页面。

# c# - 在视图中检查验证

> ID：14112356
> 
> 赞同：1
> 
> 时间：2013-01-01T17:02:32.343
> 
> 标签：c#, asp.net-mvc-3

我正在使用 MVC 应用程序。

我的代码如下：-

```
if(//there are errors then display validation summary)
{
<div class="error">@Html.ValidationSummary(true, "There was an error!")<div>
}
@using (Html.BeginForm("FoundSimilarAccounts", "Account", FormMethod.Post, new { id = "contactform" }))
{

} 
```

我只想知道 if 条件是什么。我只想显示当他们是错误或者他们是验证摘要中的某些内容时。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:12:54.087

您可以检查的[`IsValid`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.isvalid%28v=vs.108%29.aspx)属性：`ModelState``ViewData`

```
@if(!ViewData.ModelState.IsValid)
{
    <div class="error">@Html.ValidationSummary(true, "There was an error!")<div>
} 
```

# wpf - IsEnabled 的 Caliburn.Micro.Telerik RadTab 约定

> ID：14112358
> 
> 赞同：0
> 
> 时间：2013-01-01T17:02:48.460
> 
> 标签：wpf, mvvm, telerik, caliburn.micro, isenabled

我正在使用 Caliburn.Micro.Telerik 约定[项目](https://github.com/vcaraulean/Caliburn.Micro.Telerik)。

我有动态加载 Telerik Tabs 视图模型的视图：

```
<telerik:RadTabControl x:Name="Items" Grid.Row="1" Margin="10,0,0,0" /> 
```

我已将`IsEnabled`其中一个选项卡视图模型的属性设置为 false，但该选项卡始终处于启用状态。

这支持吗？如果没有，我该如何添加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:02:29.513

我很确定 CM 不允许元素约定使用多个属性，我不确定默认属性`RadTabItem`是什么。您始终可以使用选项卡控件上的样式使用显式绑定

```
<telerik:RadTabControl x:Name="Items" Grid.Row="1" Margin="10,0,0,0">
    <telerik:RadTabControl.Resources>
        <Style TargetType="telerik:RadTabItem">
            <Setter Property="IsEnabled" Value="{Binding IsEnabled}" />
        </Style>
    </telerik:RadTabControl.Resources>
</telerik:RadTabControl> 
```

或者尝试`ConventionManager`为它们使用和设置默认约定（尽管这可能已经设置为 Telerik CM 框架中的某些内容）

```
ConventionManager.AddElementConvention<RadTabItem>(RadTabItem.IsEnabledProperty, "IsEnabled", "?"); 
```

（您可能已经注意到“？”，我不确定哪些事件`RadTabItem`可用，哪些应该是触发操作的默认事件，因此您必须自己填写此事件，请参阅此处了解更多信息：[Caliburn 元素约定](https://stackoverflow.com/questions/4227966/caliburn-element-convention))

编辑：

实际上查看 src，似乎没有提供默认约定`RadTabItem`

[https://github.com/vcaraulean/Caliburn.Micro.Telerik/blob/master/WPF/Caliburn.Micro.Telerik/TelerikConventions.cs](https://github.com/vcaraulean/Caliburn.Micro.Telerik/blob/master/WPF/Caliburn.Micro.Telerik/TelerikConventions.cs)

所以看起来你应该沿着这`ConventionManager`条路走

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:38:15.827

我曾尝试使用 ConventionManager 但没有成功。

我最终按照 Charleh 和 Valeriu 在 github 问题页面 ( [https://github.com/vcaraulean/Caliburn.Micro.Telerik/issues/12#issuecomment-11840602](https://github.com/vcaraulean/Caliburn.Micro.Telerik/issues/12#issuecomment-11840602) ) 上的建议使用了这个 XAML：

```
<telerik:RadTabControl x:Name="Items">
    <telerik:RadTabControl.ItemContainerStyle>
        <Style TargetType="telerik:RadTabItem">
            <Setter Property="IsEnabled" Value="{Binding IsEnabled}" />
        </Style>
     </telerik:RadTabControl.ItemContainerStyle>
</telerik:RadTabControl> 
```

# php - 如何为模型的所有搜索操作设置默认条件？

> ID：14112359
> 
> 赞同：2
> 
> 时间：2013-01-01T17:03:06.573
> 
> 标签：php, activerecord, yii, criteria

我有一个模型：

```
class Service extends CActiveRecord
{
    public static function model($className = __CLASS__)
    {
        return parent::model($className);
    }

    public static function getMainPageItems()
    {
        return self::model()->findAll(array(
            'condition' => 'on_main = 1',
            'order' => 'pos ASC'
    ));

    public static function getNonMainPageItems()
    {
        return self::model()->findAll(array(
            'condition' => 'on_main = 0',
            'order' => 'pos ASC'
    ));
} 
```

我想将模型的默认顺序设置为`pos ASC`.

如何设置模型的默认顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T17:20:02.477

使用`CActiveRecord::defaultScope()`方法如下：

```
class Service extends CActiveRecord
{
    ...
    public function defaultScope(){
        return array(
            'order'=>'pos ASC'
        );
    }
    ...
} 
```

这将为模型上的所有查找方法添加。阅读[范围](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#scopes-detail)和[defaultScopes](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#defaultScope-detail)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:07:52.137

解决此问题的一种方法是向名为 $order 的父类添加一个私有成员。

您需要为其创建 getter 和 setter（以便您可以在需要时更改默认值）

然后只需`$this->$order`在需要它的每个函数中调用“订单”元素。

# r - rbindfill 类似向量列表的合并

> ID：14112377
> 
> 赞同：5
> 
> 时间：2013-01-01T17:04:57.960
> 
> 标签：r, rbind

我有一个命名向量的列表（见下文和最后的`dput`版本）如果向量不包含名称（在这种情况下为字符），我想“合并”在一起以创建一个矩阵并填充零。这似乎并不难，但我还没有找到一个可行的**基础解决方案**。我考虑过使用 match，但是当我确定有一种奇特的方式可以一起使用时，这似乎非常`do.call`耗时`rbind`。

**命名向量列表：**

```
$greg

e i k l 
1 2 1 1 

$sam

! c e i t 
1 1 1 2 1 

$teacher

? c i k l 
1 1 1 1 1 
```

**最终期望的输出**

```
 !  ?  c  e  i  k  l  t
greg       0  0  0  1  2  1  1  0 
sam        1  0  1  1  2  0  0  1 
teacher    0  1  1  0  1  1  1  0 
```

**可能这是人们会给出的输出，用 0 填充 NA 很容易**

```
 !  ?  c  e  i  k  l  t
greg      NA NA NA  1  2  1  1 NA 
sam        1 NA  1  1  2 NA NA  1 
teacher   NA  1  1 NA  1  1  1 NA 
```

**样本数据**

```
L2 <- structure(list(greg = structure(c(1L, 2L, 1L, 1L), .Dim = 4L, .Dimnames = structure(list(
        c("e", "i", "k", "l")), .Names = ""), class = "table"), sam = structure(c(1L, 
    1L, 1L, 2L, 1L), .Dim = 5L, .Dimnames = structure(list(c("!", 
    "c", "e", "i", "t")), .Names = ""), class = "table"), teacher = structure(c(1L, 
    1L, 1L, 1L, 1L), .Dim = 5L, .Dimnames = structure(list(c("?", 
    "c", "i", "k", "l")), .Names = ""), class = "table")), .Names = c("greg", 
    "sam", "teacher")) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:49:48.710

这是一个相当简单的基本解决方案：

```
# first determine all possible column names
cols <- sort(unique(unlist(lapply(L2,names), use.names=FALSE)))
# initialize the output
out <- matrix(0, length(L2), length(cols), dimnames=list(names(L2),cols))
# loop over list and fill in the matrix
for(i in seq_along(L2)) {
  out[names(L2)[i], names(L2[[i]])] <- L2[[i]]
} 
```

更新基准：

```
f1 <- function(L2) {
  cols <- sort(unique(unlist(lapply(L2,names), use.names=FALSE)))
  out <- matrix(0, length(L2), length(cols), dimnames=list(names(L2),cols))
  for(i in seq_along(L2)) out[names(L2)[i], names(L2[[i]])] <- L2[[i]]
  out
}   
f2 <- function(L2) {
  L.names <- sort(unique(unlist(sapply(L2, names))))
  L3 <- t(sapply(L2, function(x) x[L.names]))
  colnames(L3) <- L.names
  L3[is.na(L3)] <- 0
  L3
}
f3 <- function(L2) {
  m <- do.call(rbind, lapply(L2, as.data.frame))
  m$row <- sub("[.].*", "", rownames(m))
  m$Var1 <- factor(as.character(m$Var1))
  xtabs(Freq ~ row + Var1, m)
}
library(rbenchmark)
benchmark(f1(L2), f2(L2), f3(L2), order="relative")[,1:5]
#     test replications elapsed relative user.self
# 1 f1(L2)          100   0.022    1.000     0.020
# 2 f2(L2)          100   0.051    2.318     0.052
# 3 f3(L2)          100   0.788   35.818     0.760
set.seed(21)
L <- replicate(676, {n=sample(10,1); l=sample(26,n);
  setNames(sample(6,n,TRUE), letters[l])}, simplify=FALSE)
names(L) <- levels(interaction(letters,LETTERS))
benchmark(f1(L), f2(L), order="relative")[,1:5]
#    test replications elapsed relative user.self
# 1 f1(L)          100    1.84    1.000     1.828
# 2 f2(L)          100    4.24    2.304     4.220 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T17:52:04.467

我认为是这样的：

```
names <- sort(unique(unlist(lapply(L2, names), use.names=FALSE)))
L3 <- t(vapply(L2, function(x) x[names], FUN.VALUE=numeric(length(names))))
colnames(L3) <- names
L3[is.na(L3)] <- 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-01T17:35:28.383

**reshape2 解决方案**。这可以通过 reshape2 包轻松完成，方法是将列表熔化为长形式，然后使用`dcast`将其重新整形为宽形式：

```
> library(reshape2)
> m <- melt(L2)
> m$Var.1 <- factor(as.character(m$Var.1)) # optional - if columns should be sorted
> dcast(m, L1 ~ Var.1, fill = 0)
       L1 ! ? c e i k l t
1    greg 0 0 0 1 2 1 1 0
2     sam 1 0 1 1 2 0 0 1
3 teacher 0 1 1 0 1 1 1 0 
```

**基础溶液**。这是一个相应的基本解决方案，其中前两行执行熔化，下一行确保对列进行排序，最后一行从长到宽重塑：

```
> m <- do.call(rbind, lapply(L2, as.data.frame))
> m$row <- sub("[.].*", "", rownames(m))
> m$Var1 <- factor(as.character(m$Var1))
> xtabs(Freq ~ row + Var1, m)
         Var1
row       ! ? c e i k l t
  greg    0 0 0 1 2 1 1 0
  sam     1 0 1 1 2 0 0 1
  teacher 0 1 1 0 1 1 1 0 
```

编辑：添加了一个基本解决方案并修改了排序线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T17:04:57.960

在键入此内容时，我想到了此解决方案，但想知道是否有更有效的解决方案：

```
chars <- sort(unique(unlist(lapply(L2, names))))
L3 <- lapply(L2, function(x){
   nots <- chars[!chars %in% names(x)]
   new <- rev(c(x, rep(0, length(nots))))
   names(new)[1:length(nots)] <- nots
   new[order(names(new))]
})
do.call(rbind, L3) 
```

产量：

```
 ! ? c e i k l t
greg    0 0 0 1 2 1 1 0
sam     1 0 1 1 2 0 0 1
teacher 0 1 1 0 1 1 1 0 
```

# javascript - Meteor 大型应用程序 - 未封闭

> ID：14112378
> 
> 赞同：1
> 
> 时间：2013-01-01T17:04:58.557
> 
> 标签：javascript, meteor

我正在 Meteor 开发一个大型企业应用程序。我遇到的问题是，一旦我的 html 页面长度超过 900 多行，我就会开始偶尔（更常见的是使用更多代码行）收到以下错误：

```
Your app is crashing. Here's the latest log.

Errors prevented startup:
Exception while bundling application:
Error: unclosed <body> - line 7, file /var/www/www.######.com/#######.html
<body>
    at new html_scanner.scan.parseError (/usr/lib/meteor/packages/templating/html_scanner.js:23:14)
    at Object.html_scanner.scan (/usr/lib/meteor/packages/templating/html_scanner.js:92:15)
    at /usr/lib/meteor/packages/templating/package.js:46:32
    at _.extend.add_file (/usr/lib/meteor/app/lib/bundler.js:195:5)
    at self.api.add_files (/usr/lib/meteor/app/lib/bundler.js:96:16)
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/lib/meteor/app/lib/third/underscore.js:79:11)
    at self.api.add_files (/usr/lib/meteor/app/lib/bundler.js:95:11)
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/lib/meteor/app/lib/third/underscore.js:79:11)
Your application is crashing. Waiting for file change. 
```

如果我多次刷新我的页面，它最终会起作用，并且我知道没有未关闭的标签。我已经通过几个 html lint 程序运行了 html，没有任何错误。我的代码是专有的，所以我不能发布它，但想知道其他人遇到过这个问题吗？

我想知道 html_scanner 是否有问题，但没有时间调试模板包。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T01:15:28.347

我试图想出一个 900 多行的示例来复制这个问题，但无法用我想出的基本 html 来做到这一点。我确实想出了一个解决方案，希望能帮助其他人。由于模板已经内置，我没有为模板标签中的每个“视图”创建一个单独的 html，而不是一个大的 html：

```
<template name="testView">(content)</template> 
```

然后使用以下方法将每个视图注入 html 主页：

```
{{> testView }} 
```

似乎已经解决了上面的问题，我的主 html 页面减少到 300 行，每个视图都在自己的 html 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:01:45.333

错误消息似乎在抱怨未关闭的标签。我会检查您的 HTML 并确保您正确关闭了所有标签。

与您的具体问题无关，但是在将模板包装在标签中时遇到了类似的错误。

# function - 添加功能描述eclipse CDT

> ID：14112382
> 
> 赞同：0
> 
> 时间：2013-01-01T17:05:16.060
> 
> 标签：function, eclipse-cdt

我想要做的是在函数定义中添加一些注释，并在我将鼠标悬停在函数上时将其视为描述。

像这样：

![图片](../Images/f22b1437022edbd3ad5aa7856fba51dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:44:22.310

这是 CDT 中一个突出的增强请求。见：
[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=281437](https://bugs.eclipse.org/bugs/show_bug.cgi?id=281437)
[https://bugs.eclipse.org/bugs/show_bug.cgi?id=251050](https://bugs.eclipse.org/bugs/show_bug.cgi?id=251050)
[https://bugs.eclipse.org/错误/show_bug.cgi?id=48215](https://bugs.eclipse.org/bugs/show_bug.cgi?id=48215)

您可以尝试使用此处提到的插件：
[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=48215#c4](https://bugs.eclipse.org/bugs/show_bug.cgi?id=48215#c4)

该插件不受支持，但显然可以工作。我打算尝试自己安装它。

# git - 如何将带有 GIT 快照的 Xcode 4.5 项目移动到新位置

> ID：14112384
> 
> 赞同：0
> 
> 时间：2013-01-01T17:05:33.993
> 
> 标签：git, xcode4.5

我正在将 Xcode 4.5 项目移动到另一台计算机。该项目有很多快照。我希望我的所有快照都与项目一起传输到新计算机，并在 Xcode 文件菜单下的“恢复快照”中可见。

我知道 .git 在项目中有一个硬编码的路径。如何在新位置进行设置，以便项目可以找到其转移的 git 存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:08:40.683

`git push`+ `git pull`^.^

将其发送到远程服务器，然后在新计算机上检索它。除了版本控制之外，这几乎就是 GIT 的用途。

如果您为网站运行任何类型的服务器，您可以设置自己的 GIT 服务器，或者您可以注册一个 GitHub 帐户。这将允许您进行异地备份，并且您将能够下载具有完整历史记录的代码，用于您希望工作的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:07:29.963

将您的存储库推送到 Github 或 Bitbucket（或任何 git 服务器位置），然后将其下拉到新计算机。这将包含 .gitignore 中未列出的所有内容。git 存储库的路径无关紧要。自您上次提交以来，您的项目中的结构将被保留，因此应该拥有您需要的一切。

# vb.net - 将 BLL（业务逻辑层）分解为 BLL 和 DAL（数据访问层）

> ID：14112392
> 
> 赞同：7
> 
> 时间：2013-01-01T17:06:08.913
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
Imports Microsoft.VisualBasic

Public Class PersonBLL
    Private Name As String
    Private Age As Integer

    Dim objPersonDAL As New PersonDAL
    Dim objPerson As Person

    Public Sub getPersonByID()
        objPerson = objPersonDAL.getPersonByID()
        MsgBox(objPerson.Name)
    End Sub
End Class

Public Class PersonDAL
    Private Name As String
    Private Age As Integer

    Public Function getPersonByID() As Person
        'Connect to database and get Person.  Return a person object
        Dim p1 As New Person
        p1.Name = "Ian"
        p1.Age = 30
        Return p1
    End Function
End Class

Public Class Person
    Private _Name As String
    Private _Age As Integer

    Public Property Name() As String
        Get
            Return _Name
        End Get
        Set(ByVal value As String)
            _Name = value
        End Set
    End Property

    Public Property Age() As Integer
        Get
            Return _Age
        End Get
        Set(ByVal value As Integer)
            _Age = value
        End Set
    End Property
End Class 
```

PersonBLL 调用 PersonDAL 并返回一个 Person 对象。这是正确的方法吗？即，我已经确定了一个持久类并创建了一个相应的 DAL 类，该类具有用于访问数据和返回 Person 对象的函数。

有评论指出这个问题是“主观的”。我同意这一点。我意识到设计取决于项目的要求。是否有任何记录用于设计类似于 SOLID（单一责任等）等的 DAL 的原则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:08:30.353

是的，您的问题展示了一种将逻辑分层的非常干净的方法。该类`PersonBLL`将是业务层的`PersonDAL`一部分，该类将是数据访问层的`Person`一部分，该类将是数据传输对象 (DTO) 层的一部分。这是一种非常常见的分离图层的方法，在许多情况下都可以很好地工作。

我唯一的建议是：

*   你应该把每一层放在他们自己的命名空间中，如果不是他们自己的类库项目的话。
*   您不应显示来自业务层的消息框。我假设您这样做只是为了演示，但以防万一，我想我应该提一下。显示消息框应该是 UI 层的一部分。例如，如果您`PersonBLL.getPersonByID`从 Windows 服务或 Web 服务调用，则显示消息框是完全不合适的。
*   通常，所有方法都是 PascalCase，而不是 camelCase。有些人更喜欢将私有方法设为驼峰式，但公共方法当然不应该是驼峰式。
*   考虑使用依赖注入技术 (DI) 将数据访问对象注入业务对象。

**依赖注入**

以下是如何使用 DI 技术执行此操作的示例：

```
Public Class BusinessFactory
    Public Function NewPersonBusiness() As IPersonBusiness
        Return New PersonBusiness(New PersonDataAccess())
    End Function
End Class

Public Class PersonBusiness
    Implements IPersonBusiness

    Public Sub New(personDataAccess As IPersonDataAccess)
        _personDataAccess = personDataAccess
    End Sub

    Private _personDataAccess As IPersonDataAccess

    Public Function GetPersonByID() As PersonDto Implements IPersonBusiness.GetPersonByID
        Return _personDataAccess.GetPersonByID()
    End Sub
End Class

Public Interface IPersonBusiness
    Function GetPersonByID() As PersonDto
End Interface

Public Interface IPersonDataAccess
    Function GetPersonById() As PersonDto
End Interface

Public Class PersonDto
    Private _name As String
    Private _age As Integer

    Public Property Name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property

    Public Property Age() As Integer
        Get
            Return _age
        End Get
        Set(ByVal value As Integer)
            _age = value
        End Set
    End Property
End Class 
```

这样做有很多好处。您可以拥有多个可互换的数据访问层实现，因此更加灵活。此外，当您想要对业务类进行单元测试时，您可以注入一个虚假的数据访问对象。DI 设计避免了许多导致错误、意大利面条式代码的陷阱。

对于 DI，通常建议您将依赖对象作为接口而不是具体类型（例如`IPersonDataAccess`，而不是`PersonDataAccess`）。这样做可能有点麻烦，但你很快就会习惯它。由于您通常在那时为每个类创建一个接口，因此将接口放在与类相同的代码文件中会很方便。因此，例如，PersonBusiness.vb 将包含`PersonDataAccess`类和`IPersonDataAccess`接口。

对依赖项使用接口而不是类很重要的原因有两个：

1.  它确保了设计的灵活性。您希望能够覆盖依赖类型的每个公共成员，以便您可以创建任何类型的具体实现。还有其他方法可以做到这一点。例如，您可以通过简单地使用修饰符`IPersonDataAcess`标记类中的每个公共属性和方法来跳过创建接口，但没有什么强迫您这样做。即使您一直记得这样做，但这并不意味着其他处理您的代码的人会知道他们应该这样做。`PersonDataAccess``Overrideable`

    DI 通常与单元测试联系在一起，因为它是确保代码可测试的最佳工具。在进行单元测试时，特别重要的是您能够覆盖依赖类型中的任何成员，这样您就可以制作一个“假”对象，该对象按照您需要的方式工作，以便正确执行单元测试。这些“假”对象称为*mocks*。

2.  你在技术上对你的依赖更加诚实。实际上，您并不是真的说您的依赖项实际上是`PersonDataAccess`该类的一个实例。实际上，您的依赖项是碰巧具有相同公共接口的任何对象。通过询问课程，您暗示您需要特定的实现，这是一个谎言。如果你设计得当，你只关心接口是否相同，所以只询问接口本身，你就是在精确指定你要指定的内容:)

# java - 将 2 个相同的片段添加到同一个容器中

> ID：14112393
> 
> 赞同：0
> 
> 时间：2013-01-01T17:06:31.013
> 
> 标签：java, android, xml

正如您在标题中看到的那样，我正在尝试将 2 个相同的片段添加到同一个容器中。我正在使用 fragmentransaction 添加我的片段。它第一次工作，但是当我尝试添加第二个片段时，片段被替换。

这是我的添加代码：

```
public void addNewCategoryFragment(Category c) {
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager
        .beginTransaction();
CategoryFragment categoryFragment = new CategoryFragment(c.name);
fragmentTransaction.add(R.id.fragment_root, categoryFragment, String.valueOf(c.getID()));
fragmentTransaction.commit();
} 
```

这是我试图将片段添加到的 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@drawable/school"
     android:orientation="vertical"
     tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/fragment_root"
    android:layout_width="match_parent"
    android:layout_height="413dp"
    android:orientation="vertical" >
</LinearLayout>

<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/submit_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|right"
    android:text="Submit" />

<Button
    android:id="@+id/new_category_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom|left"
    android:onClick="createNewCategory"
    android:text="New Category" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:16:05.553

乍一看，java 看起来不错，可能是布局。在不知道片段布局的情况下很难说，但我猜它只是被掩盖了。尝试在它们周围放置一个 ScrollView 或将 isScrollContainer 设置为 true，如下所示：

```
<LinearLayout
  android:id="@+id/fragment_root"
  android:layout_width="match_parent"
  android:layout_height="413dp"
  android:orientation="vertical"
  android:isScrollContainer="true">
</LinearLayout> 
```

我还会在布局的其余部分用“match_parent”替换“fill_parent”值，因为不推荐使用 fill_parent

# matlab - 将变量发送到函数/全局变量

> ID：14112403
> 
> 赞同：1
> 
> 时间：2013-01-01T17:07:49.340
> 
> 标签：matlab

我`delta`在 main 和 line 中有变量：`Y_Q = blkproc(Y_dct, [8 8], @Quantization);`

我需要函数`Quantization`来了解变量`delta`。

有人可以帮帮我吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:17:40.597

如果`Quantization`是一个子函数，它将能够访问外部函数中的变量（您还可以引入一个`Quantization`使用回调参数和您需要的任何附加值调用的子函数）。

另一种方法是使您的共享变量成为全局变量，使用`global`每个应该共享它的函数顶部的语句。

# java - 与@Transactional 混淆

> ID：14112407
> 
> 赞同：-4
> 
> 时间：2013-01-01T17:08:14.207
> 
> 标签：java, spring

> **可能重复：**
> [@Transactional 和 AOP 之间的混淆](https://stackoverflow.com/questions/14112184/confusion-between-transactional-and-aop)

我是 Spring 框架的新手，我在 @Transactional 和 tx:advice 之间感到困惑，因为我读到 AOP 用于提供声明性事务管理，而 @Transactional 也有同样的作用......它们是一样的吗？@Transactional 在内部使用 AOP 吗？在哪里使用 AOP 以及在哪里使用 @Transactional

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:16:26.850

在过去几年从事的所有项目中，@Transactonal 是一个更实用的解决方案。然而，在一些非常特殊的情况下，我还必须使用 Spring AOP 来允许使用多个 JDBC 连接/TransactionManager，因为@Transaction 与单个事务管理器相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:58:48.363

`@Transactional`只是一种简单的方法来声明一个类的方法或所有方法（如果放在类级别）是事务性的。

Spring 使用 AOP 代理来拦截对方法的调用，启动事务（如果需要），在方法执行后，它会提交或回滚事务。

参考：[http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained)

# iphone - 在 Safari/GMail 中打开自定义 url 链接

> ID：14112409
> 
> 赞同：9
> 
> 时间：2013-01-01T17:08:28.843
> 
> 标签：iphone, ios, cocoa-touch, email, url-scheme

我在电子邮件中发送自定义 url 方案链接：

```
[body appendString:@"<div><a href=\"my-custom-url-scheme:test\"><button type=\"button\">Open in App</button></a></div>"]; 
```

这成功地在我发送的电子邮件中添加了一个按钮，点击该按钮时，会打开我的应用程序（如果已安装）。

当我在 iOS 设备上的 mail.app 中打开电子邮件时，这可以正常工作，但是当我在 Gmail 中打开邮件时（通过 Safari 和本机 GMail 应用程序），它什么也没做。

这是框架的限制吗？或者 safari 应该能够识别这些链接吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-05T13:21:44.167

我为此找到的最佳解决方案是链接到 Web 服务器上的 PHP 脚本，该脚本接受参数并将请求重定向到 Safari 中的自定义 URL 方案。

此链接将在电子邮件中：

[http://myserver.com/_script.php?parameter=one](http://myserver.com/_script.php?parameter=one)

然后重定向到：

myappscheme://open/?parameter=one

这确实意味着您必须打开 Safari 才能处理该链接，但鉴于您无论如何都是从 GMail 应用程序打开该链接，我认为这是一个小问题才能使其正常工作。

# ruby-on-rails - routes.rb 定义不正确

> ID：14112417
> 
> 赞同：1
> 
> 时间：2013-01-01T17:09:13.600
> 
> 标签：ruby-on-rails, routes

我有两个控制器：Tasksadmins 和 Workers。

我定义了两个根，但有人告诉我它有问题。

有人可以告诉我问题是什么吗？

```
TODOLIST::Application.routes.draw do
  devise_for :users

  resources :tasksadmins
  root to: "tasksadmins#index"

  resources :workers
  root to: "workes#index"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:19:44.020

路由 DSL的`root`方法允许您为应用程序或特定命名空间定义默认路由：您不能有多个“根”路由。

资源的默认路由（例如`/workers`）被路由到相应控制器的索引操作（`WorkersController`），无需为每个控制器指定它。

如果`root`多次使用该方法，将使用最后一次。它会在这里`workers#index`。简化您的路线：

```
TODOLIST::Application.routes.draw do
  root to: "workers#index"

  devise_for :users

  resources :tasksadmins
  resources :workers

end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:23:32.177

`root`并不意味着`index`控制器的动作。相反，它本质上意味着主页：当我转到时会调用什么操作`http://www.example.com/`？

因此，只有定义一个才有意义`root`：现在，您`http://www.example.com/`同时指向`tasksadmins#index`and `workers#index`，这没有多大意义。Rails 只会选择其中之一，但这可能不是您要寻找的行为。

我怀疑你正在尝试改进你的`resources`路线，但没有必要：`resources :workers`已经定义了`http://www.example.com/workers`指向的路线`workers#index`，所以这条线应该是你需要的所有工作人员。

但是，如果您想`http://www.example.com/`指向与 相同的工人列表`http://www.example.com/workers`，那么`root 'workers#index'`是完全正确的。

# c++ - 内存泄漏检测文件错误

> ID：14112419
> 
> 赞同：5
> 
> 时间：2013-01-01T17:09:15.970
> 
> 标签：c++, visual-studio-2010, visual-c++, memory-leaks, crtdbg.h

我有一个程序应该输出有关其内存泄漏的信息。但是，它不起作用。以下是程序：

```
#include <crtdbg.h>
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    FILE *out_file;
    int *a = new int;

    //Redirect the error stream to a file.
    freopen_s (&out_file, "Memory Leaks.txt", "w", stderr);

    //Turn on debugging for memory leaks. This is automatically turned off when the build is Release.
    _CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
    _CrtSetReportMode (_CRT_WARN, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_WARN, _CRTDBG_FILE_STDERR);
    _CrtSetReportMode (_CRT_ERROR, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_ERROR, _CRTDBG_FILE_STDERR);
    _CrtSetReportMode (_CRT_ASSERT, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_ASSERT, _CRTDBG_FILE_STDERR);

    return 0;
} 
```

我正在构建 DEBUG 版本，因此不应忽略这些功能。我使用的编译器是Visual Studio 2010。该程序只创建一个文件“Memory Leaks.txt”，但文件中没有内容。有什么想法吗？

- 编辑 -

我已经按照建议更新了程序以使用“正确的文件句柄”。该程序仍然没有向文件输出任何内容。

- 编辑 -

问题在于关闭文件。下面的代码现在可以工作了。

```
#include <crtdbg.h>
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
    HANDLE hLogFile;
    int *a;

    //Open a file for output.
    hLogFile = CreateFile ("Memory Leaks.txt", GENERIC_WRITE, FILE_SHARE_WRITE, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

    //Turn on debugging for memory leaks. This is automatically turned off when the build is Release.
    _CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
    _CrtSetReportMode (_CRT_WARN, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_WARN, hLogFile);
    _CrtSetReportMode (_CRT_ERROR, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_ERROR, hLogFile);
    _CrtSetReportMode (_CRT_ASSERT, _CRTDBG_MODE_FILE);
    _CrtSetReportFile (_CRT_ASSERT, hLogFile);

    //Create a memory leak.
    a = new int;

    //Don't close this file. Closing the file will cause the report not to be outputted.
    //CloseHandle(hLogFile);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:36:38.833

停止在 GUI Windows 应用程序中重定向 stderr*或*stdout，并打开正确的文件句柄。这是一个单线。

```
HANDLE hLogFile = CreateFile(L"Memory Leaks.txt", GENERIC_WRITE, FILE_SHARE_WRITE, 
  NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);

//Turn on debugging for memory leaks. This is automatically turned off when the build is Release.
_CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
_CrtSetReportMode (_CRT_WARN, _CRTDBG_MODE_FILE);
_CrtSetReportFile (_CRT_WARN, hLogFile);
_CrtSetReportMode (_CRT_ERROR, _CRTDBG_MODE_FILE);
_CrtSetReportFile (_CRT_ERROR, hLogFile);
_CrtSetReportMode (_CRT_ASSERT, _CRTDBG_MODE_FILE);
_CrtSetReportFile (_CRT_ASSERT, hLogFile); 
```

并且在实际生成报告之前不要关闭 HANDLE！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:33:26.223

应该用于输出流**stderr**。

```
//Redirect the error stream to a file.
freopen_s (&out_file, "Memory Leaks.txt", "w", stderr); 
```

可以找到示例：http: [//msdn.microsoft.com/en-us/library/a68f826y%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/a68f826y%28v=VS.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T14:05:29.630

试试这个

```
#include < crtdbg.h >
#define _CRTDBG_MAP_ALLOC 
```

# javascript - Javascript FileReader 有时不起作用

> ID：14112426
> 
> 赞同：0
> 
> 时间：2013-01-01T17:10:41.710
> 
> 标签：javascript, html, input, filereader

我正在构建一个应用程序来创建可以在 DartFlash 中使用的 TextureAtlas。我的想法是使用输入标签加载许多文件，然后使用 FileReader API 将这些文件转换为图像，在画布上绘制它们并将画布转储为用户可以下载的图像，以及描述图像的 JSON 文件。但是，它有时无法完成任务并正确写入输出图像。我很确定这是一个同步问题，但我找不到问题所在。我已经在 Chrome 中对其进行了测试，它的成功率更高。在 Firefox 中，它的失败率更高。

这是代码：

```
 <html>
 <head>
 <script type="text/javascript">

 "use strict"

 var files=null;
 var img_list=[];
 var num_files=-1;
 var img_list_length=0;
 var output_json={}
 var output_canvas=null;
 var output_img=null;
 var download_png=null;

 function createOutputImg()
 {
    if(num_files != img_list_length)
    {
        return;
    }
    img_list.sort(function (a,b)
    {
        if(a.name > b.name)
        {
            return 1;
        }
        return -1;
    });
    output_canvas=document.createElement('canvas');
    var total_width=0;
    var highest_height=0;
    for (var i=0; i<img_list.length; i++)
    {
        total_width+=img_list[i].width;
        if(highest_height < img_list[i].height)
        {
            highest_height=img_list[i].height;
        }
    }
    console.log(total_width);
    output_canvas.width=total_width;
    output_canvas.height=highest_height;
    var context=output_canvas.getContext("2d");
    output_json["frames"]=[];
    var current_posx=0;
    for (var i=0; i<img_list.length; i++)
    {
        var img=img_list[i];
        context.drawImage(img, current_posx, 0);
        console.log(i.toString()+" - "+img.name);
        output_json["frames"].push(
        {
            "filename":img.name,
            "frame":
            {
                "x":current_posx,
                "y":0,
                "w":img.width,
                "h":img.height
            },
            "rotated":false,
            "trimmed":false,
            "spriteSourceSize":
            {
                "x":0,
                "y":0,
                "w":img.width,
                "h":img.height
            },
            "sourceSize":
            {
                "w":img.width,
                "h":img.height
            }
        });
        current_posx+=img.width;
    }
    output_img=document.createElement('img');
    output_img.src=output_canvas.toDataURL("image/png");

    if(output_img.width != total_width)
    {
        alert("Error happened somewhere, please, refresh and retry again");
        return;
    }

    var paragraph=document.createElement('p');
    paragraph.innerHTML="Type a name for this resource.";
    document.body.appendChild(paragraph);

    var input_name=document.createElement('input');
    input_name.type="text";
    document.body.appendChild(document.createElement('br'));
    document.body.appendChild(input_name);
    var go_button=document.createElement('button');
    go_button.innerHTML="Download";
    document.body.appendChild(go_button);
    document.body.appendChild(document.createElement('br'));
    go_button.inputElement=input_name;
    go_button.onclick=function (evt)
    {
        var resource_name=evt.target.inputElement.value;
        if(resource_name == "")
        {
            alert ("Please type a name for this resource.");
            return;
        }
        output_json["meta"]={}
        output_json["meta"]["app"]="HTML ImagePacker";
        output_json["meta"]["image"]=resource_name+".png";
        output_json["meta"]["format"]="RGBA8888";
        output_json["meta"]["size"]={};
        output_json["meta"]["size"]["w"]=output_img.width;
        output_json["meta"]["size"]["h"]=output_img.height;
        output_json["meta"]["scale"]="1";
        var json_data=new Blob([JSON.stringify(output_json)]);
        var download_json=document.createElement('a');
        download_json.innerHTML=resource_name+".json";
        download_json.download=download_json.innerHTML;
        download_json.href=window.URL.createObjectURL(json_data);
        var download_png=document.createElement('a');
        download_png.innerHTML=resource_name+".png";
        download_png.download=download_png.innerHTML;
        download_png.href=output_img.src;
        document.body.appendChild(document.createElement('br'));
        document.body.appendChild(download_json);
        document.body.appendChild(document.createElement('br'));
        document.body.appendChild(download_png);
        document.body.appendChild(document.createElement('br'));
        document.body.appendChild(output_img);
    };
 }

 function handleFileSelect()
 {
    var files=document.getElementById("files").files;
    num_files=files.length;
    console.log(files);
    var height=0;
    for(var i=0; i<files.length; i++)
    {
        (function (file)
        {
            var reader=new FileReader();
            reader.name=file.name;
            reader.readAsDataURL(file);
            reader.onload=(function (evt) 
            {
                //console.log(evt);
                if(evt.target.readyState == 2)
                {
                    var img=document.createElement('img');
                    img.name=evt.target.name;
                    img.src=evt.target.result;
                    img_list.push(img);
                    img_list_length+=1;
                    //document.body.appendChild(img, null);
                    if(num_files == img_list_length)
                    {
                        createOutputImg();
                    }
                }
            });
        })(files[i]);
    }
 }

 </script>
 </head>

 <body>
 <input type="file" id="files" name="files[]" onchange="handleFileSelect()"  multiple/><br>

 </body>
 </html> 
```

# javascript - 关闭或打开 Div

> ID：14112430
> 
> 赞同：-6
> 
> 时间：2013-01-01T17:11:11.643
> 
> 标签：javascript, jquery

> **可能重复：**
> [关闭/打开 div](https://stackoverflow.com/questions/14107856/switch-divs-off-on)

首先，我意识到我以前曾问过这个问题，但我没有找到好的答案，所以我第二次尝试幸运！

我有这些 div（*它们的工作方式类似于按钮*），我希望能够在我选择时打开/关闭它们。

这是我的尝试，但显然一旦 div 被关闭，它就无法再次打开。

第一的，

```
 $("#num-one").off();
    $("#num-two").off();
    $("#num-three").off(); 
```

稍后，

```
 $("#num-one").on();
    $("#num-two").on();
    $("#num-three").on(); 
```

这些是我的功能：

```
$("#numOne").click(function(){
        doSomething();
    });

$("#numTwo").click(function(){
        doSomething();
    });

$("#numThree").click(function(){
        doSomething();
    }); 
```

这些功能应该可以工作 - 但它们应该能够停止工作一段时间 - 我猜是禁用的 - 并在一段时间后重新启用。实现这一目标的另一种方法是什么？

新年快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:15:33.840

Off() 删除事件处理程序。如果要重新添加处理程序，则必须将处理程序传递给 on() 方法。

```
$("#num-one").on("click", doSomething);
$("#num-one").off();
$("#num-one").on("click", doSomething);

// a bit cleaner
var button = $("#num-one");

button.click(doSomething);
button.off();
button.click(doSomething); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:17:25.077

可以这样写：

```
$("#num-one,#num-two,#num-three").off('click');

$("#num-one,#num-two,#num-three").on('click',doSomething); 
```

# c# - 使用 2 个列表查找列表

> ID：14112432
> 
> 赞同：-5
> 
> 时间：2013-01-01T17:11:18.927
> 
> 标签：c#, list

在我的程序中，我有 2 个列表：

```
List<string> aaa = new List<string>();
List<string> bbb = new List<string>(); 
```

在 aaa 列表中，我有 (1 2 3 4) 之类的数字。在列表 bbb 我有像 (0 1 0 1) 这样的数字。

现在我需要检查列表 aaa 上的索引是否为空。之后我需要获取索引的值（如果不为空）。然后在同一 aaa.index 上检索 bbb 上的值。

我用：

```
var exist = aaa.Find(x => x == "2"); 
```

但需要一些澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:16:31.877

```
var inx = aaa.IndexOf("2");
if (inx >= 0)
{
    var result = bbb[inx];
} 
```

# c# - Incorrect value when saving enum

> ID：14112436
> 
> 赞同：5
> 
> 时间：2013-01-01T17:11:34.193
> 
> 标签：c#, entity-framework, code-first, entity-framework-5, entity-framework-migrations

I'm having a little difficulty getting Entity Framework 5 Enums to map to an integer column in a migration. Here's what the code looks like:

```
[Table("UserProfile")]
public class UserProfile
{
    public enum StudentStatusType
    {
        Student = 1,
        Graduate = 2
    }

    [Key]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string FullName { get; set; }
    public StudentStatusType Status { get; set; }
} 
```

The migration looks like this:

```
public partial class EnumTest : DbMigration
{
    public override void Up()
    {
        AddColumn("UserProfile", "Status", c => c.Int(nullable: false, defaultValue:1));
    }

    public override void Down()
    {
        DropColumn("UserProfile", "Status");
    }
} 
```

However when I save changes it doesn't reflect them in the database.

```
var user = new UserProfile();
user.Status = UserProfile.StudentStatusType.Graduate;
user.FullName = "new";
user.UserName = "new";
users.UserProfiles.Add(user);
users.SaveChanges(); 
```

Database:

```
----------------------------------------------------
|UserId   |   UserName   |   FullName   |   Status |
----------------------------------------------------
|1        |   new        |   new        |   1      |
---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:24:37.620

The reason for this is that the enum is nested in a class. Entity Framework does not discover nested types. Try moving the enum out of the class and see if it works.

**Edit**

EF6 now supports nested types (including enums) when using Code First approach.

# python - 无法理解值错误尝试

> ID：14112438
> 
> 赞同：0
> 
> 时间：2013-01-01T17:11:52.820
> 
> 标签：python, python-2.7

有人可以解释一下这段代码是如何为我工作的吗？从try命令下来我不明白。这个while循环对我有用。但是我不明白它是如何工作的。

```
price = 110 #this i get
ttt = 1 #this i get

while price< 0 or price> 100: #this i get
    if ttt >=2: #this i get
        print "This is an invalid entry" #this i get
        print "Please enter a number between 0 and 100" #this i get
    try: #From here i do not understand , but without it, it does not work
          price= int(raw_input("Please enter the price : "))
    except ValueError:
      price = -1   
    ttt +=1 
```

由于我是一名学习者，我真的不想要更复杂的方法来做到这一点。我只想完全了解循环中发生的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:15:02.853

`try:`启动一个可以处理异常的代码块。该`except ValueError`子句的意思是，如果有任何东西在块中*抛出*`ValueError`异常，那么该异常将被`except`.

在这种情况下，这意味着如果有人输入一个*不是*有效整数的值，`price`将被设置为`-1`.

因为`price`现在设置为`-1`，所以 while 循环再次询问价格（`-1 < 0`is `True`）：

```
while price< 0 or price> 100:  # price was set to -1, so the while loop condition is True. 
```

以下是异常如何中断程序的简短演示：

```
>>> int('not an integer')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'not an integer'
>>> try:
...     int('not an integer')
... except ValueError:
...     print 'Caught the exception, no problemo!'
... 
Caught the exception, no problemo!
>>> try:
...     price = int('not an integer')
... except ValueError:
...     price = -1
... 
>>> price
-1 
```

有关其工作原理的更多信息，请参阅[有关异常处理的 Python 教程。](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:15:13.513

`try ... except`处理异常。异常处理是一个广泛的主题，对于 python，您可以在此处阅读更多信息：http: [//docs.python.org/2/tutorial/errors.html#handling-exceptions](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)

在您的情况下，输入来自用户：

```
raw_input("Please enter the price : ") 
```

并将其转换为整数：

```
int(...) 
```

现在，当用户输入“Happy New Year”时会发生什么？这不是一个数字，它是一个错误的值，它是一个`ValueError`. 当函数无法产生结果时，它会引发[**。**](http://docs.python.org/2/reference/simple_stmts.html#raise)[`int`](http://docs.python.org/2/library/functions.html#int) [](http://docs.python.org/2/reference/simple_stmts.html#raise)**[`ValueError`](http://docs.python.org/2/library/exceptions.html#exceptions.ValueError)**

 **如果不*处理*该条件，程序将停在那里。您可以将关键部分包装到一个[`try`](http://docs.python.org/2/reference/compound_stmts.html#try)语句中，并指定如果发生异常，您希望发生什么，而不是仅仅退出。在您的情况下，价格仅设置为-1：

```
price = -1 
```

最后，应该确保用户输入的 a`price`介于 0 和 100 之间，仅此而已。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:15:37.943

*try 语句是一种在代码崩溃*之前捕获代码的方法，或者退出 do 到未捕获的异常。某些函数可能会抛出可能导致应用程序崩溃/强制退出的错误，而 try 块会处理那些可能出现的错误，并让您对其进行处理。

ie -> 一个试图打开日志文件的应用程序，但没有找到文件...

> 未捕获：强制，IOException。
> 捕获：执行另一个创建文件的代码块。

在您的示例中，它将从提示中获取原始数据，并将其分配给整数值...但是`abc`不能转换为整数，因此它通常会崩溃...在 TRY 块内，它将返回一个-1，表示它没有收到预期的结果。**

# c# - 如何使用 Salt 创建 SHA256 哈希？

> ID：14112440
> 
> 赞同：8
> 
> 时间：2013-01-01T17:12:08.550
> 
> 标签：c#, hash, comparison

我目前正在开发一个 Visual Studio C# Windows 窗体项目。但是，我对 SHA256 + salted 的工作方式感到困惑。我在网上找到了一些示例，但无法理解如何调用此函数。

我想在连接到数据库（Microsoft Access 2010）的登录表单中调用此函数。

*   如何通过单击按钮并从 中读取密码来调用此功能`Textbox`？
*   如何在 `Messagebox.Show`方法中显示哈希值？（出于我的测试目的）
*   是否可以比较两个文本（散列和加盐）并给出肯定的结果？

    ```
    public static string sha256encrypt(string phrase, string UserName)
    {
        string salt = CreateSalt(UserName);
        string saltAndPwd = String.Concat(phrase, salt);
        UTF8Encoding encoder = new UTF8Encoding();
        SHA256Managed sha256hasher = new SHA256Managed();
        byte[] hashedDataBytes =      sha256hasher.ComputeHash(encoder.GetBytes(saltAndPwd));
        string hashedPwd = String.Concat(byteArrayToString(hashedDataBytes), salt);
        return hashedPwd;
    }

    public static string byteArrayToString(byte[] inputArray)
    {
        StringBuilder output = new StringBuilder("");
        for (int i = 0; i < inputArray.Length; i++)
        {
            output.Append(inputArray[i].ToString("X2"));
        }
        return output.ToString();
    }

    private static string CreateSalt(string UserName)
    {
        string username = UserName;
        byte[] userBytes; 
        string salt;
        userBytes = ASCIIEncoding.ASCII.GetBytes(username);
        long XORED = 0x00; 

        foreach (int x in userBytes)
            XORED = XORED ^ x;

        Random rand = new Random(Convert.ToInt32(XORED));
        salt = rand.Next().ToString();
        salt += rand.Next().ToString();
        salt += rand.Next().ToString();
        salt += rand.Next().ToString();
        return salt;
    } 
    ```

如何使用盐创建 SHA256 哈希？

```
shavalue = (sha256encrypt("password", "username");
saltedandhashtext = CreateSalt(shavalue); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T17:15:58.023

您要做的是，单击按钮，将文本框值和用户名传递给`sha256encrypt`函数，例如：

```
 private void button1_Click(object sender, EventArgs e)
    {
        sha256encrypt(textBox1.Text, "SampleUserName");
    } 
```

对于第二个问题，使用 Messagebox.Show 做同样的事情：

```
 private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(sha256encrypt(textBox1.Text, "SampleUserName"));
    } 
```

第三点：我不确定您的意思，但是如果您想对文本进行加盐并将其与散列文本进行比较：

```
if(sha256encrypt("password", "username") == CreateSalt("password"))
   return true;
else
   return false; 
```

或者，如果您想手动比较它们：

```
MessageBox.Show(sha256encrypt("password", "username") + "\n\r" + CreateSalt("password")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:28:59.033

对于第一个问题，请查看 CC Inc 的答案。

到第二点： `MessageBox.Show(sha256encrypt(textBox1.Text, "SampleUserName"));`

3) 是的，是的。

`==`您可以使用比较器或比较两个字符串`string.Equals()`。

```
public bool compareHashs(string hash1, string hash2){
   if(hash1.Equals(hash2) //or hash1 == hash2
      return true;
   }else{
      return false;
   }  
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-19T10:42:11.377

```
public string ComputeSHA256Hash(string rawData)
{
    // Create a SHA256   
    using (SHA256 sha256Hash = SHA256.Create())
    {
        // ComputeHash - returns byte array  
        byte[] bytes = md5Hash.ComputeHash(Encoding.UTF8.GetBytes(rawData));
        // Convert byte array to a string   
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < bytes.Length; i++)
        {
            builder.Append(bytes[i].ToString("x2"));
        }
        return builder.ToString();
    }
} 
```

# forms - Javascript 警报变量，[Object htmlDivElement] 错误？

> ID：14112442
> 
> 赞同：0
> 
> 时间：2013-01-01T17:12:20.537
> 
> 标签：forms, variables, alert

我已经制作了一个简单的表单，其中包含一个是和一个否复选框，我想要它，以便当我按下是时它在警报框中显示 5，当我按下否时它显示 0 但目前当我点击提交时它会出现 [警告框中的对象 htmlDivElement]。

```
<script>

 function alertprice() {            // this will be called on submit of the form
 alert (runningtotal);           // alert the value in variable running total
 }

function totalprice () {                    // function totalprice will set runningtotal depending on boxes ticked
    if(document.getElementById('ramyes').checked) {
        var runningtotal = "5"
            return runningtotal;
}else if(document.getElementById('ramno').checked) {
        var runningtotal = "0"
            return runningtotal;
}
}
          </script> 
```

和html

```
<form name="theForm" action="shop.html" method="post" onSubmit="checkWholeForm(theForm); return alertprice()">
                <h2>Upgrade RAM to "4GB-Kit GEIL Evo One PC3-12800 DDR3-1600 CL9"?</h2>

        <h3>
            <input type="radio" name="ram" value="yes" id="ramyes">yes<br>
            <input type="radio" name="ram" value="no" id="ramno">no     
        </h3> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:21:04.567

你必须调用你的函数 totalprice()。例如像这样：

```
function alertprice(){
    alert(totalprice());
} 
```

# doctrine-orm - 关于教义2

> ID：14112443
> 
> 赞同：0
> 
> 时间：2013-01-01T17:12:44.513
> 
> 标签：doctrine-orm

我有两个 symfony 项目正在运行。Symfony 和 Symfony_BackUp 具有不同的配置和参数。

如果我想为 Symfony 项目更新数据库模式，那么我将使用以下命令。

```
C:\wamp\www\Symfony> php app/console doctrine:schema:update --force 
```

同样如果我想更新 Symfony_BackUp 项目的数据库模式。然后

```
C:\wamp\www\symfony_backup> php app/console doctrine:schema:update --force 
```

但问题是教义没有更新第二个模式。这有什么原因吗？

# php - PHP 不显示系统文件/MAC 文件

> ID：14112444
> 
> 赞同：0
> 
> 时间：2013-01-01T17:12:45.570
> 
> 标签：php, file, ftp

我有一个`php`将图像的 zip 文件上传到文件夹的脚本。此脚本递归地仅查找 zip 文件中的文件，并将所有文件放在服务器上的单个目录中。

问题是某些文件被双重上传。这不是脚本的错，而是由于苹果计算机的荒谬和自卑，当 Mac 创建图像的 zip 文件时，它会创建一个图像文件夹，然后创建另一个文件夹，其中只有它放置的完全相同的图像“。 _”在文件名前面。因此，鉴于我们不会很快因苹果计算机的消失而感到幸运，我试图在我的`php`脚本中包含一个简单的函数来搜索这些劣质的 mac 可憎之物并将它们从目录中删除。但是，`php`当我使用`"ftp_nlist"`.

所以我的问题是：我如何`php`才能拉出这些愚蠢的东西，以便我可以删除它们？

```
$contents = ftp_nlist($conn_id, '.');

foreach($contents as $key => $value){
echo $key." => ".$value."<BR>";

if(substr($value, 1, 1) == ".") {
    if(ftp_delete($conn_id, $value)) {
        echo "Deleting $value<BR>";
    }
}
echo "<BR>";
}
exit(); 
```

编辑：

所以多亏了斯蒂芬的建议，我才能想出这个可行的方法

```
if($zip->open($_FILES['theFile']['tmp_name']) === TRUE){
for($i = 0; $i < $zip->numFiles; $i++) {
    $filename = $zip->getNameIndex($i);
    $fileinfo = pathinfo($filename);
    copy("zip://".$_FILES['theFile']['tmp_name']."#".$filename, $ezPresenter['currentFolder'].'/'.$fileinfo['basename']);
}               
$zip->close();
}else{
exit("Could not upload/extract file");
}

$contents = ftp_rawlist($conn_id, '-a');

foreach($contents as $key => $value){
$value = explode(" ", $value);
$value = $value[count($value)-1];

echo $key." => ".$value."<BR>";

if(strpos($value, ".") === false) {
    if(ftp_delete($conn_id, $value)) {
        echo "Deleting $value<BR>";
    }
}

if(substr($value, 0, 2) == "._") {
    if(ftp_delete($conn_id, $value)) {
        echo "Deleting $value<BR>";
    }
}elseif(substr($value, 0, 1) == "." && $value != "." && $value != "..") {
    if(ftp_delete($conn_id, $value)) {
        echo "Deleting $value<BR>";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:30:39.630

改为使用[`ftp_rawlist`](http://php.net/manual/en/function.ftp-rawlist.php)。

> ftp_rawlist — 返回给定目录中文件的详细列表

```
ftp_rawlist($connid, "-a"); 
```

参数的`-a`意思`all`与 unix 命令行上的一样：`ls -a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:26:50.693

我之前遇到过这个问题，但我没有使用`ftp_nlist`. 我最终做的是使用 PHP 的[ZipArchive](http://us2.php.net/manual/en/class.ziparchive.php)打开 zip 文件并查找（并排除）`__MACOSX`目录。我还忽略了其中只有一个目录的 zip 文件（因此您不必解压缩文件，然后有两个目录很深来获取数据 - 这总是让我烦恼）。

我的解决方案可能不是最适合你的，因为它需要一些额外的处理，但它对我有用:)

无论如何，事不宜迟......这是我正在使用的代码。希望对您有所帮助：

```
//
// unzip the file
$zip = new ZipArchive;
if ($zip->open($fname) === TRUE) {
    //extract zip
    $zip->extractTo($dir);
    $zip->close();
    //detect single dir
    $basedir = function($x) use (&$basedir) {
        $files = glob($x.'*', GLOB_MARK);
        //ignore stupid mac directory
        $k = array_search($x.'__MACOSX/',$files);
        if($k!==FALSE) {
            unset($files[$k]);
            $files = array_values($files);
        }
        if(sizeof($files)==1 && is_dir($files[0]))
            return $basedir($files[0]);
        return $x;
    };
    //get root directory that has files in it
    $dir = substr($basedir($dir.'/'),0,-1);
    //
    // here I re-zipped the data from the base directory
    // and uploaded this file
    //
} else {
    //delete the file
    unlink($fname);
    //
    // some other error handling
    //
    return;
} 
```

# objective-c - Objective-c 重构，代码归属于哪里？

> ID：14112446
> 
> 赞同：1
> 
> 时间：2013-01-01T17:12:48.363
> 
> 标签：objective-c, ios, core-data, refactoring

我正在开发一个用于 Web 服务的 iOS 客户端，我从一个 Json API 获取数据，我解析并保存到 CoreData 中。我有一些重复，主要是我如何解析和保存对象。一个例子是一种创建用户的方法，它在两个控制器中几乎相同（将来可能会更多）：

```
- (User *)createUserFromDict:(NSDictionary *)dictionary
{

    User *user;

    NSNumberFormatter *numberFormatter= [[NSNumberFormatter alloc] init];
    NSNumber * userId = [numberFormatter numberFromString:(NSString *)[dictionary valueForKey:@"id"]];
    NSEntityDescription *userDescription = [NSEntityDescription entityForName:@"User" inManagedObjectContext:[appController managedObjectContext]];
    NSEntityDescription *imageDescription = [NSEntityDescription entityForName:@"Image" inManagedObjectContext:[appController managedObjectContext]];

    user = [[User alloc] initWithEntity:userDescription insertIntoManagedObjectContext:[appController managedObjectContext]];
    user.name = [dictionary valueForKey:@"name"];
    [...]

    Image *userAvatrar = [[Image alloc] initWithEntity:imageDescription    insertIntoManagedObjectContext:[appController managedObjectContext]];
    userAvatrar.url = [dictionary valueForKeyPath:@"avatar_image.url"];
    [...]
    NSError *error;
    [[appController managedObjectContext] save:&error];

    return user;
} 
```

我不确定这种重复是否必要，或者是否有更好的方法来做到这一点。我正在考虑创建一个“cacheManager”控制器类并在此处存储这样的方法，或者将其放入我的模型中。哪种方法是最好/正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:20:14.153

DRY - 不要重复自己的原则不仅可以节省代码，而且更重要的是允许在一个地方而不是多个地方进行维护。

单一职责原则指出每个单元（类/方法）应该只做一件事。

从而消除重复代码。

一个类或方法是否取决于缓存的参与程度和未来的需求。如果有意义的话，你可以慢慢使用一个方法，然后再重构一个类。

如果使用它的两个控制器是单独的类，那么似乎一个新类可能是继续的方式。

鉴于良好的命名约定，这也将使代码更容易遵循。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:19:17.037

最好的方法是让它成为你的 User 对象的类方法：

```
+ (User *)insertUserFromDictionary:(NSDictionary *)dictionary inManagedObjectContext: (NSManagedObjectContext*) moc
{

    User *user = nil;

    NSNumberFormatter *numberFormatter= [[NSNumberFormatter alloc] init];
    NSNumber * userId = [numberFormatter numberFromString:(NSString *)[dictionary valueForKey:@"id"]];
       NSEntityDescription *userDescription = [NSEntityDescription entityForName:@"User" inManagedObjectContext: moc];
    NSEntityDescription *imageDescription = [NSEntityDescription entityForName:@"Image" inManagedObjectContext: moc];

    user = [[User alloc] initWithEntity:userDescription insertIntoManagedObjectContext:moc];
    user.name = [dictionary valueForKey:@"name"];
    [...]

    Image *userAvatrar = [[Image alloc] initWithEntity:imageDescription    insertIntoManagedObjectContext: moc];
    userAvatrar.url = [dictionary valueForKeyPath:@"avatar_image.url"];
    [...]
    NSError *error;
    [moc save:&error];

    return user;
} 
```

你当然这样称呼它：

```
User *newUser = [User insertUserFromDictionary: userDictionary inManagedObjectContext: appcontroller.managedObjectContext]; 
```

还可以考虑将上下文的保存操作移出此类方法，并在插入用户后“自己”调用它，我在这里没有这样做。

# spree - 在 1.3 中使用自定义主题扩展时未定义方法“get_taxonomies”？

> ID：14112463
> 
> 赞同：0
> 
> 时间：2013-01-01T17:15:23.743
> 
> 标签：spree

我使用以下gemfile：

```
gem 'spree_gateway', :github => 'spree/spree_gateway'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => 'edge'
gem 'spree_theme_v1', :path => '../spree_theme_v1' 
```

当使用我使用命令“spree extension theme_v1”创建的最后一个“spree_theme_v1”gem 时，我无法再浏览登录名和帐户路由。相反，我收到以下错误消息：

**Spree/user_sessions#new 中的 NoMethodError - 未定义的方法“get_taxonomies”**

该错误来自我在扩展中覆盖的文件views/spree/shared/_main_nav_bar.html.erb。一旦我删除文件，它就会再次工作。任何建议，为什么这不起作用？还是我必须覆盖另一个文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T16:24:34.667

问题是 gem 没有从 spree 加载 products_helper.rb：[https ://github.com/spree/spree/tree/master/core/app/helpers/spree](https://github.com/spree/spree/tree/master/core/app/helpers/spree)

您可以使其工作添加`helper 'spree/products'`到失败的控制器（在您的情况下是关于设计的）。

我将向您展示我从 spree_essential_cms 重新定义的 PagesController，也许它会有所帮助：

```
class Spree::PagesController < Spree::BaseController
  helper 'spree/products'
  def show
    ...
  end
end 
```

如此处所述[http://osdir.com/ml/spree-user/2013-01/msg00053.html](http://osdir.com/ml/spree-user/2013-01/msg00053.html)您还可以在 app/controllers 中制作一个装饰器并将其命名为 add_products_helper_decorator.rb 之类的东西，然后用此内容填充它：

```
[Spree::UserPasswordsController, Spree::UserRegistrationsController, Spree::UserSessionsController].each do |klass|  
    klass.class_eval do    
      helper 'spree/products'  
    end
 end 
```

这应该足以要求该助手进入正确的位置并使其可供您使用。

# java - 通过单击按钮调用 java 类

> ID：14112467
> 
> 赞同：1
> 
> 时间：2013-01-01T17:15:47.007
> 
> 标签：java, android, class

我正在尝试从 Mainactivity.java 调用另一个名为 HttpUtilityTester.java 的类。实际上，我想通过单击按钮从 HttpUtility.java 测试 HttpUtility.sendPostRequest。该地点标有以下评论：“//这里我需要stackoverflow的帮助”

这已经添加到我在 activity_main.xml 中的按钮中：

```
android:onClick="sendMessage1" 
```

这是 Mainactivity.java：

```
 package com.example.mythirdapp;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

                    //here I need help from stackoverflow

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

这是HttpUtility.java：

```
 package com.example.mythirdapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

public class HttpUtility {

        /**
         * Represents an HTTP connection
         */
        private static HttpURLConnection httpConn;

        /**
         * Makes an HTTP request using GET method to the specified URL.
         *
         * @param requestURL
         *            the URL of the remote server
         * @return An HttpURLConnection object
         * @throws IOException
         *             thrown if any I/O error occurred
         */
        public static HttpURLConnection sendGetRequest(String requestURL)
                throws IOException {
            URL url = new URL(requestURL);
            httpConn = (HttpURLConnection) url.openConnection();
            httpConn.setUseCaches(false);

            httpConn.setDoInput(true); // true if we want to read server's response
            httpConn.setDoOutput(false); // false indicates this is a GET request

            return httpConn;
        }

        /**
         * Makes an HTTP request using POST method to the specified URL.
         *
         * @param requestURL
         *            the URL of the remote server
         * @param params
         *            A map containing POST data in form of key-value pairs
         * @return An HttpURLConnection object
         * @throws IOException
         *             thrown if any I/O error occurred
         */
        public static HttpURLConnection sendPostRequest(String requestURL,
                Map<String, String> params) throws IOException {
            URL url = new URL(requestURL);
            httpConn = (HttpURLConnection) url.openConnection();
            httpConn.setUseCaches(false);

            httpConn.setDoInput(true); // true indicates the server returns response

            StringBuffer requestParams = new StringBuffer();

            if (params != null && params.size() > 0) {

                httpConn.setDoOutput(true); // true indicates POST request

                // creates the params string, encode them using URLEncoder
                Iterator<String> paramIterator = params.keySet().iterator();
                while (paramIterator.hasNext()) {
                    String key = paramIterator.next();
                    String value = params.get(key);
                    requestParams.append(URLEncoder.encode(key, "UTF-8"));
                    requestParams.append("=").append(
                            URLEncoder.encode(value, "UTF-8"));
                    requestParams.append("&");
                }

                // sends POST data
                OutputStreamWriter writer = new OutputStreamWriter(
                        httpConn.getOutputStream());
                writer.write(requestParams.toString());
                writer.flush();
            }

            return httpConn;
        }

        /**
         * Returns only one line from the server's response. This method should be
         * used if the server returns only a single line of String.
         *
         * @return a String of the server's response
         * @throws IOException
         *             thrown if any I/O error occurred
         */
        public static String readSingleLineRespone() throws IOException {
            InputStream inputStream = null;
            if (httpConn != null) {
                inputStream = httpConn.getInputStream();
            } else {
                throw new IOException("Connection is not established.");
            }
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    inputStream));

            String response = reader.readLine();
            reader.close();

            return response;
        }

        /**
         * Returns an array of lines from the server's response. This method should
         * be used if the server returns multiple lines of String.
         *
         * @return an array of Strings of the server's response
         * @throws IOException
         *             thrown if any I/O error occurred
         */
        public static String[] readMultipleLinesRespone() throws IOException {
            InputStream inputStream = null;
            if (httpConn != null) {
                inputStream = httpConn.getInputStream();
            } else {
                throw new IOException("Connection is not established.");
            }

            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    inputStream));
            List<String> response = new ArrayList<String>();

            String line = "";
            while ((line = reader.readLine()) != null) {
                response.add(line);
            }
            reader.close();

            return (String[]) response.toArray(new String[0]);
        }

        /**
         * Closes the connection if opened
         */
        public static void disconnect() {
            if (httpConn != null) {
                httpConn.disconnect();
            }
        }
    } 
```

这是 HttpUtilityTester.java：

```
 package com.example.mythirdapp;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

public class HttpUtilityTester {public static void main(String[] args) {
    // test sending GET request
    String requestURL = "http://www.google.com";
    try {
        HttpUtility.sendGetRequest(requestURL);
        String[] response = HttpUtility.readMultipleLinesRespone();
        for (String line : response) {
            System.out.println(line);
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    HttpUtility.disconnect();

    System.out.println("=====================================");

    // test sending POST request
    Map<String, String> params = new HashMap<String, String>();
    requestURL = "https://accounts.google.com/ServiceLoginAuth";
    params.put("Email", "your_email");
    params.put("Passwd", "your_password");

    try {
        HttpUtility.sendPostRequest(requestURL, params);
        String[] response = HttpUtility.readMultipleLinesRespone();
        for (String line : response) {
            System.out.println(line);
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    HttpUtility.disconnect();
}
} 
```

我尝试将 HttpUtilityTester.java 的代码添加到我的 Mainactivity.java 中，如下所示：

```
...public class MainActivity extends Activity {
public void sendMessage1(View v){

        // test sending POST request
        Map<String, String> params = new HashMap<String, String>();
        requestURL = "https://accounts.google.com/ServiceLoginAuth";
        params.put("Email", "your_email");
        params.put("Passwd", "your_password");

        try {
            HttpUtility.sendPostRequest(requestURL, params);
            String[] response = HttpUtility.readMultipleLinesRespone();
            for (String line : response) {
                System.out.println(line);
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
        HttpUtility.disconnect();
    }... 
```

但是logcat sais：“无法执行活动的方法”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:22:20.073

当您单击该按钮时，将调用以下内容，因此请将其放在您的代码中（如果适用）。

```
public void sendMessage1(View v){
} 
```

# android - 这是糟糕的数据库编码吗？

> ID：14112474
> 
> 赞同：1
> 
> 时间：2013-01-01T17:16:39.190
> 
> 标签：android, sqlite

在扩展 SQLiteOpenHelper 的 DatabaseHelper 类中，我设置了各种方法以将 Cursors 返回到我的其他活动，这样我就不会在 DatabaseHelper 之外的任何其他类中执行任何查询。在这些方法中，我不会在之后关闭光标或数据库，而是像这样返回它：

```
public Cursor getCoursesLeft()
{
    // Open a readable database.
    SQLiteDatabase database = this.getReadableDatabase();

    // Query the database and return the cursor.
    return database.query(DEGREE_PLAN_TABLE, null, DEGREE_COLUMN_TAKEN + " = ?",
            new String[] { "0" }, null, null, DEGREE_COLUMN_CLASS_NAME + " COLLATE NOCASE");
} 
```

无论从哪个 Activity 调用该方法，我都会确保关闭使用后返回的 Cursor。

由于 Cursor 是一个对象，它应该通过引用传递，对吗？所以从其他活动关闭它应该关闭原始对象，如果我理解正确关闭光标也会关闭数据库。

这是一种不好的编码习惯吗？

似乎随机地我会收到一个 LogCat 错误，说数据库上从未调用过 close，而我在代码中唯一能找到的可能是我如何在这些方法中返回游标的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:26:04.023

> 如果我理解正确，关闭光标也会关闭数据库。

这听起来不太对劲。**关闭所有游标后，您**必须显式关闭数据库。logcat 错误是由于您没有关闭数据库并且可能试图打开它的另一个实例。

顺序很重要，首先是游标，然后是数据库实例。

```
<bad joke in 3.. 2.. 1...> 
```

其余的听起来不像是任何不好的做法，当你需要 db 时，你只需要 db 即可。:D

**[编辑]**：你说你已经这样做了：

```
public Cursor getCoursesLeft()
{
    // Open a readable database.
    SQLiteDatabase database = this.getReadableDatabase();
                   ^^^ here you're creating a new instance of the db
which means the db is opened for reading, and the scope of this variable
is lost outside this function. This means you can not close this instance explicitly

    // Query the database and return the cursor.
    return database.query(DEGREE_PLAN_TABLE, null, DEGREE_COLUMN_TAKEN + " = ?",
            new String[] { "0" }, null, null, DEGREE_COLUMN_CLASS_NAME + " COLLATE NOCASE");
} 
```

取而代之的是一个数据库变量，您可以在此方法之外访问它，并在您使用完光标后关闭它（并且您已经关闭了光标）

```
SQLiteDatabase database;
public Cursor getCoursesLeft()
{
    // Open a readable database.
    database = this.getReadableDatabase();

    // Query the database and return the cursor.
    return database.query(DEGREE_PLAN_TABLE, null, DEGREE_COLUMN_TAKEN + " = ?",
            new String[] { "0" }, null, null, DEGREE_COLUMN_CLASS_NAME + " COLLATE NOCASE");
}
public void someOtherFunction() {
  Cursor blah = getCoursesLeft();
  // do something with blah
  blah.close();
  database.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:33:17.793

不关闭游标只会导致内存泄漏。关闭数据库是不同的。

关闭游标就像关闭与`.file`创建游标时生成的某些文件的特定连接。

因此，您应该**始终**关闭光标。

这是不好的编码吗？

不，是的。不要让您的 Activity 与这些临时文件混为一谈。虽然什么都不会发生，但它看起来并不好

# java - Java TCP Server 一次性发送更多消息

> ID：14112479
> 
> 赞同：3
> 
> 时间：2013-01-01T17:17:29.360
> 
> 标签：java, tcpclient, tcpserver, tcpsocket

使用此代码：

Java服务器端：

```
...
out = new PrintWriter(this.client.getOutputStream(), true);
...
public void sendMsg(String msg) {
    out.println(msg);
    //out.flush(); // we don't flush manually because there is auto flush true
} 
```

C#客户端：

```
 while(connected) {
        int lData = myStream.Read(myBuffer, 0, client.ReceiveBufferSize);
        String myString = Encoding.UTF8.GetString(myBuffer);
        myString = myString.Substring(0, lData);
        myString = myString.Substring(0, myString.Length-2);
        addToQueue(myString);
    } 
```

变量 myString 有许多消息，服务器应该将它们一一发送，例如

```
hello \r\t hello \r\t ... 
```

他们应该分开来

```
hello \r\t
hello \r\t ... 
```

这意味着当我一个接一个地等待时，它们会立即排成一排，我怎样才能让它在单独的冲洗中一个接一个地发送。

**注意**我在一秒钟内（1s）连续发送 30~ 条消息，我希望它们分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:30:34.757

TCP 支持字节流。这意味着无论您如何发送数据，您都无法控制数据如何到达。（除了它会以字节的形式出现）如果你依赖它以任何特定的方式出现，你应该重新考虑你的协议。

您可以减少数据捆绑的数量，但这所做的只是以吞吐量为代价减少延迟，因此永远不应该依赖它。这可以通过关闭 Nagle 并减少 TCP 驱动程序中的 co-alessing 设置来减少（但不能消除），如果您可以更改这些设置。

> 我要他们分开。

您可以想要它，但 TCP 不支持您想要的消息。

* * *

您的解决方案是让您的读者与您的作家协议相匹配。您发送行，因此您应该一次读取行，例如 BufferedReader.readLine()，而不是碰巧在缓冲区中的任何数据块。

# apache-flex - Flex 3 兼容模式

> ID：14112482
> 
> 赞同：2
> 
> 时间：2013-01-01T17:17:48.643
> 
> 标签：apache-flex, flex4, flex3, flash-builder

我正在进行一个升级项目，我正在从 Flex 3 迁移到 Flex 4。

我想问一下'Flex 4'和'Flex 4 with Flex 3 compatible mode'的区别。与它们相关的优点和缺点是什么？

是完全迁移还是兼容模式迁移更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:27:52.003

> 我很确定 Flash Builder“兼容模式”复选框的唯一作用是使用 Halo 主题而不是 Spark 主题

它不仅与 Halo 主题相关，还涉及 Flex 4 的所有功能、样式增强、每个模块的单例、spark 功能等，所有这些都在兼容模式下被禁用，基本上，您只能在 Flex 3 功能下运行。

> 我想问一下'Flex 4'和'Flex 4 with Flex 3 compatible mode'的区别。与它们相关的优点和缺点是什么？
> 
> 是完全迁移还是兼容模式迁移更好？

这真的取决于性能，留在 Flex 3 中将为您提供最佳性能，在兼容模式下，您将拥有比 Flex 4 更好的性能，但比 Flex 3 少一点，您还将受益于修复，在 Flex 4 中，您将失去性能，最好在 Flex 4 中启动一个新应用程序，而不是迁移一个，特别是如果您的应用程序很复杂。

# ios - 如何获取iOS中哪个应用程序处于前台的信息？

> ID：14112486
> 
> 赞同：2
> 
> 时间：2013-01-01T17:18:38.837
> 
> 标签：ios, view, foreground

我可以获取有关哪些应用程序在前台的信息，以便控制屏幕并与用户进行交互。

我可以在 Android 上做到这一点，我也想在 iOS 上做到这一点。

这是为了制作一个监控应用程序使用情况的应用程序，而不是 CPU 使用情况。

请告诉我我该如何管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:31:42.173

在越狱设备上，一个非常简单的解决方案是使用 Ryan Petrich 的[AppList 库。](https://github.com/rpetrich/AppList)

我不确定这在库存设备上是否容易，但您可能会使用 Mach/XNU API 检索进程信息并搜索可疑的应用程序可执行路径/名称。

# android - 致命异常：主，在 Dialog.show() 时无法添加窗口

> ID：14112487
> 
> 赞同：0
> 
> 时间：2013-01-01T17:18:47.920
> 
> 标签：android, dialog, fatal-error

我收到以下异常

```
01-01 22:42:52.184: E/AndroidRuntime(408): FATAL EXCEPTION: main
01-01 22:42:52.184: E/AndroidRuntime(408): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.view.ViewRoot.setView(ViewRoot.java:531)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.app.Dialog.show(Dialog.java:241)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
01-01 22:42:52.184: E/AndroidRuntime(408):  at com.gaurav.contactmanager.controller.MyContactAdapter$2$1.run(MyContactAdapter.java:103)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.os.Handler.handleCallback(Handler.java:587)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.os.Looper.loop(Looper.java:123)
01-01 22:42:52.184: E/AndroidRuntime(408):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-01 22:42:52.184: E/AndroidRuntime(408):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 22:42:52.184: E/AndroidRuntime(408):  at java.lang.reflect.Method.invoke(Method.java:507)
01-01 22:42:52.184: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-01 22:42:52.184: E/AndroidRuntime(408):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-01 22:42:52.184: E/AndroidRuntime(408):  at dalvik.system.NativeStart.main(Native Method) 
```

在以下代码中：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder viewHolder;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        convertView = inflator.inflate(R.layout.layout_list_view, null);
        viewHolder = new ViewHolder();
        viewHolder.contactname = (TextView) convertView
                .findViewById(R.id.contactname);
        viewHolder.contactnumber = (TextView) convertView
                .findViewById(R.id.contactnumber);
        viewHolder.contactbadge = (QuickContactBadge) convertView
                .findViewById(R.id.contactBadge);
        viewHolder.img_logo_fb = (ImageButton) convertView
                .findViewById(R.id.img_logo_fb);
        convertView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) convertView.getTag();
    }

    if (contactlist.get(position) == null) {
        Log.d(ContactManagerUtil.TAG_ENTER,
                "In adapter getView, found: contact null");
        return null;
    }
    viewHolder.contactname.setText(contactlist.get(position).getName());
    viewHolder.contactnumber.setText(contactlist.get(position).getNumber());
    viewHolder.img_logo_fb.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Toast.makeText(ContactManagerApplication.context,
                    "ImageButton is clicked!", Toast.LENGTH_SHORT).show();
            // TODO viewTimeLine of this contact
            FBExplorer.viewTimeLine();
        }
    });
    final String[] cs = { "View TimeLine", "Post on Wall", "Send a message" };
    viewHolder.img_logo_fb
            .setOnLongClickListener(new OnLongClickListener() {

                public boolean onLongClick(View v) {
                    // TODO create a dialog box here
                    if (ContactManagerApplication.context == null) {
                        Toast.makeText(ContactManagerApplication.context,
                                "Context is null", Toast.LENGTH_SHORT)
                                .show();
                    }
                    new Handler().postDelayed(new Runnable() {

                        public void run() {
                            Log.d("@gaurav", "In run() of handler");
                            // TODO Auto-generated method stub
                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                    ContactManagerApplication.context);
                            builder.setTitle("Choose your option");
                            builder.setItems(cs,new OnPressOnLongClickListener());
                            builder.create();
                            builder.show();
                        }
                    }, 1000);

                    return true;
                }// onLongClick ends
            });

    return convertView;
} 
```

在经历过类似问题的人发帖后，我使用了处理程序，但那个技巧对我不起作用。

这是监听器类

```
package com.gaurav.contactmanager.controller;

import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;

public class OnPressOnLongClickListener implements OnClickListener {

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:26:20.990

我认为您的上下文是错误的：`ContactManagerApplication.context`. 您需要一个活动上下文，而不是应用程序上下文。当您在几行之前获得 LayoutInflater 时，您似乎已经有了一个“好的”上下文可用`context.getLayoutInflater()`：

# c# - XNA windows phone 发布黑色纹理

> ID：14112495
> 
> 赞同：4
> 
> 时间：2013-01-01T17:19:32.207
> 
> 标签：c#, windows-phone-7, xna, windows-phone, textures

我刚刚在 XNA 中为 windows phone 7 制作了一个 3d 游戏。我在 Visual Studio 2010 上以发布模式构建它，突然当我运行游戏时，模型上没有纹理 - 2 个模型是黑色的，一个是透明的。模型是从 3dsmax 导出的 .X 格式，并且具有 .jpg 格式的纹理也添加到游戏内容中。我将构建操作设置为无，并且在调试模式下一切正常。当我更改为释放模式时 - 黑色纹理。当我将构建操作设置为编译时，它会给我警告：

资产使用不同的设置构建了 2 次：使用 TextureImporter 和 TextureProcessor 使用 TextureImporter 和 TextureProcessor，由...引用

仍然没有纹理。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:25:46.747

这听起来像是您使用自定义内容处理器来构建您的资产。

仔细检查您的纹理以确保它们是由您的自定义内容处理器构建的，而不是由 XNA 构建的。

# php - PDO 连接问题

> ID：14112504
> 
> 赞同：1
> 
> 时间：2013-01-01T17:20:50.670
> 
> 标签：php, mysql, pdo

得到如下代码：

```
<?php
require_once("../classes/pdo.class.php");
$db = new mysql();
$db->connect();
class votingpanel{

    public function logintopanel($username, $password){

        //Dane z logowania + token
        $login = mysql_real_escape_string($username); 
        $password = mysql_real_escape_string($password); 

            $sql = $db->prepare("SELECT * FROM xxx WHERE username = '$login'");
            $sql = $db->exec($sql);
            if($sql == 1){
                $password = sha1($password);
                $sql = $db->prepare("SELECT * FROM xxx WHERE username = '$login'");
                $sql = $db->exec($sql);
                $row = $sql->fetch();

                if($row['password'] == $password and $row['toplistadmin'] == 1){
                    $_SESSION['toplist_admin'] = 1;
                    $_SESSION['toplist_adminloged'] = 1;

                }
                else{
                    return false;
                }
            }
            else{
                return false;
            }

    }

}

?> 
```

pdo 类看起来像：

```
<?php

require_once("../konfiguracja.php");

class mysql{
    public function connect(){
        try {
            $conn = new PDO('mysql:host=xxx;dbname=xxx', 'xxx', 'xxx');
            $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch(PDOException $e) {
        echo 'ERROR: ' . $e->getMessage();
        }
    }
}
?> 
```

作为回报，我得到这样的错误：

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'radiolev'@'localhost' (using password: NO) in /home/radiolev/public_html/top/toplist.class.php on line 10

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/radiolev/public_html/top/toplist.class.php on line 10

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Access denied for user 'radiolev'@'localhost' (using password: NO) in /home/radiolev/public_html/top/toplist.class.php on line 11

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the server could not be established in /home/radiolev/public_html/top/toplist.class.php on line 11

Fatal error: Call to a member function prepare() on a non-object in /home/radiolev/public_html/top/toplist.class.php on line 13 
```

我不明白为什么它会出现，因为 mysql 密码很好。用普通的 mysql_connect 尝试了它们，它工作但仍然不知道为什么它出现在 pdo 中；s

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T17:27:44.713

您不应该尝试将 mysql_real_escape_strings() 与 PDO 一起使用——它不在 PDO 库中（它在旧的和令人讨厌的`mysql`库中）并且使用不同的（全局--blah）连接到数据库。

首先用 mysql_real_escape_strings() 去掉 2 行。

其次，您正在使用准备好的语句，因此绑定您的值——这很容易！只需将变量替换为以冒号开头的占位符，无需手动引用它。然后调用 bindValue() 是您新创建的 PDOStatement （由 创建`$db->prepare()`）的方法。最后在语句上调用执行。

```
 $sql = $db->prepare("SELECT * FROM xxx WHERE username = :login ");
              $sql->bindValue(":login", $login);
              $result = $sql->execute(); 
```

这将安全地逃脱并防止在 mysql 服务器端注入 $login 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:27:24.070

不要使用函数 - 您现在使用 PDO，当您使用函数时，会在自动模式下使用默认设置创建连接。

你在你的类变量中使用 $db。但是对于类方法，这是局部变量。您应该使用全局声明或将 $db 作为函数的参数（通过引用）提供给方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:29:18.333

此代码引发错误，因为您将`mysql_*`转义函数与 PDO 结合使用。`mysql_real_escape_string`需要来自 的活动数据库连接`mysql_connect`。（不要问我为什么，但确实如此。）

如果您仍然使用 PDO 的准备好的语句，请不要转义：只需使用内置参数传递：

```
// let $dbh be a PDO object, probably defined inside your mysql class
$stmt = $dbh->prepare("SELECT * FROM xxx WHERE username = ?");
$stmt->bindParam(1, $login);
$results = $stmt->execute(); 
```

# r - svyby比例的置信区间

> ID：14112508
> 
> 赞同：12
> 
> 时间：2013-01-01T17:21:14.623
> 
> 标签：r, survey

是否有一个现有的函数可以从一个`svyby`对象的比例创建置信区间（在我的例子中是包中二进制项目的交叉表`survey`）。`svyciprop`我经常比较各组之间的比例，如果有一个可以提取置信区间的函数（使用调查函数而不是）会非常方便`confint`。下面的示例显示了我想要实现的目标。

加载数据

```
library(survey)
library(weights)
data(api)
apiclus1$both<-dummify(apiclus1$both)[,1]#Create dummy variable
dclus1<-svydesign(id=~dnum, weights=~pw, data=apiclus1, fpc=~fpc) 
```

创建一个 svyby 对象，它比较跨 stype 的变量“both”的比例

```
b<-svyby(~both, ~stype, dclus1, svymean)
confint(b)#This works, but svyciprop is best in  other cases, especially when proportion is close to 0 or 1
svyciprop(b)#This requires that you specify each level and a design object 
```

是否有可能创建一个函数（例如，它实现与但使用`byCI(b,method="likelihood")`相同的功能？它基本上必须遍历对象的每个级别并创建一个置信区间。我的尝试到目前为止都没有成功。`confint(b)``svyciprop``svyby`

可能有另一种解决方法，但我喜欢使用`svyby()`它，因为它既快速又直观。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T21:19:14.807

`svyby()`有一个`vartype=`参数来指定您希望如何指定采样不确定性。用于`vartype="ci"`获取置信区间，例如

```
svyby(~I(ell>0),~stype,design=dclus1, svyciprop,vartype="ci",method="beta") 
```

很容易检查这是否与手动执行每个级别相同，例如，

```
confint(svyciprop(~I(ell>0), design=subset(dclus1,stype=="E"),method="beta")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T18:51:35.340

有趣..这两个命令不应该给出相同的结果..第一个可能会抛出错误或警告：

```
svyby( ~both , ~stype , dclus1 , svyciprop , method = 'likelihood' )
svyby( ~both , ~stype , dclus1 , svymean ) 
```

您可能想提醒 Lumley 博士注意这个问题 - 第 80 行附近的代码`surveyby.R`可能会稍作修改以`svyciprop`在内部工作`svyby`。但我可能忽略了一些东西（他可能已经在文档的某处注意到它），所以在与他联系之前，请务必仔细阅读所有内容

无论如何，这是一个可以解决您问题的临时解决方案

```
# create a svyby-like function specific for svyciprop
svyciby <- 
    function( formula , by , design , method = 'likelihood' , df = degf( design ) ){

        # steal a bunch of code from the survey package's source
        # stored in surveyby.R..
        byfactors <- model.frame( by , model.frame( design ) , na.action = na.pass )
        byfactor <- do.call( "interaction" , byfactors )
        uniquelevels <- sort( unique( byfactor ) )
        uniques <- match( uniquelevels , byfactor )
        # note: this may not work for all types..
        # i only tested it out on your example.

        # run the svyciprop() function on every unique combo
        all.cis <-
            lapply( 
                uniques , 
                function( i ){

                    svyciprop( 
                        formula , 
                        design[ byfactor %in% byfactor[i] ] ,
                        method = method ,
                        df = df
                    )
                }
            )

        # transpose the svyciprop confidence intervals
        t.cis <- t( sapply( all.cis , attr , "ci" ) )

        # tack on the names
        dimnames( t.cis )[[1]] <- as.character( sort( unique( byfactor ) ) )

        # return the results
        t.cis
    }

# test out the results
svyciby( ~both , ~stype , dclus1 , method = 'likelihood' )
# pretty close to your b, but not exact (as expected)
confint(b)
# and this one does match (as it should)
svyciby( ~both , ~stype , dclus1 , method = 'mean' , df = Inf ) 
```

# html - 处理草图未在 chrome 中渲染..？

> ID：14112510
> 
> 赞同：0
> 
> 时间：2013-01-01T17:21:50.187
> 
> 标签：html, google-chrome, canvas, processing.js

我正在使用画布将处理草图集成到网页中，它在 Firefox 中工作得非常好，但在 chrome 中却不行。知道可能出了什么问题。我只是将 processing.js 和 canvas 与 processing.pde 草图一起使用。对不起，如果这不符合在这里被问到的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:59:59.290

Processing.js 通常与 Chrome 配合得很好。您是否在页面上使用可能与处理冲突的任何其他脚本？

如果您可以发布指向您正在处理的页面的链接，这将有所帮助。

# javascript - 等待动画完成

> ID：14112511
> 
> 赞同：1
> 
> 时间：2013-01-01T17:21:59.547
> 
> 标签：javascript, jquery

当我直接处理动画时，我知道如何使用回调来等待动画完成，但是如果动画是从另一个函数调用的，那我该怎么做呢？

例如，我有一个元素 ，`#btn`当我点击它时会触发一个动画：

```
$('#btn').click(function() {
   //bla bla...
}); 
```

然后我`$('#btn').click();`在另一个函数中调用它：

```
function foo() {
   $('#btn').click();
   $('#avatar').fadeIn('slow'); //-->I want this animation to run after #btn has finished, but I don't know how to use a callback for this situation...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:26:07.837

如果页面上只有一个动画，你可以尝试这样的事情：

```
function foo() {
   $('#btn').click();
   $(":animated").promise().done(function() {
      $('#avatar').fadeIn('slow');
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:29:31.363

您可以使用`promise`和`done`方法：

```
$('#btn').trigger('click').promise().done(function(){
     $('#avatar').fadeIn('slow');
}); 
```

[http://jsfiddle.net/FsyBZ/](http://jsfiddle.net/FsyBZ/)

请注意，它仅在您选择当前正在动画的元素时才有效。最好的选择是使用`animate`回调函数。

```
$('#elem').animate({}, duration, function(){
   // ...
}) 
```

# web-services - 托管帐户（非本地主机）上的 node.js 良好的安装服务器已启动但（未找到）

> ID：14112512
> 
> 赞同：1
> 
> 时间：2013-01-01T17:21:59.397
> 
> 标签：web-services, apache, node.js, hosted

我在托管的 Apache 服务器上安装了 node.js。我放置在服务器上的简单服务器运行良好，但是当我访问该网站时，我看不到该网站。

我最初在我的本地机器上测试了它，它工作正常，但我需要在生产网站上使用它。我怎样才能做到这一点。

我的 Node.js 代码

```
[code]
// Load the net module to create a tcp server.
var net = require('net');

// Setup a tcp server
var server = net.createServer(function (socket) {

  // Every time someone connects, tell them hello and then close the connection.
  socket.addListener("connect", function () {
    sys.puts("Connection from " + socket.remoteAddress);
    socket.end("Hello World\n");
  });

});

// Fire up the server bound to port 7000 on localhost
server.listen(1337, "localhost");
[/code] 
```

// 在终端上放一条友好的消息 console.log("TCP 服务器在 localhost 的 1337 端口上监听。");

然后我运行 node test.js 响应：TCP 服务器在 localhost 的端口 1337 上侦听。

然后我去 www.mywebsite.com:1337

哎呀！谷歌浏览器无法连接到 www.mywebsite.com:1337

所以我尝试使用实际的 IP server.listen(1337, "xx.xx.xx.xx");

和 URL server.listen(1337, "http://mywebsite.com"); // 这实际上立即破坏了服务器

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:04:26.837

您将需要防火墙规则来允许传入流量。

```
iptables -A INPUT -p tcp --dport 1337 -j ACCEPT 
```

并且不绑定到本地主机，但仅在端口上：

```
server.listen(1337/*, "localhost"*/); 
```

[http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback](http://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)

编辑：这会注释掉主机，因此您的服务器将监听所有地址（这与:)

```
server.listen(1337); 
```

如果您仍然遇到问题，这很可能是防火墙问题。

# javascript - 引导单选按钮和折叠仅部分起作用

> ID：14112513
> 
> 赞同：2
> 
> 时间：2013-01-01T17:22:06.307
> 
> 标签：javascript, twitter-bootstrap

我想在我的引导网站中使用单选按钮组和折叠功能。我希望在任何给定时间都有 3 个按钮，并且只有一个按钮/div 处于活动状态。我让它部分工作，但不是完全工作。

当我选择第一个单选按钮时，它会正确显示第一个 div。如果我移动到第二个 div 它也很好用。如果我回到第一个也显示的 div。但是然后 - 如果我移动到第 3 个按钮，它会显示第 3 个 div，但是如果我回到第 1 个按钮，第 1 个 div 将不再显示。从那时起，我只能显示 div2 和 div3。

这就是我所做的。

我按如下方式创建了单选按钮组：

```
<div class="btn-group" data-toggle="buttons-radio">
 <button class="btn btn-primary btn-large" onclick="showdiv(1);">Save as PDF</button>
 <button class="btn btn-primary btn-large" onclick="showdiv(2);">Simple API</button>
 <button class="btn btn-primary btn-large" onclick="showdiv(3);">Advanced API</button>
</div> 
```

然后我创建了三个 div，如下所示：

```
<div id="div1" class="row pricing collapse">
     .....
</div>
<div id="div2" class="row pricing collapse">
     .....
</div>
<div id="div3" class="row pricing collapse">
     .....
</div> 
```

我为显示给定 div 而创建的 javascript 如下：

```
function showdivold(divnr) {
  for (var i=1;i<=3;i++)
  {
    if (i==divnr)
    {
      $('#div'+i).collapse('show');
    }
    else
    {
      $('#div'+i).collapse('hide');
    }
  }
} 
```

任何帮助将不胜感激。我使用 jquery1.8.3 和引导 js。

另一个问题是我似乎无法将第一个单选按钮的默认状态设置为“按下”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T00:54:52.130

这个怎么样？这就是你所追求的吗？我使用了 Bootstrap 2.3.1 和 JQuery 1.9.1。希望最新版本对您来说不是问题。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="../assets/css/bootstrap.css" rel="stylesheet">
  </head>
  <body>
    <div class="btn-group nav nav-tabs" data-toggle="buttons-radio">
        <button class="btn btn-large" href="#div1" data-toggle="tab">Save as PDF</button>
        <button class="btn btn-large" href="#div2" data-toggle="tab">Simple API</button>
        <button class="btn btn-large" href="#div3" data-toggle="tab">Advanced API</button>
    </div>

    <div class="tab-content">
        <div id="div1" class="tab-pane active">
             <p>div #1</p>
        </div>
        <div id="div2" class="tab-pane">
             <p>div #2</p>
        </div>
        <div id="div3" class="tab-pane">
             <p>div #3</p>
        </div>
    </div>
    <script src="../assets/js/jquery.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
  </body>
</html> 
```

# java - 'if' 语句末尾的分号

> ID：14112515
> 
> 赞同：76
> 
> 时间：2013-01-01T17:22:12.117
> 
> 标签：java, if-statement

今天找了半个小时的bug，发现可以在if语句后面加分号，而不是代码，像这样：

```
if(a == b);
// Do stuff 
```

`a`这基本上意味着无论是否相等，这些东西都会完成`b`，并且该`if`声明没有任何意义。为什么Java不给我一个错误？在任何情况下这会有用吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-01T17:25:02.710

## 为什么会这样？

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)说：

> **空的声明**
> 
> 空语句什么都不做。
> 
> ```
> EmptyStatement:
>     ; 
> ```
> 
> 空语句的执行总是正常完成

它本质上意味着如果 a==b 要执行空语句

```
if(a == b); 
```

## 你该怎么办：

这个问题有两个主要的解决方案：

1.  您可以通过使用代码格式化程序和周围的东西来避免空语句的`if`问题`{`and `}`。通过这样做，您的空语句将更具可读性。

    ```
    if(a == b){
      ;
    } 
    ```

2.  您还可以检查用于静态代码分析的工具，例如：

    ![](../Images/2b6f5d010eeac7e5f713863a713e0e67.png)

    *   [查找错误](http://findbugs.sourceforge.net/)
    *   [格纹风格](http://checkstyle.sourceforge.net/)
    *   [pmd](http://pmd.sourceforge.net/)

    他们可以立即突出显示诸如此类的问题。

我建议将这两种解决方案结合起来。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-01T17:25:38.990

> 在任何情况下这会有用吗？

有用？就像“让你的代码更干净、更清晰、更快、更易于维护”一样？一点也不。这很可能是*糟糕的、令人困惑的代码*。

*但不一定是良性的*。由于导致副作用的方法，这样的语句可以执行动作和/或更改状态，并且由于[运算符的短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)而可选地评估这些方法。

```
if( a() && b() ); 
```

在这里，`a()`or`b()`可能会做一些事情，并且只有在为 true`b()`时才会执行。`a()`

至于*为什么*，我认为答案很简单，即偏离已定义的、预期的行为（例如，类似`while(reader.read());`的语句）比开发人员编写糟糕的代码更糟糕。

编写糟糕的代码总是可能的。重申一下，这几乎在任何情况下都是糟糕的代码。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-01T17:30:25.350

一个可能的用例：

```
if (a==b);
else {
  // Do something
} 
```

不好，但可能。

不过，我确实认为 Java 规范应该不允许空的`if`.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-07T22:09:53.550

如果你使用的是 Eclipse，你可以让它警告你这些语句：

![Java->编译器->错误/警告](../Images/18cc3646e142e06dda4e7cf43b84cb1b.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-01T17:27:15.437

如果使用`if`语句，则`if`如果条件为真，将执行后面的第一条语句。如果您在`if`（带有花括号）之后有一个块，则它对整个块都有效。如果没有块，它只计算一个语句。单个分号是一个空语句。您还可以像这样编写示例中的代码：

```
if(a==b) {
    ;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-01T22:13:40.497

这是从有更多语法糖来区分表达式和语句的时代的遗留物。

基本上，逗号用作列表项分隔符，因此分号用作“语句列表”分隔符。缺点是处理列表中的空项和块中的空语句。

在项目列表中，Java 使用显式关键字`null`，但“空语句”只是一个空行。允许空行的存在是继承自 C 的传统的保留。

为什么这样做？特别是`if`当您知道没有执行任何语句时使用语句：因为某些 if 语句有副作用：

```
 int c;
 if ((c = in.read()) != -1); 
```

是的，这不是最好的例子，但基本上它说从流中读取一个字节并且什么都不做。在某些极端情况下可能有用，但即使这个例子不是最好的，它也说明了意图。我们希望在不意外执行任何语句的情况下感受表达式的副作用。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-01T17:25:25.630

我想不出它有用的场合。它对于像这样的循环很有用

```
 while(do something); 
```

或者

```
 for(init; do something; something else); 
```

如果您经常在 IDE 中使用代码格式，那么这些错误就会变得很明显。一些 IDE 也将此突出显示为可能的错误。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-01T17:27:41.060

我同意你的观点，这对人类没有任何用处。我怀疑它在那里是因为它简化了语言定义；例如，这意味着`if`a 之后的事物与 a 之后的事物相同`while`。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-01T23:57:55.227

为什么？这是因为它对编译器编写者来说更容易。您不必特殊情况下检查分号之后`if(cond)`，并且有一个额外的用法是允许

```
if (cond && maybeFunc())
    ;// Code here I want to ignore 
```

即使允许这样做实际上是一个糟糕的主意。允许然后添加一个案例来检查这一点更容易。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-01-01T23:02:28.767

Java 允许在允许语句块的任何地方使用空块。我确信将此作为所有块的一般规则可以简化编译器。

我同意这主要是导致非常难以找到的错误的原因。我总是在块周围使用大括号，即使只有一条语句，但是 Java 允许您在任何时候使用大括号创建一个块，因此使用大括号无法使您摆脱这种命运。例如，我曾经浪费了 4 个小时试图找到这样的东西：

```
while (condition);
{
    statement;
    statement;
} 
```

第一行末尾的分号是一个错字，不小心使 while 循环的语句块为空。因为语法是有效的程序编译和运行良好，只是不是我想要的方式。真的*很难*找到。

我可以想到一种情况，允许你有空块是*非常好的*，这是这样的：

```
if (condition1) {
    do_action_1();
}
else if (condition2) {
    //nothing really to do in this case
}
else if (condition3) {
    do_action2();
}
else {
    do_action3();
} 
```

在上面的示例中，您希望能够分离出各种条件。请记住，这些条件可能会重叠，因此并不总是可以重新排列顺序。如果其中一个条件真的不需要做任何事情，那么 Java 允许你有一个空块是很好的。否则，当您真的不想做任何事情时，该语言将需要某种形式的“noop”方法来使用。

我个人更喜欢显式的“noop”语句——但这不是 Java 的定义方式。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-02T10:44:42.683

只是关于可用性的仅供参考，***如果有这样的声明，它会产生什么影响或可以产生什么影响***

考虑如下一段代码。

```
int a = 10;
if ((a = 50) == 50);

System.out.println("Value of a = " + a); 
```

显然，在这种情况下，该`if`语句确实改变了输出。因此，这样的声明可以产生影响。

在这种情况下，这可能是有用的，或者说对程序有影响。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-01-01T17:26:43.887

```
if(a==b)
    println("a equals b"); 
```

`{}`如果只有一行要执行，你可以使用 IF 语句，所以通过使用`if(a==b);`你说如果它们相等，执行和清空语句......所以它什么也不做，然后返回到你的正常循环，外面IF块。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-05-12T15:57:44.187

jls 的一些定义解释了这一点（第 14 章）：

## 块是语句

[如此处](http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.5)所述， a`Block`是 a `StatementWithoutTrailingSubstatement`，而后者又是 a `StatementNoShortIf`，即 a `Statement`。因此，无论何时需要这些，我们都可以插入一个`Block`.

## if 子句

尽管 for`for`和-loop 也是如此`while`，但我将使用`if`-statements。这些规则几乎相同。的语法描述`if-statements`可以在[这里](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.9)找到。

```
IfThenStatement:
    if ( Expression ) Statement

IfThenElseStatement:
    if ( Expression ) StatementNoShortIf else Statement

IfThenElseStatementNoShortIf:
    if ( Expression ) StatementNoShortIf else StatementNoShortIf 
```

所以我们可以在这里使用我们的块。

## 但为什么它适用于 ; ?

`;`被定义为`EmptyStatement`( [link](http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-EmptyStatement) )，它也是一个`StatementNoShortIf`. 所以在有条件的代码片段中，比如`if-statement`和循环，我们可以用 a 替换`Block`a `EmptyStatement`，如果 a `StatementNoShortIf`or`Statement`是必需的。

因此`if(Expression)EmptyStatement`有效。

## 为什么这不会给出错误？

很简单：如果 java 发现无效的语法，它会报错。但是`if(Expression)EmptyStatement`是完全有效的语法。如果使用正确的参数启动，则会`javac`发出警告。[可以禁用/启用](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html#BHCJCABJ)的完整警告列表`empty`为此目的列出了警告名称。`-Xlint:all`所以用or编译`-Xlint:empty`会产生一个警告。

您的 IDE 也应该有一个选项来启用这种警告。对于日食，请参阅[@nullptr 的答案](https://stackoverflow.com/a/16429394/4668606)。在 IntelliJ 中，您可以按`Ctrl + Shift + A`，进入`empty body`搜索字段并启用警告（在图像中标记）

[![IntelliJ 启用空体警告](../Images/55b06e20556c39c5f94edc921ec23e7e.png)](https://i.stack.imgur.com/He6Hc.png)

## 这甚至是用来做什么的？

老实说，从极简主义的角度来看，它并没有多大用处。通常有一种方法可以在没有“什么都不做”命令的情况下完成任务。这是个人喜好的问题，您是否愿意使用

```
if( a() && b() ); 
```

或者

```
if( a() ) b(); 
```

同样适用于使用 的其他情况`EmptyStatement`。关于这个主题要考虑的一个重要点是代码的可读性。在某些情况下，通过使用 no-op，代码变得更具可读性。另一方面，在某些情况下，使用该代码变得非常难以理解`EmptyStatement`- 上面的示例将计入后来的 IMO。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-02T08:31:42.340

我可以想到一个需要空语句的场景（不是 for`if`条件，而是 for`while`循环）。

当程序只需要用户的明确确认以继续时。当用户确认后的工作取决于其他一些事情并且用户想要控制何时继续时，这可能是必需的。

```
 System.out.println("Enter Y to proceed. Waiting...");
    System.out.println("");

    while(!(new Scanner(System.in).next().equalsIgnoreCase("Y")));

    System.out.println("Proceeding...");
    // do the work here 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-10T02:06:29.380

看看这个：

```
int a,b,c = 0;
if(a == b){
   c =1;
} 
System.out.print(c);//1 
```

所以，你可以这样写：

```
if (a == b)c=1; 
```

但是，如果这段代码是这样的：

```
int a,b,c=0;
if (a != b){
}
if (a == b ){
  c =1;
} 
```

你可以这样写：

```
if(a != b);
if(a == b )c=1; 
```

所以，你会知道 `if(a != b);`注意

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-04-17T20:52:42.903

if 中的分号表示 if 条件的终止，因为在 java`;`中被视为语句的结尾，因此 if 之后的语句被执行。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-01-01T23:40:36.150

分号结尾，
if(a==b); 只需在单行中完成语句，即忽略条件结果并从下一行继续执行
此代码很有用，另一方面有时会在程序中引入错误，例如

case 1\.

a = 5;
b = 3;
如果（a == b）；
prinf("a 和 b 相等");

情况 2\.

a = 5;
b = 5;
如果（a == b）；
prinf("a 和 b 相等");
将在屏幕上打印相同的输出...

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2017-06-27T02:28:41.250

在为班级进行编程作业时，我正在使用 N×N 网格的装饰物并将随机装饰物的特征与上方、下方、左侧和右侧的特征进行比较，我发现一个很好的用途是防止嵌套语句和潜在的边界异常。我的目标是最小化代码并避免嵌套 if 语句。

```
if (row == 0); 
else (method (grid[row][col], grid[row-1][col]));
if (row == N-1);
else (method (grid[row][col], grid[row+1][col]));
if (col == 0);
else (method (grid[row][col], grid[row][col-1]));
if (col == N-1);<br>
else (method (grid[row][col], grid[row][col+1])); 
```

`method(Doodad a, Doodad b)`a和b之间的一些操作在哪里。

或者，您可以使用异常处理来避免这种语法，但它适用于我的应用程序并且效果很好。

# python - 如何在 Python 中使用 .writerow() 进行切片

> ID：14112520
> 
> 赞同：4
> 
> 时间：2013-01-01T17:23:00.227
> 
> 标签：python, datetime, csv, python-2.7

我的`writerow()`功能有问题。我有一个像这样的对象（orders_matrix）：

```
[[datetime.datetime(2008, 11, 20, 16, 0), 'AA', 'Buy', '100'],     
[datetime.datetime(2008, 11, 28, 16, 0), 'AA', 'Sell', '100'],
[datetime.datetime(2009, 2, 17, 16, 0), 'AA', 'Buy', '100']] 
```

并希望以 CSV 格式编写，如下所示：

```
2008,11,20,AA,Buy,100,
2008,11,28,AA,Sell,100,
2009,2,17,AA,Buy,100, 
```

我尝试`writerow()`在 for 循环中使用该函数：

```
with open('orders.csv', 'w') as orders_file:
  writer = csv.writer(orders_file)
  for row in orders_matrix:
    writer.writerow([row[:4], row[5:7], row[8:10], row[11:]]) 
```

但无法转换日期时间对象并添加其他元素。我想知道是否可以这样做以及如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T17:35:48.240

您可以使用 datetime 对象的年、月、日属性来获取相关值。因此，最后一行可能会更改为：

```
writer.writerow([row[0].year, row[0].month, row[0].day, row[1], row[2], row[3]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T18:10:10.090

您可以使用[datetime.timetuple](http://docs.python.org/2/library/datetime.html#datetime.date.timetuple)将[datetime](http://docs.python.org/2/library/datetime.html#module-datetime)对象转换为[struct_time](http://docs.python.org/2/library/time.html#time.struct_time)对象，然后在将其转换为列表后切出所需的信息

```
with open("orders.csv", "wb") as fin:
    writer = csv.writer(fin)
    for row in orders_matrix:
        writer.writerow(list(row[0].timetuple())[:3] + row[1:]) 
```

# c++ - 从同一个变量引用的参数指向不同的位置

> ID：14112528
> 
> 赞同：0
> 
> 时间：2013-01-01T17:24:45.770
> 
> 标签：c++, winapi, pointers, vector, casting

我正在尝试将 HWND 指针与其他数据一起存储在 int 向量中，我正在使用以下代码获取数据并将其存储在创建时：

```
void createscalingwindow(HWND &cswpara0,DWORD cswpara1,const CHAR* cswpara2,
                         const CHAR* cswpara3,DWORD cswpara4,int cswpara5,
                         int cswpara6,int cswpara7,int cswpara8,HWND cswpara9,
                         HMENU cswpara10,HINSTANCE cswpara11,LPVOID cswpara12)
{
    cswpara0 = CreateWindowEx (cswpara1, cswpara2, cswpara3, cswpara4, cswpara5,
                               cswpara6,cswpara7,cswpara8,cswpara9,cswpara10,
                               cswpara11,cswpara12);                     
    sizevalues.push_back((int)&cswpara0);
    snprintf (buffer, 20,"%d", sizevalues[zero]);
    MessageBox (NULL, buffer, "pointer", NULL);
    sizevalues.push_back(cswpara5);
    sizevalues.push_back(cswpara6);
    sizevalues.push_back(cswpara7);
    sizevalues.push_back(cswpara8);
    return;
} 
```

以下代码是一个原型，目前仅显示消息框中的值，但我稍后计划让它调整子窗口的大小以与父窗口一起缩放

```
void scalewindowsize (HWND &ownerwin, HWND &childwin)
{
    /*check owner window*/
    char buffer[100];
    int checknumber = 0; 
    while (checknumber < sizevalues.size())
    {
        if (sizevalues[checknumber] == (int)&ownerwin)
        {
            snprintf (buffer, 100,"%d", sizevalues[checknumber]);
            MessageBox (NULL, buffer, "foundit", NULL);
            break;
        }
        snprintf (buffer, 20,"%d", (int)&ownerwin);
        checknumber = (checknumber + 5);
        MessageBox (NULL, buffer, "fail", NULL);
    }
    return;
} 
```

问题是第一个`Messagebox`产生`createscalingwindow`的值是 4235304，而第二个产生一个完全不同的数字（数字不同）。为什么是这样？

更新：找到部分原因，为了重现这个，用作参数的 HWND`scalewindowsize`必须在窗口过程中使用，在该窗口过程中具有相同的参数 HWND。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:28:50.447

不要将非`int`值存储在`int`向量中。那是自找麻烦。

而是创建一个包含所有值的字段（具有正确类型）的类，并创建一个包含该类对象的向量。

然而，您的数字更改可能是由于您获取局部变量的地址并在声明变量的函数返回后使用它。您应该只推送 的值，而`HWND`不是存储它的地址。句柄是普通数字，因此无需通过引用传递它们，除非您打算在函数中更改它们（我不明白为什么您需要这样做`createscalingwindow`- 您可以只返回值）

# php - 在 php 输出中转义 xml

> ID：14112530
> 
> 赞同：0
> 
> 时间：2013-01-01T17:24:50.357
> 
> 标签：php, html-entities, htmlspecialchars

我正在回显 mysql 的一些输出。我无法控制它，因为它是一个日志文件，但是有一个特定的日志在显示时会弄乱我的 html。

这是我从日志中截取的片段：

```
a következő helyen: System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)<br />
a következő helyen: System.Number.ParseDecimal(String value, NumberStyles options, NumberFormatInfo numfmt)<br />
Parsing hand: <br />
<?xml version="1.0" encoding="utf-16"?><br />
<HandDetails SiteName="Poker 
```

当我在表格中显示它时，一切都搞砸了。我尝试使用`hmtlentities`and `htmlspecialchars`，但是这两个打印隐藏`<br />`标签`<br />`都不起作用，因此不显示换行符。任何想法最好的方法是什么？

我正在考虑寻找开头和结尾`<>`，然后将它们替换`[]`为代码，所以它可以在任何时候被切断

我不介意更改数据，它不必按原样显示 100%（FWIW，它毫无问题地插入数据库；当我回显它时，问题就出现了）。

//带有更多信息的新编辑

好的，所以我查看了源代码，它显示了这一点：

```
<td>   at System.Windows.Interop.HwndTarget.UpdateWindowSettings(Boolean enableRenderTarget, Nullable`1 channelSet)&lt;br /&gt;
   at System.Windows.Interop.HwndTarget.UpdateWindowSettings(Boolean enableRenderTarget)&lt;br /&gt;
   at System.Windows.Interop.HwndTarget.UpdateWindowPos(IntPtr lParam)&lt;br /&gt;
   at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg, IntPtr wparam, IntPtr lparam)&lt;br /&gt;
   at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wP</td> 
```

我的输出代码非常简单：

$result1 = mysql_query($feedback_query_first);

```
 while ($row1 = mysql_fetch_array($result1))
    {
    $first_date = $row1['snippet_date'];
    $snippet_text_pre = $row1['snippet_text'];
    $snippet_text = htmlspecialchars($snippet_text_pre);
    }

    echo '<td>'. $snippet_text.'</td>'; 
```

如果我删除 htmlspecialchars 那么我得到了 xml 的原始问题，但格式很好，观察到换行符等，当我把它留在那里时，我得到
插入为没有换行符的文本？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:27:20.960

`htmlspecialchars`不会“打印隐藏`<br />`标签”。仔细查看生成的 HTML（浏览器中的“查看源代码”），看看究竟是什么导致了问题。

# r - RQDA/RQDAtm 包还在工作吗？

> ID：14112531
> 
> 赞同：0
> 
> 时间：2013-01-01T17:25:00.303
> 
> 标签：r, package, rqda

我是一个新的使用`RQDA`包做一些中文文本挖掘的人。

这2个包下载安装成功，之前需要导入的包（如GTK）也都完成了。

但是当我想使用 method`RQDA2tm()`时，它总是说没有这样的方法。

当我使用时`?RQDA2tm`，也没有结果。

这个包还能用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:11:29.850

我找到了问题所在。

那是因为包`RQDA`已经移到 了`RQDAtm`，对应的方法也改了名字，比如`RQDA2tm()`改成了`codings2tm9()`.

# ruby-on-rails - 嵌套设计模型形式

> ID：14112535
> 
> 赞同：0
> 
> 时间：2013-01-01T17:25:50.353
> 
> 标签：ruby-on-rails, devise, nested-forms

我正在使用设计对用户进行身份验证，并且我想在注册时以相同的形式为用户分配一个位置。我目前在提交表单时收到此错误。有任何想法吗？

DeviseInvitable::RegistrationsController#create 中的 ActiveRecord::AssociationTypeMismatch

预期位置（#70224765161800），获得 ActiveSupport::HashWithIndiffergentAccess（#70224763369340）

我的位置模型

```
class Location < ActiveRecord::Base
 has_many :users, :dependent => :destroy
 accepts_nested_attributes_for :users, :allow_destroy => true
 attr_accessible :lat, :long, :name, :street_adress
 attr_accessible :user_attributes
end 
```

我的用户模型

```
class User < ActiveRecord::Base
 belongs_to :location
 rolify
 devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable
 attr_accessible :role_ids, :as => :admin
 attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :location
end 
```

我的 new.html.erb 视图

```
<% resource.build_location %>
<%= simple_form_for(resource, :as => resource_name, :url =>       registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
<%= f.error_notification %>

<%= f.fields_for @location do |location_form| %>
<%= location_form.text_field :name %>
<% end %>

<%= f.input :name, :autofocus => true %> 
<%= f.input :email, :required => true %>
<%= f.input :password, :required => true %>
<%= f.input :password_confirmation, :required => true %>

<%= f.button :submit, 'Sign up', :class => 'btn-primary' %>
<% end %> 
```

位置控制器

```
 def new
    @location = Location.new
    @location.user.build
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @location }
    end
  end

  # GET /locations/1/edit
  def edit
    @location = Location.find(params[:id])
  end

  # POST /locations
  # POST /locations.json
  def create
    @location = Location.new(params[:location])

    respond_to do |format|
      if @location.save
        format.html { redirect_to @location, notice: 'Location was successfully created.' }
        format.json { render json: @location, status: :created, location: @location }
      else
        format.html { render action: "new" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end 
```

users_controller

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def index
    authorize! :index, @user, :message => 'Not authorized as an administrator.'
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def update
   authorize! :update, @user, :message => 'Not authorized as an administrator.'
   @user = User.find(params[:id])
   if @user.update_attributes(params[:user], :as => :admin)
   redirect_to users_path, :notice => "User updated."
    else
   redirect_to users_path, :alert => "Unable to update user."
    end
  end

  def destroy
    authorize! :destroy, @user, :message => 'Not authorized as an administrator.'
    user = User.find(params[:id])
    unless user == current_user
      user.destroy
      redirect_to users_path, :notice => "User deleted."
    else
      redirect_to users_path, :notice => "Can't delete yourself."
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:59:25.667

你正在创建一个用户，所以用户类应该有accepts_nested_attributes_for :location。但我不确定它会解决问题......

# gcc - 更改 gcc/binutils --prefix

> ID：14112538
> 
> 赞同：1
> 
> 时间：2013-01-01T17:26:10.647
> 
> 标签：gcc, prefix, binutils

`--prefix=/home/.../usr`我曾经使用传递给配置脚本的错误前缀 () 构建和安装 gcc 和 binutils 。

现在我用正确的前缀 ( ) 重新配置、重建和重新安装 gcc 和 binutils `--prefix=/usr`，但是编译总是失败：

```
$ /bin/ld: cannot find /home/../usr/lib/libc.so.6 
```

当然，我可以对库进行符号链接以使其正常工作，但我想知道这些路径保存在哪个文件中以及如何更改它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:42:44.707

> 现在我用正确的前缀（--prefix=/usr）重新配置、重建和重新安装了 gcc 和 binutils，但是编译总是失败：
> 
> $ /bin/ld: 找不到 /home/../usr/lib/libc.so.6

你可能没有重新构建和重新安装libc，错误来自它。

在 Linux 上，`libc.so`是一个链接描述文件，类似于：

```
/* GNU ld script
   Use the shared library, but some functions are only in
   the static library, so try that secondarily.  */
OUTPUT_FORMAT(elf64-x86-64)
GROUP ( /lib/x86_64-linux-gnu/libc.so.6 /usr/lib/x86_64-linux-gnu/libc_nonshared.a  AS_NEEDED ( /lib/x86_64-linux-gnu/ld-linux-x86-64.so.2 ) ) 
```

我敢打赌你`libc.so`有`/home/../usr/lib/libc.so.6`。

# sql - 如何在 wordpress 数据库中检索已发布的帖子？

> ID：14112541
> 
> 赞同：2
> 
> 时间：2013-01-01T17:26:19.320
> 
> 标签：sql, wordpress

我正在尝试构建我的自定义脚本，我需要从 wordpress 数据库中检索数据。我必须在数据库中获取帖子内容，但是当我浏览 phpmyadmin 中的 wp_posts 表时，我看到有很多行内容基本相同，保存的草稿，自动保存的帖子等等。

所以我想要的是一个 SQL 命令，它将为我提供已发布帖子的内容并忽略所有草稿和已保存的帖子。它基本上是 wordpress 在显示帖子时使用的命令（它显示最终发布的帖子）。

希望我足够清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T17:32:03.243

```
select * from wp_posts
where post_status = 'publish'
and post_type = 'post' 
```

# haskell - 在 MIT 方案中表示未定义的结果

> ID：14112546
> 
> 赞同：2
> 
> 时间：2013-01-01T17:26:47.503
> 
> 标签：haskell, scheme, mit-scheme

想象一下，我有一个函数，其域的所有整数都大于 0。我希望其他输入的结果未定义。为了简单起见，假设这是增量函数。在 Haskell 中，我可以通过类似的方式实现这一点

```
f :: Integer -> Integer
f x 
  | x > 0 = x + 1
  | otherwise = undefined 
```

当然，这个例子很简单，但应该清楚我想要实现的目标。我不确定如何在 Scheme 中实现类似的效果。

```
(define (f x)
  (if (> x 0)
      (+ x 1)
      (?????))) 
```

我的想法是坚持`error`在那里，但有没有办法更紧密地复制 Haskell 行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:17:09.667

您的问题与[这个](https://stackoverflow.com/q/664373/176841)问题有关，该问题的答案指出在 R5RS 中（我猜 MIT 方案*部分*支持？），`if`with one 分支返回一个“未指定的值”。所以等效于haskell代码应该是：

```
(define (f x)
  (if (> x 0)
      (+ x 1))) 
```

你可能已经知道了：在 haskell`undefined`中是用 来定义的`error`，主要在开发中用作占位符，稍后将被删除。定义你的haskell函数的正确方法是给它一个类似的类型：`Integer -> Maybe Integer`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T23:53:25.600

一个常见的未定义值`void`定义为`(define void (if #f #f))`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T02:23:12.307

请注意，并非所有 Scheme 实现都允许`if`没有替代部分（如其他答案中所建议） - 例如，Racket 会将这种情况标记为错误。

在 Racket 中，您可以显式编写`(void)`以指定过程不返回有用的结果（检查这在 MIT 方案中是否可用）。从[文档](http://docs.racket-lang.org/reference/void.html)中：

> `#<void>`大多数具有副作用且没有有用结果的表单和过程都会返回该常量。该常量`#<undefined>`用作 letrec 绑定的初始值。`#<void>`价值永远是`eq?`对自己的，价值`#<undefined>`也是`eq?`对自己的。
> 
> `(void v ...) → void?` 返回常量`#<void>`。每个`v`参数都被忽略。

也就是说，问题中的示例如下所示：

```
(define (f x)
  (if (> x 0)
      (+ x 1)
      (void))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T23:41:28.277

专门针对 MIT 计划，我相信 #!unspecific 是从 if 没有替代项返回的常量。

```
(eq? (if (= 1 2) 3) #!unspecific) => #t 
```

# java - java字符串中的立方根符号

> ID：14112548
> 
> 赞同：1
> 
> 时间：2013-01-01T17:27:05.897
> 
> 标签：java, android, android-layout

我正在用 Android 做一个计算器。

为此，我使用了各种按钮，其中三个用于 PI、平方根和立方根的符号。

现在，当我在 netbeans 中将其作为简单代码进行测试时：

```
public class Test {
    public static void main(String[] args) {
      System.out.println("\u03C0");  
      System.out.println("\u221A");  
      System.out.println("\u221B");  
    }
} 
```

我得到了预期的输出：

跑：

π

√</p>

∛</p>

但是，当我使用 eclipse 为 android 开发做类似的显示时：

```
public static String[] button_text = new String[]{
    "^",        "ln(",      "log(",     "\u221A(",
    "\u03C0",       "x!",       "abs(",     "\u221B("   
};

public static String[] button_text_values = new String[]{
    "^",        "ln(",      "log(",     "\u221A(",
    "\u03C0",       "!",        "abs(",     "\u221B("   
}; 
```

按钮 pi、sqrt 显示符号。按下它们时，符号也会出现在文本视图中。

然而，立方体根按钮并不适用。它只显示括号“（”。按下它时，textview 也只显示括号。

然而，所有的计算都是正确的。

那就是按立方根，然后 8 确实给出了结果 2。

这意味着立方体根确实存在于表达式字符串中，但没有显示在按钮或文本视图中。

我该如何纠正？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:35:53.977

您使用的字体可能不包含立方根字符。尝试不同的字体：

```
tv1=(TextView)findViewById(R.id.textViewOne);
bt1=(Button)findViewById(R.id.buttonOne); 
Typeface font= Typeface.createFromAsset(getAssets(), "DejaVuSans.ttf");
tv1.setTypeface(font); 
bt1.setTypeface(font); 
```

另请参阅：

[http://tinkering-is-fun.blogspot.co.uk/2012/04/adding-support-for-more-characters-in.html](http://tinkering-is-fun.blogspot.co.uk/2012/04/adding-support-for-more-characters-in.html)

# javascript - 如何使用 css 去饱和 div 的背景图像？

> ID：14112550
> 
> 赞同：6
> 
> 时间：2013-01-01T17:27:16.267
> 
> 标签：javascript, html, css

我在**标签。**

 **但是我没有找到任何东西可以降低背景图像的饱和度，（用作元素（div）背景的图像。

有没有办法在不使用 2 个背景的情况下使悬停时的背景图像去饱和（即图像精灵一个是黑白，另一个是彩色）

我可以使用 Image Sprites 来做这样的事情。

```
// Initially color Image    
$(<element>).mouseover(function(e){

                    jQuery(this).children(":first").stop().animate(
                    {
                        'background-position': <some coordinates>
                        // Coordinates of b&w Image  
                    },
                    100                       
                    );

                    e.stopPropagation();
                })
                .mouseout(function(e){

                    jQuery(this).children(":first").stop().animate(
                    {
                        'background-position': <some coordinates>
                          // Coordinates of color Image   
                    },
                    100,
                    settings.easingType
                    );

                    e.stopPropagation();
                }); 
```

但我不想要这个。我想要动态去饱和背景图像。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:29:56.577

看看这个页面[http://davidwalsh.name/css-filters](http://davidwalsh.name/css-filters)。它解释了一些过滤方法（webkit 浏览器）。

也许您应该使用画布（更好的浏览器支持）或最好在服务器本身上做得更好，例如使用 php.ini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T07:38:20.603

```
element: hover{
     filter:        url(~"data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
    -webkit-filter: grayscale(100%);
    -moz-filter:    grayscale(100%);
    -ms-filter:     grayscale(100%);
    -o-filter:      grayscale(100%);
    filter: gray;
} 
```

这是相关的问题，希望有人需要重定向。

[CSS 仅对背景图像进行去色处理，而 Div 中的其他图像保持饱和](https://stackoverflow.com/questions/27572728/css-to-desaturate-background-image-only-with-other-images-in-div-stay-saturated)**

# javascript - AngularJS 从服务返回资源

> ID：14112552
> 
> 赞同：0
> 
> 时间：2013-01-01T17:27:21.030
> 
> 标签：javascript, angularjs

一切正常，但我无法从服务中获取资源。

我在下面有服务代码。

```
app.factory('myService', 
    function($rootScope, ResourceData) {
    var result = {};
    var data   = ResourceData.query();

    result.getData = function() {
        // problem here
    }

    return result;
}); 
```

和 CONTROLLER 包含代码。

```
app.controller('myController', ['$scope', 'myService', 
    function myController($scope, myService) {
       $scope.data = myService.getData();
}); 
```

我的问题是我的服务中是否有这样的功能

```
result.getData = function() {
   return data;
} 
```

一切正常，但我需要在获取数据之前过滤该数据

如果我像这样更改正文，我会得到一个空数组，问题似乎来自 AngularJS。

如果我创建静态数组，它可以工作。

```
result.getData = function() {
   var arr = [];

        angular.forEach(data, function(item, key) {
              // simple filter
              if(item.ID > 10) {
                  return;
              }          
              else {
                  arr.push(item);
              }  
        });

        return arr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:04:41.247

“ResourceData.query [()](http://docs.angularjs.org/api/ngResource.%24resource) ”的结果是异步的：

> 当数据从服务器返回时，**该**对象是资源类的一个实例......重要的是要意识到调用 $resource 对象方法会立即返回一个空引用（对象或数组取决于 isArray）。从服务器返回数据后，现有参考将填充实际数据。

当页面第一次加载时，我猜测控制器在数据从服务器返回之前运行，所以第一次调用 getData() 时，`data`可能还没有填充任何数据，所以你得到一个空数组。

解决您的问题的一种方法是使用 Angular 过滤器过滤视图/HTML 中的数据，而不是在服务中。

```
<div ng-repeat="item in data | filter:myFilter">
   {{item.ID}}: {{item...}}
</div> 
```

然后在你的控制器中：

```
$scope.myFilter = function(item) {
   return item.ID <= 10;
} 
```

# java - 如何通过鼠标单击在 jtable 中执行多个单元格选择

> ID：14112556
> 
> 赞同：0
> 
> 时间：2013-01-01T17:27:41.217
> 
> 标签：java, swing, jtable

我有一个简单的 JTable，但是如何添加单元格选择，以便当用户用鼠标左键单击时，单元格被选中。当用户选择任何其他行中的任何其他单元格时，该单元格也会被选中。如果用户左键单击已选择的单元格，则该单元格将被取消选择。

任何提示将不胜感激，谢谢。

源头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:18:18.153

> 当用户选择任何其他行中的任何其他单元格时，选择的那个被选中。

*   [这对于 non_continous 单元格选择是不可能的](https://stackoverflow.com/questions/7620579/individual-and-not-continuous-jtables-cell-selection)，因为`ListSelectionMode`它只是二维的，

*   可能（从未尝试过）使用`custom Renderer`and `MouseListener`，但随后必须添加 /clone`XxxTableModel`并存储 a `selected cell(s)`，模型仅包含`Boolean value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:57:30.093

对于这样的事情，我自己做的是创建一个 ArrayList 来存储选定的单元格。然后当您需要知道选择了哪些单元格时参考该数组。然后我创建了一个自定义单元格渲染器。在那个类中，我会检查一个单元格是否在所选单元格的 ArrayList 中，如果是，我会将其设置为表格单元格选择的颜色。

```
... public class MyTableCellRenderer extends DefaultTableCellRenderer
...

        //Defined in your class somewhere
        //Add column values to it when clicked on or selected   

        private final Color selectedColumn = Color.YELLOW;
        List<String> selectedCols = new ArrayList<String>(); 

        if (selectedCols.contains(cellValue)) {
            tableCell.setBackground(selectedColumn);
        } else {
            tableCell.setBackground(UIManager.getColor("Table.background"));
        } 
```

# c# - 在 WinForms 应用程序中引用 log4net DLL 的正确方法

> ID：14112559
> 
> 赞同：0
> 
> 时间：2013-01-01T17:28:06.780
> 
> 标签：c#, log4net

我的 WinForms 2.0 应用程序有 2 个程序集。第一个程序集处理 GUI 和项目特定代码，第二个程序集是我放置所有可重用代码的地方。这两个项目都是解决方案的一部分；第一个项目引用第二个项目。

现在两个项目都需要引用 log4net.dll 文件。我是否应该在每个项目中添加一个引用，指向我下载 log4net 源代码并构建它的文件夹？还是应该将 log4net.dll 文件复制到每个项目目录中？

或者我是否应该将整个 log4net 源代码项目添加为解决方案的一部分，这样我就不会受到 log4net 未来任何更改破坏我现有应用程序的影响？

其中一项要求是 log4net 中的未来版本更改具有破坏现有代码的潜在风险，对我的项目的影响应该最小。

最佳做法是什么？

我正在使用 C# 2.0。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:30:23.320

我通常构建项目并将 log4net dll 放在作为解决方案文件夹的 libs 文件夹中。这两个项目都引用了这个 dll（libs 文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:04:30.070

学习依赖 NuGet，它会自动管理您的依赖项并将它们存储在适当的文件夹中。

对于 log4net，兼容性已经被破坏，因为混乱的密钥和损坏的方法合同。没有人知道如何解决这个烂摊子：

[http://netpl.blogspot.com/2012/03/pathetic-break-change-between.html](http://netpl.blogspot.com/2012/03/pathetic-breaking-change-between.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:33:28.410

> 我应该将 log4net.dll 文件复制到每个项目目录中吗？

不。将其保存在单独的依赖项文件夹中。此文件夹对于解决方案中的所有项目应该是通用的。您应该将 log4net.dll 引用到每个项目（需要此组件）中。

> 或者我是否应该将整个 log4net 源代码项目添加为解决方案的一部分，这样我就不会受到 log4net 未来任何更改破坏我现有应用程序的影响？

这不是必需的。**仅当**您在 log4net.dll 中遇到任何问题并想要诊断自己时才需要它。

# spring - Spring MVC 中的请求映射

> ID：14112561
> 
> 赞同：0
> 
> 时间：2013-01-01T17:28:38.863
> 
> 标签：spring, model-view-controller, request-mapping

我在 Spring MVC 中的应用程序有一点问题。我想在我的应用程序中编辑用户数据。所以我有编辑控制器，它有 listWorkers、redirectWorker 和 editWorker 方法。

```
@RequestMapping("/print")
public String listWorkers(Model model)
{
    model.addAttribute("workerList", workerService.getAllWorkers());
    return "print";
}

@RequestMapping("/edit")
public String redirectWorker(HttpServletRequest request)
{
    String parameter = request.getParameter("workers");
    String path = "redirect:/edit/" + parameter;
    return path;
}

    @RequestMapping("/edit/{worker}")
public String editWorker(@PathVariable("worker")
String login, Model model)
{
    model.addAttribute("worker", workerService.getWorker(login));
    return "edition";
} 
```

我对资源和图像文件夹有疑问。例如，当我使用 print 方法时，一切都很好，但是当我尝试使用 editWorker 方法时，我的徽标和 css 文件没有加载。我在 servlet-context 文件中有这个文件夹的请求映射：

```
<resources mapping="/resources/**" location="/resources/" />
<resources mapping="/images/**" location="/images/" /> 
```

当我使用打印方法时，我有这样的 URL：

```
http://localhost:8080/WWP/print 
```

我可以看到图像和风格。但是当我在我的特定用户上使用编辑方法时，我有这样的 URL：

```
http://localhost:8080/WWP/edit/caro 
```

这样我就看不到形象和风格了。我有一个警告：

```
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/WWP/edit/resources/images/logo.png] in DispatcherServlet with name 'appServlet'
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request with URI [/WWP/edit/resources/styles/menu.css] in DispatcherServlet with name 'appServlet' 
```

我在资源文件夹中有图像和样式目录，它直接在 webapp 文件夹中（因为我使用的是 maven）。它更早地工作，但是当我有类似的东西时`/*/*`它不起作用。我想我的 servlet-context 文件中的资源映射有问题。

我正在加载我的 css 和图像文件，如下所示：

```
<img src="resources/images/logo.png">
<link rel="stylesheet" href="resources/styles/menu.css" type="text/css"></link> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:35:50.263

不要使用相对路径。改用绝对路径：

```
<img src="<c:url value='/resources/images/logo.png'/>">
<link rel="stylesheet" href="<c:url value='/resources/styles/menu.css'/>" type="text/css"></link> 
```

[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:url>`标记确保上下文路径附加到作为参数传递的绝对路径的属性`value`中，因此如果您的 webapp 部署到`http://localhost:8080/WWP`，生成的 HTML 代码将是

```
<img src="/WWP/resources/images/logo.png">
<link rel="stylesheet" href="/WWP/resources/styles/menu.css" type="text/css"></link> 
```

该`<c:url>`标签还应该用于所有其他 URL：锚链接、表单操作等。

# easeljs - 用于游戏开发的 LimeJS 与 CreateJS

> ID：14112562
> 
> 赞同：9
> 
> 时间：2013-01-01T17:28:39.067
> 
> 标签：easeljs, createjs, limejs

我想开始开发 HTML5/JS 游戏。我看到了这两个框架 LimeJS 和 CreateJS & EaselJS。哪一个更好？有人对这两个框架有经验吗？那么文档呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T07:38:02.320

是的，不幸的是我都经历过。

[石灰](http://www.limejs.com/)：

*   1\. 您应该安装 python 来编译和运行代码。
*   2\. 您应该手动使用其他 javascript，以便在游戏开始之前预加载所有资产，否则可能会减慢游戏动画的速度。
*   3\. 编译后的代码是非人类可读的，因此第三方用户无法理解您的代码。编译是使用python完成的
*   4\. 不同级别的不同浏览器上的音频问题。
*   5\. [除了Developers](http://limejs.digitalfruit.ee/docs/) [API](http://limejs.digitalfruit.ee/docs/)没有其他资源 [](http://limejs.digitalfruit.ee/docs/) 

[创建JS](http://www.createjs.com/#!/CreateJS)

*   1\. 您可以直接将javascript用于html并运行。
*   2\. CreateJS 本身具有 PreLoadJS、TweenJs、EaselJS、SoundJS，因此您可以轻松渲染加载器和音频
*   3\. 在 javascript 文件的情况下没有编译安全性较低
*   4\. 您将使用 soundjs 来加载音频。
*   5\. 每个 Tween、Easel、Sound 和 Preload 都有自己的 API

`Last and Finally compare to LimeJs, Many developers use Createjs for developing games`包括我。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T03:03:47.470

[Breakouts](http://city41.github.com/breakouts/)项目可能会有所帮助。它有点像 TodoMVC，因为他们采用了一个简单的 Breakout 游戏并在不同的框架中实现它。

它涵盖了 Easel/CreateJS、LimeJS 和 10 个其他流行的框架。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-04T10:49:25.570

我正在使用 EaselJS，我个人对它非常满意，它是由 Adob​​e 和 Microsoft 积极开发和支持的。作为一种可能的选择，您可以查看[http://kineticjs.com](http://kineticjs.com)

如果您有兴趣开始使用 EaselJS，可以查看我的教程系列：http: [//indiegamr.com/retro-style-plattform-runner-game-for-mobile-with-easeljs-part-1/](http://indiegamr.com/retro-style-plattform-runner-game-for-mobile-with-easeljs-part-1/) （它们有点过时了，因为它们是为 EaselJS 的先前版本编写的，但仍然适用于当前版本）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-01T22:05:03.640

我刚刚开始使用 EaselJS 开发游戏，如果您对 JS 有所了解，这似乎很容易。缺乏真实世界的例子是一个缺点，但是有很多关于框架基本用法的教程。是的，在他们的网站上有很多关于 Easel 的好文档。 [http://www.createjs.com/Docs/EaselJS/](http://www.createjs.com/Docs/EaselJS/)

他们的 SoundJS 和 TweenJS 也是非常令人印象深刻的库，看看它们；）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-09T15:00:59.733

CreateJS 是快速入门的正确工具。我们使用 HTML5 来创建带有 Javascript 和 HTML 的游戏，这就是为什么没有理由在 LimeJS 中使用 Python。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-22T21:50:54.197

CreateJS 的文档在 2013 年 2 月获得了巨大的更新，并且有大量的 EaselJS 教程可以帮助您入门。

# javascript - jquery/html 插值

> ID：14112563
> 
> 赞同：0
> 
> 时间：2013-01-01T17:28:41.493
> 
> 标签：javascript, jquery, html, interpolation

```
var texts = new Array("text1", "text2", "text2", "text3", "text4", "text5")
var textNumber = Math.floor(Math.random() * 10) + 1;
$('#textArea').html('<p>{texts[textNumber]}<p>'); 
```

我有这段代码，我希望这个脚本随机选择“文本”数组的一个元素，并将其放在“#textArea”所在的位置，但插值似乎不起作用，这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:37:01.827

只是一个更好的代码来做你看到你正在尝试做的事情......

```
var texts = ["text1", "text2", "text2", "text3", "text4", "text5"]
var textNumber = Math.round(Math.random() * texts.length) ;
var text = texts[textNumber];
$('#textArea').html('<p>' + text + '<p>'); 
```

# html - 如何在ie10中为“分屏视图”编码

> ID：14112564
> 
> 赞同：0
> 
> 时间：2013-01-01T17:28:47.207
> 
> 标签：html, css, internet-explorer, windows-8, internet-explorer-10

我的 webapp 会自动调整到浏览器窗口的宽度，但是在“metro”或“modern” ie10 中，当您将窗口置于拆分模式 (20/80) 时，IE 仅占屏幕的 20%，它会缩小内容.

我有一个特定的移动视图，用于小宽度屏幕，非常适合这个侧边栏视图。有什么办法可以防止该窗口缩小内容并创建“假宽度”？

我希望我已经足够清楚了。如果没有，请告诉我。

感谢您的建议和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T00:17:53.180

将以下内容添加到您用于捕捉视图的媒体查询中：

```
@-ms-viewport { width: 320px; } 
```

查看使[您的站点适应不同的窗口大小](http://blogs.msdn.com/b/ie/archive/2012/06/19/adapting-your-site-to-different-window-sizes.aspx)以获取更多上下文。

# ios - 如何实现应用内购买赠送？

> ID：14112569
> 
> 赞同：0
> 
> 时间：2013-01-01T17:29:09.633
> 
> 标签：ios, in-app-purchase

我最初认为赠送应用内购买项目是不可能的，直到我在 Diptic 中看到了这一点。

![在此处输入图像描述](../Images/6c0ac1537b7f0840554594f4ec6af441.png) ![在此处输入图像描述](../Images/0fd8d6de24ec6bf220a963af345e7dea.png)

更新：我只是“安装”了这个应用程序，虽然它是免费的，所以我推断礼物是为了它的应用程序内购买。但是我忘记了我之前下载了这个应用程序，所以“安装”并不意味着它是免费的，而且礼物实际上是应用程序本身而不是它的应用内购买项目。对不起，我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:34:27.020

那是赠送 0.99 美元的基础应用程序。这不是赠送任何应用内购买。Apple 不提供任何方式来赠送应用内购买，~~也不提供任何方式为应用内购买提供促销代码~~。

现在支持应用内购买促销代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:56:41.627

但是，您可以在您的应用程序中编写自己的自定义逻辑，以在一段时间内免费提供您的应用程序内购买。

# php - 试图摆脱某些字符 utf8_encode 无法修复

> ID：14112577
> 
> 赞同：2
> 
> 时间：2013-01-01T17:30:16.003
> 
> 标签：php, encoding

好吧，我正在制作的网站中有一些地方的标题有些古怪

我试过使用`utf8_encode`and`html_entity_decode(stripslashes($title),ENT_QUOTES, "UTF-8")`和其他几个不起作用的解决方案。我似乎无法摆脱它们：这是一个例子：

在我尝试之前的标题：

`New Era Miami Dolphins NFLÂ® 9FIFTYâ�¢ Solid Snap Miami Dolphins - Zappos.com Free Shipping BOTH Ways`

这是在 utf8_encode 和 html 实体之后

`New Era Miami Dolphins NFLÂ® 9FIFTYâ¢ Solid Snap Miami Dolphins - Zappos.com Free Shipping BOTH Ways`

它仍然有问题 - 有没有办法摆脱那些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:02:21.177

看起来您拥有的标题是 UTF-8 编码的，但您嵌入它的 HTML 页面实际上并未标记为 UTF-8，因此浏览器使用默认字符集解释文本，这可能是 ISO -8859-1。

假设页面上的所有文本实际上都是 UTF-8（或 US-ASCII，它的一个子集），最简单的解决方案是发送适当的 HTTP 标头（和/或元标记）来指示正确的字符集。特别是，在 PHP 中，您可以执行以下操作：

```
header( "Content-Type: text/html; charset=utf-8" ); 
```

或者您可以在 HTML 代码的 head 部分中包含等效的元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

或者，在 HTML5 中，简单地说：

```
<meta charset="utf-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:26:46.160

您总是可以从 wordpress (seems_utf8) 借用功能并根据您的需要进行修改：

```
function remove_none_utf8($str) {
    $ret = '';

    $length = strlen($str);

    for ($i=0; $i < $length; $i++) {
            $ok = true;

        $c = ord($str[$i]);

        if ($c < 0x80) $n = 0; # 0bbbbbbb

        elseif (($c & 0xE0) == 0xC0) $n=1; # 110bbbbb

        elseif (($c & 0xF0) == 0xE0) $n=2; # 1110bbbb

        elseif (($c & 0xF8) == 0xF0) $n=3; # 11110bbb

        elseif (($c & 0xFC) == 0xF8) $n=4; # 111110bb

        elseif (($c & 0xFE) == 0xFC) $n=5; # 1111110b

        else continue; # Does not match any model

        for ($j=0; $j<$n; $j++) { # n bytes matching 10bbbbbb follow ?

            if ((++$i == $length) || ((ord($str[$i]) & 0xC0) != 0x80)) {
                            $ok = false;

                continue;
                    }

        }
            if ($ok === true) $ret .= $str[$i];

    }

    return $ret;

} 
```

所以你可以像这样使用它：

```
$str = "New Era Miami Dolphins NFLÂ® 9FIFTYâ�¢ Solid Snap Mi";
echo remove_none_utf8($str); 
```

# html - html表单输入保存数据

> ID：14112578
> 
> 赞同：0
> 
> 时间：2013-01-01T17:30:16.737
> 
> 标签：html, mysql, forms, excel, csv

在我的提交表单中，用户可以输入五种不同的内容并提交。目前它正在写入一个txt文件，并且工作正常。但是，目标是按不同的项目对数据进行排序，以便于阅读。

一个例子：

```
Name:
Gender:
Age:
Weight:
Haircolor: 
```

用户输入这五个，我想按性别和年龄对它们进行排序，如下所示：

```
John Male 34 ....
Lars Male 34 ....

Egon Male 55 ....
Sven Male 55 ....

Lisa Female 22 ....
Kim Female 22 .... 
```

等等。将数据写入 MySQL 或 .csv 并将其格式化为电子表格会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:35:29.253

是的，你可以这样做......从我的角度来看......如果你有一个更大的数据集，那么使用 MySQL 将是一个更好的选择......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:41:22.963

好吧，如果您不期望有很多数据- mysql 是没有保证的。 [在这里](https://stackoverflow.com/questions/5341219/csv-library-for-php)你可以找到一些 PHP CSV 库，它们可以帮助你做你想做的事。

否则，有标准的东西，如[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)或[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php) / [fputcsv()](http://php.net/manual/en/function.fputcsv.php)。

MySQL 实现也可能非常简单，但当然需要一个工作的 MySQL 以及它附带的所有东西:)

# android - 解析格式错误的 HTML 内容

> ID：14112583
> 
> 赞同：0
> 
> 时间：2013-01-01T17:30:27.503
> 
> 标签：android, xml-parsing, sax

我知道，格式错误的 XML 内容是无效的，您不应该使用它 - 但我没有其他机会。我想解析服务的网站，但缺少结束标记。我正在使用来自 Android 的 XMLPullParser，我得到了这个异常：

```
XmlPullParserException: expected: /div read: a (position:END_TAG </a>@40:104) 
```

问题是这部分：

```
<div id="header_right">
<img src="/templates/stw_green_wide/images/header.png" width="800px" height="92px" alt="" /></a>
</div> 
```

如果不是真的必要，我不想使用第三方库。

问候和新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:39:06.393

尝试在解析器上设置“RELAXED FEATURE”。会比较宽容。请参阅文档：

```
http://developer.android.com/reference/android/util/Xml.html#FEATURE_RELAXED 
```

但是...我还注意到您尝试使用该 XML 解析器解析 HTML。您会遇到问题，因为 HTML 不是 XML，而且许多网站不使用 xhtml。如果您改用 HTML 解析器，您会少很多麻烦。我没有使用过这个，但我听说它在 Android 上运行得很好。我敢肯定还有其他的，你可以用一点谷歌学找到。但我强烈建议您使用 HTML 解析器来解析 HTML :)

[http://jsoup.org/](http://jsoup.org/)

# inno-setup - Inno setup：卸载已安装的所有内容

> ID：14112590
> 
> 赞同：0
> 
> 时间：2013-01-01T17:31:13.477
> 
> 标签：inno-setup

`{sys}`我有一个在目录中安装大量 DLL 的 iss 脚本。卸载时如何告诉 inno 删除刚刚安装的所有内容？一个一个地显式声明“要删除”的文件很无聊而且容易出错……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:04:28.747

默认情况下，Inno 会自动卸载它安装的任何东西，除非你明确告诉它不要使用特定的`Flags`. 所以你不需要明确地做任何事情。

请注意，将文件安装到其中可能有特殊要求`{sys}`（特别是您应该强烈考虑使用该`sharedfile`标志），并且某些组件可能需要非常特定的设置才能正常工作。

另请注意，通常您不应安装任何东西，`{sys}`除非相关组件的供应商明确指示这样做。（例如，您永远不应该在那里安装您自己的应用程序私有组件。）

# objective-c - 使用 setContentInset 时 UITextView 文本被截断

> ID：14112594
> 
> 赞同：2
> 
> 时间：2013-01-01T17:31:39.463
> 
> 标签：objective-c, ios, uitextview

我正在尝试将 UITextView 中的文本右移 20 像素，以使用下面的代码创建文本缩进

```
[textview setContentInset:UIEdgeInsetsMake(0, 20, 0,-20)]; 
```

但这会切断我文本的右侧，如屏幕截图所示。任何人都可以帮助我阻止这种情况发生吗

![在此处输入图像描述](../Images/55649309349af2037599b7eaf87c30c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:30:48.743

我认为您的边缘插图有点偏离。边缘插图朝向矩形的中间。对于正确的插图，您应该尝试 20 而不是 -20。

```
[textview setContentInset:UIEdgeInsetsMake(0, 20, 0, 20)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:39:30.700

即使通过子类化 UITextView 并阻止似乎是问题的 setContentSize，我也找不到解决您问题的方法。

```
[textview setContentInset:UIEdgeInsetsMake(0, 20, 0, rightInset)]; 
```

无论 rightInset 的值是多少，文本总是被剪裁。有些东西总是在重绘文本，以使其适合文本视图的框架宽度。但我想知道为什么你需要设置插图？难道你不能只设置 UITextView 对象的背景以清除颜色并将其正确定位在背景视图上以获得缩进的错觉吗？

# javascript - JSONArray 创建后出现的额外数字

> ID：14112598
> 
> 赞同：2
> 
> 时间：2013-01-01T17:32:08.173
> 
> 标签：javascript, json, node.js, arrays

我正在使用 javascript 创建一个 JSONArray，但我的新数组发生了一些奇怪的事情：

```
var arrayfinal = new Array();

//Order array by elements
function SortByPuntuation(x,y) {
   return x.puntuation - y.puntuation; 
}

for (var i = data.length - 1; i >= 0; i--) {
    if(arrayfinal){
        arrayfinal[i] = arrayfinal.push({'cathegory':data[i].cname , 'puntuation' : 2 * data[i].cnumber + data[i].click});
    }
    else{
        arrayfinal[i] = {'cathegory':data[i].cname , 'puntuation' : 2 * data[i].cnumber + data[i].click };
    }
};

arrayfinal = arrayfinal.sort(SortByPuntuation); 
```

数据是另一个数组：

```
{"cname":"Sillas","cnumber":0,"click":1},
{"cname":"Mesas","cnumber":0,"click":2},
{"cname":"Plastico diferente","cnumber":0,"click":0},
{"cname":"Vasos","cnumber":5,"click":7},
{"cname":"Ordenadores","cnumber":0,"click":2},
{"cname":"Envases cuadrados","cnumber":0,"click":0},
{"cname":"Envases redondos","cnumber":0,"click":0},
{"cname":"Teclados ordenador","cnumber":0,"click":0},
{"cname":"Film transparente","cnumber":0,"click":0},
{"cname":"Pantallas","cnumber":0,"click":1},
{"cname":"Papeles","cnumber":0,"click":2},
{"cname":"Otro","cnumber":0,"click":0},
{"cname":"Coches","cnumber":0,"click":9},
{"cname":"Libros","cnumber":0,"click":2},
{"cname":"Asus","cnumber":0,"click":1} 
```

finalarray 结果是：

```
[ 29,
  { cathegory: 'Plastico diferente', puntuation: 0 },
  { cathegory: 'Envases cuadrados', puntuation: 0 },
  { cathegory: 'Otro', puntuation: 0 },
  { cathegory: 'Envases redondos', puntuation: 0 },
  { cathegory: 'Film transparente', puntuation: 0 },
  { cathegory: 'Teclados ordenador', puntuation: 0 },
  22,
  21,
  20,
  19,
  18,
  17,
  16,
  28,
  { cathegory: 'Sillas', puntuation: 1 },
  27,
  26,
  25,
  { cathegory: 'Pantallas', puntuation: 1 },
  24,
  23,
  { cathegory: 'Papeles', puntuation: 2 },
  { cathegory: 'Ordenadores', puntuation: 2 },
  { cathegory: 'Libros', puntuation: 2 },
  { cathegory: 'Mesas', puntuation: 2 },
  { cathegory: 'Coches', puntuation: 9 },
  { cathegory: 'Vasos', puntuation: 17 },
  1 ] 
```

finalarray 中出现的数字是从哪里来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:39:56.830

这是因为您将`push`（这是新长度）的结果分配给`arrayfinal[i]`.

改变

```
arrayfinal[i] = arrayfinal.push({'cathegory':data[i].cname , 'puntuation' : 2 * data[i].cnumber + data[i].click}); 
```

到

```
arrayfinal.push({'cathegory':data[i].cname , 'puntuation' : 2 * data[i].cnumber + data[i].click}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:46:32.610

您的代码通常可以通过初始化数组、使用前向循环并将每个元素推送到数组来工作。

```
var arrayfinal = [];
for(var i = 0; i < data.length; i++) {
    arrayfinal.push({
      'cathegory':data[i].cname ,
      'puntuation' : 2 * data[i].cnumber + data[i].click
    });
}; 
```

避免通过混合数组查找和创建的问题[`Array#push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

```
arrayfinal[i] = arrayfinal.push(...); 
```

它将元素添加到数组后返回数组的新长度。

* * *

或者，您可以使用[`Array#map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map).

```
var arrayfinal = data.map(function(category){
  return {
    'cathegory': category.cname,
    'puntuation': 2 * category.cnumber + category.click
  };
}); 
```

# algorithm - 分段树延迟传播和我的代码

> ID：14112599
> 
> 赞同：1
> 
> 时间：2013-01-01T17:32:08.763
> 
> 标签：algorithm, data-structures, segment-tree

我目前正在解决段树上的问题。我认为这个问题需要惰性传播概念来解决。由于我对这个概念很陌生，所以我的代码有问题。

简而言之，问题如下：

最初，所有数组元素都是 0，它们的索引为 0 到 N-1

命令 1\. 0 xyv - 将 x 和 y 之间的每个数组索引的值更新为 v

命令 2\. 1 xy - 输出数组索引 x 和 y 之间所有数字的总和。

输入以整数 T (≤ 5) 开头，表示测试用例的数量。

每个案例包含两个整数 n (1 ≤ n ≤ 105) 和 q (1 ≤ q ≤ 50000)。接下来 q 行中的每一行都包含以下形式之一的任务：

0 xyv (0 ≤ x ≤ y < n, 1 ≤ v ≤ 1000)

1 xy (0 ≤ x ≤ y < n) 对于每个案例，首先打印案例编号。然后对于每个查询“1 x y”，打印 x 和 y 之间所有数组元素的总和。这是我的尝试：

```
template<class T>
class SegmentTree
{
        T *tree,*update_tree;
        long size;

        public:
            SegmentTree(long N)
            {
                long x= (long)ceil(log2(N))+1;
                long size = 2*(long)pow(2,x);

                tree = new T[size];
                update_tree = new T[size];

                memset(tree,0,sizeof(tree));
                memset(update_tree,0,sizeof(update_tree));
            }

            void update(long node, long start, long end, long i, long j, long val)
            {
                if(start>j || end<i) return;
                if(start>=i && end<=j){
                    if(start==end){
                        tree[node]+=val;
                        return;
                    }
                    tree[node]+=val;
                    update_tree[2*node] += val;
                    update_tree[2*node+1]+=val;
                    return;
                }

                    long mid = (start+end)/2;
                update(2*node,start,mid,i,j,val);
                update(2*node+1,mid+1,end,i,j,val);
            }

            T query(long node, long start, long end, long i, long j, long val)
            {
                if(start>j || end<i) return -1;

                if(start>=i && end<=j)
                    return ((tree[node]+val)*(end-start+1));

                long a,b;
                a = update_tree[2*node];
                b = update_tree[2*node+1];

                 long mid = (start+end)/2;
                long val1 = query(2*node,start,mid,i,j,val+a);
                long val2 = query(2*node+1,mid+1,end,i,j,val+b);

                if(val1==-1)
                    return val2;
                if(val2==-1)
                    return val1;

                return val1+val2;

            }

};

int main()
{   
    long N,q,x,y,res;
    int tc=1, T,v,d;

    scanf("%d",&T);

    while(tc<=T)
    {
        scanf("%ld %ld",&N,&q);
        SegmentTree<long>s(N);

        printf("Case %d:\n",tc++);
        while(q--){
            scanf("%d",&d);
            if(!d){
                scanf("%ld %ld %d",&x,&y,&v);
                s.update(1,0,N-1,x,y,v);
            }
            else{
                scanf("%ld %ld",&x,&y);
                res = s.query(1,0,N-1,x,y,0);
                printf("%ld\n",res);
            }
        }
    }
    return 0;
} 
```

# mysql - 如何从分组行中的第一行/最后一行获取值？

> ID：14112600
> 
> 赞同：0
> 
> 时间：2013-01-01T17:32:15.847
> 
> 标签：mysql, sql, aggregate-functions

我有一个带有火车的表的数据结构：

```
 from | to | connection_id | date
------+----+---------------+------
  A   | B  | 1             | some
  B   | C  | 1             | dates
  B   | D  | 2             | I can
  D   | E  | 2             | sort
  E   | C  | 2             | by 
```

我想按 connection_id 列对数据进行分组，我想要的结果是：

```
 from | to | connection_id
------+----+---------------
  A   | C  | 1            
  B   | C  | 2 
```

所以我想从分组行中的第一行获取从值，从分组行的最后一行获取到值。要获取最后一行和第一行，有要排序的日期列。如何从分组行中的第一行/最后一行获取一个值？

编辑：澄清：对于每个connection_id，我希望从具有最低日期值的行中获取起始值，并从具有最高日期值的行中获取到值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:45:53.727

如果可以按`date`字段对行进行排序，我认为您可以使用它：

```
select t1.`from`, t2.`to`, mm.connection_id
from (
  select connection_id, min(`date`) as minDate, max(`date`) as maxDate
  from trains
  group by connection_id) mm
  inner join trains t1 on mm.connection_id=t1.connection_id and t1.`date`=mm.minDate
  inner join trains t2 on mm.connection_id=t2.connection_id and t2.`date`=mm.maxDate 
```

在这里，我选择每个 connection_id`from`的第一行和最后一行，从第一行取列，从最后一行取列`to`。或者你也可以使用这个技巧：

```
select
  SUBSTRING_INDEX(GROUP_CONCAT(`from` ORDER BY `date`), ',', 1 ) as `from`,
  SUBSTRING_INDEX(GROUP_CONCAT(`to` ORDER BY `date`), ',', -1 ) as `to`,
  connection_id
from trains
group by connection_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:34:18.547

你可以试试`order by`两个`select`。`union`如下所示：

```
Select * from yourtable 
group by connection_id
order by [from] desc limit 1
union
select * from yourtable
group by connection_id 
order by [to] asc limit 1 
```

# emacs - 如何从函数中调用 eval-last-sexp

> ID：14112601
> 
> 赞同：1
> 
> 时间：2013-01-01T17:32:40.823
> 
> 标签：emacs

我想要一个将点移动到行尾（或标记段落）然后评估的函数。我得到了这个工作，但它没有像干净的 Cx Ce 那样好的错误处理。任何想法如何简单地编程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:53:06.470

直截了当的定义有什么问题？

```
(defun my-eval-last-sexp (arg)
  (interactive "P")
  (move-end-of-line 1)
  (eval-last-sexp arg)) 
```

# c - 如何获取 nautilus 用于给定文件的缩略图？

> ID：14112602
> 
> 赞同：10
> 
> 时间：2013-01-01T17:32:42.257
> 
> 标签：c, linux, thumbnails, gnome

Nautilus 向我显示文件的缩略图，如果是图像，它将向我显示预览，如果是视频，它将显示视频中的帧，如果是文档，它将向我显示应用程序图标。

如何访问图像？

我看到它们被缓存了，`~/.thumbnail/`但是它们都被赋予了唯一的名称。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T17:37:06.783

> 缩略图文件名是文件名的 md5。但是，文件名是图像的绝对 URI（没有换行符）。
> 
> 所以你需要这样做：
> 
> `echo -n 'file:///home/yuzem/pics/foo.jpg' | md5sum`
> 
> 如果它有空格，您需要将它们转换为“%20”，例如“foo bar.jpg”
> 
> `echo -n 'file:///home/yuzem/pics/foo%20bar.jpg' | md5sum`

在[Ubuntu 论坛上](http://ubuntuforums.org/archive/index.php/t-666742.html)找到。另请参阅从[freedesktop.org wiki链接的](https://wiki.freedesktop.org/www/Specifications/)[缩略图管理标准](http://specifications.freedesktop.org/thumbnail-spec/thumbnail-spec-latest.html)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-14T13:32:13.533

用于计算缩略图路径的简单 Python 工具。由[Raja](https://code.activestate.com/recipes/users/4172172/)编写，作为[ActiveState 代码配方](https://code.activestate.com/recipes/576942-locate-thumbnail-file/)共享。但是请注意，此代码不会转义带有空格或特殊字符的文件名；这意味着此代码不适用于所有文件名。

```
"""Get the thumbnail stored on the system.
Should work on any linux system following the desktop standards"""

import hashlib
import os

def get_thumbnailfile(filename):
    """Given the filename for an image, return the path to the thumbnail file.
    Returns None if there is no thumbnail file.
    """
    # Generate the md5 hash of the file uri
    file_hash = hashlib.md5('file://'+filename).hexdigest()

    # the thumbnail file is stored in the ~/.thumbnails/normal folder
    # it is a png file and name is the md5 hash calculated earlier
    tb_filename = os.path.join(os.path.expanduser('~/.thumbnails/normal'),
                               file_hash) + '.png'

    if os.path.exists(tb_filename):
        return tb_filename
    else:
        return None

if __name__ == '__main__':
    import sys
    if len(sys.argv) < 2:
        print('Usage:  get_thumbnail.py filename')
        sys.exit(0)

    filename = sys.argv[1]
    tb_filename = get_thumbnailfile(filename)

    if tb_filename:
        print('Thumbnail for file %s is located at %s' %(filename, tb_filename))
    else:
        print('No thumbnail found') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:23:49.773

我猜您需要以编程方式访问缩略图。您想使用[Gio 库](http://developer.gnome.org/platform-overview/stable/gio)。

我一直无法找到检查缩略图的方法，如果它不存在，请查看应用程序图标，因此您需要分两步完成。在这里，您有一个示例（对不起，Python。我不会流利地使用 C）：

```
import gio
import gtk

window = gtk.Window(gtk.WINDOW_TOPLEVEL)
window.show()
hbox = gtk.HBox()
hbox.show()  
window.add(hbox)

f = gio.File(path='/home/whatever/you/want.jpg')
info = f.query_info('*')

# We check if there's a thumbnail for our file
preview = info.get_attribute_byte_string ("thumbnail::path")

image = None
if preview:
    image = gtk.image_new_from_file (preview)
else:
    # If there's no thumbnail, we check get_icon, who checks the
    # file's mimetype, and returns the correct stock icon.
    icon = info.get_icon()
    image = gtk.image_new_from_gicon (icon, gtk.ICON_SIZE_MENU)

hbox.add (image)

window.show_all()
gtk.main() 
```

# c++ - 有什么方法可以让函数指针作为模板参数更容易使用？

> ID：14112604
> 
> 赞同：2
> 
> 时间：2013-01-01T17:33:04.817
> 
> 标签：c++, templates, function-pointers

我可以使用函数指针作为模板参数，如下所示

```
template<class R, class T, R (*Fun)(T)>
class MyClass; 
```

任何让它变得容易的方法

```
MyClass<&MyFun> a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:22:41.637

这是一个可怕的答案，但我想不出更好的答案。

```
template<typename R, typename Arg, R(*Fun)(Arg)>
class MyClass {};

template<typename R, typename Arg>
struct MyClassHelper {
  template<R(*Fun)(Arg)>
  struct Class {
    typedef MyClass<R, Arg, Fun> type;
  };
};

template<typename R, typename Arg>
MyClassHelper<R, Arg> GetMyClass(R(*Fun)(Arg)); // no impl

void MyFun(int) {}

int main() {
  typedef decltype( GetMyClass(&MyFun) ) A;
  typedef A::Class<&MyFun> B;
  typedef B::type a;
  // or, in one line:
  decltype( GetMyClass(&MyFun) )::Class<&MyFun>::type b;
} 
```

这是丑陋的罪恶。但至少它提取了参数类型`MyFun`而不重复它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:38:56.613

不可能完全像问题中那样，但是**如果**您稍微调整一下设计，这是可能的。举个例子：
假设你有以下功能：

```
int foo (int i) { return i; } 
```

现在你想写：

```
MyClass<&foo> a; // instead of `Myclass<int, int, &foo> a; 
```

在这里你将如何实现它。首先改变简单的功能：

```
int foo (int i) { return i; } 
```

封装函数对象：

```
struct foo { // <--- function name here
  int operator () (int i) { return i; } // <--- function body here
}; 
```

两者*几乎*相同（在函数对象的情况下，传递了一个额外的`this`指针，这在自由函数的情况下不会发生）：

```
int x = foo(2); // 1st case
int x = foo_(2); // 2nd case where `foo_` is an object of `struct foo` 
```

现在您可以随心所欲地使用！

```
template<class Func>
class MyClass {...}
MyClass<foo> a; 
```

这是一个[工作演示](http://ideone.com/wrV7Ht)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-01T17:38:10.593

已经有了[`std::ptr_fun`](http://www.cplusplus.com/reference/functional/ptr_fun/)。使用 C++11，您可以将其用作

```
auto a = std::ptr_fun(&MyFun); 
```

*更新*：

正如其他尝试和非尝试 BTW 所表明的那样，您的模板是否不可能，至少“像”一样简单;-)。但是，如果您的主要目标是“尽可能简单”，您可以做的是重新实现现有的标准模板*函数*模式（`std::ptr_fun`等）以返回所需的类型。`std::make_pair`

# mysql - 需要帮助使用“not in”连接优化 MySQL 查询

> ID：14112605
> 
> 赞同：2
> 
> 时间：2013-01-01T17:33:13.243
> 
> 标签：mysql, optimization, join, notin

我的查询目前大约需要 3 秒，我确信可以对其进行优化。我只是不知道如何优化它。

我的应用程序有一个相当大的`products`表（大约 500,000 条记录）。每个产品都可以列在 50 个域中的一个域中（在`domains`表格中列出）。产品和域之间的链接存储在`domains_products`表中（大约有 1,400,000 条记录）。慢查询在我的应用程序的管理部分，我需要能够查看未在任何域中列出的产品。

剥离到所有不相关的连接的基本框架，有问题的查询是：

```
SELECT    `products`.*
FROM      `products`
LEFT JOIN `domains_products`
ON        `domains_products`.`product_id` = `products`.`id`
WHERE     `products`.`deleted` = 'N'
AND       `domains_products`.`domain_id` IS NULL
ORDER BY  `products`.`id` ASC 
```

在这种形式中，查询耗时 3 秒以上，并返回了 3,000 多个产品（这是正确的）。如果我删除任一子`WHERE`句，查询需要 0.12 秒（但显然不会返回正确的结果）。

两个表都使用 InnoDB 引擎。该`products`表在列上有一个主键，在`id`列上有一个索引`deleted`。该`domains_products`表只有一个`product_id`和`domain_id`列，主键在这两个列上，并且它们都有自己的索引。所有相关的列都是`NOT NULL`列。

`EXPLAIN`给了我这个：

```
id select_type table            type possible_keys key        key_len ref         rows   Extra
1  SIMPLE      products         ref  deleted       deleted    1       const       188616 Using where
1  SIMPLE      domains_products ref  product_id    product_id 4       products.id 1      Using where; Using index; Not exists 
```

请注意，尽管 MySQL 发现了正确的键，但它实际上似乎并没有使用它们。

探查器是这样说的：

```
Status               Time
Starting             62 µs
Checking Permissions 7 µs
Checking Permissions 5 µs
Opening Tables       38 µs
System Lock          13 µs
Init                 37 µs
Optimizing           17 µs
Statistics           1,3 ms
Preparing            25 µs
Executing            5 µs
Sorting Result       5 µs
Sending Data         3,3 s
End                  28 µs
Query End            8 µs
Closing Tables       25 µs
Freeing Items        297 µs
Logging Slow Query   4 µs
Cleaning Up          5 µs 
```

请注意，它似乎挂在`Sending Data`. 我尝试用 NOT IN 替换联接：

```
SELECT `products`.*
FROM   `products`
WHERE  `products`.`deleted` = 'N'
AND    `product`.`id` NOT IN (
    SELECT `product_id`
    FROM   `domains_products`
)
ORDER BY `products`.`id` ASC 
```

此查询给出完全相同的结果，但需要 3.8 秒。

谁能指出我优化此查询的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:17:14.710

似乎问题出在“已删除”列上。我猜 products 表中的几乎所有项目都标有“N”，这使得“deleted”列上的索引在这种情况下毫无用处。

您可以做的一件事是创建另一个表，例如deleted_domains_products，它将存储product_id（如果需要，还有domain_id）。然后您创建一个触发器，以便每次从 domain_products 中删除一个条目时，它都会在该表中插入一个条目。然后你将有一个较小的集合来查询。完成后，您可以在下一次截断该表，所以它应该总是很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:44:08.243

尝试创建以下索引，然后重新运行查询：

1.  domain_products (product_id, domain_id)
2.  产品（id，已删除）

告诉我们这是怎么回事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:09:14.833

试试这个，让我知道它需要的时间。

```
SELECT `products`.*
FROM   `products`
WHERE  `products`.`deleted` = 'N'
AND    NOT EXISTS (SELECT 1 
               FROM `domains_products` 
               WHERE `domains_products`.`product_id` = `products`.`id`
              );
ORDER BY `products`.`id` ASC 
```

# spring-mvc - 将 bean 对象从 MVC 传递到 Spring WebFlow

> ID：14112608
> 
> 赞同：2
> 
> 时间：2013-01-01T17:33:25.943
> 
> 标签：spring-mvc, spring-webflow-2

我需要将一个 bean 对象从 MVC 传递给 webFlow。目前，我正在以这种方式实现它：

1.  将我的 bean 对象作为请求属性存储在控制器中。
2.  转发流量。
3.  在我的流程开始时从 flowRequestContext 访问对象并将其设置在 flowScope 中。

    ```
    @RequestMapping(value = "/ProcessUser", method=RequestMethod.POST)
    public String processForm(LoginUser loginUser, HttpServletRequest request){
    ....
    request.setAttribute("registrationDetails", registrationDetails);

    return "forward:/chineseFlow";    //Call to flow
     } 
    ```

中文流.xml

```
 <on-start>        
    <evaluate expression="userDetailsService.getRegistrationDetails(flowRequestContext)" result="flowScope.registrationDetails"/> 
  </on-start> 
```

用户详情服务

```
 public RegistrationDetails getRegistrationDetails(RequestContext requestContext){

    HttpServletRequest httpRequest = (HttpServletRequest) requestContext.getExternalContext().getNativeRequest();
    RegistrationDetails registrationDetails = (RegistrationDetails)httpRequest.getAttribute("registrationDetails");
    return registrationDetails;
} 
```

我不想将多个请求参数作为输入传递给我的流程。这是将 bean 传递给 SWF 的正确方法还是有其他更好的方法来实现相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:43:39.230

没有太多选择。正确的方法是重新设计您的应用程序，以便整个过程发生在同一个流程中，然后您可以将值存储在 flowscope 中开始。唯一的选择是请求属性（您已经在做）或会话范围的 bean/会话属性。在这些请求属性中是首选的，否则您最终会污染您的会话范围，并引入源自会话范围中剩余值的潜在错误。

# c# - 如何将文本发送到线程？

> ID：14112610
> 
> 赞同：1
> 
> 时间：2013-01-01T17:33:31.217
> 
> 标签：c#, asp.net, .net

```
class1 st = new class1();
string a = addresse.Text;
System.Threading.Thread th1 = new System.Threading.Thread(new System.Threading.ThreadStart(st.start));
th1.Start(); 
```

这就是我们所拥有的

```
class class1
{
    public void start(string m)
    {
        System.Diagnostics.Process.Start(m);
    }
} 
```

注意：用户，输入运行文件的地址，并希望通过我们放置的类使用线程运行文件获取地址并运行文件

问题是线程不接受来自文本框的地址。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:37:58.880

```
class1 st = new class1();
System.Threading.Thread th1 = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(st.start));
th1.Start(textBox1.Text); 
```

* * *

```
class class1
{
    public void start(object o)
    {
        string m = (string)o;
        System.Diagnostics.Process.Start(m);
    }
} 
```

或者干脆

```
new Thread(() => new class1().start(textBox1.Text)).Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:37:40.003

您应该在传递之前将文本保存到变量中。但是为什么要复杂呢？

```
 ThreadPool.QueueUserWorkItem(delegate
     {
        System.Diagnostics.Process.Start(addresse.Text);
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:36:08.217

就快到了

将其更改为：

```
public void start(object m)
{
    System.Diagnostics.Process.Start((string) m);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T20:58:27.910

如果 a 是文本框，您可以使用以下代码：

```
delegate string GetFilePath();

string getFilePath()
{

    if (a.InvokeRequired)
    {
        Invoke(new GetFilePath(getFilePath), null);
    }
    else
    {
        return a.Text;
    }
} 
```

使用委托安全访问不同的线程

# java - 在java中用一个或多个单词搜索整个数据库

> ID：14112612
> 
> 赞同：0
> 
> 时间：2013-01-01T17:33:57.030
> 
> 标签：java, c++, sql, swing, search

为了防止 sql 注入，我试图避免使用`WHERE Surname LIKE '"search_txt.getText()"'`... 但是使用 a`preparedStatement`正在离开 ? 空白，换句话说，即使在文本字段中输入了正确的搜索值，sql语句也无法执行...行中的问题是什么`pst1.setString(1, search_txt.getText()+"%");`

```
private void SearchActionPerformed(java.awt.event.ActionEvent evt) {                                       
             try{
             sql = "SELECT Title, Forename, Surname, Role FROM AcademicInfo WHERE Surname LIKE ? OR Forename LIKE ?";
            PreparedStatement pst1 = conn.prepareStatement(sql); 

            ResultSet rs2 = pst1.executeQuery();
            if (rs2.next()) {
                pst1.setString(1, search_txt.getText()+"%");
                pst1.setString(2, search_txt.getText()+"%");
                System.out.println(sql);
                JOptionPane.showMessageDialog(null, "Found Academic");
                Update_table(sql);
            } else {
                System.out.println(sql);
                JOptionPane.showMessageDialog(null, "No Results Found");
            }
             }
            catch(Exception e) {
                JOptionPane.showMessageDialog(null, e);
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:51:12.097

[对于像Apache Lucene](http://lucene.apache.org/)这样的全文搜索引擎来说，这是一个很好的用例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:52:00.863

使用 MySQL 执行此操作的最简单方法是使用`FULLTEXT`搜索。正如您所说，它不会搜索“整个 sql 数据库”，但它可以搜索很多列。这工作得很好。

语法与您习惯的略有不同。这可能对你有用。

```
SELECT Title, Forename, Surname, Role 
  FROM AcademicInfo 
 WHERE MATCH(Surname, Forename) AGAINST('searchterm' IN BOOLEAN MODE) 
```

我将把它留给您，以使该 SQL 语句适应 Java。

这是文档。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

# android - 运行时异常/空指针异常

> ID：14112614
> 
> 赞同：0
> 
> 时间：2013-01-01T17:34:04.313
> 
> 标签：android, runtimeexception

我有许多与此非常相似的活动，它们都可以工作，但是这个活动打开时，我在 logcat 中收到这些错误。除了日志猫之外，eclipse 中没有可见的错误，所以我不知道该怎么做。

```
 01-01 17:18:00.033: W/dalvikvm(430): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-01 17:18:00.183: E/AndroidRuntime(430): FATAL EXCEPTION: main
01-01 17:18:00.183: E/AndroidRuntime(430): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.musicbynumbers.pianoscales/com.musicbynumbers.scales.minorMelodic}: java.lang.NullPointerException
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.os.Looper.loop(Looper.java:123)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-01 17:18:00.183: E/AndroidRuntime(430):  at java.lang.reflect.Method.invokeNative(Native Method)
01-01 17:18:00.183: E/AndroidRuntime(430):  at java.lang.reflect.Method.invoke(Method.java:521)
01-01 17:18:00.183: E/AndroidRuntime(430):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-01 17:18:00.183: E/AndroidRuntime(430):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-01 17:18:00.183: E/AndroidRuntime(430):  at dalvik.system.NativeStart.main(Native Method)
01-01 17:18:00.183: E/AndroidRuntime(430): Caused by: java.lang.NullPointerException
01-01 17:18:00.183: E/AndroidRuntime(430):  at com.musicbynumbers.scales.minorMelodic.onCreate(minorMelodic.java:52)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-01 17:18:00.183: E/AndroidRuntime(430):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-01 17:18:00.183: E/AndroidRuntime(430):  ... 11 more
01-01 17:23:00.463: I/Process(430): Sending signal. PID: 430 SIG: 9 
```

爪哇

```
package com.musicbynumbers.scales;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.view.Menu;
import android.view.View;
import android.view.WindowManager;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton; 
import android.widget.ListView;
import com.musicbynumbers.pianoscales.R;

public class minorMelodic extends Activity implements View.OnClickListener  {
    Button aflatmin, amin, bflatmin, bmin, cmin, dflatmin, dmin, eflatmin, emin, fmin, fsharpmin, gmin;  
    ImageButton mainMenu;
    Intent j;
    String scaleName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        getWindow().setFormat(PixelFormat.RGBA_8888);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
        setContentView(R.layout.minormelodic);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmin = (Button) findViewById(R.id.aflatmelb);
        amin = (Button) findViewById(R.id.amelb);
        bflatmin = (Button) findViewById(R.id.bflatmelb);
        bmin = (Button) findViewById(R.id.bmelb);
        cmin = (Button) findViewById(R.id.cmelb);
        dflatmin = (Button) findViewById(R.id.dflatmelb);
        dmin = (Button) findViewById(R.id.dharmb);
        eflatmin = (Button) findViewById(R.id.eflatmelb);
        emin = (Button) findViewById(R.id.emelb);
        fmin = (Button) findViewById(R.id.fmelb);
        fsharpmin = (Button) findViewById(R.id.fsharpmelb);
        gmin = (Button) findViewById(R.id.gmelb);
        mainMenu.setOnClickListener(this);
        aflatmin.setOnClickListener(this);
        amin.setOnClickListener(this);
        bflatmin.setOnClickListener(this);
        bmin.setOnClickListener(this);
        cmin.setOnClickListener(this);
        dflatmin.setOnClickListener(this);
        dmin.setOnClickListener(this);
        eflatmin.setOnClickListener(this);
        emin.setOnClickListener(this);
        fmin.setOnClickListener(this);
        fsharpmin.setOnClickListener(this);
        gmin.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(minorMelodic.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmelb:
                    scaleName = "aflatmelmin";
                    j.putExtra("key", scaleName);

                    startActivity(j);
                    break;
                case R.id.amelb:
                    scaleName = "amelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bflatmelb:
                    scaleName = "bflatmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bmelb:
                    scaleName = "bmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.cmelb:
                    scaleName = "cmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dflatmelb:
                    scaleName = "dflatmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dmelb:
                    scaleName = "dmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.eflatmelb:
                    scaleName = "eflatmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.emelb:
                    scaleName = "emelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fmelb:
                    scaleName = "fmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fsharpmelb:
                    scaleName = "fsharpmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.gmelb:
                    scaleName = "gmelmin";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;

    }

}
} 
```

如果有人可以解释如何找到 logcat 发生错误的位置，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:55:06.427

感谢 dmon、codeMagic 和 mango 回答我的问题。我从java中的不同布局中输入了一个按钮ID，这导致了错误。

# php - PHP数据安全帮助使用函数

> ID：14112619
> 
> 赞同：-1
> 
> 时间：2013-01-01T17:34:35.700
> 
> 标签：php, database, security, encryption, database-security

将电子邮件存储在使用 php 中的 encrypt() 函数加密的数据库中是否安全？如果是，那么我该如何解密它，如果不是，那么有什么更好的主意？示例：crypt() 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:43:34.327

您将获得的最好的结果是使用[Rijndael](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)加密。你正在做的是不可逆的**散列。**

在 PHP 中检查 AES 加密：

[PHP 中的 AES-256 加密](https://stackoverflow.com/questions/6770370/aes-256-encryption-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:46:12.103

一个不错的选择是 PGP

您可以通过单击[此处找到有关此的更多信息](http://devzone.zend.com/30/encryption-and-decryption-using-php-and-gnupg/)

# java - 在 IntelliJ 中是否有使用 system.out.println 包装语句的快捷方式

> ID：14112623
> 
> 赞同：30
> 
> 时间：2013-01-01T17:35:15.587
> 
> 标签：java, intellij-idea

在我看来，有时我想打印变量的值，所以我重复以下操作：

1.  写 sout TAB（system.out.println 的快捷方式）
2.  在函数中写入变量名

在 IntelliJ 中是否可以仅使用键盘快捷键将变量与函数包装在一起？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-10-19T01:02:21.813

在 Intellij Idea 13.1 中，有一种快捷方式称为“后缀代码完成”。

所以，要用 包裹一个表达式、对象或变量`System.out.println`，你只需写下它的名字，放一个点，然后写 sout，然后点击制表符。因此，例如：

```
new MyObject().sout + <tab> 
```

将转换为

```
System.out.println(new MyObject()) 
```

更多示例：

```
"Hello World!".sout

int myVariable = 5;
myVariable.sout 
```

您可以在此页面上获取有关后缀完成的更多信息：http: [//blog.jetbrains.com/idea/2014/03/postfix-completion/](http://blog.jetbrains.com/idea/2014/03/postfix-completion/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T17:54:09.090

您可以通过定义实时模板（可在 中配置`Settings->Live Templates->Surround`）来实现。寻找`Surround with {}`那里的一个例子。

之后，您将能够选择变量（可能`Ctrl+W`），然后选择您的模板 ( `Alt+T`) - 仅限键盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-30T16:17:41.823

类型：

`yourVarOrSmthng` `.` `sout`+`Tab`

适用于 IntelliJ 2019.1.1

# openfire - XMPPHP 和 Openfire

> ID：14112624
> 
> 赞同：0
> 
> 时间：2013-01-01T17:35:22.830
> 
> 标签：openfire, xmpphp

我是 XMPP 的新手，我希望基本上将 PHP 连接到我的本地主机上的 OpenFire 安装。

这是我找到的一段代码（我知道黑客和斜线，但我似乎无法理解这一点）。无论如何，代码只是简单地发送一条消息：

```
<?php
    include("xmpp.php");

    //username = user without domain, "user" and not "user@server" - home is the resource
    $conn = new XMPPHP_XMPP('my.server', 5222, 'username', 'password', 'home');
    // Enables TLS - enabled by default, call before connect()!
    $conn->useEncryption(true);
    $conn->connect();
    $conn->processUntil('session_start');
    $conn->message('someguy@someserver.net', 'This is a test message!');
    $conn->disconnect();

 ?> 
```

我的问题是我应该用什么替换`my.server`？试图寻找，但我找不到任何东西

还

> 家是资源

我不知道这意味着什么想法。

`username`和`password`？我的 OpenFire 上有任何用户吗？

我正在寻找比完整解决方案更多的建议。感谢一切。哦，新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T05:15:45.603

其实你对Openfire也有一点了解，所以这是重点。

在这种情况下，Openfire 是您的 IM 服务器，而 php 片段是您的 IM 客户端。在连接到您的 IM 服务器之前，您应该在 Openfire 管理控制台中进行一些配置。如您所说，安装 Openfire locahost，然后启动 Openfire 并在浏览器中访问`http://localhost:9090/`，如果您从未执行此步骤，则表示您没有完成安装 Openfire。进行配置时，您将看到管理员用户设置和密码以及其他一些参数。在这一步之后，您可以使用您的管理员用户名和密码登录到 Openfire。

如果您想测试更多用户，请再次访问 Openfire 管理控制台，然后单击用户选项卡以新增更多用户。

my.server = localhost, home = 任何你喜欢的字符串，这个 XMPP 中的资源通常我们使用客户端应用程序版本，如 spark 2.0 或 xmpphp3.8 。

# html - 始终居中图像

> ID：14112625
> 
> 赞同：0
> 
> 时间：2013-01-01T17:35:24.400
> 
> 标签：html, css, image, center, graphical-logo

我有一张图片，我将其用作徽标。

我希望它始终居中（无论窗口大小如何）。

我无法使用自动边距做到这一点。

图像必须越过我的导航底部，该导航位于徽标上方。

HTML：

```
<div id="logo">

<img src="images/logorz.png" alt="logo" width="180px" />
</div> 
```

CSS：

```
#logo {
    position: absolute;
    margin-left:41%;
    margin-top:-7%;

} 
```

导航HTML：

```
<div id="nav">

<ul>
    <li><img src="images/kranznav.png" alt="kranz" /><a href="index.php">COMPETE</a></li>
    <li><img src="images/thumbnav.png" alt="thumb" /><a href="index.php">SCORE</a></li>
    <li><img src="images/bagnav.png" alt="bag" /><a href="index.php">SHOP</a></li>
    <li><img src="images/morenav.png" alt="more" /><a href="index.php">MORE</a></li>
</ul>
</div>
<div class="clear">
</div> 
```

资产净值 CSS：

```
#nav {
    background:#ffffff;
    width:100%;
    margin-top:-2em;

}

#nav ul {
    list-style-type:none;
}

#nav li {
    display:inline;
    float:left;
    width:20%;
    margin-left:2%;
    margin-right:2%;
    margin-top:5%;
    text-align:center;
}

#nav a {
    display:block;
    margin-right:0% auto;
    padding-left:0% auto;
    color:#5E09CB;
    text-decoration:none; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:40:34.350

如果您的徽标是`width: 180px;`并且您希望始终将其居中。你可以这样做。

```
position: absolute;
left: 50%;
margin-left: -90px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:41:21.560

无需为此使用 javascript。

你可以这样做：

```
#logo {
    position: absolute;
    left:50%;
    margin-left:-50px;
    width:100px;

} 
```

注意，元素需要有宽度，负左边距是宽度的一半。

[http://jsbin.com/ukexox/1/edit](http://jsbin.com/ukexox/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:39:55.627

如果您需要图像位于导航顶部，请尝试使用 z-index 属性...

像这样的东西......

```
css {

z-index:2;

} 
```

使用 z-index 将一个元素定位在另一个元素之上...确保您给另一个元素的 z-index 小于这个...

这可能有效...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T17:40:27.557

```
#logo {
    position: relative;
    margin:0 auto;
    width:180px;
} 
```

`auto`自动设置左边距和右边距，所以`#logo`总是在页面中居中......一些浏览器需要`position:relative`完成这项工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T17:46:13.183

您需要有一个包装导航和图像的包装器。图像标签不需要被不必要的 div 包围。然后，您可以将图像样式设置为

```
image {
    position:relative;
    widhth: image_size_here px;
    margin: auto;
    display:block;

} 
```

这是我保存的一个 jsfiddle 供您参考... [http://jsfiddle.net/vASmC/](http://jsfiddle.net/vASmC/)

# android - 访问 android.support.v4.app.FragmentPagerAdapter 中的 getString()？

> ID：14112628
> 
> 赞同：9
> 
> 时间：2013-01-01T17:35:33.230
> 
> 标签：android, resources, android-fragments, android-context

在扩展类`android.support.v4.app.FragmentPagerAdapter`中，有没有办法`Context.getString(..)`在扩展类不作为活动的内部类或从外部传递某些上下文的情况下访问该方法？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T17:38:24.100

从片段使用：

```
 getActivity().getString(...) 
```

从适配器使用：

```
 getContext().getResources().getString(...) 
```

是的，您需要一个上下文来访问资源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-23T07:48:23.327

从活动中，使用：

```
this.getString(R.string.string_name); 
```

从片段中，使用：

```
getActivity.getString(R.string.string_name); 
```

从适配器，使用：

```
getContext().getResources().getString(R.string.string_name); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-10T01:49:28.403

我有一个类似的问题。从抽屉布局中，我想决定在从辅助类调用的方法中使用哪个片段。

所以在 onCreateView...

```
String form = getResources().getStringArray(R.array.drawer_array)[i];
        Context context = getActivity().getApplicationContext();

        FragmentHelper fh = new FragmentHelper();
        int myFragment = fh.getCurrentFragment(form,context); 
```

在公共 FragmentHelper()...

```
 public int getCurrentFragment(String form, Context context){
              ...
              context.getResources().getString(R.string.label_item1);
              ...
    } 
```

诀窍是在 getResources() 前面添加上下文。否则，我的堆栈显示该片段未附加到活动。

希望这可以帮助某人。

# ruby-on-rails - 一种形式的 Rails 两个控制器

> ID：14112632
> 
> 赞同：1
> 
> 时间：2013-01-01T17:35:46.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, geocoding

我想知道是否有可能保持这种关系并同时构建两个控制器？

让我解释一下我有两个模型，关系如下：

```
Users, Locations
Users has many locations
Locations belongs_to users 
```

我不确定是否应该在创建新用户时向用户表单添加虚拟字段以及如何添加虚拟字段，然后将经度和纬度属性作为参数发送，以便在我的控制器中执行以下操作：

`UserController#new`

```
@users= User.new
@location = User.locations.build(params[:latitude,:longitude])
... 
```

这是我的两个问题：

1.  这是正确的方法吗？
2.  如何创建仅用于此时间的虚拟字段/隐藏字段。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:52:14.953

在 Location 模型中写入 attr_accessor :latitude, :longitude。

attr_accessor 为模型/类对象创建读取器和写入器方法

# facebook-c#-sdk - C# Facebook sdk 6.1.4 注销

> ID：14112638
> 
> 赞同：0
> 
> 时间：2013-01-01T17:36:17.083
> 
> 标签：facebook-c#-sdk

对不起，如果我再次问这个问题，但我真的无法摆脱这个问题。我的应用程序我有 2 个帐户，我用一个帐户登录，一切都很完美我在一些组合框中加载专辑和页面，我尝试使用另一个帐户登录以获取相同的信息，但我得到的专辑和页面与另一个帐户的。我尝试了一切注销但没有工作。我不会问，但我阅读并尝试了很多代码！谢谢

这是我“尝试”注销的地方：

```
 private void button2_Click_1(object sender, EventArgs e)
    {
        comboBox1.Items.Clear();
        comboBox3.Items.Clear();

        //var fb = new FacebookClient();
        //var logoutUrl = fb.GetLogoutUrl(new { access_token = this.AccessToken, next = "https://www.facebook.com/connect/login_success.html" });
        //webBrowser_01.Navigate(logoutUrl);

        logout = "ok";

        var fb = new FacebookClient();
        var logoutUrl = fb.GetLogoutUrl(new { access_token = this.AccessToken, next = "https://www.facebook.com/connect/login_success.html" });

        webBrowser_01.Navigate(logoutUrl);
    } 
```

这是我加载数据的地方：

```
 private void WebBrowserNavigated(object sender, WebBrowserNavigatedEventArgs e)
    {
        if(logout.Trim().Length==0)
        {

        // get token
        var url = e.Url.Fragment;
        if (url.Contains("access_token") && url.Contains("#"))
        {
            //this.Hide();
            url = (new Regex("#")).Replace(url, "?", 1);

            this.AccessToken = System.Web.HttpUtility.ParseQueryString(url).Get("access_token");

            //MessageBox.Show(this.AccessToken);

            fb = new FacebookClient(this.AccessToken);
            fb.PostCompleted += new EventHandler<FacebookApiEventArgs>(fb_PostCompleted);

            //ALBUM BEST

            //Get the album data

            dynamic albums = fb.Get("me/albums");
            foreach (dynamic albumInfo in albums.data)
            {
                //Get the Pictures inside the album this gives JASON objects list that has photo attributes 
                // described here http://developers.facebook.com/docs/reference/api/photo/
                //dynamic albumsPhotos = fb.Get(albumInfo.id + "/photos");
                string jdata = albumInfo.ToString();
                JObject obj = JObject.Parse(jdata);
                string aid = (string)obj["id"];
                string coverphoto = (string)obj["cover_photo"];
                string name = (string)obj["name"];
                //MessageBox.Show(aid + " - " + name);

                Albums_Name[name] = aid;
            }

            //ROUTINE PER INDIVIDUARE LE PAGES

            dynamic All_Accounts = fb.Get("me/accounts");
            foreach (dynamic accountInfo in All_Accounts.data)
            {
                //Get the Pictures inside the album this gives JASON objects list that has photo attributes 
                // described here http://developers.facebook.com/docs/reference/api/photo/
                //dynamic albumsPhotos = fb.Get(albumInfo.id + "/photos");
                string jdata = accountInfo.ToString();
                JObject obj = JObject.Parse(jdata);
                string aid = (string)obj["id"];
                string name = (string)obj["name"];
                Access_Token_Pages = (string)obj["access_token"];
                //MessageBox.Show(aid + " - " + name + " - " + Access_Token_Pages);
                Accounts_Name[name] = aid;

            }

            comboBox1.Items.Clear();
            //comboBox2.Items.Clear();
            comboBox3.Items.Clear();

            foreach (DictionaryEntry element in Albums_Name)
            {
                if (element.Key.ToString().IndexOf(@"Timeline Photos") == -1 && element.Key.ToString().IndexOf(@"Mobile Uploads") == -1 && element.Key.ToString().IndexOf(@"Profile Pictures") == -1)
                {
                    comboBox1.Items.Add((string)element.Key);
                }
            }

            comboBox1.SelectedIndex = comboBox1.FindStringExact(Default_Album);

            //ROUTINE PER INDIVIDUARE GLI ALBUM DELLE PAGES
            fb2 = new FacebookClient(Access_Token_Pages);
            fb2.PostCompleted += new EventHandler<FacebookApiEventArgs>(fb_PostCompleted);

            foreach (DictionaryEntry element in Accounts_Name)
            {
                //MessageBox.Show((string)element.Value);
                dynamic Pages_Albums = fb2.Get((string)element.Value + "/albums");
                foreach (dynamic albumInfo in Pages_Albums.data)
                {
                    //Get the Pictures inside the album this gives JASON objects list that has photo attributes 
                    // described here http://developers.facebook.com/docs/reference/api/photo/
                    //dynamic albumsPhotos = fb.Get(albumInfo.id + "/photos");
                    string jdata = albumInfo.ToString();
                    JObject obj = JObject.Parse(jdata);
                    string aid = (string)obj["id"];
                    //string coverphoto = (string)obj["cover_photo"];
                    string name = (string)obj["name"];
                    //MessageBox.Show(aid + " - " + name);

                    All_Pages_Album[name] = aid;
                }

            }

            foreach (DictionaryEntry element in All_Pages_Album)
            {

                comboBox3.Items.Add((string)element.Key);
            }

            comboBox3.SelectedIndex = comboBox3.FindStringExact(Default_Pages_Album);

        }

    }

    } 

    Thanks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:14:24.490

这是由两个原因引起的问题。.net 浏览器/ie 和 facebooks 从不工作注销功能。

您必须编写第二个软件，当用户从 facebook 注销或完成他的工作时，该软件会杀死并打开您原来的软件。如果不杀死其可执行的 webbrowser 控件，它就永远不会消失 :) 无论如何，previos 用户会话都会保持活动状态。

此外，对于 facebook 注销禁用 cookie，除了在 ie 中访问的网站...您必须查找该设置

# google-apps-script - 谷歌脚本访问联系人的电子邮件地址的自定义标签

> ID：14112640
> 
> 赞同：3
> 
> 时间：2013-01-01T17:36:28.623
> 
> 标签：google-apps-script, gmail, google-contacts-api, gmail-contextual-gadgets

（Google 脚本的新手{大约 2 周}，所以请详细说明）

我已经尝试了所有我能找到或想到的方法来显示联系人电子邮件地址列表的自定义标签。这非常令人沮丧。当我搜索时，我得到了很多关于 gmail 邮件标签的点击，但没有针对单个联系人中的电子邮件地址的自定义标签。

长期目标是为我儿子的童子军建造一个汽车货运代理，迈出小步来到达那里。

有些男孩希望通过短信收到通知，有些则希望通过电子邮件收到通知。由于有些有实际的电子邮件（与附件一起使用）和手机（用于提醒），因此需要自定义联系人电子邮件标签。我可以列出所有联系人组，并且可以列出每个组中的所有联系人姓名。我什至可以获得每个联系人的所有电子邮件地址。但我无法获取联系人电子邮件列表的自定义标签。

我无法理解为什么“getLabel”方法不能完成所有“幕后”工作并返回标签文本，而不管标签类型（自定义或内置）如何。

任何指导将不胜感激。

```
 function Get_Groups_Contacts(GroupList) 
    {
      var groups = ContactsApp.getContactGroups();  //get the list of groups
      for (var i in groups)  //for each item in the group list ...
      {
        for (var n=0; n<=15; n++)  //need to setup retries since the next part sometimes has server issues
        {
          try  //trap errors
          { 
            var cont = groups[i].getContacts()  //get the list of contacts that belong to the group
            var arrCont= []  //define the temp storage
            for (var j in cont)  //step through each contact
            {
    //I can store a list of contact names…
              arrCont.push(cont[j].getFullName() );  //get the contact's full name
    // but am trying to switch to specific email address….
              var eml = cont[j].getEmails();  // the list of all email address for a contact
    //now the messy part, trying to figure things out
    //lists the built in labels but not the custom labels
              for (k in eml) Logger.log(typeof eml[k].getLabel() + "??" + eml[k].getLabel() + "--" + eml[k].getAddress());
              for (k in eml)
              {
                try 
                {
                  var x = eml[k].getLabel();
                  Logger.log(k + " !!" + typeof x + "??" + x + "--" + eml[k].getAddress() + "**" + "hello");
    //              var oneeml = eml[k];
                  var oneeml = cont[j].getEmails("Other");
                  Logger.log("xxxxxxxxxxxxxxxxxxxxxxxx");
                  Logger.log("oneeml " + oneeml);
                  //Logger.log(oneeml.getLabel())
                  Logger.log("zzzzzzzzzzzzzzzzzzzzzzzz");
                  for (zz in oneeml) Logger.log(oneeml[zz]);
                  for (zz in oneeml) 
                    if (zz == "setAsPrimary") Logger.log(zz)
                    else if (zz == "setDisplayName") Logger.log(zz)
                    else if (zz == "setAddress") Logger.log(zz)
                    else if (zz == "setLabel") Logger.log(zz)
                    else if (zz == "deleteEmailField") Logger.log(zz)
                    else Logger.log(oneeml[zz]())
                    ;
                }
                catch(ext)
                {
                  Logger.log("inner catch");
                  Logger.log(ext.message);
                }
              }
            } 
    //end of the messy part
            GroupList[groups[i].getGroupName()] = arrCont  //store the list in the property
            break;  //go on to the next group
          }  //end of try
          catch(err)  //catch the error here
          {
    //        Logger.log (n + " error message" + err.message);  //debug
           Logger.log ("n=" + n);  //debug
            sleep((Math.pow(2,n) + (Math.random(0, 1000) / 100)) );  //increasing random sleep time waiting for the server
          }  //end of catch
          finally  //always do this part
          {
            cont = undefined;  //cleanup
            arrCont = undefined;  //cleanup
          }  //end of error traping
        }  //end of retry loop
      }  //end for each group item
    };  //end of function List_Groups_Contacts() 
```

# html - 在 Grails 测试报告的系统输出中打印 html 标签

> ID：14112644
> 
> 赞同：0
> 
> 时间：2013-01-01T17:37:03.543
> 
> 标签：html, grails, groovy

我正在尝试在我的**grails**测试报告中打印我的 Spock 规格的步骤描述。

我`print/println`用来在报告中提供这些信息。

问题是我想将一些数据打印为 HTML 表格，但是当我打印一些 html 标记（即`<table>`）时，`<`and `>`（小于和大于符号）被打印为`&lt`and `&gt`。

有没有办法在不转换标签的情况下打印标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:51:06.817

这里有一个答案：[Java: How to unescape HTML character entity in Java?](https://stackoverflow.com/questions/994331/java-how-to-decode-html-character-entities-in-java-like-httputility-htmldecode) ，推荐使用[org.apache.commons.lang.StringEscapeUtils.unescapeHtml(String str)](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)。

> 转义HTML
> 
> 公共静态字符串 unescapeHtml(String str)
> 
> ```
> Unescapes a string containing entity escapes to a string containing the actual 
> ```
> 
> 对应于转义的 Unicode 字符。支持 HTML 4.0 实体。
> 
> ```
> For example, the string "&lt;Fran&ccedil;ais&gt;" will become "<Français>"
> 
> If an entity is unrecognized, it is left alone, and inserted verbatim into 
> ```
> 
> 结果字符串。例如 ">&zzzz;x" 将变为 ">&zzzz;x"。

# django - Django+Tastypie：只删除几个对象

> ID：14112659
> 
> 赞同：1
> 
> 时间：2013-01-01T17:38:50.643
> 
> 标签：django, rest, tastypie

我正在使用 Django-Tastypie 为我的 Web 应用程序提供 REST-API。

在这种情况下，我有一个`PhotoGallery`对象，它引用了几个`Photos`使用中间表（`through`在 ManyToMany 字段上使用）。

不幸的是，我在`PhotoGallery`通过 REST 接口保存对象时遇到了一些麻烦，因为它需要我在中间表中创建相应的链接（其中包含一些附加信息，如排序索引等）。

为了简化 API，我决定也公开中间表，现在用户可以创建和修改照片和画廊之间的关系。

为了防止 REST-API 的用户不得不使用单个 HTTP 请求删除每个链接，**我想知道是否可以使用单个 HTTP`DELETE`请求来删除选定数量的对象**。DELETE 请求似乎不尊重过滤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:22:14.577

你考虑过`PATCH`方法吗？查看文档中的[批量操作](http://django-tastypie.readthedocs.org/en/latest/interacting.html#bulk-operations)部分。注意`"deleted_objects": ...`部分。

# javascript - AngularJS，带有ng-include的ng-repeat不渲染

> ID：14112663
> 
> 赞同：3
> 
> 时间：2013-01-01T17:39:10.740
> 
> 标签：javascript, html, angularjs, singlepage

嗨，我开始学习 Angular，当我将 ng-repeat 与 ng-include 结合使用时遇到了问题。无论我做什么，我都无法获得要渲染的模板。我有一个简单的控制器，它创建一个工作区列表，每个工作区都有一个 TemplateUrl 属性。

我知道这个值是正确的，因为如果我只是渲染出原始文本 {{workspace.TemplateUrl}} 然后将其直接放入 ng-include 中，它就没有问题。当它来自控制器时，它似乎永远不会工作。我也尝试过将模板路径放在这样的引号中，但这没有区别。

```
$scope.Workspaces.push(new Workspace("'/app/templates/Template1.html'", "Workspace 1")); 
```

当我运行它时，我没有看到拉取模板的请求。任何人都可以帮助解决这个问题，因为它让我有点发疯。

```
<!DOCTYPE html>
<html ng-app>
<head>
    <title>Workspaces</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">
    <script src="app/libraries/jquery.js"></script>
    <script src="app/libraries/bootstrap.min.js"></script>
    <script src="app/libraries/angular.js"></script>
    <script src="app/app.js"></script>
</head>

<body ng-controller="HostController">
    <div>
        <ul class="unstyled">
            <li ng-repeat="workspace in Workspaces">
                <p>{{workspace.TemplateUrl}}</p>
                <hr />
                <div ng-include="{{workspace.TemplateUrl}}"></div>
            </li>
        </ul>
    </div>

</body>
</html> 
```

控制器代码

```
 var Workspace = (function () {
        function Workspace(templateUrl, name) {
            this.TemplateUrl = templateUrl;
            this.Name = name;
        }
        return Workspace;
    })();
    function HostController($scope) {
        $scope.Workspaces = new Array();
        $scope.Workspaces.push(new Workspace("/app/templates/Template1.html", "Workspace 1"));
        $scope.Workspaces.push(new Workspace("/app/templates/Template2.html", "Workspace 2"));
        $scope.Workspaces.push(new Workspace("/app/templates/Template1.html", "Workspace 3"));
        $scope.Workspaces.push(new Workspace("/app/templates/Template2.html", "Workspace 4"));
        $scope.Workspaces.push(new Workspace("/app/templates/Template1.html", "Workspace 5"));
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T17:42:38.663

我引用你的代码

```
 <div ng-include="{{workspace.TemplateUrl}}"></div> 
```

应该

```
 <div ng-include="workspace.TemplateUrl"></div> 
```

因为这是一个 ng 声明。

# java - @OneToMany 关系：“一个”id 未保留

> ID：14112673
> 
> 赞同：0
> 
> 时间：2013-01-01T17:40:42.570
> 
> 标签：java, hibernate, jakarta-ee, jpa

这是我的“标题”实体：

```
@Entity
@Table(name = "documenti")
@Inheritance(strategy=InheritanceType.JOINED)
public class Documento implements Serializable {

    @Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id")
private Long id;

    @OneToMany(
        mappedBy="testataDocumento",
        cascade=CascadeType.ALL,
        fetch=FetchType.LAZY
    )
    private Set<RigaDocumento> righe= new HashSet<RigaDocumento>();

//...
} 
```

这些是“行”：

```
@Entity
@Table(name="righe_documenti")
public class RigaDocumento implements Serializable {

@Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Long id;

    @ManyToOne
    private Documento testataDocumento;

//...
} 
```

好吧，我有一个常见的情况：

```
Documento d = new Documento();
// various Documento settings
List<RigaDocumento> rows;
// creation of rows
d.setRighe( rows ); 
```

然后我坚持**d**。

标题也正确保留了行，但是...

行记录中的“testataDocumento_id”字段（关系“一”侧的键）为 NULL。

我必须做一个：

```
row.setTestataDocumento(d); 
```

?

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:43:02.760

是的，你必须打电话`row.setTestataDocumento(d);`，因为这是关系的拥有方。理想情况下，您将`addRow()`在 Documento 中有一个方法，该方法将添加要设置的行并设置该行的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:43:33.803

是的，您必须这样做，因为您有一个双向关联，并且关联的所有者是 RigaDocumento。所有者方是没有`mappedBy`属性的一方。另一面称为反面，JPA/Hibernate 会忽略它。

# javascript - 如何在不使用 setInterval/timeout 的情况下检查实时更新？

> ID：14112676
> 
> 赞同：10
> 
> 时间：2013-01-01T17:41:05.467
> 
> 标签：javascript, ajax, comet

建立一个社交网络，我正在尝试获取实时通知。目前，该站点使用 setInterval 每隔几秒发送一个 AJAX 请求。它看起来像这样：

```
setInterval ( function(){
    url = base_dir+"/ajax/file.php";
    data = "data=someData";
    $.ajax({
        type: "POST",
        url: url,
        data: data,
        dataType: "json",
        beforeSend: function(x) {
            if(x && x.overrideMimeType) {
                x.overrideMimeType("application/json;charset=UTF-8");
            }
        },
        success: function(JSON){
            // retrieve data here   
        }
    });
}, 5000); 
```

这非常有效，但我非常担心创建服务器过载。我尝试了彗星技术，但由于某种原因，它发送的请求比上面的代码多得多。还有其他更有用的技术可以实时推送这些数据吗？

编辑：为了实现长轮询，我使用了以下内容（使用此处提到的示例：http: [//techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)）：

```
(function poll(){
    url = base_dir+"/ajax/file.php";
    data = "data=someData";
    $.ajax({
        type: "POST",
        url: url,
        data: data,
        dataType: "json",
        beforeSend: function(x) {
            if(x && x.overrideMimeType) {
                x.overrideMimeType("application/json;charset=UTF-8");
            }
        },
        success: function(JSON){
            // retrieve data here   
        },
complete: poll,
timeout: 5000
    });
})(); 
```

我可能无法正确理解彗星原理。

PHP代码：

```
// Checks for new notifications, and updates the title and notifications bar if there are any
 private static function NotificationsCounter (){
    //self::$it_user_id                                     = query that retrieves my id for further checks;                                                        
    //$friend_requests_count                                = query that retrieves the friend requests count;
    //$updates_count                                        = query that retrieves the updates count;               
    $total_notifications                                    = $friend_requests_count+$updates_count;

    if ($total_notifications > 0) $addToTitle = "(".$total_notifications.")";
    else $addToTitle = "";

    if ($updates_count > 0) $counterHTML = "<span class='notification_counter' id='updates_counter' style='float: right;'>".$updates_count."</span>";
    else $counterHTML = "";

    $data = array("counter"=>$total_notifications,"addToTitle"=>$addToTitle,"counterHTML"=>$counterHTML,);
    echo json_encode($data); // parse to json and print
} 
```

由于 Facebook 也使用 PHP，他们是如何做到的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T18:02:13.237

你应该使用**websockets**。您可以连接到服务器并注册 onmessage 处理程序。每当服务器有任何东西要发送给客户端时，您的处理程序都会被调用。无需超时。

检查浏览器中的 websocket 支持。截至目前，只有 Chrome、Opera 和 Safari 支持它们。

```
if ('WebSocket' in window){
   /* WebSocket is supported. You can proceed with your code*/
} else {
   /*WebSockets are not supported. Try a fallback method like long-polling etc*/
} 
```

连接

```
var connection = new WebSocket('ws://example.org:12345/myapp'); 
```

处理程序

```
connection.onopen = function(){
   console.log('Connection open!');
}

connection.onclose = function(){
   console.log('Connection closed');
}

connection.onmessage = function(e){
   var server_message = e.data;
   console.log(server_message);
} 
```

文档： http: [//www.developerfusion.com/article/143158/an-introduction-to-websockets/](http://www.developerfusion.com/article/143158/an-introduction-to-websockets/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:18:09.050

一旦 Websockets 在主要浏览器中得到更普遍的实施，它们将成为必经之路——我猜至少需要 5 年。

我最后一次听说 Facebook 聊天使用 Comet 和一大堆服务器。如果你想要更轻量级的东西，我可以想到两个选择。

1.  减少轮询间隔。这严格来说是一个 UI 问题——用户可能会在几分钟内获得完全可以接受的体验。确定的唯一方法是通过用户测试，但每 5 秒轮询一次可能是矫枉过正。无论您选择什么作为最佳间隔，如果您受到打击，这确实为您提供了一种快速扩展的方法 - 只需加快间隔直到服务器停止融化。

2.  使用 HTTP 验证缓存。如果服务器仅在自上次请求后内容发生更改时才返回响应正文，则可以使请求更轻量级。您必须使用 ETag 或 Last-Modified 标头和服务器上的轻量级修改检查系统构建自定义内容，但它可能会为您节省一些字节。

# haskell - 从“local hackage”安装软件包（通过 cabal）

> ID：14112681
> 
> 赞同：5
> 
> 时间：2013-01-01T17:41:34.857
> 
> 标签：haskell, cabal, hackage

是否有可能让阴谋集团

*   下载特定的包源，包括所有依赖包源。
*   在稍后阶段（当不再依赖互联网连接时）通过 cabal 从本地下载的文件中安装这些包，自动以正确的顺序构建所需的包？

我知道你可以用它`cabal unpack`来查看特定包的来源，但我不知道如何在上面实现。另请注意，在这篇文章[Can't get cabal update to work insidecorporate network](https://stackoverflow.com/questions/8420439/cant-get-cabal-update-to-work-inside-corporate-network)中提到可以这样做，但说明对我来说不够具体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:23:15.140

`cabal help | grep fetch`：

```
fetch        Downloads packages for later installation. 
```

例子：

```
$ cabal fetch unbound
Resolving dependencies...
Downloading RepLib-0.5.3.1...
Downloading type-equality-0.1.1...
Downloading unbound-0.4.1.1... 
```

在稍后阶段运行`cabal install unbound`将不需要 Internet 访问。

# database - 最快的哈希映射类型

> ID：14112682
> 
> 赞同：0
> 
> 时间：2013-01-01T17:41:55.503
> 
> 标签：database, hash, hashmap

我需要散列从低端 2^12 的空间中采样的 ~15000 个无符号整数，到高端的 2^32。我还需要存储索引以进行反向查找。一个使用 C++ STL 的简单示例是：

```
std::map<unsigned int, std::set<unsigned int /* unique indices */> > m; 
```

在密集的情况下，我们可以将其视为：

```
std::vector<std::set<unsigned int /* unique indices */> > v; 
```

现在解决问题。速度是这里最重要的因素，但我在内存方面仍然受到限制。我需要将 1000 个这些映射存储在内存中，并在低延迟应用程序中以高速率访问。查询应该是有序的纳秒。

我目前使用密集方法存储数据。但是，我想将需要散列到 2^32 的键的范围增加，这使得密集方法有问题。请记住，我只需要在地图中存储约 15000 个键。

从好的方面来说，一旦地图建成，我就再也不会在里面插入任何东西了。我只会在以后查询它。插入仍然需要相当快，但不如查询那么关键。

我尝试过的一些代码是：

Google SparseHash
Google DenseHash
STL unordered_map
STL 映射

我不介意编写自己的哈希表。在自己解决之前，我想获得一些专家建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T19:00:12.267

平均 GET 操作应该在 1 毫秒以下，从 189ns 到 1024 个条目（内存中 349KB）到 888ns 到 27,648 个条目（6MB 在内存中）。具有 27k 个条目的条目的最大延迟为 44,000ns。但是，如果平均时间对您来说很重要，而不是经常出现高延迟，那么这可能基本上就是您想要的。我认为它可以进一步优化，但不确定会获得什么收益。

```
typedef unsigned int uintptr;
typedef unsigned int uint32;
typedef unsigned short uint16;
typedef unsigned char uint8;

namespace anything { namespace linklist {
typedef struct _HDR {
    void              *next;
    void              *prev;
} HDR;

void *next(void *ptr) {
    if (ptr == 0) {
        return 0;
    }
    return ((void**)ptr)[0];
}

void add(void **chain, void *toadd) {
    ((void**)toadd)[0] = *chain;
    ((void**)toadd)[1] = 0;         /* set previous */

    /* set previous link if valid pointer */
    if (*chain)
        ((void**)*chain)[1] = toadd;

    *chain = toadd;
}
}}

namespace anything{ namespace hash {
   typedef struct _B {
      MASS_LL_HDR    llhdr;
      uint32         id;
      union {
         struct _B    *chain;
         uintptr      value;
      };
   } B;

   typedef struct _HT {
      B        *buckets;
      uint16   depth;
      uint8    bbl;
   } HT;

   void init(HT *ht, uint8 bbl) {
      ht->buckets = 0;
      ht->bbl = bbl;
   }

   void _free(B **chain, uint16 dcnt, uint16 dcntmax, uint32 *_m) {
      B        *ba, *_ba;

      for (ba = *chain, _ba = 0; ba; ba = _ba) {
         _ba = (B*)mass_ll_next(ba);

         if (dcnt < dcntmax - 1) {
            _free(&ba->chain, dcnt + 1, dcntmax, _m);
            *_m = *_m + 1;
            dfree(ba);
         }
      }

      /* zero the chain out */
      *chain = 0;
   }

   void free(HT *ht) {
      uint32      m;
      uint16      dm;

      dm = (sizeof(uintptr) * 8) / ht->bbl;
      m = 0;

      _free(&ht->buckets, 0, dm, &m);
   }

   int get(HT *ht, uintptr k, uintptr *v) {
      uintptr        a;
      B             *ba, **cur;

      uint16         bi, lcnt;
      uint32         mask;

      lcnt = (sizeof(uintptr) * 8) / ht->bbl;

      cur = &ht->buckets;

      mask = ~(~0 << ht->bbl);

      for (bi = 0; bi < lcnt; ++bi) {

         a = (k >> (bi * ht->bbl)) & mask;

         for (ba = *cur; ba; ba = (B*)mass_ll_next(ba)) {
            if (ba->id == a) {
               break;
            }
         }

         if (!ba) {
            return 0;
         }

         cur = &ba->chain;
      }

      *v = ba->value;
      return 1;
   }

   void put(HT *ht, uintptr k, uintptr v) {
      uintptr       a;
      B             *ba, **cur;

      uint16         bi, lcnt;
      uint32         mask;

      lcnt = (sizeof(uintptr) * 8) / ht->bbl;

      cur = &ht->buckets;

      mask = ~(~0 << ht->bbl);

      for (bi = 0; bi < lcnt; ++bi) {

         a = (k >> (bi * ht->bbl)) & mask;

         for (ba = *cur; ba; ba = (B*)mass_ll_next(ba)) {
            if (ba->id == a) {
               break;
            }
         }

         if (!ba) {
            ba = (B*)dmalloc(sizeof(B));
            ba->id = a;
            ba->chain = 0;
            mass_ll_add((void**)cur, ba);
         }

         cur = &ba->chain;
      }

      ba->value = v;
   }
}}

anything::hash::HT      ht;
anything::hash::init(&ht, 1);
anything::hash::put(&ht, key, value);
if (!anything::hash::get(&ht, key, &value) {
   printf("not found!\n");
} 
```

您可以使用anything::hash::init(&ht, 4) 将内存使用量减少到每15000 个条目大约900kb，但这会增加延迟。

# c++ - 如何将纹理从一台设备复制到另一台设备？

> ID：14112683
> 
> 赞同：0
> 
> 时间：2013-01-01T17:42:18.830
> 
> 标签：c++, directx, directx-9

我有一个用于单独窗口的 directx9 设备。其中一个窗口上有一个渲染图像。我想做的实际上是获取设备'A'图像并将纹理放置在设备'B'的纹理上。这可能吗？

我试图弄清楚为什么下面的代码不起作用，因为 StretchRect 仅适用于您尝试使用的指定设备。

下面的代码将不起作用：

```
D3DXCreateTexture ( B , 32 , 32 , 1 , D3DUSAGE_RENDERTARGET , D3DFMT_A8R8G8B8 , D3DPOOL_DEFAULT , &Texture );

IDirect3DSurface9 *backBufferSucrface;
Texture ->GetSurfaceLevel ( 0 , &backBufferSucrface );

IDirect3DSurface9* backBufferCurrect;
A->GetBackBuffer ( 0 , 0 , D3DBACKBUFFER_TYPE_LEFT , &backBufferCurrect );

B->StretchRect ( backBufferCurrect , 0 , backBufferSucrface , 0 , D3DTEXF_LINEAR );

backBufferCurrect->Release(); 
```

我很想能够做到这一点，但如果这是不可能的，有什么办法可以让我只使用一个设备并渲染到多个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:02:25.593

从 vista d3d9 开始支持设备之间的资源共享。 [http://msdn.microsoft.com/en-us/library/windows/desktop/bb219800(v=vs.85).aspx#Sharing_Resources](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219800(v=vs.85).aspx#Sharing_Resources)

# c# - Windows 应用商店应用程序如何自行关闭？

> ID：14112689
> 
> 赞同：-1
> 
> 时间：2013-01-01T17:43:18.110
> 
> 标签：c#, javascript, windows-store-apps

> **可能重复：**
> [VS11 应用程序上的关闭按钮](https://stackoverflow.com/questions/10446805/close-button-on-vs11-apps)

Windows 应用商店应用程序如何在代码中自行关闭（C# 但 JS 也可能有帮助）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:30:35.003

评论转发为答案：此问题重复：[VS11 应用程序上的关闭按钮](https://stackoverflow.com/questions/10446805/close-button-on-vs11-apps)

简而言之：如果您实际上是在制作 Windows 应用商店应用程序（它不会经过认证），则不应该有关闭按钮，但`Application.Current.Close()`如果您需要一个用于调试关闭的按钮，则可以使用。

# wordpress - 如何自定义wordpress自定义walker

> ID：14112690
> 
> 赞同：1
> 
> 时间：2013-01-01T17:43:20.140
> 
> 标签：wordpress

为了制作以下输出，我使用了 wordpress 自定义 walker

```
class Walker_Page_Custom extends Walker_Nav_Menu {

function start_lvl(&$output, $depth) {
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent
        <div class='nav-dropdown' style='display: block; height: 1.2534674133206636px; overflow: hidden;'>
         <div class='drop-col'>
          <img id='prod' src='#' rel='#' alt='Womenswear'>
         <ul class='level0'>
         <li id='menu-item'>

    \n";
}

function end_lvl(&$output, $depth) {
    $indent = str_repeat("\t", $depth);
    $output .= "$indent
           </li>
          </ul>
          </div>
         </div>
    \n";
}

} 
```

这是我当前的输出

```
<li id="menu-item-310" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-310">
    <a href="http://localhost/wp/products-page/" class="sf-with-ul">Products Page</a>
    <div class="nav-dropdown"> <!-- first one -->
        <div class="drop-col"> <!-- first one -->
            <img id="prod" src="" rel="" alt="Womenswear">
            <ul class="level0">
                <li id="menu-item-311" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-311"><a href="http://localhost/wp/products-page/your-account/">Your Account</a></li>
                <li id="menu-item-312" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-312"><a href="http://localhost/wp/products-page/transaction-results/">Transaction Results</a></li>
                <li id="menu-item-313" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-313"><a href="http://localhost/wp/products-page/checkout/" class="sf-with-ul">Checkout<span class="sf-sub-indicator"> »</span></a>
                    <div class="nav-dropdown"><!-- second one -->
                        <div class="drop-col"><!-- second one -->
                            <img id="prod" src="#" rel="#" alt="Womenswear">
                            <ul class="level0">
                                <li id="menu-item-314" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-314"><a href="http://localhost/wp/products-page/checkout/order-received/">Order Received</a></li>
                                <li id="menu-item-315" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-315"><a href="http://localhost/wp/products-page/checkout/pay/">Checkout ? Pay</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</li> 
```

如果你注意到，第一个`<div class="nav-dropdown">`和`<div class="drop-col">`里面有`<div class="nav-dropdown">`and`<div class="drop-col">`

所以我需要改变第二个班级，`<div class="nav-dropdown">`我们`<div class="drop-col">`可以说`<div class="inner-nav-down">`和`<div class="inner-drop-cll">`或任何其他班级，我不在乎

有什么建议编辑这个自定义助行器来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:07:12.683

```
function start_lvl(&$output, $depth) {
    $indent = str_repeat("\t", $depth);
    $inner = $depth ? 'inner-' : '';
    $output .= "\n$indent
        <div class='".$inner."nav-dropdown' style='display: block; height: 1.2534674133206636px; overflow: hidden;'>
        <div class='".$inner."drop-col'>
        <img id='prod' src='#' rel='#' alt='Womenswear'>
        <ul class='level0'>
        <li id='menu-item'>

    \n";
} 
```

# string - 如何将一些汇编代码计数 Delphi 字符串引用迁移到 Delphi Unicode

> ID：14112694
> 
> 赞同：0
> 
> 时间：2013-01-01T17:43:35.280
> 
> 标签：string, delphi

亲爱的了解汇编程序的德尔福人——

我有一个很棒的例程，在 Unicode 之前的世界中运行良好。

```
function StringRefCount(const Src: String): Integer;
asm
  test eax, eax
  je   @Exit
  mov  edx, eax
  mov  eax, [edx - 8]

@Exit:
end; 
```

鉴于我的 ASM 技能充其量只是初级，如何在 D2009+ 中做到这一点？

添加：此测试失败：

```
procedure TestStringStuff.TestStringRefCount;
var
  TempString: string;
  TempResult: Integer;
  SecondString: string;
begin
  TempString := 'this is a temp string';
  TempResult := StringRefCount(TempString);
  CheckEquals(1, TempResult);
  SecondString := TempString;
  TempResult := StringRefCount(TempString);
  CheckEquals(2, TempResult);
end; 
```

谢谢——我很高兴承认自己犯了一个大脑袋放屁。:-)

缺口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T23:22:11.963

对于 32 位编译器，无需更改该代码。这是错误的测试用例，因为字符串文字的内置引用计数为 -1。

对于 64 位代码（以及较新编译器上的 32 位代码），您最好使用 RTL 已经提供的同名函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T18:22:29.840

如果你想看到引用计数的作用，你必须首先在堆上创建一个字符串实例，如下所示：

```
procedure TestStringStuff.TestStringRefCount;
var
  TempString: string;
  TempResult: Integer;
  SecondString: string;
begin
  TempString := 'this is a temp string';
  UniqueString(TempString);  // <-- !!
  TempResult := StringRefCount(TempString);
  CheckEquals(1, TempResult);
  SecondString := TempString;
  TempResult := StringRefCount(TempString);
  CheckEquals(2, TempResult);
end; 
```

# cuda - CUDA：GeForce GTX 690 上的 GPUDirect

> ID：14112700
> 
> 赞同：1
> 
> 时间：2013-01-01T17:44:17.473
> 
> 标签：cuda, nvidia, gpudirect

GeForce GTX 690（来自 Zotac 和 EVGA 等供应商）可用于 CUDA 编程，很像 Tesla K10。

问：GeForce GTX 690 是否支持 GPUDirect？具体来说：如果我使用两张 GTX 690 卡，我将有 4 个 GPU（每张卡内有两个 GPU）。如果我将两个 GTX 690 卡连接到同一个 PCIe 交换机，GPUDirect 是否可以很好地用于 4 个 GPU 中的任何一对之间的通信？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T17:53:56.327

根据[此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#multi-device-system)所述的要求，必须拥有 Tesla 系列 GPU。因此，GPUDirect Peer-to-Peer 并未正式支持 GeForce 设备：

“当应用程序作为 64 位进程在 Windows Vista/7 上以 TCC 模式（请参阅 Windows 的 Tesla Compute Cluster 模式）、Windows XP 或 Linux 上运行时，**Tesla 系列计算能力 2.0 及更高版本的**设备可能寻址彼此的内存（即，在一个设备上执行的内核可以取消引用指向另一个设备内存的指针）。如果 cudaDeviceCanAccessPeer() 为这两个设备返回 true，则在两个设备之间支持这种对等内存访问功能。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T10:40:26.930

根据[NVidia 的 NVIDIA GPUDirect 页面](https://developer.nvidia.com/gpudirect)

> CUDA 驱动程序本机支持 GPUDirect 点对点传输和内存访问。您只需要 CUDA Toolkit v4.0 和 R270 驱动程序（或更高版本）以及在同一 PCIe 总线上具有两个或多个 Fe​​rmi 或 Kepler 架构 GPU 的系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T17:55:29.623

此博客可能会有所帮助... [NVIDIA 硬件比较 – GeForce GTX 690 与 Tesla K10][1]

[http://www.acceleware.com/blog/nvidia-hardware-comparison-%E2%80%93-geforce-gtx-690-vs-tesla-k10](http://www.acceleware.com/blog/nvidia-hardware-comparison-%E2%80%93-geforce-gtx-690-vs-tesla-k10)

# cuda - CUDA 纹理线性过滤

> ID：14112701
> 
> 赞同：3
> 
> 时间：2013-01-01T17:44:18.073
> 
> 标签：cuda, textures

在 CUDA C 编程指南第 5 版的附录 E.2（线性过滤）中，声明：

> 在这种**仅适用于浮点纹理**的过滤模式下，纹理获取返回的值是...

粗体部分让我感到困惑。`floating point`是指仅纹素类型，还是返回类型？例如，我如下声明 3 个纹理。

```
texture<float,cudaTextureType2D> tex32f;
texture<unsigned char, cudaTextureType2D, cudaReadModeNormalizedFloat> tex8u;
texture<unsigned short, cudaTextureType2D, cudaReadModeNormalizedFloat> tex16u; 
```

线性过滤是否`tex32f`仅适用于 或 也适用于`tex8u`and `tex16u`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:06:32.700

这意味着线性过滤仅在纹理的“读取模式”为 时可用`cudaReadModeNormalizedFloat`，即整数类型（例如 u8）提升为 [0.0, 1.0]（对于无符号整数）或 [-1.0] 范围内的浮点值, 1.0]（对于有符号整数）。

# exception - 捕获 boost::异常记录

> ID：14112702
> 
> 赞同：0
> 
> 时间：2013-01-01T17:44:26.320
> 
> 标签：exception, logging, boost

我正在将 Boost 用于一些内部代码。在`main()`，我想在退出程序之前捕获并记录所有 boost::exceptions。

如何捕获 boost::exceptions 并将异常信息作为字符串检索以进行日志记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:27:40.667

我建议你看看[`boost::diagnostic_information`](http://www.boost.org/doc/libs/1_52_0/libs/exception/doc/diagnostic_information.html)。

这是一个给你的例子。它绝不是完整的，需要一些定制才能让它完全按照你的意愿去做。

```
void main()
{
    try
    {
        // Your code that can throw.
    }
    catch (const boost::exception& ex) 
    {
        // Output some debug information.
        std::cerr << boost::diagnostic_information(ex) << std::endl;

        // Here we can choose to perform some graceful-shutdown activities,
        // and/or rethrow the exception, triggering a call to std::terminate().
        throw; // Rethrow.
    }
    catch (const std::exception& ex) 
    {
        // Let's do the same for std::exception just for comparison.
        std::cerr << ex.what() << std::endl;
        throw; // Rethrow.
    }
} 
```

您可能需要自定义的地方：

*   在 main 中重新抛出*将*触发[`std::terminate()`](http://en.cppreference.com/w/cpp/error/terminate). 您可能希望执行一些更优雅地关闭代码的任务。

*   [`std::cerr`](http://en.cppreference.com/w/cpp/io/cerr)可能不是为您发送此类信息的好地方。也许您想将其记录到文件中。或者您可能希望[将 std::cerr 重定向到文件](https://stackoverflow.com/questions/4530751/how-to-redefine-both-cerr-and-clog-to-both-tee-to-a-shared-log-file)。

*   您的代码可能会抛出不是 a[`boost::exception`](http://www.boost.org/doc/libs/1_52_0/libs/exception/doc/boost-exception.html)或 a 的东西[`std::exception`](http://en.cppreference.com/w/cpp/error/exception)。也许你想要一个全部的东西：`catch (...)`

*   请记住，这是 try-catch 块仅在应用程序的主线程上发挥作用。您必须在任何其他可能引发未处理异常的线程的入口点执行类似的操作。

*   这不能替代整个应用程序中正确的异常处理。

# android - 如何在 android 上获取 GPS 修复状态 - 现在（不使用监听器）

> ID：14112703
> 
> 赞同：4
> 
> 时间：2013-01-01T17:44:43.927
> 
> 标签：android, gps

**我现在**想知道GPS 是否已打开并已修复。

我不想听事件 - 只是为了得到答案（如果它是修复的 - 获取位置）。

在所有示例中，人们创建了一个侦听器并等待来自 GPS 的事件。我的电话应该立即返回。

11级以上的都可以，但如果只有14级及以上的东西我可以管理。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T17:46:33.870

> 我不想听事件 - 只是为了得到答案

您可以使用[`getLastKnownLocation()`](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)，但如果返回`null`，则必须等待位置更新。

* * *

要测试 GPS 是否处于活动状态，请使用[`isProviderEnabled()`](http://developer.android.com/reference/android/location/LocationManager.html#isProviderEnabled%28java.lang.String%29)。

您也应该考虑使用[`PASSIVE_PROVIDER`](http://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER)。此报告*任何*位置修复，无论是 GPS、网络等。

# c++ - 向守护进程发送 SIGINT

> ID：14112705
> 
> 赞同：0
> 
> 时间：2013-01-01T17:44:50.317
> 
> 标签：c++, linux, unix, signals, posix

我写了一个 C++ 代码，它自己守护进程..

它有一个用于 SIGINT 信号的信号处理程序

显然，它在 shell 上运行时没有收到信号，因为它是守护进程。

如何发送信号？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:49:53.197

您不能`SIGINT`使用`Ctrl-C`. 您需要做的是使用`ps`命令查找进程 ID (PID) 并用于`kill -INT <pid>`发送信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T17:49:57.173

使用 找到其进程标识符`ps`，然后通过 发送 SIGINT 信号`kill -INT PID`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T17:49:20.177

killall 进程名称 - 信号编号

```
killall helloworld -2 
```

将 SIGINT 发送到 helloworld 进程

# mono - nginx + fastcgi-mono-server 的多个实例 = WebResource.axd 错误

> ID：14112706
> 
> 赞同：1
> 
> 时间：2013-01-01T17:45:03.360
> 
> 标签：mono, nginx, web-farm, webresource.axd, fastcgi-mono-server

我正在运行 nginx，它对上游配置的多个 fastcgi-mono-server4 实例进行负载平衡。

显然，当一个 webresource 链接由不同的 fastcgi-mono-server 处理时，而不是最初生成该链接的那个，它会返回 404 错误。

我已按照 webfarms 的建议设置了持久性机器密钥，但问题仍然存在。

知道有什么问题吗？

如果有什么不同：应用程序是用 F#/WebSharper 编写的，我们禁用了会话状态和表单身份验证。

谢谢

# javascript - PC从睡眠模式唤醒时开始调用js函数

> ID：14112708
> 
> 赞同：1
> 
> 时间：2013-01-01T17:45:07.760
> 
> 标签：javascript, html, xmlhttprequest, dom-events

在我的 aspx 页面中，我使用`xmlhttp.response`更新此页面的一部分。使用 js 函数，此更新每 3 秒发生一次。但是当我的电脑进入睡眠模式时，这个更新不会发生。还行吧。但是当电脑从睡眠模式唤醒时，我需要自动开始更新而不重新加载这个页面。这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:28:16.053

您可以通过比较墙上时间的变化与预期的计时器延迟来检测 JS 时间线中的中断（例如笔记本电脑睡眠、阻止 JS 执行的警报窗口、`debugger`打开调试器的语句）。例如：

```
var SAMPLE_RATE = 3000; // 3 seconds
var lastSample = Date.now();
function sample() {
  if (Date.now() - lastSample >= SAMPLE_RATE * 2) {
    // Code here will only run if the timer is delayed by more 2X the sample rate
    // (e.g. if the laptop sleeps for more than 3-6 seconds)
  }
  lastSample = Date.now();
  setTimeout(sample, SAMPLE_RATE);
}

sample(); 
```

# android - 在 Android 中的现有活动之间切换

> ID：14112709
> 
> 赞同：2
> 
> 时间：2013-01-01T17:45:10.113
> 
> 标签：android, android-intent, android-activity

所以我正在开发这个小游戏，它目前使用 2 个活动：菜单活动和实际游戏活动；Game Activity 由 Menu Activity 启动（没有问题）

然后我可以使用返回键从 Game Activity 切换到 Menu Activity：

```
public void onBackPressed() {
    super.onBackPressed();
} 
```

现在我回到了菜单活动。我创建的游戏活动已停止（我猜）；当我离开游戏活动时，如何返回它（如何重新启动它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:53:32.500

您需要使用[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)中描述的任何方法手动保存游戏状态。

但是，如果您启动菜单活动的新副本：

```
Menu Activity ->
    Game Activity ->
        Menu Activity 
```

您可以返回到 Game Activity 而不是完全重建它。但是当然不能保证游戏Activity不会被垃圾回收器销毁，所以还是需要将游戏的状态保存在`onPause()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T17:52:16.767

假设您将菜单用作一种“暂停”菜单，其中后退按钮暂停游戏，您可以让后退按钮为菜单活动创建新的意图，然后让菜单活动中的后退按钮正常工作。

当然，当你启动菜单活动时，你仍然应该保留游戏数据——因为用户可以从菜单中关闭屏幕——但是当你启动菜单时，系统会固有地将你的游戏活动（和数据）保存在内存中。

```
@Override
public void onBackPressed() {
   Intent intent = new Intent(GameActivity.this, MenuActivity.class);
   startActivity(intent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:53:38.810

重写一个方法只是为了调用 super 是绝对没有意义的。请重新检查覆盖的含义：如果您不覆盖，那么您的子类方法 A 将与超类方法 A 相同。因此，您可以覆盖以在子类中创建不同版本的 A，但不能调用超类方法A，没用。

关于 Activity，在 android 中，你不能希望不在堆栈上的 Activity 会被保留。您可以将其添加到清单中：

```
 <activity name=".GameActivity" 
   ... 
   android:launchMode="singleTop" /> 
```

但即使如此，它也不能保证 android 会在重新启动时清理您的活动并重新创建它。这就是android保存资源的方式。

但更好的方法是从 GameActivity 内部再次调用 (startActivity) MenuActivity。这样，您的旧 GameActivity 仍将位于活动堆栈中。但实际上，总会有一些限制情况，android 会重新创建 GameActivity。例如，如果系统处于内存压力之下。

最好的办法是保持 GameActivity 的状态，这样即使是新实例也将重新置于与旧实例相同的状态。

# objective-c - self.variableName vs. _variableName vs. @sysnthesize variableName

> ID：14112715
> 
> 赞同：8
> 
> 时间：2013-01-01T17:46:30.957
> 
> 标签：objective-c, synthesize

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)

* * *

**注意：**对于那些四处挖掘试图理解这一点的人，我找出了我困惑的根源。在.h中，我有：

```
...
@interface myClass : parentClass {
className *variableName:
}

@property (strong, nonatomic) className  *variableName;
... 
```

这导致 self.variableName 和 _variableName 成为 .m 中的两个不同变量。我需要的是：

```
...
@interface myClass : parentClass {
className *_variableName:
}

@property (strong, nonatomic) className  *variableName;
... 
```

那么，在类'.m中，self.variableName和_variableName是等价的

* * *

在带有 ARC 的全新 Xcode 4.5+ 中，针对 iOS 5.0+ 项目，使用`_variableName`over`self.variableName`与旧式相比是否有明显的优势（运行时效率、速度等） `@synthesize variableName`？

我的理解是 Xcode 4.5+ 将创建一个`_variableName`等效于的默认访问器，`self.variableName`不使用的唯一原因`@synthesize variableName`是避免 iVar 和传入变量之间的混淆，对吗？

对我来说，仅`self.variableName`用于访问 iVar 似乎是最直接和最清楚您正在寻找哪个变量的方法。除了打字`_`vs.之外`self.`，使用 有没有优势`_variableName`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-01T18:33:01.170

> 我的理解是 Xcode 4.5+ 将创建一个等效于 self.variableName 的默认访问器“_variableName”，不使用“@synthesize variableName”的唯一原因是避免 iVar 和传入变量之间的混淆，对吗？

在这种情况下，`_variableName`不是访问器，它是由编译器自动生成并在自动 @synthesized setter 和 getter 中使用的 ivar。一般来说，最好尽可能使用访问器（即`self.variableName`），以便键值观察和绑定等内容适用于该属性。

当您直接访问 ivar 时，它是通过直接内存访问来访问的，就像访问结构中的数据一样。它只是获取拥有 ivar 的对象的指针，偏移内存地址并尝试在该位置读取或写入内存。使用点表示法 ( `self.variableName`) 调用访问器方法来设置或获取该属性，并且可以在此过程中执行许多不同的操作，例如：

1)**锁定**：如果该属性将在多个线程中使用并且是一个`atomic`属性，则运行时会自动进行一些锁定以确保该属性不会被多个线程同时访问。如果您的对象不打算在多个线程上使用，您可以`nonatomic`在属性声明中给出提示，以便合成访问器跳过锁定。

2) **Key-Value Notifications** : 属性调用的默认设置器`-willChangeValueForKey:`and `-didChangeValueForKey:`，当属性改变时发出通知。如果使用绑定，这对于任何正确更新以及任何其他键值观察都是必要的。

3)**自定义访问器行为**：如果您最终编写自己的 setter 和 getter，您在其中实现的任何自定义内容。

从技术上讲，直接访问 ivar 比使用访问器要快，但是在极少数情况下它会产生显着的性能差异，并且可能是过早优化的情况。即使你不觉得你会立即使用上面列出的好处，最好还是使用访问器，这样如果你以后决定需要一些功能，你不必更改每个实例访问该变量（并可能在此过程中创建意外的新错误）。

此外，如果您直接访问 ivars 并最终将您的类重构为类别或子类，它会变得混乱，因为您通常必须将 ivar 声明为`@protected`变量。如果您使用访问器，则不必这样做。

通常，我尝试仅在 、 和属性的访问器中直接访问`init`ivars `dealloc`。许多工程师都遵循这条经验法则，因为有时在访问器中发生的自定义内容可能会在对象`init`'ing 或`dealloc`'ing 时导致意外行为。例如，如果访问器中的任何内容导致您的对象发生某些事情，`retain`甚至`release`形成对它的归零弱引用，那么如果在`dealloc`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T17:56:13.537

在最新的 Xcode`@synthesize`中是可选的。默认情况下，省略`@synthesize`与写入相同

```
@synthesize someName = _someName; 
```

使用的唯一原因`@synthesize`是*重命名*为存储属性值而创建的实例变量，例如

```
@synthesize someName = someSpecialName; 
```

当你`self.variableName`用来访问一个变量时，你会通过一个属性，这是一个为你访问实例变量的简短方法。虽然方法分派非常快，但它可能会为您执行额外的服务，例如同步对变量的访问（这是您在属性声明中指定`atomic`或未指定时的情况）。`nonatomic`在这种情况下，访问`self.variableName`速度会慢一些。如果在一个紧密的循环中完成，这可能会产生影响。这就是为什么您有时希望使用`_variableName`.

# php - 不在下拉菜单中显示选定的选项

> ID：14112719
> 
> 赞同：1
> 
> 时间：2013-01-01T17:47:00.193
> 
> 标签：php, jquery, mysqli

下面我有一段代码，它假设显示 2 个下拉菜单，一个用于建筑，另一个用于房间。发生的情况是，当用户从建筑物下拉菜单中选择建筑物时，使用 ajax/jquery 它将导航到`room.php`页面并列出属于所选建筑物的房间，并在房间下拉菜单中显示房间列表。这工作正常：

```
<script type="text/javascript">

    function getRooms() { 
    var building = jQuery("#buildingsDrop").val(); 
    jQuery('#roomsDrop').empty(); 
    jQuery('#roomsDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
          type: "post", 
          url:  "room.php", 
          data: { building:building }, 
          success: function(response){ 
              jQuery('#roomsDrop').append(response); 
          } 
        }); 

 }

</script>

...

<?php

 $sql = "SELECT DISTINCT Building FROM Room"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbBuilding);

 $buildings = array(); // easier if you don't use generic names for data 

 $buildingHTML = "";  
 $buildingHTML .= '<select name="buildings" id="buildingsDrop" onchange="getRooms();">'.PHP_EOL; 
 $buildingHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $building = $dbBuilding; 
     $buildingHTML .= "<option value='".$building."'>" . $building . "</option>".PHP_EOL;  
  } 

  $buildingHTML .= '</select>'; 

  $roomHTML = "";  
  $roomHTML .= '<select name="rooms" id="roomsDrop">'.PHP_EOL; 
  $roomHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
  $roomHTML .= '</select>'; 

?> 
```

房间.php：

```
$building = isset($_POST['building']) ? $_POST['building'] : '';

$sql = "SELECT Room FROM Room WHERE Building = ?";
$sqlstmt=$mysqli->prepare($sql);
$sqlstmt->bind_param("s",$building);
$sqlstmt->execute();
$sqlstmt->bind_result($dbRoom);

$roomHTML  = "";

while($sqlstmt->fetch()) {
    $roomHTML .= "<option value='".$dbRoom."'>" . $dbRoom . "</option>".PHP_EOL;
}
echo $roomHTML; 
```

我遇到的问题是当用户选择评估时，假设在相关下拉菜单中显示评估的建筑和房间选项。但它并没有选择那些选项，它们保留在“请选择”选项上。为什么会这样，我怎样才能获得显示的选项？

下面是查看源代码：

```
 //Assessment drop down menu:

    <p><strong>Assessments:</strong> <select name="session" id="sessionsDrop">
    <option value="">Please Select</option>
    <option value='71' style='color: green'>AKXMB - 30-11-2012 - 10:00</option>
    </select> </p>   
    </form>

    //Building drop down menu:

    <select name="buildings" id="buildingsDrop" onchange="getRooms();">
    <option value="">Please Select</option>
    <option value='Canalside East'>Canalside East</option>
    <option value='Canalside West'>Canalside West</option>
    </select>

    //Room drop down menu (list of rooms displayed in room.php):

    <select name="rooms" id="roomsDrop">
    <option value="">Please Select</option>
    </select>

    //Retrieve assessment information 
    //(Below is where problem lies where it is not selecting building and room options in drop down menu)
    <script type="text/javascript">

$(document).ready( function(){

                var sessioninfo = [{"SessionId":71,"Building":"Canalside East","Room":"CE01\/04"},{"SessionId":84,"Building":"Canalside East","Room":"CE01\/04"}];

                $('#sessionsDrop').change( function(){

                    var sessionId = $(this).val();

                    if (sessionId !== '') {
                for (var i = 0, l = sessioninfo.length; i < l; i++)
                {
                        if (sessioninfo[i].SessionId == sessionId) { 

                var currentbuilding = $('#currentBuilding').val(sessioninfo[i].Building);
                var editbuilding = $('#BuildingsDrop').val(sessioninfo[i].Building);
                var currentroom = $('#currentRoom').val(sessioninfo[i].Room);
                var editroom = $('#RoomsDrop').val(sessioninfo[i].Room);
                var currentid = $('#currentId').val(sessioninfo[i].SessionId);
                var editid = $('#newId').val(sessioninfo[i].SessionId);

                        break;
                }
               }
             }

                });
            });
</script> 
```

更新：

[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/editroomadmin.php)

*   在应用程序中，从下拉菜单中选择“模块”并提交。

*   它下面应该显示一些功能。在评估下拉菜单中选择任何评估。

*   您可以在“当前评估详细信息”下方看到它在只读文本输入中显示建筑物和房间，以指示评估的当前建筑物和房间是什么。

*   我希望在“新评估室”部分的下拉菜单中选择相同的建筑物和房间。您可以看到在“建筑物”下拉菜单中选择了建筑物，但在“房间”下拉菜单中未选择“房间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:57:27.883

除非这是复制/粘贴错误，否则您`<script></script>`在评估功能/脚本周围缺少标签 -

```
<script type="text/javascript">
$(document).ready( function(){

...
    });
</script> 
```

* * *

**编辑**

你的问题是你`id`的情况是错误的 -

```
 ...
        var editbuilding = $('#BuildingsDrop').val(sessioninfo[i].Building);
        ...
        var editroom = $('#RoomsDrop').val(sessioninfo[i].Room); 
```

改成 -

```
 ...
        var editbuilding = $('#buildingsDrop').val(sessioninfo[i].Building);
        ...
        var editroom = $('#roomsDrop').val(sessioninfo[i].Room); 
```

另请参阅 -[在 DOM 中节点 ID 是否区分大小写？](https://stackoverflow.com/questions/1236856/in-the-dom-are-node-ids-case-sensititve)

**编辑 - 2**只需在填充之前
添加​​，这样您就可以设置选定的。`getRooms()``var editroom``#roomsDrop`

```
var currentbuilding = $('#currentBuilding').val(sessioninfo[i].Building);
var editbuilding = $('#buildingsDrop').val(sessioninfo[i].Building);
var currentroom = $('#currentRoom').val(sessioninfo[i].Room);
getRooms();
var editroom = $('#roomsDrop').val(sessioninfo[i].Room);
var currentid = $('#currentId').val(sessioninfo[i].SessionId);
var editid = $('#newId').val(sessioninfo[i].SessionId); 
```

**编辑 - 3**

默认情况下，`$.ajax`在浏览器中异步运行，所以问题是在你进入之前`success: function(response){}`它`function getRooms()`已经移动到`var editroom = $('#roomsDrop').val(sessioninfo[i].Room);`，并且由于`jQuery('#roomsDrop').append(response);`没有附加选项值，`roomsDrop`所以没有什么可以选择的。这可以通过两种方式解决 -

**(1)**快速修复使用`async: false`

```
<script type="text/javascript">
    function getRooms() { 
    var building = jQuery("#buildingsDrop").val(); 
    jQuery('#roomsDrop').empty(); 
    jQuery('#roomsDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
          type: "post", 
          url:  "room.php", 
          data: { building:building },
          async: false, 
          success: function(response){ 
              jQuery('#roomsDrop').append(response); 
          } 
        }); 
 }
</script> 
```

这使调用同步进行，因此在完成之前`$.ajax`不会继续进行。**请**注意，在等待响应时会冻结浏览器，因此它可能会阻止任何其他操作。`var editroom = $('#roomsDrop').val(sessioninfo[i].Room);``success: function(response){}`**`async: false`**

 ****(2)**使用回调函数——

```
<script type="text/javascript">
    function getRooms(callback) { 
    var building = jQuery("#buildingsDrop").val(); 
    jQuery('#roomsDrop').empty(); 
    jQuery('#roomsDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
          type: "post", 
          url:  "room.php", 
          data: { building:building },
          async: false, 
          success: function(response){ 
              jQuery('#roomsDrop').append(response);
              callback();
          } 
        }); 
 }
</script> 
```

和

```
getRooms(function(){
var editroom = $('#roomsDrop').val(sessioninfo[i].Room);}); 
```

此回调函数将在完成`var editroom = $('#roomsDrop').val(sessioninfo[i].Room);`后执行`getRooms()`，但将继续执行其余的操作，`script`而不用挂起浏览器**

# jquery - 单击表中的按钮时如何查找行索引

> ID：14112721
> 
> 赞同：10
> 
> 时间：2013-01-01T17:47:16.913
> 
> 标签：jquery, html-table

我想找到单击按钮的行。

```
<table>
  <tr>
    <td>foo 1</td>
    <td><input  type="button" value="Remove" id="remove1"/> </td>
  </tr>
  <tr>
    <td>foo 2 </td>
    <td><input  type="button" value="Remove" id="remove2"/> </td>
  </tr>
</table> 
```

我的表结构如上所示。通常我可以使用 buttonid 来获取行索引。但是如果我删除一行（tr），另一个行索引会发生变化。例如：

如果我用 jQuery 删除第一行，第二行索引更改为 0，那么我不能使用按钮的 id。（删除 - 2 ）

好吧，我认为我必须使用父函数，但它不起作用。

```
var elem = $('#remove2');
alert(elem.parent()[0].sectionRowIndex); 
```

我试过这个，但没有用。我需要在行中单击按钮的行索引。

我希望我解释了我的问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-01T17:52:37.730

尝试这个：

```
$("table tr input").on('click', function(e){
   alert($(this).closest('td').parent()[0].sectionRowIndex);
});​ 
```

[小提琴](http://jsfiddle.net/zwHK4/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T17:52:18.187

尝试使用这个：http: [//jsfiddle.net/jd9N4/1/](http://jsfiddle.net/jd9N4/1/)

```
var elem = $('input[type="button"]');
$(elem).click(function() {
   alert($(this).closest('tr').index());
   $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:50:25.223

你不需要`ID`

```
$('table').on('click', 'input[value="Remove"]', function(){
  $(this).closest('tr').remove();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-12T06:19:26.580

如果您要动态添加行，则可以

```
 $(document).on('click', 'button', function () {
     var indexRow = this.parentNode.parentNode.rowIndex;
     document.getElementById("table-name").deleteRow(indexRow);
 }); 
```

# php - 有没有办法将源自 strlen() 之类的字符串长度转换为 PHP 中的像素长度？

> ID：14112722
> 
> 赞同：2
> 
> 时间：2013-01-01T17:47:17.443
> 
> 标签：php, image-manipulation

例如：

```
<?php
$string = 'Foo bar';

$length = strlen($string);

echo '<div style="width: '.$length.'px;">'.$string.'</div>'; 
```

以上显然不起作用，因为 $length 是 7 并且 7px 小于输出文本的大小。

我也明白字体大小和其他因素也会发挥作用。

我正在寻找的是这样的：

```
<div style="width:xxx; float:left;">Label 1</div><input type="checkbox"/><br/>
<div style="width:xxx; float:left; clear:left;">Longer Label 2</div> <input type="checkbox"/><br/>
<div style="width:xxx; float:left; clear:left;">Even Longer Label 3</div> <input type="checkbox"/><br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:54:49.403

如果您知道您将使用的字体，那么您想了解[`imagettfbbox()`](http://php.net/manual/en/function.imagettfbbox.php).

但是，是的，只是不要给出宽度并右对齐文本，或者使用像 Bootstrap 或 960.gs 这样的网格系统布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:03:00.043

此外，如果您将`display`属性值设置为`inline-block`div 元素的行为就像一个块元素，但它的宽度会随着它包含的元素而变化 `display: inline-block`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:57:01.627

我的理解是，您正在尝试将字符串的长度与相应的 . 正如您已经指出的那样，这只有在您考虑字体类型和大小时才有可能。假设你有一个等距字体，你必须将 $length 乘以一个因子。

如果你不使用等距字体，真正混乱的部分就开始了……

# floating-point - 我应该为浮点值使用什么范围？

> ID：14112723
> 
> 赞同：1
> 
> 时间：2013-01-01T17:47:31.900
> 
> 标签：floating-point

我知道浮点值的实现和限制——我已经阅读了你可能要链接到我的论文——但我不知道我应该为浮点值使用什么范围。

我想在一个真实的、有限的范围内表示一个值。从概念上讲，-1 到 1。我可以只使用浮点值 -1 到 1，但是我是否在浪费尾数位？

有[这个问题](https://stackoverflow.com/questions/10907266/when-i-use-floating-point-numbers-do-i-lose-precision-if-i-limit-the-range)，但没有真正的决定性答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:09:28.980

浮点的主要点是点浮动。

这意味着您在 1 附近的相对精度与在 256 附近的相对精度相同。对于绝大多数应用程序，将数字缩放到一个或另一个范围内是没有意义的。

在非常具体、挑剔的情况下，可能有理由进行扩展。

一个是如果您需要巨大的动态范围。如果您的数字在 [-1, +1] 中，那么您最小的非零数字将是 2 ^(-1074)，在 IEEE 754 64 位二进制中。但是，它会降低精度。具有全精度的最小数字将是 2 ^(-1022)。这对于任何正常的事情来说都足够了。如果 1 对应于任何可观测的物理现象（例如，可观测宇宙的质量），那么 2 ^(-1022)低于任何可观测的阈值（大约是 10 ^(-223)电子质量的倍数）。计算任何对物理事物来说很小的东西根本没有意义——它通常只对数学家感兴趣。如果您正在处理一些特殊的数学应用程序，那么也许您可以从将比例从 [-1, +1] 更改为更大的值（例如 [-2 ^(1023) , +2 ^(1023) ]）中获得一些好处。（但给自己留一些算术空间，不要溢出。）

另一种情况是相对误差很重要，浮点精度几乎不能满足您的需求。表示 1.1 左右的数字的相对误差大于表示 0.9 或 1.9 左右的数字的相对误差。这是由于数字以浮点表示的方式，在每个指数范围内都有一个线性（而不是对数）的有效数字。因此，1.1 左右可用的最小增量与 1.9 左右可用的增量相同，但它们是 1.9 的一小部分，而不是 1.1。这在几乎所有的浮点使用中都无关紧要。它往往只出现在有限的情况下，例如必须对错误进行非常仔细的评估以确保质量软件的数学库。

总结：不用担心范围。让你的浮点数浮动。

# image-processing - Imagemagick 中旋转/偏斜后的自适应背景

> ID：14112724
> 
> 赞同：3
> 
> 时间：2013-01-01T17:47:34.897
> 
> 标签：image-processing, imagemagick

在我使用 Imagemagick 旋转或歪斜图像后，角落里有一个白色背景，旋转发生的地方。例子：

```
convert image.png -rotate 10 out.png 
```

输出：http: [//imgur.com/8bZQ6](http://imgur.com/8bZQ6)

有没有办法可以用某种纹理或至少一种与图像融为一体的颜色填充那些白色角落？种植不是一种选择。

我找到了简单旋转的绝佳解决方案：

```
convert image.png -virtual-pixel Edge +distort SRT 10 out.png 
```

输出：http: [//imgur.com/edMS0](http://imgur.com/edMS0)

但不幸的是，它不适用于`-deskew`命令...

那么，有谁知道如何以类似的方式为`-deskew`(and `-rotate`) 命令填充这些角落？关键是要尽可能地掩盖图像旋转的事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:41:39.130

我会继续回答我自己的问题，但我仍然希望有更好的解决方案。

您可以设置`-background`颜色，它适用于旋转和纠偏。

这是使用平均图像颜色的解决方案：

```
convert image.png -background `convert image.png -resize 1x1 txt:- | tail -1 | cut -b 30-50` -rotate 10 out.png 
```

输出：http: [//imgur.com/YCqkC](http://imgur.com/YCqkC)

还有一个更好的解决方案，需要一些边框像素：

```
convert image.png -background `convert image.png -resize 100x1! \( +clone -crop 1x1+0+0 \) +append -crop 2x1+99+0 -resize 1x1 txt:- | tail -1 | cut -b 30-50` -rotate 10 out.png 
```

输出：http: [//imgur.com/4wDPO](http://imgur.com/4wDPO)

有一些 bash 脚本（在反引号内），所以这些解决方案仅适用于 unix。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T21:08:30.617

尝试这个：

```
convert image.png -background transparent -rotate 10 out.png 
```

# javascript - Javascript 并不总是在 Chrome 扩展程序中运行，我应该什么时候运行它？

> ID：14112730
> 
> 赞同：4
> 
> 时间：2013-01-01T17:48:26.200
> 
> 标签：javascript, google-chrome, google-chrome-extension, content-script

我有一个 Chrome 扩展程序，它将 CSS 和 Javascript 都注入到页面中，虽然 CSS 总是被注入，但 Javascript 有时只能工作，有时不能工作。通过不工作，我假设它在它必须处理的东西存在之前运行。

Javascript 只是简单地将 a 移到`div`另一个 using 之上，`insertBefore`但这并不总是发生，我认为这是因为它在加载时。

我的清单目前是：

```
{
  ...
  "content_scripts": [{
    "matches": [ "*://example.com/*" ],
     "js": [
        "js/jquery-1.8.3.min.js", "js/myjavascript.js"
      ],
      "run_at": "document_end",
      "css": [
        "css/mycss.css"
      ]
  }]
} 
```

我已经`run_at`设置为`document_end`目前，因为它似乎运行得更顺畅（当它确实工作时），所以我认为这就是需要改变的地方。

如果有人有任何建议，他们将不胜感激。

**编辑：**关于这个问题的答案的后续问题被添加[在这里](https://stackoverflow.com/questions/14227689/waitforkeyelements-stop-a-script-firing-on-a-popup-in-chrome-extension)，我觉得如果我将它添加到这个问题中可能对其他人有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T22:50:26.417

如果代码并非始终有效，则表明元素正在由页面的 javascript 创建/加载。因此，您需要使用标准的 AJAX 感知技术来移动该 div。

这些技术是：计时器、突变观察者、突变事件和拦截 AJAX XHR（如果适用）。这些都在其他 Stack Overflow 问题中讨论过，但是： 突变事件已被弃用/错误；拦截 XHR 变得混乱，可能不适用于这里；突变观察者可能会变得复杂。

我建议下载[waitForKeyElements() 实用程序](https://gist.github.com/2625891)并将其添加到您的清单中。

那么移动的代码就`<div>`变成了：

```
waitForKeyElements (
    "jQuery selector for div(s) you want to move",
    moveSelectDivs
);
function moveSelectDivs (jNode) {
    jNode.insertBefore ("APPROPRIATE JQUERY SELECTOR");
} 
```

保持您的清单设置为[在`document_end`](http://developer.chrome.com/extensions/content_scripts.html#run_at). 这相当于`DOMContentLoaded`-- 即`$(document).ready()`发生火灾时。默认`run_at`触发太晚且时间不可预测。`run_at` `document_start`不会有任何好处，因为：计时器、突变观察者等在`DOMContentLoaded`事件发生之前都不会触发——无论如何，对于当前版本的 Chrome（其他浏览器没有相同的限制）。

* * *

* * *

# 替代方法，用于最快的操作但较慢的网页：

关于：

> （页面正在加载，然后您可以看到 div 移动），这是我希望避免的。

`DOMContentLoaded`在 Chrome 中工作之前，只有两种方法可以做任何事情：

1.  您可以设置`mycss.css`隐藏 div 直到您移动它。从性能角度来看，这可能是最具成本效益的方法。
2.  或者，您可以覆盖`document.createElement()`. 这将尽可能快地响应新元素（假设它是在之前创建的`DOMContentLoaded`），但它可能会显着降低整个页面的速度。

将内容脚本设置为在 运行`document_start`，并且必须注入覆盖代码。所以，脚本看起来像：

```
addJS_Node (null, null, scriptMain);

function scriptMain () {
    var _orig_createElement = document.createElement;

    document.createElement  = function (tag) {
        var element = _orig_createElement.call (document, tag);

        var movingNode      = document.querySelector ("MOVING DIV SELECTOR");
        if (movingNode) {
            var target      = document.querySelector ("TARGET DIV SELECTOR");
            if (target) {
                target.parentNode.insertBefore (movingNode, target);

                document.createElement = _orig_createElement;
            }
        }

        return element;
    };
}

function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

不要尝试为此使用 jQuery。

# r - 如何计算具有共同列名的不同数据框之间的差异

> ID：14112739
> 
> 赞同：4
> 
> 时间：2013-01-01T17:49:51.270
> 
> 标签：r

我有三个数据帧，并试图计算由数据帧 1 调节的两个数据帧（Df2 和 Df3）之间的差异。如下面的示例中所解释的，我有三个数据帧，Df1、Df2 和 Df3，它们具有通用名称。第一步，在 Df1 中，我想将“标准”列的值与所有三列“Das”、“Dss”和“Tri”进行比较，可能是逐行以及这些列的任何值，“Das”， “Dss”和“Tri”高于 Df1 中的“Standard”，计算 Df2 和 Df3 中相同位置的差异，并将差异放在单独的列中。

```
Df1             
    Names   Standard    Das Dss Tri
    Aa  3   3   6   2
    Ab  4   6   4   3
    Ac  2   5   2   4
    Ad  4   3   3   8
    Ae  6   4   5   7
    Af  4   5   7   5
    Ag  2   6   8   2
    Ah  9   7   6   2

Df2         
    Names   Das Dss Tri
    Aa  4   2   5
    Ab  7   5   4
    Ac  5   7   2
    Ad  6   4   3
    Ae  5   3   5
    Af  3   2   6
    Ag  2   5   4
    Ah  4   6   3 
```

Df3

```
Names   Das Dss Tri
    Aa  5   3   5
    Ab  8   5   4
    Ac  6   7   2
    Ad  6   4   7
    Ae  5   3   8
    Af  4   5   6
    Ag  1   5   4
    Ah  4   6   3 
```

最终输出

```
Df3             
    Names   Das Dss Tri Difference
    Aa  5   3   5   -1
    Ab  8   5   4   -1
    Ac  6   7   2   -1
    Ad  6   4   7   -4
    Ae  5   3   8   -3
    Af  4   5   6   -4
    Ag  1   5   4   1
    Ah  4   6   3   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:34:35.100

`first biggest`这是如果找到超过 1 个值并且没有找到值，`NA`则返回值的索引的脚本。

```
df1 <- structure(list(standard = c(3, 4, 2, 4, 6, 4, 2, 9), das = c(3, 
6, 5, 3, 4, 5, 6, 7), dss = c(6, 4, 2, 3, 5, 7, 8, 6), tri = c(2, 
3, 4, 8, 7, 5, 2, 2)), .Names = c("standard", "das", "dss", "tri"
), row.names = c(NA, -8L), class = "data.frame")

df2 <- structure(list(das = c(4, 7, 5, 6, 5, 3, 2, 4), dss = c(2, 
5, 7, 4, 3, 2, 5, 6), tri = c(5,4,2,3,5,6,4,3)), .Names = c("das", "dss", "tri"
), row.names = c(NA, -8L), class = "data.frame")

df3 <- structure(list(das = c(5, 8, 6, 6, 5, 4, 1, 4), dss = c(3, 
     5, 7, 4, 3, 5, 5, 6), tri = c(5,4,2,7,8,6,4,3)), .Names = c("das", "dss", "tri"
 ), row.names = c(NA, -8L), class = "data.frame")

# get indices. run through every row of df1
# and get the maximum column index > standard
idx.v <- sapply( 1:nrow(df1), function(idx) {
    t <- which(df1[idx, 2:4] > df1[idx, 1])
})

df3$result <- sapply(1:length(idx.v), function(ix) {
    col.idx <- idx.v[[ix]]
    len.idx <- length(col.idx)
    if (len.idx > 0) {
        res <- sum(df2[ix, col.idx] - df3[ix, col.idx])
    } else {
        res <- NA
    }
})

Output:

> df3
  das dss tri result
1   5   3   5     -1
2   8   5   4     -1
3   6   7   2     -1
4   6   4   7     -4
5   5   3   8     -3
6   4   5   6     -4
7   1   5   4      1
8   4   6   3     NA 
```

感谢您的聊天。这就是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:51:24.307

我认为这是正确的结果，但请注意第七个值不同。使用三列的最大值（更简单的任务）会产生在更多插槽中不同的结果。

```
df1.w <- sapply( seq(1, nrow(df1)), 
                 function(idx) min(c(Inf, which(df1[-(1:2)][idx,] > df1[idx, 2])))
                )

df1.mat <- matrix(c(seq(1, nrow(df1)), df1.w), ncol=2)
df1.mat[is.infinite(df1.mat)] <- 1

ifelse(is.infinite(df1.w), 0, 
       df2[-1][df1.mat] - df3[-1][df1.mat]
       )

## [1] -1 -1 -1 -4 -3 -1  1  0 
```

如果您确实想使用 df1[-(1:2)] 中最大值的索引，请将`df1.w`（`sapply`调用）的定义替换为：

```
df1.w <- apply(df1[-(1:2)], 1, which.max) 
```

然后使用上面的其余代码给出以下结果：

```
## [1] -1 -1 -1 -4 -3 -3  0  0 
```

# jquery - Jquery when.apply().done 等待一个ajax调用，而不是另一个？

> ID：14112743
> 
> 赞同：0
> 
> 时间：2013-01-01T17:50:02.400
> 
> 标签：jquery

我有一个 .each 函数，其中每个“每个”都有一个 ajax 调用。在继续进行另一个 ajax 调用之前，我需要等待它们全部完成。我正在使用[此处](https://stackoverflow.com/questions/9044468/wait-for-each-to-finish-given-each-has-ajax-calls)找到的解决方案。疯狂的是，一旦我在 end 函数中更改了 Ajax 调用的 url，它就停止了工作；该函数不会等待所有 ajax 调用完成。

```
var iarr=[];

$.getJSON("http://dbpedia.org/sparql?default-graph-uri=blablbla-get several-links", {},

function (data) { //links returned through json
var def = [];
$.each(data.results.bindings, function () {
    var tlink = this.link.value;
    def.push(getmeta(tlink)); //get the meta values for each link
});
$.when.apply($, def).done(postmetas());
}); 
```

getmeta 函数如下所示：

```
function getmeta(lnk){
var dfd=$.Deferred();
$.ajax({
       url: "meta.php",
       type: "POST",
       data: {url: lnk},
       dataType: "json",
       async: true,
       success: function (r) {
       if (r !==null){
       iarr.push({
                    "title": r.title,
                    "desc": r.desc,
                    "url": r.url
                     });
                     dfd.resolve();
                }
                }
     });
return dfd.promise();
} 
```

最后是 postmetas 函数，在所有 getmeta 完成之前不应调用该函数：

```
 function postmetas(){
   $.ajax({ //
            url: "meta.php",
            type: "POST",
            data: {url: wik},
            dataType: "json",
            success: function (r) {
                iarr.push({
                          "title": r.title,
                          "desc": r.desc,
                          "url": r.url
                          });
         console.log(iarr);
                }
    });

      }
} 
```

这很好用，在完成所有 ajax 调用之后，日志会为我提供 iarr 数组中的所有值。

事情是这样的：当我将 postmetas 函数更改为以下内容时，整个事情都停止了工作，并且在所有“getmeta”完成之前调用了 postmetas。谁能弄清楚为什么？

```
function postmetas() {
$.ajax({
    url: "http://dbpedia.org/sparql?default-graph-uri=blabla-some-text",
    dataType: "json",
    success: function (r) {
        var descr = r.results.bindings[0].abstract.value;
        var subtitle = descr.substr(0, descr.indexOf('. '));
        iarr.push({
            "title": wtitle, //wtitle is a variable we established before
            "desc": subtitle,
            "url": wurl  //wurl is a variable we established before
        });
        console.log(iarr);
    }
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:56:03.833

在两个 ajax 调用中尝试 async: false

# php - 星号 phpagi 返回忙

> ID：14112746
> 
> 赞同：1
> 
> 时间：2013-01-01T17:50:34.250
> 
> 标签：php, asterisk, agi

现在，我的脚本不接听电话，但在他们结束时，它重试了 3 次，所以我的星号服务器被击中 3 次。我怎样才能回复忙音而不是不接听电话？或任何其他方式来防止他们的客户端每次呼叫我的服务器 3 次我没有我的 agi 脚本接听电话？

这是我的脚本的一部分

```
 require_once('phpagi.php');

  $agi = new AGI();
  //$agi->answer();

stuff here

$agi->hangup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:10:25.077

有 2 种变体：

1)

`$agi->exec("Busy","");`

2) 挂断前回答（如果之前没有帮助）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:25:17.863

好的。为此，您不需要 AGI。您可以使用“GosubIf”来测试呼叫是否与您的烦恼呼叫者具有相同的呼叫者 ID。然后，使用以下代码：

```
[no_one_home_but_us_chickens]
exten => s,1,Answer ; can't Playtones unless we answer first
 same => n,Playtones(busy) ; send the audio sequence that humans understand means "busy"
 same => n,Busy(10) ; signal the other end that the line is busy.
 same => n,Hangup()
 same => n,Return() 
```

... 简单得多，可以完成您的工作。有关详细信息，请参阅：[http ://www.voip-info.org/wiki/view/Asterisk+cmd+Busy](http://www.voip-info.org/wiki/view/Asterisk+cmd+Busy)

# c# - 用户键入时无法设置组合选定索引

> ID：14112749
> 
> 赞同：0
> 
> 时间：2013-01-01T17:50:59.107
> 
> 标签：c#, winforms, combobox, selectedindex

我有一个带有数据绑定组合框的表单，dropstyle 设置为下拉列表，因此用户可以在组合框中键入。

我的问题是，当用户在组合框中键入并且键入的值与绑定到组合框的值之一匹配时，即使我也尝试过，它也不会更改 selectedindex。相反，它将选定的索引设置为 -1（因此选定的值为空）。

任何人都可以帮忙吗？这是我的代码（我的尝试之一，我尝试了其他方法但没有帮助）。

```
private void setCombo()
{
        comboFromOther.DisplayMember = "tbl10_KupaID";
        comboFromOther.ValueMember = "tbl10_KupaID";
        comboFromOther.DataSource = dsKupotGemel.Tables[0];
}

private void comboToOther_TextChanged(object sender, EventArgs e)
{
        comboDetail = changedComboText(2, comboToOther.Text);
        textToOther.Text = comboDetail[0];
        if (comboDetail[0] == "")
        {

        }
        else
        {
            comboToOther.SelectedIndex = System.Int32.Parse(comboDetail[1]);
            comboToOther.SelectedValue = System.Int32.Parse(comboDetail[2]);
        } 
    }

    private string[] changedComboText(int iComboType, string comboString)
    {
        if (groupCalculate.Visible == true)
        {
            groupCalculate.Visible = false;
        }
        string[] kupaDetail = new string[3];
        kupaDetail[0] = "";
        kupaDetail[1] = "";
        kupaDetail[2] = "";
        for (int i = 0; i <= dsKupotGemel.Tables[0].Rows.Count - 1; i++)
        {
           if (comboString == dsKupotGemel.Tables[0].Rows[i][0].ToString())
           {
                 kupaDetail[0] = dsKupotGemel.Tables[0].Rows[i][1].ToString();
                 kupaDetail[1] = i.ToString();
                 kupaDetail[2] = comboString;
                 break;
           }
           else
           {

           }
        }
   return kupaDetail;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:13:29.780

也许您的代码中有错误？

这是一个工作示例：

```
// Fields
private const string NameColumn = "Name";
private const string IdColumn = "ID";

private DataTable table; 
```

接下来，初始化

```
// Data source
table = new DataTable("SomeTable");
table.Columns.Add(NameColumn, typeof(string));
table.Columns.Add(IdColumn, typeof(int));

table.Rows.Add("First", 1);
table.Rows.Add("Second", 2);
table.Rows.Add("Third", 3);
table.Rows.Add("Last", 4);

// Combo box:
this.comboBox1.DisplayMember = NameColumn;
this.comboBox1.ValueMember = IdColumn;
this.comboBox1.DataSource = table;
this.comboBox1.DropDownStyle = ComboBoxStyle.DropDown;
this.comboBox1.TextChanged += comboBox1_TextChanged;
this.comboBox1.SelectedIndexChanged += this.comboBox1_SelectedIndexChanged; 
```

事件处理程序 - TextChanged：

```
private void comboBox1_TextChanged(object sender, EventArgs e)
{
    for (int i = 0; i < table.Rows.Count; i++)
    {
        if (table.Rows[i][NameColumn].ToString() == this.comboBox1.Text)
        {
            this.comboBox1.SelectedValue = table.Rows[i][IdColumn];
            break;
        }
    }
} 
```

事件处理程序 - SelectedIndexChanged：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    // Do here what is required
} 
```

使用此代码，只要用户在组合框中键入项目的全名，就会通过 TextChanged 调用 SelectedIndexChanged。

还有诸如[AutoCompleteMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletemode.aspx)、[AutoCompleteSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.autocompletesource.aspx)之类的东西。不知道它们适合您的应用程序的位置。

# java - FakeApplication 使用特定的 application.conf？

> ID：14112753
> 
> 赞同：2
> 
> 时间：2013-01-01T17:51:34.100
> 
> 标签：java, playframework-2.0

如何`FakeApplication`使用 my`dev.conf`而不是 default创建一个来运行我的测试`application.conf`？

我当前的测试由以下结构组成：

```
Map<String, String> map = new HashMap<>();
map.put("config.file", "/path/to/dev.conf");
FakeApplication fakeApplication = fakeApplication(map);
TestServer testServer = testServer(3333, fakeApplication);
// testServer.start();
running(testServer, HTMLUNIT, new F.Callback<TestBrowser>() {
    public void invoke(TestBrowser browser) {
        //do something
    }
}); 
```

此代码改编自[Play Framework Documentation 关于编写测试](http://www.playframework.org/documentation/2.0.4/JavaFunctionalTest)会引发以下异常，因为默认值`application.conf`在我的开发系统上不起作用。如果我取消注释`testServer.start();`，我可以更清楚地看到它。

```
[WARN] [01/01/2013 18:36:59.505] [pool-4-thread-3] [Dispatchers] Dispatcher [akka.actor.promises-dispatcher] not configured, using default-dispatcher
[WARN] [01/01/2013 18:36:59.521] [play-akka.actor.default-dispatcher-2] [Dispatchers] Dispatcher [akka.actor.actions-dispatcher] not configured, using default-dispatcher
[error] Test test.ApplicationTest.runInBrowser failed: Server is not started!
[error]     at scala.sys.package$.error(package.scala:27)
[error]     at play.api.test.TestServer.stop(Selenium.scala:117)
[error]     at play.test.Helpers.stop(Helpers.java:325)
[error]     at play.test.Helpers.running(Helpers.java:355)
[error]     at test.ApplicationTest.runInBrowser(ApplicationTest.java:74)
[error]     ... 
```

我假设这条线

```
map.put("config.file", "/path/to/dev.conf"); 
```

是错误的，必须适应。但是怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T04:18:31.093

用这种方式替换主配置是不可能的。您只能通过将地图传递给`fakeApplication`.

即，如果您的配置包含：

```
mongodb.default.uri = ...
logger.root = ERROR 
```

您可以通过在地图中放置新值来覆盖它：

```
Map<String, String> map = new HashMap<>();
map.put("mongodb.default.uri", "...");
map.put("logger.root", "INFO");

FakeApplication fakeApplication = fakeApplication(map); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T20:02:45.690

我认为您可能希望按如下方式运行您的测试命令：

`play -Dconfig.file=path/to/dev.conf test`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T10:20:00.467

您可能还想查看此选项：

[http://alexgaribay.com/2015/02/05/overwrite-settings-for-testing-in-play-framework/](http://alexgaribay.com/2015/02/05/overwrite-settings-for-testing-in-play-framework/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T22:25:47.550

我有同样的问题，我做了这样的事情来解决它：

```
 private Configuration additionalConfigurations;

  @Before
  public void initialize() {
    ClassLoader cl = ClassLoader.getSystemClassLoader();
    Config additionalConfig  =ConfigFactory.parseFile(newFile(cl.getResource("application.dev.conf").getF)));
    additionalConfigurations = new Configuration(additionalConfig);
  }
  @Test
  public void testPropertiesGetLoaded() throws Exception{

    running(testServer(3333, fakeApplication(additionalConfigurations.asMap())), HTMLUNIT, new F.Callback<TestBrowser>(){
      public void invoke(TestBrowser browser) throws InterruptedException {

        String specificProperty = Play.application().configuration().getString("db.ro.url");
        Logger.info("printingVar:" + specificProperty);

      }
    });
  } 
```

其中 application.dev.conf 可以是您要在其中设置的任何配置文件。

# opengl-es - OpenGLES2.0 GL_POINT_SMOOTH

> ID：14112757
> 
> 赞同：0
> 
> 时间：2013-01-01T17:52:11.720
> 
> 标签：opengl-es

我在片段着色器中使用此代码来圆化 GL 点的边缘

```
precision mediump float;
varying vec4 fragColor;

void main() {

    gl_FragColor = fragColor;

    if(length(gl_PointCoord-vec2(0.5)) > 0.5)
    discard;

} 
```

问题是，舍入应用于上下文中绘制的每种类型的图元，包括三角形条带。有没有办法添加一个 if 语句来限制舍入到只有 GL_POINTS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:58:25.967

我认为您应该为其他原语使用新的着色器。

两个小评论：

*   您是否考虑过使用小纹理（包含一个圆圈）而不是进行这样的计算？它可能会快一点，但显然取决于细节。
*   还要尽量避免使用discard关键字。它可能会对性能产生负面影响。例如，您可以将当前丢弃的那些片段的 alpha 值设置为 0。

# php - 表单过程中的状态报告

> ID：14112760
> 
> 赞同：0
> 
> 时间：2013-01-01T17:52:17.733
> 
> 标签：php, xml, forms, post, import

我创建了一个从 xml 文件导入 wordpress 帖子的小脚本：

```
if(isset($_POST['wiki_import_posted'])) {

    // Get uploaded file
    $file = file_get_contents($_FILES['xml']['tmp_name']);
    $file = str_replace('&', '&', $file);

    // Get and parse XML
    $data = new SimpleXMLElement( $file , LIBXML_NOCDATA);

    foreach($data->RECORD as $key => $item) {

        // Build post array
        $post = array(
            'post_title' => $item->title,
            ........
        );

        // Insert new post
        $id = wp_insert_post( $post );
    }
} 
```

问题是我的 xml 文件非常大，当我提交表单时，浏览器只会挂起几分钟。

是否可以在导入期间显示一些消息，例如在导入每个项目后显示一个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:23:14.163

不幸的是，不，不容易。特别是如果你在 WP 框架之上构建它，你会发现它根本不值得你花时间。当您与 PHP 脚本交互时，您正在发送请求并等待响应。无论 PHP 脚本完成处理并开始发送输出需要多长时间，客户端通常需要多长时间才能开始看到响应。

如果您希望输出尽快开始显示（*即，一旦到达第一个 echo 或 output 语句*），则需要考虑一些事项。

1.  关闭[输出缓冲](http://php.net/manual/en/outcontrol.configuration.php#ini.output-buffering)，以便输出立即开始发送。
2.  在循环中输出任何你想要的东西，这些东西会告诉你你想知道的进度。

请注意，如果您使用 AJAX 请求执行此操作，则内​​容可能无法立即通过您的 XMLHttpRequest 对象传输到 DOM。另请注意，某些浏览器会在内容准备好供用户显示之前进行自己的缓冲（*例如 IE*）。

但是，您可能需要考虑一些建议以加快脚本速度：

*   你为什么在一个大文件上做 str_replace('&','&',$file) ？你意识到这有代价却没有好处，对吧？您什么都没完成，如果您的意思是要替换 HTML 实体`&amp;`，那么您的某些逻辑可能非常错误。编码是您想让 XML 解析器处理的事情。
*   如果您要传输大量文件，您可以使用[curl_multi而不是 file_get_contents 来同时执行多个 HTTP 请求以节省时间。](http://php.net/manual/en/function.curl-multi-exec.php)它会更快，因为它是**非阻塞 I/O**。
*   您应该使用 DOMDocument 而不是 SimpleXML，并且 DOMXPath 查询可以让您的数组比您当前正在做的要快得多。它是一个比 SimpleXML 更好的界面，我总是将它推荐在 SimpleXML 之上，因为在大多数情况下，**SimpleXML 让事情变得难以置信地难以做到**，而且没有充分的理由。*不要让这个名字欺骗你。*

# c - 创建文件并分配权限

> ID：14112765
> 
> 赞同：1
> 
> 时间：2013-01-01T17:53:02.633
> 
> 标签：c, posix, file-permissions

似乎无论我作为 PERMS 创建的文件都具有相同的权限 - rwx rx rx

我尝试了 755 和 777 并且权限保持不变。

```
#include<stdio.h>
#include<stdlib.h>
#include<fcntl.h>
#include<unistd.h>
#include<sys/stat.h>
#define PERMS 0777

int main(int argc, char *argv[])
{
    int createDescriptor;
    char fileName[15]="Filename.txt";

    if ((createDescriptor = creat(fileName, PERMS )) == -1)
    {
        printf("Error creating %s", fileName);
        exit(EXIT_FAILURE);
    }

    if((close(createDescriptor))==-1)
    {
        write(2, "Error closing file.\n", 19);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T17:56:24.387

我认为您可能需要在调用之前更改 umask `creat`：

```
umask(0000); 
```

见`man 2 umask`。默认的 umask 通常是 0022，这将使 0777 和 0755 之间的差异消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:01:06.203

试试`chmod`功能。有关更多详细信息，只需右键单击`IDE`并键入`chmod`。

**姓名**：

`chmod`- 改变文件的模式

**概要：**

```
 #include <sys/stat.h>
 int chmod(const char *path, mode_t mode); 
```

**描述**：

**chmod()**函数应将`S_ISUID, S_ISGID, [XSI] S_ISVTX,` path 参数指向的路径名命名的文件的文件权限位更改为 mode 参数中的相应位。应用程序应确保进程的有效用户 ID 与文件的所有者匹配，或者进程具有适当的权限以执行此操作。

`S_ISUID, S_ISGID, [XSI] S_ISVTX,` 并且文件权限位在`<sys/stat.h>.`

如果调用进程没有适当的权限，并且文件的组 ID 与有效组 ID 或补充组 ID 之一不匹配，并且如果文件是常规文件，则 bit `S_ISGID`(set-group-ID on execution ) 在从 chmod() 成功返回后将被清除。

其他实现定义的限制可能会导致`S_ISUID and S_ISGID`模式中的位被忽略。

在调用 chmod() 时打开的文件对文件描述符的影响是实现定义的。

成功完成后，chmod() 将标记更新文件的 st_ctime 字段。

**返回值**：

成功完成后，`0`一律退回；否则，`-1`应返回并设置 errno 以指示错误。如果`-1`返回，则不会更改文件模式。可以在[此](http://pubs.opengroup.org/onlinepubs/009695399/functions/chmod.html)链接中找到更多信息。

# java - 套接字 API SocketImpl

> ID：14112772
> 
> 赞同：1
> 
> 时间：2013-01-01T17:53:49.590
> 
> 标签：java, sockets, documentation, javadoc

根据 Socket 的 Java 文档，套接字有一个名为 SocketImpl 的类的实例。

但是，如果您查看该类，它会清楚地表明 SocketImpl 是一个抽象类。

据我所知，您不能拥有抽象类的实例！谁能告诉我这里发生了什么？

链接：[Socket Java 文档](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)

来自 Docs 的引用：

> 套接字的实际工作由 SocketImpl 类的实例执行。

链接到 SocketImpl 类：[SocketImpl](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/SocketImpl.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:59:02.633

实际的具体对象是一个扩展类的实例`SocketImpl`：

```
public class ConcreteSocketImpl extends SocketImpl {
    ... (implement all the abstract methods from SocketImpl)
} 
```

并且由于继承定义了*一种*关系，因此 ConcreteSocketImpl 的任何实例*都是*SocketImpl。

这是面向对象的基本原则。如果你不能拥有任何抽象类的实例，那么抽象类和接口将毫无意义，而且完全没有用处。

# iphone - 如何制作像 Apple Pages 应用程序一样的选择按钮

> ID：14112773
> 
> 赞同：0
> 
> 时间：2013-01-01T17:54:00.480
> 
> 标签：iphone, ios, cocoa-touch

我可以在 Apple Pages 应用程序中选择多种字体样式，屏幕上的橙色框。

怎么做？

我在 iOS SDK 中找不到任何这样的 ui 组件，多选。`UISegmentControl`仅适用于单选按钮之类的选择。

![在此处输入图像描述](../Images/cdd0b7ffe53a6c629500429a9c900e16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:15:58.887

在瞬时模式下使用 UISegmentControl 来获得条形图 :)

为单元格设置自定义背景图像

没有库存控制，但使用这种方法是非常基本的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:35:27.150

为此，您需要使用 UISegment Control 并自定义背景图像。您还可以设置每个段的宽度。

然后你就会实现你的目标。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:10:55.557

没有默认的东西可用，你必须自己做。您为每个按钮设置标签，并且只设置一个选择器。通过检查选定的按钮标签执行您的特定代码。

# php - 使用标记化的 PHP 编写的可靠 Markdown 解析器

> ID：14112776
> 
> 赞同：2
> 
> 时间：2013-01-01T17:54:10.540
> 
> 标签：php, parsing, markdown

是否有使用标记化而不是依赖正则表达式匹配的 Markdown 解析器？

从[Markdown 语法](http://daringfireball.net/projects/markdown/syntax)来看，它似乎很容易实现，所以我想写一个，但我想知道是否有人已经这样做了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:08:10.307

您可以尝试看看[Pandoc](http://johnmacfarlane.net/pandoc/)。

它是用 Haskell 编写的，但它构建了一个 AST（[不使用正则表达式](http://johnmacfarlane.net/pandoc/scripting.html#a-simple-example)）。

有关更深入的描述，请参阅[“使用 Pandoc 编写脚本” 。](http://johnmacfarlane.net/pandoc/scripting.html)

# php - 使用 $this->var 或 $data['var'] 访问我的 View 对象中的数据

> ID：14112777
> 
> 赞同：0
> 
> 时间：2013-01-01T17:54:11.627
> 
> 标签：php, model-view-controller

嘿，`View`在我加载视图文件后在我的课堂上，我`render()`应该访问我的数据，例如：

```
$this->model; 
```

或喜欢：

```
$this->data['model']; 
```

或在我包含视图文件之前的 render() 方法中具有以下内容：

```
$model = $this->data['model'];

// and then in my view file I can access the data by just calling it locally
$model->getSomething(); 
```

从我的视图文件中？

这三种方式都有效，但我开始认为`$this->data['model'];`是从视图文件中访问数据的正确方式。

哪个是正确的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:22:34.390

在正确实现的 MVC 中，**视图不是哑模板**。它是一个类的实例，能够从模型层请求数据。而且模型不是类或实例。它是一个层（MVC 由两层组成：表示层和模型层）。

MVC 设计模式中的视图负责所有的 UI 逻辑。这意味着他们（如有必要）从多个模板创建响应。在其他情况下，唯一的响应可能是 HTTP 位置标头。

基本上，当您的视图实例需要某些东西时，它会执行以下操作：

```
$library = $this->serviceFactory('Library');
$details = $library->getCurrentBookDetails();

$someTemplate->assign('title', $details['title']);
$someTemplate->assign('content', $details['content']); 
```

在这种情况下，服务工厂在当前视图和控制器之间共享，并确保仅实例化单个`Library`服务实例。从而为两个实例提供与模型层的相同状态交互的能力。

# c - fwrite 仅写入第一个元素并删除所有以下元素

> ID：14112778
> 
> 赞同：0
> 
> 时间：2013-01-01T17:54:28.357
> 
> 标签：c, arrays, file, fwrite, calloc

这是我在这个网站上的第一个问题。

我一直在为我的大学作业制作一个 C 程序。游戏而已。我使用 calloc 为结构数组动态分配内存。然后我从一个文件中读取（它已经具有由 fwrite 写入的相同结构）并将信息存储在我从 calloc 创建的这些结构中。然后我处理信息并写回文件。我面临的问题是，当我使用“wb”覆盖同一个文件并使用 fwrite 写回处理过的结构时，它只写入数组的第一个结构，而其他结构则不会被写入并从内存中丢失。我敢肯定，在使用 fwrite 之前，内存中的所有信息都是完整的。所以，我在处理过程中没有做错任何事情。但是 fwrite 只写第一个结构。任何帮助将不胜感激。这是代码的一部分：

```
high = (struct scores *) calloc(HIGHSCOREENTERIES + 1, sizeof(struct scores));
junk = high + (HIGHSCOREENTERIES * sizeof(struct scores));

if((scorefile = fopen(HIGHSCORESFILE, "rb")) != 0)
{
    temp_high = high;
    printf("\n\nStoring in : %p", temp_high);
    fread(temp_high, sizeof(struct scores), 3, scorefile);

    if (temp_high -> score > 0)
    {
        printf("\n\nHigh Scores : ");

        for(i = 0; i < HIGHSCOREENTERIES; i++)
        {
            temp_high = high + (i * sizeof(struct scores));

            if (temp_high -> score > 0)
                printf("\n\n%d. %s had a score of %d.", i + 1, temp_high -> name, temp_high -> score);
        }
    }
    fclose(scorefile);
}

if (!custom && player.score > 0 && strcmp(player.name, "Cheater") != 0)
{
    temp_high = high;

    for (i = (HIGHSCOREENTERIES - 1); i >= 0; i--)
    {
        temp_high = high + (i * sizeof(struct scores));
        printf("\n\nAddress is : %p", temp_high);

        if (player.score > temp_high -> score)
        {
            printf("\n\nMoving old information to : %p", (temp_high + sizeof(struct scores)));
            (temp_high + sizeof(struct scores)) -> score = temp_high -> score;
            strcpy((temp_high + sizeof(struct scores)) -> name, temp_high -> name);

            junk -> score = temp_high -> score;
            strcpy(junk -> name, temp_high -> name);

            printf("\n\nMoving player's score to to : %p", temp_high);
            temp_high -> score = player.score;
            strcpy(temp_high -> name, player.name);
        }
    }

    if (junk -> score != 0)
        printf("\n\n*Congrats! You beat %s's score of %d.*", junk -> name, junk -> score);

    else
        printf("\n\nCongrats! Your name is now in the highscores list!");

    temp_high = high;

    /*For debugging
     for(i = 0; i < HIGHSCOREENTERIES; i++)
     {
     temp_high = high + (i * sizeof(struct scores));

     if (temp_high -> score > 0)
     printf("\n\n%d. %s had a score of %d.", i + 1, temp_high -> name, temp_high -> score);
     }
     */

    temp_high = high;

    if((scorefile = fopen(HIGHSCORESFILE, "wb")) != 0)
    {
        printf("\n\nWriting from : %p", temp_high);
        fwrite(temp_high, sizeof(struct scores), 3, scorefile);
        fclose(scorefile);
    }

    /*For debugging
     for(i = 0; i < HIGHSCOREENTERIES; i++)
     {
     temp_high = high + (i * sizeof(struct scores));

     if (temp_high -> score > 0)
     printf("\n\n%d. %s had a score of %d.", i + 1, temp_high -> name, temp_high -> score);
     }
     */

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:06:04.143

`fwrite`不保证它会写入您传递给它的所有数据，因此您必须循环调用它。但是，我不认为这可能是您的问题的原因。

我认为您的问题是由于您滥用指针算术这一事实引起的。如果`high`是 a`struct scores*`并且你想要`i`它指向的数组的 -th 元素，你可以

```
high + i 
```

不是，正如您在整个代码中看到的那样，

```
temp_high = high + (i * sizeof(struct scores)); 
```

这样，您正在处理非常不同的内存位置（并且很可能调用 UB）。

# php - PHP-正则表达式 - 如何从右到左读取

> ID：14112784
> 
> 赞同：2
> 
> 时间：2013-01-01T17:55:24.947
> 
> 标签：php, regex, preg-match

我有下面的例子

```
$game = "hello999hello888hello777last";
preg_match('/hello(.*?)last/', $game, $match); 
```

上面的代码返回**999hello888hello777**，我需要的是检索**Last**之前的值，即**777**。所以我需要阅读正则表达式才能从右到左阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:57:48.467

```
$game = strrev($game); 
```

那个怎么样？:D

然后只需反转正则表达式^__^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T17:58:26.120

为什么不直接反转字符串？使用 PHP 的[strrev](http://php.net/manual/en/function.strrev.php)然后反转你的正则表达式。

```
$game = "hello999hello888hello777last";
preg_match('/tsal(.*?)elloh/', strrev($game), $match); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:00:37.603

您的问题是，尽管`.*`不情愿地匹配，即尽可能少的字符，但它仍然会在 之后立即开始匹配`hello`，并且由于它匹配*任何*字符，因此它将跨“边界”匹配（`last`在`hello`您的情况下）。

因此，您需要更明确地说明跨边界匹配是不合法的，这就是前瞻断言的用途：

```
preg_match('/hello((?:(?!hello|last).)*)last(?!.*(?:hello|last)/', $game, $match); 
```

现在`hello`and之间的匹配`last`禁止包含`hello`and/or `last`，并且不允许在匹配之后有`hello`or `last`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T18:00:17.843

这将返回字符串之前的最后一组数字`last`

```
$game = "hello999hello888hello777last";
preg_match('/hello(\d+)last$/', $game, $match);
print_r($match); 
```

输出示例：

```
Array
(
    [0] => hello777last
    [1] => 777
) 
```

所以你需要`$match[1];`777 值

# c# - 多态绑定源

> ID：14112785
> 
> 赞同：0
> 
> 时间：2013-01-01T17:55:38.497
> 
> 标签：c#, .net, winforms, data-binding, polymorphism

我有一个由 3 个类组成的类层次结构：

```
Customer
{
   public int Id {get; set;}
   public string Phone {get; set;}
   public string Address {get; set;}
   public abstract string Description {get;}
}

Person: Customer
{
   public string Name { get; set; }
   public string Surname { get; set; }
   public overrides string Description { get { return this.Name + " " + this.Surname; } }
}

Company: Customer
{
   public string CompanyName {get; set;}
   public overrides string Description { get { return CompanyName; } }

} 
```

我有一个带有 BindingSource 的表单，它根据客户从对象数据源获取数据，我想使用相同的表单为公司和人员输入和编辑数据。

我在这里有几个问题：

1.  是否可以将表单中的某些字段绑定到派生类的属性？我该怎么做？
2.  是否值得实现一个外观/组合类来公开子类的属性以简化绑定？
3.  通过代码将数据从 UI 移出/移入 UI 是否更好，而不是依赖于绑定特性？

# sql - 将 CSV 文件作为 SQL 函数导入 SQL Server 2012

> ID：14112788
> 
> 赞同：0
> 
> 时间：2013-01-01T17:55:45.717
> 
> 标签：sql, sql-server, csv, asp-classic

因此，我的代码基于另一个用户提出的 Import to mapped columns 问题。

这是代码...

```
DECLARE @TempTable TABLE (Name nvarchar(max))

 BULK INSERT @TempTable 
 FROM ‘C:\YourFilePath\file.csv’
 WITH ( FIELDTERMINATOR = ‘,’,
 ROWTERMINATOR = ‘\n’
)

INSERT INTO TABLE ([Name], [TypeId])
Select Name,'99E05902-1F68-4B1A-BC66-A143BFF19E37' from @TempTable 
```

我是否将此代码放入存储过程或函数中以从我的 ASP 脚本运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:04:11.510

1.  您的 TypeID 在最后一行是常量吗？
2.  您可以执行 SP 或 TableFunction。但是由于 TableFunction 依赖于您拥有的 SQL Server 版本，因此使用 SP 可能是有意义的。

# haskell - 如何在 cabal-dev 安装中启用分析？

> ID：14112789
> 
> 赞同：9
> 
> 时间：2013-01-01T17:55:45.340
> 
> 标签：haskell, profiling, cabal

我正在尝试分析一个具有一些依赖项的程序 Windingnumber。根据 Aleksander Dmitrov 在[Profile Haskell 中的回答，没有为所有依赖项安装安装分析库](https://stackoverflow.com/questions/12207698/profile-haskell-without-installing-installing-profiling-libraries-for-all-depend)，我正在使用 cabal-dev 来（尝试）构建启用分析的所有依赖项。我努力了

*   `cabal-dev install --config=./cabal-dev.config`，其中 cabal-dev.config 是

    ```
    library-profiling: True
    executable-profiling: True
    package-db: /home/christopher/school/senior/senior_thesis/windingnumber_integration/cabal-dev/packages-7.6.1.conf
    local-repo: /home/christopher/school/senior/senior_thesis/windingnumber_integration/cabal-dev/packages
    user-install: False
    remote-repo: hackage.haskell.org:http://hackage.haskell.org/packages/archive
    remote-repo-cache: /home/christopher/.cabal/packages
    optimization: True
    build-summary: /home/christopher/school/senior/senior_thesis/windingnumber_integration/cabal-dev/logs/build.log
    remote-build-reporting: anonymous
    optimization: True

    install-dirs user
      prefix: /home/christopher/school/senior/senior_thesis/windingnumber_integration/cabal-dev/
    install-dirs global 
    ```

*   `cabal-dev install --cabal-install-arg='--enable-library-profiling' --cabal-install-arg='--enable-executable-profiling'`

（`rm -rf cabal-dev`当然，从原始环境开始。）在每种情况下，我得到：

```
arch% cabal-dev/bin/windingnumber +RTS -p
cabal-dev/bin/windingnumber +RTS -p
windingnumber: the flag -p requires the program to be built with -prof
windingnumber: 
windingnumber: Usage: <prog> <args> [+RTS <rtsopts> | -RTS <args>] ... --RTS <args>
<snip> 
```

---即，未启用分析。我该如何启用它？

**ETA 解决方案：**将项目添加`-prof`到 .cabal 文件中的 ghc-options 中。显然在 cabal-dev 配置中设置 `executable-profiling: True" 并没有这样做。感谢 Daniel Fischer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T19:15:15.240

It looks like `cabal-dev` rewrites `./cabal-dev/cabal.config` every time it runs. However, you can edit `~/.cabal/share/cabal-dev-$VERSION/admin/cabal-config.in` to set the default values:

```
$  vim ~/.cabal/share/cabal-dev-0.9.1/admin/cabal-config.in
# Set executable-profiling and library-profiling to True
$ cabal unpack ghc-core
$ cd ghc-core-0.5.6
$ cabal-dev install --dependencies-only
$ cabal-dev configure -p
$ cabal-dev build
$ ./dist/build/ghc-core/ghc-core +RTS -p
# much success 
```

If you don't want to enable profiling for all projects managed with `cabal-dev`, use the `--extra-config-file` option (`--config` just sets the location of the auto-generated config file):

```
$ cat cabal-dev.config 
executable-profiling: True
library-profiling: True
$ cabal-dev --extra-config-file='./cabal-dev.config' install
$ ./cabal-dev/bin/ghc-core +RTS -p
# success 
```

Using the `ghc-options` field in the .cabal file for enabling profiling is not recommended - you don't want everyone who installs your package from Hackage to build with profiling. Use `cabal-dev configure -p --ghc-options="-fprof-auto"` to enable profiling for the current build only.

# java - 为什么我不能在静态上下文中使用“super”变量，即使“super”是指父类而不是类实例，不像“this”？

> ID：14112792
> 
> 赞同：13
> 
> 时间：2013-01-01T17:56:04.093
> 
> 标签：java, static, this, super

我说的是java语言。

变量“this”在类中使用时，指的是该类的当前实例，这意味着您不能在静态方法中使用“this”。

但是“super”在类内部使用时，是指该类的超类，而不是超类的实例，这应该意味着您可以在静态方法中使用“super”。但事实证明你不能。

一个可能的解释是说“超级”也指超类的一个实例，但我不明白为什么它应该......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-01T18:00:27.047

不，`super`确实指的是一个实例——`this`指的是同一个实例——当前对象。它只是一种引用超类中定义的方法和字段的方法，这些方法和字段在当前类中被覆盖或隐藏。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-01T18:00:53.620

这是 JLS 中关于`super`关键字的部分：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.11.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.11.2)

> 表单`super.Identifier`引用当前对象的名为 Identifier 的字段，但当前对象被视为当前类的超类的一个实例。
> 
> 该表单`T.super.Identifier`引用对应于 T 的词法封闭实例的名为 Identifier 的字段，但该实例被视为 T 的超类的实例。

在这两种情况下，很明显都需要一个实例对象。

* * *

此外，静态上下文与实例上下文有些不同，因为类不能覆盖静态方法，只能隐藏它们。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-01T18:00:35.070

您不能`super`从静态上下文中使用，原因与您不能`this`在静态上下文中使用的原因相同。在这两种情况下，这个词都是指一个实例。

在静态上下文中，您始终可以显式使用超类的名称：

```
class Sub extends Base {
    static void func() {
        Base.func();
        . . .
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-23T06:14:45.503

Super 是一个非静态变量，不能从静态上下文访问非静态实体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-22T19:59:37.017

[![在此处输入图像描述](../Images/f9df2e3e775183c98e0809074c82b6b9.png)](https://i.stack.imgur.com/7FvjS.png)

```
 super & this are build in non-static reference keywords
 these must be accessed with the non-static methods of the childClass 
```

# javascript - 在第一次点击运行 javascript:void(0) 后替换链接

> ID：14112798
> 
> 赞同：0
> 
> 时间：2013-01-01T17:56:25.010
> 
> 标签：javascript, jquery, drop-down-menu, href, void

以下代码通常包含在 if 语句中，以检查浏览器是否在移动设备上，如果是，则当您单击主菜单链接时，它会停止 href，隐藏当前导航栏链接，然后添加一个新链接。这允许下拉菜单保持下拉，您可以再次单击主菜单链接，以便 href 工作。问题是你只能这样做一次。第一次单击并运行 javascript:void(0) 并更新链接后，我无法阻止 href 转到其原始位置。我需要 javascript:void(0) 在每次第一次单击链接时运行，并在第二次单击链接时将您重定向到相应的页面。

```
$(document).ready(function(){
  $('.mobile-device > a').click(function(){
    $(this).attr('href', 'javascript:void(0)');
  });
});

$(document).ready(function(){
  $('.mobile-device > a').click(function(){
    $('.testing-a').css('display','block');
      $('.testing-this').css('display','none')
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:59:37.100

`preventDefault()`在这种情况下使用。

例子 ：：

```
$('.mobile-device > a').click(function(evt){
   evt.preventDefault();
   $(this).attr('href', 'javascript:void(0)');
}); 
```

# objective-c - 翻转视图仅在隐藏时有效，但在显示时无效

> ID：14112800
> 
> 赞同：1
> 
> 时间：2013-01-01T17:56:33.733
> 
> 标签：objective-c, cocoa-touch, uiview, uikit

我正在使用 iCarousel 库来显示一个类似于 Coverflow 的 UI。直接对 iCarousel 子视图进行动画处理往往会爆炸，因此我为我的动画创建了一个包装器，并在其中粘贴了一个子视图，看起来像被轻拍的封面。然后我隐藏了实际的 iCarousel 视图，并在其顶部设置了动画封面。

我正在使用`UIView`'s`transitionWithView:duration:options:animations:completion:`方法，但遇到了一些麻烦。*第一次*在屏幕上为另一个视图设置动画时，该视图显示时没有任何动画。动画出来时，视图正确翻转和隐藏。

我的视图层次结构如下：

*   主视图，从笔尖加载
*   包装视图
    *   视图从
    *   视图过渡到

我要过渡到的视图是 UINavigationController 的视图，其中包含 UITableViewController 子类。UINavigationController 不是最初的动画，而是出现，然后视图向上增长一点，就好像它正在接管状态栏所占据的空间。

知道为什么表格视图可能会像这样动画吗？（我怀疑包含 API 和/或`wantsFullscreen`，尽管我没有明确使用它们。我只是通过 将视图安装到包装器中`addSubview:`。）

这是我的“翻转”代码，每次都动画，但第一个：

```
- (void) flipInWithCompletion:(MBTransitionCompletion)completion {
BOOL displayingPrimary = [self isDisplayingPrimaryView];

UIView *frontView = [self frontView];
UIView *backView = [self backView];
UIView *wrapperView = [self wrapperView];

[wrapperView addSubview:frontView];

[UIView transitionWithView:wrapperView
                  duration:0.8
                   options:UIViewAnimationOptionTransitionFlipFromRight
                animations:^{
                    [wrapperView addSubview:backView];
                    [frontView removeFromSuperview];
                }
                completion:^(BOOL finished) {
                    [self setIsDisplayingPrimaryView:!displayingPrimary];
                    if (completion) {
                        completion();
                    }
                }
 ]; 
```

}

什么可能导致表格视图增长而不是允许包装器翻转？

**编辑：**

我制作[了一个视频](https://dl.dropbox.com/u/8372230/NSNBug.mov)来演示确切的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:41:50.947

听起来视图在开始动画之前没有正确加载。我想我记得以前遇到过类似的问题。尝试先将其添加到您的视图中，然后将其删除，并尝试将其设置为动画以查看是否可以修复它。

虽然这并不是一个真正的解决方案，但它应该为您提供可能出现问题的线索。

# jquery - 仅从更多元素中获取唯一名称

> ID：14112804
> 
> 赞同：4
> 
> 时间：2013-01-01T17:56:56.710
> 
> 标签：jquery, button, css-selectors, radio

我已经动态呈现了 HTML，其中列出了数量不确定的单选按钮，其名称代表数据库中的一些 id。

我需要收集收音机的所有唯一名称。

这是一个例子：

```
<input name="721" type="radio" value="A" />        
<input name="721" type="radio" value="I" />     

<input name="722" type="radio" value="A" />        
<input name="722" type="radio" value="I" />     

<input name="723" type="radio" value="A" />        
<input name="723" type="radio" value="I" /> 
```

不需要检查无线电，因此使用 selected 或 checked 属性将不起作用。

有没有一种优雅的方法可以使用 jQuery 获取收音机的所有唯一名称？我知道我可以遍历每个收音机，但我希望 jQuery 有一种更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:04:31.383

**[jsBin 演示](http://jsbin.com/ehicis/3/edit)**

```
var arr = [];

$.each( $('input:radio'), function(){

  var myname= this.name;
  if( $.inArray( myname, arr ) < 0 ){
     arr.push(myname); 
  }

});

alert(arr); // 721,722,723 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:08:18.803

```
var names = $('input[type=radio]').map(function() {
    return this.name
}).get(); // create an array of names

var unique = $.grep(names, function(v, i) {
    return $.inArray(v, names) === i
}); // filter unique values 
```

[http://jsfiddle.net/WnHvz/](http://jsfiddle.net/WnHvz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:08:32.287

要获得唯一名称，您可以使用[map()](http://api.jquery.com/map/)构建所有名称的数组，然后将[$.grep()](http://api.jquery.com/jQuery.grep/)与[$.inArray()](http://api.jquery.com/jQuery.inArray/)组合以删除重复项。

就像是：

```
var allNames = $("input[type=radio]").map(function() {
    return $(this).attr("name");
}).get();

var uniqueNames = $.grep(allNames, function(name, index) {
    return $.inArray(name, allNames) == index;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T18:02:10.090

```
$('input:radio').each(function(){
    // do something
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T18:03:09.837

仅供参考 - 您发布的 html 没有唯一的名称。每个都有两个......但这是你如何获得它们：

```
$('input[type="radio"]').each(function() {
    alert($(this).attr('name'));
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T18:07:29.683

如果你想`print those names`在每个之前`radio`使用它：

```
$('input[type="radio"]').each(function() {
    $(this).before($(this).attr('name'));
});​ 
```

试试小提琴：http: [//jsfiddle.net/teLjg/](http://jsfiddle.net/teLjg/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T18:12:45.343

只需尝试循环并获取所有名称并将其存储在一个数组中......然后通过使用过滤器方法，您可以过滤唯一值......

可以说，

```
var array=[your array values];

var unique_val = array.filter(function(value,iter,array){
    return iter == array.indexOf(value);
}); 
```

这可能有效...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-02T20:17:50.417

首先获取无线电项目的节点列表：

```
const radios = document.querySelectorAll("input[type="radio"]) 
```

然后得到一个名字的数组，然后用它们做一个集合，一个定义的集合只包含唯一的条目：

```
const nameSet = new Set(Array.from(radios).map( el => el.name)) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-01T18:31:55.277

我认为你们这么快并且喜欢 jQuery，呵呵。如果有 2 个单选按钮，这可能会对您有所帮助， [http://jsfiddle.net/BTcrR/](http://jsfiddle.net/BTcrR/)看看这个

```
$(function() {
    // list of 
    var rediobuttonsName = new Array();
    // you can use :odd | :even
    $('input[type="radio"]').not(':odd').map(function(n, elem) {

       rediobuttonsName.push(elem.name);
       // or  you can use the context of object this
       // this.name

   });

   alert(rediobuttonsName);
});​ 
```

或者您可以使用 .not(":odd") 并检查数组是否具有名称的值。;)

# google-chrome - 找出 Profobuf 消息的类型（Google Chrome 同步）

> ID：14112805
> 
> 赞同：1
> 
> 时间：2013-01-01T17:56:58.030
> 
> 标签：google-chrome, sync, protocol-buffers

我正在尝试连接到 Google Chrome 同步（同步您的 Chrome 设置和您当前打开的标签）。现在我专注于标签同步。我连接到 Google Talk 服务器，每当我导航到 Chrome 中的新网页时，我都会收到来自*tango bot的消息。*

但是我很难解码这些消息，因为它们是以谷歌的 protobuf 格式编码的——因为有大量不同的 protobuf 类专用于 Chrome Sync，我认为没有办法弄清楚二进制 protobuf 消息的类型？

典型的消息如下所示（base64 编码，XXXX't out my mail address）：

```
CAAilQEKQAoGCgQIAxACEiUKBgoECAMQARISCZwF6dZYmkeFEXZLABNN3/yMGgcIhSwQAxgBINP80ri/JyoIMTgxOTgxMjYaUQpPCgwI7AcSB1NFU1NJT04QARiw64/I0se0AiIyVzpDaGZDeU9JWUZXdXFuUmRXaGtJWk94VkRSM1lmTGU1M0FoRGVxT2EwOHVQUHcyOD0wASoGCgQIAxACMAI4AUIrCG8SJxAEGAIiFGRlbHXXXXXXXXdAZ21haWwuY29tQgl0YW5nb19yYXdIAQ== 
```

我尝试使用一些 protobuf 类（我为 Java 编译的）对其进行解码，但没有任何一个我得到任何有用的数据。

有没有人有关于这个主题的更多信息？关于如何找到正确的 protobuf 类来解码某个二进制消息的一些见解会很棒。它甚至会在某种程度上帮助我能够解码我作为上面示例给出的确切消息。很少有[公共文档](http://www.chromium.org/developers/design-documents/sync)，如果你不是 C++ 人，Chromium 源代码真的很难看……（我正在用 Java 开发，如果这很重要的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:44:26.150

是的，这在很大程度上是可能的；但是，它无法处理您发布的数据，因为您在尝试删除您的电子邮件地址时已经不可挽回地损坏了它。Protobuf 对此非常敏感；我尝试将 XXXXXXXX 替换为 base-64 以获得 6 个字母的电子邮件地址，但紧接在此之前的字节是 199，并且 199 在那里不合法（紧接在字符串内容之前的数据是编码为的字符串的长度varint，并且 varint 永远不能以最后一个字节集的最高有效位结束，因为 MSB 是一个延续标志）。

如果你有原始的 protobuf 二进制文件，你可以尝试运行它`protoc --decode_raw`，看看它说了什么；这可能足以让您开始重建布局。或者，您可以尝试使用首选实现的“阅读器”API（如果有的话）手动解析它。例如，使用 protobuf-net 和`ProtoReader`，我能够拼凑起来（括号中的数字是读取每个字段标题**后的偏移量）：**

```
{
    (1) field 1: varint, value 0 if int
    (3) field 4: string, looks like sub-message
    // everything after this point is really really suspect
        (6) field 1, string, looks like sub-message
            (8) field 1, string, looks like sub-message
            (16) field 2, string, looks like sub-message
            (55) field 4, varint, 1357060030035 assuming int64
            (62) field 5, string; "18198126"
        (72) field 3, string, looks like sub-message
            (64) field 1, string, looks like some encoded session data
    (155) field 5: string, looks like sub-message
        (157) field 1: string, looks like sub-message
    (163) field 6: varint, value 2 if int
    (165) field 7: varint, value 1 if int
    (167) field 8: string, looks like sub-message
        (169) field 1: varint, value 111 if int
        (171) field 2: string, looks like sub-message
} 
```

问题是由于损坏（由于您的替换），除了该字段 4 之外，不可能说太多；到那时，由于长度已关闭，一切都可能完全是胡言乱语。所以我对那一点没有信心。上面的要点只是为了说明：是的，您可以在不知道架构的情况下解析 protobuf 数据，以对架构进行逆向工程 - 但它需要：

*   耐心和一点猜测来解释每个字段（每种电线类型可能意味着多种事情）
    *   如果您知道存储的值是什么，而不必知道每个值如何映射到字段，那么您就有了先机；例如，如果您知道正在向您发送值 22、1325、“hello world”和 123.45F 的内容；那么你应该能够很容易地找出映射
*   完整的数据（在这种情况下遗憾地丢失了）

# c# - Windows 7 默认网络适配器

> ID：14112815
> 
> 赞同：3
> 
> 时间：2013-01-01T17:58:47.327
> 
> 标签：c#, .net

以下是我在 Windows XP 中获取默认 NIC 的代码，但相同的代码在 Windows 7 中不起作用。阅读 MSDN 后真的很困惑。有什么解决办法吗？

```
//----------------- Getting all the Nic's --------------------
foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces())
{
    //------------ Getting properties of IPV4 ----------------
    IPInterfaceProperties ipProps = nic.GetIPProperties();

    //------------ Getting the Ip Properties -----------------
    if (ipProps.GetIPv4Properties() != null)
    {
        dic.Add(ipProps.GetIPv4Properties().Index, nic.Name);
    } 
```

错误：请求协议未配置，或没有实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:06:26.380

这意味着您正在访问没有 IPv4 支持的接口。检查它：

```
if (nic.Supports(NetworkInterfaceComponent.IPv4)) // means IPv4 support is present 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipv4interfaceproperties%28v=vs.90%29.aspx)了解更多信息。

# android - 从android中的链接嵌入谷歌地图

> ID：14112818
> 
> 赞同：0
> 
> 时间：2013-01-01T17:59:08.060
> 
> 标签：android, google-maps

我在这个链接中有一张地图。我正在关注谷歌地图上的本教程 [http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

但我无法理解的是如何在此链接 [https://maps.google.com/?ll=26.293723,50.186512&spn=0.004146,0.007639&t=m&safe=on&z=的位置上打开地图17](https://maps.google.com/?ll=26.293723,50.186512&spn=0.004146,0.007639&t=m&safe=on&z=17)

抱歉，如果这看起来微不足道，我只是 android 的新手

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:08:44.980

从链接中，我注意到您具有该位置的经纬度值。将您的纬度和经度[作为附加](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)信息传递给您显示地图的活动。使用这些值创建一个[GeoPoint](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/GeoPoint)，您可以将其传递给[`setCenter()`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapController#setCenter%28com.google.android.maps.GeoPoint%29)和/或[`animateTo()`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapController#animateTo%28com.google.android.maps.GeoPoint%29)使用您的`MapController`.

```
controller.setCenter(geoPoint);
controller.animateTo(geoPoint); 
```

以下是有关如何使用这些方法[的更多信息。](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:15:31.600

首先，我建议您停止阅读该教程，因为[它使用的 Google Maps API 版本已被弃用。](https://developers.google.com/maps/documentation/android/v1/)

也就是说，特别是如果您从头开始，我会开始阅读新的[Google Maps Android API V2](https://developers.google.com/maps/documentation/android/)文档。

根据你发的网址，你想去的位置是26.293723，50.186512，Zoom level 17。不知道spn参数是什么。

[您可以通过使用newCameraPosition](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#newCameraPosition%28com.google.android.gms.maps.model.CameraPosition%29)方法在 GoogleMap 对象上设置相机位置来完成此操作：

```
 GoogleMap map = // <Get it from your fragment>
 LatLng point = new LatLong( 26.293723, 50.186512);
 CameraPosition position = new CameraPosition( 0, point, 0, 17F );
 map.newCameraPosition(position); 
```

您也可以使用[newLatLngZoom](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#newLatLngZoom%28com.google.android.gms.maps.model.LatLng,%20float%29)方法制作漂亮的飞行动画：

```
 GoogleMap map = // <Get it from your fragment>
 LatLng point = new LatLong( 26.293723, 50.186512);
 map.newLatLngZoom(point, 17F); 
```

# iphone - 如何在 xcode 中的某个特定间隔后在圆形进度视图中添加多种颜色？

> ID：14112822
> 
> 赞同：2
> 
> 时间：2013-01-01T17:59:45.420
> 
> 标签：iphone, ios, xcode

我在 Uiprogressview 中使用自定义进度视图，并在 20 秒内填充固定颜色，但我希望它在 10 秒后填充不同的颜色，以便 2 秒后看起来像两个彩色圆圈，这是我的代码：

```
#import "CEViewController.h"

@interface CEViewController ()
{

}

@end

@implementation CEViewController

@synthesize progressView;
@synthesize progressSlider;
@synthesize playPauseButton;
@synthesize player;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.player = [[[CEPlayer alloc] init] autorelease];
    self.player.delegate = self;

    UIColor *tintColor = [UIColor orangeColor];
    [[UISlider appearance] setMinimumTrackTintColor:tintColor];
    [[CERoundProgressView appearance] setTintColor:tintColor];

    self.progressView.trackColor = [UIColor colorWithWhite:0.80 alpha:1.0];

    self.progressView.startAngle = (3.0*M_PI)/2.0;

}

- (void)viewDidUnload
{
    [self setProgressView:nil];
    [self setProgressSlider:nil];
    [self setPlayPauseButton:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (void)dealloc {
    [progressView release];
    [progressSlider release];
    self.player = nil;
    [playPauseButton release];
    [super dealloc];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)progressSlider:(UISlider *)sender 
{
    self.player.position = sender.value;
    self.progressView.progress = sender.value;
}

- (IBAction)playPauseButton:(UIButton *)sender 
{
    if(sender.selected) // Shows the Pause symbol
    {
        sender.selected = NO;
        [self.player pause];
    }
    else    // Shows the Play symbol
    {
        sender.selected = YES;
        [self.player play];
    }
}

// MARK: CEPlayerDelegate methods

- (void) player:(CEPlayer *)player didReachPosition:(float)position
{
    self.progressView.progress = position;
    self.progressSlider.value = position;
}

- (void) playerDidStop:(CEPlayer *)player
{
    self.playPauseButton.selected = NO;
    self.progressView.progress = 0.0;
    self.progressSlider.value = 0.0;    
}
@end 
```

我应该在哪里进行更改以获得我想要的输出，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:13:00.347

试试这个，`otherColor`用你的第二个半色代替。您可能需要修复一些语法错误，我的 Xcode 版本无法在这台计算机上运行，​​所以我无法检查。

```
#import "CEViewController.h"

@interface CEViewController ()
{
UIColor *progressColor;
BOOL colorChanged;
}

@end

@implementation CEViewController

@synthesize progressView;
@synthesize progressSlider;
@synthesize playPauseButton;
@synthesize player;
@synthesize progressColor;
@synthesize colorChanged;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.player = [[[CEPlayer alloc] init] autorelease];
    self.player.delegate = self;

    self.progressColor= [UIColor orangeColor];
    [[UISlider appearance] setMinimumTrackTintColor:self.progressColor];
    [[CERoundProgressView appearance] setTintColor:self.progressColor];

    self.progressView.trackColor = [UIColor colorWithWhite:0.80 alpha:1.0];

    self.progressView.startAngle = (3.0*M_PI)/2.0;
    colorChanged = false;
}

- (void)viewDidUnload
{
    [self setProgressView:nil];
    [self setProgressSlider:nil];
    [self setPlayPauseButton:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (void)dealloc {
    [progressView release];
    [progressSlider release];
    self.player = nil;
    [playPauseButton release];
    [super dealloc];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)progressSlider:(UISlider *)sender 
{
    self.player.position = sender.value;
    if(sender.value >= 0.5 && colorChanged == false) {
        self.progressColor= [UIColor otherColor];
        [[UISlider appearance] setMinimumTrackTintColor:self.progressColor];
        [[CERoundProgressView appearance] setTintColor:self.progressColor];
        colorChanged = true;
    }
    self.progressView.progress = sender.value;
}

- (IBAction)playPauseButton:(UIButton *)sender 
{
    if(sender.selected) // Shows the Pause symbol
    {
        sender.selected = NO;
        [self.player pause];
    }
    else    // Shows the Play symbol
    {
        sender.selected = YES;
        [self.player play];
    }
}

// MARK: CEPlayerDelegate methods

- (void) player:(CEPlayer *)player didReachPosition:(float)position
{
    self.progressView.progress = position;
    self.progressSlider.value = position;
}

- (void) playerDidStop:(CEPlayer *)player
{
    self.playPauseButton.selected = NO;
    self.progressView.progress = 0.0;
    self.progressSlider.value = 0.0;    
}
@end 
```

# asp.net - 如何对列表进行排序？

> ID：14112823
> 
> 赞同：0
> 
> 时间：2013-01-01T17:59:49.247
> 
> 标签：asp.net, vb.net, list

我尝试以多种方式对列表进行排序，但没有一个对我有用。我一定做错了什么。我想对列表进行排序，`details`然后对其进行序列化并将其发送到 UI，以便我在 UI 中有一个排序的列表。所以基本上我想`Return strJson`返回排序（按排序属性排序）列表。希望我说得通。

```
<WebMethod(Description:="Get Home Page Items Page Wise", EnableSession:=True)> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)>
    Public Function GetHomePageItemsPageWise(ByVal pageIndex As String) As Object
        Dim details As New List(Of HomePageObject)()

        Dim idObject As New List(Of GetIdBasedOnInterest)()
        idObject = CType(BLL.GetDataByInterests(CType(BLL.GetAccIdFromSocialAuthSession(), Integer)), List(Of GetIdBasedOnInterest))

        Dim cmd As DbCommand = _db.GetStoredProcCommand("GetHomePageObjectPageWise")
        _db.AddInParameter(cmd, "PageIndex", SqlDbType.VarChar, pageIndex)
        _db.AddInParameter(cmd, "PageSize", SqlDbType.Int, 10)
        _db.AddOutParameter(cmd, "PageCount", SqlDbType.Int, 1)
        _db.AddInParameter(cmd, "whereStoryID", SqlDbType.VarChar, idObject(0).StoryIds)
        _db.AddInParameter(cmd, "whereAlbumID", SqlDbType.VarChar, idObject(0).AlbumIds)
        _db.AddInParameter(cmd, "wherePictureID", SqlDbType.VarChar, idObject(0).PictureIds)

        Try
            Using ds As DataSet = _db.ExecuteDataSet(cmd)
                For Each rs As DataRow In ds.Tables(0).Rows
                    Dim homePageObject As New HomePageObject()

                    homePageObject.AlbumId = rs("AlbumId").ToString()
                    homePageObject.StoryTitle = rs("StoryTitle").ToString()
                    homePageObject.AlbumName = rs("AlbumName").ToString()
                    homePageObject.AlbumCover = rs("AlbumCover").ToString()
                    homePageObject.Votes = rs("Votes").ToString()
                    homePageObject.PictureId = rs("PictureId").ToString()
                    homePageObject.TableName = rs("tableName").ToString()
                    homePageObject.PageCount = CType(cmd.Parameters("@PageCount").Value, Integer)
                    homePageObject.Sort = Guid.NewGuid()
                    details.Add(homePageObject)
                    Next
            End Using
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try

        Dim js As New JavaScriptSerializer()
        Dim strJson As String = js.Serialize(details.ToArray)
        Return strJson
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:20:08.523

要随机化列表，您可以执行以下操作。（并且您不需要 in 的`Sort`属性`HomePageObject`来完成此操作）

```
Dim rnd As new Random()
Dim strJson As String = js.Serialize(details.OrderBy(Function(x) rnd.Next()).ToArray()) 
```

# python - 在使用 Python 进行线程处理期间内存不断增加

> ID：14112824
> 
> 赞同：0
> 
> 时间：2013-01-01T17:59:51.310
> 
> 标签：python, multithreading, performance, memory

我在 Python 中遇到线程问题。内存不断上升（pythonw.exe）..它以 +- 20.000 kB 开始，但一直上升直到程序完成。任何人都知道如何解决这个问题？

```
class Threads(threading.Thread):
    def run(self):
        try:
            HTML = urllib2.urlopen(//URL//).read()
        except urllib2.HTTPError: pass
        except: pass

def __Scan__():
    Count = 0
    while Count <10000:
        Count = Count + 1
        try:
            Thread = Threads()
            Thread.name = Count
            Thread.start()
        except:
            Count = Count - 1 
```

每个 Thread 都会打开一个 URL，然后我将 Thread 的编号存储在一个列表中。但我不认为这是内存上升的原因？任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:02:42.680

内存的增加可能来自为每个新线程创建的堆栈空间。Python（和大多数其他语言）中的线程具有一定的资源开销。每次创建一个时，都会为其分配一点内存。

# javascript - 通过 jQuery 删除一个 HTML 元素，这取决于它的深度

> ID：14112830
> 
> 赞同：0
> 
> 时间：2013-01-01T18:00:36.937
> 
> 标签：javascript, jquery, limit, deep-linking

我`nested lists`在我的 HTML 页面中有这些列表由 jQuery 代码管理，该代码为用户提供了将行和子节点添加到列表节点的交互。每个列表都可以包含一个`div`用于添加新列表作为子列表。我的问题是我想在我可以创建的元素的深处添加一个动态限制器：

```
<ul>
    <li>
        <ul>
            <li><div class="add-child"></div></li>
            <li><div class="add-child"></div></li>
            <li><div class="add-row"></div></li>
        </ul>
    </li>
    <li><div class="add-child"></div></li>
    <li><div class="add-child"></div></li>
    <li><div class="add-row"></div></li>
</ul> 
```

未来可能会发生变化，我知道如果我想使用这样的静态选择器，我可以简单地使用`a max of 3 levels of deepness`：

```
$('li li li .add-child').remove(); 
```

但我想要一个动态解决方案来通过 PHP 设置深度，然后通过 jQuery 限制它，我的方法怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:17:21.427

```
$('.add-child')
    .filter(function(){
        return $(this).parents('li').length > 2;
    })
    .remove(); 
```

我知道，你说你不需要插件，但我无法抗拒：D

```
$.fn.filterIfHasNParents = function(n, selector){
    var depth = n || 1;
    return $(this).filter(function(){
        return $(this).parents(selector || '').length > depth - 1;
    });
} 
```

然后将其用作：

```
$('.add-child').filterIfHasNParents(3, 'li').remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T18:17:34.903

你的意思是这样的？

```
$( '.add-child' ).each( function() {
    if( $( this ).parents( 'li' ).length > someDepthSetByPHP )
    {
        $( this ).remove();
    }
} ); 
```

[*jsfiddle 示例*](http://jsfiddle.net/KBMSD/)

# plsql - plsql中SELECT子句的问题

> ID：14112837
> 
> 赞同：0
> 
> 时间：2013-01-01T18:01:15.597
> 
> 标签：plsql

我正在使用 oracle 客户端和 plsql 来测试优化调优等项目。事情是这样的，这是一个大学课程项目，所以我要求创建一些表然后运行一些查询（然后优化等），我们有 2执行它的选项。要么从 plsql 的 linux 终端。我使用 sqlplus 从数据库中的终端创建表，然后在 plsql 中运行查询，但我没有结果（就像行是空的，但它们不是）。我做了一些搜索，但找不到解决方案。如果您需要了解更多详细信息，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:18:01.160

您是说您在 sqlplus 会话中创建表，将数据插入其中，然后运行一个单独的会话，在其中使用 plsql 查询表？

如果是这样，您是否在执行插入后提交您的工作？

例如，如果您在 sqlplus 中执行此操作：

```
create table foo (id number, value varchar(255), primary key (id));
insert into foo (id, value) values (1, 'bar');
insert into foo (id, value) values (2, 'baz');
commit; 
```

然后你应该在另一个会话中看到表 foo 中的 2 行。但是，如果您不进行提交，那么新表将对另一个会话可见，但它似乎是空的。

# java - 为什么在休眠中不鼓励复合键？

> ID：14112839
> 
> 赞同：39
> 
> 时间：2013-01-01T18:01:40.180
> 
> 标签：java, database, hibernate, orm, composite-key

这是来自[Hibernate 官方教程](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)：

> 有一个替代`<composite-id>`声明允许使用复合键访问遗留数据。强烈建议不要将其用于其他任何用途。

为什么不鼓励复合键？我正在考虑使用一个 3 列表，其中所有列都是外键，并且一起形成一个主键，这在我的模型中是一个有意义的关系。我不明白为什么这是一个坏主意，尤其是我将在它们上使用索引。

有什么选择？创建一个额外的自动生成的列并将其用作主键？无论如何，我仍然需要查询我的 3 列！？

简而言之，为什么这个说法是正确的？什么是更好的选择？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-01T18:11:16.813

他们不鼓励他们有几个原因：

*   它们使用起来很麻烦。每次您需要引用一个对象（或行）时，例如在您的 Web 应用程序中，您需要传递 3 个参数而不仅仅是一个。
*   他们效率低下。数据库需要对 3 列的组合进行散列，而不是简单地散列一个整数。
*   它们导致错误：开发人员不可避免地错误地实现了主键类的 equals 和 hashCode 方法。或者他们让它可变，一旦存储在 HashSet 或 HashMap 中就修改它们的值
*   他们污染了模式。如果另一个表需要引用这个 3 列的表，它需要有 3 列而不是只有一个作为外键。现在假设你按照同样的设计，让这个 3 列外键成为这个新表的主键的一部分，你很快就会有一个 4 列的主键，然后在下一个表中有一个 5 列的 PK，等等. 等，导致数据重复和脏模式。

除了其他三列之外，另一种方法是使用单列自动生成的主键。如果要使三列的元组唯一，请使用唯一约束。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-12-27T15:56:48.610

即使现在 - 也许 - 回答你的问题为时已晚，我想在这里就 Hibernate 使用代理键的需要（这真的是一个建议吗？）提出另一种观点（我希望更温和）。

**首先**，我想明确一个事实，即**代理**键（人工自动生成的）和自然键（由具有域含义的列组成）**各有****利弊**。我并不是说一种键类型比另一种更好。我想说的是，根据您的要求，自然键可能是比代理键更好的选择，反之亦然。

 **# 自然键的神话

1.  复合键的效率低于代理键。不！这取决于使用的数据库引擎：
    *   [甲骨文](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:6070436300346195032 "askTom：自然键作为主键与代理键")
    *   [MySQL](https://stackoverflow.com/questions/1460465/composite-primary-key-performance-drawback-in-mysql)
2.  自然键在现实生活中不存在。抱歉，它们确实存在！**例如，在航空业中，以下元组对于给定的预定**航班（航空公司、出发日期、航班号、操作后缀）将始终是唯一的。**更一般地，当一组业务数据通过给定标准**保证是唯一的时，那么这组数据就是一个[好的]自然关键候选者。
3.  自然键“污染”子表的架构。对我来说，这更像是一种感觉，而不是一个真正的问题。拥有 4 列 2 字节的主键可能比 11 字节的单列更有效。此外，这 4 列可用于直接查询子表（通过使用 where 子句中的 4 列）而不连接父表。

# 代理键的缺点

代理键是：

1.  性能问题的来源：
    *   它们通常使用自动递增的列来实现，这意味着：
        *   每次您想获得一个新的 Id 时都要往返于数据库（我知道这可以使用缓存或 [seq]hilo 类似的算法来改进，但这些方法仍然有其自身的缺点）。
        *   如果有一天您需要将数据从一个模式移动到另一个模式（至少在我的公司经常发生这种情况），那么您可能会遇到 Id 冲突问题。是的，我知道你可以使用 UUID，但最后一个需要 32 个十六进制数字！（如果您关心数据库大小，那么这可能是一个问题）。
        *   如果您对所有代理键使用一个序列，那么 - 可以肯定的是 - 您最终会在数据库上发生争用。
2.  容易出错。序列具有最大值限制，因此 - 作为开发人员 - 您必须注意以下事实：
    *   您必须循环您的序列（当达到最大值时，它会返回到 1,2，...）。
    *   如果您将序列用作数据的排序（随着时间的推移），那么您必须处理循环的情况（ID 为 1 的列可能比 ID 最大值 - 1 的行更新）。
    *   确保您的代码（甚至是不应发生的客户端接口，因为它应该是内部 Id）支持用于存储序列值的 32b/64b 整数。
3.  他们不保证非重复数据。您始终可以有 2 行具有所有相同的列值但具有不同的生成值。对我来说，从数据库设计的角度来看，这是代理键的问题**。**
4.  [更多在维基百科...](http://en.wikipedia.org/wiki/Surrogate_key "缺点部分")

# 为什么 Hibernate 喜欢/需要代理键？

正如**Java Persistence with Hibernate**参考中所述：

> 更有经验的 Hibernate 用户只使用 saveOrUpdate()；让 Hibernate 决定什么是新的和什么是旧的要容易得多，尤其是在具有混合状态的更复杂的对象网络中。独占 saveOrUpdate() 唯一（不是很严重）的缺点是它有时无法在不触发数据库的 SELECT 的情况下猜测一个实例是旧的还是新的——例如，当一个类被映射到一个自然复合键并且没有版本或时间戳属性。

可以在[此处找到](https://stackoverflow.com/questions/3742897/hibernate-elementcollection-strange-delete-insert-behavior)**限制**的一些表现形式（我认为，我们应该这样称呼它） 。

# 结论

请不要太拘泥于你的观点。在相关时使用自然键，并在最好使用代理键时使用它们。

希望这对某人有所帮助！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-01T18:29:54.040

我会从设计的角度考虑这个问题。不仅仅是 Hibernate 认为它们是好是坏。真正的问题是：*自然键是否适合成为我的数据的良好标识符？*

在您的业务模型中，今天可以很方便地通过一些数据来识别记录，但业务模型会随着时间的推移而发展。当这种情况发生时，您会发现您的自然密钥不再适合唯一标识您的数据。并且由于其他表中的参照完整性，这将使事情**更难**改变。

拥有代理 PK 很方便，因为它不会*将您的数据在存储中的识别方式*与*您的业务模型结构*联系起来。

自然键无法从序列中生成，数据无法通过其数据识别的*情况更为*常见。这是自然密钥与存储密钥不同的证据，它们不能被视为通用（和好的）方法。

使用代理键简化了应用程序和数据库的设计。它们更容易使用，性能更高，并且做得很好。

自然键只带来缺点：我想不出使用自然键的单一优点。

也就是说，我认为 hibernate 对自然（组合）键没有真正的问题。但是有时您可能会发现一些问题（或错误），以及文档问题或寻求帮助，因为 hibernate 社区广泛承认代理键的好处。*因此，请为您选择组合键*的原因准备一个很好的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-06T23:16:12.167

如果正确理解 Hibernate 文档：

“有一个替代`<composite-id>`声明允许使用复合键访问遗留数据。强烈建议不要将其用于其他任何事情。”

关于主题 5.1.4。id 标记 xml`<id>`使主键映射过早我们可以得出结论，hibernate 文档不鼓励使用复合主键映射而`<composite-id>`不是`<id>`xml 标记，并且**不会**使任何引用否定使用复合主键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-26T15:49:57.717

使用数据库作为工具开发的应用程序肯定更有利于保持代理键上的工作流，使用聚集索引进行查询优化。

然而，需要特别注意数据仓库和 OLAP 风格的系统，它们利用大量的事实表将维度的代理键联系在一起。在这种情况下，数据决定了可用于维护记录的仪表板/应用程序。

因此，与其说一种方法优于另一种方法，不如说是一种指令对另一种方法有利，用于关键构造：您不会很容易地开发 Hibernate 应用程序来利用对 SSAS 系统实例的直接访问。

我使用这两种键组合进行开发，并且感觉要实现实心星形或雪花模式，具有聚集索引的代理通常是我的首选。

因此，对于 OP 和其他人的看法：如果您想保持 db 与您的开发（Hibernate 擅长）保持不变 - 使用代理方法，并且当数据读取趋于缓慢时，或者您注意到某些查询耗尽性能，恢复到您的特定数据库，并添加优化查询顺序的复合聚集索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-01T12:44:12.637

不要混淆主键和唯一索引。如果您使用自然键，则将您的键链接到您的业务、业务数据；它不是那么好。因此，即使可以使用一组数据来定义复合键，也不建议这样做。在我看来，复合键主要在您拥有现有模式时可用**

# javascript - Chrome 调试器中没有 javascript 错误，但不插入文本

> ID：14112843
> 
> 赞同：0
> 
> 时间：2013-01-01T18:02:02.977
> 
> 标签：javascript

此代码无法将文本插入文本区域 - 请参阅下面的 html。我无法更改 html - 因为此代码段正在模仿真实的网页。我只需要将文本插入文本区域。

它在 Chrome 或 IE9 中不起作用。

有任何想法吗？

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<script type="text/javascript">

function insert_text() {
   //enumerate div sections and find where id = WIN_0_4
   var div = window.document.getElementById("WIN_0_4");
   if(div !== null)
   {
      var txtbox = div.getElementsByTagName('textarea');
      if(txtbox !== null)
         txtbox.value = document.frm.texttoinsert.value;
   }
}

</script>

<form name="frm">
<input type="button" id="clicker" value="Click me" />
<input type="button" value="insert" id="inserter" onclick="insert_text();" />

<input type="text" name="texttoinsert" />
</form>

<div id="WIN_0_536870917" arid=536870917 artype="View" ardbn="View Field2"      class="arfid536870917 ardbnViewField2" style="color:#0000FF">
some text here
</div>

<div id="WIN_0_4" arid=4 artype="Char" ardbn="Assigned To">
<label id="label4" class="label f6">Assigned To</label>
<textarea class="text sr " wrap="off" id="arid_WIN_0_4" cols="20" maxlen=254 arautocak=0 arautoctt=400 rows=1></textarea>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:02:59.153

代替

```
var txtbox = div.getElementsByTagName('textarea'); 
```

和

```
var txtbox = div.getElementsByTagName('textarea')[0]; 
```

或更好 ：

```
var txtbox = document.getElementById('arid_WIN_0_4'); 
```

顾名思义，`getElementsByTagName`返回多个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:03:43.100

```
txtbox[0].value = document.frm.texttoinsert.value; 
```

# c# - DGV CellPainting 行为异常

> ID：14112849
> 
> 赞同：2
> 
> 时间：2013-01-01T18:02:23.910
> 
> 标签：c#, winforms, datagridview

我在 DataGridView 中显示了一个小时列表，并希望遮蔽那些不在工作时间的时间。我正在尝试使用 CellPainting 来做到这一点，但是我得到了奇怪的结果。有人可以解释一下我在这里做错了什么吗？

```
private void dgvItemView_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    switch (_formType)
    {
        case FormType.DayView:
            TimeSpan openTime = iFlow.Properties.Settings.Default.BusinessHourOpen;
            TimeSpan closeTime = iFlow.Properties.Settings.Default.BusinessHourClose;

            DataGridViewCell cell = this.dgvItemView[e.ColumnIndex, e.RowIndex];

            if (cell.RowIndex < openTime.Hours || cell.RowIndex > closeTime.Hours)
            {
                e.Graphics.FillRectangle(new SolidBrush(Color.FromArgb(25, Color.Red)), e.ClipBounds);
            }
            break;
    }
} 
```

但是，此代码会产生渐变效果，如下所示：

![形式](../Images/0377cf8f8eadaa9253417d5ae7165495.png)

我真的不明白。当我上下滚动时，阴影也会消失并重新出现，具体取决于我滚动的程度。

那么有人可以解释一下我在这里做错了什么吗？我还需要绘制部分块，以防工作时间不在时间，例如 08:45 到 17:30，所以我不能只更改单元格的 BackColor 来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:13:25.690

`e.ClipBounds`指整个可见部分`DataGridView`。
您实际上所做的是在整个可见`DataGridView`区域上绘制多个透明层，从而在滚动时产生渐变效果。

你应该`e.CellBounds`改用。

与您的问题无关的另一个问题是您正在从`SolidBrush`. `Dispose()`你的`SolidBrush`画后，或者更好的是，使用`using`这样的声明：

```
using (var sb = new SolidBrush(Color.FromArgb(25, Color.Red)))
{
    e.Graphics.FillRectangle(sb , e.CellBounds);
} 
```

*编辑：*

您还必须设置`e.Handled`为`true`后绘画，以防止系统在您的作品上绘画。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellpaintingeventargs.aspx)：

> 如果您手动绘制单元格，请将 HandledEventArgs.Handled 属性设置为 true。如果未将 HandledEventArgs.Handled 设置为 true，则单元格将覆盖您的自定义设置。

# c# - 不带参数的 Throw 语句，位于通用异常处理程序中的 catch 块之外

> ID：14112851
> 
> 赞同：5
> 
> 时间：2013-01-01T18:02:46.967
> 
> 标签：c#, exception-handling

我有一个常见的异常处理函数：

```
public static void ManageException(Exception ex,
                                   string customErrorMsg,
                                   bool displayMessage) 
```

我想从一些 catch 块中调用它。

处理异常后，我想重新抛出异常，同时保留堆栈跟踪。

我在某处读到我应该`throw`在没有任何参数的情况下声明。该`throw`语句（没有任何参数）在一个`catch`块中工作正常，但在我的`ManageException`函数中，它给了我一个编译错误：

> 不允许在 catch 子句之外使用不带参数的 throw 语句

是否有任何解决方案可以从函数中重新抛出整个堆栈跟踪的异常并且没有任何性能影响`ManageException`？

我正在使用 C# 2.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:05:28.263

您必须指定要抛出的异常，如下所示：

```
throw ex; 
```

如您的错误中所述，您只能`throw;`从 catch 块内重新抛出异常（使用 ）。恕我直言，这确实是唯一有意义的地方；您要么捕获异常，要么抛出异常，并且可能不应该两者都做。从一个名为 的方法`ManageException`中，我想知道您为什么要管理所述异常，但无论如何都要抛出它。

*也许您想将原始异常包装在您自己的异常中，提供更多详细信息？*在这种情况下，如果您想保留该数据，我将使用`ex`as抛出一个新异常。`InnerException`

* * *

根据您的评论，如果您要做的是确定是否应该重新抛出异常，我建议：

*   将您的方法重命名为`TryManageException`并更改签名以返回 a `bool`- 如果异常未正确管理并且需要重新抛出，则返回 false；如果已处理，则返回 true。
*   如果该方法返回 false（= 未管理），请从 catch 块中重新抛出或执行您需要的任何其他操作：

    ```
    try
    {
        decimal oops = 5 / 0;
    }
    catch (Exception e)
    {
        if (!CommonExceptionHandler.TryManageException(e, "oops", "oops"))
            throw;
    } 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-20T14:21:49.583

如果确实需要在catch块外重新抛出异常，可以使用如下方法：

```
ExceptionDispatchInfo.Capture(exception).Throw(); 
```

[ExceptionDispatchInfo](https://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.exceptiondispatchinfo.aspx)类从 .NET Framework 4.5 开始可用。

通常，您不需要使用此方法；相反，您可以 a) 使用 catch 块内的命令重新引发异常`throw;`，或 b) 将异常包装在另一个异常中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:35:19.677

您的选择是：

A. 抛出 catch 块：

```
try
{
    //do stuff
}
catch (Exception ex)
{
    ManageException(ex);
    throw;
} 
```

B. 在处理程序方法中重新抛出：

```
private void ManageException(Exception ex)
{
    //log or whatever
    throw new Exception("See inner exception", ex);
} 
```

C. 更高级别的处理：

例如在 ASP.NET 中使用 Global.asax 中的 Application_Error 事件处理程序方法。
所有未处理的异常最终都可以在那里处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T18:05:54.930

您只能从 catch 块内重新投掷。想想看；如果您不在 catch 块中，那么您的程序只是崩溃了，或者异常在更高级别被捕获。从 catch 块之外重新抛出是没有意义的。

将您的函数包装在 try/catch 中，并在需要时从 catch 中重新抛出。此外，如果*您所做*的只是重新投掷，那就没有意义了；只是让异常冒泡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T18:06:02.833

你不能。

来自[MSDN](http://msdn.microsoft.com/en-us/library/0yd65esw%28v=vs.80%29.aspx)

> 可以在 catch 块中使用 throw 语句来重新抛出已被 catch 语句捕获的异常。

如果要保留堆栈跟踪，则必须将其包装[`InnerException`](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)

```
public static void ManageException(Exception ex, string customErrorMsg, bool displayMessage)
{
   ...
   throw new Exception ("Re-throwing", ex); // You can use your custom Exception object with custom message.
} 
```

的调用者`ManageException`应该处理`ex.InnerException`而不是`ex`.

# html - 移动身体背景图片

> ID：14112863
> 
> 赞同：1
> 
> 时间：2013-01-01T18:04:15.703
> 
> 标签：html, css, image, position

我正在使用这个 CSS 将图像放入`<body>`：

```
body {
  background: url('picture.png') no-repeat; 
  background-size: contain;
} 
```

该图像显示在浏览器窗口的顶部，但我需要将此图像放置在距离顶部几个像素的位置。

我试过使用`padding/margin-top: 20px;`，但它没有帮助我，图像仍然在浏览器窗口的顶部。

如何将`body`标签的背景图像从顶部向下移动几个像素？

注意：我需要在 body 标签中有图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T18:06:29.767

你需要`background-position`改用。

```
body {
  background: url('picture.png') no-repeat; 
  background-position: 0 20px;
  background-size: contain;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:09:11.777

您可以使用 css background-position 属性，

例子

```
body {
  background: url('picture.png') no-repeat; 
  background-position: 0px 50px; /* This makes the image appear 50px from top */
  background-size: contain;
} 
```

# javascript - 按名称获取复选框的值

> ID：14112868
> 
> 赞同：3
> 
> 时间：2013-01-01T18:04:38.730
> 
> 标签：javascript, jquery, html, jquery-mobile

我需要按名称获取复选框的值。我有以下代码：

```
<input type="hidden" name="my_checkbox" value="0">
<input type="checkbox" name="my_checkbox" id="my_checkbox_id" value="1"  /> 
```

这个想法是，如果未选中该复选框，我将获得隐藏的输入类型的值（即 0）。

这是我尝试过但没有奏效的方法：

```
$('input[name=my_checkbox]').val(); 
```

然而，这返回了隐藏输入和复选框的值。谁能告诉我如何在选中 (1) 时获取复选框的值，或者在未选中时获取隐藏输入 (0) 的值？我想这必须按名称完成，这样如果未选中复选框，我将获得隐藏输入的值，就像未选中复选框一样，您将无法获得其值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T10:10:01.660

```
<input type="hidden" name="my_checkbox" value="0">
<input type="checkbox" name="my_checkbox" id="my_checkbox_id" value="1"  /> 
```

试试这个对我有用：

```
$( 'input[name="my_checkbox"]:checked' ).val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:16:20.310

Actually you don't need the hidden one, you just need to say:
`if checkbox is not checked set his value to '0'`
and this is all you need:

```
$('input:checkbox').not(':checked').val(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T18:10:31.277

你为什么不这样做：

```
if($("#my_checkbox_id").is(':checked')) {
    output = $("#my_checkbox_id").val();
} else {
    output = $('input[type=hidden]').val();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T18:17:52.613

只需找到`:visible`复选框：

```
$('input[name="my_checkbox"]:visible').change(function() {
  if ($('input[name="my_checkbox"]:visible').is(':checked')) {
    alert($('input[name="my_checkbox"]:visible').val());
  } else {
    alert($('input[name="my_checkbox"]:hidden').val());
  }
}); 
```

试用小提琴：http: [//jsfiddle.net/JgzGa/1/](http://jsfiddle.net/JgzGa/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T18:08:10.340

您可以为其添加一个新功能：

```
$.fn.checkboxVal = function() {
    var checked = $(this).filter("[type=checkbox]:checked");
    if (checked.length)
        return checked.val();

    return $(this).filter("[type=hidden]").val();
}; 
```

然后你可以说它`$("input[name=foo]").checkboxVal()`会给你正确的价值。

未经测试，因此修复任何错误留给读者作为练习。

# zend-framework2 - ZF2 - 'use_defaults' 键的用途是什么？

> ID：14112871
> 
> 赞同：0
> 
> 时间：2013-01-01T18:04:58.980
> 
> 标签：zend-framework2

我在 ZF2 的几个教程中看到了对“use_defaults”选项的引用： [http ://www.qc4blog.com/?p=1391](http://www.qc4blog.com/?p=1391) [https://github.com/blanchonvincent/zf2-lazy-loading-module](https://github.com/blanchonvincent/zf2-lazy-loading-module) [http://www .slideshare.net/mkherlakian/zf2-phpquebec](http://www.slideshare.net/mkherlakian/zf2-phpquebec)

'service_manager' 键下的 use_defaults 键到底是什么？我在 ZF2 代码中找不到任何提及：

```
cd ZF2
grep -ri use_defaults . 
```

文档也没有提到“use_defaults”选项。我不确定 - 也许这个选项在 beta4 之后被删除了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:44:35.260

在 zftalk 频道上进行一些挖掘和询问后 - 'use_defaults' 选项似乎不再被任何东西使用。所以 - 它可能在 ZF2 beta4 或其他东西之后被删除 - 忽略它。

# css - CSS：当我的鼠标悬停在链接上时，如何将链接的“边框顶部”制作成图像

> ID：14112877
> 
> 赞同：1
> 
> 时间：2013-01-01T18:05:32.383
> 
> 标签：css

我想知道是否有办法将边框顶部和边框底部更改为我自己制作的特定边框。这是一张图片，我希望它在用户悬停在链接上时显示。

那可能吗？或者我是否必须将我的链接变成图像，然后将图像更改为带有边框的链接的另一个图像。（这似乎还有很长的路要走。我希望有一个更简单的方法）

这是我的代码。一切正常。我只想用我自己制作的图像边框替换实心边框。

CSS：

```
.home   {
font: bold 15px;
    text-align:center;
height:30px;
width: 223px;
    background-color: #d0d1cf;
    color: #000000;
    padding: 2px 2px 2px 2px;
position:absolute;
left:80px;
top:200px;
}

.home:hover {
        background-color:#b2b4b0;
        border-top:solid 1px #ffffff;
        border-bottom:solid 1px #ffffff;
        } 
```

HTML：

```
 <div class="home">
    <a href="home.html">Home</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:12:13.997

```
div
{
-moz-border-image:url(border.png) 30 30 round; /* Old Firefox */
-webkit-border-image:url(border.png) 30 30 round; /* Safari */
-o-border-image:url(border.png) 30 30 round; /* Opera */
border-image:url(border.png) 30 30 round;
} 
```

[请在http://www.w3schools.com/cssref/css3_pr_border-image.asp](http://www.w3schools.com/cssref/css3_pr_border-image.asp)阅读有关边框图像的更多信息

请注意，IE 不支持border-image

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:23:09.063

您可以在悬停时使用背景图像，该图像将具有您要显示的两个边框。

```
a {
border-top:5px;
border-bottom:5px;
height:50px;
}
a:hover {
border:none;
background-image:url(image.jpg);
height:60px;/*normal height + missing borders*/
} 
```

您需要做的就是创建一个顶部边框在顶部，底部边框在底部的图像，其中元素的高度加上两个边框的高度。

此外，一旦您在悬停时移除边框，您需要调整元素的高度，因此它不会因为缺少边框而改变其高度。

真实高度 = 高度道具 + 边框 + 填充。

我不会为此使用边框图像，因为它尚未得到广泛支持。

# windows - 如何为 Windows 编译 hdparm？

> ID：14112884
> 
> 赞同：0
> 
> 时间：2013-01-01T18:06:11.350
> 
> 标签：windows, compilation, cygwin

我有最新的二进制文件（9.43）。如何在 Windows 上使用它？hdparm 的 cygwin 发行版对于我想做的事情来说太旧了（6.x）。有没有办法使用cygwin运行9.43版本的hdparm？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:45:58.800

不幸的是，您不能为 Windows 编译 hdparm。虽然 hdparm 随其源代码一起分发，但该代码专门用于 Linux。作者没有为其他操作系统编写代码，所以程序只能在 Linux 上运行。

您也许可以让程序在 Windows 上的 cygwin 下运行，但在我看来这是一项巨大的努力，因为 hdparm 可以直接使用 IOCTL 命令等访问硬件。

# r - R在定义函数后吐出变量

> ID：14112889
> 
> 赞同：-4
> 
> 时间：2013-01-01T18:07:07.017
> 
> 标签：r

我正在运行 osx mountain lion，最近一直在观察，每当我在 R 中定义一个函数后，它会在灰色文本中吐出变量的随机部分。

我正在运行最新版本的 R 并尝试重新安装它。

这是输出：[https ://dl.dropbox.com/u/22681355/output.tiff](https://dl.dropbox.com/u/22681355/output.tiff)

我不知道为什么会这样，有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T22:34:06.980

这是当前 Mac-GUI for R 版本中的一个间歇性错误。在邮件列表[R-Sig-Mac](http://grokbase.com/t/r/r-sig-mac/12bfeg2d47/phantom-text-in-console-with-r-2-15-2)上也进行了讨论。

# ios - coreplot 栏点击不工作

> ID：14112893
> 
> 赞同：2
> 
> 时间：2013-01-01T18:07:52.977
> 
> 标签：ios, ios5, ios6, core-plot, bar-chart

我已经从 Github 下载了这段代码：[https](https://github.com/gilthonweapps/CorePlotBarChartExample) ://github.com/gilthonweapps/CorePlotBarChartExample 。如何获取所选栏的 onTap？我正在使用以下代码：

```
#pragma mark - CPTBarPlotDelegate methods
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index {

     NSLog(@"barWasSelectedAtRecordIndex %d", index);
} 
```

但这不起作用（它无法识别水龙头）。请帮助。提前致谢，新年快乐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T00:37:37.767

将绘图设置`delegate`为您的条形图委托对象。这通常是视图控制器，但并非必须如此。

# c# - ASP.NET 自定义验证器 | 使用数据库检查唯一名称

> ID：14112898
> 
> 赞同：-1
> 
> 时间：2013-01-01T18:08:14.567
> 
> 标签：c#, asp.net, validation

我正在尝试创建一个自定义验证器来检查名称是否唯一。似乎不会执行服务器端验证。我怎样才能解决这个问题 ？

你可以在这里找到ASP代码和后面的代码：http: [//pastebin.com/biYqMT23](http://pastebin.com/biYqMT23)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:30:12.243

你可以试试我修改你的按钮：

```
 <asp:Button ID="ButtonAddCategory" runat="server" Text="Add" ValidationGroup="GroupAddCategory" CausesValidation="true" OnClick="ButtonAddCategory_Click" OnClientClick="return Page_ClientValidate('GroupAddCategory');" /> 
```

# asp.net-mvc - 在 IIS Express 中使用 ssl 时如何指定端口？

> ID：14112899
> 
> 赞同：1
> 
> 时间：2013-01-01T18:08:14.600
> 
> 标签：asp.net-mvc, ssl, iis-express

使用 vs2012、.net 4.5、mvc4。我的项目有部分在 ssl 下。我在 IIS Express 下运行我的项目。在项目属性中：

```
>SSL Enabled: True
>SSL Url: https://localhost:44300/
>URL: http://localhost:18000/ 
```

该项目运行良好。如果您按 F5，浏览器将打开该站点，`>http://localhost:18000/` 并且所有常规 (http) 页面都可以正常工作。但是，如果您点击登录页面的链接，例如，它受 ssl 保护（控制器中的 [RequireHttps]），它会尝试转到

```
>https://localhost/Account/LogOn 
```

这是不正确的，因此在 404 上失败。如果您手动转到

```
>https://localhost:44300/Account/LogOn 
```

登录页面工作正常。问题是：当需要 https 时，如何使事物转到正确的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:20:34.763

使用 rewrite 标记配置您的 web.config 文件，如下所示：

```
<rewrite>
  <rules>
    <rule name="Secure Account Controller" enabled="true" stopProcessing="true">
      <match url="^account" ignoreCase="true">
        <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
          <add input="{HTTPS}" pattern="off"/>
          <add input="{HTTP_HOST}" pattern="([^/:]*?):[^/]*?"/>
        </conditions>
        <action type="Redirect" url="https://{c:1}:44300{URL}"/>
      </match>
    </rule>
  </rules>
</rewrite> 
```

以上代码可以通过 IIS 面板轻松生成。

# ruby-on-rails - Rails，Jasmine-headless：规格仅在后卫内部运行

> ID：14112901
> 
> 赞同：3
> 
> 时间：2013-01-01T18:08:29.027
> 
> 标签：ruby-on-rails, jasmine, guard, jasmine-headless-webkit

我正在尝试设置 rails/backbone/jasmine 套件，但在运行 jasmine-headless-webkit 时遇到问题。

如果我通过警卫运行 jasmine 套件，它会通过，但如果我从控制台运行 jasmine-headless-webkit，我会得到：

> 2013-01-01 10:06:22.855 jasmine-webkit-specrunner[1809:707] *** 警告：NSView 类中的方法 userSpaceScaleFactor 在 10.7 及更高版本中已弃用。它不应该在新的应用程序中使用。使用 convertRectToBacking: 代替。SyntaxError：解析错误
> 
> 测试排序种子：--seed 5430

并且没有运行测试。

澄清一下，jasmine 套件不仅加载，而且通过 Guard 传递......但在 jasmine-headless-webkit 中一点也不快乐。任何想法表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T03:12:58.377

老问题，但如果有人仍在寻找无头运行 Jasmine 测试的最佳方法，请查看 Snapdragon 项目，可在此处获得：[https ://github.com/reachlocal/snapdragon](https://github.com/reachlocal/snapdragon)

# c# - 如何运行“git submodule init”以及如何“构建”程序

> ID：14112911
> 
> 赞同：0
> 
> 时间：2013-01-01T18:09:21.790
> 
> 标签：c#, git, visual-studio, github, steambot

我想将[SteamBot](https://github.com/Jessecar96/SteamBot)包含在我的项目中，但我已经为第一步感到困惑，即设置步骤。

来自 SteamBot 的自述文件：

> **第 0 步：**如果您最近刚刚克隆了这个存储库，那么您需要做一些事情。
> 
> 1.  运行`git submodule init`初始化子模块配置文件。
> 2.  运行`git submodule update`以拉取包含的子模块的最新版本（即 SteamKit2）。
> 3.  构建程序。由于 SteamKit2 是在 LGPL 下授权的，而 SteamBot 应该在 MIT 授权下发布，所以 SteamKit2 的代码不能包含在 SteamBot 中。这包括可执行文件。我们可能会在 GitHub 上提供下载。
> 4.  像往常一样继续。

我认为“克隆”意味着只需单击网站上的“在 Windows 中克隆”按钮，对吗？但我不知道如何“运行`git submodule init`”或如何“构建程序”。如果有人能具体告诉我该怎么做，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:37:42.277

好吧，由于您似乎使用的是 Windows 版*Github*并使用“在 Windows 中克隆”按钮克隆了 SteamBot，我可以告诉您，您不需要触摸子模块（或运行`git submodule init`或`... update`），因为*Windows 版 Github*已经完成当你克隆 repo 时为你准备的。这需要处理数字 1 和 2。

据我所知，SteamBot 是一个 Visual Studio 项目（有一个 *.csproj 和一个 *.sln 文件），因此构建它应该是在 Visual Studio 中打开它（即解决方案，*.sln 文件）的问题并单击*构建*按钮。

但是，如果您不知道构建的含义或它是如何为 C# 完成的（我猜您也正在将其用于您自己的项目），那么您可能应该在深入了解 C# 和 Visual Studio 之前更多地了解它。构建项目是您应该知道如何做的最基本的事情之一。

# image - Timthumb 图像缩略图未出现在 wordpress 网站上

> ID：14112912
> 
> 赞同：1
> 
> 时间：2013-01-01T18:09:29.310
> 
> 标签：image, wordpress, loading, woocommerce, timthumb

我正在尝试在[http://www.sketch360.com/store/home/](http://www.sketch360.com/store/home/)上建立一个页面，该页面应该显示特色产品和这些产品的缩略图。由于某种原因，图像没有在页面加载时显示，即使当您右键单击图像、单击下一个/上一个箭头或在 chrome 中打开“开发人员工具”时它们会立即出现。

当您执行上述任何操作以显示图像时，我注意到 css 中图像样式的状态从 display:none 变为 display:inline-block 。

我已经完成了[http://www.binarymoon.co.uk/2010/11/timthumb-hints-tips/](http://www.binarymoon.co.uk/2010/11/timthumb-hints-tips/)上的 timthumb 故障排除步骤，并根据这些说明更改了所有目录的权限。让这些图像显示在页面加载时的任何帮助将不胜感激。

图片显示在这个替代页面上（我相信也是使用 timthumb 方法）：[http](http://www.sketch360.com/store/shop/) ://www.sketch360.com/store/shop/ 但不是在第一页上（这将形成主页网站：[http](http://www.sketch360.com/store/home/) ://www.sketch360.com/store/home/ ）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T01:48:14.037

在将我的头撞在砖墙上几个小时之后，我发现了一个可用的更新脚本，它控制用于在 li 中显示这些图像的 bxSlider - 并且升级了缩小的脚本，问题似乎已经解决了 - 以防万一其他人也需要这方面的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T20:18:49.830

这不是 timthumb 或 wordpress 问题。看起来这是一个样式表/jQuery问题-覆盖图像的div（用于悬停时的突出显示）是不透明的并覆盖图像。有趣的是，当我“检查元素”时，图像都出现了。

仔细检查您的“过度默认”类的起始样式 - 确保它具有正确的不透明度或将背景颜色设置为透明。（您也可以尝试暂时删除它以证明此 div 确实是您的问题。）

# c++ - 未找到调试符号

> ID：14112913
> 
> 赞同：1
> 
> 时间：2013-01-01T18:09:36.207
> 
> 标签：c++, ubuntu, gdb, debug-symbols

> **可能重复：**
> [使用 gdb 进行调试 - 最佳实践](https://stackoverflow.com/questions/790407/debugging-using-gdb-best-practices)

我只有一个`.cpp`文件，我在 ubuntu 终端上用 g++ 编译它。

然后当我打电话时`gdb myProgram`，我得到了`no debugging symbols found`。

我需要单步调试代码。我不知道如何使它工作。

我知道如何使用`gdb`，但不确定如何编译我的`.cpp`文件，以便它有调试信息供 gdb 使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:10:45.767

您需要使用`-g`标志进行编译。看这里：

[http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)

# mysql - 尝试获取过去 1 小时内添加的所有记录的有序查询

> ID：14112917
> 
> 赞同：-3
> 
> 时间：2013-01-01T18:10:15.160
> 
> 标签：mysql, sql

我正在尝试使用 Web 服务器和 MySQL 创建聊天服务器。我希望它显示 1 小时内的最后一次聊天。现在我的查询是：

```
select * from chats where chat_id = 1 order by time 
```

其中时间是时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:17:07.000

尝试这个 ：

```
SELECT * FROM `chats` WHERE `chat_id` = 1 
AND `time` >= DATE_SUB(NOW(), INTERVAL 1 HOUR);
ORDER BY `time` 
```

# silverlight-4.0 - Silverlight 4 WCF Ria 服务 404 错误

> ID：14112918
> 
> 赞同：2
> 
> 时间：2013-01-01T18:10:22.320
> 
> 标签：silverlight-4.0, wcf-ria-services

我的 Silverlight 4 WCF RIA 服务项目在我的 VS 2010 开发机器上运行良好，也从 IIS 发布。但是当我将它部署到客户端机器（windows7）时，我所有的服务方法都返回 NotFound 错误。我整天尝试所有博客文章和论坛，但徒劳无功。来自提琴手的服务 url 在开发机器上返回，但在客户端 pc 上返回 404。我现在很沮丧。在我上次的试验中，我看到了手动创建物理 .svc 文件

```
<%@ ServiceHost Service="Fully.Qualified.NameOfYourService" Factory="System.ServiceModel.DomainServices.Hosting.DomainServiceHostFactory" %> 
```

但无法弄清楚如何实施，有人请拯救我的未来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:05:50.590

1.  安装 .NET 框架 4.0；
2.  安装 IIS7 并在“Windows 功能”中启用“Windows Communication Foundation HTTP 激活”；
3.  使用选项“SERVER=true”安装 WCF RIA 服务（您也可以跳过此步骤，为存储在 Web 应用程序的 bin 文件夹中的 System.ServiceModel.DomainServices.* dll 设置“Copy Local=True”）； **msiexec /i RIAServices.msi SERVER=true**
4.  使用“IIS 管理器”中的“添加应用程序”菜单指定应用程序名称、包含您的应用程序的部署目录和“ASP.NET v4.0”作为应用程序池；如果您收到“404 错误”，从“C:\Windows\Microsoft.NET\Framework\v4.0.30319”目录运行“aspnet_regiis.exe -i”也很有用；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:29:57.493

很简单，创建一个新网站 [托管您的应用程序]，然后从框架文件夹 [Framework for 32bit or Framework64 for 64bit applications] 运行“aspnet_regiis -i”。

查看新网站下的 HTTP 处理程序部分时，您将看到 .svc 文件的各种映射已创建[回头查看默认网站，这些还没有升级！]。这随后解决了 404 错误，并且 Fiddler 还确认 svc 文件被正确访问。

作为最后的配置，确保应用程序池设置为 ASP.NET 4 集成模式池并启用允许 32 位应用程序。

希望这可以帮助 ：-）

# portaudio - portaudio 视频/音频同步

> ID：14112920
> 
> 赞同：1
> 
> 时间：2013-01-01T18:10:39.860
> 
> 标签：portaudio

我使用 ffmpeg 解码视频/音频流并使用 portaudio 播放音频。我遇到了与 portaudio 的同步问题。我有一个像下面这样的功能，

```
double AudioPlayer::getPlaySec() const  
{  
    double const latency = Pa_GetStreamInfo( mPaStream )->outputLatency;  
    double const bytesPerSec = mSampleRate * Pa_GetSampleSize( mSampleFormat ) * mChannel;  
    double const playtime = mConsumedBytes / bytesPerSec;  
    return playtime - latency;  
} 
```

mCousumeBytes 是在 portaudio 回调函数中写入音频设备的字节数。我以为我可以根据字节数得到播放时间。实际上，当我执行使 cpu 忙碌的其他进程（如 open firefox ）时，音频会变得断断续续，但回调不会停止，因此 mConsumeBytes 超出预期，并且 getPlaySec 返回的时间大于播放时间。
我不知道这是怎么发生的。欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:45:56.327

延迟，在 PortAudio 中的定义有点模糊。就像您将数据放入缓冲区和您可以预期它播放之间的平均时间一样。这不是您想要用于此目的的东西。

相反，要查找设备的当前播放时间，您实际上可以使用[Pa_GetStreamTime](http://portaudio.com/docs/v19-doxydocs/portaudio_8h.html#a3d9c4cbda4e9f381b76f287c3de8a758)函数轮询设备。

您可能希望查看[此文档](http://www.portaudio.com/docs/portaudio_sync_acmc2003.pdf)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T19:16:01.423

我知道这是旧的。但是还是；PortAudio v19+ 可以为您提供自己的采样率。您应该将其用于音频同步，因为不同硬件之间的实际采样率播放可能不同。PortAudio 可能会尝试补偿（取决于实现）。如果您有漂移问题，请尝试使用它。

# php - 推特限速错误

> ID：14112921
> 
> 赞同：0
> 
> 时间：2013-01-01T18:10:40.400
> 
> 标签：php, twitter, twitter-oauth

我是 twitter API 的新手，开始使用[这个库](https://github.com/abraham/twitteroauth/)在 PHP 上工作。

```
// connecting to it and asking for user look up
$twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
$twitter->host = "https://api.twitter.com/1/";
$userInfo= $twitter->post( 'users/lookup', array('user_id' => "".$id)); // i am talking about this line 
```

在这里，我正在为我拥有的每个 id 调用用户/查找（我知道我可以将多个 id 用逗号分隔），但我以前不知道；任何方式我注意到我得到了 150 个呼叫的速率限制为什么我不能做更多？因为我使用的是 Oauth，所以应该有 350 次调用，这是正确的吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T03:18:51.303

您的代码中有很多问题。

1.  您正在使用 API 版本`1.0`。**`users/lookup`中不可用`1.0`**。它在`1.1`. 首先使用端点`https://api.twitter.com/1.1/`。
2.  **`user/lookup`不是`GET`请求`POST`**。请参阅[GET 用户/查找](https://dev.twitter.com/docs/api/1.1/get/users/lookup)。使用`$twitter->get()`方法。
3.  **每分钟`GET users/lookup``180``15`**窗口的**速率****限制。**那是`720`每小时。请参阅[REST API V1.1 限制](https://dev.twitter.com/docs/rate-limiting/1.1/limits)

你的最终代码应该是这样的，

```
$twitter->host = "https://api.twitter.com/1.1/";
$userInfo= $twitter->get( 'users/lookup', array('user_id' => "".$id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T23:51:21.563

@shiplu.mokadd.im [users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)也存在于 v 1.0 中。

我在使用 v1 时遇到了同样的问题，但最近似乎是一个[常见问题。](https://dev.twitter.com/discussions/13097)

# plone - 删除 Plone 的用户选项卡的“官方”方式是什么？

> ID：14112927
> 
> 赞同：1
> 
> 时间：2013-01-01T18:11:05.767
> 
> 标签：plone

我已经安装了运行良好的 Plone 4.2.1，但是该站点的访问者可以单击主菜单中的“用户”选项卡并直接搜索我所有的注册用户。当然，匿名访问者无法真正列出任何人，但我根本不想要这个功能。

什么是克隆方式：

*   从主菜单中删除用户选项卡？
*   停止 URL /Members 返回除 404 之外的任何内容？

我应该注意此功能的其他影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T22:36:42.803

`Users`仅显示该选项卡是因为根目录中有一个公开可见的`Members`文件夹（标题为`Users`）。

您有三个选项来处理默认值；将`Members`文件夹设为私有，将其完全删除，或删除`index_html`默认视图。

## 取消发布

您可以“取消发布”、撤回文件夹工作流程以使其私有化，然后匿名用户将被重定向到登录表单，而不是查看用户搜索表单：

![如何收回用户文件夹](../Images/c14ff3c38369ae2ba182eeb5b4b13919.png)

只需转到文件夹，单击工作流状态 ( `Published`) 并选择`Retract`。

## 删除

如果您不需要每个用户的文件夹，则可以`Members`完全删除该文件夹。您确实需要先确保未启用用户文件夹创建。转到控制面板（单击您的用户名，右上角，选择`Site Setup`）：

![控制面板链接](../Images/04cd3c78e05efb73856bbc5e113e4347.png)

选择`Security`：

![CP 中的安全条目](../Images/f3de8633d27af7e719a75965c46fe29e.png)

并确保`Enable User Folders`未选中。如果是，请取消选中它并保存设置。

现在只需删除`Members`文件夹；单击`Users`，找到`Actions`右侧的菜单，然后选择`Delete`：

![用户删除](../Images/58b4bab4cfdfc6b5a89f549c644cee69.png)

然后在弹出窗口中确认删除：

![用户删除确认](../Images/743e806889b0bc1d9190ca39916e5f4f.png)

删除意味着*所有*`/Members`用户在访问您的网站时都会收到 404 。

## 删除默认视图

该`Members`文件夹包含一个`index_html`提供用户表单搜索的对象。如果您只想删除此视图，则可以将其删除。如果您的`Members`文件夹仍然是公开的，访问者*可以*看到任何已创建的用户文件夹。

删除此视图需要转到 ZMI，Zope 管理界面，导航到`Members`文件夹并删除`index_html`那里的对象。

由于这不是真正推荐的操作过程，我将省略这部分的屏幕截图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T18:31:30.397

您可以只删除用户文件夹。

# wcf - MonoTouch 中仅支持消息中的“参数”元素错误

> ID：14112928
> 
> 赞同：1
> 
> 时间：2013-01-01T18:11:09.613
> 
> 标签：wcf, xamarin.ios, wcf-data-services

当我尝试将简单的 WCF 服务添加为 Web 参考时，我得到一个错误 MonoTouch 中只支持消息中的“参数”元素错误

我必须在服务上设置任何选项吗？

保罗

# asp.net-mvc - 如何更新选择下拉列表的项目（级联下拉列表）？

> ID：14112932
> 
> 赞同：1
> 
> 时间：2013-01-01T18:11:24.087
> 
> 标签：asp.net-mvc, multi-select, html.dropdownlistfor, cascadingdropdown, jquery-chosen

我使用[选择](http://harvesthq.github.com/chosen/)插件。当更改部分下拉列表时，我想刷新类别（选择）下拉列表。

这是视图：

```
@model CategoryInputModel

@Html.DropDownListFor(model => model.SectionId, ViewBag.SectionList as IEnumerable<SelectListItem>, new { id = "SectionId" })

@Html.ListBoxFor(model => model.CategoryIdSet, ViewBag.AllCategoryList as MultiSelectList
               , new
                 {
                   @class = "chzn-select",
                   data_placeholder = "Choose Categories...",
                   @style = "width : 500px;",
                   id = "CategoryIdSet"
                }) 
```

CategoryInputModel 就像：

```
public class CategoryInputModel
{
        public string Name { get; set; }
        public int SectionId{ get; set; }
        public List<int> CategoryIdSet{ get; set; }
} 
```

我可以为简单列表创建级联下拉列表，但无法为多选创建它。我试过这个：

```
<script type="text/javascript">
                    $(function () {
                        $("#SectionId").change(
                        function () {
                            loadLevelTwo(this);
                        });
                        loadLevelTwo($("#SectionId"));
                    });
                    function loadLevelTwo(selectList) {
                        var selectedId = $(selectList).val();
                        $.ajax(
                        {
                            url: "@Url.Action("GetCategoriesBySectionId", "Project")",
                            type: "GET",
                            data: { id: selectedId },
                            success: function (data) {
                                $("#CategoryIdSet").html($(data).html());
                            },
                            error: function (xhr) {
                                alert("Something went wrong, please try again");
                            }
                        });
                    }
                </script> 
```

在控制器中：

```
 public ActionResult GetCategoriesBySectionId(int id)
    {
        var result = MyService.GetCategoriesBySectionId(id);

        // **its problem to create partial view that return chosen dropdownlist I need**
    } 
```

如何创建级联选择下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:22:24.690

我认为您需要在 ajax 回调中添加更多内容。我用 done 替换了成功方法。试试这个，它对我有用：

```
 function loadLevelTwo(selectList) {
                    var selectedId = $(selectList).val();
                    $.ajax(
                    {
                        url: "@Url.Action("GetCategoriesBySectionId", "Project")",
                        type: "GET",
                        data: { id: selectedId },
                        error: function (xhr) {
                            alert("Something went wrong, please try again");
                        }
                    }).done(function (data) {
                        $("#CategoryIdSet").children().each(function (index, option) {
                            $(option).remove();
                        });

                        //blank option
                        var items = "<option selected value=\"\"></option>";

                        $.each(data,
                            function () {
                                items += "<option value=\"" + this[0] + "\">" + this[1] + "</option>";
                        });

                        $("#CategoryIdSet").html(items)
                        $("#CategoryIdSet").trigger("liszt:updated");
                        $("#CategoryIdSet").change();
                    });
                } 
```

控制器动作可能如下所示：

```
 public ActionResult GetCategoriesBySectionId(int id)
    {
        var result = MyService.GetCategoriesBySectionId(id);

        //build JSON.  
        var modelDataStore = from m in result 
                             select new[] { m.YourValueProperty.ToString(),
                                                m.YourTextProperty };

        return Json(modelDataStore, JsonRequestBehavior.AllowGet);
    } 
```

# html - 让链接决定选中的单选按钮

> ID：14112933
> 
> 赞同：1
> 
> 时间：2013-01-01T18:11:43.293
> 
> 标签：html, radio-button, checked

我在一个页面上有 3 个链接，当单击其中一个链接时，需要检查另一个页面上的单选按钮。

看起来像这样：

```
<a href="page.html?amount=1">Go 1</a>
<a href="page.html?amount=2">Go 2</a>
<a href="page.html?amount=3">Go 3</a> 
```

我在 page.html 上有一些需要检查的复选框。

```
<input type="radio" name="amount" value="1" />
<input type="radio" name="amount" value="2" />
<input type="radio" name="amount" value="3" /> 
```

单击 Go 2 时，需要选中复选框 2。谁知道需要写什么js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:25:48.497

```
<input type="radio" name="amount" value="1" /> 1 <br>
<input type="radio" name="amount" value="2" /> 2 <br>
<input type="radio" name="amount" value="3" /> 3 <br>

<script>
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    }

var am=getQueryVariable("amount");
var allElems = document.getElementsByName('amount');
for (i = 0; i < allElems.length; i++) {
    if (allElems[i].type == 'radio' && allElems[i].value ==am ) {
        allElems[i].checked = true;
    }
}
</script> 
```

参考：getQueryVariable() 函数取自[Here](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)。归功于@Dorian Gray

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:14:41.263

您需要使用 Javascript 获取查询字符串 - 有关如何执行此操作的大量信息，例如： [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

然后，您需要编写一些 Javascript 来选择单选按钮 - 再次，一个简单的搜索就是您的朋友： [javascript check radio buttons automatically](https://stackoverflow.com/questions/8762762/javascript-check-radio-buttons-automatically)

重要提示：使用搜索引擎 :)

# asp.net-mvc-4 - ASP.NET 登录查看编译错误

> ID：14112937
> 
> 赞同：0
> 
> 时间：2013-01-01T18:12:21.227
> 
> 标签：asp.net-mvc-4

我正在尝试调用登录表单，但收到此错误：

编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1674：“方法组”：在 using 语句中使用的类型必须隐式转换为“System.IDisposable”

源错误：

第 15 行：第 16 行：第 17 行：@using (Html.BeginForm) 第 18 行：{ 第 19 行：

这是我发生错误的登录视图的代码：

```
@model SimulareRestaurant.Models.LogOnValidator
@{
    Layout = null;
 }

 <h2>Logare</h2>
 <p>
  Please login. @Html.ActionLink("CreateNewAccount","Register") if you dont have one
 </p>

  @Html.ValidationSummary(true,"Login Failed. Please correct the possible mistakes")

  @using (Html.BeginForm)
  {

     <div>

     <fieldset >

        <legend>Informatii cont</legend>

        <div class="editor-label">
        @Html.LabelFor(m => m.NumeUtilizator)
        </div>

        <div class="editor-field">
        @Html.TextBoxFor(m => m.NumeUtilizator)
        @Html.ValidationMessageFor(m => m.NumeUtilizator)
        </div>

        <div class="editor-label">
        @Html.LabelFor(m => m.Parolă)
        </div>

        <div class="editor-field">
        @Html.TextBoxFor(m => m.Parolă)
        @Html.ValidationMessageFor(m => m.Parolă)
        </div>

        <p>
            <input type="submit" value="Logare" />
        </p>
    </fieldset>
</div> 
```

现在我已经在过去几天彻底搜索了网络，据我了解，在某些情况下，调用 Dispose() 方法可以解决问题，但我真的不明白这一点。这个特殊的错误很难找到，这就是我决定发表这篇文章的原因。如果这对你们来说太微不足道了，我很抱歉，我是 asp 和 oop 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:17:26.930

它应该是

```
@using (Html.BeginForm()) 
```

`BeginForm`您在方法调用后忘记了括号

# php - Joomla 所有菜单项链接到主页

> ID：14112939
> 
> 赞同：3
> 
> 时间：2013-01-01T18:12:42.307
> 
> 标签：php, joomla, joomla3.0

我遇到了一个奇怪的问题。当我是公众时，我的 joomla 不会显示任何内容，但每个链接上的主页都不会显示注册表单。网址正在更改，但显示的页面相同：主页！当我登录网站工作正常。同样在调试模式下站点正常工作。

我能做些什么？要做什么设置。提到我玩过缓存和会话设置，有可能搞砸了。

自从乞讨以来，我就开启了 SEF 的重写模式。

当前的设置：

CacHe 设置关闭 - 捕获已禁用 FILE 15 会话处理程序数据库

也有这个关于开发模式错误报告的通知，最多只有第二个

1.  严格标准： JCacheControllerPage::store() 的声明应与 /home/../public_html/libraries/joomla/cache/controller/page.php 中第 20 行的 JCacheController::store() 的声明兼容

2.  注意：未定义的属性：第 658 行 /home/../public_html/libraries/joomla/cache/cache.php 中的 JSite::$registeredurlparams

3.  严格标准：在第 661 行的 /home/../public_html/libraries/joomla/cache/cache.php 中从空值创建默认对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T01:25:04.617

只是为了笑声和踢球 - 在您的配置文件中 - 您的实时站点设置为您的主页 URL，还是空白？确保它应该是空白的。当 SEF 配置不正确时，我遇到了一些非常奇怪的事情。

# ios - NSUserDefaults 和 iCloud

> ID：14112942
> 
> 赞同：2
> 
> 时间：2013-01-01T18:12:59.843
> 
> 标签：ios, nsuserdefaults, sync, icloud

我的应用程序是我之前询问过的应用程序。它是一个 XML 解析器，它显示 XML 中的项目数，等于应用程序打开的天数。我的问题主要是这样的：我在 1.0 版中没有设置 iCloud。由于该应用程序的受欢迎程度，我很快将发布该应用程序的 iPad 版本，并且担心那些在 iPhone 上使用该应用程序一段时间的人现在将在 iPad 版本上重置回第 1 天。我在 GitHub 上找到[了 MKiCloudSync](https://github.com/MugunthKumar/MKiCloudSync)，想知道这是否可以很好地实现，以便应用程序始终在所有设备上保持同步？如果是这样，在应用程序的 1.1 版中添加它会自动与现有库同步，还是他们必须先更新 iPhone 版本，让它同步，然后再为 iPad 获取它？基本上只是希望它保持同步。

这是我用来存储 NSUserDefault 值的 AppDelegate 代码。虽然，一些 NSUserDefaults 可以在其他类中更改。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    sleep(3);

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (![defaults integerForKey:@"totalDays"]) {

        // if there is no value for the key, set it to 1
        [defaults setInteger:0 forKey:@"totalDays"];

    }
    if (![defaults objectForKey:@"currentDate"]) {
        [defaults setObject:@"32 01" forKey:@"currentDate"];
    }
    if (! [defaults boolForKey:@"marked"]) {
        [defaults setBool:NO forKey:@"marked"];

    }
    if (![defaults arrayForKey:@"checkedrows"]) {
        NSMutableArray *arr1  = [NSMutableArray arrayWithArray:[defaults arrayForKey:@"checkedrows"]];
    }
    NSDate *date = [NSDate date];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"dd MM"];

    NSString *dateString = [dateFormat stringFromDate:date];

    [dateFormat release];

    NSString *checkdate = [defaults objectForKey:@"currentDate"];

    if (![dateString isEqualToString:checkdate]) {
        NSInteger currentnumber = [defaults integerForKey:@"totalDays"];

        [defaults setObject:dateString forKey:@"currentDate"];
        [defaults setInteger:currentnumber+1 forKey:@"totalDays"];
    }

 [defaults synchronize];

    [window addSubview:tabBarController.view];
    [window makeKeyAndVisible];

    return YES;
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSLog(@"enteredfore");
    NSDate *date = [NSDate date];

    // format it
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"dd MM"];

    // convert it to a string
    NSString *dateString = [dateFormat stringFromDate:date];

    // free up memory
    [dateFormat release];

    NSString *checkdate = [defaults objectForKey:@"currentDate"];
    NSLog(@"hereitis%@", checkdate);

    if (![dateString isEqualToString:checkdate]) {
        NSInteger currentnumber = [defaults integerForKey:@"totalDays"];
        NSLog(@"The current number is %i", currentnumber);
        [[NSNotificationCenter defaultCenter] postNotificationName:@"EnteredForeground"
                                                            object:nil];
        [defaults setObject:dateString forKey:@"currentDate"];
        [defaults setInteger:currentnumber+1 forKey:@"totalDays"];
        [defaults synchronize];
    }

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:28:27.980

当您查看 MKiCloudSync 的源代码（实际上很短）时，您会看到它只是将整个用户默认字典存储在 iCloud 中，只要它发生任何变化。

每当 iCloud 中的任何内容发生变化时，它都会用 iCloud 中存储的内容覆盖所有本地用户默认设置。

没有冲突解决或类似的概念，它只会从上次更改它们的设备中获取所有值。对于您的用例，这基本上意味着 iPhone 上的现有数据很有可能被从新 iPad 版本推送到 iCloud 的初始（可能是空的）数据覆盖。

顺便说一句，你*永远不*应该调用`sleep`它`application:didFinishLaunchingWithOptions:`（基本上，它应该很少需要调用它，但这种方法特别糟糕，因为如果它没有足够快地完成，你的应用程序可能会被系统杀死）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:29:37.903

它在技术上可以正常工作，但结果可能很糟糕......应该有一些“冲突处理”/让一个设备成为主设备......

让我用一个例子来解释：

带有 app 1.0 的 iphone 正在设备 A 上运行并且已经使用了 50 天 => 不在乎 icloud

现在带有 app 1.1 的 ipad 运行了 5 天 => 将其设置写入 icloud

现在设备 A 的应用程序更新到 1.1 => 看到 icloud。需要合并更改...它不能只使用 icloud 内容，因为它会将设备 A 重置为新 ipad 保存的某个较早状态

# android - 获取列表视图行的列

> ID：14112943
> 
> 赞同：0
> 
> 时间：2013-01-01T18:13:02.473
> 
> 标签：android

如何获取列表视图行的列？

我有：listView.getItemIdAtPosition(info.position))

这将返回位置。也许我必须使用 getSelectedItem？

在我的 listView 中，我有：

*   _ID、名称、anotherColumn ...
*   1, 名字 1, x...
*   2，名字2，你...
*   3、姓名3、z...

我怎样才能得到第一列或第二列？每列都是一个TextView。我填写： new SimpleCursorAdapter(this, R.layout.list_cadenes, mCursor, FROM, TO);

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:16:48.483

> 如何获取列表视图行的列？

由于您使用的是 SimpleCursorAdapter，因此您可以随时调用`getCursor()`并使用`moveToPosition()`从现有光标中提取所有这些信息。

> 我有：listView.getItemIdAtPosition(info.position))
> 
> 这将返回位置。

`getItemIdAtPosition()``_id`应该返回与位置非常不同的主键。

> 也许我必须使用 getSelectedItem？

我建议使用 OnItemClickListener，当用户触摸一行并可以访问该行的布局、位置和 ID 时，它会立即被调用。

# php - PHP：cURL：不能同时登录和下载文件

> ID：14112947
> 
> 赞同：1
> 
> 时间：2013-01-01T18:13:25.650
> 
> 标签：php, curl

基本上，我有一个登录网站并下载文件的脚本。非常坦率的。不幸的是，我的代码中缺少一些阻止它正常工作的东西。

当我运行它时，我会返回一个输出到我的文件的 html 页面，这正是我在没有登录的情况下尝试访问文件链接时在浏览器中得到的内容；访问被拒绝，您必须登录等。

但是，如果我通过注释掉文件下载请求来自行运行脚本的第一部分，然后重新运行整个脚本，我就可以按我应该的方式下载文件，所以我知道它正在运行感觉。当我运行整个脚本时，它似乎不想让我登录。

```
// Log me in

curl_setopt($handle, CURLOPT_URL, $login_url); 
curl_setopt($handle, CURLOPT_REFERER, $admin_url);
curl_setopt($handle, CURLOPT_COOKIEJAR, $Cookie_Location);
curl_setopt($handle, CURLOPT_COOKIEFILE, $cookie); 
curl_setopt($handle, CURLOPT_TIMEOUT, 60); 
curl_setopt($handle, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, 1); 

// Grab the file

curl_setopt($handle, CURLOPT_URL, $csv_loc);
curl_setopt($handle, CURLOPT_FILE, $csv_handle); 

echo $response = curl_exec($handle);

curl_close($handle); 
```

所以我可以登录，然后重新运行脚本并下载文件，但我不能同时做这两个。我尝试了各种不同的附加 curl 选项，例如 COOKIEJAR 和 COOKIEFILE，以及 FOLLOWLOCATION 和 REFERER，这是我对我的代码为什么不起作用的唯一预感。我的“抓取文件”代码中的某些内容要么破坏了我的登录，要么表现得就像我没有登录一样。

编辑：已解决。

我决定包括解决方案，以便其他人避免我犯的同样错误。

我需要做的就是分开我的请求，就像这样；

```
// Log me in

curl_setopt($handle, CURLOPT_URL, $login_url); 
curl_setopt($handle, CURLOPT_REFERER, $admin_url);
curl_setopt($handle, CURLOPT_COOKIEJAR, $Cookie_Location);
curl_setopt($handle, CURLOPT_COOKIEFILE, $cookie); 
curl_setopt($handle, CURLOPT_TIMEOUT, 60); 
curl_setopt($handle, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, 1); 

echo $response = curl_exec($handle);

// Grab the file

curl_setopt($handle, CURLOPT_URL, $csv_loc);
curl_setopt($handle, CURLOPT_FILE, $csv_handle);

curl_exec($handle);

curl_close($handle); 
```

首先 curl_exec 将我登录到该站点，然后第二个获取并下载我的文件。然后我只是关闭手柄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T18:25:35.930

如果这正是您正在使用的代码，那么：

```
// Log me in
curl_setopt($handle, CURLOPT_URL, $login_url); 

// Grab the file
curl_setopt($handle, CURLOPT_URL, $csv_loc);

echo $response = curl_exec($handle);
curl_close($handle); 
```

您正在重新定义您的 URL。您不能在一个请求中向一个 URL（登录）和一个 GET（获取文件）发送 POST，您需要为此发送 2 个单独的请求。

**除非**您的登录表单立即将文件作为响应返回给您。

# android - 在运行时获取 Android 屏幕尺寸类型（drawable-small、drawable-normal 等）

> ID：14112949
> 
> 赞同：2
> 
> 时间：2013-01-01T18:14:05.437
> 
> 标签：android, android-resources

正如[开发者文档](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)中所解释的那样， Android 支持通过将它们放在单独的文件夹（drawable-small、drawable-normal、drawable-large 和 drawable-xlarge）中来为不同尺寸的屏幕设置不同的图像。

是否可以获得 Android 在运行时用于加载资源的屏幕“类型”？我需要记录这个变量以进行错误报告，如果我能知道哪个可绘制类型的文件夹系统正在使用它会很有帮助（类似于我如何通过查询 getResources().getDisplayMetrics 来判断它是 ldpi、mdpi、hdpi 还是 xhdpi （）。密度）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:15:59.120

> 是否可以获得 Android 在运行时用于加载资源的屏幕“类型”？

`getResources().getConfiguration()`给你一个`Configuration`对象，然后你可以从那里[检查`screenLayout`field](http://developer.android.com/reference/android/content/res/Configuration.html#screenLayout)。这会告诉您尺寸、长/不长和方向（LTR 或 RTL）。

# javascript - 在 Ember.js 中使用 classNameBindings 切换类名

> ID：14112952
> 
> 赞同：2
> 
> 时间：2013-01-01T18:14:26.967
> 
> 标签：javascript, ember.js, dom-events

我是 emberjs 的新手，我在理解 classNameBindings 的工作方式时遇到了一些麻烦。

这是我目前的设置 - [http://jsfiddle.net/inquen/AXza5/](http://jsfiddle.net/inquen/AXza5/)

（这是它应该如何工作：http: [//jsfiddle.net/inquen/N4WJS/](http://jsfiddle.net/inquen/N4WJS/)）

模板

```
<script type="text/x-handlebars">
<div class="main-container">
 <div class="doors">
 {{#view StandClear.DoorView class="left-door"}}<div class="door-window"></div>{{/view}}
 {{#view StandClear.DoorView class="right-door"}}<div class="door-window"></div>{{/view}}
</div>
<div class="door-closure-lamp"></div>
{{#view StandClear.DoorStateView}}
  Toggle Doors
{{/view}}
</div>
</script>​

StandClear = Ember.Application.create(); 
```

JavaScript

```
StandClear.doorController = Ember.Controller.create({
   doorsOpen: true,
   toggleDoors:function(e){
   this.doorsOpen = (this.doorsOpen === false) ? true : false; 
   console.log(this.doorsOpen);
 }
});

StandClear.DoorView = Ember.View.extend({
   tagName: 'div',
   classNames:['car-door'],
   classNameBindings: 'StandClear.doorController.doorsOpen',
})

StandClear.DoorStateView = Ember.View.extend({
   tagName: 'button',
   classNames:['door-controller'],
   click:function(e){
   StandClear.doorController.toggleDoors();
 }
}); 
```

类名绑定在页面加载时起作用，但在绑定到的值更改时不会更改。

我觉得我的代码也存在许多结构性问题，我也很感激对此的一些反馈。

# ruby - 如何在不利用其他 IP 地址的情况下从 Ruby 获取我机器的 IP 地址？

> ID：14112955
> 
> 赞同：27
> 
> 时间：2013-01-01T18:14:36.110
> 
> 标签：ruby, sockets, ip

我到处搜索，但他们的解决方案需要某种形式的 IP 地址。这是我找到的解决方案。

```
 require 'socket'
#METHOD 1
    ip = IPSocket.getaddress(Socket.gethostname)
    puts ip 

#METHOD 2
    host = Socket.gethostname
    puts host

#METHOD 3(uses Google's address)
    ip = UDPSocket.open {|s| s.connect("64.233.187.99", 1); s.addr.last}
    puts ip

#METHOD 4(uses gateway address)
    def local_ip
      orig, Socket.do_not_reverse_lookup = Socket.do_not_reverse_lookup, true  # turn off reverse DNS resolution temporarily

      UDPSocket.open do |s|
        s.connect '192.168.1.1', 1
        s.addr.last
      end
    ensure
      Socket.do_not_reverse_lookup = orig
    end

    ip=local_ip
    puts ip 
```

所有这些都需要某人的IP地址。有没有不使用别人IP地址的解决方案？最好是独立于平台的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-12-13T00:21:53.660

您正在寻找的解决方案不只是：

```
require 'socket'

addr_infos = Socket.ip_address_list 
```

由于一台机器可以有多个接口和多个 IP 地址，因此此方法返回一个[Addrinfo](http://ruby-doc.org/stdlib-2.0/libdoc/socket/rdoc/Addrinfo.html)数组。

您可以像这样获取确切的 IP 地址：

```
addr_infos.each do |addr_info|
  puts addr_info.ip_address
end 
```

您可以通过拒绝环回和私有地址来进一步过滤列表，因为它们通常不是您感兴趣的，如下所示：

```
addr_infos.reject( &:ipv4_loopback? )
          .reject( &:ipv6_loopback? )
          .reject( &:ipv4_private? ) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-09-07T10:19:09.893

这是我多年来一直在生产中使用的：

```
require 'socket'
ip = Socket.ip_address_list.detect{|intf| intf.ipv4_private?}
ip.ip_address 
```

效果很好；在 aws 和经典主机上测试

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-01T18:53:01.143

```
require 'socket'
Socket::getaddrinfo(Socket.gethostname,"echo",Socket::AF_INET)[0][3] 
```

实际上很像方法1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T19:26:24.620

由于没有主机的默认 ip 接口（实际上根本不需要任何 ip 接口），所有关于命名的假设都是模糊的，不一定成立。

返回的值`gethostname()`可以独立于任何 ip-setup 定义，因此它不需要根据可以解析为任何 ip-address 的主机名来反映有效主机。

从 POSIX 系统的 API 的角度来看，唯一可以测试 (ip-) 接口是否可用的可靠函数是 function `getifaddrs()`，它返回所有接口及其参数的列表。

看起来 Ruby 的当前 Socket 库似乎没有提供接口，[这种基于 (http://rubygems.org/gems/system-getifaddrs)](http://rubygems.org/gems/system-getifaddrs) gem 的方法似乎是唯一的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-24T18:31:28.307

解析`ip`命令的输出？

来自[https://gist.github.com/henriquemenezes/a99f13da957515023e78aea30d6c0a48](https://gist.github.com/henriquemenezes/a99f13da957515023e78aea30d6c0a48)

```
gw = `ip route show`[/default.*/][/\d+\.\d+\.\d+\.\d+/] 
```

或解析`ipconfig`命令的输出：[https ://stackoverflow.com/a/12632929/32453](https://stackoverflow.com/a/12632929/32453)

# c# - Irony 解析器中的表达式优先级

> ID：14112958
> 
> 赞同：3
> 
> 时间：2013-01-01T18:14:42.600
> 
> 标签：c#, parsing, expression, irony

考虑我的 vbscript 语法的这一部分

```
EXPR.Rule = BINARY_EXPR 
        | COMPARE_EXPR
        | AND_EXPR
        | OR_EXPR;

BINARY_EXPR.Rule = EXPR + BINARY_OP + EXPR + ReduceHere();
COMPARE_EXPR.Rule = EXPR + COMPARE_OP + EXPR + ReduceHere();
AND_EXPR.Rule = EXPR + "and" + EXPR;
OR_EXPR.Rule = EXPR + "or" + EXPR;

COMPARE_OP.Rule = ToTerm("=") | "<=" | ">=" | "<" | ">" | "<>";
BINARY_OP.Rule = ToTerm("+") | "&" | "^" | "-" | "*" | "/" | "\\";// | "=" | "<=" | ">=" | "<" | ">" | "<>" | "mod" | "and" | "or";

RegisterOperators(60, "^");
RegisterOperators(50, "*", "/", "\\", "mod");
RegisterOperators(40, "+", "-", "&");
RegisterOperators(30, "=", "<=", ">=", "<", ">", "<>");
RegisterOperators(20, "and", "or"); 
```

这个 vbscript 程序：

```
if 2=1+1 then x = 5 
```

它将 this 解析为`if (2=1)+1 then x = 5`而不是`if 2=(1+1) then x = 5`. 我`BINARY_EXPR`之前已经指定，`COMPARE_EXPR` 并且“+”具有更高的运算符优先级，所以我不知道如何告诉它应该首先寻找加法运算。我还能如何表达这一点，以便 Irony 以我想要的方式解析它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:23:05.530

我从未与 Irony 合作过，但如果它不提供该功能（或者如果您无法弄清楚它是如何工作的），您可以随时尝试对`EXPR`非终结符进行分层。

让我们仅以加法、减法、乘法、括号和比较为例：

```
EXPR0.Rule = EXPR1
           | EXPR1 + "=" + EXPR1
           ;
EXPR1.Rule = EXPR2
           | EXPR1 + "+" + EXPR1
           | EXPR1 + "-" + EXPR2
           ;
EXPR2.Rule = EXPR3
           | EXPR2 + "*" + EXPR2
           ;
EXPR3.Rule = "(" + EXPR0 + ")"
           | USEVARIABLE
           | LITERAL
           ; 
```

所有具有相同优先级的算子都存在于自己的层中。如果不一直运行到 ，它们的左侧或右侧就不能有较低优先级的运算符`EXPR3`，这提供了一个返回到 的循环`EXPR0`。

请注意，它的右侧`"-"`有一个。`EXPR2`这是因为它是一个[右结合运算符](http://en.wikipedia.org/wiki/Operator_associativity#Right-associativity_of_assignment_operators)，而`"+"`它是一个结合运算符。While`1 - 2 - 3`必须始终解释为`(1 - 2) - 3`,`1 + 2 + 3`可以同时解释为`(1 + 2) + 3`and `1 + (2 + 3)`。我对 VB 不够熟悉，无法说明 的关联性`"="`，因此我将其设为非关联。

同样，我不熟悉您使用的框架，因此语法可能不正确；）

# java - 将希伯来语字符插入 MySQL 表时获取问号

> ID：14112961
> 
> 赞同：5
> 
> 时间：2013-01-01T18:15:12.037
> 
> 标签：java, mysql, jsp, jdbc, hebrew

我正在使用 Netbeans 构建一个使用 Java、JSP 处理带有希伯来字段的数据库的 Web 应用程序。

DDL 如下：

```
String cityTable = "CREATE TABLE IF NOT EXISTS hebrew_test.table ("
                            +"id int(11) NOT NULL AUTO_INCREMENT,"
                            +"en varchar(30) NOT NULL,"
                            +"he varchar(30) COLLATE utf8_bin NOT NULL,"
                            +"PRIMARY KEY (id)"
                            +") ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=1;";
String insert = "INSERT INTO hebrew_test.table (en, he) VALUES ('A','a')";
String insert2 = "INSERT INTO hebrew_test.table (en, he) VALUES ('B','ב')";
String insert3 = "INSERT INTO hebrew_test.table (en, he) VALUES ('C','אבג')";

executeSQLCommand(cityTable);
executeSQLCommand(insert);
executeSQLCommand(insert2);
executeSQLCommand(insert3); 
```

我得到的输出表：

```
1   A   a
2   B   ?
3   C   ??? 
```

代替：

```
1   A   a
2   B   ב
3   C   אבג 
```

我试过[希伯来语在 Netbeans 中显示为问号](https://stackoverflow.com/questions/662146/hebrew-appears-as-question-marks-in-netbeans)，但这不是同一个问题。我得到了表中的问号。

`UTF8_bin`正如您在上面的代码中看到的那样，我还定义了要在其中的表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T02:37:40.707

您需要告诉 JDBC 驱动程序在将表示 SQL 查询的字符解码为字节时使用 UTF-8 编码。您可以通过向JDBC 连接 URL添加`useUnicode=yes`和查询参数来做到这一点。`characterEncoding=UTF-8`

```
jdbc:mysql://localhost:3306/db_name?useUnicode=yes&characterEncoding=UTF-8 
```

否则它将使用操作系统平台默认字符集。MySQL JDBC 驱动程序本身非常了解客户端（JDBC 代码运行的地方）和服务器端（DB 表所在的地方）使用的编码。数据库表使用的字符集未涵盖的任何字符都将替换为问号。

### 也可以看看：

*   [在 web.xml 中使用 CharacterEncodingFilter 进行 Spring 编码](https://stackoverflow.com/questions/5444693/spring-encoding-with-characterencodingfilter-in-web-xml/5444937#5444937)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T18:18:38.437

您将值直接包含在 SQL 中。这*总是*一个坏主意。使用`PreparedStatement`参数化 SQL，并将值设置为参数。它*可能*无法解决问题——但这绝对是首先要尝试的事情，因为无论如何您都应该使用参数化 SQL。（参数化 SQL 避免了[SQL 注入攻击](http://bobby-tables.com)，将代码与数据分离，避免了不必要的转换。）

接下来，您应该准确找出问题真正发生的位置：

*   确保您尝试插入的值是正确的。
*   检查您*检索*的值是否正确。
*   [使用Wireshark](http://wireshark.org)检查您的网络响应中的内容- 检查声明的编码*和*实际数据中的内容

检查值时，您应该遍历字符串中的每个字符并将值打印为 UTF-16 代码单元（使用`toCharArray()`或`charAt()`在循环中使用）。只是将值打印到控制台会留下太多其他问题的机会。

编辑：关于我为什么写这个作为答案的一点背景：

*   根据我的经验，将字符串值作为参数而不是直接包含在 SQL 中*有时*可以避免此类问题（出于安全原因等原因当然更好）。
*   根据我的经验，诊断问题出在数据库端还是 Web 端也很重要。最好通过记录所使用的确切 UTF-16 代码单元来完成此诊断，而不仅仅是字符串（否则在记录或控制台输出期间可能会出现进一步的编码问题）。
*   以我的经验，这样的问题很容易在插入*或*读取代码路径中发生。

作为推动 OP 前进的一种方式，所有这些都很重要，而不仅仅是在类似评论的请求中获取更多信息。

# javascript - 在线条动画之后向折线图数据点添加工具提示

> ID：14112966
> 
> 赞同：2
> 
> 时间：2013-01-01T18:15:49.457
> 
> 标签：javascript, d3.js, line

我有一个带有两条线的基本折线图。当我单击一个按钮时，两条线中的一条将绘制在图表上。

我使用 stroke-dasharray 来绘制线条。

有人知道我如何在我的行中添加工具提示吗？使用 stroke-dasharray 会更难吗？

这是我的代码。

```
var button=d3.select("#button");

//defines canvas (area in which graph is placed)    
var margin = {top: 30, right: 20, bottom: 50, left: 60},
width = 800 - margin.left - margin.right,
height = 700 - margin.top - margin.bottom;

var parseDate = d3.time.format("%d-%b-%y").parse;

//OUTPUT RANGE
var x = d3.time.scale()
    .range([0, width]);

//OUTPUT RANGE    
var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis().scale(x)
    .orient("bottom")
    .ticks(5);

var yAxis = d3.svg.axis().scale(y)
    .orient("left")
    .ticks(5);

//assigns coordinates for each piece of data    
var valueline = d3.svg.line()
    .interpolate("interpolation")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

//second line data
var valueline2 = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.open); });

//create area for 'area' below line    
var area = d3.svg.area()
    .x(function(d) { return x(d.date); })
    .y0(height)
    .y1(function(d) { return y(d.close); });    

//creates area to draw graph    
var svg = d3.select("body")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
//groups content    
.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

function make_x_axis() {
    return d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .ticks(5)
}

function make_y_axis() {
    return d3.svg.axis()
        .scale(y)
        .orient("left")
        .ticks(30)
}

// csv callback function
d3.csv("myData3.csv", function(data) {

    data.forEach(function(d) {
        d.date = parseDate(d.date);
        d.close = +d.close;
        d.open = +d.open;
    });

//INPUT DOMAINS
//.extent() returns min and max values of argument
x.domain(d3.extent(data, function(d) { return d.date; }));
//returns max of whichever set of data is bigger
y.domain([0, d3.max(data, function(d) { return Math.max(d.close, d.open); })]);

 d3.select("#button1").on("click", function(){ 
      var path = svg.append("path")   // Add the valueline path. 
          .attr("class", "line")
          .attr("d", valueline(data))
          .attr("stroke", "steelblue")
          .attr("stroke-width", "5")
          .attr("fill", "none");

  var totalLength = path.node().getTotalLength();

  path
    .attr("stroke-dasharray", totalLength + "30" * 30)
    .attr("stroke-dashoffset", totalLength)
    .transition()
      .duration(2000)
      .ease("linear")
      .attr("stroke-dashoffset", 0);

     })

 d3.select("#button2").on("click", function(){ 
      var path2 = svg.append("path")        // Add the valueline path. 
          .attr("class", "line2")
          .attr("d", valueline2(data))
          .attr("stroke", "steelblue")
          .attr("stroke-width", "5")
          .attr("fill", "none");

  var totalLength = path2.node().getTotalLength();

  path2
    .attr("stroke-dasharray", totalLength + "30" * 30)
    .attr("stroke-dashoffset", totalLength)
    .transition()
      .duration(2000)
      .ease("linear")
      .attr("stroke-dashoffset", 0)
     })       

svg.append("g") // Add the X Axis
    .attr("class", "x axis")
    //moves x axis to bottom of graph
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

//text label for x-axis    
svg.append("text") // text label for the x axis
    .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.bottom - 5 ) + ")")
    .style("text-anchor", "middle")
    .text("Date");

svg.append("g") // Add the Y Axis
    .attr("class", "y axis")
    .call(yAxis);

//text label for y-axis    
svg.append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 0 - margin.left)
    .attr("x",0 - (height / 2))
    //adds extra left padding as original y pos = 0
    .attr("dy", "1em")
    .style("text-anchor", "middle")
    .text("Value");

//adding a title to the graph
svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top / 2))
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("text-decoration", "underline")
    .text("Graph");

//draw x axis grid    
svg.append("g")
    .attr("class", "grid")
    .attr("transform", "translate(0," + height + ")")
    .call(make_x_axis()
    .tickSize(-height, 0, 0)
    .tickFormat("")
)

//draw y axis grid
svg.append("g")
    .attr("class", "grid")
    .call(make_y_axis()
    .tickSize(-width, 0, 0)
    .tickFormat("")
)

});<!--d3.csv close-->​ 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:34:55.997

添加工具提示的最简单方法是将元素附加`svg:title`到要为其设置工具提示的元素。当您将鼠标悬停在元素上时，它将由浏览器自动显示。它也适用于各种元素。

所以你的代码需要看起来像

```
var path = svg.append("path")   // Add the valueline path. 
      .attr("class", "line")
      .attr("d", valueline(data))
      .attr("stroke", "steelblue")
      .attr("stroke-width", "5")
      .attr("fill", "none")
      .append("title").text("whatever"); 
```

如果您需要更复杂的功能，您可以尝试例如[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)，它以类似的方式工作。

# c++ - 无法链接 Boost 线程库

> ID：14112967
> 
> 赞同：2
> 
> 时间：2013-01-01T18:15:56.530
> 
> 标签：c++, linux, boost, linker

我正在尝试在 Linux ( `.so`) 上编译一个动态库，用`C++`.

由于与 Microsoft Visual Studio 2008 存在一些兼容性问题，在库代码中，我通过 Boost 库处理多线程。

当我编译我的库时，我使用该`-lboost_thread`标志。

编译结束时没有错误，但似乎没有链接 Boost 库：

```
ldd myLib.so.1.0 
    linux-vdso.so.1 =>  (0x00007fffe81ff000)
    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f2e9ad43000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f2e9aa47000)
    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f2e9a830000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2e9a471000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f2e9b348000) 
```

此外，当我尝试在应用程序中加载我的库时，我收到此错误：

```
undefined symbol: _ZTIN5boost6detail16thread_data_baseE 
```

谁能给我一些提示？

请询问您是否需要更多详细信息。

谢谢你。

#

编辑：这就是我建立我的图书馆的方式

```
CC=g++ -c
CFLAGS=-I./acml530_amd64/ifort64_mp/include/ -I/usr/lib/jvm/java-7-oracle/include -I/usr/lib/jvm/java-7-oracle/include/linux
LFLAGS=-L./acml530_amd64/ifort64_mp/lib -lacml_mp -lboost_thread 
OUTPUT_DIR=./build/

./svdlibc/las2.o: ./svdlibc/las2.cpp
    $(CC) -c -w -fPIC -o $(OUTPUT_DIR)las2.o $< $(CFLAGS) $(LFLAGS)

./svdlibc/svdlib.o: ./svdlibc/svdlib.cpp
    $(CC) -c -w -fPIC -o $(OUTPUT_DIR)svdlib.o $< $(CFLAGS) $(LFLAGS)

./svdlibc/svdutil.o: ./svdlibc/svdutil.cpp
    $(CC) -c -w -fPIC -o $(OUTPUT_DIR)svdutil.o $< $(CFLAGS) $(LFLAGS)  

%.o: %.cpp
    $(CC) -c  -fPIC -o $(OUTPUT_DIR)$@ $< $(CFLAGS) $(LFLAGS)

compile_lib: Native.o Repository.o ArrayUtilTest.o FeatureToGene.o javaAnnotationItemWrapper.o javaAnnotationRetrieverWrapper.o javaDecompositionResponseWrapper.o javaPredictionResponseWrapper.o JavaRelationshipItemWrapper.o javaRelationshipRetrieverWrapper.o JavaRequestWrapper.o javaSimilarityRetrieverWrapper.o javaValidationResponseWrapper.o ./svdlibc/las2.o ./svdlibc/svdlib.o ./svdlibc/svdutil.o StopWatchUtil.o
    g++ -shared -lboost_thread  -lgomp -Wl,-soname,biocpp.so.1 -o biocpp.so.1.0 $(OUTPUT_DIR)*.o 
```

# uibutton - 保存 UIButton 的隐藏状态

> ID：14112976
> 
> 赞同：1
> 
> 时间：2013-01-01T18:17:24.857
> 
> 标签：uibutton, nsuserdefaults, uiswitch

我有一个 UISwitch，它在值更改时使用 if 语句隐藏或取消隐藏一些 UIButton。我希望在切换视图或退出应用程序时保存 UIButtons 的隐藏状态。我尝试使用 NSUserDefaults 但它没有保存，它只是恢复到我最初在 .storyboard 中设置的状态

.m 代码：

```
- (IBAction)buttonHidden:(id)sender {

NSUserDefaults *Defaults = [NSUserDefaults standardUserDefaults];
[Defaults setBool:china.hidden forKey:ChinaChanged];
[Defaults setBool:japan.hidden forKey:JapanChanged];
[Defaults setBool:french.hidden forKey:FrenchChanged];
[Defaults setBool:spanish.hidden forKey:SpanishChanged];
[Defaults synchronize];

} 
```

.m viewDidLoad 代码：

```
- (void)viewDidLoad {

[super viewDidLoad];

NSUserDefaults *Defaults = [NSUserDefaults standardUserDefaults];
china.hidden = [Defaults boolForKey:ChinaChanged];
japan.hidden = [Defaults boolForKey:JapanChanged];
french.hidden = [Defaults boolForKey:FrenchChanged];
spanish.hidden = [Defaults boolForKey:SpanishChanged];

} 
```

我不知道在哪里可以连接 IBAction 以使其工作。

这是我的 UISwitch 的 if 语句代码：

```
(IBAction)switchTheSwitch:(id)sender {
if (Languages.on) {
    china.hidden = NO;
    japan.hidden = NO;
    french.hidden = NO;
    spanish.hidden = NO;
}

else {
    china.hidden = YES;
    japan.hidden = YES;
    french.hidden = YES;
    spanish.hidden = YES;

    }
} 
```

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:01:42.560

我不确定我是否遵循，但对我来说，您似乎缺少的只是一个调用，`buttonHidden`以便实际保存默认值

做就是了

```
-(IBAction)switchTheSwitch:(id)sender {
    if (Languages.on) {
        china.hidden = NO;
        japan.hidden = NO;
        french.hidden = NO;
        spanish.hidden = NO;
    }
    else {
        china.hidden = YES;
        japan.hidden = YES;
        french.hidden = YES;
        spanish.hidden = YES;
    }
    [self buttonHidden:sender];
} 
```

# javascript - 仅使用 javascript 显示来自 Amazon S3 存储桶的图像

> ID：14112979
> 
> 赞同：2
> 
> 时间：2013-01-01T18:17:41.050
> 
> 标签：javascript, ajax, amazon-s3

假设：我在亚马逊 S3 存储桶中的不同文件夹中有数千张图像。我想让他们以幻灯片的形式访问未登录的用户，但我不想处理数据库和服务器性能不佳的问题（如果同时有太多用户），所以我想只使用 javascript .

问题是我应该将文件列表传递给客户端，因为当您尝试浏览存储桶时，我无法使用 XMLHttpRequest 来获取和解析 Amazon 提供的 xml 文件，因为（我希望）浏览页面应该位于在我的网络服务器上。我想我应该编写一些服务器端代码来创建，在每次上传/修改后，一个更新的文件列表与用户共享，但我不确定这是一个好主意。

有人可以建议我最好的方法吗？新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:53:55.497

可能的答案，告诉我你怎么看：亚马逊提供 ListBucket 操作[http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPListBucket.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/SOAPListBucket.html)

[我可以使用 max-keys 和 marker（用于分页）参数（例如：http: //download.terracotta.org/](http://download.terracotta.org/?max-keys=5) ? max-keys=5）选择一次获得多少个结果。例如，我将获得一个 xml 文件（如我所愿），我可以在本地使用“list.html”文件中的 js 解析该文件。然后，我可以将这个 list.html 文件（应该只打印图像数组的定义）包含在我的 web 服务器上的 slideshow.html 文件中的 iframe 中。

太脏了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:30:16.223

[Amazon S3 JavaScript API](http://code.google.com/p/s3js/wiki/APIDocumentation)有一个方法 bucket.list()将列出存储桶的内容。

# ruby-on-rails - 使用单表继承时是否可以在 Rails 3 中有动态 id 列

> ID：14112983
> 
> 赞同：0
> 
> 时间：2013-01-01T18:18:13.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, single-table-inheritance

我有一个 Change 模型，它利用具有以下属性的单表继承：

```
id
type    #this is a single table inheritance type field.
description
dynamic_id 
```

我还有两个子类，Race 是 Change 的子类，Workout 是 Race 的子类。

```
class Race < Change

end

class Workout < Race

end 
```

我有第四个名为 Track 的类，我想通过仅使用 Change 对象中的 dynamic_id 字段来创建以下四个关联。（即我没有将race_id 和锻炼ID 明确添加到Change 表中。相反，我想使用dynamic_id 作为Race 类的race_id，使用dynamic_id 作为Workout 类的锻炼ID）通过这样做，我将避免很多我的数据库中的 nil 字段。）

这是我正在尝试创建的四个关联。

1.  种族模型 - belongs_to :track
2.  锻炼模型 - belongs_to :track
3.  赛道模型 - has_many :races
4.  跟踪模型 - has_many :workouts

我一直在尝试通过使用 :class_name 和 :foreign_key 的关联来完成此操作，但我似乎无法使其正常工作。这真的可能吗。我意识到这可能不是最佳实践，但我仍然想看看它是否可行。感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:09:34.277

您正在寻找的是“多态关联”。您可以在 Rails 指南中找到更多信息：http: [//guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

您的情况有点特殊，因为您想将多态关联与 STI 一起使用。我记得这个组合有一个错误，但现在可以修复了。

我没有完全阅读它，但这篇博文似乎描述了这种情况：[http ://www.archonsystems.com/devblog/2011/12/20/rails-single-table-inheritance-with-polymorphic-association/](http://www.archonsystems.com/devblog/2011/12/20/rails-single-table-inheritance-with-polymorphic-association/)

我遇到的多态关联和 STI 的问题描述如下：[如果多态关联的类型列不指向 STI 的基本模型，为什么多态关联对 STI 不起作用？](https://stackoverflow.com/questions/9628610/why-polymorphic-association-doesnt-work-for-sti-if-type-column-of-the-polymorph)

# codeigniter - 在 codeigniter 中覆盖路由

> ID：14112988
> 
> 赞同：0
> 
> 时间：2013-01-01T18:19:01.900
> 
> 标签：codeigniter, url, redirect, routes

> **可能重复：**
> [CodeIgniter - 使用 $route['(:any)'] = 'pages/view/$1' 时如何使用其他控制器？](https://stackoverflow.com/questions/11023189/codeigniter-when-using-routeany-pages-view-1-how-to-use-other-con)

我正在使用 codeigniter 中的 url 缩短器/重定向 Web 应用程序，但我的路线遇到了问题。

我的第一条路线是：

```
$route['(:any)'] = "redirect/index/$1"; 
```

这是处理重定向的内容，因此 example.com/dwB 将转到重定向控制器。

在下面，我有一些路由覆盖了页面和其他控制器等。当我描述包括参数等在内的整个 url 时，它们工作正常，但我现在遇到了麻烦，因为我有一些动态 url，例如：

```
 example.com/stats/view/dwB 
```

或 facebook auth 响应等，我显然无法为其编写路线。我试过使用类似的东西：

```
 $route['stats/view/(:any)'] = "stats/view/$1"; 
```

但这些似乎都没有覆盖第一条路线。这是我的整个 routes.php 文件。

```
$route['(:any)'] = "redirect/index/$1";

$route['shorten/create'] = "shorten/create"; // overwrite the previous route

$route['stats/view/(:any)'] = "stats/view/$1"; // allow the stats controller to be used

$route['login'] = "auth/login"; // allow the login(auth) controller to be used
$route['register'] = "auth/register"; // allow the login(auth) controller to be used
$route['auth_social/fblogin'] = "auth_social/fblogin"; // allow the login(auth) controller    to be used
$route['dashboard'] = "dashboard"; // allow the login(auth) controller to be used
$route['auth/logout'] = "auth/logout"; // allow the login(auth) controller to be used
$route['auth'] = "auth/index"; // allow the login(auth) controller to be used

$route['default_controller'] = "pages";

$route['404_override'] = '404'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T18:28:05.643

正如我在评论中提到的，将您的“任何”路由放在自定义路由的末尾，如下所示：

```
$route['shorten/create'] = "shorten/create"; // overwrite the previous route

$route['stats/view/(:any)'] = "stats/view/$1"; // allow the stats controller to be used

$route['login'] = "auth/login"; // allow the login(auth) controller to be used
$route['register'] = "auth/register"; // allow the login(auth) controller to be used
$route['auth_social/fblogin'] = "auth_social/fblogin"; // allow the login(auth) controller    to be used
$route['dashboard'] = "dashboard"; // allow the login(auth) controller to be used
$route['auth/logout'] = "auth/logout"; // allow the login(auth) controller to be used
$route['auth'] = "auth/index"; // allow the login(auth) controller to be used

// Move "any" route down here...
$route['(:any)'] = "redirect/index/$1"; 
```

# javascript - 获取和设置 iframe 内容高度自动调整大小动态简单的解决方案扩展教程

> ID：14112989
> 
> 赞同：3
> 
> 时间：2013-01-01T18:19:04.217
> 
> 标签：javascript, html, iframe, resize, height

我正在使用这个脚本：[将 iframe 内容高度设置为动态自动调整大小](https://stackoverflow.com/questions/7024574/get-and-set-iframe-content-height-auto-resize-dynamically-easy-solution-expandin)，我只有 3 个 iframe，而这个脚本只适用于一个而不适用于 3，我该怎么办？

这是显示我页面中 iframe 的片段：

```
<script type='text/javascript'>

    function setIframeHeight(iframeId) {

        var ifDoc, ifRef = document.getElementById( iframeId );
        try {
            ifDoc = ifRef.contentWindow.document.documentElement;
        } catch (e) {
            try {
                ifDoc = ifRef.contentDocument.documentElement;
            } catch (ee) { } 
        }

        if (fDoc) {
            ifRef.height = 1;
            ifRef.height = ifDoc.scrollHeight;
       }

</script>

<iframe id="contentFrame" scrolling="no" frameborder="0" width="100%"
    src="http://ivomenezes.com/frames/home.php"
    onload="setIframeHeight('contentFrame')"> </iframe> 
```

# c# - 为什么我的程序不保存图像？

> ID：14112990
> 
> 赞同：0
> 
> 时间：2013-01-01T18:19:08.853
> 
> 标签：c#, image, save, kinect, kinect-sdk

我有一个程序，Kinect 获取图像并将其保存到用户指定的位置。我知道该程序会找到正确的文件夹，因为它会创建更多文件夹来保存不同类型的图像，并且将创建这些文件夹。我当前用于保存图像的代码（如下）适用于其他程序，那么是否有一些参数阻止它我不知道？提前致谢。

**保存图像**

```
using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
{
    if (colorFrame == null)
    {
        return;
    }

    byte[] pixels = new byte[sensor.ColorStream.FramePixelDataLength];

    //WriteableBitmap image = new WriteableBitmap(
    //     sensor.ColorStream.FrameWidth,
    //     sensor.ColorStream.FrameHeight, 96, 96,
    //     PixelFormats.Bgra32, null);

    colorFrame.CopyPixelDataTo(pixels);

    colorImage.WritePixels(new Int32Rect(0, 0, colorImage.PixelWidth,
                                         colorImage.PixelHeight),
                           pixels, colorImage.PixelWidth * 4, 0);
    //BitmapSource image = BitmapSource.Create(colorFrame.Width, colorFrame.Height,
    //                                         96, 96, PixelFormats.Bgr32, null,
    //                                         pixels, colorFrame.Width * 4);

    //image.WritePixels(new Int32Rect(0, 0, image.PixelWidth, image.PixelHeight),
    //                  pixels, image.PixelWidth * sizeof(int), 0);

    //video.Source = image;

    totalFrames++;
    BitmapEncoder encoder = new JpegBitmapEncoder();

    encoder.Frames.Add(BitmapFrame.Create(colorImage));

    //path = System.IO.Path.Combine("C:/", "Kinected", "Images");

    if (PersonDetected == true)
    {
        if (totalFrames % 10 == 0)
        {
            if (file_name != null && colorImage != null)
            {
                try
                {
                    using (FileStream fs = new FileStream(colorPath +
                           @"\Kinected Image " + time + ".jpg", FileMode.Create))
                    {
                        encoder.Save(fs);
                    }
                }
                catch (IOException)
                {
                    System.Windows.MessageBox.Show("Save Failed");
                }
            }
        }

        skeletonDeLbl.Content = "Skeleton Detected!";
    }

    if (PersonDetected == false) skeletonDeLbl.Content = "No Skeleton Detected.";
} 
```

**确定路径**

```
FolderBrowserDialog dialog = new FolderBrowserDialog();
dialog.Description =
    "Select which folder you want Kinected to keep all of its information/images in.";
DialogResult result = dialog.ShowDialog();

colorPath = dialog.SelectedPath + @"\Color Images";
depthPath = dialog.SelectedPath + @"\Depth Images";
facePath = dialog.SelectedPath + @"\Face Data";

if (!Directory.Exists(colorPath))
    Directory.CreateDirectory(colorPath);
if (!Directory.Exists(depthPath))
    Directory.CreateDirectory(depthPath);
if (!Directory.Exists(facePath))
    Directory.CreateDirectory(facePath);

System.Windows.MessageBox.Show(colorPath); 
```

**编辑**

原来只是空，但现在当它到达它说`file_name`的行时我得到了错误：`using (FileStream fs = new FilesStream(file_name, FileMode.Create))`

```
An unhandled exception of type 'System.NotSupportedException' occurred in mscorlib.dll

Additional information: The given path's format is not supported. 
```

为什么会这样？我使用的代码与 Microsoft 的演示完全相同，并且在那里运行良好。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T22:21:50.960

您应该使用以下代码将字符串组合成路径

```
colorPath = System.IO.Path.Combine(dialog.SelectedPath, "Color Images"); 
```

该`Combine`方法负责在必要时添加或删除反斜杠。

* * *

并且不要忘记使用调试器。您可以设置断点并检查变量并执行更多操作。

调试器是你最好的朋友！

* * *

**更新**

您还在文件名中使用了无效字符。此方法替换无效字符并将其他一些修复应用于文件名

```
/// <summary>
///   Replaces invalid characters in a file name by " ". Apply only to the filename.ext
///   part, not to the path part.
/// </summary>
/// <param name="fileName">A file name (not containing the path part) possibly
///   containing invalid characters.</param>
/// <returns>A valid file name.</returns>
public static string GetValidFileName(string fileName)
{
    string invalidChars = Regex.Escape(new string(Path.GetInvalidFileNameChars()));
    string s = Regex.Replace(fileName, "[" + invalidChars + "]", " ");
    s = Regex.Replace(s, @"\s\s+", " "); // Replace multiple spaces by one space.
    string fil = Path.GetFileNameWithoutExtension(s).Trim().Trim('.');
    string ext = Path.GetExtension(s).Trim().Trim('.');
    if (ext != "") {
        fil += "." + ext;
    }
    fil = fil.Replace(" .", ".");
    return fil == "." ? "" : fil;
} 
```

# python - Python：读取txt文件后的string.replace("\'","'")

> ID：14112991
> 
> 赞同：2
> 
> 时间：2013-01-01T18:19:27.457
> 
> 标签：python, string, python-3.x

当打开和读取包含标记 ' 的文件时（如单词 should not ），python 将其替换为 \' （最终为 should\'t ）。我尝试运行以下代码：

```
a=open("file.txt")
b=a.read()
b=b.replace("\'", "'") 
```

但是 b 在运行第三行后保持不变，可能是因为它读取“\'”就好像它是“'”。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T18:20:03.893

您需要将斜线加倍：

```
b=b.replace("\\'", "'") 
```

或使用`r""`原始字符串文字：

```
b=b.replace(r"\'", "'") 
```

如果没有双斜杠或原始字符串文字，则将`\'`解释为 espace 代码含义`'`。

请仔细检查您没有查看 python使用转义码*表示字符的字符串表示形式：* `'`

```
>>> '"' + "'"
'"\''
>>> print '"' + "'"
"' 
```

在上面的示例中，我创建了一个包含双引号和单引号字符 ( `"'`) 的字符串，Python 将其作为字符串表示形式回显给我。使用`print`打印实际的字符串内容而不是表示。请注意 Python 是如何在`'`此处为我转义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T19:58:59.360

“\'“ 是相同的 ”'”。反斜杠将 ' 转义，因此它不执行其特殊功能。如果您有一个单引号字符串，该功能很有用。例如，字符串 '"should\'t"' 打印为 "should't"。

```
Python 3.3.0 (default, Dec 22 2012, 21:02:07) 
[GCC 4.7.2] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> a = 'shouldn't'
  File "<stdin>", line 1
    a = 'shouldn't'
                 ^
SyntaxError: invalid syntax
>>> a = 'shouldn\'t'
>>> a
"shouldn't"
>>> a = '"shouldn\'t'
>>> a
'"shouldn\'t'
>>> print(a)
"shouldn't 
```

# android - 使用画布 Android 绘图

> ID：14112998
> 
> 赞同：3
> 
> 时间：2013-01-01T18:20:10.023
> 
> 标签：android, canvas, bitmap, drawing

现在我希望画布只绘制一种颜色。

```
public class AndroidTentaTestActivity extends Activity {

    private Bitmap bm;
    private Canvas c;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main);

        bm = Bitmap.createBitmap(100, 100, Config.ARGB_8888);
        c = new Canvas(bm);
        c.drawARGB(100, 0, 0, 150);
    }
} 
```

上面的代码是我到目前为止写的，显然是行不通的。我怀疑位图与我正在做的事情没有联系，但我不知道如何修复它。我如何能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-31T06:03:26.493

在 mPaint.setColor() 中更改所需的颜色。

```
public class AndroidTentaTestActivity extends AppCompatActivity {

MyView mv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mv = new MyView(this);
    mv.setDrawingCacheEnabled(true);
    setContentView(mv);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
}

private Paint mPaint;

@Override
public void onClick(View v) {

}

public class MyView extends View {

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    Context context;

    public MyView(Context c) {
        super(c);
        context = c;
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(0xFFFFFFFF);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 1;

    private void touch_start(float x, float y) {
        //showDialog();
        mPath.reset();
        mPath.moveTo(x, y);

        mX = x;
        mY = y;

    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
          //  mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);                       //2,2.old values

            mX = x;
            mY = y;
        }

    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);

        // kill this so we don't double draw
        mPath.reset();

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:

                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T09:27:53.667

```
LinearLayout ll = (LinearLayout) findViewById(R.id.rect);
Paint paint = new Paint();
paint.setColor(Color.parseColor("#CD5C5C"));
Bitmap bg = Bitmap.createBitmap(ll.getWidth(),ll.getHeight() , Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bg);
canvas.drawARGB(200, 0, 225, 255);
ll.setBackgroundDrawable(new BitmapDrawable(bg)); 
```