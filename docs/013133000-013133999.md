# StackOverflow 问答 13133000-13133999

# c++ - Mysql 5.5 LOAD DATA INFILE 权限

> ID：13133002
> 
> 赞同：4
> 
> 时间：2012-10-30T05:10:38.073
> 
> 标签：c++, mysql

**错误 此 MySQL 版本不允许使用的命令**

我在将一些 mysqlclient C++ 代码从 Mysql 5.1 迁移到 5.5（使用 soci）时遇到问题。C++ 部分不太相关——问题是编写一些 mysqlclient 代码，它可以在 MySQL 5.5 上成功执行 LOAD DATA INFILE。

这是我的笔记（LOAD DATA INFILE 失败，但正常查询是可以的）：

1.  下面的代码在 Mysql 5.1、gcc 4.6.1、Oneiric 上运行良好

2.  相同的代码在 Mysql 5.5、gcc 4.7.2、Quantal 上失败

3.  如果我从 mysql（命令行客户端）加载数据输入文件，它工作正常（我已经用 local-infile=1 更新了 my.cnf）

4.  mysql> 显示变量，如 '%local_infile%'; 结果打开

如果有一个 SOCI 或配置解决方案，那就太好了，但如果有人设法让它与 libmysqlclient 一起工作，那也很高兴知道......

* * *

```
#include <soci.h>
#include <mysql/soci-mysql.h>
#include <string>
#include <iostream>

using soci::use;

using namespace std;
using namespace soci;

main()
{
  string val =
    "mysql://"          +
    "host=127.0.0.1"    +
    " dbname=tmp_db"    +
    " user=root"        +
    " password=open_sasame";

    int sum;

    session sql( val );
    sql  << "SELECT 1+1", into( sum );
    cerr << "RESULT=" << sum << endl;     // works fine

    // NEXT LINE FAILS WITH:
    //   The used command is not allowed with this MySQL version
    sql  << "LOAD DATA LOCAL INFILE '/tmp/junk3.txt' INTO TABLE tmp_db.example_tbl FIELDS TERMINATED BY '|' LINES TERMINATED BY '\\n'";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:05:09.833

答案是，我们需要下面这行代码：

```
mysql_options( &mysql, MYSQL_OPT_LOCAL_INFILE, 0 ); 
```

插入`mysql_init()`和之间`mysql_real_connect()`。

下面是一段 C 代码供参考。请注意，可以使用这行代码修补 SOCI 的 mysql 后端以使其工作。

**在 Mysql 5.5、gcc 4.7.2、Quantal 上测试并运行。**

```
#include <mysql.h>
#include <stdio.h>

main()
{
  MYSQL mysql;

  mysql_init( &mysql );
  mysql_options( &mysql, MYSQL_OPT_LOCAL_INFILE, 0 );
  if ( !mysql_real_connect( &mysql,"127.0.0.1","root","open_sasame","tmp_db",0,NULL,0 ))
  {
    fprintf(stderr, "Failed to connect to database: Error: %s\n",
      mysql_error( &mysql ));
  }

  if ( mysql_query( &mysql, "LOAD DATA LOCAL INFILE '/tmp/junk4.txt' "
    "INTO TABLE tmp_db.example_tbl FIELDS TERMINATED BY '|' "
    "LINES TERMINATED BY '\\n'" ))
  {
    fprintf( stderr, "ERROR DURING LOAD DATA LOCAL INFILE\n" );
  }

  mysql_close( &mysql );
} 
```

# linux - 堆栈上存储的 nasm 程序集限制

> ID：13133005
> 
> 赞同：0
> 
> 时间：2012-10-30T05:10:51.080
> 
> 标签：linux, assembly, stack, nasm

我正在编写一个程序来打印一个 32 位数字，并且我正在考虑将每个数字存储在堆栈中，以利用其后进先出功能。这就产生了一个问题，我可以在堆栈上存储 32 位数字吗？

我的问题是，我可以在堆栈中存储多少位信息？我可以压入堆栈的东西的数量限制是多少？我可以存储 64 位数字吗？128？多个任意长度？

提前致谢，

赖莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:15:18.883

稍微取决于操作系统，更多取决于您使用的链接器，但您应该没问题。默认情况下分配一兆字节或更多的堆栈是很常见的，因此 128 字节不算什么。只要确保在返回之前重置堆栈指针，一切都会好起来的。

如果你发现你需要的比默认的多，你通常也可以告诉链接器分配一个特定大小的堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:29:16.217

它实际上并没有`nasm`规定这一点，更多的是您使用的链接器。`nasm`所做的只是创建可以链接在一起的目标文件。

如果您使用`ld`Linux 的链接器，您很可能会发现您的默认堆栈是 2M。

所以，不，32 字节并不会真正对此产生巨大影响，即使你用完了堆栈，你也可以使用类似的东西`ld --stack 4194304`来提升它。

# android - 使用 200 多个标记提高地图视图的性能

> ID：13133011
> 
> 赞同：0
> 
> 时间：2012-10-30T05:11:20.883
> 
> 标签：android, performance, google-maps, android-mapview

我在地图上有 3 种类型的叠加层。1）有一种具有简单标记的叠加层。并点击覆盖我显示弹出。2）其他类型的覆盖包含画布绘图。和这些叠加层的 onTouch 事件，我们必须在地图上显示包含位图绘制的第三种叠加层。还有第三种叠加的点击事件。

因此，由于繁重的计算和大量的画布绘制，mapview 的性能下降。

[我已经从https://github.com/staroud-android/OverlayManager](https://github.com/staroud-android/OverlayManager)浏览了 Overlaymanager 库。但它没有帮助我。

有什么方法可以满足我的高性能要求吗？

我还需要建议 Polaris 地图库可以帮助我获得更好的性能？[https://github.com/cyrilmottier/Polaris](https://github.com/cyrilmottier/Polaris)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:22:49.313

发生的事情是`MapView`每次添加`GeoPoint`. 尝试将此添加到您的代码中：

在你循环完`GeoPoints`这段代码之后

```
itemizedOverlay.populateNow(); 
```

并将您的 itemizedOverlay 更改为如下所示：

```
public void addOverlay(OverlayItem overlay) {
    m_overlays.add(overlay);
        }
public void populateNow()
{
    populate(); 
}

@Override
protected OverlayItem createItem(int i) {
    return m_overlays.get(i);
}

@Override
public int size() {
    return m_overlays.size();
} 
```

# ios - 如何创建带有删除线文本的 UILabel？

> ID：13133014
> 
> 赞同：139
> 
> 时间：2012-10-30T05:11:40.780
> 
> 标签：ios, swift, cocoa-touch, uilabel, strikethrough

我想创建一个`UILabel`文本是这样的

![在此处输入图像描述](../Images/bb6579e878122cd7a7b0a80b3cabddac.png)

我怎样才能做到这一点？当文本很小时，行也应该很小。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-10-30T05:29:30.413

**SWIFT 5 更新代码**

```
let attributeString: NSMutableAttributedString = NSMutableAttributedString(string: "Your Text")
    attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: 2, range: NSRange(location: 0, length: attributeString.length)) 
```

然后：

```
yourLabel.attributedText = attributeString 
```

**要使字符串的某些部分罢工，然后提供范围**

```
let somePartStringRange = (yourStringHere as NSString).range(of: "Text")
attributeString.addAttribute(NSStrikethroughStyleAttributeName, value: 2, range: somePartStringRange) 
```

* * *

**Objective-C**

在**iOS 6.0 >** `UILabel`支持`NSAttributedString`

```
NSMutableAttributedString *attributeString = [[NSMutableAttributedString alloc] initWithString:@"Your String here"];
[attributeString addAttribute:NSStrikethroughStyleAttributeName
                        value:@2
                        range:NSMakeRange(0, [attributeString length])]; 
```

**迅速**

```
let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: "Your String here")
attributeString.addAttribute(NSStrikethroughStyleAttributeName, value: 2, range: NSMakeRange(0, attributeString.length)) 
```

**定义**：

```
- (void)addAttribute:(NSString *)name value:(id)value range:(NSRange)aRange 
```

`Parameters List:`

**name**：指定属性名称的字符串。属性键可以由另一个框架提供，也可以是您定义的自定义键。有关在何处查找系统提供的属性键的信息，请参阅 NSAttributedString 类参考中的概述部分。

**value**：与 name 关联的属性值。

**aRange**：指定属性/值对适用的字符范围。

然后

```
yourLabel.attributedText = attributeString; 
```

* * *

因为`lesser than iOS 6.0 versions`你需`3-rd party component`要这样做。其中一个是[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)，另一个是[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-09-14T03:09:33.213

在 Swift 中，使用单删除线样式：

```
let attributedText = NSAttributedString(
    string: "Label Text",
    attributes: [.strikethroughStyle: NSUnderlineStyle.single.rawValue]
)
label.attributedText = attributedText 
```

其他删除线样式（**请记住使用 .rawValue**）：

*   `.none`
*   `.single`
*   `.thick`
*   `.double`

删除线模式（与样式进行 OR-ed）：

*   `.patternDot`
*   `.patternDash`
*   `.patternDashDot`
*   `.patternDashDotDot`

指定删除线仅应用于单词（而不是空格）：

*   `.byWord`

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-01-27T10:24:59.863

我更喜欢`NSAttributedString`而不是`NSMutableAttributedString`这个简单的案例：

```
NSAttributedString * title =
    [[NSAttributedString alloc] initWithString:@"$198"
                                    attributes:@{NSStrikethroughStyleAttributeName:@(NSUnderlineStyleSingle)}];
[label setAttributedText:title]; 
```

* * *

用于指定属性字符串的`NSUnderlineStyleAttributeName`和属性的常量：`NSStrikethroughStyleAttributeName`

```
typedef enum : NSInteger {  
  NSUnderlineStyleNone = 0x00,  
  NSUnderlineStyleSingle = 0x01,  
  NSUnderlineStyleThick = 0x02,  
  NSUnderlineStyleDouble = 0x09,  
  NSUnderlinePatternSolid = 0x0000,  
  NSUnderlinePatternDot = 0x0100,  
  NSUnderlinePatternDash = 0x0200,  
  NSUnderlinePatternDashDot = 0x0300,  
  NSUnderlinePatternDashDotDot = 0x0400,  
  NSUnderlineByWord = 0x8000  
} NSUnderlineStyle; 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-05-07T13:32:25.827

Swift 5.0 中的删除线

```
let attributeString =  NSMutableAttributedString(string: "Your Text")
attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle,
                                     value: NSUnderlineStyle.single.rawValue,
                                         range: NSMakeRange(0, attributeString.length))
self.yourLabel.attributedText = attributeString 
```

它对我来说就像一种魅力。

使用它作为扩展

```
extension String {
    func strikeThrough() -> NSAttributedString {
        let attributeString =  NSMutableAttributedString(string: self)
        attributeString.addAttribute(
            NSAttributedString.Key.strikethroughStyle,
               value: NSUnderlineStyle.single.rawValue,
                   range:NSMakeRange(0,attributeString.length))
        return attributeString
    }
} 
```

像这样打电话

```
myLabel.attributedText = "my string".strikeThrough() 
```

删除线启用/禁用的 UILabel 扩展。

```
extension UILabel {

func strikeThrough(_ isStrikeThrough:Bool) {
    if isStrikeThrough {
        if let lblText = self.text {
            let attributeString =  NSMutableAttributedString(string: lblText)
            attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: NSUnderlineStyle.single.rawValue, range: NSMakeRange(0,attributeString.length))
            self.attributedText = attributeString
        }
    } else {
        if let attributedStringText = self.attributedText {
            let txt = attributedStringText.string
            self.attributedText = nil
            self.text = txt
            return
        }
    }
    }
} 
```

像这样使用它：

```
 yourLabel.strikeThrough(btn.isSelected) // true OR false 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2015-01-25T22:34:19.660

**SWIFT代码**

```
let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: "Your Text")
    attributeString.addAttribute(NSStrikethroughStyleAttributeName, value: 2, range: NSMakeRange(0, attributeString.length)) 
```

然后：

```
yourLabel.attributedText = attributeString 
```

感谢[王子的回答](https://stackoverflow.com/a/13133178/1311093)；）

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-12-08T06:43:24.307

**斯威夫特 4**

```
 let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: "Your Text Goes Here")
    attributeString.addAttribute(NSAttributedStringKey.strikethroughStyle, value: NSUnderlineStyle.styleSingle.rawValue, range: NSMakeRange(0, attributeString.length))
    self.lbl_productPrice.attributedText = attributeString 
```

其他方法是使用字符串扩展
**扩展**

```
extension String{
    func strikeThrough()->NSAttributedString{
        let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: self)
        attributeString.addAttribute(NSAttributedStringKey.strikethroughStyle, value: NSUnderlineStyle.styleSingle.rawValue, range: NSMakeRange(0, attributeString.length))
        return attributeString
    }
} 
```

**调用函数：**像这样使用它

```
testUILabel.attributedText = "Your Text Goes Here!".strikeThrough() 
```

**归功于@Yahya** *- 2017 年 12 月更新*
**归功于 @kuzdu** *- 2018 年 8 月更新*

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-12-25T12:36:06.460

在 Swift iOS 中删除 UILabel 文本。请试试这个它对我有用

```
let attributedString = NSMutableAttributedString(string:"12345")
                      attributedString.addAttribute(NSAttributedStringKey.baselineOffset, value: 0, range: NSMakeRange(0, attributedString.length))
                      attributedString.addAttribute(NSAttributedStringKey.strikethroughStyle, value: NSNumber(value: NSUnderlineStyle.styleThick.rawValue), range: NSMakeRange(0, attributedString.length))
                      attributedString.addAttribute(NSAttributedStringKey.strikethroughColor, value: UIColor.gray, range: NSMakeRange(0, attributedString.length))

 yourLabel.attributedText = attributedString 
```

您可以更改“删除线样式”，例如 styleSingle、styleThick、styleDouble [![在此处输入图像描述](../Images/e42d2d7022be8f42c3372229ad615637.png)](https://i.stack.imgur.com/OUbNH.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-10-30T05:21:39.653

您可以使用 NSMutableAttributedString 在 IOS 6 中执行此操作。

```
NSMutableAttributedString *attString=[[NSMutableAttributedString alloc]initWithString:@"$198"];
[attString addAttribute:NSStrikethroughStyleAttributeName value:[NSNumber numberWithInt:2] range:NSMakeRange(0,[attString length])];
yourLabel.attributedText = attString; 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-07-25T08:02:30.887

**斯威夫特 5**

```
extension String {

  /// Apply strike font on text
  func strikeThrough() -> NSAttributedString {
    let attributeString = NSMutableAttributedString(string: self)
    attributeString.addAttribute(
      NSAttributedString.Key.strikethroughStyle,
      value: 1,
      range: NSRange(location: 0, length: attributeString.length))

      return attributeString
     }
   } 
```

例子：

```
someLabel.attributedText = someText.strikeThrough() 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-06-07T18:47:34.190

对于任何想在 tableview 单元格 (Swift) 中执行此操作的人，您必须像这样设置 .attributeText：

```
override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {
    let cell = tableView.dequeueReusableCellWithIdentifier("TheCell")!

    let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: message)
    attributeString.addAttribute(NSStrikethroughStyleAttributeName, value: 2, range: NSMakeRange(0, attributeString.length))

    cell.textLabel?.attributedText =  attributeString

    return cell
    } 
```

如果要删除删除线，请执行此操作，否则它会一直存在！：

```
cell.textLabel?.attributedText =  nil 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-10-30T08:59:45.337

**斯威夫特 4.2**

```
let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: product.price)

attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: NSUnderlineStyle.single.rawValue, range: NSMakeRange(0, attributeString.length))

lblPrice.attributedText = attributeString 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-04-22T10:54:52.277

我可能会迟到。

无论如何，我知道`NSMutableAttributedString`但最近我用稍微不同的方法实现了相同的功能。

*   我添加了高度为 1 的 UIView。
*   将 UIView 的前导和尾随约束与标签的前导和尾随约束匹配
*   在标签的中心对齐 UIView

完成上述所有步骤后，我的标签、UIView 及其约束如下图所示。

[![在此处输入图像描述](../Images/7dd2a6d9b2aa2774d0e9958263450341.png)](https://i.stack.imgur.com/R8WtV.png)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-04-30T09:35:16.187

Swift 5 - 短版

```
let attributedText = NSAttributedString(
    string: "Label Text",
    attributes: [.strikethroughStyle: NSUnderlineStyle.single.rawValue]
)

yourLabel.attributedText = attributedText 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-05-06T14:12:57.743

**使用下面的代码**

```
NSString* strPrice = @"£399.95";

NSMutableAttributedString *titleString = [[NSMutableAttributedString alloc] initWithString:strPrice];

[finalString addAttribute: NSStrikethroughStyleAttributeName value:[NSNumber numberWithInteger: NSUnderlineStyleSingle] range: NSMakeRange(0, [titleString length])];
self.lblOldPrice.attributedText = finalString; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-07-02T17:33:20.967

将文本属性更改为属性并选择文本并右键单击以获取字体属性。单击删除线。 ![截屏](../Images/a3806d4d7a3870471a1944c2aab1baca.png)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-05-10T07:34:41.713

**斯威夫特 4 和 5**

```
extension NSAttributedString {

    /// Returns a new instance of NSAttributedString with same contents and attributes with strike through added.
     /// - Parameter style: value for style you wish to assign to the text.
     /// - Returns: a new instance of NSAttributedString with given strike through.
     func withStrikeThrough(_ style: Int = 1) -> NSAttributedString {
         let attributedString = NSMutableAttributedString(attributedString: self)
         attributedString.addAttribute(.strikethroughStyle,
                                       value: style,
                                       range: NSRange(location: 0, length: string.count))
         return NSAttributedString(attributedString: attributedString)
     }
} 
```

**例子**

```
let example = NSAttributedString(string: "440").withStrikeThrough(1)
myLabel.attributedText = example 
```

**结果**

[![在此处输入图像描述](../Images/29b9622cef328667f2986749e22b4e9e.png)](https://i.stack.imgur.com/d5vSY.png)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-08-21T13:44:47.743

在 iOS 10.3 上，通过将 NSBaselineOffsetAttributeName 添加到属性字符串中来呈现删除线修复存在问题，如此处所述，带回删除线。覆盖 drawText:in: 可能会很慢，尤其是在 Collection View 或 Table View Cells 上。

一个溶胶 - 添加视图以渲染线条。

第二个解决方案 -

```
attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: 2, range: NSMakeRange(0, attributeString.length))
attributeString.addAttribute(NSAttributedString.Key.baselineOffset, value: 2, range: NSMakeRange(0, attributeString.length))``` 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-09-10T15:30:28.570

对于那些面临多行文字罢工问题的人

```
 let attributedString = NSMutableAttributedString(string: item.name!)
    //necessary if UILabel text is multilines
    attributedString.addAttribute(NSBaselineOffsetAttributeName, value: 0, range: NSMakeRange(0, attributedString.length))
     attributedString.addAttribute(NSStrikethroughStyleAttributeName, value: NSNumber(value: NSUnderlineStyle.styleSingle.rawValue), range: NSMakeRange(0, attributedString.length))
    attributedString.addAttribute(NSStrikethroughColorAttributeName, value: UIColor.darkGray, range: NSMakeRange(0, attributedString.length))

    cell.lblName.attributedText = attributedString 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-12-26T07:44:28.950

**创建字符串扩展并添加以下方法**

```
static func makeSlashText(_ text:String) -> NSAttributedString {

 let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: text)
        attributeString.addAttribute(NSStrikethroughStyleAttributeName, value: 2, range: NSMakeRange(0, attributeString.length))

return attributeString 

} 
```

然后像这样使用你的标签

```
yourLabel.attributedText = String.makeSlashText("Hello World!") 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-11T14:55:05.143

这是您可以在 Swift 4 中使用的，因为 NSStrikethroughStyleAttributeName 已更改为 NSAttributedStringKey.strikethroughStyle

```
let attributeString: NSMutableAttributedString =  NSMutableAttributedString(string: "Your Text")

attributeString.addAttribute(NSAttributedStringKey.strikethroughStyle, value: 2, range: NSMakeRange(0, attributeString.length))

self.lbl.attributedText = attributeString 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-19T15:53:39.580

**Swift5 UILabel 扩展**。删除删除线有时不起作用。在这种情况下使用此代码。

```
extension UILabel {
    func strikeThrough(_ isStrikeThrough: Bool = true) {
        guard let text = self.text else {
            return
        }

        if isStrikeThrough {
            let attributeString =  NSMutableAttributedString(string: text)
            attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: NSUnderlineStyle.single.rawValue, range: NSMakeRange(0,attributeString.length))
            self.attributedText = attributeString
        } else {
            let attributeString =  NSMutableAttributedString(string: text)
            attributeString.addAttribute(NSAttributedString.Key.strikethroughStyle, value: [], range: NSMakeRange(0,attributeString.length))
            self.attributedText = attributeString
        }
    }
} 
```

# machine-learning - 如何为棋盘游戏（wizwoz）结果创建评估函数

> ID：13133016
> 
> 赞同：0
> 
> 时间：2012-10-30T05:11:58.247
> 
> 标签：machine-learning, artificial-intelligence, game-theory, evaluation-function

游戏名为 wizwoz：

两个玩家，红色（称为 r）和金色（称为 g）最初选择两个值 n 和 k。创建一个 n × n 的棋盘，其中 k“r”和 k“g”随机放置在棋盘上。从玩家 r 开始，每个玩家将他/她的字母（玩家 r 为“r”，付款人 g 为“g”）放在棋盘上的一个空方格中。棋盘填满后，每个玩家的分数等于棋盘上用该玩家颜色填充的最大连接区域（其中连接区域是一个区域中的任何两个方格都存在仅由 N/S/E 组成的路径/W 移动）。得分最高的玩家获胜，并获得他/她的得分与其他玩家得分之间的差额。下面显示了两个已完成游戏的示例，其中列出了每个玩家的最大连接区域。

![在此处输入图像描述](../Images/43365150ebbaa70f52455acf3b3e217e.png)

我正在编写 alpha-beta 修剪算法并坚持使用评估函数。

有什么帮助吗？最好使用伪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:16:03.570

从一个非常简单的评估函数开始。例如，只使用最大组件的当前大小。在你让人工智能工作之后，你可以担心调整评估启发式。

这是示例伪代码（未经测试）

```
components = {k:set([k]) for k in board}
def contract(k1, k2):
    if color(k1) != color(k2):
        return
    new = components[k1]
    if k2 not in new:
        new.union_update(components[k2])
        for x in components[k2]:
            components[x] = new

for x,y:
    contract(board[x,y], board[x,y+1])
    contract(board[x,y], board[x+1,y])

return max(map(len, components)) 
```

# java - JAVA JNI C 调试器

> ID：13133022
> 
> 赞同：4
> 
> 时间：2012-10-30T05:12:43.227
> 
> 标签：java, c, java-native-interface

是否有任何调试器可以帮助调试 Java JNI 程序以及 C 库？

我应该能够在 Java 中从 static void main 开始调试程序并继续调试并在本机 c 函数中放置断点，然后在控制从 C 转移到 Java 后继续在 Java 中调试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:47:06.823

Java 虚拟机调试器与本机代码调试器非常不同。目前还没有这样成熟的解决方案，因为一个调试器能够无缝地从 Java 步进到本机代码并返回。虽然这是一个非常棘手的问题，使得一些聪明的人试图开发这样的解决方案，但毫无疑问，其中涉及到大量无法想象的问题。我个人是通过以下方式做到的：

1.  在调试模式下启动您的 Java 代码并在您感兴趣的第一个本地调用处放置一个断点。您甚至可以实现一个静态本地调用，它不会做任何重要的事情，但可以让您尽快中断。
2.  启动本机调试器。*这绝对可以是 Eclipse 的同一个实例*，有两个先决条件：您安装了 CDT 并且您的本机代码以某种方式编译，CDT 可以理解调试信息。附加到`java(w.exe)`运行 Java 代码的进程。在本机代码中放置一个断点。
3.  每当您需要转换 JNI 接口时，尽可能（或需要）将断点放置在调用入口/出口附近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T18:51:21.480

我发现在 IntelliJ IDEA 调试器中运行 java 代码并设置一个非常早的断点允许将 CLion 的调试器附加到进程（之后`sudo echo 0 > /proc/sys/kernel/yama/ptrace_scope`）。然后，每个 IDE 将停止 JVM 并在 Java 或 JNI Native 代码中的相应刹车点处提升它的窗口，并检查内存中曾经停止过上下文的对象。这带来了相当流畅的体验。

# objective-c - 在 ios 6 中播放视频

> ID：13133023
> 
> 赞同：2
> 
> 时间：2012-10-30T05:12:46.710
> 
> 标签：objective-c, ios, ios6

我想在 ios 6 中播放视频。我使用的是 Xcode 4.5。我在下面编写代码但出现错误

```
 Test Demo[736:14003] [MPAVController] Autoplay: Disabling autoplay for pause
 Test Demo[736:14003] [MPAVController] Autoplay: Disabling autoplay
 Test Demo[736:14003] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0) 
```

和我的代码

```
NSString *videoPath = [[NSBundle mainBundle] pathForResource:@"TestVideo" ofType:@"m4v"];
NSURL *streamURL = [NSURL fileURLWithPath:videoPath];

MPMoviePlayerController *player =
[[MPMoviePlayerController alloc] initWithContentURL: streamURL];
[player prepareToPlay];
[player.view setFrame: self.view.bounds];  // player's frame must match parent's
[self.view addSubview: player.view];
// ...
[player play];` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T07:48:06.143

```
NSString *url   =   [[NSBundle mainBundle] pathForResource:@"santaMessage" ofType:@"mp4"];

moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];

[self.view addSubview:moviePlayer.view];

moviePlayer.fullscreen = YES;

moviePlayer.allowsAirPlay = YES;

[moviePlayer play]; 
```

///这就像一个魅力

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:16:13.853

您的错误可能有很多问题。

1）为你设置一个属性`MPMoviePlayerController`并合成它。如果您的 MPMoviePlayerController 在播放之前释放，则可能会发生这种情况。

2）添加此代码`player.moviePlayer.movieSourceType = MPMovieSourceTypeFile;`

3）根据[文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)，`.m4v`未提及扩展名。

4）下面的屏幕截图将帮助您了解支持的格式。

![在此处输入图像描述](../Images/076b810bda2305c74d515da86133f9c6.png)

# php - 将 php 文件数据显示为 .tpl (Smarty)

> ID：13133025
> 
> 赞同：0
> 
> 时间：2012-10-30T05:13:19.510
> 
> 标签：php, smarty

我有`demo.php`文件，在那里我创建了一个从数据库中获取数据的函数：

前任：

```
function display() {
    $sql = "SELECT * FROM user WHERE id=" . $_POST['id'];
    $r=mysql_query($sql);
    $row=mysql_fetch_row($r);
} 
```

现在，我有`user.tpl`文件，我想将`$row`来自上述显示函数的数据显示到该 .tpl 文件中。

我完全是 smarty 的新手，对它不太了解，也不知道它的语法。

我怎样才能做到这一点。

需要帮助....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:28:06.810

```
function display() {
    $sql = "SELECT * FROM user WHERE id=" . $_POST['id'];
    $r   = mysql_query($sql);
    $row = mysql_fetch_row($r);
    return $row;
} 
```

将您的结果变量分配给`user.tpl`

```
$this->mysmarty->assign('resArr',$resVar); 
$this->mysmarty->display('user.tpl'); 
```

使用[`foreach`](http://www.smarty.net/docs/en/language.function.foreach.tpl)您可以`user.tpl`像这样显示结果

```
<ul>
{foreach $resArr as $value}
   <li>{$value@key}: {$value}</li>
{/foreach}
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:28:26.997

```
function display() {
        $sql = "SELECT * FROM user WHERE id=" . $_POST['id'];
        $r=mysql_query($sql);
        $row=mysql_fetch_row($r);
    } 
```

要在 smarty 模板中获取值，您需要使用[**assign**](http://www.smarty.net/docsv2/en/api.assign.tpl)方法

```
$smarty->assign('rows',$rows); 
```

在您的模板文件中，您可以使用**[foreach 函数](http://www.smarty.net/docsv2/en/language.function.foreach)**循环遍历数组

```
{foreach from=$rows item="row"}
   {$row.name}<br/>
   {$row.Id}    
{/foreach} 
```

# file-io - Mono for Android 外部（SD 卡）文件 IO

> ID：13133032
> 
> 赞同：2
> 
> 时间：2012-10-30T05:14:22.353
> 
> 标签：file-io, xamarin.android, android-sdcard, xamarin

我正在尝试创建我的第一个 Mono for Android 应用程序，并且在尝试读取或写入 sdcard 时出现权限错误。所以我切换到了 SanityTests，xamarin-monodroid-samples-d76baf3。

Example_WorkingWithAudio RecordAudio.cs 在内部存储上成功运行。它还**具有在清单中应用的 WRITE_EXTERNAL_STORAGE 权限**；所以我然后取消注释这些行：

```
Java.IO.File sdDir = Android.OS.Environment.GetExternalStoragePublicDirectory(Android.OS.Environment.DirectoryMusic);
filePath = sdDir + "/" + "testAudio.mp3"; 
```

因此代码现在变为：

```
Java.IO.File sdDir = Android.OS.Environment.GetExternalStoragePublicDirectory(Android.OS.Environment.DirectoryMusic);
filePath = sdDir + "/" + "testAudio.mp3";
Java.IO.File myFile = new Java.IO.File(filePath);
myFile.CreateNewFile(); 
```

**我在运行 Android 2.3.4 的索尼爱立信 Xperia Mini Pro 上执行此操作。**

当执行到达 CreateNewFile() 行时，filePath 的值为：“/mnt/sdcard/Music/testAudio.mp3”。

然后抛出此错误：

```
Java.IO.IOException: Exception of type 'Java.IO.IOException' was thrown.
  at Android.Runtime.JNIEnv.CallBooleanMethod (IntPtr jobject, IntPtr jmethod) [0x00023] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.6-

branch/632e6ddf/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.g.cs:156 
  at Java.IO.File.CreateNewFile () [0x0003e] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.6-

branch/632e6ddf/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Java.IO.File.cs:771 
  at Example_WorkingWithAudio.RecordAudio.StartRecorder () [0x00044] in c:\Users\Matt\Downloads\xamarin-monodroid-samples-d76baf3\xamarin-monodroid-samples-

d76baf3\Example_WorkingWithAudio\Example_WorkingWithAudio\RecordAudio.cs:35 
  --- End of managed exception stack trace ---
java.io.IOException: Permission denied
    at java.io.File.createNewFileImpl(Native Method)
    at java.io.File.createNewFile(File.java:1257)
    at mono.android.view.View_OnClickListenerImplementor.n_onClick(Native Method)
    at mono.android.view.View_OnClickListenerImplementor.onClick(View_OnClickListenerImplementor.java:29)
    at android.view.View.performClick(View.java:2552)
    at android.view.View$PerformClick.run(View.java:9229)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method) 
```

问题是什么？

仅供参考，我也尝试使用 .Net 类：

```
FileStream fileStream = File.Create(filePath); 
```

（其中 filePath 仍然是“/mnt/sdcard/Music/testAudio.mp3”）

但是该行给出了例外：

```
System.IO.DirectoryNotFoundException: Could not find a part of the path "/mnt/sdcard/Music/testAudio.mp3".
  at System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options) [0x00000] in <filename unknown>:0
  at System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize) [0x00000] in <filename unknown>:0
  at System.IO.File.Create (System.String path, Int32 bufferSize) [0x00000] in <filename unknown>:0
  at System.IO.File.Create (System.String path) [0x00000] in <filename unknown>:0
  at Example_WorkingWithAudio.RecordAudio.StartRecorder () [0x0001d] in c:\Users\Matt\Downloads\xamarin-monodroid-samples-d76baf3\xamarin-monodroid-samples-d76baf3\Example_WorkingWithAudio\Example_WorkingWithAudio\RecordAudio.cs:33 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T10:23:05.320

这就是我在 Mono for Android 中所做的。

```
var path = Android.OS.Environment.ExternalStorageDirectory.AbsolutePath;

path = Path.Combine(path, "testaudio.mp3"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T21:14:14.097

我遇到了同样的异常，最后通过执行以下操作解决了它：

1.  为模拟器创建一个 sdcard 文件。我用一个[简单的教程](http://miguelzakharia.tumblr.com/post/38488118927/how-to-create-an-sdcard-file-for-the-android-emulator)写了一篇文章，描述了如何做到这一点。
2.  使用下面的代码（C#），我能够将文件写入 sdcard：

    ```
    string pathToFile = Path.Combine(Android.OS.Environment.ExternalStorageDirectory.AbsolutePath, _fileName);
    using(var fileStream = new FileStream(pathToFile, FileMode.Append, FileAccess.Write, FileShare.None))
    {
        fileStream.Write(Encoding.ASCII.GetBytes(message), 0, Encoding.ASCII.GetByteCount(message));
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T21:32:43.103

如果您尝试**使用 xamarin 表单从服务器下载或获取图像，**您可以使用以下命令：

```
File.WriteAllBytes("myimage.png",
new WebClient().DownloadData(http://www.dotnetperls.com/net.png)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T06:02:22.347

试试这个路径：

```
String filePath = Environment.getExternalStorageDirectory() + "/testAudio.mp3";
File mFile = new File(filePath); 
```

# php - 如何在php中将特殊字体编码为JSON？

> ID：13133049
> 
> 赞同：2
> 
> 时间：2012-10-30T05:16:13.010
> 
> 标签：php, arrays, json

我有这样的数组

```
Array
(
    [0] => Array
        (
            [image] => http://domain/photogal/tues/image/2012octo30big11.jpg
            [news] => 'ssN ^mj³ ho¡nÂ dm¼nse¯nb tamUÂ<br>
    '
        )
) 
```

我将此数组编码为json并得到这样的结果

```
 [{"image":"http:\/\/domain\/photogal\/tues\/image\/2012octo30big11.jpg",
"news":"'ssN ^mj"}] 
```

几乎所有新闻都不在 json 字符串中。json 如何编码到这个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:28:40.833

您可以尝试将 UTF-8 标头放在任何其他 PHP 代码之前吗？

```
header('Content-Type: text/html; charset=utf-8'); 
```

在我的测试中，您的数组已转换为：

```
 {"image":"http:\/\/domain\/photogal\/tues\/image\/2012octo30big11.jpg",
"news":"'ssN ^mj\u00b3 ho\u00a1n\u00c2 dm\u00bcnse\u00afnb tamU\u00c2
    \r\n\t'"} 
```

之后使用 json_decode 恢复到原始状态而不会丢失任何符号..

# makefile - makefile-compile-back-and-forth - 跟进

> ID：13133051
> 
> 赞同：0
> 
> 时间：2012-10-30T05:16:15.170
> 
> 标签：makefile, fortran

继续我之前的问题 [Makefile - 来回编译](https://stackoverflow.com/questions/12893738/makefile-compiling-back-and-forth)

我尝试创建一个 Makefile。两个子目录是 HAM-src 和 GFS-src。但是，我仍然无法构建它。我将我的 Makefile 粘贴在下面：

```
export
SHELL = /bin/sh

top_srcdir=./Temp
objdir=$(top_srcdir)/obj
bindir=${exec_prefix}/bin
cfssrcdir=${top_srcdir}/GFS-src
hamsrcdir=${top_srcdir}/HAM-src
incdir=${top_srcdir}/include
exec=${bindir}/esm_gfs-ham_v0
PROG=$(exec)

LDR = mpxlf90_r -qsmp=noauto
FFLAG90  = $(OPTS90) $(FINCS) -qfree=f90 -NS2048 -qmoddir=$(objdir) -I$(objdir)
FFLAGM = -NS2048 -qfixed -qmoddir=$(objdir) -I$(objdir)

F77     = mpxlf95
F90     = mpxlf95
F90_x   = xlf90_r
F90_r   = mpxlf95_r

SRCHAM = $(hamsrcdir)/ham_control.f90 $(hamsrcdir)/mo_filename.f90 \
         $(hamsrcdir)/ham_namelist.f90 $(hamsrcdir)/ham_submodel.f90 \
         $(hamsrcdir)/ham_submodel_diag.f90 $(hamsrcdir)/ham_ham.f90

SRCGFS_MOD=$(cfssrcdir)/machine.f $(cfssrcdir)/resol_def.f \
           $(cfssrcdir)/omegas.f $(cfssrcdir)/cnvcld_v.f

OBJGFS_MOD = $(patsubst $(cfssrcdir)/%.f,$(objdir)/%.o,$(SRCGFS_MOD))
OBJHAM = $(patsubst $(hamsrcdir)/%.f90,$(objdir)/%.o,$(SRCHAM))

.SUFFIXES: $(SUFFIXES) .f90 .f .o

all: $(PROG)

$(PROG): $(OBJHAM) $(OBJGFS_MOD)
    $(LDR) $(CFS_LDFLAGS) -o $@ $(OBJGFS_MOD) $(OBJHAM) $(CFS_LIBS) -L$(LDFLAGS)

$(objdir)/%.o: $(cfssrcdir)/%.f
    $(F77) $(FFLAGS) -c $< -o $@

$(objdir)/%.o: $(hamsrcdir)/%.f90
    $(F90_r) $(F90FLAGS) -c $< -o $@
########## dependencies for $(hamsrcdir) ###########
ham_filename.o: ham_control.o
ham_namelist.o: ham_control.o ham_filename.o
ham_submodel.o: ham_control.o ham_namelist.o $(objdir)/resol_def.o
ham_submodel_diag.o: ham_submodel.o
########## dependencies for $(cfssrcdir) ###########
$(objdir)/omegas.o:    $(cfssrcdir)/omegas.f
        $(F77) $(FFLAGM) -c $(cfssrcdir)/omegas.f -o $@

$(objdir)/cnvcld_v.o:    $(cfssrcdir)/cnvcld_v.f
        $(F77) $(FFLAGM) -c $(cfssrcdir)/cnvcld_v.f -o $@ 
```

错误：

```
mpxlf95_r -q64 -O3 -qstrict -qMAXMEM=-1 -qarch=auto -qtune=auto -qcache=auto -qfloat=fltint -qsuffix=cpp=f90 -lessl_r -lmass -lmassv -I./Temp/include -I./Temp/HAM-src -qmoddir=./Temp/obj -I./Temp/obj -c ./Temp/HAM-src/ham_namelist.f90 -o ./Temp/obj/ham_namelist.o
** ham_namelist   === End of Compilation 1 ===
1501-510  Compilation successful for file ham_namelist.f90.

mpxlf95_r -q64 -O3 -qstrict -qMAXMEM=-1 -qarch=auto -qtune=auto -qcache=auto -qfloat=fltint -qsuffix=cpp=f90 -lessl_r -lmass -lmassv -I./Temp/include -./Temp/HAM-src -qmoddir=./Temp/obj -I./Temp/obj -c ./Temp/HAM-src/ham_submodel.f90 -o ./Temp/obj/ham_submodel.o
"./Temp/HAM-src/ham_submodel.f90", line 425.7: 1514-219 (S) Unable to access module symbol file for module resol_def. Check path and file permissions of file. Use association not done for this module.
1501-511  Compilation failed for file ham_submodel.f90.
gmake: *** [/gpfs1/home/cccrmod/ham_expt_dec11/regrid_test/CFS-HAM/SORC_CFS-HAM/Temp/obj/ham_submodel.o] Error 1 
```

为什么 makefile 在遇到依赖项时不编译 resol_def.f 模块？

另一个问题 - 我的 makefile 无法正常工作。它按照定义源的顺序进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:08:01.253

这很难解开（一个*最小的，完整的例子*真的会有所帮助），但我建议你改变这个

```
ham_submodel.o: ham_control.o ham_namelist.o $(objdir)/resol_def.o 
```

对此

```
$(objdir)/ham_submodel.o: ham_control.o ham_namelist.o $(objdir)/resol_def.o 
```

看看这是否解决了第一个问题。我不明白你问题的最后一行（“另一个问题......”）。

# image - 发送电子邮件包括像 Outlook 那样的图像吗？

> ID：13133052
> 
> 赞同：0
> 
> 时间：2012-10-30T05:16:42.513
> 
> 标签：image, email, outlook, jakarta-mail

我正在学习 javamail API。要发送包含图像的电子邮件，我使用 imgPart.setHeader ("Content-ID", "img")。收件人将看到上面附有图像和图像的邮件内容。但是当我使用 Outlook 撰写包含图像的电子邮件时，收件人不会看到任何附加图像，只会看到邮件文本和嵌入图像。Outlook 如何做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:26:14.197

除了纯文本之外，Outlook 和其他类似客户端还嵌入了 HTML 版本的文本。然后在 html 中，他们使用`img`标签（在嵌入图像本身时设置）引用带有 ID 的图像。图像像您已经做的那样单独嵌入。

但我建议您使用比“img”更唯一的 ID（不要与我上面提到的标签混淆）作为部分 ID（例如散列原始文件名）。

更新：

为了更清楚地显示这里有一个例子。假设我发送了这封电子邮件：

![已发送电子邮件的快照](../Images/5b4818ad0d024ceb3aa03f40d3049eb4.png)

这将通过 SMTP 发送此源 - 在这里您注意到第一部分是纯文本：

```
...other header parts snipped
Subject: Demo attachments
Content-Type: multipart/alternative;
 boundary="------------080308060008080306040307"

This is a multi-part message in MIME format.
--------------080308060008080306040307
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

This text is attached as HTML. As we reference an image this will be 
displayed here as well as being an attachment as usual.

End of message

--------------080308060008080306040307 
```

之后，Thunderbird（在这种情况下，与 Outlook 相同）插入相同文本的 HTML 版本，它是在其中编辑的：

```
Content-Type: multipart/related;
 boundary="------------080209080402080405070800"

--------------080209080402080405070800
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  </head>
  <body text="#000000" bgcolor="#FFFFFF">
    This text is attached as HTML. As we reference an image this will be
    displayed here as well as being an attachment as usual.<br>
    <br>
    <img src="cid:part1.03070608.09040802@xxxxxxxxxxxxxxxx" alt=""><br>
    <br>
    End of message<br>
    <br>
  </body>
</html>

--------------080209080402080405070800 
```

注意上面图片的链接（我用 x 打乱了域）：

```
<img src="cid:part1.03070608.09040802@xxxxxxxxxxxxxxxx" alt=""> 
```

如果您现在查看邮件正文中的其余附件，您将看到其`Content-ID`ID 与 HTML 中引用的 ID 相同 - 图像本身像往常一样以 Base64 格式附加。参考链接总是以`cid:<attachement ID>`

ID 可以是任何不与身体其他部位发生冲突的东西。

还要注意`Content-Disposition`指示 Thunderbird 以内联方式显示它的行，这不是绝对必要的，因为它在 HTML 中被引用，但可以帮助客户端了解此图像的意图是内联显示它还是使其可作为“纯“ 附件：

```
Content-Type: image/png;
 name="ddebjigc.png"
Content-Transfer-Encoding: base64
Content-ID: <part1.03070608.09040802@xxxxxxxxxxxxxxxx>
Content-Disposition: inline;
 filename="ddebjigc.png"

iVBORw0KGgoAAAANSUhEUgAAANsAAAAcCAIAAABnDF0bAAASPElEQVR4nO2b+VMTWbvHc/+I
+TNu6SiyyL4lyL4qm4gIoigiO4ii4OCGsoR9QAQZkRAC4uj4jigZRRyZV3iRfQ+BrJ3uQMjG
Ork/dLrTaxJmbt2aqkvXt6ic06efX/jUs5zzHEZ6WuKBDvTPEePx49YDHeifIwYIQQRBSghS 
```

...在此示例中剪切以缩短文本...

```
sFjyaDrJSZ6SMnZjnCKphQLLIrYhUgGSPSj6IbHoJl2HxYVvEojkezZ0oo3jlD4ScwvW2EhB
c/8Vv4zUZE66LIuGXdOdV1x0xl/H+Zs+EjNEnCKRMPy8pfs3GKdIaKPEOUXSegUikGFNJ/rB
c/D8nz3/A+4rfUt5pwb4AAAAAElFTkSuQmCC
--------------080209080402080405070800--

--------------080308060008080306040307-- 
```

希望这更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:21:12.003

[如 JavaMail FAQ 中所述，您是否创建了多部分/相关消息？](http://www.oracle.com/technetwork/java/javamail/faq/index.html#sendmpr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T20:09:52.020

```
 File template = new File ("template.htm");
        FileUtils readContent = new FileUtils ();
        String content = readContent.readFileToString (template);

        MimeMultipart multiPart = new MimeMultipart ("related");
        BodyPart bodyPart = new MimeBodyPart ();
        bodyPart.setContent (content, "text/html");
        multiPart.addBodyPart (bodyPart);
        BodyPart imgPart = new MimeBodyPart ();
        DataSource img_data = new FileDataSource ("template\\image001.jpg");
        imgPart.setDataHandler (new DataHandler (img_data));
        imgPart.setDisposition (MimeBodyPart.INLINE);
        imgPart.setHeader ("Content-ID", "img_1");
        multiPart.addBodyPart (imgPart); 
```

# objective-c - 为 iOS 编译 libjpeg

> ID：13133054
> 
> 赞同：1
> 
> 时间：2012-10-30T05:16:55.917
> 
> 标签：objective-c, xcode, symbols, libjpeg, missing-symbols

我正在尝试在 XCode 中为 iOS 6 编译一个项目，并且我正在使用以下标头，其中包括我需要的功能：

```
#include "cdjpeg.h"     /* Common decls for cjpeg/djpeg applications */
#include "transupp.h"   /* Support routines for jpegtran */ 
```

这些直接来自**jpegtran**实用程序资源。我之前安装过jpeg库，我的/usr/local/lib/中有libjpeg.a。但是，当我尝试编译时，我收到错误“**架构 i386 的未定义符号**”或“**架构 armv7 的未定义符号**”，具体取决于目标是否是 iPhone 模拟器。以下是它找不到符号的关键字：

```
 "_jpeg_stdio_src"
  "_jpeg_finish_compress"
  "_jcopy_markers_execute"
  "_jpeg_copy_critical_parameters"
  "_jtransform_adjust_parameters"
  "_jpeg_destroy_compress"
  "_jtransform_execute_transform"
  "_jpeg_finish_decompress"
  "_jpeg_read_header"
  "_jtransform_request_workspace"
  "_jpeg_write_coefficients"
  "_jpeg_read_coefficients"
  "_jpeg_destroy_decompress"
  "_jpeg_stdio_dest"
  "_jcopy_markers_setup" 
```

我以前遇到过缺少符号的错误，并且总是最终放弃使用 3rd 方库，但在那种特殊情况下，没有办法。

我在这里做错了什么？

编辑：我已将 libjpeg.a 添加到项目设置中，它确实走得更远，但现在停在：

```
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: i386-apple-darwin12.2.0
Thread model: posix
"lots-of-debug-paths"
ld: library not found for -ljpeg
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-17T07:52:50.750

我最近也需要`libjpeg`iOS（作为另一个第三方库的依赖项）

我最终只使用了[libjpeg-turbo](http://www.libjpeg-turbo.org)，它带有一个预编译的胖二进制文件

```
Architectures in the fat file: libjpeg.dylib are: i386 x86_64 armv6 armv7 armv7s arm64 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:43:44.293

不知道你是怎么编译的。但是您需要更改 make install 才能在 i386 和 armv7 中编译它。我很确定你只是运行 make，所以它为你的 mac 编译了它，这肯定是一个 x84_64 架构，这肯定不是你想要的

你可以检查

```
lipo -info  /usr/local/lib/libjpeg.a // if libjpeg.a is at this path 
```

或者

```
file /usr/local/lib/libjpeg.a 
```

# image-processing - OpenCV 在同一窗口中相邻显示 2 个图像

> ID：13133055
> 
> 赞同：12
> 
> 时间：2012-10-30T05:16:56.140
> 
> 标签：image-processing, opencv, roi

我正在尝试使用 OpenCV 在同一窗口中显示水平相邻的 2 个图像。

我已经尝试为此使用 adjustROI 函数。图像 1 的宽度为 1088 像素，高度为 2208 像素，而图像 2 的宽度为 1280 像素，高度为 2208 像素。请在下面的代码中提出可能有问题的地方。我得到的只是一张图片大小 Image2 以及来自 Image2 的内容。

```
Mat img_matches=Mat(2208,2368,imgorig.type());//set size as combination of img1 and img2
img_matches.adjustROI(0,0,0,-1280); 
imgorig.copyTo(img_matches);
img_matches.adjustROI(0,0,1088,1280);
imgorig2.copyTo(img_matches); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-30T05:59:40.120

**编辑：**这是我做你想做的事情的方式：

```
Mat left(img_matches, Rect(0, 0, 1088, 2208)); // Copy constructor
imgorig.copyTo(left);
Mat right(img_matches, Rect(1088, 0, 1280, 2208)); // Copy constructor
imgorig2.copyTo(right); 
```

复制构造函数创建一个`Mat`指向由每个`Rect`s 定义的 ROI 的标头副本。

完整代码：

```
#include <cv.h>
#include <highgui.h>

using namespace cv;

int
main(int argc, char **argv)
{
    Mat im1 = imread(argv[1]);
    Mat im2 = imread(argv[2]);
    Size sz1 = im1.size();
    Size sz2 = im2.size();
    Mat im3(sz1.height, sz1.width+sz2.width, CV_8UC3);
    Mat left(im3, Rect(0, 0, sz1.width, sz1.height));
    im1.copyTo(left);
    Mat right(im3, Rect(sz1.width, 0, sz2.width, sz2.height));
    im2.copyTo(right);
    imshow("im3", im3);
    waitKey(0);
    return 0;
} 
```

编译：

```
g++ foo.cpp -o foo.out `pkg-config --cflags --libs opencv` 
```

**编辑2：**

这是它的外观`adjustROI`：

```
#include <cv.h>
#include <highgui.h>

using namespace cv;

int
main(int argc, char **argv)
{
    Mat im1 = imread(argv[1]);
    Mat im2 = imread(argv[2]);
    Size sz1 = im1.size();
    Size sz2 = im2.size();
    Mat im3(sz1.height, sz1.width+sz2.width, CV_8UC3);
    // Move right boundary to the left.
    im3.adjustROI(0, 0, 0, -sz2.width);
    im1.copyTo(im3);
    // Move the left boundary to the right, right boundary to the right.
    im3.adjustROI(0, 0, -sz1.width, sz2.width);
    im2.copyTo(im3);
    // restore original ROI.
    im3.adjustROI(0, 0, sz1.width, 0);
    imshow("im3", im3);
    waitKey(0);
    return 0;
} 
```

您必须跟踪当前的 ROI，并且移动 ROI 的语法可能有点不直观。结果与第一个代码块相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-10T18:31:34.500

由于图像的高度（Mat 的行）相同，因此可以使用函数`hconcat`水平连接两个图像（Mat），从而可以在同一窗口中并排显示它们。[OpenCV 文档](http://docs.opencv.org/trunk/d2/de8/group__core__array.html#gaab5ceee39e0580f879df645a872c6bf7)。
它适用于灰度和彩色图像。源矩阵中的颜色通道数必须相同。

```
Mat im1, im2; // source images im1 and im2

Mat newImage;
hconcat(im1, im2, newImage);  // <---- place image side by side

imshow("Display side by side", newImage);
waitKey(0); 
```

为了完整起见，`vconcat`可以类似地用于垂直连接。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-01T18:14:42.113

这是@misha 的答案启发的解决方案。

```
#include <cv.h>
#include <highgui.h>

using namespace cv;

int
main(int argc, char **argv)
{
    Mat im1 = imread(argv[1]);
    Mat im2 = imread(argv[2]);
    Size sz1 = im1.size();
    Size sz2 = im2.size();
    Mat im3(sz1.height, sz1.width+sz2.width, CV_8UC3);
    im1.copyTo(im3(Rect(0, 0, sz1.width, sz1.height)));
    im2.copyTo(im3(Rect(sz1.width, 0, sz2.width, sz2.height)));
    imshow("im3", im3);
    waitKey(0);
    return 0;
} 
```

此解决方案不使用复制构造函数，而是使用[Mat::operator()(const Rect& roi)](http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#Mat%20Mat::operator()(const%20Rect&%20roi)%20const)。虽然两个解决方案都是 O(1)，但这个解决方案似乎更干净。

# java - 避免直接链接到登录页面

> ID：13133058
> 
> 赞同：1
> 
> 时间：2012-10-30T05:17:15.370
> 
> 标签：java, jsp, spring-security, remember-me

我正在使用 spring security 包括记住我的功能：

`<security:remember-me key="myKey" token-validity-seconds="2419200" user-service-ref="userDetailsService"/>`

现在，当我选中记住我复选框时，我可以关闭浏览器并转到一些跳过登录页面的应用程序页面。

但我仍然可以键入 myApp/login.jsp 并转到登录页面。

有什么办法可以避免吗？- 我想避免任何直接链接到登录页面。用户只有在尚未登录、未按下“记住我”按钮（并关闭浏览器）或按下我的应用程序的注销按钮时才能看到登录屏幕。

# wordpress - 您如何在 wordpress 中动态创建 pdf？

> ID：13133066
> 
> 赞同：10
> 
> 时间：2012-10-30T05:17:47.783
> 
> 标签：wordpress, pdf, pdf-generation, tcpdf, fpdf

我正在使用联系表格 7 让用户输入数据，然后根据他们的数据输入，我需要在输出整个 pdf 之前向 pdf 添加不同的文本。

例如，如果用户说他们喜欢红色气球，则创建的气球 pdf 会提及红色气球的重要性等...

我知道必须有一种方法可以使用 fpdf、tcpdf 或其他东西来做到这一点，但我不确定如何。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:25:57.160

看看[dompdf](http://code.google.com/p/dompdf/) ，它非常易于使用以及很好的实现文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-12T03:19:08.233

您可能希望使用包装在自定义 Wordpress 插件中的 PHP 原生 PDF 函数来生成您自己的 PDF 文档。查看[PHP.net 手册：PDF](http://php.net/manual/en/book.pdf.php)以获取概述。如果您搜索 Google 的，我在那里有很多`PHP=>PDF`供应商库。

我想到的另一个解决方案是在某个地方运行一个工作进程，以基于通过模板系统（mustache、[twig](http://twig.sensiolabs.org/)等）提供的 Wordpress 数据转换并返回 [?|PDF] 格式的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T11:07:41.987

首先，我真的推荐使用 Gravity Forms，它是一个更好的表单插件，它还可以将条目保存在数据库中，以便您检索它们。

对于 PDF 部分，我认为您需要手动对其进行编程。

创建一个实现 tcpdf 的 php 文件，并接收来自表单的所有输入（通过 POST 或 GET）。然后你就有了你需要的所有参数，你可以用任何你喜欢的方式创建 PDF。

为了使用这个 php 文件，在 Wordpress 中打开一个页面，然后将 php 文件重命名为 page-.php（其中 XXXX 是您打开的新页面 ID）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T16:49:56.600

从此 url 安装 pdf creator 插件。希望这对您有所帮助。

[http://wordpress.org/extend/plugins/kalins-pdf-creation-station/](http://wordpress.org/extend/plugins/kalins-pdf-creation-station/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-30T15:58:41.477

创建一个子插件，这个人已经完成或正在这样做：[http ://wordpress.org/support/topic/plugin-contact-form-7-add-attachment-with-wpcf7_contactform-class?replies=1](http://wordpress.org/support/topic/plugin-contact-form-7-add-attachment-with-wpcf7_contactform-class?replies=1)

# mysql - VB.NET 和 MySql 更新查询

> ID：13133068
> 
> 赞同：2
> 
> 时间：2012-10-30T05:18:05.323
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010, datagridview

我的代码在这里没有错误（至少在我调试它时没有，我使用`VS 2010`），但我希望发生的是当我单击添加按钮时，文本框（txtQty）中的数字/秒会添加到数字中当前保存在“数量”列中。（例如：txtQty“100”，当前列是“200”，我想将“100”从文本框中添加到“200”列并将其保存为新数字“300”。我知道的简单数学，但问题是我还不知道如何使用数学方程式`VB.NET` `Datagridview`或`MySql Database`执行此代码，但是当我单击添加列中的数字时返回 0。任何提示或提示将不胜感激，谢谢。

```
 cmd.Connection = conn

        Dim Result = "Quantity" + txtQty.Text

        cmd.CommandText = " UPDATE incomingdeliveries SET Quantity ='" & Result & "';"
        cmd.Parameters.Add(New MySqlParameter("@Quantity", txtQty.Text))

        cmd.ExecuteNonQuery()

        MsgBox("Data Added to the Database")

            Me.IncomingdeliveriesTableAdapter.Dispose()
        Me.IncomingdeliveriesTableAdapter.Fill(Me.IncomingDeliveriesDataSet.incomingdeliveries)

            lblCode.Text = ("Tables Refreshed!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:21:09.433

您的命令文本也必须参数化

```
cmd.CommandText = " UPDATE incomingdeliveries SET Quantity = @iQuantity + Quantity"
cmd.Parameters.Add(New MySqlParameter("@iQuantity", txtQty.Text)) 
```

**更新 1**

```
Using _conn As New MySqlConnection("connectionStr here")
    Using _comm As New MySqlCommand()
        With _comm
            .Connection = _conn
            .CommandText = "UPDATE incomingdeliveries SET Quantity = @iQuantity + Quantity"
            .CommandType = CommandType.Text
            .Parameters.AddWithValue("@iQuantity", txtQty.Text)
        End With
        Try
            _conn.Open()
            _comm.ExecuteNonQuery()
        Catch ex As MySqlException
            Msgbox(ex.Message.ToString())
        End Try
    End Using
End Using 
```

# c# - 在 wpf 中打印预览和打印

> ID：13133070
> 
> 赞同：1
> 
> 时间：2012-10-30T05:18:34.977
> 
> 标签：c#, wpf

我有一个 WPF 表单，我需要打印它，我使用 DocumentViewer 打印。但是当我想打印或预览时，我只看到第一页，而我有多个页面

```
private void Print(object sender, RoutedEventArgs e)
{
PrintSettings printSettings = PrintSettings.Default;
UIElement container = this.Content as UIElement;
ScrollViewer containerPanel = Helper.FindVisualChildren<ScrollViewer>(container).FirstOrDefault();
var origParentDirection = containerPanel.FlowDirection;
var origDirection = (containerPanel.Content as FrameworkElement).FlowDirection;
if (containerPanel != null && containerPanel.FlowDirection == FlowDirection.RightToLeft)
{
containerPanel.FlowDirection = FlowDirection.LeftToRight;
(containerPanel.Content as FrameworkElement).FlowDirection = FlowDirection.RightToLeft;
}
var window = new Window();
string tempFileName = System.IO.Path.GetTempFileName();
System.IO.File.Delete(tempFileName);
using (XpsDocument xpsDocument = new XpsDocument(tempFileName, FileAccess.ReadWrite, System.IO.Packaging.CompressionOption.Fast))
{
XpsDocumentWriter writer = XpsDocument.CreateXpsDocumentWriter(xpsDocument);
(containerPanel.Content as FrameworkElement).Margin = new Thickness(20);
writer.Write((containerPanel.Content as FrameworkElement), printSettings.PrintTicket);
var doc = xpsDocument.GetFixedDocumentSequence();
doc.PrintTicket = printSettings.PrintTicket;       
window.FlowDirection = System.Windows.FlowDirection.RightToLeft;
window.Content = new DocumentViewer { Document = doc };
window.Margin = new Thickness(10);
window.ShowDialog();
}
(containerPanel.Content as FrameworkElement).FlowDirection = origDirection;
containerPanel.FlowDirection = origParentDirection;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:50:15.347

user1780436，我目前正在寻找类似的答案。您正在尝试打印面板，对吗？

我发现缩放元素是最大的问题。这带来了另一个问题，即缩放要打印的内容而不是实际的可见元素。您必须将元素复制到新元素。

```
public class Copy<T>
{
    public static T DeepCopy<T>(T element)
    {
        string xaml = XamlWriter.Save(element);
        StringReader xamlString = new StringReader(xaml);
        XmlTextReader xmlTextReader = new XmlTextReader(xamlString);
        var DeepCopyobject = (T)XamlReader.Load(xmlTextReader);
        return DeepCopyobject;
    }

} 
```

或者

```
myNewElement = XamlReader.Parse(XamlWriter.Save(myOldElement.DataContext)) as ElementType 
```

我在多个站点上反复找到这个答案来复制/克隆一个元素，但是我遇到了 `string xaml = XamlWriter.Save(element);`导致 stackoverflows 的问题。

我目前正在使用。

```
myNewElement = new ElementType() { DataContext = myOldElement.DataContext } 
```

您在那里使用的任何一个都会成为更改元素大小的问题。这就是我要找的。

我尝试了[渲染通道](https://stackoverflow.com/questions/2947729/is-it-possible-for-a-wpf-control-to-have-an-actualwidth-and-actualheight-if-it-h)，但这只是指出在我的情况下使用复制/克隆的元素。虽然在写这篇文章时我确实得到了一些工作，但给了我一个黑色的图像，注意我正在尝试缩放图表。

```
myNewElement.Width = newWidth;
myNewElement.Height = newHeight;

myNewElement.Measure(new System.Windows.Size(newWidth, newHeight));
myNewElement.Arrange(new Rect(0, 0, newWidth, newHeight)); 
```

我尝试了[layout pass](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/f76e322e-3b23-402d-a944-7d50ee50ce8d)，但没有得到它。

我会继续努力，我会发布我发现的任何新内容。如果你找到答案，请做同样的事情。

*编辑*- 这是我所做的。[我的问题和解决方案](https://stackoverflow.com/questions/13181066/copy-clone-and-print-chart-problems-with-actualwidth-actualheight/13236254#13236254)

# node.js - 表达下一个函数，它到底是干什么用的？

> ID：13133071
> 
> 赞同：152
> 
> 时间：2012-10-30T05:18:39.197
> 
> 标签：node.js, express

一直试图找到一个很好的描述该`next()`方法的作用。在 Express 文档中，它说`next('route')`可以用来跳转到该路由并跳过其间的所有路由，但有时`next`在没有参数的情况下调用。有人知道描述该`next`功能的好教程等吗？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-10-30T05:26:37.467

`next()`没有争论说“开个玩笑，我真的不想处理这个”。它返回并尝试找到下一条匹配的路线。

这很有用，比如说如果你想拥有某种带有 url slug 的页面管理器，以及许多其他的东西，但这里有一个例子。

```
app.get('/:pageslug', function(req, res, next){
  var page = db.findPage(req.params.pageslug);
  if (page) {
    res.send(page.body);
  } else {
    next();
  }
});

app.get('/other_routes', function() {
  //...
}); 
```

组成的代码应该检查数据库以查找具有特定 id slug 的页面。如果它找到一个渲染它！如果找不到，则忽略此路由处理程序并检查其他路由处理程序。

因此`next()`，没有参数允许假装您没有处理该路线，以便其他东西可以代替它。

* * *

或带有 的命中计数器`app.all('*')`。它允许您执行一些共享设置代码，然后转到其他路线以执行更具体的操作。

```
app.all('*', function(req, res, next){
  myHitCounter.count += 1;
  next();
});

app.get('/other_routes', function() {
  //...
}); 
```

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2012-10-30T18:41:16.157

在大多数框架中，您都会收到一个请求并且想要返回一个响应。由于 Node.js 的异步特性，如果你在做一些不平凡的事情，你会遇到嵌套回调的问题。为了防止这种情况发生，Connect.js（在 v4.0 之前，Express.js 是 connect.js 之上的一层）有一个叫做中间件的东西，它是一个带有 2、3 或 4 个参数的函数。

```
function (<err>, req, res, next) {} 
```

您的 Express.js 应用程序是这些功能的堆栈。

![在此处输入图像描述](../Images/acac8988bb8067d2da4d61f894138e67.png)

路由器很特别，它是一个中间件，可以让你为某个 url 执行一个或多个中间件。所以它是堆栈中的堆栈。

那么下一步做什么呢？很简单，它告诉您的应用程序运行下一个中间件。但是当你将某些东西传递给下一个时会发生什么？Express 将中止当前堆栈并运行所有**具有 4 个参数的中间件。**

```
function (err, req, res, next) {} 
```

该中间件用于处理任何错误。我喜欢做以下事情：

```
next({ type: 'database', error: 'datacenter blew up' }); 
```

有了这个错误，我可能会告诉用户出了点问题并记录真正的错误。

```
function (err, req, res, next) {
   if (err.type === 'database') {
     res.send('Something went wrong user');
     console.log(err.error);
   }
}; 
```

如果你把你的 Express.js 应用程序想象成一个堆栈，你可能会自己解决很多奇怪的问题。例如，当您在路由器之后添加 Cookie 中间件时，您的路由不会有 cookie 是有道理的。

## 文档

*   [如何设置错误处理程序？](https://expressjs.com/en/starter/faq.html)
*   [错误处理](https://expressjs.com/en/guide/error-handling.html)

> 您定义错误处理中间件的方式与其他中间件相同，不同之处在于使用四个参数而不是三个；特别是签名（err，req，res，next）：

```
app.use(function (err, req, res, next) {
  console.error(err.stack)
  res.status(500).send('Something broke!')
}) 
```

* * *

## 回答 #3

> 赞同：112
> 
> 时间：2017-09-08T18:12:16.660

恕我直言，这个问题的公认答案并不准确。正如其他人所说，它实际上是关于控制链中的下一个处理程序何时运行。但我想提供更多代码以使其更具体。假设您有这个简单的快递应用程序：

```
var express = require('express');
var app = express();

app.get('/user/:id', function (req, res, next) {
    console.log('before request handler');
    next();
});

app.get('/user/:id', function (req, res, next) {
    console.log('handling request');
    res.sendStatus(200);
    next();
});

app.get('/user/:id', function (req, res, next) {
    console.log('after request handler');
    next();
});

app.listen(3000, function () {
    console.log('Example app listening on port 3000!')
}); 
```

如果你这样做

```
curl http://localhost:3000/user/123 
```

你会看到这个打印到控制台：

```
before request handler
handling request
after request handler 
```

现在，如果您像这样注释掉`next()`中间处理程序中的调用：

```
app.get('/user/:id', function (req, res, next) {
    console.log('handling request');
    res.sendStatus(200);
    //next();
}); 
```

您将在控制台上看到：

```
before request handler
handling request 
```

请注意，最后一个处理程序（打印的那个`after request handler`）没有运行。那是因为您不再告诉 express 运行下一个处理程序。

因此，您的“主”处理程序（返回 200 的处理程序）是否成功并不重要，如果您希望其余中间件运行，则必须调用`next()`.

这什么时候会派上用场？假设您要记录进入某个数据库的所有请求，无论请求是否成功。

```
app.get('/user/:id', function (req, res, next) {
    try {
       // ...
    }
    catch (ex) {
       // ...
    }
    finally {
       // go to the next handler regardless of what happened in this one
       next();
    }
});

app.get('/user/:id', function (req, res, next) {
    logToDatabase(req);
    next();
}); 
```

如果要运行第二个处理程序，则必须调用`next()`第一个处理程序。

请记住，节点是异步的，因此它无法知道第一个处理程序的回调何时完成。你必须打电话告诉它`next()`。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-06-24T20:23:43.377

不带参数的 next() 调用框架中的下一个路由处理程序或下一个中间件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-01-25T01:04:30.303

在一处总结正确提到的答案，

*   next() : 将控制移动到同一路径中的下一个函数。单一路线中的​​多个功能的情况。
*   next('route') ：通过跳过当前路线中的所有剩余功能将控制移动到下一条路线。
*   next(err) : 将控制转移到错误中间件

```
app.get('/testroute/:id', function (req, res, next) {
  if (req.params.id === '0') next() // Take me to the next function in current route
  else if (req.params.id === '1') next('route') //Take me to next routes/middleware by skipping all other functions in current router  
  else next(new Error('Take me directly to error handler middleware by skipping all other routers/middlewares'))
}, function (req, res, next) {
  // render a regular page
  console.log('Next function in current route')
  res.status(200).send('Next function in current route');
})

// handler for the /testroute/:id path, which renders a special page
app.get('/testroute/:id', function (req, res, next) {
  console.log('Next routes/middleware by skipping all other functions in current router')
  res.status(200).send('Next routes/middleware by skipping all other functions in current router');
}) 
//error middleware
app.use(function (err, req, res, next) {
  console.log('take me to next routes/middleware by skipping all other functions in current router')
  res.status(err.status || 500).send(err.message);
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-21T14:21:10.567

问题还询问了关于 next('route') 的使用，到目前为止，它似乎在一周内提供的答案中涵盖：

1.  next() 的用法：

简而言之：下一个中间件功能。

摘自此官方[Express JS 文档 - “writing-middleware”页面](https://expressjs.com/en/guide/writing-middleware.html)：

“中间件函数 myLogger 只是打印一条消息，然后通过调用 next() 函数将请求传递给堆栈中的**下一个中间件**函数。”

```
var express = require('express')
var app = express()

var myLogger = function (req, res, next) {
  console.log('LOGGED')
  next()
}

app.use(myLogger)

app.get('/', function (req, res) {
  res.send('Hello World!')
})

app.listen(3000) 
```

[Express JS 文档的这一页](https://expressjs.com/en/guide/using-middleware.html)指出“如果当前中间件函数没有结束请求-响应周期，则必须调用 next() 将控制权传递给下一个中间件函数。否则，请求将被挂起。”

2.  next('route') 的用法：

简而言之：**下一条路线**（与next() 的情况下的下**一个中间件函数**）

从此[Express JS 文档中摘录 - 'using-middleware' 页面](https://expressjs.com/en/guide/using-middleware.html)：

“要从路由器中间件堆栈中跳过其余中间件函数，请调用 next('route') 将控制权传递给**下一个路由**。注意：next('route') 仅适用于通过使用加载的中间件函数app.METHOD() 或 router.METHOD() 函数。

此示例显示了一个中间件子堆栈，用于处理对 /user/:id 路径的 GET 请求。”

```
app.get('/user/:id', function (req, res, next) {
  // if the user ID is 0, skip to the next route
  if (req.params.id === '0') next('route')
  // otherwise pass the control to the next middleware function in this stack
  else next()
}, function (req, res, next) {
  // render a regular page
  res.render('regular')
})

// handler for the /user/:id path, which renders a special page
app.get('/user/:id', function (req, res, next) {
  res.render('special')
}) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-02T19:53:26.030

它只是意味着将控制权传递给下一个处理程序。

干杯

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-07T05:53:27.547

*注意上面对 next() 的调用。调用此函数会调用应用程序中的下一个中间件函数。next() 函数不是 Node.js 或 Express API 的一部分，而是传递给中间件函数的第三个参数。next() 函数可以命名为任何名称，但按照惯例，它始终命名为“next”。为避免混淆，请始终使用此约定。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-17T00:23:34.410

***next()***是带有 req 的中间件函数的回调参数，而 res 是下面代码中 next 的 http 请求和响应参数。

app.get('/', (req, res, next) => { next() });

所以 next() 调用传入的中间件函数。如果当前中间件函数没有结束请求-响应循环，它应该调用 next()，否则请求将被挂起并超时。

*****当向app.use***或 app.METHOD传递多个中间件函数时，需要在每个中间件函数内调用**next()** fn ，否则将不会调用下一个中间件函数（如果传递了超过 1 个中间件函数）。要跳过调用剩余的中间件函数，请在中间件函数内调用***next('route')***，之后不应调用其他中间件函数。在下面的代码中，fn1 将被调用，fn2 也将被调用，因为 next() 在 fn1 中被调用。但是，不会调用 fn3，因为在 fn2 中调用了 next('route')。**

 **```
app.get('/fetch', function fn1(req, res, next)  {
console.log("First middleware function called"); 
    next();
}, 
function fn2(req, res, next) {
    console.log("Second middleware function called"); 
    next("route");
}, 
function fn3(req, res, next) {
    console.log("Third middleware function will not be called"); 
    next();
}) 
```**

# php - 会话管理

> ID：13133072
> 
> 赞同：-2
> 
> 时间：2012-10-30T05:18:46.087
> 
> 标签：php, session

我的会话有问题。我创建了一个名为 Session.php 的不同会话文件，并希望将此文件包含在网站的每个页面中以管理会话。它可以工作吗？请建议我，我是第一次参加会议的新手和工作人员。

我的 session.php 文件如下

```
<?php  include("lib/config.php"); 
function start_session() { 
$_SESSION['userid']=$rows[0]; 
$_SESSION['first_name']=$rows[2]; 
$_SESSION['last_name']=$rows[3]; 
$_SESSION['user_email']=$rows[4]; 
$_SESSION['user_password']=$rows[5]; 
$_SESSION['user_gen']=$rows[6]; 
$_SESSION['user_contact']=$rows[7]; 
$_SESSION['picture']="profile/".$rows_pic[0]; 
$user_id=$_SESSION['userid']; 
$fnam=$_SESSION['first_name']; 
$lnam=$_SESSION['last_name']; 
$email=$_SESSION['user_email']; 
$pic_ed=$_SESSION['picture']; 
} 

function destroy() {   
session_destroy(); 
} 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:33:50.417

1) 你在函数中使用了 $rows，那个变量是什么？

2) 是的，您可以在所有页面中包含该文件，但最好在 lib 文件夹下创建 session.php 并将该文件包含在 lib/config.php 中。所以你只需要在所有页面中包含 config.php。

3）您需要 session_start() 在您的 php 文件的最顶层代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:27:10.677

您需要在文件顶部包含 session_start() ，然后您的函数肯定会起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T05:22:54.630

创建 session.php 文件有什么用？

您可以像这样访问会话：

@session_start();

如果您想编写新会话而不是像这样使用 $_SESSION['MySession'] = 'XYZ';

访问会话回声 $_SESSION['MySession'];

您可以在每个页面上访问会话 $_SESSION['MySession'] 但您需要在每个 php 文件的顶部包含 @session_start() 。

# javascript - Javascript：如何打开一个页面然后等待几秒钟在同一窗口中打开另一个页面

> ID：13133075
> 
> 赞同：1
> 
> 时间：2012-10-30T05:19:09.910
> 
> 标签：javascript

我试图在一个窗口中打开一个 url，然后等待几秒钟，然后在同一个窗口中打开另一个 url。但是脚本不起作用。运行时它会给出一个空白窗口。我是 Javascript 新手。有人可以帮帮我吗？

我也想在 Google Chrome 中运行它。

脚本如下：

```
my_window=window.open("","mywindow");
my_window.location="http://www.yahoo.com";
sleep(10000);
my_window.location="http://www.youtube.com";
sleep(10000);
my_window.close();

function sleep(delay)
{
    var start = new Date().getTime();
    while (new Date().getTime() < start + delay);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:28:55.170

你可以试试这个：

```
<script type="text/javascript">
function def()
{
my_window.location="http://www.yahoo.com";
setTimeout("abc()", 3000);
}

function abc()
{
alert("Delayed 3 seconds");
my_window.location="http://www.youtube.com";
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:04:07.867

一般来说，不建议在 javascript 中使用阻塞循环。在您的情况下，您可能想要使用 setTimeout 或 setInterval 之类的东西。此代码应该可以工作：

```
var win = window.open("http://foo.com");
setTimeout(function(){
    win.location = "http://bar.com";
    setTimeout(function(){
        win.close();
    }, 10000);
}, 10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:32:28.197

**更新**

我编写了以下 HTML，它可以很好地显示您帖子中的要求：

```
<html>
    <head>
        <script language="JavaScript" type="text/javascript">

        var my_window;

        function OpenWin()
        {
            my_window=window.open("http://www.yahoo.com", "_blank", "resizable=yes, scrollbars=yes, titlebar=yes, width=1000, height=800, top=10, left=10");
            setTimeout("GoUrl('http://www.youtube.com')", 10000);
        }
        function GoUrl(Url)
        {
            my_window.location=Url;
        }
        </script>
    </head>
    <body>
        <button onclick="OpenWin()">Open Window</button>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:48:08.493

经过测试，这个可以工作，但出现弹出窗口阻止程序

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        function open_win() 
        {
            setTimeout("go('http://www.yahoo.com')", 5000);

            setTimeout("go('http://www.youtube.com')", 10000);

        }

        function go(url){
            window.open(url);
        }
    </script>
</head>

<body>
<form>
    <input type="button" value="Open Win" onclick="open_win()">
</form>
</body>
</html> 
```

# php - 如何在 symfony2 中使用控制器扩展监听器？

> ID：13133076
> 
> 赞同：0
> 
> 时间：2012-10-30T05:19:30.860
> 
> 标签：php, symfony, routing

我正在根据这个讨论创建一个子域监听器[Symfony2 Routing - route subdomains](https://stackoverflow.com/questions/5366234/symfony2-routing-route-subdomains)

所以它交给了这个听众，我可以做我想做的事情。

但我无法用我的一个控制器扩展这个监听器。监听器代码是这样的......

```
namespace Acme\FrontEndBundle\Listener;

use Symfony\Component\EventDispatcher\EventDispatcher;
use Symfony\Component\EventDispatcher\Event;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\HttpFoundation\Response;
use Acme\BraPrintBundle\Controller\BraPrintController;
use Symfony\Component\HttpFoundation\RedirectResponse;

use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class SubdomainListener extends BraPrintController
{
   public function onDomainParse(Event $event)
   {
       $request = $event->getRequest();
       $session = $request->getSession();
       echo $request->getHost();
       echo $this->isLoggedIn(); // defined in BraprintController
       // todo: parsing subdomain to detect country
       //do some auth stuff
       //$session->set('corporate', $request->getHost());
   }
} 
```

但是当我尝试运行时它会抛出

```
Fatal error: Call to a member function get() on a non-object in /home/myname/myproject/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 192 
```

因此，当我尝试调试它时，它实际上会通过扩展类，但最后在 Controller 中它无法处理 get()。

是否有解决方法来访问 Listener 中的控制器功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:19:08.450

`use Symfony\Component\HttpFoundation\Request;`

`$request = Request::createFromGlobals();`

这是一种以更简单的方式与 HTTP 请求和响应交互的替代方法。

# actionscript-3 - AS 全部替换为 or 条件

> ID：13133077
> 
> 赞同：1
> 
> 时间：2012-10-30T05:19:58.887
> 
> 标签：actionscript-3

我想用两个字符替换。

下面是我的代码，我的问题是现在我需要替换'/'而不仅仅是'-'，运行替换两次并不是一个好主意，而且我在正则表达式方面很糟糕。有谁可以帮我写一个正则表达式，它将搜索整个字符串并替换任何 '-' o r'/' 。

```
var myPattern:RegExp = / /gi;
productId.replace(myPattern, '-') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:29:01.847

匹配`[]`正则表达式中的任何字符。

要同时替换“/”和“”（空格）：

```
replace(/[\/ ]/g, "-"); 
```

例子：

```
var s:String = "2012/10/29 12:29";
trace(s.replace(/[\/ ]/g, "-")); 
```

会产生：

> 2012-10-29-12:29

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:41:15.810

这应该将您的 productId 字符串中的任何 ' **/** ' 或 ' **- ' 替换为 '** **$** '

```
var myPattern:RegExp = /[\/-]/g;
productId.replace(myPattern, '$'); 
```

# regex - htaccess 重定向子文件夹和文件的正则表达式，而不是父级

> ID：13133088
> 
> 赞同：2
> 
> 时间：2012-10-30T05:20:36.873
> 
> 标签：regex, .htaccess, redirect

我现在设置了一个正则表达式：

```
^/technology/(.*)$ 
```

它适用于所有子文件夹和文件。问题是我不希望它只是技术文件夹时重定向。

```
/technology/ FALSE
/technology/something/ TRUE
/technology/something/else/ TRUE 
```

抱歉 - 我是正则表达式新手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:39:45.053

试试这个正则表达式：

```
^/technology/(.+)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:31:48.317

可能`/technology/(\w.+?)`会像在 php 中一样工作？

# ruby-on-rails-3 - 具有多个参数的虚拟属性

> ID：13133092
> 
> 赞同：0
> 
> 时间：2012-10-30T05:20:49.300
> 
> 标签：ruby-on-rails-3, mongoid, virtual-attribute

我有以下功能很好

```
def holiday_hours_for(holiday)
  hours["holiday_hours"][holiday.to_s] if hours["holiday_hours"][holiday.to_s]
end 
```

我只是在学习虚拟属性，并且在弄清楚这个函数的 setter 版本时遇到了一些麻烦。我将如何实现这个功能......

```
def holiday_hours_for(holiday)=(hours)
  self.hours["holiday_hours"][holiday.to_s] = hours if hours["holiday_hours"][holiday.to_s]
end 
```

谢谢！

更新：我想出了以下内容，这是最好的方法吗？

```
 def update_holiday_hours_for(holiday, hours_text)
    self.hours = Hash.new unless hours
    self.hours["holiday_hours"] = Hash.new unless hours["holiday_hours"]
    self.hours["holiday_hours"][holiday.to_s] = hours_text.to_s
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:13:41.360

需要理解的重要一点是，setter 方法的末尾用“=”符号定义。像这样：

```
def holiday_hours=(some_parameters)
  # some code
end 
```

这类似于实例变量@holiday_hours 的setter 方法。方法名称是“holiday_hours=”，它需要一个或多个参数，根据您的应用程序的要求来派生@holiday_hours 属性的值。当 Ruby 看到类似的代码时

```
holiday.holiday_hours = some_value 
```

它调用您定义的 setter 方法。即使此分配中有一些空白不在 setter 方法中。Ruby 将此赋值解释为

```
holiday.holiday_hours=(some_value) 
```

在假日对象上调用 holiday_hours= 方法，参数为 some_value

从您的帖子中不清楚您的示例方法所在的类是什么，我可以猜到变量 hours_text 是什么，但是参数 holiday 是什么？

# performance - GWT 与 SmartGWT

> ID：13133093
> 
> 赞同：0
> 
> 时间：2012-10-30T05:20:53.143
> 
> 标签：performance, gwt, comparison, smartgwt

考虑到以下情况，您能否告诉我哪个选项（`GWT or SmartGWT`）更好。

1.  将用于设计屏幕和客户端验证。
2.  性能（页面加载，网格加载）应该很好。
3.  需要通过soap（网络服务）与服务器通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:41:12.647

我同时使用了 SmartGWT 和 GWT，两者各有利弊。

SmartGWT： +现有的和复杂的小 部件 可以使用，布局 很好
，可以用于生产当您想更改他们的小部件时 - 小部件的 API 不清楚，有来自父方法的方法日志对其子方法没有影响

GWT：
+ API 非常清晰（在我看来）
+ 小部件可以以您可以想象的各种方式进行扩展
- 开箱即用的布局尚未准备好投入生产。如果你想要漂亮的布局，你必须改变它（CSS）

选择取决于对您来说什么是重要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:47:46.493

当您使用它时，请考虑将 MVP 与 GWT 一起使用。如果您不坚持有组织的开发模式（我想这适用于所有框架），GWT 很快就会成为一个无法维护的怪物。对于带有 GWT 的 MVP，请阅读[GWTP](http://code.google.com/p/gwt-platform/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:16:57.103

关于设计画面。两者都可以在 GWT Designer ( Eclipse ) 中完成，但最终您的应用程序会很大，并且使用设计器是不切实际的。

在这里可以查看smartgwt的速度

[http://www.smartclient.com/smartgwt/showcase/](http://www.smartclient.com/smartgwt/showcase/)

这里是正常的gwt

[http://gwt.google.com/samples/Showcase/Showcase.html](http://gwt.google.com/samples/Showcase/Showcase.html)

性能上其实差别不大。我自己正在使用 SmartGwt，使用预先存在的小部件快速开发应用程序真的很棒。您可以使用 smartgwt 立即设置接口。

也有可能将 smartgwt 和 gwt 结合起来（不推荐）。

# php - 解析一个字段以填充 MySQL 中的另一个字段

> ID：13133095
> 
> 赞同：0
> 
> 时间：2012-10-30T05:20:55.570
> 
> 标签：php, mysql

我是 PHP/MySQL 的新手，正在学习基础知识。

我有一个 MySQL 数据库 scwdb（我从 Access 2000 移出，我的 Windows 7 无法使用它），其中有一个表 tblsplintersbowlinventory，它有 2 个字段：

字段和数据：

```
txtProductBowlCode
data examples: OakSc07-001, MapleTi07-030, MapleTi07-034, BlackLimba07-002, AshSc07-017

txtProductPrimarySpecies
data examples: Oak, Maple, Maple, BlackLimba, Ash 
```

换句话说，我只想记录 txtProductPrimarySpecies 字段中的物种。

我尝试了以下 PHP 脚本：

```
 <?php
$con = mysql_connect("localhost","xxxxxxx","zzzzzzz");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("scwdb", $con);

$species = 'Maple';
mysql_query("UPDATE tblsplintersbowlinventory WHERE txtProductBowlCode LIKE $species SET txtProductPrimarySpecies=$species%");
echo "done";

mysql_close($con);
?> 
```

它似乎在运行，没有显示错误并打印“完成”，但是当我检查数据库时，我没有看到任何变化。

我错过了什么？

这个数据库有超过 600 条记录，我添加了这个新的 txtProductPrimarySpecies 字段以使我的搜索更容易，同时保留包含碗上特定信息的完整代码。有几个物种我需要这样做，所以我计划使用循环来遍历物种列表。

# 我将如何编写该循环以读取物种列表？

好的，我找到了完成这项工作的方法！

```
 <?php
$con = mysql_connect("localhost","xxxxxx","zzzzzzz");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("scwdb", $con);

$species = 'Maple';
$result = mysql_query("UPDATE tblsplintersbowlinventory SET txtProductPrimarySpecies = '$species' WHERE txtProductBowlCode LIKE '$species%'");
$result = mysql_query("SELECT * FROM tblsplintersbowlinventory WHERE txtProductBowlCode LIKE '$species%'");

echo "<table border='1'>
<tr>
<th>Index</th>
<th>Bowl Code</th>
<th>Species</th>
</tr>";

while($row = mysql_fetch_array($result))
    {
    echo "<tr>";
    echo "<td>" . $row['intProductID'] . "</td>";
    echo "<td>" . $row['txtProductBowlCode'] . "</td>";
    echo "<td>" . $row['txtProductPrimarySpecies'] . "</td>";
    echo "</tr>";
    }
echo "</table>";
echo "done";

mysql_close($con);
?> 
```

这行得通，我手动更改了 $species 值并为数据库中的每种木材运行它......因为这是一次拍摄，所以不使用列表并循环遍历它更有意义 - 我是无论如何，一定会错过一两个物种。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:30:26.683

不应该`set without %`先来`where with %`。另外我认为您的参数应该用引号括起来，因为它是字符串类型。

```
 mysql_query("UPDATE tblsplintersbowlinventory 
                SET txtProductPrimarySpecies='$species' 
                WHERE txtProductBowlCode LIKE 'CONCAT($species, '%')'"); 
```

# jquery - 更改 Shopify 新标准主题幻灯片的宽度

> ID：13133104
> 
> 赞同：0
> 
> 时间：2012-10-30T05:21:46.673
> 
> 标签：jquery, slideshow, shopify

我想修改 Shopify 的新标准主题，并设法将所有 css 更改为 960px 宽度和与幻灯片相关的 JS (var **container_width = 960;** )。我在这里显然缺少其他一些东西，即在上传时将图像本身裁剪为 884 像素。

知道需要进行哪些其他文件或更改才能阻止图像被裁剪为 884 像素并保持 960 像素宽吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:28:47.127

在 settings.html 文件中查找这些行：

```
 <td><label for="slide_1_image">Background Image</label></td>
 <td><input type="file" name="slide_1.jpg"  data-max-width="884" /></td> 
```

您需要将 data-max-width 修改为所需的宽度。对所有图像上传字段重复相同的步骤。

# java - 如何使用java加载链接（或href）？

> ID：13133107
> 
> 赞同：0
> 
> 时间：2012-10-30T05:22:01.290
> 
> 标签：java, struts, struts-1

我根据这两个参数从 JSP 页面获取值。我形成一个新查询，并从数据库中获取值。然后，我将它添加到`ArrayList`. 添加列表后，我想调用一个链接。完成我的逻辑后，如何在 Java 中调用链接？

我正在使用struts1.2。同时，在链接中，我也想使用三个参数和`onClick`函数。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:28:09.273

您可以使用 a 的`name`或`properly`字段`html:link`来指定将包含您的参数的映射。有关详细信息，请参阅[html:link 。](http://struts.apache.org/1.x/struts-taglib/tagreference.html#html%3alink)

您可以[在此处](http://www.sitepoint.com/struts-de-mystified-parts-3-4/)看到一个示例，该示例使用带有 name 属性的前向链接来指定多个参数。

# php - 如何在zend2中向同一个控制器添加多个动作

> ID：13133108
> 
> 赞同：0
> 
> 时间：2012-10-30T05:22:04.823
> 
> 标签：php, zend-framework2

我需要为现有控制器添加“addAction”和“ **deleteAction** ”。这里我使用了zendframework-ZendSkeletonApplication-zf-release-2.0.3，我在IndexController中添加了这两个动作，并且我为`index`文件夹中的每个动作创建了2个页面。但它如何添加到`module.config.php`this 是我的 module.config.php 文件的代码

```
<?php

return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),                    
                ),

                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:01:57.267

这是我在项目中使用的示例路由配置，其中所有内容都基于根路径`/`

```
'router' => array(
    'routes' => array(
        'kz' => array(
            'type'    => 'literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Kennzahlen\Controller\Index',
                    'action'     => 'index',
                ),
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'add' => array(
                    'type' => 'literal',
                    'options' => array(
                        'route' => 'add',
                        'defaults' => array(
                            'action' => 'add'
                        )
                    )
                ),
                'edit' => array(
                    'type' => 'literal',
                    'options' => array(
                        'route' => 'edit',
                        'defaults' => array(
                            'action' => 'edit'
                        )
                    )
                )
            )
        ),
    ),
), 
```

命名的第一条路线`kz`具有 basePath`/`

之后，您有两个单独的子路由被调用`add` ，并且`edit`通过添加或编辑附加基本路径，因此它们的完整路由`/add`变为`/edit`

请考虑查看[在线文档](http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html)，以进一步澄清有关路由的问题，因为这确实是一个很好的起点。

或者，您可能还想查看ZendCon 的DASPRiDs [Router Presentation](http://stuff.dasprids.de/slides/zendcon2012/introducing-the-new-zend-framework-2-router/presentation.html#1)

# android - 我已尝试连接 android 和 wamp 以获取我的应用程序的登录界面。我没有得到输出

> ID：13133112
> 
> 赞同：0
> 
> 时间：2012-10-30T05:22:30.173
> 
> 标签：android, mysql, wampserver

我正在做一个名为电话簿的安卓应用程序。教师联系人保存在本地主机的数据库中。只有当用户提供有效密码时，联系人才必须显示。我已经为登录界面编写了程序。如果密码正确，则从用户那里获取输入（密码），它必须显示“登录成功”，否则显示“失败”。我的代码中出现运行时错误。请帮帮我。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    etUsn=(EditText)findViewById(R.id.edit);
    login=(Button)findViewById(R.id.button1);
    login.setOnClickListener(this);
}
public void onClick(View v)
{   
    httpclient = new DefaultHttpClient();   
    httppost= new HttpPost("http://10.0.2.2/log.php");
    Usn=etUsn.getText().toString();
    try
    {
        namevaluepair = new ArrayList<NameValuePair>(1);
        namevaluepair.add(new BasicNameValuePair("Usn",Usn));
        httppost.setEntity(new UrlEncodedFormEntity(namevaluepair));
        response=httpclient.execute(httppost);
        Toast.makeText(getBaseContext(), "hello", Toast.LENGTH_SHORT).show();
        if(response.getStatusLine().getStatusCode()==200)
        {
            entity=response.getEntity();
            if(entity!=null)
            {
                InputStream instream=entity.getContent();
               JSONObject jsonResponse=new JSONObject(convertStreamToString(instream));
                String retUsn;
                retUsn =jsonResponse.getString("usn");//table field
                if(Usn.equals(retUsn))
                {
                    SharedPreferences sp=getSharedPreferences("login details", 0);
                    SharedPreferences.Editor spedit= sp.edit();
                    spedit.commit();
                    Toast.makeText(getBaseContext(), "Success", Toast.LENGTH_SHORT).show();
                }
                else
                {
                    Toast.makeText(getBaseContext(), "Invalid usn", Toast.LENGTH_SHORT).show();
                }
            }
       }
    }catch (Exception e)
    {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "connection error", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:37:39.647

你得到什么类型的错误。将您的 logCat 错误放在这里。

我认为您的***onClick(View View)***方法存在问题。请检查您在登录按钮中放置标签的***login.xml 。***`android:onClick = 'onClick'`

# hash - SHA1 暴力破解程序

> ID：13133114
> 
> 赞同：2
> 
> 时间：2012-10-30T05:22:44.637
> 
> 标签：hash, sha1, brute-force

假设给定两个哈希码，您已经获得了字符 1 到字符 9 的值。其余字符是未知的。消息长度也是未知的。

碰巧这两个哈希码是从 2 个不同的明文生成的，但只有第一个字符不同，其余字符完全相同。

```
First hash code = *********************
Second hash code = *********************
plaintext1 = 1************************ 
plaintext2 = 2************************ 
```

能够暴力恢复明文吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:08:59.847

暴力破解总是可能的，这取决于你的意图，它是否适用。

## 寻找碰撞（密码登录）

如果你只需要找到一个冲突（一个导致相同哈希值的值），暴力破解是适用的。现成的 GPU 能够每秒计算[3 Giga SHA1 哈希值。](http://hashcat.net/oclhashcat-lite/#performance)这就是为什么像 SHA1 这样的快速散列函数对于散列密码来说是一个不好的选择，而应该使用像 BCrypt 或 PBKDF2 这样的密钥派生函数。

## 寻找原始密码

查找碰撞会比较快，查找原始密码（不仅仅是碰撞）可以使用更多时间，这取决于密码的强度，然后需要多少时间。

使用良好的密码散列函数，关于相同字符的知识应该不会给您带来任何好处。

## 明文修改（数字签名）

如果您想更改明文，使其产生相同的哈希值，那么您可能会花费一生来寻找这样的文本。这要困难得多，因为新文本最终应该是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:39:18.193

密码散列算法旨在将明文中的微小变化传播到整个计算的散列中。你问的那种攻击是不可行的。

# asp.net - 使用 Asp.net 在 Css 中的条件

> ID：13133117
> 
> 赞同：0
> 
> 时间：2012-10-30T05:23:15.810
> 
> 标签：asp.net, css

我们可以让变量传递值 Black 并且它将在 css 中条件

我有一个母版页：在我正在使用的那个页面中

一个进入数据库的变量，如果变量数据的值为黑色，则在 css 文件中检查该值，然后显示动态背景颜色。

css 与 asp.net

abc.cs 如果选择了变量 getcolor ="Black" 或除 css 代码之外的任何值，则此处为一个变量 getcolor

我想要

如果（getcolor =“黑色”）{}否则{

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:36:03.907

可能是，你可以写你的背景风格内联

```
<div style="background-color: <% If getcolor = "Black" Then Response.Write "black" Else Response.Write "AnyColor" %>;"> 
```

# android - AOSP 中解析 A ndroidManifest.xml 的代码在哪里？

> ID：13133118
> 
> 赞同：4
> 
> 时间：2012-10-30T05:23:22.427
> 
> 标签：android, parsing, android-manifest, android-source

我试图了解如何以及何时解析应用程序的 AndroidManifest.xml，但无法在 AOSP 源中找到它。我也搜索[了 AndroidXRef](http://androidxref.com/4.1.1/)，但没有看到任何命中（可能是因为此解析是作为二进制 XML 完成的，因此标签（例如`android:name`）不是字符串。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T09:36:10.973

包的解析在`frameworks/base/core/java/android/content/pm/PackageParser.java`. 你需要`parsePackage`方法。

！

# iphone - 关于委托和 XMLParser iPhone

> ID：13133125
> 
> 赞同：1
> 
> 时间：2012-10-30T05:24:35.307
> 
> 标签：iphone, objective-c, mpmovieplayercontroller, bonjour, nsnetservice

我对 MAC 和 iPhone 完全陌生。我将开发一个应用程序，该应用程序执行与包含一些电影文件的 Web 服务服务器的连接以打开它。有没有人给我一些指导来学习或指导我如何开发它。现在我发现我可以使用 NSNetService 或 CFNetService 类。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:27:32.540

代表由@protocal 创建，使用此链接 [基本作为代表示例](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

xml解析器简单示例 XML解析器[示例](http://www.theappcodeblog.com/2011/05/09/parsing-xml-in-an-iphone-app-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:53:55.763

委托 - 当事件发生时，委托将消息从一个对象传递到另一个对象。用于使用委托方法实现协议。

Xml Parser：为了使用 xml 解析器解析服务器响应，xml 解析器中有三个主要方法 1) didstartelement 2) found characters 3) didendelement

# vbscript - 从 Excel VBA 调用 .vbs 脚本

> ID：13133126
> 
> 赞同：14
> 
> 时间：2012-10-30T05:24:36.087
> 
> 标签：vbscript

是否可以在需要时从 VBA 代码调用 .vbs 脚本？如果可能的话，你能给我一个如何做到这一点的示例代码吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T11:13:23.167

要运行文件：

```
Shell "wscript c:\null\a.vbs", vbNormalFocus 
```

如果 VBS 想要使用控制台，请替换`wscript`为。`cscript`

或者您可以添加对*[Microsoft 脚本控件](https://msdn.microsoft.com/en-us/library/aa227633(v=vs.60).aspx)*的引用并直接与 VBScript 运行时交互以执行 VBS 代码、程序等；

```
Dim scr As ScriptControl: Set scr = New ScriptControl
scr.Language = "VBScript"
scr.AddCode "sub T: msgbox ""All Hail Cthulhu"": end sub"
scr.Run "T" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-28T15:10:34.390

我只想添加到亚历克斯的答案，在某些环境中，必须以下列方式创建对象：

```
set scr = CreateObject("MSScriptControl.ScriptControl") 
```

如果亚历克斯将此添加到他的答案中，我将删除这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-15T08:03:59.520

尝试这样的事情

```
ChDir ThisWorkbook.Path
Shell "wscript " & ThisWorkbook.Path & "\your.vbs", vbNormalFocus 
```

它帮助了我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-25T07:53:23.067

`"""`如果您的路径名包含对我来说，您可能想要使用`-`以下解决了这个问题：

```
Shell "cscript """ & ActiveWorkbook.Path & """\your.vbs", vbNormalFocus 
```

# objective-c - iOS：生成唯一连续数字且现有数字可移动的最佳方法？

> ID：13133127
> 
> 赞同：1
> 
> 时间：2012-10-30T05:24:36.773
> 
> 标签：objective-c, ios, unique

我需要生成唯一的数字，我可以想到连续的方式，例如，我可以有一个从 0 开始的计数器，每次需要一个唯一的数字时，我都会返回计数器并将计数器加 1，这很简单，直到我可能有很多超出数据类型范围的唯一数字（比如 int），此外，生成的唯一数字，例如，计数器是 10，但不再使用 4 和 5，因此它们可以重新使用过，如何在不将所有数字保留在数据结构中的情况下使用可重用数字？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:54:59.007

你能用你已经分发的数字代替吗？如果是这样，那么只要返回任何数字，就用它替换最近分发的一个并减少分配计数器。如果它是最近返回的，则跳过替换。

否则，我想你能做的最好的事情就是保持一个排序的范围数组。

要分配新号码：

如果数组为空，则创建一个新范围并返回其中唯一的数字。

否则，获取数组中的第一个范围并将其长度增加 1。返回该数字。检查这是否使前两个范围合并。如果是这样，则将它们合并到一个范围内。

要返回一个数字：

找到它所在的范围（例如，通过二分搜索；查看`NSOrderedSet`您的部署计划是否允许）。如果返回的数字位于范围的任一端，则只需缩小范围。否则将一分为二，以返回的数字作为孔。

# iphone - 在 sqlite(iPhone) 中选择查询

> ID：13133129
> 
> 赞同：1
> 
> 时间：2012-10-30T05:24:50.907
> 
> 标签：iphone, sqlite

从数据库中选择数据时出现问题。我使用以下查询在数据库中创建了“文件夹表”

```
CREATE TABLE foldertable(fid integer primary key autoincrement,foldername text); 
```

这是我根据 fid(folderid) 获取文件夹名称的代码

```
-(NSString *)getFolderFromDatabase:(int)folderId
{
        NSString * retriveFolderName;

        UIApplication * application=[UIApplication sharedApplication];
        ScrapMemoAppDelegate * appDelegate=application.delegate;
        NSString * destinationPath=[appDelegate getDestinationPath];
        sqlite3 * database;
        int retriveWhere=folderId;

        if(sqlite3_open([destinationPath UTF8String], &database)==SQLITE_OK)
        { 
            const char * query="select foldername from foldertable where fid = ?;";
            sqlite3_stmt * statement;
            if(sqlite3_prepare_v2(database, query, -1, &statement, NULL)==SQLITE_OK)
            {
                if (sqlite3_step(statement)==SQLITE_DONE)
                {
                    sqlite3_bind_int(statement, 1, retriveWhere);
                    retriveFolderName=[NSString stringWithCString:sqlite3_column_text(statement,0) encoding:NSASCIIStringEncoding];

                }
                else 
                {
                    NSLog(@"Error %s",sqlite3_errmsg(database));
                }

                sqlite3_reset(statement);
            }
            sqlite3_close(database);
        }
        return retriveFolderName;
} 
```

但是当我在终端上触发相同的查询时，我得到了空文件夹名称，它给出了正确的名称。请为我提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:33:16.687

通过查看代码，主要问题是您尝试执行（步进）查询，然后尝试绑定`fid`. 您需要先进行绑定。

# winforms - 在c#中更改窗口窗体的位置？

> ID：13133131
> 
> 赞同：0
> 
> 时间：2012-10-30T05:25:36.123
> 
> 标签：winforms

在窗口应用程序中，我使用 c# 创建了一个表单并将可见的错误最小化、最大化按钮和表单边框设置为无，我在表单顶部放置了一个面板，在该面板中我放置了关闭、最小化按钮。现在我如何拖动窗口窗体。请有任何参考。我的代码是

```
 this.ControlBox = false;
        this.MaximizeBox = false;
        this.MinimizeBox = false;
        this.FormBorderStyle = FormBorderStyle.None; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:57:19.383

只需为您的`MouseDown`,`MouseMove`和`MoueUp`事件注册`Panel`

```
 bool MouseDownFlag = false;
    Point start = new Point(0, 0);

    private void panel1_MouseDown(object sender, MouseEventArgs e)
    {
        start = new Point(e.X, e.Y);
        MouseDownFlag = true;
    }

    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        if (MouseDownFlag)
        {
            Point newPoint = new Point();
            newPoint.X = this.Location.X - (start.X - e.X);
            newPoint.Y = this.Location.Y - (start.Y - e.Y);

            this.Location = newPoint;
        }
    }

    private void panel1_MouseUp(object sender, MouseEventArgs e)
    {
        MouseDownFlag = false;
    } 
```

# velocity - 如何从 Velocity Engine 检索无效引用？

> ID：13133132
> 
> 赞同：1
> 
> 时间：2012-10-30T05:25:38.843
> 
> 标签：velocity

我想知道是否有办法在调用 VelocityEngine.evaluate 后检索 Velocity 中的无效引用列表。

[Velocity Eventhandler](https://stackoverflow.com/questions/7649289/velocity-eventhandler)有一些关于创建我在 VelocityEngine 中使用的**AppSpecificInvalidReferenceEventHandler**的很好的信息，如下所示。

```
<bean id="templateVelocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
        <props>
            <prop key="resource.loader">class</prop>
            <prop key="class.resource.loader.class">org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader</prop>
            <prop key="class.resource.loader.cache">true</prop>         
            <prop key="eventhandler.invalidreferences.class">xyz.util.AppSpecificInvalidReferenceEventHandler,org.apache.velocity.app.event.implement.ReportInvalidReferences</prop>
        </props>
    </property>     
</bean> 
```

在velocity的评估调用之后，我看到显示AppSpecificInvalidReferenceEventHandler正在工作的日志语句，但是如果我如上所述在Spring上下文中声明*eventhandler.invalidreferences.class* ，我看不到如何检索该类及其InvalidReferenceInfo列表。

填充和评估模板如下所示：-

```
VelocityContext context = new VelocityContext();
StringWriter bodyWriter = new StringWriter();

context.put("body", "some body text!");

boolean result = templateVelocityEngine.evaluate(context, bodyWriter, "logTag", "template ${body} text here loaded from a file"); 
```

所以我想做类似下面的事情（除了 ec.getInvalidReferenceEventHandlers() 是空的）

```
EventCartridge ec = context.getEventCartridge();
Iterator it = ec.getInvalidReferenceEventHandlers();

while (it.hasNext()) {
    Object obj = it.next();

    if (obj instanceof ReportInvalidReferences) {
        AppSpecificInvalidReferenceEventHandler handler = (AppSpecificInvalidReferenceEventHandler) obj;
        List invalidRefs = handler.getInvalidReferences();

        if (!invalidRefs.isEmpty()) {
            // process the list of invalid references here
        }
    }
} 
```

到目前为止，我发现的唯一解决方法是不在 Spring bean 中声明*eventhandler.invalidreferences.class*，即我会执行以下操作

```
ReportInvalidReferences reporter = new AppSpecificInvalidReferenceEventHandler();
EventCartridge ec = new EventCartridge();
ec.addEventHandler(reporter);
ec.attachToContext(context);
VelocityContext context = new VelocityContext();
StringWriter bodyWriter = new StringWriter();

context.put("body", "some body text!");

boolean result = templateVelocityEngine.evaluate(context, bodyWriter, "logTag", "template ${body} text here loaded from a file"); 
```

使用上面额外的预速度评估设置代码（并在 Spring bean 中注释*eventhandler.invalidreferences.class*），然后我可以调用

```
ec.getInvalidReferenceEventHandlers(); 
```

我在返回的迭代器中取回 AppSpecificInvalidReferenceEventHandler ......

# python - Python：在类构造函数中初始化一个列表

> ID：13133133
> 
> 赞同：0
> 
> 时间：2012-10-30T05:25:54.607
> 
> 标签：python

我正在尝试在这样的类中初始化一个列表：

```
class Node():
    def __init__(self):
        self.info = None
        self.word = ''
        for i in range(256):
            self.ptrs[0] = None

if __name__ == '__main__':
    n = Node() 
```

现在这会引发错误

```
self.ptrs[0] = None
AttributeError: Node instance has no attribute 'ptrs' 
```

我确信我错过了一些愚蠢的东西。它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:27:49.353

我想你想要这个：

```
class Node():
    def __init__(self):
        self.info = None
        self.word = ''
        self.ptrs = [None]*256 
```

# javascript - Google Plus 计数器动画是如何工作的？

> ID：13133134
> 
> 赞同：3
> 
> 时间：2012-10-30T05:26:03.147
> 
> 标签：javascript, css, google-plus, google-plus-one

有人知道 Google Plus 的投票后动画是如何工作的吗？

这就是我的意思：[http ://cl.ly/image/0h1l1a181j1O](http://cl.ly/image/0h1l1a181j1O)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:48:46.963

从我通过单步执行代码可以看出，他们：

1.  将该数字拆分为内联块元素
2.  需要动画的部分（如果数字不是9，则为最后一位，如果为9，则为整数）明确设置其高度，并将其溢出设置为隐藏。
3.  这个新元素的内容设置为 {number}<br>{number + 1}<br>{number}
4.  这个新元素的 scrollTop 属性被动画以创建滚动效果
5.  效果结束后，它们将拆分的元素替换为新的数字。

我不确定这个元素的第三个数字是什么，可能是为了让向后滚动更容易。

# jquery - Jquery 打开和关闭模态对话框 Asp.net 脚本

> ID：13133136
> 
> 赞同：0
> 
> 时间：2012-10-30T05:26:13.037
> 
> 标签：jquery, asp.net, methods, dialog, modal-dialog

我似乎无法使用按钮关闭模式，网页加载并自动弹出带有覆盖的模式。但是，我想在自动加载页面时不使用按钮打开模式。

这是我的模式和打开和关闭按钮：

**模态，叠加和内容：**

```
 <div id='overlay'>
       </div>
       <div id='modal'>
           <div id='content' style="background-color: #767A8F; font-family: Segoe UI; font-size: Medium; z-index: 1; left: 280px; top: 800px; position: fixed; height: 160px; width: 20px;">
               <br />
               <Uc2:EditCurrentSet ID="EditCurrentSet" runat="server" />
        </div> 
```

**关闭按钮：**

```
<asp:Button ID="close" class="close" runat="server" BackColor="#525663" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1pt" Font-Size="Large" ForeColor="White" Style="font-family: Segoe UI;                                 margin-left: 0px; position: absolute; top: 418px; left: 5px; width: 64px; height: 44px; z-index: 1; margin-top: 0px; right: 112px;" Text="Cancel" /> 
```

**打开按钮：**

```
<asp:Button class="open" ID="open" runat="server" BackColor="#525663" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1pt" CommandName="MoveNext" Font-Size="Large" ForeColor="White" Style="font-family: Segoe UI; margin-left: 0px; position: relative; top: 25px; left: -25px; width: 152px; height: 41px;" Text="Edit Information" /> 
```

**和 JavaScript 代码：**

```
<script src="js/jquery-ui-1.8.14.js" type="text/javascript"></script>

<script>

           var modal = (function () {
               var method = {},$overlay,$modal,$content,$close,$open;

               // Center the modal in the viewport
               method.center = function () {
                   var top, left;
                   top = Math.max($(window).height() - $modal.outerHeight(), 0) / 2;
                   left = Math.max($(window).width() - $modal.outerWidth(), 0) / 2;
                   $modal.css({ top: top + $(window).scrollTop(), left: left });
               };

               // Open the modal
               method.open = function (settings) { };

               // Close the modal
               method.close = function () { };

               return method;
           } ());

           $overlay = $('<div id="overlay"></div>');
           $modal = $('<div id="modal"></div>');
           $content = $('<div id="content"></div>');
           $close = $('<a id="close" href="#">close</a>');
           $open = $('<a id="open" href="#">open</a>');

           $modal.hide();
           $overlay.hide();
           $modal.append($content, $close);

           $(document).ready(function () {
               $('body').append($overlay, $modal);
           });

           method.center = function () {
               var top, left;

               top = Math.max($(window).height() - $modal.outerHeight(), 0) / 2;
               left = Math.max($(window).width() - $modal.outerWidth(), 0) / 2;

               $modal.css({
                   top: top + $(window).scrollTop(),
                   left: left + $(window).scrollLeft()
               });
           };

           method.open = function (settings) {
               $content.empty().append(settings.content);

               $modal.css({
                   width: settings.width || 'auto',
                   height: settings.height || 'auto'
               })

               method.center();

               $(window).bind('resize.modal', method.center);

               $modal.show();
               $overlay.show();
           };

           method.close = function () {
               $modal.hide();
               $overlay.hide();
               $content.empty();
               $(window).unbind('resize.modal');
           };

           $open.click(function (e) {
               e.preventDefault();
               method.open();
           });

           $close.click(function (e) {
               e.preventDefault();
               method.close();
           });

           modal.open({ content: "Howdy" });

           modal.open({ content: "<p>Howdy</p>" });

           modal.open({ content: $("<p>Howdy</p>"), width: "500px", height: "200px" });

           // Ajax
           $.get('ajax.html', function (data) {
               modal.open({ content: data });
           });

       </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:49:10.260

**详细信息：**将其添加到 Jquery 单击事件中。不要忘记添加 e.preventDefault 以停止页面回发，否则只需使用 HTML 按钮。

```
$('.Open').click(function (e) 
{
   var method = {},..... // Your normal code

   e.preventDefault(); 
} 
```

**可选：**也许使用 Jquery 对话框并使其成为模态会更好地满足您的需求。更多信息：[jQuery 对话框](http://jqueryui.com/dialog/#modal)

# inno-setup - InnoSetup：找出重启的原因

> ID：13133138
> 
> 赞同：7
> 
> 时间：2012-10-30T05:26:16.183
> 
> 标签：inno-setup, restart

我有一个安装我的应用程序及其随附文件的 Inno Setup 脚本。在某些系统上需要重新启动，而在某些系统上则不需要。我想找出需要重新启动的原因。我将如何最聪明地做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:06:27.463

出于调试目的，您可以查看内部

`HKLM\System\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations`

查看是否有任何移动/重命名/删除排队等待下次重新启动。

（[Sysinternals 实用程序查看器](http://technet.microsoft.com/en-us/sysinternals/bb897556.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:15:52.537

在运行安装时使用`/LOG`，然后查看它生成的日志文件（默认情况下在 中`%TEMP%`）。它应该在那里相当清楚地显示哪些文件在重新启动时排队等待替换，或者哪些其他原因导致发出重新启动请求。

通常重启是由过度使用触发的，`restartreplace`而没有使用类似的东西`AppMutex`来确保应用程序在安装之前已正确关闭，或者从`[Run]`.

# libevent - 如何在 bufferevent_socket_connect 期间出错时在事件处理程序中获取对等地址？

> ID：13133142
> 
> 赞同：1
> 
> 时间：2012-10-30T05:26:54.503
> 
> 标签：libevent

在 bufferevent_socket_connect 期间发生错误时，我没有找到在事件处理程序中打印对等方地址的方法。有人可以帮忙吗？

我尝试了什么：

1.  在 bufferevent_getfd() 上使用 getpeername() 失败，因为未建立连接

2.  在事件处理程序的最后一个参数中传输对等点的地址也失败了，因为该指针在下一次连接尝试到另一个对等点时发生变化。

代码示例：

```
void eventcb(struct bufferevent *bev, short events, void *ptr)
{
    if (events & BEV_EVENT_ERROR)
    {
        // I whant to print peer's address on error in bufferevent_socket_connect
        bufferevent_free(bev);
    }
}

int main()
{
    ...
    struct sockaddr_storage obj;
    ...
    while(get_next_obj(obj))
    {
        evutil_socket_t sock = socket(obj.ss_family, SOCK_STREAM, 0);
        evutil_make_socket_nonblocking(sock);
        evutil_make_listen_socket_reuseable(sock);
        evutil_make_socket_closeonexec(sock);
        struct bufferevent *evbev = 
            bufferevent_socket_new(evbase, sock, 0);
        bufferevent_set_timeouts(evbev, &sec5, &sec5);
        bufferevent_setcb(evbev, readcb, NULL, eventcb, evbase);
        bufferevent_enable(evbev, EV_READ|EV_WRITE);
        bufferevent_write(evbev, some_data.data(), some_data_sz);
        if(bufferevent_socket_connect(evbev, (struct sockaddr *)&obj, sizeof(sockaddr_storage)) < 0) {
            continue;
        }
        ...
    }
    ...
} 
```

# c++ - 带函数声明的赋值

> ID：13133143
> 
> 赞同：2
> 
> 时间：2012-10-30T05:27:00.037
> 
> 标签：c++

我正在尝试学习 c++ 并且正在关注[这本在线书籍](http://www.cprogramming.com/c++book/jumping_into_c++_sample.pdf)，虽然大部分都很好，但有时我觉得事情没有得到很好的解释。

在第 163 页，当谈到链表时，他展示了以下代码：

```
p_enemies = EnemySpaceShip* addNewEnemyToList( p_enemies ); 
```

它没有完全填充上下文，但我相信 p_enemies 将是一个声明的指针，而 addNewenemyToList 将是一个定义的函数。我想知道的是表达式将如何工作，这是正确的代码。这对我来说没有意义，因为它看起来像一个方法声明，在那里有返回类型，但它在赋值之后就在那里。这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:17:25.280

该代码段没有意义。

这是我认为这个片段有效的唯一方法：

```
p_enemies = (EnemySpaceShip*) addNewEnemyToList(p_enemies); 
```

结果：如果 p_enemies 是 EnemySpaceShip 类型的指针，则在将返回值转换为 EnemySpaceShip 指针后，这会将“addNewEnemyToList”函数的返回值分配给 p_enemies。否则，该行将失败。

# php - ZF2：使用数据库中的日期填充表单中的选择元素

> ID：13133144
> 
> 赞同：1
> 
> 时间：2012-10-30T05:27:01.867
> 
> 标签：php, zend-form, zend-framework2

我有一个简单的一对多关系的数据库，如下所示：

```
表公司类别
行 ID ID
         姓名 姓名
         类别_ID
```

我有一个表格，我可以在其中添加、编辑和删除公司或类别的名称，效果很好。通过 ID 输入类别也可以，但使用起来显然很糟糕。我想要的是表单中的一个简单选择元素，可以从现有类别中进行选择。

我必须生成的代码`<select>`是：

```
$this->add(array(
        'name' => 'Categorie',
        'type'  => 'Zend\Form\Element\Select',
        'attributes' => array(
            'options'  => $categories,
        ),
        'options' => array(
            'label' => 'Categorie',
        ),
)); 
```

根据我在（极其稀疏的）ZF2 文档中可以找到的内容，我应该使用 a`Hydrator`将数据提取到`$categories`变量中，但我不确定从那里去哪里。

任何类型的示例或提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:49:56.643

[这](https://web.archive.org/web/20160324000541/http://samminds.com/2012/07/a-blog-application-part-1-working-with-doctrine-2-in-zend-framework-2/)是一篇关于表单的非常好的文章。

我的解决方案基于本教程，并且（几乎）运行良好。我不知道您是否将 Doctrine 用于您的项目，但我认为这将是一个非常好的主意！

我也大量使用选择元素。在给定的字段集中，我使用这段代码为选择生成值选项：

```
$opt= Registry::get('entityManager')->getRepository('My\Entity\Categories')
                ->getCategoriesForCombobox();
$this->get('category')->setValueOptions($opt); 
```

如果你（计划）使用 Doctrine，你应该非常仔细地阅读 Doctrine 文档中关于存储库的信息。如果您在表单中使用集合，那么关于关联的主题也是必读的。

# bloomberg - 从中性服务器连接 OPEN API

> ID：13133147
> 
> 赞同：5
> 
> 时间：2012-10-30T05:27:17.537
> 
> 标签：bloomberg

我想在未安装彭博终端的服务器上运行我的应用程序（基于 OPEN API）。但我必须经过彭博服务器。

查看“blpapi-developers-guide.pdf”第80页的“图7-2：服务器API：服务器模式：IP地址授权”。

请告知如何做到这一点。

或者如何设置 EMRS 以允许应用程序获得使用权利和服务？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T17:40:06.827

**重要提示：**此方法与 Bloomberg 许可协议不兼容。仅将其用于调试目的。

[从这里](http://sourceforge.net/projects/pjs-passport/)下载 PasPort 应用程序并安装它。PassPort 是一个简单的端口转发实用程序。该程序作为 NT 服务运行。它可以通过简单的 Windows GUI 轻松管理。

例如，您的带有 Bloomberg 终端的计算机的 ip 为 192.168.8.40，那么您需要设置 PassPort 应用程序，如下所示：

![在此处输入图像描述](../Images/3525503f1413b50428d42066e3043652.png)

![在此处输入图像描述](../Images/1aa588c1fec2d20456ea756fe0404e1e.png)

![在此处输入图像描述](../Images/df521d3fc903d75576ea46357043243c.png)

不要忘记向 Windows 中的防火墙添加规则：

![在此处输入图像描述](../Images/1b676066a9e44d28dbcd72ea454bf100.png)

![在此处输入图像描述](../Images/0347588882b7c5a0c09dfd22c2710eda.png)

现在您可以从本地网络上的任何计算机访问终端。此外，您可以设置对防火墙后终端的访问。

例如，您可以在 ip 192.168.8.41 的计算机上运行这样的命令：

```
java -jar SimpleFieldInfoExample-3.6.1-0.jar -ip 192.168.8.40 -p 8194 
```

它现在正在工作！

当然，您还需要使用“开始”菜单在 Bloomberg 终端上运行 bbcomm.exe：

![在此处输入图像描述](../Images/35719a03251f732c4cce3a1b101d57a8.png)

![在此处输入图像描述](../Images/948a48b31e64373852f6be489fa7a6e7.png)

可以使用以下命令在没有任何窗口的情况下激活 bbcomm：

```
java -jar SimpleFieldInfoExample-3.6.1-0.jar -ip localhost -p 8194 
```

或者您可以启动“Bloomberg API DEMO”应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-13T10:10:54.740

有一种更简单的方法来传递端口：

```
netsh interface portproxy add v4tov4 listenport=8194 listenaddress=192.168.0.101 connectport=8194 connectaddress=localhost 
```

# sql - 从多个相关表中删除行

> ID：13133148
> 
> 赞同：2
> 
> 时间：2012-10-30T05:27:24.580
> 
> 标签：sql, oracle, plsql, oracle10g, cascading-deletes

标识符上有三个一一对应的表。我需要删除三个表中符合条件 A.ID = B.ID = C.ID 的所有记录

现在我按以下方式进行：

```
DECLARE
    CURSOR CUR IS 
        SELECT C.ID FROM A 
        INNER JOIN B ON A."ID" = B."ID" 
        INNER JOIN C ON B."ID" = C."ID"
        WHERE A.STATUS = 'ERROR';
    IDX NUMBER;
BEGIN
    FOR REC IN CUR LOOP 
        IDX := REC.ID;
        DELETE FROM C WHERE C."ID" = IDX;
        DELETE FROM B WHERE B."ID" = IDX;
        DELETE FROM A WHERE BP."ID" = IDX;
    END LOOP;
    COMMIT;
END; 
```

大量数据，这种方式可以长期运行。有什么方法可以更快的删除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:10:34.323

您可以创建一个 PL/SQL 类型来存储 ID。

```
CREATE TYPE t_ids AS TABLE OF NUMBER; 
```

从表中删除所有`a`符合条件的记录，并将 ID 返回到该类型的变量中。`b`然后从`c`这些 ID 中删除所有记录。

```
DECLARE
  ids_to_delete   t_ids;
BEGIN
  DELETE FROM a
   WHERE a.status = 'ERROR'
     AND EXISTS ( SELECT 1 FROM b WHERE b.id = a.id )
     AND EXISTS ( SELECT 1 FROM c WHERE c.id = a.id )
  RETURNING a.id
  BULK COLLECT INTO ids_to_delete;

  DELETE FROM b
   WHERE id IN ( SELECT COLUMN_VALUE FROM TABLE( ids_to_delete ) );

  DELETE FROM c
   WHERE id IN ( SELECT COLUMN_VALUE FROM TABLE( ids_to_delete ) );
END; 
```

这应该会执行得更好，因为它不需要循环并且在三个 SQL 语句中完成所有事情，而不是每个 ID 三个语句。

# c# - 如何清除另一个组合框的 SelectionChanged 事件中的组合框项目

> ID：13133152
> 
> 赞同：0
> 
> 时间：2012-10-30T05:27:51.053
> 
> 标签：c#, wpf

我在 WPF 应用程序中有两个组合框...

在第一个 ComboBox SelectionChanged 事件中，我想清除第二个组合框项目....

```
private void cmbBoard_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    cmbClass.DataContext = this;
    cmbClass.Items.Clear();

    CVariables.StrSQLQueryPub = "select ClassID,Class from QB_Class WHERE BoardID='" + strBoardId + "' ORDER BY Class";
    CFunctions.fnToFillDataTable(CFunctions.Con, CVariables.StrSQLQueryPub);
    DataTable dt = CVariables.DTable;

    cmbClass.ItemsSource = dt.DefaultView;
    cmbClass.DisplayMemberPath = "Class";
    cmbClass.SelectedValuePath = "ClassID";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:30:55.633

只需`Clear()`调用. `Items`_`ComboBox`

```
cmbClass.Items.Clear(); 
```

你在你的一段代码中做对了，但后来你也用`dt.DefaultView`. 所以这样你可能不会得到预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T07:55:33.783

只需提供此代码

```
 comboBox1.Items.Clear() 
```

# c# - 将日期从从 excel 读取的 mm/dd/yyyy 转换为 yyyy/mm/dd，然后再发送到数据库

> ID：13133159
> 
> 赞同：0
> 
> 时间：2012-10-30T05:28:10.757
> 
> 标签：c#, asp.net, sql, sql-server, date

我正在将 Excel 工作表导入 SQL Server 数据库。我可以上传数据，但 Excel 中有一个包含日期格式的列`mm/dd/yyyy`。我希望`yyyy/mm/dd`在将其发送到数据库之前将其转换为：

```
DataTable dt7 = new DataTable();
dt7.Load(dr);
DataRow[] ExcelRows = new DataRow[dt7.Rows.Count];

// Bulk Copy to SQL Server
using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
{
  bulkCopy.DestinationTableName = "ExcelTable";
  dt7.Rows.CopyTo(ExcelRows, 0);

  for (int i = 0; i < ExcelRows.Length; i++)
  {
    DateTime oldDate =Convert.ToDateTime(ExcelRows[i]["data"]).Date;
    DateTime newDate = Convert.ToDateTime(oldDate).Date;
    ExcelRows[i]["data"] = newDate.ToString("yyyy/MM/dd");
  }
  bulkCopy.WriteToServer(ExcelRows); 
```

> 错误：DateTime oldDate = Convert.ToDateTime(ExcelRows[i]["data"]).Date;
> 错误：无法将对象从 DBNull 转换为其他类型。

在我看来，它正在阅读错误的专栏或其他内容，因为它说`cannot be cast from DBnull`。Excel 工作表有两列：

```
id | data (which is date) 
```

我尝试替换`ExcelRows[i]["data"]`为，`ExcelRows[i][1]`但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:39:45.190

这是因为 ExcelRows[i]["data"] 返回 DBNull。

发生这种情况时你应该处理它

```
 if (ExcelRows[i]["data"] == DBNull.Value)
    {
        // Include any actions to perform if there is no date
    }
    else
    {
        DateTime oldDate = Convert.ToDateTime(ExcelRows[i]["data"]).Date;
        DateTime newDate = Convert.ToDateTime(oldDate).Date;
        ExcelRows[i]["data"] = newDate.ToString("yyyy/MM/dd");
    } 
```

# android - 以编程方式更改android代码中的按钮样式

> ID：13133163
> 
> 赞同：0
> 
> 时间：2012-10-30T05:28:30.390
> 
> 标签：android, android-layout, android-button

我希望以编程方式使用 android 代码更改按钮背景颜色、文本颜色、文本大小。

```
 Button btnLoadMore = new Button(this);
    btnLoadMore.setText("Load More");

    // Adding Load More button to lisview at bottom
    lv.addFooterView(btnLoadMore); 
```

在上面的代码中成功设置了加载更多文本。但我必须在下面写

```
btnLoadMore.setTextColor("#FF1493"); 
```

意味着我得到以下错误

```
The method setTextColor(int) in the type TextView is not applicable for the arguments 
```

（细绳）

我该如何解决这个错误。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T06:01:39.883

尝试：

```
Color.ParseColor("color hex value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:34:14.167

像这样使用：

```
TextView text = (TextView) findViewById(R.id.text);
text.setTextColor(Color.parseColor("#FFFFFF")); 
```

检查此链接：[如何在代码中设置 TextView 的文本颜色？](https://stackoverflow.com/questions/4602902/how-to-set-text-color-of-textview-by-coding)

# soap - Camel CXF POJO模式使用Java DSL

> ID：13133167
> 
> 赞同：7
> 
> 时间：2012-10-30T05:28:51.110
> 
> 标签：soap, cxf, apache-camel

我有一个预先存在的 Web 服务“连接”(SOAP)，如果可能的话，我想在不使用 Swing 框架的情况下调用。我遵循了使用 cxf/wsdl2java 工具生成我的 java 文件的联系优先开发。

我希望从 java 对象中提取用户名和密码并放置在 SOAP 对象中，然后发送到我的本地主机 Web 服务。

将 Connect 对象作为主体发送到“direct:start”时，出现异常...

```
Caused by: java.lang.IllegalArgumentException: Get the wrong parameter size to invoke the out service, Expect size 2, Parameter size 1\. Please check if the message body matches the CXFEndpoint POJO Dataformat request. 
```

我检查过第一个参数实际上是传入的 Connect 对象的一个​​实例。

我是否需要在其中一个类中添加一些额外的注释，测试方法是否无效或者
我应该遵循另一种模式？

```
public class TestConnectCXF extends CamelTestSupport
{
    @Override
    protected RouteBuilder createRouteBuilder() throws Exception
    {
        return new RouteBuilder()
        {
            String cxfAddressLine = "cxf:http://localhost:8081/nuxeo/webservices/privateadservice?wsdlURL=wsdl/privateadservice.wsdl" //
                    + "&dataFormat=POJO" //
                    + "&serviceClass=com.sandbox.camelfeed.PrivateAdServiceInterface" //
                    + "&serviceName={http://ws.sandboxtest.com/}PrivateAdService" //
                    + "&synchronous=true" //
                    + "&loggingFeatureEnabled=true" //
                    + "&portName={http://ws.sandboxtest.com/}PrivateAdServiceInterfacePort";
            @Override
            public void configure() throws Exception
            {
                from("direct:start").to(cxfAddressLine).to("mock:end");
            }
        };
    }

    @Test
    public void testConnectViaPojo() throws InterruptedException
    {
        Connect connectToServer = new Connect();
        connectToServer.setUserName("FakeUser");
        connectToServer.setPassword("scrubbed");
        template.sendBody("direct:start", connectToServer);
        Thread.sleep(1000);
    }
} 
```

我是骆驼和网络服务的新手，所以任何有用的指针都将不胜感激。

**附加信息**

使用骆驼 2.10、Java 1.6

**从 wsdl2java 生成的类**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "connect", propOrder = {
   "userName",
   "password"
})
public class Connect {

protected String userName;
protected String password;

public String getUserName() {
    return userName;
}

public void setUserName(String value) {
    this.userName = value;
}

public String getPassword() {
    return password;
}

public void setPassword(String value) {
    this.password = value;
}
}

@WebService(targetNamespace = "http://ws.sandboxtest.com/", name = "PrivateAdServiceInterface")
@XmlSeeAlso({ObjectFactory.class})
public interface PrivateAdServiceInterface {

        // Omitted Code relating to other web calls

        @WebResult(name = "return", targetNamespace = "")
        @RequestWrapper(localName = "connect", targetNamespace = "http://ws.sandboxtest.com/", className = "com.sandbox.camelfeed.Connect")
        @WebMethod
        @ResponseWrapper(localName = "connectResponse", targetNamespace = "http://ws.sandboxtest.com/", className = "com.sandbox.camelfeed.ConnectResponse")
        public java.lang.String connect(
            @WebParam(name = "userName", targetNamespace = "")
            java.lang.String userName,
            @WebParam(name = "password", targetNamespace = "")
            java.lang.String password
        ) throws ClientException_Exception;
    }

@XmlRegistry
public class ObjectFactory {
{
    // Omitted other web calls information
      private final static QName _Connect_QNAME = new QName("http://ws.sandboxtest.com/", "connect");

    @XmlElementDecl(namespace = "http://ws.sandboxtest.com/", name = "connect")
    public JAXBElement<Connect> createConnect(Connect value) {
        return new JAXBElement<Connect>(_Connect_QNAME, Connect.class, null, value);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:21:14.343

根据我的经验，在 Camel 中有一些事情，例如调用 SOAP Web 服务或进行 REST 调用，在自定义处理器中比使用 CXF、HTTP 或 HTTP4 等组件更容易完成。

我通常使用 Spring，因此我倾向于使用 Spring REST 模板或 JaxWsPortProxyFactoryBean（用于 Web 服务调用）进行出站调用。

下面是一个使用 JAX-WS 调用的示例：

```
 public class WebServiceProcessorBean {

    @Autowired
    private JAXWSProxy theProxy;

    public void callWebservice(Exchange exchange) {
        Response response = theProxy.call();

        //Do something with the response and Exchange.
    }
  } 
```

Spring应用上下文中的定义：

```
<bean id="theProxyService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
        <property name="serviceInterface" value="XXX"/>
        <property name="wsdlDocumentUrl" value="http://xxxxx.wsdl"/>
        <property name="namespaceUri" value="xxxx"/>
        <property name="serviceName" value="xxxx"/>
        <property name="portName" value="xxxxx"/>
</bean> 
```

将 Spring 应用程序上下文中定义的 WebServiceProcessorBean 与 beanRef() DSL 方法一起使用。

```
.beanRef("theProxyService", "callWebservice") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:01:13.367

我也尝试使用 CXF 深入研究 Apache Camel:)。

我认为抛出异常是关于参数数量的问题。 `template.sendBody(what_is_called, input_parameter_s, output_parameter);`

输出参数是调用 cxf webservices 最有可能的返回值。

# dynamic - 基于 UITextView 动态调整 CGRect 的大小

> ID：13133169
> 
> 赞同：1
> 
> 时间：2012-10-30T05:28:57.463
> 
> 标签：dynamic, uiview, uitextview

好吧，我不确定如何解释这一点。但是这里。我有一个 UITextView ，其内容是动态填充的。我已经研究出如何根据其中的文本数量自动调整大小。可能是 1 行，也可能是 10 行。

现在我有一个自定义的 UIView，它下面有一个圆角的 Rect 代码。

.h 文件

```
@interface roundedEdges : UIView
{

}

The .m file

    - (void) drawRect:(CGRect)rect
{
    CGRect frame = self.bounds;
    UIBezierPath* path = [UIBezierPath bezierPathWithRoundedRect:frame cornerRadius:8.0];
    [[UIColor whiteColor] setFill];
    [path fill];
} 
```

我想做的是将圆形 UIView 限制为 UITextView 的高度。目前 UITextView 位于 UIView 之上。通过这种方式，它提供了一个圆角的盒子效果。

有没有办法根据进入 UITextView 的文本量来调整上述代码（UIView）的大小？

如果有怎么办？

提前致谢！杰里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:41:51.847

动态改变 textView 或 label 的高度或宽度取决于此代码的文本大小工作正常........

我已将此代码用于 UITextView 和 UILabel

```
CGFloat heightTXT = [[txtView text] sizeWithFont:txtView.font constrainedToSize:CGSizeMake(txtView.frame.size.width,INFINITY) lineBreakMode:UILineBreakModeWordWrap].height;

[txtView setFrame:CGRectMake(txtView.frame.origin.x,txtView.frame.origin.y,txtView.frame.size.width,heightTXT]; 
```

# plone - 在 Plone 中取消注册 zcml 资源目录

> ID：13133173
> 
> 赞同：0
> 
> 时间：2012-10-30T05:29:06.367
> 
> 标签：plone, zope, add-on, grok, zcml

我想“注销”使用 configure zcml 和指令注册的资源目录

我已经卸载了最初注册资源目录的自定义加载项，但其他包仍然能够调用 /++resource++my.package 并从卸载的加载项中引入资源......是否有取消注册的指令正确地，还是通过 ZMI 或一次性脚本以某种方式？

参考： http: [//plone.org/products/dexterity/documentation/manual/five.grok/browser-components/resource-directories](http://plone.org/products/dexterity/documentation/manual/five.grok/browser-components/resource-directories)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:32:39.247

您在通过 Plone 控制面板安装和卸载持久配置以及从构建中实际移除鸡蛋之间感到困惑。

资源目录在包 ZCML 文件中注册，并且不是持久的。您必须从构建中删除包 egg 才能加载这些 ZCML 文件。

如果您出于某种原因需要包 egg 提供的代码但绝对不想注册资源，则需要使用`z3c.unconfigure`包再次取消注册资源目录。

不过，除非他们积极干预任何事情，否则我认为您没有必要这样做。请注意，让资源 URL 在您的 Plone 站点中仍然可用是绝对没有害处的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:36:24.817

如果您不使用它，为什么不直接从您的包中删除不必要的注册？

另一种选择是为特定浏览器层注册资源目录（我相信这在 ZCML 中是可能的），然后只使用 GenericSetup 中的 browserlayer.xml 将该层与您的包一起安装。不过，这更复杂。

然而，正如 Martijn 所说，将其留在原处并没有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:55:01.887

你想使用 z3c.unconfigure

[http://pypi.python.org/pypi/z3c.unconfigure](http://pypi.python.org/pypi/z3c.unconfigure)

# actionscript-3 - As3 Auto Fitting 加载的内容到舞台

> ID：13133174
> 
> 赞同：0
> 
> 时间：2012-10-30T05:29:13.067
> 
> 标签：actionscript-3, flash, apache-flex

我正在开发一个 Pure ActionScript 3.0 项目，其中允许用户将自己的 swfs 上传到应用程序中。

我的目标是加载 swf 并完全适合舞台。问题是，当用户上传被屏蔽的 swf 时，它并不完全适合其他 swf 工作正常的阶段。

考虑我的舞台分辨率为 800x600，当用户上传舞台宽度和高度为 600x550 但内容宽度和高度为 900 x 800 的蒙版 swf 时。

如何将这种 swf 融入舞台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:41:01.090

根据确定蒙版 SWF 的边界，使用`BitmapData`.

例如，我创建了一个 400x400 的 swf，它从 100x100 开始屏蔽为 200x200（[下载](http://jasonsturges.com/labs/stack-overflow/examples/swf-mask/masked.swf)）

![蒙面瑞士法郎](../Images/b2e506b04013408067b76f34f249a9d2.png)

加载此 SWF 将报告 400x400 作为宽度/高度。

要获得未屏蔽内容的可见边界，您可以实现：

```
package
{
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.geom.Rectangle;
    import flash.net.URLRequest;

    [SWF(width = 400, height = 400, backgroundColor = 0xefefef, frameRate = 60)]
    public class X extends Sprite
    {

        private var loader:Loader;

        public function X()
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            loader = new Loader();
            var url:URLRequest = new URLRequest("http://jasonsturges.com/labs/stack-overflow/examples/swf-mask/masked.swf");
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
            loader.load(url);
        }

        protected function completeHandler(event:Event):void
        {
            var bitmapData:BitmapData = new BitmapData(loader.width, loader.height, true, 0);
            bitmapData.draw(loader);
            var bounds:Rectangle = bitmapData.getColorBoundsRect(0xff000000, 0xff000000, true);
            trace(bounds);
        }
    }
} 
```

其中报告：

> (x=100, y=100, w=200, h=200)

因此，可见内容是从 100x100 开始的 200x200。

根据舞台的大小，您需要确定您的约束是什么，以避免舞台上出现空白/空白区域。

这可以使用比率变量来实现：

```
var ratio:Number = 1.0; 
```

比例缩放（按宽度）：

```
var ratio:Number = stage.stageWidth / bounds.width;

loader.scaleX = ratio;
loader.scaleY = ratio;
loader.x = -(bounds.x * ratio);
loader.y = -(bounds.y * ratio); 
```

拉伸显示对象以适应舞台：

```
ader.scaleX = stage.stageWidth / bounds.width;
loader.scaleY = stage.stageHeight / bounds.height;
loader.x = -(bounds.x * (stage.stageWidth / bounds.width));
loader.y = -(bounds.y * (stage.stageHeight / bounds.height)); 
```

所以，总而言之，为了适应加载的内容，拉伸以填充整个舞台，考虑蒙版偏移：

```
package
{
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.geom.Rectangle;
    import flash.net.URLRequest;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0xefefef, frameRate = 60)]
    public class X extends Sprite
    {

        private var loader:Loader;

        public function X()
        {
            stage.scaleMode = StageScaleMode.NO_SCALE;
            stage.align = StageAlign.TOP_LEFT;

            loader = new Loader();
            var url:URLRequest = new URLRequest("http://jasonsturges.com/labs/stack-overflow/examples/swf-mask/masked.swf");
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
            loader.load(url);
        }

        protected function completeHandler(event:Event):void
        {
            var bitmapData:BitmapData = new BitmapData(loader.width, loader.height, true, 0);
            bitmapData.draw(loader);
            var bounds:Rectangle = bitmapData.getColorBoundsRect(0xff000000, 0xff000000, true);
            trace(bounds);

            addChild(loader);

            loader.scaleX = stage.stageWidth / bounds.width;
            loader.scaleY = stage.stageHeight / bounds.height;
            loader.x = -(bounds.x * (stage.stageWidth / bounds.width));
            loader.y = -(bounds.y * (stage.stageHeight / bounds.height));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:09:49.397

您应该比较内容和持有人比率以获得准确的拟合。如果您正在加载外部 swf，您的宽度/高度信息应该来自`loaderInfo`SWF 的元数据，而不是加载的 displayObject 内容的大小。这是一个指向 wonderfl 的链接，可以查看它的工作原理：[http ://wonderfl.net/c/eRYv](http://wonderfl.net/c/eRYv)

这里是比较比率的简单函数：

```
function makeItFit(cont:Sprite, hold:Sprite):void{
        var holderRatio:Number = hold.width/hold.height;
        var contentRatio:Number = cont.width/cont.height;
        //compare both ratios to get the biggest side
        if(holderRatio < contentRatio){
           cont.width = hold.width; //width bigger, lets make it fit
           cont.scaleY = cont.scaleX; //adjust scale to avoid distortion
        }else{
           cont.height = hold.height;
           cont.scaleX = cont.scaleY;
        }
        //now the size is ok, lets center the thing
        cont.x = (hold.width - cont.width)/2;
        cont.y = (hold.height - cont.height)/2;
} 
```

`loaderInfo`请记住，如果加载外部 swf ，请使用宽度/高度数据。这只是一个例子。

# java - 对象与字符串方法

> ID：13133177
> 
> 赞同：6
> 
> 时间：2012-10-30T05:29:25.920
> 
> 标签：java

> **可能重复：**
> [基于参数的真实类型](https://stackoverflow.com/questions/1572322/overloaded-method-selection-based-on-the-parameters-real-type)
> [的重载方法选择 当参数为文字空值时，如何选择重载方法？](https://stackoverflow.com/questions/13033037/how-is-an-overloaded-method-choosen-when-a-parameter-is-the-literal-null-value)

当我执行下面的代码时，我得到以下输出：

> 带有字符串参数的方法称为 ..."

为什么？

```
public class StringObjectPOC {

    public static void test(Object o)   {
        System.out.println("Method with Object argument Called ...");
    }
    public static void test(String str){
        System.out.println("Method with String argument Called ...");
    }
    public static void main(String[] args) {
        StringObjectPOC.test(null);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:32:01.723

调用中的`null`匹配两个 test() 签名。您必须强制`null`转换以确保它调用一个或另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:34:20.180

如果我没记错的话，一个类似的例子来自*Java Puzzles 。*

`null`可以是`String`类型或`Object`类型。但是JVM总是会选择更**准确**的方法。

在这种情况下，`String`则更**准确**`Object`。（a`String`是 a `Object`，但 an`Object`可能不是 a `String`）。

写这样的代码不是一个好习惯。尝试转换参数以匹配您想要的方法，例如

```
public class StringObjectPOC {

    public static void test(Object o)   {
        System.out.println("Method with Object argument Called ...");
    }
    public static void test(String str){
        System.out.println("Method with String argument Called ...");
    }
    public static void main(String[] args) {
        StringObjectPOC.test((Object)null);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T05:36:16.247

Java 试图找到可能调用的最具体的方法。String 是 object 的子类，因此 Java 将尽可能地遵循 String 方法。对于 Object 或 String，null 是完全可以接受的值，但由于 String 比 Object 更具体，Java 遵循 String 方法，因为它更精确。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T05:41:05.833

我试过这个：

**测试2.class**

```
public class Test2{} 
```

**测试3.class**

```
public class Test3 extends Test2{

} 
```

**测试类**

```
public class Test{

public static void print(Object obj){
    System.out.println("Object");
}

public static void print(Test2 obj){
    System.out.println("test 2");
}

public static void print(Test3 obj){
    System.out.println("Test 3");
}

public static void main(String[]args){
    Test.print(null);
}

} 
```

它打印出**测试 3**

就像在您的场景中一样，这意味着如果方法被重载（并且当传递 null 时），它会识别具有*child* -most 参数的方法。

```
Object->Test->Test2 
```

或者在你的情况下：

```
Object->String 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T05:36:53.920

`null`is 可以是 a`String`和/或 an`Object`但是因为`String`继承自`Object`，它会尝试使用更精确的签名。您可以强制`null`转换以选择要执行的方法：

```
public static void main(String[] args) {
    Test.test((Object) null); // treats as Object
    Test.test((String) null); // treats as String
    Test.test(null);          // treats as String
} 
```

# django - 如何在 Django 中克隆另一个模型中的模型字段？

> ID：13133180
> 
> 赞同：0
> 
> 时间：2012-10-30T05:29:58.603
> 
> 标签：django

```
class Medicine(models.Model):
    medicine_name = models.CharField(primary_key=True)
    price = models.IntegerField(max_length=30)

class Bill(models.Model):
    regid = models.ForeignKey(Patient)
    medicine_name = models.ForeignKey(Medicine)
    quantity = models.IntegerField() 
```

我想要的是在'Bill'模型中有一个'price'字段，并且'price'字段的值应该与基于'medicine_name'的'Medicine'模型中的'price'字段的值相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:50:18.360

我假设您想复制它而不是引用它。这样，如果将来药品价格发生变化，过去的账单不会改变。

因此，您可以添加一个类似的字段`Bill`并实现[`pre_save`](https://docs.djangoproject.com/en/dev/ref/signals/#pre-save)信号以将相同的价格作为药物对象。

```
class Bill(models.Model):
    regid = models.ForeignKey(Patient)
    medicine_name = models.ForeignKey(Medicine)
    quantity = models.IntegerField()
    price = models.IntegerField(max_length=30)

@receiver(pre_save, sender=Bill, dispatch_uid="my_unique_identifier")
def signal_price_populate(sender, **kwargs):
    try:
        inst = kwargs['instance']
        inst.price = inst.machine_name.price
    except Exception:
        #something not right 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:47:44.513

由于您已经将 Medicine 作为 ForeignKey，因此您可以通过这种关系访问价格。IE。

```
medicine_name__price 
```

但是，如果您想要一个直接链接到价格值的字段，那么您可以使用 ForeignKey 的进一步规范。

```
class Bill(models.Model):
    regid = models.ForeignKey(Patient)
    medicine_name = models.ForeignKey(Medicine)
    quantity = models.IntegerField()
    price = models.ForeignKey(Medicine, to_field="price") 
```

**更多信息后更新：**

如果您想在保存 Bill 模型时根据 Medicine 模型中的价格值在 Bill 模型中设置价格字段，您可以在保存模型或表单时执行此操作。这是假设您的医学名称外键工作正常，以便我们可以通过这种关系调用价格的值。

```
class Bill(models.Model):
    regid = models.ForeignKey(Patient)
    medicine_name = models.ForeignKey(Medicine)
    quantity = models.IntegerField()
    price = models.IntegerField(max_length=30)
    def save(self, *args, **kwargs):
        self.price = self.medicine_name.price
        super(Bill, self).save(*args, **kwargs) 
```

# java - 如何使用 Java 在 Selenium WebDriver 中验证 tooltipText

> ID：13133185
> 
> 赞同：3
> 
> 时间：2012-10-30T05:31:00.140
> 
> 标签：java, tooltip, selenium-webdriver

我有以下 HTML 代码片段：

```
<div style="float:right; padding-right: 50px; margin-top: -10px;" id="divTooltips">
<img width="25px" height="25px" src="/mkteditor/css/images/tooltip.png" alt="">
</div> 
```

在鼠标悬停在 tooltip.png 期间，会显示工具提示文本“顶部的帮助文本”。我想验证 WebDriver 中的 tooltipText。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:18:26.230

每当您有工具提示时，就会出现“标题”属性。（根据我的观察）。

例如：转到[http://www.linkedin.com/](http://www.linkedin.com/)并在顶部查看 LinkedIn 图像的 HTML 代码。领英

```
 WebDriver driver = new InternetExplorerDriver();
    driver.get("http://www.linkedin.com/");
    WebElement onElement = driver.findElement(By.xpath("html/body/div[1]/div[1]/div/h2/a"));
    System.out.println("Tooltip : " + onElement.getAttribute("title")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-20T09:53:27.927

我的观察表明，每当您关注元素并出现工具提示时，它都会显示在“div”内，该“div”在鼠标焦点上可见。

这是我要建议的，

1.  [使用动作](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/interactions/Actions.html)类移动到元素

    > 动作动作=新动作（驱动程序）；action.moveToElement('element_to_be_focused').build().perform();

2.  现在，由于工具提示显示了一些文本，请阅读该文本并从页面源 HTML 中找出提到它的元素。

3.  现在只需编写代码来等待具有工具提示文本的元素的可见性。

    > 新的 WebDriverWait(驱动程序，timeOutInSeconds).until(ExpectedConditions.visibilityOfElementLocated('element_locator'));

4.  使用从工具提示元素获取文本`getText()`

举个例子，点击[这里](https://jqueryui.com/tooltip/)

在给定的网站上，一旦我们将鼠标悬停在询问年龄的文本框上，我们可以看到工具提示“我们仅出于统计目的询问您的年龄”。

以下是获取工具提示文本的代码片段：

```
WebDriver driver = new FirefoxDriver();
driver.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS);
driver.manage().window().maximize();
driver.get("https://jqueryui.com/tooltip/");
driver.switchTo().frame(driver.findElement(By.xpath("//iframe[@class='demo-frame']")));
new Actions(driver).moveToElement(driver.findElement(By.xpath("//input[@id='age']"))).build().perform();
boolean isToolTipDisplayed = driver.findElement(By.xpath("//div[@class='ui-tooltip-content']")).isDisplayed();
System.out.println("Is Tooltip displayed ? : " + isToolTipDisplayed);
            if (isToolTipDisplayed) {
                String tooltipText = driver.findElement(By.xpath("//div[@class='ui-tooltip-content']")).getText();
System.out.println("Tooltip Text:- " + tooltipText);
}
driver.switchTo().defaultContent();
driver.quit(); 
```

希望对你有帮助 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-25T15:49:31.577

您可以使用以下内容来验证工具提示文本：

```
try{
    String tooltipText = "help text at top place";
    String tooltipTextToVerify = driver.findElement(By.id("divTooltips").getAttribute("title");
      if (tooltipText.equels(tooltipTextToVerify)){
         return true;
      else {return false;}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T13:52:06.163

你可以用这个

```
WebElement element = driver.FindElement(By.id("divTooltips");
 string titleText = element.getAttribute("title"); 
```

现在标题存储在 titleText 字符串中。如果工具提示被隐藏并且您想查看隐藏的文本，请检查[此](http://asktofolks.com/30/how-to-get-hidden-value-from-a-web-page-in-selenium-web-driver)

享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-13T04:59:10.063

您可以尝试以下方法：

```
WebElement tooltipControl = driver.FindElement(By.id("divTooltips");
string titleText = tooltipControl.GetAttribute("textContent"); 
```

`textContent`属性将提供工具提示中显示的文本。

希望这会帮助你。

# session - 会话给出以前的值

> ID：13133189
> 
> 赞同：0
> 
> 时间：2012-10-30T05:31:37.903
> 
> 标签：session, asp-classic, vbscript

我正在为会话对象设置一个随机值。问题是我的页面第一次加载时，它没有显示该值，并且在随后的重新加载时它显示了上一步的值。喜欢

*   第一次加载没有价值，
*   第二次重新加载的第一个值等等。

我的页面是使用经典 ASP 的 VBScript。

```
rndval=Int((count-min+1)*Rnd+min)
Session("rndval")=rndval+1 
```

然后在我使用的另一个页面上

```
Response.Write(Session("rndval")) 
```

# joomla - 在 joomla 中设置前端会话超时限制

> ID：13133191
> 
> 赞同：6
> 
> 时间：2012-10-30T05:31:38.790
> 
> 标签：joomla, joomla2.5

如何在 joomla 2.5 中为前端用户设置会话超时限制？我在全局配置中设置了会话生命周期选项，但它只在后端设置了限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:09:41.530

您可以`JHtml::_('behavior.keepalive');`在文件 modules/mod_login/tmpl/default.php 中注释顶部的行

之后来自后端的时间也将过期前端以及后端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:36:10.037

试试这个插件。据我所知。

如果你要

> 会话控制插件为您的 Joomla 站点上的不同用户组创建不同的会话生命周期。会话控制插件使用户组在您的 Joomla 站点上始终在线。

[会话控制插件](http://extensions.joomla.org/extensions/administration/admin-desk/13982)

[会话保持者](http://extensions.joomla.org/extensions/administration/admin-desk/21489)

其他选项

> 转到站点 -> 全局配置 -> 系统选项卡并设置会话生命周期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:00:55.210

根据我的测试，我认为您在后端（全局配置 > 系统 > 会话生命周期）中设置的值用于后端和前端。

您可能想检查您在前端获得的值。使用下面的代码：

> echo "会话将在 " 中过期。JFactory::getSession()->getExpire() / 60 。“分钟”；

在我看来，JFactory 负责设置过期时间。它使用配置时间，如果不存在，则使用 900 秒（15 分钟）。

# python - 将参数值添加到烧瓶python中的url

> ID：13133197
> 
> 赞同：0
> 
> 时间：2012-10-30T05:32:25.827
> 
> 标签：python, flask, urlparse

我有以下 url 的代码：http://localhost/summary/myfile.csv 我希望 url 看起来像这样：http://localhost/summary?file=myfile.csv

代码要写在烧瓶中。

我的第一个网址的代码如下：

```
@app.route('/summary/<filename>',methods = ['GET'])
def api_summary(filename):
    url = 'C:\\Users\\Desktop\\myproject\\'
    if os.path.exists(url + filename):
        data = pandas.read_csv( url + filename)
        Numeric_Summary = data.describe().to_dict()
        resp = jsonify(Numeric_Summary)
        resp.status_code = 200
        return resp 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T05:37:09.950

您需要添加另一个路由并解析查询字符串：

```
from flask import request

@app.route('/summary',methods = ['GET'])
def api_summary_2():
    filename = request.args.get('file', None)
    if filename is None:
        abort(404)
    else:
        return api_summary(filename) 
```

# java - 在 Java 中解码“引用可打印”字符串

> ID：13133201
> 
> 赞同：3
> 
> 时间：2012-10-30T05:32:29.247
> 
> 标签：java, decode, quoted-printable

我想使用 javax.mail.internet.MimeUtility 来解码`"quoted-printable"`字符串。我不需要邮件服务器的任何其他接口。获得该类（及其依赖项）的最佳方法是什么？或者，有没有更好的方法来解析`"quoted-printable"`字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:52:16.433

[Apache Commons Codec](http://commons.apache.org/codec/)库还支持引用的[可打印](http://commons.apache.org/proper/commons-codec/archives/1.10/apidocs/org/apache/commons/codec/net/QuotedPrintableCodec.html)文件，并且可以在更宽松的 apache 许可下使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:41:17.137

我不知道标准 J2SE API 中的任何内容。然而，一个快速的谷歌搜索出现了[这个解码器代码](http://www.java2s.com/Code/Android/Date-Type/Amethodtodecodeencodequotedprintableencodeddata.htm)。我不能保证，但它看起来很合理。您可能会自己找到其他人。

# java - NoClassDefFoundError JIRA REST API

> ID：13133202
> 
> 赞同：0
> 
> 时间：2012-10-30T05:32:37.997
> 
> 标签：java, maven, maven-plugin, jira

我是 JIRA 的新手，我下载了 eclipse Indigo 和 JIRA 5.0 版本的 m2e 插件

```
public class JIRAClient { 
       public static void main(String[] args) throws URISyntaxException {  
           final JerseyJiraRestClientFactory factory = new JerseyJiraRestClientFactory();
           final URI jiraServerUri = new URI("http://jira.travelclick.net:8080/jira/rest/api"); 

Exception---> final JiraRestClient restClient = factory.createWithBasicHttpAuthentication(jiraServerUri, "nsrivastava", "Password12");

           final NullProgressMonitor pm = new NullProgressMonitor();    
           final Issue issue = restClient.getIssueClient().getIssue("TST-1", pm);
           System.out.println(issue);          

           } 
       } 
```

我有以下异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/httpclient/HttpConnectionManager
    at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClientFactory.create(JerseyJiraRestClientFactory.java:34)
    at com.atlassian.jira.rest.client.internal.jersey.JerseyJiraRestClientFactory.createWithBasicHttpAuthentication(JerseyJiraRestClientFactory.java:39)
    at client.JIRAClient.main(JIRAClient.java:24) 
```

我还下载了 commons-logging-1.1.1.jar 文件，这是我的类路径文件（由 eclipse 创建

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java">
        <attributes>
            <attribute name="optional" value="true"/>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java">
        <attributes>
            <attribute name="optional" value="true"/>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER">
        <attributes>
            <attribute name="maven.pomderived" value="true"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="C:/Users/bhaviksh/Downloads/httpcomponents-client-4.2.2-bin/httpcomponents-client-4.2.2/lib/commons-logging-1.1.1.jar"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

这将是我的第一个程序，我什至不知道 JIRA 到底是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:56:48.233

发生这种情况是因为您使用的 API 在运行时需要 Jakarta Commons 的*HTTPClient*。commons-httpclient 是否包含在您的运行时类路径中？（编译不需要它）

# javascript - 需要帮助编码图像切换器导航，使用 jquery 改变图像变化的小球体

> ID：13133205
> 
> 赞同：0
> 
> 时间：2012-10-30T05:32:45.457
> 
> 标签：javascript, jquery, css

我有 3 张图像，每 5 秒切换一次。它们在我的索引页面上按顺序排列。在这些图像下方，我设置了 3 个球体，以便在这些球体之前和之后有左右箭头，如下所示

<OOO>

我需要在每次更改描绘一个选定球体的图像时一次更改一个图像。

<ØOO>

同样在单击其中一个球体时应选择相应的图像。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:42:07.723

是的，你现在正在尝试什么代码？这些类型的 ui 元素背后的普遍使用思想是： 1\. 点击时，找到具有“当前”类的元素。2.删除该类。3\. 设置被点击的项目，或者在箭头的情况下，通过附加类“当前”仅设置下一个或上一个项目。

您可以考虑在单击时切换 src attr 或仅使用精灵并将背景图像从无横杆调整为横杆等。

这是首先尝试的一般想法。或者，张贴你所拥有的，我们会看看。:)

# jquery - 在 IE 9 及更早版本中，在 PageLaod 上显示不透明的加载程序图像

> ID：13133206
> 
> 赞同：4
> 
> 时间：2012-10-30T05:33:00.827
> 
> 标签：jquery, html, css, internet-explorer

我想在页面加载时显示加载器图像，我将其应用为不透明，同时背景链接不可点击。下面的代码在 FF、Chrome 中运行良好，但在 IE 浏览器中存在一些问题 - 当不透明加载器图像同时显示时，背景链接是可点击的。我不希望在加载程序图像显示时这些链接是可点击的。

```
<script>      
$(document).ready(function() {     
});    

function displayLoader()     
{         
alert('hello');     
$('#load').html('<img src="../images/icn/loader.gif"/>');     

$("#load").css("width", "100%").css("height", "100%");       

$("#load").addClass("load");    

$("#divPage").addClass("loaderStyle");    
}     

</script>         
<div id="divPage" style="background:#F2F2F2;height:500px;">   
<a onclick="displayLoader();" href="#">click me</a>   
<div id="load"></div>   
</div>    

and **CSS**    
.loaderStyle    
{     
opacity: 0.80;       
filter: alpha(opacity=80);     
}     

#load     
{    
position: absolute;    
/*margin: -25px 0 0 -25px;*/    
z-index: 1000;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:30:34.223

尝试添加背景颜色，请不要忘记参考其他答案

```
#load 
{
   /* position: absolute;
    z-index: 1000;*/
    position: absolute;
    background:#333;
    left:0;
    top:0;    
    z-index: 1000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:37:20.443

你可以这样做：

```
$("#load").css({
    "width":"100%",
    "height":"100%",
    "opacity":"0.8"
}); 
```

这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:52:42.720

实际上，对于 IE8 和更早的支持，这应该可以解决问题

```
$("#load").css({
    "width":"100%",
    "height":"100%",
    "opacity":"0.8",
    "filter":"alpha(opacity=80)"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:53:42.880

您访问此链接，您可以在此链接中找到您的问题

[http://www.w3schools.com/css/css_image_transparency.asp](http://www.w3schools.com/css/css_image_transparency.asp)

并使用此代码优化您的代码

```
$("#load").css({"width":"100%","height":"100%"})

/* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

  /* IE 5-7 */
  filter: alpha(opacity=50);

  /* Netscape */
  -moz-opacity: 0.5;

  /* Safari 1.x */
  -khtml-opacity: 0.5;

  /* Good browsers */
  opacity: 0.5; 
```

# mysql - MySQL 按两列排序

> ID：13133208
> 
> 赞同：12
> 
> 时间：2012-10-30T05:33:03.987
> 
> 标签：mysql, sql, database

我有一张如下表

```
    CREATE TABLE Products(Product_id INT, ProductName VARCHAR(255),
                          精选枚举('Yes', 'No'), 优先枚举('p1', 'p2', 'p3'))

    插入产品（产品名称、特色、优先级）
                  VALUES('产品 A', '是', 'p1'),
                        （'产品 B'，'否'，'p2'），
                        ('产品 C', '是', 'p1'),
                        （'产品 D'，'否'，'p1'），
                        （'产品 E'，'是'，'p3'），
                        （'产品 F'，'否'，'p2'），
                        （'产品 G'，'是'，'p1'），
                        （'产品 H'，'是'，'p2'），
                        （'产品 I'，'否'，'p2'），
                        （'产品 J'，'是'，'p3'），
                        ('产品 K', '是', 'p1'),
                        （“产品 L”、“否”、“p3”）；

```

我需要获得特色产品，然后是优先级为 p1、p2 和 p3 的产品

```
操作：
   产品名称 | 精选 | 优先事项

    产品 A 是 p1
    产品 C 是 p1
    产品 G 是 p1
    产品 K 是 p1
    产品 H 是 p2
    产品 E 是 p3
    产品 J 是 p3
    产品 D 编号 p1
    产品 B 没有 p2
    产品 F 编号 p2
    产品 I 无 p2
    产品 L No p3

```

我在下面写了一个不工作的查询..

```

  选择 *
    来自产品
   ORDER BY Featured IN ('Yes') desc,
            优先级 IN ('p1', 'p2', 'p3') desc

```

你能发现错误吗

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T05:39:19.227

试试这个

```
Select * from Products ORDER BY Featured, Priority 
```

如果您在 mysql 枚举上使用 ORDER BY，它不会按字母顺序排序，但会按其在枚举中的位置排序。

如果您想按照描述的字母顺序排序，请将枚举名称转换为这样的字符串

```
Select * from Products ORDER BY  concat(Featured) desc , Priority 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:35:26.500

为什么不简单地将 SQL 用作：

```
 SELECT * 
 FROM Products
  ORDER BY Featured desc,
        Priority asc; 
```

通过这样做`Yes`会出现之前`No`。`P1`会出现在之前`P2`和`P2`之前`P3`。我相信，这就是你想要的。

如果订购时出现数据类型问题，

```
 SELECT * 
 FROM Products
  ORDER BY CONCAT(Featured) desc,
        CONCAT(Priority) asc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:43:39.127

检查这个查询——

```
 SELECT * 
 FROM Products
  ORDER BY Featured asc,Priority,ProductName asc; 
```

[小提琴](http://sqlfiddle.com/#!2/2f8fa/11)

工作代码检查小提琴

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-01T16:40:59.560

```
SELECT * 
    FROM Products
where Featured IN ('Yes') and
      Priority IN ('p1', 'p2', 'p3')
Order by Featured asc,Priority,ProductName asc; 
```

这应该工作

# html - 跨平台移动用户界面

> ID：13133213
> 
> 赞同：0
> 
> 时间：2012-10-30T05:33:46.403
> 
> 标签：html, layout, mobile, jquery-mobile, user-interface

所以这是一个一般性的讨论问题。我正在构建一个非常精美的 UI（基于设计师的模拟），一个关键要求是这个 UI 是完全跨平台的，包括移动设备和不同的屏幕尺寸。

我以前使用过不同的框架，例如 jQuery Mobile，但是标准布局元素对于我正在构建的 UI 来说根本不够；它具有特定的外观表单字段和自定义元素，例如日历。

我从 jQuery Mobile 开始，很快意识到我必须编写 CSS 来覆盖大部分时间的 jQM 样式。这让我意识到也许我最好从头开始，然后用 jQuery 操作 DOM。

这里最好的方法是什么？我应该只使用广泛支持的标签和类从头开始编写自己的 HTML5/CSS 吗？还是我应该选择现有的框架并根据需要对其进行自定义？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:54:22.370

这取决于很多事情。它是针对网络的，还是本机的（混合应用程序）？

如果它是用于网络的，我倾向于远离像 jQM 这样的框架，因为虽然它是一个出色的产品，但我认为它们对于移动数据连接来说太大了。

另一方面，不依赖框架可能意味着您将花费更多时间在浏览器怪癖上以获得精美的 UI。您是否有资源来为[框架之类的设备提供支持](http://jquerymobile.com/gbs/)？你还需要吗？我猜想了解何时使用框架需要经验。

我的结论将从您认为需要扩展/偏离框架与从头开始编写的时间中得出。一个很难估计的数字，但我就是这样做的。

# android - Android onKeyDown

> ID：13133216
> 
> 赞同：0
> 
> 时间：2012-10-30T05:34:12.163
> 
> 标签：android, onkeydown

在我的应用程序中，我编写了 onkeyDown 方法来处理我的菜单和后退按钮，当编写它的活动正常工作时，它工作正常，但是当我移动任何其他活动然后再次返回到此活动时，此方法不会作品。

请让我知道我的错误是什么或可能的解决方案是什么？

```
@SuppressWarnings("unchecked")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if(mExpandableListView.isGroupExpanded(commonGroupPosition)&& keyCode == KeyEvent.KEYCODE_MENU){

            if(mllpopmenu.getVisibility() == View.VISIBLE){
                mllpopmenu.setVisibility(View.INVISIBLE);
            }

            //Toast.makeText(getApplicationContext(), "Chat Expanded Menu", Toast.LENGTH_SHORT).show();
            else{

                if(commonGroupPosition>=4){

                    mllpopmenu.setVisibility(View.VISIBLE);

                    mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                            R.layout.listviewtext, R.id.tvMenuText,
                            data_Contact));

                }

                else if(commonGroupPosition==1){

                    mllpopmenu.setVisibility(View.VISIBLE);

                    mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                            R.layout.listviewtext, R.id.tvMenuText,
                            data_child_contact));

                }

            }

            return true;
        }

        else{

            if (keyCode == KeyEvent.KEYCODE_MENU) {
                if (mllpopmenu.getVisibility() == View.VISIBLE) {
                    mllpopmenu.setVisibility(View.INVISIBLE);
                }

                else if(commonGroupPosition==0){

                    mllpopmenu.setVisibility(View.VISIBLE);
                    mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                            R.layout.listviewtext, R.id.tvMenuText, data));

                }

                return true;

            }

        }

        if(keyCode==KeyEvent.KEYCODE_BACK){

            //Toast.makeText(UserMenuActivity.this, "Returning..", Toast.LENGTH_SHORT).show();

            if (mllpopmenu.getVisibility() == View.VISIBLE) {
                mllpopmenu.setVisibility(View.INVISIBLE);
            } else {
                if (CCMStaticVariable.CommonConnection.isConnected()) {
                    //super.onBackPressed();

                    final AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);      
                    alertDialog.setTitle("CCM Logout");
                    alertDialog.setMessage("Are you sure you want to logout?");
                    alertDialog.setIcon(R.drawable.ic_launcher);

                    //Ok button for Logout
                    alertDialog.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            CCMStaticVariable.CommonConnection.disconnect();

                            Intent serviceIntent = new Intent(UserMenuActivity.this,UpdaterService.class);
                            stopService(serviceIntent);

                            //CCMStaticVariable.CommonConnection.removeConnectionListener(arg0);
                            finish();

                        }
                    });

                    //Cancel button
                    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            dialog.cancel();                        
                        }
                    });
                    alertDialog.show();

                }

            }

            return true;

        }
        return super.onKeyDown(keyCode, event);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T07:30:40.260

我认为这可能是因为您的 onKeydown() 方法的返回值。如果您处理了该事件，则返回 true。如果您想允许下一个接收者处理事件，请返回 false。我想如果您将返回值更改为true，它可能会起作用。

[http://developer.android.com/reference/android/view/KeyEvent.Callback.html#onKeyDown(int](http://developer.android.com/reference/android/view/KeyEvent.Callback.html#onKeyDown(int) , android.view.KeyEvent)

希望它可以工作。:)

# asp.net-mvc-3 - 在 mvc 3 中使用不显眼的 ajax 时出错

> ID：13133221
> 
> 赞同：1
> 
> 时间：2012-10-30T05:34:32.347
> 
> 标签：asp.net-mvc-3, unobtrusive-ajax

我正在尝试从我的视图中发出 ajax 请求，该请求将同时发布和获取一些数据。我想使用检索到的数据来更新该视图页面上的 div 内容。这是代码：

我的观点：

```
<div id="NewComment" style="height: auto; width: 850px; background-color: Silver;
    margin-top: 10px;">
    @{
        AjaxOptions ajaxopts = new AjaxOptions { UpdateTargetId = "Comments" };
    }
    @using (Ajax.BeginForm("NewComment", ajaxopts))
    {
        @Html.ValidationSummary()
        <span style="margin-left: 10px">
            @Html.TextAreaFor(x => x.Comments.Comments, new { @class = "Comment" })
        </span>
        @Html.TextBoxFor(x => x.Posts.PostID, new { @class = "PID" })

        <br />
        <span style="margin-left: 10px">
            <input type="submit" value="Post" style="height: 50px; width: 100px; text-align: center;
                font-size: larger" /></span>

    }
</div>
<div id="Comments">
    @{
        if (Model.CommentList != null)
        {
            foreach (var y in Model.CommentList)
            {
        <div id="DisplayComment" style="height: auto; width: 500px; background-color: #559988;
            margin-top: 10px; margin-left: 10px;">
            @y.UserName says:
            <br />
            @y.Comment1
            <br />
        </div>
            }
        }
        else
        {
        <div id="DisplayNoComment" style="height: auto; width: 500px; background-color: Yellow;
            margin-top: 10px; margin-left: 10px;">
            @Html.Label("Be First to make a comment")
        </div>
        }
    }
</div> 
```

我的控制器：

```
[HttpPost]
    public ActionResult NewComment(PostComment model)
    {
        var business = new Business();
        var entity = new Comment();

        //**For inserting comments
        entity.Comment1 = model.Comments.Comments;
        entity.PostID = model.Posts.PostID; 
        entity.UserID = business.GetUserID(User.Identity.Name);
        entity.UserName = User.Identity.Name;

        business.PostComment(entity);
        //For inserting comments**

        //**for getting comments
        var viewmodel = new PostComment();
        if (business.GetAllComment(model.Posts.PostID) == null)
        {
        }
        else
        {
            viewmodel.CommentList = business.GetAllComment(model.Posts.PostID);
        }
        //for getting comments**

        return View("Comments", viewmodel);
    } 
```

我正在返回一个名为注释的部分视图，其中包含所需的数据，一切正常，但存在有线问题。虽然我在部分视图中没有使用任何母版页，但它仍然显示内容表单母版页。因此，原始视图页面显示母版页中的内容，如页眉和页脚两次。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:40:36.773

在您看来，请在顶部包含以下代码行

```
@{
   Layout = null;
} 
```

# javascript - 套接字发出的套接字与接收的套接字不同

> ID：13133223
> 
> 赞同：0
> 
> 时间：2012-10-30T05:34:43.360
> 
> 标签：javascript, node.js, socket.io

如果我做类似的事情

socket.on('herp', function(derp){ socket.emit('derp', derp); }

消息进入与发送原始消息的套接字不同的套接字

这就是我打算为我正在尝试整理的 javascript 多人猪（骰子游戏）教程传递消息的方式

该应用程序的结构如下 pig_server：[https](https://github.com/hayksaakian/pig_server) ://github.com/hayksaakian/pig_server 管理帐户/玩家和游戏，掷骰子，中继动作 pig：[https](https://github.com/hayksaakian/pig) ://github.com/hayksaakian/pig 管理用户界面，客户端边; 发出动作

如何重新创建问题：首先执行 node helloworld.js 来运行服务器

从两个不同的网络浏览器打开 pig/www/index.html（从客户端目录）

在每个浏览器中：创建一个帐户，点击天梯，点击查找游戏。一旦游戏出现在每个浏览器上，从梯形图页面的列表中单击它。

在 javascript 控制台中：socket.emit('herp', 'derp'); （从两个浏览器执行此操作）

两个新消息应该只显示在一个浏览器中

# php - 如何在 Magento 中使用 getThumbnailUrl() 显示类别中的缩略图

> ID：13133228
> 
> 赞同：1
> 
> 时间：2012-10-30T05:35:12.303
> 
> 标签：php, javascript, jquery, html, magento

我一直在尝试完成这项工作，但没有运气，基本上我需要在内容块上显示主菜单类别，我做到了，但现在我需要在内容块内的类别名称旁边显示缩略图类别。我在 app/desing/fronend/default/THEME/template/catalog/navigation/category_listing.php 中创建了一个新的自定义模块，如下所示：

```
<div class="box layered-nav">
    <div class="head">
    </div>
    <div class="border-creator">
      <div class="narrow-by">
          <dl id="narrow-by-list">

         <dd>
         <ol>        
        <?php foreach ($this->getStoreCategories() as $_category): ?>
            <dt>
             <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="active"<?php endif ?>><?php echo $this->htmlEscape($_category->getName()) ?>
             <img src="<?php echo $_category->getThumbnailUrl() ?>" width="100" height="100" style="background:red; height: 100px; width: 100px; display: block" alt="<?php echo $this->htmlEscape($_category->getName()) ?>" />
             </a> 

            </dt>
        <?php endforeach ?>

       </ol>
      </dd>
      </dl><script type="text/javascript">decorateDataList('narrow-by-list')</script>
    </div>
   </div>
</div> 
```

然后我将它添加到 app/code/core/Mage/Catalog/model/Categorie.php

```
 public function getThumbnailUrl()
            {
                $url = false;
                if ($image = $this->getThumbnail()) {
                    $url = Mage::getBaseUrl('media').'catalog/category/'.$image;
                }
                return $url;
            } 
```

任何想法为什么不拉和显示图像？我已经使用管理面板添加到类别，清除缓存并刷新数据，有什么想法吗？

![Magento 和萤火虫](../Images/ab44f6007286c99a637186519ca4bfe3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T05:52:46.333

使用以下功能显示类别缩略图

```
 public function getThumbnailImageUrl() 
   {
      $url = false;

      if ($image = $this->getThumbnail()) {

         $url = Mage::getBaseUrl('media').'catalog/category/'.$image;
      }
      return $url;
   } 
```

然后，用于任何类别：

$_imageUrl=$this->getCurrentCategory()->getThumbnailImageUrl()

你可以得到缩略图。

参考这篇文章 [http://www.douglasradburn.co.uk/getting-category-thumbnail-images-with-magento/](http://www.douglasradburn.co.uk/getting-category-thumbnail-images-with-magento/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T12:37:55.337

无需更改 app/code/local/Mage/Catalog/Model/Category.php

它可以通过这些代码行轻松完成......试试这个......它的作品

```
$child= Mage::getSingleton('catalog/layer')->getCurrentCategory()->getId();

$imageSrc = Mage::getModel('catalog/category')->load($child)->getThumbnail();

$ThumbnailUrl = Mage::getBaseUrl('media').'catalog/category/'.$imageSrc;

echo "<img src='{$ThumbnailUrl}' />"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T01:58:58.363

这是我在 Magento 1.7.0.2 上工作的解决方案

**创建 sub-categories.phtml 文件**

```
Location: app/design/fronend/YOUR-THEME/default/template/catalog/navigation/sub-categories.phtml 
```

记下从哪里提取缩略图。您需要在`www.yourwebsitenamehere.com`下面添加您网站的绝对路径。

sub-categories.phtml 文件内容：

```
<div id="categories">
  <?php $_maincategorylisting = $this->getCurrentCategory() ?>
  <?php $_categories = $this->getCurrentChildCategories() ?>
  <?php if($_categories->count()): ?>
     <? foreach($_categories as $_category): ?>
        <? if($_category->getIsActive()):
           $cur_category = Mage::getModel('catalog/category')->load($_category->getId());
           $layer = Mage::getSingleton('catalog/layer');
           $layer->setCurrentCategory($cur_category);
           $catName = $this->getCurrentCategory()->getName();
           if($_imageUrl = !$this->getCurrentCategory()->getThumbnailImageUrl()):
              ?>
              <?php /* Default subcategory jpg if no image exists */ ?>
              <div class="category-box">
                 <div class="category-image-box">
                    <a href="<?php echo $this->getCategoryUrl($_category) ?>">
                       <img src="<?php echo $this->getSkinUrl('images/subcategory-default.jpg') ?>">
                    </a>
                 </div>
                 <div>
                    <p>
                       <a href="<?php echo $this->getCategoryUrl($_category) ?>"> <?php echo $catName ?></a>
                    </p>
                 </div>
              </div>
           <? endif ?>
           <? if($_imageUrl = $this->getCurrentCategory()->getThumbnailImageUrl()): ?>
           <?php /* Displays the subcategory image */ ?>
           <div class="category-box">
              <div class="category-image-box">

                 <a href="<?php echo $this->getCategoryUrl($_category) ?>">
                    <img src="http://www.yourwebsitenamehere.com/media/catalog/category/<?php echo $_imageUrl ?>">
                 </a>
              </div>
              <div>
                 <p>
                    <a href="<?php echo $this->getCategoryUrl($_category) ?>"> <?php echo $_category->getName() ?></a>
                 </p>
              </div>
           </div>
        <? endif; endif; ?>
     <? endforeach ?>
     <?php $layer->setCurrentCategory($_maincategorylisting); ?>
   <? endif; ?>
</div> 
```

**创建一个静态块。**
1\. 块标题：子类别列表
2\. 标识符：子类别
3\. 内容：`{{block type="catalog/navigation" template="catalog/navigation/sub-categories.phtml"}}`

**创建 Category.php 文件**
复制`app/code/core/Mage/Catalog/Model/Category.php`到 `app/code/local/Mage/Catalog/Model/Category.php`. 复制后，编辑文件。

进入文件后，查看第 491 行附近。找到：

```
public function getImageUrl()
{
    $url = false;
    if ($image = $this->getImage()) {
        $url = Mage::getBaseUrl('media').'catalog/category/'.$image;
    }
    return $url;
} 
```

粘贴后：

```
/**
 * Retrieve thumbnail image URL
 *
 * @return string
 */
public function getThumbnailImageUrl($fullpath = false)
{

  $url = false;

  if ($image = $this->getThumbnail()) {

      if ($fullpath == true) {
          $url = Mage::getBaseUrl('media').'catalog/category/'.$image;
      } else {
          $url = $image;
     }
  }

  return $url;

} 
```

**后端 Magento。**
1\. 选择目录 > 管理类别。
2\. 创建或编辑将显示子类别缩略图的主类别。
3\. 在显示设置选项卡下
4\. 显示模式：仅静态块
5\. CMS 块：子类别清单
6\. 是锚：否
7\. 缩略图：选择您的文件

如果您没有看到您的编辑，请确保刷新您的 Magento 缓存。

# mysql - MySQL Join 表导出到带有 HTML body 列的 CSV

> ID：13133234
> 
> 赞同：0
> 
> 时间：2012-10-30T05:35:46.390
> 
> 标签：mysql

我有下面的查询导出到具有 HTML 值的列正文的 CSV。

问题是即使当我用空格替换逗号时，它也没有正确显示（因为没有正确显示）并且行也没有以换行符终止。

```
SELECT j.id,j.title,j.featured,REPLCAE(j.body,',',' '),j.created,j.created_by,j.start_date,j.end_date,j.apply_link,o.name,o.website,o.logo,o.created,p.code,p.suburb,s.name INTO OUTFILE '/tmp/careersandjobs.csv'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '\\'
LINES TERMINATED BY '\n'
FROM job j
LEFT JOIN portfolio_job pj
ON pj.job_id = j.id
LEFT JOIN organisation o
ON o.id = j.organisation_id
LEFT JOIN postcode p
ON p.id = j.postcode_id
LEFT JOIN state s
ON s.id = p.state_id
WHERE published = 1
AND end_date > CURDATE()
AND pj.port_id = 8 
```

这背后有什么原因吗？

@迈克尔

我已经尝试过您的建议，但现在会产生此错误：

```
Failed to execute SQL : SQL SELECT j.id,j.title,j.featured,REPLACE(j.body,',',' ') as body,j.created,j.created_by,j.start_date,j.end_date,j.apply_link,o.name,o.website,o.logo,o.created,p.code,p.suburb,s.name INTO OUTFILE '/tmp/careersandjobs.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY "\n" FROM job j LEFT JOIN portfolio_job pj ON pj.job_id = j.id LEFT JOIN organisation o ON o.id = j.organisation_id LEFT JOIN postcode p ON p.id = j.postcode_id LEFT JOIN state s ON s.id = p.state_id WHERE published = 1 AND end_date > CURDATE() AND pj.port_id = 8 failed : Field separator argument is not what is expected; check the manual 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:42:55.210

你有一些错别字：`SELECT j.id,j.title,j.featured,REPLCAE(j.body,',',' '),j.created,j.created_by,j.start_date,j.end_date,j.apply_link,o.name,o.website,o.logo,o.created,p.code,p.suburb,s.name INTO OUTFILE '/tmp/careersandjobs.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\n'`

你有 REPLCAE 而不是 REPLACE

# iphone - 在 ios 中使用自动释放池的限制

> ID：13133242
> 
> 赞同：0
> 
> 时间：2012-10-30T05:36:46.907
> 
> 标签：iphone, ios, nsautoreleasepool

你可以在你的应用程序中创建多少个自动释放？有没有限制？

我在谷歌搜索答案，但没有得到任何有用的信息。

和

```
int main(){

NSAutoreleasepool *pool = [NSAutoreleasepool alloc]init];

NSString *str = [NSString alloc]init];

[pool drain];
} 
```

在谷歌，我几乎在所有文章中都找到了这个样本。使用上面的代码，如果我们在 Xcode 中进行分析，它会引发内存泄漏。相反，如果我们以这种方式分配 str NSString *str = [NSString alloc]init]autorelease;

那么它不会引发任何内存泄漏。

哪种方式是正确的。

同样在上面的代码中，我发现当执行 [pool drain] 语句时，变量 str 被释放。当我们使用“@autorelease”关键字而不是 NSAutoreleasePool 编写相同的代码时，会发生什么。我的意思是，如果我们使用@autorelease，就不会有像 [pool drain] 这样的声明。

我的意思是这样

```
int main(){

@autorelease{
NSString *str = [NSString alloc]init];
}
} 
```

谢谢吉腾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:49:10.130

使用`NSAutoreleasePool`or`@autorelease`不是为了修复内存泄漏。它们的用途是帮助控制释放自动释放对象的范围。无论您是否使用任何自动释放池，您都需要进行适当的内存管理。

在您发布的第一个代码块中，您会遇到内存泄漏，因为您分配了一个字符串，但您从未调用`release`该对象。在这种情况下，`str`不是自动释放的对象。自动释放池对此对象没有影响。

当您在字符串上添加调用时`autorelease`，对象会排队等待在某个时间自动释放。排空自动释放池会触发该释放。

您使用的最后一个代码`@autorlease`与第一个代码块相同。你没有正确释放`str`，所以它会泄漏。但同样，这与自动释放池无关。

启用 ARC 将解决您发布的第一个和最后一个代码块的问题。ARC 将负责`str`为您发布。

编辑：正如上面评论中所述，您可以拥有任意数量的自动释放池，以控制何时实际释放自动释放的对象。

# java - 如何在java中下载给定url的文件？

> ID：13133243
> 
> 赞同：2
> 
> 时间：2012-10-30T05:36:52.360
> 
> 标签：java, file, http, url, download

我想在java中使用通过这个链接下载的文件...

[http://translate.google.com/translate_a/](http://translate.google.com/translate_a/) ...</p>

如果您单击上面的链接，您将获得一个 json 格式的文件。我想使用 java 代码获取这个文件。

我试过这个

```
String word = "Moon";

System.setProperty("http.proxyHost", "172.20.0.100");
System.setProperty("http.proxyPort", "8080");

URL url = new URL("http://translate.google.com/translate_a/t?client=t&text="+word+"&hl=en&sl=en&tl=hi&ie=UTF-8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1");
url.openConnection();
InputStream reader = url.openStream();
FileOutputStream writer = new FileOutputStream("t");
byte[] buffer = new byte[153600];
int bytesRead = 0;
while ((bytesRead = reader.read(buffer)) > 0)
{  
    writer.write(buffer, 0, bytesRead);
    buffer = new byte[153600];
}
writer.close();
reader.close(); 
```

错误

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code:  403 for URL: http://translate.google.com/translate_a/…
at sun.net.www.protocol.http.HttpURLConnect…
at java.net.URL.openStream(URL.java:1031)
at smsMain.main(smsMain.java:19) 
```

直接下载有效（只需单击并查看印地语中“月亮”一词的翻译），但通过程序显示错误！！！！为什么 ？？？

请在这方面提供帮助。先感谢您 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:39:45.137

您收到 403 是因为 Google 不希望您以这种方式使用该服务：[http ://en.wikipedia.org/wiki/HTTP_403](http://en.wikipedia.org/wiki/HTTP_403)

如果您查看页面的内容，它会说：`That’s an error. Your client does not have permission to get URL / from this server.`

要以编程方式访问 Google 翻译 API，您需要付费访问[https://developers.google.com/translate/](https://developers.google.com/translate/)

# c++ - C ++如何将此数组类型复制到向量

> ID：13133247
> 
> 赞同：1
> 
> 时间：2012-10-30T05:37:12.340
> 
> 标签：c++

C ++如何将此数组类型复制到向量

我得到了这个属于 VehicleTwoD 类的数组

我在主函数中这样声明

```
VehicleTwod *vechicletwod[100];

//after some computation
//vechicletwod got until [5]; 
```

//现在我需要进行排序，但我更喜欢在向量中进行。如何将vehicletwod的内容复制到相同类型的向量中

我做了类似的事情

```
vector<VehicleTwoD> sortVector;
sortVector = shapetwod; 
```

但是我在 sortVector = vehicletwod; 中遇到了一些错误

感谢所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:45:39.877

不幸的是，您将在数组中循环：

```
for (const auto& p : vechicletwod)
{
    sortVector.emplace_back(*p);
} 
```

更好的选择是`vector<VehicleTwoD> sortVector;`从一开始就使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:57:01.043

我只是制作一个*VehicleTwod 类型的向量，即vector<*VehicleTwod> sortVector。然后，您可以遍历您的数组并 push_back 每个元素。

也许是这样的：

```
typedef vector<*VehicleTwod> vecPtrVehicle2d;
typedef vecPtrVehicle2d::iterator vecPtrVehicle2dIter;

vecPtrVehicleWod sortVector;
int i, n = 100;

for (i=0; i<n; i++)
  sortVector.push_back(vechicletwod[i]); 
```

您不需要这里的向量迭代器，我倾向于按习惯这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:42:52.003

你的类型不一致。

```
VehicleTwod *vechicletwod[100]; 
```

*声明了一个 VehicleTwod指针*数组，而您的向量被声明为存储实际的 VehicleTwod 对象，而不是它们的内存地址。尝试在没有“*”的情况下初始化 vechicletwod：

```
 VehicleTwod vechicletwod[100]; //array of actual objects 
```

或更改向量以包含指针：

```
vector<VehicleTwoD*> sortVector; 
```

一旦类型确定，您可以完全按照您最初尝试的方式使用“=”运算符。

```
 sortVector = vehicletwod; //overloaded = operator in class vector 
```

# ruby-on-rails - 将输出从 rake 发送到电子邮件

> ID：13133248
> 
> 赞同：0
> 
> 时间：2012-10-30T05:37:19.580
> 
> 标签：ruby-on-rails, rake, mailnotifier

Rails 3.1.1 和 Heroku

我每晚在 Heroku 托管的应用程序上运行一些 Rake 命令。rake 命令会生成一些`puts`我想在早上阅读的行，以了解 rake 执行的更新是如何执行的。

最好，我希望通过电子邮件将此信息通过电子邮件发送给我，这看起来应该不会太难，但我需要做什么？

rake_notifier gem 似乎不是解决方案，因为即使 rake 成功，我也想要输出（rake_notifier 似乎只在 rake 崩溃时发送信息）。

更新：我不太了解红宝石，所以我可能错过了非常简单的解决方案。问题在于“收集”这些数据。通过电子邮件将其发送给我是问题链中的下一步。现在我只检查我的日志，它们充斥着大量其他数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:39:54.910

在 rake 任务文件中执行以下操作：

log_string = ""
begin
   # 在这里输入你所有的代码
   # 而不是使用 puts 使用
   log_string += "print log any you want" + "\n\n"
rescue
   # rescue ur code
end
# 通过你是的邮件程序邮寄你的 log_string使用。

因此，无论您的 rake 任务是否成功，您都会在邮件中收到您的日志。
即使您可以自己邮寄，在 rake 任务中创建的错误消息，您也可以在救援块中定义。

# jenkins - 詹金斯电子邮件通知不起作用

> ID：13133254
> 
> 赞同：2
> 
> 时间：2012-10-30T05:38:13.587
> 
> 标签：jenkins

我对 jenkins 电子邮件通知有一个典型的问题。我设计了我的构建如下

第 1 步：在 Build Environment 下，我在远程主机上设置了执行 shell 脚本

第 2 步：在 Build 下，我使用 ssh 在远程主机上设置了执行 shell 脚本

然后在构建后活动下，我配置了电子邮件通知，但是当第 1 步失败时詹金斯尝试继续第 2 步并且不发送失败消息！

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T01:38:54.590

我建议你使用插件 [https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

这个插件可以更好地控制您要从 Jenkins 发送的电子邮件内容

供参考，

如果您的测试脚本结果为 FAILED，则该作业可能仍被标记为 PASS/UNSTABLE。

如果您测试脚本未能执行测试，则作业将标记为 FAILED。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T02:26:10.797

在另一个线程检查我的答案：[詹金斯不向多个收件人发送电子邮件](https://stackoverflow.com/questions/24291167/jenkins-do-not-send-emails-to-multple-recipients/27117753#27117753)

它涉及向邮件通知添加多个收件人。

# oledb - VFPOLEDB 文件太大

> ID：13133255
> 
> 赞同：0
> 
> 时间：2012-10-30T05:38:24.793
> 
> 标签：oledb, visual-foxpro

我的任务是编写几个查询来读取一些 .dbf 文件。这些文件是 Visual FoxPro 文件，这里的大问题是当我开始使用连接时，因为这会使临时文件变得非常大，最终导致如下错误：

```
File c:\users\me\appdata\local\temp\00001kjd000a.tmp is too large. 
```

此外，查询需要很长时间，这不是我想要的。我尝试使用 sqlserver 和 c# 代码访问这些数据，但速度非常慢。

数据库的大小约为 350mb、100mb 和 10mb。我在本地有这些文件来“加速”这个过程，但是从这些文件中进行三重连接需要超过 15 分钟......

我知道我将不得不使用另一个 2gb

我正在使用的代码：

```
string connStr = @"Provider=VFPOLEDB.1;Data Source=D:\data\B. Mayer Real\;";
            string qryStr = @"
                select top 100 *
                from db1 a, db2 b, db3 c
                where a.id = b.id
                and b.id = c.id
                order by a.id
                ";

            OleDbConnection conn = new OleDbConnection(connStr);

            conn.Open();

            OleDbCommand cmd = new OleDbCommand(qryStr, conn);
            OleDbDataAdapter adapter = new OleDbDataAdapter(cmd);

            DataSet data = new DataSet();

            adapter.Fill(data);

            DataTable table = data.Tables[0];

            foreach (DataRow myDataRow in table.Rows)
            {
                Console.WriteLine("Found data {0}", myDataRow[1]);
            }

            Console.ReadLine();

            conn.Close(); 
```

编辑：

最大的问题是简单地浏览文件......如果我做这样的事情：

```
SELECT *
FROM [CARATLOCAL]...[lzarb]
where la_nummer = 364999 
```

这已经需要 30 秒

此查询耗时 38 分钟！（只有一行）

```
select max(la_datum + convert(datetime, la_time, 108)) as book_datetime, la_nummer, la_index from [CARATLOCAL]...[lzarb]
where la_datum is not null and la_time is not null and la_nummer = 364999
group by la_nummer, la_index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:41:45.217

由于“Order by”是查询的基础，并且您只查找最近的 100 个（因此我的 order by 是 DESCENDING），我建议尝试仅将 ID 作为 PREQUERY 进行预查询，然后加入其余的例如...确保您在“ID”列的每个表上都有一个索引。

```
select 
      PreQuery.*, 
      b.*, 
      c.*
   from
      ( select top 100 a.*
           from db1 a
           order by a.ID DESC ) PreQuery
      JOIN db2 b on PreQuery.ID = b.ID
      JOIN db3 c on PreQuery.ID = c.ID 
```

如果这不能削减它，并且“a.ID”是一种自动增量列，您可能想要获取 max() ID 并进一步从中剥离。

另外...如果表“B”和“C”的每个 ID 有多个记录，那么您可能会遇到笛卡尔结果...因此，如果 B 对每个“A”ID 有 10 个条目，而 C 有 20 个条目对于相同的“A”ID，那么您现在拥有该 ID 的 200 个条目...对 100 个条目执行此操作，您将拥有 20,000 个条目。这么小的一套不是问题，而是需要考虑的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T20:48:49.133

在我看来，问题在于这些表没有正确的索引来优化您的查询。给定正确的索引，VFP 的查询引擎非常非常快。

理想情况下，WHERE 子句中使用的每个字段都有一个标签。（这过于简单化了，但却是一个很好的起点。）

# django - 在 django 的静态 html 文件中管理相对 url

> ID：13133258
> 
> 赞同：2
> 
> 时间：2012-10-30T05:38:42.467
> 
> 标签：django, django-templates

我有一个包含一堆 html 文件和图像的静态目录。所有 html 文件都包含使用相对路径的相互链接。例如，描述算法的页面有一个链接，例如`<a href ../../newmethod/algo2.html>Algorithm 2</a>`. 此目录中的所有内容都可以在任何静态服务器中以可移植的方式很好地工作。

我想用 django 给这个目录下的每个 html 文件添加一个页面横幅。无论如何使用包含横幅代码并使用“ssi”指令包含静态htmls文件的模板来实现这一点？

我找不到解决方案的问题是静态 html 中的相对路径。当我使用 ssi 在模板中包含静态 html 时，相对路径（例如 html 文件中的图像路径）变得完全错误。例如`<img src='../images/flow.bmp>`，静态 html 中的图像不再指向图像的正确地址。

无论如何在 django 中纠正这个相对 url 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:16:51.467

与 Web 服务器相比，在静态环境中访问文件的区别在于目录根目录和 Web 服务器根文件系统可能不同。您可以为此调整相对路径。

此外，作为一个框架，django 期望 html 模板驻留`templates`在您的应用程序内或`project/templates/app/`级别内。像图像这样的静态资产应该按照[这里](https://docs.djangoproject.com/en/dev/howto/static-files/)的描述进行管理。用户上传的媒体应作为[媒体文件处理](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-MEDIA_ROOT)

然后在您的模板中使用`{{STATIC_URL}}`或`{{MEDIA_URL}}`在适当的地方使用。

因此，在这种情况下，您`../../newmethod/algo2.html`应该位于从当前模板通过目录中的“cd ../../newmethod”访问的`templates`目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T07:28:23.307

可以添加一个 HTML`<base>`元素来更改所有链接所指的内容：

```
<base href="{% get_static_prefix %}{{ request.path }}"/> 
```

这将意味着浏览器将链接解释为好像文件是从而`/static/path/to/file.html`不是`/path/to/file.html`. 不过，我发现这使得链接其他静态 html 文件变得更加复杂，因为它们随后被直接链接到。

相反，您可以只为其他 URL 提供重定向，以便它们在相对于通过模板提供的 HTML 的位置上注册（在我的情况下，我希望`/static/projects`通过模板提供其中和下面的所有 html 文件`projects_frame.html`）。在`urls.py`：

```
# Handle projects by serving static files in a frame; redirect indexes
url("^projects/(?P<path>[^./]+)/$", RedirectView.as_view(url="/projects/%(path)s/index.html")),
url("^projects/[^/]+/.*[.]html$", direct_to_template, {"template": "projects_frame.html", "extra_context": {"STATIC_FILES_ROOT": settings.STATIC_FILES_ROOT}}, name="projects"),
url("^projects/(?P<path>[^/]+/.*[.].*)$", RedirectView.as_view(url="/static/projects/%(path)s")), 
```

然后我的模板看起来像这样（我使用的是夹层，所以这不是普遍适用的，但应该给出一个想法）：

```
{% extends "base.html" %}
{% load i18n staticfiles %}

{% block meta_title %}{% trans "Home" %}{% endblock %}
{% block title %}{% trans "Home" %}{% endblock %}

{% block breadcrumb_menu %}
<li class="active">{% trans "Home" %}</li>
{% endblock %}

{% block body %}
{% ssi STATIC_FILES_ROOT|add:request.path %}
{% endblock %} 
```

PS`STATIC_FILES_ROOT`是我定义的自定义变量，因为我遇到了一个问题`STATIC_ROOT`

# java - Java 访问每个循环的索引

> ID：13133261
> 
> 赞同：4
> 
> 时间：2012-10-30T05:39:07.760
> 
> 标签：java, loops, foreach, indexing

我读过

```
 for (int i1 : A) {
    } 
```

好于

```
 for (int i1=0; i1 < A.length; i++) {
    } 
```

但是如果我想在第一个中访问索引值，是否有任何意思，或者我应该只使用第二个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:47:30.773

维基百科指出：

> foreach 循环通常不维护明确的计数器：它们本质上说**“对这个集合中的所有内容执行此操作”**，而不是**“执行此操作 x 次”**。这避免了潜在的错误，并使代码更易于阅读。

如果要使用索引，最好使用后一个版本。

> 如果我想在第一个中访问索引值有什么意思吗

是的你可以

```
int index = 0;
for (int i1 : A) 
{
    // Your logic
    // index++;
} 
```

但同样，不推荐。如果您需要[增强 for 循环](http://wiki.answers.com/Q/What_is_enhanced_for_loop_in_java)中的索引，请重新考虑您的逻辑。

Java 推荐使用增强的 for 循环：[Source](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)（参见页面最后一行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:41:49.233

不，没有。你只需要声明一个变量。在这种情况下，最好只使用传统的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:43:26.973

使用此选项或最好使用第二个选项

```
 int count = 0;
 for (int i1 : A) {
    print count;
    count ++;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:44:45.117

没办法如上所述，看看这个类似的问题[有没有办法在Java的for-each循环中访问迭代计数器？](https://stackoverflow.com/questions/477550/is-there-a-way-to-access-an-iteration-counter-in-javas-for-each-loop)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T05:45:41.483

你必须使用第二个。您的另一个选择是使用集合列表作为
`List list = Arrays.asList(int a[]); list.get(int index);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T05:47:04.487

您的第一个代码说，遍历集合 A 中的所有项目/对象，但最后一个代码说要遍历索引`from 0 to n, n=>size of A`

在正常情况下，两者都可以工作，选择什么通常取决于您可以使用哪个 API for 循环。

在您的第一个代码中，适用于 HashMap 或不填充数组。假设你有这个数据结构

```
A = [1,2,3,NULL,NULL,4,NULL,5] 
```

在您的第一种情况下，可以只遍历现有值。但在最后一种情况下，您必须遍历所有元素。

此外，像 Maps 这样的无序或明确定义的数据结构可以有一种方法来保证您遍历所有元素，但不是按照明确定义的顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T10:09:50.507

不，你不能。for-each 被认为更好（引用您的问题），因为它没有 count 变量。这意味着从程序员的角度来看，出错的地方更少。检索数据不取决于程序员。Java 使用 for each 为您做到这一点。

每当我不需要计数器变量时，我倾向于使用 for-each。如果我需要计数，那么我必须使用旧样式的 for 循环。

# jquery - 如何有效地切换具有 5000 多个条目的表中的表行？

> ID：13133263
> 
> 赞同：1
> 
> 时间：2012-10-30T05:39:17.057
> 
> 标签：jquery, google-chrome, internet-explorer-9

我了解如何根据使用 jQuery 的 hide() 和 show() 的选择来切换表格中的 tr。这曾经在几百行的情况下非常有效。现在，我需要它来处理 DOM 中的 5000 多个条目。它完全冻结了浏览器。

我的搜索把我带到了 learningjquery.com[这里](http://www.learningjquery.com/2010/05/now-you-see-me-showhide-performance)

其中解释了一个“启用/禁用样式表”方法，它应该像一个魅力一样工作。它确实如此，除了它只在 IE9 上像魅力一样工作，只需要一秒钟（如果那样的话）来过滤行。在 chrome 上，相同的操作需要 15-20 秒。

我的问题是 Chrome 被正在为其构建此应用程序的人广泛使用。有人可以建议我如何使这个解决方案在 Chrome 中工作，或者建议其他方法来处理这种情况。

1.  我尝试过其他选项，例如 .css('display', 'none')、.addClass() 和 .removeClass() 等。似乎没有什么能让它变得更快。
2.  我尝试过数据表，虽然之后速度很快，但最初加载这么多数据需要很长时间。

更新：非常感谢@jfriend00 和@Ohgodwhy。这是我拥有的适用于所有浏览器的最终代码。

```
$('#tbl_product_details tbody tr').each( function() {
    var row = $(this);
    row.hasClass("tr_"+cust_id) ? row.removeClass("hide") : row.addClass("hide");
}); 
```

虽然，正如公认的答案所示，它可以通过纯 js 进一步改进，并且通过在页面加载时获取 dom 元素，我不需要这样做。代码已经足够快了，我宁愿到处都有 jQuery 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:17:16.497

根据您的评论，听起来您只想显示具有类的`tr_+custom_id`行并隐藏所有其他行。

此处性能的关键将确保您在每个操作中迭代所有行不超过一次。现在，您在每个操作中至少执行两次。而且，您甚至可以通过在页面加载时迭代一次并在 javascript 中构建索引来加快搜索速度，这比通过 DOM 迭代要快得多。

作为第一个简化，您可以替换这两个通过方案：

```
$('#tbl_product_details tbody tr:not(.special_hide)').addClass('special_hide');
$('#tbl_product_details tbody tr.tr_'+cust_id+'').removeClass('special_hide'); 
```

有了这个单程方案：

```
var custRow = "tr_"+cust_id;
$('#tbl_product_details tbody tr').each(function() {
    var item = $(this);
    if (this.className.indexOf(custRow) != -1) {
        item.removeClass("special_hide");
    } else if (this.className.indexOf("special_hide") == -1) {
        item.addClass("special_hide");
    }
}); 
```

如果行本身没有改变，您可以在页面加载后将行列表预加载到持久变量中一次：

```
var rowList = $('#tbl_product_details tbody tr'); 
```

然后，使用这个 JS：

```
var custRow = "tr_"+cust_id;
rowList.each(function() {
    var item = $(this);
    if (this.className.indexOf(custRow) != -1) {
        item.removeClass("special_hide");
    } else if (this.className.indexOf("special_hide") == -1) {
        item.addClass("special_hide");
    }
}); 
```

它可以通过删除 jQuery 并替换一些不太通用的纯 javascript 代码来加快速度。

它可以通过在 javascript 中保留当前显示的行以及哪些行是给定 id 的索引来进一步加快速度，这样您就可以直接对需要操作的行进行操作，而无需检查每一行和每个类名。这样做可能会非常快。

# c# - linq 到 sql 的关系

> ID：13133274
> 
> 赞同：1
> 
> 时间：2012-10-30T05:39:46.663
> 
> 标签：c#, sql, database, linq

我想返回一个有一些关系的数据集，查询没问题，但我从另一个表中得到了 ID 而不是实际值......这是查询

```
 var thr=
            from u in dc.thresholds
            select u; 
```

这将返回如下内容：

```
id: 1
name: some name
type_id: 1
owner_id: 1 
```

我想用这些表的值获取 type_id 和 owner_id ，所以它可以是这样的：

```
id: 1
name: some name
type_id: Danger
owner_id: John Smith 
```

我希望你们中的一些人能给我一些建议，我从 LINQ to SQL 开始，我有点迷茫......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:52:25.013

如果你想显示 type_id(type_name in other table) 的名称值，你应该像这样使用 join：

```
var thr=
            from u in dc.thresholds
        join y in dc.yourTable on u.type_id equal y.type_id
        select new{u.id,u.name,typeName=y.name,....}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:33:06.530

根据需要使用导航属性加载数据。如果导航属性不存在（Threshold.Type 和 Threshold.Owner），请打开您的 dbml 并添加关联。

懒惰地使用导航属性会导致额外的查询。

```
List<Threshold> result = dc.Thresholds.ToList();  //run first query

foreach(Threshold t in result)
{
  Type type = t.Type;  //run second query (per row)
  Owner owner = t.Owner; //run third query (per row)
} 
```

* * *

使用 DataLoadOptions 在查询期间急切地加载相关数据。

```
DataLoadOptions options = new DataLoadOptions();
options.LoadWith<Threshold>(t => t.Type);
options.LoadWith<Threshold>(t => t.Owner);

dc.LoadOptions = options;

List<Threshold> result = dc.Thresholds.ToList();  // run query

foreach(Threshold t in result)
{
  Type type = t.Type;  //these values are already loaded by this point.
  Owner owner = t.Owner;
} 
```

* * *

编写查询以加载所需形状的数据

```
var query =
  from t in dc.Thresholds
  let type = t.Type
  let owner = t.Owner
  select new {Threshold = t, Type = type, Owner = owner};

var result = query.ToList();  //run query

foreach(var x in result)
{
  Threshold t = x.Threshold;
  Type type = x.Type;  //might be null.
  Owner owner = x.Owner;  //might be null.
} 
```

# ruby-on-rails - jQuery在Rails一对多嵌套模型表单中选择多个表单字段

> ID：13133275
> 
> 赞同：0
> 
> 时间：2012-10-30T05:39:51.320
> 
> 标签：ruby-on-rails, jquery-selectors, jquery-ui-autocomplete, nested-forms

很抱歉这个问题有点复杂。希望有人有耐心阅读本文。

我有一个嵌套模型形式，很像这个 Railscast 中的模型： [http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

我的模型与 Railscast 中的嵌套表单字段非常相似。有很多问题有很多答案的调查。

我正在应用一个 jQuery-UI“自动完成”元素来使所有答案表单字段成为自动完成元素。但是，因为是嵌套的表单域，所以我的文档中有很多答案域。这通常不是问题，但我需要在显示标签但提交自动完成选择的 ID 时应用此解决方案。 [自动完成将值而不是标签应用于文本框](https://stackoverflow.com/questions/7642855/autocomplete-applying-value-not-label-to-textbox)

当我在上面的链接中使用解决方案时会发生什么，标签会应用于我文档中的每个“答案表单字段”，而不仅仅是我想要的那个。因为我使用的是嵌套表单，并且必须将自动完成逻辑应用于每个“答案表单字段”，所以我必须通过此选择器 '[type="text"][name*="[answer]"]' 选择它们这不是很具体，但尽我所能。

我绞尽脑汁想知道如何使用 jQuery 选择器来选择特定的答案字段而不是所有答案字段。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:17:19.510

假设您的`Question`模型是`accepts_nested_attributes_for`您的`Answer`模型，您可以按如下方式设置模板：

```
<%= form_for @question do |question_builder| %>
  <% @question.answers.each_with_index do |answer, i| %>
    <% question_builder.fields_for :answers, answer do |answer_builder| %>
      <%= answer_builder.text_field :content, :id => "answer-#{i}" %>
    <% end %>
  <% end %>
<% end %> 
```

加载了与 相关联的先前保存的答案（或构建的新答案）后`@question`，您可以使用它来遍历带有索引的答案，`i`并使用唯一的 html id 为“answer-i”呈现每个答案的输入，您可以使用它从 jQuery 中唯一地识别您的答案。

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:21:48.787

```
$('[type="text"][name*="[answer]"]').autocomplete
source: $('[type="text"][name*="[answer]"]').data('autocomplete-source')
select: (event, ui) ->
  event.preventDefault()
  $(this).val ui.item.label
  $(this).siblings('[name*="[hidden]"]').val ui.item.value
focus: (event, ui) ->
  event.preventDefault()
  $(this).val ui.item.label 
```

这是我最终使用的咖啡脚本代码。感谢@cdesrosiers 的回答。我意识到我已经为每个答案文本字段获得了唯一的 ID。因此，作为我的问题的第二部分，我需要一种使用 jQuery 选择器的方法，该方法允许我将 .autocomplete jQuery 方法应用于包含名称 [answer] 的所有文本字段。

Then related to this question ( [Autocomplete applying value not label to textbox](https://stackoverflow.com/questions/7642855/autocomplete-applying-value-not-label-to-textbox?lq=1) ), I needed a way to select a specific answer text field since I had a form with many answer text fields. The answer was to use the jQuery selector $(this) to refer to "this" specific answer text field. Hope this helps someone else trying to learn jQuery selectors.

[jQuery this selector](https://stackoverflow.com/questions/6722115/jquery-this-selector) was a helpful question in helping me figure this out.

@cdesrosiers, Can you update your answer with my addition and I can mark your response as the answer?

# sql-server-2005 - 如何在 Unicode 字符中使用 Where 子句和 LIKE？

> ID：13133277
> 
> 赞同：0
> 
> 时间：2012-10-30T05:40:06.510
> 
> 标签：sql-server-2005, unicode, where-clause

我有一个包含列捐助者详细信息的表，我正在使用以下查询在 asp.net 中绑定一个网格后端是 sql server 2005.donordetails 是一个 unicode 列

```
select donordetails,serialno,did from sktdonor where donordetails  like N'% "+  DropDownList1.SelectedItem.Text +" %' order by serialno asc 
```

**查询已执行，但未显示任何输出，请帮忙！！！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:39:10.200

（有点疯狂的猜测，但这些事情有时会发生。）`DropDownList1.SelectedItem.Text`值周围有空格。因此，您的查询不仅要查找该值，而且要查找该值`donordetails`作为单独单词的子字符串，更具体地说，查找前后至少有一个空格字符的单词。如果这不是您的意图，那么只需删除空格（领先后的`%`一个和 final 之前的一个`%`）。

# c# - 如何获取 Internet Explorer 下载历史记录？

> ID：13133281
> 
> 赞同：0
> 
> 时间：2012-10-30T05:40:31.270
> 
> 标签：c#, .net, internet-explorer

有什么方法可以获取 IE 的下载历史记录吗？

我们从 downloads.sqlite 文件中获取 Firefox 的下载历史，从 history.sqlite 文件中获取 Chrome 的下载历史。

但是如何在 IE 中找到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:06:18.343

试试这段代码片段：

```
public class InternetExplorer
{
    // List of URL objects
    public List<URL> URLs { get; set; }
    public IEnumerable<URL> GetHistory()
    {
        // Initiate main object
        UrlHistoryWrapperClass urlhistory = new UrlHistoryWrapperClass();

        // Enumerate URLs in History
        UrlHistoryWrapperClass.STATURLEnumerator enumerator =
        urlhistory.GetEnumerator();

        // Iterate through the enumeration
        while (enumerator.MoveNext())
        {
            // Obtain URL and Title
            string url = enumerator.Current.URL.Replace('\'', ' ');
            // In the title, eliminate single quotes to avoid confusion
            string title = string.IsNullOrEmpty(enumerator.Current.Title)
            ? enumerator.Current.Title.Replace('\'', ' ') : "";

            // Create new entry
            URL U = new URL(url, title, "Internet Explorer");

            // Add entry to list
            URLs.Add(U);
        }

        // Optional
        enumerator.Reset();

        // Clear URL History
        urlhistory.ClearHistory();

        return URLs;
    }
} 
```

参考：

1.  [如何在控件中显示 Internet Explorer 的历史记录？](https://stackoverflow.com/questions/1512895/how-to-show-internet-explorers-history-in-a-control)
2.  [在 C# 中获取 Web 浏览器历史记录](http://hardcodedblog.blogspot.com/2009/10/obtaining-browser-visited-url-history.html)
3.  [如何在 C# 中访问 Internet Explorer 历史记录](http://thestrangertech.blogspot.com/2012/06/how-to-access-browser-history-in-c-2010.html)
4.  [C#中的IE历史](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0086aaa0-ced6-4fdb-b874-dd97ee16f122/)

# c# - c# - Powerpoint -addIn-ribbon 不可见

> ID：13133284
> 
> 赞同：1
> 
> 时间：2012-10-30T05:40:37.980
> 
> 标签：c#, .net, add-in, powerpoint, ribbon

我是 C# 和 .Net 的新手。我目前正在创建一个 PPT 插件。最初我添加了一个功能区和一些按钮，但最后我不得不删除它并添加一个新功能区。但是这个新的功能区并没有出现在 PPT 中。PPT 加载时没有新选项卡（和按钮）。我是否缺少任何设置（例如将功能区设置为 PPT 的默认设置等）。请有人在这里帮助我。

谢谢，斯里。

# logic - 最小化逻辑设计

> ID：13133286
> 
> 赞同：2
> 
> 时间：2012-10-30T05:40:52.673
> 
> 标签：logic, computer-science, boolean-logic

我正在为逻辑设计工作，此时我需要最小化语句而不是设计表达式。

我有一个需要最小化的声明： (x'+y+z+t)(x'+y'+z'+t)

我必须减少它，但我认为我不能最小化它，但是我知道如果它只是像这样的 1 个参数差异：(x'+y'+z+t)(x'+y'+z' +t)

它将等于 x'+y'+t 与布尔代数、共识和 exc。但我不知道是否可以最小化？

希望你能帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:52:52.297

```
A=(x'+t)
B=y+z
C=y'+z'
(x'+y+z+t)(x'+y'+z'+t) = (A+B)(A+C) == AA+AC+AB+BC = A+BC ==
(x'+t)+(y+z)(y'+z') = (x'+t)+(yz'+y'z) == (x'+t) + (y xor z) 
```

# git - 如何更新远程 git 存储库上的更改？

> ID：13133289
> 
> 赞同：1
> 
> 时间：2012-10-30T05:41:01.483
> 
> 标签：git, commit, git-push, git-clone, git-remote

我完成了在远程 git 存储库上提交和推送更改，但是当我查看远程存储库的文件时，这些文件已经过时了。我正在使用 Git Bash。

[看图片](http://tinypic.com/r/2o5jk/6)

红色文本是在存储库克隆中所做的更改。这些更改不会反映在原始存储库的物理文件中

我该怎么做才能反映这些变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:07:36.820

我假设您正在推送到远程当前签出的分支。因为它看起来像一个非裸存储库，并且在您的描述中有文件签出。

我做了一些简单的测试来模拟这种推送，并显示以下消息：

```
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way. 
```

如果您确定推送成功（默认情况下将被拒绝），那么您必须在远程存储库中执行以下操作。

```
git reset --hard 
```

# php - Moodle 合并用户帐户

> ID：13133291
> 
> 赞同：0
> 
> 时间：2012-10-30T05:41:14.257
> 
> 标签：php, moodle

我有一个 moodle 实例，目前有一个用户使用旧的 moodle 帐户和一个新帐户完成了课程。用户当前有两个单独的 ID。为了客户的操作需求，我需要将旧ID的已完成课程和任何相关元数据迁移到新ID。这样做的最佳方法是什么？我需要更改哪些数据库表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:46:22.533

你应该阅读这个moodle论坛主题：

[https://moodle.org/mod/forum/discuss.php?d=103425](https://moodle.org/mod/forum/discuss.php?d=103425)

您可以尝试发布的不同脚本之一，您应该找到解决问题的方法。

# android - 如何取消选中已选中的 Android 复选框

> ID：13133295
> 
> 赞同：12
> 
> 时间：2012-10-30T05:41:19.767
> 
> 标签：android, checkbox

我的 android 应用程序中有两个单选按钮和 5 个复选框。还有一个保存按钮。当用户单击保存按钮时，我需要取消选中用户选中的复选框。我已尝试使用以下代码。但它不起作用。

```
if (chkOthers.isChecked()) 
    chkOthers.setChecked(false);
    chkOthers.setSelected(false);
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T05:53:50.913

只需使用按钮的 chk1.toggle() onClick 取消选中已选中的按钮。

```
public class TestCheckBoxActivity extends Activity {
  /** Called when the activity is first created. */
     CheckBox chk1, chk2;

        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        chk1 = (CheckBox)findViewById(R.id.checkBox1);
        chk2 = (CheckBox)findViewById(R.id.checkBox2);

        Button btn = (Button)findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(chk1.isChecked()){
                chk1.toggle();
            }

            if(chk2.isChecked()){
                chk2.toggle();
            }

        }
    });
       }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T05:48:34.420

如果你想为此使用复选框，你可以在两个复选框上设置一个 onItemClickListener 并且需要在 onItemClick() 方法中取消选择其他。一个例子是这样的： -

```
CheckBox cb1,cb2;
//Considering you can initialize the above variables
cb1.setOnCheckedChangeListener(new OnCheckedChangeListener{
    onCheckedChanged (CompoundButton view, boolean isChecked){
        cb2.setChecked(false);
    }
});
cb2.setOnCheckedChangeListener(new OnCheckedChangeListener{
    onCheckedChanged (CompoundButton view, boolean isChecked){
        cb1.setChecked(false);
    }
}); 
```

我建议您应该为此行为使用单选按钮，因为它们从一开始就内置了此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-25T10:03:37.717

```
 holder.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
               if(holder.checkBox.isChecked()) {
                   holder.checkBox.setChecked(false);
               }else {
                   holder.checkBox.setChecked(true);
               }
            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-12T13:22:12.997

```
Button b = findViewById(R.id.{yourButtonID});
b.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        chk1.setChecked(false);
        chk2.setChecked(false);
        chk3.setChecked(false);
        chk4.setChecked(false);
        chk5.setChecked(false);
    }
}); 
```

# iphone - 仅当在 iphone image-Picker 中完成捕获时单击捕获按钮时如何执行操作

> ID：13133296
> 
> 赞同：2
> 
> 时间：2012-10-30T05:41:25.727
> 
> 标签：iphone, objective-c, ios, ipad, uiimagepickercontroller

在我的**iPhone**应用程序中，我具有**捕获图像**功能并编辑捕获的图像。

我的意图是在图像选择器上添加一个叠加层，以直观地更改裁剪矩形的尺寸[我稍后会为此烦恼]

当图像选择器打开时，视图如下所示：

![在此处输入图像描述](../Images/81b189adca782c786ab535da6ffe0d9b.png)

**我需要知道用户何时单击该捕获按钮**

**当用户单击捕获按钮**( `but not when the image picker appears / dismiss`)`just before use the image by click`时，我需要执行一些操作**`use`**

至少***打印日志语句*** **`NSLog(@" Capture Clicked");`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:44:48.073

假设您正在使用 UIImagePickerController。下面的方法将在用户选择/捕获图像后调用

```
 - (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
        selectedImage =  [info objectForKey:UIImagePickerControllerEditedImage];
        [self editImage:selectedImage];
        //dismiss the picker
        [picker dismissModalViewControllerAnimated:YES];

    } 
```

当然，如果您的图像处理方法需要很长时间才能返回，这将使您的应用程序无法响应。

# r - 计算直方图或密度函数中的峰值

> ID：13133297
> 
> 赞同：9
> 
> 时间：2012-10-30T05:41:34.187
> 
> 标签：r, histogram

似乎已经有很多“密度函数峰值”线程，但我没有看到一个专门解决这一点的问题。如果我错过了，很抱歉重复。

我的问题：给定一个包含 1000 个值的向量（附加样本），我想识别直方图中的峰值或数据的密度函数。从下面的示例数据图像中，我可以看到直方图中在 ~0、6200 和 8400 处的峰值。但我需要获得这些峰值的确切值，最好是通过一个简单的过程，因为我有几千个这些向量来处理。

![组织和密度函数](../Images/24303e547e645e482a861d6793a86fb7.png)

我最初开始自己处理直方图输出，但无法让任何寻峰命令正常工作（就像，根本没有）。我什至不确定它如何从**splus2R包中获取****peaks()**命令来处理直方图对象或密度对象。这仍然是我的偏好，因为我想确定每个峰值的最大频率的确切数据值（与密度函数值相反，它略有不同），但我也无法弄清楚。

 **我会自己发布示例数据，但在这里我看不到这样做的方法（对不起，如果我只是错过了它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T06:08:54.723

如果您的 y 值是平滑的（如在您的示例图中），这应该会发现峰值非常可重复：

```
peakx <- x[which(diff(sign(diff(y)))==-2)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-25T14:10:02.673

正如评论中已经给出的那样，*在密度函数*中寻找峰值与[寻找局部最大值和最小值](https://stackoverflow.com/questions/6836409/finding-local-maxima-and-minima)有关，您可以在其中找到更多解决方案。[chthonicdaemon](https://stackoverflow.com/a/13133575/10488504)的答案接近峰值，但每个*差异*都将向量长度减一。

```
#Create Dataset
x <- c(1,1,4,4,9)

#Estimate Density
d <- density(x)

#Two ways to get highest Peak
d$x[d$y==max(d$y)]  #Gives you all highest Peaks
d$x[which.max(d$y)] #Gives you the first highest Peak

#3 ways to get all Peaks
d$x[c(F, diff(diff(d$y)>=0)<0)] #This detects also a plateau
d$x[c(F, diff(sign(diff(d$y)))<0)]
d$x[which(diff(sign(diff(d$y)))<0)+1]

#In case you also want the height of the peaks
data.frame(d[c("x", "y")])[c(F, diff(diff(d$y)>=0)<0),]

#In case you need a higher "precision"
d <- density(x, n=1e4) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T06:46:50.350

既然你在考虑直方图，也许你应该直接使用直方图输出？

```
data <- c(rnorm(100,mean=20),rnorm(100,mean=12))

peakfinder <- function(d){
  dh <- hist(d,plot=FALSE)
  ins <- dh[["intensities"]]
  nbins <- length(ins)
  ss <- which(rank(ins)%in%seq(from=nbins-2,to=nbins)) ## pick the top 3 intensities
  dh[["mids"]][ss]
}

peaks <- peakfinder(data)

hist(data)
sapply(peaks,function(x) abline(v=x,col="red")) 
```

这并不完美——例如，它只会找到顶部的垃圾箱，即使它们是相邻的。也许您可以更准确地定义“峰值”？希望有帮助。

![在此处输入图像描述](../Images/1292379e52d3788c2452e3ff9558fe60.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-04T09:50:34.917

经过 8 年多的时间后，这仍然是一个有效且经典的问题。现在这是一个完整的答案，@chthonicdaemon 提供了极好的线索。

```
library(ggplot)
library(data.table)
### I use a preloaded data.table. You can use any data.table with one numeric column x.
### Extract counts & breaks of the histogram bins. 
### I have taken breaks as 40 but you can take any number as needed.
### But do keep a large number of breaks so that you get multiple peaks.
counts <- hist(dt1$x,breaks = 40)$counts
breaks <- hist(dt1$x, breaks = 40)$breaks
### Note: the data.table `dt1` should contain at least one numeric column, x

### now name the counts vector with the corresponding breaks 
### note: the length of counts is 1 less than the breaks
names(counts) <- breaks[-length(breaks)]

### Find index for those counts that are the peaks 
### (see previous classic clue to take a double diff)
### note: the double diff causes the 2 count shrink, hence
#### I have added a FALSE before and after the results 
### to align the T/F vector with the count vector

peak_indx <- c(F,diff(sign(c(diff(counts))))==-2,F) %>% which()
topcounts <- counts[peak_indx]
topbreaks <- names(topcounts) %>% as.numeric()

### Now let's use ggplot to plot the histogram along with visualised peaks

dt1 %>%     
ggplot() + 
geom_histogram(aes(x),bins = 40,col="grey51",na.rm = T) + 
geom_vline(xintercept = topbreaks + 50,lty = 2) 
# adjust the value 50 to bring the lines in the centre 
```

[![输出带有峰值标记的直方图](../Images/9864af2bde7c23eec53344954aa8476e.png)](https://i.stack.imgur.com/Vqga0.png)**

# c# - 通过从控制台应用程序 C# 登录，从网站的导航链接下载文件

> ID：13133299
> 
> 赞同：0
> 
> 时间：2012-10-30T05:41:41.123
> 
> 标签：c#

我想使用用户名和密码从网站下载 excel 文件。登录后，有下载excel文件的链接。当我单击它时，另存为消息要求我保存在所需的文件夹中。我正在使用此功能，但它不起作用。它只是下载html页面。任何建议，将不胜感激。

ftpfullpath 是 url + 文件名

如果我使用登录表单 url，它会显示错误。

```
 public static void DownloadFileFTP()
        {
            //Delete if Data feed file is already existed
            if (File.Exists(GetFileName.source_path))
            {
                File.Delete(GetFileName.source_path);
            }

            //Create a WebClient
            WebClient request = new WebClient();

            //Set up credentials
            request.Credentials = new NetworkCredential(Properties.Resources.UserName, Properties.Resources.Password);

            //Download the data into Byte array
            byte[] fileData = request.DownloadData(Properties.Resources.ftpfullpath);

            //Create a Filestream to write to Byte array
            FileStream sourceFile = File.Create(GetFileName.source_path);

            try
            {
                //Write full byte array to the file
                sourceFile.Write(fileData, 0, fileData.Length);
                Console.WriteLine("Download Complete " + GetFileName.source_path);
            }

            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }

            finally
            {
                if (sourceFile != null)
                {
                sourceFile.Close();
                sourceFile = null;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:05:00.113

你的代码没问题，你必须调试你正在下载的页面。很可能它会在提交之前进行重定向。浏览器会自动处理。使用[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)查看单击链接时发生的情况。

还尝试设置referrer = 下载页面网址。

# iphone - 如何创建径向 UIView？

> ID：13133300
> 
> 赞同：0
> 
> 时间：2012-10-30T05:41:45.787
> 
> 标签：iphone, objective-c, ios, uiview, core-graphics

![这是我要实现的目标的简化示例](../Images/dea2efa28fb7cd4863dfd35bbff940b1.png)

我试图弄清楚如何创建一个形状为“View 2”的 UIView（见图）。

我只能绘制一条适合该形状的单线贝塞尔曲线，但我无法弄清楚如何使视图本身成为这种形状......

谁能指出我正确的方向或提供一些示例代码？

一旦我创建了这个视图。我将寻找它遵循另一条相同形状的贝塞尔曲线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:55:41.007

所有`UIView`对象都是矩形。`drawRect:`您可以通过使它们的背景清晰并在该方法中仅绘制您想要的形状来使它们以任何形状出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:04:41.193

我不知道你的形状的逻辑，但例如你希望 uiview 像：![在此处输入图像描述](../Images/daba127134dbfbb4ea0114ae556dba9e.png)

参考[这个](http://pastebin.com/wc50RpHk)链接。

# java - 在android NDK的java类中调用C函数

> ID：13133302
> 
> 赞同：2
> 
> 时间：2012-10-30T05:41:48.833
> 
> 标签：java, android, c, android-ndk, java-native-interface

我的 NDK 应用程序有一个 c 文件（ht_NDK.c）功能，如下所示，

```
int heatcon_readtemperature(char* temperature)
   {
    int nret,ok;
    char cmd[3]={'d',0x0d, 0x0a};
    struct pollfd pfd;
    static int i=0;
        char read_temp[255]="banagalore";
    i++;
    memcpy(temperature, &read_temp, i);
    if(i==10)
    i=0;
    return nret;
    } 
```

在另一个 c 文件（second.c）中，我正在调用上面的函数，如下所示，

```
jstring
Java_com_example_ndk_ReadData_readData( JNIEnv*  env,
                                      jobject this,jstring printMatter, jint j)
{
   char sz[55] = {0};
   return((*env)->NewStringUTF(env,  heatcon_readtemperature(sz)));       

} 
```

上面的函数在我的 java 类（ReadData.java）中调用，如下所示

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_read_data);       

        btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                ReadData rd = new ReadData();
                String n = rd.readData();
                Log.i("NDK", "msg" +n);         
            }
        });

       }

   static
    {
        System.loadLibrary("ht");
        System.out.println("loded library");
    }  

      public native int[] readData();

    }    
} 
```

这样每当我按下按钮时，该值都应该打印在控制台上，一切都很好，但它的打印值为空。如何`char`在java类中调用数据类型。我想我错过了一些东西。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:40:10.553

您的第一个函数输出两件事：

*   它返回一个 int 值（未初始化，您需要修复它）
*   它修改 char* 参数。

当您创建 java 字符串 (NewStringUTF) 时，您将传递 int 返回值。您可能打算改为传递 char* 值：

```
char sz[55] = {0};    
heatcon_readtemperature(sz);
return (env*)->NewStringUTF(env, sz); 
```

# python - 如何在python中获得-ve数的无符号幅度

> ID：13133304
> 
> 赞同：1
> 
> 时间：2012-10-30T05:41:57.770
> 
> 标签：python, django, arrays

我有这个号码 `a = 7 , b= 9`

现在我想减去这两个数字。

`b - a = 2`. 现在没关系

但`a -b = -2`

但我只想知道差异，即 2 而不是 -ve 或 +ve，就像我们有 mod 运算符

我怎么能在python中做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:14:29.790

你想要`abs(a - b)`，不是`abs(abs(a)-abs(b))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T05:43:13.967

这应该这样做

```
In [57]: abs(2 - -9)
Out[57]: 11

In [58]: abs(-1 - 5)
Out[58]: 6 
```

按照零比雷埃夫斯的建议，只保留 1 个解决方案

# android - 解码apk文件时如何获取R.java文件？

> ID：13133310
> 
> 赞同：3
> 
> 时间：2012-10-30T05:42:14.383
> 
> 标签：android, apk

我只是解码一个 apk 文件，但问题是我无法获取 R.java 文件。

该`R.java`文件是在应用程序中自动创建的，但是当 apk 文件被解码时，它会给出创建的十六进制值，`R.java`而不是 @string/abc 或 @color/white 等....

当我们在应用程序中创建字符串或颜色或任何其他资源时，android 平台会为该字符串或颜色分配一些十六进制值`R.java`，因此当我们解码 apk 文件时，它会给出该十六进制值，那么我们如何确定该特定十六进制值是那个字符串还是颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-05T07:20:16.810

You cannot directly extract `r.java` file, but the contents of `r.java` file can be extracted using 'aapt' tool. The following command lists all resources and their respective ID's as present in `r.java` file:

```
aapt d resources name_of_apk 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:49:30.690

该类`R`由嵌套类组成，每个嵌套类完全由编译时常量组成。如果 .apk 文件被 ProGuard 混淆（几乎所有已发布的应用程序都是如此），所有这些都将被优化掉。没有办法恢复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:45:52.493

下载[android-apktool](https://ibotpeaches.github.io/Apktool/)，全部解压到同一目录下运行

```
apktool d app.apk 
```

# ios - 从 iOS 6 开始，目标 C 选择器 dealloc 和 release 是否仍在使用？

> ID：13133317
> 
> 赞同：2
> 
> 时间：2012-10-30T05:43:18.580
> 
> 标签：ios, ios6, automatic-ref-counting, llvm, dealloc

我是新的 iOS 开发。我还需要`dealloc`在 iOS 6 中发布我的属性吗？

如果没有，我的保留财产如何释放？它是自动完成的吗？

在这方面需要一些指导。对不起，如果这是一个愚蠢的问题..

例如，当我这样做时：

```
- (void)dealloc
{
    [super dealloc];
}
@end 
```

我收到类似于以下内容的消息：

```
ARC forbids explicit message send of 'dealloc' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T05:58:16.987

答案是肯定的，引用计数内存管理仍在使用中，方法、、`retain`和仍在使用中。`release``autorelease``dealloc`

您需要问的问题是：**“我需要使用它们吗？”**

该答案取决于您是否启用了 ARC。ARC 代表 Automatic Reference Counting，自 iOS 5 起在新的 iOS 项目中默认启用。ARC 是 LLVM 编译器的一个功能，它会根据众所周知的 cococa 编程约定自动将所需的保留/释放/自动释放方法调用添加到您的代码中.

编译器告诉您“ARC 禁止显式消息......等”的原因是因为它正在为您管理这些调用 - 这是一个*全有或全无*的交易。ARC 管理所有内存管理，或者一个都不管理。

ARC 可以在每个项目或每个文件的基础上启用或禁用。启用 ARC 的代码与未启用 ARC 的代码兼容。

如果您想了解 ARC 为您做了什么，我建议您阅读[过渡到 ARC 发行说明。](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

然后我会观看来自[developer.apple.com/videos](https://developer.apple.com/videos/)的所有自动引用计数视频。

最后，如果你准备好了，请阅读[ARC 上的官方 LLVM 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:48:46.553

如果您使用 ARC，编译器将为您完成所有这些工作。

供您参考：http: [//developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# caching - 缓存未命中的最小周期数

> ID：13133318
> 
> 赞同：1
> 
> 时间：2012-10-30T05:43:19.813
> 
> 标签：caching

问题：

确定高速缓存未命中的最小周期数，其中完全关联高速缓存比 2 路高速缓存具有更好的性能。

有人可以向我解释我将如何计算这个吗？我有以下价值观：

*   完成内存访问序列所需的周期数，假设 1) 2 路关联缓存和 2) 完全关联缓存
*   n路关联缓存的访问时间
*   缓存未命中的总访问时间
*   高速缓存的大小（以块为单位）
*   主存大小（以块为单位）
*   直接映射缓存的访问时间（以周期为单位）

我考虑使用的可能计算：

*   平均内存访问时间
*   每条指令周期
*   错过率
*   漏罚

谢谢！

# javascript - Node.js 加密和浏览器端解密

> ID：13133326
> 
> 赞同：0
> 
> 时间：2012-10-30T05:43:55.040
> 
> 标签：javascript, node.js, cross-browser, cryptography, cross-platform

我需要加密纯文本服务器端（Node.js 环境）并将值返回给客户端。然后浏览器将完成解密工作。它不应依赖任何外部加密环境，例如 OpenSSL。

我阅读了节点密码库的文档。它只是 OpenSSL 的一个包装器。我还要求客户端和服务器端的密码算法是一致的和透明的（即，使用相同的算法实现的解密和加密方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:47:39.640

只需检查 node-cryptojs-aes 库，它会提供文档并像魅力一样适合您的场景。

网址：[https ://github.com/chengxianga2008/node-cryptojs-aes](https://github.com/chengxianga2008/node-cryptojs-aes)

# ruby-on-rails - 如何在 ubuntu 上为 rails 3 安装“pg”gem“无法构建本机扩展”

> ID：13133334
> 
> 赞同：2
> 
> 时间：2012-10-30T05:44:54.400
> 
> 标签：ruby-on-rails, ruby, pg

> **可能重复：**
> [无法在 ubuntu 上安装 pg gem - 找不到 'libpq-fe.h 标头](https://stackoverflow.com/questions/6040583/unable-to-install-pg-gem-on-ubuntu-cant-find-the-libpq-fe-h-header)

每当我尝试为我的 Rails 项目安装 pg gem 时，它都会给我`Error "failed to build native extensions"`.

我已经使用了一些技巧但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:51:55.030

尝试这个：

```
$ sudo apt-get install ruby-dev build-essential 
```

或者：

```
$ sudo apt-get install postgresql-client libpq5 libpq-dev 
```

然后：

```
$ sudo gem install pg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:59:11.820

如果您正在为 Rails 安装 pg gem 并收到此错误，这是一个传统问题。

在终端上运行以下命令：

1.  `mv ~/.rvm/usr/lib ~/.rvm/usr/lib_rvm`
2.  `gem install pg -v '0.14.1'`
3.  `mv ~/.rvm/usr/lib_rvm ~/.rvm/usr/lib`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:58:38.220

试试这个。它会工作..

sudo apt-get install postgresql-8.4

sudo apt-get install pgadmin3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:52:47.513

编辑您的 Gemfile 并添加`gem pg`到文件中。也可以将其注释掉`gem sqlite3`。

保存文件，然后发出`bundle install`命令。

# css - 在 GWT 2.0 CssResource 中，我如何在一个 CssResource 中关闭所有类的混淆

> ID：13133337
> 
> 赞同：2
> 
> 时间：2012-10-30T05:45:29.660
> 
> 标签：css, gwt

我知道可以为所有 css 资源[关闭混淆（在 GWT 2.0 CssResource 中，如何关闭所有 css 类的混淆？](https://stackoverflow.com/q/5972296/151365)）或一个外部类（使用@external）

**如何仅对一种类型关闭 CSSResource 混淆**。我想使用一些 Twitter Bootstrap，它们使用来自 CSS3 的[高级属性选择器。](http://www.quirksmode.org/css/selector_attributeAdvanced.html)我认为让这些工作的唯一方法是禁用 CSS 混淆。

**当然**，我可以避免使用 CssResource，但我喜欢它提供的方便的制表符补全和静态分析。

有任何想法吗？这不起作用：

```
<when-type-is class="my.org.CssResource">
    <set-configuration-property name="CssResource.style" value="pretty"/>
</when-type-is> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:07:46.087

我正在回答我自己的问题，因为很难找到：

通过查看源代码，并与[GWT wiki](http://code.google.com/p/google-web-toolkit/wiki/CssResource#Levers_and_Knobs)进行交叉比较，我发现：

```
/* @external also accepts tail-globs */
@external .myProject-*;
.myProject-text {}
.myProject-foo {} 
```

因此，如果您想让文件中的 CSS 资源中的所有类都是外部的，请使用：

```
@external *; 
```

# groovy - 泰坦中的“超级节点”

> ID：13133339
> 
> 赞同：5
> 
> 时间：2012-10-30T05:45:31.577
> 
> 标签：groovy, cassandra, graph-databases, titan

我正在开发一个可以很好地与图形数据库（[Titan](http://thinkaurelius.github.com/titan/)）配合使用的应用程序，除了它在具有许多边的顶点（即[supernodes](http://thinkaurelius.com/2012/10/25/a-solution-to-the-supernode-problem/) ）方面存在问题。

上面的超级节点链接指向 Titan 作者的博客文章，解释了解决问题的方法。解决方案似乎是通过对边缘进行过滤来减少顶点的数量。

不幸的是，我想要`groupCount`边缘或顶点的属性。例如，我有 100 万用户，每个用户都属于一个国家。我怎样才能快速`groupCount`计算出每个国家的用户数量？

到目前为止我所尝试的可以在这个精心制作的 groovy 脚本中显示：

```
g = TitanFactory.open('titan.properties')  // Cassandra
r = new Random(100)
people = 1e6

def newKey(g, name, type) {
    return g
        .makeType()
        .name(name)
        .simple()
        .functional()
        .indexed()
        .dataType(type)
        .makePropertyKey()
}

def newLabel(g, name, key) {
    return g
        .makeType()
        .name(name)
        .primaryKey(key)
        .makeEdgeLabel()
}

country = newKey(g, 'country', String.class)
newLabel(g, 'lives', country)

g.stopTransaction(SUCCESS)

root = g.addVertex()
countries = ['AU', 'US', 'CN', 'NZ', 'UK', 'PL', 'RU', 'NL', 'FR', 'SP', 'IT']

(1..people).each {
    country = countries[(r.nextFloat() * countries.size()).toInteger()]
    g.startTransaction()
    person = g.addVertex([name: 'John the #' + it])
    g.addEdge(g.getVertex(root.id), person, 'lives', [country: country])
    g.stopTransaction(SUCCESS)
}

t0 = new Date().time

m = [:]    
root = g.getVertex(root.id)
root.outE('lives').country.groupCount(m).iterate()

t1 = new Date().time

println "groupCount seconds: " + ((t1 - t0) / 1000) 
```

基本上一个根节点（为了 Titan 没有“所有”节点查找），链接到许多`person`具有`country`属性的通过边。当我在 100 万个顶点上运行 groupCount() 时，需要一分钟。

我意识到 Titan 可能正在遍历每条边并收集计数，但是有没有办法让它在 Titan 或任何其他图形数据库中运行得更快？可以对索引本身进行计数，因此不必遍历吗？我的索引是否正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T22:30:11.130

如果您将“国家”作为“生活”标签的[主键](https://github.com/thinkaurelius/titan/wiki/Type-Definition-Overview)，则可以更快地检索特定国家/地区的所有人。但是，在您的情况下，您对组计数感兴趣，该组计数需要检索该根节点的所有边缘，以便对其进行迭代并对国家/地区进行存储。

因此，这个分析查询更适合图形分析框架[Faunus](http://thinkaurelius.github.com/faunus/)。它不需要根顶点，因为它通过完整的数据库扫描来执行 groupcount，从而避免了超级节点问题。Faunus 还使用 Gremlin 作为查询语言，因此您只需稍微修改查询：

```
g.V.country.groupCount.cap... 
```

HTH，马蒂亚斯

# django-nonrel - Django nonrel 和 grappelli

> ID：13133345
> 
> 赞同：0
> 
> 时间：2012-10-30T05:45:59.513
> 
> 标签：django-nonrel, django-grappelli

我正在尝试在 Django-nonrel 上安装 Grappelli。因为当前版本的 Django-nonrel 是 1.3，所以我使用 Grappelli 2.3。根据文档

[http://django-grappelli.readthedocs.org/en/2.3.9/quickstart.html#setup](http://django-grappelli.readthedocs.org/en/2.3.9/quickstart.html#setup)

我决定不使用静态文件，而是编辑 MEDIA_URL 和 MEDIA_ROOT。但我不知道如何正确配置它们。我总是收到 404 错误。（本地主机）

```
INFO:root:"GET /media/admin/js/grappelli/jquery.grp_autocomplete_generic.js HTTP/1.1" 404 -
INFO:root:"GET /media/admin/img/admin/default-bg.gif HTTP/1.1" 200 -
INFO:root:"GET /favicon.ico HTTP/1.1" 404 - 
```

当前配置：

```
MEDIA_ROOT = "/static/grappelli/"
MEDIA_URL = "http://localhost:8000/"
ADMIN_MEDIA_PREFIX = MEDIA_URL + "grappelli/" 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:35:42.800

您是否在 app.yaml 中提供了静态文件夹？

你的 app.yaml 中需要一些看起来像的东西

```
- url: /grappelli
  static_dir: /static/grappelli 
```

# java - 使用 Http/0.9 版本发送的请求

> ID：13133346
> 
> 赞同：2
> 
> 时间：2012-10-29T21:23:14.643
> 
> 标签：java, http, apache-commons-httpclient

我正在使用 Apache Commons HttpClient v3.1。我的所有请求在请求行中都有正确的（默认）HTTP 版本，即 HTTP/1.1，除了 1 个请求。

以下 Post 请求将 requestline 获取为 HTTP/0.9：

```
server : port/cas/v1/tickets/TGT-1-sUqenNbqUzvkGSWW25lcbaJc0OEcJ6wg5DOj3XDMSwoIBf6s7i-cas-1
Body: service=* 
```

我通过 http 客户端代码进行了调试，看到请求行设置为 HTTP/1.1，但在服务器上，我看到请求以 HTTP/0.9 的形式出现。

我尝试使用 显式设置 HTTP 版本，`HttpMethodParams`但这无济于事。有谁知道可能出了什么问题？

```
 HttpClient client = new HttpClient();
    HostConfiguration hc = client.getHostConfiguration();
    hc.setHost(new URI(url, false));

    PostMethod method = new PostMethod();
    method.setURI(new URI(url, false));

    method.getParams().setUriCharset("UTF-8");
    method.getParams().setHttpElementCharset("UTF-8");
    method.getParams().setContentCharset("UTF-8");
    method.getParams().setVersion(HttpVersion.HTTP_1_1);
    method.addParameter("service", URLEncoder.encode(service, "UTF-8"));
    method.setPath(contextPath + "/tickets/" + tgt);

    String  respBody = null;
    int statusCode = client.executeMethod(method);
    respBody = method.getResponseBodyAsString(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T14:07:02.160

谢谢约阿希姆绍尔。我能够找出问题所在。

我使用 Webscarab 作为 Web 代理，它发出以下消息“有一个延续标题，但没有前一个标题行”。上网查了一下，发现问题出在多行requestline。我将 HTTP 版本明确设置为 1.1，但是 url 中有一个尾随的 '\r\n'，这使得请求行看起来像 Http/0.9。

Http/0.9 和 Http/1.0 或其他更高协议之间的区别在于 0.9 有一个简单的请求行“METHOD URL”。更高版本还在请求行“METHOD URL HTTPVERSION”中包含 Http 版本。

希望它能拯救某人的一天！

# android - 更改 Android Manifest 文件 sencha

> ID：13133351
> 
> 赞同：1
> 
> 时间：2012-10-30T05:46:47.130
> 
> 标签：android, extjs, sencha-touch-2

我正在使用 sencha 打包程序来打包 sencha 应用程序我如何修改作为构建过程的一部分创建的 android 清单文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:35:51.790

您可以在 sencha 2.1rc1 及更高版本中更改 android manifest 文件，这需要 sencha sdk tools v3。但是，如果您像我一样使用 2.0，那么您就不走运了...

要更改 packager.json 中的权限，只需添加额外的属性 "permissions": ["CAMERA", ...]

# sql - 将动态行插入单个列

> ID：13133352
> 
> 赞同：0
> 
> 时间：2012-10-30T05:46:49.397
> 
> 标签：sql, sql-server-2005

> **可能重复：**
> [在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)

如何将行（动态）插入到由空格连接到临时表的单个列中。我正在使用 SQL Server 2005。

前任。`LetterTable`：

```
LetterID LetterRow
    1        a
    2        b
    3        c
    4        d
    5        e 
```

插入到临时表中

`#TempTable`：

```
LetterID LetterRow
    1     a b c d e 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:53:54.053

好吧，我不太明白，为什么您的 LetterID 在第一个示例中等于 1，但是您可以尝试一下（这样的解决方案对于分组行中的连接很有用）

```
insert into #TempTable (LetterID, LetterRow)
select
    min(L.LetterID) as LetterID,
    stuff(
        (
            select ' ' + T.LetterRow
            from LetterTable as T
            for xml path(''), type
        ).value('.', 'nvarchar(max)')
   ,1,1, '') as LetterRow
from LetterTable as L 
```

对于一行，您也可以这样写：

```
declare @LetterRow nvarchar(max), @LetterID int

select @LetterID = min(LetterID) from LetterTable
select @LetterRow = isnull(@LetterRow + ' ', '') + LetterRow from LetterTable

insert into #TempTable (LetterID, LetterRow)
select @LetterID, @LetterRow 
```

# wordpress - 如何让下一个视频播放？

> ID：13133355
> 
> 赞同：0
> 
> 时间：2012-10-30T05:47:09.093
> 
> 标签：wordpress

我有几个视频想放在帖子/页面中作为课程。当一个视频播放完毕后，将播放下一个视频（假设用户启用了自动播放）。在页面上，视频将出现。视频旁边是一个可滚动的主题列表。单击一个主题会启动相应的视频。如果启用自动播放，下一个视频将自动播放。

Udacity 有一个很好的基于 HTML/javascript 的示例：http: [//d.pr/i/u49j](http://d.pr/i/u49j)。

如果有这样的插件或如何创建它，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:15:31.473

我想这可以通过自定义 Flash 应用程序来完成，这需要您拥有 Flash Pro，并且它使用 Flash，所以这并不是真正的解决方案。

我能想到的唯一其他方法是使用 YouTube 播放列表...

你打算如何让视频进入？嵌入还是上传？我认为微软曾经有一页充满了关于如何为 k-12 学生 (ikr) 使用 Visual Studio 的视频，无论如何他们的 Silverlight 视频会自动播放我认为

# playframework-2.0 - Play 2.0.x 一对多关系从父级中删除子成员

> ID：13133358
> 
> 赞同：1
> 
> 时间：2012-10-30T05:47:22.843
> 
> 标签：playframework-2.0, ebean

在 play 2.0.X 中，一对多的关系是这样创建的。从父级删除子成员的正确方法是什么。我应该使用 iter.remove() 还是 child.delete()？

```
@Entity
@Table(name="channel")
public class ChannelInfo extends Model {
    @Id
    private Long id;

    @Constraints.Required
    private String channelName;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="channelInfo")
    private Set<ChannelDetailMember> members;

    private int membersCount = 0;

    public void removeMemberId(String memberId) {
        Iterator<ChannelDetailMember> iter = this.getMembers().iterator();
        while (iter.hasNext()) {
            ChannelDetailMember dMember = iter.next();
            if (dMember.getMemberId().equals(memberId)) {
           dMember.delete();
           membersCount--;
           break;
             }
        }
    }
}

@Entity
@Table(name="channel_detail")
public class ChannelDetailMember extends Model {

    @Id
    private Long id;

    @Constraints.Required
    private String memberId;

    @Constraints.Required
    @ManyToOne(cascade=CascadeType.PERSIST)
    ChannelInfo channelInfo;
} 
```

# c#-4.0 - 正则表达式只允许文本框中的英文字符

> ID：13133359
> 
> 赞同：0
> 
> 时间：2012-10-30T05:47:24.883
> 
> 标签：c#-4.0

我想在不允许输入除英语以外的任何语言字符的文本框上进行验证。例如。无法在文本框中输入日语。

如果您对此任务有任何正则表达式，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:45:08.020

无法仅测试英语，但您可以仅测试 ASCII 字符，如下所示：[http ://en.wikipedia.org/wiki/American_Standard_Code_for_Information_Interchange#ASCII_printable_characters](http://en.wikipedia.org/wiki/American_Standard_Code_for_Information_Interchange#ASCII_printable_characters)

这个正则表达式应该可以工作，因为它只允许从 0x20 到 0x7E 的字符：

```
/^[\x20-\x7E]+$/ 
```

**结果**

这将匹配（英语）：我爱你

这将匹配（法语）： Je t'aime

这不匹配（日语）：爱している</p>

# php - XML PHP 表输出错误

> ID：13133364
> 
> 赞同：0
> 
> 时间：2012-10-30T05:47:42.137
> 
> 标签：php, xml, for-loop, html-table, xmlnode

这是我使用 PHP 将 XML 数据提取到表中的代码的一部分。问题是，我表中的第一行是空白的（除了永远不会离开的复选框）。任何帮助，将不胜感激！

```
<!-- language-all: lang-php -->
<?php  
    $AwayMoneyLine[] = (string)$xml2->moneyline_visiting;  
    $HomeMoneyLine[] = (string)$xml2->moneyline_home;  
    $AwaySpreadAdjust[] = (string)$xml2->spread_adjust_visiting;   
    $HomeSpreadAdjust[] = (string)$xml2->spread_adjust_home;  
    $AwayLine[] = (string)$xml2->spread_visiting;  
    $HomeLine[] = (string)$xml2->home_visiting;  
    $UnderAdjust[] = (string)$xml2->under_adjust;  
    $OverAdjust[] = (string)$xml2->over_adjust;  
    $ATotalPoints[] = (string)$xml2->total_points;  
    $Date[] = (string)$xml->Date;  
    $AwayTeam[] = (string)$xml->AwayTeam;  
    $HomeTeam[] = (string)$xml->HomeTeam;  
    $AwayRotation[] = (string)$xml->AwayRotation;  
    $HomeRotation[] = (string)$xml->HomeRotation;  
    $Total = (string)$xml->Total;  
    $OverPrice[] = (string)$xml->OverPrice;  
    $UnderPrice[] = (string)$xml->UnderPrice;  
    $Line[] = (string)$xml->Line;  
    $AwayTeamPrice[] = (string)$xml->AwayTeamPrice;  
    $HomeTeamPrice[] = (string)$xml->HomeTeamPrice;  
    $AwayTeamMoneyLine = (string)$xml->AwayTeamMoneyLine;  
    $HomeTeamMoneyLine = (string)$xml->HomeTeamMoneyLine;  
    $Title = (string)$xml->Title;  
    echo '<table cellpadding="0" cellspacing="0" border="1" bordercolor="#585858" width=100%>';      
    echo '<tr>';  
    echo '<th>Date</th>';  
    echo '<th>#</th>';   
    echo '<th>Team</th>';  
    echo '<th>Money</th>';  
    echo '<th>Spread</th>';  
    echo '<th>Total</th>';  
    echo '</tr>';  
    $count = count($Game);      
    for($i=0; $i<20;){  
    $AwayTeamSpread = " ";    
    $HomeTeamSpread = " ";  
    foreach ($xml->Game as $Game) {   
    $Date[] = $Game->Date; $AwayTeam[] = $Game->AwayTeam; $HomeTeam[] = $Game->HomeTeam; $AwayRotation[] = $Game->AwayRotation;  
    $HomeRotation[] = $Game->HomeRotation; $Total[] = $Game->Total; $OverPrice[] = $Game->OverPrice;  
    $UnderPrice[] = $Game->UnderPrice; $Line[] = $Game->Line; $AwayTeamPrice[] = $Game->AwayTeamPrice;  
    $HomeTeamPrice[] = $Game->HomeTeamPrice; $AwayTeamMoneyLine[] = $Game->AwayTeamMoneyLine; $HomeTeamMoneyLine[] = $Game->HomeTeamMoneyLine;  
    }  
    foreach ($xml2->events->event as $event) {  
    $Spread = $event->periods->period[0]->spread;  
    $TotalPoints = $event->periods->period[0]->total;    
    $AwayLine[] = $Spread->spread_visiting;   
    $HomeLine[] = $Spread->spread_home;  
    $UnderAdjust[] = $TotalPoints->under_adjust;   
    $OverAdjust[] = $TotalPoints->over_adjust;  
    $ATotalPoints[] = $TotalPoints->total_points;  
    $AwayMoneyLine[] = $MoneyLine->moneyline_visiting;   
    $HomeMoneyLine[] = $MoneyLine->moneyline_home;  
    $AwaySpreadAdjust[] = $Spread->spread_adjust_visiting;   
    $HomeSpreadAdjust[] = $Spread->spread_adjust_home;  
    }     
    echo '<tr>';  
    echo "<td>$Date[$i]</td><td><table><tr><td>$AwayRotation[$i]</td></tr><tr><td>$HomeRotation[$i]</td></tr></table></td><td><table><tr><td>$AwayTeam[$i]</td></tr><tr><td>$HomeTeam[$i]</td></tr></table></td><td><table><tr><td><input type='checkbox'/> $AwayTeamMoneyLine[$i]</td></tr><tr><td><input type='checkbox'/>$HomeTeamMoneyLine[$i]</td></tr></table></td><td><table><tr><td><input type='checkbox'/> $AwayLine[$i] ($AwaySpreadAdjust[$i])</td></tr><tr><td><input type='checkbox'/> $HomeLine[$i] ($HomeSpreadAdjust[$i])</td></tr></table></td><td><table><tr><td><input type='checkbox'/> Over $ATotalPoints[$i]</td></tr><tr><td><input type='checkbox'/> Under $ATotalPoints[$i]</td></tr></table></td>";  
    echo '</tr>';  
    $i++;  
}  
    echo '<tr>';  
    echo '<td colspan="3"><input type="submit" name="send" value="Submit"></td><td colspan="3"><input type="button" name="Clear" value="Clear" /></td>';  
    echo '</tr>';  
    echo ' </table>';  
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:09:45.323

要真正理解问题，我们需要查看 XML 的内容。但是，快速修复应该将 for 循环更改为：

```
for ($i = 1; $i <= 20) 
```

PS：我什至不确定每个 foreach 循环实际上做了什么。

# c++ - C++ 一次将 String 转换为 int 一个字符

> ID：13133366
> 
> 赞同：0
> 
> 时间：2012-10-30T05:47:46.990
> 
> 标签：c++, typeconverter

基本程序创建一个超过 10000 的随机数，然后以 word 格式打印出该数字。

问题是，对于该`eNum=atoi(Result[i]);`行，我得到一个关于变量的编译器错误`std::string`

```
Error:argument of type "char" is incompatible with parameter of type "const char*" 
```

这意味着什么？我以为我正在拿一个单曲`char`并将其转换为`int`.

```
#include <iostream>
#include <stdlib.h>
#include <sstream>
#include <string>
using namespace std;

enum Numbers {Zero, One, Two, Three, Four, Five, Six, Seven, Eight, Nine, Point } eNum;

void main(void)
{
  int iRnd, iTemp;
  string Result;
  iRnd = rand() %  (sizeof(int)-10000) + 10000;
  ostringstream convert;
  convert << iRnd;
  Result = convert.str();

  cout << "\nRandmon number is: " << iRnd << endl << "Converted Number is : " << Result << endl;

  for (int i=0;i<Result.length();i++)
  {
    eNum = atoi(Result[i]);
    cout << eNum; 
    system("pause");
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:05:19.587

该`atoi()`函数需要一个 C 字符串。要么摆脱你的整个代码并使用

```
int num = atoi(someString.c_str()); 
```

用于转换，或在您的代码中，更改

```
eNum = atoi(result[i]); 
```

到

```
eNum = result[i] - '0'; 
```

# haskell - zip [字符] 和 IO [字符]

> ID：13133367
> 
> 赞同：1
> 
> 时间：2012-10-30T05:47:49.270
> 
> 标签：haskell

我有一个[字符]：

```
*Main> let message = "something" 
```

我已经改组了字符串（你可以在[这里](https://stackoverflow.com/questions/13123133/type-error-in-string-shuffle-function)找到完整的代码）：

```
*Main> let key = shuffle message

*Main> message
"something"

*Main> :t message
message :: [Char]

*Main> key 
"goeimntsh"

*Main> :t key
key :: IO [Char] 
```

现在我需要从这两个字符串创建 Data.Map 。就像是：

```
Map.fromList(zip message key) 
```

但我什至不能压缩 [Char] 和 IO [Char]：

```
*Main> zip message key
<interactive>:1:13:
    Couldn't match expected type `[b0]' with actual type `IO [Char]'
    In the second argument of `zip', namely `key'
    In the expression: zip message key
    In an equation for `it': it = zip message key 
```

我了解 shuffle 函数不会为相同的输入返回相同的结果。所以它必须返回 IO [Char]。

我了解我无法获取 Map.Map，并且我同意获取 IO Map.Map。但我需要像普通字符串一样使用 IO [Char]。我怎么才能得到它 ？

谢谢。

**更新：**

谢谢大家的解释。一些额外的问题：

*@肯尼TM：*

我理解 'do'- 表示法，但我需要一点时间来获得 liftM :) 但现在还有一个额外的问题：

```
*Main> let s = "abcdef"
*Main> let d = shuffle s
*Main> s
"abcdef"
*Main> d
"fedcba"
*Main> buildIOMap s d
fromList [('a','e'),('b','a'),('c','c'),('d','f'),('e','d'),('f','b')]
*Main> buildIOMap2 s d
fromList [('a','c'),('b','b'),('c','f'),('d','a'),('e','e'),('f','d')]
*Main> Map.fromList (zip "abcdef" "fedcba")
fromList [('a','f'),('b','e'),('c','d'),('d','c'),('e','b'),('f','a')] 
```

'buildIOMap' 是一个 do-notation；'buildIOMap2' - 是一个 liftM - 实现。

为什么我在三种情况下得到不同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:53:29.010

在 GHCi 提示符下，您只需要执行

```
> key <- shuffle message 
```

这将`IO`在右侧运行操作并将结果存储在 中`key`，现在它只是一个普通字符串。

```
> :t key
key :: [Char] 
```

另一方面，当你写

```
> let key = shuffle message 
```

您所做的只是命名操作，因此您可以多次运行它并获得不同的结果：

```
> :t key
key :: IO [Char]
> key
"ntimshgoe"
> key
"gimhntoes" 
```

在 GHCi 中，评估值和运行操作之间的区别有些模糊，因为它允许您在同一个提示下执行两者。但是，如果您尝试以错误的方式（`zip`例如示例中的方式）混合它们，则会出现类型错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T06:27:31.393

表达式`key`不是 a `[Char]`- 它是 a `IO [Char]`- 即将返回 a 的 IO 计算`[Char]`。以下是如何使用 shuffle 功能的示例：

```
main = do let message = "something"
          key <- shuffle message
          -- now key is a [Char]
          let m = Data.Map.fromList (zip message key)
          print m -- ... or whatever 
```

从某种意义上说， 解`<-`包`IO`from`IO [Char]`并将返回的值放入 左边的变量中`<-`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T06:32:45.027

我们可以为此创建一个 IO 函数。我们在这里使用这种`do`表示法是因为它对具有命令式语言背景的初学者更友好，但它并不是最紧凑的方式。

```
buildIOMap message key = do
    rawKey <- key                   -- unwrap an object inside the 'do' with '<-'
    let zipped = zip message rawKey -- Then 'zip' & 'Map.fromList' can be used 
    let map = Map.fromList zipped   --   normally.
    return map                      -- Finally we re-wrap the result into IO. 
```

* * *

我们也可以通过更实用的方式来解决这个问题，即转换函数本身。请注意，表达式`Map.fromList (zip message key)`失败只是因为`key`is an`IO [Char]`而不是 a `[Char]`。

如果我们可以将函数`Map.fromList (zip message __)`从接受 a`[Char]`转换为 an`IO [Char]`那么它也可以工作。这种转换称为*提升*，当在 Haskell[中`Control.Monad.liftM`函数](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v%3aliftM)将执行此操作时：

```
liftM :: Monad m => (a -> r) -> (m a -> m r) 
```

这将接受一个带有 1 个纯参数的函数并返回 1 个纯参数，并给出一个带有 1 个单子参数的函数并返回 1 个单子参数。

这里我们的纯函数是：

```
\x -> Map.fromList (zip message x) 
```

所以我们也可以这样写：

```
buildIOMap message = liftM (\x -> Map.fromList (zip message x)) 
```

[^(（注意：表示上述内容的更紧凑的方式是`buildIOMap message = liftM $ Map.fromList . zip message`）)]

# linux - Linux Pthreads 用户级别或内核级别

> ID：13133369
> 
> 赞同：3
> 
> 时间：2012-10-30T05:48:07.727
> 
> 标签：linux, multithreading, linux-kernel, operating-system, pthreads

> **可能重复：**
> [调度程序如何看到 Linux 上的 pthread](https://stackoverflow.com/questions/4004662/how-are-pthreads-on-linux-seen-by-scheduler)

Linux pthreads 是用户级线程还是内核级线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:01:19.213

Linux 内核调度线程而不是进程。就调度程序而言，进程现在是一种*人工*构造，主要用于用户空间目的。

当您创建一个*进程时，*它是一个线程 ID（内核实际上将其称为 PID，但这可能会造成混淆，因此我将其称为 TID）和线程组 ID (TGID) 是完全相同的。

如果一个线程创建了一个新线程（而不是一个新进程），它会从创建者那里继承 TGID，但会得到一个新的 TID。

换句话说，线程*组*可以被认为是进程，但调度程序并不关心——它在单个线程上工作。

因此，在回答您的具体问题时，它们是内核级线程。

# java - 在 Hadoop 和 java 中实现算法

> ID：13133371
> 
> 赞同：3
> 
> 时间：2012-10-30T05:48:18.943
> 
> 标签：java, algorithm, hadoop

您好我正在尝试在 Hadoop 和 Java 中实现一个新构建的生物信息学算法（我不确定是否可以完成）。我在互联网上搜索了很多关于在 Hadoop 上实现算法的信息。然而，我发现的只是“识别并行任务并通过 hadoop 执行它们”。如果你们能通过互联网指导我使用 Java 的 Hadoop 的正确资源，我将非常感激，在那里我可以找到一些可靠的例子，而不是字数。我很了解 Java，但 hadoop 是我的第一次。任何帮助，将不胜感激。

这就是我想做的

我有一个非常大的文本文件（大约 100 MB），其中包含随机的字符行（A、G、T、C）。随机 A、G、T、C 的长序列可能形成一串重要的序列 k，例如（ ATCGAGC)。我可能会在这个名为“r”的文本文件的许多行中找到这个序列 k-mer。

我必须执行以下任务

1.  识别R中所有文本（r）行中各种k-mer的位置（整个集/文件）

2.  我必须跟踪特定 r 中 k-mer 的位置。

3.  我有两个参数用于比较各种 r 中的 k-mers。

4.  如果两个 'r' 中的 k-mers 满足上述参数比较我必须更新邻居集 N

如果您有兴趣，这是这里的伪代码

```
Given k, ĥ, ȇ
    1\.  Make K  by extracting all possible kmers  from Reads
    2\.  for all reads r belongs R do
            construct Gk[r] by scanning through r
            end for
    3\.  for all k ε K do
                   for all read pairs (r,s) ε Gk × GK
                    if h(r,s) ≥ ĥ  and dk < ȇ h(r,s) then
                         update the N
                    end if
            end for
        end for

       k is k-mer
       K is set of all k
       ĥ minimum overlap distance
       ȇ maximum mismatch tolerance
       N neighbor set
       h(r,s)   overlap length of r and s wrt k
       d(r,s) distance between r and s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:38:06.027

首先，这个问题看起来像“设置相似性”问题。在 mapreduce 平台上有很多具有各种有效性的方法。开始在这里查看[http://infolab.stanford.edu/~ullman/mmds.html](http://infolab.stanford.edu/~ullman/mmds.html)第 3 章。但前提是你的首要任务是：学习 hadoop。如果不...

其次，100MB——对于hadoop来说是非常小的数据量。当然，你根本不需要 hadoop。甚至不会启动超过 2 个并行任务（默认情况下，hadoop 每 64MB 启动 1 个任务）。您可以在纯 Java 中实现任何相似性算法，并且它的运行速度会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:00:13.010

看起来像是在输入文件中查找模式。查看[Grep.java](http://svn.apache.org/repos/asf/hadoop/common/tags/release-1.0.3/src/examples/org/apache/hadoop/examples/Grep.java)和相关文件。它不能解决 OP 中的确切问题，但最接近。

# mongodb - 使用 mongodb 更新嵌套数组数据

> ID：13133374
> 
> 赞同：0
> 
> 时间：2012-10-30T05:48:42.963
> 
> 标签：mongodb, nested-sets, insert-update

我有嵌套数据：

```
Object
_id: "90fac6ab-b88e-42a1-8e91-80ee25951ec7"
  answers: Array[4]
    0: Object
      name: "myData"
      owned_by: "273b7291-df2b-494c-bd9b-64e71283447e"
      score: 0 
```

我正在尝试更新，只有一个`answer`我知道其名称的特定嵌套。我只想增加`score`字段，我只知道`name`. 如何做到这一点？

到目前为止，我有这个： `db.Question.update({_id: "90fac6ab-b88e-42a1-8e91-80ee25951ec7"}, "myData":{$inc: {score: 2}});`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:40:26.353

您希望根据回答者的姓名（我假设这就是姓名）来增加每个答案的分数，如下所示：

```
db.Question.update({
    _id: "90fac6ab-b88e-42a1-8e91-80ee25951ec7", 
    answers.name : "myData"
}, {$inc: {"answers.$.score": 1}}) 
```

应该管用。我在这里使用位置运算符进入一个子目录以填充`$`：[http ://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:03:19.560

试试这个;

```
db.Question.update({ _id: "90fac6ab-b88e-42a1-8e91-80ee25951ec7", "answers.name": "myData" }, 
                   { $inc: { "answers.$.score": 2} }); 
```

# sql-server - 从 Oracle 到 SQL Server 的数据迁移

> ID：13133378
> 
> 赞同：0
> 
> 时间：2012-10-30T05:48:46.183
> 
> 标签：sql-server, oracle, sql-server-2008, sql-server-2005, oracle11g

我有一个 Oracle 数据库，其中有一个或多个表。我也有 blob 数据，即存储图像，现在我想将该数据移动到 Sql Server 数据库。做这个的最好方式是什么？

我想测试一个表迁移，其中包含 Oracle 数据库中的图像数据并将其移动到 SQL Server 表中。

如何测试将数据从一个表从 Oracle 迁移到 SQL Server？

但首先我要确认的是，图像数据是否可以从 Oracle DB 迁移到 SQL Server DB，迁移时有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-02T15:30:04.527

我认为您应该看看通常称为“SSMA”的**Microsoft SQL Server 迁移助手。**如果您想从 oracle 迁移到 SQL Server，那么它将对您有很大帮助，因为它可以自动将所有 oracle 对象转换为 SQL Server，并且非常易于使用。它甚至告诉你什么可以转换，什么不能转换。对于不能自动转换的东西，您可以通过在互联网上稍微搜索一下，轻松地手动转换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:27:03.857

我建议看一下[SQL Server Integration Services](http://msdn.microsoft.com/en-us/library/ms141026.aspx) (SSIS)。

SSIS 是为数据仓库构建的 ETL（提取、转换和加载）工具，但它也非常适合迁移数据。它基本上取代了旧的 SQL Server 数据转换服务 (DTS)，是一种强大且性能快速的工具，允许您将数据从一个系统移动到另一个系统（包括 Oracle），同时让您能够在必要时转换数据。

它还具有工作流功能，允许您设置执行路径（即在加载发票数据之前加载客户端数据）。

在构建各个步骤时，您可以轻松查看传入和流经您设置的不同对象的数据。

最棒的是，如果你至少运行 SQL Server Standard Edition，SSIS 基本上是免费提供的。

最后，关于图像的问题，blob 只是 blob。二进制数据流。我没有尝试将图像从一个迁移到另一个，但我看不出它为什么不起作用。

# parsing - 遇到词法错误："<" (60) after ""

> ID：13133385
> 
> 赞同：0
> 
> 时间：2012-10-30T05:49:14.990
> 
> 标签：parsing, character-encoding, character, lexical-analysis

什么时候抛出这个词法错误？我有一个程序，我在文件中编写测试用例。我的 java 程序解析文件，读取并执行测试用例。在解析阶段我遇到了这个错误。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:32:02.830

[如果您向W3C CSS Validator](http://jigsaw.w3.org/css-validator/)提交 HTML 文档，您将收到这样的错误消息。原因是类似的结构`<!DOCTYPE html>`在 CSS 中没有意义，即使在词汇级别也是不允许的。

我不知道这与 Java 程序解析文件有什么关系。我的疯狂猜测是您的程序处理数据并从中提取或生成 CSS 样式表，然后将样式表传递给 CSS 验证。在这种情况下，数据或解析中有问题——解析器根本没有准备好处理 HTML（或 XML），或者它解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T22:26:53.357

我在 Java 编译中遇到了同样的错误。您的构建链中的某些内容正在使用工具[“cpd”（复制/粘贴检测器）](http://pmd.sourceforge.net/pmd-4.3.0/cpd.html)执行静态代码分析。它在读取您的代码并且无法解析它时会引发词汇错误。不幸的是，我不确定是什么确切的条件导致它失败。我希望这会为您指明正确的方向！

# msbuild - 将石蜡与 TFS 结合使用

> ID：13133387
> 
> 赞同：3
> 
> 时间：2012-10-30T05:49:31.017
> 
> 标签：msbuild, wix, wix3.6, paraffin

我有一个解决方案，其中包含许多我想使用[石蜡](https://github.com/Wintellect/Paraffin)来维护包含文件列表的 Wix 项目。

据我了解，您通常会将石蜡指向各个 bin 文件夹以收集所有文件。

当 TFS 构建解决方案时，它会覆盖 OutDir msbuild 属性，这会导致所有构建输出进入一个公共二进制目录，而不是每个项目的 bin 文件夹。

那么在这种情况下人们如何使用石蜡呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:37:50.890

我已经很多年没用过**石蜡**了。最新版本可能会满足您的需求，但让我给您一些额外的想法，您可以使用或不使用**石蜡**。

**paraffin**、**heat**和**tallow**的一个缺点是它们会收集*二进制文件*，因此它们必须存在，位于适当的文件夹等中。另一种方法是从**.sln**文件本身和它引用的**.proj**文件中收集 - 解决方案是大概是产品|包中哪些二进制文件的最终列表。您可能能够在构建时为每个二进制文件自动生成片段，而无需在源代码管理中维护这些片段，也无需实际构建二进制文件。

查看 WiX 3.6+ 中的 MSBuild 集成，尤其是[收获目标](http://wix.sourceforge.net/manual-wix3/msbuild_target_reference_toc.htm)。如果这对您不起作用，请尝试以下操作：

我们在最近的一个项目中采用的方法完全绕过了**热量**。我们编写了一个工作流活动来扫描**.sln**及其**.proj**引用，并为每个二进制文件直接生成一个 WiX**片段**——它们都是 XML 文档。第 3 版 UUID 是根据二进制名称、目标文件夹和构建版本生成的（此想法归功于[Derek Cicerone](http://installing.blogspot.com/2006/09/automatically-generating-component.html)），因此**ComponentID**在构建之间保持一致，但在分支到新版本时会自动滚动。

解决方案中的一些二进制文件（例如测试夹具）我们不想放入安装程序包中，因此我们在**.proj**文件中注入了一个新的 MSBuild 属性来标记“可安装”（或不可安装）。你可以注入一个属性来指定目标目录——在我们的例子中，所有的二进制文件都*应该*进入同一个文件夹，所以我们不需要那个。如果您想花哨的话，您甚至可以为此构建一个自定义的 Visual Studio 项目属性页面。

这样做的一个好处是团队中的应用程序开发人员可以简单地向解决方案添加新的二进制文件，或删除现有的二进制文件，安装程序包将在下一次构建时自动同步**.msi包中的内容。**为安装人员（您真正的）节省了很多麻烦！

您可以结合使用这些方法：扫描解决方案为其构建的二进制文件，然后使用该信息来定位**石蜡**或**加热**适当的文件夹|文件以进行收获。

# android - 方向更改导致 Activity 实例计数增加

> ID：13133388
> 
> 赞同：0
> 
> 时间：2012-10-30T05:49:35.527
> 
> 标签：android, count, orientation, instance

我有一个`TestActivity`. 此活动将从`Button`按下时的主要活动开始。这就是我的测试活动在清单文件中的声明方式。

```
 <activity
        android:name="com.example.MyTestActivity"
        android:configChanges="keyboard|keyboardHidden"
        android:label="MYTESTACtivity"
        android:theme="@style/someTheme"
        android:windowSoftInputMode="stateHidden|adjustPan" >
    </activity> 
```

现在的问题是，一旦`TestActivity`屏幕显示出来，如果我改变方向，那么实例计数`TestActivity`会增加 1。如果我再次将其更改为纵向模式，它会再增加 1。这就是在方向更改期间实例计数不断增加的方式。

无论方向变化如何，请建议如何一次只制作一个活动实例。我也尝试添加`android:launchMode="SingleTop"`仍然存在相同的问题。仅供参考，这就是我能够在严格模式下找到实例计数的方式。

```
01-02 01:39:48.855: E/StrictMode(21992): android.os.StrictMode$InstanceCountViolation: class com.example.MyTestActivity; instances=20; limit=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:02:27.287

onCreate() 调用是预期的。每次更改方向时，您的活动都会被销毁，然后重新创建，这会导致调用 onCreate()。但是，似乎现有实例没有被破坏，而我所知道的唯一原因就是泄漏。一个常见的原因是当 Activity 被销毁时没有取消绑定位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:34:42.880

我决定将我的评论移至答案并扩展它，希望其他新人发现这篇文章不会不经进一步思考就接受这个作为解决方案：

> android:configChanges:orientation|screensize

Android 旨在销毁和重新创建您的配置更改活动，这是有充分理由的。通过将其添加到清单中，您正在做的是说“我明白我在做什么。我不希望 Android 以它设计的方式运行，我将处理所有后果。

在某些情况下，这是正确的解决方案，但在大多数情况下，这是错误的解决方案，而且远非“我的问题已解决”，事实上，您的问题可能才刚刚开始，因为您必须编写更多代码来完成 Android 会做的事情自动地。更多代码 = 更多错误 = 更低的可维护性。

OP 没有提供足够的细节来提供准确的答案，但是，一般正确的答案是了解 Activity 生命周期（即 Android 的设计工作方式）并考虑它如何应用于您的应用程序以及如何处理各种回调. 特别是，了解 onCreate()、onStart() 和 onResume() 以及 onPause() 和 onStop() 之间的区别是关键。例如，在 onCreate() 中放置大量代码是初学者常见的错误。我见过几乎所有重要代码都在 onCreate() 中完成的应用程序，但它并不漂亮。开发人员第一次按下主页按钮，然后返回到他们的应用程序并想知道为什么它不能正常工作。

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

Yddl 在这里给出了一个很好的解释：

[为什么不总是使用 android:configChanges="keyboardHidden|orientation"？](https://stackoverflow.com/questions/7818717/why-not-use-always-androidconfigchanges-keyboardhiddenorientation)

如果您想投票，请投票给他，因为我所做的只是参考他的回复。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-30T06:02:37.757

默认情况下，当屏幕方向在运行时发生变化（用户旋转了设备）时，Activity 会关闭并重新启动。为了防止这种情况，请在您的清单中添加以下内容。

`android:configChanges="keyboardHidden|orientation"`

因此，您的清单将如下所示。

```
<activity
    android:name="com.example.MyTestActivity"
    android:configChanges="keyboard|keyboardHidden"
    android:label="MYTESTACtivity"
    android:theme="@style/someTheme"
    android:windowSoftInputMode="stateHidden|adjustPan" 
    android:configChanges="keyboardHidden|orientation">
</activity> 
```

有关更多信息，请查看[此](https://stackoverflow.com/questions/7818717/why-not-use-always-androidconfigchanges-keyboardhiddenorientation)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-30T06:07:27.037

尝试添加这个：

```
<activity
    android:name="com.example.MyTestActivity"
    android:configChanges="keyboard|keyboardHidden|orientation"
   ...../> 
```

在迎新活动期间，您的活动不会重新开始。

# apache-flex - Flex: parentDocument 在 SDK 4.1 和 4.5 版本之间不一致

> ID：13133389
> 
> 赞同：1
> 
> 时间：2012-10-30T05:49:41.270
> 
> 标签：apache-flex, flex4, flex-spark

我发现`parentDocument`Flex SDK 4.1 和 4.5 之间存在一些不一致之处。简而言之，在 4.1 中工作的现有代码在 4.5（和 4.6）中被破坏了。这是一个小例子来演示：

**测试项目.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="500" minHeight="500" xmlns:local="*">

    <local:SubComponent x="50" y="50"/>
</s:Application> 
```

**子组件.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         width="200" height="200">

    <fx:Script>
        <![CDATA[
            import spark.components.Application;

            protected function button1_clickHandler(event:MouseEvent):void
            {
                var app:Application = this.parentDocument as Application;

                if (app != null) {
                    trace('Good');
                } else {
                    trace('Bug');
                }
            }
        ]]>
    </fx:Script>

    <s:Button x="18" y="20" label="Button" click="button1_clickHandler(event)"/>
</s:Group> 
```

使用 4.1 SDK，我可以成功地`Application`通过`parentDocument`. 但是，这在 4.5 SDK 中失败。在 4.5 中，`parentDocument`现在是皮肤对象：

```
"parentDocument"    spark.skins.spark.ApplicationSkin (@9d7e479) 
```

如果我上升两个级别，那么我成功获得了 Application 对象：

```
"parentDocument.parentDocument"    TestProject (@9d7e0a1) 
```

`parentDocument`所以，我可以通过替换来解决这个问题`parentDocument.parentDocument`。但是，我不清楚这种变化是否是我可以指望保持一致的预期行为，或者它是否是一个可能会在未来某个时间修复的错误，此时行为将恢复到 4.1 的方式做事。所以，我的问题是：

1.  有没有其他人遇到过这个问题？如果是这样，你是如何处理的？
2.  如果您开发了一种解决方法，您的解决方案是依赖于特定的 SDK 版本，还是适用于所有 SDK 版本？
3.  从 4.1 到 4.5 的行为变化是有意的，还是这是一个错误？我怀疑是错误，但我一直无法以一种或另一种方式找到任何确定的东西。

请注意，我上面的示例旨在以最少的代码和最小的复杂性来演示该问题。在我的实际项目中，我有一个包含`TitleWindow`子组件的模块，并且我试图让子组件调用`TitleWindow`（via `parentDocument`）中的方法。因此，涉及查找`Application`对象的其他方法的解决方法并不真正适用，因为子组件实际上是在寻找一个`TitleWindow`，而不是`Application`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:17:16.610

是的，这不是错误。这实际上是火花组件的一个“特性”。基本上，对于 SkinnableContainers（即 TitleWindow），实际上将子级添加到组件皮肤的 contentGroup 中。有几篇很好的文章[在这个链接](http://flexponential.com/2009/12/08/differences-between-ivisualelement-parent-and-ivisualelement-owner/)和[这个](http://www.billdwhite.com/wordpress/?p=296)链接上解释了这一切。在许多情况下，您可能可以快速将代码更改为 .owner 属性（只要子对象是 DisplayObject），以达到您想要的结果。更好的方法可能是重构您的一些代码以更好地适应外观提供的视图封装（让子组件触发事件而不是尝试访问父组件上的方法......那种事情）。一旦您了解了皮肤的所有内部工作原理，这将是非常酷的东西。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:51:50.580

它肯定在 3.x 和 4.x 之间发生了变化。在点发布之间也可能变得更加令人兴奋。这里的一些细节：http: [//help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e3a.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e3a.html)

# android - 在 Android 中通过对象传递值

> ID：13133390
> 
> 赞同：0
> 
> 时间：2012-10-30T05:49:46.177
> 
> 标签：android, android-intent

> **可能重复：**
> [如何在 Android 中将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

我想知道是否可行并建议通过对象将值从一个活动传递到另一个活动，以及我应该在调用 Intent 之前还是之后传递值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:55:23.360

> 是否可行并建议通过对象将值从一个活动传递到另一个活动？

=> 是的，它是可行的和可能的。检查：[如何在 Android 上将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

> 我应该在调用 Intent 之前还是之后传递值？

=> 是的，当然你应该在开始下一个活动之前传递对象。我很惊讶你为什么要在调用意图后通过它？

# jquery - drupal 7 FAPI-ajax更改事件不适用于文本字段

> ID：13133393
> 
> 赞同：1
> 
> 时间：2012-10-30T05:49:53.367
> 
> 标签：jquery, drupal, drupal-7, drupal-modules, drupal-fapi

您如何使用ajax 更改事件来实时获取和显示文本字段的值（即在每个值更改时显示新值）。我尝试了以下方法，但似乎`#ajax['event']='change'`不适用于文本字段。只有当文本字段失去焦点时才会触发 Ajax 调用，例如，当我在文本字段中写 Hello 时，它不会显示，直到我单击文本字段之外。这是我的代码：-

```
function test1_form($form, &$form_state)
{
   $form['text']=array(
         '#title'=>'Text:',
         '#type'=> 'textfield',
         '#ajax'=> array(
            'event'=>'change',
            'callback'=>'test1_form_submit',
            'wrapper'=>'contnr',
            'method'=>'replace',
        ),
    );

   $form['up_button']=array(
      '#title'=>t('Preview:'),
      '#type'=>'markup',
      '#prefix'=>'<div id="contnr">',
      '#suffix'=>'</div>',
      '#markup'=>'<h2>This is to be replaced</h2>',
   );
   return $form;
}

function test1_form_submit($form, $form_state)
{       
  return $form_state['values']['text'];
} 
```

有没有办法实时获取文本字段的值并将其显示在 drupal 7 模块的浏览器中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:20:55.217

您可以使用 jQuery 的[keydown()](http://api.jquery.com/keydown/)事件获得相同的结果。

代码示例：

```
jQuery("#textFieldID").keydown(function(e) {
    jQuery("#contnr").html("<h2>" + jQuery(this).val() + "</h2>");

    // the above line can be broken into 2 lines as follows:
    var myVal = jQuery(this).val(); // grab the textfield value
    jQuery("#contnr").html("<h2>" + myVal + "</h2>"); // set the value to the div
}); 
```

更新：

您可以将 js 代码复制到一个`.js`文件中（调用它`my-script.js`并将其放入模块的目录中），然后使用[#attached](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#attached)属性将 javascript 文件添加到页面中，如下所示：

```
function test1_form($form, &$form_state)
{
   $form['text']=array(
         '#title'=>'Text:',
         '#type'=> 'textfield',
         '#ajax'=> array(
            'event'=>'change',
            'callback'=>'test1_form_submit',
            'wrapper'=>'contnr',
            'method'=>'replace',
        ),
    );

   $form['up_button']=array(
      '#title'=>t('Preview:'),
      '#type'=>'markup',
      '#prefix'=>'<div id="contnr">',
      '#suffix'=>'</div>',
      '#markup'=>'<h2>This is to be replaced</h2>',
   );

   // the only code you need to add.
   $form['#attached']['js'] = array(
       drupal_get_path('module', 'test1') . '/my-script.js',
   );

   return $form;
} 
```

希望这能解决你的问题......穆罕默德。

# emacs - 钩子持有的函数何时会在 emacs 中运行？

> ID：13133394
> 
> 赞同：3
> 
> 时间：2012-10-30T05:50:05.973
> 
> 标签：emacs, hook, elisp

比如我在里面放了一些代码`python-mode-hook`，这些代码会在以下情况下运行：

(1) 每次打开一个python文件`*.py`

(2) 只有第一次`python-mode`被触发

有谁知道哪个答案是正确的？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T06:47:20.510

没有关于钩子何时运行的一般规则：这仅由定义钩子的代码控制。但是，有遵循的一般约定，其中之一是：

*   如果`foo-mode`是某种主要模式，则`foo-mode-hook`每次`foo-mode`在缓冲区中启用时都会运行。

特别是，正如已经指出的那样，`python-mode-hook`每次`.py`加载文件时都会运行函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T07:43:27.420

如果您想查看代码，请注意绝大多数主要模式都是用`define-derived-mode`宏构造的（如果新模式实际上不是*从*另一个模式派生的，模式可以简单地提供，以便仍然获得相同的`nil`好处和使用宏的标准行为）。`parent`

 *所以`M-x` `find-function` `RET` `define-derived-mode` `RET`

您将看到调用模式时发生的最后一件事是`(run-mode-hooks ',hook)`（`,hook`在本例中将扩展为带有`-hook`后缀的模式名称）。

因此，每次缓冲区启用该模式时（意味着执行该宏定义的模式函数），该模式的钩子也会运行（以及任何父/祖先模式的钩子——有趣`delay-mode-hooks`和`run-mode-hooks`交互意味着没有钩子一直运行，直到所有其他处理完成）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T05:53:54.483

每次打开 python 文件时它都会运行。

然后将为此文件缓冲区触发 python 模式并执行您的钩子。

你可以通过编写一个简单的钩子来轻松地测试它：

```
(add-hook 'python-mode-hook  (lambda () (message "python mode hook"))) 
```*

# c++ - 比较运算符的行为是什么？

> ID：13133398
> 
> 赞同：1
> 
> 时间：2012-10-30T05:50:19.843
> 
> 标签：c++, c, comparison, operators

> **可能重复：**
> [双重比较](https://stackoverflow.com/questions/12961717/double-comparison)

```
int x=-1;
if(0<=x<=9)
        std::cout<< "Without Logical operator";
if (0<=x && x<=9)
    std::cout<< "With Logical operator"; 
```

我知道第二个`if`它工作正常。在第一种`if`情况下发生了什么。它进入第一个`if`除了`x`是`-1` 为什么编译器`error`在使用时不给出`(0<=x<=9)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:56:53.047

在 C 中，布尔值只是普通整数。在布尔上下文中，`0`为假，所有其他值为真。在这种情况下，

```
(0 <= x <= 9)   ==
((0 <= x) <= 9) == // the (0 <= x) evaluates to 0, which is false in boolean context
(0 <= 9)        ==
1 (true) 
```

# php - 每年自动更新表数据

> ID：13133399
> 
> 赞同：0
> 
> 时间：2012-10-30T05:50:21.420
> 
> 标签：php, mysql, database, postgresql, date

我有一个数据库表，其中包含`id, description, start_date, end_date`每个月有 12 个条目我只想在每个字段中将 2012 年增加到 2013 年，当超级用户登录检查日期并且如果它仅在数据库中更新年份`start_date, end_date`时，今年年底是可能的`01-01-20xx`桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:56:28.100

MySql 事件调度器在这里：

[MySql 事件](http://dev.mysql.com/doc/refman/5.6/en/events-overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:02:42.557

您可以尝试以下方法：

```
 UPDATE Table_name SET start_date = DATE_ADD(start_date,INTERVAL 1 YEAR), end_date = DATE_ADD(end_date,INTERVAL 1 YEAR) WHERE id = ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:01:13.087

```
Try This       

 <?php
        $currentyear=date("Y");
        //check the year database value 
        $yearindatabase=2012;//from database

        if($currentyear>$yearindatabase)
        {

     for($i=1;$i<=12;$i++)
        {

        $num = cal_days_in_month(CAL_GREGORIAN, $i, $currentyear);
        $start_date="2012-".$i."-01";
        $end_date="2012-".$i."-".$num."";

        //Update Query

        $queryUpdate="update table set start_date='".$start_date."',end_date='".$end_date."'";

        }

        ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:28:47.663

```
$query="UPDATE awards_list SET start_date = start_date + interval '1 year', 
            end_date = end_date + interval '1 year'"; 
```

我也在使用 postgressql，因为它工作得很好，我通过单击按钮得到它，即当单击按钮时，整个表年字段将增加 1 年，因此单击一年就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T13:44:19.140

在职的

```
 UPDATE Table_name SET start_date = DATE_ADD(start_date,INTERVAL 1 YEAR), end_date = DATE_ADD(end_date,INTERVAL 1 YEAR) WHERE id = ''; 
```

# javascript - 访问 jquery ajax 调用之外的变量数据

> ID：13133404
> 
> 赞同：1
> 
> 时间：2012-10-30T05:50:53.900
> 
> 标签：javascript, jquery, ajax

```
$.post("http://openexchangerates.org/", parameters,
    function (data) {
        var currencyData = eval('( '+data+')');
        currency = currencyData["currency"];
    }
);
// I want to access currency here. But I am unable to access it. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:06:42.147

尝试在 ajax 函数之外声明货币变量。您可以首先将其设置为默认值，以防止在返回“未定义”时出现歧义（出于调试目的）

```
function getCurrency(){

    var currency = 'debug'; //TODO: remove this value once code works. 

    $.post("http://openexchangerates.org/", parameters,
        function (data) {
        var currencyData = eval('( '+data+')');
        currency = currencyData["currency"];
    }
    );

    console.log(currency);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:53:57.950

我要出去猜测这是一个跨源问题。

如果我是对的，您需要将您的 http 服务器设置为 openexhangerates.org 的代理。

您的回调是否执行过？

# c++ - dynamic_cast 中的类型必须是指向完整类类型的指针或引用，或者 void *

> ID：13133407
> 
> 赞同：10
> 
> 时间：2012-10-30T05:51:11.097
> 
> 标签：c++, openscenegraph

我希望有人能理解为什么下面的代码会失败。我正在尝试从 osg::Node* 节点对象获取 PositionAttitudeTransform （Openscenegraph 类）的实例。但是下面以粗体显示编译器错误。

```
 void CameraPosCallbackUpdate::operator()(osg::Node* node, osg::NodeVisitor* nv)
{ 
   // other code goes here

    osg::PositionAttitudeTransform* pat = dynamic_cast<osg::PositionAttitudeTransform*> (node);

} 
```

**IntelliSense：dynamic_cast 中的类型必须是指向完整类类型的指针或引用，或 void ***

请帮助我以正确的方式访问我的对象，我希望能帮助我理解这里的问题，因为我相信演员应该是可能的。

![等级制度](../Images/081c925899098736785622caae619175.png) [http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/a00529.html](http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/a00529.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T06:15:07.180

我相信您必须拥有`#include`包含`class osg::PositionAttitudeTransform`.
`dynamic_cast`当目标类的主体不可见时给出这样的错误。

[这是g++ 中重现](http://ideone.com/9uZoUl)的类似错误。

# android - Android：如何更改默认日志记录级别？

> ID：13133408
> 
> 赞同：8
> 
> 时间：2012-10-30T05:51:10.827
> 
> 标签：android, logging

根据[文档](http://developer.android.com/reference/android/util/Log.html#isLoggable%28java.lang.String,%20int%29)，只有两种方法可以将默认日志记录级别从 INFO 更改为较低级别（例如 DEBUG）：

1.  `setprop log.tag.<YOUR_LOG_TAG> <LEVEL>`， 或者
2.  `log.tag.<YOUR_LOG_TAG>=<LEVEL>`在 /data/local.prop 中。

**是否可以在应用程序中捆绑日志记录配置？**我正在寻找与应用程序捆绑在一起并在加载时更改日志记录行为的等效配置文件`logging.properties`或配置文件。`logback.xml`目标是避免手动配置应用程序将在其上运行的每个设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:01:58.227

我最终使用了[logback-android](http://tony19.github.com/logback-android/)。如果有人提出更好的解决方案，我会将这个问题留得更久一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:09:54.563

您也可以在此处使用 java logger 进行一些自定义..

**ConsoleLogHandler.java**

```
package com.sony.evc.vis.system.util.logger;

import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.LogRecord;

import android.util.Log;

public class ConsoleLogHandler extends Handler
{

    @Override
    public void close()
    {}

    @Override
    public void flush()
    {}

    // filter logs and publish them
    @Override
    public void publish(LogRecord record)
    {
        String className = record.getLoggerName() + ": "
                + simplifyClassName(record.getSourceClassName());
        int threadID = record.getThreadID();
        String methodName = record.getSourceMethodName();
        String msg = record.getMessage();
        int level = record.getLevel().intValue();

        logMessage(className, threadID, methodName, msg, level, record.getThrown());
    }

    // simplify class name from full applied package name to simple class
    private String simplifyClassName(String sourceClassName)
    {
        String fullClassName[] = sourceClassName.split("\\.");
        return fullClassName[fullClassName.length - 1];
    }

    private void logMessage(String className, int threadID, String methodName, String msg,
            int level, Throwable throwable)
    {
        if (level == Level.FINE.intValue()) {
            Log.d(className, "ThreadID:" + threadID + "," + methodName + "()," + msg);
        }
        else if (level == Level.INFO.intValue()) {
            Log.i(className, "ThreadID:" + threadID + "," + methodName + "()," + msg);
        }
        else if (level == Level.WARNING.intValue()) {
            Log.w(className, "ThreadID:" + threadID + "," + methodName + "()," + msg, throwable);
        }
        else if (level == Level.SEVERE.intValue()) {
            Log.e(className, "ThreadID:" + threadID + "," + methodName + "()," + msg, throwable);
        }

    }

} 
```

* * *

创建类**LoggerFactory.java**

```
package com.sony.evc.vis.system.util.logger;

import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.Logger;

public class LoggerFactory {

    public static Logger Log;
    private static ConsoleLogHandler logHandler;
    // Global constants to give programmer choice to add if condition before
    // logging a code.
    public static boolean FINE;
    public static boolean INFO;
    public static boolean WARN;

    // initialise the logger
    public static void init(String version, String globalDebugLevel,
            String appDebugLevel) {

        Log = Logger.getLogger(version);

        // debug level settings
        Level debuglevel = LogLevel.setDebugLevel(globalDebugLevel,
                appDebugLevel);
        if (debuglevel.equals(Level.ALL) || debuglevel.equals(Level.FINE)
                || debuglevel.equals(Level.FINER)
                || debuglevel.equals(Level.FINEST)) {
            FINE = INFO = WARN = true;
        } else if (debuglevel.equals(Level.INFO)) {
            INFO = WARN = true;
        } else if (debuglevel.equals(Level.WARNING)) {
            WARN = true;
        }
        Log.setLevel(debuglevel);

        // logger send its msg to several handlers by default, we have to
        // disable that
        Log.setUseParentHandlers(false);

        // avoid recreation of handler in case activities onCreate() is called
        // again but logHandler is not
        // garbage collected
        if (logHandler == null)
            logHandler = new ConsoleLogHandler();

        // remove previously assigned handlers. This is very important and
        // failing to do so may result in
        // duplication of same logs
        for (Handler handler : Log.getHandlers())
            Log.removeHandler(handler);

        // set this loggers handler and make sure that only one instance is
        // associated with it
        Log.addHandler(logHandler);
    }
} 
```

* * *

创建枚举**LogLevel.java**

```
package com.sony.evc.vis.system.util.logger;

import java.util.logging.Level;

public enum LogLevel {
    DEBUG, INFO, WARNING, ERROR, NO_LOG, DISABLE;
    /*
     * set log-debugLevel as per requirement. Global level is given preference
     * over app and service levels. If global level is disabled, other
     * levels are considered
     */
    public static Level setDebugLevel(String sGlobalDebugLevel,
            String sAppDebugLevel) {
        String strGlobalDebugLevel = sGlobalDebugLevel.trim().toUpperCase();
        String strAppDebugLevel = sAppDebugLevel.trim().toUpperCase();
        LogLevel globalDebugLevel = LogLevel.valueOf(strGlobalDebugLevel);
        LogLevel appDebugLevel = LogLevel.valueOf(strAppDebugLevel);
        LogLevel logLevel = globalDebugLevel == LogLevel.DISABLE ? appDebugLevel
                : globalDebugLevel;

        switch (logLevel) {
        case DEBUG:
            return Level.FINE;
        case INFO:
            return Level.INFO;
        case WARNING:
            return Level.WARNING;
        case ERROR:
            return Level.SEVERE;
        case NO_LOG:
            return Level.OFF;
        case DISABLE:
            return Level.OFF;
        default:
            return Level.INFO;
        }
    }
} 
```

* * *

您还需要将 Strings.xml 更新为

```
<!--
    :-Accepted values for global_debuglevel are: "debug", "info", "warning", "error"(in increasing order of priority),No_Log
      and Disable. 
    :-Setting any other value will set "info" level
    -->
    <string name="global_debuglevel">debug</string>

    <!--
    :-Accepted values for app_debuglevel are: "debug", "info", "warning", "error"(in increasing order of priority)
      and No_Log
    :-Setting any other value will set "info" level
    -->
    <string name="app_debuglevel">debug</string> 
```

* * *

从应用程序开始，只需将 Logger 初始化为

```
 String service_version = getString(R.string.service_version);
    String global_debugLevel = getString(R.string.global_debuglevel);
    String service_debugLevel = getString(R.string.service_debuglevel);
    LoggerFactory.init(service_version, global_debugLevel,
            service_debugLevel); 
```

* * *

对于打印日志写：

```
Log.info(" message ");
Log.fine(" message ");
Log.severe(" message ");
Log.warning(" message "); 
```

# jquery - jQuery Sizzle 在选择器上调用错误

> ID：13133417
> 
> 赞同：0
> 
> 时间：2012-10-30T05:52:32.890
> 
> 标签：jquery, sizzle

为什么当我使用嘶嘶声时出现以下代码调用错误：

```
var $myInput="#myForm input";

$($myInput+":checked").click(function(){
  ....
}); 
```

选择`$($myInput+":checked")`器返回“[object Object]：checked”。但是当我简单地使用变量内容时就像`$("#myForm input:checked")`工作一样小心。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:56:31.320

`$myInput`似乎是您的代码中的一个对象，但在您的示例代码中是一个字符串。

如果您想过滤`$myInput`并仅将此事件处理程序应用于`:checked`输入，请使用以下内容：

```
$myInput.filter(':checked').click(function() {
  // ...
}); 
```

请注意，此处理程序绑定到`$myInput`创建时存在的元素，因此这不会考虑稍后创建的元素。

# c++ - kinect 作为网络摄像头

> ID：13133426
> 
> 赞同：0
> 
> 时间：2012-10-30T05:53:44.873
> 
> 标签：c++, kinect, drivers

我需要将我的 kinect 设备添加到 Skype 中的摄像头列表中。我试过这个，[http://www.e2esoft.cn/kinect/](http://www.e2esoft.cn/kinect/)，但它不起作用。也许是因为我使用的是 OpenNI 2.x 版本。

我将它安装为 PrimeSense 设备，因为我不允许使用 Microsoft SDK。

也许我应该编写自己的驱动程序。但我找不到任何涵盖网络摄像头驱动程序编写的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:17:20.387

Here is another alternative that uses OpenNI drivers : [http://www.softpedia.com/get/Internet/WebCam/Kinect-Virtual-Camera.shtml](http://www.softpedia.com/get/Internet/WebCam/Kinect-Virtual-Camera.shtml) . If this doesn't work you can remove those drivers and install Microsoft Kinect SDK , you might find some options for Microsoft Kinect SDK .

PS: Writing a driver is a very daunting task . If you are a newbie it might take you weeks to just understand what goes beyond developing a driver .

# powershell - 来自基本 .exe 2012 的新服务 powershell

> ID：13133428
> 
> 赞同：0
> 
> 时间：2012-10-30T05:53:50.200
> 
> 标签：powershell, windows-services

这不可能很难找到......但它是！似乎每年一次我想从预编译的 .exe 程序创建一个 Windows 服务。每次我最终都试图记住我忘记的东西。

现在我看到有一个带有 powershell 的“新服务”cmdlet。伟大的！除了 binpath 显然不应该是您要启动的实际 .exe 的路径。:(

有人可以告诉我简单，现代的方法吗？

**-编辑 -**

作为记录，我知道如何使用 srvany.exe 或 instsrv.exe 来做到这一点......我只是在寻找现代的 2012 方式（如果存在的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:11:49.977

我的理解是它不能是任何可执行文件。

它需要有一个服务入口点，例如`OnStart`. 看这里：

[错误 1053 服务没有响应启动或控制请求](https://stackoverflow.com/questions/1673545/error-1053-the-service-did-not-respond-to-the-start-or-control-request)

# javascript - requestAnimationFrame 检测停止

> ID：13133434
> 
> 赞同：8
> 
> 时间：2012-10-30T05:54:32.110
> 
> 标签：javascript, requestanimationframe

我注意到，每当我停靠浏览器窗口或切换选项卡时， requestAnimationFrame 都会停止被调用（我希望会发生这种情况）。

有没有办法检测何时发生此停止？

原因是，我的游戏中有一个计时器。当 requestAnimationFrame 不再呈现时，我想停止计时器。

我已经查看了“window.blur”和“window.focus”事件，但这些与 requestAnimationFrame 何时停止和启动无关（例如，当您在浏览器窗口外单击时触发 window.blur 事件但 requestAnimationFrame 保持跑步）。

我想订阅 requestAnimationFrame 何时开始和停止。你知道方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:58:42.507

如果您知道在正常情况下`requestAnimationFrame`以至少 4 Hz 的频率触发，您可以设置一个例如 3 Hz 的计时器，如果`requestAnimationFrame`计时器滴答之间没有滴答声，则`requestAnimationFrame`计时器已停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:58:23.507

试试这个：

```
var timer;

if (!window.requestAnimationFrame) {
   window.requestAnimationFrame = window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
}

requestAnimationFrame(function again() {
 if (timer === "paused") {
  return;
 }

 clearTimeout(timer);

 timer = setTimeout(function () {
  timer = "paused";
  console.log("got ya, you closed the window");

  requestAnimationFrame(function () {
   timer = null;
   console.log("got ya, you re-opened the window");
    requestAnimationFrame(again);
  });
 }, 1e3);

 // rest of code goes here

 requestAnimationFrame(again);
}); 
```

需要更多信息？问一下。

# ruby-on-rails - 在 Rspec 中测试创建变量分配

> ID：13133441
> 
> 赞同：0
> 
> 时间：2012-10-30T05:55:47.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec

我正在创建一个 rspec 测试，以查看 create 方法中的实例变量是否保留了构建的数据。但是，我的测试不起作用，因为我返回了这个错误......

```
Failure/Error: assigns[:micropost]should eq(@post)
expected: #<Micropost id: 1, content: "Hello there", user_id: 1>
got: #<Micropost id: 2, content: "Hello there", user_id: 1> 
```

我的 rspec 测试是

```
describe ::MicropostsController do

before :each do
  @post = FactoryGirl.create(:micropost)
end

it "tests the instance variable in create method" do
    post :create, micropost: FactoryGirl.attributes_for(:micropost)
    assigns(:micropost).should eq(@post)
end 
```

我的 FactoryGirl 文件是

```
FactoryGirl.define do

 factory :micropost do

  content "Hello there Bob!"
  user_id "1"
  #even if I got rid of the double quotations around 1, the stringify key error still 
  #pops up

 end

end 
```

这是微柱控制器创建操作代码...

```
def create

@micropost = Micropost.new(params[:micropost])

 respond_to do |format|

  if @micropost.save

    format.html { redirect_to @micropost, notice: 'Micropost was successfully create.' 
    }

  else

    format.html { render action: "new" }

  end

 end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:13:55.117

如果您想测试创建了微博，您必须将一些参数传递给发布操作，在您的测试中，您只构建一个新的微博（在内存中，未保存）并且您的创建操作甚至不知道它存在：

我应该这样做：

```
before(:each) do
  @micro_mock = mock(:micropost)
  @micro_mock.stub!(:save => true)
end

it "creates a micropost" do
  params = {:micropost => {:something => 'value', :something2 => 'value2'}}
  Micropost.should_receive(:new).with(params).and_return(@micro_mock)
  post :create, params
end

it "assigns the created micropost to an instance variable" do
  Micropost.stub!(:new => @micro_mock)
  post :create
  assigns(:micropost).should == @micro_mock
end 
```

您应该测试重定向和闪存消息（在需要时将保存方法存根为真/假）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:12:30.057

你得到 nil 值是`micropost`因为你没有在这一行中发布任何数据：

```
post '/microposts' 
```

您需要实际包含数据才能使其正常工作：

```
post '/microposts', :micropost => p 
```

# html - 水平居中 DIV 并与顶部或底部固定距离，在窗口中不滚动

> ID：13133444
> 
> 赞同：0
> 
> 时间：2012-10-30T05:56:22.100
> 
> 标签：html, css, css-position

假设我有一个要水平居中的 div，并设置在距窗口顶部或底部固定距离处。我想将其宽度设置为 75%，并将其高度设置为根据动态内容而变化。页面永远不会有超出视口的内容，因此它永远不会滚动。我怎样才能用 CSS 做到这一点？HTML在这里，基本上：

```
<body>
  <div id="main">
    <div id="div_in_question">
      Omg stuff goes here it will probably change though via jQuery.
    </div>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:02:51.247

你可以像这个[Demo那样做](http://jsfiddle.net/VGRYG/)

HTML

```
<div class="container"></div> 
```

CSS

```
.container {
    height: 300px;
    width: 75%;
    position: absolute;
    background-color: #ff0000;
    margin-left: -37%;
    left: 50%;
} 
```

解释：给`position: absolute;`你和让它水平居中的真正诀窍是`div`给`margin-left`它，这将是你总宽度的一半，`div`并让它水平居中`left``50%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:03:58.157

您可以像这样划分页面宽度：

```
margin-left:14.5%;
margin-right14.5%;
width:75%; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:10:58.860

无论div中的内容量如何，您是否保持与顶部或底部的距离固定？

如果是这样，你可以尝试这样的事情：

```
<div id='outer'>
     <div id='inner'>                    
         SOme text hereSOme text hereSOme text hereSOme text hereSOme text hereSOme  
     </div>
</div> 
```

和CSS类：

```
#outer{
height:150px;
background-color:red
}

#inner{
width:75%;
height:auto;
background-color:yellow;
max-height:100%;
overflow:hidden;
margin-left:14.5%;
margin-right:14.5%
}​ 
```

[http://jsfiddle.net/hbRHW/](http://jsfiddle.net/hbRHW/)

# jquery - 特定 li 的 jQuery 选择器

> ID：13133447
> 
> 赞同：4
> 
> 时间：2012-10-30T05:56:37.827
> 
> 标签：jquery

我有以下标记

```
<div id="search-query-autocomplete">
  <ul id="autocomplete-results">
    <li class="auto-li">blue</li>
  </ul>
</div> 
```

并希望在用户按下时向第一个自动 li 添加一个类。

我有以下 javascript：

```
document.onkeydown = checkKey;
 function checkKey(e){
 e = e || window.event;

 if(e.keyCode=='40')
 {
   $('#autocomplete-results li:nth-child(0)').text('not working');
   console.log('here is 40'); //code
 }
} 
```

但它不起作用 - 我需要改变什么？

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T05:58:26.073

[`:nth-child`](http://www.w3.org/TR/selectors/#nth-child-pseudo)伪类从索引 1 而不是 0开始

第 n 个子伪类实际上不会帮助选择第一个`.auto-li`，您可以使用[`:first`](http://api.jquery.com/first-selector/), [.eq(0)](http://api.jquery.com/eq/)或[`:eq(0)`](http://api.jquery.com/eq-selector/)将选择过滤到第一个`.auto-li`

```
$('#autocomplete-results li.auto-li').eq(0).text('working'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:00:53.913

如果你想选择第一个`auto-li`，你的选择器实际上应该是：

```
$('#autocomplete-results li.auto-li:first') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:16:04.850

```
document.onkeydown = checkKey;
 function checkKey(e){
 e = e || window.event;

 if(e.keyCode===40)
 {    
     $('#autocomplete-results li:nth-child(1)').text('not working');
   alert('here is 40'); //code
 }
} 
```

**第 N 个子索引从索引 1 开始，而不是从标准列表索引 0 开始。**

并且不要将 =='40' 与 === 40 进行比较，因此没有不必要的类型转换（但这与您的代码的正确性无关）。

# c# - C# - 可重用菜单的自定义控件或用户控件？

> ID：13133456
> 
> 赞同：1
> 
> 时间：2012-10-30T05:57:35.487
> 
> 标签：c#, user-controls, custom-controls

在我当前的系统中，菜单是通过 CustomControl 代码生成的，该代码由其他项目共享以生成菜单。目前我需要为其添加一些功能，以便当碎石尺寸缩小时，它会被重新设计成更适合小屏幕（即移动设备）的设计。

我已经弄清楚应该如何进行更改，但是，我发现通过 CustomControl 生成的 html 代码可能并不那么容易维护。一方面，要改变它的人需要知道它在做什么，并且还需要了解它的生命周期。

我在考虑是否应该将 CustomControl 重构为 UserControl，但是在阅读了它们之间的差异之后，似乎 CustomControl 实际上更适合，因为该菜单系统在多个应用程序之间共享。

那你们怎么看？由 CustomControl 生成它是一种不好的做法（因为它使维护变得更加困难）？如果我使用 UserControl 是一种减少代码重复的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:01:41.737

如果控件与应用程序相关联，我会选择`UserControl`，因为正如您所说，它更易于可视化、编辑和维护。

如果您需要在多个项目中使用它，或者它需要高度可编程/可定制，那么我会选择服务器控件。

我不会考虑其中一种或另一种不好的做法。我会根据哪个最容易实现和维护来选择。

# python - Pandas 将 ISO 字符串转换为 datetime64

> ID：13133458
> 
> 赞同：4
> 
> 时间：2012-10-30T05:57:48.203
> 
> 标签：python, datetime, pandas

我希望快速将大约 10-20M ISO 日期时间字符串以微秒精度转换为 datetime64，以用作熊猫中的 DataFrame 索引。

我在 pandas 0.9 上，并尝试过在[git](https://github.com/pydata/pandas/issues/1571)上建议的解决方案，但我发现它需要 20 到 30 分钟，或者永远不会完成。

我想我找到了问题所在。比较这两者的速度：

```
rng = date_range('1/1/2000', periods=2000000, freq='ms')
strings = [x.strftime('%Y-%m-%d %H:%M:%S.%f') for x in rng]
timeit to_datetime(strings) 
```

在我的笔记本电脑上，约 300 毫秒。

```
rng = date_range('1/1/2000', periods=2000000, freq='ms')
strings = [x.strftime('%Y%m%dT%H%M%S.%f') for x in rng]
timeit to_datetime(strings) 
```

在我的笔记本电脑上，永远和一天。

我现在可能只是更改生成时间戳的 c++ 代码，以将它们置于更详细的 ISO 形式中，因为循环并修复数千万个邮票上的格式可能非常慢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:12:37.097

快速解析器代码仅处理带有破折号和冒号的标准 ISO-8601——正如您所见，当字符串格式正确时，它的速度非常快。如果您可以说服代码在 GitHub 上，并且肯定可以改进以处理更多案例（最好不要过多地降低标准格式的速度）。

作为一种部分令人满意的解决方法，您可以使用`datetime.strptime`将字符串转换为`datetime.datetime`，然后将该结果传递给`to_datetime`：

```
In [4]: paste
rng = date_range('1/1/2000', periods=2000000, freq='ms')
strings = [x.strftime('%Y%m%dT%H%M%S.%f') for x in rng]

## -- End pasted text --

In [5]: iso_strings = [x.strftime('%Y-%m-%d %H:%M:%S.%f') for x in rng]

In [6]: %timeit result = to_datetime(iso_strings)
1 loops, best of 3: 479 ms per loop

In [7]: f = lambda x: datetime.strptime(x, '%Y%m%dT%H%M%S.%f')

In [8]: f(strings[0])
Out[8]: datetime.datetime(2000, 1, 1, 0, 0)

In [9]: %time result = to_datetime(map(f, strings))
CPU times: user 48.47 s, sys: 0.01 s, total: 48.48 s
Wall time: 48.54 s 
```

它有 100 倍的不同，但比 1000+% 慢得多。我敢打赌`to_datetime`，可以改进使用 C 版本的 strptime，它会更快。练习留给读者，我猜

某天待办事项：http: [//github.com/pydata/pandas/issues/2213](http://github.com/pydata/pandas/issues/2213)

# mercurial - 为什么我的 hgignore 似乎不起作用？

> ID：13133459
> 
> 赞同：1
> 
> 时间：2012-10-30T05:58:08.117
> 
> 标签：mercurial

当我这样做时，`hg status`我看到：

```
[jiewmeng@JM Code]$ hg status
M examples/SampleTestingSolution/EmptyGeneralTesting/Debug/SPA.lib
M examples/SampleTestingSolution/EmptyGeneralTesting/Debug/UnitTesting.exe
M examples/SampleTestingSolution/EmptyGeneralTesting/Debug/UnitTesting.ilk
M examples/SampleTestingSolution/EmptyGeneralTesting/Debug/UnitTesting.pdb
M examples/SampleTestingSolution/EmptyGeneralTesting/EmptyGeneralTesting.suo
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/AST.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/CL.read.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/CL.write.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/DesignExtractor.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Lib-link.read.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Lib-link.write.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Node.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/PKB.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Parser.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Query Evaluator.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/Query Processor.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/SPA.Build.CppClean.log
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/SPA.lastbuildstate
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/SPA.log
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/VarTable.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/cl.command.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/lib.command.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/vc100.idb
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/vc100.pdb
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/SPA.vcxproj
M examples/SampleTestingSolution/EmptyGeneralTesting/SPA/SPA.vcxproj.filters
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/CL.read.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/CL.write.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/NodeTest.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/UnitTest.obj
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/UnitTesting.lastbuildstate
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/UnitTesting.log
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/cl.command.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/link.command.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/link.read.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/link.write.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/mt.command.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/mt.read.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/mt.write.1.tlog
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/vc100.idb
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/vc100.pdb
M examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/source/UnitTest.cpp
M examples/SampleTestingSolution/EmptyGeneralTesting/source/Parser.cpp
M examples/SampleTestingSolution/EmptyGeneralTesting/source/Parser.h
A .hgignore
? examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Debug/SPA.write.1.tlog
? examples/SampleTestingSolution/EmptyGeneralTesting/SPA/Parser.h
? examples/SampleTestingSolution/EmptyGeneralTesting/UnitTesting/Debug/UnitTesting.write.1.tlog 
```

所以我`.hgignore`看起来像

```
syntax: glob

*.lib
*.tlog
*.log
*.obj
*.tlog
*.idb
*.pdb
*.exe
*.ilk
*.filters 
```

当我再次执行 hg status 时，我看到输出有类似/不明显的差异。为什么？我希望所有这些都会消失`hg status`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:28:33.037

如果您已经添加了这些文件，则需要`hg forget`在应用 hgignore 指令之前“”它们。
请参阅“[和](https://stackoverflow.com/questions/1101167/what-is-the-difference-between-hg-forget-and-hg-remove)[之间有什么区别`hg forget``hg remove?`](https://stackoverflow.com/questions/1101167/what-is-the-difference-between-hg-forget-and-hg-remove)”：（`hg remove -Af`即`hg forget`）将删除它们而不将它们从工作目录中删除。
另请参阅[此线程](http://www.selenic.com/pipermail/mercurial/2009-August/027072.html)：

> 未跟踪的文件会在“ ”中显示一个问号`hg status`，除非它们与`.hgignore`文件匹配。

# facebook - FB Like 按钮停止计数，奇怪的行为

> ID：13133469
> 
> 赞同：1
> 
> 时间：2012-10-30T05:59:24.037
> 
> 标签：facebook, facebook-like, facebook-opengraph

几天前我的网站上的“Like Button”有问题。

一切正常，但突然计数器停止工作，重新计算“11,045 个赞”，最奇怪的是，当我登录我的 Facebook 帐户时，计数器显示 11.048 个赞，然后退出，它返回到 11.045，但这从来没有起那个号码。

我已经对其进行了测试，当您单击一切正常时，计数器会增加一个，并且该站点会在 FB 用户的墙上发布，但是当页面重新加载时，点赞计数器会返回到 11,045。

我在不同的论坛和 Facebook 的几乎所有文档上阅读了很多，但我找不到解决方案。

我已经尝试使用“ **Open Graph Debugger** ”（http://developers.facebook.com/tools/debug），一切似乎都正常，所以我不知道还能做什么。

有问题的 URL 是：[http](http://bit.ly/UctC7d) ://bit.ly/UctC7d FB 调试：[http ://bit.ly/RkQNLP](http://bit.ly/RkQNLP) *（为了隐私，我缩短了 URL）*

提前致谢！丹尼尔

# android - 如何将 xml 数据转换为用户定义对象的数组列表

> ID：13133474
> 
> 赞同：2
> 
> 时间：2012-10-30T05:59:48.607
> 
> 标签：android, arraylist, xml-parsing

样本类：

```
Class Circle
{
    String id;
    double radius;
    Center center;

    Center
    {
        int x;
        int y;
    }
} 
```

我想将信息存储在 xml 文件中，并在运行时从中读取并填充 Circle 对象的数组列表。我尝试查看 android 内置解析器，但我不知道它是如何工作的，也不确定哪个解析器最适合这个操作。

示例 XML

```
<Circles>
    <circle1>
        <id></id>
        <radius></radius>
        <center>
            <x></x>
            <y></y>
        </center> 
    </circle1>
    <circle2>
        <id></id>
        <radius></radius>
        <center>
            <x></x>
            <y></y>
        </center>
    </circle2> 
</Circles> 
```

由于我目前无法使用数据库，而且数据是永久性的，我认为 xml 将是一个不错的选择。我也对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:53:05.920

有很多数据绑定框架可以将您的 XML 转换为对象（但请选择一个使用 pull-parser 的框架）。值得注意的例子是： jackson ， xstream ant 2390000 其他。选择一个最适合您、内存占用量最低、外部依赖较少的纯 Java。

我建议以某种方式更改您的 XML 结构：

```
<Circles>
<circle>
    <id></id>
    <radius></radius>
    <center>
        <x></x>
        <y></y>
    </center> 
</circle>
<circle>
    <id></id>
    <radius></radius>
    <center>
        <x></x>
        <y></y>
    </center>
</circle> 
```

用作列表元素而不是对其编号 - 使数据绑定更容易

# asp.net - 选中的框值未保留在后面的代码中

> ID：13133477
> 
> 赞同：0
> 
> 时间：2012-10-30T06:00:23.893
> 
> 标签：asp.net

我有带有复选框列的gridview和一个在gridview之外选择所有复选框。I have used javascript to check all checkbox within the grid when Select all checkbox is checked. 我可以选中和取消选中gridview的所有复选框。但是，当我单击保存按钮时，网格中所有这些复选框的状态都是错误的，因此我无法保存数据。

我用过的代码：

```
<script type="text/javascript">
    function SelectAllCheckboxes(chk) {
        $('#<%=grvmembers.ClientID %>').find("input:checkbox").each(function () {
            if (this != chk) {
                this.checked = chk.checked;
            }

        });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:20:23.147

**详细信息：**听起来您还没有检查 IsPostBack

**解决方案：**添加到您的页面加载

```
protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
      // Your initial setup
   }
} 
```

# java - 无法从另一个 java 程序运行 java 程序

> ID：13133482
> 
> 赞同：0
> 
> 时间：2012-10-30T06:01:04.100
> 
> 标签：java

我正在尝试从另一个 java 程序（exec.java）运行一个 java 文件（editor.java）。它需要输入并显示文件未找到消息。请给我建议，通过它我成功运行程序。

```
 import java.io.*;
    public class exec {

    public static void main(String argv[]) {
    try {
    InputStreamReader isr=new InputStreamReader(System.in);
    BufferedReader br=new BufferedReader(isr);

    System.out.println("Enter the java class name");
    String s=br.readLine();
    String[] cmd = {"java", "-cp", "E:\netbeans\Project\src", s};
    Process pro=Runtime.getRuntime().exec(s);
    try (BufferedReader in = new BufferedReader(new InputStreamReader(pro.getInputStream()))) {
        String line=null;
        while((line=in.readLine())!=null) {
            System.out.println(line);
        }
        }
        } catch(Exception err) {
    err.printStackTrace();
   }
 }

java.io.IOException: Cannot run program "editor.java": CreateProcess error=2, The system   cannot find the file specified
at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
at java.lang.Runtime.exec(Runtime.java:615)
at java.lang.Runtime.exec(Runtime.java:448)
at java.lang.Runtime.exec(Runtime.java:345)
at project.exec.main(exec.java:18) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:05:05.363

您需要`.class file`在命令行参数中传递您的参数。您不会`.java`使用命令运行文件`java`。

只需`editor`作为参数传递，如果包含您的类`main method`是`editor.class`.

另外，请遵循以下`@Azodious's`答案。

此外，您可能需要将您`array`的路径更改为包含`class file`. `src`文件夹可能没有您的`class file`

因此，使用以下命令运行您的程序： - `java exec editor`。我认为这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:05:48.623

您没有将命令数组传递给`exec`方法

将其更改为以下内容：

```
Process pro=Runtime.getRuntime().exec(cmd); 
```

并且，您的错误表明您正在尝试运行 src 文件：

```
Cannot run program "editor.java" 
```

你应该通过`.class file name`运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:08:16.223

在**E:\netbeans\Project\src**你只找到源文件，源文件你无法运行，，，

尝试在***E:\netbeans\project\build\classes*中找到的类文件中执行**

```
String[] cmd = {"class", "-cp", "E:\netbeans\project\build\classes\", s}; 
```

**注意：检查您的课程路径**

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:10:41.823

多个问题 -

1.  您正在尝试从命令行运行命令“editor.java”。您的命令数组仍未使用。
2.  您编译的类是否与源代码位于同一目录中？通常，使用 Eclipse 会在`bin`文件夹中生成类。你应该这样做 -

    `String[] cmd = {"java", "-cp", "E:\netbeans\Project\bin", s};`
    `Process pro=Runtime.getRuntime().exec(s);`

3.  你`editor.java`在默认包中吗？如果不是，则需要在运行命令时输入完全限定名称。

我建议尝试从命令行运行该类，然后从 Java 代码中形成相同的命令。

# c# - C# - 根据用户输入创建垂直条形图

> ID：13133484
> 
> 赞同：1
> 
> 时间：2012-10-30T06:01:07.393
> 
> 标签：c#

所以我开始使用一个类，该类接受数据输入并将其存储在一个 int 中。然后我使用另一个公共 void 将该数据存储在一个数组中，我的思考过程是以某种方式找到最大值，以便我可以以垂直方式正确打印它。但是我是初学者，我对如何开始打印感到目瞪口呆。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
public class BarChart
{
   public int data1;
   public int data2;
   public int data3;
   public int data4;
   public int min;
   public int max;
   public void storeData()
   {
      int user1 = Convert.ToInt32(Console.ReadLine());
      int user2 = Convert.ToInt32(Console.ReadLine());
      int user3 = Convert.ToInt32(Console.ReadLine());
      int user4 = Convert.ToInt32(Console.ReadLine());
      data1 = user1;
      data2 = user2;
      data3 = user3;
      data4 = user4;
   }
   public void displayGraph()
   {
      int[] data = new int[3];
      data[0] = data1;
      data[1] = data2;
      data[3] = data3;
      data[4] = data4;
      for (int i = 0; i < data.Length; i++)
      {
         if (max < data[i])
            max = data[i];
      }
      for (int j = 0; j < data.Length; j++)
      {
         if (min < data[j])
            min = data[j];
      }

   }

} 
```

# php - 从magento管理面板查看订单时，如何将块文件（即.phtml文件）添加到magento中的sales.xml

> ID：13133486
> 
> 赞同：1
> 
> 时间：2012-10-30T06:01:08.823
> 
> 标签：php, magento

当从管理面板查看订单时，我想添加一个按钮。`magento`实际上我是通过在`app/design/adminhtml/default/default/sales/order/view/info.phtml`文件中硬编码完成的。查看订单时，添加的按钮会反映在管理员中。但是我们知道的是核心`magento`文件不能被修改。

所以我所做的是将按钮的 html 代码移动到另一个`mybutton.phtml`文件中，并且我想在标记`app/design/adminhtml/default/default/sales/order/view/info.phtml`中的`sales.xml`文件之前显示。`< adminhtml_sales_order_view >`我已经在`local.xml`（我自己的文件）文件中使用`< reference >`完成布局自定义的标签完成了此操作。但是在这样做之后我得到了一个警告

`foreach()` 为in提供的参数无效`app/code/core/Mage/Adminhtml/Block/Sales/Order/View/Info.phtml.`

请给我一个对我有很大帮助的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T07:01:52.757

raghav，需要覆盖法师方块 app/code/core/Mage/Adminhtml/Block/Sales/Order/View.php 在构造函数中加入如下代码

```
 $this->_addButton('order_reorder', array(
        'label'     => Mage::helper('sales')->__('My Button'),
        'onclick'   => 'setLocation(\'' . $this->getUrl('path/of/url') . '\')',
    )); 
```

# javascript - 通过查询url参数实现从html到aspx页面的url重定向

> ID：13133493
> 
> 赞同：0
> 
> 时间：2012-10-30T06:01:49.310
> 
> 标签：javascript, asp.net, html, url-redirection

这将是一个漫长的过程。

我有一个要求，我必须在我的旧网页中使用 url 重定向（基本上它是一个完整的静态 html 页面）。

我的要求是每次都重定向用户，从静态 html 页面到 .aspx 页面

即，如果发现我的早期页面位于

[http://web.vatsag.com/app/en/downloadsite.htm](http://web.vatsag.com/app/en/downloadsite.htm)

然后我必须重定向到以下页面（.aspx）

[http://web.vatsag.com/app/newdownloadsite.aspx](http://web.vatsag.com/app/newdownloadsite.aspx)

目前我在我的 html 页面中使用 javascript，

IE

```
window.location="http://web.vatsag.com/app/newdownloadsite.aspx" 
```

**我的downloadsite.htm**页面的**head**部分中的脚本

 **现在问题来了

如何查询多个 URL 参数？

即当 URL 请求类似于

```
http://web.vatsag.com/app/en/downloadsite.htm?lang=de&vers=1.10 
```

我应该被重定向到具有相同 URL 参数的 aspx 页面。

```
http://web.vatsag.com/app/newdownloadsite.aspx?lang=de&vers=1.10 
```

我有一个 javascript 片段，它返回我的 url 参数

```
function getQueryStringArray(){
    var assoc=[]; 
    var items = window.location.search.substring(1).split('&'); 
    for(var j = 0; j < items.length; j++) { 
       var a = items[j].split('='); assoc[a[0]] = a[1]; 
    }
    return assoc;
} 
```

如何使用此代码段获取所有 URL 参数以最终重定向到 ASPX 网页？

非常感谢您的帮助

增值税

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:27:09.933

我认为这段代码会给你你所追求的网址

```
// Original URL
var url = window.location.href; 
var newUrl = "";

// Split the String to get the Query strings
var splitString = url.split('?');

if (splitString.length > 1)
{
   // New Url With Query strings
   newUrl = "http://web.vatsag.com/app/newdownloadsite.aspx" + "?" + splitString[1];
}
else
{
   // New Url With NO query string
   newUrl = "http://web.vatsag.com/app/newdownloadsite.aspx"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:33:02.820

您可以通过在旧页面上使用简单的元标记轻松完成您的任务，该标记可以重定向到您的新页面。

将以下行添加到旧静态 html 页面的 head 部分：

```
<meta http-equiv="Refresh" content="0;URL=new_page_url" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:32:53.767

window.location 不是一个字符串，它是一个结构/类。它有自己的成员变量。当您分配时，`location="something"`您分配给 href 成员。您可以查看它的其他成员。

另外，另一方面：`http://web.vatsag.com/app/newdownloadsite.aspx`不建议指定整个地址。相反，使用`../newdownloadsite.aspx`. 如果您将来重新定位您的网站，这将有所帮助。

要回答您的问题，请尝试：

```
 location=location.pathname.replace(/en\/downloadsite.htm$/,"newdownloadsite.aspx") + location.search + location.hash;
  //Host name, protocol, port number is taken from current one. (Making it more portable)
  //By using pathname.replace, you ensure that if the directory path depth of the original html page on server is changed, still it would be portable. 
```

顺便说一句，MVCKarl 的回答 - `.split("?")[1]`- 也应该代替`location.search + location.hash`.**

# android - 如何从 url 下载 android 中的 mp3 文件并将其保存在 SD 卡中？这是我正在使用的代码

> ID：13133498
> 
> 赞同：3
> 
> 时间：2012-10-30T06:02:14.970
> 
> 标签：android

```
public void DownloadFromUrl(String imageURL, String fileName) {  
  //this is the downloader method
  try {
       URL url = new URL("http://picosong.com/wvaV");
       File file = new File(fileName);

       long startTime = System.currentTimeMillis();
       Log.d("ImageManager", "download begining");
                    Log.d("ImageManager", "download url:" + url);
                    Log.d("ImageManager", "downloaded file name:" + fileName);
                    /* Open a connection to that URL. */
                    URLConnection ucon = url.openConnection();

                    /*
                     * Define InputStreams to read from the URLConnection.
                     */
                    InputStream is = ucon.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is);

                    /*
                     * Read bytes to the Buffer until there is nothing more to read(-1).
                     */
                    ByteArrayBuffer baf = new ByteArrayBuffer(50);
                    int current = 0;
                    while ((current = bis.read()) != -1) {
                            baf.append((byte) current);
                    }

                    /* Convert the Bytes read to a String. */
                    FileOutputStream fos = new FileOutputStream(file);
                    fos.write(baf.toByteArray());
                    fos.close();
                    Log.d("ImageManager", "download ready in"
                                    + ((System.currentTimeMillis() - startTime) / 1000)
                                    + " sec");

            } catch (IOException e) {
                    Log.d("ImageManager", "Error: " + e);
            } 
    }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T06:43:13.123

试试下面的代码下载文件。

```
private void startDownload() {
    String url = "http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg";
    new DownloadFileAsync().execute(url);
}

class DownloadFileAsync extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_PROGRESS);
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;
        try {
            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();
            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/some_photo_from_gdansk_poland.jpg");
            byte data[] = new byte[1024];
            long total = 0;
            while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {}
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        Log.d("ANDRO_ASYNC",progress[0]);
        mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(String unused) {
        dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
    }
} 
```

有关更多信息，请参见下面的链接。

[下载文件](http://www.java-samples.com/showtutorial.php?tutorialid=1521)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T06:25:33.180

试试这个代码

```
try{

File cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"Folder Name");
if(!cacheDir.exists())
   cacheDir.mkdirs();

File f=new File(cacheDir,songname+".mp3");
URL url = new URL(yoururl); 

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(f);

            byte data[] = new byte[1024];
            long total = 0;
            int count=0;
            while ((count = input.read(data)) != -1) {
                total++;
                Log.e("while","A"+total);

                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
}
Catch(Exception e){e.printStackTrace();} 
```

# svg - 生成实时折线图的问题

> ID：13133499
> 
> 赞同：0
> 
> 时间：2012-10-30T06:02:16.930
> 
> 标签：svg, d3.js

我正在尝试使用教程生成实时折线图

[http://www.janwillemtulp.com/2011/04/01/tutorial-line-chart-in-d3/](http://www.janwillemtulp.com/2011/04/01/tutorial-line-chart-in-d3/) & [http://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

第一条路径很好，我得到了一个 svg 折线图。现在当我做

data.push(随机());

// 从前面弹出旧数据点 data.shift();

// 过渡线 path.transition().attr("d", line);

它不起作用可能是什么原因。整个代码是

```
 var data = [1, 2, 3, 4, 3, 4, 5, 8, 2, 3, 4, 1];
        var w = 400,
        h = 200,
        margin = 20,
        y = d3.scale.linear().domain([0, d3.max(data)]).range([0 + margin, h - margin]),
        x = d3.scale.linear().domain([0, data.length]).range([0 + margin, w - margin])  

        var vis = d3.select("body")
        .append("svg:svg")
        .attr("width", w)
        .attr("height", h)

        var g = vis.append("svg:g")
                .attr("transform", "translate(0, 200)");    

        var line = d3.svg.line()
            .x(function(d,i) { return x(i); })
            .y(function(d) { return -1 * y(d); })       

        g.append("svg:path").attr("d", line(data));

        g.append("svg:line")
                .attr("x1", x(0))
                .attr("y1", -1 * y(0))
                .attr("x2", x(w))
                .attr("y2", -1 * y(0))

        g.append("svg:line")
                .attr("x1", x(0))
                .attr("y1", -1 * y(0))
                .attr("x2", x(0))
                .attr("y2", -1 * y(d3.max(data)))

        g.selectAll(".xLabel")
        .data(x.ticks(5))
        .enter().append("svg:text")
        .attr("class", "xLabel")
        .text(String)
        .attr("x", function(d) { return x(d) })
        .attr("y", 0)
        .attr("text-anchor", "middle")

        g.selectAll(".yLabel")
                .data(y.ticks(4))
                .enter().append("svg:text")
                .attr("class", "yLabel")
                .text(String)
                .attr("x", 0)
                .attr("y", function(d) { return -1 * y(d) })
                .attr("text-anchor", "right")
                .attr("dy", 4)

        g.selectAll(".xTicks")
        .data(x.ticks(5))
        .enter().append("svg:line")
        .attr("class", "xTicks")
        .attr("x1", function(d) { return x(d); })
        .attr("y1", -1 * y(0))
        .attr("x2", function(d) { return x(d); })
        .attr("y2", -1 * y(-0.3))

        g.selectAll(".yTicks")
                .data(y.ticks(4))
                .enter().append("svg:line")
                .attr("class", "yTicks")
                .attr("y1", function(d) { return -1 * y(d); })
                .attr("x1", x(-0.3))
                .attr("y2", function(d) { return -1 * y(d); })
                .attr("x2", x(0))

        setInterval(function() {
            data.push(10);
            data.shift();
            g.attr("d", line)
                .attr("transform", null)
                  .transition()
                    .ease("linear")
                    .attr("transform", "translate(" + x(-1) + ")");
            alert('yaho1');
        }, 2000);
    }); 
```

用这个新代码更新代码后

```
var data = [1, 2, 3, 4, 3, 4, 5, 8, 2, 3, 4, 10];
            var w = 400,
            h = 200,
            margin = 20,
            y = d3.scale.linear().domain([0, 10]).range([0 + margin, h - margin]),
            x = d3.scale.linear().domain([0, data.length]).range([0 + margin, w - margin])  

            var vis = d3.select("body")
            .append("svg:svg")
            .attr("width", w)
            .attr("height", h)

            var g = vis.append("svg:g")
                    .attr("transform", "translate(0, 200)");    

            var line = d3.svg.line()
                .x(function(d,i) { return x(i); })
                .y(function(d) { return -1 * y(d); })       

            g.append("svg:path").attr("d", line(data));

            g.append("svg:line")
                    .attr("x1", x(0))
                    .attr("y1", -1 * y(0))
                    .attr("x2", x(w))
                    .attr("y2", -1 * y(0))

            g.append("svg:line")
                    .attr("x1", x(0))
                    .attr("y1", -1 * y(0))
                    .attr("x2", x(0))
                    .attr("y2", -1 * y(d3.max(data)))

            g.selectAll(".xLabel")
            .data(x.ticks(5))
            .enter().append("svg:text")
            .attr("class", "xLabel")
            .text(String)
            .attr("x", function(d) { return x(d) })
            .attr("y", 0)
            .attr("text-anchor", "middle")

            g.selectAll(".yLabel")
                    .data(y.ticks(4))
                    .enter().append("svg:text")
                    .attr("class", "yLabel")
                    .text(String)
                    .attr("x", 0)
                    .attr("y", function(d) { return -1 * y(d) })
                    .attr("text-anchor", "right")
                    .attr("dy", 4)

            g.selectAll(".xTicks")
            .data(x.ticks(5))
            .enter().append("svg:line")
            .attr("class", "xTicks")
            .attr("x1", function(d) { return x(d); })
            .attr("y1", -1 * y(0))
            .attr("x2", function(d) { return x(d); })
            .attr("y2", -1 * y(-0.3))

            g.selectAll(".yTicks")
                    .data(y.ticks(4))
                    .enter().append("svg:line")
                    .attr("class", "yTicks")
                    .attr("y1", function(d) { return -1 * y(d); })
                    .attr("x1", x(-0.3))
                    .attr("y2", function(d) { return -1 * y(d); })
                    .attr("x2", x(0))

            setInterval(function() {
                    var number = Math.round(Math.random()*10) + 1;
                    data.push(number);
                    data.shift();
                    g.selectAll("path")
                    .attr("d", line(data))  // <-- line(data) instead of data
                    .attr("transform", null)
                        .transition()
                            .ease("linear")
                            .attr("transform", "translate(" + x(-1) + ")");
            },
            200); 
```

我得到的行为几乎与我想要的相似。但是，我有一些问题

![在此处输入图像描述](../Images/cf5e2caa4cab2119b612ca5100eb9854.png)

正如您所看到的，当我随机生成一个新数据并将其推送并弹出最前面的数据时。我绘制图形，这条线穿过左侧的 y 轴边界。代码出了什么问题？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:47:42.393

您的区间分配有误`.attr("d", ___ )`。您需要指定 d3 行函数可以处理的一些数据。

尝试这个：

```
setInterval(function() {
    data.push(10);
    data.shift();
    g.selectAll("path")
    .attr("d", line(data))  // <-- line(data) instead of data
    .attr("transform", null)
      .transition()
        .ease("linear")
        .attr("transform", "translate(" + x(-1) + ")");
},
2000); 
```

我刚刚用这个修复尝试了你的代码并且它有效。

# r - 回声状态网络？

> ID：13133500
> 
> 赞同：6
> 
> 时间：2012-10-30T06:02:21.953
> 
> 标签：r, neural-network, time-series

我最近从几个人那里听说，回声状态网络非常适合时间序列建模。所以我觉得值得一试。

[http://en.wikipedia.org/wiki/Echo_state_network](http://en.wikipedia.org/wiki/Echo_state_network)

这是一种循环网络，其中仅学习输出层中的权重，而其他权重是随机的。

他们在 R 中的库/包在多大程度上可用于创建回声状态网络？

（注意：有这个问题：[R 中的神经网络包](https://stackoverflow.com/questions/9521752/neural-net-package-in-r)，这可能是相关的，但它要求“递归”网络，而我正在寻找“循环”或“回声状态”网络）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T12:09:44.420

我知道这个问题很老，但这可能仍然有用，也许对其他人有用。

在这里，您可以找到[R 中简约 Echo State Network 的工作演示源代码](http://minds.jacobs-university.de/mantas/code "这里")。它不是一个成熟的库，但我希望它易于理解并适应您的应用程序。

```
# A minimalistic Echo State Networks demo with Mackey-Glass (delay 17) data 
# in "plain" R.
# by Mantas Lukosevicius 2012
# http://minds.jacobs-university.de/mantas

# load the data
trainLen = 2000
testLen = 2000
initLen = 100

data = as.matrix(read.table('MackeyGlass_t17.txt'))

# plot some of it
while( dev.cur() != 1 ) dev.off() # close all previous plots
dev.new()
plot(data[1:1000],type='l')
title(main='A sample of data')

# generate the ESN reservoir
inSize = outSize = 1
resSize = 1000
a = 0.3 # leaking rate

set.seed(42)
Win = matrix(runif(resSize*(1+inSize),-0.5,0.5),resSize)
W = matrix(runif(resSize*resSize,-0.5,0.5),resSize)
# Option 1 - direct scaling (quick&dirty, reservoir-specific):
#W = W * 0.135 
# Option 2 - normalizing and setting spectral radius (correct, slow):
cat('Computing spectral radius...')
rhoW = abs(eigen(W,only.values=TRUE)$values[1])
print('done.')
W = W * 1.25 / rhoW

# allocated memory for the design (collected states) matrix
X = matrix(0,1+inSize+resSize,trainLen-initLen)
# set the corresponding target matrix directly
Yt = matrix(data[(initLen+2):(trainLen+1)],1)

# run the reservoir with the data and collect X
x = rep(0,resSize)
for (t in 1:trainLen){
    u = data[t]
    x = (1-a)*x + a*tanh( Win %*% rbind(1,u) + W %*% x )
    if (t > initLen)
        X[,t-initLen] = rbind(1,u,x)
}

# train the output
reg = 1e-8  # regularization coefficient
X_T = t(X)
Wout = Yt %*% X_T %*% solve( X %*% X_T + reg*diag(1+inSize+resSize) )

# run the trained ESN in a generative mode. no need to initialize here, 
# because x is initialized with training data and we continue from there.
Y = matrix(0,outSize,testLen)
u = data[trainLen+1]
for (t in 1:testLen){
    x = (1-a)*x + a*tanh( Win %*% rbind(1,u) + W %*% x )
    y = Wout %*% rbind(1,u,x)
    Y[,t] = y
    # generative mode:
    u = y
    ## this would be a predictive mode:
    #u = data[trainLen+t+1] 
}

# compute MSE for the first errorLen time steps
errorLen = 500
mse = ( sum( (data[(trainLen+2):(trainLen+errorLen+1)] - Y[1,1:errorLen])^2 )
    / errorLen )
print( paste( 'MSE = ', mse ) )

# plot some signals
dev.new() 
plot( data[(trainLen+1):(trainLen+testLen+1)], type='l', col='green' )
lines( c(Y), col='blue' )
title(main=expression(paste('Target and generated signals ', bold(y)(italic(n)), 
    ' starting at ', italic(n)==0 )))
legend('bottomleft',legend=c('Target signal', 'Free-running predicted signal'), 
    col=c('green','blue'), lty=1, bty='n' )

dev.new()
matplot( t(X[(1:20),(1:200)]), type='l' )
title(main=expression(paste('Some reservoir activations ', bold(x)(italic(n)))))

dev.new()
barplot( Wout )
title(main=expression(paste('Output weights ', bold(W)^{out}))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:25:03.923

诚然这不能回答您关于 R 的问题，我几乎可以肯定您可以自己轻松地实现 ESN（除非您需要更高级/深奥的功能）。

看看[Jaeger 对 ESN 的定义](http://www.scholarpedia.org/article/Echo_State_Network)：您只需要方程 (1) 和 (2) 用于内部状态和输出，加上方程 (3) 或 (4) 用于学习。实现非常简单，只需要矩阵乘法、范数和伪逆就可以了。

PS 实际上“递归”和“递归”神经网络并不是很不同的东西。术语“递归”通常（但并非总是）指处理图的那些神经网络，而“递归”网络处理序列/时间序列（这是图的一种特殊情况）。“递归”和“递归”网络在其隐藏层中都有循环，因此它们的内部状态是*递归*定义的。语言混乱的一部分，关键是您可以尝试使用现有的库并根据您的需要调整它们。

# wcf-client - wcf 示例项目

> ID：13133502
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:02:29.537
> 
> 标签：wcf-client

我需要一个 wcf 示例项目来监视数据库的一个表，并为记录中的每个更改获取记录，并向客户发送通知。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:14:40.287

一些 WCF 示例 [http://www.codeproject.com/Articles/154870/WCF-Service-Library-A-Good-Approach-for-WCF-Servic](http://www.codeproject.com/Articles/154870/WCF-Service-Library-A-Good-Approach-for-WCF-Servic) http://www.codeproject.com/Articles/16765/WCF- Windows-通信-基础-示例

但是，对于您的其他 2 个要求，您需要为相同的逻辑

# c# - 使用 modalpopup 时，ajax 日历和自动完成扩展器不起作用

> ID：13133514
> 
> 赞同：1
> 
> 时间：2012-10-30T06:03:15.433
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, autocompleteextender

我创建的面板存在一个表单来使用表单视图添加详细信息，我有一个按钮可以打开该表单视图上方的弹出窗口。在我的表单中，我使用了 ajax 日历，自动完成扩展器用于 formview 中的文本框。我使用列表方法在 .cs 代码而不是 Web 服务中自动完成扩展程序以从数据库中获取值。它工作正常，但问题是当我打开主面板然后日历时，自动完成扩展器不起作用，但是当我在该面板中打开弹出窗口并关闭该弹出日历和自动完成扩展器时工作正常。我希望它在我使主面板可见时工作，在我的情况下怎么可能？请帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:27:02.900

您需要正确设置目标控件 ID，如果有任何问题，请再次添加引用，您的问题将得到解决。

# mysql - 语法错误或访问冲突：1059 标识符名称太长

> ID：13133517
> 
> 赞同：28
> 
> 时间：2012-10-30T06:03:26.410
> 
> 标签：mysql

创建表时收到 MySQL 错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1059 Identifier name 'FK_SALES_FLAT_CREDITMEMO_GRID_ARCHIVE_STORE_ID_CORE_STORE_STORE_ID' is too long 
```

如何增加默认标识符名称大小，或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-30T06:06:03.090

请查看[http://dev.mysql.com/doc/refman/5.5/en/identifiers.html](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html) - 标识符的长度限制为 64 个字符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-07-27T08:02:10.070

提供您自己的镜头名称作为关键点。

```
$table->unique(['product_id', 'company_id', 'price', 'delivery_hours'], 'prices_history_index_unique'); 
```

# java - 保持活动状态如何工作httpurlconnection java

> ID：13133520
> 
> 赞同：2
> 
> 时间：2012-10-30T06:03:37.760
> 
> 标签：java, http, networking

设置连接标头以保持活动状态有什么作用。我注意到，将其设置为关闭使连接比保持活动更快。读取给定站点上的 html 内容时，平均需要 150 毫秒。为什么？为什么浏览器通常会发送保持活动的标头？

# php - 我们如何在本地机器上运行 magento cron.php？

> ID：13133521
> 
> 赞同：0
> 
> 时间：2012-10-30T06:03:41.787
> 
> 标签：php, magento

让我知道任何人有关于一次运行本地 magento cron.php 的好主意。我像 localhost/test2/cron.php 一样运行 cron。但一次需要10条记录。有人知道一次运行所有库存更新吗？

# android - 以编程方式在android中的选项卡布局

> ID：13133523
> 
> 赞同：1
> 
> 时间：2012-10-30T06:04:03.603
> 
> 标签：android

我需要使用选项卡布局，在其中我尝试以编程方式访问 2 个选项卡中的两个活动类。我试过但在运行时出错。请参阅下面的代码，测试活动

```
public class TestActivity extends TabActivity {
    protected static final View View = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        

        Resources ressources = getResources(); 
        TabHost tabHost = getTabHost(); 
        // Android tab
                Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
                TabSpec tabSpecAndroid = tabHost
                  .newTabSpec("Android")

                  .setContent(intentAndroid);

                tabHost.addTab(tabSpecAndroid); 
        setContentView(tabHost);

    }
} 
```

Android 活动（需要在名称中按 Tab 键顺序显示的活动`andriod`）

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class AndroidActivity extends Activity 
{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView textview = new TextView(this);
        textview.setText("This is Android tab");
        setContentView(textview);
    }
} 
```

我不知道它有什么问题。请以`TabLayout`编程方式提供简单的示例（不使用任何 xml 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:09:09.980

> **创建一个父类以按 Tab 顺序显示所有其他类**

```
import android.app.TabActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.TabHost.TabSpec;
import android.content.Intent;
import android.content.res.Resources;
import android.widget.TabHost;

public class TestActivity extends TabActivity {
protected static final View View = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        

    Resources ressources = getResources(); 
    TabHost tabHost = getTabHost(); 
    // Android tab
            Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
            TabSpec tabSpecAndroid = tabHost
              .newTabSpec("Android")
              //add .png type images in res folder hdpi,ldpi,mdpi,xhdpi
tabSpecAndroid.setIndicator("",getResources().getDrawable(R.drawable.arrival));//arrival is the name of png image, delete this line if u hav no images
              .setContent(intentAndroid);
            tabSpecAndroid.setIndicator("Android");
            tabHost.addTab(tabSpecAndroid);     

    //Welcome tab
            Intent intentBus = new Intent().setClass(this, Welcome.class);
            TabSpec tabSpecBus = tabHost
                    .newTabSpec("Welcome")
                    .setContent(intentBus);
            tabSpecBus.setIndicator("Welcome");
            tabHost.addTab(tabSpecBus);     
}
} 
```

> **创建我们要在其中按 Tab 键顺序显示的第一个子类**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class AndroidActivity extends Activity 
{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    TextView textview = new TextView(this);
    textview.setText("This is Android tab");
    setContentView(textview);
}
} 
```

> **创建第二个子类，我们希望在其中按 Tab 键顺序显示**

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
public class Welcome extends Activity
{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    TextView textview = new TextView(this);
    textview.setText("This is Welcome tab");
    setContentView(textview);
}
} 
```

> **在 android manifest.cml 添加所有子类**

```
<activity android:name=".AndroidActivity"     android:theme="@android:style/Theme.Black.NoTitleBar"></activity>
    <activity android:name=".Welcome" android:theme="@android:style/Theme.Black.NoTitleBar"></activity>
</application> 
```

> 现在运行代码，就是这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:31:58.910

A`TabActivity`可能已经包含了内容。试着不要打电话`setContentView()`，看看是否能解决你的问题。

# c# - C#中的HexBinaryAdapter？

> ID：13133524
> 
> 赞同：0
> 
> 时间：2012-10-30T06:04:05.787
> 
> 标签：c#, java, hex, unmarshalling, transplant

我想使用 C# 来实现用 Java 编写的编码功能，但它有一些我以前从未见过的代码。

```
HexBinaryAdapter().unmarshal("publicKey"); 
```

C#中是否有任何类似的API或方法，或者我也需要实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:02:27.060

看看[SoapHexBinary](http://msdn.microsoft.com/en-us/library/w53728x4%28v=vs.80%29.aspx)。

```
SoapHexBinary hexBinary = SoapHexBinary.Parse("publicKey"); 
```

# lightbox - Sphinx 有灯箱扩展吗？

> ID：13133526
> 
> 赞同：3
> 
> 时间：2012-10-30T06:04:18.507
> 
> 标签：lightbox, python-sphinx

我在 Sphinx 中有一个静态站点和大量插图。有没有一种简单的方法来集成灯箱并自动生成缩略图？

```
 .. image:: picture.jpeg
    :lightbox: true
    :width: 200 px
    :alt: alternate text
    :align: right 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-05T23:45:12.247

将`sphinxcontrib-images`扩展名添加到您的 conf.py 文件中：

```
extensions = [
      …
      'sphinxcontrib.images',
      …
] 
```

然后使用此设置告诉扩展程序将灯箱添加到标准`.. image::`呼叫：

```
images_config = {
    'override_image_directive': True,
} 
```

或使用缩略图选项`.. thumbnail:: picture.png`

请务必先安装扩展程序：`pip install sphinxcontrib-images`

[有关更多信息，请参阅https://github.com/spinus/sphinxcontrib-images](https://github.com/spinus/sphinxcontrib-images)上的 sphinxcontrib-images 主页

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:15:52.987

我做了一个肮脏的黑客解决方案并将其粘贴在这里，因为我不确定我是否想要/有时间来维护它。它扩展`Figure`类（在下面添加文本）并滥用`download_reference`节点。它还以未记录的方式覆盖`app.add_node`方法（伯金菲尔德应该命名的`set_node`）

它会生成一个缩略图并让 Sphinx 将原始图像放入下载中。

您仍然需要在模板中添加 jQuery 和[FancyBox](http://fancyapps.com)。

享受

[http://pastebin.com/pMhKnTkv](http://pastebin.com/pMhKnTkv)

用法：

```
.. fancyimage:: img/exit_jam.jpg
    :fitwidth: 100
    :fitheight: 100
    :alt: cool
    :rel: tst 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:48:01.693

我不知道，尽管它可能是创建新扩展的好选择。

此外，您可以通过修改模板以包含您最喜欢的 javascript lightbox-y 图像查看器来做类似的事情，尽管这不会处理生成缩略图。

# android - 如何从android中仅接收电话号码中获取Countrycode值？

> ID：13133527
> 
> 赞同：2
> 
> 时间：2012-10-30T06:04:23.923
> 
> 标签：android

当我通过号码（+972573481112”）和国家代码（“IL”）时，我得到国家代码值 972 但我只想传递号码并获得任何国家代码值。

我不想通过“IL”。而且我只想为手机接听电话而这样做。有没有可能？如果可能的话，请尽快回复，谢谢。

```
String number = "+972579481112";
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
try {
   PhoneNumber pNumber = phoneUtil.parse(number, "IL");
        Log.v("Number ",pNumber.getCountryCode());
} catch (NumberParseException e) {
    e.printStackTrace();
} 
```

我收到的电话如下：+972579481112

972579481112

+0579481112

0579481112

这是我的带有核心 java 文件的代码并添加 libphonenumber jar

公共课你好{

```
static String[] countrycode = { "AF", "AL", "DZ", "AD", "AO", "AQ", "AR",
        "AM", "AW", "AU", "AT", "AZ", "BH", "BD", "BY", "BE", "BZ", "BJ",
        "BT", "BO", "BA", "BW", "BR", "BN", "BG", "BF", "MM", "BI", "KH",
        "CM", "CA", "CV", "CF", "TD", "CL", "CN", "CX", "CC", "CO", "KM",
        "CG", "CD", "CK", "CR", "HR", "CU", "CY", "CZ", "DK", "DJ", "TL",
        "EC", "EG", "SV", "GQ", "ER", "EE", "ET", "FK", "FO", "FJ", "FI",
        "FR", "PF", "GA", "GM", "GE", "DE", "GH", "GI", "GR", "GL", "GT",
        "GN", "GW", "GY", "HT", "HN", "HK", "HU", "IN", "ID", "IR", "IQ",
        "IE", "IM", "IL", "IT", "CI", "JP", "JO", "KZ", "KE", "KI", "KW",
        "KG", "LA", "LV", "LB", "LS", "LR", "LY", "LI", "LT", "LU", "MO",
        "MK", "MG", "MW", "MY", "MV", "ML", "MT", "MH", "MR", "MU", "YT",
        "MX", "FM", "MD", "MC", "MN", "ME", "MA", "MZ", "NA", "NR", "NP",
        "NL", "AN", "NC", "NZ", "NI", "NE", "NG", "NU", "KP", "NO", "OM",
        "PK", "PW", "PA", "PG", "PY", "PE", "PH", "PN", "PL", "PT", "PR",
        "QA", "RO", "RU", "RW", "BL", "WS", "SM", "ST", "SA", "SN", "RS",
        "SC", "SL", "SG", "SK", "SI", "SB", "SO", "ZA", "KR", "ES", "LK",
        "SH", "PM", "SD", "SR", "SZ", "SE", "CH", "SY", "TW", "TJ", "TZ",
        "TH", "TG", "TK", "TO", "TN", "TR", "TM", "TV", "AE", "UG", "GB",
        "UA", "UY", "US", "UZ", "VU", "VA", "VE", "VN", "WF", "YE", "ZM",
        "ZW" };
static String[] countryval = { "93", "355", "213", "376", "244", "672",
        "54", "374", "297", "61", "43", "994", "973", "880", "375", "32",
        "501", "229", "975", "591", "387", "267", "55", "673", "359",
        "226", "95", "257", "855", "237", "1", "238", "236", "235", "56",
        "86", "61", "61", "57", "269", "242", "243", "682", "506", "385",
        "53", "357", "420", "45", "253", "670", "593", "20", "503", "240",
        "291", "372", "251", "500", "298", "679", "358", "33", "689",
        "241", "220", "995", "49", "233", "350", "30", "299", "502", "224",
        "245", "592", "509", "504", "852", "36", "91", "62", "98", "964",
        "353", "44", "972", "39", "225", "81", "962", "7", "254", "686",
        "965", "996", "856", "371", "961", "266", "231", "218", "423",
        "370", "352", "853", "389", "261", "265", "60", "960", "223",
        "356", "692", "222", "230", "262", "52", "691", "373", "377",
        "976", "382", "212", "258", "264", "674", "977", "31", "599",
        "687", "64", "505", "227", "234", "683", "850", "47", "968", "92",
        "680", "507", "675", "595", "51", "63", "870", "48", "351", "1",
        "974", "40", "7", "250", "590", "685", "378", "239", "966", "221",
        "381", "248", "232", "65", "421", "386", "677", "252", "27", "82",
        "34", "94", "290", "508", "249", "597", "268", "46", "41", "963",
        "886", "992", "255", "66", "228", "690", "676", "216", "90", "993",
        "688", "971", "256", "44", "380", "598", "1", "998", "678", "39",
        "58", "84", "681", "967", "260", "263", };

public static void main(String[] args) {
    String numbe = "9408135563";
    for (int i = 0; i < countrycode.length; i++) {
        if (numbe.startsWith("+"+countryval[i])) {
            System.out.println(countrycode[i]);
            PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
            try {
                PhoneNumber pNumber = phoneUtil.parse(numbe, countrycode[i]);
                System.out.println("code  "+pNumber.getCountryCode()+"Number "+pNumber.getNationalNumber());
            } catch (NumberParseException e) {
                e.printStackTrace();
            }
        }else if(numbe.startsWith(countryval[i])){
            System.out.println(countrycode[i]);
            PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
            try {
                PhoneNumber pNumber = phoneUtil.parse(numbe, countrycode[i]);
                System.out.println("code  "+pNumber.getCountryCode()+"Number "+pNumber.getNationalNumber());
            } catch (NumberParseException e) {
                e.printStackTrace();
            }
        }else if(numbe.startsWith("0")){
            System.out.println("code  "+numbe.substring(0,1)+"Number "+numbe.substring(1));
        }else if(numbe.startsWith("+0")){
            System.out.println("code  "+numbe.substring(0,2)+"Number "+numbe.substring(2));
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:10:15.197

我知道的唯一方法是您需要随身携带国家/地区代码列表，并使用收到的电话号码检查代码，即：

```
phoneNumber.startsWith(countryCode); 
```

**编辑：**

如果确认电话号码中的位数，您可以采用另一种方法。我的意思是说，如果您知道电话号码将始终包含 10 位数的手机号码，那么您始终可以通过从索引 0 到（电话号码的长度 - 10）的电话号码中获取子字符串来获取国家/地区代码。

# matlab - 我无法弄清楚如何在 matlab 中进行矩阵乘法

> ID：13133529
> 
> 赞同：0
> 
> 时间：2012-10-30T06:04:33.150
> 
> 标签：matlab, matrix, matrix-multiplication

我必须执行以下操作

R=[0,0.5,-0.25;-0.25,0,0.25;0,0,0.25];

B=[0,k21,k31;k12,0,k32;0,0,k];

G=inv(R).*B;

g=det(G);

但 Matlab 显示以下错误

？？？使用 ==> horzcat 时出错

CAT 参数维度不一致。

==> g 在 60 B=[0,k21,k31;k12,0,k32;0,0,k];

K21、K31、K12、K32 和 k 的尺寸都是 923334 乘以 1。谁能帮我如何进行以下操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:15:57.840

你的代码很适合我。检查 k 值 (k12,k31,k32...) 是否为标量（或 1x1 维度）

**编辑 ：**

对于您提到的情况，k 是 nx1，一种简单的方法是执行循环：

```
R=[0,0.5,-0.25;-0.25,0,0.25;0,0,0.25];

for ii=1:length(k)
     B=[0,k21(ii),k31(ii);k12(ii),0,k32(ii);0,0,k(ii)];
     G=inv(R).*B;
     g(ii)=det(G);
end 
```

还有一种“矢量化”的方式可以做到这一点，但它似乎已经足够好了......

# symfony - Symfony 2 Crawler 表单提交显示错误“LogicException：无法在“输入”标签上提交。”

> ID：13133534
> 
> 赞同：0
> 
> 时间：2012-10-30T06:05:01.447
> 
> 标签：symfony, phpunit, functional-testing

比方说，我有一个表格：

```
<form action="test.php" method="post">
    <input type="text" name="myinput" value="3" />
    <button>Submit</button>
</form> 
```

这是我使用 Crawler 进行的过滤和测试：

```
$client = static::createClient();
$crawler = $client->request('GET', 'test.php');

$filter = 'button';
$buttonNode = $crawler->selectButton($crawler->filter($filter));
$this->assertEquals(1, $buttonNode->count()); // this works

$form = $buttonNode->form(); // This shows error "LogicException: Unable to submit on a "input" tag."
$client->submit($form); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T08:41:38.037

我认为问题出在按钮的定义上。我将重命名它只是为了更好地理解并在那里添加类型：

`<button type="submit">SubmitLabel</button>`

那么我认为它应该像这样工作：

```
$client = static::createClient();
$crawler = $client->request('GET', 'test.php');

$buttonCrawlerNode = $crawler->selectButton('SubmitLabel');      
$form = $buttonCrawlerNode->form();
$client->submit($form); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T09:13:31.457

你需要找到像我的[问题](https://stackoverflow.com/questions/16935683/how-to-add-xml-content-to-form-in-symfony)这样的方法。

或者它只是一个测试，你可以使用[casperJS的测试并不多](http://casperjs.org/)

# c# - 使用 vb.net 2010 (wpf c#) 在访问数据库中保存复选框值

> ID：13133537
> 
> 赞同：0
> 
> 时间：2012-10-30T06:05:13.133
> 
> 标签：c#, wpf, ado.net

伙计，我如何在访问数据库或任何数据库中插入复选框的值。

我尝试了任何这个 sql 语句，但它仍然给我错误：**OleDbException 未处理。条件表达式中的数据类型不匹配。**它指向 myData = myCommand.ExecuteReader();

请注意，allowviewpsr 是 ms 访问数据库中的布尔类型字段或带有 YES/NO 的字段。:) chkviewpsr 是 mycheckbox

```
SQL = "UPDATE `RUsers` SET `allowviewpsr` = '" + chkviewpsr.IsChecked.Value + "' WHERE `idnum`= '" + txtblkuserid.Text  + "' AND `fullname`= '" + txtblkusername.Text + "'"; 
```

还有这个：

```
SQL = "UPDATE `RUsers` SET `allowviewpsr` = '" + chkviewpsr.IsChecked + "' WHERE `idnum`= '" + txtblkuserid.Text  + "' AND `fullname`= '" + txtblkusername.Text + "'"; 
```

还有这个：

```
SQL = "UPDATE `RUsers` SET `allowviewpsr` = '" + chkviewpsr + "' WHERE `idnum`= '" + txtblkuserid.Text  + "' AND `fullname`= '" + txtblkusername.Text + "'"; 
```

这是我的连接器：

```
myCommand.CommandText = SQL;
myCommand.Connection = MyNewOleDbConnection;
myAdapter.SelectCommand = myCommand;
myData = myCommand.ExecuteReader(); 
```

**已编辑：** 嗨 anandkumar 感谢快速重播我尝试了 NonQuery 但它给出了与上面相同的错误

```
SQL = "UPDATE `RWMUsers` SET `allowviewpsr` = '" + chkviewpsr.IsChecked.Value + "' WHERE `idnum`= '" + txtblkuserid.Text  + "' AND `fullname`= '" + txtblkusername.Text + "'";
myCommand.CommandText = SQL;
myCommand.Connection = MyNewOleDbConnection;
myAdapter.UpdateCommand = myCommand;
myCommand.ExecuteNonQuery(); 
```

**我的访问数据库的快照**:(

![在此处输入图像描述](../Images/a1cfd2852382c5b88f8ea265397b9527.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:07:09.570

代替

```
myAdapter.SelectCommand = myCommand;
myCommand.ExecuteReader(); 
```

采用

```
myAdapter.UpdateCommand = myCommand;
myCommand.ExecuteNonQuery(); 
```

**参考：**

> [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)

# java - 带有xml解析的android listview loadmore按钮

> ID：13133538
> 
> 赞同：0
> 
> 时间：2012-10-30T06:05:16.567
> 
> 标签：java, android, xml-parsing, android-listview

嗨，我必须在 android 应用程序中使用 xml 解析开发带有加载更多按钮的列表视图。

在这里我遇到了一些问题。

**我的 xml 提要是空的，这意味着如何隐藏最后一页上的加载更多按钮。**

我在这里使用了下面的代码。

```
public class CustomizedListView extends Activity {
// All static variables
private String URL = "http://dev.mmm.com/xctesting/xcart444pro/retrieve.php?page=1";
// XML node keys
static final String KEY_SONG = "Order"; 
    static final String KEY_TITLE = "orderid";
static final String KEY_DATE = "date";
static final String KEY_ARTIST = "payment_method";
    int current_page = 1;
ListView lv;
LazyAdapter adapter;
ProgressDialog pDialog; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv = (ListView) findViewById(R.id.list);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
              songsList.add(map);
    }

    Button btnLoadMore = new Button(this);
    btnLoadMore.setText("Load More");

    btnLoadMore.setBackgroundResource(R.drawable.lgnbttn);
    // Adding Load More button to lisview at bottom
    lv.addFooterView(btnLoadMore);

    // Getting adapter
    adapter = new LazyAdapter(this, songsList);
    lv.setAdapter(adapter);
                btnLoadMore.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Starting a new async task
            new loadMoreListView().execute();
        }
    });
}
    private class loadMoreListView extends AsyncTask<Void, Void, Void> {

        @Override 
        protected void onPreExecute() {
            // Showing progress dialog before sending http request
            pDialog = new ProgressDialog(
                    CustomizedListView.this);
            pDialog.setMessage("Please wait..");
            //pDialog.setIndeterminateDrawable(getResources().getDrawable(R.drawable.my_progress_indeterminate));
            pDialog.setIndeterminate(true);
            pDialog.setCancelable(false);
            pDialog.show(); 

            pDialog.setContentView(R.layout.custom_dialog);

        }
        protected Void doInBackground(Void... unused) {

                    current_page += 1;

                    // Next page request
                    URL = "http://dev.mmm.com/xctesting/xcart444pro/retrieve.php?page=" + current_page;

                    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

                    XMLParser parser = new XMLParser();
                    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                    Document doc = parser.getDomElement(xml); // getting DOM element

                    NodeList nl = doc.getElementsByTagName(KEY_SONG);

                    NodeList nl = doc.getElementsByTagName(KEY_SONG);
                    if (nl.getLength() == 0)
                      {
                          btnLoadMore.setVisibility(View.GONE);
                          pDialog.dismiss();

                      }
                      else

                    // looping through all item nodes <item>
                    for (int i = 0; i < nl.getLength(); i++) {
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        Element e = (Element) nl.item(i);

                        // adding each child node to HashMap key => value
                        map.put(KEY_ID, parser.getValue(e, KEY_ID));
                        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                 songsList.add(map);
                    }

                    // get listview current position - used to maintain scroll position
                    int currentPosition = lv.getFirstVisiblePosition();

                    // Appending new data to menuItems ArrayList
                    adapter = new LazyAdapter(
                            CustomizedListView.this,
                            songsList);
                    lv.setAdapter(adapter);
             lv.setSelectionFromTop(currentPosition + 1, 0);

            }
            });

            return (null);
        }

        protected void onPostExecute(Void unused) {
            // closing progress dialog
            pDialog.dismiss();

        }
    }
} 
```

**编辑：**

在这里我必须运行该应用程序意味着列表视图显示在每页 4 个项目上。我的最后一页有 1 个项目。请参考此屏幕截图：[lastpage](http://screencast.com/t/fTl4FETd) 在最后一页中，我必须单击加载更多按钮意味着必须进行下一个活动并**成功隐藏空页面上的按钮**..请参考此屏幕截图：[空页面 - 所以隐藏按钮](http://screencast.com/t/wyG5zdp3r)

我必须检查空页的条件：

```
 if (nl.getLength() == 0)
                    {
                        btnLoadMore.setVisibility(View.GONE);
                        pDialog.dismiss();

                    } 
```

我怎样才能写最后一页的条件?????请帮助我

在这里**我希望需要 o/p 隐藏最后一页上的按钮**。

请帮助我。我如何检查条件。以编程方式给我一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:48:10.563

我使用这种方式实现了更多负载我不使用页脚视图

```
public boolean mHasLoadMore = false;

    class MyAdapter extends ArrayAdapter implements OnItemClickListener{

        public MyAdapter(Context context, int textViewResourceId) {
            super(context, textViewResourceId);
            // TODO Auto-generated constructor stub
        }

        public int getTotal(){
            return super.getCount();
        }
        @Override
        public int getCount() {

            if(super.getCount()>0)
                return super.getCount()+1;
            else
                return 0;

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            if( getTotal() == (position+1) && mHasLoadMore ){

                TextView loadMoreView = new TextView(getContext());
                loadMoreView.setText("Load More");
                return loadMoreView;
            }              
            else {
                View theView = new View(getContext());
                // inflate & add what you need for item view here you can modify it to reuse convertView also
                return theView;
            }   

        }

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long id) {

            if( getTotal() == (position+1) && mHasLoadMore ){

                // load more button clicked do handling for load more launch async 
                //task to do load more after that if found 0 result change mHasLoadMore to false 
                //& call notifydatadetchanged               
            }
            else
            {
                // handle item click here  
            }

        }

    } 
```

在加载数据并调用 notifydatasetchanged 时，将此类适配器用于您的列表视图并首次设置 mHasLoadMore 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:49:45.593

首先，你为什么在 AsyncTaks 中使用 runOnUiThread？这不应该是必要的。必须在后台运行的代码，在 doInBackground 方法中就足够了。

此外，您可以使用 AsyncTask 的第三个参数类型将来自 te doInBackground 的结果返回到 onPostExecute。然后根据结果，您可以在那里更改按钮的可见性。

为此，对 Button 的引用（在您的情况下为 btnLoadMore）应该是一个实例变量，因此它应该在类中定义，而不是在 onCreate 方法中。否则将无法从该方法外部访问。

我假设提要为空时节点列表将为空？然后它看起来像这样：

```
public class CustomizedListView extends Activity {

    private Button btnLoadMore;

    public void onCreate(){
        btnLoadMore = new Button(this);
        <do stuff>
        btnLoadMore.setOnClickListener(new View.OnClickListener() {

           @Override
           public void onClick(View arg0) {
               // Starting a new async task
               new LoadMoreListView().execute();
           }
        });

        new LoadMoreListView().execute();// execute the AsyncTask once in the onCreate, so you don't have to duplicate the code here to load the listview.

    }

    private class LoadMoreListView extends AsyncTask<Void, Void, Boolean> {

        @Override 
        protected void onPreExecute() {
            < Show dialog>;
        }

        @Override
        protected Void doInBackground(Void... unused) {
           Boolean listIsEmpty;

           < Page request>;
           < Retrieve element list>;
           < If element list size == 0, listIsEmpty = true; return listIsEmpty>;

           < Process elements, fill list etc.>;
           < End of doInBackground, listIsEmpty = false; return listIsEmpty>;

        }

        @Override
        protected void onPostExecute(Boolean listIsEmpty) {
            < If listIsEmpty == true -> btnLoadMore.setVisibility(View.GONE);>
            < Close dialog>
        }
    }
}
} 
```

# xml - XPath/XML 解析以包装元素组

> ID：13133546
> 
> 赞同：1
> 
> 时间：2012-10-30T06:06:24.117
> 
> 标签：xml, xpath

这可能很简单，但我遗漏了一些东西......我有一个 XElement，我需要在其中找到特定元素的组并为该组插入一个新的父元素。

即，在下面的示例中，我需要创建一个新元素并将其作为 z 元素组的父元素添加到树中 -

```
<x>
    <z />
    <z />
    <z />
</x> 
```

变成：

```
<x>
    <y>
        <z />
        <z />
        <z />
    </y>
</x> 
```

Z元素之间不会有任何其他元素，但xml中可能有多个连续元素的实例。

如果可能的话，我宁愿避免使用 XSLT 来操作数据。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:05:25.983

XPath 只能访问现有文档，不能创建新文档。

可用于创建新文档的技术包括 XSLT、XQuery、Linq 等。

如果不知道为什么不想使用 XSLT，就很难回答这个问题，对于我们中的许多人来说，这将是显而易见且最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:32:10.293

您仍然必须使用某些东西（DOM/XSLT/etc）来修改文档或输出新文档。

话虽如此，您可以通过定位`<z/>`组的第一个元素（从而遍历组）然后将其和组内的其他元素包装起来来解决问题。

1.  `//z[not(preceding-sibling::z)]`会给你所有`<z/>`没有前兄弟的元素`<z/>`，所以你在组中是第一个（返回的元素数是组数）。

2.  在元素中使用 DOM/other 包装该`<y>`元素。

3.  包装组中的其他元素。在第一个`<z/>`元素上用于`following-sibling::z`获取组中的元素 2 到 N。

# php - 在 mpdf 中执行一个 php 页面并制作一个 pdf

> ID：13133549
> 
> 赞同：1
> 
> 时间：2012-10-30T06:06:46.427
> 
> 标签：php, mpdf

mpdf 似乎很顺利地转换了 html 页面.. 但是当我使用从数据库中获取值的 php 代码时，mdpf 正在输出 pdf 中的 php 代码而不是执行结果..

```
 enter code here
    <body>
<form >
<?php 

    include 'connection.php';

    $query="select * from androidlogin";

    $result=mysql_query($query);

    while($i = mysql_fetch_array($result))
    {
        echo "<h3>". $i['user']. "&&" . $i['pass']. "</h3>";
    }

?>

</form>
</body> 
```

pdf文件的输出就像

```
<?php include 'connection.php'; $query="select * from androidlogin";  

  $result=mysql_query($query); 
  while($i =mysql_fetch_array($result)) 
  { 
      echo "". $i['user']. "&&" . $i['pass']. ""; 
  } 
?> 
```

我希望php页面执行然后转换为pdf，请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T07:55:30.803

请在您的 php.ini 文件中进行更改。在您的文件中打开 dll 扩展名，这将解决您的问题。

# sql - Rails 3 将限制和偏移量应用于子查询

> ID：13133553
> 
> 赞同：4
> 
> 时间：2012-10-30T06:07:08.523
> 
> 标签：sql, ruby-on-rails-3, postgresql, activerecord, subquery

我有一个类似这样的查询（在 song.rb 中）：

```
def self.new_songs
  Song.where(id: Song.grouped_order_published).select_important_stuff
end 
```

稍后在我的应用程序中，它通过了限制和偏移量，让我们在控制器中说：

```
@songs = Song.new_songs.limit(10).offset(10) 
```

我的应用程序的结构方式，我想保留这种设置方法，但不幸的是它真的很慢，因为它限制了外部查询而不是子查询。

有没有办法可以公开子查询，以便它接收限制和偏移量而不是外部查询？

**编辑**：我应该补充说我正在使用 postgres 9.2。

**编辑 2**：我想以这种方式执行此操作的原因是我正在进行分页，我需要获取总行数的“计数”。所以我做这样的事情：

```
@songs = Song.new_songs
...
@pages = @songs.count / 10
...
render @songs.limit(params[:page]).offset(0) 
```

如果我要以某种方式更改它，我将不得不完全重做（在很多地方）。通过在实际调用它之前不限制它，我可以在两者之间进行计数，然后在最后只获取页面。我想我正在寻找更多关于如何使用内部查询完成此操作的建议，而不会随着数据库的增长而变得非常缓慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:30:17.510

我无法尝试该解决方案，而且我也不是 ruby​​ 专家，但据我了解，您需要一个对象来传递所有方法调用，但限制和偏移到完整查询并同时存储有限的 sub_query .

它可能看起来像这样：

```
class LimitedSubquery < Object

  # sub_query has to be stored so we can limit/offset it
  def initialize(sub_query)
    @sub_query = sub_query
  end

  # Make sure everybody knows we can be used like a query
  def self.respond_to?(symbol, include_private=false)
     super || full_query.respond_to?(symbol, include_private)
  end

  # Missing methods are probably meant to be called on the whole query
  def self.method_missing(method_sym, *arguments, &block)
    if full_query.respond_to?(method_sym)
      full_query.send(method_sym, *arguments, &block)
    else
      super
    end
  end

  # Generate the query for execution
  def self.full_query
    Song.where(id: @sub_query).select_important_stuff
  end

  # Apply limit to sub_query
  def self.limit(*number)
    LimitedSubquery.new(@sub_query.limit(*number))
  end

  # Apply offset to sub_query
  def self.offset(*number)
    LimitedSubquery.new(@sub_query.offset(*number))
  end
end 
```

而不是像这样称呼它

```
def new_songs
  LimitedSubquery.new(Song.grouped_order_published)
end 
```

如果我有什么问题，请编辑我！

问候

TC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:51:05.160

您应该考虑使用[will_paginate](https://github.com/mislav/will_paginate/wiki) gem。这使您远离手动计算所有这些的麻烦；-)

# django - Django 多列外键

> ID：13133554
> 
> 赞同：10
> 
> 时间：2012-10-30T06:07:08.673
> 
> 标签：django, django-models

是否可以在另一个模型中定义引用多列的外键？

例如，一个外键引用了产品表中的一个两列索引，SQL 语句：

```
FOREIGN KEY (product_category, product_id) REFERENCES product(category, id) 
```

顺便说一句，我已经研究过`django.contrib.contenttypes`，认为这不是这种情况的完美解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T06:24:10.887

尚不支持。如果您愿意，有一张票和可能的处理方法。也许你甚至可以运行[自定义 sql](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)

**多列主键支持**

*关系数据库设计使用一组列作为表的主键。当这个集合包含多个列时，它被称为“复合”或“复合”主键。（有关术语的更多信息，这里是一篇讨论数据库键的文章）。目前 Django 模型仅支持该集合中的单个列，拒绝了许多表的自然主键是多个列的设计。Django 目前不能使用这些模式；相反，他们必须引入一个冗余的单列键（“代理”键），迫使应用程序在任何给定实例中对表使用哪个键做出任意和不必要的选择。本页讨论如何让 Django 支持这些复合主键。有很多细节可以在这里得到，但做得对，*

**当前状态**

*当前状态是该问题已被接受/分配并正在处理中，在 http://github.com/dcramer/django-compositepks 有部分实现。该实现允许具有复合主键。但是，ForeignKey 和 RelatedManager 中缺少对复合键的支持。因此，无法从具有复合主键的模型中导航关系。*

**讨论：**

[大卫克莱默的初始补丁](http://groups.google.com/group/django-developers/browse_thread/thread/eac7c296c3797f5a)

[复合外键API设计](http://groups.google.com/group/django-developers/browse_thread/thread/4b2370a0652d9135)

[票](https://code.djangoproject.com/wiki/MultipleColumnPrimaryKeys)

注意 - [SqlAlchemy](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html?highlight=foreignkey#sqlalchemy.schema.ForeignKey.column)允许这样做，如下所述，您可以使用 SqlAlchemy 替换 Django 的 ORM

也可以使用**ForeignKeyConstraint**对象在表级别定义外键。该对象可以描述单列或多列外键。多列外键称为复合外键，几乎总是引用具有复合主键的表。下面我们定义一个具有复合主键的表 invoice：

```
invoice = Table('invoice', metadata,
    Column('invoice_id', Integer, primary_key=True),
    Column('ref_num', Integer, primary_key=True),
    Column('description', String(60), nullable=False)
) 
```

然后是带有复合外键引用发票的表 invoice_item：

```
invoice_item = Table('invoice_item', metadata,
    Column('item_id', Integer, primary_key=True),
    Column('item_name', String(60), nullable=False),
    Column('invoice_id', Integer, nullable=False),
    Column('ref_num', Integer, nullable=False),
    ForeignKeyConstraint(['invoice_id', 'ref_num'], ['invoice.invoice_id', 'invoice.ref_num'])
) 
```

[参考](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html?highlight=foreignkey#metadata-foreignkeys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T13:19:02.930

无论如何，您可以像这样创建一个“Django 固定装置”：

```
CREATE INDEX product_category_id_id ON product (category_id, id); 
```

为此，您必须在模型所在`product.sql`的子文件夹中创建一个名为的文件。`sql`夹具在初始同步数据库上加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:40:20.357

是的，它可能，但是当您使用多列约束（即外键或主键）时，您需要创建一个复合键。例如：

```
CREATE TABLE Student (
   S_num INTEGER,
   S_Cate INTEGER,
   S_descr CHAR(200),
   PRIMARY KEY (S_num, S_Cate))

CREATE TABLE sub_Student (
   Ssub_ID INTEGER PRIMARY KEY,
   Sref_num INTEGER,
   Sref_Cate INTEGER,
   sub_descr CHAR(500),
   FOREIGN KEY (Sref_num, Sref_Cate) REFERENCES Student
      (S_num, S_Cate)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-25T19:41:05.427

@pratik-mandrekar 的回答非常好，但我想指出，即使没有适当的多列主键；**django 能够容纳跨越多列外键的查询**。这是一个基于旧数据库的示例，我不允许修改其架构：

鉴于：

```
from django.db import models

class Account(models.Model):
    # Collectively, location_no and occupant_no function as the primary key for Account.
    location_no = models.IntegerField()
    occupant_no = models.SmallIntegerField()

    name = models.CharField(max_length=100)

    class Meta:
        managed = False
        db_table = 'csracct'
        unique_together = (('location_no', 'occupant_no'),)

class Call(models.Model):
    call_id = models.IntegerField(primary_key=True)

    # Collectively, location_no and occupant_no act as a foreign key to Account.
    location_no = models.IntegerField()
    occupant_no = models.SmallIntegerField()

    notes = models.TextField()

    class Meta:
        managed = False
        db_table = 'csrcall' 
```

以下是您[`extra()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)用来获取名称为“steve”的帐户的 10 次最近调用的方法：

```
calls = Call.extra(
    tables = ['csracct'],
    where = [
        'csracct.location_no=csrcall.location_no',
        'csracct.occupant_no=csrcall.occupant_no',
        'csracct.name=%s',
        ],
    params = ['steve'],
    ).order_by('-call_id')[:10] 
```

这不是最优雅的解决方案，但`extra()`它是 django 的基本查询集工具包的一部分；所以它可以很好地与您的 django 代码的其余部分配合使用。请注意我们如何排序，并使用通常的 django 方法限制/切片查询集。

# java - 是否有任何可用于解析 HTML 简历的好方法

> ID：13133559
> 
> 赞同：0
> 
> 时间：2012-10-30T06:07:32.420
> 
> 标签：java, parsing, html-parsing

我们需要从 HTML 简历中获取一些信息（例如，Experience、Location 等），因此我们使用 Strip 方法将 HTML 内容转换为文本内容，而不是进行解析。我的问题是这是一个好方法，或者我可以做任何其他可能的方法。

**更多信息**

> 我的 HTML 内容没有唯一的 HTML 标签，它可能会有所不同。

哈里哈兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:12:58.563

最好在 Java 中使用 HTML 解析器。有一些易于使用的库，例如：

1.  [http://jsoup.org/](http://jsoup.org/)
2.  [http://jtidy.sourceforge.net/](http://jtidy.sourceforge.net/)

# android - 您的内容必须有一个 id 属性为 android.R.id.list 的 ListView

> ID：13133560
> 
> 赞同：0
> 
> 时间：2012-10-30T06:07:40.380
> 
> 标签：android, listview

> **可能重复：**
> [运行时异常 ListView，其 id 属性为 'android.R.id.list'</a>](https://stackoverflow.com/questions/3040374/runtime-exception-listview-whose-id-attribute-is-android-r-id-list)
> 
> [](https://stackoverflow.com/questions/3040374/runtime-exception-listview-whose-id-attribute-is-android-r-id-list)

 [我是 android 新手，我收到以下运行时错误。

```
"Your content must have a ListView whose id attribute is android.R.id.list" 
```

我正在尝试以下教程](https://stackoverflow.com/questions/3040374/runtime-exception-listview-whose-id-attribute-is-android-r-id-list) 

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/) “自定义 ArrayAdapter 示例”

当我运行他们的代码时它工作正常并且他们使用 android 2.3.3 我使用 4.0

我根据我的要求更改了他们的代码，并在 logcat 中出现了运行时错误。这是我的代码。

```
import android.app.ListActivity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.Toast;

import com.xxxx.xxx.adapter.ListArrayAdapter;

public class Page5SubActivity extends ListActivity {

    static final String[] MOBILE_OS = new String[] { "Android", "iOS",
            "WindowsMobile", "Blackberry", "test", "test2" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.page5sub);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        Intent intent = getIntent();
        int val = intent.getIntExtra("id", 0);

        switch (val) {

        case 2:
            setListAdapter(new ListArrayAdapter(this, MOBILE_OS));

            break;

        case 3:
            break;

        case 4:
            break;

        }

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        // get selected items
        String selectedValue = (String) getListAdapter().getItem(position);
        Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    }

    public void onClickBtn(View v) {

        switch (v.getId()) {

        case R.id.back_arrow:
            Intent intent2 = new Intent(Page5SubActivity.this,
                    Page5Activity.class);
            // intent2.putExtra("id", 2);
            startActivity(intent2);

            break;
        }

    }

} 
```

这是xml文件的代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/page1background"
    android:gravity="center" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="false"
        android:layout_marginBottom="@dimen/padding_Xlarge"
        android:layout_marginTop="@dimen/padding_large"
        android:paddingTop="@dimen/padding_large"
        android:text="@string/text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/textbody" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:layout_below="@id/textView1"
        android:layout_centerHorizontal="true"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/text" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_below="@id/linearLayout1"
        android:weightSum="10" >

        <View
            android:id="@+id/view1"
            android:layout_width="0dip"
            android:layout_height="30dp"
            android:layout_marginBottom="35dp"
            android:layout_weight="1" />

        <ImageView
            android:id="@+id/logo"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="5dp"
            android:contentDescription="@string/Description" >
        </ImageView>

        <TextView
            android:id="@+id/label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@+id/label" >
        </TextView>

        <View
            android:id="@+id/view2"
            android:layout_width="0dip"
            android:layout_height="30dp"
            android:layout_marginBottom="35dp"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:weightSum="10" >

        <View
            android:id="@+id/view3"
            android:layout_width="0dip"
            android:layout_height="30dp"
            android:layout_marginBottom="35dp"
            android:layout_weight="4.5" />

        <ImageButton
            android:id="@+id/back_arrow"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="35dp"
            android:layout_weight="1"
            android:background="@drawable/backbut"
            android:contentDescription="@string/Description"
            android:onClick="onClickBtn"
            android:src="@drawable/backarrowpress" />

        <View
            android:id="@+id/view4"
            android:layout_width="0dip"
            android:layout_height="30dp"
            android:layout_marginBottom="35dp"
            android:layout_weight="4.5" />
    </LinearLayout>

</RelativeLayout> 
```

在他们的示例中，他们没有在 xml 文件中使用 listview 小部件，而是在 log cat 中提及。除此之外，它说无法启动活动 compnonetinfo。

我在哪里做错了？请帮我纠正这个问题。

这是xml文件的原始代码。这是原始代码的来源

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_marginLeft="5px"
        android:layout_marginRight="20px"
        android:layout_marginTop="5px"
        android:src="@drawable/windowsmobile_logo" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="30px" >
    </TextView>

</LinearLayout> 
```

我注意到他们在他们的 xml 文件中没有使用 listview 小部件，但可以使用这个示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:11:59.083

您在错误中的解决方案

```
"Your content must have a ListView whose id attribute is android.R.id.list" 
```

如果您使用的是 ListActivity，那么您的 xml 布局中必须有 ListView 并且必须是 ListView 的 id`android.R.id.list`

因此必须在您的布局中添加列表视图，如下面的代码

```
<ListView 
android:layout_height="wrap_content" 
android:layout_width="fill_parent" 
android:id="@+id/android:list" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:11:26.370

当您扩展 ListActivity 时，您的 xml 布局文件必须具有 ID 为的 ListView`android.R.id.list`

所以把listview放在xml布局文件中`android:id="@+id/android.R.id.list"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:17:13.920

像这样设置您的 Listview id

```
android:id="@id/android:list" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T06:19:19.860

在您的布局 xml 文件中，您必须将 ListView 的 id 设置为 @android:id/list

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T06:30:18.117

像这样设置适配器。

```
 Adapter = new Adapter<String>(this,android.R.layout.simple_list_item_1, list); 
```

或检查 XML

```
<ListView 
android:layout_height="wrap_content" 
android:layout_width="fill_parent" 
android:id="@+id/android:list" /> 
```

# javascript - 如何获取动态生成元素的 id 属性？

> ID：13133571
> 
> 赞同：1
> 
> 时间：2012-10-30T06:08:24.467
> 
> 标签：javascript, html, typescript

`id`当您不知道动态生成的元素的属性时，如何获取它`id`？我想`eventListener`在一个页面上为大约 2000 个复选框设置一些 s。

我知道我可以从元素中调用一个函数：

```
<input type="checkbox" id="{databaseResult.Value}" onclick="someFunction(this)" /> 
```

但是我不允许在我的 HTML 中使用 JavaScript 或对它的引用。纯 JavaScript（或编译成它的语言）是我唯一的选择。

我已经知道的某些元素的**代码**是`id`：

```
var tb = <HTMLInputElement>document.getElementById("tbox");

if(tb.addEventListener("", function (e) {
    sayHello(tb.value);
}, false)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:19:58.530

将单个侦听器放在祖先元素上，例如主体，然后侦听其上的事件，例如：

```
<body onclick="handleClick(event);" ...> 
```

功能是：

```
function handleClick(evt) {
  var el = evt.target || evt.srcElement;

  if (el && el.type == 'checkbox') {
    alert(el.id);
  }
} 
```

当然你可以动态添加监听器，为了方便我使用了内联。

### 编辑

要动态附加监听器，请使用一个`addEvent`函数来处理 IE 和 W3C 事件模型：

```
function addEvent(el, evt, fn) {

  // W3C event model
  if (el.addEventListener) {
    el.addEventListener(evt, fn, false);

  // IE event model
  // Set this and pass event as first parameter
  } else if (el.attachEvent) {
    el.attachEvent('on' + evt, (function(el, fn) {
        return function() {fn.call(el, window.event);};
      })(el, fn)
    );
  }

  // Prevent circular reference
  el = null;
} 
```

并将其称为：

```
window.onload = function() {
  addEvent(document.body, 'click', handleClick);
} 
```

# c++ - 在opengl中创建分形树

> ID：13133574
> 
> 赞同：1
> 
> 时间：2012-10-30T06:08:33.903
> 
> 标签：c++, opengl, fractals

在 opengl 中创建分形有点麻烦。这是我当前的代码

```
void generateTree(){
  Point3f startPoint({0.0f,0.0f,0.0f});
  Point3f endPoint({1.0f,0.0f,0.0f});
  float rotation = 90.0f;
  glutWireSphere(0.05, 4, 4);
  _generateTreeBranches(startPoint,1.0f,rotation,0);
}

void _generateTreeBranches(const Point3f& newPosition,
                       float length,
                       float rotation,
                       const int depth)
{
  if(depth > MAX_DEPTH) return;
  cout << "at depth = " << depth << endl;

  if(depth == 0){
      glColor3f(1.0f,1.0f,1.0f);
  }else if(depth == 1){
      glColor3f(1.0f,0.0f,0.0f);
  }else{
      glColor3f(0.0f,1.0f,0.0f);
  }

  glTranslatef(newPosition.x,newPosition.y,newPosition.z);
  glRotatef(rotation, 0.0f, 0.0f, 1.0f);
  drawLine(length);
  glRotatef(-rotation, 0.0f, 0.0f, 1.0f);
  glTranslatef(-newPosition.x,-newPosition.y,-newPosition.z);

  const float newLength = length * BRANCH_LENGTH_DECREASE_FACTOR;
  int nextDepth = depth + 1;
  Point3f nextPosition = {newPosition.x+length, newPosition.y, newPosition.z};

  float leftRotation = rotation + CHILD_BRANCH_ANGLE * nextDepth;
  _generateTreeBranches(nextPosition,newLength,leftRotation,nextDepth);

  float rightRotation = rotation - CHILD_BRANCH_ANGLE * nextDepth;
  _generateTreeBranches(nextPosition,newLength,rightRotation,nextDepth);

} 
```

定位不正确，尽管旋转似乎是正确的。新分支不是从父分支的终点开始绘制的。有人可以帮我解决这个问题。[在此处](http://codepad.org/5M7fJJ0k)查看完整代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:21:23.043

nextPosition 的公式不正确，因为它没有考虑当前分支所面临的方向

```
 Point3f nextPosition = {newPosition.x+length, newPosition.y, newPosition.z}; 
```

它应该是这样的（请准确检查）：

```
Point3f nextPosition = {newPosition.x+length*cos(rotation), newPosition.y+length*sin(rotation), newPosition.z}; 
```

另外，请使用 glLoadIdentity() 立即重置矩阵，如下所示：

```
glTranslatef(newPosition.x,newPosition.y,newPosition.z);
glRotatef(rotation, 0.0f, 0.0f, 1.0f);
drawLine(length);
glLoadIdentity(); 
```

这将比您尝试做的要清楚得多。

# ios - iOS：在静态库中出现链接错误，即使我没有引用该库中的任何代码

> ID：13133576
> 
> 赞同：0
> 
> 时间：2012-10-30T06:08:54.167
> 
> 标签：ios, xcode, linker, static-linking

我在我的项目中包含了 libzar.a，但是，即使我没有编写任何代码来引用 libzar 中的任何方法，我的项目仍然无法链接。这是错误输出，

```
Undefined symbols for architecture i386: 
```

“_CVPixelBufferGetBaseAddressOfPlane”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferGetBytesPerRowOfPlane”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferGetHeight”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferGetWidth”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferLockBaseAddress”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferRelease”，引用自：-[ZBarCVImage setPixelBuffer:] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferRetain”，引用自：-[ZBarCVImage setPixelBuffer:] in libxxx.a(ZBarCVImage.o)

“_CVPixelBufferUnlockBaseAddress”，引用自：-[ZBarCVImage convertCVtoRGB] in libxxx.a(ZBarCVImage.o)

“_iconv”，引用自：libxxx.a(qrdectxt.o) 中的 _qr_code_data_list_extract_text

“_iconv_close”，引用自：libxxx.a(qrdectxt.o) 中的 _qr_code_data_list_extract_text

“_iconv_open”，引用自：libxxx.a(qrdectxt.o) 中的 _qr_code_data_list_extract_text

ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这就是我所做的，
1\. 刚刚将 libzar.a 添加到我的项目中
2\. 构建应用程序
3\. 错误

我的链接配置只添加了 -all_load 和 -ObjC 选项。传统上，如果我从不引用静态库中的任何代码，就永远不会出现这种链接错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T05:51:03.283

将 CoreVideo.framework 添加到“使用库链接二进制文件”构建阶段应该可以解决这个问题。

# android - Android：从现有 URI 保存文件

> ID：13133579
> 
> 赞同：24
> 
> 时间：2012-10-30T06:09:40.563
> 
> 标签：android, android-intent, media

如何从现有的 URI 中保存媒体文件（例如 .mp3），我从隐式意图中获取该文件？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-30T06:46:32.700

用这个方法，有效

```
void savefile(URI sourceuri)
{
    String sourceFilename= sourceuri.getPath();
    String destinationFilename = android.os.Environment.getExternalStorageDirectory().getPath()+File.separatorChar+"abc.mp3";

    BufferedInputStream bis = null;
    BufferedOutputStream bos = null;

    try {
      bis = new BufferedInputStream(new FileInputStream(sourceFilename));
      bos = new BufferedOutputStream(new FileOutputStream(destinationFilename, false));
      byte[] buf = new byte[1024];
      bis.read(buf);
      do {
        bos.write(buf);
      } while(bis.read(buf) != -1);
    } catch (IOException e) {
      e.printStackTrace();
    } finally {
      try {
        if (bis != null) bis.close();
        if (bos != null) bos.close();
      } catch (IOException e) {
            e.printStackTrace();
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-24T04:38:42.613

```
private static String FILE_NAM  = "video";
String outputfile = getFilesDir() + File.separator+FILE_NAM+"_tmp.mp4";

InputStream in = getContentResolver().openInputStream(videoFileUri);
private static File createFileFromInputStream(InputStream inputStream, String fileName) {

    try {
        File f = new File(fileName);
        f.setWritable(true, false);
        OutputStream outputStream = new FileOutputStream(f);
        byte buffer[] = new byte[1024];
        int length = 0;

        while((length=inputStream.read(buffer)) > 0) {
            outputStream.write(buffer,0,length);
        }

        outputStream.close();
        inputStream.close();

        return f;
    } catch (IOException e) {
        System.out.println("error in creating a file");
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-06T06:22:08.957

如果 Uri 是从 Google Drive 接收的，它也可以是虚拟文件 Uri。[查看](https://commonsware.com/blog/2016/09/06/virtual-files-faq.html)CommonsWare 的这篇文章以获取更多信息。因此，在从 Uri 保存文件时，您也必须考虑这种情况。

要查找文件 Uri 是否是虚拟的，您可以使用

```
private static boolean isVirtualFile(Context context, Uri uri) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
        if (!DocumentsContract.isDocumentUri(context, uri)) {
            return false;
        }
        Cursor cursor = context.getContentResolver().query(
                uri,
                new String[]{DocumentsContract.Document.COLUMN_FLAGS},
                null, null, null);
        int flags = 0;
        if (cursor.moveToFirst()) {
            flags = cursor.getInt(0);
        }
        cursor.close();
        return (flags & DocumentsContract.Document.FLAG_VIRTUAL_DOCUMENT) != 0;
    } else {
        return false;
    }
} 
```

您可以像这样从此虚拟文件中获取流数据：

```
private static InputStream getInputStreamForVirtualFile(Context context, Uri uri, String mimeTypeFilter)
        throws IOException {

    ContentResolver resolver = context.getContentResolver();
    String[] openableMimeTypes = resolver.getStreamTypes(uri, mimeTypeFilter);
    if (openableMimeTypes == null || openableMimeTypes.length < 1) {
        throw new FileNotFoundException();
    }
    return resolver
            .openTypedAssetFileDescriptor(uri, openableMimeTypes[0], null)
            .createInputStream();
} 
```

要查找 MIME 类型，请尝试

```
private static String getMimeType(String url) {
    String type = null;
    String extension = MimeTypeMap.getFileExtensionFromUrl(url);
    if (extension != null) {
        type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
    }
    return type;
} 
```

总的来说，您可以使用

```
public static boolean saveFile(Context context, String name, Uri sourceuri, String destinationDir, String destFileName) {

    BufferedInputStream bis = null;
    BufferedOutputStream bos = null;
    InputStream input = null;
    boolean hasError = false;

    try {
        if (isVirtualFile(context, sourceuri)) {
            input = getInputStreamForVirtualFile(context, sourceuri, getMimeType(name));
        } else {
            input = context.getContentResolver().openInputStream(sourceuri);
        }

        boolean directorySetupResult;
        File destDir = new File(destinationDir);
        if (!destDir.exists()) {
            directorySetupResult = destDir.mkdirs();
        } else if (!destDir.isDirectory()) {
            directorySetupResult = replaceFileWithDir(destinationDir);
        } else {
            directorySetupResult = true;
        }

        if (!directorySetupResult) {
            hasError = true;
        } else {
            String destination = destinationDir + File.separator + destFileName;
            int originalsize = input.available();

            bis = new BufferedInputStream(input);
            bos = new BufferedOutputStream(new FileOutputStream(destination));
            byte[] buf = new byte[originalsize];
            bis.read(buf);
            do {
                bos.write(buf);
            } while (bis.read(buf) != -1);
        }
    } catch (Exception e) {
        e.printStackTrace();
        hasError = true;
    } finally {
        try {
            if (bos != null) {
                bos.flush();
                bos.close();
            }
        } catch (Exception ignored) {
        }
    }

    return !hasError;
}

private static boolean replaceFileWithDir(String path) {
    File file = new File(path);
    if (!file.exists()) {
        if (file.mkdirs()) {
            return true;
        }
    } else if (file.delete()) {
        File folder = new File(path);
        if (folder.mkdirs()) {
            return true;
        }
    }
    return false;
} 
```

从 AsycTask 调用此方法。让我知道这是否有帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-18T15:26:38.457

我已使用以下代码将文件从从 Intent 返回的现有 Uri 保存到我的应用托管的 Uri：

```
 private void copyFile(Uri pathFrom, Uri pathTo) throws IOException {
        try (InputStream in = getContentResolver().openInputStream(pathFrom)) {
            if(in == null) return;
            try (OutputStream out = getContentResolver().openOutputStream(pathTo)) {
                if(out == null) return;
                // Transfer bytes from in to out
                byte[] buf = new byte[1024];
                int len;
                while ((len = in.read(buf)) > 0) {
                    out.write(buf, 0, len);
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-18T14:40:39.063

这是最简单和最干净的：

```
private void saveFile(Uri sourceUri, File destination)
    try {
        File source = new File(sourceUri.getPath());
        FileChannel src = new FileInputStream(source).getChannel();
        FileChannel dst = new FileOutputStream(destination).getChannel();
        dst.transferFrom(src, 0, src.size());
        src.close();
        dst.close();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-07T09:35:46.420

`android.net.Uri`从外部源接收 a时，保存文件的最佳方法是从流中：

```
try (InputStream ins = activity.getContentResolver().openInputStream(source_uri)) {
    File dest = new File(destination_path);
    createFileFromStream(ins, dest);
} catch (Exception ex) {
    Log.e("Save File", ex.getMessage());
    ex.printStackTrace();
} 
```

`createFileFromStream`方法：

```
public static void createFileFromStream(InputStream ins, File destination) {
    try (OutputStream os = new FileOutputStream(destination)) {
        byte[] buffer = new byte[4096];
        int length;
        while ((length = ins.read(buffer)) > 0) {
            os.write(buffer, 0, length);
        }
        os.flush();
    } catch (Exception ex) {
        Log.e("Save File", ex.getMessage());
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-30T06:18:06.320

1.从 URI 路径创建一个文件：

```
File from = new File(uri.toString()); 
```

2.在您希望文件另存为的位置创建另一个文件：

```
File to = new File("target file path"); 
```

3.将文件重命名为：

```
from.renameTo(to); 
```

这样，默认路径中的文件将自动删除并在新路径中创建。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-03T18:33:50.463

## 如何获取外部存储位置并保存文件

这个答案不是针对问题，而是针对标题。由于没有文章完全解释该过程，因此花了几个小时才弄清楚如何做到这一点，而其中一些已经存在多年并且使用了已弃用的 API。希望这可能对未来的开发人员有所帮助。

#### 获取外部存储的位置

例如，从片段内部，

```
// when user choose file location
private val uriResult = registerForActivityResult(ActivityResultContracts.CreateDocument()) { uri ->
    // do when user choose file location
    createFile(uri)
}

fun openFileChooser() {
    // startActivityForResult() is deprecated
    val suggestedFileName = "New Document.txt"
    uriResult.launch(suggestedFileName)
} 
```

#### 使用 Uri 写入文件数据

`java.io.File`从 an创建 a 似乎很困难`android.net.Uri`，因为没有直接的方法将 an 转换`android.net.Uri`为`java.net.URI`。但如果你有`ApplicationContext`你可以很容易地做到这一点。

```
fun createFile(uri: Uri) {
    try {
requireContext().applicationContext.contentResolver.openFileDescriptor(uri, "w")?.use { fd ->
        FileOutputStream(fd).use { fos ->

            // do your job on the FileOutputStream
            // also use background thread

            fos.close()
        }
    }
  } catch (e: Exception) {

  }
} 
```

**注意**：*文件操作会抛出多个异常，请谨慎处理。并且还在工作线程中进行文件操作。*

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-12-11T12:14:52.317

您可以使用

```
new File(uri.getPath()); 
```

# c# - Linq to XML 解析

> ID：13133581
> 
> 赞同：1
> 
> 时间：2012-10-30T06:09:48.220
> 
> 标签：c#, linq, linq-to-xml

我有一个如下所示的 xml。

我需要编写一个方法，该方法接受字符串输入（“IsAuthorFilterNeeded”或“IsTitleFilterNeeded”）并返回该节点下的书籍代码值。

假设如果参数是“IsAuthorFilterNeeded”，它应该返回 5,6,7,8

我尝试编写一个 Linq2XML 查询来检索它，但我对代码不满意，因为它不可读并且有许多硬编码的字符串。这是我的 linq2xml 查询。

```
public IList<string> GetBookCodes(string filterOption)
{
    IList<string> requiredValues = null;

    foreach (var node in _xml.Descendants("BookOptions"))
    {
        if (node.Parent.Attribute("Name").Value == "ScienceBooks")
        {
            var requiredNode = node.Elements("Property").Attributes("Value").First(x => x.Parent.FirstAttribute.Value == filterOption);
            requiredValues = requiredNode.Parent.Descendants("BookCode").Attributes("Value").ToArray().Select(x => x.Value).ToList();

            break;
        }
    }
    return requiredValues;
} 
```

有没有其他方法可以用更简单的代码来实现这个结果。

```
<LibraryRack Id="3" Name="ScienceBooks">
      <Books>
        <Book Id ="1" Name="Book1"></Book>
        <Book Id ="2" Name="Book2"></Book >
        <Book Id ="3" Name="Book3"></Book>
      </Books>
      <BookOptions>
        <Property Name="IsAuthorFilterNeeded" Value ="1">
          <BookCode Value="5" />
          <BookCode Value="6" />
          <BookCode Value="7" />
          <BookCode Value="8" />
        </Property>
        <Property Name="IsTitleFilterNeeded" Value ="0">
          <BookCode Value="2"/>
          <BookCode Value="3"/>
          <BookCode Value="4"/>
          <BookCode Value="7"/>
          <BookCode Value="129"/>
        </Property>
       </BookOptions> 

    </LibraryRack> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:29:53.803

```
using(FileStream fs = new FileStream("somedata.xml",FileMode.Open))
{
  var result = XDocument.Load(fs).Descendants("BookOptions").
                                  Descendants("Property").
                                  Where(c => { return c.Attribute("Name").Value.Trim() == "IsAuthorFilterNeeded"; }).
                                  Descendants().Select(xe => xe.Attribute("Value"));

  result.ToList().ForEach((val) => Console.WriteLine(val));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:20:16.577

这一点 LINQ 应该可以解决问题（一旦你的 XML 被修复）：

```
public IList<string> GetBookCodes(string filterOption)
{
    return (from property in _xml.Descendants("Property")
            where (string)property.Attribute("Name") == filterOption
            from value in property.Descendants("BookCode").Attributes("Value")                
            select (string)value).ToList();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:14:42.403

我认为 fluent api 在这里看起来更具可读性

```
var propertyFilter = "IsAuthorFilterNeeded";
var query = xdoc.Descendants("LibraryRack")
                .Where(lr => (string)lr.Attribute("Name") == "ScienceBooks")
                .Descendants("Property")
                .Where(p => (string)p.Attribute("Name") == propertyFilter)
                .Descendants()
                .Select(bc => (int)bc.Attribute("Value")); 
```

# iphone - 应用程序进入后台时 AVPlayer 暂停和播放问题

> ID：13133582
> 
> 赞同：7
> 
> 时间：2012-10-30T06:09:53.560
> 
> 标签：iphone, ios, avplayer

如果应用程序刚刚变为非活动/活动状态（当出现一些警报或双击主页按钮时），它就可以正常工作

```
AVPlayer *player;

- (void)applicationWillResignActive:(UIApplication *)application
{
    [player pause];
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [player play];
} 
```

如果应用程序进入后台（通过单击主页按钮）并返回，则它不是从暂停位置播放，而是从不同点播放（有时从开始，有时从中间）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T06:48:50.407

请按照以下步骤操作：

1）首先添加文件`float *time` 。`appDelegate.h`

2)`current time`接受`applicationWillResignActive`

3）添加以下方法

`ApplicationWillResignActive`方法`pause`播放器和`save` `current` `time`播放器的

```
- (void)applicationWillResignActive:(UIApplication *)application
{
   [player pause];
   time = player.currentTime
} 
```

现在在`applicationDidBecomeActive`添加`seekToTime`

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
  [player seekToTime:time toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
  [player play];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:08:08.763

您应该在应用程序进入后台之前调用 this 方法。[玩家暂停]；或[玩家停止]；

# arrays - 将数组推入数组 perl

> ID：13133587
> 
> 赞同：5
> 
> 时间：2012-10-30T06:10:38.647
> 
> 标签：arrays, perl, multidimensional-array

**编辑：**

如何将@myarr 推送到 $menu 中（见下文）

```
my @myarr = (
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ],
                [ "itemthree", "itemthewwb", "itemthreec" ],
                [ "itemfour", "itemfourb", "itemfourc" ]
               );

$menu = [
         "List",
         ["itemone", \&ds2],
         ["itemtwo", \&ds2],
         ["itemthree", \&ds2],
         ["itemfour", \&ds2],
         [ "Do Something (second)", \&ds2 ]
     ]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:39:42.750

This depends on what exactly you want to do.

You can either directly push the array:

```
push (@$menu, @myarr);

#results in:

[
     "List",
     ["itemone", \&ds2],
     ["itemtwo", \&ds2],
     ["itemthree", \&ds2],
     ["itemfour", \&ds2],
     [ "Do Something (second)", \&ds2 ],
     [ "itemone", "itemoneb", "itemonec" ],
     [ "itemtwo", "itemtwob", "itemtwoc" ],
     [ "itemthree", "itemthewwb", "itemthreec" ],
     [ "itemfour", "itemfourb", "itemfourc" ]
]; 
```

which results in the `myarr` *elements* being pushed to `menu`, or push the reference:

```
push (@$menu, \@myarr);

#results in:

[
     "List",
     ["itemone", \&ds2],
     ["itemtwo", \&ds2],
     ["itemthree", \&ds2],
     ["itemfour", \&ds2],
     [ "Do Something (second)", \&ds2 ],
     [
        [ "itemone", "itemoneb", "itemonec" ],
        [ "itemtwo", "itemtwob", "itemtwoc" ],
        [ "itemthree", "itemthewwb", "itemthreec" ],
        [ "itemfour", "itemfourb", "itemfourc" ],
     ],
]; 
```

which actually pushes the array (nested array).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T06:18:41.193

你可以推它：

```
 use Data::Dumper;
 push (@$menu, @myarr);
 print Dumper($menu), "\n"; 
```

# jquery - ASP.NET MVC 站点在远程访问时表现不同

> ID：13133589
> 
> 赞同：1
> 
> 时间：2012-10-30T06:10:47.897
> 
> 标签：jquery, asp.net-mvc, iis

我已经在 IIS 服务器上部署了我的 MVC 站点。如果我使用`http://localhost`URL 访问它，它工作正常。但是如果我在 URL 中使用机器名/IP 地址，则某些功能无法正常工作。我想知道为什么会这样。以下是我面临的一些事情

1.  我在对话框中使用了 JQuery Tab。如果远程访问该站点，该对话框不会提交数据。
2.  我使用过 JQuery Month 导航器。我可以看到它在 HttpPost 控制器期间提交了正确的月份和年份，但控制器操作不会根据发布的数据重定向。

我不知道为什么它会这样

```
/* Some code for reference */

@using (Html.BeginForm())
{    
    .....
        <input type="submit" value="Save" class="buttonSave" onclick="return     ConfirmSave();" />                        
    </div> 
}

function ConfirmSave() {
    return confirm('You have selected to copy this entry.\n\n This action cannot be rolled back, and each created entry will need to be deleted independently. Are you sure you want to continue?');
} 
```

# objective-c - 为什么使用 AFNetworking 而不是 dispatch_async？

> ID：13133591
> 
> 赞同：17
> 
> 时间：2012-10-30T06:11:03.653
> 
> 标签：objective-c, ios, networking, afnetworking

当异步调用可以简单地使用 GCD 完成时，为什么要使用 AFNetworking 的异步方法？

```
dispatch_async(bgQ, ^{

                //NSURLConnection code

                dispatch_async(dispatch_get_main_queue(), ^{
                    //UI code
                });
}); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-30T06:29:18.707

[AFNetworking 常见问题解答](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)顶部对此进行了详细解答：

> 虽然`NSURLConnection`提供`+sendAsynchronousRequest:queue:completionHandler:`和 `+sendSynchronousRequest:returningResponse:error:`，但使用 AFNetworking 有很多好处：
> 
> *   `AFURLConnectionOperation`及其子类继承自`NSOperation`，它允许请求被取消、> 暂停/恢复，并由`NSOperationQueue`.
> *   `AFURLConnectionOperation`还允许您轻松地流式上传和下载、处理身份验证挑战、 > 监控上传和下载进度，以及控制缓存行为或请求。
> *   `AFHTTPRequestOperation`及其子类根据 HTTP > 状态码和内容类型区分成功和不成功的请求。
> *   AFNetworking 包括特定于媒体的请求操作，这些操作可以转换`NSData`为更可用的格式，例如 JSON、> XML、图像和属性列表。
> *   `AFHTTPClient`提供方便的接口与 Web 服务交互，包括默认标头、身份验证、> 网络可达性监控、批处理操作、查询字符串参数序列化和多部分表单请求。
> *   `UIImageView+AFNetworking`添加了一种方便的方式来异步加载图像。

# youtube - DatabaseSchemaObjectExistsException：表file_display已存在

> ID：13133593
> 
> 赞同：1
> 
> 时间：2012-10-30T06:11:17.367
> 
> 标签：youtube, drupal-7, media

我收到此错误

DatabaseSchemaObjectExistsException：表 file_display 已存在。在 DatabaseSchema->createTable() 中（C:\xampp\htdocs\xyz\includes\database\schema.inc 的第 657 行）。

同时启用 Emfield、Media Youtube 和媒体模块。谁能告诉我为什么我会收到这个错误

提前致谢

# mongodb - 如何使用 mongodb 计算附加属性的比率？

> ID：13133598
> 
> 赞同：0
> 
> 时间：2012-10-30T06:11:40.840
> 
> 标签：mongodb, mapreduce, aggregation-framework

使用示例 mongodb 聚合集合 (http://media.mongodb.org/zips.json)，我想输出加利福尼亚每个城市的人口份额。

在 SQL 中，它可能如下所示：

```
SELECT city, population/SUM(population) as poppct
FROM (
    SELECT city, SUM(population) as population
    FROM zipcodes
    WHERE state='CA'
    GROUP BY city
) agg group by state; 
```

这可以使用 mongodb map/reduce 来完成：

```
db.runCommand({
   mapreduce : "zipcodes"
   , out : { inline : 1}
   , query : {state: "CA"}
   , map : function() { 
       emit(this.city, this.pop); 
       cache.totalpop = cache.totalpop || 0; 
       cache.totalpop += this.pop; 
     }
   , reduce : function(key, values) {
       var pop = 0;
       values.forEach(function(value) {
          if (value && typeof value == 'number' && value > 0) pop += value;
       });
       return pop;
     }
   , finalize: function(key, reduced) {
       return reduced/cache.totalpop;
     }
   , scope: { cache: { } }
}); 
```

这也可以使用新的聚合框架（v2.2）来实现吗？这将需要某种形式的全局范围，如 map/reduce 情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:49:20.140

你可以试试：

```
db.zipcodes.group( { key: { state:1 } , 
                  reduce: function(curr, result) { 
                              result.total += curr.pop; 
                              result.city.push( { _id: curr.city, pop: curr.pop } ); }, 
                 initial: { total: 0, city:[] }, 
                 finalize: function (result) {
                              for (var idx in result.city ) {
                                 result.city[idx].ratio = result.city[idx].pop/result.total;
                               } 

                              } } ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:37:20.310

这就是你所追求的吗？

```
db.zipcodes.remove();
db.zipcodes.insert([
    { city:"birmingham", population:1500000, state:"AL" },
    { city:"London", population:10000, state:"ON" },
    { city:"New York", population:1000, state:"NY" },
    { city:"Denver", population:100, state:"CO" },
    { city:"Los Angeles", population:1000000, state:"CA" },
    { city:"San Francisco", population:2000000, state:"CA" },
]);

db.zipcodes.runCommand("aggregate", { pipeline: [
    { $match: { state: "CA" } }, // WHERE state='CA'
    { $group: {
        _id: "$city",            // GROUP BY city
        population: { $sum: "$population" }, // SUM(population) as population
    }},
]}); 
```

生产

```
{
    "result" : [
            {
                "_id" : "San Francisco",
                "population" : 2000000
            },
            {
                "_id" : "Los Angeles",
                "population" : 1000000
            }
    ],
    "ok" : 1
} 
```

# mysql - 查询表中名称和数字之间的重复项

> ID：13133599
> 
> 赞同：2
> 
> 时间：2012-10-30T06:11:46.103
> 
> 标签：mysql, sql

```
SELECT count(*), lower(name), number
FROM   tbl
GROUP  BY lower(name), number
HAVING count(*) > 1; 
```

输入tb1

```
slno name number
1    aaa   111
2    Aaa   111
3    abb   221
4    Abb   121
5    cca   131
6    cca   141
7    abc   222
8    cse   222 
```

此查询只能找到号码和名称相同的重复项，但无法找到第 3 行和第 4 行的重复项！！！

```
 SELECT count(*), lower(name)
    FROM   tbl
    GROUP  BY lower(name)
    HAVING count(lower(name)) > 1 
```

此查询可以找到名称中的所有重复项！！！它完美无缺

```
 SELECT count(*), number
    FROM   tbl
    GROUP  BY number
    HAVING count(number) > 1 
```

这个查询可以找到所有重复的数字！！！它完美无缺

我想要一个查询，它可以找到名称和数字中的所有重复项，名称是否由小写和大写组成

```
output
name number count
2    111     aaa
2    ---     abb
2    ---     cca
2    222     --- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:14:21.050

### 更新的问题

“在数字和名称上重复” ...“名称和数字作为不同的列”
行可以在这里计算两次！

```
SELECT lower(name), NULL AS number, count(*) AS ct
FROM   tbl
GROUP  BY lower(name)
HAVING count(*) > 1

UNION  ALL
SELECT NULL, number, count(*) AS ct
FROM   tbl
GROUP  BY number
HAVING count(*) > 1; 
```

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!2/85a7b/1)

### 原始问题

问题是查询分组

```
GROUP  BY lower(name), number 
```

由于第 3 行和第 4 行具有*不同* `number`的 ，因此对于此查询，它们并不相同。

如果您想忽略此查询的不同数字，请尝试以下操作：

```
SELECT lower(name)
     , count(*) AS ct
FROM   tbl
GROUP  BY lower(name)
HAVING count(*) > 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:23:40.637

通过一些工作，我们可以在一个列中显示两者`name`的计数：`number`

```
select NameOrNumber, count(*) as Count
from (
    select name as NameOrNumber from tb1
    union all
    select number from tb1
) a
group by NameOrNumber
having count(NameOrNumber) > 1 
```

[SQL 小提琴示例 #1](http://sqlfiddle.com/#!2/77c41/5)

**输出#1：**

```
| NAMEORNUMBER | COUNT |
------------------------
|          111 |     2 |
|          aaa |     2 |
|          abb |     2 |
|          cca |     2 | 
```

如果您希望在单独的列中输出，您可以执行以下操作：

```
select distinct if(t1.name = t2.name, t1.name, null) as DUPLICATE_Name,
    if(t1.number = t2.number, t1.number, null) as DUPLICATE_Number
from tb1 t1
inner join tb1 t2 on (t1.name = t2.name or t1.number = t2.number)
    and t1.slno <> t2.slno 
```

[SQL 小提琴示例 #2](http://sqlfiddle.com/#!2/77c41/13)

**输出#2：**

```
| DUPLICATE_NAME | DUPLICATE_NUMBER |
-------------------------------------
|            Aaa |              111 |
|            Abb |           (null) |
|            cca |           (null) | 
```

# javascript - 值未正确传递给 onClick 函数

> ID：13133604
> 
> 赞同：0
> 
> 时间：2012-10-30T06:12:26.977
> 
> 标签：javascript, dom-events, function-call

```
gameDesign = {          

              makeSeats: function( num ) {  //num = number of seats 

                        var seats = [];
                        var seat;

                        var seatWidth = 20;
                        var seatHeight = 20;
                        var total = 100;

                        for( var i=1; i<= num; i++ ) {

                            seat = $('<div id="seat_'+i+'" class="seats"><div id="index_'+i+'" style="height:100%; width:100%;"><div style="height:100%; width:100%;">Sit Here</div></div></div>');

                            seat.children(":first").children(":first").click( function(event, i){ 
                                                                                                    var tim = i;
                                                                                                    gameDesign.sitOnIndexNo( tim ); });

                },

               sitOnIndexNo: function( seatIndex ) {

                       tableFunc.makePlayerSit( RummyGlobal.myInfo.get_jid(), seatIndex );
               }

        } 
```

问题：单击“坐在这里”时，索引值被传递为未定义..我知道这与闭包有关..但是，我需要进一步的解释和解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:23:04.980

首先，您已声明“click”事件处理程序以接受“i”参数作为第二个参数。但是，jquery 参数只通过单个事件对象作为第一个参数传递给 eventHandler。这意味着，当您将 'tim' 指定为 'i' 时，它会出现 undefined。

其次，在改变这个之后，如果你再次运行你的代码，你会得到'tim'等于'num'+1，因为被引用的'i'属于'makeSeats'函数范围，并且不作为函数的一部分存储。

你想要的是这样的：

```
for(var i = 0; i <= num; i++){
    $('.foo').click({i:i}, function(e){
        gameDesign.sitOnIndexNo(e.data.i);
    });
} 
```

[可以在此处](http://jqapi.com/#p=event.data)找到有关 eventHandler 过去的“数据”属性的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:27:29.133

```
function(event, i){ ... 
```

期望`i`作为它的第二个参数，并且它的`i`身体内部的任何东西都与它的身体外部的任何东西无关`i`。

jQuery 只将一个参数传递给它调用的事件处理程序——事件。此外，它将目标元素作为`this`. 这意味着第二个参数总是`undefined`。

如果你这样做：

```
for(var i=0; i<num; i++){
   var seat = $("...");
   seat.find("...").click(function(e){
     gameDesign.sitOnIndexNo(i)
   )
} 
```

你在变量 i 的值改变后访问它。您可以创建一个自调用函数来捕获 i 的值：

```
for(var i=0; i<num; i++){
   var seat = $("...");
   var handler = (function(i){
     return function(event){
       gameDesign.sitOnIndexNo(i)
     )
   })(i);
   seat.find("...").click(handler);
} 
```

... 或使用`seat.data`，正如@ClarkPan 所建议的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:42:51.643

你提到“点击”，所以我假设你打算生成所有这些 div 说“坐在这里”。当用户点击“坐在这里”时，函数 sitOnIndexNo 被调用。基于这个假设，这是我的建议：

```
gameDesign = {          
    makeSeats: function( num ) {  //num = number of seats 
        for( var i=1; i<= num; i++ ) {
            $("#id_of_element_where_you_want_to_put_the_div").
            append('<div id="'+i+'" class="seats" style="height:100%; width:100%;">Sit Here</div></div></div>');
        }
    },
    sitOnIndexNo: function( seatIndex ) {
        tableFunc.makePlayerSit( RummyGlobal.myInfo.get_jid(), seatIndex );
    }
}

// Event handler:
$(".seats").live("click", (function(e) {
    var tim = $(this).attr("id");
    gameDesign.sitOnIndexNo(tim);
}); 
```

所以基本上，**makeSeats**函数会生成“Sit Here” div，并且它们的点击事件由新的事件处理程序处理。

# c# - C# SMO-检查表是否已存在于目标服务器

> ID：13133607
> 
> 赞同：3
> 
> 时间：2012-10-30T06:12:37.727
> 
> 标签：c#, smo

我已经编写了一个 C# 代码来使用 SMO 在两个远程服务器之间传输表，我想知道的是无论如何检查表是否已经存在于目标服务器中，具有确切的架构、列名、数据类型、约束和一切。这样我就不必每次都删除现有表并创建新表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:52:26.703

试试这段代码片段：

```
Server srv1 = new Server("<server_location>");
srv1.ConnectionContext.LoginSecure = false;
srv1.ConnectionContext.Login = "<username>";
srv1.ConnectionContext.Password = "<password>";
srv1.ConnectionContext.Connect();
Database sourceDb = srv1.Databases["<database_name>"];
Table sourceTbl = sourceDb.Tables["<table_name>"];

Server srv2 = new Server("<server_location>");
srv2.ConnectionContext.LoginSecure = false;
srv2.ConnectionContext.Login = "<username>";
srv2.ConnectionContext.Password = "<password>";
srv2.ConnectionContext.Connect();
Database destinationDb = srv1.Databases["<database name>"];
Table destinationTbl = sourceDb.Tables["<table_name>"];

var isMatched = CompareTables(sourceTbl, destinationTbl); 
```

**比较方法：**

```
bool CompareTables(Table source, Table destination)
{
    // Column count doesn't match
    if (!source.Columns.Count.Equals(destination.Columns.Count))
        return false;

    // Assuming the order of the Columns are same in both the Tables
    for (int i = 0; i < source.Columns.Count; i++)
        if (!source.Columns[i].Equals(destination.Columns[i]))
            return false;

    // Constraints count doesn't match
    if (!source.Checks.Count.Equals(destination.Checks.Count))
        return false;

    // Assuming the order of the Contraints are same in both the Tables
    for (int i = 0; i < source.Checks.Count; i++)
        if (!source.Checks[i].Equals(destination.Checks[i]))
            return false;

    return true;
} 
```

# c++ - 计算两个四边形相交的方法？

> ID：13133609
> 
> 赞同：3
> 
> 时间：2012-10-30T06:12:53.067
> 
> 标签：c++, math, geometry

> **可能重复：**
> [多边形相交的简单算法](https://stackoverflow.com/questions/2272179/a-simple-algorithm-for-polygon-intersection)

我正在寻找有关如何快速计算两个任意方向的四边形的交集的大纲（没有预设的角角或边长限制）。我*不是*要简单地检查它们是否相交，而是希望得到构成结果相交区域的点。我知道通常多边形相交不是一个微不足道的问题，并且有一些可用的库可以做得很好。

但是由于在这种我只关心四个边的形状的特殊情况下，我想知道是否有一种快速方法可以使用，而无需在我的应用程序中包含整个额外的库。

到目前为止，我想到的是：

1.  在两个形状上相对于彼此运行“多边形中的点”
2.  将每个多边形的每条边彼此相交

上述两个步骤是否最终让我得到了构成结果交叉区域的所有点？有没有更好的使用方法？

如果我能得到构成结果区域的点的正确顺序，那将是*很好的。*这不是强制性的——如果你知道任何聪明/快速的方法来做这件事（凸壳？）我会很感激任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:19:47.677

您没有说明 2 个四边形是否是凸的；如果是，您可以使用正则凸多边形相交算法，例如[http://www.iro.umontreal.ca/~plante/compGeom/algorithm.html](http://www.iro.umontreal.ca/~plante/compGeom/algorithm.html)

据我所知，它不需要任何奇特的数据结构或操作，因此实现起来应该不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:51:06.030

凸多边形的相交相对容易。谷歌一下，SO和其他地方都有很多资源。

并不是所有的四边形都是凸的。两个非凸四边形的相交会导致几个不连贯的多边形，只有它们的点会给你带来很少的好处，但如果这是你需要的，请继续与每对边相交。这将比任何一般方法更容易和更快

即使对于凸形，哑蛮力方法也可能更快。您必须进行一些测试以找出最适合您的方法。

# c - 表格损坏时在 C 中读取 CSV

> ID：13133612
> 
> 赞同：0
> 
> 时间：2012-10-30T06:13:07.057
> 
> 标签：c, csv, file-handling

这是我读取 CSV 文件的 C 代码：

```
#include <stdio.h>
struct record
{long a,b,c;    };

int main(void)
{
    const char filename[] = "b.csv";
    FILE *file = fopen(filename, "r");

    if ( file != NULL )
    {
        char line [ 80 ];
        struct record record [ 50 ];
        size_t count, i = 0;

        while ( i < sizeof record / sizeof *record )
        {
            if ( fgets(line, sizeof line, file) == NULL )
            {
                break;
            }

            if ( sscanf(line, "%ld,%ld,%ld", &record[i].a,&record[i].b,&record[i].c) == 3 )
            {
                ++i;
            }
        }
        fclose(file);

        for ( count = i, i = 0; i < count; ++i )
        {
            printf("record[%lu]: a = %ld b = %ld c = %ld\n",
                (long unsigned)i, record[i].a, record[i].b,record[i].c);
            }
    }
    else
    {
        perror(filename);
    }
    return 0;
} 
```

/* 文件.csv

```
301,36,15
302,88,75 
```

*//*我的输出

```
record[0]: a = 301 b = 36 c = 15
record[1]: a = 302 b = 88 c = 75 
```

*/

我对上面的代码有两个问题..

第一个问题是：/* file.csv

```
 301,,15
 302,88,
 ,,,34 
```

输出应该是

```
record[0]: a = 301 b = 0 c = 15
record[1]: a = 302 b = 88 c = 0
record[2]: a = 0 b = 0 c = 34 
```

第二个问题是它应该读取文件直到“eof”。这里我取 50 作为静态行号值。我应该做些什么改变？

看到我以这种方式更改了代码......

```
 const char* getfield(char* line, int num) {
        const char* tok;
        for (tok = strtok(line, ",");
                tok && *tok;
                tok = strtok(NULL, ",\n"))
        {
            if (!--num)
                return tok;
        }
        return NULL;
    }

    int main()
    {
        FILE* stream = fopen("b.csv", "r");
        char line[1024];
        char *pstr;int num;
         const char* value;

        while (fgets(line, 1024, stream))
        {
            char* tmp = strdup(line);
        //printf("Field 3 would be %s\n", getfield(tmp, 3));    
        value=getfield(tmp, 3);
        num =strtol(value,&pstr,10);
        printf("Field 3 would be %d\n", num);
        // NOTE strtok clobbers tmp
            free(tmp);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:24:17.703

而不是

```
sscanf(line, "%ld,%ld,%ld", &record[i].a,&record[i].b,&record[i].c) 
```

行，您可以使用`strtok_r()`函数（[文档](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok_r.html)）将行拆分为逗号分隔的子字符串。然后在每个子字符串上，要么执行`strtol()`调用（[文档](http://pubs.opengroup.org/onlinepubs/009695399/functions/strtol.html)）以获取其整数值，要么将相应的变量设置为`0`如果它是一个空字符串。

您可以使用检查空字符串

```
if (str[0] == 0) {
    // empty
} 
```

对于读取直到`EOF`，只需检查`fgets()`返回`NULL`并检查`if (feof(file))`- 如果到达文件末尾，`fgets()`设置流的 EOF 指示符`FILE *`，然后返回`NULL`。

# c# - 使用最后一个日期时间获取数据

> ID：13133614
> 
> 赞同：0
> 
> 时间：2012-10-30T06:13:18.873
> 
> 标签：c#, asp.net, sql, sql-server, stored-procedures

我必须在 gridview 中将这些详细信息显示为 Tempname 作为下拉列表中的唯一且关联的日期时间，最后在标签中按名称运行。无法上传表格图片，因为我没有足够的声誉。

```
    私人无效网格加载（）
    {
        数据集 ds = new DataSet();
        ds = Common.LoadingGrid();
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }

    protected void GridView1_RowDataBound（对象发送者，GridViewRowEventArgs e）
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            数据集 ds = new DataSet();
            标签 lblName = e.Row.FindControl("Label1") as Label;
            ds = Common.RunByDate(lblName.Text);
            DropDownList ddl = e.Row.FindControl("DropDownList1") as DropDownList;

            ddl.DataTextField = "运行日期";
            ddl.DataValueField = "运行日期";
            ddl.DataSource = ds;
            ddl.DataBind();
            var items = ddl.Items;
          }           
    }

```

但是我无法在标签中获取 Runby 名称。如何显示它？以下是我的存储过程

```
    从 SV_JobHistoryTable 中选择不同的 TempName

    选择临时名称，运行日期
    FROM SV_JobHistoryTable 其中 TempName=@tempname

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:29:53.803

到目前为止，我所了解的是，您想获得`Unique TempName`with `Lastest RunDate`，您只需要这个查询：

```
SELECT RunByName, MAX(RunDate)
FROM SV_JobHistoryTable  
WHERE TempName = @tempname 
GROUP BY RunByName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:33:09.470

试试这个：

```
SELECT TempName,RunDate,max(Runbyname)
    FROM SV_JobHistoryTable  where TempName=@tempname 
    group by TempName,RunDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:15:42.247

这是你想要的吗？

```
 SELECT TOP 1
         RunByName, RunDate
    FROM 
        SV_JobHistoryTable 
    WHERE 
        TempName = @tempname                    
    ORDER BY 
        RunDate DESC 
```

或者您想记录多个条目？

# javascript - JS中的json对象处理

> ID：13133615
> 
> 赞同：-3
> 
> 时间：2012-10-30T06:13:19.290
> 
> 标签：javascript, json

我给定的 json 对象如下：

```
resultTable = [
    {
        id: "005470021180",
        balance: "0.00",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD",
        entitlements: [

        ]
    },
    {
        id: "005470021288",
        balance: "0.00",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD"
    },
    {
        id: "005470044628",
        balance: "-72,116.01",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD"
    },
    {
        id: "40592000495201",
        accountName: "Business Loan",
        category: "Borrowing",
        cad_balance: "0.00"
    },
    {
        id: "40592000495202",
        accountName: "Business Loan",
        category: "Borrowing",
        cad_balance: "0.00"
    },
    {
        id: "40592000495203",
        accountName: "Business Loan",
        category: "Investing",
        cad_balance: "0.00"
    },
    {
        id: "40592000495204",
        accountName: "Business Loan",
        category: "INVESTING",
        cad_balance: "0.00"
    },
    {
        usd_balance: "1,080.27",
        id: "55300070",
        accountName: "Scotia iTRADE",
        category: "INVESTING",
        cad_balance: "272,166.59"
    }
]; 
```

我需要 JS 中的输出为：

```
resulttable = [
{
    "Banking": {
        id: "005470021180",
        balance: "0.00",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD",
        entitlements: [

        ]
    },
    {
        id: "005470021288",
        balance: "0.00",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD"
    },
    {
        id: "005470044628",
        balance: "-72,116.01",
        accountName: "Money Master",
        category: "Banking",
        currency: "CAD"
    }
},
{
    "Borrowing": {
        id: "40592000495201",
        accountName: "Business Loan",
        category: "Borrowing",
        cad_balance: "0.00"
    },
    {
        id: "40592000495202",
        accountName: "Business Loan",
        category: "Borrowing",
        cad_balance: "0.00"
    }
},
{
    ""INVESTING":{
            {
            id : "40592000495203",
            accountName : "BusinessLoan",
            category : "Investing",
            cad_balance : "0.00"
            },
            {
            id : "40592000495204",
            accountName : "BusinessLoan",
            category : "INVESTING",
            cad_balance : "0.00"
        },
        {
            usd_balance : "1,080.27",
            id : "55300070",
            accountName : "ScotiaiTRADE",
            category : "INVESTING",
            cad_balance : "272,166.59"
        }} ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:39:22.770

Try something like this:

```
function (input)
{
    var output = new Object();
    for(var i = 0, len=input.length; i<len; i++)
    {
        if(typeof output[input[i].category] === 'undefined')
        {
            output[input[i].category] = [];
        }
        output[input[i].category].push(input[i]);
    }
    return output;
} 
```

input would be your starting object, and it returns the output in the structure you want. Or at least what I think you'd wanted.

# ubuntu-12.04 - 编译 daq-1.1.1：找不到 -lipq

> ID：13133617
> 
> 赞同：0
> 
> 时间：2012-10-30T06:13:24.417
> 
> 标签：ubuntu-12.04, snort

我试图在 ubuntu 12.04 32 位中安装 daq-1.1.1 模块

我正在使用语法进行配置：

```
./configure --with-libpcap-includes=/usr/include/libnetfilter_queue --with-libpcap-libraries=/usr/lib 
```

当我尝试使用 makefile 编译 daq-1.1.1 时，遇到以下错误：

```
/usr/bin/ld: cannot find -lipq
collect2: ld returned 1 exit status
make[2]: *** [daq_ipq.la] Error 1
make[2]: Leaving directory `/home/ardi/Downloads/daq-1.1.1/os-daq-modules'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/ardi/Downloads/daq-1.1.1'
make: *** [all] Error 2 
```

我能做些什么来解决这个错误吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:48:37.390

看起来你需要这个包：iptables-dev。

# visual-studio - 启动 EXE 时出现 SidebySideConfiguration 错误

> ID：13133618
> 
> 赞同：1
> 
> 时间：2012-10-30T06:13:34.497
> 
> 标签：visual-studio, side-by-side

在 CommandPrompt 中启动带有参数的 EXE 时遇到并行配置错误。此 EXE 是第三方 EXE，并确保它是有效的。

但它在我的系统中不起作用 - 我错过了什么吗？我在事件日志中使用 sxstrace 来查看详细信息 - 以下是我得到的。我无法解释。

我已经在我的机器上安装了 VS 2012 - 另外还有 VC++2012/2010/2008 可再发行包。

> ================= 开始激活上下文生成。输入参数：Flags = 0 ProcessorArchitecture = x86 CultureFallBacks = en-US;en ManifestPath = C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\Installer.exe AssemblyDirectory = C:\Users\20121011_PR2_1\ Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\ Application Config File = ----------------- INFO: Parsing Manifest File C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress \SourceCode\Soft_BIOS\bin\DvmuInstaller\Installer.exe。信息：清单定义标识为（空）。信息：参考：Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8" 信息：参考：Microsoft.VC90.DebugMFC，processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8" 信息：解析参考 Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type=" win32",版本="9.0.21022.8"。信息：正在解析 ProcessorArchitecture x86 的参考。信息：解决文化中性的参考。信息：应用绑定策略。信息：未找到发布者政策。信息：未找到绑定策略重定向。信息：开始装配探测。信息：未在 WinSxS 中找到程序集。信息：尝试在 C:\windows\assembly\GAC_32\Microsoft.VC90.DebugCRT\9.0.21022.8__1fc8b3b9a1e18e3b\Microsoft.VC90.DebugCRT.DLL 处探测清单。信息：尝试在 C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\Microsoft.VC90.DebugCRT.DLL 处探测清单。信息：尝试在 C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\Microsoft.VC90.DebugCRT.MANIFEST 处探测清单。信息：尝试在 C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\Microsoft.VC90.DebugCRT\Microsoft.VC90.DebugCRT.DLL 处探测清单。信息：尝试在 C:\Users\20121011_PR2_1\Desktop\HotPlugUnplug Stress\SourceCode\Soft_BIOS\bin\DvmuInstaller\Microsoft.VC90.DebugCRT\Microsoft.VC90.DebugCRT.MANIFEST 处探测清单。信息：未找到文化中性的清单。信息：末端装配探测。 **Microsoft.VC90.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="9.0.21022.8"。** 错误：激活上下文生成失败。结束激活上下文生成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T17:39:52.387

可执行文件正在寻找 VC 9.0 通用运行时 (Microsoft.VC90.DebugCRT) 的调试版本。此库不是 Common Runtime 的可再发行包的一部分。我忘记了为什么微软有这个规定。也许这是一个安全或法律问题。

你有三个选择：

1.  请向您提供可执行文件的人以发布模式重新构建可执行文件，以便可执行文件链接到 CRT 的发布版本。那是您从可再发行包安装的版本。
2.  请向您提供可执行文件的人发送 CRT 的 DebugCRT 版本。在 Visual Studio 安装位置中查找 VC 文件夹。然后寻找`redist\Debug_NonRedist\x86`。
3.  使用 C++ 安装 Visual Studio/Visual Studio express。这将在您的机器上安装 CRT 的调试版本。

# wdk - libcmt.lib 删除

> ID：13133619
> 
> 赞同：2
> 
> 时间：2012-10-30T06:13:44.163
> 
> 标签：wdk, prefast

最近我们对我们的云打印模块进行了一些重大的架构更改（即多线程支持）。现在我必须对其运行 PreFast 检查，但是因为我们使用的当前版本的 Visual Studio 2008 没有集成 PreFast 检查支持，所以我必须通过 Windows DDK 来完成。

我正在尝试使用 WDK 构建源代码，但出现此错误。

> 错误 LNK2005：“void _cdecl operator delete(void *)”(?3@YAXPAX@Z) 已在 libcmt.lib (delete.obj) 中定义

我相信`libcpmt.lib`在前一阶段使用的链接器与删除方法的定义相同。源代码还混合了不同模块级别的 c 文件和 cpp 文件。`libcmp.lib`这可能是它首先使用两者的真正原因`libcpmt.lib`吗？

无论如何我可以解决这个问题吗？我真的不需要“正确”的方式。我想要的只是构建源代码，以便我可以运行 PreFast 检查（并不真正关心与链接相关的警告）。如果它对此给出任何 PreFast 警告，我可以暂时跳过它。

# php - php strtotime() 与不同年份的日期混淆

> ID：13133622
> 
> 赞同：6
> 
> 时间：2012-10-30T06:13:49.770
> 
> 标签：php

我正在使用 php 重新格式化日期并将其发布到 mysql。在我通过明年的日期之前，一切都很好。比如`Mon, 14 Jan, 2013`会翻译成`2012-01-16`. 格式是正确的，只是日期不正确，我什至尝试更改我传递的格式，但仍然没有改变。这是它得到的`Mon, 14 Jan, 2013`，这里是处理它的 php：

```
$startdate = $_REQUEST['one'];
$start = date("Y-m-d", strtotime($startdate)); 
```

关于为什么只有在我们进入新的一年甚至过去几年才会发生打嗝的任何线索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T06:24:27.143

[在这里](https://web.archive.org/web/20181123030006/https://secure.php.net/manual/en/datetime.formats.php)查看所有有效格式的列表`strtotime()`。您正在使用的那个不存在。

如果您想`date_create_from_format`改用，方法如下：

```
date_create_from_format("D, d M, Y", "Mon, 14 Jan, 2013") 
```

# sql-server-2008 - SQLException - 连接重置错误

> ID：13133628
> 
> 赞同：0
> 
> 时间：2012-10-30T06:14:40.100
> 
> 标签：sql-server-2008, jdbc

我正在尝试使用 SQLJDBC4 jar 文件和 JDK 1.6 与 SQL Server 2008 R2 建立 jdbc 连接。我正在使用 Netbeans IDE 并添加了 SQLJDBC4 jar 并在服务的“数据库”部分中添加了数据库的路径。代码如下：

```
package connect2;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Connect2 {

    public static void main(String[] args) throws SQLException {

   Connection conn;
        conn = null;
           System.out.println("Done....");

           try
           {

               Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

               conn = DriverManager.getConnection ("jdbc:sqlserver://172.17.39.13\\CRM:1433;databaseName=crm_xchanging","crm_xchanging","Welcome001");
               System.out.println ("Database connection established");

           }
           catch (ClassNotFoundException e)
           {
               System.out.println (e);
           }
           catch (SQLException ex)
           {
               System.out.println(" error");
           }

          finally
         {
             if (conn != null)
              {

                       try{

               Statement st = conn.createStatement();
                ResultSet res = st.executeQuery("SELECT * FROM  usertable");
                System.out.println("User Name: " );
                        while (res.next()) {
                                String employeeName = res.getString("user_name");
                                System.out.println(employeeName);
                                            }
                    conn.close();
    }
                 catch(SQLException ex){
  System.err.println("SQLException information");

  while(ex!=null) {
  System.err.println ("Error msg: " + ex.getMessage());
  System.err.println ("SQLSTATE: " + ex.getSQLState());
  System.err.println ("Error code: " + ex.getErrorCode());
  ex = ex.getNextException(); 
// For drivers that support chained exceptions
  }}

               }
           }

       }

   } 
```

这是我得到的输出：

```
run:
Done....
Database connection established
SQLException information
Error msg: Connection reset
SQLSTATE: 08S01
Error code: 0
BUILD SUCCESSFUL (total time: 1 second) 
```

我认为代码或JDK没有任何错误。我也尝试设置最大编号。SQL Server 的活动连接数为 0（无限）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-18T20:12:49.140

Java 6u29 中引入了一个已知错误，该错误会导致 SSL 失败，特别是 SQL Server 2008 R2。[Atlassian Fisheye 故障排除页面](https://confluence.atlassian.com/fishkb/java-sql-sqlexception-i-o-error-connection-reset-when-connecting-to-an-external-sql-server-2008-database-284365810.html)表明修复不完整。

> Oracle 在 6u30 中提供了一个修复程序，尽管对于至少一个受影响的客户端，甚至 Java 1.7 都没有工作。

在我的开发团队中，我们发现这个错误也会影响 Java 8。Fisheye 文章中的一项建议是使用 JVM 标志禁用 CBC 保护，这也适用于带有 SQL Server 2008 R2 连接的 SSL Java 8 SSL。

`-Djsse.enableCBCProtection=false`

另一个建议是恢复到 Java 1.6.0_24。

# java - Java：如何将 GUI 元素“捆绑”成组并干净地收听多个组？

> ID：13133629
> 
> 赞同：1
> 
> 时间：2012-10-30T06:14:47.697
> 
> 标签：java, swing, enums, actionlistener

我不擅长 GUI 设计。经过深思熟虑、研究和实验，我开发了几个设计理念，但仍然没有一个看起来有效。一种设计有一个 Session 上帝对象在创建时在每个 UI 元素上注册一个侦听器，每个关心任何操作的对象都会在 Session 对象上注册一个侦听器。这看起来简单而强大，因为所有消息传递都通过一个中心位置，因此丢失任何东西的可能性较小。虽然这是蛮力，而且看起来很麻烦且效率低下。

另一种设计试图创建相互对话的对象子组。这避免了巨大的顶级 Session 并且看起来更高效，但也似乎容易出错。

我正在尝试实现一个可重用的框架，在该框架中，我将具有相关目的的按钮分组到工具栏中，并采用分层方法来侦听工具栏执行的操作以及与侦听器相关的操作。到目前为止，我已经做到了：

```
public class EditorToolBar extends JToolBar {
public static enum Command {
    ZOOMIN,
    ZOOMOUT,
    FINER,
    COARSER,
    RESET
}

private ButtonCommandListener       listener = new ButtonCommandListener();
public EditorToolBar() {
    super("Editor Commands");
    JButton button;
    for (final Command cmd : Command.values()) {
        button = new JButton(cmd.toString());
        button.setEnabled(true);
        button.setToolTipText(cmd.toString() + " Command");
        button.setActionCommand(cmd.toString());
        button.addActionListener(listener);
        add(button);
    }
}
public void addActionListener(ActionListener pNewListener) {
    listener.cActionNotifier.addListener(pNewListener);
}
private class ButtonCommandListener implements ActionListener {
    private NotifierImp<ActionListener>         cActionNotifier = new NotifierImp<ActionListener>();
    public void actionPerformed(ActionEvent pEvent) {
        for (ActionListener listener : cActionNotifier) {
            listener.actionPerformed(pEvent);
        }
    }
}
} // class EditorTooBar 
```

和听众实现这样的事情：

```
 public void actionPerformed(ActionEvent pEvent) {
    switch (EditorToolBar.Command.valueOf(pEvent.getActionCommand())) {
        case ZOOMIN:
            // do something
            break;
        case ZOOMOUT:
            // do something
            break;
        case FINER:
            // do something
            break;
        case COARSER:
            // do something
            break;
        case RESET:
            // do something
            break;
        default:
            System.out.println("Unknown EditorToolBar Command: "+pEvent.getActionCommand());
            return;
    } 
```

我可以增强枚举的讲师，使其还包括工具提示文本、图像等。我想重用这个设计，只是用一个不同的枚举来描述其他工具栏。侦听器将使用 ActionEvent.getActionCommand() 和使用 Command.toValue(String) 来区分不同的按钮操作。我希望将其扩展到正在侦听的类的层次结构：超类可以为一种类型的工具栏实现侦听器，而子类通过侦听不同的工具栏类型来添加该侦听器。如果事件不是来自子类感兴趣的工具栏，它可以将事件转发给超类。为了完成这项工作，我需要一种方法来区分一个工具栏和另一个工具栏，但最好不必检查该工具栏上可能出现的每个按钮事件。理想情况下，我想要一个工具栏工厂，并且仅指定一个枚举就足以完全描述一个工具栏。无法对枚举进行子类化增加了这里的挑战。

这是一个有前途的设计模式吗？我还没有在其他地方看到它。有没有更好的方法我应该使用而不是发明劣质的东西？欢迎提供其他选项的链接。

**编辑：**根据 yash ahuja 的回答，我应该澄清一下，当我提到层次结构时，我的意思是类似于处理键绑定的方式（即你有绑定吗？不，那么你的容器有绑定吗？......直到*某人*消费了关键事件）而不是实际的类层次结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:46:23.620

作为封装功能的一种方式，请考虑将[*如何使用工具栏中*](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)讨论的 与如何使用操作中讨论的[*结合*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)`JToolBar`起来。[此处](https://stackoverflow.com/a/11944233/230513)引用的示例导出单个工具栏。相比之下，[此处](https://stackoverflow.com/a/8534162/230513)说明的 导出适用于文本组件当前选择的子类型系列。[](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)*`Action`[](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)*`StyledEditorKit``Action`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:51:20.333

设计非常好，但是如果您创建工具栏的层次结构，那么在单击特定工具栏上的特定按钮的情况下，为该按钮执行的相应操作可能不准确。有时也可以触发多个事件。还有一些工具栏很难确定它们应该属于哪个超类，或者如果它们正在实现来自多个工具栏的功能，您需要 Java 不支持的多重继承。

可能战略模式和工厂模式的结合可以解决这些问题。请重新考虑这一点并设计您的解决方案，对不起，我没有确切的设计或来源来解决您的问题，我只是为您的解决方案提出了我的想法。

问候， 亚什**

# mysql - sql 在链接上注入我插件

> ID：13133630
> 
> 赞同：1
> 
> 时间：2012-10-30T06:14:59.793
> 
> 标签：mysql, sql-injection

我在 firefox 中找到了一个“mysql injection me”插件，这对于找到 mysql injection 来说非常好。

“mysql inject me”插件只测试页面的形式。我可以用它来测试链接上的 mysql 注入吗？

还有什么可以替代的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:53:41.763

您可以使用“sqlmap”进行链接测试

python sqlmap.py -u '要测试的网址'

# jquery - 如何通过单击链接从另一个文件加载内容？

> ID：13133634
> 
> 赞同：2
> 
> 时间：2012-10-30T06:15:26.463
> 
> 标签：jquery, html

我有这段代码可以从另一个文件加载内容

```
$(document).ready(function(){
  $("button").click(function(){
    $("#divA").load("book.html #divB");
  });
});
</script>

<button>Get</button> 
```

这可行，但我需要点击链接而不是按钮

```
<a href="book.html">Get</a> 
```

根据用户评论

我在页面上有另一个链接。只有特定的链接才能加载内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:19:42.307

使用**锚标记**作为选择器并确保停止**默认**操作。

```
$(document).ready(function(e){
  $("a#id").on('click',function(){  // $("a#id")  or $("a.class") to target 
                                    //  specific anchors
    e.preventDefault();
    $("#divA").load("book.html #divB");
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T06:16:40.060

```
$(document).ready(function(){
  $("a").click(function(e){
    e.preventDefault();
    $("#divA").load("book.html #divB");
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T06:16:54.803

只需使用`a`而不是`button`

```
$(document).ready(function(){
  $("a").click(function(e){
    e.preventDefault();
    $("#divA").load("book.html #divB");
  });
}); 
```

具体`a`试试这个

```
$(document).ready(function(){
  $("a#pass_your_id_here").click(function(e){
    e.preventDefault();
    $("#divA").load("book.html #divB");
  });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T06:20:12.603

我想你想加载锚href中的url内容

```
$(document).ready(function(){
  $("a").click(function(e){
    e.preventDefault();
    $("#divA").load($(this).attr("href")+" #divB");
  });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-30T06:19:59.573

我认为这并不难，你可以很容易地做到

```
$(document).ready(function(){
  $("a").click(function(){
    $("#divA").load("book.html #divB");
  });
}); 
```

您也可以分配`id`给您的`a`标签，然后执行此操作

```
<a id="mylink" href="book.html">Get</a>

$(document).ready(function(){
       $("#mylink").click(function(){
       $("#divA").load("book.html #divB");
     });
    }); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-30T06:23:11.407

如果页面上有其他链接，则必须捕获包含链接的 div：

```
$("#divlinkholder a").click(function(){
    $("#divA").load("book.html #divB");
}); 
```

或者你也可以这样做：

```
$("#divlinkholder a:eq(0)").click(function(){
    $("#divA").load("book.html #divB");
}); 
```

:eq 是基于零的索引属性，因此如果您想使用第三个链接加载内容，则索引 0 处的第一个链接将加载内容，然后将其更改为 :eq(2)

# c# - Telerik Grid 动态列名称和值未从数据表中显示

> ID：13133639
> 
> 赞同：1
> 
> 时间：2012-10-30T06:15:39.780
> 
> 标签：c#, c#-4.0, razor, telerik, telerik-grid

我的代码：

```
 @(Html.Telerik().Grid<System.Data.DataRow>()
            .Name("reportsGrid")
                    .ClientEvents(events =>
                    {
                        events.OnDataBinding("onDataBinding");
                    })
                    .DataBinding(dataBinding => dataBinding.Ajax().Select("ReportsGrid", "Reports", new { _query }).Enabled(true))
            .Columns(columns =>
            {
                if (Model != null)
                {
                    foreach (DataColumn column in Model.Columns)
                    {
                        columns.Bound(column.DataType, column.ColumnName);
                    }
                }
            }) 
```

我的控制器代码：

```
[GridAction]
        [HttpPost]
        public ActionResult ReportsGrid(string query)
        {
            var reportService = new ReportService();
            System.Data.DataTable dt = reportService.ExecuteQuery(query);
            if (dt != null)
                return View(new GridModel(sample(dt)));
                //return View(new GridModel { Data = sample(dt) });
            else
                return View(new GridModel { Data = null });
        }

        private IEnumerable<Dictionary<string, Object>> sample(System.Data.DataTable dt)
        {
            List<Dictionary<string, Object>> rows = new List<Dictionary<string, Object>>();
            Dictionary<string, Object> row = new Dictionary<string, Object>();
            foreach (System.Data.DataRow dr in dt.Rows)
            {
                row = new Dictionary<string, Object>();
                foreach (System.Data.DataColumn col in dt.Columns)
                {
                    row.Add(col.ColumnName, dr[col]);
                }
                rows.Add(row);
            }

            return rows.ToList();
        }

        public ActionResult ReportsGrid()
        {
            var reportService = new ReportService();
            //System.Data.DataTable dt = reportService.ExecuteQuery(query);
            return PartialView("ReportsGrid", new System.Data.DataTable());
        } 
```

我的 Telerik Grid 显示为空，没有 Grid Column 名称和值。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:22:25.043

```
public ActionResult ReportsGrid()
{
    var reportService = new ReportService();
    //System.Data.DataTable dt = reportService.ExecuteQuery(query);
    return PartialView("ReportsGrid", new System.Data.DataTable());
} 
```

此控制器方法返回没有任何列的空数据表。所以这段代码：

```
foreach (DataColumn column in Model.Columns)
{
    columns.Bound(column.DataType, column.ColumnName);
} 
```

不会迭代（Model.Columns 为空可枚举）。要解决您的问题，您需要使用列初始化数据表。

如果您有动态数据表，您应该`ActionResult ReportsGrid()`通过另一个查询获取方法中的列列表。

# azure - Azure 模拟器 - 使用 node.js 时，控制台日志写在哪里？

> ID：13133649
> 
> 赞同：2
> 
> 时间：2012-10-30T06:16:31.647
> 
> 标签：azure

我正在使用 Azure 节点 js 模拟器。

从电源外壳，我能够启动：

```
start-AzureEmulator. 
```

在我的 server.js 中，我有：

```
console.log(); 
```

我没有看到这些日志写在 power shell 上。这些控制台日志写在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:47:56.770

默认情况下，日志会写入项目文件夹中的日志文件夹。您还可以通过右键单击模拟器任务栏图标然后查看模拟器 ui 来实时查看日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:56:07.643

我认为您需要使用 Node Inspector (Chrome/Safari/FireFox)

更多这里[“使用 node-inspector 调试 node.js 应用程序，包括在 Windows 上（并使用 ryppi 进行模块）”](http://codebetter.com/glennblock/2011/10/13/using-node-inspector-to-debug-node-js-applications-including-on-windows-and-using-ryppi-for-modules/)

可能还有其他更简单的方法，但这应该可行。

# salesforce - 从 Session Id 和 Server URL 中获取 UserId

> ID：13133651
> 
> 赞同：-2
> 
> 时间：2012-10-30T06:16:44.323
> 
> 标签：salesforce, apex-code, sessionid

我有一个要求，我将在其中获取会话 ID 和服务器 URL（Web 服务方法的参数）。

像这样说：

会话 ID : 00D900000xxxxxx!ARUAQOb4VVoQR1UXlY_Hvuy1DdKdN6nSfnNJKYwPTF9R3tYuA2jzBsWXHIGDQUFL13iebnYSDKKC45H98TzVxxxxxxxxxx

服务器网址： [https ://ap1.salesforce.com/services/Soap/u/12.0/00D900000xxxxxx](https://ap1.salesforce.com/services/Soap/u/12.0/00D900000xxxxxx)

现在我需要从这两个中获取用户 ID（或任何其他用户详细信息）。

提前致谢！！

尼丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:37:16.030

您可以使用具有[GetUserInfo](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_getuserinfo.htm)方法的 SOAP API。调用此方法将返回一个[GetUserInfoResult](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_getuserinfo_getuserinforesult.htm#topic-title)对象，该对象将包含与会话关联的用户 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T09:23:43.077

Adam，GetUserInfo 方法需要我们可以通过调用方法创建的现有连接对象，所以我应用了以下代码，现在一切正常！

> ConnectorConfig 配置 = 新的 ConnectorConfig(); config.setAuthEndpoint("https://login.salesforce.com/services/Soap/c/24.0/"); config.setServiceEndpoint("https://na14.salesforce.com/services/Soap/c/24.0/00DXXXXXXXXXXXX"); config.setSessionId("00DXXXXXXXXXXXX!1AQ4AQO980Fmu25SOFQxxOlQN8zAaHOlnfdk._rZU2Vkf_CV0HJREqKavMLaPg9jtA9N517MNHLdLeF.aVkoZtnk2eu7u.XNn"); 连接=新的企业连接（配置）；GetUserInfoResult userInfo = connection.getUserInfo();

我使用了从查询参数字符串中收到的相同服务器 URL 和 sessionId。

# c - 根据指定的头文件在C中扩展宏

> ID：13133658
> 
> 赞同：1
> 
> 时间：2012-10-30T06:17:26.160
> 
> 标签：c, macros, c-preprocessor

我有一个源文件**foo.c**和一个头文件**bar.h**。我怎样才能`macros`在**bar.h**中展开而不`macros`在其他头文件中展开？

```
$ cat foo.c

#include <stdio.h>
#include "bar.h"

int main()
{
#ifdef BAR_FUNC
    printf("bar func\n");
#else
    printf("foo func\n");
#endif
    return 0;
}

$ cat bar.h

#define BAR_FUNC 1 
```

我想要的是：

```
$ EXPAND_MAGIC foo.c

#include <stdio.h>

int main()
{
    printf("bar func\n");
    return 0;
} 
```

如果我使用``gcc -E`，它也会扩展`<stdio.h>`。但我只想在**bar.h**中扩展宏。gcc 中是否有这样做的选项？如果没有，是否有其他工具可以进行这种预处理？

更新：上面的**foo.c/bar.h**只是一个例子。实际上，我在 bar.h 中定义了数百个宏（请考虑在一个相当大的项目中由 autoconf 生成的 config.h）。我想要的是在超过 10K 的源文件中扩展所有（并且*仅）这些宏。*有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:42:43.800

您可能会查看[此问题](https://stackoverflow.com/questions/525283/is-there-a-c-pre-processor-which-eliminates-ifdef-blocks-based-on-values-define)`sunifdef`的答案中提到的程序。它允许您在命令行上指定宏定义，并适当地消除行。请注意，它不进行宏扩展。`#ifdef`

也就是说，您不应该将这样的工具用于一般开发，但它对于解码或清理多年来与许多未使用`#ifdefs`的 's 混淆的代码非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:00:07.733

不幸的是，proeprocessos 是全有或全无。您可以运行它，它会包含所有请求的文件并扩展所有宏。

但是，您可以通过使用预处理器的条件编译功能来解决它​​：

```
#ifndef INCLUDE_ONLY_BAR
# include <stdio.h>
#endif
#include "bar.h"

int main()
{
#ifdef BAR_FUNC
    printf("bar func\n");
#else
    printf("foo func\n");
#endif
    return 0;
} 
```

您可以这样“编译”它：

```
$ gcc -E -DINCLUDE_ONLY_BAR foo.c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:29:00.530

您可以使用[Eclipse](http://www.eclipse.org/)之类的 IDE 。它禁用未编译的代码部分。您可能无法“准确”看到您想看到的内容，但您可以看到禁用代码和正常代码之间的明显区别。如果您不喜欢使用 GUI，请忽略此选项。

Eclipse 还有助于[扩展宏](http://eclipsebook.in/c-cpp-development/reading-code/macro-expansions/)，这在您有复杂的宏时非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T07:12:41.363

尝试：
正常编译：`gcc -include stdio.h -imacros bar.h foo.c`
编译以仅扩展 bar.h 中的 MACROS：`gcc -E -imacros bar.h foo.c`

# macos - 如何在 Mac OS X 上找到默认邮件客户端？

> ID：13133659
> 
> 赞同：1
> 
> 时间：2012-10-30T06:17:35.790
> 
> 标签：macos, email, applescript, automator, apple-mail

我有一个应用程序，它提供图像作为输出，这些输出将在邮件客户端的新消息中打开[作为附件]。

在 Mac OS X 上，Apple 邮件是默认的邮件客户端。所以我所做的是，编写了一个自动化工作流程，并使用“打开查找器项目”操作在 Mail.app 中打开了输出。

这是我的问题：

如果用户已将“Microsoft Entourage”或“ThunderBird”或任何其他邮件客户端配置为他们的默认邮件客户端，那么我的自动化操作无法在他们配置的邮件应用程序中打开输出。

我有一些想法可以在此链接中查找并启动默认邮件应用程序。

[如何使用 applescript 获取默认邮件客户端？](https://stackoverflow.com/questions/3986512/how-to-i-get-the-default-mail-client-using-applescript)

谁能帮助我如何将输出图像附加到已启动邮件客户端的新邮件消息中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:50:17.550

[作为记录，链接问题](https://stackoverflow.com/questions/3986512/how-to-i-get-the-default-mail-client-using-applescript)中接受的答案是这样的：

```
tell application "System Events"
    try
        value of property list item "LSHandlerRoleAll" of (property list item 1 of property list item "LSHandlers" of property list file (path to preferences as text) & "com.apple.LaunchServices.plist" where value of property list items contains "mailto")
    on error
        "com.apple.mail"
    end try
end tell 
```

你也可以使用`MMac::InternetConfig`：

`VERSIONER_PERL_PREFER_32_BIT=1 perl -MMac::InternetConfig -le 'print +(GetICHelper "mailto")[1]'`

或[DefaultApplication](http://www.hamsoftengineering.com/codeSharing/defaultApplication/defaultApplication.html)：

```
$ ~/bin/DefaultApplication -url mailto:
/Applications/Mail.app 
```

# tfs - TFS 2012 如何使用外部 dll 参考构建解决方案

> ID：13133661
> 
> 赞同：0
> 
> 时间：2012-10-30T06:17:41.323
> 
> 标签：tfs, tfsbuild

我是 TFS 的新手，试图在 TFS 2012 上设置构建。

我的目录结构是

```
Web
   _Common
       thirdparty
          Telerik
             RadControls
                 2011.3.1305.40
                     Bin40 (All Dll's)
       Utilities.NET4.0
          Utilities(VB Project folder)
             All Files & Folders 
             Utilities.vbproj

   FOO(Folder Name which is also application Name)
      1(Custom Versions 1 per client Bases)
          FOO -All Files & Folders 
          FOO.sln
      2(Custom Versions 2 per client Bases)
          FOO
          FOO.sln
      3(Custom Versions 3 per client Bases)
          FOO -All Files & Folders 
          FOO.sln 
```

以下是我的自定义版本 1 的解决方案文件

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
Project("{E24C65DC-7377-472B-9ABA-F184B08FC61A}") = "FOO", "http://localhost/FOO/1/FOO", "{1B4DD106-50B1-44E1-AB1F-E9F175E995F8}"
    ProjectSection(WebsiteProperties) = preProject
        UseIISExpress = "false"
        TargetFrameworkMoniker = ".NETFramework,Version%3Dv4.0"
        ProjectReferences = "{A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}|Agility.Web.Utilities.dll;"
        Debug.AspNetCompiler.VirtualPath = "/FOO/1/FOO"
        Debug.AspNetCompiler.PhysicalPath = "FOO\1\FOO\"
        Debug.AspNetCompiler.TargetPath = "PrecompiledWeb\FOO\1\FOO\"
        Debug.AspNetCompiler.Updateable = "true"
        Debug.AspNetCompiler.ForceOverwrite = "true"
        Debug.AspNetCompiler.FixedNames = "false"
        Debug.AspNetCompiler.Debug = "True"
        Release.AspNetCompiler.VirtualPath = "/FOO/1/FOO"
        Release.AspNetCompiler.PhysicalPath = "FOO\1\FOO\"
        Release.AspNetCompiler.TargetPath = "PrecompiledWeb\FOO\1\FOO\"
        Release.AspNetCompiler.Updateable = "true"
        Release.AspNetCompiler.ForceOverwrite = "true"
        Release.AspNetCompiler.FixedNames = "false"
        Release.AspNetCompiler.Debug = "False"
        SlnRelativePath = "FOO\1\"
    EndProjectSection
EndProject
Project("{F184B08F-C81C-45F6-A57F-F184B08FF28F}") = "Utilities", "..\..\_Common\Utilities-.NET4.0\Utilities\Utilities.vbproj", "{A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}"
EndProject
Global
    GlobalSection(SolutionConfigurationPlatforms) = preSolution
        Debug|Any CPU = Debug|Any CPU
        Release|Any CPU = Release|Any CPU
    EndGlobalSection
    GlobalSection(ProjectConfigurationPlatforms) = postSolution
        {1B4DD106-50B1-44E1-AB1F-E9F175E995F8}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
        {1B4DD106-50B1-44E1-AB1F-E9F175E995F8}.Debug|Any CPU.Build.0 = Debug|Any CPU
        {1B4DD106-50B1-44E1-AB1F-E9F175E995F8}.Release|Any CPU.ActiveCfg = Debug|Any CPU
        {1B4DD106-50B1-44E1-AB1F-E9F175E995F8}.Release|Any CPU.Build.0 = Debug|Any CPU
        {A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
        {A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}.Debug|Any CPU.Build.0 = Debug|Any CPU
        {A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}.Release|Any CPU.ActiveCfg = Release|Any CPU
        {A6EE09B0-8E91-4D7F-A513-4A45A8EF93A8}.Release|Any CPU.Build.0 = Release|Any CPU
    EndGlobalSection
    GlobalSection(SolutionProperties) = preSolution
        HideSolutionNode = FALSE
    EndGlobalSection
EndGlobal 
```

注意事项：

*   本地计算机上的 IIS 设置
    *   FOO = Web 应用程序
    *   实用程序 = 虚拟文件夹

我如何做到这一点：FOO 参考了 Bin40 下的 dll

我已经尝试过实现这一点，但我无法使用默认模板运行它。

谢谢您的帮助。

解决方案 ：

我更新了构建定义。

在工作区中，我映射了工作文件夹

```
 $/Web/Main/_Common: $(SourceDir)\_Common
 $/Web/Main/_Common/thirdparty/Telerik/RadControls/2011.3.1305.40/Bin40:$(SourceDir)\FOO\1\FOO\Bin
 $/Web/Main/FOO/6: $(SourceDir)\FOO\6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:07:46.890

确保文件引用使用项目文件中的相对路径。

此外，请确保您的构建工作区映射正在从您的示例下载整个 Web 根目录。

如果这不起作用，我们需要查看您遇到的错误，以及您如何引用相关 DLL。

# php - 使用前一个文本字段的信息自动填充文本字段

> ID：13133664
> 
> 赞同：0
> 
> 时间：2012-10-30T06:18:09.327
> 
> 标签：php, mysql, ajax, textfield

`jquery`我有一个表单，我在第一个文本字段中使用自动填充。此文本字段称为**"producto1"**。

我想要的是，当用户在**"producto1"**中写入信息时，会自动加载**"marca1"**中的内容，该字段中的内容将从我的数据库中加载。

这是我的代码：

```
<table width="100%" border="0" align="center" cellpadding="5" cellspacing="0">
            <tr>
              <td width="545"><div align="center">
                <input name="producto1" type="text" class="textfield4" id="producto1" value="" size="65" />
              </div></td>
              <td width="385"><div align="center">
                <input name="marca1" type="text" class="textfield5" id="marca1" size="10" maxlength="5" onKeyPress="return handleEnter(event);">
              </div></td>
              <td width="385"><input name="cantidad1" type="text" class="textfield5" id="textfield2" size="10" maxlength="5" onKeyPress="return handleEnter(event);"></td>
            </tr>
</table> 
```

**将在“marca1”**字段中显示的信息将从我的数据库中加载，但我的问题是我不知道如何使用 ajax 自动填充第二个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:27:31.773

```
// JS File
$(document).ready(function(){
   $("#producto1").keyup(function(){
       $.post('/path-to/marca.php', 
              {
                 text: $(this).val()
              },
              function(data) {
                  $('#marca1').val(data.returns);
              }, 
              'json');
   });
});

// PHP File

$sql = $mysqli->query("SELECT marca_name 
                      FROM marca 
                      WHERE marca_name 
                      LIKE '%" . $mysql->real_escape_string($_POST['text']) . "%'");
while($row = $sql->fetch_assoc($sql))
   $returns[] = $row['marca_name'];

echo json_encode("returns" => implode(",", $returns)); 
```

# sql-server - SQL批量插入通过脚本在服务器之间使用bcp而不使用链接服务器

> ID：13133669
> 
> 赞同：0
> 
> 时间：2012-10-30T06:18:51.547
> 
> 标签：sql-server, copy, bulkinsert, bulk, bcp

通过脚本在服务器之间使用 bcp 进行 SQL 批量插入，而不使用链接服务器。

我正在尝试使用以下查询：

```
bcp AdventureWorks.dbo.BuildVersion out Currency.dat -U sa -P 123456 -c -[cespl-pc130]

bcp AdventureWorks.dbo.BuildVersion in Currency.dat -U sa -P 123456 -c -[cespl-pc83] 
```

我收到以下错误：

> 消息 102，级别 15，状态 1，第 1 行 '.' 附近的语法不正确。

这是正确的做法吗？

解释在服务器之间进行批量数据传输的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:48:29.273

尝试这个：

```
SELECT a.*
FROM OPENROWSET('SQLNCLI', 'Server=Seattle1;Trusted_Connection=yes;',
     'SELECT col1,col2,col3..
      FROM AdventureWorks.dbo.BuildVersion 
      ) AS a; 
```

在这里，您需要提供要从中复制数据的服务器名称。并在目标服务器中运行上述查询。

# objective-c - 如何以编程方式设置 UIButton 的 Highlight Tint 颜色？

> ID：13133673
> 
> 赞同：11
> 
> 时间：2012-10-30T06:19:15.010
> 
> 标签：objective-c, ios, ios5

Interface Builder 中有一个`Highlight Tint`选项用于`UIButton`. 是否可以`UIButton`在 iOS 5 中以编程方式更改它……使用某种外观协议或其他解决方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T06:53:04.457

您可以将其设置为

```
[button setTintColor:[UIColor grayColor]]; 
```

这相当于 IB 中的 hightlight tint 选项，仅适用于高亮状态。

**更新：** 为了为应用程序中的所有按钮实现此功能，请使用以下命令：

```
[[UIButton appearance] setTintColor:[UIColor orangeColor]]; 
```

它将设置`UIButton`您将在应用程序中使用的所有内容。

检查此以获取有关[UIAppearance 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)的更多详细信息。

# mysql - 将转储文件（.dbo 文件）加载到 mariadb 数据库中

> ID：13133676
> 
> 赞同：0
> 
> 时间：2012-10-30T06:19:28.637
> 
> 标签：mysql, dump, mariadb, postgresql-9.2

我有一个`.dbo`文件，我需要将转储文件加载到 mariadb 中。怎么可能？在 MySQL 我试过这样：

`mysql -u root -p dbname -e " source path/test.dbo"`

但同样不适用于 MariaDB。

有什么想法？？？如何在 PostgreSQL 中如此相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:09:31.900

已解决，将 ini 文件中的端口号更改为默认值，现在它可以在 mysql 中使用相同的命令正常工作。我使用的命令是：

> mysql -u root -p sampledb -e "源路径/xxx.dbo"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:01:06.780

与 mysql 相同，只是我们应该使用

```
 mysql -u root -ppassword dbname < test.dbo 
```

[请参阅此处的参考](https://kb.askmonty.org/en/mysqldump/)

如果您遇到任何问题，请告诉我

# javascript - 最佳方法可选设置 jQuery 插件

> ID：13133677
> 
> 赞同：0
> 
> 时间：2012-10-30T06:19:39.277
> 
> 标签：javascript, jquery

拿一个*非常*简单的 jQuery 插件样板：

```
var _defaults = {
  foo: false
};

function Plugin( settings ) {
  this.opts = $.extend( {}, _defaults, settings );
} 
```

我有一个`doSomething`方法，只有在选项`foo`设置为时才能成功运行，并且在某个时候`true`可能还有其他方法，所以我在放置语句的位置上遇到了难题。首先我想：`doSomething()``if`

```
Plugin.prototype = {
  doSomething: function() {
    // Do something that depends on foo
  },
  method: function() {
    ...
    if ( this.opts.foo ) { this.doSomething() }
  },
  method: function() {
    ...
    if ( this.opts.foo ) { this.doSomething() }
  }
}; 
```

但后来为了干燥，我决定这样做：

```
Plugin.prototype = {
  doSomething: function() {
    if ( this.opts.foo ) {
      // Do something that depends on foo
    }
  },
  method: function() {
    ...
    this.doSomething();
  },
  method: function() {
    ...
    this.doSomething();
  }
}; 
```

因此，现在可以利用的方法`doSomething`运行该函数，而不管它是否为空 if `foo`is `false`。

所以我的问题是，什么是更好的方法？第二个更短，但它必须每次都查找该方法，即使它不一定只是为了运行一个空函数。那么第一个效率更高吗？

哦，是的，我知道这可能是微优化，人们会说不用担心，但我只是好奇......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:50:01.560

调用函数将比您的第一种方法效率低下。

看看这里的测试：http: [//geek.michaelgrace.org/2011/02/javascript-performance-hit-calling-function-vs-inline/](http://geek.michaelgrace.org/2011/02/javascript-performance-hit-calling-function-vs-inline/)

他们证实，在某些浏览器上，函数调用的速度可能会慢 50%。你可以自己测试一下。

# image - 如何显示图像以及 OS X 预览？

> ID：13133680
> 
> 赞同：2
> 
> 时间：2012-10-30T06:19:57.997
> 
> 标签：image, macos, nsview, preview, nsimage

我正在尝试在自定义视图中显示 myPhoto.JPG。我通过以下调整 myBox 进行缩放：

[myImage drawInRect:myBox fromRect:NSZeroRect 操作:NSCompositeSourceOver fraction:1.0];

不幸的是，当我放大到足以看到单个像素时，像素边缘是模糊的。相比之下，当我在预览中打开同一张照片时，像素边缘干净而清晰。（此外，预览中的缩放和平移更加流畅。）

对于如何在我的自定义视图中实现预览级别质量的任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:20:28.993

在`drawRect:`替换行

```
[myImage drawInRect:myBox fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0]; 
```

这些行：

```
NSGraphicsContext *currentContext = [NSGraphicsContext currentContext];
NSImageInterpolation currentValue = [currentContext imageInterpolation];
[currentContext setImageInterpolation:NSImageInterpolationNone];
    [myImage drawInRect:myBox fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0];
[currentContext setImageInterpolation:currentValue];   // restore the old value 
```

（请参阅`setImageInterpolation:`in的文档`NSGraphicsContext`）

# excel - 运行宏时的进度条

> ID：13133684
> 
> 赞同：1
> 
> 时间：2012-10-30T06:20:15.180
> 
> 标签：excel, vba

这是一个适用于我工作簿的所有文件的宏 ，如果工作表可见，则在所有工作表上执行宏**换行。**我想显示一个进度条来显示宏运行时的进度..

```
Sub execute()
Application.ScreenUpdating = False
Application.Cursor = xlWait
' makes sure that the statusbar is visible
Application.DisplayStatusBar = True
'add your message to status bar
Application.StatusBar = "Formatting Report..."
userform1.show

    Call Delete_EmptySheets
    Dim WS_Count As Integer
    Dim i As Worksheet

 ' Set WS_Count equal to the number of worksheets in the active
 ' workbook.

 WS_Count = ActiveWorkbook.Worksheets.Count

' Begin the loop.

For Each i In Worksheets
If Not i.Visible = xlSheetVeryHidden Then
  i.Select
  Call wrap
End If
Next i

Application.Cursor = xlDefault
' gives control of the statusbar back to the programme
Application.StatusBar = False
Application.ScreenUpdating = True
End Sub 
```

同样，我使用了带有标签的用户表单，但它仅在宏执行之前或之后**执行**

```
Private Sub UserForm_Activate()
 Call ShowProgressBarWithoutPercentage
End Sub

Sub ShowProgressBarWithoutPercentage()
Dim Percent As Integer
Dim PercentComplete As Single
Dim MaxRow, MaxCol As Integer
Dim iRow, iCol As Integer
MaxRow = 500
MaxCol = 500
Percent = 0
'Initially Set the width of the Label as Zero
UserForm1.Label1.Width = 0
For iRow = 1 To MaxRow
    For iCol = 1 To MaxCol
        Worksheets("Sheet1").Cells(iRow, iCol).Value = iRow * iCol

    Next
    PercentComplete = iRow / MaxRow
    UserForm1.Label1.Width = PercentComplete * UserForm1.Width

Next
Unload UserForm1
End Sub 
```

当宏在后台运行时，有人可以显示一种显示进度条的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:47:27.560

问题可能出在您的`Application.ScreenUpdating = False`. 您可以定期更新屏幕，但这可能会抵消`False`首先将其设置为的好处。状态栏仍然会更新，因此您可以在状态栏上写入如下内容。

```
0%  |
10% |||||| 
```

并在宏运行时更新它。

```
25%  ||||||||||||||
...
50%  ||||||||||||||||||||||||||||
...
100% |||||||||||||||||||||||||||||||||||||||||||||||||||||||| 
```

这是一个例子：

```
Sub StatusBarPercent(Percent As Double)
    Dim i As Long
    Dim Status As String
    Percent = Percent * 100
    Status = "Formatting Report...  " & Percent & "% "
    For i = 0 To Percent
        Status = Status & "|"
    Next
    Application.StatusBar = Status
End Sub 
```

# android - 如何使用 HTTP-reponse-handler 接收 php 响应数组

> ID：13133686
> 
> 赞同：2
> 
> 时间：2012-10-30T06:20:19.353
> 
> 标签：android, httprequest, httpresponse, requesthandler

在我的新 android 程序中，我需要向 PHP 页面发送一个请求并以数组的形式接收响应。为此，我创建了一个包含 http 请求和响应功能的类。它将发送请求并接收一些响应，但我无法打印这些数组，我不知道它是作为数组还是单个字符串出现。任何人都请帮我修复这个错误。这是我的课...

```
public class HistoryActivity extends Activity implements LocationListener{

    String p_u_name;
    HttpPost httppost;
    StringBuffer buffer;
    HttpResponse response;
    HttpClient httpclient;
    List<NameValuePair> nameValuePairs;
    ProgressDialog dialog = null;
    double park_latitude;
    double park_longitude;
    LocationManager locManager;
    HttpEntity entity;
    String rep;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.history);

        SharedPreferences prefs = getSharedPreferences("myprefs", 0);

        p_u_name = prefs.getString("KEY_USERNAME", "");

              System.out.println("your name is"+p_u_name);

                locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,0, this);
                //get the current location (last known location) from the location manager
                Location location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

                if(location!=null)
                {
                park_latitude = location.getLatitude();
                park_longitude = location.getLongitude();
                dialog = ProgressDialog.show(HistoryActivity.this, "", 
                        "Validating user...", true);
                 new Thread(new Runnable() {
                        public void run() {
                            parking();                          
                        }
                      }).start(); 

                }
                else
                {
                    Toast.makeText(HistoryActivity.this,"no location found", Toast.LENGTH_SHORT).show();    
                }

        }
    public void parking(){
         try{  
             httpclient=new DefaultHttpClient();
             httppost= new HttpPost("http://10.0.2.2/test_login/history.php");

             nameValuePairs = new ArrayList<NameValuePair>(2);

             nameValuePairs.add(new BasicNameValuePair("username",p_u_name.trim()));
             nameValuePairs.add(new BasicNameValuePair("park_latitude",Double.toString(park_latitude).trim()));
             nameValuePairs.add(new BasicNameValuePair("park_longitude",Double.toString(park_longitude).trim())); 
             httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
             ResponseHandler<String> responseHandler = new BasicResponseHandler();

             String[] response =new String[2];

             for(int i=0; i<10; i++){
             response [i]= httpclient.execute(httppost, responseHandler);
             System.out.println("Response : " +response[i]); 
             runOnUiThread(new Runnable() {
                 public void run() {

                     dialog.dismiss();
                 }

             });
             }

int d=response.length;

System.out.println(d);

             if(d<1){
                 runOnUiThread(new Runnable() {
                     public void run() {
                         Toast.makeText(HistoryActivity.this,"Successfully parked", Toast.LENGTH_SHORT).show();

                     }
                 });

//               startActivity(new Intent(LoginActivity.this, MainActivity.class));
             }
             else{
                 Toast.makeText(HistoryActivity.this,"Message", Toast.LENGTH_SHORT).show();
                 showAlert();                
             }

         }catch(Exception e){
             dialog.dismiss();
             System.out.println("Exception : " + e.getMessage());
         }
     }
     public void showAlert(){
         HistoryActivity.this.runOnUiThread(new Runnable() {
             public void run() {
                 AlertDialog.Builder builder = new AlertDialog.Builder(HistoryActivity.this);
                 builder.setTitle("Parking Error.");
                 builder.setMessage("Try again?.")  
                        .setCancelable(false)
                        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {
                                Intent r = new Intent(getApplicationContext(),HistoryActivity.class);
                                startActivity(r);
                            }
                        });                     
                 AlertDialog alert = builder.create();
                 alert.show();               
             }
         });

     }
    public void onLocationChanged(Location arg0) {
        // TODO Auto-generated method stub

    }
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:42:50.840

尝试更改本地主机的地址。我没有看到任何其他错误。

# java - 添加另一个对象时出现 java.util.ConcurrentModificationException

> ID：13133688
> 
> 赞同：10
> 
> 时间：2012-10-30T06:20:38.693
> 
> 标签：java

我在这个例外上受苦。我的代码有什么问题？我只想将 Person 的重复名称分开`ArrayList`

```
public class GlennTestMain
{

    static ArrayList<Person> ps;

    static ArrayList<Person> duplicates;
    public static void main(String[] args)
    {
        ps = new ArrayList<GlennTestMain.Person>();

        duplicates = new ArrayList<GlennTestMain.Person>();

        noDuplicate(new Person("Glenn", 123));
        noDuplicate(new Person("Glenn", 423));
        noDuplicate(new Person("Joe", 1423)); // error here

        System.out.println(ps.size());
        System.out.println(duplicates.size());
    }

    public static void noDuplicate(Person p1)
    {
        if(ps.size() != 0)
        {
            for(Person p : ps)
            {
                if(p.name.equals(p1.name))
                {
                    duplicates.add(p1);
                }
                else
                {
                    ps.add(p1);
                }
            }
        }
        else
        {
            ps.add(p1);
        }
    }

    static class Person
    {
        public Person(String n, int num)
        {
            this.name = n;
            this.age = num;
        }
        String name;
        int age;
    }

} 
```

这是堆栈跟踪

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.ArrayList$Itr.checkForComodification(Unknown Source)
at java.util.ArrayList$Itr.next(Unknown Source)
at hk.com.GlennTestMain.noDuplicate(GlennTestMain.java:41)
at hk.com.GlennTestMain.main(GlennTestMain.java:30) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T06:24:37.657

您无法修改`collection`您正在迭代的内容。那可能会抛出一个`ConcurrentModificationException`. 虽然有时它可能会起作用，但不能保证每次都起作用。

如果您想在列表中添加或删除某些内容，您需要使用`Iterator`, 或`ListIterator`作为您的列表。并使用[`ListIterator#add`](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html#add(E))方法在您的列表中添加任何内容。即使在您的`iterator`, 如果您尝试使用`List.add`or `List.remove`，您也会得到该异常，因为这没有任何区别。您应该使用`iterator`.

请参阅这些帖子以了解如何使用它：-

*   [Java：迭代列表时出现 ConcurrentModificationException](https://stackoverflow.com/questions/6596673/java-concurrentmodificationexception-while-iterating-over-list)
*   [遍历集合，在循环中删除时避免 ConcurrentModificationException](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T06:30:35.173

## 原因？

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)返回的迭代器本质上是`fail-fast`。

> 这个类的迭代器和`listIterator`方法返回的迭代器是`fail-fas`t：如果在迭代器创建后的任何时候列表在结构上被修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出一个`ConcurrentModificationException`. 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

## 当我不使用它时，这个迭代器从哪里来？

对于集合的增强 for 循环被使用，因此您在迭代时`Iterator`不能调用方法。`add`

所以你的循环与下面相同

```
for (Iterator<Entry> i = c.iterator(); i.hasNext(); ){ 
```

## 那么解决方案是什么？

[`iterator.add();`](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#add%28E%29)您可以基于迭代器显式而不是隐式调用和更改循环。

```
 String inputWord = "john";
    ArrayList<String> wordlist = new ArrayList<String>();
    wordlist.add("rambo");
    wordlist.add("john");
    for (ListIterator<String> iterator = wordlist.listIterator(); iterator
            .hasNext();) {
        String z = iterator.next();
        if (z.equals(inputWord)) {
            iterator.add("3");
        }
    }
    System.out.println(wordlist.size()); 
```

## 现在我在哪里可以阅读更多内容？

1.  [For-Each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
2.  [数组列表 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:29:24.307

会计。到[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)：

> 如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。

您在`Person`使用[增强型 For 循环](https://stackoverflow.com/questions/11685305/what-is-the-syntax-of-enhanced-for-loop-in-java)迭代对象时很想添加对象。

您可以进行以下修改：

```
boolean duplicateFound = false;
for(Person p : ps)
{
    if(p.name.equals(p1.name))
    {
        duplicates.add(p1);
        duplicateFound = true;
    }
}

if( ! duplicateFound)
{
    ps.add(p1);
} 
```

# android - 带有自定义对话框的 ListView

> ID：13133689
> 
> 赞同：0
> 
> 时间：2012-10-30T06:20:47.930
> 
> 标签：android, listview, customdialog

我已经编写了从数据库中获取结果的代码，该数据库已成功绑定到列表视图。但是现在我想要自定义对话框格式的列表视图。意味着列表数据应该出现在对话框中。如何将列表数据附加到自定义对话框?

```
final Cursor cursor = dbHelper.fetchAllRecords();
        String[] columns = new String[] {
                RecordsDbAdapter.KEY_NAME,
                RecordsDbAdapter.KEY_BIRTHDAY,

        };
        int[] to = new int[] {
                R.id.name,
                R.id.birthdate,
        };
        dataAdapter = new SimpleCursorAdapter(
                this, R.layout.row,
                cursor,
                columns,
                to);
        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:24:59.217

您可以将适配器绑定到`AlertDialog`：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setAdapter(dataAdapter, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {

        // Stuff that happens when an item is clicked
    }
});
builder.show(); 
```

# iphone - 如何在 iPhone 上激活 UIPopoverControl？

> ID：13133691
> 
> 赞同：1
> 
> 时间：2012-10-30T06:21:09.380
> 
> 标签：iphone, uipopovercontroller, popover

我已经在 iPhone 应用程序上多次看到此功能（例如在 Bat、Garageband 等），我只是想知道如何在无需构建自己的类的情况下为 iPhone 激活该功能。

我看过一个简单的 YouTube 视频，但按照所描述的步骤也没有多大帮助......

为了清楚起见，我希望有一些示例代码或关于如何将 UIPopoverControl 移植到 iPhone 的简单说明。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T06:28:59.643

嗨，对于 iPhone 中的 PopoverView，请使用带有自定义 PopUpView 的波纹管演示。

1.  [SNP弹出](https://github.com/sonsongithub/PopupView)
2.  [WEP弹出](https://github.com/werner77/WEPopover)
3.  [海玻璃](https://github.com/KJoyner/SeaGlass)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:27:23.657

您可能需要[WEPopover](https://github.com/werner77/WEPopover)。使用起来并不难。

# .net - 通过 Windows 服务在 BigQuery 表中插入记录

> ID：13133693
> 
> 赞同：0
> 
> 时间：2012-10-30T06:21:10.813
> 
> 标签：.net, sql-server, c#-4.0, windows-services, google-bigquery

我创建了一个 Windows 服务，它使用服务帐户授权与 Google BigQuery API 完美通信。出于测试目的，我能够从 BigQuery 表中获取数据，以检查我的 Windows 服务和 BigQuery API 之间的通信。但是这个服务基本上会从 MSSQL 服务器获取记录，然后在 BigQuery 中的目标表中插入或追加一条记录。我不想使用 CSV 或 JSON 文件作为数据源。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:14:47.923

不可以，您必须使用 CSV 或 JSON 作为源格式才能将数据加载到 BigQuery。

BigQuery 目前支持批量提取模型，而不是记录级模型。每日导入配额为每张表 1,000 个导入作业，整个项目总计 10,000 个导入作业。

我建议您每隔一段时间（可能每小时）从 MSSQL 服务器导出数据，将输出缓存在 CSV 或 JSON 文件中，然后在 MSSQL 导出步骤完成后启动 BigQuery 摄取作业。

# java - IncompatibleClassChangeError 与 Eclipse 码头

> ID：13133695
> 
> 赞同：2
> 
> 时间：2012-10-30T06:21:26.177
> 
> 标签：java, jetty, incompatibility

当我尝试构建使用 Eclipse Jetty 库的项目时出现以下错误

```
java.lang.IncompatibleClassChangeError: 
  class org.eclipse.jetty.server.AbstractConnector has interface 
  org.eclipse.jetty.http.HttpBuffers as super class 
```

我正在使用的特定 Eclipse Jetty 库是：

```
'org.eclipse.jetty:jetty-websocket:8.1.7.v20120910',
'org.eclipse.jetty:jetty-client:8.1.7.v20120910' 
```

错误的原因是什么，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:00:50.100

有一个`camel-jetty`依赖项，我们将其替换为相关的`eclipse-jetty`依赖项。这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:30:57.183

看起来您在依赖方面还有其他东西，或者某些类加载器正在发生一些非常奇怪的事情，您如何使用它，某种嵌入式使用？

# regex - 正则表达式获取两个单词之间的单词，这些单词应该只能使用一次

> ID：13133696
> 
> 赞同：1
> 
> 时间：2012-10-30T06:21:28.247
> 
> 标签：regex

对于所有示例都需要“编程”作为输出

示例 1：这是一个编程测试。
正则表达式 : a+\sprogramming -- 工作

示例 2：这是一个测试编程。这是一个编程测试正则
表达式：a+\s(?!test)\sprogramming -- 工作

示例 3：这是一个测试编程。这是一个基本的编程测试
REGEX：a+\s(?!test)(.+)\sprogramming -- 不工作

实际 O/P : 一个基本的编程
预期的 O/P : 一个编程

也就是说，只需要打印一次'a'。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:35:46.090

这是你想要的？

```
REGEX : .*(a programming).* 
```

预期的 O/p：

```
1.9.3p194 :001 > "This is a test programming. This is a basic a programming test ".match(/.*(a programming).*/)
 => #<MatchData "This is a test programming. This is a basic a programming test " 1:"a programming"> 
1.9.3p194 :002 > "This is a programming test. ".match(/.*(a programming).*/) => #<MatchData "This is a programming test. " 1:"a programming"> 
1.9.3p194 :003 > "This is a test programming. This is a programming test ".match(/.*(a programming).*/)
 => #<MatchData "This is a test programming. This is a programming test " 1:"a programming"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:37:46.813

I'm not sure I understand your question.

If you're looking to match a word between two words, such as "a" and "test", then you do this:

```
a\s+(\S+)\s+test 
```

(The `\S` with a capital "S" matches *non*-whitespace characters.)

If you want only the *last* such instance, then:

```
a\s+(\S+)\s+test(?!.*a\s+(\S+)\s+test) 
```

(Notice what's inside the negative lookahead assertion is a copy of the part outside.)

In addition, you would want to use word boundaries, *e.g.*

```
\ba\s+(\S+)\s+test\b(?!.*\ba\s+(\S+)\s+test\b) 
```

# javascript - jQuery - 动态更改具有相同 id 标签类名的元素

> ID：13133700
> 
> 赞同：2
> 
> 时间：2012-10-30T06:21:45.350
> 
> 标签：javascript, jquery, html, css, dynamic

我有这样的结构

```
 <div class="dynamic" id="thumbnail-div">
            <p id="thumbnail-p">
                <a href="#">
                    <img src="images/circle.GIF" alt="Example Number 1 For Display Case" name="Example Number 1 For Display Case" class="dynamic" id="thumbnail-img" />
                </a>
            </p>
        </div> 
```

上面有多个该 html 结构，因此可能有 10、20、50 等。现在我要做的是让 jQuery 将类更改为 ID 为“thumbnail-div”的所有元素，例如thumb1、thumb2、thumb3 等。所以它们应该根据有多少来计数。我找不到实现这一目标的方法，经过大量研究，我发现没有任何帮助。请帮忙。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:26:26.487

您的页面上似乎有重复**的 ID** ..

恐怕如果您尝试使用 ID 访问这些元素，它只会检索`the first element with that ID`..

假设你在 Question 中的所有 div 都有 .dynamic 类。然后你可以做这样的事情

```
$('div.dynamic').each(function(i){

     $(this).addClass('thumb' + (i+1));   // Add Class
     $(this).attr('id' , 'thumb' + (i+1));  // Set id for each div 
}); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/9uW2V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:32:37.220

首先，您不应该在页面上有任何重复的 id，因此您应该将它们全部更改为类，以便它们应该是`<di class = "dynamic thumbnail-div">`，然后 jQuery 将它们全部放在页面上，然后遍历并删除缩略图的类名- div 并将其更改为 thumb1 thumb2 等将类似于

```
$('.thumbnail-div').each(function(index) {
    $(this).removeClass('thumbnail-div');
    $(this).addClass('thumb' + index);
} 
```

我很确定这应该可行。如果您想删除类名然后添加一个 id，因为现在它们都是唯一的，您可以使用`$(this).attr('id', 'thumb' + index);`而不是 .addClass 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:34:16.633

您不能使用具有重复的元素`id`。

假设你使用`thumbnail-div`as `class`，`divs`那么你可能可以这样做

```
$(".thumbnail-div").each(function(index){
    $(this).addClass('thumb'+(index+1)); 
    // or set id $(this).attr('id' , 'thumb' + (index+1)); 
    alert($(this).attr('class'));
});​ 
```

**[现场样品](http://jsfiddle.net/zSUsQ/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:38:08.093

答案在这里[http://jsfiddle.net/A9SfJ/](http://jsfiddle.net/A9SfJ/)

```
$('.dynamic').addClass('thumb1').removeClass('dynamic'); 
```

# php - 从另一个站点下载文件并添加到 zip

> ID：13133705
> 
> 赞同：3
> 
> 时间：2012-10-30T06:22:16.410
> 
> 标签：php, zip

在另一个网站上托管了一些 csv 文件，我正在尝试检索它们并将它们打包成一个 zip 文件以供下载。压缩似乎有效，但包裹总是空的。非常感谢任何帮助......顺便说一下，这是在 PHP 中。

```
<?php

$zip = new ZipArchive();
$filename = "test114.zip";
$numParts = count($file_names);
if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) 
{
    exit("cannot open <$filename>\n");
}

$file="http://ichart.finance.yahoo.com/table.csv?s=YHOO&d=9&e=25&f=2012&g=d&a=0&b=3&c=2000&ignore=.csv"; 
$filedata = fopen ($file, "r"); 
$contents = fread($filedata, filesize($file)); 
$zip->addFile($filedata, "file1");
fclose($filedata);  

$zip->close();
header('Content-Type: application/zip');
header("Content-Disposition: attachment; filename=\"".$filename."\".zip;");
header('Content-Length: ' . filesize($filename));
readfile($filename);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:24:42.113

试试这个并确保您在当前工作目录中具有写入权限

```
<?php

$zip = new ZipArchive();
$filename = "test114.zip";

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) 
{
    exit("cannot open <$filename>\n");
}

$file="http://ichart.finance.yahoo.com/table.csv?s=YHOO&d=9&e=25&f=2012&g=d&a=0&b=3&c=2000&ignore=.csv"; 
$filedata = file_get_contents($file);
$zip->addFromString( "file1", $filedata);
$zip->close();

$path = getcwd()."/".$filename;

header("Content-Transfer-Encoding: Binary ");
header('Content-Type: application/zip');
header("Content-Disposition: attachment; filename=$filename");
header('Content-Length: ' . filesize($filename));
readfile($path);

unlink($filename);

exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:49:02.027

尝试从此行中删除扩展名：

```
header("Content-Disposition: attachment; filename=\"".$filename."\";"); 
```

您已经在第二行（代码）设置了文件扩展名。

# django - Django 高级过滤

> ID：13133707
> 
> 赞同：1
> 
> 时间：2012-10-30T06:22:19.607
> 
> 标签：django, view, filter, django-queryset

我可以根据模型字段的选择过滤查询集吗？

模型：

```
COLORS = (
    ('BLACK', 'black'),
    ('RED', 'red'),
    ('BLUE', 'blue'),
    //etc..
)

class Thing(Models.model):
    color = models.CharField(max_length=5, choices=COLORS) 
```

看法：

```
def filter_by_color(request):
    q = Thing.objects.filter(???) 
```

有没有办法`Thing`根据不同的颜色选择进行过滤？此外，有没有办法动态地编写它，以便所有颜色选择都可以响应单个视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:58:10.827

您应该查看[Q](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)对象。这可以帮助您根据用户选择过滤的颜色构建复杂的 OR 查询。

**更新**添加一个例子。

假设您要过滤一种以上的颜色：

```
from django.db.models import Q

def filter_by_color(request):

    q = Thing.objects.filter(Q(color="BLACK") | Q(color="RED)) 
```

**更新 2**如果用户使用复选框或类似选项选择颜色，您可以使用以下方法：

```
def filter_by_color(request):
    selected_colors = request.GET.getlist('colors')

    q = Thing.objects.filter(color__in=selected_colors) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:47:32.273

你想要这个吗？

看法

```
def filter_by_color(request, color):
     q = Thing.objects.filter(color=color) 
```

因此，当您访问时， `http://yoursite/thisview/black`您将获得`Thing`黑色的 s，而当您访问时，`http://yoursite/thisview/red`您将获得`Thing`红色的 s。

# iphone - 如何在 iOS 应用中实现一个永远存在的按钮？

> ID：13133709
> 
> 赞同：0
> 
> 时间：2012-10-30T06:22:19.170
> 
> 标签：iphone, ios

我需要在应用程序上实现一个按钮，该按钮应该始终出现在应用程序的所有屏幕上。这意味着按钮将始终位于顶层，无论应用程序在其视图之间切换。按钮的功能是在运行主应用程序时随时调用特定模块。按钮也应该能够移动。如果您对此有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:25:55.957

立即将按钮作为子视图添加到应用程序的窗口中

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:37:51.867

将您的按钮作为窗口的子视图，使用此[UIView+Hierarchy 类别](http://www.touch-code-magazine.com/uivewi-category-to-manage-z-order-of-views/)，您可以实现您的目标。

# java - 泛型超级与扩展

> ID：13133714
> 
> 赞同：4
> 
> 时间：2012-10-30T06:22:56.883
> 
> 标签：java, generics, scjp, generic-type-argument

就在我以为我终于理解了泛型的时候，我遇到了下面的例子：

```
public class Organic<E> {
          void react(E e) { }
          static void main(String[] args) {
            //1: Organic<? extends Organic> compound = new Aliphatic<Organic>(); 
            //2: Organic<? super Aliphatic> compound = new Aliphatic<Organic>(); 
           compound.react(new Organic());
           compound.react(new Aliphatic());
           compound.react(new Hexane());
 } }
 class Aliphatic<F> extends Organic<F> { }
 class Hexane<G> extends Aliphatic<G> { } 
```

它说，如果第 1 行未注释，则以下内容将无法编译：

```
 compound.react(new Organic());  
  compound.react(new Aliphatic());  
  compound.react(new Hexane()); 
```

而如果第 2 行未注释，则以下内容将无法编译：

```
compound.react(new Organic()); 
```

在第二个示例中，允许使用脂肪族及其超类型。那么为什么不允许使用脂肪族？

在第一个例子中，为什么`new Organic`不允许？

第一个编译器错误：

```
- The method react(capture#1-of ? extends Organic) in the type Organic<capture#1-of ? extends Organic> is not applicable for the arguments (Organic)
- The method react(capture#2-of ? extends Organic) in the type Organic<capture#2-of ? extends Organic> is not applicable for the arguments (Aliphatic)
- The method react(capture#3-of ? extends Organic) in the type Organic<capture#3-of ? extends Organic> is not applicable for the arguments (Hexane) 
```

第二个编译器错误：

```
- The method react(capture#1-of ? super Aliphatic) in the type Organic<capture#1-of ? super Aliphatic> is not applicable for the arguments  (Organic) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:49:23.823

你的第一个声明

```
Organic<? extends Organic> compound 
```

表示`compound` *可能*是一个`Organic<SomeSubtypeOfHexane>`（因为`Aliphatic`extends `Organic`、`Hexane`extends`Aliphatic`和`SomeSubtypeOfHexane`extends `Hexane`）。

在这种情况下`compound.react(new Organic())`，`compound.react(new Aliphatic())`和`compound.react(new Hexane())`会导致类型错误，因为`E`in`compound`必须是 a `SomeSubtypeOfHexane`（或其子类型）。

* * *

你的第二次声明

```
Organic<? super Aliphatic> compound 
```

意味着这`compount` *可能*是一个`Organic<Aliphatic>`.

在那种情况下`compound.react(new Organic())`会导致类型错误，因为`E`必须是一个`Aliphatic`（或其子类型）。

* * *

请记住，使用`A<? extends B>`or声明变量`A<? super B>`

*   *扩展*了可以分配给它的对象的数量，因此，
*   *限制*可以对变量执行的操作。

由于类的确切类型是未知的（只有一个*约束*是已知的），编译器必须在安全方面犯错，并且不允许某些非协变或逆变的操作。（如果你还不熟悉它，[协变和逆变](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)是这类泛型的科学背景。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-17T18:42:34.277

该主题问题也在其他几个地方进行了讨论，例如：

*   [运行时已知的通用上限通配符实例化](https://stackoverflow.com/q/12898264/4072843)
*   [带有扩展的泛型](https://stackoverflow.com/q/9838460/4072843)
*   [CodeRanch：泛型和通配符的使用](http://www.coderanch.com/t/593881/java-programmer-OCPJP/certification/Generics-wildcard)
*   [CodeRanch：泛型问题](http://www.coderanch.com/t/600073/java/java/Generics)
*   [Oracle：通配符使用指南](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)

这实际上是[Java证书准备](http://www.amazon.de/Programmer-Practice-Exams-310-065-Certification/dp/0072260882)书中的一个问题，来自上次测试（问题34）。准备书是根据[课本](http://www.amazon.de/SCJP-Certified-Programmer-Study-Guide/dp/0071591060/ref=pd_bxgy_14_img_2?ie=UTF8&refRID=1DVR4C1CSV173GKMCF1T)。

即使有了这里和其他链接下的解释以及书中的文字，我也不清楚解决方案，因为这些解释主要基于**List 界面**和阅读，我认为这是一些内部集合特定的解决方案。

但是，如果您在一侧看到**List**接口和**add** -method的定义，在另一侧看到带有**react -method 的****Organic**类，您会注意到它们的定义方式相似。

 **```
public interface List<E> extends Collection<E> {
   ...
   boolean add(E e);
   ...
}

public class Organic<E> {
    ...
    void react(E e) { }
   ...
} 
```

因此，您可以在任何地方找到的基于 List 接口示例的所有解释也适用于该问题。

```
List<? extends String> list1 = new ArrayList<String>();
List<? super String> list2 = new ArrayList<String>();
list1.add(new String()); //The method add(capture#1-of ? extends String) in the type List<capture#1-of ? extends String> is not applicable for the arguments (String) - // compile-time error
list2.add(new Object()); //The method add(capture#2-of ? super String) in the type List<capture#2-of ? super String> is not applicable for the arguments (Object) - // compile-time error 
```

看看这个的解释：

*   [Oracle：通配符使用指南](http://docs.oracle.com/javase/tutorial/java/generics/wildcardGuidelines.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:42:04.207

我认为您误解了您在`react()`方法中设置为参数的内容

尝试改变

```
void react(E e) { } 
```

到

```
void react(Organic<E> e) { } 
```

看看有什么不同。您正在寻找对象：`Organic<E>` `Aliphetic<E>` `Hexane<E>`

不像`Organic<E>`_`E`

也不`Aliphetic<E>`如`E`

也不`Hexane<E>`如`E`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:38:02.627

你做了一些混合。
`Organic<E>`的类型等于`Organic`。
你不能执行
`new Organic());` 你至少必须考虑执行
`new Organic<Object>());` 这只是我能想到的一个编译错误
这当然对你的其他对象实例有效。**

# awk - 从文本文件中查找 AWK 最小值

> ID：13133718
> 
> 赞同：0
> 
> 时间：2012-10-30T06:23:17.257
> 
> 标签：awk

我尝试使用以下代码从文本文件中查找最小值。但它无法正常工作。它返回空白空间作为输出

```
awk 'NR == 1 {line=$0;min = $3} NR>1 && $3 < min {line = $0;min= $3} END {print line}' snd1 
```

我的文本文件 snd1.txt 包含以下值

```
0 1 111
0 2 200
0 3 50 
```

但它会为以下文本文件 aaa.txt 重新调整正确的输出

```
0 1 141
0 2 223 
```

请帮我。当第三列包含最小值时，我需要第二列值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:35:01.470

这是您正在寻找的变化：

```
awk 'NR == 1 || $3 < min { col = $2; min = $3 } END { print col }' snd1.txt 
```

结果：

```
3 
```

# java - 如何使用 AChatEngine.. 在 PieChart 中设置与标题不同的图例？

> ID：13133720
> 
> 赞同：2
> 
> 时间：2012-10-30T06:23:22.343
> 
> 标签：java, android, pie-chart, achartengine

我正在研究一个`PieChart`需要显示与图表顶部显示的标题不同的图例。但我既找不到任何方法，`CategorySeries`也找不到任何方法`DefaultRenderer`来做同样的事情。默认情况下，它是为`PieChart`.

如何在`achartengine`..中设置与类别图例不同的类别标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:45:10.700

您可以隐藏标签，但不能显示与图例中的标签不同的标签。为此，您必须检查 AChartEngine 源代码并对其进行扩展以支持您需要的功能。

# javascript - javascript中动态创建的按钮中的onclick事件

> ID：13133731
> 
> 赞同：4
> 
> 时间：2012-10-30T06:24:06.883
> 
> 标签：javascript, dynamic, onclick, tablerow

要求：我有一张一行三列的表。第一列有按钮。当我单击该按钮时，应将新行添加到表中，并且当我单击新添加行中的按钮（即动态创建）时，它应进一步添加新行。

只有最后一行按钮应该添加新行，所有以前的按钮都应该更改为删除按钮。

--java脚本函数。

```
<html>

<head runat="server"><TITLE>Add/Remove dynamic rows in HTML table</TITLE>

<SCRIPT language="javascript">

    function addRow(tableID) { 
        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.setAttribute('type','button');
        element1.setAttribute('name','Add Row1');
        element1.setAttribute('value','Add Row');               
        cell1.appendChild(element1);     

        var cell2 = row.insertCell(1);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell2.appendChild(element2);

        var cell3 = row.insertCell(2);
        var element3 = document.createElement("input");
        element3.type = "checkbox";
        cell3.appendChild(element3);

       element1.onclick=addRow(tableID);

    }
</HEAD>

<BODY>

<TABLE id="dataTable" width="250px" border="1">

<TR>

<td><INPUT type="button" value="Add Row" name="Add Row" onclick="addRow('dataTable')"/></td>

<TD><INPUT type="text" /></TD>

<TD><INPUT type="checkbox" name="chk"/></TD>

</TR>

</TABLE>
</BODY>
</html> 
```

当我运行此代码时，我得到一行三列。当我单击第一行中的按钮时.. 它无限地添加行。请帮我获得输出。

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:33:16.230

这段代码不起作用的原因是这部分：

```
element1.onclick=addRow(tableID); 
```

您期望发生的是将“addRow(tableID)”值分配给新创建元素的“onclick”属性。

您实际上正在做的是立即调用“addRow”函数，导致程序无限循环。

解决此问题的最短路径是改用以下内容：

```
element1.setAttribue('onclick','addRow("'+tableID+'")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:28:29.217

那是因为您的函数正在调用自己：

```
**function addRow(tableID) {** 
    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.setAttribute('type','button');
    element1.setAttribute('name','Add Row1');
    element1.setAttribute('value','Add Row');               
    cell1.appendChild(element1);     

    var cell2 = row.insertCell(1);
    var element2 = document.createElement("input");
    element2.type = "text";
    cell2.appendChild(element2);

    var cell3 = row.insertCell(2);
    var element3 = document.createElement("input");
    element3.type = "checkbox";
    cell3.appendChild(element3);

   **element1.onclick=addRow(tableID);**

} 
```

# multithreading - 查找线程信息

> ID：13133732
> 
> 赞同：0
> 
> 时间：2012-10-30T06:24:08.113
> 
> 标签：multithreading, process, procfs

我有一个在我的系统中运行的进程列表以及属于这些进程的线程。我想知道是否有任何方法可以获取有关特定线程的完整信息，例如：优先级、它执行的函数等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:36:04.073

Don't know if this is exactly what you want but I used this for an operating systems class I took last year.

[http://www.addictivetips.com/windows-tips/get-detailed-information-about-process-threads-with-processthreadsview/](http://www.addictivetips.com/windows-tips/get-detailed-information-about-process-threads-with-processthreadsview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:47:16.030

如果您在 Linux 上，您可以从`/proc/<pid>`.

这样做[libproc](http://procps.sourceforge.net/)可能会有所帮助。

# mysql - 使用 Where 子句进行更新

> ID：13133734
> 
> 赞同：0
> 
> 时间：2012-10-30T06:24:13.227
> 
> 标签：mysql

我在下面的查询中运行了这个，它给出了错误：

```
UPDATE t_o
SET t_o.mlm_order_id = mt.order_id 
FROM temp_orders t_o, mlm_transaction mt
WHERE mt.v2_order_id = t_o.order_id 
```

错误是：

```
#1064 - You have an error in your SQL syntax; check the manual 
that corresponds to your MySQL server version for the right syntax to use near
'FROM temp_orders t_o, mlm_transaction mt WHERE mt.v2_order_id = t_o.order_id' 
at line 3 
```

请帮忙 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:39:43.033

One more version -

```
UPDATE temp_orders t_o, mlm_transaction mt
SET t_o.mlm_order_id = mt.order_id 
WHERE mt.v2_order_id = t_o.order_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:27:33.710

您正在使用的是 . 的语法`SQLServer`。这相当于`MySQL`

```
UPDATE temp_orders t_o 
       INNER JOIN mlm_transaction mt
            ON mt.v2_order_id = t_o.order_id
SET    t_o.mlm_order_id = mt.order_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:40:15.280

Updates don't use the FROM clause.

Use something like this:

```
UPDATE table_name SET column1=value1, column2=value2,... WHERE some_column=some_value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:27:43.197

你可以试试这个，但未经测试：

```
UPDATE t_o
SET t_o.mlm_order_id = mt.order_id 
WHERE t_o.mlm_order_id = (SELECT mt.v2_order_id FROM mlm_transaction mt WHERE mt.v2_order_id = t_o.order_id) 
```

# selenium - 具有相同类型和 ID 的多个按钮

> ID：13133738
> 
> 赞同：8
> 
> 时间：2012-10-30T06:24:33.600
> 
> 标签：selenium, selenium-rc, selenium-webdriver, xpath

我是 Selenium 的新手。下面是我的代码。

```
<input type="submit" id="button" value="Edit"/> 
```

我有 3 个具有相同类型、id 和值的按钮。如何单击每个按钮？任何人都可以帮助我处理 XPath 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T09:29:41.293

我通过以下方式解决了此类问题：

```
String cssSelectorOfSameElements="input[type='submit'][id='button']";

 List<WebElement> a=driver.findElements(By.cssSelector(cssSelectorOfSameElements)) ;
 a.get(0).click();
//a.get(1).click();
//a.get(2).click(); 
```

取决于您需要单击的按钮。希望这对你有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T06:38:36.263

use index based xpath like **//input[1]** and **//input[2]** and so on.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T12:13:08.460

还有一种更简单的方法，我们可以**找出唯一的 xpath**，或者我们可以生成

**像 xpath=(//input[@id=' ndncchk** '])[0] , xpath=(//input[@id='ndnnchk'])[1], xpath=(//input[@id= 'ndncchk'])[2]

或者我们可以找出**绝对xpath**的方式是：

到 firebug > open firebug > go to firepath > 会有一个小的下拉列表选择 Genarate absolute xpath ：

它看起来像：

```
html/body/div[1]/form[1]/div[2]/div/div[2]/div[2]/div/div[3]/div[17]/div[2]/input[1]
html/body/div[1]/form[1]/div[2]/div/div[2]/div[2]/div/div[3]/div[17]/div[2]/input[2]... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-01T06:16:49.803

识别独立元素 首先，发布您可以识别依赖元素的帖子。

例如，您在印度、美国、澳大利亚等国家/地区旁边有按钮。如果您想单击 USA 旁边的按钮，那么最好编写 xpath 来识别 USA 并在 html 树中后退一步并确定对每个人都 100% 有效的按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T19:02:53.227

试试`//input[@id='button' and @value='Edit'][1]`。一般来说，我喜欢查看父节点是什么，并且可能指定父节点，以便它们变得独一无二。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-19T13:05:27.140

为了解决这个问题，有不同的方法

1.  使用 index[], //input[1] //input[2] //input[3]

2.  将 webelements 存储到列表中并使用索引访问

列出 buttonList=drive.findElements(By.id("button")); 按钮列表.get(0); 等等...

3.  此外，在某些情况下，如果我们只需要访问特定元素，那么我们可以使用“Preceding-sibling”或“following-sibling”标签

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-06T17:38:36.250

当我尝试从 chrome 控制台定位多个组合框时，这个对我有用。

```
$x("//select[@class='form-control']")[1] 
```

它给我返回了正确的组合框，下面有所有选项。

# algorithm - 面试街头挑战中的错误答案

> ID：13133739
> 
> 赞同：0
> 
> 时间：2012-10-30T06:24:34.753
> 
> 标签：algorithm, numbers, lcm, greatest-common-divisor

首先是一个小的澄清。我确实在这个问题上得到了 AC，但我更好的方法（这在数学上是等效的，我假设我的 AC 解决方案）是得到一个 WA 判决在 interviewstreet 中存在一个问题，如下所示：

> 有1个友好号码和N个不友好号码。我们想找出有多少数字正好整除友好数字，但不整除任何不友好数字。
> 
> 输入格式：
> 
> 输入的第一行包含两个由空格分隔的数字 N 和 K。N是不友好号码的数量，K是友好号码。输入的第二行包含 N 个空格分隔的不友好数字。
> 
> 输出格式：
> 
> 在一行中输出答案。
> 
> 样本输入：
> 
> 8 16
> 2 5 7 4 3 8 3 18
> 
> 样本输出：
> 
> 1
> 
> 解释：
> 
> 给定友好数字 16 的除数是 { 1, 2, 4, 8, 16 }，不友好数字是 { 2, 5, 7, 4, 3, 8, 3, 18 }。现在1整除所有不友好的数字，2整除2，4整除4，8整除8，但16不整除任何一个。因此，只有一个数字可以整除友好数字，但不整除任何不友好数字。所以答案是1。

我的算法（得到了 AC）如下：

1.  让可能的不友好数字输入[i] where 0<=i

2.  对于每个 input[i] 找到 gcd(input[i],k)。

3.  将范围 (0,n) 中所有 i 的 gcd(input[i],k) 的所有因子存储在一个集合中。让我们将此集合称为可能因子。

4.  对于 k 的每个因子，检查它是否除掉了可能因子中的任何元素。如果否，则增加答案计数

我修改了算法，假设如下：

不是将 gcd(input[i],k) 的所有因子存储在一个集合中，而是**找出范围 (0,n) 中所有 i 的 gcd(input[i],k) 的 lcm。**这可以通过以下 LOC 轻松完成

```
lcm = (lcm/gcd(gcd(input[i],k),lcm))*(gcd(input[i],k)) 
```

现在对于 k 的所有因素，检查它们是否划分 lcm。如果没有，则增加计数。

然而，这个假设给了我 WA。是因为我的逻辑有任何缺陷吗？如果是，请指出（如果可能，用数学证明）这两种方法有何不同？

这是我的代码，第二种方法供参考（以及可能的错误）

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
typedef long long LL;
LL gcd(LL a,LL b) {
    LL c;
    while(b) {
        c=a%b;
        a=b;
        b=c;
    }
    return a;
}
int main()
{
    long long int n,k,i,x,j,ans=0,a,num,g;
    scanf("%lld%lld",&n,&k);
    num=1;
    for(i=0;i<n;i++) {
        scanf("%lld",&a);
        g=gcd(a,k);
        num=(num/gcd(num,g))*g;
    }
    x=sqrt(k);ans=0;
    for(i=1;i<=x;i++) {
        if(!(k%i)) {
            if((num%i)) ans++;
            if((k/i != i) && (num%(k/i))) ans++;
        }
    }
    printf("%lld\n",ans);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:28:50.770

你说“找出范围 (0,n) 内所有 i 的 gcd(input[i],k) 的 lcm ...现在对于 k 的所有因子，检查它们是否划分 lcm。如果没有，则增加计数。”

这种方法有一个缺陷。考虑 k=20，U=[12,25,30] 的情况。然后 GCDs = [4,5,10] 和 LCM = 20。所以 k 的所有因子除以 LCM，导致引用标准的计数为零。但是 k 本身不除任何 U，所以 count 应该是 1 而不是 0。

# concurrency - 玩2.0控制器并发访问并删除相同记录

> ID：13133742
> 
> 赞同：0
> 
> 时间：2012-10-30T06:24:56.550
> 
> 标签：concurrency, playframework, playframework-2.0

在 play 2.x 应用程序中，我有一个发布请求，用于从父表中删除子成员。如果有多个请求具有相同的请求参数，我如何要求 Play 锁定子列表以避免并发访问和重复删除同一记录？如果重复请求非常接近发送，则会引发如下异常：

> javax.persistence.OptimisticLockException：数据已更改。更新了 [0] 行 sql[从 id=? 的 channel_detail 中删除 和 member_id=? 和 channel_info_id=?] 绑定[null]

```
@BodyParser.Of(BodyParser.FormUrlEncoded.class)
public static Result removeMemberFromChannel() {
    RequestBody body = request().body();
    Map<String, String[]> dict = body.asFormUrlEncoded();
    final String memberId = dict.get("memberId") != null ? dict.get(Config.MEMBER_ID_PARAM)[0] : null;

    ChannelInfo channelInfo = ChannelInfo.getChannelForName(channelName); //method was removed to save space
    if (channelInfo != null) {
       channelInfo.removeMemberId(memberId);
       channelInfo.save();
    }
}

@Entity
@Table(name="channel")
public class ChannelInfo extends Model {
    @Id
    private Long id;

    @Constraints.Required
    private String channelName;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="channelInfo")
    private Set<ChannelDetailMember> members;

    private int membersCount = 0;

    public void removeMemberId(String memberId) {
        Iterator<ChannelDetailMember> iter = this.getMembers().iterator();
        while (iter.hasNext()) {
            ChannelDetailMember dMember = iter.next();
            if (dMember.getMemberId().equals(memberId)) {
               dMember.delete();
               membersCount--;
               break;
            }
         }
    }
}

@Entity
@Table(name="channel_detail")
public class ChannelDetailMember extends Model {

    @Id
    private Long id;

    @Constraints.Required
    private String memberId;

    @Constraints.Required
    @ManyToOne(cascade=CascadeType.PERSIST)
    ChannelInfo channelInfo;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:59:31.230

我不确定 Play 本身是否带有防止此类事情发生的机制，并且抛出的异常已经是锁定策略的一种形式。我认为主要问题是数据有时间在您获取它和您想要删除条目之间进行更改，因此它会执行以下操作之一：

*   以不同的方式实现删除方法，以便同时查找和删除成员（免责声明：我对 EBean 不太熟悉，所以我完全不确定它如何处理事务管理）

*   抓住`OptimisticLockException`，然后在几秒钟后再次尝试删除并重复例如 3 次，如果它再次以相同的方式失败

# c - 使用 fread 和 fwrite .. 数据丢失

> ID：13133746
> 
> 赞同：0
> 
> 时间：2012-10-30T06:25:15.380
> 
> 标签：c

嗨，我正在尝试读取二进制文件并对其进行处理，但是当我尝试使用 fread 时，我认为我使用 fread 的方式错误。读取的字节数小于文件的大小。谁能帮帮我，白我做错了

```
 #include <stdio.h>
    #include <limits.h>

    int main()
    {

    FILE *fin=fopen("./file.pcap","rb");

    char line[LINE_MAX];

    FILE *fout=fopen("out.txt","w");

    while(fread(line,sizeof(line),1,fin)){
        fwrite(&line,sizeof(line),1,fout);
    }

    fclose(fin);
    fclose(fout);

    } 
```

第一个文件大约是 51236，out.txt 是 51200

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:31:00.830

Fread 返回读取的“元素”数。你说过一个元素是`LINE_MAX`字节长，所以当你到达文件末尾时，没有一个完整的元素适合你，所以`fread()`返回 0 并且你的输出最终被截断。

尝试翻转读取“一些字节”而不是“1块LINE_MAX字节”：

```
size_t numBlocks;
while((numBlocks = fread(line, 1, sizeof(line), fin)) > 0) {
    fwrite(line, 1, numBlocks, fout);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:31:37.980

因为您要求的是`LINE-MAX`-sized 块，所以如果文件大小不是该值的*精确*倍数，您将不会得到最后一个。`fread`返回它读取的完整*块的数量。*你最好使用类似的东西：

```
size_t sz;
while ((sz = fread (line, 1, sizeof (line), fin)) > 0) {
    fwrite (line, sz, 1, fout);
} 
```

这将从输入文件中读取*任意*数量的数据（最多`LINE_MAX`），然后将该大小的块写入输出文件。这样做是因为，不是说一个大小的块`LINE_MAX`，而是指定`LINE_MAX`每个字节的块。这样，如果`LINE_MAX`文件中没有字符，`fread`将尽可能多地为您提供。

文件结尾将导致`fread`返回零，任何其他值表示数据已成功读取。

> 顺便说一句，您还应该检查`fwrite`. 您不必为那个交换参数，但您应该确保返回值是`1`（或者`sz`如果您*确实*交换了参数）。否则，数据不一定全部写入。

换句话说：

```
size_t sz;
while ((sz = fread (line, 1, sizeof (line), fin)) > 0) {
    if (fwrite (line, sz, 1, fout) != 1) {
        // Handle error.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:28:19.113

你已经接近了，但是当它在你的输入文件末尾获得部分缓冲区时`fread()`会返回。`0`您需要添加一些代码来处理这种情况，否则您将跳过写出这些字节。

`&`您的电话中的 the`fwrite()`也是不必要的，但这与您的问题无关。

# php - PHP Captcha 图像未在 chrome 中显示

> ID：13133752
> 
> 赞同：0
> 
> 时间：2012-10-30T06:26:05.920
> 
> 标签：php, captcha

我使用 PHP 创建验证码图像。它在加载时显示验证码。完成加载后，它不会在 Chrome 中显示验证码图像。在其他浏览器中，它工作正常。为什么？

```
<?php
// Create an image from button.png
$image = imagecreatefrompng('button.png');

// Set the font colour
$colour = imagecolorallocate($image, 255, 120, 4);

// Set the font
$font = '../fonts/Anorexia.ttf';

// Set a random integer for the rotation between -15 and 15 degrees
$rotate = rand(-15, 15);

// Create an image using our original image and adding the detail
imagettftext($image, 18, $rotate, 18, 30, $colour, $font, $str);

// Output the image as a png
imagepng($image);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:28:50.407

有同样的问题..一个可能的原因是反横幅/防病毒..我正在使用Karpersky ..当我关闭卡巴斯基验证码时显示正常，Chrome有点奇怪..我认为他们应该寻找这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:16:24.600

您的整个代码是正确的，只需包括

`header('Content-Type: image/png');`

在您的代码上方...

# jquery - 滚动后需要修复左侧菜单或 div

> ID：13133753
> 
> 赞同：1
> 
> 时间：2012-10-30T06:26:17.840
> 
> 标签：jquery, html, css

我正在为我的网站寻找相同的左侧菜单效果（如下链接所示）。

[http://www.wiziq.com/contact/](http://www.wiziq.com/contact/)
[http://juliusmattsson.com/](http://juliusmattsson.com/)
[http://happycog.com/](http://happycog.com/)

请让我知道如何在滚动后修复 div 位置..

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:19:07.280

保持位置：固定在css中执行以下操作

```
ul
{
 float: left;
 padding: 0;
 margin: 0;
 width: 180px;
 position: fixed;
 border-top: solid 1px #D4DDE6;
 margin-top: 20px;
} 
```

# multithreading - BizTalk 编排中的线程

> ID：13133754
> 
> 赞同：1
> 
> 时间：2012-10-30T06:26:19.433
> 
> 标签：multithreading, biztalk, orchestration

我想从数据库中获取一些记录，然后根据用户 ID 和密码作为凭据，我需要调用另一个 Web 服务。我想在 Orchestration 中使用线程来做到这一点？我可以在编排中进行线程处理吗？意味着我可以在 Orchestration 中启动一些线程，以使这件事更快地工作。

谢谢，迪内什·阿罗拉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:47:58.890

如果您正在寻找的只是可扩展性/并发性，我相信您需要做的是：

*   在接收位置使用 WCF-SQL 适配器调用/轮询您的数据库表/PROC
*   将 XML 结果分批成单独的消息（带或不带信封 - 请参阅此[Richard Seroter 帖子](http://seroter.wordpress.com/2010/04/08/debatching-inbound-messages-from-biztalk-wcf-sql-adapter/)）
*   订阅去批处理（单个）消息模式的编排，该模式映射数据并调用 Web 服务

您不应该直接关注 BizTalk 业务流程中的线程（除非您正在编写新的适配器）。例如，BizTalk 可能会选择在适当的时候使您的编排脱水。

BizTalk 将使用尽可能多的消息同时调用 Web 服务 - 这将取决于从 SQL 返回的消息数、主机实例数和 BTS 服务器上的发送适配器线程数，以及下游 Web 的实际吞吐量服务。

# android-layout - 拖放在android中无法以指定方式工作

> ID：13133758
> 
> 赞同：1
> 
> 时间：2012-10-30T06:26:32.320
> 
> 标签：android-layout

在长按仪表板按钮时，我想在同一屏幕的任何位置执行拖放操作，并且更改或视图更改成为未来的修复。现在我可以将按钮拖动到特定位置，但是当我们从其他视图返回时，该视图会发生变化。
这是我的代码：
`fragment_dashboard.xml:`

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg_new"
android:screenOrientation="portrait" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/home_btn_cafapp"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_home_cafapp_1"
        android:text="CAF Application"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_smartinfo"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_home_smartinfo_1"
        android:text="SmartInfo"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_reports"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_home_reports_1"
        android:text="SmartReport"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_stock"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_home_requisition_1"
        android:text="Stock Requisition"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_prepaid"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_home_newcaf_1"
        android:text="CAF New Flow"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_setting"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/ic_logs"
        android:text="Settings"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_todos"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/i"
        android:text="Instructions"
        android:visibility="visible"
        android:textColor="@color/light_green" />

    <Button
        android:id="@+id/home_btn_crm_tracking"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/h" />

    <Button
        android:id="@+id/home_btn_faqs"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/j"
        android:visibility="invisible" />

    <Button
        android:id="@+id/home_btn_todos"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/i"
        android:visibility="invisible" />

    <Button
        android:id="@+id/home_btn_todos"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/i"
        android:visibility="invisible" />

    <Button
        android:id="@+id/home_btn_faqs"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/j"
        android:visibility="invisible" />

    <Button
        android:id="@+id/home_btn_update_app"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignLeft="@+id/home_btn_cafapp"
        style="@style/DashboardButton"
        android:layout_marginLeft="50dp"
        android:drawableTop="@drawable/getupdate"
        android:text="Update Application"
        android:textColor="@color/light_green"
        android:visibility="gone" />

    </LinearLayout></LinearLayout> 
```

我`dashboard_fragment.java`在这里：

```
//onlong click method-
public boolean onLongClick(View v)
{
    dragged_view = v;
    v.setVisibility(View.INVISIBLE);
    v.startDrag(null, new DragShadowBuilder(v), v, 0);
    return true;
    } 
```

`draglistener:`

```
linearLayout.setOnDragListener(new View.OnDragListener()
    {
        public boolean onDrag(View v, DragEvent event)
        {
            if (event.getLocalState() == v)
                return true;
            View view = (View) event.getLocalState();
            ViewGroup owner = (ViewGroup) view.getParent();
            switch (event.getAction())
            {
                case DragEvent.ACTION_DRAG_STARTED:
                    // v.setVisibility(View.INVISIBLE);
                    v.invalidate();
                    return true;
                case DragEvent.ACTION_DRAG_LOCATION:
                    return (true);

                case DragEvent.ACTION_DRAG_EXITED:
                    v.invalidate();
                    return false;

                case DragEvent.ACTION_DROP:
                    // Dropped, reassign View to ViewGroup

                    int x = (int) event.getX();
                    int y = (int) event.getY();
                    x = x / (v.getWidth() / 4);
                    y = (y / (v.getHeight() / 3));

                    owner.removeView(view);
                    owner.addView(view, x + y*4);
                    view.setVisibility(View.VISIBLE);
                    view.invalidate();

                    return true;
                case DragEvent.ACTION_DRAG_ENDED:
                    v.invalidate();
                    if (event.getResult())
                    {
                        Toast.makeText(getActivity(), "The drop was handled.", Toast.LENGTH_LONG).show();

                    }
                    else
                    {
                        v.setVisibility(View.VISIBLE);
                        Toast.makeText(getActivity(), "The drop didn't work.", Toast.LENGTH_LONG).show();

                    }

                    return true;
                default:
                    break;
            }
            return true;
        }
    }); 
```

这仅适用于拖动按钮，但不能永久固定它们的位置

# qt - Qt：Qt Designer 按钮面板错误

> ID：13133761
> 
> 赞同：0
> 
> 时间：2012-10-30T06:27:02.960
> 
> 标签：qt

我用确定/取消按钮创建了一个名为“new_dialog”的模式对话框。现在我想在“确定”按钮的插槽上工作。我右键单击按钮窗格，从上下文菜单中选择“转到插槽”命令；并得到一个错误：

> 在 mainwindow.cpp 中找不到带有 Ui::new_dialog 的类。检查包含指令（这是英文翻译）

如何为按钮分配插槽？

谢谢！

一些代码：

mainwindow.cpp 中有 new.ui 和 ui_new.h 指令：

```
#include "ui_new.h" 
```

该对话框从主窗口调用：

```
void MainWindow::on_pushButton_clicked()
{
    QDialog *new_dialog = new QDialog(0,0);
    Ui_New newUi;
    newUi.setupUi(new_dialog);
    new_dialog->exec();
} 
```

ui_new.h：

```
#ifndef UI_NEW_H
#define UI_NEW_H

#include <QtCore/QVariant>
#include <QtGui/QAction>
#include <QtGui/QApplication>
#include <QtGui/QButtonGroup>
#include <QtGui/QDialog>
#include <QtGui/QDialogButtonBox>
#include <QtGui/QHeaderView>
#include <QtGui/QLabel>
#include <QtGui/QLineEdit>

QT_BEGIN_NAMESPACE

class Ui_New
{
public:
    QDialogButtonBox *buttonBox;
    QLabel *label;
    QLabel *label_2;
    QLineEdit *lineEdit;
    QLineEdit *lineEdit_2;

    void setupUi(QDialog *new_dialog)
    {
        if (new_dialog->objectName().isEmpty())
            new_dialog->setObjectName(QString::fromUtf8("Dialog"));
        new_dialog->setWindowModality(Qt::ApplicationModal);
        new_dialog->resize(250, 180);
        new_dialog->setModal(false);
        buttonBox = new QDialogButtonBox(new_dialog);
        buttonBox->setObjectName(QString::fromUtf8("buttonBox"));
        buttonBox->setGeometry(QRect(40, 140, 181, 32));
        buttonBox->setOrientation(Qt::Horizontal);
        buttonBox->setStandardButtons(QDialogButtonBox::Cancel|QDialogButtonBox::Ok);
        label = new QLabel(new_dialog);
        label->setObjectName(QString::fromUtf8("label"));
        label->setGeometry(QRect(20, 40, 46, 13));
        label_2 = new QLabel(new_dialog);
        label_2->setObjectName(QString::fromUtf8("label_2"));
        label_2->setGeometry(QRect(20, 70, 46, 13));
        lineEdit = new QLineEdit(new_dialog);
        lineEdit->setObjectName(QString::fromUtf8("lineEdit"));
        lineEdit->setGeometry(QRect(70, 40, 113, 20));
        lineEdit_2 = new QLineEdit(new_dialog);
        lineEdit_2->setObjectName(QString::fromUtf8("lineEdit_2"));
        lineEdit_2->setGeometry(QRect(70, 70, 113, 20));

        retranslateUi(new_dialog);
        QObject::connect(buttonBox, SIGNAL(accepted()), new_dialog, SLOT(accept()));
        QObject::connect(buttonBox, SIGNAL(rejected()), new_dialog, SLOT(reject()));

        QMetaObject::connectSlotsByName(new_dialog);
    } // setupUi

    void retranslateUi(QDialog *new_dialog)
    {
        new_dialog->setWindowTitle(QApplication::translate("Dialog", "New person", 0, QApplication::UnicodeUTF8));
        label->setText(QApplication::translate("Dialog", "Name", 0, QApplication::UnicodeUTF8));
        label_2->setText(QApplication::translate("Dialog", "Surname", 0, QApplication::UnicodeUTF8));
    } // retranslateUi

};

namespace Ui {
    class new_dialog: public Ui_New {};
} // namespace Ui

QT_END_NAMESPACE

#endif // UI_NEW_H 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:50:19.110

您是否创建了继承自 QDialog 的新 Dialog 类？通常，如果您使用的是 QDialog ，则无法连接到按钮槽，而必须将 Accepted() 或 denied() 信号连接到 MainWindow 的任何槽。

```
QDialog *new_dialog = new QDialog(0,0);
connect(new_dialog,SIGNAL(accepted()),this,SLOT(MySlot())); 
```

注意：**这**是主窗口指针

如果您创建自己的 Dialog 类并具有指向 button 的指针，请首先将 Button clicked() 连接到对话框插槽，然后从那里重定向到 MainWindow。

# android - 另一个水平滚动视图中的水平滚动视图

> ID：13133763
> 
> 赞同：1
> 
> 时间：2012-10-30T06:27:05.410
> 
> 标签：android, horizontalscrollview

我在 android 中设计 UI，我`HorizontalScrollView`在另一个`HorizontalScrollView`. 然而，孩子`HorizontalScrollView`不工作。

`HorizontalScrollView`每当在 child 中做出手势时，是否可以禁用父级`HorizontalScrollView`。我知道这听起来很棘手，但我需要在我的 UI 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:47:27.663

让一个东西在另一个东西里面滚动通常是个坏主意。谷歌不推荐它。

这是因为 android 处理滚动事件的方式。有一个方法被调用`dispatchTouchEvent()`，`onInterceptTouchEvent()`它决定是拦截触摸事件还是将其传递给它的孩子。对于可滚动视图，它们将始终拦截“滑动”动作。所以它永远不会给你的孩子。

有解决方法，但它们很混乱，并且大部分时间都不起作用。你最好调整你的 UI 以避免这种情况。

如果您坚持尝试，以下是这些线程中讨论的一些潜在解决方法：

[ScrollView 中的 ListView 潜在解决方法](https://stackoverflow.com/questions/4097385/listview-in-scrollview-potential-workaround?lq=1)

[ScrollView 中的 ListView 在 Android 上不滚动](https://stackoverflow.com/questions/6210895/listview-inside-scrollview-is-not-scrolling-on-android/7174396#7174396)

[Android：带有自定义列表视图的可滚动首选项窗口](https://stackoverflow.com/questions/8348570/android-scrollable-preferences-window-with-custom-list-view?lq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:46:28.353

像这样覆盖 onInterceptTouchEvent 怎么样：

```
public class EmbeddedHorizontalScrollView extends HorizontalScrollView {

    public EmbeddedHorizontalScrollView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {

        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // tell parent and it's ancestors to skip touch events
                this.getParent().requestDisallowInterceptTouchEvent(true);
                break;
            case MotionEvent.ACTION_UP:
                this.getParent().requestDisallowInterceptTouchEvent(false);
                break;
        }
        return super.onInterceptTouchEvent(ev);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:33:08.617

所以我在horisontalScrollView里面的LinearLayout里面使用了ScrollView。主要问题是在检测到 Y swype 时在 Horizo​​ntalScrollView 中实现 OnInterceptTouchEvent 以在子 ScrollView 中传递 TouchEvent。而且效果很好，看起来很有趣。是的，您不应该将 Scrollview 或 listView 直接放在另一个 Scrollview 中，但您可以将 Linearlayout 放在 ScrollView 中，而不是放在其他 Scrollable 对象上。

# postgresql - hstore 内部如何存储数据？

> ID：13133774
> 
> 赞同：4
> 
> 时间：2012-10-30T06:27:40.463
> 
> 标签：postgresql, hstore

我正在使用 postgresql hstore 扩展并好奇数据是如何在内部存储的。请指出我可以在哪里查看 hstore 源代码以查看实现细节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T06:42:02.440

`hstore` is part of the main PostgreSQL distribution, which is on [http://git.postgresql.org/](http://git.postgresql.org/) and GitHub. [Here is `hstore` in git head](http://git.postgresql.org/gitweb/?p=postgresql.git;a=tree;f=contrib/hstore;h=d81f5646750d4d0af626d5037f7fae4432433085;hb=master).

It looks like it's stored as a varlena, which means it's TOASTable like anything else. The downside is that the whole field needs to be read from disk - at least if it's compressed - to extract a key.

This also means that like any other normal field value, **updating any part of the field requires that a new copy of the whole tuple (row) must be written to the table** and the old one marked for expiry when it's no longer visible to any active transactions (see [MVCC](http://www.postgresql.org/docs/current/static/mvcc.html) in the Pg manual). A big `hstore` is thus undesirable for data that will change frequently, since you'll need to rewrite the whole thing (and the row that contains it) whenever any part of it changes.

*   [`hstore.h`](http://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=contrib/hstore/hstore.h;h=23c8a6f0e288d1251ef9fb154c057fa86926adcf;hb=master)
*   [`hstore_io.c`](http://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=contrib/hstore/hstore_io.c;h=e84cdd69051c9205683e16b90234f379998a23c0;hb=master)

The sources don't seem to contain much in the way of comments to provide an overview of how hstore values are structured and stored, and it's a bit of a macro forest to take in quickly.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-10T07:47:40.400

存储本身并不令人惊讶。

有趣的部分是如何对其进行索引以能够有效地回答诸如

从planet_osm_line中选择osm_id、名称、标签，其中'频率=> 16.7，铁路=>“铁路”'<@标签；

（这是来自一个真实的例子）含义：“查找（hstore）字段“包含”映射频率=> 16.7和铁路=>铁路的所有记录。

警告：这只是凭记忆。

这有两个组成部分：

首先是[GiST 索引](http://gist.cs.berkeley.edu/)，它可以被看作是一种“草率的 B-Tree”，它有时不能准确地告诉你要采用哪个分支，但会给你一些分支。PostgreSQL 将其用于几何索引（例如，您可以在其中查询一个点是否在多边形中）。索引不会给你一个完美的命中，但可能会大大减少搜索空间。

其次，有一个“哈希”（对于您 Perlists）/“字典”（对于您 Pythonists）的编码以利用 GiST：您将哈希的每个键和每个键/值对散列到一个小的 int 中（详细信息是模糊，但让我们假设 0..255），取一个这个大小的位域，并为你得到的每个哈希值在你的位域中戳一个洞（我认为 Knuth 有一个很好的例子，索引卡上有开/闭孔他们的边缘和织针——是的，[就在这里](https://en.wikipedia.org/wiki/Needle_card)。

那你只需要嫁给那两个。AFAIR Oleg Bartunov 和 Theodor Tsigaev 提出了这一点。我第一次看到的时候头都炸了。

# android - 如何将 datepicker 值保存到 sqlite 数据库

> ID：13133778
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:28:07.897
> 
> 标签：android, sqlite

我对日期选择器功能有疑问。

如何将 datepicker 的值保存到 sqlite 数据库？

假设我创建了一个按钮来设置日期和一个按钮来保存到数据库......

main.java

```
public class main extends Activity implements OnClickListener {

private Calendar dateTime=Calendar.getInstance();
      private SimpleDateFormat dateFormatter = new SimpleDateFormat("MMMM dd, yyyy");

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addshoppinglist);

        mSaveBttn = (Button) findViewById(R.id.saveBttn);
        mSetDateBttn = (Button) findViewById(R.id.shoppingDate);
        mCancelBttn = (Button) findViewById(R.id.cancelBttn);
        mSaveBttn.setOnClickListener(this);

        mSetDateBttn.setOnClickListener(this);
        mCancelBttn.setOnClickListener(this);
        helper = new ProductDatabaseHelper(this);
        model = helper.getAll();
    }
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.saveBttn:

            break;

        case R.id.cancelBttn:
            Intent mainIntent = (new Intent(AddShoppingList.this, main.class));
            startActivity(mainIntent);

            break;

        case R.id.shoppingDate:
            showDialog(DIALOG_DATE);

        }
    }
protected Dialog onCreateDialog(int id){
        switch(id){
        case DIALOG_DATE:
            return new DatePickerDialog(this,new OnDateSetListener(){

                public  void onDateSet(DatePicker view,int year,int monthOfYear,int dayOfMonth){
                    dateTime.set(year,monthOfYear,dayOfMonth);

                    mSetDateBttn.setText(dateFormatter
                            .format(dateTime.getTime()));

                }
            } ,dateTime.get(Calendar.YEAR),
              dateTime.get(Calendar.MONTH),
              dateTime.get(Calendar.DAY_OF_MONTH));

        }

} 
```

有谁知道如何将日期格式保存到数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:38:42.900

```
DatePicker datePicker = (DatePicker) findViewById(R.id.datePicker1);
int day = datePicker.getDayOfMonth();
int month = datePicker.getMonth() + 1;
int year = datePicker.getYear(); 
```

将这些另存为不同的列，如日列、月列和年列

或要从 DatePicker 生成 Date 对象，请使用此代码

```
new Date(datePicker.getYear() - 1900, datePicker.getMonth(), datePicker.getDayOfMonth()); 
```

有时间使用这些方法

获取当前时间（）获取当前分钟（）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:39:24.203

您可以通过以下方式实现此目的。

```
public  void onDateSet(DatePicker view,int year,int monthOfYear,int dayOfMonth){
                dateTime.set(year,monthOfYear,dayOfMonth);

           int year = year;   // Here you can get day,month and year.
       int month = monthOfYear;
       int day = dayOfMonth;

    ContentValues values = new ContentValues()

    values.put("Day",dayOfMonth);
    values.put("Month",monthOfYear);
    values.put("Year",year);

    } 
```

现在使用您的数据库助手类在其中插入值。对于使用数据库，请阅读[这篇文章](http://mfarhan133.wordpress.com/2010/10/24/database-crud-tutorial-for-android/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-28T20:00:58.230

我只是想出了一种**简单的方法**，因为我找不到答案搜索。就像在实现的函数**onDateSet**中做的一样，自定义一个函数**insertDate**

```
@Override
public void onDateSet (DatePicker view, int year, int month, int dayOfMonth) {

    Calendar cal = new GregorianCalendar(year , month ,dayOfMonth);
    DateFormat Dateformat = DateFormat.getDateInstance(DateFormat.MEDIUM);
    String date = Dateformat.format(cal.getTime());

 TextView dateText = (TextView) findViewById(R.id.dateVAl);
    dateText.setText("JUST ADDED DATE "+ date);

    godUri = insertDate(year, month, dayOfMonth);
}

private Uri insertDate(  int year , int month , int dayOfMonth   )
{
    ContentValues values = new ContentValues();
    values.put(dateContract.DateEntry.COLUMN_YEAR , year  );
    values.put(dateContract.DateEntry.COLUMN_MONTH , month);
    values.put(dateContract.DateEntry.COLUMN_DAY , d`enter code here`ayOfMonth);

    //getContentResolver().insert(  dateContract.DateEntry.CONTENT_URI , values );

     dateDbHelper myDbHelper  = new dateDbHelper(getApplicationContext());
    SQLiteDatabase database = myDbHelper.getWritableDatabase();
    long rowId = database.insert(dateContract.DateEntry.TABLE_NAME, null, values);
    return ContentUris.withAppendedId(dateContract.DateEntry.CONTENT_URI , rowId);

} 
```

该对象 godUri(No Pun Intended) 被声明为全局变量。我创建了 Uri 对象 godUri 来存储 DatePicker 刚刚保存的日期的 Uri。它可以派上用场，例如，通过意图将该 Uri 发送到另一个活动。

如果您想查看我如何创建整个 datePicker 活动的完整代码……请访问此[链接](https://www.youtube.com/watch?v=KZoijdM4DsY)。我上面提到的其他所有内容都是我修改的。

# ios - 从 iTunes 购买的歌曲是否有任何全球唯一标识符

> ID：13133786
> 
> 赞同：3
> 
> 时间：2012-10-30T06:28:35.423
> 
> 标签：ios, itunes, avaudioplayer

我正在使用 AVAudioPlayer 创建音乐 iPhone 应用程序，在此我使用 iPod 库中的歌曲，并在经过排序后将歌曲保存在服务器中。我想知道是否有任何唯一标识符来识别从 iTunes 商店购买的歌曲？不是本地的，我的意思是全球唯一标识符。而且我想在应用程序中添加一个下载按钮，直接从iTunes商店直接下载歌曲？我们应该手动创建链接吗？或者有什么替代方法吗？

请帮忙

# html - 在 Chrome 和 Firefox 中，边框底部的执行者不会成为下划线；在 IE 中工作

> ID：13133791
> 
> 赞同：0
> 
> 时间：2012-10-30T06:29:17.717
> 
> 标签：html, css, cross-browser

我有[http://jsfiddle.net/Lijo/FRBqJ/](http://jsfiddle.net/Lijo/FRBqJ/)中给出的 HTML 代码。在 Internet Explorer 中它工作正常 - 标题文本带有下划线。但在 Firefox 和 Chrome 中，这条线不是下划线。

1.  这种不正确行为的原因是什么？

2.  我们如何纠正它（使用 CSS）？

火狐

![在此处输入图像描述](../Images/9dd066e94f1e5b85735424b9153e44d8.png)

IE

![在此处输入图像描述](../Images/68f9db1f0f2473998d5d73b7cf58ff29.png)

HTML

```
 <div id="searchContainer" class="searchContainer">
                        <div id="searchHeader" class="searchHeader">
                            <span id="detailContentPlaceholder_lblSearchHeading" class="searchContentHeadingText">
                                Business Testing Act</span>
                            <img alt="Expand" src="Images/PlusIcon.GIF" class="expandSearchIcon" />
                            <img alt="Collapse" src="Images/MinusIcon.GIF" class="collapseSearchIcon" />
                        </div>
   </div> 
```

CSS

```
.searchHeader
{
width:100%; 
border-bottom:2px solid #fcda55;
padding:0 0 2px 0;
margin:0 0 0 0px;
font:bold 13pt Arial;
line-height:10pt;
color:#00A6B5;
} 
```

参考：

1.  [FF/IE 和 Chrome 之间的 CSS 文本下划线渲染差异](https://stackoverflow.com/questions/8865027/css-text-underline-rendering-difference-between-ff-ie-and-chrome)

[![Stack Overflow 上的 Lijo 简介，面向专业和爱好者程序员的问答](../Images/1e34fec08317982f88db659767564866.png "Stack Overflow 上的 Lijo 简介，面向专业和爱好者程序员的问答")](https://stackoverflow.com/users/696627/lijo)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:31:55.313

由于您使用的是`float`，您还应该添加`overflow: auto;`到父元素，以便它考虑浮动元素：

```
.searchHeader
{
    width:100%; 
    border-bottom:2px solid #fcda55;
    padding:0 0 2px 0;
    margin:0 0 0 0px;
    font:bold 13pt Arial;
    line-height:10pt;
    color:#00A6B5;
    overflow: auto;  /* Right here */
} 
```

**演示：http: [//jsfiddle.net/FRBqJ/1/](http://jsfiddle.net/FRBqJ/1/)**

# iphone - 在启用 ARC 的项目中使用自动释放

> ID：13133793
> 
> 赞同：3
> 
> 时间：2012-10-30T06:29:21.513
> 
> 标签：iphone, ios, memory-management, nsautoreleasepool

> **可能重复：**
> [ARC 内存泄漏](https://stackoverflow.com/questions/9770213/arc-memory-leaks)

我们可以在启用 ARC 的项目中使用 @autorelease 池吗？如果是这样，使用@autorelease 池有什么用。我在 google 中发现，即使项目启用了 ARC，它也只会处理主线程。如果我们创建其他线程，那么我们必须注意释放对象。谁能解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:40:35.717

是的，ARC 默认只设置在主线程上。但是，您也可以在后台线程中利用它。解决方案很简单：ARC 的语义`@autoreleasepool { }`不同；它实际上并没有以经典的 MRC 方式分配和释放 NSAutoreleasePool 对象，它只是告诉 ARC 也处理调用它的线程中的对象，从而实现自动释放池样式的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:39:43.363

当您从手动内存管理迁移到 ARC 时，您将替换：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
[pool release]; 
```

和

```
@autoreleasepool {

    } 
```

阅读[NSAutoreleasePool](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/occ/cl/NSAutoreleasePool)文档和[Advanced Memory Management Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)以获得更好的理解。

# c# - 在 WPF 中创建动态生成的单选按钮时程序崩溃

> ID：13133800
> 
> 赞同：1
> 
> 时间：2012-10-30T06:30:02.247
> 
> 标签：c#, .net, wpf, dynamic, mvvm

我是一名 C++ 开发人员，最近转向 C#。我正在使用 MVVM 模式开发 wpf 应用程序。我的 xaml 文件中有一个 groupboxbox，分为两列。一列包含动态生成的单选按钮集，其他列包含标签和许多组合框。

**XAML：**

```
<GroupBox Header="Daughter Cards" Height="Auto" HorizontalAlignment="Stretch" Margin="20,5,20,20" Name="groupBox2" VerticalAlignment="Stretch" Width="Auto">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />                        
                    <ColumnDefinition Width="220" />
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0">
                    <ItemsControl ItemsSource="{Binding SlotChildren}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <RadioButton Content="{Binding SlotButtons}" Margin="0,10,0,0" IsChecked="{Binding IsChecked}" GroupName="SlotGroup" Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>                

                <Grid Grid.Column="1">                        
                        <ComboBox ItemsSource="{Binding DaughterBoardBoxList}" SelectedItem="{Binding SelectedDaughterBoardBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox5" VerticalAlignment="Center" Width="158" />
                        <ComboBox ItemsSource="{Binding DaughterVersionBoxList}" SelectedItem="{Binding SelectedDaughterVersionBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox6" VerticalAlignment="Center" Width="158" />
                        <ComboBox ItemsSource="{Binding DaughterSerialBoxList}" SelectedItem="{Binding SelectedDaughterSerialBoxList, Mode=TwoWay}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0" Name="comboBox7" VerticalAlignment="Center" Width="158" />                        
                        <Label Content="{Binding DaughterStatus}" Height="25" HorizontalAlignment="Center" Margin="0" Name="DaughterCardLabel" VerticalAlignment="Center" Width="170" />
                        <ComboBox Height="23" ItemsSource="{Binding I2CAddressList}" SelectedItem="{Binding SelectedI2CAddressList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox1" VerticalAlignment="Center" Width="200" />
                        <ComboBox Height="23" ItemsSource="{Binding BoardBoxList}" SelectedItem="{Binding SelectedBoardBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="1" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox2" VerticalAlignment="Center" Width="200" />
                        <ComboBox Height="23" ItemsSource="{Binding VersionBoxList}" SelectedItem="{Binding SelectedVersionBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox3" VerticalAlignment="Center" Width="200" />
                        <ComboBox Height="23" ItemsSource="{Binding SerialBoxList}" SelectedItem="{Binding SelectedSerialBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="3" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox4" VerticalAlignment="Center" Width="200" />                
                </Grid>                                       
            </Grid> 
</GroupBox> 
```

**EEPROMViewModel 类：** xaml 的 DataContext 设置为此类。在同一个班：

```
Byte[] sendBuf = new Byte[256];
    Byte[] readBuf = new Byte[256];

    public ObservableCollection<EEPROMSlotViewModel> SlotChildren { get; set; }

    public ObservableCollection<string> _I2CAddressList;
    public ObservableCollection<string> _BoardBoxList;
    public ObservableCollection<string> _VersionBoxList;
    public ObservableCollection<string> _SerialBoxList;
    public ObservableCollection<string> _DBoardBoxList;
    public ObservableCollection<string> _DVersionBoxList;
    public ObservableCollection<string> _DSerialBoxList;       

    public EEPROMViewModel()
    {              

        SlotChildren = new ObservableCollection<EEPROMSlotViewModel>();
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "0 : None", ID = 0 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "1 : None", ID = 1 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "2 : None", ID = 2 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "3 : None", ID = 3 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "4 : None", ID = 4 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "5 : None", ID = 5 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "6 : None", ID = 6 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "7 : None", ID = 7 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "8 : None", ID = 8 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "9 : None", ID = 9 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "10 : None", ID = 10 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "11 : None", ID = 11 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "12 : None", ID = 12 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "13 : None", ID = 13 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "14 : None", ID = 14 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "15 : None", ID = 15 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "16 : None", ID = 16 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "17 : None", ID = 17 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "18 : None", ID = 18 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "19 : None", ID = 19 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "20 : None", ID = 20 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "21 : None", ID = 21 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "22 : None", ID = 22 });
        SlotChildren.Add(new EEPROMSlotViewModel() { SlotButtons = "23 : None", ID = 23 });

        var myboard = new[]
        {      
               "",
               "S1010012",   // redhook
               "S1010018",   // bavaria
               "S1010020"    // flying dog
        };

        var myVariant = new[]
        { 
               "",    
               "001A",
               "001B",
               "001C",
               "002A",
               "002B",
               "002C",
               "003A",
               "003B",
               "003C",
        };      

        _I2CAddressList = new ObservableCollection<string>();
        _BoardBoxList = new ObservableCollection<string>(myboard);
        _VersionBoxList = new ObservableCollection<string>(myVariant);
        _SerialBoxList = new ObservableCollection<string>();

        for (int i = 1; i < 200; i++)
        {
            _SerialBoxList.Add(i.ToString());
        }

        //List of I2C Address
        _I2CAddressList.Add("0x50");
        _I2CAddressList.Add("0x53");

        this.SelectedI2CAddressList = this._I2CAddressList[1];
        this.SelectedBoardBoxList = this.BoardBoxList[2];
        this.SelectedVersionBoxList = this.VersionBoxList[2];
        this.SelectedSerialBoxList = this.SerialBoxList[0];                       

        var myDBoards = new[]
        { 
               "",    
               "S1010013",
               "S1010014",
               "S1010015",
               "S1010017",
               "S1010019",
               "S1010021",
               "S1010023",
               "S1010026",
               "S1110029",
        };

        _DBoardBoxList = new ObservableCollection<string>(myDBoards);
        _DVersionBoxList = new ObservableCollection<string>(myVariant);
        _DSerialBoxList = new ObservableCollection<string>();

        for (int j = 1; j < 500; j++)
        {
            _DSerialBoxList.Add(j.ToString());
        }                     

    }              

    public ObservableCollection<string> I2CAddressList
    {
        get { return _I2CAddressList; }
        set
        {
            _I2CAddressList = value;
            OnPropertyChanged("I2CAddressList");
        }
    }

    private string _SelectedI2CAddressList;
    public string SelectedI2CAddressList
    {
        get { return _SelectedI2CAddressList; }
        set
        {
            _SelectedI2CAddressList = value;
            OnPropertyChanged("SelectedI2CAddressList");
        }
    }

    public ObservableCollection<string> BoardBoxList
    {
        get { return _BoardBoxList; }
        set
        {
            _BoardBoxList = value;
            OnPropertyChanged("BoardBoxList");
        }
    }

    private string _SelectedBoardBoxList;
    public string SelectedBoardBoxList
    {
        get { return _SelectedBoardBoxList; }
        set
        {
            _SelectedBoardBoxList = value;
            OnPropertyChanged("SelectedBoardBoxList");
        }
    }

    public ObservableCollection<string> VersionBoxList
    {
        get { return _VersionBoxList; }
        set
        {
            _VersionBoxList = value;
            OnPropertyChanged("VersionBoxList");
        }
    }

    private string _SelectedVersionBoxList;
    public string SelectedVersionBoxList
    {
        get { return _SelectedVersionBoxList; }
        set
        {
            _SelectedVersionBoxList = value;
            OnPropertyChanged("SelectedVersionBoxList");
        }
    }

    public ObservableCollection<string> SerialBoxList
    {
        get { return _SerialBoxList; }
        set
        {
            _SerialBoxList = value;
            OnPropertyChanged("SerialBoxList");
        }
    }

    private string _SelectedSerialBoxList;
    public string SelectedSerialBoxList
    {
        get { return _SelectedSerialBoxList; }
        set
        {
            _SelectedSerialBoxList = value;
            OnPropertyChanged("SelectedSerialBoxList");
        }
    }        

    char[] version = 
        {
                'A', 'U', 'D', 'I', 'E', 'N', 'C', 'E',         // name
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // reserved,  firmware size
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // board number
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // variant, version, serial
                '0', '0', '0', '0', '0', '0', '0', '0'          // date code, reserved
        };        

    public ObservableCollection<string> DaughterBoardBoxList
    {
        get { return _DBoardBoxList; }
        set
        {
            _DBoardBoxList = value;
            OnPropertyChanged("DaughterBoardBoxList");
        }
    }

    public string _SelectedDBoardBoxList;
    public string SelectedDaughterBoardBoxList
    {
        get { return _SelectedDBoardBoxList; }
        set
        {
            _SelectedDBoardBoxList = value;
            OnPropertyChanged("SelectedDaughterBoardBoxList");
        }
    }

    public ObservableCollection<string> DaughterVersionBoxList
    {
        get { return _DVersionBoxList; }
        set
        {
            _DVersionBoxList = value;
            OnPropertyChanged("DaughterVersionBoxList");
        }
    }

    public string _SelectedDVersionBoxList;
    public string SelectedDaughterVersionBoxList
    {
        get { return _SelectedDVersionBoxList; }
        set
        {
            _SelectedDVersionBoxList = value;
            OnPropertyChanged("SelectedDaughterVersionBoxList");
        }
    }

    public ObservableCollection<string> DaughterSerialBoxList
    {
        get { return _DSerialBoxList; }
        set
        {
            _DSerialBoxList = value;
            OnPropertyChanged("DaughterSerialBoxList");
        }
    }

    private string _SelectedDSerialBoxList;
    public string SelectedDaughterSerialBoxList
    {
        get { return _SelectedDSerialBoxList; }
        set
        {
            _SelectedDSerialBoxList = value;
            OnPropertyChanged("SelectedDaughterSerialBoxList");
        }
    }

    private string _DaughterStatus = "Not Retrieved yet";
    public string DaughterStatus
    {
        get { return _DaughterStatus; }
        set
        {
            _DaughterStatus = value;
            OnPropertyChanged("DaughterStatus");
        }
    } 
```

**EEPROMSlotViewModel 类：**

```
EEPROMViewModel mVMModel = new EEPROMViewModel();
private string _SlotButtons;
    public string SlotButtons
    {
        get; set;
    }

    private int _ID;
    public int ID
    {
        get; set;
    }

    private bool _isChecked;
    public bool IsChecked
    {
        get { return _isChecked; }
        set
        {
            _isChecked = value;
            OnSlotClick(ID);
            OnPropertyChanged("IsChecked");
        }
    }

public void OnSlotClick(int Index)
    {
        string label = string.Empty;
        if (Index >= 0 && Index < 24)
        {
            //getShortName(Index, label);
            if (label == string.Empty)
            {
                SlotButtons = Convert.ToString(Index + " : None");
            }
            else
            {
                SlotButtons = Convert.ToString(Index + " :" + label);
            }
        }

        if (label != string.Empty)
        {
            label += " - ";
            //getLongName(Index, label);
        }
        else
        {
            label = "No device found at this slot";
        }

        mVMModel.DaughterStatus = label; // displays it in the label
    } 
```

当我尝试运行应用程序时，它崩溃并抛出异常作为 stackoverflow。当我检查任何单选按钮并调用关节方法时，问题似乎存在于**EEPROMSlotViewModel中。**

我在这里做错了什么？：（ 请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:50:31.213

您的问题出在`mVMModel.DaughterStatus = label; // displays it in the label`您可能正在 EEPROMSlotViewModel 内实例化 EEPROMViewModel 类，这会导致无限循环。
要解决这个问题，您需要访问您的 parentVM，它可以使用`Interfaces`仅显示 DaughterStatus 来完成，但快速答案可能如下：

向您的 EEPROMSlotViewModel 添加一个属性：

```
public EEPROMViewModel ParentVM
        {
            get { return _parentVm; }
            set
            {
                _parentVm = value;
                OnPropertyChanged("ParentVM");
            }
        } 
```

而不是`mVMModel.DaughterStatus = label`; 最后 `ParentVM.DaughterStatus = label;`
：

```
SlotChildren.Add(new EEPROMSlotViewModel() { ParentVM = this, SlotButtons = "0 : None", ID = 0 }); 
```

# perl - 查找多维数组大小

> ID：13133802
> 
> 赞同：4
> 
> 时间：2012-10-30T06:30:09.450
> 
> 标签：perl, multidimensional-array

`()`在 Perl 中使用与 example 有什么区别`[]`？当它使用方括号时如何找到数组的大小？

```
my @myarr = ( # Parenthesis
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
               );

my @myarr = [ # Square bracket
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
               ]; 
```

* * *

谢谢你的解释。我仍在努力理解这一点，目前这让我有点困惑。我仍然无法弄清楚如何在这里遍历我的数据：

```
#!/usr/bin/perl -w

use strict;
use FindBin qw($Bin);
use Cwd;
use Data::Dumper;

my @mynames = (
                [ "myname", "mydescription", "mydata"],
                [ "myname2", "mydescription2", "mydata2"],
                [ "myname3", "mydescription3", "mydata3"],
               );

go();

sub go {
    start(\@mynames);
}

sub start {
    my @input_name = shift;

    # This works
    #print @input_name->[0][0][0];
    #die;

    # This Shows
    #print Dumper(@input_name);
    #$VAR1 = [
    #          [
    #            'myname',
    #            'mydescription',
    #            'mydata'
    #          ],
    #          [
    #            'myname2',
    #            'mydescription2',
    #            'mydata2'
    #          ],
    #          [
    #            'myname3',
    #            'mydescription3',
    #            'mydata3'
    #          ]
    #        ];

    # How do I iterate?
    #for my $i (0..@$input_name) {
    #    my $name = "";
    #    my $description = "";
    #    my $data = "";
    #
    #}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T06:51:05.493

这是错误的：

```
my @myarr = [
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
               ]; 
```

它应该是：

```
my $myarr = [
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
               ]; 
```

上面是“$myarr”。方括号将返回对标量列表的引用。因此需要使用“$”而不是“@”。

*或者*

```
my @myarr = (
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
               ); 
```

它是上面的“()”而不是“[]”。“()”将返回列表，因此它需要“@”。

检查以下迭代 AoA 的代码。这样您就可以访问 AoA 的所有元素。以及*个别*元素：

```
#!/usr/bin/perl -w
use strict;

my @mynames = (
                [ "myname", "mydescription", "mydata"],
                [ "myname2", "mydescription2", "mydata2"],
                [ "myname3", "mydescription3", "mydata3"],
              );

### To access all the elements in above AoA
foreach my $a (@mynames)
{
    foreach my $b ( @{$a} )
    {
        print $b."\t";
    }
    print "\n";
}
print "====================================\n";

### To access individual elements:
print $mynames[1][2]."\n"; ### It prints mydata2 
```

您可能想阅读[perlref](http://perldoc.perl.org/perlref.html)来学习和理解 Perl 引用和嵌套数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:47:40.097

括号不会创建数组，甚至不会创建列表。让我们对您的代码进行有意义的比较：

```
my @myarr1 = (
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
             );

my @myarr2 = (
                [
                   [ "itemone", "itemoneb", "itemonec" ],
                   [ "itemtwo", "itemtwob", "itemtwoc" ]
                ],
             ); 
```

`@myarr1`是具有两个元素的 AoA。
`@myarr2`是具有一个元素的 AoAoA。

要查找 引用的数组的大小`$myarr2[0]`，您可以在标量上下文中使用以下内容：

```
@{ $myarr2[0] } 
```

也就是说，您可能打算使用

```
my $myarr2 = [
                [ "itemone", "itemoneb", "itemonec" ],
                [ "itemtwo", "itemtwob", "itemtwoc" ]
             ]; 
```

在这种情况下，您将在标量上下文中使用以下内容：

```
@$myarr2     # Short for @{ $myarr2 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:05:23.323

这是对更新问题的答案，该问题是关于如何遍历多维数组

# 数组数组

```
my @mynames = (
    [qw(myname  mydescription  mydata )], # the same as 'myname', 'my...', ...
    [qw(myname2 mydescription2 mydata2)],
    [qw(myname3 mydescription3 mydata3)],
); 
```

（正如评论所述，`qw(foo bar)`这只是一种奇特的编写方式`'foo', 'bar'`。）这基本上是一个 AoA（数组的数组），可以这样使用：

## 愚蠢的迭代

```
foreach my $row (@mynames) {
    foreach my $col (@$row) {
        say $col;
    }
    say 'done with this row';
} 
```

输出：

```
myname
mydescription
mydata
done with this row
myname2
mydescription2
mydata2
done with this row
myname3
mydescription3
mydata3
done with this row 
```

但我们确实对这个 AoA 了解得更多：

## 不是那么愚蠢的迭代

```
foreach my $row (@mynames) {
    say join ', ' => @$row;
} 
```

输出：

```
myname, mydescription, mydata
myname2, mydescription2, mydata2
myname3, mydescription3, mydata3 
```

`$row`是一个数组引用，要在 中使用它的列表值`join`，我们必须用`@$row`. 但我们可以做得更好：

## 我们对这里的结构了解更多

```
foreach my $row (@mynames) {
    say "name: $row->[0], description: $row->[1], data: $row->[2]";
} 
```

输出：

```
name: myname, description: mydescription, data: mydata
name: myname2, description: mydescription2, data: mydata2
name: myname3, description: mydescription3, data: mydata3 
```

我们知道第一项是名称，第二项是描述，第三项是某种数据值，所以我们可以在输出中简单地告诉用户这个事实。`$row->[42]`是访问数组 ref 中的单个值的方法，与使用简单数组进行相同的操作相比`$array[42]`。

但我们可以做得更好！

# 哈希哈希

正如我们对我们的结构所了解的那样，最好使用散列哈希 (HoH) 来表达这个结构。由于第一项似乎是其余项的某种（希望是唯一的）名称，我们可以将其用作哈希键，而描述和数据进入新的哈希引用：

```
my %data = (
    myname  => {description => 'foo', data => 42},
    myname2 => {description => 'bar', data => 17},
    myname3 => {description => 'baz', data => 37},
); 
```

现在迭代数据感觉好多了，代码更具可读性和健壮性：

```
foreach my $name (keys %data) {
    say "name       : $name";
    say "description: $data{$name}{description}";
    say "data       : $data{$name}{data}";
} 
```

输出：

```
name       : myname
description: foo
data       : 42
name       : myname3
description: baz
data       : 37
name       : myname2
description: bar
data       : 17 
```

但是，如您所见，输出不再排序。也许这不是问题，但如果你想定义一个订单，你可以用`sort`. 使用这种灵活的构造，您可以例如按一些特定的数据值排序：

## 按数据排序

```
foreach my $name (sort {$data{$a}{data} <=> $data{$b}{data}} keys %data) {
    say "name       : $name";
    say "description: $data{$name}{description}";
    say "data       : $data{$name}{data}";
} 
```

输出：

```
name       : myname2
description: bar
data       : 17
name       : myname3
description: baz
data       : 37
name       : myname
description: foo
data       : 42 
```

[在perldoc -f sort](http://p3rl.org/sort)中阅读有关其工作原理的更多信息。

# 哈希数组

如果你的名字不是唯一的，你可以使用这样的哈希数组：

```
my @data = (
    {name => 'myname', description => 'mydescription', data => 'mydata'},
    # ...
); 
```

我把它作为一个简单的练习留给读者如何操作这个结构。希望能帮助到你！

# 更多阅读

[perlreftut - MJD 关于引用的简短教程](http://p3rl.org/perlreftut)
[perlref - Perl 引用和嵌套数据结构](http://p3rl.org/perlref)
[perldsc - perl 数据结构说明书](http://p3rl.org/perldsc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:46:21.550

方括号`[]`创建对列表的引用，而括号仅创建一个列表。

引用就像一个指针，必须取消引用才能获得它引用的列表。引用是一个标量值，这意味着您可以将它存储在一个标量变量中。您使用`@`前缀来取消引用列表引用，这将为您返回一个列表。

您还可以使用运算符创建引用`\`，例如：

```
[ a,b,c ] is the same as \@a if @a = (a,b,c) 
```

例子：

```
my $a = [5,3,1];    # @$a is the same as (5,3,1)
push(@$a, 10);      # @$a is now (5,3,1,10)
join('-', @$a);     # "5-3-1-10"

say $a->[1];        # Prints "3" - an example of indexing
say $$a[1];         # Also prints "3"

sub foo { my $x = shift; say "Your list has ", scalar(@$x), " elements" }

foo($a);            # Prints: Your list has 4 elements

sub same_length { my ($x, $y) = @_; scalar(@$x) == scalar(@$y) }

same_length( $a, [6,7,8] );    # Returns false
same_length( $a, $a );         # Returns true 
```

请注意`same_length`示例中我们如何将两个列表（通过使用引用）传递给子例程。这是使用引用的主要原因之一。

# java - 字符串替换方法不起作用

> ID：13133803
> 
> 赞同：-4
> 
> 时间：2012-10-30T06:30:13.013
> 
> 标签：java

```
public static String capitalise(String str)
{
     if (str != null || !"".equals(str))
     {
         char chr=str.charAt(0);
         String check= Character.toString(chr);
         String check1= check.toUpperCase();
         char chr1=check1.charAt(0);
         str.replace(chr, chr1);
         return str;            
    }
    else
    {
         System.out.println("Not a valid String");
    }

    return str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:31:43.253

您的问题是您没有从 str.replace 返回结果。字符串是不可变的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:34:14.643

为什么你不简单地使用：

```
String str = "THIS IS my TEST strinG";
String my_string = str.substring(0,1).toUpperCase() + str.substring(1).toLowercase(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:32:28.420

请确保您必须为 String 分配值

```
 str = str.replace(chr, chr1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:37:56.003

```
 str.replace(chr, chr1); 
```

Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar. [replace](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace%28char,%20char%29)
But you are not storing that value. So you can use following code

```
str = str.replace(chr, chr1); 
```

# c# - 为任何数据库支持编写通用驱动程序类

> ID：13133804
> 
> 赞同：4
> 
> 时间：2012-10-30T06:30:16.337
> 
> 标签：c#, .net, database, dll

在过去的几天里，我正在使用各种数据库，例如 MySQL、oracle、Ibmdb2 等，它们通过 odbc 提供程序与 dot net 连接。

例如：

```
1)MySQL:

Driver={MySQL ODBC 5.1 Driver};server=**********;uid=**;database=**;port=***;pwd=***;"

2)oracle:

Driver={Microsoft ODBC for Oracle};server=**********;uid=**;database=**;port=***;pwd=***;"

3)Db2:

Driver={IBM DB2 ODBC DRIVER};server=**********;uid=**;database=**;port=***;pwd=***;" 
```

现在我的问题是

是否可以为任何数据库提供者编写通用类作为

```
Driver={My own driver};server=**********;uid=**;database=**;port=***;pwd=***;" 
```

只需更改 web.config 中的驱动程序名称并将该 dll 文件放在我已发布的 Web 应用程序或网站项目的 bin 文件夹中即可连接每个数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T06:54:05.617

自己滚一个没什么大不了的。这是我将如何实现它以满足最低需求的基本结构（您当然可以扩展它）：

1）首先创建一个指定基本功能的接口。

```
interface IDb
{
    IEnumerable<T> Get<T>(string query, Action<IDbCommand> parameterizer, 
                          Func<IDataRecord, T> selector);

    int Add(string query, Action<IDbCommand> parameterizer);

    int Save(string query, Action<IDbCommand> parameterizer);

    int SaveSafely(string query, Action<IDbCommand> parameterizer);

} 
```

2）创建通用帮助类，它不仅应该实现接口，还应该由 type 指定`IDbConnection`。该类应该更好（不一定）可实例化（非静态），以便您可以传递所需的连接字符串来实例化它。

这是一个完全惰性的实现：

```
using System;
using System.Data;
using System.Collections.Generic;
using System.Linq;

public class Db<T> : IDb where T : IDbConnection, new()
{
    string connectionString;

    public Db(string connectionString)
    {
        this.connectionString = connectionString;
    }

    IEnumerable<S> Do<R, S>(string query, Action<IDbCommand> parameterizer, 
                            Func<IDbCommand, IEnumerable<R>> actor, Func<R, S> selector)
    {
        using (var conn = new T())
        {
            using (var cmd = conn.CreateCommand())
            {
                if (parameterizer != null)
                    parameterizer(cmd);
                cmd.CommandText = query;
                cmd.Connection.ConnectionString = connectionString;

                cmd.Connection.Open();

                foreach (var item in actor(cmd))
                    yield return selector(item);
            }
        }
    }

    public IEnumerable<S> Get<S>(string query, Action<IDbCommand> parameterizer, Func<IDataRecord, S> selector)
    {
        return Do(query, parameterizer, ExecuteReader, selector);
    }

    static IEnumerable<IDataRecord> ExecuteReader(IDbCommand cmd)
    {
        using (var r = cmd.ExecuteReader(CommandBehavior.CloseConnection))
            while (r.Read())
                yield return r;
    }

    public int Add(string query, Action<IDbCommand> parameterizer)
    {
        return Do(query, parameterizer, ExecuteReader, r => Convert.ToInt32(r[0])).First();
    }

    public int Save(string query, Action<IDbCommand> parameterizer)
    {
        return Do(query, parameterizer, ExecuteNonQuery, noAffected => noAffected).First();
    }

    static IEnumerable<int> ExecuteNonQuery(IDbCommand cmd)
    {
        yield return cmd.ExecuteNonQuery();
    }

    public int SaveSafely(string query, Action<IDbCommand> parameterizer)
    {
        // 'using' clause ensures rollback is called, so no need to explicitly rollback
        return Do(query, parameterizer, cmd => 
        {
            using (cmd.Transaction = cmd.Connection.BeginTransaction())
            {
                var noAffected = ExecuteNonQuery(cmd);
                cmd.Transaction.Commit();
                return noAffected;
            }
        }, noAffected => noAffected).First();
    }
} 
```

这只做基本的`ExecuteNonQuery`和`ExecuteReader`like操作，和simple `Transaction`s。没有存储过程。该`Add`函数用于插入和检索最后插入的 id 和 likes。让事情变得懒惰并且只使用一个核心执行函数`Do`（被各种数据库操作调用）真是太疯狂了，这就是为什么`Do`看起来很复杂，但它非常干燥。理想情况下最好分开。你也可以摆脱`Linq`。

3）最后提供静态包装器`Db`，在可实例化类周围没有通用约束，`Db`这样您就不必`T`每次都传递参数来进行数据库查询。例如像这样：

```
public static class Db
{
    static IDb db = GetDbInstance();

    static IDb GetDbInstance()
    {
        // get these two from config file or somewhere
        var connectionString = GetConnectionString();
        var driver = GetDbType();   // your logic to decide which db is being used

        // some sort of estimation of your db
        if (driver == SQLite)
            return new Db<SQLiteConnection>(connectionString);
        else if (driver == MySQL)
            return new Db<MySqlConnection>(connectionString);
        else if (driver == JET)
            return new Db<OleDbConnection>(connectionString);
        //etc

        return null;
    }

    public static void Parameterize(this IDbCommand command, string name, 
                                    object value)
    {
        var parameter = command.CreateParameter();
        parameter.ParameterName = name;
        parameter.Value = value;
        command.Parameters.Add(parameter);
    }

    public static IEnumerable<T> Get<T>(string query, 
                                        Action<IDbCommand> parameterizer, 
                                        Func<IDataRecord, T> selector)
    {
        return db.Get(query, parameterizer, selector);
    }

    public static int Add(string query, Action<IDbCommand> parameterizer)
    {
        return db.Add(query, parameterizer);
    }

    public static int Save(string query, Action<IDbCommand> parameterizer)
    {
        return db.Save(query, parameterizer);
    }

    public static int SaveSafely(string query, Action<IDbCommand> parameterizer)
    {
        return db.SaveSafely(query, parameterizer);
    }
} 
```

4) 现在我将在某处创建一个额外的静态函数`GetDbInstance`，以便它推断出正确的数据库参数，如连接字符串、提供程序类型等。还有一个扩展方法来简化查询的参数化。我将它们都放在上面的静态`Db`类中，但这是你的选择（有些人将它写在 Db 类本身中，但我更喜欢它在外面，因为功能应该是你的应用程序的）。

5）注意在您喜欢的数据库上使用中性查询。

*或者*

您可以利用[DbProviderFactory](http://msdn.microsoft.com/en-us/library/system.data.common.dbproviderfactory.aspx)`System.Data.Common`来检测您拥有的 /provider 的类型`DbConnection`。您可以只拥有一个非泛型`Db`类并执行以下操作：

```
public class Db
{
    string connectionString;
    DbProviderFactory factory;

    public Db(string driver, string connectionString)
    {
        this.factory = DbProviderFactories.GetFactory(driver);
        this.connectionString = connectionString;
    }

    //and your core function would look like
    IEnumerable<S> Do<R, S>(string query, Action<IDbCommand> parameterizer, 
                            Func<IDbCommand, IEnumerable<R>> actor, 
                            Func<R, S> selector)
    {
        using (var conn = factory.CreateConnection())
        {
            // and all the remaining code..
        }
    }
} 
```

您的`GetDbInstance`方法如下所示：

```
static IDb GetDbInstance()
{
    string connectionString = GetConnectionString();
    string driver = GetDriver();

    return Db(driver, connectionString);
} 
```

优点：您摆脱了`if-else`编程风格，`Db`将根据配置文件中的提供程序和连接字符串实例化正确版本的类。

缺点：您需要在配置文件中指定正确的提供程序/驱动程序。

* * *

来自 C# 代码的示例查询如下所示：

```
string query = "SELECT * FROM User WHERE id=@id AND savedStatus=@savedStatus";
var users = Db.Get(sql, cmd =>
{
    cmd.Parameterize("id", 1);
    cmd.Parameterize("savedStatus", true);
}, selector).ToArray(); 
```

你所要做的就是调用`Db.Get`等`Db.Save`。函数`GetDbInstance`是这里的关键，它在正确的 dll 中找到要调用的函数，并且帮助类在很好地管理资源的同时还完成了各种数据库操作的任务。这样的类将避免每次打开和关闭连接、释放资源、必须包含数据库 dll 命名空间等的麻烦。这就是所谓的[DbAL](http://en.wikipedia.org/wiki/Database_abstraction_layer)。您还可以有一个[附加层](http://en.wikipedia.org/wiki/Data_access_layer)来帮助 DbAL 在各种强类型模型类之间进行通信。我只是喜欢通过接口和约束实现的多态性的强大功能，这非常非常 OOP！:)

# javascript - 您可以将图像的 src 更改为 Javascript 中的变量吗？

> ID：13133811
> 
> 赞同：0
> 
> 时间：2012-10-30T06:30:47.290
> 
> 标签：javascript

好吧，我很确定你可以，除了我的代码现在失败了。

我要告诉我的简短小`Javascript`程序要做的是，从数组中选择一个代码（我现在已经预设了测试代码 0），然后使用该代码获取该`Youtube`视频代码的缩略图，以制作一个半自动的`Youtube`画廊，这意味着我不必进去，手动完成所有繁琐的工作，只需转到视频并将代码复制到数组中，但是，当我尝试将图像的 src 更改为url（变量）通过`document.getelementblahblah.src=myVar`，
我得到控制台错误：*`Uncaught TypeError: Cannot set property 'src' of null`*

这是我的代码：

```
<!Doctype HTML>
<html>
<head>
<script>
var thumbPrefix = "http://img.youtube.com/vi/";
var thumbSuffix = "/mqdefault.jpg";
var vidCode = ['fL01KMMi5_M','6akcfoJ05Aw','lPpot4OCnQs'];
var thumb1Url = thumbPrefix + vidCode[0] + thumbSuffix;
document.write(thumb1Url); //this is just to visualize url
document.getElementById('pie').src=thumb1Url;
</script>
</head>
<body>
<img src="" id="pie" />
</body>
</html> 
```

而且，我也尝试过 setAttribute 方法，所以......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:34:10.710

> *“我收到控制台错误：* `Uncaught TypeError: Cannot set property 'src' of null` ”

那是因为`document.getElementById('pie')`已经返回`null`，因为它没有找到具有 id 的元素`'pie'`，因为您的脚本在浏览器解析有问题的元素之前正在运行。

浏览器在遇到脚本块时以脚本块的形式运行代码 - 在文档中从上到下。

将脚本块移动到文档的末尾（例如，就在结束`</body>`标记之前）或将代码放在名为 onload 的函数中。这样，您的图像元素将被解析并可以从 JS 进行操作。

（您尝试设置变量的事实`.src`根本不是问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:41:05.023

The reason this is not working is that at the time your code is run, the 'pie' element hasn't been parsed and inserted into the DOM tree yet.

You need to essentially delay the execution of your code until the DOM element you're looking for is completely parsed, so putting that 'script' element just before the closing 'body' tag would solve your issue.

Alternatively, you could also bind an eventHandler to fire when the DOM tree has been parsed. I'd highly recommend going with a library to do this, to help overcome all the cross-browser issues. [jQuery](http://jquery.com/) is a popular solution, but if you don't wish to include a huge library on your page, [this](https://github.com/ded/domready) library can help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:34:31.117

`pie`当您尝试设置其源时，对象“ ”不存在。该脚本在浏览器遇到时被解析并执行。在您的页面中，首先是脚本，然后是图像标记。您可以按如下方式更正它

```
<!Doctype HTML>
<html>
<head>
<script>
function setImage(){
    var thumbPrefix = "http://img.youtube.com/vi/";
    var thumbSuffix = "/mqdefault.jpg";
    var vidCode = ['fL01KMMi5_M','6akcfoJ05Aw','lPpot4OCnQs'];
    var thumb1Url = thumbPrefix + vidCode[0] + thumbSuffix;
    //document.write(thumb1Url); THIS IS CAUSING DOCUMENT TO CLEAR OF ALL MARKUP :(
    document.getElementById('pie').src=thumb1Url;
}
</script>
</head>
<body onLoad='setImage'>
<img src="" id="pie" />
</body>
</html> 
```

这`document.write(thumb1Url)`也是造成问题的原因。请尝试`Console.log`改用调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:35:31.030

您的脚本失败，因为它位于文档的头部，并且在加载内容之前执行。[像这样](http://jsfiddle.net/gLTXe/)放在身体里，效果很好。

```
<body>

    <img src="" id="pie" />
    <script>
        var thumbPrefix = "http://img.youtube.com/vi/";
        var thumbSuffix = "/mqdefault.jpg";
        var vidCode = ['fL01KMMi5_M','6akcfoJ05Aw','lPpot4OCnQs'];
        var thumb1Url = thumbPrefix + vidCode[0] + thumbSuffix;
        document.write(thumb1Url); //this is just to visualize url
        document.getElementById('pie').src=thumb1Url;
    </script>
</body> 
```

# jquery - 简单的jQuery mouseover, mouseout, click script

> ID：13133812
> 
> 赞同：1
> 
> 时间：2012-10-30T06:30:59.690
> 
> 标签：jquery, click, mouseover, mouseout

我有 5 个国家的 5 面旗帜。如果有人将鼠标悬停在标志上，将显示相应的 div。如果 mouseout，div 将隐藏。如果单击该标志，那么我想保持 div 可见并禁用 mouseout 事件。以下编码使一切正常，但是当有人点击标志时，之前的标志不起作用，但点击时下一个标志。如果我先点击最后一个标志，那么前面的标志都不起作用！！！

请有人帮助我。

谢谢阅读。

```
 <!-- popup UN -->
<div class="popup popup_hide popup_un" id="popup_un">
    <div class="popup_top"></div>
    <div class="popup_country">
        <img src="images/usa.gif" alt="USA">  
        <a href="#" class="hide_popup"><span class="close"></span></a>
        <div class="popup_country_text"> 
            <div class="popup_country_text_normal">  
            </div>
            <div class="btn_email_us"><a href="#"><img src="images/btn_email.jpg" alt="email us"></a></div>
        </div>
    </div>
</div> 

 <div id="footer_flag">
<a href="#" class="showPopup showPopupClicked" rel="popup_au"><img id="popup_au_img" src="images/au.gif" alt="AU"></a>
<a href="#" class="showPopup showPopupClicked" rel="popup_nz"><img id="popup_nz_img" src="images/nz.gif" alt="AU"></a>
<a href="#" class="showPopup showPopupClicked" rel="popup_uk"><img id="popup_uk_img" src="images/uk.png" alt="UK"></a>
<a href="#" class="showPopup showPopupClicked" rel="popup_canada"><img id="popup_canada_img" src="images/canada.png" alt="Canada"></a>
<a href="#" class="showPopup showPopupClicked" rel="popup_usa"><img id="popup_usa_img" src="images/usa.gif" alt="USA"></a>
<a href="#" class="showPopup showPopupClicked" rel="popup_un"><img id="popup_un_img" class="footer_flag_un" src="images/un.png" alt="UN"></a> 
```

```
$(document).ready(function(){

    $('.showPopup').mouseover( function() {
        $('.popup').hide();
        $('#' + $(this).attr('rel')).show()  
    });

    $('.showPopup').mouseout( function() {
        $('.popup_hide').hide(); 

    });             

    $('.hide_popup').click( function() {
        $('.popup').hide(); 
        $('img').removeClass('border_grey'); 

    });

    $('.showPopupClicked').click( function() {
        $('a').removeClass('showPopup');
        $('img').removeClass('border_grey');
        $('.' + $(this).attr('rel')).removeClass('popup_hide');
        $('#' + $(this).attr('rel') + '_img').addClass('border_grey');

    }); 
}); 
```

]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:57:56.947

代码：

```
var mouseOver = function() {
    //$('.popup').hide();
    $('#' + $(this).attr('rel')).show();
};

var mouseOut = function() {
    //$('.popup').hide();
    $('#' + $(this).attr('rel')).hide();
};

$('.showPopup').mouseover(mouseOver);
$('.showPopup').mouseout(mouseOut);

$('.showPopup').click(function() {
    $('#' + $(this).attr('rel') + '_img').removeClass('border_grey');
    if ($(this).hasClass("selected")) {
        $('#' + $(this).attr('rel')).hide();
        $(this).removeClass("selected");

        $(this).bind("mouseover", mouseOver);
        $(this).bind("mouseout", mouseOut);
    } else {
        $(this).addClass("selected");
        $('#' + $(this).attr('rel') + '_img').addClass('border_grey');
        $('#' + $(this).attr('rel')).show();

        $(this).unbind("mouseover", mouseOver);
        $(this).unbind("mouseout", mouseOut);
    }
}); 
```

工作[小提琴](http://jsfiddle.net/3Gj9T/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:43:30.650

尝试`$('#' + $(this).attr('rel') + '_img').show()`

此外，实际上没有任何东西有 class `.popup`，所以我不确定`$('.popup').hide();`完成了什么。

# c# - 高级聊天程序（书写前缀）

> ID：13133818
> 
> 赞同：1
> 
> 时间：2012-10-30T06:31:40.530
> 
> 标签：c#, list, chat, textwriter

我编写了一个聊天程序巨人，到目前为止，我已经成功克服了所有阻碍我的障碍，甚至是我思考了好几天的障碍，但我无法理解这一点。所以我正在研究前缀系统，我在目标文本框中输入目标名称，在前缀文本框中输入前缀名称，然后单击前缀按钮。我已经将用户名和选择的前缀写入带有“|”的文本文件 分开它。像这样：

```
void writePrefixes(string target, string prefixs)
    {
        TextWriter twp = new StreamWriter("prefix.txt");
        twp.WriteLine(target + "|" + prefixs + Environment.NewLine);
        twp.Close();
    } 
```

现在，每次服务器启动时，它都会导入文本文件并使用 foreach 循环将每个文件加载到列表中。现在，每次客户端发送消息时，我希望在列表中使用“target”检查它的用户名，然后将其用户名修改为在其前面有前缀。我怎样才能做到这一点？提前致谢！抱歉，问题太长了，我是新手，如果太长，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:55:06.720

所以你有一个包含如下数据的文本文件：

user1|pre1
user2| pre2
等

你正在将这些字符串加载到一个普通的列表中吗？我认为这样的事情将是最好的选择：

```
var userList = new List<string>();
userList.Add("TestUser1|pre1");
userList.Add("TestUser2|pre2");

foreach (var user in userList)
{
    var userParts = user.Split(new[] { '|' });
    var userName = userParts[0];
    var prefix = userParts[1];

    Console.WriteLine(string.Format("{0}{1}", prefix, userName));
} 
```

希望我已经正确理解了你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:58:47.590

所以你基本上有两个列表：一个带有用户名，一个带有前缀，两个都是字符串。我想您必须存储输入的每个前缀，并由您的前缀未使用的字符分隔。

```
//go through file
var entry = file.ReadLine().Split('|');
userList.Add(entry[0]);
prefixList.Add(entry[1]);

//when you want to go for the prefix
var idx = userList.IndexOf(username);
var allPrefix = prefixList[idx].Split("seperator");
var newPrefix = allPrefix[prefixList[idx].Count - 2];

//yes you have to make sure the index is correct, you dont leave bounderies etc. but I hope you get the idea 
```

You also would have to make sure the index which was used before is removed from the list to be saved.

# python - 如何在 Python 中的 map 中指定参数？

> ID：13133834
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:32:34.487
> 
> 标签：python, map, functional-programming

我可以在 map 中指定其他参数吗？

例如，我有以下代码：

```
def f(a, b):
    return a + b
l = [1, 2, 3]
ll = map(f, l) 
```

我怎样才能给`map`上面的参数一个参数，以便每个元素`ll`都是一个元素和给定参数的总和`l`？

例如，如果我可以使用类似的东西`map(f(2,), l)`，我会得到`[3, 4, 5]`结果。

我知道我可以通过列表理解或 for 循环来获得相同的结果，但我只想知道是否有可能以某种`map`方式做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:37:57.530

`map`本身并没有直接提供一种方法来做到这一点。但是，您可以通过使用`functools.partial`预先指定静态参数来做到这一点：

```
>>> def add(x, y):
...     return x+y
>>> map(functools.partial(add, y=10), [1, 2, 3])
[11, 12, 13] 
```

然而，正如@jamylak 在评论中建议的那样，没有理由这样做。如果您不想存储结果，只需执行常规 for 循环：

```
for item in [1, 2, 3]:
   add(item, 10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T06:41:10.833

您正在寻找[`functools.partial`](http://docs.python.org/3/library/functools.html#functools.partial)，用于实现[部分应用程序](http://en.wikipedia.org/wiki/Partial_application)：

```
ll = map(functools.partial(f, 2), l) 
```

请注意，在许多情况下，[列表推导式](http://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)或[生成器表达式](http://docs.python.org/3/reference/expressions.html#generator-expressions)更具可读性：

```
ll = [f(2, x) for x in l] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:35:25.467

你不应该使用`map()`这个，而是列表理解：

```
new_lst = [f(x, other_value) for x in lst] 
```

另一种选择是 lambda。但不要这样做：

```
new_lst = map(lambda x: map(x, other_value), lst) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:58:27.290

你也可以考虑：-

```
def f(a):
    return a + b
l = [1, 2, 3]
b = 2
ll = map(f,l)

print ll 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T21:05:45.917

这是你想要的：

```
 listA=[1,2,3]

  def f(a,b=2):
    return a+b

  result = map(f,listA)

  print result 
```

或者，如果您在两个列表中有相同数量的项目，您可以执行以下操作：

```
 listA=[1,2,3]
  listB=[2,2,2]
  def f(a,b):
    return a+b

  result = map(f,listA,listB)

  print result 
```

# jax-ws - 发送 XML 数据的客户端应用程序

> ID：13133846
> 
> 赞同：1
> 
> 时间：2012-10-30T06:33:59.653
> 
> 标签：jax-ws, webservice-client

我想询问，正在使用 Web 服务的客户端应用程序是否可以向 Web 服务发送大量（54 MB）数据？客户端应用程序是否也必须是 Web 服务？如果是，那么数据将作为对 Web 服务请求的响应发送，我们如何能够从 Web 服务发送确认回执

我是网络服务的新手，所以任何帮助或指导都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:04:03.963

> 向 Web 服务发送大量 (54 MB) 数据？

是的，这对于大公司来说是可能的并且很常见。然而，做出了一些决定，这有助于优化并可能加速传输，例如

1.  **数据传输格式/协议**：您可以通过为有效负载选择正确的数据格式来节省消息有效负载的大小。用于 Web 服务数据传输的两种最流行的数据格式（也称为协议）是[JSON](http://json.org/index.html)和 XML（扩展名为[SOAP](http://www.digilife.be/quickreferences/PT/XML%20messaging%20with%20SOAP.pdf)，一种基于 XML 的消息传递协议）。JSON 是更轻量级的选项（尽管它的应用程序有些限制），而 XML 是更重的（但更通用的选项）。

2.  **数据传输协议**：轻量级传输协议还可以帮助节省消息传输效率和速度。在这方面，[REST](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)是轻量级路由的首选传输协议。在实践中，大多数 Web 服务都是基于 HTTP 的，但是 Web 服务范式让您可以在各种传输协议（SMTP、RMI 是选项）中向 Web 服务发送请求，前提是您确定 Web 服务能够了解您发送数据的传输协议

3.  **二进制数据的处理**：Web 服务消息通常作为文本/字符类型的有效负载传输。在处理二进制数据（图像、文件等）时，您必须对您的选项更具选择性（阅读：谨慎），因为为二进制数据选择错误的数据传输类型会导致数据（消息）膨胀。SOAP 消息传输协议格式在这方面提供了几个选项。[如果消息包含二进制数据，则可以调整这些标准](http://www.crosschecknet.com/intro_to_mtom.php)的标准和具体实现以优化消息的大小。

> 客户端应用程序是否也必须是 Web 服务？

不，Web 服务中的关键字是**service**，即您要服务的应用程序/系统客户端。您的责任最终是通过预先确定的渠道以预先确定的格式向服务发送格式正确的数据（并根据您使用的服务类型期待对您的请求的可选响应）。除非您使用的服务明确定义了对系统的要求，因此发送另一条消息以确认较早的响应（在我看来这是灾难性的糟糕设计），否则您没有义务这样做。

# vb.net - 在运行时更改 Windows 8 XAML 文本框的背景

> ID：13133850
> 
> 赞同：0
> 
> 时间：2012-10-30T06:34:16.447
> 
> 标签：vb.net, windows-8, winrt-xaml

如何根据运行时的值更改 XAML 文本框的背景颜色？这些颜色值可以由最终用户自定义。似乎我不能只设置“背景”属性。

```
 <TextBox Name="nameInput" Width="300" HorizontalAlignment="Left" /> 
```

后面的代码将如何实现这一点？这不起作用：

```
Private Sub NameInput_TextChanged(sender As Object, e As TextChangedEventArgs) Handles nameInput.TextChanged

    Select Case nameInput.Text
        Case "x"
            nameInput.Background = "Red"
        Case "y"
            nameInput.Background = "Green"
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:53:52.227

您需要分配`SolidColorBrush`而不仅仅是`Color`.

```
Private Sub NameInput_TextChanged(sender As Object, e As TextChangedEventArgs) Handles nameInput.TextChanged

Select Case nameInput.Text
    Case "x"
        nameInput.Background = new SolidColorBrush(Windows.UI.Colors.Red);
    Case "y"
        nameInput.Background = new SolidColorBrush(Windows.UI.Colors.Green);
End Select
End Sub 
```

# graph - FAT 是否不允许无向循环？

> ID：13133858
> 
> 赞同：1
> 
> 时间：2012-10-30T06:34:42.130
> 
> 标签：graph, tree, operating-system, cycle, fat

出于教育目的，我正在滚动我自己的 FAT 阅读器（允许您浏览驱动器等）。我当前的问题是确定当前的工作目录（例如典型命令提示符中的提示符）。据我所知，目录表没有提供有关您到达那里的路径的信息。（我一直在按照我在[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463080.aspx)找到的标准工作）因此，我目前的方法只是跟踪您通过的每个目录（即基本上每次`cd <dir>`使用，将该值放入列表中，并在`cd ..`是时删除最后一个用过的）

这就是问题所在。假设两条不同的路径将您带到同一个目录。如果您随后`..`向上跟踪目录，则问题变得比仅从列表中删除最后一个目录名称更复杂。如果`..`带你走你没有下来的路径，你实际上必须确定一个全新的工作目录。

如果 FAT 不允许无向循环，则此问题变得无关紧要。（我相信我读到某些文件系统不允许这种复杂性正是出于简化遍历的原因，但我找不到 FAT 的具体信息）我需要担心这个吗？换句话说，FAT 是用树还是一般图来描述的？

作为参考，我正在处理 FAT16 和 FAT32（顺便说一下在 Linux 上的 C 语言中，但我认为这无关紧要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:29:29.247

FATx 格式中没有任何内容不允许循环。但是，如果您允许循环，还有其他问题：

*   正如所指出的，当两个目录条目指向同一个目录时，“..”是不明确的。通常没什么大不了的，因为 DOS/WINDOWS 维护目录的全文并且执行“cd ..”是名称操作，而不是目录遍历。*NIX，另一方面会有问题。
*   没有引用计数，这意味着 RMDIR X 无法有效地释放磁盘空间，除非它执行整个树遍历以查看是否有对该目录的任何其他引用。
*   更糟糕的是，可能会从根“断开”循环，留下无法到达的空间，CHKDSK/fsck 需要清理这些空间。

（注意这些是 *NIX 不允许硬链接到目录的一些原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:51:41.663

有两个父目录指向同一个子目录并不重要，因为*您*的目录堆栈中没有这种二元性。当用户发出`cd ..`命令时，只需弹出堆栈即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T03:27:36.887

四处询问，有经验的操作系统人员告诉我，FAT 没有明确禁止循环，但它会增加所有实现都忽略它的复杂性。毕竟，标准操作系统无法在没有位级黑客攻击的情况下创建这样的循环。因此，这个问题可以忽略。

# jquery - jQuery on keyup 并忽略特定事件

> ID：13133860
> 
> 赞同：0
> 
> 时间：2012-10-30T06:34:44.623
> 
> 标签：jquery

我有以下，但它不工作。jQuery 事件是否支持 keyCode 或者我需要在其他地方获取它？

```
$('#search-query').on('keyup',function(event){
  if(event.keyCode!==38 or event.keyCode!==40){
    search_autocomplete.call(this);
  }
}); 
```

如果它是 keyCode 38 或 40，我将如何告诉 jQuery 忽略它？最终，我想让它喜欢[http://www.linkedin.com/](http://www.linkedin.com/)上的搜索栏。也许只是引导它？[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:40:18.577

使用`||`逻辑运算符而不是`or`在 if 语句中加入条件。

**[现场演示](http://jsfiddle.net/8Qvgt/)**

**改变**

```
 if(event.keyCode!==38 or event.keyCode!==40){ 
```

**到**

```
 if(event.keyCode!==38 || event.keyCode!==40){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:43:23.707

确保同时使用`event.keyCode` 和`event.which` 以实现跨浏览器兼容性

```
$('#search-query').on('keyup',function(event){

   var key = event.keyCode || event.which;

  if(key !==38 || key !==40){
    search_autocomplete.call(this);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:44:51.617

看看按键...

```
$('#search-query').keypress(function (e) {
    if(e.which == 38  || e.which == 40) 
        search_autocomplete.call(this);
    }
}); 
```

未经测试，但希望这会有所帮助

# java - 如何在 Java 中重新绘制面板？

> ID：13133861
> 
> 赞同：2
> 
> 时间：2012-10-30T06:34:46.343
> 
> 标签：java, swing, jpanel, repaint, keylistener

我有一个专门的框架类和一个专门的面板类。我有一个按键监听器设置来监听“右”键（->）的按键，然后我调用重绘但是当我按下“右”键时没有任何反应。我相信我的 keylistener 做得很好，所以我认为这一定是我调用 repaint(); 的方式。请让我知道如何解决这个问题。

编辑* 我想补充一点，我在 CircleFrame 中将 x 和 y 设为静态，因为我找不到调用我编写的 incX() 和 incY() 方法的方法。这是因为，最初，面板的创建是在 CircleBox 的构造函数中完成的。我把它拿出来放在 main 中，以便有一种方法可以为面板调用 repaint() ，但这不起作用。我觉得这里缺少一些重要的步骤。

```
package circlebox;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.util.Random;

public class CircleBox extends JFrame implements KeyListener {
    CircleBox() {

    }

    public void keyPressed(KeyEvent e) {
        int location = e.getKeyLocation();
        if(location == KeyEvent.KEY_LOCATION_NUMPAD) {
            CircleFrame.y += 1;
            repaint();
        }
    }

    public void keyReleased(KeyEvent e) {

    }

    public void keyTyped(KeyEvent e) {

    }

    public static void main(String[] args) {
        CircleBox frame = new CircleBox();
        frame.setSize(400,400);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        CircleFrame frame2 = new CircleFrame();
        frame.setLayout(new GridLayout(1,1));
        frame.add(frame2);

        frame.setVisible(true);
    }
}

class CircleFrame extends JPanel {
    static int x = 20;
    static int y = 20;
    int radius = 20;

    CircleFrame() {
        setSize(400,400);
    }

    @Override
    protected void paintComponent(Graphics g) {
        g.drawOval(x,y,radius,radius);
    }

    public void incX(int inc) {
        x += inc;
    }

    public void incY(int inc) {
        y += inc;
    }

    public int checkCollisions() {
        if(x <= 0) {
            return 0;
        }
        else if(y <= 0) {
            return 1;
        }
        else if(x >= 400) {
            return 2;
        }
        else if(y >= 400) {
            return 3;
        }
        else {
            return -1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:42:49.593

你的重绘工作正常。问题出在关键监听器上。

您首先需要实际注册您的关键侦听器。因此，在构造函数中添加这一行`CircleBox`：

```
addKeyListener(this); 
```

然后，您必须`keyPressed`正确处理：

```
public void keyPressed(KeyEvent e) {
    // TODO: your are actually moving the circle down, so it should be VK_DOWN
    if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
        CircleFrame.y += 1;
        repaint();
    }
} 
```

# android - Android：如何在 Facebook 应用配置中使用多个包

> ID：13133862
> 
> 赞同：6
> 
> 时间：2012-10-30T06:34:54.747
> 
> 标签：android, facebook

我可以在 Facebook 配置设置中有超过 1 个包名称，以便在我的应用程序中使用 Facebook API。

![在此处输入图像描述](../Images/0bb2a7ea61773d9f6c3544ff6954ecb2.png)

我必须能够将同一个 Facebook 应用程序用于不同的 Android 应用程序，对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T06:38:09.360

你只需要一个密钥哈希。无需输入包名和类名。用于您的 Facebook 集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:38:56.763

您需要为每个 Android 应用程序创建一个新的 Facebook 应用程序。多个包名称会破坏许多功能，例如深度链接。我认为它还用于存储 Facebook 权限，以便用户可以轻松撤销应用程序的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T14:07:45.430

我认为，可以向 Facebook 应用程序添加多个包名称。

[![在此处输入图像描述](../Images/be00de49ee8d42945dd14ade4bc4524d.png)](https://i.stack.imgur.com/Qu1a4.png)

# javascript - 需要使用 javascript 解析 Json 字符串

> ID：13133863
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:34:57.467
> 
> 标签：javascript, json, jquery

我的 json 值来自 java，如

```
var obj = "[{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"},{"id":"58","str":"sd <p/> Comment By Smith John on 2012-10-30"}] ". 
```

我想使用 jquery 解析为 $.parseJSON(obj);

我收到未定义的错误。我想获取 id 值。

我包括了 jquery-ui.js 和 jquery.js。

我签入了 jsonlint 并将其作为有效的 json。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:37:41.207

包含字符的 JavaScript 字符串`"`必须由`'`字符分隔或`"`转义为`\"`.

使用您当前的代码，您应该在尝试解析尝试实例化的 JS 时遇到错误，然后才会`obj`抱怨.`obj``undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:47:37.633

请先为字符串添加转义参数，如下所示。

```
var obj = "[{\"id\":\"58\",\"str\":\"sd <p/> Comment By Smith John on 2012-10-30\"},{\"id\":\"58\",\"str\":\"sd <p/> Comment By Smith John on 2012-10-30\"}]" 
```

然后将解析后的对象带到一个变量中，并以下面的方式访问 id..

var tmp = $.parseJSON(obj); tmp[1].id;

希望你得到答案。

# c# - 基于列和值dataGridView查找和替换字符串

> ID：13133866
> 
> 赞同：0
> 
> 时间：2012-10-30T06:35:13.630
> 
> 标签：c#, winforms, replace

嗨，我有一个 5 列的 datagridVew。用户将选择任何单元格并传递值`Str1`并`Str2`进行查找和替换。但是，我想将查找和替换限制为所选单元格所属的一列

我怎样才能做到这一点 ？

# google-api - 使用电子邮件审核 API 下载邮箱

> ID：13133869
> 
> 赞同：0
> 
> 时间：2012-10-30T06:35:36.123
> 
> 标签：google-api, google-email-audit-api

我正在尝试下载用户的邮箱。为此，首先我生成了公钥，然后将其上传到域。然后尝试下载用户的邮箱..但是即使该用户有 5 到 10 封邮件，下载也需要很长时间..当我下载邮箱时，我得到了该邮箱的请求 ID，当我尝试获取此请求ID邮箱的状态，它给等待......所以请给我建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:33:47.410

我得到了答案，几个小时后我得到了完成状态，并且还获得了下载邮箱的下载 URL...当我点击该 URL 时，我的机器上下载了一个文件....

电子邮件审核 API 需要一些时间来处理请求.....

# rest - 通用 Crud Restfull 服务

> ID：13133870
> 
> 赞同：2
> 
> 时间：2012-10-30T06:35:39.210
> 
> 标签：rest, jakarta-ee, jersey, ejb-3.1

我是一名高级 Java 开发人员（也是 stackoverflow 中的新手），从事客户端-服务器项目：

*   服务器：javaee6 web 项目（Rest，EJB3.1，JPA）
*   客户端：javaee6 Web项目（JSF2.0）和Android设备。客户将要求： Crud 和执行一些存储过程。
*   实体：它们都在 java 项目中，该项目具有使用 JPA 和 eclipse-link 作为提供者和 JAXB 注释生成的实体类。它的 jar 文件已添加到服务器项目中，客户端也将使用它。

对于每个实体，客户端只需传递实体的 Class 类型，它将具有所需的功能。

因此，我尝试使用具有 Restful 方法 findAll 的 Generic Session bean，如下所示：

```
@Stateless
@Path("/DAOFacad/")
public class DAOFacade<T> {

     @PersistenceContext EntityManager entityManager;

     @PUT
     @Consumes("application/json")
     @Produces("application/json")
     public List findAll(Class type) {
        CriteriaQuery cq = entityManager.getCriteriaBuilder().createQuery();
        cq.select(cq.from(type));
        return entityManager.createQuery(cq).getResultList();
     } 
```

}

在客户端 web 项目中，我有这样的事情：

```
public class Consumer {
    private WebResource webResource;
    private Client client;
    private static final String BASE_URI = "http://localhost:8181/ServerPRS/webresources";

    public Consumer() {
        com.sun.jersey.api.client.config.ClientConfig config = new com.sun.jersey.api.client.config.DefaultClientConfig();
        client = Client.create(config);
        webResource = client.resource(BASE_URI).path("DAOFacad");
    }

    public <T> T findAll(Class<T> responseType, Object requestEntity) throws UniformInterfaceException {
        return webResource.type(javax.ws.rs.core.MediaType.APPLICATION_JSON).put(responseType, requestEntity);
    }

    public void close() {
        client.destroy();
    }

} 
```

一个被管理的：

```
public class AdminContollerMB {

Consumer consumer;
    /**
     * Creates a new instance of AdminContollerMB
     */
    public AdminContollerMB() {
        consumer = new Consumer();
    }

    public List<Bank> getAllBanks(){
        GenericType<List<Bank>> respT = new GenericType<List<Bank>>(){};
        return (List<Bank>) consumer.findAll(respT.getClass(),Bank.class);
    } 
```

但运行后我得到错误：

```
com.sun.jersey.api.client.ClientHandlerException: A message body writer for Java type, class java.lang.Class, and MIME media type, application/json, was not found 
```

我已经搜索了很多。我在 jersey api 和谷歌的 gson api 中尝试了 GenericEntity 和 GenericType，但他们没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:25:06.593

您的方法被调用`findAll`但接受`PUT`。这不是 RESTful 服务的构建方式。

我猜你想要`GET`某种资源的所有实例。在 RESTful 服务中，资源与 Java 类无关。因此，如果您想要一个*通用* `findAll` `GET`方法，请执行以下操作：

```
@GET
public Response findAll(@QueryParam("class") String clazz) {
    List<Object> instances = findAllInstancesOfClazz(clazz);
    return Response.ok(instances).build();
} 
```

调用这个方法：

```
GET http://example.com/DAOFacade/?class=SomeClassName 
```

**记住：** REST 不是 RPC！

# session - 从休眠状态转换到普通 JDBC 时，用什么替换休眠状态中的 SessionFactory？

> ID：13133877
> 
> 赞同：0
> 
> 时间：2012-10-30T06:36:03.690
> 
> 标签：session, jdbc

出于多种原因，我已将 HQL 查询替换为 SQL 查询以从休眠状态转换回普通 JDBC。现在，我无法理解休眠中的 SessionFactory 是什么意思，我应该在普通 JDBC 中用什么替换它？此外，休眠中的会话涉及很多配置内容。如何在普通 JDBC 中处理所有这些？请帮助.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:37:35.607

我将尝试消除您对会话工厂的误解，并希望为您指明正确的方向。

JDBC 中会话工厂的目的是处理与数据库的连接。当有人访问您的站点并单击需要 jdbc 的链接时，他们将发出连接请求，会话工厂将看到该请求。然后会话工厂要么从池中获取一个连接，要么建立一个新的连接。这一切都在几毫秒内发生。

想想你的数据库连接，就像汽车一样，会话工厂是拥有密钥的管理器。当用户访问您的站点并需要连接时，他们会要求 1 辆车。然后经理要么给他们一辆停在前面的汽车，它已经启动并准备好出发（池中的连接），要么会出去寻找新的连接，启动它并将那辆车交出（需要更长的时间）获得池连接）。

然后，当用户完成汽车（连接）后，他们将其交还给经理，经理将决定是否应将其保持在前面并闲置（在池中）或将其拉回并关闭。您可以通过指定有关数据源（您的数据库）的属性来控制会话工厂将在何处查找连接，以及在使用连接后将其放置在何处。

要进一步了解会话工厂，您必须首先进一步了解 jdbc 中的池。因此，我强烈建议在该区域进行一些谷歌搜索，以帮助清理一些事情！希望这会为您指明正确的方向！

# database - 使用时间触发器修改 postgresql 数据库中的值？

> ID：13133879
> 
> 赞同：0
> 
> 时间：2012-10-30T06:36:20.410
> 
> 标签：database, postgresql, timer

我有一个应用程序可以根据一次性密码对用户进行身份验证。此密码与用户名一起存储在数据库中。我希望让 OTP 仅在一段时间内有效，之后我想摆脱那个特定的条目。我的表使用用户名作为主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:39:43.080

PostgreSQL 不提供任何基于时间的触发器。

在这种情况下，您通常想要做的是插入具有到期时间的记录。当您查找它们时，使用`SELECT ... FROM the_table WHERE expiry_time < current_timestamp;`.

使用外部 cron 作业、脚本或 PgAgent 等工具进行定期清理作业以删除旧的过期记录。

# asp.net - Mailbox unavailable. The server response was: Access denied - Invalid HELO name (See RFC2821 4.1.1.1)

> ID：13133881
> 
> 赞同：3
> 
> 时间：2012-10-30T06:36:37.867
> 
> 标签：asp.net, vb.net

I'm running Windows server 2008 R2 but am getting smtp mail Exception :

Mailbox unavailable. The server response was: Access denied - Invalid HELO name (See RFC2821 4.1.1.1)

Codebehind :

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim NewMail As New System.Net.Mail.MailMessage
    Dim str1 As String = String.Empty
    str1 = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings("SmtpEmail")) 'abc@example.com
    Dim fromaddress As MailAddress = New MailAddress(str1)
    NewMail.From = fromaddress
    NewMail.Sender = fromaddress
    NewMail.IsBodyHtml = True
    NewMail.Subject = "TEST"
    NewMail.Body = "This is Testing..."
    NewMail.Priority = System.Net.Mail.MailPriority.Normal
    NewMail.To.Add("xyz@example.com")
    Dim SmtpMail As New SmtpClient()
    SmtpMail.Port = 25
    SmtpMail.Host = ConfigurationManager.AppSettings("SmtpServer").ToString 'mail.xyz.com
    SmtpMail.Send(NewMail)
    NewMail.Dispose()
    SmtpMail.Dispose()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:56:39.220

用户名或密码一定不正确，请尝试使用不同的用户名和密码并检查。}

还要验证要连接的端口 ( `eg. 587`)

# svn - 难以从汇编中提取存储库

> ID：13133883
> 
> 赞同：1
> 
> 时间：2012-10-30T06:37:33.817
> 
> 标签：svn, version-control, assembla

我从 assembla 开始，从我的上级那里得到一个代码，我想将存储库拉到我的本地文件夹中。

当我输入：

```
svn co https://subversion.assembla.com/.... ./ 
```

没有说明整个路径，因为它是私有的。

当我在终端中输入这个时，

我收到此错误：

```
Error validating server certificate for 'https://subversion.assembla.com:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: *.assembla.com
 - Valid: from Thu, 24 Mar 2011 19:30:40 GMT until Sun, 24 Mar 2013 19:30:40 GMT
 - Issuer: 07969287, http://certificates.godaddy.com/repository, GoDaddy.com, Inc., Scottsdale, Arizona, US
 - Fingerprint: ae:b0:b6:94:14:5f:4b:28:d2:82:68:ae:e9:18:85:b3:ea:36:ee:f2
(R)eject, accept (t)emporarily or accept (p)ermanently? 
```

我的错误是什么？错过了什么？需要一些指导...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:58:39.380

`ae:b0:b6:94:14:5f:4b:28:d2:82:68:ae:e9:18:85:b3:ea:36:ee:f2`

此 RSA 指纹适用于`*.assembla.com`. 只需按“p”并输入即可将其永久添加到您的受信任证书中。

根据 Assembla 支持团队的说法，一些 SVN 客户不会接受他们的证书。

为了将来参考，切勿自动接受可疑证书。请与颁发机构或持有证书的域所有者联系。

有关更多信息，请参阅此论坛主题。 [http://forum.assembla.com/forums/2/topics/3063-Do-you-have-a-new-subversion-certificate](http://forum.assembla.com/forums/2/topics/3063-Do-you-have-a-new-subversion-certificate)

# jquery - JQuery Mobile中Button中的文本，我想在按钮的左右设置一个文本

> ID：13133894
> 
> 赞同：0
> 
> 时间：2012-10-30T06:38:22.663
> 
> 标签：jquery, iphone, html, jquery-mobile

我想在左侧和右侧的 jquery 按钮中设置文本，如下图所示？

```
<ul id="listid" data-theme="c" data-role="listview"> 

   <li><a href="#"><h3 class="ui-li-heading">Text 1</h3><p class="ui-li-desc">Date 
   1</p></a></li>
   <li><a href="#"><h3 class="ui-li-heading">Text 2</h3><p class="ui-li-desc">Date 
   2</p></a></li>

</ul> 
```

![在此处输入图像描述](../Images/44011f827b1372eb75fe79bd232cd1a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:28:44.857

`ui-li-aside`为此目的使用类：

```
<ul id="listid" data-theme="c" data-role="listview"> 
   <li>
    <a href="#">
      <h3 class="ui-li-heading">Text 1</h3>
      <p class="ui-li-desc">Date 1</p>
      <p class="ui-li-aside">Score 1</p>
    </a>
   </li>
   <li>
    <a href="#">
      <h3 class="ui-li-heading">Text 2</h3>
      <p class="ui-li-desc">Date 2</p>
      <p class="ui-li-aside">Score 2</p>
    </a>
   </li>
</ul> 
```

# apache-flex - 将为弹性数据网格创建多少项目渲染实例

> ID：13133896
> 
> 赞同：0
> 
> 时间：2012-10-30T06:38:34.363
> 
> 标签：apache-flex

将为弹性数据 Grid 创建多少个项目渲染实例，它有 200 行数据，一次只能看到 50 个数据。要查看下一个 50，您需要滚动。有人也可以解释一下这个数字吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:01:50.927

Flex DataGroups 使用*虚拟化*，这意味着只呈现可见项目。

每个[Flex 4：了解 DataGroups 和 VirtualLayouts](http://www.anujgakhar.com/2010/08/02/flex-4-understanding-datagroups-and-virtuallayouts/)

> DataGroups 允许你做一些叫做虚拟化的事情。这意味着，如果您有一个 ArrayCollection，其中包含 50 个项目，并且您的 DataGroup 一次仅显示 10 个项目，那么 Flash Player 将仅在屏幕上呈现 10 个视觉元素，并且当您不断向上或向下滚动时，这些渲染器将在彼此内部回收。换句话说，只会根据可见组件的大小创建几个视觉渲染器。

# jakarta-ee - How to make Amazon Elastic Beanstalk https only?

> ID：13133899
> 
> 赞同：2
> 
> 时间：2012-10-30T06:38:43.147
> 
> 标签：jakarta-ee, amazon-ec2, amazon-web-services, amazon-elb

I am using Amazon Elastic Beanstalk for my JSP web deployment. I want my application should be run only on HTTPS. I have also configured load scheduler to listen HTTPS request as well. But i am not able to find a way where it will become HTTPS only. I tried to configure my EBS server(using PUTTY & my machine ip i edited server.xml & web.xml so that each request will become HTTPS as per tutorial [http://www.itworld.com/development/79351/how-configure-tomcat-always-require-https](http://www.itworld.com/development/79351/how-configure-tomcat-always-require-https)) But when i done this then EBS server health gone down(red). Also i noticed when load on application grows beyond threshold then new instance is created & when load gets down then old instance will be deleted & new one is preserver so please somebody tell me how to deal with this problem.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-26T12:46:42.520

这在[为您的 AWS Elastic Beanstalk 环境配置 HTTPS 中进行了](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html)解释：

> 您可以将 AWS Elastic Beanstalk 环境配置为对您的应用程序使用 HTTPS。配置 HTTPS 可确保客户端连接到负载均衡器的流量加密。

整个过程略微涉及，*您需要执行以下高级步骤*：

> 1.  使用您的 DNS 提供商创建自定义域。
> 2.  创建 SSL 证书并将其上传到 AWS Identity and Access Management (AWS IAM)。
> 3.  更新您的 Elastic Beanstalk 环境以使用 HTTPS。

具体来说，第*3 步：更新您的 Elastic Beanstalk 环境以使用 HTTPS*部分概述了在自定义域和 SSL 证书到位后如何根据需要配置负载均衡器：

> 收到您的 Amazon 资源名称 (ARN) 后，您需要使用以下信息更新 Elastic Beanstalk 环境中的负载均衡器配置设置：
> 
> *   HTTP 端口 — 将此端口设置为**OFF**或**80**
> *   HTTPS 端口 — 将此端口设置为**443**或**8443**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T23:43:12.810

不幸的是，不可能只制作标准的 Elastic Beanstalk SSL 或私有/由 IP 锁定。

这是因为他们使用了本质上是公共的弹性负载均衡器。

最近，他们发布[了对 Elastic Beanstalks 的 VPC 支持](http://aws.amazon.com/releasenotes/AWS-Elastic-Beanstalk/8426458343844669)，允许您限制访问并使用私有负载均衡器。

或者，您可以设置自己的 HAProxy 或使用 OpsWorks 设置 HAProxy

# php - 如何为php变量保留换行符..？

> ID：13133900
> 
> 赞同：-1
> 
> 时间：2012-10-30T06:38:44.490
> 
> 标签：php

我尝试使用`BREAK tag, \n , strip_tags , preg_replace`

但是我不明白如何使用它..

```
$echo .= ' <div id="chooseForm"> 
            <div class="ads">
               <input type="checkbox" name="blah1" value="blah1" '. isset($_POST['blah1']) ? "checked" : "") .'> <b>blah1 </b>              
               <input type="checkbox" name="blah2" value="blah2" '. (isset($_POST['blah2']) ? "checked" : "") .'> <b>blah2</b>'; 
```

我应该为 2 个复选框设置 2 行换行符（这就是我正在尝试的......）

有人可以吗？

**编辑：**

我无法正确使用这两个函数:(`strip_tags , preg_replace` 我不是 php 编码器，所以谁能告诉我如何使用这些函数编写上面的代码..，所以我想它会起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:03:04.313

您正在分配一个名为 $echo 的变量。完成后也要回显：

```
echo $echo; 
```

[http://phpfiddle.org/main/code/gxz-94w](http://phpfiddle.org/main/code/gxz-94w)

也许您希望呈现换行符，在这种情况下，您应该将输出包装在`<pre>`标签中。

[http://phpfiddle.org/main/code/e66-jq8](http://phpfiddle.org/main/code/e66-jq8)

# javascript - How to download JS Bin to my computer to code

> ID：13133901
> 
> 赞同：5
> 
> 时间：2012-10-30T06:38:46.107
> 
> 标签：javascript, node.js, jsbin

I'm new to JavaSript, and I like [JS Bin](http://jsbin.com/), but on desktop no thing is the same for development. Is there a way to work with JS Bin without access to the website?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:48:44.057

是的，可以将它安装在您自己的计算机上，这是开始试验服务器端 JavaScript 的好方法，因为 JS Bin 本身就是用 JavaScript 编写的。JS Bin的[源代码](https://github.com/remy/jsbin)在 GitHub 上可用，[jsbin 模块在](https://npmjs.org/package/jsbin)[Node.js](http://nodejs.org/)上可用。

首先你必须[安装 Node.js](http://howtonode.org/how-to-install-nodejs)。然后你必须使用命令安装[jsbin 模块](https://npmjs.org/package/jsbin)：

```
npm install jsbin 
```

该`jsbin`命令现在应该可用。如果你运行它，你应该有一个功能齐全的 JS Bin 版本可用在`http://localhost:3000/`

# php - 将一个方法放在另一个方法的参数中？

> ID：13133905
> 
> 赞同：0
> 
> 时间：2012-10-30T06:39:14.033
> 
> 标签：php

我有这两行：

```
pll__("No Coments"); ?>

<?php comments_number('No Comments','1 Comment','% Comments'); ?> 
```

我想用 替换`'No Comments','1 Comment','% Comments'`第二种方法的部分`pll__("No Coments"), pll__("1 Coment")`，依此类推。

我不确定这样做的正确方法是什么，特别是最后一部分（`'% Comments'`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:41:47.153

当然你可以这样做：

```
comments_number(pll__('No Comments'), pll__('1 Comment'), pll__('% Comments')); 
```

# virtual - Can't get Mongoose virtuals to be part of the result object

> ID：13133911
> 
> 赞同：30
> 
> 时间：2012-10-30T06:39:41.537
> 
> 标签：virtual, mongoose

bI'm declaring a virtual that I want to appear as part of the results of its schema's queries, but it's not showing up when I do a console.log on the object. Here's the schema:

```
var schema = new mongoose.Schema(
{
    Name: { type: String }
},
{
    toObject: { virtuals: true }
});

schema.virtual("Greet").get(function()
{
    return "My name is " + this.Name;
}); 
```

Should that toObject not set the virtual as a property of the results of any queries? It does not, nor does schema.set("toObject", { virtuals: true }). Am I doing this right?

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-31T00:27:17.327

因为您`JSON.stringify`在`console.log`调用中使用，所以调用`toJSON`模型实例上的方法，而不是`toObject`.

所以要么`JSON.stringify`在你的电话中省略：

```
console.log(results[0]); 
```

或者[`toJSON`](http://mongoosejs.com/docs/guide.html#toJSON)像您当前设置选项一样在架构上设置`toObject`选项。

```
...
{
    toObject: { virtuals: true },
    toJSON: { virtuals: true }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-19T12:24:21.610

我的错误是没有在查询中包含所需的字段。如果没有在投影中选择它们，那么 mongoose 不知道如何组合/计算虚拟场。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-11T03:27:28.887

我最终在这里做了一些非常愚蠢的事情。我使用的是`Doc.find`代替，`Doc.findOne`所以我试图访问文档数组而不是文档本身上的虚拟。

# ruby - 公差内的方程求解器

> ID：13133915
> 
> 赞同：1
> 
> 时间：2012-10-30T06:39:49.537
> 
> 标签：ruby, math, loops, equation, solver

我正在尝试设计一个 Ruby 脚本，通过获取 E24 系列电阻器和 E12 和 E6 系列电容器和电感器的值来帮助进行 RC/RL 电路设计。基本上只是循环通过每个可能的组合与方程`F = 1 / ( 2 * Pi * R * C )`[例如 RC 电路]。

我在这里不追求效率，只追求可靠性。我需要它使用上面等式的值循环遍历电阻器阵列和电容器/电感器阵列的每一个组合（从不全部 3），如果它在某个值的正负 x% 范围内，则返回哪个值在它使用的数组。我可以嵌套 2 个 for 循环来遍历每个组合，但我希望它不仅返回容差范围内的值，而且告诉我哪个值最接近（或精确）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:08:36.657

在你定义了你的`E24`,`E12`和`E6`数组,`CERTAIN_VALUE`和 desired`DELTA`之后，这应该可以工作：

```
F = lambda{ |i, r, c| 1 / ( 2 * i * r * c ) }

equation_solver = lambda {
  |equation, resistances, capacitances, inductances, desired_value, delta|
  resistances.find.with_object [] do |resistance, memo|
    capacitances.find.with_object memo do |capacitance, memo|
      inductances = E6.find{ |inductance|
        ( equation.(inductance, resistance, capacitance) - desired_value ).abs < delta
      } and memo << resistance << capacitance << inductance
    end
  end
}

desired_r_c_i = equation_solver.( F, E24, E12, E6, CERTAIN_VALUE, DELTA ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:19:15.403

```
$resArray = [1.0, 1.1, 1.2, 1.3, 1.5, 1.6, 1.8, 2.0, 2.2, 2.4, 2.7, 3.0, 3.3, 3.6, 3.9, 4.3, 4.7, 5.1, 5.6, 6.2, 6.8, 7.5, 8.2, 9.1,10, 11, 12, 13, 15, 16, 18, 20, 22, 24, 27, 30, 33, 36, 39, 43, 47, 51, 56, 62, 68, 75, 82, 91,100, 110, 120, 130, 150, 160, 180, 200, 220, 240, 270, 300, 330, 360, 390, 430, 470, 510, 560, 620, 680, 750, 820, 910,1000, 1100, 1200, 1300, 1500, 1600, 1800, 2000, 2200, 2400, 2700, 3000, 3300, 3600, 3900, 4300, 4700, 5100, 5600, 6200, 6800, 7500, 8200, 9100, 10000, 11000, 12000, 13000, 15000, 16000, 18000, 20000, 22000, 24000, 27000, 30000, 33000, 36000, 39000, 43000, 47000, 51000, 56000, 62000, 68000, 75000, 82000, 91000, 100000, 110000, 120000, 130000, 150000, 160000, 180000, 200000, 220000, 240000, 270000, 300000, 330000, 360000, 390000, 430000, 470000, 510000, 560000, 620000, 680000, 750000, 820000, 910000, 1000000, 1100000, 1200000, 1300000, 1500000, 1600000, 1800000, 2000000, 2200000, 2400000, 2700000, 3000000, 3300000, 3600000, 3900000, 4300000, 4700000, 5100000, 5600000, 6200000, 6800000, 7500000, 8200000, 9100000, 1000000]
$capArray = Array.new
$indArray = Array.new
$breakFreq = 19*(10**3)
$tol = 0.997
$PI = Math.atan2(0,-1)

def makeArray(j,arr)
    for i in 0...$resArray.size
        if i%j == 0
        arr << $resArray[i]*(10**-9)
        end
    end
end

def capTest()
puts "RC Circuit Estimation"
    for i in 0...$resArray.size
        for j in 0...$capArray.size
            n = 1/(2*$PI*$resArray[i]*$capArray[j])
            if n > $breakFreq*$tol && n < $breakFreq*(2-$tol)
                diff = 100 - ((n-$breakFreq)/$breakFreq).abs
                puts "Resistor:  #{$resArray[i]} Ohms"
                puts "Capacitor: #{$capArray[j].to_f} F"
                puts "Within #{diff}%"
                puts "---------------------"
            end
        end
    end
end

def indTest()
puts "RL Circuit Estimation"
    for i in 0...$resArray.size
        for j in 0...$indArray.size
            n = $resArray[i]/(2*$PI*$indArray[j])
            if n > $breakFreq*$tol && n < $breakFreq*(2-$tol)
                diff = (1 - ((n-$breakFreq)/$breakFreq).abs)*100
                puts "Resistor:  #{$resArray[i]} Ohms"
                puts "Inductor: #{$indArray[j].to_f} H"
                puts "Within #{diff}%"
                puts "---------------------"
            end
        end
    end
end

makeArray(2,$capArray)
makeArray(4,$indArray)
capTest()
indTest() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:07:41.500

这是对代码的温和重构：

```
# I noticed that your resistance array is just the same set of values
# repeated with factors from 1 to 1000000, so this would be more concise
# way of defining it (and less prone to typing errors):
RES_ARRAY = [*-1..5].map{ |e| 10 ** e }.map{ |factor|
             [ 10, 11, 12, 13, 15, 16, 18, 20,
               22, 24, 27, 30, 33, 36, 39, 43,
               47, 51, 56, 62, 68, 75, 82, 91 ].map{ |e| e * factor }
           }.reduce( :+ )

# Global variables should be used very rarely. Constants should be written IN UPCASE:
CAP_ARRAY, IND_ARRAY = [], []
BREAK_FREQ = 19 * ( 10 ** 3 )

# Whole words should be used whenever possible in the code:
TOLERANCE = 0.997

# Methods should be named in snake_case:
def make_array( j, arr )
  # Let us use #each_slice and #map insterad of % and << operators:
  arr.each_slice( j ).map( &:first ).map{ |e| e * 1e-9 }
end

def cap_test
  puts "RC Circuit Estimation"
  for i in 0...RES_ARRAY.size
    for j in 0...CAP_ARRAY.size
      n = 1 / ( 2 * Math::PI * RES_ARRAY[ i ] * CAP_ARRAY[ j ] )
      if n > BREAK_FREQ * TOLERANCE and n < BREAK_FREQ * ( 2 - TOLERANCE )
        diff = 100 - ( ( n - BREAK_FREQ ) / BREAK_FREQ ).abs
        puts "Resistor:  #{RES_ARRAY[ i ]} Ohms"
        puts "Capacitor: #{CAP_ARRAY[ j ].to_f} F"
        puts "Within #{diff}%"
        puts "---------------------"
      end
    end
  end
end

def ind_test
  puts "RL Circuit Estimation"
  for i in 0...RES_ARRAY.size
    for j in 0...IND_ARRAY.size
      n = RES_ARRAY[ i ] / ( 2 * Math::PI * IND_ARRAY[ j ] )
      if n > BREAK_FREQ * TOLERANCE and n < BREAK_FREQ * ( 2 - TOLERANCE )
        diff = ( 1 - ( ( n - BREAK_FREQ ) / BREAK_FREQ ).abs ) * 100
        puts "Resistor:  #{RES_ARRAY[ i ]} Ohms"
        puts "Inductor: #{IND_ARRAY[ j ].to_f} H"
        puts "Within #{diff}%"
        puts "---------------------"
      end
    end
  end
end

make_array 2, CAP_ARRAY
make_array 4, IND_ARRAY
cap_Test()
ind_Test() 
```

# android-emulator - Accessing website with hostname hosted in IIS from android browser emulator

> ID：13133917
> 
> 赞同：2
> 
> 时间：2012-10-30T06:39:55.810
> 
> 标签：android-emulator

I have a website hosted under IIS

IP Address is= **(All Unassigned)** i.e no IP address is assigned to website when i check the properties of website.

e.g [http://test.demo.com/xxx/xxx.aspx](http://test.demo.com/xxx/xxx.aspx)

A host name(e.g :test.demo.com) is given to the website and this host name is mapped to "127.0.0.1" in **hosts** file of windows.

when I tried to access the website using "[http://127.0.0.1/xxx/xxx.aspx](http://127.0.0.1/xxx/xxx.aspx)" in IE browser Server Error in '/' Application is displayed.The site is accessible only when accessed with hostname .

I have used **adb** commands to pull the host file from android ,changed 127.0.0.1 to 10.0.2.2 and pushed the altered file back again.

Tried to access the website it displays an error **WebPage cannot be dispalyed**

But from the post mentioned here in [Android - how to point the emulator / device to use MacOS system hosts file?](https://stackoverflow.com/questions/7639034/android-how-to-point-the-emulator-device-to-use-macos-system-hosts-file)

I have opened the emulator from command line by passing DNS server also

Since this is the website hosted in IIS in the same machine i dont need connectivity to internet/intranet.

When I am trying to access the same website from BlackBerry simulator it was also not resolving the hostname and displaying error "Server Not Found"

Can anyone give me a solution of resolving Hostname to IP address in android emulator and blackberry simulator

# windows-phone-7 - how to track movements of a person in windows phone using GeoCoordinateWatcher?

> ID：13133918
> 
> 赞同：0
> 
> 时间：2012-10-30T06:40:07.977
> 
> 标签：windows-phone-7

From a particular start point, I want to track a person's movement in terms of longitude, latitude and altitude using GeoCoordinateWatcher in windows phone 7

And when that person reaches to the same start point (after making circles or rectangles )I want to stop tracking.

Any idea how to implement this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:25:57.787

GeoCoordinateWatcher API 有助于追踪位置。

# django - 如何在表单中使用动作，但最终仍会重定向到原始 URL，尽可能顺利

> ID：13133930
> 
> 赞同：0
> 
> 时间：2012-10-30T06:41:49.067
> 
> 标签：django, forms, url, redirect

我正在使用 Django，但我很疯狂并使用 Javascript 和其他东西提交表单。

我有一个表单，它只有一个动作，因为我无法让它正确处理我想要的数据（也就是说，我使用动作 URL 重定向到视图的两个不同部分，每个部分都执行我的操作想）。它工作得很好，除了在使用表单后我看到了 URL`www.example.com/formone`并且`www.example.com/formtwo`在按下每个表单之后。由于它的设置方式，它看起来就像`www.example.com`，除了 URL。此外，如果您`POST`使用相同的 URL 重新加载没有数据的页面，它会失败，因为我只处理来自这些 URL 的发布数据。

有没有办法在结尾处重定向`view`？

例如，类似：

```
def formone(request):
...
...
return render(request, 'example.html', 'www.example.com', {
         'formone': form, 'formtwo': voteform, 'items': items
            }) 
```

重定向 URL在哪里`www.example.com`，将是可取的。我可能可以在实际页面上用 Javascript 执行此操作，但这似乎更加粗略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:54:50.413

在视图末尾使用[重定向快捷方式。](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:09:53.493

我实际上使用了 HTTPResponseRedirect，因为重定向快捷方式不接受 URL，并且由于某种原因需要文件路径。

显然有几种方法可以做到[这一点](https://stackoverflow.com/questions/523356/python-django-page-redirect)（tsk，tsk Django，没有很好地遵循 Python 语言原则）。哈哈，我很高兴有什么东西在起作用！

# javascript - 对现有 jQuery 幻灯片的小改动

> ID：13133943
> 
> 赞同：0
> 
> 时间：2012-10-30T06:43:14.337
> 
> 标签：javascript, jquery, html, css, slideshow

我已经调整了这个幻灯片脚本，大约 99% 对它感到满意。

当前**演示**：http: [//jsfiddle.net/Qu3NK/4/](http://jsfiddle.net/Qu3NK/4/)

* * *

我只是想知道，我是否可以从我的导航器 div 中删除整数（“此处有**2 个**文本”和“此处有**4 个**其他文本”），而不是同时破坏幻灯片。我想我需要在这里更改我的代码：

```
$(".navigator").on("click", function () {
        alert("clicked");
        navigate_to(parseInt($(this).html(), 10));
    }); 
```

所以最终，**我的导航只是文本而不包括整数**。

另外，有没有办法**在开始时禁用此幻灯片播放**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:52:33.533

为什么不将其存储在属性中？例如，在 HTML5 中使用自定义`data-`属性是有效的：

```
<div class="navigator" style="font-size:30px" data-slide="2">text goes here</div>
<a class="navigator" style="font-size:30px;" data-slide"4">other text here</a> 
```

然后，您可以使用此备用代码：

```
$(".navigator").on("click", function () {
    navigate_to(parseInt($(this).attr('data-slide')), 10);
}); 
```

如果您不使用 HTML5 或不想采用这种方法，请执行以下操作：

```
<div class="navigator" style="font-size:30px" id="navigator-2">text goes here</div>
<a class="navigator" style="font-size:30px;" id="navigator-4">other text here</a> 
```

进而：

```
$(".navigator").on("click", function () {
    var id = $(this).attr('id');
    navigate_to(parseInt(id[id.length-1]), 10);
}); 
```

**编辑：**

并停止动画：

```
stopAnimation(); 
```

综合 jsFiddle：http: [//jsfiddle.net/Qu3NK/10/](http://jsfiddle.net/Qu3NK/10/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:56:19.183

要删除整数，为什么不只使用 id 属性？

```
<div id="num2" class="navigator" style="font-size:30px">some text goes here</div> 
```

然后你可以访问它

```
navigate_to($(this).id); 
```

如果*必须*使用数字，请使用

```
navigate_to(parseInt($(this).id)); 
```

要在开始时禁用它，请尝试将所有 Javascript 包装在一个在某些条件下执行的函数中，即

```
$(".startButton").click(function{

    // All the slideshow code goes here.

}); 
```

# facebook - Facebook授权（oauth）使用http（不是https）重定向

> ID：13133944
> 
> 赞同：0
> 
> 时间：2012-10-30T06:43:15.017
> 
> 标签：facebook, oauth, https

Facebook Oauth 在授权我的应用程序时使用 http 和 https 调用它。我将我的重定向 uri 指定为：[http](http://apps.facebook.com/namespace) ://apps.facebook.com/namespace并已将 https 用于画布 url 和安全画布 url。我正在使用来自 git hub 的 facebook-php 集成代码，而且改动很小。

但是，一旦应用程序被授权，对应用程序的后续调用将使用 https 进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:49:30.280

将 redirect_uri 设置为：

```
$redirect_uri = isset($_SERVER['HTTPS'])?"https://apps.facebook.com/trace-my-pix/":"http://apps.facebook.com/trace-my-pix/"; 
```

因此，如果有人使用 facebook`http`将重定向到`http://apps..`，如果有人使用 facebook`https`将重定向到`https://app...`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T03:43:43.220

想通了 - 问题是我的 htaccess 文件。它需要：

重写规则 ^(.*)$ [https://www.mydomain.com/](https://www.mydomain.com/) $1 [R=301,L]

并不是：

RewriteRule ^(.*)$ [http://www.mydomain.com/](http://www.mydomain.com/) $1 [R=301,L]

# java - 哪个是最好的 Java 嵌入式数据库？

> ID：13133945
> 
> 赞同：0
> 
> 时间：2012-10-30T06:43:16.227
> 
> 标签：java, embedded-database

我必须用java开发嵌入式项目，为此我需要好的嵌入式数据库。

我需要的功能是：

1) 关系型数据库 2) GUI 界面

谁能推荐我好的数据库？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-30T06:46:53.967

任何一个

**HSQLDB** - 由 OpenOffice 使用，经过测试且稳定。它很容易使用。如果你想编辑你的数据库数据，你可以打开文件并编辑插入语句。或者

**H2** - 据说更快（由最初设计 hsqldb 的开发人员）你使用哪一个取决于你，取决于你需要多少性能和多少稳定性。

H2的开发者已经提出了一个很好的性能评估： [http ://www.h2database.com/html/performance.html](http://www.h2database.com/html/performance.html)

[看更多](https://stackoverflow.com/questions/462923/java-embedded-databases-comparison)

# c# - 在 ASP.NET MVC 应用程序中查询访问权限的最佳实践

> ID：13133956
> 
> 赞同：0
> 
> 时间：2012-10-30T06:44:31.913
> 
> 标签：c#, asp.net-mvc-4

我正在创建一个具有左侧菜单面板的 ASP.NET MVC4 应用程序，右侧主面板将是内容面板。( `@RenderBody`)

菜单上的链接是根据用户的登录角色生成的。例如，具有较高访问权限的用户将在菜单上看到更多链接。这些访问权限存储在数据库中。

我有一个`_Layout.cshtml`页面，我的所有页面都继承自该页面。

我应该如何编码我的访问菜单，以便在登录期间仅从数据库中检索一次访问权限？之后，用户导航到的每个页面，我都不必重新查询数据库以获得他的访问权限。

我应该使用`Html.RenderAction`还是`Html.Partial`访问我的访问菜单页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:27:12.900

您可以在 Shared 文件夹中定义一个名为“Navigation.cshtml”的局部视图。在您的 _Layout.cshtml 中，您可以拨打电话

```
<div id="left-menu">
   @Html.Partial("Navigation")
</div> 
```

你的 Navigation.cshtml 应该看起来像

```
@if(Request.IsAuthenticated) {
  // show links for authenticated user.
}
else {
 // show links for non-authenticated user.  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:34:55.147

你的想法在`RenderAction`逻辑上是正确的。只需添加`OutputCache`with `VaryByCustom`，您可以在其中检查角色并且不访问每个页面和用户的数据库。

对您有帮助的链接：

*   [在 ASP.NET MVC 中使用带有 OutputCache 的 VaryByCustom 来支持登录用户的缓存](http://visitmix.com/writings/using-varybycustom-with-outputcache-in-asp-net-mvc-to-support-caching-for-logged-in-users)
*   [MVC3 自定义输出缓存](https://stackoverflow.com/questions/5590183/mvc3-custom-outputcache)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:49:40.227

我想说最简单的方法是使用[MVCSiteMapProvider ，您可以使用](https://github.com/maartenba/MvcSiteMapProvider)[NuGet](http://nuget.org/)添加到您的项目中。

它有一个选项`securityTrimmingEnabled`可以自动删除用户无权从站点地图和菜单中查看的项目。

> 我应该如何编码我的访问菜单，以便在登录期间仅从数据库中检索一次访问权限？

您应该使用[RoleProvider](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)获取您的角色。如果您有自己的角色数据库架构，则可能需要编写自定义角色提供程序。自定义角色提供者可以实现缓存以避免过于频繁地访问数据库，或者，只要角色不多，您可以使用[CacheRolesInCookie](http://msdn.microsoft.com/en-us/library/system.web.security.roles.cacherolesincookie.aspx)属性。

然后`Authorize`在应该保护的控制器和操作上放置一个属性：

```
[Authorize(Roles="SomeRole")]
public ActionResult MyAction()
{
    ...
} 
```

# css - 将左列添加到网页 HTML/CSS

> ID：13133960
> 
> 赞同：0
> 
> 时间：2012-10-30T06:45:08.910
> 
> 标签：css, html

我正在尝试向一个简单的网页添加一个左列，该网页主要是用 CSS 和 HTML 构建的。它基本上只是一个中心的图像，下面有文字，右边有一个小列描述它。我试图让它看起来像一张宝丽来图像，我想我已经把它记下来了，但是我在向网站添加带有文本的左栏时遇到了麻烦......

谁能帮我一把？

我希望左列目前大约是左侧边距的大小......

到目前为止，这是整个网站：[https ://www.dropbox.com/s/kpr1wy18uvv1ez5/picturesoftoday.zip](https://www.dropbox.com/s/kpr1wy18uvv1ez5/picturesoftoday.zip)

我尝试创建一个 div 'leftcol' 然后让它浮动：left; 宽度：200px；背景颜色：ccc；但似乎没有任何效果。

对不起初学者的问题..

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:04:13.130

卢卡斯，

试试这个 -

将此用于样式：

```
.leftcol {
    width:170px;
    height:auto;
    float:left;
 }

.polaroid {
    width:930px
    height:auto;
    float:left;
 }

.polaroid img {
    border: 20px solid #fff;
    border-bottom: 75px solid #fff;
    -webkit-box-shadow: 5px 5px 5px #778;
    -moz-box-shadow: 5px 5px 5px #778;
    box-shadow: 5px 5px 5px #778;
  } 
```

将此用于 HTML：

```
 <div class="leftcol">
     <p>Whatever you want in your left column</p>
    </div>
    <div class=polaroid">
       <p>October 29th, 2012<p>
       <img src="images/today.jpg" width="1000" height="670" border="0" />
    </div> 
```

如果您要将一个 div 向左浮动，请确保如果您想要它旁边的一个 div 将它们都向左浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:56:20.653

您可以将 css 属性分配给您的 div 以使其具有边距的大小。动态地您可以在**onload 函数中设置****div='leftcol'**的宽度。

 **并使其修复，样式**位置：固定；**将解决您的问题。固定位置元素相对于视口或浏览器窗口本身定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:03:30.970

我继续在`.leftcol`页面左侧添加一列，宽度为 200 像素。这很粗糙，但我认为这就是你正在尝试的。您将`body`选择器的格式设置为类，因此我删除了句点。我还告诉您的`.polaroid`div 与`.leftcol`

[http://dl.parkrr.com/picturesoftheday.zip](http://dl.parkrr.com/picturesoftheday.zip)

希望这可以帮助！**

# tridion - 有时在传输阶段发布失败并出现错误“内部服务器错误”

> ID：13133975
> 
> 赞同：4
> 
> 时间：2012-10-30T06:46:33.413
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

有时在传输阶段发布失败并出现错误：

> 无法使用 HTTPS 传输 tcm_0-333793-66560.Content.zip，原因是：“内部服务器错误”。

在 cd_transport 日志中，错误是：

> 2012-10-30 06:34:16,778 错误 HTTPSTransportConnector - 检索时发生意外错误：“http://deployer/httpupload.aspx 原因：内部服务器错误”
> 
> 2012-10-30 06:34:16,793 错误 HTTPSTransportConnector - 无法将 TransportPackage 发送到 url：“http://deployer/httpupload.aspx 原因：内部服务器错误”
> 
> 2012-10-30 06:34:22,600 错误 HTTPSTransportConnector - 轮询时发生意外错误：“http://deployer/httpupload.aspx 原因：内部服务器错误”

再次发布后，我可以发布失败的页面。

将日志级别设置为“调试”后，在 cd_core.log 文件中获取以下信息

```
 2012-10-30 11:47:39,260 ERROR HTTPSTransportConnector - Unable to send TransportPackage to url: "http://deployer/httpupload.aspx cause: Internal Server Error"
      2012-10-30 11:47:39,260 DEBUG TransportPoolManager - "Connector is registered for reuse: HTTP[Password[******], UserName[server\tridion], URL[http://deployer/httpupload.aspx]] available: 1"
      2012-10-30 11:47:39,260 DEBUG ParallelDestinationWorker - Received item from transport destination: yyK/eL9dJ29chwTx2vRFrQ==
      2012-10-30 11:47:39,260 INFO  TransportItem - Received transport feedback, transport state is: failed=true for transaction: tcm:0-334545-66560 
```

cd_deployer.log 文件中没有与发布错误相关的信息。它只是说

```
 2012-10-30 11:58:23,249 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-334566-66560 control=COMMIT] to C:\Temp\tcm_0-334566-66560.Content\transaction.xml 
```

IIS 日志中的信息：

在 HTTPUpload 日志文件中，我可以看到状态为 200、401 和 500 的日志详细信息。200 是大规模的，但它们也是状态为“401”和“500”的详细信息。

错误详情是

```
 "2012-10-31 12:54:39 W3SVC1485900680 100.100.100.100 GET /httpupload.aspx fileName=tcm_0-337505-66560.state.xml&action=remove 80 - 192.168.168.14 - 401 2 2148074254" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:47:03.517

它与部署程序的最大大小限制有关。查看部署程序日志。希望通过增加 maxRequestLength 和 maxAllowedContentLength 您的问题得到解决。

# c - 为什么C程序给出不同的结果？

> ID：13133979
> 
> 赞同：16
> 
> 时间：2012-10-30T06:47:04.833
> 
> 标签：c, compiler-construction

我参加的考试中有一道题。问题是：

以下代码的输出将是什么：

```
#include<stdio.h>
#include<conio.h>

void main()
{
 int a=5, b=6, c=7;
 printf("%d%d%d");
} 
```

我的回答：它会发出警告，因为 printf 没有提供所需的参数。
如果你运行它，你会得到垃圾值。

老师给了我零。据他说，答案是这些值将以相反的顺序打印，即输出将是“765”。

问题是他使用的是 Turbo C++ 编译器，而我通常使用 GCC。我可以发表一些评论和解释以恢复我的分数吗？还是我的回答真的错了？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T06:48:24.367

这是一种未定义的行为，因此绝对可能发生任何事情。

局部变量实际上*可能会*被打印出来，因为在某些系统上，`Xprintf`函数族可能会从堆栈中弹出它们的参数（stdarg.h 工具可用于实现此类函数）。您的变量`a,b,c`可能恰好位于`va_arg`宏将从中提取参数的内存位置。这些是库实现/执行环境的细节，不是标准的一部分，因此它们可能因不同的目标平台而异。

`fprintf`这是来自 c99 标准描述函数的引用：

> **7.19.6.1 fprintf 函数**
> 
> 2/ fprintf 函数将输出写入 stream 指向的流，在 format 指向的字符串的控制下，该字符串指定后续参数如何转换为输出。**如果格式的参数不足，则行为未定义。** 如果格式已用尽而参数仍然存在，则评估多余的参数（一如既往），否则将被忽略。当遇到格式字符串的结尾时，fprintf 函数返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T06:51:45.000

参数不匹配`printf`且不提供参数（如在这个问题中）是

```
undefined behaviour 
```

它可能获得`garbage`或可能获得那些值`a,b,c`。它不是由语言标准定义的。

# iphone - 使用 NSXML 解析器在 iPhone 中解析 XML

> ID：13133983
> 
> 赞同：2
> 
> 时间：2012-10-30T06:47:30.607
> 
> 标签：iphone, xcode, nsxmlparser

我是 iphone 新手。我有这个 xml 响应。如何使用 NSXML 解析器解析它？

```
<MyList>
    <Emp>
      <EmpId>918704ec-4811-45b6-a169-16bae3df3452</EmpId>
    </Emp>
     <Emp>
       <Details>
          <Name>Ravi</Name>
          <EmpId>00000000-0000-0000-0000-00000000</EmpId>
       </Details>
          <EmpId>00000000-0000-0000-0000-00000000</EmpId>
    </Emp>

</MyList> 
```

由此我想要 EmpId(918704ec-4811-45b6-a169-16bae3df3452) 和 Name(Ravi) 的值。我不想要 EmpId(00000000-0000-0000-0000-00000000) 解析代码是：

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

if ([elementName isEqualToString:@"List"]) 
{
    arr=[[NSMutableArray alloc] init];
    drr=[[NSMutableDictionary alloc] init]; 

}
srr=[[NSMutableString alloc] init];
} 

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

[srr appendString:string];
}
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

if([elementName isEqualToString:@"EmpId"])
{

    [drr setObject:srr forKey:@"EmpId"];
    [srr release],srr=nil;
    return;
}    

if([elementName isEqualToString:@"Name"])
{

    [drr setObject:srr forKey:@"Name"];
    [srr release],srr=nil;
    [arr addObject:drr]; 

    return;
} 

if([elementName isEqualToString:@"MyList"])
{
   [drr release];

 }

[srr release],srr=nil;

 } 
```

我需要这样的回应：

```
 (
  {
   Name="Ravi";
   Id="918704ec-4811-45b6-a169-16bae3df3452";
  }
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:59:00.953

[这](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)是一个链接，您可以在其中将 XML 转换为 NSDictionary 表单，它包含两个文件 XMLReader.h 和 XMLReader.m，您需要在项目中添加并在此表单中需要它的代码中使用代码

```
NSDictionary *xmlDictionary = [XMLReader dictionaryForXMLString:testXMLString error:&parseError];

// Print the dictionary
NSLog(@"%@", xmlDictionary); 
```

希望对你有帮助

# python - 启发式编程？

> ID：13133986
> 
> 赞同：0
> 
> 时间：2012-10-30T06:47:39.827
> 
> 标签：python, vb.net, heuristics

我可以对使用启发式的项目有一些想法吗

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T07:03:24.250

首先，您需要明确什么是启发式。参见例如[维基百科](http://en.wikipedia.org/wiki/Heuristic)

> 启发式（/hjʉˈrɪstɨk/；或 /hyoo-ris-tik/；希腊语：“Εὑρίσκω”、“查找”或“发现”）是指基于经验的解决问题、学习和发现的技术。

此外，什么是计算机科学中的启发式：

> 在计算机科学中，启发式是一种技术，用于在经典方法太慢时更快地解决问题，或者在经典方法无法找到任何精确解决方案时找到近似解决方案......

这意味着它与编程语言无关。好的，让我们一步一步来：

1.) 一开始你有问题。

2.) 然后你必须想办法解决这个问题。也许存在一种快速而精确的算法。那么就没有必要使用启发式了。如果没有算法或任何已知算法在某种程度上不好（例如在运行时），您可以考虑使用启发式来解决。

2.) 最后，您可以考虑哪种编程语言最适合为您的问题实现解决方案。

当然，这也取决于您和您的品味，也取决于您要解决的问题。Python 和/或 VB.NET 是解决一大类问题的绝佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:07:56.040

启发式可以大致翻译为“经验法则”

这不是特定于编程的概念。

# objective-c - 将 iOS 棋盘游戏移植到 Mac，缺少的部分

> ID：13133989
> 
> 赞同：1
> 
> 时间：2012-10-30T06:47:56.167
> 
> 标签：objective-c, ios, macos, cocoa-touch, cocoa

我打算将一个国际象棋游戏从 iPad 移植到 Mac 桌面。AFAIK，Mac SDK 不附带 UIKit。我想知道 Mac SDK 是否提供以下功能？如果没有，有什么替代方案？

*   UIViewController
*   UIView 基于块的动画
*   UIImageView
*   UIGestureRecognizers
*   NS定时器
*   NSOperationQueue

[变色龙](http://chameleonproject.org/)是一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:24:04.623

`NSTimer`、`NSOperationQueue`和 Foundation 框架中的几乎所有其他 API 在 iOS 和 Mac OS X 上都可用。

`NSImageView`与 API 具有相同的通用目的`UIImageView`并具有相似的 API。

Mac 上的动画 API 略有不同；有关详细信息，请参阅 Apple 的[动画概述](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/Animation_Overview/Introduction/Introduction.html)。

`UIGestureRecognizer`在 Mac 上没有直接的等价物；请参阅[此问题](https://stackoverflow.com/questions/10805428/)以开始实施等效功能。

您可能放在`UIViewController`子类中的控制器逻辑可能会出现在 Mac 应用程序中的任何位置，具体取决于您正在制作的应用程序类型以及您希望其界面如何工作。Apple 的[Mac App Programming Guide](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40010543)是了解 Cocoa 应用程序/窗口/视图架构如何工作的好地方。

我对 Chameleon 有点怀疑：一方面，[它的 GitHub](https://github.com/BigZaphod/Chameleon)已经有一段时间没有看到活动了。

# jquery - 获取选定单选按钮的值而不知道表单 ID 或页面中有多少表单

> ID：13133990
> 
> 赞同：0
> 
> 时间：2012-10-30T06:48:02.710
> 
> 标签：jquery

我正在寻找一种安全的方法来获取选定单选按钮的值：

*   我不知道表格ID
*   我不知道我的页面中有多少类似（不包括 ID）的表格

我目前正在使用这个：

```
if (($(elem).is('input[type="radio"]')) && ($(elem).attr('name') !== undefined)) {
    return $('input[name="' + $(elem).attr('name') + '"]:checked').val();
} 
```

但是，如果我有不同形式的相似名称，这是行不通的，而且我什至不知道将这样的东西放在选择器上是否安全。

我的目标是创建一个`getValue()`函数，它返回一个元素 ( `$(elem).length == 1`) 的值，而与性质无关：

```
var getValue = function(elem) {
    if ($(elem).is('input[type="checkbox"]')) {
        return ($(elem).prop('checked') == true);
    }
    else if (($(elem).is('input[type="radio"]')) && ($(elem).attr('name') !== undefined)) {
        return $('input[name="' + $(elem).attr('name') + '"]:checked').val();
    }
    else if ($(elem).prop('value') !== undefined) {
        return $(elem).val();
    } else {
        return $(elem).html();
    }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:58:05.503

您可以使用 jquery 以更少的努力获得价值。jquery 中有很好的范围选择器，您可以使用它来选择按钮。例如

```
$("#some_div #inside_div formelement").val(); 
```

您只需要知道至少一个父容器 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:45:18.850

我找到了一个解决方案，使用[这个答案](https://stackoverflow.com/a/2068381/731138)：

```
// Get selector from any dom element
// @see https://stackoverflow.com/a/2068381/731138
var getPath = function(elem) {
    var path;
    var node = $(elem);
    while (node.length) {
        var realNode = node[0];
        var name = realNode.localName;
        if (!name) {
            break;
        }
        name = name.toLowerCase();
        if (realNode.id) {
            return name + '#' + realNode.id + (path ? '>' + path : '');
        } else if (realNode.className) {
            name += '.' + realNode.className.split(/\s+/).join('.');
        }
        var parent = node.parent();
        var siblings = parent.children(name);
        if (siblings.length > 1) {
            name += ':eq(' + siblings.index(node) + ')';
        }
        path = name + (path ? '>' + path : '');
        node = parent;
    }
    return path;
}

// Return value of any element without knowledge of its type
var getValue = function(elem, contextSelector) {
    if ($(elem).is('input[type="checkbox"]')) {
        return ($(elem).prop('checked') == true);
    }
    if (($(elem).is('input[type="radio"]')) && ($(elem).attr('name') !== undefined)) {
        return $(contextSelector + '>input[name="' + $(elem).attr('name') + '"]:checked').val();
    }
    if ($(elem).prop('value') !== undefined) {
        return $(elem).val();
    } else {
        return $(elem).html();
    }
} 
```

然后，当我需要从任何选择器中恢复要发布的字段时，如下所示：

```
// Get all data to post
var elemSelector = getPath(elem);
var inputSelector = $(elem).data('input');
var inputData = {};
if (inputSelector !== undefined) {
    if (inputSelector !== '') {
        inputSelector = inputSelector + ' :input';
        $.each($(inputSelector), function (index, node) {
            if (($(node).attr('name') === undefined) && ($(node).attr('id') === undefined)) {
                return true;
            }
            var key = $(node).attr('name');
            if (key === undefined) {
                key = $(node).attr('id');
            }
            inputData[key] = getValue(node, elemSelector);
        });
    } else {
        inputData['value'] = getValue(elem, elemSelector);
    }
} 
```

# xna - 无法在 xna 中加载图像

> ID：13133992
> 
> 赞同：1
> 
> 时间：2012-10-30T06:48:10.297
> 
> 标签：xna

我是 xna 的初学者，我正在尝试加载图像，但它不工作，抛出异常，找不到文件，我已经尝试了所有地方冲浪，很多人问这个问题，找不到答案请帮助，我遇到了很大的麻烦这是代码

```
 protected override void Initialize()
    {

        base.Initialize();
    }

    /// <summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        mytexture = Content.Load<Texture2D>("gray");
        myrectangle = new Rectangle(100, 100, 40, 40);

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here
        spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        spriteBatch.Draw(mytexture, myrectangle , Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

在内容中添加图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:52:23.753

谢谢大家，我找到了解决方案，这是一个非常奇怪的解决方案，我只是做了一个新项目，复制所有内容，我什么都没改变，但一个工作没有，无论如何非常感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:06:52.710

问题是文件已被删除或移动，您的内容项目不再能够找到该文件。

查看您的内容项目下的图像列表。您很可能在根中没有一个名为 gray 的。如果它在那里，您可以检查几件事：

1.  如果它在文件夹中，则需要将其与 Content.Load(@"FOLDERNAME/gray") 匹配
2.  确保它像您的 Content.Load 指令一样都是小写的
3.  确保文件存在。如果它在那里列出，请尝试打开它。