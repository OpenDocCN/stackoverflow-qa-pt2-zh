# StackOverflow 问答 15556000-15556999

# iphone - 如何将触摸事件传递给 parentViewController？

> ID：15556000
> 
> 赞同：0
> 
> 时间：2013-03-21T19:03:17.540
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiviewanimation

我有一个带有几个容器（子）UIiewsController 的 UIViewContoller。主 UIViewController (mvc) 包含：

*   1.) 占据整个 mvc 视图的 UICollectionView（它在 mvc.view 之上但在所有其他控件之下）。
*   2.) 显示搜索选项的 UIViewController (s1vc)
*   3.) 另一个类似于 #2 (s2vc)
*   4.) 另一个类似于 #2 (s3vc)

![在此处输入图像描述](../Images/03a90667f363807354ce8b4468b0248b.png)

我在 mvc 中添加了手势识别器，以便用户可以通过将每个子视图控制器从屏幕上滑出来隐藏/显示它们。

问题是当用户从屏幕上滑出任何 svcs 时，他们无法滚动 mvc 的 collectionView。

这是我隐藏/显示 svcs 的方式：

```
-(void)swipeLeftGestureHandler:(UIGestureRecognizer*)gestureRecognizer{
    SMLOG(@"Swiped Left");
    if([SMUser activeUser] == nil) return;
    if([self gestureHorizontalScreenSide:gestureRecognizer] == kHorizontalScreenSideLeft){
        [self hideFacets];
    }
    else{
        [self showAccordion];
    }
}
-(void)swipeRightGestureHandler:(UIGestureRecognizer*)gestureRecognizer{
    SMLOG(@"Swiped Right");
    if([SMUser activeUser] == nil) return;
    if([self gestureHorizontalScreenSide:gestureRecognizer] == kHorizontalScreenSideLeft){
        [self showFacets];
    }
    else{
        [self hideAccordion];
    }
}

-(void)hideFacets{
    if(self.facetVisible == NO) return;

    [UIView animateWithDuration:0.25
                     animations:^{
                         CGRect newFrame = self.facetViewController.view.frame;
                         newFrame.origin = CGPointMake(newFrame.origin.x - newFrame.size.width, newFrame.origin.y);
                         self.facetViewController.view.frame = newFrame;
                         self.facetVisible = NO;
                     }
                     completion:^(BOOL finished){
                         self.facetViewController.view.hidden = YES;
                         self.facetViewController.view.userInteractionEnabled = NO;
                     }];
}

-(void)showFacets{
    if([SMUser activeUser] == nil) return;
    if(self.facetVisible == YES) return;

    self.facetViewController.view.userInteractionEnabled = YES;
    [UIView animateWithDuration:0.25
                     animations:^{
                         self.facetViewController.view.hidden = NO;
                         CGRect newFrame = self.facetViewController.view.frame;
                         newFrame.origin = CGPointMake(newFrame.origin.x + newFrame.size.width, newFrame.origin.y);
                         self.facetViewController.view.frame = newFrame;
                         self.facetVisible = YES;
                     }
                     completion:^(BOOL finished){         
                     }];
} 
```

如您所见，我正在切换 svc.view.hidden 属性，然后我也尝试切换 svc.userInteractionEnabled.property 但没有运气。仍然无法通过滑动构面视图控制器所在的位置来滑动集合视图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:37:51.433

这里的解决方案是在 parentViewController 中为容器视图添加另一个插座（使用 IB）（我在此代码中将其称为 facetContainerView），然后将其设置为 userInteractionEnabled 属性。

```
-(void)hideFacets{
    if(self.facetVisible == NO) return;
    self.facetVisible = NO;

    [UIView animateWithDuration:0.25
                     animations:^{
                         CGRect newFrame = self.facetViewController.view.frame;
                         newFrame.origin = CGPointMake(newFrame.origin.x - newFrame.size.width, newFrame.origin.y);
                         self.facetViewController.view.frame = newFrame;
                     }
                     completion:^(BOOL finished){
                         self.facetViewController.view.hidden = YES;
                         self.facetContainerView.userInteractionEnabled = NO;
                     }];
}

-(void)showFacets{
    if(self.facetVisible == YES) return;
    self.facetVisible = YES;
    self.facetContainerView.userInteractionEnabled = YES;

    [UIView animateWithDuration:0.25
                     animations:^{
                         self.facetViewController.view.hidden = NO;
                         CGRect newFrame = self.facetViewController.view.frame;
                         newFrame.origin = CGPointMake(newFrame.origin.x + newFrame.size.width, newFrame.origin.y);
                         self.facetViewController.view.frame = newFrame;
                     }
                     completion:^(BOOL finished){         
                     }];
} 
```

我很好奇这个新的视图出口与 self.facetViewController.view 有何不同，所以我插入了这段代码来比较地址（它们确实不同）。我不确定层次结构，但似乎还有一个我不知道的额外视图层。

```
NSLog(@"self.facetViewController.view: %p", self.facetViewController.view);
NSLog(@"self.facetContainerView: %p", self.facetContainerView); 
```

希望这会在某个时候对某人有所帮助。

# android - ElementListUnion - 为通用列表对象提供重复注释的简单 xml

> ID：15556001
> 
> 赞同：2
> 
> 时间：2013-03-21T19:03:28.620
> 
> 标签：android, generics, deserialization, unmarshalling, simple-framework

我正在尝试使用 elementlistunion 反序列化 List 字段

```
Customer.java

 @ElementListUnion({ @ElementList(inline = false, type = Thing.class),
        @ElementList(inline = false, type = AnotherThing.class) })
List<Object> things = new ArrayList<Object>(); 
```

Thing 和 AnotherThing 是 2 个 POJO。但我得到以下异常

```
03-21 18:56:31.940: E/AndroidRuntime(2289): Caused by:
org.simpleframework.xml.core.PersistenceException: Duplicate annotation
of name 'things' on
@org.simpleframework.xml.ElementListUnion(value=
[@org.simpleframework.xml.ElementList(data=false,
 empty=true, entry=, inline=false, name=, required=true, type=class
 com.data.Thing), @org.simpleframework.xml.ElementList(data=false,
 empty=true, entry=, inline=false, name=, required=true, type=class
 com.data.AnotherThing)]) on field 'things' java.util.List
 com.data.Customer.things 
```

我已经坚持了一整天了。请帮忙。

这是我的回复 xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<customer>
  <address>
     <no>122</no>
      <street>xxx</street>
  </address>
  <id>122</id>
  <name>James Bond</name>
  <things>
      <thing>
        <val>185</val>
      </thing>
      <thing>
        <val>162</val>
      </thing>
   </things> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:29:09.973

我不知道你为什么要在 ElementsListUnion 中创建两个类。您可以使用

```
@ElementList(inline = false, type = Thing.class) 
```

而不是这个或

```
 @ElementListUnion({ @ElementList(inline = false, type = Thing.class, required = false),
        @ElementList(inline = false, type = AnotherThing.class, required = false) }) 
```

如果您不是每次都发送两种元素类型。

# android - SDK Manager 上的 2.2 API 和 4.2.2 API 有什么区别

> ID：15556004
> 
> 赞同：1
> 
> 时间：2013-03-21T19:03:35.817
> 
> 标签：android, performance, mobile, sdk

我是android编程的初学者。我是第一个。我想学习一些重要的点。

现在，我正在安装开发 Android 应用程序所需的程序和平台。在 SDK 管理器上，下载 Android API 的选项很少。

我应该更喜欢哪一个？我想要这样，我的应用程序将在所有 android rom 和 ICS 或 JellyBean 等版本上运行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:05:48.580

为了支持尽可能多的用户，您应该选择最低版本的 API，因为为旧版 Android 编写的应用程序也适用于未来版本（尽管它们可能不是最佳的）。一旦您需要更高版本中的功能，您可以增加您的最低 SDK 版本。

我会查看不同的 SDK 版本（[例如 2.1](https://developer.android.com/about/versions/android-2.1.html)）并查看您的应用程序需要哪些功能（和/或权限）。

请记住，旧手机可能不具备某些功能，您可能无法支持它们。因此，您应该权衡您添加的内容是否值得疏远您将不再能够支持的用户。Android 提供了每个版本的市场份额[表](https://developer.android.com/about/dashboards/index.html)。

您提到要支持 ICS（4.0）和 Jellybean（4.1 和 4.2），它们共同控制着不到 50% 的 Android 市场。值得考虑支持 Gingerbread (2.3) 以及另外 45%。

当然，另一种选择是根据用户的操作系统版本对代码进行分支，但这需要更多的维护工作。但是，如果您支持 Holo 之前和之后的主题版本（即用于操作栏），它可能不会增加那么多开销。

这实际上取决于您的目标市场、目的和对 Android 的熟悉程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:10:47.670

Android 保持*前向兼容性*，这意味着为 2.1 设计的应用程序可以在更高版本上运行（在大多数情况下）。但是，在以后的版本中添加了一些功能，这些功能仅支持从某个 SDK 版本开始。

[此](http://www.learncomputer.com/android-sdk-which-version-to-use/)页面可能对您有帮助

# java - 如何判断 JsonPrimitive 的类型

> ID：15556008
> 
> 赞同：2
> 
> 时间：2013-03-21T19:03:48.050
> 
> 标签：java, json

我正在尝试确定我的 JsonPrimitive 对象的类型。例如：

```
if (jsonPrimitive.isNumber()) {
   Number number = jsonPrimitive.getAsNumber();
   ....
} 
```

number 的类型是 Number 因为以下情况成立：

```
(number instanceof Number) 
```

但是以下是错误的：

```
(number instanceof Integer) 
```

当然，基础值是整数（例如 - 5）。
我希望能够从我的方法中返回正确的对象。
谢谢！

# twitter-bootstrap - 一些字体真棒图标不显示

> ID：15556014
> 
> 赞同：4
> 
> 时间：2013-03-21T19:04:21.063
> 
> 标签：twitter-bootstrap, font-awesome

我可以看到 icon-screenshot、icon-map-marker 渲染得很好，但是在使用 icon-paper-clip 或 icon-group 或 icon-link 时什么都看不到......可能有什么问题？这里有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-18T23:19:08.363

根据[官方故障排除指南](https://github.com/FortAwesome/Font-Awesome/wiki/Troubleshooting)，您应该检查以下内容：

**一般的**

*   您的系统上没有安装旧版本的 Font Awesome（它可能具有优先权）；
*   [如果您从自己的服务器提供 Font Awesome] 您的 font-awesome.css 文件和您的 /fonts 文件夹都是最新的；
*   [如果您从 CDN 提供 Font Awesome] 您的 css 链接是最新的；
*   您没有使用插件/扩展加载旧版/修改版的 Font Awesome；
*   您正在使用有效的 HTML5 模板；
*   您的浏览器的开发控制台显示您正在加载正确的字体文件；
*   您的浏览器扩展没有阻止网络字体（noscript、adblockplus 等）。

**特定于 IE**

*   Internet Explorer 兼容模式可能会导致一些问题。通过添加到您的头部来禁用它：

    `<meta http-equiv="X-UA-Compatible" content="IE=edge">`

*   如果您使用的是 IE8，则需要添加 html5.js 脚本，例如：

    `<!--[if lt IE 9]> <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script> <![endif]-->`

*   FontAwesome 与 ie7-js 不兼容。

*   除非字体设置为可安装嵌入模式，否则 Internet Explorer 会生成错误。[更多信息](https://github.com/FortAwesome/Font-Awesome/issues/2517)。

**WordPress 特定**

*   Wordpress 会自动`<br>`在行尾添加一个标签，这会破坏图标堆栈。请将您的 html 放在一行中或添加到您的样式表中：

    `.fa-stack br { display: none }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T05:28:10.940

当您升级 fontawesome 版本时，请确保您替换 css 文件以及字体。如果您将字体文件夹放在不同的位置，您还需要更新 css 文件中的路径。

# android - facebook，android java.lang.IllegalStateException：无法执行任务：任务已经在运行

> ID：15556015
> 
> 赞同：9
> 
> 时间：2013-03-21T19:04:21.600
> 
> 标签：android, facebook, illegalstateexception

登录后我可以进行 FB 查询。几分钟后（玩过游戏）Facebook 请求失败异常：

```
java.lang.IllegalStateException: Cannot execute task: the task is already running 
```

当我打电话时它失败了

```
 Request.executeMeRequestAsync(Session.getActiveSession(),
                new Request.GraphUserCallback() {...

        Request.executeGraphPathRequestAsync(Session.getActiveSession(),
                "me/apprequests", new Request.Callback() {...

        Request request = new Request(session, "me/apprequests", null,
                    null, new Request.Callback() { .... } );
        RequestAsyncTask status = request.executeAsync(); 
```

登录后立即调用相同的调用并且它们起作用。我有一个可以运行的测试应用程序。但是在登录后几分钟后的真实应用程序中它不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T21:24:34.617

你在 UI 线程上运行吗？用`runOnUiThread`

像[这样](https://stackoverflow.com/questions/11791157/can-i-have-an-example-of-displaying-a-toast-using-runonuithread)

Facebook SDK[提到](http://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)异步调用必须从 UI 线程完成

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-12T23:41:31.997

您可以使用 Request.toHttpConnection(request) 而不是 request.executeAsync()

# java - 在java中构建strophoid

> ID：15556017
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:04:28.857
> 
> 标签：java, function, jframe, draw

你能告诉我怎么画一个[strophoid](http://en.wikipedia.org/wiki/Strophoid)吗？
我写了这个循环来构建它

```
for (int i = 0; i < 360; i += 5) {
                double u=Math.tan(i);
                x[i] = (int) (a * (Math.pow(u,2)-1)/(Math.pow(u,2)+1));
                y[i] = (int) (a * u* (Math.pow(u,2)-1)/(Math.pow(u,2)+1));
                gfx.drawLine(x[i], y[i], x[i], y[i]);
            } 
```

但我得到了这样的[图形](http://clip2net.com/s/4MHweU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:09:05.327

我认为你的问题在于这条线：你在线的两端`gfx.drawLine(x[i], y[i], x[i], y[i]);`
使用相同的索引，所以你实际上画了一个点。`i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:33:05.867

好吧..我找到了使用 JFreeChart 的解决方案

```
import javax.swing.JFrame;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.xy.XYDataItem;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

public class Strofoida extends JFrame {

public Strofoida() {
    super();
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    XYSeries series = createSeries();
    XYDataset xyDataset = new XYSeriesCollection(series);
    JFreeChart localJFreeChart = ChartFactory.createXYLineChart("", "X", "Y", xyDataset, PlotOrientation.VERTICAL,
            true, true, false);
    XYPlot localXYPlot = (XYPlot) localJFreeChart.getPlot();
    localXYPlot.setDomainZeroBaselineVisible(true);
    localXYPlot.setRangeZeroBaselineVisible(true);
    ChartPanel chartPanel = new ChartPanel(localJFreeChart);
    chartPanel.setPreferredSize(new java.awt.Dimension(800, 600));
    setContentPane(chartPanel);
}

private XYSeries createSeries() {
    XYSeries ser = new XYSeries(new XYDataItem(0, 0), false);
    int a = 1;
    for (double f = -0.9; f <= 0.9; f += 0.01) {
        double u = Math.tan(f);
        ser.add(a * (u * u - 1) / (u * u + 1), a * u * (u * u - 1) / (u * u + 1));
    }
    return ser;
}

static class Main {
    public static void main(String[] args) {
        Strofoida strofoida = new Strofoida();
        strofoida.pack();
        strofoida.setVisible(true);
    }
}

} 
```

# python - 如何反转输出并将其放入 Python 中的文本文件中？

> ID：15556019
> 
> 赞同：-3
> 
> 时间：2013-03-21T19:04:32.367
> 
> 标签：python, file, text, reverse

如果我输入一个包含这个的文本文件

> 猫 狗 家畜
> 
> 植物玫瑰虎树
> 
> 斑马 秋天 冬天 驴

输出文件应该像..

> 斑马 秋天 冬天 驴
> 
> 植物玫瑰虎树
> 
> 猫 狗 家畜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:17:45.293

您的代码的问题是您忘记关闭`outfile`with `outfile.close()`。`close`默认情况下，Python 将所有内容写入缓冲区，当您调用outfile时，该缓冲区将写入文件（=刷新） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:17:06.207

这是反转线条的方法

```
lines = '''cat dog house animal
plant rose tiger tree
zebra fall winter donkey'''

lines = "\n".join(lines.split("\n")[::-1])

print lines

#outfile.writelines("\n".join(infile.readlines()[::-1])) 
```

# firebase - 无法从我的 Firebase 中删除信息

> ID：15556022
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:04:39.370
> 
> 标签：firebase

我正在测试对我的 firebase 的一些更改，并意外地向参考提交了 100 条更新。现在，当我尝试删除引用时，它会创建一个具有不同数据的新引用。

我曾尝试删除 firebase 中的所有内容，但它只会继续创建新的参考。

在这个特定示例中，我使用 set() 将 5 个随机值添加到用户名 Michael。这 5 个随机值被调用了 100 次，现在当我删除 Michael 用户再次测试时，它已经有一个值排队并立即重新创建。我查看了我的上传使用情况，它显示在与此错误同时上传的大量数据。

知道如何删除这些排队的更改吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T13:39:07.633

我有一个类似的问题 - 认为它与您的会话/缓存有关。

尝试退出 firebase 并重新登录 - 如果记录仍然存在，请备份您的安全规则，然后使用：

```
{
  "rules": {
      ".read": false,
      ".write": false
  }
} 
```

并删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:32:26.687

确保断开正在写入此数据的客户端。我怀疑在某个地方你有一个正在运行的进程正在生成这些写入。

如果由于某种原因您无法停止违规过程，您始终可以修改您的安全规则以拒绝访问正在执行写入的客户端（或者如果它是使用 Firebase Secret 进行身份验证的服务器，您可以撤销其密钥）。

# nginx - proxy_pass 中的 nginx 变量（cname）

> ID：15556023
> 
> 赞同：1
> 
> 时间：2013-03-21T19:04:39.737
> 
> 标签：nginx

我正在尝试动态设置 proxy_pass 目标，其中变量将是原始请求的 cname。

我现在拥有的是：

```
server {
    listen       8888;
    server_name (.*).domain.com;

    location / {
        proxy_pass       http://$1.otherdomain.com;
        proxy_set_header Host $1.otherdomain.com; 
```

但不幸的是，这最终导致 502 错误网关。`proxy_pass`在and中使用变量时没有任何效果`proxy_set_header`。

我还尝试在服务器名称中使用`(?<cname>.+)`或作为变量。`(?P<cname>.+)``$cname`

出了什么问题，为什么会出现 502？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T01:46:25.467

要在服务器名称中使用正则表达式，您需要在名称前加上波浪号“~”

```
server_name ~(.*).domain.com; 
```

[**更新**] 试了一下，它成功地将值设置为 1 美元。但仍然得到 502 并且我的 nginx 错误日志显示

```
no resolver defined to resolve xyz.otherdomain.com 
```

即使我在 /etc/hosts 文件中将该名称指向我的本地主机。

找到这篇[文章](http://www.nginx-discovery.com/2011/05/day-51-proxypass-and-resolver.html)很好地解释了这个问题。基本上在这种特殊情况下（上游域名中的变量），您需要使用[“解析器”指令](http://wiki.nginx.org/HttpCoreModule#resolver)指向可以解析此动态域名的 dns 服务器（例如，来自 google dns 服务器的 8.8.8.8）。

```
resolver 8.8.8.8; 
```

它在我的测试中使用公共上游域名。如果您的上游域名是本地的，则需要为它们设置本地 dns 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T16:00:53.237

proxy_pass 使用变量的服务器名称，将是一种特殊情况。

```
proxy_pass       http://$1.otherdomain.com; 
```

> 在这种情况下，在描述的[服务器组](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)中搜索服务器名称，如果没有找到，则使用解析器确定。

如果你不喜欢使用解析器。您可以使用下面的类似主机文件。

```
upstream www1.otherdomain.com { server 10.x.x.1; } 
upstream www2.otherdomain.com { server 10.x.x.2; } 
```

# android - 安卓端口扫描器

> ID：15556024
> 
> 赞同：0
> 
> 时间：2013-03-21T19:04:40.367
> 
> 标签：android

我正在尝试在 Android 上制作端口扫描仪，但我有点卡住了。我想看看路由器/默认网关上是否打开了一个端口，但似乎没有任何工作。我尝试使用是可达的，但我觉得这可能是错误的。

```
import java.net.InetAddress;
import java.net.UnknownHostException;

import android.app.Activity; 
import android.content.Context; 
import android.content.Intent; 
import android.content.IntentFilter; 
import android.net.DhcpInfo; 
import android.net.wifi.WifiInfo; 
import android.net.wifi.WifiManager; 
import android.os.Bundle; 
import android.widget.TextView;

public class portscan extends Activity {

String targetHost;
public int startPort = 1; //(for uses in later programming)
public int endPort = 1000;
private Intent scanIntent;
InetAddress targetAddress;
String targetHostName;
WifiManager networkd;
DhcpInfo details;
public String   gateway;
TextView GW;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     try {
    setContentView(R.layout.port);
    GW = (TextView)findViewById(R.id.gateway);
    networkd = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    details = networkd.getDhcpInfo();
    String test = intToIp(details.gateway);

    gateway = "Default Gateway: "+String.valueOf(details.gateway);
    boolean isAvailable = false;

        isAvailable = InetAddress.getByName(test).isReachable(80); //trying to see if port open
        if (isAvailable == true) {
             GW.setText("port 21 is up"); 

        }
    } catch (Exception e) {

    }

}

public String intToIp(int i) { //this converts the DHCP information (default gateway) into a readable network address

       return ( i & 0xFF)+ "." +
                ((i >> 8 ) & 0xFF) + "." +
                ((i >> 16 ) & 0xFF)+ "." +
                ((i >> 24 ) & 0xFF );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T17:41:48.787

使用下面的代码，您可以添加超时。

```
try {
    Socket socket = new Socket();
    SocketAddress address = new InetSocketAddress(ip, port);
    socket.connect(address, TIMEOUT);
    //OPEN
    socket.close();
} catch (UnknownHostException e) {
    //WRONG ADDRESS
} catch (SocketTimeoutException e) {
    //TIMEOUT
} catch (IOException e) {
    //CLOSED
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:12:45.510

不要使用`isReachable`，它不用于端口扫描（并且对于其他任何东西也不可靠，真的）。

对于端口扫描，您使用[套接字](http://developer.android.com/reference/java/net/Socket.html)。伪示例：

```
 for (int port = 0; port <= 9999; port++) 
   {
        try 
        {
            // Try to create the Socket on the given port.
            Socket socket = new Socket(localhost, port);

            // If we arrive here, the port is open! 
            GW.setText( GW.getText() + String.Format( "Port %d is open. Cheers!\n", port ));

            // Don't forget to close it
            socket.close();
        } 
        catch (IOException e) 
        {
            // Failed to open the port. Booh.
        }
    } 
```

# c# - C# CustomAttribute 不起作用

> ID：15556028
> 
> 赞同：1
> 
> 时间：2013-03-21T19:05:10.693
> 
> 标签：c#, .net, custom-attributes

我在 .NET 2.0 上工作。不幸的是，我无法使用更新的版本。我尝试编写我自己的属性来提供一个简单的值。

```
[AttributeUsage(AttributeTargets.All)]
public class testAttribute : Attribute
{
    int b;
    public testAttribute(int a)
    {
        b = a;
        Console.WriteLine("Creating Attribute");
    }
    public testAttribute()
    {
        b = 5;
        Console.WriteLine("Creating Attribute");
    }
}

public class MyTestClass
{
    [testAttribute]
    public MyTestClass()
    {
        int a = 0;
        Console.WriteLine("creating serializer 2");
    }

    [testAttribute(2)]
    public void foo(){
        //Type t = this.GetType();
        //testAttribute[] t2 = (testAttribute[])t.GetCustomAttributes(typeof(testAttribute), true);
        Console.WriteLine("calling foo");

        object[] attr = typeof(MyTestClass).GetCustomAttributes(true);
        int a = 5;
    }
} 
```

但这似乎不起作用。我从 msdn [ [http://msdn.microsoft.com/en-us/library/a4a92379%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/a4a92379%28v=vs.80%29.aspx) ] 中找到了这个例子，对我来说这看起来非常相似。

我还发现了这一点：[方法上的属性不起作用](https://stackoverflow.com/questions/5078403/attribute-on-method-doesnt-work)，但我认为这不完全是我的问题。如您所见，我尝试了 BrokenGlass 的建议，但我得到了一个维度为 0 的数组，这意味着没有属性。

有什么建议么？问候 Chomp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:06:50.383

您必须调用`GetCustomAttributes`方法，而不是类型。

```
object[] attr = typeof(MyTestClass).GetMethod("foo").GetCustomAttributes(true); 
```

# asp.net-mvc - 所有 ASP.NET Web API 控制器都返回 404

> ID：15556035
> 
> 赞同：70
> 
> 时间：2013-03-21T19:05:30.977
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在尝试让 API 控制器在 ASP.NET MVC 4 Web 应用程序中工作。但是，每个请求都会导致**404**，我很难过。：/

我有来自项目模板的标准 API 控制器路由，定义如下：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

在 Global.asax 中调用注册：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    // Register API routes
    WebApiConfig.Register(GlobalConfiguration.Configuration);

    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);

    RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

我有一个这样的基本 API 控制器：

```
namespace Website.Controllers
{
    public class FavoritesController : ApiController
    {       
        // GET api/<controller>
        public IEnumerable<string> Get()
        {
            return new [] { "first", "second" };
        }

        // PUT api/<controller>/5
        public void Put(int id)
        {

        }

        // DELETE api/<controller>/5
        public void Delete(int id)
        {

        }
    }
} 
```

现在，当我浏览到**localhost:59900/api/Favorites**时，我希望调用**Get**方法，但我得到的是**404**状态代码和以下响应：

```
<Error>
   <Message>
       No HTTP resource was found that matches the request URI 'http://localhost:59900/api/Favorites'.
   </Message>
   <MessageDetail>
      No type was found that matches the controller named 'Favorites'.
   </MessageDetail>
</Error> 
```

任何帮助将不胜感激，我在这里有点失去理智。：） 谢谢！

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2014-12-15T06:03:28.290

我遇到的一件事是在我的 GLobal.asax 文件中以错误的顺序注册了我的配置，例如：

**正确的顺序：**

```
AreaRegistration.RegisterAllAreas();
WebApiConfig.Register(GlobalConfiguration.Configuration);
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

**顺序错误：**

```
AreaRegistration.RegisterAllAreas();
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes);
WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

只是说，这是我的问题，更改顺序是显而易见的，但有时会被忽视并且会导致很多挫败感。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-24T03:49:33.833

基本上有同样的问题，在我的情况下通过添加解决了：

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

到

```
<system.webServer>

</system.webServer> 
```

**web.config**部分

 *** * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-16T11:49:54.827

我一直在研究与此类似的问题，我花了很长时间才找到问题。这不是这个特定帖子的解决方案，但希望添加它可以节省一些时间来尝试找到问题，因为他们正在搜索为什么他们的控制器可能会收到 404 错误。

基本上，我在班级名称的末尾拼错了“Controller”。就那么简单！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-27T16:52:34.467

添加以下行

```
GlobalConfiguration.Configure(WebApiConfig.Register); 
```

在**Global.ascx.cs**文件中的`Application_Start()`函数中。

 *** * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-12-01T04:16:18.087

我有同样的问题，然后我发现我在其他项目中有重复的 api 控制器类名，尽管**“routePrefix”**和命名空间和项目名不同但它们仍然返回 404，我更改了类名和它工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-12-04T20:34:44.467

一个令人尴尬的简单解决方案的类似问题 - 确保您的 API 方法是`public`. 离开任何方法访问修饰符也将返回 HTTP 404。

**将返回 404：**

```
List<CustomerInvitation> GetInvitations(){ 
```

**将按预期执行：**

```
public List<CustomerInvitation> GetInvitations(){ 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-14T14:52:07.837

为您的方法创建一个 Route 属性。

例子

```
 [Route("api/Get")]
        public IEnumerable<string> Get()
        {
            return new string[] { "value1", "value2" };
        } 
```

你可以像这样调用[http://localhost/api/Get](http://localhost/api/Get)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-22T08:03:27.240

我有点难过，不确定这是否是由于 HTTP 输出缓存问题。

无论如何，“突然间它开始正常工作”。:/ 所以，上面的例子没有我添加或改变任何东西。

猜猜代码只需要坐下来煮一夜…… :)

谢谢你们的帮助，伙计们！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-11T07:13:56.917

有这个问题。不得不取消选中**`Precompile during publishing`**。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-02T12:01:48.520

由于我不清楚的原因，我已将我的所有方法/操作声明为静态 - 显然，如果你这样做它不起作用。所以只要`static`放下

```
[AllowAnonymous]
[Route()]
public static HttpResponseMessage Get()
{
    return new HttpResponseMessage(System.Net.HttpStatusCode.OK);
} 
```

成为：-

```
[AllowAnonymous]
[Route()]
public HttpResponseMessage Get()
{
    return new HttpResponseMessage(System.Net.HttpStatusCode.OK);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-12T22:11:05.803

检查您的控制器类是否具有 [RoutePrefix("somepath")] 属性，所有控制器方法是否也具有 [Route()] 属性集。

我也遇到了这个问题，并且摸索了一段时间。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-27T02:20:51.953

```
WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

应该是 App_start 事件中的第一个。我已经在 APP_start 事件的最后一个位置尝试过，但是没有用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-02T04:41:29.787

我将在这里添加我的解决方案，因为我个人讨厌那些编辑 web.config 而不解释发生了什么的人。

对我来说，这是在 IIS 中设置默认处理程序映射的方式。要检查这个...

1.  打开 IIS 管理器
2.  单击服务器的根节点（通常是服务器的名称）
3.  打开“处理程序映射”
4.  在右窗格中的操作下，单击“查看有序列表”

这是处理请求的处理程序的顺序。如果你的和我的一样，“ExtensionlessUrlHandler-*”处理程序都在 StaticFile 处理程序之下。好吧，这是行不通的，因为 StaticFile 处理程序有一个通配符 * 并且会在到达无扩展控制器之前返回 404。

因此，重新排列并将“ExtensionlessUrlHandler-*”移动到 TRACE、OPTIONS 和 StaticFile 的通配符处理程序上方，将首先激活无扩展处理程序，并且应该允许您的控制器在系统中运行的任何网站中正确响应。

注意：这基本上是当您在 web.config 中删除和添加模块时发生的情况，但是一个地方可以解决所有问题。而且它不需要额外的代码！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-12-05T20:07:44.620

将此添加到`<system.webServer>`您的 web.config 中：

```
<handlers>
    <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
    <remove name="OPTIONSVerbHandler"/>
    <remove name="TRACEVerbHandler"/>
    <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler"
        preCondition="integratedMode,runtimeVersionv4.0"/>
</handlers> 
```

添加`<modules runAllManagedModulesForAllRequests="true" />`也可以，但由于性能问题不建议添加。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-16T16:17:06.627

If you manage the IIS and you are the one who have to create new site then check the "Application Pool" and be sure the CLR version must be selected. In my situation, it had been selected "No Managed Code". After changed to v4.0 it started to work.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-07-06T20:37:25.297

我遇到了同样的 404 问题，并且这里没有一个投票支持的解决方案有效。就我而言，我有一个带有自己的 web.config 的子应用程序，并且在父级的 httpModules web.config 部分中有一个清晰的标签。在 IIS 中，所有父级的 web.config 设置都适用于子应用程序。

```
<system.web>    
  <httpModules>
    <clear/>
  </httpModules>
</system.web> 
```

解决方案是删除“清除”标签，并可能在父级的 web.config 中添加 inheritInChildApplications="false"。inheritInChildApplications 是为了让 IIS 不将配置设置应用于子应用程序。

```
<location path="." inheritInChildApplications="false">
  <system.web>
  ....
  <system.web>
</location> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-27T23:00:42.743

我遇到了这个问题：我在 .NET 4.7.2 上的 Web API 2 项目按预期工作，然后我将项目属性更改为使用 Web 选项卡下的特定页面路径。从那以后我每次运行它时，它都给我一个 404 错误——它甚至没有击中控制器。

解决方案：我在我的VS解决方案文件的父目录（有时是同一目录）中找到了.vs隐藏文件夹，并将其删除。当我再次打开我的 VS 解决方案、清理它并使用 Rebuild 选项重建它时，它又运行了。Visual Studio 创建的缓存文件存在问题。当这些被删除并重建解决方案时，文件被重新创建。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-07T11:03:12.120

我通过将调试器附加到应用程序初始化解决了类似的问题。只需启动网络服务器（例如，访问 localhost），附加到 w3wp 并查看应用程序初始化是否正确完成。就我而言，有异常，并且控制器未注册。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-03-17T22:15:19.520

我的应用程序安装了几十个不同的客户端，它们都运行良好，然后这个总是在所有 api 调用上返回 404。事实证明，当我在 IIS 中为此客户端创建应用程序池时，它默认为 .net framework 2.0 而不是 4.0，我错过了它。这导致了 404 错误。在我看来，这应该是一个 500 错误。非常误导微软！****

# mobile - 有多少 TCP 可以修改为像 UDP 一样？

> ID：15556038
> 
> 赞同：0
> 
> 时间：2013-03-21T19:05:43.773
> 
> 标签：mobile, tcp, udp

所以，这是在我的技术理解的范围内，所以请对任何严重的错误表示友好。

网上有很多关于如何为 UDP 提供 TCP 的各种强大功能的文章。我有相反的问题：可以剥离或停用多少 TCP 以使其像 UDP 一样工作？

这条思路来自阅读有关如何关闭[Nagle 算法的](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)文章。我想，哎呀，你还能关掉什么？

例如，您可以关闭保证数据包排序的要求吗？

您可以关闭来回通信以验证连接的要求吗？

如果您只发送非常小的离散数据包并在另一端自己完成所有排序/重新排序的东西，它会使 TCP 更像 UDP 吗？

这样做的一个原因是模拟移动网络上的 UDP，它往往只可靠地支持 TCP。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:28:04.353

> 例如，您可以关闭保证数据包排序的要求吗？

不，可以设置计数器。不是每个数据包都得到确认，但也会检测到松散的数据包。

> 您可以关闭来回通信以验证连接的要求吗？

您可以将时间设置为最多 2 分钟，但不能更高。

> 如果您只发送非常小的离散数据包并在另一端自己完成所有排序/重新排序的东西，它会使 TCP 更像 UDP 吗？

如果您为每条消息使用一个新连接，您将拥有大量开销。

但是所有这些操作都在 IP/TCP 堆栈中很深，不容易配置。

这样做的一个原因是模拟移动网络上的 UDP，它往往只可靠地支持 TCP。

您可以使用 VPN。所以你有一个空中 TCP 连接和一个到你的服务器的 UDP 连接，但你会有相同的延迟。无线连接知道数据包丢失。使用UDP并不是一个好主意，手机网络比wlan损失更多。

# labview - 在学生labview 2011中构建dll

> ID：15556041
> 
> 赞同：0
> 
> 时间：2013-03-21T19:05:50.110
> 
> 标签：labview

从 VI 构建 dll 的一种方法是右键单击项目窗口中的“构建规范” -> 新建 -> 共享库 (DLL)。这对我在其他 Labview 安装中有效，但在我的学生版中无效。

是否有替代/额外步骤/安装我需要知道从 Labview 的学生版构建 dll 或者此功能在学生版中不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:17:47.573

根据[NI LabVIEW学生版](http://sine.ni.com/nips/cds/view/p/lang/en/nid/210866)页面，它有“与LabVIEW完整开发系统相同的功能”，它[支持DLL构建](http://zone.ni.com/reference/en-XX/help/371361H-01/lvhowto/building_a_dll/)，所以它似乎不是版本问题。

更新：见@nekomatic 回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:33:56.973

学生版与完整开发系统一样，不包括创建 DLL 所需的应用程序生成器 - Jakub 误读了 NI 页面。

您要么需要专业开发系统，要么需要应用程序生成器作为其他版本之一的附加组件。

# java - JMenu 添加菜单监听器

> ID：15556042
> 
> 赞同：0
> 
> 时间：2013-03-21T19:05:50.740
> 
> 标签：java, swing, jframe

I want to use Jmenu as buttons to change what is showed in the frame but when the menu is selected the selection is not released. 下面是 Jmenu 实例的代码，它改变了两个字段和标签的位置。

```
mnAddUser.addMenuListener(new MenuListener() {

            @Override
            public void menuSelected(MenuEvent e) {
                // TODO Auto-generated method stub

                lblUserId.setBounds(150, 86, 111, 30);
                userIDField.setBounds(273, 80, 268, 43);    

                lblUserName.setBounds(150, 165, 111, 30);
                userNameField.setBounds(273, 159, 268, 43);

                lblUserName.setVisible(true);
                userNameField.setVisible(true);

                btnAddUser.setBounds(187, 235, 150, 43);
                btnReset.setBounds(390, 235, 150, 43);

                btnAddUser.setText("Add User");
            }

            @Override
            public void menuDeselected(MenuEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void menuCanceled(MenuEvent e) {
                // TODO Auto-generated method stub

            }           

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:24:47.610

*   也许没有理由使用[添加到 JMenuBar 并由 MenuListener 监听的 JMenu](https://stackoverflow.com/a/9862855/714968)

*   [将JButtons 添加到 JMenuBar](https://stackoverflow.com/a/8127463/714968)很简单，也许可以使用`JButton.setFocusable(false);`

# windows-phone-8 - 如何修复 Windows phone 8 环境中的警告？

> ID：15556043
> 
> 赞同：0
> 
> 时间：2013-03-21T19:05:51.333
> 
> 标签：windows-phone-8

我有一个带有 Google 联系人 API 的 windows phone 8 环境项目。我收到 16 个警告，例如：

```
Referent to type "System.Net.IWebProxy" claims it is defined in c:\Program Files
(x86)\Reference Assemblies\Microsoft\Framework\WindowsPhone\v8.0\System.dll',
but it could not be found. 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:16:09.377

确保您已安装[.NET Framework 4.5](http://www.microsoft.com/en-in/download/details.aspx?id=30653)。更多关于[IWebProxy](http://msdn.microsoft.com/en-us/library/system.net.iwebproxy.aspx)的信息可以在这里找到。我希望它会有所帮助。

# c# - c# 和 ms-access 数据库插入

> ID：15556046
> 
> 赞同：0
> 
> 时间：2013-03-21T19:05:54.557
> 
> 标签：c#, sql, ms-access, oledbcommand

我想通过保存按钮从以下位置保存数据：

> idbox（文本框）-empbox（组合框）-jobbox（组合框）-unitbox（组合框）-
> 
> destbox（组合框）-detectivebox（组合框）-statebox（组合框）-
> 
> 投资日期（日期选择器）-投资结果（文本框）

进入表投资相同的顺序：

> id - emp - unit - job - dest - 侦探 - state -investdate -investresult

我尝试了这个并且没有错误，但是当我检查时，表中没有保存任何内容....

我能知道这是什么原因吗？

这是我试过的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.OleDb;

namespace beta_2
{
    public partial class Dentry_main : Form
{
        OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=beta2.mdb;");
    OleDbDataAdapter da;
    DataSet ds = new DataSet();
    OleDbCommand com = new OleDbCommand();
    string sql;

    public Dentry_main()
    {
        InitializeComponent();
    }

    private void Dentry_main_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'beta2DataSet.stateinside' table. You can move, or remove it, as needed.
        this.stateinsideTableAdapter.Fill(this.beta2DataSet.stateinside);
        // TODO: This line of code loads data into the 'beta2DataSet.detectivestbl' table. You can move, or remove it, as needed.
        this.detectivestblTableAdapter.Fill(this.beta2DataSet.detectivestbl);
        // TODO: This line of code loads data into the 'beta2DataSet.departments' table. You can move, or remove it, as needed.
        this.departmentsTableAdapter.Fill(this.beta2DataSet.departments);
        // TODO: This line of code loads data into the 'beta2DataSet.units' table. You can move, or remove it, as needed.
        this.unitsTableAdapter.Fill(this.beta2DataSet.units);
        // TODO: This line of code loads data into the 'beta2DataSet.employees' table. You can move, or remove it, as needed.
        this.employeesTableAdapter.Fill(this.beta2DataSet.employees);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        conn.Open();
        com.Connection = conn;
        sql = "INSERT INTO investinside([id],[emp],[job],[unit],[dest],[detective],[state],[investdate],[investresult])VALUES(@id,@emp,@job,@unit,@dest,@detective,@state,@investdate,@investresult)";
        com.CommandText = sql;
        com.Parameters.Clear();
        com.Parameters.AddWithValue("@id", idbox.Text);
        com.Parameters.AddWithValue("@emp", empbox.Text);
        com.Parameters.AddWithValue("@job", jobbox.Text);
        com.Parameters.AddWithValue("@unit", unitbox.Text);
        com.Parameters.AddWithValue("@dest", destbox.Text);
        com.Parameters.AddWithValue("@detective", detectivebox.Text);
        com.Parameters.AddWithValue("@state", statebox.Text);
        com.Parameters.AddWithValue("@investdate", investdatebox.Text);
        com.Parameters.AddWithValue("@investresult", investresultbox.Text);
        com.ExecuteNonQuery();
        MessageBox.Show("success");
        conn.Close();
    }

    private void button3_Click(object sender, EventArgs e)
    {
        this.Close();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:15:20.723

有很多方法可以让您更轻松地使用 ADO.Net。

如果您的表有主键，您应该查看 ADO.Net 的[CommandBuilder](http://msdn.microsoft.com/en-us/library/tf579hcz.aspx)功能。

如果是这样，向您的表添加数据是通过简单的 DataTable.Rows.Add 和 DataAdapter.Update 完成的

如果您想手动进行，可以尝试一直手动进行。代替：

```
 "INSERT INTO investinside([id],[emp],[job],[unit],[dest],[detective],[state],[investdate],[investresult])VALUES(@id,@emp,@job,@unit,@dest,@detective,@state,@investdate,@investresult)" 
```

尝试

```
 string.Format("INSERT INTO investinside([id],[emp],[job],[unit],[dest],[detective],[state],[investdate],[investresult])VALUES('{0}','{1}',....)", idbox.Text, empbox.Text,...) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T19:17:22.027

在我看来，您有一个本地数据库连接。这就是我通常连接的方式...“服务器=USUALLY_YOYR_PC_NAME_CAPPITAL_LETTERS；数据库=数据库名称；集成安全=是”

最后一部分集成安全性很重要，不要忽略它。

建议：查看[MSDN 的 ORM - Entity Frame Work 教程](http://msdn.microsoft.com/en-us/data/jj591506)我更喜欢使用对象而不是 SQL 语句。我也经常犯拼写错误。SQL 不会原谅那些 - 在实体框架中你不能搞砸......

# spring - HTTPTransportError - 使用模拟代理对象的意外 WS 调用

> ID：15556048
> 
> 赞同：1
> 
> 时间：2013-03-21T19:05:55.460
> 
> 标签：spring, junit, mocking, jax-ws, easymock

我一直在尝试运行发出 Web 服务请求的单元测试。我正在使用 EasyMock 在我的 JUnit 测试中模拟 jax-ws 请求的代理对象。

我在应用程序上下文中使用 DI 定义了 bean，如下所示：

```
<bean id="mockOrderPort" name="mockOrderPort" class="org.easymock.EasyMock" factory-method="createStrictMock" >
    <constructor-arg value="com.proyecti.perama.siman.replica.integration.schema.OrderPort" />
</bean> 
```

这是失败的测试用例：

```
//II. Fill the authentication response will be used to mock the server calling
final AuthenticationResponse authenticationResponse = new AuthenticationResponse();
authenticationResponse.setToken(encode(TestConstants.EMPTY_TOKEN));

//III. When authentication is called, mock must return the authentication request object created earlier
expect(mockOrderPort.authentication(EasyMock.anyObject(AuthenticationRequest.class))).andReturn(authenticationResponse);

//IV. Make the mock object available for executing the test
replay(mockOrderPort);

//V. Execute the test (call to server is produced inside this method)
executeTest();

//VI. Verify mock behaviour is correct
verify(mockOrderPort); 
```

在 executeTest 方法中，有使用模拟代理对象对 WS 的调用：

```
authenticationResponse = portToServer.authentication(authenticationRequest); 
```

无论我尝试什么，但它总是尝试连接到实际的 WS，从而引发以下异常：

```
authentication request has not been successful. Exception: com.sun.xml.ws.client.ClientTransportException: HTTP Transport error: java.net.ConnectException: Connection refused: connect 
```

为什么模拟对象试图连接而不是返回我创建的对象？

谢谢！

# azure - Azure Table QuerySegmented 不返回

> ID：15556053
> 
> 赞同：0
> 
> 时间：2013-03-21T19:06:17.457
> 
> 标签：azure, azure-storage, azure-table-storage

我正在尝试从 AzureTable 中提取一组实体，并使用以下代码对其进行查询。

```
string partitionKey = string.Format(CultureInfo.InvariantCulture, "{0:d20}", accountId);
string rowKeyStart = string.Format(CultureInfo.InvariantCulture, "{0}:g", work.lead.id);
string rowKeyEnd = string.Format(CultureInfo.InvariantCulture, "{0}:h", work.lead.id);

var context = table.ServiceClient.GetTableServiceContext();
var query = context.CreateQuery<LinkedInPostEntity>(table.Name)
        .Where(w => w.PartitionKey == partitionKey && w.RowKey.CompareTo(rowKeyStart) > 0 && w.RowKey.CompareTo(rowKeyEnd) <= 0)
        .AsTableServiceQuery(context);

List<PostEntity> postsForLead = new List<PostEntity>();
TableContinuationToken continuation = null;

do
{
    TableQuerySegment<PostEntity> segment = await AzureHelper.QuerySegmented(query, continuation);
    postsForLead.AddRange(segment.Results);
    continuation = segment.ContinuationToken;
} while (continuation != null); 
```

`table`是 CloudTable 的一个实例，`accountId`是一个 int，并且`work.lead.id`是一个字符串。我想提取所有以 RowKey 为前缀`work.lead.id:g`并后跟字符串 id 的实体。我觉得这段代码应该可以工作，但它挂在QuerySegmented 给出的`await`永远不会完成的情况下。`Task`

我的想法可能是查询格式不正确，但我不确定如何或为什么。

顺便说一句，我是新手，所以如果我忘记了任何重要信息或无论如何都可以帮助澄清，请告诉我。

编辑：这里是非常相似的代码，它在一个类似（虽然不同）的表上被调用，该表具有不同的 id 方案。我需要使用我正在使用的 api 给我的 id 方案，所以我不认为在进入之前重新格式化它是一种选择。两者之间的唯一区别是查询，所以我觉得我的查询是罪魁祸首。有任何想法吗？

```
string partitionKey = string.Format(CultureInfo.InvariantCulture, "{0:d20}", accountId);
string rowKeyStart = string.Format(CultureInfo.InvariantCulture, "{0}:{1:d20}", work.ScreenName, (long)0);
string rowKeyEnd = string.Format(CultureInfo.InvariantCulture, "{0}:{1:d20}", work.ScreenName, long.MaxValue);

var context = table.ServiceClient.GetTableServiceContext();
var query = context.CreateQuery<TweetEntity>(table.Name)
        .Where(w => w.PartitionKey == partitionKey && w.RowKey.CompareTo(rowKeyStart) >= 0 && w.RowKey.CompareTo(rowKeyEnd) <= 0)
        .AsTableServiceQuery(context);

List<TweetEntity> tweetsForLead = new List<TweetEntity>();

TableContinuationToken continuation = null;

do
{
    TableQuerySegment<TweetEntity> segment = await AzureHelper.QuerySegmented(query, continuation);
    tweetsForLead.AddRange(segment.Results);
    continuation = segment.ContinuationToken;
} while (continuation != null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:27:40.010

我的蜘蛛侠感觉告诉我，您正在调用此方法，然后从 ASP.NET 或 UI 上下文调用`Wait`或返回的任务。[如果你这样做，你会死锁](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)，正如我在我的博客中解释的那样。`Result`

# database - Hibernate 将新的布尔列添加到数据库

> ID：15556056
> 
> 赞同：5
> 
> 时间：2013-03-21T19:06:34.577
> 
> 标签：database, hibernate

我正在尝试使用注释将新的 bool 列添加到其中一个表中，我已经尝试过

`@Column(name = "selected", nullable = true)`

`private boolean selected;`

然后我添加了getter/setter，但是当我运行应用程序时，我得到了这个错误：

`Exception occurred inside setter of com.ingens.warranty.model.WarrantyCase.warrantyDetail; nested exception is org.hibernate.PropertyAccessException: Exception occurred inside setter of com.ingens.warranty.model.WarrantyCase.warrantyDetail`

我对 Hibernate 很陌生，虽然我的问题可能是一个新手问题，但它让我保持安静

谢谢

编辑：

好的，我在错误堆栈中发现了这个错误`Unknown column 'warrantyse14_.selected' in 'field list'`，显然没有创建该列，并且 sql select 命令正在使用该列，该列不存在，所以我假设注释由于某种原因不起作用，它只是运行应用程序后不创建列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:52:50.960

改变 `private boolean selected;`

到 `private Boolean selected;`

我认为发生的事情是 Hibernate 尝试将所选映射列中的空值设置为所选字段，这是原始的，因此是例外。如果该字段已设置为 Object，则不会发生这种情况。

列定义与架构更新/验证 (hbm2ddl) 结合使用很有用，并且映射不涵盖您自己定义新字段的情况。在这种情况下，您必须发出两条语句：

“更改表...添加选定的列...”

“更新...设置选定= false，其中选定为空”

为了触发对模式的自动 Hibernate 更新（例如应用`@ColumnDefinition`），您必须添加以下 Hibernate 属性：`hibernate.hbm2ddl.auto=update`如果您使用 JPA，则添加到 persistence.xml 提供程序属性，或者如果使用单独休眠

# r - 删除两个 ggplots 与 grid.arrange 结合的所有空间

> ID：15556068
> 
> 赞同：30
> 
> 时间：2013-03-21T19:07:21.067
> 
> 标签：r, ggplot2

我想在主题之间没有任何空格的情况下粘贴两个图（因此它们共享一个轴）。

鉴于：

```
p1 <- qplot(1,1,xlab="")

p1 <- p1 +
  theme(legend.position="none",
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(),
        plot.margin=unit(c(1,1,0,1), "cm"),
        panel.margin=unit(c(1,1,0,1), "cm"))
p2 <- qplot(1,2)

grid.arrange(p1,p2) 
```

产生：

![在此处输入图像描述](../Images/f0a31922180377468f0da09d5ae823e8.png)

我想消除两个图之间的空白。

我有调整高度的印象，就像对宽度所做的那样：[左对齐两个图形边缘（ggplot）](https://stackoverflow.com/questions/13294952/left-align-two-graph-edges-ggplot/13295880#13295880)是解决方案，但无法弄清楚。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-21T19:13:49.100

您应该提供`plot.margin`两个绘图并为 p1 的下边距和 p2 的上边距设置负值。这将确保两个情节连接。

```
p1 <-  qplot(1,1,xlab="")+
  theme(legend.position="none",
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(),
        plot.margin=unit(c(1,1,-0.5,1), "cm"))
p2 <- qplot(1,2)+
  theme(legend.position="none",
        plot.margin=unit(c(-0.5,1,1,1), "cm"))

grid.arrange(p1,p2) 
```

![在此处输入图像描述](../Images/c9968e2c625377932ca324014e9e49b2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T13:41:08.113

尝试

```
+ labs(x=NULL) 
```

或者

```
+ labs(x=NULL, y=NULL) 
```

在使用 grid.arrange 之前删除图 (p1, p2) 周围的左边距和底部边距

```
p1 <- qplot(1,1)+
 theme_bw() +
 theme(axis.text.x=element_blank(),
 axis.ticks.x=element_blank(),
 plot.margin = rep(unit(0,"null"),4),
 panel.margin = unit(0,"null"),
 axis.ticks.length = unit(0,"null"),
 axis.ticks.margin = unit(0,"null")) +
 labs(x=NULL)
p2 <- qplot(1,2)+
 theme_bw() +
 theme(
 plot.margin = rep(unit(0,"null"),4),
 panel.margin = unit(0,"null"),
 axis.ticks.length = unit(0,"null"),
 axis.ticks.margin = unit(0,"null"))

grid.arrange(p1,p2) 
```

# r - ggplot 中特殊变量的文档（..count..、..density.. 等）

> ID：15556069
> 
> 赞同：6
> 
> 时间：2013-03-21T19:07:23.157
> 
> 标签：r, ggplot2

ggplot2 中的 stats_ 函数创建特殊变量，例如`stat_bin2d`创建一个名为`..count..`. 我在哪里可以找到列出哪个 stat_ 函数返回了哪些特殊变量的文档？

我查看了主要的 ggplot2[文档页面](http://docs.ggplot2.org/0.9.3/stat_bin2d.html)和 R 在线帮助。我尝试阅读 stat_bin2d 的源代码，但它使用了一些我不理解的语言——我不知道如何了解背后的代码`StatBin2d$new(...)`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:29:18.510

它们中的大多数都记录在帮助页面的值部分中，例如，`?stat_boxplot`说

> 价值：
> 
> ```
>  A data frame with additional columns: 
> ```
> 
> 宽度：箱线图的宽度
> 
> ```
> ymin: lower whisker = smallest observation greater than or equal to
>       lower hinge - 1.5 * IQR 
> ```
> 
> 下：下铰链，25% 分位数
> 
> notchlower：缺口的下边缘 = 中位数 - 1.58 * IQR / sqrt(n)
> 
> 中间：中位数，50% 分位数
> 
> notchupper：缺口的上边缘 = 中值 + 1.58 * IQR / sqrt(n)
> 
> 上部：上部铰链，75% 分位数
> 
> ```
> ymax: upper whisker = largest observation less than or equal to
>       upper hinge + 1.5 * IQR 
> ```

我建议为那些仍未记录的错误报告提交。有一个[错误报告](https://github.com/hadley/ggplot2/issues/132)，`stat_bin2d`但它已按固定方式关闭。如果您创建一个新的错误报告，您可以参考该报告。

# javascript - LoadRunner 为什么 URL 模式可以解决我所有的 Java 问题

> ID：15556074
> 
> 赞同：0
> 
> 时间：2013-03-21T19:07:43.463
> 
> 标签：javascript, loadrunner

首先，我针对具有 Wickets 和 JavaScripts 的“丰富”Internett 应用程序录制了一个脚本，但它在回放时表现不佳。但是，以 URL 模式录制解决了很多这些问题。这是为什么？一般来说，我假设我以 URL 模式记录的脚本确实捕获了以下内容：

```
web_url("bootstrap-collapse-ver-12312478469.js" 
.
.
.
"RecContentType=text/JavaScript", 
```

这些对 ie JavaScript 操作网页的调用使页面识别为重播，因为 Javascript 在重播期间实际执行。在 HTML 模式下，这些 Javascript 没有执行（录制后没有在我的脚本中看到它们），因此页面没有正确的状态让回放识别它？

我的假设正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:43:50.537

执行 JavaScript 的唯一客户端类型是

*   GUI 虚拟用户（针对完整浏览器的 QTP 操作）
*   Citrix|RDP 针对完整浏览器运行
*   TruClient

您所看到的是作为一组显式请求的已执行 JavaScript 的输出。

# haskell - Haskell 中不直观的类型签名

> ID：15556077
> 
> 赞同：3
> 
> 时间：2013-03-21T19:07:51.343
> 
> 标签：haskell, type-signature

我做了这个（我认为是）相当简单的代码来计算三角形的第三边：

```
toRadians :: Int -> Double
toRadians d = let deg = mod d 360
              in deg/180 * pi

lawOfCosines :: Int -> Int -> Int -> Double
lawOfCosines a b gamma = sqrt $ a*a + b*b - 2*a*b*(cos (toRadians gamma)) 
```

但是，当我尝试将其加载到 GHCi 中时，出现以下错误：

```
[1 of 1] Compiling Main             ( law_of_cosines.hs, interpreted )

law_of_cosines.hs:3:18:
    Couldn't match expected type `Double' with actual type `Int'
    In the first argument of `(/)', namely `deg'
    In the first argument of `(*)', namely `deg / 180'
    In the expression: deg / 180 * pi

law_of_cosines.hs:6:26:
    No instance for (Floating Int)
      arising from a use of `sqrt'
    Possible fix: add an instance declaration for (Floating Int)
    In the expression: sqrt
    In the expression:
      sqrt $ a * a + b * b - 2 * a * b * (cos (toRadians gamma))
    In an equation for `lawOfCosines':
        lawOfCosines a b gamma
          = sqrt $ a * a + b * b - 2 * a * b * (cos (toRadians gamma))

law_of_cosines.hs:6:57:
    Couldn't match expected type `Int' with actual type `Double'
    In the return type of a call of `toRadians'
    In the first argument of `cos', namely `(toRadians gamma)'
    In the second argument of `(*)', namely `(cos (toRadians gamma))' 
```

事实证明，修复是删除我的类型签名，它工作正常。

```
toRadians d = let deg = mod d 360
              in deg/180 * pi

lawOfCosines a b gamma = sqrt $ a*a + b*b - 2*a*b*(cos (toRadians gamma)) 
```

当我查询 and 的类型`toRadians`时`lawOfCosines`：

```
*Main> :t toRadians
toRadians :: (Floating a, Integral a) => a -> a
*Main> :t lawOfCosines
lawOfCosines :: (Floating a, Integral a) => a -> a -> a -> a
*Main> 
```

有人可以向我解释这里发生了什么吗？为什么我写的“直观”类型签名实际上是不正确的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T19:13:39.663

问题出在`toRadians`:`mod`有类型`Integral a => a -> a -> a`，因此`deg`有类型`Integral i => i`（所以要么`Int`or `Integer`）。

然后您尝试使用`/`on `deg`，但`/`不采用整数（将积分除以`div`）：

```
(/) :: Fractional a => a -> a -> a 
```

解决方案是简单地使用`fromIntegral :: (Integral a, Num b) => a -> b`：

```
toRadians :: Int -> Double
toRadians d = let deg = mod d 360
              in (fromIntegral deg)/180 * pi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:28:48.327

Seeing `Floating a` and `Integral a` in a type signature together always sets off my internal alarm bells, as these classes are supposed to be mutually exclusive - at least, there are no standard numeric types that are instances of both classes. GHCi tells me (along with a lot of other stuff):

```
> :info Integral
...
instance Integral Integer -- Defined in `GHC.Real'
instance Integral Int -- Defined in `GHC.Real'
> :info Floating
...
instance Floating Float -- Defined in `GHC.Float'
instance Floating Double -- Defined in `GHC.Float' 
```

To see why these classes are mutually exclusive, let's have a look at some of the methods in both classes (this is going to be a bit handwavy). `fromInteger` in `Integral` converts an `Integral` number to an `Integer`, without loss of precision. In a way, `Integral` captures the essence of being (a subset of) the mathematical integers.

On the other hand, `Floating` contains methods such as `pi` and `exp`, which have a pronounced 'real number' flavour.

If there were a type that was both `Floating` and `Integral`, you could write `toInteger pi` and have a integer that was equal to 3.14159... - and that's not possible :-)

* * *

That said, you should change all your type signatures to use `Double` instead of `Int`; after all, not all triangles have integer sides, or angles that are an integral number of degrees!

If you *absolutely* don't want that for whatever reason, you also need to convert the sides (the `a` and `b` arguments) in `lawOfCosines` to `Double`. That's possible via

```
lawOfCosines aInt bInt gamma = sqrt $ a*a + b*b - 2*a*b*(cos (toRadians gamma)) where
    a = fromInteger aInt
    b = fromInteger bInt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T20:16:25.460

的类型签名`toRadians`说它需要一个`Int`但返回一个`Double`。在某些编程语言中，从一种转换到另一种（但不会返回）是自动发生的。Haskell 不是这样的语言。您必须*手动*请求转换，使用`fromIntegral`.

您看到的错误都来自各种不起作用的操作`Int`，或者来自尝试添加`Int`到`Double`或类似的操作。（例如，`/`不适用于`Int`，`pi`不适用于`Int`，`sqrt`不适用于`Int`...）

# stata - 使用 esttab 按组生成汇总统计信息，其中包含平均差和显着性列

> ID：15556078
> 
> 赞同：14
> 
> 时间：2013-03-21T19:07:57.110
> 
> 标签：stata

我想使用`esttab`( `ssc install estout`) 按组生成汇总统计信息，其中包含平均差异和显着性的列。很容易将它们生成为两个单独的表，使用`estpost`,`summarize`和`ttest`, 并手动组合，但我想自动化整个过程。

以下代码生成所需表的两个组件。

```
sysuse auto, clear

* summary statistics by group
eststo clear
by foreign: eststo: quietly estpost summarize ///
    price mpg weight headroom trunk
esttab, cells("mean sd") label nodepvar   

* difference in means
eststo: estpost ttest price mpg weight headroom trunk, ///
    by(foreign) unequal 
esttab ., wide label 
```

我可以打印两张表并将其剪切并粘贴到一张表中。

```
* can generate similar tables and append horizontally
esttab, cells("mean sd") label
esttab, wide label

* manual, cut-and-paste solution
-------------------------------------------------------------------------------------------------------
                              (1)                       (2)                         (3)                

                             mean           sd         mean           sd         
-------------------------------------------------------------------------------------------------------
Price                    6072.423     3097.104     6384.682     2621.915         -312.3         (-0.44)
Mileage (mpg)            19.82692     4.743297     24.77273     6.611187         -4.946**       (-3.18)
Weight (lbs.)            3317.115     695.3637     2315.909     433.0035         1001.2***       (7.50)
Headroom (in.)           3.153846     .9157578     2.613636     .4862837          0.540**        (3.30)
Trunk space (.. ft.)        14.75     4.306288     11.40909     3.216906          3.341***       (3.67)
-------------------------------------------------------------------------------------------------------
Observations                   52                        22                          74                
-------------------------------------------------------------------------------------------------------
t statistics in parentheses
* p<0.05, ** p<0.01, *** p<0.001 
```

似乎我应该能够通过一个`esttab`电话获得所需的表格，而无需剪切和粘贴，但我无法弄清楚。有没有办法在不手动剪切和粘贴的情况下生成所需的表格？

我更喜欢输出一个 LaTeX 表格，但是任何消除剪切和粘贴的东西都是一大步，即使是通过一个分隔的文本文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-07-08T12:44:33.353

如果您仍想使用 esttab，您可以使用单元格和模式进行尝试。可以使用以下代码复制原始帖子中的表：

```
sysuse auto, clear

eststo domestic: quietly estpost summarize ///
    price mpg weight headroom trunk if foreign == 0
eststo foreign: quietly estpost summarize ///
    price mpg weight headroom trunk if foreign == 1
eststo diff: quietly estpost ttest ///
    price mpg weight headroom trunk, by(foreign) unequal

esttab domestic foreign diff, ///
cells("mean(pattern(1 1 0) fmt(2)) sd(pattern(1 1 0)) b(star pattern(0 0 1) fmt(2)) t(pattern(0 0 1) par fmt(2))") ///
label 
```

产生

```
-----------------------------------------------------------------------------------------------------
                              (1)                       (2)                       (3)                

                             mean           sd         mean           sd            b               t
-----------------------------------------------------------------------------------------------------
Price                     6072.42      3097.10      6384.68      2621.92      -312.26         (-0.44)
Mileage (mpg)               19.83         4.74        24.77         6.61        -4.95**       (-3.18)
Weight (lbs.)             3317.12       695.36      2315.91       433.00      1001.21***       (7.50)
Headroom (in.)               3.15         0.92         2.61         0.49         0.54**        (3.30)
Trunk space (.. ft.)        14.75         4.31        11.41         3.22         3.34***       (3.67)
-----------------------------------------------------------------------------------------------------
Observations                   52                        22                        74                
----------------------------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-10T10:33:34.790

我不认为有办法用`esttab`( `estout`package from `ssc`) 做到这一点，但我有一个`listtab`(also `ssc`) 和`postfile`. 此处的表格与我上面建议的表格略有不同，但该方法足够通用，您可以对其进行修改以满足您的需求。

该解决方案还使用 LaTeX 的`booktabs`包。

```
/* data and variables */
sysuse auto, clear
local vars price mpg weight headroom trunk

/* means */
tempname postMeans
tempfile means
postfile `postMeans' ///
    str100 varname domesticMeans foreignMeans pMeans using "`means'", replace
foreach v of local vars {
    local name: variable label `v'
    ttest `v', by(foreign)
    post `postMeans' ("`name'") (r(mu_1)) (r(mu_2)) (r(p))
}
postclose `postMeans'

/* medians */
tempname postMedians
tempfile medians
postfile `postMedians' ///
    domesticMedians foreignMedians pMedians using `medians', replace
foreach v of local vars {
    summarize `v' if !foreign, detail
    local med1 = r(p50)
    summarize `v' if foreign, detail
    local med2 = r(p50)
    ranksum `v', by(foreign)
    local pval = 2 * (1 - normal(abs(r(z))))
    post `postMedians' (`med1') (`med2') (`pval')
}
postclose `postMedians'

/* combine */
use `means'
merge 1:1 _n using `medians', nogenerate
format *Means *Medians %9.3gc
list

/* make latex table */
/* requires LaTeX package `booktabs` */
listtab * using "Table.tex", ///
    rstyle(tabular) replace ///
    head("\begin{tabular}{lcccccc}" ///
    "\toprule" ///
    "& \multicolumn{3}{c}{Means} & \multicolumn{3}{c}{Medians} \\" ///
    "\cmidrule(lr){2-4} \cmidrule(lr){5-7}" ///
    "& Domestic & Foreign & \emph{p} & Domestic & Foreign & \emph{p}\\" ///
    "\midrule") ///
    foot("\bottomrule" "\end{tabular}") 
```

这产生以下结果。

![在此处输入图像描述](../Images/fe68c356dad7f4c72d4d26ac465c08aa.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-22T16:43:35.067

选择的答案很好，但有点多余。您可以仅使用 estpost ttest 获得相同的结果。

```
sysuse auto, clear
estpost ttest price mpg weight headroom trunk, by(foreign)
esttab, cells("mu_1 mu_2 b(star)" 
```

输出如下所示：

```
 mu_1          mu_2         b   

c_score     43.33858    42.034       1.30458***
nc_a4_17    4.007524    3.924623    .0829008* 
```

# javascript - 创建带有县的亚利桑那州等值线地图和有关县的数据的 excel 文件

> ID：15556081
> 
> 赞同：1
> 
> 时间：2013-03-21T19:08:00.113
> 
> 标签：javascript, jquery, jvectormap, jqvmap

我对使用 javascript 及其各种库和插件的数据可视化相当陌生。我正在尝试创建一个亚利桑那州及其所有县的交互式州地图，我有与这些县内的学校有关的数据，我将通过地图进行探索或展示。现在我只是在讨论应该使用哪个插件或工具，我已经检查了 Polymaps、jqvmaps、jvectorMaps。如果做过类似事情的人可以提出建议，那将是很大的帮助。

此外，如果有人可以对使用 google maps api 有所了解，那么入门的学习曲线是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:16:18.190

我打算为美国所有的县做类似的事情，所以我收集了一些可能对你有用的信息。这是整体方法。

1.  收集数据，例如县列表，每个县都有 FIPS id、显示名称和 svg 地图。此信息属于[公共领域](http://commons.wikimedia.org/wiki/File:Blank_Map_of_Arizona.svg)。就像下面显示的亚利桑那州的空白 SVG 地图。

![svg 亚利桑那州地图](../Images/9db0057647654ab0e8f5406d313c14af.png)

2.  将所有这些数据按县 ID 存储在 MySQL 或任何您喜欢的数据库中。添加与学校有关的数据。现在您可以将数据子集导出到 csv 文件以进行分析。我更喜欢使用 R。一旦您准备好地图和数据，请继续下一步。

3.  您可以使用 Raphael 在地图上叠加此数据，如[本文所示](http://jebruner.com/2011/11/how-to-build-an-interactive-map-with-open-source-tools/)

或者

使用这个开源 JQuery[插件](http://newsignature.github.io/us-map/)并对其进行自定义以创建您自己的可点击热图。

让我知道您的进展情况，我们可以提出一些想法。

编辑：这是另[一篇不错的文章](http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#more-3581)，如何使用免费工具制作 Choropleth。这看起来是实现您所追求的最佳方法。它使用 Python，所以它应该整洁干净。

# azure - Azure 服务总线和事务

> ID：15556084
> 
> 赞同：11
> 
> 时间：2013-03-21T19:08:28.380
> 
> 标签：azure, transactions, azure-sql-database, azureservicebus

我是 Azure 服务总线的新手，我正在尝试建立用于排队消息的事务策略。由于 SQL Azure 不支持 MSDTC，因此对于分布式 TransactionScope，我无法使用它。所以，我有一个可以手动处理我的数据库事务的工作单元。

问题是我只能找到使用 TransactionScope 来处理数据库和 Azure 服务总线操作的人。有没有其他神奇的方法可以在不使用 TransactionScope 的情况下在 Service Bus 上实现事务？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-14T01:21:40.583

如果您将使用云托管或 Azure 服务总线之类的服务，您应该开始考虑放弃两阶段提交 (2PC) 或分布式事务 (DTC)。

相反，请谨慎使用每个资源的事务（即 SQL 命令的事务或服务总线操作的事务）。并避免跨越该资源边界的事务。

然后，您可以使用可靠的消息传递和模式（如 saga 等）将这些资源/组件操作结合在一起，以进行工作流管理和错误补偿。并从那里向外扩展。

[由于各种原因](http://blogs.msdn.com/b/clemensv/archive/2011/10/06/achieving-transactional-behavior-with-messaging.aspx)，云中的 2PC 很难（但并非不可能，您仍然可以使用 IaaS）。

由 DTC 实现的 2PC 有效地依赖于协调器及其日志以及与协调器的连接，以实现非常高的可用性。它还取决于各方以权宜之计的方式合作取得积极成果。为此，您需要在故障转移群集中运行 DTC，因为它是整个系统的致命弱点，任何事务都依赖于 DTC 清除它。

我将在这里[引用](http://blogs.msdn.com/b/clemensv/archive/2011/10/06/achieving-transactional-behavior-with-messaging.aspx)一个很好的例子，说明如何将 2PC 交易视为一系列消息/动作和补偿

> 2PC 交易的典型例子是银行账户转账。您借记一个帐户并贷记另一个帐户。
> 
> 这两个操作需要一起成功或失败，否则你要么创造要么摧毁金钱（顺便说一句，这是非法的）。这就是非常常用来说明 2PC 事务的示例。
> 
> 问题是——这根本不是它真正的工作方式。从一个银行账户向另一个银行账户取钱是一件相当复杂的事情，涉及大量其他账户。更重要的是，这不是一个同步失败/成功的场景。
> 
> 相反，会计原则适用（惊喜！）。当发起转账时，比方说在网上银行中，转账以消息的形式记录以提交到会计系统，借记在账户中被记录为影响显示余额的“待处理”交易。
> 
> 从用户的角度来看，交易已经“完成”，但实际上还没有发生任何事情。最终，会计系统将收到消息并开始执行转账，这通常会导致一系列操作，其中许多会产生进一步的消息，包括记入清算账户并通知另一家银行转账。
> 
> 这里的原则是所有的进步都是向前的。如果某项操作由于某种技术原因无法运行，则可以在技术原因解决后重试。
> 
> 如果由于业务原因操作失败，则可以中止操作——但不是通过取消以前的工作，而是通过与以前的工作相反的方式。如果一个帐户被记入贷方，则该贷项将被取消，并借记相同金额。
> 
> 对于某些类型的失败交易，“反向”操作可能不是完全对称的，但可能会导致额外的操作，例如征收罚款。
> 
> 事实上，在会计中，销毁任何工作都是非法的——“删除”和“更新”是入狱的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T10:52:43.150

您可以使用事务范围。它工作得很好。即使您已经发送了一条消息，但是其他一些事情（数据库更新）失败了，那么该消息也不会发布到队列中。

```
using var scope = new TransactionScope(TransactionScopeOption.RequiresNew, TransactionScopeAsyncFlowOption.Enabled);
try
{
        var messageBody = "This is my message";
        var message = new Message(Encoding.UTF8.GetBytes(messageBody));
        await _queueClient.SendAsync(message);

        await _myOtherService.FailPotentially();            // if this method fails then message will ne rolled back

        scope.Complete();
}
catch (Exception exception)
{
    scope.Dispose();
    _logger.LogError(" ... ", exception);
    throw;
} 
```

根据[ServiceBus 文档](https://azure.microsoft.com/pl-pl/pricing/details/service-bus/)，您**必须使用`standard`定价而不是`basic`**

# c# - 从 aspx 页面访问静态类方法

> ID：15556086
> 
> 赞同：1
> 
> 时间：2013-03-21T19:08:34.270
> 
> 标签：c#, asp.net

我收到“System.ArgumentException：不支持关键字：'<%'。” 当我尝试访问将确定我将使用什么连接字符串的静态类方法时出错。这可能是语法错误，但我不太熟悉从 aspx 页面访问类方法。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%=GetConnectionString.createConnectionString()%>" SelectCommand="SELECT * FROM [Activity]" OnSelecting="SqlDataSource1_Selecting1"></asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:10:58.560

内联表达式的单引号：

```
ConnectionString='<%=GetConnectionString.createConnectionString()%>' 
```

* * *

还可以看看这个，它解释了在哪些上下文中可以使用语法`<%#`、`<%=`和`<%$`。

[ASP.net 内联表达式问题](https://stackoverflow.com/questions/558954/asp-net-inline-expression-issue)

# android - 优化 FragmentActivity 中 Fragment 替换时的布局

> ID：15556097
> 
> 赞同：0
> 
> 时间：2013-03-21T19:09:18.240
> 
> 标签：android

我试图`Fragment`在`FragmentActivity`运行时替换 a 。

## 片段活动.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

## MyFragmentActivity.java

```
public class MyFragmentActivity extends SlidingFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_activity);
    }

    // Will be called by AsyncTaskLoader's onLoadFinished.
    public void selectActiveContent() {
        // MyFragment's top level is LinearLayout
        Fragment fragment = new MyFragment();         

        getSupportFragmentManager().beginTransaction().replace(R.id.content, fragment).commitAllowingStateLoss();
    } 
```

但是，我意识到结果并未优化。

![在此处输入图像描述](../Images/c1d1b799bf4ccf52b8604f207f6f0591.png)

我意识到`FrameLayout`通过我自己提供的`fragment_activity.xml`，正在依附于另一个父母`FrameLayout`。

代替

```
FrameLayout
    FrameLayout
        LinearLayout
            LinearLayout
            ListView 
```

我希望拥有

```
FrameLayout
    LinearLayout
        LinearLayout
        ListView 
```

我可以知道我怎么能做到这一点？我有可能`fragment_activity.xml`没有`ViewGroup`(FrameLayout) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:13:50.977

虽然该[`<merge>`](http://developer.android.com/guide/topics/resources/layout-resource.html#merge-element)元素是专门为删除无用的视图层次结构而设计的，但根据[这个答案](https://stackoverflow.com/a/13351391/1676363)，您不能在 Fragments 中使用合并标签，而必须使用您注意到的 ViewGroup 根视图，最轻的重量（即渲染速度最快）是框架布局。

# html - 当悬停在其悬停前位置的中心时，如何保持水平导航列表项的大小增加？

> ID：15556104
> 
> 赞同：1
> 
> 时间：2013-03-21T19:09:31.907
> 
> 标签：html, css, hover, nav

当悬停在导航列表项（水平排列）上时，它会变大并获得一个边距以在它和与其相邻的其他列表项之间创建一个间隙，你如何使悬停的项目保持在其悬停前位置的中心，而相邻的项目向左和向右散开？以下是我目前拥有的代码（您也可以在[CodePen](http://codepen.io/tjfwalker/pen/ewyxE)上查看）。

谢谢， TJ

```
#nav {
        list-style: none;
        padding: 0;
        margin: 0;
        position: absolute;
        top: 15px;
        right: 15%;
        font-weight: bold;
        }

        #nav:hover {
            }

        #nav li {
            float: left;
            padding: 5px 10px;
            text-align: center;
            }

            li:first-child {
                border-top: 4px solid white;
                border-right: 2px solid white;
                border-bottom: 4px solid white;
                border-left: 4px solid white;
                }

            li:nth-child(2) {
                border-top: 4px solid white;
                border-right: 2px solid white;
                border-bottom: 4px solid white;
                border-left: 2px solid white;
                }

            li:nth-child(3) {
                border-top: 4px solid white;
                border-right: 2px solid white;
                border-bottom: 4px solid white;
                border-left: 2px solid white;
                }

            li:nth-child(4) {
                border-top: 4px solid white;
                border-right: 4px solid white;
                border-bottom: 4px solid white;
                border-left: 2px solid white;
                }

        #nav li:hover {
            box-shadow:
                2px 2px 6px rgba(0, 0, 0, 0.2),
                -2px -2px 6px rgba(0, 0, 0, 0.2),
                -2px 2px 6px rgba(0, 0, 0, 0.2),
                2px -2px 6px rgba(0, 0, 0, 0.2);
            z-index: 5;
            text-align: center;
            background-color: white;
            color: black;
            border: 4px solid rgba(0, 0, 0, 0.2);
            font-size: 1.2em;
            margin: 0 10px;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:30:54.273

进行了一些操作，但这里的代码将为您执行此操作： http: [//codepen.io/anon/pen/cIEno](http://codepen.io/anon/pen/cIEno)。请注意，这需要 jQuery，因为您需要移动其他元素以保持悬停的元素居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:44:29.383

我只使用 CSS 完成了它。所以关键是使用：

```
display: inline; 
```

在 li 上，并将 ul 包装在一个 div 中，这样您就可以：

```
text-align: center; 
```

现在它居中，它将从中心生长。我在这里进行了更改-http: [//codepen.io/anon/pen/uIdsr](http://codepen.io/anon/pen/uIdsr)

# php - 如何在 PHP 中设置此 SOAP 标头

> ID：15556107
> 
> 赞同：0
> 
> 时间：2013-03-21T19:09:50.103
> 
> 标签：php, soap, header

我尝试像这样设置 SOAP 标头：

```
<tns:Authentication xmlns:tns="iSklep3">
    <ApiKey xsi:type="xsd:string">abc</ApiKey>
</tns:Authentication> 
```

我是这样做的：

```
//...
    $client = new SoapClient($wsdlServer);
    $headerBody = array("ApiKey" => "abc");
    $header = new SoapHeader("iSklep3", "Authentication", $headerBody);
    $client->__setSoapHeaders($header);
//...
//calling soap methods
... 
```

当我调用方法时，它返回的 Api key 是错误的，但它应该是正确的。有人知道 SOAP 标头的问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:19:25.903

设置标题后，您还没有调用 call 函数。

```
<?php

$client = new SoapClient(null, array('location' => "http://localhost/soap.php",
                                     'uri'      => "http://test-uri/"));
$header = new SoapHeader('http://soapinterop.org/echoheader/', 
                            'echoMeStringRequest',
                            'hello world');

$client->__setSoapHeaders($header);

$client->__soapCall("echoVoid", null);
?> 
```

来源：RTM [http://php.net/manual/en/soapclient.setsoapheaders.php](http://php.net/manual/en/soapclient.setsoapheaders.php)

# javascript - 一旦错误检查中断表单将不会提交

> ID：15556108
> 
> 赞同：0
> 
> 时间：2013-03-21T19:09:54.780
> 
> 标签：javascript, jquery, forms

我正在做一个有一些错误检查的项目。但是，表单每次都想提交，所以我不得不中断提交。这就是我所做的。

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "order-form" }))
{
...

<input type="submit" name="btnSaveOpv@(item.Id)" value="@T("Admin.Common.Save")" id="btnSaveOpv@(item.Id)" class="adminButton" style="display: none;" onclick="SaveBtn(@item.Id);" />

...

    var originalIssuedQty = 0;

    function SaveBtn(id) {
    var quantity = parseInt($("#pvQuantity" + id).val());
    var issuedQty = parseInt($("#pvIssuedQty" + id).val());
    var stockQty = parseInt($("#hfStockQty" + id).val());
    var availableStockQty = stockQty + parseInt(originalIssuedQty);

    //Issued Quantity cannot exceed Quantity (you can't issue more than requested)
    if (issuedQty > quantity) {
    alert("Issued Quantity cannot exceed Quantity.");
    $("#order-form").submit(function (e) { e.preventDefault(); });
    return false;
    }

    //Make sure Issued Quantity is within Available Stock Quantity
    if (issuedQty > availableStockQty) {
    alert("There is not enough Products in Stock to issue this amount.");
    $("#order-form").submit(function (e) { e.preventDefault(); });
    return false;
    }

    //Present confirmation
    var result = confirm('@T("Admin.Common.AreYouSure")');
    if (!result) {
    $("#order-form").submit(function (e) { e.preventDefault(); });
    return false;
    }
    else {
    $("#order-form").submit(function (e) { this.submit(); });
    //$("#order-form").submit(function (e) { return true; });
    }
    }    
    ...
} 
```

这是问题所在。每当我第一次尝试在不触发任何错误检查的情况下提交时，一切正常。当我触发错误检查时，一切正常。但是，如果我修复错误并尝试再次提交，页面只会刷新。对此的任何想法都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:48:52.283

你把事情弄得太复杂了。

这是一个关于如何进行验证以及如何在表单无效时阻止表单提交的基本模板：

```
$(function() {
  $("#order-form").submit(function (e) {
    var isValid = false;

    // Do your validation here and put the result in the variable isValid

    if ( !isValid ) {
      e.preventDefault(); // If the form is invalid stop the submit, otherwise proceed
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:49:48.053

每次调用 时`$("#order-form").submit(function (e) { whatever });`，都会添加一个*额外*的处理函数。它不会删除您已经添加的处理程序。这可能就是它崩溃的原因。

反复更改`submit`事件处理程序是一种混乱的方式。相反，您应该有一个处理提交事件的函数，并且该函数应该执行（或调用）错误检查，并`preventDefault()`在必要时进行（如 ZippyV 建议的那样）。

# javascript - 表单数据未传递到 PHP 文件

> ID：15556111
> 
> 赞同：0
> 
> 时间：2013-03-21T19:10:03.357
> 
> 标签：javascript, mootools

### 我正在编写的程序和我试图实现的功能

好的。所以我现在写的是一个非常简单的论坛，在 Javascript 中使用 AJAX。我的部分任务是使用我的讲师用 PHP 为我们编写的 API 添加新帖子。请注意，API 和 SQL 数据库是完全本地的。

我用来添加这篇文章的功能是：

```
function addPosts()
{
// Add the new thread to the SQLlite database.
var treq = new Request({
    url:'guestbook/control.php?action=insertPost',
    'method':'post',
    onSuccess: function() {
        alert('win');
    },
    onFailure: function() {
        alert('fail');
    }
}).send(Object.toQueryString({
    // Had to convert it to a query string because it wouldn't work as a normal object.

    // These are the required values to send, to store a "post" in the database.
    'name':'This is a name',
    'comment':'This is a comment!'
}));
} 
```

我知道这将每次添加相同的数据。我只是想让这该死的东西工作！

### 问题

发生的事情是，当调用这个函数时，我得到一个 SQL 语法错误。我很困惑，因为这意味着我的讲师的代码是错误的。在与我的讲师交谈后，他解释说当发布数据未正确发送到 PHP 代码时会发生这种情况。所以我开始使用谷歌浏览器的开发者工具来看看发生了什么，这就是我发现的：

![帖子数据截图](../Images/a4e54a6fd8a6e38e2aacdd8d819581cc.png)

现在对我来说，这意味着数据已成功加载到请求中，并且可以很好地传递给 PHP 文件。显然我错了。我一直在绞尽脑汁试图完成这项工作。

我知道这个 API 工作正常，因为我班上的其他人都没有遇到任何问题，而且我使用的代码实际上是抄袭了笔记中的代码，所以我有 90% 的把握是正确到。

需要注意的一点是`onSuccess`密钥中的代码运行，所以我知道这在 AJAX 方面不是问题。

另一件事是，这段代码在大学里的那些计算机上工作，自从我把它带回家后，它就决定不工作了。

**堆栈跟踪**

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[HY000]：一般错误：1 接近“）”：G:\Ajax Coursework\guestbook\php\database.php:134Stack trace:#0 G: \Ajax Coursework\guestbook\php\database.php(134): PDO->prepare('INSERT INTO pos...')#1 G:\Ajax Coursework\guestbook\php\class.GuestBook.php(44): DatabaseHandler->insert(Array)#2 G:\Ajax Coursework\guestbook\control.php(8): GuestBook->insert(Array)#3 G:\Ajax Coursework\guestbook\control.php(56): insertPost( )#4 {main} 在第 134 行的 G:\Ajax Coursework\guestbook\php\database.php 中抛出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:08:28.367

Object.toQueryString 用于将对象转换为查询字符串。因此，如果服务器要求同时设置 $_POST['name'] 和 $_POST['comment']，则不会。

坦率地说，因为您要发布它，我认为 $_GET['name'] 或 $_GET['comment'] 也不会设置。

Request.send 需要一个对象。您正在向它发送一个字符串。所以应该是 Request.send({prop: 'value'})，而不是 Request.send(value)。

帮自己一个忙，用下面的 php 代码做一个 PHP，看看它返回什么。它可能会立即为您解决这个问题。我感觉除了 $_GET['action'] 什么都没有发送

```
<?php
echo '<pre>';
print_r($_GET);
print_r($_POST);
echo '</pre>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T05:14:25.163

以防万一有人偶然发现这个线程寻找答案：

```
function addPosts()
{
// Add the new thread to the SQLlite database.
var treq = new Request({
    url:'guestbook/control.php?action=insertPost',
    onSuccess: function() {
        alert('win');
    },
    onFailure: function() {
        alert('fail');
    }
}).post('name=This is a name&comment=This is a comment!');
} 
```

这里我使用 .post 方法来发布数据。

# python - 实现支持向量机 - 高效计算 gram-matrix K

> ID：15556116
> 
> 赞同：5
> 
> 时间：2013-03-21T19:10:13.533
> 
> 标签：python, machine-learning, svm

我正在为 Python 中的 mnist 数据实现 SVM，现在我正在使用 cvxopt 来解决 QP 并获取 alpha。

但我的问题是计算 K-gram 矩阵 ** 有效 **，我只从两个类（数字 6 和 0）开始，训练示例的数量少于前 1k，接下来是 10K。

为了更快地计算整个 1k x 1k 矩阵，我正在使用 Process，并提供不同的原始数据进行计算。但它仍然需要 2 分钟 - 它的 rbf - 高斯。（10k 一个仍在运行！）

如果有人研究它或者可能是 Python 爱好者可以在这里帮助我，那就太好了！

PS：如果有人不知道计算 gram-matrix，这里是详细信息：它很简单：

```
for i in range(1k):
    for j in range(1k):
         for K[i,j] = some_fun(x[i], x[j]) 
```

其中 some_fun - 是点积或花式高斯。

我正在使用 python 2.7、numpy 和 Mac Air 4G RAM，128G 固态。

[编辑] 如果有人来过这里！是的，SVM 确实需要更长的时间......如果你正在进行多分类，那么你必须再次计算 k-gram 矩阵......所以它会花费很长时间，所以我建议实施算法并检查它两次并让它运行一夜！但你肯定会在第二天看到好结果！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:06:27.007

你用的是numpy，对吧？您应该通过使用 numpy 的矩阵运算一次计算整个矩阵来获得很大的加速，而不是使用缓慢的 Python 循环来查找每个成对评估。例如，如果我们假设它`x`是一个行实例数据矩阵（每个数据点一行，每个维度一列）：

```
# get a matrix where the (i, j)th element is |x[i] - x[j]|^2
# using the identity (x - y)^T (x - y) = x^T x + y^T y - 2 x^T y
pt_sq_norms = (x ** 2).sum(axis=1)
dists_sq = np.dot(x, x.T)
dists_sq *= -2
dists_sq += pt_sq_norms.reshape(-1, 1)
dists_sq += pt_sq_norms

# turn into an RBF gram matrix
km = dists_sq; del dists_sq
km /= -2 * sigma**2
np.exp(km, km)  # exponentiates in-place 
```

生成数据`np.random.normal(size=(1000, 784))`，这在我的四核 i5 iMac 上需要 70 毫秒。将其增加到 10k 个数据点，只需不到 7 秒。

[sklearn.metrics.pairwise.rbf_kernel 的](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/metrics/pairwise.py#L322)工作方式类似，但它有一些额外的输入检查和对稀疏矩阵等的支持。

还值得注意的是，在 python 2 中，你应该循环`xrange(1000)`，而不是`range(1000)`. `range`实际上会构造一个要循环的列表对象，这会占用一些时间，也许更重要的是内存。对于 10,000，您可能没问题，但是如果您的循环太大，这可能会导致严重的问题。

# icons - 在 InnoSetup 中添加卸载图标

> ID：15556117
> 
> 赞同：3
> 
> 时间：2013-03-21T19:10:14.097
> 
> 标签：icons, inno-setup, uninstallation

我是 InnoSetup 的初学者。

我有两个图标`"iconnew_small.ico"`和 `"iconnew_smallUninstall.ico"`，最后一个用于 Unistall 选项。所有文件都在目录中`C:\mysoftware`

我正在关注此[示例](https://stackoverflow.com/questions/5170456/is-it-possible-to-change-the-uninstall-icon-in-inno-setup)，但安装后卸载图标为空白（空）

```
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; IconFilename: "{app}\C:\mysoftware\iconnew_smallUninstall.ico" 
```

这都是 innoSetup 代码：

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define MyAppName "Segmentation Accuracy Tool"
#define MyAppVersion "0.2 Beta"
#define MyAppPublisher "Gianni"
#define MyAppExeName "SegmentationAccuracy.exe"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{B4DD3F33-F6B3-4409-AF7A-D158FC099D39}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
DefaultDirName={pf}\{#MyAppName}
DefaultGroupName=Segmentation Accuracy Tool
AllowNoIcons=yes
OutputBaseFilename=Segmentation Accuracy Tool
SetupIconFile=C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\iconnew_small.ico
Compression=lzma
SolidCompression=yes

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"
Name: "brazilianportuguese"; MessagesFile: "compiler:Languages\BrazilianPortuguese.isl"
Name: "danish"; MessagesFile: "compiler:Languages\Danish.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"
Name: "german"; MessagesFile: "compiler:Languages\German.isl"
Name: "italian"; MessagesFile: "compiler:Languages\Italian.isl"
Name: "norwegian"; MessagesFile: "compiler:Languages\Norwegian.isl"
Name: "portuguese"; MessagesFile: "compiler:Languages\Portuguese.isl"
Name: "russian"; MessagesFile: "compiler:Languages\Russian.isl"
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

[Tasks]
Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked; OnlyBelowVersion: 0,6.1

[Files]
Source: "C:\Program Files (x86)\Inno Setup 5\Examples\MyProg.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_ctypes.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_hashlib.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_multiprocessing.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_socket.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_ssl.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\_tkinter.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\bz2.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\cfitsio.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\gdal19.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\geos_c.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\hdf5_hldll.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\hdf5dll.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\hdfdll.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\libiomp5md.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\library.zip"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\mfhdfdll.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\netcdf.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.core._dotblas.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.core._sort.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.core.multiarray.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.core.scalarmath.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.core.umath.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.fft.fftpack_lite.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.lib._compiled_base.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.linalg.lapack_lite.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\numpy.random.mtrand.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\osgeo._gdal.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\osgeo._gdal_array.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\osgeo._gdalconst.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\osgeo._ogr.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\osgeo._osr.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\pyexpat.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\python27.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\SegmentationAccuracy.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\select.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\sz.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\tcl85.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\tk85.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\unicodedata.pyd"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\xdrdll.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\xerces-c_2_8.dll"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\zlib1.dll"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
; Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; IconFilename: "{app}\iconnew_smallUninstall.ico"

[Run]
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:10:56.940

首先，您需要在该`[Files]`部分中添加一个条目，以指示安装程序将图标文件复制到某个目录中。在以下条目中，它将被复制到应用程序目录中：

```
[Files]
...
Source: "C\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_‌​project\iconnew_smallUninstall.ico"; DestDir: "{app}"; Flags: ignoreversion 
```

之后，您需要修复用于该图标[`IconFilename`](http://jrsoftware.org/ishelp/topic_iconssection.htm#IconFilename)的部分条目的参数值。`[Icons]`使用上面的文件入口路径，你会得到以下图标入口：

```
[Icons]
...
Name: "{group}\{cm:UninstallProgram,{#MyAppName}}"; Filename: "{uninstallexe}"; IconFilename: "{app}\iconnew_smallUninstall.ico" 
```

`[Files]`只是一个旁注，查看您部分中相当长的文件条目列表。您可以为[`Source`](http://www.jrsoftware.org/ishelp/index.php?topic=filessection&anchor=Source)参数使用掩码。因此，例如，如果您想让安装程序将某个目录中的所有文件包含到您的设置中，并使用相同的标志将所有文件复制到同一个文件夹中，您可以使用这样的单行：

```
[Files]
Source: "C:\PythonScript\Script_fun\Segmentatin_Accuracy\SegmentationAccuracy_executable_project\dist\*"; DestDir: "{app}"; Flags: ignoreversion 
```

# events - 在 NSTextView 中处理 textDidChange 方法

> ID：15556118
> 
> 赞同：0
> 
> 时间：2013-03-21T19:10:16.560
> 
> 标签：events, keydown, nstextview

如果我的 NSTextView 中的文本发生变化，我想触发事件。有没有办法直接从 NSTextView 触发，或者我必须为 NSTextView 创建一个自定义类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:24:56.773

```
- (void)textDidChange:(NSNotification *)notification
 {
  ----do stuff here----  
    NSLog(@"text typed");  
} 
```

将方法添加到您的代码中......足够了

# jquery - 使用 jQuery 缓存 DOM 元素

> ID：15556119
> 
> 赞同：0
> 
> 时间：2013-03-21T19:10:17.057
> 
> 标签：jquery

我正在为命名约定而苦苦挣扎，我想为任何作为 DOM 元素缓存变量的变量制定一个约定。

到目前为止，我已经开始使用这个：

```
window.x = $('#x'); 
```

当然，这会将其置于全局范围内，但根据我的惯例，没关系。

但问题在于查看 window.x 并没有向我传达它是 $('#x') 的缓存变量。所以现在我想尝试的是使用 jQuery 插件技术来存储这些值。就像是：

```
;(function($, window, undefined) {
    $.fn.x = function() {
        return $('#x');
    }
})(jQuery, window); 
```

这样，我可以引用 $x.val()，它会立即告诉我 $x 是 $('#x') DOM 元素的缓存。

问：如何创建一个名为 x 的插件，它是 $('#x') 选择器的返回值？我做对了吗？现在，您可能会说（用您最好的 Office Space 配音）“这是一个可怕的想法”，但我只是在尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:21:55.290

我想不出缓存 DOM 元素的理由。对于初学者，如果您使用 jQuery id 选择器，它们是最快的选择器类型，因此无需缓存 DOM 元素。当您在示例中添加到全局命名空间时，您只是创建了一个快捷方式或别名来选择 id 为“x”的元素。在我的代码中，我使用立即调用函数表达式 (IIFE) 来封装代码的单个作用域部分。如果要重复引用全局变量，我会将它们放在开头。这是一个例子：

```
// An immediately-invoked function expression wraps all JavaScript code to keep it scoped to this module.
(function ($) {
    // Closure-local variables.
    var $grid;
    var $table;
    // etc.

    // Bind an initialize event. Will be called when this code needs to execute.
    $(document).on('initialize', initialize);

    // Initialize the global variables.
    function initialize() {     
        $grid = $('#grid');
        $table = $('#table');

        // other setup...
    }

})(jQuery); 
```

我使用了在页面初始加载时触发的初始化事件，它设置全局变量并设置 IIFE。IIFE 使您的代码与所有其他代码分开，“缓存”元素只是在初始化事件中设置的全局变量，因此您不必重复调用它们。

# iphone - 如何在 CorePlot 中准确设置axisLabel 的偏移量？

> ID：15556120
> 
> 赞同：1
> 
> 时间：2013-03-21T19:10:22.607
> 
> 标签：iphone, ios, core-plot

问题陈述：

使用 CorePlot 创建的条形图有一个具有动态范围的 Y 轴。该范围的最小值被假定为 <= 0。该范围的最大值被假定为 > 0。

条形图具有自定义 X 轴标签，这些标签具有偏移以使其与 Y 轴的 0 线保持距离。( `label.offset`)

但是，由于 0 线的确切位置可能会在运行期间发生变化，因此偏移 X 轴标签的静态值是不够的。

问题：

当轴参数在运行时发生变化时，准确设置轴标签偏移的适当方法是什么？

附上显示问题的屏幕截图。标签应低于 ($200,000) 线，但由于最高值是动态的，它们会上下移动。

[http://i.imgur.com/jdwy1c2.png](http://i.imgur.com/jdwy1c2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:52:14.030

从链接的图片中，看起来您不是在绘制轴线。使用轴约束将 x 轴保持在绘图区域的底部。如果您确实想绘制一条轴线，例如在 处`y = 0`，请添加第二个 x 轴。使用一个来绘制轴线，另一个用于定位标签。将第二个轴的所有线型属性设置为`nil`，使其不绘制任何线条并使用约束将其保持在绘图区域的底部。

# jquery - Jquery 滑块计时器

> ID：15556122
> 
> 赞同：3
> 
> 时间：2013-03-21T19:10:24.747
> 
> 标签：jquery, timer, slider

我需要使用 jquery 为网站创建自定义滑块。到目前为止，如果我单击一个按钮，我已经设法让它按照我想要的方式运行，但我想实现一个自动计时器，以便幻灯片在 5 秒后切换。

这是我的 JS 代码：

```
function MasterSlider() {
    //store the current button ID
    var current_button = $(this).attr('id');

    //reset all the items
    $('#slider ul a').removeClass('slider-button-active');         
    //set current item as active
    $(this).addClass('slider-button-active');

    //scroll it to the right position
    $('.mask').scrollTo($(this).attr('rel'), 850);

    //Check which button is pressed and fade the text accordingly
    if(current_button == "slider_item1")
    {
        $('#slider h3').fadeOut().removeClass('caption_active');
        $('#slider_caption1').fadeIn().addClass('caption_active');
    }
    else if(current_button == "slider_item2")
    {
        $('#slider h3').fadeOut().removeClass('caption_active');
        $('#slider_caption2').fadeIn().addClass('caption_active');
    }
    else if(current_button == "slider_item3")
    {
        $('#slider h3').fadeOut().removeClass('caption_active');
        $('#slider_caption3').fadeIn().addClass('caption_active');      
    }

    //disable click event
       return false;      
}

//append click event to the UL list anchor tag
$('#slider ul a').click(MasterSlider); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:20:41.620

`click()`您可以`a`在`setInterval`!

```
var intv;
var current = 0;  // STARTING SLIDE(<li>element button) INDEX
var slN = $('#slider li').length; // get number of slides(buttons.. all the same)

 // your function here with
 // clearInterval(intv);
 // in the second line.
 // In third line put:
 // current = $(this).closest('li').index();

// AUTO SLIDE

function auto(){
   intv = setInterval(function() {
        $('#slider ul li').eq( current++%slN  ).find('a').click();
   }, 5000 );       
}
auto(); // to start immediately auto-slide

// PAUSE ON MOUSEOVER

$('#slider').on('mouseenter mouseleave', function( e ){
    var onMouEnt = e.type=='mouseenter' ? clearInterval(intv) : auto() ;
}); 
```

*   由于触发了最后一个按钮，`current++%slN`该`auto`功能将循环
*   PAUSE 检测事件`mouseenter`并`mouseleave`通过您的画廊并使用三元运算符来执行以下操作：

```
$('#slider').on('mouseenter mouseleave', function( e ){ // catch eVENT
    var onMouEnt = e.type=='mouseenter' ?  // if e IS mouseenter
                   clearInterval(intv) :   // clear autoslide interval
                   auto() ;                // else (is mouseleave) run 'auto' fn
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T19:21:24.647

有一个函数 setInterval

```
 function hi(){
        //Your code here
    }

    //set an interval
    setInterval(hi, 30000); 
```

# c - 将 cuda 设备指针传递给主机函数

> ID：15556133
> 
> 赞同：0
> 
> 时间：2013-03-21T19:10:47.920
> 
> 标签：c, pointers, cuda, gpgpu

我有一个正在开发的程序。我是 CUDA 和 C 的新手，所以这对我来说真的是一段坎坷的旅程。我正在尝试将结构复制到设备中。然后我试图通过将结构复制到设备来将其返回到主机。下面是代码：

```
typedef struct {
    int row;
    int col;
    float *arr;
    int numElements;
} Matrix;

Matrix *RMatrix = //definition here

Matrix *d_RMatrix;

    copyMatrix(d_RMatrix, RMatrix, hostToDevice);

    Matrix *check = createMatrix(0, 0, NULL, 0);

    copyMatrix(check, d_RMatrix, deviceToHost); 
```

以及 的定义`copyMatrix`：

```
void copyMatrix (Matrix *copyTo, Matrix *copyFrom, Copy_type type) 
{

    if(type == hostToDevice) {

        // create temporary host matrix and array
        Matrix *copyFrom_h = createMatrix(copyFrom->row, copyFrom->col, NULL, copyFrom->numElements);

        // allocate device memory, pointing to array in host. Copy array to device memory
        cudaMalloc((void**) &copyFrom_h->arr, sizeof(float) * copyFrom_h->numElements);
        cudaMemcpy(copyFrom_h->arr, copyFrom->arr, sizeof(float) * copyFrom_h->numElements, cudaMemcpyHostToDevice);

        // copy the temporary memory to device
        cudaMalloc((void**) &copyTo, sizeof(Matrix));
        cudaMemcpy(copyTo, copyFrom_h, sizeof(Matrix), cudaMemcpyHostToDevice);

        copyFrom_h = NULL;
        free(copyFrom_h);

    }

    else if(type == deviceToHost) {

        cudaMemcpy(copyTo, copyFrom, sizeof(Matrix), cudaMemcpyDeviceToHost);

        // allocate space for array in the copy to matrix
        copyTo->arr = makeArray(copyTo->col, copyTo->row);
        cudaMemcpy(copyTo->arr, copyFrom->arr, sizeof(float) * copyTo->numElements, cudaMemcpyDeviceToHost);

    }
} 
```

该错误表示第一次调用 cudaMemcpy 时在 0x3（d_RMatrix 的值）处的内存访问无效，并导致第二次出现段错误。

我在这里有什么遗漏吗？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:21:41.480

在 C 中，指针是指向对象的实体（在这种情况下）。创建指针不会创建对象，也不会为其分配空间。

您已经创建了一个指针`Matrix *d_RMatrix;`，但它没有指向任何有效的对象。你很幸运它崩溃了，因为偶然它可以设法将数据实际复制到内存中的某个随机位置。

```
Matrix TheMatrix();
Matrix *PointerToTheMatrix = &TheMatrix; 
```

或者

```
Matrix *PointerToTheMatrix = createMatrix(...);//remember you will have to delete it eventually! 
```

函数参数是一种方式。如果您将某些内容分配给`copyTo`内部函数，则更改将在函数外部不可见。

/编辑：我有一个想法：

```
Matrix* CreateMatrixInDevice(Matrix* copyFrom)
{
    Matrix* copyTo = NULL;
    cudaMalloc((void**) &copyTo, sizeof(Matrix));//create outer struct
    cudaMemcpy(copyTo, copyFrom, sizeof(Matrix), cudaMemcpyHostToDevice);//copy data from outer struct
    //the arr element in the device is now INVALID (pointing to host)

    cudaMalloc((void**) &copyTo->arr, sizeof(float) * copyFrom->numElements);//create inner array
    cudaMemcpy(copyTo->arr, copyFrom->arr, sizeof(float) * copyFrom->numElements, cudaMemcpyHostToDevice);//copy matrix data

    return copyTo;
} 
```

# linq - 实体框架多对多有效，但包含无效

> ID：15556134
> 
> 赞同：4
> 
> 时间：2013-03-21T19:10:48.473
> 
> 标签：linq, entity-framework, ef-code-first, many-to-many

我与这 3 个表有典型的多对多关系

```
[Post] (
  [PostId] int, (PK)
  [Content] nvarchar(max)
   ...
)

[Tag] (
  [TagId] int, (PK)
  [Name] nvarchar
  ...
)

[TagPost] (
  [TagId] int, (PK, FK)
  [PostId] int (PK, FK)
) 
```

而且，TagId 和 PostId 是表上相应设置的 PK 和 FK 等。然后我在 c# 中有这些类和映射

```
public class Post {
    public Post()
    {
        this.Tags = new HashSet<Tag>();
    }

    [Key]
    public int PostId { get; set; }
    ...

    public virtual ICollection<Tag> Tags { get; private set; }
}

public class Tag {
    public Tag()
    {
        this.Posts = new HashSet<Post>();
    }

    [Key]
    public int TagId { get; set; }
    ...

    public virtual ICollection<Post> Posts { get; private set; }
}

internal class MyDbContext : DbContext
{
    public DbSet<Post> Posts { get; set; }
    public DbSet<Tag> Tags { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Post>().ToTable("Post");
        modelBuilder.Entity<Tag>().ToTable("Tag");

        modelBuilder.Entity<Post>()
            .HasMany(x => x.Tags)
            .WithMany(x => x.Posts)
        .Map(x =>
        {
            x.ToTable("TagPost");
            x.MapLeftKey("PostId");
            x.MapRightKey("TagId");
        });
    } 
```

然后我有这段代码来查询它们

```
var list = (from p in ctx.Posts.Include(p => p.Tags)
            from t in p.Tags
            where ... // some of my filter conditions
            select p).ToList(); 
```

这个加入确实返回了我正在寻找的帖子，但是即使我在那里有包含，返回的帖子也没有填写它们的关联标签。有人可以帮助指出我缺少的东西，以便我可以让标签也随帖子一起返回吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:04:11.513

double`from`是一个手册`Join`，它会导致`Include`被忽略，如[here](https://stackoverflow.com/questions/416847/join-and-include-in-entity-framework)和[here](https://stackoverflow.com/questions/794283/linq-to-entities-include-method-not-loading)所述。`Include`对于其他 LINQ 方法[（如 grouping 和 projections](https://stackoverflow.com/questions/4474951/entity-framework-include-is-not-working) ）也被忽略。

关系修复通常不适用于多对多关系，仅适用于在一端具有至少一个单一引用的关系 - 一对多或一对一。如果将`Posts`and 关联`Tags`到另一种类型（匿名或命名），则数据将正确加载，但由于关系是多对多的，EF 不会自动在内存中创建关系，因此`post.Tags`集合将保持为空。

要获得`Include`工作，您必须从查询中删除第二个`from`并将`where`子句直接应用于`Post`实体参数，例如：

```
var list = (from p in ctx.Posts.Include(p => p.Tags)
            where p.Tags.Any(t => t.TagId == 1)
            select p).ToList(); 
```

属性过滤器`Tag`在传递给`.Any`它的表达式中指定，该表达式是以`Tag`( `t`) 作为参数的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:29:48.330

尝试将所有内容选择到匿名对象中（像这样）

```
var list = (
        from p in ctx.Posts
        from t in p.Tags
        where ... // some of my filter conditions
        select new {
            Posts = p,
            Tags = p.Tags
        })
    .ToList(); 
```

* * *

根据对我最初答案的反馈以及 EF 可以找到相关实体但无法填充`Tags`集合的事实，我认为问题在于 Post 类中 Tags 实体的定义。

尝试从构造函数和set 声明中删除`Hashset<>`初始化程序：`private`

```
public virtual ICollection<Tag> Tags { get; set; } 
```

# java - 从另一个活动完成活动

> ID：15556138
> 
> 赞同：2
> 
> 时间：2013-03-21T19:11:16.783
> 
> 标签：java, android

假设我有 3 个活动 A、B 和 C。A 导致 B 导致 C。我希望能够在 A 和 B 之间来回移动，但是一旦 C 开始，我想完成 A 和 B。我了解如何在通过意图启动 C 时关闭 B，但是如何在 C 启动时关闭 A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:27:15.263

打开 C 活动时使用此标志。

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

这将清除 C 之上的所有活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:03:58.187

由于`A`是您的根（开始）活动，请考虑`A`用作调度程序。如果您想`C`在它之前（下）启动并完成所有其他活动，请执行以下操作：

```
// Launch ActivityA (our dispatcher)
Intent intent = new Intent(this, ActivityA.class);
// Setting CLEAR_TOP ensures that all other activities on top of ActivityA will be finished
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
// Add an extra telling ActivityA that it should launch ActivityC
intent.putExtra("startActivityC", true);
startActivity(intent); 
```

在`ActivityA.onCreate()`这样做：

```
super.onCreate();
Intent intent = getIntent();
if (intent.hasExtra("startActivityC")) {
    // Need to start ActivityC from here
    startActivity(new Intent(this, ActivityC.class));
    // Finish this activity so C is the only one in the task
    finish();
    // Return so no further code gets executed in onCreate()
    return;
} 
```

这里的想法是您启动 ActivityA（您的调度程序），`FLAG_ACTIVITY_CLEAR_TOP`以便它是任务中的唯一活动，并告诉它您希望它启动什么活动。然后它将启动该活动并自行完成。这将使您在堆栈中只剩下 ActivityC。

# c# - WPF在特定位置插入网格列

> ID：15556144
> 
> 赞同：-3
> 
> 时间：2013-03-21T19:11:30.473
> 
> 标签：c#, wpf

有没有办法在运行时将新列添加到其他 2 列之间的网格中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:27:30.963

是的，你可以这样做：

```
var index = 1; //column index to insert
var colDef = new ColumnDefinition() { Width=new GridLength(200) };
MyGrid.ColumnDefinitions.Insert(index, colDef); 
```

# batch-file - 获取匹配行之前出现的行

> ID：15556145
> 
> 赞同：1
> 
> 时间：2013-03-21T19:11:34.263
> 
> 标签：batch-file, cmd

我正在尝试对结果使用`for`循环`findstr`。我想让 var6 成为上面 found string 的整个行`Class=!var4!`。我放了`skip=-1`但这不起作用（向后看一行）。

所以如果它看起来像这样：

```
Name=Bismark #14
Class=var4 
```

我想要 var6 = Name=Bismarck #14

```
findstr /b "Class=!var4!" "PosTime_Campaign_SCR.mis"
if not errorlevel 1 (
for /f "skip=-1 delims=" %%L in ('findstr "Class=!var4!" PosTime_Campaign_SCR.mis') do (
if not errorlevel 1 (
set var6=!var6!%%L
)
)
) 
```

我很接近，但我不知道如何告诉`for`循环在找到的`findstr`.

解决方案：

```
@echo off

set var4=BBBismarck

for /f "delims=" %%L in (PosTime_Campaign_SCR.mis) do (
if /i "%%L" equ "Class=%var4%" (
    goto endloop
)
set "var6=%%L"
)
    :endloop

echo %var6%
pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:40:46.003

这将很难`findstr`用于这项工作。

我可以看到一种方法：使用该`/N`选项`findstr`写出行号，然后在另一个循环中使用该行号，在该循环中一次处理文件的一行并设置`var6`为上一行。

但是，如果您无论如何都要遍历文件中的每一行，则最好`findstr`完全跳过并进行自己的比较。或`findstr`在每一行上使用。

这是一些完全未经测试的代码来描述我的想象：

```
for /f %%L in (PosTime_Campaign_SCR.mis) do (
    if /i "%%L" equ "Class=%var4%" (
        goto endloop
    )
    set "var6=%%L"
)
:endloop

echo %var6% 
```

我们在这里所做的是设置`var6`每一行，但是当我们到达我们想要的行时，我们会跳出循环。因此`var6`最终被设置为上一行的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:42:25.217

```
(set var6=)
for /f "delims=" %%L in (PosTime_Campaign_SCR.mis) do IF NOT DEFINED var6 (
echo %%L | findstr "Class=!var4!" >nul
if not errorlevel 1 (set var6=!lastline!)
set lastline=%%L
) 
```

...假设 Class=var4 永远不会出现在文件的第一行。

`lastline`保存读取的最后一行的内容。当 FINDSTR 检测到匹配行时，将 var6 设置为读取的前一行的内容，并且由于现在在环境中设置了 var6，因此不会重复检查，因此它将 var6 设置为第一个匹配行之前的行的内容.

如果您删除，`IF NOT DEFINED var6`则 var6 将设置为 LAST 匹配行之前的行的内容。

如果 var6 在执行后未定义，则没有匹配行。

# python - PyPI 很慢。如何运行自己的服务器？

> ID：15556147
> 
> 赞同：41
> 
> 时间：2013-03-21T19:11:40.183
> 
> 标签：python, caching, pip, mirroring, pypi

当一个新的开发者加入团队，或者 Jenkins 运行一个完整的构建时，我需要创建一个新的 virtualenv。我经常发现使用 Pip 和大量（超过 10 个）需求设置 virtualenv 需要很长时间才能从 PyPI 安装所有内容。通常它完全失败了：

```
Downloading/unpacking Django==1.4.5 (from -r requirements.pip (line 1))
Exception:
Traceback (most recent call last):
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/basecommand.py", line 107, in main
    status = self.run(options, args)
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/commands/install.py", line 256, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/req.py", line 1018, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/req.py", line 1142, in unpack_url
    retval = unpack_http_url(link, location, self.download_cache, self.download_dir)
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/download.py", line 463, in unpack_http_url
    download_hash = _download_url(resp, link, temp_location)
  File "/var/lib/jenkins/jobs/hermes-web/workspace/web/.venv/lib/python2.6/site-packages/pip-1.2.1-py2.6.egg/pip/download.py", line 380, in _download_url
    chunk = resp.read(4096)
  File "/usr/lib64/python2.6/socket.py", line 353, in read
    data = self._sock.recv(left)
  File "/usr/lib64/python2.6/httplib.py", line 538, in read
    s = self.fp.read(amt)
  File "/usr/lib64/python2.6/socket.py", line 353, in read
    data = self._sock.recv(left)
timeout: timed out 
```

我知道 Pip 的`--use-mirrors`标志，有时我团队中的人已经通过使用`--index-url http://f.pypi.python.org/simple`（或另一个镜像）来解决问题，直到他们有一个及时响应的镜像。我们在英国，但在德国有一个 PyPI 镜像，我们从其他站点下载数据没有问题。

所以，我正在为我们的团队寻找在内部镜像 PyPI 的方法。

我看过的选项是：

1.  运行我自己的 PyPI 实例。有官方的 PyPI 实现：[CheeseShop](https://bitbucket.org/loewis/pypi)以及几个第三方实现，例如：[djangopypi](https://github.com/benliles/djangopypi)和[pypiserver](https://github.com/schmir/pypiserver)（见脚注）

    这种方法的问题是我对文件上传的完整 PyPI 功能不感兴趣，我只想镜像它提供的内容。

2.  [使用pep381client](https://bitbucket.org/loewis/pep381client/)或[pypi-mirror](https://github.com/mviera/pypi-mirror)运行 PyPI镜像。

    这看起来可以工作，但它需要我的镜像首先从 PyPI 下载所有内容。我已经设置了一个 pep381client 的测试实例，但是我的下载速度在 5 Kb/s 和 200 Kb/s 之间变化（位，而不是字节）。除非在某个地方有完整的 PyPI 存档的副本，否则我需要几周的时间才能拥有一个有用的镜像。

3.  使用 PyPI 循环代理，例如[yopypi](https://code.google.com/p/yopypi/)。

    这已经无关紧要了，因为[http://pypi.python.org](http://pypi.python.org)本身由[几个地理上不同的服务器](http://www.pypi-mirrors.org/)组成。

4.  在开发人员之间复制 virtualenv，或托管[当前项目依赖项的文件夹](http://honza.ca/2012/02/how-not-to-depend-on-pypi)。

    这无法扩展：我们有几个不同的 Python 项目，它们的依赖关系会随着时间（缓慢地）发生变化。一旦任何项目的依赖关系发生变化，就必须更新这个中央文件夹以添加新的依赖关系。复制 virtualenv 比复制包更糟糕，因为任何带有 C 模块的 Python 包都需要为目标系统编译。我们的团队同时拥有 Linux 和 OS X 用户。

    （这看起来仍然是一群坏人的最佳选择。）

5.  使用智能 PyPI 缓存代理：[collective.eggproxy](https://github.com/camptocamp/collective.eggproxy)

    这似乎是一个很好的解决方案，但[PyPI 的最后一个版本是 2009 年](https://pypi.python.org/pypi/collective.eggproxy)并讨论了 mod_python。

其他大型 Python 团队是做什么的？快速安装同一组 python 包的最佳解决方案是什么？

脚注：

*   我已经看到了[如何推出我自己的 PyPI 的问题？](https://stackoverflow.com/questions/1235331/how-to-roll-my-own-pypi/12874682#12874682)，但该问题与托管私有代码有关。
*   Python wiki[列出了替代的 PyPI 实现](http://wiki.python.org/moin/PyPiImplementations)
*   我最近还发现了[Crate.io](https://crate.io/)，但我不相信这对我使用 Pip 有帮助。
*   有一个网站监控[PyPI 镜像状态](http://www.pypi-mirrors.org/)
*   [PyPI 上的一些包将它们的文件托管在其他地方](http://reinout.vanrees.org/weblog/2013/02/28/pypi-discussion.html)，因此即使是完美的镜像也无法帮助所有依赖项

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T22:44:12.110

你有共享文件系统吗？

因为我会使用 pip 的缓存设置。这很简单。例如，在 /mnt 中创建一个名为 pip-cache 的文件夹。

```
mkdir /mnt/pip-cache 
```

然后，每个开发人员都会将以下行放入他们的 pip 配置中（unix = $HOME/.pip/pip.conf，win = %HOME%\pip\pip.ini）

```
[global]
download-cache = /mnt/pip-cache 
```

它仍然检查 PyPi，寻找最新版本。然后检查该版本是否在缓存中。如果是这样，它会从那里安装它。如果没有，它会下载它。将其存储在缓存中并安装它。所以每个包在每个新版本中只能下载一次。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T16:35:02.540

虽然它不能解决您的 PyPI 问题，但可以使用**[Terrarium](https://github.com/policystat/terrarium)**将构建的 virtualenvs 交给开发人员（或部署） 。

使用[terrarium](https://github.com/policystat/terrarium)打包、压缩和保存 virtualenvs。您可以将它们存储在本地，甚至可以将它们[存储在 S3 上](https://github.com/policystat/terrarium#using-s3-storage-backend)。来自 GitHub 上的文档：

```
$ pip install terrarium
$ terrarium --target testenv --storage-dir /mnt/storage install requirements.txt 
```

新建环境后，terrarium 会将环境归档并压缩，然后将其复制到 storage-dir 指定的位置。

在针对指定相同存储目录的相同要求集的后续安装中，terrarium 将从 /mnt/storage 复制并提取压缩存档。

要准确显示 terrarium 将如何命名存档，您可以运行以下命令：

```
$ terrarium key requirements.txt more_requirements.txt
x86_64-2.6-c33a239222ddb1f47fcff08f3ea1b5e1 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-28T20:51:53.920

我最近将[**devpi**](http://doc.devpi.net/)安装到我的开发团队的 Vagrant 配置中，这样它的包缓存就存在于主机的文件系统中。这允许每个 VM 拥有自己的 devpi-server 守护程序，它用作 virtualenv/pip 的 index-url。当 VM 被销毁并重新配置时，不必一遍又一遍地下载包。只要它们存在于主机的文件系统上，每个开发人员都会下载一次以构建本地缓存。

我们还为我们的私有包提供了一个内部 PyPi 索引，该索引目前只是一个由 Apache 提供服务的目录。最终，我还将把它转换为 devpi 代理服务器，这样我们的构建服务器除了托管我们的私有库之外，还将为我们的 Python 依赖项维护一个包缓存。这将在我们的开发环境、生产部署和公共 PyPi 之间创建一个额外的缓冲区。

这似乎是迄今为止我发现的针对这些要求的最强大的解决方案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T18:40:21.970

看看 David Wolever 的[pip2pi](https://github.com/wolever/pip2pi)。您可以设置一个 cron 作业来保留您需要的包的公司或团队范围的镜像，然后将您的点指向您的内部镜像。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-21T22:29:58.847

设置本地服务器，然后修改本地计算机的主机文件以覆盖实际 URL 以指向本地服务器，从而跳过标准 DNS。如果完成，则删除主机文件中的行。

或者我想你可以在 pip 中找到 URL 并对其进行修改。

# excel - Excel VBA求和函数

> ID：15556155
> 
> 赞同：0
> 
> 时间：2013-03-21T19:12:03.477
> 
> 标签：excel, sum, excel-formula, vba

我在vba中遇到了行数公式的问题。我正在使用下面的代码。当我检查它的值时，`Range("H3").Formula`它给了我正确的值`=SUM(C5:G5)`

但问题是它没有反映在excel单元格中。

```
Range("H3").Formula = "=SUM(" & Range(Cells(5, 3), Cells(5, 7)).Address(False, False) & ")" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:21:53.823

您需要完全限定单元格（注意点）。尝试这个

```
'~~> Replace this with the relevant sheet
With Sheets("Sheet1")
    .Range("H3").Formula = "=SUM(" & _
                          .Range(.Cells(5, 3), .Cells(5, 7)).Address(False, False) & _
                          ")"
End With 
```

# c++ - 更新类的字段后出现分段错误

> ID：15556163
> 
> 赞同：0
> 
> 时间：2013-03-21T19:13:01.323
> 
> 标签：c++, segmentation-fault

我在主函数中构建了一些类。因为它们是在局部变量中定义的，所以它们在主返回之后都被解构。但是，我注意到我想避免的奇怪事件。如果我更改其中一个类的内存布局（通过添加或更改字段），然后在链接之前仅重新编译修改后的类，我会得到分段错误或无效指针（取决于我对程序所做的更改） . 如果我也重新编译主文件，则没有错误。

我相当肯定会发生这种情况，因为当我在我的主文件中包含头文件时，它假定为每个类分配一定数量的内存，但是自从 main.o 编译后这个值已经改变，因此它是寻找在程序关闭时解构对象时不存在的内存。

虽然目前重新编译主文件不是问题，但我担心随着项目的增长，我会在其他文件中遇到这个问题，并且每次都重新编译它们以避免错误是不可取的。有没有一种简单的方法可以避免这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:16:32.610

某些类成员（例如构造函数和/或析构函数）被内联而有些没有被内联的可能性要大得多，并且每个集合将使用与对象指针不同的偏移量来查找特定成员。

考虑使用类似[`mkdep`](http://linuxcommand.org/man_pages/mkdep1.html)生成具有适当源到头依赖关系的 makefile 之类的东西，这样更改头会导致包括该头在内的所有文件被重新编译。

或者，您可以选择在类的源文件中保留*所有*类成员定义（包括构造函数、复制构造函数和赋值运算符——在这种情况下不应自动生成任何内容），从而有效地禁止内联。在大多数情况下，这应该足以防止这个问题，但它会带来（轻微的）性能成本。（如果您将数据成员添加到类中，这将无济于事 - 从而增加对象的大小 - 除非您另外使用[pimpl idiom](http://c2.com/cgi/wiki?PimplIdiom)，它为所有数据成员访问添加了一个间接级别。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:16:40.887

不可以。如果你的类的布局发生变化，你需要重新编译任何使用该类的单元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:51:26.477

在阅读了 cdhowie 的回答后，我开始研究 mkdep，但似乎此类程序已被弃用，并且已被执行相同操作的编译器标志所取代。我已经包含了我的 makefile 的主体，它编译了主程序（srcpath 中的代码）和测试（testpath 中的代码）然后运行测试。在此期间创建了两个单独的依赖文件，一个用于 main，另一个用于测试。

```
src = $(shell cd $(srcpath); find ./ -name "*.cpp")
testsrc = $(shell cd $(testpath); find ./ -name "*.cpp")
obj = $(src:%.cpp=%.o)
testobj = $(testsrc:%.cpp=%.o)
head = $(shell cd $(srcpath); find ./ -name "*.h")
testhead = $(shell cd $(testpath); find ./ -name "*.h")
skip_files = ./main.o

makedep = $(shell $(cpp) $(cflags) -MM -MT '$(patsubst $(srcpath)%.cpp, $(objpath)%.o, $(file))' $(file) >> .depend)
makedeptest = $(shell $(cpp) $(cflags) -MM -MT '$(patsubst $(testpath)%.cpp, $(testobjpath)%.o, $(file))' $(file) >> .dependtest)

all: main Test

Test: .dependtest $(addprefix $(testobjpath),$(testobj))
    @echo "Linking Tests"
    @$(cpp) $(lflags) -o $(testbin) $(addprefix $(testobjpath), $(testobj)) $(addprefix $(objpath), $(filter-out $(skip_files),$(obj)))
    @./$(testbin)

.dependtest: $(addprefix $(testpath), $(testsrc)) $(addprefix $(testpath), $(testhead))
    $(shell rm -f .dependtest)
    $(foreach file,$(addprefix $(testpath), $(testsrc)), $(makedeptest))

$(addprefix $(testobjpath), %.o): $(addprefix $(testpath), %.cpp)
    $(cpp) $(cflags) -c -o $@ $<

main: .depend $(addprefix $(objpath), $(obj))
    @echo "Linking Program"
    @$(cpp) $(lflags) -o $(bin) $(addprefix $(objpath),$(obj))

.depend: $(addprefix $(srcpath), $(src)) $(addprefix $(srcpath), $(head))
    $(shell rm -f .depend)
    $(foreach file, $(addprefix $(srcpath), $(src)), $(makedep))

$(addprefix $(objpath), %.o): $(addprefix $(srcpath), %.cpp)
    $(cpp) $(cflags) -c -o $@ $<

clean:
    -rm $(testbin) $(bin) $(addprefix $(objpath),$(obj)) $(addprefix $(testobjpath),$(testobj))

-include .depend
-include .dependtest 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-21T19:15:57.647

使用 IDE 而不是在命令行编译。

# c++ - 计算系数为抽象类 Number 的多项式

> ID：15556164
> 
> 赞同：0
> 
> 时间：2013-03-21T19:13:09.637
> 
> 标签：c++, polymorphism

我正在努力添加代表适当数学对象的类 Natural、Rational、Complex 的操作。我需要它来计算 x 中的多项式。

所有类都继承抽象类 Number。将所有系数都放在一个数字数组中，我想计算多项式。为此，我需要乘以双倍（x 是双倍）的操作。x 被转化为有理数并相乘。这工作正常。我的问题是如何添加抽象类型 Number 的类？

我不能让它工作。我所得到的只是 Number::add(Number) 中的永无止境的递归（它调用自己而不是调用其他类型的 Natural、Rational、Complex 方法）。

#include #include #include #include #include #include #include using namespace std;

```
class Natural;class Rational;class Complex;

class Number {
public:
  virtual string toString() const = 0;
  virtual Number *operator*(const Rational) const = 0;
  virtual Number *add(const Natural*) const = 0;
  virtual Number *add(const Rational*) const = 0;
  virtual Number *add(const Complex*) const = 0;
  virtual Number *add(const Number *n) const {
    n->add(this);
  }
};

class Natural : public Number {
  friend class Complex;
  int n;
public:
  Natural(const Natural &s) {
    n = s.n;
  }
  Natural(int number) : n(number) {}
  string toString() const {
    stringstream ss;
    ss << n;
    return ss.str();
  }
  operator Rational() const;
  operator Complex() const;
  operator int() const {
    return n;
  }
  Number *operator*(const Rational r) const;
  Number *add(const Natural* number) const {
    return new Natural(n + number->n);
  }
  Number *add(const Rational*) const;
  Number *add(const Complex*) const;
};

class Rational : public Number {
  friend class Natural;
  int numerator, denominator;
  void divideByGCD() {
    int a = numerator, b = denominator;
    //cout << a << ' ' << b << ' ';
    if(a < b) {
      int temp = a;
      a = b;
      b = temp;
    }
    while (b > 0) {
      int r = a % b;
      a = b; b = r;
      //cout << r << endl;
    }
    numerator /= a;
    denominator /= a;
    //cout << a << endl;
  }
public:
  Rational() {}
  Rational(const Rational &s) {
    numerator = s.numerator;
    denominator = s.denominator;
  }
  Rational(int n, int d) {
    if(d == 0) throw new runtime_error("denominator equals 0");
    if(d < 0) {
      numerator = -n;
      denominator = -d;
    } else {
      numerator = n;
      denominator = d;
    }
    divideByGCD();
  }
  Rational(double d) {
    int i = 0, mul = 1;
    int r = d-floor(d);;
    while(r!=0) {
      i++; mul *= 10;
      r = 10*r-floor(10*r);
    }
    numerator = (int)mul*d;
    denominator = mul;
    divideByGCD();
  }
  string toString() const {
    stringstream ss;
    ss << numerator;
    if(denominator > 1) ss << '/' << denominator;
    return ss.str();
  }
  operator const Complex() const;
  operator const double() const {
    return (double)numerator/denominator;
  }
  Number *operator*(const Rational r) const {
    return new Rational(numerator*r.numerator, denominator*r.denominator);
  }
  Number *add(const Rational* r) const {
    return new Rational(numerator*r->denominator+r->numerator*denominator, denominator*r->denominator);
  }
  Number *add(const Natural*) const;
  Number *add(const Complex*) const;
};

class Complex : public Number {
  friend class Rational;
  double real, imaginary;
  static const double radius = 10;
public:
  Complex() {}
  Complex(const Complex &s) {
    real = s.real;
    imaginary = s.imaginary;
  }
  Complex(const double r, const double im) : real(r), imaginary(im) {}
  string toString() const {
    stringstream ss;
    ss << real;
    if(imaginary != 0) ss << '+' << imaginary << 'i';
    return ss.str();
  }
  Number *operator*(const Rational r) const;
  Number *add(const Complex* c) const {
    return new Complex(real + c->real, imaginary + c->imaginary);
  }
  Number *add(const Natural*) const;
  Number *add(const Rational*) const;
};

Natural::operator Rational() const {
  return Rational(n,1);
}
Natural::operator Complex() const {
  return Complex(n, 0);
}
Rational::operator const Complex() const {
  return Complex((double)numerator/denominator, 0);
}

Number *Natural::operator*(const Rational r) const {
  return new Rational(n*r.numerator, r.denominator);
}
Number *Complex::operator*(const Rational r) const {
  return new Complex(real*(double)r, imaginary*(double)r);
}

Number *Natural::add(const Rational *r) const {
  if(r->denominator == 1) return new Natural(n+r->numerator);
  else return new Rational(n*r->denominator,r->denominator);
}

Number *Natural::add(const Complex *c) const {
  return c->add(this);
}

Number *Rational::add(const Natural *n) const {
  return n->add(this);
}

Number *Rational::add(const Complex *c) const {
  return new Complex(c->real+(double)*this, c->imaginary);
}

Number *Complex::add(const Natural *number) const {
  return new Complex(real+number->n, imaginary);
}

Number *Complex::add(const Rational *r) const {
  return r->add(this);
}

Number *poly(double x, Number *a[], unsigned int size) {
  if(size == 1) return a[0];
  else return a[0]->add((*poly(x, a+1, size-1))*Rational(x));
}

int main() {
  cout << (Natural(5)*(Rational)2.0)->toString() << endl;

  Number *coefs[] = {new Natural(5), new Natural(6)};
  cout <<  poly(2, coefs, 2) << endl;
} 
```

我应该如何修复 Number::add(Number) 以便在对 Number 程序本身类型的对象调用 add 时确定要选择哪个虚拟方法 add？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:46:04.980

我认为问题是：

```
virtual Number *add(const Number *n) const {
   n->add(this);
} 
```

如果将 Rational 与存储在 Number * 中的 Natural 相乘，它不能将 Number * 多态向上转换为 Natural *。我同意 w/g-makulik，因为引用/值在这里更有意义，因为您到处都在泄漏内存。删除对数字 + 数字的支持。另外，如果我将 Natural 和 Rational 加在一起，我会得到一个 Number *，但它是什么类型的数字？我认为架构需要更多的思考。我可能会完全摆脱基类的纯虚方法（toString 除外）。例如：

```
class Number
{
    public:
        virtual string toString() = 0;
};

class Rational : public Number
{
    string toString() {...}
    // forget 'add', use operators
    Rational operator+(const Rational & _rhs) const {Rational ret; ...; return ret;}
    Rational & operator+=(const Rational & _rhs) const {...; return *this;}
    ...
} 
```

**编辑** 为了快速修复，我认为您只需要摆脱`virtual Number *operator*(const Rational) const = 0;`，并将其替换为每个子类的版本（例如，`Rational * operator*(const Natural) const`）

或者，将枚举成员变量添加到 Number 以跟踪类型：

```
enum Type { NATURAL, RATIONAL, ...}

Type mType; 
```

或使用 RTTI，这样您就可以在 Number::add 中选择性地选择正确的添加方法：

```
Number * add(Number * _rhs)
{
   if(_rhs->mType == RATIONAL)
      return this->add((Rational *)_rhs);
   ...
} 
```

它看起来有点草率，但它会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:59:15.790

这称为多分派。这里有一些链接可以查看

[Multiple_dispatch](http://en.wikipedia.org/wiki/Multiple_dispatch)

[最佳多方法实现](http://objectmix.com/compilers/747044-best-multimethods-multiple-dispatch-implementations.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:22:18.343

看起来[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)是我一直在寻找的。我想让函数在同一个类中接受和访问。我相信我的错误是给他们起相同的名字。

# java - Android：以编程方式仅设置文本视图的一个填充

> ID：15556168
> 
> 赞同：43
> 
> 时间：2013-03-21T19:13:36.850
> 
> 标签：java, android, android-layout, padding, textview

我想以编程方式设置 textview 的顶部填充。我知道你可以用方法做到这一点`setPadding()`。但是问题是这个方法需要4个参数：left、top、right、bottom。我不想改变左右和底部，我只想改变顶部填充。

那可能吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-21T19:16:49.300

利用

```
 yourTextView.setPadding(0, 10, 0, 0); 
```

仅调整您需要的参数并将其他参数设置为零。

如果您需要保留其他现有填充，请使用`yourView.getPaddingLeft()`，`yourView.getPaddingTop()`等等。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-10-29T11:49:38.850

我通常创建一个简单的实用方法只是为了不忘记或放错其他填充：

```
public static void setPaddingLeft(View v, int leftPaddingDp) {
    int leftPaddingPx = dpToPx(leftPaddingDp);
    v.setPadding(leftPaddingPx, v.getPaddingTop(), v.getPaddingRight(), v.getPaddingBottom());
} 
```

稍后像这样使用，提供 dp 单位，就像在 xmls 中一样：

```
Utils.setPaddingLeft(myExampleTextView, 10) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-30T03:49:23.857

## Kotlin 扩展解决方案

您可以为每个特定面添加这样的扩展变量。

```
inline var View.topPadding: Int
    get() = paddingTop
    set(@Px value) = setPadding(paddingLeft, value, paddingRight, paddingBottom)

// Then call
myView.topPadding = 10 // px 
```

如果要使用`dp`而不是`px`，请添加如下内容：

```
inline var View.rightPaddingDp: Float
    get() = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, paddingRight.toFloat(), resources.displayMetrics) 
    set(value) {
        val rightPx = resources.displayMetrics.density * value
        setPadding(paddingLeft, paddingTop, rightPx.toInt(), paddingBottom)
    }

myView.rightPaddingDp = 10 // dp 
```

要处理`horizontal`or `vertical`，请执行以下操作。请注意，getter 结果没有意义，因此您可以禁用它。

```
inline var View.horizontalPadding: Int
    get() = throw UnsupportedOperationException("No getter for property")
    set(@Px value) = setPadding(value, paddingTop, value, paddingBottom) 
```

要使用`start`或`end`正确处理 RTL 语言，您需要添加以下内容：

```
inline val View.isLtr get() = SDK_INT < 17 || layoutDirection == View.LAYOUT_DIRECTION_LTR

inline var View.startPadding: Int
    get() = if (isLtr) paddingLeft else paddingRight
    set(@Px value) {
        val left = if (isLtr) value else paddingLeft
        val right = if (isLtr) paddingRight else value
        setPadding(left, paddingTop, right, paddingBottom)
    } 
```

**奖励**：制作一个需要`res`. IE`topPaddingRes`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-14T22:24:23.490

你也可以使用这个

```
setPadding(view, 500, Padding.TOP); 
```

**在@IntDef**定义的帮助下：

```
public static void setPadding(View view, int padding, @Padding.Direction int direction) {
    switch (direction) {
        case Padding.LEFT:
            view.setPadding(padding, view.getPaddingTop(), view.getPaddingRight(), view.getPaddingBottom());
            return;
        case Padding.RIGHT:
            view.setPadding(view.getPaddingLeft(), view.getPaddingTop(), padding, view.getPaddingBottom());
            return;
        case Padding.TOP:
            view.setPadding(view.getPaddingLeft(), padding, view.getPaddingRight(), view.getPaddingBottom());
            return;
        case Padding.BOTTOM:
            view.setPadding(view.getPaddingLeft(), view.getPaddingTop(), view.getPaddingRight(), padding);
            return;
        default:
    }
}

public static class Padding {
    @IntDef({Padding.LEFT, Padding.RIGHT, Padding.TOP, Padding.BOTTOM})
    @Retention(RetentionPolicy.SOURCE)
    public @interface Direction {}
    public static final int LEFT = 0;
    public static final int RIGHT = 1;
    public static final int TOP = 2;
    public static final int BOTTOM = 3;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-09T04:07:20.897

下面的代码工作正常。

```
float scale = getResources().getDisplayMetrics().density;
int dpAsPixels = (int) (sizeInDp*scale + 0.5f); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-09T11:58:55.053

一个 kotlin 视图扩展，用于为任何视图类型一次性将任何边缘组合设置为相同的值：

```
enum class Edge{
    TOP,
    LEFT,
    BOTTOM,
    RIGHT
}
fun View.padding(edges:Set<Edge>, value:Int){
    var top    = paddingTop
    var left   = paddingLeft
    var bottom = paddingBottom
    var right  = paddingRight
    for(edge in edges){
        when(edge){
            Edge.TOP    -> top    = value
            Edge.LEFT   -> left   = value
            Edge.BOTTOM -> bottom = value
            Edge.RIGHT  -> right  = value
        }
    }
    setPadding(left, top, right, bottom)
} 
```

例子：

```
someView.padding(setOf(Edge.RIGHT, Edge.LEFT), 50) 
```

# r - 如何在R中将矩阵绘制为散点图？

> ID：15556174
> 
> 赞同：1
> 
> 时间：2013-03-21T19:13:50.597
> 
> 标签：r, plot

我有一个 1440 列*720 行的二进制文件。我将它作为矩阵读入 R 以便将其绘制为散点图，但我想知道为什么生成的图有些奇怪（我没有足够的代表来上传图）。

```
conner <- file("D:\\complete.bin","rb")
corrs <- readBin(conner, numeric(), size=4,  n=1440*720, signed=TRUE)
y1 <- t(matrix((data=corrs), ncol=720, nrow=1440))
plot(y1) 
```

所以我想将矩阵转换为：

```
(5,4,5,2,1,6,9,8,......................................)all values 
```

并将它们绘制为散点图。

那么我们如何将矩阵绘制为散点图而不是图像呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T19:54:16.980

所以你想绘制矩阵中的所有值。你可以这样做：

```
y<-matrix(rnorm(25),5,5)
y
           [,1]       [,2]      [,3]       [,4]       [,5]
[1,]  1.8185601  0.6745425 0.5584071 -1.0631574 -0.6729403
[2,] -0.5075942  1.8931653 0.9951502 -1.0469745  0.3087902
[3,] -0.8855172 -0.5571970 0.8180533 -1.6210277  1.0537248
[4,]  0.2876082  0.1775348 1.2246795  0.7912057 -1.3986548
[5,] -0.2157624 -0.4067569 1.0355421 -0.7114979 -0.2311551

plot(c(y)) 
```

但在你的情况下，你已经有一个向量`corrs`，所以只需使用`plot(corrs)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T19:19:52.343

我假设 corrs 是您预先计算的散点图的图像。

尝试

```
image(matrix((data=corrs), ncol=720, nrow=1440)) 
```

或者

```
library(fields)
image.plot(matrix((data=corrs), ncol=720, nrow=1440)) 
```

# c# - 从 C# 中的串口读取字符

> ID：15556177
> 
> 赞同：3
> 
> 时间：2013-03-21T19:14:02.913
> 
> 标签：c#, serial-port

您好，我正在使用 Read() 方法从串口读取 10 个字符，例如 0123456789。实际上，字符是由 PIC 微控制器发送的。

这是我的代码：

```
serialPort1.PortName = "com4";
serialPort1.BaudRate = 9600;
serialPort1.Open();
char[] result = new char[10];
serialPort1.Read(result, 0, result.Length);
string s = new string(result);
MessageBox.Show(s);
serialPort1.Close(); 
```

当我运行代码时，会出现一个消息框并且只显示第一个字符。消息框中仅显示“0”。

我哪里出错了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:14:32.947

你做错的是没有注意 Read() 的返回值。它告诉您读取了多少字节。

串行端口是非常慢的设备，在典型的 9600 波特率设置下，传输一个字节需要一毫秒。对于现代处理器来说，这是一个巨大的时间，它可以轻松地在一毫秒内执行数百万条指令。Read() 方法会在*某些*字节可用时立即返回，如果您人为地让程序变慢，那么您只能获得全部 10 个字节，以便驱动程序有足够的时间来接收所有这些字节。

一个简单的解决方法是继续调用 Read() 直到你得到它们：

```
char[] result = new char[10];
for (int len = 0; len < result.Length; ) {
   len += serialPort1.Read(result, len, result.Length - len);
} 
```

另一种常见的解决方案是发送一个唯一字符来指示数据的结束。换行 ('\n') 是一个很好的选择。现在它变得简单多了：

```
string result = serialPort.ReadLine(); 
```

现在还支持任意响应长度。只需确保数据不包含换行符。

# python - sqlite3.Connection 类继承，提交不起作用

> ID：15556181
> 
> 赞同：0
> 
> 时间：2013-03-21T19:14:31.860
> 
> 标签：python, database, inheritance, sqlite

这是我第一次通过类继承使用 sqlite3，我遇到了一个问题，我没有得到回溯错误，但我执行的查询不会提交。我简化了我的代码

```
import sqlite3 as lite

class BaseModel(lite.Connection):
    def __init__(self, **args):
        lite.Connection.__init__(self, **args)  
        self.cur = self.cursor()

    def execute(self, query):
        self.cur.execute(query)

class Model(BaseModel):
    def __init__(self, **args):
        BaseModel.__init__(self, **args)

    def _new_(self):
        queries = []        
        queries.append(' '.join(['CREATE TABLE IF NOT EXISTS tb1',
                         '(id INTEGER PRIMARY KEY,',
                         'column1 TEXT,', 
                         'column2 INT)']))

        for q in queries:
            self.execute(q) # execute the queries

        self.commit()   # write changes to db   

    def tables(self):
        query = 'SELECT name FROM sqlite_master WHERE type="table" ORDER BY name' 
        results = self.execute(query) 
        return results#.fetchall()

if __name__ == '__main__':
    model = Model(database='test.db')
    model._new_()

    # Test Fails because the queries aren't being saved in the db
    # see Model.__new__ for details

    tables = model.tables() # get all tables

    print 'Tables Created:'

    if tables:
        for t in model.tables(): 
            print '\t%s' % str(t[0])
    else: print tables 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:19:01.467

您需要*致电* `self.commit()`：

```
self.commit() # write changes to db 
```

如果没有，`()`您只是*引用*该方法，而不是调用它。

接下来，您的`execute()`函数不返回任何内容：

```
def execute(self, query):
    return self.cur.execute(query) 
```

# vb.net - 调用匿名方法

> ID：15556182
> 
> 赞同：2
> 
> 时间：2013-03-21T19:14:38.517
> 
> 标签：vb.net

第 4 行和第 5 行之间有什么区别吗？

为什么 VB.net 不能处理第 3 行？

调用函数的正确方法是什么？

```
Dim aFunc As New Tuple(Of Func(Of String))(Function() "Hello World")
Dim s As String
s = aFunc.Item1() 'does not compile
s = (aFunc.Item1)()
s = aFunc.Item1.Invoke() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:02:53.300

对我来说，这看起来像是一个编译器错误，括号*应该*明确地使它成为一个方法调用。很难说这是一个事实，然而，在 vb.net 中括号**严重**超载意味着很多事情。显然是元组使编译器出错，没有它它也能正常工作。这出现在本周与 Eric Lippert 的 StackExchange 播客中，顺便说一句，您可能想听听它以获取它可能意味着的事情的洗衣清单。

您可以将此发布到 connect.microsoft.com 以获得语言设计者的意见。这种行为肯定不够直观，足以称其为错误。您找到的解决方法很好。两者都生成*完全相同的*代码并且不增加任何开销，您可以通过在程序集上运行 ildasm.exe 看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:45:18.150

`aFunc.Item1`是一个函数，所以你不能将它分配给一个字符串。你似乎想要：

```
Dim aFunc As New Tuple(Of Func(Of String))(Function() "Hello World")
Dim s As String
Dim f As Func(Of String) = aFunc.Item1
s = f.Invoke() 
```

编辑： `s = aFunc.Item1()`访问属性`Item1`。要调用该属性所引用的函数，您可以使用`s = aFunc.Item1()()`，这相当于您的第 4 行。猜测，属性访问比函数调用强（如果这些是正确的术语）。

# javascript - 将变量注入函数的作用域

> ID：15556186
> 
> 赞同：5
> 
> 时间：2013-03-21T19:14:48.620
> 
> 标签：javascript, node.js

所以，我想做这样的事情：

```
 var a = 'a';

    var dummy = function() {

        // Print out var 'a', from the scope above
        console.log('Dummy a: ' + a);

        // Print out 'b', from the 'compelled' scope
        console.log('Dummy b: ' + b);
    }

    (function() {

        var b = 'otherscope';

        // I know apply won't work, I also don't want to merge scopes
        dummy.apply(this);

        // I want something like this:
        dummy.compel(this, [], {b: 'injected!'});

    })(); 
```

但这行不通。

我实际上并不希望函数能够达到 2 个作用域，我希望能够从外部设置虚拟函数内部使用的“b”变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T19:17:27.273

您可以`b`为函数或全局变量创建参数。

```
var a = 'a';
var dummy = function(b) {
   ...
} 
```

或者

```
var a = 'a';
var b;
var dummy = function() {
   ...
} 
```

第一个允许您选择虚拟函数何时可以访问变量，第二个允许您在任何地方访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-24T11:55:04.780

所以，我找到了一种更快的方法来做这样的事情：

```
var C = function(ctx, funcBody){
        var newBody = [];

        for(var k in ctx){
            var i =  "var "+k + " = ctx['"+k+"'];";
            newBody.push(i);
        }
        var res = "return function(t){ " +funcBody+ " }";
        newBody.push(res);
        var F = new Function("ctx", newBody.join('\n'));
        return F(ctx);
}
var newFunction = C({"foo":10, "bar":100}, "return foo+bar*t")
newFunction(50); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-12T14:43:20.727

用这个：

```
Function.prototype.applyVars = function(scope, params, scope_variables) {
  if (scope_variables) {
    var variable, defVars = [];
    for (variable in scope_variables) {
      if (scope_variables.hasOwnProperty(variable)) {
        defVars.push(variable + '=scope_variables["' + variable + '"]');
      }
    }
    eval('var ' + defVars.join(',') + ';');
    return eval('(' + this + ').apply(scope, params);');
  }
  return this.apply(scope, params);
}

// Example

function foo(p1) {
  document.write('Variable [p1]: ', p1);
  document.write('<br />');
  document.write('Variable [x]: ', x);
  document.write('<br />');
  document.write('Variable [y]: ', y);
}

foo.applyVars(this, ['param X'], { x: "1'2\"3", y: false });
```

或这个：

```
function callWithVars(fn, scope, params, scope_variables) {
  if (scope_variables) {
    var variable, defVars = [];
    for (variable in scope_variables) {
      if (scope_variables.hasOwnProperty(variable)) {
        defVars.push(variable + '=scope_variables["' + variable + '"]');
      }
    }
    eval('var ' + defVars.join(',') + ';');
    return eval('(' + fn + ').apply(scope, params);');
  }
  return fn.apply(scope, params);
}

// Example

function foo(p1) {
  document.write('Variable [p1]: ', p1);
  document.write('<br />');
  document.write('Variable [x]: ', x);
  document.write('<br />');
  document.write('Variable [y]: ', y);
}

callWithVars(foo, this, ['param X'], { x: "1'2\"3", y: false });
```

# cassandra - Cassandra 上不一致数据的数据模型

> ID：15556190
> 
> 赞同：1
> 
> 时间：2013-03-21T19:14:55.730
> 
> 标签：cassandra

我对 NoSQL 和 Cassandra 还很陌生，但我的架构委员会告诉我要使用它。我只是想了解如何将 RDBMS 模型转换为 noSQL。

我有一个数据库，用户需要将数据从 excel 或 csv 文件导入数据库。该文件可能每次都有不同的列。

例如，在 excel 文件中的数据可能如下所示：

```
Name| AName| Industry| Interest | Pint |Start Date | End date

x | 111-121 | IT | 2 | 1/1/2011 | 1/2/2011

x | 111-122 | hotel | 1 | "" | ""

y| 111-1000 | IT | 2 | 1/1/2011 | 1/2/2011 
```

在我们上传这个之后，下一个 excel 文件可能看起来

```
Name| AName| Industry| Interest | Pint |Start Date | isTrue | isNegative

x | 111-121 | IT | 2 | 1/1/2011 | 1/2/2011 | yes | no

x | 111-122 | hotel | 1 | "" | no | no

y| 111-1000 |health | 2 | 1/1/2010 | yes|"" 
```

我不会提前知道导入数据时要创建哪些列。当我不知道表结构时，我完全对 noSQL 感到困惑，并且无法理解如何处理如何导入数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:26:12.790

查看一些 noSQL 模式，我强烈建议阅读 Pat Helland 的“Building on Quicksand”

一些好的模式（使用或不使用 PlayOrm）... [http://buffalosw.com/wiki/Patterns-Page/](http://buffalosw.com/wiki/Patterns-Page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:57:05.517

从列族（cassandra 表示“表”）由行组成的基本事实开始。每行都有一个行键和一些键/值对（称为列）。对于一行中的特定列，该列的名称是该对的键，该列的值是该对的值。仅仅因为您在一行中有一个具有某个名称的列并不一定意味着您将在任何其他行中有一个具有该名称的列。

在内部，行键、列名和列值存储为字节数组，您需要使用序列化程序将程序数据转换为字节数组，然后再转换回来。

如何定义行键、列名和列值取决于您。

一种方法是让 CF 中的一行与 Excel 中的一行相对应。您必须确定将提供唯一 ID 的一个 Excel 列并将其存储在行键中。剩余的 Excel 列可以一对一地存储在 cassandra 列中。这使您在大多数列名上都非常灵活，但您必须在某处拥有唯一的键值。唯一密钥要求将始终适用于您使用的任何存储方案。

还有其他存储方案，但它们都归结为您在 Excel 中定义行键是什么以及如何将 Excel 数据分解为键/值对。

# gnu-screen - 从内部屏幕分离。^a，广告不起作用

> ID：15556191
> 
> 赞同：0
> 
> 时间：2013-03-21T19:14:56.323
> 
> 标签：gnu-screen, detach

首先，我希望这是这个问题的正确位置。我有一个奇怪的屏幕分离问题。我可以从我创建的大多数屏幕中分离出来，除了我用来托管我的世界服务器的屏幕。

当我点击控制 AD 时，我得到的只是另一个“>”符号。

如果我点击控制 D，我会得到同样的结果。

我正在做与其他屏幕相同的操作，这可能会有所不同吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-07-31T19:43:08.630

好的，这是 watcha 想要做的。当您登录到您的 unix 系统时，您会被发送到主屏幕。（您首先看到的屏幕）您要做的是输入“屏幕”。这将使您成为一个新的屏幕会话。现在在这个新的屏幕会话中，启动您的服务器。一旦启动，您现在可以 CTRL+AD 退出它，它会将您带到主屏幕。我有同样的问题。您需要至少有 2 个屏幕才能执行 CTRL+A D。

# c# - C#将表对象添加到实体并保存更改不起作用

> ID：15556192
> 
> 赞同：1
> 
> 时间：2013-03-21T19:14:59.110
> 
> 标签：c#, entity-framework

我正在学习 ADO.Net 实体框架，并且一直在将实体表对象添加到数据库中。

我在解决方案中有一个名为 testDB 的本地数据库。它有两列 - id(primary, unique, identiy),name(varchar(100)) 和它的实体。主要应用程序代码如下。问题是，使用此代码不会向表中添加任何内容，但我也没有任何错误。会出什么问题？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace entityproject
{
class Program
{
    static void Main(string[] args)
    {
        String someString;
        someString = "Just a test";

        testDBEntities tdbEntity = new testDBEntities();
        test tblTest = new test();

        tblTest.name = someString;
        tdbEntity.test.Add(tblTest);
        tdbEntity.SaveChanges();
    }
 }
} 
```

App.config 在这里 [http://pastie.org/6980938](http://pastie.org/6980938)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:30:16.770

我想我知道问题所在——上次我尝试使用 SQL CE 时也遇到了同样的问题。

连接字符串不指向您创建的 sdf 文件 - 它使用一个新的文件，我相信该文件与您的 EXE 和 DLL 一起放入您的`bin\Debug`or`bin\Release`目录（在您的配置文件中）。`data source=|DataDirectory|\testDB.sdf`如果您检查该目录，我敢打赌您会在那里找到另一个 sdf 文件，其中添加了一堆记录。

如果要使用已创建的 sdf，请将连接字符串更改为专门指向该文件。

# android - Android 2.1（API 级别 7）和 AdMob Sdk 6.3.1

> ID：15556193
> 
> 赞同：0
> 
> 时间：2013-03-21T19:15:06.020
> 
> 标签：android, sdk, admob

我试图用 Admob Sdk 6.3.1 编译一个 Android 应用程序 API 级别 7，但我得到一个与

```
"android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize">" 
```

我用谷歌搜索并了解到我必须针对 Android 3.2 进行编译并将 SDK Min 设置为 13。但是这样我的应用程序将与 Android 2.1 不兼容，对吗？有什么解决方法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:19:32.950

不，您可以针对更高级别进行编译，但仍支持较低的 SDK 级别。根据[Admob 文档](https://developers.google.com/mobile-ads-sdk/docs/)：

> 适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本的运行时（`android:minSdkVersion`在您的 AndroidManifest.xml 中至少设置为 3）。这意味着您可以使用最新版本的 Android SDK 进行开发，并且您的应用仍将在较早的 Android 版本（最低 1.5）上运行。

# html - Firefox 上的 HTML5 视频播放器

> ID：15556195
> 
> 赞同：0
> 
> 时间：2013-03-21T19:15:09.567
> 
> 标签：html, firefox, video

我有一个 HTML5 视频播放器，非常简单。

```
<video width="470" height="265" preload="none" controls="controls" id="video_player" poster="assets/posters/finished_jk.jpg">   
        <source type="video/webm" src="assets/videos/finished_jk.webm"></source>    
        <source type="video/ogg" src="assets/videos/finished_jk.ogv"></source>      
        <source type="video/mp4" src="assets/videos/finished_jk.mp4"></source>
        Your browser doesn't support videos
</video> 
```

我对 Firefox 有疑问。当我点击播放按钮时，它会直接到视频的结尾。

它适用于 Chrome、Safari 和 Opera。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:13:11.117

问题来自我使用的编码器软件。

我使用“Miro Video Converter”将我的 mp4 视频转换为 webm 格式。我尝试了另一个，它工作正常。

# php - 'where 子句' ZF1 中的未知列 'Array'

> ID：15556198
> 
> 赞同：0
> 
> 时间：2013-03-21T19:15:16.003
> 
> 标签：php, zend-framework

我正在尝试在 zend 框架中进行登录，但 PDO 给了我一个错误。我有以下功能：

```
public function isCorrectLogin (Application_Model_User $user){

    $row = $this->_db_table->fetchRow(
                $this->_db_table
                     ->select()
                     ->where( array ('email = ?' => $user->email,
                                     'password = ?' => sha1(SALT.$user->password)))
                           );

    if(empty($row)){
        return false;
    }
    return true;                
} 
```

在我的控制器中，我使用此功能：

```
$oUserActions = new Application_Model_UserMapper();

            $user = new Application_Model_User();
            $user->email = $_REQUEST['email'];          
            $user->password = $_REQUEST['password'];

            if($oUserActions->isCorrectLogin($user)){                   
                echo 'validated';                   
            } 
```

我收到此错误：

```
Message: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Array' in 'where clause'

Stack trace:

#0 C:\webserver\htdocs\photo\library\Zend\Db\Statement.php(303): Zend_Db_Statement_Pdo->_execute(Array)
#1 C:\webserver\htdocs\photo\library\Zend\Db\Adapter\Abstract.php(480): Zend_Db_Statement->execute(Array)
#2 C:\webserver\htdocs\photo\library\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query(Object(Zend_Db_Table_Select), Array)
#3 C:\webserver\htdocs\photo\library\Zend\Db\Table\Abstract.php(1575): Zend_Db_Adapter_Pdo_Abstract->query(Object(Zend_Db_Table_Select))
#4 C:\webserver\htdocs\photo\library\Zend\Db\Table\Abstract.php(1437): Zend_Db_Table_Abstract->_fetch(Object(Zend_Db_Table_Select))
#5 C:\webserver\htdocs\photo\application\models\UserMapper.php(49): Zend_Db_Table_Abstract->fetchRow(Object(Zend_Db_Table_Select))
#6 C:\webserver\htdocs\photo\application\controllers\LoginController.php(31): Application_Model_UserMapper->getUserLogin(Object(Application_Model_User)) 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:34:11.173

试试这个。为什么要使用数组。

```
$select->where(
        $db->quoteInto('email = ?', => $user->email) . ' AND ' . $db->quoteInto('password = ?', sha1(SALT.$user->password))
    );
    // $db is your instance of Zend_Db_Adapter_*
    // You can get it from a Zend_Db_Table_Abstract 
    //subclass by calling its getAdapter() method 
```

# perl - 强制本地安装的模块使用本地安装的依赖项

> ID：15556201
> 
> 赞同：2
> 
> 时间：2013-03-21T19:15:27.753
> 
> 标签：perl, dependencies, perl-module, cpan, dependency-management

我正在开发一个项目，该项目需要将所有第三方（阅读：CPAN）perl 模块安装在 perforce 存储库中，以便任何依赖于它们的代码都可以成功运行，而无需其他任何人手动安装它们。我使用 cpanminus 安装我的 CPAN 模块，所以我`cpanm -L . Moose`在所需的目录中运行，并且一切都安装成功。但是，当我尝试编译使用 Moose 制作的模块时，有时会出现以下错误：

```
Undefined subroutine &Carp::longmess_heavy called at /usr/lib/perl5/5.8.8/Carp.pm line 235. 
```

看起来，即使 Carp 使用 Moose 安装到我的本地目录中，它也使用`/user/lib/perl5/5.8.8`. 我可以在我的机器上升级 Carp，但是一旦我将我的代码检查到存储库中，其他所有拥有过时 Carp 的人都会遇到同样的问题。那么我如何强制 Moose 使用本地安装的 Carp，而不是 in 中的那个`/usr/lib/perl5/5.8.8`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:20:27.763

你不强迫 Moose，你强迫`perl`。您已将模块安装在一个`perl`不知道的位置，因此您需要告知`perl`它。

由于您想影响所有脚本，因此您需要放置在登录脚本中。

```
export PERL5LIB=/home/.../lib 
```

如果您只想影响那个程序，您可以使用以下命令启动该程序：

```
PERL5LIB=/home/.../lib script 
```

或者您将以下内容添加到您的脚本中：

```
use lib '/home/.../lib'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:54:31.097

I managed to find a solution. It's messy, but that's the price I have to pay for joining a project that already has a messy system in place.

Before including Moose, I have to explicitly required the new Carp:

```
require "[path to Carp]/Carp.pm"; 
```

This generated a lot of warnings about redefining subroutines, so I had to (temporarily) suppress them:

```
my $restore_warn = $SIG{'__WARN__'};
$SIG{'__WARN__'} = sub {};
require "[path to Carp]/Carp.pm";
$SIG{'__WARN__'} = $restore_warn; 
```

# c# - HitTestResultCallback 找不到 UserControl

> ID：15556202
> 
> 赞同：0
> 
> 时间：2013-03-21T19:15:28.187
> 
> 标签：c#, wpf

我在尝试通过 HitTestResultCallback 访问 UserControl 时遇到了一些麻烦，我可以在我的 UserControl 中找到所有控件，但我想做的是访问 UserControl 类，这是我的代码：

```
 public void DragStartInteraction()
    {
        VisualTreeHelper.HitTest(Application.Current.MainWindow, null, new HitTestResultCallback(myCallbackDragStartEvent), new PointHitTestParameters(_currentPoint));

        ...
    }

    private HitTestResultBehavior myCallbackDragStartEvent(HitTestResult result)
    {
        ...

        UserControl el = result.VisualHit as UserControl;

        ...

        return HitTestResultBehavior.Continue;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:59:02.867

`HitTestResultCallback`只会为视觉树中实际具有渲染内容的视觉对象调用。例如，在 Label 控件中，回调将只返回构成 Label 的 Border 和 TextBlock，而不返回 Label 控件本身。您的 UserControl 也是如此。

您可以通过调用从传递给 HitTestResultCallback 的视觉效果中获取 UserControl [`VisualTreeHelper.GetParent`](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.getparent.aspx)。

或者，您还提供一个[`HitTestFilterCallback`](http://msdn.microsoft.com/en-us/library/system.windows.media.hittestfiltercallback.aspx). 此回调获取视觉树中的每个视觉对象，当传入 UserControl 时，您可以简单地停止遍历树。

```
VisualTreeHelper.HitTest(
    Application.Current.MainWindow,
    obj =>
    {
        if (obj is UserControl)
        {
            // found it
            return HitTestFilterBehavior.Stop;
        }
        return HitTestFilterBehavior.Continue;
    },
    result => HitTestResultBehavior.Continue,
    new PointHitTestParameters(_currentPoint)); 
```

如果您想要获得多个点击 UserControl，可能是因为它们在您正在测试的点重叠，或者您正在使用命中测试几何进行测试，您可以通过返回`HitTestFilterBehavior.ContinueSkipChildren`.

# javascript - 要在窗口中打开的 Facebook 帖子

> ID：15556204
> 
> 赞同：0
> 
> 时间：2013-03-21T19:15:55.637
> 
> 标签：javascript, facebook, facebook-javascript-sdk, feed

截至目前，这个javascript：

```
<script>

  FB.init({appId: "123456789", status: true, cookie: true, xfbml:true });

  function postToFeed(description) {

    var obj = {
        method: 'feed',
        redirect_uri: 'http://thelivesite.com/',
        link: 'https://thelivesite.com/',
        picture: 'https://www.thelivesite.com/static/images/logo.png',
        name: 'TheLiveSite',
        caption: 'Here's a caption',
        description: description,
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script>

 <div id='fb-root'></div>

<p style="position: absolute;">
     <a onclick='postToFeed("{{ item.title }}."); return false;'>Share</a>
</p>
<p id='msg'></p> 
```

呈现一个像这样的框：

![在此处输入图像描述](../Images/993a5289696f222fec63a96306ff8d78.png)

我该怎么做才能使它成为这样的弹出窗口对话框？：

![在此处输入图像描述](../Images/ff0967a130c10b3094c17c3fb7740b9f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:19:57.467

添加这个：`display: "popup`“

```
var obj = {
    method: 'feed',
    redirect_uri: 'http://thelivesite.com/',
    link: 'https://thelivesite.com/',
    picture: 'https://www.thelivesite.com/static/images/logo.png',
    name: 'TheLiveSite',
    caption: "Here's a caption",
    description: description,
    display: "popup"
}; 
```

# twitter-bootstrap - Twitter bootstrap rel="popover" 数据内容不显示弹出框

> ID：15556206
> 
> 赞同：1
> 
> 时间：2013-03-21T19:16:01.750
> 
> 标签：twitter-bootstrap, asp.net-mvc-4

我试图让锚标记的数据内容部分中的任何内容显示为弹出菜单。我之前测试它时让它工作，但现在我无法显示数据，我唯一做的就是将更多项目添加到作为模型出现的列表中。任何人都知道为什么我的弹出窗口不起作用？

```
@helper CreateSubMenu(MenuItem[] menuItems)
{
foreach (var Item in menuItems)
{

    <li><a href="#" id="@Item.HtmlId" rel="popover" data-content="@Item.Description">@Item.Name</a>
        @if (Item.MenuItems.Any())
        {
            @WrapWithUl(Item.MenuItems)
        }
    </li>
}
}
@helper WrapWithUl(MenuItem[] menuItems)
{ <ul>
  @CreateSubMenu(menuItems)
</ul> }

<div class="pull-left demo-dd demo-container span3">

<strong>
    <ul id="drilldown-3">
        @CreateSubMenu(Model.MenuItems)
    </ul>
</strong>
</div>

    <script type="text/javascript">
        $(document).ready(function($){

            $('#drilldown-3').dcDrilldown({
                speed           : 'fast',
                saveState       : false,
                showCount       : false,
                linkType        : 'breadcrumb'
            });
        });

    </script> 
```

这是我在 _layout.cshtml 文件中的导入

```
 <head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/css/bootstrap/bootstrap.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/base-admin.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/base-admin-responsive.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/fontAwesome/font-awesome.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/dcdrilldown.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/css/skins/demo.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/DataTables-1.9.4/media/css/demo_table.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery-migrate-1.1.1.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.cookie.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.dcdrilldown.1.2.js")"></script>
    <script src="@Url.Content("~/Scripts/bootstrap.js")"></script>
    <script src="@Url.Content("~/Scripts/excanvas.min.js")"></script>
    <script src="@Url.Content("~/Scripts/DataTables-1.9.4/media/js/jquery.dataTables.min.js")"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:21:23.483

您需要添加容器：body

```
$('a[rel=popover]').popover([container: 'body'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T20:26:35.390

我发现该示例需要在 ASP.NET MVC5 示例中设置触发器选项。它默认为“点击”

```
$("#myID").popover({ container: 'body', trigger: 'hover' }); 
```

# segmentation-fault - 该程序中的分段错误在哪里？

> ID：15556209
> 
> 赞同：0
> 
> 时间：2013-03-21T19:16:19.767
> 
> 标签：segmentation-fault

所有这一切都试图做的是将最短字符串的地址放在数组的开头，将最长字符串的地址放在数组的末尾，但我看不出它有什么问题。当我在 linux 上运行它时，出现“分段错误”

```
#include <stdio.h>
#include <string.h>

void fx(char* t[], int n);

int main(void) {
    char*t[]= {"horse", "elephant", "cat", "rabbit"};
    int n, i;
    n = sizeof(t)/sizeof(t[0]);
    fx(t, n);
    printf("shortest is %s, longest is %s\n", t[0], t[n-1]);

}

void fx(char* t[], int n) {
    int i;
    char* temp, len0, len1, len;
    len0 = strlen(t[0]); /* lenght of first string*/
    len1 = strlen(t[n+1]); /*lenght of last string*/
    for(i=0; i<n; i++) {
        len = strlen(t[i]); /*temporary lenght if ith string*/
        if( len < len0 ) {
            temp = t[0];  /* if shorter, swap places with first*/
            t[0] = t[i];
            t[i] = temp;
        }
        else if(len > len1) {  /* if larger, swap places with last*/
            temp = t[n-1]; 
            t[n-1] = t[i];
            t[i] = temp;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:20:06.760

数组是 [0....n-1]

```
len1 = strlen(t[n+1]); /*lenght of last string*/ 
```

应该

```
len1 = strlen(t[n-1]); /*lenght of last string*/ 
```

len0、len1 和 len 必须是 int，而不是 char*，因为它们包含字符串的 len

# php - 在网页中显示 PDF 并以编程方式滚动

> ID：15556210
> 
> 赞同：5
> 
> 时间：2013-03-21T19:16:21.613
> 
> 标签：php, javascript, html, pdf

在用户文本搜索之后，我构建了一个搜索引擎来查找文档中最相关的短语。在我处理之后，我有一个短语文本列表。我现在需要的是向用户显示它们，显示原始源 PDF 并将其滚动到找到原始短语的页面。最好的情况是突出显示它，但现在滚动就足够了。

我正在使用 PHP 和 Javascript。

谁能指出我这样做的方法？有没有可用的框架？

欢迎任何提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:36:13.420

有一个用于嵌入 PDF 的优秀 JavaScript 库，称为[pdf.js](https://github.com/mozilla/pdf.js)。可以在[这里找到演示](http://mozilla.github.com/pdf.js/web/viewer.html)

开箱即用，我认为它没有您正在寻找的突出显示和滚动功能。但是，看起来有人可能已经想出了如何在[这里做](https://stackoverflow.com/a/12059751/605643)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:54:02.553

如果您使用 Acrobat Reader 在浏览器中显示文件，则可以使用[Acrobat Reader URL 参数](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)。

例子：

```
http://example.org/doc.pdf#page=3 
```

还有一篇关于[如何使用 Acrobat Reader 在网页中嵌入 PDF 文档的帖子](https://stackoverflow.com/questions/2474811/how-to-embed-pdf-in-a-web-page-using-acrobat-reader-instead-of-acrobat)

如果您不能假设您的用户将使用 Adob​​e Acrobat Reader，那么另一种选择可能是使用服务器端的库，然后创建一个临时 PDF 文件，其中包含重定向到目标页面的“OpenAction”，并返回该临时文件反而。包含此 OpenAction 的代码将取决于您决定使用的库。

# c++ - 从函数返回字符串....限制？

> ID：15556215
> 
> 赞同：0
> 
> 时间：2013-03-21T19:16:34.970
> 
> 标签：c++, c, string

我很惊讶我有这个特殊的代码包

```
char* usage()
     {
         static char errors[] = {"Sorry Invalid Option entered\nPlease Enter an appropriate option"};        
         return errors;
     } 
```

我已经正确地调用了这个函数，它做了我想要的。但是，一旦我这样做……我就会遇到很多错误。

```
char* usage()
     {
         static char errors[] = {"Sorry Invalid Option entered\n
                                 Please Enter an appropriate option"};        
         return errors;
     } 
```

我所做的只是将第二行放在下面一行我得到错误。现在，我想知道的是两者之间有什么区别？我似乎在两个字符数组中输入了相同的参数。是因为我没有为数组分配空间吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T19:18:17.353

C 和 C++ 不支持这种方式的多行文字，但您可以使用：

```
char* usage()
{
     static char errors[] = {"Sorry Invalid Option entered\n"
                             "Please Enter an appropriate option"};        
     return errors;
} 
```

注意额外的引号！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T19:19:09.510

在 C（我不了解 C++）中，您可以使用引号连接字符串这一事实在多行中编写字符串（这种连接由预处理器完成）

```
char test[] = "one " "two" " " "<= that's a space :)" "\n"
              "three and four\n"
              "five etc and so on\n"
              "\n"
              "for ever and ever ...\n"; 
```

*注意：除了最后一行，没有分号。*

# hibernate - Grails：休眠和数据迁移

> ID：15556220
> 
> 赞同：0
> 
> 时间：2013-03-21T19:16:51.210
> 
> 标签：hibernate, grails, grails-orm, data-migration

我有一个针对客户的域类。我最近不得不更改为域类，因为我们正在收集帐单地址和送货地址，但只记录了一个邮政编码值。所以我想一个简单的解决方法。将 zipcode 更改为 billzipcode，然后为 shipzipcode 创建一个新字段。我运行 dbm-gorm-diff 来创建更改日志，然后运行 ​​dbm-update 来执行我所做的更改。到目前为止，一切都很顺利。但随后我去调试应用程序以查看对数据源的更改是否正常。但是，现在当我尝试保存新的客户记录时，会出现以下错误：

```
 NULL not allowed for column "ZIPCODE"; SQL statement:
insert into customer (id, version, billaddr, billcity, billstate, billzipcode, cell, contact, country_id, custcode, custname, date_created, email, fax, last_updated, organization, phone, shipaddr, shipasbill, shipcity, shipstate, shipzipcode, status, tenant_id) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23502-164]. Stacktrace follows:
org.h2.jdbc.JdbcSQLException: NULL not allowed for column "ZIPCODE"; SQL statement:
insert into customer (id, version, billaddr, billcity, billstate, billzipcode, cell, contact, country_id, custcode, custname, date_created, email, fax, last_updated, organization, phone, shipaddr, shipasbill, shipcity, shipstate, shipzipcode, status, tenant_id) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [23502-164]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.table.Column.validateConvertUpdateSequence(Column.java:293)
    at org.h2.table.Table.validateConvertUpdateSequence(Table.java:680)
    at org.h2.command.dml.Insert.insertRows(Insert.java:120)
    at org.h2.command.dml.Insert.update(Insert.java:84)
    at org.h2.command.CommandContainer.update(CommandContainer.java:73)
    at org.h2.command.Command.executeUpdate(Command.java:226)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:143)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:129)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at com.companyName.appname.billing.CustomerController$_closure6.doCall(CustomerController.groovy:45)
    at grails.plugin.multitenant.core.servlet.CurrentTenantServletFilter.doFilter(CurrentTenantServletFilter.java:53)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我很茫然，因为 ZIPCODE 列不再在域类中。任何指导将不胜感激。

编辑：每个请求这里是迁移插件生成的更改：

```
changeSet(author: "user (generated)", id: "1363806498118-1") {
    dropColumn(tableName: "admission", columnName: "pen")
    addColumn(tableName: "admission") {
        column(name:"pen_id", type:"bigint")
    }       
}

changeSet(author: "user (generated)", id: "1363806498118-2") {
    addColumn(tableName: "customer") {
        column(name: "billzipcode", type: "varchar(50)") {
            constraints(nullable: "false")
        }
    }
}

changeSet(author: "user (generated)", id: "1363806498118-3") {
    addColumn(tableName: "customer") {
        column(name: "shipzipcode", type: "varchar(50)") {
            constraints(nullable: "false")
        }
    }
}

changeSet(author: "user (generated)", id: "1363806498118-4") {
    addColumn(tableName: "customer_costs") {
        column(name: "subtotal", type: "float(19)") {
            constraints(nullable: "false")
        }
    }
}

changeSet(author: "user (generated)", id: "1363806498118-5") {
    addForeignKeyConstraint(baseColumnNames: "pen_id", baseTableName: "admission", constraintName: "FK1A21809D0C6EF15", deferrable: "false", initiallyDeferred: "false", referencedColumnNames: "id", referencedTableName: "pen", referencesUniqueColumn: "false")
}

changeSet(author: "user (generated)", id: "1363806498118-6") {
    dropColumn(columnName: "zipcode", tableName: "customer")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:20:35.753

如果您注意到您的变更集，则 billzipcode 的条目实际上是添加一个新列，而不是重命名 zipcode 列。因此，您仍然必须管理数据迁移。这样的事情应该适用于你的情况：

```
changeSet(author: 'user (generated)', id: '1363806498118-4') {
    comment { 'Renaming zipcode to billzipcode' }
    renameColumn(tableName: 'customer_costs', oldColumnName: 'zipcode', newColumnName: 'billzipcode', columnDataType: 'varchar(50)')
} 
```

[这是](https://stackoverflow.com/questions/6218163/how-do-i-modify-a-column-using-grails-database-migration-plugins-groovy-dsl)一个相关问题，@Burt 接受的答案指向[此](https://github.com/grails-plugins/grails-database-migration/blob/master/testapp/price.changelog.groovy)链接。

# wordpress - 我在哪里插入我的代码？

> ID：15556225
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:17:19.350
> 
> 标签：wordpress, conditional-statements

我需要在我的 page.php 上插入一个条件 is_user_logged_in() 但我不熟悉代码，所以我不知道是否应该在我的 wordpress 附带的现有代码的特定行之前或之后插入整个条件主题。我会很感激你在这方面的帮助。我已经有了条件的代码。我只是不想要代码应该从哪里开始。

```
<?php
    // Caso o usuário esteja logado
    if ( is_user_logged_in() ) :
?>
    Aqui você coloca o seu conteúdo, normalmente é a função do WordPress
    <?php the_content(); ?>
<?php
    // Caso o usuário não esteja logado
    else :
?>
    "OK, caro coleguinha, faça login para ver o conteúdo" ou alguma mensagem do tipo
    ou até mesmo um form para o usuário fazer o login.
<?php
    // Aqui acaba a brincadeira
    endif;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:02:04.233

您可以在 wordpress 的任何地方和任何页面中使用代码。
请通过这个，希望这可以帮助你。

```
 <?php
   if ( is_user_logged_in() ) {
   echo 'This is Registered User';
   } else {
   echo 'This is non-registered user';
   }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:20:19.640

如果您应用 PHP，则 if else 语句如下：

```
if(condition == true) {

} else {

} 
```

# javascript - Stapes.js 的继承

> ID：15556230
> 
> 赞同：2
> 
> 时间：2013-03-21T19:17:33.527
> 
> 标签：javascript, inheritance, stapes.js

我正在尝试与 JS 框架[Stapes.js](http://hay.github.com/stapes/#m-subclass)建立父/子链接。

这是我的代码：

```
var Parent = Stapes.subclass({
    constructor: function () {
        this.name = 'syl';
    }
});

var Child = Parent.subclass({
    constructor: function (value) {
        this.value = value;

        console.log(this.name); // undefined
    }
});

var child = new Child('a value'); 
```

[**在这里**](http://jsfiddle.net/n5kwL/)拉小提琴。

如何从子类访问父类的 name 属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T10:15:05.350

对于那些懒得点击链接的人，这是我在 Github 上给出的完整答案：

子类不会自动运行其父类的构造函数。您需要手动运行它。你可以这样做：

```
var Child = Parent.subclass({
    constructor : function() {
        Parent.prototype.constructor.apply(this, arguments);
    }
}); 
```

或这个：

```
var Child = Parent.subclass({
    constructor : function() {
        Child.parent.constructor.apply(this, arguments);
    } 
}); 
```

在这两种情况下，做一个

```
var child = new Child();
alert(child.name); 
```

将给出一个带有“syl”的警报框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:34:35.120

问题已解决，查看[详情](https://github.com/hay/stapes/issues/37#issuecomment-15392595)。

# html - Chrome 认为英语网站是土耳其语

> ID：15556233
> 
> 赞同：3
> 
> 时间：2013-03-21T19:17:47.997
> 
> 标签：html, google-chrome

我正在测试一个非常简单的网站——它是一个主要基于图形的占位符网站——当我刚刚在 Chrome 中加载它时，Chrome 工具栏告诉我页面是土耳其语并询问我是否要翻译。我在代码中找不到任何可能导致此问题的内容。我只是把它都放在这里，因为它并不多。以下是完整的页面代码，品牌名称已更改。（品牌名称中没有任何内容表明它们会被解释为土耳其语）。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Acme Vineyards &#8472; Sonoma County</title>
        <meta name="description" content="Acme Vineyards: Farming with Purpose in Sonoma County, California">
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
        <link rel="stylesheet" href="normalize.min.css">
        <link rel="stylesheet" href="main.css">
        <!--[if lt IE 9]>
            <script src="js/vendor/html5-3.6-respond-1.1.0.min.js"></script>
        <![endif]-->
    </head>
    <body>

        <nav>
            <ul><!-- before adding anchor tags, uncomment the :hover lines in main.less -->
                <li id="durell">Marnell Vineyard</li>
                <li id="gaps-crown">Gap&rsquo;s End Vineyard</li>
                <li id="dupont">Acme Vineyard</li>
                <li id="wilson">Smith Vineyard</li>
                <li id="one-sky">One Star Vineyard</li>
            </ul>
        </nav>
        <div class="main-container">
            <h1>Acme Vineyards: Farming with Purpose in Sonoma County</h1>
        </div>
        <div class="footer-container">
            <footer>
                <dl id="phone">
                    <dt class="office">Office: </dt><dd class="office"><a href="tel:5555555555">555-555-5555</a></dd>
                    <dt class="fax">Fax: </dt><dd class="fax"><a href="tel:5555555555">555-555-5555</a></dd>
                </dl>
                <ul id="mail">
                    <li id="email"><a href="mailto:info@acmevineyards.com">info@acmevineyards.com</a></li>
                    <li>PO Box 55555, Sonoma, CA 95555</li>
                </ul>
            </footer>
            <p id="credits">Site Design: <a href="http://acmedesign.com" target="_blank">Acme Design</a>
        </div>
        <div id="badge"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:20:06.807

使用`<meta>`标签向 chrome 指示内容并忽略翻译

```
<meta charset="UTF-8" />
<meta name="google" content="notranslate">
<meta http-equiv="Content-Language" content="en" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:20:17.503

这个[问题](https://stackoverflow.com/questions/2467454/why-does-chrome-incorrectly-determine-page-is-in-a-different-language-and-offer)很幸运地添加了这些元属性以强制 Chrome 不尝试翻译：

```
 <meta charset="UTF-8" />
  <meta name="google" content="notranslate">
  <meta http-equiv="Content-Language" content="en" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T19:19:48.013

你的问题是这个`&#8472;`

在我看来像一个土耳其角色！

# android - 在我的 Android 应用程序中从 Wordpress 检索数据

> ID：15556236
> 
> 赞同：0
> 
> 时间：2013-03-21T19:17:54.497
> 
> 标签：android, wordpress

我需要从我的 Android 应用程序访问 Wordpress 帖子（外部）。我需要以某种方式显示最后一篇文章（列表视图中的可能标题），并通过输入新的文本、图片和视频来编辑其中的一些。

我遇到了很多关于如何在 php 中执行此操作的解释。但因为我正在与 Andoird 合作。我在 Java 中需要它

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:52:21.827

我不熟悉 WordPress，但我可以建议您从 RSS 解析您的帖子开始（WordPress 提供 RSS，对吗？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:07:47.550

一种方法是访问 WordPress 数据库。我不是 100% 熟悉 WordPress，但我认为这些帖子存储在 wp_posts 表中。您还应该能够查找、访问和编辑其中的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:21:42.027

我知道你想用 Wordpess 和 Android 应用程序做什么。我可以给你一些脚本..

**下载 SVN 抓取器**

downloadsvn.codeplex.com/

**从 wordpress 下载 Wordpress Android 源代码。**

android.svn.wordpress.org/

**您可以使用 Wordpress Rest Api 文档完成您的任务**

developer.wordpress.com/docs/api/

**Wordpress XML-RPC API**

codex.wordpress.org/XML-RPC_WordPress_API

**我还通过 Wordpress 使用 Android 本机应用程序**

# django - 如何设置一个 django 项目，以便两个独立的 django 应用程序读取和写入相同的模型

> ID：15556237
> 
> 赞同：1
> 
> 时间：2013-03-21T19:17:59.387
> 
> 标签：django, architecture, django-models, django-apps

我必须创建一个 django 项目，它有两个 dictinct 部分。生产者向用户提供一些 UI 并最终写入一些模型。消费者使用这些数据并进行一些处理并显示一些漂亮的图表等。

从技术上讲，这些是由完全不同的用户集使用的完全隔离的应用程序。我很想让它们完全分开 django 项目，但不幸的是它们共享数据库结构。数据库实际上是连接两者的管道。

我应该如何构建项目？根据我的阅读，理想情况下，每个应用程序都应该有独立的模型。不幸的是，这是不可能的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:22:39.650

如果您定义一个“应用程序”并在您的“Django 项目”中使用它，我假设您在 settings.py 中使用 INSTALLED_APP 以使其在您的环境中为人所知。

如果你从这一点来看 - 它就像你在两个不同的项目/服务中使用“django-social-auth”并且你共享同一个数据库一样。我无法判断使用同一个数据库是常见的还是不常见的，这是您必须做出的设计决定，并且您需要对此感到满意。

如果您只想在管理员中 [分离用户和网络用户，请查看分离员工和用户帐户](http://www.mahner.org/posts/separating-staff-and-user-accounts-in-djangos-admin/)

# c++ - 为什么这个简单的服务器不接受连接？

> ID：15556245
> 
> 赞同：1
> 
> 时间：2013-03-21T19:18:21.780
> 
> 标签：c++, boost-asio

我刚开始使用 boost asio 并操作了我在网上找到的一个简单服务器的代码片段。这是代码

```
void OnAccept( const boost::system::error_code & ec, boost::shared_ptr< boost::asio::ip::tcp::socket > sock )
{
    if( ec )
    {
        std::cout << "[" << boost::this_thread::get_id()<< "] Error: " << ec << std::endl;  
    }
    else
    {
        std::cout << "[" << boost::this_thread::get_id()<< "] Accepted!" << std::endl;
    }
}

void RunServer()
{
    boost::shared_ptr< boost::asio::io_service > io_service(new boost::asio::io_service);
    boost::shared_ptr< boost::asio::ip::tcp::acceptor > acceptor(new boost::asio::ip::tcp::acceptor( *io_service ));
    boost::shared_ptr< boost::asio::ip::tcp::socket > sock( new boost::asio::ip::tcp::socket( *io_service ) );

    try
    {
        boost::asio::ip::tcp::resolver resolver( *io_service );
        boost::asio::ip::tcp::resolver::query query( "127.0.0.1", boost::lexical_cast< std::string >( 7777 ));
        boost::asio::ip::tcp::endpoint endpoint = *resolver.resolve( query );
        acceptor->open( endpoint.protocol() );
        acceptor->set_option( boost::asio::ip::tcp::acceptor::reuse_address( false ) );
        acceptor->bind( endpoint );
        acceptor->listen( boost::asio::socket_base::max_connections );
        acceptor->async_accept( *sock, boost::bind( OnAccept, _1, sock ) );//Receives only one connection
        std::cout << "Waiting for incoming connections \n";
        while(true)
        {
          Sleep(400);
        }
    }
    catch( std::exception & ex )
    {
        std::cout << "[" << boost::this_thread::get_id()<< "] Exception: " << ex.what() << std::endl;   
    }
}

int main( int argc, char * argv[] )
{
    boost::thread server(RunServer);
    std::cout << "Press any key to stop..\n";
    std::cin.get();
    return 0;
} 
```

不幸的是，该代码不接受连接。我试过`telnet localhost 7777`了，但它不接受连接有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:26:54.090

您正在启动异步接受，但不允许`io_service`运行。您需要执行同步 acecpt 或调用 call `io_service->run()`。相关部分将变为：

```
 std::cout << "Waiting for incoming connections \n";
    io_service->run();
} 
```

我建议您比较[Daytime.2 - 同步 TCP 日间服务器](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tutdaytime2.html)和[Daytime.3 - 异步 TCP 日间服务器](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/tutorial/tutdaytime3.html)

# java - 为什么我的 hadoop 减速器没有运行/被调用？

> ID：15556253
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:18:51.253
> 
> 标签：java, hadoop, mapreduce

与[这个问题](https://stackoverflow.com/questions/12676505/hadoop-reducer-not-being-called)类似，我的减速器没有运行。

不幸的是，他设置 MapOutput{key|Value} 的解决方案并没有解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:18:51.253

对我有用的是改变我`reduce()`的接收`Iterable<MyWritable>`而不是`Iterator<MyWritable>`，如[这篇文章](http://comments.gmane.org/gmane.comp.jakarta.lucene.hadoop.user/22595)所述。

# jsf - JSF2 - Primefaces - 更新嵌套面板时使用命令按钮进行部分更新不起作用

> ID：15556256
> 
> 赞同：2
> 
> 时间：2013-03-21T19:19:00.217
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试使用以下命令更新我的页面的一部分：

```
<p:commandButton id="bntNewAddress" immediate="true"
value="New Address" disabled="false" icon="ui-icon-document"
process="@this" update=":main_form:createPanelDetailsAddress"
action="#{issuerComponent.initAddNewAddress}">
</p:commandButton> 
```

当我单击按钮时，面板“createPanelDetailsAddress”没有更新。另一方面，当我使用 update=":main_form" 时，面板会更新（但 main_form 内的所有其他面板也会更新） 我要更新的面板包含在名为“createPanel”的面板中。

谁能知道为什么 update=":main_form:createPanelDetailsAddress" 在我的情况下不起作用？

我使用 primefaces3.5 和 Mojarra JSF 2.1.7

这是我使用的代码：

```
public String initAddNewAddress(){
 renderCreatePanelDetailsAddress = true;
 return null;
}

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" template="/template.xhtml">

<ui:define name="content">
    <h:form id="main_form">
        <p:panel id="createPanel" rendered="true">

            <p:messages id="msgCreate" />

            <p:panel id="createPanelDetails"
                header="#{issuerMsgs['issuer.createArea.title']}">

                <h:panelGrid border="0" columns="6">

                    <h:outputText value="#{issuerMsgs['issuer.issuerCode.title']}:" />
                    <p:inputText required="true"
                        value="#{issuerComponent.updateIssuer.issuerCode}"
                        label="issuer_issuerCode">

                    </p:inputText>
                    <h:outputText value="#{issuerMsgs['issuer.description.title']}:" />
                    <p:inputText required="true"
                        value="#{issuerComponent.updateIssuer.description}"
                        label="issuer_description">

                    </p:inputText>
                </h:panelGrid>
            </p:panel>

            <p:spacer height="10" />

            <p:panel id="panelListAddress"
                header="#{addressMsgs['address.createArea.title']}">

                <p:dataTable id="addresslist" var="address"
                    value="#{issuerComponent.addressList}" paginator="false" rows="10">
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="#{addressMsgs['address.tel.title']}" />
                        </f:facet>
                        <h:outputText value="#{address.tel}" />
                    </p:column>

                </p:dataTable>

                <p:spacer height="22" width="0" />

                <p:commandButton  id="bntNewAddress" immediate="true"
                    value="New Address" disabled="false" icon="ui-icon-document"
                    process="@this" update=":main_form:createPanelDetailsAddress"
                    action="#{issuerComponent.initAddNewAddress}">
                </p:commandButton>

            </p:panel>

            <p:panel id="createPanelDetailsAddress"
                header="#{addressMsgs['address.createArea.title']}"
                rendered="#{issuerComponent.renderCreatePanelDetailsAddress}">

                <ui:include src="createAddress.xhtml"></ui:include>

                <p:commandButton value="Add"
                    rendered="#{issuerComponent.renderBtnAddAddress}" disabled="false"
                    icon="ui-icon-document" process="@this,createPanelDetailsAddress"
                    update=":main_form" action="#{issuerComponent.addNewAddress}"
                    actionListener="#{addressComponent.addNewComposite}">

                    <f:setPropertyActionListener
                        value="#{addressComponent.updateAddress}"
                        target="#{issuerComponent.address}" />
                </p:commandButton>
            </p:panel>

        </p:panel>
    </h:form>
</ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:32:45.217

您的更新将失败，因为

```
 rendered="#{issuerComponent.renderCreatePanelDetailsAddress}" 
```

将在第一次呈现视图时评估为 false。因此，第一次渲染视图时组件不在 DOM 树中。

Ajax 更新通过在 DOM 中定位特定组件 (by `id`) 并用新标记替换它来工作。你的面板从一开始就没有在 DOM 中，所以没有什么可以用 ajax 更新的。

要进行补救，您需要`<p:panel/>`用另一个组件包装 ，并使该组件成为您的 ajax 更新的目标

```
 <p:outputPanel id="container" layout="none">
       <p:panel id="createPanelDetailsAddress" header="# addressMsgs['address.createArea.title']}" rendered="#issuerComponent.renderCreatePanelDetailsAddress}">
            <ui:include src="createAddress.xhtml"></ui:include>
            <p:commandButton value="Add"
                rendered="#{issuerComponent.renderBtnAddAddress}" disabled="false"
                icon="ui-icon-document" process="@this,createPanelDetailsAddress"
                update=":main_form" action="#{issuerComponent.addNewAddress}"
                actionListener="#{addressComponent.addNewComposite}">

                <f:setPropertyActionListener
                    value="#{addressComponent.updateAddress}"
                    target="#{issuerComponent.address}" />
            </p:commandButton>
        </p:panel>
    </p:outputPanel> 
```

# r - 核矩阵上的 R 行操作

> ID：15556259
> 
> 赞同：1
> 
> 时间：2013-03-21T19:19:04.370
> 
> 标签：r, matrix, linear-algebra

我有一个内核矩阵，如下所示：

```
kern <- matrix(c(1,0,0,1,0,0,0,1,1,0,1,1,0,0,1,0,0,1), dimnames=list(c("r1", "r1", "r3"), c("c1a", "c1b", "c2a", "c2b", "c3a", "c3b")), ncol=6, nrow=3)

> kern
   c1a c1b c2a c2b c3a c3b
r1   1   1   0   0   0   0
r2   0   0   1   1   0   0
r3   0   0   1   1   1   1 
```

现在我想应用行操作，例如`kern[,c("c1b", "c2b", "c3b")]`单位矩阵。我知道这很容易通过从第三行中减去第二行来完成：

`kern[3,] = kern[3,] - kern[2,]`,

但是R中是否有一个函数可以为我做到这一点？在另一个线程中发布的缩减行梯形表格的功能不是我需要的。

* * *

**编辑**

我有一个笨拙的解决方案

```
sub <- kern[,c("c1b", "c2b", "c3b")]

for (i in which(colnames(kern) %in% colnames(sub))){
  ##identify which columns have more than one entry
  nonzero.row.idx <- which(kern[,i] != 0)
  while(length(nonzero.row.idx) > 1){    
    row.combinations <- combn(nonzero.row.idx, 2)
    for (j in ncol(row.combinations)){
      r1.idx <- row.combinations[1,j]
      r2.idx <- row.combinations[2,j]
      r1 <- kern[r1.idx,]
      r2 <- kern[r2.idx,]
      if (min(r1 - r2) >=0)
        kern[r1.idx, ] <- r1-r2
      else if (min(r2 - r1) >=0)
        kern[r2.idx, ] <- r2-r1
      else
        stop("Producing negative entries in row")      
      nonzero.row.idx <- which(kern[,i] != 0)
    }
  }
}      

kern[,c("c1b", "c2b", "c3b")] 
```

另外我忘了提到我不希望任何条目`kern`是负面的。此代码适用于我的几个示例，但是，它很容易对许多其他矩阵造成麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:35:45.460

你的分配箭头指向错误的方向。

```
kern <-  matrix(c(1,0,0,1,0,0,0,1,1,0,1,1,0,0,1,0,0,1), 
           dimnames=list(c("r1", "r1", "r3"), 
                         c("c1a", "c1b", "c2a", "c2b", "c3a", "c3b")),
           ncol=6, nrow=3)
sub <- kern[,c("c1b", "c2b", "c3b")] 
```

您可以尝试复制您的大脑（或至少我的大脑）在被要求从具有离轴非零条目的行中找到要减去的正确行时所做的事情：

```
id <- which( sub != 0 & row(sub) != col(sub), arr.ind=TRUE)
id
#   row col
#r3   3   2

> sub[ id[ ,"row" ], ] <- sub[id[ ,"row" ] , ] - sub[id[, "col" ], ]
> sub
   c1b c2b c3b
r1   1   0   0
r1   0   1   0
r3   0   0   1 
```

# vb.net - 循环通过动态创建的控件

> ID：15556261
> 
> 赞同：1
> 
> 时间：2013-03-21T19:19:09.600
> 
> 标签：vb.net, loops, button, runtime

我有许多动态创建的按钮（在运行时生成的按钮），还有一些动态创建的面板。我想做一些类似于下面的代码的事情，尽管我知道这段代码不起作用。

```
For i = 1 to NumberOfButtons
    button(i).top = panel(i).top
next 
```

按钮命名为 button1、button2 等。面板也命名为 panel1、panel2 等。这些都是用 VB Express 2008 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:33:40.920

```
For i As Integer = 1 To theTopNumber
  Me.Controls("button" & i.ToString).Top = Me.Controls("panel" & i.ToString).Top
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:34:05.250

生成按钮和面板时，需要将它们存储到数组中。然后，您可以像在代码示例中那样通过索引访问它。另一种选择是通过`Me.Controls("button1")`类似的方法来完成，但我会考虑这种糟糕的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:41:22.177

这不行吗？

```
For Each btn As Button In Me.Controls
    For Each pnl In Me.Controls
        btn.Top = pnl.Top
     Next
Next 
```

请（如果您满意）投票或标记为答案，因为我的神秘无缘无故被禁止。重新启用它可能会有所帮助：/

;)

# wpf - 制作 Settings.txt 文件 - 如何以正确的方式加载设置？

> ID：15556263
> 
> 赞同：0
> 
> 时间：2013-03-21T19:19:25.463
> 
> 标签：wpf, c#-4.0, .net-4.5

我有一个正在开发的应用程序，它应该通过一个 XML 文件（名为`Settings.txt`）保存和加载设置现在，这是我使用的代码：

```
public class Settings
{
    public bool Selected_64Bit { get; set; }
    public bool Supported_64Bit { get; set; }
    public bool FirstTime { get; set; }
}

static void SaveSettings(Settings settings)
{
    var serializer = new XmlSerializer(typeof(Settings));
    using (var stream = File.OpenWrite("settings.txt"))
    {
        serializer.Serialize(stream, settings);
    }
}

static Settings LoadSettings()
{
    if (!File.Exists("settings.txt"))
        return new Settings();

    var serializer = new XmlSerializer(typeof(Settings));
    using (var stream = File.OpenRead("settings.txt"))
    {
        return (Settings)serializer.Deserialize(stream);
    }
} 
```

现在，我需要将设置加载到新的`Settings()`. 我发现这样做：

```
Settings [VAR] = new Settings() 
```

将`Settings()`与所有新的`false`，但我想加载保存的设置..我很困惑，无法向自己解释这个......

最终产品应该：

*   检查是否`settings.txt`存在
*   如果是这样 - 将设置加载到一个新的`Settings`调用`Setting`中（在我的情况下）。
*   如果没有 - 进行新设置，然后保存。

我希望有人理解并可以帮助我。顺便说一句 - 我在 C# 方面不太好，而且我根本没有 get\set 的东西，就像 return 和其他类似的方法一样。我知道基础知识，如果我不会，我会很高兴需要更复杂的技术。如果我必须使用更复杂的技术 - 请深入解释它们，因为我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:23:13.293

设置好后，您需要执行以下操作：

```
Settings mySettings = Settings.LoadSettings(); 
```

这将运行您的静态`LoadSettings`方法并返回一个`Settings`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:43:24.283

正如马特已经写的那样

```
Settings mySettings = Settings.LoadSettings(); 
```

将完成这项工作。

如果您有一个应用程序，您也可以使用它的设置。您可以通过 Properties.Settings.Default 获得该设置，并且在您的项目设置中您可以定义一些属性。

# php - 如何在不显示错误的情况下检查表格

> ID：15556266
> 
> 赞同：0
> 
> 时间：2013-03-21T19:19:35.340
> 
> 标签：php, mysql, opencart

我想检查 OpenCart 数据库中的表是否存在所以我做了这个函数

```
public function CheckCustomer(){
$query = $this->db->query('SELECT * FROM '.DB_PREFIX.'customer_online');
return $query->row;
} 
```

在我的控制器中，我测试它是否存在，我将变量设置为 1 或 0，具体取决于。

该表确实存在一切都很好，如果我从客户那里删除 c 只是为了模拟表不存在，我的 tpl 页面没有呈现，而是我收到此错误：

注意：错误：表“OpenCart-Test.oc_ustomer_online”不存在错误编号：1146 SELECT * FROM oc_ustomer_online in /home/justine/www/opencart-test/opencart-1.5.5.1/upload/system/database/mysql。第 50 行的 php

是否有这样做而不会在屏幕上抛出错误，因为我需要在我的 tpl 文件中显示某些信息之前知道该表是否存在。

希望有人可以对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:26:04.160

一般来说，动态创建的表是一个坏主意。您需要的任何表都应该*始终*存在，并且您可以简单地使用它`TRUNCATE TABLE mytable`来快速删除所有行，而不是`DROP TABLE`.

**编辑：比下面更好的主意**
将查询更改为`SHOW TABLES FROM my_database`[或者只是`SHOW TABLES`如果已经选择了数据库]并检查您要查找的表名是否存在于结果集中。

* * *

也就是说，您应该能够通过在函数前加上 来抑制错误`@`，即：

```
$query = @$this->db->query('SELECT * FROM '.DB_PREFIX.'customer_online'); 
```

或者您应该能够切换您的 mySQL 数据库对象以使用异常而不是 PHP 错误，然后将函数调用包含在一个`try{ } catch() { }`块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T14:39:30.403

MySQL 可以列出数据库中的所有表。通过指定“like tablename”，您可以搜索特定的表。

```
/**
 * Check if the table 'customer_online' exists
 * @return boolean TRUE if table exists, FALSE otherwise.
 */
public function CheckCustomer(){
    $res = $this->db->query("SHOW TABLES LIKE '".DB_PREFIX."customer_online'");
    return (boolean) $res->num_rows;
} 
```

这不会产生任何错误，因为它没有尝试访问表，只是在数据库中的表列表中查找表名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:21:03.157

解决 。

把它放在我的控制器文件中修复它。

```
$this->data['checkcustomer'] = @mysql_query ('SELECT * FROM '.DB_PREFIX.'customer_online'); 
```

# php - WordPress is_home() 没有按预期工作

> ID：15556267
> 
> 赞同：2
> 
> 时间：2013-03-21T19:19:42.737
> 
> 标签：php, wordpress

我只想`icon-backtotop.png`出现在主页上并`icon-backtotop-alt.png`出现在所有其他页面上。但是，使用下面的代码，`icon-backtotop-alt.png`显示在所有页面上。如何修复此代码？

```
<?php if (is_home()) { ?>
    <img src="<?php echo get_stylesheet_directory_uri(); ?>/img/icon-backtotop.png" alt="Back To Top" />
<?php } else { ?>
    <img src="<?php echo get_stylesheet_directory_uri(); ?>/img/icon-backtotop-alt.png" alt="Back To Top" />
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:26:52.277

您可能想使用[is_front_page](http://codex.wordpress.org/Function_Reference/is_front_page)而不是[is_home](http://codex.wordpress.org/Function_Reference/is_home)

> 注意：WordPress 2.1 处理此功能的方式与以前的版本不同 - 请参阅静态首页。如果您选择静态页面作为您的首页（请参阅 is_front_page()），此标签将应用于您的“帖子页面”。

尝试

```
<?php if (is_front_page()) { ?>
    <img src="<?php echo get_stylesheet_directory_uri(); ?>/img/icon-backtotop.png" alt="Back To Top" />
<?php } else { ?>
    <img src="<?php echo get_stylesheet_directory_uri(); ?>/img/icon-backtotop-alt.png" alt="Back To Top" />
<?php } ?> 
```

# python - Django中对象集合的类似查询集的过滤

> ID：15556269
> 
> 赞同：2
> 
> 时间：2013-03-21T19:19:45.037
> 
> 标签：python, django, django-queryset

我正在寻找一种方法来轻松地从模型对象的集合中过滤，而无需每次都访问数据库。根据定义，QuerySet 是惰性的，并且总是会访问数据库。所以我想知道是否有任何东西可以做到这一点。如果没有，也许它是一个很好的创建库。

例如：

```
all_records = object_set(Record.objects.filter(company=user.company)) 
```

`object_set`是一个假设的函数，它将收集 QuerySet 中的所有对象作为静态数据。结果将是一个“对象管理器”实例，该实例可以运行过滤器，类似于 QuerySet 过滤器。这在存储基于多维数据列表中的数据创建、更新和删除对象时特别有用。

```
for row in data:
  for col in row:
    # this would not hit the DB. Only filter within the "object_set" in memory.
    all_records.filter(date=col.date, type=col.type, creator=col.user) 
```

我意识到我可能试图以错误的方式解决这个问题，但无论如何，我认为这将是 Django 中的一个很好的工具。有谁知道 Django 中现有的库或功能可以解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:29:07.593

我认为 QuerySet 的 select_related 方法是你想要的：

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:05:16.697

请查看以下项目中的[managers.py：django-model-utils/.../managers.py](https://github.com/carljm/django-model-utils/blob/master/model_utils/managers.py)

它应该向您展示他是如何实现查询集的

```
def get_query_set(self):
    qs = super(QueryManager, self).get_query_set().filter(self._q)
    if self._order_by is not None:
        return qs.order_by(*self._order_by)
    return qs 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T05:21:29.307

如果长数据集是您提出这个问题的动机，请在您的 Django 项目中使用 Redis 缓存。

[http://unfoldthat.com/2011/09/14/try-redis-instead.html](http://unfoldthat.com/2011/09/14/try-redis-instead.html)

# jetty - 在 Jetty 8 中的 webapps 之间共享会话

> ID：15556276
> 
> 赞同：1
> 
> 时间：2013-03-21T19:20:02.783
> 
> 标签：jetty, jetty-8

我正在考虑从 Tomcat 迁移到 Jetty 8，以获取本质上是一个门户的自定义 Web 应用程序（尽管它不会使用 JSR-168 或类似的门户容器）。这篇文章的关键概念是用户只需要登录一次，然后他将需要访问来自多个不同 Web 应用程序的 URL，这些应用程序都运行在同一个 Jetty 服务器上。用户登录后，应自动对服务器上运行的任何其他 Web 应用程序进行身份验证。

Tomcat 有 org.apache.catalina.authenticator.SingleSignOn 阀门来完成这个确切的任务。一旦您登录 Web 应用程序，SingleSignOn 阀门将自动将您登录到任何其他 Web 应用程序。

那么，是否有类似的方法可以在 Jetty 8 中提供相同的功能？似乎每个 Web 应用程序都有一个单独的 SessionManager。您可以为每个 Web 应用程序配置或以编程方式分配相同的 SessionManager 实例吗？Jetty 是否有其他开箱即用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:05:34.250

HashSSORealm 提供了一种在 Jetty 上使用 SingleSign 的简单方法。看：

[http://docs.codehaus.org/display/JETTY/Single+Sign+On+-+Jetty+HashSSORealm](http://docs.codehaus.org/display/JETTY/Single+Sign+On+-+Jetty+HashSSORealm)

# image - 显示图像而不是 URL

> ID：15556278
> 
> 赞同：0
> 
> 时间：2013-03-21T19:20:06.290
> 
> 标签：image, url, asp.net-mvc-4

我开发了一个带有信号器的 ASP.NET MVC 应用程序来在页面上显示记录。我的表有五列（jobid [int]、name[varchar]、lastexecutiondate[datetime]、status[int]、imageurl[string]）

这是我查看页面的标记：

```
 <script type="text/javascript">

    $(function () {

        // Proxy created on the fly
        var job = $.connection.jobHub;

        // Declare a function on the job hub so the server can invoke it
        job.client.displayStatus = function () {
            getData();
        };

        // Start the connection
        $.connection.hub.start();
        getData();
    });

    function getData() {
        var $tbl = $('#tblJobInfo');
        $.ajax({
            url: '../api/values',
            type: 'GET',
            datatype: 'json',
            success: function (data) {
                if (data.length > 0) {
                    $tbl.empty();
                    $tbl.append(' <tr><th>ID</th><th>Name</th><th>Last Executed Date</th><th>Status</th><th>Image URL</th></tr>');
                    var rows = [];
                    for (var i = 0; i < data.length; i++) {
                        rows.push(' <tr><td>' + data[i].JobID + '</td><td>' + data[i].Name + '</td><td>' + data[i].LastExecutionDate.toString().substr(0, 10) + '</td><td>' + data[i].Status + '</td><td>' + data[i].imageurl + '</td></tr>');
                    }
                    $tbl.append(rows.join(''));
                }
            }
        });
    }
</script>
</head>
<body>
    <div>
        <table id="tblJobInfo" style="text-align:center;margin-left:10px">
        </table>
    </div>
</body> 
```

下面是我从数据库中获取数据的代码

```
SqlDependency.Start(connection.ConnectionString);
                using (var reader = command.ExecuteReader())
                    return reader.Cast<IDataRecord>()
                        .Select(x => new JobInfo()
                        {
                            JobID = x.GetInt32(0),
                            Name = x.GetString(1),
                            LastExecutionDate = x.GetDateTime(2),
                            Status = x.GetString(3),
                            imageurl = x.GetString(4)
                        }).ToList(); 
```

我想显示图像而不是 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:23:49.203

您应该只需要在 JavaScript 表格行函数中创建一个图像标签：

```
for (var i = 0; i < data.length; i++) {
   rows.push(' <tr><td>' + data[i].JobID + '</td><td>' + data[i].Name + '</td><td>' + data[i].LastExecutionDate.toString().substr(0, 10) + '</td><td>' + data[i].Status + '</td><td><img src="' + data[i].imageurl + '"/></td></tr>');
} 
```

我可以想出几种方法来解决您在下面的评论。在代码中，创建一个辅助函数来为您执行此操作：

```
SqlDependency.Start(connection.ConnectionString);
                using (var reader = command.ExecuteReader())
                    return reader.Cast<IDataRecord>()
                        .Select(x => new JobInfo()
                        {
                            JobID = x.GetInt32(0),
                            Name = x.GetString(1),
                            LastExecutionDate = x.GetDateTime(2),
                            Status = x.GetString(3),
                            imageurl = GetImageUrl(x.GetString(3))
                        }).ToList();

private string GetImageUrl(int status){
   switch(status){
     case 1:
        return "some.jpg"
     case 2:
        return "someother.jpg"
     default:
        return "blank.jpg"
   }
} 
```

我不太了解您的代码，所以这假设您的选择没有被强制转换为 SQL 语句（它似乎不是这样）。

要在客户端做同样的事情，您可以将 GetImageUrl 函数实现为 JavaScript 函数并实现相同类型的事情。

```
for (var i = 0; i < data.length; i++) {
   rows.push(' <tr><td>' + data[i].JobID + '</td><td>' + data[i].Name + '</td><td>' + data[i].LastExecutionDate.toString().substr(0, 10) + '</td><td>' + data[i].Status + '</td><td><img src="' + GetImageUrl(data[i].Status) + '"/></td></tr>');
}

function GetImageUrl(status){
  switch(status){
         case 1:
            return "some.jpg"
         case 2:
            return "someother.jpg"
         default:
            return "blank.jpg"
       }
} 
```

# testing - 什么是黑盒测试？

> ID：15556281
> 
> 赞同：3
> 
> 时间：2013-03-21T19:20:11.160
> 
> 标签：testing, black-box, black-box-testing

我在网上搜索过，但每个来源都有不同的说法。

所以我做了两种测试。第一个是 TMap 的“数据循环测试”，第二个是输入输出黑盒测试。

现在我知道黑盒测试是在不查看代码的情况下测试输入输出值。

下面是一个黑盒测试的模板：Nr。定义 期望值 实际值

但 Tmap 表示，黑盒测试是各种测试技术的集合。就像“数据周期测试”一样。

那么黑盒测试到底是什么？它是一种测试技术还是一组测试技术？如果它是测试技术的集合，那么这种预期-实际测试技术叫什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T15:03:14.107

我总是用一个比喻来想它。想象一下，您是一名机械师，正在测试汽车发动机是否工作。

黑盒测试就像关闭引擎盖/引擎盖，进入车内并按下所有按钮和踏板并驾驶它四处看看是否一切正常。您可能不知道汽车中的发动机类型或该特定发动机的确切工作原理，但您可以通过弄乱与发动机交互的所有外部部件来测试发动机是否按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T09:12:45.697

**定义：**

*   黑盒测试是一种测试，无论是功能性的还是非功能性的，不涉及组件或系统的内部结构。所以在这种方法中不考虑程序的内部结构，测试人员应该为程序提供输入集，并测试程序是否给出了预期的输出。

*   这种方法被称为黑盒，因为测试人员不知道软件程序。软件程序就像一个黑匣子；测试人员看不到的内部。

**黑盒测试技术**

以下是一些可用于设计黑盒测试的技术：

*   **等价划分**

等效分区是一种软件测试设计技术，涉及将输入值划分为有效和无效分区，并从每个分区中选择代表值作为测试数据。

*   **边界值分析**

边界值分析是一种软件测试设计技术，涉及确定输入值的边界并选择边界处和边界内/外的值作为测试数据。

*   **基于图形的测试方法**

每个应用程序都是由一些对象构建的。识别所有此类对象并准备图表。从这个对象图中识别出每个对象关系，并相应地编写测试用例以发现错误。

*   **错误猜测**

这纯粹是基于以前的经验和测试人员的判断。错误猜测是猜测哪里可以隐藏错误的艺术。对于这种技术，没有特定的工具，编写覆盖所有应用程序路径的测试用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-05T11:59:17.823

## *黑盒测试：*

*   将程序视为黑盒的测试方法。
*   仅基于需求分析[规范、用户文档等]的测试

## 也称为

1.  功能测试（测试所有功能）

2.  数据驱动测试（不同数据集的相同操作）

3.  I/O 驱动测试

**黑盒测试适用于所有级别的测试（例如单元、组件和系统）——在集成、系统和验收测试期间进行。**

## 测试用例设计方法：

常用方法：

1.  *等价划分：*是将输入域划分为有效/无效类的过程，对于有效的输入类，进行等价划分，以减少测试用例。

2.  *边界值分析：*这是一个检查边界输入的过程，一个小于边界，一个大于边界。

3.  *错误猜测：*是一种基于直觉和经验的特殊方法，用于识别可能暴露错误的测试。

参考：[http ://en.wikipedia.org/wiki/Exploratory_testing](http://en.wikipedia.org/wiki/Exploratory_testing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:34:58.483

黑盒测试是一种**基于规范的**测试。有多种黑盒测试技术，例如： 1\. 等价分区 2\. 边界值分析 3\. 决策表 4\. 状态转换 5\. 用例测试

**黑盒测试技术**是一种**动态测试**技术。在这种类型的 od 测试技术中，测试人员不了解代码。他或她在输入和输出的基础上进行测试。在这种类型的测试中包括功能性和非功能性测试。

# aem - 在 Adob e AEM 中，parsys 组件如何将样式注入设计 css 文件？

> ID：15556282
> 
> 赞同：8
> 
> 时间：2013-03-21T19:20:13.980
> 
> 标签：aem

在 Adob​​e AEM（以前称为 CQ5）中，基础组件 parsys 的 design_dialog 允许用户设置“单元格填充”。在文本字段中输入的任何值都将显示在设计 css 中。

例如：

鉴于当前页面正在使用 /etc/designs/my-design，页面输出将包含对 /etc/designs/my-design.css 样式表虚拟路径的引用。

如果用户将 parsys 单元格填充配置为 30px，则 my-design.css 文件将包含以下内容：

```
.page_full .par div.section {
  padding: 30px;
} 
```

字符串“30px”存储在名为 div.padding 的 jcr:content/page/par/section 属性中，但是，我无法弄清楚 parsys.jsp 如何将其注入 my-design.css。

**编辑：** 要清楚，`currentDesign.writeCssIncludes(pageContext);`基础页面 headlibs.jsp 中的调用是设置设计 css 的代码，包括如下：

```
<link href="/etc/designs/my-design/static.css" rel="stylesheet" type="text/css"/>
<link href="/etc/designs/my-design.css" rel="stylesheet" type="text/css"/> 
```

但是，尚不清楚如何将您自己的 CSS 包含在/etc/designs/my-design.css 请求的*响应正文中。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T23:55:03.210

parsys 并没有真正*注入*样式，但是当您更改 parsys 组件的设计参数时，它们会存储设计页面，并且当设计类将其呈现为 css 并且输出包含这些更新时。

## 如何呈现设计 CSS

`/etc/designs/my-design`如您所见，设计信息存储在 中。此页面的此组件支持包含的信息的 css 再现。

您可以使用产品中包含的 CQ 开发工具跟踪再现的来源...

如果您在 crx/de 或 crx/explorer 中查看您的设计页面，您会注意到它的 sling:resourceType 为`wcm/core/components/designer`.

这将由以下 java 类呈现`/libs/wcm/core/components/designer/designer.css.java`。您也可以在 crx/de 中查看此文件。我不确定该文件中的许可证是否允许我在此处发布一个片段，但您应该能够自己轻松找到它。

该类获取页面资源并将对象调整为`com.day.cq.wcm.api.designer.Design`实例。

查看 Web 控制台中的依赖项查找器，Design 类由 cq-wcm-api 包提供。

```
<dependency>
  <groupId>com.day.cq.wcm</groupId>
  <artifactId>cq-wcm-api</artifactId>
  <version>5.5.0</version>
  <scope>provided</scope>
</dependency> 
```

这是由 jar: 提供的`/libs/wcm/core/install/cq-wcm-api-5.5.0.jar`，它与 CQ 捆绑在一起。

## 自定义设计 CSS

**查看您要实现的目标......** 您可以自定义设计页面的内容（这通常是通过向您正在使用的组件添加设计对话框）添加与该组件关联的任何属性/css 属性。

例如，请查看 geometrixx 设计中的徽标组件 ( `/etc/designs/geometrixx/jcr:content/contentpage/logo`)。这已经有一个`div img.margin`属性可以转换为

```
.contentpage div.logo img {
  margin: 1px;
} 
```

在输出 css ( `/etc/designs/geometrixx.css?cacheKiller=xyz`) 中。

向该节点添加一个名为 的属性`div img.border`将输出 css 为：`5px solid red`

```
.contentpage div.logo img {
  margin: 1px;
  border: 5px solid red;
} 
```

考虑到您的示例，您的设计内容节点`/etc/designs/my-design`应如下所示：

```
+jcr:content
  + page_full
    + par
      + section
        - div .margin = 30px 
```

或者在存储库 XML 格式中，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:primaryType="cq:Page">
    <jcr:content
        cq:lastModified="{Date}2013-01-13T17:22:51.339+01:00"
        cq:lastModifiedBy="admin"
        cq:template="/libs/wcm/core/templates/designpage"
        jcr:primaryType="cq:PageContent"
        jcr:title="design"
        sling:resourceType="wcm/core/components/designer">
        <page_full jcr:primaryType="nt:unstructured">
            <par jcr:primaryType="nt:unstructured">
                <section
                    jcr:primaryType="nt:unstructured"
                    div_x0020_.margin="30px"/>
            </par>
        </page_full>
    </jcr:content>
</jcr:root> 
```

设计对话框（应该用于自定义设计内容）在[开发组件](http://dev.day.com/docs/en/cq/current/developing/components.html)页面上有一定程度的描述。您可以在以下位置找到上述徽标组件的设计对话框（例如）`/libs/foundation/components/logo/design_dialog.html`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:44:25.807

CSS 中的这种更改是在 parsys 中使用 Class [IncludeOptions 完成](http://dev.day.com/docs/en/cq/5-5/javadoc/com/day/cq/wcm/api/components/IncludeOptions.html)的。如果您查看基础组件中的 parsys.jsp，您会遇到此类的用法。IncludeOptions 类的 getCssClassNames() 方法返回一组可修改的 css 类名称，以添加到 div 标记中。因此，每当为 parsys 编写 section 字段时，它都会包含在动态添加到组件的 CSS 中，然后资源会包含在页面中。

# visual-studio-2010 - 在单步执行每个语句时在 Visual Studio 中编辑汇编语言代码

> ID：15556286
> 
> 赞同：2
> 
> 时间：2013-03-21T19:20:26.567
> 
> 标签：visual-studio-2010, assembly, x86, livecoding

在 Visual Studio 中，是否可以在单步执行每个语句时编辑汇编语言代码（以便在程序运行时修改程序中的语句？）在程序运行时修改程序中的语句会很有用（用于调试目的），但我不确定这是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:48:46.130

您可以修改源代码，但在调试会话期间它不会被重新组装以生成新的二进制文件。调试器会告诉你“源代码不再匹配”，但你仍然可以单步执行。您的显示可能令人困惑，因为源代码不再与目标代码匹配：-} 我经常在说明中或在空白行中添加注释，这让我感到不满，但您仍然可以单步执行并查看正确的源代码在这种特殊情况下的行。

我认为您可以手动修改包含要修补的指令的内存。我从来没有费心去做这件事；在我所在的位置设置断点，重新组装，然后运行到断点更容易。

你可以很容易地修改所有的寄存器和数据存储器（实际上你必须用它来修改代码存储器，我想！）。

一个非常有用的事情是“设置下一条语句”，将 PC 设置回代码中较早的位置；如果没有更改寄存器和内存，您通常可以前进到故障点。（将光标放在源代码或反汇编窗口中，单击一行，然后右键单击“设置下一条语句”）

# javascript - 用于提取数字和字母的 JavaScript 正则表达式

> ID：15556293
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:20:55.213
> 
> 标签：javascript, regex

我正在做一些 JavaScript 正则表达式组合。我有这样的文字。

```
city, state postal code 
```

我想要将仅包含字母（状态）的文本部分分开的正则表达式代码，然后在其后面加上逗号。该文本会将可以包含字母和数字的邮政编码与包含字母和数字或仅包含数字的州分开。

是否有正则表达式解决方案，或者我可以使用其他内置 JS 的东西吗？

编辑：

我使用了这个正则表达式：

```
/\d{6}/ 
```

但这只会得到美国邮政编码，我需要全世界。

```
Newmanstown, Pennsylvania 17073
morris, Alabama 35116
London , England  EC2R 8AH 
```

最后一个取自谷歌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:07:39.430

在[这个问题](https://stackoverflow.com/questions/578406/what-is-the-ultimate-postal-code-and-zip-regex)中，您会找到一些国家/地区的模式。但是，要建立一个完全可靠的系统来验证所有国家的邮政编码将是非常困难的。

# android - Android：在一个活动的操作栏上添加样式

> ID：15556294
> 
> 赞同：5
> 
> 时间：2013-03-21T19:21:01.970
> 
> 标签：android, android-layout, android-activity, styles, android-actionbar

我想从 styles.xml 添加样式

```
<style name="BlueActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@color/blue</item>
    <item name="android:textColor">#FFFFFF</item>
</style> 
```

到我的操作栏，但只是在 Activity BlueActivity 上（它仍然是空白的）。怎么做？我被困住了:'(

**编辑：** 为什么要添加

```
android:actionBarStyle="@style/BlueActionBar" 
```

清单中的 BlueActivity 不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T19:29:44.877

主题.xml：

```
<style name="Theme.Project.Activity1" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.Project.Activity1.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Project.Activity1.ActionBar</item>
</style> 
```

AndroidManifest.xml：

```
<activity android:name="com.example.Activity1"
          android:theme="@style/Theme.Project.Activity1"
/> 
```

# java - 如何转换类型中的类？

> ID：15556296
> 
> 赞同：1
> 
> 时间：2013-03-21T19:21:10.030
> 
> 标签：java, generics

我的 android 应用程序中有这段代码：

```
String objclassname = getIntent().getExtras().getString("ObjClass");

Class<?> ObjClass = Class.forName(objclassname);

dbListView.setAdapter(new DbAdapter<ObjClass>(getApplicationContext(),ds,campos)); 
```

但它给出了错误，因为 ObjClass 不是类型。和

```
String objclassname = getIntent().getExtras().getString("ObjClass");

Class<?> ObjClass = Class.forName(objclassname);

dbListView.setAdapter(new DbAdapter<ObjClass.getClass()>(getApplicationContext(),ds,campos)); 
```

也给出错误。

而且我不能使用泛型，因为它：[如何将泛型类作为参数传递给 Intent 构造函数](https://stackoverflow.com/questions/15554874/how-can-i-pass-a-generic-class-as-param-to-intent-constructor)

如何转换类型中的类？

ps.：编辑得更清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:48:08.070

泛型是一个纯粹的编译时实用程序，仅用于编译时类型检查。泛型不会影响代码在运行时的作用。`ObjClass`是一个变量，其值仅在运行时才知道。因此，它对泛型没有用，因为它在编译时不可用。所以泛型对你没有用。

由于您不能使用泛型来帮助进行类型检查，根据您的要求（我不知道这些`getApplicationContext(),ds,campos`是什么），您可以选择任意类型参数：

```
new DbAdapter<Object>(getApplicationContext(),ds,campos) 
```

（或在 Java 7 中，`new DbAdapter<>(getApplicationContext(),ds,campos)`）

或使用原始类型（不推荐）：

```
new DbAdapter(getApplicationContext(),ds,campos) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:35:41.273

你可以试试这样的

```
String objclassname = getIntent().getExtras().getString("ObjClass");

Class<T> ObjClass = (Class<T>) Class.forName(objclassname);

dbListView.setAdapter(new DbAdapter<T>(getApplicationContext(),ds,campos)); 
```

但您需要参数化方法，例如

```
public <T> void doSomething (String className) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T20:09:35.257

这应该适合你

```
Class myclass = Class.forName("package.classname");
Object o = myclass.newInstance(); 
```

是的，这次运行，但正如@jahroy 所说，这不是我们的问题。

# python - 为 Hangman 选择随机字母

> ID：15556298
> 
> 赞同：0
> 
> 时间：2013-03-21T19:21:12.073
> 
> 标签：python

```
flink = open("C:/python27/2of12inf.txt", "rU") 
words = [ ]            
for eachline in flink :      
    words += [eachline.strip()]
flink.close()                
print "%d words read" % len(words)
return words 
```

如何从此列表中选择 6 个随机字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:24:08.357

我能想到的最简单的方法是随机化整个列表并根据需要获取尽可能多的元素：

```
>>> words = "one two three four five six seven eight nine ten".split()
>>> import random
>>> random.shuffle(words)
>>> words[:6]
['two', 'five', 'six', 'seven', 'four', 'one']
>>> random.shuffle(words)
>>> words[:6]
['five', 'seven', 'nine', 'three', 'four', 'eight'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:20:36.510

random.sample 更干净一些

```
>>>words = "one two three four five six seven eight nine ten".split()

>>>import random

>>>random.sample(words, 6)
['six', 'seven', 'eight', 'nine', 'three', 'ten']

>>>random.sample(words, 6)
['three', 'five', 'four', 'six', 'one', 'ten']

>>>random.sample(words, 6)
['ten', 'five', 'two', 'nine', 'seven', 'eight'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T17:28:09.900

此函数从传递的字符串列表中返回一个随机字符串。

```
 def getRandomWord(wordList):
     wordIndex = random.randint(0, len(wordList) - 1)
     return wordList[wordIndex] 
```

这个函数使用上面的 def 得到一个随机词。

```
 secretword = Randomword(hangmanwords) 
```

# python - Python写为文件，未知格式

> ID：15556302
> 
> 赞同：1
> 
> 时间：2013-03-21T19:21:25.160
> 
> 标签：python, file, output

所以这是一个用python打开的文件的一小段。但我不确定这是哪种格式。看起来不像二进制。如何将其写回文件中？

```
hDuwHkAbG9hZGVyX21jAEAAiQYJHgBpAEAQAHBAAIkGCR4AaQBAEACsQACJBgkeAGkAQBAA5EAAiQYJHgBpAEAQARxAAIkGCR4AaQBAEAFUQACJBgkeAGkAQBABkEAAiQYJHgBpAEAQAchAAIkGCR4AaQBAEAIAQACJBgkeAGkAQBACOEAAiQYJHgBpAEAQAnBAAIkGCR4AaQBAEAKsQACJBgkeAGkAQ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:30:19.000

它是某种[base-64](http://en.wikipedia.org/wiki/Base64)编码的二进制文件的片段。不幸的是，它没有在字节边界处被剪切。但是，当我在前面插入一个字母时，解码后的版本如下所示：

```
ÆîÀy�loader_mc�@�   �i�@�p@�    �i�@�¬@�    �i�@�ä@�    �i�@@�  �i�@T@� �i�@@�  �i�@È@� �i�@�@� �i�@8@� �i�@p@� �i�@¬@� �i� 
```

你可以在那里看到一些清晰的、有意义的 ASCII。但是，二进制数据所代表的内容是任何人的猜测。

如果只需要将其解码为上述二进制格式，请使用[`base64`](http://docs.python.org/2/library/base64.html)模块。

# python - 嵌套列表比较

> ID：15556304
> 
> 赞同：0
> 
> 时间：2013-03-21T19:21:28.490
> 
> 标签：python, list, nested, list-comprehension

Python 菜鸟在这里，所以请多多包涵！我有一个看起来像这样的列表：

```
bookList = [("Wuthering Heights", "fred"), ("Everville", "fred"), ("Wuthering Heights", "dan")] 
```

我要做的是编写一个函数，查看每个嵌套列表并查看谁与谁共享书籍，这取决于谁登录。例如，如果 dan 已登录，系统会说“fred also has李子”。

我有一本字典，将用户名设置为键，密码设置为值。

当它们涉及任何嵌套时，我在列表理解方面有点挣扎，我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:45:07.973

我不认为你现有的数据结构真的很适合这个。我要做的是将它预处理成一个字典，其键是用户名，值是书籍集。然后你可以做一个循环或列表理解来比较登录用户和所有其他用户，看看是否有任何共同点。所以：

```
from collections import defaultdict
bookdict = defaultdict(set)
for book, name in bookList:
    bookdict[name].add(book)
logged_in_user = 'fred'
for person, books in bookdict.items():
    if person == logged_in_user:
        continue
    common = books.intersection(bookdict[logged_in_user])
    if common:
        print '%s also has %s' % (person, ', '.join(common)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:19:34.330

```
def common_books(user):
    user_books = {b for b, u in bookList if u == user}
    for b, u in bookList:
        if b in user_books and u != user:
            print '{0} also has {1}'.format(u,b) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T19:25:04.707

如果你想得到弗雷德在列表中的书

```
filter(lambda x: x[1] == "fred", bookList) 
```

根据 Bakuriu 的评论的另一个版本。

```
class Session:
    def __init__(self):
        self.books = ["Wuthering Heights", "Everville"]
        self.username = "fred"

bookList = [("Wuthering Heights", "fred"), ("Everville", "fred"), ("Wuthering Heights", "dan")]

if __name__ == "__main__":

    session = Session()

    for book in bookList:
        if book[1] != session.username and book[0] in session.books:
            print "{} also has {}".format(book[1], book[0]) 
```

# ruby-on-rails - 我无法从部分内部退出

> ID：15556306
> 
> 赞同：0
> 
> 时间：2013-03-21T19:21:53.273
> 
> 标签：ruby-on-rails, ruby, devise

我正在使用设计，我正在努力从部分内部注销。

```
<%= link_to "Bye", destroy_user_session_path, :method => :delete %> 
```

这就是代码。我在主页上有完全相同的代码，它可以工作。

我收到此错误：

```
No route matches [GET] "/users/sign_out" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:44:58.143

我假设这不是部分问题。如果仔细观察，您正在设置`method => delete`，但它调用的是`GET`方法而不是`DELETE`方法，并且该`GET`方法不存在。

如果我没记错的话，你需要在你的布局中有这个。

```
<%= javascript_include_tag 'application' %> 
```

# ruby-on-rails - 在 Heroku 上运行迁移时，我得到 PG::Error: ERROR: relationship "member1_id" does not exist

> ID：15556311
> 
> 赞同：0
> 
> 时间：2013-03-21T19:22:02.150
> 
> 标签：ruby-on-rails, postgresql, foreigner

在本地，我的迁移很好（尽管我使用的是 SQLite。将在开发时尽快切换到 postgresql）。

在 Heroku 上重置数据库后

```
heroku pg:reset DATABASE 
```

我跑了

```
heroku run rake db:migrate 
```

但是迁移后出现以下错误：

```
==  AddForeignKeysToCollaborations: migrating =================================
-- change_table(:collaborations)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  relation "member1_id" does not exist
: ALTER TABLE "collaborations" ADD CONSTRAINT "collaborations_member1_id_id_fk" FOREIGN KEY ("member1_id_id") REFERENCES "member1_id"(id) ON DELETE CASCADE 
```

这是迁移：

```
class AddForeignKeysToCollaborations < ActiveRecord::Migration
  def change
    change_table :collaborations do |t|
        t.foreign_key :member1_id, dependent: :delete
        t.foreign_key :member2_id, dependent: :delete
        end
  end
end 
```

以前的 Collaborations 迁移是

```
class CreateCollaborations < ActiveRecord::Migration
  def change
    create_table :collaborations do |t|
      t.integer :user_id
      t.integer :collaborator_id

      t.timestamps
    end
    add_index :collaborations, :collaborator_id
    add_index :collaborations, [:user_id, :collaborator_id], unique: true
  end
end 
```

和

```
class UpdateCollaborations < ActiveRecord::Migration
  def change
    change_table :collaborations do |t|
      t.rename :user_id, :member1_id
      t.rename :collaborator_id, :member2_id
      t.string :status
    end
    add_index :collaborations,:member1_id
    add_index :collaborations,:member2_id
  end
end 
```

以该顺序运行。为什么 Heroku 会出现这个错误？具体来说，看起来 PG 正在向“member1_id”添加不必要的“_id”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:31:21.440

你用错误的参数调用[外国人的方法。](https://github.com/matthuhiggins/foreigner)第一个参数是引用的表名而不是引用的列名。而且由于您的列名与表名不匹配，因此您还需要`:column`选项。像这样的东西：

```
t.foreign_key :users, :column => :member1_id, :dependent => :delete 
```

假设这`:users`是您的`:member1_id`和`:member2_id`列应该指向的表名。

错误信息：

> 关系“member1_id”不存在

告诉你 PostgreSQL 正在寻找一个名为`member1_id`但找不到的表。

# vb.net - 自定义属性视觉工作室 2012

> ID：15556312
> 
> 赞同：1
> 
> 时间：2013-03-21T19:22:04.303
> 
> 标签：vb.net, visual-studio-2012

我正在尝试使用 Visual Studio 2012 在 vb.net 中创建自定义属性，但我在设计时和运行时设置自定义属性时遇到问题。这不是 Visual Studio 2010 的问题。这似乎是一个错误，但也许我忘记打开或关闭某些选项，或者我忘记了代码中的某些内容？

```
Public Class MyCustomButton
  Inherits Button

  Private m_MyBackgroundColor As Color
  Public Property MyBackgroundColor As Color
    Get
      Return m_MyBackgroundColor
    End Get
    Set(value As Color)
      value = m_MyBackgroundColor
      Me.BackColor = m_MyBackgroundColor
    End Set
  End Property
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:26:41.563

将设置器更改为此：

```
Set(value As Color)
  m_MyBackgroundColor = value 'swapped value and m_MyBackgroundColor
  Me.BackColor = m_MyBackgroundColor
End Set 
```

# javascript - 向 HTML 按钮或链接添加号码（如智能手机上的未接电话/短信）

> ID：15556313
> 
> 赞同：-2
> 
> 时间：2013-03-21T19:22:14.073
> 
> 标签：javascript, html, hyperlink, notifications, icons

我想要做的是有一个可点击的图像，上面有一个数字（通知数量）。

一些常见的例子是当你错过通知时Facebook的地球仪或当你错过电话时iPhone上的电话图标。

如果可能的话，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:24:24.460

你所要做的就是在同一个地方有一个图像和一个标签，但是保存数字的标签将有一个更大的 z-index 在顶部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:30:19.133

将标签/链接放在 div 中。并为带有数字的气泡插入另一个 div，为其设置样式。使其位置绝对，但不要设置左侧和顶部。使用 marginLeft 和 marginTop 来定位。z-index 可用于对抗@nathan 提到的重叠情况

# c++ - 每秒轮询一次 QT 中的变量

> ID：15556315
> 
> 赞同：4
> 
> 时间：2013-03-21T19:22:50.590
> 
> 标签：c++, multithreading, qt4

我正在开发一个多线程图像处理应用程序。我在基于 QT 的 GUI 上添加了一些参数，目的是更改一些我必须进行大量试验的参数，而不是每次启动程序或必须输入它们时从设置文件中加载它们。我也想要GUI 显示每个线程的一些基本信息，以便我可以监控它们。我目前有在设置的图像处理线程之间传递信息的线程安全方法，我想要一种大约每秒从 QT 线程轮询一些信息的方法，以便我可以在 UI 上显示一些反馈。

我的要求是我不想将特定于 QT 的代码合并到图像处理线程中来更新 UI。我宁愿让 UI 线程轮询我当前用来在线程之间传递信息的方法。我希望我的代码库的图像处理部分能够独立运行，而不必依赖 QT 来运行。我将如何轮询全局可用的函数来更新 QT UI？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T19:54:57.683

[QTimer](http://qt-project.org/doc/qt-5.0/qtcore/qtimer.html#details)是你的朋友。

```
QTimer *timer = new QTimer(this);
connect(timer, SIGNAL(timeout()), &someQObjectDerivedClassInstance, SLOT(doYourThing()));
timer->start(1000); 
```

或者在 Qt5 和 C++11 中，您可以直接连接到 lambda。尽管使用插槽将确保您获得排队的连接，以防您连接到另一个线程中的对象。

# ruby-on-rails - 通过rails中的rabbitmq在不同的线程中独立的发布者/订阅者

> ID：15556316
> 
> 赞同：2
> 
> 时间：2013-03-21T19:23:07.133
> 
> 标签：ruby-on-rails, asynchronous, rabbitmq, message-queue, eventmachine

我需要通过 rails 中的 rabbitmq 实现独立的发布者/订阅者（计划使用`amqp` [gem](https://github.com/ruby-amqp/amqp/)），但我需要发布者与一个线程一起工作，订阅者在另一个线程中工作，并且它们彼此不依赖。

我正在使用当前`amqp gem`，但它需要在单个`eventmachine`代码块内发送和计算消息。所以我的问题是如何避免它并使其完全独立？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:41:35.830

看起来可能的变体是在不同的**进程**（不是线程）中运行订阅者和消费者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T06:34:43.997

您可以在此部分使用 DDS。不同的进程/应用程序可以使用数据分发服务进行通信。 [对象管理组/检查此链接](http://portals.omg.org/dds/)

# android - 微调器标签大小

> ID：15556321
> 
> 赞同：1
> 
> 时间：2013-03-21T19:23:33.277
> 
> 标签：android, android-layout, spinner, android-spinner

我的应用程序上有微调器，我想让每行之间的空间更大。我已经尝试`android:TextSize:"30sp"`过没有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:54:37.227

在为您的 Spinner 创建适配器时，提供自定义布局而不是预定义的布局

在文件夹中创建名为`spinner_row.xml`（您选择的任何名称）的xml`res/layout`

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
 android:id="@+id/cust_view"  
    android:layout_width="match_parent" 
    android:textColor="@color/black"
    android:textSize="32sp"
    android:layout_height="36dp" 
    android:gravity="left|center_vertical"/> 
```

在这里，您可以通过修改此设置来更改微调器中元素的边距和填充来更改颜色文本大小和宽度、高度和间距`textview`

创建适配器时像这样使用它

```
 ArrayAdapter<String> adapter=new ArrayAdapter<String>(context, R.layout.spinner_row,yourlist); 
```

最后一项任务是例行公事

```
spinner.setAdapter(adapter); 
```

我希望这能帮到您。

* * *

第二种方式，

使用您选择的属性创建这样的样式，例如测试大小，填充等并且您的样式应该有一个父样式`parent="@android:style/Widget.TextView.SpinnerItem"`，如下面的样式所示

```
<style name="spinnerStyleView"  parent="@android:style/Widget.TextView.SpinnerItem">
        <item name="android:background"> @drawable/notetvbg</item>
          <item name="android:textColor">@android:color/darker_gray</item>
    </style> 
```

并使用样式属性将样式应用于您的微调器

```
 style="@style/spinnerStyleView" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:38:07.393

如果您使用 ArrayAdapter 为微调器提供项目，您可能会为下拉视图指定一个资源文件，也许`android.R.layout.simple_spinner_dropdown_item`？

您可以创建自己的下拉资源并将高度设置为您想要的任何内容，然后将其传递给适配器而不是`android.R.layout.simple_spinner_dropdown_item`

# c# - 如何在位图标头中存储 ASCII 信息？

> ID：15556322
> 
> 赞同：2
> 
> 时间：2013-03-21T19:23:46.017
> 
> 标签：c#, metadata, bmp

我看到位图标题中有一个区域可以存储其他信息。因此，如果我用 C# 编写图像，是否可以在标题中添加额外的 ASCII 信息？

```
public void writeToPath(GMapControl form)
{
    if(path == String.Empty || path == null)
        path=Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);

    int width = form.Size.Width;
    int height = form.Size.Height;

    Bitmap bm = new Bitmap(width, height);
    form.DrawToBitmap(bm, new Rectangle(0, 0, width, height));

    bm.Save("C:\SomePath\blah");

} 
```

![在此处输入图像描述](../Images/f4a75f507e89bf601b603f0e4886fa34.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T16:25:26.987

您可以通过元数据的大小来增加*文件偏移到像素数组*。然后将数据放在像素阵列之前。但是，您需要有自己的 bmp io 例程来写入和检索额外的数据块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:40:01.243

我相信在不深入研究业务的情况下解决此问题的最简单方法`BITMAPINFOHEADER`是再次打开文件并编辑您所追求的特定字节。

这是一些（未经测试的）代码：

```
using (var stream = File.Open(@"C:\SomePath\blah.jpg", FileMode.Open))
{
    var myBytes = new byte[] { /* put up to 4 bytes here */ };

    stream.Position = 6; //there is some space at 0x006 and 0x0008 for your data
    stream.Write(myBytes, 0, myBytes.Length);
} 
```

# javascript - DOM 的字符集与屏幕上显示的不同

> ID：15556324
> 
> 赞同：2
> 
> 时间：2013-03-21T19:23:55.767
> 
> 标签：javascript, html, dom, character-encoding, google-chrome-extension

我面临一个奇怪的问题。html 中的文本有重音符号，例如：

```
<p>é</p> 
```

它在屏幕中正确显示 (é)，但 DOM 实例中的内容不接受重音符号。它显示一个“？” 字符而不是带重音的字符。

就我而言，我正在使用 chrome 扩展程序在 Kindle ( [http://read.amazon.com](http://read.amazon.com) ) 中注入 javascript 代码，但我认为这并不重要，因为我只使用 chrome 控制台就可以看到问题。

html结构的简化版本：

```
<html>
    <head>
        ...
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        ...
    </head>
    <body>
        ...
        <iframe id="KindleReaderIFrame">
            <html>
                <head>
                    ...
                    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
                    ...
                </head>
                <body>
                    ...
                    <iframe id="column_0_frame_0">
                        <html>
                            <head>
                                <!-- Do not have the Content-Type meta tag -->
                            </head>
                            <body>
                                <!-- Text with accents that I intend to get through DOM -->
                            </bady>
                        </html>
                    </iframe>
                    ...
                </body>
            </html>
        </iframe>
        ...
    </body>
</html> 
```

我想要的文本在“column_0_frame_0”iframe 内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:13:45.067

Going through your code, you have not closed the body tag correctly, see below :

```
<iframe id="column_0_frame_0">
    <html>
       <head>
        <!-- Do not have the Content-Type meta tag -->
        </head>
        <body>
            <!-- Text with accents that I intend to get through DOM ->
        </bady>
    </html>
</iframe> 
```

Secondly, if you are loading your contents in iFrame or through AJAX, its not enough to set the character set in meta tag, sometimes it depends on the IDE which you used to create your code.

To check:

1.  Open the same code in Notepad++
2.  Save the contents using charset UTF-8 (default ANSI).
3.  Run code on your local server without opening the file in any other IDE.

Now you will be able to render the accents correctly in DOM as well as screen.

# android - 如何在特定时间后停止计时器。？

> ID：15556325
> 
> 赞同：1
> 
> 时间：2013-03-21T19:24:07.107
> 
> 标签：android

```
 cmtr.setBase(SystemClock.elapsedRealtime());

    timetest = SystemClock.elapsedRealtime();
    Log.d("SETTIME: ", ""+timetest);
    cmtr.start();

    eltime = SystemClock.elapsedRealtime();
    Log.d("ELapsed: ", ""+eltime);
    if(eltime - timetest < 5000)
        cmtr.stop(); 
```

注意：我想在特定时间过去后停止我的计时器时间。就像 10 秒后我想停止计时器。怎么可能。有谁知道。？所以请任何人帮助我。我没有从互联网上得到任何帮助。我在 android 中很新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-15T10:17:24.817

使用 Chronometer.OnChronometerTickListener() 这里是代码

```
final Chronometer myChronometer = (Chronometer) getActivity().findViewById(
            R.id.chronometer1);

    myChronometer.start();
    myChronometer
            .setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {

                @Override
                public void onChronometerTick(Chronometer chronometer) {
                    if( chronometer.getText().toString().equalsIgnoreCase("00:50"))
                        Toast.makeText(context,
                            "time reached", Toast.LENGTH_SHORT).show();

                }
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:39:56.460

您应该实现`Chronometer.OnChronometerTickListener`并查看此方法中经过的时间。

除此之外，您还可以使用`CountDownTimer`该类。

有关如何使用它的简单示例，请查看本教程： http: [//www.coderzheaven.com/2011/08/24/simple-countdown-timer-in-android/](http://www.coderzheaven.com/2011/08/24/simple-countdown-timer-in-android/)

这真的很容易实现。

# c# - C#检查给定单词以回答单词

> ID：15556326
> 
> 赞同：1
> 
> 时间：2013-03-21T19:24:07.203
> 
> 标签：c#, spell-checking

我正在为 C# 制作一个简单的拼写检查器，我想尝试将给定的答案与随机选择的单词进行比较。

我想将第一个字母与答案中给出的所有字母进行比较，这样我就可以判断它是否正确，是否存在字母交换、删除或添加的字母。我最终希望能够判断是否只有一个字母是错误的，才能看到使用了替换。

例如，正确回答你好：

```
 checking first letter ~H 
    h e l l o
    1 0 0 0 0

    h h e l l o
    1 1 0 0 0 0

    e l l o 
    0 0 0 0 
```

然后检查第二个字母。

当涉及到 C# 时，我完全不知道。

我试过了

```
int CheckErrors(string Answer, string Guess)
        {
            if (Answer == Guess)
            {
                return 1;
            }

            if (Answer == null || Guess == null)
            {
                return -1;
            }

            for (int i = 0; i <= Answer.Length; i++)
            {

                if (Guess[i] != Answer[i])
                {
                    count++;

                    //substitution = -4
                    //deletion = -5
                    //transposition = -6
                    //insertion = -7
                }
                return count;
            }
            return -9;
        } 
```

但我不能再进一步了。

更新：

通过进一步的研究，我想我想做的是：

```
STRING answer = answer_given
STRING input = correct_answer

int check = 0;

FOR (int i = 0; i < input.Length; i++)
{
   FOR (int ii = 0; ii < answer.Length; ii++)
   {
     if (input[i] == answer[i])
     {
        int check++;
     }
   }
} 
```

显然我知道这会不断增加检查，但我猜不出还有什么办法。

另一个更新！

我可以用这个-

```
int CheckErrors(string Answer, string Guess)
        {
            int[,] d = new int[Answer.Length + 1, Guess.Length + 1];
            for (int i = 0; i <= Answer.Length; i++)
                d[i, 0] = i;
            for (int j = 0; j <= Guess.Length; j++)
                d[0, j] = j;
            for (int j = 1; j <= Guess.Length; j++)
                for (int i = 1; i <= Answer.Length; i++)
                    if (Answer[i - 1] == Guess[j - 1])
                        d[i, j] = d[i - 1, j - 1];  //no operation
                    else
                        d[i, j] = Math.Min(Math.Min(
                            d[i - 1, j] + 1,    //a deletion

                            d[i, j - 1] + 1),   //an insertion

                            d[i - 1, j - 1] + 1 //a substitution

                            );
            return d[Answer.Length, Guess.Length];
        } 
```

但是我需要一种方法来计算每个错误的使用次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:57:09.367

[您可以通过查看Wikipedia](http://en.wikipedia.org/wiki/Approximate_string_matching)和[StackOverflow](https://stackoverflow.com/questions/4212634/approximate-string-matching)中的 Approximate String Matching 获得灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:00:36.453

您的功能有几个问题：

*   您正在尝试使用单个返回值来处理该值的含义不一致的多个场景。不建议函数同时返回状态（匹配、一个或两个值 null、不匹配等）和计数器。
*   如果您打算使用数字来表示返回状态，请使用`enum`以使其更具可读性。
*   您的`for`循环总是在一次迭代后终止，因为它每次都命中 return 语句。您的 return 语句需要在`for`循环之后移动。
*   `if (Guess[i] != Answer[i])`如果 i 大于`Guess`.
*   不清楚*count*应该代表什么，也没有在函数中定义。

您需要更好地定义您的功能应该做什么。如果答案是“你好”并且猜测是“你好”，你要返回什么？不匹配的字母数 (1)？代表错误的代码（插入）？错误在哪里？如果你需要不止一个这些东西，那么你需要一个单独的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:49:55.430

您是否考虑过尝试 string.Compare(...)？

[http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

# amazon-mws - 亚马逊与 mws 的库存更新问题

> ID：15556332
> 
> 赞同：1
> 
> 时间：2013-03-21T19:24:43.893
> 
> 标签：amazon-mws

我们正在使用以下详细信息来更新亚马逊产品的数量。使用便签本，选项 Feeds->SubmitFeed

设置所需参数并传递以下 XML

```
 <?xml version="1.0" encoding="utf-8" ?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
<Header>
<DocumentVersion>1.01</DocumentVersion>
<MerchantIdentifier>$merchantID</MerchantIdentifier>
</Header>
<MessageType>Inventory</MessageType>
<Message>
<MessageID>1</MessageID>
<OperationType>Update</OperationType>
<Inventory>
<SKU>$SKU</SKU>
<Quantity>8</Quantity>
</Inventory>
</Message>
</AmazonEnvelope> 
```

提要类型：_POST_INVENTORY_AVAILABILITY_DATA_ 我们收到了相同的响应 - submitid。我知道更新需要一些时间。但我等了又等了.. 4 至少 15 小时（不是几分钟），但它仍在进行中，数量从未更新。

我收到以下回复

```
<?xml version="1.0"?>
<SubmitFeedResponse xmlns="http://mws.amazonaws.com/doc/2009-01-01/">
<SubmitFeedResult>
  <FeedSubmissionInfo>
    <FeedSubmissionId>6791310806</FeedSubmissionId>
    <FeedType>_POST_INVENTORY_AVAILABILITY_DATA_</FeedType>
    <SubmittedDate>2013-03-21T19:48:37+00:00</SubmittedDate>
    <FeedProcessingStatus>_SUBMITTED_</FeedProcessingStatus>
  </FeedSubmissionInfo>
</SubmitFeedResult>
<ResponseMetadata>
  <RequestId>fd07bf18-4f6a-4786-bdf9-9d4db50956d0</RequestId>
</ResponseMetadata>
</SubmitFeedResponse> 
```

并在检查提要状态时获得以下响应

```
<?xml version="1.0"?>
<ErrorResponse xmlns="http://mws.amazonaws.com/doc/2009-01-01/">
<Error>
  <Type>Sender</Type>
  <Code>FeedProcessingResultNotReady</Code>
  <Message>Feed Submission Result is not ready for Feed Submission Id: 6791310806</Message>
  <Detail/>
</Error>
<RequestID>2c86128d-b53a-4fc3-80d1-6b41b53a8977</RequestID>
</ErrorResponse> 
```

任何人都可以指导我..我哪里出错了..在这里？或者是否有更好的方法来寻找相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:15:02.220

它所花费的时间似乎*不正常*。提交的提要通常会`_IN_PROGRESS_`在几分钟内切换到，然后再过几分钟才能完成，此时状态切换为`_DONE_`。像您的示例提要这样的短提要需要不到一分钟的时间来处理。

过去，我看到一个提要上传阻止了另一个提要。似乎有时 MWS 不会开始处理一个提要，直到同一用户的前一个提要出现低谷（或就此而言：失败）。请检查您是否有其他请求可能会阻止您的请求 (GetFeedSubmissionList)

除此之外，您从亚马逊 MWS 获得的答案是*完全正常*的。您的提要已被接受并放入处理队列。队列状态设置为`_SUBMITTED_`，只要它没有切换到*DONE*，你就会得到`FeedProcessingResultNotReady`你看到的答案。

# resize - 使用百分比 ColumnConstraints 调整 GridPane 内的矩形大小

> ID：15556334
> 
> 赞同：3
> 
> 时间：2013-03-21T19:24:54.423
> 
> 标签：resize, javafx-2, shape

我有一个*n*列和`GridPane`n*行*，每个单元格中有一个（几乎像棋盘）。我正在尝试使s 扩展以占用每个单元格中的所有可用空间，而不会扩展得太远。尝试了一种方法，但仍然不知道将s 的宽度绑定到什么。**`Rectangle``Rectangle``ColumnConstraints``Rectangle`**

 ****解决方案：**将`Rectangle`宽度和高度绑定到一个`NumberBinding`.

例如，制作一个棋盘：

```
GridPane board = new GridPane();
NumberBinding rectsAreaSize = Bindings.min(board.heightProperty(), board.widthProperty());

for(int i = 0; i < size; ++i)
{
    for(int j = 0; j < size; ++j)
    {
        Rectangle rect;
        if(i % 2 == 0 ^ j % 2 == 0) // ^ is the XOR operator
        {
            rect = new Rectangle(15.0, 15.0, Color.WHITE);
        }
        else
        {
            rect = new Rectangle(15.0, 15.0, Color.BLACK);
        }
        rect.widthProperty().bind(rectsAreaSize.divide(size));
        rect.heightProperty().bind(rectsAreaSize.divide(size));

        board.add(rect, i, j);
        GridPane.setHalignment(rect, HPos.CENTER);
    }
} 
```

参考：

*   [如何在 javafx 中创建动态可调整大小的形状？](https://stackoverflow.com/questions/9887485/how-to-create-dynamically-resizable-shapes-in-javafx)
*   [网格窗格可以自动调整其对象的大小以适合吗？尝试将 max_width 和 max_height 设置为网格并让它调整内容大小。JavaFX](https://stackoverflow.com/questions/9830206/can-a-gridpane-automatically-resize-its-objects-to-fit-trying-to-set-a-max-wid)**

# sql-server-data-tools - 如何在构建服务器上构建 .sqlproj 项目？

> ID：15556339
> 
> 赞同：44
> 
> 时间：2013-03-21T19:25:06.907
> 
> 标签：sql-server-data-tools, build-server

我有很多 .sqlproj 项目需要在我们的构建服务器上构建。我不想在构建服务器上安装所有 Visual Studio，这样我就可以安装 SSDT 来构建这些。如何在没有完整 VS 安装的情况下构建 .sqlproj 项目？

这是我在没有安装 SSDT 的情况下尝试构建时在构建服务器上遇到的原始错误：

```
C:\MyProject\MyProj.sqlproj (4): The imported project "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Tools.Schema.SqlTasks.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-21T22:54:59.767

**答：**微软现在有一个[官方的 NuGet 包](https://www.nuget.org/packages/Microsoft.Data.Tools.Msbuild/)（见[博](https://blogs.msdn.microsoft.com/ssdt/2016/08/22/releasing-ssdt-with-visual-studio-15-preview-4-and-introducing-ssdt-msbuild-nuget-package/)文）。

* * *

**2016 年 8 月之前的旧答案；在 NuGet 包不适合您的情况下提供：**

1.  安装 dacframework.msi ( [x86](http://go.microsoft.com/fwlink/?LinkID=239630&clcid=0x409) | [x64](http://go.microsoft.com/fwlink/?LinkID=239631&clcid=0x409) )
2.  安装 SQLDOM.MSI ( [x86](http://go.microsoft.com/fwlink/?LinkID=239634&clcid=0x409) | [x64](http://go.microsoft.com/fwlink/?LinkID=239635&clcid=0x409) )
3.  安装 SQLLS.MSI ( [x86](http://go.microsoft.com/fwlink/?LinkID=239636&clcid=0x409) | [x64](http://go.microsoft.com/fwlink/?LinkID=239637&clcid=0x409) )
4.  安装 SQLSysClrTypes.msi ( [x86](http://go.microsoft.com/fwlink/?LinkID=239643&clcid=0x409) | [x64](http://go.microsoft.com/fwlink/?LinkID=239644&clcid=0x409) )
5.  安装 SSDTBuildUtilities.msi（来自“管理员安装点”，如此处步骤 3 中的[设置](http://msdn.microsoft.com/en-us/jj650015)）

完毕！

来源：[对 SSDT (*.sqlproj) 项目的 Headless MSBuild 支持](https://web.archive.org/web/20131209161705/http://sqlproj.com/index.php/2012/03/headless-msbuild-support-for-ssdt-sqlproj-projects/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-17T14:19:12.347

Microsoft SQL Server 数据工具：http: [//msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027)

在构建机器上安装工具以解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-29T08:39:44.517

Microsoft SQL Server Data Tools 团队发布了一个名为 Microsoft.Data.Tools.Msbuild 的 NuGet 包，它有助于在构建服务器上构建 SQL 项目。

请参阅：[https ://blogs.msdn.microsoft.com/ssdt/2016/08/22/releasing-ssdt-with-visual-studio-15-preview-4-and-introducing-ssdt-msbuild-nuget-package/](https://blogs.msdn.microsoft.com/ssdt/2016/08/22/releasing-ssdt-with-visual-studio-15-preview-4-and-introducing-ssdt-msbuild-nuget-package/)

NuGet 包：[https ://www.nuget.org/packages/Microsoft.Data.Tools.Msbuild/](https://www.nuget.org/packages/Microsoft.Data.Tools.Msbuild/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-23T13:41:23.370

SSDT v12.0.50730.0 需要预先安装 Visual Studio。我发现最简单的解决方案是安装从 MSDN 订阅者下载中下载的最低限度的 Visual Studio 组件：

*   Visual Studio 2013 隔离
*   Visual Studio 2013 外壳

然后 SSDT 安装正常。

我还使用了上述解决方案的一部分。
* 安装 dacframework.msi * 安装 SQLDOM.MSI * 安装 SQLLS.MSI * 安装 SQLSysClrTypes.msi

我使用 MSBuild 12.0 来执行构建，该构建也可以单独下载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-18T18:19:12.270

我在 Azure DevOps CI/CD 管道上构建 SQL Server 项目时遇到了完全相同的问题。没有任何预构建的构建任务对我有用。

有些答案提到了[NuGet](https://www.nuget.org/packages/Microsoft.Data.Tools.Msbuild)包，但我不确定如何使用它，因为 SQL Server 项目不允许安装 NuGet 包。

我通过避免将 SQL Server 项目添加到解决方案来解决了这个问题。

我通过使用[MSBuild SDK](https://github.com/jmezach/MSBuild.Sdk.SqlProj)`.dacpac`实现了这一点，该 SDK 能够从一组 SQL 脚本生成 SQL Server 数据层应用程序包 ( )。通过将第二个项目添加到解决方案中，我设法继续利用通过 Visual Studio 上的 SQL Server 对象资源管理器将项目链接到实时数据库的优势。[我在这个答案](https://stackoverflow.com/a/61292024/1198379)中给出了关于我的实现的更详细的解释。

# javascript - Javascript可变打印

> ID：15556340
> 
> 赞同：1
> 
> 时间：2013-03-21T19:25:10.647
> 
> 标签：javascript, html

我有 C++ 背景，但对我在 Javascript 中尝试做的事情有一些疑问。我需要创建一个伪类，因为 Javascript 没有它们。我基本上想根据选择的选择打印不同的东西。在这个例子中我只定义了两个“水果”，但我要做的会使用更多。任何帮助将不胜感激。我知道这有一些缺陷，比如 select 没有以任何方式链接到 fruit 函数。

```
<!DOCTYPE html>
<html>
<script>
   function select_fruit(name)
   {
      var fruit_name = name;
   }

   function fruit(name, color, amt)
   {
      this.name = name;
      this.color = color;
      this.amt = amt;
   }

   apple = new fruit("apple", "red", 5);
   orange = new fruit("orange", "orange", 1);

   document.getElementById("name").innerHTML = name;
   document.getElementById("color").innerHTML = color;
   document.getElementById("amt").innerHTML = amt;
</script>

<body>
   <select name="pick_these" onchange="fruit(this.value)">
      <option value="apple">Apple</option>
      <option value="orange">Orange</option>
   </select><br />

   <p>I want *amt *color *fruit</p><!--This should say I want 5 red apple, if it's selected on the dropdown-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:31:30.163

首先，您缺少`<head>`标签。除此之外，您需要将`document.getElementById.....`行移至`select_fruit()`函数，并将`onchange`事件更改为调用`select_fruit`。以下是我将如何做你正在尝试的事情：

HTML：

```
<select id="fruitlist">
    <option value="apple">Apple</option>
    <option value="orange">Orange</option>
</select>
<p id="result"></p> 
```

JS：

```
window.onload = function() { // or just `(function() {` if script is after above HTML
    var fruits = {
        "apple":{
            "color":"red",
            "amt":5
        },
        "orange":{
            "color":"orange",
            "amt":1
        }
    }, result = document.getElementById('result');
    document.getElementById('fruitlist').onchange = function() {
        var selection = this.options[this.selectedIndex].value;
        result.innerHTML = "I want "+fruits[selection].amt+" "
            +fruits[selection].color+" "+selection;
    };
}; // or `})();` if you used `(function() {` at the start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:59:40.887

我将继续同意 cdhowie 关于 125% 的评论。
尝试使用像 Java/C#/C++/ActionScript/etc 这样的 JS 会奏效。
一旦你绕过它一段时间，你就可以勉强完成一些事情，并且它会做一些功能性的事情。

但这真的，真的不是语言应该使用的方式。
如果您对其他语言有技术上的了解，Crockford 的“JavaScript: the Good Parts”是一个很好的入门方法。
如果您对语言的解析方式了解有限/不了解，或者与您的舒适区相比，您真的迷失在 JavaScript 中，那么 Crockford 的书就像一个训练营，适合那些想要一个坚实的起点来掌握低级语言（按原样使用语言，没有库并且最少使用设计模式）。

我会说 Stoyan Stefanov 的“JavaScript 模式”是一个了不起的下一步，因为它完全按照标签上所说的那样做，而且做得很好。

无论如何，这里有很多问题。

首先是您的脚本甚至在它们存在之前就要求元素及其值。
JS/DOM 没有预编译。在大多数情况下，直到您进入客户端/服务器通信，或者您正在定义功能并在其他地方使用它们，您所见即所得，按照您放下它们的顺序。

在这种情况下，您需要一个元素 where `el.id === "name"`。
如果您查看代码中这一行的上方，您会注意到它上方的任何元素都没有`id`.

这里的解决方案是确保您的脚本低于预期目标（或将所有内容包装在函数中，并调用下面的函数，`<select>`以便您知道它存在）。

这将我们带到第二个问题：您的元素没有 ID。

如果您没有 ID，则通过 ID 获取这些元素是行不通的。

```
<select id="my-select-box"></select>

<script>
    var select = document.getElementById("my-select-box");
</script> 
```

如果你把它们反过来，它就行不通了。
如果您缺少一个`.id`属性，它将不起作用。

至于“类”，不要认为它是定义硬类然后创建实例。
有时，这是有用的/必要的。
其他时候，您只需要关心实例。

我的意思是：在 C++ 中，想想你可能想创建一个成熟的类的所有时间，而实际上一个简单的结构可能已经完成了。
那么你真正需要的只是一个实例的结构呢？

现在想象一下给出该结构方法，而不需要做任何其他工作（标题等）。

```
<select id="fruit-list">
    <option value="apples">apple</option>
    <option value="oranges">orange</option>
    <option value="bananas">banana</options>
</select>
<p id="fruit-output"></p>

var Fruit = function (name, colour, starting_amount) {

    var public_interface = {
        name   : name,
        colour : colour,
        amount : starting_amount
    };

    return public_interface;
};

var apples  = Fruit("apple",   "red",   4),
    oranges = Fruit("orange", "orange", 2),
    bananas = Fruit("banana", "yellow", 1);

var fruit_basket = {

    selected  : "",
    output_el : null,
    apples    : apples,
    oranges   : oranges,
    bananas   : bananas,

    add : function (fruit, num) {
        this[fruit].amount += num;
    },

    remove : function (fruit, num) {
        this[fruit].amount -= num;
    },

    print : function () {
        var fruit   = fruit_basket.selected,
            el      = fruit_basket.output_el,
            message = "I want " + fruit.amount
                    + " " + fruit.colour
                    + " " + fruit.name;

        if (fruit.amount !== 1) { message += "s" }

        if (el.hasOwnProperty("textContent")) {
            el.textContent = message;
        } else {
            el.innerHTML = message;
        }
    },

    select : function (el) {
        var index = el.selectedIndex,
            fruit = el.options[index].value;

        fruit_basket.selected = fruit_basket[fruit];
    },

    set_output : function (el) {
        fruit_basket.output_el = el;
    }

};

var select_box = document.getElementById("fruit-list"),
    output_el  = document.getElementById("fruit-output");

fruit_basket.set_output(output_el);
select_box.addEventListener("change", function () {
    fruit_basket.select(this);
    fruit_basket.print();
}); 
```

这不是答案，但考虑一下这比 C++ 或 Java 解决方案要简单得多，***在***这些解决方案中，您必须为上述所有内容构建类。

如果这更高级，也许您会考虑以更明显分离的方式将数据与视图和控件分开。

但同样，这并不意味着您需要巨大的继承层次结构，或大量相对较少的类。
这是一种非常简单的语言，它支持构造/初始化，但您也可以通过在现场发明一个对象来制作“单例”。

如果您打算认真使用该语言，我建议您进行这项研究。

# java - Java Swing JTable以编程方式选择多行

> ID：15556341
> 
> 赞同：6
> 
> 时间：2013-03-21T19:25:14.863
> 
> 标签：java, swing, jtable, row, selection

我有一个包含多行的 JTable，每一行都通过散点图上的 Point 呈现。我要做的是，当在散点图上选择给定点时，我必须将此选择与 JTable 中相应行的选择相关联。

我有一个整数来表示，我必须突出显示哪一行。

我尝试的是：

```
 JTable table = new JTable();
...
...// a bit of code where I have populated the table
...
   table.setRowSelectionInterval(index1,index2); 
```

所以这里的问题是这个方法选择给定范围[index1，index2]中的所有行。我想选择例如行 1,15,28,188 等。

你是怎样做的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T19:27:11.017

要仅选择一行，请将其作为开始和结束索引传递：

```
table.setRowSelectionInterval(18, 18); 
```

或者，如果要选择多个非连续索引：

```
ListSelectionModel model = table.getSelectionModel();
model.clearSelection();
model.addSelectionInterval(1, 1);
model.addSelectionInterval(18, 18);
model.addSelectionInterval(23, 23); 
```

或者，您可能会发现实现自己的子类`ListSelectionModel`并使用它来跟踪表格和散点图上的选择是一种更简洁的解决方案，而不是听散点图并强制表格匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T07:32:41.130

它也可以在不使用 ListSelectionModel 的情况下工作：

```
table.clearSelection();
table.addRowSelectionInterval(1, 1);
table.addRowSelectionInterval(15, 15);
table.addRowSelectionInterval(28, 28);
... 
```

只是不要调用 setRowSelectionInterval，因为它之前总是清除当前选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:31:19.520

没有办法通过一个方法调用来设置随机选择，您需要多个方法来执行这种选择

```
table.setRowSelectionInterval(1, 1);
table.addRowSelectionInterval(15, 15);
table.setRowSelectionInterval(28, 28);
table.addRowSelectionInterval(188 , 188 ); 
```

等等....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-05T23:56:46.403

这是实现此目的的通用方法：

```
public static void setSelectedRows(JTable table, int[] rows)
{
    ListSelectionModel model = table.getSelectionModel();
    model.clearSelection();

    for (int row : rows)
    {
        model.addSelectionInterval(row, row);
    }
} 
```

# sql - 尽管需要'will_paginate/array'，但数组不能与 will_paginate 一起使用？

> ID：15556347
> 
> 赞同：4
> 
> 时间：2013-03-21T19:25:35.687
> 
> 标签：sql, ruby-on-rails, ruby, postgresql, will-paginate

我有一个搜索模型，它构造一个基本上是原始 SQL 的字符串。此字符串通过 find_by_sql 调用运行，并在下面的第 5 行返回给控制器（@search.query <--query 是返回 find_by_sql 的结果的方法）：

```
1  def roster_builder
2    authorize! :access_roster_builder, current_coach
3    @search = Search.new(sport: current_coach.primary_sport, conditions: params[:search])
4
5    @athletes = @search.query.page(params[:page]).per_page(8)
6
7    if params[:refresh]
8      render "athletes_refresh" 
9    else
10     render "athletes" if request.format.js?
11   end
12 end 
```

这将返回一个数组，但我收到此错误：

```
NoMethodError (undefined method `page' for #<Array:0x00000105b7add0>) 
```

所以我发现在哪里插入以下内容可以解决这个问题：

```
require 'will_paginate/array' 
```

我试过把它放在我的控制器中，而 will_paginate.rb 初始化文件无济于事。我什至对 find_by_sql 结果做了 .to_a ——同样的错误。这里到底有什么问题？？我正在使用 will_paginate 版本 3.0.4，所以它是完全最新的。在 github 上，它甚至说要求应该使这项工作正常：[https ://github.com/mislav/will_paginate/wiki/Backwards-incompatibility](https://github.com/mislav/will_paginate/wiki/Backwards-incompatibility)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:37:11.890

看到这篇文章：[https ://github.com/mislav/will_paginate/issues/263](https://github.com/mislav/will_paginate/issues/263)

所以对于你的控制器来说，它看起来像这样

```
def roster_builder
    require 'will_paginate/array'
  authorize! :access_roster_builder, current_coach
  @search = Search.new(sport: current_coach.primary_sport, conditions: params[:search])

  # @athletes = @search.query.page(params[:page]).per_page(8)
    @athletes = @search.query.paginate page: params[:page], per_page: 8

  if params[:refresh]
    render "athletes_refresh" 
  else
    render "athletes" if request.format.js?
  end
end 
```

# c# - 使用数组中的索引作为数据值？

> ID：15556353
> 
> 赞同：1
> 
> 时间：2013-03-21T19:26:00.023
> 
> 标签：c#, asp.net

假设我有一个 DropdownList，它的数据源是一个字符串列表。我希望 DataValue 成为列表中元素的索引。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:30:42.907

您需要一个值来绑定而不是计算。使用强类或在以下示例中使用快速简便的匿名类型预先执行此操作。

```
List<string> ds = yourlist;
ddl.DataSource = yourlist
    .Select(s => new 
    { 
        Text = s, 
        Value = yourlist.IndexOf(s) 
    })
    .ToList();
ddl.DataValueField = "Value"; 
ddl.DataTextField = "Text";
ddl.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:33:29.313

与 Flem 的解决方案非常相似，但更简单。它使用一个重载的`Select`方法，在它旁边`item`是`index`它被传递的地方。

```
ddl.DataSource = arrayOfStrings.Select((text, index) => new { text, index })
                               .ToList();

ddl.DataValueField = "index"; 
ddl.DataTextField = "text";
ddl.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:30:06.780

在这里，注意我将数据文本和值字段设置为我的数据集中的特定列。

```
SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings["DatabaseConnectionString"].ConnectionString);
         DataSet ds = new DataSet();
         SqlCommand cmd = new SqlCommand("Select * from country", cn);
         SqlDataAdapter adp = new SqlDataAdapter(cmd);
         adp.Fill(ds);
         Dropdownlist1.DataSource = ds;
         Dropdownlist1.DataTextField = "CountryName";
         Dropdownlist1.DataValueField = IndexOf("CountryID");
         Dropdownlist1.DataBind(); 
```

# blackberry - 黑莓 - 将复选框排列到树视图中

> ID：15556356
> 
> 赞同：2
> 
> 时间：2013-03-21T19:26:04.803
> 
> 标签：blackberry, java-me

我正在尝试实现这样的 BlackBerry 7.1：

![在此处输入图像描述](../Images/091fc9cbadc7ff5cd7925dede1610eb1.png)

但到目前为止，我找不到或想出一种方法来实现这样的目标。我能找到的只是“ [BlackBerry - TreeField with Checkboxes?](https://stackoverflow.com/questions/1038048/blackberry-treefield-with-checkboxes) ” 但这真的不是我想要的，因为选择父复选框不会选择所有子复选框，每当我想选择一个复选框时，我都必须处理一个额外的菜单. 有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:34:36.420

缩进是可行的，逻辑上，你必须自己制作。

您可以在每个复选框字段上设置一个[FieldChangeListener](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/FieldChangeListener.html)，以便您可以检测复选框何时被选中/取消选中。如果选中或未选中父级，请手动调用`setChecked`每个子字段以选中/取消选中它们。对于孩子，当一个未选中时，取消选中父级。

这是单个嵌套级别（父级和子级）的基本逻辑确保在侦听器中检查触发绑定复选框字段更新的事件是用户生成的（不是编程的），因为更改侦听器也会被回调你以编程方式调用`setChecked`. 如果不考虑，您将遇到不希望的传播和无限循环。当然，如果您有不止一层的嵌套，那么您将需要关心以编程方式触发的事件。

# c# - 使用 LINQ 获取多维数组的分区（N 维数组的 (N-1) 维实例）

> ID：15556358
> 
> 赞同：2
> 
> 时间：2013-03-21T19:26:11.040
> 
> 标签：c#, linq

我想从 3d 数组中获取 2d 数组。假设我有一个维度为 [10,10,10] 的双 3d 数组 A3，
我需要得到一个 2d 数组 A2 = A3[:,5,:]，即第二维的索引等于例如 5。

如果我想获得 2d 数组 A2 的分区（例如 A1=A2[2,:] 类型）（即 2d 数组的 1d 实例），我可以这样做（设置第一维的索引，例如到 2):

```
double[] A1 = Enumerable.Range(0,A2.Length).Select(x=>A2[2,x]).ToArray(); 
```

我怎样才能做到从 3 到 2（或通常从 N 到 N-1）维度？

**编辑**. 示例输入：

```
double[,,] A3 = new double[2,3,4]{
            {
                {4,3,2,1},
                {5,4,3,2},
                {6,5,4,3}
            },
            {
                {1,2,3,4},
                {2,3,4,5},
                {3,4,5,6}
            }
        }; 
```

结果数组 A2=A3[:,1,:] 必须包含以下内容： { {5,4,3,2},{2,3,4,5} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:32:08.570

LINQ in general doesn't play too well with multi-dimensional arrays. The operations are inherently single dimensional. It plays much better with nested single dimensional arrays, so if you wanted to return a jagged array of depth two, i.e. a `double[][]` rather than a `double[,]` LINQ is a more appropriate tool.

```
public static T[][] GetPlane<T>(T[, ,] source, int secondDimensionValue)
{
    return Enumerable.Range(0, source.GetLength(0))
        .Select(i => Enumerable.Range(0, source.GetLength(2))
            .Select(j => source[i, secondDimensionValue, j])
            .ToArray())
        .ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:47:08.967

像这样的东西应该适用于 3->2：

```
static T[][] Collapse<T>(T[][][] array, int y)
{
  return
    Enumerable.Range(0, array.Length).Select(x =>
      Enumerable.Range(0, array[x][y].Length).Select(z =>
        array[x][y][z]
      ).ToArray()
   ).ToArray();
} 
```

如何将这种模式扩展到更高维度的问题应该是相当明显的。

***编辑：***

这以预期的方式扩展到多维数组。如果您对返回多维数组（而不是交错数组）感兴趣，LINQ 可能不是您要用来解决此问题的工具，因为它没有提供明显或直观的方法来处理多维数组的创建。

如果你真的想要多维数组作为输出，我已经包含了一个示例“去毛刺”实现，它应该将它折叠回多维（非锯齿状）数组。

```
static T[][] Collapse<T>(T[,,] array, int y)
{
  return
    Enumerable.Range(0, array.GetLength(0)).Select(x =>
      Enumerable.Range(0, array.GetLength(2)).Select(z =>
        array[x,y,z]
      ).ToArray()
    ).ToArray();
}

static T[,] Deburr<T>(T[][] jagged)
{
  T[,] mArray = new T[jagged.Length, jagged.Max(array => array.Length)];

  foreach (int row in Enumerable.Range(0, jagged.Length))
    foreach (int col in Enumerable.Range(0, jagged[row].Length))
      mArray[row, col] = jagged[row][col];

  return mArray;
} 
```

# php - 使用具体表继承时，我可以将父记录对象转换为子记录吗？

> ID：15556370
> 
> 赞同：1
> 
> 时间：2013-03-21T19:26:44.897
> 
> 标签：php, inheritance, symfony-1.4, doctrine-1.2

我似乎找不到将父记录对象转换为子记录对象的正确方法。

我的模型如下所示：

```
ModelA:
  columns:
    col_a:integer

ModelB:
  inheritance:
    type:             concrete
    extends:          ModelA
  columns:
    col_b:integer 
```

我想做这样的事情：

```
$instanceB = (ModelB) $instanceA->copy();
$instanceB->setColB('whatever');
$instanceB->save(); 
```

基本上我需要将所有字段和关系从实例 A 复制到实例 B，而不必对字段和关系进行硬编码。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:42:07.947

IIRC 在 php 中没有对象转换的对象（[虽然有](https://stackoverflow.com/questions/2226103/how-to-cast-objects-in-php)一些 hacky 解决方案）。您可以将模型对象的所有属性复制到另一个模型对象，例如：

```
$b = new ModelB();
$b->fromArray($instanceA->toArray());
$b->setColB('yepp')->save(); 
```

# ios - 在 iOS 中使用公钥验证数字签名

> ID：15556375
> 
> 赞同：5
> 
> 时间：2013-03-21T19:26:59.917
> 
> 标签：ios, objective-c, security, openssl, public-key-encryption

**如何在不使用任何第三方代码（例如）开放 SSL 的情况下在 iOS 中使用公钥验证数字签名？**

我需要使用公钥验证 iOS App 中的数字签名。有人可以帮助我如何在不使用第三方软件的情况下实现这一目标。

我正在尝试以下代码，但问题是我的应用程序中没有证书，因此无法创建*SecTrustRef*。

代码：

```
 NSString *certPath              = [[NSBundle mainBundle] pathForResource:@"yyy" 
                                                             ofType:@"xxx"];
    SecCertificateRef myCertificate = nil;
    NSData *certificateData         = [[NSData alloc] initWithContentsOfFile :certPath];
    myCertificate                   = SecCertificateCreateWithData(kCFAllocatorDefault, (__bridge CFDataRef)certificateData);

    SecPolicyRef myPolicy           = SecPolicyCreateBasicX509();
    SecTrustRef trustRef;
    SecTrustCreateWithCertificates(myCertificate, myPolicy, &trustRef);
    SecKeyRef keyRef      = SecTrustCopyPublicKey (trustRef);

    BOOL status = SecKeyRawVerify (keyRef,
                              kSecPaddingPKCS1SHA1,
                              (const uint8_t *)[data bytes],
                              (size_t)[data length],
                              (const uint8_t *)[signature bytes],
                              (size_t)[signature length]
                              ); 
```

我有以下内容：

*   公钥（NSString*）
*   签名（NSString*）
*   数据（NSString*）

如果我不想使用 ant 第三方开源，请帮助我在 iOS SDK 中的所有选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T10:22:33.983

您可以使用 openSSL 将您的公钥打包在 X509 证书中，以便轻松使用 iOS 内置功能：

```
openssl req -x509 -out public_key.pem -outform pem -new -newkey rsa:2048 -keyout private_key.pem 
```

PEM 格式是 base64 编码的，您可以将 -outform 切换为 DER 以获取二进制文件。您可以通过将 const NSString 添加到您的程序并使用此函数将类别添加到 NSData 来导入 PEM 格式：

```
- (id) initWithBase64EncodedString:(NSString *) string {
    NSMutableData *mutableData = nil;

    if( string ) {
        unsigned long ixtext = 0;
        unsigned long lentext = 0;
        unsigned char ch = 0;
        unsigned char inbuf[4], outbuf[3]; // buffer sizes fixed by AOL LLC
        short i = 0, ixinbuf = 0;
        BOOL flignore = NO;
        BOOL flendtext = NO;
        NSData *base64Data = nil;
        const unsigned char *base64Bytes = nil;

        // Convert the string to ASCII data.
        base64Data = [string dataUsingEncoding:NSASCIIStringEncoding];
        base64Bytes = [base64Data bytes];
        mutableData = [NSMutableData dataWithCapacity:[base64Data length]];
        lentext = [base64Data length];

        while( YES ) {
            if( ixtext >= lentext ) break;
            ch = base64Bytes[ixtext++];
            flignore = NO;

            if( ( ch >= 'A' ) && ( ch <= 'Z' ) ) ch = ch - 'A';
            else if( ( ch >= 'a' ) && ( ch <= 'z' ) ) ch = ch - 'a' + 26;
            else if( ( ch >= '0' ) && ( ch <= '9' ) ) ch = ch - '0' + 52;
            else if( ch == '+' ) ch = 62;
            else if( ch == '=' ) flendtext = YES;
            else if( ch == '/' ) ch = 63;
            else flignore = YES;

            if( ! flignore ) {
                short ctcharsinbuf = 3;
                BOOL flbreak = NO;

                if( flendtext ) {
                    if( ! ixinbuf ) break;
                    if( ( ixinbuf == 1 ) || ( ixinbuf == 2 ) ) ctcharsinbuf = 1;
                    else ctcharsinbuf = 2;
                    ixinbuf = 3;
                    flbreak = YES;
                }

                inbuf [ixinbuf++] = ch;

                if( ixinbuf == 4 ) {
                    ixinbuf = 0;
                    outbuf [0] = ( inbuf[0] << 2 ) | ( ( inbuf[1] & 0x30) >> 4 );
                    outbuf [1] = ( ( inbuf[1] & 0x0F ) << 4 ) | ( ( inbuf[2] & 0x3C ) >> 2 );
                    outbuf [2] = ( ( inbuf[2] & 0x03 ) << 6 ) | ( inbuf[3] & 0x3F );

                    for( i = 0; i < ctcharsinbuf; i++ )
                        [mutableData appendBytes:&outbuf[i] length:1];
                }

                if( flbreak )  break;
            }
        }
    }

    self = [self initWithData:mutableData];
    return self;
} 
```

当然，如果您想使用现有的公钥，您可以将此文件拉入 certificateData，只需将其拉出并使用 openSSL 以 X509 证书格式写入

```
$ openssl rsa -in id_rsa -out pub.der -outform DER -pubout 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:47:55.097

如果你的密钥数据打包成PKCS12数据，使用SecPKCS12Import导入，使用公钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T16:26:37.287

您需要将数据的摘要（哈希）传递给验证函数。请参阅[iOS：使用证书和签名验证文件 - 公钥错误，验证失败](https://stackoverflow.com/questions/15438257/ios-verifying-a-file-with-a-certificate-and-signature-public-key-is-wrong-ve)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T10:09:49.790

```
@interface HDSecurityPolicy :AFSecurityPolicy
@end

@implementation HDSecurityPolicy
///pem formate(base64) ->  NSData
- (void)setPinnedCertificates:(NSSet *)pinnedCertificates {
    [super setPinnedCertificates:pinnedCertificates];
    if (self.pinnedCertificates) {
        NSMutableSet *mutablePinnedPublicKeys = [NSMutableSet setWithCapacity:[self.pinnedCertificates count]];
        for (NSData *pubCertificate in self.pinnedCertificates) {
            id publicKey = [HDSecurityPolicy publicSecKeyFromKeyBits:pubCertificate];
            if (!publicKey) {
                continue;
            }
            [mutablePinnedPublicKeys addObject:publicKey];
        }
        [self setValue:mutablePinnedPublicKeys forKey:@"pinnedPublicKeys"];
    }
}

// 从公钥证书文件中获取到公钥的SecKeyRef指针
+ (id)publicSecKeyFromKeyBits:(NSData *)givenData {
    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    options[(__bridge id)kSecAttrKeyType] = (__bridge id) kSecAttrKeyTypeRSA;
    options[(__bridge id)kSecAttrKeyClass] = (__bridge id) kSecAttrKeyClassPublic;

    NSError *error = nil;
    CFErrorRef ee = (__bridge CFErrorRef)error;
    ////'SecKeyCreateWithData' is only available on iOS 10.0 or newer
    id ret = (__bridge_transfer id)SecKeyCreateWithData((__bridge CFDataRef)givenData, (__bridge CFDictionaryRef)options, &ee);
    if (error) {
        return nil;
    }
    return ret;
}
@end 
```

# r - 获取一列中具有相同值并在另一列中具有正二进制值的行数

> ID：15556380
> 
> 赞同：2
> 
> 时间：2013-03-21T19:27:27.680
> 
> 标签：r, vector, dataframe

（对不起这个奇怪的标题，但我想不出一个简短的方法来表达这个）

由于我在我提出的最后一个问题中设法过度简化了我的问题，所以这次我将向您提供实际问题。

提供的数据框包含列“usr”、“usrMsgCnt”和“isRefound”，其中 usr 是名称，usrMsgCnt 是数字，isRefound 是二进制。

将添加一个新列，其值计算如下：

> usrMsgCnt/ usr 等于该行的 usr 并且 isRefound 等于 1 的行数

对于示例数据的第一行，新值将是：

> 9 / 5 其中 5 由 length(data$usr[data$usr=="Jan.Schrader" & data$isRefound==1])

考虑到原始数据集的大小，循环遍历不是一种选择

这是一小部分数据的输入

```
structure(list(usr = structure(c(21L, 21L, 21L, 21L, 6L, 5L, 
6L, 6L, 6L, 21L, 20L, 21L, 6L, 20L, 21L, 21L, 21L, 6L, 6L, 6L
), .Label = c("alsmith", "Amanda.Coles", "Andrew.Coles", "babsimieth", 
"Bernd.Ludwig", "Bernhard.Schiemann", "bfueck", "Bram.Ridder", 
"brian.tripney", "carlosgardeazabal", "christine.elsweiler", 
"cmfinner", "daniel.goncalves", "david", "de56", "eko.ma", "freundlu", 
"gmcphail", "ian.ferguson", "Ian.Ruthven", "Jan.Schrader", "jearmour", 
"jyang", "Laura.Schnall", "Marc.Roper", "marek.maleika", "Martin.Hacker", 
"martin.scholz", "maziminke", "mclanger", "Michael.Cashmore", 
"morgan.harvey", "mrussell", "msherrif", "murray.wood", "Nadine.Mahrholz", 
"noam.ascher", "pburns", "Peter.Gregory", "raina", "robertnm", 
"ronald.teijeira", "ronaldtf", "sbenus", "starmstr", "steve.neely", 
"Sven.Friedemann", "tinchen"), class = "factor"), usrMsgCnt = c(9L, 
9L, 9L, 9L, 5L, 0L, 5L, 5L, 5L, 9L, 0L, 9L, 5L, 0L, 9L, 9L, 9L, 
37L, 37L, 37L), isRefound = c(0L, 1L, 1L, 1L, 1L, 0L, 0L, 1L, 
1L, 1L, 0L, 0L, 1L, 0L, 0L, 0L, 1L, 0L, 1L, 0L)), .Names = c("usr", 
"usrMsgCnt", "isRefound"), row.names = c(NA, 20L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T19:35:36.183

假设`isRefound`实际上是二进制的：

```
library(data.table)
DT <- data.table(DF,key="usr")

DT[,newvar:=usrMsgCnt/sum(isRefound),by=usr] 
```

**编辑：**如果顺序是必不可少的，则不应设置键（对 data.table 进行排序）并创建索引变量（为了安全起见）。

```
DT <- data.table(DF)
DT[,id:=.I]
DT[,newvar:=usrMsgCnt/sum(isRefound),by=usr]
print(DT)

#                    usr usrMsgCnt isRefound id newvar
#  1:       Jan.Schrader         9         0  1    1.8
#  2:       Jan.Schrader         9         1  2    1.8
#  3:       Jan.Schrader         9         1  3    1.8
#  4:       Jan.Schrader         9         1  4    1.8
#  5: Bernhard.Schiemann         5         1  5    1.0
#  6:       Bernd.Ludwig         0         0  6    NaN
#  7: Bernhard.Schiemann         5         0  7    1.0
#  8: Bernhard.Schiemann         5         1  8    1.0
#  9: Bernhard.Schiemann         5         1  9    1.0
# 10:       Jan.Schrader         9         1 10    1.8
# 11:        Ian.Ruthven         0         0 11    NaN
# 12:       Jan.Schrader         9         0 12    1.8
# 13: Bernhard.Schiemann         5         1 13    1.0
# 14:        Ian.Ruthven         0         0 14    NaN
# 15:       Jan.Schrader         9         0 15    1.8
# 16:       Jan.Schrader         9         0 16    1.8
# 17:       Jan.Schrader         9         1 17    1.8
# 18: Bernhard.Schiemann        37         0 18    7.4
# 19: Bernhard.Schiemann        37         1 19    7.4
# 20: Bernhard.Schiemann        37         0 20    7.4 
```

* * *

可以将相同的概念方法与[您上一个问题中](https://stackoverflow.com/a/15555598/1270695)演示的基本 R 方法和 plyr 方法一起使用：

```
within(DF, {
  newvar <- usrMsgCnt/ave(isRefound, usr, FUN = sum)
})

library(plyr)
ddply(DF, .(usr), transform,
      newvar = usrMsgCnt/sum(isRefound)) 
```

但是，对于大型数据集，data.table 包的性能将更加出色。

# spring - Aspectj - 拦截 HTTP 请求

> ID：15556381
> 
> 赞同：1
> 
> 时间：2013-03-21T19:27:38.603
> 
> 标签：spring, http, aspectj, interceptor

有没有可能在spring中使用aspectj或者其他特性来拦截一个HTTP请求，然后根据一些逻辑返回而不执行目标方法？我正在尝试围绕我的 Web 服务创建一个包装器以进行额外控制，该 Web 服务正在使用 Jersey REST API，因此我无法使用 spring 拦截器，并且过滤器可能无法访问我需要的功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T23:01:11.793

[AspectJ](http://eclipse.org/aspectj/)旨在用于字节码的横切，而不是用于拦截 HTTP 请求。

servlet 过滤器更适合拦截`Jersey` `REST`请求，特别是实现[ContainerRequestFilter](http://jax-rs-spec.java.net/nonav/2.0-SNAPSHOT/apidocs/javax/ws/rs/container/ContainerRequestFilter.html)的过滤器。将需要以下部分`web.xml`：

```
<init-param>
  <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
  <param-value>my.package.to.MyFilterClass</param-value>
</init-param> 
```

请参阅[此处](http://arnavawasthi.blogspot.ie/2011/09/writing-custom-filter-for-jersey.html)了解更多信息

# asp.net - 如何将网站指向 localhost 或主机名

> ID：15556384
> 
> 赞同：0
> 
> 时间：2013-03-21T19:27:51.287
> 
> 标签：asp.net, .net, rest, visual-studio-2012

如果通过 Visual Studio 运行，如何使网站指向 Web 服务的本地主机实例，但在 iis 上运行时使用主机名指向服务器。

我有一个 ASP .Net web apis 项目，它带有在特定主机上运行的 rest apis。我有一个单独的网站项目，可以对 web apis 项目进行 ajax 调用。我希望网站在通过 Visual Studio 运行它的 ajax 调用时指向网络服务器的 localhost 实例，但在 iis 服务器上部署和运行时使用 loadbalanacer 主机名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:31:23.260

您可以更新您的 Hosts 文件以指向本地服务器吗？你应该在这里找到它：Windows\System32\drivers\etc\hosts

这是一个很好的指南： http: [//www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/](http://www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T19:30:37.463

```
if (String.Equals(HttpContext.Current.Request.Url.Host.ToString(), "localhost")) 
```

# java - 为什么将十六进制字符串格式化为三位数时会出现 IllegalFormatConversionException？

> ID：15556389
> 
> 赞同：4
> 
> 时间：2013-03-21T19:28:13.987
> 
> 标签：java, string, format, hex

我正在做一个课堂项目，我必须为我们在课堂上看到的指令集构建一个两遍汇编程序。

在第一个 pass 函数中，我的一段代码如下所示：

```
 //If the fourth character is a comma, then it follows that the line contains a label.
        if (line.indexOf(',') == 3) {              
            //Store symbol in address-symbol table together with value of location counter
            String symbolTableLine = line.substring(0,3) + " " + String.format("%03X", Integer.toHexString(locCounter)) + "\r\n";                
            symbolTable[symbolTablePos] = symbolTableLine;
            writerSymbTable.write(symbolTableLine);
            //Increment the location counter and the current position in symbol table
            locCounter++;
            symbolTablePos++; 
```

我的问题在于以下函数调用：

```
String.format("%03X", Integer.toHexString(locCounter)) 
```

这样做的目的是将位置计数器转换为十六进制字符串（例如“AA”、“0”或“F”）并添加零作为占位符，直到十六进制字符串长为三位数（“0AA”、“000 ", "00F")

问题是我收到了这个异常：

```
 Exception in thread "main" java.util.IllegalFormatConversionException: x != java.lang.String 
```

我知道这意味着由于某种原因它没有接收十六进制字符串。但我似乎无法弄清楚为什么那不是十六进制字符串，我的意思是我正在使用 Integer.toHexString()...

任何帮助将不胜感激，谢谢。如果这还不足以让您看到代码，那么如果您愿意，我可以发布更多代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:33:43.470

您无需调用`toHexString()`，因为`"X"`in`format()`将负责转换：

```
String.format("%03X", locCounter) 
```

# python - lxml：clean_html 用 div 替换 html 标签？

> ID：15556391
> 
> 赞同：4
> 
> 时间：2013-03-21T19:28:50.997
> 
> 标签：python, lxml, libxml2

我正在使用 lxml 3.1.0（使用 easy_install 安装），并看到奇怪的结果：

```
> from lxml.html.clean import clean_html
> clean_html("<html><body><h1>hi</h1></body></html>")
'<div><body><h1>hi</h1></body></div>' 
```

`html`标签被替换为`div`.

根据[http://lxml.de/lxmlhtml.html#cleaning-up-html的示例 html 也会发生同样的情况](http://lxml.de/lxmlhtml.html#cleaning-up-html)

是什么赋予了？我是否遇到了 lxml 的错误，或者与 libxml2 的版本不兼容，或者这是以某种方式预期的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:38:51.113

我认为您需要一个`Cleaner`单独的`page_structure`：

```
>>> from lxml.html.clean import Cleaner                                                           
>>> cleaner = Cleaner(page_structure=False)                                          
>>> cleaner.clean_html("<html><body><h1>hi</h1></body></html>")
'<html><body><h1>hi</h1></body></html>' 
```

[如此处](http://lxml.de/api/lxml.html.clean.Cleaner-class.html)所述，默认情况下`page_structure`是`True`。我怀疑您提供的站点上的文档不正确或已过时。

[编辑#1：可以在源代码的这个](https://github.com/lxml/lxml/blob/master/src/lxml/html/tests/test_clean.py#L9)测试中找到另一个确认这是预期行为。已提交拉取请求以更正文档[。](https://github.com/lxml/lxml/pull/104)

编辑#2：截至 2013 年 4 月 28 日，[拉取请求](https://github.com/lxml/lxml/pull/104)已合并到主服务器中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:38:31.713

页面的结构部分，如`<head>`,`<html>`和，如果是默认值，则将其`<title>`删除。`page_structure=True`要改变这一点：

```
import lxml.html.clean as clean
content = '<html><body><h1>hi</h1></body></html>'
cleaner = clean.Cleaner(page_structure=False)
cleaned = cleaner.clean_html(content)
print(cleaned)
# <html><body><h1>hi</h1></body></html> 
```

请参阅类的文档字符串`clean.Cleaner`：

```
In [105]: clean.Cleaner?
Type:       type
String Form:<class 'lxml.html.clean.Cleaner'>
File:       /usr/lib/python2.7/dist-packages/lxml/html/clean.py
Definition: clean.Cleaner(self, doc)
Docstring:
Instances cleans the document of each of the possible offending
elements.  The cleaning is controlled by attributes; you can
override attributes in a subclass, or set them in the constructor.

``scripts``:
    Removes any ``<script>`` tags.

``javascript``:
    Removes any Javascript, like an ``onclick`` attribute.

``comments``:
    Removes any comments.

``style``:
    Removes any style tags or attributes.

``links``:
    Removes any ``<link>`` tags

``meta``:
    Removes any ``<meta>`` tags

``page_structure``:
    Structural parts of a page: ``<head>``, ``<html>``, ``<title>``.

``processing_instructions``:
    Removes any processing instructions.

``embedded``:
    Removes any embedded objects (flash, iframes)

``frames``:
    Removes any frame-related tags

``forms``:
    Removes any form tags

``annoying_tags``:
    Tags that aren't *wrong*, but are annoying.  ``<blink>`` and ``<marquee>``

``remove_tags``:
    A list of tags to remove.

``allow_tags``:
    A list of tags to include (default include all).

``remove_unknown_tags``:
    Remove any tags that aren't standard parts of HTML.

``safe_attrs_only``:
    If true, only include 'safe' attributes (specifically the list
    from `feedparser
    <http://feedparser.org/docs/html-sanitization.html>`_).

``add_nofollow``:
    If true, then any <a> tags will have ``rel="nofollow"`` added to them.

``host_whitelist``:
    A list or set of hosts that you can use for embedded content
    (for content like ``<object>``, ``<link rel="stylesheet">``, etc).
    You can also implement/override the method
    ``allow_embedded_url(el, url)`` or ``allow_element(el)`` to
    implement more complex rules for what can be embedded.
    Anything that passes this test will be shown, regardless of
    the value of (for instance) ``embedded``.

    Note that this parameter might not work as intended if you do not
    make the links absolute before doing the cleaning.

``whitelist_tags``:
    A set of tags that can be included with ``host_whitelist``.
    The default is ``iframe`` and ``embed``; you may wish to
    include other tags like ``script``, or you may want to
    implement ``allow_embedded_url`` for more control.  Set to None to
    include all tags.

This modifies the document *in place*.
Constructor information:
 Definition:clean.Cleaner(self, **kw) 
```

# vb.net - VB.NET Linq To Objects 相交返回对象

> ID：15556400
> 
> 赞同：1
> 
> 时间：2013-03-21T19:29:52.000
> 
> 标签：vb.net, linq

如何从对象数组和字符串数组的交集中获取对象集合？

例如，我有一个对象集合（Person 类）和一个字符串数组：

```
Public Class Person
    Public lastName As String
    Public firstName As String
End Class

Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim personArray As List(Of Person)
        Dim p1 As Person = New Person("Bill", "Fitch") : personArray.Add(p1)
        Dim p2 As Person = New Person("Randy", "Roberts") : personArray.Add(p2)
        Dim p3 As Person = New Person("Miles", "Johnson") : personArray.Add(p3)
        Dim p4 As Person = New Person("Sandy", "Smith") : personArray.Add(p4)

        Dim arrayNames() As String = {"Jones", "Roberts", "Smith", "Teague"}

        'The Linq code
        Dim query = From myPerson In personArray
                    Where myPerson.lastName = arrayNames
                    Select myPerson
    End Sub
End Class 
```

当然，Linq 代码不起作用，但 Linq 能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:38:36.320

您可以使用包含：

```
 Dim query = From myPerson In personArray
                Where arrayNames.Contains(myPerson.lastName)
                Select myPerson 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:52:03.427

您可以使用联接：

```
Dim query = From p As Person In personArray
            Join lastName As String In arrayNames On p.lastName Equals lastName
            Select p 
```

这是完整的代码，如果你想测试它（我稍微改变了你的代码，以确保它可以编译）。

```
Public Class Form1
  Public Class Person
    Public lastName As String
    Public firstName As String
    Sub New(firstName As String, lastName As String)
      Me.lastName = lastName
      Me.firstName = firstName
    End Sub
  End Class

  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim personArray As New List(Of Person)({
      New Person("Bill", "Fitch"),
      New Person("Randy", "Roberts"),
      New Person("Miles", "Johnson"),
      New Person("Sandy", "Smith")
    })

    Dim arrayNames() As String = {"Jones", "Roberts", "Smith", "Teague"}

    Dim query = From p As Person In personArray
                Join lastName As String In arrayNames On p.lastName Equals lastName
                Select p
  End Sub
End Class 
```

# java - 通过 ServerSocket 发送图像

> ID：15556401
> 
> 赞同：0
> 
> 时间：2013-03-21T19:29:53.517
> 
> 标签：java, javax.imageio

我正在尝试`Socket`用 Java 发送图像，但是我得到了`NullPointerException`. 这是服务器的代码：

```
package sendImage;

import java.net.*;
import javax.imageio.*;
import javax.swing.*;
import java.awt.image.BufferedImage;
import java.io.*;

public class Server {
    ServerSocket server;
    Socket client;
//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new Server();
    }
//------------------------------------------------------------------------------
    public Server(){
        connect();
    }
//------------------------------------------------------------------------------
    public void connect(){
        try{
            server = new ServerSocket(9999);
            client = server.accept();

            sendImage();
        }catch(Exception e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void sendImage(){
        String image = "C:/Users/JavaChild/Downloads/jo-d-101027-mentalist.jpg";
        try{
            InputStream in = Server.class.getResourceAsStream(image);
            BufferedImage img = ImageIO.read(in);
            JLabel l = new JLabel(new ImageIcon(img));
            JFrame frame = new JFrame("Server");
            frame.add(l);
            frame.setVisible(true);
            ImageIO.write(img, "JPG", client.getOutputStream());
        }catch(Exception e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
} 
```

和客户：

```
package sendImage;

import java.net.*;
import javax.imageio.*;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

import java.awt.image.BufferedImage;
import java.io.*;

public class Client {
    Socket server;

//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new Client();
    }
//------------------------------------------------------------------------------
    public Client(){
        connect();
    }
//------------------------------------------------------------------------------
    public void connect(){
        try{
            server = new Socket("JavaChild-PC",9999);
            readImage();
        }catch(Exception e){
            e.printStackTrace();
        }
    }
//------------------------------------------------------------------------------
    public void readImage(){
        try{
            BufferedImage img = ImageIO.read(server.getInputStream());
            JLabel label = new JLabel(new ImageIcon(img));
            JFrame frame = new JFrame("Client");
            frame.add(label);
            frame.setVisible(true);
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

**请告诉我如何通过套接字正确发送图像**
以及**导致异常的原因是什么？**

## 堆栈跟踪

```
java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at sendImage.Client.readImage(Client.java:37)
    at sendImage.Client.connect(Client.java:28)
    at sendImage.Client.<init>(Client.java:22)
    at sendImage.Client.main(Client.java:18) 
```

# nhunspell - 是否可以从 NHunspell 对象中删除一个单词

> ID：15556402
> 
> 赞同：1
> 
> 时间：2013-03-21T19:29:56.147
> 
> 标签：nhunspell

您可以将单词添加到 NHunspell（Hunspell 的 .NET 端口）中

```
NHunspell.Hunspell hunspell = new NHunspell.Hunspell(".affPath", ".dicPath");
String[] words = GetUserWords();
foreach (String word in words)
  hunspell.Add(word); 
```

如果我需要从对象中删除一个单词怎么办？有没有办法从 NHunspell 对象中删除一个单词，而不必创建一个新单词并再次添加自定义单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:52:29.050

目前 (1.1.0.0) remove 没有在 NHunspell 中实现，但我考虑在下一个版本中实现它

补充：由于（1.1.1.0）删除已实施。

# livecode - 您可以在 LiveCode for iOS 的应答对话中使用 Unicode 吗？

> ID：15556404
> 
> 赞同：2
> 
> 时间：2013-03-21T19:30:05.400
> 
> 标签：livecode

我不得不在 iOS 中使用 LiveCode 暴力破解 unicode 答案对话。这不是一个非常优雅的解决方案。有没有人能够使 UTF8 编码的答案对话在 iOS 上工作？这是一年多以前的事了，但这个论坛帖子声称他们可以。[论坛帖子](http://forums.runrev.com/phpBB2/viewtopic.php?f=49&t=11045)

他们基本上说，如果您将 UTF16 转换为 UTF8，则答案对话框将接受该编码。我用一行日文创建了一个新的纯文本文件，用 UTF8 编码保存它，然后用 url ("file:translation.text") 将其拉入。我确认它正在提取正确的文本文件。我使用以下代码将 UTF8 编码的文本放入答案对话框中：
`put uniDecode(uniEncode(tMsg,"UTF8")) into tMsg`
`answer tMsg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:51:09.920

不幸的是，人们在桌面上使用的 htmlText 解决方法也不起作用。解决方法是创建一个组并显示/隐藏它。在其后面使用全屏大小的黑色不透明图形，并将 blendLevel 设置为大约 80%。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-30T08:13:26.330

您可以在回答对话框中使用 unicodeText。

脚步：

1.  从 UTF8 编码文件中读取文本 - 如果使用 URL 技术，请确保使用“binfile:”来读取它。

2.  使用将您的文本转换为对实时代码友好的文本

    unidecode(uniencode(pText,"UTF8"))

在我的系统中，我在这一步之后将我的 unicode 字符串存储在一个数组中，以便以后选择。

1.  回答

诚然，在这种情况下，我将其用于各种欧洲语言，而不是日语……我确实记得在整个领域都在苦苦挣扎。祝你好运！

# c# - C# - 图片框中的多个动画 gif

> ID：15556407
> 
> 赞同：0
> 
> 时间：2013-03-21T19:30:12.710
> 
> 标签：c#, picturebox, gif, tile, animated

我一直在四处寻找，并找到了许多在图片框中平铺图像的方法（绘制图像，然后在图片框中显示该图像），以及让动画 gif 在表单上工作的方法（只需将图片框的图像设置为动画 gif); 我还没有找到一种在图片框中*平铺*动画*gif*的方法，而无需为每个平铺创建单独的图片框。

**所以简而言之，我希望在 C#中将*动画 gif**平铺*在*单个*图片框（或另一个控件，我只是不想为每个平铺创建一个控件）中。**

 ****这甚至可能吗？如果是这样，怎么做？**

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:35:19.490

将 .gif 文件的所有图像放在一个数组中。设置一个计时器并在计时器的滴答声中将图片框的图像更改为数组的下一个索引。**

# symfony - 在多对多中为查询生成器添加更多条件

> ID：15556412
> 
> 赞同：1
> 
> 时间：2013-03-21T19:30:18.530
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我在 symfony2 中有关系（ManyToMany）：

项目 <-> 类别

数据库：

项目：ID NAME

类别 ID 名称 SLUG

项目类别：id item_id category_id

我正在尝试通过 x slugs 找到与类别相关的所有项目。

代码不起作用：

```
 $qb = $this->createQueryBuilder('i')
        ->select('i, c ')
        ->leftJoin('i.categories', 'c')

        ->setParameter('firstSlug', 'first')
        ->andWhere('c.slug = :firstSlug')

        ->setParameter('secondSlug', 'second')
        ->andWhere('c.slug = :secondSlug') 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:02:38.817

你有一个双和，你的类别都没有两个 slug，所以没有类别匹配 c.slug=first 和 c.slug=second。尝试：

```
$qb = $this->createQueryBuilder('i')
    ->select('i, c ')
    ->leftJoin('i.categories', 'c')

    ->setParameter('firstSlug', 'first')
    ->andWhere('c.slug = :firstSlug')

    ->setParameter('secondSlug', 'second')
    ->orWhere('c.slug = :secondSlug')                <<< change in this line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:07:16.573

```
$qb = $this->createQueryBuilder('i');
$qb
    ->select('i')
    ->join('i.categories', 'c')
    ->where($qb->expr()->in('c.slug', ':slugs'))
    ->setParameter('slugs', ['first_slug', 'second_slug', 'third_slug'])
    ->distinct(i.id) // to prevent having same item more than once
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:10:18.807

根据评论，我认为您想使用连接条件：

```
$qb = $this->createQueryBuilder('i');
$qb->select('i, c ')
   ->join('i.categories', 'c', 'ON', 'c.slug = :firstSlug')
   ->join('i.categories', 'c', 'ON', 'c.slug = :secondSlug')
   ->setParameter('firstSlug', 'first')
   ->andWhere('c.slug = :secondSlug')
; 
```

您不能使用左连接，您将匹配没有 slug 的项目。

# wordpress - Wordpress Gravity 基于 Term 形成动态种群

> ID：15556416
> 
> 赞同：1
> 
> 时间：2013-03-21T19:30:22.827
> 
> 标签：wordpress

我正在尝试使用自定义帖子类型的术语名称自动填充重力表单隐藏字段。下面的代码在字段中返回单词“Array”。我需要它来使用自定义帖子类型类别和/或子名称填充该字段。

```
add_filter('gform_field_value_myparameter', 'populate_post_myparameter');
function populate_post_myparameter($value){
global $post;

$myparameter = wp_get_post_terms($post->ID, 'mytaxonomy', 'array("fields" => "names")');

return $myparameter;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:40:32.320

即使只有一个对象， wp_get_post_terms 也会返回一个数组。如果您只是想从该列表中获取第一个术语（尽管一个帖子可能有多个条目），请将 return $myparameter 更改为 return $myparameter[0]->name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T15:08:48.660

为了建立尼克的答案，添加一点防弹，并更正代码中的错字，这是最终代码的样子：

```
add_filter( 'gform_field_value_myparameter', 'populate_post_myparameter' );
function populate_post_myparameter( $value ) {
    global $post;

    $terms = wp_get_post_terms( $post->ID, 'mytaxonomy', array( 'fields' => 'names' ) );

    return $terms && ! is_wp_error( $terms ) ? $terms[0]->name : '';
} 
```

如果您正在寻找无需编写任何代码即可处理此问题的插件，请查看[Gravity Forms Populate Anything](https://gravitywiz.com/documentation/gravity-forms-populate-anything/)。

# unity3d - MeshCollider 物理复制速度慢

> ID：15556417
> 
> 赞同：0
> 
> 时间：2013-03-21T19:30:28.743
> 
> 标签：unity3d

我正在创建一个平铺的世界，其中的平铺由 GameObjects 组成。但是，我想在这个 GameObject 中有物理。如果我为每个图块实例化一个游戏对象，我会得到丢帧，如果我使用引用，每个图块的物理特性都是相同的（即一个球落在一个图块上，再走一点，它已经落在下一个图块上）。

有没有解决上述问题的方法？

编辑：请参阅我添加了一些内容的最后一部分。

脚本：

```
using UnityEngine;
using System.Collections;
using System;
using System.Collections.Generic;

/// <summary>
/// A double key dictionary.
/// </summary>
/// <typeparam name="K">
/// The first key type.
/// </typeparam>
/// <typeparam name="T">
/// The second key type.
/// </typeparam>
/// <typeparam name="V">
/// The value type.
/// </typeparam>
/// <remarks>
/// See http://noocyte.wordpress.com/2008/02/18/double-key-dictionary/
///   A Remove method was added.
/// </remarks>
public class DoubleKeyDictionary<K, T, V> : IEnumerable<DoubleKeyPairValue<K, T, V>>, 
                                            IEquatable<DoubleKeyDictionary<K, T, V>>
{
    #region Constants and Fields

    /// <summary>
    /// The m_inner dictionary.
    /// </summary>
    private Dictionary<T, V> m_innerDictionary;

    #endregion

    #region Constructors and Destructors

    /// <summary>
    /// Initializes a new instance of the <see cref="DoubleKeyDictionary{K,T,V}"/> class. 
    ///   Initializes a new instance of the <see cref="DoubleKeyDictionary&lt;K, T, V&gt;"/> class.
    /// </summary>
    public DoubleKeyDictionary()
    {
        this.OuterDictionary = new Dictionary<K, Dictionary<T, V>>();
    }

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets OuterDictionary.
    /// </summary>
    private Dictionary<K, Dictionary<T, V>> OuterDictionary { get; set; }

    #endregion

    #region Public Indexers

    /// <summary>
    ///   Gets or sets the value with the specified indices.
    /// </summary>
    /// <value></value>
    public V this[K index1, T index2]
    {
        get
        {
            return this.OuterDictionary[index1][index2];
        }

        set
        {
            this.Add(index1, index2, value);
        }
    }

    #endregion

    #region Public Methods

    /// <summary>
    /// Clears this dictionary.
    /// </summary>
    public void Clear()
    {
        OuterDictionary.Clear();
        if (m_innerDictionary!=null)
            m_innerDictionary.Clear();
    }

    /// <summary>
    /// Adds the specified key.
    /// </summary>
    /// <param name="key1">
    /// The key1.
    /// </param>
    /// <param name="key2">
    /// The key2.
    /// </param>
    /// <param name="value">
    /// The value.
    /// </param>
    public void Add(K key1, T key2, V value)
    {
        if (this.OuterDictionary.ContainsKey(key1))
        {
            if (this.m_innerDictionary.ContainsKey(key2))
            {
                this.OuterDictionary[key1][key2] = value;
            }
            else
            {
                this.m_innerDictionary = this.OuterDictionary[key1];
                this.m_innerDictionary.Add(key2, value);
                this.OuterDictionary[key1] = this.m_innerDictionary;
            }
        }
        else
        {
            this.m_innerDictionary = new Dictionary<T, V>();
            this.m_innerDictionary[key2] = value;
            this.OuterDictionary.Add(key1, this.m_innerDictionary);
        }
    }

    /// <summary>
    /// Determines whether the specified dictionary contains the key.
    /// </summary>
    /// <param name="index1">
    /// The index1.
    /// </param>
    /// <param name="index2">
    /// The index2.
    /// </param>
    /// <returns>
    /// <c>true</c> if the specified index1 contains key; otherwise, <c>false</c>.
    /// </returns>
    public bool ContainsKey(K index1, T index2)
    {
        if (!this.OuterDictionary.ContainsKey(index1))
        {
            return false;
        }

        if (!this.OuterDictionary[index1].ContainsKey(index2))
        {
            return false;
        }

        return true;
    }

    /// <summary>
    /// Equalses the specified other.
    /// </summary>
    /// <param name="other">
    /// The other.
    /// </param>
    /// <returns>
    /// The equals.
    /// </returns>
    public bool Equals(DoubleKeyDictionary<K, T, V> other)
    {
        if (this.OuterDictionary.Keys.Count != other.OuterDictionary.Keys.Count)
        {
            return false;
        }

        bool isEqual = true;

        foreach (var innerItems in this.OuterDictionary)
        {
            if (!other.OuterDictionary.ContainsKey(innerItems.Key))
            {
                isEqual = false;
            }

            if (!isEqual)
            {
                break;
            }

            // here we can be sure that the key is in both lists, 
            // but we need to check the contents of the inner dictionary
            Dictionary<T, V> otherInnerDictionary = other.OuterDictionary[innerItems.Key];
            foreach (var innerValue in innerItems.Value)
            {
                if (!otherInnerDictionary.ContainsValue(innerValue.Value))
                {
                    isEqual = false;
                }

                if (!otherInnerDictionary.ContainsKey(innerValue.Key))
                {
                    isEqual = false;
                }
            }

            if (!isEqual)
            {
                break;
            }
        }

        return isEqual;
    }

    /// <summary>
    /// Gets the enumerator.
    /// </summary>
    /// <returns>
    /// </returns>
    public IEnumerator<DoubleKeyPairValue<K, T, V>> GetEnumerator()
    {
        foreach (var outer in this.OuterDictionary)
        {
            foreach (var inner in outer.Value)
            {
                yield return new DoubleKeyPairValue<K, T, V>(outer.Key, inner.Key, inner.Value);
            }
        }
    }

    /// <summary>
    /// Removes the specified key.
    /// </summary>
    /// <param name="key1">
    /// The key1.
    /// </param>
    /// <param name="key2">
    /// The key2.
    /// </param>
    public void Remove(K key1, T key2)
    {
        this.OuterDictionary[key1].Remove(key2);
        if (this.OuterDictionary[key1].Count == 0)
        {
            this.OuterDictionary.Remove(key1);
        }
    }

    #endregion

    #region Explicit Interface Methods

    /// <summary>
    /// Returns an enumerator that iterates through a collection.
    /// </summary>
    /// <returns>
    /// An <see cref="T:System.Collections.IEnumerator"/> object that can be used to iterate through the collection.
    /// </returns>
    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }

    #endregion
}

/// <summary>
/// Represents two keys and a value.
/// </summary>
/// <typeparam name="K">
/// First key type.
/// </typeparam>
/// <typeparam name="T">
/// Second key type.
/// </typeparam>
/// <typeparam name="V">
/// Value type.
/// </typeparam>
public class DoubleKeyPairValue<K, T, V>
{
    #region Constructors and Destructors

    /// <summary>
    /// Initializes a new instance of the <see cref="DoubleKeyPairValue{K,T,V}"/> class. 
    /// Initializes a new instance of the <see cref="DoubleKeyPairValue&lt;K, T, V&gt;"/> class.
    /// </summary>
    /// <param name="key1">
    /// The key1.
    /// </param>
    /// <param name="key2">
    /// The key2.
    /// </param>
    /// <param name="value">
    /// The value.
    /// </param>
    public DoubleKeyPairValue(K key1, T key2, V value)
    {
        this.Key1 = key1;
        this.Key2 = key2;
        this.Value = value;
    }

    #endregion

    #region Public Properties

    /// <summary>
    ///   Gets or sets the key1.
    /// </summary>
    /// <value>The key1.</value>
    public K Key1 { get; set; }

    /// <summary>
    ///   Gets or sets the key2.
    /// </summary>
    /// <value>The key2.</value>
    public T Key2 { get; set; }

    /// <summary>
    ///   Gets or sets the value.
    /// </summary>
    /// <value>The value.</value>
    public V Value { get; set; }

    #endregion

    #region Public Methods

    /// <summary>
    /// Returns a <see cref="System.String"/> that represents this instance.
    /// </summary>
    /// <returns>
    /// A <see cref="System.String"/> that represents this instance.
    /// </returns>
    public override string ToString()
    {
        return this.Key1 + " - " + this.Key2 + " - " + this.Value;
    }

    #endregion
}

public class TerrainManager : MonoBehaviour {

    public GameObject playerGameObject;
    public GameObject referenceTerrain;
    public int spread = 1;
    public int rememberSpread = 3;

    private int[] currentTerrainID;
    private DoubleKeyDictionary<int, int, GameObject> terrainUsageData;
    private Vector3 referencePosition;
    private Vector2 referenceSize;
    private Quaternion referenceRotation;

    // Use this for initialization
    void Start () {

        currentTerrainID = new int[2];
        terrainUsageData = new DoubleKeyDictionary<int, int, GameObject>();

        referencePosition = referenceTerrain.transform.position;
        referenceRotation = referenceTerrain.transform.rotation;

        float width = 0;
        float height = 0;
        foreach(Renderer rend in referenceTerrain.GetComponentsInChildren<Renderer>()) {
            if (rend.bounds.size.x > width)
                width = rend.bounds.size.x;
            if (rend.bounds.size.z > height)
                height = rend.bounds.size.z;
        }

        referenceSize = new Vector2(width, height);
        print (referenceSize);
    }

    // Update is called once per frame
    void Update () {
        Vector3 warpPosition = playerGameObject.transform.position;
        TerrainIDFromPosition(ref currentTerrainID, ref warpPosition);

        string dbgString = "";
        dbgString = "CurrentID : " + currentTerrainID[0] + ", " + currentTerrainID[1] + "\n\n";
        for(int i=-spread;i<=spread;i++)
        {
            for(int j=-spread;j<=spread;j++)
            {   
                DropTerrainAt(currentTerrainID[0] + i, currentTerrainID[1] + j);
                dbgString += (currentTerrainID[0] + i) + "," + (currentTerrainID[1] + j) + "\n";
            }
        }
        Debug.Log(dbgString);
        ReclaimTiles();
    }

    void TerrainIDFromPosition(ref int[] currentTerrainID, ref Vector3 position)
    {
        currentTerrainID[0] = Mathf.RoundToInt((position.x - referencePosition.x) / referenceSize.x);
        currentTerrainID[1] = Mathf.RoundToInt((position.z - referencePosition.z) / referenceSize.y);
    }

    void DropTerrainAt(int i, int j)
    {
        if(terrainUsageData.ContainsKey(i,j))
        {
            // Restore the data for this tile
        }
        else
        {
            // Create a new data object
            terrainUsageData[i,j] = CreateNewTerrainData();
        }

        ActivateUsedTile(i, j);
    }

    GameObject CreateNewTerrainData()
    {
        GameObject terr = (GameObject)Instantiate(referenceTerrain);
        terr.SetActive(true);
        return terr;
    }

    void ReclaimTiles()
    {
        foreach(DoubleKeyPairValue<int,int,GameObject> pair in terrainUsageData)
        {
            if (pair.Key1 > currentTerrainID[0] + rememberSpread || pair.Key1 < currentTerrainID[0] - rememberSpread ||
                    pair.Key2 > currentTerrainID[1] + rememberSpread || pair.Key2 < currentTerrainID[1] - rememberSpread) {
                pair.Value.SetActive(false);
                terrainUsageData.Remove(pair.Key1, pair.Key2);
            }
        }
    }

    void ActivateUsedTile(int i, int j)
    {
        terrainUsageData[i,j].transform.position = 
                                    new Vector3(    referencePosition.x + i * referenceSize.x,
                                                    referencePosition.y,
                                                    referencePosition.z + j * referenceSize.y);
        terrainUsageData[i,j].transform.rotation = referenceRotation;
        terrainUsageData[i,j].SetActive(true);
            foreach(Transform ct in terrainUsageData[i,j].transform) {
                if (!ct.gameObject.name.Equals("Ground"))
                    ct.gameObject.rigidbody.isKinematic = false;
            }
    }   
} 
```

还有我的其他更改：

```
 GameObject terr = new GameObject();
        foreach(Transform go in referenceTerrain.transform) {
            GameObject obj = new GameObject();

            GameObject origobj = go.gameObject;

            obj.AddComponent<MeshRenderer>();
            MeshRenderer mr = obj.GetComponent<MeshRenderer>();
            mr.materials = origobj.renderer.materials;
            mr.receiveShadows = origobj.renderer.receiveShadows;
            mr.castShadows = origobj.renderer.castShadows;

            obj.AddComponent<MeshFilter>();
            MeshFilter mer = obj.GetComponent<MeshFilter>();
            mer.mesh = origobj.GetComponent<MeshFilter>().mesh;

            obj.AddComponent<Rigidbody>();
            Rigidbody origrb = origobj.rigidbody;
            Rigidbody rb = obj.rigidbody;
            rb.isKinematic = origrb.isKinematic;
            rb.useGravity = origrb.useGravity;

            MeshCollider origmc = origobj.GetComponent<MeshCollider>();
            if (origmc) {
                MeshCollider mc = obj.AddComponent<MeshCollider>();
                mc.sharedMesh = origmc.sharedMesh;
                mc.sharedMaterial = origmc.sharedMaterial;
            }
            BoxCollider origbc = origobj.GetComponent<BoxCollider>();
            if (origbc) {
                BoxCollider bc = obj.AddComponent<BoxCollider>();
                bc.sharedMaterial = origbc.sharedMaterial;
            }

            obj.transform.parent = terr.transform;
            obj.transform.localPosition = origobj.transform.localPosition;
            obj.transform.localRotation = origobj.transform.localRotation;
            obj.transform.localScale = origobj.transform.localScale;

            obj.SetActive(true);
        }
        return terr; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:06:33.733

老实说，没有办法规避由 MeshColliders 引起的尖峰。它们非常昂贵，最好使用通用的或编写自己的对撞机。

此外，无论如何，您正在做的事情将花费过多的资源。处理这一切的最佳方法是为所有图块使用单个网格，并仅在调用物理或您可以编写自己的物理时渲染游戏对象。

另一种选择是创建一个“块”机制来将图块组合在一起。然后你可以创建某种类型的剔除、加载和卸载块来提高性能。

简而言之，仅使用 Unity 的核心库就不太可能以具有成本效益的方式做到这一点。

# c# - LINQ to Entities 无法识别方法“System.Object get_Item(System.String)”

> ID：15556422
> 
> 赞同：2
> 
> 时间：2013-03-21T19:30:47.143
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

下面出现错误

> LINQ to Entities 无法识别方法 'System.Object get_Item(System.String)' 方法，并且此方法无法转换为存储表达式

试图从数据库中获取 Postobject 的数据并将其发送为 Json 格式。PostComments 是 Post 的一对多关系。我首先使用 EF 5.x 代码。

```
 try
        {
            IEnumerable<Post> userPosts;
            userPosts = (from q in db.Posts
                         where q.UserId == userId
                         && q.PostId > postid
                         select q).Take(5);

            return Json(userPosts.Select(x => new
            {
                success = 1,
                contenttext = x.PostContent,
                postId = x.PostId,
                comments = x.PostComments  //is a child collection object
            }), JsonRequestBehavior.AllowGet);

        }
        catch (Exception ex)
        {
            return Json(new { success = 0 });

        }
        finally
        {
            //db.Dispose();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:02:58.953

我不确定你是否已经尝试过这个。

```
return Json(userPosts.Select(x => new
        {
            success = 1,
            contenttext = x.PostContent,
            postId = x.PostId,
            comments = x.PostComments  //is a child collection object
        }).ToList(), JsonRequestBehavior.AllowGet); 
```

# vb.net - 将“FileStream”与资源中的文本文件一起使用

> ID：15556426
> 
> 赞同：0
> 
> 时间：2013-03-21T19:31:09.137
> 
> 标签：vb.net, filestream

我是编码新手，如果有办法使用文件流读取资源中的 txt 文件，我正在徘徊。

代码是：

```
 Dim decHolder As Decimal

    Dim F As New System.IO.StreamReader("C:\Users\Thunderlol\Desktop\Kees 2\Program 2.0\Resources\Thresh Dress.txt")
    decHolder = F.ReadToEnd 
```

问题是每次我尝试查看该值时，它什么都没有返回。我已经从一个文件中完成了文件流，我必须从资源中完成它的原因是这是一个大学项目，我的导师已经提出了这个要求。

上下文：我希望用户能够更改价格，价格将从 txt 文档中的值开始。当用户更改价格时，txt 文档将更改为用户输入的内容。

目前，我的问题是每次尝试使用资源中的文本文件时，该值都会返回为“0”。该文件已被检查该值在那里，为什么它返回为 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:10:47.567

嵌入式资源的访问方式略有不同。

```
Dim line As String = String.Empty
Dim value As Decimal = 0

Using reader As StreamReader = New StreamReader(Assembly.GetExecutingAssembly.GetNamedResourceStream("[program namespace].Thresh Dress.txt")
  line = reader.ReadLine
  Decimal.TryParse(line, value)
End Using 
```

# internet-explorer-10 - IE10中indexedDB数据库的最大大小是多少

> ID：15556435
> 
> 赞同：3
> 
> 时间：2013-03-21T19:31:36.497
> 
> 标签：internet-explorer-10, indexeddb, web-storage

到目前为止，我有：

火狐：无限制

Safari：50MB（并且使用 web sql 而不是 idb）

铬：无限制

歌剧：无限制

IE： ？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:36:57.907

[对于 IE10，您可以在此处](https://stackoverflow.com/questions/14717739/storage-limit-for-indexeddb-on-ie10)找到 awnser 。您将看到正常限制为 250mb，但作为用户，您可以将其增加到每个域 999mb。如何在帖子中描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:16:27.693

IE10 允许最多 10mb 的组合 AppCache 和 IndexedDB 没有提示，一旦您达到该级别，您将被询问是否要允许它最多增加到*每个站点*250mb 。

# xcode - 如何不进入 xcode 中的 shared_ptr

> ID：15556438
> 
> 赞同：6
> 
> 时间：2013-03-21T19:32:04.270
> 
> 标签：xcode, lldb

类似于这个问题： [如何避免在 Visual Studio 中调试到 Boost 源代码？](https://stackoverflow.com/questions/9037534/how-can-i-avoid-debugging-into-boost-source-code-in-visual-studio)

但是我怎样才能在 Xcode 中做到这一点？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T00:39:25.697

关键是 lldb 设置`target.process.thread.step-avoid-regexp`。在我的 Mac 上，这具有默认值`^std::`。您可能想通过输入 lldb 并键入来检查您的设置`settings show target.process.thread.step-avoid-regexp`。无论如何，你可以做的是编辑 ~/.lldbinit，如果它还不存在就创建它，然后添加一行

```
settings set target.process.thread.step-avoid-regexp ^(std::|boost::shared_ptr) 
```

这保留了之前不进入 std:: 东西的行为，也不会进入 shared_ptr。

# java - GAE - 未找到元数据

> ID：15556441
> 
> 赞同：3
> 
> 时间：2013-03-21T19:32:09.873
> 
> 标签：java, eclipse, google-app-engine, jsp

我想在应用引擎的表格中显示数据：

我的显示方法：

```
 public List<User> getAllEntries() {
        PersistenceManager pm = PMF.get().getPersistenceManager();
        Query q = pm.newQuery(User.class);
//      q.setOrdering("date desc");
        List<User> results = null;

        try {
            results = (List<User>) q.execute();
            if (!results.isEmpty()) {
                return results;
            }   
        } finally {
            q.closeAll();
            pm.close();
        }

        return results;
    } 
```

在这里我想在表格中显示它：

```
 <table class="table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Date</th>
                            <th style="width: 36px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <%
                            for (int i = 0; i < userDAO.getAllEntries().size(); i++) {
                                                                %>
                        <tr>
                            <td><%=userDAO.getAllEntries().get(i).getId()%></td>
                            <td><%=userDAO.getAllEntries().get(i).getEmail()%></td>
                            <td><%=userDAO.getAllEntries().get(i).getPassword()%></td>
                            <td><%=userDAO.getAllEntries().get(i).getWhen()%></td>
                        </tr>
                        <%
                            }
                        %>

                    </tbody>
                </table> 
```

我的域对象：

```
@PersistenceCapable(identityType=IdentityType.APPLICATION)
public class User {

    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.IDENTITY)
    private long id;

    //  @Persistent
    //  private String name;

    @Persistent
    private String email;

    @Persistent
    private String password;

    @Persistent
    private Date when;

    public User() {
        super();
    } 
```

当我运行它时，我得到：

```
 No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query? 
```

我的代码有什么问题。所有元数据都设置了吗？

看这里：

```
@Persistent
private Date when; 
```

**更新**

```
Caused by:

javax.jdo.JDOFatalUserException: No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query?
    at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:498)
    at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:230)
    at gaeTrader2.server.dao.DAOUser.getAllEntries(DAOUser.java:44)
    at org.apache.jsp.centralcommand_jsp._jspService(centralcommand_jsp.java:199)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
NestedThrowablesStackTrace:
No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query?
org.datanucleus.exceptions.NucleusFatalUserException: No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query?
    at com.google.appengine.datanucleus.query.DatastoreQuery.noMetaDataException(DatastoreQuery.java:1267)
    at com.google.appengine.datanucleus.query.DatastoreQuery.getSortProperty(DatastoreQuery.java:670)
    at com.google.appengine.datanucleus.query.DatastoreQuery.addSorts(DatastoreQuery.java:637)
    at com.google.appengine.datanucleus.query.DatastoreQuery.compile(DatastoreQuery.java:249)
    at com.google.appengine.datanucleus.query.JDOQLQuery.performExecute(JDOQLQuery.java:158)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1789)
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1666)
    at org.datanucleus.store.query.Query.execute(Query.java:1639)
    at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:221)
    at gaeTrader2.server.dao.DAOUser.getAllEntries(DAOUser.java:44)
    at org.apache.jsp.centralcommand_jsp._jspService(centralcommand_jsp.java:199)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

Caused by:

No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query?
org.datanucleus.exceptions.NucleusFatalUserException: No meta-data for member named date on class gaeTrader2.server.domain.User.  Are you sure you provided the correct member name in your query?
    at com.google.appengine.datanucleus.query.DatastoreQuery.noMetaDataException(DatastoreQuery.java:1267)
    at com.google.appengine.datanucleus.query.DatastoreQuery.getSortProperty(DatastoreQuery.java:670)
    at com.google.appengine.datanucleus.query.DatastoreQuery.addSorts(DatastoreQuery.java:637)
    at com.google.appengine.datanucleus.query.DatastoreQuery.compile(DatastoreQuery.java:249)
    at com.google.appengine.datanucleus.query.JDOQLQuery.performExecute(JDOQLQuery.java:158)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1789)
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1666)
    at org.datanucleus.store.query.Query.execute(Query.java:1639)
    at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:221)
    at gaeTrader2.server.dao.DAOUser.getAllEntries(DAOUser.java:44)
    at org.apache.jsp.centralcommand_jsp._jspService(centralcommand_jsp.java:199)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T16:00:58.843

你有没有在你的域对象上有一个名为“日期”的字段？我有一个由删除字段引起的类似问题。当我重新启动应用程序引擎实例时，错误消失了。

为此，请打开 Google Dev Console，选择您的项目并转到 App Engine > Instances，选择适当的版本并单击“关闭”。下次您的应用程序收到请求时，它将重新启动实例并且问题应该消失了。就我而言，该错误隐藏了一个不同的错误，当我再次查看日志时，它向我展示了我的代码无法正常工作的真正原因。

# express - 使用 Grunt 部署的节点检查器代码进行调试，非 Grunt 模块

> ID：15556445
> 
> 赞同：2
> 
> 时间：2013-03-21T19:32:31.487
> 
> 标签：express, gruntjs, node-inspector

我正在使用 Grunt 和 grunt-express 插件部署我的 Express 服务器。我正在尝试将节点检查器调试器附加到我的服务器上运行的代码：

节点 --debug ($which grunt) my_task

在我的 Chrome 调试窗口（我使用 Chrome）中，我可以看到在“脚本”选项卡下加载了许多 JS 文件，但它们都是来自 Grunt 和 Gruntacular 模块以及 Gruntfile.js 的代码

所以我不能在我自己的 Express 代码中设置断点。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:15:23.693

我个人也遇到了同样的问题。除了我直接在我的 app.js/server.js 文件上运行节点检查器，该文件包含我所有的快速配置和路由。

如果您单击文件窗格并开始输入，它将显示您是某个文件。我无法直接访问我的 app.js 文件，但我可以访问所有要求。

所以，就我而言——

*   单击文件窗格
*   打字`routes.js`直接跳到 routes.js
*   双击打开文件
*   单击数字线以设置断点
*   运行您的应用程序并等待它暂停。

    *   如果您没有看到任何事情发生，请尝试重新加载浏览器并再次使用该应用程序
    *   如果这不起作用，请尝试重新启动应用服务器，然后使用重新启动节点检查器

    `sudo node --debug app.js`
    `sudo node-inspector`

# unix - 尝试在 SAS 中使用 FILENAME 语句在 unix 上创建 .dat

> ID：15556446
> 
> 赞同：1
> 
> 时间：2013-03-21T19:32:34.720
> 
> 标签：unix, sas

已尝试`filename log_list pipe 'ls -1 /fbrms01/dev/Logs/*.log | xargs grep -l "ERROR:" > /fbrms01/dev/Logs/log_error.dat';`但未`log_error.dat`在 UNIX 上创建文件。

当我尝试

> ls -1 `/fbrms01/dev/Logs/*.log | xargs grep -l “错误：” > /fbrms01/dev/Logs/log_error.dat。

它`log_error.dat`在 UNIX 上创建了文件。

所以我认为文件名声明有些错误。有什么建议吗？

谢谢，山姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:15:43.020

也许[X语句](http://support.sas.com/documentation/cdl/en/hostunx/63053/HTML/default/viewer.htm#p0w7z1ah45wd1sn1kafn6uibm1mu.htm)（运行操作系统命令）更符合你写的。

```
x 'ls -1 /fbrms01/dev/Logs/*.log | xargs grep -l "ERROR:" > /fbrms01/dev/Logs/log_error.dat'; 
```

PIPE 访问方法将命令的输出发送到 INFILE，因此不需要将 STDOUT 定向到文件。

```
filename log_list pipe 'ls -1 `/fbrms01/dev/Logs/*.log | xargs grep -l "ERROR:"';
data ..;
   infile log_list;
   input  ...; 
```

# javascript - 如何根据绑定值隐藏 Knockout.js 中的按钮

> ID：15556447
> 
> 赞同：0
> 
> 时间：2013-03-21T19:32:39.020
> 
> 标签：javascript, html, css, knockout.js

我的 HTML 模板中有以下按钮，我只想显示它是否`CanCancel`为真：

```
<button data-bind="click: CancelProject, visible: CanCancel">Cancel Project</button> 
```

问题是模型绑定需要1-2秒，所以我实际上看到按钮几秒钟，然后当数据完全绑定时它就消失了。我希望按钮被隐藏，如果为真则*出现。*`CanCancel`

我尝试使用 CSS 来设置按钮的初始状态：

```
<button class="hidden" data-bind="click: CancelProject, visible: CanCancel">Cancel Project</button> 
```

在我的 CSS 中：

```
DIV.buttons button.hidden { display: none; } 
```

但是，当我这样做时，我永远不会看到按钮。`display: inherit;`这是因为如果值为 true ，Knockout.js 不会覆盖按钮的内联样式。

无论如何，有没有办法让 Knockout 明确设置内联显示样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:14:30.730

好的，我找到了一些简单的方法来解决这个问题。可能最简单的是使用[样式绑定](http://knockoutjs.com/documentation/style-binding.html)：

```
<button class="hidden" data-bind="click: CancelProject, style: { display: CanCancel ? 'inherit' : 'none' } ">Cancel Project</button> 
```

CSS 选择器`hidden`会将初始状态设置为隐藏，并且绑定的内联样式将在绑定模型时覆盖此状态。

第二种方式可能更灵活一些。`<body>`我在标签中添加了一个 CSS 类：

```
<body class="loading"> 
```

现在，我可以在页面加载时隐藏某些元素：

```
BODY.loading DIV.buttons { display: none; } 
```

最后，当我绑定数据时，我可以删除类：

```
ko.applyBindings(model);
$(document.body).removeClass('loading'); 
```

这将允许我准确控制使用纯 CSS 加载页面时各种元素的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:48:16.253

我通常将所有将通过敲除绑定到 div 集合中的内容包装，`display:none`然后在 之后使用（例如）jQuery 使其可见，`ko.applyBindings`或者使用自定义敲除绑定使其可见链接到 a或类似属性（如果您的 VM 涉及通过 AJAX 加载数据，这很有用）甚至只是我的视图模型中的绑定。`loaded``ready``with`

这是一个简单的自定义绑定，它使用 jQuery`.show()`使元素可见，即使它最初设置为`display:none`：

```
ko.bindingHandlers["realVisible"] = {
    init: function(element, valueAccessor) {
        var val = ko.utils.unwrapObservable(valueAccessor());
        if (val) {
            $(element).show();
        }
        else {
            $(element).hide();
        }
    },
    update: function(element, valueAccessor) {
        var val = ko.utils.unwrapObservable(valueAccessor());
        if (val) {
            $(element).show();
        }
        else {
            $(element).hide();
        }
    }
} 
```

这是一个演示[小提琴](http://jsfiddle.net/uChDj/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:11:21.160

对此的快速而肮脏的解决方案如下：

```
<button class="hidden" data-bind="click: CancelProject, style: { display: CanCancel ? 'inherit' : ''}">Cancel Project</button> 
```

在此处查看有关样式绑定的更多信息[。](http://knockoutjs.com/documentation/style-binding.html)

综上所述，它又快又脏，如果您正在使用更大的项目/框架，您可能想要使用 Matt 的答案。

# django - django-notification 错误：NoticeType 匹配查询不存在？

> ID：15556449
> 
> 赞同：1
> 
> 时间：2013-03-21T19:32:52.827
> 
> 标签：django, email, python-2.7, backend, django-notification

我正在尝试使用 django-notification 发送电子邮件。我已经按照文档创建了所有通知类型、模板和 management.py。但是，当我尝试发送电子邮件时，显示此调试页面并显示错误：NoticeType 匹配查询不存在。这是一些代码。

在我的 management.py 文件中：

```
from django.conf import settings
from django.db.models import signals
from django.utils.translation import ugettext_noop as _

if "notification" in settings.INSTALLED_APPS:
    from notification import models as notification

    def create_notice_types(app, created_models, verbosity, **kwargs):
        notification.NoticeType.create("create_model", _("Model Creation"), _("An entry has been created"))
        notification.NoticeType.create("delete_model", _("Model Deletion"), _("An entry has been deleted"))
        notification.NoticeType.create("edit_model", _("Model Change"), _("An entry has been changed."))
    signals.post_syncdb.connect(create_notice_types, sender=notification)
else:
    print "Skipping creation of NoticeTypes as notification app not found" 
```

在我的 settings.py 文件中：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'departments',
    'notification'
)

EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'texturamail@gmail.com'
EMAIL_HOST_PASSWORD = #not shown
EMAIL_PORT = 587
NOTIFICATION_BACKENDS = [("texturamail@gmail.com", "notification.backends.email.EmailBackend"),]
#other code.... 
```

在我的 models.py 文件中：

```
def model_create_edit(sender, **kwargs):
      instance = kwargs.get('instance')
      user, first_name, last_name = instance.user, instance.user.first_name, instance.user.last_name
      if kwargs['created']:
            notification.send([user], "create_email", {'user':user, 'first':first_name, 'last':last_name})

      else:
            notification.send([user], "edit_email", {'user':user, 'first':first_name, last':last_name})           

def model_deletion(sender, **kwargs):
      instance = kwargs.get('instance')
      user, first_name, last_name = instance.user, instance.user.first_name, instance.user.last_name
      notification.send([user], "delete_email", {'user':user, 'first':first_name, 'last':last_name}) 
```

抱歉，页面代码超载。也就是说，我做错了什么吗？有什么遗漏吗？任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:40:47.890

发生这种情况是因为您尝试将不存在的东西分配给`NoticeType`对象。问题是我真的不明白代码的哪一部分是这样做的，但是添加`try:`，`except:`可以解决问题。每当您匹配查询以添加它时尝试一下，您会找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T17:34:28.467

发生这种情况是因为您`NoticeType`使用标签创建了`create_model`, `delete_model`, `edit_model`。但是当您`notifications.send`使用不同的标签发送通知时：`create_email`等标签必须与您首先创建的标签相同。您应该更改`create_mail`为`create_model` `notification.send([user], "create_model", {'user':user, 'first':first_name, 'last':last_name})`.

# directx - SharpDX：从 D3D10.Texture2D 创建 D3D11.Texture2D？

> ID：15556453
> 
> 赞同：2
> 
> 时间：2013-03-21T19:33:04.817
> 
> 标签：directx, sharpdx

我正在使用 SharpDX 并尝试创建一个`D3D11.Texture2D`指向与现有`D3D10.Texture2D`. 我认为我需要得到一个`DXGI.Surface`并使用它来创建新纹理，但我总是得到这个无益的错误：

> HRESULT：[0x80070057]，模块：[Unknown]，ApiCode：[Unknown/Unknown]，消息：参数不正确。

这是我当前编译但不起作用的代码：

```
private D3D11.Texture2D CreateD3D11Texture2D(D3D10.Texture2D d3d10Texture2D)
{
    var texDesc = new D3D11.Texture2DDescription
    {
        ArraySize = 1,
        BindFlags = D3D11.BindFlags.ShaderResource | D3D11.BindFlags.UnorderedAccess,
        CpuAccessFlags = D3D11.CpuAccessFlags.None,
        Format = DXGI.Format.B8G8R8A8_UNorm,
        Height = d3d10Texture2D.Description.Height,
        MipLevels = 1,
        OptionFlags = D3D11.ResourceOptionFlags.None,
        SampleDescription = new DXGI.SampleDescription(1, 0),
        Usage = D3D11.ResourceUsage.Default,
        Width = d3d10Texture2D.Description.Width
    };

    SharpDX.DataRectangle dataRectangle;
    using (var surface = d3d10Texture2D.QueryInterface<DXGI.Surface>())
    {
        int pitch = d3d10Texture2D.Description.Width
            * (int)DXGI.FormatHelper.SizeOfInBytes(d3d10Texture2D.Description.Format);
        dataRectangle = new SharpDX.DataRectangle(surface.NativePointer, pitch);
    }

    return new D3D11.Texture2D(this.d3d11Device, texDesc, dataRectangle);
} 
```

**更新**

我遇到了一个概述[如何在不同 DirectX 设备之间共享表面](https://stackoverflow.com/a/9071915/1339280)的答案。基于此，我认为`D3D11.Texture2D`从 a获取 a 的正确方法`D3D10.Texture2D`是获取资源接口并调用`OpenSharedResource()`.

这样做可以大大简化我的功能：

```
private D3D11.Texture2D CreateD3D11Texture2D(D3D10.Texture2D d3d10Texture2D)
{
    using (var resource = d3d10Texture2D.QueryInterface<DXGI.Resource>())
    {
        return this.d3d11Device.OpenSharedResource<D3D11.Texture2D>(resource.SharedHandle);
    }
} 
```

它似乎工作。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:40:35.437

要在多个纹理之间共享数据，请获取一个`DXGI.Resource`接口，然后调用`OpenSharedResource()`. 以下是使用 SharpDX 的方法：

```
private D3D11.Texture2D CreateD3D11Texture2D(D3D10.Texture2D d3d10Texture2D)
{
    using (var resource = d3d10Texture2D.QueryInterface<DXGI.Resource>())
    {
        return this.d3d11Device.OpenSharedResource<D3D11.Texture2D>(resource.SharedHandle);
    }
} 
```

[这是](https://stackoverflow.com/a/9071915/1339280)另一个问题的答案，其中包含有关在不同 DirectX 设备之间共享表面的更多一般信息。

# .htaccess - 将请求重定向到与模式不匹配的目录

> ID：15556454
> 
> 赞同：2
> 
> 时间：2013-03-21T19:33:05.633
> 
> 标签：.htaccess, url, redirect

我有以下网址

```
1) domain.com/articles/one-two-three
2) domain.com/articles/four-five-six
3) domain.com/articles/{name of a post}
4) domain.com/articles/wp-content/
5) domain.com/articles/wp-admin/ 
```

我想重定向 URL 1、2 和 3，但不是 4 和 5。换句话说，我想重定向`/articles/`目录中不以开头的所有页面`wp-`

以下代码段将重定向之后的所有内容`/articles/`

```
Options +FollowSymlinks
RewriteEngine on
# RedirectMatch 301 /articles/(.*) http://domain.com/$1 
```

如何过滤此重定向匹配以排除模式？

**编辑**回应一些评论

您正在测试的输入 URL（来自浏览器）是什么，

```
http://www.chipkin.com/articles/steam-boilers-vs-hydronic-boilers/ 
```

什么是预期的输出？

```
http://www.chipkin.com/steam-boilers-vs-hydronic-boilers/ 
```

由于这似乎是 WordPress，请在 .htaccess 中发布您可能已经拥有的任何其他规则，因为可能存在冲突。

```
RewriteEngine On
# If the request doesn't start /articles/wp-
RewriteCond %{REQUEST_URI} !^/articles/wp-
# Rewrite it:
RewriteRule ^articles/(.*) http://www.chipkin.com/$1 [L,R=301]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:37:09.610

而不是 a `RedirectMatch`，使用 a`RewriteCond`来验证 URI 不以`/articles/wp-`并执行重写：

```
RewriteEngine On
# If the request doesn't start /articles/wp-
RewriteCond %{REQUEST_URI} !^/articles/wp-
# Rewrite it:
RewriteRule ^articles/(.*) http://domain.com/$1 [L,R=301] 
```

# c++ - C++ 重载运算符不会修改原始对象（通过引用传递）

> ID：15556455
> 
> 赞同：2
> 
> 时间：2013-03-21T19:33:19.380
> 
> 标签：c++, reference, operator-overloading

我正在创建一个子类向量，我想重载它的 = 运算符（最初是 + 运算符），但如果我将它的结果分配给一个引用，它不会修改原始对象。
似乎我遗漏了一些关于 C++ 引用的内容，但我不知道它是什么。如果有人能指出我的错误，我将不胜感激。

这是代码（在 Ubuntu 12 上使用 g++ 编译）

```
#include <iostream>
#include <vector>

using namespace std;
class myvector : public vector<long double> {
    public: 
    int n_elements;
    myvector(int elems){
        n_elements = elems;
        reserve(n_elements);
    }
    myvector(int elems,long double initWith){
        n_elements = elems;
        reserve(n_elements);
        for (int i=0; i<n_elements; i++)    
            (*this)[i]=initWith;
    }
    myvector& operator= (const vector<long double>& v){
        for(int i = 0; i < n_elements; i++) 
            (*this)[i]=v[i];

        return *this;           
    }   
};

#define SIZE 200 
void fill(myvector& m){
    myvector temp = myvector(SIZE,1.0);
    cout <<"0 "<< temp[0] << endl; // (0) returns 1
    m = temp;
    cout <<"1 "<< m[0] << endl; // (1) returns 12
}
int main(){
    myvector m = myvector(SIZE,12.0);
    fill(m);
    cout <<"2 "<< m[0] << endl; // (2) returns 12
    myvector n = myvector(SIZE,1.0);
    cout <<"3 "<< n[0] << endl; // (3) returns 1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:38:32.483

这段代码

```
myvector(int elems,long double initWith){
    n_elements = elems;
    reserve(n_elements);
    for (int i=0; i<n_elements; i++)    
        (*this)[i]=initWith;
} 
```

应该简单地调用基类版本：

```
myvector(int const elems, long double const initWith)
    : vector<long double>(elems, initWith)
{} 
```

这将解决您有两个长度度量`vector.size()`和`n_elements`不同步的事实。只需完全摆脱`n_elements`并使用`size()`您继承的功能。

# crystal-reports - 为什么导出 Crystal Report 会导致我的 MAPI 通讯簿抛出异常？

> ID：15556456
> 
> 赞同：0
> 
> 时间：2013-03-21T19:33:21.390
> 
> 标签：crystal-reports, mapi

我遇到了一个奇怪的问题，即导出水晶报表会导致显示 MAPI 通讯簿出现问题。这是两个完全不相关的任务，我不明白一个如何影响另一个。

这是导出报告的示例：

```
Using rpt As New TestReport
    rpt.ExportToStream(ExportFormatType.PortableDocFormat)
End Using 
```

这是显示 MAPI 通讯簿的示例：

```
Dim msg As New AxMSMAPI.AxMAPIMessages
Dim sess As New AxMSMAPI.AxMAPISession
Dim f As System.Reflection.FieldInfo
Const MAPI_LICENSE As String = "mgkgtgnnmnmninigthkgogggvmkhinjggnvm"

f = GetType(AxHost).GetField("licenseKey", System.Reflection.BindingFlags.NonPublic Or System.Reflection.BindingFlags.Instance)
f.SetValue(msg, MAPI_LICENSE)
f.SetValue(sess, MAPI_LICENSE)

sess.Parent = Me
msg.Parent = Me

sess.DownLoadMail = False
sess.LogonUI = True
sess.SignOn()
sess.NewSession = True
msg.SessionID = sess.SessionID
msg.Compose()

msg.Action = MSMAPI.MessagesActionConstants.mapShowAddressBook

sess.SignOff() 
```

一件奇怪的事情是，如果我首先显示 MAPI 通讯簿，那么在程序的剩余生命周期中，导出水晶报表和显示 MAPI 通讯簿都会起作用。如果我先导出，则 MAPI 通讯簿在程序的剩余生命周期内都不起作用。

引发的异常在以下行中为“发生未指定的故障”，错误代码为“-2146796286”

```
msg.Action = MSMAPI.MessagesActionConstants.mapShowAddressBook 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:48:46.703

值得一提的是，我的 MAPI 代码和 Crystal Reports 也有问题。我从来没有机会找出最终原因，但在某些情况下，查询当前文件夹、运行报告、然后恢复当前文件夹似乎有所帮助。

# opengl - 为什么我的 glutWireSphere 没有填充颜色？

> ID：15556458
> 
> 赞同：0
> 
> 时间：2013-03-21T19:33:26.850
> 
> 标签：opengl, colors, glut

我正在尝试制作一个“飞艇”漂浮在窗口上的基本动画。我已经尝试过调整不同的教程和资源来帮助构建我的代码，以便轻松接受批评。我还在想办法。我的主要问题是为什么我的 glutWireSphere 没有填充其指定的颜色？只有轮廓是可见的。让我知道任何建议。代码如下。

```
#include <stdlib.h> // need to include for non keywords like NULL
#include <GLUT/GLUT.h> // open gl wrapper class

GLfloat speedX = 0.01; // blimp's speed in x & y position
GLfloat speedY = 0.001;
GLfloat blimpX = 0.0; // blimp's (x,y) position
GLfloat blimpY = 0.0;
GLfloat blimpXMax, blimpXMin, blimpYMax, blimpYMin; // blimp's bounds

class Blimp {

    public:
    void draw(void);
};

void Blimp::draw(void)
{
    glPushMatrix();
        glColor3f(1.0,1.0,0.0);
        glutWireSphere(8, 25.0, 25.0);
        glPushMatrix();
        glTranslatef(-8, 0,0);
        glutWireSphere(6, 25, 25);
        glPopMatrix();
    glPopMatrix();
}

void display()
{

    glMatrixMode(GL_MODELVIEW);
    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix(); // save modelview matrix
    Blimp blimp;
    glTranslatef(blimpX, blimpY, 0.0); // move blimp
    blimp.draw();
    glPopMatrix(); // restore modelview matrix
    glutSwapBuffers();

    // compute location for next refresh
    blimpX += speedX;
    blimpY += speedY;

    //check if blimp exceeds edges: return on other side
    if (blimpX > blimpXMax + 14) {
        blimpX = blimpXMin - 14;
    } else if (blimpX < blimpXMin - 14) {
        blimpX = blimpXMax + 14;
    }
    /*  
    // check if blimp exceeds edges: bounce back other direction
    if (blimpX > blimpXMax) {
        blimpX = blimpXMax;
        speedX = -speedX;
    }   else if (blimpX < blimpXMin) {
        blimpX = blimpXMin;
        speedX = -speedX;
    }
     */

    if (blimpY > blimpYMax) {
        blimpY = blimpYMax;
        speedY = -speedY;
    }   else if (blimpY < blimpYMin){
        blimpY = blimpYMin;
        speedY = -speedY;
    }

}

void reshape(int w, int h)
{
    glViewport (0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-50.0, 50.0, -50.0, 50.0, -1.0, 1.0);
    blimpXMin = -50.0 + 14;
    blimpXMax = 50 - 8;
    blimpYMin = 25;
    blimpYMax = 50 - 8;

}

int main(int argc, char** argv)
{

    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_RGB | GLUT_DOUBLE);
    glutInitWindowSize (500, 500);
    glutInitWindowPosition (100, 100);
    glutCreateWindow (argv[0]);
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutIdleFunc(display);
    glutMainLoop();
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:37:48.247

`glutWireSphere`绘制*线框*球体。你想要`glutSolidSphere`。

见：[http ://www.opengl.org/documentation/specs/glut/spec3/node81.html](http://www.opengl.org/documentation/specs/glut/spec3/node81.html)

# screen - 如何显示在小屏幕上溢出的 Zurb Foundation 粘滞菜单？

> ID：15556466
> 
> 赞同：0
> 
> 时间：2013-03-21T19:33:53.850
> 
> 标签：screen, media-queries, zurb-foundation, sticky

我正在使用`Zurb Foundation 4.0.9`并且我正在使用`.sticky`顶部栏菜单。它在大屏幕设备上运行良好。

**但是当我在小屏幕**上使用粘性菜单时，我的菜单中的项目太多以至于它的底部溢出并且我无法将它放入屏幕（因为粘性属性）。

最简单的答案是创建两个菜单，一个是大屏幕的粘性菜单，一个是小屏幕的固定菜单，但我会有重复的标记。还有其他方法吗？

**编辑：** 我正在使用Zurb 文档中提供的[顶部栏的代码。](http://foundation.zurb.com/docs/components/top-bar.html "顶栏")当菜单垂直*展开时会出现问题。*其中一些是溢出的。

**EDIT2：**这是问题的视觉呈现：[截图](http://postimg.org/image/e28fd9o5l/)

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:42:12.907

最好使用[顶部栏](http://foundation.zurb.com/docs/components/top-bar.html)，因为它将为您处理元素（导航）的大小调整和切换。这是我从 Foundation 的文档页面借用和简化的代码：

```
<div class="sticky">
    <nav class="top-bar">
      <ul class="title-area">
        <!-- Title Area -->
        <li class="name">
          <h1><a href="#">Top Bar Title </a></h1>
        </li>
        <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>

      <section class="top-bar-section">
        <!-- Left Nav Section -->
        <ul class="left">
          <li class="divider"></li>
          <li class="active"><a href="#">Main Item 1</a></li>
          <li class="divider"></li>
          <li><a href="#">Main Item 2</a></li>      
          <li class="divider"></li>
        </ul>

        <!-- Right Nav Section -->
        <ul class="right">
          <li class="divider hide-for-small"></li>
          <li class="has-dropdown"><a href="#">Main Item 3</a>

            <ul class="dropdown">
              <li><label>Dropdown Level 1 Label</label></li>
              <li class="has-dropdown"><a href="#" class="">Dropdown Level 1a</a>

                <ul class="dropdown">
                  <li><a href="#">Dropdown Level 2a</a></li>
                  <li><a href="#">Dropdown Level 2b</a></li>                  
                </ul>
              </li>          
            </ul>
          </li>
          <li class="divider"></li>
          <li class="has-form">
            <form>
              <div class="row collapse">
                <div class="small-8 columns">
                  <input type="text">
                </div>
                <div class="small-4 columns">
                  <a href="#" class="alert button">Search</a>
                </div>
              </div>
            </form>
          </li>
          <li class="divider show-for-small"></li>
          <li class="has-form">
            <a class="button" href="#">Button!</a>
          </li>
        </ul>
      </section>
    </nav>
</div> 
```

这里的关键是您需要将导航包装在一个`sticky`div 中，我认为您已经知道了，并且需要`top-bar`在 nav 元素上包含一个类。如果您这样做，该基金会将为您处理其余的事情。为了了解菜单在较小屏幕上是如何隐藏的，对其应用了 45px 的高度，与整个导航的高度相同。当您单击菜单图标时，`expanded`会应用一个类，`nav`这样您就可以看到您的菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:54:06.143

阅读答案和评论后，这似乎是一个 Zurb Foundation 4.0.9**错误**（跨设备不一致但仍可重现）。

# python - 编辑新字典时，如何保持原始字典不变

> ID：15556467
> 
> 赞同：1
> 
> 时间：2013-03-21T19:34:00.870
> 
> 标签：python, immutability

我刚开始学习 Python 编码。请允许我问一个困扰我很久的愚蠢问题。

```
g={1:'a',2:'b',3:["k",'c'],4:'d'}

gt=g    

gt[3].remove('c') 
```

我怎样才能让 g 保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:26:13.157

为此使用[副本。](http://docs.python.org/2/library/copy.html)并且由于您复制包含列表的字典并且想要编辑该列表，因此您应该使用 deepcopy：

```
from copy import deepcopy

g={1:'a',2:'b',3:["k",'c'],4:'d'}

gt=copy.deepcopy(g)  

gt[3].remove('c') 
```

# java - 无法跟踪函数内的变量并将它们存储在java中的数据结构中

> ID：15556472
> 
> 赞同：0
> 
> 时间：2013-03-21T19:34:29.573
> 
> 标签：java

下面给出了一个名为 Abc 的类：

```
class Abc{

static int balance=1000;

public String method1(int amount, String password){
    String newPass=password;
    String str=newPass;
    balance=balance+amount;
    return str;
}
} 
```

上面的类在下面的给定代码中使用：

```
class Xyz{

public static void main(String args[]){
    Abc abc=new Abc();
    int x=100;
    String y="gopal";
    String result=abc.method1(x,y);

    System.out.println("The password of the user is: "+result);
}
} 
```

现在，问题是，我想获取密码值（即 y="gopal"）传递的所有变量的名称。

有没有办法这样做？

简而言之，我只想跟踪用户输入的特定值并注意它在整个执行过程中通过的变量的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:39:55.820

最好的方法是**在 Eclipse 中以调试模式运行程序**并观察变量的值。或者，您可以在控制台上打印变量的值并进行检查。我认为第一种方法更有效。

# comments - Google Apps 脚本电子表格评论自动化

> ID：15556476
> 
> 赞同：17
> 
> 时间：2013-03-21T19:34:48.320
> 
> 标签：comments, google-apps-script, google-sheets

今天我有一个关于 Google Apps 脚本的问题，特别是针对*电子表格*的问题。我已经查看了[此处](https://developers.google.com/apps-script/class_range)的文档（是的，电子表格中的工作*表*上的文档），但我无法找到我要查找的内容。这是缝：

1.）当在谷歌电子表格中编辑一个单元格时，我使用该函数设置了一个*注释*（是的，它说*cell.setComment()*，但实际上它会创建一个注释。感谢您的一致，谷歌！）：

```
function onEdit() {
var doc = SpreadsheetApp.getActiveSpreadsheet();
var sheet = doc.getActiveSheet();
var cell = sheet.getActiveCell();
cell.setComment("Last modified: + (new Date()));
} 
```

2.) 自 2012 年 9 月 5 日起，注释已被*评论*“取代” ？也许？我宁愿使用那些。

3.）对于这两种类型的“单元格符号”，存在仅用于*设置*注释/注释的功能，而不是*添加*（根据文档）。

4.) 我想引用或编写一个能够添加新注释/注释的函数（最好是注释，它们更容易阅读），而不是设置注释/注释。

5.）您可以通过电子表格本身的 GUI 手动添加注释/注释（右键单击单元格并选择“插入注释”或“插入注释”。因为这些右键单击功能存在让我相信我们可以编写一个脚本来做同样的事情，但是当单元格被编辑时自动调用它。

6.) 此功能将用于跟踪单元格修订历史。我知道我可以轻松地创建一个新电子表格并将修订历史记录发送到该新电子表格，但考虑到我有 10 个电子表格需要跟踪，我宁愿没有 10 个新电子表格来跟踪历史记录。将其保存在同一个电子表格中将使事情变得简单。

如果有人可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-23T04:28:33.057

无法通过电子表格服务处理评论 - 请参阅[问题 36756650](https://issuetracker.google.com/issues/36756650)。（如果你愿意，可以加星标。）

相反，所有“评论”方法都适用于 Notes。

以下方法将为任何现有时间戳附加一个新的“修改”时间戳 - 不幸的是，它不像实际的评论那么好看。

```
function onEdit() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var cell = sheet.getActiveCell();
  var comments = cell.getComment();
  // Newline works in msgBox, but not in Note.
  comments = comments + "\\nModified: " + (new Date());
  //Browser.msgBox(comments);
  cell.setComment(comments);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-04T18:58:38.910

dic 2018 的更新答案：

现在 Google 在 Range 类中支持 setNote(String) 和 setNotes(Object[]) 方法。

getComment() 和 setComment() 方法不再存在。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-03T14:50:34.777

在 Google Apps Script 中使用[Google Drive API](https://developers.google.com/drive/v2/reference/comments/insert)，我们可以在 Google 文档中创建评论。
经过测试，我确认您也可以在电子表格中执行此操作（这很正常，因为 Comments 仅取决于 Drive API）

```
function insertDriveComment(fileId, comment, context) {
  var driveComment = {
    content: comment,
    context: {
      type: 'text/html',
      value: context
    }
  };
  Drive.Comments.insert(driveComment, fileId);  
} 
```

[请记住，您不能以编程方式将评论附加到单元格（或 Google 文档中的单词），因为文档和电子表格评论的锚点是专有的（在此处查看](https://developers.google.com/drive/web/manage-comments)页面底部的视频）

希望它可以提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T06:29:24.347

Now you can use setNote() and getNote()

```
var sheet = SpreadsheetApp.getActiveSpreadsheet();
 var cell = sheet.getActiveCell();
 var comments = cell.getNote();
 cell.setNote(comments); 
```

# internet-explorer - 在哪里放置 IE 条件语句以获得更好的组织？

> ID：15556478
> 
> 赞同：0
> 
> 时间：2013-03-21T19:35:15.040
> 
> 标签：internet-explorer, cross-browser, structure, conditional-statements

我正在为 IE8 和 IE9 使用以下 IE 兼容性。很好，它工作得很好，但是你可以看到很长，对吧？

所以我想将它作为外部链接或任何其他解决方案插入文件中。您可以在哪里放置此代码，以免在标题上惹恼您？

```
<!-- IE compatibility -->
            <!--[if lt IE 8]>
       <script>
          document.createElement('header');
          document.createElement('nav');
          document.createElement('section');
          document.createElement('article');
          document.createElement('aside');
          document.createElement('footer');
       </script>
    <![endif]-->

            <!--[if lt IE 9]>
       <script>
          document.createElement('header');
          document.createElement('nav');
          document.createElement('section');
          document.createElement('article');
          document.createElement('aside');
          document.createElement('footer');
       </script>
    <![endif]--> 
```

# vba - VB 选择语句

> ID：15556489
> 
> 赞同：0
> 
> 时间：2013-03-21T19:35:38.340
> 
> 标签：vba

我正在将 VB 应用程序转换为 C#。我遇到了这个 select 语句，并且很困惑为什么它甚至是必要的。'case else' 不就像 C# switch 语句中的默认值一样吗？

```
Select Case dbp.DbType
 Case Else
 dbcmd.CommandText &= " [" & dbp.ParameterName & "]='" & dbp.Value.ToString().Replace("'", "''") & "'"
End Select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:38:50.730

你是对的，完全没有必要。在没有所有其他`Case`条款的情况下，此代码转换为：

```
dbcmd.CommandText &= " [" & dbp.ParameterName & "]='" & dbp.Value.ToString().Replace("'", "''") & "'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:38:38.063

您发布的`Select Case`代码是多余的。只要没有其他`Case ConditionHere`的，该行将`dbcmd...`一直被执行，即可以删除case语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:38:48.657

正确的; `CASE ELSE`VBA 中的语句类似于`default`C# 开关的语句。

`CASE ELSE``default`如果不满足其他条件，两者都将执行；我认为您的 VBA 代码还有更多内容，因为单机版`CASE ELSE`没有多大意义。

# python - Django DB 设置“配置不当”错误

> ID：15556499
> 
> 赞同：170
> 
> 时间：2013-03-21T19:36:12.480
> 
> 标签：python, django

Django (1.5) 对我来说工作得很好，但是当我启动 Python 解释器 (Python 3) 来检查一些东西时，我在尝试导入时遇到了最奇怪的错误 - `from django.contrib.auth.models import User`-

```
Traceback (most recent call last):
  File "/usr/local/lib/python3.2/dist-packages/django/conf/__init__.py", line 36, in _setup
    settings_module = os.environ[ENVIRONMENT_VARIABLE]
  File "/usr/lib/python3.2/os.py", line 450, in __getitem__
    value = self._data[self.encodekey(key)]
KeyError: b'DJANGO_SETTINGS_MODULE'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python3.2/dist-packages/django/contrib/auth/models.py", line 8, in <module>
    from django.db import models
  File "/usr/local/lib/python3.2/dist-packages/django/db/__init__.py", line 11, in <module>
    if settings.DATABASES and DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python3.2/dist-packages/django/conf/__init__.py", line 52, in __getattr__
    self._setup(name)
  File "/usr/local/lib/python3.2/dist-packages/django/conf/__init__.py", line 45, in _setup
    % (desc, ENVIRONMENT_VARIABLE))

django.core.exceptions.ImproperlyConfigured: Requested setting DATABASES, 
  but settings are not configured. You must either define the environment 
  variable DJANGO_SETTINGS_MODULE or call settings.configure() 
  before accessing settings. 
```

当它在 Python 解释器之外正常工作时，它怎么可能配置不正确？在我的 Django 设置中，`DATABASES`设置为：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'django_db', # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': 'zamphatta',
        'PASSWORD': 'mypassword91',
        'HOST': '', # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '', # Set to empty string for default.
    }
} 
```

...这是如何配置不正确的？

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2013-03-21T19:42:18.123

你不能只启动 Python 并检查，Django 不知道你想从事什么项目。您必须执行以下操作之一：

*   采用`python manage.py shell`
*   使用`django-admin.py shell --settings=mysite.settings`（或您使用的任何设置模块）
*   将`DJANGO_SETTINGS_MODULE`操作系统中的环境变量设置为`mysite.settings`
*   （这在 Django 1.6 中被删除）`setup_environ`在 python 解释器中使用：

    ```
    from django.core.management import setup_environ
    from mysite import settings

    setup_environ(settings) 
    ```

当然，第一种方法是最简单的。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-07-11T02:01:56.260

在你的 python shell/ipython 中做：

```
from django.conf import settings

settings.configure() 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-10-01T19:28:49.203

在 2017 年使用 django 1.11.5 和 python 3.6（*从评论中这也适用于 Python 2.7*）：

```
import django
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")
django.setup() 
```

您放置此代码的`.py`位置应位于`mysite`（父级）

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-09-22T18:05:52.983

在 Django 1.9 上，我尝试`django-admin runserver`并得到了同样的错误，但是当我使用时，`python manage.py runserver`我得到了预期的结果。这可能会解决很多人的这个错误！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-12T21:02:07.303

就我而言，我在尝试通过 PyCharm 运行 Django 测试时得到了这个。我认为这是因为 PyCharm 没有加载初始的 Django 项目设置，即那些`manage.py shell`最初运行的设置。可以将它们添加到测试脚本的开头，或者只使用`manage.py test`.

版本：

*   Python 3.5（在 virtualenv 中）
*   PyCharm 2016.3.2 专业版
*   姜戈 1.10

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-17T20:42:54.840

在我自己的情况下，在 python2.7.11 上运行的 django 1.10.1 中，我试图使用`django-admin runserver`而不是`manage.py runserver`在我的项目目录中启动服务器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-21T07:42:57.520

对于使用 IntelliJ 的人，通过这些设置，我可以从 shell（在 Windows 上）进行查询。

[![在此处输入图像描述](../Images/f336a68d9d014f4d26054868ccbcf1b5.png)](https://i.stack.imgur.com/BfOqg.png)

# graph - 在网络中，节点之间的链接越多越好吗？

> ID：15556505
> 
> 赞同：0
> 
> 时间：2013-03-21T19:36:31.513
> 
> 标签：graph, graph-theory

从理论上讲，是否需要完整的图（最好的）？因为每个节点都有链接？任何参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:50:51.670

这真的取决于你所说的“最好”是什么意思。如果您正在谈论最大化流量，您可能会通过具有适当权重的完整图表来接近流量的理论上限。但是，如果您真的在谈论某个真实系统中的“最佳”，那么一个完整的图表不太可能是一个人为大多数事情构建的网络，因为这样做会造成浪费。

您的问题似乎与[Max-flow min-cut theorem](http://en.wikipedia.org/wiki/Max-flow_min-cut_theorem)有关。请注意，完整图中的最小割总是至少`|V|-1`为 ，因为每个顶点都至少有那么多边。

# jquery - 开箱即用的 Angular.js 不能做什么，而 jQuery 可以做什么

> ID：15556507
> 
> 赞同：-6
> 
> 时间：2013-03-21T19:36:50.797
> 
> 标签：jquery, angularjs, javascript, javascript-framework

开箱即用的 Angular.js 不能做什么，而 jQuery 可以做什么？

如果我从 jQuery 切换到 Angular，我可能会遇到什么问题？基本上我的代码包含许多*onclick* ->*进行 ajax 调用*->*添加或删除一些元素，更改 css，替换一些文本*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:00:00.467

“游戏和 GUI 编辑器是非常密集和棘手的 DOM 操作的示例。这些类型的应用程序与 CRUD 应用程序不同，因此不适合 Angular。在这些情况下使用更接近裸机的东西，例如 jQuery可能更合适。” --[概述文档](http://docs.angularjs.org/guide/overview)

# android - Android：如何使用 PowerManager.wakeUp？

> ID：15556508
> 
> 赞同：1
> 
> 时间：2013-03-21T19:36:53.437
> 
> 标签：android, wakeup, powermanager

我想使用PowerManager的方法[wakeUp](http://developer.android.com/reference/android/os/PowerManager.html#wakeUp(long))。Eclipse (ADT) 不会重新调整此方法。但是相反的 "goToSleep" 没有问题：

```
PowerManager pm = (PowerManager) MyApplication.getAppContext().getSystemService(Context.POWER_SERVICE);
pm.wakeUp(SystemClock.uptimeMillis()); //Detected as error by eclipse
pm.goToSleep(SystemClock.uptimeMillis()); //Not detected as error and work well 
```

日食错误：

```
The method wakeUp(long) is undefined for the type PowerManager 
```

Eclipse 向我提出了一个快速修复，但我有同样的错误：

```
((Object) pm).wakeUp(SystemClock.uptimeMillis()); //the same error 
```

这是一个错误还是只是我？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T19:53:30.093

首先，正如 Luksprog 所指出的，该方法是 API 级别 17 的新方法。

此外，它需要`DEVICE_POWER`许可，该许可只能由使用与用于签署固件相同的签名密钥签署的应用程序持有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T12:02:58.650

我看到你有一个自定义的 rom。您可以使用[uiautomator中的](http://developer.android.com/tools/help/uiautomator/index.html)[sleep()](http://developer.android.com/tools/help/uiautomator/UiDevice.html#sleep%28%29)和[wakeUp()](http://developer.android.com/tools/help/uiautomator/UiDevice.html#wakeUp%28%29) ，从api 级别 16 开始，基本上实现与 PowerManager wakeUp() 和 goToSleep() 相同的功能，但不受操作系统不会授予您的权限的限制（ android.permission.DEVICE_POWER）。

请参阅我的另一个[答案](https://stackoverflow.com/a/27787068/1749806)，我在其中更详细地解释了设置是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-22T11:38:10.460

您应该查看 PowerManager WakeLock API，特别是标志[ACQUIRE_CAUSES_WAKEUP](https://developer.android.com/reference/android/os/PowerManager#ACQUIRE_CAUSES_WAKEUP)：

> ACQUIRE_CAUSES_WAKEUP（在 API 级别 1 中添加）
> 
> `public static final int ACQUIRE_CAUSES_WAKEUP`
> 
> 唤醒锁定标志：获得唤醒锁定时打开屏幕。
> 
> 通常，唤醒锁实际上不会唤醒设备，它们只会使屏幕在它已经打开时保持打开状态。将视频播放器应用程序视为正常行为。弹出并希望设备开启的通知是例外；使用这面旗帜成为他们的样子。
> 
> 不能与 PARTIAL_WAKE_LOCK 一起使用。
> 
> 常数值：268435456 (0x10000000)

注意使用这个你的应用程序`AndroidMainfest.xml`必须使用`WAKE_LOCK`权限：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

API 级别 29 的 API 文档相当令人困惑，因为`ACQUIRE_CAUSES_WAKEUP`标志必须与有效级别组合，否则`PowerManager`会抛出`IllegalArgumentException`：***必须指定有效的唤醒锁定级别。***

遗憾的是，所有可用级别要么已被弃用，要么明确不允许与此标志结合使用：

1.  [`PARTIAL_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK): 不能与`ACQUIRE_CAUSES_WAKEUP`标志一起使用
2.  [`SCREEN_DIM_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#SCREEN_DIM_WAKE_LOCK): 自 API 17 起已弃用
3.  [`SCREEN_BRIGHT_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#SCREEN_BRIGHT_WAKE_LOCK): 自 API 15 起已弃用
4.  [`FULL_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#FULL_WAKE_LOCK): 自 API 17 起已弃用
5.  [`PROXIMITY_SCREEN_OFF_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#PROXIMITY_SCREEN_OFF_WAKE_LOCK): 不能与`ACQUIRE_CAUSES_WAKEUP`标志一起使用

因此，在我的应用程序中，我决定将`ACQUIRE_CAUSES_WAKEUP`标志与[`SCREEN_BRIGHT_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#SCREEN_BRIGHT_WAKE_LOCK)as[`FULL_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#FULL_WAKE_LOCK)比[`SCREEN_DIM_WAKE_LOCK`](https://developer.android.com/reference/android/os/PowerManager.html#SCREEN_DIM_WAKE_LOCK).

所以我的 wakeUp 实现如下所示（请注意，我有一个让用户启用/禁用唤醒功能的首选项，并且还定义了一个在应用程序被杀死/onDestroy 时释放唤醒锁的方法）：

```
import android.content.Context;
import android.content.SharedPreferences;

import android.os.Bundle;
import android.os.PowerManager;

import android.util.Log;

import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;

import androidx.preference.PreferenceManager;

public class MainActivity extends AppCompatActivity {

    /** Interval of 1 second in milliseconds */
    static final long INTERVAL_SECOND = 1000;

    /** Interval of 1 minute in milliseconds */
    static final long INTERVAL_MINUTE = 60 * INTERVAL_SECOND;

    SharedPreferences sharedPrefs = null;
    PowerManager.WakeLock mWakeLock = null;

    Context applicationContext = null;

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final String TAG = "onCreate";
        applicationContext = getApplicationContext();

        setContentView(R.layout.activity_main);
        final Toolbar toolbar = findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        PreferenceManager
                .setDefaultValues(this, R.xml.root_preferences, false);
        sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
    }

    void wakeUp() {
        final String TAG = "wakeUp";
        if (sharedPrefs == null) {
            Log.w(TAG, "Shared Preferences was null");
            return;
        }
        final boolean isWakeUpPref = SettingsActivity.isWakelockPref(sharedPrefs);
        if (!isWakeUpPref) {
            Log.i(TAG, "WakeUp is disabled via preference");
            return;
        }
        Log.i(TAG, "WakeUp is enabled via preference");
        if (mWakeLock == null) {
            Log.i(TAG, "Creating WakeLock...");
            final PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
            if (pm == null) {
                Log.w(TAG, "could not get Power Service");
                return;
            }
            mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "MyApp:wakeup");
            Log.i(TAG, "WakeLock created!");
        } else if (mWakeLock.isHeld()) {
            Log.i(TAG, "Releasing old WakeLock, to reacquire with fresh timeout");
            mWakeLock.release();
        }
        Log.i(TAG, "Acquiring WakeLock to WakeUp...");
        mWakeLock.acquire(INTERVAL_MINUTE);
        Log.i(TAG, "WakeLock WakeUp acquired!");
    }

    void releaseWakeLock() {
        final String TAG = "releaseWakeLock";
        if (mWakeLock == null) {
            return;
        }
        if (!mWakeLock.isHeld()) {
            Log.w(TAG, "WakeLock not held!");
            return;
        }
        mWakeLock.release();
        Log.i(TAG, "WakeLock released!");
    }

} 
```

# position - KineticJS - setPoints 和 SetPosition 之间的区别

> ID：15556509
> 
> 赞同：1
> 
> 时间：2013-03-21T19:36:57.313
> 
> 标签：position, line, kineticjs

我正在尝试使用

```
 Line1.setPosition([0, 512 + newX, 1024, 512 + newX]); 
```

它不能正常工作，线路移动到错误的位置。但是，当我使用：

```
 Line1.setPoints([0, 512 + newX, 1024, 512 + newX]); 
```

我工作，但我需要使用 setPosition 来让我的脚本的其余部分工作。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:05:50.020

setPoints 设置用于绘制线或其他需要绘制点的对象的点数组。

setPosition 仅设置对象相关位置的 (X,Y) 值。它只接受两个数字作为参数。

当您创建线时，从 x,y 在 0,0 开始，然后使用 x,y 量设置位置。

这个例子解释了不同之处：

```
Line1 = new Kinetic.Line({
    x:0,                  //  can be modified by .setPosition(x,y) or .setX()
    y:0,                  //  can be modified by .setPosition(x,y) or .setY() 
    points: [0, 512, 1024, 512]  // can be modified by .setPoints(array)
}); 
```

# php - 用php发送邮件不起作用

> ID：15556511
> 
> 赞同：3
> 
> 时间：2013-03-21T19:37:02.723
> 
> 标签：php, email

我对 php 还很陌生，我最近尝试使用邮件功能，但它不起作用。这是我的代码：

```
<?php

// Pick up the form data and assign it to variables
$name = $_POST['name'];
$email = $_POST['email'];
$topic = $_POST['topic'];
$comments = $_POST['comments'];

// Build the email (replace the address in the $to section with your own)

$to = 'tishsny@gmail.com';
$subject = "New message: $topic";
$message = "$name said: $comments";
$headers = "From: $email";

// Send the mail using PHPs mail() function
if( mail($to, $subject, $message, $headers) ) header("Location:../forms/success.html");
else header( "Location:../forms/failure.html" );
?> 
```

我将 sendmail 的路径添加到 php.ini 文件中，但它仍然无法正常工作。mail 函数总是返回 true，但我没有收到任何邮件。mail.log 显示了一堆超时。这是一些输出：

```
postfix/qmgr[3523]: BB800B124A: from=<_www@Leticias-MacBook-Pro.local>, size=382, nrcpt=1 (queue active)
postfix/qmgr[3523]: CB34EB0E9F: from=<_www@Leticias-MacBook-Pro.local>, size=405, nrcpt=1 (queue active)
postfix/qmgr[3523]: D6C18B0D7B: from=<_www@Leticias-MacBook-Pro.local>, size=394, nrcpt=1 (queue active)
postfix/smtp[3527]: connect to gmail-smtp-in.l.google.com[2607:f8b0:400e:c01::1b]:25: No route to host
postfix/smtp[3533]: connect to gmail-smtp-in.l.google.com[2607:f8b0:400e:c01::1b]:25: No route to host
postfix/pickup[3522]: 8A9EEB1823: uid=70 from=<_www>
postfix/cleanup[3524]: 8A9EEB1823: message-id=<20130321193156.8A9EEB1823@Leticias-MacBook-Pro.local>
postfix/qmgr[3523]: 8A9EEB1823: from=<_www@Leticias-MacBook-Pro.local>, size=392, nrcpt=1 (queue active)
postfix/smtp[3526]: connect to mx3.hotmail.com[65.55.37.72]:25: Operation timed out
postfix/smtp[3531]: connect to gmail-smtp-in.l.google.com[74.125.141.27]:25: Operation timed out
postfix/smtp[3531]: connect to gmail-smtp-in.l.google.com[2607:f8b0:400e:c01::1b]:25: No route to host
postfix/smtp[3531]: connect to alt1.gmail-smtp-in.l.google.com[2607:f8b0:400e:c02::1b]:25: No route to host 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:29:45.097

It appears that your ISP and/or your network/host's firewall may be disallowing outbound SMTP connections. There's no reason you should be seeing those errors about *Operation Timed Out* and *No route to host*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T07:45:37.360

以下是一些可能的原因：

1.  您的 ISP（Verizon、AT&T、Comcast 或您的学校等）阻止了您的出站端口（以防止垃圾邮件和网络攻击）。

这是最有可能的情况。基本上，您不能在家庭网络中作为电子邮件“主机”发送电子邮件。过去，您可以通过 gmail 或其他 SMTP 服务器设置中继服务器，但最近 ISP 变得更聪明并且也阻止了中继请求（是的，他们确实读取了您发送或接收的每个数据）。

所以我的建议是：如果您愿意，请为安全的 VPN 付费。

2.  您不在家庭网络中，但中继服务器/路由器阻止了您的出站请求。您必须找到一种方法在防火墙中转发您的端口。根据路由器或中继服务器的操作系统/固件，可能有数百万种不同的方式来转发您的端口。或者您可以完全关闭防火墙。

3.  它完全不在你的掌控之中。您的 IP 被标记为垃圾邮件机器人（很可能有人窃取了您的 IP 并将其用于网络攻击）。您将不得不更改您的 IP（或为安全的 VPN 付费）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:25:40.620

你能发布你的 php.ini smtp 部分吗？

如果您使用的是 GMail（看起来像...），您将需要使用 SSL/TLS，我不知道 PHP 是否本机支持 SMTP。您可以将转发器与 Sendmail 一起使用并在本地发送未加密的邮件，然后让 Sendmail 使用 TLS 在 Gmail 上转发它。

您可能需要考虑使用第三方解决方案，例如 PHPMailer。它支持 Gmail 的 SSL/TLS，查看以下示例：

[http://phpmailer.worxware.com/index.php?pg=examplebgmail](http://phpmailer.worxware.com/index.php?pg=examplebgmail)

您可以从以下位置下载 PHPMailer：

[http://sourceforge.net/projects/phpmailer/](http://sourceforge.net/projects/phpmailer/)

这是 PHPMailer 的另一个教程：

[http://phpmailer.worxware.com/index.php?pg=tutorial#2](http://phpmailer.worxware.com/index.php?pg=tutorial#2)

编辑：正如马克所说，您的 ISP 可能会阻止出站端口 25。Gmail 还支持端口 465 上的 SMTP（但同样，您将需要 TLS）。

# c - 变量声明

> ID：15556518
> 
> 赞同：0
> 
> 时间：2013-03-21T19:37:35.410
> 
> 标签：c

我正在编写一段代码，它从文件中读取数据并对其进行操作。这个想法是以全局方式加载数据，然后对数据使用几个函数来执行计算。我遇到的问题是编译时出现以下错误：

> 'vertices' 未声明（在此函数中首次使用）。

头文件包含以下内容：

```
typedef struct
{
    double x;
    double y;
    double z;
} variable; 
```

我主要调用 malloc 和一个函数，它将使用这个名为“顶点”的**“变量”数组：**

```
int main (void)
{   
    variable *vertices = (variable*) malloc( 5000 * sizeof (variable) ) ; 
    load_file();
    free(vertices);
    return 0;
} 
```

函数load_file()：

```
 FILE *fp1 ;
    fp1 = fopen( 'file',"r");
    if (fp1==NULL)
    {
        printf("File couldn't be opened or read!");
        return 1;
    }   

    int j = 0;
    while(fscanf(fp1, "%lf %lf %lf ", &vertices[j].x, &vertices[j].y, &vertices[j].z ) == 3 )
    {
        j++;
    }
    fclose(fp1); 
```

实际上，当我将 malloc 放入**load_file**时，它​​会编译并工作，但问题是我有各种其他函数将使用数据，如果我在 load_file 中释放它，我会失去一切。如果我在 main 上面重新定义 typedef，我会得到一个**“以前的定义在这里”**，如果我添加**变量顶点；**在 main 之前，有很多错误。

我将如何解决这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:52:49.027

问题是您在 main 中声明了“顶点”，这使得它的范围对 main 是本地的，而 load_file() 看不到它。

更改 load_file() 的声明如下...

```
void load_file( variable* vertices )
{
    /// blah blah
} 
```

然后在主要中，将您的顶点变量传递给它......

```
int main (void)
{   
    variable *vertices = malloc( 5000 * sizeof (variable) ) ; 
    load_file( vertices );
    free(vertices);
    return 0;
} 
```

编辑：我建议不要只将顶点设为全局变量......这意味着任何东西都可以访问它和/或修改它......即使是无意的。将参数传入和传出需要它们的函数几乎总是更明智的做法，而不是仅仅让它们对世界全局可用......范围是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:50:28.563

如果您希望`vertices`文件中的所有函数都可以访问 ，则将其声明移到`main()`函数之外（即，给它全局范围）并仅在函数内部对其进行*初始化*`main()`：

```
#include <stdlib.h>
#include <stdio.h>

typedef struct {
    double x;
    double y;
    double z;
} variable;

static variable *vertices = NULL;

int load_file() {
    FILE *fp1 ;
    fp1 = fopen( "file","r");
    if (fp1==NULL){
        printf("File couldn't be opened or read!");
        return 1;
    }

    int j = 0;
    while(fscanf(fp1, "%lf %lf %lf ", &vertices[j].x, &vertices[j].y, &vertices[j].z ) == 3 ){
        j++;
    }
    fclose(fp1);
    return 0;
}

int main (void){
    vertices = (variable*) malloc( 5000 * sizeof (variable) ) ;
    load_file();
    free(vertices);
    return 0;
} 
```

如果您希望`vertices`指针可在程序中的所有文件中访问，则通过`static`从其声明中删除关键字来为其提供外部链接。

# php - PHP 切换时区/检索 MySQL 数据

> ID：15556521
> 
> 赞同：0
> 
> 时间：2013-03-21T19:37:40.397
> 
> 标签：php, mysql, date, timezone

我在我的站点上显示了一个系统状态表，该表在过去 14 天（包括一天）的每一天都有一行。然后对于每一列，我从 MySQL 数据库中选择当天发生的任何事件。

MySQL 中的所有数据都以 UTC 存储，PHP 也在 UTC 下运行。我有两个问题：

1.  例如，如果用户在东部时间，则网格正在更新以显示明天的日期，即使东部用户只有晚上 8 点。我想我已经通过这样做解决了这个问题：

    ```
    while ($i < 14)
        {       
            //SET STATUS DATE
            $status_date = date("Y-m-d H:i:s", strtotime("-$i day"));

            //LOCALIZE TIMES    
            $status_date = new DateTime($status_date);
            $status_date->setTimeZone(new DateTimeZone('America/New_York'));

            echo $status_date->format("F j, Y");
        } 
    ```

2.  我遇到的下一个问题是搜索事件。每个事件在数据库中都有一个 INCIDENT_START 字段，我这样查询：

    ```
    SELECT INCIDENT_STATUS FROM TABLE_system_status WHERE SYSTEM_AFFECTED='WEBSITE' AND INCIDENT_START BETWEEN '$start_time' AND '$end_time' ORDER BY INCIDENT_START DESC LIMIT 1 
    ```

这是我的问题。如果我使用`$start_time = $status_date->format("Y-m-d 00:00:00")`and `$end_time = $status_date->format("Y-m-d 23:59:59")`，则事件不会显示在表格中的正确日期。

示例：数据库中的事件的 INCIDENT_START 时间为 2013-03-19 01:02:01 UTC，等于 2013-03-18 21:02:01 EDT。但是，在这种情况下，它仍然显示在我表中 3 月 19 日的列中。

底线....我需要能够在用户的本地时间从 00:00:00 到 23:59:59 获取事件，即使它们在数据库中使用 UTC。我有一种感觉，我把这复杂化了，但我尝试了很多不同的组合，但似乎无法做到正确。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:51:56.873

MySQL 可以为您做到：

```
SELECT CONVERT_TZ(INCIDENT_STATUS, 'UTC', 'EST') ... 
```

相关文档：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:32:10.200

您需要`$status_date`在用户的本地时区中设置并转换为 UTC。

```
$status_date = new DateTime("today -$i day", new DateTimeZone('America/New_York'));
$status_date->setTimeZone(new DateTimeZone('UTC'));

$start_time = $status_date->format("Y-m-d H:i:s");
$status_date->add(new DateInterval('PT23H59M59S'));
$end_time = $status_date->format("Y-m-d H:i:s"); 
```

# ios - 从数组加载图像并一次显示一个

> ID：15556526
> 
> 赞同：2
> 
> 时间：2013-03-21T19:38:08.983
> 
> 标签：ios, arrays, image

我想在一个图像视图中显示图像，当调用 IBAction 时，它会显示下一个图像。到目前为止，这是我的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
//init array with images what you have
   images = [[NSArray alloc] initWithObjects:@"IMG_2605.JPG",@"IMG_2627.JPG",@"IMG_2597.JPG",@"IMG_2613.JPG",@"IMG_2596.JPG  ",nil];
indexImage = 0;

}

-(IBAction)button1:(id)sender {
NSString *imageName = [images objectAtIndex:indexImage];
self.image1.image = [UIImage imageNamed:imageName];
    self.image1.image = [images objectAtIndex:indexImage];
indexImage++;

NSLog(@"B = 1");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:45:53.627

您需要获取实际图像，而不是图像的文件名。如果这些图像在您的包中，您可以使用方法 imageNamed: 来获取图像：

```
NSString *imageName = [images objectAtIndex:indexImage];
self.image1.image = [UIImage imageNamed:imageName]; 
```

# asp.net-mvc - 如何在 MVC .cshtml 文件的带引号的剔除区域中插入“>”？

> ID：15556530
> 
> 赞同：0
> 
> 时间：2013-03-21T19:38:23.990
> 
> 标签：asp.net-mvc, razor, knockout.js, knockout-2.0

我有以下内容：

```
<select id="countries" 
   data-bind='
      options: selectedContinent() ? countries : null, 
      optionsValue : "Id", 
      optionsText: "Name", 
      optionsCaption: "[Please select a country]", 
      value: selectedCountry,
      visible: (countries() && countries().length > 0)'>
</select> 
```

不幸的是，这在 IDE 中显示了由数据绑定最后一行的“>”引起的错误。有没有办法让我逃避这个，所以它不会显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:20:40.317

您是否尝试过将 data-bind 属性放在双引号中，并将属性内的值放在单引号中？您可能还需要将它的第一个值也从同一行开始：

```
<select id="countries" 
   data-bind="options: selectedContinent() ? countries : null, 
      optionsValue : 'Id', 
      optionsText: 'Name', 
      optionsCaption: '[Please select a country]', 
      value: selectedCountry,
      visible: (countries() && countries().length > 0)">
</select> 
```

# actionscript-3 - AS3 MouseEvent.CLICK 在浏览器中不起作用

> ID：15556531
> 
> 赞同：0
> 
> 时间：2013-03-21T19:38:28.623
> 
> 标签：actionscript-3, mouseevent, urlrequest

下面的 ActionScript 3.0 代码在 Adob​​e Flash CS6 中测试时有效，但在浏览器中测试时代码不起作用。任何想法为什么会发生这种情况？

```
buttonInstance.addEventListener(MouseEvent.CLICK,function(e:MouseEvent){
    flash.net.navigateToURL(new URLRequest("http://facebook.com"), "_blank"); 
    trace("link clicked");
},false,0,true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:04:14.577

事件侦听器可能正在被垃圾收集。您需要将代码更改为以下之一：

```
buttonInstance.addEventListener(MouseEvent.CLICK,function(e:MouseEvent){
    flash.net.navigateToURL(new URLRequest("http://facebook.com"), "_blank"); 
    trace("link clicked");
}); // (false, 0, false) 
```

或者：

```
 buttonInstance.addEventListener(MouseEvent.CLICK,onClick,false,0,true);
.
.
.
private function onClick(pEvent:MouseEvent):void
{
    flash.net.navigateToURL(new URLRequest("http://facebook.com"), "_blank"); 
    trace("link clicked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:28:17.377

问题是我将“本地播放安全”设置为“仅访问本地文件”我将其更改为“仅访问网络”并且它可以工作。这篇文章帮助[AS3 Flash URLRequest 在导出时不起作用](https://stackoverflow.com/questions/14061474/as3-flash-urlrequest-not-working-upon-export?rq=1)

# c++ - 调用基类的重载方法

> ID：15556535
> 
> 赞同：9
> 
> 时间：2013-03-21T19:38:34.040
> 
> 标签：c++, class, inheritance, methods, overloading

我有这个代码：

```
#include <iostream>
#include <string>

using namespace std;

class A {
    public: void Print(int i) {cout<<i;}
};

class B : public A {
    public: void Print(string s) {cout<<s;}
};

int main() {
    B bInstance;
    bInstance.Print(1);
    return 0;
} 
```

这给了我一个错误：

```
error: invalid conversion from 'int' to 'const char*' [-fpermissive] 
```

这意味着它试图调用 B 的 Print 而不考虑继承的重载。但是，A 的 Print 应该可以由 B 实例调用。实际上，如果我将呼叫更改为

```
bInstance.A::Print(1); 
```

然后它编译没有任何错误，但我想避免每次都编写类范围运算符。有没有办法告诉编译器我正在尝试调用基类的函数重载？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T19:41:19.880

`Print()`子类中的成员函数*隐藏*`Print()`了超类的成员函数。因此，编译器将看不到`A::Print()`并尝试调用`B::Print()`，并抱怨`int`无法将 an 转换为字符串。

要引入`A::Print()`重载集，您可以引入`using`声明：

```
class A {
public: 
    void Print(int i) {cout<<i;}
};

class B : public A {
public:
    using A::Print;
//  ^^^^^^^^^^^^^^^
    void Print(string s) {cout<<s;}
}; 
```

这是您的代码在必要的修改后工作的[实时示例](http://liveworkspace.org/code/N6QE5$1)。

# html - 在图片上重叠 Google Adsense

> ID：15556536
> 
> 赞同：0
> 
> 时间：2013-03-21T19:38:35.847
> 
> 标签：html, css, image, twitter-bootstrap, adsense

我会将 google adsense 消息重叠到图像上。 ![在此处输入图像描述](../Images/948bd7fa87f4fc30a439283c90253560.png)

我正在使用 Twitter 引导程序

```
<div id="row">
   <div id="span12">
   <img src="xxxxx"/ id="myimage"/>
   <div id="googleadsense">google adsense code
   </div>
<div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:43:31.863

我认为您应该能够通过将背景图像应用到您的 span12 div 然后定位 google adsense div 来做到这一点

**HTML**

```
<div id="row">
<div id="span12 myimage">
<div id="googleadsense">google adsense code </div>
</div>
<div> 
```

CSS

```
.myimage{
position:relative: /* set so we can position the adsense child */
min-height:...;
background:#fff url('path/to/background-image.jpg') no-repeat left top;
}  

.googleadsense{
position:absolute:
top:0;
right:0;
} 
```

祝你好运！

# ruby-on-rails-3 - 分期的咖啡源图（丑化）

> ID：15556537
> 
> 赞同：0
> 
> 时间：2013-03-21T19:38:36.523
> 
> 标签：ruby-on-rails-3

有没有办法在 Rails 3 中获取**uglified JS 的源映射？**

我目前正在使用来自[https://github.com/markbates/coffee-rails-source-maps](https://github.com/markbates/coffee-rails-source-maps)的代码，这对开发很有用，但是在打开资产预编译和（最重要的是）丑化和关闭调试资产之后，它赢了'不起作用（因为它不是设计的）。

Uglifier 似乎支持源映射，新的咖啡脚本源也支持源映射。我已经尝试过一些 sprockets，但我无法找到解决方案。

所以基本上我所拥有的是 *.coffee -> *.js -> application.js (uglified)，我想至少回到 javascript 源代码 (un-unglified)，但理想情况下当然是回到 coffeescript .

这在 Rails 3 中可行吗？使用任何猴子补丁或任何必要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T20:30:31.483

确实，有一些正在进行的工作使这一切与资产管道一起工作，但还没有完成。有关更多信息，请参阅[此拉取请求](https://github.com/sstephenson/sprockets/pull/311)。

# newline - 如何找到文字？CRLF 在记事本++ 或 Gawk 中

> ID：15556540
> 
> 赞同：0
> 
> 时间：2013-03-21T19:38:41.500
> 
> 标签：newline, notepad++, literals

我有一个包含一系列考试问题的文本文件

结构是

问题A？
可能的答案 1
可能的答案 2
可能的答案 3
可能的答案 4
可能的答案 5

问题B？
可能的答案 1
可能的答案 2
可能的答案 3
可能的答案 4
可能的答案 5

...

问题 N？
可能的答案 1
可能的答案 2
可能的答案 3
可能的答案 4
可能的答案 5

我正在寻找更改此示例文本：

```
Which of the following can you copy?
Indexes
Tables
Workspaces
Scripts
All the above 
```

进入本文：

```
Which of the following can you copy?
{
Indexes
Tables
Workspaces
Scripts
All the above
} 
```

在记事本++ 或 Gawk 中

有一个条件 - 如果它已经看起来像后者，请不要理会它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:19:59.433

我通过专注于空白行进行了类似的更改。我在文件顶部添加了两个空行，在文件底部添加了两个空行。然后运行查找和替换。搜索`\r\n\r\n`并替换为`\r\n}\r\n\r\nWhich of the following can you copy?{\r\n`。

如果“*您可以复制以下哪一项？* ”只是一个示例，那么搜索字符串可能是`\r\n\r\n(.*)\r\n`并且替换为`\r\n}\r\n\r\n\1{\r\n`.

最后，删除不需要的文件顶部和底部。

但是 - 这不会检查文件是否已经是最终格式。

# php - 在 ubuntu Xampp 上安装 ZF2 时出现“未安装 PHP 程序”消息

> ID：15556547
> 
> 赞同：0
> 
> 时间：2013-03-21T19:39:02.103
> 
> 标签：php, installation, xampp, zend-framework2, ubuntu-10.04

我正在尝试在 ubuntu Xampp 上安装 ZF2。我正在关注：-

[http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)

我已经下载了 zip 文件。但是当我运行命令时

```
php composer.phar self-update 
```

我收到一条消息：-

“程序'php'当前没有安装。你可以通过输入：sudo apt-get install php5-cli来安装它”

如果我们试图在 xampp 中安装，那么为什么我们需要单独安装 php，xampp 不应该处理这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:53:47.903

请将您的 ubunto 更新/新安装到最新版本并使用 apt-get 命令安装 php 包...应该可以解决您的问题

您可以通过在控制台中键入以下命令来验证 php cli 正在运行：

```
$php -v 
```

# java - 有什么简单的方法可以持久化一个对象，该对象包含对其他实体对象的许多引用？

> ID：15556549
> 
> 赞同：1
> 
> 时间：2013-03-21T19:39:07.393
> 
> 标签：java, hibernate

在我的项目中，我使用休眠，并且有一个对象至少有 30 个对其他对象的引用，这些对象也是实体。

当然不能只打电话

```
session.save(myHeavyObj); 
```

因为它会抛出“对象引用一个未保存的瞬态实例”。

我想保留所有对象。有什么简单的方法可以持久化一个对象，该对象包含对其他实体对象的许多引用？

更新

```
@Entity
class MyClass{
     //basic elements
     @ElementCollection
     @OneToMany(cascade=CascadeType.ALL) //some don't have this line
     @LazyCollection(LazyCollectionOption.FALSE)
     List<Medication> allMeds = new ArrayList<Medication>(); //Medication is Entity

    //and more lists like this. 
} 
```

解决方案

它通过添加

```
 @OneToMany(cascade=CascadeType.ALL) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:58:54.273

您可以将`CascadeType`属性设置为关系注释`PERSIST`或`ALL`关系注释。这将告诉休眠将哪些操作“级联”到其他实体。这看起来像

```
@Entity
public class MyEntity{
    @OneToOne(cascade = CascadeType.PERSIST)
    private MyOtherEntity otherEntity;
} 
```

# eclipse - 需要帮助了解 Eclipse 中的 Git 图标

> ID：15556550
> 
> 赞同：14
> 
> 时间：2013-03-21T19:39:18.767
> 
> 标签：eclipse, git

我正在努力让我的项目提交 - 但我遇到了错误。

我正在查看同步透视图，但不明白所有文件图标的含义。有人可以给我一个很好的参考来告诉我每个图标的含义吗？

如：

*   指向左侧的蓝色箭头
*   双红箭头
*   红色方块上的白色 X
*   白+过双红箭头
*   指向左边的蓝色箭头，上面有一个白色的破折号
*   感叹号
*   指向右侧的灰色箭头
*   指向右侧的灰色箭头，带有白色 + 符号
*   带有白色星号的灰色框。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T07:14:03.593

您可以在[Egit 手册的](http://wiki.eclipse.org/EGit/User_Guide)[“同步视图”部分](http://wiki.eclipse.org/EGit/User_Guide#Synchronize_View)找到很好的描述：

![同步视图](../Images/d7b06f11e8dc23d6db254b13bd19e47e.png)

> 此状态使用图标显示，也可以配置为将状态显示为附加到资源名称的文本。
> 
> *   ![d](../Images/808f09f5408ec56145c4a126cdcf8a17.png)传入添加意味着已将资源添加到目标分支。
> *   ![d](../Images/ee00027ea2b4c1fee0f474241fc0c7c2.png)传入的更改意味着文件在目标分支中已更改。
> *   ![d](../Images/8dd165d3a4071b6df056220f6f75c60b.png)传入删除意味着从目标分支中删除了资源。
> *   ![d](../Images/d82422c0a3cae3a31b616a2f0baa0757.png)传出添加意味着该文件已添加到您的工作区或源分支，但尚未在目标分支中。
> *   ![d](../Images/23d2be1974f91657ccae3e7a538e9f68.png)传出更改意味着文件在您的工作区或源分支中发生了更改。
> *   ![d](../Images/48863a3e18e07552beb740f8e32f1aab.png)传出删除是已在您的工作区或源分支中删除的资源。
> *   ![d](../Images/9f16840297f903450257a5701489fd18.png)冲突添加意味着资源已添加到您的工作区或源分支以及目标分支中。
> *   ![d](../Images/6f506556b8ee174f72ffa568c32c4066.png)冲突更改意味着文件已在您的工作区或本地分支以及目标分支中更改。将需要手动或自动合并。此外，视图中包含冲突子项的任何条目也将使用冲突图标进行装饰。这样做是为了便于发现冲突。
> *   ![d](../Images/cf304fe30504c8f3e67b44bf3959c4f4.png)冲突删除意味着资源在您的工作区或源分支以及目标分支中被删除。

在您的情况下，请记住*，除了*[**状态**覆盖图标](http://wiki.eclipse.org/EGit/User_Guide#Icon_Decorations)之外，这些覆盖图标还可以出现：

![地位](../Images/d08117669642cc7b52931311ecc348f1.png)

包括：

> *   脏（文件夹）——文件夹下至少有一个文件脏；这意味着它在工作树中的更改既不在索引中，也不在存储库中。
> *   tracked - Git 存储库已知该资源，因此处于版本控制之下。
> *   untracked - Git 存储库不知道该资源，并且在明确添加之前不会对其进行版本控制。
> *   忽略 - Git 团队提供者忽略该资源。Team > Ignored Resources 下的首选项设置、“派生”标志和 .gitignore 文件中的设置都被考虑在内。
> *   脏 - 资源在工作树中的更改既不在索引中，也不在存储库中。
> *   staged - 资源具有已添加到索引的更改。请注意，目前只能通过资源的上下文菜单在提交对话框中添加对索引的更改。
> *   部分暂存 - 资源具有添加到索引的更改以及工作树中既未到达索引也未提交到存储库的其他更改。请参阅[Git 暂存视图中的部分暂存](http://wiki.eclipse.org/EGit/User_Guide#Partial_Staging)以了解如何执行此操作。
> *   已添加 - 该资源尚未在存储库中进行任何提交，但已新添加到 Git 存储库中，以便将来进行跟踪。
> *   已移除 - 暂存资源以从 Git 存储库中移除。
> *   冲突 - 文件存在合并冲突。
> *   假设有效 - 资源具有“假设不变”标志。这意味着 Git 停止检查工作树文件是否有可能的修改，因此您需要手动取消设置该位以告诉 Git 当您更改工作树文件时。另请参阅[假设未更改的操作](http://wiki.eclipse.org/EGit/User_Guide#Menu_Actions)。

# jquery - 悬停时自动暂停或播放 HTML5 视频

> ID：15556552
> 
> 赞同：3
> 
> 时间：2013-03-21T19:39:26.810
> 
> 标签：jquery, html, video

我正在尝试对具有三个按钮的页面的一部分进行编程。每个按钮应淡出当前视频并开始播放与该按钮关联的视频。该视频应该一直播放，直到您单击另一个按钮，此时它淡出并暂停，新视频淡入并开始播放。我已经准备好淡入/淡出，但是在连接暂停和播放功能时遇到了一些问题。有任何想法吗？

这是我到目前为止的 jQuery：

```
$('.hover-text div[class^="slide"]').hover(
    function () {
        if (!$(this).hasClass('current')) {
          $('.slides div').fadeOut();
        };
        var class = $(this).attr('class');
        $('.slides div.' + class).fadeIn('slow');
        $('div[class^="slide"]').removeClass('current');
        $(this).addClass('current');

    },
    function () {

    }
); 
```

我找到[了这个教程](http://ecommercedeveloper.com/articles/1878-Hover-to-Play-Ecommerce-Videos-with-HTML5-CSS-and-JavaScript/)，但我不确定如何将该代码合并到我的中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:05:02.780

这是你要找的吗？[http://jsfiddle.net/pNbYq/4/](http://jsfiddle.net/pNbYq/4/)

```
$('#button-holder a').hover(function(){
    var that = $(this);
    if(!$('#'+that.data('video')).is(':visible')){
        $('video:visible')[0].pause();
        $('video:visible').fadeOut('normal', function(){
            $('#'+that.data('video')).fadeIn('normal', function(){
                $('#'+that.data('video'))[0].play();
            });
        });
    }else{
        $('#'+that.data('video'))[0].play();
    }
}, function(){
    $('video:visible')[0].pause();
}); 
```

# python - 为什么 pylint 没有检测到列表中缺少的成员函数 (E1103)？

> ID：15556553
> 
> 赞同：1
> 
> 时间：2013-03-21T19:39:27.367
> 
> 标签：python, pylint

在特定代码段上运行 pylint 时，如果已使用 .append() 或 += [var] 将变量添加到列表中，则会因缺少函数而得到误报。有什么办法可以避免 pylint 在这里丢失变量类型？（pylint 0.27.0，python 2.7.2）

```
#!/usr/bin/python

from foo.lib.machine import Machine
lh = Machine('localhost')

lh.is_reachable()      #Pylint catches this
machines = [lh]
m2 = []
m2.append(lh)
m3 = []
m3 += [lh]
for m in machines:
    m.is_reachable()   #Pylint catches this
for m in m2:
    m.is_reachable()   #Pylint MISSES this
for m in m3:
    m.is_reachable()   #Pylint MISSES this 
```

```
$ pylint -iy -E pylintcheck
未找到配置文件，使用默认配置
************* 模块 pylintcheck
E1101：6,0：“机器”实例没有“is_reachable”成员
E1101：13,4：“机器”实例没有“is_reachable”成员

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:15:53.073

Python 是动态类型的，分析工具很难理解可能发生的一切。看起来你已经到了 pylint 理解的尽头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:08:15.663

内德是对的。作为记录，当 pylint 试图了解 eg 列表中的内容时，它只考虑*定义*该列表的语句，而不是对它的所有访问。这就解释了为什么在您的示例案例中，它可以正确检测到里面有什么`machines`但不在里面`m2`或`m3`（被认为是空的）。

# sql - 选择topper的简单sql

> ID：15556556
> 
> 赞同：0
> 
> 时间：2013-03-21T19:39:44.410
> 
> 标签：sql, select

我有表`stud_id`（`key,name,standard,marks`）。我想从每个中选择礼帽`standard`。以下查询会起作用吗？

```
SELECT DISTINCT( standard ), 
               stud_id, 
               name, 
               marks 
FROM   table 
WHERE  marks = Max(marks) 
GROUP  BY standard 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:43:15.767

如果你想要`marks`每个的顶部`standard`，那么你可以使用：

```
select t1.standard,
  t1.stud_id,
  t1.name,
  t1.marks
from table t1
inner join
(
  select standard,
    max(marks) TopMarks
  from table
  group by standard
) t2
  on t1.standard = t2.standard
  and t1.marks = t2.topmarks 
```

# ruby-on-rails - 我如何分组和求和？

> ID：15556559
> 
> 赞同：0
> 
> 时间：2013-03-21T19:39:54.317
> 
> 标签：ruby-on-rails

我有一个包含`:firm_id, :carrier_id, :month, :amount`列的表。我正在尝试对我进行分组`:carrier_id`，`:month`然后对`:amount`. 例如：

当前数据库表：

```
firm_id | carrier_id | month | amount
 1      |      1     |  jan  |  $100
 2      |      1     |  jan  |  $100
 3      |      2     |  jan  |  $100
 1      |      1     |  feb  |  $100
 2      |      2     |  feb  |  $100
 3      |      2     |  feb  |  $100 
```

我想创建的表视图：

```
carrier_id | month | amount
     1     |  jan  |  $200
     2     |  jan  |  $100
     1     |  feb  |  $100
     2     |  feb  |  $200 
```

我已经在我的模型中尝试过（基于一些研究）但没有成功

```
Production.select(:carrier_id, :month, :amount, "SUM(amount)").group(:carrier_id, :month) 
```

有人可以为此提供帮助或至少为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:55:33.660

这是我的解决方案..我会就如何改进这个问题提出建议..谢谢

**我的模型：**

```
Production.find(
    :all,
    select: "month, carrier_id, amount, SUM(amount) as sum_amount",
    group: :carrier_id
    ) 
```

# java - Java菜单界面学生系统

> ID：15556560
> 
> 赞同：0
> 
> 时间：2013-03-21T19:39:55.520
> 
> 标签：java

我正在尝试创建一个学生数据库系统，但我在界面菜单上苦苦挣扎，当我为选项 1 按 1 时，没有任何反应，并且还有许多其他错误，例如无法打印。我究竟做错了什么？

下面是 RegistryInterface 的代码：

```
package student;

import java.util.Scanner;

public class RegistryInterface
{

    private Registry theRegistry = null;
    Scanner input = new Scanner(System.in);

    public RegistryInterface(Registry theRegistry)
    {
    }

    public void doMenu()
    {
        String decission;

        System.out.println("Registry Main Menu\n*******************\n");
        System.out.println("1\. Add a Student \n2\. Delete a Student"
                + "\n3\. Print Registry\n4\. Quit");

        System.out.println("Select Option [1, 2, 3, 4] :>");
        decission = input.nextLine();

        while (decission != "4")
        {
            if ("1".equals(decission))
            {
                doAddStudent();
            }

            if ("2".equals(decission))
            {
                doDeleteStudent();
            }

            if ("3".equals(decission))
            {
                doPrintRegistry();
                break;
            }

            if ("4".equals(decission))
            {

                System.out.println(" System Closing Down.........");
                break;
            }
        }
    }

    private void doAddStudent()
    {
        String addMore = null;

        String foreName;
        String surName;
        int iDNumber;

        while ("y".equals(addMore))
        {
            System.out.println("Add New Student\n***********\n");

            System.out.println("Enter forename       :>");
            foreName = input.nextLine();
            System.out.println("\nEnter surname      :>");
            surName = input.nextLine();
            System.out.println("Enter ID for Student :>");
            iDNumber = input.nextInt();

            theRegistry.addStudent(new Student(surName, foreName, iDNumber));

            System.out.println("Add Another Student(Y/N) :>");
            addMore = input.nextLine();
        }
    }

    private void doDeleteStudent()
    {
        int studID;
        String another = null;

        System.out.println("Add New Student\n***********\n");

        while("y".equals(another))
        {
            System.out.println("Enter Student ID To Delete :>");
            studID = input.nextInt();

            theRegistry.deleteStudent(studID);

            System.out.println("\nDelete Another? (Y/N)");
            another = input.nextLine();
        }
    }

    private void doPrintRegistry()
    {
        System.out.println("Printing Registry\n***********\n");
        theRegistry.format();
    }
} 
```

这是registryApp的代码：

```
public class RegistryApp
{

    public static void main(String[] args)
    {
        Registry theRegistry = new Registry();

        RegistryInterface aRegInterface = new RegistryInterface(theRegistry);

        aRegInterface.doMenu();

    }
} 
```

我的注册班：

```
import java.util.Iterator;
import java.util.LinkedList;

public class Registry
{
    public LinkedList<Student> studentList = new LinkedList<>();
    public Iterator<Student> iter = studentList.iterator();

    public Registry()
    {
    }

    public void addStudent(Student aStudent)
    {
        Iterator<Student> addIterator = studentList.iterator();

        while (addIterator.hasNext())
        {
            Student ob = addIterator.next();
            if (ob.getStudentID() == aStudent.getStudentID())
            {
                System.out.println("This Student ID "+ aStudent.getStudentID()+ " Is Already Used");
                return;
            }
        }
        System.out.println("Student "+ aStudent.getForeName() + " "
                + "" + aStudent.getForeName() +" "
                + "Successfully Added To System.....\n");

        studentList.addLast(aStudent);
    }

    public void deleteStudent(int studentID)
    {
        Iterator<Student> deleteIterator = studentList.iterator();
        boolean removed = false;

        while(deleteIterator.hasNext())
        {
            Student ob = deleteIterator.next();

            if(ob.getStudentID() == studentID)
            {
                deleteIterator.remove();
                removed = true;
                System.out.println(ob.getForeName() + " " + ob.getSurName() + " Was Succesffully Removed from System. \n");
            }
        }
        if(!removed)
        {
            System.out.println("Student ID not found");
        }
    }

    public String format()
    {
        StringBuilder sB = new StringBuilder();
        Iterator<Student> formatIterator = studentList.iterator();

        while(formatIterator.hasNext())
        {
            Student ob = formatIterator.next();
            sB.append(ob.format());      
        }
        return sB.toString();
    }

    @Override
    public String toString()
    {
        Iterator<Student> toStringIterator = studentList.iterator();
        StringBuilder sB = new StringBuilder();

        while(toStringIterator.hasNext())
        {
            Student ob = toStringIterator.next();
            sB.append(ob.toString()).append("\n");
        }
        return sB.toString();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:48:24.043

在这个循环内...

```
while (decission != "4") 
```

...您永远不会将新值设置为`decission`. 所以，循环要么无限运行，要么什么都不做。

此外，您从输入中扫描的字符串将始终是新创建的字符串，因此即使您键入“4”，它也将始终是！=“4”。

# java - 在java中获取两个日期之间的天数

> ID：15556564
> 
> 赞同：1
> 
> 时间：2013-03-21T19:39:58.857
> 
> 标签：java, date, numbers, days

嗨有两个日期格式的日期，我如何得到两者之间的天数？

```
Date date1;
Date date2 ;
int numberDays = ? 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-21T19:42:03.997

建议对日期使用 JodaTime API：

```
import java.util.logging.Logger;

import org.joda.time.DateTime;
import org.joda.time.Duration;
import org.joda.time.Interval;

public class DatesInterval {
    private final static Logger log = Logger.getLogger(DatesInterval.class.getName());
    public static void main(String[] args) {
        //creates a date 10 days ago in JodaTime
        DateTime daysAgo10 = new DateTime().minusDays(10);
        //today
        DateTime today = new DateTime();

        //create an interval in Joda
        Interval interval = new Interval(daysAgo10.getMillis(), today.getMillis());
        //than get the duration
        Duration duration = interval.toDuration();

        //now you can get what you want. As you can imagine you can get days, millis, whateaver you need. 
        log.info("Difference in days: " + duration.getStandardDays());
    }
} 
```

[http://joda-time.sourceforge.net/](http://joda-time.sourceforge.net/)

问候。

# php - 如何使用 ASP.NET 将关联数组转换为 JSON 并将其作为 POST 请求的一部分发送？

> ID：15556570
> 
> 赞同：2
> 
> 时间：2013-03-21T19:40:29.387
> 
> 标签：php, asp.net, json, post

我正在为用 PHP 开发的 REST API 编写一些示例代码片段，虽然我可以设法获得一个“Ruby”示例，但我无法找到一个等价的像样的 ASP.NET（数字）示例. 我想知道是否有任何 ASPer 可以帮助对以下 PHP 进行详细翻译，该 PHP 发出一个带有 JSON 字符串作为其有效负载的 POST 请求。

需要注意的主要事项是 POST 需要一个命名参数“data”，它是一个 JSON 字符串。

```
 $key='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX';    // This would be your customer key
    $map='USA';
    $accountid='000';                                   // this would be your account id
    // add some zips to an array
    $zips[]=22201;
    $zips[]=90210;
    $zips[]=10001;

    // We encode an array into JSON
    $data = array("map" => $map, "zips"=>$zips, "accountid" => $accountid, "custkey" => $key);                                                                    
    $data_string = json_encode($data);                       
    // IMPORTANT - the API takes only one POST parameter - data 
    $postdata="data=$data_string";

    // we use curl here, but Zend has Rest interfaces as well...
    $ch = curl_init('https://www.example.com//test/');                                                                      
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');                                                                     
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
    curl_setopt($ch, CURLOPT_POST, 1);         // make sure we submit a POST!

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

    $result = curl_exec($ch);
    if (curl_errno($ch)) {
      $result=curl_error($ch);
    } else {
      curl_close($ch);
    }

    $jsonObj=json_decode($result);
    if($jsonObj->success){
      $coordinates=$jsonObj->coordinates;               
      foreach($coordinates->coordinates as $coord){
        //... application logic here ( construct XML for the map )
      }
    } 
```

感谢您的帮助 - 我讨厌发布这样的东西，但也许它将来也会帮助其他人！

R

作为对评论的回应-我真正的帮助请求是由于缺乏 ASP 环境来调试/测试示例。例如 - @Chris 发布了一个链接，虽然按面值翻译它似乎微不足道（尝试如下），但我的问题是我不只是以正常的 POST 方式发送数据：

```
param=val&param2=val2 
```

它需要像：

```
data={JSONString} 
```

其中 JSONString 由关联数组组成。然后问题出现在 ASP 中的关联数组（或者明显缺乏关联数组？- [http://blog.cloudspotting.co.uk/2010/03/26/associative-arrays-in-asp-net/](http://blog.cloudspotting.co.uk/2010/03/26/associative-arrays-in-asp-net/)）一般和那么如何将不存在的关联数组编码为 JSON 字符串，或者如果我尝试改用 NamedValueCollection？似乎 ASP 中的 JSON 支持也参差不齐，所以我确定需要一个特殊的接口吗？

```
using System.Web;

Uri address = new Uri("http://www.example.com/test/");
// Create the web request
HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;
// Set type to POST
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
string key = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
string map = "USA";
string accountid = "000";
string data =""; 
NameValueCollection data = new NameValueCollection();
data.Add("custkey", key);
data.Add("map", map);
data.Add("accountid", accountid); 
```

由于 ASP 实际上没有关联数组，如何将数据转换为 JSON？

```
string jsondata="";

StringBuilder data = new StringBuilder(); 
```

使用 UrlEncoding 时，下面的行会破坏吗？

```
data.Append("data=" + HttpUtility.UrlEncode(jsondata));

// Create a byte array of the data we want to send
byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());

// Set the content length in the request headers
request.ContentLength = byteData.Length;

// Write data
using (Stream postStream = request.GetRequestStream())
{
  postStream.Write(byteData, 0, byteData.Length);
}
// Get response
using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
   // Get the response stream
   StreamReader reader = new StreamReader(response.GetResponseStream());
   // Console application output
   string jsonResponse =reader.ReadToEnd());
} 
```

所以我想我的问题应该是上面被黑的例子——有人可以告诉我这是否正确或有其他帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:51:41.353

你试过 json.Net 吗？[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)示例：

```
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string json = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "Expiry": "2008-12-28T00:00:00",
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

结合[这个工具](http://json2csharp.com/)，我发现它是最好的 .Net/JSon 组合。

# dll - 有没有办法在一个 DLL 中混合针对具有不同计算能力的设备的代码？

> ID：15556571
> 
> 赞同：0
> 
> 时间：2013-03-21T19:40:35.703
> 
> 标签：dll, cuda, gpu, nvidia

例如，如果我编写了一个 CUDA 库，有一些函数使用了一些独有的 SM 3.X 特性（例如，shuffle 内在函数）。

而其他功能仅使用 SM 2.X 功能。

我想将所有这些 lib 函数编译成一个 DLL 并让 DLL 在运行时选择适当的函数，这在 CUDA 中可能吗？

像：

```
static __global__ void Kernel_SM2x(void)
//...
static __global__ void Kernel_SM3x(void)
//... 
```

使用 DLL 中的入口函数，基于硬件特性测试，启动合适的内核/例程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:10:54.933

如果您有相同的条目点（例如内核名称、启动参数、参数相同），那么您可以依赖预编译器（这是来自 grabCut CUDA SDK 示例）：

```
#if __CUDA_ARCH__ < 200
        unsigned int gmm_flags_bvec = 0;
        for (int i=0; i<32; ++i)
        {
            if (gmm_flags[i] > 0)
            {
                gmm_flags_bvec |= 1 << i;
            }
        }
        tile_gmms[blockIdx.y * gridDim.x + blockIdx.x] = gmm_flags_bvec;
#else
        tile_gmms[blockIdx.y * gridDim.x + blockIdx.x] = __ballot(gmm_flags[threadIdx.x] > 0);
#endif 
```

那么你必须将几个 -gencode 参数传递给 NVCC - 它会构建不同的内核并将它们包含在你的可执行文件中。当应用程序运行时，驱动程序将自动为您的设备选择正确的内核。

然后，如果您的主机代码在不同的设备架构之间有所不同（例如，如果设备真的很旧，您可以在设备上执行较少的操作），您可以为不同的计算能力创建多个 CU - 并且每个 CU 文件都将导出主机函数作为条目观点。根据可用硬件使用正确的入口点将是您的应用程序的责任。

例如，您将拥有 application_logic_sm3x.cu，其中包含使用 SM 3.x 功能的内核和一个名为 compute_sm3x(...) 的常规 C 函数。Application_logic_sm2x.cu 将使用 SM 2.x 功能和一个名为 compute_sm2x(...) 的包含 C 函数。

您的 main.cpp 函数将使用 cudaGetDeviceProperties，然后根据可用硬件调用 compute_sm3x 或 compute_sm2x。

**更新**您可以查看 CUDA Toolkit 5.0 中的 simplePrintf 示例 - 它对于 1.x 和 2.x 及更高版本的代码路径略有不同。

# c - 如何在char数组中将base10十进制（大端）转换为二进制（小端中的十六进制）

> ID：15556572
> 
> 赞同：-2
> 
> 时间：2013-03-21T19:40:38.690
> 
> 标签：c, hex, decimal, endianness

我在iOS中遇到了一些麻烦。我一直在尝试将 base10 十进制值转换为little *endian**十六进制*字符串。

到目前为止，我无法这样做。

例如，我想将以下整数转换为*小端*十六进制：

> 整数值 = 11234567890123456789112345678911；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:24:09.000

你可以这样做：

```
#include <stdio.h>
#include <string.h>

void MulBytesBy10(unsigned char* buf, size_t cnt)
{
  unsigned carry = 0;
  while (cnt--)
  {
    carry += 10 * *buf;
    *buf++ = carry & 0xFF;
    carry >>= 8;
  }
}

void AddDigitToBytes(unsigned char* buf, size_t cnt, unsigned char digit)
{
  unsigned carry = digit;
  while (cnt-- && carry)
  {
    carry += *buf;
    *buf++ = carry & 0xFF;
    carry >>= 8;
  }
}

void DecimalIntegerStringToBytes(unsigned char* buf, size_t cnt, const char* str)
{
  memset(buf, 0, cnt);

  while (*str != '\0')
  {
    MulBytesBy10(buf, cnt);
    AddDigitToBytes(buf, cnt, *str++ - '0');
  }
}

void PrintBytesHex(const unsigned char* buf, size_t cnt)
{
  size_t i;
  for (i = 0; i < cnt; i++)
    printf("%02X", buf[cnt - 1 - i]);
}

int main(void)
{
  unsigned char buf[16];

  DecimalIntegerStringToBytes(buf, sizeof buf, "11234567890123456789112345678911");

  PrintBytesHex(buf, sizeof buf); puts("");

  return 0;
} 
```

输出（[ideone](http://ideone.com/x7ydGr)）：

```
0000008DCCD8BFC66318148CD6ED543F 
```

将结果字节转换为十六进制字符串（如果这是您想要的）应该是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:03:14.947

除了其他问题（其他人已经指出，所以我不会重复），如果您确实需要交换字节顺序 - 假设您正在做一些跨平台的事情（或者在另一个例子中使用音频样本格式），这很重要为此，Core Foundation 提供了一些功能，例如`CFSwapInt32HostToBig()`.

有关这些功能的更多信息，请查看[Byte-Order Utilities Reference](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFByteOrderUtils/Reference/reference.html)页面，您可能会找到所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:56:08.750

回答：你不能。这个数字需要一个 128 位的整数。

# xpages - 什么可能使 context.redirectToPage 行为不同

> ID：15556575
> 
> 赞同：0
> 
> 时间：2013-03-21T19:40:50.363
> 
> 标签：xpages, xpages-ssjs

我在不同的自定义控件中有两个按钮，它们在它们的 onclick 事件中调用 context.redirectToPage()。在一种情况下，这会导致 HTTP 重定向（HTTP 状态为 302）到预期的 URL（即标头 Location = [http://frontend.company.com/path/to/file.nsf/myXpages.xsp?documentId=C699C5D6E81721EA85257A2F00683319&openDocument](http://frontend.company.com/path/to/file.nsf/myXpages.xsp?documentId=C699C5D6E81721EA85257A2F00683319&openDocument)） . 在另一个例子中，它返回一个像这样的标签：

```
<script>window.location.href='http://backend.company.com:81/path/to/file.nsf/myXpage.xsp?documentId=C699C5D6E81721EA85257A2F00683319&openDocument'</script> 
```

两个实例都有 submit=true、refresh=complete 和 immediate=true。两者都有正确执行的客户端脚本和在重定向调用之前执行的几行 SSJS。我能想到的唯一可能导致这种情况的区别是返回脚本的按钮位于 (xe:dialog) 中。

你们中的精明人士会注意到为什么这对我来说是个问题，因为我们的 Domino 服务器位于反向代理后面。普通人无法直接访问 Domino，因此脚本标记中生成的 URL 将不起作用。

有没有人知道如何从第二个按钮获得 302 重定向的首选行为，甚至是让它使用正确 URL 的方法？或者甚至阐明为什么行为会有所不同？

谢谢，

富有的

编辑：为 context.redirect() 生成脚本标记的按钮代码：

```
<xp:button
                id="errorReloadButton"
                value="Reload Page">

                <xp:this.rendered><![CDATA[#{javascript:whichButton == "reload"}]]></xp:this.rendered>
                <xp:eventHandler
                    event="onclick"
                    submit="true"
                    refreshMode="complete"
                    immediate="true">
                    <xp:this.action>
                        <xp:actionGroup>

                            <xp:executeScript>
                                <xp:this.script><! [CDATA[#{javascript:sessionScope.remove("errors");
var c = getComponent("errorDialog")
c.hide();
var redirectTarget = view.getPageName() + '?documentId=' + compositeData.docID + '&openDocument';
context.redirectToPage(redirectTarget,true);
}]]></xp:this.script>
                            </xp:executeScript>
                        </xp:actionGroup>
                    </xp:this.action>
                    <xp:this.script>
                        <xp:executeClientScript>
                            <xp:this.script><![CDATA[setClean("#{javascript:compositeData.docID}");
XSP._setDirty(false,"");]]></xp:this.script>
                        </xp:executeClientScript>
                    </xp:this.script>
                </xp:eventHandler>
            </xp:button> 
```

编辑 2：正确强制 302 重定向的按钮源：

```
<xp:button
        id="cancelButton"
        value="Cancel"
        rendered="#{javascript:compositeData.documentDataSource.isEditable()}">
        <xp:eventHandler
            event="onclick"
            submit="true"
            refreshMode="complete"
            onError="handleError(arguments[0],arguments[1])"
            immediate="true">
            <xp:this.action>
                <xp:actionGroup>

                    <xp:executeScript>
                        <xp:this.script><![CDATA[#{javascript:var xdoc:NotesXspDocument = compositeData.documentDataSource;
if(xdoc.isNewNote()){  
return;
}
var doc:NotesDocument = xdoc.getDocument(false);
/* more code here, not relevant to this */
var docid = doc.getUniversalID();
context.redirectToPage(view.getPageName() + '?documentId=' + docid + '&openDocument')}]]></xp:this.script>
                    </xp:executeScript>
                </xp:actionGroup>
            </xp:this.action>

            <xp:this.script>
                <xp:executeClientScript>
                    <xp:this.script><![CDATA[setClean("#{javascript:docId(compositeData.documentDataSource)}");
if(#{javascript:compositeData.documentDataSource.isNewNote()}){
popPageStack();
return false;
}]]></xp:this.script>
                </xp:executeClientScript>
            </xp:this.script>
        </xp:eventHandler>
    </xp:button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:05:43.770

有两种方法可以解决您的问题：您可以硬编码重定向到新 URL，fe

```
 facesContext.getExternalContext().redirect( "http://stackoverflow.com" ); 
```

或者您必须使用反向代理修改 HTTP 响应。

最后一个选项更好，因为这也会影响所有部分刷新。还有一个额外的 HTTP 标头*X-XspLocation*，其中包含必须修改的目标 URL。

**编辑：**

*该脚本位于（xe:dialog）中。*-> 这就是原因。我的错，我没有阅读此信息。*xe:dialog*内的事件将被强制部分刷新，否则它们将无法“在对话框内”工作。这会影响所有重定向，它们将始终返回带有目标的 Javascript 和*X-XspLocation*标头。

在大多数情况下，返回的 Javascript 将不会被执行，因为响应中的标头，它被更早地解析（并强制重定向）。

As I written above, the best approach is to change the reverse proxy configuration. Alternativly you could change the server to use the external name. Or return the external address in the button code.

# tsql - Sybase ASE 在另一个数据库上运行查询

> ID：15556576
> 
> 赞同：1
> 
> 时间：2013-03-21T19:40:57.113
> 
> 标签：tsql, sap-ase

我有 2 个数据库`DB`和`DB_ARCHIVE`.

我的 SPROC 存档（将记录从`DB`into 插入`DB_ARCHIVE`）记录。
我的 SPROC**位于**，`DB`但在 SPROC 内部，我需要对表中的记录进行计数`DB_ARCHIVE`

这就是我的问题出现的地方。我可以跑：

```
SELECT ROW_COUNT(DB_ID(), OBJECT_ID("DB.dbo.TABLE_NAME")) 
```

`DB`获取行数，但如果我这样做：

```
SELECT ROW_COUNT(DB_ID(), OBJECT_ID("DB_ARCHIVE.dbo.TABLE_NAME")) 
```

我只得到 0 的行数（失败）。

有人知道我如何在`DB_ARCHIVE`数据库的 SPROC 中运行此查询命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:40:29.530

您应该设置正确的 database_id。
试试这个：

```
SELECT ROW_COUNT(DB_ID("DB_ARCHIVE"), OBJECT_ID("DB_ARCHIVE.dbo.TABLE_NAME")) 
```

# java - eclipse设置源级别

> ID：15556583
> 
> 赞同：2
> 
> 时间：2013-03-21T19:41:19.887
> 
> 标签：java, eclipse

我有一个为 jdk 7 构建的项目，但我也想扩展它对 jdk 6 用户的兼容性。我已将编译器编译级别设置为 1.6，但项目编译正常，并且由于方法 revalidate 直到 java 7 才添加到 java 中，所以在 1.6 jre 上运行失败。（并且编译器没有给出任何警告关于这个！）如何将源级别也设置为 1.6？我可以在netbeans中做到这一点，在eclipse中如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T19:45:59.660

在项目属性->Java 构建路径/库选项卡中，确保您拥有 JRE 系统库 6 环境

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:45:14.997

除了源代码兼容性之外，还可以在项目设置中设置“编译器兼容性级别”和“生成的 .class 文件兼容性”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-31T18:49:51.823

在设置我的合规级别并确保我有适当的运行时间后，我遇到了类似的问题。要解决这个问题，我必须先运行 Project 然后 Clean... 并指定项目名称。这为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T15:04:51.520

Properties> Java Compiler > JDK Compliance，确保设置为正确的编译器版本。

# gmail - 必需值：任务列表

> ID：15556585
> 
> 赞同：0
> 
> 时间：2013-03-21T19:41:30.863
> 
> 标签：gmail, google-tasks-api

按照此处的说明： [http](http://www.pipetree.com/qmacro/blog/2011/10/automated-email-to-task-mechanism-with-google-apps-script/) ://www.pipetree.com/qmacro/blog/2011/10/automated-email-to-task-mechanism-with-google-apps-script/我正在尝试设置我的 gmail 帐户这样我就可以通过电子邮件将任务发送给自己。但是，使用包含的代码并仅将 TASKLIST 全局从 DJ 的名称修改为我自己的名称（它也不适用于他的名称），我收到错误

> 所需值：任务列表（第 65 行，文件“代码”）

有谁知道为什么会这样？我已启用 Tasks API 并输入了我的 API 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:35:43.360

我在这里记录了一个类似的问题：[https ://groups.google.com/forum/#!topic/google-tasks-api/LmtPEHIB6DA](https://groups.google.com/forum/#!topic/google-tasks-api/LmtPEHIB6DA)

在我的情况下，语法是错误的......

语法为 update(taskObject, tasklistID, taskID)

尝试 var update = Tasks.Tasks.update(body={"status":taskStatus,"id":taskId}, taskListId, taskId);

# c# - 如何在 Xamarin.iOS / Mono 的任务中捕获异常？

> ID：15556586
> 
> 赞同：4
> 
> 时间：2013-03-21T19:41:31.663
> 
> 标签：c#, .net, xamarin.ios

Xamarin.iOS 6.2.1、Xamarin Studio 4

我有这段代码`ViewDidAppear()`：

```
this.refreshTask = Task.Factory.StartNew(() => this.RefreshContent());

try
{
    this.refreshTask.Wait();
}
catch(AggregateException aggEx)
{
    aggEx.Handle(x => false);
} 
```

该方法`RefreshContent()`会导致`IndexOutOfBoundsException`访问数组的时间。如果我直接运行该方法，我可以看到这一点。如果我在任务中运行它，如上所述，应用程序不会失败，我最终会得到一个空的 tableview。根据这篇文章： http: [//msdn.microsoft.com/en-us/library/dd537614.aspx](http://msdn.microsoft.com/en-us/library/dd537614.aspx)上面的代码应该处理异常。但是，`AggregateException`永远不会触发。

我在这里做错了什么？还是 Xamarin.iOS / Mono 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:20:48.917

您是否尝试在新任务委托中包含一个 try-catch ？像这样：

```
 Task.Factory.StartNew(() => {
        try {
             this.RefreshContent()
        } catch (Exception ex) {
             // Handle the exception
        }
  }); 
```

# internet-explorer - 在 Windows 上使用 Watir-webdriver

> ID：15556590
> 
> 赞同：0
> 
> 时间：2013-03-21T19:41:50.447
> 
> 标签：internet-explorer, webdriver, watir

很长一段时间以来，我一直在 Internet Explorer 上使用 watir。我现在正试图让 watir-webdriver 工作。我已经安装`IEDriverServer.exe`在我的路径中。

我有一个网站在我的本地机器上运行，它正在监听端口 80，我正试图用我的 watir 测试来访问那个网站。通常在 watir（没有 webdriver）下，IE 将简单地启动并点击我指定的任何 URL，例如`http://MY-MACHINE-NAME/default.aspx`. 但是，当 IEDriverServer 启动时，它似乎正在侦听某个随机端口，例如 5555。因此，IE 将启动并`http://localhost:5555/`在地址栏中显示类似的内容。之后，我收到下面的堆栈跟踪错误。

我想我对如何让 watir 使用 webdriver 在端口 80 上访问我的网站有一个基本的误解，就像没有它一样。任何提示将不胜感激。

谢谢

```
C:\Home\Server\Test\Watir\web>ruby ViewOrgBillingProfiles_test.rb --name test_04_filtering
Started InternetExplorerDriver server (64-bit)
2.31.0.0
Listening on port 5555
C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize': No connection could be made because the target machine actively refused it. - connec
t(2) (Errno::ECONNREFUSED)
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `open'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `connect'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:744:in `start'
    from C:/DevInstallations/Ruby193/lib/ruby/1.9.1/net/http.rb:1284:in `request'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:189:in `quit'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/ie/bridge.rb:59:in `quit'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/driver.rb:166:in `quit'
    from C:/DevInstallations/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:87:in `close'
    from C:/Home/Server/Test/Watir/shared/setup.rb:1:in `block in <top (required)>'
C:/Home/Server/Test/Watir/shared/setup.rb:45:in `start_ie': undefined method `speed=' for #<Watir::Browser:0x..fdf634488 closed=false> (NoMethodError)
    from C:/Home/Server/Test/Watir/shared/setup.rb:106:in `<top (required)>'
    from         C:/DevInstallations/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from C:/DevInstallations/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from ViewOrgBillingProfiles_test.rb:2:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T12:26:15.817

很晚了，但是如果您查看 selenium webdriver ，`C:\Systemtest\Ruby200\lib\ruby\gems\2.0.0\gems\selenium-webdriver-2.47.1\lib\selenium\webdriver\ie\bridge.rb`您会看到默认端口设置为 5555：

```
module Selenium
  module WebDriver
    module IE

      #
      # @api private
      #

      class Bridge < Remote::Bridge

        HOST            = Platform.localhost
        DEFAULT_PORT    = 5555
        DEFAULT_TIMEOUT = 30 
```

# javascript - 在绑定助手中为模板设置正确的上下文

> ID：15556592
> 
> 赞同：1
> 
> 时间：2013-03-21T19:42:06.040
> 
> 标签：javascript, ember.js, handlebars.js

我需要一些有关此代码的帮助：

```
View Setting up the Grid Helper
-------------------------------

App.OrdersTableView = Em.View.extend({
    templateName: 'account/orders/table',

    grid: App.HelperGrid.extend({

        meta: [
            {
                'name': 'id',
                'text': 'Number',
                'cellCallback': function(content, model){

                    // Uncaught Error: assertion failed: Cannot call get with 'id' on an undefined object. 
                    // return '{{#linkTo orders.view model}}' + content + '{{/linkTo}}';

                    // Renders an empty column
                    // return '{{#with model}}{{#linkTo orders.view model}}' + content + '{{/linkTo}}{{/with}}';

                    // Will render a link, linking to /account
                    return '{{#linkTo account}}' + content + '{{/linkTo}}';
                }
            },
            {
                'name': 'shortDate',
                'text': 'Date'
            },
            {
                'name': 'orderedBy',
                'text': 'Ordered By',
                'cellCallback': function(content){
                    return '{{view rangeView}}';
                }
            },
            {
                'name': 'orderTotalOneTimeAmount',
                'text': 'One-Time Total',
                'cellCallback': function(content){
                    return '$' + parseFloat(content).toFixed(2);
                }
            },
            {
                'name': 'orderTotalRecurringAmount',
                'text': 'Monthly Total',
                'cellCallback': function(content){
                    return '$' + parseFloat(content).toFixed(2);
                }
            },
            {
                'name': 'status',
                'text': 'Status'
            }
        ]
    })
});

DataGrid Helper Template
------------------------

<div class="row">
    <div class="span12">
        <div class="row">
            {{view view.rangeView}}
            {{view view.countView}}
            {{view view.pagerView}}
        </div>
        <div class="row">
            <div class="span12">
                <table class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            {{#each meta in view.meta}}
                                {{view view.headerView propertyNameBinding="meta.name" labelBinding="meta.text"}} 
                            {{/each}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#each order in controller}}
                            {{gridRow view order view.meta}}
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

gridRow Bound Handlebars Helper
-------------------------------

// I'm aware that I'm appending 'td' child views but returning a '<tr></tr>' string for display.  This is not the problem at hand and will be fixed.

/**
 * Grid Row bound helper
 * 
 * Used to render a table row in a datagrid.
 * 
 * @param {Object} context Ember.View reference
 * @param {Object} model DS.Model containing data for specific row
 * @param {Object} properties Meta data to render data cells
 * @return {String} HTML to render table row
 */
Ember.Handlebars.registerBoundHelper( 'gridRow', function(context, model, meta) {

    var options = [].slice.call(arguments, -1)[0],
        view = options.data.view,
        returnValue = '';

    returnValue += '<tr>';
    for ( var i=0, j=meta.length; i<j; i++ ) {

        var content = Ember.Handlebars.Utils.escapeExpression( model.get(meta[i].name) ),
            template = ( undefined !== meta[i].cellCallback ) ? meta[i].cellCallback( content, model, context ) : content;

        var childView = view.createChildView(Ember.View, {
            tagName: 'td',
            context: context, //Ember.get(view, 'context'),
            template: Ember.Handlebars.compile(template)
        });

        view.appendChild(childView);
    }
    returnValue += '</tr>';

    return new Ember.Handlebars.SafeString(returnValue);
}); 
```

我正在制作一个可分页的数据网格助手，我已经能够成功地做到这一点。

但是，我正在尝试为每个数据单元格的渲染添加回调支持，其中模板选项仍将受到尊重，例如 {{view ranger}}、{{#linkTo}} 等。

我对 {{view}} 和 {{#linkTo}} 工作有基本的支持，但是当我尝试链接到特定记录时，我遇到了上下文问题。

在顶部视图中第一个元属性的回调代码中，您可以看到我正在尝试的三个不同的返回语句（并且还有其他变体）以及它们返回的各种错误。

该部分是我要解决的具体问题。

我可以解释任何人需要了解我的方法的任何事情。

# 更新 1

如果我使用`return '{{#with context}}{{#linkTo orders.view model}}' + content + '{{/linkTo}}{{/with}}';`，我可以使用正确的路径在列中以视觉方式呈现链接，但`undefined`代替 id 应该在 url 中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:35:58.450

所以我终于想通了，答案与我一直怀疑的上下文有关。我将第一个 meta.cellCallback 定义中的模板定义更改为：

```
return '{{#linkTo orders.view this}}' + content + '{{/linkTo}}'; 
```

然后我必须适当地设置创建视图的上下文，所以我将其更改为：

```
 var childView = view.createChildView(Ember.View, {
        tagName: 'td',
        context: ( -1 === template.indexOf('{{#linkTo') ) ? context : model,
        template: Ember.Handlebars.compile(template)
    }); 
```

通过这种方式，{{#linkTo}} 助手的上下文被设置为预期的单个模型，而其他助手则拥有父视图的上下文。

# castle-windsor - 温莎城堡拦截器 - 订单？

> ID：15556593
> 
> 赞同：2
> 
> 时间：2013-03-21T19:42:07.983
> 
> 标签：castle-windsor

我希望以特定顺序执行拦截器，并以这种方式使用 InterceptorAttribute 将它们绑定到类：

```
[Interceptor(typeof(type1))]
[Interceptor(typeof(type2))]
[Interceptor(typeof(type3))]
public class SomeClass {} 
```

但不幸的是，城堡似乎不是运行 type1 拦截器，然后是 type2 和 type3，而是以其他顺序运行它们。如何强制执行特定订单？是否可以？

[更新]

我尝试使用配置文件 - 它似乎工作，但我更喜欢一个属性，似乎更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:16:23.703

通过属性应用的拦截器是不确定的。

推荐的方法是[使用注册 API](http://docs.castleproject.org/Windsor.Registering-Interceptors-ProxyOptions.ashx)。

# javascript - jQuery Mobile 添加 javascript 正在禁用 ajax

> ID：15556597
> 
> 赞同：0
> 
> 时间：2013-03-21T19:42:22.163
> 
> 标签：javascript, jquery, ajax, mobile

我有一个使用 document.write 函数的移动 javascript 广告代码。这在每个页面的固定标题中运行。我的问题是 jqm 只会在您使用广告标签查看的第一页上初始化。当我导航到第 2 页时，该页面显示为空白。如果我刷新空白页面，将显示所有内容，包括广告。

我自己使用*$.mobile.ajaxEnabled=false; 禁用了 ajax；*这显然有效，但它有点违背了 JQM 的目的。

这是我的代码。除了页面 id 之外，第 2 页完全相同。

```
<div data-role="page" id="page1">

<div data-role="header">
<script language="javascript">
<!--
document.write('<scr'+'ipt language="#"></scri'+'pt>');
//-->
</script>
</div>

<div data-role="content">
<p>content text</p>
<p><a href="page2.php">Page 2</a></p>
</div>

<div data-role="footer">
footer text
</div>

</div> 
```

**演示** [http://capitalnewmediafiles.co.uk/stack/page1.php](http://capitalnewmediafiles.co.uk/stack/page1.php) （广告仅在移动设备中显示）

谁能指出我正确的方向，以便在不禁用 ajax 的情况下在所有带有广告标签的页面上正确加载框架。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:51:10.547

您可以使用 append 代替：

```
$('head').append('<scr'+'ipt language="#"></scri'+'pt>'); 
```

或者如果这不是一个选项，这里有一个解决方案[http://www.webdeveloper.com/forum/showthread.php?195112-solution-lazy-loading-JS-ad-code-containing-document.write()](http://www.webdeveloper.com/forum/showthread.php?195112-solution-lazy-loading-JS-ad-code-containing-document.write())

# hive - 蜂巢计数元组？

> ID：15556601
> 
> 赞同：1
> 
> 时间：2013-03-21T19:42:31.463
> 
> 标签：hive, hiveql

我对 HiveQL 很陌生，我有点卡住了：S

我有一个以下模式的表。一个名为 res 的列和三个在 partion_column 下分区的名为 filed。

```
create table results( res string) PARTITIONED BY (field STRING); 
```

然后我在这个表中导入数据

```
insert overwrite table results PARTITION (field= 'title') SELECT  explode(line) AS myNewCol FROM titles ;
insert overwrite table results PARTITION (field= 'artist') SELECT  explode(line) AS myNewCol FROM artist;
insert overwrite table results PARTITION (field= 'albums') SELECT  explode(line) AS myNewCol FROM albums; 
```

我正在尝试计算三个分区中的唯一管。

例如，此命令计算数据集中某些标题的存在次数。

```
 SELECT res, count(1) AS counttotal   FROM results where field='title' GROUP BY res ORDER BY counttotal; 
```

它输出类似

```
 title                                count        
 Hit me Baby More time                   9 
```

如何将其扩展到元组（标题、专辑、艺术家）？如果我想有这样的输出：

```
title                            album                 artist       count

Baby one more time    hit me baby one more time    britney spears    9 
```

我的整个代码：

```
CREATE EXTERNAL TABLE IF NOT EXISTS hivetesttable  (
xmldata STRING)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'
location '/user/sdasd/hivetestdata/';

create view xmlout(line) as  select * from hivetesttable;  

CREATE VIEW TITLES(line) as select xpath(line,'/MC/SC/*/@ttl')  from xmlout;
CREATE VIEW ARTIST(line) as select  xpath(line,'/MC/SC/*/@art')  from xmlout;
CREATE VIEW ALBUMS( line) as select   xpath(line,'/MC/SC/*/@art') from xmlout;

create table results( res string) PARTITIONED BY (field STRING); 
insert overwrite table results PARTITION (field= 'title') SELECT  explode(line) AS myNewCol FROM titles ;
insert overwrite table results PARTITION (field= 'artist') SELECT  explode(line) AS myNewCol FROM artist;
insert overwrite table results PARTITION (field= 'albums') SELECT  explode(line) AS myNewCol FROM albums;

SELECT res, count(1) AS counttotal   FROM results where field='title' GROUP BY res ORDER BY counttotal; 
```

一行xml数据就像

```
<?xml version="1.0" encoding="UTF-8"?><MC><SC><S uid="2" gen="" yr="2011" art="Samsung" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Samsung/Music" alb="Samsung" ttl="Over the horizon"/><S uid="37" gen="" yr="2010" art="Jason Derulo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Jason Derulo/Jason Derulo" alb="Jason Derulo" ttl="Whatcha Say"/><S uid="38" gen="" yr="2010" art="Jason Derulo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Jason Derulo/Jason Derulo" alb="Jason Derulo" ttl="In My Head"/><S uid="39" gen="" yr="2011" art="Alexandra Stan" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Alexandra Stan/Mr_ Saxobeat - Single" alb="Mr. Saxobeat - Single" ttl="Mr. Saxobeat (Extended Version)"/><S uid="40" gen="" yr="2011" art="Bushido" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Bushido/Jenseits von Gut und Böse (Premium Edition)" alb="Jenseits von Gut und Böse (Premium Edition)" ttl="Wie ein Löwe"/><S uid="41" gen="" yr="2011" art="Bushido" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Bushido/Jenseits von Gut und Böse (Premium Edition)" alb="Jenseits von Gut und Böse (Premium Edition)" ttl="Verreckt"/><S uid="42" gen="" yr="2011" art="Lucenzo" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/Music/Lucenzo/Danza Kuduro (feat_ Don Omar) [From _Fast &amp; Furious 5_] - Single" alb="Danza Kuduro (feat. Don Omar) [From &quot;Fast &amp; Furious 5&quot;] - Single" ttl="Danza Kuduro (feat. Don Omar) [From &quot;Fast &amp; Furious 5&quot;]"/><S uid="121" gen="" yr="701" art="Michael Jackson" cmp="&lt;unknown&gt;" fld="/mnt/sdcard/external_sd/Music/Michael Jackson/Bad [Bonus Tracks]" alb="Bad [Bonus Tracks]" ttl="Voice-Over Intro/Quincy Jones Interview #1 [*]"/></SC><PC/></MC> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:27:39.620

根据您提供的信息，您想要的输出是不可能的。现在你有一个看起来像这样的表：

```
res                           field
---                           -----
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
baby one more time            title
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
hit me baby one more time     album
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
britney spears                artist
the distance                  title
the distance                  title
open book                     title
daria                         title
fashion nugget                album
fashion nugget                album
fashion nugget                album
fashion nugget                album
cake                          artist
cake                          artist
cake                          artist
cake                          artist 
```

因为你对它进行了分区，Hive 恰好将它存储在三个不同的文件夹中，但这不会影响查询的结果。我添加了一些额外的曲目，我想你希望输出的额外曲目是（如果我错了，请纠正我）：

```
title                  album                       artist              count
baby one more time     hit me baby one mroe time   britney spears      9
the distance           fashion nuggets             cake                2
open book              fashion nuggets             cake                1
daria                  fashion nuggets             cake                1 
```

但是没有办法说“打开的书”与“时尚金块”或“蛋糕”有任何关系，就像没有办法说“宝贝再来一次”与“布兰妮斯皮尔斯”有关。您可以尝试匹配计数，但最终会得到这样的结果

```
title                  album                       artist              count
baby one more time     hit me baby one more time   britney spears      9
null                   fashion nuggets             cake                3
the distance           null                        null                1
open book,daria        null                        null                1 
```

我想你想要一张这样的表格

```
title                  album                         artist
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
baby one more          hit me baby one more time     britney spears
the distance           fashion nuggets               cake
the distance           fashion nuggets               cake
open book              fashion nuggets               cake
daria                  fashion nuggets               cake 
```

但仍按艺术家和/或专辑划分。无论有没有分区，您都可以编写查询，就好像表没有分区一样（只要数据没有损坏，它就不会影响结果，只会影响性能）。但是，它会影响您创建和填充表格的方式。让我知道这是否是您想要的，我将编辑此答案以回答该问题。

* * *

承诺的编辑：

好的，创建没有任何分区的表很简单：

```
CREATE TABLE results (title string, album string, artist string) 
```

使用分区创建表几乎同样简单，您只需要首先确定要分区的内容。如果您对艺术家进行分区，则意味着您可以运行特定于单个或一组艺术家的查询，而无需处理其他艺术家的信息。如果您按艺术家和专辑进行分区，您也可以对专辑做同样的事情。这确实是以将大文件分解为小文件为代价的，通常 MapReduce（因此 Hive）更适用于大文件。我根本不会担心分区，除非您处理至少 10 的 GB 并且感觉您掌握了分区的工作原理和 HiveQL 的一般情况。但为了完整起见，按艺术家划分：

```
CREATE TABLE results (title string, album string) PARTITIONED BY (artist string); 
```

并按艺术家然后按专辑分区。`(artist string, album string)`按vs分区`(album string, artist string)`不会改变你的结果，但你应该把层次结构的逻辑顶部放在第一位。

```
CREATE TABLE (title string) PARTITIONED BY (artist string, album string); 
```

如果我们可以访问的唯一信息来自表格，那么填充此表格将并不容易，`titles, artists, and albums`因为我们有一个巨大的标题、艺术家和专辑列表，但无法分辨哪个标题与哪个专辑搭配。我希望你有一些数据，这些关系仍然完好无损，或者你的数据集仍然完好无损。在不知道这些假设数据的形式的情况下，我无法为如何填充您的表格提供答案。但是，如果您有分区表，那么如果您不想手动指定每个艺术家和专辑（因为每个艺术家都有自己的分区，并且在分区内每个专辑都有自己的分区） ，[这个答案可能对您有用。](https://stackoverflow.com/questions/6631464/partition-hive-table-by-existing-field/15280129#15280129)

编辑：提问者有 xml 文件，其中包含完整的标题、ablum、arist 关系。评论中有关此的更多信息。

现在问题的核心是计算唯一元组。无论数据如何分区（如果有的话），这都是相同的。我们使用`GROUP BY`子句来做到这一点。当您指定一个列（或分区，可以将其视为具有特殊属性的列）时，您会将数据分解为具有该列不同值的组。如果您指定多个列，则将数据分解为具有不同列组合的值的组。这是我们用来计算不同元组的优势：

```
SELECT title, album, artist, COUNT(*)
FROM results
GROUP BY title, album, artist 
```

我们在这里：

```
title                  album                       artist              count
baby one more time     hit me baby one mroe time   britney spears      9
the distance           fashion nuggets             cake                2
open book              fashion nuggets             cake                1
daria                  fashion nuggets             cake                1 
```

# jquery - jQuery 克隆 |

> ID：15556603
> 
> 赞同：4
> 
> 时间：2013-03-21T19:42:37.197
> 
> 标签：jquery, html, css

我有一些关于 jQuery 的逻辑问题。

我很确定我需要一个循环设置，但是很难将它组合在一起。我参考了 tuts、视频、工作示例、幻灯片，甚至是原始 javascript，但仍然难以将逻辑端对齐。

提供了小提琴链接，下面是一些简短的注释……</p>

问题：

*   理想情况下，我希望复制我所做的锚点，但是在页面上有多个锚点时，它会复制所有锚点并在所有这些锚点之后插入。我只需要复制一次包含在 H5 中的链接，并且它们必须是唯一的。

目标：

*   利用所见即所得的现有标记制作块样式按钮。
*   平台（如果有帮助）：Drupal 6 CMS，带有 jQ​​uery 1.2.6。
*   注意：我可以链接到外部托管，但是当我这样做时 Drupal 有时会生气。

必需的：

*   使用 CSS 类 (makeBigButton) 来触发此行为。
*   最终用户可以在 WYSIWYG 中添加自定义类，以便他们可以在需要时通过添加此类来“切换”。

限制：

*   我们不在 HTML5 上，所以用锚包装内容已经过时了。
*   字体样式因内容而异，因此我尽量避免使用自定义样式。

原始示例包括……</p>

*   标记
*   造型
*   评论但半功能性的行为
*   [http://jsfiddle.net/n5FRB/1/](http://jsfiddle.net/n5FRB/1/)

HTML

```
 <div id="right">
<div class="module conference program makeBigButton">
    <p>
        <img src="#" alt="Placeholder"/>
    </p>
    <h5>
        <a title="Yahoo" target="_blank" href="http://www.yahoo.com">Yahoo</a>
    </h5>
</div>

<div class="module conference program makeBigButton">
    <p>
        <img src="#" alt="Placeholder"/>
    </p>
    <h5>
        <a title="Google" target="_blank" href="http://www.google.com">Google</a>
    </h5>

</div> 
```

半功能 jQuery 剪辑

```
$('.makeBigButton h5 a').clone().addClass('bigButton').insertAfter('.makeBigButton h5'); 
```

半功能包括……</p>

*   代码片段
*   有点期望的行为
*   [http://jsfiddle.net/n5FRB/2/](http://jsfiddle.net/n5FRB/2/)

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:54:12.560

你去：

```
$('.makeBigButton h5').each(function(){
    $(this).find('a').clone().addClass('bigButton').insertAfter(this);
}); 
```

[http://jsfiddle.net/n5FRB/4/](http://jsfiddle.net/n5FRB/4/)

欢迎来到 Stackoverflow！;)

# html - 使中间体框长到页脚底部

> ID：15556604
> 
> 赞同：0
> 
> 时间：2013-03-21T19:42:48.557
> 
> 标签：html, css

使用这个[Fiddle](http://jsfiddle.net/jeljeljel/A3vZV/)，如何改变它，使红色边框增长到页脚的顶部。最终结果将是红色框占据页面的中间部分。

**HTML**

```
<div class="wrapper">
    <div class="header">HEADER</div>
    <div class="body">BODY</div>
    <div class="push"></div>
</div>
<div class="footer">FOOTER</div> 
```

**CSS**

```
.header { height: 60px; background-color: #999; }
.footer { height: 61px; background-color: #999; }
.body { border: 1px solid red; }

/* Sticky Footer by Ryan Fait (http://ryanfait.com/) */
* { margin: 0; }
html, body { height: 100%; }
.wrapper { min-height: 100%; height: auto !important; height: 100%; margin: 0 auto -60px auto; /* the bottom margin is the negative value of the footer's height */ }
.footer, .push { height: 60px; /* .push must be the same height as .footer */ clear: both; }
form { height: 100%; }
/* Sticky Footer by Ryan Fait (http://ryanfait.com/) */ 
```

**答案更新** 我在下面接受了@dfsq 的答案，并从中汲取灵感来创建最终解决方案[http://jsfiddle.net/jeljeljel/A3vZV/6/](http://jsfiddle.net/jeljeljel/A3vZV/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:49:48.220

这不是一件容易的事。我最近在这个布局上苦苦挣扎，发现下一个方法可行。将巨大的`padding`和相反的应用`margin`到您的`.body`容器并同时`overflow: hidden`给予`.wrapper`：

```
.body {
    border: 1px solid red;
    padding: 0 0 1000px;
    margin-bottom: -1000px;
}
.wrapper {
    ...
    overflow: hidden;
} 
```

[http://jsfiddle.net/A3vZV/2/](http://jsfiddle.net/A3vZV/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:52:01.170

看看这个...

```
.body { position : absolute; top : 60px; bottom : 60px; 
        width : 100%; 
        border: 1px solid green;
        overflow : hidden; } 
```

干杯!

**编辑＃1**：正确剪辑添加`overflow`

**编辑#2**：稍微好一点的是`left : 0px; right : 0px;`而不是`width : 100%;`

# c++ - 运算符仅以一种方式定义 - C++

> ID：15556606
> 
> 赞同：2
> 
> 时间：2013-03-21T19:42:50.900
> 
> 标签：c++, operators, operator-overloading

我创建了一个复数类、定义的运算和一些函数，如 arg、模数等。我还将虚数单位*i*定义为命名空间中的常量。问题是它`z = i + 2`不会返回任何错误并且可以正常工作，但编译器不接受`z = 2 + i`表示操作数在`int`and之间无效的行`const complex`。

我应该怎么做才能以两种方式定义操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:44:59.550

您应该实现整数和复数之间的转换或定义两个运算符：

```
complex operator+(int a, const complex& b) 
```

和

```
complex operator+(const complex& a, int b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T19:45:02.320

你应该为你的班级超载`complex operator+(int lhs, const complex& rhs);`。使它成为一个`friend`函数，以便您传入两个参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T19:55:22.013

作为为运算符提供实数和复数重载的替代方法：如果为`complex`类提供转换构造函数（未标记`explicit`且可以采用单个参数的构造函数），则它可以将实数隐式转换为复数：

```
class complex
{
public:
    complex(double real, double imag = 0) : real_(real), imag_(imag) {}
    double real() const { return real_; }
    double imag() const { return imag_; }
private:
    double real_;
    double imag_;
}; 
```

然后您可以定义`operator+`为采用两个`complex`参数，编译器将为您转换`int`为`complex`：

```
complex operator+(const complex& a, const complex& b)
{
    return complex(a.real() + b.real(), a.imag() + b.imag());
} 
```

现在，当编译器遇到此代码时，它会识别出存在`complex, complex`for 的重载，`operator+`并且`2`可以隐式转换为`complex`：

```
z = 2 + i; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T19:53:15.137

有两种方法可以为类重载运算符：作为成员函数和作为......以及非成员函数。`Complex`当在运算符的左侧（在这种情况下）有一个类的对象（在这种情况下是类）时，会创建第一个对象`+`。非成员函数用于不发生上述情况的情况。在这种情况下，两个操作数都被指定了，重载的操作符本身只是偶然（有时）在类内部以朋友访问权限创建的（事实上，如果您不访问私有成员，则不需要它。将它包含在内部的另一个原因class 是这样，给定类的运算符在同一个地方）。

```
class Complex {
public:
    // more things...

    Complex operator+(int i);                               // cx + 1
    friend Complex operator+(int i, const Complex &cx);     // 1 + cx

    // more things...
};

Complex Complex::operator+(int i)
{
    Complex complexCopy( *this );
    complexCopy.sum( i );

    return complexCopy;
}

Complex operator+(int i, const Complex &cx)
{
     Complex complexCopy( cx );
     complexCopy.sum( i );

     return complexCopy;
} 
```

请记住，您需要重载复制构造函数，以防您在构造函数中分配任何资源。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T20:24:35.457

处理运算符重载的一个好方法`+`是从`+=`.

```
class complex {
  double real
  double imag;
  complex& operator+=( complex const& other ) {
    real += other.real;
    imag += other.imag;
    return *this;
  }
  complex& operator+=( double other ) {
    real += other.real;
    return *this;
  }
}; 
```

然后编写非成员运算符以使用上述成员运算符：

```
inline complex operator+( complex left, double right ) {
  return left+=right;
}
inline complex operator+( double left, complex right ) {
  return right+=left;
}
inline complex operator+( complex left, complex const& right ) {
  return left+=right;
} 
```

请注意，我至少`complex`按值取了一个参数——考虑到我要返回一个`complex`数字，我也可以这样做。

这个计划的一个好处是二元运算符是真正的样板，工作是在成员`+=`运算符中完成的。

在 C++11 中，您可以更进一步，自动编写上述所有运算符，其中它根据`operator+=`. 但这只有在编写大量重载类时才值得`+`。

# iis - HTTP 请求的 503 错误 - 内部消息

> ID：15556610
> 
> 赞同：0
> 
> 时间：2013-03-21T19:43:05.807
> 
> 标签：iis, sharepoint-2010

我正在向 SharePoint 服务器（从 SharePoint 网页）发送一个 HTTP 请求，以读取同一服务器上的文档（在 SharePoint 库中）。我收到 503 错误并且未加载文档。

如何在 IIS 上捕获此错误消息以获取有关此异常的更多信息（详细信息或内部消息）？这个错误是普遍的，我认为只有获得更多关于它的细节是有益的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:45:16.227

做一个

```
try{ 
//try to read
} 
catch(Exception er)
{
 lblError.Text = "Details:"+er.Message;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T11:02:37.020

这是解决此问题的代码：

```
var uri = "mysite.com";
var request = WebRequest.Create(uri);
request.Credentials = CredentialCache.DefaultCredentials;
request.PreAuthenticate = true;
request.Proxy = null;
HttpWebResponse webResponse = (HttpWebResponse)request.GetResponse(); 
```

代理必须设置为空

# nosql - 我如何计算最终一致性需要多长时间才能变得一致？

> ID：15556613
> 
> 赞同：4
> 
> 时间：2013-03-21T19:43:30.820
> 
> 标签：nosql, eventual-consistency

我开始研究 nosql 和面向文档的数据库来存储我们将在我们的网站上提供的 HTML5 应用程序的资产。这旨在替代仅在文件系统上存储文件。它们将是小型的 Web 优化文件，包括 html、js、css 和 xml 等文本文件，以及图像、声音和字体等二进制文件。

由于我对容错感兴趣，我正在研究的解决方案（riak，Cassandra）使用最终一致性。虽然我在抽象层面理解这个概念，但当我与经理和决策者交谈时，我无法用实际术语解释最终一致性需要*多长时间*才能保持一致。毫秒？秒？分钟？由于我在这个领域没有任何经验，所以我正在寻找现实世界的经验，这意味着什么。

我知道不同的变量将确切地决定任何配置需要多长时间，但我需要能够开始了解我们需要构建什么样的基础设施来支持我们的需求。所以我正在寻找的是我们是否需要优化网络延迟、节点数量等来支持我们的特定需求。

我们希望达到选择要测试的平台的程度，并且在我们将时间投入任何特定解决方案之前，我们希望能够说“不，这对我们不起作用”。

我们现在拥有使用严格一致性的系统（例如我们的网络服务器上的文件系统和我们的 mysql 数据库），因此我们的管理习惯于加载和超时等概念，以及“关闭”的事情。但我无法与他们沟通“是的，数据现在不可用*，但它没有关闭；它**最终*会可用”。他们想知道“嗯，‘最终’有多长”？

我如何判断最终一致的系统是否会在我们的网站上实际运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:27:20.647

由于我对 Riak 比对 Cassandra 更熟悉，所以我将把我的讨论限制在最终一致性如何应用于 Riak。

在正常操作期间，Riak 支持[可调整](http://docs.basho.com/riak/1.2.1/tutorials/fast-track/Tunable-CAP-Controls-in-Riak/)的一致性，允许您根据应用程序要求定制一致性行为。然而，默认设置非常合理并且适用于大多数场景，因为它们需要大多数[副本](http://docs.basho.com/riak/1.3.0/references/appendices/concepts/Replication/)响应读取或写入才能被认为是成功的。

尽管所有副本可能并非在每个时间点都处于完全相同的状态，但这些一致性设置将确保您阅读所写的内容。传统上通过称为[读取修复](http://docs.basho.com/riak/latest/references/appendices/concepts/Replication/#Read-Repair)的过程在读取上纠正不一致性，但如果启用了主动反熵（Riak 1.3 版中的新功能），也可以定期纠正。

[最终一致性](http://docs.basho.com/riak/1.3.0/references/appendices/concepts/Eventual-Consistency/)主要是在各种故障情况下考虑的。例如，如果一个节点与集群的其余部分分离，它将（使用默认设置）继续能够接受写入和读取，这将根据它所拥有的数据/副本尽其所能提供。由于在此期间它无法与集群的其余部分通信，因此可能会出现不一致。但是，一旦集群恢复到正常运行状态，这些问题就会得到解决。这需要多长时间取决于许多外部因素，范围可能从临时网络故障的几分之一秒到需要手动干预来纠正问题的几分钟或几小时不等。

# python - Python while循环没有像预期的那样循环

> ID：15556614
> 
> 赞同：0
> 
> 时间：2013-03-21T19:43:36.800
> 
> 标签：python, loops, while-loop

我有 4 个嵌套的 while 循环，它们看起来都类似于下面的一个

```
x = 0.0    
while x <= 1.0:
    ls_alloc[0] = x
    x = x + 0.1 
```

我想要它做的是每次在 x <= 1.0 时将 0.1 添加到 x 我遇到的问题是它实际上从未进入 while 循环`x = 1.0`

我正在使用 python 2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T19:47:07.450

问题是`0.1`不能完全表示为`float`. 相反，您得到的是一个略大于 的数字`0.1`：

```
In [2]: '%.20f' % 0.1
Out[2]: '0.10000000000000000555' 
```

这会减少您可能期望的循环迭代次数。此外，`x`永远不要精确命中`1.0`（即使后者*可以*精确表示）。

值得注意的是，这种行为通常是浮点运算的属性，绝不是 Python 特有的。

# c# - 语音识别安卓应用

> ID：15556616
> 
> 赞同：0
> 
> 时间：2013-03-21T19:43:37.737
> 
> 标签：c#, visual-studio-2012, xamarin

当我按下说话按钮并在列表视图上打印结果时，我的应用程序识别语音，当我单击结果时，我希望它在吐司上打印......

问题是当我再次单击按钮时，它会打印新文本和旧文本，例如在我第一次得到时：（不，现在，知道）我单击否，它显示“现在”，第二次给（谷歌，好，谷歌）我按好，它打印“现在”然后“好”

我想它记得整个列表视图，你能帮我解决这个问题吗，这是代码：

```
if (resultCode == Result.Ok)
{
    IList<System.String> matches = data.GetStringArrayListExtra(RecognizerIntent.ExtraResults);
    voice_list.Adapter = new ArrayAdapter<System.String>(this, Android.Resource.Layout.SimpleListItem1, matches);
    voice_list.ItemClick += delegate(object sender, Android.Widget.AdapterView.ItemClickEventArgs e)
    {
        var t = matches[e.Position];

        string TextToTranslate = t.ToString();

        Android.Widget.Toast.MakeText(this, TextToTranslate , Android.Widget.ToastLength.Long).Show();

    }; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:39:41.520

这是因为您每次处理结果时都添加了一个事件处理程序。因此，您第二次处理语音结果时会向 ItemClick 事件添加另一个事件处理程序。当您单击一个项目时，这将导致 2 个事件处理程序。尝试移动这部分。但也请记住，如果您将其移至 OnStart，当您从另一个屏幕返回时也会调用它。

不太确定为什么要再次显示第一个，但也许您还必须在更改适配器后触发 NotifyDataSetChanged 到适配器。

我个人更喜欢为适配器创建一个从 BaseAdapter 扩展的新类，您将在其中处理包含 item 和 itemsclicked 的列表。（例如：[您的 ListView 的自定义 ListAdapter](http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview/)）

# cocoa-touch - 新的 PayPal iOS SDK（测试版） - 无法连接到沙盒

> ID：15556622
> 
> 赞同：3
> 
> 时间：2013-03-21T19:44:08.610
> 
> 标签：cocoa-touch, paypal, paypal-sandbox

我已将新的 PayPal iOS SDK 集成到我的应用程序中。参考可以在[这里](https://developer.paypal.com/webapps/developer/index)找到。新的 SDK 非常容易设置，它允许您在 3 种不同的环境中工作 1.) PayPalEnvrionmentNoNetwork 2.) PayPalEnvironmentSandBox 和 3) 没有环境意味着进入他们的实时服务器。一切都适用于 NoNetwork 环境，显然是因为它使用模拟虚拟数据，而不必访问任何服务器。当我尝试切换到沙盒环境时，PayPal 无法连接到服务器，我收到以下错误：

```
 We're Sorry
  There was a problem communicating with the PayPal servers. [Cancel][Try Again] 
```

我不确定这是我的问题还是他们的问题。以下是配置：

```
 #define kPayPalClientId @"AbRN_BAV7YMsvde9KUFPsbSC_72NA9swMcY-j0QZL629lXrjSc9CNwfFn8Ac"
 #define kPayPalReceiverEmail @"The email I use to login into PayPal"

- (IBAction)pay {
   PayPalPayment *payment = [[PayPalPayment alloc] init];
   payment.amount = [[NSDecimalNumber alloc] initWithString:@"14.99"];
   payment.currencyCode = @"USD";
   payment.shortDescription = @"Testing.";

   if (!payment.processable) {
    // This particular payment will always be processable. If, for
    // example, the amount was negative or the shortDescription was
    // empty, this payment wouldn't be processable, and you'd want
    // to handle that here.
   }

   // Any customer identifier that you have will work here. Do NOT use a device- or
   // hardware-based identifier.
   NSString *customerId = nil;

   // Set the environment:
   // - For live charges, use PayPalEnvironmentProduction (default).
   // - To use the PayPal sandbox, use PayPalEnvironmentSandbox.
   // - For testing, use PayPalEnvironmentNoNetwork.
   [PayPalPaymentViewController setEnvironment:self.environment];

   PayPalPaymentViewController *paymentViewController = [[PayPalPaymentViewController alloc] initWithClientId:kPayPalClientId
                                                                                             receiverEmail:kPayPalReceiverEmail
                                                                                                   payerId:customerId
                                                                                                   payment:payment
                                                                                                  delegate:self]; 
   paymentViewController.hideCreditCardButton = NO;

   [self presentViewController:paymentViewController animated:YES completion:nil];

} 
```

* * *

**FIX：最后我发现了问题，您需要在视图加载后添加它。我根本没有这个。**

```
 [PayPalPaymentViewController prepareForPaymentUsingClientId:kPayPalClientId]; 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:35:38.593

正如我的同事在评论中确定的那样，问题出在 PayPal iOS SDK 中，而不是您的代码中。我们已在[版本 1.0.4](https://github.com/paypal/PayPal-iOS-SDK/tree/1.0.4) ( [.tgz](https://github.com/paypal/PayPal-iOS-SDK/archive/1.0.4.tar.gz) ) 中修复了该问题。

使用更新后的库，您的代码现在应该可以按预期工作了；该`prepareForPaymentUsingClientId:`调用应始终是可选的（尽管仍然推荐）。

再次感谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:44:57.113

我一直有同样的问题。

这都是因为 PayPal 的新 SDK 仅在美国可用，我猜你在其他地方。谢谢！

# ruby-on-rails - 在 Ember js 中的索引页面上创建记录

> ID：15556623
> 
> 赞同：2
> 
> 时间：2013-03-21T19:44:13.127
> 
> 标签：ruby-on-rails, ember.js

我想在索引页面上生成创建记录而不去其他路线。编辑部分工作成功。当我单击添加记录时，出现 500 错误。它说

```
undefined method `income_url' for #<Api::IncomesController:0x007fcf1f6407f8> 
```

我在索引页面上使用视图呈现的 create.handlebars 是

```
<div class="control-group">
  <label class="control-label">Income name</label>
  <div class="controls">
    {{view Ember.TextField valueBinding="newIncomeName"}}
  </div>
</div>

<div class="control-group">
  <div class="controls">
    <input type="submit" value="Add" {{action submit content}}>
  </div>
</div> 
```

我的 route.js.coffee 是：

```
EmberMoney.Router.reopen
  location: 'history'

EmberMoney.Router.map ->
  @resource 'incomes', ->
    @route 'index' # this route is used for creating new records

EmberMoney.IncomesRoute = Ember.Route.extend
  model: ->
    EmberMoney.Income.find()

EmberMoney.IncomesEditRoute = Ember.Route.extend
  setupController: (controller, model) ->
    if model.get('transaction') == @get('store').get('defaultTransaction')
      transaction = @get('store').transaction()
      transaction.add model
    controller.set('content', model)

  deactivate: ->
    @modelFor('incomes.edit').get('transaction').rollback()

  events:
    submit: (record) ->
      record.one 'didUpdateRecord', =>
        @transitionTo 'index'
      record.get('transaction').commit()

EmberMoney.IncomesIndexRoute = Ember.Route.extend
  model: ->
    EmberMoney.Income.createRecord()
  setupController: (controller, model) ->
    controller.set('content', model)

  events:
    submit: (record) ->
      record.on "didCreate", =>
        @transitionTo 'index'
      record.get('transaction').commit() 
```

我的 api/incomes_controller.rb 是：

```
class Api::IncomesController < ApplicationController
    respond_to :json

    def index
      respond_with Income.all
    end

    def show
      respond_with Income.find(params[:id])
    end

    def create
      respond_with Income.create(params[:income])
    end

    def update
      respond_with Income.update(params[:id], params[:income])
    end

    def destroy
      respond_with Income.destroy(params[:id])
    end
end 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:24:34.233

在这种情况下，您需要为响应者指定命名空间。试试： [http ://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html)

```
class Api::IncomesController < ApplicationController
    respond_to :json

    def index
      respond_with :api, Income.all
    end

    def show
      respond_with :api, Income.find(params[:id])
    end

    def create
      respond_with :api, Income.create(params[:income])
    end

    def update
      respond_with :api, Income.update(params[:id], params[:income])
    end

    def destroy
      respond_with :api, Income.destroy(params[:id])
    end
end 
```

# mongodb - 如何在 Mongoose Schema 中表示 MongoDB GeoJSON 字段？

> ID：15556624
> 
> 赞同：29
> 
> 时间：2013-03-21T19:44:27.847
> 
> 标签：mongodb, schema, mongoose, geospatial, geojson

MongoDB 2.4 允许使用[GeoJSON](http://www.geojson.org/geojson-spec.html)对象以及我想使用的一系列[简洁的函数和索引。](http://docs.mongodb.org/manual/applications/2dsphere/)

它期望 GeoJSON 对象以如下格式存储：

```
loc: {
  type: 'Polygon',
  coordinates: [[[-180.0, 10.0], [20.0, 90.0], [180.0, -5.0], [-30.0, -90.0]]]
} 
```

因此，在 Mongoose 中，人们会认为架构的定义如下：

```
loc: { type: 'string', coordinates: [[['number']]] } 
```

但这会带来两个问题：

1.  拥有一个名为“type”的字段会破坏 Mongoose 的模式解析，因为它允许在表单字段中定义字段：{ type: , index: } 等。

2.  Mongoose 不喜欢嵌套数组。

克服这个问题的一种方法是简单地使用`mongoose.Schema.Types.Mixed`，但是我觉得必须有更好的方法！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-30T03:04:30.573

供参考，Mongoose 3.6 正式支持 GeoJSON

[请参阅此处的发行说明](https://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#geojson-support-mongodb--24)。

示例（来自文档）：

```
new Schema({ loc: { type: [Number], index: '2dsphere'}}) 
```

... 然后 ...

```
var geojsonPoly = { type: 'Polygon', coordinates: [[[-5,-5], ['-5',5], [5,5], [5,-5],[-5,'-5']]] }

Model.find({ loc: { $within: { $geometry: geojsonPoly }}})
// or
Model.where('loc').within.geometry(geojsonPoly) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T22:50:39.067

您必须使用 Mixed 来表示数组的数组。将来有一张[公开票](https://github.com/LearnBoost/mongoose/issues/1361)可以支持这一点。

@nevi_me 是正确的，您必须`type`按照他的描述声明该属性。

这是一个要点：[https ://gist.github.com/aheckmann/5241574](https://gist.github.com/aheckmann/5241574)

有关更多想法，请参阅此处的猫鼬测试：[https ://github.com/LearnBoost/mongoose/blob/master/test/model.querying.test.js#L1931](https://github.com/LearnBoost/mongoose/blob/master/test/model.querying.test.js#L1931)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-06T14:47:34.940

创建mongoose [-geojson-schema](https://www.npmjs.com/package/mongoose-geojson-schema)包是为了方便在 Mongoose Schemas 中使用 GeoJSON。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-27T15:22:58.907

Mongoose 现在[正式支持这一点](http://mongoosejs.com/docs/guide.html#typeKey)。

简而言之，您所做的是，对于该模式，您使用该`typeKey`设置来告诉 mongoose 使用不同的键来获取类型信息。这是一个例子：

```
var schema = new Schema({
  // Mongoose interpets this as 'loc is an object with 2 keys, type and coordinates'
  loc: { type: String, coordinates: [Number] },
  // Mongoose interprets this as 'name is a String'
  name: { $type: String }
}, { typeKey: '$type' }); // A '$type' key means this object is a type declaration 
```

因此，现在您无需使用属性声明类型信息`type`，而是使用`$type`. 这适用于模式级别，因此在需要它的模式中使用它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-22T12:41:20.950

我即将开始将我在 MongoDB 中的所有位置引用从`'2d'`GeoJSON 移动，所以我会遇到同样的问题。

*   关于这个`type`问题，您必须按照我在下面所做的操作才能使其正常工作。Mongoose 正确地将其识别为字符串。
*   嵌套数组；我同意这`mongoose.Schema.Types.Mixed`会奏效，但我认为您可以尝试我在下面所做的，让我知道它是否有效。我不在安装了 mongo 的 PC 附近来尝试模式。

这是我定义架构的方式。可以调整嵌套数组以使其正常工作，所以如果不能，请告诉我。

```
var LocationObject = new Schema ({
  'type': {
    type: String,
    required: true,
    enum: ['Point', 'LineString', 'Polygon'],
    default: 'Point'
  },
  coordinates: [
    [
      { type: [ Number ]
    ]
  ]
}); 
```

如果您在 的嵌套中得到不希望的结果`Array`，请改用此方法。基本上嵌套更深。

```
coordinates: [
  { type: [
    { type: [ Number ] }
  ] }
] 
```

# php - Codeigniter - 未定义的变量

> ID：15556627
> 
> 赞同：0
> 
> 时间：2013-03-21T19:44:32.847
> 
> 标签：php, codeigniter, variables

我收到此错误：

遇到 PHP 错误

严重性：通知

消息：未定义的变量：结果

文件名：views/body.php

行号：75

我的模特

```
function get_results($search_term='default')
{
    $this->db->select('*');
    $this->db->from('books');
    $this->db->like('title', $search_term);

    $query = $this->db->get();

    return $query->result_array();
} 
```

我的控制器

```
function execute_search(){

    $this->load->model('books_model');
    $search_term = $this->input->post('search');

    $data['results'] = $this->books_model->get_results($search_term);

   $this->load->view('body', $data);

} 
```

我的观点

```
<h1>Search Results</h1>
<div>
<?php
if(is_array($results)) : foreach ($results as $val) : ?>

    <ul>
    <li><?php echo $val['title'] ?></li>
    </ul>
<?php endforeach; ?>

<?php else : ?>

<h2> No books found </h2>

<?php endif; ?>
</div> 
```

我不明白，因为我在控制器中调用了变量“结果”，但它在视图中不起作用。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:42:11.453

尝试在 for 循环之前不要将查询结果作为数组返回。

您的型号：

```
function get_results($search_term='default')
{
    $this->db->select('*');
    $this->db->from('books');
    $this->db->like('title', $search_term);

    $query = $this->db->get();

    return $query;
} 
```

您的控制器没有变化

你的看法

```
<h1>Search Results</h1>
<div>
<?php
foreach ($results->result_array() as $val) : ?>

    <ul>
    <li><?php echo $val['title'] ?></li>
    </ul>
<?php endforeach; ?>

<?php else : ?>

<h2> No books found </h2>

<?php endif; ?>
</div> 
```

# iphone - 更改视图的 layer.mask 在第一次之后不会更新

> ID：15556629
> 
> 赞同：1
> 
> 时间：2013-03-21T19:44:55.537
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我需要一个视图，在某些条件下有圆角，在其他条件下有规则的方形。

但是，当我在第一次设置视图后尝试重新设置视图的 layer.mask 时，视觉上没有任何变化。

我首先在 layoutSubviews 方法中设置角点

```
- (void)layoutSubviews 
{

  // Create the mask image by calling the function
  UIImage *mask = MTDContextCreateRoundedMask( self.bounds, 10.0, 0.0, 10.0, 0.0 );
  // Create a new layer that will work as a mask
  CALayer *layerMask = [CALayer layer];
  layerMask.frame = self.bounds;
  // Put the mask image as content of the layer
  layerMask.contents = (id)mask.CGImage;
  // set the mask layer as mask of the view layer
  self.layer.mask = layerMask;
} 
```

然后一旦满足条件，我就会调用另一种方法

```
- (void)resetCorners {

  // Create the mask image by calling the function
  UIImage *mask = MTDContextCreateRoundedMask( self.bounds, 0.0, 0.0, 0.0, 0.0 );
  // Create a new layer that will work as a mask
  CALayer *layerMask = [CALayer layer];
  layerMask.frame = self.bounds;
  // Put the mask image as content of the layer
  layerMask.contents = (id)mask.CGImage;
  // set the mask layer as mask of the view layer
  self.layer.mask = layerMask;
} 
```

但是没有视觉上的变化。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:55:57.600

您应该避免修改 layoutSubviews 中的视图（或本例中的图层）层次结构。我建议创建一个类似的方法`- (void)setRoundedCornersEnabled:(BOOL)roundedCornersEnabled`来适当地修改图层以创建圆形或方形效果。

在大多数情况下，您需要的唯一代码`layoutSubviews`是修改子视图框架的代码，并且无论`layoutSubviews`在您的视图的所有可能状态下应该如何工作（在这种情况下圆角是否启用）。UIKit 经常自行调用 layoutSubviews，因此您不能完全控制何时调用该方法。

# java - 如何制作调用 ant 的 Eclipse 启动配置？

> ID：15556632
> 
> 赞同：3
> 
> 时间：2013-03-21T19:45:01.770
> 
> 标签：java, eclipse, ant

我从 ANT 构建我的 Eclipse 项目。我也想使用 ANT 来运行它。`build.xml`每次点击都有些烦人。更重要的是，我喜欢从 ant 启动它的多种不同方式（测试、发布等）。

有没有办法可以使用 ANT 进行启动配置。这里的另一个优点是我的启动配置不依赖于 Eclipse，所以如果我愿意，我可以从命令行使用 ant，得到相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T19:50:41.480

在 Eclipse 中使用 ant 时，您可以使用默认快捷方式`ALT+SHIFT+X,Q`来启动该项目的默认构建配置。

如果您从**Run As**菜单创建了多个构建配置，那么它会要求您选择一个，或者在 Helios 中选择一个。

[从命令行运行 ant](http://ant.apache.org/manual/running.html)也很容易。

我个人也使用 EasyShell 插件，可以直接在 eclipse 中快速启动项目目录下的 cmd/cygwin。

# jquery - 在 HTML5 中一次播放一首歌曲

> ID：15556635
> 
> 赞同：1
> 
> 时间：2013-03-21T19:45:14.827
> 
> 标签：jquery, html, audio, html5-audio

我正在制作一个包含许多音频元素的 html5 网站，我希望一次播放一个，为此我使用 jQuery 暂停和播放歌曲。

我在这里找到了一个允许我这样做的代码，但是该线程已经死了 2 年。

当我播放一首歌曲时出现问题，我们将其命名为 song1，然后暂停它，然后再次尝试播放歌曲 1，歌曲 1 没有开始再现，为了再次播放歌曲 1，我必须再现任何其他歌曲，然后单击再次播放歌曲 1，这样它就可以开始播放了。我不确定如何解决这个问题。如果不这样做，我怎样才能让它发挥作用？

提前谢谢了。

HTML：

```
<div id="song">
    <a class="playback">
        <img class="play" src="./MusicPlayer/base.png" />
    </a>
    <audio><source src="./MusicPlayer/avicii.mp3" type="audio/mpeg" /></audio>
</div>
<div id="song2" >
    <a class="playback">
        <img class="play" src="./MusicPlayer/base.png" />
    </a>
    <audio><source src="./MusicPlayer/harlem.mp3" type="audio/mpeg" /></audio>
</div> 
```

Javascript：

```
var curPlaying;
$(function () {
    $(".playback").click(function (e) {
       e.preventDefault();
       var song = $(this).next('audio')[0];
       if (song.paused) {
           song.play();
           if (curPlaying) {
               $("audio", "#" + curPlaying)[0].pause();
           }
       } else {
           song.pause();
       }
       curPlaying = $(this).parent()[0].id;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:10:35.817

试试这个：

```
var curPlaying;
$(function () {
    $(".playback").click(function (e) {
       e.preventDefault();
       var song = $(this).next('audio')[0];
       if (song.paused) {
           if (curPlaying) {
               $("audio", "#" + curPlaying)[0].pause();
           }
           song.play();
           curPlaying = $(this).parent()[0].id;
       } else {
           song.pause();
           curPlaying = null;
       }
    });
}); 
```

问题是这个流程：

1) 播放歌曲 1 (curPlaying == song1)

2）暂停song1（curPlaying*仍然*设置为song1）

3）播放歌曲1（因为curPlaying仍然是真实的，歌曲1立即暂停）

无论如何，已经很晚了，我已经筋疲力尽了，所以我的代码实际上可能无法正常工作（哎呀）。但希望其余的答案能让你走上正轨。

# javascript - Firebug：找不到对象，我怎么了？

> ID：15556642
> 
> 赞同：0
> 
> 时间：2013-03-21T19:45:34.573
> 
> 标签：javascript, jquery, ajax

我用警报尝试了这段代码，所以 ilceid var 包含数据。当我更改选择框时，什么也没有发生，萤火虫说：`object not found`……我怎么了？

```
$(document).ready(function(){  
    $('#ilce').change(function(){
        var ilceid = $('#ilce').val();
        $.ajax({
        type:'POST',
        url:'ilce/ajax',
        data:'ilceid='+ilceid,
        success:function(output){
            $('#semt').html(output);
        }
    });
    });   
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:56:49.203

这里只有错误的机会-

```
 $('#semt').html(output); 
```

请确保 semt 在 html 中。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:03:40.067

尝试

[jQuery.parseJSON( json )](http://api.jquery.com/jQuery.parseJSON/)

采用格式良好的 JSON 字符串并返回结果 JavaScript 对象。

# php - 使用 HTML5 和 php 制作一个简单的联系人框可以正常工作

> ID：15556643
> 
> 赞同：0
> 
> 时间：2013-03-21T19:45:39.613
> 
> 标签：php, html

我有一个关于使这两段代码一起工作的问题。我已经经历了几天努力寻找为什么这会产生一个指向contact.php而不是发送带有数据的电子邮件的空白页面。只需姓名、公司名称和电子邮件。我不是 php 程序员，希望能得到帮助，或者如果有人能引导我朝着正确的方向前进。

HTML5 示例

```
<form method="post" action="contact.php">
    <fieldset>
        <label for="alerts-name">Your Name</label> 
        <input type="text" name="name" id="alerts-name"  class="input" maxlength="30">
        </fieldset>
        <fieldset>
          <label for="alerts-business">Business Name</label> 
          <input type="text" name="business" id="alerts-business" class="input" maxlength="50">
        </fieldset>
        <fieldset>
          <label for="alerts-email">Your email</label> 
          <input type="text" name="email" id="alerts-email" class="input" maxlength="30">
        </fieldset>
        <label>*What is 2+2? (Anti-spam)</label><br />
        <input name="human" placeholder="Type Here">
        <fieldset>
        <br />
        <fieldset>
          <input type="submit" value="submit">
        </fieldset>
      </form> 
```

下面是我正在使用的 php 代码。

```
<?php
  $name = $_POST['name'];
  $business = $_POST['business'];
  $email = $_POST['email'];
  $from = 'From: The Web Site';
  $to = 'myemail@site.com';
  $subject = 'Hello';
  $human = $_POST['human'];
  $body = "From: $name\n business: $business\n email:\n $email";

  if ($_POST['submit'] && $human == '4') {
  if (mail ($to, $name, $business, $email) ) {
  echo '<p>Your message has been sent!</p>';

  } else {
  echo '<p>Something went wrong, go back and try again!</p>';
  }
  } else if ($_POST['submit'] && $human != '4') {
  echo '<p>You answered the anti-spam question incorrectly!</p>';
  }

  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:09:15.057

您能否确认这是您在“contact.php”文件中的 PHP 代码？还是所有这些都在同一个文件中？

您没有在 PHP 中使用 $subject 变量。您的“human”元素也应该在 HTML 中具有 type="text" （或[type="number"](http://diveintohtml5.info/forms.html)）属性。

[在使用电子邮件执行任务时，我使用 PHPMailer 扩展取得了更大的成功，您可以从github](https://github.com/Synchro/PHPMailer)获取最新版本。那里有一个很好的用法示例[可以](https://github.com/Synchro/PHPMailer#a-simple-example)帮助您入门。

另外，顺便说一句，当您使用 HTML5 进行编码时，[您可以安全地使用新的“电子邮件”类型的输入](http://diveintohtml5.info/forms.html)，它具有一些不错的内置验证：

```
 <input type="email" name="email" id="alerts-email" class="input" maxlength="30"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:08:07.420

首先，您的“发件人”标头格式不正确 - 这应该是：

`'From: The Website <the@website.com>';`或者应该简单地省略，因为这是`mail()`函数的可选参数。

然后，您还将四个参数传递给该`mail()`函数 - 收件人、姓名、业务和电子邮件。[PHP 文档](http://php.net/manual/en/function.mail.php)中列出了适当的参数，它们是：

`mail (string $to, string $subject, string $message[, string $additional_headers[, string $additional_parameters]]);`

从这个意义上说，您的函数应该更像是：

`mail($to, $subject, $email);`

tl;博士：

作为`$business`邮件功能的一部分，您应该真正包含消息，这意味着您的电子邮件正文被解释为电子邮件标题并且格式完全不正确。

# java - 为什么 Java 中有两个 Timer 类（一个在 javax.swing 下，一个在 java.util 下）？

> ID：15556646
> 
> 赞同：10
> 
> 时间：2013-03-21T19:45:47.970
> 
> 标签：java, swing, timer

我对此感到非常困惑。Java 有两个 Timer 类，一个在[swing](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)下，一个在[util](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)下……这是为什么呢？如果我只想每 Y 秒运行一次 X，我应该使用哪一个？这是否意味着如果我正在构建一个 GUI，我必须使用 swing 版本的计时器？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-21T19:57:54.243

这里是 javax.swing.Timer 和 java.util.Timer 的区别：

```
javax.swing.Timer 
```

*   适用于更简单的情况，使用少量计时器（比如少于十几个）
*   在事件调度线程上运行 ActionListener 对象
*   可以直接更新 GUI，无需使用 EventQueue.invokeLater
*   如果任务完全在事件调度线程中运行（也就是说，如果它没有产生工作线程），那么 GUI 将仅在任务不花费很长时间（比如 300 毫秒以下）时保持响应

`java.util.Timer`

*   比 javax.swing.Timer 更具可扩展性，并且具有额外的调度功能
*   在私有线程上运行 TimerTask 对象
*   需要使用 EventQueue.invokeLater 来更新 GUI

您可以通过两种方式使用 Swing 计时器：

*   在延迟之后执行一次任务。例如，工具提示管理器使用 Swing 计时器来确定何时显示工具提示以及何时隐藏它。
*   重复执行一项任务。例如，您可以执行动画或更新显示目标进度的组件。

以下是上述信息的来源[http://www.javapractices.com/topic/TopicAction.do?Id=160](http://www.javapractices.com/topic/TopicAction.do?Id=160) 和[http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

> 如果我只想每 Y 秒运行一次 X，我应该使用哪一个？

取决于您正在与之交互的内容。如果您正在与 GUI 交互，则使用`javax.swing.Timer`，否则使用`java.util.Timer`.

> 这是否意味着如果我正在构建一个 GUI，我必须使用 swing 版本的计时器？

是的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:49:03.430

Swing 版本用于渲染 Swing 组件。如果您只需要时间，请使用 util.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T19:49:11.900

你说的有点对。建议如果你要做的 UI 工作会受到计时器的影响，你应该使用 swing 组件。util timer 不能自行设置 UI 元素。[这是一个很好的比较](http://java-buddy.blogspot.com/2012/09/javaxswingtimer-and-javautiltimer.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T19:50:19.743

> 在 v 1.3 中，Java 平台添加了另一个 Timer 类：java.util.Timer。它和 javax.swing.Timer 都提供相同的基本功能，但 java.util.Timer 更通用，功能更多。javax.swing.Timer 有两个特性可以使它更容易与 GUI 一起使用。首先，它的事件处理隐喻对于 GUI 程序员来说是熟悉的，并且可以使处理事件调度线程更简单一些。其次，它的自动线程共享意味着您不必采取特殊步骤来避免产生太多线程。相反，您的计时器使用与使光标闪烁、工具提示出现等相同的线程。
> 
> 您可以通过访问 The Java Tutorial 中的 How to Use Timers 部分找到更多文档和几个使用计时器的示例。有关在此 Timer 类和 java.util.Timer 之间进行选择的更多示例和帮助，请参阅在 Swing 应用程序中使用计时器，这是 Swing Connection 中的一篇文章。

来自[官方文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-07T19:56:34.100

如果你有一个简单、快速的任务需要与 swing 框架交互，那么使用 javax.swing.Timer 会更简单

对于几乎所有其他情况 - 即使是 GUI 应用程序，您也应该使用 java.util.Timer 如果您有 GUI，那么您必须以与使用 EventQueue.invokeLater 更新 GUI 的任何其他任务相同的方式处理与 swing 事件调度线程的集成正如刚才提到的

通常，当您开始时，前几个计时器事件可能看起来很快并且不太可能影响性能，但随着需求的变化，它们会花费更长的时间并且会出现更多，并且 GUI 本身的需求也会增长。最好的做法是通过在挥杆环境之外开始来避免返工 - 否则您的 GUI 将很快出现“迟钝”或“无法使用”

# php - 数据表显示问题

> ID：15556651
> 
> 赞同：0
> 
> 时间：2013-03-21T19:46:12.073
> 
> 标签：php, jquery, ajax, datatables

我正在使用来自[http://datatables.net/](http://datatables.net/)的插件在表格中显示数据。我正在使用 server_processing.php 脚本，它正在返回数据。问题是所有记录都在页面顶部返回，然后在底部插件正常工作。

该页面可以在[https://www.egoodbyes.com/site/pagin.php查看](https://www.egoodbyes.com/site/pagin.php)

php文件是

```
<?php
/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * Easy set variables
 */

/* Array of database columns which should be read and sent back to DataTables. Use a space where
 * you want to insert a non-database field (for example a counter or static image)
 */
$aColumns = array('fname', 'mi', 'lname','occup', 'age', 'dod', 'town','state');

/* Indexed column (used for fast and accurate table cardinality) */
$sIndexColumn = "vic_id";

/* DB table to use */
$sTable = "victims";

/* Database connection information */
$gaSql['user']       = "xxx";
$gaSql['password']   = "xxx_RT";
$gaSql['db']         = "xx_xxx";
$gaSql['server']     = "xxxx";

/* REMOVE THIS LINE (it just includes my SQL connection user/pass) */
//include( $_SERVER['DOCUMENT_ROOT']."/datatables/mysql.php" );

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 * If you just want to use the basic configuration for DataTables with PHP server-side, there is
 * no need to edit below this line
 */

/* 
 * Local functions
 */
function fatal_error ( $sErrorMessage = '' )
{
    header( $_SERVER['SERVER_PROTOCOL'] .' 500 Internal Server Error' );
    die( $sErrorMessage );
}

/* 
 * MySQL connection
 */
if ( ! $gaSql['link'] = mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) )
{
    fatal_error( 'Could not open connection to server' );
}

if ( ! mysql_select_db( $gaSql['db'], $gaSql['link'] ) )
{
    fatal_error( 'Could not select database ' );
}

/* 
 * Paging
 */
$sLimit = "";
if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
{
    $sLimit = "LIMIT ".intval( $_GET['iDisplayStart'] ).", ".
        intval( $_GET['iDisplayLength'] );
}

/*
 * Ordering
 */
$sOrder = "";
if ( isset( $_GET['iSortCol_0'] ) )
{
    $sOrder = "ORDER BY  ";
    for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
    {
        if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
        {
            $sOrder .= "`".$aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."` ".
                ($_GET['sSortDir_'.$i]==='asc' ? 'asc' : 'desc') .", ";
        }
    }

    $sOrder = substr_replace( $sOrder, "", -2 );
    if ( $sOrder == "ORDER BY" )
    {
        $sOrder = "";
    }
}

/* 
 * Filtering
 * NOTE this does not match the built-in DataTables filtering which does it
 * word by word on any field. It's possible to do here, but concerned about efficiency
 * on very large tables, and MySQL's regex functionality is very limited
 */
$sWhere = "";
if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
{
    $sWhere = "WHERE (";
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
    }
    $sWhere = substr_replace( $sWhere, "", -3 );
    $sWhere .= ')';
}

/* Individual column filtering */
for ( $i=0 ; $i<count($aColumns) ; $i++ )
{
    if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
    {
        if ( $sWhere == "" )
        {
            $sWhere = "WHERE ";
        }
        else
        {
            $sWhere .= " AND ";
        }
        $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
    }
}

/*
 * SQL queries
 * Get data to display
 */
$sQuery = "
    SELECT SQL_CALC_FOUND_ROWS `".str_replace(" , ", " ", implode("`, `", $aColumns))."`
    FROM   $sTable
    $sWhere
    $sOrder
    $sLimit
    ";
$rResult = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );

/* Data set length after filtering */
$sQuery = "
    SELECT FOUND_ROWS()
";
$rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
$aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
$iFilteredTotal = $aResultFilterTotal[0];

/* Total data set length */
$sQuery = "
    SELECT COUNT(`".$sIndexColumn."`)
    FROM   $sTable
";
$rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or fatal_error( 'MySQL Error: ' . mysql_errno() );
$aResultTotal = mysql_fetch_array($rResultTotal);
$iTotal = $aResultTotal[0];

/*
 * Output
 */
$output = array(
    "sEcho" => intval($_GET['sEcho']),
    "iTotalRecords" => $iTotal,
    "iTotalDisplayRecords" => $iFilteredTotal,
    "aaData" => array()
);

while ( $aRow = mysql_fetch_array( $rResult ) )
{
    $row = array();
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( $aColumns[$i] == "version" )
        {
            /* Special output formatting for 'version' column */
            $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
        }
        else if ( $aColumns[$i] != ' ' )
        {
            /* General output */
            $row[] = $aRow[ $aColumns[$i] ];
        }
    }
    $output['aaData'][] = $row;
}

echo json_encode( $output );
?> 
```

这是 HTML

```
 <?php 
include ('server_processing.php');
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>

<!--<link href="css/shThemeDataTables.css" rel="stylesheet" type="text/css" media="all">-->
<!--<link href="css/shCore.css" rel="stylesheet" type="text/css" media="all">-->
<!--<link href="css/doc.css" rel="stylesheet" type="text/css" media="all">-->
<link href="css/demo_table.css" rel="stylesheet" type="text/css" media="all">
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery.dataTables.js"></script>
<script>
$(document).ready(function() {
    $('#table_id').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "server_processing.php"
    } );
} );

</script>
</head>

<body>

<table id="table_id"  class="display">
    <thead>
        <tr>
            <th>First Name</th>
            <th>MI</th>
            <th>Last Name</th>
            <th>Branch of Service</th>
             <th>Age</th>
              <th>Date of Death</th>
               <th>Town</th>
               <th>State</th>
        </tr>
    </thead>
 <tbody>
        <tr>
            <td></td>
            <td></td>
             <td></td>
            <td></td>
             <td></td>
            <td></td>
             <td></td>

        </tr>

    </tbody>
</table>

</body>
</html> 
```

我在他们的论坛上问过这个问题，但是它不是很活跃，对于那些不熟悉的人来说，这是一个非常有趣的项目。

希望有人能指出我哪里出错了。

谢谢

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:38:05.023

问题是 html 中的第一行，您不需要包含服务器处理 php 文件，ajax 调用正在收集 json 对象以供数据表使用

# html - 用 CSS 替换 HTML 属性

> ID：15556653
> 
> 赞同：3
> 
> 时间：2013-03-21T19:46:19.270
> 
> 标签：html, css, dreamweaver

我有许多由一些同事通过 Dreamweaver CS5.5 和（更糟！）Frontpage 2003 生成的 html 文件。这些文件的来源看起来很可怕，我的任务是将它们更新为 HTML5 格式。我在网上找到了用于剥离内联 css 并将代码添加到外部工作表以及将多个 css 文件组合和合并到一个文件中的工具。

我想要找到的是一些系统，可以采用过时的 html 属性，如 align、valign、bgcolor、width、height 等，并用 css 代码替换它们。手动操作太多了，所以我想我可以从软件上获得一些想法来帮助我做到这一点。谢谢。

**编辑：**亨利想知道我找到的工具。他们来了：

[http://inlinecssextractor.com/home.html](http://inlinecssextractor.com/home.html)（内联 CSS 提取器）

[http://www.minifycss.com/css-compressor/（CSS](http://www.minifycss.com/css-compressor/)压缩器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:14:37.447

对于 CSS 部分，[fantasai](http://fantasai.tripod.com/qref/HTML4/deprecated.html)将帮助您在现代 CSS 中设置您删除的每个弃用属性（或替换为具有相同样式的类）

祝你好运`<ms:o`。和`<font>`：/

# javascript - html5画布纵横比？

> ID：15556657
> 
> 赞同：0
> 
> 时间：2013-03-21T19:46:39.390
> 
> 标签：javascript

在 html5 画布元素使用中，默认纵横比存在问题。Firefox 和 Safari 中画布元素的默认纵横比，宽度和高度至少为 2/1。这是唯一一个高度和宽度的组合，它将为绘制到画布元素的矩形产生 1:1 的纵横比。

那么，如何设置画布元素的纵横比以允许绘制到它的项目的比例为 1:1？

我在 Coding Forums 有一个帐户，但没有得到足够的回应。我已经获得了一些关于这个主题的印刷文本，但他们没有解决这个问题。我已经编程 javascript/html/css 至少 10 年了。

我希望我不会被一个不可改变的默认比率所困。

查看类似问题的列表，我没有看到这个特定问题得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T10:17:15.240

Canvas 可以有自己的宽度和高度，独立于 Dom 元素。这导致了非 1:1 的纵横比。

要修复，您需要设置宽度和高度属性以匹配包含 dom 的元素的宽度和高度。

例如，在 jquery 中，您可以执行以下操作。

$('canvas').attr('width', '100').attr('height', '100');

这将使您的画布成为 100 像素的正方形。假设这是在具有匹配宽度和高度属性的 dom 元素中，那么您将获得 1:1 的纵横比。

# image-processing - 寻找特定的细化算法

> ID：15556661
> 
> 赞同：0
> 
> 时间：2013-03-21T19:46:54.047
> 
> 标签：image-processing, mathematical-morphology

我有一个二进制图像，为简单起见，我们假设它是一条简单的直线：

```
00000000000000
00000000000000
00000000000000
11111111110000
00000000000000
00000000000000
00000000000000 
```

我想将它扩展 2px。

为此，我通过两次迭代应用了膨胀，并且正如预期的那样：

```
00000000000000
11111111111100
11111111111100
11111111111100
11111111111100
11111111111100
00000000000000 
```

然后，我的想法是简单地应用细化并将初始线延长两个像素。但相反，我得到了缩短的线条，可能是因为线条粗细：

```
00000000000000
10000000000000
10000000000000
11111111100000
10000000000000
10000000000000
00000000000000 
```

然后我想用菱形结构足迹应用膨胀而不是 3x3 个（），但结果更糟 - 线被缩短了一个像素。

对于细化，我使用[了 Zhang-Suen 算法](http://opencv-code.com/quick-tips/implementation-of-thinning-algorithm-in-opencv/)和[Guo-Hall 算法](http://opencv-code.com/quick-tips/implementation-of-guo-hall-thinning-algorithm/)，我还尝试了 skimage 暴露的 Otsu 方法，得到了类似的结果。

有人可以告诉我细化算法的存在可以让我走向哪里，或者可能是不同的方法吗？

* * *

**更新**（以解决@marinus 评论）：

如前所述，我喜欢将初始行延长 2px 并得到：

```
00000000000000
00000000000000
00000000000000
11111111111100
00000000000000
00000000000000
00000000000000 
```

虽然我不能用我的细化方法，因为细化似乎是这样工作的：

![图像](../Images/5e2e40dd162f0ea1383c6237bdc4a028.png)

因此，仅通过扩大初始线，我不可能通过细化来扩展它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:36:38.280

答案在于您正在使用的形态学内核。在您的示例中，您提到您只想在水平方向上将线延伸两个像素。然后，您应用的内核应该符合您的目标。

对于 dialtion，每个“on”像素都是当前像素及其与内核的邻居。3x3 内核将在当前像素周围产生 1。

```
3x3:

111
111
111 
```

相反，如果您应用了 5x1 的内核：

```
00000
11111
00000 
```

将其应用于您的原始信号，您将获得所需的结果。如果您只想将像素添加到右侧，请执行 111 的内核，内核的中心位于第一个像素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T23:17:40.427

javascript.js 中的 Zhang-Suen 细化算法

```
for(x=0;x<5;x++){
for(n=0;n<2;n++){
for(i=0;i<len;){
p1=pp[i];p2=pp[i-width];p3=pp[i-width+1];
p8=pp[i-1];p9=pp[i-width-1];p4=pp[i+1];
p7=pp[i+width-1];p6=pp[i+width];p5=pp[i+width+1];
/* pixels position  
9   2   3
8   1   4   
7   6   5

*/
zn=0;
b=p2+p3+p4+p5+p6+p7+p8+p9;
if(p2<p3){zn++;}
if(p3<p4){zn++;}
if(p4<p5){zn++;}
if(p5<p6){zn++;}
if(p6<p7){zn++;}
if(p7<p8){zn++;}
if(p8<p9){zn++;}
if(p9<p2){zn++;}
if(b>=2&&b<=6&&zn==1&&p2*p4*p6==0&&p4*p6*p8==0&&n==0){id.push(i);}
if(b>=2&&b<=6&&zn==1&&p2*p4*p8==0&&p2*p6*p8==0&&n==1){id.push(i);}
i++;}
for(i=0;i<id.length;i++){pp[id[i]]=0;}id=[];
}} 
```

结果：// [https://lh6.googleusercontent.com/-rtDafT3tJ-Q/UqT6thazqJI/AAAAAAAABPE/b2dc7PQNZ24/w973-h220-no/Screenshot+from+2013-12-09+00%253A58%253A36.png](https://lh6.googleusercontent.com/-rtDafT3tJ-Q/UqT6thazqJI/AAAAAAAABPE/b2dc7PQNZ24/w973-h220-no/Screenshot+from+2013-12-09+00%253A58%253A36.png)

参考 ：

jsAscii - 来自带有 Javascript 和 Canvas 的图像的 ASCII 艺术将图像转换为点[http://blog.nihilogic.dk/2008/03/jsascii.html](http://blog.nihilogic.dk/2008/03/jsascii.html)

# node.js - 如何使用 LESS 解析器延迟对 @import 规则的评估？

> ID：15556662
> 
> 赞同：4
> 
> 时间：2013-03-21T19:46:58.137
> 
> 标签：node.js, less

我正在尝试组建一个资源构建系统，该系统将从一组目录中加载 LESS 文件：

```
Common
├─┬ sub
│ ├── A
│ └── B
├── C
└── ... 
```

每个底层目录都有一个入口点 index.less。索引文件将包含 `@import`语句，例如`@import "colors.less";`.

我想要发生的是：

*   如果导入的文件存在于当前目录中，则使用它。
*   如果文件不存在，则使用父目录下的同名文件，递归到根目录。

因此，在解析时`/Common/sub/A/index.less`，请先查找 colors.less in `A`，然后 in `sub`，然后再查找`Common`。

我已经开发了一个两阶段构建过程的前半部分：

1.  扫描整个目录结构并将所有文件加载到一个对象中：

    ```
    common = { files: { "colors.less": "/* LESS file contents */", ... },
               sub: {
                   files: { ... },
                   A: { files: { "index.less": "@import 'colors.less';", ... } },
                   B: { files: { "index.less": "@import 'colors.less';", ... } }
               },
               C: { files: { "index.less": "@import 'colors.less';", ... } }
              } 
    ```

2.  为每个底层目录构建生成的 CSS 文件。

第二阶段是我遇到一些问题的地方。首先，我创建一个解析器。

```
var parser = new less.Parser({
    filename: 'index.less'
}); 
```

然后解析文件：

```
parser.parse(common.sub.A.files['index.less'], function(e, tree) {
    // `tree` is the AST
}); 
```

这为我们提供了一个交付给回调的抽象语法树 (AST)。问题是 LESS 解析器`@import`用自己的文件导入器解析它找到的所有语句，并将导入的文件合并到当前的 AST 中。

为了解决这个问题，我目前正在重载导入器以重写路径：

```
// before starting anything:

var importer = less.Parser.importer;
less.Parser.importer = function(path, currentFileInfo, callback, env) {
    var newPath;

    // here, use the object from phase 1 to resolve the path nearest file
    // matching `path` (which is really just a filename), and set `newPath`

    importer(newPath, currentFileInfo, callback, env);
}; 
```

但是，LESS 导入器仍然从磁盘读取文件。从性能的角度来看，这很糟糕，因为 (A) 我们已经在内存中拥有了文件的内容，并且 (B) 有大量的底层目录，所以我们不得不重新加载和重新解析相同的公共目录文件多次。

我想做的是在第一阶段*解析*每个 LESS 文件，然后在第二阶段根据需要合并 AST。

为了做到这一点，我需要防止 LESS`@import`在解析期间评估节点。然后在第 2 阶段，我可以手动找到`@import`AST 中的节点并合并到已经解析的 AST 中（递归地，因为它们可以包含自己的`@import`s）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:27:19.843

一个有趣的问题。在不深入研究 Less 解析器的实现（我假设您现在想尽可能避免）的情况下，为什么不简单地添加一个预解析步骤：读取所有 .less 文件并注释掉导入？

因此，在通过解析器运行 less 文件之前，您可以自己读取它并写入文件，注释掉 @import 行，并像您一样记下它们。然后通过解析器运行它，您将获得一个 AST，您可以将之前获取的导入信息附加到该 AST。

现在，您可以按照您已经计划的任何方式将所有 AST 组合在一起。

确保将较少的文件保持在您找到它们的状态。取消注释这些行，或者更好的方法是复制您要处理的每个文件，注释掉导入，解析它，然后删除。这样您就不必担心污染原始文件。

似乎是规避问题的快速方法。除非你宁愿做一些事情，比如告诉 less 解析器本身忽略 @import 标记。（只是在这里随机刺伤，但也许如果您在第 1252 行编辑 lib/less/parser.js 中的“导入”函数以返回 `new(tree.Comment)(dir);`它可能只是将每个标记解析`@import`为注释。

# file-upload - Kendo UI 上传异步错误

> ID：15556668
> 
> 赞同：0
> 
> 时间：2013-03-21T19:47:14.733
> 
> 标签：file-upload, telerik, kendo-ui

我下载了Kendo.UI的试用版，所以登录论坛，现阶段是不可能的，希望有人能帮我解决这个问题。

我正在尝试将异步上传实现到基本的 MVC 4 应用程序上。我添加了对 Kendo.UI.MVC 包装器的引用，并将必要的命名空间 Kendo.UI.MVC 添加到两个 web.config 文件（根目录和视图下）。

如果我在我的登陆视图（index.cshtml）上实现一个基本的上传器，它工作正常：

```
<form action="/Home/Save" method="post">
   @(Html.Kendo().Upload().Name("files"))
   <input type="submit" value="Submit" />
</form> 
```

但是，只要将 Save() 方法添加到 Async，我就会收到“索引超出范围”异常。我知道这是保存方法，因为如果我只添加“AutoUpload(true)”而没有操作引用，它不会引发异常。如果我只添加“Remove("Remove", "Home")" 它仍然显示 Select 按钮，没有错误，但是 "Save("Save", "Home")" 方法不断抛出上述异常。

我严格按照试用版附带的示例进行操作，它应该可以在网络上工作，但事实并非如此。

查看（index.cshtml）：

```
@(Html.Kendo()
      .Upload()
      .Name("files")
      .Async(async => async
                      .Save("Save", "Home"))) 
```

***-- 上面的语句抛出错误***

```
@(Html.Kendo()
      .Upload()
      .Name("files")
      .Async(async => async
                      .AutoUpload(true))) 
```

***--这条线有效***

**控制器（HomeController）：**

```
public class HomeController : Controller
{
   public ActionResult Index()
   {
      return View();
   }

   [HttpPost]
   public ActionResult Save(IEnumerable<HttpPostedFile> files)
   {
      // I just want the break-point to be hit
      // does not due to IndexOutOfRange exception being thrown

      return Content("");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:31:21.463

唯一看起来错误的是 Razor 语法：

```
(@Html.Kendo() 
```

应该

```
@(Html.Kendo() 
```

我能够通过这个小小的改动来运行你的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T12:54:11.077

更新了 Visual Studio 的 MVC 模板，它可以工作了。谢谢。

# c# - linq中的“and”和“wheres”之间有什么真正的区别吗

> ID：15556672
> 
> 赞同：3
> 
> 时间：2013-03-21T19:47:39.037
> 
> 标签：c#, .net, linq

我有这个查询

```
 from a in objects
 where a.property1 == 2
 && a.property2 == 3
 select a 
```

和

```
from a in objects
where a.property1 == 2
where a.property2 == 3
select a 
```

我想知道语句的执行方式是否有任何真正的区别，以及使用这两种方法有什么好处

截至目前，我的问题是关于对象的 linq

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:51:39.190

您的第一个案例将转换为：

```
objects.Where(a => a.property1 == 2 && a.property2 == 3); 
```

而后一个将转换为：

```
objects.Where(a => a.property1 == 2).Where(a => a.property2 == 3); 
```

不同之处在于后者将被过滤两次，而第一次在 lambda 中进行比较。

这是假设 LINQ-to-Objects；其他提供者将取决于实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:51:45.623

实际上，这两个语句是相同的，因为 C# 仅在左侧为真时评估 AND 操作的右侧。

如果 C# 不懒惰地进行 AND 评估，那么在大多数项目未能满足第一个标准（或第二个标准是昂贵的评估）的情况下，顺序 WHERE 评估可能会提供相当显着的性能提升。然而，就目前而言，C# 默认情况下是惰性的，因此其性能与惰性评估的 LINQ 相当。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:51:51.553

是否存在差异取决于底层 LINQ 提供程序。LINQ 提供程序负责将您的 LINQ 查询转换为底层功能表示，例如 SQL。

对我来说真正的区别是可读性。两个链接的 where 语句会降低可读性。

# java - 可以绕过 RealPlayer 插件吗？

> ID：15556675
> 
> 赞同：1
> 
> 时间：2013-03-21T19:47:51.877
> 
> 标签：java, javascript, realplayer

我想知道是否有人知道如何明确阻止 RealPlayer 插件允许用户下载视频。

所以我在一家为会员提供视频学习的公司工作。我们的大部分视频都可供付费客户使用，并且都是我公司的版权。

因此，新版本的 RealPlayer 集成了一个流式视频下载器，因此如果您在一个有视频的网页上，RealPlayer 下载窗口会弹出，并为您提供下载视频的选项。在 webkit 中下载 .mp4，在 FireFox（和 RealPlayer 浏览器）中下载 .flv 版本。

到目前为止，我的代码是这样的：

```
(function(){
   var pluginArray = navigator.plugins;
   var ua = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) RealPlayer/12.0.1.1750'

   for ( var i = 0; i < pluginArray.length; i++ ) {

      // check to see if the plugin is installed
      if ( pluginArray[i].description === "RealPlayer Plugin" )
      {
         console.log( pluginArray[i].description + ' is installed.' );

         //checks to see if you're using the RealPlayer browser
         var re1='.*?'; // Non-greedy match on filler
         var re2='(RealPlayer)';  // Word 1

         var p = new RegExp( re1 + re2, ["i"] );
         var m = p.exec( ua );

         if ( m != null )
         {
            console.log( 'You are using the RealPlayer Browser' )
         }
      }
   }
})(); 
```

有了这个逻辑，我愿意接受关于下一步做什么的建议。理想情况下，我们不想完全阻止内容，因为我们的大多数用户可能没有下载视频，但对于那些已经下载的用户，我们希望阻止它。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T01:06:11.593

它看起来像`wmv`编码，`backchannel multicasting`是你的朋友：

> Helix Server 支持 RTMPS 和 HTTPS 以实现安全的内容交付，并且可以支持分发受 Windows Media DRM 保护的内容。Helix Security Manager 还可用于保护通过 RTSP/udp/多播流量访问内容 URL。
> 
> Helix Server 支持使用可扩展的多播（真正的 IP 广播）或使用反向通道多播（内容通过多播进行广播，但始终向服务器开放用于身份验证的控制连接）来多播内容的能力。
> 
> 使用可扩展的多播没有保护方法，因为任何可以在网络上播放内容的设备都可以使用内容，但是可以保护反向信道多播。然而，反向通道多播仅适用于在 RealPlayer 中播放的 RealMedia 内容。

**参考**

*   [Helix 是否支持内容保护和访问控制](http://helixforum.realnetworks.com/helix_support/topics/does_helix_support_content_protection_and_access_control)

*   [Helix 代理配置指南：反向通道多播](http://service.real.com/help/library/guides/helixproxyconfig/htmfiles/multicas.htm)

*   [Helix 支持指南 - Realnetworks (pdf)](http://www.realnetworks.com/sites/default/files/helixsupport-help-center.pdf)

# javascript - 将两个数组合并为一个数组javascript

> ID：15556677
> 
> 赞同：3
> 
> 时间：2013-03-21T19:47:58.123
> 
> 标签：javascript

我目前有两个数组

```
array1 = [5, 10, 20]
array2 = [10, 20, 30] 
```

array3 或类似的东西：

```
array4 = [{"a":5, "b":10}, {"a":10, "b":20}, {"a":20, "b":30}] 
```

我知道这可能是一个简单的问题，但我什至不确定 array3 会被称为什么，所以很难用谷歌搜索。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T19:49:30.577

非常简单，首先我们创建一个结果数组，然后我们遍历第一个数组并向其中添加元素。[**这是一个工作小提琴。**](http://jsfiddle.net/t6caH/)

请注意，在您的代码中，您的符号`{5,10}`在 JavaScript 中是非法的，我假设您的意思是一个数组。

```
var result = [];
for(var i=0;i<array1.length;i++){
   result.push([array1[i],array2[i]]);
} 
```

**编辑后更新**，好像你想要对象，试试

```
var result = [];
for(var i=0;i<array1.length;i++){
   result.push({a:array1[i],b:array2[i]});//add object literal
} 
```

如果您愿意，您还可以`map`在功能上使用和编写相同的代码。[这是那种实现的小提琴](http://jsfiddle.net/AXc4c/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T19:51:15.233

这叫做`zip`...

```
function zip() {
    var args = [].slice.call(arguments);
    var shortest = args.length==0 ? [] : args.reduce(function(a,b){
        return a.length<b.length ? a : b
    });

    return shortest.map(function(_,i){
        return args.map(function(array){return array[i]})
    });
} 
```

检查[Underscore](http://documentcloud.github.com/underscore/)具有许多这些实用功能的奇妙 js 库...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-24T10:01:55.097

**你可以使用 ES6 的新特性轻松做到这一点**

```
 var  array1 = [5, 10, 20];
   var   array2 = [10, 20, 30];
  var combineArray = [...array1 , ...array2];
       //output should be like this of combine array : [5, 10 ,20 ,10 ,20 ,30] 
```

**如果您想在两个数组中添加额外的项目，那么您可以使用以下方式执行此操作：**

```
 var combineArray = [...array1 ,333, ...array2];
           //output should be like this of combine array : [5, 10 ,20 ,333 ,10 ,20 ,30] 
```

# android - AppStore 中不允许的应用程序

> ID：15556682
> 
> 赞同：-4
> 
> 时间：2013-03-21T19:48:12.063
> 
> 标签：android, ios, windows-phone-7, blackberry

我在哪里可以获得移动平台应用商店中不允许的应用类型列表？例如。IOS、安卓、黑莓、Windows Phone。

例如：不允许成人内容，还有什么其他人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:52:23.443

我不相信任何应用程序商店本身就禁止某些“类型”的应用程序。您必须仔细检查每个应用商店的指南，以确定哪些是允许的，哪些是不允许的。即使那样 - 这也不是一成不变的。由于监督、缺少应用程序等原因，应用程序最初可能会被允许，如果出现公众强烈抗议或负责该应用程序商店的组织改变主意，则稍后会被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:05:45.387

所以你在这里，但请记住，你可以自己做！（去谷歌上查询！）

1.  谷歌（安卓）： http:
    [//support.google.com/googleplay/android-developer/answer/188189 ?hl=en](http://support.google.com/googleplay/android-developer/answer/188189?hl=en)

2.  苹果 (iOS)：
    [http](http://stadium.weblogsinc.com/engadget/files/app-store-guidelines.pdf) ://stadium.weblogsinc.com/engadget/files/app-store-guidelines.pdf (PDF)

3.  微软（Windows Phone）：http:
    [//msdn.microsoft.com/de-DE/library/windowsphone/develop/hh184841%28v=vs.105%29.aspx](http://msdn.microsoft.com/de-DE/library/windowsphone/develop/hh184841%28v=vs.105%29.aspx)

不保证所有链接都有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T19:55:25.263

至于 Android，请查看[此页面](http://support.google.com/googleplay/android-developer/answer/188189?hl=en)以阅读有关应用程序内容评级的信息。

下次请不要问非编程问题，SO是编程资源

# c#-4.0 - Telerik RadComboBox 项目未得到检查

> ID：15556684
> 
> 赞同：0
> 
> 时间：2013-03-21T19:48:14.440
> 
> 标签：c#-4.0, telerik, telerik-grid, radcombobox

我有一个搜索页面，我在其中选择一些参数并点击提交我存储会话并在 radgrid 中获取结果。双击该行我转到编辑页面..我将 radcombobox.text 捕获到会话中..示例Session["Status]=active,inactive,old 我在 !postback 上检索会话以保留编辑页面中的值。.

示例代码...

我尝试了下面的代码来让组合框中的项目在从编辑页面返回时得到检查...

不知道为什么它不检查 RadCombobox 中的项目。请告知

```
 if (Session["Status"] != null)
                    {
                        ddlStatus.Text = Session["Status"].ToString();

                        string status = Session["Status"].ToString();

                        string[] words = status.Split(',');

                            foreach (RadComboBoxItem item in ddlStatus.Items)
                            {

                                string strtext = item.Text.ToString();
                                if (strtext.Length > 0)
                                {

                                   if(ddlStatus.Items.Any(x => words.Equals(x)))
                                   {
                                       item.Checked = true;
                                   }

                                    else
                                    {
                                        item.Checked = false;
                                    }

                            }
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:38:03.963

我刚刚尝试了您的代码，您只需将 foreach 修改为：

```
foreach (RadComboBoxItem item in ddlStatus.Items.ToList())
{
                                //   if(ddlStatus.Items.Any(x => words.Equals(x)))

                                     if(words.Contains(item.Text))
                                   {
                                       item.Checked = true;
                                   }

                                    else
                                    {
                                        item.Checked = false;
                                    }

} 
```

它会起作用的。

# javascript - javascript中继承的正确语法

> ID：15556691
> 
> 赞同：1
> 
> 时间：2013-03-21T19:48:37.707
> 
> 标签：javascript

很琐碎的问题

我试图理解javascript中的继承

```
function Animal() {
  this.eats = true;
}
function Rabbit() {
  this.jumps = true;
}
//Rabbit is-a Animal
Rabbit.prototype = Animal;  //I'm assuming this does not inherit

alert(Rabbit.prototype.eats); // returns undefined 
```

什么是正确的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T20:40:01.337

这是“答案”，但请允许我为后代提供替代方案。

调用父级的构造函数来获取父级的原型并不是一个好主意。这样做可能会产生副作用；设置 ids，跟踪实例的数量，无论在构造函数中发生什么。

您可以在 Child 构造函数和 Object.create 或 polyfill 中使用 Parent.call() 来获取其原型：

```
function Animal () {
    this.eats = true;
}

function Rabbit (legs) {
    Animal.call(this);
    this.jumps = true;
}
Rabbit.prototype = Object.create(Animal.prototype);

// Or if you're not working with ES5 (this function not optimized for re-use):
Rabbit.prototype = (function () {
                        function F () {};
                        F.prototype = Animal.prototype;
                        return new F();
                    }());

var bugs = new Rabbit();
alert(bugs instanceof Animal); // true
alert(bugs.eats); // true 
```

# javascript - 我可以在 Javascript 中编写“扩展”继承函数吗？

> ID：15556696
> 
> 赞同：0
> 
> 时间：2013-03-21T19:48:51.323
> 
> 标签：javascript, inheritance, this

我希望稍微简化 Javascript 中的继承。从我到目前为止收集到的信息来看，实现“类”之间“继承”的好方法如下：

```
function ParentClass() {
    //Parent Constructor
}

ChildClass.prototype = new ParentClass(); //Step 1: Use parent as prototype
ChildClass.prototype.constructor = ChildClass; //Step 2: Designate appropriate constructor
function ChildClass() {
    ParentClass.call(this, arguments); //Step 3: Call the parent's constructor from the child's

    //Child Constructor
} 
```

我喜欢将这个过程分为三个“步骤”，正如我上面标记的那样（步骤 1、2 和 3）。我想将所有这三个步骤放在一个函数中（来自 Java 背景，我将其标记为“扩展”），我可以从函数构造函数对象中调用它，如下所示：

```
function ParentClass() {
    //Parent Constructor
}

ChildClass.extend(ParentClass); //Execute steps 1, 2 and 3 all in this function
function ChildClass() {
    //Child Constructor
} 
```

这是我到目前为止所拥有的：

```
Function.prototype.extend = function (parent) {
    var oldConstructor = this.prototype.constructor;
    this.prototype = new parent(); //Step 1
    this.prototype.constructor = function (arguments) { //Step 2
        parent.apply(this, arguments); //Step 3
        oldConstructor(arguments);
    };
} 
```

在这种情况下，扩展功能的第 1 步和第 2 步工作正常，但第 3 步给我带来了问题。我试图做的是用一个调用父构造函数的新函数替换子构造函数，然后是子构造函数。但是，当我运行它时，不会调用父构造函数。我无法确定问题（我是否正确使用了“this”关键字？）；也许我以错误的方式接近这个。可以创建一个功能来做到这一点，对吧？如何制作有效的“扩展”功能？

更新：

真正的问题似乎在于我对“this”关键字的使用。这是我现在正在查看的代码：

```
function ParentClass(x) {
    this.value = x;
}

function ChildClass() {
}
ChildClass.extend(ParentClass);

function testtest() {
    var a = new ParentClass("hello world"); //Alerts "hello world"
    alert(a.value);
    var b = new ChildClass("hello world"); //Alerts "undefined"
    alert(b.value);
} 
```

为什么第一个警报有效而第二个警报无效？我认为“this”是指函数运行的上下文，在这两种情况下都是调用构造函数（a或b）的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:58:24.647

如果你真的想这样做，也许你应该只使用[Coffeescript](http://coffeescript.org/)。或者至少从中得到一些想法。

它在 Javascript 之上透明地提供[对类和继承](http://coffeescript.org/#classes)的支持，并且使用与您在此处使用的几乎相同的想法来实现。

如果这是一项学术练习，请务必继续进行（并查看 Coffeescript 如何获得灵感）。但除此之外，没有必要重新发明轮子。

为了直接比较，请将以下内容粘贴到[http://js2coffee.org/](http://js2coffee.org/)

```
class Shape
  area: -> undefined
  name: -> "Shape"

class Rectangle extends Shape
  constructor: (w, h) ->
    @w = w
    @h = h

  area: ->
    @w * @h

  name: -> "Rectangle" + super 
```

一个 Rectangle's`name()`现在会返回`RectangleShape`。这个名字很傻，但让你了解它是如何`super`工作的。

它在 JS 中的样子（注意`__extends`函数中的所有管道）：

```
var Rectangle, Shape,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Shape = (function() {

  function Shape() {}

  Shape.prototype.area = function() {
    return void 0;
  };

  Shape.prototype.name = function() {
    return "Shape";
  };

  return Shape;

})();

Rectangle = (function(_super) {

  __extends(Rectangle, _super);

  function Rectangle(w, h) {
    this.w = w;
    this.h = h;
  }

  Rectangle.prototype.area = function() {
    return this.w * this.h;
  };

  Rectangle.prototype.name = function() {
    return "Rectangle" + Rectangle.__super__.name.apply(this, arguments);
  };

  return Rectangle;

})(Shape); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:24:58.123

请注意，您的第二个块中的代码不会以相同的顺序执行这些步骤。在调用extend 后声明函数时，它会覆盖extend 函数创建的构造函数。尝试先声明你的子类，然后扩展它：

这对我有用：

```
function Parent() {
  console.log("Parent Constructor");
}

function Child() {
  console.log("Child Constructor");
}

Child.extend(Parent);

new Child() 
```

输出：

```
Parent Constructor
Child Constructor 
```

# ruby-on-rails - 如何以正确的格式输出下拉菜单表单

> ID：15556697
> 
> 赞同：0
> 
> 时间：2013-03-21T19:48:51.637
> 
> 标签：ruby-on-rails

我有为用户注册创建的表格。我必须输出信息的代码没有按我希望的那样运行。对于生日和您感兴趣的年龄（约会网站）..它无法正确输出结果。对于生日，当用户去编辑帐户设置时，它应该显示 1-9-1956，而不是 1956。对于年龄，它应该显示 35 到 48，而不是 48。有人可以帮我解决这个问题吗？

settings.html.erb（修改账户设置）：

```
<p>Email: <%= best_in_place @user, :email %></p>
<p>Password: <%= best_in_place @user, :password %></p>
<p>Password Confirmation: <%= best_in_place @user, :password_confirmation %></p>
<p>Zip Code: <%= best_in_place @user, :zip_code %></p>
<p>Birthdate: <%= best_in_place @user, :birthday %></p>
<p>Age: <%= best_in_place @user, :age %></p> 
```

new.html.erb（注册页面）：

```
 <div class="field">
                <%= f.label :age %>
                <%= f.text_field :age %> to 
                <%= f.text_field :age %>
            </div>
            <div class="field">
                    <%= f.label :birthday %>
                    <%= f.select :birthday, [['mm', nil], '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']%>

                    <%= f.select :birthday, [['dd', nil], '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31']%>

                    <%= f.select :birthday, [['yyyy', nil], '1995', '1994', '1993', '1992', '1991', '1990', '1989', '1988', '1987', '1986', '1985', '1984', '1983', '1982', '1981', '1980', '1979', '1978', '1977', '1976', '1975', '1974', '1973', '1972', '1971', '1970', '1969', '1968', '1967', '1966', '1965', '1964', '1963', '1962', '1961', '1960', '1959', '1958', '1957', '1956', '1955', '1954', '1953', '1952', '1951', '1950', '1949', '1948', '1947', '1946', '1945', '1944', '1943', '1942', '1941',
'1940', '1939', '1938', '1937', '1936', '1935', '1934', '1933', '1932',
'1931', '1930' ]%>
                    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:02:48.023

我只会给出2个指针：

1.  使用[date_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)输入日期。
2.  每个输入都应该有不同的名称。您有两个名为“年龄”的文本字段。

# android - 缓冲区和值过滤器

> ID：15556699
> 
> 赞同：0
> 
> 时间：2013-03-21T19:48:53.540
> 
> 标签：android, filter, bluetooth, buffer, spp

我遇到了一个奇怪的错误，我从串行连接接收到错误的值。我之前创建了一个帖子，但还没有人回复。[其他问题]：[蓝牙SPP（串行）故障（Android）](https://stackoverflow.com/questions/15538575/bluetooth-spp-serial-glitchs-android)

因为我想尽快完成这个项目，所以我认为我必须实施一个“补丁”来过滤所有值。如果新值与我之前的值相比大约 +/- 15%，我将保留它，如果它超过此截止范围，我将丢弃它。这是我收到值的代码：

```
hBluetooth = new Handler() {
    public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
        case RECEIVE_MESSAGE:                                                   // If we receive a message
            byte[] readBuf = (byte[]) msg.obj;
            String stringIncome = new String(readBuf, 0, msg.arg1);             // Create string from byte array
            stringBuilder.append(stringIncome);                                             
            int endOfLineIndex = stringBuilder.indexOf("\r\n");                 // Determine the end-of-line
            Log.e(TAG, "Line"+endOfLineIndex);
            if (endOfLineIndex > 0) {                                           // If we are at the end-of-line we parsed all the data that was sent
                rmsgBluetooth = stringBuilder.substring(0, endOfLineIndex);     // The string is extracted in a string object rmsgBluetooth
                stringBuilder.setLength(0); 
```

有人可以帮我实现一个过滤器，以字符串形式输出保留值吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T03:03:19.993

这是我的解决方案：

```
 sensorReading = Float.parseFloat(rmsgBluetooth);
                        if(Math.abs(sensorReadingOld - sensorReading)<10 || sensorReadingOld == 0 ){
                            sensorReadingOld = sensorReading;       

                        }
                        else {
                            sensorReading = sensorReadingOld;
                        } 
```

# java - 使用什么集合/列表

> ID：15556700
> 
> 赞同：-2
> 
> 时间：2013-03-21T19:48:54.617
> 
> 标签：java, collections, types

我有`Treasure`一`TreasureCollectionDB`堂课的对象。该类`TreasureCollectionDB`有一个`Map<Long, Treasure>`（长期是由 生成的id `TreasureCollectionDB`）称为宝藏和第二个数据集合/列表（可用宝藏）。

我需要另一个`Collection`或`List`要做的事情是持有我将通过 JSP 页面添加/删除的宝藏。此列表中的珍宝应该是唯一的，但按字母顺序排序（如果没有数据持有者自己这样做，我将编写一个排序方法）。任何人都知道我应该使用什么数据持有者？互联网上的答案让我很困惑，哪个最合适。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:50:18.410

您可以使用 TreeSet，它应该会给您想要的结果。Set 不允许重复，并且 Tree 保持排序顺序。Treasures 可以实现 Comparable 接口，以便您可以对所需的字段进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:55:31.890

您需要创建 equals 和 hash code 方法，还需要编写一个比较器。您可以将该比较器传递给 TreeSet 并使用 SortedSet 接口。

# c++ - gcc -O0 与 -Og 编译时间

> ID：15556701
> 
> 赞同：10
> 
> 时间：2013-03-21T19:48:57.163
> 
> 标签：c++, debugging, gcc, optimization

gcc 的发行说明在 -Og 上有点含糊：

> 它满足了对快速编译和卓越调试体验的需求，同时提供了合理水平的运行时性能。开发的整体体验应该优于默认优化级别-O0。

“开发的整体经验”是否包括编译时间？如果我不需要调试符号并且正在优化编译时间，我应该使用 -O0 还是 -Og？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:51:46.787

> “开发的整体经验”是否包括编译时间？

我认为确实如此，但不是在这个非常具体的情况下。

> 如果我不需要调试符号并且正在优化编译时间，我应该使用 -O0 还是 -Og？

`-O0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:48:05.313

> 如果我不需要调试符号并且正在优化编译时间，我应该使用 -O0 还是 -Og？

如果调试符号的存在与否无关紧要，请对这两个选项进行计时并查看哪个更快。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-25T02:32:50.117

由于`-Og`编译器必须构造和写出额外的数据（用于调试），因此需要更长的时间。只需编译为汇编器（使用`gcc -S -Og`等）并进行比较。`-O0`但是无论和运行时之间有什么区别，都可能与启动时间及其完整的机器`-Og`相形见绌。`gcc`

如果您想要编译时间，也许您应该考虑[`tcc`](http://www.tinycc.org/)使用 C。也许[LLVM](http://llvm.org/)对于 C++ 更快。

# python - 在 Python 中创建与 str.title() 函数相同的函数

> ID：15556702
> 
> 赞同：0
> 
> 时间：2013-03-21T19:48:57.377
> 
> 标签：python, function, refactoring, title

我的练习是编写一个与函数工作相同的`str.title()`函数。到目前为止，这是我的糟糕解决方案

```
def my_title(s):
  list = []

  for char in s:        
      if char.isalpha():
         char = char.lower()
      list.append(char)

  for n in range(0,len(list)):
      if list[n].isalpha():
          list[n]=list[n].upper()
          break

  return ''.join(list) 
```

你能把它重构为 1 个循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:23:37.370

它可以变得比这更简单吗？

```
def my_title(s):
    l = ''
    for n in range(0,len(s)):
        l += s[n].lower() if n and s[n-1].isalpha() else s[n].upper()
    return l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:04:49.720

```
s = list("1 33333ddedeEEEEE34343")
caps_flag = True
for i,c in enumerate(s):
    if c.isalpha():
        if caps_flag:
            caps_flag = False
            s[i] = c.upper()
        else:
            s[i] = c.lower()

print ''.join(s) 
```

**更好的版本基于 FatalError 的评论**

```
s = list("1 33333ddedeEEEEE34343".lower())
for i,c in enumerate(s):
    if c.isalpha():
        s[i] = c.upper()
        break

print ''.join(s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T21:36:40.077

另一个正则表达式解决方案，只是为了好玩：

```
re.sub(r'\b\w', lambda m: m.group(0).upper(), s.lower()) 
```

这匹配单词开头的任何“单词字符”并将它们中的每一个都大写。

# javascript - 新的 dom 创建了 div，总是在其他之上

> ID：15556703
> 
> 赞同：1
> 
> 时间：2013-03-21T19:48:58.423
> 
> 标签：javascript, css

我正在使用 DOM 创建一些 div:s，每次单击 div 时，z-index 都会增加一。

问题是，当我们说...我已经创建了 10 个 div:s，顶部的那个将有 Z-index:10 所以如果我创建一个新的 div 它会得到 Z-index:1 所以我必须点击它 11次把它放在首位。

任何想法如何在 JavaScript 中设置它？还是我应该在 CSS 中使用它？

干杯

用小提琴更新。 [http://jsfiddle.net/dymond/tQdFZ/20/](http://jsfiddle.net/dymond/tQdFZ/20/)

*虽然有些问题。当 library 设置为 No-Wrap 时，div 无法移动。如果我将其更改为onload。div 移动，但新框图标不起作用。*

CSS代码

```
.box {

    width : 100px;
    height : 100px;
    position : absolute;
 background-color:red;
}

.hand{
       width: 48px;
        min-height: 12px;
       background: yellow;
    z-index:1;
    border:1px solid black;
} 
```

> 用css中的Z：1000解决的问题

# php - PHP MySQL 更新和奇怪的字符？

> ID：15556705
> 
> 赞同：1
> 
> 时间：2013-03-21T19:49:02.243
> 
> 标签：php, mysql, json, curl

我有一个更新 mySQL 中的表的表单。它似乎正在工作，但是当表单输入字段中有空格时，它会插入一个奇怪的字符。“ 一个 ”

我觉得这与我正在使用的字符集有关，但我不确定，因为我以前从未遇到过此类问题。

这是代码。

```
if($_POST){

    $db = new DB_Connection();
    $return = array();
    $sqlmap = array();
    $count = count($_POST['id']);

    for ($i = 0; $i < $count; $i++) {
        foreach($_POST as $column => $value){
            if(empty($value)) $value = "";
            $sqlmap[$column] = $value[$i];
        }
        //echo "<pre>".print_r($sqlmap,true)."</pre>";
        unset($sqlmap['command']);

        $tableid = $sqlmap['id'];
        $exclude = array("id","Date");

        $sql = "UPDATE contact_form SET ";
        $sqlloop = "";
        foreach($sqlmap as $key => $value){
                if(!in_array($key,$exclude)){
                    $sqlloop .= "`".$key."`='".mysql_real_escape_string($value)."',";
                }
        }
        $sqlloop .= " Date = CURDATE() ";
        $sqlloop = str_replace("Â","",$sqlloop);
        $sqlloop = str_replace("Â ","",$sqlloop);
        $sqlloop = str_replace("_"," ",$sqlloop);
        //$sqlloop = substr($sqlloop, 0, -1);
        $sql .= $sqlloop;
        $sql .= " WHERE id = '".$tableid."';";
        //echo $sql;
        $result = $db->query($sql,"website");
        if (!$result) $return['error'] = "ERROR:".$db->getError();
        else {
            $return['success'] = "SUCCESS";
            echo json_encode($return);
        }
    }
} 
```

它似乎只在有“空白”空间时发生。我尝试过剥离和重新包装以及其他一些事情，但似乎没有任何效果。

帮助？

更新：

所以我一直在谷歌上做一些挖掘，我发现当我序列化表单时，这个空白条目被编码为 %c2%A0。我正在使用 Jquery 。连载（）。这是空输入序列化的正常行为吗？

下面是我的 Jquery 代码：

```
 $("form[name='selectedform']").submit(function(e){
           e.preventDefault();
            $.ajax({
            type: "post",
            dataType: 'json',
            url: "/system/curlbridge.php",
            data: $("#selectedform").serialize(),
            success: function(data){
                    alert(data.Sucess);

            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
                alert("Status: " + textStatus); 
                alert("Error: " + errorThrown); 
            } 
            });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:32:32.233

`%C2%A0`是代码点 U+00A0 的 UTF-8 编码，也称为不间断空格。目前尚不清楚这是在哪里生成的。

*   [http://unicodey.com/?hex=%25c2%25A0](http://unicodey.com/?hex=%25c2%25A0)
*   [http://www.fileformat.info/info/unicode/char/A0/index.htm](http://www.fileformat.info/info/unicode/char/A0/index.htm)

您看到的原因`Â`是您的代码将 UTF-8 数据视为 Latin-1，尽管这可能只是显示时间问题。为确保您的浏览器将您输出的数据解释为 UTF-8，请包含相关标头：[http ://www.w3.org/International/O-HTTP-charset](http://www.w3.org/International/O-HTTP-charset)

# opengl - 平移和旋转后调整相机视图

> ID：15556709
> 
> 赞同：2
> 
> 时间：2013-03-21T19:49:16.057
> 
> 标签：opengl, matrix, camera, glm-math

我正在尝试在房间里制作“步行相机”的场景。

目前，我什么都看不到，更不用说旋转和平移了，我也不知道为什么。

请注意，在我使用查看功能之前，我可以看到我应该看到的所有内容，

但是平移和旋转是错误的，因为我总是按照定义的轴移动，

而不是我应该的相机轴。

这是我现在的代码：

透视和看——

```
mat4 Projection = perspective(45.0f, 1.0f, 0.1f, 100.0f);

vec3 pos = vec3(0.0f, 0.0f, 0.0f);
vec3 target = vec3(0.0f, 0.0f, -99.0f);
vec3 up = vec3(0.0f, 1.0f, 0.0f);

wvp *= Projection;
wvp = lookAt(pos, target, up); 
```

按下某些键后的平移和旋转：

```
glfwSwapBuffers();
    if(glfwGetKey( 'W' ))
    {
        wvp = translate(wvp, vec3(0,0,0.01));
    }
    if(glfwGetKey( 'S' ))
    {
        wvp = translate(wvp, vec3(0,0,-0.01));
    }
    if(glfwGetKey( 'A' ))
    {
        wvp = rotate(wvp,-1.0f, vec3(0.0f, 1.0f, 0.0f));
    }
    if(glfwGetKey( 'D' ))
    {
        wvp = rotate(wvp,1.0f, vec3(0.0f, 1.0f, 0.0f));
    } 
```

现在定义的顶点：

```
static const GLfloat vertices[] = {
 //Given square
 0.0f,  0.0f, 2.0f,
 1.0f,  0.0f, 2.0f,
 0.0f,  1.0f, 2.0f,
 1.0f,  1.0f, 2.0f,
} 
```

我连接它们的原因：

```
static const GLubyte indices[] = {
   0,1,3,
   0,2,3,
} 
```

一些缓冲：

```
GLuint vertexbuffer;
glGenBuffers(1, &vertexbuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

GLuint indexbuffer;
glGenBuffers(1, &indexbuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexbuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW); 
```

关于如何根据需要定义相机并使用平移和旋转来配合相机的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:34:56.320

你应该更新 pos 和 target 向量（可选地更新），然后构建 lookAt Matrix

```
vec3 pos, target, forward
update() {
    if (key_up)
        pos += forward
    ...
}

render() {
    camMatrix = lookat(pos, target, up)

    mvp = modelMatrix * camMatrix * projMatrix;
    render_geometry
} 
```

`forward`是表示运动方向的向量。

# ruby-on-rails - Rake 任务未从工作人员内部运行

> ID：15556710
> 
> 赞同：2
> 
> 时间：2013-03-21T19:49:20.027
> 
> 标签：ruby-on-rails, redis, rake, resque

我不明白为什么我的 rake 任务没有在 resque 工作人员中运行。跑步

```
rake :send_this_email 
```

从控制台工作正常，我只想将它作为 cron 作业运行（如下所示），但是在从工作人员内部调用 rake 任务时，有些东西无法正常工作。

我的`rescue_schedule.yml`

```
send_this_email:
  cron: "*/2 * * * *"
  class: SendThisEmailWorker 
  args:
  description: "Send email when condition defined in rake task is met" 
```

我`send_this_email_worker.rb`的 in`workers`目录，如果我可以从控制台自己手动调用 rake 任务，问题一定出在哪里？

```
require 'rake'

module SendThisEmailWorker
  @queue = :send_this_email

  def self.perform
    Rake::Task["send_this_email"].invoke
  end
end 
```

当我启动我的开发服务器时，这个`send_this_email`rake 任务应该每 2 分钟运行一次，对吗？不是，resque 管理面板将其显示为队列中的作业。我在这里想念什么？

感谢您的关注。

从 gerep 评论更新

```
require 'rake'

module SendThisEmailWorker
  @queue = :send_this_email

  def self.perform
    puts "Hi from the console, I'm started"
    Rake::Task["send_this_email"].invoke
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-06T09:30:41.993

只有`require 'rake'`是不够的。例如，如果您执行 Rake::Task.tasks #list down all task

你会得到`[]`

您需要告诉您的工人阶级加载任务。尝试这个

```
require 'rake'
Rake::Task.clear # necessary to avoid tasks being loaded several times in dev mode
YOUR_APP_NAME::Application.load_tasks
module SendThisEmailWorker
  @queue = :send_this_email

  def self.perform
    puts "Hi from the console, I'm started"
    Rake::Task["send_this_email"].invoke
  end
end 
```

`YOUR_APP_NAME`是您的应用程序的名称，可以在以下位置找到`config/application.rb`

# javascript - 如果放置在文件顶部，javascript 代码将不起作用

> ID：15556716
> 
> 赞同：1
> 
> 时间：2013-03-21T19:49:37.323
> 
> 标签：javascript, html

我有以下代码。它在向下滚动到某个点后在窗口中的固定位置设置搜索结果页面中的过滤器栏：

```
var docked;
var filters = document.getElementById('filters');
var init = filters.offsetTop;

function scrollTop() {
  return document.body.scrollTop || document.documentElement.scrollTop;
}

window.onscroll = function () {
  if (!docked && (init - scrollTop() < 0)) {
    filters.style.top = 0;
    filters.style.position = 'fixed'; 
    filters.className = 'docked'; 
    docked = true;
  } else if (docked && scrollTop() <= init) { 
    filters.style.position = 'absolute'; 
    filters.style.top = init + 'px';
    filters.className = filters.className.replace('docked', ''); 
    docked = false;  
  }
} 
```

我的问题是（而且更加好奇） - 如果我将此代码放在我的文件顶部（在 中`<head>`），它根本不起作用。过滤器部分不会像应有的那样随窗口滚动。但是，当我将此代码放在文件底部（结束`</body>`标记的正上方）时，它工作得很好。

为什么是这样？这与代码的工作方式有关吗？或者它可能只是我文件的其余部分中的一个怪癖或错误导致这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T19:52:05.440

把你的作业包进去`window.onload = function(){ /* your code here */ };`，它就会运行。原因是您的分配`var filters = document.getElementById('filters');`返回为未定义，因为在您引用它时页面加载期间该元素不存在。

例子：

```
var docked;
var filters;
var init;
window.onload = function(){
 filters = document.getElementById('filters');
 init = filters.offsetTop;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:52:44.190

如果你这样做，它应该工作：

```
$(document).ready(window.onscroll = function () {
  if (!docked && (init - scrollTop() < 0)) {
    filters.style.top = 0;
    filters.style.position = 'fixed'; 
    filters.className = 'docked'; 
    docked = true;
  } else if (docked && scrollTop() <= init) { 
    filters.style.position = 'absolute'; 
    filters.style.top = init + 'px';
    filters.className = filters.className.replace('docked', ''); 
    docked = false;  
  }
}
); 
```

# python - 格林莱特VS。线程

> ID：15556718
> 
> 赞同：150
> 
> 时间：2013-03-21T19:49:46.353
> 
> 标签：python, concurrency, gevent, coroutine, greenlets

我是 gevents 和 greenlets 的新手。我找到了一些关于如何使用它们的好文档，但没有一个给我关于如何以及何时使用 greenlets 的理由！

*   他们真正擅长的是什么？
*   在代理服务器中使用它们是否是个好主意？
*   为什么不是线程？

我不确定的是，如果它们基本上是协同程序，它们如何为我们提供并发性。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-03-24T07:47:32.777

Greenlets 提供并发性但*不*提供并行性。并发是指代码可以独立于其他代码运行。并行性是同时执行并发代码。当用户空间中有很多工作要做时，并行性特别有用，这通常是 CPU 密集型的东西。并发对于分解问题非常有用，可以更轻松地并行调度和管理不同的部分。

Greenlets 确实在网络编程中大放异彩，其中与一个套接字的交互可以独立于与其他套接字的交互发生。这是并发的经典例子。因为每个 greenlet 在其自己的上下文中运行，您可以继续使用同步 API 而无需线程。这很好，因为线程在虚拟内存和内核开销方面非常昂贵，因此您可以使用线程实现的并发性要少得多。此外，由于 GIL，Python 中的线程比平常更昂贵且更受限制。并发的替代方案通常是 Twisted、libevent、libuv、node.js 等项目，其中所有代码共享相同的执行上下文，并注册事件处理程序。

使用greenlets（具有适当的网络支持，例如通过gevent）来编写代理是一个好主意，因为您对请求的处理能够独立执行并且应该这样编写。

由于我之前给出的原因，Greenlets 提供了并发性。并发不是并行。通过隐藏事件注册并在通常会阻塞当前线程的调用上为您执行调度，像 gevent 这样的项目公开了这种并发性，而无需更改异步 API，并且大大降低了系统成本。

*   [并发不是并行](http://blog.golang.org/2013/01/concurrency-is-not-parallelism.html)
*   [线程与进程](https://stackoverflow.com/a/3705919/149482)
*   [多处理与线程](https://stackoverflow.com/a/3514615/149482)
*   [GIL 与 CPython](https://stackoverflow.com/a/2137581/149482)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-08-20T14:02:01.807

更正上面@TemporalBeing 的答案，greenlets 并不比线程“更快”，产生**60000 个线程**来解决并发问题是一种不正确的编程技术，而是合适的小线程池。这是一个更合理的比较（来自我的[reddit 帖子](https://www.reddit.com/r/programming/comments/98koue/threading_vs_multiprocessing_in_python/e4i0svy/)，以回应引用此 SO 帖子的人）。

```
import gevent
from gevent import socket as gsock
import socket as sock
import threading
from datetime import datetime

def timeit(fn, URLS):
    t1 = datetime.now()
    fn()
    t2 = datetime.now()
    print(
        "%s / %d hostnames, %s seconds" % (
            fn.__name__,
            len(URLS),
            (t2 - t1).total_seconds()
        )
    )

def run_gevent_without_a_timeout():
    ip_numbers = []

    def greenlet(domain_name):
        ip_numbers.append(gsock.gethostbyname(domain_name))

    jobs = [gevent.spawn(greenlet, domain_name) for domain_name in URLS]
    gevent.joinall(jobs)
    assert len(ip_numbers) == len(URLS)

def run_threads_correctly():
    ip_numbers = []

    def process():
        while queue:
            try:
                domain_name = queue.pop()
            except IndexError:
                pass
            else:
                ip_numbers.append(sock.gethostbyname(domain_name))

    threads = [threading.Thread(target=process) for i in range(50)]

    queue = list(URLS)
    for t in threads:
        t.start()
    for t in threads:
        t.join()
    assert len(ip_numbers) == len(URLS)

URLS_base = ['www.google.com', 'www.example.com', 'www.python.org',
             'www.yahoo.com', 'www.ubc.ca', 'www.wikipedia.org']

for NUM in (5, 50, 500, 5000, 10000):
    URLS = []

    for _ in range(NUM):
        for url in URLS_base:
            URLS.append(url)

    print("--------------------")
    timeit(run_gevent_without_a_timeout, URLS)
    timeit(run_threads_correctly, URLS) 
```

以下是一些结果：

```
--------------------
run_gevent_without_a_timeout / 30 hostnames, 0.044888 seconds
run_threads_correctly / 30 hostnames, 0.019389 seconds
--------------------
run_gevent_without_a_timeout / 300 hostnames, 0.186045 seconds
run_threads_correctly / 300 hostnames, 0.153808 seconds
--------------------
run_gevent_without_a_timeout / 3000 hostnames, 1.834089 seconds
run_threads_correctly / 3000 hostnames, 1.569523 seconds
--------------------
run_gevent_without_a_timeout / 30000 hostnames, 19.030259 seconds
run_threads_correctly / 30000 hostnames, 15.163603 seconds
--------------------
run_gevent_without_a_timeout / 60000 hostnames, 35.770358 seconds
run_threads_correctly / 60000 hostnames, 29.864083 seconds 
```

每个人对 Python 的非阻塞 IO 的误解是相信 Python 解释器可以比网络连接本身返回 IO 更快地处理从套接字检索结果的工作。虽然在某些情况下确实如此，但并不像人们想象的那么频繁，因为 Python 解释器真的非常非常慢。在我的[博客文章](http://techspot.zzzeek.org/2015/02/15/asynchronous-python-and-databases/)中，我展示了一些图形配置文件，这些配置文件表明，即使是非常简单的事情，如果您正在处理对数据库或 DNS 服务器等事物的清晰快速的网络访问，这些服务可以比 Python 代码更快地返回可以处理成千上万个这样的连接。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-03-06T21:16:18.327

采用@Max 的答案并为其添加一些相关性以进行缩放，您可以看到差异。我通过更改要填充的 URL 来实现这一点，如下所示：

```
URLS_base = ['www.google.com', 'www.example.com', 'www.python.org', 'www.yahoo.com', 'www.ubc.ca', 'www.wikipedia.org']
URLS = []
for _ in range(10000):
    for url in URLS_base:
        URLS.append(url) 
```

我不得不放弃多进程版本，因为它在我有 500 个之前就下降了；但在 10,000 次迭代时：

```
Using gevent it took: 3.756914
-----------
Using multi-threading it took: 15.797028 
```

所以你可以看到使用 gevent 的 I/O 有一些显着的差异

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-12T23:27:33.863

这很有趣，可以分析。这是一个比较greenlets与多处理池与多线程的性能的代码：

```
import gevent
from gevent import socket as gsock
import socket as sock
from multiprocessing import Pool
from threading import Thread
from datetime import datetime

class IpGetter(Thread):
    def __init__(self, domain):
        Thread.__init__(self)
        self.domain = domain
    def run(self):
        self.ip = sock.gethostbyname(self.domain)

if __name__ == "__main__":
    URLS = ['www.google.com', 'www.example.com', 'www.python.org', 'www.yahoo.com', 'www.ubc.ca', 'www.wikipedia.org']
    t1 = datetime.now()
    jobs = [gevent.spawn(gsock.gethostbyname, url) for url in URLS]
    gevent.joinall(jobs, timeout=2)
    t2 = datetime.now()
    print "Using gevent it took: %s" % (t2-t1).total_seconds()
    print "-----------"
    t1 = datetime.now()
    pool = Pool(len(URLS))
    results = pool.map(sock.gethostbyname, URLS)
    t2 = datetime.now()
    pool.close()
    print "Using multiprocessing it took: %s" % (t2-t1).total_seconds()
    print "-----------"
    t1 = datetime.now()
    threads = []
    for url in URLS:
        t = IpGetter(url)
        t.start()
        threads.append(t)
    for t in threads:
        t.join()
    t2 = datetime.now()
    print "Using multi-threading it took: %s" % (t2-t1).total_seconds() 
```

结果如下：

```
Using gevent it took: 0.083758
-----------
Using multiprocessing it took: 0.023633
-----------
Using multi-threading it took: 0.008327 
```

我认为 greenlet 声称它不受 GIL 的约束，不像多线程库。此外，Greenlet doc 表示它适用于网络操作。对于网络密集型操作，线程切换很好，您可以看到多线程方法非常快。此外，总是更喜欢使用 python 的官方库；我尝试在 Windows 上安装 greenlet，但遇到了 dll 依赖问题，所以我在 linux vm 上运行了这个测试。总是尝试编写代码，希望它可以在任何机器上运行。

# facebook-graph-api - 如何以编程方式获取图形 API 方法

> ID：15556724
> 
> 赞同：0
> 
> 时间：2013-03-21T19:50:01.603
> 
> 标签：facebook-graph-api, reflection, methods

Facebook Graph API 是否像[Flickr API一样提供](http://flickr.com/services/api/flickr.reflection.getMethodInfo.htm)[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)？

例如，Flickr 提供了有关该`flickr.urls.lookupUser`方法的以下反射信息：

```
{ "method": { "name": "flickr.urls.lookupUser", "needslogin": 0, "needssigning": 0, "requiredperms": 0, 
    "description": { "_content": "Returns a user NSID, given the url to a user's photos or profile." }, 
    "response": { "_content": "<user id=\"12037949632@N01\">\r\n    <username>Stewart<\/username> \r\n<\/user>" } }, "arguments": { 
    "argument": [
      { "name": "api_key", "optional": 0, "_content": "Your API application key. <a href=\"\/services\/api\/misc.api_keys.html\">See here<\/a> for more details." },
      { "name": "url", "optional": 0, "_content": "The url to the user's profile or photos page." }
    ] }... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:12:04.883

以编程方式获取文档最接近的方法是`metadata=1`在调用中使用参数。这将返回一个`metadata`对象`connections`，该对象具有该对象（又名 - 附加端点），以及它的描述`fields`

[这是一个例子](https://developers.facebook.com/tools/explorer?path=me?metadata=1&token=%3Ctoken%3E&method=GET)：

```
GET /me?metadata=1 
```

# android - 在启动时启动服务，但不是整个 Android 应用程序

> ID：15556725
> 
> 赞同：6
> 
> 时间：2013-03-21T19:50:04.167
> 
> 标签：android, service, background, startup

我正在使用安卓系统。

我有一个我正在开发的应用程序，它使用一个 Activity 来设置特定的用户输入值，然后服务使用这些值来提供基于这些值的警报。进行研究时，我确定了如何在手机启动时启动应用程序，但是，我真正想要的是启动服务但不将应用程序加载到屏幕上。目前，当我打开设备时，整个应用程序都会加载到屏幕上，然后我必须退出它。

我已经下载了具有设置界面但在后台运行的类似程序。这是怎么做的？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T23:49:23.603

首先，您必须创建一个接收器：

```
public class BootCompletedReceiver extends BroadcastReceiver {

    final static String TAG = "BootCompletedReceiver";

    @Override
    public void onReceive(Context context, Intent arg1) {
        Log.w(TAG, "starting service...");
        context.startService(new Intent(context, YourService.class));
    }
} 
```

然后向您的 AndroidManifest.xml 添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

并注册意图接收器：

```
<receiver android:name=".BootCompletedReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

完成此操作后，您的应用程序（`Application`类）将与服务一起运行，但没有活动。

啊，不要把你的应用程序放在 SD 卡（APP2SD 或类似的东西）上，因为它必须驻留在主存储器中才能在启动完成后立即可用。

# vbscript - 如何从 VBScript 获取 Microsoft Office 路径？

> ID：15556732
> 
> 赞同：2
> 
> 时间：2013-03-21T19:50:18.607
> 
> 标签：vbscript, ms-office

使用 VBScript，我如何确定 Microsoft Office（2003 或 2010）的安装路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:29:33.507

LittleBobbyTables 的参考资料有帮助吗？它指向这个 MS 链接

```
http://office.microsoft.com/en-us/orkXP/HA011364611033.aspx 
```

# html - 条形码扫描仪和输入字段，将新行调用替换为选项卡调用？

> ID：15556739
> 
> 赞同：0
> 
> 时间：2013-03-21T19:50:38.297
> 
> 标签：html, forms, barcode

因此，条形码扫描仪以回车结束每次扫描，这会通过提交表单来搞乱表单。是否可以更改它以改为调用选项卡（从而移动到下一个输入字段）？

我在这里找到了一个解决方案，但它使用他们的 id 手动关注每个输入。我拥有的输入数量是可变的，所以我不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:53:28.543

对的，这是可能的。有2种方式：

1.  重新编程条形码阅读器以在阅读条形码后发送`TAB`密钥而不是回车
2.  使用 javascript 捕获提交事件并检查表单状态。要么阻止提交并将焦点移到下一个字段，要么允许提交事件根据表单状态继续。

# php - 包含文件中的jquery中的php

> ID：15556747
> 
> 赞同：0
> 
> 时间：2013-03-21T19:51:07.983
> 
> 标签：php, jquery, include

这只是一个我似乎找不到答案的问题。我在 main.php 页面的顶部包含了 test.php。test.php 包含 jquery 代码，其中包含 php，并且全部包含在脚本标签中。我可以包含该文件并在该包含的文件上使用 jquery 吗？目前不工作，但我可能做错了什么。问题是我能做包含还是我必须在 main.php 页面上有脚本标签。谢谢希望这是有道理的。

```
 <?php  $query = mysql_query("SELECT * FROM table WHERE id = 1");
           $row = mysql_fetch_assoc($query);
            $result = $row['result'];

?>
<script type="text/javascript">

      var result = '<?php echo $result ?>';
   $(document).ready(function(e) {

 $("#div td:contains(" + result + ")").addClass('greenborder');

 });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:00:51.097

我看到您想在 javascript 代码中回显 $result .. 而且您的做法很好.. 如果您在执行时没有得到任何东西来代替 $result ，那么变量 $result 可能是空的.. 稍后`var_dump($result);`再试`$result = $row['result'];`在您的代码中查看它包含的内容..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:55:39.027

我假设你有这样的东西：

```
<?php
    $some_stuff = 'whatever';
?>
<html>

<head>
   <script>
        $(document).ready(function() {
                 <?php   some_php_code(); ?>
        });
etc... 
```

如果是这样，那么**所有**的 php 代码块都将由服务器执行，并且不会到达客户端。您不能在 JS 代码块中嵌入原始 php 代码并在客户端上执行 PHP。这需要您网站的所有用户在他们的机器上安装完整的 PHP，以及您正在使用的任何额外库，等等......例如......永远不会发生。

记住...PHP 没有其他语言的概念。它不会评估 Javascript 并且只执行匹配 JS 条件的 PHP 块，例如

```
<script>
if (true) {
   <?php code_for_true(); ?>  // PHP will execute this
} else {
   <?php code_for_false(); ?> // this will ALSO by executed by php
} 
```

这两个函数都会被执行，因为 PHP 根本没有 JS 的概念。请记住，没有 PHP 脚本“文件”之类的东西。只有 OTHER 文件中嵌入了 php 代码块。PHP 会忽略所有被`<?php ?>`标签包围的东西。

# javascript - 复选框在浮动上移动：右

> ID：15556751
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:51:12.493
> 
> 标签：javascript, css, html, checkbox

过去几天我一直有这个问题。我正在尝试将我的复选框移动到窗口窗格的右侧。但是，每当我使用 float:right 移动它们时，它们也会向下移动大约 20-30 像素，这意味着它们不再与标签正确对齐。

这是带有我希望全部对齐的标签/图像/复选框的窗格的代码：

```
<div id="leftPane" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'left'">

            <div id="sealDiv" style="padding-top:0px;vertical-align:middle;"><a href="http://google.com"><img src="images/seal.png" alt="countySeal" style="width:150px;height:150px; "/></a></div>

            <h3 style="vertical-align:middle;"><u> Live Layers </u></h3>
            <div id="layerLabels">
            <img src="images/stateParkIcon.png" alt="stateParksIcon" style="height:20px; width:20px"/> <label>State Parks <input id="stateParks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="stateChanged()"></label>
            <br/>
            <img src="images/countyParksIcon.png" alt="countyParksIcon" style="height:20px; width:20px;"/> <label>County Parks <input id="countyParks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="countyChanged()"></label>
            <br/>
            <img src="images/countyOpenSpaceIcon.png" alt="countyOpenSpaceIcon" style="height:20px; width:20px"/> <label>County Open Spaces <input id="countyOpenSpace" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="countyOpenChanged()"></label>
            <br/>
            <img src="images/localParksIcon.png" alt="localParksIcon" style="height:20px; width:20px"/> <label>Local Parks <input id="localParks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="localChanged()"></label>
            <br/>
            <img src="images/golfCourse.png" alt="imgGolf" style="height:20px; width:20px"/> <label>Golf Courses <input id="golfCourses" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="golfCoursesChanged()"></label>
            <br/>
            <img src="images/beach.png" alt="imgBeach" style="height:20px; width:20px"/> <label>Beaches <input id="beaches" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="beachesChanged()"></label>
            <br/>
            <img src="images/iceRink.png" alt="imgIce" style="height:20px; width:20px"/> <label>Ice Rinks <input id="iceRinks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="iceRinksChanged()"></label>
            <br/>
            <img src="images/swimming.png" alt="imgSwim" style="height:20px; width:20px"/> <label>Indoor Pools <input id="indoorPools" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="indoorPoolsChanged()"></label>
            <br/>
            <img src="images/campgrounds.png" alt="imgCamp" style="height:20px; width:20px"/> <label>Campgrounds <input id="campgrounds" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="campgroundsChanged()"></label>
            <br/>
            <img src="images/boatLaunches.png" alt="imgBoat" style="height:20px; width:20px"/> <label>Boat Launches <input id="boatLaunches" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="boatLaunchesChanged()"></label>
            <br/>
            <img src="images/marinas.png" alt="imgMarinas" style="height:20px; width:20px"/> <label>Marinas <input id="marinas" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="marinasChanged()"></label>
            <br/>
            <img src="images/playgrounds.png" alt="imgPlaygronds" style="height:20px; width:20px"/> <label>Playgrounds <input id="playgrounds" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="playgroundsChanged()"></label>
            <br/>
            <img src="images/bikepath.png" alt="imgBike" style="height:20px; width:20px"/> <label>Bike Paths <input id="bikePaths" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="bikePathsChanged()"></label>
            <br/>
            <img src="images/boardwalksIcon.png" alt="boardwalkIcon" style="height:20px; width:20px"/> <label>Boardwalks <input id="boardwalks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="boardwalksChanged()"></label>
            <br/>
            <img src="images/hikingIcon.png" alt="hikingIcon" style="height:20px; width:20px"/> <label>Hiking Trails <input id="hikingTrails" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="hikingTrailsChanged()"></label>
            <br/>
            <img src="images/crosswalksIcon.png" alt="crosswalksIcon" style="height:20px; width:20px"/> <label>Crosswalks <input id="crosswalks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="crosswalksChanged()"></label>
            <br/>
            <img src="images/sidewalksIcon.png" alt="sidewalkIcon" style="height:20px; width:20px;"/> <label>Sidewalks <input id="sidewalks" class="lyrCB" data-dojo-type="dijit.form.CheckBox" onChange="sidewalksChanged()"></label>
            </div>
        </div> 
```

是否有对此的“快速修复”，无论是 CSS 还是 Javasript，或者我是否以需要重做才能正常工作的方式创建了窗格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:54:38.380

这里有一些选项，但本质上它被其他未浮动的元素推下。

1.  也浮动其他元素。

2.  将复选框首先放在 HTML 中（在图像和标签之前）。

3.  请改用绝对定位。

# javascript - Javascript函数使用下拉列表运行

> ID：15556762
> 
> 赞同：1
> 
> 时间：2013-03-21T19:51:56.617
> 
> 标签：javascript, html, drop-down-menu, menu, argument-passing

我有一个下拉列表，我想在选择某些内容时将参数（颜色）传递给函数。过去我使用过一点 Javascript，但不完全确定如何做到这一点。我在外部文件中运行了 javascript。最终我希望下拉菜单更改为菜单中选择的颜色。在此先感谢您的帮助。

HTML 代码

```
 <div id="Color_drop_menu">

 <form>
 <select id=Color1 onchange="Color1Change()">
    <option> </option>
    <option> "Black" </option>
    <option> "Brown" </option>
    <option> "Red" </option>
    <option> "Orange" </option>
    <option> "Yellow" </option>
    <option> "Green" </option>
    <option> "Blue" </option>
    <option> "Violet"</option>
    <option> "Grey" </option>
    <option> "White" </option>
    <option> "Gold" </option>
    <option> "Silver" </option>
</select>
</form>

</div> 
```

Javascript代码

```
function Color1Change(){
      console.log("Hello World"); //this prints Hello World
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:57:36.643

试试这个：

```
function Color1Change(x) {
    var color = x.options[x.selectedIndex].innerHTML.replace(/\"/g, '');
    document.getElementById('Color_drop_menu').style.backgroundColor = color;
} 
```

并将您的选择元素更改为：`<select id=Color1 onchange="Color1Change(this)">`

**[jsFiddle 示例](http://jsfiddle.net/j08691/UmexV/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:56:19.813

试试这个：

**HTML：**

```
<select id=Color1 onchange="Color1Change(this)"> 
```

**Javascript：**

```
<script>
   function Color1Change(option){
      console.log(option.value); //this prints the text of your options if no value attribute is set.
}
</script> 
```

# xml - Google Apps 脚本：如何编辑 Xml 以发送到配置文件 API 更新

> ID：15556770
> 
> 赞同：0
> 
> 时间：2013-03-21T19:52:11.257
> 
> 标签：xml, google-apps-script, google-profiles-api

我正在尝试使用 google 脚本更新域用户，我通过 Google Profile API 成功检索了用户，但是我需要调用更新操作，并且需要发送带有我修改的 Xml。

我正在使用 Xml Services，但它们似乎只是为了阅读 xml。

如何更新我的 Xml 对象以将其发送到 Profile API 的更新操作？

这是代码：

```
/**
 * Script configuration
 */
var SCOPE = 'http://www.google.com/m8/feeds/';
var APPNAME = "profile";
var GET_URL = 'https://www.google.com/m8/feeds/profiles/domain/{domainName}/full/{userName}?v=3.0';

function updateContact(e) {
  var domain = UserManager.getDomain();
  GET_URL = GET_URL.replace("{domainName}", domain);
  var user = UserManager.getUser(Session.getActiveUser());
  var userName = user.getUserLoginId();

  var user = getUser(userName);

  if(user !== null)
  {
    //Update
    updateUser(user, '344343','432432423','test','test');
  }
}

function getUser(userName)
{
  try
  {
    var response = UrlFetchApp.fetch(GET_URL.replace("{userName}",userName) , googleOAuth_('GET'));
    var jsonObj = Xml.parse(response.getContentText())
    var text = response.getContentText();
    var entry = jsonObj.entry;

    if(typeof(entry) !== 'undefined' && entry !== null)
    {
      return entry;
    }
  }
  catch(ex)
  {
  }
  return null;
}

function updateUser(userEntry, phone, mobile, position, city)
{
  var editLink = '';
  var linksLength = userEntry.link.length;
  for(var i=0; i<linksLength; i++)
  {
    if(userEntry.link[i].rel === "edit") editLink = userEntry.link[i].href;
  }

  //This is where I don't know what to do, how to edit the user entry

  var response = UrlFetchApp.fetch(editLink,googleOAuth_('PUT', xml.toString()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T05:55:56.890

抱歉@Escobar5，我没有收到你的更新。Romain Vialard 有一个开源 ProfilesApp 库（以及我的一些内容）[https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/profiles-services](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/profiles-services)

# html - 将鼠标悬停在文本上时如何更改文本？

> ID：15556774
> 
> 赞同：-1
> 
> 时间：2013-03-21T19:52:25.203
> 
> 标签：html, css

我正在尝试制作一个当您将鼠标悬停在其上时显示文本的框。这是我目前的代码：

```
<style>
/* WHILE HOVERED */  
.one:hover {  
    box-shadow: 0 15px 30px black; 
    background: #00576f;  
    background: -moz-linear-gradient(top, #0c5f85, #0b5273 50%, #024869 51%, #003853);  
    background: -webkit-gradient(linear, left top, left bottombottom, color-stop(0, #0c5f85), color-stop(.5, #0b5273), color-stop(.51, #024869), to(#003853));  
    }  

/* WHILE BEING CLICKED */  
.one:active {  }  

.other {  
 width: 200px;  
 height: 200px;  
 line-height: 100px;  
 color: white;  
 text-decoration: none;  
 font-size: 50px;  
 font-family: helvetica, arial;  
 font-weight: bold;  
 display: block;  
 text-align: center;  
 position: relative;  
margin-top: 10px auto;

/* BACKGROUND GRADIENTS */  
 background: #00485c;  

</style>
<body>
<center><div class="other one"/div></center>
</body> 
```

我知道到目前为止可能有一种更简单的方法来做我所做的事情，但我只需要知道当你将鼠标悬停在正方形上时如何让文本出现在它上面。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:56:39.160

好吧，您可以在纯 CSS 中执行此操作，但如果您无法更改 HTML 标记，JavaScript 可能是更好的选择。好歹：

```
.one:hover:after {
    content: "My text here!"
} 
```

# javascript - jQuery 选择器性能低下

> ID：15556776
> 
> 赞同：5
> 
> 时间：2013-03-21T19:52:27.247
> 
> 标签：javascript, jquery, optimization, jquery-selectors

我正在以 MVC 格式（php Codeigniter）呈现超过 600 个表单。这些表单中的每一个都有一个标有“更多选项”的按钮。当您单击此按钮时 - 位于同一父元素中的隐藏 div 被切换，显示更多输入字段和数据。问题是控制台中的兄弟切换很快，但是当我单击实际按钮时，触发需要很长时间。

使用 id 是推荐的解决方法，但是当我有这么多 div 元素要通过时，它有点不切实际。

这是我的js文件

```
jQuery(document.ready(function(){
    jQuery("form >button[name='more_data'].meta_button").click( function(){  
        jQuery(this).siblings("div.meta").toggle("fast");
    });
}); 
```

这是结构（这些 div 有 650 个，以后还会有更多）

```
<div>
    <li id="bCIya8DZyr4idseJe5cbLA" class="even">
        <form action="url" method="post" accept-charset="utf-8">
            <div class="space_name"></div>
            <button name="more_data" type="button" class="meta_button">More Options</button>
            <input type="submit" name="Submit" value="Submit">
            <div class="meta" style="overflow: hidden; display: block;">
                <div class="meta_block">Set Estimates:
                    <div class="input_estimate">1:
                        <input type="number" name="estimate_1" value="" id="estimate_1" class="estimate">
                    </div>
                    <div class="input_estimate">2:
                        <input type="number" name="estimate_2" value="" id="estimate_2" class="estimate">
                    </div>
                    <div class="input_estimate">3:
                        <input type="number" name="estimate_3" value="" id="estimate_3" class="estimate">
                    </div>
                </div>
            </div>
        </form>
    </li>
</div> 
```

注意：我正在运行 jQuery 1.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:02:48.400

## 不要使用委托

当您有多个事件侦听器时，使用像@jrummell 建议的委托（`.on()`带有选择器）会更快，因为您将侦听器的数量减少到一个。

## 使用类的更简单的选择器

所以在这种情况下，虽然我建议使用更简单的选择器：

```
$(function(){
    $('.meta_button').on('click', function(){
        $(this).siblings('div.meta').toggle('fast');
    });
}); 
```

这样一来，当点击被触发时，您的选择器就会变得非常简单，并且检查更少，因为没有委托。此外，不会捕获对表单中其他元素的点击。

## 动画减慢速度

动画可以减慢速度。在多个元素上同时执行的动画甚至更多。

尝试移动`div.meta`单个父元素中的所有元素并仅在该单个元素上应用动画。

您也可以通过使用完全删除动画`toggle()`（在这种情况下，关于多个项目的注释仍然有效）。

**示例**：

```
$(function(){
    $('.meta_button').on('click', function(){
        $(this).parent().find('.meta_holder').toggle();
        // OR
        // $(this).next('.meta_holder').toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:12:12.100

包括 jQuery.ui.css 使重新显示变得异常缓慢。昂贵的 CSS 规则会扼杀显示并减慢渲染时间。“朝着正确的方向轻推”在问题的评论中。

# javascript - 获取元素的打印页码

> ID：15556777
> 
> 赞同：2
> 
> 时间：2013-03-21T19:52:28.010
> 
> 标签：javascript, html, css, printing, tableofcontents

我正在从事一个涉及将 PDF 手册转换为 html 的项目。我试图在打印时保留 PDF 的价值，同时在不受页面概念约束的设备上为它们提供更好的用户界面。我遇到的问题是这些手册有一个目录，其中包含每章/部分开始的页码。在设备上查看时，该列表将只是页内锚链接，但在打印时，我想获取元素的页码（例如第 3 章的标题所在的页面）并将其添加到表中的内容，尤其是在应用打印样式后，如`page-break-after:avoid;`.

例如，我想知道在打印时如何将页码准确添加到以下维基百科文章的目录中。 [http://en.wikipedia.org/wiki/Character_mask](http://en.wikipedia.org/wiki/Character_mask)

**编辑：** 我的想法是在打印时使用打印样式表添加页码：

```
@page {
    @bottom {
        content: "Page " counter(page) " of " counter(pages)
    }
} 
```

然后使用 javascript 使用 matchMedia/onbeforeprint ( [http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/](http://tjvantoll.com/2012/06/15/detecting-print-requests-with-javascript/) ) 检测打印，然后从内容中获取页码，但我'不确定如何找到动态添加的内容。那可能吗？还有其他解决方案吗？

# javascript - 向下滑动后jQuery菜单缺少顶部

> ID：15556781
> 
> 赞同：0
> 
> 时间：2013-03-21T19:52:47.363
> 
> 标签：javascript, jquery, css

我这里有这个[fiddle](http://jsfiddle.net/mCPvp/2/)，它非常接近我想要的，但有几个问题。首先，一旦菜单达到全高，内部菜单的顶部就会消失。其次，如果您在菜单转换时将鼠标移入和移出，它就会...停止。（我想要的是当你回到它时，它只是在你的鼠标在那里的时间内向后扩展，一旦你的鼠标退出，它就会恢复折叠）。

如果我摆脱 .stop()，那么它会做一个跳舞的事情，而不是我提到的我想要的。

编辑：缺少的顶部部分已通过向柱体添加一些填充来修复（任何东西，即使它不影响视图，也可以修复它。奇怪）。但是，当我重新输入时，菜单仍然会停止，因为它正在折叠。

进一步编辑：修复了通过切换到 slideToggle 而不是 slideUp 和 slideDown 来停止的菜单。

这是html：

```
<div id="mission-statement-container">
<div class="pillars">
    <div class="pillars-body">
        <div><span class="pillar-indicator"></span><span class="pillar-text">First Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Second Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Third Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Fourth Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Fith Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Sixth Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Seventh Pillar</span>
        </div>
        <div><span class="pillar-indicator"></span><span class="pillar-text">Eighth Pillar</span>
        </div>
    </div>
    <div class="pillars-demo">PILLARS</div>
</div> 
```

和javascript：

```
$(".pillars-body").hide();
$(".pillars").hover(function () {
    $(".pillars-body").stop().slideDown();
}, function () {
    $(".pillars-body").stop().slideUp();
}); 
```

和 CSS 衡量标准：

```
.pillar-indicator {
    display: inline-block;
    height: 15px;
    width: 15px;
    margin-left: 20px;
    margin-right: 15px;
    background: yellow;
    }
.pillars-body {
    background: black;
    color: white;
}
.pillars-body div {
    margin-top: 10px;
}
.pillars {
    position: absolute;
    top: 0;
    left: 0;
}
.pillars-demo {
    float: left;
} 
```

进一步说明：我刚刚注意到，如果您在菜单展开时将鼠标移出菜单，然后在它折叠后返回并使其再次展开，那么一旦它完全展开，它就不会隐藏顶部，如果这意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:55:15.430

如果你在 .pillars-body 中添加一些 padding-top，你应该会得到你想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:16:21.730

您可以尝试将以下参数添加到 stop 方法以修复动画：

```
.stop('true',true, true) 
```

[http://jsfiddle.net/mCPvp/](http://jsfiddle.net/mCPvp/)

**更新**：似乎 gatebasher_311 比我快 45 秒 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T19:56:15.123

它丢失了，因为如果这个类：

```
pillars-body div {
    margin-top: 10px;
} 
```

# http - Safari 发送两个 HTTP 请求。同一时间/套接字

> ID：15556783
> 
> 赞同：1
> 
> 时间：2013-03-21T19:52:50.037
> 
> 标签：http, tcp, safari, wireshark, http-1.1

我有一个 iPad Safari 在 30 毫秒内发送两个 HTTP 请求（两个不同的 PNG）文件。

我认为即使在 Keep Alive HTTP 1.1 连接上，也应该有明确的请求/响应序列。

我看到的是 Safari 浏览器在 30 毫秒内发送了两个 GET 请求，而无需等待答案。这会导致某些 Web 服务器出现问题。

情况：我有一个 HTML5 加载 SVG 并进一步引用其他图像（如 PNG 和 GIF）。该问题不会出现在 iPhone 5 上，而是出现在 iPad 上。

请参阅此 wireshark 转储： [http](http://tinyurl.com/c7m37b9) ://tinyurl.com/c7m37b9（第 116/117 帧）

iPad (1) 信息：版本 5.1.1 (9B206) 型号 MB2292FD Safari 5.1

```
[GET /Licht_3.gif HTTP/1.1
...
User-Agent: Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML,      like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
Accept: */*
...
Accept-Language: de-de
Accept-Encoding: gzip, deflate
Connection: keep-alive]

[GET /Licht_3.gif HTTP/1.1
Host: 192.9.225.251:8081
...
Accept-Language: de-de
Accept-Encoding: gzip, deflate
Connection: keep-alive]

[HTTP/1.1 200 OK
...
Content-Type: image/png
Content-Length: 3921] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:03:05.900

它看起来像[HTTP 流水线](http://en.wikipedia.org/wiki/HTTP_pipelining)：

> HTTP 流水线是一种在单个 TCP 连接上发送多个 HTTP 请求而不等待相应响应的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-26T21:09:38.553

我认为这可能是由于浏览器遵守了 HTTP 1.1 Spec 8.2.4。如果客户端通过中间层连接到服务器并且在连接关闭之前没有得到服务器的响应，这确实允许客户端重试请求。

我已经看到此错误，并发现以下链接很有帮助。

[https://www.ravellosystems.com/blog/beware-http-requests-automatic-retries/](https://www.ravellosystems.com/blog/beware-http-requests-automatic-retries/)

[http://geek.starbean.net/?p=393](http://geek.starbean.net/?p=393)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T18:06:46.293

我也从移动 Safari 客户端看到了这一点。我能找到的唯一解决方法是在 Nginx 中为整个服务器禁用 keepalive。当 keepalive 被禁用时，我们不会收到重复的请求和/或流水线可能无法从 Safari 客户端工作。

在 Nginx 中，有一个 keepalive_disable 选项，但它仅适用于某些浏览器上的 POST 请求，并且没有太多选项。我们最终使用 keepalive_timeout 0 禁用了该服务器上的 keepalive；我希望将来有更好的解决方案。

我认为正确使用流水线会提交多个不同的请求，而不是重复的请求。

# javascript - Highcharts 线性图表，y 轴显示秒和分钟

> ID：15556785
> 
> 赞同：0
> 
> 时间：2013-03-21T19:53:04.647
> 
> 标签：javascript, highcharts

我有一个图表，其中 x 轴上有一个日期时间，y 轴上有一个以秒为单位的值，例如 10、200 或 4500。这很好用。

我需要的是类似于日期时间的行为，当你有一个日期范围时，它会显示该范围之间的天数，但如果范围真的很小，它会显示该范围之间的小时数。我的要求是我想做同样的事情，但有一个以秒为单位的数字，如果范围很大，比如可能在 100 到 2500 之间，它应该转换为分钟，我现在拥有的是以下内容：

```
yAxis: {
        title: {
            text: 'Minutes',
            margin: 10
        },
        min: 0,
        tickInterval: 60,
        labels:{
           formatter: function(){
                var minutes = ""
                if (this.value > 59){
                    minutes = Highcharts.numberFormat((this.value/60), 0)
                }
                return minutes;
            }
       }
    } 
```

这对于 60 到 500 之间的范围非常有用，但是当范围较长时，它会画很多线来显示分钟。

有任何想法吗？我可以根据某个值更改 tickInterval 吗？

我已经看到这个回复[Plotting seconds, minutes and hours on the yAxis with Highcharts](https://stackoverflow.com/questions/8268170/plotting-seconds-minutes-and-hours-on-the-yaxis-with-highcharts)，但我不想在该轴上处理 datetime 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:05:23.173

如果可以的话，我真的建议使用内置的日期时间轴类型。它消除了很多麻烦，例如您所询问的问题。

如果做不到这一点，那么您在查看 tickInterval 时就走在了正确的轨道上。您可以尝试根本不指定 tickInterval，让 highcharts 为您决定。它通常会发现一些明智的东西。

如果这对您不起作用，那么您将不得不查看您的数据范围并自己选择一个合理的 tickInterval。您可以使用的一种算法是：

```
if (range < 500)
    tickInterval = 60
else
    tickInterval = 120 
```

显然，如果您的范围可以更大，您可能需要另一种情况，将 tickInterval 切换到 300 或更高。

# emacs - 如何让第二个符号引用一个函数

> ID：15556788
> 
> 赞同：0
> 
> 时间：2013-03-21T19:53:18.770
> 
> 标签：emacs, clojure, elisp

在 Clojure 中，我可以让第二个符号引用一个函数。

```
(defn sq [x] (* x x))
(sq 7) 
```

-> 49

```
(def square sq)
(square 7) 
```

-> 49

在 Emacs-Lisp 中，我只知道

```
(defun square (x) (sq x)) 
```

有没有在精神上更接近第一个的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:05:12.977

```
(defun sq (x) (* x x))
(defalias 'square 'sq) 
```

# c# - 为自定义表单控件绑定 EventHandler

> ID：15556794
> 
> 赞同：0
> 
> 时间：2013-03-21T19:53:39.990
> 
> 标签：c#, asp.net, forms, reflection

我正在尝试将事件绑定到在自定义 Form 类中创建的表单元素。我对如何绑定存在于类 FormLoader（一个 UserControl 文件）上的方法一无所知。前任：

```
 public class FormBuilder 
{
public Control Create(){
//create form controls here... for each control call AddEvent.
}
void AddEvent(object o, string eventname, string methodname)
    {
        EventInfo ei = o.GetType().GetEvent(eventname);
        MethodInfo mi = typeof (FormLoader).GetMethod(methodname, BindingFlags.Public | BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Default);
        Delegate del = Delegate.CreateDelegate(ei.EventHandlerType, typeof (FormLoader), mi);
        ei.AddEventHandler(o, del);
    }} 
```

这就是我实例化表单的方式。

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        Form = new Form();
        Controls.Add(Form.Create());

    }

    public void ProcessEventAction(object sender, EventArgs e)
    {
        System.Diagnostics.Debug.WriteLine(@"Control Internal Hit");
    } 
```

我收到“错误绑定到目标方法”。知道如何为范围外存在的事件绑定方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:10:25.917

没有作为参数[`Delegate.CreateDelegate`](http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx)的重载。`Type, Type, MethodInfo`结果，您调用了[`Delegate.CreateDelegate(Type, Object, MethodInfo)`重载](http://msdn.microsoft.com/en-us/library/74x8f551.aspx)`typeof(FormLoader)`，作为第一个参数传递。

由于`MethodInfo`您传入的 没有在`Type`类上定义，因此它不能绑定到`Type`实例。

您需要将`FormLoader`类的实例作为方法的第二个参数传递`CreateDelegate`。假设您不想为每个事件使用新实例，则需要将实例传递给`AddEvent`方法。

# iphone - 拍照时崩溃/内存警告 - iPhone

> ID：15556795
> 
> 赞同：0
> 
> 时间：2013-03-21T19:53:42.500
> 
> 标签：iphone, memory, crash, camera

我收到内存警告，并且在使用 iPhone 拍照期间应用程序崩溃。不知道如何解决这个问题，因为打开相机的代码有效 - 并且拍摄照片后的代码有效，但错误出现在相机拍摄应用程序的图片部分......

我正在像这样启动相机：

```
imagePicker = [[UIImagePickerController alloc] init];

if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) 
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
}
else 
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
}

if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceRear]) {
            imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
} else if ([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront]) {
            imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;
}

imagePicker.delegate = self;

[self presentModalViewController:imagePicker animated:YES]; 
```

我收到“收到内存警告”。就在 Recorder_SourceStarted 和 AVCaptureDeviceDidStartRunningNotification 之前。

然后，在应用程序崩溃之前，我会得到 Recorder_DidStartPreviewing、Recorder_FlashStateChanged、Recorder_DidStartFocusOperation、Recorder_DidCompleteFocusOperation、Recorder_FlashStateChanged、Recorder_WillCapturePhoto、Recorder_DidCapturePhoto 和 Recorder_PhotoStillImageSampleBufferReady。

Recorder_PhotoStillImageSampleBufferReady 是我在应用程序崩溃之前收到的最后一条通知。它没有到达 _UIImagePickerControllerUserDidCaptureItem，此时应用程序开始运行我再次编写的代码。

有时它不会崩溃......我收到内存警告并且应用程序继续正常工作，但是由于这个内存警告可能会发生崩溃并且我在测试中遇到崩溃所以我想找出导致此问题的原因并修复它。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:20:31.700

我在应用程序中分配 tableViews（不是因为它使用 ARC 而解除分配），显然在调用 alloc tableViews 之后，尝试捕获图片会导致内存崩溃。当用户需要查看表格而不是每次请求表格视图时都进行分配时，我将其更改为打开和关闭表格视图上的 .hidden 属性，现在应用程序在拍照时永远不会崩溃。有时还有内存警告，但从来没有崩溃过，而且我拍照时经常根本没有内存警告。

# dependency-injection - 如何实现一个缓存并返回命名实例的新 guice 范围？

> ID：15556802
> 
> 赞同：1
> 
> 时间：2013-03-21T19:54:08.657
> 
> 标签：dependency-injection, guice, playframework-2.1

我希望能够通过更改我的 HTTP 请求的自定义标头来连接到各种后端。因此，我希望我的请求由特定于所选后端的控制器实例提供服务。为请求提供服务的控制器是使用 Guice 创建的，并且具有许多依赖项。我想缓存这些控制器实例。因此，对于每个 (SomeController.class, backend) 对，都会有一个缓存实例。

如何实现这样的 Guice 范围？我正在使用 Play Framework 2.1。

# c - ASN.1 CHOICE 解码错误与 libtasn1

> ID：15556803
> 
> 赞同：1
> 
> 时间：2013-03-21T19:54:09.267
> 
> 标签：c, choice, asn.1

我在编码/解码包含`CHOICE`-within-a-`CHOICE`结构的结构类型时遇到问题。最简单的例子如下。

ASN1 文件：

```
TEST {}
DEFINITIONS IMPLICIT TAGS ::=
BEGIN

Test_ch1 ::= CHOICE {
 t1 INTEGER
}

Test_ch2 ::= CHOICE {
 t2 Test_ch1
}

END 
```

源代码：

```
#include <stdio.h>
#include <libtasn1.h>

int main()
{
 int result = 0;
 asn1_node definitions = NULL, node = NULL;
 char errorDescription[ASN1_MAX_ERROR_DESCRIPTION_SIZE];
 const char * treefile = ASN1_FILE;

 char data[1024];
 int data_size = sizeof(data);

 asn1_parser2tree (treefile, &definitions, errorDescription);
 asn1_create_element (definitions, "TEST.Test_ch2", &node );
 asn1_write_value (node, "", "t2", 1);
 asn1_write_value (node, "t2", "t1", 1);
 asn1_write_value (node, "t2.t1", "1234", 0);
 asn1_der_coding (node, "", data, &data_size, errorDescription);

 asn1_create_element (definitions, "TEST.Test_ch2", &node );
 result = asn1_der_decoding (&node, data, data_size, errorDescription);
 if(result != ASN1_SUCCESS) { asn1_perror (result); printf("Decoding error = \"%s\"", errorDescription); return -1; }

 return 0;
} 
```

编码很好，编码数据是：`02 02 04 d2`for `t1 = 1234`. 但解码失败。

asn1_der_decoding(...) 的结果是`ASN1_DER_ERROR`，errorDescription 为空。

当像 Test_ch2 这样的构造位于其他结构（SET、SEQUENCE 或其他结构）内时，确实会出现完全相同的错误，例如`GeneralName`来自[RFC 5280](http://www.ietf.org/rfc/rfc5280.txt)（在`Name`选择的情况下）。

为什么它拒绝自己的编码数据？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:53:11.223

考虑使用 lionet.info/asn1c

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T17:54:28.293

好消息，大家！这个问题最终被证明是一个错误，因为他们刚刚在他们的[git 存储库](http://git.savannah.gnu.org/cgit/libtasn1.git/commit/?id=05b093a2ef966fd02a2e93248194778b1caa2d55)中修复了这个问题。并注意：不到一年。:)

感谢 Nikos Mavrogiannopoulos。

# database - 执行存储过程时数据库表被锁定

> ID：15556805
> 
> 赞同：0
> 
> 时间：2013-03-21T19:54:16.287
> 
> 标签：database, db2, database-administration

当调用以下存储过程时，我得到 table in use 异常。

下面是存储过程的代码，

```
CREATE PROCEDURE SP_BATCHFILE_REPORT_GET001 (
    IN countryCode CHAR(2),
    IN reportFileID BIGINT
    )
RESULT SETS 1
LANGUAGE SQL
SET OPTION COMMIT=*CS
P1: BEGIN
DECLARE cc CHAR(2);
DECLARE fid BIGINT;

-- Declare cursor
DECLARE cursor1 CURSOR FOR
    SELECT * FROM CPS_FILE
        WHERE COUNTRYCODE = cc
            AND ReportFileID = fid
        AND ReportGenerated = 'P'
        AND Accepted <> '';

SET cc = countryCode;
SET fid = reportFileID;

UPDATE cps_file SET ReportGenerated = 'P'
        WHERE COUNTRYCODE = cc
            AND ReportFileID = fid
        AND ReportGenerated <> 'Y'
        AND Accepted <> '';

-- Cursor left open for client application
OPEN cursor1;
END P1 @ 
```

我使用 DB2 作为数据库，同时没有其他进程在运行，它可以访问存储过程中使用的表。

我收到以下错误，Row or object CPS_FILE in CPSDATA type *FILE in use。

请指教。

# uiview - 子类化 UIView，一种设置 initWithFrame: 或 awakeFromNib 的方法

> ID：15556806
> 
> 赞同：1
> 
> 时间：2013-03-21T19:54:16.450
> 
> 标签：uiview, initialization, subclassing

当子类化 UIView 时，我倾向于创建一个名为“setup”的私有方法，我将其放入`initWithFrame`和`awakeFromNib`.

这也是其他人倾向于做的事情吗？或者有没有一种我不知道的方法可以做我想做的事情。

我已经通过`UIView`类参考，但我什么都看不到，所以只是想知道其他人在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T19:44:06.817

我实际上避免使用`-awakeFromNib`和使用`-initWithCoder:`。这是我典型的 UIView 子类设置：

```
- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        [self _init];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [self _init];
    }
    return self;
}

- (id)init {
    if (self = [super init]) {
        [self _init];
    }
    return self;
}

- (void)_init {

} 
```

我实际上也有一个片段来执行此操作。我只是输入

```
init_view 
```

它会生成上述所有内容。

# java - Java 8 Lambdas：将 Stream 映射为 Integer 类型，然后调用 sum() 将无法编译

> ID：15556809
> 
> 赞同：17
> 
> 时间：2013-03-21T19:54:24.867
> 
> 标签：java, collections, lambda, java-8

我在玩 Java8 lambda 表达式。作为一个例子，然后我尝试总结列表中包含的年龄人员：

```
import java.util.Arrays;
import java.util.List;

public class Person {
    public static void main(String[] args) {
        List<Person> persons = Arrays.asList(new Person("FooBar", 12), new Person("BarFoo", 16));
        Integer sumOfAges = persons.stream().map(Person::getAge).sum();
        System.out.println("summedUpAges: " + sumOfAges);
    }

    private final String name;
    private final Integer age;

    public Person(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public Integer getAge() {
        return age;
    }
} 
```

当我尝试使用以下 java 编译器编译此代码段时：

```
openjdk version "1.8.0-ea"
OpenJDK Runtime Environment (build 1.8.0-ea-lambda-night
OpenJDK 64-Bit Server VM (build 25.0-b21, mixed mode) 
```

我收到以下编译错误：

```
java: cannot find symbol
  symbol:   method sum()
  location: interface java.util.stream.Stream<java.lang.Integer> 
```

但是如果我将 getAge() 方法的返回值从 Integer 更改为 int，我会得到预期的结果。但有时不可能或不希望即时更改签名。当 getAge() 返回 Integer 类型时，有什么方法可以使它工作吗？

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-21T20:14:24.470

我认为他们正在改变方法

```
IntStream map(ToIntFunction<? super T> mapper) 
```

至

```
IntStream mapToInt(ToIntFunction<? super T> mapper) 
```

那么你的

```
persons.stream().mapToInt(Person::getAge).sum() 
```

将始终有效，无论是`getAge()`退货`int`还是`Integer`.

看到这个线程： http: [//mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001480.html](http://mail.openjdk.java.net/pipermail/lambda-libs-spec-experts/2013-March/001480.html)

顺便说一句，您可以将您的问题发布到 lambda-dev 邮件列表，他们想听听真实世界的经验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T11:16:41.030

它们没有改变方法，它们都可用，因为**map** () 是返回 Stream 的通用方法，并且它们将 int、long、double Stream 分离为单独的方法，例如**mapToInt** ()、**mapToLong** () 和**mapToDouble** ()。

是的，您可以使用 reduce() 方法

**reduce(T 标识，BinaryOperator<T> 累加器)**

使用关联累积函数对此流的元素执行归约，并返回描述归约值（如果有）的 Optional。

**reduce() 是如何工作**的：假设我们有 int 数组流并且我们应用了 reduce 函数

> 减少（0，（l，r）-> l + r）

在 1、2、3、4 和 5 等整数列表中，种子 0 与 1 相加，结果 (1) 存储为累加值，然后作为左侧值作为流中的下一个数字 (1+2)。结果 (3) 存储为累加值并用于下一次加法 (3+3)。结果 (6) 被存储并用于下一次加法 (6+4)，结果用于最后的加法 (10+5)，得到最终结果 15。

所以你的例子看起来像：

```
import java.util.Arrays;
import java.util.List;
import java.util.stream.Stream;

public class Person {

    public static void main(String[] args) {
        List<Person> persons = Arrays.asList(new Person("FooBar", 12), new Person("BarFoo", 16));
        Stream<Integer> stream = persons.stream().map(x -> x.getAge());
        int sum = stream.reduce(0, (l, r) -> l + r);
        System.out.println(sum);

    }

    private final String name;
    private final Integer age;

    public Person(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public Integer getAge() {
        return age;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T02:19:34.497

要添加 bayou.io 答案，我更喜欢 lambda 表达式而不是方法引用。

```
persons.stream().mapToInt(x->x.getAge()).sum(); 
```

# python - 为什么 cmp() 有用？

> ID：15556813
> 
> 赞同：23
> 
> 时间：2013-03-21T19:54:34.860
> 
> 标签：python

根据[文档](http://docs.python.org/2/library/functions.html#cmp)和本[教程](http://www.tutorialspoint.com/python/number_cmp.htm)，

`cmp() returns -1 if x < y`

和

`cmp() returns 0 if x == y`

和

`cmp() returns 1 if x > y`

教程还说

> cmp() 返回两个数之差的符号

我真的不明白 *两个数字的差异是*什么意思。这是否意味着当数字的符号不相等时它会返回一个值？自从...

```
cmp(80, 100) :  -1      # both have positive sign.
cmp(180, 100) :  1      # both also have positive sign.
cmp(-80, 100) :  -1
cmp(80, -100) :  1 
```

**注意：教程中的代码。*

尽管我对符号差异感到困惑，但我真的想不出为什么我们需要一个内置函数来在 x < y 时返回 -1 的值。

功能不是**`cmp( )`**很容易实现吗？Python的创建者有什么理由保留`cmp( )`函数，或者这个Python的**`cmp( )`**函数有什么隐藏的用法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-10-22T19:09:43.840

> # 为什么 cmp( ) 有用？

它不是很有用，这就是它被弃用的原因（内置`cmp`函数消失了，内置排序不再接受 Python 3 中的一个）。[丰富的比较方法](https://docs.python.org/3/reference/datamodel.html#object.__lt__)取代了它：

```
object.__lt__(self, other)
object.__le__(self, other)
object.__eq__(self, other)
object.__ne__(self, other)
object.__gt__(self, other)
object.__ge__(self, other) 
```

这允许`<`符号（和其他符号）被重载比较运算符，例如，启用集合对象的子集和超集比较。

```
>>> set('abc') < set('cba')
False
>>> set('abc') <= set('cba')
True
>>> set('abc') == set('cba')
True
>>> set('abc') >= set('cba')
True
>>> set('abc') > set('cba')
False 
```

虽然它可以启用上述功能，`cmp`但不允许以下功能：

```
>>> set('abc') == set('bcd')
False
>>> set('abc') >= set('bcd')
False
>>> set('abc') <= set('bcd')
False 
```

## 玩具用途`cmp`

这是一个有趣的用法，它使用其结果作为索引（如果第一个小于第二个，则返回 -1，如果相等则返回 0，如果大于则返回 1）：

```
def cmp_to_symbol(val, other_val):
    '''returns the symbol representing the relationship between two values'''
    return '=><'[cmp(val, other_val)]

>>> cmp_to_symbol(0, 1)
'<'
>>> cmp_to_symbol(1, 1)
'='
>>> cmp_to_symbol(1, 0)
'>' 
```

根据文档，您应该将 cmp 视为不存在：

[https://docs.python.org/3/whatsnew/3.0.html#ordering-comparisons](https://docs.python.org/3/whatsnew/3.0.html#ordering-comparisons)

## `cmp`删除，等效操作

但是您可以将其用作等效项：

```
(a > b) - (a < b) 
```

在我们的小玩具函数中，就是这样：

```
def cmp_to_symbol(val, other_val):
    '''returns the symbol representing the relationship between two values'''
    return '=><'[(val > other_val) - (val < other_val)] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-21T19:56:15.763

> *我真的不明白两个数字的差异是*什么意思。

 *这意味着：取差异，然后是差异的符号。例如，如果`x`和`y`是两个数字：

*   `x < y`=>`x - y < 0`并且函数返回 -1。
*   `x == y`=>`x - y == 0`并且函数返回 0。
*   `x > y`=>`x - y > 0`并且函数返回 1。

有关三向比较的更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Three-way_comparison)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T19:57:16.337

三值比较器在排序时非常有用。您不仅想知道两个元素是否相等；您还想知道它们的相对顺序，以便知道如何重新排列它们以靠近排序列表。这就是为什么 C ( `strcmp`) 和 Perl ( `cmp`) 都有相似的操作（在那些情况下是字符串，但它是相同的想法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T19:55:55.590

用于排序项目序列。当您对项目列表进行排序时，您只需要知道一个项目大于或小于另一个项目。

更多信息：[http ://wiki.python.org/moin/HowTo/Sorting/#The_Old_Way_Using_the_cmp_Parameter](http://wiki.python.org/moin/HowTo/Sorting/#The_Old_Way_Using_the_cmp_Parameter)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-16T18:52:00.107

> 另一个用例：**查找**数字的符号 (- / +)

如果您想知道数字的符号 (+/-) 是什么，您可以轻松地将其用作函数`0`的第二个参数`cmp`

```
cmp(-123, 0) #returns -1
cmp( 123, 0) #returns  1 
```*

# windows - 在 Windows 服务中，停止和暂停有什么区别？

> ID：15556814
> 
> 赞同：19
> 
> 时间：2013-03-21T19:54:35.643
> 
> 标签：windows, service

开发Window Service Apps时，stop和pause有什么区别？

开发人员会区分这两者吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T20:02:38.303

当服务暂停时，它可以维护内部状态，包括缓存信息，甚至可能是等待工作项的队列。然后可以恢复服务以从中断的地方继续。

如果服务停止，内部状态将被丢弃。再次启动服务应该重复所有初始化。

开发人员确实区分了两者。当服务具有重要的初始化过程时，这种区别非常重要。

有关“服务状态”的更多信息，请参阅[Windows 服务简介](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.80%29.aspx)

# delphi - LoadIcon() 是否可能导致内存泄漏？

> ID：15556817
> 
> 赞同：5
> 
> 时间：2013-03-21T19:54:44.820
> 
> 标签：delphi

我正在使用此代码为线程中的托盘图标设置动画（icon1 和 icon2 在 .res 文件中）：

```
while AnimationPending do
begin
    TrayIcon.Icon.Handle := LoadIcon(hInstance,'icon1');
    Sleep(300);
    TrayIcon.Icon.Handle := LoadIcon(hInstance,'icon2');
    Sleep(300);
end; 
```

我担心如果我在循环中执行它可能会造成内存泄漏，因为 icon1/2 会重新加载。

代码是否会造成内存泄漏，或者在循环中使用是否安全？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T21:36:24.327

你在打电话`LoadIcon`。这将返回所谓的共享图标。这在[`DestroyIcon`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648063.aspx). 成为共享图标的后果之一是您不需要调用`DestroyIcon`.

> 只需为使用以下函数创建的图标和光标调用**DestroyIcon ：** **CreateIconFromResourceEx**（如果在没有**LR_SHARED**标志的情况下调用）、**CreateIconIndirect**和**CopyIcon**。请勿使用此功能破坏共享图标。只要加载它的模块仍在内存中，共享图标就有效。以下函数获取共享图标。
> 
> *   **加载图标**
> *   **LoadImage**（如果您使用**LR_SHARED**标志）
> *   **CopyImage**（如果您使用**LR_COPYRETURNORG**标志并且 hImage 参数是共享图标）
> *   **CreateIconFromResource**
> *   **CreateIconFromResourceEx**（如果您使用**LR_SHARED**标志）

那么，这与您的代码有何关系？好吧，当你写

```
TrayIcon.Icon.Handle := LoadIcon(hInstance,'icon1'); 
```

您正在分配给对象的`Handle`属性`TIcon`。如果该`TIcon`对象已经包含一个图标，则该图标将在被新图标替换之前被销毁。那是因为`TIcon`拥有其图标句柄的所有权。所有这一切都意味着上面的代码行导致了`DestroyIcon`对共享图标的调用。这是 MSDN 告诉你不要做的，但实际上它是良性的。没什么好担心的。

现在，即使您使用的是返回非共享图标的函数，例如`CreateIconIndirect`，您的代码也不会泄漏图标句柄。这是因为`TIcon`该类拥有图标句柄的所有权。

但是由于您使用的是共享图标，因此甚至不可能泄漏这些句柄。不能破坏的对象，不能泄露！

还有几点：

1.  我个人不会`LoadIcon`像那样一遍又一遍地打电话。我会在程序启动时调用它两次并记住共享图标句柄。然后我会使用这些句柄分配给`TrayIcon.Icon.Handle`.
2.  当您打电话时，`LoadIcon`您无法控制返回的图标的大小。我认为您可能会得到一个大图标而不是小图标。这需要在显示之前缩放到小图标大小。创建通知区域图标时，您应该确保它们`SM_CXSMICON`按`SM_CYSMICON`大小排列。

# javascript - 仅当页面向下滚动时如何在页面上加载项目？

> ID：15556820
> 
> 赞同：0
> 
> 时间：2013-03-21T19:55:00.727
> 
> 标签：javascript, asp-classic

我是 ASP 网页的新手。试图建立一个类似购物的网站。我首先创建了数据库，现在我想要的是仅显示用户感兴趣的“一些”项目，以保持页面光亮。稍后当用户向下滚动时，下一个“x”个项目将从数据库中获取并显示给用户。它就像您可以在 myntra.com 上看到的东西，但绝对不像在 ebay.com 上，其中项目数量固定在一页上。我知道它将使用 javascript，但无法确定触发事件的正确时间并向页面添加更多项目？我在 stackoverflow 上看到了有关向下滚动事件的信息，但我认为这与页面上的特定 ID 有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:08:11.413

以下是它在客户端的操作方式： [http ://www.youtube.com/watch?v=eziREnZPml4](http://www.youtube.com/watch?v=eziREnZPml4)

除此之外，您将需要一些服务器端逻辑来跟踪已经发送的内容，当请求更多内容时。您可以实现的一种方法是始终以相同的顺序读取项目，并拥有浏览器在每个后续请求中发送它拥有的“最新”项目。

# bash - 如何读取一行，稍微修改它并使用 awk/sed 将其写回？

> ID：15556821
> 
> 赞同：1
> 
> 时间：2013-03-21T19:55:12.953
> 
> 标签：bash, sed, awk

我有以下格式的 json 文件：

```
[
    {
        "organization": "ABC", 
        "type": "School", 
        "contact": "Joe Schmo", 
        "contact_title": "Principal", 
        "mailing_address": "123 Main Street, Anytown, MA", 
        "phone": "214-555-5430",
        "fax": "214-555-5444"
    },
    {
        "organization": "XYZ",
        "type": "School",
        "contact": "John Doe", 
        "contact_title": "Asst Principal", 
        "mailing_address": "123 Main Street, Anycity, TX", 
        "phone": "512-555-5430",
        "fax": "512-555-5444"
    },
    .
    .
    .
    .
] 
```

我想复制以开头的行，然后在替换为and`"organization"`后将其添加回文件两次。我也想保留原线。我想要的输出是：`"organization"``"company"``"long name"`

```
[
    {
        "organization": "ABC",
        "company": "ABC",
        "long name": "ABC", 
        "type": "School", 
        "contact": "Joe Schmo", 
        "contact_title": "Principal", 
        "mailing_address": "123 Main Street, Anytown, MA", 
        "phone": "214-555-5430",
        "fax": "214-555-5444"
    },
    {
        "organization": "XYZ",
        "company": "XYZ",
        "name": "XYZ",
        "type": "School",
        "contact": "John Doe", 
        "contact_title": "Asst Principal", 
        "mailing_address": "123 Main Street, Anycity, TX", 
        "phone": "512-555-5430",
        "fax": "512-555-5444"
    },
    .
    .
    .
    .
] 
```

`awk`或`sed`首选解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T20:00:31.827

这是一种方法：

```
sed '/organization/p;s/organization/company/p;s/company/long name/' file 
```

这是另一个：

```
awk '$1~/organization/{print $0;sub(/organization/,"company");print $0;sub(/company/,"long name")}1' file 
```

# wordpress - 从 localhost 迁移到我的 WordPress 网站的在线网络服务器的问题

> ID：15556827
> 
> 赞同：0
> 
> 时间：2013-03-21T19:55:22.807
> 
> 标签：wordpress, content-management-system

我发现将 WP 网站从我的本地 Web 服务器上传到官方在线 Web 服务器时出现一些问题。

在我的本地 Web 服务器上，情况如下：

1.  我已经在我的电脑上安装了 WP 网站
2.  我已经配置好了
3.  我已经安装了自定义模板

之后，我将此网站上传到我的官方在线网络服务器上的一个文件夹中。我已经使用 PhpMyAdmin 将本地数据库导出并导入到在线数据库中（将本地数据库导出到文件中，然后将其导入到在线数据库中）

最后，我更改了**wp-config.php**文件，更改了 MySql 连接设置，并将与官方在线数据库相关的设置放在这里。

当我尝试打开它出现的网站时，您可以在这里说出如何：[http ://www.scorejava.com/wordpress/](http://www.scorejava.com/wordpress/)

好的...看起来不错，但有两个问题：

1.  **如果你尝试打开一篇文章，它不是在在线服务器上打开文章，而是在本地服务器上打开，实际上打开这个 URL：[code]http://localhost/wordpress/?p=81[/code]**

2.  **如果我尝试打开打开此 URL 的管理面板：[code]http://www.scorejava.com/wordpress/wp-admin/[/code] 我得到一个白页**

我不知道这两个问题是否相关，但我认为这一切都可能取决于位置路径问题......

我认为某处有一些设置指定了 URL（不能是 localhost...），但是（如果是这样...）这个设置在哪里？在某个文件或数据库中？

有人有想法吗？你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:06:52.147

看看这个： [http ://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

那里有一个“[搜索和替换 WordPress 数据库脚本](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)”工具的链接，该工具非常方便（请务必阅读说明并在使用之前备份数据库）。问题是图像 URL 和其他内容存储在数据库中，并将反映开发位置的 URL。该工具将检查并正确更新从开发 URL 到最终位置的所有实例。

通常，在您移动 WP 站点之前，您还希望在常规设置中更新站点 URL，这可能会导致您的第二个问题。

# kendo-ui - 添加到 kendoMultiSelect

> ID：15556833
> 
> 赞同：0
> 
> 时间：2013-03-21T19:55:54.513
> 
> 标签：kendo-ui, multi-select

使用新的剑道多选，我将如何将选项添加到列表中并使它们被选中？

例如，如果我有一个下拉列表，其中包含：1、2、3，并且我想添加 4 和 5，我该怎么做？我是否必须销毁多选，添加选项然后重新启动多选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:43:19.333

给定以下`multiselect`定义：

```
var data =
        [
            { text: "Africa", value: "1" },
            { text: "Europe", value: "2" },
            { text: "Asia", value: "3" },
            { text: "North America", value: "4" },
            { text: "South America", value: "5" },
            { text: "Antarctica", value: "6" },
            { text: "Australia", value: "7" }
        ];

var multi = $("#select").kendoMultiSelect({
    dataTextField: "text",
    dataValueField: "value",
    dataSource: data
}).data("kendoMultiSelect"); 
```

您可以使用：

```
var values = multi.value(); 
```

用于获取值列表。

并将值设置为*南美洲*（元素为`value`5）和“亚洲”（元素为`value`3）使用：

```
multi.value(["5", "3"]) 
```

如果你想为它所拥有的任何东西添加值，那么你需要一个小技巧：

```
var multi = $("#select").kendoMultiSelect({
    dataTextField: "text",
    dataValueField: "value",
    dataSource: data,
    value: ["1", "2", "3"]
}).data("kendoMultiSelect");

// Adding value 4 and 5 to current content
var values = multi.value().slice();
$.merge(values, ["4", "5"]);
multi.value(values); 
```

**警告**：如果已经选择了值 4 和 5，您最终会重复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T18:10:46.710

只想添加一些有关如何实际向多选添加新值的信息。

正如 OnaBai 指出的那样，将项目添加到多选的代码是

```
$("#SDropDown").data("kendoMultiSelect").dataSource.add({ Text: x, Value: y }); 
```

给定 .cshtml

```
@(Html.Kendo()
    .MultiSelect()
    .Name("SDropDown")
    .AutoBind(true)
    .Placeholder("Select s...")
    .DataTextField("Text")
    .DataValueField("Value")
) 
```

为了添加*在多选*钩子中输入的项目，文本输入的更改事件。由于这不是唯一标识的，因此我使用 XPath 来获取`<input>`元素。这是挂钩的`document.ready`（在 .cshtml 中，所以 escape `@`）：

```
$(document).ready(function () {
    var node = document.evaluate('//select[@@id="SDropDown"]/../div[contains(@@class,"k-multiselect")]/input', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
    if (node)
    {
        node.onkeypress = SChanged;
    }
}

function SChanged(e)
{
    // only append on enter
    if (kendo.keys.ENTER == e.keyCode)
    {
        // updates multi-select data source
        AddToOrganizations(this.value);

        var multi = $("#SDropDown").data("kendoMultiSelect");

        multi.dataSource.filter({}); //clear applied filter before setting value

        // keep all currently selected items and append the user entered text
        // (does not check for duplicates)
        // Also, the new values can only be selected after the data source has
        // been updated.
        var values = multi.value().slice();
        $.merge(values, [this.value]);
        multi.value(values);
    }
} 
```

# javascript - 更改分享按钮的内容

> ID：15556835
> 
> 赞同：0
> 
> 时间：2013-03-21T19:55:57.417
> 
> 标签：javascript, facebook, plugins, twitter, share

所以我将这个分享按钮插件用于 twitter 和 facebook。但是，我不明白在按下按钮时应该更改什么来获取我的 URL 和标题。请帮忙。

html:

```
<a onclick="Share.facebook('URL','TITLE','IMG_PATH','DESC')"> {sharing is sexy}</a>
<a onclick="Share.twitter('URL','TITLE')"> {sharing is sexy}</a> 
```

JS：

```
Share = {
    facebook: function(purl, ptitle, pimg, text) {
        url = 'http://www.facebook.com/sharer.php?s=100';
        url += '&p[title]=' + encodeURIComponent(ptitle);
        url += '&p[summary]=' + encodeURIComponent(text);
        url += '&p[url]=' + encodeURIComponent(purl);
        url += '&p[images][0]=' + encodeURIComponent(pimg);
        Share.popup(url);
    },
    twitter: function(purl, ptitle) {
        url = 'http://twitter.com/share?';
        url += 'text=' + encodeURIComponent(ptitle);
        url += '&url=' + encodeURIComponent(purl);
        url += '&counturl=' + encodeURIComponent(purl);
        Share.popup(url);
    },
    popup: function(url) {
        window.open(url,'','toolbar=0,status=0,width=626, height=436');
    }
}; 
```

该插件位于：[http ://www.webdesign.org/html-and-css/tutorials/how-to-create-a-share-button-for-your-site.22180.html](http://www.webdesign.org/html-and-css/tutorials/how-to-create-a-share-button-for-your-site.22180.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:33:51.900

`window.location.href`将为您提供页面的 URL，并`document.getElementsByTagName("title")`为您提供页面的标题元素。

这是否回答了您的问题，或者您是否希望在按下按钮的确切时间设置这些值？

# php - 如何在 javascript 幻灯片中使用文本文件中的图像 URL？

> ID：15556839
> 
> 赞同：0
> 
> 时间：2013-03-21T19:56:03.853
> 
> 标签：php, javascript, html, slideshow

我正在创建一个幻灯片，其中我根据它们的 url 显示图像。我使用 PHP 从网页中提取图像 url，并使用 JavaScript 以幻灯片格式显示它们。唯一的问题是，第一张图片需要很长时间才能加载，所以我决定通过将它们存储在文本文件中来缓存 url，但我不知道如何从我的 JavaScript 位中的文本文件中读取 url？

谁能指出我应该如何进行的正确方向。我在网上找不到任何有用的东西。

我的 JS 代码是这样的：

```
<script language="JavaScript1.1">
        var slideimages=new Array() 
        slideshowimages("<?php echo join("\", \"", $image_urls); ?>") <--this is where I was initially echoing the array or image urls from php, but it proves slow for the first few images
        function slideshowimages(){
            for (i=0;i<slideshowimages.arguments.length;i++){
                slideimages[i]=new Image()
                slideimages[i].src=slideshowimages.arguments[i]
            }
        }
        var slideshowspeed1=30000

        var whichimage1=0
        function slideit1(){
            if (!document.images)
                return
            document.images.slide1.src=slideimages[whichimage1].src
            if (whichimage1<slideimages.length-1)
            whichimage1++
            else
                whichimage1=0
            setTimeout("slideit1()",slideshowspeed1)}slideit1()
  </script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:05:11.477

为什么要从外部网站拉取？如果您将它们拉到本地，您通常会获得更快的速度。我确实相信，一旦它拉出一次左右的图像，它就会在再次出现时为用户缓存。您可以做的是使用您提取的列表并创建隐藏在页面上的图像，以便它们与页面一起加载。然后在浏览幻灯片时，用户应该有时间缓存图像并且幻灯片会加速。

只需创建一个名为 hidden 的 CSS 类即可`visability:hidden;`。大多数浏览器仍会尝试加载数据。

# python-2.7 - 在 theano 函数中返回 np.array 或 np.matrix 对象

> ID：15556840
> 
> 赞同：0
> 
> 时间：2013-03-21T19:56:07.107
> 
> 标签：python-2.7, numeric

我必须做这样的事情。

```
import theano as th
import theano.tensor as T

x, y = T.dscalars('x', 'y')
z = np.matrix([[x*y, x-y], [x/y, x**2/(2*y)]])

f = th.function([x, y], z)   # causes error

# next comes calculations like f(2, 1)*f(3, 2)*some_matrix 
```

我知道最后一行不是有效代码，因为 th.function 不支持返回这些对象。有没有一种有效的方法可以在不返回矩阵的所有元素并将其转换为 np.matrix 的情况下执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T03:39:13.680

您的方法的问题是 z 需要是 theano 变量的列表，而不是 numpy 矩阵。

您可以使用以下方法获得相同的结果：

```
z1,z2,z3,z4 = x*y,x-y,x/y,x**2/(2*y)
f = th.function([x, y], [z1,z2,z3,z4])

def createz(z1,z2,z3,z4) :
    return np.matrix([[z1,z2],[z3,z4]])

print(createz(*f(1,2))) 
```

# javascript - 在以 JSON 格式导入 MongoDB 之前清理 HTTP 响应标头中的非法字符

> ID：15556841
> 
> 赞同：4
> 
> 时间：2013-03-21T19:56:08.137
> 
> 标签：javascript, regex, node.js, http, request

在使用 Node.js 请求 HTTP 响应并将其导入 MongoDB 时，我注意到一两个 URL 的标头包含非法字符（因为它们正在使用密钥），当我尝试导入 MongoDB 时，这会使整个脚本崩溃。下面是一个例子：

```
{
  "url": "divensurf.com",
  "statusCode": 200,
  "headers": {
    "x-varnish": "2236710953 2236710300",
    "vary": "Accept-Encoding,Cookie,X-UA-Device",
    "cache-control": "max-age=7200, must-revalidate",
    "x-cache": "V1HIT 2",
    "content-type": "text/html; charset=UTF-8",
    "page.ly": "v4.0",
    "x-pingback": "http://divensurf.com/xmlrpc.php",
    "date": "Thu, 21 Mar 2013 19:40:59 GMT",
    "transfer-encoding": "chunked",
    "via": "1.1 varnish",
    "connection": "keep-alive",
    "last-modified": "Thu, 21 Mar 2013 19:40:57 GMT",
    "age": "2"
  }
} 
```

标头/键`"page.ly"`会使脚本崩溃，因为它包含非法字符`.`。在我将此文档导入 MongoDB 之前，是否有任何方法可以通过删除这些非法字符来清理包含在引号中的这个键/标题？

以下是我请求响应的代码：

```
(function (i){
            http.get(options, function(res) {

                var obj = {};
                obj.url = hostNames[i];
                obj.statusCode = res.statusCode;
                obj.headers = res.headers;

                db.scrape.save(obj); // imports headers into MongoDB

            }).on('error',function(e){
        console.log("Error: " + hostNames[i] + "\n" + e.stack); // prints error stack onto console
        })
    })(i); 
```

例如，它将是从`"page.ly"`到`"pagely"`

编辑：已解决。检查盖尔的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:02:39.663

```
obj.headers={}; 
for(var item in res.headers){ 
    obj.headers[ item.replace(/\./,'')] = res.headers[item]; 
} 
```

# string - 如何解决“for each”循环中的“String”

> ID：15556848
> 
> 赞同：1
> 
> 时间：2013-03-21T19:56:19.903
> 
> 标签：string, c++-cli, managed-c++

我的任务是单击按钮后打开多个文件，并读取所有这些选定的文件。

我在 c# 中找到了一个 foreach 函数的示例，但我想用 C++ 编写它。我应该如何实际转换它？

它显示错误，`System::String`如果没有顶级'^'，则无法在此处使用此类型。

我还是新手。有人可以给建议吗？

非常感谢。

以下是我的书面代码

```
Stream^ myStream;
OpenFileDialog^ openFileDialog1 = gcnew OpenFileDialog;

openFileDialog1->InitialDirectory = "c:\\";
openFileDialog1->Title = "open captured file";
openFileDialog1->Filter = "CP files (*.cp)|*.cp|All files (*.*)|*.*|txt files (*.txt)|*.txt";
openFileDialog1->FilterIndex = 2;
//openFileDialog1->RestoreDirectory = true;
openFileDialog1->Multiselect = true;

if ( openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK )
{
    **for each (String line in openFileDialog1->FileName)** 
         System::Diagnostics::Debug::WriteLine("{0}",line);
    myStream->Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:01:36.893

根据返回的 Container 类型，在-header 中`std::for_each`定义了一个。`<algorithm>`该函数如下所示：

```
#include <algorithm>

std::for_each(InputIterator first, InputIterator last, Function fn); 
```

您需要提供两个`iterators`，一个用于 Container 的开头，一个用于迭代器的结尾。作为第三个参数，您可以提供一个函数（函数对象）并对当前参数进行操作。

请参阅[此处](http://www.cplusplus.com/reference/algorithm/for_each/)以获取更多参考。

当我从[MSDN](http://msdn.microsoft.com/de-de/library/system.windows.forms.openfiledialog.safefilenames%28v=vs.100%29.aspx)得到它时，该属性`SafeFileNames`返回一个`array<String^>`.

`System::Array`提供了一个名为`Array::ForEach`. 你需要这样称呼它

```
System::Action<T> myAction; // You will Need to provide a function here to be used on every filename.
System::Array::ForEach(openFileDialog1->SafeFileNames, myAction); 
```

这最接近`foreach`于 C#。

[在这里](http://msdn.microsoft.com/de-de/library/zecdkyw2%28v=vs.80%29.aspx)寻找`System::Array::ForEach`和在[这里](http://msdn.microsoft.com/de-de/library/zecdkyw2%28v=vs.80%29.aspx)寻找`OpenFileDialog::SafeFileNames`。

# .net - 3D 对象的透视投影，不使用 WPF 或 DirectX 或 XNA 或 OpenGL 或游戏引擎

> ID：15556850
> 
> 赞同：2
> 
> 时间：2013-03-21T19:56:23.750
> 
> 标签：.net, graphics, 3d

我正在寻找一些代码示例（最好是 C#）或简单的 .Net 函数库，便宜或免费，我可以使用它来将 3D 事物转换为它的 2D 透视投影，给定指定的相机位置等。

我进行了搜索和搜索，但我发现的所有内容似乎都使用了主要的图形框架或非常面向设备，或两者兼而有之。我想要一些纯软件和独立于设备的东西，并且可以与 .Net 2 一起使用。

但我确实想要带有相机视图的真实透视投影，而不仅仅是一些扭曲图像的 2D 图像转换，因此它看起来有点透视。

编辑：

感谢那些已经回答的人。就像我说的那样，我已经花了很多时间搜索，所以我并不感到惊讶（到目前为止）答案是我正在寻找不存在的东西。

在回答有关我为什么对参与某些主要软件包过敏的问题时，原因很简单，就是“保持简单”规则。对我来说，我想做的是一点点图形操作，我无法理解必须熟悉一个实现 10,000 多个功能的大型多功能包的想法，以便我可以做我的一个小功能。

编辑 2 - 主要用于 Miky：

以下是伪程序员哲学的一些杂乱无章的尝试，以证明我希望避免参与任何大型而复杂的程序包，而我想要的只是一个非常具体的功能。不要浪费时间阅读这篇文章，除非你真的无事可做......

Miky 正确地指出，.Net 框架有无数的功能，但我选择学习如何使用它，即使我永远不会使用其中 1% 的功能的 1%。是的，但我正在使用其中的数百个，这一切都值得。（单独的内存管理是一个死的功能。）

我还在为 WinForms 使用 Developer Express 包，它还包含成千上万个我永远不会使用的函数。但我确实使用了功能区菜单、停靠面板、网格和树视图以及许多其他功能，可能有一百个或更多，这一切都值得。

我还在为 WinForms 产品使用 MindFusion 图表，它包含数百个我永远不会使用的功能，但我确实使用了支持创建组织结构图和平面图以及移动节点并将它们链接在一起并重新格式化的功能图表、放大和缩小以及撤消……也许我正在使用几十个功能，这一切都值得。

所以这里我有一个包含 170,000 行代码并且高度依赖 .Net Framework 和 Developer Express 并且在某种程度上依赖于 MindFusion 的程序，现在我想做一点点 3D 透视渲染。事实上，它甚至不是真正的 3D -**我想做的是显示从斜角看到的 2D 图像（平面图）。我想将平面图堆叠在一起以代表一栋透明的多层建筑，可能具有夸大的平面图间距，并允许用户指定他/她是否想从一个角落或正面看伪建筑-在或另一个角落，以及相机的高度。**

而已。我认为我需要的是一两个 C# 方法，它们可以让我**渲染这些漂浮在空间中的 2D 平面图，就好像它们是 3D 一样，因为它们相对于相机倾斜，并且可以移动相机**。而已。

不管对错，我相信如果我开始学习一个主要的 3D 宇宙创建包或一个面向设备/性能的图形系统，那么我最终会花费比这个功能更多的时间。而且我绝对不想用永远不会使用的兆字节模块来膨胀我的程序的运行时占用空间。

但我非常感谢这个问题收到的所有建议和关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:05:09.990

基本上，将 3D 形状投影到 2D 屏幕上只是意味着使用几何来说明，如果我的屏幕是进入 3D 世界的窗口，那么该对象中的每个点会出现在屏幕上的什么位置？

![在此处输入图像描述](../Images/174af7d1bc3cbc64bd9693a47aaa2ab0.png)

如果您知道您希望用户的眼睛似乎远离屏幕的距离，您可以用相似的三角形计算出答案：

![在此处输入图像描述](../Images/6d80aa55dd0e4440f3689d9341a72abd.png)

数学只是：

![sx = tx * 距离 / ty](../Images/9005be48ceb635342c36d9a7fca38096.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:45:20.127

虽然我可以想出一些你不想依赖微软特定框架或事件 OpenGL 的原因，但我真的很难理解你对游戏 3D 库的看法。

问题是大多数 3D 库都考虑了游戏开发人员，因为它们构成了用户群的大部分。

因此，如果您倾向于对最后的限制宽大处理，您的可能性会略微增加。然而，一个问题仍然存在。

没有人真正关心 .NET 的 3D 库。那是因为 .NET 已经有 DirectX、XNA、OpenGL 了。而且，由于大多数 3D 库用户首先追求性能，因此重点是 C 或 C++。

因此，这使您可以在非托管领域中进行选择，包括以下库：

*   [保利码](http://polycode.org/)
*   [伊尔利希特](http://irrlicht.sourceforge.net/features/)

关于您的编辑：

我认为在这种情况下，最好的办法是对抗你的抑制并加快了解其中一个令人生畏的软件包的基础知识。这样想：

.NET 框架有 10,000 多种方法，如果您想创建一个简单的应用程序，该应用程序显示一个带有更新标签上打印文本的按钮的窗口，那么学习一些必要的（一些基本原理和子集）仍然会更容易功能）来实现这一点，而不是尝试寻找一个轻量级的库，该库旨在显示带有按钮和文本框的窗口。

上面的类比适用于所有主要的 3D 库。他们感到害怕的部分原因可能是因为它是全新的领域，也因为 3D 图形不是一个超级简单的概念来掌握。因此，任何实现 3D 库的人都希望尽可能多地公开功能，以使开发人员的生活更轻松（而不是更难）。

好消息是，学习 OpenGL 或 DirectX 的基础知识并不难。使用.NET*可能*更容易学习/使用 DirectX 。长期学习 OpenGL 可能更适合您，因为它更便携。两者都具有可用于帮助人们入门的许多资源的优势。

所以，咬紧牙关！不要重新发明轮子，也不要害怕承担很大的依赖（当你知道这是正确的时候）！继续编写您的第一个支持 3D 的基本应用程序。**你会感觉好多了**！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:21:14.253

我不知道这样的图书馆。通常的方法是使用齐次坐标。这可行，但非常抽象。

为了解决这个问题，我首先使用 SlimDx 或 Xna 附带的数学库编写程序。

一旦成功，将您需要的函数移植到您自己的 C# 代码中。无论您从哪个库开始，变换和透视矩阵函数都是相同的，它们的定义可以在 Internet 上找到。

# python - 回滚后的 SQLAlchemy 恢复“此事务处于非活动状态”

> ID：15556861
> 
> 赞同：1
> 
> 时间：2013-03-21T19:57:07.300
> 
> 标签：python, sqlalchemy

我试图通过将重复用户记录到另一个表来在插入中的主键冲突后恢复。但是，我的代码会产生错误`InvalidRequestError: This transaction is inactive`。

不幸的是，回溯没有显示该函数中发生错误的特定行——它只与调用该函数的函数一样深（这很奇怪）。

我的尝试/除了开始/回滚/提交模式看起来正确吗？

```
def convert_email(db, user_id, response):
    """Map a submitted email address to a user, if the user
    does not yet have an email address.
    """
    email = response['text_response']
    trans = db.begin()
    try:
        update_stmt = users_tbl.update(
                and_(users_tbl.c.user_id==user_id,
                     users_tbl.c.email==None))
        db.execute(update_stmt.values(dict(email=email)))
        trans.commit()
    except sqlalchemy.exc.IntegrityError as e:
        trans.rollback()
        if e.orig.pgcode == UNIQUE_VIOLATION:
            trans = db.begin()
            try:
                user = db.execute(users_tbl.select(users_tbl.c.email==email))
                parent_user_id = user.first()['user_id']

                insert_stmt = duplicate_public_users_tbl.insert().values(
                        user_id=user_id,
                        parent_id=parent_user_id)
                db.execute(insert_stmt)
                trans.commit()
            except sqlalchemy.exc.IntegrityError as e:
                trans.rollback()
                if e.orig.pgcode != UNIQUE_VIOLATION:
                    raise 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:08:41.983

异常是由调用函数产生的，该函数本身被包装在事务中。

```
with engine.begin() as db:
    convert_email(db, user_id, response) 
```

内部`rollback()`调用也必须终止外部事务。的文档暗示了这一点`Transaction.close()`，

> ...这用于取消交易而不影响封闭交易的范围。

# java - 使用 MySQL like 作为列名

> ID：15556868
> 
> 赞同：0
> 
> 时间：2013-03-21T19:57:38.990
> 
> 标签：java, mysql, prepared-statement, sql-like

我想使用preparedstatement 编写一个mysql 选择查询。但是最后一部分存在语法错误，即`concat('%', itemName, '%')";` `itemName`table 的一列`ItemMain`。我已经尝试了下面给出的 3 个查询。

```
String sql ="SELECT * FROM ItemMain WHERE ? = 'All' OR ? like concat('%', itemName, '%')";
String sql ="SELECT * FROM ItemMain WHERE ? = 'All' OR ? like  '%'+itemName+'%'";
String sql ="SELECT * FROM ItemMain WHERE ? = 'All' OR ? like  '%itemName%'"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:01:05.207

字段名称不能使用占位符。查询必须是

```
... WHERE somefield=? OR otherfield LIKE concat('%', ?, '%') 
```

占位符仅用于**VALUES**。SQL 中的字段/表名称、函数名称或任何“结构”词都是禁止的。

这是 mysql 准备语句的一般规则。这不是 java/php/c#/任何限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:08:16.183

虽然@Marc B 是绝对正确的（+1）我想补充一点。我相信你有一个真正的任务*需要*这样的功能，所以我想建议你下面的解决方案。

您可以如下动态创建查询。如果您使用的是普通 JDBC，则可以运行类似`desc YOUR_TABLE_NAME`. 它将返回表中易于解析的字段列表。您可以使用正则表达式或简单的字符串操作方法自己实现“like”语句，例如`startsWith("xyz")`代替`like 'xyz%'`、`endsWith("xyz")`代替`like '%xyz'`和`contains("xyz")`代替`like '%xyz%'`。现在您可以通过添加满足您要求的字段来动态创建 SQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:45:19.627

找到了我的问题的答案。

```
 String sql ="SELECT * FROM ItemMain WHERE ? = 'All' OR itemName like '%"+keyword+"%'";
        Object []values ={keyword};
        ResultSet res = DBHandller.getData(sql, conn, values); 
```

我在这里交换了列名、关键字并更改了语法 '%"+keyword+"%'"; 现在它可以正常工作了。thnx al

# ruby-on-rails - SOAP 请求适用于 PHP，但不适用于 Ruby（宝石：Savon2）

> ID：15556872
> 
> 赞同：0
> 
> 时间：2013-03-21T19:58:00.117
> 
> 标签：ruby-on-rails, ruby, soap, savon

我正在尝试执行名为 DoProduct 的 SOAP 请求。此方法正在更新特定产品。我查看了 WSDL ( [http://api.istore.pl/#op.idp182160](http://api.istore.pl/#op.idp182160) )，发现我需要一个 Product 对象和会话密钥。

一切都与 PHP 完美配合：

```
 $product = $soap->__soapCall("getProduct", array("sessionId" => $key, "productId" => $id));
    $result = $soap->__soapCall("doProduct", array("sessionId" => $key, "product" => $product)); 
```

我用 Ruby 尝试了相同的方法（首先获取产品，然后将其发回）：

```
 product = client.call(:get_product, message: {:session_id => session_key, :product_id => id})
    response = @@client.call(:do_product, message: {:session_id => session_key, :product =>  product.hash[:envelope][:body][:get_product_response][:return]}) 
```

Ruby 版本不工作。我收到一个参数未发送的错误（当然该参数在那里，我已经从第一个响应中检查了哈希）：

```
 HTTPI POST request to api.istore.pl (net_http)
    SOAP response (status 500)
    <?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><S
    OAP-ENV:Body><SOAP-ENV:Fault><faultcode>ERR_EMPTY_PRODUCT_TAX</faultcode><faults
    tring></faultstring></SOAP-ENV:Fault></SOAP-ENV:Body></SOAP-ENV:Envelope>

    Savon::SOAPFault: (ERR_EMPTY_PRODUCT_TAX)
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/savon-2.1.0/lib/savon/response.rb:70:in `raise_soap_and_http_errors!'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/savon-2.1.0/lib/savon/response.rb:13:in `initialize'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/savon-2.1.0/lib/savon/operation.rb:52:in `new'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/savon-2.1.0/lib/savon/operation.rb:52:in `call'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/savon-2.1.0/lib/savon/client.rb:38:in `call'
    from C:/Users/Arti/Documents/adgally/v1/app/models/istore.rb:45:in `update_product'
    from (irb):60
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
    from F:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

@EDIT PHP 响应（vardump）：

```
object(stdClass)[2]
  public 'Id' => int 18028717
  public 'PropertiesIds' => 
    array (size=0)
      empty
  public 'ImagesIds' => 
    array (size=1)
      0 => int 22573396
  public 'Currency' => 
    object(stdClass)[3]
      public 'Id' => int 1
      public 'Symbol' => string 'PLN' (length=3)
      public 'Round' => boolean false
      public 'Active' => boolean true
      public 'Rate' => float 1
  public 'Tax' => 
    object(stdClass)[4]
      public 'Id' => int 23
      public 'Name' => string '23%' (length=3)
      public 'Rate' => float 23
  public 'Symbol' => string ' ' (length=1)
  public 'Promotion' => boolean false
  public 'Wholesale' => boolean false
  public 'New' => boolean false
  public 'DeliveryTimeLength' => int 0
  public 'DeliveryTimeLengthPeriod' => string 'D' (length=1)
  public 'Producer' => null
  public 'PKWiU' => null
  public 'Active' => boolean true
  public 'Netto' => float 11.38
  public 'Brutto' => float 14
  public 'PromotionNetto' => float 0
  public 'PromotionBrutto' => float 0
  public 'WholesaleNetto' => float 0
  public 'WholesaleBrutto' => float 0
  public 'FirstPage' => int 0
  public 'Sequence' => int 18028717
  public 'Unit' => 
    object(stdClass)[5]
      public 'Id' => int 1
      public 'Symbol' => string 'szt.' (length=4)
  public 'PostSize' => string 'A' (length=1)
  public 'SortProperty' => string 'N' (length=1)
  public 'MainCategory' => 
    object(stdClass)[6]
      public 'Id' => int 34
      public 'Name' => string 'Odzież, Obuwie, Dodatki' (length=24)
  public 'Names' => 
    array (size=1)
      0 => 
        object(stdClass)[7]
          public 'Symbol' => string 'pl' (length=2)
          public 'Name' => string 'Bluzka testowa 2' (length=16)
  public 'Description' => 
    array (size=1)
      0 => 
        object(stdClass)[8]
          public 'Symbol' => string 'pl' (length=2)
          public 'Description' => string 'asdsad' (length=6)
  public 'HTMLDescription' => 
    array (size=1)
      0 => 
        object(stdClass)[9]
          public 'Symbol' => string 'pl' (length=2)
          public 'Description' => string 'asdasdas' (length=8)
  public 'MetaKeywords' => 
    array (size=1)
      0 => 
        object(stdClass)[10]
          public 'Symbol' => string 'pl' (length=2)
          public 'Description' => string 'bluzka, jesień, fajna' (length=22)
  public 'CategoriesIds' => 
    array (size=1)
      0 => int 1695922
  public 'BindingProducts' => 
    array (size=0)
      empty
  public 'Availability' => string 'A' (length=1)
  public 'Quality' => string 'N' (length=1)
  public 'Variants' => 
    array (size=1)
      0 => 
        object(stdClass)[11]
          public 'ShopProductPropertyValueIds' => 
            array (size=0)
              ...
          public 'Quantity' => float 1
          public 'WarehouseId' => int 20666112
          public 'Available' => boolean true
  public 'Weight' => float 0
  public 'Blocked' => boolean false
  public 'HideExternalOpinions' => boolean false
  public 'Width' => int 0
  public 'Height' => int 0
  public 'Deep' => int 0
  public 'InpostEnabled' => boolean false
  public 'Available' => boolean true
  public 'Ean' => null 
```

Ruby Savon response.to_hash 对象（抱歉格式化，但我不知道如何从控制台正确格式化）： http: [//pastie.org/7065887](http://pastie.org/7065887)

另外 ruby​​ response.to_json （格式更好）：

```
{
   "get_product_response":{
      "return":{
         "id":"18028717",
         "properties_ids":{
            "@soap_enc:array_type":"xsd:int[0]",
            "@xsi:type":"ns1:ArrayOfint"
         },
         "images_ids":{
            "item":"22573396",
            "@soap_enc:array_type":"xsd:int[1]",
            "@xsi:type":"ns1:ArrayOfint"
         },
         "currency":{
            "id":"1",
            "symbol":"PLN",
            "round":false,
            "active":true,
            "rate":"1",
            "@xsi:type":"ns1:Currency"
         },
         "tax":{
            "id":"23",
            "name":"23%",
            "rate":"23",
            "@xsi:type":"ns1:Tax"
         },
         "symbol":{
            "@xsi:type":"xsd:string"
         },
         "promotion":false,
         "wholesale":false,
         "new":false,
         "delivery_time_length":"0",
         "delivery_time_length_period":"D",
         "producer":null,
         "pk_wi_u":null,
         "active":true,
         "netto":"11.38",
         "brutto":"14",
         "promotion_netto":"0",
         "promotion_brutto":"0",
         "wholesale_netto":"0",
         "wholesale_brutto":"0",
         "first_page":"0",
         "sequence":"18028717",
         "unit":{
            "id":"1",
            "symbol":"szt.",
            "@xsi:type":"ns1:Unit"
         },
         "post_size":"A",
         "sort_property":"N",
         "main_category":{
            "id":"34",
            "name":"Odzieu017c, Obuwie, Dodatki",
            "@xsi:type":"ns1:MainCategory"
         },
         "names":{
            "item":{
               "symbol":"pl",
               "name":"Bluzka testowa 2",
               "@xsi:type":"ns1:TranslationName"
            },
            "@soap_enc:array_type":"ns1:TranslationName[1]",
            "@xsi:type":"ns1:ArrayOfTranslationName"
         },
         "description":{
            "item":{
               "symbol":"pl",
               "description":"asdsad",
               "@xsi:type":"ns1:TranslationDescription"
            },
            "@soap_enc:array_type":"ns1:TranslationDescription[1]",
            "@xsi:type":"ns1:ArrayOfTranslationDescription"
         },
         "html_description":{
            "item":{
               "symbol":"pl",
               "description":"asdasdas",
               "@xsi:type":"ns1:TranslationDescription"
            },
            "@soap_enc:array_type":"ns1:TranslationDescription[1]",
            "@xsi:type":"ns1:ArrayOfTranslationDescription"
         },
         "meta_keywords":{
            "item":{
               "symbol":"pl",
               "description":"bluzka, jesieu0144, fajna",
               "@xsi:type":"ns1:TranslationDescription"
            },
            "@soap_enc:array_type":"ns1:TranslationDescription[1]",
            "@xsi:type":"ns1:ArrayOfTranslationDescription"
         },
         "categories_ids":{
            "item":"1695922",
            "@soap_enc:array_type":"xsd:int[1]",
            "@xsi:type":"ns1:ArrayOfint"
         },
         "binding_products":{
            "@soap_enc:array_type":"xsd:int[0]",
            "@xsi:type":"ns1:ArrayOfint"
         },
         "availability":"A",
         "quality":"N",
         "variants":{
            "item":{
               "shop_product_property_value_ids":{
                  "@soap_enc:array_type":"xsd:int[0]",
                  "@xsi:type":"ns1:ArrayOfint"
               },
               "quantity":"1",
               "warehouse_id":"20666112",
               "available":true,
               "@xsi:type":"ns1:ProductVariant"
            },
            "@soap_enc:array_type":"ns1:ProductVariant[1]",
            "@xsi:type":"ns1:ArrayOfProductVariant"
         },
         "weight":"0",
         "blocked":false,
         "hide_external_opinions":false,
         "width":"0",
         "height":"0",
         "deep":"0",
         "inpost_enabled":false,
         "available":true,
         "ean":null,
         "@xsi:type":"ns1:Product"
      }
   }
} 
```

有人可以给我任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:16:40.933

根据 SOAP 响应，您实际上缺少 SOAP 服务所期望的参数。

我注意到在 PHP 版本中您只是发送了整个产品对象，但在 Ruby 版本中您正在挖掘响应哈希。

您可以检查两个版本中的“产品”并在此处发布回复吗？

# c# - Windows 8：创建自定义合同

> ID：15556878
> 
> 赞同：1
> 
> 时间：2013-03-21T19:58:17.343
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我想为我的应用程序实现一个自定义合同，以便在不涉及用户的情况下以编程方式相互共享数据。

我没有看到任何有关为 Windows 8 商店应用程序实施自定义应用程序合同的文档。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:00:44.670

我不相信您可以在 Microsoft 提供的合同之外创建自己的合同。

# ruby-on-rails - RSpec / Rails - 如何测试 ApplicationController 中的方法是否被调用（当我测试子类控制器时）？

> ID：15556882
> 
> 赞同：3
> 
> 时间：2013-03-21T19:58:37.267
> 
> 标签：ruby-on-rails, rspec

标题说明了一切。

我有一个控制器动作，我在其中做一些事情，然后调用在`ApplicationController`.

我如何测试它是否被调用？

`controller.should_receive(:the_method_name)`不起作用。
`ApplicationController.should_receive(:the_method_name)`不起作用。

什么是正确的语法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:16:03.350

我认为您可以使用[匿名控制器](http://relishapp.com/rspec/rspec-rails/v/2-4/dir/controller-specs/anonymous-controller)来测试您的 ApplicationController，查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T18:18:17.407

按照 Gerep 的建议使用 AnonymousController 并调用`controller.should_receive(:the_method_name)`应该这样做。

测试中的位置对于让测试成功通过很重要。给你举个例子：

```
describe 'my test' do
  before do
    controller.should_receive(:the_method)
    get :action
  end
  it { should render_template(:your_template) }
end 
```

这个例子应该通过并测试`:the_method`.

# lua - 有人能解释一下Lua中“：”和“。”的区别吗？运营商？

> ID：15556887
> 
> 赞同：0
> 
> 时间：2013-03-21T19:59:08.837
> 
> 标签：lua

我来自 Java，我只是想不通为什么我会看到 : 和 . 用在我只会用的地方。在 Java 中。

例如，我在 Lua 中看到了这一点。

`Person.doSomething()`然后我看到`Person:GetName()`

在 Java 中，我只会使用第一个选项来执行函数。我只是在这里缺少一些基本的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:01:17.347

调用`obj:Method(...)`实际上与 相同`obj.Method(obj, ...)`，只是它只计算`obj`一次。

同样，声明`function obj:Method(...)`与声明相同`function obj.Method(self, ...)`。

基本上，`:`只要函数需要具有`self`.

# android - Admob 注册了许多测试 ID

> ID：15556890
> 
> 赞同：0
> 
> 时间：2013-03-21T19:59:17.203
> 
> 标签：android, admob

我在我的应用程序上使用 Admobs，并且最近获得了更多手机来帮助进行测试。问题是我似乎只能输入一个设备 ID 作为测试客户端。有谁知道我是否可以添加超过 1 个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:20:52.070

如果在布局文件 (XML) 中设置它们，只需使用逗号分隔 id：

```
<com.google.ads.AdView
    [...]
    ads:testDevices="TEST_EMULATOR,D6A5B1F6DE9E1261C8C2A178418CFD52"
    ads:loadAdOnCreate="true"
/> 
```

# curl - 使用 curl 发布大文件

> ID：15556892
> 
> 赞同：0
> 
> 时间：2013-03-21T19:59:23.853
> 
> 标签：curl, playframework-2.0

我正在使用`curl`将大型文本文件发布到 Play 2.0 框架服务器。我的处理程序基本上是这样的：

```
def receive = Action { implicit request =>
  request.body.asText match {
    case Some(body) => 
      body.split("\n") foreach doSomething
      Ok("Imported some lines!\n")
    case None => Ok("Please post some data!\n")
  }
} 
```

我正在用`curl`.

```
curl -H "Content-Type: text/plain" --data-binary "@upload.txt" http://localhost:9000/receive 
```

这对小文件很有用。如果没有文本，我会收到消息“请发布一些数据！”。如果`doSomething`抛出异常，Play 会将其发回给我。如果我发送 100 行，它可以正常工作并告诉我“导入了一些行！”。但是，如果我发送 500 行，那么我不会收到任何消息，Play 也不会记录任何内容。在这种情况下发生了什么？Play 是否真的在某种程度上收到了我的请求（如果是，为什么会忽略它？），还是`curl`没有发送任何内容？

# java - 单击 JMenuItem 时如何打开新的 JFrame 窗口

> ID：15556893
> 
> 赞同：0
> 
> 时间：2013-03-21T19:59:38.963
> 
> 标签：java, swing

亲爱的朋友，我有一个包含 a 的主应用程序，`Menu`每个应用程序`Menu`都有一个`JMenuItem`. 我希望当我单击其中一个时`JMenuItem`我应该能够打开一个`new JFrame`将执行特定任务的。这`JFrame`应该在一个不同的实现类中`ActionListener`，而不是在包含 Main Method 的同一个类中，我在互联网和[http://stackoverflow.com](http://stackoverflow.com)中看到的许多示例没有在两个不同的类中提供解决方案。当我在同一个类中尝试相同的方法或作为实现它的内部类时，`ActionListener`它可以工作，但不像我说的 2 个不同的类。我需要它的原因是因为其中 `JMenuItems`有`Menu`很多`JMenuItem`处理大量的过程。如果我要将所有内容都放在一个文件中，那么它不再是面向对象编程，而是一个非常长的文件。一个例子如下所示。然而，下面的例子对我不起作用。有人可以指出我做错了什么。预先感谢。

实现 main 方法的主类。

```
public class SwendaEye{

    public static void main(String[]args){  
    FrameandComp frame = new FrameandComp();
    JFrame win;

    win = frame.mainFrame();
    JMenuBar bar;
    bar = new JMenuBar();
    win.setJMenuBar(bar); 

    JMenu swenda = new JMenu("SWENDAEYE");// adding Swenda menu to the bar.
    bar.add(swenda);

                 JMenuItem open = new JMenuItem("Open");
                 swenda.add(open);
                 JMenuItem exit = new JMenuItem("Exit");
                 swenda.add(exit);

    JMenu tools = new JMenu("Tools");// adding Tools menu to the bar.
    bar.add(tools);
                 JMenuItem convertIP = new JMenuItem("Convert IP Address");
                 tools.add(convertIP);
                 JMenuItem convertDomain = new JMenuItem("Convert Domain Name");
                 tools.add(convertDomain);
                 convertDomain.addActionListener(new Domain());

      win.setVisible(true);
    }
} 
```

这是与上述类分开的动作监听器类

```
public class Domain implements ActionListener{

    public void actionPerformed(ActionEvent e)
    {
        if("Convert Domain Name".equals(e.getActionCommand())){

            JFrame awindow = new JFrame();
            awindow.setSize(200,400);
            awindow.getContentPane().setBackground(Color.DARK_GRAY);
            awindow.setTitle("Convert");
            awindow.setDefaultCloseOperation(1);

        }

    }

} 
```

在此示例中，我仅演示了 Convert Domain Name `JMenuItem`。在你回答之前请不要告诉我`JOptionPane`，因为我基本上需要在这个窗口中做很多事情，比如表格、图像等等。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:04:14.253

您需要设置`aWindow`可见。

# css - 使用类行设置最后一个 div

> ID：15556894
> 
> 赞同：1
> 
> 时间：2013-03-21T19:59:43.870
> 
> 标签：css, html, css-selectors

我正在尝试用底部边距的页面上的类行来设置最后一个 div 的样式，但我似乎无法选择它。

我有这个：

```
body div.row:last-child { margin-bottom: 3em !important; } 
```

什么都没发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:07:32.680

这是你的代码：

[http://liveweave.com/muqgZh](http://liveweave.com/muqgZh)

利用`body>div:last-of-type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:02:33.163

-编辑-

`last-of-type`不在乎`.row`。所以，你可以这样做：

### JS (jQuery)

```
$('div.row:last').addClass('last'); 
```

### CSS

```
body>div.row.last {
   margin-bottom: 3em !important;
} 
```

~~您正在寻找`:last-of-type`~~

 ~~```
body>div.row:last-of-type {
   margin-bottom: 3em !important;
} 
```~~  ~~* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:03:44.717

如果您[绝对](http://jsfiddle.net/Fgszh/)`div.row`是`body`.

如果是最后一个`div`，您可以随时尝试`:last-of-type`（[JSFiddle 示例](http://jsfiddle.net/Fgszh/1/)）。

如果它不是最后一个`div`，但您确实知道它之后有多少其他元素，您可以使用`:nth-last-child(n)`（[JSFiddle 示例](http://jsfiddle.net/Fgszh/2/)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:05:52.327

您可以在 CSS 中选择：

*   每个`.row`是他们父母的最后一个孩子（或`:last-of-type`），
*   最后`.row`一个是直接子代`body`（或 body 的最后一个子代或任何已知且固定的层次结构级别的直接子代）

`.row`但是无论其层次结构级别如何，您都不能选择最后出现在 HTML 代码中~~

# c++ - 如何根据现有的加速度/速度规则计算所需的加速度

> ID：15556896
> 
> 赞同：0
> 
> 时间：2013-03-21T19:59:55.537
> 
> 标签：c++, math, physics, acceleration

我有 3 个值来确定对象的运动：`velocity`、`acceleration`和`maxVelocity`。我还有一个`distance`值来确定它们与目标的接近程度（基本上是 X）。此代码运行每一帧以确定基于 3 个值的实际移动：

```
var velocityDelta = (Math.max(Math.min(velocity + (acceleration * 0.016), maxVelocity), -maxVelocity) - velocity) / 2;
velocity += velocityDelta;
var delta = velocity*0.016;
velocity += velocityDelta;
distance -= delta; 
```

如果这`velocityDelta`有点令人困惑，那基本上是这样的：

```
velocityDelta = velocity + (acceleration * 0.016);
if (velocityDelta > maxVelocity) velocityDelta = maxVelocity;
else if (velocityDelta < -maxVelocity) velocityDelta = -maxVelocity;
velocityDelta = (velocityDelta - velocity) / 2; 
```

现在，假设您只能更改 的值`acceleration`，有没有办法计算您需要的加速度以确保`distance`最终准确为 0？在运行上述代码的其中一个帧中的含义，`distance - delta == 0`. 所以假设代码如下所示：

```
var distance = 300.5;
var velocity = 125.86;
var maxVelocity = 300;
while (distance != 0) {
    acceleration = ?
    var velocityDelta = (Math.max(Math.min(velocity + (acceleration * 0.016), maxVelocity), -maxVelocity) - velocity) / 2;
    velocity += velocityDelta;
    var delta = velocity*0.016;
    velocity += velocityDelta;
    distance -= delta;
} 
```

你会投入什么价值`acceleration`来确保循环不会永远运行？假设距离/速度/最大值可以是您无法更改的任何数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:08:42.840

你的问题很容易受到限制。我认为最好的解决方案是减速（即在与速度相反的方向上加速），这样`maxVelocity`就不会有问题了。

首先，找出物体到达目标之前会有多少时间间隔（假设没有加速度）：

```
var dt = 0.016;
var jumps = distance/(dt * velocity);   <-- round DOWN 
```

`distance`然后应用一些基本的物理学在这段时间内旅行：

```
x = vt + at^2/2
a = 2(x-vt)/t^2
acceleration = 2*(distance - velocity*jumps*dt)/(jumps*dt*jumps*dt); 
```

这工作得很好。那里有一个轻微的杂物让我有点困扰，但我现在不想追查——它可能会抵消代码中的杂物。

# routes - 获取活动路线并将其应用于视图中的导航

> ID：15556897
> 
> 赞同：3
> 
> 时间：2013-03-21T19:59:57.800
> 
> 标签：routes, ember.js, attr

我一直在尝试弄清楚如何连接我的导航并显示哪个导航项处于活动状态。我在这里有一个看法：

```
 <script type="text/x-handlebars" data-template-name="nav">
  <ul class="nav">
    <li>{{#linkTo "index"}}Index{{/linkTo}}</li>
    <li>{{#linkTo "lunches"}}Lunches{{/linkTo}}</li>
    <li>{{#linkTo "people"}}People{{/linkTo}}</li>
  </ul>
  </script> 
```

我正在使用 Bootstrap，并且 bootstrap 将“活动”类放在 <li> 而不是 <a> 上。Ember 默认将其放在 <a> 上。我已经尝试了各种方法来尝试获取活动路线并将其应用于此视图（并且我尝试手动设置一个值并使用 handlebars.helper 应用它，但它是一堆变形）。

这里的“正确”Ember 方式是什么？

我承认我在所有三个要点上都迷失了：

1.  从路线中获取价值
2.  将值从 Route 移动到视图（或将其绑定）
3.  在我的标签中将值显示为没有变形的属性

显然，我在这里犯了很多基本错误。有人可以帮我纠正一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:56:03.043

可以在[此](https://stackoverflow.com/a/14501021/2196706)线程上找到更好的答案。

我特别喜欢这个答案：

```
{{#linkTo "dashboard" tagName="li"}}
    <a {{bindAttr href="view.href"}}>Dashboard</a>
{{/linkTo}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:53:13.273

**我不能给你一个完美的答案**，因为这似乎是一个棘手的问题。但是有一个项目旨在整合 Twitter Bootstrap 和 Ember。所以看看[ember-bootstrap](https://github.com/emberjs-addons/ember-bootstrap)。它不是一个完整的集成，但它也提供了[NavList](https://github.com/emberjs-addons/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/nav_list.js)的实现。我认为它还没有使用 linkTo 助手，但我想它应该相对容易做到。

**如果这不是您**的选择，我只能看到编写linkTo 助手的扩展版本以便将锚包装在li 元素中的选项，但这也不是超级容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:22:53.893

这就是我最终做的事情。它有效，但似乎太复杂了，所以我怀疑它存在根本缺陷。非常欢迎任何更正和/或改进。

这是创建导航栏的视图：

```
 <script type="text/x-handlebars" data-template-name="nav">
    <ul class="nav">
      {{#each navs}}
          <li {{bindAttr class="isActive:active"}}><a href="#" {{action select link}}> {{title}}</a></li>
      {{/each}}
    </ul>
  </script> 
```

这是驱动它的大量代码:)

```
App.ApplicationController = Ember.Controller.extend({
    active: 'index'
}); 

App.ApplicationRoute = Ember.Route.extend({
    setupController: function(){
        var active = this.controllerFor('application').get('active');
        this.controllerFor('nav').set('model',{
            active:'index',
            navs: [
                { link:"index",   title:'Toad',    isActive: active === 'index' },
                { link:"lunches", title:'Lunches', isActive: active === 'lunches' },
                { link:"people",  title:'People',  isActive: active === 'people' }
            ]
        });
    },
    events: {
        select: function (item) {
            var nav = this.controllerFor('nav');
            var app = this.controllerFor('application');
            app.set('active',item);
            var active = app.get('active');
            var navs = nav.get('navs');
            new_navs = [];
            for (var i = navs.length - 1; i >= 0; i--) {
                new_navs[i] = { link: navs[i].link, title: navs[i].title, isActive: active === navs[i].link} ;
            };
            nav.set('navs',new_navs);
            this.transitionTo(item);
        }
    }
});

App.NavController = Ember.ObjectController.extend({

});

// Routes

App.Router.map(function() {
  this.route("people");
  this.route("lunches");
});

App.PeopleRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        this.send('select','people');
        controller.set('people', App.People.find());
    },
});

App.LunchesRoute = Ember.Route.extend({
    setupController: function(controller, model) {
        this.send('select','lunches');
        controller.set('lunches', App.Event.find());
    },
}); 
```

拜托，做你最坏的事，把它撕开，把我纠正过来！

# mysql - GROUP BY，但我想查看最后一项

> ID：15556900
> 
> 赞同：-3
> 
> 时间：2013-03-21T20:00:05.440
> 
> 标签：mysql, sql

假设我有以下记录：

```
Foo
FOO 
```

我想获取所有记录的列表，以便它们按包含`foo`and的列分组`FOO`，但我希望显示最后一条记录而不是第一条记录。GROUP BY 似乎显示了第一条记录。

```
TABLE:

id, name

Records:
1, Foo
2, FOO

SQL:
SELECT *,
       COUNT(id) AS cnt
FROM   table_name
GROUP  BY name
HAVING cnt > 1 
```

结果是：Foo。我需要 FOO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:21:34.587

*如果*id 列是连续的，那么为什么不使用子查询来获取结果：

```
select t1.id,
  t1.name,
  t2.cnt
from yourtable t1
inner join
(
  SELECT max(id) id,
    COUNT(id) AS cnt
  FROM   yourtable
  GROUP  BY name
  HAVING cnt > 1
) t2
  on t1.id = t2.id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/86f42/2)。

如果您只想要与每个关联的最后一行`name`并且`id`是顺序的，那么您可以使用子查询来获取`max(id)`每个`name`以及计数。使用该结果连接回您的表，您应该得到正确的最终结果。

# asp.net - 在 Page.Controls 中查找控件

> ID：15556903
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:15.327
> 
> 标签：asp.net

当我传递`Page.Controls`给一个方法时，有没有办法通过其名称或任何其他快速方式来访问特定控件？与遍历`ControlCollection`类似的相反：http: [//msdn.microsoft.com/en-us/library/yt340bh4.aspx](http://msdn.microsoft.com/en-us/library/yt340bh4.aspx) ？

编辑：对不起，我应该更清楚。我有一个执行数据库工作（例如插入表单数据）的类的实例。从 .aspx 页面的代码隐藏中，我将传递`Page.Controls`给该类实例的方法。该方法将其接收为`ControlCollection`. 在那个方法里面没有这样的方法`Page.FindControl`。但是，我可以迭代这个集合。但是有更快的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:01:58.660

试试这个以找到特定的控件`Page`

```
Control control = Page.FindControl["ControlId"] 
```

在此之后，您可以像`cast`这样控制您的原始版本`control`

```
TextBox textbox=(TextBox)control; 
```

如果你想从 ControlCollection 中找到特定的控件，那么你可以`Linq`像这样使用（我以`TextBox`这个为例）

```
Control myControl = myControlCollection.OfType<TextBox>().Where(a => a.ID == "controlId").FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:02:36.690

```
Page.FindControl("lblControl") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:02:39.837

根据您想要找到的控件类型，您可以执行以下操作：

```
Control ctrl = FindControl("TextBox1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:24:03.333

如果控件处于“同一级别”，则 Page.FindControl 方法是可以的，但通常情况下，控件隐藏在其他控件中。不幸的是，您可能需要递归搜索给定页面中的所有控件。这是我用来通过给定 id 值查找控件的一段代码...

```
string g_Error = string.Empty;
List<Control> _infos = new List<Control>();
_infos = ProcessControls(_infos, Page, "info_");
...
    public List<Control> ProcessControls(List<Control> MatchControls, Control controls, string FieldKey)
    {
        try
        {
            //get a recusive listing of all existing controls for reference
            foreach (Control cControl in controls.Controls)
            {
                if (cControl.Controls.Count > 0)
                {
                    //recusive call
                    MatchControls = ProcessControls(MatchControls, cControl, FieldKey);
                }
                //field rules
                //must contain Fieldkey to be collected (i.e. control id = FirstName where the FieldKey is "Name")
                //so first, loop through and collect controls with FieldKey
                if (cControl != null)
                {
                    if (cControl.ClientID.Contains(FieldKey))
                    {
                        MatchControls.Add(cControl);
                    }
                }
            }
        }
        catch (Exception ex)
        {
            g_Error = ex.ToString();
        }
        return MatchControls;
    } 
```

# android - android onResume不恢复图像值

> ID：15556904
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:15.900
> 
> 标签：android, bitmap, recycle

我使用`AnimationDrawable`动画，在动画完成或活动关闭后，我会回收位图。所以我第一次开始活动并且动画正在发生，但是如果我关闭活动并再次打开它，我会出错`trying to use a recycled bitmap`。

为什么`onResume`代码不重新创建图像值？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    animationImage = (ImageView) animation_dialog.findViewById(R.id.ivAnimation);
    animationImage.setBackgroundResource(R.drawable.animation);
    animationImage.post(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            animation = (AnimationDrawable) animationImage.getBackground();
            animation.start();
        }
    });
}

@Override
public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);
    animation.stop();
    animation_dialog.dismiss();

    for (int i = 0; i < animation.getNumberOfFrames(); ++i) {

        Drawable frame = animation.getFrame(i);
        if (frame instanceof BitmapDrawable) {
            ((BitmapDrawable) frame).getBitmap().recycle();
        }
        frame.setCallback(null);
    }
    animation.setCallback(null);
}

@Override
protected void onResume() {
    super.onResume();
    animationImage.setBackgroundResource(R.drawable.animation);
    animation = (AnimationDrawable) animationImage.getBackground();
} 
```

# php - PHP：无法将存储在数据库中的 html 放入数组中。获取“空”

> ID：15556905
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:15.740
> 
> 标签：php, arrays

我有一些存储在数据库中的 html。我正在使用以下代码检索它：

```
include('globals.php');
$callback = isset($_REQUEST['callback'])?$_REQUEST['callback']:FALSE;
$page_id=$_REQUEST['page_id'];
$result = $mysqli->query("SELECT html FROM pages WHERE page_id=$page_id")->fetch_object();
$html = $result->html;
$output = array("html"=>$html);
if($callback){
    header('Content-Type: text/javascript');
    echo $callback . '(' . json_encode($output) . ');';
} else {
    header('Content-Type: application/json');
    echo json_encode($output);
} 
```

json_encode 仅返回 {"html":null} 如果我回显 $html 变量本身，则 html 代码就在那里。但是，如果我在设置后立即为 $output 设置回显，我会得到 Array("html":null)。因此，当 html 被写入数组时，它发生了一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:22:28.287

挖掘并在一个有点相关的线程上找到了答案。这个答案可以在这里找到：[https ://stackoverflow.com/a/1972335/469219](https://stackoverflow.com/a/1972335/469219)

它使用较旧的 mysql_query 语法而不是较新的 mysqli。我更新的代码如下所示：

```
include('globals.php');
$callback = isset($_REQUEST['callback'])?$_REQUEST['callback']:FALSE;
$page_id=$_REQUEST['page_id'];
$mysqli->set_charset('utf8');
$result = $mysqli->query("SELECT html FROM pages WHERE page_id=$page_id")->fetch_object();
$html = $result->html;
$output = array("html"=>$html);
if($callback){
    header('Content-Type: text/javascript');
    echo $callback . '(' . json_encode($output) . ');';
} else {
    header('Content-Type: application/json');
    echo json_encode($output);
} 
```

注意新行`$mysqli->set_charset('utf8');`

# c# - MVC 中返回的类型不正确

> ID：15556907
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:22.093
> 
> 标签：c#, asp.net-mvc

我的视图模型遇到了一些问题。我有一个 create 方法，并且 create 方法是 post。在我的视图模型中，我发送了两个类 ProjectModel 和 ActivityLogModel。我遇到的问题是下面的错误。它希望将数据作为 ProjectViewModel 返回，但数据来自 ProjectModel。如何更正此问题，以便将数据作为正确的类型返回。

> 传入字典的模型项的类型为“GlobalNaming.Models.ProjectModel”，但此字典需要“GlobalNaming.Models.ProjectViewModel”类型的模型项。

视图模型

```
 public List<ProjectModel> Project { get; set; }
    public List<ActivityLogModel> Activity { get; set; } 
```

控制器

```
 public ActionResult Create()
    {
        ProjectViewModel projectvm = new ProjectViewModel();
        ProjectModel project = new ProjectModel();

        project.ProjectOwner = UserName;
        project.Description = _description;
        project.Timing = _timing;
        project.Availability = _availability;
        project.Positioning = _positioning;
        project.Competitor = _competitor;

        projectvm.Project = project;

        return View(projectvm);
    }

    [HttpPost]
    public ActionResult Create(ProjectModel pm, HttpPostedFileBase files)
    {
        pm.CreatedDate = dtNow;
        pm.UpdatedDateTime = dtNow;
        pm.ProjectStatus = "Initiation";
        pm.Rejected = false;

        if (ModelState.IsValid)
        {
            db.Projects.Add(pm);

            db.SaveChanges();

            UpdateSupportDocs(pm, files);

            return RedirectToAction("Index");
        }

        return View(pm);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:07:24.640

您在 post 操作中返回了错误的类型。见下文：

```
return View(new ProjectViewModel { Project = pm }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:05:51.830

在第一个方法中你`return`a `ProjectViewModel`，在第二个方法中你返回 a `ProjectModel`。因此，要么合并它们并尝试使用相同的视图，要么创建不同的视图。

在你看来你有

```
@Model ProjectModel 
```

这意味着这个视图将只接受类型为`ProjectModel`

我看到您的 ProjectViewModel 具有 ProjectModel 的属性，因此您还可以将返回更改为：

```
return View(new ProjectViewModel { Project = pm }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T20:09:29.083

实际上，问题是`ProjectModel pm`HttpPost`Create`方法的输入参数参数。

您`ProjectViewModel`在 HttpGet 中呈现`Create`，所以这是回发的内容，而不是 ProjectModel。因此，只需对齐您在 GET 请求上呈现的类型，并在 Post 处理程序的输入参数中输入您期望的类型。

这会起作用：

```
[HttpPost]
    public ActionResult Create(ProjecViewtModel pvm, HttpPostedFileBase files)
    {
        // TODO: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:10:48.123

从错误消息中可以清楚地看出，您正在从操作方法发送某种类型，并且表单需要不同的类型。

为什么在 ViewModel 中使用域模型作为属性？这将使您的 ViewModel 与您的域模型紧密耦合。

你应该像这样更新你的视图模型

```
public class ProjectVM
{
  public string ProjectName { set;get;}
  public string ProjectOwner { set;get;}
  //and other relevant properties ONLY  here
} 
```

使用它在视图之间传输和接收数据。

```
public ActionResult Create()
{
  var vm=new ProjectVM();
  return View(vm);
} 
```

现在确保您的 View 是对 Viewmodel 的强类型。不是域模型。

```
@model ProjectVM
@using(Html.Beginform())
{
  @Html.TextBoxFor(x=>x.ProjectName)
  <input type="submit" />
} 
```

并且您的 HttpPost 操作方法将具有 ProjectVM 类型的参数，以便 MVC 模型绑定将发布的表单变量绑定到该参数。

```
[HttpPost]
public ActionResult Create(ProjectVM viewModel)
{
  if(ModelState.IsValid)
  {
    //Create domain model object and set the property values and save
     Project proj=new Project();
     proj.Name=viewModel.ProjectName
     proj.ProjectOwner=viewModel.ProjectOwner;

     db.Projects.Add(proj);
     db.SaveChanges();
     return RedirectToAction("Created");
   }
   return View(viewModel);  //returning your view model object
} 
```

# php - 错误：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

> ID：15556910
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:31.327
> 
> 标签：php, mysql

我收到以下错误：

文件位置：/var/www/app.site.com/html/admin/functions/ihooks.php 行：600 消息：mysql_fetch_assoc() 期望参数 1 是资源，给定布尔值 错误类型：警告，错误编号：2 地址：[http ://app.site.com/admin/main.php?action=report](http://app.site.com/admin/main.php?action=report)

这是它引用的函数（从第 584 行开始）

```
function ihook_ac_admin_get_noauth() {
$guest = array_merge(
    ac_sql_default_row('acp_globalauth', true),
    ac_sql_default_row('#user')
);
$guest['fullname'] = '';
$guest['campaigns_sent'] =
$guest['campaigns_sent_total'] =
$guest['emails_sent'] =
$guest['emails_sent_total'] = 0;
// here we should deal with groups
$guest['groups'] = array(1 => 1);
// here we should deal with allowed lists
$guest['lists'] = ac_sql_select_box_array("SELECT listid, listid FROM #list_group WHERE groupid = 1");
// here we should deal with global permissions
$sql = ac_sql_query("SELECT * FROM #group WHERE id = 1");
while ( $row = mysql_fetch_assoc($sql) ) {
    // loop through all permissions in every group
    foreach ( $row as $k => $v ) {
        // looking for perms only
        if ( substr($k, 0, 3) == 'pg_' or substr($k, 0, 2) == 'p_' ) {
            // if not set, or has NO ACCESS, overwrite
            if ( !isset($guest[$k]) or !$guest[$k] ) {
                $guest[$k] = $row[$k];
            }
        }
    }
} 
```

所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:04:00.810

主要语法错误：

```
[...snip...]("SELECT listid, listid FROM #list_group WHERE groupid = 1");
                                         ^--- 
```

`#`是 mysql 中的注释字符，因此您在`FROM`.

如果您在代码中进行了任何类型的错误处理，您会很快注意到这一点。永远不要假设查询已经成功。始终检查失败：

```
$result = mysql_query($sql) or die(mysql_error()); 
```

是你应该拥有的绝对最少的。

# android - 谷歌地图网格只有安卓

> ID：15556915
> 
> 赞同：0
> 
> 时间：2013-03-21T20:00:42.103
> 
> 标签：android, google-maps, apk

我试图将我的 apk 上传到 android 控制台，但它给了我以下消息：

> 您上传了一个在调试模式下签名的 APK。您需要在发布模式下签署您的 APK。

我所做的只是：我从 lib 目录中获取了 .apk，然后我也使用命令行对其进行了 zipalign。

失败后，我尝试了以下其他态度：

（在eclipse上）Android工具-->导出签名的应用项目-->然后我确实需要完成新的.apk的创建。

然后我尝试再次上传.apk，一切都很好，但是我的大部分应用程序都基于 GoogleMapView 并且 MapView 看起来只是网格......奇怪的是，如果我尝试发送 apk 就像从 lib 目录到我的电子邮件，它运行良好并显示地图......所以问题不在于地图键很好。

我真的尝试了一切，但它似乎不起作用，应该是什么问题？

无论如何，这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.moshe.wakoslakos"
    android:versionCode="6"
    android:versionName="1.6" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="13" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <uses-library android:name="com.google.android.maps" />

        <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="@string/maps_key"/>

        <activity
            android:name="in.wptrafficanalyzer.locationingooglemap.MainActivity"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="in.wptrafficanalyzer.locationingooglemap.Settings"
            android:label="@string/title_activity_setting" 
            android:theme="@style/AppTheme"
            android:screenOrientation="portrait">
        </activity>
    </application>

</manifest> 
```

我真的很绝望，请帮我解决这个问题......谢谢:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:07:45.213

问题出在地图键上。

当您这样做时`Android tools --> export signed application project -->`，您的 apk 已使用新的密钥库进行签名。要使映射与此一起使用，您必须像为 debug.keystore 所做的那样获取密钥库的 MD5 哈希，并生成一个新的 API 密钥。然后，您使用该 API 密钥并在构建后再次签署您的 apk。

# rally - 回溯 API _ProjectHierarchy 没有缩小范围

> ID：15556923
> 
> 赞同：0
> 
> 时间：2013-03-21T20:01:00.970
> 
> 标签：rally, lookbackapi

嗨，我正在使用以下代码获取特定迭代的当前用户故事

 ````
Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',

    launch:function(){
        me = this;
        combo = window.parent.Ext4.ComponentQuery.query('rallyiterationcombobox')[0];
        var iterationObjectID = combo.getRecord().data.ObjectID;
        var query1= { _ProjectHierarchy: me.getContext().getProject().ObjectID, Iteration : iterationObjectID , _TypeHierarchy:"HierarchicalRequirement"};
        var fields = ["ObjectID","FormattedID","Name","Parent","Release","Tags","PlanEstimate","ScheduleState","_ValidFrom","_ValidTo"];
        var hydrate = ["Tags","ScheduleState"];
        var post = { find :query1, fields : fields, hydrate : hydrate, pagesize : 10000 };
        var wsid = this.context.getWorkspace().ObjectID;
        var url = "https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/"+ wsid +"/artifact/snapshot/query.js";
        console.log("snapshot url:",url);

            Ext.Ajax.request({
                method: 'POST',
                url: url,
                jsonData : post,
                success: function(res) {
                    res = JSON.parse(res.responseText);
                    console.log("The final results are",res);

                },

                failure: function(failure) {
                    console.log("snapshot query failed!",failure);
                }
            }); 
````  `问题是当我在查询中指定父项目时，我无法获取子项目的用户故事。例如，如果我有这样的层次结构

```
Project 7890
     User Story 55
     User Story 56
        Project 6543
         User Story 57
           Project 3456
              User Story 777 
```

理想情况下，如果我查询 _ProjectHierarchy: 7890 我应该得到用户故事 55、用户故事 56、用户故事 57、用户故事 777，因为查询检索了自身及其子项目的多个工作项，但在这里我只能获得用户故事 55、用户故事 66（它们是项目 7890 的用户故事）但不是用户故事 57、用户故事 777，因为这些是子项目的用户故事。我还想检索所选项目及其子项目的所有用户故事（即范围缩小）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:38:06.580

查看[LBAPI 文档](https://rally1.rallydev.com/analytics/doc)以获取有关此方面的一些有用信息，尤其是 _ProjectHierarchy 和 _ItemHierarchy/_TypeHierarchy 之间的区别。

在您的情况下，您可能应该使用 _ItemHierarchy/_TypeHierarchy：

**工作项层次结构**

工作项层次结构使用 _ItemHierarchy 字段遍历父/子关系。所以如果你有这个层次结构：

```
 Story 333
     Story 444
        Story 555
           Story 666
              Defect 777
                 Task 12
              Task 13
        Story 888
        Story 999 
```

Story 666 的文档如下所示：

```
 {
     ObjectID: 666,
     Parent: 555,
     _ItemHierarchy: [333, 444, 555, 666],
     ...
  } 
```

要检索从 Story 333（包括 333、444、555、666、888 和 999 但不包括缺陷 777）下降的所有 Stories，您可以在查询中包含以下子句：

```
 {
     _ItemHierarchy: 333,
     _TypeHierarchy: “HierarchicalRequirement”
  } 
```

**项目层次结构**

项目层次结构也表示为从该工作区的根项目开始的数组。因此，如果工作项 777 位于此项目层次结构的底部：

```
 Project 7890
    Project 6543
       Project 3456
          Work item 777 
```

工作项 777 的文档如下所示：

```
 {
     ObjectID: 777,
     Project: 3456,
     _ProjectHierarchy: [7890, 6543, 3456],
     ...
 } 
```

要检索 Project 7890 或其任何子项目中的多个工作项，您只需在查询中包含此子句：

```
_ProjectHierarchy: 7890 
````

# javascript - 解决此 Jquery 插件问题的正确方法是什么？

> ID：15556926
> 
> 赞同：1
> 
> 时间：2013-03-21T18:10:48.693
> 
> 标签：javascript, jquery

我编写了一个运行良好的 jquery 插件，但我遇到了一些跨浏览器问题，特别是在尝试获取图像元素的高度和宽度时。

以下代码没有在 Chrome 中提取正确的 imgHeight，它返回 0。

```
 (function($){
        $.fn.sideLoad = function(data){
            //some variables we will need
            var imgHeight = $(this).children('img').height();
            var imgWidth = $(this).children('img').width();
            var loaderHeight = (imgHeight/2)-16 ;
            var loaderWidth = (imgWidth/2)-16;
            var $target = $(this);

            //do some other processing    
        };//end function    
    })(jQuery); 
```

所以，我知道最有可能发生的事情是我需要等待 DOM 准备好提取正确的高度和宽度数字。因此，如果我将代码更改为下面的代码，它将起作用：

```
$(document).ready(function(){
    $.fn.sideLoad = function(data){
            //some variables we will need
            var imgHeight = $(this).children('img').height();
            var imgWidth = $(this).children('img').width();
            var loaderHeight = (imgHeight/2)-16 ;
            var loaderWidth = (imgWidth/2)-16;
            var $target = $(this);

            //do some other processing    
        };//end function    
 }); 
```

但是，我从未见过将文档作为其一部分编写的插件，我只是认为这不是最好的方法。有人可以在这里解释我的两个代码片段之间的区别以及实现我的目标的最佳方法是什么？基本上我需要适当的图像尺寸，以便在触发事件时加载器图形正确居中。

# c++ - BFD：矮人错误：使用 GNU 4.7.2 使用 HPCToolKit 分析 openmp 程序时

> ID：15556927
> 
> 赞同：1
> 
> 时间：2013-03-21T20:01:16.393
> 
> 标签：c++, c, profiling, openmp, gnu

我想使用 HPCToolkit 工具分析 openMP 程序。

我已经使用 GNU 4.7.2 编译器安装了 hpctoolkit-externals-5.3.2-r3950 和 hpctoolkit-5.3.2-r3950（来自网站的最新 tarball 源）。

我已将 hpctoolkit 安装目录添加到我的路径中。

但是我现在在分析代码时遇到问题这就是我所做的：我想分析一个带有任务的openmp程序：task_ex.c

1) gcc -fopenmp task_ex.c -o task_ex -O3

2) hpcrun ./task_ex 1024 4

3) hpcstruct task_ex

4) hpcprof -S task_ex.hpcstruct -I /home/priyanka/examples hpctoolkit-task_ex-measurements

这是我收到以下错误的时候：

***味精：线图：/home/priyanka/opt/hpctoolkit-install-5.3.2/lib/hpctoolkit/ext-libs/libmonitor.so.0.0.0 BFD：矮人错误：发现矮人版本'4'，仅限此读者处理版本 2 和 3 信息。BFD: Dwarf Error: found dwarf version '0'，这个阅读器只处理版本 2 和 3 的信息。BFD: Dwarf Error: found dwarf version '886', 这个阅读器只处理版本 2 和 3 的信息。BFD: Dwarf Error: found dwarf version '38401', 这个阅读器只处理版本 2 和 3 的信息。*** …………

…………

关于这个错误意味着什么以及如何解决这个问题的任何想法？这与 binutils 有关还是我没有正确编译或链接程序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T09:33:42.043

看起来这个线程很老了，但是......你可以用 -gdwarf-2 编译（gcc）（-gdwarf-3 在最新的 hpctoolkit 上也可以）然后这个消息消失。

# c++ - OpenGL GL_POLYGON 凹多边形不着色

> ID：15556929
> 
> 赞同：8
> 
> 时间：2013-03-21T20:01:24.097
> 
> 标签：c++, c, opengl, drawing, polygon

当我尝试在 OpenGL 中使用 Polygon 时遇到问题。我不知道如何解释这一点，但我所有的顶点都与开始的顶点相连。当我尝试为对象着色时会出现问题。我想画一个简单的物体。

```
void TOP (float x1, float y1, float x2, float h,float n)
{
  float r = x2-x1;
  if(n==1){glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);} // FOR FILL OR NO FILL OBJECT
  glBegin(GL_POLYGON);
     glVertex2f(x1,y1);
     glVertex2f(x2,y1);
     glVertex2f(x2,y1+h/7);
     y1=y1+h/7;
     glVertex2f(x2-r/5,y1+h/7);
     x2=x2-r/5; y1=y1+h/7;
     glVertex2f(x2,y1+2*h/7);
     y1=y1+2*h/7;
      glVertex2f(x2+r/5,y1+h/7);
      y1=y1+h/7; x2=x2+r/5;
      glVertex2f(x2,y1+2*h/7);
cout<<y1<<endl;
      y1=y1+2*h/7;
       glVertex2f(x2-r/5,y1); x2=x2-r/5;
      glVertex2f(x2,y1-h/7); y1=y1-h/7;
      glVertex2f(x2-r/5,y1);x2=x2-r/5;
      glVertex2f(x2,y1+h/7); y1=y1+h/7;
      glVertex2f(x2-r/5,y1);x2=x2-r/5;

       glVertex2f(x2,y1-h/7); y1=y1-h/7;
       glVertex2f(x2-r/5,y1);x2=x2-r/5;
        glVertex2f(x2,y1+h/7); y1=y1+h/7;
         glVertex2f(x2-r/5,y1);x2=x2-r/5;
         glVertex2f(x2,y1-2*h/7);y1=y1-2*h/7;
         glVertex2f(x2+r/5,y1-h/7);y1=y1-h/7; x2=x2+r/5;
         glVertex2f(x2,y1-2*h/7); y1=y1-2*h/7;
         glVertex2f(x2-r/5,y1-h/7); y1=y1-h/7;x2=x2-r/5;
          glVertex2f(x2,y1-h/7);

  glEnd();
} 
```

输出：

![http://i.stack.imgur.com/BLMSJ.png](../Images/1a3da31709da8bc9fa0450d91e9930b3.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T20:14:09.170

[`GL_POLYGON`](https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glBegin.xml)仅适用于[凸多边形](https://en.wikipedia.org/wiki/Convex_polygon)：

> `GL_POLYGON`：绘制单个凸多边形。顶点*1*到*N*定义了这个多边形。

对于[凹多边形](https://en.wikipedia.org/wiki/Concave_polygon)，您至少有两个选择：

1.  [对多边形进行三角剖分](https://stackoverflow.com/a/12604642/44729)并使用`GL_TRIANGLES`.

2.  [使用模板缓冲技巧](https://stackoverflow.com/a/15285096/44729)。

# python - 将分散数据转换为误差线等于标准偏差的分箱数据

> ID：15556930
> 
> 赞同：6
> 
> 时间：2013-03-21T20:01:26.037
> 
> 标签：python, numpy, histogram, scatter

我有一堆数据分散在x，y。如果我想根据 x 对这些进行分类并在它们上放置等于标准偏差的误差线，我将如何去做呢？

我在 python 中唯一知道的是循环 x 中的数据并根据 bin (max(X)-min(X)/nbins) 对它们进行分组，然后遍历这些块以找到 std。我确信使用 numpy 有更快的方法来做到这一点。

我希望它看起来类似于“垂直对称”： http: [//matplotlib.org/examples/pylab_examples/errorbar_demo.html](http://matplotlib.org/examples/pylab_examples/errorbar_demo.html)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-21T22:48:32.833

您可以使用`np.histogram`. 我正在重用来自[其他答案](https://stackoverflow.com/questions/15477857/mean-values-depending-on-binning-with-respect-to-second-variable/15478137#15478137)的代码来计算分箱的均值和标准差`y`：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.random.rand(100)
y = np.sin(2*np.pi*x) + 2 * x * (np.random.rand(100)-0.5)
nbins = 10

n, _ = np.histogram(x, bins=nbins)
sy, _ = np.histogram(x, bins=nbins, weights=y)
sy2, _ = np.histogram(x, bins=nbins, weights=y*y)
mean = sy / n
std = np.sqrt(sy2/n - mean*mean)

plt.plot(x, y, 'bo')
plt.errorbar((_[1:] + _[:-1])/2, mean, yerr=std, fmt='r-')
plt.show() 
```

![在此处输入图像描述](../Images/c050a30494471ce882f579495fed10fb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:04:23.307

没有循环！Python 允许您尽可能避免循环。

我不确定得到所有东西，所有数据都有相同的 x 向量和对应于不同测量值的许多 y 向量吗？并且您想将您的数据绘制为“垂直对称”，其中每个 x 的 y 平均值和每个 x 的标准偏差作为误差线？

然后很容易。我假设你有一个 M 长的 x 向量和一个 N*M 数组，其中 N 组 y 数据已经加载到变量名 x 和 y 中。

```
import numpy as np
import pyplot as pl

error = np.std(y,axis=1)
ymean = np.mean(y,axis=1)
pl.errorbar(x,ymean,error)
pl.show() 
```

我希望它有所帮助。如果您有任何问题或不清楚，请告诉我。

# vim - 在 Vim 中复制行并附加几个字母

> ID：15556932
> 
> 赞同：2
> 
> 时间：2013-03-21T20:01:33.567
> 
> 标签：vim, macros, text-editor, vi

我正在编辑文本文件中的字典，其中包含俄语单词 - 每行一个单词。

一些名词缺少它们的派生词，通常是同一个词加上几个字母 - 有 6-7 种变体，如下图所示：

![在此处输入图像描述](../Images/c1eb781f6f9863c2600beb540fefd68f.png)

在 Vim 中，我想将光标放在第一列并逐行向下滚动。当我认识一个名词时，我想按一些（尽可能少！）击键来获取该单词，将其复制到单独的行中并附加字母。

`%sort u`我可以通过稍后发布来消除重复项。

如果我*可以*在整个文件上运行该命令，它将类似于：

```
%s/\(.\+\)$/\1^M\1а^M\1ам^M\1ами^M\1ах^M\1е^M\1ном^M/ 
```

你有什么想法，如何在 Vim 中创建这样的“宏”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T20:15:48.937

有几种方法可以处理这个问题。您可以创建宏，也可以创建地图。两者都可以在运行 VIM 时完成。两者都可以放在另一个文件中（`.vimrc`例如，您的 . 文件或具有特定于该项目的绑定的文件）并在需要时获取。

我也会给你一些关于正则表达式的建议：如果你正在写一些特别复杂的东西，你可以通过以(ie, )`\`开头的正则表达式来大大减少所需的 s数量。`\v``:s/\v([0-9a-f]+\s)/0x\1/g`

**在 VIM 中创建宏**

您可以在 VIM 中启动宏，方法是`q`在普通模式下按，然后按您希望用于宏的键。然后，您可以通过按`@`后跟宏的字母来调用宏。`q`在正常模式下再次按下可停止录制。

因此，您可以按如下方式输入此宏（使用`q`寄存器）：

`q``q``:``s/\(.\+\)$/\1\r\1а\r\1ам\r\1ами\r\1ах\r\1е\r\1ном\r/``Enter``q`

然后，当您在线并且要运行此命令时，请`@``q`从正常模式进入。

**将宏存储在文件中并获取它**

当您在最后一步创建宏时，您实际上在做的是设置`q`寄存器。您可以通过输入`registers`命令模式来检查这一点。您可以改为在`.vimrc`文件中设置此宏，如下所示，每次启动 VIM 时都可以使用它。

1.  创建要在 ( `:new`) 中存储此宏的文件。
2.  将以下行添加到文件中：

    `let @q=":s/\\(.\\+\\)$/\\1\\r\\1a\\r\\1b\\r\\1ам\\r\\1ами\\r\\1ах\\r\\1е\\r\\1ном\\r/^M"`

    （如果您用 拉出该行并将其粘贴到 VIM 中`Ctrl+R``"`，则行尾将有一个正确的`^M`字符。您需要进行一些手动编辑以确保它在引号内。或者，您可以`Ctrl+V``Ctrl+M`输入输入 ^M 字符。）

3.  保存文件 ( `:w testmacro.vim`)。
4.  来源它（`:so %`或`:source %`）。
5.  `@``q`通过在您想要执行此操作的行之一上键入来测试您的宏。

稍后，您将能够通过运行`:so testmacro.vim`.

**创建映射**

您可以改为创建映射。以下映射复制给定行中的最后一个单词，将其粘贴到以下六行，然后附加到每个给定行。

`nnoremap <c-j> yy6pAа<esc>jAам<esc>jAами<esc>jAах<esc>jAе<esc>jAном<esc>j`

`n`“nnoremap”开头的表示它仅在正常模式下起作用。
`noremap`意味着此命令不会进行任何递归重新映射（而使用`nmap`，这可能会发生）。 `<c-j>`映射到`Ctrl+J` `yy6p`yanks 行并粘贴 6 次。 `Aa<esc>j`追加到当前行的末尾，输入文本（在本例中为`a`），退出插入模式，然后向下移动一行。

您可以在 vim 的命令模式下输入此命令，也可以将其存储在文件中并使用`:source`命令加载。

**将寄存器与映射相结合**

您可以访问映射中的寄存器。这意味着如果您知道输入给定的替换正则表达式会执行您想要的操作，您可以将其保存在寄存器中，然后在当前行输入您的命令。

为此，请在文件中输入以下命令，然后获取它：

```
nnoremap <c-i> :<c-r>f<cr>
let @f="s/\\(.\\+\\)$/\\1\\r\\1a\\r\\1b\\r\\1ам\\r\\1ами\\r\\1ах\\r\\1е\\r\\1ном\\r/^M" 
```

现在您可以输入`Ctrl+I`以在当前行的寄存器 f 中运行替换正则表达式。

或者，将一些寄存器专用于该目的 - 比如说 af。

```
nnoremap <c-l> yy6p$"apj"bpj"cpj"dpj"epj"fpj
let @a="a"
let @b="ам"
let @c="ами"
let @d="ax"
let @e="e"
let @f="ном 
```

在这种情况下，我们`"`在点击使用它的命令（例如粘贴）之前使用了按下和寄存器名称的功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T20:11:10.753

`q`您可以通过在`escape`模式中按下来录制宏。例如，

1.  将光标放在要编辑的名词上。
2.  按下`qa`开始录制宏并将其存储在寄存器中`a`（其他字母和数字也可用于寄存器）。
3.  执行您想要执行的任何常规操作（复制行、粘贴、附加字母等，就像您尝试在搜索字符串中显示的那样）。
4.  完成更改后，在`escape`模式下`q`再次按下。

您的宏现在已在 register 中创建`a`。每当您想重复按键序列时，只需按`@a`。

请注意，您可以在`recording`模式下执行任何操作，包括任何类型的命令、插入、光标移动等。有关宏和相关选项的更多信息，请查看 Vim 帮助`:h complex-repeat`。

Vim 寄存器被共享为宏和 yanked 测试的占位符；此功能甚至允许您在文件中保存和编辑宏。有关详细信息，请参阅[此问题](https://stackoverflow.com/q/1497958/567555)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:36:20.823

这是一个地图解决方案 - 它将线条复制到缓冲区中，然后使用 p 粘贴。A 附加在行尾

```
 map <F2> 0dwpo<esc>pAa<enter><esc>pAam<enter><esc>pAax ...etc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T20:54:37.010

如果你的目标是，当你的光标在一个特殊的词上，然后按下一些东西，vim 会附加不同的“后缀”（我希望我用了正确的词，但你知道我的意思）。你可以去宏（`q`）。但是，由于您已经编写了该`:s`命令，您可以使用该命令创建一个映射，执行相同的操作，并且它会更短。

在命令行中，您可以通过按 获取光标下的单词`<c-r><c-w>`。所以你可以尝试：

```
nnoremap <leader>z :s/<c-r><c-w>/& & &..../<cr> 
```

我没有写这`& & &...`部分，因为我不知道（从未尝试过，我在 windows 下没有 vim。我什至没有 windows）是否`\n`可以在 windows 下使用换行符。 `&`表示整个匹配的部分，在这种情况下是光标下的单词。

因此，您只需将光标移动到单词 type`<leader>z`上，vim 就会为您完成这项工作。（如果更换部件是正确的:)）。

# html - H 标题 + 同一行上的一些其他文本

> ID：15556933
> 
> 赞同：15
> 
> 时间：2013-03-21T20:01:34.237
> 
> 标签：html, css, html-heading

我试图在同一行有一个标题，然后是一些不太重要的文本：

## 技能等级

（5 级）

但我真的很想`(scale of 5)`在同一行中，以及`Skill Ratings`被包装在`<h>`文档结构语义的标签中。

我对房地产很紧，所以我不想要另一行，`(scale of 5)`将链接到 CSS 样式。

这可能吗？如果没有，我会选择不`Skill Ratings`作为标题，但更喜欢它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T20:04:56.677

HTML

```
<h1>Skill Ratings <span>(scale of 5)</span></h1> 
```

CSS

```
h1 span { font-size:16px; } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T20:09:39.270

您可以使用 Lowkase 的答案，或者如果由于某种原因您需要将元素分成标题和段落标签，您可以这样做：

```
<h1>Skill Ratings </h1>

<p>(scale of 5)</p> 
```

然后这里是css：

```
.h1 { display: inline; }
.p { display: inline; } 
```

Lowkase 的解决方案更具语义性，因此它可能是一个更好的解决方案，但这是另一种方法。

# 编辑

抱歉，我刚刚注意到您想要在标题标签中使用它，这意味着使用 Lowkase 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T20:09:32.447

只需让您的`<h1>`显示：内联。这样，它将呈现在正常的文本流中。

[在这里摆弄](http://jsfiddle.net/ZFZ2S/)

```
<h1>Skill Ratings </h1>(scale of 5)

h1 {
    display:inline
} 
```

# facebook - 实时更新后没有新数据，并且缺少 OpenGraph /feed 中的最新帖子

> ID：15556934
> 
> 赞同：1
> 
> 时间：2013-03-21T20:01:35.033
> 
> 标签：facebook, real-time, facebook-opengraph

我很难使用 OpenGraph API 访问给定用户的最新帖子和评论。我有`read_stream`权限，并获得对象`feed`字段的实时通知`user`。通知进来了，但获取`/<user id>/feed`流不包括新操作。

在使用 Graph API Explorer 时，我通过 OpenGraph 看到的数据和我直接进入页面看到的数据是不同的。查看我朋友的个人资料，我看到了他的最新更新，但它并没有通过`/friend_id/feed`. 我一周前留下的评论显示在我的 中`/feed`，但几个小时前的评论（发送了实时通知！）没有出现。

这几乎就像为 API 过滤了一些帖子。这是它应该如何工作的吗？

我的实际目标是获取应用程序用户的所有评论。

# php - 将 zend 框架包含到 php 项目 zend_search_lucene

> ID：15556938
> 
> 赞同：2
> 
> 时间：2013-03-21T20:01:43.127
> 
> 标签：php, zend-framework, zend-search-lucene

我在互联网上搜索了很多信息，也尝试了很多不同的建议，但似乎没有什么能满足我的需要。所以这就是问题所在：我想使用 Zend_Search_Lucene 在数据库中执行搜索，但我一开始就卡住了.. 创建索引并让 Zend 工作。我在共享 Hostgator 主机上并使用此 php 代码生成我的索引：

```
include ('/home/username/public_html/website/config.php');

$path = '/usr/local/Zend';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
require_once('Zend/Loader.php');
Zend_Loader::registerAutoload();
require_once ('Zend/Search/Lucene.php');
$index = Zend_Search_Lucene::create('/home/username/public_html/website/tmpbuild');
    $con = mysql_connect("".$dbhost."","".$dbusername."","".$dbpass."");
    if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

        mysql_select_db("".$dbname."", $con);

$sql = ('SELECT * FROM rasti_failai');
while($eilute = mysql_fetch_array($sql))
        {
        $filenamesql = $eilute['failu_name'];
        $dydissql = $eilute['dydis'];
        $hostas = $eilute['hostas'];
        $datasql = $eilute['data'];
        $aprasymassql = $eilute['header'];
        $titlesql = $eilute['aprasymas'];
        $url = $eilute['url'];
        $links = $eilute['links'];      

    $document = new Zend_Search_Lucene_Document ();

$document->addField(Zend_Search_Lucene_Field::unIndexed('ID', $eilute['ID']));
$document->addField(Zend_Search_Lucene_Field::Text('failu_name', $eilute['failu_name']));
$document->addField(Zend_Search_Lucene_Field::UnStored('dydis', $eilute['dydis']));
$document->addField(Zend_Search_Lucene_Field::UnStored('hostas', $eilute['hostas']));
$document->addField(Zend_Search_Lucene_Field::UnStored('header', $eilute['header']));
$document->addField(Zend_Search_Lucene_Field::UnStored('aprasymas', $eilute['aprasymas']));
$document->addField(Zend_Search_Lucene_Field::UnStored('url', $eilute['url']));
    $index->addDocument($document);     }
$index->commit();
echo $index->count() . " documents have been indexed.\n"; 
```

但似乎我无法让 Zend 框架工作，因为我收到了这个错误：

```
Warning: require_once(Zend/Loader.php) [function.require-once]: failed to open stream: No such file or directory in /home/username/public_html/website/adminp/lucene.php on line 15

Fatal error: require_once() [function.require]: Failed opening required 'Zend/Loader.php' (include_path='.:/usr/lib/php:/usr/local/lib/php:/usr/local/Zend') in /home/username/public_html/website/adminp/lucene.php on line 15 
```

我的主机安装了 zend 框架（虽然我不知道确切的版本，但我认为 hostgator 使用的是最新的，而我使用的是 php5），并且支持说它在 /usr/local/Zend 目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:07:50.470

您已经设置了包含路径，`set_include_path();`因此您位于`Zend/`此处显示的目录中：

```
$path = '/usr/local/Zend';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
require_once('Zend/Loader.php'); 
```

我相信将您的最后一行更改为此应该有效：

```
require_once('Loader.php'); 
```

该错误仅意味着它找不到您指定的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:50:16.860

好的，我已经修好了。如果有人需要信息我是怎么做的，这里有详细的解释：首先，我下载了zend framework 1（因为第二版默认没有Lucene模块）然后逐步使用这个：

1.  将 Zend 框架上传到您的托管服务器（路径：root/library/Zend）

2.  查找您的 DOCUMENT_ROOT 路径

    回声 phpinfo();

3.创建或更新您的 php5.ini 或 php.ini 文件，该文件位于您的主机帐户的 rood 目录中。（如果您使用的是php5，则需要使用php5.ini文件）

把这一行，（如果你已经有，在当前集合的末尾添加这一行，用'：'连接）

```
include_path = [DOCUMENT_ROOT]/Zend Path 
```

前任）`include_path = /home/content/m/i/s/misskoreabbq/html/library`

现在为了测试zend是否安装好，让我们打印出zend框架版本。

```
require_once 'Zend/Version.php';
echo 'Your Zend Framework version = ' . Zend_Version::VERSION; 
```

# http - 服务器端 Dart 中的跨域请求

> ID：15556942
> 
> 赞同：0
> 
> 时间：2013-03-21T20:02:16.887
> 
> 标签：http, httpwebrequest, dart

我用 javascript 编写了一堆脚本，并想切换到 dart 或至少开始使用它。我确实有一个问题：我知道 js 不支持浏览器中的 x 域请求，但是从服务器运行 dart 应用程序/脚本呢，它仍然一样吗？这甚至可以做到吗？

基本上，由于我无法访问我查询的 Web 服务器，因此跨域能力是非常必要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:04:34.280

听起来您可能会询问是否编写可以向 HTTP 服务器发出请求的服务器端命令行脚本。虽然问题的措辞对我来说并不完全清楚。（上面的答案是关于基于浏览器的 Dart 脚本。）

Dart 可以做到这一点。在这种情况下，没有跨源限制。

请参阅[HttpClient](http://api.dartlang.org/docs/releases/latest/dart_io/HttpClient.html)类。或者你可以使用 pub 上的[http](http://pub.dartlang.org/packages/http)包。

我推荐使用 http 包，因为它提供了一个更简单的高级接口。

下面是一个使用 http 包的例子：

```
import 'dart:io';
import 'package:http/http.dart' as http;

main() {
    http.read("http://google.com").then((content) {
        print(content);
    });
} 
```

您需要更新 pubspec.yaml 文件以添加以下依赖项：

```
name: Http Example
   dependencies:
     http: any
     pathos: any 
```

（实际上，您应该只需要包含 http，但我认为 http 包在其 pubspec.yaml 文件中缺少 pathos 依赖项。）

我找不到漂亮的 http 文档，但[源文件](https://code.google.com/p/dart/source/browse/trunk/dart/pkg/http/lib/http.dart)中有一些文档注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:13:24.010

跨域安全性内置在浏览器中，因此既不是 Dart 也不是 JavaScript 的功能。

对测试很有用：您可以将标志传递给 chrome，这将禁用此安全功能。见这里：http: [//joshuamcginnis.com/2011/02/28/how-to-disable-same-origin-policy-in-chrome/](http://joshuamcginnis.com/2011/02/28/how-to-disable-same-origin-policy-in-chrome/)

如果你想做一个 GET 请求，那么你可以使用 Dart JavaScript 互操作，请参阅本文中的这一部分：[http ://www.dartlang.org/articles/json-web-service/#note-on-cors](http://www.dartlang.org/articles/json-web-service/#note-on-cors)

另一方面，如果您想 POST 请求，除非目标服务器支持 CORS，否则您会遇到问题。更多细节在这里：[https ://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

**编辑：**正确的方法是让您的客户端代码与您拥有的服务器通信，并让该服务器与第三方服务器通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T21:21:14.590

`Access-Control-Allow-Origin`您可以通过在 http 响应上设置标头来启用服务器上的跨域请求。该值要么`*`允许任何来源访问资源，但指定有效来源绝对更安全。

# jquery - 带有 MVC 和淘汰赛 js 的 jQueryUI 日期选择器

> ID：15556943
> 
> 赞同：0
> 
> 时间：2013-03-21T20:02:19.507
> 
> 标签：jquery, asp.net-mvc, jquery-ui, knockout.js, jquery-ui-datepicker

好的，我已经尝试了我在这里看到的其他答案中的几乎所有内容。

我在我的 MVC 表单上使用 jQueryUI datepicker，它也使用了淘汰赛。我只想显示日期，而不是时间。

这是我的标记：

```
<div class="editor-label">
        @Html.LabelFor(model => model.StartDate.Date)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(model => model.StartDate.Date, new { @class = "date-picker", id = "StartDate", data_bind = "value: StartDate" })
        @Html.ValidationMessageFor(model => model.StartDate.Date)
    </div> 
```

然后在我的模型中，我设置了数据类型：

```
 [Required]
    [DataType(DataType.Date)]
    public DateTime StartDate { get; set; } 
```

在 document.ready 的 datepicker jquery 中，我设置了格式：

```
$(".date-picker").datepicker({ dateFormat: "dd/mm/yy" }); 
```

然而，当页面加载时，它仍然显示时间（12:00 AM）和日期。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:10:03.250

尝试将文本框的类型设置为日期。使用属性仅适用于编辑器而不是文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T14:46:22.170

使您的日期值输出为`StartDate.ToShortDateString()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:15:08.470

之后尝试添加：

```
$(".date-picker").datepicker("setDate", new Date("@Model.StartDate")); 
```

# sql - 更新查询以更改特定行的值

> ID：15556950
> 
> 赞同：0
> 
> 时间：2013-03-21T20:02:42.993
> 
> 标签：sql, oracle, sql-update, row

我要创建一个查询来计算列的值并将该值更新到表中。这个专栏是`CAR_PRICE`。目前，我创建的查询更新了所有值，但该列中的所有值都变得相同。但是，我的目标是计算每个特定行的值。

```
UPDATE CAR_PAYMENT_TBL
    SET CAR_PRICE =
    (SELECT 
        (R.END_DATE-R.START_DATE)*5 AS CAR_PRICE
        FROM CAR_TBL C
        LEFT JOIN
        ROOM_TBL R
        ON C.BOOKING_ID = R.BOOKING_ID
        WHERE C.TICKET_NO = '&TICKET_NO'); 
```

无论如何修改此查询以计算值并`CAR_PRICE`为 中的每一行更新不同的值`CAR_PAYMENT_TBL`？

表格：

```
CREATE TABLE CAR_PAYMENT_TBL
(
    TICKET_NO INT NOT NULL PRIMARY KEY,
    CAR_PRICE NUMERIC(5,2) 
);

CREATE TABLE ROOM_TBL
(  
    STAY_NO INT NOT NULL PRIMARY KEY,
    ROOM_NO VARCHAR2(4) NOT NULL references ROOM_DETAILS_TBL(ROOM_NO),
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    BOOKING_ID INT NOT NULL references BOOKING_TBL(BOOKING_ID)
);

CREATE TABLE CAR_TBL
(
    REG_ID VARCHAR2(7) NOT NULL PRIMARY KEY,
    TICKET_NO INT NOT NULL references CAR_PAYMENT_TBL(TICKET_NO),
    BOOKING_ID INT NOT NULL references BOOKING_TBL(BOOKING_ID)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:29:54.783

```
UPDATE CAR_PAYMENT_TBL T
    SET CAR_PRICE = (
        SELECT (R.END_DATE-R.START_DATE)*5 AS CAR_PRICE
        FROM CAR_TBL C
        LEFT JOIN ROOM_TBL R
          ON C.BOOKING_ID = R.BOOKING_ID
        WHERE C.TICKET_NO = T.TICKET_NO
    )
    WHERE T.TICKET_NO = '&TICKET_NO'; 
```

# tomcat - Tomcat 6 管理器应用程序 ldap 身份验证

> ID：15556951
> 
> 赞同：0
> 
> 时间：2013-03-21T20:02:45.167
> 
> 标签：tomcat, ldap, tomcat6

是否可以将为 tomcat 6 manager 应用程序定义的角色映射到我们的 LDAP 中不同命名的组？

在[管理器应用程序的文档中](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Configuring_Manager_Application_Access)，它说

> JNDIRealm - 您的用户和角色信息存储在通过 LDAP 访问的目录服务器中。按照适用于您环境的标准过程，将所需角色添加到一个或多个现有用户，和/或创建一个或多个分配了所需角色的新用户。

我已经成功地将我们的 JNDI 领域点设置为我们的 LDAP。现在，我想为角色使用一些现有的组。例如，与其为角色创建一个名为“manager-gui”的组，我更愿意将 manager-gui 角色映射到一个名为“serveradmins”的组。

我可以对管理器应用程序的 web.xml 进行一些调整以允许我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:12:48.700

是的。更改 web.xml 中的角色名称。所以用“server-admins”替换所有“manager-gui”实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:44:16.557

打开“嵌套组”选项并使您现有的组成为“manager-gui”组的成员。

# python - 如何检查是否与 AWS 实例建立了 SSH 连接

> ID：15556958
> 
> 赞同：9
> 
> 时间：2013-03-21T20:03:20.007
> 
> 标签：python, ssh, amazon-web-services, amazon-ec2, boto

我正在尝试使用 SSH 通过 SSH 连接到 Amazon EC2 实例`boto`。我知道可以在创建实例后的一段时间后建立 ssh 连接。所以我的问题是：

*   我可以以某种方式检查实例上是否启动了 SSH 吗？（如果有，怎么做？）
*   或者我如何检查输出`boto.manage.cmdshell.sshclient_from_instance()`？我的意思是，例如，如果输出打印出来`Could not establish SSH connection`，然后再试一次。

这就是我到目前为止所尝试的，但没有运气：

```
if instance.state == 'running':
    retry = True
    while retry:
        try:
            print 'Connecting to ssh'
            key_path = os.path.join(os.path.expanduser('~/.ssh'), 'secret_key.pem')
            cmd = boto.manage.cmdshell.sshclient_from_instance(instance,
                                                               key_path,
                                                               user_name='ec2-user')

            print instance.update()
            if cmd:
                retry = False
        except:
            print 'Going to sleep'
            time.sleep(10)

SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
SSH Connection refused, will retry in 5 seconds
Could not establish SSH connection 
```

当然一切正常，因为我可以在一段时间后启动相同的代码并获得连接，并且能够使用`cmd.shell()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T14:25:53.590

消息“SSH 连接被拒绝，将在 5 秒后重试”来自 boto：[http ://code.google.com/p/boto/source/browse/trunk/boto/manage/cmdshell.py](http://code.google.com/p/boto/source/browse/trunk/boto/manage/cmdshell.py)

最初，“正在运行”只是暗示实例已开始启动。只要`sshd`未启动，到端口 22 的连接就会被拒绝。`sshd`因此，如果在“运行”状态的前 25 秒内没有出现，您所观察到的绝对是意料之中的。

由于无法`sshd`准确预测何时出现，并且如果您不想通过定义一个恒定的长等待期来浪费时间，您可以实现自己的轮询代码，例如以 1 到 5 秒的间隔检查端口 22 是否可访问。仅当它是调用时`boto.manage.cmdshell.sshclient_from_instance()`。

测试某个主机的某个 TCP 端口是否可访问的一种简单方法是通过该`socket`模块：

```
import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    s.connect(('hostname', 22))
    print "Port 22 reachable"
except socket.error as e:
    print "Error on connect: %s" % e
s.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-16T12:29:47.233

我有 2 个部分，一个用于检查实例是否正在运行，另一个用于检查实例是否可访问

```
# Get instance status till it is running
status_output=$(aws ec2 describe-instance-status --instance-ids $instance_id)
instance_status=$(jq -n "$status_output" | jq .InstanceStatuses[0] | jq .InstanceState.Name)
echo $instance_status
while [ ${instance_status:1:-1} != running ]
do
    status_output=$(aws ec2 describe-instance-status --instance-ids $instance_id)
    instance_status=$(jq -n "$status_output" | jq .InstanceStatuses[0] | jq .InstanceState.Name)
    echo $instance_status
done

# Get instance reachability till it is ready 
status_output=$(aws ec2 describe-instance-status --instance-ids $instance_id)
instance_reachability=$(jq -n "$status_output" | jq .InstanceStatuses[0] | jq .InstanceStatus.Status)
echo $instance_reachability
while [ ${instance_reachability:1:-1} != ok ]
do
    status_output=$(aws ec2 describe-instance-status --instance-ids $instance_id)
    instance_reachability=$(jq -n "$status_output" | jq .InstanceStatuses[0] | jq .InstanceStatus.Status)
    echo $instance_reachability
done 
```

# php - PHP PDO 错误消息作为变量在电子邮件中发送

> ID：15556959
> 
> 赞同：4
> 
> 时间：2013-03-21T20:03:27.857
> 
> 标签：php, mysql, error-handling, pdo, error-reporting

在 PHP 中从 MySQL 切换到 PDO。在过去，当一个查询被运行并且由于某种原因没有被执行时，我可以给自己发送一封邮件，邮件正文中包含 mysql_error() 消息，如下所示：

```
$query = "SELECT dogs FROM animals";
$res = mysql_query($query);

if (!$res) {
    $error = "Error Message: " . mysql_error();
    mail("my@email.com","Database Error",$error);
} 
```

从那以后，当网站上的数据库出现问题时，我会收到一个 emil 警报。

我的 PDO 设置如下：

```
setAttribute(PDO::ATTR_EMULATE_PREPARES,false);
setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); 
```

我在 PDO 连接本身中有一个 try catch，但我想在它们发生时获取错误消息以进行准备和执行：

```
$query = "SELECT cats FROM animals";
$sql = $pdo->prepare($query);

if (!$sql->execute()) {
  $error = "Error Message: " . (pdo error message here);
  mail("my@email.com","Database Error",$error);
} 
```

关于如何在电子邮件主题中分配 PDO 错误消息的任何想法？如果准备使用 errorInfo() 失败但在执行错误（例如数组的无效参数计数）时，我可以获得逻辑错误消息，我似乎无法收到错误消息。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:05:36.900

使用 try/catch

```
try {
    $sql->execute();
} catch (PDOException $e) {
    $e->getMessage(); // This function returns the error message
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:10:57.357

您可以使用：

```
$query = "SELECT cats FROM animals";
$sql = $pdo->prepare($query);

if (!$sql->execute()) {
  $arr = $sql->errorInfo();
  $error = print_r($arr, true);

  mail("my@email.com","Database Error",$error);
} 
```

# c# - 来自 dataSet 的 dataGridView 填充

> ID：15556960
> 
> 赞同：0
> 
> 时间：2013-03-21T20:03:32.027
> 
> 标签：c#, datagridview, dataset

我无法让我的 dataGridView 使用数据集中的所有表进行更新。在我尝试填充它之后，我只在 dataGridView 中得到一行。

我称之为填充我的数据集：

```
 DataTable table = new DataTable(DateTime.Now.ToString());

            table.Columns.Add("c1");
            table.Columns.Add("c2");
            table.Columns.Add("c3");
            table.Columns.Add("c4");
            table.Columns.Add("c5");
            table.Columns.Add("c6");
            table.Columns.Add("c7");
            table.Rows.Add("s1", "s2", "s3", "s4", "s5", "s6", "s7");

            dataSet1.Tables.Add(table);

            dataSet1.WriteXml("MyData.xml"); 
```

数据写得很好，但是如果我尝试用它来读取它，我只会填充一行，即使数据集中有多个条目。

```
 dataSet1.ReadXml("MyData.xml");
        MessageBox.Show((dataSet1.GetXml())); 
```

我收到带有正确格式数据和正确条目数的消息。

```
 dataGridView2.AutoGenerateColumns = true;

        int i2 = 0;
        while (i2 < dataSet1.Tables.Count)
        {
            dataGridView2.DataSource = dataSet1.Tables[i2];
            i2++;
        } 
```

在此之后它只会显示一行而不是表格的数量。dataSet1.Tables.Count >= 2，但仍然只有 1 行。

编辑：似乎每次我调用此行时：

```
dataGridView2.DataSource = dataSet1.Tables[i2]; 
```

它正在删除前一行。有什么办法可以代替该行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:50:17.477

您只在数据集中创建了一个表，因此您的`while`语句只执行一次：

```
while (i2 < dataSet1.Tables.Count)
{
    ...
} 
```

`Count`= 1（表数），因为您只调用`dataSet1.Tables.Add(table);`了一次。

`dataSet1.WriteXml("MyData.xml")`只是写出该单个表的架构。所以读回它只会读回一个表的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:20:50.953

以下代码似乎用于计算数据集中的表数：

```
while (i2 < dataSet1.Tables.Count) 
```

尝试将其指向表格：

```
dataSet1.Tables["Yourtable"].Count 
```

# silverlight - ServiceStack：对路由感到困惑

> ID：15556964
> 
> 赞同：1
> 
> 时间：2013-03-21T20:03:41.723
> 
> 标签：silverlight, servicestack

我开始研究 ServiceStack 以及用基于 ServiceStack 的方法替换 RiaServices 的可能性。无论如何，我们已经为每个视图使用了一个 Dto，并在后端使用了 NH。我通过添加一个指向“api”而不是应用程序根目录（Silverlight）的元素来修改 webconfig，创建服务，定义路由等。我可以点击 localhost:12543/api/metadata 并列出操作。当我单击操作时，它为我提供了操作“api/certificates”的可用路径。如果我使用 Firefox 的 rest 客户端插件，我可以点击`http://localhost:12543/api/json/reply/CertificateDefinitionList` 并获得预期的数据。但是，如果我这样做了，`http://localhost:12543/api/certificates`我会收到 404 错误，并且在提琴手中它会说“未找到请求的处理程序”。我错过了什么？

```
HTTP/1.1 404 Not Found
Server: ASP.NET Development Server/10.0.0.0
Date: Thu, 21 Mar 2013 19:44:07 GMT
X-AspNet-Version: 4.0.30319
X-Powered-By: ServiceStack/3.942 Win32NT/.NET
Cache-Control: private
Content-Type: text/plain; charset=utf-8
Content-Length: 1316
Connection: Close

Handler for Request not found: 

Request.ApplicationPath: /
Request.CurrentExecutionFilePath: /api/certificates
Request.FilePath: /api/certificates
Request.HttpMethod: GET 
```

在 Web.config 中

```
 <!-- service stack hosting at custom path-->
  <location path="api">
    <system.web>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      </httpHandlers>
    </system.web>
    <!-- Required for IIS 7.0 -->
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
      </handlers>
    </system.webServer>
  </location> 
```

全球.asax

```
public override void Configure(Funq.Container container)
{
   //this is because ria entry for system.webserver makes it not work for 
   // service stack
   SetConfig(new EndpointHostConfig
   {
      ServiceStackHandlerFactoryPath = "api",
   });

   container.RegisterAutoWired<ComplianceService>();

   Routes.Add<CertificateDefinitionList>("/api/certificates");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:46:01.230

如果您可以按照@mythz 的要求提供有关路线的更多详细信息，那将很有帮助。

为了浏览到`http://localhost:12543/api/certificates`我会创建一个请求类

```
[Route("/certificates")] //**this assumes you have a web.config with 'api' as custom path
public class Certificate
{
  public string FieldOne {get; set;}
} 
```

[您还可以使用此处](https://github.com/ServiceStack/ServiceStack/wiki/Routing)描述的 Fluent API

**当我单击操作时，它为我提供了操作“api/certificates”的可用路线......但是，如果我这样做，`http://localhost:12543/api/certificates`我会收到 404 错误**

如果您在页面上看到“GET api/certificates” `'json/metadata?op=Certificate'`，听起来您正在做`[Route("/api/certificates")]`. 由于路径/url 的 'api' 部分已经在 web.config 中配置，因此不需要在路由中包含“api”。

**听起来您已经在 web.config 中完成了此操作 - 但请参阅[此处](http://www.servicestack.net/ServiceStack.Hello/)b) /custompath 中的主机服务下的参考

```
<system.web>
  <httpHandlers>
    <add path="api*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
  </httpHandlers>
</system.web> 
```

# python - 从命令行执行 Python 脚本隐藏了打印语句

> ID：15556967
> 
> 赞同：4
> 
> 时间：2013-03-21T20:03:53.910
> 
> 标签：python, printing, terminal

我知道这一定是一个超级基本的问题，但是，我尝试在整个 SO 中找到一个简单的答案，但找不到。

所以我的问题是：如何从命令行执行 python 脚本，以便我可以看到打印语句。

例如，假设我有文件 test.py：

```
def hello():
    print "hello" 
```

如果我进入解释器，导入 test.py，然后调用 test.hello()，一切正常。但是，我希望能够运行

```
python test.py 
```

从命令行并让它打印“你好”到终端。

我该怎么做呢？

谢谢！

更新：是的，对不起，我的脚本实际上更像这样：

```
def main():
    hello()

def hello():
    print "hello" 
```

我还需要调用 main()，还是自动调用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T20:05:38.293

在文件末尾添加：

```
if __name__ == '__main__':
    hello() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:06:43.297

您的`print`语句包含在函数定义块中。您需要调用该函数才能执行它：

```
def hello():
    print "hello"

if __name__ == '__main__':
    hello() 
```

基本上这是说“如果此文件是主文件（已从命令行调用），则运行此代码。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T20:05:44.457

您必须让脚本实际调用您的方法。通常，您可以使用`if __name__ == "__main__":`块来执行此操作。

或者，您可以使用`-c`解释器的参数从 cli 显式导入和运行您的模块，但这将要求脚本位于您的 python 路径上，并且也将是不好的样式，因为您现在已经在外部执行 Python 代码Python 模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:06:37.193

据我了解，您的文件只有以下几行：

```
def hello():
    print "hello" 
```

定义是正确的，但是你什么时候“调用”这个函数呢？

您的文件应包含对该`hello()`函数的调用：

```
def hello():
    print "hello"

hello() 
```

这样，函数在单个文件中定义*和调用。*

这是一种非常“类似脚本”的方法......它有效，但必须有更好的方法来做到这一点

# xna - XNA Alpha 与基元和精灵混合

> ID：15556973
> 
> 赞同：0
> 
> 时间：2013-03-21T20:04:20.767
> 
> 标签：xna, sprite, alpha, primitive, alphablending

我已经使用 XNA 有一段时间了，我真的很喜欢使用它的界面。现在我们正在尝试制作一个“战争迷雾”系统。我们正在制作 RTS，我们基本上是在试图掩盖地图。地图上的单位有影响力，并显示正在发生的事情。它们显示地图上的特定区域。以前我们使用基于磁贴的界面，但我们对外观并不满意。相反，我们决定在屏幕上绘制一个黑色蒙版，然后用 DrawUserPrimitives 显示一个透明的圆圈。问题来了：当我们在屏幕上画一个黑色蒙版，然后是透明的圆圈时，屏幕是全黑的。颠倒顺序也不会改变任何事情。我们还尝试了我们能找到的每一个 SpriteBatch BlendState。

我们目前的方法：现在，我们在屏幕上绘制一个全黑的纹理，然后绘制一个透明的圆圈。结果是完全黑屏。

我们期望的结果：画圆将显示屏幕的一部分，但保持其余部分不可见。我们将能够绘制多个圆，所有圆都有自己的半径，它们可以彼此靠近而不会造成问题。

基本上，我们试图绘制一个黑色蒙版，但显示屏幕的一部分。我们不能只制作圆形纹理并使边缘透明，因为我们试图使圆形的*中心*透明。我们不能使中心透明，因为这样当两个这样的纹理彼此靠近时，它们的边界就会出现。我将如何制作面具，然后展示它的各个部分？

问候

战神

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:17:37.203

您可以将图形正常渲染到一个渲染目标，然后在另一个渲染目标的黑色背景上将可见区域绘制为白色，然后使用`Min` [`BlendFunction`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.blendfunction.aspx).

或者，仅使用一个渲染目标，正常绘制图形，然后清除 alpha 通道（通过在整个屏幕上绘制一个矩形，ColorWriteChannels = Alpha 和 alpha 混合因子均为 0），然后仅使用 ColorWriteChannels = Alpha 绘制可见区域。

# mysql - mysql在同一字段中的多个计数和分组值

> ID：15556974
> 
> 赞同：5
> 
> 时间：2013-03-21T20:04:21.040
> 
> 标签：mysql, sql

我环顾四周，但找不到答案 我需要一个查询，该查询根据同一字段中的值返回 2 组值作为字段名称

例如我有一张桌子

```
名称，价值
名称 1, 2
名称 1, 2
姓名 1, 3
姓名 1, 4
名称 2, 2
名称 2, 2
名称 2, 3
名称 2, 4
```

现在我想在一个组中计算和分组值 2 和 3，在另一组中计算值 4，所以我的结果看起来像这样

```
NAME，GRP1_COUNT，GRP2_COUNT
姓名1, 3, 1
姓名 2, 3, 1
```

我试过了`JOIN`，`UNION`但运气不好，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T20:08:29.870

MySQL 没有*数据透视*函数，因此您必须使用带有`CASE`表达式的聚合函数来转换数据。对于这种类型的计算，您将使用`COUNT`或`SUM`：

```
select name,
  sum(case when value in (2,3) then 1 else 0 end) GRP1_COUNT,
  sum(case when value = 4 then 1 else 0 end) GRP2_COUNT
from yourtable
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c505a/1)

`COUNT`版本：

```
select name,
  count(case when value in (2,3) then VALUE end) GRP1_COUNT,
  count(case when value = 4 then VALUE end) GRP2_COUNT
from yourtable
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c505a/2)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T20:08:18.147

尝试这个

```
SELECT
name,
sum(case when value=2 or value=3 then 1 else 0 end),
sum(case when value=4 then 1 else 0 end)
FROM YourTable
GROUP BY name 
```

# cucumber - 在 Capybara 中检查元素是否存在而不浪费时间

> ID：15556976
> 
> 赞同：12
> 
> 时间：2013-03-21T20:04:25.543
> 
> 标签：cucumber, automated-tests, capybara

我喜欢保持干燥，这就是为什么我想在我的步骤之一中包含以下内容：

```
if first(:css, "#blabla") != nil
    find_by_id(blabla).click
end
find_by_id(....)
.... 
```

这意味着，它将寻找某个元素，如果它存在，它将单击它。如果没有，我不会浪费时间（我的默认等待时间是 20 秒，如果我放在那里`find` 而不是`first`那里，将使用它。

主要问题是我不想在这种情况下检查某个元素时浪费时间，但我也想知道这是否是一个好方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-21T21:01:25.323

我看到您的代码对浏览器进行不必要的第二次查询的问题（您已经`first(:css, "#blabla")`不需要这样做`find_by_id(blabla)`）

我建议您使用一个查询来查找元素：

```
el = first('#blabla')
el.click unless el.nil? 
```

请注意，这里不会浪费时间，因为`first`不会阻塞。

但是，`first`不检查页面上是否没有其他元素。您可以添加`:maximum`以检查它：

```
el = first('#blabla', maximum: 1)
el.click unless el.nil? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T13:53:42.363

当您`#find`用来决定元素是否存在时，您应该减少该调用的等待时间：

```
if page.has_css?('#blabla', wait: 0)
  # Do something
end 
```

但是，在您的特殊情况下，建议的解决方案甚至更好，因为它可以为您节省对同一元素的多次“查找”调用。

# php - 在php中的关联数组中删除具有重复值的数组

> ID：15556980
> 
> 赞同：-1
> 
> 时间：2013-03-21T20:04:51.673
> 
> 标签：php, arrays

我有这个数组

```
$arr[] = array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'email@test.com', 'dm' => 'test');
$arr[] = array('id' => '2', 'fn' => 'Some2', 'ln' => 'Test2', 'email' => 'otheremail@test.com', 'dm' => 'test');
$arr[] = array('id' => '3', 'fn' => 'Some3', 'ln' => 'Test3', 'email' => 'email@test.com', 'dm' => 'test'); 
```

我想删除所有具有重复电子邮件的重复键 $arr[] 以便仅保留以下内容：

```
$arr[] = array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'email@test.com', 'dm' => 'test');
$arr[] = array('id' => '2', 'fn' => 'Some2', 'ln' => 'Test2', 'email' => 'otheremail@test.com', 'dm' => 'test'); 
```

我在这里找到了不同的例子，但没有一个能与我的问题相匹配。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:11:05.613

```
$arr = array(
    array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'email@test.com', 'dm' => 'test'),
    array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'other@test.com', 'dm' => 'test'),
    array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'email@test.com', 'dm' => 'test'),
    array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'email@test.com', 'dm' => 'test'),
    array('id' => '1', 'fn' => 'Some', 'ln' => 'Test', 'email' => 'other@test.com', 'dm' => 'test')
);

$checkEmail = array(); // restore email values

for($i=0;$i<count($arr);$i++){
    if (!in_array($arr[$i]['email'], $checkEmail)){ // check in each array if email value is unique
        print_r($arr[$i]); // if unique then output
    }
    $checkEmail[$i] = $arr[$i]['email']; // save email values
} 
```

**输出 ->**

```
Array ( [id] => 1 [fn] => Some [ln] => Test [email] => email@test.com [dm] => test ) Array ( [id] => 1 [fn] => Some [ln] => Test [email] => other@test.com [dm] => test ) 
```

# yii - 关于 Yii 项目结构的建议？

> ID：15556983
> 
> 赞同：0
> 
> 时间：2013-03-21T20:04:56.960
> 
> 标签：yii, structure, project-structure

我目前正在使用 Yii 框架开发一个 Web 项目。我想知道将所有业务逻辑放在控制器或模型中的好地方（这里的模型就像从数据库表到实际对象的映射）？两者似乎都不对。我想我可能需要在控制器和模型之间增加一个额外的“资产”层，但我不知道如何开始。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T22:52:16.570

一般来说，建议是使用胖模型和瘦控制器。所以你的模型中的业务逻辑。它使您的代码可重用变得容易得多。

更多信息： [http ://www.yiiframework.com/doc/guide/1.1/en/basics.best-practices](http://www.yiiframework.com/doc/guide/1.1/en/basics.best-practices)

如果您有很多自定义逻辑，您可能会拥有处理数据库模型的附加模型的“资产”层。不过取决于您的特定系统……我发现我有时确实以`CFormModel`这种方式使用对象来根据需要从具有一堆不同模型的表单映射到模型。

# android - 如何在android中反向启动计时器？

> ID：15556984
> 
> 赞同：21
> 
> 时间：2013-03-21T20:04:59.607
> 
> 标签：android

```
cmtr.setText(finalTime);
cmtr.setBase(SystemClock.elapsedRealtime());

timetest = SystemClock.elapsedRealtime();
Log.d("SETTIME: ", ""+timetest);
cmtr.start();

eltime = SystemClock.elapsedRealtime();
Log.d("ELapsed: ", ""+eltime); 
```

注意：我想以相反的顺序启动我的计时器。就像我将计时器设置为 10 秒。现在，我想以相反的顺序从 10 秒到 0 秒开始。所以任何人都可以帮助获得这个解决方案。？非常感谢你。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-21T20:34:35.147

你不能，[Chronometer](http://developer.android.com/reference/android/widget/Chronometer.html)小部件只会计数，这就是*它的特定目的*。如果您想倒计时，请使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)（Android SDK 页面包含更新 TextView 的特定示例），或推出您自己的解决方案。

这些类是简单的包装器，可以为您节省一些输入。如果它们不符合您的确切需求，您真的不应该对编写替代实现感到不舒服。

**[更新]**

正如 Ronaldo Bahia 在评论中添加的那样，自 API 24 起，Chronometer 实际上通过[setCountDown](https://developer.android.com/reference/android/widget/Chronometer.html#setCountDown(boolean))方法提供了此功能。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-07-16T07:26:32.373

您不能使用计时器小部件进行倒计时。使用下面的 CountDownTimer 示例，我的倒计时从 01:45 分钟 1 秒 = 1000 开始

```
 CountDownTimer cT =  new CountDownTimer(100000, 1000) {

         public void onTick(long millisUntilFinished) {

                 String v = String.format("%02d", millisUntilFinished/60000);
                 int va = (int)( (millisUntilFinished%60000)/1000);
                 textView.setText("seconds remaining: " +v+":"+String.format("%02d",va));
         }

         public void onFinish() {
             textView.setText("done!");
         }
      };
      cT.start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-26T15:04:45.277

对于那些仍在寻找其他选项和视图的人，我建议使用[Chronometer](https://developer.android.com/reference/android/widget/Chronometer.html)小部件并将 setCountDown (boolean) 设置为 true。

例如，在您的活动或片段中：

```
 view_timer.base = SystemClock.elapsedRealtime() + 10000    
  view_timer.start() 
```

对于布局 .xml 中的小部件：

```
<Chronometer
            android:id="@+id/view_timer"
            android:countDown="true"
            tools:targetApi="24"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-08T11:10:05.570

也可以使用 setCountDown(true); [https://developer.android.com/reference/android/widget/Chronometer.html](https://developer.android.com/reference/android/widget/Chronometer.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-08T07:30:29.500

计时表只计数。但是我们可以用这个小技巧来逆转。

```
chrono.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {
            @Override
            public void onChronometerTick(Chronometer arg0) {
                countUp = (SystemClock.elapsedRealtime() - startTime) / 1000;

                if (countUp % 2 == 0) {
                    chronoRecordingImage.setVisibility(View.VISIBLE);
                } else {
                    chronoRecordingImage.setVisibility(View.INVISIBLE);
                }
                int min = (int) (countUp/60);
                int sec = (int) (countUp%60);

                Utility.printMessage(min+":"+sec);
                int newCount = MAX_TIME - (int) countUp;  // MAIN LOGIC
                String asText = String.format("%02d",(newCount / 60)) + ":"
                        + String.format("%02d", (newCount % 60));

                chrono.setText(asText);
                if (countUp > MAX_TIME) {
                    //time complete
                }
            }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-21T00:04:50.787

```
private static int sec = 60*2;  // this is for 2 for min TODO replace your sec

    public void startTimer(final TextView textView ,int sec) {

    CountDownTimer downTimer= new CountDownTimer(1000 * sec, 1000) {

        public void onTick(long millisUntilFinished) {

            String v = String.format("%02d", millisUntilFinished / 60000);
            int va = (int) ((millisUntilFinished % 60000) / 1000);
            textView.setText(v + ":" + String.format("%02d", va));
        }

        public void onFinish() {
            textView.setText("done!");
        }
    };
    downTimer.start();

} 
```

并称之为：

```
startTimer(tvClock,sec); 
```

# binary - Binary XML file line#11 error inflating class fragment using map

> ID：15556992
> 
> 赞同：0
> 
> 时间：2013-03-21T20:05:16.670
> 
> 标签：binary, fragment, pager

我在寻呼机内使用寻呼机和片段管理器来创建 5 个“桌面”（片段的视图）。在第 5 个桌面中，我有一张带有地理位置的地图（我使用类扩展片段并实现 LocationListener，因为我想在 android 2.2 中使用该应用程序）。我使用此类中的 onCreateView 来创建地图（我使用 switch(currentpage) 在“桌面”之间进行切换）。

当我运行应用程序时，5 个视图分别运行良好，当我在它们之间切换时（从第 1 个到第 5 个），一切运行良好。但是当我返回（并且第 5 个视图被破坏）时，当我尝试再次返回第 5 个视图时，应用程序在 v=inflater.inflate[...] 行中崩溃。

代码是这样的：

```
package com.example.herbalife;

import java.util.List;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewManager;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MyFragment extends Fragment implements LocationListener{

    //Variables
    int mCurrentPage;
    Context ctx;
    Boolean crearMapa = true;

    //Controles
    View v;
    ListView lv;
    LVTodosProductosAdaptador adapterTodosProds;
    LVCarritoAdaptador adapterCarrito;
    ArrayAdapter<String> miAdaptador;

    //controles del mapa
    LatLng coordenadasPos; //almacenar coordenadas pos actual

    LocationManager miLocMgr; //manejador de localización
    LocationProvider locProveedor;//almacenar cada proveedor
    GoogleMap miMapa; //para inflar el fragmen del mapa
    Location miLocation; //para conocer las coordenadas geoPos

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Getting the arguments to the Bundle object */
        Bundle data = getArguments();
        /** Getting integer data of the key current_page from the bundle */
        mCurrentPage = data.getInt("current_page", 0);

    }

    //crea las vistas para cada fragmento
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);
        switch (mCurrentPage) { // cada case representa una vista, y cada uno lleva un inflador diferente para mostrar todos los productos
        case 1:
            v = inflater.inflate(R.layout.fragmentproductos_layout, container,false);
            ctx=v.getContext();

            //referencias a controles en la vista del fragment
            lv = (ListView) v.findViewById(R.id.listView1);

            //control de clicks en el listview
            lv.setOnItemClickListener(new ListView.OnItemClickListener() {

                @SuppressWarnings("deprecation")
                @Override
                public void onItemClick(AdapterView<?> adaptador, View view, int position, long idItem) {
                    try {
                        //Muestra dialog al clicar en un item del listview
                        getActivity().showDialog(position);
                    }
                    catch(Exception e) {
                        Log.e("Ciclo", e.toString());
                    }
                }
            });

            // crear una instancia de nuestro adaptador al que se le pasa la fuente de datos
            adapterTodosProds = new LVTodosProductosAdaptador(v.getContext(), CargaBD.misProductos);
            lv.setAdapter(adapterTodosProds);
            break;
        //para mostrar los objetos del carrito
        case 2:
            v = inflater.inflate(R.layout.fragmentproductos_layout, container, false);

            // referencias a controles en la vista del fragment
            lv = (ListView) v.findViewById(R.id.listView1);

            // crea una instancia de nuestro adaptador al que se le pasa la fuente de datos
            adapterCarrito = new LVCarritoAdaptador(v.getContext(), CargaBD.miCarrito);

            lv.setAdapter(adapterCarrito);
            break;
        //para mostrar el mapa con la geolocalizacion
        case 5:
            v = inflater.inflate(R.layout.activity_localizacion, container,false); //IT BREAKS HERE, WHEN REINSTANTIATING THE VIEW
            ctx=v.getContext();

            //Instanciar el fragmento
            miMapa = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
            //Definir el manajador de localización
            miLocMgr=(LocationManager) ctx.getSystemService(ctx.LOCATION_SERVICE);
            //Determinar que proveedor está disponible y fijar el marcador en la posición
            locProveedor=obtenerProveedores();

            if (locProveedor!=null){ //Si hay algún proveedor disponible
                Toast.makeText(ctx, "El proveedor que se utilizará es "+ locProveedor.getName(),Toast.LENGTH_LONG).show();
                //Se obtiene el objeto Location del proveedor disponible
                miLocation=miLocMgr.getLastKnownLocation(locProveedor.getName());           
            }
            else{
                Toast.makeText(ctx, "No hay ningún proveedor disponible", Toast.LENGTH_LONG).show();
                //Se obtiene el objeto Location del proveedor network
                miLocation=miLocMgr.getLastKnownLocation("network");
            }
            //Si hay una Location válida
            if (miLocation != null) {
                // Calcular coordenadas actuales
                coordenadasPos = calcularPosActual(miLocation);
                // Hacer zoom y marker
                zoomYMarker(miMapa, coordenadasPos);
                /* se actualizará cada minuto y 5 metros de cambio en la localización
                mientras más pequeños sean estos valores más frecuentes serán las actualizaciones */
                /*el método requestLocation... requiere de que la clase tenga implementada la interfaz LocationListener
                 * Pues su último argumento es una instancia de LocationListener.  */
                miLocMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 5, this);
            }
        }
        return v;
    }

    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        switch (mCurrentPage) {
        case 1:
            break;
        case 2:
            super.setUserVisibleHint(isVisibleToUser);
            if(this.isVisible()){
                if(isVisibleToUser){
                    // crea una instancia de nuestro adaptador al que se le pasa la fuente de datos
                    adapterCarrito = new LVCarritoAdaptador(v.getContext(), CargaBD.miCarrito);

                    lv.setAdapter(adapterCarrito);
                }
            }
            break;
        }
    }

    @Override
    public void onDestroyView() {
        // TODO Auto-generated method stub
        super.onDestroyView();
        switch (mCurrentPage) {
        case 5:
            Log.e("Ciclo", "Destruye vista del mapa");
            break;
        }
    }

    /************************************* METODOS PARA USOS DEL MAPA **************************************/

    //Muestra una lista de todos los porveedores
    private LocationProvider obtenerProveedores() {
        LocationProvider elProveedor = null;
        //Obtengo la lista de proveedores actuales
        List<String> proveedores = miLocMgr.getAllProviders();
        //Para cada uno de los proveedores
        for (String proveedor : proveedores) {
            //Obtengo cada uno de los proveedores
            locProveedor = miLocMgr.getProvider(proveedor);
            // Si está activo el GPS y disponible
            if (locProveedor.getName().equals("gps") & miLocMgr.isProviderEnabled(proveedor)) {
                Log.e("Ciclo", "GPS ENABLED");
                elProveedor=locProveedor;
            } 
            else if (locProveedor.getName().equals("network") & miLocMgr.isProviderEnabled(proveedor)) { // Si está activo network
                Log.e("Ciclo", "NETWORK ENABLED");
                elProveedor=locProveedor;
            }
        }
        return elProveedor;     
    }

    //Calcula las corrdenadas actuales
    private LatLng calcularPosActual(Location laLocation){
        Double latitud=laLocation.getLatitude();
        Double longitud=laLocation.getLongitude();
        return new LatLng (latitud,longitud);
    }

    //Muestra la zona con unas coordenadas y dibuja un marker
    private void zoomYMarker(GoogleMap elMapa, LatLng lasCoordenadas){
        elMapa.moveCamera(CameraUpdateFactory.newLatLngZoom(lasCoordenadas,10));
        elMapa.addMarker(new MarkerOptions()
                .position(lasCoordenadas)
                .title("Mi Posicion")
                .snippet("Aquí estoy y me pasa esto")
                .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher))
                .anchor(0.5f, 0.5f));
    }

    //Se ejecuta cuando varía la localización en función de los datos introducidos en miLocMgr.requestLocationUpdates
    @Override
    public void onLocationChanged(Location location) {
        // Calcular coordenadas actuales
        coordenadasPos = calcularPosActual(miLocation);
        miMapa.clear();
        // Hacer zoom y marker
        zoomYMarker(miMapa, coordenadasPos);
    }

    //Se ejecuta cuando se desactiva el proveedor de servicios de localización
    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getActivity(), "Servicio de red de localización desactivado", Toast.LENGTH_SHORT).show();
    }

    //Se ejecuta cuando se activa el proveedor de servicios de localización
    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getActivity(), "Servicio de red de localización activado", Toast.LENGTH_SHORT).show();   
    }

    //Este método debería ejecutarse cuando cambia el estado del proveedor de servicio
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        //status contiene constantes que identifican el estado del servicio
        Toast.makeText(getActivity(), "El estado de la red ha cambiado", Toast.LENGTH_SHORT).show();
    }

} 
```

我收到此错误：

```
03-21 20:59:37.080: E/AndroidRuntime(2022): FATAL EXCEPTION: main
03-21 20:59:37.080: E/AndroidRuntime(2022): android.view.InflateException: Binary XML file line #11: Error inflating class fragment
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at com.example.herbalife.MyFragment.onCreateView(MyFragment.java:108)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.view.ViewPager$3.run(ViewPager.java:237)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.os.Handler.handleCallback(Handler.java:587)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.os.Looper.loop(Looper.java:143)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.app.ActivityThread.main(ActivityThread.java:4914)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at java.lang.reflect.Method.invokeNative(Native Method)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at java.lang.reflect.Method.invoke(Method.java:521)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at dalvik.system.NativeStart.main(Native Method)
03-21 20:59:37.080: E/AndroidRuntime(2022): Caused by: java.lang.IllegalArgumentException: Binary XML file line #11: Duplicate id 0x7f040005, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
03-21 20:59:37.080: E/AndroidRuntime(2022):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
03-21 20:59:37.080: E/AndroidRuntime(2022):     ... 23 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:46:18.937

你检查过每张地图是否有不同的ID吗？我有这个问题，正在寻找解决这个问题的方法，我找到了你的问题。我`CustomFragmentMap`的 id 与我的`com.google.android.gms.maps.SupportMapFragment`检查相同 ActivityView 中的每个 id 都不同。

# javascript - 检测元素何时将获得焦点

> ID：15556998
> 
> 赞同：0
> 
> 时间：2013-03-21T20:05:30.130
> 
> 标签：javascript, jquery, asp.net, focus, radeditor

我有一个带有 Telerik RadEditor（富文本框）的 ASP.NET 页面。在页面中切换时，当用户进入文本框时，焦点会在进入文本区域之前设置为各种工具栏图标。我在一个页面上添加了一些 jQuery，以便在跳出表单上的最后一个单元格时将焦点设置在文本区域上：

```
$('input[type=text][id*=tbCost]').keydown(function (e) {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 9) {    //If TAB key was pressed
        e.preventDefault();
        var editor = $('body').find("<%=RadEditor1.ClientID%>");    //get a reference to RadEditor client object
        editor.setFocus();    //set the focus on the the editor
    }
}); 
```

我正在寻找一种在控件中实现此功能的方法，以便无论它位于哪个页面上，它都能正常工作。例如，在上面的代码中，只有当用户跳出`tbCost`单元格时才会设置焦点。当用户进入工具栏项目时，我希望能够将焦点设置到文本区域。

有什么方法可以检测元素何时*将获得*焦点？我知道我可以看到一个元素*是否有 focus*，但我想不出一种方法来实现这个功能。

谢谢

**解决方案：**

如果将来有人有同样的问题并想要一个例子，这是我使用的代码：

```
 $(document).ready(function () {
    $('.reToolCell').focusin(function () {
        var editor = $('body').find("<%=RadEditor1.ClientID%>");
        editor.setFocus();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:29:58.783

您可能会考虑绑定到工具栏图标上的焦点并将焦点重定向到文本区域。尽管如果用户试图将这些工具集中在标签上以使用它们，这可能会产生意想不到的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:41:44.390

```
 //on focus eventHandler for all your icons that calls a function

  #('.elementtype, class or a generic way of identifying the icons'.onfocus(myFunction(this)) 
```

//该函数获取元素的参数，移动到下一个兄弟元素并设置焦点

```
 myFunction = (element) {
       element.next().focus();
     } 
```