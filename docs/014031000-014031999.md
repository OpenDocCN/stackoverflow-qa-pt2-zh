# StackOverflow 问答 14031000-14031999

# webdriver - 无法在 webdriver 中点击文件上传

> ID：14031004
> 
> 赞同：1
> 
> 时间：2012-12-25T13:20:46.050
> 
> 标签：webdriver

任何人都可以检查[这个](http://www.pdfonline.com/convert-pdf/)html 页面。我无法在此处单击“浏览”按钮。我尝试了以下方法：-

```
//1st approach
>driver.switchTo().frame(0)
>driver.findElement(By.id("File1")).click

//2nd Approach
>(new Actions).moveToElement(..).sendKeys("Keys.ENTER") // with this i could 

//3rd by executing JS in webdriver
>document.findElementById('').value = 'C://.. ' ; 
```

似乎没有任何效果。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:35:30.450

尝试这个

```
driver.switchTo().frame(driver.findElement(By.xpath("//*[contains(@src,'/convert-pdf/default.aspx')]")));
driver.findElement(By.id("File1")).sendKeys("C:\\testFile.xls"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:36:16.843

1.  Your `driver.findElement(By.id("File1")).click` has **`()`** missing at the end.
2.  The page has errors that might result in you not being able to access the `iframe`:

> Unsafe JavaScript attempt to access frame with URL [http://bcldoc2pdflb-1026005913.us-west-1.elb.amazonaws.com/convert-pdf/default.aspx](http://bcldoc2pdflb-1026005913.us-west-1.elb.amazonaws.com/convert-pdf/default.aspx) from frame with URL [http://www.pdfonline.com/convert-pdf/default-b.aspx?utm_expid=127285-27&utm_referrer=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F14031004%2Funable-to-click-file-upload-in-webdriver](http://www.pdfonline.com/convert-pdf/default-b.aspx?utm_expid=127285-27&utm_referrer=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F14031004%2Funable-to-click-file-upload-in-webdriver). Domains, protocols and ports must match.

I've tried manually (through JavaScript Console in browser's dev tools) to get the element, but couldn't get to the iframe:

```
f = document.evaluate("//*[contains(@src,'/convert-pdf/default.aspx')]", document, null, XPathResult.ANY_TYPE, null)
XPathResult
ifr = f.iterateNext()
<iframe src=​"http:​/​/​bcldoc2pdflb-1026005913.us-west-1.elb.amazonaws.com/​convert-pdf/​default.aspx" width=​"460px" height=​"670px" frameborder=​"0">​…​&lt;/iframe>​
ifr.contentDocument
Unsafe JavaScript attempt to access frame with URL http://bcldoc2pdflb-1026005913.us-west-1.elb.amazonaws.com/convert-pdf/default.aspx from frame with URL http://www.pdfonline.com/convert-pdf/default-b.aspx?utm_expid=127285-27&utm_referrer=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F14031004%2Funable-to-click-file-upload-in-webdriver. Domains, protocols and ports must match.
null
d = ifr.contentWindow.document
Unsafe JavaScript attempt to access frame with URL http://bcldoc2pdflb-1026005913.us-west-1.elb.amazonaws.com/convert-pdf/default.aspx from frame with URL http://www.pdfonline.com/convert-pdf/default-b.aspx?utm_expid=127285-27&utm_referrer=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F14031004%2Funable-to-click-file-upload-in-webdriver. Domains, protocols and ports must match. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:47:49.287

框架在 IDE 中没有被识别。可能的方法是使用“AutoIT”来完成。我试过了，它成功了。这是 autoit 的示例代码

`Send("{ENTER}") Sleep(1000) Send("D:\questiontovetri.txt") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{ENTER}") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{TAB}") Sleep(1000) Send("{ENTER}") Sleep(1000)`

要使用 autoIT，您需要下载它。参考“ [http://veera-myseleniumblog.blogspot.com/2011/11/handling-authentication-dialog-box.html](http://veera-myseleniumblog.blogspot.com/2011/11/handling-authentication-dialog-box.html) ”寻求帮助

一旦你转换了你的autoIT脚本，你就可以在java代码中调用exe，比如

`driver.get("http://www.pdfonline.com/convert-pdf/"); driver.findElement(By.xpath("//a[contains(text(),'Upload a File to Convert...')]")).click(); Runtime run = Runtime.getRuntime(); Process pp=run.exec("D:\\blog.exe"); Thread.sleep(5000); driver.findElement(By.xpath("//a[contains(text(),'Download PDF file')]")).click();`

这是有效的，我已经测试过了

# jquery - 如何在 ajax() 之外使用 live() 运行函数？

> ID：14031018
> 
> 赞同：0
> 
> 时间：2012-12-25T13:23:14.470
> 
> 标签：jquery, ajax, live

我想在通过 ajax 加载的 html 上运行 jquery 函数。我该怎么做。请注意，我不能在 $.ajax() 中使用它，因为这个 ajax() 函数已经由系统中的另一个模块管理，我不能挂钩。我尝试了以下方法，但它没有改变通过 ajax 加载的输入字段的值。任何想法？

```
$(document).on("ready", function(){
    run_my_function();
});
function run_my_function(){
    $('selector_on_html_loaded_through_ajax').val('Hi');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:30:08.970

jquery 中有一个伪事件，允许您在任何 jquery 启动、ajax 请求成功时运行代码。可能有更有效的方法，例如在您发出的请求的 ajax 成功处理程序中。

```
$.ajaxSuccess(function () {
    $('selector_on_html_loaded_through_ajax').val('Hi');
});

/// or ///

$.ajax({
    'url': 'http://example.com/this/is/my/request',
    'success': function () {
        $('selector_on_html_loaded_through_ajax').val('Hi');
    }
}); 
```

### 更新：另一种选择

另一种选择是使用 DOM 突变事件。唯一的问题是它们已被弃用。[这个问题](https://stackoverflow.com/questions/3219758/detect-changes-in-the-dom)描述了如何跨平台使用它们。

# mysql - 修改 PDO INSERTS 以增强 lastInsertId 的使用

> ID：14031019
> 
> 赞同：1
> 
> 时间：2012-12-25T13:23:24.527
> 
> 标签：mysql, pdo

我正在使用禁用自动提交的 MySQL PDO。

所以我有以下代码：

```
 try
    {
        $db_connect_handle->beginTransaction();
        $pdo_stmt_obj = self::$db_connect_handle->prepare($query_sql_str);
        $pdo_stmt_obj->execute();
        $db_connect_handle->commit();
    }
    catch (database_exception $e)
    {
        $db_connect_handle->rollBack();
        print_r($e);
    }

    echo $db_connect_handle->lastInsertId(); 
```

`INSERT`查询工作正常。但是，我没有得到`$db_connect_handle->lastInsertId()`. 我在提交之前阅读了我应该使用的 PHP 手册`lastInsertId`，但是我有一个中央查询脚本，我不想在提交事务之前进行任何 SQL 查询分类。

然后我将代码更改为：

```
 try
    {
        $pdo_stmt_obj = self::$db_connect_handle->prepare($query_sql_str.'; COMMIT;');
        $pdo_stmt_obj->execute();
    }
    catch (database_exception $e)
    {
        $db_connect_handle->rollBack();
        print_r($e);
    }

    echo $db_connect_handle->lastInsertId(); 
```

瞧！现在我得到了`$db_connect_handle->lastInsertId()`.

我的问题是，这会影响 的性能，还会影响`INSERT`工作`$db_connect_handle->rollBack()`吗？！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:58:28.053

如果没有事务，则回滚将不起作用。同样在文档中，它说如果没有事务，则 rollBack 抛出异常。

只有一个查询，您已经不需要事务。如果查询失败，数据库中没有任何变化，也意味着没有任何东西可以回滚。因此，不会有任何性能差异。

# html - 在画廊中叠加图像

> ID：14031021
> 
> 赞同：1
> 
> 时间：2012-12-25T13:23:42.197
> 
> 标签：html, css, overlay

我有一个图片库，所有这些我都想在图片上添加一个透明图片。

它实际上适用于一张图像，但我不确定在处理多个图像时如何定位我的透明叠加图像。我正在使用绝对定位，这在使用同一类处理画廊中的多个图像时可能不是最佳选择。

看看我的代码，也许你能比我更懂

```
**css**

    .related-videos{
position:relative;  
}

.related-videos img{
width: 100px; 
height: 100px;
}

.related-videos span{
width:100px;
height:100px;
display: block;
    position:absolute;
    top: 0;
    left: 0;
background: url('../thumbs/overlay.png') no-repeat;
} 
```

**带有一张图片的html**

```
<div class="related-videos">
<h3>Related Videos</h3>
<span></span>
<img src=".jpg" />
</div> 
```

**我目前无法解决多张图片的问题**

```
<div class="related-videos">
<h3>Related Videos</h3>
<span></span>
<img src=".jpg" />
<span></span>
<img src=".jpg" />
<span></span>
<img src=".jpg" />

</div>

.related-videos{
position:relative;  
}

.related-videos img{
width: 100px; 
height: 100px;
}

 .related-videos span{
width:100px;
height:100px;
display: inline;
background: url('../thumbs/overlay.png') no-repeat; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:55:47.510

只需简单地删除`top`and`left`属性并将显示更改为`inline-block`

小提琴：http: [//jsfiddle.net/gamehelp16/yg7fP/](http://jsfiddle.net/gamehelp16/yg7fP/)

您只需要确保您的图像在一行中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:52:30.173

一个简单的解决方案是将您的 s 移动到 HTML 中的`span`s*之后*`img`，并像这样设置它们的样式：

```
.related-videos 跨度{
    宽度：100px；
    高度：100px；
    显示：内联块；
    左边距：-100px；
    背景：url('../thumbs/overlay.png') 不重复；
}
.related-videos img {
    宽度：100px；
    高度：100px；
}

```

[这是它的 jsFiddle](http://jsfiddle.net/bTnZQ/)，其中包含来自 Wikimedia Commons 的随机图像用于演示。即使图像行足够长可以换行，此解决方案也有效。

# windows-phone-7 - 如何获取 Zune 中定义的设备名称？

> ID：14031025
> 
> 赞同：2
> 
> 时间：2012-12-25T13:24:23.710
> 
> 标签：windows-phone-7

在 Zune 中，可以通过 Zune -> 设置 -> 手机 -> 同步选项更改手机名称。例如，我将手机名称更改为“myphone lumia 900”。

我怎样才能得到这个名字？使用`DeviceStatus.DeviceName`它只返回模型，在本例中为“lumia 900”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:19:04.170

恐怕第三方应用程序无法获取该信息。

# c - 测试内存碎片

> ID：14031031
> 
> 赞同：4
> 
> 时间：2012-12-25T13:25:43.793
> 
> 标签：c, memory-management, fragmentation

因此，作为我正在学习的操作系统课程的一部分，我实现了一个内存分配器（就像 C 中的 malloc 一样）。可用空间存储在链表中。

我接下来的问题是：我将如何测试各种分配策略（例如，首次拟合、最佳拟合和最差拟合）。现在我只是迭代预定义的次数，每次分配一个大小为 1-N 字节的块，其中 N 类似于 20000。基本上我分配一些迭代然后我通过释放一些分配的块。在退出之前，我检查了 freelist 并计算了外部碎片。我不确定这是否是要走的路，还是有更好的方法来做到这一点？

为每种策略选择随机块大小的一个问题是，如果分配的块大小不同，则无法真正比​​较它们，对吧？所以替代方案是执行相同的测试，只是现在我在测试每个策略时使用相同的分配大小并释放相同的块。

希望这不会令人困惑:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:22:52.467

这只是一个想法：您可以从实际运行的系统中采样数据，然后将其用作测试数据。然后，您的测试人员只需要读取记录数据的日志文件并重播相同的 alloc()、free() 调用到您的分配器。在实践中实现这一点可能会很棘手，但在使用 Glibc 的 Linux 上，他们有一种官方方法可以为 malloc、realloc 和 free 添加自定义钩子：

[http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html](http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html)

所以基本上我想你可以用钩子构建一个修改过的 glibc，通过 malloc()、realloc() 和 free() 调用记录每个分配请求。使用启用日志的 glibc 运行一些典型程序，并用这些程序做一些典型的事情。尝试以某种方式使其具有代表性——比如运行 Apache，如果您专门这样做是为了测试 Web 服务器的使用情况等。生成的日志应该是对系统“真实”分配行为的合理模拟。为了使测试更准确，您可能应该在其他系统或其他场景中重复记录过程，等等......以使您的采样更具代表性并且不易受到“侥幸”的影响。

对于像 Glibc 这样从 Linux 重建包，一个很好的资源是 Linux from Scratch 项目，[http://www.linuxfromscratch.org/](http://www.linuxfromscratch.org/)。

# jquery - 如何将其更改为数组

> ID：14031036
> 
> 赞同：1
> 
> 时间：2012-12-25T13:26:28.660
> 
> 标签：jquery, ajax

我使用 jQuery`$.post`从 php[from mysql] 文件数据中获取数据，我们得到的数据如下所示：

```
data = [['12-25-2012',62],['12-26-2012',60]] 
```

当我将它分配给变量时，它存储为字符串，如下所示：

```
v1 = "[['12-25-2012',62],['12-26-2012',60]]"; [v1 = data] 
```

但我要求它喜欢这样：

```
v2 = [['12-25-2012',62],['12-26-2012',60]]; 
```

不是作为字符串。

为了更清楚，您可以通过 alert v1 & v2 来理解

当你提醒`v2`你得到`12-25-2012,62,12-26-2012,60` 当你提醒`v1`你得到`[['12-25-2012',62],['12-26-2012',60]]`

有区别，我想`v1`看起来像`v2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:50:47.490

[尝试根据$.post](http://api.jquery.com/jQuery.post/)`$.post`的文档指定您希望在 jQuery 函数中获取的数据类型

让 php 准确地回显这个

```
$data = "[['12-25-2012',62],['12-26-2012',60]]";
exit(0); 
```

和

```
$.post("test.php", { name: "John", time: "2pm" },
 function(data) {
   process(data);
 }, 
 "JSON" //this will tell your calling post that the return data is to be considered JSON
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:33:15.390

使用[`$.ajax`](http://api.jquery.com/jquery.ajax/)JSON 并将其设置为预期的响应类型或解析字符串

```
JSON.parse(v1); 
```

正如@m90 指出的那样，单引号在 JSON 中无效。我错过了。在解析字符串之前，您必须更改 php 文件以响应正确的 JSON 或用双引号替换单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:39:49.413

AJAX 只能传输字符串，因此您必须自己处理转换（在 PHP 中转换为字符串并返回到 JS 中的实际数据）（这意味着您不能像示例中那样传递数据：）`data = [['12-25-2012',62],['12-26-2012',60]]`。AJAX 调用中最常用的格式是 JSON。然而，JSON 仅使用双引号，因此您尝试传入的数据被视为无效。

我建议您对数据使用正确的 JSON 格式（使用双引号），以便您可以`JSON.parse`用于这项工作，但如果您对数据的格式感到困惑，您将不得不亲自动手并使用类似的东西一个函数构造函数（或者，更糟糕的使用`eval`）：

```
var v1 = "[['12-25-2012',62],['12-26-2012',60]]"
var a = new Function("return " + v1); //constructs a new function from the given string, in this case returning the passed array
var data = a();

console.log(data); 
```

在 MDN阅读有关**[在 JavaScript 中使用 JSON](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON)**以及**[为什么不应该使用 eval](https://stackoverflow.com/questions/646597/eval-is-evil-so-what-should-i-use-instead)**之类的内容。

PHP 还有一个非常方便的[`json_encode`](http://php.net/manual/en/function.json-encode.php)方法，您可以传递一个数组，它会自动转换为有效的 JSON。

如果您只需要一个由逗号分隔的对组成的简单字符串，为什么不在 PHP 中生成它并像这样将其传递给 JavaScript？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T13:43:35.813

也许你可以试试这个，虽然不确定它是否会起作用：

```
v1=eval(data); 
```

请注意[eval() 是邪恶的](https://stackoverflow.com/questions/646597/eval-is-evil-so-what-should-i-use-instead)。另外我**强烈**建议您更改 php 代码以其他格式发送它，然后您可以将它们附加到 javascript 数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T13:50:34.267

用这个 ..

```
 var x= eval(v1);
     alert(x); 
```

# vb.net - 如何从 VB 运行带参数的 DOS 命令

> ID：14031037
> 
> 赞同：0
> 
> 时间：2012-12-25T13:26:38.910
> 
> 标签：vb.net

我想从 VB 运行 dos 命令，我尝试了我的方式，但没有成功，因为我在文本框中从用户那里获取数据。TextBox1 和 TextBox2 .... 所以请帮忙

```
 Label1.Text = "Ready"
    Dim str As String
    str = "netsh wlan set hostednetwork mode=allow ssid=val(TextBox1.Text) key=Val(TextBox2.Text)"
    Process.Start("cmd.exe", str) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:02:30.930

我使用了 shell 命令并且它起作用了：`shell()`

# javascript - 是否可以在 C# 上使用带有对话框按钮的服务器端

> ID：14031044
> 
> 赞同：0
> 
> 时间：2012-12-25T13:27:25.557
> 
> 标签：javascript, .net, dialog

我想要做的是弹出一个 div，其中包含两个用于反馈的按钮。一个按钮用于取消，另一个按钮用于提交（使用服务器端）。

```
HTML

<div id="message" style="display:none">
     <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/Images/ClearButton.png"
     onclick="ImageButton1_Click1"/>
</div>

JAVASCRIPT

<script type="text/javascript">
    $(document).ready(function () {
        /*$('div#message').dialog({ autoOpen: false })*/
        $('#hlfeedback').click(function () {
            $('div#message').dialog({
                width: 608,
                height: 750,
                modal: true,
                overlay: { backgroundColor: "#000", opacity: 0.5 },
                buttons: {},
                open: function (event, ui) {
                    $(".ui-dialog-titlebar-close").hide();
                }
            });
        });
        $('#ImageButton1').click(function () {
            $('div#message').dialog({
                close: function (event, ui) { $(this).close(); }
            });
        });
    })</script>

Server Side

protected void ImageButton1_Click1(object sender, ImageClickEventArgs e)
{
    //Not working 
} 
```

服务器端根本不工作。以及使用 javascript 的关闭按钮。我想使用服务器端的按钮向数据库提交一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:27:42.030

要使服务器端事件正常工作，您需要将对话框作为标签的子`<form runat='server'>`标签（通常在每个 aspx 页面上）。

使用 jQuery 创建对话框时，它不会自动添加为 的子级`form`，因此不会调用您的服务器端代码。

这可以很容易地修复，添加：`$(this).parent().appendTo("form");` 到对话框的打开功能，例如：

```
$('div#message').dialog({
        width: 608,
        height: 750,
        modal: true,
        overlay: { backgroundColor: "#000", opacity: 0.5 },
        buttons: {},
        open: function (event, ui) {
            $(this).parent().appendTo("form");
            $(".ui-dialog-titlebar-close").hide();
        }
}); 
```

# android - 具有不同背景颜色的微调器

> ID：14031047
> 
> 赞同：0
> 
> 时间：2012-12-25T13:27:41.623
> 
> 标签：android, colors, spinner

我是 Android 编程的新手。我正在尝试制作一个其项目具有不同背景颜色的微调器，但我找不到任何可以理解的信息。你能给我写一个详细解释的解决方案吗？

这是我的附加课程：

```
public class Addcourse extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addcourse);

Spinner spinner = (Spinner) findViewById(R.id.spinner1);

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.color_array, android.R.layout.simple_spinner_item);

adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapter);    
} 
```

我在 colors.xml 中有颜色和我的微调器：

```
<Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:34:28.180

您需要提供自己的 ListAdapter，例如 ArrayAdapter 的子类，它返回具有背景颜色集的视图。有关更改文本颜色的示例，请参见此处：

[android更改微调器中项目的文本颜色](https://stackoverflow.com/questions/5836254/android-change-text-color-of-items-in-spinner?rq=1)

您可以改为调用 super 并设置背景颜色并返回它。

```
ArrayAdapter<CharSequence> adapter = new ArrayAdapter(this, R.array.color_array, android.R.layout.simple_spinner_item) {
  public View getDropDownView(int position, View convertView, ViewGroup parent){
    View view = super.getDropwDownView(position, convertView, parent);
    int color = 0xFFFFFF; //white or use Color.argb(...)
    //change color according to position the way you want
    view.setBackgroundColor(color);
    return view;
  }
}; 
```

# ios - 如何在 iOS 中清理系统内存？

> ID：14031049
> 
> 赞同：-1
> 
> 时间：2012-12-25T13:27:46.797
> 
> 标签：ios, memory, bsd, mach

在 MacOs 中，您可以通过 Activity Monitor 查看空闲、有线、活动、非活动的内存状态。而且，您可以使用“purge”之类的命令行来清除内存。

那么，我可以在 iOS 中执行此操作吗？我不熟悉马赫/BSD。还有，其他人可以帮助我吗？

在 Mac Osx 中，我可以使用以下方法将非活动状态转换为空闲状态。

```
char command_line[256];
sprintf(command_line, "purge");
FILE *fp = popen(command_line, "r");
if (fp) {
    pclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:59:48.840

当您的应用程序分配内存时，iOS 通过向其他应用程序发出特殊消息（内存警告）和卸载其他应用程序来自动释放请求的内存量。如果您的应用程序请求太多内存 - 它会被 iOS 以特殊的崩溃类型卸载。

在 iOS 平台上，无法通过用户请求清除内存。按照公共 api 条款的顺序。

# javascript - 类标签不要删除

> ID：14031050
> 
> 赞同：0
> 
> 时间：2012-12-25T13:27:50.483
> 
> 标签：javascript, jquery, html

我有 HTML 菜单结构。具有以下内容：

```
<div id="footer-menu">
  <ul>
    <li><a id="menu-1" href="site.com/1"></a></li>
    <li><a id="menu-2" href="site.com/2"></a></li>
    <li><a id="menu-3" href="site.com/3"></a></li>
    <li><a id="menu-4" href="site.com/4"></a></li>
    <li><a id="menu-5" href="site.com/5"></a></li>
  </ul>
</div> 
```

我想在活动菜单上添加活动类。我的 JS：

```
$(function() {
    $('#footer-menu li a').click(function(e) {
        // you usually want to prevent default for handling link clicks,
        // otherwise the browser follows the href (if that's intended skip this)
        e.preventDefault();

        $('#footer-menu li a').not(this).removeClass('active');
        $(this).addClass('active');
    });
}); 
```

这个函数添加活动类，OK。

```
<li><a id="menu" href="site.com" class="active"><a> 
```

但是当点击另一个链接时，不要删除`class`之前的标签。

```
<li><a id="menu" href="site.com" class><a> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:35:27.607

您不需要删除“类”属性。浏览器调试器向您显示它是因为它存在，但只要它没有类**值**“活动”，它就不会伤害任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:33:58.290

首先使您的 HTML 标记有效，因为它们具有重复的 ID。
你可以试试这个

```
$('#footer-menu a').click(function(){
     $('#footer-menu a').removeClass("active");
     $(this).addClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:04:36.620

```
<div id="footer-menu">
<ul>
<li><a id="menu" href="#"></a></li>
<li><a id="menu" href="#"></a></li>
<li><a id="menu" href="#"></a></li>
<li><a id="menu" href="#"></a></li>
<li><a id="menu" href="#"></a></li>
</ul>
</div> 
```

jQuery代码：

```
$(function() {
    $('#footer-menu li a').click(function(e) {
        e.preventDefault();
        $('#footer-menu li a').each( function() {
        $(this).removeClass('active');
        });
        $(this).addClass('active');
    });
});​ 
```

[http://jsfiddle.net/aApYZ/1/](http://jsfiddle.net/aApYZ/1/)

# ruby - 了解 Ruby 中 Enumerable 上的 find 函数

> ID：14031051
> 
> 赞同：2
> 
> 时间：2012-12-25T13:28:10.377
> 
> 标签：ruby, enumerable

我正在阅读 Andre Ben Hanou 的“Practical Ruby for System Administration”，它有一个单行程序，列出了一个目录中大小大于 1KB 的所有文件，然后按修改日期排序。

```
ruby -e 'puts Dir["*"].find { |f| File.size(f) > 1024 }.sort_by{|f| File.mtime(f)}' 
```

我认为它应该`select`代替`find`.

根据文档`find`，它返回块不为假的第一个。因此，`find`在任何情况下都不会返回文件列表。就像书中的第 19 页，我对 Ruby 完全陌生，我认为作者是错误的，因为书中的命令已经给了我一个错误。

```
shadyabhi@archlinux /tmp $ ruby -e 'puts Dir["*"].find { |f| File.size(f) > 1024 }.sort_by{|f| File.mtime(f)}'
-e:1:in `<main>': undefined method `sort_by' for "mysql-security-excerpt-5.1-en.pdf":String (NoMethodError)
shadyabhi@archlinux /tmp $ 
```

任何人都可以确认作者是错误的还是我只是愚蠢的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:38:44.200

你是对的，它应该是`.select`（或它的 alias `.find_all`，这可能是这个错误的原因）。

在这种情况下，为每个对象评估块，这里有一个教程： [http ://www.tutorialspoint.com/ruby/ruby_blocks.htm](http://www.tutorialspoint.com/ruby/ruby_blocks.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:37:48.943

> 列出**所有**文件

是的，作者错了，你是对的。应该是`.select`，不是`.find`。

# log4j - 调试 jboss-log4j.xml 中出现的错误

> ID：14031055
> 
> 赞同：0
> 
> 时间：2012-12-25T13:29:50.737
> 
> 标签：log4j, jboss5.x

在哪里可以找到在配置过程中可能发生的任何错误`jboss-log4j.xml`？

错误包括输入 for`appender`但不是 for的简单输入错误`category name`。

我面临一个问题，日志没有写入指定的文件名，而是写入服务器的`server.log`. 所以，我想调试出错的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:49:06.317

这只是 log4j。因此，例如， -Dlog4j.debug=true 将为您溢出一些信息。有关更多详细信息，请参阅 log4j 文档。

# windows - Perl 控制台窗口 - 如何使其不可关闭？

> ID：14031057
> 
> 赞同：3
> 
> 时间：2012-12-25T13:30:05.820
> 
> 标签：windows, perl, windows-console

我想知道在控制台中使用 Perl 时是否有任何方法可以隐藏关闭按钮或至少使其不可点击。我知道在使用 GUI 时这是可能的，但我需要制作一个基于控制台的应用程序，并且不希望用户故意关闭它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T17:43:04.283

```
use strict;
use Win32::Console::ANSI qw/ SetCloseButton /;

$SIG{INT}='IGNORE';   # no Ctrl-C interrupt
SetCloseButton(0);    # no close button 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T14:03:20.710

我认为您不能阻止用户关闭 Windows 命令提示符窗口。您不仅需要隐藏关闭按钮，而且还必须隐藏相关的系统菜单项、上下文菜单项（取决于 Windows 的风格），并捕获`Alt + F4`键盘快捷键。

如果您可以控制整个端到端流程，您*可以*通过隐藏控制台窗口、捕获输出并将其发送到您创建的窗口（当然没有关闭功能）来做一些聪明的事情。

否则，您将不得不相信您的用户是大男孩和大女孩，并且不会关闭窗口。

# windows-8 - 如何去锁屏windows 8模拟器？

> ID：14031063
> 
> 赞同：3
> 
> 时间：2012-12-25T13:31:32.077
> 
> 标签：windows-8, visual-studio-2012, lockscreen

我正在尝试开发一个使用锁屏通知的小型应用程序。

我正在运行 Windows 8 模拟器，但我试图进入锁定屏幕但没有成功。

帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:07:34.553

锁定的键盘快捷键是 Windows 键 + L。在模拟器中尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:44:30.970

不幸的是，锁定屏幕和通知 API（toast、tile 和徽章）在 Windows 8 模拟器中不起作用。要测试和调试，请使用“本地机器”作为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:07:57.090

我所做的是从我的笔记本电脑运行远程桌面并连接到我的台式机。在桌面上，实际的监视器将显示当前的锁屏。然后从我的远程桌面会话中，我可以使用我的应用程序并从主监视器观看真正的锁屏。

这有点像黑客，但它奏效了。我的锁屏应用程序会更改图像，因此能够轻松看到它对我来说有很大的不同。

# r - 使用 reshape 将数据从宽格式转换为长格式

> ID：14031067
> 
> 赞同：1
> 
> 时间：2012-12-25T13:31:57.287
> 
> 标签：r, dataframe, reshape

我有一个需要更改为长格式的宽格式 csv 文件。我刚刚给出了前 3 行。

```
CODEA   C45 ragek   ra80    ra98    ... Obese14 Overweight14 Obese21 hibp14 hibp21 Overweight21
1   1   NA  3   4   1   NA  NA  NA  NA  NA  NA      NA  NA
2   3   2   3   3   1   0   0   0   0   1   0   0   0
3   4   2   3   6   1   NA  NA  NA  NA  NA  NA  NA  NA 
```

这样下去。`Obese 14 (Yes/No); Overweight(yes/no)`等等

```
> names(Copy.of.BP_2)

 [1] "CODEA"  "C45"                     "ragek"                   "ra80"              
 [5] "ra98"   "CBCLAggressionAt1410"    "CBCLInternalisingAt1410" "Obese14"              
 [9] "Overweight14"   "Overweight21"    "Obese21"                 "hibp14"               
[13] "hibp21" 
```

它有 6898 个观测值和 13 个变量

我正在尝试以堆叠格式组织这些数据；我认为以下一个将是一个不错的选择。我不确定如何组合`obese`和分类，`overweight`因为原始长版本有`obese14`、`overweight14`和4 个不同的类别。`obese 21``overweight21`

```
CODEA ...  time         Obese        Overweight      HiBP

           14 
           21
           14
           21 ... etc 
```

我给出的语法为：

```
BP.stack1=reshape(Copy.of.BP_2, 
   timevar="time",direction="long",
   varying=list(names(Copy.of.BP_2[8:13]),
   v.names="Obese","Overweight","HiBP",idvar=c("CODEA") 
```

它似乎不起作用，它给出一个`+`标志并等待进一步的命令。

我应该使用`melt`和`cast`吗？我阅读了`reshape`包装手册，但无法理解。

**编辑**：问题重组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T16:43:27.543

坚持使用基础 R `reshape()`，请尝试以下操作。

我*认为*我已经使用以下内容重新创建了您的示例数据：

```
Copy.of.BP_2 <- 
structure(list(CODEA = c(1, 3, 4), C45 = c(NA, 2, 2), ragek = c(3, 
3, 3), ra80 = c(4, 3, 6), ra98 = c(1, 1, 1), CBCLAggressionAt1410 = c(NA, 
0, NA), CBCLInternalisingAt1410 = c(NA, 0, NA), Obese14 = c(NA, 
0, NA), Overweight14 = c(NA, 0, NA), Overweight21 = c(NA, 1, 
NA), Obese21 = c(NA, 0, NA), hibp14 = c(NA, 0, NA), hibp21 = c(NA, 
0, NA)), .Names = c("CODEA", "C45", "ragek", "ra80", "ra98", 
"CBCLAggressionAt1410", "CBCLInternalisingAt1410", "Obese14", 
"Overweight14", "Overweight21", "Obese21", "hibp14", "hibp21"
), row.names = c(NA, -3L), class = "data.frame")

Copy.of.BP_2
#   CODEA C45 ragek ra80 ra98 CBCLAggressionAt1410 CBCLInternalisingAt1410
# 1     1  NA     3    4    1                   NA                      NA
# 2     3   2     3    3    1                    0                       0
# 3     4   2     3    6    1                   NA                      NA
#   Obese14 Overweight14 Overweight21 Obese21 hibp14 hibp21
# 1      NA           NA           NA      NA     NA     NA
# 2       0            0            1       0      0      0
# 3      NA           NA           NA      NA     NA     NA 
```

首先，为方便起见，让我们创建一个度量变量的向量——我们想要从宽格式到长格式“堆叠”的变量。

```
measurevars <- names(Copy.of.BP_2)[grepl("Obese|Overweight|hibp", 
                                         names(Copy.of.BP_2))] 
```

接下来，使用`reshape()`，指定方向、标识变量以及哪些变量随时间“变化”（`measurevars`，从上面）。

```
BP_2_long <- reshape(Copy.of.BP_2, direction = "long", idvar="CODEA",
                     varying = measurevars, sep = "")
BP_2_long
#      CODEA C45 ragek ra80 ra98 CBCLAggressionAt1410 CBCLInternalisingAt1410
# 1.14     1  NA     3    4    1                   NA                      NA
# 3.14     3   2     3    3    1                    0                       0
# 4.14     4   2     3    6    1                   NA                      NA
# 1.21     1  NA     3    4    1                   NA                      NA
# 3.21     3   2     3    3    1                    0                       0
# 4.21     4   2     3    6    1                   NA                      NA
#      time Obese Overweight hibp
# 1.14   14    NA         NA   NA
# 3.14   14     0          0    0
# 4.14   14    NA         NA   NA
# 1.21   21    NA         NA   NA
# 3.21   21     0          1    0
# 4.21   21    NA         NA   NA 
```

* * *

如果您只对 id 列和 measure 列感兴趣，您还可以在命令中添加一个`drop`参数：`reshape()`

```
BP_2_long_2 <- reshape(
  Copy.of.BP_2, direction = "long", idvar="CODEA",
  varying = measurevars, sep = "",
  drop = !names(Copy.of.BP_2) %in% c(measurevars, "CODEA"))
BP_2_long_2
#      CODEA time Obese Overweight hibp
# 1.14     1   14    NA         NA   NA
# 3.14     3   14     0          0    0
# 4.14     4   14    NA         NA   NA
# 1.21     1   21    NA         NA   NA
# 3.21     3   21     0          1    0
# 4.21     4   21    NA         NA   NA 
```

### 更新：为什么您的代码不起作用

这是您尝试过的内容的逐个参数细分，并附有有关如何尝试修复它的评论。

```
BP.stack1 = 
reshape(Copy.of.BP_2,                    # Fine
timevar="time",                          # Fine
direction="long",                        # Fine
varying=list(names(Copy.of.BP_2)[8:13]), # Wrong. Use "varying = 8:13" instead
v.names="Obese","Overweight","HiBP",     # Wrong. This needs to be in c()
idvar=c("CODEA")                         # Almost... missing your closing ")" 
```

因此，要获得完整的工作命令：

```
BP.stack1 = reshape(
  Copy.of.BP_2, 
  timevar="time", 
  direction="long", 
  varying=8:13, 
  v.names=c("Obese", "Overweight", "HiBP"),
  idvar=c("CODEA")) 
```

我通常尽量不要过多地依赖列号，因为与要重命名的列相比，这些列更有可能被重新排列。因此，我使用`grepl()`根据某种模式匹配名称。

# qt - QML如何将文本光标放在TextEdit元素的末尾

> ID：14031070
> 
> 赞同：6
> 
> 时间：2012-12-25T13:32:15.760
> 
> 标签：qt, qt4, qml, qt-quick

我有一个 QML`TextEdit`元素，我计划附加一些文本并将光标放在末尾。我的方法：

```
import QtQuick 1.1

Rectangle {
    color: "black"
    anchors.fill: parent
    focus: false

    TextEdit {
        id: txtCommands

        color: "lightGreen"
        anchors.fill: parent
        textFormat: TextEdit.RichText
        wrapMode: TextEdit.WordWrap

        font.family: "Consolas"
        font.pixelSize: 15
        focus: true

        MouseArea {
            anchors.fill: parent
            focus: false
        }

        Keys.onPressed: {
            console.log(event.text)

            switch (event.key) {
            case 16777234: // LEFT
            case 16777235: // UP
            case 16777237: // DOWN
            case 16777236: // RIGHT
                event.accepted = true
                break;

            case 16777220:  // Enter
                txtCommands.text = txtCommands.text + ">: "
                txtCommands.selectAll()
                txtCommands.cursorPosition = txtCommands.text.length
                break;
            }
        }
    }
} 
```

但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:21:53.377

1.  设置`textFormat`为`TextEdit.PlainText`因为你有很多不可见的 html 代码，否则。
2.  以下代码适用于我。

    ```
    Keys.onReturnPressed: {
        event.accepted = true
        txtCommands.text = txtCommands.text + ">: "
        txtCommands.cursorPosition = txtCommands.text.length
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-25T21:59:11.943

如果您的 TextEdit 不是纯文本模式`textFormat: TextEdit.PlainText`，而是设置为`textFormat: TextEdit.RichText`，那么
`txtCommands.text.length`将包括所有不可见的 html/rtf 格式标记内容的长度。

最简单的解决方案是使用`txtCommands.length`. 此属性仅给出可见字符的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-14T08:25:27.777

1.  创建一个字符串`temp`变量。
2.  `temp= TextEdit.getText(0, TextEdit.length)`
3.  `TextEdit.cursuorPosition += temp.length`

# python - Python简单打印错误

> ID：14031074
> 
> 赞同：-1
> 
> 时间：2012-12-25T13:33:23.533
> 
> 标签：python

只是这样做`print "Hello world"` 我得到这个错误：

> SyntaxError：无效的语法

然而，我正在使用 Windows 的 Python GUI。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T13:34:30.340

该语法在 Python 3 中不再有效。

```
 File "prog.py", line 1
    print "Hello world"
                      ^
SyntaxError: invalid syntax 
```

[ideone](http://ideone.com/bEVzfe)

在**Python 2** `print`中是一个关键字，您尝试的代码是正确的。

```
# Python 2
print "Hello world" 
```

在**Python 3** `print`中是一个函数，您的代码不再有效。正确的语法如下：

```
# Python 3
print("Hello world!") 
```

**有关的**

*   [Python 3.0 的新特性](http://docs.python.org/3.0/whatsnew/3.0.html)

# c - c - 将指针传递给带有 void* 变量参数的函数

> ID：14031081
> 
> 赞同：1
> 
> 时间：2012-12-25T13:33:45.697
> 
> 标签：c

我想传递一个指向变量的指针。有时它是一个整数，有时可能是一个字符。在下面的示例中，我将指针传递`p`给`CreateObject`但是当我尝试检索指针指向的变量的值时，我得到了一个尴尬的结果：

```
int i =0;
int *p = malloc(sizeof(int));
*p = i;

ObjectP object = CreateObject(p); 
```

假设我想将其转换回 int 并显示它：

```
void CreateObject(void *key)
{
   printf("%d\n", (int)key);
} 
```

我得到：160637064 而不是 0。我得到的是什么而不是我之前分配的整数以及如何检索它而不是当前值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T13:35:31.580

这：

```
(int) key 
```

不是取消引用指针来访问它指向的数据，而是将指针值（地址）本身重新解释为整数。

你需要：

```
printf("%d\n", *(int *) key); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T13:35:53.823

您正在对一个指向整数的指针进行类型转换。这意味着您只需获取地址。毕竟，指针只是一个地址。

您可能想要取消引用指针而不是强制转换它。`*(int*)key`会这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T13:36:24.050

您正在打印指针，即。地址，而不是它指向的值。

使用它来打印值：

```
void CreateObject(void *key)
{
   printf("%d\n", *(int*)key);
} 
```

# list - 通过连接原子来统一不同长度的列表

> ID：14031084
> 
> 赞同：2
> 
> 时间：2012-12-25T13:34:05.733
> 
> 标签：list, prolog, wildcard, matching, dcg

考虑以下列表：

> [我的名字是杰克鲍尔]

我想将其统一为以下模式：

> [我的，姓名，是，姓名]

这样变量 Name 最后的值就是“jack baur”。该变量在这里用作某种通配符，应该与未知数量的原子/列表成员统一。

**重要的：**

*   变量/通配符并不总是在最后
*   可能有多个变量/通配符

目前我有这样的事情：

```
rule([my,name,is,Name],[hello,Name]).

% Sentence is a list (e.g. [my,name,is,jack,baur]
answer(Sentence,Response) :-
    rule(Sentence,ResponseList),
    atomic_list_concat(ResponseList,' ',Response). 
```

显然，这只适用于`Name`恰好是一个词，而不是两个词。

我将如何在 Prolog 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:28:01.237

这里有 DCG 的可能性。挺干净的，我觉得

```
list(L) --> {length(L, _)}, L.

rule(R) -->
    [my, name, is], list(Name),
    [and, i, live, in], list(Country),
    {flatten([hello, Name, of, Country],R)}.

rule([hello|Name]) -->
    [my, name, is], list(Name) .

answer(Sentence, Response) :-
    phrase(rule(Response), Sentence), !. 
```

接着就，随即

```
?- answer([my, name, is, bill, the, kid, and, i, live, in, new, york],R).
R = [hello, bill, the, kid, of, new, york]. 
```

这里的基本产生是 list//1，它匹配*任何*确定长度的标记列表。

注意：应避免 A、B 都未`list(A),list(B),`绑定*。*如果中间有代币也没关系，比如`list(A),[and],list(B),`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:08:21.613

您需要自定义统一算法，例如：

```
unify([], []).
unify([X|L], R) :-
    (var(X) ->
        % unify the variable X with some prefix of R
        append(X, Tail, R),
    ;
        R = [X|Tail],
    ),
    unify(L, Tail). 
```

用法：

```
1 ?- unify([i, am, a, Profession, and, i, Verb, it],
           [i, am, a, prolog, programmer, and, i, like, it]).
Profession = [prolog, programmer],
Verb = [like]. 
```

`L`为了效率，该算法只允许变量出现。我将把原子粘贴在一起的问题留给你，因为你似乎已经解决了这个问题。

请注意，当前版本允许变量匹配零个原子，但您可以轻松添加约束来禁止它。

# android - 找不到创建的文件

> ID：14031089
> 
> 赞同：0
> 
> 时间：2012-12-25T13:34:30.447
> 
> 标签：android, file

我正在为 Android 编写我的小应用程序。我正在尝试创建文件。这是一个代码片段：

```
final String TESTSTRING = new String("Hello Android");                 
FileOutputStream fOut = openFileOutput("samplefile.txt",Context.MODE_WORLD_READABLE);
OutputStreamWriter osw = new OutputStreamWriter(fOut); 
osw.write(TESTSTRING);
osw.flush();
osw.close();

FileInputStream fIn = openFileInput("samplefile.txt");
InputStreamReader isr = new InputStreamReader(fIn);
char[] inputBuffer = new char[TESTSTRING.length()];

isr.read(inputBuffer);

String readString = new String(inputBuffer);

boolean isTheSame = TESTSTRING.equals(readString);

if(isTheSame) {
    TextView mLat=(TextView) findViewById(R.id.textView1);
    mLat.setText(String.valueOf(isTheSame));     
} 
```

我无法使用文件管理器找到这个创建的 samplefile.txt。谁能告诉我应用程序正在编写的路径？

好的，现在我有这个：

```
String pathToExternalStorage = Environment.getExternalStorageDirectory().toString();
     File appDirectory = new File(pathToExternalStorage + "/" + "testowa", "new_file.txt");
     try{
         OutputStream os = new FileOutputStream(appDirectory);
         os.write(pathToExternalStorage.getBytes());
         os.flush();
         os.close();
     }
     catch(IOException e)
     {

     } 
```

OutputStream os = new FileOutputStream(appDirectory) 上引发异常；找不到原因。我修改了具有权限的清单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T21:18:51.057

该文件位于 /data/data/com.yourpackagename/files/filename.txt 中，除非设备已植根，否则该文件是隐藏的。您可以通过从创建文件的目录复制文件来访问该文件。

从命令行：

复制文件

```
 adb -d shell 
    run-as com.yourpackagename 
    cat /data/data/com.yourpackagename/files/filename.txt > /sdcard/filename.txt 
```

或者对于 SQLite 数据库

```
 cat /data/data/com.yourpackagename/databases/dbname.db > /sdcard/dbname.sqlite 
```

此解决方案无需root设备即可工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:42:03.127

您可以获取使用`openFileOutput(name)`using创建的文件的路径[`getFileStreamPath(name)`](http://developer.android.com/reference/android/content/ContextWrapper.html#getFileStreamPath%28java.lang.String%29)。但文件管理器应用程序需要 root 权限才能查看此路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T13:42:28.980

它创建于`/data/data/your.package.name/files`. 然而，这个目录对文件管理器是不可见的（除非他们有 root 权限）。

# c# - 使用包含半透明部分的图像作为表单的背景？

> ID：14031092
> 
> 赞同：0
> 
> 时间：2012-12-25T13:34:58.090
> 
> 标签：c#, .net, vb.net, drawing

我有这个问题已经有4年了。我一直试图创造一个圆形的形状。边缘总是乱七八糟的。然后我尝试创建所需形状的图像并将其放入图片框并将表单的背景颜色设置为绿色。然后我将表单的透明度键选择为绿色。再次没有运气......现在我有这个图像：

![图片](../Images/5fa9d3dae561c2735c110f76d3165045.png)

这是我尝试将其用作“表单”时总是得到的。

![在此处输入图像描述](../Images/f8c2fd132970344b611f41c26bacf2be.png)

我不想放弃，因为我知道这不是不可能的，我总是看到，例如游戏的选项窗口，有那种图像作为一种形式。那么，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:51:24.933

啊，我也为此苦苦挣扎了一段时间，经过大量搜索，我终于找到了答案。你正在寻找的是所谓的“分层窗口”。它们不使用 Paint 事件进行绘制，但您可以使用 UpdateLayeredWindow。

网上没有那么多可用的文档（或者至少不是你想要完成的），但如果你需要更多信息，你可以随时PM我（如果在stackoverflow上可以的话，我是新来的......）

# android - 从 Listactivity 到 Listfragment

> ID：14031093
> 
> 赞同：1
> 
> 时间：2012-12-25T13:35:01.953
> 
> 标签：android, listview, android-asynctask, android-fragments

在过去的几天里，我一直在尝试从当前的 listactivity 到 listfragment。我通过一个很好的 ArrayAdapter 将数据加载到我的 Listactivity 中。数据首先从远程服务器收集，然后插入 SQLite 数据库。呈现数据时，我将数据加载到自定义 BaseAdapter 中。所有这一切都很好。我真的很想通过使用 listfragments 来更新我的 UI。这尤其是因为我有很多使用平板电脑的客户。

我知道如何为平板电脑创建更大的视图，但希望我的应用程序能够像在 iPad 中一样呈现。据我了解，可以使用片段来做到这一点。到目前为止，我已经设法让 listfragments 使用静态数据。问题是我不知道如何将数组适配器中存在的数据加载到 listfragment 中。

我使用异步任务在列表视图中检索、存储和呈现数据。

谁能帮我将异步任务中的数据加载到列表片段中？目前，我将所有内容加载到列表活动中的列表视图中。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-07T08:58:16.350

以下是基本场景的分步指南：

1）创建一个新的 fragment.java 文件，其中包含一个片段的超级简单实现。

```
package com.a;

import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

public class MenuFragment extends ListFragment 
{

public static final String TAG = "MenuFragment";

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    v = inflater.inflate(R.layout.list, null);
    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    //
    // insert code here to setup and call setListAdapter()
    //
}

@Override
public void onListItemClick(ListView lv, View v, int position, long id) 
{

}
} 
```

2) 在您的 listactivity 代码中查找您的 setContentView，将该布局用作 onCreateView() 下的 inflate() 调用的参数

```
setContentView(R.layout.main); 
```

到

```
View v = inflater.inflate(R.layout.main, null); 
```

3) 将您的 listactivity onCreate() 下的其余代码移动到 listfragmentt OnCreateView()。您可能有一些代码设置控件，如下所示：

```
text = (EditText) this.findViewById(R.id.text); 
```

它会变成这样：

```
text = (EditText) v.findViewById(R.id.text); 
```

请注意，v 是从 inflate 调用返回的视图。

4）如果你的代码引用了“this”，你会得到一个错误。将其替换为“getActivity()”。

5）检查你留下了哪些代码，并找到合适的地方将它们放入新文件中。希望以上内容涵盖了基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T13:53:50.707

本质上它必须是相同的。只是容器不同（活动到片段），内部实现理想情况下应该保持不变。所以我想说创建 AsyncTask 使用相同的组件，在 onPostExecute() 方法中，你可以做一个 setListAdapter(adapter)，如下所示：

```
class MyFragment extentsListFragment{

//define constructors if any 
public void onResume(){

    LoadData loadData = new LoadData();
    loadData.execute();

}
//unimplementedMethods

private class LoadData extends AsyncTask<Void, Void, Void> {

    private Object object = null;

    protected Void doInBackground(Void... params) {

        //make a call to the server and save the data in SQLite DB
        // Make a call to the database to get your data
        object = getObjectFromDB();

        return null;
    }

    protected void onPostExecute(Void result) {
        if(object == null || object.length <= 0) {
            setListAdapter(null);
            return;
        }

        // assuming object has your data, say it's an Array  List, work on it and setListAdapter
        adapter = ...
        setListAdapter(adapter)
    }

    private Object getObjectFromDB() {
        // do whatever
        return object;
    }
} 
```

}

# c# - 给定一个网站的 HTML 字符串，如何提取标签元素？

> ID：14031095
> 
> 赞同：2
> 
> 时间：2012-12-25T13:35:14.763
> 
> 标签：c#, asp.net

```
HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://www.home.com");
myRequest.Method = "GET";
WebResponse myResponse = myRequest.GetResponse();
StreamReader sr = new StreamReader(myResponse.GetResponseStream(), 
                                   System.Text.Encoding.UTF8);
string result = sr.ReadToEnd();
sr.Close();
myResponse.Close(); 
```

该字符串包含该网页的整个 html，现在我想从该字符串中提取 html 标签。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T13:37:55.073

拥有[Html Agility Pack](http://htmlagilitypack.codeplex.com/)可以轻松解析 HTML 内容。[您可以在此处](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)查看示例。

```
HtmlDocument doc = new HtmlDocument();
 doc.Load("file.htm");
 foreach(HtmlNode link in doc.DocumentElement.SelectNodes("//a[@href"])
 {
    HtmlAttribute att = link["href"];
    att.Value = FixLink(att);
 }
 doc.Save("file.htm"); 
```

# ios - ios/mobile：固定 div 高度，不可缩放？

> ID：14031102
> 
> 赞同：0
> 
> 时间：2012-12-25T13:36:09.317
> 
> 标签：ios, css, mobile

如果我有一个`position:fixed`div - 是否可以使其“不可缩放”，即使网站的其余部分可以缩放？

我希望有一个固定的高度和宽度，它始终以相同的大小保持在网站的底部（因此内容保持不变并且不会随网站的其余部分一起缩放）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:44:22.757

我认为不，这是不可能的，至少不像你希望的那样简单。这是一种可以通过的方法。将事件绑定到窗口的 ongesturechange，如下所示：

```
 $(window).bind("gesturechange", function(event) {
     var scale = event.originalEvent.scale;
     //Now resize your element with javascript based on the value of scale.
 }); 
```

# spring - spring-data neo4j：无法通过相关实体找到节点实体

> ID：14031103
> 
> 赞同：0
> 
> 时间：2012-12-25T13:36:12.343
> 
> 标签：spring, neo4j, spring-data, spring-data-neo4j

使用 spring-data neo4j，我有 2 个节点实体：snippet 和 person。每个片段都有一个作者。以下是类，然后是失败的测试：

```
@NodeEntity
public class SnippetLink {
    @GraphId
    @GeneratedValue
    Long id;

    @Fetch
    @RelatedTo(type = "AUTHORED")
    @Indexed
    PersonLink author;

    @RelatedToVia(type = SnippetRelation.DERIVED_FROM)
    SnippetLink parent;

    Long documentId;

    public SnippetLink() {
    }

    public SnippetLink(PersonLink author, Long documentId) {
        this.author = author;
        this.documentId = documentId;
    }

    public PersonLink getAuthor() {
        return author;
    }

    public void setAuthor(PersonLink author) {
        this.author = author;
    }

    public Long getDocumentId() {
        return documentId;
    }

    public void setDocumentId(Long documentId) {
        this.documentId = documentId;
    }

    public SnippetLink getParent() {
        return parent;
    }

    public void setParent(SnippetLink parent) {
        this.parent = parent;
    }

    public SnippetRelation fork(PersonLink author) {
        SnippetLink child = new SnippetLink(author, documentId);
        return new SnippetRelation(this, child, SnippetRelation.Type.Fork);
    }

    public SnippetRelation revision(Long documentId) {
        SnippetLink child = new SnippetLink(getAuthor(), documentId);
        return new SnippetRelation(this, child, SnippetRelation.Type.Revision);
    }
} 
```

.

```
@NodeEntity
public class PersonLink {
    @GraphId
    Long id;

    String login;

    String firstName;

    String lastName;

    public PersonLink() {
    }

    public PersonLink(String login, String firstName, String lastName) {
        this.login = login;
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getLogin() {
        return login;
    }

    public void setLogin(String login) {
        this.login = login;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
} 
```

.

```
public interface SnippetLinkRepository extends GraphRepository<SnippetLink>{
    Iterable<SnippetLink> findByAuthor(PersonLink author);
} 
```

.

```
PersonLink author = template.save(new PersonLink("johns", "John", "Smith"));

SnippetLink snippet = template.save(new SnippetLink(author, -1L));

SnippetRelation revisionRelation = snippet.revision(-2L);
template.save(revisionRelation.getChild());
template.save(revisionRelation);

Iterable<SnippetLink> snippets = snippetLinkRepository.findByAuthor(author);
assertThat(snippets).hasSize(2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T11:13:08.683

> ```
> @RelatedToVia(type = SnippetRelation.DERIVED_FROM)
> SnippetLink parent; 
> ```

这应该是

> ```
> @RelatedTo(type = SnippetRelation.DERIVED_FROM)
> SnippetLink parent; 
> ```

当您想要访问实体的关系（实体）时，使用 RelatedToVia。然而，由于 SnippetLink 是一个实体，因此您需要使用 realatedTo。

# iphone - UITextView 上的 resignFirstResponder - 减慢键盘的消失速度

> ID：14031108
> 
> 赞同：3
> 
> 时间：2012-12-25T13:36:38.927
> 
> 标签：iphone, objective-c, ios, cocoa-touch, resignfirstresponder

`resignFirstResponder`我想知道在 TextView 上使用时，有什么方法可以减缓 iOS 应用程序中本机键盘的消失。键盘下降得太快了，我希望它走得更慢。那可能吗？

**编辑：** 我的上下文是这样的：我在当前视图之上添加了一个新视图，因此，我的键盘暂时消失了。这就是我的代码的样子：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *tmpButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [tmpButton setTitle:@"Tap me" forState:UIControlStateNormal];
    [tmpButton sizeToFit];
    [tmpButton addTarget:self action:@selector(btnTestClicked) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:tmpButton];
}

- (void) btnTestClicked{
    [tmpText resignFirstResponder];
} 
```

我也有这样的视图层次结构：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    self.window.windowLevel = UIWindowLevelStatusBar + 1;
    return YES;
} 
```

该应用程序非常简单，但键盘消失得非常快，不像我没有任何其他视图时那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T13:57:32.983

很简单，我认为：

```
- (void)btnTestClicked {
        [UIView animateWithDuration:2.0 animations:^(void){
            [tmpText resignFirstResponder];
        } completion:^(BOOL finished) {
              //Do something
        }];    
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T13:48:37.767

```
[UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
    [self.view endEditing:YES];
}completion:nil]; 
```

# android - Android InstantiationException with Fragment（它是公开的）

> ID：14031110
> 
> 赞同：18
> 
> 时间：2012-12-25T13:36:48.257
> 
> 标签：android, android-fragments, android-support-library

我有一个`Fragment`（它不是内部类，也没有任何构造函数）

```
public class PreferenceListFragment extends ListFragment implements OnClickListener 
```

我在 Android 开发者控制台上收到了这个崩溃报告：

```
java.lang.RuntimeException: Unable to start activity 
ComponentInfo{com.redacted.redacted/com.redacted.redacted.PreferenceActivity}: 
android.support.v4.app.Fragment$InstantiationException: 
Unable to instantiate fragment com.redacted.redacted.PreferenceListFragment$3:
make sure class name exists, is public, and has an empty constructor that is
public
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1750)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1766)
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2960)
at android.app.ActivityThread.access$1600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:945)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3818)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.support.v4.app.Fragment$InstantiationException: 
Unable to instantiate fragment com.redacted.redacted.PreferenceListFragment$3: 
make sure class name exists, is public, and has an empty constructor that
is public
at android.support.v4.app.Fragment.instantiate(Fragment.java:399)
at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1760)
at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:200)
at com.redacted.redacted.PreferenceActivity.onCreate(PreferenceActivity.java:37)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1710)
... 12 more
Caused by: java.lang.InstantiationException: 
com.redacted.redacted.PreferenceListFragment$3
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1409)
at android.support.v4.app.Fragment.instantiate(Fragment.java:388)
... 18 more 
```

我无法在我的任何测试设备上复制它。

这`PreferenceActivity.onCreate`是发生异常的地方：

```
public class PreferenceActivity extends FragmentActivity{

    PreferenceListFragment frag;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setContentView(R.layout.preference);

        frag = (PreferenceListFragment) getSupportFragmentManager().
                findFragmentById(R.id.preference_list_frag);
        frag.setState(AlarmPreferenceState.Selected);
        frag.setIsTwoPane(false);
    }

    .
    .
    .
} 
```

这是`R.layout.preference`：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment class="com.redacted.redacted.PreferenceListFragment"
          android:id="@+id/preference_list_frag"
          android:layout_width="match_parent"
          android:layout_height="match_parent"/>

</FrameLayout> 
```

任何人都知道为什么我可能会得到这个异常，和/或如何重现它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T09:53:28.577

您`MUST`有一个空的公共构造函数。谁告诉你不要有片段构造函数，把你引向了错误的方向。

他们可能告诉您的是，没有接受参数的构造函数，因为在重新创建片段时系统可能不会调用这些构造函数。在这种情况下，请使用文档中的示例为您的片段提供参数。

引用自文档：

> Fragment 的所有子类都必须包含一个公共的空构造函数。框架通常会在需要时重新实例化一个片段类，特别是在状态恢复期间，并且需要能够找到这个构造函数来实例化它。如果空构造函数不可用，在状态恢复过程中某些情况下会出现运行时异常。[1], [2]

[1]：[https ://developer.android.com/reference/android/app/Fragment.html](https://developer.android.com/reference/android/app/Fragment.html)

[2]：[https://developer.android.com/reference/android/app/Fragment.html#Fragment()](https://developer.android.com/reference/android/app/Fragment.html#Fragment())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-30T07:05:27.570

**检查您的 PROGUARD 规则**

就我而言，奇怪的是，此错误仅在发布版本中弹出，而不在调试版本中弹出。

问题是，我使用 a`FragmentContainerView`来保存`Fragment`并在 XML 本身中提到`Fragment`类名，就像这样

```
<androidx.fragment.app.FragmentContainerView
                android:id="@+id/f_navigation_fragment"
                class="com.example.MyFragmentClass"
                android:layout_width="match_parent"
                android:layout_height="match_parent" /> 
```

这在 Debug 构建*（没有 Proguard 混淆）*中运行良好，但在 Release 构建*（使用 Proguard 混淆）*中，实际`Fragment`类被混淆了，因此 XML 无法找到它导致 OP 错误。

请参阅[此](https://stackoverflow.com/questions/50378810/proguard-causing-runtime-exception-with-android-navigation-component/50378828#50378828)链接以获取其他参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-21T20:33:36.943

当我不小心尝试导航到`abstract`Fragment 类时出现此错误。

# php - Web 表单 BOT 保护对用户透明

> ID：14031115
> 
> 赞同：0
> 
> 时间：2012-12-25T13:38:13.287
> 
> 标签：php, javascript, security, bots, csrf-protection

过去几天我一直在思考如何保护 Bots 使用的 Web 表单。使用是善意的滥用，大约 8 小时内大约 800k 机器人的查询。

让我们快速概述一下情况，任何缺失的信息 - 请询问。

机器人：

1.  该机器人具有不同的 IP。
2.  该机器人将其用户代理更改为真正存在的用户代理。
3.  bot是否加载js并有cookie的未知点。

问题：

1.  该表单无法使用隐藏的令牌字段，因为它可能是从外部资源提交的。不同网站等资源，不了解 CSRF 令牌，无法生成它们。使得无法使用 CSRF。
2.  该网站必须在浏览器中缓存，并且缓存可能仅在异常情况下重置，例如可疑行为。
3.  不能大量使用数据库（！）。

现在的样子：

1.  具有过期哈希的 Cookie 计数器 + 附加字符只有系统知道它们何时插入。
2.  如果浏览器无法处理 cookie，则使用数据库日志记录。这是浏览器缓存的一些困难，当用户没有到达服务器时 - 结果：验证没有运行，计数器没有增加。
3.  reCaptcha 为在 X 时间内超过尝试次数限制的用户申请。

提出的想法：

1.  为 iframe 提供一些内容并过期 0。 iframe 制作简单的 cookie 逻辑。
2.  iframe : 如果 cookie 没有设置 - 设置它，如果 cookie 被设置，验证。如果用户没有超过限制 - 设置计数器 +1，如果超过 - 发送到特定页面，这将显示缓存重置的警告。

这里的困难是，如果 bot 不支持 cookie 和从缓存中提供的内容怎么办......由于用户没有到达服务器，数据库不会写任何东西。但是，如果用户更改关键字，它将重置缓存并且后面的逻辑将起作用。

第二个难点：如果bot不支持JS怎么办（切换关键字会被淘汰）。但是，从缓存提供内容时无法重定向。

第三个难点：如果机器人破译了 ReCAPTCHA 怎么办？:)

**问题：**

在这种情况下你在做什么？请描述您正在考虑的步骤。非常感谢您对事物的看法。每个想法都可能与其他想法一起完善，我们可以提出一个很好的保护方案！谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:38:13.287

所以我对抗用户缓存的想法是：

使用 iframe 1x1。

它的内容使用 Expires: 0 发送，即使从缓存加载页面，每次都会提供 iframe。

我刚刚想到的另一个想法是记录鼠标事件。onmousemove 和 onkeydown，这两个甚至可以捕获 F5 keydown。向服务器报告并设置标志。

**最终结果** 决定使用隐藏的CSS，设置用户正常加载内容的系统变量。但是，如果“用户”正常加载内容，exctra 保护是实现 javascript 的事件跟踪（onmousemove、onkeydown、onclick）并接收发送到服务器进行标记。该请求仅在事件第一次发生然后不跟踪时发送到服务器一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:41:06.287

事实：如果您必须接受任何人随时随地提交的任何表单，您基本上对机器人没有任何追索权。因为这就是机器人所做的一切：它们随时随地向您的服务器提交数据。

CSRF 令牌的作用是要求用户在向服务器提交数据之前先从服务器获取一些东西。这使服务器可以区分随机提交和“真实”提交。它还可以限制它发出这些令牌的速度。这只是为了防止 JavaScript、基于浏览器的*跨站点*攻击，它对可以随时获取此类令牌的机器人没有太大作用。

如果您将令牌绑定到用户并要求表单提交来自经过身份验证的用户，它可以让您更好地处理限制提交。您可以控制用户提交数据的速率，还可以控制允许谁注册以及如何注册。因此，它可以让您了解允许谁提交数据以及提交数据的频率。

如果没有这一切，您将无法真正掌握有关提交的有效性或频率的任何事情。您提到了跟踪用户的鼠标移动......我不确定您想如何实现这一点，但如果机器人只需要提交一些“看起来像鼠标移动”的额外数据，那也很容易绕过。“鼠标移动”毕竟只是提交给服务器的数据，你不知道这些数据是不是由鼠标生成的。

In short: protecting a *web form* against bots is possible through various techniques, including hidden honeypot fields, authentication tokens and captchas. If you require to have an open-for-all API anybody can submit to though, all this is pretty pointless.

# python - 我需要帮助编写用于检测和弦的正则表达式

> ID：14031118
> 
> 赞同：4
> 
> 时间：2012-12-25T13:38:21.837
> 
> 标签：python, regex

我正在向 cdr (chordpro) 转换器编写文本，但在检测表单上的和弦线时遇到问题：

```
 Cmaj7    F#m           C7    
Xxx xxxxxx xxx xxxxx xx x xxxxxxxxxxx xxx 
```

这是我的python代码：

```
def getChordMatches(line):
    import re
    notes = "[CDEFGAB]";
    accidentals = "(#|##|b|bb)?";
    chords = "(maj|min|m|sus|aug|dim)?";
    additions = "[0-9]?"
    return re.findall(notes + accidentals + chords + additions, line) 
```

我希望它返回一个列表 ["Cmaj7"、"F#m"、"C7"]。上面的代码不起作用，我一直在努力处理文档，但我没有得到任何结果。

为什么将类和组链接在一起不起作用？

*编辑*

谢谢，我最终得到了以下内容，它涵盖了我的大部分需求（例如，它与 E#m11 不匹配）。

```
def getChordMatches(line):
    import re

    notes = "[ABCDEFG]";
    accidentals = "(?:#|##|b|bb)?";
    chords = "(?:maj|min|m|sus|aug|dim)?"
    additions = "[0-9]?"
    chordFormPattern = notes + accidentals + chords + additions
    fullPattern = chordFormPattern + "(?:/%s)?\s" % (notes + accidentals)
    matches = [x.replace(' ', '').replace('\n', '') for x in re.findall(fullPattern, line)]
    positions = [x.start() for x in re.finditer(fullPattern, line)]

    return matches, positions 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:43:01.977

您应该通过更改`(...)`为`(?:...)`.

```
accidentals = "(?:#|##|b|bb)?";
chords = "(?:maj|min|m|sus|aug|dim)?"; 
```

在线查看它：[ideone](http://ideone.com/BrV3RN)

* * *

当您捕获组时它不起作用的原因是它只返回这些组而不是整个匹配。从文档中：

> **`re.findall(pattern, string, flags=0)`**
> 
> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。**如果模式中存在一个或多个组，则返回组列表**；如果模式有多个组，这将是一个元组列表。空匹配包含在结果中，除非它们触及另一个匹配的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T13:50:57.047

编写详细的正则表达式有特定的语法

```
regex = re.compile(
    r"""[CDEFGAB]                 # Notes
        (?:#|##|b|bb)?            # Accidentals
        (?:maj|min|m|sus|aug|dim) # Chords
        [0-9]?                    # Additions
     """, re.VERBOSE
)
result_list = regex.findall(line) 
```

这可以说比将字符串连接在一起更清晰一些

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T13:45:31.070

您需要使组不捕获：

```
def getChordMatches(line):
    import re
    notes = "[CDEFGAB]";
    accidentals = "(?:#|##|b|bb)?";
    chords = "(?:maj|min|m|sus|aug|dim)?";
    additions = "[0-9]?"
    return re.findall(notes + accidentals + chords + additions, line) 
```

结果：

```
['Cmaj7', 'F#m', 'C7'] 
```

# javascript - 这些 Jquery、ExtJs 框架如何覆盖原生 Javascript

> ID：14031123
> 
> 赞同：1
> 
> 时间：2012-12-25T13:38:59.850
> 
> 标签：javascript, html, extjs

我已经使用以下代码从 ExtJs 中看到了教程：

```
 var myDiv = Ext.get('myDiv');
 myDiv.highlight(); 
```

hightlight() 函数来自哪里？它来自原生 Javascript 还是 ExtJs 框架？我做了简单的搜索，但在 API 文档中找不到。如果 hightlight() 来自 ExtJs 框架，它实际上是如何覆盖 Javascript 中的本机行为的？

我想知道 Jquery 选择器是如何`$('#myDiv')`被 Javascript 识别的？Javascript 编译器不应该识别 $('') 符号吗？

我的描述很差，对不起。我是 javascript 初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:41:34.970

Prototype、Ext 等扩展了 DOM 对象的原型（顺便说一句，这是非常[值得怀疑的行为](http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/)），例如`HTMLElement.prototype`，并向其中添加它们自己的函数。这使您可以像示例中所示那样调用它们。

jQuery 悬停根本不使用任何魔法。`$`是 JavaScript 中的普通标识符，就像普通字符一样。所以它只不过是一个命名的函数`$`，然后你在执行`$('#selector')`等操作时调用它。该函数的返回值通常是一个 jQuery 对象，它的行为类似于一个数组并且有很多有用的方法。因此，您永远不会处理本地 DOM 对象，而只是处理*包含*一个或多个它们的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T05:00:31.633

Ext 提供了一个[Element](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)对象，它是由诸如`Ext.get()`. Element*包装*了 DOM 节点，但肯定不会改变 HTMLElement 对象（就像 jQuery $ 函数一样）。事实上，[Element.dom](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-property-dom)属性暴露了原始未更改的 DOM 节点。 [Element.highlight()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-method-highlight)只是一个 Ext.Element 方法，并且在 API 文档中清楚地记录了 - 它没有什么神秘之处。

虽然 Ext 在以前的版本中用于修改一些原生的 JS 对象（日期、字符串、对象），但它从未接触过原生的 HTMLElement 对象。这曾经是大多数 JS 库中的常见做法，但截至 4.0 版（现在已经几年了）Ext 还没有触及任何原生 JS 原型。

# delphi - 在 Delphi 中只设计一个 VCL 组件

> ID：14031125
> 
> 赞同：7
> 
> 时间：2012-12-25T13:39:09.513
> 
> 标签：delphi, vcl, delphi-xe3, vcl-styles

我知道，可以禁用组件的自定义样式，但我怎样才能只为一个组件类启用样式？例如，让整个表单和其上的所有组件不蒙皮，并且只给 TButton 蒙皮。就像在这张图片上一样。

![在此处输入图像描述](../Images/cff4c98f8e9621c6ee59cac72ce7197a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T17:49:03.593

大多数 VCL 控件在内部使用[`StyleServices`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Themes.StyleServices)全局函数来获取绘制控件的方法。因此，如果您不使用 Vcl 样式，则将`StyleServices`实例返回给 windows API 函数以绘制主题控件（UxTheme API）。因为没有办法将皮肤（应用 Vcl 样式）仅应用于单个类控件（至少您自己绘制控件）。

因此，唯一的选择是应用 Vcl 样式，然后禁用除您要查找的一种类型之外的所有控件。

你可以使用这样的东西

```
procedure DisableVclStyles(Control : TControl;const ClassToIgnore:string);
var
  i : Integer;
begin
  if Control=nil then
    Exit;

  if not Control.ClassNameIs(ClassToIgnore) then
   Control.StyleElements:=[];

  if Control is TWinControl then
    for i := 0 to TWinControl(Control).ControlCount-1 do
      DisableVclStyles(TWinControl(Control).Controls[i], ClassToIgnore);
end; 
```

使用 Vcl 样式检查此表单

![在此处输入图像描述](../Images/693c581c5f79e4c06b1e3f900b9f7c8a.png)

现在在调用上述方法之后

```
DisableVclStyles(Self,'TButton'); 
```

![在此处输入图像描述](../Images/a0474f906cbcc0527ab4286d8f371fd1.png)

注意：使用*[StyleElements](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.StyleElements)*属性来启用或禁用 vcl 样式不适用于某些组件，例如（TStringGrid、TBitBtn、TSpeedButton 等）

# android - 在 Eclipse 中使用 Robolectric 进行测试

> ID：14031128
> 
> 赞同：2
> 
> 时间：2012-12-25T13:39:22.680
> 
> 标签：android, eclipse, testing, junit4, robolectric

我正在尝试在**eclipse**中使用 Robolectric 运行一个简单的测试。我按照[本](http://digitaldumptruck.jotabout.com/?p=749)教程进行操作，但出现此错误：

> java.lang.RuntimeException: java.io.FileNotFoundException: C:\Vishal\Development\workspace>\AndroidHelloWorldTester.\AndroidManifest.xml 未找到或不是文件；它 > 应该指向您项目的 AndroidManifest.xml

然后按照 Eugen 在[此处](https://stackoverflow.com/questions/12397445/android-unit-testing-with-robolectric-throws-error-androidmanifest-xml-not-found)的建议，我尝试按照[此处](http://pivotal.github.com/robolectric/customizing.html)的说明扩展 RobolectricTestRunner 类，但出现此错误：-（我无法完全按照指示编写构造函数，因为它会导致编译错误）

> java.lang.Exception：测试类应该只有一个公共零参数构造函数

目前这是课程：-

```
package com.myTest;

import static org.hamcrest.CoreMatchers.equalTo;
import static org.junit.Assert.*;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.model.InitializationError;

import android.widget.Button;
import android.widget.TextView;

import com.visd.helloworld.AndroidHelloWorldActivity;
import com.visd.helloworld.R;
import com.xtremelabs.robolectric.RobolectricTestRunner;

@RunWith(RobolectricTestRunner.class)
public class Ahtest extends RobolectricTestRunner {

    public Ahtest(Class AndroidHelloWorldActivity) throws InitializationError {
    super(AndroidHelloWorldActivity, "<the project root location>");
    // TODO Auto-generated constructor stub
}

    private Button pressMeButton;
    private TextView results;
    AndroidHelloWorldActivity activity;
    @Before
    public void setUp() throws Exception {
        activity = new AndroidHelloWorldActivity();

        activity.onCreate(null);
        pressMeButton = (Button) activity.findViewById(R.id.mybut1);
        results = (TextView) activity.findViewById(R.id.text1);
    }

    @After
    public void tearDown() throws Exception {
    }

    @Test
    public void testSomethingMeaningfulToMyApp() {
         pressMeButton.performClick();
         String resultsText = results.getText().toString();
         assertThat(resultsText, equalTo("Button Clicked"));
    }

} 
```

PN：
1）我为应用程序和测试做了不同的项目。
2）我不能完全按照指定的方式编写构造函数，因为如果我指定了：-

> super(testClass, new File("../other/project-root"));

我会得到编译错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:21:35.760

维沙尔，

您正在混合测试和跑步者课程。

**junit**的一般工作方式如下：

```
for (TestClass c: allTests) {
    Test t = TestClass.newInstance();

    testListener.startTest(t.getName());
    try {
       t.beforeTest();
       t.run();
       t.afterTest();

       testListener.testPass(t.getName());
    } catch (Exception e) {
       if (t.isExpectedException(e)) {
           testListener.testPass(t.getName());
       } else if (isAssertException(e)) {
           testListener.testFail(t.getName(), getExplanation(e));
       } else {
           testListener.testError(t.getName(), e);
       }
    }

    testListener.testEnd(t.getName());
} 
```

由于`Class.newInstance()`方法调用，测试类需要公共非零参数构造函数。注释`@Test`，`@Before`并`@After`标记到**junit**哪些类是测试类。

上面的代码是一种测试运行器类。有时您需要来自测试运行器类的额外逻辑。例如， **Robolectric**和**PowerMock**正在用自己的特定目的替换标准 ClassLoader。**Robolectric**为 Android 类提供自己的实现。**PowerMock**用于模拟静态、最终类和方法，以及模拟类构造函数。

`@RunWith`存在注释以通知**junit**它应该为测试类使用另一个测试运行器。所以**Robolectric** Android 测试应该有`@RunWith(RobolectricTestRunner.class)`. 但是，您可以通过扩展类向**Robolectric**测试运行器添加其他功能。`RobolectricTestRunner`例如用于自己的阴影或指向特定的 AndroidManifest.xml 文件。

因此，您应该拥有自己的测试运行器类`AHTesRunner`，您可以在其中将**Robolectric**指向特定的清单文件位置：

```
public class AHTestRunner extends RobolectricTestRunner {} 
```

并且您需要通知**junit**它应该使用您自己的测试运行器（定制的**Robolectric**测试运行器）：

```
@RunWith(AHTestRunner.class)
public class AHTest {
    @Before
    ......
    @Test
    ......
    @After
} 
```

希望这现在很清楚

# clojure - 使用 clojure 抓取包含动态内容的网页

> ID：14031133
> 
> 赞同：0
> 
> 时间：2012-12-25T13:40:10.633
> 
> 标签：clojure, web-scraping

出于学习目的，我正在尝试使用 Clojure 从以下[站点](http://www.bursamalaysia.com/market/listed-companies/company-announcements/#/?company=6947&category=all&sub_category=all&alphabetical=All)抓取数据。

我想知道如何获取表“bm_center bm_dataTable”中的数据。

我面临的挑战是该表的 DOM 在该页面的 html 源中不可用，因为它是在浏览器中动态生成的。

如何获取表格的 hml 源？

我对网络编程知之甚少，但愿意学习。预先感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:12:22.957

DOM 通常是存在于浏览器中的东西。浏览器拉下您在 Clojure 中看到的相同文本，然后构建它用来呈现页面等的 DOM...

您可以通过编写 Clojure 代码手动操作文本以提取您想要的内容。您可以使用 JSoup 之类的 Java 库从 HTML 中提取信息。标准 Java 库也带有 HTML 解析器，但我会避免使用它。它很难使用，并没有真正带来太多好处。

# apache - 使用 mod_rewrite 重写旧 URL 后删除查询字符串

> ID：14031134
> 
> 赞同：0
> 
> 时间：2012-12-25T13:40:15.037
> 
> 标签：apache, .htaccess

对于我的荷兰[网站](http://watiseropderadio.nl)，我想将一些旧 URL 重定向到新路径。

我想重定向这样的 URL：

```
/playlist?artist=Bob+Marley    ->    /zoeken/Bob+Marley
/playlist?artist=Rammstein     ->    /zoeken/Rammstein 
```

我想出了这个：

```
RewriteCond %{QUERY_STRING}  ^artist=(.*)$  [NC]
RewriteRule ^playlist        /zoeken/%1     [NC,L,R=301] 
```

现在唯一的问题是查询字符串在重定向后不断出现：

```
http://watiseropderadio/zoeken/Bob+Marley?artist=Bob+Marley 
```

如何删除此查询字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:54:51.040

你最后需要一个`?`：

```
RewriteCond %{QUERY_STRING}  ^artist=(.*)$  [NC]
RewriteRule ^playlist        /zoeken/%1?     [NC,L,R=301]
# here --------------------------------^ 
```

默认情况下，查询字符串会自动附加到规则的目标，除非您有`?`构建自己的查询字符串。最后只有 a ，您正在构建一个空白查询字符串，并且如果没有标志`?`，现有的查询字符串将不会被附加。`QSA`

# c# - WP7 - 使用图标打开/关闭声音

> ID：14031137
> 
> 赞同：0
> 
> 时间：2012-12-25T13:40:28.107
> 
> 标签：c#, silverlight, windows-phone-7, settings, toggle

[我在此msdn 文章](http://msdn.microsoft.com/en-us/library/ff769510%28VS.92%29.aspx)中使用应用程序设置为声音创建了布尔变量。现在我想在我的菜单中`toggleswitch`设置音量开或关。我正在考虑使用类似[this answer](https://stackoverflow.com/a/8318072/367593)的东西。但我不确定这是否对我的问题有好处。我应该将图像变量添加到我的 AppSettings 还是有更好的方法来做到这一点？

**我的解决方案：**

在xml中：

```
<ToggleButton Name="tgbSound" BorderThickness="0" Background="Transparent"
                      Checked="tgbSound_Checked"
                      Unchecked="tgbSound_Unchecked"
                      IsChecked="{Binding Source={StaticResource appSettings}, Path=SoundSetting, Mode=TwoWay}">
        </ToggleButton> 
```

在 xaml 页面的代码中：

```
private void tgbSound_Checked(object sender, RoutedEventArgs e)
{
    SetTgbSoundContentTo("Images/volumeon.png");
}

private void tgbSound_Unchecked(object sender, RoutedEventArgs e)
{
    SetTgbSoundContentTo("Images/volumeoff.png");
}

private void SetTgbSoundContentTo(string uri)
{
    Image volumeoff = new Image();
    ImageSource zdroj = new BitmapImage(new Uri(uri, UriKind.Relative));
    volumeoff.Source = zdroj;
    volumeoff.Height = 40;
    if (tgbSound == null)
        return;
    tgbSound.Content = volumeoff;
    tgbSound.Background = new SolidColorBrush(Colors.Transparent);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T05:15:45.713

你可以两者都做。对于这两种方法，我将建议您使用一种通用方法。

Create a Boolean property in your AppSettings and create its wrapper inside your viewmodel. Then bind (two way) the wrapper property in your view model to your UI element, that can be both a toggle switch or an image. In case of `toggleswitch`, the `two way binding` will itself do the trick, but for an image you will have to handle the tap event and handle the on/off states and Boolean values in the code yourself.

# development-environment - 当源文件不使用 linux 行结尾时，有没有办法在 grunt 构建中给出错误？

> ID：14031144
> 
> 赞同：1
> 
> 时间：2012-12-25T13:41:40.177
> 
> 标签：development-environment, gruntjs

在构建项目时，强制 linux 行尾检测多平台团队中的早期问题可能很有用。

在整个项目中强制使用 linux 行结尾对我来说听起来像是向前迈出的一大步，就像我切换到 utf-8 时一样:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:59:18.620

如果你使用 git，你可以让 git[解决它](https://help.github.com/articles/dealing-with-line-endings)。

否则，[grunt-beautify](https://github.com/pix/grunt-beautify)有一个选项[endOfLineCharacters](https://github.com/divdavem/grunt-beautify/commit/d13f626cc96cf00fc14b0da00cc9440f800aa5c2)。但是那个模块似乎已经死了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T11:00:16.527

“grunt”关注平台特定的换行。

您可以强制 grunt 在每个平台上使用相同的换行符。在您的 grunt 文件顶部执行此操作：

```
// overwrite platform specific setting get always unix like line end
grunt.util.linefeed = '\n'; 
```

该选项记录在这里：

[http://gruntjs.com/api/grunt.util#grunt.util.linefeed](http://gruntjs.com/api/grunt.util#grunt.util.linefeed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T11:03:04.270

使用[.editorconfig](http://editorconfig.org/)文件

这些使得在整个团队中以一致的方式设置跨平台行结束变得非常容易，而无需额外的构建步骤。每次保存文件时都会强制执行它们。

这是[一个示例文件，它也使用空格作为制表符](https://github.com/bevacqua/unbox/blob/master/.editorconfig)

```
# editorconfig.org
root = true

[*]
indent_style = space
indent_size = 4
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.md]
trim_trailing_whitespace = false 
```

# facebook - 来自 Graph API 的所有 Facebook 消息

> ID：14031145
> 
> 赞同：4
> 
> 时间：2012-12-25T13:41:47.203
> 
> 标签：facebook, facebook-graph-api

我正在构建一个供我个人使用的应用程序，它将我所有的 facebook 消息保存在我计算机上的数据库中。

但是我有一个问题，因为似乎只有很少的消息可以通过 Graph API 访问。我创建了一个具有所有可能权限的令牌。

发出呼叫时：

```
/me/inbox 
```

我在收件箱中收到了所有线程，但其中一些线程`comments`缺少包含实际消息的字段。它主要用于在 Facebook 上与我不是朋友的人交谈。

对于这些线程，当我尝试通过图表 api 获取更多信息时，`/<id_of_the_thread>` 我收到一个错误（代码 100）`Unsupported get request.`。

这是 API 的正常行为吗？我在这里想念什么？

如果您知道保存我所有消息的更好方法，请不要犹豫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-04T15:51:03.737

另一种获取 Facebook 消息的方式稍逊一筹，但更容易获得，是通过[https://www.facebook.com/settings](https://www.facebook.com/settings)下载 Facebook 数据的副本。通过这种方式，您可以下载包含所有 FB 数据的存档，包括您的消息。但是，每个会话的消息上限为 10,000 条，并且全部存储在一个 .htm 文件中，如果您想对它们进行进一步操作，这不是很实用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:35:23.660

不，我认为，我们不能使用 ID 指定线程，但通常我会按其发送者对线程进行排序。CMIIW

# macos - 如何在 ListView 中添加子视图？

> ID：14031146
> 
> 赞同：3
> 
> 时间：2012-12-25T13:42:01.033
> 
> 标签：macos, cocoa, nscollectionview

我正在开发我的第一个 MAC 应用程序，我下载了一个 [PxListView示例](https://i.stack.imgur.com/l7mp2.png)

我必须在单元格 xib 上添加一个按钮和背景图像并将它们与控制器绑定，当点击按钮时，我设置的该单元格的高度比其他单元格大得多。完成，并且工作正常。

但是现在我想像在女巫细胞在那个细胞中打开之后那样开发我想在它上面添加一些额外的包含（控制器），那么如何使用给定的例子呢？请帮我提出一些建议。
前喜欢点击按钮 ![在此处输入图像描述](../Images/b66006db1b09ef072b5693f818dca98e.png)

小鸡按按钮后，我想像这样发展

![在此处输入图像描述](../Images/d321c5dc4430941d33c18442fd1776d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:41:09.020

**你写**

> 我必须在单元格 xib 上添加一个按钮和背景图像并将它们与控制器绑定

听起来你已经子类化了`PXListViewCell`——为了方便起见，让我们调用你的子类`TemplateListViewCell`——并添加了一个`xib`从中`TemplateListViewCell`加载的实例

```
+[PXListViewCell cellLoadedFromNibNamed:bundle:reusableIdentifier:] 
```

此外， 中还有一个[至少一个] 按钮`TemplateListViewCell.xib`。

**你写**

> 当点击按钮时，我设置的那个单元格的高度比其他的要大得多。完成了，工作正常

听起来这个按钮有一个方法作为它的动作，`TemplateListViewCell`比如

```
- (IBAction)toggleDetail:(id)sender
{
    //Code to grow or shrink the height of [self frame].  
    //...
} 
```

在我的实现方法中，需要对文件进行`-toggleDetail`两次修改：`PXListView`

`1.` 添加协议方法

```
- (void)listView:(PXListView *)aListView setHeight:(CGFloat)height ofRow:(NSUInteger)row; 
```

到`PXListViewDelegate`协议。

`2.` 添加属性

```
@property (nonatomic, assign) BOOL expanded; 
```

到`PXListViewCell`.

我的实现`-toggleDetail`看起来像这样：

```
- (IBAction)toggleDetail:(id)sender
{
    BOOL wasExpanded = [self expanded];

    NSRect oldFrame = [self frame];
    CGFloat oldHeight = oldFrame.size.height;
    CGFloat newHeight = oldHeight;

    CGFloat heightIncrement = 0.0f;
    if (wasExpanded) {
        heightIncrement = -80.0f; //use whatever value is appropriate
    } else {
        heightIncrement = 80.0f;  //use whatever value is appropriate
    }
    newHeight += heightIncrement;

    [[[self listView] delegate] listView:[self listView] setHeight:newHeight ofRow:[self row]];
    [[self listView] reloadData];

    BOOL isExpanded = !wasExpanded;
    [self setExpanded:isExpanded];
} 
```

`[[self listView] reloadRowAtIndex:[self row]];`用代替似乎更好`[[self listView] reloadData]`，但不幸的是，这不起作用：如果用户隐藏细节——垂直缩小单元格——应该出现在屏幕上的新单元格不会。

**你写**

> 完成，并且工作正常。

听起来您能够成功实现类似于`-[TemplateListViewCell toggleDetail:]`.

**你写**

> 但是现在我想像在女巫细胞在那个细胞中打开之后那样开发我想在它上面添加一些额外的包含（控制器），那么如何使用给定的例子呢？请帮我提出一些建议。

听起来您希望 的实例在`TemplateListViewCell`扩展时包含额外的视图。

将此代码放入 中似乎很诱人`-[TemplateListViewCell toggleDetail]`，但这不会像我们希望的那样成功。问题是，我们需要处理扩展单元格被滚动出视图并滚动回视图的情况。

为了做到这一点，我们需要有一个扩展的概念，它在`PXListViewCell`子类实例的使用之外仍然存在：我们要么需要跟踪`PXListView`自身的扩展，要么跟踪它的委托。

更好的——但不太方便的——设计似乎是跟踪这些信息`PXListView`本身。然而，为了这个问题，我将演示如何跟踪委托中的单元格扩展。为此，我正在扩展`PXListViewDelegate`协议并对`PXListView`文件进行其他更改：

`1.` 添加方法

```
- (void)listView:(PXListView *)aListView setExpanded:(BOOL)expanded atRow:(NSUInteger)row;
- (BOOL)listView:(PXListView *)aListView expandedAtRow:(NSUInteger)row; 
```

到`PXListViewDelegate`.

`2.` 添加方法

```
- (void)setCell:(PXListViewCell *)cell expandedAtRow:(NSUInteger)row
{
    if ([[self delegate] respondsToSelector:@selector(listView:expandedAtRow:)]) {
        [cell setExpanded:[[self delegate] listView:self expandedAtRow:row]];
    }
} 
```

到`PXListView`.

`3.` 来自`-[PXListView setCell:expandedAtRow:]`_`-[PXListView layoutCells]`

```
- (void)layoutCells
{   
    //Set the frames of the cells
    for(id cell in _visibleCells)
    {
        NSInteger row = [cell row];
        [cell setFrame:[self rectOfRow:row]];

        [self setCell:cell expandedAtRow:row];

        [cell layoutSubviews];
    }

    NSRect bounds = [self bounds];
    CGFloat documentHeight = _totalHeight>NSHeight(bounds)?_totalHeight:(NSHeight(bounds) -2);

    //Set the new height of the document view
    [[self documentView] setFrame:NSMakeRect(0.0f, 0.0f, NSWidth([self contentViewRect]), documentHeight)];
} 
```

并从`-[PXListView layoutCell:atRow:]`：

```
- (void)layoutCell:(PXListViewCell*)cell atRow:(NSUInteger)row
{
    [[self documentView] addSubview:cell];
    [cell setFrame:[self rectOfRow:row]];

    [cell setListView:self];
    [cell setRow:row];
    [cell setHidden:NO];

    [self setCell:cell expandedAtRow:row];
} 
```

`4.` 设置`_expanded`为：`NO`_`-[PXListViewCell prepareForReuse]`

```
- (void)prepareForReuse
{
    _dropHighlight = PXListViewDropNowhere;
    _expanded = NO;
} 
```

*注意*：在[示例`PXListViewCell`子类中`MyListViewCell`，](https://github.com/Perspx/PXListView/blob/master/Classes/MyListViewCell.m)与 一起分发`PXListView`，调用的实现`-[MyListViewCell prepareForReuse]`失败`[super prepareForReuse]`。确保此调用是在`[TemplateListViewCell prepareForReuse]`：

```
- (void)prepareForReuse
{
    //...
    [super prepareForReuse];
} 
```

需要对`-[TemplateListViewCell toggleDetail:]`. 线

```
[self setExpanded:isExpanded]; 
```

需要替换为

```
[[[self listView] delegate] listView:[self listView] setExpanded:isExpanded atRow:[self row]]; 
```

一旦你设置好你`PXListView`的委托以正确处理新的委托方法，你就可以`[PXListViewCell setExpanded:]`在你的子类中重写`TemplateListViewCell`：

```
- (void)setExpanded:(BOOL)expanded
{
    if (expanded) {
        //add detail subviews
    } else {
        //remove detail subviews
    }
    [super setExpanded:expanded];
} 
```

替换`//add detail subviews`为您自己的代码，该代码以编程方式添加您想要的详细子视图，并替换`//remove detail subviews`为删除您想要的详细子视图的代码，首先检查它们是否存在。

**你写**

> 我想在上面添加一些额外的包含（控制器）

听起来您想将视图*控制器*而不是视图添加到您的`TemplateListViewCell`. 为此，请使用一个`NSBox`并将框设置`contentView`为您的视图控制器的`view`. （有关此的详细信息，请参阅[此答案](https://stackoverflow.com/a/6617947/1052673)。）

`NSBox`如果您打算只在扩展视图中显示单个视图控制器的视图`TemplateListViewCell`，您可以（1）添加一个属性来`TemplateListViewCell`引用您的视图控制器，（2）添加一个`NSBox`到`TemplateListViewCell`xib 并将其设置`contentView`为适当的视图控制器的视图`[cell setExpanded:YES]`和将其 contentView 设置为`nil`on `[cell setExpanded:NO]`。

# r - 使用输出中的参数

> ID：14031148
> 
> 赞同：0
> 
> 时间：2012-12-25T13:42:02.517
> 
> 标签：r, output

我有这个代码

```
out <- bugs(data, inits=inits,...) 
```

它的输出的一部分是

```
 mean    sd  2.5%    25%    50%
 beta1    0.0   0.0   0.0    0.0    0.0
 beta2    0.1   0.0   0.0    0.1    0.1 
```

我想知道如何使用测试版。例如，我如何计算 beta1*10。我试过`10*out$beta1`了，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:13:50.917

函数`bugs()`产生列表列表。参数的估计平均值位于名为 的子列表中`mean`。您可以按功能检查输出的整个结构`str(out)`。

```
out$mean$beta1
out$mean$beta2 
```

# javascript - 将 img 放入 div 容器中

> ID：14031154
> 
> 赞同：0
> 
> 时间：2012-12-25T13:42:47.263
> 
> 标签：javascript, jquery, css

使用 CSS2 和 JS 模拟即将到来的 CSS3 对象匹配属性的最佳方法是什么？我对包含和覆盖拟合的方法很感兴趣。

编辑：在 CSS3 中，这里描述了新的 object-fit 机制：[http](http://dev.opera.com/articles/view/css3-object-fit-object-position/) ://dev.opera.com/articles/view/css3-object-fit-object-position/但在 Opera 之外尚不支持 object-fit浏览器。要创建一个可移植的解决方案，我需要在不丢失图像的原始纵横比的情况下`img`扩大或缩小到其父级的大小。`div`这可以通过包含整个图像（技术也称为信箱）或通过放大和溢出图像直到最小尺寸与`div`' 尺寸匹配（技术也称为封面）来实现。那里有一些 jquery imagefit 库，它们非常有问题（也许它们只在特定浏览器的特定情况下工作）。

编辑2：那些花时间阅读它的人已经理解了这个问题，提出了一个很好的答案并给出了答案。很难理解关闭它的决定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T13:45:33.207

为什么要使用 JavaScript 或 CSS3 的东西？只需使用它就可以了

[**演示**](http://jsfiddle.net/ZxjrV/)

```
img {
   max-width: 100%;
   max-height: 100%;
}
/* This will resize you image according to the container size and 
   will retain the aspect ratio too */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T16:14:39.923

对于任何感兴趣的人，这是实际的工作解决方案：

[JSFiddle 演示](http://jsfiddle.net/ZxjrV/6/)

和实际代码：

```
(function($) {
  $.fn.imagefit = function(contain) {
    this.each( function() {
      var $this           = $(this),
          $wrapper        = $this.parent(),
          wrapper_width   = $wrapper.width(),
          wrapper_height  = $wrapper.height(),
          wrapper_ratio,
          image_ratio;

        // ratios
      image_ratio   = $this.width() / $this.height();
      wrapper_ratio = wrapper_width / wrapper_height;

      var ratio_cond = wrapper_ratio > image_ratio;
        if(contain) {
            ratio_cond = !ratio_cond;
        }

      if ( ratio_cond ) {
          $wrapper.css({
            'background'  : 'url('+$this.get(0).src+')',
            'background-size'  : '100% auto',
            'background-position'  : '0px 50%',
            'background-repeat'  : 'no-repeat'
          });
      } else {
          $wrapper.css({
            'background'  : 'url('+$this.get(0).src+')',
            'background-size'  : 'auto 100%',
            'background-position'  : '50% 0px',
            'background-repeat'  : 'no-repeat'
          });
      }

      $this.remove();

    });
    return this;
  };

  $('div.bgthumb#cover > img').imagefit(false);               
  $('div.bgthumb#contain > img').imagefit(true);               

}(jQuery));​ 
```

@Hippocrates：非常感谢您为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T14:40:41.893

如果您将图像设置为容器的背景，您将获得一个方便的 CSS 属性：background-size。值可以在这里看到：http: [//www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:00:11.827

如果您需要可拉伸背景的跨浏览器解决方案 - 可以使用一些插件，例如： [http ://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T16:32:42.683

这是另一种方式 - 不使用背景图像。（注意，现阶段我还没有担心定位）

[http://jsfiddle.net/Z5Hb8/2/](http://jsfiddle.net/Z5Hb8/2/)

```
$('.resize').each(function(){
var el = $(this).find('img'),
    pael = el.parent(),
    ph = pael.height(),
    pw = pael.width(),
    pr = pw/ph,
    img = new Image();

img.src = el.attr('src');
img.onload = function() {
    var w = this.width,
        h = this.height,
        sr = w/h;

    if (pael.hasClass('cover')) {
        if (pr > sr) {
            el.width(pw);   
        } else {
            el.height(ph);
        }
    } else if (pael.hasClass('contain')) {
        if (sr > pr) {
           el.width(pw);
        } else {
           el.height(ph);
        }
    }        
}
}); 
```

# php - Ionauth 用户首次登录 + 重新发送激活邮件

> ID：14031156
> 
> 赞同：1
> 
> 时间：2012-12-25T13:42:53.867
> 
> 标签：php, mysql, codeigniter, codeigniter-2, ion-auth

我目前在我的 codeigniter 项目中实现了 Ion_auth。注册后，将发送一封电子邮件以激活帐户。

目前我面临两个问题。

*如何重新发送激活邮件？
*如何查看用户是否是第一次登录网站？

希望你能帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:31:47.300

*如何重新发送激活邮件？*

你必须写几行代码来覆盖这个功能，看看 register 方法

[https://github.com/benedmunds/CodeIgniter-Ion-Auth/blob/2/libraries/Ion_auth.php#L292](https://github.com/benedmunds/CodeIgniter-Ion-Auth/blob/2/libraries/Ion_auth.php#L292)

*如何检查用户是否是第一次登录网站？*

同样在这里你必须自己实现这个功能：例如在`user`名为 first_login 的 datetime 类型的表中添加一个新字段。当用户登录时，您将检查是否为空，在这种情况下您插入第一次登录。

[https://github.com/benedmunds/CodeIgniter-Ion-Auth/blob/2/controllers/auth.php#L53](https://github.com/benedmunds/CodeIgniter-Ion-Auth/blob/2/controllers/auth.php#L53)

# xaml - windows8中wrapgrid中的项目方向

> ID：14031162
> 
> 赞同：0
> 
> 时间：2012-12-25T13:43:20.460
> 
> 标签：xaml, gridview, windows-8

我在我的应用程序中使用 wrapgrid 作为 itemspaneltemplate

```
<GridView x:Name="InfoGridView" Margin="50">
            <GridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid Orientation="Vertical" ItemWidth="200" ItemHeight="50"  Height="400" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <TextBlock Text="Name" Style="{StaticResource AppNameTextStyle}" />
            <TextBox x:Name="NameTextBox" Width="180"/>
            <Button x:Name="AnotherNameButton"  Style="{StaticResource AddAppBarButtonStyle}"/>
        </GridView> 
```

TextBlock、TextBox和Button都显示在item的中间，如何让它们显示在左边？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T22:43:40.970

通过在 ItemsPanel 条目下方添加以下 XAML，在 GridView中的[ItemContainerStyle](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.controls.itemscontrol.itemcontainerstyle%28v=vs.110%29.aspx)上进行设置。

```
 <GridView.ItemContainerStyle>
            <Style TargetType="GridViewItem">
                <Setter Property="HorizontalContentAlignment" Value="Left" />
            </Style>
        </GridView.ItemContainerStyle> 
```

# ruby - 未初始化常量 OCI8::Object::Mdsys::SdoGeometry

> ID：14031181
> 
> 赞同：0
> 
> 时间：2012-12-25T13:45:38.853
> 
> 标签：ruby, oracle, activerecord

由于某些原因，我需要修补 oracle 增强适配器。

在我的 oracle_enhanced_adapter.rb 文件中，我需要获取 OCI8::Object::Mdsys::SdoGeometry.new 返回值，但它返回未初始化的常量**OCI8::Object::Mdsys::SdoGeometry**。

但是，如果在执行 OCI8::Object::Mdsys::SdoGeometry.new 命令之前，我执行 OnlineGpsPoint.first 命令（OnlineGpsPoint 包含一个 sdo_geometry 列）并获取表中的一行 OCI8::Object::Mdsys： :SdoGeometry 将被初始化。

问题是我不想在我的程序中硬编码'OnlineGpsPoint'。我只需要 OCI8::Object::Mdsys::SdoGeometry 值。

有没有解决疼痛的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:05:32.240

当 ruby​​-oci8 发现未知对象类型时，它会自动在 OCI8::Object 下定义一个 ruby​​ 类。如果知道对象类型名，最好提前定义ruby类，如下：

```
# Oracle object type name is *guessed* from the ruby class name.
#   SdoGeometry => SDO_GEOMETRY ==(public synonym)=> MDSYS.SDO_GEOMETRY
class SdoGeometry < OCI8::Object::Base
end 
```

或者

```
# Set Oracle object type name explicitly
class AnyClassName < OCI8::Object::Base
  set_typename('MDSYS.SDO_GEOMETRY')
end 
```

如果您想与自动生成的类同名：

```
module OCI8::Object::Mdsys
  class SdoGeometry < OCI8::Object::Base
    set_typename('MDSYS.SDO_GEOMETRY')
  end
end 
```

# javascript - 如何使用链接添加内容 .append jQuery

> ID：14031182
> 
> 赞同：0
> 
> 时间：2012-12-25T13:45:44.900
> 
> 标签：javascript, jquery, append

示例代码

```
<div class='credit'>
Copy <a href="http://blabla.com">blabla</a>
</div> 
```

在上面的代码中，我将添加内容和链接

```
$(document).ready(function(){
$('.credit').append(' credit by <a href="http://www.blabladot.com">blabladot</a>');
}); 
```

但我试过了，没有用，代码怎么正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:52:01.053

您忘记包含**jQuery**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

[在这里工作 jsFiddle。](http://jsfiddle.net/nbbAY/)

如果您在博客模板中使用它，请检查[此](https://stackoverflow.com/questions/10319728/loading-jquery-in-a-blogger-post-causes-it-to-freeze)。我建议您查看您的开发人员控制台（在 chrome 中）或 firebug（在 firefox 中）是否有任何 javascript 错误，并在问题中提及它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:55:46.127

您需要确保在 HTML`<head></head>`部分中添加最新版本的 jQuery 库，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

此外，请确保在上述链接之后包含其他 jQuery 文件或脚本。

[工作小提琴演示](http://jsfiddle.net/VTw6J/)

# sql - 我需要创建一个 SQL 或 PLSQL 查询来合并和排序表中的数据

> ID：14031183
> 
> 赞同：0
> 
> 时间：2012-12-25T13:45:55.653
> 
> 标签：sql, plsql, gaps-and-islands

我正在尝试创建一个 SQL 查询，以帮助我从以下数据中获得正确的有序输出。

表中数据：

```
Cust   num     Eff_Date     Exp_date           
1001   1234    10-01-2010   20-06-2010      
1001   1234    20-06-2010   25-06-2010       
1001   1234    25-06-2010   12-02-2011          
1001   1234    12-02-2011   12-02-2011            
1001   3456    12-02-2011   25-07-2012      
1001   3456    25-07-2012   25-07-2012      
1001   1234    25-07-2012   25-07-2012      
1001   1234    25-07-2012   31-12-4700 
```

查询的预期输出：

```
Cust   num     Eff_Date     Exp_date           
1001   1234    10-01-2010   12-02-2011      
1001   3456    12-02-2011   25-07-2012      
1001   1234    25-07-2012   31-12-4700 
```

我希望能够使用单个 SQL 语句来完成上述工作。是否可以使用单个 SQL 语句执行上述操作？是否有其他方法可以执行上述操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:52:20.933

```
SELECT
  Customer,
  `number` AS Number,
  MIN(Eff_Date) AS Eff_Date,
  MAX(Exp_date) AS Exp_date
FROM tablename
GROUP BY Customer, number 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:05:06.163

这适用于 postgres，但它可以通过微小的变化适应 oracle，恕我直言。注意：我稍微更改了数据，因为重叠间隔对我来说看起来不合理。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE lutser
        ( cust INTEGER NOT NULL
        , num iNTEGER NOT NULL
        , eff_date DATE NOT NULL
        , exp_date DATE NOT NULL
        , PRIMARY KEY (cust, num, eff_date)
        );

SET datestyle=german;

INSERT INTO lutser(cust,num,eff_date,exp_date) VALUES
 (1001,1234,'10-01-2010', '20-06-2010' )
,(1001,1234,'20-06-2010', '25-06-2010' )
,(1001,1234,'25-06-2010', '12-02-2011' )
,(1001,1234,'12-02-2011', '12-02-2011' )
,(1001,3456,'12-02-2011', '25-07-2012' )
,(1001,3456,'25-07-2012', '25-07-2012' )
,(1001,1234,'25-07-2012', '25-08-2012' ) -- added a month to get unique PK
,(1001,1234,'25-08-2012', '31-12-4700' ) -- and here as well
        ;

VACUUM ANALYZE lutser;

-- SELECT * FROM lutser ORDER BY cust,num,eff_date;

-- EXPLAIN ANALYZE
WITH RECURSIVE island AS
        ( SELECT cust,num,eff_date,exp_date
        FROM lutser l0
        WHERE NOT EXISTS
                ( SELECT *
                FROM lutser nx
                WHERE nx.cust = l0.cust AND nx.num = l0.num
                AND nx.eff_date < l0.eff_date
                AND nx.exp_date >= l0.eff_date
                )
        UNION -- ALL
        SELECT isl.cust,isl.num, isl.eff_date,l1.exp_date
        FROM lutser l1
        JOIN island isl ON isl.cust = l1.cust AND isl.num = l1.num
                AND isl.eff_date < l1.eff_date
                AND isl.exp_date >= l1.eff_date
        )
SELECT DISTINCT ON (cust,num,eff_date) *
FROM island
ORDER BY cust,num,eff_date
        ; 
```

结果：

```
NOTICE:  drop cascades to table tmp.lutser
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "lutser_pkey" for table "lutser"
CREATE TABLE
SET
INSERT 0 8
VACUUM
 cust | num  |  eff_date  |  exp_date  
------+------+------------+------------
 1001 | 1234 | 10.01.2010 | 20.06.2010
 1001 | 1234 | 25.07.2012 | 25.08.2012
 1001 | 3456 | 12.02.2011 | 25.07.2012
(3 rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:18:08.873

在 Oracle 中，我们可以使用分析函数将岛屿组合在一起：

```
SQL> select c.cust, c.num, min(eff_date) eff_date, max(exp_Date) exp_date
  2    from (select c.cust, c.num, c.eff_date, c.exp_date, max(rn) over (partition by cust, num order by eff_date) grp
  3            from (select c.cust, c.num, c.eff_date, c.exp_date,
  4                         case
  5                           when lag(exp_date, 1) over (partition by cust, num order by eff_date) != eff_date
  6                           then
  7                             row_number() over (partition by cust, num order by eff_date)
  8                           when row_number() over (partition by cust, num order by eff_date) = 1
  9                           then
 10                             1
 11                        end rn
 12                    from cust c) c) c
 13    group by c.cust, c.num, grp
 14    order by eff_date;

      CUST        NUM EFF_DATE   EXP_DATE
---------- ---------- ---------- ----------
      1001       1234 10-01-2010 12-02-2011
      1001       3456 12-02-2011 25-07-2012
      1001       1234 25-07-2012 31-12-4700

SQL> 
```

# android - Android 无法播放音频 - Sencha Touch SDK 工具 2.0.0

> ID：14031185
> 
> 赞同：2
> 
> 时间：2012-12-25T13:46:05.633
> 
> 标签：android, html, sencha-touch, sencha-touch-2, html5-audio

我听说 Android 设备不播放 html5 中的某些音频文件（例如，它们支持 mp3，但不播放借助一些标准软件创建的文件：[链接](http://www.brianhadaway.com/html5-audio-support-on-android-devices/)）。

我尝试了不同的变体，但没有一个适合我。

例如[这里](http://docs.sencha.com/touch/2-0/#!/api/Ext.Audio)的标准示例：

```
Ext.create('Ext.Container', {
    fullscreen: true,
    layout: {
        type: 'vbox',
        pack: 'center'
    },
    items: [
        {
            xtype : 'toolbar',
            docked: 'top',
            title : 'Ext.Audio'
        },
        {
            xtype: 'toolbar',
            docked: 'bottom',
            defaults: {
                xtype: 'button',
                handler: function() {
                    var container = this.getParent().getParent(),
                        // use ComponentQuery to get the audio component (using its xtype)
                        audio = container.down('audio');

                    audio.toggle();
                    this.setText(audio.isPlaying() ? 'Pause' : 'Play');
                }
            },
            items: [
                { text: 'Play', flex: 1 }
            ]
        },
        {
            html: 'Hidden audio!',
            styleHtmlContent: true
        },
        {
            xtype : 'audio',
            hidden: true,
            url   : 'touch/examples/audio/crash.mp3'
        }
    ]
}); 
```

和 html 中的音频：

```
<audio controls>
  <source src="resources/sound/1.mp3" type="audio/mpeg">
Can't play sound on your device.
</audio> 
```

当我在 Chrome 浏览器的帮助下调试我的应用程序时，我听到了声音，但我在真实设备（Android 2.3.5）上听不到它。

在 html 变体的情况下，我看到一个滑块抽动并立即停留在进度条的末尾。在“播放”按钮的情况下，一切正常（图形、播放/暂停），除了缺少的声音。

我没有找到任何特殊的 Android 声音权限选项，所以，我认为权限不是原因。

**问题**。我错了，是否可以播放任何 mp3 音频？最简单的工作是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:46:50.150

Sencha Touch Audio 仅适用于 Android / Chrome 浏览器，不适用于设备。一种解决方案是使用[Phonegap](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)包装您的应用程序，并将[Media](http://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#Media)对象用于音频。很多麻烦，但大多数情况下它都有效。

# scala - FoldRight 函数

> ID：14031188
> 
> 赞同：0
> 
> 时间：2012-12-25T13:46:19.080
> 
> 标签：scala

我有这个使用 foldright 附加两个列表的函数

```
def append[T](l1: List[T], l2: List[T]): List[T] = (l1 :\ l2) ((a,b) => a::b) 
```

斯卡拉返回：

```
val l1 = List(1,2,3,4,5)
val l2 = List(6,7,8,9,10)
println(append(l1,l2))
Result: List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) 
```

从右到左开始，结果不应该是相反的吗？为什么以这种方式返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:58:01.867

foldRight 是从右到左执行的，所以迭代是，

1：a 为 5，b 为 6、7、8、9、10，结果为 5、6、7、8、9、10

2：a 为 4，b 为 5、6、7、8、9、10，结果为 4、5、6、7、8、9、10

...

最终结果是 1, 2, 3, ..., 8, 9, 10

# jquery - 如何在我的私人博客中显示代码块

> ID：14031189
> 
> 赞同：-5
> 
> 时间：2012-12-25T13:46:20.850
> 
> 标签：jquery, html, jquery-ui

我想在我的私人博客站点中显示代码块。我正在从头开始创建它。如何进行。我完全糊涂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:48:40.290

使用适当的标记使代码等宽并保持空白不变。这基本上意味着使用`<pre>`and `<code>`：

```
<pre><code>
your();
code = "here";
</code></pre> 
```

之后，您只需要添加一些漂亮的 CSS 样式以使其看起来不错。如果你想要像 Stack Overflow 上这样的语法高亮显示，最简单的方法就是添加谷歌的美化：[http ://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:49:54.597

尝试[语法荧光笔](http://alexgorbatchev.com/SyntaxHighlighter/)。它很容易，看起来真的很好。
**[演示链接](http://alexgorbatchev.com/SyntaxHighlighter/manual/demo/)**

# c# - 以编程方式滚动 .NET 浏览器窗口

> ID：14031191
> 
> 赞同：0
> 
> 时间：2012-12-25T13:46:56.717
> 
> 标签：c#, javascript, scroll, browser

要正确理解 - 这个问题有以下附件：

1.  我有一个带有惰性加载器的页面 - 滚动时激活
2.  惰性加载器由 JavaScript 处理
3.  在将加载 100% 的页面末尾 - 您将看到一个必须激活的按钮。

以下是我尝试编写的示例：

```
 _WebContent.wbThread1.Focus();
    int length = 100;

    new Thread(() =>
        {
            for (int i = 0; i <= length; i++)
            {
                System.Windows.Forms.SendKeys.Send("{PGDN}");

                Thread.Sleep(new TimeSpan(0, 0, 3));
                st.Start();
            }
        }).Start(); 
```

一切都很顺利，但是处理事件SendKey有问题，我们需要为事件聚焦区域，万一失去焦点不会花费任何东西。

* * *

我开始在 MSDN 上查找信息，发现处理滚动非常有趣：

```
_WebContent.wbThread1.Document.Body.ScrollIntoView (true) / / allows scrolling to the top
_WebContent.wbThread1.Document.Body.ScrollIntoView (false) / / allows scrolling to the bottom
_WebContent.wbThread1.Document.Body.ScrollLeft = 100, / / sets the offset to the left
_WebContent.wbThread1.Document.Body.ScrollTop = 100, / / sets the upward shift
var rect = _WebContent.wbThread1.Document.Body.ScrollRectangle; / / returns the current position 
```

这种功能组合并没有帮助。理论上代码是可行的，但实际上我在这个例子中没有成功。

处理滚动后的事件，我将执行类似的操作：

```
HtmlElementCollection _HtmlElementCollect = _WebContent.wbThread1.Document.GetElementsByTagName("A");
foreach (HtmlElement link in _HtmlElementCollect)
            {
                if (link.InnerText.Equals("Load More..."))
                    link.InvokeMember("Click");
            } 
```

**你有什么建议？我怎样才能最好地进行这种滚动？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:59:20.930

您可以使用滚动到底部

```
webCtrl.Document.Window.ScrollTo(0, Int32.MaxValue); 
```

# ruby-on-rails - 如何为开发和登台环境正确配置 mongoid？

> ID：14031194
> 
> 赞同：2
> 
> 时间：2012-12-25T13:47:26.040
> 
> 标签：ruby-on-rails, ruby, heroku, mongoid

我在本地机器上创建了两个开发环境，并在 heroku 上登台。

这是我的'mongoid.yml'：

```
development:
  sessions:
    default:
      database: mydb_development
      hosts:
        - localhost:27017
staging:
  sessions:
    default:
      database: mydb_staging
      uri: <%= ENV['MONGOLAB_URI'] %> 
```

Mongoid 在本地机器上正常工作，但在 heroku 部署后，我出现下一个错误：

```
/app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.14/lib/mongoid/config/validators/session.rb:81:in `validate_session_uri':  (Mongoid::Errors::MixedSessionConfiguration)
2012-12-25T10:12:44+00:00 app[web.1]: Problem:
2012-12-25T10:12:44+00:00 app[web.1]:   Both uri and standard configuration options defined for session: 'default'.
2012-12-25T10:12:44+00:00 app[web.1]: Summary:
2012-12-25T10:12:44+00:00 app[web.1]:   Instead of simply giving uri or standard options a preference order, Mongoid assumes that you have made a mistake in your configuration and requires that you provide one or the other, but not both. The options that were provided were: {"database"=>"xxxxx_staging", "uri"=>"mongodb://xxxxx:xxxxx@xxxxx.mongolab.com:37587/xxxxxx"}.
2012-12-25T10:12:44+00:00 app[web.1]: Resolution:
2012-12-25T10:12:44+00:00 app[web.1]:   Provide either only a uri as configuration or only standard options. 
```

什么短语“仅提供 uri 作为配置或仅提供标准选项”是什么意思？如何正确配置 mongoid 以进行开发和登台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T13:48:58.307

删除这一行：

```
database: mydb_staging 
```

因为数据库名称存在于 URI 中。

# javascript - 如何获取 Ext.form.field.ComboBox 中选中项的索引？

> ID：14031195
> 
> 赞同：0
> 
> 时间：2012-12-25T13:47:33.137
> 
> 标签：javascript, extjs, extjs4

如何获取 ExtJS4 中 xtype 组合的选定项目的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:51:42.653

您可以通过将事件处理程序附加到**beforeselect**事件来获取它。在此处查看该事件的文档：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-event-beforeselect](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-event-beforeselect)

# asp.net - PageLoad 中的客户端计算机（浏览器）属性

> ID：14031196
> 
> 赞同：2
> 
> 时间：2012-12-25T13:47:42.287
> 
> 标签：asp.net, browser, settings, httprequest

当页面请求时，我可以知道客户端计算机（浏览器）的属性，例如屏幕宽度吗？我需要它，因为我不想在客户端使用 jquery 来设置采用客户端浏览器的必要更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:56:42.510

很不幸的是，不行; 没有一些客户端信息的纠缠，就无法从浏览器中获取屏幕大小等信息。`PageLoad`基本上可以让您访问基本请求信息，除非您让客户端脚本收集并提交此类信息，否则这些信息都不包含有关浏览器/窗口大小的任何信息

# matlab - 如何从 Scope (Simulink) 获得最大值

> ID：14031198
> 
> 赞同：4
> 
> 时间：2012-12-25T13:48:03.130
> 
> 标签：matlab, math, simulink

我想从 Matlab Simulink 范围内的 sinusoid 中只获得一个数字（最大值）。我有一个电压测量来测量交流电压和电流测量。我需要找到最大值。在我的示例中，电压为 231V，电流为 0.26。结果数是 231*0.26 = .. 要倍数，我需要从 sinusoid 获取最大数。

![在此处输入图像描述](../Images/e3040b4200826cd13df9393151a7395c.png)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:52:36.947

我曾经在工程学院学习过 matlab，我认为您需要将正弦曲线的输出链接到一个名为 minmax 的框

[http://www.mathworks.com/help/simulink/slref/minmax.html](http://www.mathworks.com/help/simulink/slref/minmax.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T13:59:26.840

根据您的描述，我认为[MinMax Running Resettable](http://www.mathworks.com/help/simulink/slref/minmaxrunningresettable.html)块更适合您的应用程序。

[MinMax](http://www.mathworks.com/help/simulink/slref/minmax.html)模块将采用多个标量值输入（或向量输入）并在当前时刻输出这些输入的最小值或最大值（取决于您的设置）。这将更好地用于比较两个信号，而不是找到信号数据的特定“流”的最大值。

因此，例如，假设您有一个*正弦波*模块，该模块正在输入一个*MinMax*模块（已设置为输出最大值）。*MinMax*模块将在当前时刻查看其所有输入并输出最大值。然而，在这种情况下，*MinMax*只有一个输入——正弦波。所以*MinMax的输出实际上与**Sine Wave*模块的输出相同。

另一方面，*MinMax Running Resettable*输出所有过去输入的最小值或最大值。例如，如果您有一个峰值为 231 的正弦波被馈送到*MinMax Running Resettable模块的***u**输入，那么在模拟结束时，该模块将输出 231。当然，这是，前提是您的模拟运行时间足够长，正弦波已达到其峰值。

 *请注意，*MinMax Running Resettable*模块是可用于复位模块的**R输入。**如果您只是想随着时间的推移找到信号的最大值并且不需要重置模块，那么您可以继续并保持此输入断开连接。*

# jndi - Jetty 8（嵌入式）与 HSQLDB 数据源

> ID：14031200
> 
> 赞同：0
> 
> 时间：2012-12-25T13:48:18.627
> 
> 标签：jndi, hsqldb, embedded-jetty

我已经绝望地尝试了整整两天，通过 JNDI 通过 Jetty (8.1.8.v20121106) 公开使用 HSQLDB 的数据源。那里的大多数教程都已过时：例如[http://dinukaroshan.blogspot.com/2012/04/setting-up-jndi-with-jetty-embedded.html](http://dinukaroshan.blogspot.com/2012/04/setting-up-jndi-with-jetty-embedded.html)使用 Jetty 6，从包中可以明显看出使用的名称（Mortbay 而不是 eclipse），或者他们只专注于`jetty.xml`和`jetty-env.xml`文件，而没有提供任何 Java 代码示例来说明他们如何使用这样的配置文件： [http ://wiki.eclipse.org/Jetty/功能/JNDI#Example_Webapps](http://wiki.eclipse.org/Jetty/Feature/JNDI#Example_Webapps)

我最好的尝试给了我以下结果：

```
java.lang.Exception: javax.naming.NameNotFoundException; remaining name 'env/jdbc/MySqlDS'
    at wavemark.dcpcontroller.controllerws.db.DBProxy.getConnection(DBProxy.java:47)
    at test.wavemark.dcpcontroller.controllerws.webservice.TestDCPControllerWS.getConnection(TestDCPControllerWS.java:97)
    at org.dbunit.DatabaseTestCase.newDatabaseTester(DatabaseTestCase.java:85)
    at org.dbunit.DatabaseTestCase.getDatabaseTester(DatabaseTestCase.java:109)
    at org.dbunit.DatabaseTestCase.tearDown(DatabaseTestCase.java:164)
    at test.wavemark.dcpcontroller.controllerws.webservice.TestDCPControllerWS.setUp(TestDCPControllerWS.java:33)
    at junit.framework.TestCase.runBare(TestCase.java:132)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:232)
    at junit.framework.TestSuite.run(TestSuite.java:227)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: javax.naming.NameNotFoundException; remaining name 'env/jdbc/MySqlDS'
    at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:505)
    at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:536)
    at org.eclipse.jetty.jndi.NamingContext.lookup(NamingContext.java:551)
    at org.eclipse.jetty.jndi.java.javaRootURLContext.lookup(javaRootURLContext.java:117)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at wavemark.dcpcontroller.controllerws.db.DBProxy.getConnection(DBProxy.java:43)
    ... 19 more 
```

我的`jetty.xml`文件如下：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

<Configure id='wac' class="org.eclipse.jetty.server.Server">

  <!-- ==============================================================  -->
  <!-- Add the DataSource(s) only valid for this webapp below          -->
  <!-- ==============================================================  -->

  <New id="MySqlDS" class="org.eclipse.jetty.plus.jndi.Resource"> 
    <Arg>jdbc/MySqlDS</Arg>
    <Arg>
        <Set name="driverClass">org.hsqldb.jdbcDriver</Set>
        <!--<Set name="url">jdbc:hsqldb:sample</Set>-->
        <Set name="user">sa</Set>
        <Set name="password"></Set>
    </Arg>
  </New>

</Configure> 
```

我在我的`web.xml`（这恰好是一个axis2 Web应用程序）中添加了以下内容：

```
 <resource-ref>
    <res-ref-name>jdbc/MySqlDS</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

这是我用来使用 Jetty 配置的 Java 代码：

```
public ServerManager(int webServerPort,String jettyConfigurationsFilePath, String webApplicationPath) throws Exception
    {
        System.out.println("Initializing server");
        this.webServerPort = webServerPort;
        this.webApplicationPath = webApplicationPath;

        server = new Server(webServerPort);
        XmlConfiguration configuration = new XmlConfiguration(new File(jettyConfigurationsFilePath).toURI().toURL());
        configuration.configure(server);
        System.out.println("Finished configuring Jetty Server...");

        System.out.println("Server initialized");
        System.out.println("Server state is now " + server.getState());
        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setWar(webApplicationPath);
        server.setHandler(webapp);

    } 
```

我究竟做错了什么？是否有最新的教程允许我使用 HSQLDB 作为我的 DBMS、JNDI 来公开数据源和 Jetty8？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:38:27.427

这不是一个完整的答案，但在您提供的第二个 wiki 链接中显而易见的是使用数据源。创建 javax.sql.DataSource 的一个实例。HSQLDB 的设置是这样的，当在给定示例中使用它而不是 Derby 时：

```
<Configure id='wac' class="org.eclipse.jetty.webapp.WebAppContext">
...
<New id="myds" class="org.eclipse.jetty.plus.jndi.Resource">
  <Arg><Ref id="wac"/></Arg>
  <Arg>jdbc/mydatasource</Arg>
  <Arg>
    <New class="org.hsqldb.jdbc.JDBCDataSource">
      <Set name="DatabaseName">file:mytestdb</Set>
      <Set name="User">SA</Set>
      <Set name="Password"></Set>
    </New>
  </Arg>
</New>
</Configure> 
```

# wordpress - 显示来自 wp_nav_menu 的帖子内容？

> ID：14031201
> 
> 赞同：0
> 
> 时间：2012-12-25T13:48:18.510
> 
> 标签：wordpress

我制作了一个列出一堆帖子的 wp 菜单。我可以列出这些帖子的标题，但不能列出其内容。

wp_nav_menu(array('menu' => '兼容性矩阵'));

我如何显示每个项目的内容（帖子标题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:20:59.127

您不能使用 wp_nav_menu 函数列出帖子的内容，该函数仅用于创建带有帖子/页面标题或您分配菜单项的自定义标题的导航菜单。

您需要使用循环来显示内容。这是一个非常基本的循环：

```
<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>

    <?php the_content(); ?>

<?php endwhile; ?>
<?php endif; ?> 
```

您可以修改它以满足您的需要。这里有一些资源可以帮助您：

[http://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

[http://wp.tutsplus.com/tutorials/theme-development/a-beginners-guide-to-the-wordpress-loop/](http://wp.tutsplus.com/tutorials/theme-development/a-beginners-guide-to-the-wordpress-loop/)

# java - Apache POI 率公式与长时间不一致

> ID：14031208
> 
> 赞同：3
> 
> 时间：2012-12-25T13:49:00.260
> 
> 标签：java, apache-poi

为了模拟 Excel 的速率函数，我使用了从 svn中获取的[Apache POI速率函数：](https://en.wikipedia.org/wiki/Apache_POI)

```
private double calculateRate(double nper, double pmt, double pv, double fv, double type, double guess) {

  //FROM MS http://office.microsoft.com/en-us/excel-help/rate-HP005209232.aspx
  int FINANCIAL_MAX_ITERATIONS = 20; //Bet accuracy with 128
  double FINANCIAL_PRECISION = 0.0000001; //1.0e-8

  double y, y0, y1, x0, x1 = 0, f = 0, i = 0;
  double rate = guess;
  if (Math.abs(rate) < FINANCIAL_PRECISION) {
     y = pv * (1 + nper * rate) + pmt * (1 + rate * type) * nper + fv;
  }
  else {
     f = Math.exp(nper * Math.log(1 + rate));
     y = pv * f + pmt * (1 / rate + type) * (f - 1) + fv;
  }
  y0 = pv + pmt * nper + fv;
  y1 = pv * f + pmt * (1 / rate + type) * (f - 1) + fv;

  // Find root by the Newton secant method
  i = x0 = 0.0;
  x1 = rate;
  while ((Math.abs(y0 - y1) > FINANCIAL_PRECISION) && (i < FINANCIAL_MAX_ITERATIONS)) {
     rate = (y1 * x0 - y0 * x1) / (y1 - y0);
     x0 = x1;
     x1 = rate;

     if (Math.abs(rate) < FINANCIAL_PRECISION) {
        y = pv * (1 + nper * rate) + pmt * (1 + rate * type) * nper + fv;
     }
     else {
        f = Math.exp(nper * Math.log(1 + rate));
        y = pv * f + pmt * (1 / rate + type) * (f - 1) + fv;
     }

     y0 = y1;
     y1 = y;
     ++i;
  }
  return rate; 
```

}

对于calculateRate(120, 28.1, -2400, 0, 0, 0.1))，输出与Excel相同：**0.599**

但是，如果我尝试相同的计算，这次使用以下值：

```
calculateRate(360, 15.9, -2400, 0, 0, 0.1)) 
```

在 Excel 中，我得到**0.580**，程序返回**-1.1500428517726355**。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T01:34:38.147

您在问题中粘贴的这段代码有很多问题。

它假定总是找到一个费率（不正确），并且没有为找不到费率的情况做准备。

一些语句会抛出一个错误，这可以通过使用更合适的编程语句来避免。例如，从您的代码中获取以下语句：

```
f = Math.exp(nper * Math.log(1 + rate)); 
```

当尝试查找负值或零值的 Log 时，这将引发错误。它可以被重写为

```
f = Math.pow(1 + rate, nper); 
```

迭代计算中的注释指出它正在编程[割线方法](https://en.wikipedia.org/wiki/Secant_method)，但检查迭代计算是否收敛错误变量。当它应该测试利率的收敛时，它正在测试未来值的收敛。

我将您的代码复制粘贴到记事本中，并删除了 Java 的变量声明，并将其替换为 JavaScript 变量声明，以使用您的示例数据测试代码。正如我所说，代码在第二次迭代时停止，因为未来值的差异超出了误差范围，并且由于没有测试是否找到利率，代码按原样返回利率和一个这是错误的。

我不确定为什么此代码在它确实报告正确率的情况下起作用，就像第一个数据集的情况一样。我建议以正确的方式重新编码函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-30T06:15:38.620

```
public double rate(double nper, double pmt, double pv)
{
    //System.out.println("function rate : " + nper + " " + pmt + " pv " + pv);

    double error = 0.0000001;
    double high =  1.00;
    double low = 0.00;

    double rate = (2.0 * (nper * pmt - pv)) / (pv * nper);

    while(true) {
        // Check for error margin
        double calc = Math.pow(1 + rate, nper);
        calc = (rate * calc) / (calc - 1.0);
        calc -= pmt / pv;

        if (calc > error) {
            // Guess is too high, lower the guess
            high = rate;
            rate = (high + low) / 2;
        } 
        else if (calc < -error) {
            // Guess is too low, higher the guess.
            low = rate;
            rate = (high + low) / 2;
        } 
        else {
            // Acceptable guess
            break;
        }
    }

    //System.out.println("Rate : " + rate);
    return rate;
} 
```

示例：`=RATE(60, 2112500, 65000000)`返回 0.025198；与 Excel 相同（正确）。

# java - 是否可以做 if(Object)

> ID：14031209
> 
> 赞同：1
> 
> 时间：2012-12-25T13:49:03.603
> 
> 标签：java

所以我想知道是否有可能拥有一个具有布尔值的自定义类。

在您的主程序中，您可以执行以下操作：

```
if(CustomClassVariable){

} 
```

像布尔类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T13:50:10.607

不可以。Java 中条件内的任何内容都必须是严格的`boolean`值。`Boolean`由于自动装箱，该课程有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:59:05.043

只有你可以这样做

```
 Boolean customClassVariable = Boolean.TRUE;
    if(customClassVariable) {
        // do something
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:10:06.507

自动装箱是将原始类型自动封装到其等效对象中的过程。在java中，您在if中给出的条件应该是布尔类型。你也可以给一个布尔类型的对象，java会自动将它拆箱为布尔类型。你不能创建一个自定义类并要求java将它自动装箱为布尔类型。

# objective-c - 从另一个视图控制器关闭视图控制器

> ID：14031213
> 
> 赞同：0
> 
> 时间：2012-12-25T13:49:13.743
> 
> 标签：objective-c, xcode

我对 iPhone 应用程序开发非常陌生。
我正在尝试从另一个视图中关闭/删除一个视图，但有些它对我不起作用。

我应该如何从另一个视图控制器中关闭/删除视图控制器。

有两种观点`A`和`B`。
View正在使用以下代码 `A`打开视图。`B`

```
ViewBScreenController *mViewB = [[ViewBScreenController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:mViewB animated:YES]; 
```

但是有些我无法`B`从视图控制器 A关闭视图。
怎么做？

**- - 更新 - -**

正如答案中所问的那样，为什么我需要从视图 A 关闭视图 B，因为我正在从应用层下面获取事件到视图控制器 A，并且在某些事件上我想从视图 A 关闭视图 B。

也可以向视图 B 发送一些事件以关闭自身。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:34:58.657

在一个

```
- (void)viewDidLoad
{
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(XXXXX)        name:@"RRRR" object:nil];
}

-(void)XXXXX{

/* any method  you wont */
[self dismissModalViewControllerAnimated:YES];
//////////////////////////

} 
```

在B或C或D等......

```
-(IBAction)Btn:(id)sender{

[[NSNotificationCenter defaultCenter] postNotificationName:@"RRRR" object:nil];

} 
```

它会成功的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:21:25.083

您使用的方法已弃用，请改用：

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion; 
```

有了这个，你从 A 呈现 B。
当你想回到 A 时，你做相反的事情：你从 B 呈现 A。
如何？有几种方法，例如使用观察者通知。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T13:52:57.047

尝试阅读有关视图控制器编程指南的惊人文档：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1)

它会回答你所有的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T13:54:17.967

你正在寻找`dismissViewControllerAnimated:completion:`

文档在这里：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

通常，您应该让呈现模态视图控制器的视图控制器将其关闭，但它也可以自行关闭。该消息将自动转发给提供它的 VC。我会以不那么“神奇”的方式来做：

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-25T13:55:52.227

如果用户在视图 B，为什么要从视图 A 中关闭视图 B。既然关闭操作来自何处并不重要，为什么不简单地用简单的关闭视图 B`dismissModalViewController`的操作来关闭视图 B输入

```
 - (IBAction)goBack:(id)sender {
    [self dismissModalViewControllerAnimated:YES];

} 
```

因此，使用此代码，您应该能够毫无问题地关闭模态视图控制器。并且可以从任一视图中将其关闭，但如果存在视图 B，则用户无法与按钮交互或在视图 A 上创建操作。

# opencl - OpenCL 奇怪的内核行为

> ID：14031220
> 
> 赞同：0
> 
> 时间：2012-12-25T13:50:44.213
> 
> 标签：opencl, gpgpu, nvidia

我还是 OpenCL 的新手，我正在用 Nvidia 示例进行一些测试，整个程序由 5 个内核组成，这些内核按顺序执行（1、2、3、4、5）。

第一个内核简单地获取位置数据、速度数据，并应用重力和基本碰撞检测，然后调整该位置和速度……这个内核完美运行，没有问题。

这是第一个内核：

```
__kernel void integrate(
__global float4 *d_Pos,  //input/output
__global float4 *d_Vel,  //input/output
__constant simParams_t *params,
float deltaTime,
uint numParticles
){
const uint index = get_global_id(0);
if(index >= numParticles)
    return;

float4 pos = d_Pos[index];
float4 vel = d_Vel[index];

pos.w = 1.0f;
vel.w = 0.0f;

//Gravity
vel += (float4)(params->gravity.x, params->gravity.y, params->gravity.z, 0) * deltaTime;
vel *= params->globalDamping;

//Advance pos
pos += vel * deltaTime;

//Collide with cube
if(pos.x < -1.0f + params->particleRadius){
    pos.x = -1.0f + params->particleRadius;
    vel.x *= params->boundaryDamping;
}
if(pos.x > 1.0f - params->particleRadius){
    pos.x = 1.0f - params->particleRadius;
    vel.x *= params->boundaryDamping;
}

if(pos.y < -1.0f + params->particleRadius){
    pos.y = -1.0f + params->particleRadius;
    vel.y *= params->boundaryDamping;
}
if(pos.y > 1.0f - params->particleRadius){
    pos.y = 1.0f - params->particleRadius;
    vel.y *= params->boundaryDamping;
}

if(pos.z < -1.0f + params->particleRadius){
    pos.z = -1.0f + params->particleRadius;
    vel.z *= params->boundaryDamping;
}
if(pos.z > 1.0f - params->particleRadius){
    pos.z = 1.0f - params->particleRadius;
    vel.z *= params->boundaryDamping;
}

//Store new position and velocity
d_Pos[index] = pos;
d_Vel[index] = vel;
} 
```

第二个内核将这些位置作为输入并输出另一种数据（一些索引），但它不会更改位置数据。

第三个内核正在对第二个内核输出进行调整（从不涉及位置数据的第二个内核获取数据）。

现在解决问题...第四个内核；这需要位置数据和速度数据（来自第一个内核），从第三个内核获取调整后的数据，输出另一个位置和速度数据（这些位置和速度的指针完全不同）

这是第四个内核：

```
__kernel void findCellBoundsAndReorder(
__global uint   *d_CellStart,     //output: cell start index
__global uint   *d_CellEnd,       //output: cell end index
__global float4 *d_ReorderedPos,  //output: reordered by cell hash positions
__global float4 *d_ReorderedVel,  //output: reordered by cell hash velocities

__global const uint   *d_Hash,    //input: sorted grid hashes
__global const uint   *d_Index,   //input: particle indices sorted by hash
__global const float4 *d_Pos,     //input: positions array sorted by hash
__global const float4 *d_Vel,     //input: velocity array sorted by hash
__local uint *localHash,          //get_group_size(0) + 1 elements
uint    numParticles
){
uint hash;
const uint index = get_global_id(0);

//Handle case when no. of particles not multiple of block size
if(index < numParticles){
    hash = d_Hash[index];

    //Load hash data into local memory so that we can look 
    //at neighboring particle's hash value without loading
    //two hash values per thread
    localHash[get_local_id(0) + 1] = hash;

    //First thread in block must load neighbor particle hash
    if(index > 0 && get_local_id(0) == 0)
        localHash[0] = d_Hash[index - 1];
}

barrier(CLK_LOCAL_MEM_FENCE);

if(index < numParticles){
    //Border case
    if(index == 0)
        d_CellStart[hash] = 0;

    //Main case
    else{
        if(hash != localHash[get_local_id(0)])
            d_CellEnd[localHash[get_local_id(0)]]  = d_CellStart[hash] = index;
    };

    //Another border case
    if(index == numParticles - 1)
        d_CellEnd[hash] = numParticles;

    //Now use the sorted index to reorder the pos and vel arrays
    uint sortedIndex = d_Index[index];
    float4 pos = d_Pos[sortedIndex];
    float4 vel = d_Vel[sortedIndex];

    d_ReorderedPos[index] = pos;
    d_ReorderedVel[index] = vel;
}
} 
```

问题是如果我单独执行内核 1（或 1+2，或 1+2+3）位置和速度从第一个内核正确调整。

但是如果我执行内核 1+2+3+4（尽管内核 4 没有改变输入数据），数据保持不变（好像我没有执行任何东西......位置没有调整）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:26:41.893

好吧，我已经解决了问题..我在第三个内核本地组大小上做错了，在修复了所有事情都正确之后，对此感到抱歉

# sql - 在 SQL 中重命名 SELECT * 中的单个列，选择除一列之外的所有列

> ID：14031225
> 
> 赞同：24
> 
> 时间：2012-12-25T13:51:28.380
> 
> 标签：sql, select

这就是我想要做的 - 我有一个包含很多列的表，并且想要创建一个视图，其中一个列根据其他列中的某些值组合重新分配，例如

`Name, Age, Band, Alive ,,, <too many other fields)`

我想要一个将重新分配其中一个字段的查询，例如

```
Select *, Age = 
CASE When "Name" = 'BRYAN ADAMS' AND "Alive" = 1 THEN 18
     ELSE "Age"
END
FROM Table 
```

但是，我现在拥有的架构是`Name, Age, Band, Alive,,,,<too many>,, Age`

我可以在我的选择语句中使用“AS”来实现 `Name, Age, Band, Alive,,,,<too many>,, Age_Computed.`

但是，我想达到 `Name, Age, Band, Alive.,,,,`Age 实际上是计算年龄的原始模式。

我可以在哪里进行选择性重命名`SELECT * and A_1 as A, B_1 as b`？（然后 A_1 完全消失）或选择性 * 我可以选择除某些列之外的所有列？（这也将解决上一个语句中提出的问题）

我知道枚举所有列并创建适当查询的 hacky 方式，但我仍然希望有一种“更简单”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T16:15:51.467

抱歉，不，没有一种方法可以根据需要使用`SELECT *`构造替换现有的列名。

明确定义列总是更好，特别是对于视图，并且永远不要使用`SELECT *`. 只需在创建视图时使用表的 DDL 作为模型。这样，您可以更改您想要的任何列定义（如您的问题）并消除不适合视图的列。我们使用这种技术来屏蔽或消除包含敏感数据（如社会安全号码和密码）的列。marc_s 在评论中提供的链接是一个很好的阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-09T11:11:20.660

谷歌 BigQuery 支持[`SELECT * REPLACE`](https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#select-replace)：

> SELECT * REPLACE 语句指定一个或多个表达式 AS 标识符子句。每个标识符必须与 SELECT * 语句中的列名匹配。
> 
> 在输出列列表中，与 REPLACE 子句中的标识符匹配的列将替换为该 REPLACE 子句中的表达式。
> 
> SELECT * REPLACE 语句不会更改列的名称或顺序。但是，它可以更改值和值类型。

* * *

```
Select *, Age = CASE When "Name" = 'BRYAN ADAMS' AND "Alive" = 1 THEN 18
                     ELSE "Age"
                END
FROM tab
=>
SELECT * REPLACE(CASE WHEN Name = 'BRYAN ADAMS' AND Alive = 1 THEN 18
                      ELSE Age END AS Age)
FROM Tab 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-19T14:53:35.893

实际上，在 MySQL 中有一种方法可以做到这一点。您需要使用 hack 选择除[此处](https://stackoverflow.com/questions/9122/select-all-columns-except-one-in-mysql)`AS`发布的一列之外的所有列，然后在语句中单独添加它。

这是一个例子：

```
-- Set-up some example data
DROP TABLE IF EXISTS test;
CREATE TABLE `test` (`ID` int(2), `date` datetime, `val0` varchar(1), val1 INT(1), val2 INT(4), PRIMARY KEY(ID, `date`));
INSERT INTO `test` (`ID`, `date`, `val0`, `val1`, `val2`) VALUES
(1, '2016-03-07 12:20:00', 'a', 1, 1001),
(1, '2016-04-02 12:20:00', 'b', 2, 1004),
(1, '2016-03-01 10:09:00', 'c', 3, 1009),
(1, '2015-04-12 10:09:00', 'd', 4, 1016),
(1, '2016-03-03 12:20:00', 'e', 5, 1025);

-- Select all columns, renaming 'val0' as 'yabadabadoo':
SET @s = CONCAT('SELECT ', (SELECT REPLACE(GROUP_CONCAT(COLUMN_NAME), 'val0,', '') 
  FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'test' AND TABLE_SCHEMA = 
  '<database_name>'), ', val0 AS `yabadabadoo` FROM test');

PREPARE stmt1 FROM @s;
EXECUTE stmt1; 
```

# c# - 使用 lambda 表达式的 C# 二级排序

> ID：14031226
> 
> 赞同：2
> 
> 时间：2012-12-25T13:51:35.037
> 
> 标签：c#

如何在 C# 中使用二次排序对列表进行排序。例如，如果我有一个名为 Student 的类，它有两个字段 FirstName 和 LastName。到目前为止，我对列表进行了如下排序：

```
MyStudents.Sort((s1, s2) => s1.LastName.CompareTo(s2.LastName)); 
```

我想知道如何先按姓氏然后按名字对列表进行排序。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T13:52:47.000

`Sort`没有那个能力。

Linq 可以简单地做到这一点：

```
MyStudents.OrderBy(s => s.LastName).ThenBy(s => s.FirstName) 
```

确保您至少使用 .NET 3.5 并`System.Linq`引用了命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T13:53:06.623

您可以使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)：

```
MyStudents.OrderBy(e => e.LastName).ThenBy(e => e.FirstName); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T13:54:25.983

您可以使用[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)和[ThenBy](http://msdn.microsoft.com/en-us/library/bb534743.aspx)

```
var sortedList = MyStudents.OrderBy(s => s.LastName).ThenBy(s=> s.FirstName); 
```

注意`OrderBy`and`ThenBy`不会改变 list 的顺序并且它们`MyStudents`返回一个`IEnumerable<Student>`，所以如果你需要一个.`List<Student>`[`ToList()`](http://msdn.microsoft.com/it-it/library/bb342261%28v=vs.95%29.aspx)

# ember.js - ember-data 自定义适配器 createRecord 模型为空

> ID：14031227
> 
> 赞同：2
> 
> 时间：2012-12-25T13:51:50.057
> 
> 标签：ember.js, ember-data

我正在尝试根据文档创建一个自定义适配器，但我遇到了一个问题，即传递给 createRecord 的模型是一个空的 ember-data 对象（使用 console.log(model) 尝试过，没有属性）。

将 RESTAdapter 与完全相同的应用程序一起使用就可以了。

```
createRecord: function(store, type, model) {
    if (type == App.Entity) {
        var url = '/api/entities/%@';
    }

    jQuery.ajax({
        url: url.fmt(model.get('id')),
        data: {entity: model.get('data')},
        dataType: 'json',
        type: 'POST',

        success: function(data) {
            store.didCreateRecord(model, data.entity);
        }
    });
} 
```

# android - 硬件加速错误的可绘制颜色

> ID：14031231
> 
> 赞同：0
> 
> 时间：2012-12-25T13:52:09.487
> 
> 标签：android

我的应用默认是硬件加速的（android:hardwareAccelerated="true" 在清单中设置）。

我有一个可绘制对象，我将其设置为视图的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <stroke
        android:width="1px"
        android:color="#666666" />

    <solid android:color="@android:color/transparent" />

</shape> 
```

我也有另一种看法：

```
 <View
        android:id="@+id/divider"
        android:layout_width="fill_parent"
        android:layout_height="1px"
        android:background="#666666" /> 
```

两者的线宽和颜色应该相同。如果我设置它们是一样的

```
setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

但！如果我没有为具有可绘制背景的视图设置软件层类型，我会得到 2 条不同的线：

- 有颜色背景的线没问题，

- 另一个变成 2px 宽，用 2 种颜色绘制：#333333 和 #191919。

你能帮我么？为什么它会这样？我怎样才能在不禁用硬件加速的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:47:57.647

1dp 线对我来说太宽了。我需要尽可能窄的线，1px 符合我的要求。

我实际上设法解决了这个问题。确实 1px 形状线在硬件加速开启的情况下渲染不正确，你无能为力。相反，我在 nodpi 目录中使用了 9patch drawable。它准确地显示了我想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T12:57:24.987

使用与密度无关的像素 (dp) 或常规像素 (px)

```
 <stroke
        android:width="1dp"
        android:color="#666666" /> 
```

和

```
<View
        android:id="@+id/divider"
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#666666" /> 
```

# c - 无法创建共享内存 C

> ID：14031240
> 
> 赞同：2
> 
> 时间：2012-12-25T13:52:55.657
> 
> 标签：c, unix, ubuntu, shared-memory

以下代码始终返回`-1`以创建共享内存。我不知道它的原因。据我所知，我的代码是正确的。`Perror returns not such file or directory`. 我不知道它指向什么，但是这个文件和标题在同一个目录中。这是代码：

```
#include "MyShared.h"

int main()
{
struct MyShared *obj;

int shmid,i,childpid;

shmid=shmget(MySharedKey,sizeof(struct MyShared),PERM);
if(shmid==-1)
    printf("Failed to create shared mem\n");
obj=(struct MyShared*)shmat(shmid,NULL,0);

obj->ReadFromBuf=0;
....
} 
```

这是头文件。`My Shared.h`

```
#ifndef MYSHARED_H_INCLUDED
#define MYSHARED_H_INCLUDED

#include <unistd.h>
#include <sys/stat.h>
#include <fcntl.h>

#define PERM (S_IRWXU | S_IRGRP)
#define MySharedKey 564732
#define SIZE 512  // 512 bytes

struct MyShared
{
    char buf[SIZE];

    int ReadFromBuf,WriteToBuf,readbytes;
};

#endif 
```

为什么这段代码不能创建共享内存？

我正在使用 ubuntu 10.04。

我正在关注`Unix System programming by Stevens`，它没有说明任何内容或共享内存的创建权限。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:00:30.773

代替

```
printf("Failed to create shared mem\n"); 
```

更好地使用

```
perror("Failed to create shared mem"); 
```

这会评估`errno`变量并打印更有用的错误消息，在您的情况下类似于

```
Failed to create shared mem: No such file or directory 
```

原因是您尝试附加到不存在的内存段。

为了**创建**共享内存段，您需要将`IPC_CREAT`标志传递给`shmget()`：

```
shmid=shmget(MySharedKey,sizeof(struct MyShared),PERM | IPC_CREAT); 
```

另见[http://www.kernel.org/doc/man-pages/online/pages/man2/shmget.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/shmget.2.html)

如果您没有传递此标志，则假定共享内存段已经存在并且您的进程想要附加到它。一旦某个**主进程创建了共享内存段，这就是想要访问共享内存段的****从属**进程需要做的事情。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:35:24.197

首先，您丢失了一些头文件。

```
#include <sys/types.h>  
#include <sys/ipc.h>
#include <sys/shm.h> 
```

其次，`shmget()`函数的第一个参数是一个类型。`key_t`所以你必须使用`fotk()`函数来生成密钥。

示例：
Myshared.h

```
#ifndef _MYSHARED_H
#define _MYSHARED_H

#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>

#define FLAG (IPC_CREATE | IPC_EXCL)
#define SIZE 512

typedef struct {
        char buf[SIZE];
        int read_from_buffer, write_to_buffer, read_bytes;
} Shared;

#endif 
```

Myshared.c

```
#include "Myshared.h"
#include <stdio.h>

int main(int argc, char **argv)
{
        key_t key; 
        int shmid;

        key = ftok("/dev/null", 0);  # /dev/null just a example
        shmid = shmget(key, sizeof(struct Shared), FLAG);
        if (shmid == -1) {
                perror("Create Shared Memory Error:");
        }
        ......
} 
```

最后，您可以键入`man ftok`并`man shmget`帮助自己。**

# ruby-on-rails - Ruby on Rails - 在多场比赛中计算球队的进球数

> ID：14031241
> 
> 赞同：0
> 
> 时间：2012-12-25T13:52:56.453
> 
> 标签：ruby-on-rails, database, associations, counting, rails-models

我有一个**Match**模型和一个**Team**模型。

我想计算一个球队在联赛中的进球数（所以我必须将该球队的所有分数相加，在**home_matches**和**away_matches 中**）。

我怎样才能做到这一点？我应该将哪些列放入**比赛**和**团队**数据库表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:33:47.413

我假设您的`Match`模型看起来像这样：

```
belongs_to :home_team, class_name:"Team"
belongs_to :away_team, class_name:"Team"

attr_accessible :home_goal_count, :away_goal_count 
```

如果是这样，您可以添加一个方法来提取目标数量：

```
def goal_count
    home_matches.sum(:home_goal_count) + away_matches.sum(:away_goal_count)
end 
```

由于这可能很昂贵（特别是如果您经常这样做），您可能只是将此值缓存到团队模型中并`after_save`在模型上使用挂钩`Match`（并且，如果匹配被删除，那么`after_destroy`也可以使用挂钩）：

```
after_save :update_team_goals

def update_team_goals
    home_team.update_attribute(:goal_count_cache, home_team.goal_count)
    away_team.update_attribute(:goal_count_cache, away_team.goal_count)
end 
```

由于您想为联赛执行此操作，因此您可能希望`belongs_to :league`在模型上添加一个，在方法（及其查询）中添加`Match`一个联赛参数，以及一个列（如果您想缓存该值）（仅缓存最近更改的我的建议的实施，但根据需要进行调整）。`goal_count``goal_count_cache_league`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-25T14:09:23.097

你不要把它放在任何桌子上。数据库有一条规则：永远不要在数据库中存储可以从其他字段计算的数据。

您可以使用此函数轻松计算：

```
def total_goals
  self.home_matches.collect(&:home_goals).inject(&:+)+self.away_matches.collect(&:away_goals).inject(&:+)
end 
```

那应该为你做。如果您想为联赛过滤数学，您可以使用 a `scope`。

# css - 一个元素的边距影响其一侧的元素

> ID：14031243
> 
> 赞同：1
> 
> 时间：2012-12-25T13:53:00.853
> 
> 标签：css, two-columns

我正在尝试制作一个简单、流畅、响应式的两列布局（只是为了学习 CSS），由侧边栏和主要部分组成。

我能够创建具有 100% 高度的侧边栏，将主要内容放在它的一侧，但是当我在我的主要部分中放置一个 H1 时...... tada！它的边距也为侧边栏创建了边距。

这是提出问题的最小代码：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html,body {
        margin:0;
        padding:0;
        width:100%;
        height:100%;
      }

      #sidebar {
        display:block;
        position:absolute;
        width:25%;
        min-height:100%;
        border-right:1px solid #222;
        background-color: #E0E0E0;
      }

      #main {
        margin-left:25%;
        display:block;
      }

      h1 {
        padding:2%;
        /* margin:0; */
        /* defining the margin as zero aligns 
         * everything at the top */
      }
    </style>
  </head>

  <body>
    <header id="sidebar">
      Let's reach for the stars!
    </header>

    <section id="main">
      <h1>Nope!</h1>
    </section>

  </body>
</html> 
```

我已经在 Chrome 和 Firefox 中对其进行了测试，两者都发生了。

[我已经创建了这个 JSFiddle](http://jsfiddle.net/PmkCQ/2/)，并且感谢 cimmanon 的评论，行为是相同的。

好吧，我迷路了。我错过了一些非常简单的东西吗？

这种方法是制作两列布局的好方法吗？我启发了自己阅读[Svbtle 博客](https://svbtle.com)中的 CSS 。

如果不是，请以正确的方式向我灌输。我需要良好的 CSS 灌输 :)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:16:27.840

添加`display: inline-block`到 h1 不会影响侧边栏。然后你可以设置任何你想要的边距。

在 JSFiddle 中看起来不错的原因可能是从他们的样式中应用的样式（检查 h1，你会看到它有`margin:0`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:28:37.527

一般来说，应该避免绝对定位，除非您确实希望从文档流中删除该元素。如果您的页面`#main`最终内容较短，`#sidebar`并且用户的显示屏不够高，无法显示所有`#sidebar`内容，那么您的内容将被剪掉。

我最喜欢的实现等高列的方法是使用`display: table`CSS 属性。

[http://jsfiddle.net/PmkCQ/3/](http://jsfiddle.net/PmkCQ/3/)

```
html,body {
        margin:0;
        padding:0;
        width:100%;
        height:100%;
      }

body { display: table }

      #sidebar {
        width:25%;
        border-right:1px solid #222;
        background-color: #E0E0E0;
      }

      #sidebar, #main {
        display:table-cell;
        vertical-align: top; /* optional */
      }

      h1 {
        padding:2%;
        margin-top: 0;
        /* margin:0; */
        /* defining the margin as zero aligns 
         * everything at the top */
      } 
```

当然，还有其他方法，但这种方法不如浮动或绝对定位那么脆弱。唯一的缺点是 IE7 不支持这些属性，因此它们将继续使用元素先前定义（或默认）的显示设置（对于`div`，它将是`block`）。

# mongodb - 如果新记录违反了morphia中的唯一键约束，则用新记录更新原始记录？

> ID：14031249
> 
> 赞同：1
> 
> 时间：2012-12-25T13:54:07.200
> 
> 标签：mongodb, morphia, mongodb-java

如果新记录违反了在 mongodb 中使用 morphia 的唯一键约束，有没有办法用新记录替换原始记录。

Upsert 对我不起作用，因为在 morphia 中 object_id 为空，直到它保存到数据库中，如果由于另一个字段而生成唯一键约束，则它不能执行 upsert，因为新记录将具有不同的 object_id 然后原始记录。

我不想从 db 中查找原始记录，但如果新记录创建唯一键约束，只需覆盖它，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:40:20.847

我认为有3种可能的方法：

1.  获取唯一元素的 ObjectId，将其添加到新文档并保存。由于您正在重用 ObjectId，因此旧元素将被覆盖。这需要两个查询而不是一个。

2.  创建一个更新查询，其中查询部分检查唯一属性并显式设置要更改的所有属性。这将像这样工作：

    ```
    Query<User> updateQuery = datastore.createQuery(User.class)
        .field("userId").equal("foo");
    ops = datastore.createUpdateOperations(User.class).set("firstName", "bar");
    datastore.update(updateQuery, ops); 
    ```

3.  `@Id`通过注释使用您的唯一属性作为您的 ID 。但是，有一些（次要）缺点：[https ://groups.google.com/forum/#!msg/morphia/GQLJywseiCM/6D​​VkYX17P68J](https://groups.google.com/forum/#!msg/morphia/GQLJywseiCM/6DVkYX17P68J)

我会选择选项2。

# c# - 未执行切换按钮命令

> ID：14031261
> 
> 赞同：3
> 
> 时间：2012-12-25T13:55:44.237
> 
> 标签：c#, wpf, togglebutton, icommand

问题是这样的。假设我有 3 个切换按钮，我只想使用 Command 来检查一个。检查一个按钮时，应禁用其他按钮。（我不想使用单选按钮）。所以我创建了这个简单的代码，但奇怪的是，当单击选中按钮时，未执行命令 Execute（没有显示 MessageBox）。

```
<Window x:Class="ToggleButtonsProblem.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <ToggleButton Command="{Binding ToggleCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}">A</ToggleButton>
    <ToggleButton Command="{Binding ToggleCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}">B</ToggleButton>
    <ToggleButton Command="{Binding ToggleCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}">C</ToggleButton>
</StackPanel> 
```

```
using System;
using System.Windows;
using System.Windows.Input;
using System.Windows.Controls.Primitives;

namespace ToggleButtonsProblem {
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();
        this.DataContext = new ViewModel();
    }
}

public class ViewModel {
    public static ICommand ToggleCommand { get { return new ToggleCommand(); } }
}

public class ToggleCommand : ICommand {
    public static bool isSomeChecked = false;
    public static ToggleButton currentCheckedButton;

    public bool CanExecute(object parameter) {
        if (currentCheckedButton == null) return true;
        return (parameter as ToggleButton).IsChecked == true;
    }

    public event EventHandler CanExecuteChanged {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter) {
        currentCheckedButton = null;
        ToggleButton button = parameter as ToggleButton;
        MessageBox.Show(button.IsChecked.ToString());
        if (button.IsChecked == true) {
            currentCheckedButton = button;
        }
        else {                
            currentCheckedButton = null;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:58:12.500

仅在按下按钮时执行命令。您需要挂钩 ToggleButton 的 Unchecked 事件，例如：

```
<ToggleButton Command="{Binding ToggleCommand}" Unchecked="ToggleButton_Unchecked" CommandParameter="{Binding RelativeSource={RelativeSource Self}}">A</ToggleButton> 
```

并将方法处理程序添加到代码隐藏类：

```
public void ToggleButton_Unchecked(object sender, RoutedEventArgs e) {
    (sender as ToggleButton).Command.Execute(sender);
} 
```

这应该可行，也许您可​​以找到一些更漂亮的方法来添加方法处理程序，也许是 ToggleCommand 类的一部分。

编辑：尝试像这样实现你的 CanExecute() 方法：

```
public bool CanExecute(object parameter) {            
    if (currentCheckedButton == null) return true;
    return currentCheckedButton == parameter;
} 
```

对我来说它有效。这是我认为导致问题的原因：您单击（取消选中）按钮，因此 IsChecked 更改为 false。然后 WPF 尝试调用 Execute() 方法，但与往常一样，首先调用 CanExecute()。但是，CanExecute() 返回 false，因为检查状态已经改变，所以 Execute() 方法没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:10:06.667

ToggleCommand 不应该是静态的。尝试将命令定义为属性。

# python - grid.py 和 gridregression.py：Python 中的无效语法错误

> ID：14031271
> 
> 赞同：0
> 
> 时间：2012-12-25T13:56:55.803
> 
> 标签：python, grid, svm, libsvm

我正在尝试进行 epsilon 支持向量回归。

在此页面[http://www.csie.ntu.edu.tw/~cjlin/libsvm/](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)中，我得到了用于分类的 grid.py 和用于回归的 gridregression.py 以进行最佳参数选择。

我下载并设置了 Python 2.7。我将这两个“.py”文件放到 Python 的目录中，即`C:\Python27`. 我启动了 IDLE（Python GUI）并编写了代码`python grid.py heart_scale`，您可以在 Libsvm 包的 README 文件中找到此代码。但是，我收到“无效语法”错误。因此，我将“python”更改为“Python27”（这是目录的名称）。但是，我仍然遇到同样的错误。我在网上查了一下，没有找到解决办法。你有什么主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:00:18.043

该行`python grid.py heart_scale`不是 Python 代码本身，所以 IDLE 会告诉你这是一个语法错误。

`cmd`而是在控制台上运行它。首先确保您位于正确的目录中，或使用完整路径：

```
cd C:\Python27
python grid.py heart_scale 
```

或者

```
python C:\Python27\grid.py heart_scale 
```

# javascript - 如何在没有点击功能的情况下自动滑动切换

> ID：14031274
> 
> 赞同：0
> 
> 时间：2012-12-25T13:57:39.663
> 
> 标签：javascript, jquery, html

我希望第一个 div 出现并隐藏，然后下一个 div 应该出现并每隔 5 秒自动隐藏一次。目前此代码在 Slide up 但如何更改它以**切换**效果

这是jsfiddle：

[http://jsfiddle.net/dN4SN/](http://jsfiddle.net/dN4SN/)

javascript代码在这里：

```
$(function() {
    $("#slideContainer").css({
        "height" :$("#slideContainer div:first").css("height"
     "overflow" : "hidden"
    });

    function slide() {
        $("#slideContainer div:first").slideUp(800, function() {
          var $this = $(this);
            $this.parent().append(this);
            $this.show();
            slide();
        });
    }
    slide();  
});​ 
```

html在这里：

```
<h1>Test of sliding stuff</h1>
<div id="slideContainer">
    <div>Contact No: 555-666-7777</div>
    <div>Email: me@me.com</div>
    <div>Test: whatever</div>
    <div>Add as many extra lines here as you like</div>
</div>
<div>Other page content here.</div>​ 
```

# google-maps - 如何在 pageinit 上初始化谷歌地图而不重复加载谷歌地图 api 脚本

> ID：14031279
> 
> 赞同：0
> 
> 时间：2012-12-25T13:58:16.307
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3, geolocation, dynamically-generated

*   我希望能够为我的所有页面仅加载一次 Google.maps API。
*   然后我希望能够在我的网络应用程序的任何地方使用地理定位或将地图加载到页面中。
*   问题是我无法弄清楚 API 加载和地图初始化是分开的。这意味着我每次创建地图时都需要加载 API。

我在帖子中进一步引用了我的大部分代码，但我认为以下代码是问题所在。那段代码负责 API 加载，但同时它负责将 initialize() 函数设置为回调函数并调用它。

```
var script = document.createElement("script");
script.type = "text/javascript";
script.src ="http://maps.googleapis.com/maps/api/js?key=mykey&sensor=false&callback=initialize";
document.body.appendChild(script); 
```

**我如何加载一次api，让我们在标题中说，然后每次我转到特定页面时创建一个新地图。无需再次加载地图 API。（请注意，我使用的是 Jquery 移动版，因此我的标头只会在会话中加载一次。）**

**我收到此错误：**

警告：您已在此页面上多次包含 Google Maps API。这可能会导致意外错误。

**我想告诉你我的设置。**

-我使用谷歌地图 API v3

-我在页面加载后动态加载 API。

-我使用的是 Jquery mobile，这意味着带有谷歌地图的页面只有在您访问它时才会部分重新加载。

-我使用谷歌地图来显示地图和地理定位两件事。

-我在几个页面上使用谷歌地图 api。

**我在 3 个不同的地方与地图进行交互：在标头 javascript 中，请参阅下面的代码**

*   标头 javascript

*   正文中的 javascript

*   包含地图的主体中的 DIV。

这是我处理加载 API、显示地图、标记等的 javascript 代码：

```
 <script>
            $('.error').hide();
            //search criterias
            var radius;
            var timerange;
            var type;
            //user position variables
            var userposition = false;
            var mylatitudedegree = "=55.698";
            var mylongitudedegree = "=12.579";
            //map variables
            var mapready = false;
            var map;
            var bound;
            var markersArray = [];
            //array for keeping track of the markers
            var markercenter;
            //hack
            var pageinit = 0;
            var initializer = 0;
            var triggersearch = 0;
            var loadscripts = 0;
            var isgooglemapsloaded = false;

                $( '#soegsagside' ).live( 'pageinit',function(event)
                {
                pageinit++;

                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(setPosition, function(error) {
                        alert('Din location er ikke tilgængelig! Error code: ' + error.code);
                        userposition = false;
                    }, {
                        maximumAge : 60000,
                        timeout : 10000,
                        enableHighAccuracy : true
                    });
                } 
                else {
                    alert("Din browser tillader ikke, at vise din lokation!");
                    userposition = false;
                }

                loadScript();       

                $("#search_filter_button").click(function() {
                    //hide the "skal udfyldes" labels
                    $('.error').hide();
                    // validate and process form here
                    radius = $("select#choose_radius_select").val();
                    if (radius == "vælg") {
                        $("label#radius_error").show();
                        $("select#choose_radius_select").focus();
                        return false;
                    }
                    timerange = $("select#choose_timerange_select").val();
                    if (timerange == "vælg") {
                        $("label#timerange_error").show();
                        $("select#choose_timerange_select").focus();
                        return false;
                    }
                    type = $("select#vælg_type").val();
                    if (type == "vælg") {
                        $("label#select_type_error").show();
                        $("select#vælg_type").focus();
                        return false;
                    }
                    //------------------post to php script ---------------
                    var dataString = 'radius=' + radius + '&timerange=' + timerange + '&type=' + type + '&mylatitudedegree=' + mylatitudedegree + '&mylongitudedegree=' + mylongitudedegree;
                    $.ajax({
                        type : "POST",
                        url : "soegsagDB.php",
                        data : dataString,
                        success : function(data) {
                            $('#søgeresultater').html(data);
                            $('#søgeresultater').trigger('create');
                            clearOverlays();
                            createtaskmarkers();
                            findCenterOfMarkers();
                            if (userposition) {
                                usergeoposition = new google.maps.LatLng(mylatitudedegree, mylongitudedegree);
                                map.setCenter(usergeoposition);
                                createuserposition(usergeoposition);
                            } else {
                                map.setCenter(markercenter);
                            }
                            expandMapBoundForMarkers()

                        }
                    });
                    //end of post search query to server
                    return false;
                });
                //end of click seach button
            });
            //end of page ready

            function setPosition(position) {
                userposition = true;
                myposition = position.coords;
                mylatitudedegree = position.coords.latitude;
                mylongitudedegree = position.coords.longitude;
                var milli = new Date();
            }

            //function for clearing the markerArray
            function clearOverlays() {
                for (var i = 0; i < markersArray.length; i++) {
                    markersArray[i].setMap(null);
                }
            }

            //Function for initializing the map, which is called when the map is created
            function initialize() {
                initializer++;
                bound = new google.maps.LatLngBounds();

                var mapOptions = {
                    zoom : 13,
                    center : new google.maps.LatLng(55, 12),
                    mapTypeId : google.maps.MapTypeId.ROADMAP
                }

                //Create a map
                map = new google.maps.Map(document.getElementById("map"), mapOptions);
                mapready = true;
                $("#search_filter_button").trigger('click');//Trigger click on the search button
                triggersearch++;
            }

            //create user positio marker
            function createuserposition(usergeoposition) {
                var userPositionMarker = new google.maps.Marker({
                    position : usergeoposition,
                    map : map,
                    title : "Din position",
                });
                markersArray.push(userPositionMarker);
            }

            function createtaskmarkers() {
                //Create the markers of the tasks
                //1\. find the task <li> that contain the data and loop through each one
                //2\. for each task collect the dato into variables and create markers and infowindows
                //3\. calculate center of point
                //4\. extendt map area to contain all points

                var data = $.map($('li'), function(element) {
                    if (element.hasAttribute("data-latitude")) {

                        var tempPos = new google.maps.LatLng($(element).attr('data-latitude'), $(element).attr('data-longitude'));
                        var link = $(element).attr('data-link');
                        var title = $(element).attr('data-title');
                        var type = $(element).attr('data-type');
                        var date = $(element).attr('data-date');

                        tempMarker = new google.maps.Marker({
                            position : tempPos,
                            map : map,
                            title : title,
                        });

                        tempMarker.setIcon('http://maps.google.com/mapfiles/ms/icons/blue-dot.png')

                        var tempContentString = '<div style="width: 200px; height: 100px;">' + date + '<br></br>' + '<a href="' + link + '" rel="external"><b>' + type + ' , ' + title + '</b></a>' + '</div>';

                        //Create infowindow
                        var tempInfowindow = new google.maps.InfoWindow({
                            content : tempContentString
                        });
                        //add market to markerArray
                        markersArray.push(tempMarker);
                        //Create event with infowindow
                        google.maps.event.addListener(tempMarker, 'click', function() {
                            tempInfowindow.open(map, this);
                        });
                    }
                });
            }

            function findCenterOfMarkers() {
                //calculate center of markers and change mapcenter to that
                var sumlatitude = 0;
                var sumlongitude = 0;
                for ( position = 0; position < markersArray.length; position++) {
                    sumlatitude += markersArray[position].getPosition().lat();
                    sumlongitude += markersArray[position].getPosition().lat();
                }
                avglatitude = sumlatitude / markersArray.length;
                avglongitude = sumlongitude / markersArray.length;
                markercenter = new google.maps.LatLng(avglatitude, avglongitude);
            }

            function expandMapBoundForMarkers() {
                //Extend bounds for map to fit all markers into map
                for (var i in markersArray) {
                    bound.extend(markersArray[i].getPosition());
                }
                map.fitBounds(bound);
            }

            //loads the google maps api with KEY and appends the script to the document body
            function loadScript() {
                var script = document.createElement("script");
                script.type = "text/javascript";
                script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyC8wZ6RmFySy0DnWvrUaA-2OJqcM1_AOIc&sensor=false&callback=initialize";
                document.body.appendChild(script);
            }
            </script> 
```

页面正文中唯一与地图有关的内容。是地图加载到的 DIV。

```
<div id="map" style="width: 80%; height: 280px; margin: auto; background-color: gray">Kortet loader, vent venligst.</div> <!--alternative for full screen style="position:absolute;top:30px;bottom:50px;left:0;right:0;"--> 
```

API 也加载在一个通用的头脚本中。因为我一般需要在其他页面上加载它。

```
<script src='http://maps.google.com/maps/api/js?sensor=false'></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:06:02.607

```
<script type="text/javascript">
      $(document).ready( function () {

        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.google.com/maps/api/js?sensor=false&callback=mynamespace.init_google_maps";
        document.body.appendChild(script);
    $(document).bind('pageinit', function() {
    //do stuff here that happens each time a new page is loaded

    });
    });
}); 
</script> 
```

api 在 .ready() 中加载一次。您可以在传递给 .bind() 的回调中创建一个新地图，每次加载或插入新页面时都会调用该地图。您可以在 mynamespace 中初始化地图。mynamespace 是页面中包含的 .js 文件

# javascript - javascript取消图像加载

> ID：14031281
> 
> 赞同：3
> 
> 时间：2012-12-25T13:58:31.270
> 
> 标签：javascript, dom

我正在寻找一种使用 javascript 取消图像加载的方法。我已经查看了其他问题，但隐藏它们是不够的。此外，必须加载页面的其余部分（window.stop() 是不可能的）。

正在加载的页面不在我的控制之下，只有一件事可以保证 -`<script>`页面上的第一个是我的 javascript（轻量级 - 没有 jquery）。

我尝试将所有 img 源设置为空，这没有帮助，因为 dom 是在页面解析后创建的，并且所有浏览器都具有相同的行为 - img 在解析后被加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:27:05.020

现代浏览器不可能。即使您使用 JavaScript 浏览器更改图像标签的 src 属性，仍然坚持加载图像。我通过开发[延迟加载插件](http://www.appelsiini.net/projects/lazyload)知道这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:50:14.417

我可以看到停止图像加载的唯一方法是`src`图像本身不存在属性，并使用自定义`data-*`属性来保存图像的位置：

```
<img data-src="http://path.to/image.png" /> 
```

显然，对于那些（诚然很少见的）禁用 JavaScript 的浏览器，这不会优雅地降级，因此需要一个`noscript`后备：

```
<img data-src="http://path.to/image.png" />
<noscript><img src="http://path.to/image.png" /></noscript> 
```

再加上一个简单的功能，在您或您的用户准备好时加载图像：

```
/* simple demo */
function imagePopulate(within, attr) {
    within = within && within.nodeType == 1 ? within : document;
    attr = attr || 'data-src';
    var images = within.getElementsByTagName('img');
    for (var i = 0, len = images.length; i < len; i++) {
        if (images[i].parentNode.tagName.toLowerCase() !== 'noscript') {
            images[i].src = images[i].getAttribute(attr);
        }
    }
}

document.getElementById('addImages').onclick = function(){
    imagePopulate();
}; 
```

[JS 小提琴演示](http://jsfiddle.net/W2aPM/1/)。

我不能确定是否适用于*所有*浏览器，但这似乎在 Chrome 中有效（因为没有尝试通过查看开发人员工具的网络选项卡来加载`noscript`-contained `img`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-06T09:17:29.130

它可以通过网络工作者来完成。请参阅以下示例： [https](https://github.com/NathanWalker/ng2-image-lazy-load) ://github.com/NathanWalker/ng2-image-lazy-load 。

停止网络工作者会取消浏览器中的图像加载

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:05:07.160

回顾[onload 事件](http://www.w3schools.com/jsref/event_onload.asp)：

```
window.onload=function(){
imgs = document.getElementsByTagName('img');

for(i = 0; i < imgs.length(); i++){
imgs[i].src = '#';
}
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T14:12:06.540

你需要一个代理。

您的脚本可以使用类似的东西重定向到另一台服务器

```
location.replace('http://yourserver.com/rewrite/php?url='+escape(this.href)); 
```

也许您告诉我们为什么要取消图像加载以及您正在加载的网站，以便我们提出更好的解决方案

如果页面上除了图片什么都没有，你可以试试

```
document.write('<base href="http://yourserver.com/" />'); 
```

这将与页面上的所有非绝对 src 和 href 混淆。

**更新**可怕的黑客，但也许这个几乎是伪代码（我要睡觉了）会做一些事情

```
document.write('<script src="jquery.js"></script><div id="myDiv"></div><!-'+'-');
$(function() { 
  $.get(location.href,function(data) {
    $("#myDiv").html(data.replace(/src=/g,'xsrc='));
  });
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T14:20:19.893

如果您只想取消图像的加载，您可以使用 sємsєм 的解决方案，但我认为使用窗口 onload 事件不会起作用。

您可能需要提供一个按钮来取消图像加载。**我也建议，而不是将 src 属性设置为 "#" ，您可以使用removeAttribute()**删除 src 属性本身

 **[**确保在测试时禁用缓存**]

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-06T19:03:49.570

最接近您可能想要的内容是拥有一个快速加载的占位符图像（即图像的低分辨率版本）和一个隐藏图像（例如 {display:none}），其中大图像被加载但不显示。然后在大图像的 onload 事件中交换图像（例如 display:block 用于大图像 display:none 用于较小的图像）。我还使用一个数组（带有它们的 url）来重用任何已经打开的图像。

顺便说一句，如果您在关闭时在新网页中打开图像，则图像加载将被取消。因此，也许您可​​以使用 iframe 在网页中执行类似的操作来显示图像。

要关闭 iframe 并因此卸载图像，请从 DOM 中删除框架

（另一个优点是浏览器会产生另一个进程来处理 iframe，因此在加载图像时页面不会锁定）**

# php - 我的 php 表单没有传递数据，因为我已经实现了自动建议

> ID：14031290
> 
> 赞同：0
> 
> 时间：2012-12-25T14:00:13.443
> 
> 标签：php, jquery, mysql, forms, autosuggest

这是我的场景，一切正常，根据我在搜索表单中输入的内容，显示了相应的图像。但由于我在我的网站上添加了自动建议功能，看起来就像我在搜索框中写的任何内容并按下搜索，我认为我的输入表单没有将数据发送到 php。因为即使我在表格中输入了一些东西，这个条件仍然是错误的。（ $name 包含用户输入的值）：

```
if(!empty($name)) 
```

这是我的html表单：

```
<form class="searchform" action="webpage.php" method="POST">
<input class="searchfield autosuggest" type="text"  placeholder="Search for a name " onFocus="if (this.value == 'Search...') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'Search...';}" />
<input class="searchbutton" type="submit" value="Go" />
</form> 
```

我为自动建议添加的最新脚本是这样的：

```
 //Autosuggest starts here

$(document).ready(function(){
$('.autosuggest').keyup(function(){

var search_term= $(this).attr('value');
$.post('search.php',{search_term:search_term},function(data){

    $('.results').html(data);

    $('.results li').click(function(){
        var result_value = $(this).text();
        $('.autosuggest').attr('value',result_value);
        $('.results').html('');
    });

});

});
});

</script> 
```

最后，这是另一个 search.php 文件，用于通过数据库查询 autosuggest ：

```
if(isset($_POST['search_term'])== true && empty($_POST['search_term'])== false)
{
    $search_term = mysql_real_escape_string($_POST['search_term']);
    $query = mysql_query("select * from user_info where Name LIKE '$search_term%'");

    while(($rows = mysql_fetch_assoc($query))!== false)
    {
    echo '<li>'.$rows['Name'].'</li>';
    }
} 
```

现在自动建议正在工作，但不是主站点。这可能是我的图像或 php 没有从我的输入表单接收数据的定位问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:02:52.217

您应该在输入框中添加名称属性

# php - Mysql表没有更新

> ID：14031295
> 
> 赞同：0
> 
> 时间：2012-12-25T14:00:32.683
> 
> 标签：php, mysqli

我已经从stackoverflow上的另一个主题复制了代码，但它在这里不起作用。在互联网上搜索但找不到关于这个简单事情的任何信息，查询不起作用。

我想更新一个表。

形式：

```
<form method="post" action="klas_bewerken.php">
  <label>Old</label>  <input name="old" type="text" id="textfield" />
  <label>New</label>  <input name="new" type="text" id="textfield" />
<input type="submit" value="Change now" />
</form> 
```

Klas_bewerken.php

```
<?php
$mysqli = new mysqli("localhost", "root", "root", "sms");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

$old = $_POST['old'];
$new = $_POST['new'];

echo "Old: $old";
echo "<br /> New: $new";

mysqli_query("UPDATE klas SET klas_id='$new' WHERE klas_id='$old'");

ECHO "<br /><br />Updated.";

mysql_close($con);

?> 
```

代码对我来说看起来不错..有人看到错误吗？该表未更新。

谢谢

**编辑**

所以，更多解释：表 klas 只有 1 列：klas_id。有一排：A3D。我想把它改成A3C，所以我在旧的填写“A3D”，在新的填写“A3C”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:37:41.307

你在这里混合了程序和 OO 风格。你不能混合这两者，代码应该看起来像这样（未经测试，但应该可以工作）

```
<?php
$mysqli = new mysqli("localhost", "root", "root", "sms");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

$old = $_POST['old'];
$new = $_POST['new'];

echo "Old: $old";
echo "<br /> New: $new";

$mysqli->query("UPDATE klas SET klas_id='$new' WHERE klas_id='$old'");

ECHO "<br /><br />Updated.";
$mysqli->close();

?> 
```

如果您打算将其用于更广泛的用途，也请务必避开这些字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:15:00.737

在创建连接并获得 POST 变量后尝试以下操作：

```
$update = "UPDATE klas SET klas_id='".$new."' WHERE klas_id='".$old."'";
if ($run = $mysqli->query($update)) {
    echo 'Success';
    $run->free();
    $mysqli->close();
} else {
    echo 'Error Updating Content';
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:34:14.583

当没有任何内容传递给时，您的代码无法自行更新`POST`，并且您的 sql 正在通过 POST 变量进行更新。尝试首先检查是否像下面这样提交。

并且您必须转义您的变量以防止 sql 注入。

当你关闭连接时，你也在做`mysql`，而不是它必须是`mysqli`

```
 <?php
$mysqli = new mysqli("localhost", "root", "root", "sms");
if ($mysqli->connect_errno) {
echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}
if (isset($_POST['submit'])){
$old = mysqli_real_escape_string($_POST['old']);
$new = mysqli_real_escape_string($_POST['new']);

echo "Old: ". $old;
echo "<br /> New: " .$new;

$mysqli->query("UPDATE klas SET klas_id='".$new."' WHERE klas_id='".$old."'");
mysqli_close($mysqli); }
 ECHO "<br /><br />Updated.";
?> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-25T14:05:01.130

尝试像这样运行您的查询

```
mysqli_query("UPDATE klas SET klas_id='".$new."' WHERE klas_id='".$old."'"); 
```

我相信是将“$old”更新为“$new”，但不存在“$old”值

# mysql - 如何使用 if 函数从一个表中获取数据到另一个表

> ID：14031296
> 
> 赞同：1
> 
> 时间：2012-12-25T14:00:39.540
> 
> 标签：mysql, database, select, data-retrieval

### table_Pricing

```
ProductType = Lookup from table ProductCatalog.ProductDutyType (dropdown combo) 
```

义务=？

### 表_产品目录

列-

```
ProductDutyType-   Custom
Pens-               15
Bags-                5
Organizers-         10
Dresses-             3 
```

我需要的是，当我在 table_Pricing 的产品类型下拉列表中进行选择时，职责列应根据所选产品类型从 table_ProductCatalog 的自定义列中获取值。

如果我在表 Pricing 中选择 Product type，则 Duty 列应比较 2 个表并在 Bags 的自定义列中显示值，即 5。

希望有人理解我。请帮忙，Newbee在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:23:25.923

尝试这个：

```
SELECT custom 
FROM table_ProductCatalog
WHERE ProductDutyType = 'Bags'; 
```

# module - 将模块中的接口用作类中的字段时出现打字稿错误

> ID：14031300
> 
> 赞同：4
> 
> 时间：2012-12-25T14:02:04.880
> 
> 标签：module, typescript

我正在为fabric.js 提供一个类型定义文件。一般结构如以下示例所示：

```
declare module fabric {
   export interface Canvas {
      selectionBorderColor: string;
      selectionColor: string;
      ...
   }

   var Canvas: {
      new (): Canvas;
   }
} 
```

这种模式允许我以“类似接口”的方式使用 fabric.Canvas，以便变量与 fabric.Canvas 接口相关联。同时它允许我调用“静态成员”（例如fabric.Canvas的构造函数）。

但这在类中使用接口“fabric.Canvas”的字段时会导致问题。以下示例显示了这种情况：

![将模块中的接口用作类中的字段时出现打字稿错误](../Images/61a7736e153e86d77ffd6538aed6df3d.png)

仅在将接口放置在模块中时才会出现此问题，否则一切正常。

这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:39:32.223

存在一些类型混淆，因为您有一个同名的接口和一个字段 - 我知道这在`lib.d.ts`文件中很常见，但我认为在编写新的 TypeScript 代码时这不是一个好习惯。这似乎是定义现有代码的必要条件。

如果您重命名`var Canvas`为`var MyCanvas`（或其他任何名称），您的代码就可以工作。

例如，我倾向于在我的接口前加上一个`I`，`ICanvas`但这还不是 TypeScript 约定。

```
declare module fabric {
   export class Canvas {
      selectionBorderColor: string;
      selectionColor: string;
   }
}

class MyClass {
    canvas: fabric.Canvas;
} 
```

# javascript - 连接两个处于活动状态的 HTML 菜单

> ID：14031301
> 
> 赞同：0
> 
> 时间：2012-12-25T14:02:11.010
> 
> 标签：javascript, jquery, css, html

我的网站上有两个 HTML 菜单。首先，顶级菜单。第二，页脚菜单。

顶部菜单：

```
<ul id=creamenu>
    <li><a id="menu1" href="site1.com">1</a></li>
    <li><a id="menu2" href="site2.com">2</a></li>
    <li><a id="menu3" href="site3.com">3</a></li>
    <li><a id="menu4" href="site4.com">4</a></li>
    <li><a id="menu5" href="site5.com">5</a></li>
</ul> 
```

页脚菜单：

```
 <div id="footer-menu">
    <ul>
       <li><a id="menu1" href="site1.com">1</a></li>
       <li><a id="menu2" href="site2.com">2</a></li>
       <li><a id="menu3" href="site3.com">3</a></li>
       <li><a id="menu4" href="site4.com">4</a></li>
       <li><a id="menu5" href="site5.com">5</a></li>
    </ul>
 </div> 
```

这个菜单有不同的`active`风格和工作方式。我想，在活动时连接这个菜单。

EG 当我点击`menu1`顶部菜单时，获得活动的类顶部菜单和页脚菜单。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:23:01.210

这是一个[**演示**](http://jsbin.com/ikopel/8/edit)

**HTML** （将相同的类应用于`ul`两个菜单）

```
<ul id="creamenu" class="menuHolder">
  <li><a href="1.com">1</a></li>
  <li><a href="2.com">2</a></li>
  <li><a href="3.com">3</a></li>
  <li><a href="4.com">4</a></li>
  <li><a href="5.com">5</a></li>
</ul>

<div id="footer-menu">
  <ul class="menuHolder">
    <li><a href="1.com">1</a></li>
    <li><a href="2.com">2</a></li>
    <li><a href="3.com">3</a></li>
    <li><a href="4.com">4</a></li>
    <li><a href="5.com">5</a></li>
  </ul>
</div> 
```

**JavaScript：**

```
$('.menuHolder li a').click(function (e) {
  e.preventDefault();
  $('.menuHolder li a').removeClass('active');
  var link = $(this).attr('href');
  $('a[href="' + link + '"]').addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:10:00.780

首先，`id`'s 在整个文档中应该是唯一的，您不应拥有超过 1 个具有相同 ID 的对象。因此，更改您的 html 以`classes`改用：

```
<div id="top-menu">
    <ul>
       <li><a class="menu-item" href="site1.com">1</a></li>
       <li><a class="menu-item" href="site2.com">2</a></li>
       <li><a class="menu-item" href="site3.com">3</a></li>
       <li><a class="menu-item" href="site4.com">4</a></li>
       <li><a class="menu-item" href="site5.com">5</a></li>
    </ul>
</div>

<div id="footer-menu">
    <ul>
       <li><a class="menu-item" href="site1.com">1</a></li>
       <li><a class="menu-item" href="site2.com">2</a></li>
       <li><a class="menu-item" href="site3.com">3</a></li>
       <li><a class="menu-item" href="site4.com">4</a></li>
       <li><a class="menu-item" href="site5.com">5</a></li>
    </ul>
</div> 
```

然后使用 jQuery[`addClass()`](http://api.jquery.com/addClass/)和[`removeClass()`](http://api.jquery.com/removeClass/)方法，您可以添加或删除一个类，如下所示：

```
$(document).ready(function(){
    $('.menu-item').click(function(){
        $('.menu-item').removeClass('active'); // This will remove active class from other links
        $(this).addClass('active');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:14:54.550

```
$('#creamenu a').bind('click', function (e) {
    e.preventDefault()
    var pos = $(this).parent().index();
    $("#creamenu li").removeClass('active');
    $(this).addClass('active');
    $("#footer-menu li").removeClass('active1');
    $("#footer-menu li").eq(pos).addClass('active1');
}); 
```

# api - REST API 请求失败 http 响应代码

> ID：14031306
> 
> 赞同：0
> 
> 时间：2012-12-25T14:02:41.650
> 
> 标签：api, http, rest, httpresponse

我正在实现一个 REST API，例如我有一个 set_ftp_credentials 请求

```
POST api.domain.com/object/set_ftp_credentials 
```

此请求通过尝试连接来检查 ftp 凭据是否良好。
我们在这里讨论了是否应该返回 HTTP 响应 200 并在内容中
返回请求失败以及原因。
或者我们应该返回一些其他的 HTTP 响应代码（40* 响应代码）。

什么被认为是正确的做法？

如果不是 200，那么您认为正确的响应代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:08:14.513

我相信 200 是一个 OK 响应，只有在成功满足请求时才应该发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T02:05:28.897

一种方法是自己回答以下问题：

1.  您支持哪些 HTTP 方法？
2.  每个 HTTP 方法的预期行为是什么？
3.  对于每种支持的 HTTP 方法，如果出现问题，可能会导致哪些故障类别？

现在，使用 200 HTTP 响应代码返回您预期的响应负载。返回失败的客户端错误（400 类）或服务器端错误（500 类）。

您可能需要考虑以下事项：

*   返回特定于您的应用程序的错误代码并将它们映射到 HTTP 错误代码
*   为成功响应和错误响应定义了单独的数据协定（假设 JSON 格式或 XML 模式）

# c# - 是否可以将派生类反序列化为不知道确切类类型的基础？

> ID：14031309
> 
> 赞同：1
> 
> 时间：2012-12-25T14:02:57.723
> 
> 标签：c#, xml-serialization, deserialization

我正在使用 xml 序列化器，如下所示：

```
 public T Deserialize<T>(string model, string rootElementName = null) where T : new()
    {
        var xmlRootAttribute = GetXmlRootAttribute(rootElementName);

        var serializer = new XmlSerializer(typeof(T), xmlRootAttribute);

        using (var memoryStream = new MemoryStream())
        using (var streamWriter = new StreamWriter(memoryStream))
        {  
            streamWriter.WriteLine(model);
            streamWriter.Flush();
            memoryStream.Position = 0;

            return (T) serializer.Deserialize(memoryStream);
        }
    } 
```

在我的系统中有一个通用的地方（涉及数据验证），我不需要知道确切的类类型，实际上我只知道基类。是否可以使用类型参数基类来反序列化这个 xml 文档？如果 T 实际上是 a`List<DerivedClass>`怎么办？调用为：

```
 protected List<T> Deserialize<T>(string model) where T : new()
    {
        return XmlHelper.Deserialize<List<T>>(model, RootElementName);
    } 
```

# python - 如何配置 sublimerope 以自动完成 python 代码？

> ID：14031312
> 
> 赞同：2
> 
> 时间：2012-12-25T14:03:35.470
> 
> 标签：python, autocomplete, sublimerope

我正在尝试使用 sublime 编写代码，我想知道如何配置 sublime 以便它可以像 eclipse 一样自动完成？

我已经安装了PyQt4，如果我使用eclipse就可以了，如果我编写以下代码： from PyQt4\. 输入点后，可能匹配的列表将显示在下拉列表中？我怎么能用 sublimerope 做到这一点？我正在使用 mac。哪些配置需要改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:30:49.837

这里的解决方案 [http://messymind.net/2012/07/why-you-should-use-sublime-text-2/](http://messymind.net/2012/07/why-you-should-use-sublime-text-2/) 为我工作：

转到项目中的新 .ropeproject 文件夹并编辑 config.py。找到如下所示的部分： ?

```
#You can extend python path for looking up modules
#prefs.add('python_path', '~/python/') 
```

在这里，您可以将源代码添加到您的站点包和当前打开的项目中，例如：？

```
prefs.add('python_path', '/path/to/site-packages')
prefs.add('python_path', '/path/to/your/project') 
```

# javascript - XMLHttpRequest 不发送到另一个页面

> ID：14031315
> 
> 赞同：0
> 
> 时间：2012-12-25T14:03:47.437
> 
> 标签：javascript, html, ajax, xmlhttprequest

我使用此代码上传文件，并且此代码有一个进度条。这段代码的问题是它在上传文件后，在进度条上达到 100% 后，它永远不会将我发送到“upload.php”。（这不是我的代码）。

编码：

```
// get form data for POSTing
//var vFD = document.getElementById('upload_form').getFormData(); // for FF3
var vFD = new FormData(document.getElementById('upload_form')); 

// create XMLHttpRequest object, adding few event listeners, and POSTing our data
var oXHR = new XMLHttpRequest();        
oXHR.upload.addEventListener('progress', uploadProgress, false);
oXHR.addEventListener('load', uploadFinish, false);
oXHR.addEventListener('error', uploadError, false);
oXHR.addEventListener('abort', uploadAbort, false);
oXHR.open('POST', 'upload.php');
oXHR.send(vFD); 
```

整个剧本

```
// common variables
var iBytesUploaded = 0;
var iBytesTotal = 0;
var iPreviousBytesLoaded = 0;
var iMaxFilesize = 1048576; // 1MB
var oTimer = 0;
var sResultFileSize = '';

var uploadingcanceld = "حدث خطأ أثناء تحميل الملف";

function secondsToTime(secs) { // we will use this function to convert seconds in normal time format
    var hr = Math.floor(secs / 3600);
    var min = Math.floor((secs - (hr * 3600))/60);
    var sec = Math.floor(secs - (hr * 3600) -  (min * 60));

    if (hr < 10) {hr = "0" + hr; }
    if (min < 10) {min = "0" + min;}
    if (sec < 10) {sec = "0" + sec;}
    if (hr) {hr = "00";}
    return hr + ':' + min + ':' + sec;
};

function bytesToSize(bytes) {
    var sizes = ['Bytes', 'KB', 'MB'];
    if (bytes == 0) return 'n/a';
    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
    return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + sizes[i];
};

function fileSelected() {

    // hide different warnings
    document.getElementById('upload_response').style.display = 'none';
    document.getElementById('error').style.display = 'none';
    document.getElementById('error2').style.display = 'none';
    document.getElementById('abort').style.display = 'none';
    document.getElementById('warnsize').style.display = 'none';

    // get selected file element
    var oFile = document.getElementById('ufile').files[0];

    // filter for image files
    var rFilter = /^(image\/bmp|image\/gif|image\/jpeg|image\/png|image\/tiff)$/i;
    if (! rFilter.test(oFile.type)) {
        document.getElementById('error').style.display = 'block';
        return;
    }

    // little test for filesize
    if (oFile.size > iMaxFilesize) {
        document.getElementById('warnsize').style.display = 'block';
        return;
    }

    // get preview element
    var oImage = document.getElementById('preview');

    // prepare HTML5 FileReader
    var oReader = new FileReader();
        oReader.onload = function(e){

        // e.target.result contains the DataURL which we will use as a source of the image
        oImage.src = e.target.result;

        oImage.onload = function () { // binding onload event

            // we are going to display some custom image information here
            sResultFileSize = bytesToSize(oFile.size);
            document.getElementById('fileinfo').style.display = 'block';
            document.getElementById('filename').innerHTML = 'Name: ' + oFile.name;
            document.getElementById('filesize').innerHTML = 'Size: ' + sResultFileSize;
            document.getElementById('filetype').innerHTML = 'Type: ' + oFile.type;
            document.getElementById('filedim').innerHTML = 'Dimension: ' + oImage.naturalWidth + ' x ' + oImage.naturalHeight;
        };
    };

    // read selected file as DataURL
    oReader.readAsDataURL(oFile);
}

function startUploading() {
    // cleanup all temp states
    iPreviousBytesLoaded = 0;
    $("#upload").animate({height:'75px'},350);
    $("#loadingborders").fadeIn(1500);
    $("#progress_percent").fadeIn(1500);
    $("#upload_button").fadeOut(100);
    $("#ufile").fadeOut(100);
    document.getElementById('ufile').style.margin = '5px 0px -5px 0px';
    document.getElementById('upload_response').style.display = 'none';
    document.getElementById('error').style.display = 'none';
    document.getElementById('error2').style.display = 'none';
    document.getElementById('abort').style.display = 'none';
    document.getElementById('warnsize').style.display = 'none';
    document.getElementById('progress_percent').innerHTML = '';
    var oProgress = document.getElementById('progress');
    oProgress.style.display = 'block';
    oProgress.style.width = '0px';

    // get form data for POSTing
    //var vFD = document.getElementById('upload_form').getFormData(); // for FF3
    var vFD = new FormData(document.getElementById('upload_form')); 

    // create XMLHttpRequest object, adding few event listeners, and POSTing our data
    var oXHR = new XMLHttpRequest();        
    oXHR.upload.addEventListener('progress', uploadProgress, false);
    oXHR.addEventListener('load', uploadFinish, false);
    oXHR.addEventListener('error', uploadError, false);
    oXHR.addEventListener('abort', uploadAbort, false);
    oXHR.open('POST', 'upload.php');
    oXHR.send(vFD);

    // set inner timer
    oTimer = setInterval(doInnerUpdates, 300);
}

function doInnerUpdates() { // we will use this function to display upload speed
    var iCB = iBytesUploaded;
    var iDiff = iCB - iPreviousBytesLoaded;

    // if nothing new loaded - exit
    if (iDiff == 0)
        return;

    iPreviousBytesLoaded = iCB;
    iDiff = iDiff * 2;
    var iBytesRem = iBytesTotal - iPreviousBytesLoaded;
    var secondsRemaining = iBytesRem / iDiff;

    // update speed info
    var iSpeed = iDiff.toString() + 'B/s';
    if (iDiff > 1024 * 1024) {
        iSpeed = (Math.round(iDiff * 100/(1024*1024))/100).toString() + 'MB/s';
    } else if (iDiff > 1024) {
        iSpeed =  (Math.round(iDiff * 100/1024)/100).toString() + 'KB/s';
    }

    document.getElementById('speed').innerHTML = iSpeed;
    document.getElementById('remaining').innerHTML = '| ' + secondsToTime(secondsRemaining);        
}

function uploadProgress(e) { // upload process in progress
    if (e.lengthComputable) {
        iBytesUploaded = e.loaded;
        iBytesTotal = e.total;
        var iPercentComplete = Math.round(e.loaded * 100 / e.total);
        var iBytesTransfered = bytesToSize(iBytesUploaded);

        document.getElementById('progress_percent').innerHTML = iPercentComplete.toString() + '%';
        document.getElementById('progress').style.width = (iPercentComplete * 4).toString() + 'px';
        document.getElementById('b_transfered').innerHTML = iBytesTransfered;
        if (iPercentComplete == 100) {
            var oUploadResponse = document.getElementById('upload_response');
            oUploadResponse.innerHTML = '<h1>Please wait...processing</h1>';
        }
    } else {
        document.getElementById('progress').innerHTML = 'unable to compute';
    }
}

function uploadFinish(e) { // upload successfully finished
    var oUploadResponse = document.getElementById('upload_response');
    oUploadResponse.innerHTML = e.target.responseText;

    document.getElementById('progress_percent').innerHTML = '100%';
    document.getElementById('progress').style.width = '400px';
    document.getElementById('filesize').innerHTML = sResultFileSize;
    document.getElementById('remaining').innerHTML = '| 00:00:00';

    clearInterval(oTimer);
}

function uploadError(e) { // upload error
    $('#errormessage').slideUp('fast', function() {
        $('#errormessage').html(uploadingcanceld);
        $('#errormessage').slideDown('fast');
    });
    clearInterval(oTimer);
}  

function uploadAbort(e) { // upload abort
    clearInterval(oTimer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T22:04:27.180

XHR 是动态数据调用，它不是文档转发调用，这意味着我们开始使用 XHR 的原因是我们不想将客户端转发到另一个页面以获取新内容进入页面。因此，您可能希望等待 XHR 完成发送数据的过程，通过 XHR 获取传输的结果，并根据这些结果做您想做的事情。

因此，本质上，您正在创建一个虚拟文档客户端/服务器传输和握手，而无需转发客户端，而 XHR 正是为此而创建的。

# ruby-on-rails - 如何仅在登录时运行 setInterval ajax 调用？

> ID：14031316
> 
> 赞同：1
> 
> 时间：2012-12-25T14:04:16.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我已经实现了计数未读计数的自动重新加载。
它每 15 秒返回未读消息的数量。
但即使用户未登录，它也会执行相同的操作。

我怎样才能阻止这个？我只想在用户登录时这样做。

我有这样的js

```
jQuery(document).ready(function () {
    refreshPartial();
    setInterval(refreshingPartial, 15000)
});

function refreshingPartial() {
  $.ajax({
    url: "/messages/refreshing_partial",
    type: "GET",
    dataType: "script",
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:26:03.470

使用内联js

```
<% if current_user %>
    <%= javascript_tag do %>
        jQuery(document).ready(function () {
            refreshPartial();
            setInterval(refreshingPartial, 15000)
        });

        function refreshingPartial() {
          $.ajax({
            url: "/messages/refreshing_partial",
            type: "GET",
            dataType: "script",
          });
        }
    <% end %>
<% end %> 
```

或者

如果用户登录并控制课程，则将课程添加到正文。

```
<body class="<%= "logged-in" if current_user %>">

</body> 
```

并稍微改变你的js

```
jQuery(document).ready(function () {
  if ($("body").is(".signed-in")) { 
    refreshPartial();
    setInterval(refreshingPartial, 15000)
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:29:29.297

`refreshPartial`js 脚本只有在用户登录时才会呈现。以下应该可以解决问题：

```
<script type="text/javascript">
    $(document).ready(function () {
        <% if is_user_signed_in %>
            refreshPartial();
            setInterval(refreshingPartial, 15000);

            function refreshingPartial() {
                $.ajax({
                        url: "/messages/refreshing_partial",
                        type: "GET",
                        dataType: "script",
                });
            }
        <% end %>
    });
</script> 
```

# php - 检查用户友谊

> ID：14031318
> 
> 赞同：1
> 
> 时间：2012-12-25T14:04:20.790
> 
> 标签：php, mysql, database-design

继续[这个问题](https://stackoverflow.com/questions/13933248/mysql-2-way-query-check/)，

在我的网络应用程序中，我希望允许用户添加朋友，例如 facebook，在我之前的问题中，我最终决定使用 @yiding 所说的数据库结构：

> 我会去规范化关系，使其对称。也就是说，如果 1 和 2 是朋友，我将有两行 (1,2) 和 (2,1)。
> 
> 缺点是它的大小是两倍，并且在建立和破坏友谊时必须进行 2 次写入。优点是您的所有读取查询都更简单。这可能是一个很好的权衡，因为大多数时候你是在阅读而不是写作。
> 
> 这还有一个额外的好处，如果您最终超出了一个数据库并决定进行用户分片，您不必遍历所有其他数据库分片来找出一个人的朋友是谁。

所以，现在如果用户 1 添加用户 2，用户 5 添加用户 2，类似这样的内容将进入数据库：

```
ROW_ID    USER_ID   FRIEND_ID   STATUS
1         1         2           0
2         2         1           0
3         5         2           0
4         2         5           0 
```

如您所见，我们首先插入“ **REQUEST SENDER** ”行，所以现在假设用户`5`已登录，我们想向他显示友谊请求，这是我的查询：

```
$check_requests = mysql_query("SELECT * FROM friends_tbl WHERE FRIEND_ID = '5'"); 
```

上面的查询，将获取 ROW_ID = 4，这意味着上面的查询显示用户 2 添加了 5，但他没有，实际上用户 5 添加了用户 2，所以这里我们不应该显示用户 5 的任何友谊请求，相反我们需要为用户 2 显示它。

我应该如何正确检查这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:13:02.343

*这是一个经过编辑的答案。*

* * *

您的 SQL 查询应如下所示：

```
SELECT USER_ID, FRIEND_ID FROM friends_tbl WHERE FRIEND_ID = '5' OR USER_ID = '5' 
```

然后你必须以这种方式解析你的结果。假设你有一个这样的 php 数组：

```
$result = array(
    0 => array(
        'USER_ID' => 5,
        'FRIEND_ID' => 2
    ),
    1 => array(
        'USER_ID' => 2,
        'FRIEND_ID' => 5
    )
    2 => array(
        'USER_ID' => 5,
        'FRIEND_ID' => 8
    ),
    3 => array(
        'USER_ID' => 8,
        'FRIEND_ID' => 5
    )
) 
```

你只需要得到偶数行：

```
$result_final = array();
for($i = 0; $i < count($result); $i++) {
    if($i % 2 == 0) $result_final[] = $result[$i];
} 
```

然后你将有一个这样的数组：

```
 $result = array(
    0 => array(
        'USER_ID' => 5,
        'FRIEND_ID' => 2
    ),
    1 => array(
        'USER_ID' => 5,
        'FRIEND_ID' => 8
    )
) 
```

* * *

**替代方法：**让你的 SQL 看起来像这样：

```
SELECT FRIEND_ID FROM friends_tbl WHERE USER_ID = '5' 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:30:12.287

您需要持有一个临时表（或固定的 - 用于数据挖掘），其中包含一个用户向另一个用户发出的所有请求，例如：

表：朋友请求

```
inviterId inviteeId status tstamp 
    2           5       0    NOW()
    5           8       0    NOW() 
```

假设 0 未获批准。

比您查询所有待处理的请求

```
SELECT * FROM friendRequest WHERE invitee_id = :currentLoggedUserId AND status = 0 
```

一旦用户批准了用户，您将创建一个事务，描述这个新形成的关系并更新friendRequests 表

您还可以通过查找非相互友谊来查询这种不对称关系，其中用户有很多关注者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:30:52.893

友谊查询通知应放置在消息收件箱之类的地方。你描述的关系是为了保持友谊关系，而不是事件本身发生的事实。您应该考虑创建关系以保留通知并将其与两个插入一起正确填写`friends_tbl`

# android - Admobs 需要我已经拥有的权限

> ID：14031321
> 
> 赞同：7
> 
> 时间：2012-12-25T14:04:39.130
> 
> 标签：android, admob

我正在尝试在 Android 上使用 AdMobs。这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.krinsen.javadocreader"
    android:versionCode="2"
    android:versionName="1.0.1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:name=".app.SimpleApp"
        android:hardwareAccelerated="true"
        android:icon="@drawable/icon_about"
        android:label="@string/app_name"
        android:theme="@style/Theme.Javadoc" >
        <activity
            android:name=".ui.DocTypeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.app.default_searchable"
                android:value=".ui.SearchableJavadocActivity" />
        </activity>
<activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
</application>
</manifest> 
```

这是我的看法：

```
<com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/ads"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    ads:adSize="BANNER"
    ads:adUnitId="@string/ad_unit_id"
    ads:testDevices="@string/test_devices"
    ads:loadAdOnCreate="true" /> 
```

我有最新的 admob 库。我仍然在 logcat 中收到这个奇怪的错误：

```
INTERNET permissions must be enabled in AndroidManifest.xml 
```

我有互联网许可。我的应用程序使用互联网并且使用得很好。只有广告不想合作。我可以在哪里寻找错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:41:56.100

我认为您添加的`permissions`位置错误，请添加完整`AndroidManifest.xml`文件，

相反，您的 manifestFile 应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.novaapps.android.couponmanager"
          android:versionCode="1"
          android:versionName="1.0">

        <application android:icon="@drawable/icon" android:label="@string/app_name">
            <activity android:name=".CouponManager"
                      android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

        <activity android:name="com.google.ads.AdActivity"
                  android:configChanges="keyboard|keyboardHidden|orientation"/>

        </application>

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

</manifest> 
```

并在您的标签中`Layout`包含以下`namespace`代码`Layout`：

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

**注意：** **有关更多详细信息，请参阅本**[**教程**](http://manijshrestha.wordpress.com/2011/07/27/integrating-admob-in-your-android-app-and-make-money/)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:25:09.307

请尝试复制此内容，然后检查发生了什么，因为我在您的代码中没有发现任何错误。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xChinmoy.babywallpaperhd"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.xChinmoy.babywallpaperhd.BabyWallPaperActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity>
    </application>

</manifest> 
```

观点是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <com.google.ads.AdView
        android:id="@+id/advw"
        android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    ads:adSize="BANNER"
    ads:adUnitId="a150cd49f90925f"
    ads:backgroundColor="#FFFF00"
    ads:loadAdOnCreate="true"
    ads:primaryTextColor="#FFFFFF"
    ads:refreshInterval="30"
    ads:secondaryTextColor="#CCCCCC"
    android:visibility="visible" />                    
 </RelativeLayout> 
```

我昨天创建了它并完美显示了add，admob jar版本是6.0.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T18:25:35.433

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

只需添加最后两行。我通过这个解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T08:54:56.697

森宁，

admob 需要您的**adUnitId**才能使用您的帐户。

获取与您的帐户关联的 admob adUnitId 并使用它。

如果您目前正在开发中，请不要忘记在 XML 中添加**ad:testDevices 。**

其余的对 Chinmoy 的代码片段很好。

在 admob 中创建一个应用程序条目，并从该条目的设置中获取 adUnitId。

希望这会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T05:25:32.593

只需尝试在标签`Manifest.xml`之外的文件中添加以下行。`application`

> ```
> <meta-data
>     android:name="ADMOB_ALLOW_LOCATION_FOR_ADS"
>     android:value="true" /> 
> ```**

# jquery - Keydown 处理前一个字符而不是当前字符

> ID：14031324
> 
> 赞同：0
> 
> 时间：2012-12-25T14:05:02.937
> 
> 标签：jquery, keydown, delayed-execution

我尝试使用 jquery 和 ajax 创建一个 MS-Dos 仿真窗口。它工作得很好，但是当我输入一个单词或按 Enter 键时，脚本显示一个字符太晚了（第一次按下时没有显示字符，对于每个下一个按键，它显示用户输入的前一个字符而不是当前字符）。

这是我的脚本的简化版本：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/terminal.css">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() 
            {       
                //set cursor position
                $('#cursor').css('left','0px');

                //focus on textfield
                $('#field').focus();

                //On key down...
                $('#field').keydown(function(event) 
                {
                    request=$(this).val();
                    count=$(this).val().length;

                    //Display chars as they come
                    $("#instruct").html(request);

                    // If "enter" is pressed
                    if (event.which == 13) 
                    {
                        event.preventDefault();

                        //clean user entry
                        request=request.replace(/\n/g, "");

                        // Process user entry
                        $.ajax({
                              type: "POST",
                              url: "scripts/ajax/terminal.php",
                              data: {command:request},
                              success: function(response) 
                              {
                                // if user typed something before pressing "enter"
                                if(response !='')
                                {
                                    // update list by logging the previous entry, showing system response and clearing the textarea
                                    $('#log').append("<li class='user'>--- &gt;<span>"+request+"</span></li>");
                                    $('#log').append("<li class='sys' >SYS &gt;<span>"+response+"</span></li>");
                                    $('#field').val('');
                                }
                              }
                        }); 
                    }
                });             
            });
        </script>   
    </head>

    <body>
        <ul id="log">
            <li class='sys'>Sys &gt;<span>Identification required</span></li>
        </ul>

        <ul id="realtime">
            <li id="live-space">
                <span class="user-line">--- &gt;</span>
                <textarea type="text" id="field"></textarea>
                <div>
                    <span id="instruct"></span><div id="cursor">_</div>
                </div>
            </li>
        </ul>
    </body>
</html> 
```

我确定“keyDown”会在它应该被触发时被触发，因为当我改变它时

```
$("#instruct").html(request); 
```

进入这个

```
$("#instruct").html(request+'x'); 
```

...“x”将在第一个 keydown 之后直接显示，而“request”内容将延迟到下一个 keydown（例如，如果我输入“a”，我只会看到“x”，当我输入“b”紧随其后，我看到“ax”等......）。

所以这不是关于触发按键，而是关于在正确的时间选择正确的角色。

我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:17:52.190

**[工作演示](http://jsfiddle.net/35ETH/)**

该字段的值在您捕获它之前不会被更新，只需附加按下的键的字符，但如果您使用`String.fromCharCode(event.which)`则返回大写字符`keydown``keypress`

```
$('#field').on('keypress',function(event){
    request=$(this).val() + String.fromCharCode(event.which);
    ... 
```

或者你可以使用

```
$('#field').on('keyup',function(event){
    request=$(this).val(); // value is ready by now
    ... 
```

但反馈似乎较慢，因为您正在等待释放密钥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:10:31.363

这是关于时机。在`keydown`事件发生的时候，控件还没有接收到字符——事实上，它甚至不确定它是否会接收到它（因为你可以阻止`keydown`或`keypress`，它只是在它之后添加）。因此，当您阅读控件的内容时，您做得太早了 - 这就像您决定去麦当劳时尝试吃汉堡包，而不是在您去付款之后。

[您可以在此处](http://www.quirksmode.org/dom/events/keys.html)阅读有关键盘事件的更多信息，并在[此处的规范](http://www.w3.org/TR/DOM-Level-3-Events/#events-keyboard-event-order)中了解更多详细信息。

解决方案：这不是`keydown`本意。尝试看看`change`活动是否更适合您。编辑：我的意思是，抓住`change`事件中的角色。`keydown`像你做的那样用 抓住 Enter 键。

# sql-server - 计算列公式

> ID：14031329
> 
> 赞同：0
> 
> 时间：2012-12-25T14:05:25.387
> 
> 标签：sql-server, formula, calculated-columns

我用这个公式创建了一个计算列：

```
(CONVERT([datetime],(CONVERT([varchar],[TradeDate])+' ')+CONVERT([varchar],[TradeTime]))) 
```

但是当我保存表格时，公式会自动更改为：

```
(CONVERT([datetime],(CONVERT([varchar],[TradeDate],0)+' ')+CONVERT([varchar],[TradeTime],0),0)) 
```

所以它会导致这个问题：

假设`TradeDate`是：`2012-08-13`并且`TradeTime`是：`10:29:59.0000000`

而不是显示`2012-08-13 10:29:59.000`，而是显示`2012-08-13 10:29:00.000`，因为改变了公式。

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:25:35.533

只需使用`(CONVERT([datetime],[TradeDate],0)+CONVERT([datetime],[TradeTime],0))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:42:42.020

SQL Server 添加`0`到您的转换表达式，因为这是默认样式，它以格式表示日期时间`mon dd yyyy hh:miAM (or PM)`

convert 函数中的第三个参数`0 or 100`表示样式。So 表示默认样式。因此您可以在创建计算列时指定样式。

[CAST 和转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# winforms - WinForms.net：仅用于一个项目的控件

> ID：14031330
> 
> 赞同：0
> 
> 时间：2012-12-25T14:05:37.917
> 
> 标签：winforms, visual-studio-2010, user-controls, toolbox

我想制作一个可以多次拖动形成的复合控件，但该控件应仅驻留在一个项目中。我不喜欢制作控件并将其安装为对 Visual Studio 2010 工具箱中的所有项目可见的想法。

所以，我假设 UserControl 是我需要的。我创建了一个，但现在无法将其拖到表单或在工具箱中找到它。

工具 > 选项 > Windows 窗体设计器 > AutoToolboxPopulate 设置为 True。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:34:19.903

我必须编译项目以使 UserControl 出现在工具箱中。

# iphone - Soap Web 服务和 iOS 客户端，总是有错误 HTTP 200？

> ID：14031334
> 
> 赞同：-3
> 
> 时间：2012-12-25T14:06:08.980
> 
> 标签：iphone, objective-c, ios, web-services, soap

我正在肥皂网络服务和 iOS 应用程序之间建立连接并完成连接，但我收到错误 HTTP 200。

我该如何解决这个错误？

* * *

**代码**

```
-(IBAction)buttonClick:(id)sender
{
    dig = @"م ط ر" ;
    cha =@"0158";

    NSString *soapMessage = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                             "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                             "<s:Body>"
                             "<GetCarDataByPlate xmlns=\"http://tempuri.org/\">"
                             "<params>"
                             "<PlateDigits>%@</PlateDigits>"
                             "<PlateStr>%@</PlateStr>"
                             "<Pass>Mob.2013</Pass>"
                             "</params>"
                             "</GetCarDataByPlate>"
                             "</s:Body>"
                             "</s:Envelope>",dig,cha];

    NSLog(@"%@", soapMessage);

    NSURL *url = [NSURL URLWithString:@"http://www.uis.com.sa/Wcf_MobileS/MobileService.svc?wsdl"];

    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];

    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

    [theRequest addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:@"http://tempuri.org/IMobileService/GetCarDataByPlate" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    NSLog(@"theConnection = %@",theConnection);

    if(theConnection)
    {
        webData = [NSMutableData data];
        NSLog(@"WebData = %@",webData);

    }
    else
    {
        NSLog(@"theConnection is null");
    }

}

-(void)connection:(NSURLConnection*)connection didReceiveResponse:(NSURLResponse*)response
{
    [webData setLength:0];
    NSHTTPURLResponse * httpResponse;

    httpResponse = (NSHTTPURLResponse *) response;

    NSLog(@"HTTP error %zd", (ssize_t) httpResponse.statusCode);

}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data
{
    [webData appendData:data];
  //  NSLog(@"webdata: %@", data);

}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError*)error
{
    NSLog(@"error with the connection");
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"DONE. Received bytes %d", [webData length]);
    NSString *theXML = [[NSString alloc] initWithBytes:[webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    NSLog(@"xml %@",theXML);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:10:22.193

你会得到 HTTP 状态码（不是错误码！），`didReceiveResponse`这显然是一个好兆头。HTTP 状态码 200 表示**OK**。

* * *

> 200 好
> 
> 请求已成功。响应返回的信息取决于请求中使用的方法，例如：
> 
> GET 在响应中发送与请求的资源对应的实体；
> 
> HEAD 请求资源对应的实体头字段在响应中发送，不带任何消息体；
> 
> POST 描述或包含操作结果的实体；
> 
> TRACE 包含终端服务器收到的请求消息的实体。

取自[W3 状态代码定义 - rfc2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

* * *

继续并`httpResponse`使用相同的方法将其打印到控制台中。

# javascript - 仅数字脚本在 Firefox 17 中不起作用

> ID：14031336
> 
> 赞同：-1
> 
> 时间：2012-12-25T14:07:16.333
> 
> 标签：javascript

嗨，我在 Javascript 中有以下代码。这在 Firefox 17 上不起作用（您可以输入字母），但在其他浏览器上也能正常工作。有人可以告诉我一种解决方法吗？谢谢你的关注。

```
function onlyNumbers(evt)
{
var e = event || evt; // for trans-browser compatibility
var charCode = e.which || e.keyCode;

if (charCode > 31 && (charCode < 48 || charCode > 57))
    return false;

return true;

} 
```

编辑：

```
<input name="outletno" type="text" id="outletno" size="15" maxlength="10" onkeypress="return onlyNumbers()" value="<?= htmlentities ($values['outletno']) ?>"></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:10:26.000

您没有将事件参数传递给您的函数。

```
<input name="outletno" type="text" id="outletno" size="15" maxlength="10" onkeypress="return onlyNumbers(event)" value="<?= htmlentities ($values['outletno']) ?>"></td> 
```

Firefox 没有全局“事件”符号。您的函数需要一个参数，但您没有传递它。

你可以把浏览器对“onfoo”元素属性的处理想象成它用构造函数为你构造了一个函数`Function`，如下：

```
element.onfoo = new Function(attributeValue, "event"); 
```

（实际上并没有*发生*这种情况，但实际上就是这样。）这意味着属性值中的代码可以预期有一个名为“event”的参数可用，因此您将传递给您的函数。

您的代码可以在 IE、Chrome 和 Safari 中运行，因为这些浏览器*确实*将“事件”值作为全局变量保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:12:01.787

这是仅检查数字的不好方法。charCode 远非跨浏览器。这是一篇解释键盘事件的大多数差异（如果不是全部）的文章：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

总的来说，它告诉你尽可能避免使用它们。

这是一个正确的方法（使用onkeyup，因为onkeypress没有更新的值）：

```
document.getElementById('outletno').onkeyup = function() {
    // If the value isn't a number, take off the last character
    if (!/\d+/.test(this.value)) {
        this.value = this.value.slice(0, -1);
    }
}; 
```

工作jsfiddle：http: [//jsfiddle.net/uFRwZ/](http://jsfiddle.net/uFRwZ/)

# ruby-on-rails - 我应该把它放在模型、助手或控制器的什么地方？

> ID：14031339
> 
> 赞同：1
> 
> 时间：2012-12-25T14:07:47.013
> 
> 标签：ruby-on-rails, model-view-controller

我有一个我称之为的视图，`school.html.erb`在那个视图中我有 Ruby 代码来计算那所学校的平均评分。

**像这样：**

```
<span class="label label-info">
 <%= @school.reviews.average(:rating).round(1) unless @school.reviews.blank? %>
</span> 
```

我喜欢把它移到其他地方，我应该把它放在模型、助手还是控制器中。如果我这样做，我怎么能从视图中调用它。

我有以下型号`User`：`Review`和`School`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:22:07.387

计算平均值属于模型：

```
class School < ActiveRecord::Base

  ...

  def average_review_rating
    return nil if reviews.blank?
    reviews.average(:rating)
  end

end 
```

舍入平均值属于视图，因为它是格式化的。将计算放入模型中，并在视图（或助手）中进行格式化。

```
<%= @school.average_review_rating.round(1) if @school.average_review_rating %> 
```

这可以使用[andand](http://andand.rubyforge.org/) gem 大大缩短。

```
<%= @school.average_review_rating.andand.round(1) %> 
```

您可能希望将四舍五入推入帮助程序，在那里可以对其进行独立测试：

```
class SchoolHelper

  def format_rating(n)
    n.andand.round(1)
  end

end 
```

像这样使用：

```
<%= format_rating(@school.average_review_rating) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:14:36.057

我认为将它作为一种方法放入模型中是很有意义的。

```
class School
  def avg_rating
    reviews.average(:rating).round(1) unless reviews.blank?
  end
end 
```

为什么有意义？好吧，学校评级是您可能必须在许多其他地方访问的东西：其他视图、其他模型等。通过将其放入方法中，您可能看起来只是`School`. `school.avg_rating`几乎是在自言自语：“学校，你的评价是多少？”

为什么视图不行？您可能希望在其他视图中访问它。有帮手，对吧？但是为什么助手不会做呢？您可能还想从其他模型访问它。助手不是用来计算数据的，它们是用来格式化数据和做其他类似的事情的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:18:02.983

放入模型（学校）：

```
def reviews_average
  reviews.average(:rating).round(1) unless reviews.blank?
end 
```

看法：

```
<%= @school.reviews_average %> 
```

**原因：**不要将DB密集型程序放入视图中，因为渲染速度取决于它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:38:50.890

我会说它在模型中效果最好，因为它正在处理数据。这种遵循[“胖模型，瘦控制器”的原则](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)。

另一个合理的选择是装饰者或演示者，使用像[Draper](https://github.com/drapergem/draper)这样的库。

# javascript - 向下滚动时如何在顶部修复主导航

> ID：14031340
> 
> 赞同：0
> 
> 时间：2012-12-25T14:08:09.230
> 
> 标签：javascript, css, html

首先祝大家圣诞快乐

我想在向下滚动时将顶部导航菜单栏固定在顶部：[csschopper.com](http://csschopper.com)

这是由 `position: fixed;`css 属性发生的，但是当我把它放在 css 菜单中时，它会固定在顶部。这将需要一些 javascript 代码，但我不知道代码到底是什么。另外，当有人向下滚动时，我也想在菜单旁边显示小徽标，例如[cschopper.com](http://csschopper.com)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:34:44.113

这就是代码的样子：[jsFiddle](http://jsfiddle.net/ldaniell14260/CCmFR/)在这个例子中，我创建了两个导航栏，但你也可以有一个，然后添加一个项目

这是 jQuery 代码，因此请确保加载 jQuery 库：

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:30:24.597

顶栏的初始位置是静态的。但是当用户在 jquery 上像这样滚动（你必须捕捉 onscroll 事件）时：

```
$(window).scroll(function()); 
```

滚动位置大于标题高度时，Javascript 将顶栏位置修改为固定，例如：

```
documentById().style.display 
```

左边的标志也是如此。

# c# - 为 PerSession WCF 服务调用了两次静态构造函数

> ID：14031344
> 
> 赞同：7
> 
> 时间：2012-12-25T14:09:17.247
> 
> 标签：c#, multithreading, wcf, silverlight, .net-4.0

无法理解为什么`PerSession`/ WCF 服务的类型构造函数调用了两次。`ConcurrencyMode`是`Multiple`。只需启动五个同时执行相同 WCF 服务方法调用的客户端，在日志中我看到`static`构造函数被调用了两次，第一次和 3 秒后第二次调用另一个`ProcessId/ThreadId`。构造函数本身和 WCF 跟踪日志都没有异常。根据日志，构造函数执行时间约为 10 毫秒。这导致所有静态字段不会在所有服务实例之间共享，如果有 5 个客户端连接，我有 5 个服务和两个不同的静态上下文，因此 onse 静态字段的变化不会反映在所有服务中。

这个问题混淆了很多事情，因为我依赖于跨多个服务实例共享的一些静态缓存。

服务托管在`IIS`. 没有 IIS 重新启动，AppPool 在此时间间隔内回收。

```
[AspNetCompatibilityRequirements(RequirementsMode =
  AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(
  InstanceContextMode = InstanceContextMode.PerSession, 
  IncludeExceptionDetailInFaults = true, 
  ConcurrencyMode = ConcurrencyMode.Multiple)]
public class WcfService
{ 
    private static readonly ILog logger;
    private static volatile bool typeInitialized;

    static WcfService()
    {
        try
        {
            // Here is typeInitialized is false in both calls
            logger = LogManager.GetLogger("LogName");

            logger.InfoFormat("[PID:{0}] [THID:{1}] BEGIN Static constructor",
               Process.GetCurrentProcess().Id,
               Thread.CurrentThread.ManagedThreadId);
        }
        catch (Exception exception)
        {
           logger.Error("error on type construction stage", exception);
        }
        finally
        {
            logger.InfoFormat("[PID:{0}] [THID:{1}] END Static constructor",
               Process.GetCurrentProcess().Id,
               Thread.CurrentThread.ManagedThreadId);               
           typeInitialized = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T14:18:32.610

假设您使用 IIS 托管您的服务，这是正常行为，除非您将进程显式配置为仅允许启动单个 AppDomain。

如果您查看正在运行的进程列表，您会发现日志中的每个进程 ID 对应于托管单独应用程序域的 w3wp.exe 副本。

# mysql - 组合不同表格的结果以创建字母列表

> ID：14031348
> 
> 赞同：0
> 
> 时间：2012-12-25T14:09:40.750
> 
> 标签：mysql, sql, sql-order-by, union

我做了功课，但在下面的问题上找不到任何答案...

我想创建一个由我的 MySQL 数据库的两个（或多个）表的结果组成的“**字母索引”。**

**表 1**是“search_words”，使用字段：id - **search_word**

**表 2**是“类别”，使用字段：id - **category_name**

所以我需要的是一个按字母顺序排序的列表，其中包含这两个表的结果，字段“search_word”和“category_name”的**混合输出**，但按字母顺序排序。由于它们没有关系，我猜这些表是不可连接的。

有没有可能，或者答案只是“不，没有！”？

提前感谢任何回复、帮助或重定向到以前发布的有关此问题的主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:27:39.320

试试这个：

```
SELECT id, test 
FROM (SELECT id,search_word AS test
      FROM search_words 
      UNION 
      SELECT id,category_name AS test 
      FROM categories 
     ) AS a 
ORDER BY test;` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:13:25.893

```
SELECT id,search_word AS word FROM search_words
UNION
SELECT id,category_name AS word FROM categories
ORDER BY word 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T15:46:24.560

带有 WHERE

`SELECT email AS emailList FROM tableA WHERE tableA.email LIKE "'. mysql_real_escape_string($_REQUEST['term']) .'%" UNION SELECT email AS emailList FROM tableB WHERE tableB.email LIKE "'. mysql_real_escape_string($_REQUEST['term']) .'%"`

# php - Symfony2 没有实体的表单验证器组

> ID：14031358
> 
> 赞同：4
> 
> 时间：2012-12-25T14:10:56.500
> 
> 标签：php, forms, validation, symfony

我正在使用 Symfony2 表单组件来构建和验证表单。现在我需要基于单个字段值设置验证器组，不幸的是，似乎每个示例都基于实体 - 由于多种原因，我没有使用实体。

示例：如果任务为空，则应删除所有约束验证器，但如果不是，则应使用默认的验证器集（或验证器组）。

换句话说，我想要实现的是使子表单成为可选的，但如果填充了关键字段，仍然会被验证。

有人可以给我一个如何配置它的例子吗？

```
<?php
namespace CoreBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Validator\Constraints as Assert;
use CoreBundle\Form\Type\ItemGroupOption;

class ItemGroup extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('title', 'text', array(
            'label' => 'Titel',
            'attr' => array('class' => 'span10 option_rename'),
            'required' => false
        ));
        $builder->add('max_selections', 'integer', array(
            'label' => 'Max tilvalg',
            'constraints' => array(new Assert\Type('int', array('groups' => array('TitleProvided')))),
            'attr' => array('data-default' => 0)
        ));
        $builder->add('allow_multiple', 'choice', array(
            'label' => 'Tillad flere valg',
            'constraints' => array(new Assert\Choice(array(0,1))),
            'choices'  => array(0 => 'Nej', 1 => 'Ja')
        ));
        $builder->add('enable_price', 'choice', array(
            'label' => 'Benyt pris',
            'constraints' => array(new Assert\Choice(array(0,1))),
            'choices'  => array(0 => 'Nej', 1 => 'Ja'),
            'attr' => array('class' => 'option_price')
        ));
        $builder->add('required', 'choice', array(
            'label' => 'Valg påkrævet',
            'constraints' => array(new Assert\Choice(array(0,1))),
            'choices'  => array(0 => 'Nej', 1 => 'Ja')
        ));
        $builder->add('options', 'collection', array(
            'type' => new ItemGroupOption(),
            'allow_add' => true,
            'allow_delete' => true,
            'by_reference' => false
            )
        );
        $builder->add('sort', 'hidden');
    }

    public function getName()
    {
        return 'item_group';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        global $app;

        $resolver->setDefaults(array(
            'validation_groups' => function(FormInterface $form) use ($app) {

                // Get submitted data
                $data = $form->getData();

                if (count($app['validator']->validateValue($data['title'], new Assert\NotBlank())) == 0) {
                    return array('TitleProvided');
                } else {
                    return false;
                }
            },
        ));
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T09:45:00.163

如果您使用的是 2.1，您可能需要查看[“基于提交数据的组”](http://symfony.com/doc/current/book/forms.html#groups-based-on-submitted-data)。

**更新**

`/demo/contact`使用 Symfony 标准版默认`AcmeDemoBundle`提供的演示联系页面的示例：

具有条件验证组的表单类型：

```
namespace Acme\DemoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Validator\Constraints as Assert;

class ContactType extends AbstractType
{
    // Inject the validator so we can use it in the closure
    /**
     * @var Validator
     */
    private $validator;

    /**
     * @param Validator $validator
     */
    public function __construct(Validator $validator)
    {
        $this->validator = $validator;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('email', 'email');
        $builder->add('message', 'textarea', array(
            // Added a constraint that will be applied if an email is provided
            'constraints' => new Assert\NotBlank(array('groups' => array('EmailProvided'))),
        ));
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        // This is needed as the closure doesn't have access to $this
        $validator = $this->validator;

        $resolver->setDefaults(array(
            'validation_groups' => function(FormInterface $form) use ($validator) {
                // Get submitted data
                $data = $form->getData();
                $email = $data['email'];

                // If email field is filled it will not be blank
                // Then we add a validation group so we can also check message field
                if (count($validator->validateValue($email, new Assert\NotBlank())) == 0) {
                    return array('EmailProvided');
                }
            },
        ));
    }

    public function getName()
    {
        return 'contact';
    }
} 
```

不要忘记以`validator`表单类型注入服务：

```
<?php

namespace Acme\DemoBundle\Controller;

//...

class DemoController extends Controller
{
    // ...

    public function contactAction()
    {
        $form = $this->get('form.factory')->create(new ContactType($this->get('validator')));

        // ...
    }
} 
```

如您所见，仅当填写该`message`字段时才会触发该字段的验证。`email`

使用差异工具来捕捉差异。

# android - 在设备上运行 apk 时出错 (Android)

> ID：14031361
> 
> 赞同：0
> 
> 时间：2012-12-25T14:11:17.997
> 
> 标签：android, eclipse

我不知道为什么该应用程序仅在设备的进程调试中运行。当我尝试在设备上使用该应用程序时，该应用程序不起作用。我在下面显示错误。

```
12-25 11:58:51.829: E/Trace(30281): error opening trace file: No such file or directory (2)
12-25 11:58:52.354: E/AndroidRuntime(30281): FATAL EXCEPTION: main
12-25 11:58:52.354: E/AndroidRuntime(30281): java.lang.RuntimeException: Unable to stop activity {com.example.menu/com.example.menu.MainActivity}: java.lang.NullPointerException
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3278)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3332)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3530)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.os.Looper.loop(Looper.java:137)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at java.lang.reflect.Method.invokeNative(Native Method)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at java.lang.reflect.Method.invoke(Method.java:511)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at dalvik.system.NativeStart.main(Native Method)
12-25 11:58:52.354: E/AndroidRuntime(30281): Caused by: java.lang.NullPointerException
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ContextImpl.stopService(ContextImpl.java:1319)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.content.ContextWrapper.stopService(ContextWrapper.java:395)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at com.example.menu.MainActivity.onStop(MainActivity.java:125)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1208)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.Activity.performStop(Activity.java:5322)
12-25 11:58:52.354: E/AndroidRuntime(30281):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3273)
12-25 11:58:52.354: E/AndroidRuntime(30281):    ... 12 more 
```

代码是：

```
public class MainActivity extends Activity implements OnTouchListener, Runnable, OnSeekBarChangeListener  {

    private Intent svc;
    private MediaPlayer mp;
    private SeekBar sb; 
    private AudioManager am;

    int Volume=0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        setContentView(R.layout.splash);

        mp = MediaPlayer.create(getBaseContext(), R.raw.spalshduck);
        mp.start(); 

        Handler handler = new Handler();
        handler.postDelayed(this, 3000);

    }
    public void addListenerOnButton() {

        ImageButton soundButton = (ImageButton) findViewById(R.id.sound);
        soundButton.setOnTouchListener(this);   

    }
    public boolean onTouch(View v, MotionEvent event) 
    {

        switch (v.getId()) {
        case R.id.sound:
        {
            setContentView(R.layout.soundview);
            ImageButton soundButtonback = (ImageButton) findViewById(R.id.soundback);

            sb  =(SeekBar) findViewById(R.id.seekBar1);

            am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

            mp.start();

            int maxVolume = am.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            int curVolume = am.getStreamVolume(AudioManager.STREAM_MUSIC);

            sb.setMax(maxVolume);
            sb.setProgress(curVolume);

            sb.setOnSeekBarChangeListener(this);

            soundButtonback.setOnTouchListener(this);

            break;
        }

        case R.id.soundback:
        {
            setContentView(R.layout.activity_main);
            ImageButton soundButton = (ImageButton) findViewById(R.id.sound);
            soundButton.setOnTouchListener(this);   
            break;
        }
        }

        return true;

    }

    public void onProgressChanged(SeekBar seekb, int progress, boolean arg2) {
        am.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);
        Volume = progress;      
    }

    public void onStartTrackingTouch(SeekBar arg0) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar arg0) {
        // TODO Auto-generated method stub
        //Toast.makeText(getApplicationContext(), "Volume: " + Integer.toString(Volume), Toast.LENGTH_SHORT).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.

        return true;
    }

    public void finish() {
        stopService(svc);
        super.finish();
    }

    public void onStop() {
        stopService(svc);
        super.onStop();

    }

    @Override
    public void run() {

    setContentView(R.layout.activity_main);

    svc=new Intent(this, MusicService.class);
    startService(svc);

    addListenerOnButton();
        // TODO Auto-generated method stub

    }   
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
      super.onConfigurationChanged(newConfig);
      setContentView(R.layout.activity_main);
    }   

} 
```

没有想法解决这个问题:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:21:51.590

当活动停止时会出现问题，因为该`svc`字段是静止的`null`。您在`run`方法中的代码可能应该进入`onCreate`方法。

# asp.net-mvc - Asp.net MVC 域路由或在可选 MVC URL 上设置域

> ID：14031363
> 
> 赞同：0
> 
> 时间：2012-12-25T14:11:20.227
> 
> 标签：asp.net-mvc, dns, asp.net-mvc-routing

如何在一个 Asp.net MVC 项目中的可选 URL 上设置付费域，如下所示：

*   `http://domain.com/Controller/Action?id` -----> www.example.com
*   `domain.com/Controller/Action?id2` -----> www.sample.net

换句话说，我们希望将每个 URL 映射到 1 个 MVC 项目中的单独域名。

有必要说，之前在[Stackoverflow](https://stackoverflow.com/questions/11107250/mvc-3-domain-routing)中已经提出了一个与此相关的问题，并进行了一些更改。并且我之前在[官方asp.net网站上](http://forums.asp.net/t/1864602.aspx/1?Setting%20domain%20on%20optional%20MVC%20URL)也问过。为了澄清问题，我复制了问题以获得很好的答案。这个问题之前也问过[k.Scott Allen 先生](http://odetocode.com/)，所以他建议我阅读MVC 中的[IRouteConstrain](https://stackoverflow.com/questions/4988138/how-to-make-irouteconstraint-filter-route)主题。

无论如何，在 Global.asax 文件中映射路由中所需的配置对我来说并不明亮。

到目前为止，我收集的信息是：

1.  首先，考虑到我们已经配置了所需的 DNS 选项来处理连接到相关权威 DNS 服务器的请求。

2.  现在，我们需要`Global.asax`通过配置 MapRoutes 对文件进行一些更改。

请通过实施上述示例来回答这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:31:55.627

一种简单的外部方法是使用如下所示的 dns 重定向：

*   www.example.com ----重定向到----> www.domain.com/Controller/Action/id

可以在权威（本地）dns 服务器上执行。请注意，我们必须在 url 中使用可能的字符来存储在 dns RR 中。这可以通过更改标识符或在 IIS 中使用 Url Rewrite 方法来解决。由于为 SEO 优化 Url 和缩短主题（如子域），Url Rewrite 允许我们进行一些映射。但是，由于实际上没有使用子域，我们不能在 dns 中使用 Url 别名，如下所示：

*   www.domain.com/Controller/Action?id=optional ----映射到 --> www.domain.com/optional
*   www.domain.com/optional 不等于 optional.domain.com 所以我们不能使用这个别名：
*   www.domain.com/optional ---域别名 ---> www.example.com

最后，在 global.asax 或 C# 或 VB 文件中可用的映射技术，如 Route、IRoute 等...可用于内部映射和设置 MVC 路由引擎以表示不同的 Url 信息，但不能为域使用别名。

# java - 使用 indexOf() 函数时应该覆盖哪个函数

> ID：14031365
> 
> 赞同：0
> 
> 时间：2012-12-25T14:11:41.647
> 
> 标签：java

在 java 中使用 indexOf() 函数时应该覆盖哪个函数。我有一个数组列表，然后我将输入作为 ID 并创建一个包含 ID 且所有其他元素为空的对象，然后我需要传递该对象并获取包含该对象的元素的索引

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:13:37.860

[equals()](https://stackoverflow.com/questions/8180430/how-to-override-equals-method-in-java)方法

```
public boolean equals(Object o) {
  if (o instanceof MyObject) {
    //id comparison
    MyObject mo = (MyObject)o;
    return mo.id.equals(id);
  }
  return false;
} 
```

换`MyObject`到你的班级。

记住要改变`hashCode()`以及@Hovercraft 指出的那样。equals 和 hashCode 一起使用（为它们阅读 javadoc）。否则，您可能会遇到一些令人讨厌且可能很难找到的错误。

一个例子：

使用 java 7+ 你可以这样做：

```
public int hashCode() {
    return java.util.Objects.hashCode(id);
} 
```

# javascript - JavaScript Object 只是一个关联数组吗？

> ID：14031368
> 
> 赞同：10
> 
> 时间：2012-12-25T14:12:30.227
> 
> 标签：javascript

好的，我只是在学习 JavaScript 的基础知识，我正在学习`objects`我在哪里遇到这个例子......

JavaScript

```
var person = {
   firstname : "Smith",
   lastname  : "Bach"
}; 
```

而我们用 PHP 写的是

```
$person = array(
    "firstname"=>"Smith", 
    "lastname"=>"Bach"
); 
```

那么这是同一件事还是在理解这个概念时犯了错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T14:32:19.227

不，对象不止于此。

对象确实是一个映射/字典，但另外每个对象都从另一个对象继承了一些属性（键值对）。另一个对象称为原型。

例如：

```
var o = {
    x: 1
};

console.log(o.x === undefined);           // false, obviously
console.log(o.toString === undefined);    // false, inherited from prototype 
```

最常见的原型是通过使用构造函数创建对象来设置的：

```
var d = new Date();
console.log(d.hasOwnProperty('getYear'));     // false, it's inherited 
```

**编辑：**

以下是原型如何使用构造函数工作（这是在 JS 中执行 OOP 的方法之一）**：**

```
// constructor function
// starts with capital letter, should be called with new
var Person = function (name, age) {
    // set properties of an instance
    this.name = name;
    this.age = age;
};

// functions to be inherited are in the prototype
Person.prototype.sayHello = function () {
    return this.name + ' is ' + this.age + ' old';
};

// new:
// - creates the object
// - sets up inheritance from prototype
// - sets the object as the context of the constructor function call (this)
var p = new Person('Jason', 27);

console.log(p.sayHello()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:16:47.367

它们是关联数组，但*不仅仅是*关联数组。`Object`原型中提供了一些函数（如`.toString()`），其名称可能与属性名称冲突。对象可以通过其他函数构造，也可以赋予更多的继承属性。（请注意，普通对象*没有*的一件事是计数条目的`.length`属性，就像数组对象一样。术语“关联数组”可能不是用于 JavaScript 对象的最佳术语；它们是**对象**，应该是熟悉 JavaScript 就足够了。）

*编辑*——我的意思是：

```
var o = {};
alert("toString" in o); // alerts "true" 
```

因此，一个新创建的空对象似乎有一个名为“toString”的属性。JavaScript 的问题在于只有一个属性访问器运算符（两个，但它们是同一事物的两种风格），因此无法区分对数组内容的访问和对数组 API 的访问。（另外，在 JavaScript 中，使用“数组”这个词来考虑它们确实不是一个好主意，因为这在 JavaScript 中意味着不同的东西——数组是一种具有特殊属性的对象。）

EcmaScript 5 具有以使它们不可变和不可迭代的方式定义对象属性的机制，这有助于*一些*. 如果你想在一个对象中存储一个名为“toString”的属性，这仍然是个问题。

# javascript - 如何使用 Javascript 或 jquery 实现搜索功能

> ID：14031369
> 
> 赞同：9
> 
> 时间：2012-12-25T14:12:32.623
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

在这里，我编写了所有人名都来自 Facebook API 的代码。它显示在灯箱上。现在我想使用 javasciprt/jquery 实现搜索功能。你能帮我如何实现搜索功能吗？

```
 <div> <input type="text" id="search-criteria"/>
    <input type="button" id="search" value="search" onClick="tes();"/> </div>
<fieldset>
    <legend>Invite Facebook Friend</legend>

    <div class="fbbox">
    <img src="images/User.png" class="fbimg" />
    <div class="fix"><label for="check-2" class="left"> James </label></div>
    <input type="checkbox" name="fb" id="check-1" value="action" class="leftcx"/>
    </div>

    <div class="fbbox">
    <img src="images/User.png" class="fbimg" />
    <div class="fix"><label for="check-2" class="left">Alan </label></div>
    <input type="checkbox" name="fb" id="check-2" value="comedy" class="leftcx"/>
    </div>

    <div class="fbbox">
    <img src="images/User.png" class="fbimg" />
    <div class="fix"><label for="check-3" class="left"> Mathew </label></div>
    <input type="checkbox" name="fb" id="check-3" value="epic" class="leftcx"/>
    </div> 
```

![图片](../Images/ac71ec183a96bd7ef6d7d8fbcadf7e38.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T14:33:33.690

```
$("#search-criteria").on("keyup", function() {
    var g = $(this).val();
    $(".fbbox .fix label").each( function() {
        var s = $(this).text();
        if (s.indexOf(g)!=-1) {
            $(this).parent().parent().show();
        }
        else {
            $(this).parent().parent().hide();
        }
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/ztaz6/1/)

或更好的方式：

```
$("#search-criteria").on("keyup", function() {
    var g = $(this).val().toLowerCase();
    $(".fbbox .fix label").each(function() {
        var s = $(this).text().toLowerCase();
        $(this).closest('.fbbox')[ s.indexOf(g) !== -1 ? 'show' : 'hide' ]();
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/Mottie/ztaz6/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:27:02.987

使用**jQuery**

```
​  $(document).ready(function(){

   var search = $("#search-criteria");
   var items  = $(".fbbox");

   $("#search").on("click", function(e){

        var v = search.val().toLowerCase();
       if(v == "") { 
           items.show();
           return;
       }
        $.each(items, function(){
            var it = $(this);
            var lb = it.find("label").text().toLowerCase();
            if(lb.indexOf(v) == -1) 
                 it.hide();
        });
    });        
});​ 
```

演示：http: [//jsfiddle.net/C3PEc/2/](http://jsfiddle.net/C3PEc/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:22:34.007

也许使用 indexOf 方法：

```
var text ="some name";
var search = "some";

if (text.indexOf(search)!=-1) {

    // do someting with found item

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:20:39.467

您可以使用正则表达式代替它，`indexOf`因为它在 IE7/IE8 中可能不起作用，并且使用正则表达式您还可以使用“i”修饰符来使搜索不区分大小写。

谢谢

# php - 语法错误，php 中出现意外的“{”

> ID：14031371
> 
> 赞同：-6
> 
> 时间：2012-12-25T14:12:38.150
> 
> 标签：php, syntax

```
if(isset($_POST['submit'])){
    if($users->confirmEmail(mysql_real_escape_string($_POST['email']),mysql_real_escape_string($_POST['activation'])){
        header( 'Location: login.php?msg=3' ) ;
    } else {
        header( 'Location: activate.php?msg=1' ) ;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:15:48.850

您的`if`:中缺少右括号

```
if($users->confirmEmail(mysql_real_escape_string($_POST['email']),mysql_real_escape_string($_POST['activation']))){ 
```

如果我们用 x 替换 mysql-functions，很容易看出：

```
if ( $users->confirmEmail(x,x) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:16:27.600

缺少关闭`)`。`if`

```
 ...mysql_real_escape_string($_POST['activation']))
                                                  ^
                                                 here 
```

您的代码应该是：

```
if(isset($_POST['submit'])){
if($users->confirmEmail(mysql_real_escape_string($_POST['email']),mysql_real_escape_string($_POST['activation']))){
    header( 'Location: login.php?msg=3' ) ;
} else {
    header( 'Location: activate.php?msg=1' ) ;
    }
} 
```

我建议使用一些具有语法高亮的 IDE。如今，错误也非常具有描述性。意料之外`{`的意思是在它之前应该有一些东西。

# python - 使用 Sublime Text 2 在 Python 中突出显示方法参数

> ID：14031377
> 
> 赞同：7
> 
> 时间：2012-12-25T14:13:17.597
> 
> 标签：python, sublimetext2

我习惯用 Netbeans 编辑 Python，因为它是我所知道的唯一一个可以编辑 Python 甚至添加了一点支持的编辑器。

前段时间，我发现 Sublime Text 2 更适合我的需求，所以我迈出了一步。

但是，Netbeans 中有一件事非常方便，那就是突出显示方法的参数。

如果我有一个方法：

```
send_message(self, playerId, text, channel, flags=None) 
```

如何更改 Sublime Text 2 的主题，使, ,`self`和`playerId`也突出显示？`text``channel``flags`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:49:19.600

[您可以在此处](https://github.com/aziz/tmTheme-Editor#tmtheme-editor)找到指向视觉主题编辑器的链接。

# gtk - 为 GTK 窗口创建形状蒙版？

> ID：14031382
> 
> 赞同：2
> 
> 时间：2012-12-25T14:13:47.943
> 
> 标签：gtk, pygtk

如果有人对以下功能有任何经验，我很感兴趣gtk.Window/gtk.Widget[的以下功能](http://www.pygtk.org/docs/pygtk/class-gdkwindow.html#method-gdkwindow--shape-combine-mask)

```
 shape_combine_mask(shape_mask, offset_x, offset_y) 
```

我想让窗口变成圆形而不是矩形。如何获得 shape_mask？它说它必须是位图。我应该使用 gtk.Pixbuf 从图像中获取位图吗？或者我应该使用 cairo 来获得带有“cairo_region_create_from_surface”的形状，然后使用另一个接受 gtk.Region 作为第一个参数的函数？

如果有人可以为此发布一个示例，那就太好了。C/C++ 或者最好是 Python，但这没关系。

我使用 GTK 是版本 2

先感谢您！

# alfresco - 无法从 alfresco 中的共享访问自定义 javascript 根节点

> ID：14031385
> 
> 赞同：2
> 
> 时间：2012-12-25T14:13:58.640
> 
> 标签：alfresco

我在存储库中创建了自定义 javascript 根节点 (storeService) 并希望从共享中访问它？

我在共享 java 脚本控制器中添加的行

```
model.storeName = storeService.getStoreInfo(storeName); 
```

但会引发参考错误 storeService。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T22:53:59.500

您不能在存储库层（Alfresco WAR）中创建自定义根范围的 JavaScript 对象，然后从共享层（共享 WAR）访问它。这是两个完全不同的语境。

解决此问题的一种方法是在存储库层上编写一个 Web 脚本，该脚本利用您的自定义根范围对象。然后，您可以从共享层调用该 Web 脚本。

# c - 在两个条件下查找匹配值

> ID：14031390
> 
> 赞同：0
> 
> 时间：2012-12-25T14:14:43.807
> 
> 标签：c, arrays

从这段代码：

节点[4] = {5,3,2,6};

邻居[4] = {4,3,2,9};

我必须找到：

节点[0] ==匹配来自邻居[0-3]的值和节点[1] ==匹配来自邻居[0-3]的值

节点[1] ==匹配来自邻居[0-3]的值和节点[2] ==匹配来自邻居[0-3]的值

节点[2] ==匹配来自邻居[0-3]的值和节点[3]==匹配来自邻居[0-3]的值

如果其中任何一个满足，则打印元素找到否则不...

我已经尝试过这段代码，它的结果元素找到了..

但是当我保持节点 [4] 相同并且邻居 [4] 是不同的值 {4,9,7,9};

我仍然得到元素找到的结果

```
#include<stdio.h>

int main()
{
    int node[4] = {5,3,2,6};
    int neighbor[4] = {4,3,2,9};
    int i,flag=0,k=0;

    for (k=0;k<3;k++){
        for (i = 0; i < 4; i++) {
            if ((node[k]==neighbor[i]) && (node[k+1]==neighbor[i]));
            flag=1;
            break;
        }
    }
    if (flag==0)
    printf("Element not found\n");
    else
    printf("Element  found\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:20:36.823

你有一个基本错误

```
for (k=0;k<3;k++){
        for (i = 0; i < 4; i++) {
            if ((node[k]==neighbor[i]) && (node[k+1]==neighbor[i]));
            flag==1;
            break;
        } 
```

更正

```
for (k=0;k<3;k++){
        for (i = 0; i < 4; i++) {
            if ((node[k]==neighbor[i]) && (node[k+1]==neighbor[i]));
            flag=1;
            break;
        } 
```

错误 **标志的更正=1；**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:44:49.920

您的问题是声明`;`之后`if`：

```
 if ((node[k]==neighbor[i]) && (node[k+1]==neighbor[i])); 
```

这意味着条件没有被使用并且`flag = 1;`一直在运行。去除`;`

你必须初始化`flag`为0：

```
 int i,flag=0,k=0; 
```

* * *

顺便说一句：我会仔细检查你的算法。`node[0] ==match values from neighbor[0-3] and node[1] ==match values from neighbor[0-3]`我将其读作“如果节点 0 匹配邻居中的任何内容，并且节点 1 匹配邻居中的任何内容”

但是您将其编码为“如果节点 X 和节点 X+1 在邻居中匹配相同的一个值”

* * *

你想要的算法很容易构造，如果`node[X] == anything in neighbor[]`然后检查是否`node[x+1] == anything in neighbor[]`

因此，要编写知道每个数组是数组中的 4 个元素的代码，您可以执行以下操作，**注意这是未经测试的，但这是一个球场的想法**：

```
int main()
{
    int i;
    for(i = 0; i<3; i++)  // loop from the [0]th to the [2]nd element
    {
        if(is_in_array(node[i], neighbor))   // if the element in node is anywhere in neighbor
            if(is_in_array(node[i]+1, neighbor)) {  // check the next element
                flag = 1;  // if both are in there set the flag
                break;     // and leave the loops early
            }
    } 

    // insert your "if flag print" logic here.

    return 0;
}

int is_in_array(int needle, int haystack[])
{
    int found_it = 0;
    int counter;
    for(counter = 0; counter < sizeof(haystack)/sizeof(int); counter++)
        if(haystack[counter] == needle)
            found_it = 1;
    return found_it;
} 
```

# ruby - 如何使用axlsx下载索引页面的搜索结果？

> ID：14031393
> 
> 赞同：1
> 
> 时间：2012-12-25T14:15:08.383
> 
> 标签：ruby, excel, ruby-on-rails-3.2, axlsx

首先，如果这个问题太琐碎，我真的很抱歉。我是rails新手，不知道我做错了什么。

我有一个名为 Costing 的模型，在它的索引页面中我有一个搜索表单。我正在尝试使用“axlsx”gem**仅下载搜索结果**，但我总是得到所有行。我也在使用'will_paginate' gem。

这是我的代码。

```
 //costings_controller.rb

def index
@costings = Costing.search(params[:search] , params[:page])

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @costings }
  format.xlsx {
        send_data @costings.to_xlsx.to_stream.read, :filename => 'costings.xlsx', :type => "application/vnd.openxmlformates-officedocument.spreadsheetml.sheet"
    }
end
end

// index.html.erb
<%= link_to 'Download Costings', url_for(:format=>"xlsx") %> 
```

请在这里帮助我。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:52:55.003

[这](https://github.com/SriramK89/axlsx_demo)是我为 axlsx gem 演示制作的代码。浏览它并在控制器中实现您的要求。[这](http://axlsx-demo.herokuapp.com/)是此演示的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T02:53:09.750

```
//costings_controller.rb

def download
@costings = Costing.search(params[:search] , params[:page])

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @costings }
  format.xlsx {
        send_data @costings.to_xlsx.to_stream.read, :filename => 'costings.xlsx', :type => "application/vnd.openxmlformates-officedocument.spreadsheetml.sheet"
    }
end
end

// index.html.erb
<%= form_for :costing, url: download_costing_index_path do %>
...
<% end %>

//routes
resources :costing do
    collection do
      post :download, :defaults => { :format => 'xlsx' }
    end
end 
```

# php - Securimage CAPTCHA 不保护

> ID：14031394
> 
> 赞同：-4
> 
> 时间：2012-12-25T14:15:45.760
> 
> 标签：php, captcha

我已经在我的表单上安装了[Securimage CAPTCHA](http://www.phpcaptcha.org)。但是安装后，我发现它并没有保护我免受垃圾邮件的侵害：所有垃圾邮件都通过了。我手动尝试过，它按预期工作。

我猜机器人正在识别验证码图像。我怎样才能使它更可靠？在此之前，我使用 hn_captcha 并且它正在保护，但我不喜欢它的工作方式（将图像存储在缓存中）。但我猜php验证码更受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:29:42.893

为什么不记录验证码图像的答案，并复制图像几个小时？然后，您可以查看您视为垃圾邮件的邮件是否有正确的验证码答案。

我还会记录每个用户代理字符串，看看这是否看起来像一个合适的浏览器，或者显然是一个机器人。请记住，它可以被伪造，但它应该很有趣。值得牢记的是，有时垃圾邮件的经济性是值得付钱给发展中国家的人类团队将垃圾邮件粘贴到博客/论坛中的，而这些更难被打败。也许像 Akismet 这样的东西会有所帮助？

# iphone - 如何构建 iOS 应用程序供少数测试人员下载

> ID：14031395
> 
> 赞同：1
> 
> 时间：2012-12-25T14:15:46.290
> 
> 标签：iphone, ios, xcode

我正在将我的应用程序提交给一个大型应用程序博览会，但是为了让他们的评委来判断它（因为它不能放在应用程序商店中），我需要将它分发到一个具有临时构建的网站上。但是，我是不是需要手动添加每部手机的UUD来判断应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T14:23:03.533

查看**[TestFlight](https://testflightapp.com)** - 这是一项免费的应用程序测试服务，可让您毫无困难地向测试人员展示和/或分发您的应用程序。

# c# - 访问对象列表中的数据会导致属性未定义

> ID：14031397
> 
> 赞同：0
> 
> 时间：2012-12-25T14:15:59.100
> 
> 标签：c#

嗨，我创建了一个对象列表，当我尝试访问属性时，我收到一条错误消息，指出该对象不包含该属性的定义。这是我的代码：

这是我创建对象列表的地方：

```
public List<object> returnProductData(SetProduct product)
    {
        List<object> productData = new List<object>();

        var type = product.GetType();
        var properties = type.GetProperties();

        foreach (var propertyInfo in properties)
        {
            if( propertyInfo.GetValue(product , null) != null && propertyInfo.Name != "ProductName" &&
                propertyInfo.Name != "Brand" && propertyInfo.Name != "ProductPrice" && propertyInfo.Name != "ProductImagePath" )
            {
                productData.Add(new { propertyName = propertyInfo.Name , propertyValue = propertyInfo.GetValue(product , null).ToString()}) ;
            }
        }

        return productData;
    } 
```

这是我尝试访问它的地方：

```
@foreach( var productData in ion)
            {
                <li>@productData.propertyName</li>
            } 
```

当我尝试访问它时，它说该对象不包含 propertyName 的定义。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:18:09.727

您不应该返回`List<object>`您应该使用更具体的类型，例如`List<ProductData>`.

如果该类不存在，则编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:19:19.523

`object`没有`propertyName`财产。

如果所描述的场景非常必要，并且如果您使用 .net 4.0 或更高版本，则可以`dynamic`这样使用：

```
public List<dynamic> returnProductData(SetProduct product)
    {
        List<dynamic> productData = new List<dynamic>();

        var type = product.GetType();
        var properties = type.GetProperties();

        foreach (var propertyInfo in properties)
        {
            if( propertyInfo.GetValue(product , null) != null && propertyInfo.Name != "ProductName" &&
                propertyInfo.Name != "Brand" && propertyInfo.Name != "ProductPrice" && propertyInfo.Name != "ProductImagePath" )
            {
                productData.Add(new { propertyName = propertyInfo.Name , propertyValue = propertyInfo.GetValue(product , null).ToString()}) ;
            }
        }

        return productData;
    } 
```

用法：

```
@foreach( var productData in ion)
            {
                <li>@productData.propertyName</li>
            } 
```

# java - 取消静音按钮java android的问题

> ID：14031399
> 
> 赞同：2
> 
> 时间：2012-12-25T14:16:12.483
> 
> 标签：java, android

我正在创建一个简单的点击计数器android应用程序，单击按钮时会播放声音，并且在离开计数屏幕然后返回时也会保存计数。

我遇到了静音按钮的问题。当我单击它时，它会使整个应用程序静音，而不仅仅是那个特定的 gui 屏幕（活动）。

1.  第一个问题是静音按钮使整个应用程序静音，我只需要为该活动静音。

2.  第二个问题是，当您单击静音按钮并离开屏幕，然后返回，然后尝试取消静音 - 它不会取消静音。

正在考虑解决这个问题的方法是我们将静音按钮从 SharedPreferences 保存实例状态中取出 - 如果可能的话......

到目前为止，这是我的代码，如果您能指导我如何实现上述目标，那就太好了。谢谢。

```
public class wazeefa extends Activity {

    //Count Button
    TextView txtCount;
    ImageView image;
    Button btnCount;
    Button wmute;
    Button wreset;
    public static int count = 0;
    SharedPreferences app_preferences;
    MediaPlayer mpButtonClick;
    AudioManager audioManager;
    public static boolean mutestatus = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // The activity is being created.
        setContentView(R.layout.wazeefa);

        audioManager =
                (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        //SAVE COUNT
        app_preferences = this.getSharedPreferences("myPrefscount", MODE_WORLD_READABLE);

        count = app_preferences.getInt("count", 0);

        txtCount = (TextView) findViewById(R.id.wcount);
        txtCount.setText("This app has been started " + count + " times.");

        image = (ImageView) findViewById(R.id.imageview);

        txtCount = (TextView) findViewById(R.id.wcount);
        txtCount.setText("This app has been started " + count + " times.");

        //Button SOUND AND COUNT
        mpButtonClick = MediaPlayer.create(this, R.raw.bubble);
        //RESET Button
        wreset = (Button) findViewById(R.id.wreset);

        txtCount = (TextView) findViewById(R.id.wcount);
        txtCount.setText(String.valueOf(count));

        btnCount = (Button) findViewById(R.id.wclick);

        wmute = (Button) findViewById(R.id.wmute);

        btnCount.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                count++;
                if (count > 50) count = 0;
                image.setImageResource(R.drawable.duroodimage);
                if (count > 0) image.setImageResource(R.drawable.duroodimage);
                if (count > 9) image.setImageResource(R.drawable.zikrimage);
                if (count > 39) image.setImageResource(R.drawable.duroodimage);
                txtCount.setText(String.valueOf(count));
                mpButtonClick.start();
            }
        });

        wreset.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                count = 0;
                image.setImageResource(R.drawable.duroodimage);
                ;
                txtCount.setText("0");
                SharedPreferences.Editor editor = app_preferences.edit();
                editor.putInt("count", count);
                editor.commit();
            }
        });

        wmute.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (!mutestatus) {
                    mutestatus = true;
                    audioManager.setMode(AudioManager.MODE_IN_CALL);
                    audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);
                    Log.v("'test....", "" + mutestatus);
                } else {
                    mutestatus = false;
                    audioManager.setMode(AudioManager.MODE_NORMAL);
                    audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, false);
                    Log.v("'test....", "" + mutestatus);
                }
            }
        });
    }

    @Override
    protected void onPause() {
        super.onPause();
        // save count value here

        SharedPreferences.Editor editor = app_preferences.edit();
        editor.putInt("count", count);
        editor.commit();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:24:44.300

您在应用程序级别保存首选项，使其特定于活动，即为活动而不是应用程序实现静音功能。

**编辑**

看到你的目标是一些静音和取消静音（loquent）音频，*首选项可以通过三种方式保存。*

***1) 首选项只能由单个活动检索。*** **2）偏好可以在应用程序内的所有活动之间共享和检索。3）可以通过设备上的所有应用程序共享和检索首选项。**

在您的情况下，保存活动级别的首选项：

```
SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor editor=prefs.edit();
        editor.putString("pref 1", "some text");

        editor.commit(); 
```

我们通过调用 getPreferences(int mode) 方法获得一个 SharedPreferences 对象，该方法接受一个整数值作为参数，模式值可以是以下之一：

Context.MODE_PRIVATE (0)：一种文件创建模式，使创建的文件只能由具有相同用户 ID 的应用程序访问（从相同的应用程序上下文访问文件，稍后将描述）。Context.MODE_WORLD_READABLE (1)：文件模式使文件可以从其他应用程序中读取。Context.MODE_WORLD_WRITEABLE (2)：文件模式允许其他应用程序写入文件。然后我们得到一个 SharedPreferences.Editor 的实例，并使用 editor.putString(String key, String value) 方法写入偏好值。共享首选项允许您使用以下方法插入首选项：

```
editor.putBoolean(String key, boolean value).
editor.putFloat(String key,float value).
editor.putInt(String key, int value).
editor.putLong(String key, long value)
editor.putString(String key, String value) 
```

然后我们调用 edit.commit() 将首选项保存到文件中。commit 返回一个表示保存结果的布尔值，如果成功则返回 true，如果失败则返回 false。

读取偏好值：读取偏好值：

```
SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);
String val=prefs.getString("pref 1", "some text");
We use sharedpreferences.getString(String key, String defaultValue) (or get boolean/float/int) to return the value stored with a specific key or defaultValue if not found. 
```

[来源](http://mobileorchard.com/android-app-developmentusing-preferences/)

# jquery - 如果分组列表视图具有带有+ 开关的模板，则 kendoui 移动列表视图变得不可点击

> ID：14031400
> 
> 赞同：1
> 
> 时间：2012-12-25T14:16:25.743
> 
> 标签：jquery, jquery-ui, listview, switch-statement, kendo-ui

 **大家好，**

我刚接触剑道 ui，你可能会认为我的问题很愚蠢，但我仍然需要得到答案。 

所有代码都可以在这里找到：http: [//jsfiddle.net/Oleksii/vvCHX/27/](http://jsfiddle.net/Oleksii/vvCHX/27/)

在我的场景中，我有两个视图的移动应用程序：

*   defaultView(id="") 包含 2 个列表视图：一个是静态定义的；第二个在视图初始化事件处理程序中初始化）；此非静态列表视图具有名为“fileGroupsItemTemplate”的模板。
*   第二个视图没有内容（id="aboutView"）。

非静态视图的项目必须：

1.  可点击（我的意思是链接项目）以获得导航到其他视图的能力；
2.  每行右侧都有开关
3.  只有在选中 switch 时才必须更改视图 我遇到了问题：如果我单击 switch，它会更改其值，但当前视图也会更改。

这是因为 switch 在标签内（见模板）。但如果我把它放在标签之外，

1.  项目显示为链接；
2.  项目变得不可点击；
3.  如果我单击链接，则会收到错误消息：

    > {"error": "请使用 POST 请求"}

有谁知道点击标签内的开关后如何防止更改视图？我正在考虑事件处理程序中的一些技巧，但首先引发了列表视图的项目单击事件，然后是切换更改。

**这是模板：**

```
<script id="fileGroupsItemTemplate" type="text/x-kendo-template">
<table>
    <tr><td>
        <img src="#= data.Image#" />
    </td><td style="vertical-align: middle">
        #= data.Name #
    </td>
    </tr>
</table>
#if(data.Docs.length > 0){#
<ul>
    #for(var i=0; i < data.Docs.length; i++){#
    <li>
        <a >#=data.Docs[i].Name#
        <input data-on-label="Cl" data-off-label="Sk" data-role="switch" #=data.Docs[i].NeedProcess ? "checked='checked'" : ""# /></a>

    </li>
    #}#
</ul>
#}# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:11:41.767

Please note that via your [forum thread here](http://www.kendoui.com/forums/mobile/listview/mobile-listview-become-unclickable-if-grouped-listview-has-template-with-a-href-switch.aspx) (I assume this is you), this is not yet a supported scenario, BUT...

You can pull it off with some creativity keeping in mind that you are really circumventing the way the ListView is supposed to work and therefore you may or may not get some fringe anomalies that you have to deal with.

Here is the completed solution...

[http://jsfiddle.net/vvCHX/30/](http://jsfiddle.net/vvCHX/30/)

A few things of note:

1.  I updated your script references to the latest version of Kendo UI (2012.3.1114)
2.  Instead of using a ListView and populating it with other ListViews, I changed it so your DataSource appends the template to the DOM when the DataSource is read via the **change** event.
3.  As was stated in the forum thread, you cannot nest an input inside of an anchor because that is by definition malformed HTML. What you can do instead is use a span tag and give it the same classes that the anchor gets. You listen to the click event and check the e.target of the event. If it's the list item, then you can navigate to the next view. If it isn't, then you do nothing and just let the switch do its thang.

So now the **initFileGroupsList** function looks just so:

```
function initFileGroupsList(e) {
  // compile the template    
  var template = kendo.template($("#fileGroupsItemTemplate").html());

  // create a new datasource
  var fileGropsRemoteDS = new kendo.data.DataSource({
    data: [{"__type":"JsonFileTypeGroup:#" .... }],
    change: function() {

      // the 'change' function is called when the datasource reads

      // replace the 'dynamic' plaholder div with the output of the template
      $("#dynamic").replaceWith(kendo.render(template, this.view()));

      // create the listview widgets
      $(".listview").kendoMobileListView({
        style: "inset",
        click: function(e) {
          // when the listview is clicked, get the item that was actually 
          // clicked in the DOM and wrap it in jqueries
          var item = $(e.target);

          // if the item has the 'clickable' class..
          if (item.hasClass("clickable")) {
            // set its style to highlight the item blue
            item.addClass("km-state-active");

            // navigate to the next view
             app.navigate("#aboutView");        
          }
        }
      });
    $(".switch").kendoMobileSwitch();
  }
}); 
```

# scala - 提升文件上传器编译器错误

> ID：14031403
> 
> 赞同：1
> 
> 时间：2012-12-25T14:16:31.050
> 
> 标签：scala, lift

我想用 Lift 实现一个图像升级。[从这个](http://exploring.liftweb.net/master/index-6.html#entry-Forms-File-uploads-0)开始。我是电梯的新手。

我做了一些修改。现在我只想看到一些有效的东西。不一定是图像。到目前为止，我有：

```
package code 
package snippet 
import net.liftweb.http.S
import net.liftweb.common.Full
import net.liftweb.common.Empty
import net.liftweb.common.Box
import net.liftweb.http.FileParamHolder
import net.liftweb.util._
import Helpers._
import scala.xml.Group
import scala.xml.NodeSeq
import net.liftweb.http.SHtml

class AddEntry {

  // Add a variable to hold the FileParamHolder on submission
  var fileHolder : Box[FileParamHolder] = Empty

  def doTagsAndSubmit (t : String) {

//    val e : Expense = ...
    // Add the optional receipt if it’s the correct type
    val receiptOk = fileHolder match {
      // An empty upload gets reported with a null mime type,
      // so we need to handle this special case
      case Full(FileParamHolder(_, null, _, _)) => true

      case Full(FileParamHolder(_, mime, _, data))
        if mime.startsWith("image/") => {
//          e.receipt(data).receiptMime(mime)
          true
        }

      case Full(_) => {
        S.error("Invalid receipt attachment")
        false
      }

      case _ => true
    }

//    (e.validate, receiptOk) match {
//    }
}

  def addEntry(content: NodeSeq): NodeSeq = {

      bind("prefix", content,
              "receipt" -> SHtml.fileUpload(fileHolder = _)) //compiler error: type mismatch; found : net.liftweb.http.FileParamHolder required: net.liftweb.common.Box[net.liftweb.http.FileParamHolder]
  }
} 
```

的HTML：

```
<lift:AddEntry.addEntry form="POST" multipart="true">
    <td>Receipt (JPEG or PNG)</td>
<td><prefix:receipt /></td>
</lift:AddEntry.addEntry> 
```

正如在代码中评论的那样，我遇到`"receipt" -> SHtml.fileUpload(fileHolder = _)`了编译器错误：错误：类型不匹配；找到：net.liftweb.http.FileParamHolder 需要：net.liftweb.common.Box[net.liftweb.http.FileParamHolder]

不明白，因为 fileHolder 是`Box[FileParamHolder]`. 它应该与表达式有关`fileHolder = _`，但不知道如何。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:29:16.037

从 API 看来，它`SHtml.fileUpload`提供了 a`FileParamHolder`但你的变量`fileHolder`是 type `Box[FileParamHolder]`，所以设置这两个不能开箱即用。

如果你试试这个：

```
SHtml.fileUpload(f => fileHolder = Box !! f)) 
```

它将为您提供一个`Box[FileParamHolder]`并且应该允许您编译您的代码。

# sharepoint-2010 - SharePoint 更新面板内的 FileUpload 控件

> ID：14031404
> 
> 赞同：0
> 
> 时间：2012-12-25T14:16:40.397
> 
> 标签：sharepoint-2010

我正在开发一个在 SharePoint 2010 中的应用程序。我在更新面板中使用了文件上传控件，还有两个用于名称和地址的文本框。当我单击按钮时，我没有从文件上传控件中获取文件名。以下是我的代码，请告诉我哪里出了问题，或者单击按钮后没有获得文件控制值的原因是什么。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<div>
<table width="50%" cellpadding="2" cellspacing="0">
 <tr>
<td>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="conditional">
   <ContentTemplate>
     <asp:FileUpload ID="FileUpload1" runat="server" />
    <asp:Button ID="Upload" runat="server" Text="Upload" OnClick="Upload_Click" /><br />
    <asp:Image ID="NormalImage" runat="server" />
 </ContentTemplate>
  <Triggers>
     <asp:PostBackTrigger ControlID="Upload" />
  </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T08:42:05.257

消除`<asp:ScriptManager ID="ScriptManager1" runat="server" />`

`ScriptManager`以编程方式添加到页面：

```
protected override void OnInit(EventArgs e)
{
    Page.Init += delegate(object sender, EventArgs e_Init)
                 {`enter code here`
                     if (ScriptManager.GetCurrent(Page) == null)
                     {
                         ScriptManager sMgr = new ScriptManager();
                         Page.Form.Controls.AddAt(0, sMgr);
                     }
                 };
    base.OnInit(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:17:42.243

您可以删除**触发器**部分并尝试吗？

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<div>
<table width="50%" cellpadding="2" cellspacing="0">
 <tr>
<td>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="conditional">
   <ContentTemplate>
     <asp:FileUpload ID="FileUpload1" runat="server" />
    <asp:Button ID="Upload" runat="server" Text="Upload" OnClick="Upload_Click" /><br />
    <asp:Image ID="NormalImage" runat="server" />
 </ContentTemplate>
</asp:UpdatePanel> 
```

# prolog - 如何在 Prolog 中截断文件长度？

> ID：14031406
> 
> 赞同：4
> 
> 时间：2012-12-25T14:17:07.323
> 
> 标签：prolog, swi-prolog, gnu-prolog, iso-prolog

如何在 Prolog 中截断文件长度？

我只`set_stream_position/2`在 ISO 标准中找到一个谓词。`set_stream_length/2`但我在主要的 Prolog 系统中找不到谓词。

同样有一个流属性`position/1`，但我看不到`length/1`流属性。后者将有助于使用`set_stream_length/2`.

解决方法是什么？

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:18:22.963

我想我明白了！

看到[这个](http://www.swi-prolog.org/pldoc/doc_for?object=set_end_of_stream/1)页面...

*在@false 评论后*编辑，这里是封装代码的草图：**

 *```
set_file_size(Path, Size) :-
    setup_call_cleanup(
        open(Path, update, S),
        (   stream_property(S, reposition(true)),
            % stream_property(S, position(Q)),
            % set_stream_position(S, Q),
            seek(S, Size, bof, Size),
            set_end_of_stream(S)
        ),
        close(S)). 
```

这有效，但依赖于[seek](http://www.swi-prolog.org/pldoc/doc_for?object=seek/4) /4 内置。我无法完全确定此类呼叫 WRT ISO 合规性的状态。它列在 ISO IO 下，但未标记为符合...

这 2 条注释行有助于我检查*不透明*的术语 position/1。有一个[stream_position_data](http://www.swi-prolog.org/pldoc/doc_for?object=stream_position_data/3)来查询这些值。*

# apache-flex - Flex：HelloWorld 应用程序上的空窗口

> ID：14031407
> 
> 赞同：0
> 
> 时间：2012-12-25T14:17:12.193
> 
> 标签：apache-flex, flash-builder

我对 flex 完全陌生，并试图创建`helloWorld`应用程序失败。脚步：

1）在flash builder中创建flex项目；
2）添加`<s:Label text="Hello World" x="100" y="100" />`到`HelloWorld.mxml`默认包中的文件；
3) 使用 Flash Builder 运行项目；
4) 在浏览器窗口中看到一个空的 Flash 页面；

我错过了什么？

`HelloWorld.mxml`：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Label text="Hello World" x="100" y="100" />
</s:Application> 
```

PS
- Flash Builder 4.6；
- SDK 4.5.1；
- 其他 Flash 页面在浏览器 (Chrome) 中可以正常工作；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:53:13.220

好的，从评论转发。

1.  您是否尝试在不同的浏览器中打开此 swf？

2.  当您的 swf 没有在任何地方打开时，请确保清除浏览器缓存，并且您可以尝试手动删除文件。

3.  有时很容易忘记保存编辑过的文件，这不是你的情况，是吗？

4.  查看您的 swf 是否已更新的可靠方法是使用 Alert.show('version') 或使用图形在您的应用程序中绘制大红线。

# iphone - NSMutableArray 为零。为什么？

> ID：14031408
> 
> 赞同：0
> 
> 时间：2012-12-25T14:17:12.380
> 
> 标签：iphone, objective-c, nsarray

在我将对象添加到我之后`NSMutableArray`它变成`nil`（我签入`NSLog`）

* * *

**代码**

```
guests = [[NSMutableArray alloc]init];
guests = [localDictionary objectForKey:@"guestsArray"];

[guests addObject:@"1"];
[guests addObject:@"12"];
[guests addObject:@"31"];

if(guests == nil)
{
    NSLog(@"WHY?");
} 
```

你有什么想法为什么会发生？我应该检查什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T14:19:34.890

这是因为`[localDictionary objectForKey:@"guestsArray"]`是零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T14:19:52.847

您在第一行创建一个 NSMutableArray，然后使用从字典中获取的对象重新分配变量。

如果您想使用 guestArray 键从 localDictionary 中的对象添加对象，请改用：

```
guests = [[NSMutableArray alloc] initWithArray:[localDictionary objectForKey:@"guestsArray"]]; 
```

这样，即使您的“guestsArray 对象”在 localDictionary 中不存在，您的 guest 数组也不会为零。

# objective-c - 将视频和图像添加到 iPhone 模拟器

> ID：14031411
> 
> 赞同：0
> 
> 时间：2012-12-25T14:17:30.647
> 
> 标签：objective-c, xcode, ios-simulator

我想知道我应该在哪里放置图像和视频，以便它们可以在`UIImagePicker`.

我打开文件夹**/IPhone Simulator/5.1/Media/**粘贴了图像。

但是它们对于 是不可见的`UIImagePickerController`。但是当我使用 iPhone 模拟器从网站下载图像时，此图像对 Picker 可见（我没有尝试用于视频，因为我不知道如何从模拟器下载视频）。

所以我想知道我应该在哪里以及如何将图像和视频放在**/IPhone Simulator/5.1/Media 文件夹**中。

亲切的问候

# c++ - 在 Qt 5.0 中向 QML 公开 QAbstractListModel 元素属性

> ID：14031412
> 
> 赞同：3
> 
> 时间：2012-12-25T14:17:33.220
> 
> 标签：c++, qml, qt5

我一直在松散地关注[Christophe Dumez 博客](http://cdumez.blogspot.de/2010/11/how-to-use-c-list-model-in-qml.html)上的文章，以获取自定义 QAbstractListModel 类，以将数据公开给 QML (QtQuick2) 接口 (QtQuick2ApplicationViewer)。但是，由于我使用的是 Qt 5.0.0（和 MSVC2012），因此他的文章中的某些部分不适用。例如，ListModel 构造函数不再需要调用`setRoleNames()`，因为`setRoleNames()`在 Qt 5 中已被贬低。

```
ListModel::ListModel(ListItem* prototype, QObject *parent) :
    QAbstractListModel(parent), m_prototype(prototype)
{
  setRoleNames(m_prototype->roleNames());
} 
```

我的理解是，继承自 QAbstractListModel 的类只能定义`roleNames()`，因为它在 Qt 5 中已更改为纯虚函数。所以在他的示例中，我只是在构造函数中注释掉`setRoleNames(m_prototype->roleNames());`，一切都应该工作。正确的？

但是，当通过 QML 访问时，所有已定义的角色都是未定义的。我可以用这个检查 C++ 中的名称：

```
QHash<int, QByteArray> mynames = model->find("Elephant")->roleNames();
qDebug() << "Model: " << mynames; 
```

在这种情况下，Elephant 对象的角色名称按预期打印。

我的假设是否正确，或者我是否需要做其他事情才能让 QAbstractListModel 对象与 QML2 共享列表元素属性？这似乎是一个愚蠢的问题，但是 Qt5 文档现在很糟糕，我想不通。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T14:25:58.463

您需要重新实现`QAbstractListModel::roleNames() const`方法，并且您的角色会自动在 QML 中注册。

在 examples/quick/modelviews/abstractitemmodel 中有一个将基于 QAbstractListModel 的模型暴露给 QML 的工作示例。

您还可以考虑使用[QQmlListProperty](http://qt-project.org/doc/qt-5.0/qtqml/qqmllistproperty.html)。

# javascript - 如何在调用 Ajax 等异步调用时让代码等待

> ID：14031421
> 
> 赞同：103
> 
> 时间：2012-12-25T14:19:00.770
> 
> 标签：javascript, jquery

我正在寻找这样的东西

```
function someFunc() {

callAjaxfunc(); //may have multiple ajax calls in this function
someWait(); // some code which waits until async calls complete
console.log('Pass2');

}

function callAjaxfunc() {
  //All ajax calls called here
  console.log('Pass1');

} 
```

**我试过什么？**

**1** Jquery.when()

尝试使用它..它工作正常。但不是我想要的方式。`$.when`将等待，但旁边的代码无需`$.when()`等待即可运行。里面的代码`do callback`只在ajax调用后运行

**2.** 带有全局标志的 setTimeOut()

我非常有信心这会奏效。我试过如下。

```
GlobalFlag = false;

function someFunc()     
    callAjaxfunc(); //may have multiple ajax calls in this function
    setTimeOut(waitFunc, 100); // some  which waits until async calls complete
    console.log('Pass2');
}

function callAjaxfunc() {
    //All ajax calls called here
    onAjaxSuccess: function() {
        GlobalFlag = true;
    };
    console.log('Pass1');    
}

function waitFunc() {
    if (!GlobalFlag) {
        setTimeOut(waitFunc, 100);
    }
}​ 
```

仍然无法得到想要的结果。我在这里做错了吗？这不是办法吗？

我想要的结果应该是这样的

```
Pass1
Pass2 
```

由于需要 AJAX 调用，因此无法进行任何操作

**编辑**：正如许多人建议回调..我知道他们..但仍然`somewait()`会执行旁边的代码...我希望浏览器完全停止执行旁边的代码，`somewait()`直到 ajax 调用..这也可能是一个不好的做法但如果可能的话，值得了解和尝试......

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-25T14:31:25.873

使用回调。像这样的东西应该根据您的示例代码起作用。

```
function someFunc() {

callAjaxfunc(function() {
    console.log('Pass2');
});

}

function callAjaxfunc(callback) {
    //All ajax calls called here
    onAjaxSuccess: function() {
        callback();
    };
    console.log('Pass1');    
} 
```

这将`Pass1`立即打印（假设 ajax 请求至少需要几微秒），然后`Pass2`在`onAjaxSuccess`执行时打印。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-25T14:37:33.037

为什么它不适合你使用[`Deferred Objects`](http://api.jquery.com/category/deferred-object/)？除非我误解了某些东西，否则这可能对您有用。

```
/* AJAX success handler */
var echo = function() {
    console.log('Pass1');
};

var pass = function() {
  $.when(
    /* AJAX requests */
    $.post("/echo/json/", { delay: 1 }, echo),
    $.post("/echo/json/", { delay: 2 }, echo),
    $.post("/echo/json/", { delay: 3 }, echo)
  ).then(function() {
    /* Run after all AJAX */
    console.log('Pass2');
  });
};​ 
```

[**在这里看到它**](http://jsfiddle.net/CCTcL/)。

* * *

## 更新

根据您的输入，您最快的选择似乎是使用同步请求。您可以在请求中将属性设置[`async`](http://api.jquery.com/jQuery.ajax/)为阻止它们。这将挂起您的浏览器，直到请求完成。`false``$.ajax`

**请注意，我不推荐这样做，我仍然认为您应该在基于事件的工作流程中修复您的代码，以不依赖它。**

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-25T14:24:07.370

真正的程序员使用信号量来做到这一点。

将变量设置为`0`. 在每次 AJAX 调用之前增加它。在每个成功处理程序中减少它，并测试`0`. 如果是，你就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:38:09.700

如果您需要等到 ajax 调用完成，您只需要同步进行调用。

# c# - WCF 与客户端相同的身份？

> ID：14031424
> 
> 赞同：0
> 
> 时间：2012-12-25T14:19:14.357
> 
> 标签：c#, wcf, identity

对于一个试验项目，我正在为一项服务而苦苦挣扎。客户端是 ASP.NET MVC 4，服务将使用 WCF 构建。目前所有系统都在一个受信任的子系统中，因此不一定需要 SSL/证书。

我目前正在处理的问题是：当我创建一个新的 GenericIdentity 时是否可能：

```
IIdentity newIdentity = new GenericIdentity("Test", "Custom authentication");
string[] newRoles = { "TestRole" };
IPrincipal testPrincipal = new GenericPrincipal(newIdentity, newRoles);
Thread.CurrentPrincipal = testPrincipal; 
```

当我在 WCF 服务上调用以下代码时，可以创建用户：

```
ServiceSecurityContext.Current.WindowsIdentity; 
```

或者

```
ServiceSecurityContext.Current.PrimaryIdentity; 
```

或者

```
Thread.CurrentPrinicpal; 
```

我得到了我在客户端创建的用户？还是我必须为此编写 WCF 可扩展性？

我目前正在使用 WsHttpBinding 和安全模式 Transport 和 clientCredentialType: Windows。也许配置有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:31:42.727

在服务器端 (WCF)，安全上下文将具有您用于对服务进行身份验证的用户名值。

这意味着，如果您已在客户端 Windows 身份验证中定义，WCF 将找到填充了您使用的 Windows 身份的用户名的安全上下文。

为了让您使用 windows 帐户对服务进行身份验证，您可以在客户端使用以下代码：

```
channelFactory.Credentials.Windows.ClientCredential =
                        new NetworkCredential(username, password, domain); 
```

使用此代码后，您可以使用以下代码访问服务器端的身份：

```
OperationContext.Current.ServiceSecurityContext.PrimaryIdentity 
```

一般来说，尽量明确客户端身份验证信息。目前，您似乎只是通过在当前线程上设置身份来简单地使用 Windows 身份验证模式的默认行为。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:28:56.090

我发现要在 WCF 中自动实现这一点，您必须指定一个证书......

在发送到 WCF 服务的消息中，我创建了一些属性，其中包含创建 GenericPrinicpal 所需的数据合同中的信息（在此用户名和角色）。因为我有一个受信任的子系统，所以我不想在每个 WCF 服务上对用户进行身份验证（对我的场景来说开销很大）。[另请参阅可信子系统](http://msdn.microsoft.com/en-us/library/ms730288.aspx)

有了这个，我创建了一个实现参数检查器的 WCF 扩展，并通过反射在合同的指定属性中设置了 CurrentPrincipal 的凭据。[有关参数检查器以及如何应用它的更多信息](http://msdn.microsoft.com/en-us/library/ff647875.aspx)

# applescript - 使用 applescript 在重复循环中更改文件名时出现“堆栈溢出”错误

> ID：14031429
> 
> 赞同：0
> 
> 时间：2012-12-25T14:20:00.020
> 
> 标签：applescript, stack-overflow

据我所知，用于更改文件名的标准 applescript 代码是：

```
set name of my_file to "New_Name" 
```

但是当我在重复循环（由文件夹操作调用）中使用它时，我得到一个“堆栈溢出”错误。这是完整的代码：

```
on adding folder items to this_folder after receiving these_items
    try
        repeat with this_item in these_items
            set name of this_item to "New_Name"
        end repeat

    on error error_message number error_number
        display dialog error_message buttons {"Cancel"} default button 1
    end try
end adding folder items to 
```

有没有人遇到过这个问题？会不会跟山狮有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:38:04.650

尝试：

```
tell application "System Events" to set name of this_item to "New_Name" 
```

# javascript - 显示新浪微博public_timeline

> ID：14031433
> 
> 赞同：1
> 
> 时间：2012-12-25T14:20:23.970
> 
> 标签：javascript, api, twitter, weibo

我想使用 statuses/public_timeline api 以我自己的 css 样式在我的个人博客上显示我最新的 sina 微博。预期结果应该类似于[http://themes.pixelwars.org/responsy/](http://themes.pixelwars.org/responsy/)页脚中的 twitter 小部件。我不知道如何通过 javascript 处理 json 响应。做这个微博小部件的任何教程、示例或插件？

由于我在 GitHub 页面上托管我的博客，因此解决方案应该是静态的，即 javascript。

PS：我查看了新浪微博的[插件](http://app.weibo.com/tool?topnav=1&wvr=5)。CSS 样式不能应用于跨域。因此，它不能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-13T08:59:16.270

试试微博 API 文档（英文）：[微博 API](http://open.weibo.com/wiki/API%E6%96%87%E6%A1%A3_V2/en)。警告，上次更新是在 2012 年，但中文更新是从 2017 年开始的。您必须从微博获取 API 密钥，这并不容易，因为所有内容都是中文的。

*作为解决方法，您可以嵌入来自外部提供商的微博小部件，例如[Dialogfeed 微博小部件](https://www.dialogfeed.com/embed-weibo-feed-on-page-get-weibo-api-data-or-widget/)*

# asp.net - 如何使 DropDownList 中的列表项成为颜色而不是 mvc 3 中的文本

> ID：14031435
> 
> 赞同：0
> 
> 时间：2012-12-25T14:20:59.537
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, drop-down-menu

假设我有一个 ViewModel，其中有一个包含颜色名称的字符串字段。因此，在我的 DropDownList 中，我希望列表项是颜色而不是纯文本））可以以某种方式完成吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:39:35.240

不幸的是，标准`Html.DropDownListFor`助手不允许您在`<option>`它生成的元素上定义 html 属性。例如，您的目标 HTML 可能是：

```
<select name="color">
    <option style="background-color:Red;"></option>
    <option style="background-color:Blue;"></option>
    ...
</select> 
```

为了实现这个标记，您可以编写一个自定义的 DropDownList 助手，如 中所示[`this answer`](https://stackoverflow.com/a/7537628/29407)。

为了实现更时尚的 UI，您可以使用一些现有的 jQuery DropDown 插件，例如[`this one`](http://www.marghoobsuleman.com/jquery-image-dropdown).

# android - 如何使用 GCM 注销设备

> ID：14031436
> 
> 赞同：0
> 
> 时间：2012-12-25T14:21:09.067
> 
> 标签：android, google-cloud-messaging

我尝试使用此代码通过 gcm 取消注册设备：

```
 btn = (Button)findViewById(R.id.button1);

 btn.setOnClickListener(new View.OnClickListener() {            
    @Override
    public void onClick(View v) {
         GCMRegistrar.unregister(MainActivity.this);
    }
}); 
```

知道我在`onCreate()`方法中使用了此代码...但是当我尝试向`DeviceID`通知到达时发送通知时，这意味着取消注册过程没有成功

我的`onCreate()`

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    txt = (TextView)findViewById(R.id.txt_nn);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals(""))
    {
      GCMRegistrar.register(this, "344XXXXXXX571");
    }
    else
    {
      Log.v("Info : ", "Already registered");
    }

     txt.setText(regId);    

     btn = (Button)findViewById(R.id.button1);

     btn.setOnClickListener(new View.OnClickListener() {            
        @Override
        public void onClick(View v) {
             GCMRegistrar.unregister(MainActivity.this);
        }
    });  
} 
```

我的日志猫

```
12-25 17:16:31.290: E/Trace(18754): error opening trace file: No such file or directory (2)
12-25 17:16:31.425: V/Info :(18754): Already registered
12-25 17:16:31.485: D/libEGL(18754): loaded /system/lib/egl/libEGL_mali.so
12-25 17:16:31.490: D/libEGL(18754): loaded /system/lib/egl/libGLESv1_CM_mali.so
12-25 17:16:31.495: D/libEGL(18754): loaded /system/lib/egl/libGLESv2_mali.so
12-25 17:16:31.500: D/(18754): Device driver API match
12-25 17:16:31.500: D/(18754): Device driver API version: 10
12-25 17:16:31.500: D/(18754): User space API version: 10 
12-25 17:16:31.500: D/(18754): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
12-25 17:16:31.540: D/OpenGLRenderer(18754): Enabling debug mode 0
12-25 17:16:43.015: D/GestureDetector(18754): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 2 mFalseSizeCnt:0
12-25 17:16:43.020: D/GCMRegistrar(18754): resetting backoff for com.example.test09_gsm
12-25 17:16:43.020: V/GCMRegistrar(18754): Unregistering app com.example.test09_gsm
12-25 17:16:46.865: V/GCMBroadcastReceiver(18754): onReceive: com.google.android.c2dm.intent.REGISTRATION
12-25 17:16:46.865: V/GCMBroadcastReceiver(18754): GCM IntentService class: com.example.test09_gsm.GCMIntentService
12-25 17:16:46.870: V/GCMBaseIntentService(18754): Acquiring wakelock
12-25 17:16:46.895: V/GCMBaseIntentService(18754): Intent service name: GCMIntentService-IntentService-1
12-25 17:16:46.895: E/GCMRegistrar(18754): internal error: retry receiver class not set yet
12-25 17:16:46.895: V/GCMRegistrar(18754): Registering receiver
12-25 17:16:46.895: D/GCMBaseIntentService(18754): handleRegistration: registrationId = null, error = null, unregistered = com.example.test09_gsm
12-25 17:16:46.895: D/GCMRegistrar(18754): resetting backoff for com.example.test09_gsm
12-25 17:16:46.895: V/GCMRegistrar(18754): Saving regId on app version 1
12-25 17:16:46.940: D/onUnregistered(18754): APA91bFrB0pJOQqq7MxSe-so7fbqh70jLpX6bRrcRIdW6py1EuxletPfGr5ZlkytrenbdnJskdWXckjIcHWsvtKXppZ1PsMbhfkzIc9BmX26brIVDTCRSXPey7POA3UqP6EexMD4w_plFQkVy-9pacCqbBfV0k91dQ
12-25 17:16:46.940: V/GCMBaseIntentService(18754): Releasing wakelock 
```

请你帮我在 GCM 上取消注册设备并且不会收到未来的通知

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:32:28.587

检查您是否正在注册接收器来处理您的 GCM 消息。检查`mHandleMessageReceiver`。*我假设您使用的代码与文档中给出的代码相同。*

但是如果你不想处理未注册的消息转到`GCMIntentService`类并查看 onUnregistered 方法。`displayMessage()`在我评论该行时删除。

```
 @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        //displayMessage(context, getString(R.string.gcm_unregistered));
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            ServerUtilities.unregister(context, registrationId);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring unregister callback");
        }
    } 
```

这将完成您的任务。

快乐编码:)

# objective-c - 在不使用强制转换的情况下写一行

> ID：14031440
> 
> 赞同：-1
> 
> 时间：2012-12-25T14:21:31.753
> 
> 标签：objective-c, ios

我试图理解一些基本的东西。第 1 行：

```
[((ClassA *)self.tabBarController) MethodA:YES]; 
```

它做了它应该做的事情，但我试图以另一种方式编写它但没有成功。首先，这里是 classA 铸造吗？（只是想确定）其次，为什么这不起作用：

```
ClassA *test=[[ClassA alloc]init];
[test.tabBarController MethodA:YES]; 
```

我怎样才能写它，这样它就可以在没有强制转换的情况下工作。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:32:33.910

在

```
[((ClassA *)self.tabBarController) MethodA:YES]; 
```

您正在调用 ClassA 的 MethodA

像 (ClassA->MethodA:YES) 而在

```
ClassA *test=[[ClassA alloc]init];
[test.tabBarController MethodA:YES]; 
```

您试图调用 ClassA(test) 中的 tabBarController 的 MethodA 方法。

喜欢（ClassA->tabBarController->MethodA）

和 corse MethodA 是在 ClassA 而不是 tabBarController 所以它不工作

# iphone - 单击iphone中的自定义列表单元格按钮时如何添加动作事件工作

> ID：14031452
> 
> 赞同：0
> 
> 时间：2012-12-25T14:23:11.347
> 
> 标签：iphone, objective-c, ios, xcode

创建一个表视图。然后创建一个自定义表格视图单元格并在单元格上放置一个按钮，现在我尝试在单击索引时获取表格视图索引。但是当我单击单元格上的那个按钮时，它没有给我列表索引。

我的表视图类名是`SubMenuViewController`，单元格类名是`SubMenuCell` ，我的代码`SubMenuViewController`是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
ModelLocator *model = [ModelLocator getInstance];
    static NSString *simpleTableIdentifier = @"SubMenuCell";

    SubMenuCell *cell = (SubMenuCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SubMenuCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    if (model.foodSubItemList) {
        FoodSubItemVO* foodSubItemTemp = [model.foodSubItemList objectAtIndex:indexPath.row];
        [cell.lbSubFoodItem setText: foodSubItemTemp.foodSubItemName];
        [cell.lbPrice setText: foodSubItemTemp.price];
        [cell setIndexPath:indexPath];
     }
return cell;
} 
```

和我的 SubMenuCell 代码在这里

```
- (IBAction)addItemIntoOrder:(id)sender {
        NSLog(@"@%",indexPath);
        NSLog(@"@%",indexPath.row);
} 
```

在 SubMenuCell.h 中声明 indexPath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:33:04.763

你的 NSLog 有问题；试试这个（注意改变了 % 和 @ 顺序）。

```
- (IBAction)addItemIntoOrder:(id)sender 
{
    NSLog(@"%@",indexPath);
    NSLog(@"%@",indexPath.row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:53:38.653

确保该`addItemIntoOrder:`操作在 IB 中正确连接到您的委托。

# qt - Qt5 和 Qt 4.8 中的模型和角色

> ID：14031462
> 
> 赞同：5
> 
> 时间：2012-12-25T14:24:44.490
> 
> 标签：qt, models, qml, porting, qt5

今天我想稍微玩一下QtQuick2。所以我开始将非常简单的 Qt Quick1 应用程序移植到 Quick2。这个应用程序使用了一些模型。在 Qt5 中，模型无法按我的预期工作：我无法使用角色访问数据。

这是我的 QML 代码：

```
import QtQuick 2.0

Rectangle {
width: 800
height: 360

ListView {
    model: mainModel
    spacing: 5
    anchors.fill: parent
    orientation: ListView.Vertical
    delegate: Text {
        text: "1"

        Component.onCompleted: {
            console.log(mainModel);
            console.log(mainModel.roles() );
            console.log(model);
            console.log(model.homm); // `homm` is my roleName
            console.log(homm);
        }
    } 
```

在 Qt4.8 中，我能够使用`roleName`语法（在此 QML 中 my roleName= `homm`）获取数据，但在 Qt5 中我不能。这就是控制台中写的内容：

```
MainModel(0x7fff08beff80)
homm,wtf
QQuickVDMAbstractItemModelData(0x23c96e0)
undefined
file:///media/disk/kakadu/prog/qt/quick2test/qml/quick2test/main.qml:20: ReferenceError: homm is not defined 
```

这就是 Quick 1.1

```
MainModel(0x7fffe58182f0)
undefined
QDeclarativeVisualDataModelData(0x2372ea0)
QVariant(MiniModel*)
QVariant(MiniModel*) 
```

如您所见，使用角色访问数据按预期工作。我为您创建了测试应用程序： [用于 Qt5](https://github.com/Kakadu/qml-test-2/tree/88b2f33d7b06f41b44601d9387b8a0046731fa3f)和[Qt 4.8](https://github.com/Kakadu/qml-test-2/tree/88b2f33d7b06f41b44601d9387b8a0046731fa3f)。我希望你能帮助我找到物质的核心。

PS 我在 Qt5 版本中做了一些改动。在 Qt5 中，方法`setRoleNames()`已过时，`roleNames()`建议覆盖 of。我已经做到了这一点。

PPS 我的代码示例应该可以在 GNU/Linux x64 上编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:49:50.157

我在你的代码中发现了一个错误。`roleNames()`是常数法。这是一行有效的代码：

```
virtual QHash<int, QByteArray> roleNames() const { return _roles; } 
```

还有一个工作示例：examples/quick/modelviews/abstractitemmodel。

# javascript - 如何在javascript数组中选择最后N个成员（函数式）

> ID：14031466
> 
> 赞同：0
> 
> 时间：2012-12-25T14:25:20.650
> 
> 标签：javascript, functional-programming

是否有一种优雅的内置（函数式）方式来选择`N`Javascript 数组中的最后一个成员？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T14:27:21.857

它很简单：

```
list.slice( -N ); 
```

# javascript - 如何创建将默认参数编码为 JSON 而不是 HTTP 参数的存储

> ID：14031468
> 
> 赞同：0
> 
> 时间：2012-12-25T14:25:29.023
> 
> 标签：javascript, ajax, extjs

我希望我的商店的请求有效负载如下所示：

```
{"start":0,"limit":10,"sort":"BIRTH_PLACE","dir":"ASC"} 
```

通过使用 jsonData 的 Ajax 请求，它可以工作：

```
Ext.Ajax.request({
        url : 'bank/admin/listUsers',
        jsonData: request,
        success : function(response, options) {
            console.log('Response:', response);
            console.log('Options:', options);
            var reply = Ext.decode(response.responseText);
            console.log('Reply:', reply);
        }
    }); 
```

但是我的请求有效负载的存储宽度如下所示：

```
start=0&limit=10&sort=username&dir=ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:24:05.143

我发现这样的东西有效。只需让您商店的代理`jsonData`使用`params`.

```
Ext.define('MyProxy', {
    alias: 'myproxy',
    extend: 'Ext.data.proxy.Ajax',

    getMethod: function(request) 
    {
        return 'POST';
    },

    buildRequest: function(operation) 
    {
        var request = this.callParent(arguments);
        request.jsonData = request.params;
        request.params = {};
        return request;
    },
}); 
```

# parallel-processing - 并行编程中的标准非均匀空间域分解方法是什么？

> ID：14031470
> 
> 赞同：1
> 
> 时间：2012-12-25T14:25:50.167
> 
> 标签：parallel-processing, simulation, spatial, decomposition

**激励示例**：我正在尝试基于英国地图并行实施仅限陆地的感染模拟。

我采样点均匀分布在陆地区域，并在每个时间步确定其感染状态，这取决于其相邻点的先前状态（SIR 模型）。该国家的形状不规则，因此笛卡尔坐标不能很好地平衡负载-我应该将哪些更有效的分解方法视为标准？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T02:23:51.747

一篇[优秀的文章 (Seal & Aluru, 2001)](http://www.cse.iitb.ac.in/graphics/~prekshu/myddp/DDP/papers/Aluru_book_chapter.pdf)概述了

*   正交递归二分法
*   空间填充曲线
*   八叉树和压缩八叉树

以及另一篇专注于空间填充曲线的[论文 (Aluru & Sevilgen) 。](http://surface.syr.edu/cgi/viewcontent.cgi?article=1033&context=eecs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:32:48.650

[deLaunay 网格](http://en.wikipedia.org/wiki/Delaunay_triangulation)是不规则对象的另一种标准分解。

您应该考虑如何对此类网格进行负载平衡；这是一篇[示例文章。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.42.5111)

# ruby-on-rails - Rails 中的动态形式和模型

> ID：14031474
> 
> 赞同：0
> 
> 时间：2012-12-25T14:26:29.123
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我一直在试图弄清楚 eBay 将如何在 Rails 中创建他们的表单。（仅供参考，我知道他们不使用导轨）。到目前为止，我得出的结论是它们可能是两个模型

```
Posts    "<- would contain the basics every post contains"
-
Post_id
User_id
Category_id
Photos
Title
condition
Location
Price 
```

这很简单，但是假设用户想卖一辆车，表格会询问他们的里程、型号、年份等。但是相反，如果用户想卖一张桌子，表格不会询问它通常会要求提供汽车的信息。他们实现这一点的方法是不用创建许多模型并将它们与帖子相关联吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:33:32.347

我想最简单的情况是：

“类别有名称”（这将保留“汽车”、“鸟”、“灵魂”，无论他们在 e-bay 上出售什么）

“属性由名称、值和类别组成”

“产品有很多属性”

每个产品将具有属于某个类别的 N 个属性。

**用例（新类别）：** 当您创建一个新类别时，您可以创建属于它的属性，或者从现有的其他类别（组合）中添加属性

**用例（新产品）：** 当您要创建新产品时，您选择一个类别，属于该类别的属性将动态添加到您的产品中。

# python - 为什么它给出403 Forbidden Error？

> ID：14031478
> 
> 赞同：0
> 
> 时间：2012-12-25T14:27:19.670
> 
> 标签：python, oracle, tornado

我是 python 新手，我正在尝试编写代码以在 oracle 时从数据库中获取数据以检查用户是否注册。此代码用于 Web 应用程序但它给出 403:Forbidden 错误。我无法确定代码中是否有问题或者它需要更多配置，我正在使用 Windows 7。

* * *

```
 import logging
      import tornado.escape
      import tornado.ioloop
      import tornado.options
      import tornado.web
      import tornado.websocket
      import os.path
      import uuid
      import time
      import cx_Oracle

      from tornado.options import define, options

      define("port", default=5000, help="run on the given port", type=int)

      class Application(tornado.web.Application):
        def __init__(self):
            handlers = [(r"/", MainHandler),(r"/loggedin/page", UserIndex),]
            settings = dict(
            cookie_secret="__TODO:_GENERATE_YOUR_OWN_RANDOM_VALUE_HERE__",
            template_path=os.path.join(os.path.dirname(__file__), "templates"),
            static_path=os.path.join(os.path.dirname(__file__), "static"),
             xsrf_cookies=True,
              autoescape=None,
               )
            tornado.web.Application.__init__(self, handlers, **settings)

        class MainHandler(tornado.web.RequestHandler):
          def get(self):
             self.render("mainPage.html")

        class UserIndex(tornado.web.RequestHandler):
           def post(self):
               userid=self.get_argument('userid')
               pwd=self.get_argument('pwd')
               con=cx_Oracle.connect('system','system','localhost:1521/XE')
               c=con.cursor()
               coun=c.execute("select count(*) from dmsuser where email= '%s' and pwd                          ='%s'" %(userid,pwd))
             con.close()
              if coun.fetchone()==(1,):
                 self.render('loggedinPage.html')
              else:
                 self.render('mainPage.html')   

       def main():
         tornado.options.parse_command_line()
         app = Application()
         app.listen(options.port)
         tornado.ioloop.IOLoop.instance().start()

    if __name__ == "__main__":
        main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:16:04.750

我不能确定没有模板，但我猜你没有在 POST 请求中包含 XSRF 数据。由于您已`xsrf_cookies=True`在应用配置中进行设置，因此您需要在表单模板中包含 xsrf 数据：

```
<form method="post" action="...">
  {% module xsrf_form_html() %}
  ...
</form> 
```

# python - 如何使用 Python 2.5 在本地运行 App Engine

> ID：14031481
> 
> 赞同：0
> 
> 时间：2012-12-25T14:27:43.477
> 
> 标签：python, google-app-engine

刚开始为 App Engine (Python) 设置。当我在上面运行任何应用程序时，`http://localhost:8080`我得到了这个：

```
--> --> -->

<type 'exceptions.RuntimeError'>    Python 2.5.2: E:\Python25\pythonw.exe
Tue Dec 25 13:40:46 2012

A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _HandleRequest(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance at 0x02F16DA0>)
 2999         outfile = cStringIO.StringIO()
 3000         try:
 3001           self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
 3002         finally:
 3003           self.module_manager.UpdateModuleFileModificationTimes()
self = <google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance at 0x02F16DA0>, self._Dispatch = <bound method DevAppServerRequestHandler._Dispat...vAppServerRequestHandler instance at 0x02F16DA0>>, dispatcher = <google.appengine.tools.dev_appserver.MatcherDispatcher object at 0x02F64870>, self.rfile = <socket._fileobject object at 0x02F18F30>, outfile = <cStringIO.StringO object at 0x02F64480>, env_dict = {'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _Dispatch(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance at 0x02F16DA0>, dispatcher=<google.appengine.tools.dev_appserver.MatcherDispatcher object at 0x02F64870>, socket_infile=<socket._fileobject object at 0x02F18F30>, outfile=<cStringIO.StringO object at 0x02F64480>, env_dict={'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
 2868           dispatcher.Dispatch(app_server_request,
 2869                               outfile,
 2870                               base_env_dict=env_dict)
 2871         finally:
 2872           request_file.close()
base_env_dict undefined, env_dict = {'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.MatcherDispatcher object at 0x02F64870>, request=<AppServerRequest relative_url: / path: main.app...mp', mode 'rb' at 0x0184C530> force_admin: False>, outfile=<cStringIO.StringO object at 0x02F64480>, base_env_dict={'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
  717         forward_request = dispatcher.Dispatch(request,
  718                                               outfile,
  719                                               base_env_dict=base_env_dict)
  720 
  721         while forward_request:
base_env_dict = {'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...}
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.CGIDispatcher object at 0x02F64410>, request=<AppServerRequest relative_url: / path: main.app...mp', mode 'rb' at 0x0184C530> force_admin: False>, outfile=<cStringIO.StringO object at 0x02F64480>, base_env_dict={'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'B6589FC6', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.7.4', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', ...})
 1801                      memory_file,
 1802                      outfile,
 1803                      self._module_dict)
 1804     finally:
 1805       logging.root.level = before_level
self = <google.appengine.tools.dev_appserver.CGIDispatcher object at 0x02F64410>, self._module_dict = {'__builtin__': <module '__builtin__' (built-in)>, 'cStringIO': <module 'cStringIO' (built-in)>, 'codecs': <module 'codecs' from 'E:\Python25\lib\codecs.pyc'>, 'decimal': <module 'decimal' from 'E:\Python25\lib\decimal.py'>, 'email': <module 'email' from 'E:\Python25\lib\email\__init__.py'>, 'email.Charset': <email.LazyImporter object at 0x0191AAB0>, 'email.Encoders': <email.LazyImporter object at 0x0191AB10>, 'email.Errors': <email.LazyImporter object at 0x0191AB30>, 'email.FeedParser': <email.LazyImporter object at 0x0191AA90>, 'email.Generator': <email.LazyImporter object at 0x0191AB70>, ...}
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecuteCGI(config=<AppInfoExternal automatic_scaling=None ... runtime=python27 api_config=None >, root_path=r'J:\Tabrez\Projects\GAE\Python\bismillah', handler_path='main.app', cgi_path=r'J:\Tabrez\Projects\GAE\Python\bismillah\main.app', env={'APPENGINE_RUNTIME': 'python27', 'APPLICATION_ID': 'dev~bismillah', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'DEFAULT_VERSION_HOSTNAME': 'localhost:8080', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', ...}, infile=<cStringIO.StringO object at 0x02F64820>, outfile=<cStringIO.StringO object at 0x02F64480>, module_dict={'__builtin__': <module '__builtin__' (built-in)>, 'cStringIO': <module 'cStringIO' (built-in)>, 'codecs': <module 'codecs' from 'E:\Python25\lib\codecs.pyc'>, 'decimal': <module 'decimal' from 'E:\Python25\lib\decimal.py'>, 'email': <module 'email' from 'E:\Python25\lib\email\__init__.py'>, 'email.Charset': <email.LazyImporter object at 0x0191AAB0>, 'email.Encoders': <email.LazyImporter object at 0x0191AB10>, 'email.Errors': <email.LazyImporter object at 0x0191AB30>, 'email.FeedParser': <email.LazyImporter object at 0x0191AA90>, 'email.Generator': <email.LazyImporter object at 0x0191AB70>, ...}, exec_script=<function ExecuteOrImportScript at 0x02F148F0>, exec_py27_handler=<function ExecutePy27Handler at 0x02F14930>)
 1699 
 1700       if handler_path and config and config.runtime == 'python27':
 1701         reset_modules = exec_py27_handler(config, handler_path, cgi_path, hook)
 1702       else:
 1703         reset_modules = exec_script(config, handler_path, cgi_path, hook)
reset_modules = True, exec_py27_handler = <function ExecutePy27Handler at 0x02F14930>, config = <AppInfoExternal automatic_scaling=None ... runtime=python27 api_config=None >, handler_path = 'main.app', cgi_path = r'J:\Tabrez\Projects\GAE\Python\bismillah\main.app', hook = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object at 0x02284F10>
 E:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecutePy27Handler(config=<AppInfoExternal automatic_scaling=None ... runtime=python27 api_config=None >, handler_path='main.app', cgi_path=r'J:\Tabrez\Projects\GAE\Python\bismillah\main.app', import_hook=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object at 0x02284F10>)
 1456   """
 1457   if request_environment is None or runtime is None:
 1458     raise RuntimeError('Python 2.5 is too old to emulate the Python 2.7 runtime.'
 1459                        ' Please use Python 2.6 or Python 2.7.')
 1460 
builtin RuntimeError = <type 'exceptions.RuntimeError'>

<type 'exceptions.RuntimeError'>: Python 2.5 is too old to emulate the Python 2.7 runtime. Please use Python 2.6 or Python 2.7.
      args = ('Python 2.5 is too old to emulate the Python 2.7 runtime. Please use Python 2.6 or Python 2.7.',)
      message = 'Python 2.5 is too old to emulate the Python 2.7 runtime. Please use Python 2.6 or Python 2.7.' 
```

据我了解，这只是 Python 安装的问题，因为应用程序在部署时运行良好。

我已经安装了 Python 2.5.2。

到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:36:28.327

我从日志中假设原因是您正在尝试使用 python25 运行应用程序引擎。

选项 1：编辑您的 app.yaml 并将 python25 放在您的运行时。其余的你可以保留它，因为你已经设置好了

```
application: bismillah
version: 1
runtime: python25
api_version: 1 
```

选项 2：安装 python 2.6 或 python 2.7 并将其设为您的系统默认值，或者仅将其用于谷歌应用引擎

[蟒蛇 2.7](http://www.python.org/download/)

[Google App Engine 应用程序设置](https://developers.google.com/appengine/docs/python/config/appconfig)

# ruby-on-rails - 在我的应用程序中使用设计

> ID：14031485
> 
> 赞同：1
> 
> 时间：2012-12-25T14:28:47.230
> 
> 标签：ruby-on-rails, devise

我跟着设计教程：[http ://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

我问这个问题是因为 localhost:3000/users/registration/sign_up 让我看到一个错误页面：

```
Showing /home/alon/.rvm/gems/ruby-1.9.3-p327/gems/devise-1.1.rc0/app/views/devise/registrations/new.html.erb where line #3 raised:

undefined method `user_registration_path' for #<#<Class:0xb6388a90>:0xb63874b0>
Extracted source (around line #3):

1: <h2>Sign up</h2>
2: 
3: <%= form_for(resource_name, resource, :url => registration_path(resource_name)) do |f| %>
4:   <%= f.error_messages %>
5:   <p><%= f.label :email %></p>
6:   <p><%= f.text_field :email %></p>
Rails.root: /home/alon/projects/TODOLIST 
```

在教程中，我必须输入：localhost:3000/users/sign_up，但出现错误：

```
Routing Error

No route matches [GET] "/users/sign_up"
Try running rake routes for more information on available routes. 
```

**我不能拉他的项目：github.com/plataformatec/devise 吗？如果是这样，我将拥有我需要的一切，对吧？我这样做： git clone git@github.com:josevalim/devise.git**

如果答案是否定的，

**这些是我所做的步骤：**

**步骤 1)** rails new TODOLIST

**步骤 2)**轨道 -v

```
Rails 3.2.9 
```

**步骤 3)** sudo gem install devise --version=1.1.rc0

```
[sudo] password for alon: 
sudo: gem: command not found 
```

**步骤 4)**编辑`Gemfile`：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem 'devise', '1.1.rc0'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
    gem 'sass-rails',   '~> 3.2.3'
    gem 'coffee-rails', '~> 3.2.1'

    # See https://github.com/sstephenson/execjs#readme for more supported runtimes
    # gem 'therubyracer', :platforms => :ruby

    gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

**步骤 5)**捆绑安装

**步骤 6)** rails 生成 devise_install

**步骤 7)**编辑 routes.rb：

```
TODOLIST::Application.routes.draw do
    devise_for :users
    root :to => "home#index"
end 
```

**步骤 8）**编辑 development.rb：

```
TODOLIST::Application.configure do
    # Settings specified here will take precedence over those in config/application.rb

    # In the development environment your application's code is reloaded on
    # every request. This slows down response time but is perfect for development
    # since you don't have to restart the web server when you make code changes.
    config.cache_classes = false

    # Log error messages when you accidentally call methods on nil.
    config.whiny_nils = true

    # Show full error reports and disable caching
    config.consider_all_requests_local       = true
    config.action_controller.perform_caching = false

    # Don't care if the mailer can't send
    config.action_mailer.raise_delivery_errors = false

    # Print deprecation notices to the Rails logger
    config.active_support.deprecation = :log

    # Only use best-standards-support built into browsers
    config.action_dispatch.best_standards_support = :builtin

    # Raise exception on mass assignment protection for Active Record models
    config.active_record.mass_assignment_sanitizer = :strict

    # Log the query plan for queries taking more than this (works
    # with SQLite, MySQL, and PostgreSQL)
    config.active_record.auto_explain_threshold_in_seconds = 0.5

    # Do not compress assets
    config.assets.compress = false

    # Expands the lines which load the assets
    config.assets.debug = true

    config.action_mailer.default_url_options = { :host => 'localhost:3000' }
end 
```

**步骤 9）** rails 生成设计用户

**步骤 10)**编辑 user.rb：

```
class User < ActiveRecord::Base
    # Include default devise modules. Others available are:
    # :token_authenticatable, :lockable, :timeoutable, :confirmable and :activatable
    devise :database_authenticatable, :registerable,
           :recoverable, :rememberable, :trackable, :validatable

    # Setup accessible (or protected) attributes for your model
    attr_accessible :email, :password, :password_confirmation
    # attr_accessible :title, :body
end 
```

**步骤 11) 编辑 20121225122457_devise_create_users.rb:

```
class DeviseCreateUsers < ActiveRecord::Migration
    def self.up
      create_table(:users) do |t|
         t.database_authenticatable :null => false
         # t.confirmable
         t.recoverable
         t.rememberable
         t.trackable
         # t.lockable :lock_strategy => :failed_attempts, :unlock_strategy => :both

         t.timestamps
       end

       add_index :users, :email,                :unique => true
       #add_index :users, :confirmation_token,   :unique => true
       add_index :users, :reset_password_token, :unique => true
       # add_index :users, :unlock_token,         :unique => true
  end

  def self.down
      drop_table :users
  end
end 
```

**步骤 12)** rake db:migrate

**步骤 13)**耙路线

```
new_user_session GET    /users/sign_in(.:format)              devise/sessions#new
user_session POST   /users/sign_in(.:format)              devise/sessions#create
destroy_user_session GET    /users/sign_out(.:format)             devise/sessions#destroy
password POST   /users/password(.:format)             devise/passwords#create {:name_prefix=>:user}
new_password GET    /users/password/new(.:format)         devise/passwords#new {:name_prefix=>:user}
edit_password GET    /users/password/edit(.:format)        devise/passwords#edit {:name_prefix=>:user}
        PUT    /users/password(.:format)             devise/passwords#update {:name_prefix=>:user}
        POST   /users/registration(.:format)         devise/registrations#create {:name_prefix=>"user_registration"}
new GET    /users/registration/sign_up(.:format) devise/registrations#new {:name_prefix=>"user_registration"}
edit GET    /users/registration/edit(.:format)    devise/registrations#edit {:name_prefix=>"user_registration"}
        PUT    /users/registration(.:format)         devise/registrations#update {:name_prefix=>"user_registration"}
        DELETE /users/registration(.:format)         devise/registrations#destroy {:name_prefix=>"user_registration"}
   root        /                                     home#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:47:01.347

这与您的设计版本有关。

不要将设计 1 与 rails 3.2 一起使用...将你的设计版本升级到 2 >

# php - 如何检测opencart 1.5.2.1中是否已经存在同名产品

> ID：14031487
> 
> 赞同：1
> 
> 时间：2012-12-25T14:29:01.607
> 
> 标签：php, ajax, opencart

我不知道这是否可能以及是否有任何扩展来检测 OpenCart 中的产品重复名称？？？

例如...当我插入产品名称时，应该有一个脚本通过 AJAX 等检测...该名称是否已存在于数据库中...

是否有任何现有的扩展可以推荐给我？? ?

# c# - 代表替换重复代码

> ID：14031490
> 
> 赞同：0
> 
> 时间：2012-12-25T14:29:18.443
> 
> 标签：c#, delegates, checkbox

我在一个组框中有 10 个复选框。标记为“全部”的顶部复选框在选中“全部”时检查其他 9 个复选框

在其他 9 个复选框中，我的代码基本相同。以下是其中两个复选框的示例：

```
private void ckDal_Click(object sender, EventArgs e)
    {
        if (ckDal.Checked == false)
            ckAll.Checked = false;
    }

    private void ckHou_Click(object sender, EventArgs e)
    {
        if (ckHou.Checked == false)
            ckAll.Checked = false;
    } 
```

我讨厌重复相同的代码。我将如何创建一个委托以仅使用一种事件方法来完成上述任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:31:01.537

`Click`您可以对所有 CheckBox使用单个事件处理程序。引发事件的实际 CheckBox 将从`sender`参数中获得。只需将其转换为 CheckBox 类型：

```
private void ck_Click(object sender, EventArgs e)
{
    if (!((CheckBox)sender).Checked)
        ckAll.Checked = false;
} 
```

此外，您不需要将布尔值与 true/false 进行比较 - 您可以直接在`if`语句中使用它们。

*顺便说一句*，您还应该在检查所有 CheckBox 时验证大小写，并`ckAll.Checked = true`在这种情况下进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:31:10.580

```
private void CheckBoxClick(object sender, EventArgs e)
{        
    if (!((CheckBox)sender).Checked)
        ckAll.Checked = false;
} 
```

# regex - 自定义降价标签

> ID：14031492
> 
> 赞同：3
> 
> 时间：2012-12-25T14:29:31.903
> 
> 标签：regex, markdown

我正在使用[dflydev 的 markdown](https://github.com/dflydev/dflydev-markdown/blob/master/src/dflydev/markdown/MarkdownExtraParser.php)，它基于[michelf 的项目](http://michelf.ca/projects/php-markdown)将 Markdown 转换为 HTML。

我的网站默认为 RTL，我想添加一个自定义标签以允许左对齐段落，
例如：

```
regular text, right aligned.

<- some text that will be aligned to the left

<--
fenced text that will be aligned to the left
<-- 
```

我正在尝试构建正则表达式模式来捕获这些块：

*   因为`<- ...`我有：`/^<- ([^\n]+)/`
*   对于围栏块，我无法获得工作模式

我想获得有关围栏块正则表达式和改进我已经拥有的单行正则表达式的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:23:13.087

这将匹配您的第二组：

```
^<--.*?<--$ 
```

对于你的第一组，我会使用这样的东西：

```
^<-[^-][^\r\n]*?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:22:24.327

对于您的第一个案例，您可以使用

```
/^<-(.*?)$/ 
```

并获得**第一组**。

对于第二种情况使用

```
/^<--(.*?)<--$/ 
```

并获得**第一组**。

# c# - 使用 c# .net 在 foxpro 数据库中插入/选择数据

> ID：14031493
> 
> 赞同：0
> 
> 时间：2012-12-25T14:29:32.567
> 
> 标签：c#, asp.net, foxpro, visual-foxpro

我想在后端使用 FoxPro 数据库，在前端使用 c# .net，但我不知道如何在 .net 中连接 foxpro 数据库

对于连接我使用什么代码，请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:23:13.357

我认为您不一定需要走“互操作”的方式，但对连接和查询数据有一个基本的了解。

[首先，在此处](http://www.microsoft.com/en-us/download/details.aspx?id=14839)获取 Microsoft 的 OleDB 提供程序

[这是一个执行连接并运行简单查询以获取数据的示例，](https://stackoverflow.com/questions/1686530/how-do-i-create-a-new-vfp-oledb-table-from-an-existing-one-using-net/1691923#1691923)但是这个示例将结果发送到另一个 VFP 表，而不是带回 C# 进行处理/使用。

[此示例显示插入记录并使用参数来帮助防止任何 SQL 注入攻击尝试](https://stackoverflow.com/questions/9198197/how-to-insert-into-dbf-file-foxpro/9202623#9202623)

[另一个使用 SQL-Update](https://stackoverflow.com/questions/2675610/how-to-update-a-table-using-oledb-parameters/2675922#2675922)

一旦你掌握了基础知识，它就没有那么难了。我实际上制作了一个简单的“包装器”类来集中确保有效连接、执行给定查询并在完成后关闭连接。然后，我刚刚为我想做的每一件事添加了方法（或者也可以被子类化）。无论如何，当我需要执行某个操作时，我只需调用该函数并传入所需的任何参数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T03:32:47.273

您可能想查看 .Net Interop。

另请查看 West-Wind 网络连接。他们有一个框架，允许您使用 Visual Studio IDE 创建 Web 表单，还可以使用您的 VFP 业务逻辑和数据源。这很好用。

West wind 也有一个 wwDotNetBridge，它允许您从 VFP 访问 .Net 组件。

在下面查看他们的网站。

[http://west-wind.com/WestwindClientTools.aspx](http://west-wind.com/WestwindClientTools.aspx) http://www.west-wind.com/presentations/VFPDOTNETiNTEROP/VFPDOTNETINTEROP.HTM

# php - strtotime问题

> ID：14031496
> 
> 赞同：0
> 
> 时间：2012-12-25T14:29:48.290
> 
> 标签：php

我创建了一个类似的代码

```
<?=date('h:m A',strtotime('09:30:00'))?> 
```

我得到一个像 09:12 AM 这样的输出。实际结果将是上午 09:30。为什么会得到上述结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T14:31:43.250

快速查看该[`date()`](http://php.net/date)函数的文档会显示代码中的错误：

> `m`月份的数字表示，带前导零 带前导零的
> `i`分钟

所以你需要`i`一分钟。整个格式字符串将是`'h:i A'`

`date`但是，如果您不使用该函数而是[`strftime`](http://php.net/strftime)使用标准化格式变量，那会好得多：

```
<?=strftime('%I:%M %p', strtotime('09:30:00'))?> 
```

# javascript - 使用 javascript 触发媒体查询

> ID：14031497
> 
> 赞同：2
> 
> 时间：2012-12-25T14:29:59.773
> 
> 标签：javascript, media-queries

`@media all and (max-width: 960px)`是否可以在不重新调整浏览器大小的情况下从 javascript触发？

# c++ - 主机不会加载 VST 插件效果

> ID：14031498
> 
> 赞同：2
> 
> 时间：2012-12-25T14:30:15.673
> 
> 标签：c++, vst

我一直在尝试编写一个简单的 VST 插件。它不需要任何花哨的界面，只需几个控件。但我不知道从哪里开始。开始巨大的文字墙。

我一直在网上搜索有关该主题的信息和指南，但到目前为止我发现的最好的是[this](http://ygrabit.steinberg.de/~ygrabit/public_html/vstgui/V2.2/doc/2.0/examples.html)和[this](http://www.euphoriaaudio.com/tutorials/vstexample/vstexample1.php) page。虽然它们很好，但我似乎无法使用这些资源重新创建程序。

作为参考，我使用的是 VST SDK 3.5.2 和 MSVC 2010。

我将该文件夹添加`\public.sdk\source\vst2.x`到我的项目中（其中包括 audioeffect 和 vstplugmain 的源代码）。我真的希望在某个地方有一个简单的项目符号列表，说明您需要做什么才能使有效的 VST 插件效果正常工作/正确导出等。

我提供的前两个链接很好地完成了它，但从那时起创建 VST 的方法似乎发生了变化。这是我的程序的骨架，它在编译时不会被我的 VST 主机识别（加载时出错）。

**谐波调制器.h**

```
#include "public.sdk\source\vst2.x\audioeffectx.h"
namespace Steinberg {
  namespace VST {
    class HarmonicModulator : public AudioEffectX {
      public:
        /* ?? what about createEffectInstance
        static FUnknown* createInstance (void* context) {
          return (IAudioProcessor*)new HarmonicModulator;
        }
        */
        HarmonicModulator(audioMasterCallback master);
        virtual ~HarmonicModulator(); //can't hurt
        /*
        virtuals
        */
        virtual void process (float **inputs, float **outputs, VstInt32 sampleFrames);
        virtual void processReplacing (float **inputs, float **outputs, VstInt32 sampleFrames);
        virtual void setProgramName (char *name);
        virtual void getProgramName (char *name);
        virtual void setParameter (VstInt32 index, float value);
        virtual float getParameter (VstInt32 index);
        virtual void getParameterLabel (VstInt32 index, char *label);
        virtual void getParameterName (VstInt32 index, char *label);
        virtual void getParameterDisplay (VstInt32 index, char *text);
        virtual bool getEffectName (char * name);
        virtual bool getVendorString (char * text);
        virtual bool getProductString (char * text);
        virtual VstInt32 getVendorVersion () { return 1000; }
        virtual VstPlugCategory getPlugCategory () { return kPlugCategEffect; }
        protected:
          char progname[64];
          float fparam;
    };
  }
} 
```

谐波调制器.cpp

```
#include "HarmonicModulator.h"
namespace Steinberg {
  namespace VST {
    /*
    Implementation for the constructor.
    */
    HarmonicModulator::HarmonicModulator(audioMasterCallback cb) : AudioEffectX(cb, 1, 1), fparam(0.f) {
      setNumInputs (2); // stereo in
      setNumOutputs (2); // stereo out
      setUniqueID ('HMXX'); // identify
      canProcessReplacing (); // supports both accumulating and replacing output
      strcpy_s(progname, "Default");
    }
    /*
      Implementation for the destructor.
    */
    HarmonicModulator::~HarmonicModulator() {}
    /*
      ProcessReplacing
    */
    void HarmonicModulator::processReplacing (float **inputs, float **outputs, VstInt32 sampleFrames) {
      float *in1 = inputs[0];
      float *in2 = inputs[1];
      float *out1 = outputs[0];
      float *out2 = outputs[1];
      while (--sampleFrames >= 0) {
        (*out1++) += (*in1++);
        (*out2++) += (*in2++);
      }
    }
    /*
    Process
    */
    void HarmonicModulator::process (float **inputs, float **outputs, VstInt32 sampleFrames) {
      float *in1 = inputs[0];
      float *in2 = inputs[1];
      float *out1 = outputs[0];
      float *out2 = outputs[1];
      while (--sampleFrames >= 0) {
        (*out1++) += (*in1++);
        (*out2++) += (*in2++);
      }
    }
    /*
    Below seems to be needed to work
    */
    void HarmonicModulator::setProgramName (char *name){
      strcpy_s(progname, name);
    }
    void HarmonicModulator::getProgramName (char *name){
      strcpy_s(name, 32, progname);
    }
    void HarmonicModulator::setParameter (VstInt32 index, float value) {
      fparam = value;
    }
    void HarmonicModulator::getParameterLabel (VstInt32 index, char *label) {
      strcpy_s(label, 32, "dB");
    }
    void HarmonicModulator::getParameterName (VstInt32 index, char *label) {
      strcpy_s(label, 32, "Volume");
    }
    void HarmonicModulator::getParameterDisplay (VstInt32 index, char *text) {
      this->dB2string(fparam, text, 32);
    }
    //-----------------------------------------------------------------------------------------
    float HarmonicModulator::getParameter (VstInt32 index) {
      return fparam;
    }
    bool HarmonicModulator::getEffectName (char * name) {
      strcpy_s(name, 32, "Harmonic Modulator");
      return true;
    }
    bool HarmonicModulator::getVendorString (char * text) {
      strcpy_s(text, 32, "LightBridge");
      return true;
    }
    bool HarmonicModulator::getProductString (char * text) {
      strcpy_s(text, 32, "Harmonic Modulator");
      return true;
    }
  }
}
AudioEffect* createEffectInstance (audioMasterCallback audioMaster) {
  return new Steinberg::VST::HarmonicModulator (audioMaster);
} 
```

好的，我使用的“方法”是：根据前面的两个指南，要制作一个成功的插件，您至少需要从 audio effectx 和 override 派生您的插件`process()`并`processReplacing()`进行实际处理。

其余的被添加，希望它能做点什么。此外，导出的函数`createEffectInstance()`返回插件的新实例。`vstplugmain.cpp`包含一个 dllmain 和一个导出函数，该函数`VstPlugMain`接收一个 audiomastercallback 并返回`createEffectInstance(callback)`。

IMO，这似乎是之前提供的两个指南的一种工作方法和重新创建（据我所知）。插件已定义，并且在插件和主机之间有一个接口，允许创建它的实例。我错过了什么？指南说这就是你所需要的。

这是不同版本的 VST 之间的区别吗？2/3？

所以我无法让捆绑的 VstPluginTestHost 工作，它无法找到我的 VST。我尝试了验证器，并逐步完成，我发现由于我的程序没有导出一个名为 的函数`GetPluginFactory`，所以它被丢弃了。好的，可以理解，但没有任何指南对此有任何说明。

搜索无穷无尽的源代码，似乎一些 VST 源代码在底部添加了这个神秘的段落（代码取自 AGainSimple.cpp）：

```
BEGIN_FACTORY_DEF ("Steinberg Media Technologies",
  "http://www.steinberg.net",
  "mailto:info@steinberg.de")
  //---First Plugin included in this factory-------
  // its kVstAudioEffectClass component
  DEF_CLASS2 (INLINE_UID (0xB9F9ADE1, 0xCD9C4B6D, 0xA57E61E3, 0x123535FD),
    PClassInfo::kManyInstances, // cardinality
    kVstAudioEffectClass, // the component category (don't change this)
    "AGainSimple VST3", // here the Plug-in name (to be changed)
    0, // single component effects can not be destributed so this is zero
    "Fx", // Subcategory for this Plug-in (to be changed)
    FULL_VERSION_STR, // Plug-in version (to be changed)
    kVstVersionString, // the VST 3 SDK version (don't change this, use always this definition)
    Steinberg::Vst::AGainSimple::createInstance)// function pointer called when this component should be instantiated
END_FACTORY 
```

这似乎导出了一个接口，该接口为主机提供了一些基本信息和一个用于创建插件的接口。但。我以为`createEffectInstance`这样做了。现在有一个名为`createInstance`. 有区别吗？函数签名建议`createInstance`不接收 audiomaster 回调，因此无法实例化 AudioEffect 的任何派生（在其构造函数中将其作为参数） - 我在harmonicmodulator.h 中提供了该函数，已注释掉。

此外，我注意到许多较新的来源包括另一个“主”cpp 文件（dllmain.cpp, in `\public.sdk\source\main`，它定义了`InitModule`and的导出`DeInitModule`，但现在没有`createEffectInstance`了。这让我头晕目眩。它们似乎也来自`AudioEffect`(no x) 或`SingleComponentEffect`(似乎要复杂得多？大声笑）。

`begin_factory`最重要的是，由于许多丢失的常量和定义存在于许多不同的文件中，我似乎无法让这些东西正常工作。您是否应该将整个 SDL 添加到您的项目中？那是 6,000 个文件。

TL;博士

没有什么真正有效，我似乎无法获得线索。捆绑的源示例可以工作，但它们都以不同的方式接近创建 VST 的“方法”。说真的，任何指导或帮助将不胜感激。我正在尝试将其创建为应用程序的一部分，并且我已经完成了其他所有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T00:11:53.037

> 我一直在尝试编写一个简单的 VST 插件。它不需要任何花哨的界面，只需几个控件。但我不知道从哪里开始。开始巨大的文字墙。

首先编译 SDK 附带的示例插件。然后用你自己的裸骨插件复制它。从那里继续建设。

> 这是不同版本的 VST 之间的区别吗？2/3？

VST 2 和 VST 3 是不同的格式。我建议您构建一个 VST 2.4 插件，除非您有构建 VST 3 插件的特定原因。VST 2.4 得到了许多主机的广泛支持，并且可能会持续几年。VST 3 是一种较新的格式，但不受广泛支持。

# android - Android 应用内结算 v3 在各种设备上的可用性

> ID：14031500
> 
> 赞同：3
> 
> 时间：2012-12-25T14:30:26.523
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我开发了最简单的应用程序，它实现了 Android 应用内计费 v.3

在各种设备上测试它我发现它不适用于 API 级别 >=8 的所有设备（因为它声称 Google 的[示例应用程序](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)）

例如，它不适用于 HTC Vision (Android 2.3.3)，尽管 Google Play 市场报告该应用程序与这些设备兼容。

日志显示应用无法绑定服务：

```
W/ActivityManager(76): Unable to start service Intent { act=com.android.vending.billing.InAppBillingService.BIND }: not found 
```

所以问题是：如何知道哪些设备与应用内计费 v.3 不兼容，或者如何才能使其在这些设备上可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T17:31:55.533

我已经使用@Geobits 提示解决了它。完整的故事很简单：需要将 Google Market 更新到 Google Play。

在大多数情况下，它应该自动工作，但对于一些过时的设备，您需要手动完成。我刚刚从[这个特定站点](http://www.freeware4android.net/htc-desire-z-htc-vision-device-1679/google-play-store-get-175799.html)下载了 Play Store v. 3.9 ，它可以工作了！

# apache - 访问没有文件名和扩展名的网站主页文件

> ID：14031506
> 
> 赞同：0
> 
> 时间：2012-12-25T14:31:41.087
> 
> 标签：apache, http, url, url-routing

我正在开发一个具有如下 URL 的网站：

```
http://www.domain.com/directory/home.php 
```

我想知道是否可以设置该站点，以便用户可以像这样访问它：

```
http://www.domain.com/directory/ 
```

并且浏览器会自动查找并渲染 home.php 文件？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:43:19.440

假设您正在使用`Apache`，来自[文档](http://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryindex)：

> 当客户端通过在目录名称末尾指定 / 来请求目录索引时，DirectoryIndex 指令设置要查找的资源列表。Local-url 是服务器上文档相对于请求目录的（% 编码的）URL；它通常是目录中文件的名称。可能会给出几个 URL，在这种情况下，服务器将返回它找到的第一个。如果不存在任何资源并且设置了 Indexes 选项，则服务器将生成自己的目录列表。

将此添加到`httpd.conf`文件中：

```
DirectoryIndex home.php 
```

然后`.php`要从 URL 中删除 ，请将其添加到`.htaccess`根文件夹中的文件中。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) $1.php [L] 
```

# c# - 数学计算的 C# 编程最佳实践

> ID：14031510
> 
> 赞同：2
> 
> 时间：2012-12-25T14:32:09.103
> 
> 标签：c#

谁能告诉我在哪里可以阅读最佳实践来编写严重依赖数学计算的应用程序？例如，假设我被要求编写一个生成 100 个偶数的 C# 应用程序。我会写以下内容：

```
public void GenerateEven() {
    for (int i=0;i<100;i++) {
        Console.WriteLine(i * 2);
    }
} 
```

但是，这不是最佳做法。生成偶数的最佳方法是，例如：

```
public void GenerateEven() {
    int i=0;
    while (i <200) {
        if (i % 2 == 0) {
        Console.Writeline(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:08:34.863

如果您追求表现力，请从函数式编程中获取一页：

```
public static IEnumerable<int> EvenNumbers(int start = 0)
{
    while (true)
    {
        yield return start;
        start += 2;
    }
} 
```

然后得到你的序列：

```
var firstHundredEvenNumbers = EvenNumers().Take(100); 
```

这真的取决于你的目标。如果您正在寻找构图，则上述内容很棒。如果您正在寻找原始速度，那么您应该将所有逻辑混搭成一个球并对其进行调整 - 但它会更难使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:39:14.177

是什么让您认为第二种方法是最好的方法？如果我被要求做那个问题，那么我会这样做，所以我只循环 100 次。

```
for (int i = 0; i < 200; i += 2)
    Console.WriteLine(i); 
```

至于您的更一般的问题，没有任何文档或书籍可以为您提供有关如何形成循环或处理数学问题的最佳实践。这是[计算机科学](http://en.wikipedia.org/wiki/Computer_science)教育派上用场的地方，可以分析您的问题并尝试找到最佳解决方案。

在您的示例问题中，提出的每个解决方案（包括我提出的解决方案）都归结为 N 的[大 O](http://en.wikipedia.org/wiki/Big_O_notation)，因此这些解决方案之间的计算差异可以忽略不计。增长相对于 N 是线性的。我的解决方案提供的唯一优势是它只循环生成输出所需的项目，而不是跳过不符合标准的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:03:10.547

实际上，您可能正在寻找Donald Knuth的[The Art of Computer Programming](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)

它被称为`the bible of all fundamental algorithms`并包含多种编程算法及其分析。但它不涵盖任何特定于语言的时刻。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T14:38:07.067

如果要生成数字，可以使用 Enumerable.Range ：

**编辑：（rotem）**

```
var a = Enumerable.Range(1,100/ 2+ 1).Select((X) => X * 2).ToList(); 
```

# macos - makedepend 不见了？

> ID：14031513
> 
> 赞同：1
> 
> 时间：2012-12-25T14:32:30.287
> 
> 标签：macos, makefile

缺少 OS X 10.8 `makedepend`（[Apple：OpenSSL 和`make depend`](https://stackoverflow.com/questions/14030575/apple-openssl-and-make-depend)）。看起来 OS X 的最后一个版本`makedepend`是 10.7.4（[http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/makedepend.1.html](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/makedepend.1.html)）。

由于政策，我无法修改 makefile，所以我尝试在我的 . 中放置一个别名`.bash_profile`，但它没有按预期工作。

有人知道替代方案吗？Apple 是否将弃用的软件包放在任何地方？我没有在 opensource.apple.com 上看到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-23T15:52:34.703

你试过了吗：

酿造安装 makedepend

[https://github.com/Homebrew/homebrew/wiki/Installation](https://github.com/Homebrew/homebrew/wiki/Installation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:47:00.600

谷歌搜索两秒钟发现[了这个](http://forums.macrumors.com/showthread.php?t=181159)，这`gcc -M`相当于`makedepend`.

# c# - DESCryptoServiceProvider 的最大有效块大小值

> ID：14031518
> 
> 赞同：1
> 
> 时间：2012-12-25T14:33:03.970
> 
> 标签：c#, encryption, cryptography, des

.Net 4.0 中的最大有效值是多少`BlockSize`。`DESCryptoServiceProvider`

对于值 32 和 128，我得到以下错误：

> 不是有效的块大小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T14:40:52.920

你可以查一下[`SymmetricAlgorithm.LegalBlockSizes`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.symmetricalgorithm.legalblocksizes.aspx)楼盘。

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.security.cryptography.descryptoserviceprovider.aspx)，它是 64 位`DESCrpytoServiceProvider`。

# sharepoint - 如何在共享点列表中配置多列标题？

> ID：14031524
> 
> 赞同：1
> 
> 时间：2012-12-25T14:33:38.683
> 
> 标签：sharepoint, sharepoint-designer

我有一个共享点列表。我想对列进行分组。

为了清楚地了解我的要求，请参见下图：

![在此处输入图像描述](../Images/6740f891418269521dab877006f2f105.png)

这可能在共享点列表中吗？我使用的是 2010 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:54:13.003

可以使用包含指定分组的*自定义列标题布局呈现*[XSLTListViewWebPart (XLV)](http://msdn.microsoft.com/en-us/library/ff806162%28v=office.14%29.aspx)的列表视图。它是基于 XSLT 的解决方案，不需要任何自定义编码。

 *这可以通过 SharePoint Designer 完成，例如，请参阅[使用 SharePoint Designer 创建自定义列表视图](http://office.microsoft.com/en-us/sharepoint-designer-help/create-a-custom-list-view-using-sharepoint-designer-HA010379079.aspx?fromAR=3)

* * *

下面描述了类似的解决方案，但我们不会在列表视图页面中修改 XSLT，而是为其创建单独的 XSLT 文件。

## 脚步

1.  为列表创建自定义视图。
2.  创建自定义 XSLT 样式表以在该视图中呈现自定义标题布局。此示例的源代码位于[**此处**](https://gist.github.com/4383069)。
3.  为方便起见，将其保存在列表页面所在的同一位置，如下图所示![在此处输入图像描述](../Images/a3b87ccdecd5d518fb99775525bbf635.png)
4.  在 SPD 中打开自定义视图页面并在 XLV 属性中指定 XSLink 属性，如下图所示![在此处输入图像描述](../Images/c558dde40c957252f8d6e1578e607487.png)
5.  保存更改。

带有自定义视图的列表如下所示

![在此处输入图像描述](../Images/c01e6578c648f134f5b588ad50b00895.png)*

# ffmpeg - 使用 system() 函数在 C++ 中调用 ffmpeg 失败

> ID：14031529
> 
> 赞同：2
> 
> 时间：2012-12-25T14:34:13.750
> 
> 标签：ffmpeg

我编写了一个 c++ 程序，它需要将一些（比如：10）mp4 视频转换为 flv 视频。我在我的程序中为每个视频使用 ffmpeg，如下所示：

```
system("ffmpeg -i video -filter:v yadif -ar 44100 -sameq -y -f flv temp.flv") 
```

然而，事实证明：**只有第一个视频会成功转换，其他视频会失败。**
这意味着：
当我更改要转换的视频的输入顺序并重新执行程序时，它的行为相同：只有第一个视频（每次更改输入视频顺序时都会有所不同）将被成功转换。

**错误消息如下：**

[h264 @ 0xaee0740] 隐藏 45 DC、45 AC、45 MV 错误
[h264 @ 0xaee0ce0] AVC：最终大小 305665
最后消息重复 1 次
[h264 @ 0xaee0ce0] 无帧！
[h264 @ 0xaee1280] AVC：最终大小 572993
最后一条消息重复了 1 次
[h264 @ 0xaee1280] 无帧！
[aac @ 0xad9ccc0] 未分配通道元素 0.13
解码流 #0:1 时出错
[aac @ 0xad9ccc0] 未分配通道元素 0.13
解码流 #0:1 时出错
[aac @ 0xad9ccc0] 未分配通道元素 0.13
错误whiledecode stream #0:1
......
最奇怪的是：**当我在 bash shell 中运行 ffmpeg 命令时，所有视频都会成功转换**.

谷歌之后，我尝试了这些（当然失败了）：

1.  去掉 -sameq 选项，结果是一样的；
2.  在 shell 脚本 ConvertToFlv.sh 中编写 ffmpeg commod，例如：

    ```
    /usr/local/bin/ffmpeg -i "$dir/$1" -filter:v yadif -ar 44100 -sameq -y -f flv "$dir/temp.fiv" 
    ```

    然后在程序中调用这个脚本

    ```
    system("ConvertToFlv.sh"+video) 
    ```

    或者

    ```
    system("sh ConvertToFlv.sh"+video) 
    ```

    结果是一样的。

ffmpeg 配置为：

```
 ffmpeg version 0.9.1.git Copyright (c) 2000-2012 the FFmpeg developers
  built on Dec 17 2012 16:17:30 with gcc 4.1.2 20080704 (Red Hat 4.1.2-48)
  configuration: --enable-gpl --enable-postproc --enable-nonfree --enable-postproc --enable-swscale --enable-avfilter --enable-pthreads --enable-libxvid --enable-libx264 --enable-libmp3lame --enable-libfaac --disable-ffserver --disable-ffplay
  libavutil      51\. 41.100 / 51\. 41.100
  libavcodec     54\.  4.100 / 54\.  4.100
  libavformat    54\.  1.100 / 54\.  1.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 62.101 /  2\. 62.101
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  7.100 /  0\.  7.100
  libpostproc    52\.  0.100 / 52\.  0.100 
```

我的机器环境是：

```
Linux master 2.6.18-194.el5 #1 SMP Fri Apr 2 14:58:14 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux 
```

我现在很烦躁，希望有人能给我一些建议，真的很感激。

# java - 以编程方式制作自定义日历，如布局

> ID：14031534
> 
> 赞同：0
> 
> 时间：2012-12-25T14:34:32.940
> 
> 标签：java, android

我正在开发一个应用程序，它基本上应该从网站下载事件列表，然后在类似日历的布局中查看它们。我已经介绍了第一部分。但我不知道如何制作一个网格布局（一个轴上的时间和第二个轴上的日期），并且列表视图形式的事件将根据开始和结束时间放置在网格上。我只需要提示如何开始。问题是我必须根据用户选择添加事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:20:55.553

这将以编程方式创建像网格一样的日历..

```
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);

/* INFLATE MAIN TABLE LAYOUT */
ViewGroup root = (ViewGroup) inflater.inflate(R.layout.table_root, null);
TableLayout tbl = (TableLayout) root.findViewById(R.id.tblLayout);

this.setContentView(root);

ViewGroup row = (ViewGroup) inflater.inflate(R.layout.table_row, root, false);

/* GENERIC LOOP FOR CREATING TABLE */

int count = 1;

for (int day = 0; day < calendarCount; day++)
{
    row.addView(day);

    if (count <= weekCount) {
        root.addView(row);
        row = (ViewGroup) inflater.inflate(R.layout.popup_row, root, false);
    }
    count++;
} 
```

你也可以看到..
[http://w2davids.wordpress.com/android-simple-calendar/](http://w2davids.wordpress.com/android-simple-calendar/)

# jquery - 排队 html 函数

> ID：14031536
> 
> 赞同：1
> 
> 时间：2012-12-25T14:34:48.703
> 
> 标签：jquery

我想将 div 的内容更改 3 次，每次更改之间有 1 秒的延迟。 `delay()`在此代码中不起作用：

```
$('#import-status-msg').html('Importing content ..').delay(1000).
html('Organizing content ..').delay(1000).
html('Eating burrito ..'); 
```

我直接得到“吃墨西哥卷饼”。完成这项工作的最短方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:38:53.723

使用 setTimeout 函数：

```
setTimeout(function() {
    $('#import-status-msg').html('Importing content ..');
    setTimeout(function() {
        $('#import-status-msg').html('Organizing content ..');
        setTimeout(function() {
            $('#import-status-msg').html('Eating burrito ..');
        }, 1000);
    }, 1000);
}, 1000); 
```

您不能使用 jQuery 的 delay() 函数，因为它只会影响标准效果队列，例如。动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:48:41.937

一个更通用的解决方案，使用 jquery 的[`queue`](http://api.jquery.com/queue/)功能：

```
var gen = function (str, delay) {
  return function (n) {
    $(this).html(str);
    setTimeout(n, delay || 1000);
  };
};

$('#import-status-msg').queue([
  gen('Importing content ..'),
  gen('Organizing content ..'),
  gen('Eating burrito ..')
]); 
```

[http://jsbin.com/oraler/1/](http://jsbin.com/oraler/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:37:46.607

利用：

```
setTimeout(function(){},1000) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T14:40:54.370

```
var q = ['Importing content ..','Organizing content ..','Eating burrito ..'];
$("#test").html(q[0]);
var i = 1;
var p = setInterval(function(){
    $("#test").html(q[i]);
    i++;
    if(i==q.length){
        clearInterval(p);
    }
},1000); 
```

**[小提琴](http://jsfiddle.net/ZpWTT/)**

# internet-explorer-7 - 漂亮的照片ie7

> ID：14031537
> 
> 赞同：0
> 
> 时间：2012-12-25T14:34:51.300
> 
> 标签：internet-explorer-7, prettyphoto

我在使用 Prettyphoto 的 IE7 中遇到错误：

我有一个简单的标签，如果我直接将它放在 dom 中，那么它可以工作，但是如果我使用 jquery 创建它并附加到 dom 中，则会出现错误。

```
<a href="#inline-1" data-rel="prettyPhoto[gallery1]"><img src="01.jpg" width="120" height="68" alt=""/></a> 
```

这个例子有效：
[例子1](http://jsfiddle.net/g47cV/3/)
（一个标签直接放在dom中）

此示例不起作用：
[示例 2](http://jsfiddle.net/QYXp6/3/)
（使用 jquery 创建标签并附加在 dom 中）

错误是：“无法加载图像。请确保路径正确且图像存在。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:30:28.553

我遇到了这个问题。一般来说，你需要在 DOM 重新创建后触发 prettyPhoto：

```
 //Some Javascript code creates DOM in here and then you will fire prettyPhoto even again to update and apply on new created DOM elements
            $("area[rel^='popUp']").prettyPhoto(); 
            $(".popUpWindow:first a[rel^='popUp']").prettyPhoto({animation_speed:'normal',theme:'facebook',autoplay_slideshow: false,social_tools: false});
            $(".popUpWindow:gt(0) a[rel^='popUp']").prettyPhoto({animation_speed:'normal',theme:'facebook',autoplay_slideshow: false,social_tools: false}); 
```

# php - 无法在 wamp 中指向不同的两个域（虚拟主机）

> ID：14031538
> 
> 赞同：0
> 
> 时间：2012-12-25T14:35:03.100
> 
> 标签：php, apache, xampp, wamp, wampserver

在 wamp 设置中，我无法为我的应用程序设置虚拟主机。

阿帕奇；D:\wamp\bin\apache\apache2.2.8\conf\extra

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

<VirtualHost 127.0.0.1>
DocumentRoot "D:/wamp/www/"
ServerName www.example.org
# ...
</VirtualHost>

<VirtualHost 127.0.0.1>
DocumentRoot D:/wamp/www/facebook_post_style
ServerName www.example.net
ServerAlias *.example.net
# ...
</VirtualHost> 
```

在主机

C:\Windows\System32\drivers\etc\hosts

```
127.0.0.1        www.example.org
127.0.0.1        www.example.net 
```

我做了上面的配置。对于这两个域，显示相同的输出。

请检查以下网址。![在此处输入图像描述](../Images/4b54ccf174b77c9d5ca3e87a6ac8fea9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:42:55.543

尝试这个

```
NameVirtualHost *:80

<VirtualHost *:80>
DocumentRoot "D:\wamp\www\facebook_post_style"
ServerName www.example.net
</VirtualHost> 

<VirtualHost *:80>
DocumentRoot "D:\wamp\www\FolderName"
ServerName www.example.org
</VirtualHost> 
```

还要确保您已从 httpd.conf 文件中取消注释以下行

```
Include conf/extra/httpd-vhosts.conf 
```

查看这篇 [文章](http://cesaric.com/?p=255)了解详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:36:39.707

使用下面的东西虚拟主机工作 Apache；

> D:\wamp\bin\apache\apache2.2.8\conf\extra

```
<VirtualHost *:80>
ServerAdmin webmaster@dummy-host.localhost
#DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/docs/dummy-host.localhost"
DocumentRoot "D:/wamp/www/"
ServerName localhost
#ServerAlias www.dummy-host.localhost
ErrorLog "logs/dummy-host.localhost-error.log"
CustomLog "logs/dummy-host.localhost-access.log" common 
```

```
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host2.localhost
   # DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/docs/dummy-host2.localhost"
   DocumentRoot "D:/wamp/www/facebook_post_style"
    ServerName localhost1
    ErrorLog "logs/dummy-host2.localhost-error.log"
    CustomLog "logs/dummy-host2.localhost-access.log" common
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host2.localhost
   # DocumentRoot "C:/Program Files/Apache Software Foundation/Apache2.2/docs/dummy-host2.localhost"
   DocumentRoot "D:/wamp/www/crop"
    ServerName www.example.net
    ErrorLog "logs/dummy-host2.localhost-error.log"
    CustomLog "logs/dummy-host2.localhost-access.log" common
</VirtualHost> 
```

在主机：

> C:\Windows\System32\drivers\etc\hosts

```
127.0.0.1   localhost
127.0.0.1   localhost1
127.0.0.1   www.example.net 
```

单击任务栏中的 wamp 图标 > Apache > httpd.conf

启用下面的行

# 虚拟主机

> 包括 conf/extra/httpd-vhosts.conf

# android - IntelliJ IDEA Annotation 处理器：“从项目类路径中获取处理器”

> ID：14031539
> 
> 赞同：4
> 
> 时间：2012-12-25T14:35:09.897
> 
> 标签：android, intellij-idea, annotation-processing

注释处理器设置中的“从项目类路径获取处理器”选项是什么意思？如果我正确理解“从项目类路径获取处理器”选项，它应该扫描类路径并自动找到所有注释处理器。

但是，这似乎不是那样工作的。我有一个将注释处理器添加到项目类路径（android 注释）的项目。When selecting "Obtain processors from project classpath", they are not executed. 我必须在“处理器路径”中明确指定它们才能使它们正常工作。

当我在 Maven 中运行构建时，会执行注释处理器。

这是 IntelliJ IDEA 中的错误还是我只是理解设置错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:07:16.540

IntelliJ 中的注释处理器存在问题。我已经提交了一个错误，他们在**IDEA 12.1**中修复了它：http:
[//youtrack.jetbrains.com/issue/IDEA-94749](http://youtrack.jetbrains.com/issue/IDEA-94749)

# iphone - 登录成功后如何去另一个ViewController

> ID：14031544
> 
> 赞同：0
> 
> 时间：2012-12-25T14:35:59.577
> 
> 标签：iphone, objective-c, uiviewcontroller, ios6

我是 iPhone 应用程序的新手。我已按照[**本教程**](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-receive-data-from-the-server-in-iphone/)从 iPhone 登录。

我有如下的php文件。

**索引.php**

```
<?php
$user = $_POST['uname'];

if ($user == 'user') {
    echo "Welcome to my site...";
} else {
    echo "Invalid User";
}
?> 
```

当我运行应用程序并输入用户名作为**用户**名和密码作为一些文本时，我得到的输出是**Welcome to my site** ...。

现在不是欢迎信息，我想进入我的欢迎屏幕，即我在故事板上的视图控制器。知道如何完成这项工作吗？

完整代码如下。

```
-(IBAction)buttonClick:(id)sender
{
    greeting.text= @"";
    NSString* username = nameInput.text;
    NSString* pass = passInput.text;
    greeting.hidden = NO;
    if([nameInput.text isEqualToString:@"" ] && [passInput.text isEqualToString:@""])
    {
        greeting.text = @"Please enter username and password.";
        [nameInput resignFirstResponder];
        [passInput resignFirstResponder];
        return;
    }

    if([nameInput.text isEqualToString:@"" ])
    {
        greeting.text = @"Please enter username.";
        [nameInput resignFirstResponder];
        [passInput resignFirstResponder];
        return;
    }

    if([passInput.text isEqualToString:@""])
    {
        greeting.text = @"Please enter password.";
        [nameInput resignFirstResponder];
        [passInput resignFirstResponder];
        return;
    }

    NSString *post = [[NSString alloc] initWithFormat:@"uname=%@&pwd=%@",username,pass];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSURL *url = [NSURL URLWithString:@"http://localhost:8888/PhPTesting/index.php"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPBody:postData];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        indicator.hidden = NO;
        webData = [[NSMutableData data] retain];
    }
    else
    {

    }

    [nameInput resignFirstResponder];
    [passInput resignFirstResponder];
    nameInput.text = nil;
    passInput.text = nil;
}
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [connection release];
    [webData release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    greeting.text = loginStatus;
    [loginStatus release];

    [connection release];
    [webData release];
    indicator.hidden = YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:53:26.507

你可以这样做 ：

```
if ([loginStatus isEqualToString:@"Welcome to my site..."]) {
    // Show welcome view controller
    NextViewController *nextViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"myNextView"];
    [self.navigationController pushViewController:nextViewController animated:YES];
} else {
    greeting.text = @"Login was not correct";
} 
```

这里，@"myNextView" 是 NextView 标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:48:37.520

你可以检查结果

```
if ([loginStatus isEqualToString:@"Welcome to my site..."]) {
    // Show welcome view controller
} else {
    greeting.text = @"Login was not correct";
} 
```

我还建议通过 PHP 返回一个更有帮助的字符串

* * *

## 更新

有大量的教程可以展示一个新的视图。

在这里查看：[在 Cocoa Touch 中以编程方式切换视图](https://stackoverflow.com/questions/370055/programatically-switching-views-in-cocoa-touch)

# class - 具有静态成员和访问器的类的大小

> ID：14031547
> 
> 赞同：0
> 
> 时间：2012-12-25T14:36:13.223
> 
> 标签：class, windows-phone-7, size

我有一个关于效率的问题。我正在为 Windows Phone 7 编写一个应用程序，并且非常关心内存，因为我使用的列表非常长。

我的问题是，除了使用 int、string 等普通属性之外，还具有静态 int 属性和上述静态字段的访问器属性的类的大小是多少？我需要使用静态字段，但无法使用数据绑定访问它，因此是我的问题。

一个例子：

```
private static int _property1;

public int Property1
{
    get { return _property1; }
}

public int property2;

public int property3; 
```

我将非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:49:21.670

这里有静态字段_property1，它将在类的所有实例之间共享，这意味着它只会创建一个_property1的副本，如果有人更改静态字段的值，它将反映到每个地方。因此，无论您需要限制其他用户设置/重置静态变量，它都会提高效率。

# javascript - Groovy 渲染为 JSON java.sql.timestamp 在 JavaScript 毫秒内不显示

> ID：14031548
> 
> 赞同：2
> 
> 时间：2012-12-25T14:36:22.663
> 
> 标签：javascript, json, grails, timestamp

我有一个`java.util.ArrayList`包含红色标记的值：![在此处输入图像描述](../Images/d321c7db0918c1a787502872be43fe29.png)

如果我在 JavaScript 中使用 then 渲染它，`render relations as JSON`则值如下： ![在此处输入图像描述](../Images/720d0954012fb04340f821c0e79a0c1b.png)

毫秒已经过去了，如果我理解正确的话，它的值`receiveDate`是一个字符串，所以没有办法将它解析为另一种格式。

有没有办法呈现毫秒没有消失的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T08:10:28.217

方法一

```
import grails.converters.JSON

def r = [now: new Date(), name: 'Roong']
JSON.registerObjectMarshaller(Date) {o -> o.getTime()}
println(r as JSON) 
```

结果 1

```
{
  "now": 1356595418027,
  "name": "Roong"
} 
```

或者您可以在 Config.groovy
方法 2中设置

```
grails.converters.json.date = "javascript" 
```

结果 2

```
{
  "now": new Date(1356595418027),
  "name": "Roong"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T02:26:14.967

您可以使用方法将丢失的部分保存到另一个键值对

```
java.sql.Timestamp.getNanos() 
```

并通过合并这两部分来恢复javascript中的完整值。例如：

```
String receiveDate = grails.converters.JSON.parse(jsonData).data[0].receiveDate
def formatDate = receiveDate.replace('Z','.'+ dt.getNanos().toString()).replace('T', ' ')
def tsDate = java.sql.Timestamp.valueOf(formatDate)
println 'The timestamp is : ' +  tsDate 
```

# android - 随着搜索栏的进展，在特定进度处触发事件 Android

> ID：14031550
> 
> 赞同：1
> 
> 时间：2012-12-25T14:36:34.270
> 
> 标签：android, audio, seekbar

我按照[本教程](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)创建了一个音频播放器。

现在**我想添加一些在玩家达到特定进度时触发事件的事件。** 例如，在当前音频的 00:32，显示 Toast。

界面应如下所示：

![在此处输入图像描述](../Images/7b799b0da8e4b0862f601a6449b2fda5.png)

白点代表这种情况下的事件。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:52:24.453

计算支持的音频文件的总持续时间，使用 getDuration() 方法，使用 getCurrentPosition() 方法来确定搜索栏是否已经达到您想要的点。相应地触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:27:59.977

我找到了伙计们，这是我的代码（效果很好）

```
private ImageView CreateWhiteDot(int time) {
    ImageView WhiteDot = new ImageView(getApplicationContext());
    float x = 0;
    float y = 0;
    WhiteDot.setImageResource(R.drawable.stop_dot_inactive);
    x = sbStopPlayerSlider.getX() + 15;
    x += ((sbStopPlayerSlider.getWidth() - 30) * time * 1000)
            / mpAudioPlayer.getDuration();
    WhiteDot.setX(x);
    y = sbStopPlayerSlider.getTranslationY()
            + sbStopPlayerSlider.getHeight() / 2;
    WhiteDot.setY(y);
    return WhiteDot;
} 
```

# java - 通用 DAO 的缺点？

> ID：14031551
> 
> 赞同：0
> 
> 时间：2012-12-25T14:36:49.303
> 
> 标签：java, design-patterns, dao

我想为我的应用程序创建一个 DAO 层。经过一番谷歌搜索，我发现很多人使用通用 DAO 方法（[不要重复 DAO！](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)）。

但我不喜欢这种方法。

如果我需要不同 DAO 实现的 DAO 之间的接口略有不同怎么办？（即通用接口中的方法与我想在我的 DAO 实现中创建的方法不完全相同）

如果我的实体的主键包含多个属性怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:43:25.757

如果您需要为特定实体稍微不同的 DAO，您总是可以扩展一个通用的（`MySpecificDAO <....> extends GenericDAO<....>)`。主键本身可以是复合的，但不可能有 2 个主键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:43:48.850

直接来自您链接到的文章：

> 扩展 GenericDAO
> 
> 当然，每个 DAO 的接口都基于 GenericDao 接口。我只需要将接口调整为特定的域类并将其扩展为包含我的查找器方法。在清单 6 中，您可以看到为特定目的扩展的 GenericDao 接口示例

关于你的最后一个问题：根据定义，一个实体只有一个主键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T14:56:18.677

缺点：你仍然需要实现 DAO。停止遵循 6 年前的建议，改用[Spring Data 存储库](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories)。然后您根本不必编写任何实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T14:47:06.863

> 如果我需要不同 DAO 实现的 DAO 之间的接口略有不同怎么办？

你可以覆盖你的`GenericDaoImpl`类中的方法。或创建一个新方法。

> 如果我的实体有 2 个或更多主键怎么办？

我猜你的意思是复合键场景。请注意，通常 findOne/readOne/getOne 方法`GenericDao`需要一个参数，`(T key)`这里的 T 是类型，它可以是复合主键。

例如：

```
class PersonPK{
 private String name;
 private Date birthday;
.....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T09:01:43.313

你可以在[这里找到一个通用 DAO](http://perfectjpattern.sourceforge.net/dp-genericdao.html)，它是那篇文章的工作和改进实现。只需检查页面底部的[Example.java 。](http://perfectjpattern.sourceforge.net/xref/org/perfectjpattern/jee/integration/dao/spring/Example.html)在此示例中，您可以看到如何定义“针对不同 DAO 实现的 DAO 之间略有不同的接口”。

# performance - 设计大规模的关系系统

> ID：14031552
> 
> 赞同：0
> 
> 时间：2012-12-25T14:36:49.807
> 
> 标签：performance, algorithm, database-design, scalability

我在扩展应用程序时遇到了一些困难，因此决定在这里提出一个问题。

考虑一个关系数据库（比如 mysql）。假设它允许用户发布帖子，并且这些帖子存储在`post`表中（具有字段：）`postid, posterid, data, timestamp`。因此，当您按新近度排序检索所有帖子时，您只需使用`posterid = you`和获取所有帖子`order by date`。很简单。

此过程将使用时间戳作为索引，因为它具有最高的基数并且正确。因此，除了查看索引之外，还需要从磁盘中提取 1 行来完成此任务。惊人的！

但是，假设自您上次发布以来，其他用户（在系统中）又发布了 100 万条帖子。然后，为了获取您的最新帖子，数据库将再次将索引与时间戳挂钩，并且我们不知道从那时起发生了多少帖子（或者我们至少应该手动估计并设置首选键）？然后我们浪费了查看一**百万**零一行只是为了获取一行。

此外，来自多个任意用户的一组帖子将是用例之一，因此我无法创建像 userid_timestamp 这样的字段来创建子索引。

我看错了吗？或者必须从根本上改变应用程序以允许这样的操作至少在某种程度上有效地发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:46:26.227

## 索引

如果你有一个查询：`... WHERE posterid = you ORDER BY timestamp [DESC]`，那么你需要一个关于**{posterid, timestamp}**的复合索引。

*   通过索引前沿（posterid）上的范围扫描来查找给定用户的所有帖子。
*   查找用户最旧/最新的帖子可以在单个索引查找中完成，这与 B-Tree 高度成正比，与 log(N) 成正比，其中 N 是索引行数。

要了解原因，请查看[Anatomy of an SQL Index](http://use-the-index-luke.com/sql/anatomy)。

## 聚类

“正常”B-Tree 索引的叶子持有指向索引行的“指针”（物理地址），而行本身驻留在称为“表堆”的单独数据结构中。可以通过将行直接存储在 B-Tree 的叶子中来消除堆，这称为[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)。这有其优点和缺点，但如果您有一种主要的查询类型，那么通过集群消除表堆访问绝对是值得考虑的事情。

在这种特殊情况下，可以像这样创建表：

```
CREATE TABLE T (
    posterid int,
    `timestamp` DATETIME,
    data VARCHAR(50),
    PRIMARY KEY (posterid, `timestamp`)
); 
```

MySQL/InnoDB[对它的所有表进行集群](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，并使用主键作为集群键。我们没有使用代理键 ( `postid`)，因为聚簇表中的二级索引可能很昂贵，而且我们已经有了自然键。如果您[确实需要](https://stackoverflow.com/a/13964847/533120)代理键，请考虑将其设为备用键并保持通过自然键建立的集群。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:35:55.153

对于像这样的查询

```
where posterid = 5
order by timestamp 
```

或者

```
where posterid in (4, 578, 222299, ...etc...)
order by timestamp 
```

建立一个索引，`(posterid, timestamp)`数据库应该自己选择它。

编辑 - 我刚刚用 mysql 试过这个

```
CREATE TABLE `posts` (
    `id` INT(11) NOT NULL,
    `ts` INT NOT NULL,
    `data` VARCHAR(100) NULL DEFAULT NULL,
    INDEX `id_ts` (`id`, `ts`),
    INDEX `id` (`id`),
    INDEX `ts` (`ts`),
    INDEX `ts_id` (`ts`, `id`)
)
ENGINE=InnoDB 
```

我用大量数据填充它，并且

```
explain
select * from posts where id = 5 order by ts 
```

选择`id_ts`索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:31:13.120

假设您使用哈希表来实现您的数据库 - 是的。哈希表没有排序，除了迭代所有元素以找到最大值之外别无他法。

但是，如果您使用一些有序的 DS，例如[B+ 树](http://en.wikipedia.org/wiki/B+_tree)（实际上对磁盘和数据库进行了优化），情况就不同了。

您可以将元素存储在按用户（主要顺序/比较器）和日期（次要比较器，降序）排序的 B+ 树中。一旦有了这个 DS，就可以在`O(log(n))`磁盘寻道中找到第一个元素，方法是找到与主要条件（用户 ID）匹配的第一个元素。

我不熟悉数据库的实现，但是 AFAIK，其中一些确实允许您基于 B+ 树创建*索引- 通过这样做，您可以更有效地找到用户的最后一篇文章。*

* * *

附言

确切地说，“最大”元素或排序的概念在**[*关系代数*](http://en.wikipedia.org/wiki/Relational_algebra)**中没有得到很好的定义。没有最大运算符。要获得`R`具有单列的表的最大元素，`a`实际上应该创建该表的*笛卡尔积*并找到该条目。严格关系代数中没有 max 和 sort 运算符（尽管它确实存在于 SQL 中）

```
(Assuming set, and not multiset semantics):
MAX = R \ Project(Select(R x R, R1.a < R2.a),R1.a) 
```

# jquery - 使用 jqplot 标记特定数据

> ID：14031554
> 
> 赞同：1
> 
> 时间：2012-12-25T14:37:09.380
> 
> 标签：jquery, canvas, jqplot

我有一个 jqplot 折线图，显示用户按日期计数。

我希望在特定日期添加一条标记线，描述我更新应用程序的时间，以便查看应用程序更改是否会产生任何影响。有任何想法吗？

[这](http://www.jqplot.com/tests/line-charts.php)是一个例子 看上面的图表。

**我希望在 x=3 上添加带有标签的垂直线。我该怎么做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:16:26.070

这在很大程度上是一个 hack，但我发现 jqplot 当你想要做一些“正常”的事情时非常不灵活：

```
$(document).ready(function(){
    plot1 = $.jqplot ('chart1', [[3,7,9,1,4,6,8,2,5],[]], // leave an empty series at the end
    {
      series: [{ 
        showMarker:true
      },
      { 
        showMarker:false,
          pointLabels: { show:true, location: 'ne' } // do not show marker, but do show point label
      }]
  });
  plot1.series[1].data = [[2,plot1.axes.yaxis.min],[2,plot1.axes.yaxis.max]]; //dynamically add the data for the empty series, we do this so we can get the auto-scaled yaxis min/max
  plot1.redraw(); // redraw the plot with adjusted 2nd series
  $('.jqplot-point-label.jqplot-series-1.jqplot-point-0').html('x=2'); // manually adjust the label on the 2nd series (I could not find a way to do this with the builtin methods)

})​ 
```

产生：

![在此处输入图像描述](../Images/1df106337bcdaaf2c42d39762604f679.png)

[这里](http://jsfiddle.net/JWhmQ/1271/)的例子。

# django - 自定义 django 评论表单

> ID：14031556
> 
> 赞同：0
> 
> 时间：2012-12-25T14:37:38.123
> 
> 标签：django, django-comments

我使用 django 中的默认评论表单作为文档。但是像“name”、“url”这样的标签不适合我的需要。我需要它们变成中文。如何更改这些标签以及如何使用评论自定义表单框架？请帮助我。非常感谢。 ![我博客的评论页面](../Images/11505bf7ac4a9e990d481a3a6bf14419.png)

我自定义了表格，但它不起作用。

```
form.py:
class CommentFormmodels(CommentForm):
    name          = forms.CharField(label=("姓名"), max_length=50)
    email         = forms.EmailField(label=("Email address"))
    url           = forms.URLField(label=("个人站点")`enter code here`, required=False)
    comment       = forms.CharField(label=('评论'), widget=forms.Textarea,
        max_length=COMMENT_MAX_LENGTH)
    def get_comment_model(self):
        return CommentForm
    def get_comment_create_data(self):
        data = super(CommentFormmodels,self).get_comment_create_data()
        data['name']=self.cleaned_data['name']
        data['email'] = self.cleaned_data['email']
        data['url'] = self.cleaned_data['url']
        data['comment'] = self.cleaned_data['comment']
        return data
__init__.py:
from comment.forms import CommentFormmodels 

def get_fom():
    return CommentFormmodels 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:50:08.313

[https://docs.djangoproject.com/en/1.4/ref/contrib/comments/custom/](https://docs.djangoproject.com/en/1.4/ref/contrib/comments/custom/)

您需要创建您的评论应用程序，从 CommentForm 创建新表单并更改其中的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:38:06.440

看看标签部分： [https ://docs.djangoproject.com/en/dev/ref/forms/fields/#label](https://docs.djangoproject.com/en/dev/ref/forms/fields/#label)

# java - 在 IntelliJ 中添加 SDK 时遇到问题

> ID：14031562
> 
> 赞同：3
> 
> 时间：2012-12-25T14:38:08.043
> 
> 标签：java, android, intellij-idea

我无法将我的 SDK 放入我的 IntelliJ 项目。我似乎无法找到正确的路径或其他东西。这是我正在使用的路径，其中包含所有包。我尝试添加许多路径，包括“sdk”文件夹和“源”，但它一直不接受该路径，我收到的一条消息是它“不是有效的 SDK 路径”。

我似乎无法弄清楚正确的路径应该是什么......

![在此处输入图像描述](../Images/6360ae284a5fd9f75d7250fc1ed1db60.png)

我的 SDK 管理器：

![在此处输入图像描述](../Images/7f23d672e62baaf40c280abf2d4e4e4e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:43:20.693

您需要指定 Java SDK 和 Android SDK。

[由于一个错误](http://youtrack.jetbrains.com/issue/IDEA-96256)，您必须先定义 JDK（如`c:\Program Files (x86)\Java\jdk1.6.0_37`）。

然后通过指向它的根来定义 Android SDK（在你的情况下它是`sdk`文件夹）。

# php - 在 PHP 中自动重定向页面

> ID：14031569
> 
> 赞同：10
> 
> 时间：2012-12-25T14:40:28.393
> 
> 标签：php, html, http

我想在 PHP 中自动重定向页面

注销.php：

```
<?php 
  include "base.php"; 
  $_SESSION = array(); session_destroy();
?>
<meta http-equiv="refresh" content="=0;URL=index.php" /> 
```

其中 base.php 调用数据库并启动会话：

```
<?php
  session_start();  
  $dbhost = "localhost";
  $dbname = "login";
  $dbuser = "root";
  $dbpass = "";
  mysql_connect($dbhost, $dbuser, $dbpass) or die("MySQL Error: " . mysql_error());  
  mysql_select_db($dbname) or die("MySQL Error: " . mysql_error());  
?> 
```

按注销时，我没有回到`index.php`.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-25T14:46:24.653

据我所知，，`HTML`并`JavaScript`提供`PHP`自己的页面/标题重定向方式。以下是三个示例，展示了如何重定向到`http://google.com`

### #`JavaScript:`

```
<script type="text/javascript">
    window.location = "http://google.com";
</script> 
```

### #`HTML:`

```
<meta http-equiv="refresh" content="0; URL='http://google.com'"/> 
```

> `Note`, 中的 0`content="0;`是秒的值。它告诉浏览器在开始重定向之前应该等待多少秒。

### #`PHP:`

```
<?php

header('Location: http://www.google.com'); 
```

> `Note`[`header()`](http://php.net/manual/en/function.header.php)在向浏览器输出任何内容之前，必须*始终*放置一个 PHP ；甚至是一个空的空间。否则会导致臭名昭著的“ [header already sent](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php) ”错误。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-25T14:42:10.830

这应该工作，你有一个额外的`=`之前`0`：

```
<meta http-equiv="refresh" content="0;URL=index.php" /> 
```

链接[https://en.wikipedia.org/wiki/Meta_refresh](https://en.wikipedia.org/wiki/Meta_refresh)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-25T14:42:59.207

你可以把它放在你的 PHP 代码上：

```
header('Location:index.php'); 
```

请注意，根据所有[headers](http://php.net/manual/en/function.header.php)，这必须放在任何输出之前（甚至是空格）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-25T14:53:03.323

元刷新语法略有错误

```
<meta http-equiv="refresh" content="0;URL='<?php echo $_SERVER['HTTP_HOST']; ?>/index.php'"> 
```

更多细节在这里 [http://en.wikipedia.org/wiki/Meta_refresh](http://en.wikipedia.org/wiki/Meta_refresh)

更简洁的方法是发送一个 http 重定向标头

更多细节在这里 [http://en.wikipedia.org/wiki/HTTP_301](http://en.wikipedia.org/wiki/HTTP_301)

注销.php

```
<?php
..
session_destroy();
header( 'HTTP/1.1 301 Moved Permanently');
header( 'Location: ' . $_SERVER['HTTP_HOST']  . '/index.php' );
exit(0); 
```

关于重定向中的绝对 URI，W3C 说

14.30 地点

> Location response-header 字段用于将接收者重定向到 Request-URI 以外的位置，以完成请求或识别新资源。对于 201（已创建）响应，位置是请求创建的新资源的位置。对于 3xx 响应，位置应该指示服务器的首选 URI，用于自动重定向到资源。字段值由单个绝对 URI 组成。
> 
> ```
>  Location       = "Location" ":" absoluteURI 
> ```
> 
> 一个例子是：
> 
> ```
>  Location: http://www.w3.org/pub/WWW/People.html 
> ```

来源：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-27T16:44:32.957

如果您需要使用 PHP 变量重定向网页，您可以这样做：`$user[0]`PHP 变量在哪里。这样下一个网页`user.php`就可以得到变量的值了。

```
header('Location:./user.php?u_id='.$user[0]); 
```

或者

```
header("Location:./user.php?u_id=$user[0]"); 
```

# visual-studio-2010 - 将对话框项分组到单个“组”（Visual Studio）

> ID：14031580
> 
> 赞同：0
> 
> 时间：2012-12-25T14:42:57.677
> 
> 标签：visual-studio-2010, visual-studio, winapi, visual-c++, dialog

我想创建一个对话框窗口来更改应用程序的设置。下面是 Adob​​e Reader 的屏幕截图。使用 Spy++ 后，我猜想：

*在右侧，所有控件（按钮、组合框...等）都属于一个 GroupBox。*

*对于左侧TreeView控件中的每个类别，都有一个对应的GroupBox，将与该类别相关的所有控件分组。*

*当用户在不同的类别之间进行选择时，它会隐藏一个 GroupBox 并显示另一个 GroupBox。*

但是在下面的源代码（xxx.rc，资源文件）中，我没有看到可以指定对话框项的“父级”的任何地方。

即使我用“资源视图”（不被视为代码）打开 xxx.rc，我也找不到任何选项来在其属性页中指定对话框项的父项。

我想知道如何在 .rc 文件中将父级（在我的情况下是 GroupBox）分配给对话框项，或将对话框项分组到单个组，即创建对话框项时。（我想可以通过修改 .rc 文件来做到这一点。）

```
GROUPBOX        "View",IDC_SECTION_VIEW,101,6,228,88
LTEXT           "Default &Layout:",IDC_DEFAULT_LAYOUT_LABEL,107,19,108,9
COMBOBOX        IDC_DEFAULT_LAYOUT,215,17,108,64,CBS_DROPDOWNLIST | WS_TABSTOP
LTEXT           "Default &Zoom:",IDC_DEFAULT_ZOOM_LABEL,107,36,108,9
COMBOBOX        IDC_DEFAULT_ZOOM,215,34,108,149,CBS_DROPDOWN | WS_TABSTOP
CONTROL         "Show the &bookmarks sidebar when available",IDC_DEFAULT_SHOW_TOC,
                "Button",BS_AUTOCHECKBOX | WS_TABSTOP,107,53,216,9
...
...
... 
```

![在此处输入图像描述](../Images/da6ef86cfc7702678412836511b27384.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T14:49:25.687

> 我想知道如何分配父母...

[`SetParent`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541%28v=vs.85%29.aspx)视窗 API。您提供`HWND`您的控制权和假定的新父级的句柄。

在资源脚本中，控件将是对话框本身的子项，但在运行时您可以自由更改它并将它们分组到您感兴趣的层次结构中。

您可能还想考虑将假定的子组放入单独的对话框模板中并将其作为“复合控件” - 单独实例化并成为更高级别对话框的子级。

UPD。看看这个简单的项目 (C++/ATL)：[AtlChildDialog](http://www.alax.info/trac/public/browser/trunk/Utilities/Miscellaneous/AtlChildDialog)。特别是，[在主对话框的 WM_INITIDIALOG 处理程序中](http://www.alax.info/trac/public/browser/trunk/Utilities/Miscellaneous/AtlChildDialog/MainDlg.h#L44)：

```
ATLVERIFY(m_ChildDialog.Create(m_hWnd, (LPARAM) this));
ATLVERIFY(m_ChildDialog.MoveWindow(50, 50, 200, 150));
m_ChildDialog.m_EditWindow.SetWindowText(_T("Some Text"));
m_ChildDialog.ShowWindow(SW_SHOWNORMAL);
m_ChildDialog.SetFocus(); 
```

![IDD_MAIN](../Images/82ad6e9cff4a8b4bffa5a7dd8986d699.png)

![IDD_CHILD](../Images/b218195a479d5c734ced1b2eadfac2b3.png)

在运行时一起：

![运行](../Images/3dfcf2875f28597d1e9034570c28cb51.png)

# sql - Oracle SQL 中触发器的 If Else 条件

> ID：14031593
> 
> 赞同：3
> 
> 时间：2012-12-25T14:44:27.360
> 
> 标签：sql, database, oracle, triggers

我有两张桌子。它们是

```
CARD(cardid, credit, usertype,charge) 
```

和

```
PAYMENTDEVICE(paydevid, paydevip,paydevdate, paydevtime, chargedcardid, mealtype). 
```

膳食类型可以是“客人”或“标准”。当在支付设备中插入新行时，我想更新卡表中的信用。费用取决于用户类型。但是如果用餐类型是客人，每个人都必须支付5美元。我尝试使用以下代码

```
CREATE OR REPLACE TRIGGER  "TRG_PAYMONEY" 
AFTER INSERT
ON PAYMENTDEVICE FOR EACH ROW

BEGIN
UPDATE CARD
WHERE CARDID = :NEW.CHARGEDCARDID
SET CREDIT = 
(CASE MEALTYPE

WHEN "STANDARD" THEN CREDIT - CHARGE
WHEN "GUEST" THEN CREDIT - 5
END);
END; 
```

但我得到这个错误： `PL/SQL: ORA-00971: missing SET keyword, PL/SQL: SQL Statement ignored`。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:47:42.317

按照此语法进行更新，

```
update table_name set field1='value' where field2='value' 
```

（IE）

```
UPDATE CARD
SET CREDIT = 
(CASE MEALTYPE
WHEN "STANDARD" THEN CREDIT - CHARGE
WHEN "GUEST" THEN CREDIT - 5
END)
 WHERE CARDID = :NEW.CHARGEDCARDID; 
```

有关更多信息，`'update'`声明的工作方式请参阅此文档，

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/update_statement.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/update_statement.htm)

对于你的第二个错误，试试这个，

```
UPDATE CARD
SET CREDIT = 
(CASE 
WHEN MEALTYPE="STANDARD" THEN CREDIT - CHARGE
WHEN MEALTYPE="GUEST" THEN CREDIT - 5
END MEALTYPE) 
 WHERE CARDID = :NEW.CHARGEDCARDID; 
```

像这样的东西，

```
update card c
set c.credit=(select case when p.mealtype='STANDARD' then c.credit-c.charge
                 when p.mealtype='GUEST' then c.credit-5
            end credit from PAYMENTDEVICE p
           where c.cardid=p.chargedcardid) 
```

[小提琴演示](http://sqlfiddle.com/#!4/309cd/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:47:29.687

您的更新声明应该是（`WHERE`应该是之后`SET`）

```
UPDATE CARD
SET CREDIT = 
(CASE MEALTYPE

WHEN "STANDARD" THEN CREDIT - CHARGE
WHEN "GUEST" THEN CREDIT - 5
WHERE CARDID = :NEW.CHARGEDCARDID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:10:54.270

请运行此代码..

```
CREATE OR REPLACE TRIGGER TRG_PAYMONEY1
AFTER INSERT ON PAYMENTDEVICE 
FOR EACH ROW
BEGIN
UPDATE CARD c
SET c.credit=(select case when p.mealtype='STANDARD' then c.credit-c.charge
                 when p.mealtype='GUEST' then c.credit-5
            end result from PAYMENTDEVICE p,card c
           where c.cardid=p.chargedcardid)
WHERE CARDID = :NEW.CHARGEDCARDID;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T21:11:04.703

好吧，经过一些研究并感谢 [Oracle 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm)，我们通过这个实现解决了我们的问题：

```
CREATE OR REPLACE TRIGGER  "TRG_PAYMONEY" 
AFTER INSERT
ON PAYMENTDEVICE FOR EACH ROW

BEGIN
IF :NEW.MEALTYPE='GUEST' THEN
UPDATE CARD
SET CREDIT = CREDIT - 5
WHERE CARDID = :NEW.CHARGEDCARDID;
ELSE
UPDATE CARD
SET CREDIT = CREDIT - CHARGE
WHERE CARDID = :NEW.CHARGEDCARDID;
END IF;
END; 
```

并感谢您的帮助和建议。

# grails - 如何使用 taglib 在延迟位置声明外部 js？

> ID：14031597
> 
> 赞同：2
> 
> 时间：2012-12-25T14:44:52.727
> 
> 标签：grails, resources

我需要在`defer`“位置”中声明外部 js。我认为这
`<r:external uri="http://cdn.connect.mail.ru/js/loader.js" disposition="defer"/>`会起作用，但它只是`<script...`在调用它的地方放置代码。

如何使用 taglib 在延迟位置声明外部 js？

Grails 2.0+，资源插件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T23:14:08.747

正如您所描述的，不幸的是 r:external 标记似乎不尊重 JavaScript 的默认配置，即“延迟”。此外，根据文档，[r:external](http://grails-plugins.github.com/grails-resources/ref/Tags/external.html)标记不提供“处置”属性来明确声明这一点。[r:script](http://grails-plugins.github.com/grails-resources/ref/Tags/script.html)
标记正确地 将脚本放置在正文的底部，但它不提供“src”属性，因为它仅用于“内联”JavaScript。

我认为解决这个缺失功能​​的最好方法是在 ApplicationResources.groovy 文件中定义一个资源模块

```
modules = {
    ...
    mail_loader {
        resource url: "http://cdn.connect.mail.ru/js/loader.js"
    }
    ... 
```

然后使用您的 TagLib 要求它。

```
out << r.require(module: "mail_loader") 
```

如前所述，JavaScript 资源的默认配置是“延迟”，因此您无需在您的案例中显式定义配置。

# jsf - URL 编码和 JSF 重定向

> ID：14031598
> 
> 赞同：0
> 
> 时间：2012-12-25T14:45:24.677
> 
> 标签：jsf, url, urlencode, urldecode

我必须在 url 中有 utf-8 个字符。

例如有一个字符串要放在 url 中：

“海兰力克”

我想编码它：

```
try{
        selected=URLEncoder.encode(selected,"UTF-8");
    }catch(Exception e){
        e.printStackTrace();
    }
    try {
        FacesContext.getCurrentInstance().getExternalContext().redirect("http://" + serverUrl +"/myjsfpage.jsf?param=" + selected );
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    } 
```

我调试它，我看到一个预期的字符串：Hayranl%C4%B1k%24

在另一个控制器中，我必须处理它，所以我通过

```
HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();

        String selected = (String)req.getParameter("param");

        if(selected ==null){
            //show no result message
            return;
        } 
```

之后我尝试对其进行解码，但是“在”解码之前，我从 url 获得的字符串类似于“HayranlÄ±k$”。

```
try{
        selected=URLDecoder.decode(selected,"UTF-8");
    }catch(Exception e){
        e.printStackTrace();
    } 
```

JSF 重定向会导致问题，还是浏览器 URL 处理问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:26:14.493

解码 HTTP 请求参数的是 servletcontainer 本身。你不需要也不应该这样做`URLDecoder`。用于 HTTP 请求参数解码的字符编码需要在 servletcontainer 配置中配置 GET 请求。

目前尚不清楚您使用的是哪一个，但根据您的问题历史，它是 Tomcat。在这种情况下，您需要将Tomcat 中 element的`URIEncoding`属性设置为.`<Connector>``/conf/server.xml``UTF-8`

```
<Connector ... URIEncoding="UTF-8"> 
```

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

**与具体问题无关**，在 JSF 中拉取请求参数的方式有些笨拙。以下更简单，并且不会在您的 JSF 托管 bean 中引入 Servlet API 依赖项：

```
String selected = externalContext.getRequestParameterMap().get("param"); 
```

或者，如果您在请求范围的 bean 中，只需通过`@ManagedProperty`.

```
@ManagedProperty("#{param.param}")
private String param; 
```

*（请注意，这`#{param}`是一个引用请求参数映射的隐式 EL 对象，并且`#{param.param}`仅返回`map.get("param")`；您可能希望更改参数名称以使其更清晰，例如`"?selected=" + selected`then `#{param.selected}`）*

或者，如果您在视图范围的 bean 中，只需将其设置为`<f:viewParam>`.

```
<f:viewParam name="param" value="#{bean.param}" /> 
```

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)

# c# - 上传没有版本1图像的更新版本

> ID：14031600
> 
> 赞同：1
> 
> 时间：2012-12-25T14:45:35.707
> 
> 标签：c#, deployment, visual-studio-2012, clickonce, publishing

视觉工作室 2012 - C#

我在网站上发布了我的项目并启用了更新功能。该项目包括大约 1500 张图像。需要很长时间才能将它们全部上传到服务器上。但是，在将来的更新中，图片文件不会更改。如何上传没有所有图像的更新版本，以便用户可以自动更新应用程序启动？

编辑：发布作品，但是，在每个版本上，所有图片都再次上传

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:50:36.043

如果您使用 ClickOnce 部署，您可以使用非常有用的工具开发自己的部署包：

[引导程序清单生成器](http://archive.msdn.microsoft.com/bmg)

将您的图像放在一些 SFX 存档中（例如）并开发您自己的包并为其设置条件（以防止它每次都被下载到客户端）并将这个新包设置为您的应用程序的先决条件，现在，客户端应该按“安装”按钮而不是“午餐”链接来运行您的应用程序并将这个包安装到那里的机器上。

# python - 在 python 中使用时区转换 ISO 8601 日期格式

> ID：14031601
> 
> 赞同：1
> 
> 时间：2012-12-25T14:45:47.307
> 
> 标签：python, datetime, iso8601

我正在尝试将以下日期 (2012-12-25T08:52:00-05:00) 转换为 python 中的日期时间对象。但是，我无法弄清楚日期的**-05:00**部分是指什么。我只是想执行以下操作：

```
datetime.datetime.strptime('2012-12-25T08:52:00-05:00','%Y-%m-%dT%H:%M:%S') 
```

但这会产生预期的“ **ValueError：未转换的数据仍然存在**”。我只是想弄清楚日期的最后一部分用于什么，以便我可以将该字符串转换为 python 中的正确日期时间对象。

节日快乐！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:01:20.267

您的日期似乎是[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式，我不认为`datetime`处理字符串格式末尾的时区信息。

您可以使用`pip install python-dateutil`，它的解析器可以返回一个`datetime`对象：

```
import dateutil.parser
datestr = '2012-12-25T08:52:00-05:00'
dateutil.parser.parse(datestr)
>>> datetime.datetime(2012, 12, 25, 8, 52, tzinfo=tzoffset(None, -18000)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:49:02.127

指示与 UTC的`-05:00`时区偏移量，即`%z`解析它的正确 strptime 参数。

如果时间是 UTC，则偏移量可能会使用 来表示`Z`，例如`2012-12-25T08:52:00Z`。不知道是否`%z`真的会接受这个......

# iphone - 如果为 0，则从字符串中删除第一个字符

> ID：14031603
> 
> 赞同：27
> 
> 时间：2012-12-25T14:46:16.290
> 
> 标签：iphone, objective-c, xcode

`UITextfield`如果它是 0 ，我需要从我的第一个字符中删除它。

不幸的是，我不知道如何提取第一个字符的值或提取第一个字符之后的字符串字符。

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-25T14:48:05.470

一种解决方案可能是：

```
if ([string hasPrefix:@"0"] && [string length] > 1) {
    string = [string substringFromIndex:1];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T14:50:29.050

你可能想要这样的东西，使用[hasPrefix：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/hasPrefix%3a)

```
if ([string hasPrefix:@"0"]) {
    string = [string substringFromIndex:1];
} 
```

您还可以使用[characterAtIndex:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/characterAtIndex%3a)它返回一个 unichar：

```
if ([string characterAtIndex:0] == '0') {
     string = [string substringFromIndex:1];
} 
```

注意，'a' 是字符，"a" 是 C 字符串，@"a" 是 NSString。它们都是不同的类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-17T22:41:59.433

斯威夫特 3.0：

```
var myString = "Hello, World"
myString.remove(at: myString.startIndex)

myString // "ello, World" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-05T09:57:10.903

**斯威夫特 3**

hasPrefix("0") 检查txtField中的第一个字符是否为0并将其删除

```
if (self.txtField.text?.hasPrefix("0"))! {         
    self.txtField.text?.remove(at(self.txtField.text?.startIndex)!)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-15T06:09:53.333

**SWIFT 5.0** 您可以使用以下序列函数来检查字符串是否以“0”开头

```
if search.starts(with: "0") {                                            
        search.remove(at: search.startIndex)                                      
        print("After Trim search is",search)                                                   
} else {                                                                 
        print("First char is not 0")                                                           
} 
```

> 用您当前的变量名替换字符串变量。我希望这可以帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T17:48:31.707

While 循环保持删除第一个字符，只要它为零

```
while (self.ammountTextField.text?.hasPrefix("0"))! {     
   self.ammountTextField.text?.remove(at: (self.ammountTextField.text?.startIndex)!)
} 
```

# asp.net - 在 Wordpress 中运行 asp.net 代码

> ID：14031610
> 
> 赞同：0
> 
> 时间：2012-12-25T14:47:15.707
> 
> 标签：asp.net, wordpress, optimization

我在 asp.net 中写了一些简单的代码：

```
Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        If TextBox1.Text = "30%off" Then
            Response.Redirect("http://www.google.com")
        Else
            MsgBox("Please Enter a Valid Coupon!")
        End If
    End Sub
End Class 
```

现在我所做的是来自我得到的调试输出的来源：

```
<form method="post" action="Default.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="OsC7M9VmZwGOYizZOWtmabCIp4X2NQYfYRFcdzfKSxsD49xOULNCTlEoDVRN+YXcWGszYY8WFsSxjzPjpz2y7ibXajRjMSlVqKd6QRRLU8A=" />
</div>

<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="7ypvqvaBZUfanEsFUMFtxAPFZCwRdYQbqGVJokLWdjwcfQ7ZvJx3zMwTvTvPmbzwDzuI6vbSwPSJhS4u5RX6OZHOxyXMabjHe+TtQ//Ium5NXK/5orWrR3k5816LVHY+CBovAFHhcndnueiaWFcrxQ==" />
</div>
    <div>

    &nbsp;<span id="Label1">PROMOTION CODE :</span>
        <input name="TextBox1" type="text" id="TextBox1" style="height:16px;width:211px;margin-left: 3px; margin-bottom: 0px" />
        <input type="submit" name="Button1" value="Enter" id="Button1" style="width:101px;margin-left: 1px" />

    </div>
    </form> 
```

现在我想做的只是将它作为一个片段粘贴到 Wordpress 中。但是，当我粘贴代码并按下提交按钮时，我得到一个 404 未找到；有没有办法像运行 iframe 等？

# security - 在会话密钥中存储密码哈希

> ID：14031611
> 
> 赞同：0
> 
> 时间：2012-12-25T14:47:22.250
> 
> 标签：security, session, hash, passwords

我遇到了需要在会话密钥中存储散列密码的情况。密码通过 bcrypt 散列。

将散列密码存储在会话密钥中是否安全？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:45:00.373

这取决于会话数据的存储位置以及谁可以访问该存储。

默认情况下，[PHP 将会话数据存储](http://php.net/manual/en/session.configuration.php#ini.session.save-handler)[在服务器上其他用户可以读取的](http://php.net/manual/en/session.configuration.php#ini.session.save-path)文件中。因此，如果您在共享服务器上，其他用户很可能也可以访问您的会话文件。由于会话数据基本上只是`$_SESSION`数组的序列化形式，任何有权访问物理会话文件的人都可以读取和/或写入会话数据。

# c# - 我可以等到创建文件以便使用 FileSystemWatcher 处理此文件吗？

> ID：14031612
> 
> 赞同：1
> 
> 时间：2012-12-25T14:47:27.887
> 
> 标签：c#

我的应用程序正在监听目录，并且创建的每个新文件都需要处理，所以我做了一个测试并监听我的文件夹，看看如果我将大文件移动到这个文件夹中，事件会在整个文件创建之前触发，这可以导致我的问题。我可以等到创建所有文件吗？

```
public void startListener(string directoryPath)
{
    FileSystemWatcher watcher = new FileSystemWatcher(directoryPath);
    watcher.Filter = "*.avi";
    watcher.Created += watcher_Created;
    watcher.EnableRaisingEvents = true;
}

void watcher_Created(object sender, FileSystemEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T14:56:16.997

According the the [MSDN docs](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.onchanged.aspx), multiple `OnCreate()` and `OnChanged()` events may be generated when a file is copied from one directory to another.

We need to distinguish two cases here:

*   You are copying the file yourself, so you have control over how the copying is done.

    In this case, it's most efficient to use a temporary filename in the desired folder which does not have the `.avi` extension (you could for instance use `filename.avi.tmp` instead of `filename.avi`), then rename it to the correct name with the `.avi` extension when you're done copying.

    Then, you subscribe to the `Renamed` event and watch for files that are renamed to `.avi`.

*   If you don't have any control over the copying, then you could use one of the techniques described in [another answer to this question](https://stackoverflow.com/a/14032035/1703377)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:46:48.977

我认为您可以做的是`OnCreated`通过将“新创建的”文件添加到本地来处理事件`List`。

然后在`OnChanged`更新片段时触发，检查文件是否在新创建的列表中，并尝试以独占方式打开文件，执行以下操作：

```
File.Open("someFile.avi", FileMode.Open, FileAccess.Read, FileShare.None) 
```

如果您得到一个`IOException`，则该文件仍在使用中。

您可以做的另一件事在此评论中描述，使用重命名事件： [https ://stackoverflow.com/a/5894697/1373170](https://stackoverflow.com/a/5894697/1373170)

事实上，整个 SO 问题可能对您有用： [C# FileSystemWatcher，如何知道文件完全复制到监视文件夹中](https://stackoverflow.com/questions/4277991/c-sharp-filesystemwatcher-how-to-know-file-copied-completely-into-the-watch-fol)

# javascript - 用于在 Google 地图上绘制树的 JS 库

> ID：14031615
> 
> 赞同：0
> 
> 时间：2012-12-25T14:47:38.073
> 
> 标签：javascript, google-maps-api-3

是否有任何用于在谷歌地图 APIv3 中创建、绘制和维护二叉树的 JS 库？

# python - 在 PyDev(Eclipse) 中设置 SL4A

> ID：14031622
> 
> 赞同：0
> 
> 时间：2012-12-25T14:48:23.797
> 
> 标签：python, eclipse, pydev, sl4a

我正在使用 sl4a。我选择远程使用我的笔记本电脑。我按照以下说明进行操作，一切正常。

```
1.copy 'android.py' into site-packages of python
2.start private server in sl4a
3.adb forward tcp:9999 tcp:58755
4.export AP_PORT=9999
5.work with python from terminal 
```

现在我想在eclipse中的pydev而不是mac osx终端上工作。如何在eclipse（pydev）中设置上述配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T07:28:15.057

相同的基本方法适用于带有 PyDev 的 Eclipse：

1.  打开一个新的工作区。

2.  为 Python 配置解释器，但转到“环境”选项卡并设置 AP_PORT=9999（或您使用的任何端口号）。

如果需要，您还可以执行此每次运行配置。

然后您可以像往常一样编写代码，尽管内容辅助对于大多数 SL4A API 都不起作用。

还请记住，在创建要使用的项目时，您应该将 Python 语法版本设置为 2.6（因为这是目前 SL4A 支持的最高版本）。

# phpstorm - 崩溃后PHPStorm无法使用

> ID：14031624
> 
> 赞同：5
> 
> 时间：2012-12-25T14:48:33.597
> 
> 标签：phpstorm

今天 PHPStorm 在一些 Javascripting 中突然崩溃了。

重新启动后，没有任何效果：我无法打开首选项或文件。

文件不再与编辑器关联：

![在此处输入图像描述](../Images/0998252bc93549dc5f71efbcc078e4ed.png)

我重新启动了我的 MAC 并重新安装了 PHPStorm - 不走运。由于后者确实记得我的注册详细信息，我认为我在删除 PHPStorm 时遗漏了一些东西。

我完全不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T15:01:51.773

很可能配置/插件文件已损坏，您可以删除或重命名以下目录以使用默认值开始：

*   **设置**：`~/Library/Preferences/WebIde50`
*   **缓存**：`~/Library/Caches/WebIde50`
*   **插件**：`~/Library/Application Support/WebIde50`

在其他系统上遇到类似问题或使用不同基于 IntelliJ IDEA 平台的产品的其他用户可以参考[此文档](http://devnet.jetbrains.net/docs/DOC-181)以查找这些文件夹在其系统上的位置。

# android - Android maven 安装因外部项目而失败

> ID：14031627
> 
> 赞同：1
> 
> 时间：2012-12-25T14:48:43.020
> 
> 标签：android, maven

这是我的项目 POM.XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycomp</groupId>
    <artifactId>abc</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>apk</packaging>
    <name>xyx</name>

    <dependencies>
        <dependency>
            <groupId>org.springframework.android</groupId>
            <artifactId>spring-android-rest-template</artifactId>
            <version>1.0.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.8</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>20030203.000129</version>
        </dependency>

        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>4.1.1.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
        </dependency>

    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src/main/java</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.1.1</version>
                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <platform>16</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

现在在我的 Android 项目中，我添加了一个不基于 maven 的外部项目。现在当我执行 mvn3 install 我得到一个

> 无法执行目标 com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources (default-generate-sources) MojoExecutionException: ANDROID-040-001: 无法执行：Command = /bin/sh -c 等

现在我在命令行中运行上面的命令，它抱怨它找不到属于我的外部项目的属性。我能做些什么 ？

# java - 扩展可以是has-a关系吗？

> ID：14031628
> 
> 赞同：0
> 
> 时间：2012-12-25T14:48:47.223
> 
> 标签：java, oop

据我所知，Is-a 关系是您的类扩展另一个类的地方，即`A`extends`B`因此`A`是 a `B`。

而has-a关系是当一个类实现了一个接口，所以`A`有一个算法。

我的问题：*是否存在过 is-a 也是 has-a 的情况？*

或者在哪里实现一个接口可以成为一个 is-a 关系？

让我重新定位：

*如果一个类实现了一个接口，它可以有一个 is-a 关系吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:51:19.627

> 而has-a关系是当一个类实现一个接口时，所以A有一个Aalgoritm。

这种说法是错误的。如果你实现一个接口，它仍然是一个 Is-A 关系。

Has-A 关系（组合）是这样的：

```
Class ABC {
private XYZ z;
} 
```

ABC 有一个 XYZ。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T14:52:58.050

我对`has a`关系的理解是用组合来表达的，而不是接口实现。

就个人而言，我认为`is-a`并且`has-a`可能同时发生：

```
class Foo{
 Bar bar;
}

Foo is a(n) Object.
Foo has a(n) Object. (Bar is Object too.) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:58:00.930

has-a 关系与接口无关——它就像 A 有一些 B 类型的成员，或者 A 封装了 B。

关于您的问题，请考虑以下几点：

```
interface IFSA {
     void foo();
 }

 class A implements IFSA { 
     void foo(){}
 }

 class B extends A {} 
```

A is-a B 并且它实现了一个接口 IFSA，所以答案是肯定的。

# php - PHP parse_ini_file 相对路径？

> ID：14031631
> 
> 赞同：7
> 
> 时间：2012-12-25T14:49:18.143
> 
> 标签：php, file, parsing, ini

我有这个代码：

```
$test = parse_ini_file("../data/test.ini"); 
```

test.ini 位于后一个目录，然后转发到数据文件夹。但是我遇到的问题是 parse_ini_file 不喜欢我创建这个到文件的相对链接，任何人都可以在不创建文件的绝对链接的情况下帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T14:53:17.850

你可以试试这个：

```
$test = parse_ini_file(realpath("../data/test.ini")); 
```

看到[这个](http://php.net/manual/en/function.realpath.php)链接

或者你可以直接使用绝对路径。

# c# - 为什么我的ftp上传方法这么慢？

> ID：14031633
> 
> 赞同：0
> 
> 时间：2012-12-25T14:49:22.613
> 
> 标签：c#, ftp, ftpwebrequest

我编写了一个控制台应用程序来从 FTP 下载文件，然后上传到不同的 FTP 位置。文件下载大约需要 10 秒，但上传大约需要 6 分钟。有 256 个文件，每个文件大小约为 5-30KB。所以非常小。

上传和下载的代码很相似，都是遍历目录下的所有文件然后上传。它相当简单，如下所示，它从 D:\LEV\ 文件夹迭代并上传文件到 ftp。

编辑：这是在 Azure“小型”Windows 虚拟机上运行的，所以我认为带宽不是问题？此外，我正在使用 Windows ftp.exe 上传的另一台虚拟机上执行相同的任务，它比我在同一台机器上的控制台应用程序快 2 倍。

任何线索为什么它这么慢，或者有没有办法提高速度？

```
static public void Upload(string file1)
{        
    string upftpServerIP = "ftp://ftp.domain.co.uk/lev/";
    string upftpUserID = "username";
    string upftpPassword = "password";

    string uri = upftpServerIP + file1;
    Uri serverUri = new Uri(uri);
    if (serverUri.Scheme != Uri.UriSchemeFtp)
    {
       return;
    }
    FtpWebRequest reqFTP;
    reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(upftpServerIP + file1));
    reqFTP.Credentials = new NetworkCredential(upftpUserID, upftpPassword);
    reqFTP.KeepAlive = false;
    reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
    reqFTP.UseBinary = true;
    reqFTP.Proxy = null;
    reqFTP.UsePassive = true;

    Console.WriteLine("Uploading " + file1);

    FileStream fs = File.OpenRead(@"D:\LEV\" + file1);
    byte[] buffer = new byte[fs.Length];
    fs.Read(buffer, 0, buffer.Length);
    fs.Close();
    Stream ftpstream = reqFTP.GetRequestStream();
    ftpstream.Write(buffer, 0, buffer.Length);
    ftpstream.Close();
}

static public string[] GetFileListUpload()
{
    string[] uploadFiles = Directory.GetFiles(@"D:\LEV\", "*.*", SearchOption.TopDirectoryOnly);
    return uploadFiles;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T14:57:05.307

There are several factors to consider here:

*   Your internet connection is not guaranteed to be symmetrical. Most internet connection plans (in my area, at least) offer an upload bandwidth which is 1/8th of the download bandwidth.

*   The FTP server itself may be limiting the bandwidth of incoming connections.

*   The FTP server may also be throttling the maximum bandwidth **per upload**. In this case, you will benefit greatly from multithreading the upload, uploading many files at once.

# javascript - Android 4.2.1、WebView 和 javascript 界面中断

> ID：14031635
> 
> 赞同：36
> 
> 时间：2012-12-25T14:49:28.760
> 
> 标签：javascript, android, webview

我有一个添加了 javascript 界面的 webview，它可以在大多数设备上完美运行，除了那些运行 Android 4.2.1 的设备。

我删除了大部分代码，并保留了一个非常基本的代码：

```
this.webView.getSettings().setJavaScriptEnabled(true);
this.webView.setWebChromeClient(new WebChromeClient());
this.webView.addJavascriptInterface(new Object() {
    public void handshake() {
        Log.d("JS", "handshake no params");
    }

    public void handshake(String json) {
        Log.d("JS", "handshake with params: " + json);
    }
}, "Android"); 
```

在 javascript 方面，测试代码如下所示：

```
Android.handshake(); 
```

但我在 logcat 中得到了这个：

> E/Web 控制台：未捕获的类型错误：对象 [对象对象] 没有方法“握手”

同样，同样的事情在我测试过的具有较旧 android 操作系统（< 4.2.1）的设备上也能正常工作（最低版本是 2.3.3）。

奇怪的是，如果我开始一个全新的项目，只有一个只有一个 WebView 的 Activity，使用相同的代码，即使对于 4.2.1，一切正常，但是当它是我实际项目的一部分时，事情就坏了. 我没有对我提供的这段代码片段中未包含的 webview 进行任何操作。

对我来说最奇怪的是 javascript 找到了 Android 对象，但它没有请求的方法（握手），这怎么可能？

任何帮助将不胜感激，因为在过去的两周左右这一直让我发疯（这是我一直回到的错误，然后放弃，等等）。谢谢。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-04T10:15:21.467

来自 Android 4.2 文档：

注意：如果您将 targetSdkVersion 设置为 17 或更高，则必须将 @JavascriptInterface 注释添加到您希望网页代码可用的任何方法（该方法也必须是公共的）。如果您不提供注释，则在 Android 4.2 或更高版本上运行时，您的网页将无法访问该方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-03T12:16:04.780

您必须在 Java 类中注释 (@JavascriptInterface) 方法，以使其可用于 JavaScript。

```
 public class JavaScriptInterface {
Context context;

JavaScriptInterface(Context c) {
    context = c;
}

@JavascriptInterface
public void edit(String postid) {
    Log.d("myApp", "EDIT!");
    //do stuff
}    } 
```

它对我有用。试试这个。

# php - PHP5 / CentOS - 自动授予 Fwrite 创建文件的文件权限？

> ID：14031638
> 
> 赞同：1
> 
> 时间：2012-12-25T14:49:43.547
> 
> 标签：php, permissions, centos, centos6

> **可能重复：**
> [在 php 中使用 fopen() 创建文件时的默认权限是什么？](https://stackoverflow.com/questions/7195533/what-are-the-default-permissions-when-creating-a-file-with-fopen-in-php)

我在我的 CentOS 6 VPS 上设置了 PHP5，我遇到了一些问题，我需要授予 777 访问我的带有 Fwrite 的脚本的权限，编辑文件时修复了 777 更改，但是当我尝试创建一个新文件时， 例子：

```
$fopen = fopen("../pages/".$_GET["mp"].".php", "w");
fwrite($fopen, $_POST["content"]);
fclose($fopen); 
```

它不会创建页面。这种用法在我的传统 Hostgator 主机上曾经很好，但现在在我的 VPS 上，权限被拒绝在某处允许创建页面，即使我提供了创建文件 777 的脚本。

# vba - 宏 vba 需要将公式应用于列，直到它在最后一行中具有值

> ID：14031641
> 
> 赞同：2
> 
> 时间：2012-12-25T14:50:01.093
> 
> 标签：vba, if-statement, formula

**我需要在整个 C 列中应用“IF”公式，直到使用 VBA 在工作表中具有最后一个值。**

但如果我使用以下代码，我会收到错误 438。请帮帮我

```
Sub test11()

With Sheets("Sheet")
        .Range("c1:c" & .Cells(.Rows.Count, "A").End(xlUp).Row).Formula = "=IF(B1="",TRIM(A1),TRIM(B1))"

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:11:20.413

所以你的工作表名称是`Sheet`or `Sheet1`？而 OP 提到的工作表名称是`Sheet2`. 这消除了一个错误。其次，您需要将`D`列设置为`.Cells(.Rows.Count,"D").End(xlUp).Row)`而不是`A`列。

这是一个非常难看的代码：它将最后使用的行计数到`Long`变量中。然后相应地设置范围以设置`formula`using `AutoFill`。

```
Sub test11()
Dim l As Long    

l = Sheets(1).Range("d1:d" & Sheets(1).Cells(Sheets(1).Rows.Count, "D").End(xlUp).Row).Count
    With Sheets("Sheet1")
        .Range("d1").Formula = "=IF(IsNull(B1),TRIM(A1),TRIM(B1))"
        .Range("d1").AutoFill Destination:=Range("d1:d" & l), Type:=xlFillDefault
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:47:47.670

你的逻辑似乎有点奇怪，但这有效：

```
Sub test11()
    With Sheets("Sheet1")
        .Range(.Range("c1"), .Range("C" & .Rows.Count).End(xlUp)) = "=IF(B1="""",TRIM(A1),TRIM(B1))"
    End With
End Sub 
```

您需要在 VBA 中将引号内的引号加倍。
另一种变体：

```
Sub test12()
    With Sheets("Sheet1")
        Intersect(.Range("c1").CurrentRegion, .Range("C:C")).Formula = "=IF(B1="""",TRIM(A1),TRIM(B1))"
    End With
End Sub 
```

# wireshark - Wireshark 插件：获取 Wireshark 数据包解析器中的总数据包大小

> ID：14031642
> 
> 赞同：1
> 
> 时间：2012-12-25T14:50:11.747
> 
> 标签：wireshark, wireshark-dissector

如何读取在wireshark-dissector中收到的数据包大小？该数据是否可从 tvbuff_t 获得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:06:44.730

如果“数据包大小”是指在 tvb 中交给解析器的数据大小，那么：

`tvb_reported_length(tvb)`是电线上看到的尺寸；

`tvb_length(tvb)`是实际捕获的大小（可以小于电线上的大小）。

在任何一种情况下，返回的大小都是传递给解析器的数据的大小（即，不包括任何较低级别的标头（以太网等））。

* * *

如果您想要最初在线路上看到的或保存的完整数据包的大小）

```
pinfo->fd->pkt_len   // packet-len
pinfo->fd->caplen    // amount actually captured 
```

（参见解剖器源代码树中的 epan/frame_data.h）。

解析器通常不需要（即不应该）访问有关帧的实际全尺寸的信息。

如果这是所需的数据，如果您可以说明为什么需要这些数据，那么我可能会提出不同的方法。

# java - 如果我不知道我必须这样做多少次，如何多次调用子类的方法？

> ID：14031643
> 
> 赞同：0
> 
> 时间：2012-12-25T14:50:11.597
> 
> 标签：java, collections, map, polymorphism

如果我有一个描述例如的类。people，命名为 Person，然后它有 6 个子类，例如 Child、Adult Man、Adult Woman 等。他们都有 ID、头发颜色、眼睛颜色等。只是他们的外观不同，所以我所有的子类都包含他们的自己的paint() 方法。每个人都有两个坐标来告诉程序必须在框架上绘制它们的位置，所有子类都得到这些坐标，如下所示：

```
class AdultMan extends Person
{
    AdultMan(int x, int y) {
        super(x,y); 
            // I haven't yet worked with the hair color, eye color...
            // only the coordinates to test my idea out
    }

    public void paint(Graphics g) {
            int x = getX();
            int y = getY();
            // The drawing of an adult man from basic shapes 
            // based on the given coordinates (and colors later)
    }
} 
```

因此，在我处理给定数据的另一个类中，我将它们全部放在一个地图中`Map<Integer,Person>` （整数是 ID），然后在一个扩展 Jframe 的类中，我将地图的值放在一个集合中并像这样迭代它们：

```
for (Person person : persons) 
{
  // (persons is the name of my collection)
  if(person.typeName.equals("adultMan"))
  {
     person = new AdultMan(person.x,person.y);
     person.paint(g);
  }
} 
```

我有 6 种类型的人，所以我想对每种类型都这样做。**问题是，如果我的地图中最多有 40 人，则可能有 30 个人左右，这只会在框架上绘制第一个并跳到下一个不同的类型。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:45:28.070

这不完全是您问题的答案，但您似乎误解了继承在 Java 中的工作方式。

如果您有一个类`Person`和一个`AdultMan`继承它的类，这意味着您应该能够在任何可以使用a的地方使用 a的**实例。**这就是[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的精髓。因此，如果一个方法具有以下签名：`AdultMan``Person`

```
public void tickle(Person p) 
```

然后，您可以使用 AdultMan（或任何其他类继承 Person 的对象）调用该方法。同样在 Java 中，如果子类定义了与超类相同的方法签名，则称为覆盖该方法。下面的代码说明了这一点：

```
class Person {
   public void laugh() {
       System.out.pring("Tihi");
   }
}  

class AdultMan extends Person {
   public void laugh() {
       System.out.pring("Hahaha");
   }
}

class AdultWoman extends Person {
   public void laugh() {
       System.out.pring("Hihihi");
   }
}

class Child extends Person { } 
```

`AdultMan`并`AdultWoman`覆盖该`laugh`方法，因此每当在这些类的**实例**`laugh`上调用该方法时，都会调用该类的方法。持有该对象的变量的类型是否为 a 无关紧要。如果有一个方法覆盖了获得调用的方法的笑声方法。在类的情况下，它没有定义自己的方法，因此只是从 Person 继承了方法。说明这一点的可运行示例是：**`Person``Child``laugh`**

 **```
public class App {
    public static void main(String[] args) {
        Person person = new Person();
        Person man = new AdultMan();
        Person woman = new AdultWoman();
        Person child = new Child();
        List<Person> persons = new ArrayList();
        persons.add(person);
        persons.add(man);
        persons.add(woman);
        persons.add(child);

        for(Person p : persons) {
            System.out.print("Laugh: ");
            p.laugh();
        }
        // This will print:
        // Laugh: Tihi
        // Laugh: Hahaha
        // Laugh: Hihihi
        // Laugh: Tihi
    }
} 
```**

# sql - 在 Oracle 中查找给定函数的依赖关系

> ID：14031644
> 
> 赞同：1
> 
> 时间：2012-12-25T14:50:25.180
> 
> 标签：sql, oracle, function

如何找到对给定函数的依赖关系`A`？我需要知道的是，既不依赖`triggers`也不`functions`依赖于它。使用某种查询可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:01:52.097

是的，有一个查询：

```
SELECT *
FROM DBA_DEPENDENCIES
WHERE REFERENCED_OWNER = 'YOUR_SCHEMA'
AND REFERENCED_NAME = 'A'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T08:43:59.923

你可以试试这个

```
exec dbms_utility.get_dependency('Object_Type', 'Schema_Name','Object'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:19:42.797

```
select distinct 
   owner,
   name,
   referenced_name 
from 
   dba_dependencies where referenced_name='fn_name'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T15:10:02.343

The Query mentioned below show which `functions, procedures,triggers` the particular function is used. you can also check which functions procedures,triggers,packages a particular column is used using the same query just need to `replace` column name instead of name of function.

```
SELECT DISTINCT (NAME) 
  FROM USER_SOURCE 
WHERE UPPER(TEXT) LIKE '%NAME OF FUNCTION%'; 
```

# django - django 一对多

> ID：14031648
> 
> 赞同：0
> 
> 时间：2012-12-25T14:50:56.060
> 
> 标签：django, list, model, many-to-one

长话短说：我有两个模型和一个从 XML 导入的数据库。模型布局如下：

```
class A:
    ForgeinKey(B)

class B:
    list = {A1, A2 ... An} 
```

是否有替代 {A1, A2 ... An} 可以使 B.list 返回 A 的列表。

编辑：想法是在 B 中有一个字段，列出所有指向它的 A。我似乎无法弄清楚如何从 B 的定义中调用 A.objects.* 。我什至不知道这是否可能。

Edit2：已解决，谢谢大家的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:17:40.567

如果我理解正确，你想`B().list`返回结果`SELECT * FROM A WHERE B_id = <B.id>`?

您必须使用related_name，然后：

```
class A(Model):
    b = ForeignKey(B, related_name='list') 
```

或者，您可以使用默认名称“ `B().A_set`”

# java - JComponent.paintImmediately() 在 Java Swing 中是如何工作的？

> ID：14031653
> 
> 赞同：11
> 
> 时间：2012-12-25T14:52:10.437
> 
> 标签：java, multithreading, swing, jcomponent

**我的理解：** 与 Swing 中对 JComponent.repaint() 的调用中的大多数组件/操作不同，它是线程安全的，即尽管重绘请求是从另一个线程（即不是来自 EDT）发出的，但实际的绘制只发生在 EDT 中。下面的代码片段演示了这一点。

```
public class PaintingDemo {

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        final JPanel p = new MyPanel();
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                frame.add(p, BorderLayout.CENTER);
                frame.setSize(200, 200);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
        new Thread("MyThread") {
            public void run() {
                while (true) {
                // Below statements are important to show the difference
                    p.repaint();
                    p.paintImmediately(p.getBounds());
                    try {
                        Thread.sleep(1000);
                    } catch(Exception e) {}
                }
            }
        }.start();
    }

}

class MyPanel extends JPanel {
    @Override
    public void paint(Graphics g) {
        System.out.println("paint() called in "+ Thread.currentThread().getName());
        super.paint(g);
    }
} 
```

从输出可知，当调用 repaint() 时，无论从哪个线程调用它，绘画都是在 EDT 中完成的 - 所以没有问题。但是，在 paintImmediately() 的情况下 - 绘画发生在调用它的同一线程中。

考虑这样一种情况，EDT 正在更改组件的状态，而另一个线程（从中调用 paintImmediately()）正在绘制相同的组件。

**我的问题：** 在paintImmediately() 的情况下，事件调度线程（EDT）和其他线程之间的同步是如何处理的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T22:00:23.607

据我了解，当您调用paintImmediately 时，您调用以下代码：

```
 Component c = this;
        Component parent;

        if(!isShowing()) {
            return;
        }

        JComponent paintingOigin = SwingUtilities.getPaintingOrigin(this);
        if (paintingOigin != null) {
            Rectangle rectangle = SwingUtilities.convertRectangle(
                    c, new Rectangle(x, y, w, h), paintingOigin);
            paintingOigin.paintImmediately(rectangle.x, rectangle.y, rectangle.width, rectangle.height);
            return;
        }

        while(!c.isOpaque()) {
            parent = c.getParent();
            if(parent != null) {
                x += c.getX();
                y += c.getY();
                c = parent;
            } else {
                break;
            }

            if(!(c instanceof JComponent)) {
                break;
            }
    }
    if(c instanceof JComponent) {
        ((JComponent)c)._paintImmediately(x,y,w,h);
    } else {
        c.repaint(x,y,w,h);
    } 
```

因此，除非这不是 a ，否则`JComponent`您最终会调用`_paintImmediately()`which 最终会调用`paint(Graphics)`下面的堆栈跟踪（从我将在本文末尾发布的一段代码中捕获）：

```
Thread [pool-1-thread-1] (Suspended)    
    TestPaint$1.paint(Graphics) line: 23    
    TestPaint$1(JComponent).paintToOffscreen(Graphics, int, int, int, int, int, int) line: 5221 
    RepaintManager$PaintManager.paintDoubleBuffered(JComponent, Image, Graphics, int, int, int, int) line: 1482 
    RepaintManager$PaintManager.paint(JComponent, JComponent, Graphics, int, int, int, int) line: 1413  
    RepaintManager.paint(JComponent, JComponent, Graphics, int, int, int, int) line: 1206   
    TestPaint$1(JComponent)._paintImmediately(int, int, int, int) line: 5169    
    TestPaint$1(JComponent).paintImmediately(int, int, int, int) line: 4980 
    TestPaint$1(JComponent).paintImmediately(Rectangle) line: 4992  
    TestPaint$3.run() line: 50  
    ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) line: 1110  
    ThreadPoolExecutor$Worker.run() line: 603   
    Thread.run() line: 722 
```

但是，如果您尝试同时调用`repaint()`（从另一个线程），您会看到两者同时运行（我尝试使用调试器单步执行代码，并且绘制从未停止在另一个线程中发生）似乎在 Java 代码级别，没有太多同步（至少我什么都看不到）。所以如果你最终在 EDT 中修改了组件状态，我相信结果是非常不可预测的，你应该尽量避免这种情况。

只是为了说明我的观点，我尝试在`paint`方法中修改变量的状态，添加一个`sleep`以增加 2 个线程（EDT 和另一个）之间发生冲突的风险，并且显然这两个线程之间没有同步（不时`System.err.println()`输出） 。`null`

现在我想知道为什么你需要立即执行绘画。除非您阻止 EDT，否则没有太多正当理由可以执行此类操作。

下面是我用来测试这些东西的代码（非常接近问题中发布的代码）。该代码仅用于尝试了解正在发生的事情，而不是展示如何执行正确的绘画或任何良好的 Swing 练习。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import java.util.concurrent.Executors;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestPaint {

    protected void initUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle(TestPaint.class.getSimpleName());
        final Random rand = new Random();
        final JPanel comp = new JPanel() {
            private String value;

            @Override
            public void paint(Graphics g) {
                value = "hello";
                super.paint(g);
                try {
                    Thread.sleep(20);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                g.setColor(new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256)));
                g.fillRect(0, 0, getWidth(), getHeight());
                if (SwingUtilities.isEventDispatchThread()) {
                    System.err.println("Painting in the EDT " + getValue());
                } else {
                    System.err.println("Not painting in EDT " + getValue());
                }
                value = null;
            }

            public String getValue() {
                return value;
            }
        };
        frame.add(comp);
        frame.setSize(400, 400);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        Timer t = new Timer(1, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                comp.repaint();
            }
        });
        t.start();
        Executors.newSingleThreadExecutor().execute(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    comp.paintImmediately(comp.getBounds());
                }
            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestPaint().initUI();
            }
        });
    }

} 
```

# asp.net - 忽略查询中的一些文本框

> ID：14031654
> 
> 赞同：0
> 
> 时间：2012-12-25T14:52:13.253
> 
> 标签：asp.net, sql, report

我在后面的代码中有以下代码`btnShowReport_Click`：

```
SqlDataSource1.SelectParameters.Clear();  
SqlDataSource1.SelectParameters.Add("username", txtUsername.Text);  
SqlDataSource1.SelectParameters.Add("printer", ddlPrinter.Text);  
SqlDataSource1.SelectParameters.Add("to", Date.convertDateSolar2Gregorian(txtDateFrom_datepicker.Text));
SqlDataSource1.SelectParameters.Add("from", Date.convertDateSolar2Gregorian(txtDateTo_datepicker.Text));
SqlDataSource1.SelectCommand = "SELECT * FROM JobLog WHERE UserName=@username and   PrinterName=@printer and TimeSubmitted between @to and @from"; 
```

我希望当用户不填写某些文本框时，在查询中，文本框的条件在查询中被忽略。我希望你明白我想要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:25:02.587

您可以使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)动态构建 SQL 查询，但这会使您的代码容易受到 SQL 注入攻击，您应该考虑使用[Dynamic SQL在 SQL Server 中创建存储过程](http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure)

这是 StringBuilder 示例，但如果您绝对必须在代码中构建查询：

```
 protected void Page_Load(object sender, EventArgs e)
{
    Dictionary<string, string> parameters = new Dictionary<string, string>();
    SqlDataSource1.SelectParameters.Clear();

    string name = txtName.Text;
    string surname = txtSurname.Text;

    if (name.Length > 0)
    {
        SqlDataSource1.SelectParameters.Add("Name", txtName.Text);
        parameters.Add("Name", name);
    }

    if (surname.Length > 0)
    {
        SqlDataSource1.SelectParameters.Add("Surname", txtSurname.Text);
        parameters.Add("Surname", surname);
    }

    SqlDataSource1.SelectCommand = GetSelectQuery("Customers", parameters);
    //Bind SqlDataSource1 to gridview etc...
}

private string GetSelectQuery(string table, Dictionary<string, string> parameters)
{
    var query = new System.Text.StringBuilder();
    query.Append(String.Format("SELECT * FROM {0}", table));

    for (int i = 0; i < parameters.Count; i++)
    {
        var param = parameters.ElementAt(i);
        if (i == 0)
            //Add the first parameter
            query.Append(String.Format(" WHERE {0}='{1}' ",param.Key, param.Value));
        else
            query.Append(String.Format(" AND {0}='{1}'", param.Key, param.Value));
    }
    return query.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:08:14.610

看看这个扩展：[SqlBuilder 教程](https://github.com/maxtoroq/DbExtensions/blob/master/docs/SqlBuilder.md)

使用此扩展，您可以像这样构建动态 sql 查询。

```
void DynamicSql(int? categoryId, int? supplierId) { 

   var query = SQL
      .SELECT("ID, Name")
      .FROM("Products")
      .WHERE()
      ._If(categoryId.HasValue, "CategoryID = {0}", categoryId)
      ._If(supplierId.HasValue, "SupplierID = {0}", supplierId)
      .ORDER_BY("Name DESC"); 
} 
```

# entity-framework - EF5 Code First 标识列错误

> ID：14031656
> 
> 赞同：3
> 
> 时间：2012-12-25T14:52:29.490
> 
> 标签：entity-framework, identity, dbcontext

我有如下的类层次结构：

```
class BaseType
{
  [Key]
  [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
  public int Id { get; set; }

  [DataType(DataType.Text)]
  [StringLength(100)]
  public string CreatedBy { get; set; }

  [DataType(DataType.DateTime)]
  public DateTime? CreatedDate { get; set; }
....
}

class Group : BaseType
{
  public string Name { get; set; }
} 
```

这是上下文的 OnModelCreating 方法：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<MCQGroup>()
        .HasKey(t0 => t0.Id)
        .Map(m => m.ToTable("groups"))
        .HasMany(t1 => t1.Sections)
        .WithMany(t2 => t2.Groups)
        .Map(m =>
          m.MapLeftKey("group_id")
          .MapRightKey("section_id")
          .ToTable("groups_to_sections"));
  ...........
  } 
```

我没有使用自动表生成或迁移。相反，我有许多脚本来创建数据库（实际上，我在第一次运行时使用了自动生成，之后脚本创建的表包括 webdata_* 表）。这是由使用的多个上下文引起的，在这种情况下，表自动生成存在许多问题。

这是 SQL 脚本：

```
-- Tables creation

CREATE TABLE [groups]
(
    [id]           INT NOT NULL IDENTITY(1, 1),
    [name]         NVARCHAR(300) NOT NULL,
    [createdby]    NVARCHAR(4000) NULL,
    [createddate]  DATETIME NULL,
    [modifiedby]   NVARCHAR(4000) NULL,
    [modifieddate] DATETIME NULL
);

GO
......
-- Intitial data population

SET IDENTITY_INSERT [user_profiles] ON;
GO
INSERT INTO [user_profiles] ...........

SET IDENTITY_INSERT [user_profiles] OFF;
GO

INSERT INTO [webpages_Membership] .............
GO

SET IDENTITY_INSERT [webpages_Roles] ON;
GO

INSERT INTO [webpages_Roles] ..............
GO
SET IDENTITY_INSERT [webpages_Roles] OFF;
GO

INSERT INTO [webpages_UsersInRoles] ...........
GO 
```

注意0：我没有任何像 EdmMetadata 或类似的表（它不是在启动时创建的，所以我没有它的脚本）。我不是 EF 的专家，我认为 Code First 方法不需要任何元数据（对吗？）。

注意1：当然创建上下文所需的所有其他类/表=）

注意 2：可能是我在数据填充过程中对 IDENTITY 做错了吗？所有触及 IDENTITY 的字符串都在这里。

**问题：当我尝试保存组时，出现异常“元数据集合中不存在身份为'id'的成员。参数名称：身份”**如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T06:05:42.870

我找到了！解决方案很简单：**永远不要混合使用属性方式元数据声明和 fluent-api 方式。** 我刚刚删除

```
 [Key]
  [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)] 
```

从 Id 声明并更改 OnModelChanging 中的所有模型声明，例如：

```
modelBuilder.Entity<MCQGroup>()
    .HasKey(t0 => t0.Id)
    .Map(m => m.ToTable("groups"))
    .Property(x => x.Id)
    .HasColumnName("id")
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
    .IsRequired();
modelBuilder.Entity<MCQGroup>()
    .HasMany(t1 => t1.Sections)
    .WithMany(t2 => t2.Groups)
    .Map(m => m.MapLeftKey("group_id").MapRightKey("section_id").ToTable("groups_to_sections")); 
```

# jquery - .position 自动完成

> ID：14031662
> 
> 赞同：0
> 
> 时间：2012-12-25T14:53:37.363
> 
> 标签：jquery, autocomplete, position

尝试将[自动完成](http://jqueryui.com/autocomplete)的翻转定位在输入右侧 2 个像素处。库 .position 使我能够将值设置为“right”，“left”，......也可以添加像`right+1`.

但是，如果我添加类似`right-2`的内容，则翻转完全向左移动。我不是 JavaScript 代码，需要一些帮助。

这是 JavaScript 代码

```
 function html_entity_decode(b){var a=document.createElement("textarea");a.innerHTML=b.replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.value}$.extend({getUrlVars:function(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d},getUrlVar:function(a){return $.getUrlVars()[a]}});$.widget("custom.catcomplete",$.ui.autocomplete,{_renderMenu:function(d,c){var b=this,a="";$.each(c,function(e,f){if(f.category!=a){f.category=html_entity_decode(f.category);d.append("<li class='ui-autocomplete-category'>"+f.category+"</li>");a=f.category}f.label=html_entity_decode(f.label);f.desc=html_entity_decode(f.desc);b._renderItem(d,f)})}});$(function(){$("#searchbox").catcomplete({source:function(c,a){c.term=escape(c.term);var b=$.getJSON("autocomplete.php",c,function(e,d,f){a(e)})},minLength:2,delay:200,position:{my:"right top",at:"right-2 bottom", collision:"flip horizontal"},highlight:true,select:function(b,c){var a=$.getUrlVar("XTCsid");if(a!=null){var d="?";if(c.item.link.indexOf("&")!=-1){d="&"}a=d+"XTCsid="+a}else{a=""}location.href=c.item.link+a;return false}}).data("catcomplete")._renderItem=function(b,d){var f="";if(d.desc!=null&&d.desc!=""){f="<div class='short_desc'>"+d.desc+"</div>"}var e="";if(d.image!=null&&d.image!=""){e="<div class='prod_img'><img src='"+d.image+"' /></div>"}var c="";if(d.price!=null&&d.price!=""){c="<div class='prod_preis'>"+d.price+"</div>"}var a="";if(d.label!=null&&d.label!=""){a="<div class='prod_name'>"+d.label+"</div>"}return $("<li></li>").data("item.autocomplete",d).append("<a><div class='prod_komplett'>"+e+a+f+c+"</div></a>").appendTo(b)}}); 
```

位置部分在这里

```
 position:{my:"right top",at:"right-2 bottom", collision:"flip horizontal" 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:32:51.893

[您可以在此处](http://docs.jquery.com/UI/API/1.8/Position#overview)阅读有关 UI 位置的更多信息

可能，为了得到你想要的，将这个代码添加到位置：

```
 position: {
             of:"#searchbox",
             offset: "-2px 0 0 0"
         } 
```

在偏移参数中，您可以设置框的位置

我希望这段代码对你有帮助

# asp.net - 使用 ASP.NET 4.0 休眠

> ID：14031664
> 
> 赞同：-2
> 
> 时间：2012-12-25T14:53:38.470
> 
> 标签：asp.net, nhibernate

我可以在不使用实体框架和 MVC 的情况下将 NHibernate 与我的新 ASP.NET 4.0 Web 应用程序一起使用吗？

当我运行网站时，没有显示错误，但我无法从数据库中选择数据。仔细查看，发现dailect有一个内部异常。

我将 .NET 4.0 与 Oracle 10g 数据库一起使用。

* * *

谢谢大家，我的网站运行。当我使用 ASP.NET 4.0 网站时，nhibernate 代码运行并在 gridview 中显示数据，但是当我对 ASP.NET 4.0 项目执行相同操作时，数据未显示在 gridview 中，但应用程序同时在两者中运行当我看到 nhibernatehelper 类对象的详细信息时，两个应用程序中都会出现异常（方言之一）。

当我们在网站应用程序中使用 nhibernate 和在项目应用程序中使用 nhibernate 时，有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:24:50.110

NHibernate 是一个[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)框架。Entity Franework 也是一个 ORM 框架。您可以在同一个 ASP.NET 应用程序中使用其中一个或两个，甚至两者都使用，而不会出现任何问题。NHibernate 不以任何方式绑定到实体框架。它们实现了类似的功能，因此您可以选择它们以在您的应用程序中使用。

# sql - SQL：“选择”新表后的奇怪查询性能

> ID：14031665
> 
> 赞同：4
> 
> 时间：2012-12-25T14:53:54.260
> 
> 标签：sql, sql-server, sql-server-2008

我遇到如下奇怪的情况：

我在名为“Table1”的数据库中有一个巨大的表。然后，我使用以下代码复制完全相同的表。

`Select * into Table2 from Table1`

之后，我发现查询性能差异很大。

`Select count (distinct ID) from Table1` 大约需要 2 分钟才能完成。（旧表）

同时， `Select count (distinct ID) from Table2` 只需大约 10 秒即可完成（新表）

顺便说一句，我发现数据在“选择进入”之后已经在新表中重新排序。此外，在“选择”新表之前，在 Table1（旧表）中添加了一列（即 Alter a table ，将 col1 添加为 col2。）

那么，这是怎么发生的呢？

> *（注意：问题的原始版本说新表是慢表。这是一个错误。另外，它没有提到 Table1 上的数据操作）*

* * *

### 对更多信息请求的回应

这是塞巴斯蒂安代码的结果。

```
SELECT  QUOTENAME(OBJECT_SCHEMA_NAME(t.object_id)) + '.' + QUOTENAME(t.name) tbl,
        s.name stats_name,
        cols.cols,
        t.create_date table_date,
        STATS_DATE(s.object_id, s.stats_id) AS statistics_date,
        s.auto_created,
        s.user_created,
        s.no_recompute,
        s.has_filter,
        s.filter_definition
FROM    sys.tables t
LEFT OUTER JOIN sys.stats s
        ON s.object_id = t.object_id
OUTER APPLY (
              SELECT  STUFF((SELECT ',' + c.name
                             FROM   sys.stats_columns sc
                             JOIN   sys.columns c
                                    ON sc.column_id = c.column_id
                                       AND sc.object_id = c.object_id
                             WHERE  sc.object_id = s.object_id
                                    AND sc.stats_id = s.stats_id
                             ORDER BY sc.stats_column_id
                      FOR   XML PATH(''),
                                TYPE
).value('.', 'NVARCHAR(MAX)'), 1, 1, '') cols
            ) cols
--Update Table Name(s) here:      
WHERE   t.OBJECT_ID IN ( OBJECT_ID('[Sales].[SpecialOffer]'),
        OBJECT_ID('[Sales].[SalesOrderDetail]') ); 
```

和

```
SELECT  name,
        compatibility_level,
        is_auto_close_on,
        is_auto_shrink_on,
        state_desc,
        is_auto_create_stats_on,
        is_auto_update_stats_on,
        is_auto_update_stats_async_on
FROM sys.databases
WHERE database_id = DB_ID(); 
```

实际上，我将新表复制到另一个数据库。而表名其实就是ID2000

上图参考“表1”（数据库1） 下图参考“表2”（数据库2）

![](../Images/c30bebe7cc58f780d7245b312d8bef12.png)

![](../Images/7d67207625849e53b0054571931be4a1.png)

* * *

好吧，由于 XML 代码太长，这里是遵循哈姆雷特建议的替代打印输出。我使用 `SET SHOWPLAN_ALL ON GO` 而不是粘贴所有 XML 代码。我希望它有所帮助。

红色代表“表1”计划，黑色代表“表2”。图像中的文字有点小，但是通过增加此页面大小进行放大只会将其放大。

非常感谢！！ ![图1](../Images/7699571980aae4d7b5dbbe9442f0716e.png)

* * *

的结果`SELECT * FROM sys.dm_db_index_physical_stats(db_id(),object_id('YourTable'),NULL,NULL,'Detaile‌​d')`。

事实上，两张桌子之间存在巨大差异。同样，红色参考“表1”，另一种参考“表2”

这个问题很烦人，它让我发疯，因为我一直在问自己是否应该重建所有表。:( ![在此处输入图像描述](../Images/c30bebe7cc58f780d7245b312d8bef12.png)

实际上它很奇怪，请注意record_count是不同的。但是，当我重新检查时 `select COUNT (ID) from id2000`，（即计算此表上的总数据行）两个结果都是 2324798，这是 Table_2 的记录计数

此外，“Table2”是由“select * into”语句创建的，我想两者应该是相同的，但现在我很困惑。

![在此处输入图像描述](../Images/5badc1a691e0df7c846e5343907e4ec2.png) 上表是来自 Sebastian 代码的代码（运行状态）的结果

* * *

的结果`SELECT * FROM sys.dm_db_index_physical_stats(db_id(),object_id('YourTable'),NULL,NULL,'Detaile‌​d')`。

事实上，两张桌子之间存在巨大差异。同样，红色参考“表1”，另一种参考“表2”

这个问题很烦人，它让我发疯，因为我一直在问自己是否应该重建所有表。:( ![在此处输入图像描述](../Images/c30bebe7cc58f780d7245b312d8bef12.png)

实际上它很奇怪，请注意record_count是不同的。但是，当我重新检查时 `select COUNT (ID) from id2000`，（即计算此表上的总数据行）两个结果都是 2324798，这是 Table_2 的记录计数

此外，“Table2”是由“select * into”语句创建的，我想两者应该是相同的，但现在我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T15:31:51.283

好的，既然我们已经整理出旧表是慢表而不是新表，那么一切都表明转发记录的数量非常多是罪魁祸首。

要删除转发的记录，您可以使用此查询：

```
ALTER TABLE dbo.Table2 REBUILD; 
```

向堆中添加一列很可能会导致每一行频繁移动，从而导致大量转发记录。`forwarded_records_count`DMV返回的列`sys.dm_db_index_physical_stats`显示转发的数量 - 在您的情况下几乎所有行。

A`SELECT * INTO`不复制转发指针，而是重新组织它。因此，您确实看到了性能差异。

当我们谈论转发时，在大多数情况下，在表上拥有一个聚集索引是一个非常好的主意。这样就避免了这样的问题。

在您的情况下，ID 列似乎是集群主键的候选者（如果它是唯一的），但我需要更多地了解该模型才能在此处为您提供建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:19:30.360

另一个尝试：请运行这个并发布文本以及查询结果。与往常一样，请务必将 Table1 和 Table2 替换为真实姓名。在这种情况下，您还需要替换数据库名称。

```
SET STATISTICS IO ON;
SET STATISTICS TIME ON;
GO
SELECT COUNT(DISTINCT ID) FROM DB1.dbo.Table1
GO
SELECT COUNT(DISTINCT ID) FROM DB2.dbo.Table2
GO
SELECT COUNT(DISTINCT ID) FROM DB1.dbo.Table1
GO
SELECT COUNT(DISTINCT ID) FROM DB2.dbo.Table2
GO
SELECT COUNT(DISTINCT ID) FROM DB1.dbo.Table1
GO
SELECT COUNT(DISTINCT ID) FROM DB2.dbo.Table2
GO
SET STATISTICS TIME OFF;
SET STATISTICS IO OFF;
GO
SELECT * FROM sys.dm_db_index_operational_stats(DB_ID('DB1'),OBJECT_ID('DB1.dbo.Table1'),NULL,NULL);
SELECT * FROM sys.dm_db_index_operational_stats(DB_ID('DB2'),OBJECT_ID('DB2.dbo.Table2'),NULL,NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:06:53.223

我认为这是由过时的统计数据引起的。但是我们需要更多关于您的环境的信息。你能运行这两个查询并发布结果吗？确保使用两个表的名称而不是提供的两个表的名称。

```
SELECT  QUOTENAME(OBJECT_SCHEMA_NAME(t.object_id)) + '.' + QUOTENAME(t.name) tbl,
        s.name stats_name,
        cols.cols,
        t.create_date table_date,
        STATS_DATE(s.object_id, s.stats_id) AS statistics_date,
        s.auto_created,
        s.user_created,
        s.no_recompute,
        s.has_filter,
        s.filter_definition
FROM    sys.tables t
LEFT OUTER JOIN sys.stats s
        ON s.object_id = t.object_id
OUTER APPLY (
              SELECT  STUFF((SELECT ',' + c.name
                             FROM   sys.stats_columns sc
                             JOIN   sys.columns c
                                    ON sc.column_id = c.column_id
                                       AND sc.object_id = c.object_id
                             WHERE  sc.object_id = s.object_id
                                    AND sc.stats_id = s.stats_id
                             ORDER BY sc.stats_column_id
                      FOR   XML PATH(''),
                                TYPE
).value('.', 'NVARCHAR(MAX)'), 1, 1, '') cols
            ) cols
--Update Table Name(s) here:      
WHERE   t.OBJECT_ID IN ( OBJECT_ID('[Sales].[SpecialOffer]'),
        OBJECT_ID('[Sales].[SalesOrderDetail]') ); 
```

和

```
SELECT  name,
        compatibility_level,
        is_auto_close_on,
        is_auto_shrink_on,
        state_desc,
        is_auto_create_stats_on,
        is_auto_update_stats_on,
        is_auto_update_stats_async_on
FROM sys.databases
WHERE database_id = DB_ID(); 
```

# c - c - 更改数组中变量的指针

> ID：14031667
> 
> 赞同：0
> 
> 时间：2012-12-25T14:53:59.283
> 
> 标签：c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:06:43.420

假设它`ObjectP`是类型化的`struct Object *`（你在问题中没有提到），试试这个：

```
table->linkedObjects[i] = *object; 
```

请记住，这将*复制*`object`.

如果您不想要这种行为，并且希望保留指针，则应将结构的`linkedObjects`成员声明为or 。`Table``Object **``ObjectP *`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:10:56.580

如果您使用 malloc(i*sizeof(Object*); 之类的东西进行内存分配，并且您的对象也是指向 Object 的指针，那么它应该可以工作。

# ruby - 保持 Sinatra 应用程序轻巧：在不加载 ActionView 的情况下显示原始数组

> ID：14031671
> 
> 赞同：0
> 
> 时间：2012-12-25T14:54:16.367
> 
> 标签：ruby, sinatra

我想确保我的数组在视图中保持这样：

```
["Tue", "Wed", "Thu", "Fri", "Sat", "Sun", "Mon", "Tue"] 
```

而不是转换为：

```
[&quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;] 
```

我的 erb 文件中的代码用于高图表：

```
categories: <%= @days %>, 
```

在 Rails 中，我使用了以下[`raw`](http://apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw)方法：

在遵循[从 Rails 3 控制器返回的 Messy 的建议后，查看](https://stackoverflow.com/questions/6131347/messy-quot-returned-from-rails-3-controller-to-view)并[使用 ruby​​ 数组作为 erb 中的 javascript 数组。转义引号](https://stackoverflow.com/questions/7561430/use-ruby-array-for-a-javascript-array-in-erb-escaping-quotes)

但是，加载所有 ActionView 以使用一种方法似乎会破坏 Sinatra 的对象。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T05:32:43.973

我不确定为什么你现在会在数组上转义，但这就是我在 ERB 视图中放置的内容：

```
<% array = ["Tue", "Wed", "Thu", "Fri", "Sat", "Sun", "Mon", "Tue"] %>

<p><%= array.inspect %></p>
<p><%= array.inspect.gsub(/"/, '\"') %></p> 
```

这是输出：

> [“周二”、“周三”、“周四”、“周五”、“周六”、“周日”、“周一”、“周二”]
> 
> [\"周二\"、\"周三\"、\"周四\"、\"周五\"、\"周六\"、\"周日\"、\"周一\"、\"周二\"]

但真正的问题是“如何从 Sinatra 获取数据到 javascript 函数中？”

```
class App < Sinatra::Base

  get "/array", :provides => :json do
    content_type :json
    ["Tue", "Wed", "Thu", "Fri", "Sat", "Sun", "Mon", "Tue"].to_json
  end

end 
```

然后通过从coffeescript编译的一些jQuery（或您喜欢的任何库）调用它，当然:)

```
$.getJSON "/array", (res) ->
  # do something with the result 
```

意思是：

*   你不必担心逃跑
*   jQuery 负责解析 JSON 响应，因此您只需使用一个对象
*   更容易测试
*   您已经设置了一个 API，其中有一个 Web 应用程序调用它（即 Sinatra 方式而不是 Rails 方式）
*   你会做一些与其他人更相似的事情，这将使获得帮助更容易。

# android - Android Eclipse Layout doesn't seen on SDK 8

> ID：14031672
> 
> 赞同：2
> 
> 时间：2012-12-25T14:54:29.450
> 
> 标签：android, xml, eclipse, layout, eclipse-adt

I made a layout on TARGET SDK:17 and MİN SDK:8\. it was ok. when it was on SDK:17 but when ı try it with SDK:8 it gave error at the bottom. can anyone tell me how can ı make work my code on SDK:8 Thank you for your helps. Here is the XML ....

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:ignore="UselessParent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textButtonBakici"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textBakici" />

            <EditText
                android:id="@+id/editTextBakici"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/altiyuzyirmibes"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textKrediAraba"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textKrediAraba"/>

            <EditText
                android:id="@+id/editTextKrediAraba"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/besyuzdoksan"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textOgrenimKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textOgrenimKredisi" />

            <EditText
                android:id="@+id/editTextOgrenimKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/dortyuzon"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textTatilKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textTatilKredisi"/>

            <EditText
                android:id="@+id/editTextTatilKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/yuzotuzbes"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textFaturaElektrik"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaElektrik" />

            <EditText
                android:id="@+id/editTextFaturaElektrik"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textFaturaSu"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaSu" />

            <EditText
                android:id="@+id/editTextFaturaSu"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textFaturaInternet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaInternet" />

            <EditText
                android:id="@+id/editTextFaturaInternet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/otuz"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textAidat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textAidat"/>

            <EditText
                android:id="@+id/editTextAidat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow9"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textKaskoSigorta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textKaskoSigorta" />

            <EditText
                android:id="@+id/editTextKaskoSigorta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:ems="10"
                android:hint="@string/ikiyuzyirmibes"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow10"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="10"
                android:orientation="horizontal" >

                <Spinner
                    android:id="@+id/spinnerYillar"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="3"
                    android:entries="@array/Yillar"
                    android:prompt="@string/promptYillar" />

                <Spinner
                    android:id="@+id/spinnerAylar"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="3"
                    android:entries="@array/Aylar"
                    android:prompt="@string/prompt" />
            </LinearLayout>

            <Button
                android:id="@+id/buttonIleri"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_weight="0"
                android:background="@drawable/navigation_forward"
                android:gravity="right" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

Here is the error log:

```
!ENTRY com.android.ide.eclipse.adt 4 0 2012-12-25 16:41:18.827
!MESSAGE butcegiris.xml: Index: 1, Size: 1
!STACK 0
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
    at java.util.ArrayList.rangeCheck(Unknown Source)
    at java.util.ArrayList.get(Unknown Source)
    at com.android.ninepatch.NinePatchChunk.draw(NinePatchChunk.java:174)
    at com.android.ninepatch.NinePatchChunk.draw(NinePatchChunk.java:101)
    at android.graphics.NinePatch_Delegate$1.draw(NinePatch_Delegate.java:219)
    at com.android.layoutlib.bridge.impl.GcSnapshot.drawInLayer(GcSnapshot.java:608)
    at com.android.layoutlib.bridge.impl.GcSnapshot.draw(GcSnapshot.java:577)
    at android.graphics.NinePatch_Delegate.draw(NinePatch_Delegate.java:217)
    at android.graphics.NinePatch_Delegate.nativeDraw(NinePatch_Delegate.java:170)
    at android.graphics.NinePatch.nativeDraw(NinePatch.java)
    at android.graphics.NinePatch.draw(NinePatch.java:104)
    at android.graphics.drawable.NinePatchDrawable.draw(NinePatchDrawable.java:188)
    at android.view.View.draw(View.java:6725)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    at android.view.View.draw(View.java:6743)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
    at android.view.View.draw(View.java:6743)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:466)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:320)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1545)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.changed(GraphicalEditorPart.java:718)
    at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationChooser.setConfiguration(ConfigurationChooser.java:632)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderPreviewManager.switchTo(RenderPreviewManager.java:1352)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderPreview.click(RenderPreview.java:837)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderPreviewManager.click(RenderPreviewManager.java:1494)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GestureManager$Listener.mouseUp(GestureManager.java:469)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:219)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)

!ENTRY com.android.ide.eclipse.adt 4 0 2012-12-25 16:41:18.991
!MESSAGE butcegiris.xml: Index: 1, Size: 1
!STACK 0
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:00:20.173

问题不在于 SDK 版本或目标版本。问题在于您在某处使用了arraylist，并且那里的索引映射错误。

日志猫清楚地显示：索引为1，大小为1

这意味着您的索引超过了数组列表/数组的大小。

你能把活动代码分享给我吗？或者你自己检查一下大小问题吗

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:14:17.920

根据我的经验和我在 google io 视频上听到的内容，您应该始终为您的应用程序使用最新的 SDK，包括 ui 设计器。

原因是 google 仅（或大部分）更新设计器的最新 sdk 目标，因此比以前的版本具有更少的错误。

另外，请注意，即使是现在，与真实设备（甚至模拟器）上发生的事情相比，您也不能完全信任 ui 设计器。很多时候它不能很好地显示某些东西（或根本无法显示），因为它还不受支持（例如文本阴影、部分圆角的图像角......）。

所以，简而言之，总是将targetSdk设置为最新的（minSdk应该是你想要的），包括ui设计器，如果你想在旧版本上检查它，尝试使用模拟器（或真实设备) 以防万一有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T14:03:38.400

这不是您的代码的错误，但它是 android sdk 渲染库中的一个众所周知的错误。

**参考：** [android 渲染布局中的错误](https://code.google.com/p/android/issues/detail?id=39814)

# cluster-analysis - ELKI implementation of OPTICS clustering algorithm detects only one cluster

> ID：14031673
> 
> 赞同：7
> 
> 时间：2012-12-25T14:54:36.477
> 
> 标签：cluster-analysis, data-mining, dbscan, elki, optics-algorithm

I'm having issue with using OPTICS implementation in [ELKI](http://elki.dbs.ifi.lmu.de/) environment. I have used the same data for DBSCAN implementation and it worked like a charm. Probably I'm missing something with parameters but I can't figure it out, everything seems to be right.

Data is a simple 300х2 matrix, consists of 3 clusters with 100 points in each.

DBSCAN result:

[Clustering result of DBSCAN](https://dl.dropbox.com/u/45499397/dbscan.png)

MinPts = 10, Eps = 1

OPTICS result:

[Clustering result of OPTICS](https://dl.dropbox.com/u/45499397/optics.png)

MinPts = 10

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T14:19:35.627

@AnonyMousse 说得很对。我还不能投票或评论。

我们希望随着时间的推移，让一些学生将其他聚类提取方法作为小型学生项目贡献出来。它们对于我们的研究来说不是必不可少的，但对于想要了解 ELKI 入门的学生来说，它们是很好的任务。

ELKI 是一个快速发展的项目，它源于社区的贡献。我们很高兴看到您为它贡献一些代码。我们知道代码库上手并不容易——它相当大，而且实现的普遍性和对索引结构的支持使得上手有点困难。我们尝试添加[教程](http://elki.dbs.ifi.lmu.de/wiki/Tutorial)以帮助您入门。一旦你习惯了它，你实际上会从架构中受益：你的算法获得索引和任意距离函数的好处，而如果你从头开始实现，你可能只支持欧几里德距离，而不支持索引加速。

看到你在OPTICS上苦苦挣扎，我会在新的一年尝试写一篇OPTICS教程。特别是，OPTICS 可以从使用适当的索引结构中受益匪浅。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T22:45:27.020

您显然已经自己找到了解决方案，但长话短说：

ELKI 中的`OPTICS`类只计算集群顺序/可达性图。

为了**提取**集群，您有不同的选择，其中之一（来自原始 OPTICS 出版物的那个）在 ELKI 中可用。

因此，为了在 ELKI 中提取集群，您需要使用该`OPTICSXi`算法，该算法将依次使用`OPTICS`或基于索引`DeLiClu`来计算集群顺序。

在 ELKI 中将其分为两部分的原因可能是一方面您可以实现另一种提取集群的逻辑，另一方面实现不同的方法，例如`DeLiClu`计算集群顺序。这将与 ELKI 的模块化架构非常吻合。

IIRC 至少还有一种方法（显然在 ELKI 中还没有）通过寻找局部最大值来提取集群，然后水平扩展它们直到它们到达山谷的尽头。还有一个不同的使用情节的“拐点”。

# sql - 以 ms 为单位的 sql 语法。访问和 vb.net

> ID：14031678
> 
> 赞同：0
> 
> 时间：2012-12-25T14:55:26.783
> 
> 标签：sql, vb.net, ms-access

我想问你关于microsoft access 中的sql 语法。

我想要的是：

```
kdploting kdsubject nmsubject nmlecture
kp001 km001 xx a
kp001 km002 年年 b
kp001 km003 zz c

```

mysql语法是：

```
select distinct(d.kdploting), c.kdsubject, a.nmsubject, b.nmlecture 
from subject a, mstlecture b, 
transplotingdetail c, transplotingheader d 
where d.kdploting = 'kp001' 
and d.kdploting = c.kdploting 
and c.kdsubject = a.kdsubject 
and d.kdlecture = b.kdlecture; 
```

结果 ：

```
kdploting kdsubject nmsubject nmlecture
kp001 km001 xx a
kp001 km001 xx b
kp001 km001 xx c
kp001 km002 年年
kp001 km002 年年 b
kp001 km002 yy c
kp001 km002 zz
kp001 km002 zz b
kp001 km002 zz c

```

我不想要这样的结果，所以有人可以解释一下为什么会发生这种情况吗？什么是正确的 sql 查询？

多谢你们！

注意：我的 vb.net 程序真的需要这个查询，谢谢大家！

这是我的桌子：

```
学科
    kdsubject nmsubject
    公里001 xx
    km002 年
    km003 兹

结构
    讲义
    kd001一
    kd002 b
    kd003 c

移植细节
    kdploting kdmatakuliah
    kp001 公里001
    kp001 km002
    kp001 公里003
    kp002 公里001
    kp002 km002
    kp002 公里003
    ...

转标头
    kdploting klecture
    kp001 kd001
    kp001 kd002
    kp001 kd003
    kp002 kd001
    kp002 kd002
    kp002 kd003    
    ...

```

# 我想要的是这样的

```
kdploting kdsubject nmsubject nmlecture
kp001      km001         xx a
kp001      km002 年年        b
kp001 km003 zz c

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T21:44:16.033

为了方便使用，我缩短/更改了表格/主题名称。但使用与您的样本相同的数据。SQL Server 最好的部分是**`Row_Number()`**:) 因为查询是在 SQL Server 中完成的，所以我利用了它。SQL Server 语法更符合 MS ACCESS。因此，查询中最重要的部分是确保基于 distinct`subjectid`和对内部记录进行排名/编号`lectureid`。请看一下

## * [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/4bf4f/3)

**询问：**

```
select y.did, x.lid, x.lname,
y.sid, y.sname from
(select ROW_NUMBER() OVER (ORDER BY a.lid) AS Row,
 a.lid, a.lname, b.did
from mstl a
left join (select distinct lid, did from 
           th) as b
on b.lid = a.lid
where b.did = 'kp001') as x
join
(select ROW_NUMBER() OVER (ORDER BY c.sid) AS Row,
 c.sid, c.sname, d.did
from subject c
left join (select distinct sid, did from 
           td) as d
on d.sid = c.sid
where d.did = 'kp001') as y
on x.row = y.row
; 
```

结果：

```
DID     LID     LNAME   SID     SNAME
kp001   kd001   a       km001   xx
kp001   kd002   b       km002   yy
kp001   kd003   c       km003   zz 
```

# wpf - Search control on WP7/WP7.5

> ID：14031684
> 
> 赞同：0
> 
> 时间：2012-12-25T14:56:16.960
> 
> 标签：wpf, windows-phone-7, xaml, windows-phone-7.1, windows-phone

Could anyone tell me which controls are used in WP7 / WP7.5 where we go on e-mails reading, and when we click on the "search" button?

It appears on the top of a searchbox (a TextBox) and the middlle/bottom of the page is a little blurred. I need to code an application like this, and I don"t know which control to use.

Thanks a lot.

Best regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:02:53.170

没有一个控件可以执行您描述的确切场景。

您必须自己在底部添加一个文本框和一个搜索列表。然后，当用户按下“Enter”键时做出响应，如下所示：

XAML：

```
<TextBox Name="textBox1" KeyDown="OnKeyDownHandler"/> 
```

C＃：

```
private void OnKeyDownHandler(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        //Search the data source you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:19:06.950

您可以使用文本框和列表框来显示搜索结果。如果您愿意，可以使用图像按钮显示搜索图标。您可以使用此按钮的单击事件来执行搜索操作，并可以在下面的列表框中显示结果。

# android - 对话框中仅包含 facebook 和 twitter 应用程序的共享按钮

> ID：14031686
> 
> 赞同：4
> 
> 时间：2012-12-25T14:56:24.603
> 
> 标签：android

我想在我的应用程序中添加共享按钮，并且我已经完成了以下操作：

```
final Intent shareIntent = new Intent(Intent.ACTION_SEND);              
            /* Fill it with Data */
            shareIntent.setType("plain/text");
            shareIntent.putExtra(Intent.EXTRA_TEXT, "www.somesite.com");    

            /* Send it off to the Activity-Chooser */
            startActivity(Intent.createChooser(shareIntent, "Share...")); 
```

它显示了一个对话框，我在这个对话框 facebook 和 twitter 中看不到。我的手机中确实安装了这两个应用程序。那么，`first`问题是为什么它不显示它们？如果`second`以后我会让它们以某种方式出现在手机中，如何使该对话框仅显示 facebook 和 twitter，如果用户没有它们，请用户通过提供官方应用程序的链接来安装它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:07:08.460

您可以使用以下代码检查它们，

[如何在 Android 中自定义分享意图？](https://stackoverflow.com/questions/6827407/how-to-customize-share-intent-in-android/9229654#9229654)

[Twitter应用程序的Android Intent](https://stackoverflow.com/questions/2077008/android-intent-for-twitter-application/9151983#9151983)

> 我已经看到很多关于修改应用程序选择器的问题，他们似乎都说不，您不能更改内置应用程序选择器，但您可以使用 PackageManager 类中的 queryIntentActivities() 创建自定义应用程序选择器。

```
try{
    ApplicationInfo info = getPackageManager().getApplicationInfo("com.facebook.katana", 0 );
    return true;
} catch( PackageManager.NameNotFoundException e ){
    return false;
}

try{
    ApplicationInfo info = getPackageManager().getApplicationInfo("com.twitter.android", 0 );
    return true;
} catch( PackageManager.NameNotFoundException e ){
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T05:55:17.437

成功登录完成后。

```
public class ShareOnTwitterTrophy extends AsyncTask<String, Integer, Long> {
    private Activity mActivity;
    private Bitmap bitmap;
    public ShareOnTwitterTrophy(Activity mActivity,Bitmap bitmap) {
        this.mActivity=mActivity;
        this.bitmap=bitmap;
    }

    protected void onPreExecute() {
    }

    @Override
    protected Long doInBackground(String... arg0) {

        long result = 0;
        // TwitterSession twitterSession = new TwitterSession(activity);
        // AccessToken accessToken = twitterSession.getAccessToken();
        AccessToken accessToken = new UserSharedPreference(mActivity).getTwitterAccessToken();
        if (accessToken != null) {
            Configuration conf = new ConfigurationBuilder()
                    .setOAuthConsumerKey("your key")
                    .setOAuthConsumerSecret(
                            "your secret")
                    .setOAuthAccessToken(accessToken.getToken())
                    .setOAuthAccessTokenSecret(accessToken.getTokenSecret())
                    .build();

            ImageUploadFactory factory = new ImageUploadFactory(conf);
            ImageUpload upload = factory.getInstance();
            Log.d("", "Start sending image...");
            try {
                ByteArrayOutputStream bytes = new ByteArrayOutputStream();

                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

                // you can create a new file name "test.jpg" in sdcard
                // folder.
                String imagePath = Environment
                        .getExternalStorageDirectory()
                        + File.separator
                        + "test.jpg";
                File f = new File(imagePath);
                f.createNewFile();
                // write the bytes in file
                FileOutputStream fo = new FileOutputStream(f);
                fo.write(bytes.toByteArray());

                // remember close de FileOutput
                fo.close();
                upload.upload(f, "");
                Log.e("Image Uploaded", "yayeeeee");
                result = 1;
            } catch (Exception e) {
                Log.e("image upload failed", "awwwww :(");
                e.printStackTrace();
            }

            return result;
        }
        return result;
    }

    @Override
    protected void onPostExecute(Long result) {
        if (result == 1)
            Toast.makeText(
                    mActivity,
                    mActivity
                            .getString(R.string.twitter_shared_successfully),
                    Toast.LENGTH_LONG).show();
    } 
```

# c++ - 试图了解 valgrind 输出

> ID：14031697
> 
> 赞同：4
> 
> 时间：2012-12-25T14:58:48.583
> 
> 标签：c++, qt, valgrind

这是valgrind的输出..

```
Conditional jump or move depends on uninitialised value(s)
in RingsWidget::UpdateSeekBar() in ringswidget.cpp:514
1: RingsWidget::UpdateSeekBar() in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/ringswidget.cpp:514" >ringswidget.cpp:514</a>
2: RingsWidget::UpdateRings() in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/ringswidget.cpp:138" >ringswidget.cpp:138</a>
3: RingsWidget::qt_static_metacall(QObject*, QMetaObject::Call, int, void**) in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/moc_ringswidget.cpp:49" >/media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/moc_ringswidget.cpp:49</a>
4: QMetaObject::activate(QObject*, QMetaObject const*, int, void**) in /usr/lib/libQtCore.so.4.8.4
5: QObject::event(QEvent*) in /usr/lib/libQtCore.so.4.8.4
6: QApplicationPrivate::notify_helper(QObject*, QEvent*) in /usr/lib/libQtGui.so.4.8.4
7: QApplication::notify(QObject*, QEvent*) in /usr/lib/libQtGui.so.4.8.4
8: QCoreApplication::notifyInternal(QObject*, QEvent*) in /usr/lib/libQtCore.so.4.8.4
9: /usr/lib/libQtCore.so.4.8.4
10: /usr/lib/libQtCore.so.4.8.4
11: g_main_context_dispatch in /usr/lib/libglib-2.0.so.0.3400.3
12: /usr/lib/libglib-2.0.so.0.3400.3
13: g_main_context_iteration in /usr/lib/libglib-2.0.so.0.3400.3
14: QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/libQtCore.so.4.8.4
15: /usr/lib/libQtGui.so.4.8.4
16: QEventLoop::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/libQtCore.so.4.8.4
17: QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) in /usr/lib/libQtCore.so.4.8.4
18: QCoreApplication::exec() in /usr/lib/libQtCore.so.4.8.4
19: main in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/main.cpp:19" >main.cpp:19</a>

Uninitialised value was created by a heap allocation  1: operator new(unsigned long) in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so
2: MusicWidget::MusicWidget(QWidget*) in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/musicwidget.cpp:148" >musicwidget.cpp:148</a>
3: NomadWindow::Initialize() in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/nomadwindow.cpp:127" >nomadwindow.cpp:127</a>
4: NomadWindow::NomadWindow(QWidget*) in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/nomadwindow.cpp:27" >nomadwindow.cpp:27</a>
5: main in <a href="file:///media/dipesh/Documents/Qt-projects/NomadDesktop-build-Desktop-Debug/../NomadDesktop/main.cpp:15" >main.cpp:15</a> 
```

这是代码..

```
511 NomadWindow *par = (NomadWindow*)parent();
512 float percentage = par->GetMusicWidget()->GetMPDSeekPerc();
513 settings[5].operator []("value") = percentage;
514 if ( percentage < 0.2 )
515     settings[5].operator []("fg_alpha") = 0.2;
516 else
517     settings[5].operator []("fg_alpha") = percentage; 
```

valgrind 输出来自第 514 行 if ( percent < 0.2 )

我做错了什么？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:12:38.833

> 条件跳转或移动取决于未初始化的值

这通常意味着您有一个 if 来测试未初始化的值。因此 if 的结果是随机的。

要更进一步，您需要知道该变量在哪里分配/声明。您可以从以下位置获取此信息：

> 未初始化的值是由堆分配 1: operator new(unsigned long) in ... MusicWidget::MusicWidget(QWidget*) in [...] musicwidget.cpp:148 创建的

这意味着在 musicwidget.cpp 的第 148 行中，您在 int（百分比）上创建了一个 new，但您没有对其进行初始化。你应该在那里发现你的错误。

题外话：在 int 上使用 new 通常不是一个好主意。如果可能的话，而是将其声明为变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:13:19.260

看起来 valgrind 传播了访问的未初始化值的使用，`GetMPDSeekPerc()`并在未初始化的值实际用于某事而不是仅仅传递它时报告错误。关于的消息`Uninitialised value was created by a heap allocation ...`直截了当地指出了未初始化值的来源。

# c# - 我这样做对吗？试图为继承它的特定页面操作母版页样式

> ID：14031698
> 
> 赞同：1
> 
> 时间：2012-12-25T14:58:54.153
> 
> 标签：c#, asp.net, master-pages

我的母版页有菜单。通过单击“主页”链接将我带到 home.aspx 页面。当我在该页面上时，我希望主页按钮位于不同的 CSS 中。我遇到了多个帖子，但是 Jeremy 的这个帖子引起了我的注意，看起来很简单。
[https://stackoverflow.com/a/10871099/1851048](https://stackoverflow.com/a/10871099/1851048)。

我试图在我的网站上实现相同的功能，但它不起作用。我明白了：“'System.Web.UI.HtmlControls.HtmlGenericControl' 是一种类型而不是命名空间”
这是我 home.aspx.cs 中的 .cs 代码：

```
 using System.Web.UI.HtmlControls.HtmlGenericControl;
 using System.Web.UI.WebControls;

  public partial class _Default : System.Web.UI.Page

 {
protected void Page_Load(object sender, EventArgs e)
   {

   }

  }

 public class HtmlGenericControl : HtmlContainerControl
 {
    protected void Page_Load(object sender, EventArgs e)
      {
       HtmlGenericControls mycontrol = (HtmlGenericControl)this.Page.Master.FindControl("yourcontrolname") as HtmlGenericControl;

          mycontrol.Attributes.Add("class", "cssToApply");
      }
 } 
```

我在这里做了一些研究：http: [//msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)
但我每次都遇到不同的错误。我设法摆脱了所有这些，但是代码不起作用。
这是我的第一个网站，所以我目前有很多东西要学习。感谢你的帮助。

编辑：

```
 public partial class _Default : System.Web.UI.Page

 {
     protected void Page_Load(object sender, EventArgs e)
       {
           var mycontrol = this.Page.Master.FindControl("HyperLink1") as HtmlGenericControl;

           mycontrol.Attributes.Add("class", "cssToApply");

       }

 } 
```

CSS：

```
 #menu ul
 {
padding-bottom: 10px;
    padding-top: 10px;
list-style: none;
display: inline-block;
  }

   #menu li
   {    
margin: auto;
display:inline;
   }

 #menu a 
  {
    font-family: Verdana;
    color: white;
margin: 6px;
float: left;
width: 150px;
height: 27px;
padding: 0 0 0 0;
    border-radius: 6px;
text-align: center;
text-decoration: none;
font-size: 1.5em;
   }

 #menu a:hover
 {
   background-color: white;
   color: #bee2f1;
 }

 .cssToApply
 {
   background-color: white;
   color: #bee2f1;
  } 
```

MasterPage.master：

```
 <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="home.aspx">Home</asp:HyperLink></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:28:03.487

在这里，您的问题是您不需要创建单独的类，`HtmlGenericControl`并且您的命名空间也是错误的（应该是`HtmlControls`）。

试试下面的代码（用下面的代码替换你的代码）。

```
using System;    
using System.Web.UI.HtmlControls;

  public partial class _Default : System.Web.UI.Page
   {
       protected void Page_Load(object sender, EventArgs e)
       {
          var mycontrol = this.Page.Master.FindControl("yourcontrolname") as HtmlGenericControl;

          mycontrol.Attributes.Add("class", "cssToApply");

       }
   } 
```

我希望这对你有帮助。

# c# - 在遍历字典时创建两个无序列表

> ID：14031699
> 
> 赞同：0
> 
> 时间：2012-12-25T14:59:08.803
> 
> 标签：c#, .net, asp.net-mvc-3, razor

我正在尝试根据字典中的数据创建两个无序列表。我想要的是当循环到达字典的一半时，我希望它关闭第一个`<ul>`并开始另一个。

这是我尝试过的，但它不起作用：

```
<ul>
    @foreach( var productData in products )
    {
        if(products.ElementAt(products.Count / 2).Key != productData.Key)
        {
            </ul>
            <ul>
        }
        <li><span>@productData.Key</span> : <label>@productData.Value</label></li>
    }
</ul> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:02:52.667

```
<ul>
@foreach( var productData in products.Take(products.Count / 2))
{
    <li><span>@productData.Key</span> : <label>@productData.Value</label></li>
}
</ul>

<ul>
@foreach( var productData in products.Skip(products.Count / 2))
{
    <li><span>@productData.Key</span> : <label>@productData.Value</label></li>
}
</ul> 
```

但是请考虑将两个字典传递给您的视图。

# json - 在 Three.js 中渲染非常大的 Blender 模型

> ID：14031700
> 
> 赞同：1
> 
> 时间：2012-12-25T14:59:15.557
> 
> 标签：json, webgl, three.js

我有一个非常大的 Blender 模型（json 大约 70 Mb）。Three.js 可以正常渲染这样的模型吗？使用以下代码加载模型：

```
loader = new THREE.JSONLoader();

callbackDice = function(geometry) {
    createMesh(geometry);
};
loader.load(file, callbackDice);

function createMesh(geometry) {
     mesh = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial( { vertexColors: THREE.FaceColors, wireframe: false } ));                   
     mesh.overdraw = true;
     scene.add(mesh);                    
 } 
```

我无法近似形状以减少描述它的基元的数量（每个基元都有自己的动态变化的颜色）。以下代码更改图元的颜色

```
for ( var i = 0; i < mesh.geometry.faces.length; i ++ ) {
    var face = mesh.geometry.faces[ i ];
    face.color.setHex('0x'+ color value);
}
mesh.geometry.colorsNeedUpdate = true; 
```

如果无法使用 Three.js，请建议任何其他使用 WebGL 的库来解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:43:56.247

这必须是可能的`BufferGeometry`。看一下[webgl_buffergeometry](http://threejs.org/examples/webgl_buffergeometry.html)示例。它渲染了 160000 个三角形，每个三角形都有自己的颜色。不过，BufferGeometry 不支持线框和平面着色。

# silverlight - 屏幕锁定时保持 WP7 应用程序运行

> ID：14031701
> 
> 赞同：0
> 
> 时间：2012-12-25T14:59:29.087
> 
> 标签：silverlight, windows-phone-7, screen-lock

我正在创建一个 silverlight 应用程序来跟踪夜间的运动（使用加速度计）。问题是当屏幕被锁定时（一段时间后像往常一样）它会停止运行，直到我再次解锁。屏幕锁定时有没有办法让它保持活力？也许有人知道它是如何在 WhatsApp 或 Line 等应用程序中解决的，这些应用程序必须运行才能接收短信。

我对后台工作人员进行了一些研究，但似乎它们只能每约 30 分钟执行一次，最长约 25 秒，这对我来说毫无用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:10:51.017

[通过设置PhoneApplicationService.ApplicationIdleDetectionMode 属性](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.applicationidledetectionmode%28v=VS.92%29.aspx)，应用程序可以在手机被锁定时继续运行

这篇博客详细描述了在[锁屏下运行 Windows Phone 应用程序](http://blogs.msdn.com/b/jaimer/archive/2010/11/01/running-a-windows-phone-application-under-the-lock-screen.aspx)

但是，这有一个问题。如果用户故意锁定手机，则该应用程序将被视为空闲。如果屏幕自行熄灭，则不会。

（对于电池问题，一般来说，让加速度计通宵也是一个坏主意。）

# javascript - 在asp.net的弹出窗口中打开我的新页面

> ID：14031707
> 
> 赞同：1
> 
> 时间：2012-12-25T14:59:47.603
> 
> 标签：javascript, asp.net, popup

我有一个常规页面。当我单击一个按钮时，它将在该页面中打开，并带有一些 asp 控件。我需要的是我想在弹出页面中打开那个页面，里面有关闭按钮。我搜索了但我没有找到合适的鳕鱼。有谁能够帮助我？谢谢 ![在此处输入图像描述](../Images/eadb001439f0b026c613809a3fae4f0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:17:43.933

您可以在 javascript 中使用 windows.open。

```
 <html>
    <body>

    <script type="text/javascript">
function windowOpen() {
    myWindow=window.open('http://myurl.com','_blank','width=200,height=100, scrollbars=no,resizable=no')

    myWindow.focus()
}
    </script>
    <input type="button" value="Open Window" onclick="windowOpen()">
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:26:01.720

在你的函数之前使用 return

```
 <html>
<body>

<script type="text/javascript">
  function windowOpen() {
      myWindow=window.open('http://myurl.com','_blank','width=200,height=100, scrollbars=no,resizable=no')
      myWindow.focus()
      return false;
  }
</script>
<asp:button id="btnClick" text="Open Window" onClientClick="return windowOpen()">
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T09:12:47.133

使用下面的代码

ClientScript.RegisterStartupScript(typeof(Page), "MessagePopUp", "window.location.href = 'Home.aspx';", true);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-07T04:40:30.617

```
<script type="text/javascript">
    function OpenPopup() {

       window.open("ProductClass.aspx", "List", "toolbar=no, location=no,status=yes,menubar=no,scrollbars=yes,resizable=no, width=900,height=500,left=430,top=100");
        return false;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-05T10:19:50.650

大家好，请使用以下代码

```
function ShowPopup() {
        $("#panOne").dialog({
            autoOpen: true,
            appendTo: "form",
            height: 600,
            width: 900
        });
    } 
```

**appendTo**：`"form"`很重要，就好像你不使用它`autopostback`一样

# wpf - DevExpress GridControl ColumnAutoWidth

> ID：14031709
> 
> 赞同：2
> 
> 时间：2012-12-25T15:00:03.150
> 
> 标签：wpf, devexpress

这个问题可能很愚蠢，但是我花了半天的时间寻找答案，但没有运气。

我有一个包含 DevExpress GridControl 的 WPF 视图（不是我开发的）。问题是当我单击“自动适应”选项时 - 它会因水平滚动而变得太宽。原因是标题很长，但如果它们被包装成 2 行就可以了。

经过一番搜索，我认为我需要的是[ColumnAutoWidth](http://documentation.devexpress.com/#windowsforms/DevExpressXtraGridViewsGridGridOptionsView_ColumnAutoWidthtopic)属性。问题（这是愚蠢的部分）是我不知道如何设置它！因此，我至少无法检查它是否有效！文档中没有示例，并且代码自动完成不会在任何地方显示它的存在。我有一些假设，但它们似乎是错误的。

有人可以分享有关如何访问此属性的 XAML（或至少代码隐藏）示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:43:54.063

您只需从列中删除宽度元素，并设置表格视图的自动宽度元素。您发布的链接是相关的 xtraGrid 控件，它是一个 Windows 窗体而不是 WPF 窗体，您必须从 TableView.AutoWidth 属性控制宽度。

尝试阅读以下[文档](http://documentation.devexpress.com/#WPF/CustomDocument6296)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:06:03.943

您的链接是 WinForms 网格的文档。对于 Wpf GridColumn [http://documentation.devexpress.com/#WPF/DevExpressXpfGridGridColumnMembersTopicAll](http://documentation.devexpress.com/#WPF/DevExpressXpfGridGridColumnMembersTopicAll)

据我了解你的问题 - 你想修复列宽。试试这个

```
<dxg:GridColumn Header="MyAwesomeColumn"
    Width="40"
    FixedWidth="True"
    FieldName="MyFieldName" /> 
```

# iphone - 如何将 UITableView 始终放在 UIView 的中心？

> ID：14031714
> 
> 赞同：19
> 
> 时间：2012-12-25T15:00:37.350
> 
> 标签：iphone, ios, uitableview

我想在 a`UITableView`的中心实现 a `UIView`。最初它只有 2 或 3 行。当用户添加更多行时，它会沿垂直方向延伸，而整个内容保持在中心，如下图所示：

![在此处输入图像描述](../Images/32317827e999d80e70c45db68d7eebe0.png)

有可能做到这一点`UITableView`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T15:17:00.073

可以使用**UIScrollView 的`contentOffset`属性**来完成。

1.  使您的 tableView 的框架位于边界内：

    ```
    tableView.frame = self.view.bounds;
    tableView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight; 
    ```

2.  声明一个方法-layoutTableView：

    ```
    - (void)layoutTableView {
        CGSize contentSize = tableView.contentSize;
        CGSize boundsSize = tableView.bounds.size;
        CGFloat yOffset = 0;
        if(contentSize.height < boundsSize.height) {
            yOffset = floorf((boundsSize.height - contentSize.height)/2);
        }
        tableView.contentOffset = CGPointMake(0, yOffset);
    } 
    ```

3.  当您打电话时`[tableView reloadData]`，请`[self layoutTableView]`稍后再打电话。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-22T15:08:04.137

另一个解决方案是调整表格视图的内容插图，因为内容偏移解决方案对我不起作用。继承人的基本思想（插入自定义 UITableView 子类）：

```
- (void)reloadData {
    [super reloadData];
    [self centerTableViewContentsIfNeeded];
}

- (void)layoutSubviews {
    [super layoutSubviews];
    [self centerTableViewContentsIfNeeded];
}

- (void)centerTableViewContentsIfNeeded {
    CGFloat totalHeight = CGRectGetHeight(self.bounds);
    CGFloat contentHeight = self.contentSize.height;
    //If we have less content than our table frame then we can center
    BOOL contentCanBeCentered = contentHeight < totalHeight;
    if (contentCanBeCentered) {
        self.contentInset = UIEdgeInsetsMake(ceil(totalHeight/2.f - contentHeight/2.f), 0, 0, 0);
    } else {
        self.contentInset = UIEdgeInsetsZero;
    }
} 
```

对于 Swift-hearted，这里有一个 Playground：

```
import UIKit
import Foundation
import XCPlayground

class CenteredTable: UITableView {
    override func reloadData() {
        super.reloadData()
        centerTableContentsIfNeeded()
    }

    override func  layoutSubviews() {
        super.layoutSubviews()
        centerTableContentsIfNeeded()
    }

    func centerTableContentsIfNeeded() {
        let totalHeight = CGRectGetHeight(bounds)
        let contentHeight = contentSize.height
        let contentCanBeCentered = contentHeight < totalHeight
        if (contentCanBeCentered) {
            contentInset = UIEdgeInsets(top: ceil(totalHeight/2 - contentHeight/2), left: 0, bottom: 0, right: 0);
        } else {
            contentInset = UIEdgeInsetsZero;
        }
    }
}

class DataSource: NSObject, UITableViewDataSource {
    let items = ["Mr", "Anderson", "Welcome", "Back", "We", "Missed", "You"]
    func registerReusableViewsWithTable(tableView: UITableView) {
        tableView.registerClass(UITableViewCell.self, forCellReuseIdentifier: "cell")
    }

    func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCellWithIdentifier("cell", forIndexPath: indexPath) as! UITableViewCell
        cell.textLabel?.text = items[indexPath.row]
        cell.textLabel?.textAlignment = .Center
        return cell
    }

    func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return items.count
    }
}

let dataSource = DataSource()
let table = CenteredTable(frame: CGRectMake(0, 0, 300, 800), style: UITableViewStyle.Plain)
table.tableFooterView = UIView(frame: CGRectZero)
let container = UIView(frame: table.frame)
container.addSubview(table)
dataSource.registerReusableViewsWithTable(table)
table.dataSource = dataSource
table.reloadData()
XCPShowView("table", container)
container 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-21T08:59:17.390

如果您不在 tableview 中使用标题，则可以动态计算单元格的高度与 tableviews 绑定高度相比。

感谢 [https://stackoverflow.com/a/15026532/1847601](https://stackoverflow.com/a/15026532/1847601)

```
- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    CGFloat contentHeight = 0.0;
    for (int section = 0; section < [self numberOfSectionsInTableView: tableView]; section++) {
        for (int row = 0; row < [self tableView: tableView numberOfRowsInSection: section]; row++) {
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow: row inSection: section];
            contentHeight += [self tableView: tableView heightForRowAtIndexPath: indexPath];
        }
    }
    return (tableView.bounds.size.height - contentHeight)/2;
}

- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
        UIView *view = [[UIView alloc] initWithFrame: CGRectZero];
        view.backgroundColor = [UIColor clearColor];
        return view;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-30T11:18:23.217

不需要那种笨重的逻辑。只需在中使用以下行`cellForRowAt()`：

迅速：

```
tableView.contentInset = UIEdgeInsets(top: (tableView.bounds.height/2 - cell.bounds.height/2), left: 0, bottom: 0, right: 0) 
```

目标-C：

```
tableView.contentInset = UIEdgeInsetsMake((tableView.bounds.height/2 - cell.bounds.height/2), 0, 0, 0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-01T11:01:47.937

斯威夫特 3

```
private func hightTableView() {
    yourTableView.frame = CGRect(x: 0, y: Int((Int(view.frame.height) - rowHeight * yourArrayData.count) / 2), width: widthTable, height: rowHeight * yourArrayData.count)
} 
```

# iphone - “UIWindowLevelStatusBar + 1”奇怪的键盘行为

> ID：14031715
> 
> 赞同：2
> 
> 时间：2012-12-25T15:00:43.843
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwindow

中的这段代码`appDelegate`使我的应用程序表现得很奇怪

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window.windowLevel = UIWindowLevelStatusBar + 1;
    return YES;
} 
```

从功能中隐藏键盘时，`[myTextView resignFirstResponder]`我的键盘消失在视图下，而不是应有的向下滑动。

改变这种情况的最佳方法是什么？为什么会`UIWindowLevelStatusBar + 1`弄乱所有应用程序结构？

**编辑：**

我想要做的是在`statusBar`. 设置错误`UIWindowLevelStatusBar + 1`的`appDelegate`方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-31T21:52:46.117

伙计，我知道这是 2 岁，但它是这样的：

适用于 iOS 7 和 8，未在 9 beta 上测试。

我正在向状态栏添加一个代码。是的，我知道苹果不喜欢它，但用户可以选择在其他地方使用它。

在 app Delegate 中，当你想隐藏状态栏的内容（运营商、小时、电池）时，你调用：

```
self.window.windowLevel = UIWindowLevelStatusBar+1; 
```

好的

问题是要弄清楚如何取回内容，对吗？那也是我的问题。这里是：

```
self.window.windowLevel = UIWindowLevelStatusBar-1; 
```

再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:07:55.400

键盘也存在于窗口中（屏幕上的所有内容都存在），并且该窗口的级别低于您的窗口。

你为什么把你的窗户水平设置得这么高？如果您告诉我们您要完成的工作，我们可能会建议另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T07:33:32.937

Hide the status bar and set frame for navigation bar simple.

```
CGRect statusFrame = [UIApplication sharedApplication].statusBarFrame;
[[UIApplication sharedApplication] setStatusBarHidden:YES];
self.navigationController.navigationBar.frame = CGRectMake(0, statusFrame.size.height, 320,46);
[[AppDelegate instance].window addSubview:statusView]; 
```

# ios - iOS 6：图标和启动应用程序

> ID：14031717
> 
> 赞同：0
> 
> 时间：2012-12-25T15:00:55.500
> 
> 标签：ios, ios6, icons, launch, armv7

当我尝试运行我的应用程序时，我的 iPhone 出现了问题。我收到了这条消息：

> “无法启动“iNiveau PRO.app”<br> 没有这样的文件或目录 (/Users/jerrycor3/Library/Developer/Xcode/DerivedData/iNiveau_PRO-gcxzxwcnetxnjubgctsnwjdsltcr/Build/Products/Debug-iphoneos/iNiveau PRO.app/iNiveau亲)"

我尝试了我在互联网上找到的所有解决方案，比如退出 XCode，移动到垃圾派生数据文件夹，从我的 iPhone 中删除应用程序，重新启动它等等......但没有任何效果：/

昨天当我尝试向我的应用程序添加图标时遇到了这个问题。所以我认为这有关系，但我不知道是什么。我还尝试在所需的系统设置中将 amv7 更改为 amv6。

我不知道怎么了...

谢谢你，圣诞快乐！=)

# android - 从设置活动返回到主要活动

> ID：14031718
> 
> 赞同：0
> 
> 时间：2012-12-25T15:01:09.040
> 
> 标签：android, android-intent, back

我有 TimerTask 的主要活动并处理并创建一个带有设置活动的菜单。我想在使用设置活动的后退按钮时从开始转到主要活动。我想在回来时刷新主要活动。现在当我的主要活动停止时，休息并在重新启动 TimerTask 时从 apk 退出。我的 apk 中的一些代码用于理解...

这是在主活动菜单内

```
public boolean onOptionsItemSelected(MenuItem item)
{ 
  switch (item.getItemId())
  {
  case R.id.menu_exit:
      finish();
      return true;
  case R.id.menu_setup:
      startActivity(new Intent(this, Setup.class));
      return true;
    default:
      return super.onOptionsItemSelected(item);
   } 
```

在我有一个 TimerTask 从按钮开始和停止之后......

我的 setup.class 是 SharedPreference 用于保存计时器的延迟时间...

我想要此类中后退按钮的代码，并从开始（刷新）主要活动开始......从首选项中为 TimerTask 提供新的延迟时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:21:55.987

在您的设置活动中覆盖 onBackPressed() 方法并启动主要活动的意图。使用 bundle 将数据发送到意图

# c# - 多个客户端异步连接，同步发送/接收

> ID：14031720
> 
> 赞同：1
> 
> 时间：2012-12-25T15:01:13.253
> 
> 标签：c#, sockets, client-server

我是 C#、OOP、网络和 TCP/IP 套接字的新手...

我对异步 TCP/IP 套接字通信的使用有误解。我正在尝试创建一个等待多个客户端的服务器，并且每次客户端连接时，它都会显示类似“用户 192.168.1.105:2421 已加入”的内容

我认为当您使用 BeginAccept() 时，将创建一个新线程……每当有新用户连接时，它将负责与该特定客户端的通信。但是，以下代码块......并且不显示第二个客户端的消息。

我应该改变什么，以便为每个连接的客户端我有一个单独的线程来处理执行？

```
class Server
{
    Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    //constructor 
    public Server()
    {
        listener.Bind(new IPEndPoint(IPAddress.Parse("192.168.1.100"), 9050));
        listener.Listen(10);
        listener.BeginAccept(new AsyncCallback(OnConnectRequest), listener);
        Console.Write("Server Running...\r\n");
    }

    public void OnConnectRequest(IAsyncResult ar)
    {
        Socket listener = (Socket)ar.AsyncState;
        NewConnection(listener.EndAccept(ar));
        listener.BeginAccept(new AsyncCallback(OnConnectRequest), listener);
    }

    //send a string message over a TCP socket 
    public void sendMSG(string msg,Socket socket)
    {
     //some code which sends data according to my protocol
    }

    public byte[] receiveMSG(ref Socket socket)
    {
     //some code which receives data according to my protocol
    }

    //function called whenever a NEW CLIENT is connected
    public void NewConnection(Socket sockClient)
    {
        Console.WriteLine("user {0} has joined",sockClient.RemoteEndPoint);
        byte[] msg = new byte[20];
        sockClient.Receive(msg);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:15:48.080

`BeginAccept()`接受一个请求，因此您的异步回调只会为第一个请求调用一次。这是标准的 C# 异步模式。

如果您想接受多个请求，您需要`BeginAccept()`在处理完请求后再次调用。

另请参阅[异步服务器套接字多个客户端](https://stackoverflow.com/questions/5815872/asynchronous-server-socket-multiple-clients)。

**编辑：**

如果您想允许并发请求，您应该在and`BeginAccept()`之间调用：`EndAccept()``NewConnection()`

```
public void OnConnectRequest(IAsyncResult ar)
{
    Socket listener = (Socket)ar.AsyncState;
    Socket accepted = listener.EndAccept(ar);
    listener.BeginAccept(new AsyncCallback(OnConnectRequest), listener);
    NewConnection(accepted);
} 
```

# emacs - 如何使 emacs 接受 UTF-8（大写）编码？

> ID：14031724
> 
> 赞同：16
> 
> 时间：2012-12-25T15:01:57.343
> 
> 标签：emacs, character-encoding, standards

以下指定文件的字符编码：

```
# -*- coding: utf-8 -*- 
```

但大写变体：

```
# -*- coding: UTF-8 -*- 
```

产生：

> 警告（mule）： :coding 标记为当前缓冲区/文件指定了无效的编码系统 `UTF-8'。强烈建议在写入文件之前修复它。

版本：`GNU Emacs 23.3.1`

`UTF-8`是[utf-8 字符编码的正式名称](http://www.unicode.org/versions/Unicode6.2.0/ch03.pdf#G7404)。

在这种情况下，明显的`add-to-coding-system-list`功能不适用。如何在声明中使 UTF-8 成为 utf-8 的别名`coding`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-25T19:15:51.583

我认为，以下代码将对您有所帮助：

```
(define-coding-system-alias 'UTF-8 'utf-8) 
```

# android - 在 Android 中解析整数值

> ID：14031726
> 
> 赞同：0
> 
> 时间：2012-12-25T15:02:08.600
> 
> 标签：android, android-edittext

我正在尝试获取`EditText`用户输入的整数值。

```
EditText eTextValue=(EditText) findViewById(R.id.eId); 
String eTextString=eTextValue.getText().toString();
int eTextValue1=Integer.parseInt(eTextString); 
```

但不幸的是，我得到了，

> 无法将 9827328 解析为整数。

我尝试过使用`Integer.valueOf`而不是，`Integer.parseInt`但我又遇到了同样的异常。

我什至使用`Long`数据类型而不是类型数据类型来存储值，`int`但似乎没有任何效果。对此的任何帮助将不胜感激。我已经浏览了所有这些链接[，无法将 ' ' 解析为 android 中的整数，](https://stackoverflow.com/questions/10469986/unable-to-parse-as-integer-in-android)从[EditText 解析值](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CEoQFjAC&url=https://stackoverflow.com/questions/6948735/android-how-to-take-an-edittext-numbers-then-convert-it-to-an-integer-to-use&ei=5q7ZUMfJAsH9rAeVwIHIBA&usg=AFQjCNF-DGe7XG98RTa5oXTwkyRdF-WBuw&sig2=nvxTGH_AQRMZCDlhSLt5KQ&bvm=bv.1355534169,d.bmk)......但似乎没有任何工作，所有这些都让我陷入了异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:19:33.360

您正在使用`eTextValue`两个不同事物（一个 int 和一个 EditText）作为变量名。你不能这样做并期望它能够正常工作。改变一个或另一个，它应该会更好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:32:09.290

```
int id;
id=Integer.parseInt(ed.getText().toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:17:38.007

尝试在相应 EditText 元素下的 XML 文件中输入以下内容。

安卓：inputType="数字"

希望这能让你通过异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T03:19:21.180

您需要检查您正在解析的字符串是否为整数。试试这个代码：

```
if (IsInteger(eTextString)
   int eTextValue1=Integer.parseInt(eTextString); 
```

并添加此功能：

```
public static boolean IsInteger(String s)
{
   if (s == null || s.length() == 0) return false;
   for(int i = 0; i < s.length(); i++)
   {
      if (Character.digit(s.charAt(i), 10) < 0)
         return false;
   }
   return true;
} 
```

我希望这有帮助

# c - struct {0} 和 memset 0 有什么区别

> ID：14031727
> 
> 赞同：13
> 
> 时间：2012-12-25T15:02:18.317
> 
> 标签：c, struct

假设我们有这样的结构：

```
struct A
{
    int x;
    int y;
}; 
```

有什么区别

```
A a = {0}; 
```

和

```
A a;
memset(&a,0,sizeof(A)); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T15:04:22.480

没有任何。最终结果是两者都将结构成员初始化为`0`.

**C99 标准 6.7.8.21**

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

您的结构`A`是一个聚合结构，上述规则适用于它。因此，所有结构成员都使用与静态存储持续时间相同的值进行初始化。这是`0`。

**C99 标准 7.21.6.1 memset 函数：**

```
void *memset(void *s, int c, size_t n); 
```

> memset 函数将`c`（转换为无符号字符）的值复制到`n`指向的对象的每个第一个字符中`s`。

简而言之，包括结构对象中的对齐/填充位在内的所有成员`A`都设置为`0`.

请注意，**C 中两个构造之间的唯一区别在于，它也`memset`将对齐/填充设置`0`为，而聚合初始化仅保证您的结构成员设置为`0`.**

在任何一种情况下，您都无法通过约定语言结构访问对齐/填充字节，因此两者都可以获得相同的效果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-25T15:06:31.323

两者都将内存设置为0

第一个用于只设置一个静态分配内存为0

```
A a ={0}; // set a staic memory to 0 
```

你不能这样做：

```
A *a = malloc(sizeof(A)); a = {0} // This could not be done 
```

第二个用于将动态和静态分配内存都设置为0

```
A a;
memset(&a,0,sizeof(A)); 
```

你也可以这样做

```
A *a = malloc(sizeof(A)); memset(a,0,sizeof(A)); 
```

另一件事

当`memset`用于将内存设置为`0`时，您正在调用一个函数（这需要时间）。使用 设置时`{0}`，您不会调用函数。所以`{0}`可能比`memset`

# android - Android 应用内结算验证

> ID：14031731
> 
> 赞同：2
> 
> 时间：2012-12-25T15:02:56.083
> 
> 标签：android, in-app-billing

我在我的应用中使用 android in-app billing version 3，我想在服务器上购买后验证交易。有没有办法检查交易是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T04:11:40.327

验证与设备上的验证相同：您获取一些数据和签名，然后使用您的公钥来验证签名。如果验证通过，您将事务信息保存在数据库等中，`OK`并向客户端（您的 Android 应用程序）发送响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:18:27.593

读这个-

要启动购买请求，您的应用程序会发送一个 getBuyIntent 请求，指定要购买的商品的产品 ID 以及其他参数。当您在开发者控制台中创建新的应用内商品时，您应该记录商品 ID。Google Play 返回一个包含 PendingIntent 的 Bundle，您的应用程序使用它来启动购买的结帐 UI。您的应用程序通过调用 startIntentSenderForResult 方法来启动待处理的意图。 **当结账流程完成时（即用户成功购买商品或取消购买），Google Play 会向您的 onActivityResult 方法发送响应 Intent。onActivityResult 的结果码有一个结果码，表示购买是成功还是取消。响应 Intent 包含有关已购买商品的信息，包括 Google Play 生成的用于唯一标识此购买交易的 purchaseToken 字符串。** *（您可以使用此信息）*

一旦您知道交易是否已成功完成，您可以相应地更新您的服务器，如果这是您想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T22:30:47.103

我不太确定您要验证什么。[我认为您应该检查API 参考](http://developer.android.com/google/play/billing/billing_reference.html)中列出的响应代码。

# r - 在 R 中创建矩阵

> ID：14031735
> 
> 赞同：-3
> 
> 时间：2012-12-25T15:03:36.540
> 
> 标签：r, matlab

如何在 R 中创建这个（matlab）矩阵

```
ABC     =    {[1     1     3  ]   [4      5    6  ]
              [1     1     2  ]   [1      1    2  ]
              [1    32    2   ]   [2      3    1  ] }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:05:52.200

这是一个`array`输入`R`：

```
ABC <- array(c(1,1,1, 1,1,32, 3,2,2, 4,1,2, 5,1,3, 6,2,1), dim=c(3,3,2))

> ABC
, , 1

     [,1] [,2] [,3]
[1,]    1    1    3
[2,]    1    1    2
[3,]    1   32    2

, , 2

     [,1] [,2] [,3]
[1,]    4    5    6
[2,]    1    1    2
[3,]    2    3    1 
```

（假设我的结构正确。自从我上次接触以来已经有几十年了`matlab`。）

# html - 如何在没有文本对齐的情况下在 div 中居中？

> ID：14031740
> 
> 赞同：9
> 
> 时间：2012-12-25T15:04:39.640
> 
> 标签：html, css

如何在`wrapper`不使用的情况下将正方形居中`text-align:center`？
我需要这个，因为它还将所有文本都集中在正方形中，但我不需要这个。

**HTML**：

```
 <div id="wrapper">
        <div id="squares">
            <div class="square">lol</div>
            <div class="square">lol</div>
            <div class="square">lol</div>
            <div class="square">lol</div>
            <div class="square">lol</div>
            <div class="square">lol</div>
            <div class="square">lol</div>
        </div>
    </div> 
```

**CSS**：

```
html, body{
    height: 100%;
}
body {
    line-height: 18px;
}

#wrapper{
    width: 960px;
    height: 100%;
    border: 1px solid red;
    margin: 0 auto;
}
.square {
    width:251px;
    height:207px;   
    border: 1px solid #d6d6d6;
    -webkit-box-shadow: 1px 1px 3px rgba(0,0,0,.1);
    -moz-box-shadow: 1px 1px 3px rgba(0,0,0,.1);
    box-shadow: 1px 1px 3px rgba(0,0,0,.1);
    margin: 10px;
    overflow:hidden;
    position:relative;
    background-color:#fff;
    display: inline-block;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T15:10:09.827

```
#wrapper{
    ...
    text-align: center;
}
.square {
    ...
    text-align: left;
} 
```

---- Another way (I don't recommed!)

How to find 52px: (width of div - (#of squares * width of one square))/ #of squares+1 -> (960-(250*3))/4

```
#wrapper{ 
... 
padding-left:52px; 
} 
.square {
...
margin: 10px 52px 10px 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T15:19:27.650

你可以试试：

```
.squares {
    margin-left:auto;
    margin-right:auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T16:26:12.723

由于它是正方形内的文本，因此您可以在文本周围放置一个`H`或标记，然后再放置它们。`P``text-align: left;`

# ruby - Errno::EACCES：通过 gitlab 安装 gem 时权限被拒绝

> ID：14031741
> 
> 赞同：12
> 
> 时间：2012-12-25T15:04:49.373
> 
> 标签：ruby, gem, bundle, bundler, gitlab

我正在尝试设置 gitlab 并因此使用 sudo 从另一个用户帐户安装一些 gem，但我经常遇到`Permission denied`错误。

```
sudo -u gitlab -H bundle install --deployment --without development test postgres

> Using ... ( a lot of successful gems there )
> Using pygments.rb (0.3.2) from https://github.com/gitlabhq/pygments.rb.git (at master) 
> Errno::EACCES: Permission denied - pygments.rb-0.3.2.gem
> An error occurred while installing pygments.rb (0.3.2), and Bundler cannot continue.
> Make sure that `gem install pygments.rb -v '0.3.2'` succeeds before bundling.\

sudo -u gitlab -H gem install pygments.rb -v '0.3.2'

> Successfully installed pygments.rb-0.3.2
> 1 gem installed
> Installing ri documentation for pygments.rb-0.3.2...
> Installing RDoc documentation for pygments.rb-0.3.2...
# no matter how many times I run this command, I always get the same output
# as if the gem installation doesn't stick 

# I've tried to chmod
chmod 777 -R /usr/local/lib/ruby

# then Again
sudo -u gitlab -H bundle install --deployment --without development test postgres
# same result, Errno::EACCES: Permission denied - pygments.rb-0.3.2.gem 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-25T17:11:48.400

Lain 建议尝试将捆绑包安装到另一个子目录中。解决后，很明显问题出在当前目录中的权限上。

执行`chown -R gitlab:gitlab .`解决了问题。

在 gitlab 安装指南中，在`gem install`我们的故事之前有一个以 root 身份运行的命令，并且可能在此`gemfile`期间该文件或其他文件有权限更改。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-05T02:28:51.710

这是 ruby​​-2.0.0-p195 rvm 中带有 bundle install 的权限错误

你在用rvm吗？你用 sudo 尝试过 chmod 吗？

`chmod 755 (or 777) ~/.rvm/gems/ruby-2.0.0-p195/build_info/`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-27T14:00:22.523

我做了以下事情并开始工作。

我更改了 Gemfile 的权限。IE`chmod 755 Gemfile`

然后我做了一个`sudo bundle install`。这让一切正常，所有的宝石都安装好了。然后我可以通过`rails server`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-24T12:12:56.757

确保您`Gemfile.lock`属于运行该命令的用户

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-22T07:16:35.700

尽管亚历克斯的回答是正确的，但这也对我有用

```
sudo chown -R git:git /path/to/external/volume 
```

我正在使用 Digital Ocean 的 Gitlab Image

# windows - 无法访问 jarfile windows-service-wrapper-*.jar

> ID：14031744
> 
> 赞同：7
> 
> 时间：2012-12-25T15:05:08.203
> 
> 标签：windows, installation, neo4j

我刚刚在我的 Windows 计算机上安装了 neo4j 版本 1.8.1。自述文件说我现在应该导航到安装目录并键入：

`C:\Tmp>bin\neo4j.bat`

但我收到以下错误消息：

`Error: Unable to access jarfile C:\Tmp\bin\windows-service-wrapper-*.jar`

即使 bin 目录确实包含文件 windows-service-wrapper-4.jar

我是新手。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T22:57:13.230

只需编辑**\bin\base.bat**并替换

`set wrapperJarFilename=windows-service-wrapper-*.jar`

至

`set wrapperJarFilename=windows-service-wrapper-4.jar`

# c++ - LoadLibrary A 在哪里寻找文件？

> ID：14031749
> 
> 赞同：2
> 
> 时间：2012-12-25T15:05:38.517
> 
> 标签：c++, windows, dll, loadlibrary

我的代码使用 LoadLibraryA("someDLL.dll"); 它开始搜索文件 someDLL.dll 的路径是什么？还有另一个问题：LoadLibraryA 函数是否区分大小写？我的意思是如果我有 SomeDLL.dll 它不会加载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:32:49.003

MSDN 库文章[Dynamic-Link Library Search Order指定了启用](http://msdn.microsoft.com/en-us/library/ms682586%28v=vs.85%29.aspx#standard_search_order_for_desktop_applications)**SafeDllSearchMode**时桌面应用程序的搜索顺序，这是从 Windows XP SP2 开始的默认设置：

> 1.  加载应用程序的目录。
> 2.  系统目录。使用 GetSystemDirectory 函数获取该目录的路径。
> 3.  16 位系统目录。没有函数获取这个目录的路径，但是被搜索了。
> 4.  Windows 目录。使用 GetWindowsDirectory 函数获取该目录的路径。
> 5.  当前目录。
> 6.  PATH 环境变量中列出的目录。请注意，这不包括 App Paths 注册表项指定的每个应用程序路径。计算 DLL 搜索路径时不使用 App Paths 键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:11:25.640

[`LoadlLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)文章在备注中指定搜索顺序：

> 如果 lpFileName 不包含路径并且有多个加载的模块具有相同的基本名称和扩展名，则该函数返回第一个加载的模块的句柄。
> 
> 如果在 lpFileName 参数中未指定文件扩展名，则附加默认库扩展名 .dll。但是，文件名字符串可以包含一个尾随点字符 (.)，以指示模块名称没有扩展名。当未指定路径时，该函数搜索其基本名称与要加载的模块的基本名称匹配的已加载模块。如果名称匹配，则加载成功。否则，该函数将搜索该文件。[...]
> 
> 有关 DLL 搜索顺序的详细信息，请参阅[动态链接库搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx)。

文件名不区分大小写，因此 NTFS 和 FAT 文件名是。不区分大小写是[基本规则：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)

> 命名约定
> 
> 以下基本规则使应用程序能够创建和处理文件和目录的有效名称，而不管文件系统如何：[...]
> 
> 不要假设区分大小写。

# django - 国际化不起作用或我不知道如何使它起作用

> ID：14031753
> 
> 赞同：1
> 
> 时间：2012-12-25T15:06:07.220
> 
> 标签：django, localization, internationalization

Settings.py 常量

```
TIME_ZONE = 'Europe/Vilnius'
LANGUAGE_CODE = 'lt'
USE_I18N = True
USE_L10N = True
USE_TZ = True

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

如果我添加`LocaleMiddleware`到中间件类并编辑源代码以便打印我的语言环境，它会`lt`按预期打印。

而且：

`./manage.py makemessages -l lt`生成文件，我翻译了文本出现。

`./manage.py compilemessages`返回`processing file django.po in /Users/aemdy/PycharmProjects/rezervavau_v2/locale/lt/LC_MESSAGES`

但遗憾的是，我仍然在我的页面中看到英文文本。

我使用 django admin 并翻译了基本 django admin 中包含的短语（更改密码、密码、编辑等）。尽管如此，我自己定义的短语仍以英语显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:55:10.040

好吧，我自己找到了答案。

我需要添加以下行`settings.py`：

`LOCALE_PATHS = (os.path.join(os.path.dirname(__file__), '../locale/'),)`

# delphi - 在 XMLDocument 中使用 DocumentElement 时访问冲突

> ID：14031756
> 
> 赞同：7
> 
> 时间：2012-12-25T15:06:36.787
> 
> 标签：delphi, xmldocument

当我尝试使用`DocumentElement`. `XMLDocument`我`XMLDocument`根据某些文件的存在创建。

**错误信息**

> 项目 project1.exe 引发异常类 EAccessViolation，并带有消息“模块 'project1.exe' 中地址 0047B152 的访问冲突。读取地址 B1D59357”

**我的代码**

```
unit XMLBase;

interface
uses
  SysUtils, xmldom, XMLIntf, XMLDoc, Forms;

type
  TXMLbase = class
  private
    { Private declarations }
  public
    XMLDocument1: TXMLDocument;
    root: IXMLNode;    
    constructor Create;
  end;

var
  fn: string;

implementation

constructor TXMLbase.Create;
begin   
  fn := ChangeFileExt(Application.ExeName, '.xml');
  XMLDocument1 := TXMLDocument.Create(nil);
  XMLDocument1.Options := [doNodeAutoIndent];
  XMLDocument1.Active := False;
  //optional, is used to indent the Xml document
  if FileExists(fn) then
  begin
  XMLDocument1.LoadFromFile(fn);
  XMLDocument1.Active:= True;
  root := XMLDocument1.DocumentElement;  //<<--- Access Voilation
  end
  else
  begin
    XMLDocument1.Active := False;
    XMLDocument1.XML.Text := '';
    XMLDocument1.Active := True;
    root := XMLDocument1.AddChild('Settings');    
  end;
XMLDocument1.SaveToFile(fn);
end;

end. 
```

访问冲突是由于对象或指针的不正确初始化引起的，这是否意味着`XMLDocument`没有被初始化？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T15:51:22.173

你正在传递`nil`给`TXMLDocument.Create`. 执行此操作时，对象的行为类似于`TInterfacedObject`. 它的生命周期由接口引用计数管理。但是您没有持有对接口的引用。

[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/Xml.XMLDoc.TXMLDocument)对此进行了详细介绍。

> 在没有所有者的情况下创建 TXMLDocument 时，它的行为类似于接口对象。也就是说，当所有对其接口的引用都被释放时，TXMLDocument 实例被自动释放。但是，当使用 Owner 创建 TXMLDocument 时，它的行为与任何其他组件一样，并由其 Owner 释放。

如果启用 Debug DCU 并在其中设置断点，`TXMLDocument.Destroy`则可以观察到对象在访问冲突之前被销毁。

通过以下任一方式解决问题：

1.  创建文档时传递所有者。
2.  切换到使用接口来引用对象。即声明`XMLDocument1`为`IXMLDocument`.

请确保您执行其中一项或多项，但不能同时执行两项！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T17:08:13.220

正如大卫所说，只需将您的 XMLDocument1 声明从 更改为`XMLDocument1: TXMLDocument`即可`XMLDocument1: IXMLDocument`解决问题。您的问题与[使用 TXMLDocument有关](https://stackoverflow.com/questions/1532353/issue-building-an-xml-document-using-txmldocument)

# windows-phone-8 - 在 Windows Phone 8 中使用的图标

> ID：14031762
> 
> 赞同：15
> 
> 时间：2012-12-25T15:07:21.237
> 
> 标签：windows-phone-8

我正在为 Windows 8 开发基于 API 的应用程序。我有点困惑。我正在制作要在瓷砖中使用的图像。我使用本指南做了一些：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx)。

现在，当我打开项目并检查 Assets/Icons 文件夹时，我观察到不同的大小，如下所示：

```
FlipCycleTileLarge    691 * 336
FlipCycleTileMedium   336 * 336
FlipCycleTileSmall    159 * 159
IconicTileMediumLarge 134 * 202
IconicTileSmall       71  * 110 
```

谁能告诉我要放入文件夹中的图像的确切数量及其分辨率以及相应的名称，这样应用程序就不会被拒绝。

注意：我的应用不提供动态磁贴之类的功能。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-25T15:32:57.383

您需要阅读[Windows Phone 的应用程序提交要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184844%28v=vs.105%29.aspx)。第 4.7 节为您提供了所需的图像列表。阅读完整部分以了解所有详细信息，但在高层次上，您将需要：

*   应用列表图片
    *   对于 Windows Phone OS 7.1，一个 62 x 62 像素的 PNG 图像。
    *   对于 Windows Phone 8，一个 99 x 99 像素的 PNG 图像。
*   默认平铺图像
    *   对于 Windows Phone OS 7.1 ，为中等 Tile 大小的 PNG 图像。有关图像尺寸的详细信息，请参阅 Windows Phone OS 7.1 Tile 模板。
    *   对于 Windows Phone 8 ，为中型和小型 Tile 尺寸的 PNG 或 JPEG 图像。图像尺寸取决于您为默认平铺选择的平铺模板。有关图像尺寸的详细信息，请参阅相应的 Tile 模板主题：Windows Phone 8 的 Flip Tile 模板、Windows Phone 8 的 Iconic Tile 模板或 Windows Phone 8 的 Cycle Tile 模板。
*   Windows Phone 应用商店应用映像
    *   300 x 300 像素的非透明 PNG 图像。

有关[瓷砖图像的更多详细信息，请参见此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948%28v=vs.105%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T00:41:26.553

如果有人遇到这篇文章并且遇到了 XAP 打包失败并且 VS2012 找不到文件的问题，请检查文件名中的空格。我遇到了我的瓷砖是“tilename 99.png”的问题，它一直给我 XAP 打包失败的消息。所以我最终将文件名更改为“tilename_99.png”并且它起作用了。

希望这可以帮助处于同样困境的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T13:45:39.757

我认为这是最好的 MSDN 页面，它描述了适用于 Win 8.1 的 Windows RT（通用应用程序）的应用程序图标大小、磁贴大小以及缩放因子和像素密度的所有方面，如果您仍要更新您的应用程序：

[https://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/hh781198.aspx)

# node.js - 在 Node.js 退出之前执行清理操作

> ID：14031763
> 
> 赞同：404
> 
> 时间：2012-12-25T15:07:26.430
> 
> 标签：node.js

我想告诉 Node.js 总是在它退出之前做一些事情，无论出于何种原因—— `Ctrl`+ `C`、异常或任何其他原因。

我试过这个：

```
process.on('exit', function (){
    console.log('Goodbye!');
}); 
```

我开始了这个过程，杀死了它，什么也没发生。我再次启动它，按`Ctrl`+ `C`，仍然没有任何反应......

* * *

## 回答 #1

> 赞同：626
> 
> 时间：2012-12-25T18:17:56.537

## 更新：

`process.on('exit')`您可以为任何其他情况（`SIGINT`或未处理的异常）注册一个处理程序以调用`process.exit()`

```
process.stdin.resume();//so the program will not close instantly

function exitHandler(options, exitCode) {
    if (options.cleanup) console.log('clean');
    if (exitCode || exitCode === 0) console.log(exitCode);
    if (options.exit) process.exit();
}

//do something when app is closing
process.on('exit', exitHandler.bind(null,{cleanup:true}));

//catches ctrl+c event
process.on('SIGINT', exitHandler.bind(null, {exit:true}));

// catches "kill pid" (for example: nodemon restart)
process.on('SIGUSR1', exitHandler.bind(null, {exit:true}));
process.on('SIGUSR2', exitHandler.bind(null, {exit:true}));

//catches uncaught exceptions
process.on('uncaughtException', exitHandler.bind(null, {exit:true})); 
```

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2014-02-22T00:25:11.503

下面的脚本允许对所有退出条件使用一个处理程序。它使用特定于应用程序的回调函数来执行自定义清理代码。

**清理.js**

```
// Object to capture process exits and call app specific cleanup function

function noOp() {};

exports.Cleanup = function Cleanup(callback) {

  // attach user callback to the process event emitter
  // if no callback, it will still exit gracefully on Ctrl-C
  callback = callback || noOp;
  process.on('cleanup',callback);

  // do app specific cleaning before exiting
  process.on('exit', function () {
    process.emit('cleanup');
  });

  // catch ctrl+c event and exit normally
  process.on('SIGINT', function () {
    console.log('Ctrl-C...');
    process.exit(2);
  });

  //catch uncaught exceptions, trace, then exit normally
  process.on('uncaughtException', function(e) {
    console.log('Uncaught Exception...');
    console.log(e.stack);
    process.exit(99);
  });
}; 
```

此代码拦截未捕获的异常、`Ctrl`+`C`和正常退出事件。然后它在退出之前调用一个可选的用户清理回调函数，用一个对象处理所有退出条件。

该模块只是扩展了流程对象，而不是定义另一个事件发射器。如果没有特定于应用程序的回调，则清理默认为无操作函数。这足以让我在通过`Ctrl`+退出时让子进程继续运行的情况下使用`C`。

您可以根据需要轻松添加其他退出事件，例如 SIGHUP。注意：根据 NodeJS 手册，SIGKILL 不能有监听器。下面的测试代码演示了使用 cleanup.js 的各种方式

```
// test cleanup.js on version 0.10.21

// loads module and registers app specific cleanup callback...
var cleanup = require('./cleanup').Cleanup(myCleanup);
//var cleanup = require('./cleanup').Cleanup(); // will call noOp

// defines app specific callback...
function myCleanup() {
  console.log('App specific cleanup code...');
};

// All of the following code is only needed for test demo

// Prevents the program from closing instantly
process.stdin.resume();

// Emits an uncaught exception when called because module does not exist
function error() {
  console.log('error');
  var x = require('');
};

// Try each of the following one at a time:

// Uncomment the next line to test exiting on an uncaught exception
//setTimeout(error,2000);

// Uncomment the next line to test exiting normally
//setTimeout(function(){process.exit(3)}, 2000);

// Type Ctrl-C to test forced exit 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2018-03-20T19:29:27.540

这会捕获我能找到的每个可以处理的退出事件。到目前为止看起来相当可靠和干净。

```
[`exit`, `SIGINT`, `SIGUSR1`, `SIGUSR2`, `uncaughtException`, `SIGTERM`].forEach((eventType) => {
  process.on(eventType, cleanUpServer.bind(null, eventType));
}) 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-12-25T20:11:02.790

“exit”是一个事件，当节点在内部完成它的事件循环时触发，当你在外部终止进程时它不会被触发。

您正在寻找的是在 SIGINT 上执行某些操作。

[http://nodejs.org/api/process.html#process_signal_events](http://nodejs.org/api/process.html#process_signal_events)上的文档给出了一个例子：

监听 SIGINT 的示例：

```
// Start reading from stdin so we don't exit.
process.stdin.resume();

process.on('SIGINT', function () {
  console.log('Got SIGINT.  Press Control-D to exit.');
}); 
```

注意：这似乎会中断 sigint，您需要在完成代码时调用 process.exit()。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-02-02T18:26:19.403

```
function fnAsyncTest(callback) {
    require('fs').writeFile('async.txt', 'bye!', callback);
}

function fnSyncTest() {
    for (var i = 0; i < 10; i++) {}
}

function killProcess() {

    if (process.exitTimeoutId) {
        return;
    }

    process.exitTimeoutId = setTimeout(() => process.exit, 5000);
    console.log('process will exit in 5 seconds');

    fnAsyncTest(function() {
        console.log('async op. done', arguments);
    });

    if (!fnSyncTest()) {
        console.log('sync op. done');
    }
}

// https://nodejs.org/api/process.html#process_signal_events
process.on('SIGTERM', killProcess);
process.on('SIGINT', killProcess);

process.on('uncaughtException', function(e) {

    console.log('[uncaughtException] app will be terminated: ', e.stack);

    killProcess();
    /**
     * @https://nodejs.org/api/process.html#process_event_uncaughtexception
     *  
     * 'uncaughtException' should be used to perform synchronous cleanup before shutting down the process. 
     * It is not safe to resume normal operation after 'uncaughtException'. 
     * If you do use it, restart your application after every unhandled exception!
     * 
     * You have been warned.
     */
});

console.log('App is running...');
console.log('Try to press CTRL+C or SIGNAL the process with PID: ', process.pid);

process.stdin.resume();
// just for testing 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-08-12T19:38:25.970

只想`death`在这里提一下包：[https ://github.com/jprichardson/node-death](https://github.com/jprichardson/node-death)

例子：

```
var ON_DEATH = require('death')({uncaughtException: true}); //this is intentionally ugly

ON_DEATH(function(signal, err) {
  //clean up code here
}) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-09-10T19:16:17.463

[async-exit-hook](https://www.npmjs.com/package/async-exit-hook)似乎是处理这个问题的最新解决方案。[它是exit-hook](https://www.npmjs.com/package/exit-hook)的分叉/重写版本，在退出之前支持异步代码。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-28T12:56:06.173

我需要在退出时执行异步清理操作，这个问题中的任何答案都不适合我。

于是我自己试了一下，终于找到了这个：

```
process.once('uncaughtException', async () => {
  await cleanup()

  process.exit(0)
})

process.once('SIGINT', () => { throw new Error() }) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-08T16:41:36.047

在玩弄了其他答案之后，这是我完成此任务的解决方案。实施这种方式有助于我将清理集中在一个地方，防止重复处理清理。

1.  我想将所有其他退出代码路由到“退出”代码。

```
const others = [`SIGINT`, `SIGUSR1`, `SIGUSR2`, `uncaughtException`, `SIGTERM`]
others.forEach((eventType) => {
    process.on(eventType, exitRouter.bind(null, { exit: true }));
}) 
```

2.  exitRouter 所做的是调用 process.exit()

```
function exitRouter(options, exitCode) {
   if (exitCode || exitCode === 0) console.log(`ExitCode ${exitCode}`);
   if (options.exit) process.exit();
} 
```

3.  在“退出”时，使用新功能处理清理

```
function exitHandler(exitCode) {
  console.log(`ExitCode ${exitCode}`);
  console.log('Exiting finally...')
}

process.on('exit', exitHandler) 
```

出于演示目的，[这是指向](https://gist.github.com/hieutle2011/1f990d7a6b1741a307e920183e6804f6)我的要点的链接。在文件中，我添加了一个 setTimeout 来伪造正在运行的进程。

如果您运行`node node-exit-demo.js`并且什么也不做，那么 2 秒后，您会看到日志：

```
The service is finish after a while.
ExitCode 0
Exiting finally... 
```

否则，如果在服务完成之前，您通过 终止`ctrl+C`，您将看到：

```
^CExitCode SIGINT
ExitCode 0
Exiting finally... 
```

发生的事情是 Node 进程最初以代码 SIGINT 退出，然后它路由到 process.exit()，最后以退出代码 0 退出。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-31T15:53:28.053

[io.js](https://iojs.org/)有一个[`exit`](https://iojs.org/api/process.html#process_event_exit)和一个[`beforeExit`](https://iojs.org/api/process.html#process_event_beforeexit)事件，可以做你想做的事。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-04-20T23:12:57.073

如果该进程是由另一个节点进程生成的，例如：

```
var child = spawn('gulp', ['watch'], {
    stdio: 'inherit',
}); 
```

稍后您尝试通过以下方式杀死它：

```
child.kill(); 
```

这就是您处理事件的方式 [on the child]：

```
process.on('SIGTERM', function() {
    console.log('Goodbye!');
}); 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2020-04-19T05:44:18.843

这是 Windows 的一个不错的 hack

```
process.on('exit', async () => {
    require('fs').writeFileSync('./tmp.js', 'crash', 'utf-8')
}); 
```

# magento - Magento 幻灯片图像未更新

> ID：14031764
> 
> 赞同：0
> 
> 时间：2012-12-25T15:07:26.897
> 
> 标签：magento

我是 Magento 的新手并尝试 Magento 1.7 我已经安装了一个主题并尝试更改主题的图像。我在正确的路径中复制了新图像并将其重命名为旧图像名称。我期待新图像会出现，但它不起作用。我确保新图像也是 png 文件，并且与现有图像大小相同。我在这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:18:11.977

我没有更改 png 文件权限。我改变了它开始工作

# ruby-on-rails - 查看不显示数据

> ID：14031765
> 
> 赞同：0
> 
> 时间：2012-12-25T15:07:36.493
> 
> 标签：ruby-on-rails, ruby

我有以下观点`app/views/posts/index.html.erb`：

```
<% @posts.each do |post| %>

<%= post.user %> is listening to <%= post.song %> by <%= post.artist %> from <%= post.album %>

<% end %> 
```

以及对应的控制器：

```
class PostsController < ApplicationController
  def index
    @posts = Post.find(:all)   
  end

  def show
    @post = Post.find(params[:id])  
  end 

  def new
    @post = Post.new           
  end

  def create                   
    @post = Post.new(params[:posts])
    if @post.save              
      redirect_to action: "index"     
    else                       
      @posts = Post.find(:all) 
      render action: 'new'     
    end
  end
end 
```

问题是，当我创建歌曲属性为“The Sound of Settling”、艺术家属性为“Death Cab for Cutie”、专辑属性为“Transatlanticism”的记录时，当我渲染索引视图时没有显示任何内容.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:47:12.880

正如@house9 和@bdares 所说，我`:posts`应该`create`采取行动`:post`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:47:34.423

对于这种情况，[命令行](http://guides.rubyonrails.org/command_line.html)是无价的。

```
$ rails console 
```

然后玩耍，插入一些数据，获取一些数据。从这里出了什么问题开始：

```
> @posts = Post.find(:all)
> pp @posts 
```

没有结果？根本没有帖子。可能是因为插入时出现问题：

```
> @post = Post.new({:user => 1, :song => "give it up", :artist => "rick", :album => "youtube greatest hits"})
> @post.valid?
> pp @post.errors
> @post.save! 
```

它使您可以事先消除大多数问题。

# gwt - GWT 验证框架国际化，错误的代码页

> ID：14031767
> 
> 赞同：0
> 
> 时间：2012-12-25T15:07:52.733
> 
> 标签：gwt, internationalization, codepages, gwt-validation

这个和我[之前的帖子](https://stackoverflow.com/questions/14019777/gwt-validation-framework-internationalization-for-messages-in-annotations/14021487#14021487)有关。我的问题是，在我`ValidationMessages.properties`以英语以外的语言（在我的情况下为乌克兰语和捷克语）输入消息后，我最终弄乱了字符。捆绑包中所有这些`ValidationMessages.properties`文件的编码都是 UTF-8，与我用于其他翻译的编码相同，而且效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:12:45.843

在使用 ResourceBundle 类在服务器端读取 UTF-8 属性文件时，我遇到了类似的问题。Java 假定属性文件是 ISO-8859-1，而 GWT 假定它们是 UTF-8。奇怪的是，没有“单线”方式告诉 java 将其读取为 UTF-8。我最终实现了[这个解决方案](https://stackoverflow.com/questions/4659929/how-to-use-utf-8-in-resource-properties-with-resourcebundle)来在服务器端读取它，它对我来说效果很好，尽管它并不像人们希望的那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:35:33.907

我不知道究竟是什么解决了这个问题，但是当我从 GWT Validation 转移到 Hibernate Validation 库时，它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:54:54.280

在查看了 Hibernate Validation 库及其内容后，我注意到捷克语和匈牙利语等语言的默认翻译，它们使用 JavaScript Unicode 表示法（如`\u0000`）来表示特殊字符。看起来丑陋但有效。

# linux - 使用 wget 和 SFTP 获取文件

> ID：14031773
> 
> 赞同：6
> 
> 时间：2012-12-25T15:09:01.553
> 
> 标签：linux, wget, sftp

大家好...

我每天晚上在一台 linux 服务器上运行一个脚本，它打算使用 wget 和 ftp 协议从另一个服务器获取文件。这些文件位于无法通过 HTTP 访问的文件夹下。

这是使用的命令行：

```
wget --directory-prefix=localFolder ftp://login:password@adress.ip.of.server/path/* 
```

站点访问已更改为 SFTP。我想修改脚本以便能够像以前一样获取文件，但不要设法用​​ SFTP 做到这一点。

我尝试使用 ssh-keygen 生成一个安全密钥，然后将其复制到我想要访问的服务器，但它没有成功，或者我只是没有成功找到正确的方法......

提前感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:39:21.777

要复制密钥，我发现这`ssh-copy-id user@machine`可以满足您的所有需求。只要你的机器上有钥匙。

我也使用`scp`了很多，您指定的地方`scp user@machine:filespec whereto`（它使用与 sftp 相同的加密和身份验证机制）。

希望这可以帮助。

# java - Explaining extends

> ID：14031774
> 
> 赞同：0
> 
> 时间：2012-12-25T15:09:04.110
> 
> 标签：java, oop, extends

so i have my programming exam this winter and one of my assignments is to explain what extends is without using a programming example.

Now i know what it is but i find it hard to explain with words how would you explain it? Like you extends which means you are a part of the class and can add additional information to the class that only your object can see i.e a `Plane` **extends** `Vehicle` but has its own methods called take off that allows it to fly.

How would you guys explain `extends`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:51:15.523

Java 中的`extends`关键字有多种作用，这取决于您`extends`的 . 如果`C`是您希望扩展的实体。

*   如果`C`是非`abstract`类并且是，则根本无法扩展它`final`；

*   If`C`是一个非最终的、非抽象的类：

    *   您可以扩展它以添加构造函数；
    *   您可以覆盖任何`C`未声明为 final 的方法；
    *   您可以定义其他实例变量、方法等。
*   If`C`是一个抽象类，并且您提供了它的具体（即非抽象）实现：

    *   您*必须*提供调用此抽象类的构造函数的构造函数——*所有这些*构造函数；
    *   您*必须*提供`abstract`在扩展类中声明的方法的实现；
    *   您*可以*覆盖此类的方法的实现，这些方法不是`abstract`；
    *   您*不能*覆盖此类中声明为 final 的方法的实现；
    *   您*可以*添加额外的构造函数、实例变量等；
*   如果`C`是一个接口：

    *   你只能声明一个`interface`扩展另一个；您不能实现扩展接口的类（即`implements`）。

而且，更一般地说，您可以实现多个接口，但只能扩展一个类/抽象类（Java 没有多重继承）。

答案肯定要编辑，随时添加评论/问题/等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:17:23.177

你可以在你周围找到例子..... 例如：动物和不同种类的动物车辆，不同的车辆具有一些共同的属性和一些特定的属性。具有共同属性的形状，如面积、周长等，不同的形状计算这些函数的方式不同。

# mobile - How do I change the layout of an Appixia BasicItemListActivity module?

> ID：14031775
> 
> 赞同：0
> 
> 时间：2012-12-25T15:09:04.800
> 
> 标签：mobile, appixia

When using the simple item list module `BasicItemListActivity` you don't have the ability to customize the layout of the item list, you can only change the colors. What should I do when I want a customization like having a list with several images per item or several text fields / prices?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:09:04.800

The `BasicItemListActivity` is a bit too simple for these requirements. What you're looking for is actually one of the powerful views like `ItemGridView` (for tables or grids) or `ItemCarouselView` (for carousels).

Each of these views actually displays another custom view for each of the items you have. A good view to choose for this purpose is `BasicItemCellView` - which offers a lot of customization on how each item in the list is presented. Don't forget to connect the BasicItemCellView to the container view using the `CellModule` property.

# c# - Predicting the sum of two doubles

> ID：14031778
> 
> 赞同：1
> 
> 时间：2012-12-25T15:09:38.977
> 
> 标签：c#, javascript, math, double, computer-science

> **Possible Duplicate:**
> [Is JavaScript’s Floating-Point Math Broken?](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)

This is going to be a very rudimentary comp-sci question. Consider the following C# (the same holds true for JS, I assume it's how math works with doubles in general).

```
var i = .01;
i+=.01; //i=.02
i+=.01; //i=.03
i+=.01; //i=.04
i+=.01; //i=.05
i+=.01; //i=.0600000000005 (I may have added/missed a few 0s in there)
i+=.01; //i=.07
i+=.01; //i=.08
i+=.01; //i=.09
i+=.01; //i=.0999999999992 (I may have added/missed a few 9s in there) 
```

So, what's happening and how can I accurately predict the sum of i+.01?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T15:25:27.413

双精度数不仅仅是为您的数字获取小数点的一种方法。它使用浮点数学。[Pete Becker](http://www.petebecker.com/js/js200006.html)的这篇文章很好地解释了它是如何工作的。

# linux - Bash 终端和颜色输出

> ID：14031779
> 
> 赞同：0
> 
> 时间：2012-12-25T15:09:50.223
> 
> 标签：linux, macos, bash, shell

我有一个启用了颜色的外壳：

```
man -P cat blabla > afile 
```

*somefile*包含用于着色的转义字符。现在我想*用*它的颜色将*somefile*输出到终端。我试过：

 *```
cat afile 
```

但根本没有任何格式。我发现的唯一方法是使用

```
less afile 
```

但我不想要寻呼机。我只想输出文件而不进入一些交互模式。必须有一个简单的命令来做到这一点，但我找不到它:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:02:42.013

查看您创建的文件。它看起来像这样（在[vi](https://en.wikipedia.org/wiki/Vi)中查看时）：

```
LS(1)                     BSD General Commands Manual                    LS(1)

N^HNA^HAM^HME^HE
     l^Hls^Hs -- list directory contents

S^HSY^HYN^HNO^HOP^HPS^HSI^HIS^HS
     l^Hls^Hs [-^H-A^HAB^HBC^HCF^HFG^HGH^HHL^HLO^HOP^HPR^HRS^HST^HTU^HUW^HW@^H@a^Hab^Hbc^Hcd^Hde^Hef^Hfg^Hgh^Hhi^Hik^Hkl^Hlm^Hmn^Hno^Hop^Hpq^Hqr^Hrs^Hst^Htu^Huw^Hwx^Hx1^H1] [_^Hf_^Hi_^Hl_^He _^H._^H._^H.]

D^HDE^HES^HSC^HCR^HRI^HIP^HPT^HTI^HIO^HON^HN
     For each operand that names a _^Hf_^Hi_^Hl_^He of a type other than directory, l^Hls^Hs
     displays its name as well as any requested, associated information.  For
     each operand that names a _^Hf_^Hi_^Hl_^He of type directory, l^Hls^Hs displays the names
     of files contained within that directory, as well as any requested, asso-
     ciated information. 
```

看到了`^H`吗？这意味着备份一个空间。该`man`命令生成[troff](http://en.wikipedia.org/wiki/Troff)输出，然后将该输出通过管道传输到 nroff 本身以格式化该输出以供显示。***Troff 是一个格式化打印***页面的文本格式化程序。因此，要加粗一个单词，`troff`将在一个字母上退格并在其上键入。这样做的次数越多，字母就越黑。

当您在终端上使用`man`或`nroff`时，它会理解这`B^HB`意味着粗体`B`，并将以终端突出显示的颜色显示该字母。该`less`命令做同样的事情。

另一方面，您的`cat`命令实际上是按原样显示文件。当它看到序列`B^HB`时，它会`B`在您的屏幕上显示一个，备份一个空格，并`B`在前一个的顶部显示另一个`B`。由于这是终端而不是打印机，因此第二个`B`显示在与前一个相同的像素之上`B`。

试试这个（因为你在 Mac 上）：

```
CLICOLOR_FORCE=1
ls > ls.txt
cat ls.txt 
```

请注意，这确实显示了颜色。设置`CLICOLOR_FORCE`环境变量会强制`ls`显示彩色输出***，即使它没有显示在终端上***。如果您查看`ls.txt`in `VI`，您会看到类似`[34m`和的序列`^[[m^[[m`。这告诉 ANSI 终端设置各种颜色，`cat`并将显示这些颜色（除非您使用该`-v`选项）。

换句话说，你的假设是倒退的。Cat 为您提供了文件的完美再现版本，而该`less`命令正在处理输出以将*字母-退格-字母*序列显示为粗体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:35:03.983

`man`实际上并没有将终端转义序列放在其输出中。要制作粗体字符，它会输出`char <backspace> char`，而对于下划线，它会输出`_ <backspace> char`。寻呼机喜欢`more`并`less`识别这些序列，并将它们转换为适当的终端转义序列，以显示粗体和下划线。

`cat`，另一方面，只输出文件中的内容。它不知道如何进行终端特定的翻译。当终端收到 a`<backspace>`时，它只是将光标向上备份并用下一个字符输出覆盖它。结果是您获得了没有额外标记的可读文本（这就是为什么`man`在下划线时首先发送下划线 - 如果它以另一种方式执行，您只会看到一堆下划线，其中一个单词是预期的）。

你可以看到这个`od -c afile | less`。你应该看到很多`\b`，但没有`\e`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T23:10:05.930

我正在寻找的命令被称为[`ul`](https://linux.die.net/man/1/ul)（做下划线）：

```
/usr/bin/man -P cat somecommand | ul 
```

它为终端很好地格式化了来自[groff](https://en.wikipedia.org/wiki/Groff_%28software%29)的 BACKSPACE 转义格式。*

# python - How do I allow opening of files that have Unicode characters in their filenames?

> ID：14031780
> 
> 赞同：2
> 
> 时间：2012-12-25T15:10:00.533
> 
> 标签：python, windows-7, unicode, batch-file, python-unicode

I have this Python script here that opens a random video file in a directory when run:

```
import glob,random,os  
files = glob.glob("*.mkv")  
files.extend(glob.glob("*.mp4"))  
files.extend(glob.glob("*.tp"))  
files.extend(glob.glob("*.avi"))  
files.extend(glob.glob("*.ts"))  
files.extend(glob.glob("*.flv"))  
files.extend(glob.glob("*.mov"))  
file = random.choice(files)  
print "Opening file %s..." % file  
cmd = "rundll32 url.dll,FileProtocolHandler \"" + file + "\""  
os.system(cmd) 
```

Source: An answer in my Super User post, '[How do I open a random file in a folder, and set that only files with the specified filename extension(s) should be opened?](https://superuser.com/questions/512867/how-do-i-open-a-random-file-in-a-folder-and-set-that-only-files-with-the-specif)'

This is called by a BAT file, with this as its script:

```
C:\Python27\python.exe "C:\Programs\Scripts\open-random-video.py" cd 
```

I put this BAT file in the directory I want to open random videos of.

In most cases it works fine. However, I can't make it open files with Unicode characters (like Japanese or Korean characters in my case) in their filenames.

This is the error message when the BAT file and Python script is run on a directory and opens a file with Unicode characters in its filename:

`C:\TestDir>openrandomvideo.BAT`

`C:\TestDir>∩╗┐C:\Python27\python.exe "C:\Programs\Scripts\open-random-video.py" cd`
`The filename, directory name, or volume label syntax is incorrect.`

Note that the filename of the .FLV video file in that log is changed from its original filename (소시.flv) to '∩╗┐' in the command line log.

EDIT: I learned that the above command line error message is due to [saving the BAT file as 'UTF-8 with BOM'](https://stackoverflow.com/a/14033531/1626811). Saving it as 'ANSI or UTF-16' shows the following message instead, but still does not open the file:

```
C:\TestDir>openrandomvideo.BAT

C:\TestDir>C:\Python27\python.exe "C:\Programs\Scripts\open-random-video.py" cd
Opening file ??.flv... 
```

Now, the filename of the .FLV video file in that log is changed from its original filename (소시.flv) to '??.flv.' in the command line log.

I'm using Python 2.7 on Windows 7, 64-bit.

**How do I allow opening of files that have Unicode characters in their filenames?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:17:17.960

只需使用 Unicode 文字，例如，`u".mp4"`无处不在。如果你给它们 Unicode 输入，Python 中的 IO 函数将返回 Unicode 文件名（在内部，它们可能使用支持 Unicode 的 Windows API）：

```
import os
import random

videodir = u"." # get videos from current directory
extensions = tuple(u".mkv .mp4 .tp .avi .ts .flv .mov".split())
files = [file for file in os.listdir(videodir) if file.endswith(extensions)]
if files: # at least one video file exists
    random_file = random.choice(files)
    os.startfile(os.path.join(videodir, random_file)) # start the video
else:
    print('No %s files found in "%s"' % ("|".join(extensions), videodir,)) 
```

如果您想模拟您的网络浏览器如何打开视频文件，那么您可以使用`webbrowser.open()`而不是`os.startfile()`尽管前者可能会在 Windows 内部使用后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T19:46:21.043

运行BAT文件时的错误是因为BAT文件本身保存为“UTF-8 with BOM”。“∩╗┐”字节不是损坏的文件名，它们是存储在 BAT 文件中的字面第一个字节。将 BAT 文件重新保存为 ANSI 或 UTF-16，这是 BAT 文件支持的唯一编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T18:29:26.340

要么使用 JF Sebastian 描述的 Unicode 文字，要么使用始终使用 Unicode 的 Python 3。

（对于 Python 3，您的脚本需要稍作修改：print 现在是一个函数，因此您必须在参数列表周围加上括号。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T15:36:51.097

请熟悉自己添加`# -*- coding: utf-8 -*-`源代码，

所以python了解你的unicode。

# c - 是否可以用 C/SDL 编写塔防

> ID：14031784
> 
> 赞同：-4
> 
> 时间：2012-12-25T15:10:15.250
> 
> 标签：c, sdl

我必须使用 SDL 库在 ANSI C 中编写塔防游戏，但是我越深入 LazyFoo 的教程，我就越有这种感觉，由于限制，用纯 C 编写它是不可能的。所以我的问题是——我有大麻烦还是我只是恐慌。它必须是一个简单的塔防游戏，没什么花哨的，但是可以只用C来做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T15:12:19.673

C 是图灵完备的语言，因此您可以在其他语言中执行的任何操作也可以在 C 中完成。SDL 为您提供了通常用于（通常是小型/独立）游戏的图形 API。

当然，用 C++ 或更高级别的语言（如 C# 或 Python）编写它可能会更令人愉快——但仍然可以用 C 语言编写。

TL;DR：**是的，这完全有可能。**

# php - php获取系统信息ram使用情况和存储使用情况

> ID：14031786
> 
> 赞同：1
> 
> 时间：2012-12-25T15:10:42.107
> 
> 标签：php

嘿伙计们，我目前正在编写一个小脚本，它显示了 cpu 负载、ram 使用情况和存储使用情况。我已经设法通过这个小脚本获得了 cpu 使用率：

```
$dat = getrusage();
$usertime= $dat['ru_utime.tv_usec'];
$systemtime= $dat['ru_stime.tv_usec'];
$finalresultcpu= ($systemtime/$usertime);
$cpuload = $finalresultcpu * 10;
echo $cpuload; 
```

所以现在我也想获得内存使用和存储使用。Web 服务器在 Linux 机器上运行。我知道有监控脚本 phpsysinfo，但我想使用我自己的解决方案。然后我尝试`shell_exec`了，但这并没有真正的帮助。有人知道我如何用 php 或 php 和 javascript 的组合来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:40:47.760

如果您知道这段代码只能在 Linux 下运行，您可以使用特殊`/proc/meminfo`文件来获取有关系统虚拟内存子系统的信息。该文件具有如下形式：

```
MemTotal:       255908 kB
MemFree:         69936 kB
Buffers:         15812 kB
Cached:         115124 kB
SwapCached:          0 kB
Active:          92700 kB
Inactive:        63792 kB
... 
```

第一行，`MemTotal: ...`，包含机器中物理 RAM 的数量，减去内核为自己使用而保留的空间。这是我所知道的获得 Linux 系统上可用内存的简单报告的最佳方式。您应该能够通过类似以下代码的方式提取它：

```
<?php
  $fh = fopen('/proc/meminfo');
  $mem = 0;
  while ($line = fgets($fh)) {
    $pieces = array();
    if (preg_match('^MemTotal:\s+(\d+)\skB$', $line, $pieces)) {
      $mem = $pieces[1];
      break;
    }
  }
  fclose($fh);

  echo "$mem kB RAM found"; ?> 
```

（请注意：此代码可能需要针对您的环境进行一些调整。）

# ruby-on-rails - How to skip validations as admin during update_attributes?

> ID：14031787
> 
> 赞同：7
> 
> 时间：2012-12-25T15:10:42.050
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

I want to skip validation when I am trying to edit user as admin.

**Model**

```
class User
  ...
  attr_accessible :company_id, :first_name, :disabled, as: :admin 
```

**Controller**

```
class Admin::UsersController
  ...
  def update
    @user = User.find(params[:id])
    @user.update_attributes(params[:user], as: :admin)
    redirect_to edit_admin_user_path(@user), :notice => "User Account Updated"
  end 
```

So I tried to change `update` action to

```
def update
  @user = User.find(params[:id])
  @user.attributes = params[:user]
  @user.save(validate: false)
  redirect_to edit_admin_user_path(@user), :notice => "User Account Updated"
end 
```

But then I dont have access to set `:disabled` and `:company_id` attributes because i dont know where to set `as: :admin`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T15:44:37.540

尝试这个：

```
@user = User.find(params[:id])
@user.assign_attributes(params[:user], as: :admin)
@user.save(validate: false) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T16:13:19.743

# 强参数

长期以来，这一直是 Rails 的问题，在 Rails 4 中，他们引入了“强参数”

*   [https://github.com/rails/strong_parameters](https://github.com/rails/strong_parameters)
*   [http://railscasts.com/episodes/371-strong-parameters](http://railscasts.com/episodes/371-strong-parameters)

您也可以在 rails 3 应用程序中使用强参数 gem

# 替代方案：上下文属性

另一种方法是在用户模型上引入上下文变量 - *注意我不熟悉 attr_accessible 的“as”选项*

```
class User < ActiveRecord::Base

  attr_accessor :is_admin_applying_update

  validate :company_id, :presence => :true, :unless => is_admin_applying_update
  validate :disabled, :presence => :true, :unless => is_admin_applying_update
  validate :first_name, :presence => :true, :unless => is_admin_applying_update
  # etc... 
```

在您的管理控制器中，将 is_admin_applying_update 属性设置为 true

```
class Admin::UsersController
  # ...
  def update
    @user = User.find(params[:id])
    @user.is_admin_applying_update = true
    @user.update_attributes(params[:user]) 
```

注意：您还可以对验证进行分组并使用单个条件

*   [http://guides.rubyonrails.org/active_record_validations.html#grouping-conditional-validations](http://guides.rubyonrails.org/active_record_validations.html#grouping-conditional-validations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:51:44.003

破解方法：

```
def update
  @user = User.find(params[:id])
  @user.define_singleton_method :run_validations! do true; end
  @user.update_attributes(params[:user], :as => :admin)
  redirect_to edit_admin_user_path(@user), :notice => "User Account Updated"
end 
```

# php - 从不同的数据库中选择会切换用户吗？

> ID：14031800
> 
> 赞同：1
> 
> 时间：2012-12-25T15:11:50.180
> 
> 标签：php, mysql

在下面的代码中，我得到的输出告诉我当前用户是`myuser@%`，然后第二个查询会给我一个错误，说`myuser@localhost`被拒绝 INSERT 权限。

```
$query = "SELECT CURRENT_USER();"
$result = mysql_query($query);
if(mysql_num_rows($result))
{
    $data = mysql_fetch_assoc($result);
    echo(" current user - ". $data['CURRENT_USER()'] . "\n"); //current user - myuser@%
}

$query = "INSERT INTO DIFF_DATABASE.HISTORY (DATA) VALUES (\"" . $data. "\")";
if(mysql_query($query) == false)
{
    echo(mysql_error()); // INSERT command denied to user 'myuser'@'localhost' for table 'HISTORY'
} 
```

看起来 MySQL 用户从 切换`myuser@%`到 是`myuser@localhost`怎么发生的？我猜这是因为我在第二个查询中从不同的数据库中进行选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:23:01.030

> CURRENT_USER() 的值可以不同于 USER() 的值。

```
mysql> SELECT USER();
        -> 'davida@localhost'
mysql> SELECT * FROM mysql.user;
ERROR 1044: Access denied for user ''@'localhost' to
database 'mysql'
mysql> SELECT CURRENT_USER();
        -> '@localhost' 
```

> 该示例说明，尽管客户端指定了用户名 davida（如 USER() 函数的值所示），但服务器使用匿名用户帐户对客户端进行了身份验证（如 CURRENT_USER( ） 价值）。可能发生这种情况的一种方式是在 davida 的授权表中没有列出帐户。

见[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_current-user](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_current-user)

# tomcat - 如何让tomcat查看另一个ROOT文件夹

> ID：14031801
> 
> 赞同：0
> 
> 时间：2012-12-25T15:11:53.467
> 
> 标签：tomcat

我可以从tomcat中的ROOT文件夹以外的其他地方启动我的Web应用程序吗？我已经在 Eclipse 中构建了我的应用程序，这就是结构

```
web
    WEB-INF
        build
            mypackage 
                HomeServlet.class
        web.xml 
    home.jsp 
```

我是否可以只从 tomcat 文件夹中运行 tomcat，并让这个应用程序在 localhost/app 上运行？

注意：我不想通过我的 IDE 运行 tomcat。我知道这是可能的，但我希望将 tomcat 作为独立应用程序运行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:16:49.560

`web.xml`像这样添加路径

```
<Context path="/" docBase="/your/absolute/document/root" /> 
```

[有关您在此处](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)找到的上下文容器的更多详细信息

# gwt - GWT 验证框架，如何指定国际化包的位置

> ID：14031803
> 
> 赞同：3
> 
> 时间：2012-12-25T15:12:16.070
> 
> 标签：gwt, internationalization, gwt-validation

这个和我[之前的帖子](https://stackoverflow.com/questions/14019777/gwt-validation-framework-internationalization-for-messages-in-annotations/14021487#14021487)有关。在 GWT 验证框架中是否可以指定`ValidationMessages.properties`文件的位置及其名称？我的应用程序中已经有消息翻译，我希望它们位于一个位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:57:29.370

您可以创建一个自定义 UserValidationMessagesResolver：

```
public class CustomValidationMessagesResolver extends AbstractValidationMessageResolver implements UserValidationMessagesResolver {
    protected CustomValidationMessagesResolver() {
        super((ConstantsWithLookup) GWT.create(ValidationConstants.class));
    }
} 
```

在上面的代码中，ValidationConstants 是在我的属性文件上运行 I18NSync 产生的类。

然后在 *.gwt.xml 中：

```
<replace-with class="yourpackage.client.validation.CustomValidationMessagesResolver">
    <when-type-is class="com.google.gwt.validation.client.UserValidationMessagesResolver" />
</replace-with> 
```

[您可以在此处](http://gglwebtoolkit.blogspot.ca/2011_12_01_archive.html)找到完整的示例。

# ios - 在 iOS6 中关闭和重新打开应用程序时的 UI 问题

> ID：14031808
> 
> 赞同：3
> 
> 时间：2012-12-25T15:12:41.787
> 
> 标签：ios, ios5, ios6, synchronization

我正在运行一个同步过程，我将文件从服务器下载到我的 iPad 中。当我在 iOS6 中运行该进程时，UI 如下所示：![在此处输入图像描述](../Images/92096de1fb623b154d7262db82443d1f.png)

但是，当进程运行时，我关闭应用程序并返回主屏幕，当我重新启动应用程序时，它看起来像这样：![在此处输入图像描述](../Images/7bc393d79a5a25090019144255cc103e.png)

画面就黑了……

同时，当我在 iOS5 中运行它时，它工作得非常好。但问题是当我在 iOS6 中运行它时。

有时，它运行正常，返回红色背景..有时，它返回黑屏......完全被这个问题逗乐了......

可能是什么原因？

**编辑：**

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */

}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:15:21.770

当应用程序进入后台时，操作系统可以减少应用程序的内存使用量，因此可能会释放后台视图。每次使用 viewWillApperar 方法加载视图时尝试重新加载背景。

# actionscript-3 - 具有内插固定时间步长的初始状态

> ID：14031812
> 
> 赞同：1
> 
> 时间：2012-12-25T15:13:46.913
> 
> 标签：actionscript-3, loops, time, game-loop

在尝试了一些可变时间步长后，我切换到使用固定时间步长来独立于当前帧速率更新我的游戏对象。在渲染事物时，我会在最后两个状态之间插入每个对象的位置、旋转等。

但是，第一次渲染对象时我该怎么办？我无法使用以前的状态，因为该对象刚刚创建并具有其初始状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:20:28.707

您可以在渲染任何内容之前在后台运行一个额外的更新步骤，这样您将始终有两个状态可用于插值。或者只是使“初始先前状态”成为初始状态的副本。

你做什么并不重要，因为一切都会在第一次真实状态更新之后得到修复，这将在游戏开始后的一小部分时间内发生 - 太快让玩家真正注意到。

**编辑：**对于在游戏中创建的对象，您始终可以向后推断它们的位置以获得近似的先前位置。这可能看起来比让对象静止不动（或不可见）一刻更好。外推仍然不必非常准确，因为它只会影响对象运动的第一个刻度。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-25T15:18:21.607

使用 away3D 4... 它使用stage3D，开源，非常好用，好用！

# spin - 在 Promela 中从另一个进程访问一个进程的局部变量

> ID：14031813
> 
> 赞同：2
> 
> 时间：2012-12-25T15:14:05.140
> 
> 标签：spin

是否可以从另一个进程访问一个进程的局部变量的值。例如在下面的程序中，我想从经理那里读取 my_id 的值。

```
proctype user (byte id){
    byte my_id = id;
}

proctype manager (){
     printf ("my_id : %d \n" , user:my_id);

}

init {
    run user (5);
    run manager();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-30T16:07:09.470

您可以使用“procname[pid]:var”来引用局部变量的当前值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:08:21.503

您可以使用 c_code{} 和/或 c_expr() 语法来完成此操作。以下是 SPIN 手册中的示例：

```
active proctype ex1()
{   int x;

    do
    :: c_expr { Pex1->x < 10 } ->
        c_code { Pex1->x++; }
    :: x < 10 -> x++
    :: c_expr { fct() } -> x--
    :: else -> break
    od
} 
```

可以使用 c_expr{} 中的 'Pex1->x' 访问“ex1”的本地“x”。

# c# - 从 WPF 数据网格中删除行

> ID：14031814
> 
> 赞同：6
> 
> 时间：2012-12-25T15:14:13.253
> 
> 标签：c#, wpf, data-binding, datagrid

我有一个`DataGrid theDataGrid`绑定到`DataSet ds`包含表的 WPF。我想让用户通过首先在网格中选择它们然后按下一个按钮（位于数据网格之外的某个位置）来删除线。我终于到达了以下代码行，它们可以满足我的需求，但我认为它们相当丑陋：

```
 DataSet ds = new DataSet();
        ...
  // fill ds somehow
        ...
  private void ButtonClickHandler(object Sender, RoutedEventArgs e) 
  {
        List<DataRow> theRows = new List<DataRow>();
        for (int i = 0; i < theDataGrid.SelectedItems.Count; ++i)
        {
            // o is only introduced to be able to inspect it during debugging
            Object o = theDataGrid.SelectedItems[i];
            if (o != CollectionView.NewItemPlaceholder)
            {
                DataRowView r = (DataRowView)o;
                theRows.Add(r.Row);
            }
        }
        foreach(DataRow r in theRows) 
        {                
            int k = ds.Tables["producer"].Rows.IndexOf(r);
            // don't remove() but delete() cause of update later on
            ds.Tables[0].Rows[k].Delete();
        }
   } 
```

有一个更好的方法吗？例如，只需要一个循环而无需`NewItemPlaceHolder`显式检查，或者可能是一种更有效的方式来访问要删除的行？

（我已经发现我不能在第一个循环中从 ds 中删除任何内容，因为`theDataGrid.SelectedItems.Count`每次执行循环时都会更改......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T11:52:36.363

为了删除在按钮单击时选择的行，您可以尝试：

```
private void ButtonClickHandler(object sender, RoutedEventArgs e)//Remove row selected
     {
      DataRowView dataRow = (DataRowView)dataGridCodes.SelectedItem; //dataRow holds the selection
      dataRow.Delete();                    
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T17:24:41.797

您可以通过向后迭代来删除双循环：

```
private void ButtonClickHandler(object Sender, RoutedEventArgs e) {
    for (int i = theDataGrid.SelectedItems.Count-1; i>=0; --i)
        if (theDataGrid.SelectedItems[i] != CollectionView.NewItemPlaceholder)
            ds.Tables[0].Rows[i].Delete();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:24:04.143

我认为它只通过一个循环起作用：

```
int count=theDataGrid.SelectedItems.Count;
int removedCount=0; 
while (removedCount < count)
{
    try{
         Object o = theDataGrid.SelectedItems[0];
    }
    catch{ break;}

    if (o == CollectionView.NewItemPlaceholder)
    continue;

    DataRowView r = (DataRowView)o;
    r.Row.Delete();
    removedCount++;
} 
```

# c++ - 输入二维数组的大小

> ID：14031816
> 
> 赞同：1
> 
> 时间：2012-12-25T15:14:40.557
> 
> 标签：c++, arrays, size

在我的代码中，我输入了两个维度的大小，然后声明了一个二维数组。我的问题是，如何将该数组用作函数参数？我知道我需要在函数规范中写入列数，但是如何传递列数？

```
 void gameDisplay(gameCell p[][int &col],int a,int b) {
         for(int i=0;i<a;i++) {
                for(int j=0;j<b;j++) {
                         if(p[i][j].getStat()==closed)cout<<"C ";
                         if(p[i][j].getStat()==secure)cout<<"S ";
                         if(p[i][j].getBomb()==true&&p[i][j].getStat()==open)cout<<"% ";
                         if(p[i][j].getBomb()==false&&p[i][j].getStat()==open) {
                                 if(p[i][j].getNum()==0)cout<<"0 ";
                                 else cout<<p[i][j].getNum()<<" ";
                         }
                 cout<<endl;
                 }
         }
 }

 int main() {
         int row,col,m;
         cout<<"Rows: ";cin>>row;cout<<"Columns: ";cin>>col;
         m=row*col;
         gameCell p[row][col];
         gameConstruct(p[][col],m);
         gameDisplay(p[][col],row,col);
 } 
```

我试过这种方式，但它不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:36:02.203

在 C++ 中，不能有可变长度数组。也就是说，您不能将输入整数用作数组的大小，如下所示：

```
std::cin >> x;
int array[x]; 
```

（这将在 gcc 中工作，但它是一个不可移植的扩展）

但是，当然，也可以做类似的事情。允许您拥有动态大小数组的语言特性是动态分配`new[]`。你可以这样做：

```
std::cin >> x;
int* array = new int[x]; 
```

但请注意，`array`这里*不是*数组类型。它是一种指针类型。如果要动态分配二维数组，则必须执行以下操作：

```
std::cin >> x >> y;
int** array = new int*[x]; // First allocate an array of pointers
for (int i = 0; i < x; i++) {
  array[i] = new int[y]; // Allocate each row of the 2D array
} 
```

但同样，这仍然不是数组类型。它现在是一个`int**`，或“指向 int 的指针”。如果要将其传递给函数，则需要函数的参数为`int**`​​ . 例如：

```
void func(int**);
func(array); 
```

那会好的。但是，您几乎总是需要知道函数内部数组的维度。你怎么能那样做？只需将它们作为额外的参数传递！

```
void func(int**, int, int);
func(array, x, y); 
```

这当然是一种方法，但它肯定不是惯用的 C++ 方法。它存在安全问题，因为它很容易忘记`delete`一切。您必须手动管理内存分配。您必须这样做以避免内存泄漏：

```
for (int i = 0; i < x; i++) {
  delete[] array[i];
}
delete[] array; 
```

所以忘记我刚刚告诉你的一切。使用标准库容器。您可以轻松使用`std::vector`并且无需担心传递尺寸：

```
void func(std::vector<std::vector<int>>);

std::cin >> x >> y;
std::vector<std::vector<int>> vec(x, std::vector<int>(y));
func(vec); 
```

* * *

如果您最终处理的是数组类型而不是动态分配数组，那么您可以通过定义一个引用数组的模板函数来获取数组的维度：

```
template <int N, int M>
void func(int (&array)[N][M]); 
```

该函数将为传递给它的所有不同大小的数组实例化。模板参数（数组的维度）必须在编译时知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:58:42.347

而不是访问`p[i][j]`你应该访问`p[i*b + j]`- 这实际上是编译器为你做的，因为`int[a][b]`在内存中被展平为一个大小为`a*b`

此外，您可以将函数的原型更改为“void gameDisplay(gameCell p[],int a,int b)”

固定代码：

```
void gameDisplay(gameCell p[],int a, int b) {
         for(int i=0;i<a;i++) {
                for(int j=0;j<b;j++) {
                         if(p[i*a +j].getStat()==closed)cout<<"C ";
                         if(p[i*a +j].getStat()==secure)cout<<"S ";
                         if(p[i*a +j].getBomb()==true&&p[i][j].getStat()==open)cout<<"% ";
                         if(p[i*a +j].getBomb()==false&&p[i][j].getStat()==open) {
                                 if(p[i*a +j].getNum()==0)cout<<"0 ";
                                 else cout<<p[i*a +j].getNum()<<" ";
                         }
                 cout<<endl;
                 }
         }
 }

 int main() {
         int row,col,m;
         cout<<"Rows: ";cin>>row;cout<<"Columns: ";cin>>col;
         m=row*col;
         gameCell p[row][col];
         gameConstruct(p[][col],m);
         gameDisplay(p[],row,col);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:24:52.403

我做了一个小程序：

```
#include <iostream>
using namespace std;
void fun(int tab[][6], int first)
{}
int main(int argc, char *argv[])
{
    int tab[5][6];
    fun(tab, 5);
    return 0;
} 
```

在函数定义中，您必须输入第二个索引的大小。列数作为参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T15:27:34.367

这是你要找的吗？

```
int* generate2DArray(int rowSize, int colSize)
{
    int* array2D = new int[rowSize, colSize];
    return array2D;
} 
```

例子 。. .

```
#include <iostream>
#include <stdio.h>

int* generate2DArray(int rowSize, int colSize);
int random(int min, int max);

int main()
{
    using namespace std;

    int row, col;
    cout << "Enter row, then colums:";
    cin >> row >> col;

    //fill array and display
    int *ptr = generate2DArray(row, col);
    for(int i=0; i<row; ++i)
        for(int j=0; j<col; ++j)
        {
            ptr[i,j] = random(-50,50);
            printf("[%i][%i]: %i\n", i, j, ptr[i,j]);
        }

    return 0;
}

int* generate2DArray(int rowSize, int colSize)
{
    int* array2D = new int[rowSize, colSize];
    return array2D;
}

int random(int min, int max)
{
    return (rand() % (max+1)) + min;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T15:30:25.583

我从[Problems with 'int'](https://stackoverflow.com/questions/11725844/problems-with-int)猜测您已遵循已验证问题的建议并且您正在使用 std::vector

这是一个返回“数组”列数的函数（如果有问题则返回 0）。

```
int num_column(const std::vector<std::vector<int> > & data){
    if(data.size() == 0){
        std::cout << "There is no row" << std::endl;
        return 0;
    }
    int first_col_size = data[0].size();
    for(auto row : data) {
        if(row.size() != first_col_size){
            std::cout << "All the columns don't have the same size" << std::endl;
            return 0;
        }
    }
    return first_col_size;   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-25T15:30:27.487

如果您使用 C 风格的数组，您可能需要在参数中进行引用：

```
int (&array)[2][2]; // reference to 2-dimensional array 
```

# c - 与数组匹配导致分段错误

> ID：14031819
> 
> 赞同：0
> 
> 时间：2012-12-25T15:15:15.570
> 
> 标签：c, arrays

从这段代码中，

```
node[4] = {5,3,2,6};  
neighbor[4] = {4,7,8,9}; 
```

我必须找到，

*   `node[0]`并且`node[1]`有任何共同的价值观`neighbor[0-3]`
*   或`node[1]`并且`node[2]`有任何共同的价值来自`neighbor[0-3]`
*   or`node[2]`和 node[3] 有任何共同的值`neighbor[0-3]`

如果任何人满足 print element found else not...
我已经尝试过这段代码，但是存在错误状态分段错误。

```
#include<stdio.h>

int main()
{
    int node[4] = {5,3,2,6};
    int neighbor[4] = {4,3,2,9};
    int sub,i,flag=0,k=0;

    for (k=0;k<3;k++){
        for (i = 0; i < 4; i++) {
            if (node[k]==neighbor[i])
                flag=1;
            break;
        }
    }
    if (flag==1)
        sub=k+1;
    for (i = 0; i < 4; i++) {
        if (node[sub]==neighbor[i])
            flag=2;
        break;
    }
    if (flag==2)
        printf("Element not found\n");
    else
        printf("Element  found\n");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:18:23.387

您正在访问超出数组范围。

```
sub=k+1; 
```

有了这个，您将 k 设置为 4，然后在随后的循环中，您访问`node[sub]`. 只有 0 到 3 是`node`.

* * *

访问越界内存是**未定义的行为**。您可能打算打破这两个循环。

```
 for (k=0;k<3;k++){
        for (i = 0; i < 4; i++) {
            if (node[k]==neighbor[i])
            {
              flag=1;
              break;
            }
            if (flag == 1) break;
        }
    }

    if (flag==1) {
       sub=k+1;
       for (i = 0; i < 4 && sub < 4; i++) 
       {
            if (node[sub]==neighbor[i]) 
            {
              flag=2;
              break;
            }
      }
   } 
```

请注意 for 循环中的条件：`sub < 4`以确保您不会越界访问。

* * *

```
#include<stdio.h>

int present(int x, int y, int N[])
{
  int i, c=0;
  for(i=0;i<4;i++)
  {
      if(N[i]==x) c++;
      if(N[i]==y) c++;
  }
  if (c==2) return 1;
  return 0;
}

int main()
{
    int node[4] = {5,3,2,6};
    int neighbor[4] = {4,8,2,9};
    int sub,i,flag=0,k=0;

    for (k=0;k<3;k++){
        if (present(node[k], node[k+1], neighbor)) {
           flag = 1;
           printf("Element found");
           break;
        }
    }
    if(flag == 0) 
       printf("Element not found");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:18:03.247

`sub`未定义/未设置，以防万一`flag`从未设置为`1`，因此您实际上是在使用未初始化的值作为索引，从而导致您的程序从它指向的任何地方读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:20:38.650

这是完整的解决方案：

```
#include <stdio.h>
int main()
{
    int node[4] = {5,3,2,6};
    int neighbor[4] = {4,3,2,9};
    int i=0,j=0,k=0;

    for (i=0; i<4; i++) {
        for (j=0; j<4; j++) {
            if (node[i]==neighbor[j]) {
                for (k=0; k<4; k++) {
                    if (node[i+1]==neighbor[k]) {
                        printf("Element found: %d %d\n", node[i], node[i+1]);
                        return 0;
                    }
                }
            }
        }
    }
    printf("Element not found\n");
    return 0;
} 
```

# grails - Grails按键排序地图

> ID：14031821
> 
> 赞同：1
> 
> 时间：2012-12-25T15:15:40.837
> 
> 标签：grails

您好我正在尝试使用地图的键对地图进行排序

```
finalMap.entrySet().sort{it.key} 
```

但是key没有排序如下：

```
[0=org.generator.Item@1304e60, 1=org.generator.Item@699df5, 10=org.generator.Item@14944, 11=org.generator.Item@713a72, 12=org.generator.Item@1b42301, 2=org.generator.Item@1664cde, 3=org.generator.Item@1409c28, 4=org.generator.Item@cc2061, 5=org.generator.Item@161eccb, 6=org.generator.Item@13e9b, 7=org.generator.Item@1b5438d, 8=org.generator.Item@1661f7b, 9=org.generator.Item@19cf00a] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:43:08.283

尝试：

```
finalMap.entrySet().sort{it.key as Integer} 
```

# c# - 从列表中动态添加应用程序栏

> ID：14031823
> 
> 赞同：0
> 
> 时间：2012-12-25T15:15:51.887
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8, application-bar

我必须在运行时添加应用程序栏我已经尝试了一些代码，但这对我不起作用，任何人都可以建议我一个解决方案吗？这是我的代码

```
public void createObjectsForApplicationbar(List<Others> appbarList)
    {
        int i = 0;
        foreach (Others menus in appbarList)
        {                                                          
          UpdateAppbarButton(i, menus.menu_image, menus.name, true, ApplicationBarIconButton_Click);
          i++;
        }

    }

private void UpdateAppbarButton(int index, string uriString, string text, bool visibility, EventHandler handler)
    {
        ApplicationBarIconButton button1 = null;
        this.ApplicationBar = new ApplicationBar();
        this.ApplicationBar.IsVisible = true;
        this.ApplicationBar.Opacity = 1;
        this.ApplicationBar.IsMenuEnabled = true;
        if (this.ApplicationBar.Buttons.Count > index)
        {
            button1 = this.ApplicationBar.Buttons[index] as ApplicationBarIconButton;

            this.ApplicationBar.Buttons.Remove(button1);

            if (visibility == true)
            {
                button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
                button1.Text = text;
                button1.Click += handler;
                this.ApplicationBar.Buttons.Insert(index, button1);
            }
        }

        else

        {
            if (visibility == true)
            {
                button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
                button1.Text = text;
                button1.Click += handler;
                this.ApplicationBar.Buttons.Add(Buttons[text]);
            }
        }

    } 
```

当我运行此代码时，即使列表中有 8 个项目，我也只有一个按钮作为输出。我从[stackoverflow 获得此代码](https://stackoverflow.com/questions/4234202/hide-application-bar-icon-programmatically-in-a-wp7-silverlight-application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:22:28.803

您不应该在每次添加按钮时都创建新的 ApplicationBar

删除这一行：

```
this.ApplicationBar = new ApplicationBar(); 
```

还

```
this.ApplicationBar.Buttons.Add(Buttons[text]); 
```

是错的。您在此代码块中创建新按钮。所以你应该添加这个按钮。

```
if (visibility == true)
{
    button1 = new ApplicationBarIconButton(new Uri(uriString, UriKind.RelativeOrAbsolute));
    button1.Text = text;
    button1.Click += handler;
    this.ApplicationBar.Buttons.Add(button1);
} 
```

# php - 显示上传的图片

> ID：14031826
> 
> 赞同：0
> 
> 时间：2012-12-25T15:16:31.670
> 
> 标签：php, javascript

我正在尝试使用 Ajax 上传/调整图像大小，然后将其显示在浏览器中，而不是将其保存到文件中。我期待有一个图像，而不是我得到了一堆乱码。

可行吗？或者我不能也需要求助于其他东西，比如保存到文件然后走它的路径？或者也许使用画布？

谢谢你的时间。

HTML

```
<form enctype="multipart/form-data" action="file.php" method="Post" id="form">
  <input type="file" name="user_image">
  <input type="submit" value="Submit" name="submit">
</form>
<div id="blah"></div> 
```

Javascript

```
//using jquery-form.js
$('#form').on('submit', function(e) {
  e.preventDefault();
  $(this).ajaxSubmit({
    target: '#blah',
    success:  function(){}
  });
}); 
```

PHP

```
$img_width = imagesx($this->image);
$img_height = imagesy($this->image);
$image = imagecreatefromjpeg($_FILE['user_image']['tmp_name']);
$resized_image = imagecreatetruecolor(300, 300);
imagecopyresampled($resized_image, $image, 0, 0, 0, 0, 300, 300, $img_width, $img_height);
header('Content-Type:image/jpeg');
imagejpeg($resized_image); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:21:46.497

在您的 PHP 中执行此操作

```
ob_start();
// header("Content-type: image/jpeg"); // fairly sure you won't need this
imagejpeg($resized_image);
echo base64_encode(ob_get_clean());
die; 
```

假设你有 HTML

```
<img id="theimage" /> 
```

然后在 JS

```
success:  function(data){
    $('#theimage').attr('src', 'data:image/jpeg;base64,' + data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:30:50.843

您正在尝试使用 ajax 获取原始 jpeg 数据。您不应执行 ajax 上传，而是直接发送表单以查看调整大小的图像。如果这不是您想要的，那么您需要将原始 jpeg 数据编码为 base64 编码的数据 url，并将其作为元素的`src`属性插入。`<img>`

# facebook-graph-api - 如何在facebook graph api中选择特定的朋友

> ID：14031833
> 
> 赞同：1
> 
> 时间：2012-12-25T15:17:06.260
> 
> 标签：facebook-graph-api, facebook-fql

此代码随机选择一个朋友：

```
https://graph.facebook.com/fql?q=SELECT uid2 FROM friend WHERE uid1=me() ORDER BY rand() LIMIT 1 
```

我如何随机选择一个朋友，但只能选择女性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:17:36.467

性别在用户表中表示为“性别”列。因此，您可以使用：

> 性别=“女性”

有关更多参考，请检查：[用户](http://developers.facebook.com/docs/reference/fql/user/)

# javascript - 为什么 offsetParent 会忽略我的文章标签？

> ID：14031841
> 
> 赞同：1
> 
> 时间：2012-12-25T15:18:13.007
> 
> 标签：javascript, html, canvas

我想获得画布的 X 和 Y 坐标，为此我使用了[这个问题](https://stackoverflow.com/questions/160144/find-x-y-of-an-html-element-with-javascript)中建议的解决方案。为了便于参考，这是我正在使用的功能（包括一个小的调试警报消息）：

```
function getCumulativeOffset(obj) {
    var left, top;
    left = top = 0;
    if (obj.offsetParent) {
        do {
            alert("obj id = " + obj.tagName + " (" + obj.id + ")");
            left += obj.offsetLeft;
            top  += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }
    return {
        x : left,
        y : top
    };
}; 
```

但是，我没有得到我期望的结果。现在，我将问题归结为 getCumulativeOffset 函数没有在我的 HTML 中获取文章标签。这里是相关的 HTML：

```
<body>
    <article>
        <canvas id="pizza" width="460" height="460">Your browser does not support the HTML5 canvas.</canvas>
    </article>

    <div id="temp"></div>
</body> 
```

相关的CSS：

```
article, aside, figure, footer, header, hgroup, nav, section {
    display:block
}
body {
    font: normal medium 'Gill Sans', 'Gill Sans MT', 'Goudy Bookletter 1911', 'Linux Libertine O', 'Liberation Serif', Candara, serif;
    padding: 0;
    margin: 0 auto;
    width: 40em;
    line-height: 1.75;
    word-spacing: 0.1em
}
article {
    text-align: center;
}
#pizza {
    display: inline-block
} 
```

出于某种原因，当我测试该功能时，似乎文章标签不是我所期望的画布的 offsetParent。这是输出：

*   obj id = 画布（披萨）
*   bj id = 身体 ()

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:45:14.793

引用的元素`offsetParent`是最近*定位*的祖先元素，如果没有找到，则返回元素有一些规则（[`offsetParent`](https://developer.mozilla.org/en-US/docs/DOM/element.offsetParent)在 MDN）。在您的情况下，设置应该可以解决`position: relative`问题。`<article>`

# java - SOAPUI 休息服务错误

> ID：14031847
> 
> 赞同：1
> 
> 时间：2012-12-25T15:19:00.767
> 
> 标签：java, rest, soapui

我有一个在 Glassfish 上运行的 Jersey Rest 服务。当我通过简单地输入 URL 从 Firefox 测试我的服务时，我可以在浏览器上以 json 格式获取预期结果。

我想使用 SOAPUI 测试相同的方法，但随后出现 404 page not found 错误。我什至不知道我应该从哪里开始寻找问题。是否可能是我的服务配置错误，或者我必须调整一些 SoapUI 设置才能使其正常工作。我只是给它 WADL url，然后简单地运行“Request1”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:01:21.857

请确保您已正确指出其余服务，请看： [http](http://www.joecolantonio.com/2012/09/05/soapui-how-to-test-a-rest-service/) ://www.joecolantonio.com/2012/09/05/soapui-how-to-test-a-rest-service/ 我已经测试过和作品。

请记住，您必须在 web.xml 文件中添加 Web 服务的声明。

# asp.net-mvc - EF Code First 和确认字段

> ID：14031848
> 
> 赞同：2
> 
> 时间：2012-12-25T15:19:04.017
> 
> 标签：asp.net-mvc, entity-framework, automapper

我正在创建一个用户类并想添加一个 ConfirmPassword 字段。由于我的数据库中没有此字段，我该如何处理？我也在使用 AutoMapper，我是否需要做任何事情来处理这个额外的字段，例如告诉映射器忽略这个字段？

我在这里有我的用户类，我刚刚在好友类中添加了 NotMapped 属性。这就是我需要做的所有事情吗？或者是否需要任何额外的编码来处理这种情况？

```
public partial class User
{
    public User()
    {
        //this.DateCreated = DateTime.Now; //set default value
        Roles = new HashSet<Role>();
    }

    public ICollection<Role> Roles { get; set; } //many to many relationship

    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string ConfirmPassword { get; set; }
    public string City { get; set; }

    //foreign key
    public int CountryId { get; set; }
    //navigation properties
    public virtual Country Country { get; set; }

    //foreign key
    public int LanguageId { get; set; }
    //navigation properties
    public virtual Language Language { get; set; }

    public string EmailAddress { get; set; }
    public long FacebookId { get; set; }
    public DateTime DateCreated { get; set; }
}

//buddy class, validation in here because not supported in Fluent API
//test in ie
//MetadataType decorated class
[MetadataType(typeof(UserMetadata))]
public partial class User
{
}

//Metadata type
internal sealed class UserMetadata
{
    [Required]
    public string FirstName { get; set; }

    [Required]
    public string Surname { get; set; }

    [Required]
    [Remote("IsUsernameAvailable", "Validation")]
    [DataType(DataType.Text)]
    [DisplayName("Username")]
    public string Username { get; set; }

    [Required]
    public int CountryId { get; set; }

    public string Password { get; set; }

    [NotMapped]
    public string ConfirmPassword { get; set; }
    public string City { get; set; }
    public int LanguageId { get; set; } 
    public string EmailAddress { get; set; }
    public long FacebookId { get; set; }
    public DateTime DateCreated { get; set; }
} 
```

}

编辑：这是我相应的 DTO 类：

```
public class UserDTO
    {
        public int Id { get; set; }
        public string FirstName { get; set; }
        public string Surname { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public string City { get; set; }
        public string CountryName { get; set; }
        public string LanguageName { get; set; }
        public string EmailAddress { get; set; }
        public long FacebookId { get; set; }
        public DateTime DateCreated { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:22:09.183

该`ConfirmPassword`字段应在您的视图模型类上定义，而不是在实体框架跟踪的域模型对象上定义。由于该值从未存储到数据库中，因此它甚至不应该成为您的域模型的一部分。

此属性应仅在您的视图模型类上定义，该类映射到您的创建帐户视图。您不需要对 AutoMapper 执行任何特殊步骤来处理此字段，因为它不应该是您的域模型的一部分 => 当 AutoMapper 在您的 CreateUserViewModel 和您的用户模型之间进行映射时，它将被忽略。

# mysql - MYSQL查询将四张表连接成一张表

> ID：14031852
> 
> 赞同：-1
> 
> 时间：2012-12-25T15:19:39.517
> 
> 标签：mysql, select, join, union

以下是我的数据库的架构。我一直在进行查询，但无法获得正确的结果。

```
TABLE: CUSTOMERINFORMATION  
FIELDS: CUSTID, ACTOPTIONID,VAT,MINIMUMDOCT 

TABLE: ONLINEORDERS 
FIELDS: CUSTID, TOTALQUANTITY 

TABLE: OFFLINEORDERS
FIELDS: CUSTID, TOTALQUANTITY 

TABLE: ACTOPTS 
FIELDS: ACTOPTIONID,ACTNAME 
```

像这样的输出：临时表：CUSTID、ACTOPTIONID、TOTALONLINEQ、TOTALOFFLINEQ、ACTNAME

我需要将上述所有表格和提到的字段合并到一个表格中。我们还需要确保返回 NULL 行；表示以上所有内容的 UNION ALL。

这是为了创建一个数据导出实用程序，将上述所有内容导出到另一个表中。但我们需要确保即使表中没有与其他记录匹配的记录，也不会排除任何记录。

## 已编辑

以下是我的查询：

```
SELECT table1.*, table2.*, table3.*
  FROM (SELECT ao.actname,
               ci.custid,
               ci.actoptionid,
               ci.minimumdoct,
               ci.vat
          FROM customerinformation ci, actoptions ao
         WHERE ci.actoptionid = ao.actoptionid) table1
       LEFT JOIN (SELECT custid, totalquantity, FROM onlineorders) table2
          ON table1.custid = table2.custid
       LEFT JOIN (SELECT custid FROM offlineorders) table3
          ON table2.custid = table3.custid 
```

但是，上述内容不会从 RIGHT 上的表中返回行。我想从右边的表中返回 ROWS，为此我认为我需要在所有这些上使用 UNION ALL。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:33:09.017

```
SELECT
*
FROM
`CUSTOMERINFORMATION`
LEFT OUTER JOIN
`ONLINEORDERS` ON (`CUSTID`)
LEFT OUTER JOIN
`OFFLINEORDERS` ON (`CUSTID`)
LEFT OUTER JOIN
`OFFLINEORDERS` ON (`ACTOPTS`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:26:41.463

你想要这个吗？

```
 SELECT CI.CUSTID,
          CI.VAT,
          CI.MINIMUMDOCT,
          ONL.TOTALQUANTITY as ONLINE_TOTALQUANTITY,
          OFF.TOTALQUANTITY as OFFLINE_TOTALQUANTITY,
          A.ACTNAME 
   FROM CUSTOMERINFORMATION CI
        LEFT JOIN ACTOPTS A
          ON CI.ACTOPTIONID = A.ACTOPTIONID
        LEFT JOIN ONLINEORDERS ONL
          ON CI.CUSTID = ONL.CUSTID
        LEFT JOIN OFFLINEORDERS OFF
          ON CI.CUSTID = OFF.CUSTID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:36:58.143

试试这个：

```
SELECT CI.CUSTID, CI.ACTOPTIONID, O.TOTALQUANTITY TOTALONLINEQ, 
       O1.TOTALQUANTITY TOTALOFFLINEQ, A.ACTNAME, 
       (O.TOTALQUANTITY + O1.TOTALQUANTITY) TotalQuantity  
FROM CUSTOMERINFORMATION CI 
INNER JOIN ACTOPTS A ON CI.ACTOPTIONID = A.ACTOPTIONID
LEFT JOIN (SELECT * FROM (SELECT CUSTID, TOTALQUANTITY FROM ONLINEORDERS ORDER BY DATE DESC) ASs A GROUP BY CUSTID) O ON CI.CUSTID = O.CUSTID 
LEFT JOIN (SELECT * FROM (SELECT CUSTID, TOTALQUANTITY FROM OFFLINEORDERS ORDER BY DATE DESC) ASs A GROUP BY CUSTID) O1 ON CI.CUSTID = O1.CUSTID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T16:22:50.020

如果您想在OR表`FULL JOIN`上匹配，请尝试使用`LEFT``RIGHT`

*   [W3SCHOOLS - SQL 完全连接](http://www.w3schools.com/sql/sql_join_full.asp)

附带说明一下，该`UNION`命令连接了两个`SELECT`语句，您在当前形式中没有这些语句。如果要使用`UNION`，则应将语句重新排序为`SELECT ... UNION SELECT ...`

# arrays - 如何遍历vbscript中的数组数组

> ID：14031853
> 
> 赞同：1
> 
> 时间：2012-12-25T15:19:44.387
> 
> 标签：arrays, multidimensional-array, vbscript

我正在尝试遍历 vbScript 中不同 varTypes 的数组，但没有成功。

注意：我说的是单维数组，而不是 vbScript 多维数组。

我可以成功创建一个测试数组，如下所示：

```
Dim aArray : aArray = array("A", "B", array(1,2,3,4), "D", array("have", "a", "happy", "holiday", "!"), 1, "last item") 
```

如您所见，主数组具有不同类型的项、一些字符串、一些整数和一些数组。然后，在循环时，一切顺利，直到迭代到包含另一个数组的数组项。

当我来到这部分时，我需要知道该怎么做：

```
If typeName(aArray(i)) = "Variant()" Then 
```

这是迭代和打印数组的完整函数：

```
For i = 0 to uBound(aArray)
    If typeName(aArray(i)) = "Variant()" Then
        'array item is another array e.g. vbScript typeName variant() 
        response.write "<tr><td>aArray(" & i & ")</td><td><table class=""debugVarsTbl""><tr><th>Value</th><th>typeName()</th></tr><tr><td>[Array()]</td><td>" & typeName(aArray(i)) & "</td></tr></table></td></tr>"
    Else
        'item is a standard string, integer, boolean, date, etc.
        response.write "<tr><td>aArray(" & i & ")</td><td>" & aArray(i) & " (" & typeName(aArray(i)) & ")</td></tr>"
    End If
Next 
```

我基本上需要知道如何访问 vbScript typeName = Variant() 的主数组项。

提前致谢，节日快乐，CBWDEV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:28:34.337

```
If typeName(aArray(i)) = "Variant()" Then 
```

应该

```
If typeName(aArray(i)) = "Variant" Then 
```

此外，如果输出具有通用代码，最好使用开关来确定每种类型需要更改的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:28:53.680

感谢所有人的帮助和正确方向的指示。我找到了解决方案。这是我用于调试数组的例程：

```
Sub debugArray(byVal aArray)
    For i = 0 to uBound(aArray)
        If typeName(aArray(i)) = "Variant()" Then
            'array item is another array e.g. vbScript typeName variant() 
            response.write "<tr><td>aArray(" & i & ")</td><td><table class=""debugVarsTbl""><tr><th>Value</th><th>typeName()</th></tr><tr><td>" 
            debugArray aArray(i)
            response.write "</td><td>" & typeName(aArray(i)) & "</td></tr></table></td></tr>"
        Else
            'item is a standard string, integer, boolean, date, etc.
            response.write "<tr><td>aArray(" & i & ")</td><td>" & aArray(i) & " (" & typeName(aArray(i)) & ")</td></tr>"
        End If
    Next
End Sub 
```

# java - javax持久性回滚异常

> ID：14031858
> 
> 赞同：0
> 
> 时间：2012-12-25T15:20:35.603
> 
> 标签：java, jpa

我是 JPA 的新手，我正在尝试一些基本的关系。

我有两个实体

```
 @Entity
@Table(name = "relationshipDepartment")
public class Department implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue()
    private Long id;
    @Version
    @Column(name = "OPTLOCK")
    private long version;
    private String name;
    private String code;
    @OneToOne
    private Employee manager;

    public Department() {
        super();
    }

     getters and setters 
```

和

```
 @Entity
@Table(name = "relationshipEmployee")
public class Employee implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue()
    private Long id;
    @Version
    @Column(name = "OPTLOCK")
    private long version;
    private String name;
    private String title;
    private double salary;
    @ManyToOne
    private Employee supervisor;
    // A employee is a member of one department
    @ManyToOne
    private Department department;

    public long getVersion() {
        return version;
    }
    getters and setters 
```

当我只是尝试添加一些这样的实体时；

```
 public class Starter {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Employee ceo  = new Employee ();
        Employee manager1 = new Employee ();
        Employee manager2 = new Employee ();

        ceo.setName("Bill Clinton");
        ceo.setTitle("CEO");
        ceo.setSalary(3800.0);
        ceo.setSupervisor(ceo);

        manager1.setName("Hilary Clinton");
        manager1.setTitle("Manager");
        manager1.setSalary(3200.0);
        manager1.setSupervisor(ceo);

        manager2.setName("Tim Reyback");
        manager2.setTitle("Manager");
        manager2.setSalary(3200.0);
        manager2.setSupervisor(ceo);

        Department finance = new Department ();
        Department research = new Department ();

        finance.setCode("FIN");
        finance.setName("Finance");

        research.setCode("RES");
        research.setName("Research");

        ceo.setDepartment(finance);
        manager1.setDepartment(finance);
        manager2.setDepartment(research);

        finance.setManager(manager1);
        research.setManager(manager2);

        addEmployee(manager1);
        addEmployee(manager2);

        addDepartement(finance);
        addDepartement(research);

        System.out.println("All the employees");

        List<Employee> employees = retrieveEmployees();
        for (Employee aEmployee : employees) {
            System.out.println(aEmployee.toString());
        }       

        System.out.println("All the departments");

        List<Department> departments = retrieveDepartments();
        for (Department aDepartment : departments) {
            System.out.println(aDepartment.toString());
        }   
    }

    private static void addEmployee(Employee employee) {
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("JPAex4");
        EntityManager em = emf.createEntityManager();
        try {
            em.getTransaction().begin();
            em.persist(employee);
            em.getTransaction().commit();
        } catch (Exception e) {
            logging.error("erorr at adding a employee"
                    + " :" + e);
        } finally {
            // Close all the connections:
            em.close();
            emf.close();
        }
    }

    private static List<Employee> retrieveEmployees() {
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("JPAex4");
        EntityManager em = emf.createEntityManager();
        List<Employee> results = null;
        try {
            // Retrieve all the Employee objects from the database:
            TypedQuery<Employee> query = em.createQuery(
                    "SELECT e FROM Employee e", Employee.class);
            // Creation of the Userlist
            results = query.getResultList();
            return results;
        } catch (Exception e) {
            logging.error("error at the employeelist"
                    + " :" + e);
        } finally {
            // Close all the connections:
            em.close();
            emf.close();
        }
        return results;
    }

    private static void addDepartement(Department department) {
            EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("JPAex4");
        EntityManager em = emf.createEntityManager();
        try {
            em.getTransaction().begin();
            em.persist(department);
            em.getTransaction().commit();
        } catch (Exception e) {
            logging.error("error department"
                    + " :" + e);
        } finally {
            // Close all the connections:
            em.close();
            emf.close();
        }
    }

    private static List<Department> retrieveDepartments() {

        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("JPAex4");
        EntityManager em = emf.createEntityManager();
        List<Department> results = null;
        try {
            // Retrieve all the Employee objects from the database:
            TypedQuery<Department> query = em.createQuery(
                    "SELECT e FROM Department e", Department.class);
            // Creation of the Userlist
            results = query.getResultList();
            return results;
        } catch (Exception e) {
            logging.error("Error departementlist"
                    + " :" + e);
        } finally {
            // Close all the connections:
            em.close();
            emf.close();
        }
        return results;
    }

} 
```

我得到一个：

:javax.persistence.RollbackException: 提交事务时出错

```
at JPA.starter.Starter.main(Starter.java:52) -> first adding line 
```

我看不出有什么不对。有什么建议么？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T19:40:37.587

一个问题是，即使对于已经被持久化的对象，您也会调用 persists。当您持久化 manager1（通过 addEmployee()）时，JPA 也将持久化财务。因此，您不能在 addDepartment() 中再次保留它。我建议只保留一个用于持久对象的函数，并在传递根对象后调用此函数。

# mysql - ---和----在mysql中是什么意思？

> ID：14031860
> 
> 赞同：12
> 
> 时间：2012-12-25T15:20:40.673
> 
> 标签：mysql, sql, comments

我知道`--`意味着在 mysql 中开始评论。但是是什么`---`意思`----`？查看我的控制台日志。

```
mysql> --
mysql> ---
    -> 
    -> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '-' at line 1
mysql> ----
    -> 
    -> ;
Query OK, 0 rows affected (0.00 sec) 
```

*   第一个似乎是评论。
*   第二个不是
*   第三个也不算。他们在期待什么。

我写了一个 sql 文件，其中包含以`---`字符开头的标题注释。由于这个下一个查询不运行。它抛出错误。像这样。

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“-”附近使用正确的语法

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-25T15:23:32.230

第二个破折号后需要有空格或控制字符。从[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/comments.html)：

> MySQL Server 支持三种注释样式：
> 
> *   从一个`#`字符到行尾。
>     
>     
> *   从一个`--`序列到行尾。在 MySQL 中，`--`（双破折号）注释样式**要求第二个破折号后跟至少一个空格或控制字符**（例如空格、制表符、换行符等）。此语法与标准 SQL 注释语法略有不同，如第 1.8.5.5 节“<code>--作为注释的开始”中所述。
>     
>     
> *   从一个`/*`序列到下面的`*/`序列，就像在 C 编程语言中一样。此语法使注释可以扩展到多行，因为开始和结束序列不必在同一行。

（强调我的。）而且，像往常一样，这仅适用于 MySQL。:P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:24:34.853

这不过是语法检查错误，

```
Other than '--', mysql considering everything as sql statement. Since
'---' is not a valid statement it's showing error.
that means there should be at least one space after '--' then only it will be considered as valid comment. 
```

希望这对你有帮助，

# c# - 将 html 解析为 listboxitem

> ID：14031862
> 
> 赞同：0
> 
> 时间：2012-12-25T15:21:10.953
> 
> 标签：c#, listbox, html-parsing

在列表框项目中显示 html 标签的最佳方式是什么...例如，我有这个标签，我想将它解析为 listboxitem Content 属性：

```
"<font color=\"blue\">123456789<br><font color=\"black\">This book tells the story of her life from A to Z. <br>" 
```

最终结果必须是蓝色的“123456789”和“这本书讲述了她从头到尾的生活故事”。黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:42:06.740

```
string html="<font color=\"blue\">123456789<br><font color=\"black\">This book tells the story of her life from A to Z. <br>"  
      string anchorPattern = "<font.*?>(?<val>.*?)"<.*?"
                        MatchCollection mresultSet= Regex.Matches(html, anchorPattern, RegexOptions.Compiled);
             for (int at = 0; at < mIcerik.Count; at++)
                 {
                                mVal= Convert.ToString(mIcerik[at].Groups["val"].Value).Trim());
        .... 
```

# sql - 更新按两列排序的累积和

> ID：14031864
> 
> 赞同：2
> 
> 时间：2012-12-25T15:21:43.937
> 
> 标签：sql, sqlite, cumulative-sum

给定表格：

```
id   date count cumulative_sum
1    2    100                  
2    1    50
3    1    10
4    2    5 
```

如何更新按,`cumulative_sum`排序的行？`date``id`

结果应该是：

```
id   date count cumulative_sum
2    1    50    50
3    1    10    60
1    2    100   160
4    2    5     165 
```

是否也可以只更新那些在我插入或更新行时需要重新计算的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:58:35.163

你可以使用这个：

```
update your_table
set
  cumulative_sum = (select sum(c)
                    from your_table t2
                    where
                      t2.date<your_table.date
                      or (t2.date=your_table.date
                          and t2.id<=your_table.id)); 
```

子查询统计count的累计总和，即日期<<当前行日期，或者日期=当前行日期且id为<的所有值的总和。

你也可以把这个条件：

```
where cumulative_sum is null 
```

仅当还没有值时才更新行。如果插入到表中的所有 id 和日期始终按升序排列，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T13:29:18.227

首先按所需顺序对表进行排序，然后使用下面的查询将其放入`#temp`

```
Declare @count int=0

UPdate #temp Set @count = cumulative_sum =  count + @count 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T15:29:01.047

使用列`ORDER BY`的功能`date`。

`SELECT * FROM yourTableName ORDER BY date`

# iphone - 我如何在 ScrollView 中为 iphone 和 Android 添加近 1000 个视图？

> ID：14031876
> 
> 赞同：0
> 
> 时间：2012-12-25T15:23:35.917
> 
> 标签：iphone, titanium, titanium-mobile

我正在使用 Titanium SDK 3.0.0。GA。当我在循环中创建 1000 个视图并添加数组时，我在一个滚动视图中需要近 1000 个视图。在此通过 ScrollableView 之后。设备需要很长时间，有时应用程序应该崩溃。我如何处理这个问题。请帮我。谢谢，

```
var views_array=[];
for(var i=0;i<1000;i++){
    var view = Ti.UI.createView({
        height : 100,
        width : 100,
        backgroundColor : "#f00",   
    });
    views_array.push(view);
}

var main_scroll_label_view = Ti.UI.createScrollableView({
    width : Ti.UI.FILL,
    showPagingControl : false,
    backgroundColor : "transparent",
    views : views_array,
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:00:26.703

您需要“懒惰地”加载视图。为您的滚动视图设置一个委托，该委托在视图移动时响应。

滚动视图时，找出需要显示哪些子视图并转储您不再需要的子视图。UITableView 本质上是一样的。它只是一个只加载可见内容的滚动视图。

# python - 包含 dict、text、datetime 和 ints 的 JSON 转储大列表给出“TypeError：'str' 不支持缓冲区接口”

> ID：14031879
> 
> 赞同：6
> 
> 时间：2012-12-25T15:24:01.937
> 
> 标签：python, json, string, typeerror

在 Windows 7 64 位上使用 Python 3.2 64 位。

```
f = open("raw_data/results.json", "wb")
json.dump(dictio, f)
f.close() 
```

给出错误：

```
Traceback (most recent call last):
  File ".\calc_stats_friendly_data.py", line 22, in <module>
    main()
  File ".\calc_stats_friendly_data.py", line 18, in main
    json.dump(races, f)
  File "C:\Python32\lib\json\__init__.py", line 179, in dump
    fp.write(chunk)
TypeError: 'str' does not support the buffer interface 
```

我不知道出了什么问题。使用泡菜效果很好！但我必须使用 JSON... 找到问题的提示？名单很大。用 pickle 保存它需要 56 MB。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-25T15:34:23.793

您正在打开文件进行二进制写入。`"w"`仅使用作为模式打开它。

# ios - 与业务合作伙伴分享 iOs 应用演示

> ID：14031881
> 
> 赞同：0
> 
> 时间：2012-12-25T15:24:23.437
> 
> 标签：ios, flash, flash-builder

我正在与国际合作伙伴开展一个项目。我需要发送我的 ios 应用程序的演示（通过电子邮件），但我不知道如何制作。我可以将它打包在 ipa 中，但不能在他们的 iphone 上使用，因为它们不在我的开发者帐户中。如何解决？

我用 adobe flashbuilder 4.7 制作的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:38:03.767

你需要[TestFlight](https://www.testflightapp.com/)。该网站用于测试版分发。在那里注册，并将邀请发送到您朋友的电子邮件。他必须在他的设备中打开电子邮件并按照说明进行操作。在您的朋友通过安装配置文件注册他的设备后，他将可以从 TestFlight 站点下载和安装应用程序。您必须将他的设备添加到您必须用来构建应用程序的证书中。

# sql - 根据多个表中的类别从表中选择主数据

> ID：14031882
> 
> 赞同：0
> 
> 时间：2012-12-25T15:24:27.527
> 
> 标签：sql

我有桌子喜欢

1）持有主数据的用户喜欢

```
用户 ID 名称 OtherColumns
1 半石无
2 Banshi2 什么都没有
3 Banshi3 什么都没有
```

* * *

2）第二个表“朋友”持有数据喜欢

```
ID UserID FriendID FriendCategory
1 1 2 2
2 2 1 2
3 4 1 2
4 1 4 2
```

* * *

3）第三个表“订阅者”持有数据喜欢

```
ID SubscribersID SubscribToID FriendCategory
1 1 3 3
2 1 4 3
```

* * *

4）第四表“FriendCategory”点赞

```
身份证名称
2个朋友
3 个订阅者
```

* * *

5）第五表“帖子”包含类似的数据

```
PostID 用户 ID 帖子           
1 2 你好，亲爱的 Banshi2 的帖子
2 3 你好，亲爱的 Banshi3 的帖子
3 4 你好，亲爱的 Banshi4 的帖子
```

* * *

现在成为用户 1 我需要像 A) 我需要数据如果我的朋友发布 B) 我需要数据如果我订阅了 C) 如果用户是我的朋友也订阅了那么它必须显示朋友而不是我订阅

## 我的数据有点像

```
用户 ID 名称 帖子类别
2 Banshi2 你好亲爱的 Banshi2 朋友的帖子
3 Banshi3 你好 亲爱的 Banshi3 我是订阅者
4 Banshi4 Hello Dear Post By Banshi4 Friends

```

请指导我如何在 Sql Server 2008 中获得这样的输出

在此先感谢 Banshi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:01:39.590

我不确定你能不能试试这个并告诉我，

```
select u.userid,u.name,p.post,f.name from 
User u join Friends fr on u.userid=fr.userid
join FriendCategory f on fr.FriendID=f.id
join Posts p on u.userid=p.userid
order by u.userid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T16:01:54.060

用于获取朋友发布的数据

```
SELECT
  u.UserID, u.Name , p.Post , fc.Name 
FROM
  users as u,
  FriendCategory as fc,
  Subscribers as s,
  Friends as f,
  Posts as p 
WHERE
  f.UserID=1
  and fc.id=f.FriendCategory
  and p.UserID = f.FriendID
group by fc.Name 
```

您可以类似地为我订阅的数据获取数据。

> c）如果用户是我的朋友也订阅了，那么它必须显示朋友而不是我订阅

好吧，我没明白你在这里想说什么。

# asp.net-mvc - 使用 HTTPS 时“找不到页面”

> ID：14031890
> 
> 赞同：1
> 
> 时间：2012-12-25T15:25:19.963
> 
> 标签：asp.net-mvc

使用 HTTPS 导航到 CheckOut 页面时，我收到一个错误，即找不到该页面。

我在手动从 HTTP 更改为 HTTPS 的每个页面上都出现相同的错误

在我的服务器上为这个网站分配了 443 端口。

这是我在控制器中的：

```
#if !DEBUG
    [RequireHttps]
#endif
    public ViewResult Checkout()
    {             
        return View();
    } 
```

我需要在路由配置中添加一些东西吗？

# vb6 - FoxPro - 从另一个表更新表的 DAO 语法

> ID：14031892
> 
> 赞同：0
> 
> 时间：2012-12-25T15:25:27.290
> 
> 标签：vb6, sql-update, dao, foxpro

尝试使用 VB6 和 DAO 从 FoxPro 2.5 表上的另一个表运行简单 UPDATE 时遇到问题。但是很困惑，因为我找不到可以接受的语法。

我正在尝试使用文件 JOBS.DBF 中查找代码的值更新文件 TEST.DBF 中的字段。

此代码在查询表达式'jobs.rcode FROM test INNER JOIN jobs ON test.jobcode = jobs.code'中生成错误3075“语法错误（缺少运算符）。”：

```
Dim dbsWork As Database
Dim qrd As DAO.QueryDef
Dim szSqlString As String

Set dbsWork = OpenDatabase(szWorkDir, False, False, "FoxPro 2.5")
szSqlString = "UPDATE test SET test.mask = jobs.rcode FROM test INNER JOIN jobs ON test.jobcode = jobs.code "
Set qrd = dbsWork.CreateQueryDef("", szSqlString)
qrd.Execute

Set qrd = Nothing
Set dbsWork = Nothing 
```

请问我应该使用什么语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:43:30.297

尝试使用这样的相关查询

```
UPDATE test
SET mask = (SELECT rcode FROM jobs WHERE code = test.jobcode)
WHERE jobcode IN (SELECT code FROM jobs) 
```

# watir-webdriver - 如何使用等待与 watir-webdriver

> ID：14031894
> 
> 赞同：-1
> 
> 时间：2012-12-25T15:25:42.243
> 
> 标签：watir-webdriver

我正在尝试在 watir-webdriver 中实现等待页面加载，但这些都不适合我：

[http://watirwebdriver.com/waiting/](http://watirwebdriver.com/waiting/)

我正在尝试等待以下元素

```
<a>
  <img width="22" height="32" align="absmiddle" title="Sign out" alt="Sign out" src="images/logout.gif">
  Sign out
</a> 
```

几个问题：

1.  我是否需要包含一些库然后使用等待方法
2.  在 RubyMine 中，上面链接中提到的所有方法都没有为上面的元素显示？有什么需要我做的设置吗？
3.  Watir-webdriver 是否适用于基于 gwt 的 Web 应用程序？

请帮忙。奥马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T22:14:04.597

您说“这些都不适合我”，但您没有包含您尝试过的代码示例以及导致的错误或其他问题。

假设您的浏览器对象是@browser，我建议您尝试其中一种并让我们知道结果：

```
@browser.link(text: "Sign out").wait_until_present # try this
@browser.img(title: "Sign out").wait_until_present # ...or this 
```

# jsf - 无法致富：选择触发 webflow 动作

> ID：14031895
> 
> 赞同：0
> 
> 时间：2012-12-25T15:25:53.620
> 
> 标签：jsf, jsf-2, richfaces, spring-webflow

这与 jsf1.2 和 richfaces 3.3 完美配合（过滤的国家列表）：

```
 <h:selectOneMenu id="countriesList"
                     value="#{filter.country}"
                     converter="countriesConverter">
        <a4j:support event="onchange"
                     action="filter"
                     reRender="...." />
        <f:selectItems value="#{service.countries}"/>
   </h:selectOneMenu> 
```

对选定的国家/地区更改执行了 webflow 转换

```
<transition on="filter" validate="false" bind="false">
...
 </transition> 
```

现在我想对 JSF 2.1 和 RF 4 做同样的事情。我试过了

```
<rich:select id="countriesList" 
             value="#{filter.country}" 
             converter="#{countriesConverter}" >
     <a4j:ajax event="selectitem" action="filter" reRender="..." execute="@form"/>
     <f:selectItems value="#{service.countries}"/>
</rich:select> 
```

但这不起作用。有什么建议么？

最好的问候，尤金。

# jquery - jquery从带有json和第一个字符匹配的文件中自动完成

> ID：14031899
> 
> 赞同：0
> 
> 时间：2012-12-25T15:26:37.877
> 
> 标签：jquery, json, jquery-ui, jquery-autocomplete

我有一个文本文件，其中包含简单 json 格式的名称（没有标题）：[“Name1”，“Name2”，“Name3”，（...）]

我的带有自动完成输入表单的 html 页面有这个 jquery 脚本：

```
var tags = "\path\to\jsontxtfile.txt";

$( "#id_name" ).autocomplete({ 
source: function( request, response ) {
        var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
        response( $.grep( tags, function( item ){
            return matcher.test( item );
        }) );
    }
}); 
```

当我使用正常的自动完成时，我只是将我的文件的路径放在没有函数的源中（来源：“\path\to\jsontxtfile.txt”）并且它工作得很好，但是当我尝试只使用来自 jquery 自动完成的第一个字母匹配时文档它不起作用。我不知道在标签变量中放置什么。在文档中，他们使用硬编码的标签变量（如 var tags = [“c++”、“java”、“php”、“coldfusion”、“javascript”、“asp”、“ruby”];）但我有一个文件1600 多个名字，我不想像他们建议的那样把它放在我的 html 代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:48:44.377

您的代码永远不会从服务器检索文件。`var tags`只是一个代表路径的字符串。但是您试图解析`tags`为好像它是该文件中包含的数据数组

一个非常简单的解决方案是将文件包含在页面的脚本标记中

```
<script src="\path\to\jsontxtfile.txt"></script> 
```

这将需要您在文件中实际创建一个变量来定义它包含的数组。在文件的最开始添加`var tags=`

一旦包含它，您就可以`tags`在代码中访问该数组。

如果这不是一个可行的解决方案，您还可以使用 AJAX 来检索文件：

```
/* retrieve file*/
$.getJSON("\path\to\jsontxtfile.txt", function(tags) {
    /* data now available, initialize autocomplete*/
    $("#id_name").autocomplete({
        source: function(request, response) {
            var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(request.term), "i");
            response($.grep(tags, function(item) {
                return matcher.test(item);
            }));
        }
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:41:01.290

我认为您需要设置`minChars`jQuery Autocomplete 插件的选项。尝试以下

```
var tags = "\path\to\jsontxtfile.txt";

$( "#id_name" ).autocomplete({ 
minChars: 1,
source: function( request, response ) {
        var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
        response( $.grep( tags, function( item ){
            return matcher.test( item );
        }) );
    }
}); 
```

您可以在此处阅读有关如何使用自动完成功能及其选项的更多[信息。](http://www.devbridge.com/projects/autocomplete/jquery/#how-to-use)

# 更新

您可以编写一个方法来从文本文件创建一个数组：

```
function get_suggestions(){
    $.get("/path/to/jsontxtfile.txt", { }, function(data){
        var data_array = eval(data);
        data_array = data;
    });
} 
```

然后将其用作以下内容：

```
$(document).ready(function(){
    var autocomplete_opts = get_suggestions();
    $( "#id_name" ).autocomplete({ minChars: 1, source: autocmplete_opts});
}); 
```

# ios - NSUserDefaults 多久同步一次？

> ID：14031901
> 
> 赞同：5
> 
> 时间：2012-12-25T15:26:52.870
> 
> 标签：ios, nsuserdefaults

的文档`NSUserDefaults`说该`synchronise`方法是定期调用的，但没有提及频率。10 分钟的谷歌搜索没有发现任何东西。

`synchronise`该方法的调用频率如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T15:35:57.433

这是一个未公开的实现细节（可能甚至不是一个恒定的时间间隔）。但是，您可以通过执行调配方法`- [NSUserDefaults synchronize]`并更改其实现以便在`NSLog()`每次同步时调用它自己来发现它。

# android - Android 设备 (4.1) 不滚动壁纸

> ID：14031908
> 
> 赞同：0
> 
> 时间：2012-12-25T15:27:48.650
> 
> 标签：android, wallpaper, android-sdk-2.3

Galaxy S III (android 4.1) 设备中的壁纸无法滚动（平移）。Galaxy S II (android 2.3) 设备会按预期发生滚动。我正在使用以下代码：

```
 wallpaperManager = WallpaperManager.getInstance(this);
    wallpaperDrawable = wallpaperManager.getDrawable();
    wallpaperManager.setBitmap(mBitmap); 
```

是否可以选择使两个设备中的墙纸相同（滚动或不滚动）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:09:47.897

*三星默认的 Touchwiz 3.0 启动器会中断滚动，这是 Android长期以来*的一项功能。解决此问题的唯一方法是切换到不同的启动器/主屏幕应用程序，例如 Apex 或 Nova。再加上内部和外部 SD 卡中挂载点的可笑切换，让我对三星 Android 设备失去了兴趣。永久。

# matlab - 用多色matlab绘图

> ID：14031912
> 
> 赞同：2
> 
> 时间：2012-12-25T15:28:47.527
> 
> 标签：matlab

我是 Matlab 的新手，很难生成“多色”图。我正在将文本文件中的数据读入三个向量：X、Y 和簇。我需要为 X 和 Y 生成一个图形，并根据簇 {0,1,2} 设置点的颜色。你能告诉我该怎么做吗？从我尝试做的事情来看，它只给了我一个选项，可以用一种颜色按 X、Y 绘制图。

在此先感谢，阿迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:43:01.583

好像你正在尝试做一个散点图

```
cmp = lines(3);
scatter( X, Y, 20, cmp(Cluster+1), 'filled'); 
```

注意`+1`索引时`cmp`- Matlab 的第一个索引是**1**而**不是**0！

# android - 是否可以将相同的 ImageView 多次添加到屏幕上？

> ID：14031918
> 
> 赞同：0
> 
> 时间：2012-12-25T15:29:32.623
> 
> 标签：android, layout, imageview

我在整个屏幕上使用 RelativeLayout。屏幕上的图像几乎是随机出现和消失的，而且经常会出现多次显示同一图像的情况。但是，发生这种情况时，我收到一条错误消息：“孩子已经有了父母......”。

你们知道有什么办法吗？我想我可能可以动态更改调用到屏幕上的每个 ImageView 的参考 ID，但是因为我可能会在屏幕上拥有 50 多个图像视图，动态更改位置、消失和返回，这不会减慢程序很多？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T16:36:03.490

每个都`View`必须`Parent`在添加到它时，它不能添加到另一个`Parent`。

如果你愿意，你可以缓存`bitmap`一些地方并将其应用于不同的`ImageViews`. 所以两者都`imageviews`将具有相同的`bitmap`. 但你不能`ImageView`在不同的父母中拥有相同的东西。

# debugging - 如何使用 GDB 中的特定操作码中断指令？

> ID：14031930
> 
> 赞同：9
> 
> 时间：2012-12-25T15:31:55.003
> 
> 标签：debugging, gdb, breakpoints

我有一些将在程序中的某个点执行的代码的汇编代码。我不知道内存中代码的地址。

当前指令与输入指令匹配时是否可以使 gdb 中断？

例如，每当 gdb 到达此指令时，我希望 gdb 中断：

```
leaq        0x000008eb(%rip),%rax 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-06T15:10:24.337

正如其他人所说，由于没有硬件支持，因此可能无法有效地做到这一点。

但是如果你真的想这样做，这个 Python 命令可以作为一个起点。程序单步执行，直到给出具有给定操作码的函数。由于每条指令的执行都返回到 python，如果目标指令距离太多指令，这将非常缓慢。但是对于或多或少的附近呼叫，它应该可以正常工作。

```
class ContinueI(gdb.Command):
    """
Continue until instruction with given opcode.

    ci OPCODE

Example:

    ci callq
    ci mov
"""
    def __init__(self):
        super().__init__(
            'ci',
            gdb.COMMAND_BREAKPOINTS,
            gdb.COMPLETE_NONE,
            False
        )
    def invoke(self, arg, from_tty):
        if arg == '':
            gdb.write('Argument missing.\n')
        else:
            thread = gdb.inferiors()[0].threads()[0]
            while thread.is_valid():
                gdb.execute('si', to_string=True)
                frame = gdb.selected_frame()
                arch = frame.architecture()
                pc = gdb.selected_frame().pc()
                instruction = arch.disassemble(pc)[0]['asm']
                if instruction.startswith(arg + ' '):
                    gdb.write(instruction + '\n')
                    break
ContinueI() 
```

只需通过以下方式获取它：

```
source gdb.py 
```

并将命令用作：

```
ci mov
ci callq 
```

并且您将被留在使用给定操作码执行的第一条指令上。

TODO：这将忽略您的其他断点。

对于特殊的常见情况`syscall`，您可以使用`catch syscall`：[https ://reverseengineering.stackexchange.com/questions/6835/setting-a-breakpoint-at-system-call](https://reverseengineering.stackexchange.com/questions/6835/setting-a-breakpoint-at-system-call)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T16:04:15.973

> 我不知道内存中代码的地址。

是什么阻止您找到该地址？运行`objdump -d`，找到感兴趣的指令，记下它的地址。问题解决了？（这也可以简单地扩展到共享库。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T15:49:32.633

不，这是不可能的，而且实施起来也非常低效。

调试器通常支持两种断点：

*   **硬件断点**：当某些事件发生时，调试器会要求 CPU 引发一个特殊的异常中断，比如内存中的某个位置发生了变化。
*   **软件断点**：调试器用特殊的“陷阱”指令（x86 架构上的`int 3`/ ）替换断点地址处的操作码。`0xcc`

匹配当前指令的操作码要么需要 CPU 支持来插入硬件断点，要么调试器需要知道地址才能使用软件断点。

理论上，调试器可以在整个内存中搜索指令的字节序列，但由于字节序列也可能出现在指令中间或数据中，因此可能会出现误报。

由于汇编指令是可变长度的，控制可以跳转到任意地址或代码可以修改自身，反汇编整个内存区域以找到某些特定指令也并非易事。

所以基本上，在任意汇编代码中可靠地找到指令的唯一方法是在指令级别上单步执行。这将是非常昂贵的，即使是一个微不足道的库调用，`printf()`如果你单步执行每条指令，在今天的硬件上可能需要几分钟。

# hibernate - 第一个休眠程序出错

> ID：14031933
> 
> 赞同：2
> 
> 时间：2012-12-25T15:32:28.253
> 
> 标签：hibernate, postgresql, jdbc

大家好，我刚刚开始使用教程视频学习休眠我完全按照导师所说的那样一步一步完成了第一个基本程序但是当我尝试在 Eclipse 上运行项目时我收到错误我尝试使用不同的 hibernate.cfg.xml 文件但是对于每个文件，我都收到错误请帮助我运行这个程序，以便我可以学习休眠，因为这只是第一步，我被困在这里，我将无法继续学习

**豆类**

```
package org.ankur.sharma.dto;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class UserDetails {

    @Id
    private int userId;
    private String userName;

    public int getUserId() {
        return userId;
    }
    public void setUserId(int userId) {
        this.userId = userId;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }

} 
```

**主要课程**

```
package org.ankur.sharma.main;

import org.ankur.sharma.dto.UserDetails;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class HibernateTest {

    /**
     * @param args
     */
    @SuppressWarnings("deprecation")
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        UserDetails user = new UserDetails();
        user.setUserId(1);
        user.setUserName("First User");

        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(user);
        session.getTransaction().commit();

    }

} 
```

**休眠>CFG>XML文件**

```
<?xml version='1.0' encoding='utf-8'?>

<hibernate-configuration
        xmlns="http://www.hibernate.org/xsd/hibernate-configuration"
        xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-configuration hibernate-configuration-4.0.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <session-factory>
    <!-- Database connection settings -->
    <property name="connection.driver_class">org.postgresql.Driver</property>
    <property name="connection.url">jdbc:postregsql://localhost:5432/hibernatedb</property>
    <property name="connection.username">postgres</property>
    <property name="connection.password">ankur</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.HSQLDialect</property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>

    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">create</property>
    <mapping resource="org.ankur.sharma.dto.UserDetails"/>
  </session-factory>
</hibernate-configuration> 
```

**错误**

```
Dec 25, 2012 8:47:20 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Dec 25, 2012 8:47:20 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Dec 25, 2012 8:47:20 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Dec 25, 2012 8:47:20 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Exception in thread "main" org.hibernate.MappingException: invalid configuration
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2018)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1935)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1914)
    at org.ankur.sharma.main.HibernateTest.main(HibernateTest.java:22)
Caused by: org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 25; Document is invalid: no grammar found.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source) 
```

*尝试使用第二个配置文件*

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  ~ Hibernate, Relational Persistence for Idiomatic Java
  ~
  ~ Copyright (c) 2010, Red Hat Inc. or third-party contributors as
  ~ indicated by the @author tags or express copyright attribution
  ~ statements applied by the authors.  All third-party contributions are
  ~ distributed under license by Red Hat Inc.
  ~
  ~ This copyrighted material is made available to anyone wishing to use, modify,
  ~ copy, or redistribute it subject to the terms and conditions of the GNU
  ~ Lesser General Public License, as published by the Free Software Foundation.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  ~ or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this distribution; if not, write to:
  ~ Free Software Foundation, Inc.
  ~ 51 Franklin Street, Fifth Floor
  ~ Boston, MA  02110-1301  USA
  -->
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.url">jdbc:postregsql://localhost:5432/hibernatedb</property>
        <property name="connection.username">postgres</property>
        <property name="connection.password">ankur</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create</property>

        <!-- Names the annotated entity class -->
        <mapping class="org.ankur.sharma.dto.UserDetails"/>

    </session-factory>

</hibernate-configuration> 
```

**错误**

```
Dec 25, 2012 8:57:01 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
Dec 25, 2012 8:57:01 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
Dec 25, 2012 8:57:01 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
Dec 25, 2012 8:57:01 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
Dec 25, 2012 8:57:01 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Dec 25, 2012 8:57:01 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Dec 25, 2012 8:57:01 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
Dec 25, 2012 8:57:01 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
Dec 25, 2012 8:57:01 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 1
Dec 25, 2012 8:57:01 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: false
Dec 25, 2012 8:57:01 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [org.postgresql.Driver] at URL [jdbc:postregsql://localhost:5432/hibernatedb]
Dec 25, 2012 8:57:01 PM org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=postgres, password=****}
Dec 25, 2012 8:57:01 PM org.hibernate.engine.jdbc.internal.JdbcServicesImpl configure
WARN: HHH000342: Could not obtain connection to query metadata : No suitable driver found for jdbc:postregsql://localhost:5432/hibernatedb
Dec 25, 2012 8:57:01 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
Dec 25, 2012 8:57:01 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000422: Disabling contextual LOB creation as connection was null
Dec 25, 2012 8:57:01 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
Dec 25, 2012 8:57:01 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Dec 25, 2012 8:57:02 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export
Dec 25, 2012 8:57:02 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
ERROR: HHH000231: Schema export unsuccessful
java.sql.SQLException: No suitable driver found for jdbc:postregsql://localhost:5432/hibernatedb
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:193)
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.DatabaseExporter.<init>(DatabaseExporter.java:52)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:367)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:498)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1750)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1788)
    at org.ankur.sharma.main.HibernateTest.main(HibernateTest.java:21)

Dec 25, 2012 8:57:02 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
Dec 25, 2012 8:57:02 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 0, SQLState: 08001
Dec 25, 2012 8:57:02 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: No suitable driver found for jdbc:postregsql://localhost:5432/hibernatedb
Exception in thread "main" org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.doBegin(JdbcTransaction.java:67)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:160)
    at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
    at org.ankur.sharma.main.HibernateTest.main(HibernateTest.java:23)
Caused by: java.sql.SQLException: No suitable driver found for jdbc:postregsql://localhost:5432/hibernatedb
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:193)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:292)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:36:34.577

您的 JDBC URL 有一个错字：“postregsql”。

# joomla - 如何将模块样式标签设置为聚光灯区域 - joomla 模板 T3V3 框架

> ID：14031934
> 
> 赞同：1
> 
> 时间：2012-12-25T15:32:42.737
> 
> 标签：joomla, joomla2.5

如何为聚光灯内的模块设置样式标签？

聚光灯加载模块，像这样

```
$this->spotlight ('spotlight-2', 'position-5, position-6, position-7, position-8') 
```

我如何控制这个聚光灯内的模块具有“圆形”样式

如果模块不在聚光灯下，我们可以像这样放置样式

```
<jdoc:include type="modules" name="<?php $this->_p('position-5') ?>"  style="rounded"/> 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:23:18.027

为了让它工作，我做了以下

我在**plugins/system/at3v3/t3v3base/tpls/blocks中编辑了****Spotlight.php**文件

 **由此

```
$style = 'JAxhtml'; 
```

对此

```
$style = $vars['style']; 
```

然后像这样在我的模板中调用聚光灯功能

```
$info = array('style'=>'rounded');
  $this->spotlight ('spotlight-2', 'position-5, position-6, position-7, position-8',$info) 
```

容易修复

我希望在下一个版本的 T3V3 上看到这个选项**

# php - 无法连接数据库？

> ID：14031941
> 
> 赞同：0
> 
> 时间：2012-12-25T15:34:00.517
> 
> 标签：php, mysql, database, forms

这是我下面的 php 代码。出于某种原因，当我希望它连接到数据库时，它显示“未选择数据库”，但是当我进行连接测试时，它显示“数据库连接成功！” 所以下面的代码有错误。另外我认为这可能会干扰我的表格，所以我一定有错字；当我删除 PHP 表单运行正常，但我希望它连接到数据库。

```
<?php
// let's initialize vars to be printed to page in the HTML section so our script does not return errors 
// they must be initialized in some server environments, not shown in video
$errorMsg = "";
$First_Name = "";
$Last_Name = "";
$Email = "";
$Password = "";

// This code runs only if the form submit button is pressed
if (isset ($_POST['firstname'])){

    /* Example of cleaning variables in a loop
    $vars = "";
    foreach ($_POST as $key => $value) {
       $value = stripslashes($value);
       $vars .= "$key = $value<br />";
    }
    print "$vars";
    exit();
    */
     $First_Name = $_POST['firstname'];
     $Last_Name = $_POST['lastname'];
     $Email = $_POST['email'];
     $Password = $_POST['password'];

     // Connect to database
     include "connect_to_mysql.php";
     $emailCHecker = mysql_real_escape_string($Email);
     $emailCHecker = eregi_replace("`", "", $EmailCHecker);
     // Database duplicate e-mail check setup for use below in the error handling if else conditionals
     $sql_email_check = mysql_query("SELECT email FROM members WHERE email='$emailCHecker'");
     $email_check = mysql_num_rows($sql_email_check); 

}

     $sql = mysql_query("INSERT INTO members (firstname, lastname, email, password, sign_up_date) 
     VALUES('$First_Name','$Last_Name','$Email','$Password', now())")  
     or die (mysql_error());

     $id = mysql_insert_id();

     // Create directory(folder) to hold each user's files(pics, MP3s, etc.)        
     mkdir("members/$id", 0755);    

?> 
```

这是我下面的表单编码

```
 <form action="index.php" method="post" enctype="multipart/form-data">
  <tr>
    <td width="23%" class="right">First Name:</td>
    <td width="77%" class="left left_nowrap"><input type="text" class="left left_nowrap tb10" id="First_Name" value="<?php print "$First_Name"; ?>"/></td>
  </tr>
  <tr>
    <td class="right">Last Name:</td>
    <td class="left left_nowrap"><input type="text" class="left left_nowrap tb10" id="Last_Name"  value="<?php print "$Last_Name"; ?>" />
    </td>
  </tr>
  <tr>
    <td class="right">Email:</td>
    <td class="left left_nowrap"><input type="text" class="left left_nowrap tb10" id="Email" value="<?php print "$Email";?>" /></td>
  </tr>
  <tr>
    <td class="right">Password:</td>
    <td class="left left_nowrap"><input type="password" class="left left_nowrap tb10" id="Password"/></td>
  </tr>
  <tr>
    <td class="right">Confirm Password:</td>
    <td class="left left_nowrap"><input type="password" class="left left_nowrap tb10" id="Confirm_Password"/></td>
  </tr>
  <tr>
    <td class="right">Gender:</td>
    <td class="left left_nowrap"><span class="right">
      <select name="Gender" class="large tb10" id="Gender" value="<?php print "$gender"; ?>">
        <option value="Please Select...">Please Select...</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>
    </span></td>
  </tr>
  <tr>
    <td class="right">&nbsp;</td>
    <td class="left"><input type="submit" class="submit tb10" value="Sign-UP" /></td>
  </tr>     
    </form> 
```

connect_to_mysql.php

```
 <?php 

/* 
1: "die()" will exit the script and show an error statement if something goes wrong with the "connect" or "select" functions. 
2: A "mysql_connect()" error usually means your username/password are wrong 
3: A "mysql_select_db()" error usually means the database does not exist.
*/
// Place db host name. Sometimes "localhost" but 
// sometimes looks like this: >>      ???mysql??.someserver.net
$db_host = "localhost";
// Place the username for the MySQL database here
$db_username = "Shayaa"; 
// Place the password for the MySQL database here
$db_pass = "nestle324"; 
// Place the name for the MySQL database here
$db_name = "social_media";

// Run the actual connection here 
$con = mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql");
mysql_select_db('social_media', $con ) or die ("no database");         
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:48:01.700

MySQL 服务器可以处理许多数据库。至少您将拥有`mysql`数据库本身，其中包含服务器特定数据，例如用户帐户和您自己的应用程序数据库。

因此，对于与数据库相关的任何查询，简单地连接到服务器是不够的。您必须选择一个数据库。

在您的情况下，无需修改其余代码和 MySQL API，您需要先使用此命令，然后才能提交查询

```
mysql_select_db( 'your database name', $dbConnection ); 
```

[http://php.net/manual/en/function.mysql-select-db.php](http://php.net/manual/en/function.mysql-select-db.php)

不推荐使用 PHP 的 MySQL 扩展，因为这将在未来的 PHP 版本中被移除。请参阅上面的链接以获取替代方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:50:29.143

*   使用 mysqli 或 PDO
*   在没有选择数据库的情况下查看是否选择了数据库`$sql = mysql_select_db('your database name', $connection)`

*   `stristr``eregi_replace`达到与（至少当您不使用正则表达式时）完全相同的结果：

编辑：

```
 $sql= "INSERT INTO members (firstname, lastname, email, password,bio_body, sign_up_date , account_type) 
 VALUES(  '".$_SESSION['firstname']."','".$_SESSION['lastname']."','".$_SESSION['email']."','".$_SESSION['password']."','NULL' ,NOW() , 'a' ) " ; 

 if (!mysql_query($sql))
{
 die('Error: ' . mysql_error());
}
echo "1 record added"; 
```

# python - 使用单纯形法和遗传算法最小化一个非常嘈杂的 6 参数函数 - Python 语言

> ID：14031942
> 
> 赞同：1
> 
> 时间：2012-12-25T15:34:04.013
> 
> 标签：python, genetic-algorithm, minimization, simplex

我试图最小化经验人类数据和来自 6 参数认知模型的模拟数据之间的损失函数。该模型非常嘈杂。请注意，模型是在 PYTHON 中编程的。

标准方法是使用单纯形搜索。但是，Simplex 非常依赖于初始猜测，捕获局部最小值的风险很高。所以我有两个问题：

1）我想知道是否不能使用遗传算法首先搜索全局最小值的近似位置，并将结果作为单纯形搜索的起点。如果这是一个好主意，有人知道在 python 中适当的遗传算法的良好实现吗？

2) 我应该为单纯形搜索使用哪个反射、扩展和收缩常数？

任何帮助将不胜感激。

干杯，垫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T20:45:21.577

由于您的函数非常嘈杂，维度很少，并且您愿意尝试进化算法，因此我建议您实际上用协方差矩阵适应进化策略替换您的单纯形优化过程。

该算法被黑盒优化社区认可为对 50 维以下复杂问题最有效的算法之一。它的作者对其进行了详细描述：[here](http://www.lri.fr/~hansen/cmaesintro.html "CMA-ES 简介")。

作者在[此处](http://www.lri.fr/~hansen/cmaes_inmatlab.html#python%20%22Python%20implementation%22.)提供了其算法在 Python 中的实现。进化算法框架[DEAP](http://deap.googlecode.com/ "德普")还提供了 CMA-ES 的 Python 实现和不同的应用示例，我觉得它们更易于使用（免责声明，我是 DEAP 的主要开发人员之一）。

# java - 第一次使用 XML 用户，这个错误是什么意思？

> ID：14031944
> 
> 赞同：0
> 
> 时间：2012-12-25T15:34:53.793
> 
> 标签：java, xml, spring

这是我第一次在 java 中使用 XML，我希望对我的代码有所帮助。我看不出我哪里错了。谢谢。

我想做的是了解 Spring 框架。

这是代码：

```
public class Student
{

    public Student(String name)
    {
        this.name = name;
    }

    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    // VARIABLES DECLARATION
    private String name = null;
}

public class Controller
{
    public Controller(Student student)
    {
        this.student = student;
    }
    public void PrintName()
    {
        System.out.println(""+student.getName());
    }

    public Student getStudent()
    {
        return student;
    }

    public void setStudent(Student student)
    {
        this.student = student;
    }   
    // VARIABLES DECLARATION
    private Student student;
}

public class LearnXML
{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        // TODO code application logic here
        ApplicationContext factory = new ClassPathXmlApplicationContext("Student.xml");
        Controller contr = (Controller) factory.getBean("application");
        contr.PrintName();
    }

    public void setController(Controller controller)
    {
        this.controller = controller;
    }   
    private Controller controller;
} 
```

我的 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="student" class="domain.Student">
        <constructor-arg value="Ovidiu"   />
    </bean>
    <bean id="brain" class="controller.Controller">
        <constructor-arg ref="student"/>
    </bean>
    <bean id="application" class="learnxml.LearnXML">
        <property name="controller" ref="brain"/>   
    </bean>

</beans> 
```

我的错误：

```
 Dec 25, 2012 5:34:02 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@dd0099: startup date [Tue Dec 25 17:34:02 EET 2012]; root of context hierarchy
Dec 25, 2012 5:34:03 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [Student.xml]
Dec 25, 2012 5:34:03 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@5ceeb4a3: defining beans [student,brain,application]; root of factory hierarchy
Exception in thread "main" java.lang.ClassCastException: learnxml.LearnXML cannot be cast to controller.Controller
    at learnxml.LearnXML.main(LearnXML.java:25)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T15:40:17.920

它的意思正是它所说的：

`learnxml.LearnXML cannot be cast to controller.Controller`

你有一个`LearnXML`对象：

```
<bean id="application" class="learnxml.LearnXML">
    <property name="controller" ref="brain"/>   
</bean> 
```

并试图将其转换为一个`Controller`对象：

```
Controller contr = (Controller) factory.getBean("application"); 
```

`getBean()`由于手头任务的固有性质，正在返回一个`Object`而不是特定类型；它使用反射从 xml 实例化任何类型，因此它在编译时不知道该类型是什么。在运行时，如果您尝试将其`Object`转换为不是的东西……您会得到该异常。

**编辑添加：**

如果不是很明显，看起来你真的很想做：

```
LearnXML lXML = (LearnXML) factory.getBean("application"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:38:09.800

你到了这里`factory.getBean("application");`

LearnXML 类型对象，但您将其转换为 Controller

如果你想得到控制器使用这样的大脑

```
Controller contr = (Controller) factory.getBean("brain"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T15:39:30.137

Controller contr = (Controller) factory.getBean("application"); 您不能将 LearnXML 对象类型转换为 Controller 对象

试试这个。LearnXML learnXml= (LearnXML) factory.getBean("application"); learnXml.getController().PrintName();

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T15:43:25.077

在下面的行中更改您的代码

> LearnXML learnXML= (LearnXML) factory.getBean("application");

# django - 构建自己的 Django 'push' 的最佳实践？

> ID：14031945
> 
> 赞同：0
> 
> 时间：2012-12-25T15:35:02.567
> 
> 标签：django, push

对于回合制游戏相关问题，我有一个有效但效率低下的解决方案。

我现在想优化它。

短版：两名玩家共享游戏棋盘的几乎相同视图，除了活跃玩家能够“玩”而非活跃玩家只能查看棋盘。

活跃的玩家会看到一个带有几个按钮以与棋盘交互的视图，而不活跃的玩家则会显示一个简短的“等待轮到你”的消息。使用 JQuery 的 .load() 方法将这些模板加载到 div 中。

但是，每回合有 0-3 个动作，并且这些动作中的每一个都将“实时”显示给双方玩家。

截至目前，我有一个**每秒**重新加载的javascript计时器：

**A)**一个隐藏的 div，仅包含从游戏模型中获取的“移动”和“转弯”变量。（就数据流量而言 > 10 字节）如果在移动期间进行了更改 ->

**B)**重新加载板视图。如果玩家使用少于 3 个动作感到满意 - 有一个“传球转身”选项，或者使用所有 3 个动作 ->

**C)**将 move 变量重置为 0 并更改活动玩家。（显示不同的视图，如上所述）

我知道每秒服务器调用是一种非常糟糕的练习方式，并且确实需要一些输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:08:07.490

查看 websockets，这将允许您将更新“推送”到客户端浏览器。

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

对于特定的 django 模块：

[http://pypi.python.org/pypi/django-websocket](http://pypi.python.org/pypi/django-websocket)

# css - 固定两列定位连续 s

> ID：14031947
> 
> 赞同：0
> 
> 时间：2012-12-25T15:35:17.647
> 
> 标签：css

我有三个连续`<div>`的 s 需要放置在两列中，`<div>`第一列占据第一列，其余的占据右列，如下图和[这个 jsfiddle 所示](http://jsfiddle.net/cx6VJ/)。在 jsfiddle 中，我使用`width`约束来强制`float`s 到位。这可以通过另一种方式而不使用`width`约束来完成吗？s的顺序`<div>`不能改变。

![布局](../Images/8607d6ad44cd095570e88755275f1c0b.png)

我更喜欢使用尽可能少的固定`<div>`宽度的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:45:24.277

您可以`float`从右侧 div 中删除，并添加`margin-left`比左侧 div 稍大的宽度 - [http://jsfiddle.net/cx6VJ/2/](http://jsfiddle.net/cx6VJ/2/)

如果您不想要左侧 div 的固定宽度，您可以设置宽度和左侧边距的百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:49:05.467

您可以使用固定定位和百分比宽度来做到这一点。

CSS 代码：

```
.image {
    position:fixed;
    top:0px;
    left:0px;
    width:75%;
    height:100%;
}
.summary {
    position:fixed;
    top:0px;
    left:75%;
    width:25%;
    height:50%;
}
.info {
    position:fixed;
    top:50%;
    left:75%;
    width:25%;
    height:50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:31:56.837

感谢@Amit 和@user1823713 提供的帮助，我结合了他们的答案来获得保持`<div>`s 的相对位置并使它们的宽度适应容器宽度的东西。这是生成的[jsfiddle](http://jsfiddle.net/xEsMA/)。

这种布局可以不加任何更改地插入到容器中，最终在容器上设置一个宽度来限制总布局宽度。

![布局](../Images/60705d66eb025b08d93bada89e7b0453.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-25T15:54:01.213

我只是提供这个，因为它被要求：

> 我更喜欢使用尽可能少的固定宽度的解决方案。

这是一个没有 div 的解决方案（它使用表格）：

[http://jsfiddle.net/Ma9EE/](http://jsfiddle.net/Ma9EE/)

```
<table>
<tr><td rowspan="2">Image</td>
  <td>summary</td></tr>
  <tr><td>info</td></tr>
</table> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-25T15:54:24.423

Flexbox 可能是一个理想的选择，但支持还不是很广泛。`columns`如果您不介意它在 IE9 或更早版本中不起作用，您可以这样做。您需要为 Mozilla 和 Webkit 添加前缀。

[http://jsfiddle.net/cx6VJ/4/](http://jsfiddle.net/cx6VJ/4/)

```
#container {
    background-color: orange;
    width: 408px;
    columns: 2;
}

#container > div {
 /*   break-inside: avoid-column;*/
}

#left {
    border: 2px solid green;
    min-height: 200px;
    break-after: column;
}

.right {
    border: 2px solid blue;
    height: 50px;
}

#red {
    border: 2px solid red;
} 
```

我故意使`right`元素比你的演示小，但你可以将它们的大小增加到 200 像素，它们仍然具有所需的布局。

[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

# jquery - jquery如何记忆效果：显示两个，然后隐藏并重复

> ID：14031949
> 
> 赞同：0
> 
> 时间：2012-12-25T15:35:36.023
> 
> 标签：jquery, memory, hide, show

大家好，我怎样才能用我的代码实现记忆效应？我的意思是记忆效应：您可以单击两个图像来显示（）它们。在第三次单击显示图像 hide() 并且可以单击接下来的两个图像来显示。

*编辑：第三次点击应该显示第二次尝试的第一张图片。*

在我的示例中，这只适用于一次，因为我不知道在哪里返回或重置点击量。

希望你能帮助我吗？

**[JSFIDDLE](http://jsfiddle.net/P99Xu/)**

**HTML**

```
<div id="container">

<div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div>

    <div class="coverup">

     <div class="hoverdiv">
     </div>

     <div class="image">
     </div>

</div> 
```

**JS**

```
var amountofclicks = 0;
$('.coverup').hover(

function() {
    $(this).find('.hoverdiv').fadeTo('fast', 0.5);
}, function() {
    $(this).find('.hoverdiv').fadeOut('fast');
});

$('.coverup').bind("click", function(event) {

    if (amountofclicks < 2) {
        $(this).find('.image').show();
        amountofclicks++;
        $(this).unbind('click');
        $('.hoverdiv').hide();
    } else {
        $('.image').hide();
        return;
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T15:39:06.937

你必须重置`amountofclicks`。jsFiddle：http: [//jsfiddle.net/P99Xu/4/](http://jsfiddle.net/P99Xu/4/)

此外，无需取消绑定点击。

```
$('.coverup').bind("click", function(event) {

    if (amountofclicks < 2) {
        $(this).find('.image').show();
        amountofclicks++;
        $('.hoverdiv').hide();
    } else {
        $('.image').hide();
        $(this).find('.image').show();
        amountofclicks = 1;
        return;
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:40:52.053

`amountofclicks = 0`达到 2 时设置并`else part`执行。您不需要`unbind`点击事件。

**[现场演示](http://jsfiddle.net/P99Xu/2/)**

```
$('.coverup').bind("click", function(event) {

    if (amountofclicks < 2) {
        $(this).find('.image').show();
        amountofclicks++;
       // $(this).unbind('click');
        $('.hoverdiv').hide();
    } else {
        $('.image').hide();
        amountofclicks = 0;
        return;
    }

});​ 
```

# android - 无法更改 TextView 实例的位置。

> ID：14031960
> 
> 赞同：0
> 
> 时间：2012-12-25T15:36:55.480
> 
> 标签：android, textview, location, layout-gravity

```
public class MainActivity extends Activity implements OnGestureListener 
{ 
   private LinearLayout mainlayout;
   private TextView tv;
   private GestureDetector gestureScanner;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
       super.onCreate(savedInstanceState);

       gestureScanner = new GestureDetector(MainActivity.this,this);

       mainlayout = new LinearLayout(this);
       mainlayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
       mainlayout.setBackgroundColor(Color.GREEN);   

      tv = new TextView(getApplicationContext());
      tv.setBackgroundColor(Color.YELLOW);
      tv.setTextColor(Color.BLUE);
      tv.setGravity(Gravity.CENTER);   //here, why tv located top-left
      tv.setTextSize(20);
      tv.setLayoutParams(new LinearLayout.LayoutParams(320,80));
      mainlayout.addView(tv);
      setContentView(mainlayout);
  }
} 
```

代码如上，我用xml以外的Java代码实现布局，添加一个TextView，tv。使用 tv.setGravity(Gravity.CENTER) 定位它，为什么我不能更改电视位置。我在等你的答复。先感谢您。我会感激你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:39:50.703

您正在使用该代码设置 TextView 内容的重心，而不是 TextView 本身的重心。尝试使用：

```
LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
lp.gravity = Gravity.CENTER;
tv.setLayoutParams(lp); 
```

**编辑**

事实证明，LinearLayout 是可能的，但只有在您更改方向并且在整个布局中只需要一个 TextView 时才有效：

```
private LinearLayout mainlayout;
private TextView tv;

@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);

    mainlayout = new LinearLayout(this);
    mainlayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    mainlayout.setBackgroundColor(Color.GREEN);
    mainlayout.setOrientation(LinearLayout.VERTICAL);

    tv = new TextView(getApplicationContext());
    tv.setBackgroundColor(Color.YELLOW);
    tv.setTextColor(Color.BLUE);
    tv.setTextSize(20);
    tv.setLayoutParams(new LinearLayout.LayoutParams(320, 80));
    mainlayout.addView(tv);
    setContentView(mainlayout);

    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
    lp.gravity = Gravity.CENTER;
    tv.setLayoutParams(lp);
    tv.setText("LOL");

} 
```

上面的代码导致：

![在此处输入图像描述](../Images/7724e14199a4f0715ef0fb25747deafc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:43:57.460

```
mainlayout = new RelativeLayout(this);
        mainlayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        mainlayout.setBackgroundColor(Color.GREEN);

        tv = new TextView(getApplicationContext());
        tv.setBackgroundColor(Color.YELLOW);
        tv.setTextColor(Color.BLUE);
        tv.setTextSize(20);
        tv.setGravity(Gravity.CENTER);

        tv2 = new TextView(getApplicationContext());
        tv2.setBackgroundColor(Color.YELLOW);
        tv2.setTextColor(Color.BLUE);
        tv2.setTextSize(20);
        tv2.setGravity(Gravity.CENTER);

        RelativeLayout.LayoutParams params= new RelativeLayout.LayoutParams(320, 80);
        params.addRule(RelativeLayout.CENTER_IN_PARENT);

        tv.setLayoutParams(params);

        RelativeLayout.LayoutParams params2= new RelativeLayout.LayoutParams(320, 80);
        tv2.setLayoutParams(params2);

        mainlayout.addView(tv);
        mainlayout.addView(tv2);

        setContentView(mainlayout); 
```

# json - @XmlInverseReference 注释不起作用

> ID：14031963
> 
> 赞同：3
> 
> 时间：2012-12-25T15:37:16.933
> 
> 标签：json, jaxb, eclipselink, moxy

我发现了类似的问题，但没有一个答案对我有帮助。

所以，我有 2 个具有反向指针关系的对象。家长：

```
@XmlRootElement
public class A {

    private B b;

    @XmlElement(name = "Element B")
    public B getB() {
        return b;
    }

    public void setB(B b) {
        this.b = b;
    }

} 
```

和乙：

```
@XmlRootElement
public class B {

    private A a;

    @XmlInverseReference(mappedBy = "b")
    public A getA() {
        return a;
    }

    public void setA(A a) {
        this.a = a;
    }

} 
```

我已将*jaxb.properties*与模型放在同一个包中。(javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory)

在这个片段之后：

```
A a = new A();
a.setB(new B());
a.getB().setA(a); 
```

*“ a* ”的Json 表示是循环的“见下文”：

> {"元素 B":{"a":{"元素 B":{"a":{"元素 B":{"a":{"元素 B":{"a":{"元素 B": {"a":{"元素 B":{"a":{"元素 B":{"a":{"元素 B":{"a":{"元素 B":{"a":{ “…………

并且堆栈跟踪也是循环的：

> 在 org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:245) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:212) 在 org.codehaus.jackson.map .ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:428) 在 org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:245) 在 org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer .java:212) 在 org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:428) 在 org.codehaus.jackson.map.ser.BeanSerializer.serializeFields(BeanSerializer.java:245)

我怀疑我没有正确地将 MOXy 扩展添加到我的项目中......（刚刚添加到项目 eclipselink.jar 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:09:26.780

以下内容应该有所帮助：

**演示代码**

您的映射是正确的。您可以使用以下演示代码验证这一点。

```
package forum14031963;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {A.class}, properties);

        A a = new A();
        a.setB(new B());
        a.getB().setA(a);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(a, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。

```
{
   "Element B" : {
   }
} 
```

**JAVA模型**

在您的示例中，`@XmlRootElement`注释不是必需的，我已将其删除。如果它们在那里，演示代码也将以相同的方式工作。

***一种***

```
package forum14031963;

import javax.xml.bind.annotation.XmlElement;

public class A {

    private B b;

    @XmlElement(name = "Element B")
    public B getB() {
        return b;
    }

    public void setB(B b) {
        this.b = b;
    }

} 
```

***乙***

```
package forum14031963;

import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

public class B {

    private A a;

    @XmlInverseReference(mappedBy = "b")
    public A getA() {
        return a;
    }

    public void setA(A a) {
        this.a = a;
    }

} 
```

***jaxb.properties***

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

**JAX-RS**

如果您使用的是 JAX-RS，那么在您当前的配置中，Jackson 将被选为 JSON 提供者。将 MOXy 作为 JSON 提供程序的最简单方法是使用`MOXyJsonProvider`该类。

```
package org.example;

import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class CustomerApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(2);
        set.add(MOXyJsonProvider.class);
        set.add(CustomerService.class);
        return set;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)
*   [http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html)

# image-processing - 通过保留半透明像素，使用 ImageMagick 将 32 位 png 转换为 8 位 png

> ID：14031965
> 
> 赞同：16
> 
> 时间：2012-12-25T15:37:56.883
> 
> 标签：image-processing, imagemagick, png, transparency, png-8

我想用 ImageMagick 将 32 位 png 转换为 8 位 png，但是半透明像素丢失了。如何解决这个问题呢？我正在使用的命令如下

```
convert original.png PNG8:output.png 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-25T15:53:44.747

显然，尽管 PNG 格式实际上允许 8 位索引颜色 PNG 中的任何和所有颜色完全或部分透明，但 ImageMagick 的“PNG8”[格式说明符](https://www.imagemagick.org/script/formats.php)仅支持 GIF 样式的 1 位透明度。

*通过不*使用说明符，可以使用 ImageMagick 生成索引的 8 位 PNG `PNG8:`，而只需使用`-colors 256`or `-colors 255`* 来减少图像中的颜色数量。不幸的是，至少基于我使用 ImageMagick 6.8.9 的测试，生成的图像有一些相当奇怪且非常不必要的丑陋颜色量化伪影。

幸运的是，对于这项特定的工作，有一个更好的工具：[pngquant](http://pngquant.org/)。使用它，以最小的质量损失将 32 位 RGBA PNG 转换为 8 位彩色映射 PNG 非常简单：

```
pngquant 256 < original.png > output.png 
```

* * *

作为快速演示，这里有一张简单的测试图片（带有半透明阴影的星星），使用各种方法转换为 8 位 PNG：

> [![原来的](../Images/428f4242af968586c076e5f2535bdbdf.png "原来的")](https://i.stack.imgur.com/QnN0t.png "原来的") [![pngquant 256](../Images/326bc2817f510d32394ba79dedf6ccdc.png "pngquant 256 <输入.png>输出.png")](https://i.stack.imgur.com/q0TL2.png "pngquant 256 <输入.png>输出.png") [![ImageMagick 转换 (-colors 255)](../Images/41f3be5c52e3d7cc8c55d4176c857373.png "转换 input.png -colors 255 output.png")](https://i.stack.imgur.com/bs40J.png "转换 input.png -colors 255 output.png") [![ImageMagick 转换 (PNG8)](../Images/0b02b20cb645a5c57c6ddff01cc64a17.png "转换 input.png PNG8:output.png")](https://i.stack.imgur.com/t2yG5.png "转换 input.png PNG8:output.png") [![ImageMagick 转换（-colors 255，PNG8）](../Images/efec24c8abc16feea87e03309560ed7f.png "转换 input.png -colors 255 PNG8:output.png")](https://i.stack.imgur.com/IsbCf.png "转换 input.png -colors 255 PNG8:output.png")

从左到右：

1.  原始 32 位 RGBA PNG
2.  量化为`pngquant 256 < input.png > output.png`
3.  量化为`convert input.png -colors 255 output.png`*
4.  量化为`convert input.png PNG8:output.png`
5.  量化为`convert input.png -colors 255 PNG8:output.png`*

* * *

^(*）在下面的评论中，建议`-colors 255`有必要“为'背景'颜色保留一个条目”。根据我的测试，我并没有观察到这种情况。using`-colors 256`仍将[生成 8 位颜色映射 PNG](https://i.stack.imgur.com/5Yj3T.png "转换 input.png -colors 256 output.png")，其量化伪影在质量上与`-colors 255`. 尽管如此，为了安全起见，我已经使用`-colors 255`了上面的示例。将颜色图大小减少一种颜色本身不会显着影响结果的质量，正如测试`pngquant 255`将[证明](https://i.stack.imgur.com/9RC9P.png "pngquant 255 <输入.png>输出.png")的那样。)

# antlr - 另一个没有可行的选择...

> ID：14031966
> 
> 赞同：2
> 
> 时间：2012-12-25T15:37:59.597
> 
> 标签：antlr

我有一个数学表达式语法文件，就像在线教程中的那个：http: [//javadude.com/articles/antlr3xtut/](http://javadude.com/articles/antlr3xtut/)

但是现在我想为函数添加选项，我很难让词法分析器/解析器规则工作。我可以使用丑陋的词法分析器规则来使代码正常工作，但我想使用更干净的令牌来使解析器规则正常工作。

如果我尝试这样做，我将在输入 'Test(' 处捕获一个“第 1:9 行没有可行的替代方案”，对于像 'a*b/13.2*Test(3,2)' 这样的表达式的异常

请检查以下语法文件中的注释，看看我的确切问题是什么

```
grammar ExpressionOnly;

options {
  language = Java;
}

@header {
  package kic.engine.grammar;
}

@lexer::header {
  package kic.engine.grammar;
}

// Top Rule
eval
  : expression
  ;

term 
  : func                     
  | '(' op1=expression ')'   
  | array                    
  | element                  
  ;

  // Sub Terms
  func
    // :  f=FUNC                   // Works but this is very ugly because FUNC contains '(';
    :  f=IDENT '('                 // <---------------------------- why does this not work: line 1:9 no viable alternative at input 'Test('
         (arg=expression (',' arg=expression)*)? 
       ')'
    ;

  array
    : '['  ele=element (',' ele=element)* ']'
    ;

  element
    : b=(K_TRUE | K_FALSE)      
    | NUMBER                    
    | IDENT                     
    | DATE                      
    | SQ_STRING                 
    | K_NULL                    
    ;

negation
  @init{ boolean negate = false; } 
  : (K_NOT | '!' { negate = true;} )? 
    term  
  ;

unary 
  @init{ boolean positive = true; }
  : ('+' | '-')* 
    negation 
  ;

power
  : op1=unary 
    ( '^'  op2=unary 
    )*  
  ;

multiply
  : op1=power          
    ( '*'  op2=power   
    | '/'  op2=power   
    | '%'  op2=power   
    )* 
  ;

add 
  : op1=multiply         
    ( '+' op2=multiply   
    | '-' op2=multiply   
    )*
  ;

relation
  : op1=add 
    ( '='   op2=add   
    | '!='  op2=add   
    | '<'   op2=add   
    | '<='  op2=add   
    | '>'   op2=add   
    | '>='  op2=add   
    )* 
  ;

expression
  : op1=relation
    ( (K_AND | '&')  op2=relation    
    | (K_OR | '|')   op2=relation   
    )*
  ;

// Case-insensitive alpha characters
fragment A: ('a'|'A');
fragment B: ('b'|'B');
fragment C: ('c'|'C');
fragment D: ('d'|'D');
fragment E: ('e'|'E');
fragment F: ('f'|'F');
fragment G: ('g'|'G');
fragment H: ('h'|'H');
fragment I: ('i'|'I');
fragment J: ('j'|'J');
fragment K: ('k'|'K');
fragment L: ('l'|'L');
fragment M: ('m'|'M');
fragment N: ('n'|'N');
fragment O: ('o'|'O');
fragment P: ('p'|'P');
fragment Q: ('q'|'Q');
fragment R: ('r'|'R');
fragment S: ('s'|'S');
fragment T: ('t'|'T');
fragment U: ('u'|'U');
fragment V: ('v'|'V');
fragment W: ('w'|'W');
fragment X: ('x'|'X');
fragment Y: ('y'|'Y');
fragment Z: ('z'|'Z');

// Fragments
fragment DIGIT    : '0' .. '9';  
fragment UPPER    : 'A' .. 'Z';
fragment LOWER    : 'a' .. 'z';
fragment LETTER   : LOWER | UPPER;
fragment WORD     : LETTER | '_' | '$' | '#' | '.';
fragment ALPHANUM : WORD | DIGIT;
fragment ESCAPE[StringBuilder buf] : 
  '\\'
  ( 't' { buf.append('\t'); }
  | 'n' { buf.append('\n'); }
  | 'r' { buf.append('\r'); }
  | '"' { buf.append('\"'); }
  | '\\' { buf.append('\\'); }
  )
  ;

// Keyowords
K_FALSE : F A L S E;
K_NULL : N U L L;
K_TRUE : T R U E;
K_AND : A N D;
K_NOT : N O T;
K_OR : O R;

// Tokens;
FUNC : LETTER+ '(';

IDENT : LETTER ALPHANUM*;

ARRAY_INDEX : IDENT '[';

DQ_STRING 
  @init { final StringBuilder buf = new StringBuilder(); } 
  : '"' 
    ( ESCAPE[buf]
    | i = ~('\\' | '"') { buf.appendCodePoint(i); }
    )*
  { setText(buf.toString()); }
  ;  

NUMBER: DIGIT+ ('.' DIGIT+)? (('e'|'E')('+'|'-')? DIGIT+)?;

DATE: '\'' DIGIT DIGIT DIGIT DIGIT '-' DIGIT DIGIT '-' DIGIT DIGIT (' ' DIGIT DIGIT ':' DIGIT DIGIT ':' DIGIT DIGIT ('.' DIGIT+)?)? '\'';

SQ_STRING : '\'' .* '\'';

// hidden tokens
WS : (' ' | '\t' | '\r' | '\n')+ {$channel=HIDDEN;};

COMMENTS : '/*' .* '*/' {$channel=HIDDEN;}; 
```

有什么想法可以让函数规则与 IDENT 令牌一起使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:36:45.173

输入`Test(3,2)`变成以下标记：

```
[FUNC : Test(] [NUMBER : 3] [',' : ,] [NUMBER : 2] [')' : )] 
```

当前没有解析器规则需要`FUNC`令牌，因此解析器会产生一个错误，打印令牌的内容：`line 2:1 no viable alternative at input 'Test('`。

注释掉`FUNC`词法分析器规则，重新生成所有内容，然后重新运行。现在，相同的输入会生成这些标记而不会出现错误：

```
[IDENT : Test] ['(' : (] [NUMBER : 3] [',' : ,] [NUMBER : 2] [')' : )] 
```

出于测试目的，我将语法输出设为 AST，并将`f=IDENT`解析器规则中的术语更改`func`为`f=IDENT^`，以便更容易在 AST 中查看解析器是否识别了函数。

现在，通过输入，`a*b/13.2*Test(3,2)`我得到以下 AST：

![AST](../Images/cbc5717aa3a8dcb19e33047c0298c31c.png)

输入`Test(3,2)`被正确识别为函数，并相应地生成 AST。

# git - Git - 推送当前分支快捷方式

> ID：14031970
> 
> 赞同：459
> 
> 时间：2012-12-25T15:38:39.007
> 
> 标签：git

有没有捷径可以告诉 Git 将当前的跟踪分支推送到原点？
**注意：**我知道我可以更改[默认推送行为](https://stackoverflow.com/a/948397/138585)，但我正在寻找一种不会更改默认行为的临时解决方案。

例如，假设我在`feature/123-sandbox-tests`我将使用的分支上

```
git push origin feature/123-sandbox-tests 
```

这很乏味。我正在寻找捷径，例如

```
git push origin current # <- example, not working 
```

git 知道 current 是`feature/123-sandbox-tests`.

* * *

**编辑**：从 2.0 版本开始，git 的**默认**行为已更改为更直观的行为，这正是我想要实现的。有关详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/13148066/warning-push-default-is-unset-its-implicit-value-is-changing-in-git-2-0)。

**编辑 2**：[ceztko 的答案](https://stackoverflow.com/a/20922141/138585)是最好的答案，因为它允许推送当前分支，而不管设置如何。

* * *

## 回答 #1

> 赞同：861
> 
> 时间：2014-01-04T14:22:39.553

根据[`git push`](https://git-scm.com/docs/git-push#git-push-codegitpushoriginHEADcode)文档：

```
git push origin HEAD
    A handy way to push the current branch to the same name on the remote. 
```

所以我认为你需要的是`git push origin HEAD`. `git push -u origin HEAD`如果您还没有推送到原点，那么在本地分支中设置上游跟踪信息也很有用。

* * *

## 回答 #2

> 赞同：257
> 
> 时间：2015-06-08T10:11:18.947

您可以使用以下命令**配置 git以推送到当前分支**

```
git config --global push.default current 
```

然后就做

```
git push 
```

这会将代码推送到您当前的分支。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-05-28T06:31:41.333

[您应该在未指定分支的“git push”](https://stackoverflow.com/questions/948354/default-behavior-of-git-push-without-a-branch-specified)的默认行为中查看类似的问题

基本上，它解释了如何设置默认行为来推送您当前正在执行的分支`git push`。可能你需要的是：

`git config --global push.default current`

其他选项：

*   **nothing**：不要推任何东西
*   **匹配**：推送所有匹配的分支
*   **upstream** / **tracking**：将当前分支推送到它正在跟踪的任何地方
*   **current** : 推送当前分支

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-07-21T09:59:55.577

我在我的 .bashrc 配置中使用了这样的别名

```
alias gpb='git push origin `git rev-parse --abbrev-ref HEAD`' 
```

在命令`$gpb`中，它采用当前分支名称并将其推送到原点。

这是我的其他别名：

```
alias gst='git status'
alias gbr='git branch'
alias gca='git commit -am'
alias gco='git checkout' 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-02-28T01:06:14.067

对于它的价值，终极捷径：

在我的`.bash_profile`I have 中`alias push="git push origin HEAD"`，所以每当我输入时，`push`我都知道我正在推动我所在的当前分支。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-12-25T15:42:22.923

如果您使用的是 git 1.7.x，您可以运行以下命令来设置远程跟踪分支。

```
git branch --set-upstream feature/123-sandbox-tests origin/feature/123-sandbox-tests 
```

然后您可以简单地使用`git push`来推送所有更改。如需更完整的答案，请在[此处查看已接受的类似问题的答案。](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch)

如果您只想使用 push 命令推送当前分支，则可以将推送行为更改为上游：

```
git config --global push.default upstream 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-25T15:43:05.790

最简单的方法：运行`git push -u origin feature/123-sandbox-tests`一次。这会以您习惯的方式推动分支，并在本地配置中设置上游跟踪信息。之后，您可以`git push`将跟踪的分支推送到它们的上游远程。

您也可以自己在配置中执行此操作，方法是设置`branch.<branch name>.merge`远程分支名称（在您的情况下与本地名称相同），也可以选择`branch.<branch name>.remote`设置要推送到的远程名称（默认为 origin）。如果您查看您的配置，很可能已经设置了其中一个 for `master`，因此您可以按照该示例进行操作。

最后，请务必考虑`push.default`设置。它默认为“匹配”，这可能会产生不希望的和意外的结果。我认识的大多数人发现“上游”更直观，它只推送当前分支。

可以在[git-config 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)中找到有关这些设置的详细信息。

**再想一想，**重新阅读你的问题，我想你知道这一切。我认为你真正要找的东西并不存在。bash 函数怎么样（未经测试）：

```
function pushCurrent {
  git config push.default upstream
  git push
  git config push.default matching
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-25T13:42:14.140

在 ceztko 的回答的帮助下，我编写了这个小助手函数来让我的生活更轻松：

```
function gpu()
{
    if git rev-parse --abbrev-ref --symbolic-full-name @{u} > /dev/null 2>&1; then
        git push origin HEAD
    else
        git push -u origin HEAD
    fi
} 
```

它将当前分支推送到原点，如果尚未设置，还设置远程跟踪分支。

# php - Heroku部署自动删除服务器文件？

> ID：14031971
> 
> 赞同：9
> 
> 时间：2012-12-25T15:38:42.463
> 
> 标签：php, heroku, heroku-toolbelt

我是新手`HEROKU APPS`。

在我的 heroku 应用程序中，我遇到了问题。那就是我正在使用 php 脚本将数据保存在服务器上。

例子 ：

```
<?PHP

$file = "example.txt";

$data = "Something...";

file_put_contents($file,$data);

?> 
```

此 PHP 脚本运行成功并完美保存数据。

但是，当我将我的 APP 部署`HEROKU`到更新时 -> 在这个进程中的`example.txt`文件会被自动删除。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T15:56:18.630

### Heroku 文件系统

Heroku 的行为会因您使用的堆栈而有所不同。使用 Bamboo，大部分文件系统都是[只读的](https://devcenter.heroku.com/articles/read-only-filesystem)。对于 Cedar，它是[短暂](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)的。

在任何一种情况下，文件系统都不会在[dynos](https://devcenter.heroku.com/articles/dynos)之间共享，也不应该用于存储。为了在服务器端可靠地存储数据，您将需要使用数据库（可能将您的上传存储为 blob），或者作为另一个主机或服务上的外部资产。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T15:44:51.490

Heroku 不会在 git 推送之间为持久文件提供硬盘空间，您必须使用 Amazon S3 之类的东西进行文件存储。这就是 Heroku 将他们的文件系统称为*Ephemeral filesystem*的原因。它甚至在堆栈的早期版本中是只读的。

Heroku 有一个教程：[Using AWS S3 to Store Static Assets and File Uploads](https://devcenter.heroku.com/articles/s3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T15:51:58.567

请[参阅文档](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)：

> ### 临时文件系统
> 
> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是任何其他 dyno 中的进程都看不到写入的文件，并且在停止或重新启动 dyno 时，写入的任何文件都将被丢弃。

所以你不能用你的 Heroku dyno 节省很多。尤其是在您推送了新版本之后，测功机将重新启动，然后文件系统将被重置。

您需要将文件存储到远程位置，然后如果它们应该在测功机重置中幸存下来。

# list - scala 通过使用元组从现有列表中省略 n 元素来创建新列表

> ID：14031972
> 
> 赞同：2
> 
> 时间：2012-12-25T15:38:46.547
> 
> 标签：list, scala

我是scala的新手，所以请尝试详细说明。

我有一个清单，例如：

```
val trioElmList = List((10,20,30),(50,89,90),(60,40,65)) 
```

如何获得一个省略每个元组中间元素的新列表？结果应该是：

```
newList : List[(Int, Int)] = List((10,30), (50,90), (60,65)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T15:42:12.777

您可以使用 map 方法将函数应用于列表的每个元素，并使用该函数的返回值创建一个新列表。在函数中，您使用模式匹配来获取元组的元素并返回一个仅包含第一个和最后一个元素的元组。

```
trioElmList.map { case (x,y,z) => (x,z) } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-25T20:15:00.620

`case`如果您的输入正确，则不需要任何`List`内容​​。

```
val l: List[Tuple3[_, _, _]] = List((1,2,3), (2,3,4), (3,4,5))
l map (e => (e._1, e._3)) 
```

# c++ - Lambda 中的 C++11 捕获成员变量

> ID：14031973
> 
> 赞同：3
> 
> 时间：2012-12-25T15:38:56.957
> 
> 标签：c++, c++11

我有一个成员变量定义为：

HWND 窗口句柄。

我正在尝试捕获变量并在 Lambda 中分配给它。所以编译器给了我一个警告并建议我捕获“this”。我做到了，但现在句柄只在 Lambda 中有效：S 换句话说，它在 Lambda 之外是 NULL。

```
class Foo
{
    private:
        HWND WindowHandle;

    public:
        Foo();
        void MakeWindow(.......);
        HWND GetWindowHandle() {return WindowHandle;};
};

Foo::Foo(){}

Foo::MakeWindow(.......)
{
    Thread = std::thread([ClassName, Title, Width, Height, this]{
                    WindowHandle = CreateWindowEx(0, ClassName.c_str(), Title.c_str(), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, Width, Height, 0, 0, GetModuleHandle(NULL), 0);
                    if(WindowHandle)
                    {
                        ShowWindow(WindowHandle, SW_SHOWDEFAULT);
                        MSG msg;
                        while(GetMessage(&msg, 0, 0, 0))
                            DispatchMessage(&msg);
                    }
                });
}

int main()
{
    Foo F;
    F.MakeWindow(........);
    std::cout<<std::boolalpha<<(F.GetWindowHandle() == NULL);  //writes true.
} 
```

以上创建的窗口非常好！只是句柄为空。如何从 Lambda 中获取句柄给我的班级成员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:44:19.550

那是因为您的代码具有竞争条件。当您检查 main() 中的值时，线程尚未运行，因此 WindowHandle 仍然为 NULL。

除非你还没有真正启动线程。在这种情况下，由于线程尚未执行，WindowHandle 仍然为 NULL。

无论如何，您需要使用互斥锁在线程之间同步对 WindowHandle 的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:44:48.910

您只能捕获局部变量，即在创建 lambda 的函数中声明的内容或其参数之一。在成员函数中，当访问一个成员时，`x`您实际上是通过作为传递给成员函数的对象的隐式指针来访问`this->x`的。`this`因此，lambda 将捕获`this`而不是`x`. 要捕获成员，您需要创建一个保存它的局部变量，然后捕获该变量，例如：

```
auto&& tmpWindowHandle = this->WindowHandle; // ... or just WindowHandle 
```

...然后你会`tmpWindowHandle`在你的 lambda 函数中捕获。

由于您的 lambda 函数没有显示任何同步，因此您似乎`GetWindowHandle()`也没有任何同步，并且您的调用线程可能会`WindowHandle`在您被线程设置之前访问该成员：您将需要某种形式的同步，无论是`join()`或某种形式的互斥锁或条件变量，然后您可以`WindowHandle`从其他线程调用使用。整体设置看起来像是 a 的一个很好的应用`std::future<...>`：它旨在潜在地同时运行一个函数，然后阻塞，直到实际访问结果时需要结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T15:45:37.397

您正在分配`WindowHandle`不同的线程。所以可能发生的是你的新线程还没有开始，你正在检查是否`WindowHandle`已经改变。此外，您应该使用一些互斥锁或其他构造来保护访问`WindowHandle`，否则您将遇到竞争条件。

# android - 按钮正在交换我如何在布局中放置我想要的按钮

> ID：14031975
> 
> 赞同：0
> 
> 时间：2012-12-25T15:39:02.320
> 
> 标签：android, button

我有一个问题，我无法在我的应用程序布局中放置我想要的按钮...我搜索了有关此的信息，但每个人都说不同的东西，我只是感到困惑...有人可以告诉我我有什么去做？见下图：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/uc" >

    <Button
        android:id="@+id/button1"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_alignLeft="@+id/button2"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="98dp"
        android:text="Button" /> 
```

![在此处输入图像描述](../Images/1401c9c055d7d5ed6c6074b2424cdb4b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:01:02.253

您好，您可以使用下面的代码

```
 <Button
        android:id="@+id/button1"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Button" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/button1"
        android:gravity="center" >

        <Button
            android:id="@+id/button2"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:07:26.757

您应该遵循的步骤：

问问自己“*我想把我的按钮放在哪里？* ”；如果答案在下面的**某个地方**`button1`，那么它已经是..

如果您想增加距离，请尝试更大的值`android:layout_marginTop="98dp"`

如果你想让你`button2`的底部尝试`android:layout_marginBottom`而不是`android:layout_marginTop`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T16:18:35.557

您将 Button 的边距硬编码为 "98dp" **android:layout_marginTop="98dp"**。并且那个深黑色矩形在您的图像的背景中。因此，由于屏幕尺寸不同，不可能每次都在背景的同一部分准确显示按钮/文本/图像。因为当您定义它**fill_parent**时，您的背景会拉伸到大屏幕，但您的边距将保持不变。您可以使用**ImageButton**并将其背景设置为黑色。并从背景中删除那个深黑色矩形。

# html - HTML5 视频支持

> ID：14031981
> 
> 赞同：0
> 
> 时间：2012-12-25T15:39:51.060
> 
> 标签：html, video, codec

我想知道我是否使用 HTML5 为移动设备（Android 和 iPhone）和 PC 开发 UI。如果我有为PC录制的视频（高带宽，屏幕尺寸和Windows编解码器等），我不确定HTML5是否可以自动为移动客户端生成自适应视频流（这样在服务器端，我只需要保留一份视频）？如果不是，那么支持从 PC 和移动设备渲染视频的最佳实践是什么（我是否必须使用不同的编解码器编码成不同的格式）？

任何相关文档或代码示例都值得赞赏。

提前谢谢， 林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:48:07.323

你有很多很多的选择。

通常，您一次转换所有可能的格式。亚马逊网络服务提供现收现付的视频编码服务，但它们并不是市场上唯一的游戏。它们通常是最便宜的，因为其他加工农场通常坐在他们的堆栈上。

我们通常会转换为 mp4/h264 和 ogg/theora，偶尔也会转换为 webm/vp8。

您可以使用 AWS 转换 api 将文件放入队列中，然后在准备好后从 S3 中拉下它们，或者将它们作为您的视频源 URL 保留在那里。您甚至可以使用 api 将它们设为私有，并根据应用程序使用您的应用程序或网络服务器登录您的服务。

我也在服务器上运行了 FFMepg 来输出各种格式，但是你需要管理自己的队列，可能会很头疼。

# spring - 每当对 /WEB-INF/views 文件夹中的 .jsp 资源的任何请求直接出现时，重定向到欢迎页面（登录页面）

> ID：14031982
> 
> 赞同：0
> 
> 时间：2012-12-25T15:39:57.470
> 
> 标签：spring

我是 spring mvc 的新手。每当对`/WEB-INF/views`文件夹中的 .jsp 资源的任何请求直接出现时，我都想重定向到欢迎页面（登录页面）。我的意思是不登录应用程序。

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:10:24.273

你应该使用[Spring Security](http://static.springsource.org/spring-security/site/)来完成这个任务。您可以将 Spring Security 配置为仅向登录用户显示每个页面。如果未登录的用户尝试访问此受保护的页面之一，则 spring security 会将他重定向到日志记录页面（您的欢迎页面）。

# c++ - C 运行时 CRT 与 C++ 运行时 - 堆内存管理模型

> ID：14031988
> 
> 赞同：0
> 
> 时间：2012-12-25T15:40:48.423
> 
> 标签：c++, memory-management, heap-memory

是否有 C 运行时库和 C++ 运行时库或者只有 C 运行时（即：因此 C++ 程序使用 C 运行时，也许还有一个 c++ 运行时库和 C++ 使用 C 和 C++ 运行-时间图书馆）

其次，如果同时存在 C 和 C++ 运行时，C++ 堆内存管理模型是否与 CRT 使用的 C 堆内存管理相同（namley use of linked list for memory block）？

编辑：

第三，如果一个C++程序使用CRT，是否意味着程序有两个堆？一种由 CRT 使用，一种由 C++ 运行时使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:51:13.457

通常对于 C++ 程序，它们有一个不同的运行时，但该运行时是在 C 运行时之上实现的，因此它们会尽可能多地委派工作——而且内存管理是一个相当简单的工作。C++ 在 C 之上唯一要做的就是处理异常、析构函数等等——实际的内存分配本身可以直接来自`malloc`. 但是，该标准根本不保证这一点，也不能依赖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T15:51:20.617

Windows 上的堆有点奇怪。如果 DLL 在 C 运行时静态链接，则该 DLL 将获得自己的堆。因此，如果您有 5 个这样的 DLL，那么您的进程至少有 5 个堆。你需要非常小心地在调用 malloc() 的同一个 DLL 中调用 free() （或 delete / new）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T15:46:27.960

假设您谈论的是相同的编译器套件（例如 GCC 或 Visual C++），通常有 C 和 C++ 运行时，如果/当您使用 C 函数时，C 运行时也用于 C++ 程序。

通常，C++ 运行时的内存管理是利用 C 运行时的内存管理，但这绝不是给定的，也不应该依赖。毕竟，如果您可以向现有实现添加另一个接口，那么重新实现完整的堆管理器通常没有什么意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T16:09:34.120

C 和 C++ 没有定义“堆”除了公共接口之外的工作方式，例如、`malloc`和它们的一些兄弟。每个编译器/库供应商都会自己制作（是的，您可以使用不属于编译器套件的库，例如 gcc MingW 在很大程度上使用 Microsoft 库）。`new``free``delete`

我不确定担心是否有一个堆、两个堆、三个堆或一千个堆 - 只要您可以从与您的代码相关的任何一个分配内存，这确实是一个实现细节如何有很多堆——我认为它们的数量很重要的情况很少——除了每个堆可能具有的一点点管理开销之外。但这将是几十个字节左右，除非有人真的过度使用堆设计。

正如其他地方所提到的，C++ 代码可能使用也可能不使用相同的堆或具有单独的堆。同样，它对您的代码没有任何影响。只要你释放它时，你使用与分配时相同的方法——也就是说，不要使用`new`来分配东西，并`free`释放它，或者`malloc`和`delete`。那将是非常糟糕的——即使数据来自同一个堆，您也可能会发现存储了“隐藏”信息`new`来跟踪数据，这与隐藏的信息不同`malloc`，这意味着`malloc`“了解“发生了什么，然后发生了奇怪的崩溃！

# c - I/O 到屏幕/标准输出

> ID：14031993
> 
> 赞同：3
> 
> 时间：2012-12-25T15:41:12.637
> 
> 标签：c, io

我注意到，在我编写的任何程序中，如果我在监视器上进行大量打印（即`printf`或`fprintf (stderr, "...")`），执行时间会明显变慢。

我认为由于磁盘的物理限制，写入磁盘会很慢。我不确定为什么打印到屏幕会显着减慢程序速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:53:26.383

写入终端并不是很快，也不是为了快速而设计的，因为通常进入标准输出的唯一内容是用户的信息片段，用户受他或她阅读内容的速度限制。

当您在例如终端上写信时。linux，会发生以下事情（也许）。在每两个连续步骤之间调用内核：

1.  您的程序发出写入系统调用来写入数据。
2.  内核恢复您的终端模拟器并产生写入终端设备的数据
3.  终端仿真器渲染其帧的新状态并将其发送到 X 服务器
4.  X 服务器操作内存映射的显示区域
5.  内核告诉你的显卡交换缓冲区

这些步骤很多......由于终端输出通常只是行缓冲，所以这种情况经常发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T15:53:34.730

根据屏幕的类型、大小、显卡或任何输出经过，是的，打印内容会显着增加执行时间。很可能打印到磁盘实际上更快 - 磁盘每秒可能需要几兆字节（理论上在现代 SATA 驱动器上大约 300-600MB/s，但实际上，迟早会比这慢，因为磁盘实际上需要将数据移动到磁盘内的盘片上——但它们也有很大的缓存，因此写入 16MB 或 32MB 可能需要相当长的时间）。尝试在您的代码中添加一些时间戳（如果您还没有）并`myprog`与`myprog > file`和比较`myprog > /dev/null`（或NUL：如果你是Windows），看看哪个需要更多时间——我敢打赌它是进入屏幕的那个——写入空设备是最快的，但只有一点点。

打印到屏幕的最大问题是滚动 - 这意味着“随机播放所有内容”，即使使用聪明的硬件，也可能需要相当多的像素来随机播放。请记住，现代显卡更倾向于绘制 3D，这与滚动 2D 文本屏幕的方式完全不同。

当然，最重要的是，您的应用程序本身需要更多时间，因为您正在调用 printf 或类似的函数，这些函数并不完全是微不足道的函数，因此如果您打印很多东西， printf 本身需要一些时间 - 对于程序使用简单的代码，这可能是完成实际工作所需时间的 10 倍，即使数据变为“null”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T15:51:48.600

printf() 通常在打印到屏幕（终端）时进行行缓冲，这会使输出变慢。

您可以设置`stdout`使用**[setvbuf()](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)**的缓冲区大小。

# java - 快速计算两个算术级数的交点

> ID：14031995
> 
> 赞同：0
> 
> 时间：2012-12-25T15:41:50.723
> 
> 标签：java, performance, algorithm, math

级数 A 遵循此规则：
每个值是所有奇数加在一起，包括 N sub i 。

N 子 4。 `1+3+5+7 = 16`

进阶 B 遵循此规则。取平方根乘以 2 加 1 的上限。从天花板尖齿本身中减去 N。继续添加奇数。

N = 33。
天花板（√33）=6。
6*2+1=13。
36-33=3。
3+13 =16。

停止，因为 16 在进程 A 和 B 中。是否有可能快速做到这一点？即最小的 1 或 2 步解决方案？java或通用实现会很方便

**问题**

`What is the output you desire? Simply abool saying they do meet? Or do you want the indices at which they do meet, i.e.A[4]=16 andB[17]=16? Or do you just want the number at which they meet, i.e.16? And what if they don't meet exactly? Do you want the indices (or number) before, or after, the intersection? Finally, when or how do you decide to halt, if, say, the two sequences will never meet? (I know in this case they do, but I mean in the general case.)`

我期望的输出将是值 16 或者它可能是 B 找到该值的索引，因为两者都是等价的，因为索引只是第 i 项。如果他们不见面，我意识到这是一个非终止程序。这种情况我不在乎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T17:35:20.707

我将在这里总结我的评论，以便新访问者更容易理解。

正如其他人所指出的，*序列 A*仅仅是一个正方形序列；正如 OP 通过他的评论澄清的那样，*序列 B*将不断变化。

重述 OP 的问题可能是

**有没有比计算序列的每一项更快的方法来确定递增序列中的第一个正方形？**

确实，有。显而易见的想法是设计一种方法来“跳过”某些项的计算，基于对平方增长率与序列的洞察力。但是很难以编程方式获得关于任意序列的洞察力。

一个更强大的解决方案可能是将问题重新表述为找到最小的零：

```
B(x) - x^2 = 0 
```

为此，可能存在可能会有所帮助[的寻根算法](http://en.wikipedia.org/wiki/Root-finding_algorithm)。如果您不需要找到*最小*的零，那么更容易：实现任何求根算法，观察算法收敛到零，添加`x^2`以补偿重新制定，然后就可以了。

* * *

**编辑**

（评论框太有限，无法回复您的。）

当我说“二分法”时，我实际上是指“二分搜索”。这需要一个上限，因此并不真正适用于您的问题。

不过，让我提供一个简单的算法作为开始，尽管您可能已经完全想到了这一点。

1.  计算`B(1)`。说它是`1692`（不是正方形）。
2.  计算`B(2)`。说它是`1707`（不是正方形）。
3.  计算`B(2)-B(1)`，称其为“delta”，*例如* `1707-1692`，或`15`。认为这是对 的增长率的*幼稚*`B`估计。当然，这几乎肯定是错误的，但我们在这里的目标是通过*某种方式跳过术语*。这就是稍后要优化的内容。
4.  下一个平方大于`1707`多少？一个公式`(floor(sqrt(1707))+1)^2`, 产生`1764`。
5.  我们应该跳过多少项来尝试到达那个正方形？另一个公式 ,`(1764-1707)/15`产生`3.8`，我们可以四舍五入到`4`。
6.  计算`B(2+4) = B(6)`。
    1.  如果*小于*，`1764`则需要继续。但是在这种情况下，您已经节省了计算 3 个项的时间。你选择如何继续前进，只是另一种选择。您可以计算`B(7)`并转到第 3 步（`B(7)-B(6)`作为新增量计算）。您可以直接进入第 3 步（`(B(6)-B(2))/4`作为新增量计算）。*（如果不描述*的可能功能，您将无法真正知道什么是最好的`B`。）
    2.  如果*大于*，`1764`则需要返回。再次，有很多方法。二分查找实际上是一种简单、合理的方法。计算`B(4)`，因为它直接在`B(2)`和之间`B(6)`。如果小于`1764`，请尝试`B(5)`。如果大于`1764`，请尝试`B(3)`。如果其中一个不匹配，则继续从`B(7)`. 使用二进制搜索，您最多可以进行`log(N)`计算。

所以这听起来很划算，对吧？你要么跳过一些计算，要么`log(N)`最多做。（或者，您会发现对此进行更好的优化。）但是，显然，这并不是那么简单，因为您正在做额外的计算来找到这些增量、投影、二分搜索等。由于正方形增长非常缓慢（只有平方之间有这么多整数），我觉得这样的算法只会击败“线性搜索”（计算每个术语），如果你正在处理大整数，或者非常复杂的序列`B`（但鉴于`B`必须总是增加，多么复杂一个序列真的可以吗？）关键是找到一个适合你所有序列的*特征*，

 *我仍然不知道您的应用程序是什么，但此时您不妨尝试一下并在现实数据集上对其进行基准测试（相对于线性搜索）。这将立即告诉您是否有任何实际收益，以及是否应该在优化上投入更多时间。而且它会比尝试做所有的理论数学、表征序列等等更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:45:57.473

仅供参考，您的第一个序列只是正方形。

应该清楚的是，两个序列都是单调递增的。因此，您需要做的就是在每个序列中保留一个索引，并重复递增指向较小数字的索引，直到两个索引都指向相同的数字。

请注意，如果序列没有共同的数字，这将永远运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T17:11:25.417

伪代码中的算法：

```
int i=1, j=1;
int x=func1(i), y=func2(j);
while x!=y {
  if x<y {i++; x=func1(i)}
  else   {j++; y=func2(j)}
} 
```

假设我们所知道的`func1`只是`func2`增加函数，那么很难进一步优化这个算法。*

# c# - .NET 中的多字符串列表

> ID：14031999
> 
> 赞同：-1
> 
> 时间：2012-12-25T15:42:10.073
> 
> 标签：c#, .net, delphi

我怎样才能以与 Delphi 中相同或几乎相同的方式执行此操作，因为我知道 .NET 并没有像 Delphi 中那样真正替代 StringList 的方法。

MultiStringList 将一个 StringList 拆分为 N 个子字符串列表。

**例如：**

你有一个文本，你想把它分成 N 个列表。或者您有一种情况，您希望将一个列表拆分为多个子列表。

```
unit Multi;

interface

uses
  System.SysUtils,
  System.Classes,
  System.Generics.Collections;

type
  TMultiStringList = class
  public
    type
      TFill = (mfiAdd, mfiClearBeforeFill);

      TMode = (
        mslTrim,        // Trim lines before add
        mslLower,       // Lower lines before add
        mslUpper,       // Upper lines before add
        mslAssign,      // Just use Assign()
        mslSpread);     // Spread text to the lists
  private
    FLength: Integer;
    FLists: TArray<TStringList>;
    function ValidArray(): Boolean;
    procedure BuildArray(const Length: Integer);
    procedure FreeArray();
    function GetList(const Index: Integer): TStringList;
  public
    constructor Create(const Length: Integer);
    destructor Destroy(); override;
    procedure LoadFromFile(const FileName: string; const Fill: TFill; const Mode: TMode);
    property ListCount: Integer read FLength;
    property Lists[const Index: Integer]: TStringList read GetList;
  end;

implementation

{ TMultiStringList }

procedure TMultiStringList.BuildArray(const Length: Integer);
var
  I: Integer;
begin
  SetLength(FLists, Length);
  for I := Low(FLists) to High(FLists) do
    FLists[I] := TStringList.Create();
end;

constructor TMultiStringList.Create(const Length: Integer);
begin
  FLength := Length;
  BuildArray(Length);
end;

destructor TMultiStringList.Destroy;
begin
  FreeArray();
  inherited;
end;

procedure TMultiStringList.FreeArray;
var
  I: Integer;
begin
  if (Length(FLists) > 0) then
  begin
    for I := Low(FLists) to High(FLists) do
    begin
      FLists[I].Free();
      FLists[I] := nil;
    end;
    SetLength(FLists, 0);
  end;
end;

function TMultiStringList.GetList(const Index: Integer): TStringList;
begin
  Result := FLists[Index];
end;
procedure TMultiStringList.LoadFromFile(const FileName: string; const Fill: TFill; const Mode: TMode);

  procedure HandleLoad(Callback: TProc<TStringList, string>);
  var
    List, Target: TStringList;
    I, J: Integer;
  begin
    List := TStringList.Create();
    try
      List.LoadFromFile(FileName);
      for I := Low(FLists) to High(FLists) do
      begin
        if (Fill = TFill.mfiClearBeforeFill) then
          FLists[I].Clear();

        for J := 0 to List.Count - 1 do
          Callback(FLists[I], List[J]);
      end;
    finally
      List.Free();
    end;
  end;

  procedure HandleAssign();
  var
    I: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
      FLists[0].Clear();

    FLists[0].LoadFromFile(FileName);

    for I := 1 to High(FLists) do
    begin
      if (Fill = TFill.mfiClearBeforeFill) then
        FLists[I].Clear();

      FLists[I].Assign(FLists[0]);
    end;
  end;

  procedure HandleSpread();
  var
    List: TStringList;
    I: Integer;
    ItemsPerList: Integer;
    ListIndex: Integer;
  begin
    if (Fill = TFill.mfiClearBeforeFill) then
    begin
      for I := Low(FLists) to High(FLists) do
        FLists[I].Clear();
    end;

    List := TStringList.Create();
    try
      List.LoadFromFile(FileName);

      ItemsPerList := (List.Count + FLength - 1) div FLength;

      for I := 0 to List.Count - 1 do
      begin
        FLists[I div ItemsPerList].Add(List[I]);
      end;
    finally
      List.Free();
    end;
  end;

begin
  if (not ValidArray()) then
    raise Exception.Create('Array incomplete!');

  case Mode of
    mslTrim : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(Trim(S));
                     end);

    mslLower     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(LowerCase(S));
                     end);

    mslUpper     : HandleLoad(
                     procedure(Target: TStringList; S: string)
                     begin
                       Target.Add(UpperCase(S));
                     end);

    mslAssign    : HandleAssign();

    mslSpread    : HandleSpread();
  else
    raise ENotImplemented.Create('Mode not implemented!');
  end;
end;

function TMultiStringList.ValidArray: Boolean;
begin
  Result := Length(FLists) = FLength;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T15:46:27.570

二维字符串[数组](http://msdn.microsoft.com/en-us/library/system.array.aspx)应该允许您实现类似的功能。如果您希望能够向其中动态添加项目，您可以使用[`List<string[]>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx).