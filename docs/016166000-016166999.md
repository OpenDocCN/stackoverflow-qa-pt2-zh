# StackOverflow 问答 16166000-16166999

# apache - Hudson Apache SVN 检出异常 - 500 内部服务器错误

> ID：16166000
> 
> 赞同：1
> 
> 时间：2013-04-23T09:40:31.443
> 
> 标签：apache, svn, tomcat, continuous-integration, hudson

我在尝试通过 Hudson 签出 SVN Repo 时遇到错误。

使用 TortoiseSVN，我可以毫无问题地签出这个存储库。

在 Hudson，我使用“Hudson Subversion Plug-in -2.3.8-h-1”。

一开始我使用了这个 SVN 语法：`svn://url/repo`

现在我们将我们的存储库更改为 VisualSVNManager，我有以下语法：`http://url:81/svn/repo`

我的 Hudson 在 Apache Tomcat 上运行。

错误是：

```
 Checking out http://url:81/svn/repo revision: 23.04.2013 11:25:59 depth:infinity ignoreExternals: false
ERROR: Failed to check out http://url:81/svn/repo
org.tmatesoft.svn.core.SVNException: svn: E175002: REPORT of '/svn/repo/!svn/vcc/default': 500 Internal Server Error (http://url:81)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
    at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.getDatedRevision(DAVRepository.java:207)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgRepositoryAccess.getRevisionNumber(SvnNgRepositoryAccess.java:178)
    at org.tmatesoft.svn.core.internal.wc2.SvnRepositoryAccess.getLocations(SvnRepositoryAccess.java:151)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgRepositoryAccess.createRepositoryFor(SvnNgRepositoryAccess.java:45)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgAbstractUpdate.checkout(SvnNgAbstractUpdate.java:706)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgCheckout.run(SvnNgCheckout.java:14)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgCheckout.run(SvnNgCheckout.java:9)
    at org.tmatesoft.svn.core.internal.wc2.ng.SvnNgOperationRunner.run(SvnNgOperationRunner.java:20)
    at org.tmatesoft.svn.core.internal.wc2.SvnOperationRunner.run(SvnOperationRunner.java:20)
    at org.tmatesoft.svn.core.wc2.SvnOperationFactory.run(SvnOperationFactory.java:1235)
    at org.tmatesoft.svn.core.wc2.SvnOperation.run(SvnOperation.java:291)
    at org.tmatesoft.svn.core.wc.SVNUpdateClient.doCheckout(SVNUpdateClient.java:777)
    at hudson.scm.subversion.CheckoutUpdater$UpdateTaskImpl.perform(CheckoutUpdater.java:111)
    at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:152)
    at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:160)
    at hudson.scm.subversion.UpdateUpdater$TaskImpl.perform(UpdateUpdater.java:114)
    at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:152)
    at hudson.scm.SubversionSCM$CheckOutTask.perform(SubversionSCM.java:812)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:795)
    at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:776)
    at hudson.FilePath.act(FilePath.java:791)
    at hudson.FilePath.act(FilePath.java:773)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:768)
    at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:711)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1515)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:521)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:428)
    at hudson.model.Run.run(Run.java:1390)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:40)
    at hudson.model.ResourceController.execute(ResourceController.java:81)
    at hudson.model.Executor.run(Executor.java:137)
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T10:29:00.750

据我记得错误的 SVN 版本是问题必须从 1.4 更改为 1.6。

# windows-phone-7 - windows phone 8中如何获取钱包中的功能？

> ID：16166008
> 
> 赞同：0
> 
> 时间：2013-04-23T09:40:56.287
> 
> 标签：windows-phone-7, windows-phone-8

我想在我的应用程序中获得密码保护功能，因为它`Wallet App`已经存在于 Windows Phone 模拟器中。设置 pin 并退出应用程序后。然后再次启动它要求输入钱包密码的应用程序。如何在我的应用程序中获取该视图。我的问题是它是 Windows Phone 8 中的默认库还是我们必须自己构建？如果它是默认的，那么我们称之为如何访问这样的东西？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:52:47.870

这必须由您或第三方构建 - SDK 中没有任何内容可以实现您所追求的行为。

# c++ - 为线程安全写入映射中保存的队列时的互斥锁

> ID：16166010
> 
> 赞同：1
> 
> 时间：2013-04-23T09:41:04.017
> 
> 标签：c++, stl, thread-safety, mutex

我有`map<int, queue<int>>`一个线程写入它，即将消息推送到队列中。它们的键是指 a `client_id`，并且队列为客户端保存消息。我希望使这个读写线程安全。

目前，写入它的线程做这样的事情

```
map<int, queue<int>> msg_map;
if (msg_map.find(client_id) != msg_map.end())
{
    queue<int> dummy_queue;
    dummy_queue.push(msg); //msg is an int
    msg_map.insert(make_pair(client_id, dummy_queue);
}
else
{
    msg_map[client_id].push(msg);
} 
```

有许多客户正在阅读 - 并从这张地图中删除。

```
if (msg_map.find(client_id) != msg_map.end())
{
    if (!msg_map.find(client_id)->second.empty())
    {
        int msg_rxed = msg_map[client_id].front();

        //processing message

        msg_map[client_id].pop();
    }
} 
```

我正在阅读[有关](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html#SYNCHRONIZATION)互斥锁的文章（以前没有使用过），我想知道应该在何时何地锁定互斥锁。我的困惑在于他们正在访问单独的队列（保存在同一个地图中）。我是锁定队列还是锁定地图？

是否有标准/公认的方法来做到这一点 - 并且使用互斥锁是最好的方法吗？有 0 个客户端线程，只有 1 个单写线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:39:45.657

## 简化和优化您的代码

现在我们不关心互斥体，稍后我们会在代码稍微清理一下时处理它（这样会更容易）。

首先，从您展示的代码来看，似乎没有理由使用有序[`std::map`](http://en.cppreference.com/w/cpp/container/map)（对数复杂度），您可以使用更高效的[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)（平均恒定时间复杂度）。选择完全取决于您，如果您不需要订购容器，您只需更改其声明：

```
std::map<int, std::queue<int>> msg_map;
// or
std::unordered_map<int, std::queue<int>> msg_map; // C++11 only though 
```

现在，地图在设计上非常高效，但是如果您坚持对每项操作进行查找，那么您将失去地图的所有优势。

关于编写器线程，您的*所有*代码块（对于编写器）都可以仅由这一行有效地替换：

```
msg_map[client_id].push(msg); 
```

请注意，`operator[]`对于两者`std::map`和`std::unordered_map`定义为：

> 使用作为键和默认构造的映射值将新元素插入到容器中`key`，并返回对新构造的映射值的引用。如果具有`key`键的元素已经存在，则不执行插入并返回对其映射值的引用。

关于您的阅读器线程，您不能直接使用`operator[]`，因为如果当前不存在特定的条目，它将创建一个新条目，`client_id`因此，您需要缓存返回的迭代器`find`以重用它，从而避免无用的查找：

```
auto iter = msg_map.find(client_id);
// iter will be either std::map<int, std::queue<int>>::iterator
//                  or std::unordered_map<int, std::queue<int>>::iterator
if (iter != msg_map.end()) {
    std::queue<int>& q = iter->second;
    if (!q.empty()) {
        int msg = q.front();
        q.pop();
        // process msg
    }
} 
```

我之所以`pop`在处理消息之前立即发送消息，是因为当我们添加互斥锁时它会提高并发性（我们可以更快地解锁互斥锁，这总是好的）。

## 使代码线程安全

@hmjd 关于多个锁（地图一个，每个队列一个）的想法很有趣，但是根据您向我们展示的代码，我不同意：您从额外并发中获得的任何好处很可能会被额外的时间所抵消它需要锁定队列互斥体（实际上，锁定互斥体是一项*非常*昂贵的操作），更不用说您必须处理的额外代码复杂性。我会把钱押在一个更有效的互斥体上（同时保护地图和所有队列）。

顺便说一句，如果您想使用更高效的方式，单个互斥体可以解决迭代器失效问题`std::unordered_map`（`std::map`尽管不会遇到该问题）。

假设 C++11，只需声明 a[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)以及您的地图：

```
std::mutex msg_map_mutex;
std::map<int, std::queue<int>> msg_map; // or std::unordered_map 
```

保护 writer 线程非常简单，只需在访问 map 之前锁定 mutex：

```
std::lock_guard<std::mutex> lock(msg_map_mutex);
// the lock is held while the lock_guard object stays in scope
msg_map[client_id].push(msg); 
```

保护阅读器线程几乎没有任何困难，唯一的技巧是您可能希望尽快解锁互斥锁以提高并发性，因此您必须使用[`std::unique_lock`](http://en.cppreference.com/w/cpp/thread/unique_lock)（可以提前解锁）而不是[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard)（只能解锁当它超出范围时）：

```
std::unique_lock<std::mutex> lock(msg_map_mutex);
auto iter = msg_map.find(client_id);
if (iter != msg_map.end()) {
    std::queue<int>& q = iter->second;
    if (!q.empty()) {
        int msg = q.front();
        q.pop();
        // assuming you don't need to access the map from now on, let's unlock
        lock.unlock();
        // process msg, other threads can access the map concurrently
    }
} 
```

如果您不能使用 C++11，则必须替换`std::mutex`et al。使用您的平台提供的任何东西（pthreads、Win32、...）或使用[boost](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html)等效项（与特定于平台的原语不同，它具有与新的 C++11 类一样可移植和易于使用的优点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:46:46.067

`map`在修改两个结构时，对和 的读取和写入访问`queue`同步，包括`map`：

```
map<int, queue<int>> msg_map;
if (msg_map.find(client_id) != msg_map.end())
{
    queue<int> dummy_queue;
    dummy_queue.push(msg); //msg is an int
    msg_map.insert(make_pair(client_id, dummy_queue);
}
else
{
    msg_map[client_id].push(msg); // Modified here.
} 
```

两个选项是 a `mutex`，它同时锁定`map`and或对 the和 a per`queue`具有互斥锁。第二种方法更可取，因为它减少了持有单个锁的时间长度，并且意味着多个线程可以同时更新多个队列。`map``mutex``queue`

# c++ - 插入结构的值以在 C++ 中配对

> ID：16166012
> 
> 赞同：1
> 
> 时间：2013-04-23T09:41:18.273
> 
> 标签：c++

我已经阅读了地图插入的 C++ 参考，并在示例中显示了以下代码

```
std::map<char,int> mymap;
mymap.insert (it, std::pair<char,int>('b',300)); 
```

同时我看到了类似操作的代码

```
mymap.insert( pair<uuid,structval>( (*it).first, structval() ) ); 
```

structval 本身被声明为普通结构

```
 struct structval { 
//some params 
}; 
```

谁能解释一下为什么要启动一对 structval 我们可以简单地通过使用 structval() 操作来调用结构？structval() 是什么意思？这是访问结构并将其成对放置的有效方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:43:46.310

> structval() 是什么意思？这是访问结构并将其成对放置的有效方法吗？

`structval()`实例化一个*临时*对象类型`structval`。因此，从技术上讲，它不是*访问 struct*的方法，而是创建它的实例。是的，这是创建对象实例的有效方法：

```
struct X 
{ 
    X() : i_(42) { } 

    int i_;
};

void foo(X x) { /* ... */ }

// ...

foo(X()); // <== Valid way to construct a temporary object
          //     of type X and pass it as an argument to
          //     the foo() function. 
```

然后将这个临时的、默认构造的实例作为参数传递给构造函数`std::pair`（顺便说一下，您正在构造的对对象也是临时的！）。

通常，pairs 是通过调用`std::make_pair()`函数来构造的，它可以为您推断参数的类型，因此您不必显式键入它们。因此，您可以重写：

```
pair<uuid,structval>( (*it).first, structval() ) 
```

如下：

```
std::make_pair((*it).first, structval()) 
```

在 C++11 中，您还可以使用[`emplace`](http://en.cppreference.com/w/cpp/container/map/emplace)成员函数代替`insert()`：

```
mymap.emplace((*it).first, structval()); 
```

这将使得无需显式构造该对（或`std::make_pair()`为此目的调用）。

* * *

最后，地图的值类型不是：

```
pair<key_type, mapped_type> 
```

反而：

```
pair<key_type const, mapped_type>
//            ^^^^^ 
```

因为地图的键永远不能改变，以防止弄乱容器的内部顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:43:15.310

`structval()``structval`是对无参数类型的构造函数的调用。因此，只需使用临时创建的对象。

相关：在大多数情况下，您应该使用`std::make_pair`, 而不是调用对 c-tor。

# javascript - 你能详细解释一下.el、getEl()、Ext.get()吗？

> ID：16166017
> 
> 赞同：11
> 
> 时间：2013-04-23T09:41:26.230
> 
> 标签：javascript, extjs, extjs4.2

我是 Sencha ExtJs 的新手

我没看懂行`Ext.getCmp('component_id').getEl().hide();`。有什么用`.getEl()`。可以`Ext.getCmp('component_id').hide();`直接写吗？

并向我解释一下.el `Ext.get()`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-21T18:28:43.107

# Ext.getCmp() 与 Ext.get()

`Ext.getCmp()`在 ExtJS 组件树中找到一个现有的（创建的）**组件。**请注意，*不鼓励*使用它。改用[ComponentQuery](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.ComponentQuery)。

`Ext.get()`通过 id找到一个**DOM 元素。**例如：

```
<html>
    <body>
        <div id="target">Hello, world!</div>
    </body>
</html> 
```

`Ext.get('target')`将返回`div#target`DOM 元素。

我个人从不使用任何一种。相反，我使用 ComponentQuery 定位组件，然后检索它们的 DOM 元素，如下所述。

# MyCmp.getEl() 与 MyCmp.el

两者都只是检索 MyCmp 组件的顶级 DOM 元素。

当前版本的 ExtJS (4.2.1) 定义`.getEl()`函数如下：

```
MyCmp.getEl = function () {
    return this.el;
} 
```

这意味着`MyCmp.getEl()`和`MyCmp.el`是**绝对相等**的。

`.el`如果您希望使代码简短而优美，请使用。但是，`.getEl()`如果将来 ExtJS 在组件的 DOM 元素检索过程中添加额外的逻辑（例如，首先检查它是否存在），这可能会很有用。

我更喜欢`.el`.

# MyCmp.hide() VS MyCmp.el.hide()

`MyCmp.hide()`和`MyCmp.el.hide()`是两个不同的功能。当前版本的 ExtJS (4.2.1) 将它们定义如下：

```
MyCmp.hide = function (animateTarget, cb, scope) {
    var me = this,
        continueHide;
    if (me.pendingShow) {
        delete me.pendingShow;
    } if (!(me.rendered && !me.isVisible())) {
        continueHide = (me.fireEvent('beforehide', me) !== false);
        if (me.hierarchicallyHidden || continueHide) {
            me.hidden = true;
            me.getHierarchyState().hidden = true;
            if (me.rendered) {
                me.onHide.apply(me, arguments);
            }
        }
    }
    return me;
} 
```

和

```
MyCmp.el.hide = function (animate){
    if (typeof animate == 'string'){
        this.setVisible(false, animate);
        return this;
    }
    this.setVisible(false, this.anim(animate));
    return this;
} 
```

然而，这两个函数似乎产生了**相同的结果**。他们只是将 a 添加`style="display: none;"`到组件的 DOM 元素中。

我用`MyCmp.hide()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:46:33.470

> 1) `Ext.getCmp('')` -> ExtJS 在页面构建时维护组件列表。使用 getCmp('unique ID') 从列表中获取组件
> 
> 2) `getEl()` -> 返回组件的 HTML 元素/DOM
> 
> 3) `hide()` -> 仅将 css (eg: `"display:none"`) 应用于组件的样式

## 所以

`Ext.getCmp('component_id').hide()`

相当于

`Ext.getCmp('component_id').getEl().hide()`

# ios - MFMailComposeViewController - 附加图像 - 方向错误

> ID：16166019
> 
> 赞同：0
> 
> 时间：2013-04-23T09:41:28.963
> 
> 标签：ios, image, email, orientation

我正在尝试使用 MFMailComposeViewController 将图像作为附件通过电子邮件发送。

其他一切都很好，只是没有从 exif 数据中读取正确的图像方向。应以纵向显示/邮寄的图像以横向右向显示/邮寄，这是在 iOS 中捕获的图像的实际方向。

我检查了 mime 类型，我使用 'image/jpeg' 作为 jpeg 图像。这似乎是正确的。我尝试在发送前转储我附加到邮件的图像数据，转储的图像在 mac 中正确显示。如果我尝试在收到的邮件中打开图像，它会显示正确的方向。

可能出了什么问题？

# c# - VSTO Word AddIn：MessageBox 计时问题

> ID：16166022
> 
> 赞同：2
> 
> 时间：2013-04-23T09:41:39.290
> 
> 标签：c#, ms-word, vsto

你好！

我正在开发一个 VSTO Word Addin，它可以帮助用户替换给定文本中的某些单词。一个对话框引导用户完成替换。现在，当用户替换最后一个单词时，我想显示一个他完成的[MessageBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.aspx)。我正在努力解决时间问题。MessageBox 在最后一个替换可见之前出现。尽管如此，替换的代码行之前已执行。在单击 MessageBox 后，将按原样进行替换。

这是我用来替换单词的行：

```
using Microsoft.Office.Interop.Word;
...
Words wordsText = Globals.ThisAddIn.Application.ActiveDocument.Words;
...
wordsText[wordPos].Text = "[some text]"; 
```

这是我稍后显示的 MessageBox：

```
MessageBox.Show(this._owner, "[you are done text]", "[title]", MessageBoxButtons.OK, MessageBoxIcon.Information); 
```

我注意到，如果我在 Visual Studio 中的上述行上设置断点，则会在 MessageBox 出现之前正确进行替换。我可以以某种方式强制更改`Microsoft.Office.Interop.Word.Words`立即应用吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T08:49:47.450

我确实没有真正的解决方案，只有一些想法：

*   也许你可以做`System.Windows.Forms.Application.DoEvents();`...
*   或者创建一个新文档，再次删除它以强制 Winword 更新 `Application.ActiveDocument.Words`...

希望它有帮助，约尔格

# sql - 英国的 ServiceStack OrmLite 和 DateTimeOffset 支持

> ID：16166024
> 
> 赞同：4
> 
> 时间：2013-04-23T09:41:41.457
> 
> 标签：sql, sql-server, servicestack, ormlite-servicestack, datetimeoffset

我遇到了**OrmLite**和**DateTimeOffset**支持的问题。我住在英国，相信这是相关的。

我有一个表，其中有一列类型为**DateTimeOffset**。

尝试插入**DateTimeOffset**列时出现以下 SQL 错误：

```
Msg 241, Level 16, State 1, Line 1
Conversion failed when converting date and/or time from character string. 
```

我已经运行了**SQL Profiler**，可以看到正在执行的 SQL 如下：

```
INSERT INTO "Table"
    ("InsertedDateTime")
VALUES
    ('23/04/2013 09:30:48 +00:00') 
```

我很确定这是**dd/mm/yy** vs **mm/dd/yy**的问题。如果我将 SQL 转换为以下内容，它可以正常工作：

```
INSERT INTO "Table"
    ("InsertedDateTime")
VALUES
    ('23-Apr-2013 09:30:48 +00:00') 
```

**我是否有一些配置不正确，或者我需要做些什么才能使其正常工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:56:07.900

您只需要更改默认日期格式。试试这个——

```
SET DATEFORMAT dmy

DECLARE @temp TABLE (col DATETIMEOFFSET)

INSERT INTO @temp (col)
SELECT '23-Apr-2013 09:30:48 +00:00'

INSERT INTO @temp (col)
SELECT '2013-04-23 09:30:48 +00:00'

INSERT INTO @temp (col)
SELECT '2013/04/23 09:30:48 +00:00'

INSERT INTO @temp (col)
SELECT '23/04/2013 09:30:48 +00:00' 
```

# javascript - 将变量值放入另一个 javascript

> ID：16166025
> 
> 赞同：0
> 
> 时间：2013-04-23T09:41:44.047
> 
> 标签：javascript, jquery

我试图找出以下问题

```
var result = {"name":"Launches","Data":"50,56,34,25,25,55"} 
```

我们如何使用 jquery 或 javascript 将这个变量值（结果）打印到下面的变量中

```
Series :[result]; 
```

任何想法。我试过了，`document.write()`但它正在写入屏幕。但我需要上述变量值作为 Series 的输入。

我需要这样的结果

```
Series:[{"name":"Launches","Data":"50,56,34,25,25,55"}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:45:21.560

你说的价值是什么意思？

`result`是一个有 2 个键值对的对象。

你可以说`result.Data`返回“50,56,34,25,25,55”，

或`result.name`返回“发射”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:44:47.790

利用

```
document.write(result.Data);
document.write(result.name);

var Series = result.Data; 
```

# c++ - 如何避免 PCA 中的 NaN 值

> ID：16166031
> 
> 赞同：2
> 
> 时间：2013-04-23T09:41:53.310
> 
> 标签：c++, opencv, image-processing, pattern-matching

我使用 OpenCV PCA 来获取特征向量和特征值。但是 eigenVectors 填充了 NaN 值。所以我不能做进一步的处理。如何在 OpenCV 中的 PCA 中避免 NaN 值？

```
cv::PCA pca(DataBase,cv::Mat(),CV_PCA_DATA_AS_ROWS); 
```

# jquery - jquery 选择器字符和数字正则表达式

> ID：16166032
> 
> 赞同：0
> 
> 时间：2013-04-23T09:41:55.623
> 
> 标签：jquery, css, regex, selector

我需要像这样选择所有ID：

r1 r2 r3 等，没有像 helloWorld 这样的其他 id

我尝试将 css 选择器与 jQuery 一起使用，但我不明白如何。我尝试 $('#r[0-9]') 但不起作用。

泰！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:43:33.157

ID 选择器 ( `#`) 仅适用于特定 ID。您想使用属性选择器。

```
$("[id^=r]") 
```

# c++ - 用于继承的模板便利构造函数

> ID：16166035
> 
> 赞同：1
> 
> 时间：2013-04-23T09:42:01.670
> 
> 标签：c++, templates, c++11

我不完全确定我在这里选择了正确的方法，所以我将首先勾勒出问题：

我需要一个基类（可能是抽象的），它为它的所有子类保存一个便利构造函数，该构造函数返回该子类的静态实例，并接受类型为`boost::tuple<std::string>`or的参数`boost::tuple<short, int>`。

我的基类是什么样的：

```
class BaseClass{

public:

    template<typename TCLASS, typename TUPLE>
    static TCLASS* createPacketFromStruct(TUPLE s){
        TCLASS* p = new TCLASS();
        p->structure = s;
        p->createMessageFromStruct();
        return p;
    }
}; 
```

但我无法从该模板中获取静态实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:33:42.100

您应该能够像这样调用该函数：

```
MyClass* myClass = BaseClass::template createPacketFromStruct<MyClass,MyTuple>(s); 
```

如果您希望编译器推断模板参数，请更改函数的签名以获取额外的类型参数`TCLASS**`并像这样调用它：

```
MyClass* myClass;
BaseClass::template createPacketFromStruct(&myClass, s); 
```

（不确定是否`template`真的需要，也许`BaseClass::createPacketFromStruct(&myClass, s);`也可以）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:13:35.357

看来您的问题是如何调用您编写的方法？在这种情况下，以下应该比其他答案更容易：

```
MyClass* myClass = BaseClass::createPacketFromStruct<MyClass>( s ); 
```

`template`不需要关键字，因为它`BaseClass`本身不是模板。此外，您不需要指定第二个模板参数。

# jquery - 使用 PrimeFaces 手动添加/加载 jQuery 会导致未捕获的 TypeErrors

> ID：16166039
> 
> 赞同：12
> 
> 时间：2013-04-23T09:42:12.760
> 
> 标签：jquery, jsf, primefaces, typeerror

我正在使用 PrimeFaces 3.5 和 JSF 2.0。我想使用一个 jQuery 插件，所以我在我的 webapp 中包含了 jQuery。

```
<h:head>
    <h:outputScript name="js/jquery.min.js" />
    <h:outputScript name="js/jquery-ui.js" />
</h:head> 
```

但是，在使用 PrimeFaces 组件时，我会收到如下未捕获的类型错误：

> 未捕获的类型错误：无法读取未定义的属性“长度”

> 未捕获的类型错误：对象 [对象对象] 没有方法“自动完成”

> 未捕获的类型错误：无法读取未定义的属性“keyCode”

> 未捕获的类型错误：this.jq.draggable 不是函数

> 未捕获的类型错误：无法读取未定义的属性“LinearAxisRenderer”

> 未捕获的类型错误：对象 [对象对象] 没有方法“文件上传”

> 未捕获的类型错误：this.jqEl.datetimepicker 不是函数

等等。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T12:08:12.147

PrimeFaces 是一个基于 jQuery 的 JSF 组件库。它**已经**随 jQuery 和 jQuery UI 一起提供。出于某种原因手动加载另一个 jQuery/jQuery UI 副本是不正确的。多个不同版本的 jQuery 文件只会以这种方式相互冲突，因为它们不一定使用/共享完全相同的变量/函数。

摆脱所有那些手动加载的 jQuery/UI 文件。这是没有意义的。

如果您这样做是因为您需要在某些不一定使用任何 PrimeFaces 组件的页面中使用一些 jQuery/UI 魔法（因此其捆绑的 jQuery 不会自动包含，因此`$()`将不可用），那么您总是可以在一些主模板中手动显式包含 PrimeFaces 捆绑的 jQuery，如下所示：

```
<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
<h:outputScript library="primefaces" name="jquery/jquery-plugins.js" target="head" /> 
```

*（`target="head"`如果您直接在内部指定它们，则不需要`<h:head>`）*

* * *

如果您绝对需要提供自己的 jQuery 版本，因为 PrimeFaces 中捆绑的版本已经过时，那么您有两种选择：

*   让您的 webapp 在完全相同的资源标识符（库/名称）上提供自己的 `/resources/primefaces/jquery/jquery.js`（不要更改路径或文件名！）。然后将选择这个而不是捆绑 PrimeFaces 的那个。

*   解包`primefaces.jar`，用较新版本替换`/META-INF/resources/primefaces/jquery/jquery.js`文件（不要更改路径或文件名！），重新打包一个新的`primefaces.jar`.

*（并且不要忘记删除所有`<h:outputScript>`对自己副本的引用）*

无论多么彻底地测试。由于与 PrimeFaces 捆绑的版本相比，较新的 jQuery 版本中的微小更改/错误修复，某些 PrimeFaces 特定功能可能会因升级而中断。

最重要的是，您应该绝对确保您**不**提供 jQuery/UI 的多个副本，否则您仍将面临当前的冲突/冲突。像某些人可能建议的那样使用`$.noConflict()`绝对不是为了能够一起使用多个 jQuery 库。它的目的是能够将 jQuery 与另一个 JS 库一起使用，该库巧合地也`$()`用作全局函数，例如 Prototype。另请参阅 ao [Jquery 和原型 noconflict](https://stackoverflow.com/questions/16871278/jquery-and-prototype-noconflict)。

# signalr - SignalR 1.01 中不需要 MapHubs？

> ID：16166040
> 
> 赞同：5
> 
> 时间：2013-04-23T09:42:12.813
> 
> 标签：signalr

我正在关注 Signalr Wiki 中的 Hubs 快速入门指南。我在 RouteTable.Routes.MapHubs() 行上的 Global.asax、Application_Start 中遇到错误。

名为“signalr.hubs”的路由已在路由集合中。路由名称必须是唯一的。参数名称：名称

也许这在 1.0.1 中不再需要了？它在 1.0 中运行良好。NuGet 的 readme.txt 中也提到我们需要 MapHubs 命令。

> System.ArgumentException 未被用户代码处理 Message=名为“signalr.hubs”的路由已在路由集合中。路由名称必须是唯一的。参数名称：name Source=System.Web
> ParamName=name StackTrace：在 System.Web.Routing.RouteCollectionExtensions.Add[T]（RouteCollection 路由，字符串名称，T 项）在 System.Web 的 System.Web.Routing.RouteCollection.Add（字符串名称，RouteBase 项）。 System.Web.Routing.SignalRRouteExtensions.MapHubs(RouteCollection routes, String name, String path, HubConfiguration configuration) at System.Web.Routing 的 Routing.RouteCollectionExtensions.MapOwinPath(RouteCollection routes, String name, String pathBase, Action`1 startup)。在 System.Web.Routing.SignalRRouteExtensions.MapHubs(RouteCollection routes, HubConfiguration configuration) 在 System.Web.Routing.SignalRRouteExtensions 的 SignalRRouteExtensions.MapHubs(RouteCollection routes, String path, HubConfiguration configuration)。MapHubs(RouteCollection routes) at SignalrServer.Global.Application_Start(Object sender, EventArgs e) in C:\RC\Code\Signalr\SignalrServer\SignalrServer\Global.asax.cs:line 18 InnerException:

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:43:35.670

你需要它。看起来你在你的应用程序中调用了两次，不要那样做。如果你没有明确地调用它两次，那么你有一个旧版本的信号器，它曾经为你在你的 bin 文件夹中的某个地方调用它。全部删除，它应该可以工作。

# javascript - 定义 jQuery 函数时的问题

> ID：16166041
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:17.173
> 
> 标签：javascript, jquery, function

尝试像这样定义几个函数：

```
user = (function() {
    var friends_list = (function() {
        $.get('/ajax/user/friends_list', function(data) {
                  ...... 
```

所以我可以稍后在需要时打电话给他们，`user.friends_list()`但现在，我唯一得到的是以下错误：

```
TypeError: Object function () {
 var friends_list = (function() {
 $.get(.... 
```

就是不知道去哪里找，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:43:34.677

您需要将用户创建为对象，在您的情况下`friends_list`，它是一个闭包方法，它将在函数外部可用

```
user = {
    friends_list : function(){
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:45:13.880

制作用户对象而不是功能

```
var user = {
  friends_list : function(){
     $.get('/ajax/user/friends_list', function(data) {
              ......
  }
 } 
```

并称之为..`user.friends_list()`

[在这里摆弄](http://jsfiddle.net/bipen/VHwxz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:47:04.740

你在这里使用了一个闭包，所以`friend_list`在`user`.

如果你想使用闭包来隐藏一些变量，最好的导出`friend_list`方法是：

```
(function(){
    var somePrivateVariable;

    window.user = {};
    window.user.friend_list = function() {
        // make use of somePrivateVariable...
    };
})(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T09:54:20.200

```
user = function() {
this.friends_list = function() {
    $.get('/ajax/user/friends_list', function(data) {
              ......
     });
 };
 return this;
}; 
```

以上也应该有效。参考[http://www.w3schools.com/js/js_objects.asp](http://www.w3schools.com/js/js_objects.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:50:54.557

你可以看看这个[链接](http://jsfiddle.net/r6Agz/)

这是代码：

```
var global = {};

global.sayHello = function (x){
    //do your code here
      console.log('Hello ' + x );  
};
global.sayHello('Kevin'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T09:55:30.280

```
user = new function(){
   var private_variable;
   function private_method(){}

   this.global_variable = '';
   this.global_method = function(){};
} 
```

# android - 如何按次数取消 TimerTask

> ID：16166043
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:22.247
> 
> 标签：android

我想在 appWidget 上显示简单的动画。

动画是由 2 位图制作的。

```
Resources r = getResources();
         Bitmap ani[] = {BitmapFactory.decodeResource(r, R.drawable.anime1),BitmapFactory.decodeResource(r, R.drawable.anime2)}; 
```

有柜台

```
int counter = 0; 
```

这是 TimerTask 中的运行方法。

```
 @Override
            public void run() {
                AppWidgetManager awm = AppWidgetManager.getInstance(getApplicationContext());
                ComponentName cn = new ComponentName(getApplicationContext(), sample.class);
                RemoteViews rv = new RemoteViews(getApplicationContext().getPackageName(), R.layout.mainlayout);
                rv.setImageViewBitmap(R.id.material, ani[counter]);
                awm.updateAppWidget(cn, rv);
counter++;

            } 
```

当我`timer.schedule`与他们一起执行时，我怎样才能停止这个计数器==2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:56:56.600

You should stop the timer inside the run of timertask after checking the condition.

```
 TimerTask timerTask=new TimerTask() {

    @Override
    public void run() {
        // TODO Auto-generated method stub
        if(counter==2){
        timer.cancel();
        }
    }
}; 
```

The timer should be like this.

```
Timer timer=new Timer();
timer.scheduleAtFixedRate(timerTask, when, period); 
```

Hope this will help you.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:47:09.520

我不确定你需要什么。如果计数器达到 2，我假设您需要取消。

```
 int count=0;
    _t = new Timer();
    _tv.setText(""); 
    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 

                      _tv.setText(""+_count);
                      if(_count==2)
                      {
                          _t.cancel();
                      }
                 }
                 });
            }
        }, 1000, 1000 ); 
```

您也可以使用处理程序。使用计时器任务将创建一个新线程。更新 ui 应该在 UI Thread 上完成。最好使用处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:00:50.687

不要使用 TimerTask，而是使用 Handler 来完成此类任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:54:44.093

```
if(counter == 2)
{
    timer.cancel();
} 
```

# linux - 重新打开内存映射区域的文件

> ID：16166045
> 
> 赞同：4
> 
> 时间：2013-04-23T09:42:25.273
> 
> 标签：linux, windows, process, posix

在各种类似 POSIX 的操作系统中是否有一种方法可以确定哪个文件使用 映射到内存区域`mmap`？Linux`/proc/self/maps`不仅包含文件名，还包含设备和 inode 编号。这可以用来确定重新打开的文件是否与映射的文件相同，即使原始文件已被取消链接和替换。BSD 或 OS X 是否有类似的机制？

有没有办法在 Windows 中做到这一点，有一个区域的地址？鉴于其文件锁定语义，Windows 不存在在使用期间替换文件的问题。

# asp.net - mvc 错误，我在加载我网站的 site.master 页面时收到此错误

> ID：16166047
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:37.940
> 
> 标签：asp.net

`site.master`加载我的网站页面时出现以下错误

错误：

`Could not load file or assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. C:\TravelRequest_old\App_Themes\Aqua\MVCxPivotGrid.skin`

我已经上传了**syetem.web.mvc 版本 3**的新**dll**文件

 **`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3`并添加了来自解决方案资源管理器的参考。然后我收到以下错误

错误 ：

```
Could not load file or assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. 
Strong name signature could not be verified.  The assembly may have been tampered with, or it was delay signed but not fully signed with the correct private key. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:54:47.710

您是否在 Web.Config 中声明了此程序集：

```
<system.web>
    <compilation targetFramework="4.0">
        <assemblies>
            <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </assemblies>
    </compilation>
</system.web> 
```**

# matlab - 如果条件为假，如何返回 NaN 或空矩阵

> ID：16166049
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:42:45.253
> 
> 标签：matlab

我有一个基于以下功能的问题。如果条件为假，如何返回 NaN 或空矩阵。

下面的函数实际上检查 Anchor ID 和 Source ID 是否存在，如果存在这样的组合，它会在循环内部进一步检查 Anchor Channel 和 Source Channel 是否存在，如果存在，那么它将计算“y”并继续。但是，如果在这种情况下不存在 Anchor Channel 和 source Channel 怎么办？还要考虑如果 Anchor ID 和 source ID 不存在怎么办！！！如果它不存在，那么我希望它返回 NaN 或简单地为零。

如何根据我的要求修改此功能？

```
function [rssi_dBm1]= sampletrue(BlinkSetList,AnchorID,SourceID)

for i=1:length(BlinkSetList)
    S=cell2mat(BlinkSetList(i));                                   
    for j=1:length(S)
        if S(j).AnchorID==AnchorID && S(j).SourceID==SourceID       
            if S(j).AnchorChan==0 && S(j).SourceChan==0             
                y=S(j).agc;                                             
                rssi_dB1(i)= -(33+y*(89-33)/(29-1));
            else
                rssi_dB1(i)=NaN;              
            end
        end
    end
end

rssi_dB1(rssi_dB1==0)=[];
rssi_dBm1=sum(rssi_dB1(:))/length(rssi_dB1);
disp([sprintf('The rssi value  with A-Chan 0 and S-Chan 0 is %0.0f',rssi_dBm1)]); 
```

注意：这只是其中的一部分条件，锚频道和源频道还有另外三种组合来评估。

如果问题仍然不清楚，请发表您的疑问，我会尝试更准确地解释它。

非常感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:46:31.357

返回 Nan 的函数示例

```
function ret = retNan( value )
if value == true
   ret = 1;
else
   ret = NaN;  % set returned value to Nan
end 
```

返回空矩阵的函数

```
function ret = retEmpty( value )
if value == true
   ret = 1;
else
   ret = [];  % set returned value to an empty matrix
end 
```

**编辑：**
底线，无论变量的值`ret` （或者在你的情况下，`rssi_dBm1`）在函数的末尾 - 这个值都会被返回。因此，如果`ret`为空或`NaN`该函数仅返回一个空/`NaN`值。
您可以`rssi_dBm1`在函数的开头设置为空矩阵，并且仅在满足条件时才更改它。在这种情况下，如果所有条件都失败，该函数将返回默认值 - 一个空矩阵。

PS,
1\. Matlab 中最好[不要使用`i`and`j`作为变量名](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)。
2.您可以使用`mean`代替`sum()/length()`。
3.代替`disp( sprintf(...) )`你可以使用`fprintf(1, ... )`

# c++ - 仅在重载 >> 运算符 istream 时获取字符串：

> ID：16166051
> 
> 赞同：1
> 
> 时间：2013-04-23T09:42:48.540
> 
> 标签：c++, input, operators

我有多项式课程。我还有一种方法可以将字符串转换为多项式。现在我尝试为输入运算符实现此方法：

```
istream& operator>> (istream &is, Poly& pol)
{
    //the string that we use:
    string str;

    //the new input override the old:
    pol.emptyPoly();

    //getting a string from user and put it into str:
   //????????????????????? 

   // convert the string to polynomial
   pol.sToPol(str);

   return is;
} 
```

我需要输入什么//???????? 从用户那里获取字符串并将其放入 str 中？

那我什么时候做：

```
Poly p1;
cin>>p1; 
```

用户将输入字符串，它将在我的方法中转换为多项式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:45:54.417

```
is >> str; 
```

如果字符串没有空格

```
std::getline(is, str); 
```

如果字符串中有空格。

# svn - 在 SVN 中恢复部分提交

> ID：16166052
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:49.307
> 
> 标签：svn, tortoisesvn, tortoisemerge

我已将修订版 1、2、3 从分支 A 合并到分支 B，并在一次提交中提交了相同的内容。现在，我只需要从分支 B 恢复版本 2。

很难恢复此提交并重做合并，因为在此之后已经进行了很多提交。

除了手动比较和还原更改之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:05:34.643

我将 TortoiseSVN 用于此类工作。转到“显示日志”，右键单击要还原的提交，然后单击“还原此修订版的更改”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:48:42.000

从 Branch A 恢复修订 2 并将其合并到 Branch B 。

# wordpress - 在 Wordpress 中使用变量调用帖子内容

> ID：16166053
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:53.083
> 
> 标签：wordpress

当你在 worpdress 中时，你可以像下面这样调用一个帖子的标题：

```
<?php the_title(); ?> 
```

你怎么称呼它的内容？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:46:06.183

通过调用`the_content`. 法典中的更多信息：http: [//codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

# java - 从死信队列中恢复

> ID：16166054
> 
> 赞同：0
> 
> 时间：2013-04-23T09:42:57.643
> 
> 标签：java, jakarta-ee, jms, activemq, dead-letter

我一直收到来自 Queue1 的所有 JMS 消息并尝试处理它。
如果我尝试处理 5 次并回滚 5 次，我希望 ActiveMQ 将消息放入不同的队列一段时间（例如 5 分钟）。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:52:13.977

您可以向消息添加自定义属性 - 例如 RESUBMIT_TIMES，并将其递增直到达到 5。阅读：[JMS](http://docs.oracle.com/javaee/1.3/api/javax/jms/Message.html#setIntProperty%28java.lang.String,%20int%29)

如果达到 5 ，则将其移至*5minutesqueue*，方法是在那里设置另一个具有当前时间戳的属性。例如：

```
 message.setStringProperty("TimeOfDispatch", LocalDate.now().toString("yyyy-MM-dd hh:MM:ss")); 
```

*在5minutesqueue*上有另一个消费者检查是否已经过了 5 分钟（通过检查当前时间和标题中的时间）

# sql - JSTL：无法填充 where 子句参数值

> ID：16166055
> 
> 赞同：0
> 
> 时间：2013-04-23T09:43:01.967
> 
> 标签：sql, jstl

```
<script type="text/javascript">
function setpid()
{
    var s1val=document.getElementById('s1').value;
    document.getElementById('t1').value=s1val;
    var para=document.getElementById('t1').value;
    if(para)
    {
          <sql:query var="prod1_query">
        SELECT DISTINCT PROD_ID FROM  "CH3TAN"."PRODUCT" WHERE CUST_ID=?
        <sql:param value="${param.para}"/> // here is the problem
        </sql:query>
    }
}
</script> 
```

我的问题是在 s1 选择中选择后将填充 s2 选择标签。

但我无法将`param`值设置为 where 子句。 `var para`正在获得价值。

# java - 关于调用垃圾收集时保存当前状态

> ID：16166056
> 
> 赞同：0
> 
> 时间：2013-04-23T09:43:06.017
> 
> 标签：java, android

我已经在这部分进行了研发，但无法找到这个问题的答案

如果后台Activity是android系统的GC，如何在GC真正发生之前保存当前状态？

问候 Inder Bagga

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:50:19.207

由于 Java GC 在运行之前或之后不提供任何回调机制或任何挂钩，因此不可能在 GC 之前执行某些活动。

虽然说出于监控目的，您可以尝试在固定时间间隔上捕获当前状态，但要确定此时间间隔，您可能需要验证应用程序 GC 是如何发生的：

```
jstat -gcutil -t -h5 <pid> 500 5 
```

这将为您提供如下输出：

```
Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT

         3995.4   0.00   0.00   5.15   0.26  56.95      6    0.019     2    0.057    0.076

         4000.4   0.00   0.00   5.15   0.26  56.95      6    0.019     2    0.057    0.076 
```

其中 YGCT 是以毫秒为单位的次要循环时间，这将大致了解您的应用程序 GC 统计信息，即次要循环每 19 秒发生一次，基于此，您可以在想要保存当前状态时进行调整

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:55:50.340

如果您的应用程序中的任何内容正在被垃圾收集，那么它将已经通过`onStop()`and`onDestroy()`方法。在它被 GCd 之前*没有*办法保存它

如果您想存储状态，最好在其中之一中进行 - 尽管绝对最安全的地方是`onPause()`，因为它们都是可终止的进程`onStop()`，`onDestroy()`这意味着这些方法可能无法完全执行 - 请参阅有关[Activity 生命周期的 Android 文档](http://developer.android.com/reference/android/app/Activity.html)

# html - 标题不会停留在最奇怪的故障上

> ID：16166061
> 
> 赞同：0
> 
> 时间：2013-04-23T09:43:15.583
> 
> 标签：html, css, header

当浏览器尺寸变小时，我需要关于标题不在正确位置的帮助

[http://eerlijkbo.nl/](http://eerlijkmbo.nl/)

CSS：

```
#header {
    width:100%;
    max-width:420px;
    height:160px;
    overflow:hidden;
    margin:0 auto;
    -webkit-transition:all 0.8s ease;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:46:52.703

您可以删除最大宽度以使其不流动。然后将它插入到像#headerContainer 这样的div中，并使其宽度：420px;

# java - 在 Libgdx 中，如何获取图像旋转时的 x,y 坐标？

> ID：16166062
> 
> 赞同：1
> 
> 时间：2013-04-23T09:43:23.880
> 
> 标签：java, android, libgdx

我使用这种方法在 libgdx 中旋转了一个图像，

**SpriteBatch.draw(TextureRegion region, float x, float y, float originX, float originY, float width, float height, float scaleX, float scaleY, float rotation)**

但我不知道如何获得旋转图像的坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:10:08.900

[`Sprite`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html)您可以使用一个（或您自己的跟踪其当前位置的对象），而不是在绘制时旋转纹理。

该`draw`调用不存储任何旋转结果，它只是在复制到屏幕时旋转纹理。该类`Sprite`将跟踪位置和旋转，以便您可以查询它。（你应该使用`Sprite`'`draw`方法来绘制它。）

这`Sprite`还将为您提供一个轴对齐的边界框。如果您想要纹理旋转角的精确位置，则需要`getVerticies()`从位置和旋转中提取或自行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:11:58.353

我不明白这个问题。我读了几次，但我什至没有得到你想知道的核心。如果您使用 spriteBatch.draw() 绘制图像，则绘制的图像将放置在第二个和第三个参数的坐标上，并围绕相对原点进行旋转/缩放。

如果您想知道图像在屏幕上绘制的位置，您应该考虑使用 camera.project(Vector3); 使用 3 维向量，其中 x,y 是图像的坐标，z = 0；向量将乘以相机的矩阵，因此 x,y 将成为屏幕坐标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:15:28.347

或者更好的是，您应该在绘制之前旋转图像。如果你这样做，你可以随时从你的精灵/图像对象获得旋转。

# .net - 如何从 ActionExecutingContext 中获取 ActionResult？

> ID：16166075
> 
> 赞同：1
> 
> 时间：2013-04-23T09:43:53.147
> 
> 标签：.net, redirect, asp.net-mvc-4, action-filter, actionresult

我正在寻找导致[`OnActionExecuting()`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onactionexecuting%28v=vs.108%29.aspx)被覆盖的动作[`ActionFilterAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)。想法是将其保存在会话中，以便用户可以在输入临时“更改密码”页面后重定向到他们想要的页面。

我目前的尝试是：

```
public override void OnActionExecuting(ActionExecutingContext actionExecutingContext)
{
    // ...
    ActionResult originatingActionResult = new RedirectToRouteResult(
        new RouteValueDictionary
        {
            { "controller", actionExecutingContext.ActionDescriptor.ControllerDescriptor.ControllerName },
            { "action", actionExecutingContext.ActionDescriptor.ActionName }
        });
    // ... 
```

但这对于正在做的事情来说似乎相当复杂——有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:39:51.633

原来它可以简化为：

```
ActionResult originatingActionResult = new RedirectToRouteResult(
        new RouteValueDictionary(filterContext.RouteData.Values)); 
```

然而...

该项目使用 T4MVC 并且`RedirectToAction`无法使用，因为它在控制器上被覆盖并期望`GetT4MVCResult()`出现在`ActionResult`.

所以我最终这样做了：

```
RouteValueDictionary originatingRouteValues = new RouteValueDictionary(
    actionExecutingContext.RouteData.Values);

// ... followed by ...

return this.RedirectToRoute(routeValues); 
```

# android - 录制后应用程序崩溃

> ID：16166077
> 
> 赞同：0
> 
> 时间：2013-04-23T09:44:06.087
> 
> 标签：android, audio, wav

```
mRecorder.prepare();
mRecorder.start();
Thread auto_stop=new Thread(new Runnable()
{

@Override
public void run() {
    try {
        Thread.sleep(30000);
        if(WavAudioRecorder.flag)
        {
            mRecorder.stop();
            mRecorder.reset();
            btnControl.setText("Start");
            return ;

        }
    } catch (InterruptedException e) {

            //e.printStackTrace();
    }

}

});
auto_stop.start(); 
```

我正在尝试制作一个记录 30 秒并停止的记录器应用程序。我正在使用上述代码来停止记录器。记录 30 秒后应用程序崩溃。如何解决崩溃部分？我用于启动和停止的代码在此[链接](https://github.com/roman10/roman10-android-tutorial/tree/master/AndroidWaveRecorder)中。有没有其他方法可以在 30 秒后自动停止录音机

```
04-23 09:53:34.955: E/AndroidRuntime(4278): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4746)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:823)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.View.requestLayout(View.java:15468)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.View.requestLayout(View.java:15468)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.View.requestLayout(View.java:15468)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.View.requestLayout(View.java:15468)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.view.View.requestLayout(View.java:15468)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.widget.TextView.checkForRelayout(TextView.java:6313)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.widget.TextView.setText(TextView.java:3567)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.widget.TextView.setText(TextView.java:3425)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at android.widget.TextView.setText(TextView.java:3400)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at com.example.androidwaverecorder.MainActivity$1$1.run(MainActivity.java:53)
04-23 09:53:34.955: E/AndroidRuntime(4278):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:59:20.410

您不能`btnControl.setText("Start");`从另一个线程使用。我建议您将[ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于异步工作（例如您的录制）并在`onPreExecute`和`onPostExecute`方法中显示数据。

# grails - 模型对象的 GSP 页面中的 Groovy/Grails Tools Suite (GGTS) 代码辅助

> ID：16166078
> 
> 赞同：1
> 
> 时间：2013-04-23T09:44:11.770
> 
> 标签：grails, gsp, sts-springsourcetoolsuite, code-assist

我是 Grails 的新手，仍在学习。

我有以下模型代码：

```
class Book {

    static constraints = {

    }

    String title
    String author
} 
```

和控制器：

```
class KillController {

    def index() { render "kill world"  }

    def view() {
        def book = new Book( author: "Mike", title: "nuff sed")
        [ model: book ]
    }
} 
```

对于`view.gsp`，我有以下内容：

```
<html>
    <body>
        Author: ${ model.author }<br />
        Title : ${ model.title }
    </body>
</html> 
```

一切正常，并且产生了正确的输出。但是，在 GSP 编辑器中，当我输入 时`${ model. }`，我没有从 code-assist 获得任何建议。键入点后按 ctrl+space 无济于事。

不过，在里面按 Ctrl+space 可以`${ }`工作，它可以正确识别`model`为一个`Book`对象。

GSP 编辑器中尚不支持模型的代码辅助吗？谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:22:35.137

这是一个错误。它应该可以工作，并且在许多其他情况下也可以。当我尝试它时，我确实看到正在引发异常：

```
org.eclipse.core.runtime.OperationCanceledException
at org.codehaus.groovy.eclipse.codeassist.processors.GroovyProposalTypeSearchRequestor.checkCancel(GroovyProposalTypeSearchRequestor.java:356)
at org.codehaus.groovy.eclipse.codeassist.processors.GroovyProposalTypeSearchRequestor.processAcceptedPackages(GroovyProposalTypeSearchRequestor.java:618)
at org.codehaus.groovy.eclipse.codeassist.processors.PackageCompletionProcessor.generateProposals(PackageCompletionProcessor.java:56)
at org.codehaus.groovy.eclipse.codeassist.requestor.GroovyCompletionProposalComputer.computeCompletionProposals(GroovyCompletionProposalComputer.java:162)
at org.grails.ide.eclipse.editor.gsp.adapter.CodeCompletionDelegate.codeComplete(CodeCompletionDelegate.java:71)
at org.codehaus.jdt.groovy.model.GroovyCompilationUnit.codeComplete(GroovyCompilationUnit.java:598)
at org.eclipse.jdt.internal.core.CompilationUnit.codeComplete(CompilationUnit.java:359)
at org.eclipse.jst.jsp.ui.internal.contentassist.JSPJavaCompletionProposalComputer.computeJavaCompletionProposals(JSPJavaCompletionProposalComputer.java:237)
at org.eclipse.jst.jsp.ui.internal.contentassist.JSPJavaCompletionProposalComputer.computeCompletionProposals(JSPJavaCompletionProposalComputer.java:114)
at org.eclipse.wst.sse.ui.internal.contentassist.CompletionProposalComputerDescriptor.computeCompletionProposals(CompletionProposalComputerDescriptor.java:284)
at org.eclipse.wst.sse.ui.internal.contentassist.CompletionProposalCategory.computeCompletionProposals(CompletionProposalCategory.java:290)
at org.eclipse.wst.sse.ui.contentassist.StructuredContentAssistProcessor.collectProposals(StructuredContentAssistProcessor.java:475)
at org.eclipse.wst.sse.ui.contentassist.StructuredContentAssistProcessor.computeCompletionProposals(StructuredContentAssistProcessor.java:254)
at org.eclipse.wst.sse.ui.internal.contentassist.CompoundContentAssistProcessor.computeCompletionProposals(CompoundContentAssistProcessor.java:127)
at org.eclipse.jface.text.contentassist.ContentAssistant.computeCompletionProposals(ContentAssistant.java:1839)
at org.eclipse.jface.text.contentassist.CompletionProposalPopup.computeProposals(CompletionProposalPopup.java:566)
at org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$16(CompletionProposalPopup.java:563)
at org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:498)
... 
```

我得看看这里发生了什么。

* * *

更新：

提出了这个问题：[https ://issuetracker.springsource.com/browse/STS-3337](https://issuetracker.springsource.com/browse/STS-3337)

发现问题并推送修复。将在下一个快照版本中可用。

# c# - 将“00”和“0”替换为 inf 文件部分中的“+”将新行附加到新 INF

> ID：16166084
> 
> 赞同：1
> 
> 时间：2013-04-23T09:44:41.793
> 
> 标签：c#

嗨，我正在学习 C#，我有一些 .inf 文件（请参见下面的示例），我需要能够更改 [Destinations] 部分，其中一行以“00”或“0”开头并带有“+”。我曾尝试使用 Regex.Replace，但它会替换文件中包含“00”的所有条目。在这一点上，将两个条目都保留在文件中会很好但不是必需的。IE

```
[Destinations]
0="National",N,N
+="National",N,N
0024195="Gabon Mobiles",I,IMT
+24195="Gabon Mobiles",I,IMT 
```

但现在只是更换将是一个巨大的帮助！再次感谢您对此提供的任何帮助。如果您有更多信息，请告诉我。

```
[Carrier]
Name=BT Customer Commitment
ChargeStructure=1 Year 50K

[ChargeBands]
Loc=Local Rate Calls
Nat=National Rate Calls
dq1=Directory Enquiries
dq2=Directory Enquiries
dq3=Directory Enquiries
dq4=Directory Enquiries
dq5=Directory Enquiries

[ChargeRates]
Loc,E="Economy",0,1000,60000,990,2800,Nearest,100
Loc,S="Standard",0,1000,60000,2450,2800,Nearest,100
Loc,W="Weekend",0,1000,60000,690,2800,Nearest,100
Nat,E="Economy",0,1000,60000,3190,2800,Nearest,100
Nat,S="Standard",0,1000,60000,6390,2800,Nearest,100

[DailyRates]
Loc,0=0000:E,0800:S,1800:E
Loc,1=0000:E,0800:S,1800:E
Loc,2=0000:E,0800:S,1800:E
Loc,3=0000:E,0800:S,1800:E
Loc,4=0000:E,0800:S,1800:E

[Destinations]
0="National",N,N
00="International",I,IV
0024195="Gabon Mobiles",I,IMT
0024197="Gabon Mobiles",I,IMT
00242="Congo",I,IS
090610="Premium Rate",M,n
0906100="C & W Premium Rate",M,n 
```

这是我对 C# 代码所做的。

```
private void button3_Click(object sender, EventArgs e)
{
   File.WriteAllText(txtnewtariff.Text, Regex.Replace(File.ReadAllText(txtcurrent.Text), "[00]", "+"));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:41:51.857

更改您的正则表达式：

```
private void button3_Click(object sender, EventArgs e)
{
   File.WriteAllText(txtnewtariff.Text, Regex.Replace(File.ReadAllText(txtcurrent.Text), "^(0|00){1,2}", "+", RegexOptions.Multiline));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:42:30.247

我认为这作为一个单一的正则表达式可能会很棘手。

我认为您最好只将替换应用到您要修改的部分：

```
var lines = File.ReadAllLines("path").ToList();
var regex = new Regex(@"^[0]{1,2}");
var startFrom = lines.IndexOf("[Destinations]");

//Start replacing from the index of "[Destinations]"
for (int i = startFrom; i < lines.Count; i++)
{
    //Assuming the ini section ends at an empty line - stop replacing
    if(lines[i].Trim() == string.Empty)
        break;

    lines[i] = regex.Replace(lines[i], "+");
}

File.WriteAllLines("path", lines); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:15:15.243

我现在可以工作了，谢谢。

```
private void button3_Click(object sender, EventArgs e)
{
    //File.WriteAllText(txtnewtariff.Text, Regex.Replace(File.ReadAllText(txtcurrent.Text), "^(0|00){1,2}", "+", RegexOptions.Multiline));

    if (txtcurrent.Text.Trim().Length == 0)
    {
        MessageBox.Show("No Tariff Selected","Error On Conversion");
        return;
    }

    if (txtnewtariff.Text.Trim().Length == 0)
    {
        MessageBox.Show("Please Select a New Tariff File", "Error On Conversion");
        return;
    }

    if (txtctrycode.Text.Trim().Length == 0)
    {
        MessageBox.Show("Please enter an E164 Country Code", "Error On Conversion");
        return;
    }

    var lines = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex = new Regex(@"^[00]{2}");
    var startFrom = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines[i].Trim() == string.Empty)
            break;

        lines[i] = regex.Replace(lines[i], "+");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines1 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex1 = new Regex(@"^[0]{1}");
    var startFrom1 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom1; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines1[i].Trim() == string.Empty)
            break;

        lines[i] = regex1.Replace(lines[i], "+" + txtctrycode.Text);
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines2 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex2 = new Regex(@"^[1]");
    var startFrom2 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom2; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines2[i].Trim() == string.Empty)
            break;

        lines[i] = regex2.Replace(lines[i], "+" + txtctrycode.Text + "1");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);
    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines3 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex3 = new Regex(@"^[2]");
    var startFrom3 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom3; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines3[i].Trim() == string.Empty)
            break;

        lines[i] = regex3.Replace(lines[i], "+" + txtctrycode.Text + "2");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);
    var lines4 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex4 = new Regex(@"^[3]");
    var startFrom4 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom4; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines4[i].Trim() == string.Empty)
            break;

        lines[i] = regex4.Replace(lines[i], "+" + txtctrycode.Text + "3");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines5 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex5 = new Regex(@"^[4]");
    var startFrom5 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom5; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines5[i].Trim() == string.Empty)
            break;

        lines[i] = regex5.Replace(lines[i], "+" + txtctrycode.Text + "4");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines6 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex6 = new Regex(@"^[5]");
    var startFrom6 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom6; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines6[i].Trim() == string.Empty)
            break;

        lines[i] = regex6.Replace(lines[i], "+" + txtctrycode.Text + "5");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines7 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex7 = new Regex(@"^[6]");
    var startFrom7 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom7; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines7[i].Trim() == string.Empty)
            break;

        lines[i] = regex7.Replace(lines[i], "+" + txtctrycode.Text + "6");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines8 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex8 = new Regex(@"^[7]");
    var startFrom8 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom8; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines8[i].Trim() == string.Empty)
            break;

        lines[i] = regex8.Replace(lines[i], "+" + txtctrycode.Text + "7");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines9 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex9 = new Regex(@"^[8]");
    var startFrom9 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom9; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines9[i].Trim() == string.Empty)
            break;

        lines[i] = regex9.Replace(lines[i], "+" + txtctrycode.Text + "8");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    var lines10 = File.ReadAllLines(txtcurrent.Text).ToList();
    var regex10 = new Regex(@"^[9]");
    var startFrom10 = lines.IndexOf("[Destinations]");

    //Start replacing from the index of "[Destinations]"
    for (int i = startFrom10; i < lines.Count; i++)
    {
        //Assuming the ini section ends at an empty line - stop replacing
        if (lines10[i].Trim() == string.Empty)
            break;

        lines[i] = regex10.Replace(lines[i], "+" + txtctrycode.Text + "9");
    }

    File.WriteAllLines(txtnewtariff.Text, lines);

    MessageBox.Show(txtnewtariff.Text,
"Conversion Complete"); 
```

# c# - Facebook 登录/注销，现代方式

> ID：16166087
> 
> 赞同：0
> 
> 时间：2013-04-23T09:44:45.243
> 
> 标签：c#, facebook, windows-phone-7, mvvm-light

我发现了大量的线程和解决方案（比如[这里](https://stackoverflow.com/questions/11558603/logging-out-from-facebook-using-facebook-c-sharp-sdk-in-wp7)、[这里](https://stackoverflow.com/questions/8690991/facebook-logout-api-why-next)、[这里](http://cloudstore.blogspot.fi/2010/09/clearing-cookies-on-windows-phone-7-or.html)或[这里](http://dotnetcatch.wordpress.com/2011/08/26/wp7-facebook-logout-issues/)）。但他们要么都是在 2010-2011-2012 年初，要么有“这种方式不再起作用”之类的评论，或者两者兼而有之。

那么，Windows Phone 登录/注销 facebook 的现代方式是什么（最好没有额外的依赖项）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:55:14.480

Microsoft 的[FacebookSDK.Net](http://facebooksdk.net/docs/phone/)正是您所需要的。它是最新的。

他们有一个很好的[教程](http://facebooksdk.net/docs/phone/tutorial/)。在 GitHub 上，您也可以[找到示例](https://github.com/facebook-csharp-sdk/facebook-windows-phone-sample)。

[这里](https://github.com/facebook-csharp-sdk/facebook-winclient-sdk/blob/master/Source/Facebook.Client/FacebookSessionClient.cs) 有`FacebookSessionClient`一个方法：

```
 /// Log a user out of Facebook.
        /// </summary>

   public void Logout()
    {
        try
        {
            FacebookSessionCacheProvider.Current.DeleteSessionData();
        }
        finally
        {
            this.CurrentSession = null;
        }
    } 
```

没有访问令牌 - 您无法登录 Facebook。我认为您可以将其用作注销操作。

# java - 访问 JFrame 组件

> ID：16166095
> 
> 赞同：0
> 
> 时间：2013-04-23T09:45:02.303
> 
> 标签：java, swing, jframe, jfreechart

如何访问`XYSeries`并`XYPlot`放置在`JFrame`？当然，我可以使用变量名`series`and `plot`，但我的问题是指访问这些组件的函数式方式，即`f.getContentPane()`……这在函数返回时很有用`JFrame`。

```
JFrame f = new JFrame(title);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.setLayout(new BorderLayout(0, 5));
XYSeries series = new XYSeries("");
XYDataset data = createDataset(series,0,indf,oldpop);
JFreeChart chart = ChartFactory.createScatterPlot(title, xtitle, ytitle, data, PlotOrientation.VERTICAL, false, true, false);
XYPlot plot = chart.getXYPlot();
XYLineAndShapeRenderer renderer =
                (XYLineAndShapeRenderer) plot.getRenderer();
renderer.setBaseShapesVisible(true);          plot.getDomainAxis().setStandardTickUnits(NumberAxis.createIntegerTickUnits());
ChartPanel chartPanel = new ChartPanel(chart);
f.add(chartPanel, BorderLayout.CENTER);
chartPanel.setMouseWheelEnabled(true);
chartPanel.setHorizontalAxisTrace(true);
chartPanel.setVerticalAxisTrace(true);
JPanel panel = new JPanel(new FlowLayout(FlowLayout.RIGHT));
f.add(panel, BorderLayout.SOUTH); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:27:00.123

`ChartPanel`是`JComponent`哪个呈现`JFreeChart`；两者`XYSeries`和`XYPlot`都是组件，这些对象由`JFreeChart`. 由于它们不是组件，因此您无法通过遍历组件层次结构来访问它们，您必须从`ChartPanel`和获取它们`JFreeChart`。

`ChartPanel`在组件层次结构中查找，`getChart()`用于获取`JFreeChart`对象，然后从中获取您想要的对象，就像您在上面的代码中所做的那样：

```
XYPlot plot = chart.getXYPlot(); 
```

# iphone - UITapGestureRecognizer 未在以编程方式创建的 UIImageView 上触发

> ID：16166096
> 
> 赞同：3
> 
> 时间：2013-04-23T09:45:02.760
> 
> 标签：iphone, ios, uiimageview, xcode4.5, uitapgesturerecognizer

我正在使用 XCode 4.5.1 。

我`<UIGestureRecognizerDelegate>`在 .h 文件和 .m 文件的开头添加了

```
@interface FirstViewController ()

@property (nonatomic, strong) UIImageView *img1;

@end 
```

然后在，以编程方式`viewDidLoad`创建`UIImageView`

```
self.img1 = [[UIImageView alloc] initWithFrame:CGRectMake(50, -30, 44, 44)];
[self.img1 setImage:[UIImage imageNamed:@"image1.png"]];
[self.img1 setAlpha:0.8];
[self.img1 setHidden:NO];
[self.img1 setUserInteractionEnabled:YES];
[self.img1 setTag:901]; 
```

接着

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(guessTapObject:)];
tap.numberOfTapsRequired = 1;
tap.numberOfTouchesRequired = 1;
tap.delegate = self;

[self.img1 addGestureRecognizer:tap];

[self.view addSubview:self.img1];
[self.view bringSubviewToFront:self.img1]; 
```

最后

```
- (void)guessTapObject:(UITapGestureRecognizer *) gesture
{
    // guessing the image
    UIImageView *tapImageView = (UIImageView*) gesture.view;
    NSLog(@"Gesture Tag: %d", tapImageView.tag);
} 
```

我有 4 个不同的图像，并如上所述以编程方式创建它们。并应用动画将它们从上到下移动。

我希望当用户点击图像时，它应该动画并消失（我知道那个代码）。但是代码没有触发点击事件。我将断点放在`guessTapObject`函数的开头，但永远不要去那里。

在`UITapGestureRecognizer`声明时，调试显示`guessTapObject`附加到识别器以执行点击操作。

请帮忙为什么点击事件没有触发它的选择器方法？？？

提前感谢您的帮助。

* * *

编辑：我还尝试使用 for 循环为每个图像视图分别设置手势识别器

```
for (UIView * view in self.view.subviews) {
    if (view.tag > 900){
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(guessTapObject:)];
        tap.numberOfTapsRequired = 1;
        tap.numberOfTouchesRequired = 1;
    //    tap.delegate = self;
        [view addGestureRecognizer:tap];
        NSLog(@"tapView: %@", tap.view);
        NSLog(@"tap: %i", tap.enabled);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-28T05:46:58.917

我遇到了类似的问题。确保 userInteraction 的 imageView 设置为 true 。

```
imageView.userInteractionEnabled = YES; 
```

它对我有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:10:48.790

**检查此**
将以下代码添加到您的视图控制器

*   **在 viewController.h 文件中**

    ```
    @property (nonatomic, strong) UIImageView *img1;
    @property (nonatomic, strong) UIImageView *img2;
    @property (nonatomic, strong) UIImageView *img3; 
    ```

*   **在 viewController.m 文件**
    里面的 viewDidLoad 方法

    ```
    // Init Image 1 
    self.img1 = [[UIImageView alloc] initWithFrame:CGRectMake(50, 30, 44, 44)];
    [self.img1 setImage:[UIImage imageNamed:@"image1_name.jpg"]];
    [self.img1 setAlpha:0.8];
    [self.img1 setHidden:NO];
    [self.img1 setUserInteractionEnabled:YES];
    [self.img1 setTag:901];

    // Init Image 2
    self.img2 = [[UIImageView alloc] initWithFrame:CGRectMake(100, 30, 44, 44)];
    [self.img2 setImage:[UIImage imageNamed:@"image2_name.jpg"]];
    [self.img2 setAlpha:0.8];
    [self.img2 setHidden:NO];
    [self.img2 setUserInteractionEnabled:YES];
    [self.img2 setTag:902];

    // Init Image 3
    self.img3 = [[UIImageView alloc] initWithFrame:CGRectMake(50, 130, 44, 44)];
    [self.img3 setImage:[UIImage imageNamed:@"image3_name.jpg"]];
    [self.img3 setAlpha:0.8];
    [self.img3 setHidden:NO];
    [self.img3 setUserInteractionEnabled:YES];
    [self.img3 setTag:903];

    // Add Images to view
    [self.view addSubview:self.img1];
    [self.view bringSubviewToFront:self.img1];

    [self.view addSubview:self.img2];
    [self.view bringSubviewToFront:self.img2];

    [self.view addSubview:self.img3];
    [self.view bringSubviewToFront:self.img3];

    // Set Tap Gesture to each image of view
    for (UIView * view in self.view.subviews) {
      if (view.tag > 900){
         UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
                                          initWithTarget:self 
                                          action:@selector(guessTapObject:)];
         tap.numberOfTapsRequired = 1;
         tap.numberOfTouchesRequired = 1;
         [view addGestureRecognizer:tap];
         NSLog(@"tapView: %@", tap.view);
         NSLog(@"tap: %i", tap.enabled);
      }
    } 
    ```

**确保在 for 循环之前添加图像（使用子视图数组添加 TapGesture）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:53:20.043

我通过在视图上应用手势来解决，而不是分别每个图像视图。

`[self.view addGestureRecognizer:tap];`

然后在处理程序/选择器`guessTapObject`函数中，我使用了这个

```
CGPoint tapLocation = [gesture locationInView:self.view]; // gives the tap coordinates
for (UIView * view in self.view.subviews) { // gives view by iterating on each subview
    CGRect dropRect = [[[view layer] presentationLayer] frame]; // specific way of getting the frame with respect to its layer

    if(CGRectContainsPoint(dropRect, tapLocation)){ // checks for tap in the boundaries of view frame
        if (view.tag > 900) // my specific view
             // done what i want to do with that specific one
             // as i removed it from my superview
        }
    }
} 
```

# python - 如何在python中引用类本身

> ID：16166099
> 
> 赞同：9
> 
> 时间：2013-04-23T09:45:09.480
> 
> 标签：python

我想在 python 中有这样的简单类常量：

```
class FooBarBaz:
    BAR = 123

    @staticmethod
    def getBar():
        return BAR # this would not work, of course

        return FooBarBaz.BAR # this would work but is "way too long" 
```

有没有更短的方法来从方法内部引用类本身，而不是当前实例？它不仅适用于静态方法，而且通常适用于`__class__`关键字或其他东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T10:10:20.460

您需要`@classmethod`而不是`@staticmethod`- 类方法将获得对该类的引用（方法将在其中获得`self`），因此您可以在其上查找属性。

```
class FooBarBaz:
    BAR = 123

    @classmethod
    def getBar(cls):
        return cls.BAR 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-23T10:10:38.620

实际上，`__class__`在python 3中有：

```
Python 3.2.3 (v3.2.3:3d0686d90f55, Apr 10 2012, 11:25:50) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> class A:
...     @staticmethod
...     def foo():
...         print(__class__)
... 
>>> A.foo()
<class '__main__.A'>
>>> 
```

请参阅[http://www.python.org/dev/peps/pep-3135](http://www.python.org/dev/peps/pep-3135)了解添加它的理由。

不知道如何在 py2 中实现相同的目标，我想[这是不可能的](https://www.google.com/search?q=python+static+method+get+class)。

# xml - 电子表格 XML 在 XSLT 中创建父/子层次结构

> ID：16166100
> 
> 赞同：2
> 
> 时间：2013-04-23T09:45:09.900
> 
> 标签：xml, xslt

我有以下电子表格 XML：

```
<Workbook>
    <Worksheet ss:Name="Sheet1">
        <Table>
            <Row>
                <Cell><Data ss:Type="String">Parent</Data></Cell>
                <Cell><Data ss:Type="String">Child</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">A</Data></Cell>
                <Cell><Data ss:Type="String">B</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">A</Data></Cell>
                <Cell><Data ss:Type="String">C</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">B</Data></Cell>
                <Cell><Data ss:Type="String">D</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">B</Data></Cell>
                <Cell><Data ss:Type="String">E</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">C</Data></Cell>
                <Cell><Data ss:Type="String">F</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">C</Data></Cell>
                <Cell><Data ss:Type="String">G</Data></Cell>
            </Row>
        </Table>
    </Worksheet>
</Workbook> 
```

我希望使用 Saxon XSLT 2.0 将其转换为以下格式：

```
<Something id="A">
    <Something id="B">
        <Something id="D"/>
        <Something id="E"/>
    </Something>
    <Something id="C">
        <Something id="F"/>
        <Something id="G"/>
    </Something>
</Something> 
```

有人可以帮忙吗？我相信答案在于递归**应用模板**（尽管我希望 for-each 可以实现相同的效果）。

非常感谢。

更新：作为对 Navin 的回应，我一直在尝试 XSLT，它看起来像下面这样，但我担心我在叫错树（也许在我的组开始？）：

```
<xsl:stylesheet 
    version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:o="urn:schemas-microsoft-com:office:office"
    xmlns:x="urn:schemas-microsoft-com:office:excel"
    xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:html="http://www.w3.org/TR/REC-html40"
    xpath-default-namespace="urn:schemas-microsoft-com:office:spreadsheet"
    exclude-result-prefixes="o x ss html"
    >   

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="Workbook/Worksheet[@ss:Name='Sheet1']/Table">      
        <xsl:variable name="row_header" select="count(Row/Cell[.='Parent']/preceding-sibling::Row)+1"/>
        <xsl:apply-templates select="Row[position() > $row_header]">
            <xsl:with-param name="row_header" select="$row_header"/>
        </xsl:apply-templates>  
    </xsl:template>

    <xsl:template match="Row">
        <xsl:param name="row_header"/>
        <xsl:variable name="ChildId" select="Cell[count(ancestor::*/Row[$row_header]/Cell[.='Child']/preceding-sibling::Cell)+1]"/>
        <xsl:variable name="ParentId" select="Cell[count(ancestor::*/Row[$row_header]/Cell[.='Parent']/preceding-sibling::Cell)+1]"/>
        <xsl:for-each-group select="*" group-starting-with="Row">
            <Something id="{$ChildId}">
                <xsl:apply-templates select="current-group()[position() &gt; 1]" mode="Child">
                    <xsl:with-param name="ChildId" select="$ChildId"/>
                </xsl:apply-templates>
            </Something>
        </xsl:for-each-group>
    </xsl:template> 

    <xsl:template match="*" mode="Child">
        <xsl:param name="ChildId"/>
            <Something id="{$ChildId}"/>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:15:39.147

可能有更好的 XSLT 2.0 方法，但这是在 XSLT 1.0 中的实现方式：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kChildren" match="Row" use="Cell[2]/Data"/>
  <xsl:key name="kParent" match="Row" use="Cell[1]/Data "/>

  <xsl:template match="/">
    <xsl:apply-templates 
             select="*/*/*/*[position() != 1]
                            [not(key('kChildren', Cell[1]/Data))]
                            [generate-id() = 
                             generate-id(key('kParent', Cell[1]/Data)[1])]">
      <xsl:with-param name="idCell" select="1" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="Row">
    <xsl:param name="idCell" select="2" />
    <Something id="{Cell[$idCell]/Data}">
      <xsl:apply-templates
        select="key('kParent', Cell[$idCell]/Data)
                      [generate-id() = 
                       generate-id(key('kChildren', Cell[2]/Data)[1])]" />
    </Something>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<Something id="A">
  <Something id="B">
    <Something id="D" />
    <Something id="E" />
  </Something>
  <Something id="C">
    <Something id="F" />
    <Something id="G" />
  </Something>
</Something> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T11:36:18.513

像下面的 xslt 会做。（仅使用 xlt 1.0 版进行了尝试，mamesppace 存在一些问题。）假设第一行是标题，第一个单元格是父级，第二个是子级，这并不灵活。

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ss="Sheet1"
                >
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <xsl:variable name ="parent">
            <xsl:value-of select="//Row[2]/Cell[1]/Data"/>
        </xsl:variable>
        <Something id="{$parent}">
            <xsl:apply-templates select="//Row[Cell[position()=1 and Data=$parent]]" />
        </Something>

    </xsl:template>

    <xsl:template match="Row">

        <xsl:variable name ="child">
            <xsl:value-of select="Cell[2]/Data"/>
        </xsl:variable>
        <Something id="{$child}">
            <xsl:apply-templates select="//Row[Cell[position()=1 and Data=$child]]" />
        </Something>
    </xsl:template>
</xsl:styles 
```

生成的输出是：

```
<?xml version="1.0"?>
<Something xmlns:ss="Sheet1" id="A">
  <Something id="B">
    <Something id="D"/>
    <Something id="E"/>
  </Something>
  <Something id="C">
    <Something id="F"/>
    <Something id="G"/>
  </Something>
</Something> 
```

# php - 针对特定列表项并通过 jquery 输入文本？

> ID：16166102
> 
> 赞同：0
> 
> 时间：2013-04-23T09:45:12.903
> 
> 标签：php, jquery

如何定位所有“3 级”和“4 级”链接并在为链接显示的文本前输入破折号？

例如，从下面的代码中，任何说“Level 3 Page 1”或“Level 4 Page 1”的东西现在都会说“- Level 3 Page 1”

这是由 Wordpress 生成的（所以我不能只在链接中输入破折号）：

```
<ul>
    <li class="top-level"><a href="#">Extra Curriculum</a></li>
    <li class="page_item page-item-42"><a href="#">Level 2 Page 1</a></li>
</ul>
<ul class='children'>
    <li class="page_item page-item-51">
        <a href="#">Level 3 Page 1</a>
        <ul class='children'>
            <li class="page_item page-item-56"><a href="#/">Level 4 Page 1</a></li>
            <li class="page_item page-item-57"><a href="#">Level 4 Page 2</a></li>
            <li class="page_item page-item-59"><a href="#">Level 4 Page 3</a></li>
        </ul>
    </li>
    <li class="page_item page-item-52"><a href="#">Level 3 Page 2</a></li>
    <li class="page_item page-item-54"><a href="#">Level 3 Page 3</a></li>
</ul>
<ul>
    <li class="page_item page-item-44"><a href="#">Level 2 Page 2</a></li>
    <li class="page_item page-item-47"><a href="#">Level 2 Page 3</a></li>
</ul> 
```

我猜这是jquery的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:50:06.407

```
$("a:contains(Level 3),a:contains(Level 4)").each(function() {
    $(this).text("- "+$(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:52:26.620

就像是

```
li.level3, li.level4
{
   background-position: left;
   background-image : "url(dash.jpeg)";
   background-repeat: no-repeat;
   padding-left:10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:53:24.687

希望这有帮助

```
$('ul .children a').each(function() {
$(this).text("- "+$(this).text());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:51:43.570

**jQuery代码：**

```
$('a:contains(Level 3), a:contains(Level 4)').prepend('-'); 
```

链接到：**[JSFIDDLE](http://jsfiddle.net/hjUxU/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:56:03.533

您可以使用`:before`伪元素：

```
.children > li:before {
  content: "-";
} 
```

# python - Python left() 等效？

> ID：16166109
> 
> 赞同：3
> 
> 时间：2013-04-23T09:45:26.980
> 
> 标签：python, django

我只是在学习 Python 和 Django。

我只想获取以下字符串“col”的结束值，结束值始终是一个数字，即 col1、col2 等

在其他语言中，我可以通过多种方式做到这一点......

```
left(value,3) - only leave the value after 3.
findreplace(value, 'col', '') - fine the string col replace with blank leaving nothing but the number I need. 
```

所以我的问题是， **在 Django (Python) 中我该如何做这些事情？** *（在视图中不是模板）*

Django 也很严格吗？我需要 int 值以使其成为一个数字吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T09:56:22.790

您正在寻找[切片](http://docs.python.org/2/tutorial/introduction.html)：

```
>>> s = "Hello World!"
>>> print s[2:] # From the second (third) letter, print the whole string
llo World!
>>> print s[2:5] # Print from the second (third) letter to the fifth string
llo
>>> print s[-2:] # Print from right to left
d!
>>> print s[::2] # Print every second letter
HloWrd 
```

所以对于你的例子：

```
>>> s = 'col555'
>>> print s[3:]
555 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:50:07.623

如果你知道它后面总是会`col`跟着一些数字：

```
>>> int('col1234'[3:])
1234 
```

# matlab - 导出和导入 MATLAB 映射结构

> ID：16166110
> 
> 赞同：2
> 
> 时间：2013-04-23T09:45:30.993
> 
> 标签：matlab, data-structures, map, export

我正在使用 containers.Map 函数来存储我的数据。

有没有一种简单的方法可以将整个结构导出到一个文件中，并能够在以后再次导入它。

一个结构可以是：

```
keys = {'six','seven','eight','nine'};
vals = {6,7,8,9};

Map = containers.Map(keys,vals); 
```

然后说我想导出这个结构并能够在以后导入（或在另一个代码中）。

谢谢，问候
拉斯穆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:07:14.277

使用`save`和`load`函数：[http](http://www.mathworks.com/help/matlab/matlab_env/save-load-and-delete-workspace-variables.html) ://www.mathworks.com/help/matlab/matlab_env/save-load-and-delete-workspace-variables.html ：

```
save('MyFileName', 'Map');
load('MyFileName'); 
```

# r - 让 R 识别 cut () 的变量对

> ID：16166111
> 
> 赞同：1
> 
> 时间：2013-04-23T09:45:34.123
> 
> 标签：r

我有以下数据框：

```
varnames<-c("ID", "a.1", "b.1", "c.1", "a.2", "b.2", "c.2")

a <-matrix (c(1,2,3,4, 5, 6, 7), 2,7)

colnames (a)<-varnames

df<-as.data.frame (a)

   ID  a.1  b.1  c.1  a.2  b.2  c.2
 1  1    3    5    7    2    4    6
 2  2    4    6    1    3    5    7 
```

我想分别使用“a.1”、“b.1”和“c.1”的四分位数对“a.2”、“b.2”和“c.2”列进行分类：

```
cat.a.2<-cut(df$a.2, c(-Inf, quantile(df$a.1), Inf))#categorizing a.2 using quartiles of a.1

cat.a.2
[1] (-Inf,3] (-Inf,3]
Levels: (-Inf,3] (3,3.25] (3.25,3.5] (3.5,3.75] (3.75,4] (4, Inf]

cat.b.2<-cut(df$b.2, c(-Inf, quantile(df$b.1), Inf))# categorizing b.2 using quartiles of b.1

cat.b.2
[1] (-Inf,5] (-Inf,5]
Levels: (-Inf,5] (5,5.25] (5.25,5.5] (5.5,5.75] (5.75,6] (6, Inf]

cat.c.2<-cut(df$c.2, c(-Inf, quantile(df$c.1), Inf))# categorizing c.2 using quartiles of c.1

 cat.c.2
[1] (5.5,7] (5.5,7]
Levels: (-Inf,1] (1,2.5] (2.5,4] (4,5.5] (5.5,7] (7, Inf] 
```

有没有办法自动完成这项任务？

我天真地试验了 sapply()：

```
quant.vars<-c("a.1","b.1", "c.1") # creating a vector of the names of variables which quartiles I am going to use
vars<-c("a.2","b.2", "c.2") # creating a vector of the names of variables which I am going to categorize
sapply (vars,FUN=function (x){cut (df [,x], quantile (df[,quant.vars], na.rm=T))})
         a.2        b.2          c.2       
[1,] "(1,3.25]" "(3.25,4.5]" "(5.75,7]"
[2,] "(1,3.25]" "(4.5,5.75]" "(5.75,7]" 
```

当然，这不是我想要的结果。

此外，当将“Inf”添加到 cut () 范围时，我看到以下错误：

> sapply (vars,FUN=function (x){cut (df [,x], c(quantile (df[,quant.vars], Inf), na.rm=T))})

```
 Error in quantile.default(df[, quant.vars], Inf) : 'probs' outside [0,1] 
```

总之，我的问题是如何制作 R：

1.  计算后缀为 1 (a.1., b.1, c.1) 的变量的分位数

2.  识别具有公共前缀的变量对（a.1 和 a.2、b.1 和 b.2、c.1 和 c.2）

3.  在每一对中，使用分位数对具有后缀 2 的变量进行分类，从具有后缀 1 的变量中获得（a.2 按 a.1 分位数分类，b.2 按 b.1 分位数分类，c.2 按 c.2 分类。 1个分位数）

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:58:10.687

像这样的东西？

```
#find duplicated letters
temp <- do.call(rbind,strsplit(names(df)[-1],".",fixed=TRUE))
dup.temp <- temp[duplicated(temp[,1]),]

#loop for cut
res <- lapply(dup.temp[,1],function(i) {
  breaks <- c(-Inf,quantile(a[,paste(i,1,sep=".")]),Inf)
  cut(a[,paste(i,2,sep=".")],breaks)
})

#make list a data.frame
res <- do.call(cbind.data.frame,res)
names(res) <- paste("cut",dup.temp[,1],2,sep=".")

#    cut.a.2  cut.b.2 cut.c.2
# 1 (-Inf,3] (-Inf,5] (5.5,7]
# 2 (-Inf,3] (-Inf,5] (5.5,7]

res[,1]
# [1] (-Inf,3] (-Inf,3]
# Levels: (-Inf,3] (3,3.25] (3.25,3.5] (3.5,3.75] (3.75,4] (4, Inf] 
```

如果速度是一个问题，那么还有优化的空间。

# sql - 搜索查询以从数据库中过滤掉记录

> ID：16166117
> 
> 赞同：0
> 
> 时间：2013-04-23T09:45:59.313
> 
> 标签：sql, db2, fusion

我在**GUI上的搜索引擎上输入一些值**

```
Name, Date, State 
```

如果用户没有输入任何值，然后单击“搜索”，他应该从数据库中获取整个表。即没有应用过滤器。

所以例如我写了

```
Select Name, State, Date from Table where Name='' and State= '' and Date= '' 
```

但是如果我在 GUI 中没有输入任何值，则不会从数据库中获取任何记录。**但我希望这些充当过滤器而不是条件。** 我正在使用 DB2

请建议我正确的方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:13:24.213

尝试这个

```
SELECT Name, State, Date 
FROM 
    Table 
WHERE 
    CASE WHEN ISNULL(@Name,0)=0 THEN 0 ELSE Name END = ISNULL(@Name,0) 
    AND 
    CASE WHEN ISNULL(@State,0)=0 THEN 0 ELSE State END = ISNULL(@State,0) 
    AND 
    CASE WHEN ISNULL(@Date,0)=0 THEN 0 ELSE Date END = ISNULL(@Date,0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:09:07.940

出于此目的，以下查询将是正确的，

```
Select Name, State, Date 
from Table 
where (:Name_Var is null OR Name = :Name_Var AND 
      (:State_Var is null OR State =:State_Var) AND 
      (:Date_Var is null OR Date = :Date_Var) 
```

# java - Liferay：RememberMe 不工作

> ID：16166122
> 
> 赞同：2
> 
> 时间：2013-04-23T09:46:18.743
> 
> 标签：java, jsp, liferay, liferay-6

我正在使用 liferay 6.1.1，我正在尝试使用 rememeberMe 功能但没有成功。尝试我能找到的每一个建议。

我有正确的配置：

> company.security.auto.login=true company.security.auto.login.max.age=1209600 session.enable.persistent.cookies=true

也试过：

> auto.login.hooks=com.liferay.portal.security.auth.RememberMeAutoLogin

所有 cookie 都存在正确的到期日期：

> 名称 GUEST_LANGUAGE_ID | 值 en_US | 2014 年 4 月 23 日 10:23:35 到期
> 
> 名称 COOKIE_SUPPORT | 值真 | 2014 年 4 月 22 日 18:57:13 到期
> 
> 姓名登录 | 价值... | 到期 07-05-2013 10:23:35
> 
> 姓名密码 | 价值... | 到期 07-05-2013 10:23:35
> 
> 姓名 REMEMBER_ME | 值真 | 到期 07-05-2013 10:23:35
> 
> 名称 SCREEN_NAME | 价值... | 到期 07-05-2013 10:23:35
> 
> 名称 COMPANY_ID | 价值... | 到期 07-05-2013 10:23:35
> 
> 姓名ID | 价值... | 到期 07-05-2013 10:23:35
> 
> 名称 USER_UUID | 价值... | 到期 07-05-2013 10:23:35

有什么想法吗？希望您能够帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:01:40.933

找到了原因：liferay 错误（[http://issues.liferay.com/browse/LPS-29218](http://issues.liferay.com/browse/LPS-29218)）。

改变

> live.users.enabled=true

至

> live.users.enabled=false

解决了。

# android - 用从数据库中获取的图像填充 GrindView

> ID：16166123
> 
> 赞同：0
> 
> 时间：2013-04-23T09:46:19.360
> 
> 标签：android, sqlite, android-gridview

我真的需要你的帮助来解决一个对你们很多人来说可能看起来很愚蠢的问题。

我需要创建一个简单的 Grindview 并用图像填充它。我尝试了 android 开发者网站提供的示例代码，它运行良好。

问题是示例代码提供了可绘制的图像。我需要用存储在我的 sqlite Db 中作为 BLOB 的位图填充它。

db 已经过测试并且可以正常工作，我可以毫无问题地从 BLOB 获取位图。

在我的代码中，当活动开始时，什么都没有发生，我得到一个没有图像的白屏。我花了很多时间在这上面，我希望你能给我一些建议！！！先谢谢各位的回复！！！:D

这是我的课程代码：

```
package cover.me;

import java.io.ByteArrayInputStream;
import java.util.ArrayList;

import cover.me.Game.SimulationView.Cursor;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.Display;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class Gallery extends Activity{

    private LinearLayout myGallery;
    private android.database.Cursor cursor;
    private DbAdapter MyDb;
    private int x,y;
    private Display display;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));

    }

    public class ImageAdapter extends BaseAdapter{
        private Context mContext;
        private DbAdapter MyDb;
        private int Counter;
        private ArrayList<Bitmap> Images = new ArrayList<Bitmap>();
        private boolean ImagesLoaded = false;

        public ImageAdapter(Context c){
            mContext = c;
        }

        public int getCount() {
            return 0;
        }

        public Object getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent){

            if(ImagesLoaded == false){  //Add bitmap to Images ArrayList the first time that getView is called
                MyDb = new DbAdapter(Gallery.this);
                MyDb.open();
                cursor = MyDb.fetchAllLevels();
                cursor.moveToFirst();

                for(int i=0;i<cursor.getCount()-1;i++){
                    byte[] image = cursor.getBlob(cursor.getColumnIndex(DbAdapter.LvL_Bitmap));
                    ByteArrayInputStream inputStream = new ByteArrayInputStream(image);
                    Bitmap mBitmap = BitmapFactory.decodeStream(inputStream);
                    Images.add(mBitmap);
                    cursor.moveToNext();
                }

                cursor.close();
                MyDb.close();
                ImagesLoaded = true;
            } 

            ImageView imageView;
            if (convertView == null){
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            }

            else{
                imageView = (ImageView) convertView;
                }

            imageView.setImageBitmap(Images.get(Counter));
            Counter++;

            return imageView;
        }

    }   

} 
```

这里是 XML

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

这是我在 StackOverflow 上的第一个问题，所以如果我的问题做错了，请给我一些提示！！！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T04:06:22.627

这是一个老问题，但还没有回答。我相信您的问题是您在 getCount 方法中返回 0 。我正在从事与此非常相似的先前项目，并在我的项目中发现了此错误。getCount 需要返回您要查看的条目总数。

```
public int getCount() {
    return 0;        //Needs to return something other than zero 
} 
```

# vbscript - vbs如何读取注册表路径

> ID：16166126
> 
> 赞同：0
> 
> 时间：2013-04-23T09:46:26.893
> 
> 标签：vbscript, hta

我想看看vbs，注册表路径。我有阅读密钥的解决方案。

```
 Set wshShell = CreateObject( "WScript.Shell" )
  WScript.Echo "ID = " _
           & wshShell.RegRead( "HKEY_USERS\key" ) 
```

输出是注册表项字符串。

我想要显示 HKEY_USERS 中所有路径的脚本。

例如树：

```
HKEY_USERS \
S-1-5-20_Classes
S-1-5-20
S-1-5-21
S-1-5-21-15325-362362362 (I want to output only this path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:45:50.580

您可以使用 WMI[`StdRegProv.EnumKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390387%28v=vs.85%29.aspx)方法列出特定注册表项下的所有子项。例如：

```
Const HKEY_USERS = &H80000003
strComputer = "."

Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" _ 
    & strComputer & "\root\default:StdRegProv")

strKeyPath = ""
objReg.EnumKey HKEY_USERS, strKeyPath, arrSubKeys

For Each subkey In arrSubKeys
  WScript.Echo subkey 
Next 
```

# ruby-on-rails - Selenium 有什么问题，同时使用 Capybara 测试代理

> ID：16166132
> 
> 赞同：0
> 
> 时间：2013-04-23T09:46:34.707
> 
> 标签：ruby-on-rails, firefox, selenium, capybara

当使用 Capybara、Selenium、Firefox (windows) 进行午餐测试时，我正在使用这种类型的代码

```
 Capybara.reset_sessions!
  Capybara.register_driver :selenium do |app|
  profile = Selenium::WebDriver::Firefox::Profile.new

  profile["network.proxy.type"] = 1 # manual proxy config
                                    #profile["network.proxy.http"] = "209.188.18.130"
  profile["network.proxy.ssl"]  = "**********"
  profile["network.proxy.ssl_port"]             =   ****

  Capybara::Selenium::Driver.new(app, :profile => profile)
  end 
```

但在我看来，即使进行配置，浏览器也不安全。例如，在真正的浏览器中使用相同的代理而不是在测试环境中，我在注册新站点时没有问题。但是，当我使用 Selenium Firefox Capybara 进行测试时，即使我更改了许多代理 - 该网站也能看穿它。

问题是：是否有可能配置 Selenium Firefox Capybara 使其作为真正的浏览器受到保护？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T20:34:32.620

是的。最好的方法是手动配置浏览器并读取其 prefs.js 文件以查看实际配置是什么，然后将该信息放入您的配置文件中并进入构造函数。这是我设置的：

```
 profile["network.proxy.no_proxies_on"] = NO_PROXY_SETTING
   profile["network.proxy.backup.ftp"] = ""
   profile["network.proxy.backup.ftp_port"] = 0 
   profile["network.proxy.backup.socks"] = ""
   profile["network.proxy.backup.socks_port"] = 0 
   profile["network.proxy.backup.ssl"] = ""
   profile["network.proxy.backup.ssl_port"] = 0 
   profile["network.proxy.ftp_port"] = PROXY_PORT
   profile["network.proxy.ftp"] = PROXY_HOST
   profile["network.proxy.http_port"] = PROXY_PORT
   profile["network.proxy.http"] = PROXY_HOST
   profile["network.proxy.share_proxy_settings"] = true
   profile["network.proxy.socks_port"] = PROXY_PORT
   profile["network.proxy.socks"] = PROXY_HOST
   profile["network.proxy.ssl_port"] = PROXY_PORT
   profile["network.proxy.ssl"] = PROXY_HOST
   profile["network.proxy.type"] = 1 # manual proxy config 
```

# javascript - 使用嵌套中继器和图表显示信息

> ID：16166135
> 
> 赞同：1
> 
> 时间：2013-04-23T09:46:38.473
> 
> 标签：javascript, jquery, asp.net

这是我现在拥有的 html，它确实显示了我想要的内容：

```
 <asp:Repeater runat="server" ID="repeatAwareOfStat">
          <ItemTemplate>
                <h1><%#((VitaminWDefaultClient.Entities.StatsPosition)Container.DataItem).PositionName%></h1>
                <asp:Repeater ID="Repeater1" runat="server" DataSource='<%# Eval("KnownFrom") %>'>
                    <ItemTemplate>
                        <%# Eval("Name") %>: <%# Eval("Count") %><br />
                    </ItemTemplate>
                </asp:Repeater>
                <br />
            </ItemTemplate>
        </asp:Repeater> 
```

但是，我想使用图表插件，这会导致一些问题。

这应该是填写信息后我想要的表格：

```
<table class="highchart" data-graph-container-before="1" data-graph-type="column">
                        <thead>
                            <tr>
                                <th>Occupation</th>
                                <th>some other place</th>
                                <th>Facebook</th>
                                <th>twitter</th>
                                <th>magazine</th>
                                <th>whatevr</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Daglig leder</td>
                                <td>3</td>
                                <td>0</td>
                                <td>3</td>
                                <td>5</td>
                                <td>8</td>
                            </tr>
                            <tr>
                                <td>Some title</td>
                                <td>3</td>
                                <td>0</td>
                                <td>3</td>
                                <td>5</td>
                                <td>8</td>
                            </tr>                            
                            <tr>
                                <td>Some title</td>
                                <td>3</td>
                                <td>5</td>
                                <td>3</td>
                                <td>5</td>
                                <td>8</td>
                            </tr>                            
                            <tr>
                                <td>Some title</td>
                                <td>3</td>
                                <td>0</td>
                                <td>3</td>
                                <td>5</td>
                                <td>10</td>
                            </tr>                            
                            <tr>
                                <td>Some title</td>
                                <td>3</td>
                                <td>1</td>
                                <td>6</td>
                                <td>2</td>
                                <td>5</td>
                            </tr>                            
                            <tr>
                                <td>Restaurantworker</td>
                                <td>3</td>
                                <td>2</td>
                                <td>3</td>
                                <td>5</td>
                                <td>8</td>
                            </tr>
                        </tbody>
                    </table> 
```

这是我正在使用的对象的图片

![](https://i.stack.imgur.com/PKlRF.png)

代码隐藏：

```
 var list = JobBLL.LoadAwareOfStatistics();
    repeatAwareOfStat.DataSource = list;
    repeatAwareOfStat.DataBind(); 
```

在中继器内添加表格相当困难。有谁能帮忙吗？

# jquery - Fancybox 自动弹出

> ID：16166138
> 
> 赞同：2
> 
> 时间：2013-04-23T09:46:41.313
> 
> 标签：jquery, html, css, fancybox

我从网上下载了 Fancybox 并正在研究它。

```
<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox').fancybox();

        $("#fancybox-manual-b").click(function() {
            $.fancybox.open({
                href : 'contact.php',
                type : 'iframe',
                padding : 5
            });
        });

    });
</script>
<style type="text/css">
    .fancybox-custom .fancybox-skin {
        box-shadow: 0 0 50px #222;
    }
</style> 
```

```
 <a class="fancybox fancybox.iframe" href="contact.php">Subscribe</a> 
```

单击链接时它运行良好。但是现在我需要它在有人登录主页时自动弹出。谁能帮忙解决

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:52:51.807

Fancybox 不直接支持自动启动的方式。我能够开始工作的工作是创建一个隐藏的锚标记并触发它的 onclick 事件。确保在包含 jquery 和 fancybox js 文件之后包含触发 onclick 事件的调用。我使用的代码如下：

此示例脚本直接嵌入在 html 中，但也可以包含在 js 文件中。

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#hidden_link").fancybox().trigger('click');
    });
</script> 
```

**边框颜色**

我个人是从fancybox的css文件中做的，你应该寻找

> #fancybox-内容

和

> .fancybox-outer

并根据您的需求更改其背景颜色或边框颜色。

希望对你有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:47:26.040

这段代码运行良好。我自己测试过

```
<script type="text/javascript">
    $(document).ready(function() {
$.fancybox({
                        'width': '40%',
                        'height': '40%',
                        'autoScale': true,
                        'transitionIn': 'fade',
                        'transitionOut': 'fade',
                        'type': 'iframe',
                        'href': 'http://www.example.com'
                    });
 }); 
```

注意：我已经用 2.1.4 版本测试过你也可以试试这个

```
$(document).ready(function() {
             $("#fancybox-manual-a").trigger('click');
            }); 
```

有一个带有 id 的锚标签`fancybox-manual-a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T18:21:44.907

```
<script type="text/javascript">
    $(document).ready(function() {

        $.fancybox.open('#id');
    });
</script> 
```

# regex - GNU Sed 格式美国地址到街道、城市、州、邮编

> ID：16166139
> 
> 赞同：1
> 
> 时间：2013-04-23T09:46:45.703
> 
> 标签：regex, sed

我有一些客户的以下数据：

```
719 13th Street East, Glencoe MN, 55336
626 Valley Road, Montclair NJ, 07043
666 EAST DYER ROAD, SANTA ANA CA, 92705
20800 N. 135th Ave, Sun City West AZ, 85375
9775 Herring Gull Drive, Indianapolis IN, 46280
712 21st Street, Vero Beach FL, 32960
PO BOX 324, PORT SALERNO FL, 34992
207 Middleton Road, Lafayette LA, 70503
5091 nw fiddle leaf ct, port saint lucie FL, 34986
347 Mayberry Lane, Dover DE, 19904
2648 SW 137th Ave, Miramar FL, 33027
4410 Williams Dr SUITE 104, Georgetown TX, 78628
17020 Windsor Court, Homer Glen IL, 60491
11 Technology Drive North, Warren NJ, 07059
655 Boylston St, Boston MA, 02116
1375 bishops terrace, wixom MI, 48393
4705 Center Blvd Apt. 808, Long Island City NY, 11109
5340 CORNELIA HWY, ALTO GA, 30510
1541 Paces Ferry North, Smyrna GA, 30080
603 west pacific coast hwy, wilmington CA, 90744
2503Paddock CT, Louisville KY, 40216
9421 Dunbar dr, Oakland CA, 94603
1804 Third Avenue Apt #8, New York NY, 10029
2504  bellaire  st, wantagh NY, 11793
1380 avon lane apt 21, north lauderdale  FL, 33068 
```

如何使用 SED 正则表达式将其格式化为 Street Address|City|State|Zip

例如。

```
719 13th Street East|Glencoe|MN|55336
626 Valley Road|Montclair|NJ|07043
666 EAST DYER ROAD|SANTA ANA|CA|92705 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:59:19.153

```
sed 's/^\(.*\), *\(.*\) \(..\), \([0-9][0-9][0-9][0-9][0-9]\)/\1|\2|\3|\4/' 
```

或者：

```
sed -r 's/^(.*), *(.*) (..), ([0-9]{5})/\1|\2|\3|\4/' 
```

输出：

```
719 13th Street East|Glencoe|MN|55336
626 Valley Road|Montclair|NJ|07043
666 EAST DYER ROAD|SANTA ANA|CA|92705
20800 N. 135th Ave|Sun City West|AZ|85375
9775 Herring Gull Drive|Indianapolis|IN|46280
712 21st Street|Vero Beach|FL|32960
PO BOX 324|PORT SALERNO|FL|34992
207 Middleton Road|Lafayette|LA|70503
5091 nw fiddle leaf ct|port saint lucie|FL|34986
347 Mayberry Lane|Dover|DE|19904
2648 SW 137th Ave|Miramar|FL|33027
4410 Williams Dr SUITE 104|Georgetown|TX|78628
17020 Windsor Court|Homer Glen|IL|60491
11 Technology Drive North|Warren|NJ|07059
655 Boylston St|Boston|MA|02116
1375 bishops terrace|wixom|MI|48393
4705 Center Blvd Apt. 808|Long Island City|NY|11109
5340 CORNELIA HWY|ALTO|GA|30510
1541 Paces Ferry North|Smyrna|GA|30080
603 west pacific coast hwy|wilmington|CA|90744
2503Paddock CT|Louisville|KY|40216
9421 Dunbar dr|Oakland|CA|94603
1804 Third Avenue Apt #8|New York|NY|10029
2504  bellaire  st|wantagh|NY|11793
1380 avon lane apt 21|north lauderdale |FL|33068 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:48:39.323

试试这个：

```
sed -e 's/\([A-Z]*\) \([A-Z][A-Z]\),/\1\|\2,/g' -e 's/, /\|/g' 
```

它得到所有`,`并替代`|`. 在此之前，为零件搜索`AAAA AA,`并将其更改`AAAA|AA,`为`City|State`。

**测试**

```
$ sed -e 's/\([A-Z]*\) \([A-Z][A-Z]\),/\1\|\2,/g' -e 's/, /\|/g' your_file
719 13th Street East|Glencoe|MN|55336
626 Valley Road|Montclair|NJ|07043
666 EAST DYER ROAD|SANTA ANA|CA|92705
20800 N. 135th Ave|Sun City West|AZ|85375
9775 Herring Gull Drive|Indianapolis|IN|46280
712 21st Street|Vero Beach|FL|32960
PO BOX 324|PORT SALERNO|FL|34992
207 Middleton Road|Lafayette|LA|70503
5091 nw fiddle leaf ct|port saint lucie|FL|34986
347 Mayberry Lane|Dover|DE|19904
2648 SW 137th Ave|Miramar|FL|33027
4410 Williams Dr SUITE 104|Georgetown|TX|78628
17020 Windsor Court|Homer Glen|IL|60491
11 Technology Drive North|Warren|NJ|07059 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:21:52.180

```
 sed -e 's/, /|/g' -e 's/ \([^ ]\+\)$/|\1/' file 
```

# javascript - Backbone.js - 从视图中渲染数组而不在模板中创建循环

> ID：16166141
> 
> 赞同：0
> 
> 时间：2013-04-23T09:46:49.610
> 
> 标签：javascript, ruby-on-rails, backbone.js, backbone-views

我正在使用主干为页面加载所有帖子。并在单击“获取所有评论”链接时加载帖子的评论。我收到了来自 Ajax 调用的所有评论。

```
Social.Views.StreamsIndex = Backbone.View.extend({

    comment_template: JST['streams/comment'],

    comment_displayall: function(data, post_id) {
      this.$("#comments").html(this.comment_template({
        comment: data // Here data is array
      }));
    }
}); 
```

我有**comment.jst.ejs 文件**，**现在有一个循环，但我必须把它放在视图中**

```
 <% _.each(comment.comments,function(comment){ %> // I want to get rid of this Line
 <div class="stream_comment">
   <div class="stream_commentphoto">
    <a><img src="<%= comment.actor.thumbnail.url %>"></a>
   </div>
   <div class="stream_comm-content">
    <a href="#"><h5><%= comment.actor.displayName %></h5> </a>
    <p><%= comment.content %></p>
   </div>
 </div>
<%}%> 
```

如何通过在视图中添加循环来摆脱评论模板中的循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:37:23.397

也许是这样的：

```
comment_displayall: function(data, post_id) {

    //clear any existing comments
    var $comments = this.$("#comments").empty();

    //render each comment separately and append to the view
    _.each(data.comments, function(comment) {
        $comments.append(this.comment_template({comment:comment});      
    }, this);
} 
```

并且只需删除模板的循环结构（第一行和最后一行）。

/代码示例未测试

# jsf-2 - 之后如何设置 UIComponent 的焦点 首先，非常感谢大家一直以来的支持。 我有一个与 .xhtml 和 'f:ajax' 相关的问题。 我通过默认折叠的bean变量设置richfaces：collapsiblepanel'expanded'属性，并且在模糊事件中它被扩展。我想在 f:ajax 请求完成后将焦点设置为 UIComponent。为此，我用 问问题 问问题 2013-04-23T09:46:51.403 2071 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 首先，非常感谢大家一直以来的支持。 我有一个与 .xhtml 和 'f:ajax' 相关的问题。 我通过默认折叠的bean变量设置richfaces：collapsiblepanel'expanded'属性，并且在模糊事件中它被扩展。我想在 f:ajax 请求完成后将焦点设置为 UIComponent。为此，我用 javascript 编写了一个函数，并在 f:ajax 的“onevent”中调用它。 但是 onevent 函数在面板打开之前触发，我无法将焦点设置在该可折叠面板中定义的 UIComponent 上。 如何在 ajax 请求完成后 setFocus 或如何触发该功能？ 提前致谢。 HTTP错误的POJOMappingFeature？ 我已com.sun.jersey.api.json.POJOMappingFeature设置为 true，它适用于 HTTP 200 响应。 但是，当我的应用程序返回错误时，它会显示带有错误标题的 text/html 响应。 即使我像这样创建自定义异常（在 ContainerRequestFilter 中）： throw new WebApplicationException( Response.status(Response.Status.FORBIDDEN) .type(MediaType.APPLICATION_JSON) .build() ); 它仍然显示通用文本/html 403 错误。 jsf-2richfaces 4 1 回答 1 This answer is useful 3 你的 js 函数应该是这样的 function doTheFocus(data) { if (data.status === 'success') { //here goes the js code that will set the focus //this code will be executed only when the ajax will be done } } 这就是你的f:ajax遗嘱 <f:ajax onevent="doTheFocus" /> 如果想在面板打开时调用焦点的js函数可以试试 <rich:collapsiblePanel onswitch="doTheFocus" 或（我不确定...） <rich:collapsiblePanel onswitch="doTheFocus()" 如果您最终将使用onswitch，您可能需要在doTheFocus函数内部添加一些逻辑来检查面板是否展开... 于 2013-04-23T10:28:43.317 回答 Related 0 zsh - 在 zsh 中使用 vi 绑定导航列表选择 2 java - usaco：十三号星期五我的逻辑有什么问题？ 2 ios - 打开 Siri 会停止 AVAudioPlayer 2 java - 在 ListView 中编辑文本奇怪的行为 0 facebook - Facebook og:image 标签仍然允许其他缩略图 1 r - 使用 R 操作 excel 电子表格数据并将输出返回到单独的工作表 1 javascript - 当我使用 css3 过渡时，如何在每一帧获得确切的过渡属性？ 2 java - 谷歌应用引擎Java中的静态文件 2 entity-framework - 在实体框架中创建未与数据库中的字段映射的外键字段 1 c++ - 如何使文件结束输出它的数据？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16166142
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jsf-2, richfaces

首先，非常感谢大家一直以来的支持。

我有一个与 .xhtml 和 'f:ajax' 相关的问题。

我通过默认折叠的bean变量设置richfaces：collapsiblepanel'expanded'属性，并且在模糊事件中它被扩展。我想在 f:ajax 请求完成后将焦点设置为 UIComponent。为此，我用 javascript 编写了一个函数，并在 f:ajax 的“onevent”中调用它。

但是 onevent 函数在面板打开之前触发，我无法将焦点设置在该可折叠面板中定义的 UIComponent 上。

如何在 ajax 请求完成后 setFocus 或如何触发该功能？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:28:43.317

你的 js 函数应该是这样的

```
function doTheFocus(data) {
    if (data.status === 'success') {
        //here goes the js code that will set the focus
        //this code will be executed only when the ajax will be done
    }
} 
```

这就是你的`f:ajax`遗嘱

```
<f:ajax onevent="doTheFocus" /> 
```

* * *

如果想在面板打开时调用焦点的js函数可以试试

```
<rich:collapsiblePanel onswitch="doTheFocus" 
```

或（我不确定...）

```
<rich:collapsiblePanel onswitch="doTheFocus()" 
```

如果您最终将使用`onswitch`，您可能需要在`doTheFocus`函数内部添加一些逻辑来检查面板是否展开...

# google-app-engine - HTTP错误的POJOMappingFeature？

> ID：16166145
> 
> 赞同：1
> 
> 时间：2013-04-23T09:47:02.420
> 
> 标签：google-app-engine, jersey, jax-rs

我已`com.sun.jersey.api.json.POJOMappingFeature`设置为 true，它适用于 HTTP 200 响应。

但是，当我的应用程序返回错误时，它会显示带有错误标题的 text/html 响应。

即使我像这样创建自定义异常（在 ContainerRequestFilter 中）：

```
throw new WebApplicationException(
    Response.status(Response.Status.FORBIDDEN)
      .type(MediaType.APPLICATION_JSON)
      .build()
); 
```

它仍然显示通用文本/html 403 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T06:39:07.557

你应该试试 Jersey 的 ExceptionMapper：

首先，您的自定义例外：

```
public class UnauthorizedException extends RuntimeException {
   public UnauthorizedException() {}
} 
```

然后，您的实体，您要发回：

```
@XmlRootElement
public class ErrorMessage{
  @XmlElement
  private String message;

  public ErrorMessage(String message){
    this.message = message;
  }
} 
```

最后，魔术开始了:)

```
@Provider
public class UnauthorizedExceptionMapper implements ExceptionMapper<UnauthorizedException>{

  @Override
  public Response toResponse(UnauthorizedException exception) {
    return Response.status(Response.Status.UNAUTHORIZED)
                   .entity(new ErrorMessage("Not Authorized"))
                   .build();
   }
 } 
```

现在，当您返回一个 JSON-Entity

```
throw new UnauthorizedException(); 
```

问候

# c# - c# asp Textbox Text 仅在 Textbox 为只读时从 Code behind 更改

> ID：16166147
> 
> 赞同：0
> 
> 时间：2013-04-23T09:47:04.553
> 
> 标签：c#

我很困惑。我尝试更改文本框的默认文本。

这里有一个简单的代码来重现问题。

TextBox Textbox1 和标签在任何单击按钮时都会更新。Textbox var 永远不会更新。仅在第一个 PageLoad 上。

问题是，我必须从代​​码后面添加我的文本框，而不是在 aspx 页面中。

任何想法发生了什么以及我如何让它发挥作用？

```
%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="tbtester.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div >

        <asp:Panel ID="mypanel" runat="server">
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            <asp:Button ID="Button1" runat="server" Text="Button" />
            </asp:Panel>
    </div>
    </form>
</body>
</html>

using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

    namespace tbtester
    {
        public partial class WebForm1 : System.Web.UI.Page
        {
            protected void Page_Load(object sender, EventArgs e)
            {
                System.Web.UI.WebControls.TextBox var = new System.Web.UI.WebControls.TextBox();
                //if (!this.Page.IsPostBack)
                Label test = new Label();

                mypanel.Controls.Add(test);
                mypanel.Controls.Add(var);

                var.Text = DateTime.Now.ToLongTimeString();
                test.Text = DateTime.Now.ToLongTimeString();

                var.ReadOnly = false;

                TextBox1.Text = DateTime.Now.ToLongTimeString();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:12:54.763

禁用其`read only`标志`before`将其添加到您的`panel`：

```
 TextBox var = new TextBox();
     var.ReadOnly = false;
     mypanel.Controls.Add(var); 
```

# sql - 在 Linq 中加入子查询结果

> ID：16166151
> 
> 赞同：32
> 
> 时间：2013-04-23T09:47:10.393
> 
> 标签：sql, linq, join

我又提出了一个疑问：有没有一种方法可以让我们使用一个查询的结果，然后像在 SQL 中那样进一步加入相同的查询：

```
SELECT Applications.* , ApplicationFees.ApplicationNo, ApplicationFees.AccountFundDate1,ApplicationFees.AccountFundDate2 ,ApplicationFees.AccountFundDate3 , ApplicationFees.AccountCloseDate1, ApplicationFees.AccountCloseDate2,ApplicationFees.AccountCloseDate3,
isnull(SUBQRY11.AMNT ,0) as SCMSFEE1R,
isnull(SUBQRY12.AMNT,0) as SCMSFEE2R,
Left Join 
(
SELECT ApplicationNo,COUNT(ApplicationNo) AS CNT, SUM(Amount) as AMNT 
FROM Payments where (FEETYPE=1 AND FeePosition=1)  and (FeeDate>='2011-01-01')
and (FeeDate<='2012-01-01')
GROUP BY ApplicationNo
)SUBQRY11
ON ApplicationFees.ApplicationNo= SUBQRY11.ApplicationNo 
Left Join 
(
SELECT ApplicationNo,COUNT(ApplicationNo) AS CNT2, SUM(Amount) as AMNT 

FROM Payments where (FEETYPE=1 AND FeePosition=2) and (FeeDate>='2011-01-01') 
 and (FeeDate<='2012-01-01')
GROUP BY ApplicationNo )SUBQRY12 ON ApplicationFees.ApplicationNo=SUBQRY12.ApplicationNo 
```

我想避免在 foreach 中进行相同的查询，因为这将非常耗时。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-23T09:59:31.677

是的，您可以加入子查询。像这样：

```
var query = from f in db.ApplicationFees
            join sub in (from p in db.Payments
                         where p.Type == 1 && p.Position == 1 && 
                               p.Date >= fromDate && p.Date <= toDate
                         group p by p.ApplicationNo into g
                         select new {
                              ApplicationNo = g.Key,
                              CNT = g.Count(),
                              AMNT = g.Sum(x => x.Amount)
                         }) 
           on f.ApplicationNo equals sub.ApplicationNo into feePayments
           select new { Fee = f, Payments = feePayments }; 
```

但是在单个查询中编写它不是很容易维护。考虑从单独*定义*的子查询中组合查询：

```
var payments = from p in db.Payments
               where p.Type == 1 && p.Position == 1 && 
               p.Date >= fromDate && p.Date <= toDate
               group p by p.ApplicationNo into g
               select new {
                    ApplicationNo = g.Key,
                    CNT = g.Count(),
                    AMNT = g.Sum(x => x.Amount)
              };

var query = from f in db.ApplicationFees
            join p in payments 
               on f.ApplicationNo equals p.ApplicationNo into feePayments
            select new { Fee = f, Payments = feePayments }; 
```

# wpf - 如何从 ItemTemplate XAML 绑定到 HierarchicalDataTemplate 的 DataContext？

> ID：16166152
> 
> 赞同：2
> 
> 时间：2013-04-23T09:47:16.507
> 
> 标签：wpf, xaml, binding, itemtemplate, hierarchicaldatatemplate

在我的 WPF TreeView 中，我定义了一个`HierarchicalDataTemplate`. 在它的`ItemTemplate`中，有一个按钮，`Command`我需要将其绑定到父 ViewModel，这是父 ViewModel`DataContext`的按钮，`HierarchicalDataTemplate`换句话说，就是`SubItems`下面示例中包含集合的 ViewModel。`ItemTemplate`s own `DataContext`- *SubItem* -将用作`CommandParameter`.

```
<TreeView ItemsSource="{Binding Items}">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding SubItems}">                
            <HierarchicalDataTemplate.ItemTemplate>
                <DataTemplate>
                    <Button Command="??CmdOnDtaCntxtOfHierDtaTmplt" 
                            CommandParameter="{Binding}" />                                 
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

如何仅在 XAML 中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:08:50.813

以下绑定应该有效：

```
<Button Command="{Binding DataContext.Command, 
        RelativeSource={RelativeSource AncestorLevel=2, AncestorType=TreeViewItem}}"
        CommandParameter="{Binding}" /> 
```

这将绑定到与作为当前 TreeViewItem 的父级的 TreeViewItem 关联的 DataContext 的 Command 属性（在您的情况下是包含 SubItems 集合的 VM）。

# android - Android：无法运行 ffmpeg-1.0.1 及更高版本

> ID：16166154
> 
> 赞同：1
> 
> 时间：2013-04-23T09:47:34.987
> 
> 标签：android, ffmpeg

我能够编译 ffmpeg-0.8.14 并创建库文件。如果我编译 ffmpeg-1.0.1 及更高版本，则会显示以下错误。

**错误：**

> 修改 Makefiles... 在 ffmpeg 中生成 av.mk... 开始 ndk-building... /android-ndk-r7b/build/core/build-binary.mk:41: *** 目标文件 `clean' 同时具有 : 和:: 条目。停止。

谁能帮我？

# scala - 如何在 Scala 中以编程方式运行 JUnit 测试

> ID：16166160
> 
> 赞同：1
> 
> 时间：2013-04-23T09:47:53.430
> 
> 标签：scala, junit

我正在尝试在我的 Scala 应用程序中运行 JUnit 测试。有没有办法用 JUnit 做到这一点？

在 Java 中，我会以编程方式运行这样的 JUnit 测试：

```
public org.junit.runner.Result runTest(String test) {
  Class<?> _class = ClassLoader.getSystemClassLoader().loadClass(test);
  org.junit.runner.JUnitCore junit = new org.junit.runner.JUnitCore();
  return junit.run( _class );
} 
```

我可以在 Scala 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:47:50.187

所以，我没有具体的 JUnit 想法，但是您是否尝试过从 Java 直接翻译到 Scala？

```
def runTest(test : String) : org.junit.runner.Result = {
  val _class = ClassLoader.getSystemClassLoader.loadClass(test);
  val junit = new org.junit.runner.JUnitCore();
  junit.run( _class );
} 
```

或者，您可以将您的 Java 函数编写为实用程序类的静态成员，然后从 scala 中调用它。

```
val result = JUnitUtils.runTest("my.fully.qualified.TestClassName"); 
```

# java - 如何在 JSP 中从上一页检索 TextArea 值？

> ID：16166163
> 
> 赞同：0
> 
> 时间：2013-04-23T09:47:56.650
> 
> 标签：java, html, jsp

我想从此 view.jsp 中检索 textarea 数据

```
<form action="${addStudentUrl}" method="post"> 
Name:<input name="name" type="text" />
<br> 
<br> 
Email:<input name="email" type="text" />
<br> 
<br> 
Gender:
<br> 
<input type="radio" name="gender" value="1">Male<br>
<input type="radio" name="gender" value="2">Female
<br> 
Description: <textarea id="description"> Enter text here...</textarea>
String description = $("description").val();
<input type="submit" value="Add"/>  
</form> 
```

到这里TestPackage.java

```
 @ProcessAction(name="addStudent")  
     public void addStudent(ActionRequest actionRequest,  ActionResponse actionResponse) throws IOException, PortletException, PortalException, com.liferay.portal.kernel.exception.SystemException
     {  

         String name=ParamUtil.get(actionRequest, "name", StringPool.BLANK);
         int gender=Integer.parseInt(ParamUtil.get(actionRequest, "gender", StringPool.BLANK)); 
         String email=ParamUtil.get(actionRequest, "email", StringPool.BLANK); 
         String description = ParamUtil.get(actionRequest, "descriptionHidden", StringPool.BLANK);
         StudentLocalServiceUtil.addStudent(name, gender, email, description);
     } 
```

我可以为性别、电子邮件和姓名做这件事。显然 textArea 来自不同的数据类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:57:02.690

在您的 view.jsp 中，您应该将 description-element 更改为：

```
Description: <textarea name="description"> Enter text here...</textarea> 
```

同样在您的 view.jsp 中，您应该删除此行：

```
String description = $("description").val(); 
```

您在这里使用了一些 jQuery，但由于某种原因它位于您的 html 中间。此外，如果你想使用它的 id 属性选择一个元素，你应该使用选择器 $("#description")。

在您的 TestPackage.java 中，将您设置描述的行更改为：

```
String description = ParamUtil.get(actionRequest, "description", StringPool.BLANK); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:51:05.833

当 id 是`description`时，您为什么要尝试将值检索为`descriptionHidden`？尝试

```
String description = ParamUtil.get(actionRequest, "description", StringPool.BLANK); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:53:16.123

使用 ：`textarea name="description"`

# jpa - Spring请求绑定和休眠presist

> ID：16166164
> 
> 赞同：1
> 
> 时间：2013-04-23T09:47:58.397
> 
> 标签：jpa, spring-mvc, jackson, hibernate-mapping

对于 Spring MVC 应用程序，配置了带有休眠功能的 ORM jpa。每个请求都将以通常的形式提交，响应将是 json，因此配置 Jackson Json 并使用 @ResponseBody 。除了实体的多对一映射外，一切都运行良好。

```
public class Supplier implements BaseEntity{
    @Id
    @GeneratedValue(strategy= GenerationType.AUTO)
    private Integer id;
    private String name;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "bank_id", nullable = false)
    private Bank bank;
    /*
     all getters and setters
      */
} 
```

银行实体

```
@Entity
@Table(name="bank_tbl", uniqueConstraints=@UniqueConstraint(columnNames="name_bank"))
public class Bank implements BaseEntity{

    @Id
    @GeneratedValue(strategy= GenerationType.AUTO)
    @Column(name="bank_id")
    private Integer id;

    @Column( nullable=false)
    private String name;

    @Column(name="desc_bank", columnDefinition="TEXT")
    private String desc;
    /*
     all getters and setters
      */
} 
```

样品请求

> id：1 名称：“史蒂夫”银行：4

第一个困惑是如何将请求中存在的银行 ID 值绑定到实体。**其次，在绑定之后，除了entityManager.merge(supplier);**之外，是否需要做任何特殊的方式来保存**Supplier**实体；. 如何仅使用 bank_id 检索供应商 json。实体本身是否需要更改才能满足此要求？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:38:52.023

您可能想查看 Jackson 中的自定义序列化器/反序列化器：http: [//blog.palomilabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/](http://blog.palominolabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/)**

# c# - 针对多个接口进行编程

> ID：16166165
> 
> 赞同：28
> 
> 时间：2013-04-23T09:47:59.727
> 
> 标签：c#, oop

我非常喜欢这个提示：“针对接口进行编程，而不是针对实现进行编程”，并且我试图始终如一地遵循它。*然而，当我必须将我的代码与必须*从多个接口继承的对象分离时，我怀疑如何保持这一原则的工作。一个典型的例子可能是：

```
namespace ProgramAgainstInterfaces
{
    interface IMean
    {
            void foo();
    }  

    class Meaning : IMean , IDisposable
    {
        public void Dispose()
        {
            Console .WriteLine("Disposing..." );
        }

        public void foo()
        {
            Console .WriteLine("Doing something..." );           
        }
    }

   class DoingSomething
   {
        static void Main( string[] args)
        {
            IMean ThisMeaning = (IMean ) new Meaning ();  // Here the issue: I am losing the IDisposable methods
            ThisMeaning.foo();
            ThisMeaning.Dispose();                     // Error: i cannot call this method losing functionality
        }
   }   
} 
```

解决此问题的一种可能方法是定义一个继承自两个接口的 ad-hoc 接口：

```
namespace ProgramAgainstInterfaces
{
    interface IMean
    {
            void foo();
    }

    interface ITry : IMean , IDisposable
    {
    }

    class Meaning : ITry
    {
        public void Dispose()
        {
            Console .WriteLine("Disposing..." );
        }

        public void foo()
        {
            Console .WriteLine("Doing something..." );           
        }
    }

   class DoingSomething
   {
        static void Main( string[] args)
        {
            ITry ThisMeaning = (ITry ) new Meaning ();  // This works
            ThisMeaning.foo();
            ThisMeaning.Dispose();   // The method is available
        }
   }   
} 
```

但我不确定这是否是更紧凑和更有效的解决方案：我可以拥有更复杂的多重继承层次结构，这会增加复杂性，因为我必须创建接口仅用作容器。有更好的设计方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-23T09:59:00.800

如果作为“IMean”对象始终是一次性的，那么您应该让接口实现它，如下所示：

```
public interface IMean : IDisposable
{
    ...
} 
```

但是，如果让一个对象实现 IMean 而不是一次性的，那么我认为您建议的解决方案是最好的：创建一个中间接口，这样您就可以拥有：

```
public interface IMean
{
    ...
}

public interface IDisposableMean : IMean, IDisposable
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-23T09:52:41.117

你应该有`interface`工具`IDisposable` **而不是**类`Meaning`。这样，当你施法时，`interface`你不会失去那个`IDisposable`能力（因为它是在你的`interface`水平上定义的）。

像这样：

```
namespace ProgramAgainstInterfaces
{
    interface IMean : IDisposable
    {
        void foo();
    }

    interface ITry : IMean
    {
    }

    class Meaning : ITry
    {
        public void Dispose()
        {
            Console .WriteLine("Disposing..." );
        }

        public void foo()
        {
            Console .WriteLine("Doing something..." );           
        }
    }

   class DoingSomething
   {
        static void Main( string[] args)
        {
            ITry ThisMeaning = (ITry ) new Meaning ();  // This works
            ThisMeaning.foo();
            ThisMeaning.Dispose();   // The method is available
        }
   }   
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-23T09:54:37.293

`T`您还可以引入必须实现多个接口的泛型类型。这是一个使用`IFoo`and的示例`IDisposable`：

```
class Program
{
    static void Main(string[] args)
    {
    }

    interface IFoo
    {
        void Foo();
    }

    class Bar<T> where T : IFoo, IDisposable
    {
        public Bar(T foo)
        {
            foo.Foo();
            foo.Dispose();
        }
    }
} 
```

这有点复杂。*如果从设计的角度来看*`IFoo : IDisposable`是错误的，这可能是有道理的。

 ** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-23T09:56:16.170

When you have code that requires a type implements multiple different interfaces that's exactly what you usually have to do. But there are quite a few variations on what could happen, depending on the semantics of your code.

For example, your own proposed solution is acceptable if `IMean` is not necessarily `IDisposable` but there are many consumers that do require their `IMean` to be disposable. You could also use an abstract base class to do this -- "program to an interface" does not use "interface" as in "the language construct defined by the `interface` keyword" but rather "an abstract version of the object".

In fact you could require that any types you consume implement `ITry` (and thus are disposable) and simply document that it's fine for some types to implement `Dispose` as a no-op. If consuming an abstract base class you could also provide this no-op implementation as default.

Another solution would be to use generics:

```
void UseDisposableMeaning<T>(T meaning) where T : IMean, IDisposable
{
    meaning.foo();
    meaning.Dispose();
}

// This allows you to transparently write UseDisposableMeaning(new Meaning()); 
```

Still another case would be a consumer that strictly requires only `IMean`, but also needs to be disposable-aware. You could handle this by fishing for types:

```
IMean mean = new Meaning();
var disposable = mean as IDisposable;
if (disposable != null) disposable.Dispose(); 
```

While this is an acceptable practical solution (especially given that `IDisposable` is "not just *any* interface") you should definitely take a step back if you find yourself doing this again and again; in general, any form of "type switching" is considered bad practice.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-23T09:58:58.427

为了组合构建，您可以通过强制转换来检查对象是否支持特定的功能（接口）：

例如

```
// Try and cast
var disposable = ThisMeaning as IDisposable; 

// If the cast succeeded you can safely call the interface methods
if(disposable != null) 
    disposable.Dispose(); 
```

这意味着您在运行时发现实现，而不必在编译时知道它们，并且您的类型*不需要*实现`IDisposable`.

这满足了一次性要求，而不必知道它`IMean`的类型`Meaning`（您仍然可以使用`IMean`refs）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-23T12:32:00.840

*代码到接口而不是实现*- “接口”是一个通用术语，它并不意味着字面上的关键字`interface`。使用`abstract`类遵守原则。如果您需要一些实施，也许会更好。此外，子类总是可以`interface`根据需要实现 s。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T09:55:15.717

在这种情况下，您的替代方案似乎有点人为。让 IMean “实现” IDisposable。针对类进行编程并非每次都不好，我取决于情况。*

# google-maps - 如何在谷歌地图事件中访问这个对象

> ID：16166167
> 
> 赞同：1
> 
> 时间：2013-04-23T09:48:09.457
> 
> 标签：google-maps, google-maps-api-3

我正在从 Google Maps V2 升级到 V3。我被这个功能困住了。在添加事件侦听器时，我必须将 this 对象传递给函数。我无法做到这一点。

例子：

```
Namespace.mapWrapper.prototype.enableZoneDraw = function(callback) {
    if (!this.isDrawing) {
        //this.clickListener = GEvent.bind(this.api, 'click', this, this.toggleZoneDraw);
        this.clickListener = google.maps.event.addListener(this.api, 'click', this.toggleZoneDraw); //this.api is map object
        if (callback) {
            this.drawEndCallback = callback;
        }
    }
}

Namespace.mapWrapper.prototype.toggleZoneDraw = function(event) {
    // Start drawing zone
    if (!this.isDrawing) {
        if(event.latLng){
            this.zoneCenter = event.latLng;
            this.isDrawing = true;
            this.drawListener = google.maps.event.addListener(this.api, 'mousemove', another_function);
        }
    } else {
        this.isDrawing = false;
        google.maps.event.removeListener(this.drawListener);
        google.maps.event.removeListener(this.clickListener);
    }
} 
```

我想在toggleZoneDraw中访问更多的enableZoneDraw对象，但是在toggleZoneDraw中如果我访问这个对象，它指的是新对象。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:14:27.660

```
Namespace.mapWrapper.prototype.enableZoneDraw = function(callback) {
    if (!this.isDrawing) {
        //create a reference to the current this object
        var obj = this;
        this.clickListener = google.maps.event.addListener(
            this.api, //this.api is map object
            'click',
            //use a closure to maintain our reference to this object
            function (evt) {
                obj.toggleZoneDraw(evt);
            }
        );
        if (callback) {
            this.drawEndCallback = callback;
        }
    }
} 
```

# ruby - 关闭水豚的正确方法（使用 poltergeist/phantomjs）

> ID：16166169
> 
> 赞同：0
> 
> 时间：2013-04-23T09:48:12.833
> 
> 标签：ruby, tcp, capybara, phantomjs, poltergeist

我在我的 linux 服务器上通过 capybara 运行了很多工作。我正在使用 poltergeist phantomjs 驱动程序。过了一会儿，我收到了很多这些错误：

```
Errno::EMFILE Too many open files - socket(2) 
```

我看了看，`lsof`看起来我有很多这些：

```
ruby      32316   deployer  320u     IPv4  9893211        0t0      TCP localhost:55062 (LISTEN) 
```

现在我怀疑这可能是因为我没有正确关闭连接？

运行以下内容后终止的正确方法是什么：

```
Capybara.register_driver :poltergeist do |app|
  Capybara::Poltergeist::Driver.new(app, {:js_errors => false})
end

Capybara.current_driver = :poltergeist
Capybara.javascript_driver = :poltergeist
Capybara.run_server = false

@session = Capybara::Session.new(:poltergeist)
@session.visit('some_url') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:44:53.097

你可以运行`@session.driver.quit`。

# ios - 出现通话或热点状态栏时，我的应用程序布局被破坏

> ID：16166171
> 
> 赞同：5
> 
> 时间：2013-04-23T09:48:15.417
> 
> 标签：ios, objective-c, layout, autolayout, personal-hotspot

我在测试我的应用程序时遇到了一个问题，一切都运行良好，直到我打开个人热点并且蓝色条出现在顶部，所有标签和按钮都向下移动：

![在此处输入图像描述](https://i.stack.imgur.com/2yQzx.png)

**编辑：（23-4-2013）**

的代码`viewDidLoad`是：

```
- (void)viewDidLoad
{
    day1Times = [[NSMutableArray alloc] init];
    day2Times = [[NSMutableArray alloc] init];
    day3Times = [[NSMutableArray alloc] init];
    day4Times = [[NSMutableArray alloc] init];
    day5Times = [[NSMutableArray alloc] init];
    day6Times = [[NSMutableArray alloc] init];
    day7Times = [[NSMutableArray alloc] init];
    [self performSelector:@selector(sendTokenIDSelector) withObject:nil afterDelay:0.1];
    [self performSelectorInBackground:@selector(getTimes) withObject:nil];
    [super viewDidLoad];

} 
```

**编辑：（24-4-2013）**

约束配置如下：

![在此处输入图像描述](https://i.stack.imgur.com/Ehenf.png)

无论状态栏如何，如何修复它们的位置并使其保持不动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:01:27.857

问题是由于您的视图自动调整掩码。您应该将它们挂钩到边缘，以便在通知发生时它们不会拉伸。

使用工具 -> 尺寸检查器或 Command+3 打开尺寸检查器。

确保上边距的支柱已启用（由红色实线表示）。因此，即使超级视图发生更改，您也可以确保具有恒定的边距。

# cuda - 对 cuda 同步函数的调用是否会阻止 GPU 上的所有先前任务？

> ID：16166172
> 
> 赞同：3
> 
> 时间：2013-04-23T09:48:15.853
> 
> 标签：cuda

`cudaMalloc()`对同步 cuda 函数（例如，`cudaBindTextureToArray()`等）的调用是否会阻塞主机，直到设备上所有先前请求的任务都完成？或者它只会阻塞直到对该同步函数的调用完成？

换句话说，对同步 cuda 函数的调用是否与`cudaDeviceSynchronize()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:52:08.077

是的，它应该阻塞，直到所有前面的任务都完成。

您可以通过在 CPU 端定时执行语句来测试这一点：

放置一个像内核执行这样的异步任务，然后在它之后`cudaMemcpy()`分别执行一个同步任务和时间执行。如果你把它放在`cudaDeviceSynchronize()`内核之后，两个调用的时间都是正确的。但是如果你删除`cudaDeviceSynchronize()`调用，你会看到执行内核的时间似乎是附加在`cudaMemcpy()`调用上的。

# nsstring - 在 iOS 中处理特殊字符，如 (ö, Ä, é, ß)

> ID：16166176
> 
> 赞同：2
> 
> 时间：2013-04-23T09:48:38.913
> 
> 标签：nsstring, nsstringencoding

我正在从 URL 获取数据，并且该数据包含特殊字符，例如在 name 中`Désirée`。

我想在我的 TableView 单元格中显示它，但是当我显示它时，它看起来像这样：`DÃ¶sirÃ¶e`。

如何让它正确显示？

**获取数据**

```
NSString *jsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:URL] encoding: NSStringEncodingConversionAllowLossy error:nil];
SBJSON *parser = [[SBJSON alloc] init];
dictShow = [parser objectWithString:jsonString error:nil];
arr=[dictShow copy]; 
```

**在 TableView 中显示数据**

```
cell.textLabel.text = [arr objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T10:41:57.137

只是使用`NSUTF8StringEncoding instead`like `NSStringEncodingConversionAllowLossy`....

```
NSString *jsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:URL] encoding:NSStringEncodingConversionAllowLossy error:nil]; 
```

# wix - WiX Burn 重启后/强制重启继续安装

> ID：16166186
> 
> 赞同：6
> 
> 时间：2013-04-23T09:49:09.873
> 
> 标签：wix, installation, windows-xp, burn, wix3.7

我有一个使用 ManagedBootstrapperApplicationHost的 WiX [Burn自定义安装程序。](http://en.wikipedia.org/wiki/WiX#Burn)安装必备的 Microsoft [Windows Installer](http://en.wikipedia.org/wiki/Windows_Installer) 4.5 之一后，我使用以下命令强制重启 PC (Windows XP)：

```
<ExitCode Behavior="forceReboot"/> 
```

Bundle 链如下所示：

```
<Chain>
   <PackageGroupRef Id="WindowsInstaller45"/>
   <PackageGroupRef Id="Netfx2Full"/>
   <PackageGroupRef Id="Netfx4Full"/>
   <PackageGroupRef Id="CustomPkg"/>
   <PackageGroupRef Id="SQLExpress"/>
</Chain> 
```

重新启动后，我希望我的安装在此之后继续，但它实际上检测到安装并显示卸载选项。

在安装过程中发生重新启动时，如何检测未完成的安装？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T13:06:12.063

当 Bundle 在重新启动后再次启动时，`BOOTSTRAPPER_COMMAND`传递给您的`BootstrapperApplicationCreate`函数的结构包含一个`resumeType`将设置为`BOOTSTRAPPER_RESUME_TYPE_REBOOT`. 在托管代码中，`BootstrapperApplication`该类包含一个`Command`包含该`resume`字段的属性。

例如在托管代码中，要告诉您`BootstrapperApplication`在重新启动后启动，您可以检查：

```
 if (BootstrapperApplication.Command.resume == ResumeType.Reboot)
 {
    // started after restart, go straight to Detect->Plan->Apply to finish the
    // previous operation. BootstrapperApplication.Command.action will tell us
    // the action to complete.
 }
 else
 {
    // started normally, show typical UI scenarios.
 } 
```

# jsf - 是否可以创建一个包含两个目标的选项列表？

> ID：16166194
> 
> 赞同：3
> 
> 时间：2013-04-23T09:49:37.187
> 
> 标签：jsf, primefaces

我的要求是有一个所有用户的列表框和两个列表框（发送到，发送抄送），以便我可以从用户列表中拖放“收件人”和“抄送”所以我想知道是否有可能一个有两个目标的选择列表，如果没有，那么如何完成这个要求？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T05:44:25.120

为什么不利用 primefaces Datatable 的 droppable 功能呢？在表单左侧有一个包含用户列表的数据表，在右侧有两个数据表用于“To”和“CC”。

```
 http://www.primefaces.org/showcase/ui/dndTable.jsf 
```

# php - 错误 403 localhost Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7

> ID：16166196
> 
> 赞同：-2
> 
> 时间：2013-04-23T09:49:43.687
> 
> 标签：php

请帮忙！尝试登录时出现以下错误：

**禁止访问！**

您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。

如果您认为这是服务器错误，请联系网站管理员。

**错误 403**

本地主机 *Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7*

我的 login.php 代码如下：

```
<?php
session_start();
require("config.php");
require("functions.php");
$db = mysql_connect($localhost, $dbuser, $dbpassword);
mysql_select_db($dbdatabase, $db);
if(isset($_POST['submit'])) {

$sql = "SELECT * FROM users WHERE username = '" . $_POST['username'] . "' AND password     = '" . $_POST['password'] . "';";
$result = mysql_query($sql);
$numrows = mysql_num_rows($result);
if($numrows == 1) {
$row = mysql_fetch_assoc($result);
if($row['active'] == 1) {
session_register("USERNAME");
session_register("USERID");
$_SESSION['USERNAME'] = $row['username'];
$_SESSION['USERID'] = $row['id'];
switch($_GET['ref']) {
case "addbid":
header("Location: " . $config_basedir
. "/itemdetails.php?id=" . $_GET['id'] . "#bidbox");
break;
case "newitem":
header("Location: " . $config_basedir . "/newitem.php");
break;
case "images":
header("Location: " . $config_basedir
. "/addimages.php?id=" . $_GET['id']);
break;
default:
header("Location: " . $config_basedir);
break;
}
}
else {
require("header.php");
echo "This account is not verified yet. You were
emailed a link to verify the account. Please click on the
link in the email to continue.";
}
}
else {
header("Location: " . $config_basedir . "/login.php?error=1");
}
}
else {
require("header.php");
echo "<h1>Login</h1>";

if(isset($_GET['error'])) {
echo "Incorrect login, please try again!";
}
?>
<form action="<?php echo
pf_script_with_get($SCRIPT_NAME); ?>" method="post">
<table>
<tr>
<td>Username</td>
<td><input type="text" name="username"></td>
</tr>
<tr>
<td>Password</td>
<td><input type="password" name="password"></td>
</tr>
<tr>
<td></td>
<td><input type="submit" name="submit" value="Login!"></td>
</tr>
</table>
</form>
Don't have an account? Go and <a href="register.php">Register</a>!
<?php
}
require("footer.php");
?> 
```

在遵循本网站上关于其他问题的一些建议后，我更改了 httpd.conf 中的代码，如下所示：

```
<Directory />
    AllowOverride All
     Require all denied
</Directory> 
```

并且：

```
<Directory "C:/xampp/cgi-bin">
    Allow from all
    AllowOverride None
    Options None
    Require all granted
</Directory> 
```

数据库中的用户表：

id int (11) AUTO_INCREMENT 主用户名 varchar(10) latin1_swedish-ci 密码 varchar(10) latin1_swedish-ci email varchar(100) latin1_swedish-ci verifystring varchar(20) latin1_swedish-ci active tinyint(4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:09:13.070

也许您的`login`进程`register`尝试通过 SSL 连接进行处理，但您没有启用 SSL 连接。如果您使用脚本包。转到管理面板并禁用 SSL 连接。

# javascript - 单击时调用两个函数并返回 false

> ID：16166199
> 
> 赞同：0
> 
> 时间：2013-04-23T09:49:59.903
> 
> 标签：javascript

我的代码是这个

```
<script>
 function a(){
  var num = $('#mobile_number).val();
  if !(isNAN(num)){
    alert("Integer")
    return false;
  }
 function b(){
  var addr = $('#addr).val();
  if(addr==""){
   return false;
  }
 }
}
</script>
<form>
 name:<input type="text" id="mobile_number"/>
 Address:<input type="text" id="addr"/>
 <input type="submit" onclick="a();return false;b();return false;"
</form> 
```

但是当我输入错误的输入时它会提交值请解释我如何在单击时调用并返回两个函数，如果我输入错误的输入则返回谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:54:25.880

`return false`如果其中之一`a`或`b`返回 false ，您需要做什么。

解决方案是返回and的`logical and`值。`a()``b()`

```
<input type="submit" onclick="return a() && b()" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:51:31.167

尝试

```
onclick="return a();"  

 function a(){
      var num = $('#mobile_number').val();
      if !(isNAN(num)){  
        alert("not a number");        
        return false;
      } 
      var addr = $('#addr').val();
      if(addr==""){
       alert("Address Empty");    
       return false;
      }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:52:08.927

```
function validate() {
    return a() && b();
}

onClick="validate();" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:51:39.397

试试这个

```
<form onSubmit="return a(); return b();">
    name:<input type="text" id="mobile_number"/>
    Address:<input type="text" id="addr"/>
    <input type="submit">
</form> 
```

a 和 b 中的 return false 将阻止表单提交。

更好的是..使验证成为一项功能

```
<script>
    function validate() {
        var num = $('#mobile_number).val();
        if !(isNAN(num)){
            alert("Integer")
            return false;
        }
        var addr = $('#addr).val();
        if(addr==""){
            return false;
        }
    }
</script>

<form onSubmit="return validate();"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:55:47.040

每当您单击表单上的提交按钮时，它将始终提交表单。要在表单提交上调用 js 函数，请在表单标记中使用 OnSubmit，例如

这样每当点击提交按钮时，它首先会调用这两个函数，如果找到了，就可以使用 $("#form_id").submit() 提交表单。

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T09:59:59.893

[在这里检查](http://jsbin.com/akebod/1/)

```
function a(){
  console.log("a");
}

function b(){
  console.log("b");
}

function callBoth(fn1, fn2) {
  fn1(); 
  fn2();

  return result; 
}

callBoth(a, b); 
```

# java - 单击按钮时在另一个内包含一个 jsp

> ID：16166203
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:50:05.107
> 
> 标签：java, javascript, jquery, jsp

我有一个注销按钮。单击它后，我想显示一个页面confirmlogout.jsp，然后根据用户的响应，用户必须注销或留在那里。

我的代码：

```
<span class="inlayField2">
    <s:a href="#" cssClass="planTabHeader" id="logoutId"> <img src="../../KY/images/common/header/lock.png" alt="logout" style="border: none;background-color: transparent;" /> &nbsp;Log out</s:a></span>
    </s:form>

<div id="confirmPopup" style="display:none;">
      <%@ include file="/planmanagement/planSummary/ConfirmationPopup.jsp" %>
    </div>

$('#logoutId').click(function(event) {
$('#confirmPopup').css('display','block');
}); 
```

我的问题是加载包含注销的页面时，即使我设置了 display:none，也会显示确认popup.jsp。当我点击注销时，确认弹出窗口没有出现。请帮我解决这个问题。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:55:40.150

您能否确认调用了事件处理程序并且正确的元素设置为可见？

按下 F12 时，您可以在 firefox（最好使用 firebug）或 chrome 中看到控制台消息

```
$('#logoutId').click(function(event) {
  console.log("logout clicked");
  console.log("showing element:",$('#confirmPopup'));
  $('#confirmPopup').show();
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T09:53:42.453

你可以试试这个：

```
<div id="confirmPopup" style="display:none;">
<script>
    $('#confirmPopup').click(function(){
    document.write('<%@ include file="/planmanagement/planSummary/ConfirmationPopup.jsp" %>');
    }
</script>
 </div> 
```

# html - HTML5图像和文本不在同一个地方倾斜

> ID：16166209
> 
> 赞同：0
> 
> 时间：2013-04-23T09:50:27.627
> 
> 标签：html, xhtml, tags

我正在学习 HTML5，我需要一些文本和图像。图像应该出现在左侧，文本应该出现在中心。我想要做的是我创建了一个 div 布局，我在其中放置了图像和文本，但问题是文本位于中心但下降到图像，而不是图像的同一侧..

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div id="header" style="height:110px;background-color:#383838;">
<img src="logo2.jpg" alt="AB" ></img>
<h1 style="text-align:center">A</h1>
<h2 style="text-align:center">B</h1>
</div>
</body>
</html> 
```

jsFiddle 代码[http://jsfiddle.net/EVvG4/](http://jsfiddle.net/EVvG4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:18:07.413

自己试一下，我不能用那个页面...

```
<!DOCTYPE html>
<div id="header" style="height:110px; width: 1024px; background-color:#383838; margin: 0 auto;">

<div id="img-container" style="position: absolute;">
    <img src="logo2.jpg" alt="AB" style=" width: 100px; margin: 0 auto;" />
</div>
<div id="both-container" style="width: 500px; margin: 0 auto;">
<div id="text-container" style="position: absolute;">
    <h1 style="text-align: center">A</h1>
    <h2 style="text-align:center">B</h2>
</div>
</div>
</div> 
```

对于标题，如果要将其浮动在中心：

```
.header
{
    (fixed width) width: 1024px;
     margin: 0 auto;
} 
```

然后，如果你想在其中浮动不同的东西，你有几种方法：

1.  使用**浮动：右/左**样式
2.  使用`div positions`：**位置：绝对/相对...**

定位选项：[学习 CSS 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

# android - Google Maps android 中的错误“android 无法加载地图。无法联系 Google 服务器。”

> ID：16166214
> 
> 赞同：5
> 
> 时间：2013-04-23T09:50:35.773
> 
> 标签：android, google-maps

我正在尝试在我的 android 应用程序中实现谷歌地图，但我遇到了一个错误“ `android Failed to load map. Could not contact Google servers`。” 我已经包含谷歌播放库，使用 SHA1 证书指纹获取密钥。我得到了 SHA1 证书指纹：

```
 sudo keytool -v -list -alias androiddebugkey \-keystore /home/.android/debug.keystore 
```

我根据[这个管理我的清单文件](https://stackoverflow.com/questions/15598596/google-maps-api-v2-failed-to-load-map-could-not-contact-google-servers-even)

现在我无法找到这个错误的原因..任何建议都非常感谢...

*   我已经看到有关 stackoverflow 的问题，但没有得到任何解决方案！

**编辑**：我的清单文件权限为：

```
<permission
    android:name="PAKG_NAME.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="PAKG_NAME.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.com.google.android.providers.gsf.permission.READ_GSERVICES" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

.....................

      <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="MY_KEY" /> 
```

我的布局 xml 的片段为：

```
 <fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="100dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            class="com.google.android.gms.maps.SupportMapFragment" /> 
```

日志输出：

```
 E/Google Maps Android API(31478): Failed to load map.  Could not contact Google servers. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:44:50.133

您确定您启用了“Google Maps Android API v2”而不是“Google Maps API v2”吗？更改后，删除并重新创建 API 密钥。这对我有用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T20:21:44.313

尝试右键单击您的项目并选择 Properties > Android > 并在“Project Build target”中选择 Google API。这对我有用:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T15:08:18.700

如果您确定您的 API 密钥，您应该从手机中卸载程序并重新安装。它对我有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:58:14.357

让你在控制台中启用 Google android map API v2 检查它是否正确。我认为你启用了谷歌地图 v2 请求失败的原因......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-14T10:11:45.180

您应该检查同一个项目是否有重复的 API_KEY。如您所知，我们将使用 sha1 密钥和 android 项目名称来获取 API 密钥。如果您尝试使用相同的 sha1;android_project_name 对来获取 API 密钥，Google 将为您提供另一个 API 密钥。所以它是重复的。如果您在项目中删除较新的并使用较旧的，它将解决您的问题。至少我希望:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-29T05:40:43.580

我在重构和更改我的项目包标识符时遇到了这个问题。如果这是您的情况，您将不得不在 Google Developer Console 上创建一个新项目并再次链接到您的项目。出于某种原因，如果同一应用更改了 ID，Google 会阻止来自同一应用的请求。

# jquery - Jquery Slider 像 Power Point 幻灯片

> ID：16166217
> 
> 赞同：2
> 
> 时间：2013-04-23T09:50:47.643
> 
> 标签：jquery

我正在做一个项目，我必须在其中实现闪存卡，用户可以添加图像或文本，然后像 power point 演示一样在线播放它们例如像[这样](http://quizlet.com/1890295/unit-15-part-2-flash-cards/)

我使用过 Jquery Cycle 插件，但它没有播放像这个链接这样的文件，有人能建议我如何实现这个功能吗？下面是我的代码

```
<span id="prev">Prev</span></a> <a href="javascript:void(0);"><span id="next">Next</span></a>
<div class="pics" id="slideshow">

                    @foreach (var item in Model.CardContent)
                    {
                        if (item.ImagePath != null)
                        {
                        <img src="../../FlashCardsImages/@item.ImagePath" width="200" height="200" />
                        }
                        <p>@item.Answer</p>
                    }            
            </div>

  $('#slideshowsssss').cycle({ fx: 'scrollHorz', timeout: 0, prev: '#prev', next: '#next' }); 
```

问候

# linux - 如何使用 VirtualBox 启动 CDLinux 映像？

> ID：16166218
> 
> 赞同：0
> 
> 时间：2013-04-23T09:50:49.237
> 
> 标签：linux, terminal, virtualbox, boot

我不确定 stackoverflow 是否是提出这个问题的最佳场所，但值得一试。

我正在尝试启动**CDLinux**，这是一个基于 linux 的操作系统。**我已经使用Linux Live USB Creator**将它安装在闪存驱动器上。我可以通过重新启动计算机来启动它，也可以使用 VirtualBox 启动它。（我正在运行 Windows 7）

问题是，当我尝试启动它（无论哪种方式）时，我应该访问一个可以选择我的语言的屏幕，然后操作系统应该启动。
但相反，我可以访问命令终端。

每行都以`grub>` 如果我键入“boot”开头，输出是`Error 8 : Kernel must be loaded before booting` 我应该怎么做才能启动我的 CDLinux 操作系统？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:32:31.473

确切地说，控制权是从 BIOS 转移到您的内核代码，但控制权仍然在 grub 之下。这意味着 grub 无法找到可加载的内核映像。所以你需要做的是，你需要告诉 grub 有效的内核映像驻留在哪里。

请参阅 grub 手册以加载确切的内核映像。前任

[http://www.centos.org/docs/4/html/rhel-rg-en-4/s1-grub-commands.html](http://www.centos.org/docs/4/html/rhel-rg-en-4/s1-grub-commands.html)

# sql - 获取sql server中每一行的MAX和MIN值

> ID：16166225
> 
> 赞同：1
> 
> 时间：2013-04-23T09:51:00.563
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一组带有值的行

![在此处输入图像描述](https://i.stack.imgur.com/czgnW.png)

我想要以下带有单独最大值和最小值的输出

![在此处输入图像描述](https://i.stack.imgur.com/6SUJZ.jpg)

对不起可怜的prntsceen。我不知道如何在stackoverflow中绘制表格。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T10:10:20.743

```
select value1, value2, value3, value4,
       [min]=(select min(value) from (
              select value1 union all
              select value2 union all
              select value3 union all
              select value4) X(value)),
       [max]=(select max(value) from (
              select value1 union all
              select value2 union all
              select value3 union all
              select value4) Y(value))
  from tbl; 
```

要将 NULL 识别为**最小值**，请改用以下内容

```
select value1, value2, value3, value4,
       [min]=(select TOP(1) value from (
                 select value1 union all
                 select value2 union all
                 select value3 union all
                 select value4) X(value)
              ORDER BY value ASC),
       [max]=(select TOP(1) value from (
                 select value1 union all
                 select value2 union all
                 select value3 union all
                 select value4) X(value)
              ORDER BY value DESC)
  from tbl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:23:37.623

试试这个——

```
DECLARE @temp TABLE
(
      Value1 INT
    , Value2 INT
    , Value3 INT
    , Value4 INT
)

INSERT INTO @temp (Value1, Value2, Value3, Value4)
VALUES 
    (NULL, 1, 1, NULL),
    (NULL, 1, 2, NULL),
    (NULL, 2, 2, NULL),
    (NULL, 2, 2, NULL),
    (1, 1, 1, 1),
    (2, 2, 1, 2),
    (1, 1, 1, NULL),
    (2, 2, 3, 2),
    (2, 2, 2, 2),
    (1, 1, 1, 1)

SELECT
      Value1
    , Value2
    , Value3
    , Value4
    , MinValue = (
        SELECT TOP 1 value 
        FROM (
            SELECT value = value1
              UNION
            SELECT value2
              UNION
            SELECT value3
              UNION
            SELECT value4
        ) mn
        ORDER BY value
    )
    , MaxValue = (
        SELECT MAX(value) 
        FROM (
            SELECT value = value1
              UNION
            SELECT value2
              UNION
            SELECT value3
              UNION
            SELECT value4
        ) mx
    )
FROM @temp 
```

结果窗口：

![教授](https://i.stack.imgur.com/nFbSf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:11:44.907

请试试：

```
declare @T table
(
  id int, 
  num1 int, 
  num2 int, 
  num3 int,  
  num4 int,   
  num5 int
)

insert into @T values
(1,     6,      51,      NULL,      99,      34),
(2,     222,    251,     24,     299,     234),
(3,     NULL,   NULL,    NULL,   NULL,    NULL)

select * From @T

SELECT id,
(SELECT 
(CASE WHEN (num1+num2+num3+num4+num5) IS NULL THEN NULL 
    ELSE MIN(v) end) 
FROM (VALUES (num1), 
            (num2), 
            (num3), 
            (num4), 
            (num5)) AS value(v)) as [MinVal],
(SELECT MAX(v) 
FROM (VALUES (num1), 
            (num2), 
            (num3), 
            (num4), 
            (num5)) AS value(v)) as [MaxVal]
FROM @T 
```

# perl - 在脚本的其他部分使用来自 foreach 循环的结果

> ID：16166238
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:51:42.430
> 
> 标签：perl

我在我的代码中使用了一个 foreach 循环

```
foreach $c1(sort {$a<=>$b} keys %info ) {
    print $c1, "\t", 
          join(',',@{$info{$c1}->{var1}}), "\t", 
          join(',',@{$info{$c1}->{var2}}), "\n";
} 
```

当我运行我的代码时，'foreach' 的输出会打印在屏幕上。

但是，我想在脚本的其他部分中使用“foreach”循环的结果。我怎样才能做到这一点？我应该在循环内还是之前分配一个变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:11:01.283

不完全清楚你在问什么，但如果你只是想保存你正在构建的字符串，这很简单：

```
 my $result = "";
    foreach $c1 (sort {$a <=> $b} keys %info) {
      $result .= $c1 . "\t" . 
        join(',',@{$info{$c1}->{var1}}) . "\t" . 
        join(',',@{$info{$c1}->{var2}}) . "\n";
    } 
```

然后您可以打印`$result`或将其发送到其他功能或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:12:56.007

我认为你可以使用这种东西。将结果推送到数组中。推（@array，$c1）；现在你可以在程序的任何地方使用@array。

# html - HTML 中的目录树结构

> ID：16166239
> 
> 赞同：0
> 
> 时间：2013-04-23T09:51:42.377
> 
> 标签：html, css

我正在尝试创建一个像 Eclipse 这样的在线工具。在左侧栏，我有一个项目浏览器，就像您在 Eclipse IDE 中找到的一样。我想在那个资源管理器栏上显示一个目录结构。我能够从我的 Java 代码中接收作为数组的目录结构。由于我不擅长 CSS，我无法在 HTML 中制作目录树的基本布局。如果有人能给我关于创建该目录结构的 css 的任何想法，我将使用 javascript 用我的数组元素填充树结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T16:25:22.107

可能对 user2110167 不再有用，但希望对其他人有用：

我很高兴地在不同的项目中使用了 Dynatree，它允许折叠/展开，而且总的来说非常精细和灵活。它是开源和 MIT 许可的。

您可以从[项目页面获取它或在](https://code.google.com/p/dynatree/)[示例页面](http://wwwendt.de/tech/dynatree/doc/samples.html)上探索它的功能。

# erlang - 寻找 Erlang SMPP 客户端

> ID：16166240
> 
> 赞同：8
> 
> 时间：2013-04-23T09:51:43.367
> 
> 标签：erlang, smpp

在我当前的项目中，我需要连接到 SMPP 服务器以传输 SMS。所以我正在寻找用 Erlang 编程语言编写的 SMPP 客户端。

我发现[OSERL](http://sourceforge.net/projects/oserl/)使用[CEAN](http://cean.process-one.net/)，但我猜这个项目已被弃用（最后更新：2011-05-25）。

有人可以建议我现代 SMPP 客户吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T09:39:39.917

可以在 GitHub 上找到两个声称支持 SMPP 3.4 的库，但它们似乎没有得到积极维护。

*   [Enrique Marcote Peña 的 Erlang SMPP](http://github.com/archaelus/oserl)
*   [Erlang 中的 smpp34 库。建立在 smpp34pdu PDU 解析库之上](http://github.com/essiene/smpp34)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-28T15:27:35.120

有支持 SMPP 5.0 的简单库。支持西里尔文字和 gsm 7 位扩展表。

[esmpp_lib](https://github.com/Alex-Zhuk/esmpp_lib)

# html - DOM 预填充了不在我的 HTML 源中的元素

> ID：16166248
> 
> 赞同：1
> 
> 时间：2013-04-23T09:52:01.833
> 
> 标签：html, dom

昨晚我在 Chrome 开发工具中发现了一个空项目，因为
我`source-code`只包含`doctype,html,head and body`标签，所以我的 DOM 以某种方式
预先填充了一些奇怪的元素。

![在此处输入图像描述](https://i.stack.imgur.com/ZWu73.jpg)

我的源代码如下所示：

```
<!DOCTYPE html>

<html>

    <head>
    </head>

    <body>
    </body>

</html> 
```

我已经尝试清除缓存，但它保持这种方式。看起来不错`Firefox`。有人可以解释发生了什么吗？这是 Chrome 的东西吗？我以前没注意过。。`Safari`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:54:13.870

您可能在 Chrome 中安装了[Orbvious Interest](https://chrome.google.com/webstore/detail/orbvious-interest/bkikpncfbjndhfkipijhdoddiadaipaa?hl=en)扩展程序。扩展可以添加 DOM 元素。

# php - PHP MySQL 从数据库推送和拉取

> ID：16166257
> 
> 赞同：3
> 
> 时间：2013-04-23T09:52:29.537
> 
> 标签：php, mysql, database, push, pull

我的 PHP 代码有问题。我在 MySQL 数据库中有一系列列，PotVal、Current、ID、kWh 和 costKwh。其中 ID 为 AUTO_INCREMENT，PotVal 和 Current 来自文本文件 - 它们工作正常并且可以正常存储数据。但是我想使用 PotVal，它实际上是感应到的功率，并使用 (PotVal*1)/(900) 将其转换为千瓦时（别担心，我知道它的 1000 通常不是 900） - 这也可以正常工作并输出实时数据，但是我试图将此值存储在我的 kWh 列中。接下来，我使用此 kWh 列使用 (kWh*18.56) 对每 kWh 的成本进行另一次计算。但是，由于没有在 kWh 列中存储数据，我得到 0.00 的输出，我无法纠正它！

总而言之，为什么我不能以 kWh 存储？而且我想将值显示到小数点后两位，但实际上显示到小数点后六位！

```
<?php 

header('Refresh: 1.5');

// Set relevent pseudo-variables
    $hostname = 'localhost';
    $username = 'root';
    $password = '';
    $table = 'received_data';
    $drop = 'DROP TABLE received_data';
    $iwemsdatafile = 'IWEMSData.txt';

// Connect to MySQL

    $dbconnect = mysql_connect($hostname, $username, $password)
        or die('Unable to connect to MySQL: ' . mysql_error());
    //  echo 'Connected to MySQL<br>';

    mysql_query($drop);

// Create database, table and columns

    $cdb = 'CREATE DATABASE IWEMS_Data';
    //  echo 'IWEMS_Data has been created<br /><hr />';

    $selectdb = mysql_select_db('IWEMSData',$dbconnect)
        or die('Could not select IWEMSData');
    //  echo 'Connected to IWEMSData database<br />';

    mysql_query($drop);

    $ctb = 'CREATE TABLE received_data
    (
    Current DECIMAL(30,2) NOT NULL,
    PotVal DECIMAL(30,2) NOT NULL,
    kWh DECIMAL(30,2) NOT NULL,
    costkWh DECIMAL(30,2) NOT NULL,
    ID BIGINT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(ID,PotVal,Current)
    )';

    mysql_query($ctb, $dbconnect);
    //  echo 'Received_Data Table has been created<br />';
    //  echo 'Current, PotVal and ID columns have been created<br /><hr />';

// Push IWEMSData.txt data into MySQL database

    mysql_query
    ('
    LOAD DATA LOCAL INFILE "IWEMSData.txt" 
    REPLACE INTO TABLE received_data 
    FIELDS TERMINATED BY " " 
    LINES TERMINATED BY "\\r\\n"
    (PotVal, Current)
    ;')
    or die('Error Loading Data File.<br>' . mysql_error());

// Pull IWEMSData from MySQL database

    $seldat = 'SELECT * FROM received_data ORDER BY ID DESC LIMIT 1';

    $data = mysql_query($seldat) 
        or die('Error retrieving data: ' . mysql_error());

// Display data on web browser

    while ($finalrow = mysql_fetch_array($data))
    {
        echo '<hr /> Apparent Power<br />';
        echo $finalrow['PotVal'];
        echo ' Watts';
        echo '<br /><hr />';
        echo 'Detected Current<br />';
        echo $finalrow['Current'];
        echo ' Amps';
        echo '<br /><hr />';
    }

// Display per kWh data on web browser

    $perkWh = 'SELECT *, (PotVal/900) AS kWh
    FROM received_data ORDER BY ID DESC LIMIT 1';

    $qperkWh =mysql_query($perkWh) or die('Error');

    while ($finalkWh = mysql_fetch_array($qperkWh))
    {
    echo 'kWh<br />';
    echo $finalkWh['kWh'];
    echo '<br /><hr />';
    }

// Display cost per kWh data on web browser

    $cperkWh = 'SELECT *, (kWh*18.67) AS costkWh
    FROM received_data ORDER BY ID DESC LIMIT 1';

    $cqperkWh =mysql_query($cperkWh) or die('Error');

    while ($cfinalkWh = mysql_fetch_array($cqperkWh))
    {
    echo 'Cost kWh<br />';
    echo $cfinalkWh['costkWh'];
    echo '<br /><hr />';
    }

// Close Database connection when complete

    mysql_close($dbconnect);
?> 
```

（我打赌这很简单......再次！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:16:18.110

```
$perkWh = 'SELECT *, (PotVal/900) AS kWh
FROM received_data ORDER BY ID DESC LIMIT 1'; 
```

我想你已经`kWh`在表中有一个列`received_data`，所以你不能命名`(PotVal/900)`为`kWh`

同样的`$cperkWh = 'SELECT *, (kWh*18.67) AS costkWh FROM received_data ORDER BY ID DESC LIMIT 1';` 问题`costkWh`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:25:40.940

我看到您的查询中有大写字母。当我处理这种类型的查询时，我记得使用大写查询时遇到了一些奇怪的问题。所以我真的建议你不要使用大写字母而只使用小写字母。

如果你想使用大写字母，请务必将所有数据库、列、表名括在引号中，我的意思是使用 like

```
`kWh` 
```

并检查问题是否仍然存在。这可能不是问题，但可能是问题。:)

一个建议是不要使用`mysql*`它们可能会被弃用的功能，并且它们会面临许多安全问题，例如注入。改为使用`PDO`。您可以在 PHP 文档中查看文档。

# java - Selenium WebDriver 如何解决陈旧元素引用异常？

> ID：16166261
> 
> 赞同：41
> 
> 时间：2013-04-23T09:52:33.543
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我在 Selenium 2 Web 驱动程序测试中有以下代码，它在我调试时有效，但在我在构建中运行它时大部分时间都失败了。我知道这一定与页面未刷新的方式有关，但不知道如何解决它，因此任何关于我做错了什么的指针都值得赞赏。我使用 JSF primefaces 作为我的 Web 应用程序框架。当我单击添加新链接时，会出现一个弹出对话框，其中包含一个输入框，我可以在其中输入日期，然后单击保存。在让输入元素输入文本时，我得到了一个陈旧的元素引用异常。

提前致谢

```
import static org.junit.Assert.assertEquals;

 import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.StaleElementReferenceException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;

public class EnterActiveSubmissionIntegrationTest {
Map<String, Map<String, String>> tableData = new HashMap<String, Map<String, String>>();

@Test
public void testEnterActiveSubmission() throws Exception {
    // Create a new instance of the Firefox driver
    // Notice that the remainder of the code relies on the interface, 
    // not the implementation.
    System.setProperty("webdriver.chrome.driver", "C:/apps/chromedriver.exe");
    WebDriver driver = new ChromeDriver();

    // And now use this to visit Google
    driver.get("http://localhost:8080/strfingerprinting");
    // Alternatively the same thing can be done like this
    // driver.navigate().to("http://www.google.com");

    // Find the text input element by its name
    WebElement element = driver.findElement(By.linkText("Manage Submissions"));
    element.click();
    parseTableData(driver, "form:submissionDataTable_data", 1);
    assertEquals(tableData.get("form:submissionDataTable_data").get("12"), "Archived");

    WebElement newElement = driver.findElement(By.linkText("Add new"));
    newElement.click();

    WebDriverWait wait = new WebDriverWait(driver,10);
    wait.until(new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver driver) {
            WebElement button = driver.findElement(By
                    .name("createForm:dateInput_input"));

            if (button.isDisplayed())
                return true;
            else
                return false;

        }
    });

    WebElement textElement = driver.findElement(By.name("createForm:dateInput_input"));
    textElement.sendKeys("24/04/2013");
    WebElement saveElement = driver.findElement(By.name("createForm:saveButton"));
    saveElement.click();

    driver.navigate().refresh();

    parseTableData(driver, "form:submissionDataTable_data", 2);

    //Close the browser
    driver.quit();
}

private void parseTableData(WebDriver driver, String id, int expectedRows) {
    // Check the title of the page or expected element on page
    WebElement subTableElement = driver.findElement(By.id(id));
    List<WebElement> tr_collection=subTableElement.findElements(By.xpath("id('"+ id + "')/tr"));

    assertEquals("incorrect number of rows returned", expectedRows, tr_collection.size());
    int row_num,col_num;
    row_num=1;

    if(tableData.get(id) == null) {
        tableData.put(id, new HashMap<String, String>());
    }
    Map<String, String> subTable = tableData.get(id);
    for(WebElement trElement : tr_collection)
    {
        List<WebElement> td_collection=trElement.findElements(By.xpath("td"));
        col_num=1;
        for(WebElement tdElement : td_collection)
        {
            subTable.put(row_num + "" + col_num, tdElement.getText());
            col_num++;
        }
        row_num++;
    }
}
} 
```

当我运行它时，我得到以下异常，但它可能发生在

```
WebElement textElement = driver.findElement(By.name("createForm:dateInput_input")); 
```

或者

```
if (button.isDisplayed()) 
```

异常跟踪

```
org.openqa.selenium.StaleElementReferenceException: stale element reference: element is not attached to the page document
(Session info: chrome=26.0.1410.64)
  (Driver info: chromedriver=0.8,platform=Windows NT 6.0 SP2 x86) (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 56 milliseconds
For documentation on this error, please visit:        http://seleniumhq.org/exceptions/stale_element_reference.html
Build info: version: '2.32.0', revision: '6c40c187d01409a5dc3b7f8251859150c8af0bcb', time: '2013-04-09 10:39:28'
System info: os.name: 'Windows Vista', os.arch: 'x86', os.version: '6.0', java.version: '1.6.0_10'
Session ID: 784c53b99ad83c44d089fd04e9a42904
Driver info: org.openqa.selenium.chrome.ChromeDriver
Capabilities [{platform=XP, acceptSslCerts=true, javascriptEnabled=true,   browserName=chrome, rotatable=false, driverVersion=0.8, locationContextEnabled=true,  version=26.0.1410.64, cssSelectorsEnabled=true, databaseEnabled=true, handlesAlerts=true,  browserConnectionEnabled=false, nativeEvents=true, webStorageEnabled=true,   applicationCacheEnabled=false, takesScreenshot=true}]
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at  sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at  sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:554)
at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:268)
at org.openqa.selenium.remote.RemoteWebElement.isDisplayed(RemoteWebElement.java:320)
at com.integration.web.EnterActiveSubmissionIntegrationTest$1.apply(EnterActiveSubmissionIntegrationTest.java:58)
at com.integration.web.EnterActiveSubmissionIntegrationTest$1.apply(EnterActiveSubmissionIntegrationTest.java:1)
at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:208)
at com.integration.web.EnterActiveSubmissionIntegrationTest.testEnterActiveSubmission(EnterActiveSubmissionIntegrationTest.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-26T20:31:11.607

首先让我们弄清楚 WebElement 是什么。

WebElement 是对 DOM 中元素的引用。

当您正在交互的元素被销毁然后重新创建时，将引发 StaleElementException。如今，大多数复杂的网页都会在用户与其交互时动态移动，这需要销毁和重新创建 DOM 中的元素。

发生这种情况时，您之前拥有的对 DOM 中元素的引用变得陈旧，并且您不再能够使用此引用与 DOM 中的元素进行交互。发生这种情况时，您将需要刷新您的参考，或者在现实世界中再次找到该元素。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-04T15:54:55.293

这不是问题。如果将 .findElement 调用包装在 try-catch 块中并捕获 StaleElementReferenceException ，则可以根据需要循环并重试多次，直到成功。

下面是[我写的一些例子](https://gist.github.com/djangofan/5112655)。

[Selenide](https://github.com/codeborne/selenide)项目的另一个例子：

```
public static final Condition hidden = new Condition("hidden", true) {
    @Override
    public boolean apply(WebElement element) {
      try {
        return !element.isDisplayed();
      } catch (StaleElementReferenceException elementHasDisappeared) {
        return true;
      }
    }
  }; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-03-19T10:18:08.683

发生在我身上的是 webdriver 会找到对 DOM 元素的引用，然后在获得该引用后的某个时间点，javascript 会删除该元素并重新添加它（因为页面基本上正在重绘）。

尝试这个。找出导致 dom 元素从 DOM 中删除的操作。在我的例子中，它是一个异步 ajax 调用，当 ajax 调用完成时，该元素正在从 DOM 中删除。在该操作之后，等待元素过时：

```
... do a thing, possibly async, that should remove the element from the DOM ...
wait.until(ExpectedConditions.stalenessOf(theElement)); 
```

此时，您可以确定该元素现在已过时。所以，下次你引用该元素时，再次等待，这一次等待它被重新添加到 DOM 中：

```
wait.until(ExpectedConditions.presenceOfElementLocated(By.id("whatever"))) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-13T09:00:46.593

**陈旧元素的两个原因**

1.  在 WebDriver 中作为 WebElement 引用的网页上找到的元素，然后 DOM 发生变化（可能是由于 JavaScript 函数），WebElement 变得陈旧。

2.  该元素已被完全删除。

当您尝试与过时的 WebElement [上述任何情况] 进行交互时，将引发 StaleElementException。

**如何避免/解决陈旧异常？**

1.  **将定位器存储到元素而不是引用**

> ```
> driver = webdriver.Firefox();
> driver.get("http://www.github.com");
> search_input = lambda: driver.find_element_by_name('q');
> search_input().send_keys('hello world\n'); 
> time.sleep(5);
> 
> search_input().send_keys('hello frank\n') // no stale element exception 
> ```

2.  **利用所使用的 JS 库中的钩子**

> ```
>  # Using Jquery queue to get animation queue length.
>     animationQueueIs = """
>     return $.queue( $("#%s")[0], "fx").length;
>     """ % element_id
>     wait_until(lambda: self.driver.execute_script(animationQueueIs)==0) 
> ```

3.  **将您的操作转移到 JavaScript 注入中**

> ```
>  self.driver.execute_script("$(\"li:contains('Narendra')\").click()"); 
> ```

4.  **主动等待元素过时**

> ```
>  # Wait till the element goes stale, this means the list has updated
>   wait_until(lambda: is_element_stale(old_link_reference)) 
> ```

该解决方案对我有用，如果您有任何其他适用于您的方案，我在这里提到过，然后在下面发表评论

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-02-11T18:20:39.363

尝试等待这样的元素：

```
// Waiting 30 seconds for an element to be present on the page, checking
// for its presence once every 5 seconds.
Wait<WebDriver> stubbornWait = new FluentWait<WebDriver>(driver)
    .withTimeout(30, SECONDS)
    .pollingEvery(5, SECONDS)
    .ignoring(NoSuchElementException.class)
    .ignoring(StaleElementReferenceException.class);

WebElement foo = stubbornWait.until(new Function<WebDriver, WebElement>() {
    public WebElement apply(WebDriver driver) {
        return driver.findElement(By.id("foo"));
    }
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-23T11:36:16.567

**StaleElementReferenceException**是由于 findelement 方法访问的元素不可用。

您需要在对元素执行任何操作之前确保（如果您对该元素的可用性有疑问）

**等待元素的可见性**

```
(new WebDriverWait(driver, 10)).until(new ExpectedCondition()
    {
           public Boolean apply(WebDriver d) {
              return d.findElement(By.name("createForm:dateInput_input")).isDisplayed();
     }}); 
```

否则使用[此](http://santoshsarmajv.blogspot.in/2012/07/iselementpresent.html)逻辑来验证元素是否存在。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-25T13:45:09.587

使用 Selenium 提供的预期条件等待 WebElement。

在您调试时，客户端并不像您只运行单元测试或 maven 构建那样快。这意味着在调试模式下，客户端有更多时间准备元素，但如果构建运行相同的代码，他会更快，并且您要查找的 WebElement 在页面的 DOM 中可能不可见。

相信我，我遇到了同样的问题。

例如：

```
inClient.waitUntil(ExpectedConditions.visibilityOf(YourElement,2000)) 
```

这个简单的方法调用在他调用 2 秒后等待您的 WebElement 在 DOM 上的可见性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-01T20:33:42.473

我建议不要将`@CachelookUp`Selenium WebDriver 用于`StaleElementReferenceException`.

如果您正在使用`@FindBy`annotation 并且 have `@CacheLookUp`，只需将其注释掉并检查。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-05T23:55:29.913

我已经用下面的代码解决了这个问题。

```
public WebElement waitForElement(final By findBy, final int waitTime) {
    Wait<AppiumDriver> wait = new FluentWait<>((AppiumDriver) driver)
            .withTimeout(waitTime, TimeUnit.SECONDS)
            .pollingEvery(POLL_TIME, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class,StaleElementReferenceException.class);

    WebElement webElement = wait.until(new Function<AppiumDriver, WebElement>() {
        @Override
        public WebElement apply(AppiumDriver driver) {
            System.out.println("Trying to find element " + findBy.toString());                
            WebElement element = driver.findElement(findBy);
            return element;
        }
    });
    return webElement;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-25T13:58:05.387

发生陈旧元素异常时！！

当支持这些文本框/按钮/链接的库发生更改时，可能会发生陈旧元素异常，这意味着元素相同，但网站中的引用现在已更改，而不会影响定位器。因此，我们存储在缓存中的引用（包括库引用）现在已经过时或陈旧，因为页面已经用更新的库进行了刷新。

```
for(int j=0; j<5;j++)
try {
    WebElement elementName=driver.findElement(By.name(“createForm:dateInput_input”));
    break;
} catch(StaleElementReferenceException e){
e.toString();
System.out.println(“Stale element error, trying ::  ” + e.getMessage());
}
elementName.sendKeys(“20/06/2018”); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-08-05T01:46:23.930

这对我有用（来源[在这里](http://yesterdayseggs.com/gwt-selenium-webdriver-and-the-dreaded-staleelementreferenceexception/)）：

```
 /**
     * Attempts to click on an element multiple times (to avoid stale element
     * exceptions caused by rapid DOM refreshes)
     *
     * @param d
     *            The WebDriver
     * @param by
     *            By element locator
     */
    public static void dependableClick(WebDriver d, By by)
    {
        final int MAXIMUM_WAIT_TIME = 10;
        final int MAX_STALE_ELEMENT_RETRIES = 5;

        WebDriverWait wait = new WebDriverWait(d, MAXIMUM_WAIT_TIME);
        int retries = 0;
        while (true)
        {
            try
            {
                wait.until(ExpectedConditions.elementToBeClickable(by)).click();

                return;
            }
            catch (StaleElementReferenceException e)
            {
                if (retries < MAX_STALE_ELEMENT_RETRIES)
                {
                    retries++;
                    continue;
                }
                else
                {
                    throw e;
                }
            }
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-21T08:14:35.537

WebDriver 必须等到元素被定位并且超时是在 10 秒之后。

```
WebElement myDynamicElement1 = new WebDriverWait(driver, 10).until(
    ExpectedConditions.presenceOfElementLocated(
        By.name("createForm:dateInput_input")
    )
); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-15T17:48:45.190

我发现避免过时元素引用的最佳方法是不使用 PageFactory，而是存储定位器（即按元素）。

```
public class WebDriverFactory {

    // if you want to multithread tests, use a ThreadLocal<WebDriver> 
    // instead.
    // This also makes it so you don't have to pass around WebDriver objects
    // when instantiating new Page classes
    private static WebDriver driver = null;

    public static WebDriver getDriver() {
       return driver;
    }
    public static void setDriver(WebDriver browser)  {
       driver = browser;
    }       
}

// class to let me avoid typing out the lengthy driver.findElement(s) so 
// much
public Abstract class PageBase {
    private WebDriver driver = WebDriverFactory.getDriver();

    // using var args to let you easily chain locators
    protected By getBy(By... locator) {
      return new ByChained(locator);
    }

    protected WebElement find(By... locators) {
      return driver.findElement(getBy(locators));
    }

    protected List<WebElement> findEm(By... locators) {
      return driver.findElements(getBy(locators));
    }

    protected Select select(By... locators) {
      return new Select(getBy(locators));
    }
}

public class somePage extends PageBase {
  private static WebDriver driver = WebDriverFactory.getDriver();
  private static final By buttonBy = By.cssSelector(".btn-primary");

  public void clickButton() {
     WebDriverWait wait = new WebDriverWait(driver, 10);
     wait.until(ExpectedConditions.elementToBeClickable(buttonBy));
     find(buttonBy).click();
  }

} 
```

我有一个充满了我使用的静态 WebDriverWait 方法的类。而且我不记得上面使用 WebDriver wait 是否会处理 StaleElement 异常。如果没有，您可以像 DjangoFan 的回答那样使用流利的等待。但是我所展示的原理将起作用（即使与 WebDriverWait 的那条特定线爆炸了。

所以 tldr;

1.  使用定位器，以及 WebDriverWait/Fluent 等待/自己重新定位元素的组合，因此如果您的元素过时，您可以重新定位它而无需在`@FindBy`（对于 pagefactory 初始化的元素）中复制定位器，因为没有 WebElement.relocate （） 方法。
2.  为了简化生活，有一个带有用于定位元素/元素列表的便捷方法的 Abstract BasePage 类。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-04T16:03:20.863

就我而言，此错误是由于我在

```
def parse(self, response): 
```

使用 Selenium 和 Scrapy 组合时的方法，例如：

不起作用：

```
class MySpider(scrapy.Spider):
     action_chains = ActionChains(self.driver) 
```

移动`action_chains = ActionChains(self.driver)`内部`def parse(self, response):`解决了问题，例如：

作品：

```
def parse(self, response):
     self.driver.get(response.url)
     action_chains = ActionChains(self.driver) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-03T13:38:39.390

在对问题进行深入调查后，我发现选择仅为 Bootstrap 添加的 DIV 元素时发生错误。Chrome 浏览器删除此类 DIVS 并发生错误。降级并选择真正的元素来修复错误就足够了。例如，我的模态对话框具有以下结构：

```
<div class="modal-content" uib-modal-transclude="">
    <div class="modal-header">
        ...
    </div>
    <div class="modal-body">
        <form class="form-horizontal ...">
            ...
        </form>
    <div>
<div> 
```

选择**div class="modal-body"**会产生错误，选择**form ...**会正常工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-12T19:50:46.987

在 Selenium 3 中，您可以使用[ExpectedConditions.refreshed(your condition)](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#refreshed(org.openqa.selenium.support.ui.ExpectedCondition))。

它将处理 StaleElementReferenceException 并重试该条件。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-10-25T14:23:01.077

我尝试了上述许多建议，但最简单的一个有效。在我的情况下，是对 web 元素使用 @CachelookUp 导致了过时的元素异常。我猜刷新页面后，元素引用没有重新加载并且找不到元素。为元素禁用 @CachelookUp 行有效。

```
 //Search button
    @FindBy(how=How.XPATH, using =".//input[@value='Search']")  
    //@CachelookUp
    WebElement BtnSearch; 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-07-05T13:14:18.107

这个解决方案对我来说很好：

[添加错误处理功能并重试](https://github.com/angular/protractor/issues/543#issuecomment-36285983)

```
var pollLoop = function () {
      element(by.id('spinnerElem')).getAttribute('class').then(function (cls) {
                if (cls.indexOf('spinner-active') > -1) {
                    // wait for the spinner
                } else {
                    //do your logic
                    promise.defer().fulfill();
                }
            }, function () {
                // This err handling function is to handle the {StaleElementReferenceError} and makes sure we find the element always.
                pollLoop();
            });
        }; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-09-30T05:35:17.880

在带有 for loop EX: for python 的 try catch 块中使用 webdriverwait 和 ExpectedCondition

```
for i in range(4):
    try:
        element = WebDriverWait(driver, 120).until( \
                EC.presence_of_element_located((By.XPATH, 'xpath')))
        element.click()    
        break
    except StaleElementReferenceException:
        print "exception " 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-04-16T11:19:40.257

如果我们不确定答案，请不要混淆我们自己。这对最终用户来说非常令人沮丧。简单而简短的答案是在 webdriver 中使用 @CacheLookup 注释。请参阅下面的链接。 [@CacheLookup 如何在 WebDriver 中工作？](https://stackoverflow.com/questions/6215857/how-does-cachelookup-work-in-webdriver)

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2016-03-31T06:07:08.477

参考@djangofan 给出的答案，看起来可行的解决方案是将您的代码保留`try catch`在可能发生过时的块内。当我使用下面的代码时，我没有任何时候遇到问题。

```
public void inputName(String name)
{
    try {
        waitForVisibilityElement(name);//My own visibility function
        findElement(By.name("customerName")).sendKeys(name);
    }
    catch (StaleElementReferenceException e)
    {
        e.getMessage();
    }
} 
```

我尝试过使用，`ExpectedConditions.presenceOfElementLocated(By)`但过时异常仍然间歇性地抛出。

希望这个解决方案有所帮助。

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2017-06-30T07:45:59.883

只需下载新的 chrome 扩展程序并使用 selenium server 3 即可。

# django - ManagementForm 数据丢失或被篡改

> ID：16166262
> 
> 赞同：1
> 
> 时间：2013-04-23T09:52:36.153
> 
> 标签：django, django-admin, feincms

突然，7周后，我收到了这个错误

ValidationError: [u'ManagementForm 数据丢失或已被篡改']

它工作了好几个星期。我没有改变任何事情。当我尝试保存页面时会发生这种情况。

```
Stacktrace (most recent call last):

  File "django/core/handlers/base.py", line 115, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "django/contrib/admin/options.py", line 372, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File "django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "django/views/decorators/cache.py", line 89, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File "django/contrib/admin/sites.py", line 202, in inner
    return view(request, *args, **kwargs)
  File "feincms/module/page/modeladmins.py", line 167, in change_view
    return super(PageAdmin, self).change_view(request, object_id, **kwargs)
  File "feincms/admin/item_editor.py", line 229, in change_view
    return super(ItemEditor, self).change_view(request, object_id, **kwargs)
  File "django/utils/decorators.py", line 25, in _wrapper
    return bound_func(*args, **kwargs)
  File "django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File "django/utils/decorators.py", line 21, in bound_func
    return func(self, *args2, **kwargs2)
  File "django/db/transaction.py", line 223, in inner
    return func(*args, **kwargs)
  File "django/contrib/admin/options.py", line 1100, in change_view
    queryset=inline.queryset(request))
  File "django/forms/models.py", line 720, in __init__
    queryset=qs, **kwargs)
  File "django/forms/models.py", line 441, in __init__
    super(BaseModelFormSet, self).__init__(**defaults)
  File "django/forms/formsets.py", line 56, in __init__
    self._construct_forms()
  File "django/forms/formsets.py", line 123, in _construct_forms
    for i in xrange(min(self.total_form_count(), self.absolute_max)):
  File "django/forms/formsets.py", line 97, in total_form_count
    return self.management_form.cleaned_data[TOTAL_FORM_COUNT]
  File "django/forms/formsets.py", line 85, in management_form
    raise ValidationError('ManagementForm data is missing or has been tampered with') 
```

有人有线索吗？

我正在使用 django 1.5 和 FeinCMS 1.7.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T12:18:57.247

我安装了 2 个不同版本的 FeinCMS。删除两者并安装新的 FeinCMS 解决了这个问题。

# jquery - 如果使用 jquery 禁用转发器中的所有其他复选框，如何禁用父复选框

> ID：16166264
> 
> 赞同：0
> 
> 时间：2013-04-23T09:52:43.867
> 
> 标签：jquery, asp.net

可能是我愚蠢或新手，请给我一个解决方案。我有一个转发器，我通过检查项目数据绑定中的条件从代码中禁用转发器复选框。所以如果所有复选框都被禁用我希望主标题复选框也禁用。

我试过这个但失败了

```
 $(document).ready(function () {

        if ($('#All input:checkbox').attr('disabled')) {
            $('#SelectAll').attr("disabled", true);
        }
            }); 
```

如果 div #ALL 中的所有复选框都被禁用，我希望禁用“SelectAll”复选框

```
<asp:Repeater ID="AutoPublishList" runat="server" EnableViewState="true">
                    <HeaderTemplate>
                        <td id="RemoveHead" runat="server">
                            <input type="checkbox" id="SelectAll" runat="server" clientidmode="Static" />
                        </td>
                        <td class="sortableHeaderSmall" onclick=" Sort('ProductName');">
                            Manager/Product
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('PageID');">
                            Page
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('IsPreliminary');">
                            Prelim
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('LastSaved');">
                            Last Updated
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('PublishDate');">
                            Time Published
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('ErrorDisplay');">
                            Errors
                        </td>
                        <td class="sortableHeaderSmall" onclick="Sort('Comment');">
                            Comments
                        </td>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <tr>
                            <td id="RemoveCell" runat="server" style="" class="sortableBodySmall">
                                <div id="All">
                                    <input type="checkbox" id="SelectRow" runat="server" value=' <%#DataBinder.Eval(Container, "DataItem.ProductID")%>' />
                                    <asp:HiddenField runat="server" ID="pageIDHidden" Value='<%#DataBinder.Eval(Container, "DataItem.PageID")%>' />
                                    <asp:HiddenField runat="server" ID="FirmID" Value='<%#DataBinder.Eval(Container, "DataItem.FirmID")%>' />
                                </div>
                            </td>
                            <td class="sortableBodySmall" align="left">
                                <a class="primaAnchor" href='<%# String.Format("/pg/imq/mf/index.aspx?fid={0}&pid={1}", Eval("FirmID"),Eval("ProductID")) %>'
                                    target="_blank">
                                    <asp:Literal EnableViewState="False" ID="ProductName" runat="server" Text='<%#DataBinder.Eval(Container, "DataItem.ProductName")%>' />
                                </a>
                            </td>
                            <td class="sortableBodySmall" align="left">
                                <a class="primaAnchor" href='<%# String.Format("/pg/imq/imqpage{0}.aspx?fid={1}&pid={2}",Eval("PageID"), Eval("FirmID"),Eval("ProductID")) %>'
                                    target="_blank">
                                    <asp:Literal EnableViewState="False" ID="PageName" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"PageName")%>' /></a>
                            </td>
                            <td class="sortableBodySmall" align="center">
                                <asp:Literal EnableViewState="False" ID="IsPreliminary" runat="server" Text=' <%# IIf(DataBinder.Eval(Container.DataItem, "IsPreliminary") = True, "P", "")%> ' />
                            </td>
                            <td class="sortableBodySmall" align="right" style="width: 105px">
                                <asp:Literal EnableViewState="False" ID="LastSaved" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "LastSaved")%>' />
                            </td>
                            <td class="sortableBodySmall" align="right" style="width: 105px">
                                <asp:Literal EnableViewState="False" ID="PublishDate" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "PublishDate")%>' />
                            </td>
                            <td class="sortableBodySmall" align="left" style="width: 105px">
                                <asp:Literal EnableViewState="False" ID="ErrorDisplay" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "ErrorDisplay")%>' />
                            </td>
                            <td class="sortableBodySmall" align="left">
                                <asp:Literal EnableViewState="False" ID="Comment" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Comment")%>' />
                            </td>
                        </tr>
                    </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:38:17.030

你可以试试这个，我举个例子，根据你的情况调整你的代码

```
<div id="test">
    <input type="checkbox" id="chkAll" />
    <input type="checkbox" class="chk" disabled="disabled" /> 1
    <input type="checkbox" class="chk" disabled="disabled" /> 2
    <input type="checkbox" class="chk" disabled="disabled" /> 3
</div>

<script type="text/javascript">
    $(document).ready(function () {
        if ($('#test input.chk:disabled').length == $('#test input.chk').length) {
            $('#chkAll').attr('disabled', 'disabled');
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:03:01.963

你可以试试：

```
 $(document).ready(function () {

    if ($('#All input:checkbox:enabled').length <= 0) {
        $('#SelectAll').prop("disabled", true);
    }
 }); 
```

**编辑**

这是禁用所有复选框的小提琴，因此您可以看到主要复选框也被禁用 [http://jsfiddle.net/6P3WB/](http://jsfiddle.net/6P3WB/)

这里同样的小提琴只启用了一个复选框，所以你可以看到主要的也启用了:) [http://jsfiddle.net/6P3WB/1/](http://jsfiddle.net/6P3WB/1/)

# javascript - 停止复制网页文本

> ID：16166265
> 
> 赞同：-5
> 
> 时间：2013-04-23T09:52:48.157
> 
> 标签：javascript, jquery, html

我不确定这是否可能，但我对谷歌的看法并不多。

我想在网页上显示无法通过查看源查看或从页面复制的文本。我们已经查看了一些选项，包括将文本转换为图像，但似乎效果不佳。

有人知道这样做的方法吗？

我知道我可以使用 javascript 让人们更难复制文本，但这很容易解决。

文本将是动态的并存储在数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:01:51.940

你能做的最多就是用你的尝试惹恼别人。根本做不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:00:34.650

实际上这件事需要用 JavaScript 而不是 PHP 来完成。

有 JS 脚本会阻止从网站中选择（以及复制之后）文本。

你可以在这里看到更多

[没有右键](http://www.hypergurl.com/norightclick.html)

[防止复制粘贴](https://stackoverflow.com/questions/9958478/how-to-disable-copy-paste-browser)

有了这个，您可以从源代码中获取文本。那么我们可以在这里做什么呢？[Metro Lyrics](http://www.metrolyrics.com)有一个简单的解决方案，可以防止从源中复制文本。我不知道名字是什么，但他们将字符转换为字符代码......你可以在他们的歌词源中看到它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-23T09:57:13.747

Using js to capture key and mouse event, when user want to copy it, stop this action.

# ruby-on-rails - activeadmin default_actions 编辑一个值

> ID：16166266
> 
> 赞同：0
> 
> 时间：2013-04-23T09:52:50.473
> 
> 标签：ruby-on-rails, activeadmin

嗨，我正在使用 ruby​​ on rails，活跃的管理员，我有一个包含几列的表，我的问题是：我可以只允许编辑其中一个列吗？我希望用户只能更改一个，而无需编辑也不会删除其他列。可能吗？

```
 actions :all, :except => [:destroy]  
 ..........
 index do
   selectable_column
   ...........
   ..............
   end
   default_actions :name => "Actions"
 end 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:51:34.513

您可以定义要显示以进行编辑的表单

```
 index do
    ....
  end
  form do |f|
    f.inputs "Some heading" do
      if f.object.persisted?
        #is shown when editing an existing object
        f.input :field1
      else
        #is shown when creating a new object
        f.input :field1
        f.input :field2
      end
    end
    f.actions
  end 
```

只会使用您添加的字段呈现表单。

# makefile - 生成文件中的“命令在第一个目标之前开始”错误

> ID：16166271
> 
> 赞同：1
> 
> 时间：2013-04-23T09:53:02.057
> 
> 标签：makefile

我阅读了许多与此类似的问题，但找不到任何好的答案。

```
CC=gcc
CFLAGS= -D__XMLSEC_FUNCTION__=__FUNCTION__ -DXMLSEC_NO_XSLT=1 -DXMLSEC_NO_XKMS=1 -I/usr/include/libxml2 -DXMLSEC_CRYPTO_DYNAMIC_LOADING=1 -DXMLSEC_CRYPTO=\"openssl\" -DUNIX_SOCKETS -DXML_SECURITY -DDEBUG
LDFLAGS= -lcrypto -I/usr/include/libxml2 -lxml2 -I/usr/local/include/xmlsec1 -lxmlsec1 -lprotobuf-c

$(CC) $(CFLAGS) $(LDFLAGS) src/main.c src/file1.c src/file3.pb-c.c -o   fileClient 
```

这是我的制作文件。所有三个头文件都在`src`目录中。这些`.c`文件也在`src`目录中。

依赖库：

*   openssl 0.9.8 或以上
*   libxml
*   xmlsec1 1.2.9 或以上（如果需要生成数字签名）
*   protobuf 2.4.1 用于 protobuff
*   protobuf-c 0.15 用于 protobuff，这些是依赖库....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:54:31.040

Makefile 中没有目标。`make`假设如下一般结构：

```
target: depencies
    commands 
```

尝试以下操作：

```
CC=gcc
CFLAGS= -D__XMLSEC_FUNCTION__=__FUNCTION__ -DXMLSEC_NO_XSLT=1 -DXMLSEC_NO_XKMS=1 -I/usr/include/libxml2 -DXMLSEC_CRYPTO_DYNAMIC_LOADING=1 -DXMLSEC_CRYPTO=\"openssl\" -DUNIX_SOCKETS -DXML_SECURITY -DDEBUG
LDFLAGS= -lcrypto -I/usr/include/libxml2 -lxml2 -I/usr/local/include/xmlsec1 -lxmlsec1 -lprotobuf-c

fileClient:
    $(CC) $(CFLAGS) $(LDFLAGS) src/main.c src/file1.c src/file3.pb-c.c -o   fileClient 
```

# python - Enthought 搪瓷表编辑器

> ID：16166275
> 
> 赞同：0
> 
> 时间：2013-04-23T09:53:12.067
> 
> 标签：python, traits, enthought, traitsui, enaml

我有一个带有自定义表编辑器的对象附加到视图。此表编辑器可以通过用户输入删除其某些列。在这种情况下，我调用了一个更新函数，这个函数也在对象的实例化时被调用。

```
class ModelList(HasTraits):

     models = List(Instance(Model))
     table_editor = TableEditor()
     view = View(Item(name='variables', show_label=False, editor=table_editor))

     def update(self) :
         columns = []
         for model in self.models :
             columns.append(ObjectColumn(..some stuff..))
         self.table_editor.columns = columns
         self.traits_modified = True 
```

在 enaml 布局中，此对象的引用方式如下：

```
enamldef Main(Window):
    attr model_list
    Container:
        TraitsItem: table:
            model := model_list 
```

它在实例化时效果很好，但是当一个列被删除时，它会保留在视图中，并且终端会充满 AttributeErrors。同样在视图中，该列充满了“格式！” 关键词。这一切都是合乎逻辑的，因为视图正在查询一个不再存在的对象。

所以我的问题是，如何让视图在更改我的 ModelList 对象后完全重新加载？

我还尝试重新定义 edit_traits() 因为这是 enaml 在构造视图时调用的方法，但该函数仅在实例化时调用一次。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:03:34.777

您可以提供列表`ObjectColumns`作为您`ModelList`班级的特征。不要在工厂对象上定义`columns`列表，而是使用参数来指向 trait 的名称。每当您在 上更新列表时，实施都应该随之而来。`TableEditor``columns_name``ModelList``ModelList``TableEditor`

```
class ModelList(HasTraits):
    models = List(Instance(Model))
    columns = List(Instance(ObjectColumn))
    variables = ...

    traits_view = View(UItem('variables',
        editor=TableEditor(columns_name='columns')))

    def update(self):
        columns = []
        for model in self.models :
            columns.append(ObjectColumn(..some stuff..))
        self.columns = columns 
```

这是 Traits UI 中的常见模式。在许多地方，您可以选择给出`Editor`明确的值（通常是静态的），或者给出`Editor`保存（通常是动态的）值的已编辑对象的特征名称。

# javascript - 使用 jQuery 查找文本并替换所有匹配项

> ID：16166283
> 
> 赞同：2
> 
> 时间：2013-04-23T09:53:33.630
> 
> 标签：javascript, jquery, string, replace

我有

```
var removeNotification = " (F)";
listVariable = listVariable.replace(removeNotification, ''); 
```

这部分工作，但它只找到字符串中的第一个“（F）”并将其替换为“”。还有很多其他的我需要改变。

我需要的是一种查找所有匹配项并替换它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:09:37.190

尝试这个：

```
var removeNotification = /\s\(\F\)/g;   // "g" means "global"
listVariable = listVariable.replace(removeNotification, '');
console.log(listVariable) 
```

这将替换所有匹配项，而不仅仅是第一个匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:11:30.090

`removeNotification`如果不能硬编码，你可以这样做：

```
// escape regular expression special characters
var escaped = removeNotification.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')

// remove all matches
listVariable = listVariable.replace(new RegExp(escaped, 'g'), ''); 
```

# python - Django 查找类型（“iexact”、“icontains”、“month”等）在 Django nonrel 中不起作用（使用 dbindexer）

> ID：16166284
> 
> 赞同：4
> 
> 时间：2013-04-23T09:53:33.757
> 
> 标签：python, django, google-app-engine, django-nonrel, djangoappengine

我使用“django nonrel”创建了一个应用程序，并使用“django dbindexer”来允许正常的 Django 查找。设置文件如下

我的项目/settings.py

```
from djangoappengine.settings_base import *

import os

DATABASES['native'] = DATABASES['default']
DATABASES['default'] = {'ENGINE': 'dbindexer', 'TARGET': 'native'}
AUTOLOAD_SITECONF = 'indexes'
SITE_ID = 1
SECRET_KEY = '=r-$b*8hglm+858&9t043hlm6-&6-3d3vfc4((7yd0dbrakhvi'
AUTH_PROFILE_MODULE = 'myapp.UserProfile'

DBINDEXER_BACKENDS = (
    'dbindexer.backends.BaseResolver',
    'dbindexer.backends.FKNullFix',
    'dbindexer.backends.ConstantFieldJOINResolver',
)

INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.sites',
    'django.contrib.contenttypes',
    'django.contrib.auth',
    'django.contrib.sessions',
    'django.contrib.staticfiles',
    'django.contrib.messages',
    'djangotoolbox',
    'autoload',
    'dbindexer',
    'myapp',

    'djangoappengine',
)

MIDDLEWARE_CLASSES = (
    'autoload.middleware.AutoloadMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request',
)

TEST_RUNNER = 'djangotoolbox.test.CapturingTestSuiteRunner'

ROOT_URLCONF = 'myproject.urls'

gettext = lambda s: s
SETTINGS_PATH = os.path.abspath(os.path.dirname(__file__))
temp = os.path.join(SETTINGS_PATH, os.pardir)
ROOT = os.path.join(os.path.normpath(temp))

STATIC_ROOT = os.path.join(ROOT, 'collected_static')

STATIC_URL = '/static/'

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

AUTH_PROFILE_MODULE = 'myapp.UserProfile' 
```

我在“myapp”文件夹中创建了一个“dbindexes”文件来添加索引定义。

myapp/dbindexes.py

```
from models import *
from dbindexer.lookups import StandardLookup
from dbindexer.api import register_index

register_index(myModel, {'first_name': 'icontains',
                         'last_name':  'icontains',
                           }) 
```

主文件夹中的“索引”文件如下所示：

索引.py

```
from dbindexer import autodiscover
autodiscover() 
```

现在，当我使用注册的索引查询“myModel”时，它总是返回一个空列表。似乎已正确发现索引，因为它不会引发任何错误。但是，当我在“myapp/dbindexes.py”文件中将“icontains”更改为“contains”时，它会给出预期的结果。

有人可以指导我解决这个问题。

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:48:43.007

dbindexer 本质上会自动反规范化您的实体并添加额外的可索引字段以帮助查询。例如，GAE 不进行不区分大小写的搜索或子字符串搜索，因此如果您需要使用`icontains`，它会生成一个小写子字符串列表并将其存储在可索引的 ListField 中。当您编写实体时会发生这种情况。

请注意，这最终可能会非常昂贵，因为它会膨胀您的数据存储和使用的索引。

运行查询时，您只能查询数据存储中的实体。如果您的 dbindexes.py`contains`在某一时刻指定，则将使用搜索字段创建实体`contains`，并且查询`icontains`不会找到您要查找的内容。如果您添加新实体，并且它们写入了正确的可索引数据，那么它们应该是可查询的，但旧实体不会在查询中返回。

您可以使用数据存储查看器查看与您的实体一起编写的 dbindexer。如果某些实体没有额外的 dbindexer 生成的属性，那么这些查询将不会返回。您可以通过读取和写入所有实体来解决此问题，以便 dbindexer 更新字段。

# django - 芹菜作为 os.environ 上的守护程序任务 KeyError

> ID：16166286
> 
> 赞同：3
> 
> 时间：2013-04-23T09:53:44.847
> 
> 标签：django, celery

我在 Apache 和 Google Compute Engine 机器上使用 celery 作为守护进程与 Celeryd 和 Django。

我的 Celeryd 默认配置为：

```
CELERYD_USER="myuser-notroot"
CELERYD_GROUP="developers" 
```

而且我认为所有权限都设置得很好（我想）。当我启动我的系统时，所有连接都很好，但是当我启动一个任务时：

```
import os
homedir = os.environ['HOME'] 
```

我登录：

```
 homedir = os.environ['HOME']
  File "/usr/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
  KeyError: 'HOME' 
```

但是如果我执行 sudo /etc/init.d/celeryd restart，问题就解决了。任何想法？也许服务启动有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:53:00.327

`HOME`通常不会为所有用户定义环境变量。因此，当 Celery 在引导时启动时，该变量不可用。

当您使用 重新启动它时`sudo`，您的用户环境中的环境变量将由 Celery 进程继承，这解释了它现在工作的原因（尽管`HOME`将设置为**您的**主目录）。

你应该换`homedir`一种方式。请参阅[如何在 Python 中获取主目录？](https://stackoverflow.com/questions/4028904/how-to-get-the-home-directory-in-python)用于检索主目录的替代方法。

# javascript - 将 NSArray 从 Objective C 传递给 Javascript

> ID：16166287
> 
> 赞同：0
> 
> 时间：2013-04-23T09:53:47.403
> 
> 标签：javascript, objective-c

我想将按钮单击时的`NSArray`from **Objective C传递给****JavaScript**。我如何通过它？我可以使用参数调用**JavaScript**方法，但我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T09:17:10.007

将数组作为参数从目标 c 传递到 Javastipt

```
NSString *arrayStr = [currentArray componentsJoinedByString:@"','"];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"initActivity(['%@'])", arrayStr ]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:13:56.573

如果您的数组包含原始值或字符串，您可以执行以下操作：

```
NSArray *objs; 
NSString *arrayStr = [objs componentsJoinedByString:@","];
NSString *jsFunc = [NSString stringWithFormat:@"jsFuncName([%@])", arrayStr];
[webViev stringByEvaluatingJavaScriptFromString:jsFunc]; 
```

如果您的数组包含其他类型，则需要在调用之前对每个对象进行字符串化`componentsJoinedByString`。

# asp.net - 从客户端向具有 ItemTemplate 的 Radlistbox 添加一行

> ID：16166288
> 
> 赞同：0
> 
> 时间：2013-04-23T09:53:47.937
> 
> 标签：asp.net, telerik

如何在从客户端（Javascript）单击添加按钮时向 radlistbox 添加一行，因为我的 radlistbox 还包含项目模板

```
<telerik:RadListBox ID="rlbControl" runat="server" SelectionMode="Multiple"> 
           <ItemTemplate> 
              <table>
               <tr>
                   <td>
                       <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>' ></asp:Label>
                   </td>
                   <td style="width:20px"></td>
                   <td >
                       <asp:Label ID="lblAge" runat="server" Text='<%# Eval("Age") %>' ></asp:Label> 
                   </td>
               </tr>
             </table>
           </ItemTemplate> 
        </telerik:RadListBox>

Name : <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
Age : <asp:TextBox ID="txtAge" runat="server" ></asp:TextBox>
<asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="btnAdd_Click"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:15:14.040

您可以使用 ItemTemplate 执行此操作，因为 ItemTemplates 是基于服务器的。

您需要使用 ClientTemplate。顾名思义，这是您提供在客户端使用的模板。

看看这个演示。

[http://demos.telerik.com/aspnet-ajax/listbox/examples/functionality/clienttemplates/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/listbox/examples/functionality/clienttemplates/defaultcs.aspx)

那应该可以帮助你。

# css - 水平对齐img和文本？

> ID：16166289
> 
> 赞同：0
> 
> 时间：2013-04-23T09:53:49.547
> 
> 标签：css, positioning

在 Web 开发方面迈出小步。我有一个应用程序，它的加载器屏幕与[这个 Fiddle](http://jsfiddle.net/jakc/z3zpz/)非常相似。

在桌面浏览器上，文本/图像垂直和水平居中（无论如何对眼睛而言）看起来是可以接受的。

但是，当您在较小的屏幕尺寸上查看我的应用程序时，文本/图像开始无法与屏幕中心水平对齐。

我一直在阅读许多相关的帖子和​​博客，但无论设备宽度如何，我都无法让我的文本/图像保持居中。这可以通过调整[小提琴](http://jsfiddle.net/jakc/z3zpz/)预览的大小以使其更薄来复制。

```
<div id="preloader">
<div class="preloaderContent">
    <div id="loadLabel">Please Wait</div>
    <img src="http://www.igfa.org/images/throbber.gif"><br>
    </div>
</div>

#preloader {
    display: table;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    margin:0;
    padding:0;
    background:#3399FF;
    z-index:999;
}

.preloaderContent {
    position: absolute;
    left: 45%;
    top: 40%;
}

.preloaderContent img {
    display : block;
    margin : auto;
    text-align: center;
}

#loadLabel {
    padding-bottom: 10px;
    font-size: 30px;
    font-weight: 300;
    font-family: 'Segoe UI',Helvetica,Arial,'Sans-Serif';
    color: #FFFFFF; 
    text-align: center;
} 
```

抱歉，这有点乱。有人能以我的方式指出错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:05:56.743

你想输入这样的东西：

```
.preloaderContent {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 200px;
    height: 100px;
    margin-top: -50px;/*half of height*/
    margin-left: -100px;/*half of width*/
} 
```

负边距意味着 div 的中心位于中心而不是左上角。这将根据浏览器窗口大小调整大小。示例：http: [//jsfiddle.net/z3zpz/2/](http://jsfiddle.net/z3zpz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:00:07.720

您需要添加一些响应式 css。

```
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

通过向上述媒体查询添加特定的 css，您可以修改每个设备的布局。不要忘记将上述媒体查询放在您的 CSS 下方（为了安全起见）。

希望这可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:00:37.623

您可以将它放在 50% 和 50% 中，并添加到大约一半内容大小的负边距。

jsfiddle.net/z3zpz/1/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:03:56.287

如果内容的高度和宽度（.preloaderContent）已知，您也可以尝试这个。

```
html, body { height: 100%; }

#preloader {position: relative; background: #3399FF; width: 100%; height: 100%; }

.preloaderContent { position:absolute; height:100px; width:160px; top:50%; left:50%; margin-top:-50px; margin-left:-80px; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T11:56:47.510

试试这个

```
* { margin: 0; padding: 0; }

html, body { height: 100%; }

body { position: relative; background: #3399FF; }

#preloader { display: table; width: 100%; height: 100%; }

.preloaderContent { display: table-cell; vertical-align: middle; text-align: center; }

.preloaderContent img { display : block; margin: 0 auto; }

#loadLabel { padding-bottom: 10px; font-size: 30px; font-weight: 300; font-family: 'Segoe UI', Helvetica, Arial, 'Sans-Serif'; color: #FFFFFF; } 
```

# symfony - composer.phar 和 ionCube 4.0.7

> ID：16166292
> 
> 赞同：0
> 
> 时间：2013-04-23T09:53:54.493
> 
> 标签：symfony, composer-php, ioncube

我试图让作曲家初始化一个 symfony2 项目。
但是当我尝试这个命令时

```
$ curl -s https://getcomposer.org/installer | php 
```

我收到此错误：

```
Some settings on your machine make Composer unable to work properly.Make sure that you fix the issues listed below and run this script again:

Your ionCube Loader extension (4.0) is incompatible with Phar files.
Upgrade to ionCube 4.0.9 or higher or remove this line (path may be different) from your `php.ini` to disable it:
    zend_extension = /usr/lib/php5/20090626+lfs/ioncube_loader_lin_5.3.so

The php.ini used by your command-line PHP is: /etc/php.ini
If you can not modify the ini file, you can also run `php -d option=value` to modify ini values on the fly. You can use -d multiple times. 
```

我刚刚查看了我的 php.ini，发现我的 ionCube Loader 版本是 4.0.7。
有没有办法让 composer.phar 使用这个版本的 ionCube Loader 避免 PHP 更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:13:54.187

正如错误所说，旧的 ionCube 版本只会使 phar 文件失败，因此它们与 composer.phar 不兼容。但是，您可以安装新版本的 ioncube 加载程序，而无需完全更新 PHP。

# python - 我怎样才能找到日期是否在两个日期之间

> ID：16166293
> 
> 赞同：2
> 
> 时间：2013-04-23T09:53:57.657
> 
> 标签：python, django

我有日期

```
date['min'] = '2013-11-11'
date['max'] = '2013-11-23' 
```

如果日期在该范围内，是否有任何单行函数可以返回 true。

我的意思是如果只`date.min`提供了，那么我需要检查给定的日期是否比它大，如果只提供最大值，那么我需要检查它是否小于那个。如果两者都提供，那么它是否属于它们之间

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T09:56:58.157

Dates in the form `YYYY-MM-DD` can be compared alphabetically as well:

```
'2013-11-11' < '2013-11-15' < '2013-11-23'

date['min'] < your_date < date['max'] 
```

This won't work correctly for other formats, such as `DD.MM.YYYY` or `MM/DD/YYYY`. In that case you have to parse the strings and convert them into `datetime` objects.

If don't know whether the min/max variables are present, you can do:

```
date.get('min', '0000-00-00') < your_date < date.get('max', '9999-99-99') 
```

and replace the default text values with anything you prefer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:01:46.523

我认为简单的比较适用于此。

```
>>> from datetime import timedelta, date
>>> min_date = date.today()
>>> max_date = date.today() + timedelta(days=7)
>>> d1 = date.today() + timedelta(days=1)
>>> d2 = date.today() + timedelta(days=10)
>>> min_date < d1 < max_date
True
>>> min_date < d2 < max_date
False 
```

这是更新的版本：

```
def is_in_range(d, min=date.min, max=date.max):
    if max:
        return min < d < max
    return min < d

print is_in_range(d1, min_date, max_date)
print is_in_range(d2, min_date, max_date)
print is_in_range(d1, min_date)
print is_in_range(d2, min_date)

True
False
True
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:08:05.110

如果您处理日期对象：

```
from datetime import date
in_range = (first_date or date.min) < my_date < (second_date or date.max) 
```

# php - 找不到 domDocument 标记

> ID：16166296
> 
> 赞同：1
> 
> 时间：2013-04-23T09:54:04.893
> 
> 标签：php, domdocument

我有一个查找 XML 标签的功能：

```
 function extraerTagXML($mensaje, $tagname){

          $dom = new domDocument('1.0', 'UTF-8');
          //
          // load the html into the object ***/
          $dom->loadHTML($mensaje);

          //discard white space
          $dom->preserveWhiteSpace = false;
          $nodeList= $dom->getElementsByTagName("'".$tagname."'"); // here u use your desired tag

          $items = array();
          for($i=0; $i < $nodeList->length; $i++) {
                    $node = $nodeList->item($i);
                    $items[] = trim($node->nodeValue);
          }
          var_dump($items);
         // libxml_clear_errors();

          return $items;

 } 
```

当我执行时：

```
 echo $salida;

    $resultado = extraerTagXML($salida,"MSG"); 
```

我有：

```
<?xml version='1.0' encoding='UTF-8' ?>
<cod_avis>3000082</cod_avis>
<MSG>ok</MSG> 
</Status>

array(0) {
} 
```

所以没有找到“味精”标签。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:13:59.603

首先，您加载的是 XML 文档而不是 HTML 文档。所以使用`loadXML()`代替`loadHTML()`方法。
其次，您不需要在调用时在标记名周围显式附加引号`getElementsByTagName()`，因此而不是

```
getElementsByTagName("'".$tagname."'"); 
```

利用

```
getElementsByTagName($tagname); 
```

另外，正如我在上面的评论中提到的，您的 XML 文档格式不正确 - 它缺少根节点，请将其编辑为

```
<?xml version='1.0' encoding='UTF-8' ?>
<Status>
<cod_avis>3000082</cod_avis>
<MSG>ok</MSG> 
</Status> 
```

第三，您也可以[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)用于相同的目的，因为您正在使用`DOMDocument`，即

```
$xPath = new DOMXPath($dom);
$result = $xPath->query('//MSG');
echo $result->item(0)->nodeValue; 
```

但这只是附带说明；-)

# matrix - CUDA 中的 3D 矩阵乘法

> ID：16166301
> 
> 赞同：0
> 
> 时间：2013-04-23T09:54:21.407
> 
> 标签：matrix, cuda, implementation, matrix-multiplication

我目前正在尝试在 CUDA 中实现矩阵的产品：第一个矩阵是 3D 矩阵（N，M，Z），第二个是 2D 矩阵（M，L）。我看不出这个乘法的代码有什么问题。有人可以帮我解决这个问题吗？谢谢

这是我的内核：

```
__global__ void matrixMul(float * A, float * B, float * C,int N, int M, int Z, int L) {
int idx = blockIdx.x*blockDim.x + threadIdx.x;
int idy = blockIdx.y*blockDim.y + threadIdx.y;

for(int z=0; z<width; z++){
    C[idx*width+idy] +=  A[idy + idx*width ]*B[idx*width+idy+z*width*height];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:42:21.803

我看到的问题是行/列编号。

`z`应该在`A`和`B`矩阵索引中。矩阵乘法规则规定：

(AB)ij = sum(k) Aik * Bkj

所以我假设你的例子会像

(AB)ij = sum(k,e) Aik * Bkje

# java - 基于 Apache CXF 的应用程序中的长寿命对象

> ID：16166305
> 
> 赞同：0
> 
> 时间：2013-04-23T09:54:35.193
> 
> 标签：java, web-services, tomcat, cxf

我正在构建客户端-服务器应用程序的服务器部分，它们使用 Web 服务相互通信，使用 Apache CXF 实现。

在应用程序中，我想要一个对象，该对象在部署 Web 应用程序时创建并一直存在，直到它停止和/或取消部署。

让我们称之为`MyBackend backend`。

我也想拥有不同的网络服务，比如`http://myserver.com/service1`and `http://myserver.com/service2`，

1.  接收来自客户的请求，
2.  将它们传递给`backend`对象并
3.  将方法的返回值发送`MyBackend`回客户端。

我计划创建以下两个类，它们使用相同的`MyBackend`.

```
@Path("/service1")
public class MyWebService1 {
    private MyBackend backend = ...;

    @POST
    @Produces("text/plain")
  public String performOperation1(@FormParam("request") final String aRequest)
  {
    return backend.doSomething();
  }
}

@Path("/service2")
public class MyWebService2 {
    private MyBackend backend = ...;

    @POST
    @Produces("text/plain")
  public String performOperation2(@FormParam("request") final String aRequest)
  {
    return backend.doSomethingDifferent();
  }
} 
```

问题：

1.  如果我像这样实现 Web 服务，`MyBackend`实例的状态是否会在不同的 Web 服务调用中保留（如上所述，只要应用程序在应用程序容器内运行，我就需要此对象处于活动状态）？
2.  我在哪里可以创建和初始化`MyBackend`实例（考虑到由于连接到数据库，初始化可能会持续很长时间）？
3.  后端对象的关闭程序应该放在哪里（比如切断与数据库的连接）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:16:55.737

我强烈建议使用 Spring 和依赖注入来处理这个问题。您可以定义一个`MyBackend`bean，然后将其注入服务 bean。

```
<bean id="myBackend" class="com.whatever.MyBackend"/>

<bean id="service1Bean" class="com.whatever.MyWebService1">
  <property name="backend" ref="myBackend"/>
</bean>

<jaxrs:server id="service1" address="/">
  <jaxrs:serviceBeans>
    <ref bean="service1Bean" />
  </jaxrs:serviceBeans>
</jaxrs:server> 
```

# objective-c - CDATA 块内的 NSXML 解析器图像 URL

> ID：16166308
> 
> 赞同：1
> 
> 时间：2013-04-23T09:54:38.010
> 
> 标签：objective-c, nsxmlparser

我尝试加载属性元素。在这篇文章中有很多代码来显示我所拥有的并（希望）清除所有问题。

**解析器.h**

```
#import <Foundation/Foundation.h>

@interface Parser : NSXMLParser

@property (nonatomic, strong) NSString *rowElementName; // this is the element name that identifies a new row of data in the XML
@property (nonatomic, strong) NSArray *attributeNames;  // this is the array of attributes we might want to retrieve for that element name
@property (nonatomic, strong) NSArray *elementNames;    // this is the list of sub element names for which we're retrieving values

@property (nonatomic, strong) NSMutableArray *items;    // after parsing, this is the array of parsed items
@end 
```

**解析器**

```
#import "Parser.h"

@interface Parser () <NSXMLParserDelegate>

@property (nonatomic, strong) NSMutableDictionary *item;     // while parsing, this is the item currently being parsed
@property (nonatomic, strong) NSMutableString *elementValue; // this is the element within that item being parsed

@end

@implementation Parser

- (id)initWithContentsOfURL:(NSURL *)url{
    self = [super initWithContentsOfURL:url];
    if (self){
        self.delegate = self;
    }
    return self;
}

- (id)initWithData:(NSData *)data{
    self = [super initWithData:data];
    if (self){
        self.delegate = self;
    }
    return self;
}

- (id)initWithStream:(NSInputStream *)stream{
    self = [super initWithStream:stream];

    if (self){
        self.delegate = self;
    }
    return self;
}

#pragma mark - NSXMLParserDelegate methods

- (void)parserDidStartDocument:(NSXMLParser *)parser{
    self.items = [[NSMutableArray alloc] init];

    if (!self.rowElementName)
        NSLog(@"%s Warning: Failed to specify row identifier element name", __FUNCTION__);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{
    if ([elementName isEqualToString:self.rowElementName]){
        self.item  = [[NSMutableDictionary alloc] init];

        for (NSString *attributeName in self.attributeNames){
            id attributeValue = [attributeDict valueForKey:attributeName];
            if (attributeValue)
                [self.item setObject:attributeValue forKey:attributeName];
        }
    }
    else if ([self.elementNames containsObject:elementName]){
        self.elementValue = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if (self.elementValue){
        [self.elementValue appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementName isEqualToString:self.rowElementName]){
        [self.items addObject:self.item];
        self.item = nil;
    }
    else if ([self.elementNames containsObject:elementName]){
        [self.item setValue:self.elementValue forKey:elementName];
        self.elementValue = nil;
    }
}

@end 
```

**XML结构：**

```
<?xml version="1.0" encoding="UTF-8"?> <Document>
    <Placemark>
        <name><![CDATA[FooName]]></name>
        <Snippet><![CDATA[FooSniped]]></Snippet>
        <description><![CDATA[<img src="http://www.foosite.com/fooimage.jpg">FooDescription]]></description>
    </Placemark> </Document> 
```

现在到我真正的问题。我可以毫无问题地使用通常的标签解析所有信息，但我无法从描述中获取图像 URL。我按照通常的方式做：
`parser.attributeNames = @[@"src"];`
但它会返回`(null)`，所以我认为有问题。有任何想法吗？

**编辑**

我正在使用这个简单的行：

```
Parser *parser = [[Parser alloc] initWithContentsOfURL:url];
parser.rowElementName = @"Placemark";
parser.elementNames = @[@"name", @"Snippet", @"description"];
parser.attributeNames = @[@"src"]; //return (null)
[parser parse]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:38:40.347

您是否考虑过使用 NSXMLParser 类的 CDATA 委托方法：

首先，您需要使用“foundCData”委托方法。它将帮助您从您正在解析的 Web 服务中的 CDATA 块中获取图像 url。

```
 - (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock {

    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];

    [elementValue appendString:someString];

    NSString *imageURLString = [self getFirstImageUrl:someString];
    NSURL *imageURL = [NSURL URLWithString:imageURLString];
} 
```

以下是您从 CDATA 方法调用以获取图像 url 字符串的方法：

```
-(NSString *)getFirstImageUrl: (NSString *) html {

    NSScanner *theScanner;
    NSString *imageURL = nil;

    theScanner = [NSScanner scannerWithString: html];

    // find start of tag
    [theScanner scanUpToString: @"<img" intoString: NULL];
    if ([theScanner isAtEnd] == NO) {

        [theScanner scanUpToString: @"src=\"" intoString: NULL];
        NSInteger newLoc2 = [theScanner scanLocation] + 5;
        [theScanner setScanLocation: newLoc2];

        // find end of tag
        [theScanner scanUpToString: @"\"" intoString: &imageURL];
    }

    return imageURL;
} 
```

获得图像的 url 后，您可以使用它来下载它们并在您的应用程序中显示您想要的任何位置

# java - 共享列表上的多线程

> ID：16166310
> 
> 赞同：1
> 
> 时间：2013-04-23T09:54:40.680
> 
> 标签：java, multithreading, web-crawler

我有一个场景，其中将有一个包含网站的列表和用于抓取这些网站的代码块。是否可以实现多线程方式，以便每个线程将从列表中获取 5 个或更多网站并独立抓取，并确保它们不会获取由另一个线程收集的同一个网站。

```
List <String> websiteList;

//crawling code block here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:02:38.353

例如，您可以使用`BlockingQueue`所有感兴趣的消费者都可以共享的 a （注意，为清楚起见，跳过了错误处理）：

```
public static void main(String[] args) throws Exception {
    // for test purposes add 10 integers
    final BlockingQueue<Integer> queue = new LinkedBlockingDeque<Integer>();
    for (int i = 0; i < 10; i++) {
        queue.add(i);    // 
    }

    new Thread(new MyRunnable(queue)).start();
    new Thread(new MyRunnable(queue)).start();
    new Thread(new MyRunnable(queue)).start();

}

static class MyRunnable implements Runnable {
    private Queue<Integer> queue;

    MyRunnable(Queue<Integer> queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        while(!queue.isEmpty()) {
            Integer data = queue.poll();
            if(data != null) {
                System.out.println(Thread.currentThread().getName() + ": " + data);
            }
        }
    }
} 
```

当`Queue`为空时，`Threads`将退出并且程序将结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:07:22.450

正如其他答案中提到的那样，有这样的要求，您最初应该考虑将您的网站保持在`java.util.concurrent`包中的 Java 并发抽象数据类型之一中，而不是在标准列表中。BlockingQueue 的[drainTo](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#drainTo%28java.util.Collection,%20int%29)方法听起来正是您正在寻找的，因为您希望线程能够一次获取一堆站点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:59:26.743

您可以使用`LinkedBlockingQueue`，将所有 websiteList 放入此队列，并在每个线程之间共享此队列。现在所有线程都将在这个队列上轮询，这是一个阻塞操作，确保队列中的一个元素仅由一个线程获取。

就像是：

```
String site;
while((site=queue.poll(timeout, TimeUnit.SECONDS))!=null)
{
//process site
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:01:03.177

你可以试试 DoubleBufferedList。这允许您从多个线程将列表和条目添加到列表中，并使用多个线程以完全无锁的方式从中获取列表。

```
public class DoubleBufferedList<T> {
  // Atomic reference so I can atomically swap it through.
  // Mark = true means I am adding to it so momentarily unavailable for iteration.
  private AtomicMarkableReference<List<T>> list = new AtomicMarkableReference<>(newList(), false);

  // Factory method to create a new list - may be best to abstract this.
  protected List<T> newList() {
    return new ArrayList<>();
  }

  // Get and replace the current list.
  public List<T> get() {
    // Atomically grab and replace the list with an empty one.
    List<T> empty = newList();
    List<T> it;
    // Replace an unmarked list with an empty one.
    if (!list.compareAndSet(it = list.getReference(), empty, false, false)) {
      // Failed to replace! 
      // It is probably marked as being appended to but may have been replaced by another thread.
      // Return empty and come back again soon.
      return Collections.<T>emptyList();
    }
    // Successfull replaced an unmarked list with an empty list!
    return it;
  }

  // Grab and lock the list in preparation for append.
  private List<T> grab() {
    List<T> it;
    // We cannot fail so spin on get and mark.
    while (!list.compareAndSet(it = list.getReference(), it, false, true)) {
      // Spin on mark - waiting for another grabber to release (which it must).
    }
    return it;
  }

  // Release the list.
  private void release(List<T> it) {
    // Unmark it - should this be a compareAndSet(it, it, true, false)?
    if (!list.attemptMark(it, false)) {
      // Should never fail because once marked it will not be replaced.
      throw new IllegalMonitorStateException("It changed while we were adding to it!");
    }
  }

  // Add an entry to the list.
  public void add(T entry) {
    List<T> it = grab();
    try {
      // Successfully marked! Add my new entry.
      it.add(entry);
    } finally {
      // Always release after a grab.
      release(it);
    }
  }

  // Add many entries to the list.
  public void add(List<T> entries) {
    List<T> it = grab();
    try {
      // Successfully marked! Add my new entries.
      it.addAll(entries);
    } finally {
      // Always release after a grab.
      release(it);
    }
  }

  // Add a number of entries.
  @SafeVarargs
  public final void add(T... entries) {
    // Make a list of them.
    add(Arrays.<T>asList(entries));
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T10:01:51.433

我建议以下**三种解决方案**之一：

把事情简单化

```
synchronized(list) {
    // get and remove 5 websites from the list
} 
```

如果您可以更改列表类型，则可以使用

```
BlockingQueue 
```

如果您无法更改列表类型，您可以使用

```
Collections.synchronizedList(list) 
```

# iphone - NSLog内部变量参数函数

> ID：16166313
> 
> 赞同：3
> 
> 时间：2013-04-23T09:54:49.777
> 
> 标签：iphone, ios, objective-c, nslog, variadic-functions

我对目标 c 变量参数函数没有清晰的概念。我想编写一个函数，该函数将采用 nlsog 类型参数，但有时我会在该函数中使用 NSLog。我怎样才能做到这一点？

```
-(void) printStatus:(NSString*)status, ...
{
    // I want use use NSLog with all these parameter here.

    // some gui logging also happens here
} 
```

通话会是这样的，

```
[self printStatus:@"status"]; 
```

或者

```
[self printStatus:@"Staus: %@", someObject]; 
```

而不是使用 NSLog，我想使用 printStatus。当我需要将控制台日志记录切换到 GUI 日志记录时，我只能更改为 printStatus 函数，而不是更改代码中的所有位置。

或者像我在这里使用的那样使用 DLog，

```
#ifdef DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__)
#else
#    define DLog(...) /* */
#endif 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T10:01:24.920

您需要使用 C 的可变参数类型和`NSLogv`宏：

```
-(void)printStatus:(NSString*)status, ...
{
    va_list args;
    va_start(args, status);
    NSLogv(status, args);
    va_end(args);
} 
```

这假定`status`参数是一个格式字符串，后跟它的参数。

如果您想`NSString`从格式字符串和参数创建一个（用于更新您的 GUI），您可以执行以下操作`NSLogv`：

```
NSLogv(status, args);
NSString *message = [[NSString alloc] initWithFormat:status arguments:args];
// ... log to GUI 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:57:02.707

最后，对于感兴趣的人，这是我的最终版本的日志记录......

```
-(void) printStatus:(NSString*)status, ...
{
    va_list args;
    va_start(args, status);
    va_end(args);
    NSString * str = [[NSString alloc] initWithFormat:status arguments:args];
    DLog(@"%@", str);
    self.statusTextView.text = [_statusTextView.text stringByAppendingFormat:@"\n%@",str];
    [str release];
} 
```

`DLog`在我的`Prefix.pch`文件中定义，

```
#ifdef DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__)
#else
#    define DLog(...) /* */
#endif 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-23T09:59:14.833

我无法完全理解这个问题。据我了解，您可以使用格式化字符串

```
 [NSString stringWithFormat:@"this is string %@",@"String"]; 
```

# iphone - 返回从块内部设置的 NSString

> ID：16166316
> 
> 赞同：2
> 
> 时间：2013-04-23T09:55:00.680
> 
> 标签：iphone, ios, objective-c, block, cllocation

我有一个看起来像这样的方法：

```
-(NSString *)getCityFromLocation:(CLLocation *)location {

    __block NSString *city;

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder reverseGeocodeLocation: location completionHandler:
     ^(NSArray *placemarks, NSError *error) {

         //Get address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         city = [placemark.addressDictionary objectForKey:@"City"];

         NSLog(@"city 1: %@", city);

     }];

    return city;
} 
```

我这样称呼它：

```
NSString *city = [self getCityFromLocation:currentLocation];

NSLog(@"city 2: %@", city); 
```

在 NSLog 中，我得到：

```
city 2: (null)
city 1: London 
```

问题很明显——它在运行块之前就返回了。我怎样才能让它按预期工作，它可以返回块产生的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:04:57.200

最初，您将完成块分配给`reverseGeocodeLocation`. 但当时它没有调用。它会在什么时候调用`reverse Geocode process get complete`。但 `city`立即获得回报。这就是为什么你会这样。

您可以通过将其分配给本地属性来解决。当完成块被执行时。所以代码应该是。

```
[geocoder reverseGeocodeLocation: location completionHandler:
     ^(NSArray *placemarks, NSError *error) {

         //Get address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         self.city = [placemark.addressDictionary objectForKey:@"City"];

     }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:06:56.880

与其在内部创建块`getCityFromLocation`，不如将`getCityFromLocation`其作为一个块（我的意思是回调方法）。

```
typedef void (^Callback)(BOOL isSuccess, id object);

-(void)getCityFromLocation:(Callback)iCallback
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder reverseGeocodeLocation: location completionHandler:
        ^(NSArray *placemarks, NSError *error) {

       //Get address
       CLPlacemark *placemark = [placemarks objectAtIndex:0];

       city = [placemark.addressDictionary objectForKey:@"City"];

      NSLog(@"city 1: %@", city);
      iCallback(YES,city);

   }];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:15:58.373

异步方法，例如`reverseGeocodeLocation:`您在此处使用的，通常是有充分理由的——它们需要时间来完成。鉴于此，您应该首先考虑您的设计并确定您是否真的应该尝试以同步方式使用异步方法。

如果您确实决定需要这样做，那么一种解决方案是使用信号量。在调用`reverseGeocodeLocation:`创建信号量之前`dispatch_semaphore_create`（GCD 的一部分，在手册的第 3 节中）。然后在您的块内`dispatch_semaphore_signal`用于指示字符串已准备好，并在您的块外`dispatch_semaphore_wait`进行阻塞，直到字符串准备好。

您的代码修改为执行此操作，*直接输入答案而不执行*：

```
#include <dispatch/dispatch.h>

-(NSString *)getCityFromLocation:(CLLocation *)location
{

   __block NSString *city;

   dispatch_semaphore_t sema = dispatch_semaphore_create(0);

   CLGeocoder *geocoder = [[CLGeocoder alloc] init];

   [geocoder reverseGeocodeLocation: location completionHandler:
      ^(NSArray *placemarks, NSError *error)
      {
         //Get address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         city = [placemark.addressDictionary objectForKey:@"City"];
         dispatch_semaphore_signal(sema); // string is ready
      }
   ];

   dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER); // wait for string
   dispatch_release(sema); // if you are using ARC & 10.8 this is NOT needed
   return city;
} 
```

但说真的，仔细考虑这是否是你应该做的。

HTH。

# php - 将变量传递到弹出屏幕

> ID：16166319
> 
> 赞同：1
> 
> 时间：2013-04-23T09:55:25.600
> 
> 标签：php, javascript, popup

好吧，标题说明了一切，我有一个主屏幕，用户可以在其中看到一些数据，然后他们可以单击一个按钮，使用`window.open`.

但是在弹出窗口中，我想显示在主屏幕上定义的一些变量以及在弹出屏幕中计算的其他一些变量。

我尝试使用`$_SESSION`，但由于某种原因不起作用..如果有人知道如何使用 JavaScript 或 PHP 将变量从主屏幕“传递”到弹出屏幕/文件？

HTML：

```
<input type="button" value="Klik hier om uw terugverdientijd te berekenen" id="btnTerugverdientijd" onclick="basicPopup('/wp-content/themes/blackbird/phpwizard/HTML5Application/public_html/terugVerdientijd.php')" /> 
```

JavaScript：

```
function basicPopup(url) 
{
    popupWindow = window.open(url,'popUpWindow','height=500,width=500,left=1400,top=300,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes');
} 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:59:06.757

我会通过查询字符串传递值，例如 terugVerdientijd.php?name1=value&name2=value2

这使得编码更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:57:26.867

Try with get method like

```
function basicPopup(url) 
{
    url = url + '?id=1221';
    popupWindow = window.open(url,'popUpWindow','height=500,width=500,left=1400,top=300,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes');
} 
```

and at your popup you try with

```
echo $_GET['id']; 
```

thats it...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:57:41.013

使用 javascript/jQuery，您可以将变量附加到您的 url，然后在服务器端处理它们并显示在弹出窗口中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:11:19.117

```
 Java Script 
        <script>
            function Popup(url) {
                var width = 700;
                var height = 500;
                var left = (screen.width - width) / 2;
                var top = (screen.height - height) / 2;
                var params = 'width=' + width + ', height=' + height;
                params += ', top=' + top + ', left=' + left;
                params += ', directories=no';
                params += ', location=no';
                params += ', menubar=no';
                params += ', resizable=yes';
                params += ', scrollbars=yes';
                params += ', status=no';
                params += ', toolbar=no';
                newwin = window.open(url, '_blank', params);
                //newwin = window.showModalDialog(url, 'popup', params);
                if (window.focus) { newwin.focus() }
                return false;
            }

        </script>
    //in any Button Event in your CS file Add

     protected void Raisepopup(object sender, EventArgs e)
        {
            string Chaubey = "123";
            string Rakesh = "../QueryString?Chaubey=" + Chaubey ;
            ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "temp", "<script type='text/javascript'>Popup('" + Rakesh + "');</script>", false);
        }

//Kindly reply if it resolves the Issue. 
```

# actionscript-3 - 使用 Actionscript 3 修改动态文本

> ID：16166321
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:32.130
> 
> 标签：actionscript-3

目前我正在从事一个项目，该项目涉及增加/减少 Flash 电影中文本的 alpha 和比例（目前它在几组符号之间随机选择，增加所选符号的 alpha，然后缩放符号输出，同时降低 alpha）。要修改的每一位文本都是它自己的符号，占据电影的一个单独层。而且，对于最初的项目，它服务得很好，但我希望将来能够为类似项目重用代码，而不必创建要修改的新符号。

我想找到一种方法来为要修改的文本对象创建单个源（例如可以修改/显示的文本数组），但到目前为止我还没有找到。我对文本字段的发现似乎很有希望，但我找不到任何关于能够修改它们的 alpha 或比例值的信息。谁能指出我正确的方向，或者至少告诉我文本字段是否适合我想要使用的用途？

# javascript - 使用 html5shiv 会限制页面中的 javascript 使用吗？

> ID：16166323
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:36.730
> 
> 标签：javascript, html5shiv

我想使用**html5shiv**库。我的网站有许多包含 javascript 代码的页面。有些页面甚至有：`window.onload = new function() { ... }`

您是否认为**html5shiv**会破坏页面的 javascript 功能？

# vb.net - 如何检测pdf是文本可搜索还是非文本可搜索？

> ID：16166324
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:55:38.377
> 
> 标签：vb.net, pdf

我有一组 pdf，我想从中处理（VB.NET）只有那些非文本可搜索的，你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:36:57.657

一般来说，这样做的方法是打开每个页面并翻录内容流，然后查看是否执行了将文本放置在页面上的任何文本操作符。

让我解释一下这意味着什么——PDF 内容是一种小型 RPN 语言，其中包含以某种方式标记页面的操作。例如，您可能会看到如下内容：

```
BT 72 400 Td /F0 12 Tf (Throatwarbler Mangrove) Tj ET 
```

意思是：

1.  开始一个文本区域
2.  以 PDF 单位将文本基线的位置设置为 (72, 400)
3.  将字体设置为当前页面字体资源字典中名为 F0 的资源
4.  画出文字“喉莺红树林”
5.  结束文本区域

所以你可以试试捷径

1.  我的页面的资源字典是否包含任何字体？

这在某些情况下会失败，因为某些 PDF 生成工具将字体放入资源字典中并且不使用它们（误报）。如果页面内容包含包含文本的 Form XObject（假阴性），它也会失败。

1.  我的页面内容流是否有 BT/ET 运算符？

This will get you closer, but will fail if there is not content in them (false positive) or if they're not present, but there's a Form XObject which contains text (false negative).

So really, the thing to do is to execute the entire page's content stream, including recursing on all XObject to look for text operators.

Now, there's another approach that you can take using my Atalasoft's software (disclaimer, I work for [Atalasoft](http://www.atalasoft.com) and have written most of the PDF handling code, I also worked on Acrobat versions 1-4). Instead of asking, does this page contain any text, you can ask "does this page contain only a single image?"

```
bool allPagesImages = true;
using (Document doc = new Document(inputStream))
{
    foreach (Page p in doc.Pages)
    {
        if (!p.SingleImageOnly)
        {
            allPagesImages = false;
            break;
        }
    }
} 
```

Which will leave allPagesImages with a pretty decent indication that each page is all images, which if you're looking to OCR is the non-searchable documents, is probably what you really want.

The down side is that this will be a very high price for a single predicate, but it also gets you a PDF rasterizer and the ability to extract the images directly out of the file.

Now, I have no doubt that a solid engineer could work their way through the PDF spec and write some code to extend iTextPdfSharp to do this task I think that if I sat down with it, I might be able to write that predicate in a few days, but I already know most of the PDF spec. So it might take you more like two weeks to a month. So your choice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:00:54.050

我认为此选项可能是您的考虑因素，尽管我尚未测试代码，但我认为可以通过阅读您要继续的每个 PDF 文件的属性来完成。

您可以查看此链接：

```
http://www.codeguru.com/columns/vb/manipulating-pdf-files-with-itextsharp-and-vb.net-2012.htm 
```

您必须在继续之后立即阅读生产者属性。这只是一个例子。但我的建议请在此处包含您的代码，以便我们尝试帮助您。祝福你

# unix - 完成本学期频率计数器管道的 Unix 实用程序

> ID：16166325
> 
> 赞同：1
> 
> 时间：2013-04-23T09:55:39.487
> 
> 标签：unix, scripting, awk

现在我必须编写一个小脚本来获取文档目录（给出的示例是 Revelation 中的每一章）并将它们转换为词频文档。到目前为止，我有：

```
foreach file ($1/*)
   java Stemmer $file | tr " " "\n" | tr "[:punct:]" "\n" | egrep -v ^$ | sort |
   egrep -x -v -f stopwords 
```

所以，现在它遍历每个文件，通过 Porter 词干分析器运行它，去掉所有标点符号和多余的空格和黑线，对它们进行排序，并消除所有的停用词。我的问题是，我能做些什么来使输出从

```
apple  
boy  
boy  
cat  
cat  
cat  
dog 
```

至

```
apple 1  
boy 2  
cat 3  
dog 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:59:43.310

最简单的方法是`uniq -c`在 presorted 中用作您的列表，但输出不是您想要的确切格式：

```
$ uniq -c 文件
       1个苹果
       2个男孩
       3 只猫
       1 条狗

```

这个`awk`脚本给出了明确的格式：

```
$ awk '{a[$0]++}END{for(k in a) print k, a[k]}' file
apple 1
cat 3
boy 2
dog 1 
```

注意：您应该用单个`awk`脚本替换管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:02:49.637

```
awk '{a[$0]++}END{for(x in a)print x,a[x]}' input|sort 
```

将输出与您预期的完全相同。（用你的例子），保持单词 alpha-beta 排序。

# mysql - 如果 endDate 中没有空值，则查找最大日期？

> ID：16166328
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:41.683
> 
> 标签：mysql, sql

我的数据库中有以下行。

```
 profileID |     startDate     |   endDate
   -------------------|-------------------|--------------
    Jr.software eng.  |2012-07-01         |2030-01-01
    ..................|...................|..............
     Eng              |2013-03-28         |2013-03-28
    ..................|...................|..............
     Sr.eng           |2013-04-09         |2013-04-17
    ..................|...................|..............
     CEO              |2012-11-21         |
    ..................|...................|.............. 
```

上面的行存储在我的数据库中。我想得到这样的结果。

```
1\. If endDate is null then I get only it related startDate. 
```

就像上面一行我的预期结果是

```
 profileID  |     startDate     |   endDate
   -------------------|-------------------|--------------
     CEO              |2012-11-21         |
    ..................|...................|.............. 
```

1.  如果没有空 endDate 那么我想从 endDate 列表中获取最大的 endDate。

但是如果行是这样的那么

```
 profileID  |     startDate     |   endDate
   -------------------|-------------------|--------------
    Jr.software eng.  |2012-07-01         |2030-01-01
    ..................|...................|..............
     Eng              |2013-03-28         |2013-03-28
    ..................|...................|..............
     Sr.eng           |2013-04-09         |2013-04-17 
```

那么我的预期结果是

```
 profileID  |     startDate     |   endDate
   -------------------|-------------------|--------------
    Jr.software eng.  |2012-07-01         |2030-01-01
    ..................|...................|.............. 
```

我需要一个mysql查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:00:14.270

```
Select profileId, Case When endate is NULL then startDate 
       Else Max(EndDate) end  As `Date`
From tablename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:59:32.900

```
SELECT
    l.profileID,
    IF(l.endDate IS NULL,l.startDate,MAX(endDate)) AS Date
FROM mytable AS l 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:36:58.307

我猜你正在寻找类似的东西：

```
 SELECT profileID,startDate,MAX(endDate) AS endDate
 FROM table1 
 group by profileID 
```

[**在这里演示**](http://sqlfiddle.com/#!2/ead57/10)

# html - 视频无法在某些浏览器中播放 (IE10)

> ID：16166329
> 
> 赞同：1
> 
> 时间：2013-04-23T09:55:43.493
> 
> 标签：html, video, browser

我正在尝试让视频在所有浏览器中播放，但是虽然它在 chrome 中运行良好，但在 Firefox 中出现错误，并且在 IE 10 中视频框加载但不运行

这是代码：

```
<video id="myVideo" width="100%"  controls="controls">
                        <source src="..\resources\Tutorial\video.ogg"  type='video/ogg; codecs=&quot;theora, vorbis&quot;' />
                        <source src="..\resources\Tutorial\video.mp4" type='video/mp4;'/>
                    </video> 
```

如何让我的视频在所有浏览器中播放？

多谢你们 ：）

试过：

```
<video id="myVideo" width="100%"  controls="controls">
                        <source src="..\resources\Tutorial\video.webm" type='video/webm; codecs="vp8, vorbis"' />
                        <source src="..\resources\Tutorial\video.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' /> 
                        <source src="..\resources\Tutorial\video.ogv" type='video/ogg; codecs="theora, vorbis"' /> 
                        Video tag not supported. Download the video <a href="..\resources\Tutorial\video.webm">here</a>. 
                    </video> 
```

但也没有运气，和上面一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:50:54.977

简单的解决方案

上面的斜线是错误的，应该是/现在除了 IE 10 之外的所有浏览器都很好，没有错误只是不运行

# vb.net - 添加子节点时Treeview找不到父节点

> ID：16166332
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:48.443
> 
> 标签：vb.net, treeview, nodes

所以我有这个 Treeview，我手动添加了一些项目。可以毫无问题地添加父节点，但是当我想将子节点添加到我通过键搜索的父节点时，由于某种原因它失败了。

这是代码：

```
tvConstantGroups.Nodes.Add("Boekhouding")
tvConstantGroups.Nodes("Boekhouding").Nodes.Add("Exact") 'These 2 lines fail
tvConstantGroups.Nodes("Boekhouding").Nodes.Add("BoB") 
```

我收到的错误消息是节点“Boekhouding”不存在（**NULL** / **Nothing**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:44:25.280

```
tvConstantGroups.Nodes.Add("Boekhouding", "Boekhouding")
tvConstantGroups.Nodes("Boekhouding").Nodes.Add("Exact", "Exact")
tvConstantGroups.Nodes("Boekhouding").Nodes.Add("BoB", "Exact") 
```

Nodes.Add 的第一个参数是 Text 不是 Node 的名称

# jquery - 非 CSS 的 jQuery 动画计时

> ID：16166333
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:49.877
> 
> 标签：jquery, setinterval, intervals, timing, easing

我想以秒为单位计数，`0`并`n`在`x`每一步调用一个函数。

例如：

```
var count = 0,
    targetCount = 100,
    duration = 500,
    timing,
    interval;

timing = duration / targetCount,

interval = setInterval(function() {
    count ++,

    console.log("call onIntervalProgress()", count);

    if(count === targetCount)
        clearInterval(interval),
        console.log("call onIntervalDone()", count)
}, timing); 
```

问题是我不想那样线性地做。我想使用 easing 来完成这项工作。我知道 jQuery 提供了计时功能。是否可以在非 CSS 的东西上使用 jQuerys “swing”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:01:08.113

尽管这不是您问题的确切答案，但它可能会有所帮助。你真的不需要 jQuery 函数来做到这一点。您可以轻松使用 setTimeout 和您自己的计时功能。就像是：

```
 var counter = 0;

  function countSomething() {

       counter++;
       // Call functions, do stuff... whatever you want

       if (counter < n) {
           setTimeout("countSomething()", 2000/counter); // Instead of 2000/counter do something that is appropriate for what you need
       }
  }

  countSomething(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:15:50.913

这是一个 jQuery 插件，它完全符合我的要求：

[http://www.bennadel.com/blog/2007-Using-jQuery-s-animate-Method-To-Power-Easing-Based-Iteration.htm](http://www.bennadel.com/blog/2007-Using-jQuery-s-animate-Method-To-Power-Easing-Based-Iteration.htm)

欢迎任何更好的想法（没有内部元素创建等）！

# eclipse - 如何调试java小程序

> ID：16166335
> 
> 赞同：0
> 
> 时间：2013-04-23T09:55:56.003
> 
> 标签：eclipse, applet, java

我对 Java 和 Java 小程序不太熟悉，但我必须解决这个问题。

自 JRE 7 Update 21 以来，小程序在所有浏览器中都引发了异常。

![在此处输入图像描述](https://i.stack.imgur.com/YZ5Jt.png)

我需要调试该应用程序，因为该错误没有提供任何线索（该应用程序已经运行多年，在最新的 JRE 更新之后客户端无法再使用它）。

因此，小程序在 .NET 应用程序中用作 JAR 文件。它被称为带有一些代码的javascript：

```
<html>
<head>
    <script type="text/javascript">
        var i = 0;
        var path = "\\\\\\\\reaktorm\\\\Outgoing\\\\test";
        var ext = ".tif";
        var fullPath = "";

        function nextImage() {
            if (i==2) {
                alert("There is no next image in collection!");
            } else {
                i++;
                displayImage();
            }
        }

        function previousImage() {
            if (i<1) {
                alert("There is no previous image in collection!");
            } else {
                i--;
                displayImage();
            }
        }

        function displayImage() {
            //fullPath= path + (i<10?"0"+i:i) + ext;
            fullPath= path + ext;
            alert(fullPath);
            document.webViewer.display(fullPath);
        }
    </script>
</head>
<body>
    <div style="width:100%; height:100%;">
        <applet name="webviewer" archive="..\webviewer.jar" code="my.webviewer.WebViewerApplet.class" width="100%" height="100%">
            <param name="java_arguments" value="-Xmx512m">
            <param name="image_source" value="C:\test\test.tif">
        </applet>
    </div>
    <form id="testForm" name="testForm" style="display:block">
        <input type="button" onClick="previousImage();" value="previous" />
        <input type="button" onClick="nextImage();" value="next" />
    </form>
</body>
</html> 
```

所以如果我把它放在 html 文件中并在浏览器中打开它，我会得到上面的 RuntimeException。

现在我想调试以找出这个异常的原因。我有 eclipse、源代码和 JAR 导出。

我已经尝试通过启动进行远程调试：

```
java -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005 -jar webviewer.jar 
```

然后我尝试通过连接到 locahost:5005 来使用 Eclipse 中的调试选项下的“远程 Java 应用程序”连接到该应用程序，但我得到连接被拒绝。

请有人指出我的解决方案 - 我如何在 Eclipse 中调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:13:02.310

在 Eclipse 中，导航到您的`Applet`类，然后单击**Run** in Eclipse 菜单，然后单击**Debug As**和**Java Applet**。Eclipse 将以调试模式启动您的小程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:05:52.467

[java 控制台](http://www.java.com/en/download/help/javaconsole.xml)将为您提供有关您的小程序抛出的任何异常的完整堆栈跟踪。您可以按照链接的 Oracle 文档中的说明启用它。

# macos - 为什么 NSWindow 动画师 setFrame:display:animate: 有时不起作用？

> ID：16166338
> 
> 赞同：2
> 
> 时间：2013-04-23T09:56:11.880
> 
> 标签：macos, cocoa, core-animation

我是可可的新手。
我正在努力扩展项目的功能。

该项目的原始功能是打开一个文件并在 nsbox 中显示文件图标（在 nswindow 中？）

当我单击菜单打开时，它工作正常。
但是当我以编程方式打开文件时（使用菜单调用的相同 openfile 函数），它不显示文件图标。

```
[[self.window animator] setFrame:frame display:YES animate:YES]; 
```

框架是正确的，但它没有改变。

有什么我错过的吗？

您可以发表评论，以便我提供更多详细信息。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T18:45:25.987

`setFrame:display:animate`是窗口对象而不是动画师上的选择器。

```
[self.window setFrame:frame display:YES animate:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T03:39:59.370

哦，我知道现在发生了什么。我真蠢。

当我单击按钮时，它位于主线程上。

但是当我在网络请求上调用它时，它不在主线程上。

所以，请确保你在主线程上做任何与动画相关的事情！

# javascript - Enable multiple textbox with single checkbox

> ID：16166347
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:56:26.097
> 
> 标签：javascript

I'm creating a checkbox to enable multiple textbox. If it is checked, it will enable and disabled by default.

**Javascript code :**

```
$(document).ready(function(){
    $('#sccb').click(function(){
        if (this.checked) {
            $('#cns').removeAttr("disabled");
            $('#cns2').removeAttr("disabled");
            $('#cns3').removeAttr("disabled");
        } else {
            $("#cns").attr("disabled", true);
            $("#cns2").attr("disabled", true);
            $("#cns3").attr("disabled", true);
        }
    });
}); 
```

**HTML code :**

```
<input type="checkbox" id="sccb" name="science" value="science">
<input type="text" id="cns" name="coornamescience" disabled="disabled" size="30" />
<input type="text" id="cns2" name="coornamescience" disabled="disabled" size="30" />
<input type="text" id="cns3" name="coornamescience" disabled="disabled" size="30" /> 
```

It works on jsfiddle, but it doesn't work in a .html file, please help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:00:42.283

您忘记添加 jquery 了吗？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#sccb').click(function(){
        if (this.checked) {
            $('#cns').removeAttr("disabled");
            $('#cns2').removeAttr("disabled");
            $('#cns3').removeAttr("disabled");
        } else {
            $("#cns").attr("disabled", true);
            $("#cns2").attr("disabled", true);
            $("#cns3").attr("disabled", true);
        }
    });
});
</script>
</head>
<body>
    <form ...>
         Your form here
    </form>
</body>
</html> 
```

# java - Exception when trying to instantiate a Scala class from Java

> ID：16166349
> 
> 赞同：1
> 
> 时间：2013-04-23T09:56:31.917
> 
> 标签：java, scala, noclassdeffounderror

This Question should not be closed as suggested answer does not answer question in this case.

The below code causes this error :

```
Exception in thread "main" java.lang.NoClassDefFoundError: scala/ScalaObject
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at scala.java.mixed.test.Driver.main(Driver.java:17)
Caused by: java.lang.ClassNotFoundException: scala.ScalaObject
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 13 more 
```

The code :

```
package parallel

import com.recommendations.EucleudianProperties

class TestData(var distanceMap : java.util.Map[java.lang.String , java.lang.String]) {

  object ProcessData{
    def apply {
      println("in apply method "+distanceMap.size)
    }
  }

}

package scala.java.mixed.test;

import java.util.HashMap;
import java.util.Map;
import parallel.TestData;

public class Driver {

    public static void main(String args[]){

        Map<String , String> distanceMap = new HashMap<String , String>();

        new TestData(distanceMap);
    }

} 
```

What is causing this error ? Am I calling the Scala class TestData from java class Driver correctly ?

EDIT : here is the build path

![enter image description here](https://i.stack.imgur.com/6E8zJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:51:33.487

对我来说，问题是 scala-library.jar 没有在 **Eclipse 运行配置**中的类路径上配置，一旦我添加了它，它就会按预期运行。这是我更新的类路径：

![在此处输入图像描述](https://i.stack.imgur.com/6cqr6.png)

# html - rails 参数化表单数据

> ID：16166351
> 
> 赞同：0
> 
> 时间：2013-04-23T09:56:40.787
> 
> 标签：html, ruby-on-rails

我有一个 Rails 应用程序，它允许在`/posts/search/:searchstring`收到形式的获取请求时搜索帖子。当我使用浏览器的 url 栏输入搜索字符串时，我的功能没有问题，但我一直在尝试创建搜索表单。

如何在 rails 中创建一个 html 表单，允许我使用上述语法发送 get 请求？我会被卡住使用控制器方法重定向吗？我真的很想要这个功能，因为我坚信 URL 是 UX 的一部分，我讨厌像这样丑陋的 URL：

```
http://example.com/search?utf8=%E2%9C%93&q=searchstring&commit=Search 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:30:00.187

表单会做表单会做的事情，如果你有一个使用 GET 的表单，它会将这些参数序列化到查询字符串中。

但是由于您使用*的是*get，因此您也不需要提交表单。相反，您可以将浏览器发送到 URL。

例如，在您的 JS 中的某处：

```
function doSearch(form) {
  // This assumes that the first input of your form is the search
  // box.  YMMV.
  var query = encodeURIComponent(form.elements[0].value);

  // just send the browser to the constructed URL
  window.location = form.action + "/" + query;

  // and return false to prevent the actual submit
  return false;
} 
```

然后在你的html中：

```
<form action = "/posts/search" onsubmit="return doSearch(this)">
  <input type="text" name="searchstring" />
  <input type="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:19:10.287

如何以这种方式添加表单：

```
<form method="get" action="<%= search_posts_url_path %>">#text input here with name "searchstring"</form> 
```

# javascript - 使用猫鼬查询仅获取子文档

> ID：16166354
> 
> 赞同：7
> 
> 时间：2013-04-23T09:56:56.747
> 
> 标签：javascript, node.js, mongodb, mongoose

我有一个类似的数据结构：

```
var GrandGrandChild = mongoose.Schema({
    attribute: String,
    id: Number
});

var GrandChild = mongoose.Schema({
    children: [GrandGrandChild],
    id: Number,
    irrelevantAttribute: String
});

var Child = mongoose.Schema({
    children: [GrandChild],
    id: Number,
    irrelevantAttribute2: String
});

var Parent = mongoose.Schema({
    children: [Child],
    id: Number,
    irrelevantAttribute3: String
});

var GrandParent = mongoose.Schema({
    children: [Parent],
    id: Number,
    irrelevantAttribute4: String
}); 
```

这些是很多包含子文档的集合。请注意，ID 对于它们的兄弟姐妹来说是唯一的，但对于具有相同架构的所有元素来说并不是唯一的。

所以一个祖父母可以有一个 id 为 0 的父母，另一个祖父母也可以有一个 id 为 0 的父母。但一个祖父母不能有 2 个 id 为 0 的父母。

唯一被保存的模式是 GrandParent 模式，mongoose/mongodb 为这个祖父母的所有数据制作了一个很好的大单文档。（正是我要找的）

所以这是我的问题：我有一个 GrandParent ID、Parent ID、子 ID、GrandChildID 和 GrandGrandChild ID，我想以某种方式只获取所有这些 ID 指向的 GrandGrandChild 对象。

丑陋的方法是，但目前我可以开始工作的唯一方法是进行查询以获取 GrandParent 的这个大文档，然后手动循环遍历所有数组以找到正确的父级，然后再次循环以找到正确的父级孩子，然后再次循环以找到正确的孙子，然后再次循环并在这里找到我需要的孙子。

我的问题是，我将如何在猫鼬中编写一个查询，该查询要么仅返回孙子文档，要么仅返回包含子属性的祖父文档，并且在该子属性中，仅包含引用子对象的父对象引用孙对象的孙对象，允许以下结果：

```
GRANDPARENT  PARENT      CHILD      GRANDCHILD   GRANDGRANDCHILD
grandparent.children[0].children[0].children[0].children[0].attribute; 
```

我希望有人可以在这个查询上帮助我，据我所知是这样的：

```
GrandParentModel.findOne(
    {
        "id" : 0,
        "children.id" : 0,
        "children.children.id" : 0,
        "children.children.children.id" : 0,
        "children.children.children.children.id" : 0
    },
    {"children.children.children.children.$" : 1}, callback); 
```

这个查询的问题是没有修剪掉不必要的兄弟姐妹。

我希望有人可以帮助我。

希尔克·布朗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T10:03:23.617

我问这个问题已经有一段时间了，但我想我找到了一种相当优雅的方式来处理这些结构。

在这种情况下，我将展示它如何仅与 GrandParent、Parent 和 Child 一起使用。

我没有在每个文档（GrandParent.children、Parent.children）中存储子文档列表，而是创建了以下结构的唯一标识符：

```
Child.referenceId = {
    grandparent: "some key to the grandparent of the parent",
    parent: "some key to the parent",
    child: "key of this child"
};

Parent.referenceId = {
    grandparent: "some key to its grandparent",
    parent: "key of this parent"
}

GrandParent.referenceId = {
    grandparent: "key of this parent"
} 
```

这将创建 GrandParent > Parent > Child 的层次结构。

模型将类似于以下内容：

```
var idStructure = {
    grandparent: { type: String, required: true },
    parent: { type: String, required: false },
    child: { type: String, required: false }
};

var GrandParent = mongoose.Schema({
    id: idStructure,
    irrelevantAttribute: String
});

var Parent = mongoose.Schema({
    id: idSructure,
    irrelevantAttribute: String
});

var Child = mongoose.Schema({
    id: idStructure,
    irrelevantAttribute: String
}); 
```

请注意，父级并不直接知道其父级，因为它们没有存储为子文档。然而，Parent 和 Child 之间仍然存在通过 referenceId 的连接。

在搜索 GrandParent 的整个家族树时，只需执行 3 个查询，然后正确连接它们：

```
// First find all children which belong to the grandparent
Child.find({"id.grandparent" : "some key to the grandparent"})
.exec(function(err, children)
{
     if(err)
         return;

     Parent.find({"id.grandparent" : "some key to the grandparent"})
     .exec(function(err, parents)
     {
         if(err)
             return;

         // Loop through the parents and children to connect them before returning to a client
         for(var i = 0; i < parents.length; i++)
         {
             var parent = parents[i];
             parent.children = [];
             // loop through the children to check if they belong to the current parent
             for(var j = 0; j < children.length; j++)
             {
                 var child = children[j];
                 if(parent.id.parent == child.id.parent)
                     parent.children.push(child);
             }
         }

         // After filling the children into the parents, get the grandparents and do the same for the parents and grandparents as done for the children and parents.
        GrandParent.find({"id.grandparent" : "some key to the grandparent"})
       .exec(function(err, grandparents)
       {
           // TODO: the same as done above (two loops, one loops the grandparents, other loops the parents
           // Once this is finished, we have a filled grandparent
       });

     });
}); 
```

上面的代码将导致只有一个祖父母，其中充满了父母，而父母则充满了孩子。

找不到更多祖父母的原因是因为祖父母的 id 应该是唯一的，因为祖父母的 referenceId 只有祖父母属性。

我希望我的观点清楚，因为通过这种方法，人们可以轻松地搜索一个特定的孩子，通过参考 id 轻松获得其父母，也通过参考 id 获得其祖父母。

这可能有点复杂，但是一旦你自己弄清楚了方法，它就很简单了。

希尔克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T15:38:54.620

很难让这种事情以一种干净的方式工作。

我没有找到关于这个主题的干净解决方案，但也许我可以帮助你解决循环问题。您可以使用以下方法避免循环： var doc = parent.children.id(id); [查找子文档](http://mongoosejs.com/docs/subdocs.html)

我希望这对你有帮助。问候，塞巴斯蒂安。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T14:27:37.863

这对我有用

```
 model.find({_id:args.id},{ commentList: { $elemMatch: { _id: todo.commentList[todo.commentList.length-1] } } },(err, todos) => {
         if (err) reject(err)
         else resolve(todos)
         console.log(todos);
      }) 
```

[$elemMatch（投影）](https://docs.mongodb.com/manual/reference/operator/projection/elemMatch/)

# php - SQL object - How to use it properly

> ID：16166357
> 
> 赞同：1
> 
> 时间：2013-04-23T09:57:05.947
> 
> 标签：php, sql, class, object, mysqli

I've made this class to handle all of my sql-queries. But I'm unsure of how to use it properly.

The class looks something like this (this is a VERY simple version of it):

```
class sql {
    private $conn;
    private $data;

    function __construct() {
        //makes connection to DB and sets $conn and $data
    }
    public function select($variables, $table, $criterias) {
        //returns an array with all the info from DB
    }
    function __destruct() {
        //closes the sql-connection
    }
} 
```

The question now is: Is this going to overload the DB, if I use it multiple times on every page-load? (refered to as Example #1)

```
$dbInfo = (new sql)->select($var,$tab,$cri);
$moreInfo = (new sql)->select($var2,$tab2,$cri2);
$evenMoreInfo = (new sql)->select($var3,$tab3,$cri3); 
```

Would it be beneficial to make my `sql` class's methods static?

Or should I not create a new instance of a `sql` object every time I want to make a query (like the example below - refered to as Example #2)?

```
$sql = new sql();
$dbInfo = $sql->select($var,$tab,$cri);
$moreInfo = $sql->select($var2,$tab2,$cri2);
$evenMoreInfo = $sql->select($var3,$tab3,$cri3); 
```

How and when is Example #1 the better choice over Example #2, and vice versa?

If I assume that Example #1 is going to take the most resources from the DB, when would you pick Example #1 over Example #2?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:01:25.833

您的示例 2 更常见，但是 SQL 对象通常是静态/单例。因此，每个服务器请求它都会连接到数据库一次。

您的基本 SQL 对象应处理连接到数据库，然后处理基本输入/输出，例如执行 SQL 字符串并返回结果。

然后，您可以在每个对象/表的基础上添加新对象，而不是与此 SQL 单例接口。这些类将根据它们的表、连接、字段名称/类型等来处理构建它们的自定义 SQL。

例如：

一个非常基本的“表”对象看起来像这样

```
class SomeTableObject
{
    m_TableName = 'SomeTable'; // Table to get Data from

    function GetSelectSQL()
    {
       return "SELECT * FROM ".$this->m_TableName;
    }

    function Select($where)
    {
        $sql = $this->GetSelectSQL().$where;
        return SqlSingleton::Execute($sql);
    }

    function GetByID($id)
    {
       $where = " WHERE FieldNameForID=$id";
       return $this->Select($where);
    }
} 
```

如果这些对象扩展了具有基本 GetSelectSQL、TableName、Select 等函数的基类，它们会更好地工作。GetByID（和其他获取、更新、插入）因表而异。

# javascript - Javascript：获取没有 ID 的值

> ID：16166358
> 
> 赞同：0
> 
> 时间：2013-04-23T09:57:08.157
> 
> 标签：javascript, getelementsbyclassname

```
<div class="CurrencyQuote">

<div class="column">
    <div class="form-label">Pair: </div><div>BUX/TIX</div>
    <div class="form-label padding-top">Spread: </div><div>113</div>
</div>
<div class="column">
    <div class="form-label">Rate: </div><div>10.159/10.272</div>
    <div class="form-label padding-top">High/Low: </div><div>115</div>
</div>

</div> 
```

我想获得值 113 和值 115，但是如果没有 javascript 中的 ID，我该如何做呢？我无法更改 HTML，我需要分别获取这 2 个值，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:59:05.543

您可以使用[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)CSS 选择器来使用和构建元素的唯一路径，如下所示：

```
var els = document.querySelectorAll( '.column .form-label.padding-top ~ div' );

for( var i=els.length; i--; ) {
  console.log( els[i].innerHTML );
} 
```

* * *

^(为了让所有 jQuery 粉丝也开心：

```
$( '.column .form-label.padding-top ~ div' ).each( function() { console.log( this.text() ); } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:05:19.410

使用 JQuery，您可以这样做

```
$(document).ready(function(){

    $(".padding-top").each(function(){
     alert($(this).next().html());
    });

}); 
```

[http://jsfiddle.net/WYSd4/](http://jsfiddle.net/WYSd4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:07:08.760

这应该与任何类型的浏览器都非常兼容；它使用类搜索所有元素`column`，然后找到最后一个`<div>`子元素：

```
var columns = document.getElementsByClassName('column'),
values = [];

for (var i = 0, n = columns.length; i != n; ++i) {
  var node = columns[i].lastChild;
  // find last div child
  while (node && node.nodeName != 'DIV') {
    node = node.previousSibling;
  }
  if (node) {
    values.push(node.textContent || node.innerText || '');
  }
}

console.log(values); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:11:47.983

```
var query = document.querySelectorAll('.column > .form-label');
for(var i=0,l=query.length;i<l;++i){
    if(query[i].innerHTML == 'Spread: '
    || query[i].innerHTML == 'High/Low: '
    ) console.log(query[i].nextElementSibling.innerHTML)
} 
```)

# sql-server-2008 - What is the optimized way to insert large number of records in SQL Server 2008 R2

> ID：16166364
> 
> 赞同：1
> 
> 时间：2013-04-23T09:57:15.300
> 
> 标签：sql-server-2008

I am trying to insert some hundreds of thousands of records in SQL Server 2008 R2. What would be the best approach to insert them in least amount of time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:23:56.870

SSIS 肯定会在最短的时间内完成这项工作（如果您需要定期进行，那么您可以创建一个工作来完成它，然后运行该工作）另一方面，如果它是一个关闭的，那么有SQL 管理工作室中的向导。或者您可以只制作一个 SQL 插入查询，但是，关闭插入（到）表上的索引并将插入（任意）10,000 条记录批量插入，然后重新启用您的索引（它们将被重建并在您重新启用它们时更新统计信息）

# jquery - Metro UI 平铺/快速拨号 Web 项目 ASP.Net

> ID：16166372
> 
> 赞同：0
> 
> 时间：2013-04-23T09:57:31.130
> 
> 标签：jquery, asp.net, asp.net-mvc, microsoft-metro

不知道从哪里开始，所以这里......

我想要制作某种与 Opera 快速拨号具有类似功能的快速拨号类型的网站/网页，您可以在其中向页面添加超链接，它们显示为大按钮并将您带到目标页面/站点超链接，最终我希望用户能够添加他们自己的以及从预先批准的链接列表中进行选择，我希望将其保存到我们的 SQL 数据库中......虽然这不是我的问题有某种想法如何从后面的代码中添加 DIV/超链接...

问题是，我真的很想让这个页面遵循 Metro Style UI，在网格布局中紧密贴图，理想情况下具有拖放功能，可能还可以调整大小的图块，我希望能够添加图像到必要的瓷砖的整个表面（如 Windows 8 Metro 瓷砖）我今天早上在网上到处跑，寻找这样做的方法，并找到了一些例子，即 JQuery Masonry（似乎不支持 Draggable 瓷砖）和Packery，但我只是在这里发帖，看看是否有人对这个项目有任何可能的建议以及从哪里开始？

我有 Visual Studio 2010，我希望使用带有 VB 或 C# 的 ASP.Net 作为代码，如果有人对此提出建议，我可以访问 Telerik 组件，尽管我今天早上已经完成了演示并且不能找到有关此总体布局框架的任何信息（除非我错过了什么？）

无论如何，提前谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:16:33.903

如果我了解您的要求，那么最好的办法是您可以参考[Drop Tiles](http://www.droptiles.com)并在 .net 中下载示例代码

# javascript - Implement instant search adding and removing html elements dynamically

> ID：16166374
> 
> 赞同：0
> 
> 时间：2013-04-23T09:57:34.037
> 
> 标签：javascript, html, ajax, servlets

I am a beginner at HTML and javascript so apologies if the questions below appear obvious. I am trying to implement instant search in a website with pure java script but I have a few questions.

Right now I plan to have a function respond to each onkeyup event. Making use of AJAX, the function will contact a server which returns links separated by a newline character. now the questions: If the text returned by the server is already in the form of html links and paragraphs, is there a way I can insert it after the html input text box? If so how can I do this? I have found references to createElement() and appendChild() methods but am not sure how they work. Also, people have suggested using a tag but I have never used this in html and am not sure what it is.

If the above is not possible I was thinking of doing the following, When the text is returned by the server, 1\. use String.split() to turn the returned text into an array of results. 2\. for each element in the array 3\. Create an element and insert it . (still need to check exactly how to do this). 4. end for

A problem being is that I would need a quick way of clearing the previous search results each time a key would be pressed.

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:21:56.930

最好的方法是通过 Json 返回。[Json 将有所有搜索结果，您可以通过http://www.json.org/js.html](http://www.json.org/js.html)轻松使用 Json

这将是代替拆分内容的好方法。

# url - How to split Download-URL with slashes and/or backslashes into URL and Filename

> ID：16166375
> 
> 赞同：0
> 
> 时间：2013-04-23T09:57:34.790
> 
> 标签：url, batch-file, split, filenames

how can i split (with a **batch script**) Download-URLs like

```
[with slash]
a) http://www.someone.com/download/files/filename.exe
b) http://www.someone other.com/some files/filename 1.exe  (with spaces !)

[with backslash]
c) http:\\www.someone.com\download\files\filename.exe
d) http:\\www.someone other.com\some files\filename 1.exe  (with spaces !)

[mixed slash and backslash]
e) http:\\www.someone.com/download\files/filename.exe
f) http://www.someone other.com\some files/filename 1.exe  (with spaces !)

and all of the above when there is no HTTP part (starting with "www.") 
```

into the (Base-)URL part and the filename part.

One batch script for all variations (and for more than one variable - in a Loop) would be nice :-)

Something like:

```
setlocal EnableDelayedExpansion
For %%G in (var1, var2, var3) do (
 set /A COUNT+=1

 ... routine to split "var1", "var2" and "var3" into temporary variables BASEURL and FILENAME

 set Folder!COUNT!=%BASEURL%
 set Name!COUNT!=%FILENAME%
)

Output:
For /L %%A in (1,1,3) do (
 echo URL: !Folder%%A! --- FIILENAME: !Name%%A!
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:39:13.727

```
@ECHO OFF
SETLOCAL
SET download=https://www.someone.com/download/files/filename.exe&CALL :splitme
SET download=https://www.someone other.com/some files/filename 1.exe&CALL :splitme
SET download=https:\\www.someone.com\download\files\filename.exe&CALL :splitme
SET download=https:\\www.someone other.com\some files\filename 1.exe&CALL :splitme
SET download=https:\\www.someone.com/download\files/filename.exe&CALL :splitme
SET download=https://www.someone other.com\some files/filename 1.exe&CALL :splitme
SET download=http://www.someone.com/download/files/filename.exe&CALL :splitme
SET download=http://www.someone other.com/some files/filename 1.exe&CALL :splitme
SET download=http:\\www.someone.com\download\files\filename.exe&CALL :splitme
SET download=http:\\www.someone other.com\some files\filename 1.exe&CALL :splitme
SET download=http:\\www.someone.com/download\files/filename.exe&CALL :splitme
SET download=http://www.someone other.com\some files/filename 1.exe&CALL :splitme
SET download=//www.someone.com/download/files/filename.exe&CALL :splitme
SET download=//www.someone other.com/some files/filename 1.exe&CALL :splitme
SET download=\\www.someone.com\download\files\filename.exe&CALL :splitme
SET download=\\www.someone other.com\some files\filename 1.exe&CALL :splitme
SET download=\\www.someone.com/download\files/filename.exe&CALL :splitme
SET download=//www.someone other.com\some files/filename 1.exe&CALL :splitme
GOTO :eof

:splitme
IF NOT "%download%"=="%download:*:=%" SET "download=%download:*:=%"
FOR /f "tokens=1*delims=\/" %%i IN ("%download%") DO (
SET domain=%%i&SET file=%%~nxj&SET lop=//%%i&SET "pol=%%~nxj"
)
:lop
SET download=%download:~1%&set lop=%lop:~0,-1%&IF DEFINED lop GOTO lop
:pol
SET download=%download:~0,-1%&set pol=%pol:~0,-1%&IF DEFINED pol GOTO pol
ECHO + "%domain%" + "%download%" + "%file%"
GOTO :eof 
```

产生：

*   “www.someone.com”+“/download/files/”+“文件名.exe”
*   “www.someone other.com”+“/一些文件/”+“文件名 1.exe”
*   “www.someone.com”+“\download\files\”+“文件名.exe”
*   “www.someone other.com”+“\一些文件\”+“文件名 1.exe”
*   “www.someone.com”+“/download\files/”+“文件名.exe”
*   “www.someone other.com”+“\一些文件/”+“文件名 1.exe”
*   “www.someone.com”+“/download/files/”+“文件名.exe”
*   “www.someone other.com”+“/一些文件/”+“文件名 1.exe”
*   “www.someone.com”+“\download\files\”+“文件名.exe”
*   “www.someone other.com”+“\一些文件\”+“文件名 1.exe”
*   “www.someone.com”+“/download\files/”+“文件名.exe”
*   “www.someone other.com”+“\一些文件/”+“文件名 1.exe”
*   “www.someone.com”+“/download/files/”+“文件名.exe”
*   “www.someone other.com”+“/一些文件/”+“文件名 1.exe”
*   “www.someone.com”+“\download\files\”+“文件名.exe”
*   “www.someone other.com”+“\一些文件\”+“文件名 1.exe”
*   “www.someone.com”+“/download\files/”+“文件名.exe”
*   “www.someone other.com”+“\一些文件/”+“文件名 1.exe”

解释是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:17:12.823

谢谢大家的答案。但我想拆分保存在变量中的下载 URL。我忘了说我也想在 FTP 地址上使用脚本。但是在您的答案和网络上的一些进一步研究的帮助下，我找到了自己的解决方案。

```
@echo off
setlocal EnableExtensions
setlocal EnableDelayedExpansion
mode con:cols=120 lines=32 && color 3E
title Example for splitting Download-URL into URL and Filename
cls

set _BASEURL=ftp://ftp.rarlab.com/rar/
set _WRx32=http://www.rarlab.com/rar/wrar v4.20.exe
set _WRx64=http:\/www.rarlab.com\rar files/winrar-x64-420.exe
set _WRLNG=rarlng.rar

:SPLIT
set COUNT=0
echo:_BASEURL = %_BASEURL%
echo:_WRx32   = %_WRx32%
echo:_WRx64   = %_WRx64%
echo:_WRLNG   = %_WRLNG%
echo:_____________________________________________________________________________

For %%A in ("%_BASEURL%", "%_WRx32%", "%_WRx64%", "%_WRLNG%") do (
 set Folder=
 set Name=
 set /A COUNT+=1
 if not %%~xA.==. (
  set "_vartmp=%%~A" ) else (
  set "_vartmp=%%~A\NO_FILE.EXT" )
 for %%B in ("Z:\!_vartmp!") do set "FILE!COUNT!=%%~nxB"
 for %%B in ("Z:\!_vartmp!") do set "_VAR=%%~dpB"
 set "_VAR=!_VAR:Z:\=!"
 if not $!_VAR!==$ (
  set "_VAR=!_VAR::\=:\\!"
  set "URL!COUNT!=!_VAR:~0,-1!" ) else (
  set "URL!COUNT!=NO_URL" )
)

set _BASEURL=%URL1%

set COUNT=0
:LOOPOUT
 set /A COUNT+=1
 if not defined URL%COUNT% exit /b 1
 if !URL%COUNT%!==NO_URL set "URL!COUNT!=%_BASEURL%"
 echo URL%COUNT%: !URL%COUNT%!\         --- FILE%COUNT%: !FILE%COUNT%!
goto LOOPOUT

SETLOCAL DisableDelayedExpansion
goto :EOF 
```

首先，我将下载 URL 保存到变量中，然后将它们打印出来。现在我将链接拆分为 URL 和文件名。然后我将 URL 和文件名保存到动态变量（URL + 连续编号和 FILE + 相同的连续编号）。如您所见，变量“_WRLNG”没有 URL，因此保存了字符串“NO_URL”而不是 url。并且变量“_BASEURL”中的链接没有文件名，因此保存了字符串“DUMMY.EXT”。必须这样做才能没有空的/缺失的 URL+Nr/FILE+Nr 变量并获得正确的 1:1 相关性。

通过首先添加（虚拟）驱动器号（“Z：\”）然后将其从下载 URL 中删除，从而可以使用“参数扩展”来完成拆分。使用 "~dp" 命令处理器将所有斜杠更改为反斜杠 - 但它也会删除双斜杠/反斜杠，因此必须再次添加 "http:\" 或 "ftp:\" 之后的第二个反斜杠（通过将 ":\" 替换为":\"

现在，保存在*URL1*中的 URL被分配给变量“_BASEURL”（可以使用任何其他 URL - 这只是一个示例，因为我从 INI 文件中读取变量并使用此脚本来更正 _BASEURL 的符号，如果用户使用斜杠而不是反斜杠。）使用变量“_BBASEURL”（此处仅用于输出），其中仅保存文件名而没有 url。

在行

回显 URL%COUNT%: !URL%COUNT%!\ --- FILE%COUNT%: !FILE%COUNT%!

“..\”和“---...”之间有 1 个空格和 2 个制表符。要插入 TAB，我在 Windows 记事本中使用了 ALT+009（在小键盘上）（保存前的最后一步）。这样做的输出应该被视为制表符分隔的列表。

我希望解释是可以理解的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:08:25.913

```
@Echo OFF

FOR /F "Usebackq Tokens=*" %%@ IN ("MyURLs.txt") DO (

    Call :CorrectURL  "%%@"
    Call :GetBase "%%URL%%"
    Call :GetFile "%%URL%%"
    Call Echo [+] Base: %%Base%%    File: %%File%%
)

Pause&Exit

:CorrectURL
(Set "URL=%~1" & Call Set "URL=%%URL:\=/%%" & Call Set "URL=%%URL:http://=%%") & (Goto:EOF)
:GetBase
(FOR /F "Tokens=1,* Delims=/" %%B IN ('Echo %~1') DO (Set "Base=%%B")) & (Goto:EOF)
:GetFile
(Set "File=%~nx1") & (Goto:EOF) 
```

第一个 sub : **CorrectURL**将反斜杠替换为斜杠，然后安全地从 url 中删除“ **http://** ”字符串。

第二个子：**GetBase**使用斜杠作为分隔符来分割字符串，并且只获取第一个标记，它是基本 url。

第三个子：**GetFile**将 URL 视为路径，因此我们可以使用特殊的 var 修饰符轻松获取文件名，正如您将看到的。

**输出**：

```
[+] Base: www.someone.com       File: filename1.exe
[+] Base: www.someone other.com File: filename 2.exe
[+] Base: www.someone.com       File: filename3.exe
[+] Base: www.someone other.com File: filename 4.exe
[+] Base: www.someone.com       File: filename5.exe
[+] Base: www.someone other.com File: filename 6.exe 
```

如果那不是您想要的输出，请告诉我更改代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:13:10.053

如果 URL 在 File.txt 中，这在这里有效

```
@echo off
setlocal EnableDelayedExpansion
for /f "delims=" %%a in (file.txt) do (
set "var=%%~dpa"
set "var=!var:%cd%\=!"
set "var=!var:\=/!"
set "var=!var:/=/!"
echo "!var!" "%%~nxa"
)
pause

::file.txt
http://www.someone.com/download/files/filename1.exe
http://www.someone other.com/some files/filename 2.exe
http:\\www.someone.com\download\files\filename3.exe
http:\\www.someone other.com\some files\filename 4.exe
http:\\www.someone.com/download\files/filename5.exe
http://www.someone other.com\some files/filename 6.exe
www.someone.com/download/files/filename7.exe
www.someone other.com/some files/filename 8.exe
www.someone.com\download\files\filename9.exe
www.someone other.com\some files\filename A.exe
www.someone.com/download\files/filenameB.exe
www.someone other.com\some files/filename C.exe 
```

# android - App force closes when google+ is not installed

> ID：16166376
> 
> 赞同：7
> 
> 时间：2013-04-23T09:57:35.707
> 
> 标签：android, android-intent, google-plus

My requirement is to share on Social networking sites. So, I have already done with Facebook and Twitter. But I am stuck with `Google+`. I have the following code to share on `Google+`, but the app `forcecloses` when I start activity. This occurs only when the `Google+ app` isn't installed on device already. I know this sharing intent requires the Google+ already installed to start the activity.

Now what I need to do is at least to inform the user that the `google+` sharing requires already installed `google+ app` through dialog or toast instead of getting force closed (If possible by clicking on ok on the dialog should redirect to the google+ on google play). If the google+ app is installed already it goes as usual.

```
Intent shareIntent = ShareCompat.IntentBuilder.from(this)
             .setText("Hello there! This is a pic of the lazy cat")
             .setType("image/jpeg")
             .setStream(Uri.parse(path))
             .getIntent()
             .setPackage("com.google.android.apps.plus");
 startActivity(shareIntent); 
```

Any help is appreciated. Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:36:01.617

**更新** 下面的答案已经过时了。您现在可以通过 Google Play 服务库（可通过 Android SDK 获得）检查是否已安装 Google+ 应用。有关如何将其添加到项目中的信息，请参见[此处。](http://developer.android.com/google/play-services/setup.html)

例子：

```
int errorCode = GooglePlusUtil.checkGooglePlusApp(mContext);
if (errorCode != GooglePlusUtil.SUCCESS) {
  //Google+ is either not present or another error occured, show the error dialog
  GooglePlusUtil.getErrorDialog(errorCode, this, 0).show();
}
else{
  //Your Google+ related code here
} 
```

**旧答案**

您可以创建某种检查以查看是否已安装 Google+ 应用：

```
public void loadGooglePlus()
{
    if(isGooglePlusInstalled())
    {
        Intent shareIntent = ShareCompat.IntentBuilder.from(this)
               .setText("Hello there! This is a pic of the lazy cat")
               .setType("image/jpeg")
               .setStream(Uri.parse(path))
               .getIntent()
               .setPackage("com.google.android.apps.plus");
       startActivity(shareIntent);
   }
   else{
      //Notify user
   }
}

public boolean isGooglePlusInstalled()
{
    try
    {
        getPackageManager().getApplicationInfo("com.google.android.apps.plus", 0 );
        return true;
    } 
    catch(PackageManager.NameNotFoundException e)
    {
        return false;
    }
} 
```

# php - Add images to JSON response

> ID：16166377
> 
> 赞同：1
> 
> 时间：2013-04-23T09:57:37.167
> 
> 标签：php, json

Can we add images to the Json reponse ? I have made a custome JSON reponse but want to add image on some conditions like if flight in array is "AI" show image "[http://sss.com/images/images/AI.png](http://sss.com/images/images/AI.png)"

Any tutorial of idea will help me in this.

This is the response

```
$obj = json_decode($json);
foreach ($obj->flightStatuses as $flightstatus) {
    echo $flightstatus->carrierFsCode,' ', $flightstatus->flightNumber,"<br>";
     if ($flightstatus->carrierFsCode=='G8')
            { echo "Goair<br>";} elseif ($flightstatus->carrierFsCode== 'SG') {echo "Spicejet<br>";}elseif ($flightstatus->carrierFsCode== '9W') {echo "Jetairways<br>";}
            elseif ($flightstatus->carrierFsCode== 'S2') {echo "JetConnect<br>";}elseif ($flightstatus->carrierFsCode== '6E') {echo "Indigo<br>";}
            elseif ($flightstatus->carrierFsCode== 'AI') {echo "Air India<br>";}; 
```

How can I add image in this ? thanks in advance,

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T09:59:20.857

JSON 可以包含字符串。字符串可以包括 Base64 编码的图像二进制文件或指向图像的 URI。

```
{
    "base64": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZQTFRFAAD/////e9yZLAAAAAF0Uk5Tf4BctMsAAAABYktHRAH/Ai3eAAAACklEQVQI12NgAAAAAgAB4iG8MwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMy0wNC0yM1QxMTowMDowOSswMTowMDogwR0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTMtMDQtMjNUMTE6MDA6MDkrMDE6MDBLfXmhAAAAAElFTkSuQmCC",
    "url": "http://example.com/blue_0.5_pixel.png"
} 
```

（然而，在这个例子中，同时拥有两者是多余的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:59:11.833

当然可以，如果您愿意，可以使用 json 中的图像 URL，甚至可以使用完整的图像字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:28:20.160

根据您对问题的修改……</p>

你似乎想多了。您只想输出（使用**HTML**，而不是 JSON）变量中的一段数据。

```
<img src="http://sss.com/images/images/<?php
    echo htmlspecialchars($flightstatus->carrierFsCode);
?>.png" alt=""> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:01:35.363

您必须将图像文件中的字节读入 a`byte[]`并将该对象放入您的`JSONObject`.

# jsp - 使用 jstl 搜索和替换单引号和反斜杠

> ID：16166378
> 
> 赞同：2
> 
> 时间：2013-04-23T09:57:37.773
> 
> 标签：jsp, jstl

我有以下代码：

```
 <c:set var="myContent" value="${row.content}"/>
    <c:set var="search" value="'" />
    <c:set var="replace" value="\\'" />
    <c:set var="myContent" value="${fn:replace(myContent, search, replace)}"/>

     <script language="JavaScript" type="text/JavaScript">
            window.addEventListener("load", function(){
            element.innerHTML='${myContent}';
            }, true);
      </script> 
```

它只替换了单引号字符，如果我也想替换反斜杠（）怎么办？任何想法？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:28:17.610

我终于用以下代码解决了这个问题：

```
 <c:set var="myContent" value="${row.content}"/>
    <c:set var="singlequote" value="'"/>
    <c:set var="backslash" value="\\"/>
    <c:if test="${fn:contains(myContent, singlequote) && !fn:contains(myContent,backslash)}">
            <c:set var="search" value="'" />
            <c:set var="replace" value="\\'" />
            <c:set var="myContent" value="${fn:replace(myContent, search, replace)}"/>
    </c:if>
    <c:if test="${fn:contains(myContent, backslash) && !fn:contains(myContent,singlequote)}">
            <c:set var="search" value="\\" />
            <c:set var="replace" value="\\\\" />
            <c:set var="myContent" value="${fn:replace(myContent, search, replace)}"/>
    </c:if>
    <c:if test="${fn:contains(myContent, singlequote) && fn:contains(myContent,backslash)}">
            <c:set var="search" value="\\"/>
            <c:set var="replace" value="\\\\" />
            <c:set var="myContent" value="${fn:replace(myContent, search, replace)}"/>
            <c:set var="find" value="'"/>
            <c:set var="change" value="\\'" />
            <c:set var="myContent" value="${fn:replace(myContent, find, change)}"/>
    </c:if>

    <script language="JavaScript" type="text/JavaScript">
          window.addEventListener("load", function(){
            element.innerHTML='${myContent}';
            }, true);
     </script> 
```

# java - 如何处理多个 Android 方法？

> ID：16166381
> 
> 赞同：0
> 
> 时间：2013-04-23T09:57:41.170
> 
> 标签：java, android, methods, class-hierarchy

好的，问题是。在我的 Android 应用程序中，我有两个单独的活动用于选项和主要活动。主要活动中有一个地方，当它检查选项的变化并应用样式时。它看起来像这样：

```
if (prefs.getBoolean("opt_changed", true)) {
        Theme = prefs.getInt("theme", Theme);
        Font = prefs.getInt("font", Font);
        Size = prefs.getInt("size", Size);

        SetApplicableStyle(this, Theme, Font, Size);

        /** Setting opt_changed to false. */
        SharedPreferences.Editor editor = prefs.edit();
        editor.putBoolean("opt_changed", false);
        editor.commit(); // apply changes
    } 
```

`SetApplicableStyle`在这里调用的方法看起来是这样的：

```
public void SetApplicableStyle (DTypeActivity dTypeActivity, int Theme, int Font, int Size) {
    // Retrieving the EditText and the View as objects
    final EditText edit_text = (EditText) findViewById(R.id.editText1);
    final View main_view = (View) findViewById(R.id.mainview);

    // Setting the theme
    switch(Theme){
    case 1:
        SetThemeLight (this);
    break;
    case 2:
        SetThemeBlue (this);        
    break;
    case 3:
        SetThemeDark (this);
    break;
    }

    // Setting the font
    switch(Font){
    case 1:
        SetFontSans (this);
    break;
    case 2:
        SetFontSerif (this);        
    break;
    case 3:
        SetFontMono (this);
    break;
    }

    // Setting the size
    switch(Size){
    case 1:
        SetSizeSm (this);
    break;
    case 2:
        SetSizeMd (this);       
    break;
    case 3:
        SetSizeBg (this);
    break;
    }
} 
```

作为`Set[Something][Somewhat]`方法的示例，有`SetThemeLight`一个：

```
public void SetThemeLight (DTypeActivity dTypeActivity) {
        final EditText edit_text = (EditText) findViewById(R.id.editText1);
        final View main_view = (View) findViewById(R.id.mainview);  
        main_view.setBackgroundDrawable(getResources().getDrawable(R.drawable.grey_background));
        edit_text.getBackground().setAlpha(0);
        edit_text.setTextColor(getResources().getColor(R.color.DrText));

} 
```

我的问题涉及这个简单应用程序中使用的方法的数量。我一直在考虑减少代码量并实现该`SetApplicableStyle`方法。现在我在想是否可以摆脱`Set[Something][Somewhat]`它们并将它们的线路直接连接到`SetApplicableStyle`开关的外壳上。我主要关心的是方法的数量，但我知道，巨大的方法也是一种不好的做法。这里有什么更好的解决方案？

完整的源代码可[在此处](https://github.com/wswld/dtype/tree/unstable)获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:11:00.583

我假设您复制了方法中的大部分代码`SetThemeX`。因此，我建议引入一个捕捉主题本质的类并使用它：

```
class MyTheme {
    public int background;
    public int alpha;
    public int color;
    public MyTheme(int background, int alpha, int color) {
        this.background = background;
        this.alpha = alpha;
        this.color = color;
    }
} 
```

使用一种方法来设置您的主题：

```
public void setTheme(DTypeActivity dTypeActivity, MyTheme theme) {
    final EditText edit_text = (EditText) findViewById(R.id.editText1);
    final View main_view = (View) findViewById(R.id.mainview);
    main_view.setBackgroundDrawable(getResources().getDrawable(theme.background));
    edit_text.getBackground().setAlpha(theme.alpha);
    edit_text.setTextColor(getResources().getColor(theme.color));
} 
```

并在存储这些主题的地方保留一张地图：

```
Map<Integer, MyTheme> themes = new HashMap<>();
themes.put(1, new MyTheme(R.drawable.grey_background, 0, R.color.DrText));
// put other themes 
```

在您的`SetApplicableStyle`方法中，您可以简单地使用

```
public void SetApplicableStyle (DTypeActivity dTypeActivity, int theme, int font, int size) {
    setTheme(dTypeActivity, themes.get(theme);
    // set font and size similarly
} 
```

# aptana - Aptana 在 Windows 7 中定期冻结

> ID：16166386
> 
> 赞同：4
> 
> 时间：2013-04-23T09:57:50.103
> 
> 标签：aptana, aptana3

似乎是因为更新了 Aptana 3.4（准确地说是 3.4.0.201304151603），它会定期冻结 - 变灰并显示“无响应”。

它不会立即冻结，通常在编辑和保存几分钟后。通常似乎在编辑代码时冻结，通常是 PHP。

我的日志文件确实报告了 Subversion 插件的问题，但我已经完全删除了它，仍然面临同样的问题。

我的操作系统是 Windows 7 32 位。

任何有关如何在 Aptana 中解决此类问题的建议将不胜感激，因为这使得它变得非常无用:(。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T11:47:13.960

删除日志文件似乎对我有用。无论如何，对于普通用户来说，它充满了非常无用的东西，当它变得太大时 - 繁荣：没有响应。

尝试删除日志文件（ /[yourworkspace]/.metadata/.log ），清空 Windows 临时文件夹（C:\Users[您的用户名]\AppData\Local\Temp）并以管理员身份运行 aptana（您可以通过编辑 Aptana 的任务栏/开始菜单图标的属性来实现此默认行为）

也许新版本会对此进行修复，或者提供完全关闭日志记录的选项。它肯定是导致此问题的日志文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T16:57:18.953

您使用 git 存储库吗？我的也冻结了，但是当我将 .git 目录重命名为其他目录时，冻结停止了。我在 Aptana Studio 3 上，构建：3.4.0.201304151603。这很烦人，因为我确实使用 git。我无法准确追踪 git 集成导致这种情况的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T14:01:40.333

所以我在使用 Aptana Studio 3 时遇到了同样的问题。我遵循了这里的这组说明：http: //youtu.be/RYobTLq_hms?list= [UUtL_0WLPWmHZE_HcX48F96w](http://youtu.be/RYobTLq_hms?list=UUtL_0WLPWmHZE_HcX48F96w)

或者如果您不想观看视频，请参阅此处的说明...

1.  转到 www.JAVA.com/en/download/ 并下载最新的 Java 运行时环境

2.  用记事本以外的任何东西打开 C:\Users...\AppData\Local\Aptana Studio 3\AptanaStudio3.ini（用 WordPad 或 Notepad++ 打开）

3.  在 -vmargs 行之前添加：

    -vm C:\Program Files (x86)\Java\jre7\bin\javaw.exe

...然后保存并关闭

4\. 最后打开 Aptana Studio 3。现在你的问题应该解决了，Aptana 应该指向最新版本的 JAVA。

我希望此修复对您的帮助与对我的帮助一样多！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T06:55:33.230

删除日志文件对我不起作用，但是在查看日志文件时，它谈到了

> 工作区退出前一个会话中未保存的更改；刷新工作区以恢复更改。

所以我删除了工作区文件（/.metadata/.plugins/org.eclipse.ui.workbench/workbench.xml），它只存储您在关闭应用程序时打开的文件并且问题已解决（似乎没有意外副作用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T13:46:14.533

添加行：

```
-vm

C:\Program Files (x86)\Java\*javaversion*\bin\ 
```

到`.ini`文件：

```
C:\Users\*youruser*\AppData\Roaming\Appcelerator\Aptana Studio\AptanaStudio3.ini 
```

为我解决了冻结问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-18T16:20:52.930

我仍然有这个问题。它似乎经常挂在启动时。赢 7 64 位。有一次我删除了 .metadata 文件夹，然后重新创建了一个它工作的空白文件夹。但它不再有效。有一次我重新启动了系统，它工作了。一次有效的修复不会下一次。

# java - 如何在 spring 中为带有 .jsp 扩展名的 URL 提供支持

> ID：16166387
> 
> 赞同：2
> 
> 时间：2013-04-23T09:57:51.020
> 
> 标签：java, url, spring-mvc, web, mapping

[我在这篇文章](https://stackoverflow.com/questions/16081066/spring-mvc-or-some-other-frameworks-to-support-jsp-extension-in-url)中被告知，可以使用 Spring 在 URL 结构中添加 .jsp 扩展名。我一直在尝试使用以下代码来实现它：

HelloController.java

```
@Controller
@RequestMapping("/welcome")
public class HelloController {
    @RequestMapping(value="/item.jsp", method = RequestMethod.GET)
    public String helloDotJSP(ModelMap model) {

        System.out.println("/item.jsp RequestMapping");
        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "item";
    }
} 
```

当我尝试访问页面**localhost:8080/app/welcome/item.jsp 时**，我收到*请求的资源不可用的错误。*但是，当我尝试将扩展名从**/item.jsp**修改 为例如**/item.other**时，它开始工作。如何添加对**.jsp**扩展的支持？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:28:29.087

您收到“请求的资源不可用”，因为我您的 servlet 映射`web.xml`未映射`item.jsp`到 Spring `DispatcherServlet`。

无论如何，如果您的要求只是支持旧 URL，则有更有效的方法来实现。

大多数 lo-fi 是创建与旧 url 具有相同名称和结构的 jsps，并在每个 jsps 中添加 scriptlet，如

```
<%
response.setStatus(301);
response.setHeader( "Location", "/new-url.htm" );
response.setHeader( "Connection", "close" );
%> 
```

我通常不推荐 scriptlet，但在这种情况下，它是最简单的解决方案。

如果您有像 apache 这样的前端网络服务器，您还可以添加 301 重定向规则。

希望这可以帮助。

# android - 复制失败：java.io.FileNotFoundException：/data/data/packagename/databases/databasename.sqlite：打开：失败：EACCES（权限被拒绝）

> ID：16166389
> 
> 赞同：2
> 
> 时间：2013-04-23T09:58:07.447
> 
> 标签：android, database-permissions, android-permissions

当普通用户安装我的应用程序和运行后，我遇到了 Nuxus 10 的问题......然后它显示错误

```
java.lang.Error: Error copying database => java.io.FileNotFoundException: /data/data/packagename/databases/databasename.sqlite: open failed: ENOENT (No such file or directory) 
```

如果我使用管理员用户运行 Nexus 10，它运行良好。

安卓清单：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.CALL_PHONE" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

我多次尝试找到解决方案，但仍然没有找到。

你能告诉我解决办法吗。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:00:33.893

根据您提供的信息，我可以告诉您数据库文件似乎不存在。用这样的东西检查它：

```
if(new File("/path/to/database").exists()) {
    // database access code comes here
} else {
    // database does not exists. Create it!
    // create directories if needed
    // and so on
} 
```

# java - 在 AES 算法中对 IV 进行解密失败

> ID：16166391
> 
> 赞同：0
> 
> 时间：2013-04-23T09:58:10.717
> 
> 标签：java, aes, encryption

我的网络服务收到了一些编码值。现在我必须解码这个编码字符串并获取它的字节。

现在我使用这个字节数组作为我的 IV 值来使用 AES 算法解密一个值。但这并没有给我正确的输出，而是抛出了一些垃圾值。

这是我的代码，

```
 byte[] decoded =  Base64.decodeBase64(((String) "MTIzNDU2Nzg5MTIzNDU2Nw==").getBytes());
    System.out.println(new String(decoded, "UTF-8") + "\n"); 
```

**MTIzNDU2Nzg5MTIzNDU2Nw==**是从请求 xml 接收到的编码字符串。

现在解码的将是IV，用于下一个要解密的数字，

```
 String c = decrypt1("JHIlf4iXM53tgsKHQEv1dlsUTeLr5GP3LfSNGlWENkg=", decoded);
    System.out.println(c); 
```

**JHIlf4iXM53tgsKHQEv1dlsUTeLr5GP3LfSNGlWENkg=**是要解密的数字。

```
 public static String decrypt1(Object data, byte[] ivBytes) throws InvalidKeyException,
        InvalidAlgorithmParameterException, IllegalBlockSizeException,
        BadPaddingException, UnsupportedEncodingException {
            byte[] keyBytes = "keyPhrase".getBytes();
            Cipher cipher = null;
            if (ivBytes.length<16) {
                System.out.println("error" + ivBytes.length); 
                //ivBytes = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 97, 98, 99,  100, 101, 102, 103};
            }
        byte[] byteArr = null;
       try {
          SecretKey secretKey = new SecretKeySpec(keyBytes, "AES");
          cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
          cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(
                ivBytes));
           if (data instanceof String) {
            byteArr = Base64.decodeBase64(((String) data).getBytes("UTF-8"));
        } 
        byteArr = (cipher.doFinal(byteArr));
    } catch (Exception e) {
        e.printStackTrace();
    }
    //return byteArr;
     return new String(byteArr);
} 
```

**笔记：**

相反，如果我使用这个 IV，

```
 byte[] ivBytes = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0};  it works as expected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:27:38.853

加密和解密需要使用相同的初始化向量；您可以以明文形式传输 IV（即它不是秘密的）

您还应该为每个密文使用不同的 IV，例如使用计数器或[SecureRandom生成](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)

# ios - iOS：表视图（带有 FetchedResultsController）作为另一个视图的子视图

> ID：16166393
> 
> 赞同：0
> 
> 时间：2013-04-23T09:58:15.277
> 
> 标签：ios, core-data, tableview, nsfetchedresultscontroller

我在 Itunes 上关注了 CS193p，现在正在编写我自己的应用程序。在课程中，他们有一个`CoreDataViewController`（这是一个`TableViewController`包含所有必要`NSFetchedResults`方法的子类）。有了这个，我`tableview`跑得很快。但是，我不想要一个视图（在我的屏幕顶部），下面的表格视图只有大约一半的屏幕。

我只找到了如何将普通表视图嵌入到普通表中`viewcontroller`并连接`datasource`和`delegate`插座的教程。但是我该怎么做`NSFetchedResultsController`呢？
我想我必须这样做，然后从`CoreDataViewController`我自己的原始文件中复制所有函数`viewcontroller`来处理获取的结果？
或者我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:14:20.873

我还没有看到 CoreDataViewController 是如何实现的。但是，是的，您将按照正常步骤设置 NsFetchedResultsController。或者您可以创建一个 CoreDataViewController 实例并将其 tableView 视图添加到视图控制器子视图的下半部分。

# android - 在 android 上使用 phonegap 的最小应用程序大小

> ID：16166395
> 
> 赞同：1
> 
> 时间：2013-04-23T09:58:21.883
> 
> 标签：android, html, cordova

如果我基于 html5 的 Web 应用程序大小（包括所有 html、css、javascript、xml）为 50KB，如果我只是用 phone-gap 包装它，我的应用程序的最小大小是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:16:12.533

我有将近 500kb 的文件，包括 72kB jquery.mobile.css 和 200 kB Cordova JavaScript 文件，我的应用程序大约 315 kB。

在您的情况下，如果您考虑 Cordova Javascript 文件，它应该在 200kB 左右。

**虽然你可以编译和检查，但这样会更快。**

# javascript - HTML5 地理定位协议是否仅在启用 GPS 连接的情况下工作？

> ID：16166396
> 
> 赞同：1
> 
> 时间：2013-04-23T09:58:33.380
> 
> 标签：javascript, html, geolocation, gps

这是一个假设：

*   一个基于 HTML5 地理定位功能的简单网络应用程序有一个“获取我的位置”按钮，单击该按钮将显示客户端的纬度和经度。
*   访问应用程序的客户端启用了 GPS，以及与互联网的实时数据连接
*   客户端访问应用程序，然后一旦加载，与互联网的连接就会被切断；客户端设备 GPS 仍处于启用状态并正常工作

问题：单击按钮是否仍会仅根据 GPS 输入数据返回客户端的位置？或者 HTTP 请求是否需要先于它？

# regex - 在shell-oneliner中每行grep出一个正则表达式组的*简单*方法是什么？

> ID：16166398
> 
> 赞同：-3
> 
> 时间：2013-04-23T09:58:36.057
> 
> 标签：regex, perl, sed, grep

我要表演

```
s/please (\S+) this/\1/ 
```

在我的外壳中，在一行中的文件上。

我正在寻找grep、sed 和 perl**中****最短**且**最容易记住**的解决方案。

 *** * *

示例文件`example.txt`：

```
please grep this
please sed this
I am grumpy cat
please perl this 
```

的示例输出`[the program] [your options] [your way of writing the regex] example.txt`：

```
grep
sed
perl 
```

* * *

我尝试过的事情，我希望工作，但没有：

```
grep "please (\S*)" example.txt
grep "please (\\S*)" example.txt
grep -o "please (\S*)" example.txt
grep -o "^please (\\S*)" example.tx
sed -E "s/^please (.*)/\1/" example.txt
sed -E "s/^please (.*)/\1/g" example.txt
sed -E "s/^please (.*)/\1/p" example.txt
sed -rn "s/^please (\w+) /\1/" example.txt
sed -rn "s/^please (\w+) /\1/g" example.txt
sed -rn "s/^please (\S+) /\1/p" example.txt
sed -rn "s/^please (\S+) /\0/" example.txt
sed -rn "s/^please ([a-zA-Z]+) /\\1/p" example.txt
perl -p -e 's/please (\w+) /$1/' example.txt
perl -p -e 's/.*please (\w+) /$1/' example.txt
perl -p -e 's/.*please (\w+) /\1/' example.txt
perl -p -e 's/.*please (\S*).*/\1/' example.txt
perl -p -e 's/.*please (\S*).*/$1/' example.txt
perl -p -e 's/please (\S+)/$1/g' example.txt
perl -p -n -e 's/.*please (\w+) .*/$1/g' example.txt
perl -p -n -e 'print if s/.*please (\w+) .*/$1/g' example.txt
perl -p -n -e 'print if s/.*please (\w+) .*/\1/g' example.txt
perl -n -e 'print if s/please (\w+) /\1/g' example.txt
perl -n -e 's/please (\w+) /\1/g' example.txt
perl -n -e 's/.*please (\w+)/\1/g' example.txt
cat example.txt | perl -ne 's/.*please (\w+) .*/\1/'
perl -n -e 's/please (\w+) /$1/ and print' example.txt
perl -n -e 's/please (\S+) /$1/ and print' example.txt 
```

* * *

额外说明：

*   我对使用列的解决方案不感兴趣，例如 using `cut`，或其他解决方案比正则表达式功能更弱的示例问题。关键是要捕获群体。
*   `+`必须支持扩展的正则表达式（例如）。
*   每个给出的非正则表达式选项，比如`-p`在 perl 调用中，都应该简要解释一下，以便那些只想在谷歌上快速回答的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:32:34.350

```
 sed  -n '/^.*please \(.*\) this.*$/{s//\1/;p}' example.txt
 perl -ne 'print if s/^.*please (.*) this.*$/$1/' example.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:16:21.853

如果您的 grep 已编译 pcre：

```
$ grep -Po 'please \K.*(?= this)' 
```

不幸的是，`(?= ...)`（零宽度前瞻）只支持等宽表达式。

perl 版本略有不同

```
$ perl -nE 'say $& if /please \K.*(?= this)/' 
```

或者

```
$ perl -nE '/please \K.*(?= this)/ and say $&' 
```**

# linux - 在 shell 脚本中剪切和导出命令

> ID：16166399
> 
> 赞同：-3
> 
> 时间：2013-04-23T09:58:37.393
> 
> 标签：linux, shell, unix

我正在编写一个包含以下代码的 shell 脚本。我不明白这些行，主要是 cut 命令和 export 命令。任何人都可以帮助我...另外请指出我更好的linux命令参考。提前致谢！

```
# determine sum of 60 records
awk '{ 
    if (substr($0,12,2) == "60" || substr($0,12,2) == "78") \
            print $0 
}'< /tmp/checks$$.1 > /tmp/checks$$.2

rec_sum =`cut -c 151-160 /tmp/checks$$.2 | /u/fourgen/cashnet/bin/sumit`

export rec_sum 
```

在我的 sumit 脚本中，下面是代码

```
awk '{ total += $1}
END {print total}' $1 
```

* * *

让我展示我的主脚本 prep_chk

```
awk 'BEGIN{OFS=""} {if (substr($0,12,2) == "60" && substr($0,151,1) == "-") \
        { print substr($0,1,11), "78", substr($0,14) } \
    else \
        { print $0 } \
    }' > /tmp/checks$$.1

# determine count of non-header record
rec_cnt=`wc -l /tmp/checks$$.1`
rec_cnt=`expr "$rec_cnt - 1"`
export rec_cnt

# determine sum of 60 records
awk '{ if (substr($0,12,2) == "60" || substr($0,12,2) == "78") \
    print $0 }'< /tmp/checks$$.1 > /tmp/checks$$.2
rec_sum=`cut -c 151-160 /tmp/checks$$.2 | /u/fourgen/cashnet/bin/sumit`
export rec_sum

# make a new header record and output it
head -1 /tmp/checks$$.1 | awk '{ printf("%s%011.11d%05.5d%s\n", \
    substr($0,1,45), rec_sum, rec_cnt, substr($0,62)) }' \
    rec_sum="$rec_sum" rec_cnt="$rec_cnt"

# output everything else sorted by tran code
grep -v "%%%%%%%%%%%" /tmp/checks$$.1 | cut -c 1-150 | sort -k 1.12,13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:27:21.593

`cut -c`从文件中的给定位置剪切文本，在本例中为文件中的字符 151 到 160 `/tmp/checks$$.2`。该字符串通过管道传送到一些名为的代码`submit`，该代码会产生一些输出。然后将该输出分配给环境变量`rec_sum`。该`export`命令使该变量可通过系统使用，例如在另一个 shell 脚本中。

编辑：如果这就是您提交脚本中的全部内容，它只需将您传递的字符串（它似乎必须是一个数字）添加到某个值总计并打印它传递的数字。似乎该脚本中必须有更多代码，否则这样做会有点过于复杂。

# android - 如果我只请求读取权限，如何更改提要对话框受众。它默认为“只有我”

> ID：16166403
> 
> 赞同：5
> 
> 时间：2013-04-23T09:58:41.963
> 
> 标签：android, ios, facebook, feed

通常使用提要对话框不需要任何发布权限。但是，如果我不要求任何发布权限（我真的不想这样做），则使用提要对话框发布的帖子对“只有我”可见。无法在提要对话框本身中更改移动平台上的可见性。注意：使用新的 Facebook SDK (3.5) 和安装的 Facebook 应用程序（在 Android 设备上），该应用程序实际上默认为我在打开请求中请求的任何 defaultAudience。如果未安装 Facebook 应用程序，则无论我的开放请求中有什么内容，它都只是“只有我”。

它并不总是这样，它实际上已经破坏了现有的应用程序。旧应用突然有了“Only Me”的默认受众，用户可以更改它的唯一方法是通过挖掘他的帐户设置并找到应用（如果他甚至注意到，因为它没有显示在任何地方，只是旁边的小图标制作后发布）。

我的问题是：我现在该怎么办？我是否被迫请求“publish_actions”权限，只是为了让用户朋友可以看到使用提要对话框发布的帖子？用户会在他的信息流中发布他只能看到自己的帖子，这似乎有点愚蠢。

会不会是 facebook 中新引入的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T06:37:54.130

我自己找到了问题的答案：

是的，这是一个错误。正在查看：[Facebook 错误报告](https://developers.facebook.com/bugs/389035004544629)

在修复之前：是的，如果您想确保提要对话帖子具有有意义的可见性，则需要请求发布权限。

# c# - 来自 DLL 的会话变量值

> ID：16166408
> 
> 赞同：1
> 
> 时间：2013-04-23T09:58:56.737
> 
> 标签：c#, asp.net, web-services, session

我有一个调用 DLL 的 web 应用程序，这个 dll 从 web 服务中获取一些数据。我想做的是当用户登录到网络应用程序时，我目前将它的用户名存储在会话变量中。在我的 webService 中，我有一个这样的 WebMethod：

```
 [WebMethod(EnableSession = true)]
    public string getLoggedInUsername()
    {
        SessionManager session = new SessionManager();

        return session.Username;
    } 
```

这工作正常，但是当我从 DLL 访问 web 服务时，返回的值始终为 NULL，这是因为当控制台应用程序连接到 web 服务时，将初始化一个新会话。有没有其他方法可以存储登录的用户名并通过我的网络服务将其传递给 dll？使用 Application Get/Set 不是一个好的决定，因为我的 webapp 需要处理不同的用户。任何人都可以指出我正确的方向吗？

SessionManager 类包含以下内容：

```
 public string Username
    {
        get
        {
            return (string)HttpContext.Current.Session["Username"];
        }
        set
        {
            HttpContext.Current.Session["Username"] = value;
        }
    } 
```

在用户登录到我的应用程序后（我正在使用 asp.net 成员资格）：我以这种方式将用户名分配给会话变量：

```
 SessionManager session = new SessionManager();
            session.Username = User.Identity.Name; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:52:25.890

查看这篇文章： http: [//www.codeproject.com/Articles/35119/Using-Session-State-in-a-Web-Service](http://www.codeproject.com/Articles/35119/Using-Session-State-in-a-Web-Service) 您可能需要重新初始化代理和 cookie 容器

# java - java列表中的搜索性能与使用hibernate对数据库记录的搜索性能

> ID：16166410
> 
> 赞同：0
> 
> 时间：2013-04-23T09:58:59.473
> 
> 标签：java, database, hibernate

现在我有一种情况，我需要进行一些比较和结果过滤，这不是很简单，我想要的是类似 Lucenes 搜索但只有我会开发它，这不是我的决定，虽然我会选择 Lucene .

我要做的是：

1.  根据某个字段的全词匹配查找元素，如果没有则检查它是否以它开头，检查它是否只包含。
2.  每个字段根据匹配大小写（完整->开始->包含）及其对我的优先级都有其权重。
3.  匹配后，我还将检查其他字段的权重，以得出最终的总行权重。
4.  然后我将返回两行及其权重的 Map。

现在我意识到 Hibernate 的 HQL 并不容易做到这一点，这意味着我必须运行多个查询才能做到这一点。

所以我的问题是我应该在java中执行它，意思是我应该检索所有记录并进行计算以找到我的目标，还是应该通过执行多个查询在休眠中执行它？根据性能和速度哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:02:59.667

不幸的是，我认为正确的答案是“视情况而定”：有多少字，什么数据结构，数据是否适合内存，你必须多久进行一次搜索，等等。

我倾向于认为数据库是更好的解决方案，即使 Hibernate 不是其中的一部分。您可能需要学习如何编写更好的 SQL。也许 Hibernate 为您生成的动态 SQL 是不够的。正确的 JOIN 和索引可能会使其表现良好。

可能还有第三种方式需要考虑：Lucene 和索引。我需要更多地了解您的问题才能做出决定。

# python - 如何限制我在 CSV 中处理的行

> ID：16166412
> 
> 赞同：1
> 
> 时间：2013-04-23T09:59:02.203
> 
> 标签：python, csv

我知道我可以使用计数器，但只是想知道是否有更多 Pythonic 的东西。

目前，我的代码如下所示：

```
csvReader = csv.reader(StringIO.StringIO(data))
for row in csvReader:
   ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:59:29.937

例如，仅限于前 10 行

```
from itertools import islice

for row in islice(csvReader, 10):
    ... 
```

使用[`itertools.islice`](http://docs.python.org/2/library/itertools.html#itertools.islice)

> `itertools.islice(iterable, stop)`
> 
> `itertools.islice(iterable, start, stop[, step])`
> 
> * * *
> 
> 创建一个从可迭代对象中返回选定元素的迭代器。如果`start`非零，则跳过可迭代的元素，直到`start`达到。之后，元素将连续返回，除非`step`设置的值大于一个导致项目被跳过的值。如果`stop`是`None`，则迭代继续，直到迭代器耗尽，如果有的话；否则，它会停在指定位置。与常规切片不同，不支持、或`islice()`的负值。可用于从内部结构已扁平化的数据中提取相关字段（例如，多行报表可能每三行列出一个名称字段）。`start``stop``step`

# python - 如何停止所有进程并退出

> ID：16166419
> 
> 赞同：0
> 
> 时间：2013-04-23T09:59:17.613
> 
> 标签：python, tkinter

**情况**

我编写了一个完整的应用程序作为密码管理器。我有一个存储在文件中的主密码。每次用户想要执行主要操作（如更改帐户、创建新帐户、更改主密码等）时，我都会提示用户输入主密码并验证用户输入的内容与文件中存储的内容。为此，我已经定义了一个函数：

```
def checkpoint(self):
        ##first take the masterKey from the file

        inFile = open(FILE_NAME_Mast,'r')

        M = inFile.read()

        inFile.close()

        temp = tkSimpleDialog.askstring('master key','Enter your master key:',show='*')

        temp = temp + salt

        temp = sha1(temp)

        temp = temp.hexdigest()

        if not temp == M:

            self.quitwin()

        else:

            return 
```

`self.quitwin()`是在退出应用程序之前将在屏幕上显示愉快的功能。

**问题**

对于输入新账户、修改现有账户等流程，我所做的就是创建一个`Toplevel`实例。在执行此操作时，我`Tk`使用`root.withdraw`. 所以发生的事情是，我在退出之前在屏幕上显示的任何内容都被隐藏了，即使用户输入了错误的主密码，用户也可以输入新帐户并将其存储到文件中。这是我绝对不想要的。

**目标**

一旦函数`self.checkpoint`被调用，消息将显示一段时间，然后应用程序应该退出关闭所有窗口。基本上，我不希望控件返回调用 self.checkpoint 的函数，因为这会破坏主密钥的目的。

**较早的**

早些时候，我曾经使用 C++ 进行编程。从应用程序中退出非常简单。我使用了以下**C++**代码：

```
cout<<"\n\nEnter the master key:";

char str[50];
char masterKey[20];

//masterkey is read from file and stored into this variable.

for(int i =0;str[i]!=13;i++) // 13 is the ASCII code of the return key
{

  str[i] = getch();
  cout<<"*";   //so that an asterisk is displayed for each character.

}

if(strcmp(str,masterKey) != 0)
{ 
  cout<<"\nWrong password";
  cout<<"\nGoodbye.";
  delay(2000);   // included dos.h
  exit(0);  //included stdlib.h
} 
```

但这在 Python 和 Tkinter 中被证明是相当困难的。我不想通过重构现有功能来改变整个程序。所以请建议一种方法，其中包括只需要在函数中进行的更改`self.checkpoint`。

## 编辑 1

这就是我想做的：

1.  询问用户密码
2.  将用户输入的内容与文件中存储的内容进行比较：

    i) 如果它们匹配，则返回调用函数的位置并执行进一步的语句。

    ii) 如果它们不匹配，在窗口上显示一些东西然后退出。控制不应**转移**回调用函数的位置。

## 编辑 2

这就是我得到的：

```
 if not temp == M:

        self.window.destroy()

        import sys
        sys.exit() 
```

但这有一个问题。这会删除所有内容，这很好。事实上，这正是我想要的。但在退出一切之前，我想打印一个标签`unauthorized access`，然后退出。所以：

1.  打印标签
2.  等待 3 秒
3.  摧毁窗户
4.  使用退出应用程序`sys.exit()`

本代码可以同时执行第 3 步和第 4 步，但第 1 步和第 2 步是重要的，需要在其他两个之前执行。

我已经尝试过使用`self.window.after(3000,sys.exit)`，但这不起作用。三秒钟后它确实退出了，但控制返回到`checkpoint`调用的地方并执行那里的语句。

**请**帮我解决这个问题并提供解决方案。

# magento - Magmi 导入可配置产品

> ID：16166425
> 
> 赞同：3
> 
> 时间：2013-04-23T09:59:26.520
> 
> 标签：magento, magento-1.7, magmi

我正在尝试使用 magmi 导入产品。我可以进口简单的产品。但无法导入可配置产品。我尝试查找示例 csv 文件来导入可配置产品。但我找不到合适的。我知道我的 csv 文件有问题。谁能帮我解决我的问题？这是我的 csv 文件。

```
sku,store,attributeset,type,category,root_category,product_websites,activation_information,color,computer_manufacturers,contrast_ratio,cost,country_of_manufacture,country_orgin,cpu_speed,created_at,custom_design,custom_design_from,custom_design_to,custom_layout_update,description,dimension,enable_googlecheckout,finish,gallery,gender,gift_message_available,harddrive_speed,hardrive,has_options,image,image_label,in_depth,manufacturer,max_resolution,media_gallery,megapixels,memory,meta_description,meta_keyword,meta_title,minimal_price,model,msrp,msrp_display_actual_price_type,msrp_enabled,name,news_from_date,news_to_date,options_container,page_layout,price,processor,ram_size,required_options,response_time,room,screensize,shape,shirt_size,shoe_size,shoe_type,short_description,small_image,small_image_label,special_from_date,special_price,special_to_date,status,tax_class_id,thumbnail,thumbnail_label,updated_at,url_key,url_path,visibility,weight,qty,min_qty,use_config_min_qty,is_qty_decimal,backorders,use_config_backorders,min_sale_qty,use_config_min_sale_qty,max_sale_qty,use_config_max_sale_qty,is_in_stock,notify_stock_qty,use_config_notify_stock_qty,manage_stock,use_config_manage_stock,stock_status_changed_auto,use_config_qty_increments,qty_increments,use_config_enable_qty_inc,enable_qty_increments,is_decimal_divided,links_related_sku,links_related_position,links_crosssell_sku,links_crosssell_position,links_upsell_sku,links_upsell_position,associated_sku,associated_default_qty,associated_position,tier_price_website,tier_price_customer_group,tier_price_qty,tier_price_price,group_price_website,group_price_customer_group,group_price_price,media_attribute_id,media_image,media_lable,media_position,media_is_disabled,custom_option_store,custom_option_type,custom_option_title,custom_option_is_required,custom_option_price,custom_option_sku,custom_option_max_characters,custom_option_sort_order,custom_option_row_title,custom_option_row_price,custom_option_row_sku,custom_option_row_sort,super_products_sku,super_attribute_code,super_attribute_option,super_attribute_price_corr,simples_skus,configurable_attributes
999-Black,,Default,simple,,,base,,Black,,,,,,,4/23/2013 9:29,,,,,test,,1,,,,,,,0,,,,,,,,,,,,,,,Use config,Use config,My IS test-Black,,,Block after Info Column,,122,,,0,,,,,,,,tewst,,,,,,1,0,,,4/23/2013 9:29,my-is-test-black,my-is-test-black.html,1,100,100,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
999-Blue,,Default,simple,,,base,,Blue,,,,,,,4/23/2013 9:30,,,,,test,,1,,,,,,,0,,,,,,,,,,,,,,,Use config,Use config,My IS test-Blue,,,Block after Info Column,,122,,,0,,,,,,,,tewst,,,,,,1,0,,,4/23/2013 9:30,my-is-test-blue,my-is-test-blue.html,1,100,100,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
999-Brown,,Default,simple,,,base,,Brown,,,,,,,4/23/2013 9:30,,,,,test,,1,,,,,,,0,,,,,,,,,,,,,,,Use config,Use config,My IS test-Brown,,,Block after Info Column,,122,,,0,,,,,,,,tewst,,,,,,1,0,,,4/23/2013 9:30,my-is-test-brown,my-is-test-brown.html,1,100,100,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
999-Green,,Default,simple,,,base,,Green,,,,,,,4/23/2013 9:30,,,,,test,,1,,,,,,,0,,,,,,,,,,,,,,,Use config,Use config,My IS test-Green,,,Block after Info Column,,122,,,0,,,,,,,,tewst,,,,,,1,0,,,4/23/2013 9:30,my-is-test-green,my-is-test-green.html,1,100,100,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
999,,Default,configurable,Furniture/Living Room,Root Catalog,base,,,,,,,,,4/23/2013 9:29,,,,,test,,1,,,,,,,1,no_selection,,,,,,,,,,,,,,Use config,Use config,My IS test,,,Block after Info Column,,122,,,1,,,,,,,,tewst,no_selection,,,,,1,0,no_selection,,4/23/2013 9:30,my-is-test,my-is-test.html,4,,0,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"999-Black,999-Blue,999-Brown,999-Green",color,"Black,Blue,Brown,Green",,"999-Black,999-Blue,999-Brown,999-Green",color 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:18:21.553

确保您`Configurable Item processor`启用了插件。它列`Itemprocessors`在 Magmi 的部分下。

还要确保`Configurable Item processor`插件的设置如下：

`Perform simples/configurable link`设置`Yes`

`auto match simples skus before configurable`设置为`No`（因为您在`simples_skus`列中指定匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T00:50:44.760

在我的情况下，解决方案是编辑文件 magmi/plugins/base/itemprocessors/configurables/magmi_configurableprocessor.php 更改行：

```
 //if no entry found, create one
        if($psaid==NULL)
        {
            $sql="INSERT INTO `$cpsa` (`product_id`,`attribute_id`,`position`) VALUES (?,?,?)";
            //inserting new options
            $psaid=$this->insert($sql,array($pid,$attrid,$idx));    
        } 
```

为了

```
//if no entry found, create one
        if($psaid==NULL)
        {
            $sql="INSERT INTO `$cpsa` (`product_id`,`attribute_id`,`position`) VALUES (:a, :b, :c)";
            $data = array(
                'a' => $pid,
                'b' => $attrid,
                'c' =>$idx,
            );
            //inserting new options
            $psaid=$this->insert($sql,$data);
        } 
```

# iphone - 如何检查sim卡是否安装

> ID：16166430
> 
> 赞同：2
> 
> 时间：2013-04-23T09:59:31.217
> 
> 标签：iphone, ios, sdk, mfmessagecomposeview

我正在开发一个具有呼叫和消息功能的应用程序，我想检查是否安装了 sim 卡，因为我遇到了消息传递问题，因为它会发出“消息发送成功”的警报

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:11:57.107

可能有不同的方法，但一种方法是使用`MFMessageComposeViewController`类来查看您是否可以发送短信。如果可以，则 sim 可用，否则不可用。

```
if ([MFMessageComposeViewController canSendText]) {
    NSLog(@"SIM Available");
} else {
    NSLog(@"no SIM card installed");
} 
```

如果您有可用的 iMessage，那么这可能会返回 true，您还可以检查是否可以拨打电话，您可能希望将其`CTTelephonyNetworkInfo`用于此目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T10:31:17.613

您也可以像这样检查使用.... 首先阅读此文档

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-SW1](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-SW1)

```
NSString *_code = [[[CTCarrier alloc] init] mobileCountryCode]; 
```

如果以下任何一项适用，则此属性的值为 nil：

设备处于飞行模式。设备中没有 SIM 卡。该设备不在蜂窝服务范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:35:41.953

首先你必须确定设备是 iPhone（不是 iPod 或 iPad）然后检查设备是否可以拨打电话，就像这样............

```
if([[UIDevice currentDevice].model isEqualToString:@"iPhone"])
{
     if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel:123456"]])
     {
         NSLog(@"Device can make call or send message");
     }
     else
     {
         NSLog(@"Device can not make call or send message");
     }
}
else
{
    NSLog(@"Device can not make call or send message");
} 
```

希望对你有帮助…………

# iphone - 如何使用 AVFoundation 为您的视频添加不同图像和不同 CMTimes 的水印

> ID：16166433
> 
> 赞同：3
> 
> 时间：2013-04-23T09:59:36.707
> 
> 标签：iphone, ios, objective-c, avfoundation

我正在使用 AVFoundation 在我的电影中添加水印。这适用于互联网和 Apple 上流传的代码。但我不想完整显示水印，我想在同一部电影中显示不同的水印。

我有一个 AVAsset：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"MOV"];
NSURL *url = [[NSURL alloc] initFileURLWithPath: path];

avasset_camera = [AVAsset assetWithURL:url]; 
```

一个 AVMutableComposition：

```
AVMutableComposition *mix = [AVMutableComposition composition]; 
```

UIImage 转换为 CALayer，然后添加到另一个层以与动画工具合并：

```
UIImage *myImage = [UIImage imageNamed:@"watermark.png"];
CALayer *aLayer = [CALayer layer];
aLayer.contents = (id)myImage.CGImage;
aLayer.frame = CGRectMake(0, 0, 568, 320);     
aLayer.opacity = 1.0;

CGSize videoSize = [avasset_camera naturalSize];
CALayer *parentLayer = [CALayer layer];
CALayer *videoLayer = [CALayer layer];
parentLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
videoLayer.frame = CGRectMake(0, 0, videoSize.width, videoSize.height);
[parentLayer addSublayer:videoLayer];
[parentLayer addSublayer:aLayer]; 
```

而不是 AVMutableVideoComposition：

```
AVMutableVideoComposition* videoComp = [[AVMutableVideoComposition videoComposition]  retain];
videoComp.renderSize = videoSize;
videoComp.frameDuration = CMTimeMake(1, 30);
AVVideoCompositionCoreAnimationTool *animationVideoTool =    [AVVideoCompositionCoreAnimationTool   videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer   inLayer:parentLayer];

videoComp.animationTool = animationVideoTool; 
```

VideoComposition 的说明：

```
AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction  videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, avasset_camera.duration); 
```

以及该层的说明：

```
AVAssetTrack *videoTrack = [[mix tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

AVMutableVideoCompositionLayerInstruction *layerInstruction =  [AVMutableVideoCompositionLayerInstruction  videoCompositionLayerInstructionWithAssetTrack:videoTrack];

instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
videoComp.instructions = [NSArray arrayWithObject: instruction]; 
```

而不是使用具有 VideoComposition 属性的 AVAssetExportSession 导出它

这将产生一个带有完整视频水印的视频。我想要实现的是来自相机的视频，前 5 秒带有水印。它会消失一段时间，然后显示另一个图像（也是水印）。

我被困住了......我已经在 AVFoundation 上观看了 WWDC 视频数万亿次，但它缺乏深入的视野。

当我更改指令的 timeRange 时，它​​不会导出，因为持续时间（范围）必须与 AVAssetTrack 的持续时间（范围）相同。我一直在尝试插入多个指令，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T04:28:27.797

AVMutableVideoCompositionLayerInstruction 有一个方法 [setOpacityRampFromStartOpacity: toEndOpacity: timeRange:] 您可以为不同的段设置（每个 layerInstruction 不重叠）。最好的解决方案不是创建两个视频轨道 - 一个原始视频，另一个在需要时带有水印和渐变不透明度（仅在某些片段上显示原始视频，在其他片段上显示水印）。

# java - 为什么 java serversocket 有 setrecievebuffersize 方法？

> ID：16166436
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:59:42.717
> 
> 标签：java, tcp

我知道套接字有 setReceiveBufferSize 方法，但为什么 severSocket 有一个。你知道如果接受一个连接我会得到一个套接字来处理 io 的东西，所以我只关心套接字实例，我可以设置接收缓冲区。那么 serversocket setReceiveBufferSize 做什么工作呢？

```
 public synchronized void setReceiveBufferSize (int size) throws SocketException {
    if (!(size > 0)) {
        throw new IllegalArgumentException("negative receive size");
    }
    if (isClosed())
        throw new SocketException("Socket is closed");
    getImpl().setOption(SocketOptions.SO_RCVBUF, new Integer(size));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:08:46.703

从文档中：

[http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#setReceiveBufferSize%28int%29](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#setReceiveBufferSize%28int%29)

因此，从本质上讲，它为操作系统的 tcp 堆栈设置了一个提示，用于调整 TCP 窗口大小。这对于由于丢失包而导致的重传很重要，最佳设置取决于网络延迟、网络拥塞和传输的数据类型。

看这里：

[http://en.wikipedia.org/wiki/TCP_Receive_Window](http://en.wikipedia.org/wiki/TCP_Receive_Window)

进行更详细的讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:33:22.777

到`ServerSocket`已经接受`Socket`时，协商接收缓冲区大小 >= 64k 已经为时已晚，因为 TCP 窗口缩放选项是在初始握手期间协商的。因此，它必须设置在`ServerSocket`并由接受的 继承`Sockets`，如 Javadoc 中所述。

# android-activity - 在非活动类中获取当前活动上下文

> ID：16166438
> 
> 赞同：9
> 
> 时间：2013-04-23T09:59:45.707
> 
> 标签：android-activity, android-context

我在android中有一个应用程序，它没有。的活动。现在我需要非活动类中当前正在运行的活动的上下文。我怎么能得到那个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-06T09:49:41.877

您可以使用`Application`类：

```
public class MyApplication extends Application {
private static Context context;
private static Activity activity;

public void onCreate() {
    super.onCreate();
    MyApplication.context = getApplicationContext();
}

public synchronized static Context getAppContext() {
    return MyApplication.context;
}

/**
 * setCurrentActivity(null) in onPause() on each activity 
 * setCurrentActivity(this) in onResume() on each activity
 * 
 */

public static void setCurrentActivity(Activity currentActivity) {
    activity = currentActivity;
}

public static Activity currentActivity() {
    return activity;
}

} 
```

# javascript - 用新值刷新 dat.gui

> ID：16166440
> 
> 赞同：22
> 
> 时间：2013-04-23T09:59:51.303
> 
> 标签：javascript, three.js, dat.gui

我想用新值刷新 dat.gui 菜单。我已经加载了一个模型并在文件夹中显示了 gui 文件夹中对象的名称。
重新加载其他模型时如何显示新对象名称？
或者可以重置/清除 gui。 ![在此处输入图像描述](https://i.stack.imgur.com/TvLt1.jpg)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T16:32:11.460

基本上，您必须在添加控制器时将控制器设置为“监听”输入，例如，

```
gui = new dat.GUI();
var guiX = gui.add( parameters, 'x' ).min(0).max(200).listen(); 
```

有关文档，请参阅：

[http://workshop.chromeexperiments.com/examples/gui/#9--Updating-the-Display-Automatically](http://workshop.chromeexperiments.com/examples/gui/#9--Updating-the-Display-Automatically)

有关 Three.js 中的示例，请参阅：

[http://stemkoski.github.io/Three.js/GUI-Controller.html](http://stemkoski.github.io/Three.js/GUI-Controller.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-07T04:18:08.653

Echt Einfach's solution didn't work for me, and Stemkoski's one is a bit wide. I finally made it with the `updateDisplay` function:

```
for (var i in gui.__controllers) {
    gui.__controllers[i].updateDisplay();
} 
```

[http://workshop.chromeexperiments.com/examples/gui/#10--Updating-the-Display-Manually](http://workshop.chromeexperiments.com/examples/gui/#10--Updating-the-Display-Manually)

Note that if you have the values in some folder `folder1` the call is like this:

```
for (var i = 0; i < this.gui.__folders.folder1.__controllers.length; i++) {
    this.gui.__folders.folder1.controllers[i].updateDisplay();
} 
```

If you do not want to hard-code `folder1`, or simply want to update all folders, you can proceed as follows:

```
for (var i = 0; i < Object.keys(gui.__folders).length; i++) {
    var key = Object.keys(gui.__folders)[i];
    for (var j = 0; j < gui.__folders[key].__controllers.length; j++ )
    {
        gui.__folders[key].__controllers[j].updateDisplay();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-15T18:51:43.147

编写了一个函数来使用一组新值更新 dat.gui 下拉列表：

```
function updateDatDropdown(target, list){   
    innerHTMLStr = "";
    if(list.constructor.name == 'Array'){
        for(var i=0; i<list.length; i++){
            var str = "<option value='" + list[i] + "'>" + list[i] + "</option>";
            innerHTMLStr += str;        
        }
    }

    if(list.constructor.name == 'Object'){
        for(var key in list){
            var str = "<option value='" + list[key] + "'>" + key + "</option>";
            innerHTMLStr += str;
        }
    }
    if (innerHTMLStr != "") target.domElement.children[0].innerHTML = innerHTMLStr;
} 
```

用法：

```
myDropdown = gui.add(MyObject, 'myVariable', ['one','two','three']);
updateDatDropdown(myDropdown , ['A','B','C']);

// Also accepts named values

updateDatDropdown(myDropdown , {'A':1,'B':2,'C':3}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-29T19:37:50.657

Lee Stemkoski 和 Echt Einfach 的解决方案在 GUI 中的选定控制器上使用 .listen() 方法。

jmmut 的解决方案，使用 .updateDisplay()，循环通过 GUI 中的所有控制器

如果您只想在特定时间手动更新单个控制器的值，那么这两种解决方案类型都非常昂贵。

您可以通过对 SINGLE 控制器使用方法 .updateDisplay() 来避免这种情况。

一种方法是，如果您事先知道单个控制器的 index[i]。但这实施起来相当繁琐。

更好的方法是通过名称引用特定的控制器

```
// AT INITIALISATION TIME
gui1 = new dat.GUI();
Gparameters = { x: 0, y: 0, z: 0}
var gui1_X = gui1.add( Gparameters, 'x' ).min(0).max(200); // note no need to use the method .listen()

// AT RUN TIME
Gparameters.x++;
gui1_X.updateDisplay() 
```

注意：我没有包含在文件夹中使用控制器所需的额外代码。你可以从其他答案中得到这个。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-22T13:34:53.280

当我阅读了 dat.gui 的源代码时，这很容易：

[https://github.com/dataarts/dat.gui/blob/master/src/dat/controllers/Controller.js#L36](https://github.com/dataarts/dat.gui/blob/master/src/dat/controllers/Controller.js#L36)

如您所见，`this.object = object`,`this`是您添加的控制器，`object`也是您需要更改的内容。这是示例代码：

```
var gui = new dat.GUI();

// init a controller
var controller = gui.add(object, 'property');

// update a controller
controller.object = newObject; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-16T03:21:56.453

如果您使用下拉菜单，请听有一个与之相关的错误。见这里：[https ://code.google.com/p/dat-gui/issues/detail?id=59](https://code.google.com/p/dat-gui/issues/detail?id=59)

这是一个通过遍历所有文件夹来更新所有控制器的简短函数。

```
function updateDisplay(gui) {
    for (var i in gui.__controllers) {
        gui.__controllers[i].updateDisplay();
    }
    for (var f in gui.__folders) {
        updateDisplay(gui.__folders[f]);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-22T17:58:41.923

我的回答*不能*反映您的问题，但对其他以编程方式更改 3d 场景中的值并需要更新 GUI 控件的人会有所*帮助。*

当您声明：

```
 var cubeX = folder1.add( parameters, 'x' ).min(-100).max(100).step(1).listen(); 
```

您已经事先声明了参数，例如

```
parameters = {
    x: 0, y: 0, z: 0
} 
```

现在您可以收听关键事件或适当的事件，并像这样更改 GUI 中的值：

```
window.addEventListener('keydown', function(event) {
    if(event.keyCode == 88) { // x pressed
        parameters.x++; // GUI value changed
        cube.scale.x = parameters.x; // 3d object changed
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-13T13:49:56.757

您必须使用 updateDisplay() 方法更新您的控制器

```
gui = new dat.GUI()
//edit values
gui.updateDisplay() 
```

请参阅 dat.GUI API 文档： [updateDisplay](https://github.com/dataarts/dat.gui/blob/master/API.md#Controller+updateDisplay)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-18T05:27:20.473

## 以上答案都不适合我。我只是重新创建了 DAT GUI，它就可以工作了。

我不会推荐它，但如果没有任何效果并且您不想在此花费更多时间，那么只需删除当前的 DAT GUI：

```
this.gui.destroy() 
```

然后使用参数重新创建 DAT GUI。

# autohotkey - AutoHotKey : 获取 mdi 窗口

> ID：16166441
> 
> 赞同：1
> 
> 时间：2013-04-23T09:59:51.030
> 
> 标签：autohotkey

在自动化 MDI 应用程序中的过程时，我尝试使用 AutoHotKey。

在给定的时间，在 MDI 应用程序中弹出一个新的 mdi 子窗口，我想“等待”我的自动热键脚本，直到它被打开。

所以我正在寻找一个检查控件（mdi child）是否存在的循环。

使用 ControlGet，我似乎无法获得 mdi 孩子。

这是我想知道是否存在的孩子。

自动间谍：

> （现在在鼠标光标下）
> 
> ClassNN：FNWND31101
> 文本：短语提取

![在此处输入图像描述](https://i.stack.imgur.com/6oI15.png)

也许我没有使用正确的 AutoHotKey 功能来找到它？

脚本

```
WinWait, FNWND31101,, 10
if ErrorLevel
{
  MsgBox, WinWait timed out.
  return
} else 
{
  MsgBox, Found control  
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/XqpPq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:09:24.533

尝试像这样使用winwait：

```
winwait, FNWND3110 
```

窗口 ID：FNWND3110，鼠标下的对象 ID：FNWND31101

看看这些网址：

[http://www.autohotkey.com/board/topic/85114-detecting-new-child-window/](http://www.autohotkey.com/board/topic/85114-detecting-new-child-window/)

[http://www.autohotkey.com/board/topic/8398-how-to-winwait-a-mdi-child-window/](http://www.autohotkey.com/board/topic/8398-how-to-winwait-a-mdi-child-window/)

以及 MouseGetPos 的最后一个参数： [http ://www.autohotkey.com/docs/commands/MouseGetPos.htm](http://www.autohotkey.com/docs/commands/MouseGetPos.htm)

否则，请在 AHK 论坛上提问：[http ://www.autohotkey.com/board/](http://www.autohotkey.com/board/)

# android - 菜单项的代码在一个类中有效，但在其他类中无效

> ID：16166445
> 
> 赞同：1
> 
> 时间：2013-04-23T10:00:02.017
> 
> 标签：android, menuitem

当我对其他类中的菜单项使用相同的代码时，会显示菜单。但是当我在这个类中实现然后不显示时，谁能告诉我如果我们使用实现 OnClickListener 菜单项是否有任何问题

```
 public class MainPage extends Activity implements OnClickListener {
Context context;
ImageButton countingbutton, maximymbutton, minButton, compareButton,
        statsbutton, review, memorygmae;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newmainpage);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    countingbutton = (ImageButton) findViewById(R.id.countingbutton);
    maximymbutton = (ImageButton) findViewById(R.id.maximumbutton);
    minButton = (ImageButton) findViewById(R.id.minimunbutton);
    compareButton = (ImageButton) findViewById(R.id.comparenum);
    statsbutton = (ImageButton) findViewById(R.id.ibStats);
    review = (ImageButton) findViewById(R.id.review);
    countingbutton.setOnClickListener(this);
    maximymbutton.setOnClickListener(this);
    minButton.setOnClickListener(this);
    compareButton.setOnClickListener(this);
    statsbutton.setOnClickListener(this);
    review.setOnClickListener(this);

}
  @Override 
  public boolean onCreateOptionsMenu(Menu menu) {
      // Inflate themenu; this adds items to the action bar if it is present.
  getMenuInflater().inflate(R.menu.cool_menu, menu);
  return true; 
  }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
     // TODO Auto-generated method stub private static final String 
     switch (item.getItemId())
     { 
     case R.id.aboutUs:
         Intent about = new Intent(this, AboutUs.class);
         startActivity(about);
         break; 

     case R.id.exit:
         super.finish(); 
         System.exit(0);
         break; 

     case R.id.mainmenu: Intent  mainmenu = new Intent(this, MainPage.class);
        startActivity(mainmenu);
        break;
     }
 return false;
 } 
```

# android - 为什么适用于 android 的 Google 地图 API 不适用于 AVD？

> ID：16166448
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:06.587
> 
> 标签：android, mobile, avd

我正在开发一个小型 android 应用程序，我想在 avd（模拟器）中显示谷歌地图。我正在使用 Android 2.3.3 和 Eclipse Indigo。

代码是正确的，但是当我运行时，我得到一个空地图。我想知道模拟器可能不支持 Android 的谷歌地图 API。

如果我想测试它，我必须买一部真手机吗？我发现了一个视频教程，我猜想使用 avd。我不确定。我还发现它是一个不再使用的旧版本的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:19:13.737

谷歌地图 v2 无法在模拟器中运行。最好在手机中进行测试。

[在 Android 模拟器上运行 Google Maps v2](https://stackoverflow.com/questions/14040185/running-google-maps-v2-on-android-emulator)

# git - 从终端创建新的 git repo 问题？

> ID：16166450
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:09.260
> 
> 标签：git, github

我正在尝试更熟悉 git。我在 github 上创建一个 repo，然后通过 http 或 ssh 将它克隆到我的机器上没有问题。一旦我克隆了它，我就可以在本地编辑文件并将更改推回没有问题。当尝试在我的机器上创建一个新的 repo 然后将其推送到 git 时，这就是我的问题开始的地方。我按照 github [here](https://help.github.com/articles/create-a-repo)的步骤操作，但收到以下错误消息

```
git push origin masterfatal: https://github.com/robocode/testgit.git/info/refs?service=git-receive-pack not found: did you run git update-server-info on the server? 
```

我检查了我的本地 PATH 是否指向 git，以及接收和上传包，这似乎很好，回显我的 PATH 变量包含以下 git 路径

```
:/usr/bin/git-upload-pack:/usr/bin/git: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:13:42.820

您需要首先在您的 GitHub 帐户中实际*创建存储库。*仅仅推送到 GitHub 来创建它是不够的。而是登录 GitHub，然后选择“创建一个新的存储库”（右数第三个，在顶部）。然后在创建存储库后，您可以开始将内容推送到其中。

# c#-4.0 - 根据条件将数据表拆分为多个表

> ID：16166453
> 
> 赞同：1
> 
> 时间：2013-04-23T10:00:16.313
> 
> 标签：c#-4.0

我有一个这样的数据表

Id 名称 ParentId

* * *

```
1         AA        0
2         BB        1
3         CC2       1
4         DD        1           
5         EE        0
6         FF        5
7         GG        5 
8         HH        0     
9         II        8 
```

我想像这样拆分数据表

Id 名称 ParentId

* * *

```
2         BB        1
3         CC2       1
4         DD        1        

Id        Name     ParentId 
```

* * *

```
6         FF        5
7         GG        5 
```

Id 名称 ParentId

* * *

```
9         II        8 
```

拆分基于 parentId ='0' 之间的行

请帮帮我..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T18:39:09.343

将可枚举与 group by 一起使用。您将得到一张包含 0 件物品的表格，但只需将其丢弃/跳过即可。副本将在列表中创建单独的数据表，其中包含您需要的单独表。

```
List<DataTable> subTables = dt.AsEnumerable().GroupBy(row => row.Field<int>("ParentId")).Select(g => g.CopyToDataTable()).ToList(); 
```

# android-ndk - 项目之间的 NDK 资产

> ID：16166454
> 
> 赞同：1
> 
> 时间：2013-04-23T10:00:17.270
> 
> 标签：android-ndk

我有一个库项目，其中包括 sharedobjs (NDK) 和 JNI 代码 - 以及一些资产。这与实际的 Java 应用程序一起包含在应用程序项目中。

我读过你可以使用 AssetManager 来访问它们。但只是想知道，这会因为多个项目而造成混乱吗？

# windows-8 - 无法在 Windows 8 上的 WAMP 上运行 PHP CLI

> ID：16166457
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:25.893
> 
> 标签：windows-8, wamp, php

我已经尝试了几个小时我收到以下错误

`'php' is not recognized as an internal or external command, operable program or batch file.`

我已经完成的步骤 1-我已添加到 Windows 环境变量`C:\wamp\bin\php\php5.3.13;` 2-重新安装 wamp 2 次 3-Apache 和 php 错误日志是干净的

我有以下配置

1.  视窗 8 64 位
2.  阿帕奇 2.2
3.  PHP 5.3.13

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T23:57:24.433

实际上，您在 wamp 中为 CLI 运行的 php exe 只是 php.exe

它位于 c\wamp\bin\php\phpX.YZ\ 文件夹中，名为 php.exe

建议您创建一个小批处理文件来设置路径，这样您就可以通过键入 php 在任何地方使用它，如下所示：

phppath.cmd

```
set path=%PATH%;c:\wamp\bin\php\phpX.Y.Z
php -v 
```

将此批处理文件存储在路径上的文件夹中，您就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T00:41:46.023

您需要将 php 添加到系统路径中，如下所示：

*   转到系统属性
*   选择高级选项卡
*   检查系统变量
*   选择路径然后编辑它并在末尾添加 ;C:\xampp\php\

请注意，Path 中的系统变量用**;分隔。** 同样的事情也适用于 WAMP 你只需要指定你的 php 二进制文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:44:19.703

似乎`php-cli.exe`剂量与 WAMP 一起出现，我安装了 XAMPP 并且 CLI 运行良好

# php - 用他们的加入日期更新员工的数据库列

> ID：16166459
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:32.163
> 
> 标签：php, mysql

我们有一个名为`emp_details`列的表`CL`，`PL`其中存储了员工的详细信息和加入日期。

我需要使用以下规则更新每个员工的 CL 和 PL：

(Current date-Date Of Joining) > 10 然后 CL +=0.5 和 PL +=0.5 的差异

谁能帮我查询MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:08:40.877

假设您具有以下结构

```
UPDATE hs_hr_employee AS l
INNER JOIN hs_hr_employee AS r ON l.employee_id = r.employee_id
SET 
    l.CL = (r.cl + 0.5),
    l.PL = (r.pl + 0.5)
WHERE (DATE(NOW()) - DATE(l.joined_date)) > 10 
```

# java - 基于java web/Java EE的并行计算应用设计

> ID：16166463
> 
> 赞同：2
> 
> 时间：2013-04-23T10:00:42.343
> 
> 标签：java, jakarta-ee, parallel-processing, web-container

我的问题与我的其他问题[有关](https://stackoverflow.com/questions/16123516/multithread-issue-in-jboss-7)。

我想知道处理可以在 Java Web 应用程序中并行运行的非常复杂的计算问题的最佳方法（或任何方法）是什么？在我之前的问题中，有人指出，由于 Java EE/web java 规范，严格禁止创建和使用自己的线程（实际上，这是可能的，但需要使用技巧，不建议这样做）。

我正在考虑它，并且由于所有 Web 应用程序本身都是多线程的，我想到的唯一方法是以某种方式将我的计算问题转换为多请求，所以每个请求都有一部分工作要做（也许在JMS？）。但是，真的，我不确定这是否可能实现（向我们自己发送请求:)）。那么有人可以告诉我将来应该如何处理这样的问题（或者完全有可能处理它）？

**编辑：由于询问，我发布了示例：**

让我们假设我们有一个可以通过使用启发式算法来解决的问题，例如遗传算法。该算法可以在多个线程中进行评估，因此我们希望使用并行编程。然而，我们需要让它成为 web 应用程序，因为一切都应该可以通过 web 浏览器访问，并且我们希望将所有东西都放在一个应用程序中（因此算法应该嵌入到我们的 web 应用程序中）。

好的，我知道我们可以将其作为独立应用程序并使用 JMX、WebServices 或其他远程管理它，但我想知道我们是否可以将其实现为一个 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:21:21.420

正如另一篇文章中所指出的，EE 中的多线程会侵犯容器中运行的其他应用程序。简单的解决方案是在另一台机器上使用单独的 JVM，并使用远程过程调用（RMI 很简单）访问它。这样你就可以不受限制地做任何你想做的事情。

# java - Paths.get(args[0]) 不起作用

> ID：16166465
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:46.837
> 
> 标签：java, path, arguments

如何在 args[0] 中提供源文件，在 args[1] 中提供目标？我在同一个包中创建了一个 source.txt 和一个 target.txt，并将“./source.txt”和“./target.txt”作为运行配置中的参数。但它会抛出“./source.txt”不可读的异常。

```
 Exception in thread "main" java.lang.IllegalArgumnetException: ./source.txt 
```

什么是磨损？

```
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardCopyOption;
import de.sb.javase.TypeMetadata;

/**
   * Demonstrates copying a file using a single thread.
*/
public final class FileCopyLinear {

/**
 * Copies a file. The first argument is expected to be a qualified source file name,
 * the second a qualified target file name. 
 * @param args the VM arguments
 * @throws IOException if there's an I/O related problem
 */
public static void main(final String[] args) throws IOException {
    final Path sourcePath = Paths.get(args[0]);
    if (!Files.isReadable(sourcePath)) throw new IllegalArgumentException(sourcePath.toString());

    final Path sinkPath = Paths.get(args[1]);
    if (sinkPath.getParent() != null && !Files.isDirectory(sinkPath.getParent())) throw new IllegalArgumentException(sinkPath.toString());

    Files.copy(sourcePath, sinkPath, StandardCopyOption.REPLACE_EXISTING);

    System.out.println("done.");
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:04:43.747

相对文件路径与任何类的包都不相关。它们与当前目录相关，当前目录`java`是执行命令以启动程序的目录。

所以，如果你在目录中`/home/user1477955`并输入

```
/home/user1477955 > java com.foo.bar.FileCopyLinear source.txt target.txt 
```

它将搜索文件`/home/user1477955/source.txt`和`/home/user1477955/target.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:04:36.430

你可以试试这个：

```
try {
        File file = new File(args[0]);
        BufferedReader in = new BufferedReader(new FileReader(file));
        //rest of your code
        in.close();
    } catch (IOException e) {
        System.out.println("File Read Error: " + e.getMessage());
    } 
```

# javascript - 来自 FireBreath 的回调

> ID：16166466
> 
> 赞同：0
> 
> 时间：2013-04-23T10:00:48.183
> 
> 标签：javascript, callback, npapi, firebreath

在我的插件中，我想启动新线程并从中获取回调：

我有

```
function myCallback() 
```

我想从插件中的线程每 2 秒调用一次。

我该怎么做？

```
// this method calls from html-page:
void MyFirstPluginAPI::testEvent()
{
  //fire_test();
  // thread starting:
  boost::thread my_thread(boost::bind(&MyFirstPluginAPI::hello_world, this));
}
void MyFirstPluginAPI::hello_world() 
{
  for(;;)
  {
    boost::posix_time::seconds SleepTime(2);
    boost::this_thread::sleep(SleepTime);
    // here i must call InvokeAsync("myCallback",FB::variant_list_of(0));
    // how can i to do it?
  }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:34:09.530

是真的答案吗？从插件到浏览器/html页面是真正的异步回调吗？

也许，我解决了这个问题。

我不使用**InvokeAsync**，我制作“信号”：

```
FB_JSAPI_EVENT(event1, 0, ()); 
```

然后我发出“信号”

```
fire_event1(); 
```

我在现场收到“信号”

```
addEvent(plugin(), 'event1', function(){
  elem = document.getElementById('mydiv');
  elem.innerHTML = elem.innerHTML + "hello<br>";
}); 
```

我会随时对此进行测试，然后我会将这个问题标记为已解决。

# wpf - ClickOnce 不会从开始菜单自动更新

> ID：16166477
> 
> 赞同：2
> 
> 时间：2013-04-23T10:01:14.173
> 
> 标签：wpf, clickonce, auto-update

我们目前有一个 WPF 应用程序，它使用 ClickOnce 部署在我们公司网络内的文件服务器上。它设置为在应用程序启动前自动更新，允许离线运行（以防文件服务器由于某种原因关闭），我们勾选了“创建桌面图标”。

在我们的 CI 构建中，我们注入了版本控制，并且我们尝试增加版本号的不同部分以尝试强制更改。这没有任何效果。

如果用户尝试从开始菜单或桌面快捷方式运行应用程序，它永远不会自动更新。

如果我们删除桌面快捷方式，右键单击服务器上的 .application 文件并选择“发送到桌面”，生成的桌面快捷方式*将*自动更新而不会失败。

有没有人遇到过这个问题，如果有，是如何解决的？

我们的临时解决方案是删除初始安装中创建的快捷方式，并按照上述方法手动创建快捷方式，但感觉有点像 hack！

已编辑：根据 Karel 的评论添加了更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T17:12:34.080

在文本编辑器中打开快捷方式，看看它是指存在的位置。我遇到了同样的问题，快捷方式引用了一个不存在的本地共享。这并没有阻止我的 ClickOnce 应用程序启动，只是没有更新。

# ipad - 从两个手指的中心缩放 UIImageView 并单击按钮

> ID：16166481
> 
> 赞同：0
> 
> 时间：2013-04-23T10:01:23.597
> 
> 标签：ipad, uipinchgesturerecognizer

我有一个图像视图，想添加一些自定义捏合手势识别器。我可以缩放我的图像视图，但问题是，它不是从两个手指的中心放大。

如何从两个手指的中心进行缩放？这就是我目前正在做的（在`viewDidLoad`）

```
UIPinchGestureRecognizer* pinchRecognizer = 
    [[UIPinchGestureRecognizer alloc] initWithTarget:self
                                              action:@selector(handlePinch:)];    
 [imageView addGestureRecognizer:pinchRecognizer]; 
```

这是捏法的代码

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{  

    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;

} 
```

感谢代表们...现在我在这里更新我的问题..我想在按钮单击时缩放图像..我正在做的是

-(IBAction)Zoom_image:(id)sender {

```
 CGFloat scaleValue = 2;

 CGAffineTransform transform = GAffineTransformMakeScale(scaleValue,scaleValue);

 self.backgroundImgView.transform = transform; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T15:18:35.287

这也将起作用。只需将图像移动到捏合的中心，对其进行缩放，然后在一次变换中返回其位置。

```
- (void) pinch:(UIPinchGestureRecognizer *) recognizer {

    CGPoint anchor = [recognizer locationInView:imageToScale];
    anchor = CGPointMake(anchor.x - imageToScale.bounds.size.width/2, anchor.y-imageToScale.bounds.size.height/2);

    CGAffineTransform affineMatrix = imageToScale.transform;
    affineMatrix = CGAffineTransformTranslate(affineMatrix, anchor.x, anchor.y);
    affineMatrix = CGAffineTransformScale(affineMatrix, [recognizer scale], [recognizer scale]);
    affineMatrix = CGAffineTransformTranslate(affineMatrix, -anchor.x, -anchor.y);
    imageToScale.transform = affineMatrix;

    [recognizer setScale:1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:52:57.053

问题是您所做的只是缩放视图。

您不会尝试将缩放转换为以两个手指点的中心为中心。

所以抓住两个手指点。制定他们的中心并添加翻译。

请注意，下面的代码*原则*上将显示您需要做什么，我可以保证它需要修复，因为在实践中仿射变换并非微不足道，而且我不是您的错误修复程序。

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
    UIView *view = recognizer.view;

    CGRect frame = view.bounds;

    //you may wish to get more accurate by querying and calculating against the touches via 
    //- (NSUInteger)numberOfTouches;
    //- (CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(UIView*)view;
    CGPoint nominalCenter = [recognizer locationInView:view];

    CGFloat deltaFromCenterX = CGRectGetMidX(frame) - nominalCenter.x;

    CGFloat deltaFromCenterY = CGRectGetMidY(frame) - nominalCenter.y;

    currentScale = currentScale * recognizer.scale;

    CGAffineTransform scale = CGAffineTransformMakeScale(currentScale, currentScale);

    CGAffineTransform translate = CGAffineTransformMakeTranslation(deltaFromCenterX, deltaFromCenterY);

    //possibly its going to be scale then translate instead
    CGAffineTransform final = CGAffineTransformConcat(translate, scale);

    recognizer.view.transform = final;
    recognizer.scale = 1;
} 
```

# jquery-mobile - jQuery手机。表单验证器（带有选择）

> ID：16166487
> 
> 赞同：1
> 
> 时间：2013-04-23T10:01:31.567
> 
> 标签：jquery-mobile, select, jquery-validate, validation

我试图验证这样的表格：

```
<input type="text" id="nombre" name="nombre" data-mini="true" required />
<select id="comboPaises" name="comboPaises" data-mini="true">
 <option value="0" disabled="disabled" selected="">Selecciona...</option>
 <option value="1">España</option>
</select> 
```

*required*可以正常`input text`工作，但不能与`select`.

Jquery Mobile 有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:28:08.433

如果您使用 jQuery Validate 插件，则第一`option`项**必须**包含`value=""`.

```
<select id="comboPaises" name="comboPaises" data-mini="true" required="required">
   <option value="" disabled="disabled" selected="">Selecciona...</option>
   <option value="1">España</option>
</select> 
```

**演示：http: [//jsfiddle.net/RX3MN/](http://jsfiddle.net/RX3MN/)**

否则，请解释您如何进行表单验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T10:10:22.913

$("#formid").validate(); Then simply call validate on your form and it will not submit when "Choose" is selected.

# jquery - 简单的谷歌地图到 Fancybox

> ID：16166489
> 
> 赞同：0
> 
> 时间：2013-04-23T10:01:38.597
> 
> 标签：jquery, forms, google-maps, fancybox, fancybox-2

任何人都可以帮助解决以下问题：-

我需要将以下结果显示在花式框中，可以吗？

```
<h2>Get Directions</h2>
<form action="http://maps.google.com/maps" method="get" target="fancybox">
<h6>Enter your starting address:</h6>
<input type="text" name="saddr" value="Enter Your Postcode"/>
<input type="hidden" name="daddr" value="52.444266,-1.648421" />
<input type="submit" value="Get Directions" class="button" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:29:58.040

首先，您可能需要知道可以将哪些[URL 参数](https://developers.google.com/maps/documentation/staticmaps/)传递给 Google 地图，以便构建要在 fancybox 中显示的 URL。

其次，`id=myMapForm"`在表单中添加一个 ID（例如），以便您可以使用 jQuery 对其进行操作：

```
 <form id="myMapForm" action="http://maps.google.com/maps" method="get" target="fancybox">
    <h6>Enter your starting address:</h6>
    <input type="text" name="saddr" value="Enter Your Postcode" />
    <input type="hidden" name="daddr" value="52.444266,-1.648421" />
    <input type="submit" value="Get Directions" class="button" />
 </form> 
```

然后，您可以使用以下脚本：

*   防止在新窗口/标签中提交表单
*   从字段中获取输入值并将它们存储在变量中
*   构建将变量作为参数传递的 Google 地图 URL
*   在 fancybox 中打开生成的 URL

jQuery代码：

```
$("#myMapForm").on("submit", function (e) {
    e.preventDefault();
    var sAdd = $(this).find("input[name=saddr]").val().replace(" ", "+");
    var dAdd = $(this).find("input[name=daddr]").val();
    var url  = "https://maps.google.com/maps?f=q&source=s_q&hl=en&q=from:+" + sAdd + "+to:+" + dAdd + "&ie=UTF8&saddr=" + sAdd + "&daddr=" + dAdd + "&center=" + dAdd + "&z=7&output=embed";
    $.fancybox(url, {
        type: "iframe"
    });
}); 
```

**请注意**，我们将`.replace()`方法添加到*源地址*以将任何`spaces`转换为​​加号 ( `+`)。这是因为邮政编码可能类似于`SW1A 0AA`(UK) 并且必须`SW1A+0AA`在 URL 中转换。

见**[JSFIDDLE](http://jsfiddle.net/fcme9/)**

**注意**：`.on()`需要 jQuery v1.7+

# django - 如何加密到 Django 默认 pbkdf2_sha256 加密？

> ID：16166493
> 
> 赞同：3
> 
> 时间：2013-04-23T10:01:47.450
> 
> 标签：django, passwords

我想加密用户输入密码以在某些视图中与原始密码进行比较。我尝试导入和应用`encrypt`方法：

```
import passlib.hash.django_pbkdf2_sha256 
```

但它没有那个模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-07T19:19:11.343

您可能正在寻找[set_password](https://docs.djangoproject.com/en/1.11/ref/contrib/auth/#django.contrib.auth.models.User.set_password)

```
from models import User
new_user = User.objects.create(username='new_user', email='example@example.com')
new_user.set_password('newpassword') 
```

或者，您可以使用[make_password](https://docs.djangoproject.com/en/dev/topics/auth/passwords/#module-django.contrib.auth.hashers)

```
from django.contrib.auth.hashers import make_password
from models import User
first_pass = User.objects.all()[0].password.split('$')
hasher = first_pass[0]
salt = first_pass[1]  # grabbing salt from the first password of the database
make_password('newpassword', salt, hasher) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:36:48.583

您应该只使用以下`authenticate`方法`django.contrib.auth`：

```
test_user = authenticate(username=..., password=...) 
```

如果凭据有效，将返回一个新用户，但这不会更改当前登录的用户。如果某些用户使用不同的加密方案，或者您使用自定义身份验证后端，这仍然有效。

如果由于某种原因你仍然需要重现 Django 的加密，你可以使用`django.utils.crypto.pbkdf2`，但同样，你可能会更好地使用更高级别的`check_password`函数`django.contrib.auth.hashers`：

```
check_password(new_password, encoded_password) 
```

# android - 更改 EditText.setError() 背景和错误消息 android

> ID：16166497
> 
> 赞同：2
> 
> 时间：2013-04-23T10:02:04.147
> 
> 标签：android, android-edittext

我想更改无效电子邮件地址的错误消息的文本和背景颜色。我试过了，但我的短信没有显示任何内容。这是我的代码。

```
public class TextboxValidation {

    //validating email address

    public static boolean validateEditText(EditText editText) {
        boolean valid = true;
        Context context;

        String text = editText.getText().toString();

        boolean isEmail = (editText.getInputType() & InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS) == InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS;
        boolean isNumeric = (editText.getInputType() & InputType.TYPE_NUMBER_FLAG_DECIMAL) == InputType.TYPE_NUMBER_FLAG_DECIMAL;

        if (TextUtils.isEmpty(text)) {
            if (!isNumeric || !TextUtils.isDigitsOnly(editText.getHint())) {
                valid = false;
            }

        } else if (isEmail) {
            valid = android.util.Patterns.EMAIL_ADDRESS.matcher(text).matches();
        }

        if (!valid) {
            context = editText.getContext();

            if (isEmail) {

                int ecolor = R.color.black; // whatever color you want
                String estring = "Veuillez saisir une addresse email valide";
                ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
                SpannableStringBuilder ssbuilder = new SpannableStringBuilder(estring);
                ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);

                editText.setError(ssbuilder);
            } else {
                editText.setError("Le champ ne peut etre vide.");
            }
            return false;
        }

        editText.setError(null);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T11:57:56.513

您可以使用**HTML 字体标签更改文本颜色。**

但是对于自定义背景颜色，您应该制作自己的自定义弹出窗口。有关更多信息，请通过此链接：- [如何在 android 中将样式写入 EditText 的错误文本？](https://stackoverflow.com/questions/14413575/how-to-write-style-to-error-text-of-edittext-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T07:09:45.603

你可以这样做。

```
if (TextUtils.isEmpty(cashierid)) {
        cid.setError(Html.fromHtml("<font color='red'>Username can't be empty</font>"));
        return;
    }
else if (TextUtils.isEmpty(cashierpwd)) {
        cpwd.setError(Html.fromHtml("<font color='red'>Password can't be empty</font>"));
        return;
    } 
```

# php - PHP Socket，不是一个有效的流资源

> ID：16166501
> 
> 赞同：0
> 
> 时间：2013-04-23T10:02:18.720
> 
> 标签：php, sockets, resources, stream, irc

我知道以前有人问过这个问题，但我无法让它发挥作用。

fgets() 和 feof() 给出无效流资源的错误。

插座

```
$socket =  fsockopen($settings['server'], $settings['port'], $errno, $errstr, 20); 
```

环形

```
 while(!feof($socket)) {
            interface_retrieve_buffer(); 
```

interface_retrieve_buffer()

```
function interface_retrieve_buffer() {
    global $buffer,$socket;
    $buffer = fgets($socket);
} 
```

这一切都是使用各种功能按顺序完成的，但我猜套接字真的很快超时并导致错误被发送？

它正在填满我的硬盘（大约 4 小时内 90 GB），我真的需要解决这个问题，我尝试了几种解决方案，但都没有奏效。

谢谢！

编辑：更多代码： http: [//pastebin.com/BwqJ0CJQ](http://pastebin.com/BwqJ0CJQ)和[http://pastebin.com/gcFEAkRS](http://pastebin.com/gcFEAkRS)

# android - 运行时错误在后台服务中读取收件箱消息

> ID：16166502
> 
> 赞同：-2
> 
> 时间：2013-04-23T10:02:21.287
> 
> 标签：android, service

我正在尝试在后台服务的收件箱中读取未读短信，它正在读取短信，但在运行时读取短信后强制关闭。

```
public class MyService extends Service {
private static final String TAG = "MyService";
MediaPlayer player;
Context context;
String value="";
int flag;
int unreadMessagesCount;
@Override
public void onCreate() {
    Log.d(TAG, "onCreate");
    player = MediaPlayer.create(this, R.raw.gossip_blast);
    player.setVolume(50,50);
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
    Cursor c = getContentResolver().query(SMS_INBOX, null, "read = 0", null, null);
    unreadMessagesCount = c.getCount();
    String cnt=Integer.toString(unreadMessagesCount);
    String val="";
    while(c.moveToNext())
            {
    value= c.getString(c.getColumnIndex("body"));
        val=val+ c.getString(c.getColumnIndex("body"))+"\n";
        if(value.indexOf("help")>0)
        {
        Toast.makeText(this,"HELP", Toast.LENGTH_LONG).show();
        player.start();
           // Vibrator vibrator = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
            //vibrator.vibrate(2000);
            String notificationService = Context.NOTIFICATION_SERVICE;
            NotificationManager notificationManager = (NotificationManager) getSystemService(notificationService);          
            Notification notification = new Notification(R.drawable.images,value, System.currentTimeMillis());
            Intent notificationIntent = new Intent(getApplicationContext(), DaySixteenActivity.class);
            PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0,notificationIntent, 0);
            notification.setLatestEventInfo(getApplicationContext(), value, value,contentIntent);
            notificationManager.notify(1, notification);
            }
    }
    c.deactivate();
    c.close();      
}
    public void startAlert(View view) {         
        Intent intent = new Intent(this, read_sms.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);           
        Toast.makeText(this, "Alarm set in  " ,
            Toast.LENGTH_LONG).show();
      } 
    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
    }
@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");  
    }
    @Override
public IBinder onBind(Intent intent)
    {
    return null;
}    } 
```

收到此错误

```
04-23 11:36:55.719: E/AndroidRuntime(7509): FATAL EXCEPTION: main
04-23 11:36:55.719: E/AndroidRuntime(7509): java.lang.RuntimeException: Unable to  instantiate service com.example.MyService: java.lang.NullPointerException
04-23 11:36:55.719: E/AndroidRuntime(7509):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2388)
04-23 11:36:55.719: E/AndroidRuntime(7509):     at android.app.ActivityThread.access$1600(ActivityThread.java:140)
04-23 11:36:55.719: E/AndroidRuntime(7509):     at dalvik.system.NativeStart.main(Native Method)
04-23 11:36:55.719: E/AndroidRuntime(7509): Caused by: java.lang.NullPointerException
04-23 11:36:55.719: E/AndroidRuntime(7509):     at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:91)
04-23 11:36:55.719: E/AndroidRuntime(7509):     at java.lang.Class.newInstanceImpl(Native Method) 
```

我在清单文件中包含了权限

```
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<service android:enabled="true" android:name=".MyService" />
      <receiver android:name=".MyService" android:exported="true">
            <intent-filter android:priority="999" >
                <action android:name="android.intent.action.PHONE_STATE" />
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />                                     
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:50:37.383

更改这行代码 -

```
 Cursor c = getContentResolver().query(SMS_INBOX, null, "read = 0", null, null); 
```

至

```
Cursor cursor = context.getContentResolver()
                .query(SMS_INBOX, null,"read = 0", null, null); 
```

# moodle - Moodle：发送错误：SMTP 错误：

> ID：16166505
> 
> 赞同：0
> 
> 时间：2013-04-23T10:02:29.440
> 
> 标签：moodle

我在尝试通过论坛发送电子邮件时收到此消息，我确定 SMTP 正确

“发送错误：SMTP 错误：以下收件人失败：”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:24:45.020

您要检查配置设置 @ /admin/search.php?query=smtp 以及配置文件中的电子邮件是否是合法的电子邮件地址。最后，如果 smtp 服务器用于内部消息，它可能允许将电子邮件发送到某些地址而不是其他地址。

# javascript - jQuery - 在元素上“悬停”一段时间时触发事件

> ID：16166507
> 
> 赞同：0
> 
> 时间：2013-04-23T10:02:33.487
> 
> 标签：javascript, jquery

我正在编写一些默认动画，只有当 4 个按钮都没有悬停 1 秒时才会触发。

如果在等待期间（即 1 秒）悬停任何按钮，则计时器应重置。任何的想法？谢谢！

[更新] 在下面的评论中查看我的片段，希望有人觉得它有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:25:25.120

尝试

```
$(function() {
    var timer;

    function schedule() {
        timer = setTimeout(function() {
            // start timer
        }, 1000);
    };

    $('button').hover(function() {
        if (timer) {
            clearTimeout(timer);
        }
    }, function() {
        schedule();
    });
    schedule();
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/GysxK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:24:59.507

假设每个按钮都有一个类'btn'

```
$(".btn").bind('onmouseenter',function(){
//Clear the Timer
   window.clearInterval();

//count the timer and write the logic
   window.setInterval(function(){
   //Logic of Animation you are gonna do if no hovering happens in 1 sec
},1000);
}); 
```

# javascript - Meteor 以哪个顺序包含我的 js 文件

> ID：16166509
> 
> 赞同：5
> 
> 时间：2013-04-23T10:02:37.650
> 
> 标签：javascript, meteor

我有一个js文件：

```
function library_f() {
}

function some_f() {
  library_f();
}

function another_f() {
  library_f();
} 
```

但是代码看起来很难看，我决定将我的 js 文件拆分为三个：

一个.js：

```
function library_f() {
} 
```

二.js：

```
function some_f() {
  library_f();
} 
```

三.js：

```
function another_f() {
  library_f();
} 
```

但现在我得到错误

```
library_f() is not defined 
```

如何设置顺序以包含我的 js 文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T10:37:02.347

从[文档](http://docs.meteor.com/)：

> *   首先加载应用程序根目录下的 lib 目录中的文件。匹配 main.* 的文件在其他所有内容之后加载。
>     
>     
> *   子目录中的文件在父目录中的文件之前加载，因此最深的子目录中的文件首先加载（在 lib 之后），而根目录中的文件最后加载（除了 main.*）。
>     
>     
> *   在目录中，文件按文件名的字母顺序加载。
>     
>     
> 
> 这些规则堆叠起来，例如在 lib 中，文件仍然按字母顺序加载；如果有多个名为 main.js 的文件，则子目录中的文件会更早加载。

但看起来这些函数无法访问，因为它们不是全局的。在meteor中，每个文件的变量/函数不能被另一个文件访问，除非变量或函数是全局的。

因此，您需要以这种方式声明您的函数：

```
library_f = library_f() {
...
} 
```

以便其他文件可以访问它。变量也是如此：

```
var x = true; //Not accessible by other files
x = true; //Accessible by other files

var dothis = function () {...} //Not accessible by other files
dothis = function() {..} //Not accessible by other files
function dothis() {..} //Not accessible ny other files 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:19:41.700

Meteor 把你所有的 JS 文件都收集起来，放到一个文件中，顺序不是你能控制的。

我认为这里的问题是：你从哪里调用函数？如果他们立即自动执行，那么您说得对，订单可能很重要。但是，Meteor 通常将函数加载到 DOM 中，然后运行它们以响应诸如`Meteor.startup(callback)`or之类的事件`Template.page.rendered(callback)`。在这些示例中执行时，您的所有 JS 文件都将被加载，并且您的函数应该都准备就绪，可以按照您喜欢的任何顺序运行。

如果您不想在创建它们后立即运行它们，那么值得在浏览器控制台中检查，您可以看到这些函数在页面加载后都存在于 DOM 中。输入`library_f`并查看返回的内容。

# java - 来自数据库的 Javascript DropDown

> ID：16166514
> 
> 赞同：0
> 
> 时间：2013-04-23T10:02:54.813
> 
> 标签：java, javascript

请使用此 Javascript 脚本从我的考试表中提取行。从考试表中提取的内容也应该拉出主题表。以下是我使用 Javascript 和 Java 尝试过的事情。

```
<script type="text/javascript">
function selRow(){document.getElementById('ExamId').onchange = function() {
document.getElementById('SubjectId').selectedIndex = this.selectedIndex;
}}</script> 
```

所以我对这件事的意图是，当用户选择 ExamId 时，让它拉出属于 Exam 的 SubjectId，因为 Subject 在我的数据库中有 ExamFK。

这是我从数据库中提取 ExamID 的代码：

```
<td width="121"><select name="txtExam" id="ExamId" onChange="selRow()">
<option value="">[Select an Exam First]</option>
<%if (exams != null && !exams.isEmpty()){
for (Iterator iterator = exams.iterator(); iterator.hasNext();){
Exam exam = (Exam)iterator.next();%>
<option value="<%= exam.getId()%>"><%= exam.getName()%></option>
<%}}%></select></td> 
```

这是我从主题表进行后续更改的代码：

```
<td width="130"> <select name="txtSubject" id="SubjectId">
<option value="0">[Select Subject]</option>
<%Long l = new Long(0L); 
if (subjects != null && !subjects.isEmpty()){
// instance.setSelectedExamId(Long.valueOf(subjectIdString));
// exams = (Exam)exams.getRecordById(Exam.class, Long.valueOf(subjectIdString));
for (Iterator iterator = exams.iterator(); iterator.hasNext();)
{
Exam exam = (Exam)iterator.next();

Subject subject;

subject = (Subject)ExamPrepValidationServlet.examService.getRecordById(Exam.class, l);
%><option value="<%= subject.getId()%>"><%= subject.getName()%></option>
<%}}%> 
</select></td> 
```

我不知道我的方向是否正确，但请有人来帮助我。谢谢

# maven-3 - 如何在我的 maven pom 文件中防止 org.eclipse.m2e 生命周期映射？

> ID：16166515
> 
> 赞同：2
> 
> 时间：2013-04-23T10:02:59.490
> 
> 标签：maven-3, pom.xml, maven-enforcer-plugin

我有一个 Maven 项目，我们通常使用 Eclipse 对其进行编辑。一些开发人员不断将有关 org.eclipse.m2e 生命周期映射插件的信息添加到我的 nice-and-clean pom.xml 的 pluginManagement 部分。我宁愿将它添加到 Eclipse 工作区中。

```
 <build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
            ... 
```

我想阻止这种情况并与之交谈是一种选择，但我更愿意将它与自动执行结合起来。

我使用“maven-enforcer-plugin”进行其他几项检查，它看起来是显而易见的去处。

我已经尝试过“禁止插件”规则，但该规则只对 build->plugins 部分做出反应，而不是 builds->pluginManagement->plugins

我还尝试了“评估 beanshell”，但无法弄清楚如何通过属性到达 pom 中的正确部分

如果现有规则已经支持它，我宁愿不编写自定义规则。

你们中有人知道怎么做吗？

# silverlight - SILVERLIGHT 发送文件到服务器

> ID：16166518
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:04.410
> 
> 标签：silverlight, webclient

我正在使用 PhotoChooserTask 从 windows phone 中选择图像，然后我想将它发送`file/image`到服务器。

`WebClient`有方法`UploadFile`但`WebClient`在`Silverlight`没有这个方法。我试图使用我在这个论坛上找到的几个例子，但它不起作用。谁能从一开始就帮我做到这一点？我真的不明白`Silverlight`是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:34:28.680

您可以使用 Webclient 类上传文件为

```
private void UploadFile()
        {
            FileStream _data; // The file stream to be read
            string uploadUri;

            byte[] fileContent = new byte[_data.Length]; 
            int bytesRead = _data.Read(fileContent, 0, CHUNK_SIZE);

            WebClient wc = new WebClient();
            wc.OpenWriteCompleted += new OpenWriteCompletedEventHandler(wc_OpenWriteCompleted);
            Uri u = new Uri(uploadUri);
            wc.OpenWriteAsync(u, null, new object[] { fileContent, bytesRead }); 
        }

        void wc_OpenWriteCompleted(object sender, OpenWriteCompletedEventArgs e) 
        {
            if (e.Error == null)
            {
              // Upload completed without error
            }
        } 
```

在服务器端，您可以处理

```
 public void ProcessRequest(HttpContext context)
    {
        if (context.Request.InputStream.Length == 0)
            throw new ArgumentException("No file input");
        if (context.Request.QueryString["fileName"] == null)
            throw new Exception("Parameter fileName not set!");

        string fileName = context.Request.QueryString["fileName"];
        string filePath = @HostingEnvironment.ApplicationPhysicalPath + "/" + fileName;
        bool appendToFile = context.Request.QueryString["append"] != null && context.Request.QueryString["append"] == "1";

        FileMode fileMode;
        if (!appendToFile)
        {
            if (File.Exists(filePath))
                File.Delete(filePath);
            fileMode = FileMode.Create;
        }
        else
        {
            fileMode = FileMode.Append;
        }
        using (FileStream fs = File.Open(filePath, fileMode))
        {
            byte[] buffer = new byte[4096];
            int bytesRead;
            while ((bytesRead = context.Request.InputStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                fs.Write(buffer, 0, bytesRead);
            }
            fs.Close();
        }
    } 
```

希望它会帮助你。

# symfony1 - 如何从 symfony 中的表单访问会话值

> ID：16166519
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:05.270
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我有一个从操作表单设置为会话的变量。我需要以我该怎么做的形式访问变量？这是我要访问变量的代码。

```
 $this->unitCost = $this->getUser()->getAttribute('unit_cost');
    //assign variable to session value
    $value_lists = ($this->unitCost);
    //select value from foreach
    print_r($value_lists);
    foreach($value_lists as $values)
    {
        $newValue = $values['unit_cost'];
    } 
```

我想在表格中的任何地方访问这个 $newValue

我想在定义小部件的 sFform 中的公共函数 configure() { } 中使用此代码。我该怎么做？请帮助我..非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:38:21.977

当你调用你的表单时，你可以像这样设置它的变量：

```
$this->form = new YourForm(null, array('Myvalue' => $newValue)); 
```

并以您的形式获取它，如下所示：

```
$newValue = $this->getOption('Myvalue'); 
```

# javascript - 在 Javascript 中打开更多 XML

> ID：16166521
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:15.993
> 
> 标签：javascript, xml

我需要使用单个 javascript 文件打开多个 XML 文件。XML 具有相同的结构，但对于特定情况，我必须打开 25 个具有相同结构的 XML 文件。

现在我已经用这种方式修复了，但它太贵了，我不能做一个循环：

```
 file1=new XMLHttpRequest();
     file2=new XMLHttpRequest(); 
     //...
     file25=new XMLHttpRequest(); 

     file1.open("GET","info1",false);
     file1.send();
     xmlDoc1=file1.responseXML; 

     file2.open("GET","info2.xml",false);
     file2.send();
     xmlDoc2=file2.responseXML;
     //... other 23 file

     x1=xmlDoc1.getElementsByTagName("infos");
     x2=xmlDoc2.getElementsByTagName("infos");

     //Then I can read the infos on all files
     id_info1 = (x1[i].getAttribute("id_info"));
     id_info2 = (x2[i].getAttribute("id_info"));
     //etc... etc.. 
```

现在我想创建一个“x”数组，例如：

```
 x = []; // or I've tryed also x= new Array()
     x[0]=xmlDoc1.getElementsByTagName("infos");
     x[1]=xmlDoc2.getElementsByTagName("infos");
     //... 
```

并希望通过如下说明阅读信息：

```
 id_info1 = (x[0][i].getAttribute("id_info")); 
```

所以我可以循环信息，但我不能这样做。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:28:04.360

```
xml = [];
x = [];
for(var i = 0; i < 25; ++i){
  var xhr = new XMLHttpRequest();
      xhr.open("GET","info"+(i+1)+".xml",false);
      xhr.send();

      xml[i] = xhr.responseXML;
      x[i] = xml[i].getElementsByTagName("infos");
}
var id_info1 = (x[0][i].getAttribute("id_info")); 
```

第一步 - 使用 document.querySelector 或 document.querySelectorAll，如下所示：

```
var infos = xml[i].querySelectorAll('infos'); //return NodeList of all infos 
```

然后，如果您在第一个信息节点中找不到具有“kind”属性的元素：

```
var existKind = infos[0].querySelectorAll('[kind]'); 
```

在所有信息中：

```
var existKinds = xml[i].querySelectorAll('infos [kind]'); 
```

具有价值：

```
var existKindWithValue = infos[0].querySelectorAll('[kind="2"]'); 
```

# cordova - Phonegap 2.6 - iOS 升级后通知提示不起作用

> ID：16166522
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:19.660
> 
> 标签：cordova, phonegap-plugins

自从从 2.4 升级到 phonegap 2.6 以来，方法 navigator.notification.prompt 已经停止工作。Xcode 吐出这个错误：

```
 ERROR: Method 'prompt:' not defined in Plugin 'Notification'
-[CDVCommandQueue executePending] [Line 103] FAILED pluginJSON = ["Notification1135621647","Notification","prompt",["Are you sure you want to permanently delete this code?","Delete Tracking Code FFHFDCVHHGG",["Delete","Cancel"]]] 
```

这就是我设置提示调用的方式，它几乎直接来自 PhoneGap 文档。该事件是通过主干从单击事件触发的。

```
navigator.notification.prompt(
    'Are you sure you want to permanently delete this code?',  // message
     onPrompt,                                                 // callback to invoke with index of button pressed
    'Delete Tracking Code ' + self2.options.parentModel.toJSON().track_code.toUpperCase(),            // title
    ['Delete','Cancel']          // buttonLabels
);

function onPrompt(button) {
    if (button === 1) {
        self2.options.parentModel.clear();  // Remove the item from local storage
    nzp.router.navigate('tracking', {trigger: true}); // Navigate to the tracking page
    } else {
        return false;
    }
} 
```

conrim 方法也不起作用，但是 alert 方法起作用。

我注意到，当我在浏览器中查看该站点时，我也会收到一条新的错误消息，上面写着 cordova_plugins.json 404 (Not Found)。我不确定这是为了什么，或者它是否与我的问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:43:30.870

事实证明，通知工作正常。该问题与我更新项目时没有更新的 CordovaLib.xcodeproj 路径有关，因此它指向旧版本

# xcode - 使用 AppleScript 启动 Xcode 项目

> ID：16166526
> 
> 赞同：2
> 
> 时间：2013-04-23T10:03:32.113
> 
> 标签：xcode, applescript, xcode4.5

我开始关注 AppleScript。我尝试使用 Xcode 打开 xcode 项目。我已成功打开包含 xcode 项目但尚未打开的文件夹，使用 Xcode 启动项目。请帮助？！

```
tell application "Finder" to open folder "workpace" of folder "Documents" of folder "user1" of folder "Users" of disk "Macintosh HD" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:41:14.870

您可以使用以下命令从正常路径获取文件对象`POSIX file`：

```
tell application "Finder"
    open POSIX file "/Users/username/Documents/workspace/workspace.xcodeproj"
end tell 
```

这会稍微慢一些，但即使 Finder 没有响应，它也可以工作：

```
do shell script "open ~/Documents/workspace/workspace.xcodeproj" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T15:41:38.453

你会想做这样的事情......

```
tell application "Xcode"
    open file "path:to:my:file.xcodeproj"
end tell 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T08:58:29.147

```
 tell application "Xcode"
        open file "Macintosh HD:Users:YourUserName:YourFolder:YourFolder:YourFileProject.xcodeproj"
    end tell 
```

# batch-file - 根据文件到达文件夹的条件运行批处理文件

> ID：16166527
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:32.887
> 
> 标签：batch-file

我正在自动化我的一项工作，我打算在文件到达文件夹后立即压缩文件夹中的文件。

Win zip脚本已写入批处理文件，

你能帮助它如何通过Windows批处理文件或任何其他方式完成吗？

谢谢， 席德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:33:49.640

这是一种使用 vbscript 的方法。将以下内容复制到文本文件中并将其重命名为 Folderwatcher.vbs

```
 'FolderWatcher.vbs

    Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & _
    strComputer & "\root\cimv2")

    Set colMonitoredEvents = objWMIService.ExecNotificationQuery _
    ("SELECT * FROM __InstanceCreationEvent " _
    & "WITHIN 1 WHERE " _
    & "TargetInstance ISA 'CIM_DataFile' and " _
    & "TargetInstance.Drive='C:' and " _
    & "TargetInstance.Path='\\scripts\\'")

    Do
        Set objEvent = colMonitoredEvents.NextEvent
        Wscript.Echo objEvent.TargetInstance.FileName & "." & _
        objEvent.TargetInstance.Extension & " Created"
        wscript.sleep (10000) 'wait 10 seconds
        'Run your Unzip code here
        wscript.echo "Unzipping file now"
    Loop 
```

将 TargetInstance.Drive 和 Path 更改为接收文件的目录。如果文件比较大，可以增加wscript.sleep。每秒1000次。此外，如果您使用 Wscript 运行它，它将弹出创建和解压缩事件的窗口。如果您不希望这样，请使用 ' 注释掉这些行，或者只需在 cmd 窗口中使用

```
Cscript //nologo folderwatcher.vbs 
```

您的 cmd 提示符位于 folderwatcher.vbs 的位置。正在运行的 cmd 窗口中的 Ctrl_C 将停止脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:43:36.463

在不知道文件以及它们如何应用于情况的情况下，您可以使用此 bat 文件来监视集合中的最后一个文件，当它到达时它将压缩它们。

如果文件正在被复制或通过 FTP 传输，那么您将需要像所示的 ping 命令一样添加延迟，以便在继续 ZIP 过程之前完成 last_file.exe。

```
@echo off
:loop
if exist "last_file.exe" goto :zip
ping -n 15 localhost >nul
goto :loop
:zip
rem 60 second delay
ping -n 60 localhost >nul
rem your script goes here. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T11:56:06.563

您可以使用 Batch 执行此操作，但您必须整天打开 CMD 窗口以监视“X”文件夹中的文件更改，或者您可以添加计划的重复性任务以每 1 分钟启动一个批处理文件来搜索新文件在文件夹中......但那是一样的。你可以这样做，但批处理不是这样做的好方法。

考虑使用这个名为**Directory Monitor**的应用程序，它是免费的，可以满足您的需要：

[http://www.brutaldev.com/page/Directory-Monitor](http://www.brutaldev.com/page/Directory-Monitor)

![在此处输入图像描述](https://i.stack.imgur.com/pChmM.png)

您也可以下载便携式版本。

这是步骤：

1-下载/安装应用程序

2- 打开它并单击“目录”以添加要监视的文件夹并选择要监视的文件更改（在本例中为新文件）。

3- 在同一个窗口中，您可以看到一个“执行”文本框，您可以在其中加载带有一些参数的 winzip，或者您可以启动批处理脚本来压缩文件，如下所示：

***执行.bat***

```
@Echo OFF
For /R "C:\MyNewfiles" %%# in ("*") Do (
    If /I "%%~x#" NEQU ".zip" (
        YourWinZIP Command to compress "%%a"
    )
)
Exit 
```

4- 如果要使用用户会话加载应用程序，请配置应用程序的设置。

我希望这有帮助。

# apache - 重写规则转换

> ID：16166532
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:43.913
> 
> 标签：apache, mod-rewrite

我需要帮助，我正在将规则从 lighthttpd 重写为 apache httpd。虽然我以前从未使用过 lighthttpd。我希望有人可以帮助我重写这段代码。即使在 apache 中，我也对 Rule 系统有点失望，但还不错。

```
"^install/?$" => "install.php",

"^/doc/([a-z]+)/?$" => "doc.php?cat=$1",
"^/~([a-z.]+)/doc/([a-z]+)/?$" => "doc.php?project=$1&cat=$2",

"^/~([a-z.]+)/?$" => "index.php?project=$1",
"^/~([a-z.]+)/api/([a-z]+)/?$" => "index.php?project=$1&mode=$2",

"^/all/?$" => "list.php",
"^/api/([a-z]+)/all/?$" => "list.php?mode=$1",
"^/~([a-z.]+)/all/?$" => "list.php?project=$1",
"^/~([a-z.]+)/api/([a-z]+)/all/?$" => "list.php?project=$1&mode=$2",
"^/rss/?$" => "list.php?rss=1",
"^/~([a-z.]+)/rss/?$" => "list.php?project=$1&rss=1",
"^/all/([0-9]+)/?$" => "list.php?page=$1",
"^/api/([a-z]+)/all/([0-9]+)/?$" => "list.php?mode=$1&page=$2",
"^/~([a-z.]+)/all/([0-9]+)/?$" => "list.php?project=$1&page=$2",
"^/~([a-z.]+)/api/([a-z]+)/all/([0-9]+)/?$" => "list.php?project=$1&mode=$2&page=$3",

"^/([0-9]+)/?$" => "show.php?id=$1",
"^/~([a-z.]+)/([0-9]+)/?$" => "show.php?project=$1&id=$2",
"^/([0-9]+)/([a-z|A-Z]+)/?$" => "show.php?id=$1&mode=$2",
"^/~([a-z.]+)/([0-9]+)/([a-z|A-Z]+)/?$" => "show.php?project=$1&id=$2&mode=$3",
"^/api/([a-z|A-Z]+)/([0-9]+)/?$" => "show.php?mode=$1&id=$2",
"^/~([a-z.]+)/api/([a-z|A-Z]+)/([0-9]+)/?$" => "show.php?project=$1&mode=$2&id=$3",
"^/([0-9]+)/([0-9]+)/?$" => "show.php?id=$1&hash=$2",
"^/~([a-z.]+)/([0-9]+)/([0-9]+)/?$" => "show.php?project=$1&id=$2&hash=$3",
"^/([0-9]+)/([0-9]+)/([a-z|A-Z]+)/?$" =/> "show.php?id=$1&hash=$2&mode=$3",
"^/~([a-z.]+)/([0-9]+)/([0-9]+)/([a-z|A-Z]+)/?$" => "show.php?project=$1&id=$2&hash=$3&mode=$4",
"^/api/([a-z|A-Z]+)/([0-9]+)/([0-9]+)/?$" => "show.php?mode=$1&id=$2&hash=$3",
"^/~([a-z.]+)/api/([a-z|A-Z]+)/([0-9]+)/([0-9]+)/?$" => "show.php?project=$1&mode=$2&id=$3&hash=$4",
"^/api/([a-z|A-Z]+)/([0-9]+)/([0-9]+)/(.*)$" => "show.php?mode=$1&id=$2&hash=$3&password=$4",
"^/~([a-z.]+)/api/([a-z|A-Z]+)/([0-9]+)/([0-9]+)/(.*)$" => "show.php?project=$1&mode=$2&id=$3&hash=$4&password=$5" 
```

我唯一转换的是第一行

```
RewriteRule ^install/.* install.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:34:00.400

所以

```
"^install/?$" => "install.php" 
```

变成

```
RewriteRule ^install/?$ install.php [L] 
```

和

```
"^/doc/([a-z]+)/?$" => "doc.php?cat=$1" 
```

变成

```
RewriteRule ^doc/([a-z]+)/?$ doc.php?cat=$1 [L] 
```

和

```
"^/~([a-z.]+)/doc/([a-z]+)/?$" => "doc.php?project=$1&cat=$2", 
```

变成

```
RewriteRule ^~([a-z.]+)/doc/([a-z]+)/?$ doc.php?project=$1&cat=$2 [L] 
```

和

```
"^/~([a-z.]+)/?$" => "index.php?project=$1", 
```

变成

```
RewriteRule ^~([a-z.]+)/?$ index.php?project=$1 [L] 
```

等等

# mysql - 如何从给定月份的 MYSQL 获取第一周记录

> ID：16166533
> 
> 赞同：-3
> 
> 时间：2013-04-23T10:03:47.697
> 
> 标签：mysql, date

我有一个名为 users 的表，其中包含 id、name 和创建日期。现在我想分别显示在 1 月的第 1 周、第 2 周、第 3 周和第 4 周注册的用户。像这样我想展示整个月。我怎样才能做到这一点？

**更新：**

我试过了

```
SELECT id, date, WEEK(date) weekno FROM user WHERE MONTH(date) in (4,5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:25:14.737

希望能帮助到你

SELECT id, name, created, WEEK(created) week FROM user WHERE created_on BETWEEN start_date AND end_date ORDER BY week

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:55:27.893

最好的学习方法是自己做。您将不得不阅读`GROUP BY`并且[可以使用 MySQL 中的几个函数](https://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html)。您将需要`MONTH()`并且`WEEK()`可能`YEAR()`.

自己尝试一下，如果您仍然有问题，当您向我们展示您尝试过的内容以及问题的确切位置时，我们很乐意为您提供帮助。

**更新：**

你试过这个：

```
SELECT id, date, WEEK(date) weekno FROM user WHERE MONTH(date) in '4,5' 
```

现在，

```
SELECT ... WEEK(`date`) 
```

是`date`您的专栏名称吗？它也是 MySQL 的一个关键字。像我一样将它放在反引号中或重命名该列。

您是否阅读过有关 的（可选）附加参数的信息`WEEK()`？你那里一切都好吗？

```
... FROM user WHERE MONTH(date) in '4,5' 
```

不幸的是，这是错误的语法。你必须这样写：

```
... FROM user WHERE MONTH(`date`) IN (4, 5) 
```

此外，您还必须考虑您可能拥有多年的数据。如果不添加

```
... AND YEAR(`date`) = 2013 
```

或类似的东西，你可能会得到错误的数据。如果您要处理多年，您当然还应该在`SELECT`条款中添加年份。

当您想获得在条款中指定的时间段内注册的用户的简单信息时，`WHERE`到目前为止一切都应该没问题。

# c - 如何从C程序打开一个bmp图像文件

> ID：16166535
> 
> 赞同：0
> 
> 时间：2013-04-23T10:03:55.547
> 
> 标签：c, file-io, bmp

我想要的不是正常`fopen()`功能。我想打开图像，例如，当我双击图像时，它在 imageViewer 中打开的方式。我想这样打开它。

有没有办法通过C代码做到这一点？所以基本上我希望它弹出并查看自己。

我在 Ubuntu 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:09:10.960

这取决于`imageViewer`程序。

如果`imageViewer`程序可以在你的 linux 命令行界面中以这种方式调用

```
$imageViewer myfile.bmp 
```

然后在您的 C 代码中，您可以使用 system 使用`imageViewer`程序打开文件

```
system("imageViewer myfile.bmp"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:15:14.077

问题可能是“如何调用外部程序”（参见例如[Execute external program with specific parameters from windows c/c++ code](https://stackoverflow.com/questions/9110445/execute-external-program-with-specific-parameters-from-windows-c-c-code)）或如何使用特定的库/框架来“读取”bmp 文件，打开 gfx窗口并“映射”该窗口上的图像；在 Ubuntu（使用 GNOME？）上，您可以轻松完成（并且超越简单的 BMP），例如[https://developer.gnome.org/gnome-devel-demos/stable/image-viewer.c.html](https://developer.gnome.org/gnome-devel-demos/stable/image-viewer.c.html)

# c# - 使用 Castle Windsor IoC 容器时添加服务初始化方法

> ID：16166536
> 
> 赞同：4
> 
> 时间：2013-04-23T10:03:58.123
> 
> 标签：c#, .net, castle-windsor, ioc-container

如果我的服务有一些初始化代码，我知道两个选项：

1.  实施[ISupportInitialize](http://msdn.microsoft.com/en-us/library/system.componentmodel.isupportinitialize.aspx)。
    Pro：仅依赖于 .NET 本机接口。
    缺点：我通常只使用 BeginInit()，所以总是有不必要的空 EndInit() 代码

2.  实现 Castle Core 的 IIinitializable。
    优点：只需要实现一种方法。
    缺点：我必须让我的课程依赖于 Castle Core。

有更好的选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T21:57:42.437

就在这里：

```
Component.For<Foo>().OnCreate(foo => foo.WhateverMethodYouWant()); 
```

详细信息[在文档中](http://stw.castleproject.org/Windsor.Registering-components-one-by-one.ashx#OnCreate_7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:58:30.703

另一种选择可能是将相关组件转换为城堡设施，您可以在其中进行更明确的控制，但这可能是矫枉过正。

我只会选择选项 1。冗余的 EndInit 无关紧要。

# javascript - 如何应用特定样式表取决于屏幕分辨率？

> ID：16166537
> 
> 赞同：0
> 
> 时间：2013-04-23T10:04:03.447
> 
> 标签：javascript, jquery, html, css, gwt

我想要 html 中的脚本来识别屏幕分辨率，然后取决于我想为应用程序链接相应的样式表。

例如，如果分辨率在 600x400 之间，那么我想应用 mobile.css，否则应用普通的 web.css。

可能吗？如果是，那么如何实现这一目标？

我没有使用 jquery...我有 GWT 应用程序，我想将此检查添加到 html 文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:11:04.980

现在将此行添加到您的

**头标**

**像这样**

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> // add this line in your head
</head> 
```

**[更多信息](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps)**

用于 CSS 媒体查询

```
@media only screen and (max-width: 600px) {

// here your stylesheet 
    } 
```

**[更多信息点击这里](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:11:07.377

我会为此使用[CSS 媒体查询](https://developer.mozilla.org/en/docs/CSS/Media_queries)。

这意味着您可以在一个样式表中包含所有规则，并共享通用规则。这也意味着当您更改内容时，您只有一个文件要更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:07:06.933

以下是有关如何执行此操作的很好的指南

[http://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:28:02.870

如果你需要为媒体查询截获的 CSS 编写一些 javascript 函数，你可以使用这个很酷的库：[https ://github.com/WickyNilliams/enquire.js](https://github.com/WickyNilliams/enquire.js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T10:14:58.737

有可能是这样的：

```
var style = document.createElement('style');
if ($(window).width() <= 600 && $(window).height() <= 400) {
    style.src = 'mobile.css';
} else {
    style.src = 'normalweb.css';
}
document.body.appendChild(style); 
```

# r - 从 data.frame 中提取子集

> ID：16166540
> 
> 赞同：2
> 
> 时间：2013-04-23T10:04:10.327
> 
> 标签：r, dataframe, subset

我有一个由 3D 点坐标组成的 data.frame。4 个可能的点 A1、A2、A3、A4 有 4 x 3 列。在每一行中，恰好有两个非零点（A1...A4 中的任意两个）。我想知道是否可以在不使用循环的情况下将非零三元组提取到新的 data.frame 中。

原始数据帧：

```
df<-data.frame(
rbind(
c(0,0,0,1,2,3,0,0,0,5,4,1),
c(1,2,2,1,2,3,0,0,0,0,0,0),
c(0,0,0,0,0,0,2,1,1,5,4,1),
c(0,0,0,1,3,1,2,1,1,0,0,0)
))
colnames(df) <- c("x1","y1","z1","x2","y2","z2","x3","y3","z3","x4","y4","z4") 
```

我想要的是：

```
df2<-data.frame(
rbind(
c(1,2,3,5,4,1),
c(1,2,2,1,2,3),
c(2,1,1,5,4,1),
c(1,3,1,1,2,3)
))
colnames(df2) <- c("x5","y5","z5","x6","y6","z6") 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:09:30.940

一种简单的方法是只使用`apply`，但从技术上讲，它*仍然*使用循环。

```
t(apply(df, 1, function(x) x[x > 0]))
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    2    3    5    4    1
[2,]    1    2    2    1    2    3
[3,]    2    1    1    5    4    1
[4,]    1    3    1    2    1    1 
```

您需要做*一些*（微小的）工作才能将其转换为 a`data.frame`并添加列名。

* * *

没有循环，你可以使用这样的东西：

```
data.frame(matrix(df[df != 0], nrow = nrow(df)))
#   X1 X2 X3 X4 X5 X6
# 1  1  1  3  2  1  4
# 2  2  1  3  2  1  4
# 3  2  2  3  1  5  1
# 4  1  2  1  1  5  1 
```

# android - 从手势监听器 onSingleTapConfirmed 调度触摸事件并保持选择器效果

> ID：16166541
> 
> 赞同：2
> 
> 时间：2013-04-23T10:04:15.810
> 
> 标签：android, android-layout, android-listview, android-event

我有一个包含多个按钮的项目的列表视图。一项的布局如下所示：

![黑框代表一个列表视图项](https://i.stack.imgur.com/7j4TI.png)

我有一个覆盖的透明视图，覆盖了整个列表项。此视图监听两个手势：`onDoubleTap`和`onSingleTapConfimred`。

要触发底层按钮上的点击侦听器，我可以从覆盖的触摸侦听器中分派触摸事件，但这**不会**显示按钮上的选择器和状态（例如，按下时更改了背景颜色）。我也只想要在覆盖视图触发时触发点击事件`onSingleTapConfimred`

```
...
final DtGestureDetector detector = new DtGestureDetector(position);
final GestureDetector gd = new GestureDetector(convertView.getContext(), detector);
postViewHolder.viewOverlay.setOnTouchListener(new OnTouchListener() {           
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        //i want to trigger this only onSingleTapConfirmed and set the view selector on touch
        //postViewHolder.txtMessage.onTouchEvent(event); 
        //postViewHolder.layPhoto.onTouchEvent(event);
        gd.onTouchEvent(event);                     
        return true;
    }
});
...
private class DtGestureDetector extends GestureDetector.SimpleOnGestureListener {

    private int position;   

    public DtGestureDetector(int position) {
        super();
        this.position = position;
    }

    public boolean onDoubleTap(MotionEvent e) {
        Log.d(tag, "DoubleTap"+position);
        return true;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        Log.d(tag, "SingleTap"+position);
            return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T09:30:42.337

我可以通过以编程方式设置状态来解决这个问题

```
int[] state = new int[] {android.R.attr.state_window_focused, android.R.attr.state_focused};
drawable.setState(state); 
```

# testing - 是否可以将值存储在另一个操作 localdatasheet 中？

> ID：16166544
> 
> 赞同：1
> 
> 时间：2013-04-23T10:04:25.063
> 
> 标签：testing, automation, automated-tests, qtp, ui-automation

以下是场景，我有 2 个动作

```
 1\. Action_1
    a. Action_2 
```

Action_1 将运行时间数据存储在本地工作表中，我想将 Action_2 运行时间数据存储在 Action_1 本地工作表中。
可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:30:30.807

您可以将数据存储在操作 2 的本地工作表中，然后从操作 1 调用它，这看起来本质上是一样的。

您需要输入一个`RunAction"Action1"[Action1], StartRowNumber-EndRowNumber`

将代码逻辑从测试步骤中分离出来也是一个好主意。您可以在一个操作中管理您的测试步骤，该操作调用其他操作并引用它们的代码和数据表。希望我能够提供一些见解！:)

# c++ - 部分类模板特化

> ID：16166547
> 
> 赞同：2
> 
> 时间：2013-04-23T10:04:28.870
> 
> 标签：c++, templates, template-specialization, c++03

我想添加一个成员函数，以防我的类的最后一个模板参数被明确设置为某个值。我不明白如何重用以前定义的代码。

我想要编译的简化示例：

```
template <int A, int B, int C>
struct S
{
  void fun() {}
};

template <int A, int B>
struct S<A,B,0>
{
  void fun1() {}
};

template <int A>
struct S<A,0,0>
{
  void fun2() {}
};

int main()
{
  S<0,0,0> s;
  s.fun();
  s.fun1();
  s.fun2();
  return 0;
} 
```

我需要使用 C++03 编译器找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:07:00.380

实际上，您的特化是非特化，因为它不特化任何主模板的参数：

```
template<int A, int B>
struct S<A,B> // ...
//       ^^^
//       Does not really specialize the primary template,
//       no specialized pattern is introduced here 
```

您可以尝试这样重写它：

```
template<int A> // <== Only the first template parameter of the primary
                //     template is unconstrained in the pattern we want to
                //     express (the second template argument shall be 1)
struct S<A,1> : public S<A,0>
//       ^^^               ^
// Specializes!            Something meaningful should go here,
//                         but that actually depends on the real
//                         class templates you are using and their
//                         semantics
{
      void fun1() {}
}; 
```

作为替代方案，如果您的目标只是有条件地添加一个成员函数，则可以使用如下所示的 SFINAE 约束而不是专门化：

```
#include <type_traits> // <== Required for std::enable_if<>

template <class T = void>
//                  ^^^^
//                  The function's return type here
typename std::enable_if<B == 1, T>::type
//                      ^^^^^^
//                      Your condition for the function's existence
fun1()
{
    // ...
} 
```

这是一个演示此技术的[**实时示例。**](http://ideone.com/ePMbTP)

# codeigniter - 来自电话的 codeigniter 会话 - 每次页面加载的新 IP

> ID：16166551
> 
> 赞同：1
> 
> 时间：2013-04-23T10:04:41.983
> 
> 标签：codeigniter, session

我遇到了以下问题。我无法使用电话登录我的系统。当我使用电话时，有 4 个 IP 地址的结尾范围，因此 system/libraries/Session.php 第 192 行 IP 匹配对整个功能 sess_read() 返回 FALSE，因此我无法从电话登录。

奇怪的是，大约 2 周前，当我向朋友展示我的应用程序时，我能够登录。在我的电脑上一切正常。传入 IP 必须与 DB IP 相同，这只是该条件的一个问题。

你们有人遇到过这种情况吗？我使用最新的 codeigniter 版本 2.1.3。我不想将任何内容硬编码到 Session.php，因为它是一个核心库。

谢谢， 雅库布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:38:23.013

放`$config['sess_match_ip'] = FALSE;`

如果手机正在更改 IP，那么它就超出了 CI 的控制范围。

如果您绝对必须启用 sess_match_ip，您也可以在配置文件中添加一些逻辑，以根据具体情况将 sess_match_ip 设置为 true/false。

```
$config['sess_match_ip'] = has_changing_ips();

function has_changing_ips()
{
    /**
     * Code to return true if normal or
     * return false if phone or other device with changing IPs
     */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:02:19.073

好的，我已经为 app/config/config.php 编写了这个函数：

```
$config['sess_match_ip'] = match_ip(3);

// $range sets -+ of the last numbers
function match_ip ($range){

   session_start();
   $IP = $_SERVER['REMOTE_ADDR'];
   $IP_parts = explode(".", $IP);

   if (isset($_SESSION['mi'])){

     //If the last part is the same, match IP
     if ($_SESSION['mi'] == $IP_parts['3']){

        return TRUE; // SAME IP doesn't cause the problem, therefore TRUE
     }
     // If the last ending($_S[mi]) is +- 3, IP is dynamic, therefore FALSE
     if (($IP_parts['3']-$range <= $_SESSION['mi']) && ($_SESSION['mi'] <= $IP_parts['3']+$range)) {

        return FALSE;
    }
    else{

        return TRUE;
    }
   }
   // If session not set, set it.
   else{

    $_SESSION['mi'] = $IP_parts['3'];

   }

} 
```

我知道 ip6v 的问题，但出于我的目的，这应该可行。关于安全性 - 归根结底，我将某些内容存储在未加密的会话中。但是 IP 地址真的很容易伪造，因此即使 ['sess_match_ip'] = TRUE 也没有关系，如果有人试图破解你的会话。但我喜欢打开这个功能。

如果您想使用此代码，请对 $range 的大小进行更多研究。我的手机范围是+-2。但实际范围可能有所不同。如果您发现，请在此处发布。

# avconv - avconv 帧选项 (avconv -r 1)

> ID：16166555
> 
> 赞同：2
> 
> 时间：2013-04-23T10:04:54.137
> 
> 标签：avconv

我是这个工具的新手`avconv`

我想从视频中每秒提取 1 帧，我正在使用

```
avconv -i sample.avi -r 1 -s 200x200 -f image2 frames/foo-%03d.png 
```

是`sample.avi`长度`30`秒，但转换给出了`920`帧的输出。

该怎么办？我只想要`30`框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T11:47:34.103

您可能需要指定 -vsync 选项。

我曾经使用以下命令从视频文件中获取每秒一帧。

```
avconv -i video_file -f image2 -vsync 1 -r 1 %03d.png 
```

# c++ - 关于 C++ 中向量的地址

> ID：16166560
> 
> 赞同：1
> 
> 时间：2013-04-23T10:05:14.167
> 
> 标签：c++, vector, stl, memory-address

在 C++ 中

就像我有

```
 vector<vector<string> > input;
         for(int i=0;i<=1000;i++){

          vector<string> temp;
          temp.pushback(everytime change the input value);
                      .
                      .
                      .just continues push some string in temp
                      .
                      .
           temp.pushback(everytime change the input value);
          input.pushback(temp);
         } 
```

我的问题是，如果我们在 temp 中放置一些字符串大约 1000 次，这些 temp 会共享地址吗？就像当 i=500 时，新的临时地址将使用我在 i=1 时创建的第一个临时地址的地址？或者尽管**向量（字符串）**使用与 temp 相同的名称，但地址总是不同的。

因为我想做一个二维动态数组，所以我想

```
 vector<vector<string> > input; 
```

，我需要的是每个字符串类型的向量 temp 应该安全地保留输入。除了黄油还有什么想法吗

```
 vector<vector<string> > input; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:19:08.423

您的代码正在泄漏；当你写

```
vector<string> temp = *new vector<string>; 
```

您`vector<string>`在堆上分配一个空，然后将其**复制**到`temp`. 每次你做这个循环时，你都会泄漏一个向量（一个空的，所以可能只有几个字节）。

根本不需要这种分配，您可以改写：

```
vector<string> temp; 
```

此外，您正在创建一个临时向量，填充它并将其推入另一个向量。更好的方法可能是：

```
 input.resize(1 + input.size());       // make room for a new vector
  vector<string>& temp = input.back();  // call it temp in the following
  ...
  temp.push_back(...); 
```

这样，您就可以在内部分配新的向量`input`并直接向其中添加元素……`temp`就像新添加的向量的临时“昵称”一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:08:22.670

在这种情况下，每次将其推回向量中时，您都会获得字符串的副本。如果您不想复制变量 - 例如，您可以使用指针（这不是 std::string 的常见做法，但您可以使用一些 std::ref 魔法，但同样，这是另一个讨论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:08:37.233

它不会那样工作。解决方案可能要容易得多，只需使用：

```
vector<string> temp; // no new ... 
```

由于您可能希望将该向量的*副本*存储在整个数据持有者`input`（类型为`vector<vector<string>>`.

它可能不是最有效的解决方案，但它应该可以可靠地工作。每个实例将独立于其他实例。

但是，您应该围绕 a 移动线条，但要确保您只有一个整体`input`：

```
 vector< vector< string > > input; // move this line *before* the loop!
 for(int i=0;i<=1000;i++){
      vector<string> temp;
      temp.pushback(everytime change the input value);
                  .
                  .
                  .just continues push some string in temp
                  .
                  .
      temp.pushback(everytime change the input value);
      input.pushback(temp);
 } 
```

否则，您将`input`在每个循环中创建一个新条目并丢弃以前的条目。也许这引起了混乱，因为您`input`只包含一个有效元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:30:55.627

当您创建一个新向量 temp= *new vector; & 然后你尝试在这个向量中推回。& 为了改进，请阅读@6502 的答案。

正如您所想的那样，如果您多次输入某个字符串，那么它将共享相同的地址。

答案将是“否”。因为随着向量大小的增加或新成员即将被推回并且向量的大小无法添加新数据，所以它会在内部调整它的大小并且这个过程完成为 1-> 为新输入腾出空间（新大小取决于内部算法，该算法决定您可以假设为当前大小的两倍的新大小）。然后将整个向量条目复制到新区域中，然后将新数据推回。

所以新区域的分配会引起临时地址的变化。

有关更多信息，请参阅[c++ std::vector 如何工作？](https://stackoverflow.com/questions/3167272/how-does-c-stdvector-work)

# javascript - jQuery - 仅更改单击的元素，而不是所有具有相同的类

> ID：16166561
> 
> 赞同：3
> 
> 时间：2013-04-23T10:05:14.420
> 
> 标签：javascript, jquery

我想做的是改变一个对象的属性，但只针对那个。因此，`$('.up img').attr("src","img/up.png")`对于已单击的元素，并非所有具有`.up img`.

**jQuery：**

```
$('.up img').click( function(){
        var postDataUp = $(this).attr('mod');
        $.post('/votePost.php', {varUp: postDataUp}, function(o){
            console.log(o);
            if(o == 1){
                $('.up img').attr("src","img/up.png");
            }else if(o == 2){
                $('.up img').attr("src","img/up-g.png");
                $('.down img').attr("src","img/dw.png");
            }else if(o == 3){
                $('.up img').attr("src","img/up.png");
            }
        }, 'json');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T10:06:34.867

`$(this)`改为仅针对单击的该类的特定元素，而不是使用类选择器。

```
$('.up img').click( function(){
        var postDataUp = $(this).attr('mod');
        $.post('/votePost.php', {varUp: postDataUp}, function(o){
            console.log(o);
            if(o == 1){
                $(this).attr("src","img/up.png");
            }else if(o == 2){
                $(this).attr("src","img/up-g.png");
                $('.down img').attr("src","img/dw.png");
            }else if(o == 3){
                $(this).attr("src","img/up.png");
            }
        }, 'json');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T10:10:50.937

您可以更改代码以针对特定元素。

```
$('.up img').click( function(){
    var postDataUp = $(this).attr('mod');

    // get the specific element that you have clicked.
    // i use the $ before the name to easily identify jquery elements.
    var $elm = $(this);

    $.post('/votePost.php', {varUp: postDataUp}, function(o){
        console.log(o);
        if(o == 1){
            // targeting the specific element
            $elm.attr("src","img/up.png");
        }else if(o == 2){
            // targeting the specific element
            $elm.attr("src","img/up-g.png");
            $('.down img').attr("src","img/dw.png"); // not sure if you want to target individual element here?
        }else if(o == 3){
            // targeting the specific element
            $elm.attr("src","img/up.png");
        }
    }, 'json');
}); 
```

如果您要定位`$('.down img')`特定于被单击元素的元素，那么您可以使用该`$elm`元素然后遍历 DOM 节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:13:26.750

```
$('.up img').click( function(){
    var $this=$(this);
    var postDataUp = $this.attr('mod');
    $.post('/votePost.php', {varUp: postDataUp}, function(o){
        console.log(o);
        if(o == 1){
           $this.attr("src","img/up.png");
        }else if(o == 2){
            $this.attr("src","img/up-g.png");
            $this.attr("src","img/dw.png");
        }else if(o == 3){
            $this.attr("src","img/up.png");
        }
    }, 'json');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:07:09.880

尝试这个 -

```
$('.up img').click( function(){
        var postDataUp = $(this).attr('mod');
        var clicked = $(this);
        $.post('/votePost.php', {varUp: postDataUp}, function(o){
            console.log(o);
            if(o == 1){
                $(clicked).attr("src","img/up.png");
            }else if(o == 2){
                $(clicked).attr("src","img/up-g.png");
                $('.down img').attr("src","img/dw.png");
            }else if(o == 3){
                $(clicked).attr("src","img/up.png");
            }
        }, 'json');
}); 
```

# c++ - 显示时间格式

> ID：16166567
> 
> 赞同：-3
> 
> 时间：2013-04-23T10:05:24.720
> 
> 标签：c++, windows, visual-studio-2010

我有以下内容：

```
#define DATE_AND_TIME_FORMAT "%Y-%m-%d %H:%M:%S"

#define DATE_AND_TIME_SIZE 25

char buffer[DATE_AND_TIME_SIZE];

static char *get_date_and_time (char *buffer) 
{
     time_t t = time (0);
    strftime (buffer, DATE_AND_TIME_SIZE, DATE_AND_TIME_FORMAT, localtime (&t));
    return buffer;
} 
```

你们中的任何人都可以告诉我如何获得包含毫秒“fff”的时间格式（根据 MSDN Microsoft）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:03:40.547

您的 time_t 值没有毫秒组件，因此您可以安全地附加`".000"`到您的时间字符串。

# php - Jquery Ajax / PHP - 多次调用函数

> ID：16166568
> 
> 赞同：2
> 
> 时间：2013-04-23T10:05:30.457
> 
> 标签：php, jquery, function

我有以下代码：

```
<div id="uniquefriends">
                    <?php               
                        $friends =  $helper->getuniqueUser($uid, $TOKEN);

                        foreach($friends as $friend) {

                        echo $friend; // Facebook UID

                        }
                        ?>  
            </div>
            <a href="#" id="other"><img src="bilder/arrow_otherfriends.png" style="height: 30px;" alt="load other friends" /></a>
            <script>
            $(document).ready( function() {
                $('#other').click(function() {
                  $.ajax({
                      type: 'POST',
                      url: 'otherfriends/',
                      data: { uid: "<?php echo $uid; ?>", token: "<?php echo $TOKEN; ?>"  },
                      cache: false,
                      success: function(result) {
                        $('#uniquefriends').html(result);
                      },
                  });
                });
            });
            </script> 
```

描述：

```
$friends =  $helper->getuniqueUser($uid, $TOKEN); 
```

正在获取用户 /me/ 的所有朋友并将其与数据库进行比较，并且 array_diff() 向我显示了朋友与已经使用该应用程序的用户的差异。
你可以想象，调用这个函数会产生巨大的重载，所以最好不要多次调用它。

这个函数每次调用只给我 4 个 uid (array_slice($array, 0, 4)) (可以修改)

问题：
当用户单击“ `<a href="#" id="other"><img src="bilder/arrow_otherfriends.png" style="height: 30px;" alt="load other friends" /></a>`”时，将生成下一组用户并作为结果给出我（参见 ajax 调用）。

ajax 调用如下所示：

```
<?php
if(isset($_POST['uid']) && !empty($_POST['uid'])) {
        $uid = $_POST['uid'];
        $token = $_POST['token'];

        $helper = new helper();     
        $friends =  $helper->getuniqueUser($uid, $token);   

        foreach($friends as $friend) {
            echo $friend;
        }
}
?> 
```

所以每次`"$friends = $helper->getuniqueUser($uid, $TOKEN);"`用户点击链接时我都会打电话。性能下降，等待时间很长。

我可以以某种方式改进此代码，以不经常调用此函数吗？有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:16:23.580

您可以在 AJAX 调用的 PHP 脚本中实现一个小缓存系统。

每次您在`getUniqueUser`某处（会话、文件、数据库、它们的混合）调用存储时，结果都会与输入值配对。

如果输入值在缓存中是已知的，只需从中获取结果并立即返回，否则，启动函数并将丢失的结果存储在缓存中。

当然，您可能需要一个复杂的缓存，跟踪请求的时间戳以避免返回“陈旧”的朋友（也许您最近添加了新朋友并且您需要更新缓存）。这只是一个起点，但如果您不想一直调用同一个函数，则需要某种形式的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:18:36.493

如果

```
$friends = $helper->getuniqueUser($uid, $token); 
```

确实是获取所有相关用户（而不是遍历所有朋友，为每个相关朋友调用一个函数，这当然没有意义），那么重载不应该像你说的那么多。

但是，如果您确实发现服务器需要很长时间才能回复您的响应，那么有几个选择。

1.  优化你的数据库，它看起来怎么样？是否正确使用索引而不使用循环依赖？
2.  如果您真的每次只需要 4 个结果，请不要从数据库中选择 *，请使用 LIMIT。
3.  考虑将信息存储在文本文件中，您可以轻松地每次用户登录一次从数据库中获取数据，使用信息创建一个数组，然后当您必须显示更多用户时，您可以解析文件中的数组，而不是查询 -再次 ing 数据库。
4.  充分利用缓存。

不那么可能相关：请不要将 javascript 和 php 混合在一起，这只是一个坏习惯。尽可能避免将过多的 php 和 html 混合在一起。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T10:23:17.953

我相信您确实只需要一次获取列表，因此在图像标签中添加一个类。仅触发一次请求。每次点击都获取结果没有意义，因为您只发送相同的参数。

```
$('#other').click(function() {
if (!$(this).hasClass('clicked')) {
              $.ajax({
                  type: 'POST',
                  url: 'otherfriends/',
                  data: { uid: "<?php echo $uid; ?>", token: "<?php echo $TOKEN; ?>"  },
                  cache: false,
                  success: function(result) {
                    $('#uniquefriends').html(result);
                    $('#other').addClass('clicked');
                  }
              });
            } }); 
```

# sql - SQL插入多个存储过程，无需多次插入

> ID：16166570
> 
> 赞同：-2
> 
> 时间：2013-04-23T10:05:41.590
> 
> 标签：sql, tsql, stored-procedures, sql-server-2008-r2, sql-insert

我有一个存储过程“inserttable”，它从数据库中选择信息，其中“@TableName”根据公司名称（Company1、Company2）而变化，“@CompanyNo”是身份编号（1,2）。

我的插入：

```
TRUNCATE TABLE Table1
INSERT INTO Table1
(Company, Store, POS, StoreNo)
exec inserttable(Company1,1)
exec inserttable(Company2,2) 
```

我的问题，是否可以插入多个存储过程 exec？

我的示例仅插入第一个 exec，然后显示第二个。

那是无需添加另一个插入！

编辑：

我的存储过程：

```
CREATE PROCEDURE [dbo].[inserttable] 
     @TableName varchar(300),
     @StoreNo varchar(100)
AS
BEGIN
declare @q varchar(1000)
set @q = 'SELECT Company, Store, POS,'+@StoreNo+'
      FROM '+@TableName
exec (@q)
END
GO 
```

编辑2：

我的存储过程：

```
CREATE PROCEDURE [dbo].[inserttable] 
     @TableName varchar(300),
     @StoreNo varchar(100)
AS
BEGIN
declare @q varchar(1000)
set @q = 'INSERT INTO TABLE Table1 (SELECT Company, Store, POS,'+@StoreNo+'
      FROM '+@TableName+')'
exec (@q)
END
GO 
```

只是运行 exec 应该做 trix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:36:17.867

我不知道您可以使用存储的过程来做到这一点，但是：

a）如果插入始终相同，您可以将其放入存储的过程中，因此它采用形式

```
INSERT INTO Table1
(Company, Store, POS)
[current select statement from proc] 
```

那么就

```
exec inserttable(Company1,1)
exec inserttable(Company2,2) 
```

b）用返回表并使用联合的函数替换proc

```
create function companydata( @name varchar(50), @number integer) 
returns table
return select @name company, @number store, 1 pos 
```

显然用您现有的 sp 所做的任何替换选择，然后您可以使用联合运行

```
INSERT INTO Table1(Company, Store, POS)
select * from companydata('co no 1', 1)
union all 
select * from companydata('co no 2',2) 
```

# perforce - Perforce：将未提交的更改移动到不同的流

> ID：16166571
> 
> 赞同：8
> 
> 时间：2013-04-23T10:05:47.677
> 
> 标签：perforce, perforce-stream

Perforce 中是否有一种好方法可以在提交之前将未提交的更改移动到不同的流（相当于`git stash`, `git checkout otherbranch`, `git stash pop`）？

我目前已在本地（非排他地）签出文件并进行了编辑。我尝试搁置它们，然后尝试将它们取消搁置到目标流中，但我得到“文件不在客户端视图中”。当我查看更改列表（搁置与否）时，文件都具有包含原始流的路径。

我的目标流是我刚刚创建的，是原始流的父级。我正在使用P4V。我安装的 Perforce Visual Components 版本是 123.57.9578，当我从命令行运行 p4 时，它显示“Server 2012.2/551823”。如有必要，我可以添加更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T21:24:19.570

您可以使用[p4 unshelve](http://www.perforce.com/perforce/doc.current/manuals/cmdref/unshelve.html)命令使用 -S 选项将更改列表中搁置的文件重新映射到另一个流。前任：

```
p4 unshelve -s <changlist#-with-shelved-files> -S //depot/streamname 
```

不确定这是否仅在某个版本或更高版本中可用。但是，我们无法通过 P4V 找到方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-28T18:23:02.163

这里的其他答案是正确的，但它们并没有警告您不能只搁置任何流并取消搁置任何不相关的流。特别是，原始发布者询问了错误消息“文件不在客户端视图中”，这是当您没有选择正确的映射时 P4V 显示的错误消息。

这是找到正确映射的技巧：您的未搁置流必须与搁置的流具有直接的父/子关系，并且您必须在“使用流映射未搁置的文件...”部分中选择描述该关系的流规范对话框。这意味着从原始搁置流到目标流可能需要多个跃点。

这是一个具体的例子：假设您有`Dev-1`要移动到的文件搁置到`Dev-2`. 这两个 Dev 流都是`Main`. 您不能将`Dev-1`的文件直接`Dev-2`取消搁置到 中，首先您必须取消搁置并暂时重新搁置到`Main`中，因为 Dev 流规范都描述了它们之间的关系，`Main`而不是彼此。

因此，您使用“使用流映射未搁置`Dev-1`的文件”将文件取消搁置，因为该规范描述了正在遍历的关系。然后，将文件搁置到.，然后将您的工作区切换到. 现在，您可以使用“使用流映射未搁置的文件”来取消搁置文件的版本，因为该规范描述了从to的直接关系。`Main``Dev-1``Main``Dev-2``Main``Dev-2``Main``Dev-2`

通过多跳，您可以访问网络中任何其他连接的流。这不像`git stash`and那样简单`git stash pop`，但请记住，Git 假设文件名不会在 git 分支之间更改，而 Perforce 允许每个跃点任意更改文件和文件夹的映射。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-23T10:59:58.213

如果您出于某种原因使用 P4V 比使用命令行更舒服，那么 az2tonez 提供的解决方案可以使用 GUI 完成，至少在 P4V 2014.2 中是这样。

1.  搁置您的变更集，并确保您没有在工作区中检出其他文件。
2.  在 'Streams' 选项卡中，将工作区图标从当前流拖到要将更改移动到的流**中**，并获取最新更改。
3.  取消搁置“待处理”选项卡中的文件。在选项下选择“映射未搁置的文件”并选择**要从**中移动变更集的流，然后按“取消搁置”。
4.  使用源解析文件。
5.  提交您的更改，瞧！您的更改现在应该在另一个流中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T13:52:52.397

我相信搁置/取消搁置技术需要 2013.1 服务器，而不是 2012.2 服务器。您应该与 Perforce 技术支持确认这一点。

# ios - 可调整大小图像的便捷方法

> ID：16166574
> 
> 赞同：1
> 
> 时间：2013-04-23T10:05:56.843
> 
> 标签：ios, objective-c, uiimage, resizable

我的应用中有大量可调整大小的图像，并且我在所有地方都使用它们。

它们中的大多数具有相同的边缘插图，但有些不同。

创建它们也需要大量代码...

```
UIImage *buttonBGImage = [[UIImage imageNamed:@"buttonBG"] resizableImageWithCapInsets:UIEdgeInsetsMake(4, 4, 5, 4) resizingMode:UIImageResizingModeStretch]; 
```

这只是一行代码，但我必须去寻找所有的边缘插图等......

我正在尝试为它创建一个方便的方法。就像是...

```
UIImage *buttonBGImage = [blah resizableButtonBG]; 
```

这些最好的地方在哪里？我可以创建一个名为“ImageManager”的单例。这样每个可调整大小的图像只会被实例化一次，然后将被保存在内存中。这是矫枉过正吗？

我可以添加一个类别来`UIImage`调用...

```
+(UIImage *)resizableButtonBG; 
```

任何人都可以提供任何建议吗？我的单身想法是个好主意吗？使用 Singleton 有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:11:26.893

类别方法绝对是一个很好的解决方案。许多人使用它来创建在应用程序中的多个位置使用的字体和颜色。

没有必要使用单例。没有关联的实例数据，因此您不妨坚持使用返回适当图像的简单类别方法。

# java - 在 android.media.action.IMAGE_CAPTURE 中自动拍摄

> ID：16166582
> 
> 赞同：1
> 
> 时间：2013-04-23T10:06:27.587
> 
> 标签：java, android, android-intent, camera

我有

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE"); 
```

10秒后可以自动拍照吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:18:55.280

你很可能需要使用你自己的`activity`来自动完成。因为`android.media.action.IMAGE_CAPTURE`您启动的活动（）不是您的活动，它不能自动完成或修改代码以完成工作。请参考[这篇](http://marakana.com/forums/android/examples/39.html)好帖子，让相机根据您的要求工作。

# c# - 如何在动态生成的 C# 代码中初始化各种类型变量？

> ID：16166588
> 
> 赞同：7
> 
> 时间：2013-04-23T10:06:37.117
> 
> 标签：c#, .net, t4, dynamic-code

我有 T4 模板，我想在其中生成一个 .cs 文件。

我有一个数组`System.Data.DataColumn`，我想在生成的代码文件中用作私有变量。

我`ColumnName`用作变量名、`Value`变量值和`DataType`变量数据类型。

我正在考虑在这种情况下如何初始化定义的变量：

```
ColumnName = "col1"
ColumnValue = "text"
DatType = System.String 
```

我想看看输出：`private System.String col1 = "text";`

T4模板中的变量定义：

```
private <#= DataType.ToString() #> <#= ColumnName #> = "<=# ColumnValue #>" 
```

我正在考虑编写辅助方法，它将返回常见数据类型的变量初始化字符串。就像是：

```
public string ValueInitializerString
        {
            get
            {

                string valueString;
                if (this.DataType == typeof(int))
                {
                    valueString = this.Value.ToString();
                }
                else if (this.DataType == typeof(string))
                {
                    valueString = string.Format("\"{0}\"", this.Value);
                }
                else if (this.DataType == typeof(DateTime))
                {
                    DateTime dateTime = (DateTime)this.Value;

                    valueString = string.Format("new DateTime({0}, {1}, {2}, {3}, {4}, {5}, {6})",
                                                              dateTime.Year, dateTime.Month, dateTime.Day, dateTime.Hour, dateTime.Minute, dateTime.Second, dateTime.Millisecond);
                }
                else
                {
                    throw new Exception(string.Format("Data type {0} not supported. ", this.DataType));
                }
                return valueString;
            }
        } 
```

如果有人做了类似的事情，你能建议这是一个好主意还是可以以更方便的方式完成？也许我应该读点什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-20T01:15:40.687

这应该可以正常工作，尽管我会将其设为通用类。就像是

```
internal class DataType<T>
{
      public string Name {get;set}
      public T Value {get;set;}
      public Type Type
      {
          get { return typeof(T); }
      }

      public string VariableDefinition()
      {
          /* Construct string */
      }
} 
```

这将更加灵活和可重用。示例用法：

```
<#
var dataType = new DataType<String>()
{
    Name = "col1",
    Value = "text"
};
#>

private <#= dataType.VariableDefinition() #> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-23T18:07:14.230

Hope this works.

Use **ExpandoObject** to solve your problem. Definition of ExpandoObject as per MSDN :

It represents an object whose members can be dynamically added and removed at run time.

To set datatype and value at runtime , use **Convert.ChangeType** method. This creates an object of same type and value as you provide.

Reference for ExpandoObject: [https://blogs.msdn.microsoft.com/csharpfaq/2009/09/30/dynamic-in-c-4-0-introducing-the-expandoobject/](https://blogs.msdn.microsoft.com/csharpfaq/2009/09/30/dynamic-in-c-4-0-introducing-the-expandoobject/)

Reference for Convert.ChangeType : [https://msdn.microsoft.com/en-us/library/system.convert.changetype(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.convert.changetype(v=vs.110).aspx)

So create properties dynamically using ExpandoObject and create datatype dynamically using Convert.ChangeType.

Code :

```
class Program
{
        static void Main(string[] args)
        {
        // I have used hardcoded values representing database values
        var dataTable = new DataTable();
        dataTable.Columns.Add(new DataColumn("Column1"));
        dataTable.Columns.Add(new DataColumn("Column2"));
        var row = dataTable.NewRow();
        row[0] = 1;
        row[1] = "Test Value";
        dataTable.Rows.Add(row);

        // This list below contains properties - variables , with same datatype and value
        dynamic parentList = new List<dynamic>();

        var rowOne = dataTable.Rows[0]; 
        for (int i = 0; i < dataTable.Columns.Count; i++)
        {
            dynamic child= new ExpandoObject();

            child.Property = Convert.ChangeType(row[i], row[i].GetType());
            parentList.Add(child); 
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-25T21:23:40.030

定义字典：

```
var _valueConverters = new Dictionary<Type, Func<object, string>>()
{
    { typeof(int), x => x.ToString() },
    { typeof(string), x => "\"" + x + "\"" },
    { typeof(DateTime), x => String.Format("new DateTime({0})", ((DateTime)x).Ticks) }
}; 
```

然后写一个这样的方法：

```
void WriteVariable<T>(string name, string value)
{
    Type typeT = typeof(T);
    if (! _valueConverters.ContainsKey(typeT))
        throw new Exception(string.Format("Data type {0} not supported. ", typeT.Name));
    Write(String.Format("{0} {1} = {2}", typeT.Name, name, _valueConverters[typeT](value)));
} 
```

并这样称呼它：

```
private <#= WriteVariable<string>("col1", "text") #>; 
```

甚至（不是真正可重用的）：

```
void WriteVariable<T>(string name, string value)
{
    Type typeT = typeof(T);
    if (! _valueConverters.ContainsKey(typeT))
        throw new Exception(string.Format("Data type {0} not supported. ", typeT.Name));
    Write(String.Format("private {0} {1} = {2};", typeT.Name, name, _valueConverters[typeT](value)));
} 
```

和：

```
<#= WriteVariable<string>("col1", "text") #> 
```

# python - 在python中解析和提取文件中的数据

> ID：16166589
> 
> 赞同：0
> 
> 时间：2013-04-23T10:06:42.717
> 
> 标签：python, parsing, csv

我已经对这个主题进行了很多搜索，并且到目前为止已经学到了很多。我还是 python 新手，我知道有一种简单的方法可以使用 csv 模块解析数据。所以，我有如下数据：

```
Date        MaxT  MinT  Pcpn  Snow  Snwg  
01/01/1948    34    13  0.00   0.0     T  
01/02/1948    46    29  0.01   0.0     T  
01/03/1948    38    16     T     T     T  
01/04/1948    38    15  0.00   0.0     T  
01/05/1948    44    15  0.00   0.0     T  
01/06/1948    42    23  0.00   0.0     T 
```

这是一年中每一天的每日天气数据，直到记录结束。大多数时候，记录的结尾是现在。我可以解析它并从中提取数据，但我的主要问题和问题原因是如何根据特定日期提取和保存数据？

例如，如果我想要记录中所有年份中 4 月 25 日发生的最高温度，以及它发生的年份，我如何准确地隔离特定日期并仅在该日期使用 max() 或 min()，不是一年中的所有日子？我希望我的程序搜索一年中的每个日期，并找到每个日期的最大值和最小值以及它发生的年份，并将它们保存以备后用。

最终，我想获得每个位置的最高和最低 maxT 和 minT（最高 maxT、最低 minT、最高 minT、最低 minT）、每个值出现的年份，并将特定日期组合在一起。这样我就有一个包含一年中所有 365 天的文件，其中包含位置和每个发生年份的 4 个极值。我可以处理将位置放在一起并制作新文件，但现在，我需要弄清楚如何获得一年中每一天的极端情况。

当一切都说完了，我的输出标题应该是这样的，并且一年中的每一天都有一个文件：

```
Location HighMax year LowMax year HighMin year LowMin year 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:38:50.587

试试[熊猫](http://pandas.pydata.org/)：

测试.csv：

```
Date,MaxT,MinT,Pcpn,Snow,Snwg
01/01/1948,34,13,0.00,0.0,T
01/02/1948,46,29,0.01,0.0,T
01/03/1948,38,16,T,T,T
01/04/1948,38,15,0.00,0.0,T
01/05/1948,44,15,0.00,0.0,T
01/06/1948,42,23,0.00,0.0,T 
```

读取csv，设置`Date`为索引

```
In [1]: import pandas as pd
In [4]: df = pd.read_csv('test.csv').set_index('Date')

In [5]: df
Out[5]: 
            MaxT  MinT  Pcpn Snow Snwg
Date                                  
01/01/1948    34    13  0.00  0.0    T   
01/02/1948    46    29  0.01  0.0    T   
01/03/1948    38    16     T    T    T   
01/04/1948    38    15  0.00  0.0    T   
01/05/1948    44    15  0.00  0.0    T   
01/06/1948    42    23  0.00  0.0    T 
```

`Pandas`提供一个很好的结构`DataFrame`来操作您的数据。例如，要获得最大值`MaxT`：

```
In [9]: index = df['MaxT'].idxmax() 
In [11]: index, df['MaxT'][index]
Out[11]: ('01/02/1948', 46) 
```

你应该花一些时间来学习`pandas`。如果你的工作在这类数据上非常可靠，那么值得学习。

# java - 如何在java中提取.Z文件？

> ID：16166592
> 
> 赞同：4
> 
> 时间：2013-04-23T10:06:47.010
> 
> 标签：java

我可以在 apache.commons.compress 中提取 zip、tar、tar.gz 和 tar.bz。但我无法在 apache.commons.compress 或 java 中提取 tar.Z。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:27:30.180

The `tar.Z` extension means that the file is a compressed tarball, using the `compress` utility, not `gzip`.

The only library that seems to support it is: [http://www.chilkatsoft.com/tar-java.asp](http://www.chilkatsoft.com/tar-java.asp)

Hope this helps.

# sql - WebSQL 类型转换列

> ID：16166594
> 
> 赞同：0
> 
> 时间：2013-04-23T10:06:58.743
> 
> 标签：sql, types, casting, web-sql

我有两个表，我正在尝试加入一个公用列。但是由于我无法控制的情况，其中一列将数据存储为字符串，另一列存储为整数。我需要将字符串列转换为整数，反之亦然。我该怎么做？在 PgSQL 中，它就像 column::text 等一样简单，但我无法在 WebSQL 上工作。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:28:00.290

您可以简单地将 INT 列转换为 VARCHAR？

```
CREATE TABLE T (ID INT);
CREATE TABLE T2 (ID VARCHAR(2));

INSERT INTO T VALUES (1);
INSERT INTO T VALUES (2);
INSERT INTO T VALUES (3);

INSERT INTO T2 VALUES ('1');
INSERT INTO T2 VALUES ('2');
INSERT INTO T2 VALUES ('3');

SELECT  *
FROM    T
        INNER JOIN T2
            ON T2.ID = CAST(T.ID AS VARCHAR(2)); 
```

**[SQL Fiddle 示例](http://sqlfiddle.com/#!7/e215e/1)**

您也可以使用`CAST(VarcharColumn AS INT)`，但您更有可能遇到从字符串转换为 int 的转换错误，而不是从 int 转换为字符串。

# gnuplot - 八度绘图错误

> ID：16166595
> 
> 赞同：11
> 
> 时间：2013-04-23T10:06:59.370
> 
> 标签：gnuplot, octave

我是 octave 的新手，当我收到以下错误时，我刚刚尝试使用 Octave 3.4.0 进行第一次绘图。任何帮助都感激不尽。gnuplot 版本是 4.6

```
 octave-3.4.0:3> x=1:1:20;
     octave-3.4.0:4> y=sin(x);
     octave-3.4.0:5> plot(x,y)

     gnuplot> set terminal aqua enhanced title "Figure 1" size 560 420  font "*,6"
                  ^
     line 0: unknown or ambiguous terminal type; type just 'set terminal' for a list 
```

我用于 octave 的终端窗口是 mac X 终端。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T10:21:34.507

好的，我找到了解决这个问题的方法。赶紧跑：

```
setenv("GNUTERM","X11") 
```

在你绘制任何东西之前，例如，

```
plot(x,y) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-04-10T13:22:09.043

您可能需要重新安装支持 x11 的 gnuplot：

`brew uninstall gnuplot;brew install gnuplot --with-x`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-08T23:19:40.320

您也可以将此行添加到您的 ~/.octaverc 文件中：

```
setenv GNUTERM x11 
```

- 它适用于我的 mac os 山狮。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-27T22:56:08.283

# 完整的解决方案：

**1- 安装 x11：**

```
brew cask install xquartz 
```

*或者，从* [这里](http://xquartz.macosforge.org/downloads/SL/XQuartz-2.7.7.dmg)安装。

**2-重新安装gnuplot：**

```
brew uninstall gnuplot && brew install gnuplot --with-x11 
```

**3-将这些行放入 ~/.octaverc**

```
setenv("GNUTERM", "x11")
gnuplot_binary("/usr/local/bin/gnuplot") 
```

**4-重启你的mac**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-06T01:34:05.210

或将此行放入您的 .profile （或 .zshrc ）：

```
export GNUTERM=x11 
```

这将使所有 gunplot 调用（Octave 除外）输出到 x11。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-15T15:33:52.697

只需添加：

```
setenv ("GNUTERM", "X11") 
```

到您的 octaverc 文件，通常位于`/usr/local/share/octave/site/m/startup`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-09T13:03:05.110

我补充说：

```
setenv("GNUTERM", "qt") 
```

到位于 的 octaverc 文件`/usr/local/octave/3.8.0/share/octave/3.8.0/m/startup`，然后它再次工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-27T18:41:55.697

就放在这里吧。当这个错误发生在我身上时，我找到了这篇文章并用“setenv GNUTERM X11”更新了我的 octaverc 文件。

然后八度产生另一个错误：

```
 error: popen2: popen2 (child): unable to start process -- No such file or directory
    error: called from:
    error: /usr/local/Cellar/octave/3.8.0/share/octave/3.8.0/m/plot/util/private/__gnuplot_open_stream__.m at line 30, column 40
    error: /usr/local/Cellar/octave/3.8.0/share/octave/3.8.0/m/plot/util/__gnuplot_drawnow__.m at line 72, column 19
    sh: x11: command not found 
```

解决方案是添加`gnuplot_binary("usr/YO/bin/gnuplot")`到 octaverc 文件中`/usr/local/share/octave/site/m/startup`

现在以八度进行绘图很高兴。

# javascript - Cookie 无法发送到服务器

> ID：16166600
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:07:03.747
> 
> 标签：javascript, cookies

我正在尝试使用 POCO C++ Library 学习 C++ 网络编程。我将 cookie 添加到响应对象并返回给客户端。我可以通过firebug（使用Firefox）找到cookie值，但是通过js代码：`alert(document.cookie)`它无法显示该cookie信息，并且该cookie无法发送到服务器。

```
Set-Cookie:name=testname; domain=testacshserver.com; path=/;expires=Tue, 23 Apr 2013 10:54:43 GMT; secure; HttpOnly 
```

我用IE9的时候也是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:51:41.433

您需要省略`secure`仅通过 HTTPS 传输的部分，`HttpOnly`这会使 JavaScript 无法访问 cookie。所以你只需要传输：

```
Set-Cookie:name=testname; domain=testacshserver.com; path=/;expires=Tue, 23 Apr 2013 10:54:43 GMT 
```

# gradle - 如何在子项目任务结束时执行一次 Gradle 任务

> ID：16166605
> 
> 赞同：5
> 
> 时间：2013-04-23T10:07:16.927
> 
> 标签：gradle, multi-project

我正在使用以下项目结构

```
Project
|-Subproject1
|-Subproject2
|build.gradle
|settings.gradle 
```

子模块包含在根项目的`settings.gradle`和配置中。`build.gradle`

我有 3 个任务要做

1.  `build`（每个子项目都有这个）
2.  `deploy`（这是每个子项目都需要自己工作的打包机制）
3.  `finalizeDeployment`（这只需要调用一次）

我希望能够打电话

`$gradle deploy`<- 所有子项目都被部署并最终被调用**一次**

`$gradle Subproject1:deploy`<- Subproject1 被部署并且 finalize 被调用

构建.gradle

```
configure(subprojects) {

    task build <<{
        println "Do Build "+ project.name
    }

    task deploy(dependsOn:build){
        println 'deploy '+project.name

        doLast{
            finalizeDeployment.execute()
        }
    }
}

task finalizeDeployment{

    dependsOn subprojects.deploy

    doLast{
        println 'Finalize Deployment'
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:21:07.037

它的工作方式如下

```
configure(subprojects) {

    task build << {
        println "Do Build " + project.name
    }

    task deployPrepare(dependsOn: build)<<{
            println 'deploy ' + project.name
    }

    task deployFinalize(dependsOn: deployPrepare)<<{
        parent.deployFinalize.execute()
    }
}

task deployFinalize {

    doLast {
        println 'Finalize Deployment'
    }
}

deployFinalize.dependsOn(subprojects.deployPrepare) 
```

控制台输出为`gradle subproject1:deployFinalize`：

```
Do Build subproject1
deploy subproject1
Finalize Deployment 
```

控制台输出为`gradle deployFinalize`：

```
Do Build subproject1
deploy subproject1
Do Build subproject2
deploy subproject2
Finalize Deployment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T19:38:39.360

似乎您可以通过依赖项获得相同的功能，而无需使用 parent.deployFinalize.execute()。

在我工作的地方，我们使用：

```
subprojects {

   task dist(type: Copy, dependsOn: assemble) {
       ...
   }
}

task dist
dist.dependsOn subprojects.dist

task finalizeDist(dependsOn : subprojects.dist) {
    ...
}
dist.dependsOn finalizeDist 
```

# c - main 中的非可移植指针分配

> ID：16166612
> 
> 赞同：1
> 
> 时间：2013-04-23T10:07:56.577
> 
> 标签：c, pointers

在“理解 C 中的指针”一书中，在解释了参数后，有一些已解决的问题。第 22 页，问题 N.5 我将附上代码和解释。在那之后，会有我的问题。

```
#include <stdio.h>

int main()
{
    int *c;
    c = check(10, 20);
    printf("c = %p\n",c);
    return 0;
}

int * check(int i, int j)
{
    int *p, *q;
    p = &i;
    q = &j;
    if(i >= 45)
    {
        return p;
    }
    else
    {
        return q;
    }
} 
```

输出：错误消息：main 中的非可移植指针分配

> 说明 错误的原因很简单。传递给 check() 的整数被收集在 i 和 j 中，然后将它们的地址分配给 p 和 q。然后在下一条语句中，根据 45 测试 i 的值，并返回存储在 p 中的地址或存储在 q 中的地址。看起来这个地址会在 main() 中的 c 中收集，然后他会打印出来。这就是错误所在。函数 check( ) 不能返回整数指针。它所能返回的只是一个普通的整数。因此仅将 c 声明为整数指针是不够的。我们必须在程序中进行以下修改才能使其正常工作

```
#include <stdio.h>

int * check(int, int);

int main()
{
    int *c;
    c = check(10, 20);
    printf("c = %p\n",c);
    return 0;
}
int *check(int i, int j)
{
    ......
    ......
} 
```

在我看来，这没有意义。作者为了在第一段代码上故意出错，尝试在 main 中使用一个指向未分配内存区域的指针。但是他“试图”解决问题的方式根本不正确，他没有改变任何东西！相反，他应该在 check() 函数中分配一些内存区域。我对么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:13:13.463

这实际上是关于尚未声明的函数的*默认返回值。*在您的第一个示例中，当编译器看到该行时`c = check(10, 20);`，它还不知道该函数将返回什么。该标准说编译器应该假设返回是一个`int`. 这就是全部内容：an 的大小`int`可能与 a `int *`（指针）的大小不同。为了使编译器始终为此发出正确的机器代码，它必须知道`check`返回一个指针，这就是需要声明它的原因。这就是第二个示例所做的：它告诉编译器*“将有一个名为 'check' 的函数，它看起来像这样”*。

除此之外，这个例子真的很糟糕。的参数`check`被压入堆栈，然后函数返回指向这些堆栈位置的指针。但不能保证这些堆栈位置在函数退出后不再有效。这是*未定义的行为*，这意味着允许编译器做任何它喜欢的事情，甚至让你的计算机爆炸。这个特定示例实际上应该可以工作，因为它只打印*指针*（即它指向的地址），但实际上并没有*取消引用*它（即从指针指向的地址读取）。在大多数机器/编译器上，即使取消引用也应该“正确”工作，但您可能不依赖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:12:58.050

如果在第一次使用函数之前没有函数原型，编译器会假定函数返回`int`.

因此编译器假定您将`int`变量分配给`int*`. `int`的大小`int*`可能会有所不同，具体取决于平台和编译器。

例如，有些嵌入式系统对无符号整数和指针具有相同的类型，因此在两种情况下您都会在代码中看到`uint32_t`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T10:13:34.003

你是对的，添加原型只能修复编译器警告/错误，但不能解决`check`函数将返回指向局部变量的指针的问题。

但是，在您尝试取消引用返回的指针之前，它不是未定义的行为。打印出来就好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T10:13:45.107

有两个问题。

1.  局部变量的返回地址。

    这个 scnario 被称为[http://en.wikipedia.org/wiki/Dangling_pointer](http://en.wikipedia.org/wiki/Dangling_pointer)。当`Check()`执行完成时，分配给局部变量的内存可能会分配给其他函数。因此访问该内存会导致未定义的结果。

2.  需要前向声明。默认情况下，返回类型将被视为`int`，但这里`int*`使用。所以添加`int * check(int, int);`将解决`Error message: Non portable pointer assignment in main`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T10:16:06.883

我认为代码的主要“要点”是告诉您未声明的函数的返回类型默认为`int`. 这是真的。

然而，代码存在缺陷，因为该`check`函数返回一个指向局部变量的指针（参数`i`或`j`，取决于`i`的值），这是一种未定义的行为（幸运的是，该指针永远不会被取消引用）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T10:18:27.810

您正在返回在函数堆栈中分配的局部变量的地址`check()`。当`check()`函数结束时，函数堆栈，您不能将地址返回给不再存在的变量！

您可以将代码更改为：

```
#include <stdio.h>
int * check(int* i, int* j);
int main()
{
    int *c;
    int n1,n2;
    n1=10;
    n2=20;
    c = check(&n1, &n2);
    printf("c = %p\n",c);
    return 0;
}

int * check(int* i, int* j)
{
    int *p, *q;
    p = i;
    q = j;
    if((*i) >= 45)
    {
        return p;
    }

    return q;

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T10:12:48.480

您正在返回局部变量的地址。取消引用这些是`undefined`C 中的行为。`p`和`q`都是指向函数的局部变量的指针`check()`。在函数`check()`将控制权返回到`main()`之后，然后`p`和`q`指向未定义的值。此外，请对您的代码进行以下更正：

```
printf("c = %p\n",(void*)c); 
```

嘿，卡特彼勒，关于那位作者的书，我已经警告过你了，不是吗？:-)

**编辑**您忘记了`check()`之前的函数声明`main()`。在我的编译器中，它总是抛出警告消息。在 main() 函数之前添加以下内容：

```
int *check(int,int); 
```

# api - 对 spotify web api 或数据库导出的特权访问？

> ID：16166613
> 
> 赞同：0
> 
> 时间：2013-04-23T10:07:59.187
> 
> 标签：api, spotify

我正在写我的学士论文，这是一个 Spotify 应用程序，它使用我的网络服务基于标签 (lastfm) 进行音乐推荐。要构建一个实时响应的网络服务，我需要预先计算曲目/艺术家/专辑之间的相似性并将它们存储在本地。不幸的是，spotify web api 每秒只允许 10 个请求，这确实减慢了整个数据采集过程。

因此，我问是否有办法获得对 web api 的特权访问或以包含 spotify-ids 和标题/名称的 *.csv 文件的形式获得某种数据库导出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:06:02.450

以这种方式抓取 Spotify 数据库实际上违反了 Spotify API 服务条款，这也是设置此速率限制的原因之一。

您可能想尝试[The Echo Nest](http://echonest.com) — 他们的 API 可能更适合您正在做的事情。

# .net - 引发 ArgumentException 的 ImageList 的奇怪行为

> ID：16166614
> 
> 赞同：2
> 
> 时间：2013-04-23T10:08:01.437
> 
> 标签：.net, imagelist, argumentexception

当我在 .NET 中使用 ImageList 时，我很困惑。首先，我有一个包含三个不同 ImageList 的全局对象 (ImageManager)：

*   **`smallImages`**（尺寸：16x16）- 包含 50 张图片（从 Designer 添加）
*   **`largeImages`**（尺寸：48x48） - 包含 0 张图片
*   **`gridImages`**（尺寸：16x16） - 包含 17 张图片（从 Designer 添加）

ImageManager 在启动时初始化一次。**`gridImages`**用于网格控件 (JanusGridEx) 并按值传递。在运行时（在网格控件中），我将三个新图像添加到**`gridImages`**. 我试图以三种不同的方式添加它：

*   第一次尝试

> ```
> Dim ImageBuffer As Byte() = CType(DataRow(pColumnImageName), Byte())
> gridImages.Images.Add(imageKey, New Icon(New MemoryStream(ImageBuffer))) 
> ```

*   第二次尝试

> ```
>  Dim ImageBuffer As Byte() = CType(DataRow(pColumnImageName), Byte())
>  Dim newImage As Image = Image.FromStream(New MemoryStream(ImageBuffer))
>  gridImages.Images.Add(newImage) 
> ```

*   第三次尝试（我认为这是最好的方法 - 如果我错了，请纠正我）

> ```
> Dim ImageBuffer As Byte() = CType(DataRow(pColumnImageName), Byte())
> Using ms As New MemoryStream(ImageBuffer , 0, ImageBuffer.Length)
>       gridImages.Images.Add(imageKey, Image.FromStream(ms))
> End Using 
> ```

现在的问题是，当最后一张图片被添加到其中时**`gridImages`**，我想要 ie。通过使用 imageKey 或索引获取最后一个图像`(gridImages.Images(20))`我收到异常：**`System.ArgumentException: Parameter is not valid.`**callstack：

> System.ArgumentException：参数无效。在 System.Drawing.Bitmap.LockBits（矩形矩形，ImageLockMode 标志，PixelFormat 格式，BitmapData bitmapData）在 System.Drawing.Bitmap.LockBits（矩形矩形，ImageLockMode 标志，PixelFormat 格式）在 System.Windows.Forms.ImageList.GetBitmap（ Int32 index) at System.Windows.Forms.ImageList.ImageCollection.get_Item(Int32 index) at Janus.Windows.GridEX.Internal.JNSBB.a(Graphics , Brush , String , Image , Rectangle , ImageHorizo​​ntalAlignment , ImageVerticalAlignment , JNSDQ , Font , Boolean , Int32 , ImageList , Boolean ) 在 Janus.Windows.GridEX.EditControls.JNSAQ.a(Graphics , Int32 , Rectangle ) 在 Janus.Windows.GridEX.EditControls.JNSAQ.a(Graphics ) 在 Janus.Windows.GridEX.EditControls .JNSAQ.OnPaint(PaintEventArgs e) 在 System.Windows.Forms.Control。

**第一个问题：**为什么会这样？当我创建一个新的 Image 实例，甚至尝试将它保存在磁盘上时，它可以正常工作。

**第二个问题：**在将 ImageList 按值传递给 Grid 控件之前，我创建了一个 ImageList 的新实例并将所有图像从 ImageList (ImageManager) 复制到该实例 (DeepCopy)。当我制作 DeepCopy 并将新图像添加到新的 ImageList 时，它也可以正常工作。这是为什么？为什么它有效？

# asp.net - 如何在属性方法 VB.NET 中使用 GridViewUpdateEventArgs

> ID：16166615
> 
> 赞同：1
> 
> 时间：2013-04-23T10:08:04.467
> 
> 标签：asp.net, vb.net, gridview

我想在我的 GridView 的页脚上显示下拉列表。

```
 aspx code:
 <FooterTemplate>                                                      
 <asp:DropDownList ID="ddSrc" runat="server">    
 </asp:DropDownList>                                                   
 </FooterTemplate>

 'VB Code
         Protected Sub gvID_RowDataBound(sender As Object, e As GridViewRowEventArgs)
             If e.Row.RowType = DataControlRowType.DataRow Then
                 If e.Row.DataItem IsNot Nothing Then
                    Dim ddSrc As DropDownList = DirectCast(e.Row.FindControl("ddSrc"), DropDownList)      
                        If ddSrc IsNot Nothing Then
                             ddSrc.DataTextField = "Name"
                             ddSrc.DataValueField = "Id"
                             ddSrc.DataSource = GetData()
                             ddSrc.DataBind()
                        End If
                 End If
             End If
         End Sub 
```

我在用于加载我的下拉列表的代码后面使用了上面的代码，但是在运行时遇到了诸如 **“****对象引用未设置为对象的实例**”之类的问题。

 **我已经编辑了我的问题以便于理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:21:56.417

您需要在网格视图的 RowDataBound 事件上加载下拉列表

```
Protected Sub gvID_RowDataBound(sender As Object, e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.Footer Then
        If e.Row.DataItem IsNot Nothing Then
           Dim ddSrc As DropDownList = DirectCast(e.Row.FindControl("ddSrc"), DropDownList)      
               If ddSrc IsNot Nothing Then
                    ddSrc.DataTextField = "Name"
                    ddSrc.DataValueField = "Id"
                    ddSrc.DataSource = GetData()
                    ddSrc.DataBind()
               End If
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:19:27.097

在黑暗中拍摄，但这是否意味着它需要声明中的“新”？

```
Dim e As New GridViewUpdateEventArgs 
```

如果尚未创建，您将无法为其分配变量。**

# php - PHP/Mysql 多维/关联数组 2

> ID：16166618
> 
> 赞同：0
> 
> 时间：2013-04-23T10:08:08.283
> 
> 标签：php, arrays, mysqli

我已经使用这个代码将近一个星期了，似乎无法摆脱它。我正在从如下所示的数据库中获取行：

编号 | 帐户 | 内容 | 类型 | 数量
1 23494 E 38 10
2 23494 E 13 5
3 23494 F 38 7
4 23494 E 6 2

到目前为止，我的声明看起来像这样：

```
// Make the query:
$qu = "SELECT * FROM log WHERE account='".$account."' ORDER BY timelog DESC $pages->limit"; 
$re = @mysqli_query ($dbc, $qu); // Run the query.

$roarr = array();
while ($row = mysqli_fetch_array($re, MYSQLI_ASSOC)) {
    $roarr[$row['account']][$row['content']][$row['type']] = $row['quantity'];

} // End of WHILE loop.
//print_r($roarr);

echo'
<tr>&nbsp;</tr>
<tr>
    <td align="left"><b>Account</b></td>
    <td align="left"><b>6Kg(E)</b></td>
    <td align="left"><b>13Kg(E)</b></td>
    <td align="left"><b>38Kg(E)</b></td>

    <td align="left"><b>6Kg(F)</b></td>
    <td align="left"><b>13Kg(F)</b></td>
    <td align="left"><b>38Kg(F)</b></td>
    <td align="left"><b>Date Created</b></td>
</tr>
';

$dataarr = array();
foreach($roarr as $account => $dataarr) {
    $bg = ($bg=='#eeeeee' ? '#ffffff' : '#eeeeee');

    echo '
      <tr bgcolor="' . $bg . '">
        <td align="left">'. $account .'</td>
     ';

    foreach($dataarr as $content => $data) {
         if($content == "E") {
              echo '<td align="left">', (isset($data['6']) ? $data['6'] : '&nbsp;'), '</td>';
               echo '<td align="left">', (isset($data['13']) ? $data['13'] : '&nbsp;'), '</td>';
               echo '<td align="left">', (isset($data['38']) ? $data['38'] : '&nbsp;'), '</td>';
         } // Then I GET STUCK on the Else Part! HOW Do I display $content == "F" data on the right hand side?
    } //End Foreach
} //End Foreach 
```

这就是我打算显示结果的方式：

帐户 | 6KG(E) | 13KG(E) | 38KG(E) | 6KG(F) | 13KG(F) | 38KG(F) | 日期

23494 5 10 2 7

，但我被困住了。

**问题：** 如何安排以这种格式获取的结果？

**编辑：** 我更改了数据库，以便更多地关注问题：由于查询按帐户获取，因此只有一个帐户的行如上面的数据库所示。

这是 $roarr 生成的数组：

数组（[23494] => 数组（[F] => 数组（[6] => 2 [38] => 7）[E] => 数组（[38] => 10 [13] => 5）） )

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:46.110

你需要类似的东西而不是你的内部 foreach 循环：

```
echo '<td align="left">', (isset($dataarr['E']['6']) ? $dataarr['E']['6'] : '&nbsp;'), '</td>';
echo '<td align="left">', (isset($dataarr['E']['13']) ? $dataarr['E']['13'] : '&nbsp;'), '</td>';
echo '<td align="left">', (isset($dataarr['E']['38']) ? $dataarr['E']['38'] : '&nbsp;'), '</td>';
echo '<td align="left">', (isset($dataarr['F']['6']) ? $dataarr['F']['6'] : '&nbsp;'), '</td>';
echo '<td align="left">', (isset($dataarr['F']['13']) ? $dataarr['F']['13'] : '&nbsp;'), '</td>';
echo '<td align="left">', (isset($dataarr['F']['38']) ? $dataarr['F']['38'] : '&nbsp;'), '</td>'; 
```

# ruby-on-rails - 失败/错误：click_link post.title ArgumentError：参数数量错误（1 代表 0）Rspec 和 Capybara

> ID：16166624
> 
> 赞同：1
> 
> 时间：2013-04-23T10:08:39.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, bdd

```
require 'spec_helper'
describe "Posts pages" do
  let!(:posts) { FactoryGirl.create_list(:post, 3) }
  subject { page }
  describe "Blog page" do
    context "Listing all posts" do
      before do
        visit "/blog"
      end
        it "should list all available posts" do
        posts.each do |post|
          page.should have_selector "h3 a", :text => post.title
          page.should have_selector ".content", :text => post.content
        end
      end
    end
  end
  describe "Showing a post" do
    let!(:post) { posts.last }
    before do
      visit "/blog"
      current_path.should == "/blog"
      click_link post.title
      save_and_open_page
    end

    it "should have post info" do
      should have_content post.title
      should have_content post.content
    end
  end
end 
```

如果我删除`click_link post.title`我的代码工作正常。

我在用着`capybara (2.1.0)`

**为什么，我的错误在哪里？**

# wpf - WPF à la Clean Code 中的命令行参数和“全局设置”

> ID：16166627
> 
> 赞同：1
> 
> 时间：2013-04-23T10:08:45.443
> 
> 标签：wpf, mvvm, coding-style, command-line-arguments, application-settings

我必须为以下情况编写干净的代码有哪些可能性：

```
public class App : Application
{
    protected override OnStartup(StartupEventArgs e)
    {
        var arguments = (MyArgumentClass)CommandLineArgumentParser.Parse(e.Args);
        // and what now?
    }
}

public class ShellViewModel : ViewModelBase
{
    // ...
    public SubViewModel SubViewModel {get; protected set;}
}

public class SubViewModel : ViewModelBase
{
    // is some property which should be set depending on command line arguments
    // in the real code it is not just one property in one view model
    // but several properties in different view models
    public bool MyFlag { get; set;}
} 
```

我的问题是：

1.  我在哪里存储（哪个类）并将命令行参数应用于需要它们的视图模型？
2.  应用程序设置的相同问题。

我的想法：

*   将 App 中的设置存储为静态属性，因此我可以在需要时从每个 App.CommandLineArgumets.Flag 的视图模型中轻松访问这些值。问题：这会将视图模型与实际应用程序联系起来。在出现此问题的情况下，这正是问题所在（与 Properties.Settings.Default 相同的问题）

*   将 CommandLineArguments 对象传递给视图并从视图中设置视图模型的值。我在这种情况下看到的问题：我有两个使用相同视图模型类的应用程序（也许会更快）。如果我必须更改视图模型类或任何子类，我需要更新所有使用它的应用程序中的代码。但也许它仍然很干净？

*   对于应用程序设置，我还可以将 Propertes.Settings.Default 作为 ApplicationSettingsBase 的实例传递给视图模型，但感觉不对，视图模型负责读取并最终存储设置。

*   在需要的地方通过 Environment.GetCommandLineArgs() 访问命令行参数。但这需要在代码中的多个位置解析命令行参数。

对于此类问题，也许有更好/更清洁的解决方案，或者我忽略了一些东西。我正在寻找此类问题的通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:45:43.773

我建议将参数传递给 ViewModel 的构造函数。您将需要在某些时候实例化 ViewModel，如果您将命令行参数存储为应用程序中的静态变量（根据您的第一个场景），工厂代码可能可以访问命令行参数。大多数 IoC 容器允许您传递命令行参数，因此如果您使用 IoC，您应该能够获得所需的结果，同时保持 ViewModel 与应用程序分离

# xtext - xtext：不同顺序的语句

> ID：16166628
> 
> 赞同：2
> 
> 时间：2013-04-23T10:08:45.927
> 
> 标签：xtext

我正在尝试编写一个 xtext 规则，我可以在其中以不同的随机顺序编写语句，但所有语句都必须保存为列表。

我试过了：

```
Root:
 ( (entity += Entity)? & (component += Component)? )*
; 
```

但它不起作用。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T10:03:26.070

实现目标的简单方法：

*   语法部分使用 Svens 答案。这允许您自由地混合实体和组件。
*   添加自定义验证检查以确保至少存在一个实体和至少一个组件。

自定义验证的文档位于 Validation 章节的[“](http://www.eclipse.org/Xtext/documentation.html#validation) Custom Validation”子章节中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T05:27:40.103

这可以满足您的要求：

```
Root:
  (entity+=Entity | component+=Component)*
; 
```

# networking - IP地址的区别？

> ID：16166632
> 
> 赞同：0
> 
> 时间：2013-04-23T10:08:58.783
> 
> 标签：networking, ip

注意到一个奇怪的行为。

我的系统 IP 是`10.99.60.149`. ( `ipconfig/all`)

我正在尝试进行在线支付，那里显示为“ `Your IP Address : 202.45.7.163`”

这怎么可能？谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:14:13.360

前者是您的内部 IP，后者是您的公共 IP 地址（又名外部 IP）。

在家庭网络或公司网络中，设备通常由位于路由器或调制解调器内的网络地址转换器 (NAT) 分配“内部”IP 地址。NAT 对网站隐藏了内部 IP 地址，使整个家庭网络在外部计算机看来具有一个单一的“外部”IP 地址。在这种情况下，公共 IP 地址是分配给您家的外部 IP 地址。

[您可以使用此](https://www.google.com/search?q=IP%20Address)链接使用 Google 的 api 找到您的公共 IP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:22:53.593

当您在域中或在路由器后面时，您拥有 Intranet IP 地址，它是用于识别“本地网络”*内*的计算机的 IP，即“在您的域内”。这些 IP 通常是 10.0.something 或 192.168.something。
另一方面，互联网是您通过您的 ISP（互联网服务提供商）与万维网的连接。那是您的“全球”或“全球可见”IP 地址。

为了更好地理解，假设您住在公寓里。房子里到处都是公寓，只有公寓内的门牌号码才知道。
如果你提到例如“110 号门”，房子里的每个人都会知道你在说哪个公寓——但外面的世界没有人知道。
世界将通过不同的地址（IRL 邮政编码、街道、门牌号、城市等）知道您的房子，但只有房东才能知道收件人是哪个公寓，以防有人向公寓内的专职人员寄信。

因此，公寓的 IP 地址是 ISP 提供的，世界上称为“您的家庭”的地址，而平面门号是由房东（您的路由器或内网管理员等）定义的。
当一条消息来临时，房东可以从附加到消息的元数据中找出它是给你的。

要检查您的“真实”/“外部世界”IP，您可以访问例如此站点：[http ://whatismyipaddress.com/](http://whatismyipaddress.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:10:37.537

第一个是您的网络本地的，第二个是互联网通过您的 ISP 看到的。您可以检查[http://whatismyipaddress.com/](http://whatismyipaddress.com/)，它提供了您的互联网 IP 地址。

# git - 保持两个分支同步的最佳方法？

> ID：16166633
> 
> 赞同：1
> 
> 时间：2013-04-23T10:08:58.770
> 
> 标签：git

假设我的 git 项目有两个分支**A**和**B**，现在我在`A`分支上，并提交两个提交：`C1`并且`C2`，分支`B`不需要包含这些提交，所以我什么也没做，然后我提交`C3`，`A`也 `B`应该包含这个提交，所以我决定从 to 合并`A`，`B`但根据我的理解`C1`并且`C2`也将合并到`B`，每次合并时我都必须解决此更改/冲突，对吗？

另一个问题是，`A`分支经常变化（如上）并且变化`B`不大，在这种情况下，要保持两个分支同步，实现这一点的最佳实践是什么？

背景：`A`和`B`分支都将保留。一开始`A`是从 分支出来的`B`，但`A`打算有自己的特性，`B`相对稳定，它们共享 60% 相同的代码库。我们正在努力`A`，但有时我们会实现一个新功能并决定两者`A`并将`B`被包括在内。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:16:26.073

您可以使用`git cherry-pick $SHA_OF_C3`将[特定提交](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)从一个分支移植到另一个分支。

更一般地说，您的分支策略将决定良好的实践。我认为[Vincent Driessen 的分支模型](http://nvie.com/posts/a-successful-git-branching-model/)至少是您设计 git repo 治理方法时的一个很好的起点。

# java - 试图获取不存在的记录：抛出什么异常？

> ID：16166634
> 
> 赞同：0
> 
> 时间：2013-04-23T10:09:00.077
> 
> 标签：java, exception, crud

我正在创建一个简单的 CRUD 类，我们称之为 MyItemManager。它的作用是在本地数据库中维护 MyItem 对象的集合。我想知道在尝试读取不存在的记录时抛出哪个异常最有意义（通过调用 myItemManager.getItem(int id)，并且数据库中不存在这样的 ID）任何提示/最佳实践？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:10:02.907

您可能需要考虑返回 null 而不是抛出异常。应为“例外”情况保留例外。

# java - 无法使用 grails 和 JPA 将集合中新添加的项目更新到数据库

> ID：16166645
> 
> 赞同：0
> 
> 时间：2013-04-23T10:09:31.957
> 
> 标签：java, hibernate, grails, jpa, grails-orm

我在长期更新 grails 中的一个域（图书馆）时遇到问题，我试图在添加新书后更新我的图书馆，但添加的书没有得到保存。

```
I have mapping of bookCollection in my domain Class Library as below:

@OneToMany(cascade = CascadeType.ALL, mappedBy = "Library")
    Collection<Book> bookCollection;

I am trying to add a new book to my Library(Initially there is no book in  bookColletion):

Library library = Library.get(1)
Book book=Book.get(1)
library.bookCollection.add(book)

and update it:
library.save(flush:true,failOnError: true)

Library is got saved but  my book is not.

I am using grails and JPA. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:47.183

您没有设置关系的另一端`library`：`book`.

```
Library library = Library.get(1)
Book book=Book.get(1)
library.bookCollection.add(book)
book.library = library; // <--- sets the other side of the relation 
```

# iphone - ios应用中的二维码扫描

> ID：16166646
> 
> 赞同：26
> 
> 时间：2013-04-23T10:09:34.117
> 
> 标签：iphone, ios, objective-c, qr-code

我需要在应用程序中集成二维码阅读器并找到它的[教程](http://iphonenativeapp.blogspot.in/2011/07/qr-code-readerscanner-for-iphone-app-in.html)。

[我从这个链接](http://sourceforge.net/projects/zbar/files/iPhoneSDK/ZBarSDK-1.2.dmg/download)下载了 Z-bar sdk 。

这是我所做的。

在 QRscannerViewController.m

```
-(IBAction)StartScan:(id) sender
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
     reader.readerDelegate = self;

     reader.readerView.torchMode = 0;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology: ZBAR_I25
     config: ZBAR_CFG_ENABLE
      to: 0];

     // present and release the controller
     [self presentModalViewController: reader
       animated: YES];
     [reader release];

    resultTextView.hidden=NO;
 }

 - (void) readerControllerDidFailToRead: (ZBarReaderController*) reader
                         withRetry: (BOOL) retry{
     NSLog(@"the image picker failing to read");

 }

 - (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
 {

     NSLog(@"the image picker is calling successfully %@",info);
      // ADD: get the decode results
     id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
     ZBarSymbol *symbol = nil;
     NSString *hiddenData;
      for(symbol in results)
       hiddenData=[NSString stringWithString:symbol.data];
      NSLog(@"the symbols  is the following %@",symbol.data);
      // EXAMPLE: just grab the first barcode
     //  break;

      // EXAMPLE: do something useful with the barcode data
      //resultText.text = symbol.data;
      resultTextView.text=symbol.data;

       NSLog(@"BARCODE= %@",symbol.data);

      NSUserDefaults *storeData=[NSUserDefaults standardUserDefaults];
      [storeData setObject:hiddenData forKey:@"CONSUMERID"];
      NSLog(@"SYMBOL : %@",hiddenData);
      resultTextView.text=hiddenData;
     [reader dismissModalViewControllerAnimated: NO];

 } 
```

添加了所有需要的框架，因此没有`referenced from`错误。

当我单击扫描按钮时，ZBarReaderViewController 显示良好，我按住 alt 键并单击鼠标左键打开模拟器的照片库，一切正常。

问题是什么，

1.  QR 图像未被扫描，即`imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo` 函数未被调用。
2.  QR 图像看起来比其原始尺寸大。

![在此处输入图像描述](https://i.stack.imgur.com/W3GRs.png)

如何解决这个问题？

为什么图像没有被扫描？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-10-14T08:33:34.970

随着发布`iOS7`您不再需要使用外部框架或库。**带有 AVFoundation 的 iOS 生态系统现在完全支持扫描**几乎所有代码，从 QR over EAN 到 UPC。

只需查看[技术说明](https://developer.apple.com/library/ios/technotes/tn2325/_index.html)和[AVFoundation 编程指南](https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)。[`AVMetadataObjectTypeQRCode`](https://developer.apple.com/library/IOS/documentation/AVFoundation/Reference/AVMetadataMachineReadableCodeObject_Class/index.html#//apple_ref/doc/constant_group/Machine_Readable_Object_Types)是你的朋友。

这是一个很好的**教程**，一步一步地展示它： [iPhone QR码扫描库iOS7](http://www.ama-dev.com/iphone-qr-code-library-ios-7/)

只是一个关于如何设置它的小例子：

```
#pragma mark -
#pragma mark AVFoundationScanSetup

- (void) setupScanner
{
    self.device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    self.input = [AVCaptureDeviceInput deviceInputWithDevice:self.device error:nil];

    self.session = [[AVCaptureSession alloc] init];

    self.output = [[AVCaptureMetadataOutput alloc] init];
    [self.session addOutput:self.output];
    [self.session addInput:self.input];

    [self.output setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];
    self.output.metadataObjectTypes = @[AVMetadataObjectTypeQRCode];

    self.preview = [AVCaptureVideoPreviewLayer layerWithSession:self.session];
    self.preview.videoGravity = AVLayerVideoGravityResizeAspectFill;
    self.preview.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);

    AVCaptureConnection *con = self.preview.connection;

    con.videoOrientation = AVCaptureVideoOrientationLandscapeLeft;

    [self.view.layer insertSublayer:self.preview atIndex:0];
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-23T13:27:33.103

在我们的 iPhone 应用程序中使用 ZBar SDK 进行 BR 和 QR 码扫描。

您可以找到有关此的分步文章，以及如何使用示例代码

> [iPhone教程中如何使用条码扫描仪（BR和QR）（使用ZBar）](http://rdcworld-iphone.blogspot.in/2013/03/how-to-use-barcode-scanner-br-and-qr-in.html)

**看看它怎么运作**

1.  [**从这里**](https://sourceforge.net/projects/zbar/files/iPhoneSDK/ZBarSDK-1.2.dmg/download)下载 ZBar SDK[](https://sourceforge.net/projects/zbar/files/iPhoneSDK/ZBarSDK-1.2.dmg/download)

***   在您的项目中添加以下框架

    *   AVFoundation.framework
    *   CoreGraphics.framework
    *   CoreMedia.framework
    *   CoreAudio.framework
    *   CoreVideo.framework
    *   QuartzCore.framework
    *   libiconv.dylib*   在 frameworks 中添加 zip下载的**libzbar.a库**

    *   在您的班级中导入标头并确认它是委托

    **#import "ZBarSDK.h"**** 

 **和

```
@interface ViewController : UIViewController <ZBarReaderDelegate> 
```

5.扫描图像

```
- (IBAction)startScanning:(id)sender {

    NSLog(@"Scanning..");    
    resultTextView.text = @"Scanning..";

    ZBarReaderViewController *codeReader = [ZBarReaderViewController new];
    codeReader.readerDelegate=self;
    codeReader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = codeReader.scanner;
    [scanner setSymbology: ZBAR_I25 config: ZBAR_CFG_ENABLE to: 0];

    [self presentViewController:codeReader animated:YES completion:nil];    

} 
```

6.得到结果

```
- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    //  get the decode results
    id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];

    ZBarSymbol *symbol = nil;
    for(symbol in results)
        // just grab the first barcode
        break;

    // showing the result on textview
    resultTextView.text = symbol.data;    

    resultImageView.image = [info objectForKey: UIImagePickerControllerOriginalImage];

    // dismiss the controller 
    [reader dismissViewControllerAnimated:YES completion:nil];
} 
```

希望这会对您有所帮助，如果您在此示例中发现任何问题，也请告诉我，乐于助人

[官方文档](http://zbar.sourceforge.net/iphone/sdkdoc/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-03T12:00:14.017

在 iOS 7 和更新版本上试试这个。

要捕获 QR 码：

```
- (IBAction)Capture:(id)sender {

    isFirst=true;
    _session = [[AVCaptureSession alloc] init];
    _device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    NSError *error = nil;

    _input = [AVCaptureDeviceInput deviceInputWithDevice:_device error:&error];
    if (_input) {
        [_session addInput:_input];
    } else {
        NSLog(@"Error: %@", error);
    }

    _output = [[AVCaptureMetadataOutput alloc] init];
    [_output setMetadataObjectsDelegate:self queue:dispatch_get_main_queue()];
    [_session addOutput:_output];

    _output.metadataObjectTypes = [_output availableMetadataObjectTypes];

    _prevLayer = [AVCaptureVideoPreviewLayer layerWithSession:_session];
    _prevLayer.frame = self.view.bounds;
    _prevLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    [self.view.layer addSublayer:_prevLayer];

    [_session startRunning];
} 
```

要阅读，请使用其委托方法：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputMetadataObjects:(NSArray *)metadataObjects fromConnection:(AVCaptureConnection *)connection
{
    CGRect highlightViewRect = CGRectZero;
    AVMetadataMachineReadableCodeObject *barCodeObject;
    NSString *detectionString = nil;
    NSArray *barCodeTypes = @[AVMetadataObjectTypeUPCECode, AVMetadataObjectTypeCode39Code, AVMetadataObjectTypeCode39Mod43Code,
            AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeCode93Code, AVMetadataObjectTypeCode128Code,
            AVMetadataObjectTypePDF417Code, AVMetadataObjectTypeQRCode, AVMetadataObjectTypeAztecCode];

    for (AVMetadataObject *metadata in metadataObjects) {
        for (NSString *type in barCodeTypes) {
            if ([metadata.type isEqualToString:type])
            {
                barCodeObject = (AVMetadataMachineReadableCodeObject *)[_prevLayer transformedMetadataObjectForMetadataObject:(AVMetadataMachineReadableCodeObject *)metadata];
                highlightViewRect = barCodeObject.bounds;
                detectionString = [(AVMetadataMachineReadableCodeObject *)metadata stringValue];
                break;
            }
        }

        if (detectionString != nil)
        {
            if (isFirst) {
            isFirst=false;
            _label.text = detectionString;
            break;
           }
        }
        else
            _label.text = @"(none)";
    }

    _highlightView.frame = highlightViewRect;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-23T10:15:20.890

**首先从[这里](https://github.com/zxing/zxing/tree/master/iphone)**导入 ZXingWidget 库**。**

 **尝试这个 ，

```
- (IBAction)btnScanClicked:(id)sender {

    ZXingWidgetController *widController = [[ZXingWidgetController alloc] initWithDelegate:self showCancel:YES OneDMode:NO];
    QRCodeReader* qrcodeReader = [[QRCodeReader alloc] init];
    NSSet *readers = [[NSSet alloc ] initWithObjects:qrcodeReader,nil];
    [qrcodeReader release];
    widController.readers = readers;
    [readers release];
    NSBundle *mainBundle = [NSBundle mainBundle];
    widController.soundToPlay =
    [NSURL fileURLWithPath:[mainBundle pathForResource:@"beep-beep" ofType:@"aiff"] isDirectory:NO];
    [self presentModalViewController:widController animated:YES];
    [widController release];

} 
```

和代表

```
- (void)zxingController:(ZXingWidgetController*)controller didScanResult:(NSString *)result {

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-07T10:41:25.440

您可以使用我自己的***QRCodeReader***框架。

[https://www.cocoacontrols.com/controls/qrcodereader](https://www.cocoacontrols.com/controls/qrcodereader)

如何使用

1.  嵌入式二进制文件
2.  将 UIView 拖放到视图控制器中。
3.  更改 UIVIew 的类。
4.  绑定你的 UIView。

在您的视图控制器中粘贴“M1，M2”方法（即“ViewController.m”）

**"M1" viewDidLoad**

```
 - (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.title = @"QR Code Reader";
    [qrCodeView setDelegate:self];
    [qrCodeView startReading];
} 
```

这里是委托方法： **“M2”QRCodeReaderDelegate**

```
 #pragma mark - QRCodeReaderDelegate
- (void)getQRCodeData:(id)qRCodeData {
    UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@"QR Code" message:qRCodeData preferredStyle:UIAlertControllerStyleAlert];

    UIAlertAction *cancel = [UIAlertAction actionWithTitle:@"Close" style:UIAlertActionStyleDefault handler:nil];
    [alertController addAction:cancel];

    UIAlertAction *reScan = [UIAlertAction actionWithTitle:@"Rescan" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
        [qrCodeView startReading];
    }];
    [alertController addAction:reScan];
    [self presentViewController:alertController animated:YES completion:nil];
} 
```

谢谢。****

# ruby-on-rails - 在 RoR 的文本字段中设置最大长度

> ID：16166657
> 
> 赞同：27
> 
> 时间：2013-04-23T10:10:09.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

有没有人设法为文本字段设置最大字段长度

如何设置文本字段的最大长度。这是我使用的代码

```
<%= text_field_tag(:create_text), :input_html => {:maxlength => 15, :size => 40}  %> 
```

但我似乎无法设置可以输入该字段的最大字符数。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-23T10:12:32.007

您可以这样做：

```
<%= text_field_tag 'create_text', nil, :maxlength => 15, :size => 40 %> 
```

来源：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-18T20:19:08.410

在**text_field_tag**调用中：

**:size**与文本框的物理长度有关。它足够大，可以在框中看到这么多字符。但是用户仍然可以输入更多。

**:maxlength**是用户可以输入的最大字符数，与文本框的物理大小无关。文本框可以更大或更小，但如果你设置 :maxlength => 5，他们将只能输入 5 个字符。

如果这也是您希望数据库中数据的硬限制，您应该设置验证。例如，这可以防止您在 Rails 代码中将其设置为更多字符。

```
validates_length_of :column_name, :maximum => 5 
```

最后，对于带子和吊杆的方法，并且为了防止与数据库相冲突的代码设置错误的值，您可以在数据库级别强制执行它。在某些情况下，Rails 应用程序以外的其他代码可能会更新数据库。即使在这种情况下，这也可以防止坏数据。

在迁移中添加一列，您可以这样做：

```
add_column :table_name, :column_name, :string, :limit => 30 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-09T04:37:45.327

客户端：

```
 <%= text_field_tag :"description", '', maxlength: 5   %>
   or      
     <input type="text" name="description" id="description" value="" maxlength="5"> 
```

服务器端：在 model.rb 文件中

```
validates_length_of :column_name, :maximum => 5 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-23T12:15:40.093

你可以试试这个

```
<%=text_field_tag 'create_text',:size=>40 %> 
```

# php - 如何通过分片架构在 PHP 中配置 MongoDB 复制集？

> ID：16166669
> 
> 赞同：0
> 
> 时间：2013-04-23T10:10:33.167
> 
> 标签：php, mongodb, configuration, replication, sharding

我必须开发一个 php Web 界面来管理 MongoDB 集群。
该集群目前由 1 个 mongos、1 个配置、1 个 RS（Resplication Set with 5 mongod）组成。
我想知道是否可以在与客户端/管理应用程序相关的一个或多个 mongos 实例后面配置不同的 RS。

. . . . . . . . . | 蒙古人 |
管理应用程序 | . . . . . . . | ==> RS1 / RS2 / RS3
。. . . . . . . . | 蒙古人 |

是否可以使用此架构中的管理应用程序（重新）配置（添加/删除/修改成员）RS1、RS2 或 RS3？

# google-maps - 将地点批量上传到 Google 地图

> ID：16166672
> 
> 赞同：0
> 
> 时间：2013-04-23T10:10:49.230
> 
> 标签：google-maps, google-places-api

我想知道当您想将数百家餐馆/企业的数据批量上传到 Google 地图以便能够通过 Google Places API 查询并通过 Google Maps Local 显示时，最好的方法是什么。

我在 Places API 中看到了 Places Actions： [https](https://developers.google.com/places/documentation/actions) ://developers.google.com/places/documentation/actions 但它似乎不允许我拥有一个地方的所有权。

加上语法是：

```
POST maps/api/place/add/json?sensor=true_or_false&key=AddYourOwnKeyHere
Host: maps.googleapis.com

{
 "location": {
  "lat": -33.8669710,
  "lng": 151.1958750
},
"accuracy": 50,
"name": "Google Shoes!",
"types": ["shoe_store"],
"language": "en-AU"
} 
```

所以我真的看不出如何添加描述和开放时间。

我希望能够看到我上传的所有地点，但我也想让本地管理员可以选择为地点添加数据并更改营业时间等内容（因为我们并不总是有最新的日期信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:15:39.467

是的 - Places Actions API 仅允许您执行一组有限的操作。

考虑使用[Places for Business](https://www.google.com/business/)来管理您的餐厅。

如果您有很多地方需要更新，您可以按照帮助中心文章“[添加 10 个或更多列表](http://support.google.com/places/bin/answer.py?hl=en&answer=178024#3)”中的说明通过上传电子表格来更新或创建它们。

# c# - 如何从 linq 查询中的两个不同分组的 iqueryable 对象中获取计数？

> ID：16166676
> 
> 赞同：0
> 
> 时间：2013-04-23T10:10:54.323
> 
> 标签：c#, linq-to-entities

目前我正在使用以下查询来计算用户活动统计信息，例如用户登录、退出等的次数......它工作正常。但我想改进我的代码，`UserActivityStatistics`只创建一次下面的对象，并希望避免重复代码和创建对象两次，如下所示。

```
 private IList<UserActivityStatistics> ToUserActivityStatistics(DateTime fromDate, DateTime toDate, int pageIndex, int pageSize, Guid userId, ActivityType activity)
    {
        IList<UserActivityStatistics> userActivityStatistics = null;

        if (userId == null || userId == Guid.Empty)
        {
            userActivityStatistics = (from u in SqlGetUserActivityStatistics(fromDate, toDate, userId, activity)
                                      group u by new { u.Activity, u.UserId } into g
                                      select g).AsEnumerable().Select(x => new UserActivityStatistics
                                      {
                                          Activity = Activity.GetActivityTypeName((ActivityType)x.Key.Activity),
                                          ActivityCount = x.Count(),
                                          UserId = x.Key.UserId,
                                          UserName = x.Select(y => y.aspnet_Users.UserProfiles.FirstName + " " + y.aspnet_Users.UserProfiles.LastName).FirstOrDefault()

                                      }).OrderByDescending(y => y.ActivityCount).Skip(pageIndex).Take(pageSize).ToList();
        }
        else
        {

            userActivityStatistics = (from u in SqlGetUserActivityStatistics(fromDate, toDate, userId, activity)
                                      group u by u.Activity into g
                                      select g).AsEnumerable().Select(x => new UserActivityStatistics
                                      {
                                          Activity = Activity.GetActivityTypeName((ActivityType)x.Key),
                                          ActivityCount = x.Count(),
                                          UserId = x.Select(y => y.aspnet_Users.UserProfiles.UserId).FirstOrDefault(),
                                          UserName = x.Select(y => y.aspnet_Users.UserProfiles.FirstName + " " + y.aspnet_Users.UserProfiles.LastName).FirstOrDefault()
                                      }).OrderByDescending(z => z.ActivityCount).Skip(pageIndex).Take(pageSize).ToList();

        }

        return userActivityStatistics;
    } 
```

我正在改进我的代码，如下所示，因为我将`UserActivityStatistics`对象移到外面，并将其分组为 iqueryable。但我无法计算来自该 iqueryable 对象的计数。我在互联网上搜索，但我没有得到任何解决方案。

希望清楚...

```
 private IList<UserActivityStatistics> ToUserActivityStatistics(DateTime fromDate, DateTime toDate, int pageIndex, int pageSize, Guid userId, ActivityType activity)
    {
        IList<UserActivityStatistics> userActivityStatistics = null;
        IQueryable<ActivityLog> activityLog = null;

        if (userId == null || userId == Guid.Empty)
        {

            activityLog = (from u in SqlGetUserActivityStatistics(fromDate, toDate, userId, activity)
                            select u).GroupBy(x => new { x.Activity, x.UserId }).SelectMany(x => x);

        }
        else
        {
            activityLog = (from u in SqlGetUserActivityStatistics(fromDate, toDate, userId, activity)
                            select u).GroupBy(x => new { x.Activity}).SelectMany(x => x);
        }

        userActivityStatistics = (from u in activityLog
                                  select u).AsEnumerable().Select(x => new UserActivityStatistics
                                 {
                                     Activity = Activity.GetActivityTypeName((ActivityType)x.Activity),
                                     ActivityCount = //unable to do count
                                     UserId = x.UserId
                                 }).OrderByDescending(x => x.ActivityCount).Skip(pageIndex).Take(pageSize).ToList();

        return userActivityStatistics;
    } 
```

# javascript - 递归排序数组

> ID：16166685
> 
> 赞同：1
> 
> 时间：2013-04-23T10:11:12.477
> 
> 标签：javascript, arrays, sorting

我有一个这样的数组：

```
var a = [
  {id: 1, pid: 0},
  {id: 2, pid: 1},
  {id: 3, pid: 1},
  {id: 4, pid: 2},
  {id: 5, pid: 2},
  {id: 6, pid: 3},
  {id: 7, pid: 3}
] 
```

还有一个像这样的地图对象：

```
var map = {
  "1": {id: 1, pid: 0},
  "2": {id: 2, pid: 1},
  "3": {id: 3, pid: 1},
  "4": {id: 4, pid: 2},
  "5": {id: 5, pid: 2},
  "6": {id: 6, pid: 3},
  "7": {id: 7, pid: 3}
} 
```

我正在尝试对其进行排序以匹配此模式：

```
var result = [
  {"id": 1, "pid": 0},
    {"id": 2, "pid": 1},
      {"id": 4, "pid": 2},
      {"id": 5, "pid": 2},
    {"id": 3, "pid": 1},
      {"id": 6, "pid": 3},
      {"id": 7, "pid": 3}
] 
```

如您所见，这是一个嵌套的树结构。我想`pid`在匹配和顶部`id`最低。`id`

有没有办法只使用一次迭代对这样的数组进行排序？- 如果没有，很高兴看到一个关于如何绕过它的例子。

到目前为止，我只有：

```
a.sort(function(q, w) { return q.pid - w.pid; }); 
```

我正在考虑使用我的地图使用`pid`->找到我的父母`id`，然后对该键进行排序。也可以在我的对象上存储额外的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:26:11.950

假设有一个 pid 为 0 的根：

```
var children = {}
var root = null;
a.forEach(function(e) {
    children[e.id] = [];
});

a.forEach(function(e) {
    if (e.pid === 0) {
        root = e;
    }
    else {
        children[e.pid].push(e);
    }
});

var sorted = [];

function preorder(e) {
    sorted.push(e);
    if (children.hasOwnProperty(e.id)) {
        children[e.id].forEach(preorder);
    }
}
preorder(root); 
```

结果：

```
[
  {"id":1,"pid":0},
    {"id":2,"pid":1},
    {"id":4,"pid":2},
      {"id":5,"pid":2},
    {"id":3,"pid":1},
      {"id":6,"pid":3},
      {"id":7,"pid":3}
] 
```

# android - android将html sting传递给不同的活动

> ID：16166686
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:13.677
> 
> 标签：android, android-intent

我想在 2 个活动之间传递 html 数据。我知道我只是传递对象值，而不是在第二个活动中管理这个对象之后，因为我从堆栈和其他博客中获得了解决方案

 `````
 Pages objPages= list.get(position);
    Intent intent = new Intent(getBaseContext(), PagesContentActivity.class);
    intent.putExtra("Content",  objPages); 
```` 

`但我无法成功传递对象值。有什么错误吗？我有静态变量的想法，但我不希望这是解决方案。传递对象值还有其他解决方案吗？当我尝试传递对象值时出现问题**“Intent 类型中的 putExtra(String, boolean) 方法不适用于参数 (String, Pages)”**`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:15:38.540

在发送活动中 使用[Html.fromHtml](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)在接收活动中使用[Html.toHtml](http://developer.android.com/reference/android/text/Html.html#toHtml%28android.text.Spanned%29)``

# plone - 添加软件包后，克隆站点将无法加载

> ID：16166687
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:14.270
> 
> 标签：plone

在我们公司，我们有一个基于 Plone 4.1.4 的 plone 站点来存放质量文档。我们有一份本网站的副本用于测试目的。

在这个副本中，我想制作一个名为“company.contents”的包来容纳灵巧的内容。我按照以下步骤执行此操作：

首先，我使用 ZopeSkel (2.21.2) 创建了包的骨架：zopeskel plone company.contents

接下来我更改了 setup.py 和 configure.zcml（我按照 Dexterity Developer Manual 中的说明进行操作）

然后我改了buildout.cfg：（在eggs、develop、zcml和sources部分添加包）

```
…

eggs =  
PIL  
Products.CMFPlone  
plone.app.iterate  
Products.CMFEditions  
Products.CMFDiffTool  
plone.app.openid  
Products.CMFPlacefulWorkflow  
plone.app.dexterity  
collective.wtf  
plone.app.versioningbehavior  
collective.cmfeditionsdexteritycompat  
collective.dexteritydiff  
Products.PermissionComprehensible  
plone.app.workflowmanager  
plone.app.stagingbehavior  
webcouturier.dropdownmenu  
Products.TinyMCE  
Products.kupu  
collective.uploadify  
company.contents  
company.addsharing

develop =  
c:\plone41\src\company.addsharing  
c:\plone41\src\company.contents

zcml =  
company.addsharing  
company.contents

…

[sources]  
company.addsharing= fs company.addsharing  
company.contents= fs company.contents

… 
```

该包在 instance-script.py 中被引用

但是，问题是该站点不会加载此包。如果我从 buildout.cfg 中删除包引用，则该站点可以正常工作。

有人知道出了什么问题吗？

# jquery - 使用 :nth-child 根据元素位置更改变量值

> ID：16166692
> 
> 赞同：1
> 
> 时间：2013-04-23T10:11:25.737
> 
> 标签：jquery, absolute, dynamic-variables

我需要能够有一个变量来标识 的位置`li`，使用`.index()`然后根据每个人的变量编号为其分配一个值`li`。

这听起来可能有点令人困惑，所以我写了一个[jsfiddle](http://jsfiddle.net/TWCZq/)来更好地解释它。有 3 个`li`，当我单击一个按钮/链接时，我需要它们根据它们的`:nth-child`位置展开，使用`position: absolute`. 但是，我目前遇到的问题是变量 ( `itemNumber`) 是相同的，并且对于每个`li`.

这是我的代码：

```
<ul>
    <li>Lorem Ipsum 1</li>
    <li>Lorem Ipsum 2</li>
    <li>Lorem Ipsum 3</li>
</ul>
<a href="#">Click me</a> 
```

和JS：

```
var itemNumber = $("ul li").index() + 1;

 $("a").click(function () {
     $("ul").toggleClass("expanded");
     $("ul li").each(function () {
         $("ul li:nth-child(" + itemNumber + "n)").css("top", itemNumber * 30 + "px");
     });
 }); 
```

我很乐意解释它，因为这个想法有点令人困惑。基本前提是，我需要`itemNumber`为 each 改变变量`li`，并且可以有任意数量的`li`s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:13:07.073

你可以试试这个——

```
$("ul li").each(function (index,element) {
         $("ul li:nth-child(" + index + "n)").css("top", index * 30 + "px");
}); 
```

或更好

```
$("ul li").each(function (index,element) {
         $(this).css("top", index * 30 + "px");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:14:31.323

改用`.eq`：

```
var itemNumber = $("ul li").index(); // eq is 0 based index

$("ul li").each(function (i, v) {
         $("ul li").eq(itemNumber).css("top", (itemNumber + 1) * 30 + "px");
     }); 
```

# foursquare - Foursquare & apigee：在场地搜索中加入点赞

> ID：16166694
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:28.417
> 
> 标签：foursquare

我正在使用 Apigee 获取一些四方数据。不幸的是，使用此查询：

[https://api.foursquare.com/v2/venues/search?ll=48.137743,11.579949](https://api.foursquare.com/v2/venues/search?ll=48.137743,11.579949)

类似的引用（如“10 个人中有 9 个喜欢这个地方”）

未纳入。我已经尝试在查询中插入 &likes，但我没有到达那里。

有人回答吗？我需要喜欢的 50 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:30:58.000

像计数不是 Foursquare 在搜索或探索结果中公开的东西。但是，一旦您有了要检索喜欢的场所，您可以再次请求[场所/喜欢](https://developer.foursquare.com/docs/venues/likes)或[场所详细信息](https://developer.foursquare.com/docs/venues/venues)以检索喜欢的计数。如果您发出许多请求，请考虑使用[多](https://developer.foursquare.com/docs/multi/multi)请求。

# javascript - 可以在mailto表单提交上设置回调函数吗？

> ID：16166697
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:29.013
> 
> 标签：javascript, jquery, forms, callback, mailto

我想提交一个`mailto`表单并将回调附加到表单提交。

这就是我正在做的事情：

```
$(document).on('click', '#mail_trigger', function (e) {
    // client form
    var form = $(this).closest('form'),
        first = "info",
        last = "some.com"
        mailto = "mailto:"+first+"@"+last+"?",
        subject = "subject=Website enquiry&",
        message = "body="+$('#msg_comment').val(),
        bcc = $('#msg_cc').is(':checked') ? "bcc=" + form.find('#msg_address').val() + "&" : "";

    // actual form to send (to prevent form inputs ending up in message)
    $(".actual_mailer").attr("action",mailto+bcc+subject+message).submit();
    $.mobile.changePage("thanks.html", {"transitions":"slide"});
}); 
```

我想将`$.mobile.changePage...`调用添加到回调函数，但尝试这样做：

```
$(".actual_mailer").attr("action",mailto+bcc+subject+message).submit(
    function(){
        $.mobile.changePage("thanks.html", {"transitions":"slide"});
}); 
```

中断页面而不在控制台中显示错误。

**问题：**是否可以在表单提交
中添加回调函数。`mailto`如果是这样，我会怎么做？

谢谢！

# sql - SQL Server 2008 - 根据另一个表中的值执行更新

> ID：16166701
> 
> 赞同：1
> 
> 时间：2013-04-23T10:11:32.497
> 
> 标签：sql, sql-server-2008

我的一个 SQL 请求确实存在阻塞问题。我的问题如下：我有一个包含一些用户及其姓名、地址、电话号码的第一个表（一个临时表）......我有一个包含有关某些命令的信息的第二个表（一个“真实”表） . 命令与用户相关，但有点复杂。为了更清楚起见，这里是我的表格定义的示例：

```
USER
ID          char(8)
LastName    nvarchar(30)
FirstName   nvarchar(30)
PostCode    nvarchar(10)
PhoneNumber nvarchar(20)
HomeAdress  nvarchar(20)

COMMAND
ID            char(6)
CMD_FirstName nvarchar(20)
CMD_LastName  nvarchar(20)
CMD_PostCode  nvarchar(10)
ID_User       char(8) 
```

这两个表在逻辑上是相关的，但在实践中却没有……在COMMAND表中，通常缺少“ID_User”字段。我的 SQL resquest 的目的是通过填充 ID_User 字段在所有命令和相应用户之间建立关联。对于 ID_User 为空或为空的每个命令，我想通过匹配字段姓氏、名字和邮政编码来检索用户。如果这个匹配是严格的（在 USER 表中没有 doublon，这很重要），我可以填写 ID_User 字段。

你能帮我解决这个大而复杂的请求吗？提前，谢谢！

PS：我使用的是 Microsoft SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:18:14.340

```
update c
set id_user = u.ID
from [user] u
join [command] c on c.cmd_firstname = u.firstname
                and c.cmd_lastname = u.lastname
                and c.cmd_postcode = u.postcode; 
```

要排除匹配多个 的 firstname/lastname/postcode 组合`user`，您可以预先聚合`user`表并将其过滤掉。

```
update c
set id_user = u.ID
from [command] c
join (select firstname, lastname, postcode, min(ID) ID
        from [user]
       group by firstname, lastname, postcode
      having count(*) = 1) u
   on c.cmd_firstname = u.firstname
  and c.cmd_lastname = u.lastname
  and c.cmd_postcode = u.postcode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:24:41.127

您需要确保 [USER] 和 [COMMAND] 都不包含您要用于映射它们的字段的重复记录。这包含相关查询，对于大型表可能不是很有效。

```
update [command]
set ID_User = u.id
from [USER] u
join COMMAND c
    on u.LastName=c.CMD_LastName
    and u.FirstName = c.CMD_FirstName
    and u.PostCode = c.CMD_PostCode
where 1=1
    and not exists (
        select 
            LastName, FirstName, PostCode
        from [user]
        where 1=1
            and LastName=u.LastName
            and FirstName=u.FirstName
            and PostCode=u.PostCode
        group by 
            LastName, FirstName, PostCode
        having count(*)>1 
    )
    and not exists (
        select 
            CMD_LastName, CMD_FirstName, CMD_PostCode
        from COMMAND
        where 1=1
            and CMD_FirstName=c.CMD_FirstName
            and CMD_LastName=c.CMD_LastName
            and CMD_PostCode=c.CMD_PostCode
        group by 
            CMD_LastName, CMD_FirstName, CMD_PostCode
        having count(*)>1 
    ) 
```

# android - OnClick 在 RelativeLayout 中不起作用

> ID：16166702
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:43.013
> 
> 标签：android

在我的应用程序相关布局 setOnClickListener 不起作用我无法找出这里的问题。这是我的 main.xml

```
<LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/profile_relative"
            android:layout_marginTop="1dp"
            android:id="@+id/profile_linear">

        <RelativeLayout
                android:id="@+id/profile_postButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginLeft="1dp">

            <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_post_btn"
                    android:layout_centerInParent="true"
                    android:background="@drawable/post_selector_t"/>

            <TextView
                    android:id="@+id/profile_post_text"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp"
                    android:layout_centerInParent="true"
                    android:text="189"
                    android:textSize="14sp"/>
        </RelativeLayout>

        <RelativeLayout
                android:id="@+id/profile_gradeButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginLeft="1dp">

            <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_likes_btn"
                    android:layout_centerInParent="true"
                    android:background="@drawable/likes_selector_t"/>

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_likes_text"
                    android:layout_marginTop="20dp"
                    android:layout_centerInParent="true"
                    android:text="597"
                    android:textSize="14sp"/>
        </RelativeLayout>

        <RelativeLayout
                android:id="@+id/profile_subscriptionButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginLeft="1dp">

            <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_signed_on_btn"
                    android:layout_centerInParent="true"
                    android:background="@drawable/signed_on_selector_t"/>

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_signed_on_text"
                    android:layout_marginTop="20dp"
                    android:layout_centerInParent="true"
                    android:text="85"
                    android:textSize="14sp"/>
        </RelativeLayout>

        <RelativeLayout
                android:id="@+id/profile_subsribersButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginLeft="1dp">

            <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_followers_btn"
                    android:layout_centerInParent="true"
                    android:background="@drawable/followers_selector_t"/>

            <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/profile_followers_text"
                    android:layout_marginTop="20dp"
                    android:layout_centerInParent="true"
                    android:text="118"
                    android:textSize="14sp"/>
        </RelativeLayout>
    </LinearLayout> 
```

这是我的片段

```
 @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.profile, container, false);

            view.findViewById(R.id.profile_postButton).setOnClickListener(this);
            view.findViewById(R.id.profile_gradeButton).setOnClickListener(this);
            view.findViewById(R.id.profile_subsribersButton).setOnClickListener(this);
            view.findViewById(R.id.profile_subscriptionButton).setOnClickListener(this);
  }  
    @Override
        public void onClick(View v) {
            switch (v.getId()){
                case R.id.profile_postButton:
                    System.out.println("AA");

                    break;
                case R.id.profile_gradeButton:
                    System.out.println("GG");

                    break;
                case R.id.profile_subscriptionButton:
                    System.out.println("EE");

                    break;
                case R.id.profile_subsribersButton:
                    System.out.println("DD");

                    break;
            }
        } 
```

知道我在这里想念什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:17:47.997

我认为您必须将`onClick`块代码移出`onCreate`

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.profile, container, false);

        view.findViewById(R.id.profile_postButton).setOnClickListener(this);
        view.findViewById(R.id.profile_gradeButton).setOnClickListener(this);
        view.findViewById(R.id.profile_subsribersButton).setOnClickListener(this);
        view.findViewById(R.id.profile_subscriptionButton).setOnClickListener(this);
} 

@Override
public void onClick(View v) {
    switch (v.getId()){
        case R.id.profile_postButton:
            System.out.println("AA");

            break;
        case R.id.profile_gradeButton:
            System.out.println("GG");

            break;
        case R.id.profile_subscriptionButton:
            System.out.println("EE");

            break;
        case R.id.profile_subsribersButton:
            System.out.println("DD");

            break;
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-23T10:15:50.500

在 XML 处添加：

```
android:onClick="onClick"; 
```

到每个按钮。

# c# - 如果项目已经在数据库中，请在视图中执行不同的 ActionResult - ASP.NET MVC4 EF5 HTML5

> ID：16166705
> 
> 赞同：0
> 
> 时间：2013-04-23T10:11:50.277
> 
> 标签：c#, html, asp.net-mvc-4, view, entity-framework-5

假设我要转到“Item”的简单 Index() 视图。我在该索引视图中有一个操作结果，它添加到数据库中（这将是一个在模型中具有项目库的客户）。如果客户已经在数据库中拥有该选择的项目，我希望 ActionLink 显示类似

```
@Html.ActionLink("Remove from Library", "RemoveFromLibrary", new {id=item.Id}) 
```

客户模型

```
public List<LoanedItem> Library { get; set; } 
```

项目索引视图

```
@Html.ActionLink("Add To Library", "AddToItems", new {id=item.Id}) 
```

我将如何以最简单的方式解决这个问题？（我是新手）

谢谢

**PS。在现实场景中，它就像一个 ebay 监视列表。如果某个项目已在关注列表中，则显示要从该项目的关注列表中删除的文本**

编辑：

我不确定是在控制器还是视图本身中编写代码，但是对于视图，我尝试添加以下内容并卡住了

```
public ActionResult Index()
    {
        Customer c = (Customer)Session["customer"];
        var items = ItemRepository.GetItems().OfType<Item>();
        var itemsLoanedToCustomer = customerRepository.GetItems(c.Id);
        foreach (Item i in items)
        {
            if (itemsLoanedToCustomer.Contains(i))
            {

            }
        }
        return View();
    } 
```

完整索引（）视图

```
 @model IEnumerable<MMC.Model.Item>

@{
    ViewBag.Title = "Index";
}

<h2>Tracks</h2>

<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Artist)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Genre)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DailyLoanPrice)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Publisher)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ReleaseDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.YearOfPublication)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Artist)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Genre)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DailyLoanPrice)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Publisher)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReleaseDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Title)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.YearOfPublication)
        </td>
        <td>
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Add To Library", "AddToTracks", new {id=item.Id})

        </td>
    </tr>
}

</table> 
```

客户模型

```
 public class Customer
{

    public int Id { get; set; }
    public string ForeName { get; set; }
    public string SurName { get; set; }
    public Address address { get; set; }
    public string Email { get; set; }
    public string Telephone { get; set; }
    public string Mobile { get; set; }
    public List<LoanedItem> MediaLibrary { get; set; }
    public Bill balance { get; set; }

    public Customer()
    {
        if (Library == null)
        {
            Library = new List<LoanedItem>();
        }
    }
} 
```

项目型号

```
 public class Item
{
    public int Id { get; set; }
    public double DailyLoanPrice { get; set; }

    [DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]
    public DateTime LastTimeBorrowed { get; set; }
    public int NumberOfTimeBorrowed { get; set; }
    public string Publisher { get; set; }
    //rating
    [DisplayFormat(DataFormatString = "{0:yyyy/MM/dd}", ApplyFormatInEditMode = true)]
    public DateTime ReleaseDate { get; set; }
    public string Title { get; set; }
    public double TotalSalesIncome { get; set; }
    public int YearOfPublication { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:27:22.677

您从哪里获得要显示操作链接的 LibraryItems 列表？如果它们在您的模型中，那么；

在视图中检查用户是否已经拥有该项目并相应地显示操作链接。

```
@(if(Model.Customers.Items.Select(x => x.Id).Intersect(Model.Items.Select(x => x.Id)).Any())
{
    Html.ActionLink("Remove from Library", "RemoveFromLibrary", new {id=item.Id});
}
else
{
    Html.ActionLink("Add To Library", "AddToItems", new {id=item.Id});
}) 
```

此外，如果您使用的是 EF，您可以执行类似的操作

```
public ActionResult Index()
{
    Customer c = (Customer)Session["customer"];

    // Items is the navigation property.
    var customerItems = customerRepository.GetItems(c.Id).Items;

    return View();
} 
```

使用以下 ViewModel

```
public class CustomerItem
{
    public List<Item> Items;
    public List<Customer> Customers;

    public CustomerItem()
    {
        Items = new List<Items>();
        Customers = new List<Items>();
    }
} 
```

# android - android设备imei传递给另一个类

> ID：16166709
> 
> 赞同：-3
> 
> 时间：2013-04-23T10:12:08.923
> 
> 标签：android

我想传递 android 设备 ID 或 imei 号码，但是当我从一个类传递到另一个类时，应用程序崩溃。但是当我在同一个班级打电话时它工作正常请帮助我是android的新手。

```
package com.example.deviceid;

 import android.app.Activity;
 import android.content.Context;
 import android.os.Bundle;
 import android.provider.Settings.Secure;
 import android.telephony.TelephonyManager;
 import android.widget.Toast;

public class GetId extends Activity {
String deviceId;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

public String AndroidId(){
    TelephonyManager telephonyManager =   (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    String imei=telephonyManager.getDeviceId();
    return imei;
  }

} 
```

这是我称为imei号码的主要课程。

```
 package com.example.deviceid;

  import android.app.Activity;
  import android.content.Context;
  import android.os.Bundle;

  import android.telephony.TelephonyManager;
  import android.widget.Toast;

  public class ShowDeviceInfo extends Activity {
     GetId gi;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   setContentView(R.layout.main);
  gi = new GetId();
  String imei = gi.AndroidId();
  Toast.makeText(this, imei, Toast.LENGTH_SHORT).show();

}
} 
```

XML 文件

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.deviceid.ShowDeviceInfo"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.deviceid.GetId"
        android:label="@string/app_name" >

    </activity>
  </application>
 <uses-permission android:name="android.permission.READ_PHONE_STATE" />
 </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:18:27.767

在您的第一个活动中，您尚未设置内容

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main); // missing this statement
} 
```

您没有导航到第二个活动。您不会在第一个活动中调用 AndroidId()。

您可以使用意图在活动之间传递值。

在你的第一个活动中

```
 Intent i= new Intent(MainActivity.this,SecondActivity.class);
   i.putExtra("imeid",imei);// key value
   startActivity(i); 
```

在第二个活动

```
 Bundle extras= getIntent().getExtras();
   if(extras!=null)
   {
       String IMEI= extras.getString("imeid");// retrieve using key
   } 
```

编辑：

不知道为什么要将imei传递给另一个班级。您可以在 mainactivity 中获取 imei 号并使用它。

请阅读活动生命周期

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginBottom="66dp"
    android:layout_marginRight="35dp"
    android:text="Button" />

    </RelativeLayout> 
```

主要活动

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b= (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            TelephonyManager telephonyManager =   (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
            String imei=telephonyManager.getDeviceId(); 
            Intent i= new Intent(MainActivity.this,SecondActivity.class);
            i.putExtra("key",imei);
            startActivity(i);
        }

    });
}

  } 
```

第二个.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />

</LinearLayout> 
```

第二活动

```
 public class SecondActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    Bundle extras = getIntent().getExtras();
    if(extras!=null)
    {
        TextView tv= (TextView) findViewById(R.id.textView1);
        tv.setText(extras.getString("key").toString());
    }
}
} 
```

清单.xml

```
 <activity
        android:name="com.example.testintent.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".SecondActivity"
        android:label="@string/app_name" >
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:40:04.357

//你只在getid类中实现getid mtd。所以不需要扩展活动。//getid类

```
public class GetId{
String deviceId;
public String AndroidId(){
    TelephonyManager telephonyManager =   (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    String imei=telephonyManager.getDeviceId();
    return imei;
  }
} 
```

//主要活动

```
public class ShowDeviceInfo extends Activity {
     GetId gi;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   setContentView(R.layout.main);
    gi = new GetId();
    String imei = gi.AndroidId();
   Toast.makeText(this, imei, Toast.LENGTH_SHORT).show();

} 
```

}

//manifest.xml

```
<activity
        android:name="com.example.deviceid.ShowDeviceInfo"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

# git - git 如何将当前分支推送到另一个远程/源？

> ID：16166713
> 
> 赞同：24
> 
> 时间：2013-04-23T10:12:33.463
> 
> 标签：git

我的 .git/config：

```
[remote "origin"]
    url = git@github.com:nfpyfzyf/test.git
    fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

我当地的分支机构：

```
 HEAD
                     |
                 F---G  feature**current branch
                /
       C---D---E develop
      /          
 A---B  master 
```

我现在在功能分支中，并且想推送到远程。当前命令是什么，是`git push origin feature`吗？如果我这样做会发生什么`git push`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-10-30T15:52:19.037

要推送特定分支，请运行`git push <remote> <branch>`. 在您的情况下，您唯一定义的遥控器是`origin`，并且您想推送您的`feature`分支，这样就可以

```
$ git push origin 功能
```

[文档](https://www.kernel.org/pub/software/scm/git/docs/git-push.html#_examples)的[“示例”部分`git push`](https://www.kernel.org/pub/software/scm/git/docs/git-push.html#_examples)描述了如果您在`git push`没有其他参数的情况下运行会发生什么。

> `git push`
> 
> 像 一样`git push <remote>`，当前分支的远程在哪里（或者`origin`，如果当前分支没有配置远程）。

鉴于您问题中的配置，您的`feature`分支没有配置远程，因此上述调用等效于下一个示例。

> `git push origin`
> 
> 没有额外的配置，就像`git push origin :`……</p>

按照菊花链，我们看到这相当于

> `git push origin :`
> 
> 将“匹配”的分支推送到原点。有关“匹配”分支的描述，请参见上面的[选项部分。](https://www.kernel.org/pub/software/scm/git/docs/git-push.html#OPTIONS)

匹配分支的规则是

> 特殊的 refspec `:`（或`+:`允许非快进更新）指示`git`推送“匹配”分支：对于本地端存在的每个分支，如果远程端已经存在同名分支，则更新远程端. 如果没有找到明确的 refspec（既不在命令行上，也不在相应远程文件的任何 Push 行中——见下文）并且没有`push.default`设置配置变量，这是默认操作模式。

在您的情况下，唯一匹配的分支是`master`, 因此`git push`将推送该分支并退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:14:37.740

是`git push origin feature`的，是正确而明确的命令。

当你`git push`没有参数时会发生什么受你的配置影响。配置变量`push.default`告诉 git 在这种情况下要做什么。查看手册页（`git config --help`并搜索`push.default`）以获取更多信息。就这么多，有几种可能性：`nothing`、`matching`、`upstream`和。`simple``current`

另外[git push.default=current 和 push.default=upstream 有什么区别？](https://stackoverflow.com/questions/11872984/what-is-the-difference-between-git-push-default-current-and-push-default-upstrea)可以帮忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:14:53.297

`git push origin feature`是正确的。如果你这样做，`git push`它可能会说这样的话：

```
fatal: The current branch feature has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin feature 
```

在你使用`--set-upstream`（或只是-u）之后，简单的`git push`就可以了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:15:03.183

如果您正在使用[git-flow](http://nvie.com/posts/a-successful-git-branching-model/)，您可以使用

```
git flow feature publish $FEATURE 
```

将分支推送到您的远程并远程创建它。

相当于做一个简单的

```
git push origin $FEATURE 
```

如果您只是在做`git push`这取决于您的配置会发生什么 - 在我的配置中，它会推送所有远程现有的分支。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:50:42.900

`git push origin $FEATURE`肯定是正确的，并且会得到你想要的。但是，我经常使用：

```
git push -u origin HEAD 
```

这将使用分支名称推送我当前的分支，因此我不必在命令行上显式输入它。如其他答案之一所述，`-u`将设置上游，以便`git push`将来可以使用平原。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-23T03:36:51.437

我认为这是可能的方法，

```
git push --set-upstream origin refs/heads/[your_local_branch_name]:refs/heads/[remote_branch_name_you_want] 
```

# php - 让脚本的一部分一个接一个地运行

> ID：16166715
> 
> 赞同：0
> 
> 时间：2013-04-23T10:12:40.727
> 
> 标签：php

我有个问题。我有一个脚本，在 N 时间后将文件发送到电子邮件（从 crontab 执行）问题是，我尝试从 maillog 输出到 mysql。

这是一个脚本

```
#!/usr/bin/php
<?php
date_default_timezone_set("Europe/Chisinau");
$faxdir = '/var/spool/fax/';
$dir = opendir("/var/spool/fax/");
while(($file = readdir($dir)) !== false){
if (($file != ".") && ($file != "..")){
    $mytime = date('d-m-Y H:i:s');
    $sendfile = $file;
    $findcaller = explode('_', $file);
    $findcaller = explode('-', $file);
    $findsrc = shell_exec('echo "'.$findcaller[0].'" | sed "s/[^_]*\_//"');
    $findsrc = str_replace(array("\r","\n"),"",$findsrc);
    $caller = shell_exec('echo "'.$findcaller[1].'" | sed "s/[^_]*\_//"');
    $cutbillid = shell_exec('echo "'.$file.'" | sed "s/[^_]*\_//"');
    $findnumber = shell_exec('echo "'.$cutbillid.'" | sed "s/[^-]*\-//"');
    $findnumber=str_replace(array("\r","\n"),"",$findnumber);
    $key = '.TIF';
    $number=preg_replace('/'.$key.'.*/','',$findnumber);
    $showstatus = shell_exec('/usr/sbin/lsof | grep "'.$faxdir.'"*"'.$number.'"');

    if ($showstatus <> ""){
        exit(0);
    }else{
        $db_link = mysql_connect("localhost", "root", "") 
            or die("Could not connect: " . mysql_error());
        mysql_select_db("centrexdb");
        $query = mysql_query("SELECT `fax2email` FROM users WHERE username='".$number."' AND faxstatus='1'");
        $fax2email = mysql_fetch_array($query);
        if ($fax2email[0] == ''){
            $currdate = shell_exec('echo "'. date('Y-m-d_H:i:s') .'"');
    $noemail = shell_exec('mv /var/spool/fax/"'.$file.'" /var/spool/fax-nomail/"'.$currdate.'"--"'.$file.'"');
        } else {
            $findcaller = explode('_', $file);
            $findcaller = explode('-', $file);
            $caller = shell_exec('echo "'.$findcaller[1].'" | sed "s/[^_]*\_//"');
            $caller=str_replace(array("\r","\n"),"",$caller);
$sendmail = shell_exec('echo | mutt -a "'.$faxdir.'""'.$sendfile.'" -s "Fax From '.$findsrc.' to '.$number.'" "'.$fax2email[0].'"');
echo "executing";
        unlink(''.$faxdir.''.$sendfile.'');
        }
        mysql_close($db_link);
    }
}
sleep(45);
$dbnew = mysql_connect("localhost", "root", "")
or die("Could not connect: " . mysql_error());
mysql_select_db("FAX");
$myresult=shell_exec('cat /var/log/maillog |grep "to=<'.$fax2email[0].'>" |tail -n1');
echo $myresult;
$currentdate = shell_exec('echo "'. date('Y-m-d_H:i:s') .'"');
$umail = $fax2email[0];
mysql_query("INSERT into faxlog (Date, UserNumber, SourceNumber, UsedEmail, MailLog)     VALUES('$mytime', '$number', '$findsrc',
'$umail', '$myresult')");
mysql_close($dbnew);
sleep(5);
}

exit(0);
?> 
```

问题是，如果文件夹中有多个文件，则第一个文件脚本会从日志过去的值返回，因为日志需要一段时间才能写入。我完成了 tail -f /var/log/maillog ，我发现邮件命令在 45 秒延迟后执行。据我了解，我需要运行带有文件发送的主块，并在延迟后（要写入日志）获取日志内容。那么我该怎么做呢？

# asp.net - 无法打开使用 asp .net 应用程序下载的 .xls 文件

> ID：16166724
> 
> 赞同：0
> 
> 时间：2013-04-23T10:13:04.417
> 
> 标签：asp.net, download, webforms, ms-office, xls

我创建了一个 asp .net Web 应用程序，它从数据库中读取数据，将检索到的数据存储在 Excel 表中并下载 excel 表。所有这一切都发生在一个按钮单击中。所有这些步骤都可以正常工作，我可以下载 .xls 文件。当我尝试使用 MSExcel 2007 打开此文件时，我收到以下警告消息。![在此处输入图像描述](https://i.stack.imgur.com/f5zdk.png)

如果我单击是，我将能够打开此文件。但是，我不希望我的用户每次打开文件时都这样做。有人能告诉我如何避免这个警告信息吗？以下是我的源代码。

```
 using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["EMS_SMSConnectionString"].ToString()))
            {
                con.Open();
                SqlCommand cmd = new SqlCommand("select * from accessories", con);
                // cmd.Parameters.AddWithValue("id", GridView1.SelectedRow.Cells[1].Text);
                SqlDataReader dr = cmd.ExecuteReader();

                if (dr.Read())
                {
                    Response.Clear();
                    Response.Buffer = true;
                    Response.ContentType = "application/vnd.ms-excel";
                    // to open file prompt Box open or Save file
                    Response.AddHeader("content-disposition", "attachment;filename=mridul.xls");

                    Response.Charset = "";
                    System.Text.Encoding enc = System.Text.Encoding.ASCII;
                    Response.Cache.SetCacheability(HttpCacheability.NoCache);
                    byte[] myByteArray = enc.GetBytes(dr["AccessoriesName"].ToString());
                    Response.BinaryWrite(myByteArray);
                    Response.End();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:16:49.250

您将不得不使用使用 Microsoft 的 OOXML SDK：请参阅[http://msdn.microsoft.com/en-us/library/bb448854.aspx](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。

编辑：参考 MSDN 文章解释它：http: [//blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)

# asp.net-mvc - 我可以将值分配给 View 中的 viewbag 元素并在控制器中使用它吗？

> ID：16166731
> 
> 赞同：4
> 
> 时间：2013-04-23T10:13:28.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我正在开发 MVC 应用程序。

我使用 viewbag 将值从控制器传递到视图，在 View 中我对来自 viewbag 的数据进行了一些更改。完成更改后，我想将更改后的数据发送回控制器。

所以我有一个查询，我可以将值分配给 View 中的 ViewBag 元素，我可以在控制器中使用这些值吗？

（数据来自，控制器 -> 视图 -> 控制器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:17:22.717

你**真的**应该使用模型来做这样的事情。这就是它的用途之一！另外，这是最佳实践。

考虑一下：

```
public class MyModel
{
    public string Value { get; set; }
} 
```

然后这是您的`HttpGet`操作：

```
[HttpGet]
public MyAction()
{
    MyModel model = new MyModel();

    return View(model);
} 
```

那么在你看来：

```
@model MyModel

@using(Html.BeginForm())
{
    @Html.LabelFor(m => m.Value)
    @Html.EditorFor(m => m.Value)
    <input type="submit" value="Save" />
} 
```

那么你的`HttpPost`行动将是：

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    //model.Value is the value you typed in
} 
```

**编辑：正如评论中所建议的，您可以为下拉列表值执行以下操作：**

鉴于此模型：

```
public class MyModel
{
    public int SelectedId { get; set; }
    public List<SelectListItem> Selections { get; set; }
} 
```

您可以按照自己的方式填充它`HttpGet`：

```
[HttpGet]
public MyAction()
{
    MyModel model = new MyModel();

    model.Selections = db.Values //replace with your db table
        .Select(v => new SelectListItem
            {
                Text = v.Name //value to go in your text field
                Value = v.Id.ToString() //value to go in your ID field
            })
        .ToList();   

    return View(model);
} 
```

然后在您看来，您可以执行以下操作：

```
@model MyModel

@using(Html.BeginForm())
{
    @Html.LabelFor(m => m.SelectedId)
    @Html.DropDownListFor(m => m.SelectedId, Model.Selections)
    <input type="submit" value="Save" />
} 
```

然后这是你的`HttpPost`：

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    //model.SelectedId is the value you selected
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:16:37.237

这并不是真正的`ViewBag`设计目的 - 它实际上就是名称，它应该只包含用于将信息**从控制器传递到***视图的特定*于视图的数据（而不是相反）。

 **将信息从视图传递到控制器的首选方式是通过`POST`对特定操作的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:18:00.750

您可以，但这样做不是最佳做法。视图主要用于向用户显示内容，用户所做的任何更改都应发送回控制器并在您的 ViewModel 中处理。

`ViewBag`主要用于将数据从控制器传递到视图，反之亦然。

从您的评论中：

查看此条目，它将帮助您了解如何将数据传回控制器并更新数据库：

[http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T18:13:43.157

据我所知，答案是否`ViewBag`。只能在服务器端处理。ViewBag 不能用于从渲染视图将数据发送回控制器。由于视图由视图引擎（服务器端）处理，然后将其呈现为 html，然后发送到浏览器（客户端）。现在您的选择是在客户端而不是服务器端进行的。因此，您需要编写一些 javascript（客户端代码）并将更改发送回服务器。**

# php - 递归扫描使用 PHP 的 Windows FTP 服务器中途挂起......为什么？

> ID：16166732
> 
> 赞同：0
> 
> 时间：2013-04-23T10:13:30.090
> 
> 标签：php, recursion, ftp

我需要使用 PHP 映射一个 FTP 服务器（在 Windows 上运行），所以我创建了一个函数，该函数本质上是浏览 FTP 的文件夹结构，列出其中的所有内容，并在遇到子文件夹时递归调用自身。

在我的开发环境中一切正常，但一旦我将所有内容迁移到客户的基础设施，事情就发生了转折。他们的 FTP 服务器拥有 30GB 的数据（很多文件，但没有你想象的那么多，因为很多都大于 100MB），所以我预计它会“慢”，但 90 到 120 秒似乎很多。

因此，我对 tcpdump 进行了一些调查，很明显 FTP 服务器具有某种**防洪保护**，因为在给定的时间点，每个请求都会停滞至少 60 秒。如果我尝试**使用 lftp递归地映射服务器，****也会发生**这种行为。

 **我目前正在使用主动模式，因为被动引发了以下错误：

```
Warning: ftp_rawlist() [function.ftp-rawlist]: php_connect_nonb() failed: Operation now in progress (115) in /home/user/public_html/sync.php on line 35 
```

第 35 行引用当前目录的 ftp_rawlist。

我不确定它会有所帮助，但这是我正在使用的代码：

```
function ftp_get_recursive_paths($conn, $path, $root, $max_level = 0) {
    $files = array();
    $contents = ftp_rawlist($conn, $path);

    if(is_array($contents)) {
        foreach($contents as $line) {
            (...) Parsing the results (...)
            if ((strpos($f, ".DS_Store") === false) && (strpos($f, ".dropbox") === false) && (strpos($f, "Thumbs.db") === false)) {

                if(!strpos($f, '.')) {
                    $init = microtime(true);
                    $files[$f] = (object) array('name' => $f, 'date' => $date, 'path' => $path . $f, 'content' => ftp_get_recursive_paths($conn, $path . $f, $path));
                    $end = microtime(true);
                    echo '<p> Folder ' . $path . $f . ' scanned in '. ($end - $init), ' seconds. </p>';
                }
                else {
                    $files[] = (object) array('name' => $f, 'date' => $date, 'path' => $path .  $f);
                }
            }
        }
    }

    return $files;
} 
```

有谁知道如何防止这种防洪的事情？是防火墙吗？客户端服务器中的某种配置？

我可以确认客户端在 Windows 上使用 Filezilla Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T15:42:20.337

最后，客户端确实有某种防火墙，可以在某个阈值之后阻止请求。

TL;DR：每个人都在撒谎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:01:54.190

同样在本地使用时（连接到与 .php 在同一服务器上的 ftp）如果您使用“sftp”它会工作，但远程您必须使用“ftp”或配置好远程客户端**

# jquery - jQuery noUiSlider 和钱数格式

> ID：16166735
> 
> 赞同：0
> 
> 时间：2013-04-23T10:13:37.060
> 
> 标签：jquery, number-formatting

如果您查看以下 jsFiddle，[http://jsfiddle.net/9ZSej/3/](http://jsfiddle.net/9ZSej/3/)，您会看到我有一个使用[noUiSlider](http://refreshless.com/nouislider/)的范围滑块，这一切都很好。

我唯一的问题是将绿色框中的数字格式化为货币/货币格式。我已经尝试了几个 jQuery 插件，但似乎没有任何效果。

请问我如何将绿框号码格式化为货币/货币格式？

[http://jsfiddle.net/9ZSej/3/](http://jsfiddle.net/9ZSej/3/)

jQuery代码：

```
 $(".noUiSlider").noUiSlider({ 
        range: [0,5000000],
        start: 500000,
        handles: 1,
        connect: "lower",
        step: 10000,
        serialization: {
            to: ["how-much", $("input")],
            resolution: 1
        }
        ,slide: function(){
            var values = $(this).val();
            $("span.infoBox").text(
            '£' + values
            );
        }
    });                                             
    $('.noUiSlider div').append('<span class="infoBox">&pound;500,000</span>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:17:23.497

您可以编写一个函数，该函数接受输入并使用您自己的算法输出它的货币表示......或者我确信已经编写了货币显示函数。

此链接似乎处理您的格式问题

[关联](https://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-money-in-javascript)

# php - Jquery / PHP 根据连接的 [输入值和列名] 在输入中插入值。jquery 1.9.1 或 php

> ID：16166741
> 
> 赞同：1
> 
> 时间：2013-04-23T10:14:02.687
> 
> 标签：php, jquery

我有下表：

```
<table class="authors-list" border=0 id="ordertable">
  <tr>
     <td ><input type="text" id="product_1" name="product_1" class="rounded"/></td>
     <td ><input type="text" size='5' id="qty_1" name="qty_1" class="rounded"/></td> 
     <td class="tdcheckbox"><input type="checkbox"  id="h09_1" name="h09_1" class="rounded"/>
      <input type="text"  id="line_1_09" name="line_1_09" value=""></td> 
     <td class="tdcheckbox"><input type="checkbox"  id="h12_1" name="h12_1" class="rounded"/>
      <input type="text"  id="line_1_12" name="line_1_12" value=""></td> 
     <td class="tdcheckbox"><input type="checkbox"  id="h15_1" name="h15_1" class="rounded"/>
      <input type="text"  id="line_1_15" name="line_1_15" value=""></td>
     <td><input type="text" name="cubespercheck_1" id="cubespercheck_1" value="0" size=5></td>
  </tr>
</table> 
```

你可以在这里看到小提琴：http: [//jsfiddle.net/3Befc/7/](http://jsfiddle.net/3Befc/7/)

我的主要目标是能够将每个复选框作为单独的产品发布。产品字段填充了产品系列。例如 38114CR。复选框代表产品的长度。1.8 米长度 38114CR 的代码是 3811418CR 其中 18 是长度 (1.8)

最后，我希望能够将每个选中的复选框作为其唯一的产品代码发布。因此，如果为产品 38114CR 检查 0.9，则发布值 3811409CR。

我的最终目标是将以下内容插入数据库：（这是按照小提琴所需的结果）

```
**Product           Cubes**

3011409CR           7
3011412CR           7
2011512EX           3
2011515EX           3
5050009PT           2
5050012PT           2
5050015PT           2 
```

我能想到的唯一方法是遍历表格，在选中复选框的地方，结合名称和长度，但即使这样也有一些挑战。

如何将上述表格行插入数据库？所以水平行到垂直记录插入？

请记住，用户可以输入他们想要的任何产品代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:27:58.857

您可以使用隐藏字段。在每一行添加一个隐藏字段，女巫将包含“真实值”。

然后在复选框中添加一个单击/更改/任何您想要的事件，如果用户可以键入代码，则在输入字段中键入一个键。该事件应发送 id 的“行”的结尾（如 _2、_2 等 -> 以您命名它们的方式）。

所有事件都应该调用相同的函数，女巫会将值连接到隐藏字段中。

像这样的东西 - 是一个示例复制粘贴不起作用;）：

```
 function makeName(line) {
         // Loop through checkboxes on that line and make the name
         if (<checkbox is checked>)
              document.getElementById('hiddenField' + line).value = document.getElementById('product' + line).value + <checkboxFromLoop> // Etc., etc.
     } 
```

在提交时只发送隐藏字段。它们将包含正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:44:55.533

```
$(function () {
    $('#continue').on('click', function () {
        createcodes();
    });
});

function createcodes() {

    //run through each row
    $('.authors-list tr').each(function (i, row) {

        // reference all the stuff you need first
        var $row = $(row),
            $line = $row.find('input[name^=line]'),
            $family = $row.find('input[name*="family"]'),
            $size = $row.find('input[name^=size]'),
            $grade = $row.find('input[name*="grade"]');

        $line.val(
            $family.val() + ' ' + $size.val() + ', ' + $grade.val()
        );

    });
} 
```

# javascript - 输入后清除 HTML 输入并防止换行

> ID：16166752
> 
> 赞同：2
> 
> 时间：2013-04-23T10:14:48.623
> 
> 标签：javascript, jquery, html

我想在用户按下回车时提交一个文本框的值，最后清除输入。我试过这段代码：

```
input.keydown(function(e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        $(this).val('');
        ...
    } 
```

输入字段的文本按预期清除，但在清除后，换行符仍输入到输入中。这意味着用户每次发送消息后都必须删除此换行符。除了像设置间隔这样的黑客方法之外，有没有办法防止这个换行符出现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:21:46.423

按下回车键时返回 false：

```
input.keydown(function(e) {
    if (e.keyCode == 13) {
        e.preventDefault();
        $(this).val('');
        return false;
    }
} 
```

当然，这意味着您的最终用户将无法实际创建新行。在这种情况下，我通常有一个布尔变量，当按下/释放 shift 键时会发生变化。因此，如果班次下降，请不要提交，换行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:18:52.767

如果您使用 AJAX 提交，则可以在收集 AJAX 有效负载的数据后清除输入。

如果您正在执行常规页面更改提交，您可以添加一个`onbeforeunload`清除输入的回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:22:56.177

`false`在事件中返回`keydown`，这可以防止事件冒泡，因此它实际上不会对文本框做任何事情。

```
input.keydown(function(e) {
    if (e.keyCode == 13) {
        $(this).val('');
        e.preventDefault();
        return false;
    }
} 
```

# c# - 使用windows服务打印excel、pdf文档

> ID：16166754
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:14:52.830
> 
> 标签：c#, excel, pdf, ms-word

我想在 c# 中使用 windows 服务打印 pdf、excel、word 文档。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:19:30.593

你的问题很复杂，也不清楚。但是，我尝试为您提供一些链接来帮助您。您可以参考以下链接：

[如何从 Windows 服务打印 PDF 文档](https://stackoverflow.com/questions/5596394/how-to-print-pdf-document-from-windows-service)

或者

[从 .NET 服务打印](https://stackoverflow.com/questions/7990/printing-from-a-net-service)

# android - 录制视频时有什么方法可以获取预览帧？

> ID：16166756
> 
> 赞同：0
> 
> 时间：2013-04-23T10:14:54.557
> 
> 标签：android, android-camera, android-mediarecorder

我想将视频流式传输到服务器并同时在设备上录制。

如果我没有录制视频，我可以使用 Camera.onPreviewCallback 来获取作为字节数组的预览数据并将数据发送到服务器。

当我开始录制时（我正在使用 MediaRecorder）然后 onPreviewCallback 不再被调用。

我怎样才能从相机中获取帧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:09:51.017

相机 API 目前不支持在录制视频的同时获取预览回调。

在最新的 Android 版本上，您可以使用 SurfaceTexture 作为预览输出，并从 GPU 读取纹理以发送到您的服务器，而不是使用预览回调。

# javascript - Javascript：innerHTML 并不总是更新

> ID：16166761
> 
> 赞同：0
> 
> 时间：2013-04-23T10:15:06.743
> 
> 标签：javascript, dom, innerhtml, timing, watch

我得到了这个函数，它每秒被 setInterval 触发

```
function updatetimer() {
    if (timesec==0) {
        if (timemin==0) clearInterval(interval);
        else {
            timemin--;
            timesec=59;
        }
    }
    else timesec--;

    document.getElementById('timeleft').innerHTML=timemin+':'+timesec;
} 
```

您希望它每秒用新时间更新名为 timeleft 的 innerHTML 的元素。但由于某种原因，它没有，或者有时它没有。它可能与所有其他编码有关，因为有很多 setTimeout 和 DOM-stuff 正在进行。

如果这是假定的行为，请您指出另一种方法。

提前致谢， Locercus

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:23:51.177

`setTimeout`使用和的事件调度`setInterval`是一种*尽力而为的*模型。如果您安排一个间隔以每 1000 毫秒运行一次，如果有其他事件正在处理，它可能会运行得更晚。

这就是为什么使用每秒触发的*时钟通常是一个坏主意的原因。*`setInterval`你的时钟总是很慢。

# alloy - 从链表中删除节点并使用合金分析器推入堆栈

> ID：16166766
> 
> 赞同：1
> 
> 时间：2013-04-23T10:15:27.513
> 
> 标签：alloy

我想从链接列表中删除一个元素并将其推送到堆栈上。我试图编写这段代码。我正在编写将元素推入堆栈的代码，但它给出了错误。该代码在注释中。

//双向链表

```
sig node{}
sig list
{
    elts: set node,
    next: elts lone->lone elts,
    prev: elts lone->lone elts,
    first: one node,
    last: one node
} 
{
    all x:elts | x not in x.^next
    all x:elts | x not in x.^prev
    no first.prev
    no last.next

    first.^next=elts-first
    last.^prev=elts-last
    all x,x1:elts | (x.next=x1) =>(x1.prev=x)
} 
```

//堆

```
one sig Null extends node{}

sig stack
{
    elts: set node,
    top: one elts,
    next: elts lone ->lone elts
} 
{
    all e:elts | all l:list | all l1:l.elts | l1 not in e
    all e:elts | e not in e.^next
    no Null.next
    top.^next=elts-top
    Null in elts
} 
pred undo(beforelist,afterlist:list,beforestack,afterstack:stack)
{ 
```

我已经尝试过这段代码（在评论中）将元素插入堆栈。但这没有给出任何实例发现错误。

```
/*
    afterstack.elts=beforestack.elts+(beforelist.last)
    beforelist.last=afterstack.top
    afterstack.next=beforestack.next+(beforelist.last->beforestack.top)
*/  

    //afterstack.elts=(beforestack.elts)+(beforelist.last)

        afterlist.elts=beforelist.elts-beforelist.last
        afterlist.last=beforelist.last.(beforelist.prev)
    }
run undo for 2 list,2 stack, 5 node 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:05:11.927

“未找到实例”不是错误，它只是分析的结果。

在您的情况下，由于这两个相互竞争的约束，它无法找到实例

```
// inside appended facts for sig stack
all e:elts | all l:list | all l1:l.elts | l1 not in e 
```

和

```
afterstack.elts=beforestack.elts+(beforelist.last) 
```

第一个说没有堆栈可以与任何列表共享一个节点。第二个明确表示 的元素`afterstack`必须包括 的最后一个节点`beforelist`。

我认为您应该删除第一个事实并将其写为谓词，然后您可以在给定的 ( `node`, `list`) 对（或一组对）上断言，因为我假设您的目标是在“之前”声明约束 hods 以及“之后”状态。

# kendo-ui - 单击主行 Kendo Grid 折叠详细信息行

> ID：16166767
> 
> 赞同：3
> 
> 时间：2013-04-23T10:15:32.667
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

我有一个分层的剑道网格，它的子网格高达“n”级（绑定到远程数据）。当我单击主节点上的折叠时，该主节点内的所有子节点也应该折叠。对此的任何帮助将不胜感激。

谢谢， Karthik Ganesan

# pentaho - Pentaho CDE 中的数据表

> ID：16166773
> 
> 赞同：3
> 
> 时间：2013-04-23T10:15:46.983
> 
> 标签：pentaho, dashboard, pentaho-cde

我正在尝试在 pentaho cde 中做数据表。在 pentaho 中，组件的名称是 Table Component。

问题是我尝试使用没有特定数量的列进行动态查询，并发生以下错误：

> DataTables 警告（表 id = 'datosTable'）：添加的数据（大小 5）与已知的列数 (3) 不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T04:44:17.793

看来您希望您的表必须随查询而更改，将此函数放入 Pre Execute

```
function f() {
        this.chartDefinition.colHeaders = [];
        this.chartDefinition.colTypes = [];
        this.chartDefinition.colFormats = [];        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T01:30:21.030

您必须让 DataTables 重新定义结构，因为您必须提供 colHeaders / colTypes / colFormats 的空定义或提供正确的格式定义。

几天前我遇到了一个大问题，我无法用表格组件真正调试，我对表格组件的任何问题的解决方案现在是：1）用查询组件替换表格组件，2）在 html 中定义一个表格查询组件的执行后功能 3) 用 jQuery 和 .dataTable() 以您自己的方式抓取表格。

在我看来，这是复杂表格解决方案的好方法，并且可以最大限度地减少在表格组件设置中搞砸一切的机会 - 如果您可以处理 dataTables :D

# java - 使用 Google App Engine Plugin for eclipse 的 Jsp 编译错误

> ID：16166774
> 
> 赞同：1
> 
> 时间：2013-04-23T10:15:49.070
> 
> 标签：java, google-app-engine, jsp

我正在尝试通过在他们的网站上运行示例来学习使用 Java 的 Google App Engine 的用法。我在 Linux 中使用 Eclipse Juno 作为我的 IDE。它成功地托管在我的本地计算机上，但是在尝试将其部署到 App Engine 时，它​​无法编译 JSP 文件。
**SignGuestbookServlet.java**

```
 package com.guest.book;

import java.io.IOException;
import java.util.Date;
import java.util.logging.Logger;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.datastore.DatastoreService;
import com.google.appengine.api.datastore.DatastoreServiceFactory;
import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.datastore.KeyFactory;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

public class SignGuestbookServlet extends HttpServlet {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private static final Logger log = Logger.getLogger(SignGuestbookServlet.class.getName());

    public void doPost(HttpServletRequest req, HttpServletResponse resp)
                throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();
        String guestbookName=req.getParameter("guestbookName")==null?"default":req.getParameter("guestbookName");
        Key guestbookKey=KeyFactory.createKey("Guestbook", guestbookName);
        String content = req.getParameter("content");
        Date date=new Date();
        Entity greeting = new Entity("Greeting",guestbookKey);
        greeting.setProperty("user", user);
        greeting.setProperty("content", content);
        greeting.setProperty("date", date);

        DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
        datastore.put(greeting);
        resp.sendRedirect("/guestbook.jsp?guestbookName="+guestbookName);
   }
} 
```

**留言簿.jsp**

```
<%@ page import="com.google.appengine.api.users.User" %>

<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.util.List" %>
<%@ page import="com.google.appengine.api.users.User" %>
<%@ page import="com.google.appengine.api.users.UserService" %>
<%@ page import="com.google.appengine.api.users.UserServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreServiceFactory" %>
<%@ page import="com.google.appengine.api.datastore.DatastoreService" %>
<%@ page import="com.google.appengine.api.datastore.Query" %>
<%@ page import="com.google.appengine.api.datastore.Entity" %>
<%@ page import="com.google.appengine.api.datastore.FetchOptions" %>
<%@ page import="com.google.appengine.api.datastore.Key" %>
<%@ page import="com.google.appengine.api.datastore.KeyFactory" %><html>
    <head>
    <title>Guestbook</title>
  </head>

  <body>

<%
    String guestbookName= request.getParameter("guestbookName");
    if(guestbookName==null)
    {
        guestbookName="default";
    }
    pageContext.setAttribute("guestbookName", guestbookName);
    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();
    if (user != null) {
      pageContext.setAttribute("user", user);
%>
<p>Hello, <%= user.getNickname() %>! (You can
<a href="<%= userService.createLogoutURL(request.getRequestURI()) %>">sign out</a>.)</p>
<%
    } else {
%>
<p>Hello!
<a href="<%= userService.createLoginURL(request.getRequestURI()) %>">Sign in</a>
to include your name with greetings you post.</p><br>
<%
    }
%>
<%
        DatastoreService datastore=DatastoreServiceFactory.getDatastoreService();
        Key guestbookKey = KeyFactory.createKey("Guestbook",guestbookName);
        Query query= new Query("Greeting",guestbookKey).addSort("date",Query.SortDirection.DESCENDING);
        List<Entity> greetings = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(5));
        if(greetings.isEmpty())
        {%>
        <p> Guestbook <%= guestbookName %> has no messages.</p>
        <%
            }
        else
        {
        %>
        <p>Messages in Guestbook <%= guestbookName %>.</p><br>
        <%
            for(Entity greeting : greetings)
            {
                if(greeting.getProperty("user")==null){
        %>
            <p>An anonymous person wrote:</p>
        <%
            }
        else
        {
        %>
        <p><b><%= greeting.getProperty("user") %></b> wrote: </p>
        <% 
        }
        %>
        <blockquote><%= greeting.getProperty("content") %></blockquote>
        <%
            }
        }
        %>  
<form action="/sign" title="Dash" method="post">
    <div><textarea name="content" rows="3" cols="60"></textarea></div>
    <div><input type="submit" value="Post Greeting" /></div>
    <input type="hidden" name="guestbookName" value="<%= guestbookName %>"/>
  </form>
  </body>
</html> 
```

**错误日志**

```
com.google.appengine.tools.admin.JspCompilationException: Failed to compile jsp files.
Exception in thread "main" java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:188)
    at org.apache.jasper.JspCompilationContext.createCompiler(JspCompilationContext.java:238)
    at org.apache.jasper.JspCompilationContext.createCompiler(JspCompilationContext.java:214)
    at org.apache.jasper.JspC.processFile(JspC.java:1181)
    at org.apache.jasper.JspC.execute(JspC.java:1341)
    at com.google.appengine.tools.development.LocalJspC.main(LocalJspC.java:40)
Caused by: java.lang.NullPointerException
    at com.google.appengine.tools.development.LocalJspC$LocalCompiler.<clinit>(LocalJspC.java:53)
    ... 7 more
Error while executing: /usr/lib/jvm/java-7-openjdk-amd64/bin/java -classpath /home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/impl/appengine-api-labs.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/impl/google_sql.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/impl/appengine-local-runtime.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/impl/appengine-api.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/impl/appengine-api-stubs.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp/repackaged-appengine-ant-1.7.1.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp/repackaged-appengine-tomcat-juli-6.0.29.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp/repackaged-appengine-jasper-6.0.29.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp/repackaged-appengine-jasper-el-6.0.29.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp/repackaged-appengine-ant-launcher-1.7.1.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/jsp-api.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/appengine-local-runtime-shared.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/servlet-api.jar:/home/abdul/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.7.1/appengine-java-sdk-1.7.7.1/lib/shared/el-api.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/classes:/tmp/1366711497850-0:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/jdo-api-3.0.1.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-jasper-jdt-6.0.29.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/appengine-api-labs.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-jakarta-standard-1.1.2.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/jta-1.1.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/datanucleus-appengine-2.1.2.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/datanucleus-core-3.1.3.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/appengine-endpoints.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/appengine-jsr107cache-1.7.7.1.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-ant-1.7.1.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-tomcat-juli-6.0.29.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-jakarta-jstl-1.1.2.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/datanucleus-api-jdo-3.1.3.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-jasper-6.0.29.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/geronimo-jpa_2.0_spec-1.0.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-jasper-el-6.0.29.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/repackaged-appengine-ant-launcher-1.7.1.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/asm-4.0.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/datanucleus-api-jpa-3.1.3.jar:/tmp/appcfg7995795059214651808.tmp/WEB-INF/lib/jsr107cache-1.1.jar: -Dcom.google.apphosting.runtime.use_java6=false com.google.appengine.tools.development.LocalJspC -uriroot /tmp/appcfg7995795059214651808.tmp -p org.apache.jsp -l -v -webinc /tmp/appcfg7995795059214651808.tmp/WEB-INF/generated_web.xml -d /tmp/1366711497850-0 -javaEncoding UTF-8 
```

# java - 带有 GoogleAppEngine 的 RPC 的 ClassNotFoundException

> ID：16166783
> 
> 赞同：0
> 
> 时间：2013-04-23T10:16:16.607
> 
> 标签：java, google-app-engine, gwt, rpc

我尝试将本地工作的应用程序部署到`GAE`GoogleAppEngine。它已经在那里运行良好，除了`RPC`调用。他们都扔了`ClassNotFoundException`。

我只是使用以下代码制作 RPC，我可能忘记了什么吗？它在本地开发模式下完美运行。

客户端：

```
@RemoteServiceRelativePath("test")
public interface TestService extends RemoteService {
    String testRpc();
}

public interface TestServiceAsync extends RemoteService {
    void testRpc(AsyncCallback<String> callback);
} 
```

用法：

```
 TestServiceAsync service = GWT.create(TestService.class)
    service.testRpc(new AsyncCallback<String>() {
        @Override
        public void onFailure(Throwable caught) {
            Window.alert("ERROR");
        }

        @Override
        public void onSuccess(String result) {
            Window.alert("SUCCESS: " + result);
        }
    }); 
```

服务器端：

```
package myapp.server.rpc;
public class TestServiceImpl extends RemoteServiceServlet implements TestService {
    @Override
    public String testRpc() {
        return "OK";
    }
} 
```

网页.xml：

```
 <servlet>
      <servlet-name>TestServiceImpl</servlet-name>
      <servlet-class>myapp.server.rpc.TestServiceImpl
      </servlet-class>
   </servlet>
   <servlet-mapping>
      <servlet-name>TestServiceImpl</servlet-name>
      <url-pattern>/myapp/test</url-pattern>
   </servlet-mapping> 
```

结果：异常：

```
EXCEPTION 
java.lang.ClassNotFoundException: my.app.server.rpc.TestServiceImpl
    at com.google.appengine.runtime.Request.process-e7c092c1e216f15a(Request.java)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at java.lang.Thread.run(Thread.java:679)

E 2013-04-23 11:03:08.915

javax.servlet.ServletContext log: unavailable
javax.servlet.UnavailableException: my.app.server.rpc.TestServiceImpl
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)

W 2013-04-23 11:03:08.924

Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@1079ff{/,/base/data/home/apps/s~myapp/1.366873782202758954}
org.mortbay.util.MultiException[java.lang.NullPointerException, java.lang.NullPointerException, java.lang.NullPointerException]
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:656)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)

C 2013-04-23 11:03:08.928

Uncaught exception from servlet
javax.servlet.UnavailableException: Initialization failed.
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:228)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
    at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)

I 2013-04-23 11:03:08.931

This request caused a new process to be started for your application, and thus caused your application code to be loaded for the first time. This request may thus take longer and use more CPU than a typical request for your application. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:20:33.817

您的 web.xml 具有与您在课堂上提到的不同的包：

```
<servlet>
      <servlet-name>TestServiceImpl</servlet-name>
      <servlet-class>de.myapp.server.rpc.TestServiceImpl
      </servlet-class>
   </servlet> 
```

你的班：

```
package my.app.server.rpc;
public class TestServiceImpl extends RemoteServiceServlet implements TestService { 
```

修改 web.xml 并查看它是否解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T08:35:48.673

原来是构建/编译问题。RCP Servlet 未编译到目标文件夹。我不得不重新创建项目，现在它可以工作了。

# java - Java 连接到 DB2 挂起

> ID：16166795
> 
> 赞同：0
> 
> 时间：2013-04-23T10:16:31.827
> 
> 标签：java, db2

我正在尝试一个试点项目来查询和写入 DB2 数据库。我在 StackOverFlow 和网络上看到了很多例子。但是由于某种原因，我的应用程序在连接到数据库时只是挂起。我尝试了不同的驱动程序，但仍然得到相同的结果。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.sql.SQLException;
import java.sql.PreparedStatement;

public class DBManager {
public DBManager()
{ 
    try 
    {
        Class.forName("com.ibm.db2.jcc.DB2Driver");
    }
    catch (ClassNotFoundException e) 
    {
         System.out.println("Please include Classpath  Where your DB2 Driver is located");
         e.printStackTrace();
         return;
    }
    System.out.println("DB2 driver is loaded successfully");
    Connection conn = null;
    PreparedStatement pstmt = null;
    ResultSet rset=null;
    boolean found=false;
    try 
    {
        System.out.println("DB2 Database Connecting...");
        conn = DriverManager.getConnection("jdbc:db2://Hostname:8471/Databasename","user","password");
        if (conn != null)
        {
           System.out.println("DB2 Database Connected");
        }
        else
        {
            System.out.println("Db2 connection Failed ");
        }
        pstmt=conn.prepareStatement("SELECT * FROM P6DEVCDB00.ADCP FETCH FIRST 10 ROWS ONLY");
        rset=pstmt.executeQuery();
        if(rset!=null)
        {
            while(rset.next())
            {
                found=true;
                System.out.println("ID: "+rset.getString("ADCONTID"));                  
            }
        }
        if (found ==false)
        {
            System.out.println("No Information Found");
        }
    } 
    catch (SQLException e) 
    {
        System.out.println("DB2 Database connection Failed");
        e.printStackTrace();
        return;
    }   
}
} 
```

**更新** 的应用程序挂起，没有异常

```
conn = DriverManager.getConnection(. 
```

我也尝试过使用不同的端口号，但有一些错误（它们确实不同）和其他只是挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:21:10.160

查看您的程序，您需要关闭连接资源。

```
catch (SQLException e) 
{
    System.out.println("DB2 Database connection Failed");
    e.printStackTrace();
    try{
       rset.close();
       pstmt.close();
       conn.close();
     }catch(SQLException e2){
        System.err.println("Unable to close database resources");
        e2.printStackTrace();
     }
} 
```

此外，您不需要在 catch 语句中使用“return”。Catch 块用于程序的非例外流程，使用“return”再次在 catch 中使用突然中断代码不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T14:14:49.470

我的连接字符串错误。我需要包含我们服务器的域。 `"jdbc:db2://Hostname/Databasename"`需要`"jdbc:db2://Hostname.domain/Databasename"`。

# magento - 如何根据magento产品视图页面中的某些条件显示模板文件中的静态块？

> ID：16166797
> 
> 赞同：1
> 
> 时间：2013-04-23T10:16:33.460
> 
> 标签：magento, magento-1.7

我想根据某些条件显示静态块，例如：

```
if($_product->getPrice() >= 100){
   //Static Block display code.
}
else{
   //Some other static block display code.
} 
```

是否可以？我不介意以xml布局方式显示代码，但我想在条件下显示代码。如何做到这一点？请问有人能解决这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:38:11.760

它会是这样的：

```
if($_product->getPrice() >= 100){
    echo $this->getLayout()->createBlock('namespace/block1')->setTemplate('namespace/block1.phtml')->toHtml();
} else {
    echo $this->getLayout()->createBlock('namespace/block2')->setTemplate('namespace/block2.phtml')->toHtml();
} 
```

块文件需要存储在 app/design/frontend//default/template/

在本例中：app/design/frontend//default/template/namespace/block1.phtml

# haskell - Haskell floor 函数返回不同的结果

> ID：16166798
> 
> 赞同：6
> 
> 时间：2013-04-23T10:16:34.473
> 
> 标签：haskell

我有一个关于 Haskell`floor`函数的问题 - 它应该返回“不大于参数的最大整数”但是表达式

`floor 3.9999999999999999`

返回 4 而不是 3。它可能与`Double`类型精度有关，但考虑到 Haskell 类型安全的重要性，它不应该编译，无论如何在这种情况下它返回的数字大于与其定义相矛盾的参数。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T10:26:09.543

> 在这种情况下，它返回大于与其定义相矛盾的参数的数字。

它返回一个等于其参数的数字。正如你所说，这是关于双精度。在 64 位浮点规则下，数字 3.9999999999999999 和 4 完全相等。

> 但是考虑到 Haskell 类型安全的重要性，它不应该编译

问题是像这样的分数文字具有多态类型`Fractional a => a`。那就是他们不必是双打。例如，您可以编写`floor (3.9999999999999999 :: Rational)`3，因为 3.9999999999999999 可以表示为 a`Rational`而不会损失任何精度。

如果 Haskell 写错了`3.9999999999999999`，那么你也不能写`3.9999999999999999 :: Rational`，这很糟糕。因此，由于`Fractional`可以使用许多不同的类型来表示文字，其中一些具有无限精度，因此 Haskell`Fractional`根据`Double`' 的限制来限制合法文字的数量将是一个大错误。

有人可能会争辩说，Haskell`3.9999999999999999`在用作 a 时应该限制`Double`，而不是在用作 a 时`Rational`。但是，这将需要`Fractional`类型类的实例来声明有关其精度的信息（以便 Haskell 可以使用该信息来确定给定的文字是否对该类型有效），而这目前还没有，这将是困难的（或不可能的）以通用、高效和用户友好的方式实现（考虑到“精度”一词的含义可能完全不同，具体取决于我们谈论的是浮点数还是定点数，以及它们是使用基数 2 还是 10 （或其他任何东西）来表示数字 - 对于`Fractional`类型类的实例，其中任何一个都是可能的）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T10:26:21.233

这与类型安全无关。例如，检查[http://babbage.cs.qc.cuny.edu/IEEE-754/](http://babbage.cs.qc.cuny.edu/IEEE-754/)上的值。`3.9999999999999999`如果长度小于或等于 64 位，则和的值`4`对于浮点数完全相同。你得到的价值并不大——它是完全一样的。

如果您需要如此高的精度，请查看[http://www.haskell.org/haskellwiki/Libraries_and_tools/Mathematics#Arbitrary_precision](http://www.haskell.org/haskellwiki/Libraries_and_tools/Mathematics#Arbitrary_precision)

# asp.net-mvc - MVC 应用程序中 kendoUI 网格列中的图标（使用 MVC 包装器）

> ID：16166800
> 
> 赞同：1
> 
> 时间：2013-04-23T10:16:40.783
> 
> 标签：asp.net-mvc, razor, kendo-ui

我在 ASP.NET MVC 应用程序中有一个页面，用 KendoUI 制作该页面有一个分层网格（如下面的链接）

[http://demos.kendoui.c​​om/web/grid/hierarchy.html](http://demos.kendoui.com/web/grid/hierarchy.html)

代码工作正常。

详细信息网格绑定到以下类

```
public class ScheduledInspectionInfo
{
    public ScheduledInspectionInfo();

    public string CommandName { get; set; }
    public string IconPath { get; set; }
    public int InspectionID { get; set; }
    public DateTime PeriodEndDate { get; set; }
    public int PeriodNo { get; set; }
    public DateTime PeriodStartDate { get; set; }
    public int PermitID { get; set; }
} 
```

IconName 字段包含我需要在网格中显示的图标的名称。但我不能让它工作

如果我将网格定义如下：

```
Html.Kendo().Grid<MyPermitNow.ScheduledInspectionInfo>()
    .Name("grid_#=PermitID#")   
    .Columns(columns =>
    {
        columns.Bound(p => p.PeriodNo).Title("No.").Width(200);
        columns.Bound(p => p.PeriodStartDate).Format("{0:d}").Width(200);
        columns.Bound(p => p.PeriodEndDate).Format("{0:d}").Width(200);
        columns.Bound(p => p.IconPath).Title("Status");
    })
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(5)        
        .Read(read => read.Action("HierarchyBinding_SearchDetail", "Septic", new { permitID = "#=PermitID#" }))
    )
    .Pageable()
    .Sortable()
    .ToClientTemplate() 
```

状态栏显示图标名称

但是，如果我更改状态列定义如下

```
columns.Bound(p => p.IconPath).Title("Status").ClientTemplate("<img src='#= IconName #' />"); 
```

它给了我 JavaScript 错误：

```
ReferenceError: IconName is not defined 
```

尝试展开主行以查看详细信息时

知道有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:40:16.590

由于`IconPath`定义的是详细信息对象，因此对于您的模板，您必须转义`#`字符才能访问详细信息（`#= ... #`映射到主元素的属性和`\\#= ... \\#`详细信息元素）。

在您的情况下，您应该使用：

```
columns.Bound(p => p.IconPath)
       .Title("Status")
       .ClientTemplate("<img src='\\#= IconPath \\#' />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:36:57.527

我想你拼错了什么。IconName 属性从未定义。

改用 IconPath

```
columns.Bound(p => p.IconPath).Title("Status").ClientTemplate("<img src='#= IconPath #' />"); 
```

# complex-event-processing - esper：在 where 没有匹配项时从 where 语句事件中选择

> ID：16166804
> 
> 赞同：0
> 
> 时间：2013-04-23T10:16:49.230
> 
> 标签：complex-event-processing, esper

我正在尝试使用 select 语句，其中字段的值取决于来自 2 个窗口的值。最后还使用 where 语句从 1 个窗口中过滤掉事件。例如。

```
Select 
coalesce(B.field1,0) + A.field1 as field1,
coalesce(B.field2,0) + A.field2 as field2
from 
Window1 A unidirectional,
Window2 B 
where A.field3<>B.field3 and a.field4=B.field4; 
```

问题是即使没有匹配项，我也想输出事件。这样B流被视为null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:00:13.950

使用外连接。您的文本说流 A 被视为空，但是当前 A 触发器触发连接，所以当没有 A 到达时应该触发什么，也许是时间，如果时间然后使用模式每 15 秒触发一次。

# java - Java Atmosphere @MeteorService 通过 cmd 编译？

> ID：16166806
> 
> 赞同：0
> 
> 时间：2013-04-23T10:16:57.920
> 
> 标签：java, maven, servlets, long-polling, atmosphere

我正在尝试了解 Atmosphere API。尝试使用 CMD 编译给定的示例。给出在 - [https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-Meteor,-WebSocket-and-Long-Polling](https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-Meteor,-WebSocket-and-Long-Polling)

当我运行命令时 -`javac -cp .;C:\lib\* MeteorChat.java`

CMD 输出错误

```
Error cannot find Symbol
@MeteorService
 ^
  symbol: class MeteorService
1 error 
```

我不知道发生了什么事。我还包括了 Atmosphere 网站提供的罐子。

请注意：我正在为我的 tomcat 应用程序使用基本结构（Servlet/Jsp）。我没有使用 Maven。

我必须使用 Maven 来克服这个问题吗？或者是否有任何解决方案可以通过 CMD 中的正常结构来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:42:07.427

你加了哪些罐子？您需要大气运行时 1.0..jar 或大气 1.1.x.jar，其中 x 可以是 0 到 12。

——让弗朗索瓦

# perl - 我如何在 perl 中模拟退出行为？

> ID：16166809
> 
> 赞同：4
> 
> 时间：2013-04-23T10:17:06.303
> 
> 标签：perl

假设在 PERL 模块之一中有一个子程序检查 -

```
sub exam  
{  
    ....  
    ....  
    exit 0;  
} 
```

我想为此 API 编写测试用例，例如-

```
is('exam',0,"exam subroutine works properly"); 
```

但它不起作用，因为之后`exit 0`，PERL 脚本出来了。
所以我的问题是我们如何模拟退出的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:55:41.753

尝试使用[Test::Exit](http://search.cpan.org/~arodland/Test-Exit-0.03/lib/Test/Exit.pm)

```
 perl  -le 'use Test::More tests => 2; use Test::Exit ; sub s1 { exit $_[0] }; exits_zero( sub{ s1(0)}, q{exit 0}); exits_ok(sub {s1(1)}, q{exit 1}); ' 
    1..2
    ok 1 - exit 0
    ok 2 - exit 1 
```

# jquery-mobile - 哪个框架最适合使用数据库连接开发移动应用程序？

> ID：16166810
> 
> 赞同：8
> 
> 时间：2013-04-23T10:17:08.810
> 
> 标签：jquery-mobile, mobile, sencha-touch, cordova, mobile-application

我使用 PHP5 开发了一个网站。现在，我想总结一下我的网站在跨平台移动应用程序中的主要功能。

我对可以做到这一点的框架进行了一些研究。我发现'jQuery Mobile'、'SenchaTouch' 和'Cordova' 是最受欢迎的。但是我想开发一个应用程序，它需要与数据库建立连接，并且在 iOS 和 Android 上是可移植的（至少）。

我尝试了“jQuery Mobile”，但该应用程序需要在 Web 浏览器中打开才能显示该应用程序（就像一个简单的网站）。例如，我想像当前手机应用程序一样打开我的应用程序，而不通过使用数据库连接的 Web 浏览器（具有与当前网站相同的行为并显示 MySQL 请求的内容但没有 Web 浏览器）。

jQuery Mobile 或其他有可能吗？还是我必须通过网络浏览器？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T13:34:32.233

目前存在 3 种不同类型的移动应用程序：原生应用程序、混合应用程序和 Web 应用程序。原生应用程序是用 Java（适用于 Android）或 Objective-C（适用于 iOS）编写的。本机应用程序可以完全访问手机上的低级硬件功能，并且可以从应用程序商店下载。Web 应用程序是使用特殊 JavaScript 工具包（如 jQuery Mobile 和 Sencha Touch）和自定义 CSS 使网站看起来和运行起来像原生应用程序的网站。但是，Web 应用程序只能通过浏览器访问 - 虽然您可以将网站“书签”到手机的主屏幕以使其更易于访问，但它们仍然无法从应用程序商店下载并且无权访问到手机上的硬件功能。混合应用程序是这两者之间的交叉。混合应用程序基本上是“

听起来您想要做的是使用 jQuery mobile（或 Dojo Mobile、Sencha Touch 或其他数百个 JavaScript 工具包之一）创建一个混合应用程序。这样您就可以利用您的 Web 开发技能并构建一个连接到您的数据库的网站。但是，当最终使用 Cordova “编译”您的 HTML/CSS“移动网站”时，它会为 iOS、Android 和其他平台生成具有原生外观的应用程序，然后您可以将这些应用程序发布到应用商店。当用户从应用商店下载您的应用并单击启动图标时，他们会看到您的网站，但不会看到浏览器工具栏或类似的东西 - 大多数用户不会知道他们正在查看 HTML/CSS “网站。” 这听起来像是你的目标，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-18T16:56:16.060

**应用类型**

三种类型的应用程序：原生应用程序、网络应用程序和混合应用程序。但是有什么区别呢？

Web 应用程序将在（几乎）所有智能手机上运行，​​而本地应用程序需要专门为每个操作系统（甚至针对这些操作系统的不同版本）开发，而混合应用程序至少需要开发承载网络语言。

[有关这三个应用程序之间差异的更多信息。](http://markupjavascript.blogspot.in/2013/11/native-apps-web-apps-hybrid-apps-what-is-the-difference.html)

**用于创建混合应用程序的工具包**

将 Web 应用程序转换为移动应用程序是通过将 HTML、CSS 和 JavaScript 包装在一个特殊容器中来完成的：通常是标准移动 SDK 提供的“Web 视图”组件，以及一些额外的位，例如为开发人员提供的 JavaScript API访问 Web 视图组件不提供的设备功能（例如访问设备的 GPS、相机、手势和通知）。

其中一些包装器希望您使用他们的移动 JavaScript 框架，而其他包装器则允许您使用您喜欢的任何 JavaScript 框架。

**工具包可用：**

适用于 HTML/JS 开发人员的 Adob​​e AIR

阿尔法无处不在

安普色度

IBM 工作灯

英特尔 XDK（前身为 appMobi）

康尼

PhoneGap / Apache Cordova（可能是使用最广泛的）

煎茶触摸2​</p>

现货特定

M项目

触发器.io​</p>

[有关用于开发混合应用程序的工具包的更多信息。](http://markupjavascript.blogspot.in/2013/11/toolkits-for-developing-hybrid-apps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T21:41:57.273

有一个非常强大的工具应该添加到列表中：Progamma 的 Instant Developer (Inde)。我曾经使用 AlphaAnywhere 开发并搬到 Inde，从未回头。

# c# - 在 Windows 服务中转换我的应用程序

> ID：16166812
> 
> 赞同：0
> 
> 时间：2013-04-23T10:17:11.360
> 
> 标签：c#, visual-studio-2010, service

我创建了一个包含多个项目的解决方案。我有一个项目是 WPF 应用程序。此应用程序与服务逻辑应用程序通信。该应用程序将所有流量重定向到特定对象的不同管理器。这些管理器通过几个类与数据库进行通信。解决方案中的另一个项目是，例如，可以与我连接的某些硬件进行通信的项目。

如何将此解决方案（减去 WPF 应用程序？）转换为 Windows 服务？这样硬件通信和数据库保存等所有东西都还在运行，我可以随时启动 WPF UI 来配置一些设置。

我真的不明白安装程序打包是如何工作的。我创建了一个服务，它创建了一个中央逻辑类的实例。这个实例应该只创建一次，并且实例化这个类可以确保启动其他管理器类，以及一个数据库处理程序类和处理来自外部硬件的事件的类。所以简而言之，应用程序应该在实例化中央逻辑类时工作。因此，在启动服务时真正应该做的就是实例化该类。WPF UI 应用程序仅用于配置，不一定需要。

如何创建此类服务并为此创建安装程序？看来下面的代码还不够：

```
protected override void OnStart(string[] args)
{
    log.Debug("Starting service...");
    serviceLogic = new CentralLogic();
    log.Debug("Successfully started service");
} 
```

或者我正在创建错误的安装程序。谁能引导我走向正确的方向？

编辑：我已经调查过了，看来我稍后会使用 WCF 让 UI 与服务进行通信。首先，我想在我的 Windows 电脑上安装该服务并让它正常工作。在 Visual Studio 中运行解决方案时，一切正常。WPF 应用程序是启动和创建 CentralLogic 类的实例的应用程序。即使在那之后我没有对 UI 做任何事情，只是“玩”硬件，一切都正常。因此，创建 CentralLogic 类的实例应该足以让整个解决方案运行，因为该类管理其他类。只有创建安装程序、服务，甚至可能是建筑物对我来说都是错误的。我不知道在这里做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:21:57.103

这是一个有用的演练[http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.100).aspx)

您可以将 UI 构建到服务中，或者让另一个应用程序与服务对话，例如使用 WCF。

这也应该有所帮助，[将现有的带有 gui 的 exe 制作成 Windows 服务](https://stackoverflow.com/questions/8968672/making-an-existing-exe-with-gui-into-windows-service)，但因为您已经在中途中断了您的项目。

# javascript - 如何在不使用 JavaScript (Firefox) 中的 for-in 循环的情况下获取对象的所有属性？

> ID：16166815
> 
> 赞同：2
> 
> 时间：2013-04-23T10:17:24.863
> 
> 标签：javascript, object, properties, key

我试图获取/计算对象的属性并找到[了这个 QaA](https://stackoverflow.com/questions/126100/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascrip)和[这个跨浏览器解决方案](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys#Compatibility)。

但是，`Object.keys`并不总是返回与 with 相同的值`for-in loop`。

```
var obj = {foo: "foo", bar: "bar"};

// foo, bar
console.log(Object.keys(obj));

// foo, bar
for(var p in obj) {
    console.log(p);
} 
```

```
var obj = document.body.style;

// [] <-- empty array
console.log(Object.keys(obj));

// background, backgroundImage, border, fontFamily...
for(var p in obj) {
    console.log(p);
} 
```

我不确定对象`document.body.style`是否是`enumerable`.

即使它们是，[根据 Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys#Examples)，我们也可以使用不可`Object.getOwnPropertyNames`枚举的属性，但它也返回一个空数组。

有人可以解释一下吗？是否有可能在`document.body.style`没有 for-in 循环的情况下获得对象的所有属性？

# 编辑

糟糕，我只用 Firefox 进行了测试。在 Osiris 发表评论之前，我意识到这只发生在**Firefox**（19 和 20 是最新版本）上。IE 9、Opera 12、Chrome 26、Safari 5 都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:26:55.500

的属性`document.body.style`在 Firefox 中不可枚举。您可以使用以下方法轻松测试：

```
document.body.style.propertyIsEnumerable('background'); // FF: false, WebKit: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:51:03.120

这取决于您要计算的属性类型。

**对于...在**

遍历对象的所有*可枚举*属性，包括在原型链中找到的属性。

**对象键**

返回可以直接在对象上找到的所有*可枚举属性。*不考虑原型链的属性。

**Object.getOwnPropertyNames**

返回可以直接在对象上找到的*所有*属性，无论是否可枚举。不考虑原型链的属性。

根据对象，这些方法当然可以返回不同的结果。使这更加复杂的是对象（或原型）可能具有在一个浏览器中可枚举而在另一个浏览器中不可枚举的属性。

# php - 在 PHP 中删除 XML 节点

> ID：16166816
> 
> 赞同：2
> 
> 时间：2013-04-23T10:17:27.877
> 
> 标签：php, xml

```
 $xmldoc = new DOMDocument();
    $xmldoc->load('card.xml');
    $root   = $xmldoc->documentElement;
    $fnode  = $root->firstChild;
    // we retrieve the chapter and remove it from the book
    $items = $xmldoc->getElementsByTagName('card');
    foreach ($items as $item){
        $node = $item->getElementsByTagName('cardnumber')->item(0);
        if ($node->nodeValue == $this->cardnumber){
            $node->parentNode->removeChild($node);
            $xmldoc->saveXML();
        }
    } 
```

如果卡号匹配，上面是我用来删除卡节点的代码，下面是我的 XML 格式。但如果未能取出卡。任何人都可以帮忙吗？

```
<root>
  <card>
    <cardnumber>12345</cardnumber>
    <name>Tan</name>
  </card>
  ....
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:45:09.433

`<card>`用`id=2`with删除`simplexml`：

```
$xml = simplexml_load_string($x); // assume XML in $x
$i = count($xml) - 1; 

for ($i; $i >= 0; $i--) {   
    $card = $xml->card[$i];
    if ($card['id'] == "2") unset($xml->card[$i]);
} 
```

看到它工作：[http ://codepad.viper-7.com/9cX1qR](http://codepad.viper-7.com/9cX1qR)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:24:20.327

您删除节点的方式是正确的。但是您可以在 saveXml() 之后将其保存在 xml 中，或者您可以打印新的 xml 并检查您所做的更新。并且根据您的逻辑保存应该在循环之后完成。(即) 如下，

```
$xmldoc = new DOMDocument();
$xmldoc->load('card.xml');
$root   = $xmldoc->documentElement;
$fnode  = $root->firstChild;
// we retrieve the chapter and remove it from the book
$items = $xmldoc->getElementsByTagName('card');
foreach ($items as $item){
    $node = $item->getElementsByTagName('cardnumber')->item(0);
    if ($node->nodeValue == $this->cardnumber){
        $node->parentNode->removeChild($node);            
    }
}
$xmldoc->save('newXmlFile.xml'); 
```

（或者）

```
print $xmldoc->saveXML(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T19:03:26.743

```
$xmlDoc->getElementsByTagName("nameNode")->item(0)->parentNode
    ->removeChild($xmlDoc->getElementsByTagName("nameNode")->item(0)); 
```

# android - 空指针异常@stopService()

> ID：16166818
> 
> 赞同：0
> 
> 时间：2013-04-23T10:17:46.280
> 
> 标签：android, android-asynctask, android-service

在我的应用程序中，我正在启动这样的服务：

```
startService(new Intent(SplashScreen.this, GetContactService.class)); 
```

启动服务后，我继续进行另一个活动，然后单击按钮，我已经启动了这样的 Asyctask：

```
class ABC extends AsyncTask<Void, Void, Void>{

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        // my code snippet
    }
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        // my code snippet
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        //stopping the service which I have started earlier
        stopService(new Intent(TelaSketchUtil.this, GetContactService.class));
    }
} 
```

但是在这里它运行良好，直到在后台运行，但是在 Post Execute 的 stopService 行上，它给出了一个空指针异常：

日志猫：

```
04-23 15:25:21.705: W/dalvikvm(26710): threadid=1: thread exiting with uncaught exception (group=0x2b547210)
04-23 15:25:21.715: E/AndroidRuntime(26710): FATAL EXCEPTION: main
04-23 15:25:21.715: E/AndroidRuntime(26710): java.lang.NullPointerException
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.content.ComponentName.<init>(ComponentName.java:75)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.content.Intent.<init>(Intent.java:3146)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at com.telasketch.misc.TelaSketchUtil$GetContactNumber.onPostExecute(TelaSketchUtil.java:225)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at com.telasketch.misc.TelaSketchUtil$GetContactNumber.onPostExecute(TelaSketchUtil.java:1)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.os.AsyncTask.finish(AsyncTask.java:602)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.os.Looper.loop(Looper.java:137)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at android.app.ActivityThread.main(ActivityThread.java:4448)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at java.lang.reflect.Method.invoke(Method.java:511)
04-23 15:25:21.715: E/AndroidRuntime(26710):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-08T05:41:03.360

看来您的`TelaSketchUtil`课程无效`ContextWrapper`。

问题出现在[ContextWrapper.getPackageName()](https://android.googlesource.com/platform/frameworks/base/+/android-m-preview-2/core/java/android/content/ContextWrapper.java#130)中：

```
@Override
public String getPackageName() {
    return mBase.getPackageName();
} 
```

显然，该`mBase`值为空。

由于您没有发布它的代码，我最好的猜测是您的`TelaSketchUtil`类直接扩展`ContextWrapper`，并且`super(null)`在构造函数中进行。这将使您获得一个无法用作`Context`arg 的实例。

它也可能是一些更微妙的问题，例如`TelaSketchUtil`子类化延迟其`ContextWrapper.mBase`初始化的东西，而您的`onPostExecute()`代码在初始化之前运行。不过，这对我来说似乎不太可能，除非你正在做一些非常奇怪的事情。

# php - 正则表达式和匹配

> ID：16166819
> 
> 赞同：12
> 
> 时间：2013-04-23T10:17:47.633
> 
> 标签：php, expression

以下是 PHP 正则表达式示例的示例列表。也许这对某人有所帮助，因为管理员/或其他用户无法清楚地表明我正在尝试分享我的方法。

[preg_match](https://www.php.net/manual/en/function.preg-match.php)进行搜索（[preg_replace](https://www.php.net/manual/en/function.preg-replace.php)是一个替换器）。

preg_match 有三个参数 - preg_match(FindWhat, FindWhere, GivingOutput);

**示例 1）**：

```
<?php
    // Everything expect letters and numbers
    $text = 'abc345fg@h';
    $newfilename = preg_match('/[^a-zA-Z0-9.]/', $text, $out);
    echo $out[0];
?>
Output will be:
@ 
```

preg_match 只找到一个结果（第一个找到的结果），有两个选项： [0] 或[1](https://www.php.net/manual/en/function.preg-match.php)。

**示例 2)**：在我们的搜索条件中查找所有内容（任何字符、单词..）：

```
<?php
    $text = 'abcdefghijklmnopqrst';
    $newfilename = preg_match('/ij(.*?)mn/', $text, $out);
    echo $out[0];
    echo $out[1];
?>
[1] -gives only the inner search result (what we had in the brackets,  between "ij" and "mn"):
kl

[0] -gives the whole search result:
ijklmn 
```

（请注意，如果您在搜索条件中不使用括号，则选项[1不可用（如我们在上面的示例 1 中所示）](https://www.php.net/manual/en/function.preg-match.php)

**示例 3）**：

如果你的目标文本有很多相同的地方，像这样： $text = 'Hello user **Jimmy Jones** , it\'s me. 你好用户**Mery Pawders**，它仍然是我。';

现在，这里有两个不同的匹配，所以，我们需要使用[preg_match_all](https://www.php.net/manual/en/function.preg-match-all.php)

```
<?php
    $text = 'Hello user Jimmy Jones, it\'s me. Hello user Mery Pawders, it\'s me.';
    $newfilename = preg_match_all('/hello user (.*?) it\'s/', $text, $out);
    foreach ($out[1] as $found_one) {
        echo $found_one;
    }
    // Or use $out[0] for full search match
?>

Output will be:
Jimmy Jones,
Mery Pawders, 
```

**示例 4)**：在多种可能性中搜索：

```
<?php
    $text = 'member ACCOUNT7';
    preg_match("/ACCOUNT[123456789]/", $text, $out);
    echo $out[1];
?>

Output will be:
ACCOUNT7 
```

**例 5)**：要查找一个字符串，而输入文本包含新行，则必须在末尾使用**s ；**

```
<?php
    $text = 'one
    two
    three';
    preg_match("/one(.*?)three/s", $text, $out);
    echo $out[1];
?>

Output will be:
two 
```

**示例 6)**：您的搜索始终区分大小写。要进行*不区分大小写*的搜索，请在末尾使用**i**（如果需要，不带**s**）；

```
<?php
    $text = 'ONE TWO TREE';
    preg_match("/one(.*?)three/si", $text, $out);
    echo $out[1];
?> 
```

**例 7)**：要在 preg_match 中搜索**特殊字符**（如 /".<*'? 等），您需要使用此转义符号：\

```
<?php
    $text = 'hello Jimmy/Kroger ';
    preg_match("/Jimmy\/Kroger/", $text, $out);
    echo $out[0];
?> 
```

现在，我们可以使用 ^ 运算符，它反过来搜索结果。

**示例 8)**：查找所有内容而不是字母和数字：

```
<?php
    $text = 'abc@*&^)($%';
    preg_match_all('/[^a-zA-Z0-9.]/', $text, $out);
    foreach ($out[0] as $varr) {
        echo $varr;
    }
?>
Output will be:
@*&^)($% 
```

对于***search***和***replace***，我们有一点不同的结构，因为我们需要使用新变量。

**示例 9)**：使用此运算符查找并替换所有内容**而不是**字母和数字与其他字符：^

```
<?php
    $text = 'ab2sq)(&*(%$%^$@%n23f9';
    $variable = preg_replace('/[^a-zA-Z0-9.]/', 'a', $text);
    echo $variable;
?>
Output will be:
ab2sqn23f9 
```

**示例 10)**：在找到的结果中搜索并添加一些内容：

```
<?php
    $text = 'Hi, it\'s me, Niko from Austria';
    $variable = preg_replace('/(Niko.*?) from/', '$1 Gomez', $text);
    echo $variable;
?>
Output will be:

it's me, Niko Gomez Austria 
```

**示例 11)**：查找文本中的所有链接：

```
<?php
    $text = 'hi, my site is http://example.com, and on my page, at http://example.com/page37/blabla.html I wrote something..';
    preg_match_all("/[[:alpha:]]+:\/\/[^<>[:space:]]+[[:alnum:]\/]/",$text, $out);
    foreach($out[0] as $varr){
        echo $varr;
    }
?>
Output will be:
http://example.com
http://example.com/page37/blabla.html 
```

**示例 12）**：与示例 11 类似（但带有替换） - 在文本中查找链接并将它们放在锚定标签中：

```
<?php
    $text = 'Hi, my site is http://example.com, and on my page, at http://example.com/page37/trid.html I wrote something..';
    $variable = preg_replace("/[[:alpha:]]+:\/\/[^<>[:space:]]+[[:alnum:]\/]/",'<a href="\\0">\\0</a>', $text);
    echo $variable;
?> 
```

输出将是相同的句子，但链接将被锚定。

1)*提示：如果您只想检查一个字符串是否包含在另一个字符串中，请不要使用 preg_match()。请改用 stristr() 或 strpos()，因为它们会更快。*

2) **有关 PHP 正则表达式的更高级、具体的示例，请使用 Google，或查看 ** *完整选项和手册*- h​​ttp: [//www.php.net/manual/en/reference.pcre.pattern.syntax.php](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)

（您可以在这里查看所有运营商列表 -
[http://www.catswhocode.com/blog/15-php-regular-expressions-for-web-developers](http://www.catswhocode.com/blog/15-php-regular-expressions-for-web-developers)
[http://www.noupe.com/php/php-regular -表达式.html](http://www.noupe.com/php/php-regular-expressions.html)
)

3) 对于 HTML 代码，有一种特殊的轻量级 PHP 软件，叫做-DOM Parser。但有时，如果您熟悉 PHP 正则表达式，您可能不需要 DOM 解析器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:19:26.420

试试这个正则表达式：

```
/^Shop.*0$/i 
```

这一个在开始时检查商店，在最后检查零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:27:26.087

我假设，当你说“$email”时，你的意思是`@`标志之前的东西。在这种情况下，您可以使用此正则表达式：

```
$email = 'SHOP_psgarden_0@somewhere.com';
if (preg_match('/^shop.*0@/i', $email) === 1) {
    echo 'Yes!';
} 
```

您还可以使用正常的程序代码进行检查：

```
$email   = 'SHOP_psgarden_0@somewhere.com';
$local   = substr($email, 0, strpos($email, '@'));
$amalgam = substr($local, 0, 4) . substr($local, -1);
if (strcasecmp('shop0', $amalgam) === 0) {
    echo "yes";
} else {
    echo "no";
} 
```

# unity3d - 轮廓轮廓着色器

> ID：16166821
> 
> 赞同：4
> 
> 时间：2013-04-23T10:17:48.607
> 
> 标签：unity3d, shader, outline, cg

我知道这是一个非常有据可查的主题，但我仍然有一些问题。我为轮廓制作了轮廓，但将网格加倍。我的 fps 不错，但轮廓**太刺眼**，我希望它逐渐淡出。结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/ue5sC.png)

它是一个两遍着色器，一个用于以粉红色渲染人，另一个用于渲染具有纹理的人。

我正在考虑在轮廓上应用高斯模糊，但我没有任何结果......有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-14T20:06:41.707

高斯模糊之类的问题在于，它需要了解之前渲染的相邻像素的颜色……而在着色器中，您没有（充其量可以对纹理中的相邻像素进行采样）。大多数制作此效果的游戏会将所有轮廓对象渲染到单独的缓冲区，对其执行一些后期处理，然后将其叠加到屏幕上。

您可以选择的一个稍微有点骇人听闻的选择是根据菲涅耳因子淡出轮廓。基本上，您可以像这样在顶点着色器中获取视图向量：

```
float3 worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;
float3 viewDir = _WorldSpaceCameraPos.xyz - worldPos; 
```

然后你在片段着色器中得到它们之间的点积，如下所示：

```
half NdotV = saturate(dot(IN.normal, IN.viewDir)); 
```

然后你有一个从 0 到 1 的值，具体取决于法线朝向相机的程度。您可以使用它来掩盖轮廓的 alpha：

```
col.a *= sqrt(NdotV); // Square root for more dramatic effect 
```

我还没有尝试过，但它可能值得一试。请记住设置正确的混合和渲染队列。

编辑：您还可以查看此项目：

[https://github.com/cakeslice/Outline-Effect](https://github.com/cakeslice/Outline-Effect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:02:46.920

如何检查抗锯齿是否处于活动状态？

它可以在项目 [质量设置](http://docs.unity3d.com/Documentation/Components/class-QualitySettings.html)中找到。

# php - 从附加的 html 内容生成 pdf

> ID：16166827
> 
> 赞同：0
> 
> 时间：2013-04-23T10:18:07.157
> 
> 标签：php, javascript, html, pdf

我在创建 html 内容的 pdf 时遇到问题

我想将某个 div 中的所有内容转换为 pdf。我现在尝试了几个转换器，但它们只转换 html 文件。我不想转换 html 文件，因为用户使用 javascript 更改页面上的内容。

```
<body>
    <div id="specificDiv>
        <!-- HERE IS THE CONTENT I WANT TO CONVERT -->
    </div>
</body> 
```

我在这件事上缺乏经验，但不应该有一些简单的方法在客户端上运行它而不在服务器上安装一些东西吗？

我试过：[http://jspdf.com/](http://jspdf.com/)和[https://pdfcrowd.com/](https://pdfcrowd.com/)。

jsPdf 处于 html 转换的早期阶段，而 pdfCrowd 刚刚转换了 html 文件（据我了解）

我欢迎所有的帮助和意见。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:11:57.650

由于您想转换用户编辑的页面，您可能需要使用 Javascript 的东西。所以 - 输入 PhantomJS！

[链接到网站](http://phantomjs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:24:40.340

我用过 [http://www.tcpdf.org/](http://www.tcpdf.org/)用 它来生成 PDF 真的很容易。

查看他们的示例：[http ://www.tcpdf.org/examples.php](http://www.tcpdf.org/examples.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:29:03.333

您可以使用

1.HTML2PDF [http://html2pdf.fr/en/example](http://html2pdf.fr/en/example)

2.tcpdf [http://www.tcpdf.org](http://www.tcpdf.org)

3.MPDF [http://www.mpdf1.com/mpdf/index.php](http://www.mpdf1.com/mpdf/index.php)

# android - 如何在我的自定义适配器中检查访客的 onTouch 侦听器的 android id

> ID：16166828
> 
> 赞同：0
> 
> 时间：2013-04-23T10:18:11.307
> 
> 标签：android

在我的应用程序中，我需要双击图像视图，因为我实现了手势。在这里我也使用了图像视图，我无法识别哪个图像被点击了它的图像一个或图像。我在我的自定义适配器中实现了这段代码。这是我的代码供您参考，

```
gestureDetector = new GestureDetector(this);
        gestureDetector.setOnDoubleTapListener(this);

holder.imgOne.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        });
        holder.imgTwo.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        });

        //////////////////////

            @Override
    public boolean onDoubleTap(MotionEvent arg0) {
        Log.e("DOUBLE TAP", "WORKING");
        return true;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent arg0) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
            float distanceY) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        Log.e("SINGLE TAB CLICKED", e.getSource() + "");
        // new PopupImageDialog(assingValue.leftPicThumb, "leftPic").execute();
        return true;
    } 
```

如果我们实施`onClickListener()`意味着我们可以获得 ID，那么我如何才能获得 ID。我如何识别按钮触摸。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:27:27.057

好吧，也许它是某种肮脏的黑客，但我希望它会奏效。

```
holder.imgOne.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                event.setSource(v.getId);
                return gestureDetector.onTouchEvent(event);
            }
        });
        holder.imgTwo.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                event.setSource(v.getId);
                return gestureDetector.onTouchEvent(event);
            }
        }); 
```

然后使用 getSource() 获取视图 ID。

# java - 如何将 zip 文件读取为字节数组，然后将字节数组转换回 zip 文件？

> ID：16166830
> 
> 赞同：5
> 
> 时间：2013-04-23T10:18:12.973
> 
> 标签：java, zip, bytearray

我尝试使用此代码将 ZIP 文件转换为字节数组：

```
private static byte[] readZipFile(String zipFnm)
// read in fnm, returning it as a single string
{

  FileInputStream fileInputStream=null;

  File file = new File(zipFnm);

  byte[] bFile = new byte[(int) file.length()];

  try{
    //convert file into array of bytes
    fileInputStream = new FileInputStream(zipFnm);
    fileInputStream.read(bFile);
    fileInputStream.close();
  }catch(Exception e){
    e.printStackTrace();
  }
  return bFile;
} 
```

以及用于将字节数组转换回 ZIP 的代码，通过调用`writeByteToZip(fnm + ".zip");`

```
private static String writeByteToZip(String outFnm)
{
  try {
    FileOutputStream fileOuputStream = new FileOutputStream(outFnm); 
    fileOuputStream.write(bFile);
    fileOuputStream.close();            

  } catch ( IOException iox ){
    iox.printStackTrace();
  }
  return outFnm;
}  // end of writeByteToZip() 
```

我究竟做错了什么？我使用正确的 zip 字节长度

```
byte[] bzip = readZipFile(zipFnm);

int totalLen1 = bzip.length;
System.out.println("Total byte length of zip: " + totalLen1); 
```

我得到的只是一个零大小的 zip 文件和 Netbeans 中的运行时错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.io.FileOutputStream.write(FileOutputStream.java:305)
    at steg.Steg.writeByteToZip(Steg.java:402)
    at steg.Steg.save(Steg.java:292)
    at steg.frame1.jButton2ActionPerformed(frame1.java:349)
    at steg.frame1.access$300(frame1.java:24)
    at steg.frame1$4.actionPerformed(frame1.java:172)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:24:53.537

您提供的堆栈跟踪将由于`bFile`为空而导致。

原因可能是您的`readZipFile`方法中的以下行：

```
byte[] bFile = new byte[(int) file.length()]; 
```

在这里，您分配给*局部*变量，而不是您的类字段。尝试将该行替换为：

```
bFile = new byte[file.length()]; 
```

* * *

您的代码还展示了糟糕的资源处理。使用现有的库方法进行阅读（例如[commons-io](http://commons.apache.org/proper/commons-io/apidocs/index.html?org/apache/commons/io/FileUtils.html)或 Java 7 [`Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllBytes%28java.nio.file.Path%29)）或编写代码，例如：

```
FileInputStream fileInputStream = null;
try {
  fileInputStream = new //...
} finally {
  if (fileInputStream != null) {
    fileInputStream.close();
  }
} 
```

如果您有 Java 7，则可以使用 try-with-resources：

```
try (FileInputStream fileInputStream = new FileInputStream(zipFnm)) {
  // Use your stream
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:26:44.587

问题可能`bFile`是`writeByteToZip()`. 确保它不是`null`。

将来，当您发布引发异常的代码时，请用注释 ( `// <-- NullPointerException here`)标记异常发生的行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T10:43:00.833

我没有检查你的代码。但我正在处理这样的要求。所以感觉就像分享我的代码。

要读取 zip 文件并转换为字节数组：

```
public byte[] readXMLFile(){
        File file = new File("a.xml");

        byte[] b = new byte[(int) file.length()];
        try {
            FileInputStream fileInputStream = new FileInputStream(file);
            fileInputStream.read(b);
            fileInputStream.close();
        }catch (FileNotFoundException e) {
            System.out.println("File Not Found.");
            e.printStackTrace();
        }catch (IOException e1) {
            System.out.println("Error Reading The File.");
            e1.printStackTrace();
        }
        return b;
    } 
```

从字节数组写入 zip 文件：

```
public void writeXMLFile(byte[] fileContent){
        try {
            FileOutputStream fos = new FileOutputStream("abc.xml");

            fos.write(fileContent);
            fos.close();
        }catch(FileNotFoundException ex){
            System.out.println("FileNotFoundException : " + ex);
        }catch(IOException ioe)  {
            System.out.println("IOException : " + ioe);
        }
    } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:32:05.717

如前所述，该文件可能不存在。

但是，我只是想提一下您可以使用的 Java 7 中的实用程序。[`Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)课程提供：

```
static byte[] readAllBytes(Path path)
static Path write(Path path, byte[] bytes, OpenOption... options) 
```

接缝完全符合您的需要。文件是否为 Zip 并不重要，您只需轻松获取字节，然后使用它们将它们写入其他文件即可。请注意，Java 7 中的 Path 表示相关文件的路径。

# android - Tablerow 在 android 中有一个 listitem

> ID：16166834
> 
> 赞同：0
> 
> 时间：2013-04-23T10:18:22.673
> 
> 标签：android, android-layout, android-intent, android-emulator

我有一个带有 listitem 的表格行（只有一项）

布局xml：

```
<TableRow android:id="@+id/first_row" >  
    <ListView
        android:id="@+id/list1"
        android:layout_width="fill_parent"
        android:layout_height="85dp"
        android:layout_weight="0.55" >
    </ListView>
</TableRow> 
```

活动类：

```
TableRow firstRow =(TableRow)findViewById(R.id.first_row);
firstRow.setOnClickListener(new View.OnClickListener() {            
    @Override
    public void onClick(View v) {
        Log.d("First row clicked", "First row clicked");                
    }
}); 
```

问题是，如果我单击 tablerow，那么我将无法获取日志语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:22:35.253

尝试在“list1”上设置监听器，因为它占用了 TableRow 的所有空间。因此，当您尝试为 TableRow 计时时，您实际上是在单击“list1”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:23:46.940

您应该单击列表视图，因为它正在处理 tablerow onclick

```
ListView list =(ListView)findViewById(R.id.list1);
list.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    }
  });
}} 
```

但是，在 tablerow 中有一个 listview 的目的是什么？

# jquery - 剑道 ui 图表图例与图表重叠

> ID：16166842
> 
> 赞同：1
> 
> 时间：2013-04-23T10:18:36.633
> 
> 标签：jquery, jquery-mobile, kendo-ui, kendo-chart, kendo-dataviz

我有一个 kendo ui datawiz(chart) 组件，我在移动设备中使用它，当有大量数据时，我无法完全显示购物车。图例似乎与图表重叠。下面是我的代码'正在使用..是否有任何配置需要更改，以使图例不与图表重叠..

```
$("#chart").kendoChart({
                    title: {
                        text: applicationData.selectedKPI.descr,
                        color: '#00337f',
                        font: "bold 16px  Segoe UI,sans-serif"

                    },
                    seriesDefaults: {
                        type: applicationData.selectedKPI.chartType
                    },
                    chartArea: {
                        background: '#c5deca'
                    },
                    legend: {
                        visible: true,
                        position: "bottom",
                        offsetX: 20,
                        offsetY: 15,
                        labels: {
                            //font: "9px Arial,Helvetica,sans-serif"
                        },

                    },
                    dataSource: {
                        data: applicationData.selectedKPI.chartData
                    },
                    series: [{
                        field: "series",
                        startAngle: 40,
                        categoryField: "categories",
                        labels: {
                            visible: true,
                            background: "transparent",
                            //position: "outsideEnd",  
                            //template: "#= value#",
                            format: applicationData.selectedKPI.valAxisFmt,
                            padding: -10,
                            margin: 10
                            //font: "9px Arial,Helvetica,sans-serif"                            
                        }
                    }],
                    categoryAxis: {
                        categories: applicationData.selectedKPI.chartCategories,
                        majorGridLines: {
                            visible: false
                        },
                        labels: {
                            rotation: getCatRot(applicationData.selectedKPI.chartType)
                        }
                    },
                    valueAxis: {
                        labels: {
                            step: 3,
                            rotation: getValRot(applicationData.selectedKPI.chartType),
                            format: applicationData.selectedKPI.valAxisFmt
                        }
                    },
                    tooltip: {
                        visible: true,
                        format: "{0}"

                    }
                }).data("kendoChart"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T11:26:05.090

您可以在图表图例中添加一些旋转。除了将图例显示为水平线之外，您还可以将它们移动到某个角度，例如 320。您需要使用的代码只是将以下属性添加到标签对象，如下所示：

```
legend: {
    visible: true,
    position: "bottom",
    offsetX: 20,
    offsetY: 15,
    labels: {
        //font: "9px Arial,Helvetica,sans-serif"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:47:03.010

在 MVC 模式下，您可以使用：

```
.Legend(legend => legend
.Position(ChartLegendPosition.Bottom).Labels(x => x.Font(font: "9px Arial,Helvetica,sans-serif")
)
) 
```

# javascript - iOS：具有-webkit-backface-visibility的多个div：缩放时隐藏的崩溃浏览器

> ID：16166849
> 
> 赞同：5
> 
> 时间：2013-04-23T10:19:09.873
> 
> 标签：javascript, html, ios, css

当我在 iPad 4 浏览器（无论是 Safari 还是 Chrome）上查看以下 html 页面时，浏览器在缩放时崩溃（双击缩放或捏合缩放）。该页面包含 40 个简单的 div（为简洁起见由 javascript 插入），具有属性 -webkit-backface-visibility:hidden。

```
<!doctype html>
<html>
<head>
    <style>
        .front {
            -webkit-backface-visibility: hidden;
            position: absolute;
            border: 1px solid black;
            width: 800px;
            height: 800px;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>    
</head>

<body id="outer">
    <script>
        $(function() {
            for (var i = 0; i < 40; i++) {
                $(document.createElement('div'))
                    .css({top: i*10, left: i*10})
                    .addClass("front").appendTo($("#outer"));
            }
        })
    </script>
</body>
</html> 
```

同样的问题大概也发生在 iPhone 和旧 iPad 上。这是一个奇怪而烦人的错误；当我停用内部元素的 -webkit-backface-visibility:hidden 样式时，它不会发生。

您可能会问：为什么我不简单地删除 -webkit-backface-visibility:hidden 样式，因为它在此页面上没有任何区别？好吧，这是一个最小的反例，我需要在实际的、更复杂的页面上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T13:19:45.193

似乎移动版 Safari 在 css3 属性（如转换、变换或背面可见性）方面存在一些问题，并且有时会出现内存不足。

看：

*   [iOS 上的移动 Safari 在大页面上崩溃](https://stackoverflow.com/questions/11831429/mobile-safari-on-ios-crashes-on-big-pages)
*   [http://www.dimshik.com/ios-7-runs-out-of-memory-when-using-webkit-transform/](http://www.dimshik.com/ios-7-runs-out-of-memory-when-using-webkit-transform/)
*   [CSS3 过渡（供应商前缀）立即使 Safari 崩溃](https://stackoverflow.com/questions/19130896/css3-transition-vendor-prefixes-crashes-safari-immediately)
*   [iOS Safari + CSS calc() + CSS 转换 = Instant Crash](https://stackoverflow.com/questions/14055461/ios-safari-css-calc-css-transition-instant-crash)

但不幸的是，除了删除该属性之外，没有已知的解决方法......你是如何解决你的问题的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T20:44:57.537

尽量不要使用`position: absolute;`，而是使用`position: relative;`.

您也可以尝试`-webkit-perspective: 1000;`与`-webkit-backface-visibility: hidden;`

# c# - 带有两个 where 子句的 Linq 语句

> ID：16166851
> 
> 赞同：4
> 
> 时间：2013-04-23T10:19:18.933
> 
> 标签：c#, asp.net-mvc-3, linq, lambda

我正在努力解决以下问题。

```
 public class Competition
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<ResultInfo> ResultInfos { get; set; }
    public IList<Event> ChildEvents { get; set; }
}

public class ResultInfo
{
    public int Id { get; set;}
    public string ResultInfoName { get; set;}
    public int Season { get; set; }
}

public class Event
{
    public int Id { get; set; }
    public string EventName { get; set; }
    public IList<ResultInfo> ResultInfos { get; set; } 
} 
```

我正在尝试如下查询，以尝试从比赛和活动中获取“2013”​​赛季的结果信息。如果有人知道，请指教。

```
if (year.HasValue)
{
   model = model.Where(x => x. ??           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:22:37.733

你可以做：

```
var competitions = new Competition(); // Populated competition class

var results = (from c in competitions
               from e in c.ChildEvents
               from ri in e.ResultInfos
               where ri.Season == 2013).ToList(); 
```

目前还不清楚为什么你需要一个额外的`where`，但你可以扩展它并有另一个子句，例如

```
where ri.Season == 2013 && EventName == "Event" 
```

正如@von.v 所指出的，您可以`ResultInfos`通过 Competition 类直接访问，因此您可以通过以下方式简化它：

```
 var results = (from c in competitions
                  from ri in c.ResultInfos
                  where ri.Season == 2013).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:11:27.377

我不undersant你想要什么？如果您希望比赛有 2013 年的结果信息和 2013 年的结果信息，您可以这样做：

```
model.Where(c => c.ChildEvents
                  .SelectMany(ce => ce.ResultInfos)
                  .Where(ri => ri.Season == 2013).Count() > 0
            &&
            c.ResultInfos.Where(ri => ri.Season == 2013).Count() > 0)
     .ToList(); 
```

但我不确定我是否理解你需要什么

# javascript - 如何在Java脚本中为按钮onclick事件调用方法背后的代码

> ID：16166852
> 
> 赞同：0
> 
> 时间：2013-04-23T10:19:20.573
> 
> 标签：javascript, asp.net

当我通过 javascript/jquery 单击按钮时，我想触发此方法

这是我的网络方法，

```
 [WebMethod] 
public static string haldlescrolling(string name, string address)
{
    String str = string.Empty;

    httpWebRequest2 =             (HttpWebRequest)WebRequest.Create("http://ws.vidlib.com/video/list");
    httpWebRequest2.ContentType = "application/json";
    httpWebRequest2.Method = "POST";

    int start1 = start + 10;

    using (var streamWriter = new StreamWriter(httpWebRequest2.GetRequestStream()))
    {
        int max1 = max + 10;
        max = max + 10;
        string more = "{\"StartRowIndex\":\"" + start + "\",\"MaximumRows\":\"" + max + "\"}";
       // string json2 = js + more;
        streamWriter.Write(more);
        streamWriter.Flush();
        streamWriter.Close();
        var httpResponse = (HttpWebResponse)httpWebRequest2.GetResponse();
        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
        {
            string result = streamReader.ReadToEnd();
            l1 = (List<Test>)Newtonsoft.Json.JsonConvert.DeserializeObject(result, typeof(List<Test>));
            for (int i = 0; i < l1.Count; i++)
            {
                str = str + "<img src='https://s3.amazonaws.com/movingmediapurchase/thumbnail/48748.jpg' />";
                string video_id = l1[i].ClipId.ToString();
                str = str + "<div id='parent'  style=\"position:relative; float:left; text-align: top;\" onmouseover='callMouseOver(\"" + video_id + "\")' onmouseout='callMouseOut(\"" + video_id + "\")' ><a href='" + l1[i].PreviewUrl.ToString() + "' class='html5lightbox' data-width='450' data-height='350'><img src='" + l1[i].ThumbnailUrl.ToString() + "' class ='thumbnail'/></a><div id='" + video_id + "' style='display: none;position: absolute; z-index:10000; top: 110px; left:30px ; height: 34px;'><img src='tweetbutton.png'/><img src ='small-facebook-like-butto.gif' /><img src='pinit-button.png' /></div></div>" + "&nbsp;";

                /*
                Label1.Text = l1.Count.ToString();
                Image1.ImageUrl = l1[0].ThumbnailUrl.ToString();
                Label1.Text = l1[0].ThumbnailUrl.ToString();
                 * 
                 */
            }
        }
    }
    return str;
} 
```

如何创建javascript方法来调用上述方法背后的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:42:52.323

如果您使用的是 jQuery（我会在您的情况下推荐），您可以使用这样的一些 javascript 代码：

```
$(function() {
    $('#idOfButton').click(function() {
        $.ajax({
            type: "POST",
            url: "Default.aspx/haldlescrolling",
            data: "{name: 'name', address: 'address'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                // do something on success
                $('#idOfDiv').html(msg.d);
            },
            error: function() {
                // do something on error
            }
        });
    });
}); 
```

第一行表示加载 DOM 时将执行一个函数：

```
$(function() {}); 
```

第二行将事件处理程序附加到具有 id 的按钮的单击事件`idOfButton`：

```
$('#idOfButton').click(function() {}); 
```

该`$.ajax()`调用是来自 jQuery（请参阅[文档](http://api.jquery.com/jQuery.ajax/)）的一种方法，用于使 ajax 调用更容易。

上面的代码不是纯 javascript，而是依赖于 jQuery。jQuery 是一个库，可以使您的 javascript 代码更容易和更具可读性。我绝对推荐你使用它，但还有其他库。

# ios - 当用户登录他/她的 iOS 应用程序时访问基本配置文件

> ID：16166858
> 
> 赞同：3
> 
> 时间：2013-04-23T10:19:35.327
> 
> 标签：ios, objective-c, facebook, facebook-login

我已经完成了 Facebook 图形 api 用于 facebook 身份验证或获取用户 Facebook 详细信息，但我还想实现另一件事。假设用户已经通过 Facebook iOS 应用程序登录 Facebook，在这种情况下，当我打开时我的应用程序或单击登录按钮，然后它会向我显示警报，上面写着“*应用程序想要访问您的基本个人资料信息*”，例如 Friend Smasher 应用程序，以便用户可以通过单击确定按钮获取他的基本个人资料，但如果用户不是登录他的 Facebook iOS 应用程序，然后它可能会要求输入用户名和密码或登录页面。

如果用户已经登录 Facebook iOS 应用程序，如果有人知道如何访问应用程序中的基本用户个人资料，那么请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T21:58:49.437

鉴于您已经连接了一个用户，这就是您获取他信息的方式。

```
FBRequest *userRequest = [FBRequest requestForGraphPath:@"/me/?fields=gender,interested_in,relationship_status,email,first_name,last_name,location,id,birthday"];

[userRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (!error) {
         //For instance:
         NSLog([result first_name]);
         NSLog([result last_name]);
         NSLog([result birthday]);
         NSLog([result first_name]);
         NSLog([[result objectForKey:(@"location")] objectForKey:(@"name")]);
    } else {
         NSLog(@"User not found");
    }
]; 
```

# jquery - jquery datebox 没有加载该名称的模式/未给出模式

> ID：16166859
> 
> 赞同：0
> 
> 时间：2013-04-23T10:19:35.850
> 
> 标签：jquery, jquery-mobile, jquery-ui-datepicker, datebox

我的 Rails 应用程序中需要一个时间选择器，而 jquery 日期框看起来很完美，但我无法让它工作。

在我的 application.html.haml 我有

```
%link{:href => "http://code.jquery.com/mobile/latest/jquery.mobile.min.css", :rel => "stylesheet", :type => "text/css"}/
%link{:href => "http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css", :rel => "stylesheet", :type => "text/css"}/
%script{:src => "http://code.jquery.com/mobile/latest/jquery.mobile.min.js", :type => "text/javascript"}
%script{:src => "http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js", :type => "text/javascript"}
%script{:src => "http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js", :type => "text/javascript"}
%script{:src => "http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js", :type => "text/javascript"} 
```

还有我的haml代码

```
%label{:for => "mydate"} Some Time
%input#mydate{"data-options" => "{\"mode\" => \"flipbox\"}", "data-role" => "datebox", :name => "mydate", :type => "date"}/ 
```

这得到翻译，如下所示[http://cl.ly/image/1Y0t210L3a3c](http://cl.ly/image/1Y0t210L3a3c)

我总是遇到的错误是[http://cl.ly/image/1a0l3A20471r](http://cl.ly/image/1a0l3A20471r)

我从 datebox 尝试了不同的盒子类型，但只有 calbox 有效。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:27:12.787

好吧，您的部分问题可能出在此处：

```
%script{:src => "http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js", :type => "text/javascript"} 
```

这仅加载*“* calbox”模式。如果您想使用翻转盒，如上面的 haml 代码中所示，您需要/还需要：

```
%script{:src => "http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.flipbox.min.js", :type => "text/javascript"} 
```

您的下一个问题是（可能）在翻译后的代码片段中 - 数据选项用双引号括起来，对象中的每个项目也是如此 - 根据浏览器，它会导致 javascript 解析它们的问题。您可以决定不使用数据选项，而是使用长选项...即：

```
data-datebox-mode="calbox" 
```

（注意：我已经有一段时间没有测试过长选项了，也不完全记得它是如何工作的——如果它失败了，请告诉我。）

否则，它可能需要弄乱haml解析器才能让它发挥得很好——这可能比它的价值更麻烦（不确定，我对产品不是很熟悉）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T11:21:37.277

数据选项部分需要用单引号括起来。使用双引号对我不起作用

```
data-options='{"mode":"datebox"}' 
```

# integration-testing - Liquibase Diff Tool 缺少约束

> ID：16166864
> 
> 赞同：1
> 
> 时间：2013-04-23T10:20:12.500
> 
> 标签：integration-testing, liquibase

我们正在使用我公司 Liquibase 的 diff 工具，通过 jUNIT 测试自动检查客户 MySQL 和 Oracle 数据库的模式相关性。在这一点上，Liquibase 很棒。

我们的问题是 Liquibase 似乎“错过”了一些外键重命名，而其他工具（如 SQL 检查器或 RedGate MySQL 比较似乎发现所有外键命名差异）。

这个特性对我们来说非常重要，而我们需要为维护操作保持精确的模式一致性（DROP foreign_key 等）

有没有办法在java中为 Diff.compare() 方法添加一个选项来显示这种不稳定？

```
final Diff locResultDiff = new Diff(_referenceDatabase, _cibleDatabase);
_diffResult = locResultDiff.compare(); 
```

或者有人可以提出其他解决方案来完成这些任务吗？

# tdd - 如何使用 Equinox/OSGi 遵循测试优先方法 - Tycho - Eclipse RCP 环境

> ID：16166866
> 
> 赞同：4
> 
> 时间：2013-04-23T10:20:24.787
> 
> 标签：tdd, osgi, eclipse-rcp, equinox, tycho

我加入了一个使用 Equinox/OSGi、Tycho 在 Eclipse RCP 平台上进行开发的项目。

我正在慢慢熟悉 OSGi 的类路径/类加载机制、tycho、Equinox 的工作原理等。

我正在使用模拟编写简单的单元测试，方法是将它们收集在测试包（它们是目标包的片段）中，但是我遇到了 ClassNotFound 错误，附加源代码的问题。我已经看到了一些建议，例如将测试作为 rcp 插件测试或在集成测试范围内使用 tycho。但是，我发现所有这些方法对于运行测试来说都非常缓慢并且会适得其反。

据我了解，这种环境（Tycho、Eclipse RCP 或两者）中的某种依赖解析机制与我的假设有点不同。当我将新实现添加到主机包以满足我的测试时，除非我为主机包运行 mvn install （tycho 正在接管），否则测试包不会选择所有新实现。有时，由于缺少依赖项，这需要完全安装项目。我尝试的另一种方法是将测试作为 JUnit-plugin 测试运行。由于 tycho 的依赖解析，该方法也很慢，并且它正在加载所有捆绑包。

我想知道运行单元测试的最佳方法是什么？（当我说单元测试时，我指的是单元测试的真正定义，其中交互被模拟并且测试在几毫秒内运行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:55:44.283

只要您的测试不依赖于 OSGi，您就可以像*Run as > JUnit Test 一样执行它们*在 Eclipse这将在没有 OSGi 运行时的情况下启动测试，但具有正常的类路径，并且所有包都被视为正常的 JAR。只要测试和被测代码不需要来自 OSGi 运行时的任何东西（如捆绑激活、服务等），它就可以工作。

如果存在这种依赖关系，测试通常会由于未初始化的字段而失败，例如使用 NPE。在这种情况下，您需要在 Eclipse中将测试作为*JUnit 插件测试运行。*您可以调整这些测试的启动时间

*   通过将*程序更改为运行*以*运行应用程序：[无应用程序] - 无头模式*，以及
*   通过只选择那些真正需要运行测试的包。这可能会非常复杂，因此如果您是 OSGi 新手，我不建议您这样做。

作为完整 Maven/Tycho 构建的一部分运行测试通常比在 Eclipse 中运行测试慢很多。就个人而言，我只是在将更改推送到中央存储库之前将其作为输出限定。

# jasper-reports - JasperReports JRXML 在 jrxml 中嵌入记录数组

> ID：16166868
> 
> 赞同：0
> 
> 时间：2013-04-23T10:20:46.700
> 
> 标签：jasper-reports

我正在尝试为我的表**嵌入**jrxml 记录数组。我想我可以在 Ireport 中使用变量表达式。我知道如何为我的表创建一条记录，但我不知道如何在**不使用 Java 类**的情况下创建许多记录。我的数据不是静态的。他们是动态的。

我需要以编程方式创建 jxml 模板。而且我们的平台不是Java。我想在变量表达式中创建一个 JavaCollection- 记录数组，并将这个集合用作我的表的 JrBeanCollectionDatasource。然后使用 $F{field_name} 从这个 bean 中检索数据。真的有可能吗？

# c# - 奇怪的 ASP.net 标签和回发问题

> ID：16166869
> 
> 赞同：0
> 
> 时间：2013-04-23T10:20:55.607
> 
> 标签：c#, asp.net, postback

我将尽可能准确和描述这个错误，就我目前所见，它似乎是随机的。

为了提供一些背景信息，我正在创建一个在线商店，用户单击“添加”按钮以从我的 gridview 的模板字段中将项目添加到他们的购物车。这会将他们想要购买的商品插入到购物车数据库表中，然后当单击“购物车”图标以显示内容时，该表会通过网格视图显示。

现在，当用户单击该项目时，将运行检查以确保该项目尚未在购物篮中。如果它在其中，则将其更新为新数量，如果不是，则将其插入购物车数据库，同时更新标签以显示商品数量。**除了我遇到令人沮丧的错误之外，这一切都很好，有时按钮在单击项目时根本不会添加或更新购物车或标签总数。**这似乎最常发生在第一个网格项目上。

我已经通过调试器，它似乎都在工作，正确的 ID 正在从 gridrow 等获得。**我想知道这是否是某种回发问题**

在站点主onload方法中设置购物车内容的代码，加载方法：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (Session["usersName"] != null)
        {
            object a = Session["_id"];
            IDMaster = Convert.ToInt32(a);

            UserWelcome.Text = "Welcome back " + Session["usersName"].ToString();
            cartButton.Visible = true;
            Label1.Visible = true;
            Label2.Visible = true;
            memberLogin.Visible = false;
            LblOr.Visible = false;
            lblPlease.Visible = false;
            memberLogin.Visible = false;
            memberReg.Visible = false;

        }

        else
        {
            cartButton.Visible = false;
            Label1.Visible = false;
            Label2.Visible = false;
            UserWelcome.Visible = false;
            memberLogin.Visible = true;
            memberLogout.Visible = false;
            LblOr.Visible = true;
            lblPlease.Visible = true;
            memberLogin.Visible = true;
            memberReg.Visible = true;

            MenuItem foo = NavigationMenu.FindItem("My Orders"); // your particular item
            NavigationMenu.Items.Remove(foo);

        }

        setCart();

    }

    private void setCart()
    {

        int cartItems;
        string cartNos;

        SqlConnection sqlcon = new SqlConnection(connString);
        SqlCommand sqlcmd = new SqlCommand("SELECT * FROM contents WHERE memberID = " + IDMaster + "", sqlcon);
        SqlDataAdapter adp = new SqlDataAdapter(sqlcmd);
        DataSet ds = new DataSet();
        adp.Fill(ds);

        if (ds.Tables[0].Rows.Count > 0)
        {
            cartItems = ds.Tables[0].Rows.Count;
            cartNos = cartItems.ToString();
            Label1.Text = cartNos;
        }

        else
        {

            int noItems = 0;
            string convertEmptyItems;

            convertEmptyItems = noItems.ToString();
            Label1.Text = convertEmptyItems;
        }

    } 
```

用于添加或更新购物车的代码取决于项目是否已经存在：

```
 GridViewRow row = ((Button)sender).Parent.Parent as GridViewRow;
        TextBox t = (TextBox)row.FindControl("txtQuan");

        object ID = GridView1.DataKeys[row.RowIndex].Value;

        rowID = Convert.ToInt32(ID);

        ViewState["ID"] = rowID;

        string qty = t.Text;

        int stockToAdd = Convert.ToInt32(qty);

        DBHandler add = new DBHandler(rowID);

        int qtyCheck = add.getStockQty();

        if (stockToAdd > qtyCheck)
        {

            Button2_ModalPopupExtender.Show();

        }

        else{

            SqlConnection con;
            con = add.openDB();

            con.Open();

            DBHandler idCheck = new DBHandler(rowID);
            int rows = idCheck.checkCartRows();

            if (rows > 0)
            {
               int qtyNow = idCheck.getCartQty();

                int updateStock = qtyNow + stockToAdd;

                idCheck.updateQty(rowID, updateStock);
                updatePanel();

            }

            else
            {

                idCheck.insertCart(IDMaster, qty);
                updatePanel();

            }
            add.close();

            DBHandler updateCart = new DBHandler(IDMaster);

            int newRows = updateCart.checkCartRowsAfterUpdate();

            string numberOfRows = newRows.ToString();

            ((Label)this.Master.FindControl("Label1")).Text = numberOfRows;

        }

        } 
```

很抱歉对这个问题含糊不清，但我真的可以确定！希望有人会看到我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:58:24.270

好的，对此进行了排序。原来这是我错过的东西。基本上，当我显示我的购物车内容时，我正在为所有会员购物车显示它。这让我感到困惑，因为此时它正在添加该项目。我的“购物车”只会显示通过会话变量登录的特定成员的内容。当我的购物车检查该项目是否已添加时，它会看到为所有成员添加的所有项目，所以当然，如果另一个成员已经在购物车中添加了该项目，它永远不会添加它，它只是会更新它，因为它正在为其他成员添加它，所以标签不会更新。一旦我删除了购物车内容，我就可以添加它。所以基本上我现在已经修复了我的代码，以便每个项目都有添加它的成员的相应 ID，并且它工作正常。

这里的关键规则是检查代码的所有进程是否缺少一些愚蠢的东西。

# c# - 添加具有独特内容的自定义属性

> ID：16166870
> 
> 赞同：1
> 
> 时间：2013-04-23T10:20:56.760
> 
> 标签：c#, wpf, attributes, dependency-properties, custom-attributes

我正在寻找一种将自定义属性添加到 xaml 控件的方法。

我找到了这个解决方案：[向 XAML 中的元素添加自定义属性？](https://stackoverflow.com/a/5782985/1115471)

不是我的问题：我怎样才能只允许唯一的内容（如名称属性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:02:28.697

的行为`attached properties`是“允许不同的子元素为在父元素中实际定义的属性指定唯一值”

阅读“ `Why Use Attached Properties`”部分以获得更好的理解。因此我们无法保持独特的价值

参考 :: 参考[链接](http://msdn.microsoft.com/en-IN/library/ms749011.aspx)

# c++ - javacpp中的“不允许命名空间名称”错误

> ID：16166872
> 
> 赞同：1
> 
> 时间：2013-04-23T10:21:00.437
> 
> 标签：c++, cuda, javacpp

我正在尝试在使用 maven 构建的 java 应用程序中使用[此](http://code.google.com/p/javacpp/wiki/ThrustAndCUDA)示例。pom.xml 包括

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <id>javacpp</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                    <configuration>
                        <executable>java</executable>
                        <arguments>
                            <argument>-jar</argument>       <argument>/home/JCuda/javacpp.jar</argument>
                            <argument>-classpath</argument> <argument>${project.build.outputDirectory}:/home/JCuda/jcuda-0.5.0.jar:/home/JCuda/jcusparse-0.5.0.jar</argument>
                            <argument>-d</argument>         <argument>${project.build.outputDirectory}/lib/</argument>
                            <argument>-properties</argument>    <argument>linux-x86_64-cuda</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

当 nvcc 正在编译 .cu 文件时，它显示错误
**/home/TestWebapp6/target/classes/lib/jniCudaOps.cu(1154): error: a namespace name is not allowed**
which in code is this line

```
JNIEXPORT void JNICALL Java_com_skenzo_cuda_CudaOps_copy(JNIEnv* env, jclass cls, jobject arg0, jobject arg1, jobject arg2) {
    thrust* ptr0 = arg0; //line showing the first error
    thrust* ptr1 = arg1;
.... 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:44:00.243

可能是一个更适合 javacpp 邮件列表的问题。例如查看[这个线程](https://groups.google.com/d/msg/javacpp-project/jgfrY11sdFg/33hDjuZLIKEJ)。

# .htaccess - Cron 作业和 htaccess 身份验证

> ID：16166876
> 
> 赞同：1
> 
> 时间：2013-04-23T10:21:33.220
> 
> 标签：.htaccess, authentication, cron

我在服务器中有一个计划任务设置，并且域处于 htaccess 身份验证模式。

所以这就是 cron 说“授权失败”的原因

有什么方法可以将用户名和密码放入我指定为 cron url 的 url 中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:25:34.190

是的，您可以，但`username:password`在 URL 中用冒号分隔：

```
http://username:password@example.com/path/to/file 
```

只要您使用[BASIC 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)而不是 DIGEST 身份验证。

# file-upload - Symfony 使用 sfValidatorFile 上传 doc、docx 文件 Mime 类型问题

> ID：16166879
> 
> 赞同：0
> 
> 时间：2013-04-23T10:21:37.857
> 
> 标签：file-upload, symfony-1.4, mime-types

我正在使用 sfValidatorFile 类来允许用户在 symfony 1.4 中上传 pdf 或文档。但它不适用于文档，它返回阻止上传文档的 mime 类型 octet-stream。

[我已经尝试过这里](https://stackoverflow.com/questions/2104127/uploaded-docx-files-turning-into-zip)提供的解决方案！

但不幸的是，它不起作用。这是我的代码。

```
'my_filename' => new sfValidatorFile(
              array ('required'=>false,
                     'mime_type_guessers' => array('guessFromFileinfo'),
                     'mime_types' =>  array ( 'application/pdf',
                                              'application/msword',
                                              'application/vnd.openxmlformats-
                                              officedocument.wordprocessingml.document',                
                                                  'application/vnd.ms-word',
                                                  'application/x-msword',
                                                  'application/msword;     charset=binary')) ,
                array( 'mime_types'=> 'only doc, docx and pdf files are allowed' )), 
```

还尝试使用同一链接上提供的 msValidatorFile 类解决方案，但它也允许上传 zip 和 rar。

有没有办法只允许上传pdf和文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:31:28.280

经过一段时间我在这里找到了另一个解决方案共享后，它不依赖于系统。

使用 PHP mime_content_type 函数，即使在手动更改扩展名后，我们也可以获得 exect mime 类型。虽然它在 linux 许可证版本上不起作用。但仍然在其他平台上我们可以使用它。

# php - 在 php 和 pdo 中创建动态搜索查询

> ID：16166884
> 
> 赞同：-2
> 
> 时间：2013-04-23T10:21:51.337
> 
> 标签：php, pdo

我一直试图让它工作，但我认为我的 sql 设置不正确。

例如，我试图从 URL 中获取搜索词，然后使用准备好的语句将其插入，以便在数据库中安全使用。

首先，我从会话中调用他们拥有的产品的用户 ID。

然后我检查他们是否有超过 1 个项目，如果他们设置了一个数组并插入到数据库中，如果他们没有超过 1 个项目，那么我只是简单地插入到数据库中以检索数据。

我将它设置为变量的原因是因为它被发送到分页类，所以它会对结果进行分页。

这是html的标题：

```
<?php

$searchword = $urlmaker->geturlandsearch($_GET["search"]);

$findcomma = strpos($_SESSION["SESS_USERSPRODUCTIDS"], ",");

if($findcomma == true){

    $userproductid = explode(',', $_SESSION["SESS_USERSPRODUCTIDS"]);
    $prep       = array(':like' => "%$searchword%", ':like2' => "%$searchword%");

    $q = '';
    $e = '';
    $i = 1;

    foreach($userproductid as $productid){

        $q   .= 'productid=:productid' . $i . ' || ';
        $prep[":productid{$i}"] = $productid;
        $i++;

    }

    $q = rtrim($q, " || ");

} else {

    $q = 'productid=:productid';
    $prep = array(':productid' => $_SESSION["SESS_USERSPRODUCTIDS"], ':like' => "%$searchword%", ':like2' => "%$searchword%");

}

$maxlimit = 15;

$geturi = "/Search-Forum/" . $_GET['search'] . "/";

$string     = "SELECT id,title,date,username,viewcount,replycount,replyuser,replydate FROM forum_topics WHERE " . $q . " AND title LIKE :like OR content like :like2 ORDER BY replydate DESC";
$pagstring  = "SELECT id FROM forum_topics WHERE  " . $q . " AND title LIKE :like OR content like :like2";
$pagurl     = $geturi; 
```

这是前端代码：

```
<?php

$topicQuery = $pagination->paginatedQuery($pdo, $string, $maxlimit, $prep);
if($topicQuery != "no query"){

while($fetchquery = $topicQuery->fetch()) { 
$topicid            = stripslashes($fetchquery["id"]);
$topictitle         = stripslashes($fetchquery["title"]);
$topicdate          = stripslashes($fetchquery["date"]);
$topicusername      = stripslashes($fetchquery["username"]);
$topicviewcount     = stripslashes($fetchquery["viewcount"]);
$topicreplycount    = stripslashes($fetchquery["replycount"]);
$topicreplyuser     = stripslashes($fetchquery["replyuser"]);
$topicreplydate     = stripslashes($fetchquery["replydate"]);

?>
<li>
    <div class="topiclisttitle"><p><b><a href="<?php echo '/Forum-'.$_GET["forumid"].'/Product-'.$_GET["productid"].'/' . $urlmaker->sluggify($topictitle); ?>/<?php echo $topicid ; ?>/<?php echo $_GET["proid"]; ?>/"><?php echo ucwords($topictitle); ?></a></b><br><?php echo $topicusername ; ?> on <?php echo $betterTime->dateAndtime($topicdate); ?></p></div>
    <div class="topiclistview"><p><b><?php echo $topicviewcount ; ?></b><br>Views</p></div>
    <div class="topiclistview"><p><b><?php echo $topicreplycount ; ?></b><br>Replies</p></div>
    <div class="topiclistlastposted"><?php if(!empty($topicreplyuser)){ ?><p>By: <b><?php echo $topicreplyuser ; ?></b> On<br><?php echo $betterTime->dateAndtime($topicreplydate); ?></p><?php } else { ?><p>By: <b><?php echo $topicusername ; ?></b> On<br><?php echo $betterTime->dateAndtime($topicreplydate); ?></p><?php } ?></div>
</li>
<?php } } else { ?>
<li><p class="morepadding">No Topics Regarding Your Search Words :(</p></li>
<?php } ?> 
```

这是分页类的数据库输入：

```
$freebiesquery = $pdo->prepare($string . " LIMIT " . $maxlimit);
$freebiesquery->execute($prep);
$freebiesquery_num = $freebiesquery->rowCount(); 
```

所有这些都适用于其他页面，所以它必须是我做代码标题部分的方式，首先是格式化 sql 查询的方式。

我得到的唯一错误如下：

警告：PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number

和

警告：PDOStatement::execute(): SQLSTATE[HY093]: 参数号无效

但这不能像我算过的那样，它们是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:34:43.520

将包含的字符串`=>`放入数组中不会产生关联。`=>`是数组文字语法的一部分，它们必须在字符串之外。

代替：

```
$prep[] = "':productid{$i}' => {$productid}"; 
```

和：

```
$prep[":productid{$i}"] = $productid}; 
```

代替：

```
$e = "':productid' =>" .  $_SESSION["SESS_USERSPRODUCTIDS"]; 
```

和：

```
$prep = array(':productid' => $_SESSION["SESS_USERSPRODUCTIDS"]); 
```

代替：

```
$prep       = array($e, ':like' => "%$searchword%", ':like2' => "%$searchword%"); 
```

和：

```
$prep[':like'] = "%$searchword%";
$prep[':like2'] = "%$searchword%"; 
```

# ruby-on-rails - DEVISE after_inactive_sign_up_path_for 未被调用

> ID：16166885
> 
> 赞同：2
> 
> 时间：2013-04-23T10:21:51.930
> 
> 标签：ruby-on-rails, devise, devise-invitable

环境：RAILS 3.2 + DEVISE for auth + Invitable + Confirmable add-ons。

```
Using devise (2.2.3) 
Using devise-i18n (0.6.5) 
Using devise_invitable (1.0.3) 
```

我试图在接受（注册）之后重定向到特定位置，但`after_sign_in_path_for`似乎只在登录和接受之后被调用。

我一直无法`after_accept_path_for`工作。它继续重定向到“登录后”位置。

这里是代码

在我的 routes.rb 中：

```
devise_for :users, 
     :controllers => { :registrations => 'registrations', :invitations => 'invitations' } 
```

`rake routes`给我这个：

```
 new_user_session GET    /users/sign_in(.:format)                          devise/sessions#new
               user_session POST   /users/sign_in(.:format)                          devise/sessions#create
       destroy_user_session DELETE /users/sign_out(.:format)                         devise/sessions#destroy
              user_password POST   /users/password(.:format)                         devise/passwords#create
          new_user_password GET    /users/password/new(.:format)                     devise/passwords#new
         edit_user_password GET    /users/password/edit(.:format)                    devise/passwords#edit
                            PUT    /users/password(.:format)                         devise/passwords#update
   cancel_user_registration GET    /users/cancel(.:format)                           registrations#cancel
          user_registration POST   /users(.:format)                                  registrations#create
      new_user_registration GET    /users/sign_up(.:format)                          registrations#new
     edit_user_registration GET    /users/edit(.:format)                             registrations#edit
                            PUT    /users(.:format)                                  registrations#update
                            DELETE /users(.:format)                                  registrations#destroy
          user_confirmation POST   /users/confirmation(.:format)                     devise/confirmations#create
      new_user_confirmation GET    /users/confirmation/new(.:format)                 devise/confirmations#new
                            GET    /users/confirmation(.:format)                     devise/confirmations#show
     accept_user_invitation GET    /users/invitation/accept(.:format)                devise/invitations#edit
            user_invitation POST   /users/invitation(.:format)                       devise/invitations#create
        new_user_invitation GET    /users/invitation/new(.:format)                   devise/invitations#new
                            PUT    /users/invitation(.:format)                       devise/invitations#update 
```

在我的注册控制器中：

```
class RegistrationsController < Devise::RegistrationsController
  # clear session
  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  #protected
  # after_sign_up_path_for doesn't seem to be called when using Confirmable module
   # def after_inactive_sign_up_path_for(resource)
   #   #me_path
   #   session[:user_return_to].nil? ? me_path : session[:user_return_to]
   # end

  private

  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

还

```
class Users::InvitationsController < Devise::InvitationsController
  protected 
  def after_accept_path_for
    session[:user_return_to].nil? ? me_path : session[:user_return_to]
  end
end 
```

在我的应用程序控制器中，（我故意留下了一些我试图让它工作的注释代码）：

```
 def store_location
      session[:user_return_to] = request.fullpath
  end

  #   def after_sign_up_path_for
  #     me_path
  #   end 
  #   
  #   def after_inactive_sign_up_path_for(resource)
  #     me_path
  #     #session[:user_return_to].nil? ? me_path : session[:user_return_to]
  #   end

  # https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-(registration)
  def after_sign_in_path_for(resource)
    me_path
    #dashboard_path
    #session[:user_return_to].nil? ? dashboard_path : session[:user_return_to]
  end 
```

有什么建议么？

添加了调试重定向

将此添加到我的 application_controller

```
 def redirect_to_with_logging(*args) 
    logger.debug "Redirect: #{args.inspect} from #{caller[0]}" 
    redirect_to_without_logging *args 
  end 

  alias_method_chain :redirect_to, :logging 
```

登录后，就像一个魅力

```
Started POST "/users/sign_in" for 127.0.0.1 at 2013-04-25 14:20:04 +0200
Processing by Devise::SessionsController#create as HTML
    [... I removed some of the Session creation info ...]
Redirect: ["/dashboard"] from /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.11/lib/action_controller/metal/responder.rb:135:in `redirect_to'
Redirected to http://localhost:3000/dashboard
Completed 302 Found in 968ms (ActiveRecord: 0.0ms) 
```

文档：

[登录后](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-in)

[注册后](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29)

[接受后](https://github.com/scambra/devise_invitable#integration-in-a-rails-application) <====

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:08:43.243

在邀请控制器中覆盖 after_accept_path_for

```
class Users::InvitationsController < Devise::InvitationsController
  protected 
  def after_accept_path_for(resource)
    me_path
  end
end 
```

重要的：

将此文件放在“控制器/用户”目录中

修复 routes.rb 以使用`Users::InvitationsController`

```
devise_for :users, :controllers => { :registrations => 'registrations', :invitations => 'users/invitations' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:08:35.050

您可以`redirect_to my_specific_url`在控制器方法的末尾放置`sign_up`，以在注册后重定向

# ios - UiLabel 的减速更新

> ID：16166889
> 
> 赞同：0
> 
> 时间：2013-04-23T10:22:02.423
> 
> 标签：ios, objective-c, jquery-animate, uilabel

今晚我花了几个小时试图让我拥有的两个 UILabel 在识别手势时已经被刷新（基于translation.y 和velocity.y）。在里面

```
if (recognizer.state == UIGestureRecognizerStateEnded) 
```

我想在手势完成后对 UILabels 的刷新减速进行动画处理。UILabel 只需调用

```
[self refreshLabels]; 
```

今晚我花了很多时间尝试使用无限滚动视图和 .contentOffset.y 的跟踪器来做到这一点，但失败得很惨。我还尝试在上面的 if 语句中使用一个也不起作用的动画块执行 for 和 while 循环。

有没有人有任何建议/做过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:23:12.093

使用 performSelector:withObject:afterDelay: 递归调用 refreshLabels 怎么样？

当手势结束时，设置一个私有计数器并调用 refreshLabels。在 refreshLabels 中，使用计数器作为“所用时间”变量计算简单的减速曲线，并将结果值用作下一次递归调用的延迟。

示例代码：

```
int counter;  // Set this value to 1 when the gesture completes

- (void)refreshLabels:(id)sender{
    // Update the labels using whatever code you have

    // This code will execute the recursive deceleration
    if (counter > -1){
        float somereasonablenumber = 0.1F;
        float delaytime = (1.0-0.1)/counter; // deceleration = (finaltime-initialtime)/timetaken
        counter++;
        if (delaytime > somereasonablenumber){
            [self performSelector:@selector(refreshLabels:) withObject:nil afterDelay:delaytime];
        } else {
            counter = -1;
        }
    }

} 
```

您可能需要使用我用于 finaltime 和 initialtime 的值来获得您想要的曲线。现在，此代码将在延迟曲线上执行，例如：

```
0.9s
0.45s
0.3s
0.225s
0.18s
0.15s
0.128571429s
0.1125s 
```

# python - 将嵌套列表值附加到新列表中

> ID：16166892
> 
> 赞同：3
> 
> 时间：2013-04-23T10:22:05.803
> 
> 标签：python, python-3.x

我有一个程序，它有一个我希望访问的嵌套列表，然后根据条件附加到一个新列表。每个列表中有三*列*，我想知道如何单独访问它们。这是它目前的样子`[['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', 'I']]`。一个更好地解释这一点的例子是，如果我想要来自第二列的数据，我的新列表将看起来像`['B', 'E', 'H']`.

这是我到目前为止所拥有的，但我目前相当卡住..

```
n = 0
old_list = [['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', 'I']]
new_list = []

for a, sublist in enumerate(old_list):
       for b, column in enumerate(sublist):
              print (a, b, old_list[a][b])
              if n == 0:
                     new_list.append(column[0])
              if n == 1:
                     new_list.append(column[1])
              if n == 2:
                     new_list.append(column[2])

print(new_list) 
```

我目前的输出..

```
0 0 A
0 1 B
0 2 C
1 0 D
1 1 E
1 2 F
2 0 G
2 1 H
2 2 I
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'] 
```

我想要的输出..

```
n = 0
new_list = ['A', 'D', 'G']

n = 1
new_list = ['B', 'E', 'H']

n = 2
new_list = ['C', 'F', 'I'] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T10:23:31.950

```
>>> L = [['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', 'I']]
>>> columns = list(zip(*L))
>>> columns
[('A', 'D', 'G'), ('B', 'E', 'H'), ('C', 'F', 'I')]
>>> columns[1] # 2nd column
('B', 'E', 'H') 
```

或者，如果您希望将每列作为列表进行修改（因为`zip`返回不可变元组），则使用：

```
columns = [list(col) for col in zip(*L)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:55:39.077

另一种解决方案，它不使用`*`构造也不`zip()`：

```
for n in range(3):
    print('n = {}'.format(n))
    new_list = [sublist[n] for sublist in old_list]
    print('new_list = {}'.format(new_list)) 
```

# ios - 可以在 NSUserDefaults 中创建一个新文件夹

> ID：16166894
> 
> 赞同：0
> 
> 时间：2013-04-23T10:22:09.230
> 
> 标签：ios, iphone, objective-c, nsuserdefaults

我想知道是否有可能您可以在`NSUserDefaults`. 因为我在 中保存 10 个对象`NSUserDefaults`，并且我想轻松删除它们，所以我想使用一个文件夹，所以所有 10 个对象都在文件夹中，如果我想删除 10 `UserDefaults`。

我只需要删除文件夹。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:25:52.930

您不必创建文件夹即可从 NSUserDefaults 中删除所有对象，这是我在[此处](https://stackoverflow.com/questions/545091/clearing-nsuserdefaults)找到的解决方案。

```
NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];
[[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain]; 
```

# objective-c - 在 Objective-C 中声明和检查/比较（位掩码）枚举

> ID：16166895
> 
> 赞同：79
> 
> 时间：2013-04-23T10:22:21.820
> 
> 标签：objective-c, c, cocoa, enums, bitmask

你知道在 Cocoa 中有这个东西，例如你可以创建一个`UIView`并做：

```
view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

我有一个`UIView`具有多个状态的自定义，我已经定义`enum`如下：

```
enum DownloadViewStatus {
  FileNotDownloaded,
  FileDownloading,
  FileDownloaded
}; 
```

对于每个创建的子视图，我设置其`tag`：`subview1.tag = FileNotDownloaded;`

然后，我有一个视图状态的自定义设置器，它执行以下操作：

```
for (UIView *subview in self.subviews) {
  if (subview.tag == viewStatus)
    subview.hidden = NO;
  else
    subview.hidden = YES;
} 
```

但**我想做**的是允许这样做：

```
subview1.tag = FileNotDownloaded | FileDownloaded; 
```

因此`subview1`，我的观点以两种状态出现。目前，它不会出现在这两种状态中的任何一种中，因为`|`运算符似乎添加了两个枚举值。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-04-23T11:07:02.777

## 声明位掩码：

除了分配绝对值（`1`, `2`, `4`, ...），您还可以像这样声明**[位掩码](http://en.wikipedia.org/wiki/Bitmask)**（如何调用它们）：

```
typedef enum : NSUInteger {
  FileNotDownloaded = (1 << 0), // => 00000001
  FileDownloading   = (1 << 1), // => 00000010
  FileDownloaded     = (1 << 2)  // => 00000100
} DownloadViewStatus; 
```

或使用现代 ObjC 的`NS_OPTIONS`/`NS_ENUM`宏：

```
typedef NS_OPTIONS(NSUInteger, DownloadViewStatus) {
  FileNotDownloaded = (1 << 0), // => 00000001
  FileDownloading   = (1 << 1), // => 00000010
  FileDownloaded    = (1 << 2)  // => 00000100
}; 
```

（有关后者的更多信息，请参阅[Abizern 的回答）](https://stackoverflow.com/a/16168299/227536)

位掩码的概念是（通常）用单个位集定义每个枚举值。

因此`OR`ing 两个值执行以下操作：

```
DownloadViewStatus status = FileNotDownloaded | FileDownloaded; // => 00000101 
```

这相当于：

```
 00000001 // FileNotDownloaded
| 00000100 // FileDownloaded
----------
= 00000101 // (FileNotDownloaded | FileDownloaded) 
```

## 比较位掩码：

检查位掩码时要记住的一件事：

### 检查完全相等：

让我们假设状态是这样初始化的：

```
DownloadViewStatus status = FileNotDownloaded | FileDownloaded; // => 00000101 
```

如果要检查是否`status` **等于** `FileNotDownloaded`，可以使用：

```
BOOL equals = (status == FileNotDownloaded); // => false 
```

这相当于：

```
 00000101 // (FileNotDownloaded | FileDownloaded)
== 00000100 // FileDownloaded
-----------
=  00000000 // false 
```

### 检查“会员”：

如果要检查是否`status`仅**包含** `FileNotDownloaded`，则需要使用：

```
BOOL contains = (status & FileNotDownloaded) != 0; // => true

   00000101 // (FileNotDownloaded | FileDownloaded)
&  00000100 // FileDownloaded
-----------
=  00000100 // FileDownloaded
!= 00000000 // 0
-----------
=  00000001 // 1 => true 
```

看到细微的差别（以及为什么您当前的“if”表达式可能是错误的）？

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-23T11:33:04.247

虽然@Regexident 提供了一个很好的答案 - 我必须提到现代 Objective-C 声明枚举选项的方式`NS_OPTIONS`：

```
typedef NS_OPTIONS(NSUInteger, DownloadViewStatus) {
  FileNotDownloaded = 0,
  FileDownloading   = 1 << 0,
  FileDownloaded    = 1 << 1
}; 
```

进一步参考：

*   [NSHipster](http://nshipster.com/ns_enum-ns_options/)
*   [我是海象](http://iamthewalr.us/blog/2012/11/ns_enum-and-ns_options/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:39:53.023

```
enum DownloadViewStatus {
  FileNotDownloaded = 1,
  FileDownloading = 2,
  FileDowloaded = 4
}; 
```

这将让您有效地执行按位 OR 和 AND。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-18T02:49:15.800

可用于位掩码检查以提高可读性的有用功能。

```
BOOL bitmaskContains(NSUInteger bitmask, NSUInteger contains) {
    return (bitmask & contains) != 0;
} 
```

# c# - asp.net 网站的超级下拉菜单

> ID：16166896
> 
> 赞同：2
> 
> 时间：2013-04-23T10:22:25.307
> 
> 标签：c#, asp.net, database-design, megamenu

我想为我的基于 asp.net webform 的网站实现 Mega Menu 结构。

我想使用以下基于 CSS 的 Mega Menus 来实现 Mega Menus

[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)

这是一个很好的例子，但我不确定如何在我的网站上实现在数据库中存储页面/菜单信息。

我有一个基本表`CMS_Pages`，其中包含与页面相关的所有基本信息，我使用相同的表`Page_Name`作为菜单名称字段并根据字段创建子菜单`Page_Inheritance`。

为了实现超级菜单，我需要通过添加附加字段来对同一个表进行一些更改以使用此超级菜单或创建一个单独的 Mega_Menu 表，该表将具有支持此超级菜单的附加字段。

我还查看了以下示例，该示例显示了 kentico CMS 如何使用此大型菜单，但示例对我来说不是很清楚。

[http://devnet.kentico.com/Knowledge-Base/Design-and-css/Creating-a-Mega-Menu-%28step-by-step%29.aspx](http://devnet.kentico.com/Knowledge-Base/Design-and-css/Creating-a-Mega-Menu-%28step-by-step%29.aspx)

在这个例子中，他基本上只使用一个字段`Menu Item CSS class`字段来实现超级菜单以及示例中显示的一些其他代码，因为我从未使用过这个 CMS，我发现很难理解这个例子

表结构

```
[Page_Id] [int] IDENTITY(1,1) NOT NULL,
[Page_Name] [nvarchar](300) NULL,
[Page_Title] [nvarchar](900) NULL,
[Page_Desc] [nvarchar](1200) NULL,
[Page_Keywords] [nvarchar](400) NULL,
[Page_Body] [nvarchar](max) NULL,
[Page_Link_Position] [int] NULL,
[Page_Layout_Position] [nvarchar](30) NULL,
[Page_Internal_Link] [bit] NULL,
[Page_Handler] [varchar](300) NULL,
[Page_Target_Window] [nvarchar](50) NULL,
[Page_Active] [bit] NULL,
[Page_Publish] [bit] NULL,
[Page_Inheritance] [int] NULL,
[Page_Create_Date] [smalldatetime] NULL,
[Page_Update_Date] [smalldatetime] NULL,
[Page_Created_By_User] [nvarchar](20) NULL,
[Page_Searchable] [bit] NULL 
```

我正在考虑添加其他字段，例如`Mega_Menu_CSS`，`Mega_Menu_Container_Div`

某些字段的示例数据

```
Page_Id Page_Name   Page_Internal_Link    Page_Handler    Page_Searchable     Page_Created_By_User    Page_Inheritance
1       Home                1               Default.aspx        0                   NULL                        0
2       About Us            1               Page.aspx           0                   NULL                        1
3       News                1               News.aspx           0                   NULL                        0
5       Contact Info        1               Page.aspx           0                   NULL                        2
6       Our Profile         1               Page.aspx           0                   NULL                        2
10      Quality Policy      1               Page.aspx           0                   NULL                        2
11      Services            1               Page.aspx           0                   NULL                        11
12      Car Rentals         1               Page.aspx           0                   NULL                        11
13      Car Leasing         1               Page.aspx           0                   NULL                        11
14      Car Sales           1               Page.aspx           0                   NULL                        11 
```

我希望能在这方面提供帮助，以使用 C# 中的数据库示例和代码来实现 Mega meus，以便清楚地了解它是如何实现的，我一直在寻找这样的教程，但在自定义 cms 的这个主题上找不到太多帮助或网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T22:20:13.973

我会以与页面相同的方式处理此问题 - 迷你 cms。更重要的是，我会将它与您的页面结构完全分开 - 尝试将其集成会混淆问题。

这是我将开始使用的模型的开始：

```
public class Navigation
{
    public int Id { get; set; }
    public string PageNavigation { get; set; } // The page name
    public string Description { get; set; }
    public int SortOrder { get; set; }
    public int Location { get; set; } // So you can order from one side to another
} 
```

这将包括您的父导航

```
public class NavigationItem
{
    public int Id { get; set; }
    public Navigation Navigation { get; set; } // NavigationId
    public string Heading { get; set; }
    public string CssGroup { get; set; }
} 
```

这将包含该菜单项中的不同组

```
public class NavigationItemCollection
{
    public int Id { get; set; }
    public NavigationItem NavigationItem { get; set; } // NavigationItemId
    public string LinkText { get; set; }
    public string ImageUrl { get; set; }
    public int PageId { get; set; } // The URL the link will navigate to
    public string CssGroup { get; set; }
} 
```

这基本上是菜单链接。

这是一个外观示例：

*   家（ID 1 - SORT 1 - 位置 1 [左]）
    *   我的真棒标题（ID 1 - NavId 1 - Css：col-5）
        *   一些链接文本（PageId：55 - Css：BoldMe）
        *   其他一些文本（PageId：57 - Css：正常）
        *   ETC
*   图像的其他一些东西（ID 2 - navId 2 - Css：navwithimages）
    *   一些文本（pageid 66 - css: image - imageurl someimages.png）
    *   其他一些文本（pageid 66 - css: image - imageurl someotherimages.png）

现在，这可能是它变得混乱的地方，你开始硬编码 css 类名——我不会喜欢的东西——你将不得不有一些 if 或 case 语句从 css 类名中查找并做某些事情显示图像或类似的东西：

```
if(navigationItemCollections.CssGroup == "col-2") 
{
    // Do this
} 
```

我还会考虑所有 css 类名的模型。

希望这可以帮助您开始处理此菜单。您可能还想考虑迁移到 MVC，因为控件会使实现这一目标变得更加困难。

其他值得注意的事情（我知道其他开发人员会讨厌我这样说）我会使用 StringBuilder 来构建菜单 - 或者当你修改菜单时将 html 写入文件。

# c++ - C++ - 如何在 lldb / Xcode 中获取 std::vector 对象的地址

> ID：16166897
> 
> 赞同：3
> 
> 时间：2013-04-23T10:22:28.047
> 
> 标签：c++, xcode, debugging, lldb, memory-address

我有一个堆栈分配`std::vector`被一些流氓代码覆盖。被覆盖的不是*数据*，而是内部状态。我知道这一点是因为`size()`成员函数有时会在程序中返回一个垃圾值。它正确初始化。我怀疑我的代码中其他地方存在一个常见的指针错误。

我正在使用*Xcode 4.6.2*。我想在对向量的第一个内存位置（向量本身，而不是数据）进行内存访问时设置一个硬件断点（使用*lldb*），这样我就可以看到是什么覆盖了它。根据[这个](https://stackoverflow.com/a/15783655/143397)我需要先找到向量的地址。通常人们会使用`&`运算符来获取变量的地址，但由于某种原因，lldb 不会返回地址，而是打印某种摘要字符串。

```
class myClass {
 public:
  myClass() : myVector(4) {}
 private:
  std::vector<double> myVector;
  double myDouble;
}; 
```

在构造完所有内容后在任意断点处中断后：

```
(lldb) frame variable &myObject.myVector
(std::vector<double, std::allocator<double> > *) $7 = size=4 
```

'expr' 具有相同的结果：

```
(lldb) expr &myObject.myVector;
(std::vector<double, std::allocator<double> > *) $8 = size=4 
```

通常我希望看到打印的地址，例如这个普通的数据成员：

```
(lldb) frame variable &myObject.myDouble
(double *) &myDouble = 0x0000000125589328 
```

我尝试将地址分配给带有“expr”的变量，但这也不起作用：

```
(lldb) expr std::vector<double, std::allocator<double> > * f = &myObject.myVector; f
(std::vector<double, std::allocator<double> > *) $12 = size=0 
```

那里返回的零大小（而不是 4）表明它实际上并没有选择正确的向量。

那么如何获取这个向量的地址呢？如果我在 Xcode 的帧变量列表中右键单击它，然后选择此向量的“查看内存”，那么它会打开一个视图，`0x0`其中当然是无效的。请注意，向量是在堆栈上分配的——它实际上在其他一些对象中，但所有这些都是堆栈构造的。

请注意，我**不想**获取向量中数据的地址——这实际上并没有被覆盖。损坏的是堆栈分配的向量对象的内部存储。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T15:40:43.177

您的`myObject`对象可能是一个局部变量并且存在于堆栈中：

```
(lldb) p &myObject
(myClass *) $0 = 0x00007fff5fbffad8
(lldb) p $fp >= &myObject && &myObject >= $sp
(bool) $1 = true 
```

如果您希望 lldb 不漂亮地打印矢量，请使用`-R`/`--raw-output`选项`frame variable`：

```
(lldb) fr va -R myObject
(myClass) myObject = {
  myVector = {
    std::_Vector_base<double, std::allocator<double> > = {
      _M_impl = {
        _M_start = 0x00000001001008d0
        _M_finish = 0x00000001001008f0
        _M_end_of_storage = 0x00000001001008f0
      }
    }
  }
  myDouble = 6.95322297580907e-310
} 
```

您会注意到向量上的地址是堆地址 - 也就是说，它们是`malloc`'ed（`new`'ed，随便什么），而不是直接位于您的内部`myObject`。所以现在你必须决定你想要监控什么。如果您想监视向量以查看添加到向量末尾的新元素，那么您想观察向量结束指针，

```
(lldb) p &myObject.myVector._M_impl._M_finish
(double **) $4 = 0x00007fff5fbffae0 
```

如果要监视其中一个向量的内容，比如说第一个，那么您要监视

```
(lldb) p myObject.myVector._M_impl._M_start
(double *) $6 = 0x00000001001008d0 
```

当然，当元素被添加到向量时，它可能会被移动到一个新的地址范围（如果堆上的内存区域不能增长来容纳新元素），所以这会有点脆弱。

通常 lldb 的类型格式化程序（`std::vector`在这种情况下）比查看原始实现更可取——但如果您想使用原始实现，在这种情况下禁用格式化程序可能更容易。例如

```
(lldb) type category disable  gnu-libstdc++
(lldb) p myObject
(myClass) $9 = {
  (std::vector<double, std::allocator<double> >) myVector = {
    (std::_Vector_base<double, std::allocator<double> >) std::_Vector_base<double, std::allocator<double> > = {
      (std::_Vector_base<double, std::allocator<double> >::_Vector_impl) _M_impl = {
        (double *) _M_start = 0x00000001001008d0
        (double *) _M_finish = 0x00000001001008f0
        (double *) _M_end_of_storage = 0x00000001001008f0
      }
    }
  }
  (double) myDouble = 6.95322297580907e-310
} 
```

`type summary list`您可以使用该命令查看 lldb 内置的所有类型格式化程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T21:59:39.283

就像附录一样，即使您没有真正“看到”该值，您也应该能够说： (lldb) watchpoint set expression &myVector

此外，您所看到的是 std::vector 的摘要 - 结果表明我们并没有指示摘要不适用于指针或也显示值。

我已经对开源 LLDB 进行了修复，它允许您查看指针的数值。然而，真正正确的解决方案可能必须是一种特殊的“for-pointers”摘要格式，显示值和摘要。然而，我并不太热衷于走这条路，因为它会复制我们在 LLDB 中拥有的正则表达式格式化程序的数量，这可能不是为了提高性能而做的最好的事情。

# symfony - 动态创建数据库模式

> ID：16166898
> 
> 赞同：1
> 
> 时间：2013-04-23T10:22:30.047
> 
> 标签：symfony, doctrine, symfony-2.2

我想在用户注册时为他创建数据库。创建数据库的代码如下所示

```
$connectionFactory = $this->container->get('doctrine.dbal.connection_factory');
$connection = $connectionFactory->createConnection(array(
    'driver' => 'pdo_mysql',
    'user' => 'root',
    'password' => 'mysecretpassword',
    'host' => 'localhost',
    'dbname' => 'userdatabase',
));

$params = $connection->getParams();
$name = isset($params['path']) ? $params['path'] : $params['dbname'];

unset($params['dbname']);

$tmpConnection = DriverManager::getConnection($params);

// Only quote if we don't have a path
if (!isset($params['path'])) {
    $name = $tmpConnection->getDatabasePlatform()->quoteSingleIdentifier($name);
}

$error = false;
try {
    $tmpConnection->getSchemaManager()->createDatabase($name);
    echo sprintf('<info>Created database for connection named <comment>%s</comment></info>', $name);
} catch (\Exception $e) {
    echo sprintf('<error>Could not create database for connection named <comment>%s</comment></error>', $name);
    echo sprintf('<error>%s</error>', $e->getMessage());
    $error = true;
}

$tmpConnection->close(); 
```

我在 AccountBundle 中为该数据库创建了实体，但不知道在创建用户数据库时如何创建数据库模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T16:22:18.390

它经常在测试中使用。[在LiipFunctionalTestBundle](https://github.com/liip/LiipFunctionalTestBundle/blob/master/Test/WebTestCase.php#L228)中可以看到一个示例。

```
$metadatas = $om->getMetadataFactory()->getAllMetadata();
$schemaTool = new SchemaTool($om);
$schemaTool->dropDatabase($name);
if (!empty($metadatas)) {
    $schemaTool->createSchema($metadatas);
} 
```

# android - 如何禁用通知栏？

> ID：16166909
> 
> 赞同：1
> 
> 时间：2013-04-23T10:23:04.737
> 
> 标签：android, android-notification-bar

我想使用[en](http://android-expert.blogspot.fr/2012/07/preventing-status-bar-expansion-disable.html)禁用通知栏，但是当我尝试将此代码放在主 Activity 的 OnCreat 方法中时，我遇到了一些问题。我不知道该放 什么，我想放`<height of the status bar>`什么，我有一些问题和使用问题 ；未知，我无法使用`params``handleParams``context.getWindow().addView(view, params)``context.getWindow()`

```
 View disableStatusBar = new View(context);
    WindowManager.LayoutParams handleParams = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.FILL_PARENT,
        <height of the status bar>,
        // This allows the view to be displayed over the status bar
        WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
        // this is to keep button presses going to the background window
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
        // this is to enable the notification to recieve touch events
        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
        // Draws over status bar
        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
        PixelFormat.TRANSLUCENT);
    params.gravity = Gravity.TOP;
    context.getWindow().addView(view, params); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:47:15.367

只需添加到您的清单：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

# c#-4.0 - 如何使用 xml 属性解决序列化歧义？

> ID：16166911
> 
> 赞同：0
> 
> 时间：2013-04-23T10:23:10.037
> 
> 标签：c#-4.0, xml-serialization, xml-validation, xml-attribute

我想用 XmlSerializer 序列化一个有效的 xml。但我收到了这个错误信息：

“反映属性“描述”时出现错误。---> System.InvalidOperationException：命名空间“ddi:reusable:3_2_dev”中的顶部 XML 元素“描述”引用了不同的类型 System.Collections.Generic.List`1[Opit. Rogatus.DdiObjects.DdiContent] 和 Opit.Rogatus.DdiObjects.DdiContent。使用 XML 属性为元素或类型指定另一个 XML 名称或命名空间.."

我有这个需要序列化的类。并且有一个属性描述，它标记为序列化程序将其重命名为描述。但是由于在可重用命名空间中显然有另一个描述，我得到了一个错误。

xsd 类别：

```
<xs:complexType name="CategoryType">
  <xs:annotation>
     <xs:documentation>A description of a particular category or response. OECD Glossary of Statistical Terms: Generic term for items at any level within a classification, typically tabulation categories, sections, subsections, divisions, subdivisions, groups, subgroups, classes and subclasses.</xs:documentation>
  </xs:annotation>
  <xs:complexContent>
     <xs:extension base="r:VersionableType">
        <xs:sequence>
           <xs:element ref="CategoryName" minOccurs="0" maxOccurs="unbounded"/>
           <xs:element ref="r:Label" minOccurs="0" maxOccurs="unbounded">
              <xs:annotation>
                 <xs:documentation>A display label for the category.</xs:documentation>
              </xs:annotation>
           </xs:element>
           <xs:element ref="r:Description" minOccurs="0">
              <xs:annotation>
                 <xs:documentation>Description/definition of the category. Note that comparison of categories is determined by the Definition rather than the Label. For example, while the Definition of a Chemist in London and a Pharmacist in New York is the same and comparable, the definitions of Chemist in each location differ significantly and are NOT comparable</xs:documentation>
              </xs:annotation>
           </xs:element>
           <xs:element ref="r:ConceptReference" minOccurs="0">
              <xs:annotation>
                 <xs:documentation>Reference to a defining concept.</xs:documentation>
              </xs:annotation>
           </xs:element>
           <xs:element ref="Generation" minOccurs="0">
              <xs:annotation>
                 <xs:documentation>Generation/derivation details of the category.</xs:documentation>
              </xs:annotation>
           </xs:element>
        </xs:sequence>
        <xs:attribute name="missing" type="xs:boolean" use="optional">
           <xs:annotation>
              <xs:documentation>Indicates if the category contains missing data or not.</xs:documentation>
           </xs:annotation>
        </xs:attribute>
     </xs:extension>
  </xs:complexContent> 
```

```
[XmlRoot(ElementName = "Category", Namespace = LogicalProductNamespace)]
public class DdiCategory : AbstractVersionable
{
    [XmlElement(ElementName = "CategoryName")]
    public List<DdiName> CategoryNames { get; set; }

    [XmlArray(ElementName = "Description", Namespace = ReusableNamespace)]
    [XmlArrayItem(ElementName = "Content", IsNullable = false)]
    public List<DdiContent> Descriptions { get; set; }

    [XmlAttribute(AttributeName = "missing")]
    public bool Missing { get; set; }

    public DdiCategory()
    {
        Type = DomainObjectType.Category;
        Descriptions = new List<DdiContent>();
    }
} 
```

可重用的命名空间：

![可重用的命名空间](https://i.stack.imgur.com/rRA0d.png)

显然，问题在于这两种描述的模糊性。我试图弄清楚如何使用 xml 属性解决它，但到目前为止还没有运气。

如果有人有想法，请随时分享=）

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:35:26.733

我设法弄清楚了。问题在于 DdiCategory 类中的描述属性类型错误。该类型应该是 StructuredStringType 而不是 DdiContent。在此之后，我可以消除 xml 属性。

# php - 我的 HTACCESS 是否导致 mysql 连接过多？

> ID：16166912
> 
> 赞同：2
> 
> 时间：2013-04-23T10:23:10.890
> 
> 标签：php, .htaccess, url-rewriting, rewrite

如果有人可以提供帮助，我将不胜感激。

我们有一个 CMS 在同一个托管包上运行 3 个网站（不同域上的国际版本），这些网站已经愉快地运行了一年多，没有任何问题，直到另一个我们对 .htaccess 文件进行了一些更改以制作 URL “更漂亮”。

该网站的结构是：

```
-pages
   -home.php  <-- UK (www.site.com)
      -your-basket.php  <-- SSL (UK only)
      -your-account.php  <-- SSL (UK only)
      -page.php
         -sub pages etc

   -de
      -home.php  <-- German (www.site.de)
         -page.php
            -sub pages etc

   -it
      -home.php  <-- Italian (www.site.it)
         -page.php
            -sub pages etc 
```

一切都从 /pages/ 开始，并遵循结构，除了 /pages/posts/ 包含所有网站的新闻帖子（例如，没有 /pages/de/posts/） - 帖子与新闻相关联通过数据库中的页面 ID 进行分页。

.htaccess 的目的是从 URL 中完全删除 /pages/ 并使每个站点看起来像一个独立站点，而不是在 url 中显示 de/it 子目录（例如 www.site.de/page.php 而不是www.site.de/de/page.php）但这是正确的还是有任何明显的错误可能导致循环或任何事情：

```
RewriteEngine On

ErrorDocument 404 /
ErrorDocument 500 /

#compress text
AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xhtml+xml
AddOutputFilterByType DEFLATE application/x-javascript application/javascript text/javascript text/css
FileETag none

<ifModule mod_php5.c>
 php_value zlib.output_compression 16386
</ifModule>

#use cache
<FilesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
</FilesMatch>

### SSL specific redirects
#need to be placed before any other rewrites

# force https for basket and account pages
RewriteCond %{HTTPS} =off
RewriteRule ^(pages/your-basket|pages/your-account)\.php$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# don't do anything for images/css/js (leave protocol as is)
RewriteRule \.(gif|jpe?g|png|css|js)$ - [NC,L]

# force http for all other URLs
RewriteCond %{HTTPS} =on
RewriteCond %{REQUEST_URI} !^/(pages/your-basket|pages/your-account)\.php$
RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

### Canonical redirect of home page
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteRule ^(.*)index\.php$ /$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /home-page\.php\ HTTP/
RewriteRule ^(.*)home-page\.php$ /$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /home\.php\ HTTP/
RewriteRule ^(.*)home\.php$ /$1 [R=301,L]

#set home pages - add home.php for international sites
DirectoryIndex index.php home.php

#### IT ####

# Redirect /it/ Requests - if subdir is present this removes it
RewriteCond %{THE_REQUEST} ^GET.*/it/ [NC]
RewriteCond %{HTTP_HOST} !^localhost(.+)$ [NC]
RewriteRule ^/?[^/]+/(.*)$ /$1 [L,R=301]

# Map http://www.site.it to /subdir.
RewriteCond %{HTTP_HOST} ^www.site.it$ [OR]
RewriteCond %{HTTP_HOST} ^site.it$
RewriteRule ^$ /pages/it/ [L]

# Map http://www.site.it/x to /subdir/x unless there is a x in the web root.
# If url does not contain "posts" execute to subdirectory
RewriteCond %{HTTP_HOST} ^www.site.it$ [OR]
RewriteCond %{HTTP_HOST} ^site.it$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} !^GET.*/posts/ [NC]
RewriteCond %{REQUEST_URI} !^/pages/it/
RewriteRule ^(.*)$ /pages/it/$1

# Map http://www.site.it/x to /subdir/x unless there is a x in the web root.
# If url does contain "posts" rewrite to root
RewriteCond %{HTTP_HOST} ^www.site.it$ [OR]
RewriteCond %{HTTP_HOST} ^site.it$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^GET.*/posts/ [NC]
RewriteCond %{REQUEST_URI} !^/pages/
RewriteRule ^(.*)$ /pages/$1

#### DE ####

# Redirect /de/ Requests - if subdir is present this removes it
RewriteCond %{THE_REQUEST} ^GET.*/de/ [NC]
RewriteCond %{HTTP_HOST} !^localhost(.+)$ [NC]
RewriteRule ^/?[^/]+/(.*)$ /$1 [L,R=301]

# Map http://www.site.de to /subdir.
RewriteCond %{HTTP_HOST} ^www.site.de$ [OR]
RewriteCond %{HTTP_HOST} ^site.de$
RewriteRule ^$ /pages/de/ [L]

# Map http://www.site.de/x to /subdir/x unless there is a x in the web root.
# If url does not contain "posts" execute to subdirectory
RewriteCond %{HTTP_HOST} ^www.site.de$ [OR]
RewriteCond %{HTTP_HOST} ^site.de$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} !^GET.*/posts/ [NC]
RewriteCond %{REQUEST_URI} !^/pages/de/
RewriteRule ^(.*)$ /pages/de/$1

# Map http://www.site.de/x to /subdir/x unless there is a x in the web root.
# If url does contain "posts" rewrite to root
RewriteCond %{HTTP_HOST} ^www.site.de$ [OR]
RewriteCond %{HTTP_HOST} ^site.de$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{THE_REQUEST} ^GET.*/posts/ [NC]
RewriteCond %{REQUEST_URI} !^/pages/
RewriteRule ^(.*)$ /pages/$1

#### UK ####

# Map http://www.site.com to /subdir.
RewriteCond %{HTTP_HOST} ^www.site.com$ [OR]
RewriteCond %{HTTP_HOST} ^site.com$
RewriteRule ^$ /pages/ [L]

# Map http://www.site.com/x to /subdir/x unless there is a x in the web root.
RewriteCond %{HTTP_HOST} ^www.site.com$ [OR]
RewriteCond %{HTTP_HOST} ^site.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/pages/
RewriteRule ^(.*)$ /pages/$1 
```

如果我解释得不够好，请告诉我。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:13:56.633

我没有看到任何使用数据库连接的指令。所以没有明显的原因导致额外的连接和 mysql 错误消息。

但是，如果它减慢整个系统的速度，它可能会导致连接保持打开更长时间。`GET`我用 Apache Bench (ab) 和一个简单的请求在我的系统上测试了你的规则。对于 10000 个请求，挂钟时间从 ~4.2 秒增加到 ~9.9 秒。

我肯定也会研究 PHP 并确认也没有更改。如果没有，您可以考虑使用数据库连接池（如果您还没有的话）。

由于您已经将所有内容放在单独的目录中，因此您还可以将 uk 移动到它自己的子目录，并将虚拟主机`DocumentRoot`设置为适当的子目录。然后您可以将特定的 htaccess 文件放在每个文档根目录中。这消除了对原始大小的测试`%{HTTP_HOST}`并将大小减少到大约三分之一。

此外，您可以将指令移动到虚拟主机上下文。这进一步减少了负载，因为 Apache 必须只读取和解析一次指令，而不是每次请求。

# python-2.7 - 鼻子 2 与鼻子测试发现（鼻子 2 没有找到测试）

> ID：16166913
> 
> 赞同：2
> 
> 时间：2013-04-23T10:23:15.087
> 
> 标签：python-2.7, nose, nosetests

我刚刚开始了一个 python 项目，我正在尝试不同的测试框架。我遇到的问题是nose2没有找到我的测试：

> $鼻子2--详细
> 
> * * *
> 
> 在 0.000 秒内运行 0 次测试
> 
> 好的

当鼻子测试找到它们时

> $nosetests --collect-only
> 
> ...................................
> 
> * * *
> 
> 在 0.004 秒内运行 33 次测试
> 
> 好的

否则，我可以使用来自同一目录的 nose2 执行单个测试：

> $nose2 myproj.client.test.mypkg.mymodule_test
> 
> .
> 
> * * *
> 
> 在 0.007 秒内运行 1 次测试
> 
> 好的

其中 myproj.client.test.mypkg.mymodule_test 就像：

```
'''
Created on 18/04/2013

@author: julia
'''
from unittest import TestCase, main
import os
from myproj.client.mymodule import SUT
from mock import Mock
import tempfile

class SUTTest(TestCase):
    def setUp(self):
        self.folder = tempfile.mkdtemp(suffix='myproj')
        self.sut = SUT(self.folder, Mock())
        self.sut.init()

    def test_wsName(self):
        myfolder = os.path.join(self.folder, 'myfolder')
        os.mkdir(myfolder)
        self.sut.change_dir(myfolder)
        self.assertEquals(self.SUT.name, 'myfolder')

if __name__ == "__main__":
    main() 
```

我一直在查看文档，但找不到可能的原因。

在 MacOs 10.8.3 上运行 python 2.7.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T06:37:09.513

添加到 MichaelJCox 的答案中，另一个问题是，默认情况下，nose2 正在寻找以“test”开头的测试文件名。换句话说，' `testFilePattern == test*.py`'（您可以在 中找到它`nose2/session.py`）。

您可以通过两种方式解决此问题：

## 在配置文件中指定不同的测试文件模式：

在项目的某处创建一个配置文件（基本目录是一个好地方，或者你将运行nose2的任何地方）。nose2 将查找并加载任何名为`nose2.cfg`or的文件`unittest.cfg`。

将此添加到该配置文件中。

```
[unittest]
test-file-pattern=*.py 
```

现在再次运行nose2，它会找到那些旧的测试用例。我不确定这是否会对nose2的性能产生不利影响或什么，但到目前为止对我来说很好。

## 重命名您的测试文件，使它们以 test 开头。

例如，如果您有这样的项目：

```
/tests/
      __init__.py
      fluxcapacitor.py 
```

重命名`/tests/fluxcapacitor.py`为`/tests/test_fluxcapacitor.py`，现在nose2 将再次在fluxcapacitor.py 中找到测试。

## 更详细的输出

最后，这与您的问题无关，但将来可能会有所帮助：如果`-verbose`没有输出足够的信息，您还可以传递以下附加参数`--log-level debug`以获得更多输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T21:24:07.783

看起来nose2 需要三件事中的一件来找到测试：

1.  您的测试需要在包中（只需在测试结构的每个目录中创建 __init__.py 文件）
2.  您需要在运行nose2 的同一目录中有一个名为“test”的目录
3.  它需要在同一目录中

nose2 的 _discovery 方法（在 nose2.plugins.loader.discovery.py 中）显式查找名为“test”的目录或作为包的目录（如果它不只是从同一目录中获取您的测试文件）：

```
 if ('test' in path.lower()
                or util.ispackage(entry_path)
                or path in self.session.libDirs):
                for test in self._find_tests(event, entry_path, top_level):
                    yield test 
```

如果我设置一个类似的测试文件（称为tests.py）并在同一目录中运行nose2，它会给我1 个测试OK。

如果我创建一个名为“test”的目录，将文件移动到该目录，然后从顶层目录运行 nose2，我会收到一条错误消息，指出它无法导入我的 py 文件。在该目录中创建 __init__.py 可修复该错误。

如果我改为创建一个目录“blah”并将文件移到那里，那么我会看到您在上面列出的问题：

```
Ran 0 tests in 0.000s

OK 
```

但是，如果我随后在目录“blah”中创建一个 __init__.py，则测试运行并且我找到了我的 1 个测试并确定了。

# ruby-on-rails - Rails 接受_nested_attributes_for 验证事务对象

> ID：16166915
> 
> 赞同：5
> 
> 时间：2013-04-23T10:23:20.887
> 
> 标签：ruby-on-rails, validation, nested

为了使嵌套属性的验证在我的rails应用程序中工作，我一直在苦苦挣扎。一个小警告是，我必须根据父级的属性动态验证嵌套属性，因为所需的信息量会根据父级在进程中的位置随时间而变化。

所以这是我的设置：我有一个具有许多不同关联模型的父级，我想在每次保存父级时验证这些模型的后续嵌套属性。鉴于验证是动态变化的，我不得不在模型中编写一个自定义验证方法：

```
class Parent < ActiveRecord::Base
  attr_accessible :children_attributes, :status
  has_many :children
  accepts_nested_attributes_for :children
  validate :validate_nested_attributes
  def validate_nested_attributes
    children.each do |child|
      child.descriptions.each do |description|
        errors.add(:base, "Child description value cant be blank") if description.value.blank? && parent.status == 'validate_children'
      end
    end
  end
end

class Child < ActiveRecord::Base
  attr_accessible :descriptions_attributes, :status
  has_many :descriptions
  belongs_to :parent
  accepts_nested_attributes_for :descriptions
end 
```

在我的控制器中，当我想保存时，我在父级上调用 update_attributes。现在的问题是，显然，rails 针对数据库而不是针对用户或控制器修改的对象运行验证。所以可能发生的情况是用户删除了孩子的值并且验证将通过，而后来的验证将不会通过，因为数据库中的项目无效。

这是此场景的一个简单示例：

```
parent = Parent.create({:status => 'validate_children', :children_attributes => {0 => {:descriptions_attributes => { 0 => {:value => 'Not blank!'}}}})
  #true
parent.update_attributes({:children_attributes => {0 => {:descriptions_attributes => { 0 => {:value => nil}}}})
  #true!! / since child.value.blank? reads the database and returns false
parent.update_attributes({:children_attributes => {0 => {:descriptions_attributes => { 0 => {:value => 'Not blank!'}}}})
  #false, same reason as above 
```

验证适用于第一级关联，例如，如果 Child 具有“值”属性，我可以按照我的方式运行验证。问题在于在保存之前显然无法验证的深层关联。

谁能指出我如何解决这个问题的正确方向？我目前看到的唯一方法是保存记录，然后验证它们并在验证失败时删除/恢复它们，但老实说，我希望有更干净的东西。

谢谢大家！

**解决方案**

所以事实证明，我通过直接在自定义验证中引用深层嵌套模型来运行验证，这样：

```
class Parent < ActiveRecord::Base
  [...]
  has_many :descriptions, :through => :children
  [...]
  def validate_nested_attributes
    descriptions.each do |description|
      [...]
    end
  end
end 
```

出于某种原因，这导致了我在上面遇到的问题。感谢 Santosh 测试我的示例代码并报告它正在工作，这为我指明了正确的方向来解决这个问题。

为了将来参考，原始问题中的代码适用于这种动态的、深度嵌套的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:30:27.837

我认为您应该为此使用[validates_associated](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated)

在 Child 中进行以下验证

```
validates :value, :presence => true, :if => "self.parent.status == 'validate_children'" 
```

# objective-c - 从 UIScrollView 中删除“隐藏”图像

> ID：16166916
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:23:21.180
> 
> 标签：objective-c, xcode, memory-management, uiscrollview, uiimageview

我有一个显示由 url 设置的图像的滚动视图。现在我只希望将可见图像和上一个和下一个图像预加载到滚动视图上以减少内存使用。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:26:01.500

当我做同样的事情时，我创建了一个大小为 3 倍的 UIScrollView。大到足以容纳 3 张图像，即当前显示的一张以及左右两侧的下一个兄弟姐妹。

如果之前未加载这些图像，则会预先加载它们。所以用户有一些平滑和响应的外观和感觉。

当用户滚动到下一个时，他只能滚动一个，然后我重新排列视图。假设图像 1、2 和 3 在滚动视图中，并且 2 可见，因此（预）加载了 1、2 和 3。用户向右滚动。图像 3 将可见。一旦它变得完全可见，我将滚动视图的可见矩形再次设置到中间。现在图像 2 是最左边的，图像 3 是可见的，图像 4 被放置在最右边并预加载。

当到达图像列表的末尾时，即显示第一个或最后一个时，我分别在最左侧或最右侧放置一个虚拟视图，这是一个显示“没有更多图像”的简单文本视图。

不幸的是，我无法共享该代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:31:40.107

如果您使用 a`UITableView`而不是 a `UIScrollView`，您可以创建自己的`UITableViewCell`类型，在其内容中加载 1 个图像。

优点是只有可见的`UITableViewCells`（当前显示在设备屏幕上的）被加载到系统内存中，因此不会占用太多资源。

[这](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)是您可以在 Internet 上找到的众多 CustomCell 教程之一。

# database - 从表中选择代表对象状态变化的行，忽略不变行

> ID：16166920
> 
> 赞同：0
> 
> 时间：2013-04-23T10:23:34.783
> 
> 标签：database, sqlite

在 sqlite 数据库中，我有下表：

```
id object val1 val2 '时间戳'
1 Z 100 102 53
2 Z 100 102 54
3 Z 100 103 55
4 A 99 123 23
5 A 23 245 35
6 A 23 245 36
7 A 23 245 37
8 A 23 245 38
9 A 99 123 119

```

对于所有类型的对象，值 val1 和 val2 都记录有时间戳。如何选择包含每个对象的一个​​值字段中的更改的所有行。因此，我想要一个具有以下结果的 select 语句：

```
id object val1 val2 '时间戳'
1 Z 100 102 53
3 Z 100 103 55
4 A 99 123 23
5 A 23 245 35
9 A 99 123 119

```

有人可以帮助我正确的 sql 查询。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:33:42.923

对于具有 object`O`和 timestamp的记录`T`，以下查询将查找相关*先前*记录的值，即具有最大时间戳但仍小于 的记录`T`：

```
SELECT val1, val2
FROM MyTable
WHERE object = O
  AND "time stamp" < T
ORDER BY "time stamp" DESC
LIMIT 1 
```

通过使用这样的东西作为子查询，我们可以得到两组值来比较它们：

```
SELECT *
FROM MyTable AS T1
WHERE val1 || ',' || val2 IS NOT (SELECT T2.val1 || ',' || T2.val2
                                  FROM MyTable AS T2
                                  WHERE T2.object = T1.object
                                    AND T2."time stamp" < T1."time stamp"
                                  ORDER BY T2."time stamp" DESC
                                  LIMIT 1) 
```

从这两个值创建一个字符串可以避免使用两个子查询。
这使用`IS NOT`而不是因为如果不存在以前`<>`的记录，子查询将返回。`NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:51:29.197

编辑：在 OP 进一步阐明了他想要什么之后收回这个。OP 希望收集表示对象状态变化的行。

这将为您提供一组唯一的对象值

```
 select distinct object, val1, val2 
```

您是否需要一个任意 id 和一个时间戳来与每一行关联以用于特定目的？也就是说，你想要第一次出现吗？最后一次出现？object-value1-value2 三元组的？

如果是这样，您可以分组：

```
 select object, val1, val2, max(timestamp) as TS from T
       group by object, val1, val2 
```

然后，如果您需要属于具有 max(timestamp) 的三元组的 id，您可以将内联视图加入到四个值的表中。

```
 select t.id, foo.object, foo.val1, foo.val2, foo.TS 
      from t
      join
      (
       select object, val1, val2, max(timestamp) as TS from T
       group by object, val1, val2
      ) as foo
      on t.object = foo.object and t.val1 = foo.val1 and t.val2 = foo.val2
      and t.timestamp = foo.TS 
```

# php - 使用 $_SESSION 在 CMS 中跟踪多个用户

> ID：16166924
> 
> 赞同：1
> 
> 时间：2013-04-23T10:23:39.653
> 
> 标签：php, pdo, multiple-users

您好，我正在尝试在我制作的 CMS 中创建多个用户。我将他们的所有数据都放在一个表中，并使用`mysql_num_rows`检查记录是否匹配，然后用于`session_register()`设置会话。我已将其更改为 PDO 命令。

我希望能够在用户使用 CMS 时对其进行跟踪，以便每条更改的记录都可以附加其 usrID。这样以后我就可以看到谁进行了更新，并最终使用它来显示有关作者等的信息。

因此，例如，当他们使用表单更新或添加新记录时，隐藏的输入会在其中回显他们的会话 ID，这将在他们登录时从他们的用户记录中获取。

这是最好的方法吗？是否正确地编写了此登录代码中的语法？

```
$con = new PDO(DB_DSN, DB_USERNAME, DB_PASSWORD);
$sql="SELECT * FROM $tbl_name WHERE the_username='$the_username' and the_password='$the_password'";

$result = $con->prepare($sql); 
$result->execute(); 
$number_of_rows = $result->fetchColumn();

if($number_of_rows==1){
    $info = $result->fetch(PDO::FETCH_ASSOC);
    $_SESSION['username'] = $info['the_username'];
    $_SESSION['id'] = $info['id'];
    header('Location: admin.php');
}else{
echo "Wrong username or password, please refresh and <a href=\"login.php\">try again.</a>";
} 
```

放上去会更好吗？

```
if($number_of_rows==1 && $info = $result->fetch(PDO::FETCH_ASSOC)){MAKE SESSION} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:15:37.523

您对 PDO 函数的使用非常不一致，并且会导致一些错误。

首先，您不能两次获取相同的数据。而且，事实上，您根本不需要这样的双重获取。

此外，由于某种原因，您没有使用准备好的语句，这是使用 PDO 的唯一原因。所以，正确的代码是

```
$sql="SELECT * FROM $tbl_name WHERE the_username=? and the_password=?";
$result = $con->prepare($sql); 
$result->execute(array($the_username,$the_password)); 
# $number_of_rows = $result->fetchColumn(); <- don't need that
$info = $result->fetch();
if($info){
    $_SESSION['username'] = $info['the_username'];
    $_SESSION['id'] = $info['id'];
    header('Location: admin.php');
}else{
    echo "Wrong username or password, please refresh and <a href=\"login.php\">try again.</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:25:43.683

是的，代码和逻辑工作正常。但不要使用 session_register() 它们在新版本的 PHP 中已被弃用。

# java - Android编程（尝试下载文件到系统目录）

> ID：16166928
> 
> 赞同：0
> 
> 时间：2013-04-23T10:23:53.863
> 
> 标签：java, android

亲爱的stackOverflow成员我最近开始了一个名为“RootBox”的新项目，它是一个需要“su”权限的应用程序，我已成功允许应用程序“su”或“root”访问，我正在尝试下载和替换系统文件在“/system/media 中，我已经设置了我的下载器，但下载进度对话框弹出并关闭，我猜这是文件无法写入系统目录的结果，我之前已将系统重新安装为 rw开始下载，我在整个互联网上搜索，但无法找到帮助，这就是我来这里的原因。

这是执行下载的活动

```
public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bootmation);
    startBtn = (Button)findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            startDownload();
            RootTools.remount("/system/", "rw");
        }
    });
}

private void startDownload() {
    String url = "http://www.filehosting.org/file/details/430746/bootanimation.zip";
    new DownloadFileAsync().execute(url);
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }
} 
```

类 DownloadFileAsync 扩展 AsyncTask {

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
    showDialog(DIALOG_DOWNLOAD_PROGRESS);
}

@Override
protected String doInBackground(String... aurl) {
    int count;

try {

URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream("/system/media/bootanimation.zip");

byte data[] = new byte[1024];

long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    input.close();
} catch (Exception e) {}
return null;

}
protected void onProgressUpdate(String... progress) {
     Log.d("ANDRO_ASYNC",progress[0]);
     mProgressDialog.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String unused) {
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
} 
```

} }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:27:17.750

为此，您必须在清单中允许写入权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:55:21.370

```
URL u = new URL(fUrls[i]);
HttpURLConnection c = (HttpURLConnection) u.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
                            c.connect(); 
```

# c# - 如何在 kentico smartsearch 中按类别搜索

> ID：16166930
> 
> 赞同：2
> 
> 时间：2013-04-23T10:23:58.157
> 
> 标签：c#, asp.net, content-management-system, kentico

我们在**CMSSiteManager** ->**管理员**->管理部分的**类别** 中添加了一些类别。

类别为

![在此处输入图像描述](https://i.stack.imgur.com/TRvSd.png)

我们在站点管理器中有这些类别，我已经在下拉列表的前端显示了这些类别。现在我想将类别 ID 传递给 kentico cms 智能搜索结果的搜索条件。我曾经搜索过nodeownerfull name。

`SearchCondition = "+(DocumentCreatedByUserID:((int)73 || (int)82))";`

如何使用智能搜索结果 Web 部件在前端按这些类别搜索/过滤结果。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T14:14:35.487

您必须设置搜索索引来索引类别。转到索引设置，然后在您定义的对话框中，应该索引的内容有一个“包括类别”复选框。

一旦有了包含类别信息的索引，您就可以使用索引的**DocumentCategories**（包含类别标签）或**DocumentCategoryIDs**（包含类别 ID）字段。

另请参阅此示例[分面搜索](http://devnet.kentico.com/Blogs/Jakub-Oczko/August-2012/Kentico-CMS-7-Smart-Search.aspx)。

# jaxb - 如何在不使用命令提示符的情况下使用 xjc

> ID：16166934
> 
> 赞同：1
> 
> 时间：2013-04-23T10:24:11.520
> 
> 标签：jaxb, xjc

```
 Hi friends,

    I want to generate Jaxb pojo classes using xjc by java code not by using command prompt how i will use it.

public static void main(String [] args) throws FileNotFoundException
    {
        try
        {
            JAXBContext jc = JAXBContext.newInstance(new Class[] {com.bcbsks.testjb.Report.class});             
            Unmarshaller um = jc.createUnmarshaller();          
            Report myJAXBObject = (Report)um.unmarshal(new java.io.FileInputStream("report.xsd"));
        } 
        catch( UnmarshalException ue ) 
        {    
            ue.printStackTrace(); 
        } 
        catch( JAXBException je ) 
        { 
            je.printStackTrace(); 
        } 
    } 
```

我知道给定的代码是错误的，但我想使用任何其他代码来生成 pojo 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:10:40.893

尝试：

```
com.sun.tools.xjc.Driver.run(String[], XJCListener) 
```

其中`String[]`是传递给 XJC 命令的参数，其实现`XJCListener`如下所示：

```
public class Listener extends XJCListener {

    private ConsoleErrorReporter cer = new ConsoleErrorReporter(System.err);
    private String generatedPackagePath = null;

    public void generatedFile(String fileName, int count, int total) {
        message(fileName);
        if (this.generatedPackagePath == null) {
            this.generatedPackagePath = fileName.substring(0, fileName.lastIndexOf(File.separator));
        }
    }

    public String getGeneratedPackagePath() {
        return generatedPackagePath;
    }

    public void message(String msg) {
        System.out.println(msg);
    }

    public void error(SAXParseException exception) {
        cer.error(exception);
    }

    public void fatalError(SAXParseException exception) {
        cer.fatalError(exception);
    }

    public void warning(SAXParseException exception) {
        cer.warning(exception);
    }

    public void info(SAXParseException exception) {
        cer.info(exception);
    }

} 
```

# c# - 如何使文本框填充 XAML 中的整个网格单元格

> ID：16166935
> 
> 赞同：0
> 
> 时间：2013-04-23T10:24:15.783
> 
> 标签：c#, xaml, textbox, windows-phone-8

这是我当前的代码，我对结果不满意。由于某种原因，该`TextBox`控件不会填充整个 GridCell。这些框很小，我尝试设置 textBox 的宽度/高度以使它们更大，但它根本不起作用。我也尝试将对齐设置为拉伸，但这也无济于事。任何关于我如何使这项工作的提示/建议将不胜感激。

```
//create the grid
        Grid backGrid = new Grid();
        backGrid.Width = 380;
        backGrid.Height = 200;
        backGrid.HorizontalAlignment = HorizontalAlignment.Center;
        backGrid.VerticalAlignment = VerticalAlignment.Center;
        backGrid.ShowGridLines = false;

        //define columns
        for (int c = 0; c < 10; c++)
        {
            ColumnDefinition colDef = new ColumnDefinition();
            backGrid.ColumnDefinitions.Add(colDef);
        }

        //define rows
        for (int r = 0; r < 6; r++)
        {
            RowDefinition rowDef = new RowDefinition();
            backGrid.RowDefinitions.Add(rowDef);
        }

        //create textboxes
        for (int c = 0; c < 10; c++)
        {
            for (int r = 0; r < 6; r++)
            {

                TextBox txtBox = new TextBox();
                txtBox.FontSize = 16;
                txtBox.Margin = new Thickness(1, 1, 1, 1);
                txtBox.BorderThickness = new Thickness(0);

                txtBox.Background = new SolidColorBrush(Colors.Red);

                Grid.SetRow(txtBox, r);
                Grid.SetColumn(txtBox, c);

                backGrid.Children.Add(txtBox);
            }
        }

        //add the grid into the mainpage
        ContentPanel.Children.Add(backGrid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:02:26.937

它是默认的`TextBox Margin`。它描述在`TextBox Template`

以下 XAML 显示了`TextBox` [控件](http://msdn.microsoft.com/en-us/library/cc645061%28v=vs.95%29.aspx)的默认样式和模板。

```
Style TargetType="TextBox">
<Setter Property="BorderThickness" Value="1"/>
<Setter Property="Background" Value="#FFFFFFFF"/>
<Setter Property="Foreground" Value="#FF000000"/>
<Setter Property="Padding" Value="2"/>
<Setter Property="BorderBrush">
  <Setter.Value>
    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
      <GradientStop Color="#FFA3AEB9" Offset="0"/>
      <GradientStop Color="#FF8399A9" Offset="0.375"/>
      <GradientStop Color="#FF718597" Offset="0.375"/>
      <GradientStop Color="#FF617584" Offset="1"/>
    </LinearGradientBrush>
  </Setter.Value>
</Setter>
<Setter Property="Template">
  <Setter.Value>
    <ControlTemplate TargetType="TextBox">
      <Grid x:Name="RootElement">
        <vsm:VisualStateManager.VisualStateGroups>
          <vsm:VisualStateGroup x:Name="CommonStates">
            <vsm:VisualState x:Name="Normal"/>
            <vsm:VisualState x:Name="MouseOver">
              <Storyboard>
                <ColorAnimation Storyboard.TargetName="MouseOverBorder" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" To="#FF99C1E2" Duration="0"/>
              </Storyboard>
            </vsm:VisualState>
            <vsm:VisualState x:Name="Disabled">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
              </Storyboard>
            </vsm:VisualState>
            <vsm:VisualState x:Name="ReadOnly">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetName="ReadOnlyVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
              </Storyboard>
            </vsm:VisualState>
          </vsm:VisualStateGroup>
          <vsm:VisualStateGroup x:Name="FocusStates">
            <vsm:VisualState x:Name="Focused">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
              </Storyboard>
            </vsm:VisualState>
            <vsm:VisualState x:Name="Unfocused">
              <Storyboard>
                <DoubleAnimation Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="Opacity" To="0" Duration="0"/>
              </Storyboard>
            </vsm:VisualState>
          </vsm:VisualStateGroup>
          <vsm:VisualStateGroup x:Name="ValidationStates">
            <vsm:VisualState x:Name="Valid"/>
            <vsm:VisualState x:Name="InvalidUnfocused">
              <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                  <DiscreteObjectKeyFrame KeyTime="0">
                    <DiscreteObjectKeyFrame.Value>
                      <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                  </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
              </Storyboard>
            </vsm:VisualState>
            <vsm:VisualState x:Name="InvalidFocused">
              <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                  <DiscreteObjectKeyFrame KeyTime="0">
                    <DiscreteObjectKeyFrame.Value>
                      <Visibility>Visible</Visibility>
                    </DiscreteObjectKeyFrame.Value>
                  </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsOpen">
                  <DiscreteObjectKeyFrame KeyTime="0">
                    <DiscreteObjectKeyFrame.Value>
                      <sys:Boolean>True</sys:Boolean>
                    </DiscreteObjectKeyFrame.Value>
                  </DiscreteObjectKeyFrame>
                </ObjectAnimationUsingKeyFrames>
              </Storyboard>
            </vsm:VisualState>
          </vsm:VisualStateGroup>
        </vsm:VisualStateManager.VisualStateGroups>
        <Border x:Name="Border" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="1" Opacity="1" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}">
            <Grid>
            <Border x:Name="ReadOnlyVisualElement" Opacity="0" Background="#5EC9C9C9"/>
            <Border x:Name="MouseOverBorder" BorderThickness="1" BorderBrush="Transparent">
              <ScrollViewer x:Name="ContentElement" Padding="{TemplateBinding Padding}" BorderThickness="0" IsTabStop="False"/>
            </Border>
          </Grid>
        </Border>
        <Border x:Name="DisabledVisualElement" Background="#A5F7F7F7" BorderBrush="#A5F7F7F7" BorderThickness="{TemplateBinding BorderThickness}" Opacity="0" IsHitTestVisible="False"/>
        <Border x:Name="FocusVisualElement" BorderBrush="#FF6DBDD1" BorderThickness="{TemplateBinding BorderThickness}" Margin="1" Opacity="0" IsHitTestVisible="False"/>
        <Border x:Name="ValidationErrorElement" BorderThickness="1" CornerRadius="1" BorderBrush="#FFDB000C" Visibility="Collapsed">
          <ToolTipService.ToolTip>
            <ToolTip x:Name="validationTooltip" Template="{StaticResource ValidationToolTipTemplate}" Placement="Right" 
                     PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                     DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
              <ToolTip.Triggers>
                <EventTrigger RoutedEvent="Canvas.Loaded">
                  <EventTrigger.Actions>
                    <BeginStoryboard>
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsHitTestVisible">
                          <DiscreteObjectKeyFrame KeyTime="0">
                            <DiscreteObjectKeyFrame.Value>
                              <sys:Boolean>true</sys:Boolean>
                            </DiscreteObjectKeyFrame.Value>
                          </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </BeginStoryboard>
                  </EventTrigger.Actions>
                </EventTrigger>
              </ToolTip.Triggers>
            </ToolTip>
          </ToolTipService.ToolTip>
          <Grid Width="12" Height="12" HorizontalAlignment="Right" Margin="1,-4,-4,0" VerticalAlignment="Top" Background="Transparent">
            <Path Margin="1,3,0,0" Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C"/>
            <Path Margin="1,3,0,0" Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff"/>
          </Grid>
        </Border>
      </Grid>
    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

您需要为`TextBox`（在 Expression Blend 中右键单击`TextBox`-> EditTemplate-> Esit a Copy ）创建新样式并根据需要进行修改。
要删除默认边距，请使用此样式

```
<Style x:Key="NewTextBoxStyleWithoutMargins" TargetType="TextBox">
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilyNormal}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Background" Value="{StaticResource PhoneTextBoxBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneTextBoxForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneTextBoxBrush}"/>
        <Setter Property="SelectionBackground" Value="{StaticResource PhoneAccentBrush}"/>
        <Setter Property="SelectionForeground" Value="{StaticResource PhoneTextBoxSelectionForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="MainBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="MainBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentElement">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="ReadOnly">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="MainBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Collapsed</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="ReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ReadonlyBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentElement">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxReadOnlyBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="MainBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxEditBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="MainBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneTextBoxEditBorderBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="MainBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="0"/>
                        <Border x:Name="ReadonlyBorder" BorderBrush="{StaticResource PhoneDisabledBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" Margin="0" Visibility="Collapsed"/>
                        <Border BorderBrush="Transparent" BorderThickness="{TemplateBinding BorderThickness}" Background="Transparent" Margin="0">
                            <ContentControl x:Name="ContentElement" BorderThickness="0" HorizontalContentAlignment="Stretch" Margin="0" Padding="{TemplateBinding Padding}" VerticalContentAlignment="Stretch"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

我只是替换`Margin="{StaticResource PhoneTextBoxInnerMargin}"`为`Margin="0"`.

只需将此样式设置为您的`TextBox`.
希望有帮助。

# java - Java中的大型二维双数组

> ID：16166937
> 
> 赞同：0
> 
> 时间：2013-04-23T10:24:24.760
> 
> 标签：java, double, multidimensional-array

我尝试在java中初始化二维双数组，这个双数组有1000行和50列。

当我这样做时，我得到了这个错误：

```
 Too many constants, the constant pool for ClassName would exceed to 65536 entries. 
```

以下是我工作的一部分：

```
 double[][] haltonArray = {{0.116538, -1.08275, -0.832512, 1.9746, 1.68741, 2.23391, 
          0.703111, -0.400975, -1.8214, -2.22141, 0.127014, -1.31939, 
          0.874426, 0.0916673, 0.236509, 0.731912, 1.43766, 0.88484, 
          1.13653, -0.882871, -0.212072, -0.431315, -1.21639, -0.0352919, 
          0.334481, 0.891777, -0.178983, 0.531624, -0.360295, 0.551329, 
          0.696159, -0.595714, 0.27043, -0.262656, -0.176079, -0.667502, 
          0.66105, -0.593195, 2.10675, 
          0.168339, -0.918746, -1.59296, -0.0584028, -0.336773, -1.0043, 
        -1.59346, -0.041084, 1.93094, 0.896973,0.637633}, 
        {-0.534821, -0.0682488, -0.246726, -1.08433, -1.61264, 
        -1.47508, 0.907127, -0.261507, -1.42036, -1.66814, 0.209045,      -1.17226,
           0.967877, 0.150398, 0.291741, 0.795219, 1.56906, 0.947359, 
          1.21103, -0.831883, -0.177076, -0.396745, -1.15539, -0.00712026, 
          0.361938, 0.929345, -0.154306, 0.558805, -0.335862, 0.577341, 
          0.721534, -0.573016, 0.289458, -0.244034, -0.159018, -0.6469, 
          0.681047, -0.574957, 2.27073, 
          0.183053, -0.897595, -1.54553, -0.0452613, -0.323059, -0.983445, 
        -1.55014, -0.0291968, 2.00915, 0.913608, 0.651105}, {0.828784, ... }}; 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:40:06.960

**常量池最多允许 65536 个条目，因此您不能超过限制**。

常量池表是存储大部分文字常量值的地方。这包括诸如各种数字、字符串、标识符名称、对类和方法的引用以及类型描述符等值。常量池表中特定常量的所有索引或引用由 16 位（类型 u2）数字给出，其中索引值 1 指表中的第一个常量（索引值 0 无效）。

由于文件格式开发过程中的历史选择，常量池表中的常量数量实际上与表之前的常量池计数不同。首先，表从 1（而不是 0）开始索引，因此计数实际上应该被解释为最大索引。此外，两种类型的常量（长整数和双精度数）占用表中的两个连续槽，尽管第二个这样的槽是一个从未直接使用的虚拟索引。

常量池中每一项（常量）的类型由一个初始字节标签标识。该标签后面的字节数及其解释取决于标签值。

欲了解更多详情，请访问[此处](http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool)。

# zend-framework2 - 通过更新 Zend Framework 2 库跳过安装 bin/classmap_generator.php ...

> ID：16166938
> 
> 赞同：1
> 
> 时间：2013-04-23T10:24:33.007
> 
> 标签：zend-framework2, updates, composer-php

当我尝试在我的项目中更新 ZF2 时，我收到以下警告：

```
# php composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Installing zendframework/zendframework (2.1.5)
    Loading from cache

    Skipped installation of bin/classmap_generator.php for package zendframework/zendframework: name conflicts with an existing file
zendframework/zendframework suggests installing doctrine/common (Doctrine\Common >=2.1 for annotation features)
zendframework/zendframework suggests installing ext-intl (ext/intl for i18n features)
zendframework/zendframework suggests installing ircmaxell/random-lib (Fallback random byte generator for Zend\Math\Rand if OpenSSL/Mcrypt extensions are unavailable)
zendframework/zendframework suggests installing pecl-weakref (Implementation of weak references for Zend\Stdlib\CallbackHandler)
zendframework/zendframework suggests installing zendframework/zendpdf (ZendPdf for creating PDF representations of barcodes)
zendframework/zendframework suggests installing zendframework/zendservice-recaptcha (ZendService\ReCaptcha for rendering ReCaptchas in Zend\Captcha and/or Zend\Form)
Writing lock file
Generating autoload files 
```

这里出了什么问题？这些冲突的原因是什么？如何正确更新 ZF2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:44:55.763

通常没什么好担心的，最可能的解释是您删除了 zendframework（或您的整个供应商目录）并忘记删除 bin/classmap_generator.php 文件，因此它看到它已经存在并跳过该文件的安装。

# html - WebKit点击透明度不起作用

> ID：16166945
> 
> 赞同：0
> 
> 时间：2013-04-23T10:24:47.710
> 
> 标签：html, css, webkit

我试图摆脱水龙头的透明度。但由于某种原因，这不适用于我的 html 文档中的任何元素。有人知道为什么会这样吗？

```
body {
     -webkit-tap-highlight-color: rgba (0,0,0,0);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:55:51.637

使用“html”而不是“正文”。这可能会解决你的问题。

# wix - 如何禁用自定义安装类型并仅显示 WiX 中的安装路径

> ID：16166946
> 
> 赞同：0
> 
> 时间：2013-04-23T10:24:50.160
> 
> 标签：wix

我的安装程序需要所有向导选项，所以我使用了 WixUI_Mondo。这将显示所有设置选项：( `Typical, Custom and Complete`)。

根据我的要求，`Custom`不应显示该类型。默认情况下，软件包安装在程序文件下。

如何禁用此功能也只想在设置类型屏幕中显示“C:\Program Files\MyProduct”？

```
<Feature Id='MainProgram' Title='Program' Description='The main executable.' Level='1'>
        <ComponentRef Id='MainExecutable' />      
</Feature>

<UIRef Id="WixUI_Mondo" />
<UIRef Id="WixUI_ErrorProgressText" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:27:35.620

如果您不想使用自定义设置，请使用 WixUI_InstallDir。它有安装目录选项。

如果要修改自定义设置中的任何内容，请使用 Wix 源代码。在源代码中，您可以在以下位置找到 UI WXS 文件。

```
src\ext\UIExtension\wixlib 
```

打开**WixUI_Mondo.WXS**文件并复制片段内的所有代码并在您的项目中使用它。如果您修改对话框发布顺序，您可以做任何事情，（添加自定义对话框或禁用现有对话框等）

**注意：您可以从**[这里](http://wix.codeplex.com/SourceControl/changeset/view/16a8b5dbf828f92e28138ce3c9ee852affeaa1ef)下载源代码。

# java - 扫描仪只读取文本文件的第一行

> ID：16166950
> 
> 赞同：0
> 
> 时间：2013-04-23T10:25:10.177
> 
> 标签：java, file, for-loop, java.util.scanner

这是我的代码

```
 public static void main(String[] args) {

    File source = //

    Scanner s = null;       
    int lineNumber =0;
        ArrayList<ArrayList<Integer>> tagsArray = new ArrayList<>();
    try {

        s= new Scanner(source);
    while (s.hasNext()) {

            String[] cols = s.nextLine().split("    ");

            for (int i = 0; i < cols.length; i++) {
                if (cols[i].equals("1"))
                    tagsArray.get(i).add(lineNumber);
                }
            lineNumber++;

        }   
    } catch (Exception e) {
        // TODO: handle exception
    }
} 
```

当我删除 for 语句时，它读取了整个文本文件，但是当我使用它时，它只读取了第一行，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:29:51.117

我猜你得到一个`Exception`，但你抓住并隐藏它而不是处理它。**这真是太糟了！**您至少应该打印异常的堆栈跟踪。

您尝试访问：

```
tagsArray.get(i).add(lineNumber); 
```

什么时候`tagsArray`是空的。您需要在访问之前实例化每个`ArrayList<Integer>`内部。`tagsArray`

# java - 创建名为 'org.springframework.scheduling.quartz.SchedulerFactoryBean#0' 的 bean 时出错

> ID：16166951
> 
> 赞同：0
> 
> 时间：2013-04-23T10:25:10.430
> 
> 标签：java, spring, quartz-scheduler

我正在使用 Spring 3.0.5 和 Quartz 1.8.3 并且在 SchedulerFactoryBean 中遇到异常有人可以帮我解决这个问题吗？使用 Quartz 1.8.6 也无法正常工作

我有以下配置

```
<bean name="dailyScheduleBean" class="com.abc.quartz.ComputeAndScheduleAlert" />

<bean id="dailyQuartzJob"
    class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="targetObject" ref="dailyScheduleBean" />
    <property name="targetMethod" value="computeScheduleAlert" />
</bean>

<bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
<!-- see the example of method invoking job above -->
<property name="jobDetail" ref="dailyQuartzJob" />
<!-- 10 seconds -->
<property name="startDelay" value="10000" />
<!-- repeat every 50 seconds -->
<property name="repeatInterval" value="50000" />
</bean>

<bean id="dailyTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="dailyQuartzJob" />
    <!-- run every morning at 00:05 AM CST -->
    <property name="cronExpression" value="0 05 11 ? JAN-DEC SUN-SAT" />
</bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>          
            <ref bean="dailyTrigger" />                 
            <ref bean="simpleTrigger" /> 
        </list>
    </property> 
```

以下是全栈跟踪

```
%[main] ERROR org.springframework.web.servlet.DispatcherServlet  - Context initialization failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.scheduling.quartz.SchedulerFactoryBean#0' defined in ServletContext resource [/WEB-INF/hmpn-mvc-dispatcher-servlet.xml]: Invocation of init method failed; nested exception is org.quartz.SchedulerConfigException: Failure occured during job recovery. [See nested exception: org.quartz.impl.jdbcjobstore.LockException: Failure obtaining db row lock: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR. [See nested exception: java.sql.SQLException: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR.]]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4420)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4733)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.quartz.SchedulerConfigException: Failure occured during job recovery. [See nested exception: org.quartz.impl.jdbcjobstore.LockException: Failure obtaining db row lock: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR. [See nested exception: java.sql.SQLException: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR.]]
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:607)
    at org.quartz.impl.jdbcjobstore.JobStoreCMT.initialize(JobStoreCMT.java:142)
    at org.springframework.scheduling.quartz.LocalDataSourceJobStore.initialize(LocalDataSourceJobStore.java:151)
    at org.quartz.impl.StdSchedulerFactory.instantiate(StdSchedulerFactory.java:1269)
    at org.quartz.impl.StdSchedulerFactory.getScheduler(StdSchedulerFactory.java:1460)
    at org.springframework.scheduling.quartz.SchedulerFactoryBean.createScheduler(SchedulerFactoryBean.java:600)
    at org.springframework.scheduling.quartz.SchedulerFactoryBean.afterPropertiesSet(SchedulerFactoryBean.java:481)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 41 more
Caused by: org.quartz.impl.jdbcjobstore.LockException: Failure obtaining db row lock: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR. [See nested exception: java.sql.SQLException: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR.]
    at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:109)
    at org.quartz.impl.jdbcjobstore.DBSemaphore.obtainLock(DBSemaphore.java:112)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3756)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3725)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.cleanVolatileTriggerAndJobs(JobStoreSupport.java:747)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.initialize(JobStoreSupport.java:605)
    ... 49 more
Caused by: java.sql.SQLException: Line 1: FOR UPDATE clause allowed only for DECLARE CURSOR.
    at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)
    at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
    at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:632)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:477)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:776)
    at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:89)
    ... 54 more
%[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-5] DEBUG org.quartz.simpl.SimpleThreadPool  - WorkerThread is shut down.
%[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-8] DEBUG org.quartz.simpl.SimpleThreadPool  - WorkerThread is shut down.
%[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-4] DEBUG org.quartz.simpl.SimpleThreadPool  - 
WorkerThread is shut down. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T14:23:49.497

如果您使用的是 MSSQL，请将此类 Quartz 属性添加到 SchedulerFactoryBean：

```
org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.MSSQLDelegate
org.quartz.jobStore.selectWithLockSQL=select lock_name from {0}locks with (updlock,rowlock) where lock_name=? 
```

# ios - 使用zachron iphonepdf从iOS中的pdf中检索文本？

> ID：16166952
> 
> 赞同：-1
> 
> 时间：2013-04-23T10:25:14.207
> 
> 标签：ios, objective-c, xcode, pdf

我正在使用相同的 zachrone `iphonepdf`，但我没有得到文本。我的文本视图什么也没显示。有什么问题？

这是我的代码：

```
NSString *text=convertPDF(@"Course.pdf");
texview.text=text; 
```

但是我在文本视图中没有得到任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:46:53.550

文本提取器[zachron / pdfiphone](https://github.com/zachron/pdfiphone)（我假设您的意思是那个）非常幼稚，并且做出了很多假设。

*   它忽略 PDF 文件结构，因此完全忽略它检查的数据是否仍在当前版本中使用。

*   它忽略加密，因此对于许多具有使用限制的文档将完全失败。

*   它完全忽略了字体编码，并隐含地假定了一个 ASCII'ish ——这在只有英文文本而不是嵌入字体的小型 PDF 中经常发生；否则结果可以是任何东西。

*   ...许多更多的假设...

除非只需要处理非常简单的文档，并且提取的文本对于代码的功能并不是真正必要的，否则我建议使用不同的代码进行文本提取。

# c# - 使用正则表达式 c# 从字符串中删除连续的

> ID：16166954
> 
> 赞同：3
> 
> 时间：2013-04-23T10:25:16.893
> 
> 标签：c#, regex

我有以下字符串正则表达式

```
"choose to still go on the trip. <br><br>\r\nNote that when booking" 
```

用正则表达式转换它后，我只需要用一个替换`<br>`标签，`<br>`所以字符串会是这样的

```
"choose to still go on the trip. <br>Note that when booking" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T10:44:37.637

这可以使用**HTML Agility Pack**（开源项目[http://html-agility-pack.net](http://html-agility-pack.net)）以另一种（更安全的）方式完成。

它考虑了各种符号`<br>`，`<br/>`而`<br />` *您不必担心*。这意味着您可以专注于实际任务：替换重复项。

请参阅[使用 HTML Agility Pack 删除重复元素链](https://stackoverflow.com/questions/11307158/remove-chain-of-duplicate-elements-with-html-agility-pack)，它解释了如何替换重复元素的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T10:33:09.113

如果您需要考虑标签之间有空格的情况，请尝试以下正则表达式：

```
myInputStr = Regex.Replace(myInputStr,
    @"([\b\s]*<[\b\s]*[bB][rR][\s]*/?[\b\s]*>){2,}",
    "<br>", RegexOptions.Multiline); 
```

`<br>`此正则表达式将用单个实例替换 2 个或更多标签实例，而不管标签的形成（间距、大小写、自闭合等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T10:27:57.180

**编辑：**如果你不知道`<br>`你有多少，你可以这样做：

1.  拆分您的字符串`<br>`并删除空条目。
2.  用单个连接字符串`<br>`

这是代码：

```
string yourString = "choose to still go on the trip. <br><br>\r\nNote that when booking";

var temp = 
    yourString.Split(new string[] { "<br>" }, StringSplitOptions.RemoveEmptyEntries)
               .Where(i => i.Replace(" ", string.Empty).Length > 0);

string result = string.Join("<br>", temp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:30:00.887

就像 Martin Eden 所认为的：

```
while (text.Contains("<br><br>")) 
{ 
    text = text.Replace("<br><br>", "<br>"); 
} 
```

或者

```
string newString = oldString.Replace("<br><br><br>", "<br>");
newString = newString.Replace("<br><br>", "<br>"); 
```

做多条这样的行，增加`<br>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T10:52:03.310

```
Regex.Replace(input, @"(<br\s*/{0,1}>\s*(</\s*br>)*){2,}", "<br>", 
    RegexOptions.CultureInvariant | 
    RegexOptions.IgnoreCase |
    RegexOptions.Multiline); 
```

用单个替换 or 的任何两个或`<br>`多个`<br/>`出现。`<br></br>``<br>`

这会考虑空格。`<br >`将与`<br />`or匹配`<br > </ br>`。

如果您事先删除不需要的“\r\n”，则可以省略`RegexOptions.Multiline`.

# boost - boost.log 静态链接错误

> ID：16166955
> 
> 赞同：0
> 
> 时间：2013-04-23T10:25:18.773
> 
> 标签：boost, boost-log

尝试将我的项目与 MSVC 10.0 上的 boost.log 静态链接时出现以下（以及更多）错误：

```
 1>libboost_log-vc100-mt-gd-1_53.lib(attribute_name.obj) : error
 LNK2001: unresolved external symbol "**__declspec(dllimport)** public:
 __thiscall std::_Container_base::~_Container_base(void)" (__imp_??1_Container_base@std@@QAE@XZ)
 1>libboost_log-vc100-mt-gd-1_53.lib(text_file_backend.obj) : error
 LNK2001: unresolved external symbol "**__declspec(dllimport)** public:
 __thiscall std::_Container_base::~_Container_base(void)" (__imp_??1_Container_base@std@@QAE@XZ) 
```

请注意，该项目*还*链接到 boost 系统、文件系统和线程库。

```
1>      Searching ../lib/\libboost_system-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_date_time-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_regex-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_thread-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_chrono-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_log-vc100-mt-gd-1_53.lib:
1>      Searching ../lib/\libboost_filesystem-vc100-mt-gd-1_53.lib: 
```

我的项目没有定义`BOOST_ALL_DYN_LINK`or`BOOST_LOG_DYN_LINK`宏，所以我没想到会看到`__declspec`签名，我认为这是最终的问题。我是否缺少正确静态链接该库所需的内容？

**更新**

我删除了项目中的预编译头文件并执行了“清理”，一切都很好。预编译的头文件是否有可能以某种方式导致项目静态链接到 CRT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-21T06:45:34.737

您可能需要`log_setup`先链接然后再`log`之​​前`filesystem`等等，这是我的提升链接代码`CMakeLists.txt`：

```
set(USED_BOOST_LIBS ${Boost_LOG_SETUP_LIBRARY} ${Boost_LOG_LIBRARY} 
  ${Boost_FILESYSTEM_LIBRARY} 
  ${Boost_SYSTEM_LIBRARY} ${Boost_DATE_TIME_LIBRARY} 
  ${Boost_THREAD_LIBRARY} ${Boost_REGEX_LIBRARY} 
  )

...
target_link_libraries(myexe ${USED_BOOST_LIBS}) 
```

它适用于我在 MSVC 14.0 和 gcc 4.8 上。你可以试试。

# ios - 延迟实例化的缺点 iOS

> ID：16166957
> 
> 赞同：2
> 
> 时间：2013-04-23T10:25:22.557
> 
> 标签：ios, objective-c, lazy-loading

所以看起来惰性实例化被广泛使用并且每个人都知道惰性实例化的优点。

这就引出了一个问题：我们应该懒惰地实例化每个对象吗？

我严重怀疑。

那么问题来了，惰性实例化的缺点是什么？

取自（Apple Sample LocateMe）的样本：

```
- (NSDateFormatter *)dateFormatter {
    if (dateFormatter == nil) {
        dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
        [dateFormatter setTimeStyle:NSDateFormatterLongStyle];
    }
    return dateFormatter;
} 
```

这将为我们提供仅在需要时初始化此对象的优势。

顺便说一句，上面的示例取自 Apple，似乎他们只是懒惰地实例化“只读”对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:02:30.743

好的，我想我会以答案的形式改写我的回复（广告你现在有太多评论）......

在您给出的示例中，多次使用同一个对象实例是安全的，因为它的内部状态不受影响。也就是说，它提供服务并且不会在调用之间保持状态。

作为一般规则，惰性实例化仅与单例或通过工厂提供的那些实例真正相关。例如，就像在您的示例中一样，实例在“服务”或应用程序的持续时间内存在 - 例如资源处理。通常，您通常只想在需要时创建一个新的对象实例。

延迟初始化的优点/缺点是：

*   您只需要初始化一个对象一次，一个实例就足以满足所有服务调用。通话之间不会保持状态。这里的好处是加载对象可能很耗时，因此您可以避免启动成本，或者在单例上下文中，您可以避免实例化多个昂贵的对象。这也适用于内存占用——一个实例，而不是多个实例。
*   但是，如果您懒惰地初始化一个对象，则在运行时会产生成本，因为您实际上已经延迟了它的构造。所以，在运行时，当用户在等待时，你去创建一个昂贵的对象。不理想，所以你应该避免这种情况——如果它又是一个长期服务的对象。
*   在您给出的示例中，还有一个对记忆负责的问题。客户端代码显然负责释放此实例。如果它是一个长期服务对象，他们在哪里做呢？好吧，您可能需要观察 NSApp 的 applicationWillTerminate 委托。
*   如果一个实例维护在实例上的方法调用之间设置的状态，那么这种模式就不能工作。调用之间的实例状态可能不一致（可能已更改）。

另请注意，这是一种实例方法，如果实例 var 为空，则设置其值...这意味着，在这种情况下，每个封闭类实例（定义此方法的类）仍然有一个实例。在这种情况下，您的封闭实例负责清理。真的，我认为这是为了代码的清晰，而不是内存管理。或者，封闭类可能是长期存在的，它可以节省重新创建格式化程序（也许重新创建比重置更昂贵）。

如果想到其他任何内容，将进行编辑。希望能帮助到你。

# qt - 打印整个 QWebView 内容未按预期结果

> ID：16166963
> 
> 赞同：-3
> 
> 时间：2013-04-23T10:25:35.307
> 
> 标签：qt, qt4, qt5

我一直在尝试打印 QWebView。最初它看起来很简单。

```
class myView:public QWebView
{
...
} 
```

在 myView 的一个公共成员函数中

```
 QPrinter printer;

  printer.setPageSize(QPrinter::A4);
  printer.setOrientation(QPrinter::Portrait);

  QPrintDialog *dlog = new QPrintDialog (&printer, this);

  qDebug () <<" HoHoooo.. Going to print ";
  if ( dlog->exec ()  != QDialog::Accepted)
  {
      qDebug () <<"Printing Not accepted.. :( ";

  }
  else
  {
      print(&printer);

  } 
```

打印输出不正确。请建议，如果我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:08:52.730

检查您要打印的 HTML 代码是否符合 HTML 规范（使用 HTML 检查工具！），即使您的代码在屏幕上渲染得很好，打印渲染是完全不同的代码，因此在您的情况下可能表现不同HTML 页面不符合标准。

如果它符合要求，您可以在 Safari 或任何其他基于 WebKit 的浏览器中检查打印，以查看它是否在那里正确打印。

# ios - 多对多关系的核心数据详细视图

> ID：16166964
> 
> 赞同：1
> 
> 时间：2013-04-23T10:25:35.630
> 
> 标签：ios, uitableview, core-data

我正在努力处理核心数据的某些方面，即设置一个 UITableView 来列出来自一对多关系的数据。

我有三个实体，Teams、TeamDetails 和 Players：

![在此处输入图像描述](https://i.stack.imgur.com/7F8Hk.png)

在第一个视图中，我列出了 Teams 实体中所有团队的名称，然后点击每个单元格转到带有按钮的中间视图，以编辑团队的详细信息或编辑团队的球员。点击一个按钮会转到另一个列出团队详细信息或球员的 UITableView。

列出 TeamDetails 是可行的，因为它是一对一的关系和静态单元格表​​。

我正在尝试设置一个 UITableViewController 来列出与所选球队相关的所有球员。所以我通过 segue 将 ManagedObjectContext 等传递给表视图控制器，如下所示：

```
else if ([segue.identifier isEqualToString:@"ShowPlayersSegue"]){
    NSLog(@"Setting ShowPlayersTVC as a delegate of EditPlayerTVC");
    ShowPlayersTVC *showPlayerTVC = segue.destinationViewController;
    showPlayerTVC.delegate = self;
    showPlayerTVC.managedObjectContext = self.managedObjectContext;

    showPlayerTVC.team = self.team;
    showPlayerTVC.player = self.team.playerDetails;
} 
```

因此，在我的 showPlayerTVC 中，我想获取该特定球队的球员集，然后为每个球员设置一行，将 playerName 属性显示为单元格 textlabel.text。

我一直在阅读教程并玩了很长时间，但没有取得太大的成功。我想我需要从 NSSet 创建一个 Player 对象数组，我可以这样做，但我无法让 UITableview 列出对象。我可能在这里遗漏了一些基本的东西，但任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:13:54.153

首先，您的数据模型存在一些问题。

一对一的细节我不明白 - 为什么不直接向 Team 实体添加属性？此外，您可能希望将其中一些转换为更灵活的关系，例如 Trainer 实体等。

此外，您的命名存在缺陷，会导致编程错误或至少使您的代码难以阅读。注意单数/复数混淆。这是我为您的实体/关系命名的建议：

```
Team - players <--------------->> team - Player 
```

要在表格视图中显示数据，您应该使用`NSFetchedResultsController`. 让 FRC 获取 Player 实体并为其获取请求提供以下谓词：

```
[NSPredicate predicateWithFormat:@"team = %@", teamObject]; 
```

您的 segue 代码几乎是正确的。给新的视图控制器一个`team`属性，并在其获取的结果控制器的上述谓词中使用它。您不需要任何球员或“球员详细信息”信息（无论如何它们都与球队相关联）。

# r - 绘制 PCA 的所有组件

> ID：16166967
> 
> 赞同：4
> 
> 时间：2013-04-23T10:25:44.463
> 
> 标签：r, plot, pca

我想知道我们如何才能将个人绘制在第一个和第二个组件之外，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/fcoxN.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T11:04:36.807

这可能有效：

```
pc.cr <- princomp(USArrests, cor = TRUE)
pairs(pc.cr$loadings, col=c("red", "green", "blue")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/AF5Ur.jpg)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T11:32:37.563

另一种选择是`splom`从`lattice`包中使用。我在这里使用：

1.  `splom`用于矩阵散点图
2.  `prcomp`计算 PCA
3.  `mclustBIC`对数据进行聚类。因为您需要按某些标准对点进行分组。请注意，仅提供颜色只会回收 col 参数。

你可以写例如：

```
library(lattice)
library(mclust)
dat <- iris[,1:4]
dat.pca <- prcomp(iris[,1:4])
dat.em <- mclustBIC(dat) 
splom(as.data.frame(dat.pca$x), 
      col=summary(dat.em,data=dat)$classification, cex=2,pch='*') 
```

![在此处输入图像描述](https://i.stack.imgur.com/2Z9s8.png)

# multithreading - 子（线程中）中的 Perl Tk 更新（重绘）小部件

> ID：16166968
> 
> 赞同：0
> 
> 时间：2013-04-23T10:25:44.620
> 
> 标签：multithreading, perl, tk

我有一些小部件，实际上是复选框。我有包含它们的值的变量。我已经共享了这个变量并调用了一个创建新线程的子程序。变量更改为此子项，但小部件的外观保持不变。所以这就是问题所在：我如何重新绘制小部件或以某种方式更新它们的外观......或者我如何重建我的程序以便它们自动更新或其他东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:30:50.937

使用线程和 Tk 并不容易。有关提示和技巧，请参阅[Perl Tk 和PerlMonks 上的线程。](http://www.perlmonks.org/?node_id=732294)

你真的需要线程吗？使用`Tk::after`or`$widget->update`您通常可以更新小部件以更改值。

# java - Google App Engine 数据存储区中的命名空间

> ID：16166969
> 
> 赞同：1
> 
> 时间：2013-04-23T10:25:46.210
> 
> 标签：java, google-app-engine

由于我的应用程序的性质，我需要为数据存储区“命名空间”。

这是我在文档中看到的代码：

```
// Set the namepace temporarily to "abc"
String oldNamespace = NamespaceManager.get();
NamespaceManager.set("abc");
try {
  ... perform operation using current namespace ...
} finally {
  NamespaceManager.set(oldNamespace);
} 
```

但是，我不确定必须在哪里将命名空间设置为 XML，然后才能使用它，或者您可以在代码中动态创建命名空间？

我还看到`MemcacheService`有一种`setNamespace`方法（尽管已经弃用）；有`DatastoreService`没有办法为我们从`DatastoreServiceFactory`工厂获得的给定服务实例命名空间，这样我们就不必在代码中来回设置命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:26:32.267

您不必声明命名空间即可使用它们。如果你想创建一个多租户应用程序，那么命名空间是一个完美的选择。基本上，您只需在请求开始时设置**一次**命名空间。该命名空间设置会自动应用于该请求期间的所有 API 调用。仅在访问所有租户**共享**的数据时才需要如文档中所示来回切换。

# java - 如何分发具有依赖项的开源 jar？

> ID：16166974
> 
> 赞同：3
> 
> 时间：2013-04-23T10:26:00.840
> 
> 标签：java, jar, dependency-management, software-distribution

我想分发一个我在一些许可许可下编写的 Java 包。

结果`speedytools-0.1.jar`具有一些常见的 Java 依赖项，例如 Apache Commons 和 Guava。

分发这个 jar 的最具 Java 风格的方式是什么？我应该在我的分布式 zip 文件中包含依赖项吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T10:33:14.260

你不应该在你的 jar 中包含依赖项。只需将它们声明为 Maven 依赖项。

这将带来几个优点：

*   用户可以将您的库与任何向后兼容版本的独立 Guava 结合使用。

*   如果用户使用了不依赖于 Guava 的部分库，则用户可以通过从库中排除 Guava 传递依赖项来减少依赖项计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:32:02.913

[jarjar](https://code.google.com/p/jarjar/)：“自 2004 年以来嵌入 Java 库。”

*   您不必担心您的库依赖于特定版本的依赖项，这可能会与另一个库的依赖项发生冲突。

*   如果您在未来的版本中添加依赖项，您可以自由更改您的库 - 用户不必重新配置他们的构建脚本。

*   您可以修补这些库以满足您的需求：如果您想要对这些常见 Java 依赖项之一进行特殊构建，那么就破解 - 您的构建甚至不需要与公共版本兼容。

*   **它使下载和实现包的整个过程变得非常简单。**这在多大程度上是有益的（甚至是可取的）显然取决于您的包裹是什么，它的作用以及您希望它为谁做。诚然，在我能想象的大多数用例中，我都倾向于使用 maven 解决方案——但尽管如此，我认为 jarjar 在像这个问题一样开放的问题中肯定有一席之地，因为肯定还有用例这是理想的。

ps很好的问题，期待看到其他答案。

# android - PhoneGap 询问您是否要退出或返回历史记录

> ID：16166979
> 
> 赞同：1
> 
> 时间：2013-04-23T10:26:35.043
> 
> 标签：android, cordova, back-button

这是我的代码：

```
 function onLoad(){
                alert("onLoad");
                document.addEventListener("deviceready",onDeviceReady, true);
             }

             function onDeviceReady(){
                navigator.notification.alert("PhoneGap is working!!");
                document.addEventListener("backbutton", onBackKeyDown, false);
             }

            function onBackKeyDown(e) {        
                    navigator.notification.alert("PhoneGap handle back button click!!!");
                     /* want you to go back???
                          if yes go back or exit app
                     */
            } 
```

你能帮我做吗

```
/* want you to go back???

   if yes go back or exit app

*/ 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:42:37.613

```
function showAlert() {
                    navigator.notification.confirm(
                        'Vuoi uscire dall\'applicazione?',  // message
                        onConfirm,              // callback to invoke with index of button pressed
                        'Chiudere?',            // title
                        'Chiudi app,Annulla'          // buttonLabels
                    );
                }

            function onConfirm(button) {
                if(button==1)           
                    navigator.app.exitApp();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T09:33:08.523

navigator.app.exitApp() 在 iOS 上不起作用 :(

继承者： [https ://stackoverflow.com/a/14423091/826822](https://stackoverflow.com/a/14423091/826822)

# c# - 将文本框拆分为 4 个单独的文本框，但保存在一个 EF 字段中

> ID：16166981
> 
> 赞同：2
> 
> 时间：2013-04-23T10:26:38.683
> 
> 标签：c#, wpf, mvvm, textbox, concatenation

标题并没有很好地解释我的场景，所以我会尽力解释我能做到的最好的方式。

我最近学会了如何`multi-bind`使用 a `listview`to `concatenate`two`fields`并用 "," 分隔它们，这相对容易实现。但是现在，我想实现一些更高级的东西，但不确定是否有可能做到，我不太确定如何实现它，因此希望得到一些帮助或建议或指导来帮助我实现这一目标： ）。

我正在使用`Entity framework`创建实体模型，并且一些表比我预期的要大，因此，我不希望添加更多的字段然后需要（在这种情况下）。

我的要求之一，我有一个`textbox`，包含不超过 13 个字符。但是，我现在被要求实现类似于下图的东西；

![在此处输入图像描述](https://i.stack.imgur.com/Ttp0V.jpg)

正如您从图像中看到的那样，`textbox`顶部是我目前拥有的，但我想找到一种`textbox`像下面那样拆分的方法（包含；123 PA ...）。

回到我的问题，有没有办法`concatenate`在`textbox`应用程序中包含可能的更多 4`textboxes`并且它们都保存在一个`field`EF 模型中以减少表中的字段数量？

这是否有点雄心勃勃，或者我是否对这个问题想得太多，并且有一种非常相似的方法可以实现这一目标？

在此先感谢您的帮助。

编辑：

最后，我创建了一个单独的表来实现这一点。快速简便的修复。尽管如此，这仍然是一个有趣的问题，并且仍然对实现它的方法感到好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:52:32.967

我会为此写我自己`UserControl`的。它应该相当简单。

基本上，您定义一个`Grid`or并添加您需要的`StackPanel`w/e 数量。`TextBox`然后，在后面的代码中定义一个依赖属性，例如`Result`，它将作为`Text`这些 texbox 的属性的串联。之后，您需要做的就是进行一些事件处理：`Result`每当任何一个`TextBox.Text`属性更改时更新并在`TextBox`用户填充它们时在 ' 之间交换键盘焦点。完成后，您可以简单地将视图模型属性绑定到`Result`porperty。

# backbone.js - 使用 # 标记使用backbone.js 进行导航

> ID：16166984
> 
> 赞同：0
> 
> 时间：2013-04-23T10:26:47.167
> 
> 标签：backbone.js, href, router, hashtag

我正在使用backbone.js 路由器在我的单页应用程序中进行导航。

代码摘录来解释我的问题：

```
routes: {
    'action/:id' : performAction
} 
```

为了访问它，我有我的锚元素，带有 href="#action/121"

我的主机网址是[http://mypage.com/test.html](http://mypage.com/test.html)。

问题是，当我单击此锚标记时，我的 url 更改为

[http://mypage.com/action/121](http://mypage.com/action/121)

而且路由器代码也打不通，不知道哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:47:59.000

看起来您正在激活历史推送，请务必禁用它运行此（而不是您拥有的）：

Backbone.history.start({pushState: false});

# kerberos - 如何在 win7 上通过 Java Gss-api 获取 Kerberos 凭据

> ID：16166986
> 
> 赞同：1
> 
> 时间：2013-04-23T10:26:50.620
> 
> 标签：kerberos, jgss

我想编写一个简单的程序，通过调用 gss-api 来实现客户端和服务器之间的安全通信。我尝试这样：

```
 mgr = GSSManager.getInstance();

        krb5Mechanism = new Oid("1.2.840.113554.1.2.2");
        krb5PrincipalNameType = new Oid("1.2.840.113554.1.2.2.1");

        serviceName = mgr.createName(serviceNameStr, krb5PrincipalNameType);
        cred = mgr.createCredential(serviceName, GSSCredential.INDEFINITE_LIFETIME, krb5Mechanism, GSSCredential.ACCEPT_ONLY); 
```

但是我在创建 GSSCredential 时遇到了 GSSException。

```
GSSException: No valid credentials provided (Mechanism level: Failed to find any Kerberos credentails)
at sun.security.jgss.krb5.Krb5AcceptCredential.getInstance(Unknown Source)
at sun.security.jgss.krb5.Krb5MechFactory.getCredentialElement(Unknown Source)
at sun.security.jgss.GSSManagerImpl.getCredentialElement(Unknown Source)
at sun.security.jgss.GSSCredentialImpl.add(Unknown Source)
at sun.security.jgss.GSSCredentialImpl.<init>(Unknown Source)
at sun.security.jgss.GSSManagerImpl.createCredential(Unknown Source)
at com.juan.gssapi.SimpleGSSAPIServer.loop(SimpleGSSAPIServer.java:55)
at com.juan.gssapi.SimpleGSSAPIServer.main(SimpleGSSAPIServer.java:36) 
```

有人知道原因吗？

# android - 隐藏所有图标 [android sdk]

> ID：16166990
> 
> 赞同：-2
> 
> 时间：2013-04-23T10:27:05.793
> 
> 标签：android, icons, hide, wallpaper

我正在为安卓制作动态壁纸。我想实现一个功能，允许用户隐藏android屏幕上的所有图标以炫耀动态壁纸（用户双击屏幕->隐藏所有图标）。我做了一切，但我仍然不知道如何隐藏所有图标。有谁知道怎么做？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:44:33.420

这是不可能的。您不能以这种方式攻击主屏幕或其他应用程序。一个主屏幕甚至可能没有*“*图标”，这取决于它的实现。

欢迎您编写自己的主屏幕，或者与一些替代主屏幕的开发人员合作，让主屏幕实现此*功能*。

或者，IIRC，有一种方法可以将动态壁纸显示为活动的背景，尽管我不确定细节。如果确实有可能，为了“炫耀动态壁纸”，你会提供一个活动来做到这一点，一个没有任何前景的活动。

# php - XML 提要...我哪里出错了？

> ID：16166991
> 
> 赞同：0
> 
> 时间：2013-04-23T10:27:11.227
> 
> 标签：php, simplexml

最近我在处理提要和 PHP 时遇到的问题很少，但这让我很难过……

XML看起来像这样......

```
<Order>
    <Booking id="272591086"/>
</Order> 
```

我的 PHP 如下所示，但没有显示来自上述 XML 的预订 ID，我哪里出错了？

```
<?php
$theurl = 'http://www.website.co.uk/dev/test.xml';
$xml = simplexml_load_file($theurl);
$result = $xml->xpath("/Order/Booking");
foreach ($result as $ref) 
{
   echo 'Booking Ref '. $ref['id'] .'';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:32:06.600

我支持@Gordon 的评论，但如果 XML 实际上是您正在显示的内容，请尝试在您的 XPATH 查询中进行这个小调整：

```
$result = $xml->xpath("//Booking"); 
```

### [工作示例](http://codepad.org/KBbWcJN1)

# javascript - 单击标记时如何使信息气泡居中？

> ID：16166995
> 
> 赞同：0
> 
> 时间：2013-04-23T10:27:21.783
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用来自 googlemaps api V3 的 infobubble。

我的标记上有一个事件，每次单击它时都会出现一个气泡。

我之前使用过 infobox 和 infowindow，当我点击标记时，它们总是将自己定位在地图的中心，如果我对它们的了解都是正确的，那么这是由 pixelOffset 属性完成的。

然而，Infobubble 并没有给我同样的效果，我明白了：

![在此处输入图像描述](https://i.stack.imgur.com/YPb4A.png)

我的代码：

```
 google.maps.event.addListener(marker, 'click', function() {

     $.ajax({
        url: '/templates/GoogleMapsMarkerInfo.aspx?id=' + page + '&epslanguage=<%=CurrentPage.LanguageBranch %>',
        dataType: "html",
        success: function(data){

                      var myOptions = {

                      content: data,
                      maxWidth: 300,
                      shadowStyle: 1,
                      padding: 0,
                      backgroundColor: '#fff',
                      borderRadius: 15,
                      arrowSize: 7,
                      borderWidth: 1,
                      borderColor: 'blue',
                      disableAutoPan: true,
                      hideCloseButton: false,
                      arrowPosition: 25,
                      backgroundClassName: 'phoney',
                      arrowStyle: 2

                };

                            if(infoBubble.getContent()!="")
            infoBubble.close()
            infoBubble.setOptions(myOptions)
            infoBubble.open(map, marker);

        }
     }); 
```

澄清一下：我不希望气泡在地图上居中以便显示整个信息，我不想被迫在地图上拖动以查看整个气泡。

如果需要更多信息，请询问，我会尽力提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T16:13:37.057

Only set `disableAutoPan` to `False`.