# StackOverflow 问答 14026000-14026999

# mysql - 如何将 MySQL 数据库从一个硬盘驱动器移动到另一个硬盘驱动器？

> ID：14026000
> 
> 赞同：6
> 
> 时间：2012-12-24T21:58:55.253
> 
> 标签：mysql, mysql-workbench

我在 Windows7 上使用 MySQL 5.5 和 MySQLWorkbench。我已经在我的 C: 驱动器上成功创建了一个数据库，但我想将它移动到我的 E: 驱动器。我停止了 mysqld 守护进程并编辑了 my.ini 文件以将 datadir="C:/ProgramData/MySQL/MySQL Server 5.5/Data/" 更改为 datadir="E:/MySQL/data/"。我将数据从 C: 位置复制到 E: 位置。我可以启动mysqld进程，但是我创建的数据库没有出现。有人会对我做错什么有任何解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T18:10:22.980

当我试图移动我的数据库时，我遇到了一个问题，即 Windows 对新数据文件夹的权限与原始文件夹不同。您可以通过转到文件夹的属性然后选择安全选项卡来检查正确的用户是否有权访问新文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:15:42.847

因为我希望我的 innodb 数据库位于另一个分区上，所以我从 MySQL Workbench 中停止了 MySQL。我将我的 innodb 数据库 ibdata1 以及 MySQL 在我的 C:\ProgramData\MySQL\ 文件夹中自动创建的 2 个日志文件复制到我的 E: 分区上的一个新文件夹中。我在 my.ini 中添加了以下内容：

```
innodb_data_home_dir = "E:/MySQL Data" 
```

现在，当我启动我的数据库时，对 E: 驱动器中的 ibdata1 进行了所有更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:27:15.153

基本上您想将旧目录中的所有内容复制到新目录中。确保在执行此操作时不要复制二进制日志（如果有，它们看起来像 mysql-bin.001 等，也不要复制 mysql-bin.index，因为它包含对旧二进制日志的真实路径引用） . 一旦你这样做了，你应该能够重新启动 mysql 守护进程并登录以查看数据库。

PS：未经测试，但应该可以工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T22:14:10.760

使用此工具将数据库转储到磁盘[http://sourceforge.net/projects/mysqlbutool/](http://sourceforge.net/projects/mysqlbutool/)然后使用此工具将其还原到新服务器[http://www.webyog.com/](http://www.webyog.com/)

# ios - 使用经度和纬度获取位置 iOS 6 的方向

> ID：14026011
> 
> 赞同：1
> 
> 时间：2012-12-24T22:00:27.363
> 
> 标签：ios, objective-c, ios6, mapkit

我希望在我的应用程序中使用来自 iOS 6 中 Apple 地图的方向。

我已经看到了一些如何做到这一点的例子，但我还没有看到如何使用一个点的经度和纬度坐标来做到这一点。

基本上，我的应用程序使用经度和纬度在地图视图上放置图钉，我想获取到这些位置的路线。

有没有人有这方面的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:20:27.117

您可以使用`MKMapItem`iOS 6 中的 an 来执行此操作：（请注意，addressDictionary 是一个字典，其中包含地址簿记录中的键和值 - 有关更多详细信息，请参阅 Apple 文档）

```
// Create MKMapPlacemark out of coordinates and addressDictionary
MKPlacemark *placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:addressDictionary];

// Create MKMapItem
MKMapItem *destination =  [[MKMapItem alloc] initWithPlacemark:placeMark];

// Using iOS6 native maps app
[destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}]; 
```

# c - 如何使用自定义汇编器进行铿锵声？

> ID：14026013
> 
> 赞同：32
> 
> 时间：2012-12-24T22:01:01.447
> 
> 标签：c, clang, cross-compiling

我已经编译了 clang 以将其用作 ARM 的交叉编译器（通过使用 配置它`./configure --target=armv7l-unknown-linux-gnueabihf`），但是当我尝试编译任何 C 代码时，它会尝试使用`/usr/bin/as`. 我已经为 ARM 编译了 binutils，它们位于单独的目录中。如何指示 clang（或 llvm）使用我指定的汇编程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T18:50:53.723

尝试传递 --host 选项进行配置，这将导致所有 cc ar 等实用程序以 armv7l-unknown-linux-gnueabihf- 为前缀，例如：

```
./configure --host=armv7l-unknown-linux-gnueabihf --build=i686-unknown-linux-gnu 
```

由于您正在使用带有希望 autotools 的配置，请查看： [automake Cross compile](http://www.gnu.org/software/automake/manual/html_node/Cross_002dCompilation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:18:30.700

我一直在使用 ./configure 从源目录进行配置时遇到问题，最后放弃了。这些天来，我总是从一个单独的目录进行配置，即 ..//configure 尽管有人告诉我建议使用绝对路径进行配置。

您的 ARM binutils 应该安装在您用于 clang 的相同前缀中，并确保它们在您配置和构建 clang 时位于路径中 - 即 PATH=/some/prefix/bin:$PATH; /configure --target=armv7l-unknown-linux-gnueabihf。如果您出于打包目的将它们保存在单独的目录中，那么 make install DESTDIR= 应该会有所帮助。

我通常不构建 clang，但我用于 devkitARM 的构建脚本可能会有所帮助 - [http://sourceforge.net/p/devkitpro/buildscripts/ci/c372699fc7b4de90eb044314ce5bed04db640291/tree/](http://sourceforge.net/p/devkitpro/buildscripts/ci/c372699fc7b4de90eb044314ce5bed04db640291/tree/)

# ruby-on-rails - 打开 jquery 移动弹出窗口的锚链接只是重定向

> ID：14026019
> 
> 赞同：0
> 
> 时间：2012-12-24T22:02:32.203
> 
> 标签：ruby-on-rails, jquery-mobile

我以前在移动网络应用程序上使用 javascript 对话框进行确认，但现在我试图切换到使用 JQM 1.2 中的新弹出窗口功能。我的初始测试不起作用 - 没有弹出窗口出现，我只是被重定向到我试图调用的锚点。

我的测试代码很简单，虽然有点混淆，因为我使用的是haml：

```
%a{:href => "#popupBasic", :"data-rel" => "popup"} Show popup
%div{:id => "popupBasic", :"data-role" => "popup"} Basic popup div 
```

也就是说，我不相信 haml 会导致基于读取最终 HTML 输出的问题。两个元素的深度相等并包含在元素内。

此外，当我在控制台上使用以下命令时，div 会毫无问题地“弹出”：

```
$( "#popupBasic" ).popup( "open" ) 
```

这让我相信问题出在链接或 URL 处理的某个地方。当我单击链接时，它会直接将我带到

```
http://localhost:3000/#popupBasic 
```

关于我应该如何以不同方式处理 URL 以使其按预期显示弹出窗口的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:23:32.277

在意识到问题可能是我的 Javascript 的某些部分后，我经历并尝试单独关闭每一位 javascript，直到我发现问题出在我的 application.js 文件中：

```
$(document).bind("mobileinit", function(){
  $.mobile.linkBindingEnabled = false;
}); 
```

这可以防止所有锚点击处理。显然，现在我已经删除了此代码，锚链接工作正常。当然，这意味着我现在要弄清楚为什么我首先添加了它，以及我刚刚通过删除它破坏了什么......

# android - 用于访问本地存储文件、PDF、HTML 和视频的 Android 应用程序

> ID：14026026
> 
> 赞同：0
> 
> 时间：2012-12-24T22:04:14.600
> 
> 标签：android, html, local, sd-card, loaddata

我们有一个使用 Android Galaxy 选项卡的移动员工，并使用 MobiControl MDM 产品不断地在设备之间同步详细的简报文件。与其让用户在一大堆不相关的简报中搜索以找到他们想要的简报，并提供更好的更具体的活动 UI，我想创建一个应用程序，允许用户从列表中点击客户端并然后显示相关文件的链接以及自定义内容，例如最近的新闻和活动摘要。我开始创建本地存储的 HTML 文件（保存在内部 sdcard 上），想法是创建一个应用程序以使用 webviewer 访问它们，但遇到了一些问题...... 1）访问存储的文件的最佳方法是什么使用 webviewer 在 sdcard 上？加载数据？细绳？2）虽然文件将存储在客户特定的文件夹中，文件名会不断变化，这些不断变化的文件名应该是链接的标题，以允许用户识别他们需要什么。仍然非常处于思考和研发的初步阶段，因此非常感谢关于实现我目标的最佳途径的建议。广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:39:49.603

> 1) 使用 webviewer 访问存储在 sdcard 上的文件的最佳方法是什么？加载数据？细绳？

`loadUrl()`应该管用。

顺便说一句，您的项目“2）”不是问题。

# xcode - 无法更改我的远程仓库

> ID：14026029
> 
> 赞同：0
> 
> 时间：2012-12-24T22:04:57.617
> 
> 标签：xcode, git, command-line, github, repository

我对 git 有点陌生，结果我让自己陷入了混乱。我有一个 Xcode 4.5 项目。在命令行中，我一直在管理其本地 git 存储库以及本地链接到的 github 上的远程存储库。一切都很好，直到我决定删除 GitHub 网站上的远程仓库（称为 PictureFly）并在 GitHub 网站上创建一个新的远程仓库（称为 PhotoFly）。我希望我的本地存储库与旧的远程存储库 (PictureFly) 取消链接并链接到新的远程存储库 (PhotoFly)。看起来很简单，但无论我输入什么命令，我都会收到一个或另一个致命警告。这是我一直在做的一个典型例子：

我尝试删除旧的远程来源：

```
//first attempt
git push origin :https://github.com/jac300/PictureFly.git
//first error
fatal: remote part of refspec is not a valid name in      
:https://github.com/jac300/PictureFly.git

//second attempt
git push origin :PictureFly.git
//second set of errors
fatal: 'git' does not appear to be a git repository
fatal: Could not read from remote repository.
Please make sure you have the correct access rights and the repository exists.

//third attempt    
git push origin --delete PictureFly
//third set of errors
fatal: 'git' does not appear to be a git repository
fatal: Could not read from remote repository.
Please make sure you have the correct access rights and the repository exists.

//fourth attempt
git push origin --delete https://github.com/jac300/PictureFly.git
//fourth set of errors
fatal: 'git' does not appear to be a git repository
fatal: Could not read from remote repository.
Please make sure you have the correct access rights and the repository exists. 
```

然后我想也许我可以添加新的远程仓库：

```
git remote add origin https://github.com/jac300/PhotoFly.git
fatal: remote origin already exists.  //how does it already exist? 
```

因此，由于它“已经存在”，我试图推送到该仓库：

```
git push -u origin master
fatal: 'git' does not appear to be a git repository
fatal: Could not read from remote repository. 
```

我不知道发生了什么或如何解决它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T22:07:32.013

您可以轻松地删除 GitHub 上的存储库并从网站创建一个新的空存储库。所以现在你被你的遥控器指向了错误的 url。修理：

```
git remote set-url origin https://new.url.here 
```

# c# - 64 位定点乘法错误

> ID：14026031
> 
> 赞同：6
> 
> 时间：2012-12-24T22:05:19.053
> 
> 标签：c#, math, binary, fixed-point

我正在 C# 中实现一个 64 位定点有符号 31.32 数字类型，基于`long`. 到目前为止，加法和减法都很好。然而，乘法有一个我试图解决的烦人的情况。

我当前的算法包括将每个操作数分成其最高和最低有效 32 位，执行 4 次乘法到 4 个长整数，并添加这些长整数的相关位。这是代码：

```
public static Fix64 operator *(Fix64 x, Fix64 y) {

    var xl = x.m_rawValue; // underlying long of x
    var yl = y.m_rawValue; // underlying long of y

    var xlow = xl & 0x00000000FFFFFFFF; // take the 32 lowest bits of x
    var xhigh = xl >> 32; // take the 32 highest bits of x
    var ylow = yl & 0x00000000FFFFFFFF; // take the 32 lowest bits of y
    var yhigh = yl >> 32; // take the 32 highest bits of y

    // perform multiplications
    var lowlow = xlow * ylow;
    var lowhigh = xlow * yhigh;
    var highlow = xhigh * ylow;
    var highhigh = xhigh * yhigh;

    // take the highest bits of lowlow and the lowest of highhigh
    var loResult = lowlow >> 32;
    var midResult1 = lowhigh;
    var midResult2 = highlow;
    var hiResult = highhigh << 32;

    // add everything together and build result
    var finalResult = loResult + midResult1 + midResult2 + hiResult;
    return new Fix64(finalResult); // this constructor just copies the parameter into m_rawValue
} 
```

这在一般情况下有效，但在许多情况下失败。即，结果偏离 1.0（十进制值），通常用于操作数的极小或极大值。以下是我的单元测试的一些结果（FromRaw() 是一种直接从 long 值构建 Fix64 的方法，无需移动它）：

```
Failed for FromRaw(-1) * FromRaw(-1): expected 0 but got -1
Failed for FromRaw(-4) * FromRaw(6791302811978701836): expected -1.4726290525868535041809082031 but got -2,4726290525868535041809082031
Failed for FromRaw(2265950765) * FromRaw(17179869183): expected 2.1103311001788824796676635742 but got 1,1103311001788824796676635742 
```

我试图在纸上弄清楚这个逻辑，但我有点卡住了。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:47:52.327

该算法看起来很合理，并且“在纸上”解决了它，而且看起来是正确的。这是我为`FromRaw(2265950765) * FromRaw(17179869183)`(0.52758277510292828083038330078125 * 3.99999999976716935634613037109375 = 2.11033110017888247966766357421875)制定的笔记

```
x1 = 2265950765
y1 = 17179869183

xlow = 2265950765
xhigh = 0
ylow = 4294967295
yhigh = 3

lowlow = 9732184427755230675
lowhigh = 6797852295
highlow = 0
highhigh = 0

loResult = 2265950764
midResult1 = 6797852295
midResult2 = 0
hiResult = 0

finalResult = 9063803059 
```

现在这就是我怀疑正在发生的事情：`lowlow` *需要*a`ulong`才能使结果正确，但我认为你得到的是一个有符号的值。解释为有符号，`lowlow`最终是 -8714559645954320941（太低 2^64），`loResult`最终是 -2029016532（太低 2^32），`finalResult`最终是`4768835763`（也太低 2^32），结果值为然后 1.11033110017888247966766357421875 正好比您预期的少 1。

一般来说，您的值应被视为具有带符号的“上半部”和无符号的“下半部”。`highhigh`已签名 * 已签名 = 已签名；`lowhigh`并且`highlow`有符号 * 无符号 = 有符号；但是`lowlow`是无符号 * 无符号 = 无符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:19:21.983

我不明白，为什么`FromRaw(-1) * FromRaw(-1)`要退货`0`？它应该返回`+1`

一般关于算法：不拆分，只乘`long`s。

假设你相乘`2.3*4.5`。你会得到`10.35`. 但如果你乘以`23*45`，你会得到`1035`。

数字是一样的！

所以，要乘以你的数字，你应该乘以`m_rawValue`s 然后右移位。

# c# - Azure Windows 8 身份验证

> ID：14026032
> 
> 赞同：1
> 
> 时间：2012-12-24T22:05:30.713
> 
> 标签：c#, windows, azure

如何在一个页面中使用 azure 身份验证，然后在应用程序的其他页面中访问数据库。如果一切都在同一个页面上，但 id 喜欢在菜单屏幕中进行身份验证，然后将项目传递到查看页面，则 Facebook 和 microsoft 登录工作正常。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:26:32.200

查看[如何使用 Windows Azure 访问控制服务对 Web 用户进行身份验证](http://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)- 为您提供完整的演练。这里还有一个完整的demo/wlk0through—— [Windows Azure Authenticaction](http://www.asp.net/vnext/overview/fall-2012-update/windows-azure-authentication)

# c++ - 如何使用 std::auto_ptr 作为函数的参数？

> ID：14026035
> 
> 赞同：3
> 
> 时间：2012-12-24T22:06:28.907
> 
> 标签：c++, auto-ptr

我需要使用 RAII 成语，我做得对吗？：

```
std::auto_ptr<std::vector<string>> MyFunction1()
{
   std::auto_ptr<std::vector<string>> arrayOfStrings;

   MyFunction2(arrayOfStrings); // work with arrayOfStrings

   return arrayOfStrings;
}

void MyFunction2(std::auto_ptr<std::vector<string>> array)
{
   auto_ptr<string> str;
   *str = "foo string";
   array.push_back(str)
} 
```

或者也许我应该自己释放内存而不是使用智能指针？如果是这样，该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T22:10:06.733

如果您有一个`std::auto_ptr`按值获取的函数，那么`std::auto_ptr`您传递给该函数的任何内容都将放弃对资源的控制并将其交给它调用的函数。结果，当函数返回时，原来的`std::auto_ptr`将不再指向它原来指向的资源。因此，您可以`std::auto_ptr`将按值接收视为说“我将把你的资源从你手中夺走并用它做点什么”。

要解决此问题，请考虑让您的函数采用`std::auto_ptr`引用，这不会窃取引用。

但话虽如此，您应该停止使用`std::auto_ptr`并开始使用`std::unique_ptr`。 `std::unique_ptr`是一个更安全、更理智的替代品`std::auto_ptr`。`std::unique_ptr`如果不明确地使用来放弃对资源的控制，就不能通过值传递`std::move`，并且没有任何“陷阱！”风格的惊喜。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T22:19:33.390

只是不要使用指针，在这种情况下甚至不要使用智能指针：

```
std::vector<string> MyFunction1()
{
   std::vector<string> arrayOfStrings;
   MyFunction2(arrayOfStrings); // work with arrayOfStrings
   return arrayOfStrings;
}

void MyFunction2(std::vector<string> &array)
{
   array.push_back("foo string");
} 
```

编译器肯定会优化返回值副本，应用称为[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)的优化，所以你不应该担心这个。在这种情况下，与使用分配在堆栈上的对象并依赖此优化相比，使用指针来避免复制可能最终会变得更加低效和乏味。

Otherwise, consider using `std::unique_ptr` as @templatetypedef mentions. Avoid pointers whenever you can.

# php - 着色表行取决于

> ID：14026036
> 
> 赞同：-4
> 
> 时间：2012-12-24T22:06:51.537
> 
> 标签：php, mysql, mysqli

我想用不同的颜色着色（css样式#）从这个查询中获取的每个表行：

`SELECT * FROM cars GROUP BY engine ORDER BY brand...`

`//echo (golf, ford, golf, audi, golf, fiat, audi...)`

例如，所有带有高尔夫品牌的行都漆成红色、绿色奥迪等。请帮助。天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:09:38.060

您可以添加`class='[brand]'`到每一行，`[brand]`例如品牌在哪里。`class='golf'`. 然后，您可以通过您的 css 文件对其进行样式设置。

```
.golf { color:red } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:48:47.737

如何让您的 php 脚本生成将颜色放入每个表格行的 css 脚本？然后，您还会在标记中相应地生成 css 类名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:12:58.250

有很多方法可以做到这一点。

假设您使用循环来输出行，您将通过`id`识别`make`汽车的来传递：

```
 foreach($row as $r){
     echo '<div id="'.$r['make'].'">...</div>';
 } 
```

然后相应地以您的`CSS`风格进行。

# compiler-construction - 忽略 yacc 中的匹配生产

> ID：14026037
> 
> 赞同：1
> 
> 时间：2012-12-24T22:07:29.887
> 
> 标签：compiler-construction, bison, yacc

在使用 GNU bison 时，是否可以在匹配产品后什么都不做，然后检查是否可以使用其他规则来减少相同的令牌序列？基本上，我正在寻找的是类似于这个：

```
iexpr: VARIABLE { if (condition) {
                    /*some action */
                  }
                  else {
                    /*pushback read symbol, and check if other pattern can
                         be matched */
                  }
                }
 fexpr: VARIABLE {   } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:13:28.813

您应该能够为此使用 YYBACKUP 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:13:34.803

好吧，你可以用[btyacc](http://www.siber.com/btyacc/)来做到这一点——一个做回溯的 yacc 变体：

```
iexpr: VARIABLE [ if (!condition)
                     /* this parse was wrong, backtrack and try something else */
                    YYERROR; ]
                { /* some action */ }
fexpr: VARIABLE { /* some other action */  } 
```

但正如评论者所指出的，尝试在解析器中进行类型检查是一个坏主意，只会导致不必要的复杂语法和糟糕的、令人困惑的类型错误错误消息。

相反，只需`expr`为所有类型的表达式设置单个（一组）规则，并在生成的解析树上单独进行类型检查。您甚至不需要构建整个解析树并为此保留它；您可以构建解析树的一小部分并立即对它们进行类型检查，然后在进一步解析之前丢弃不需要的信息。就像是：

```
expr: expr '+' expr {
    Typecheck('+', $1, $3); /* make sure operand types are appropriate for an add */
    $$ = BuildBinopCode('+', $1, $2); /* build some code to add two things */
} 
```

# asp.net-mvc-4 - MVC 4 如何添加一个 有条件的元素

> ID：14026039
> 
> 赞同：2
> 
> 时间：2012-12-24T22:07:31.677
> 
> 标签：asp.net-mvc-4

想要有条件地添加 HTML (div) 元素。但是我的 Create.cshtml 中的代码摘录不起作用，因为解析器混淆了 end-div（第一个关闭“}”不再是代码）

```
@if (setDiv)
{
    <div class="@item.DivClass" id="@item.DivId">
}
// More code more HTML
if (setDiv)
{
    </div>
} 
```

有人知道如何解决这个问题吗？提前致谢！杰拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:58:36.090

您必须将您的打开和关闭 div 封装在`@Html.Raw()`. 否则 razor 将不允许这种语法，因为它不知道您在一个 if 语句中打开的 div 实际上在另一个语句中关闭。

```
@if (setDiv)
{
    @Html.Raw("<div class='@item.DivClass' id='@item.DivId'>")
}
// More code more HTML
@if (setDiv)
{
    @Html.Raw("</div>")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:16:13.373

尝试这个：

```
@if (setDiv)
{
    <div class="@item.DivClass" id="@item.DivId">
}
// More code more HTML
@if (setDiv)
{
   @:</div>
} 
```

# api - 缓存 GET 调用的 RESTful API 结果的最佳方法

> ID：14026041
> 
> 赞同：24
> 
> 时间：2012-12-24T22:07:55.783
> 
> 标签：api, rest, caching, memcached, varnish

我正在考虑在前面创建缓存层或作为对我的 RESTful API（用 Ruby 编写）的 GET 请求的第一层的最佳方法。

并非每个请求都可以缓存，因为即使对于某些 GET 请求，API 也必须验证请求用户/应用程序。这意味着我需要配置哪个请求是可缓存的，以及每个缓存答案的有效期。在少数情况下，我需要非常短的到期时间，例如 15 秒及以下。即使尚未达到到期日期，我也应该能够让 API 应用程序的缓存条目到期。

我已经考虑了许多可能的解决方案，我最好的两个想法：

*   API 的第一层（甚至在路由之前），自己缓存逻辑（掌握所有配置选项），答案和到期日期存储到 Memcached

*   一个网络服务器代理（高度可配置），可能类似于 Squid，但我以前从未在这样的情况下使用过代理，我对此完全不确定

我还考虑过像 Varnish 这样的缓存解决方案，我将 Varnish 用于“普通”的 Web 应用程序，它令人印象深刻，但配置有点特别。但如果它是最快的解决方案，我会使用它。

另一个想法是缓存到 Solr 索引，我已经在数据层中使用它来不为大多数请求查询数据库。

如果有人有关于此主题的提示或好的资源可以阅读，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:16:43.463

memcached 是一个很好的选择，我看到你已经提到了这个作为一个可能的选择。此外，Redis 似乎在这个级别上作为另一种选择受到了很多赞扬。

在应用程序级别，就在逐个文件和/或模块的基础上缓存的更精细的方法而言，本地存储始终是用户可能一遍又一遍地请求的常见对象的一种选择，即使只是简单地丢弃响应对象进入会话，以便可以重用，而不是进行另一个 http 休息调用和适当编码。

现在人们来回争论 varnish 和 squid，两者似乎各有利弊，所以我无法评论哪个更好，但很多人说 Varnish 和经过调整的 apache 服务器非常适合动态网站。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T14:00:27.817

首先，将您的 RESTful API 构建为 RESTful。这意味着经过身份验证的用户还可以获得缓存内容，以将所有状态保留在 URL 中，它需要包含身份验证详细信息。当然这里的命中率会低一些，但是是可以缓存的。

对于大量登录用户来说，在完整页面缓存后面拥有某种模型缓存将非常有益，因为即使有些模型不共享（在良好的 OOP 结构中），许多模型仍然是共享的。

然后，对于完整的页面缓存，您最好将所有请求远离 Web 服务器，尤其是远离下一步中的动态处理（在您的情况下为 Ruby）。从普通 Web 服务器缓存完整页面的最快方法始终是在 Web 服务器前面使用缓存代理。

Varnish 在我看来就像它得到的一样好和容易，但有些人确实更喜欢 Squid。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T06:37:53.437

由于 REST 是一种 HTTP 事物，因此缓存请求的最佳方式可能是使用 HTTP 缓存。

考虑在您的响应中使用 ETag，检查请求中的 ETag 以使用“304 Not Modified”回复，如果 ETag 相同，则使用 Rack::Cache 提供缓存数据。这对于缓存控制“公共”内容非常有用。

Rack::Cache 最好配置为使用 memcache 来满足其存储需求。

上周我写了一篇关于 Rack::Cache 使用 ETags 检测缓存内容并将其返回给新客户端的有趣方式的博客文章：http: [//blog.craz8.com/articles/2012/12/19/rack-cache- and-etags-for-even-faster-rails](http://blog.craz8.com/articles/2012/12/19/rack-cache-and-etags-for-even-faster-rails)

即使您不使用 Rails，Rack 中间件工具也非常适合这些东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-06T06:55:36.233

Redis 缓存是最好的选择。 [检查这里。](http://redis.io/)

它是开源的。高级键值缓存和存储。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-11T22:52:12.200

我在 REST 视图中以这种方式成功使用了 redis：

```
from django.conf import settings
import hashlib
import json
from redis import StrictRedis
from django.utils.encoding import force_bytes

def get_redis():
    #get redis connection from RQ config in settings
    rc = settings.RQ_QUEUES['default']
    cache = StrictRedis(host=rc['HOST'], port=rc['PORT'], db=rc['DB'])
    return cache

class EventList(ListAPIView):
    queryset = Event.objects.all()
    serializer_class = EventSerializer
    renderer_classes = (JSONRenderer, )

    def get(self, request, format=None):
        if IsAdminUser not in self.permission_classes:  # dont cache requests from admins

            # make a key that represents the request results you want to cache
            #  your requirements may vary
            key = get_key_from_request()

            #  I find it useful to hash the key, when query parms are added
            #  I also preface event cache key with a string, so I can clear the cache
            #   when events are changed
            key = "todaysevents" + hashlib.md5(force_bytes(key)).hexdigest()        

            # I dont want any cache issues (such as not being able to connect to redis)
            #  to affect my end users, so I protect this section
            try:
                cache = get_redis()
                data = cache.get(key)
                if not data:
                    #  not cached, so perform standard REST functions for this view
                    queryset = self.filter_queryset(self.get_queryset())
                    serializer = self.get_serializer(queryset, many=True)
                    data = serializer.data

                    #  cache the data as a string
                    cache.set(key, json.dumps(data))

                    # manage the expiration of the cache 
                    expire = 60 * 60 * 2  
                    cache.expire(key, expire)
                else:
                    # this is the place where you save all the time
                    #  just return the cached data 
                    data = json.loads(data)

                return Response(data)
            except Exception as e:
                logger.exception("Error accessing event cache\n %s" % (e))

        # for Admins or exceptions, BAU
        return super(EventList, self).get(request, format) 
```

在我的事件模型更新中，我清除了所有事件缓存。这几乎不会执行（只有管理员创建事件，而不是经常），所以我总是清除所有事件缓存

```
class Event(models.Model):

...

    def clear_cache(self):
        try:
            cache = get_redis()
            eventkey = "todaysevents"
            for key in cache.scan_iter("%s*" % eventkey):
                cache.delete(key)
        except Exception as e:
            pass

    def save(self, *args, **kwargs):
        self.clear_cache()
        return super(Event, self).save(*args, **kwargs) 
```

# javascript - 努力为我的应用程序构建 JS/PHP 验证功能

> ID：14026042
> 
> 赞同：0
> 
> 时间：2012-12-24T22:08:11.603
> 
> 标签：javascript, windows-8, windows-applications

我有一个 Web 服务，它在查询 Web 服务并找到匹配项时返回一个 JSON 对象，成功返回的示例如下：

`{"terms":[{"term":{"termName":"Focus Puller","definition":"A focus puller or 1st assistant camera..."}}]}`

如果查询没有产生匹配，则返回：

`Errant query: SELECT termName, definition FROM terms WHERE termID = xxx`

现在，当我通过 Win 8 Metro 应用程序访问它时，我使用以下代码解析 JSON 表示法对象以获取 JS 对象：

`var searchTerm = JSON.parse(Result.responseText)`

然后，我拥有处理`searchTerm`返回值并将其绑定到应用程序页面控件的代码。如果我输入在数据库中找到匹配项的成功查询，一切都会很好。

我无法解决的是验证错误查询的方法。我想测试返回的值，`var searchTerm = JSON.parse(Result.responseText)`如果它是成功的结果，则继续做我现在正在做的事情，但在失败时以不同的方式处理结果。我应该做哪些检查来测试这个？我很高兴在我的应用程序或网络服务中实施额外的验证，任何建议都值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:39:08.097

有几种不同的方法可以解决这个问题。

一种方法是利用 HTTP 响应标头来传递有关查询的信息（即，已找到记录的 HTTP`200`状态、`404`未找到的记录、`400`错误请求等）。然后，您可以检查响应代码以确定您需要做什么。这种方法的优点是不需要对响应消息格式进行任何更改。缺点可能是您必须修改要返回的标头。这是用于真正 RESTful 服务的更典型的方法。

另一种方法可能是将成功/错误消息作为结构化 JSON 响应的一部分返回。这样您的 JSON 可能如下所示：

```
{
    "result":"found",
    "message":
        {
            "terms":[{"term":{"termName":"Focus Puller","definition":"A focus puller or 1st assistant camera..."}}]}
        }
} 
```

您显然可以更改`result`数据中的值以返回错误并将错误消息放入`message`.

这里的优点是您不必担心标题修改，并且您返回的数据将始终可以通过`JSON.parse()`. 缺点是现在您的响应消息更加冗长。

# jquery - 带进度条的asp.net视频上传

> ID：14026049
> 
> 赞同：3
> 
> 时间：2012-12-24T22:09:49.187
> 
> 标签：jquery, asp.net, xmlhttprequest

我正在尝试使用 XMLhttprequest() 和 html5 进度元素来实现带有进度条的视频上传，如下所示：

```
 <input type="file" name="fileUpload1" id="fu1" />
    <button type="button" id="clicker" value="Upload" name="Upload" >Upload</button>
    <progress id="prog1"></progress> 
```

和js：

```
 $("#clicker").live('click', function (e) {
        e.preventDefault();
        UploadVideo("fu1", "");
    });

    function UploadVideo(elm, url) {
         var xhr = new XMLHttpRequest();
         var fd = new FormData();
         fd.append("fu1", document.getElementById("fu1").files[0]);
         xhr.addEventListener("progress", ProcessVideo, false);
         xhr.open("POST", "Handler.ashx");
         xhr.send(fd);
    }

    function ProcessVideo(evt) {
        if (evt.lengthComputable) {
            var prog = document.getElementById("prog1");
            prog.max = evt.total;
            prog.value = evt.loaded;
        }
    } 
```

最后我使用这个通用的 ashx 处理程序来处理它：

```
 public void ProcessRequest (HttpContext context) {
         var file = context.Request.Files["fu1"];
         var savePath = HttpContext.Current.Server.MapPath("~/teees/" + file.FileName);
         file.SaveAs(savePath);
         context.Response.ContentType = "text/plain";
         context.Response.Write("Hello World");
    } 
```

**这工作正常，但进度条不会移动它卡在零，然后在上传完成后跳转到 100，有什么问题？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:11:04.970

也许这些线上的东西？

```
 this.xhr = new XMLHttpRequest();
  if ( this.xhr ){
    this.xhr.upload.addEventListener("progress", function(e){ updateProgress(e) }, false);

  function updateProgress(){
     if (e.lengthComputable) {
       var currentState = (e.loaded / e.total) * 100;
       //...
     }
   } 
```

# ruby-on-rails - 由于 ActiveRecord，Rails 应用程序无法在生产环境中启动

> ID：14026052
> 
> 赞同：3
> 
> 时间：2012-12-24T22:10:34.037
> 
> 标签：ruby-on-rails, ruby, activerecord, postgresql-9.1, pg

我曾多次尝试使用 nginx 和 unicorn 在 ec2 实例上设置我的 rails 应用程序。我发现 nginx 和 unicorn 都设置正确；但是，在两台机器上，我的 rails 应用程序都不想在生产环境中启动。尝试在生产中启动的输出是：

```
/Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:47:in `resolve_hash_connection': database configuration does not specify adapter (ActiveRecord::AdapterNotSpecified)
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:129:in `establish_connection'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `each'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
  from /Users/benvreed/Documents/rubydev/StudyPublic/config/environment.rb:5:in `<top (required)>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
  from /Users/benvreed/Documents/rubydev/StudyPublic/config.ru:4:in `block in <main>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
  from /Users/benvreed/Documents/rubydev/StudyPublic/config.ru:1:in `new'
  from /Users/benvreed/Documents/rubydev/StudyPublic/config.ru:1:in `<main>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
  from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
  from script/rails:6:in `require'
  from script/rails:6:in `<main>' 
```

虽然，我清楚地在我的`database.yml`文件中指定了 postgresql 适配器：

```
# PostgreSQL. Versions 8.2 and up are supported.
#
# Install the pg driver:
#   gem install pg
# On Mac OS X with macports:
#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config
# On Windows:
#   gem install pg
#       Choose the win32 build.
#       Install PostgreSQL and put its /bin directory on your path.
#
# Configure Using Gemfile
# gem 'pg'
#
development:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: study_development
  pool: 5

  # Connect on a TCP socket. Omitted by default since the client uses a
  # domain socket that doesn't need configuration. Windows does not have
  # domain sockets, so uncomment these lines.
  #host: localhost
  #port: 5432

  # Schema search path. The server defaults to $user,public
  #schema_search_path: myapp,sharedapp,public

  # Minimum log levels, in increasing order:
  #   debug5, debug4, debug3, debug2, debug1,
  #   log, notice, warning, error, fatal, and panic
  # The server defaults to notice.
  #min_messages: warning

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: study_test
  pool: 5

production:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: study_production
  pool: 5 
```

真正奇怪的是它在开发和测试环境中都成功运行。我检查了 StackOverflow 上的其他问题，大多数人都说这是一个间距问题；但是，我已经多次重做`database.yml`文件，结果相同。

我的 unicorn 和 nginx 文件是标准配置。

任何帮助将不胜感激。在运行之前，我一直处于静止状态。提前致谢。

**RAILS_ENV**

通过执行来使用 Rails 控制台时`RAILS_ENV=production rails c`，运行`RAILS_ENV`会产生：

```
NameError: uninitialized constant RAILS_ENV
    from (irb):1
    from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /Users/benvreed/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

Rails.env 产生：

```
=> "production" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:16:27.623

您 database.yml 中的适配器应该是 pg，而不是 postgresql。

```
production:
  adapter: pg
  encoding: unicode
  host: localhost
  database: study_development 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:29:58.283

我的设置使用这个：

```
production:
  adapter: pg
  encoding: utf8
  reconnect: false
  database: my_app_name_production 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T03:20:26.253

您的 database.yml 设置没问题。没什么奇怪的。

如果开发模式无异常运行，则问题不在数据库中。

尝试精确检查 database.yml：可能存在无效/不可接受的*字符。

* * *

*   有些符号是如此相似:) с 和 c

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-09T09:51:10.243

分叉错误！也许是一些缓存或日志问题它表明我们的代码中没有任何错误。

我的团队解决了它。

*   删除项目

*   git克隆项目

*   配置database.yml

*   启动服务器

一切正常！

同一个项目的错误消失了！所以我们认为这是环境问题或缓存或日志。

见这里：（[https://stackoverflow.com/posts/18695551/edit](https://stackoverflow.com/posts/18695551/edit)）

# java - Java 方法可以有超过 255 个局部变量吗？

> ID：14026053
> 
> 赞同：6
> 
> 时间：2012-12-24T22:10:36.080
> 
> 标签：java, jvm, bytecode, low-level, opcode

`iload`Java 操作码用于将值从局部变量数组 (LVA) 压入操作数堆栈。

此操作码将单个字节作为参数 ( [en.wikipedia.org/wiki/Java_bytecode_instruction_listings](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings) )，用作 LVA 的索引。

如果 LVA 的一个元素始终是对对象的引用（我想这不是静态方法的情况，但现在让我们忽略这些），并且如果恰好一个字节用作索引（256 个可能的值），那么一个方法如何能够访问超过 255 个不同的局部变量呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T22:14:37.547

是的，Java 方法可以有超过 255 个局部变量。操作码指令可`wide`用于修改`iload`or`aload`指令以使用 16 位索引而不是 8 位索引，这意味着您可以在函数中拥有多达 65536 个不同的局部变量，只要`wide`操作码最终被使用.

也就是说，请注意 Java 局部变量不一定与 JVM 局部变量一一对应。Java 编译器可能会查看您的代码，注意到局部变量的空间可以在某些上下文中重用，然后将多个 Java 局部变量映射到相同的 JVM 局部变量。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-24T22:19:25.627

我通过编写一个包含 300 个本地变量的程序为您尝试了它。这个片段：

```
System.out.println(a255);
System.out.println(a256); 
```

编译成这样：

```
3575: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
3578: iload         255
3580: invokevirtual #53                 // Method java/io/PrintStream.println:(I)V
3583: getstatic     #16                 // Field java/lang/System.out:Ljava/io/PrintStream;
3586: iload_w       #256                // Utf8 a196
3590: invokevirtual #53                 // Method java/io/PrintStream.println:(I)V 
```

注意：使用 Eclipse 和 javac 编译，结果完全相同。

# javascript - 网站挂在加载、服务器端或代码上？

> ID：14026054
> 
> 赞同：1
> 
> 时间：2012-12-24T22:11:02.257
> 
> 标签：javascript, performance, loading

[http://www.emmafaull.co.uk/dus/](http://www.emmafaull.co.uk/dus/)

我运行 pingdom，它经常显示主页的等待时间很长。当我尝试访问该页面时，在加载之前似乎确实有几秒钟的挂起，并且我想知道是什么导致了这种情况，因为没有太多的优化经验（或网页设计）。对我来说，这似乎是 js 把事情弄得乱七八糟，或者共享服务器没有那么快地响应。

无论如何，任何帮助都会受到赞赏，我已经尝试了正常的途径来尝试解决这个问题，但我的经验正在显示。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:20:36.993

Pingdom 告诉我加载时间的 60%，浏览器等待服务器响应。另外 30% 的时间用于建立连接。这些非常高的值（结合 90% 不接收/发送数据！）表明您确实应该对您的硬件做一些事情。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:44:14.063

优化有两个方面：服务器（后端）和浏览器（前端）。对于大多数网站来说，专注于前端是最划算的。看起来您正在使用一个共享主机，该主机的缓存持续时间很短，然后需要很长时间才能让第一个访问者再次访问。我第一次看它时，服务器预热大约需要 5 秒，然后每次点击都快得多。我通过名为 websitetest.com 的测试工具运行了您的网站。这与webpagetest.org 上的另一个工具非常相似，但websitetest 更容易使用。

看看[http://www.websitetest.com/ui/tests/50de0ef1bdf73034e4000036/samples/50de0f040fdd7f7964002d71](http://www.websitetest.com/ui/tests/50de0ef1bdf73034e4000036/samples/50de0f040fdd7f7964002d71)

现在向下滚动到瀑布图（这就是占据大部分页面的内容）。第一行基本上显示了您的服务器处理时间。服务器提供初始 HTML 大约需要 600 毫秒。其余时间主要花在前端。你有很多 css 文件，这些文件可能可以连接在一起。每个请求都需要时间，在更少的文件中提供 CSS 会有所帮助。接下来，我看到所有 javascript 都在任何内容之前加载。我会尝试将一些 javascript 移到最后，并在适当的地方连接文件。

可以使用 CSS Sprites 稍微调整几个 png 文件。查看[http://yslow.org/](http://yslow.org/)上显示的最佳实践，了解如何优化前端的详细信息。这当然需要一些时间来完成，但是有一些服务，比如我工作的公司的服务，可以自动化这个过程。

# java - 如何从整数字符串中获取char的子字符串

> ID：14026056
> 
> 赞同：0
> 
> 时间：2012-12-24T22:11:13.873
> 
> 标签：java, string, char, int, substring

我想返回两组任意长度的整数之间的字母字符子字符串。

例如，对于下面的字符串，我想返回子字符串“JKL”：

```
123JKL1234
456545645456JKL13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T22:28:03.070

好吧，您也可以将字符串中的所有数字替换为空字符：

```
String test = "456545645456JKL13";
String str = test.replaceAll("\\d+",""); // str == "JKL" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:24:27.640

最简单的方法是使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)：

```
 Pattern p = Pattern.compile("\\d+([a-zA-Z]+)\\d+");
    Matcher m = p.matcher("123test4567");
    m.find();
    System.out.println(m.group(1)); // prints "test" 
```

# java - 比较字符串并返回不同的字符串

> ID：14026060
> 
> 赞同：3
> 
> 时间：2012-12-24T22:12:24.037
> 
> 标签：java

我有一个问题，但目前没有解决方案。我拥有的是大约 300 个字符串，例如：

1.  “美国纽约”；
2.  “USWSHGNT”；

我要做的是比较这些字符串之一是否被请求字符串并返回如下内容：

1.  “美国，纽约”；
2.  “美国，华盛顿”；

那么有什么好的解决方案吗？而且我不能使用java 1.7。只有1.6。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T22:15:13.513

创建一个键到值的映射，然后只需查找第一个值作为键，它就会为您提供值。

或者，您可以创建一个枚举，其中枚举是键，枚举的 toString 是您的值。

对于这种情况，我更喜欢地图解决方案而不是枚举。

地图示例

```
public abstract class LocationHelper {
    public static Map<String, String> locations = new HashMap<String, String>();

    static {
        //either put individual elements into the map or
        //read in from external file etc.
    }
} 
```

在另一个类中，您可以通过执行以下操作来获取值。

```
System.out.println(LocationHelper.locations.get("USNWYRK")); 
```

这将打印“美国，纽约”

**注意**对于不熟悉该`static { }`块的任何人，这是一个静态初始化程序，它对于填充静态变量（如地图）很有用。这与一个实例初始化器不同，`{ }`它是每个实例的预构造器初始化器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T22:18:34.340

您可以创建一个包含`stringCode;stringValue`便于维护的 CSV 文件，然后在您的应用程序启动时从该文件构建一个哈希表/映射。

这看起来像：

```
USNEWYRK;USA, New York
USWSHGNT;USA, Washington 
```

一旦这些值被映射，应该很容易返回用户需要知道的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:14:55.783

任何类型的哈希表/映射都应该有效。将键设为第一个字符串，将值设为第二个字符串。

顺便说一句，您可以在 JSON 字符串中输入所有键和值，然后使用 JSON 阅读器将其转换为地图对象，而不是编写代码单独输入每一个。

# android - 带有片段的 NullPointerException

> ID：14026061
> 
> 赞同：1
> 
> 时间：2012-12-24T22:12:36.000
> 
> 标签：android, android-fragments, nullpointerexception, lifecycle

我的应用程序在 MainActivity 中包含带有两个片段的 ViewPager。第一个片段包含 ListView。我从来没有看到过这个，但我在 Google Play 中看到了用户关于 RuntimeException 的报告：

```
java.lang.RuntimeException: Unable to resume activity {com.my.project/com.my.project.MainActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { (has extras) }} to activity {com.my.project/com.my.project.MainActivity}: java.lang.NullPointerException
 at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
 at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2135)
 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
 at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:130)
 at android.app.ActivityThread.main(ActivityThread.java:3683)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:507)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
 at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { (has extras) }} to activity {com.my.project/com.my.project.MainActivity}: java.lang.NullPointerException
 at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
 at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2107)
 ... 12 more
Caused by: java.lang.NullPointerException
 at com.my.project.FirstFragment.load(FirstFragment.java:551)
 at com.my.project.MainActivity.onActivityResult(MainActivity.java:132)
 at android.app.Activity.dispatchActivityResult(Activity.java:3908)
 at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
 ... 13 more 
```

这是来自 FirstFragment.java 的代码：

```
public class FirstFragment extends Fragment {

    ArrayList<ListItemObject> listItems = null;
    ArrayAdapter<ListItemObject> mAdapter;

    void load() {
            mAdapter.clear(); // I get error here, that is FirstFragment.java:551
            ...
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        listItems = new ArrayList<ListItemObject>();
        mAdapter = new MyAdapter(getActivity(), listItems);
        listView.setAdapter(mAdapter);
    }

} 
```

这就是 mAdapter 的所有出现。而且我无法理解，它如何导致 NullPointerException。我认为有时 Fragment1 会破坏和重新创建，但没有 onCreateView()。**我与一位遇到此问题的用户交谈，他说我在设置中取消选中“开发人员选项”中的“不保留活动”后，此错误就会消失。**不知道，能修吗？或者我需要说我的所有用户“取消选中此选项”？

在我的 NainActivity 中：

```
public class MainActivity extends FragmentActivity {

    Vector<Fragment> fragments;
    ViewPager viewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        viewPager = (ViewPager) findViewById(R.id.pager);

        fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));

        viewPager.setOffscreenPageLimit(fragments.size());
        PagerAdapter pagerAdapter = new PagerAdapter(super.getSupportFragmentManager(), fragments);

        viewPager.setAdapter(pagerAdapter);

        viewPager.setCurrentItem(0);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(requestCode==1) {
            ((MainChat)fragments.get(0)).load();
        }
    }

    class PagerAdapter extends FragmentPagerAdapter implements IconPagerAdapter {

        private List<Fragment> fragments;

        public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public Fragment getItem(int position) {
            return this.fragments.get(position);
        }

        @Override
        public int getCount() {
            return this.fragments.size();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:44:29.590

正在发生的事情是包含片段的活动已被处理掉。这可能在活动未显示的任何时候发生 - 您的用户所做的是更改开发人员设置，该设置会积极破坏活动以允许您查看类似这样的编码问题。问题仍然可能发生，并且设备可用的资源越少（因为它的内存很小，或者因为很多其他的东西正在运行），Android 这样做的频率就越高。

在解释了潜在问题的背景之后，让我们继续讨论`onActivityResult()`代码中的特定问题。此方法在视图生命周期中的某个点被调用，在您的片段和活动周围的上下文被重构之前，因此您不能在此方法中对您的片段进行任何有意义的工作，并确保它始终有效。而是将响应保存在类级别变量中并使用它，`onResume()`无论活动是否被破坏，都将在其中调用它。

顺便说一句，您应该将该方法移动到片段中 - 并且始终在您自己的代码之前`onActivityResult()`调用。`super.onActivityResult()`

最后请注意，Android 会随心所欲地销毁和重新创建片段（例如，当您旋转设备时，所有片段都会被销毁并重新创建）。因此，您应该确保您了解并使用 Activity 和 Fragment 生命周期，而不是像 Alex 的解决方案所建议的那样反对它们。这只会导致其他难以诊断的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:46:15.767

我认为错误的原因是您的 MainActivity 被破坏，然后被 Android OS 重新创建。

这意味着将在您的 MainActivity.onCreate() 方法中再次创建片段列表，但 PagerAdapter 不会使用这些片段，而是使用 FragmentManager 为您恢复的片段实例（例如，不会调用 PagerAdapter.getItem() ）。并且由于未使用片段列表中的 FirstFragment 实例，它不会收到对 FirstFragment.onCreateView() 的调用，并且 mAdapter 实例仍将为空，那么您将调用 FirstFragment.load() 方法。

解决此问题的最简单（但不是很好）的方法是通过在 MainActivity.onCreate() 中将 null 作为 savedInstanceState 参数传递来抑制片段的恢复：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(null);
    ...
} 
```

另一种方法是按需在 PagerAdapter 中创建片段：

```
@Override
public Fragment getItem(int position) {
    switch (position) {
        case 0: return Fragment.instantiate(this, Fragment1.class.getName());
        case 1: return Fragment.instantiate(this, Fragment2.class.getName());
        default: throw new RuntimException();
    }
} 
```

并以这种方式存储片段实例：

```
@Override
public Object instantiateItem(View container, int position) {
    Fragment fr = (Fragment) super.instantiateItem(container, position);
    fragments[position] = fr;
    return fr;
} 
```

（注：第二种方式我没有测试过，所以可能行不通）

顺便说一句，您可以在 Android 4.0 设置中选中“不保留活动”开发人员选项来测试此类问题。

# multithreading - MonoTouch - AppDomain.CurrentDomain.UnhandledException 挂起

> ID：14026064
> 
> 赞同：2
> 
> 时间：2012-12-24T22:13:03.300
> 
> 标签：multithreading, exception-handling, xamarin.ios

我有一个在 Main.cs 中运行良好的全局异常处理程序，但在发现错误后，我的应用程序不存在，而只是挂起。我尝试了 Environment.Exit，退出选择器，返回，重新抛出异常 - 所有这些仍然导致挂起。有没有办法让应用程序终止？异常被抛出主线程之外。

```
AppDomain.CurrentDomain.UnhandledException += delegate(object sender, UnhandledExceptionEventArgs e)
        {
            var ex = (Exception)e.ExceptionObject;

            if (!DidReportError)
            {
                var error = ex.GetInnerErrorMessage ();
                Console.WriteLine ("Caught in Main.cs \n\n" + error);
                DidReportError = true;
            }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:09:32.670

您需要弄清楚应用程序挂起的原因，最简单的方法是在挂起 [1](http://rolfkvinge.blogspot.com.es/2012/04/native-crashes-in-monotouch.html)后创建崩溃报告：

*   按住开/关按钮，直到出现“滑动关机”。
*   松开开/关按钮。
*   按住主页按钮。
*   几秒钟后，应用程序将终止，并生成崩溃报告（应用程序的异常代码将为 0xdeadfa11）。

现在您将在 Xcode 的 Organizer 中找到崩溃报告（有关如何在[此处](http://rolfkvinge.blogspot.com.es/2012/04/native-crashes-in-monotouch.html)找到它的详细说明）。

[1](http://rolfkvinge.blogspot.com.es/2012/04/native-crashes-in-monotouch.html) [http://rolfkvinge.blogspot.com.es/2012/05/monotouch-debugging-tips.html](http://rolfkvinge.blogspot.com.es/2012/05/monotouch-debugging-tips.html)

# android - Android OpenGL ES 对象在睡眠/屏幕锁定时停止

> ID：14026079
> 
> 赞同：0
> 
> 时间：2012-12-24T22:16:27.300
> 
> 标签：android, opengl-es, jbox2d

我已经使用 OpenGL ES 建立了一个项目并成功导入了 jBox2D 库。我做了一个测试项目，其中包括两个掉下来的矩形。效果很好！但是，当屏幕进入睡眠状态或我锁定屏幕时，下落的物体会停在我锁定屏幕的位置，当我解锁屏幕时，它们甚至不会继续下落，只是冻结，另外两个矩形将在起始位置创建. 所以它似乎重置了整个应用程序，但前一个对象以某种方式冻结在那里。

这是代码：

```
package com.example.opengltest;

import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    GLSurfaceView surface;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        surface = new GLSurfaceView(this);
        surface.setRenderer(new SimpleRenderer());
        setContentView(surface);
    }

    protected void onPause() {
        super.onPause();
        surface.onPause();
    }

    protected void onResume() {
        super.onResume();
        surface.onResume();
    }
} 
```

渲染器：

```
package com.example.opengltest;

import java.util.HashSet;
import java.util.Set;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import org.jbox2d.collision.shapes.PolygonShape;
import org.jbox2d.collision.shapes.Shape;
import org.jbox2d.common.Vec2;
import org.jbox2d.dynamics.Body;
import org.jbox2d.dynamics.BodyDef;
import org.jbox2d.dynamics.BodyType;
import org.jbox2d.dynamics.FixtureDef;
import org.jbox2d.dynamics.World;

import android.opengl.GLSurfaceView.Renderer;

public class SimpleRenderer implements Renderer {

    private static World world;
    private static Set <Body> bodies = new HashSet<Body>();
    private Rect r;

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {

        world = new World(new Vec2(0.0f, -9.8f), false);
        r = new Rect();
        createObject(300, 500, 0.75f, 0.75f, BodyType.STATIC);
        createObject(360, 1200, 0.75f, 0.75f, BodyType.DYNAMIC);

        gl.glViewport(0, 0, 600, 1024); 
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0, 600, 0, 1024, 1, -1);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

    }

    private void createObject(int x, int y, float w, float h, BodyType bType) {
        BodyDef boxDef = new BodyDef();
        boxDef.position.set(new Vec2(x/30/2, y/30/2));
        boxDef.type = bType;
        PolygonShape shape = new PolygonShape();
        shape.setAsBox(w, h);
        Body box = world.createBody(boxDef);
        FixtureDef boxFixture = new FixtureDef();
        boxFixture.density = 1;
        boxFixture.shape = shape;
        box.createFixture(boxFixture);
        bodies.add(box);
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        Vec2 vec;
        for(Body body : bodies) {

            vec = body.getPosition();
             r.draw(gl, vec.x * 30, vec.y * 30, body.getAngle());
        }
        world.step(1/60f, 8, 3);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int w, int h) {

    }

} 
```

使用 Rect 类，我只绘制矩形，所以我认为问题出在这段代码中。所以问题是我如何设法以某种方式“保存”应用程序在屏幕锁定时的状态并防止冻结屏幕上的对象。所以基本上在屏幕被锁定的状态下继续应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:49:14.217

Android context loss may produce strange things if you don't know what's happening. When you return to your app after the pause, your onSurfaceCreated gets called again so you can rebuild your GL context stuff.

The behavior you are pointing out is pretty explainable. You add your bodies to the **static list , which does not get destroyed** during the pause (**only GL objects are destroyed**). But you do not re-add them to your world (which you do re-create, so it's empty). Do you see now why you get 4 objects and 2 are still? If you do, I'm sure now you could easily solve the problem yourself, but here's a snippet to get started and introduce you to the GL thread and management:

```
//e.g call this from MainActivity's onCreate. Note this will not be within the openGL
// thread, so you can't do opengl calls! (try it!)
  public void my_non_openGL_stuff_initialization(){
        world = new World(new Vec2(0.0f, -9.8f), false);
        r = new Rect();
        createObject(300, 500, 0.75f, 0.75f, BodyType.STATIC);
        createObject(360, 1200, 0.75f, 0.75f, BodyType.DYNAMIC);
}

 //Note this runs on the opengl thread. You should always recreate all your opengl related
 //things here. This gets called at the begining, and when coming back from a pause
  @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        gl.glViewport(0, 0, 600, 1024); 
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0, 600, 0, 1024, 1, -1);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:51:43.953

任何时候你的应用程序失去焦点，或者更确切地说是调用了 onpause，opengl 都会破坏你的资源，并且必须重新制作它们。（至少我上次使用 opengl 时就是这种情况），所以我认为您的引擎正在尝试处理这个问题，我们应该处理它而不是处理它。

# json - 杰克逊自动将 Joda DateTime 格式化为 ISO 8601 格式

> ID：14026081
> 
> 赞同：37
> 
> 时间：2012-12-24T22:16:41.667
> 
> 标签：json, spring, jackson, jodatime

根据[http://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling)，“DateTime 可以**自动**序列化/反序列化，类似于处理 java.util.Date 的方式。” 但是，我无法完成此**自动**功能。有与此主题相关的 StackOverflow 讨论，但大多数都涉及基于代码的解决方案，但根据上面的引用，我应该能够通过简单的配置来完成这一点。

根据[http://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling)我设置了我的配置，以便将日期写为时间戳是错误的。结果是 java.util.Date 类型被序列化为 ISO 8601 格式，但 org.joda.time.DateTime 类型被序列化为长对象表示。

我的环境是这样的：

Jackson 2.1
Joda time 2.1
Spring 3.2
Java 1.6

我的 jsonMapper bean 的 Spring 配置是

```
@Bean
public ObjectMapper jsonMapper() {
    ObjectMapper objectMapper = new ObjectMapper();

    //Fully qualified path shows I am using latest enum
    ObjectMapper.configure(com.fasterxml.jackson.databind.SerializationFeature.
        WRITE_DATES_AS_TIMESTAMPS , false);

    return objectMapper;
} 
```

我的测试代码片段是这样的

```
Date d = new Date();
DateTime dt = new DateTime(d); //Joda time 
Map<String, Object> link = new LinkedHashMap<String, Object>();
link.put("date", d);
link.put("createdDateTime", dt); 
```

JSON 输出的结果片段是这样的：

```
{"date":"2012-12-24T21:20:47.668+0000"}

{"createdDateTime": {"year":2012,"dayOfMonth":24,"dayOfWeek":1,"era":1,"dayOfYear":359,"centuryOfEra":20,"yearOfEra":2012,"yearOfCentury":12,"weekyear":2012,"monthOfYear":12 *... remainder snipped for brevity*}} 
```

我的期望是 DateTime 对象应该与基于配置的 Date 对象匹配。我做错了什么，或者我误解了什么？我是否从 Jackson 文档中**自动**阅读了太多关于这个词的内容，以及生成了一个字符串表示形式（尽管不是 ISO 8601）的事实正在生成广告中的自动功能？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-26T16:47:22.253

我能够从杰克逊用户邮件列表中得到答案，并想与你分享，因为这是一个新手问题。通过阅读 Jackson Date 常见问题解答，我没有意识到需要额外的依赖项和注册，但事实就是如此。它记录在此处的 git hub 项目页面[https://github.com/FasterXML/jackson-datatype-joda](https://github.com/FasterXML/jackson-datatype-joda)

本质上，我必须向特定于 Joda 数据类型的 Jackson jar 添加另一个依赖项，然后我必须在对象映射器上注册该模块的使用。代码片段如下。

对于我的 Jackson Joda 数据类型 Maven 依赖项设置，我使用了这个：

```
<dependency>
    <groupId>com.fasterxml.jackson.datatype</groupId>
    <artifactId>jackson-datatype-joda</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

要注册 Joda 序列化/反序列化功能，我使用了这个：

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.registerModule(new JodaModule());
objectMapper.configure(com.fasterxml.jackson.databind.SerializationFeature.
    WRITE_DATES_AS_TIMESTAMPS , false); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-03T19:41:05.777

使用 Spring Boot。

添加到您的 Maven 配置...

```
<dependency>
  <groupId>com.fasterxml.jackson.datatype</groupId>
  <artifactId>jackson-datatype-joda</artifactId>
  <version>2.7.5</version>
</dependency> 
```

然后到您的 WebConfiguration...

```
@Configuration
public class WebConfiguration extends WebMvcConfigurerAdapter
{
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters)
    {
      final MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
      final ObjectMapper objectMapper = new ObjectMapper();

      //configure Joda serialization
      objectMapper.registerModule(new JodaModule());
      objectMapper.configure(
          com.fasterxml.jackson.databind.SerializationFeature.
            WRITE_DATES_AS_TIMESTAMPS , false);

      // Other options such as how to deal with nulls or identing...
      objectMapper.setSerializationInclusion (
         JsonInclude.Include.NON_NULL);
      objectMapper.enable(SerializationFeature.INDENT_OUTPUT);

      converter.setObjectMapper(objectMapper);
      converters.add(converter);
      super.configureMessageConverters(converters);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-30T08:37:23.230

在 Spring Boot 中，配置更加简单。您只需声明 Maven 依赖项

```
 <dependency>
        <groupId>com.fasterxml.jackson.datatype</groupId>
        <artifactId>jackson-datatype-joda</artifactId>
    </dependency> 
```

然后将配置参数添加到您的 application.yml/properties 文件中：

```
spring.jackson.serialization.write-dates-as-timestamps: false 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-06T17:13:35.483

我想我会发布一个更新的工作示例：Spring 4.2.0.RELEASE、Jackson 2.6.1、Joda 2.8.2

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util.xsd
        ">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven>
        <message-converters>
            <beans:bean
                class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
                <beans:property name="objectMapper" ref="objectMapper" />
            </beans:bean>
        </message-converters>
    </annotation-driven>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <beans:bean id="objectMapper"
        class="org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean">
        <beans:property name="featuresToDisable">
            <beans:array>
                <util:constant
                    static-field="com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS" />
            </beans:array>
        </beans:property>
        <beans:property name="modulesToInstall"
            value="com.fasterxml.jackson.datatype.joda.JodaModule" />
    </beans:bean>

    <beans:bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <beans:property name="defaultLocale" value="en" />
    </beans:bean>

    <!-- Configure the Message Locale Resources -->
    <beans:bean id="messageSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <beans:property name="basename" value="errors" />
    </beans:bean>

    <beans:bean id="versionSource"
        class="org.springframework.context.support.ResourceBundleMessageSource">
        <beans:property name="basename" value="version" />
    </beans:bean>

    <!-- DataSource -->
    <beans:bean id="dataSource"
        class="org.springframework.jndi.JndiObjectFactoryBean">
        <beans:property name="jndiName" value="java:comp/env/jdbc/TestDB" />
    </beans:bean>

    <!-- POJO: Configure the DAO Implementation -->
    <beans:bean id="publicationsDAO"
        class="com.test.api.publication.PublicationsDAOJdbcImpl">
        <beans:property name="dataSource" ref="dataSource" />
    </beans:bean>

    <!-- Things to auto-load -->
    <context:component-scan base-package="com.test.api" />
    <context:component-scan base-package="com.test.rest" />

</beans:beans> 
```

API 代码

```
package com.test.api.publication;

import java.util.Map;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.annotation.JsonRootName;

@JsonRootName("event")
@JsonIgnoreProperties(ignoreUnknown=true)
public class Publication {

    private Map<String, Object> tokens;
    private String href;
    private String policy_path;

    @JsonProperty("tokens")
    public Map<String, Object> getTokens() {
        return tokens;
    }

    @JsonProperty("tokens")
    public void setTokens(Map<String, Object> tokens) {
        this.tokens = tokens;
    }

    @JsonProperty("href")
    public String getHref() {
        return href;
    }

    @JsonProperty("href")
    public void setHref(String href) {
        this.href = href;
    }

    @JsonProperty("policyPath")
    public String getPolicyPath() {
        return policy_path;
    }

    @JsonProperty("policyPath")
    public void setPolicyPath(String policy_path) {
        this.policy_path = policy_path;
    }

}

package com.test.api.publication;

import javax.sql.DataSource;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class PublicationsDAOJdbcImpl implements PublicationsDAO{

    static final Logger logger = LoggerFactory.getLogger(PublicationsDAOJdbcImpl.class.getName());
    private DataSource _dataSource;

    @Override
    public void setDataSource(DataSource ds) {
        // TODO Auto-generated method stub

    }

    @Override
    public void close() {
        // TODO Auto-generated method stub

    }

    @Override
    public Publication getPublication(String policyPath) {
        Publication ret = new Publication();
        //TODO: do something
        return ret;
    }

}

package com.test.rest.publication;

import java.util.HashMap;

import org.joda.time.DateTime;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

import com.test.api.publication.Publication;
import com.test.api.publication.PublicationsDAO;
import com.test.rest.error.UnknownResourceException;

@RestController
@RequestMapping("/pub")
public class PublicationController {

        private static final Logger logger = LoggerFactory.getLogger(PublicationController.class);

        @Autowired
        @Qualifier("publicationsDAO")
        private PublicationsDAO publicationsDAO;

        /**********************************************************************************************************************
         * 
         * @param policyPath
         * @return
         * @throws UnknownResourceException
         */
        @RequestMapping(value = "/{policyPath}", method = RequestMethod.GET)
        public Publication getByPolicyPath(@PathVariable String policyPath) throws UnknownResourceException{
            logger.debug("policyPath=" + policyPath);

            Publication ret = publicationsDAO.getPublication(policyPath);

            HashMap<String, Object> map = new HashMap<String, Object>();
            map.put("TEST1", null);
            map.put("TEST2", new Integer(101));
            map.put("TEST3", "QuinnZilla");
            map.put("TEST4", new DateTime());
            ret.setTokens(map);
            return ret;

        }

} 
```

我得到了输出结果

```
{
  "tokens": {
    "TEST2": 101,
    "TEST3": "QuinnZilla",
    "TEST4": "2015-10-06T16:59:35.120Z",
    "TEST1": null
  },
  "href": null,
  "policyPath": null
} 
```

# objective-c - Objective-C 块

> ID：14026083
> 
> 赞同：1
> 
> 时间：2012-12-24T22:16:44.460
> 
> 标签：objective-c, block

试图了解blocks在objective-c中是如何工作的。阅读苹果文档时遇到下一个问题（[链接](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxUsing.html)）

这是一个我们不应该使用块的例子：

```
void dontDoThis() {
    void (^blockArray[3])(void);  // an array of 3 block references

    for (int i = 0; i < 3; ++i) {
        blockArray[i] = ^{ printf("hello, %d\n", i); };
        // WRONG: The block literal scope is the "for" loop.
    }
} 
```

但是我们怎样才能得到 3 个不同的块来打印“hello, 0”、“hello, 1”和“hello, 2”呢？我尝试了许多不同的方法，但每次我得到“你好，2”三遍。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T22:37:15.830

块在堆栈上开始生命，因此，块的生命周期仅与声明它的范围一样长。

for() 循环的主体——{} 中的循环主体——本身就是一个范围。因此，您的代码将对堆栈 [块] 上的某些内容的引用放入周围范围 [语言数组] 中的变量中。

您需要将块复制到堆以使其生存：

```
void dontDoThis() {
    void (^blockArray[3])(void);  // an array of 3 block references

    for (int i = 0; i < 3; ++i) {
        blockArray[i] = [^{ printf("hello, %d\n", i); } copy];
    }
} 
```

如果不使用 ARC，您还需要`-release`在某些时候复制块。

您可能会发现这篇[博客文章很方便](http://www.friday.com/bbum/2009/08/29/basic-blocks/)（我是在 Blocks 公开后不久写的）。这篇文章介绍了[一些技巧、窍门和陷阱](http://www.friday.com/bbum/2009/08/29/blocks-tips-tricks/)。

* * *

等等——是的——你是对的。ARC 编译器中发生了一些神奇的事情，导致块似乎神奇地在堆上。但是，我在 LLVM 文档中找不到任何明确记录此行为的内容。如果关闭 ARC，您会看到输出类似于 2,2,2 而不是 0,1,2。

这是一些新的行为。我不会依赖这种行为，直到有人可以在编译器中找到明确定义如何支持它的明确注释。

* * *

```
@autoreleasepool {
    void (^blockArray[3])(void);  // an array of 3 block references

    for (int i = 0; i < 3; ++i) {
        void (^block)(void) = ^{ printf("hello, %d\n", i); };
        NSLog(@"%p", block);
        blockArray[i] = block;
        NSLog(@"%p", blockArray[i]);
    }

    for (int i = 0; i < 3; ++i) blockArray[i]();
} 
```

输出：

```
2012-12-24 16:15:36.752 jkdfjkfdjkdfjk[70708:303] 0x7fff5fbff838
2012-12-24 16:15:36.755 jkdfjkfdjkdfjk[70708:303] 0x100108160
2012-12-24 16:15:36.758 jkdfjkfdjkdfjk[70708:303] 0x7fff5fbff838
2012-12-24 16:15:36.759 jkdfjkfdjkdfjk[70708:303] 0x100108000
2012-12-24 16:15:36.760 jkdfjkfdjkdfjk[70708:303] 0x7fff5fbff838
2012-12-24 16:15:36.760 jkdfjkfdjkdfjk[70708:303] 0x100102e70
hello, 0
hello, 1
hello, 2 
```

因此，块是在堆栈上创建的，并在 for() 循环范围之外的赋值时自动复制到堆中。

一个类似的测试还表明，当作为参数传递给 NSArray 的 addObject: 时，该块将被复制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T22:28:23.053

~~如果你真的想让它工作，你可以使用 an`NSMutableArray`而不是 C 数组。~~ ~~NSMutableArray *blocks = [NSMutableArray 数组];~~

 ~~```
for (int i = 0; i <= 3; i++) {
  blocks[i] = ^{ printf("hello %d\n", i); };
} 
```~~ 

~~~~通过将它们添加到 an 中，`NSMutableArray`它们将从堆栈中复制到堆中，从而使它们能够超过`for`循环的范围。~~~~

 ~~正如@bbum 指出的那样，上述方法不起作用，我认为`just work`用 ARC 阻塞的想法太过分了。

您需要主动复制块才能使它们工作......所以以下应该工作

```
NSMutableArray *blocks = [NSMutableArray array];

for (int i = 0; i <= 3; i++) {
  blocks[i] = [^{ printf("hello %d\n", i); } copy];
} 
```~~

# asp.net - 有谁知道我在哪里可以找到 C# 或 VB.NET 中 Paypal 透明重定向的完整代码示例？

> ID：14026084
> 
> 赞同：2
> 
> 时间：2012-12-24T22:17:27.223
> 
> 标签：asp.net, api, paypal

我只找到了一个透明重定向的例子，它是在 PHP 中。它也没有加载以前授权客户的计费/抄送信息。

我的目的是将客户的信息加载到表格中，让他们修改并保存。

我还需要为他们创建或更新定期付款。

不幸的是，透明重定向示例很难找到，更糟糕的是 .NET 也很难找到。

# objective-c - 包含框架以获取日期信息 Objective-C

> ID：14026094
> 
> 赞同：1
> 
> 时间：2012-12-24T22:19:25.900
> 
> 标签：objective-c, frameworks, nsdate

我是 Objective-C 的新手，我正在尝试插入 NSdate，但我不知道要包含哪个库才能调用它。我尝试了以下但没有成功。谢谢你的帮助

![](../Images/f6042d4a961080d8a4b80fd405a765b6.png)

```
#import <Cocoa/Cocoa.h>
#import <Foundation/Foundation.h>
#include <CoreFoundation/CoreFoundation.h>

// Get current datetime
NSDate *currentDateTime = [NSDate date];
// Instantiate a NSDateFormatter
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
// Set the dateFormatter format
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
// Get the date time in NSString
NSString *dateInString = [dateFormatter stringFromDate:currentDateTime];
// Release the dateFormatter
[dateFormatter release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:21:39.553

您已经包含了所有必要的标头并添加了所有必要的框架（NS* 类只需要 Foundation）。问题是您的陈述没有范围。例如，将它们包装在`main()`函数中。

# jquery - 在页面加载时将部分 window.location 保存在 jquery 变量中

> ID：14026108
> 
> 赞同：0
> 
> 时间：2012-12-24T22:21:56.493
> 
> 标签：jquery, window.location

如果我有以下之一：

```
example.com/test1
example.com/test1/
example.com/photo/test1
example.com/photo/category/test1/ 
```

（你明白了）

如何在 jquery 中将 test1 作为加载变量结束？

`window.location.pathname`给我整个 /photo/category/test1/ 不仅是 test1

非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:28:33.727

如果您想找到路径名的最后一部分，我想类似以下内容会起作用：

```
var path = window.location.pathname.split('/');
path = path.filter(function(x){return x!='';});
var last_path = path[path.length - 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:28:52.593

```
var parts = "example.com/photo/category/test1/".split('/')
var url = parts[parts.length - 1] ? parts[parts.length - 1] : parts[parts.length - 2]; 
```

（`?:`照顾最后一个`/`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:30:28.080

这是一个将提取最后一个路径元素的函数：

```
function getLastSegmentOfPath(url) {
    var matches = url.match(/\/([^\/]+)\/?$/);
    if (matches) {
        return matches[1];
    }
    return null;
}

var endPath = getLastSegmentOfPath(window.location.href); 
```

工作测试用例和演示：http: [//jsfiddle.net/jfriend00/9GXSZ/](http://jsfiddle.net/jfriend00/9GXSZ/)

正则表达式的工作方式如下：

```
\/  match a forward slash
()  separately capture what is in the parens so we can extract just that part of the match
[^\/]+ match one or more chars that is not a slash
\/?$  match an optional forward slash followed the the end of the string 
```

在正则表达式结果（这是一个数组）中：

```
matches[0] is everything that matches the regex
matches[1] is what is in the first parenthesized group (what we're after here) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T22:31:42.187

您可以使用 javascripts[`lastIndexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)和[`substr`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)函数：

```
var url = window.location.pathname;
var index = url.lastIndexOf("/");
var lastbit = url.substr(index); 
```

这个 get 是 URL，找到 last 的位置`/`，并返回这个位置之后的所有东西。

**编辑**（见评论）：排除尾随斜杠（例如：*category/test/*），第一个斜杠使用：

```
var url = window.location.pathname;
var index = url.lastIndexOf("/");
var lastbit = url.substr(index);
if (lastbit == "/"){
     url = url.slice(0, - 1); 
     index = url.lastIndexOf("/");
     lastbit = url.substr(index);
}
lastbit = lastbit.substring(1); 
```

# javascript - 无法从 youtube 播放列表中删除视频

> ID：14026109
> 
> 赞同：3
> 
> 时间：2012-12-24T22:22:03.827
> 
> 标签：javascript, ajax, xmlhttprequest, youtube-api

我正在尝试从 Youtube 播放列表中删除视频，但服务器不断响应：

```
<errors xmlns='http://schemas.google.com/g/2005'>
    <error>
        <domain>GData</domain>
        <code>ServiceForbiddenException</code>
        <internalReason>User authentication required.</internalReason>
    </error>
</errors> 
```

奇怪的是我可以删除播放列表并将视频添加到播放列表中。我正在关注在此处找到的 Google 文档：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Deleting_a_video_from_a_playlist](https://developers.google.com/youtube/2.0/developers_guide_protocol_playlists#Deleting_a_video_from_a_playlist)

我正在使用如下形状的请求：

网址

删除`https://gdata.youtube.com/feeds/api/playlists/PLAYLIST_ID/VIDEO_ID`

删除`https://gdata.youtube.com/feeds/api/playlists/PLZsHJpFf2dLtEhsYEISc2FR2JWYeIC8KZ/IcxQznDe4u8`

标头：（我对所有请求使用完全相同的标头）

```
Authorization:  Bearer ************************
Content-Type:   application/atom+xml
Host:           gdata.youtube.com
X-GData-Key:    key=***************************
gdata-version:  2 
```

另一个奇怪的事情是，当我在地址中输入请求 url 时，它显示“未找到播放列表视频”，我提供了 Youtube 视频 ID。Mebbe 这不是我需要提供的那个 id。我尝试使用播放列表索引，即只是一个数字。没运气。住手！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T19:15:32.070

请允许我回答我自己的问题。

在链接的文档中，他们声明您需要一个*PLAYLIST_ENTRY_ID*，它与Youtube 上的地址中写入的*ID不同。*此*ID*来自您通过他们的提要请求请求的条目。每个条目（每个视频）都有一个名为*id*的属性（它在 feed -> entry -> id[text] 中），其中包含如下内容：

`tag:youtube.com,2008:playlist:PLZsHJpFf2dLs_n7e69v5SUNQRuZTMnLcM:PLhRVbNPJX-c0PUOsjeulCsgAx-ydeUUdJhpxbacX0VFk`

在这种情况下可以理解为

`bla:bla:bla:PLAYLIST_ID:PLAYLIST_ENTRY_ID`

所以我正在照顾的 id 是最后一个冒号之后的字符串的其余部分。在 Javascript 中，我像这样获取它：（我使用的是 xml 到 json 解析器，但它是*.split(":").pop()*会给你所需的*id*）

```
var deleteId=json.feed.entry[i]["id"]["#text"].split(":").pop(); 
```

在这种情况下，生成的 id 将是：*PLhRVbNPJX-c0PUOsjeulCsgAx-ydeUUdJhpxbacX0VFk*。

所以 ytId IcxQznDe4u8 的视频的最终请求 url 不是

`https://gdata.youtube.com/feeds/api/playlists/PLZsHJpFf2dLtEhsYEISc2FR2JWYeIC8KZ/IcxQznDe4u8`

但反而

`https://gdata.youtube.com/feeds/api/playlists/PLZsHJpFf2dLtEhsYEISc2FR2JWYeIC8KZ/PLhRVbNPJX-c0PUOsjeulCsgAx-ydeUUdJhpxbacX0VFk`

*飞走了*

# ruby - 如何将数组元素放入 HTML 表格中？

> ID：14026110
> 
> 赞同：2
> 
> 时间：2012-12-24T22:22:18.930
> 
> 标签：ruby

```
array = ["abc","mohasdan","321","324324"]
recipients = ["xxx@example.com"]
recipients_formatted = []
recipients.each {|s| recipients_formatted << "To: #{s}"}
message = <<MESSAGE_END
From: xxx@example.com <xxx@example.com>
#{recipients_formatted}

MIME-Version: 1.0
Content-type: text/html
Subject: Chef Report
<html>
<head>
<style type="text/css">
table {border-collapse:collapse;}
table, td, th {border:1px solid black;padding:5px;}
</style>
</head>
<body>
<h2>Chef Check-in Report</h2>
<p>
<p>
<table border=1>
<tr>
<th>Node</th>
<th>Time Since Last Check-in (Mins)</th>
</tr>
</table>
</body>
</html>
MESSAGE_END

Net::SMTP.start('localhost') do |smtp|
smtp.send_message message, 'xxx@example.com',
                           recipients
end 
```

上面的代码发送了一封包含如下表格的电子邮件：

```
Chef  (column1)      |  Check-in Report(column2)   (row 1) 
```

我将数组内容放入要通过电子邮件发送的表格中。我想要第一行第一列中的第一个数组元素，第一行第二列中的第二个数组元素。第二行第一列的第三个数组元素，第二行第二列的第四个数组元素，依此类推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:26:42.617

请尝试这样的事情：

```
custom_rows = ""
array.each_slice(2) do |row| 
  custom_rows << "<tr><td>#{row[0]}</td><td>#{row[1]}</td></tr>"
end 
```

比在你的`message`put里面`#{custom_rows}`：

```
message = <<MESSAGE_END
From: xxx@example.com <xxx@example.com>
#{recipients_formatted}

MIME-Version: 1.0
Content-type: text/html
Subject: Chef Report
<html>
<head>
<style type="text/css">
table {border-collapse:collapse;}
table, td, th {border:1px solid black;padding:5px;}
</style>
</head>
<body>
<h2>Chef Check-in Report</h2>
<p>
<p>
<table border=1>
<tr>
<th>Node</th>
<th>Time Since Last Check-in (Mins)</th>
</tr>
#{custom_rows}
</table>
</body>
</html> 
```

# spring - Spring 3.2 发布的新 Spring MVC 测试框架是否测试 web.xml 配置？

> ID：14026111
> 
> 赞同：8
> 
> 时间：2012-12-24T22:22:43.203
> 
> 标签：spring, spring-mvc, integration-testing, web.xml, spring-test-mvc

我已经阅读了几次文档（ [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework) ），我可以'不确认`WebApplicationContext`当您使用`@WebApplicationContext`注释时注入的上下文是否实际上正在查看 web.xml。

换句话说，我想测试我的 web.xml 配置。过滤器和 servlet 路径。但是当我配置我的测试时，它会忽略 web.xml。（例如，我尝试`get`在这样的 URL 上发出请求`/myServletPath/foo`，但它以 404 失败。）

我的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration({
        "classpath*:WEB-INF/config/application-context.xml",
        "classpath*:WEB-INF/oms-servlet.xml",
        "classpath*:persistence-context.xml"
})
public class OrderSummaryControllerIntegrationTests {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Before
    public void setUp() throws Exception {
        this.mockMvc = webAppContextSetup(this.wac).build();
    }

    @Test
    public void testFindOrderSummariesExpectsSuccess() throws Exception {
        mockMvc.perform(get("/oms/orders?user=1234&catalog=bcs"))
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(content().contentType(MediaType.APPLICATION_JSON));
    }
} 
```

还有我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">
    <display-name>OMS REST Services</display-name>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.css</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>webappMetricsFilter</filter-name>
        <filter-class>com.yammer.metrics.web.DefaultWebappMetricsFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>webappMetricsFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/application-context.xml, classpath*:persistence-context.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>oms</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>oms</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T00:14:35.290

你是对的，Spring-mvc-test 不会读取 web.xml 文件，但是你可以这样配置过滤器：

```
webAppContextSetup(this.wac).addFilter(new DefaultWebappMetricsFilter(), "/*").build() 
```

# django - Django 模板——无变量

> ID：14026114
> 
> 赞同：0
> 
> 时间：2012-12-24T22:23:12.443
> 
> 标签：django, templates, django-templates

如果这是一个愚蠢的问题，我很抱歉。我试图找到一个解决方案几个小时，我是新手，不是很聪明。

我的网页没有显示全文。它只显示很少的文字。

视图.py：

```
Create your views here.
from django.template import loader
from django.http import HttpResponse

def testing(request):
    html = loader.get_template('testing.html')
    return HttpResponse(html) 
```

测试.html

```
<html>

<body>

THIS IS A TEST PAGE. 

</body>

</html> 
```

在我的本地服务器页面上，我看到的只是：这是'>

我看不到其余的。你能告诉我有什么问题吗？太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:17:45.827

您需要渲染模板。将最后一行更改为：

```
return HttpResponse(html.render(Context())) 
```

您还需要从 django.template 导入 Context。您可能还想考虑使用 render_to_response 快捷方式。本[教程的第 3 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#s-write-views-that-actually-do-something)介绍了这些内容。

# android - Facebook Keyhash 问题

> ID：14026117
> 
> 赞同：1
> 
> 时间：2012-12-24T22:24:13.380
> 
> 标签：android, facebook, eclipse

我最近安装了 facebook 3.0 sdk，所有应用程序都运行并且所有类链接，但它们不会从 facebook 拉回任何信息。我已经在 cmd promt 上运行了 keytool 命令，并使用密码检索了我的 keyhash：*android*。然后将其放入我的 facebook 开发人员设置中。

我尝试在多种情况下检索我的 keyhash，它返回相同的代码，所以我知道它是正确的。这是在eclipse上LogCat访问登录时出现的错误：

`com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id " another is "W/fb4a:fb:GDPDialog(30221): Failed to send`

有没有其他人遇到过这样的问题或有任何建议？

干杯，奥利

# ios - 在 iOS 中使用 NSString 参数迭代 NSMutableArray 对象后，需要生成一个 JSON 文档上传到服务器

> ID：14026119
> 
> 赞同：-4
> 
> 时间：2012-12-24T22:24:24.330
> 
> 标签：ios, json, nsjsonserialization, fast-enumeration

我有一个包含对象集合的 NSMutableArray，每个对象都有 NSString 类型的三个参数。我需要做的是遍历这个集合，并创建一个包含两个小节的 JSON 文档：一个称为“测试结果”，另一个称为“报告”。NSMutable 数组中的每个对象都有三个 NSString 参数，其中一个参数称为“testResult”。

如果“testResult”的值为“pass”或“fail”，则该对象需要进入“Test Result”部分。如果参数的值为“na”，则对象进入“报告”部分。“测试结果”部分应包含三个“元素”：“名称”、“日期”、“测试结果”。“报告”部分只需包含两个元素：“名称”和“日期”。我的问题不是如何使用 for 循环遍历 NSMutableArray，我的问题是如何遍历 NSMutableArray，并构造一个 JSON 文档，如上所述。

我的代码将类似于：

```
 //creating beginning of JSON document here

    for (Person *personObject in testResultArray) {

         if (personObject.testResult == @"na") {

             //construct JSON object for "Reports" section
             NSString *jsonString1 = personObject.name;
             NSString *jsonString2 = personObject.date;
NSData *data1 = [jsonString1 dataUsingEncoding:NSUTF8StringEncoding];
NSData *data2 = [jsonString2 dataUsingEncoding:NSUTF8StringEncoding];
NSError * error = nil;
id json1 = [NSJSONSerialization JSONObjectWithData:data1 options:0 error:&error];
id json2 = [NSJSONSerialization JSONObjectWithData:data2 options:0 error:&error];

         } 
         else {

            //construct JSON object for "Test Results" section
            NSString *jsonString1 = personObject.name;
            NSString *jsonString2 = personObject.date;
            NSString *jsonString3 = personObject.testResult;

NSData *data1 = [jsonString1 dataUsingEncoding:NSUTF8StringEncoding];
NSData *data2 = [jsonString2 dataUsingEncoding:NSUTF8StringEncoding];
NSData *data3 = [jsonString3 dataUsingEncoding:NSUTF8StringEncoding];

NSError * error = nil;
id json1 = [NSJSONSerialization JSONObjectWithData:data1 options:0 error:&error];
id json2 = [NSJSONSerialization JSONObjectWithData:data2 options:0 error:&error];
id json3 = [NSJSONSerialization JSONObjectWithData:data3 options:0 error:&error];

         }

    }

    //close the JSON document construction, and return JSON document. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T16:18:18.910

大致：

```
//creating beginning of JSON document here

NSMutableArray* reports = [NSMutableArray array];
NSMutableArray* results = [NSMutableArray array];

for (Person *personObject in testResultArray) {

     if (personObject.testResult == @"na") {

         NSMutableDictionary* naPerson = [NSMutableDictionary dictionary];
         [naPerson setObject:personObject.name forKey:@"name"];
         [naPerson setObject:personObject.date forKey:@"date"];
         [reports addObject:naPerson];
     } 
     else {
         NSMutableDictionary* person = [NSMutableDictionary dictionary];
         [person setObject:personObject.name forKey:@"name"];
         [person setObject:personObject.date forKey:@"date"];
         [person setObjeect:personObject.testResult forKey:@"testResult"];

         [results addObject:person];
     }

}

NSMutableDictionary* mainDoc = [NSMutableDictionary dictionary];
[mainDoc setObject:reports forKey:@"reports"];
[mainDoc setObject:results forKey:@"results"];

NSString* JSONString = [JSONToolKit stringFromObject:mainDoc]; 
```

请注意，Apple 的 NSJSONSerialization 包是脑死的，需要您无用地循环遍历 NSData 表示。使用不同的包——在[http://www.json.org/选择一个](http://www.json.org/)

# python - 没有电子邮件的通知

> ID：14026123
> 
> 赞同：2
> 
> 时间：2012-12-24T22:25:02.147
> 
> 标签：python, django, email, notifications, django-notification

我正在使用 django 实现一个网站，我想让用户决定是否要接收电子邮件。是否可以自定义 django-notification 使其不向某些用户发送电子邮件？我可以更改原始应用程序，但我更喜欢按原样保留它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T21:08:27.713

为什么要修改 django-notification？有一个模型称为`NoticeSetting`，它指示是否需要将消息发送给用户（请参阅[此处](https://github.com/jtauber/django-notification/blob/master/notification/models.py#L58)）。该模型由第 315 行的`should_send`函数[使用](https://github.com/jtauber/django-notification/blob/master/notification/models.py#L325)。这意味着您可以在不自定义 django-notification 的情况下实现所需的功能。

# html - 像 Paintweb 这样的应用程序？

> ID：14026124
> 
> 赞同：0
> 
> 时间：2012-12-24T22:25:31.523
> 
> 标签：html, canvas

我希望在我的网站上对图像进行一些注释和标记，然后将它们保存回服务器。所以，它会是这样的...... 1.）用户上传图片。2.）我在浏览器中对其进行注释。3.) 保存带注释的图像（作为新图像或覆盖上传的图像）。

我一直在查看[http://code.google.com/p/paintweb/](http://code.google.com/p/paintweb/)看起来一切都很好。除了文本工具不是很好。有没有人知道的替代方案？也许是 HTML5 解决方案？帆布？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:31:37.390

尝试在alternativeto.net 中搜索并按许可证或平台进行过滤。这是链接：[Paintweb](http://alternativeto.net/SearchResult.aspx?search=Paintweb)

# c++ - flex 和 bison：字符串文字

> ID：14026125
> 
> 赞同：1
> 
> 时间：2012-12-24T22:25:36.643
> 
> 标签：c++, string, bison, flex-lexer

我需要你关于如何获取字符串文字的建议。字符串文字是所有以 开头`b"`，然后有零个或多个符号并以 . 结尾的东西`"`。令牌称为`BYTES_OBJECT`。`bytes_type`是存储此类字符串文字的类型名称。这是我尝试过的：

```
{%
#include "parser.hpp"
#include <iostream>
#include <string>
string BUFFER;
%}

%option noyywrap
%x COMMENT
%x BYTESMODE

"b"[\"] {
  BUFFER = string();
  BEGIN BYTESMODE;
} // BYTESMODE

  <BYTESMODE>{BYTES_HEXCODE} {
    // convert to hexcode
  } // BYTES_HEXCODE

  <BYTESMODE>{BYTES_ESCAPE} {
    yytext++; // Move to the next char
    switch (*yytext) {
      case '\'': BUFFER += '\''; break;
      case '\"': BUFFER += '\"'; break;
      case '\\': BUFFER += '\\'; break;
      case '\?': BUFFER += '?';  break;
      case 'a':  BUFFER += '\a'; break;
      case 'b':  BUFFER += '\b'; break;
      case 'f':  BUFFER += '\f'; break;
      case 'n':  BUFFER += '\n'; break;
      case 'r':  BUFFER += '\r'; break;
      case 't':  BUFFER += '\t'; break;
      case 'v':  BUFFER += '\v'; break;
    } // end of switch
  } // BYTES_ESCAPE

  <BYTESMODE>[^\"] {
    BUFFER += yytext;
  } // BYTES_SYMBOL

  <BYTESMODE>\" {
    bytes_type object = BUFFER;
    yylval.bytes_buffer = &object;
    BEGIN INITIAL;
    return BYTES_OBJECT;
  } // closing quote 
```

但是，当我尝试创建字符串时，会导致段错误。如果`return BYTES_OBJECT`是 before `BEGIN INITIAL`，它会处理不正确的文字。我该如何解决？我想即使是概念也可以比我写的更容易。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:57:47.093

您的输入文件有一些错误。您不应该仅仅为了识别字符串而进行如此详细的处理。一个更简单的例子：

```
%option noyywrap
%{
#include <iostream>
#include <string>
%}

%%
b\"(\\.|[^\\"])*\" { 
  std::cout << "string:" << yytext << std::endl;
  return(1); 
}

%%

int main() {
  yylex();
  return 0;
} 
```

# java - Java Android OutputStreamWriter IOException

> ID：14026133
> 
> 赞同：1
> 
> 时间：2012-12-24T22:28:16.000
> 
> 标签：java, android, networking

我有一个向 php 页面发送请求的代码，它工作正常，但突然（我不记得改变任何东西）它在模拟器和真实设备上都停止工作了

```
 URL url = new URL(this.site); 
            URLConnection conn = url.openConnection();

            if (!(conn instanceof HttpURLConnection))    { 
                Log.e(TAG, "connection is not HttpURLConnection");  
                throw new IOException("Not an HTTP connection");

            }

            try{
                Log.e(TAG, "Trying");
                HttpURLConnection httpConn = (HttpURLConnection) conn;
                Log.e(TAG, "Created connection");
                httpConn.setAllowUserInteraction(false);
                httpConn.setInstanceFollowRedirects(true);
                httpConn.setRequestMethod("POST");
                Log.e(TAG, "connecting");
                httpConn.connect(); 
                Log.e(TAG, "connected");

                OutputStreamWriter wr = new OutputStreamWriter(httpConn.getOutputStream());
                Log.e(TAG, "created outputstream"); 
```

这是堆栈跟踪：

```
 12-25 00:32:14.024: W/System.err(885): java.net.ProtocolException: Does not support output
     12-25 00:32:14.090: W/System.err(885):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:575)
     12-25 00:32:14.090: W/System.err(885):     at com.*****.StringAsyncRetriever.OpenHttpConnection(StringAsyncRetriever.java:122)
     12-25 00:32:14.090: W/System.err(885):     at com.******.StringAsyncRetriever.getData(StringAsyncRetriever.java:66)
     12-25 00:32:14.094: W/System.err(885):     at com.******.StringAsyncRetriever.doInBackground(StringAsyncRetriever.java:38)
     12-25 00:32:14.094: W/System.err(885):     at com.******.StringAsyncRetriever.doInBackground(StringAsyncRetriever.java:1)
     12-25 00:32:14.094: W/System.err(885):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
     12-25 00:32:14.094: W/System.err(885):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
     12-25 00:32:14.094: W/System.err(885):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
     12-25 00:32:14.094: W/System.err(885):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
     12-25 00:32:14.094: W/System.err(885):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
     12-25 00:32:14.094: W/System.err(885):     at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T23:09:08.413

查看源代码，当`doOutput`未设置为时抛出该异常`true`：

（来自：[http](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/net/www/protocol/http/HttpURLConnectionImpl.java.htm) ://www.java2s.com/Open-Source/Android/android-core/platform-libcore/org/apache/harmony/luni/internal/net/www/protocol/http/HttpURLConnectionImpl.java.htm )

```
public OutputStream getOutputStream() throws IOException {
    if (!doOutput) {
        throw new ProtocolException("Does not support output");
    } 
```

该类`HttpURLConnectionImpl`是从 Java 的扩展类扩展而来`HttpUrlConnection`的`URLConnection`。查看您发现的 javadocs：

> 受保护的布尔值输出
> 
> 此变量由 setDoOutput 方法设置。它的值由 getDoOutput 方法返回。URL 连接可用于输入和/或输出。将 doOutput 标志设置为 true 表示应用程序打算将数据写入 URL 连接。
> 
> 此字段的默认值为 false。

所以，你需要这样做：

```
httpConn.setDoOutput(true); 
```

在你的代码中。

# autohotkey - 从热键中删除自动修饰符

> ID：14026140
> 
> 赞同：1
> 
> 时间：2012-12-24T22:28:57.467
> 
> 标签：autohotkey, modifier

有没有办法使用不会自动将修饰符放在输出键上的修饰符来制作热键？例如：`^a::b`- 除非，当我击中`ctrl+a`它时，我只想给`ctrl+b`我`ctrl+a`= `b`。

玩一个由于某种原因不允许我使用热键`ctrl`+ 键的游戏，所以我通过将热键设置为不碍事的东西然后将我想要的实际热键设置为 autohotkey 中的那些键来规避这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:43:34.470

尝试：

```
^a::
Send, b
Send, c
Send, d
Return 
```

或者

```
^a::Send, bcd 
```

您能否显示导致错误的第 4 行的确切文本？

# android - 用另一个替换一个 SherlockFragment

> ID：14026145
> 
> 赞同：0
> 
> 时间：2012-12-24T22:29:21.983
> 
> 标签：android, android-fragments, actionbarsherlock, android-support-library

我正在使用 ActionBarSherlock 库，我想用另一个替换当前的 SherlockFragment，我试图编译它，但它说目标类不是片段（但它扩展了 SherlockFragment）：

```
final FragmentTransaction ft = getFragmentManager().beginTransaction(); 
ft.replace(R.id.details, new Student(), "Student"); 
ft.commit(); 
```

我怎样才能用 SherlockFragment 做到这一点。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:31:33.973

使用`getSupportFragmentManager()`代替`getFragmentManager()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:31:20.073

你必须使用

```
getSupportFragmentManager(); 
```

# apache - 运行 EC2 实例突然拒绝 SSH 连接

> ID：14026148
> 
> 赞同：21
> 
> 时间：2012-12-24T22:29:37.860
> 
> 标签：apache, ssh, amazon-web-services, amazon-ec2, connection

几天前我已经设置了 EC2 实例，甚至昨晚我也能够毫无问题地通过 SSH 连接到它。今天早上，我无法通过 ssh 访问它。安全组中的 22 端口已经打开，从昨晚开始我没有更改任何内容。

错误：

```
ssh: connect to host [ip address] port 22: Connection refused 
```

我最近遇到了类似的问题，但我不知道为什么会这样，所以我必须创建一个新实例，重新设置它，然后将所有 EBS 存储连接并配置到新实例。花了我几个小时......现在它又发生了。在上一个中，我已经安装了`denyhost`，这可能会阻止我，但是在当前一个中，只有 apache2 和 mysql 在运行。

当前实例已经运行了 16 个小时，所以我认为这不是因为它没有完成启动......另外，端口 22 对所有源（0.0.0.0/0）开放并且正在使用 tcp 协议。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-27T07:15:52.553

在@abhi.gupta200297 的帮助下，我们能够解决它。

问题是 中的错误`/etc/fstab`，并且 sshd 应该在`fstab`成功后启动。但事实并非如此，因此 sshd 不会启动，这就是它拒绝连接的原因。解决方案是创建一个临时实例，从原始实例安装根 EBS，然后注释掉其中的内容`fstab`，瞧，它让我再次连接。对于未来，我刚刚停止使用`fstab`并创建了一堆 shell 命令来将 EBS 卷挂载到目录并将它们添加到`/etc/init.d/ebs-init-mount`文件中，然后运行`update-rc.d ebs-init-mount defaults`以初始化文件，我不再遇到锁定 ssh 的问题。

**2015 年 4 月 23 日更新**

亚马逊团队创建了类似问题的视频教程，并展示了如何使用此方法进行调试：[https ://www.youtube.com/watch?v=_P29ZHu_feU](https://www.youtube.com/watch?v=_P29ZHu_feU)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-24T22:45:51.703

看起来 sshd 可能由于某种原因停止了。实例 EBS 是否支持？如果是这种情况，请尝试将其关闭并重新启动。那应该可以解决问题。

另外，您可以从 AWS Web 控制台进行 ssh 吗？他们有一个 java 插件可以通过 ssh 进入实例。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-28T21:50:17.947

对于那些因为在重启后无法通过 SSH 连接到 EC2 实例而遇到这篇文章的人，[这是在 serverfault 上交叉发布](https://serverfault.com/a/599141/153062)到[类似问题的](https://serverfault.com/q/568240/153062)：

来自[AWS 开发人员论坛关于此主题的帖子](https://forums.aws.amazon.com/thread.jspa?threadID=125205&tstart=125)：

> 尝试停止损坏的实例，分离 EBS 卷，然后将其作为辅助卷附加到另一个实例。将损坏的卷安装到另一个实例的某个位置后，检查 /etc/sshd_config 文件（靠近底部）。我有几个 RHEL 实例，其中 Yum 在 sshd_config 底部插入重复行，导致 sshd 由于语法错误而在启动时失败。
> 
> 一旦你修复它，只需卸载卷，分离，重新连接到你的另一个实例并再次启动它。

让我们通过指向 AWS 文档的链接来分解它：

1.  通过进入 EC2 管理控制台，单击“弹性块存储”>“卷”，右键单击与您停止的实例关联的卷，[停止损坏的实例并分离 EBS（根）卷。](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-StopInstances.html)
2.  *在与损坏的实例相同的区域和相同的操作系统中*启动一个新实例，然后[将原始 EBS 根卷作为辅助卷附加到您的新实例](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html)。下面第 4 步中的命令假设您将卷安装到名为“data”的文件夹中。
3.  将[损坏的卷安装到另一个实例的某个位置后](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-using-volumes.html)，
4.  通过发出以下命令检查“/etc/sshd_config”文件中的重复条目：
    *   `cd /etc/ssh`
    *   `sudo nano sshd_config`
    *   `ctrl-v`很多次才能到达文件的底部
    *   `ctrl-k`底部的所有行都提到“PermitRootLogin without-password”和“UseDNS no”
    *   `ctrl-x`并`Y`保存并退出编辑的文件
5.  [@Telegard](https://stackoverflow.com/users/874086/telegard) [指出（在他的评论中）](https://stackoverflow.com/a/21563478/1430996)我们只修复了症状。我们可以通过注释掉“/etc/rc.local”文件中相关的3行来解决这个*问题。*所以：
    *   `cd /etc`
    *   `sudo nano rc.local`
    *   查找“PermitRootLogin ...”行并删除它们
    *   `ctrl-x`并`Y`保存并退出编辑的文件
6.  修复后，只需[卸载卷](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-detaching-volume.html)，
7.  通过进入 EC2 管理控制台，单击“弹性块存储”>“卷”，右键单击与您停止的实例关联的卷，进行分离，
8.  [重新连接到您的其他实例](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html)并
9.  [再次启动它](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Stop_Start.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-04T21:10:26.113

这发生在我的 Red Hat EC2 实例上，因为每次启动实例时，这两行都会自动附加到 /etc/ssh/sshd_config 文件的末尾：

PermitRootLogin without-password
UseDNS no

这些附加操作之一是在没有换行符的情况下完成的，因此 sshd_config 文件的尾部如下所示：

PermitRootLogin without-password
UseDNS noPermitRootLogin without-password
UseDNS no

这导致 sshd 在下次启动时无法启动。我认为这是由此处报告的错误引起的：[https](https://bugzilla.redhat.com/show_bug.cgi?id=956531) ://bugzilla.redhat.com/show_bug.cgi?id=956531 解决方案是删除 sshd_config 文件底部的所有重复条目，并添加额外的换行符在最后。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T22:34:32.160

转到您的 AWS 管理控制台 > 选择实例 > 右键单击​​并选择“获取系统日志”这将列出问题所在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-21T13:53:46.423

有同样的问题，但系统日志有这个：

启动 sshd：/var/empty/sshd 必须由 root 拥有，而不是组或全局可写。[失败的]

使用上述相同的步骤来分离卷并附加到可连接的实例。然后使用：

sudo chmod 755 /var/empty/sshd

sudo chown root:root /var/empty/sshd

（[https://support.microsoft.com/en-us/help/4092816/ssh-fails-because-var-empty-sshd-is-not-owned-by-root-and-is-not-group](https://support.microsoft.com/en-us/help/4092816/ssh-fails-because-var-empty-sshd-is-not-owned-by-root-and-is-not-group)）

然后分离并重新连接到原始 EC2 实例，现在可以通过 ssh 访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-20T21:10:46.173

在我的情况下，卷空间不足并且服务无法启动。我使用[AWS 教程](https://www.youtube.com/watch?v=_P29ZHu_feU)（来自 Sherzod 的帖子）将它安装在一个好的 EC2 实例上并清理它并从启动中删除该服务，然后重新安装它并验证它是否正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-25T08:40:53.977

我遇到了同样的问题，无法连接到权限被拒绝错误的 aws 实例。

我能够通过屏幕共享呼叫与 aws 团队联系，他们指导我使用以下用户元脚本更改 aws 实例的文件夹权限。

脚步 ：

1.  停止实例
2.  操作 > 实例设置 > 编辑用户元

[![在此处输入图像描述](../Images/478240e264dde94febe6bb6c2ecf89a5.png)](https://i.stack.imgur.com/LfVFv.png)

3.  输入以下脚本并保存

**内容类型：多部分/混合；boundary="//" MIME-Version: 1.0 --// Content-Type: text/cloud-config; charset="us-ascii" MIME 版本：1.0 内容传输编码：7 位内容处置：附件；filename="cloud-config.txt" #cloud-config cloud_final_modules：

*   [scripts-user, always] --// Content-Type: text/x-shellscript; charset="us-ascii" MIME 版本：1.0 内容传输编码：7 位内容处置：附件；filename="userdata.txt" #!/bin/bash chown root:root /home chmod 755 /home chmod 700 /home/ubuntu chmod 700 /home/ubuntu/.ssh chmod 600 /home/ubuntu/.ssh/authorized_keys ls -ld /home /home/ubuntu /home/ubuntu/.ssh /home/ubuntu/.ssh/authorized_keys chown ubuntu:ubuntu /home/ubuntu -R --//**

3.  保存并使用正确的 pem 密钥连接到实例。

解决了我的问题 *将 ubuntu 更改为您的实例用户名

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-26T10:18:35.520

我通过分离 EBS 锁定了类似的 ssh，但忘记修改 /etc/fstab

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-07T21:28:56.380

对我来说，是我的 IP 发生了变化。希望这可以帮助某人。导航到安全组并在入站规则中更新您的我的 IP。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-29T03:04:51.783

如果你的 ubuntu 有`systemd`，你可以编辑`/lib/systemd/system/local-fs.target`并注释掉最后两行：

```
#OnFailure=emergency.target
#OnFailureJobMode=replace-irreversibly 
```

我没有对此进行过广泛的测试，也不知道是否有任何风险或副作用，但到目前为止它就像一个魅力。它会挂载根卷和所有其他卷（显然配置错误的卷除外），然后继续启动过程直到 SSH 启动，因此您可以连接到实例并修复不正确的`fstab`条目。

# mysql - 从远程主机登录到 mysql 服务器

> ID：14026151
> 
> 赞同：0
> 
> 时间：2012-12-24T22:30:20.343
> 
> 标签：mysql

我在执行命令时遇到问题

`grant select, insert, delete, update on dbname.* to username identified by 'password';`

从我的远程连接到我的服务器。它回应

`ERROR 1044 (42000): Access denied for user 'root'@'xxx.xxx.x.xx1' to database 'dbname'`.

我的服务器地址是`xxx.xxx.x.xx1`，我的远程机器地址是`xxx.xxx.x.xx2`.

我使用命令从我的远程机器登录到 MySQL 服务器

`sudo mysql -h xxx.xxx.x.xx1 -u root -p`

当我`select current_user()`从远程连接运行命令时，它返回`root@'xxx.xxx.x.xx1'`. 它不应该返回`root@xxx.xxx.x.xx2'`吗？

我将所有权限添加到`root@'xxx.xxx.x.xx1`' 和`root@'xxx.xxx.x.xx2'`.

当我为远程连接的 ip 地址授予 root 访问权限时，为什么我不能从远程计算机执行命令？`select current_user()`从远程机器登录时应该返回我的远程机器的 IP 地址或我的服务器的 IP 地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:31:50.933

解决了这个问题。

首先，我将 /etc/mysql/my.cnf 中的绑定地址行从 127.0.0.1 更改为我的服务器地址。

其次，我在我的服务器上以 root 身份登录到本地 mysql 并使用以下命令创建了另一个用户：

`grant select, insert, update, delete on databasename.* to newuser@my_remote_desktop_address identified by 'password';`

然后我可以在我的桌面上以新用户登录 mysql 并执行我的命令。

# python - CMD 不会显示我的 .py 文件

> ID：14026154
> 
> 赞同：0
> 
> 时间：2012-12-24T22:31:03.070
> 
> 标签：python

> **可能重复：**
> [无法从 cmd 行运行 Python](https://stackoverflow.com/questions/11354090/cant-run-python-from-cmd-line)

我决定学习 Python，并且我正在 Acer Aspire One 上网本上运行 Windows 7 Starter Edition。我`Python 2.7`直接安装在`C:/ directory`.

我已将其添加到`PATH`. 当我在 中键入 Python 时`CMD`，我会收到相应的消息，谈论我的版本。

我通过程序员的记事本制作了一个文件，其中包含以下内容：

```
print "Hello world" 
```

这就是我输入的所有内容，并将其保存`hello.py`在我的桌面上。

我打开 CMD，输入`hello.py`期望有 Hello World 弹出，但只有一个空行，然后再次提示命令。

这正是发生的事情。

```
C:\Users\Shane>hello.py

C:\Users\Shane> 
```

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T22:33:31.240

1）您将您的保存`hello.py`到您的桌面，但是您正在从您的主目录运行它。这实际上应该产生一个错误

2）尝试从您的桌面运行它： `python Desktop\hello.py`

# android - 在 Android 平台上调试 Linux 内核代码

> ID：14026155
> 
> 赞同：5
> 
> 时间：2012-12-24T22:31:09.653
> 
> 标签：android, c, linux-kernel, arm, kgdb

似乎这个主题没有一个很好的完整的一个地方文档。

这是没有任何解决方案的参考。任何人都可以贡献他的知识，了解如何在 linux 内核和 Android 平台中进行调试和跟踪。

### 一些链接

*   [内核调试技术现状](http://kernel.org/pub/linux/kernel/people/jwessel/dbg_webinar/State_Of_kernel_debugging_LinuxCon2010.pdf)
*   [使用 kgdb、kdb 和内核调试器内部](http://kernel.org/pub/linux/kernel/people/jwessel/kdb/index.html)
*   [Android：使用 KGDB 进行内核调试](https://stackoverflow.com/questions/4937322/android-kernel-debugging-with-kgdb)
*   [在 Android-Kernel Google Group 中搜索“kgdb”](https://groups.google.com/group/android-kernel/search?group=android-kernel&q=kgdb)
*   [Q：Android-Kernel Group 中的 Android 内核调试器](https://groups.google.com/forum/?fromgroups=#!topic/android-kernel/UjPgM5GGfJg)
*   [SGI 的 KDB](http://oss.sgi.com/projects/kdb/)
*   [调试 ARM Linux 内核和应用程序](http://www.ronetix.at/an008_ARM_Linux_Debugging.html)
*   [Linux 内核调试](http://www.mulix.org/lectures/kernel_oopsing/kernel_oopsing.pdf)
*   [eLinux 上的 KDB](http://elinux.org/KDB)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:40:36.130

传统的方法（我大部分时间都使用）是简单地将 printk 添加到代码的相关部分，然后阅读代码并在缩小范围后修复任何问题。我相信这通常是大多数内核开发人员所做的（当然，我团队中的所有 6 位同事，以及在不同组中工作的五六位同事）。[我在 PC 上使用 Linux，而不是在 Android 设备上，但它本质上是相同的内核......]

我确信 kgdb 可以以某种方式使用，但它依赖于具有合适的端口（例如串行或以太网）来连接调试器，串行在现代 PC 上很难找到，并且在移动设备中根本不存在电话。以太网会很好，但大多数手机（和其他 Android 平台）往往只有 WiFi，据我了解，这需要在常规 IP 堆栈之上安装大量其他软件才能使其正常工作。我不相信 kgdb 支持 wifi。

对不起，我不能给你更好的答案。[我从你的链接中看到你没有找到一个好的答案......]

编辑：但是，也许这至少有时会有所帮助： [http ://bootloader.wikidot.com/android:kgdb](http://bootloader.wikidot.com/android:kgdb)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T02:34:40.870

我为 android 编写 Linux 设备驱动程序。使用 adb 是 android 开发者的首选工具。您可以使用“adb shell cat /proc/kmsg”命令获取内核日志。如果您在提供串行终端的平台上工作，则可以从中获取这些内核日志。使用 printk 和内核日志是我用来调试内核代码的唯一工具。

您可以挂载 debugfs 并获取硬件特定信息。

Android 附带了一组工具，如堆栈实用程序来获取堆栈跟踪等。我知道那里没有太多适用于 android 平台开发人员的文档。大多数文档用于应用程序开发。

# android - Android 运行时错误器

> ID：14026158
> 
> 赞同：1
> 
> 时间：2012-12-24T22:31:21.883
> 
> 标签：android

我是初学者 android 开发人员:) 我将 android sdk 从 2.0 版本完全降到 4.2。我创建了一个新项目并添加了一些按钮、复选框然后我尝试运行我的第一个项目并得到了这样的错误：

```
[2012-12-25 00:09:13 - aaa]
[2012-12-25 00:09:13 - aaa] Android Launch!
[2012-12-25 00:09:13 - aaa] adb is running normally.

[2012-12-25 00:09:13 - aaa] Performing com.example.xxx.MainActivity activity launch
[2012-12-25 00:09:13 - aaa] Automatic Target Mode: launching new emulator with compatible AVD 'AVD_for_Galaxy_Nexus_by_Google'
[2012-12-25 00:09:13 - aaa] Launching a new emulator with Virtual Device 'AVD_for_Galaxy_Nexus_by_Google'
[2012-12-25 00:09:14 - Emulator] WARNING: Data partition already in use. Changes will not persist! 
[2012-12-25 00:09:14 - Emulator] WARNING: Cache partition already in use. Changes will not persist!
[2012-12-25 00:09:14 - Emulator] Failed to allocate memory: 8 
[2012-12-25 00:09:14 - Emulator]
[2012-12-25 00:09:14 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2012-12-25 00:09:14 - Emulator] Please contact the application's support team for more information. 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:58:38.233

对于特定的模拟器密度设置，有时会发生这种情况。尝试使用不同的模拟器，调整它的设置，直到你让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:12:43.227

我有同样的错误...

**解决方案**

将*config.ini*文件下的**hw.ramSize**改为 1024MB

 *```
$User>.android>avd>name_of_avd> config.ini 
```

它工作正常*

# php - 设置图像顺序和加载优先级

> ID：14026166
> 
> 赞同：0
> 
> 时间：2012-12-24T22:32:06.350
> 
> 标签：php, javascript, html

我正在使用 PHP 构建一个 Web 应用程序，用户可以在其中上传图像并将它们公开显示在主 index.php 文件中。我的问题是高级会员可以获得一些功能，其中一个功能允许您上传更大的图片并将它们放在顶部，这样它们就可以在更长的时间内高于所有其他人。

知道如何做到这一点，以便 MySQL 字段可以轻松控制它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:48:53.767

当高级用户上传图片时，为图片创建一个`expiration_date`列并在此列中插入一个更远的过期日期，然后`ORDER BY expiration_date DESC`将最早过期的保留在底部。

# android - 如何让 TextView 显示在 ListView 之上？

> ID：14026167
> 
> 赞同：0
> 
> 时间：2012-12-24T22:32:08.333
> 
> 标签：android, android-layout, listview, textview

我正在尝试从 ListActivity 中的 ListView 顶部显示 TextView，但文本未显示。

```
LayoutInflater inflater = (LayoutInflater)getSystemService( Context.LAYOUT_INFLATER_SERVICE );
View layout = inflater.inflate( R.layout.main, null );
TextView myTextView = (TextView)layout.findViewById( R.id.myTextView );
myTextView.setVisibility( View.VISIBLE );
myTextView.setText( R.string.emptyList );
setContentView( layout ); 
```

这是主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView android:id="@+id/myTextView"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:textSize="16sp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone"/>    
    <ListView  
        android:id="@android:id/list"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

如果列表视图为空，我希望在屏幕顶部显示“空列表”通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:37:51.403

为什么不将 setEmptyView 用于 ListView 并以这种方式进行通知。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ListView
    android:layout_width="fill_parent"
    android:layout_height="300dip"
    android:id="@+id/list_view" />
<TextView
    android:id="@+id/empty_list_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="List view is empty"
    android:visibility="gone" />
</LinearLayout> 
```

并调用您的代码。

```
ListView listView = (ListView) findViewById( R.id.list_view );
listView.setEmptyView( findViewById( R.id.empty_list_view ) );
listView.setAdapter(yourAdapter); 
```

检查这些以获取更多信息。

[AdapterView中setEmtpyView的正确使用](https://stackoverflow.com/questions/2807253/correct-use-of-setemtpyview-in-adapterview)

[http://www.technotalkative.com/android-listview-setemptyview/](http://www.technotalkative.com/android-listview-setemptyview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:36:45.860

您可以使用 a`FrameLayout`而不是 a `LinearLayout`，这样 the`TextView`和 the`ListView`将共享相同的布局空间*（尽管不是绝对必要的）*。

然后您可以将`ListView` *空视图*设置为`myTextView`，它会自动为您显示或隐藏空视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:41:04.367

我不确定您对 TextView 的含义。当活动加载时，您是否试图在列表上方放置一些东西？在这种情况下，将它添加到 LinearLayout 的列表上方就可以了。

要获得您所指的“空列表”通知，请确保您使用的活动扩展了 ListActivity，而不仅仅是 Activity，并且各个视图的标题为“列表”和“空”。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>

<TextView
    android:id="@+id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="@string/empty_user_list"/>

</LinearLayout> 
```

# html - 浮动黑客不会使滚动条出现..？

> ID：14026171
> 
> 赞同：1
> 
> 时间：2012-12-24T22:33:53.657
> 
> 标签：html, css, css-float

我有一个与`<div>`此示例类似的网站[http://jsfiddle.net/kLQ5z/1/](http://jsfiddle.net/kLQ5z/1/)

问题是，如果访问者的屏幕很小，那么它`outerContent`就会在屏幕外。
通常情况下，滚动条会出现，但因为我已经`<div>`以这种 hack 的方式设置了 s，所以它们不会出现，你甚至不能使用鼠标的水平滚动。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:31:21.397

我玩过你的 jsFiddle，[这似乎很有效](http://jsfiddle.net/RZzEV/1/)。基本上，我使用的是一个迭代过程：

1.  要在浮动框离开屏幕时显示滚动条，它必须位于内容区域内。

2.  一种方法是给主框一个固定的左边距，但是为了让它居中，我们需要用`margin: auto`.

3.  为了让它*完全*居中，我们还需要给它一个匹配的右边距。

4.  但理想情况下，如果屏幕太窄而无法完全显示，我们希望在出现任何滚动条之前挤出该边距。什么在 CSS 中是这样工作的？表格单元格！因此，我们使用一个空的虚拟 div 来代替固定的边距`display: table-cell`。

它仍然是一个 hack，如果它无法改进，我会感到惊讶。我也没有很好地测试过它，但它似乎至少可以在 Chrome 上运行。

# python - LD_LIBRARY_PATH 与 sudo python

> ID：14026173
> 
> 赞同：0
> 
> 时间：2012-12-24T22:34:47.120
> 
> 标签：python, environment-variables, sudo

我正在尝试将更新的 Python (2.7.3) 与旧的 CentOS 一起使用。

我有一个将 python 安装到非标准位置的方法：

```
 ./configure --prefix=#{install_path} --with-threads --enable-shared --with-zlib=/usr/include
 make
 make install 
```

我设置`PATH`和`LD_LIBRARY_PATH`变量来查找`bin/python`和`.so`使用`/etc/profile.d/`. 这似乎主要工作。

对于非 root 用户，我得到了正确的 Python：

```
[vagrant@localhost ~]$ python
Python 2.7.3 (default, Dec 24 2012, 15:18:59) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

使用 root 用户，我得到了正确的 Python：

```
[vagrant@localhost ~]$ sudo su
[root@localhost vagrant]# python
Python 2.7.3 (default, Dec 24 2012, 15:18:59) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

但是，`$LD_LIBRARY_PATH`在使用 sudo 时，hack 似乎有点奇怪：

```
[vagrant@localhost ~]$ sudo python
python: error while loading shared libraries: libpython2.7.so.1.0:
cannot open shared object file: No such file or directory 
```

即使变量看起来正确：

```
[vagrant@localhost ~]$ sudo which python
/opt/Python-2.7.3/bin/python 
```

添加`Defaults env_keep += "LD_LIBRARY_PATH"`到`/etc/sudoers`不起作用。

`sudo -i python`确实有效。 `sudo -E python`不起作用。

我很好奇我能做些什么来获得`sudo`正确的 Python 没有`-i`？

有关的：

[sudo 更改 PATH - 为什么？](https://stackoverflow.com/questions/257616/sudo-changes-path-why)

[https://stackoverflow.com/questions/12593336/odd-path-behaviour-on-centos-python](https://stackoverflow.com/questions/12593336/odd-path-behaviour-on-centos-python)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:34:47.120

感谢[这篇博文](http://koansys.com/tech/building-python-with-enable-shared-in-non-standard-location)。您可以通过在配置中`$LD_LIBRARY_PATH`链接来放弃使用。在`LDFLAGS`哪里`#{ldlibpath}`：`#{install_path}/lib`

```
./configure --prefix=#{install_path} --with-threads --enable-shared \
--with-zlib=/usr/include LDFLAGS="-Wl,-rpath #{ldlibpath}" 
```

如博文中所述，在运行 configure 之前，您需要 mkdir 这个 ldlibpath。

# opengl - OpenGL - glload 未定义的对 `wglGetProcAddress@4' 的引用

> ID：14026183
> 
> 赞同：1
> 
> 时间：2012-12-24T22:36:10.583
> 
> 标签：opengl, qt-creator, glload

我下载了[非官方的 OpenGL SDK](http://glsdk.sourceforge.net/docs/html/index.html)并使用 premake4 创建了 Makefile 并使用 mingw 4.8.4 编译它。

我也在使用 QtCreator

这是我的 .pro 文件

```
TEMPLATE = app

QT += opengl

SOURCES += main.cpp

QMAKE_CXXFLAGS += -std=gnu++11

INCLUDEPATH += C:/glsdk/freeglut/include
LIBS += -LC:/glsdk/freeglut/lib -lfreeglut

INCLUDEPATH += C:/glsdk/glload/include
LIBS += -LC:/glsdk/glload/lib -lglloadD 
```

我也在关注 arcsynthesis openGL 教程并尝试构建“你好三角形示例”：

```
#include <iostream>
#include <algorithm>
#include <string>
#include <vector>
#include <stdio.h>
#include <glload/gl_3_3.h>
#include <glload/gll.hpp>
#include <GL/freeglut.h>

using namespace std;

GLuint CreateShader(GLenum eShaderType, const std::string &strShaderFile)
{
    GLuint shader = glCreateShader(eShaderType);
    const char *strFileData = strShaderFile.c_str();
    glShaderSource(shader, 1, &strFileData, NULL);

    glCompileShader(shader);

    GLint status;
    glGetShaderiv(shader, GL_COMPILE_STATUS, &status);
    if (status == GL_FALSE)
    {
        GLint infoLogLength;
        glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &infoLogLength);

        GLchar *strInfoLog = new GLchar[infoLogLength + 1];
        glGetShaderInfoLog(shader, infoLogLength, NULL, strInfoLog);

        const char *strShaderType = NULL;
        switch(eShaderType)
        {
        case GL_VERTEX_SHADER: strShaderType = "vertex"; break;
        case GL_GEOMETRY_SHADER: strShaderType = "geometry"; break;
        case GL_FRAGMENT_SHADER: strShaderType = "fragment"; break;
        }

        fprintf(stderr, "Compile failure in %s shader:\n%s\n", strShaderType, strInfoLog);
        delete[] strInfoLog;
    }

    return shader;
}

GLuint CreateProgram(const std::vector<GLuint> &shaderList)
{
    GLuint program = glCreateProgram();

    for(size_t iLoop = 0; iLoop < shaderList.size(); iLoop++)
        glAttachShader(program, shaderList[iLoop]);

    glLinkProgram(program);

    GLint status;
    glGetProgramiv (program, GL_LINK_STATUS, &status);
    if (status == GL_FALSE)
    {
        GLint infoLogLength;
        glGetProgramiv(program, GL_INFO_LOG_LENGTH, &infoLogLength);

        GLchar *strInfoLog = new GLchar[infoLogLength + 1];
        glGetProgramInfoLog(program, infoLogLength, NULL, strInfoLog);
        fprintf(stderr, "Linker failure: %s\n", strInfoLog);
        delete[] strInfoLog;
    }

    for(size_t iLoop = 0; iLoop < shaderList.size(); iLoop++)
        glDetachShader(program, shaderList[iLoop]);

    return program;
}

GLuint theProgram;

const std::string strVertexShader(
    "#version 330\n"
    "layout(location = 0) in vec4 position;\n"
    "void main()\n"
    "{\n"
    "   gl_Position = position;\n"
    "}\n"
);

const std::string strFragmentShader(
    "#version 330\n"
    "out vec4 outputColor;\n"
    "void main()\n"
    "{\n"
    "   outputColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);\n"
    "}\n"
);

void InitializeProgram()
{
    std::vector<GLuint> shaderList;

    shaderList.push_back(CreateShader(GL_VERTEX_SHADER, strVertexShader));
    shaderList.push_back(CreateShader(GL_FRAGMENT_SHADER, strFragmentShader));

    theProgram = CreateProgram(shaderList);

    std::for_each(shaderList.begin(), shaderList.end(), glDeleteShader);
}

const float vertexPositions[] = {
    0.75f, 0.75f, 0.0f, 1.0f,
    0.75f, -0.75f, 0.0f, 1.0f,
    -0.75f, -0.75f, 0.0f, 1.0f,
};

GLuint positionBufferObject;
GLuint vao;

void InitializeVertexBuffer()
{
    glGenBuffers(1, &positionBufferObject);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexPositions), vertexPositions, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
}

//Called after the window and OpenGL are initialized. Called exactly once, before the main loop.
void init()
{
    InitializeProgram();
    InitializeVertexBuffer();

    glGenVertexArrays(1, &vao);
    glBindVertexArray(vao);
}

void display()
{
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(theProgram);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);
    glUseProgram(0);

    glutSwapBuffers();
}
void reshape(GLsizei w,GLsizei h){
    GLint zero = 0;
    cout << "D ";
    glViewport(zero,zero,w,h);
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);

    int width = 500;
    int height = 500;
    unsigned int displayMode = GLUT_DOUBLE | GLUT_ALPHA | GLUT_DEPTH | GLUT_STENCIL;

    glutInitDisplayMode (displayMode);
    glutInitContextVersion (3, 3);
    glutInitContextProfile(GLUT_CORE_PROFILE);
#ifdef DEBUG
    glutInitContextFlags(GLUT_DEBUG);
#endif
    glutInitWindowSize (width, height);
    glutInitWindowPosition (300, 200);
    int window = glutCreateWindow (argv[0]);

    glload::LoadFunctions();

    glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_CONTINUE_EXECUTION);

    if(!glload::IsVersionGEQ(3, 3))
    {
        printf("Your OpenGL version is %i, %i. You must have at least OpenGL 3.3 to run this tutorial.\n",
            glload::GetMajorVersion(), glload::GetMinorVersion());
        glutDestroyWindow(window);
        return 0;
    }

    if(glext_ARB_debug_output)
    {
        glEnable(GL_DEBUG_OUTPUT_SYNCHRONOUS_ARB);
        //glDebugMessageCallbackARB(DebugFunc, (void*)15);
    }

    init();

    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    //glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0;
} 
```

但我总是收到以下错误。

> c:\glsdk\glload\source\wgll_ext.c:140: 错误: 未定义对 `wglGetProcAddress@4' 的引用

我什至不知道为什么它会出现在 glload\source 文件夹中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T22:40:29.110

那是*Windows*特定的*OpenGL*功能，您是在开发*Windows*应用程序吗？

*您正在遵循的那些教程*似乎被定义为与*OpenGL的**Windows*实现一起使用，并且由于缺少诸如.**`wglGetProcAddress`**

# actionscript-2 - 在新页面中打开 Flash

> ID：14026185
> 
> 赞同：1
> 
> 时间：2012-12-24T22:36:44.170
> 
> 标签：actionscript-2, flash-cs5

Flash 新手，我正在使用 Flash 5，actionscript 2。

我有以下代码，

```
b1.onPress = function()

{getURL("http://rosswarner.com/lion.html");

} 
```

我希望在空白页面中打开页面。我尝试了通常的 HTML 方式，没有运气，看了一些，没有运气，所以我在这里。

如果可能，请将上面的代码更改为必须的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:21:47.543

默认情况下，GetURL 使用参数“_self”...您需要参数“_blank”您可以使用

```
getURL("http://rosswarner.com/lion.html";, "_blank"); 
```

其他参数包括“_parent”和“_top”

# java - 如何在 Android 应用程序中增加画布文本？

> ID：14026197
> 
> 赞同：0
> 
> 时间：2012-12-24T22:38:27.087
> 
> 标签：java, android

怎么样啊各位。我现在要做的是增加我现在在屏幕上的这个画布文本。我在画布上有一个位图，每次单击它时都会增加数字。我将变量打印到 logcat 中，它确实在增加，但没有在屏幕上绘制。

这是我现在拥有的更好主意的图片：

![在此处输入图像描述](../Images/27ff09fc647c779b0f65c2cd2a45f115.png)

这是我的绘画课：

```
package com.example.touchperson;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;

import android.util.Log;
import android.view.View;

public class Drawing extends View {

    Bitmap robot; 
    Rect rec;
    Paint text;
    static int touchCount = 0;
    public Drawing(Context context)  {
        super(context);
        robot = BitmapFactory.decodeResource(getResources(), R.drawable.character);
        Log.i("Robot coord", Integer.toString(robot.getHeight()));;
        rec = new Rect(0, 0, 200 , 200);
        text = new Paint();
        text.setColor(Color.CYAN);
        text.setTextSize(100);

    }

    public boolean contains(int x, int y){

        if(rec.contains(x, y)){
            return true;

        }
        else{
            return false;
        }

    }

    @Override
    protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.WHITE);
    canvas.drawBitmap(robot, rec, rec,  null);
    canvas.drawText(Integer.toString(touchCount) ,(int) (canvas.getWidth()/2) , (int) (canvas.getHeight()/2), text);

}
} 
```

这是我的主要活动课程：

```
package com.example.touchperson;

import android.os.Bundle;
import android.app.Activity;

import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class MainActivity extends Activity implements OnTouchListener {

    Drawing view;
    Drawing count;

    @Override
    protected void onCreate(Bundle savedInstanceState)  {
        super.onCreate(savedInstanceState);
        view = new Drawing(this);
        view.setOnTouchListener(this);
        setContentView(view);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub

        switch(event.getAction()){
        case MotionEvent.ACTION_DOWN:

            if(view.contains((int) event.getX(), (int) event.getY())){

                Drawing.touchCount++;
                count = new Drawing(this);
                Log.i("touched", Integer.toString(Drawing.touchCount));
            }
            break;

        }
        return false;
    }

} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:58:41.427

您应该向您的绘图类添加一个更新方法，然后更新您在该方法中绘制的数字。您可能还需要使您的绘图类绘制的区域无效，以使新数字出现在屏幕上（以强制再次调用您的 onDraw）。

就像 Squonk 所说，您现在有 2 个 Drawing 类的实例，其中一个在屏幕布局中（只有“视图”）。

除此之外，我会添加一个 ImageButton 来显示机器人，然后添加一个 TextView 来显示数字并将这些元素添加到活动的布局中。单击 ImageButton 时，我只需将 TextView 的 Text 属性设置为下一个数字。仅当您渲染无法从开箱即用的组件中组合的内容时，才需要编写自定义的 View 对象。

# javascript - 将触摸屏设备的 on('hover') 更改为 on('click')？

> ID：14026198
> 
> 赞同：3
> 
> 时间：2012-12-24T22:38:47.917
> 
> 标签：javascript, jquery

我有一个名为 isTouchscreen 的布尔变量和一些 on('hover', ...) 事件。如果 isTouchscreen 布尔变量等于 true，那么我需要将 on('hover') 事件更改为 on('click') 事件。这可能吗？

就像是：

```
 $(".smart-suggestions").on("hover", ".option", function(){
    $('.img-container img').show();
    //and do more stuff....
 });

    if(touchscreen==true){
       //change onhover event to onclick event  
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T22:42:58.643

你可以这样做：

```
var evt = touchscreen ? 'click' : 'hover';

$(".smart-suggestions").on( evt, ".option", function(){/*.....*/}); 
```

如果您需要这两个事件的替代方法：

```
$(".smart-suggestions").on('click hover', ".option", function(event){
       /* create whatever conditions you need*/
      if( event.type=='click' && touchscreen){
            doThis();
       }else{
              doThat();
       }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T22:43:02.640

我建议您始终绑定“点击”事件。并且有条件地，如果触摸屏为假，也绑定悬停事件。

# c++ - 模板重载解析中的位域

> ID：14026202
> 
> 赞同：3
> 
> 时间：2012-12-24T22:39:11.607
> 
> 标签：c++, gcc, c++11, clang

任何人都知道为什么第一个程序编译但第二个程序没有？唯一的区别是第一个使用普通函数，而第二个使用模板函数。为什么重载解析在模板和非模板函数的位域上表现不同？

回答时请参考标准中的段落。谢谢。

a.cpp

```
struct X {
  int x : 20;
  int y : 12;
};

void f(const int& x) {}

void f(int&& x) {}

int main() {
  X x;
  f(x.x);
} 
```

b.cpp

```
struct X {
  int x : 20;
  int y : 12;
};

template <typename T>
void f(T&& x) {}

template <typename T>
void f(const T& x) {}

int main() {
  X x;
  f(x.x);
} 
```

编译器错误：

```
[hidden]$ g++ -v 2>&1 | tail -n 1
gcc version 4.7.2 20120921 (Red Hat 4.7.2-2) (GCC)
[hidden]$ clang++ -v 2>&1 | head -n 1
clang version 3.3
[hidden]$ g++ -std=c++11 a.cpp
[hidden]$ g++ -std=c++11 b.cpp
b.cpp: In function ‘int main()’:
b.cpp:14:8: error: cannot bind bitfield ‘x.X::x’ to ‘int&’
[hidden]$ clang++ -std=c++11 a.cpp
[hidden]$ clang++ -std=c++11 b.cpp
b.cpp:14:5: error: non-const reference cannot bind to bit-field 'x'
  f(x.x);
    ^~~
b.cpp:2:7: note: bit-field is declared here
  int x : 20;
      ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T22:42:25.430

错误很明显，您不能对*bitfields进行**非常量引用*。*[class.bit]/3*：

 **> 地址运算符 & 不应应用于位域，因此没有指向位域的指针。非常量引用不应绑定到位字段 (8.5.3)。[ 注意：如果 const T& 类型的引用的初始化器是一个引用位域的左值，则该引用绑定到一个临时初始化以保存位域的值；引用不直接绑定到位域。见 8.5.3。——尾注]

重载决议行为不同的原因与*通用引用*有关。参考折叠规则和模板可以做到这一点：

```
template <typename T>
void f(T&& x) {} 
```

结果`T&&`被推断为`int&`当应用于*非常量 lvalue* `int`时，情况就是`x.x`. 在这种特殊情况下，您将得到：

```
void f(int& x){}
void f(int const& x){} 
```

而第一个，从参考折叠规则得到的`f(T&& x)`，可以明显看出比后一个匹配的更好。**

# c - Allegro5 with C - 制作程序

> ID：14026204
> 
> 赞同：0
> 
> 时间：2012-12-24T22:39:36.607
> 
> 标签：c, oop, allegro, allegro5

我正在使用 Allegro5 制作程序，但我还不熟悉这个库。我只想知道这个库有什么可能。

我必须做“图像颜色校正”（对比度、亮度等），我想：

- 制作按钮（就像在普通的 Windows 程序中一样），

-滚动条，

-文件加载器 - 我点击按钮，我可以跳过我硬盘上的目录并选择我想在我的程序中编辑的图像文件

- 在快板窗口中打开窗口（用于预览或其他内容）

等等

我想尽可能多地使用 OOP（我知道，它是 C）。是否可以在 C 和 Allegro5 中完成所有这些工作，或者我还需要 Windows 库和其他东西？

提前感谢您的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:55:35.077

是的，你可以做所有这些事情，但 Allegro 5 主要是为游戏而不是 GUI 应用程序设计的。它支持本机菜单（5.1 系列）和对话框，但您可以自行处理按钮、滑块等。（有一些第三方 GUI 库可用，但它们都不像本机应用程序。）

因此，如果您的程序基本上是一个 GUI 应用程序，那么您最好使用 Qt 或 GTK 之类的东西作为您的基础，并且只根据需要使用图形库。

# c# - Umbraco 代码库 - 版本非特定

> ID：14026211
> 
> 赞同：2
> 
> 时间：2012-12-24T22:40:50.733
> 
> 标签：c#, shared-libraries, umbraco

我已经创建了一个用于 Umbraco 的代码库，正如您所期望的那样，它可以完成我一遍又一遍地使用的所有常见任务。我在一家数字机构工作，我们支持从 Umbraco 版本（4.5.x 及更高版本）构建的网站。

迄今为止，我们总是针对当前项目使用的相同 dll 编译库，但这并不好，我们最终得到了许多不同的分支，每个版本一个。拥有这么多分支是一场噩梦，我正在尝试找到一种解决方案，该解决方案具有一个可用于所有版本的项目。

我只是想知道是否有人能想到或知道这样做的方法或有这方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:24:28.400

如果您纯粹为`INode`界面编写代码，那么您应该能够创建独立于版本的库。`DynamicNode`并且`DynamicMedia`都实现了`INode`.

# html - :checked 伪类在 Chrome 中不起作用

> ID：14026216
> 
> 赞同：6
> 
> 时间：2012-12-24T22:41:12.163
> 
> 标签：html, css, checkbox, css-selectors

我正在用这个 css 创建一个自定义复选框：

```
input[type="checkbox"] {
    background: transparent;
    border: inherit;
    width: auto;
}
input[type=checkbox] {
    display: none;
}
input[type=checkbox] + input + label,
input[type=checkbox] + label,
div:not(#foo) > input[type=checkbox] + label,
div:not(#foo) > input[type=checkbox] + input + label {
    cursor: pointer;
    height: 16px;
    padding: 0 0 0 18px;
    background: transparent url(/assets/images/checkbox-unchecked.png) no-repeat left 3px;
}
input[type=checkbox]:checked + input + label,
input[type=checkbox]:checked + label,
div:not(#foo) > input[type=checkbox]:checked + label,
div:not(#foo) > input[type=checkbox]:checked + input + label {
    background: transparent url(/assets/images/checkbox-checked.png) no-repeat left 3px;
}
.ie6 input[type=checkbox],
.ie7 input[type=checkbox],
.ie8 input[type=checkbox] {
    display: inline-block;
    *display: inline;
    *zoom: 1;
} 
```

这是我的 html 标记：

```
<div class="editor-label">
    <input class="check-box" data-val="true" id="Persistent" name="Persistent" type="checkbox" value="true" />
    <input name="Persistent" type="hidden" value="false" />
    <label for="Persistent">Keep me!</label>
</div> 
```

`input`元素由in`@Html.EditorFor(model => model.BooleanProp)`创建`Razor`。除了在 Chrome 中，此代码工作正常。实际上在 Chrome 中，当我们点击复选框时，我们会在点击提交 bottun 后看到效果（我的意思是更改显示复选框的标签的背景图像是否已选中）。请问有什么想法吗？

**更新**

这是一个[演示](http://jsfiddle.net/dLSPJ/4/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T22:56:30.693

我相信 Webkit 在`+`伪选择器之后的链式选择器存在问题

将链式 `... + input + label`选择器交换为`... ~ label`.

例如：

```
div:not(#foo) > input[type=checkbox] ~ label 
```

# neo4j - 在不同的属性上使用 neo4j DISTINCT 和 ORDER BY

> ID：14026217
> 
> 赞同：4
> 
> 时间：2012-12-24T22:41:52.713
> 
> 标签：neo4j, graph-databases, cypher

我正在尝试在 neo4j 版本 1.9M02 上运行以下密码查询

```
START me=node(2)
            MATCH me-[:FOLLOWS]->friends
            ,friends-[fr:ADDED|STOCKS]->products
            ,me-[r?]->products
            WHERE r is null
            RETURN products._id
            ORDER BY fr.CreatedOn DESC
            SKIP 0
            LIMIT 10 
```

我希望得到我的朋友添加或库存的所有产品，这些产品不是我添加或库存的，按关系创建时间排序。此查询返回正确的结果，但具有重复的 products._id 值（一个用户添加了该产品，另一个用户将其储存了）。但我只需要这个 products._id 的一个实例，所以我尝试了

```
START me=node(2)
            MATCH me-[:FOLLOWS]->friends
            ,friends-[fr:ADDED|STOCKS]->products
            ,me-[r?]->products
            WHERE r is null
            RETURN DISTINCT products._id
            ORDER BY fr.CreatedOn DESC
            SKIP 0
            LIMIT 10 
```

（为 products._id 添加了 DISTINCT）但是这次我**`Unknown identifier fr`**出错了。所以我在 RETURN 语句中添加了 fr

```
START me=node(2)
            MATCH me-[:FOLLOWS]->friends
            ,friends-[fr:ADDED|STOCKS]->products
            ,me-[r?]->products
            WHERE r is null
            RETURN DISTINCT products._id,fr
            ORDER BY fr.CreatedOn DESC
            SKIP 0
            LIMIT 10 
```

此查询可以正常工作，但会像以前一样返回重复的产品 ID。

最近几天我只玩过neo4j，所以一点也不专业。如果有人可以在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T00:00:14.080

我用 console.neo4j.org创建了一个[***小案例***](http://console.neo4j.org/?id=q5asct)

通过以下查询，我回来了`[4, 3, 2, 4, 3, 2, 4, 3 ,2]`：

```
START me=node(1) 
MATCH me-[:FOLLOWS]->friends
,friends-[fr:ADDED|STOCKS]->products
,me-[r?]->products 
WHERE r is null 
with distinct products._id as id, fr.CreatedOn as CreatedOn 
ORDER BY CreatedOn DESC 
RETURN id 
```

在最后一行区分，我回来了`[3, 4, 2]`：

```
START me=node(1) 
MATCH me-[:FOLLOWS]->friends
,friends-[fr:ADDED|STOCKS]->products
,me-[r?]->products 
WHERE r is null 
with distinct products._id as id, fr.CreatedOn as CreatedOn 
ORDER BY CreatedOn DESC 
RETURN distinct id 
```

看起来订单因不同而丢失。

**编辑**

[在github](https://github.com/neo4j/neo4j/issues/396)上对此提出问题后，我确实花了很长时间才得到[答案](https://github.com/neo4j/neo4j/issues/396#issuecomment-11776149)。

答案中的建议是运行此查询：

```
START me=node(1) 
MATCH me-[:FOLLOWS]->friends-[fr:ADDED|STOCKS]->product, 
WHERE not(me-->product)
RETURN product._id as id, min(fr.CreatedOn) as CreatedOn 
ORDER BY CreatedOn DESC 
```

我修改了查询，使其仅返回 ID：

```
START me=node(1) 
MATCH me-[:FOLLOWS]->friends-[fr:ADDED|STOCKS]->product 
WHERE not(me-->product) 
WITH product._id as id, min(fr.CreatedOn) as CreatedOn 
ORDER BY CreatedOn DESC 
RETURN id 
```

瞧，它回来了`[4, 3, 2]`！（我还创建了一个[更新的测试用例](http://console.neo4j.org/r/u866bj)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:38:01.673

通过使用聚合函数 MIN，您可以提取最早的 CreatedOn 日期。一旦你有了它，简单地按最早日期排序结果集，如下所示：

```
START me=node(1) 
MATCH me-[:FOLLOWS]->friends-[fr:ADDED|STOCKS]->product, 
WHERE not(me-->product)
RETURN product._id as id, min(fr.CreatedOn) as CreatedOn 
ORDER BY CreatedOn DESC 
```

H,

安德烈斯

# java - java JFame 在由 actionPerformed 启动时将不起作用

> ID：14026219
> 
> 赞同：0
> 
> 时间：2012-12-24T22:42:11.687
> 
> 标签：java, swing, jframe, jbutton

我一直在用谷歌搜索解决这个问题的方法，但找不到任何解决方法。我的问题是，当我通过按下按钮从 actionevent 启动新的 jframe 时，JFrame 类白色会打开，但随后程序开始冻结并且弹出窗口保持空白。

如果有一些糟糕的编程或瑞典语中的一些词，她是我道歉的鳕鱼：

启动 upp 类：

```
import java.util.ArrayList;

public class maineClassen {

    ArrayList<infoClass> Infon = new ArrayList<>();

    public static void main (String [] args)
    {
        referenser referens = new referenser();
        Startskärmen ss = new Startskärmen(referens);
    }

} 
```

“startskärm”的第一个屏幕要连接到：

```
public class Startskärmen extends JFrame implements ActionListener {

referenser referens;
ArrayList<infoClass> Infon;

JButton öppna = new JButton("open");
JButton ny = new JButton("create new");
JButton radera = new JButton("erase");

JScrollPane pane = new JScrollPane();

DefaultListModel mod = new DefaultListModel();
JList list = new JList(mod);
JScrollPane  sp = new JScrollPane(list);

JLabel texten = new JLabel("pre-alpha 0.1");

public Startskärmen(referenser re)
{
    //references should be sent by itself or received
    referens = re;
    Infon = referens.getInfoReferens();

    //build up the window
    JPanel labelPanel = new JPanel();
    labelPanel.setLayout(new BoxLayout(labelPanel, BoxLayout.LINE_AXIS));
    labelPanel.setBorder(BorderFactory.createEmptyBorder(10,10,0,10));
    labelPanel.add(texten);

    JPanel scrollPanel = new JPanel();
    scrollPanel.setLayout(new BoxLayout(scrollPanel, BoxLayout.LINE_AXIS));
    scrollPanel.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
    scrollPanel.add(sp);// man kan ocksä sätta in --> pane  <--

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new BoxLayout(buttonPanel, BoxLayout.LINE_AXIS));
    buttonPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 10, 10));
    buttonPanel.add(Box.createHorizontalGlue());
    buttonPanel.add(öppna);
    buttonPanel.add(Box.createRigidArea(new Dimension(10, 0)));
    buttonPanel.add(ny);
    buttonPanel.add(Box.createRigidArea(new Dimension(10, 0)));
    buttonPanel.add(radera);

    Container contentPane = getContentPane();
    contentPane.add(labelPanel,BorderLayout.NORTH);
    contentPane.add(scrollPanel, BorderLayout.CENTER);
    contentPane.add(buttonPanel, BorderLayout.PAGE_END);

    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    pack();
    setSize(500, 500);

    //adda action listener
    ny.addActionListener(this);
    öppna.addActionListener(this);
    radera.addActionListener(this);
    //skapaNyIC();

}

infoClass hh;

public void skapaNyIC()
{
    Infon.add(new infoClass());
    Infon.get(Infon.size() -1).referenser(Infon); //Infon.get(Infon.size() -1)
    mod.addElement(Infon.get(Infon.size() -1).getName());
}

public void actionPerformed(ActionEvent e) {
    if(e.getSource() == ny)
    {
        skapaNyIC();
    }
    else if(e.getSource() == öppna)
    {
        JOptionPane.showMessageDialog(texten,"This function doesn't exist yet");
    }
    else if(e.getSource() == radera)
    {
        JOptionPane.showMessageDialog(texten, "This function doesn't exist yet");
    }       
}
} 
```

将存储信息并创建将显示信息的窗口（类）的类：

```
public class infoClass {

ArrayList<infoClass> Infon;
private infoClass ic;
private  String namn = "inget namn existerar";
private String infoOmInfo = null;

private int X_Rutor = 3;
private int Y_Rutor = 3;

private String[] information = new String[X_Rutor + Y_Rutor];

//info om dessa värden
public infoClass()
{

}
public void referenser(infoClass Tic)
{
    ic = Tic;
    infonGrafiskt ig = new infonGrafiskt(ic);
}
public void referenser(ArrayList<infoClass> Tic)
{
    ic = Tic.get((Tic.size() - 1 ));
    System.out.println("inna");
    infonGrafiskt ig = new infonGrafiskt(ic);
    ig.setVisible(true);
    System.out.println("efter");
}
public String namnPåInfon()
{
    return namn; 
}

//namnen
public String getName()
{
    return namn;
}
public void setNamn(String n)
{
    namn = n;
}

//xkordinaterna
public int getX_Rutor()
{
    return X_Rutor;
}
public void setX_Rutor(int n)
{
    X_Rutor = n;
}
//y kordinaterna
public int getY_Rutor()
{
    return Y_Rutor;
}
public void setY_Rutor(int n)
{
    Y_Rutor = n;
}
//informationen
public String[] getInformationen()
{
    return information;
}
public void setInformationen(String[] n)
{
    information = n;
}
//infoOmInfo
public String getinfoOmInfo()
{
    return infoOmInfo;
}
public void setinfoOmInfo(String n)
{
    infoOmInfo = n;
}
} 
```

将显示由窗口创建的信息的类：

```
public class infonGrafiskt extends JFrame implements ActionListener{

    infoClass ic;
    infonGrafiskt ig;

    //tillrutnätet
    JPanel panel = new JPanel(new SpringLayout());

    boolean pausa = true;

    //sakerna till desigen grund inställningar GI = grund inställningar
    JButton GIklarKnapp = new JButton("Spara och gå vidare");
    JTextField GInamn = new JTextField();
    JLabel GINamnText = new JLabel("Namn:");
    JTextField GIxRutor = new JTextField();
    JLabel GIxRutorText = new JLabel("Antal rutor i X-led:");

    JTextField GIyRutor = new JTextField();

    JLabel GIyRutorText = new JLabel("Antal rutor i Y-led:");
    JLabel GIInfo = new JLabel("Grund Inställningar");

    // de olika framm:arna
    JFrame GIframe = new JFrame("SpringGrid");
    JFrame frame = new JFrame("SpringGrid");

    //info om denna infon som finns här
    JTextArea textArea = new JTextArea();
    JScrollPane infoOmClasen = new JScrollPane(textArea); //hadde text area förut
    JLabel infoRutan = new JLabel("Informatin om denna resuldatdatabank:");

    //namnet på informationsdatabanken
    JLabel namnetPåInfot = new JLabel("Namnet på denna resuldatdatabas.");
    JButton ändraNamn = new JButton("Ändra namn");

    JButton sparaAllt = new JButton("Spara allt");

    public infonGrafiskt(infoClass Tic)
    {
        //få startinfo
        namnOchRutor();
        ic = Tic;

        //skapar om rutan
        JPanel p1 = new JPanel();
        p1.setLayout(new BoxLayout(p1, BoxLayout.PAGE_AXIS));
        p1.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
        namnetPåInfot.setFont(new Font("Dialog",1,22));
        p1.add(namnetPåInfot);

        //pausa programet tills grundinställningarna är instälda
        int m =1;
        try {
            while(m ==1)
            {
            Thread.sleep(100);
            if(pausa == false)
                m =2;
            }
            } catch(InterruptedException e) {
            } 

        //Create the panel and populate it. skapar den så alla kommer åt den
        //JPanel panel = new JPanel(new SpringLayout());
        for (int i = 0; i < ic.getX_Rutor()*ic.getY_Rutor(); i++) {
            JTextField textField = new JTextField(Integer.toString(i));

            panel.add(textField);
        }

        //Lay out the panel.
        SpringUtilities.makeGrid(panel,
                                 ic.getY_Rutor(), ic.getX_Rutor(), //rows, cols
                                 5, 5, //initialX, initialY
                                 5, 5);//xPad, yPad

        //set up the window.
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //p1.add(ändraNamn);

        JPanel p2 = new JPanel();
        p2.setLayout(new BoxLayout(p2, BoxLayout.PAGE_AXIS));
        p2.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
        p2.add(infoRutan);
        infoOmClasen.setPreferredSize(new Dimension(0,100));
        p2.add(infoOmClasen);

        JPanel p3 = new JPanel();
        p3.setLayout(new FlowLayout());
        p3.setBorder(BorderFactory.createEmptyBorder(0,10,10,10));
        p3.setLayout(new BoxLayout(p3, BoxLayout.LINE_AXIS));
        p3.add(ändraNamn);
        p3.add(sparaAllt);

        //Set up the content pane.
        panel.setOpaque(true); //content panes must be opaque
        frame.setLayout(new BoxLayout(frame.getContentPane(), BoxLayout.PAGE_AXIS));
        frame.add(p1);
        frame.add(p2);
        frame.add(panel);//frame.setContentPane(panel);
        frame.add(p3);

        //Display the window.
        frame.pack();
        sparaAllt.addActionListener(this);
        ändraNamn.addActionListener(this);          
    }

    private void namnOchRutor()
    {
        System.out.println("inna 2");

        //sättigång action listner
        GIklarKnapp.addActionListener(this);
        frame.setVisible(false);
        //frameStart.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GIframe.setLayout(new BoxLayout(GIframe.getContentPane(), BoxLayout.PAGE_AXIS));

        JPanel GIP0 = new JPanel();
        GIP0.setLayout(new BoxLayout(GIP0,BoxLayout.LINE_AXIS));
        GIP0.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
        GIP0.add(GIInfo);
        GIInfo.setFont(new Font("Dialog",1,22));

        JPanel GIP1 = new JPanel();
        GIP1.setLayout(new BoxLayout(GIP1,BoxLayout.LINE_AXIS));
        GIP1.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));
        GIP1.add(GINamnText);
        GIP1.add(Box.createRigidArea(new Dimension(10, 0)));
        GIP1.add(GInamn);

        JPanel GIP2 = new JPanel();
        GIP2.setLayout(new BoxLayout(GIP2,BoxLayout.LINE_AXIS));
        GIP2.setBorder(BorderFactory.createEmptyBorder(0,10,10,10));
        GIP2.add(GIxRutorText);
        GIP2.add(Box.createRigidArea(new Dimension(10, 0)));
        GIP2.add(GIxRutor);

        JPanel GIP3 = new JPanel();
        GIP3.setLayout(new BoxLayout(GIP3,BoxLayout.LINE_AXIS));
        GIP3.setBorder(BorderFactory.createEmptyBorder(0,10,10,10));
        GIP3.add(GIyRutorText);
        GIP3.add(Box.createRigidArea(new Dimension(10, 0)));
        GIP3.add(GIyRutor);

        JPanel GIP4 = new JPanel();
        GIP4.setLayout(new BoxLayout(GIP4,BoxLayout.LINE_AXIS));
        GIP4.setBorder(BorderFactory.createEmptyBorder(0,10,10,10));
        GIP4.add(GIklarKnapp);
        System.out.println("inna 3");
        //lägga till sakerna gurund instllnings framen
        GIframe.add(GIP0);
        GIframe.add(GIP1);
        GIframe.add(GIP2);
        GIframe.add(GIP3);
        GIframe.add(GIP4);
        //desigen
        System.out.println("inna 4");
        GIframe.pack();
        GIframe.setVisible(true);
        System.out.println("inna5");

    }

    /*public static void main (String [] args)
    {
        infoClass i = new infoClass();
        infonGrafiskt ig = new infonGrafiskt(i);
    }*/

    public void referenserna( infonGrafiskt Tig)
    {
        ig = Tig;
    }

    private void skrivTillbaka()
    {
        String[] tillfäligString = ic.getInformationen();

        Component[] children = panel.getComponents();
        for (int i=0;i<children.length;i++){
            if (children[i] instanceof JTextField){
                ((JTextField)children[i]).setText(tillfäligString[i]);
                System.out.println(tillfäligString[i]);
            }
        }

        namnetPåInfot.setText(ic.getName());
        textArea.setText(ic.getinfoOmInfo());
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        if(e.getSource() == GIklarKnapp)
        {   
            //skicka x och y antal ett och så
            ic.setNamn(GInamn.getText());
            ic.setX_Rutor(Integer.parseInt(GIxRutor.getText()));
            ic.setY_Rutor(Integer.parseInt( GIyRutor.getText()));

            namnetPåInfot.setText(ic.getName());

            pausa = false;
            GIframe.setVisible(false);
            frame.setVisible(true);
        }

        if(e.getSource() == sparaAllt)
        {
            String[] tillfäligString = ic.getInformationen();
            Component[] children = panel.getComponents();
            for (int i=0;i<children.length;i++){
                if (children[i] instanceof JTextField){
                    tillfäligString[i] = ((JTextField)children[i]).getText();
                    System.out.println(tillfäligString[i]);
                }
            }

            ic.setInformationen(tillfäligString);

            ic.setNamn(namnetPåInfot.getText());
            ic.setinfoOmInfo(textArea.getText());
        }
        if(e.getSource() == ändraNamn)
        {
            skrivTillbaka();
        }

    }

    } 
```

所以我现在的问题是我无法创建一个新的“infoclass”来显示“infoGrafikst”类中​​的信息。使用代码：

```
 Infon.add(new infoClass());
    Infon.get(Infon.size() -1).referenser(Infon); //Infon.get(Infon.size() -1)
    mod.addElement(Infon.get(Infon.size() -1).getName()); 
```

由单击按钮触发。

对不起所有的鳕鱼，但不知道如何以另一种方式展示我的问题。

非常感谢。我确实发现这是这段代码

```
 int m =1;
        try {
              while(m ==1) {
                 Thread.sleep(100);
                 if(pausa == false)
                   m =2;
              }
            } catch(InterruptedException e) {
            } 
```

这使它不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:55:32.170

好吧，我没有仔细阅读您的代码可能是因为我懒得阅读代码页面。好吧，我认为您正在创建的新窗口一定会干扰[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

好吧，我做了一个简短的例子，可以帮助你，而且很顺利：

```
import java.awt.event.ActionEvent;
import javax.swing.*;

public class FrameLaunch {
void inti(){
final JFrame f=new JFrame();
final JFrame f2=new JFrame();
final JTextArea ja=new JTextArea();

JButton b =new JButton("press for a new JFrame");
f2.add(b);
f2.pack();
f2.setVisible(true);
b.addActionListener(new java.awt.event.ActionListener()
 {
       public void actionPerformed(ActionEvent e) {
            f2.setVisible(false);
            f.setSize(200,200);
            ja.setText("THIS IS NOT FROZEN");
            f.add(ja);
            f.setVisible(true);
            f.setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        }
        });
}
public static void main(String[] args)
  {
FrameLaunch frame = new  FrameLaunch();
frame.inti();
  }
} 
```

# java - Java HTTPUrlConnection 超时不起作用

> ID：14026223
> 
> 赞同：10
> 
> 时间：2012-12-24T22:42:20.047
> 
> 标签：java, timeout, httpurlconnection, urlconnection

我编写了一个通过随机代理打开到网站的 httpurlconnection 的程序。我的 httpurlconnection 称为**conn**。现在我知道，其中一些代理可能太慢了，所以我使用`conn.setConnectTimeout(40000)`and将连接的超时设置为 40000 毫秒`conn.setReadTimeout(40000)`。

这样做之后，我得到了这个代码：

```
long diff = 0;
    long starttime = 0;
    long endtime = 0;

    try
    {
        starttime = System.currentTimeMillis();
        conn.connect();

        endtime = System.currentTimeMillis();

        diff = endtime - starttime;

        if (endtime <= starttime + conn.getConnectTimeout())
        {
            //Trying to read sourecode
            InputStreamReader isrConn = new InputStreamReader(conn.getInputStream());
            BufferedReader brConn = new BufferedReader(isrConn);

            line = brConn.readLine();

            while (line != null)
            {

                response += line + "\t";
                try
                {
                    line = brConn.readLine();
                } catch (IOException e)
                {
                    printError("Reading sourcecode failed.");
                }

            }
        }
        else
        {
            response = "blabla.";
        }

    // If conn.connect failed   
    } catch (IOException e)
    {
        endtime = System.currentTimeMillis();
        diff = endtime - starttime;

        response = "Message: "+e.getMessage() +" MyTimeout:"+ conn.getConnectTimeout() +" Actual time passed:  "+ diff;
               e.printStackTrace();

    } 
```

连接失败是有原因的，所以在很多情况下，我会到达最后一个 catch-block 并获得以下输出：

* * *

消息：连接超时：连接 MyTimeout：40000 实际时间已过：21012

消息：连接超时：连接 MyTimeout：40000 实际时间已过：21016

消息：连接超时：连接 MyTimeout：40000 实际时间已过：21010

消息：连接超时：连接 MyTimeout：40000 实际时间已过：21009

* * *

所以我的问题是：我已将超时设置为 40000 毫秒，但我在大约 21000 毫秒后收到“连接超时”的响应，你们中有人知道这是为什么吗？

编辑：我正在使用 Windows 7，我现在将 e.printStackTrace() 添加到 catch-block 中，就像评论中所说的那样。谢谢到目前为止。现在的输出是（示例）：

```
java.net.ConnectException: Connection timed out: connect
    at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient$1.run(Unknown Source)
    at sun.net.www.http.HttpClient$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.http.HttpClient.privilegedOpenServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at TestThread.getSourcePage(TestThread.java:361)
    at TestThread.aChecker(TestThread.java:216)
    at TestThread.getNextProxy(TestThread.java:169)
    at TestThread.getNextC(TestThread.java:157)
    at TestThread.aChecker(TestThread.java:273)
    at TestThread.getNextProxy(TestThread.java:169)
    at TestThread.aChecker(TestThread.java:295)
    at TestThread.getNextProxy(TestThread.java:169)
    at TestThread.getNextC(TestThread.java:157)
    at TestThread.run(TestThread.java:103)
    at java.lang.Thread.run(Unknown Source)

Message: Connection timed out: connect MyTimeout:40000 Actual time passed:  21015 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-23T21:20:36.460

**看看你得到的异常：**
最大的线索：你得到`java.net.ConnectException` 根据 javadoc，`java.net.ConnectException`表示连接被远程拒绝，原因是没有进程正在侦听端口。

```
public class ConnectException
extends SocketException

Signals that an error occurred while attempting to connect a socket to a remote address and port. 
Typically, the connection was refused remotely (e.g., no process is listening on the remote 
address/port) 
```

**您在 HttpUrlConnection 中配置的内容：**
连接超时（假设远程端口接受连接）。如果连接超时到期，您将获得 a`java.net.SocketTimeoutException`而不是`java.net.ConnectException`.

**那么，是什么原因造成的`java.net.ConnectException`？**
我尝试了以下测试用例：

```
 +------------+------------+----------------+------------------+---------------------------------+ 
   | Valid Host | Valid Port | Valid Proxy IP | Valid Proxy Port | Exception                       | 
   +------------+------------+----------------+------------------+---------------------------------+ 
#1 | yes        | yes        | -NA-           | -NA-             | -- none --                      |
#2 | yes        | no         | -NA-           | -NA-             | java.net.ConnectException       |
   +------------+------------+----------------+------------------+---------------------------------+ 
#3 | yes        | yes        | yes            | yes              | -- none --                      |
#4 | yes        | no         | yes            | yes              | java.net.SocketTimeoutException |
#5 | yes        | yes        | yes            | no               | java.net.ConnectException       |
   +------------+------------+----------------+------------------+---------------------------------+ 
```

*   案例#1、#3 是所有配置都正确的快乐路径
*   在案例 #4 中，我们得到一个，`java.net.SocketTimeoutException`因为 java 进程能够建立连接（到代理端口），但是由于目标主机的端口号无效，因此没有读取任何数据
*   在 #2, #5 的情况下，我们得到`java.net.ConnectException`，因为 java 进程尝试写入/读取的端口无效
*   连接超时值不适用于没有进程正在侦听 java 进程尝试连接的端口的情况。这就是为什么你在超时到期之前得到 ConnectException

`Message: Connection refused: connect MyTimeout:10000 Actual time passed: 6549 java.net.ConnectException: Connection refused: connect at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85) .... ....`

**结论：**

*   您尝试连接的某些代理必须关闭。因此java进程抛出`java.net.ConnectException`
*   最好捕获`java.net.ConnectException`代理并将其标记为无效/关闭

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-04T21:14:40.907

根据我的经验，HttpUrlConnection 在名称解析期间不会超时。如果您的设备已经缓存了目标地址，那么它将正确超时。

出于测试目的，请在代码中使用您的 IP 地址。

这通常发生在我的移动设备上。

# c# - 以编程方式登录 Instagram

> ID：14026230
> 
> 赞同：3
> 
> 时间：2012-12-24T22:43:28.643
> 
> 标签：c#, login, webrequest

我正在尝试使用网络请求登录 Instagram。我很难理解发生了什么。得到这个：远程服务器返回一个错误：（403）禁止。到目前为止我所拥有的：

```
 public static string csrf;
    CookieContainer c1 = new CookieContainer();

    private void button1_Click(object sender, EventArgs e)
    {
        string PostData = String.Format("csrfmiddlewaretoken={0}&username=ra123&password=ra12345678",getToken());

        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("https://instagram.com/accounts/login/");
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        req.KeepAlive = true;
        req.AllowAutoRedirect = true;              
        req.CookieContainer = c1;
        byte[] byteArray = Encoding.ASCII.GetBytes(PostData);
        req.ContentLength = byteArray.Length;
        Stream dataStream = req.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Flush();
        dataStream.Close();

            HttpWebResponse webResp = (HttpWebResponse)req.GetResponse();
            Stream datastream = webResp.GetResponseStream();
            StreamReader reader = new StreamReader(datastream);
            string s = reader.ReadToEnd();
            MessageBox.Show(s);
            if (s.Contains("ra123"))
            {

                MessageBox.Show("Loggedin");

            }
            else
            {
                MessageBox.Show("Not");
            }

    }

    string getToken()
    {
        string p = "<input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=\"(.*)\"/>";
        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("https://instagram.com/accounts/login/");
        req.Method = "GET";
        req.CookieContainer = c1;

        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        Stream data = resp.GetResponseStream();
        StreamReader sr = new StreamReader(data);
        string src = sr.ReadToEnd();

        Match m = Regex.Match(src, p);
        if (m.Success)
        {
           return (m.Groups[1].Value.ToString());
        }
        return false.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T12:15:33.987

登录的问题是请求需要在标头处设置 cookie，而容器没有设置它，因为当您从未知资源管理器访问时，每次登录都会更改。这是您可以执行的操作：

```
WebResponse Response; 
HttpWebRequest Request;
Uri url = new Uri("http://thewebpage.com:port/login/");

CookieContainer cookieContainer = new CookieContainer();

Request = (HttpWebRequest)WebRequest.Create(url);
Request.Method = "GET";
Request.CookieContainer = cookieContainer;

// Get the first response to obtain the cookie where you will find the "csrfmiddlewaretoken" value
Response = Request.GetResponse(); 

string Parametros = "csrfmiddlewaretoken=" + cookieContainer.GetCookies(url)["csrftoken"].Value + "&username=USER&password=PASSWORD&next="; // This whill set the correct url to access

Request = (HttpWebRequest)WebRequest.Create(url); // it is important to use the same url used for the first request
Request.Method = "POST";
Request.ContentType = "application/x-www-form-urlencoded";
Request.UserAgent = "Other";
// Place the cookie container to obtain the new cookies for further access
Request.CookieContainer = cookieContainer;
Request.Headers.Add("Cookie",Response.Headers.Get("Set-Cookie")); // This is the most important step, you have to place the cookies at the header (without this line you will get the 403 Forbidden exception                                                   

byte[] byteArray = Encoding.UTF8.GetBytes(Parametros);
Request.ContentLength = byteArray.Length;

Stream dataStream = Request.GetRequestStream();
dataStream.Responseite(byteArray, 0, byteArray.Length);
dataStream.Close();

Response = Request.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:50:58.540

仅供参考，这不会解决您的问题，但是您需要学习将`Stream`实现的对象和其他对象`IDisposable`放入`using`块中：

```
public static string csrf;
CookieContainer c1 = new CookieContainer();

private void button1_Click(object sender, EventArgs e)
{
    string PostData = String.Format("csrfmiddlewaretoken={0}&username=ra123&password=ra12345678", getToken());

    HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("https://instagram.com/accounts/login/");
    req.Method = "POST";
    req.ContentType = "application/x-www-form-urlencoded";
    req.KeepAlive = true;
    req.AllowAutoRedirect = true;
    req.CookieContainer = c1;
    byte[] byteArray = Encoding.ASCII.GetBytes(PostData);
    req.ContentLength = byteArray.Length;
    using (Stream dataStream = req.GetRequestStream())
    {
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Flush();
        dataStream.Close();
    }

    string s;
    using (HttpWebResponse webResp = (HttpWebResponse)req.GetResponse())
    {
        using (Stream datastream = webResp.GetResponseStream())
        {
            using (StreamReader reader = new StreamReader(datastream))
            {
                s = reader.ReadToEnd();
            }
        }
    }
    MessageBox.Show(s);
    if (s.Contains("ra123"))
    {

        MessageBox.Show("Loggedin");

    }
    else
    {
        MessageBox.Show("Not");
    }

}

string getToken()
{
    string p = "<input type=\"hidden\" name=\"csrfmiddlewaretoken\" value=\"(.*)\"/>";
    HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("https://instagram.com/accounts/login/");
    req.Method = "GET";
    req.CookieContainer = c1;

    string src;
    using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
    {
        using (Stream data = resp.GetResponseStream())
        {
            using (StreamReader sr = new StreamReader(data))
            {
                src = sr.ReadToEnd();
            }
        }
    }

    Match m = Regex.Match(src, p);
    if (m.Success)
    {
        return (m.Groups[1].Value.ToString());
    }
    return false.ToString();
} 
```

# c# - RegEx - 使用符号匹配但不替换它们

> ID：14026233
> 
> 赞同：6
> 
> 时间：2012-12-24T22:44:04.340
> 
> 标签：c#, regex

我想在 RegEx 模式中使用符号来查找匹配项，但我不希望它们被替换。这是用于 C# 中的类和命名空间操作。

例如：

> `MyNamespaceLib.EntityDataModelTests.TestsMyClassTests+MyInnerClassTests`

必须替换为：

> `MyNamespaceLib.EntityDataModel.TestsMyClass+MyInnerClass`

（注意，只有“测试”出现在命名空间部分的末尾时才会被替换，而不是当它是类/命名空间名称的一部分时）

我已经设法在第一部分找到匹配项，但我正在努力将符号保留在替换的匹配项中。

到目前为止，我有：

> `var input = "MyNamespaceLib.EntityDataModelTests.TestsMyClassTests+MyInnerClassTests";`
> 
> `var output = Regex.Replace(input, "Tests[.+]|$", "");`

我尝试过使用非捕获组，但我怀疑它不适合我尝试使用它的方式。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T22:46:35.980

所以你想要做的是替换*不*带 a`.`或 a 的匹配项`+`？使用[前瞻](http://www.regular-expressions.info/lookaround.html)：

```
@"Tests(?![.+])" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:49:27.053

您可以使用 Regex.Replace 方法的[MatchEvaluator](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)重载，其中用于替换匹配的字符串是动态生成的。我在捕获组中获得了特殊符号（并且第一个捕获组始终是匹配的第[1](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)组），并将匹配替换为该值，如下所示：

```
var output = Regex.Replace(input, @"Tests([.+]|$)", m => m.Groups[1].Value); 
```

此外，根据 minitech 的评论，您还可以将 $1 用于 Regex.Replace 的 (string, string) 重载中的第一个捕获组，例如：

```
var output = Regex.Replace(input, @"Tests([.+]|$)", "$1"); 
```

也就是说，正则表达式通常是只写代码，所以你总是可以做一个愚蠢而简单的替换：

```
var output = input.Replace("Tests+","").Replace("Tests.","") ...; 
```

# java - 减法程序中的一个非常简单的错误

> ID：14026235
> 
> 赞同：1
> 
> 时间：2012-12-24T22:44:45.503
> 
> 标签：java

在最后一个打印语句中，我在以下程序中遇到了一个非常简单的错误。但我不知道它背后的确切原因。甚至逻辑是正确的，语法也是正确的。

请让我知道错误的确切原因。

谢谢

```
import java.util.Scanner;
public class main
{
    public static void main(String args[])
    {
        int c,d;
        Scanner s = new Scanner(System.in);
        System.out.print("Enter the first number : ");
        c = s.nextInt();
        System.out.print("Enter the second number : ");
        d = s.nextInt();

        System.out.println("The sub is : "+ c-d);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:45:44.793

您需要在减法周围加上括号：

```
System.out.println("The sub is : " + (c - d)); 
```

这是因为没有括号，`+`和`-`运算符具有相同的优先级并且从左到右关联。所以编译器尝试解析它，就好像它是写的一样：

```
System.out.println(("The sub is : " + c) - d); 
```

第一部分没问题，是一个产生`String`结果的表达式。不幸的是，没有办法将`-`运算符应用于左侧为 a`String`而右侧为 a 的表达式`int`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T22:45:35.980

那是因为，您正在尝试进行字符串连接，因为您的第一个操作数是一个字符串。

尝试这个：

```
System.out.println("The sub is : "+ (c-d)); 
```

注意括号中的 (cd)。

编译器会抱怨`-`没有为 string 和 int 定义运算符。

> 运算符 - 未定义参数类型 String, int

请注意，`Sub is:+ c`结果将是一个字符串。现在

```
`Sub is:+ c` - d;
^^String     - int 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T22:45:53.960

利用

```
System.out.println("The sub is : "+ (c-d)); 
```

代替

```
System.out.println("The sub is : "+ c-d); 
```

并检查它现在是否工作。

# javascript - Phonegap 不显示警报

> ID：14026236
> 
> 赞同：3
> 
> 时间：2012-12-24T22:45:02.160
> 
> 标签：javascript, android, iphone, cordova, alert

为什么 phonegap 不显示警报通知？（在 iPhone 5.1.1 上运行，phonegap phonegap-2.1.0-0-g26d211b，山狮 10.8.2，xcode 4.4.1）

```
<html>
<head>
<link rel="stylesheet" href="themes/css/apple.css" title="jQTouch">
<script src="src/lib/zepto.min.js" type="text/javascript" charset="utf-8"></script>
<script src="cordova-2.1.0.js" type="text/javascript" charset="utf-8"></script>
<script src="src/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(document).ready(function(){
     try
     {
        navigator.notification.alert('Hello', ok, 'Title', 'Button!');  
     }
     catch(e)
     {
        alert("doesn't support!!");
     }
    }
    function ok() {}
</script>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T23:14:11.463

因为您试图在加载 phonegap/cordova 框架之前显示警报。

***$(document).ready(function(){***在这里没有帮助你，你必须使用这个事件来检查 phonegap 是否成功加载：

```
document.addEventListener("deviceReady", deviceReady, false);

function deviceReady() {
    // Now safe to use the PhoneGap API
} 
```

有关此事件的更多信息：http: [//docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)

> PhoneGap 由两个代码库组成：native 和 JavaScript。在加载本机代码时，会显示自定义加载图像。但是，只有在 DOM 加载后才会加载 JavaScript。这意味着您的 Web 应用程序可能会在加载之前调用 PhoneGap JavaScript 函数。

# php - 使用 PHP 和 jQuery 对 Facebook 进行身份验证

> ID：14026238
> 
> 赞同：1
> 
> 时间：2012-12-24T22:45:11.083
> 
> 标签：php, jquery, facebook

我在使用以下代码进行身份验证时遇到了一些麻烦。

我有一个页面生成 loginUrl 供用户在 Facebook 上登录/验证我的应用程序：

```
<?php
    $loginUrl = $facebook->getLoginUrl(array('scope' => 'publish_stream, read_friendlists, user_birthday', 'redirect_uri' => 'complete.php'));
?>
<div id="connect_facebook">
    <a class="button" href="<?php echo $loginUrl; ?>">Connect to Facebook</a>
</div> 
```

我的 complete.php 有一个执行以下操作的脚本：

```
<script>
$(document).ready(function() {
    pop_db();
});

function pop_db() {
    $.post(
        "pop_db.php",
        function(data) {
            alert(data);
        }
    );
}
</script> 
```

我的 pop_db.php 文件看起来像：

```
<?php
require_once('constants.php');

$response = array();

$user = $facebook->getUser();

if($user) {
    try {
        // make API calls
        $response['code'] = "success";
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} else {
    $response['code'] = "failure";
    $response['userID'] = $facebook->getUser();
    $response['access_token'] = $facebook->getAccessToken();
}

echo json_encode($response); 
```

?>

constants.php 有我的 Facebook 对象的秘密信息（它还创建了 $facebook 对象）。

我的问题是，当我使用“complete.php”作为重定向并尝试使用此 jQuery 异步调用 API 时，我得到了 userID = 0 的响应（表示用户未登录）但它好像我得到了一个有效的访问令牌。当我使用“pop_db.php”而不是“complete.php”作为我的重定向并因此不使用任何异步调用时，一切正常。

我错过了什么吗？为什么它一直告诉我用户没有登录？

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:54:57.753

谁在通过 facebook 登录自己的网站/将 facebook 登录集成到他们的网站时遇到问题，只需按照给定的链接“http://developers.facebook.com/docs/howtos/login/server-side-login/#step2”。这是一个非常好的链接，可以肯定地解决您的问题。

谢谢。香蕉。

"

# facebook - 启用 Facebook 图表的通知

> ID：14026247
> 
> 赞同：0
> 
> 时间：2012-12-24T22:46:27.970
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用图形使用 facebook 通知。但它说我没有正确的权限。这是我用来在接受许可期间尝试获取通知的 url。但它没有出现

```
https://www.facebook.com/dialog/oauth?client_id=523691235&redirect_uri=http://apps.facebook.com/my_app&manage_notifications=1 
```

我传递了正确的参数吗？如何让 Facebook 要求用户允许我向他们发送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:01:29.457

`manage_notifications`您必须在身份验证的`scope`参数中请求一个。否则它将无法正常工作。

如果您不确定是否已这样做，请使用它并在[调试器](https://developers.facebook.com/tools/debug)`access_token`中运行它以查看它是否连接到用户以及是否拥有正确的权限。

# java - 在 Eclipse 中的“构建项目”上运行“mvn 包”

> ID：14026248
> 
> 赞同：24
> 
> 时间：2012-12-24T22:46:34.907
> 
> 标签：java, eclipse, maven-3

我在eclipse中有maven java项目。我右键单击项目，选择“构建项目”，我希望自动调用“mvn 包”。是否可以？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-24T23:22:44.760

右键单击您的 pom.xml 并选择`"Run as" -> "Maven build.."`并输入目标：`package`。如果您现在选择“运行”（CTRL + F11），如果您选择这些运行配置，它将自动运行。

正如克里斯所说，[m2e](http://eclipse.org/m2e/)是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T23:11:52.893

您应该安装 m2eclipse eclipse 插件。这将负责在 Eclipse 中正确构建 Maven 项目。m2eclipse 的链接在[这里](http://www.eclipse.org/m2e/)

# visual-studio - 是否需要安装 Git Windows 才能使用 Git Source Control Provider 扩展？

> ID：14026251
> 
> 赞同：-1
> 
> 时间：2012-12-24T22:46:46.997
> 
> 标签：visual-studio, git

如果我想使用[Git Source Control Provider](http://visualstudiogallery.msdn.microsoft.com/63a7e40d-4d71-4fbb-a23b-d262124b8f4c)，我是否需要安装其他任何东西，比如 Git Windows，还是 Git Source Control Provider 会全部完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:50:01.110

Looking at [the documentation](http://gitscc.codeplex.com/wikipage?title=Installation&referringTitle=Documentation), it seems pretty clear that you'll need to already have some form of git tools installed, since you have to provide paths to them.

# highstock - 本地主机上使用 PHP MYSQL 的 Highstock 不会呈现图表

> ID：14026253
> 
> 赞同：0
> 
> 时间：2012-12-24T22:47:33.140
> 
> 标签：highstock

我的 highstock 不会在 localhost 的图表中打开数据。有人知道为什么吗？

图表不显示日期。我已经尝试了 localhost、ipaddress，但仍然没有运气。

```
//jsonp.php file
<?php
$host="localhost";
$username="root"; 
$password=""; 
$db_name="northwind"; 
$con=mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$sql = "select unix_timestamp(OrderDate) as datetime, Freight from TEST1 ORDER BY OrderDate ASC LIMIT 100";
$result = mysql_query($sql);
$data = array();
while ($row = mysql_fetch_array($result)) {
extract ($row);
$datetime *= 10000; // convert from Unix timestamp to JavaScript time
$data[] = array((float)$datetime,(float) $Freight);

}
$array2[] = json_encode($data);
///data2[] = json_decode($array2);
echo json_encode($data);
?>

////output from jsonp.php file
[[8364528000000,32.38],[8365392000000,11.61],[8367984000000,65.83],[8368848000000,51.3],[8369712000000,58.17],[8370576000000,22.98],[8371440000000,148.33],[8374032000000,13.97],[8374896000000,81.91],[8375760000000,140.51],[8376624000000,3.25],[8377488000000,3.05],[8380080000000,48.29],[8380944000000,146.06],[8381808000000,3.67],[8382672000000,55.28],[8383536000000,25.73],[8386128000000,208.58],[8386992000000,66.29],[8387856000000,4.56],[8388720000000,136.54],[8389584000000,98.03],[8392176000000,76.07],[8393040000000,6.01],[8393904000000,26.93],[8394768000000,13.84],[8395632000000,125.77],[8398224000000,92.69],[8399088000000,25.83],[8399952000000,8.98],[8399952000000,2.94],[8400816000000,12.69],[8401680000000,84.81],[8404272000000,76.56]]

////html file
html file-----below
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title> - jsFiddle demo</title>

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

<link rel="stylesheet" type="text/css" href="/css/normalize.css">
<link rel="stylesheet" type="text/css" href="/css/result-light.css">

<style type='text/css'>

</style>

<script type='text/javascript'>//<![CDATA[ 

$(function() {

$.getJSON('127.0.0.1/HIGH_STOCK/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
// Create the chart
window.chart = new Highcharts.StockChart({
chart : {
renderTo : 'container'
},

rangeSelector : {
selected : 1
},

title : {
text : 'TEST DATA'
},

series : [{
name : 'TEST',
data : data,
tooltip: {
valueDecimals: 2
}
}]
});
});

});

//]]> 

</script>

</head>
<body>
<script src="JS/highstock.js"></script>
<script src="JS/modules/exporting.js"></script>

<div id="container" style="height: 500px; min-width: 500px"></div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:57:01.593

您的代码似乎一切正常。
**[演示](http://fiddle.jshell.net/6vkZ9/)**

在您的`$.getJSON(...)`情况下，您需要注意**[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)**

你没有具体说明你遇到了什么错误或你面临什么问题，在这种情况下真的很难提供帮助。请考虑发布错误的 jsFiddle 复现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T16:01:23.623

好的，在 localhost 上使用 PHPmyadmin 上的 Northwind 数据库和 WAMP，它正在工作。原谅我的粗心，已经晚了。如果您有问题，请告诉我。

```
//PHP
<?php

//read the northwind database nworders
$host="localhost";
$username="root"; 
$password="root"; 
$db_name="NORTHWIND"; 
$con=mysql_connect("$host", "$username", "")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$sql = "select distinct unix_timestamp(ShippedDate) as datetime, Freight from nworders  WHERE shipname LIKE '%Bon app%' ORDER BY datetime ASC LIMIT 50000 ";

$result = mysql_query($sql);
if($result === FALSE) {
    die(mysql_error()); // TODO: better error handling
    echo mysql_error();
}

$data = array();
while ($row = mysql_fetch_array($result)) {
extract ($row);
$datetime *= 1000;// convert from Unix timestamp to JavaScript time
$data[] = array($datetime, (FLOAT)$Freight);

}
$array2[] = json_encode($data);
echo json_encode($data);
?>

///

<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highstock Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
$(function() {

    $.getJSON('HTTP://localhost/HIGH/PHP_READ_TEST.PHP', function(data) {

        // Create a timer
        var start = + new Date();

        // Create the chart
        $('#container').highcharts('StockChart', {
            chart: {
                events: {
                    load: function(chart) {
                        this.setTitle(null, {
                            text: 'Built chart at '+ (new Date() - start) +'ms'
                        });
                    }
                },
                zoomType: 'x'
            },

            rangeSelector: {
                buttons: [{
                    type: 'day',
                    count: 3,
                    text: '3d'
                }, {
                    type: 'week',
                    count: 1,
                    text: '1w'
                }, {
                    type: 'month',
                    count: 1,
                    text: '1m'
                }, {
                    type: 'month',
                    count: 6,
                    text: '6m'
                }, {
                    type: 'year',
                    count: 1,
                    text: '1y'
                }, {
                    type: 'all',
                    text: 'All'
                }],
                selected: 3
            },

            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                }
            },

            title: {
                text: 'Hourly temperatures in Vik i Sogn, Norway, 2004-2010'
            },

            subtitle: {
                text: 'Built chart at...' // dummy text to reserve space for dynamic subtitle
            },

            series: [{
                name: 'Temperature',
                data: data,
                pointStart: Date.UTC(2004, 3, 1),
                pointInterval: 3600 * 1000,
                tooltip: {
                    valueDecimals: 1,
                    valueSuffix: '°C'
                }
            }]

        });
    });
});
        </script>
    </head>
    <body>
<script src="highstock.js"></script>
<script src="exporting.js"></script>

<div id="container" style="height: 500px; min-width: 500px"></div>
    </body>
</html> 
```

# java - java函数中可以使用未定义的变量吗？

> ID：14026255
> 
> 赞同：2
> 
> 时间：2012-12-24T22:47:38.837
> 
> 标签：java, hashmap

我正在阅读[HashMap.java](http://www.docjar.com/html/api/java/util/HashMap.java.html)。在第 917 行，函数*values()*使用了变量*values*。但是，我搜索了所有 java 文件，但没有找到一些名为*values*的已定义变量。这要怎么解释？

```
 916       public Collection<V> values() {
  917           Collection<V> vs = values;
  918           return (vs != null ? vs : (values = new Values()));
  919       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:49:48.627

它在 HashMap 的父类[AbstractMap](http://www.docjar.com/html/api/java/util/AbstractMap.java.html)中：

```
300       transient volatile Collection<V> values = null; 
```

# php - 删除 ID 并用另一个 ID 删除 Li 标签

> ID：14026258
> 
> 赞同：0
> 
> 时间：2012-12-24T22:47:56.463
> 
> 标签：php, javascript, jquery, mysql

我正在尝试从照片数据库中删除 ID，但在 li 标签中我有类别编号，并且我已将其设置为类。代码如下：

```
$().ready(function() {
  $(".delete").on("click",function(e) {
        e.preventDefault();
        var ID = encodeURI($(this).attr("id"));
        var CAT = $(".photos li").attr("class");
        alert(CAT);
    });
});
<ul class="photos">
$sql = mysql_query("SELECT * FROM photos ORDER BY id DESC");
while($data = mysql_fetch_array($sql)){
 echo "<li class='c".$data['cat_id']."'><a href='#' class='delete' id='".$data['id']."'>".$data['photo_name']."</a></li>";
 } 
```

我正在使用多个类别，但是当我单击删除结果是**c1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:54:56.247

如果您尝试删除照片的 ID 而不是类别 ID，为什么还要为它编写代码？以下内容应提醒您注意您单击的该照片删除链接的 ID。似乎`e.preventDefault();`在函数的开头有阻止其他任何东西的执行。

```
$(document).ready(function() {
    $(".delete").click(function(event) {
        var ID = encodeURI($(this).attr("id"));
        var CAT = $(this).closest("li").attr("class");
        alert(ID + " " + CAT);
        e.preventDefault();     
    });
});​ 
```

[http://jsfiddle.net/Cq49P/5/](http://jsfiddle.net/Cq49P/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:05:01.967

Cat_id`class`不是`Id`. 使用[.removeClass()](http://api.jquery.com/removeClass/)。删除类。

所以只是我得到了你的问题......你在类名中写下id，用c作为前缀，然后所有元素都像：c1，c2......你想得到c的数量。

首先：在元素上使用数据属性。例子：

```
echo "<li class='' data-cat_id=".$data['cat_id']."'><a href='#' class='delete' id='".$data['id']."'> 
```

（不是 php 专家，但您的结果 html 应该如下所示：`<li class='' data-cat_id="1"....` 这是我建议您应该使用的方式。

如果你真的必须用类来做你可以这样做：

```
$(function($) {
    var CAT = $("li").each(function() {
        var CAT = this.className.split(' ');
        var regex = /^c[0-9]*$/;
        $.each(CAT, function(){
            if(this.match(regex )){
                alert(this.split('c')[1]);
            }
        });
    });      

});
​[Fiddler][2]. 
```

# android - 使用 Android Manifest 正确支持 Google Play 中的某些屏幕尺寸

> ID：14026262
> 
> 赞同：1
> 
> 时间：2012-12-24T22:48:34.413
> 
> 标签：android, xml

我希望我的应用程序仅在中小型屏幕上受支持。所以这是清单中的代码：

```
<uses-sdk
    android:maxSdkVersion="16"
    android:minSdkVersion="4"
    android:targetSdkVersion="8" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="false"
    android:normalScreens="true"
    android:smallScreens="true" /> 
```

然而，在 google play 市场的发布页面中，显示如下： ![在此处输入图像描述](../Images/92765ceb7422b974cfd9f93ca031f069.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:56:14.057

`<supports-screens>`只是屏幕尺寸缩小的过滤器。因此，您可以用它来表示您只支持`large`and `xlarge`，并且 Play 商店会过滤掉您的应用程序`small`和`normal`设备。但是，屏幕尺寸的*增加*`<supports-screens>`只是告诉操作系统自己尝试让您的应用程序在更大的屏幕上运行。

除了`<supports-screens>`（这本身很有用）之外，为了您的过滤目的，您还需要添加[element](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)，以说明您支持的屏幕尺寸桶和密度[。`<compatible-screens>`](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)

# mongodb - 如何在 Morphia 中缓存引用的实体？

> ID：14026263
> 
> 赞同：0
> 
> 时间：2012-12-24T22:48:45.930
> 
> 标签：mongodb, caching, dependency-injection, guice, morphia

我正在将 Morphia 用于带有 Stripes 框架的 MongoDB。

让我们假设我有两个实体，Car（描述特定的汽车，比如一些特定的 1984 年本田雅阁）和 CarType（指定所有此类本田雅阁）：

最自然的建模方法似乎是：

```
@Entity 
class Car {
     @Id private String id; // VIN
     private Date purchaseDate;
     private Color color;
     @Reference private CarType type;

     // ..
}

@Entity
class CarType {
     @Id private String id;
     private String manufacturerId;
     private float engineDisplacement;

     // ..
} 
```

这可行，但效率低下，因为每次加载 Car 时都会从 DB 中查找 CarType。我想在内存中缓存汽车类型，因为它们很少改变。像 GORM 和 Hibernate 这样的持久性框架可以开箱即用，但我不确定如何在 Morphia 下做到这一点（为此[提出了一个功能请求](http://code.google.com/p/morphia/issues/detail?id=25)）。

我想保留对 CarType 的引用，因为仅存储 String carTypeId 会使视图和其他所有内容变得过于复杂。

所以我想我可以做这样的事情：

```
@Entity 
class Car {
     @Id private String id; // VIN
     private Date purchaseDate;
     private Color color;
     private String typeId;

     @Transient private CarType type;
     @Transient private CarService service = new CarServiceImpl();

     public void setTypeId() {
         this.typeId = typeId;
         updateTypeReference();
     }

     @PostLoad void postLoad() {
         updateTypeReference();
     }

     private void updateTypeReference() {
         type = service.findTypeById(typeId);
     }

     // ..
}

class CarServiceImpl implements CarService {
     @CacheResult CarType findCarTypeId(String typeId) {
         datastore.get(CarType.class, typeId);
     }

     // ..
} 
```

哪个有效并且可以满足我的要求，但是：

*   看起来像一个黑客
*   我想使用 Guice 来注入服务，但无法弄清楚如何，尽管我在 Stripes ActionBeans 中有整体依赖注入工作。

所以我想：

*   了解如何将（最好是 Guice）服务注入 Morphia 实体

或者

*   了解如何正确缓存 Morphia 中的引用实体

或者

*   如果一切都失败了，请切换到其他一些支持缓存的 MongoDB POJO 映射方法。但我真的很喜欢 Morphia，所以我宁愿不喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:50:10.223

另一种常见的方法是将 CarType 嵌入到每个 Car 中。这样，您只需要获取一个实体。

权衡：

*   您将需要所有重复的 CarType 的更新逻辑。既然你说它们几乎没有变化，这在性能方面应该很好。
*   重复的数据需要额外的磁盘空间，并且 RAM 中的工作集也会变得更大。

您需要评估这对您的数据有何影响，但数据复制以加快读取速度是一种非常常见的方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:50:52.557

由于我没有想到更好的解决方案，我正在做一个 @PostLoad 事件处理程序，它从静态变量中获取数据存储类，然后可以查找引用的实体。

这似乎是一种 hack，需要数据存储服务是线程安全的，但它对我有用。

# c++ - 如何使用带有指针的转换构造函数？

> ID：14026268
> 
> 赞同：1
> 
> 时间：2012-12-24T22:49:51.070
> 
> 标签：c++, constructor, type-conversion, implicit-conversion

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T22:51:57.403

*在您的情况下，只能为*用户定义的类型定义**转换构造函数*`A`。但是，它们不适用于作为*指针的**基本类型*，例如.*`A*`**

 **如果`doSomething`使用了一个`A const&`代替*（或简单的一个`A`）*，那么*转换构造函数*将按照您的预期被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T22:57:12.220

如果您的主要要求是能够调用现有的 doSomething 函数，那么您可以这样做：

```
int main()
{
    C* object = new C();
    A a(object);
    doSomething(&a);
    // May need to delete object here -- depends on ownership semantics.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:04:46.870

您可能的意思是您希望 C 成为 A 的子类：

```
class C : public A {
...
}; 
```**

# php - Unknown path components using PHP to post on wall?

> ID：14026271
> 
> 赞同：0
> 
> 时间：2012-12-24T22:50:22.867
> 
> 标签：php, facebook, sdk

This was working when I first set it up, and all of a sudden with no codebase changes stopped working.

[https://graph.facebook.com/100002831466409/feed&message=TESTTTTT&access_token=AAABqaF6H4qMBAIR9zZC6JtHEeYyrK9ZBKaZAdu67zYwxysJH12d0sW0G4cxX552sRyZCttHvnGoAexLuOJ0XezSL1NMgiKhwuL90yR2sEAZDZD](https://graph.facebook.com/100002831466409/feed&message=TESTTTTT&access_token=AAABqaF6H4qMBAIR9zZC6JtHEeYyrK9ZBKaZAdu67zYwxysJH12d0sW0G4cxX552sRyZCttHvnGoAexLuOJ0XezSL1NMgiKhwuL90yR2sEAZDZD) is the URL I use.

"error": { "message": "Unknown path components: /access_token=AAABqaF6H4qMBAIR9zZC6JtHEeYyrK9ZBKaZAdu67zYwxysJH12d0sW0G4cxX552sRyZCttHvnGoAexLuOJ0XezSL1NMgiKhwuL90yR2sEAZDZD"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:52:13.803

网址不正确，需要吗？而不是 &

[https://graph.facebook.com/100002831466409/feed?message=TESTTTTT&access_token=AAABqaF6H4qMBAIR9zZC6JtHEeYyrK9ZBKaZAdu67zYwxysJH12d0sW0G4cxX552sRyZCttHvnGoAexLuOJ0XezSL1NMgiKhwL90YR](https://graph.facebook.com/100002831466409/feed?message=TESTTTTT&access_token=AAABqaF6H4qMBAIR9zZC6JtHEeYyrK9ZBKaZAdu67zYwxysJH12d0sW0G4cxX552sRyZCttHvnGoAexLuOJ0XezSL1NMgiKhwuL90yR2sEAZDZD)

# php - Google Sites API via CURL in PHP - Getting "Content is not allowed in prolog."

> ID：14026273
> 
> 赞同：8
> 
> 时间：2012-12-24T22:50:29.640
> 
> 标签：php, curl, google-sites

```
$curl = new Curl();
$data = 'Email='.urlencode('MYEMAIL@EMAIL.COM').'&Passwd='.urlencode('MYPASSWORD').'&accountType=GOOGLE&source=Google-cURL-Example&service=jotspot';
$curl->post('https://www.google.com/accounts/ClientLogin',$data);

//match authorization token
preg_match("!Auth=(.*)!",$curl->response,$match);
$auth = $match[1];

//set curl headers
$curl->set_headers(array(
'Content-Type: application/atom+xml; charset=utf-8',
'Host: sites.google.com',
'GData-Version: 1.4',
'Authorization: GoogleLogin auth='. trim($auth)));

//get a list of sites associated with my domain
$curl->get('https://sites.google.com/feeds/site/clevertechie.mygbiz.com'); 

//contains data returned by $curl->get();
echo $curl->response; 
```

So instead of getting the list of sites from $curl->response, I get a message - "Content is not allowed in prolog." I've looked everywhere and haven't been able to find a solution, please help! Thanks! :)

This is the XML that is supposed to be returned by the response:

```
<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007' xmlns:sites='http://schemas.google.com/sites/2008' xmlns:gs='http://schemas.google.com/spreadsheets/2006' xmlns:dc='http://purl.org/dc/terms' xmlns:batch='http://schemas.google.com/gdata/batch' xmlns:gd='http://schemas.google.com/g/2005' xmlns:thr='http://purl.org/syndication/thread/1.0'>
<updated>2012-10-31T19:00:17.297Z</updated>
<app:edited xmlns:app='http://www.w3.org/2007/app'>2012-10-31T19:00:17.297Z</app:edited>
<title>My Site Title</title>
<summary>My Site Summary</summary>
<sites:siteName>my-site-title</sites:siteName>
<sites:theme>slate</sites:theme>
</entry> 
```

I can't paste the source of "https://sites.google.com/feeds/site/clevertechie.mygbiz.com" because it can't be accessed directly without authorization token, which is specified in the headers. The only way to retrieve its data is by using the token in the headers which I've done. Instead of getting above XML, I'm getting "Content is not allowed in prolog".

var_dump of $curl:

```
object(Curl)#1 (11) { ["curl_resource":protected]=> resource(4) of type (Unknown) ["proxy":protected]=> bool(false) 
["proxy_type":protected]=> NULL ["response"]=> string(33) "Content is not allowed in prolog." ["time"]=> float(249)
 ["info"]=> array(26) { ["url"]=> string(59) "https://sites.google.com/feeds/site/clevertechie.mygbiz.com" 
 ["content_type"]=> string(24) "text/html; charset=UTF-8" ["http_code"]=> int(400) ["header_size"]=> int(676) 
 ["request_size"]=> int(1935) ["filetime"]=> int(-1) ["ssl_verify_result"]=> int(20) ["redirect_count"]=> int(0) 
 ["total_time"]=> float(0.249) ["namelookup_time"]=> float(0.015) ["connect_time"]=> float(0.046) 
 ["pretransfer_time"]=> float(0.109) ["size_upload"]=> float(111) ["size_download"]=> float(33) 
 ["speed_download"]=> float(132) ["speed_upload"]=> float(445) ["download_content_length"]=> float(-1) 
 ["upload_content_length"]=> float(111) ["starttransfer_time"]=> float(0.249) ["redirect_time"]=> float(0) 
 ["certinfo"]=> array(0) { } ["primary_ip"]=> string(14) "74.125.224.194" ["primary_port"]=> int(443) 
 ["local_ip"]=> string(13) "192.168.1.133" ["local_port"]=> int(61985) ["redirect_url"]=> string(0) "" } 
 ["error"]=> NULL ["custom_headers"]=> NULL ["cookie_file"]=> string(46) "cookies.txt" 
 ["custom_curl_options":protected]=> array(3) { [47]=> int(1) [10015]=> string(111) 
 "Email=MYEMAIL&Passwd=MYPASSWORD&accountType=GOOGLE&source=Google-cURL-Example&service=jotspot" 
 [10023]=> array(4) { [0]=> string(49) "Content-Type: application/atom+xml; charset=utf-8" 
 [1]=> string(22) "Host: sites.google.com" [2]=> string(18) "GData-Version: 1.4" [3]=> string(320) 
 "Authorization: GoogleLogin auth=DQAAAMMAAAXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" } } ["curl_options":protected]=> array(9) { [10018]=> string(74) 
 "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1" [10016]=> string(22) 
 "http://www.google.com/" [13]=> int(60) [78]=> int(60) [19913]=> int(1) [52]=> int(1) [64]=> int(0) [81]=> int(0) [42]=> int(0) } } 
```

$auth is just a string, its not supposed to be formatted as XML. I verified that there are no extra spaces or characters and it exactly matches the one returned by the first $curl->post request.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:06:10.180

将请求类型保留为 POST（内容为 atom xml 有效负载），将内容类型设置为“application/atom+xml”，但将所有 oAuth 作为 GET 传递，即作为 URL 上的转义 (urlEncoded) 值请求参数。

# html - 格式化组类和跨度内的文本（对齐文本）

> ID：14026275
> 
> 赞同：0
> 
> 时间：2012-12-24T22:50:59.117
> 
> 标签：html, css, format

我有这个 html 代码

```
<section class="group5">
    <p ><span class="purple">1)</span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec molestie. Sed aliquam sem ut arcu. Phasellus sollicitudin. 
    Vestibulum condimentum  facilisis nulla. In hac habitasse platea dictumst. Nulla nonummy. Cras quis libero.</p>
    <p ><span class="purple">2)</span>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec molestie. Sed aliquam sem ut arcu. Phasellus sollicitudin. 
    Vestibulum condimentum  facilisis nulla. In hac habitasse platea dictumst. Nulla nonummy. Cras quis libero.</p>
    </section> 
```

这个CSS

```
p {
    margin-bottom:7px;      
    color:#161414;
    }

a, p a {
    text-decoration:underline;
    color:white;
    }
    a:hover {color:white;}

.group5 {
    float: left;
    width: 350px;
    position: relative;
    background:transparent;
    padding:15px;
    margin-bottom:10px;
    }

.purple{
    font-size:50px;
    color: #663366; 
    float:left;
    padding:12px;
    margin:20px;
} 
```

如何格式化段落，我的意思是证明段落中的文字是合理的？

我得到以下未格式化的结果

![在此处输入图像描述](../Images/c6aaf7d1751ded4a543d23f2e40cb2fe.png)

我读到有

```
 div
{
text-align:justify;
text-justify:inter-word;
} 
```

但这仅适用于IE...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:16:26.380

解决方案是

```
p {
    margin-bottom:7px;
    text-align: justify; 
    color:#161414;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:54:08.833

你也可以使用

```
<p align="justify">.. . . . . . . </p> 
```

# objective-c - Xcode 4.5.2 (Mountain Lion) 中的命令行选项

> ID：14026276
> 
> 赞同：3
> 
> 时间：2012-12-24T22:51:14.227
> 
> 标签：objective-c, xcode, code-signing, jailbreak

我正在尝试在我的越狱手机上调试 iPhone 应用程序，除了我在[这里](http://iphonedevwiki.net/index.php/Xcode#Replacing_codesign_with_ldid)执行的步骤之外，一切都进展顺利：

```
7\. Open iPhoneCodeSign.xcspec.
For Xcode 4.3 the file is at: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/iPhoneOS Build System Support.xcplugin/Contents/Resources/iPhoneCodeSign.xcspec
For Xcode 4.2 the file is at: /Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/iPhoneOS Build System Support.xcplugin/Contents/Resources/iPhoneCodeSign.xcspec
For older versions the file is at: /Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Plug-ins/iPhoneOS Build System Support.xcplugin/Contents/Resources/iPhoneCodeSign.xcspec 
```

我无法找到文件 (iPhoneCodeSign.xcspec)。我在 Mountain Lion 上使用 Xcode 4.5.2。我可以在以下位置找到目录：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/iPhoneOS Build System Support.xcplugin/Contents/ 
```

但我找不到据说包含 Resources/iPhoneCodeSign.xcspec 文件的资源目录。这在哪里可以找到？

如果他们移动了它，那么我的下一个问题将是`CommandLine = "/usr/bin/codesign"`存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:24:14.707

您的文件在目录中。

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Specifications/iPhoneCodeSign.xcspec 
```

圣诞节快乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:17:07.313

该指南不适用于 iOS6 和 XCode 4.5，因为该文件已被删除。为了在 iOS6 上伪造代码签名，请参阅[此答案](https://stackoverflow.com/a/12884327/846273)。

# ios - 选择表中的行时，带有 UIView 的 DetailViewController 会导致“无法识别的选择器”错误

> ID：14026281
> 
> 赞同：0
> 
> 时间：2012-12-24T22:51:54.523
> 
> 标签：ios, xcode, uiview, uiviewcontroller, uitableview

我有一个表格视图，其中包含我希望用户能够选择以进行评分的类别列表。我创建了一个单独的 UIView (RateView) 来管理 detailviewcontroller 中的评级。

在独立于项目进行开发且没有表格的情况下，我能够使评级工作正常。但是，当将用于跟踪评分的代码合并到情节提要和表格中时，尝试从表格导航到详细视图时收到以下错误： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UIView setNotSelectedImage:]: 无法识别的选择器发送到实例 0xad9b280'（notSelectedImage 是 UIView 的一个名为 RateView 的属性）。

下面是每个引用的视图控制器的接口文件。

*** RatingsList_ViewController ***

```
#import <UIKit/UIKit.h>
#import "Rate_ViewController.h"

@interface RatingsList_ViewController : UITableViewController

- (IBAction)dismissModal:(id)sender;

@end 
```

这是 Rate_ViewController 表中的 SEGUE

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   
    [self performSegueWithIdentifier:@"toRateDetail" sender:self];
    Rate_ViewController *rateCategory;
    rateCategory = (Rate_ViewController *) self.navigationController;   
} 
```

*** Rate_ViewController ***

```
#import <UIKit/UIKit.h>
#import "RateView.h"

@interface Rate_ViewController : UIViewController <UITextFieldDelegate, RateViewDelegate>

@property (weak, nonatomic) IBOutlet RateView *rateView;
@property (weak, nonatomic) IBOutlet UILabel *statusLabel;
@property (weak, nonatomic) IBOutlet UITextField *notesField;

@end 
```

我怀疑我没有正确授权，但您可以提供的任何帮助将不胜感激。

提前致谢！

# python - 从python中的文件中按图像搜索谷歌图像

> ID：14026283
> 
> 赞同：3
> 
> 时间：2012-12-24T22:52:04.740
> 
> 标签：python, image, search, drag-and-drop

我正在尝试通过按每个图像搜索谷歌图像并将结果命名为“此图像的最佳猜测：”旁边的结果来重命名我的海量图片文件夹中的图像。我知道谷歌确实有一个 python API，但我不确定它是否可以以这种方式使用，或者对于我经验有限的人来说这是否是一个合理的项目。

[https://developers.google.com/appengine/docs/python/images/usingimages#Uploading](https://developers.google.com/appengine/docs/python/images/usingimages#Uploading)似乎很有帮助，但我不确定我是否理解我需要在概念上做什么。

另一种选择是使用拖放功能，但我没有对此进行过多研究。

提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:32:10.073

据我所知，Google 仍然没有为其反向图像搜索服务提供公共 API（即您发送图片并获得文本搜索结果）。

我所知道的最流行的替代品是 TinEye（[http://www.tineye.com/](http://www.tineye.com/)）。这是他们的 RESTful API 的链接：[http ://services.tineye.com/TinEyeAPI](http://services.tineye.com/TinEyeAPI)

# python - 解析目录中存在的文件中的用户字符串数据

> ID：14026284
> 
> 赞同：0
> 
> 时间：2012-12-24T22:52:10.747
> 
> 标签：python, python-2.7

我正在尝试执行以下操作，即使是一个很好的案例，示例输入文件和完整代码都无法匹配，下面给出了完整的代码？为什么代码与下面的示例输入文件不匹配？如何克服它？

1.根据参数打开目录和子目录中的每个文件(which

2.检查每个文件的版权信息是否正好是3行，这3行不必是3行开头

```
 Copyright (c) 2012 Company, Inc. 
 All Rights Reserved.
 Company Confidential and Proprietary. 
```

示例输入文件：-

```
File1.txt

/*==========================================================================
 *
 *  @file:     Compiler.h
 *
 *  @brief:    This file 
 *
 *
 *  @author:   david
 *
 *  Copyright (c) 2012 Company, Inc. 
 *  All Rights Reserved.
 *  Company Confidential and Proprietary
 *
 *=========================================================================*/
#ifndef __COMPILER_ABSTRACT_H
#define __COMPILER_ABSTRACT_H 
```

编码：

```
import os
import sys
userstring="Copyright (c) 2012 Company, Inc.\nAll Rights Reserved.\nCompany Confidential and Proprietary."
print len(sys.argv)
print sys.argv[1]
if len(sys.argv) < 2:
    sys.exit('Usage: python.py <build directory>')
for r,d,f in os.walk(sys.argv[1]):
    for files in f:
        with open(os.path.join(r, files), "r") as file:
            if ''.join(file.readlines()[:3]).strip() != userstring:
                print files 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:09:11.147

检查什么`''.join(file.readlines()[:3]).strip()`给了你。您会注意到`*`行与行之间仍然存在，并且您将获得前 3 行（`[:3]`这样做），这肯定不是您在示例文件中想要的。虽然他们不在`userstring`.

一种可能的解决方案是单独检查每一行。像这样的东西：

```
userlines = userstring.split('\n') # Separate the string into lines
with open(os.path.join(r, files), "r") as file:
    match = 0
    for line in file:
        if userlines[match] in line: # Check if the line at index `m` is in the user lines
            match += 1 # Next time check the following line
        elif match > 0: # If there was no match, reset the counter
            match = 0
        if match >= len(userlines): # If 3 consecutive lines match, then you found a match
            break
    if match == len(userlines): # You found a match
        print files 
```

这背后的想法是，您正在寻找的不是完全匹配，因为有空行、`*`点、空格等。我使用`in`运算符或多或少地说明了这一点，但您可以想出更多当您在每行基础上工作时非常灵活。处理文件时更是如此……

**更新**：

对于每行更高级的解析，您可以使用`re`包中的正则表达式，但这在您的用例中可能不实用，因为您最想匹配字符串而不是模式。因此，要忽略最后一个字符，您可以尝试删除/忽略开头或结尾的任何字符（空格或点或星号）。

例如：

```
>>> a = '   This is a string.   '
>>> a.strip()
'This is a string.' # removes the whitespace by default
>>> a.strip('.')
'   This is a string.   ' # removes only dots
>>> a.strip('. ')
'This is a string' # removes dots and spaces 
```

为了使其与您的输入相匹配，`userstring`我建议您以相同的方式处理两个字符串（即从两者中删除空格/点），除非您确定自己在`userstring`. 通过修改，你应该有类似的东西：

```
userlines = [s.strip('\n\r .') for s in userstring.split('\n')]
# ...
        if userlines[match] == line.strip('\n\r .'):
# ... 
```

逐行处理文件后，您可以使用许多有用的功能，如`startswith`, `endswith`, `strip`, `count`, `find`, ... 只需输入`help(str)`解释器即可获得完整列表。

# sql-server - 像查询正在锁定表？

> ID：14026286
> 
> 赞同：0
> 
> 时间：2012-12-24T22:52:19.167
> 
> 标签：sql-server

我有一个列我正在做一个类似“%X%”的查询，我这样做是为了简单起见，因为我知道随着数据量的增长我必须重新访问它。

但是，我没想到的一件事是它会锁定表，但它似乎正在这样做。查询很慢，如果查询正在运行，其他查询在完成之前不会完成。

我要的是一些关于为什么会发生这种情况的一般想法，以及关于如何深入 SQL Server 以更好地了解与锁相关的确切情况的建议。

我应该提到，所有查询都是 SELECT，除了我每 60 秒唤醒一次以检查各种事物和可能的 INSERT 行的服务。此表永远不会更新，仅 CRD，而不是 CRUD，但问题是一致的而不是间歇性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:09:52.193

发生这种情况是因为 LIKE '%X%' 将强制进行完整扫描。如果有它可以使用的索引，那么引擎将扫描索引，但它需要读取每一行。如果没有非聚集索引，那么引擎将执行聚集索引扫描，如果表是堆，则执行表扫描。

这是因为 LIKE %somevalue% 构造。例如，如果您有一本电话簿，并且要求您找到姓名中间某处带有 X 的每个人，则您必须阅读索引中的每个条目。另一方面，如果它是 LIKE 'X%'，你就会知道你只需要查看以 'X' 开头的条目。

由于它必须扫描整个表，因此很可能将行锁升级为表锁 - 这不是一个缺陷，当 SQL Server 确定放置单个锁会更有效时，它几乎总是正确的该表超过 100,000 个行锁，但它确实阻塞了写操作。

我的建议是您尝试找到比涉及 LIKE '%X%' 的查询更好的查询。

# network-programming - 如何在 Vala 中接收 UDP 数据？

> ID：14026290
> 
> 赞同：4
> 
> 时间：2012-12-24T22:53:02.780
> 
> 标签：network-programming, vala

发生了另一个 Vala 问题：我尝试通过 UDP 发送和接收数据。发送有效，通过 Wireshark 我可以看到服务器发送了预期的结果。问题是：我的程序没有得到数据。

我检查了一下，我可以看到，当创建了一个套接字来发送 UDP 数据时，特定端口保持打开状态，Wireshark 确认了这一点，因为我的 PC 没有将任何这些 ICMP 消息发送回服务器。

到目前为止我得到了什么：

```
try
{
    SocketClient mySocket = new SocketClient();
    mySocket.protocol = SocketProtocol.UDP;
    mySocket.type = SocketType.DATAGRAM;
    var conn = mySocket.connect (new InetSocketAddress(addr,targetPort));
    conn.output_stream.write(themessage_in_a_uint8_array);
    DataInputStream response = new DataInputStream (conn.input_stream);
    string resp ="";
    char myChar;
    try
    {
        do
        {
            myChar = (char)response.read_byte();
            print ("Response" + myChar.to_string());
        }while(true);
    }
    catch(Error e)
    {
        print(e.message);
    }
}
catch(Error e)
{print(e.message);} 
```

当前发生的情况：消息被发送，字符串“响应”被打印到控制台一次，然后它只是循环。

如果我检查`response.get_available()`它返回0。

我可以检查`lsof | grep used_portnumber`并确定，使用的套接字保持打开状态。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:58:31.107

我不确定，但这是我怀疑的：

UDP 是一种数据报协议（数据被明确地分割成数据）。服务器向客户端发送了一个数据报。现在在 BSD 套接字（以及它之后的任何地方）中，如果底层套接字具有数据报类型，则`read`读取完整的数据包。如果缓冲区的长度不足，则消息将被**截断**。

解决方案以一个字节读取。例如

```
uint8[] buffer = new uint8[1 << 16]; // Maximum UDP length - we don't loose anything
unowned string locale;
bool need_convert = GLib.get_charset (out locale);
do {
    ssize_t len = response.read (buffer);
    string text;
    if (need_convert) {
        text = GLib.convert ((string)buffer, len, locale, "UTF-8");
    } else {
        text = (string)buffer;
    }
    stdout.print("Response " + text);
} while (true); 
```

**编辑**我已更改代码以打印 UTF-8 文本 - 不假设当前语言环境是基于“UTF-8”的。

**PS 1**这是我的猜测，因为它是我想到的 BSD 套接字（还有 Winsockets 和基于此的所有东西）的一个陷阱。如果问题更具体（即不是问题的答案），请保持优雅。

**PS 2**一般来说，我建议不要混合字节和字符。虽然在 ASCII 兼容的编码（ISO、UTF-8）中发送字符的 ASCII 子集是安全的，但当尝试使用 CJK 编码或发送方将通过 UTF-8 发送“±”并且发送方会将其视为 ISO-8859 时，它会**咬人**2（这个字符有不同的编码）。我认为它仅适用于玩具示例。如果没有，您可能想阅读[每个程序员绝对需要了解的关于编码和字符集以使用文本](http://www.joelonsoftware.com/articles/Unicode.html)的知识。

# r - acos(1) 为某些值返回 NaN，而不是其他值

> ID：14026297
> 
> 赞同：10
> 
> 时间：2012-12-24T22:55:16.390
> 
> 标签：r, floating-point, precision, r-faq

我有一个纬度和经度值列表，我试图找出它们之间的距离。使用标准的大圆方法，我需要找到：

```
acos(sin(lat1)*sin(lat2) + cos(lat1)*cos(lat2) * cos(long2-long1)) 
```

并将其乘以地球的半径，以我使用的单位表示。只要我们取 acos 的值在 [-1,1] 范围内，这就是有效的。如果它们稍微超出这个范围，它会返回`NaN`，即使差异是由于四舍五入造成的。

我遇到的问题是，有时，当两个纬度/经度值相同时，这会给我一个`NaN`错误。并非总是如此，即使对于同一对数字，但总是列表中的相同数字。例如，我让一个人停在沙漠的路上：

```
Time  |lat     |long
1:00PM|35.08646|-117.5023
1:01PM|35.08646|-117.5023
1:02PM|35.08646|-117.5023
1:03PM|35.08646|-117.5023
1:04PM|35.08646|-117.5023 
```

例如，当我计算连续点之间的距离时，第三个值将始终为`NaN`，即使其他值不是。这似乎是 R 舍入的一个奇怪错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T23:02:28.233

如果不查看您的数据（尝试），则无法准确判断`dput`，但这很可能是[常见问题解答 7.31](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)的结果。

```
(x1 <- 1)
## [1] 1
(x2 <- 1+1e-16)
## [1] 1
(x3 <- 1+1e-8)
## [1] 1
acos(x1)
## [1] 0
acos(x2)
## [1] 0
acos(x3)
## [1] NaN 
```

也就是说，即使您的值非常相似以至于它们的印刷表示相同，它们仍可能不同：有些会在内部`.Machine$double.eps`，有些则不会...

确保输入值受 [-1,1] 限制的一种方法是使用`pmax`and `pmin`：`acos(pmin(pmax(x,-1.0),1.0))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T22:55:16.390

一个简单的解决方法是使用 pmin()，如下所示：

```
acos(pmin(sin(lat1)*sin(lat2) + cos(lat1)*cos(lat2) * cos(long2-long1),1)) 
```

它现在确保精度损失导致的值不高于 1。

然而，这并不能解释正在发生的事情。

（编辑：Matthew Lundberg 指出我需要使用 pmin 让它与矢量化输入一起工作。这解决了让它工作的问题，但我仍然不确定它为什么舍入不正确。）

# php - 一段 jquery 代码在 Internet Explorer 中不起作用

> ID：14026299
> 
> 赞同：1
> 
> 时间：2012-12-24T22:55:23.557
> 
> 标签：php, jquery, html

我在下面有一段代码，它显示了 2 个下拉菜单，一个用于建筑物，另一个用于房间。当用户从下拉菜单中选择建筑物时，它将使用 ajax 导航到 room.php，在该脚本中它编译查询并输出房间列表，然后显示在房间下拉菜单中页：

```
 $sql = "SELECT DISTINCT Building FROM Room"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbBuilding);

 $buildings = array(); // easier if you don't use generic names for data 

 $buildingHTML = "";  
 $buildingHTML .= '<select name="buildings" id="buildingsDrop" onchange="getRooms();">'.PHP_EOL; 
 $buildingHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $building = $dbBuilding; 
     $buildingHTML .= "<option value='".$building."'>" . $building . "</option>".PHP_EOL;  
  } 

  $buildingHTML .= '</select>'; 

  $roomHTML = "";  
  $roomHTML .= '<select name="rooms" id="roomsDrop">'.PHP_EOL; 
  $roomHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
  $roomHTML .= '</select>'; 

        ?>

<script type="text/javascript">

        function getRooms() { 
    var building = jQuery("#buildingsDrop").val(); 
    jQuery('#roomsDrop').empty(); 
    jQuery('#roomsDrop').html('<option value="">Please Select</option>'); 
    jQuery.ajax({ 
          type: "post", 
          url:  "room.php", 
          data: { building:building }, 
          success: function(response){ 
              jQuery('#roomsDrop').append(response); 
          } 
        }); 

 }

 </script> 
```

现在上面的代码适用于除 Internet Explorer 之外的所有浏览器。感谢关于 SO 的一些很好的建议，我被告知要验证脚本，因为 Internet Explorer 在验证代码时非常严格。

无论如何，在我的验证中，我意识到我有这个错误：

> 文档类型在此处不允许元素“选项”：

指向下面的这一行：

```
jQuery('#roomsDrop').html('<option value="">Please Select</option>'); 
```

它声明它需要进入`<select>`我在上面的代码中技术上尝试做的标签。我的问题是如何修复代码以通过验证但能够执行它的功能，即在从建筑物下拉菜单中选择建筑物后显示房间下拉菜单中的房间列表？

以下是应用程序，请在 Internet Explorer 以及 chrome、firefox、opera 或 safai 中打开应用程序。首先在其中一个非 Internet Explorer 浏览器中向应用程序发送文本，以查看该应用程序的工作原理，然后在 Internet Explorer 中对其进行测试，您可以自己查看问题以及我想要实现的目标。

[应用程序（请在 Internet Explorer 和其他主要浏览器中打开）](http://helios.hud.ac.uk/u0867587/Mobile_app/Text11.php)

更新：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Room </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="roomStyle.css">
</head>

<body>

<?php

     // connect to the database
 include('connect.php');

 /* check connection */
 if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$building = isset($_POST['building']) ? $_POST['building'] : ''; 

$sql = "SELECT Room FROM Room WHERE Building = ?"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("s",$building);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbRoom);

$roomHTML  = "";  

 while($sqlstmt->fetch()) { 
    $roomHTML .= "<option value='".$dbRoom."'>" . $dbRoom . "</option>".PHP_EOL;  
} 

echo $roomHTML; 

 $sqlstmt->execute(); 

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T04:37:13.800

问题是`room.php`返回这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Room </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="roomStyle.css">
</head>

<body>

<option value='CW2/08'>CW2/08</option>
<option value='CW4/09'>CW4/09</option>
<option value='CW4/10'>CW4/10</option>
<option value='CW5/10'>CW5/10</option>
</body>
</html> 
```

当它应该只返回这个（基于你如何使用响应）：

```
<option value='CW2/08'>CW2/08</option>
<option value='CW4/09'>CW4/09</option>
<option value='CW4/10'>CW4/10</option>
<option value='CW5/10'>CW5/10</option> 
```

虽然我不愿意这么说，但 Internet Explorer 是正确的（在这种情况下）。`<option>`元素不应该是元素的直接子`<body>`元素。

这在 Chrome 中工作的原因（例如）是 Chrome 仅将其附加到`select#roomDrop`：

```
<title>Room </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="roomStyle.css">
<option value="CW2/08">CW2/08</option>
<option value="CW4/09">CW4/09</option>
<option value="CW4/10">CW4/10</option>
<option value="CW5/10">CW5/10</option> 
```

并且 Chrome 不会在视觉上呈现元素中的`<title>`、`<meta>`或元素。`<link>``<select>`

至少有几种方法可以纠正这个问题。

1.  更改`room.php`为仅输出`<option>`元素。
2.  将您的函数更改`getRooms()`为仅附加返回的`<option>`元素。

至于要遵循上述两个修复中的哪一个，这取决于您还`room.php`用于什么。还有其他解决方案（我敢肯定），但最终这些将归结为修复 PHP 或修复 AJAX 调用。

没有看到 PHP 源代码`room.php`，我无法帮助第一个。第二个可以这样做：

```
function getRooms() {
    'use strict';
    var building = jQuery("#buildingsDrop").val(),
        //use jQuery (or plain JavaScript) to build the option as a DOM element
        defaultOption = $('<option />').text('Please Select').val('');
    //append the DOM element, not an HTML string
    jQuery('#roomsDrop').empty().append(defaultOption);
    jQuery.ajax({
        "type": "post",
        "url": "room.php",
        "data": {
            "building": building
        },
        "success": function (response) {
            //filter out the option elements
            var opts = $(response).filter('option');
            //and append only those
            jQuery('#roomsDrop').append(opts);
        },
        "error": function (jqXHR, textStatus, errorThrown) {
            //always good to have an error handler.
            console.log(textStatus);
            console.log(errorThrown);
        }
    });
} 
```

您可能会注意到我使用 jQuery 将初始选项构建为 DOM 元素，而不是构建 HTML 字符串。我这样做是因为：

1.  这通常被认为是一种更好的做法。
2.  它消除了通过字符串连接构建元素的需要。
3.  它使我不必编写格式良好的 HTML（在长字符串上可能很难）。
4.  做起来并不需要太多的努力。

**更新：**

由于您已包含 的 PHP 源代码`room.php`，因此您可以将其修改为仅输出如下`<option>`元素：

```
<?php
    // connect to the database
    include('connect.php');
    /* check connection */
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        die();
    }
    $building = isset($_POST['building']) ? $_POST['building'] : '';

    $sql = "SELECT Room FROM Room WHERE Building = ?";
    $sqlstmt=$mysqli->prepare($sql);
    $sqlstmt->bind_param("s",$building);
    $sqlstmt->execute();
    $sqlstmt->bind_result($dbRoom);

    $roomHTML  = "";

    while($sqlstmt->fetch()) {
        $roomHTML .= "<option value='".$dbRoom."'>" . $dbRoom . "</option>".PHP_EOL;
    }
    echo $roomHTML;
    $sqlstmt->execute();
?> 
```

也就是说，简单地消除与元素无关的所有`<option>`内容。

# javascript - Ember.js 中reopen() 和reopenClass() 的区别

> ID：14026302
> 
> 赞同：15
> 
> 时间：2012-12-24T22:55:40.633
> 
> 标签：javascript, ember.js

我在阅读 emberjs.com [http://emberjs.com/documentation/#toc_reopening-classes-and-instances上的文档时感到困惑](http://emberjs.com/documentation/#toc_reopening-classes-and-instances)

在上面的页面上，它是这样解释的。

```
Person.reopen({
    // override `say` to add an ! at the end
    say: function(thing) {
    this._super(thing + "!");
    }
}); 
```

> 如您所见，reopen 用于向实例添加属性和方法。但是当您需要创建类方法或将属性添加到类本身时，您可以使用reopenClass。

```
Person.reopenClass({
    createMan: function() {
    return Person.create({isMan: true})
    }
});

Person.createMan().get('isMan') // true 
```

尽管解释说“重新打开用于向实例添加属性和方法。”，但我认为上面显示的两个示例都在谈论如何创建类方法或将属性添加到类本身，而不是实例。

我误解了它的意思吗？我不是一个经验丰富的程序员，所以我可能会被误解......

如果我被误解了，请解释何时使用reopen 和reopenClass。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-02T05:29:36.380

文档没有很好地解释这一点，但这**是**一个非常棘手的主题。

顺便说一句，它现在位于： [http ://emberjs.com/guides/object-model/reopening-classes-and-instances/](http://emberjs.com/guides/object-model/reopening-classes-and-instances/)

谈论面向对象编程的问题之一是它经常被这样解释： - 对象就是对象。对象是类的实例。- 类是对象。- 实例是对象，并且有一个类。

**这种解释对任何人**都没有帮助，而且似乎是一个递归问题（即引用没有尽头......一个对象是一个类的实例，它是一个对象......（重复））。

我更喜欢用以下方式推理：

当人们编写代码时，他们经常描述类和实例。类是一种东西。Fruit 就是一个类的例子。我们在这里不是在谈论特定的事物，而是在谈论整个“类别”的事物（因此得名）。

请注意，这不是真正的课程。只有当它是“活的”和“在计算机的内存中”时，它才是真实的。在那之前，它是一个类的描述。通常，当人们编写代码时，他们会在文本文件中写入文本，而这只是对计算机内部真实代码的描述，当计算机将其解释或编译成机器代码时会发生这种情况。

当您意识到一个类实际上本身也是一个描述时，就会出现棘手的问题。它是对一系列潜在真实对象的描述。

在计算机中，当您创建“一个苹果”时，这就是一个实例。它也是一个对象。它的类是 Apple，它在计算机中也是一个真实的活体。当**我们**谈论苹果时，这是一个想法。它不存在于现实中，但要让计算机使用某种东西，它必须让它存在于现实中，所以“Apple”是一个具体的、真实的对象，尽管它也是一个抽象。

我认为最后一点是让人们对对象感到困惑的原因。类是抽象的，但为了让计算机能够谈论和推理它们，它们必须是真实的。所以，我们决定......“类意味着抽象，实例意味着真实”......

问题是，我们有继承......这带来了抽象**层**的想法......所以在我们的水果模型中，你面前有一个特定的苹果，它也是一个水果，而水果也是一个食物. 实际上，食物实际上并不作为一个东西或一组东西存在，除非我们说“这个食物，这个苹果”，或者“世界上所有的食物”，或者“你妈妈的千层面”，那么它就是一个抽象的概念...

所以，在我们面向对象的计算机中，我们说“定义 Food 是一种 Object，现在定义 Fruit 是一种 Food，现在定义 Apple 是一种 Fruit，现在定义这个 Apple，它是一种苹果”。

现在这意味着： - Object 是 Food 的类，Food 是 Object 的一个实例，Food 本身也是一个类！- Food是Fruit的类，Fruit是Food的一个实例，Fruit本身也是一个类！- Fruit 是 Apple 的类，Apple 是 Fruit 的一个实例，Apple 本身也是一个类！- 苹果是你苹果的类，你的苹果是苹果的一个实例（因此也是水果、食物和对象！）。但是，它不是一个类，它只是一个对象。

为了推理你的苹果，我们会说它是一个对象（注意小写的 o），它也是一个 Apple，一个水果和一个食物，而且......这是踢球者......它也是一个对象。

所以现在希望我们能够理解你的苹果是一个对象，一个实例（苹果、水果、食物和对象）、一个苹果、一个水果、一个食物和一个对象，但它不是一个类.

所以...如果您向一个类添加一个**实例**方法，那么它在该类上将不可用，但在该类的所有实例上都可用。如果您添加一个类方法，它将在该类（和子类）上可用。因此，如果您向 Apple 添加一个实例方法，那么所有 Apple 实例都将能够运行该方法。但是，如果你只为你的苹果添加一个方法，那么只有你的苹果会有那个方法。我的苹果不会。如果您向 Apple 添加一个类方法，那么只有 Apple 类能够运行该方法（您也可以方便地通过其所有实例访问该方法）。类方法适用于不改变**特定**实例的事物。**实例方法适用于确实**会改变的事物**实例（一般）。属性/属性也是如此。您不会在 Apple 类上创建一个名为“Apple colour”的类方法，因为这听起来像是与**特定**的Apple（即实例）有关。希望这能把事情弄清楚一点:)**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:13:02.053

在我尝试了reopen() 和reopenClass() 之后，我发现了它们之间的区别。

这是我的实验结果。

```
var Person = Ember.Object.extend({

    name:"",
    alive:true,
    sayHi:function(){
        alert("hi");
    }

});

Person.reopenClass({
    age:30,

    sayHo:function(){
    alert("ho");
}   

});

Person.reopen({
height:180,
sayYo:function(){
    alert("yo");
}
})

var person = Person.create({
    name:"Tom"
});

//person.reopenClass();//error!!

person.reopen({
    sayWhat:function(){
        alert("what!?");
    },

    weight:100

});

console.log(Person.alive);//undefined
console.log(Person.age);//30
console.log(Person.height);//undefined
console.log(Person.weight);//undefined

console.log(person.alive);//true
console.log(person.name);//Tom
console.log(person.height);//180
console.log(person.weight);//100

person.sayHi();//it works

//person.sayHo();//it doesn't work
Person.sayHo();//it works

person.sayYo();//it works
//Person.sayYo();//it doesn't work

//Person.sayWhat();//it doesn't work
person.sayWhat(); 
```**

# css - CSS样式问题

> ID：14026305
> 
> 赞同：1
> 
> 时间：2012-12-24T22:56:19.133
> 
> 标签：css, drop-down-menu

我一直在关注一个教程参考下拉菜单，到目前为止，我已经设法做到了以下几点：

[http://jsfiddle.net/rusticblonde/NZVRq/2/](http://jsfiddle.net/rusticblonde/NZVRq/2/)

然而，在悬停时，子菜单似乎在悬停颜色上有很大的差距。我要改变ul ul li吗？

这是到目前为止的代码：

```
#cssmenu ul { margin: 0; padding: 0;}
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu ul ul {padding: 0;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 70px; background-color: rgb(35,35,35); box-shadow: 0px 2px 3px rgba(0,0,0,.4);}

#cssmenu ul li {
float: left;
margin-left: 15px;
position: relative;
}

#cssmenu ul li a {
color: rgb(160,160,160);
font-family: Verdana, 'Lucida Grande';
font-size: 15px;
line-height: 70px;
padding: 15px 20px;
-webkit-transition: color .15s;
-moz-transition: color .15s;
-o-transition: color .15s;
    transition: color .15s;
}

 #cssmenu ul li a:hover {color: rgb(250,250,250); }

#cssmenu ul li ul {
opacity: 0;
visibility: hidden;
background-color: rgb(250,250,250);
text-align: left;
position: absolute;
top: 55px;
left: 50%;
margin-left: -90px;
width: 180px;
-webkit-transition: all .3s .1s;
-moz-transition: all .3s .1s;
-o-transition: all .3s .1s;
    transition: all .3s .1s;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
    border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
-moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
    box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu ul li:hover > ul {
opacity: 1;
top: 65px;
visibility: visible;
}
#cssmenu ul li > ul:before{
content: '';
display: block;
border-color: transparent transparent rgb(250,250,250) transparent;
border-style: solid;
border-width: 10px;
position: absolute;
top: -20px;
left: 50%;
margin-left: -10px;
}
#cssmenu ul ul li { position: relative;}
#cssmenu ul ul a{
color: rgb(50,50,50);
font-family: Verdana, 'Lucida Grande';
font-size: 13px;
background-color: rgb(250,250,250);
display: block;
-webkit-transition: background-color .1s;
-moz-transition: background-color .1s;
-o-transition: background-color .1s;
    transition: background-color .1s;
}

#cssmenu ul ul a:hover {background-color: rgb(240,240,240);}

#cssmenu ul ul ul {
visibility: hidden;
opacity: 0;
position: absolute;
top: -16px;
left: 206px;
background-color: rgb(250,250,250);
text-align: left;
-webkit-transition: all .3s;
-moz-transition: all .3s;
-o-transition: all .3s;
    transition: all .3s;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
    border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
-moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
    box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}

#cssmenu ul ul a:hover{
background-color: rgb(205,44,36);
color: rgb(240,240,240);
}​ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:03:21.870

如果我对您的理解正确，您想删除弹出窗口中文本上方/下方的红色空白对吗？

您可以通过为`<a>`弹出窗口内的标签指定一个较小的`line-height`. 此刻巨大的差距来自`line-height`于规则中的大`#cssmenu ul li a {`

# java - android ImageButton 在 api 8 中设置 alpha

> ID：14026307
> 
> 赞同：0
> 
> 时间：2012-12-24T22:56:31.647
> 
> 标签：java, android, imagebutton, alpha

问题是 setAlpha 仅适用于 api 11，我使用的是 8。在我的 xml 中

```
android:background="@null" 
```

因为我不想显示背景。我只想在 java 文件中设置 alpha 以显示按钮何时可以使用和不能使用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T00:03:58.757

自 API 级别 1 以来有一个[`setAlpha(int)`](http://developer.android.com/reference/android/widget/ImageView.html#setAlpha%28int%29)。使用它而不是`setAlpha(float)`. （记住`ImageButton`扩展`ImageView`）

# php - 将可变数量的参数传递到 PDO 语句中并返回 JSON obj

> ID：14026313
> 
> 赞同：1
> 
> 时间：2012-12-24T22:57:38.227
> 
> 标签：php, mysql, json, pdo

这个函数接受一个整数数组

```
 $this->grades 
```

这个数组的大小取决于用户输入的内容。我只用一个数字就可以让它完美地工作，但是当我尝试多个数字时，我遇到了问题。在对它们进行编码之前，我是否需要以某种方式将响应连接在一起？还是有更有效的方法来运行它？

```
 private function retrieve_standards_one(){
    $dbh = $this->connect();
    for($x = 0; $x < (count($this->grades)); $x++){
    $stmt = $dbh->prepare("SELECT code, standard_one_id 
                           FROM standard_one 
                           WHERE grade_id = :grade_id 
                           ORDER BY standard_one_id");
    $stmt->bindParam(':grade_id', $this->grades[$x], PDO::PARAM_STR);
    $stmt->execute();
    $stnd = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
    $json = json_encode($stnd);
    return $json;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:00:11.497

只需使用一个数组来存储结果并对数组进行编码

```
 private function retrieve_standards_one(){
    $dbh = $this->connect();
    $data = array();
    for($x = 0; $x < (count($this->grades)); $x++){
    $stmt = $dbh->prepare("SELECT code, standard_one_id 
                           FROM standard_one 
                           WHERE grade_id = :grade_id 
                           ORDER BY standard_one_id");
    $stmt->bindParam(':grade_id', $this->grades[$x], PDO::PARAM_STR);
    $stmt->execute();
    $data[] = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
    $json = json_encode($data);
    return $json;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:00:19.390

问题是这样的：

```
$stnd = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

每次执行循环时，都会*覆盖*`$stnd`. 所以是的，为了使其正常工作，您需要将每个单独的结果附加到整个数组，然后对数组进行编码。

这是您的函数的重写版本，它既使用数组，也不会在每次循环迭代时不必要地重新准备查询：

```
private function retrieve_standards_one(){
    $dbh = $this->connect();
    $stmt = $dbh->prepare("SELECT code, standard_one_id 
                           FROM standard_one 
                           WHERE grade_id = :grade_id 
                           ORDER BY standard_one_id");
    $stnd = array();
    for($x = 0; $x < (count($this->grades)); $x++){
        $stmt->bindParam(':grade_id', $this->grades[$x], PDO::PARAM_STR);
        $stmt->execute();
        $stnd[] = $stmt->fetchAll(PDO::FETCH_ASSOC);
    }
    return json_encode($stnd);
} 
```

注意：该`$stnd = array();`行不是严格必须的，但如果`$this->grades`其中有 0 个元素，它将防止事情崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T23:00:49.243

如果你想传递一个数字数组，那么你可以这样做：

```
<?php

$grades = array(1,2,3,4,5);

private function retrieve_standards_one($grades)
{
    // ensure only numbers get into the SQL statement
    $grade_ids = array();
    foreach ($grades as $grade) {
        if (is_numeric($grade)) {
            $grade_ids[] = $grade;
        }
    }
    $grade_ids = implode(',', $grade_ids);

    $dbh = $this->connect();
    $sql = "SELECT code, standard_one_id
            FROM standard_one
            WHERE grade_id IN ($grade_ids)
            ORDER BY standard_one_id";
    $stmt = $dbh->query($sql);
    $stmt->execute();
    $stnd = $stmt->fetch(PDO::FETCH_ASSOC);
    $json = json_encode($stnd);
    return $json;
} 
```

# maven - Maven 位置（使用 Netbeans/Glassfish 间接安装时）？

> ID：14026314
> 
> 赞同：18
> 
> 时间：2012-12-24T22:57:40.053
> 
> 标签：maven, netbeans, glassfish

使用 Glassfish 安装 Netbeans 时，maven 主目录在哪里？我在 Windows 7 中的 Program Files 目录和我的用户目录中搜索了“mvn”，但什么也没找到。

在 Netbeans 的“Maven Home”的 Maven 设置中，它显示“Bundled”，这对我来说用处不大，我需要 maven 的实际路径。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-26T19:39:34.647

首先单独安装 maven（并通过运行 mvn 命令行来验证它）然后打开 netbeans 并导航到 Tools -> Options -> Java -> Maven （我想你已经知道了，但以防万一）并更改“Maven Home”安装 maven 的目录的路径。

![在此处输入图像描述](../Images/66aa317fc3661c3d65cd0a6c2753f29f.png)

**Bundled** maven 通常可以在NetBeans_install_directory */* java/maven 中找到。

Mac 示例：/Applications/NetBeans 8.2.app/Contents/Resources/NetBeans/java/maven/ Windows 示例：C:/Program Files/Netbeans 8.2/java/maven/

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-27T23:36:06.483

不确定您当时下载的是什么版本，但是对于 7.3 版，可以在此处找到 maven：

C:\Program 文件 (x86)\NetBeans 7.3\java\maven\

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-04T13:54:36.523

在 Mac OS 中，它位于

```
/Applications/NetBeans/NetBeans 8.0.2.app/Contents/Resources/NetBeans/java/maven/bin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-12T11:29:11.643

**与 NetBeans 捆绑在一起的 maven，位于**

```
% NetBeans Installation Location %\java\maven 
```

例如：C:\Program Files\NetBeans 8.2\java\maven\bin

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-23T03:48:36.330

我知道这是一个老问题，但还有另一种方法可以查看您的 Netbeans 上安装 mvn 的位置。

当您清理和构建项目时，您可以在控制台输出中看到使用的 maven 的位置。看截图中的红圈 `/home/<user>/netbeans-8.2/java/maven/bin/mvn`

[![在此处输入图像描述](../Images/669a171c6802c2cc1968710e3660ff25.png)](https://i.stack.imgur.com/htjrw.png)

# python - 组织一个大型 python 脚本

> ID：14026316
> 
> 赞同：4
> 
> 时间：2012-12-24T22:58:07.590
> 
> 标签：python, python-2.7

我一直在研究一个通用实用程序脚本，它基本上只接受用户输入来执行一些任务，比如打开程序。在这个程序中，我将名称“command”定义为 raw_input，然后使用 if 语句检查命令列表（下面的小示例）。

不断使用 if 语句会使程序运行缓慢，所以我想知道是否有更好的方法，例如命令表？我对编程很陌生，所以不知道如何做到这一点。

```
import os
command = raw_input('What would you like to open:')

if 'skype' in command:
    os.chdir('C:\Program Files (x86)\Skype\Phone')
    os.startfile('Skype.exe') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T23:03:00.677

您可以将命令保存在带有元组的字典中，并执行类似的操作来存储命令。

```
command = {}
command['skype'] = 'C:\Program Files (x86)\Skype\Phone', 'Skype.exe'
command['explorer'] = 'C:\Windows\', 'Explorer.exe' 
```

然后，您可以执行以下操作以根据用户输入执行正确的命令。

```
if raw_input.lower().strip() in command: # Check to see if input is defined in the dictionary.
   os.chdir(command[raw_input][0]) # Gets Tuple item 0 (e.g. C:\Program Files.....)
   os.startfile(command[myIraw_inputput][1]) # Gets Tuple item 1 (e.g. Skype.exe) 
```

[您可以在此处](http://docs.python.org/2/tutorial/datastructures.html)`Dictionaries`找到更多信息。`Tuples`

如果您需要允许多个命令，您可以用空格分隔它们并将命令[拆分](http://docs.python.org/2/library/stdtypes.html#str.split)为一个数组。

```
for input in raw_input.split():
    if input.lower().strip() in command: # Check to see if input is defined in the dictionary.
       os.chdir(command[input][0]) # Gets Tuple item 0 (e.g. C:\Program Files.....)
       os.startfile(command[input][4]) # Gets Tuple item 1 (e.g. Skype.exe) 
```

这将允许您发出类似的命令`skype explorer`，但请记住，没有拼写错误的空间，因此它们需要完全匹配，仅用空格分隔。作为一个例子，你可以写`explorer`，但不能`explorer!`。

# kendo-ui - 我了解如何将模板与脚本一起使用，但不与服务器控件一起使用

> ID：14026322
> 
> 赞同：1
> 
> 时间：2012-12-24T22:59:29.460
> 
> 标签：kendo-ui

现在我想做的是混合或服务器控件和javascript。我认为剑道服务器控件很优雅。如您所见，我拼命地试图找到如何访问网格中的可编辑属性但没有运气。我认为它会是

```
 var grid = $("#Grid").data("kendoGrid");
 grid.editable.template = function () { kendo.template($("#MyTemplate").html()) }; 
```

这个想法是，当用户单击编辑按钮时，他们会看到 #MyTemplate 而不是它的 kendo 默认 html 版本。也许，我需要朝不同的方向前进，请指导我。

# 这是我的完整代码，仅供参考。

```
 @model IEnumerable<Msh.Intranet.Models.ApiAdFileDisplayGridModel>
<script type="text/x-kendo-template" id="myTemplate">           
            <input data-bind="value: Id" name="Id"/>
        </script>
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.Id).Visible(false);
        columns.Bound(p => p.FileName).Visible(false);
        columns.Bound(p => p.FormNumber);
        columns.Bound(p => p.FormTitle);
        columns.Bound(p => p.Class);
        columns.Bound(p => p.SecondaryCategory).Title("Category") ;
        columns.Bound(p => p.RevisionDate).Format("{0:MM/dd/yyyy}");
        columns.Command(c =>
        {

            c.Edit();
            c.Destroy();
        });

    })
    .Selectable()
     .Groupable()
     .Pageable()
     .Filterable()
     //.Sortable()
           .ToolBar(tools =>
      {
          tools.Create();
      })
      .Editable(editor => editor.Mode(GridEditMode.PopUp))
     .DataSource(dataSource => dataSource
        .Ajax()

        //this tells kendo I am the primary key
            .Model(model => 
            { 
                model.Id(p => p.Id);
                model.Field(p => p.RevisionDate);
            })
        .Read(read => read.Url(@Url.Action("ApiAdFileDisplayGrid","api",null,null)).Type(HttpVerbs.Get))
        .Create(create=>create.Url(@Url.Action("ApiAdFileDisplayGrid","api",null,null)).Type(HttpVerbs.Post))
        .Update(update=>update.Url(@Url.Action("ApiAdFileDisplayGrid","api",null,null)).Type(HttpVerbs.Put))
        .Destroy(destroy=>destroy.Url(@Url.Action("ApiAdFileDisplayGrid","api",null,null)).Type(HttpVerbs.Delete))
    )
)
<script type="text/javascript">

    $(function () {
        var grid = $("#Grid").data("kendoGrid");

        //grid.bind("change", function () {
        //    alert("Change ");
        //});

        grid.bind("dataBound", function (data) {
            alert("dataBound");

        });

        grid.bind("edit", function (e) {

            if (e.model.isNew()) {

                //create
                alert("new");

            } else {

                //edit
                alert("edit");

            }

        })

    // WebAPI needs the ID of the entity to be part of the URL e.g. PUT /api/Product/80
    grid.dataSource.transport.options.update.url = function (data) {
        var baseUrl = "@Url.Content("~/api/ApiAdFileDisplayGrid/")" +data.Id;
        return baseUrl;
    }

    // WebAPI needs the ID of the entity to be part of the URL e.g. DELETE /api/Product/80
    grid.dataSource.transport.options.destroy.url = function(data) {
        var baseUrl = "@Url.Content("~/api/ApiAdFileDisplayGrid/")" + data.Id;
        return baseUrl;
    }
        grid.editable.template = function () { kendo.template($("#MyTemplate").html()) };
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T11:37:00.250

要自定义编辑器，您应该使用 MVC Editor 模板引擎。遵循[此](http://www.kendoui.com/code-library/mvc/grid/custom-popup-editor.aspx)代码库中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T16:02:33.240

我在剑道网站上找到了这个帖子，它给了我一个替代我做模板的方法： [http ://www.kendoui.c​​om/forums/mvc/grid/new-client-details-template.aspx#2427170](http://www.kendoui.com/forums/mvc/grid/new-client-details-template.aspx#2427170)

但是，看看如何与 kendo html 助手创建的 javascript 对象进行交互会很有趣。

# php - 将值传递给 php 文件以更改文件内的文本，然后强制下载相同的文件

> ID：14026324
> 
> 赞同：2
> 
> 时间：2012-12-24T22:59:46.760
> 
> 标签：php

下载链接：

```
<a href="download.php?words=2000&sort=popular&type=xml">Download php file</a> 
```

下载.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Home</title>
</head>
<body>
<h1>PHP file</h1>

<?php
function get_text($text)  
{  
   ....
}      

function get_time($time)  
{  
   ....
}    

$url = "http://api.xxx.com/info.php?words=".$_GET['words']."&sort=".$_GET['sort']."&type="$_GET['type'];
$xml = simplexml_load_file($url);
if (count($xml))
{
  foreach($xml->book as $book)
  {
    echo ....      
  }
}
?>

</body>
</html> 
```

download.php 是一个现成的 API php 脚本，用于为网站管理员提供上传到他们的 FTP。站长可以从表单中选择多个选项（例如：download.php?words=2000&sort=popular&type=xml），然后提交表单以获取他们自定义的 API 脚本。

这是在提交表单后将替换选项的行。：

```
$url = "http://api.xxx.com/info.php?words=".$_GET['words']."&sort=".$_GET['sort']."&type="$_GET['type']; 
```

这是强制下载的代码。但我不知道如何用 $content = ""; 包裹整个页面。我知道如何包装 HTML 代码，但如何在页面上包装 PHP 函数和代码？

```
header("Content-Disposition: attachment; filename="download.php");
print $content; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:20:32.550

不确定这是否是您想要的；但是您可以创建第二个脚本来调用第一个脚本，获取输出，然后将其与提到的标头一起发送：

```
<?php
$words = (int) $_GET['words'];
$sort = $_GET['sort'];

$url = sprintf("http://localhost/wherever/download.php?words=%d&sort=%s&type=xml", $words, $sort);
$content = file_get_contents($url);

header("Content-Disposition: attachment; filename="download.php");
print $content;
?> 
```

调用该文件“force_download.php”并让用户调用`<a href="force_download.php?words=2000&sort=popular&type=xml">Download php file</a>`。

# flash - 如何检测由于 Flash 崩溃导致的 YouTube iFrame 故障？

> ID：14026332
> 
> 赞同：1
> 
> 时间：2012-12-24T23:01:19.750
> 
> 标签：flash, error-handling, google-chrome-extension, youtube-javascript-api

我一直在研究 Google Chrome 扩展程序。我注意到 Flash 最近经常崩溃，我想让我的扩展程序从这样的事件中优雅地恢复。

[我发现一篇关于直接测试 Flash 元素的帖子，](https://stackoverflow.com/questions/3329022/detect-flash-plugin-crashes)但我使用的是 YouTube 的 iFrame API。当我尝试在 iFrame 上调用 SetVariable 时，毫不奇怪，它总是失败。

关于我可以检测到我的播放器崩溃以便我做出相应反应的其他方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:24:03.670

我没有这方面的经验，但我认为您可以为 API 提供的 onError 事件注册一个事件处理程序，或者您可以定期检查调用 getCurrentTime() 方法所用的时间。

# c# - 基于用户控制的程序

> ID：14026334
> 
> 赞同：1
> 
> 时间：2012-12-24T23:01:58.537
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, windows-store-apps

我正在尝试创建一个新的 Windows 应用商店应用程序，但在创建太多用户控件之前，我想知道一些我没有运气谷歌搜索的东西

如果我的程序只有一页，并且代码是基于用户控件的，那么是否可以使用 GoBack，或者我应该实现自己的方式来做到这一点？

如果我需要自己的方式来覆盖 GoBack，我可以在页面中覆盖 GoBack，还是应该为整个应用程序覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:36:45.803

如果您要保留页面的相同实例并且只切换显示的用户控件，那么您需要重新实现现有的导航框架。要使其工作，您需要调用`Frame.Navigate()`以在不同的页面实例之间切换。

为此，在您的情况下，您仍然可以只有一个页面类，而不是仅替换同一实例中的用户控件，您可以`Frame.Navigate()`使用相同的页面类调用，然后在其中根据您的参数显示正确的用户控件传入。在这种情况下，您可以使用现有的导航框架在页面实例之间导航。

# java - 如何在单击时更改 ImageButton 图像。我的代码不起作用

> ID：14026335
> 
> 赞同：2
> 
> 时间：2012-12-24T23:02:03.023
> 
> 标签：java, android

我不知道为什么我的代码不起作用。我已经声明了一个 ImageButton ，当用户单击图像时，我要增加`valHomeFouls`. 然后它被`valHomeFouls > 5`重置为0。

由于某种原因，它不会更改图像 onClick。

```
 // set the onClick listener for the foulsHome ImageButton
    btnFoulsHome.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            valFoulsHome++;

            if( valFoulsHome > 5 )
                valFoulsHome = 0;

            switch( valFoulsHome ) {
                case 5:
                    btnFoulsHome.setImageResource(R.drawable.fouls5);
                case 4:
                    btnFoulsHome.setImageResource(R.drawable.fouls4);
                case 3:
                    btnFoulsHome.setImageResource(R.drawable.fouls3);
                case 2:
                    btnFoulsHome.setImageResource(R.drawable.fouls2);
                case 1:
                    btnFoulsHome.setImageResource(R.drawable.fouls1);
                case 0:
                    btnFoulsHome.setImageResource(R.drawable.fouls0);
            }
        }
    }); 
```

谁能明白为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T23:21:51.267

您忘记了以下`break`陈述：

```
switch( valFoulsHome ) {
    case 5:
        btnFoulsHome.setImageResource(R.drawable.fouls5);
        break;
    case 4:
        btnFoulsHome.setImageResource(R.drawable.fouls4);
        break;
    case 3:
        btnFoulsHome.setImageResource(R.drawable.fouls3);
        break;
    case 2:
        btnFoulsHome.setImageResource(R.drawable.fouls2);
        break;
    case 1:
        btnFoulsHome.setImageResource(R.drawable.fouls1);
        break;
    case 0:
    default: // You should always have a default case
        btnFoulsHome.setImageResource(R.drawable.fouls0);
} 
```

没有`break`陈述，案件就会“失败”。这意味着如果`valFoulsHome == 2`代码调用这些行中的每一行：

```
btnFoulsHome.setImageResource(R.drawable.fouls2);
btnFoulsHome.setImageResource(R.drawable.fouls1);
btnFoulsHome.setImageResource(R.drawable.fouls0); 
```

这不是你想要的...

# ruby-on-rails - Rails has_many :through --> 我应该保留一个主键列吗？

> ID：14026338
> 
> 赞同：9
> 
> 时间：2012-12-24T23:02:26.730
> 
> 标签：ruby-on-rails, ruby, database-design, primary-key, has-many-through

我有 'author' 和 'book' 表，加入了 has_many ：通过表 'author_book'

据我所知，'author_book' 表上的 :id 主键字段没有任何意义......但在我提出这个想法之前，我只是想确认一下。那么，是否有任何理由将“id”列保留在 has_many :through 表中？

提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T23:13:03.410

留着它。稍后您会发现唯一标识符以最初不明显的方式得到回报。
与其他敏捷开发原则不同，最好提前解决此类数据质量问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T23:05:26.227

如果您有作者与书籍关系的独特之处，则需要`id`通过`AuthorBook`模型将其设置在此表中。在这种情况下，这听起来不太可能，如果需要，您可以稍后添加。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T23:05:53.480

如果是`has_many through`这样就意味着这 `author_book`是一个活跃的记录模型，所以请留下id。但是如果你使用`has_and_belongs_to_many`连接表不需要 id [http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)

# winjs - 枚举 WinJS 对象的事件/事件监听器

> ID：14026344
> 
> 赞同：1
> 
> 时间：2012-12-24T23:03:18.530
> 
> 标签：winjs

我在一个项目中使用纯 WinJS（没有 jQuery）并且遇到了一个让我难过的要求。

假设我有一个名为“bob”的 DOM 元素（尽管这可能不一定是 DOM 元素）。要附加事件侦听器，我会这样做：

```
bob.addEventListener('click', function ()
{
  // Some code goes here
}); 
```

没有什么能阻止我向“bob”添加大量事件侦听器，即使对于相同的事件名称（这很好，因为它们只是排队） - 这就是问题所在！

我需要能够枚举附加到给定对象的事件/侦听器，以便我可以在运行时选择性地替换或调整其中的一些。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:14:51.133

无法枚举使用 addEventListener 添加的事件。不推荐您添加事件的方式（至少我:)。您正在使用 addEventListener 但随后使用匿名方法。如果您这样做，那么您将永远无法删除该事件，因为您没有处理它。我建议创建您的函数，然后分配命名函数 ( `myelement.addEventListener("event", myfunction)`)。每次将事件添加到元素时，只需将其添加到集合（悬挂在元素本身的数组），然后您将获得事件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:14:29.853

事实证明，在某些情况下，您可以枚举附加的事件侦听器。

如果您在对象上使用“Events” Mixin，那么一旦您调用了其中一种混合方法（addEventListener、removeEventListener 或 dispatchEvent），您的目标对象将获得一个名为 _listeners 的属性（假设它不存在）。

举一个实际的例子，这里有一个函数，它计算使用这个 mixin 的对象的附加事件侦听器的数量：

```
/*
 * Counts the number of attached listeners
 */
 countListeners: function()
 {
    var count = 0;

    if (this._listeners)
    {
       var key;

       for (key in this._listeners)
       {
          if (this._listeners.hasOwnProperty(key))
          {
             count++;
          }
       }
    }

    return count;
 } 
```

希望这对某人有帮助！

G

# arrays - VBA：函数数组，ReDim 给出无效的 ReDim

> ID：14026346
> 
> 赞同：5
> 
> 时间：2012-12-24T23:03:41.207
> 
> 标签：arrays, function, vba, excel, subroutine

我正在使用一个函数来制作一个数组。输入也是一个数组。运行时它给我一个`invalid ReDim`编译错误。在此之前在子例程中运行并且`ReDim`运行良好，但现在我在函数中对其进行了更改，它给出了`invalid ReDim`编译错误。我在这里想念什么？

提前致谢！阿米尔

```
Public Function bmhussel(filemx As Variant)

rijaantal = UBound(filemx, 1)
kolomaantal = UBound(filemx, 2)

ReDim bmhussel(1 To rijaantal + 1, 1 To kolomaantal + 1)

For i = 1 To rijaantal
    bmhussel(i, 1) = filemx(i, 1)
    bmhussel(i, 2) = filemx(i, 3)
    bmhussel(i, 3) = filemx(i, 5)
    bmhussel(i, 4) = filemx(i, 28)
    bmhussel(i, 5) = bucket(filemx(i, 28)) 'buckets maken
next i

End Function 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T23:15:18.547

Welkom op 堆栈溢出。

如前所述，您不能重新调整功能本身。因此使用一个临时变量，最后将其内容传输到您的函数：

```
Public Function bmhussel(filemx As Variant) as Variant

Dim rijaantal As Long
Dim kolomaantal As Long
Dim tmpArray as Variant

rijaantal = UBound(filemx, 1)
kolomaantal = UBound(filemx, 2)

ReDim tmpArray (1 To rijaantal + 1, 1 To kolomaantal + 1)

For i = 1 To rijaantal
    tmpArray(i, 1) = filemx(i, 1)
    tmpArray(i, 2) = filemx(i, 3)
    tmpArray(i, 3) = filemx(i, 5)
    tmpArray(i, 4) = filemx(i, 28)
    tmpArray(i, 5) = bucket(filemx(i, 28)) 'buckets maken
next i

bmhussel = tmpArray

End Function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T23:09:58.603

`bmhussel`是您的函数的名称，而不是变量的名称。你不能`Redim`你的*功能*。

`ReDim bmhussel(1 To rijaantal + 1, 1 To kolomaantal + 1)`

# python - IndexError：索引超出范围

> ID：14026347
> 
> 赞同：0
> 
> 时间：2012-12-24T23:03:43.790
> 
> 标签：python

我有一个运行 16 次的循环，因为它读取的文件中有 16 行，我正在使用一个循环来读取时间戳的前两个字符。但我不知道如何防止 n 变量达到 17。我尝试使用 while 条件将 n 限制为 16，但无济于事。这是我的全部功能，我正在尝试为飓风艾琳的路径制作动画，详见[http://calicoproject.org/Calico_Python_GIS](http://calicoproject.org/Calico_Python_GIS)：

```
def drawIrene(win):
line = Line()
n = 0
for (x,y) in dots:
    time_stamp[n] = time_stamp[n][:2]
    time_stamp[n+1] = time_stamp[n+1][:2]
    time1 = abs(int(time_stamp[n]) - 12)
    time2 = abs(int(time_stamp[n+1]) - 12)
    wait_time = abs(int(time1) - int(time2))
    x, y = ll2xy(x, y)
    c = Circle(Point(x, y), int(eye_size[n]))
    line.append(Point(x,y))
    c.fill = Color(255, 255, 0, 62)
    c.draw(win)
    t = Polygon((x, y), (x+10, y+5), (x+int(movement_speed[n]), y-int(movement_speed[n])/2))
    t.fill = Color("orange")
    t.draw(win)
    print(time1)
    print(time2)
    print()
    #print (wait_time)
    wait(wait_time)
    if n < len(dots):
        n += 1
    else:
        break
line.draw(win)
line.border = 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:58:45.997

问题是您正在循环两个相同长度的序列，`dots`并且`time_stamp`. 但是，您在序列中向前看`time_stamp`，访问当前项目和下一个项目以计算`wait_time`值。这导致您`IndexError`最后一次通过循环，因为`n+1`索引指向列表末尾。

有几种不同的方法可以解决此问题。你可以修改你的数据结构，要么`dots`少一个元素，要么`time_stamp`多一个。或者你可以简单地少循环一次，如评论中所建议的那样。

但我认为最好的解决方案是更改循环中的逻辑，以便`wait_time`在第一个或最后一个循环中进行不同的计算。例如，您可以选择在最后一个周期没有延迟。

这是一些可以做到这一点的代码。它是最后一次通过的特殊情况，其中`n`等于`len(time_stamp)-1`，并且在这种情况下简单地设置`wait_time`为零。请注意，我是`n`从循环中的内置`enumerate`函数生成的`for`，因此不需要将其初始化为零或手动更新：

```
for n, (x, y) in enumerate(dots):
    if n < len(time_stamp)-1:
        time_stamp[n] = time_stamp[n][:2]
        time_stamp[n+1] = time_stamp[n+1][:2]
        time1 = abs(int(time_stamp[n]) - 12)
        time2 = abs(int(time_stamp[n+1]) - 12)
        wait_time = abs(int(time1) - int(time2))
    else: # special case n >= len(time_stamp)-1, which should be the last pass
        wait_time = 0
    x, y = ll2xy(x, y)
    c = Circle(Point(x, y), int(eye_size[n]))
    line.append(Point(x,y))
    c.fill = Color(255, 255, 0, 62)
    c.draw(win)
    t = Polygon((x, y), (x+10, y+5),
                (x+int(movement_speed[n]), y-int(movement_speed[n])/2))
    t.fill = Color("orange")
    t.draw(win)
    wait(wait_time) 
```

# c# - StatusStrip 中的标签出现问题

> ID：14026348
> 
> 赞同：2
> 
> 时间：2012-12-24T23:03:56.373
> 
> 标签：c#, winforms

所以我的`WinForms`应用程序带有`StatusStrip`. 在 this 里面`StatusTrip`，有一个`StatusLabel`（它**不是**默认`Label`的，因为某些原因不支持它）。

现在，当我设置 时`StatusLabel.IsLink = true;`，你会得到一个手形光标（太棒了！）。但是现在，如果你这样做`StatusLabel.Visible = false;`了，**整个** `StatusStrip`人现在就会有一个手形光标。再次使`StatusLabel`可见并不能解决它。

这对我来说似乎是 .NET 或 C# 错误。

我的问题是：是否有任何解决方法，我不知道？通过修复这个手形光标错误**或** `Label`在`StatusStrip`? 我发现，`MessageBox`在您使标签不可见之前放置一个恰到好处时，它并没有做这个奇怪的错误。

[您可以在此处](https://dl.dropbox.com/u/6166898/StatusLabelBug.zip "测试解决方案")下载测试解决方案。在`Main.cs`文件中有一行`MessageBox`可以取消注释。自己试试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:34:44.183

您可以尝试将 StatusStrip 的光标设置回默认值

```
private void toolStripStatusLabel1_Click(object sender, EventArgs e)
{
    // UNCOMMENT THE LINE BELOW TO "FIX" IT

    //MessageBox.Show("It's not doing the bug when showing this message.");
    toolStripStatusLabel1.Visible = false;
    statusStrip1.Cursor = Cursors.Default;
} 
```

# google-maps - 如何在谷歌地图事件中访问“这个”标记？

> ID：14026350
> 
> 赞同：1
> 
> 时间：2012-12-24T23:04:38.243
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有任意数量的谷歌地图标记。我正在遍历它们并添加事件侦听器：

```
for ( i in markers )
{
  google.maps.event.addListener(markers[i], 'dragend', function()
  {
    console.log( this ); //<-- this doesn't work
  }
} 
```

使用`this`似乎不起作用。也试过：

```
for ( i in markers )
{
  google.maps.event.addListener(markers[i], 'dragend', function()
  {
    console.log( markers[i] ); //<-- this doesn't work either
  }
} 
```

如何访问触发事件的相对标记对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:45:59.207

您的第一个示例应该按预期工作，但是存在语法错误，缺少括号。

```
for (var i in markers )
{
  google.maps.event.addListener(markers[i], 'dragend', function()
  {
    console.log( this); 
  });
//-^
} 
```

演示：http: [**//jsfiddle.net/doktormolle/w6HaK/**](http://jsfiddle.net/doktormolle/w6HaK/)

# javascript - 为什么 typeof array[0] == 'undefined' 不起作用？

> ID：14026352
> 
> 赞同：1
> 
> 时间：2012-12-24T23:04:55.197
> 
> 标签：javascript, undefined, typeof

我想在对其执行操作之前检查数组中的下一个元素是否存在，但我无法检查它是否未定义。例如：

```
// Variable and array are both undefined
alert(typeof var1);   // This works
alert(typeof arr[1]); // This does nothing

var arr = [1,1];
alert(typeof arr[1]); // This works now 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T23:09:01.303

```
alert(typeof arr[1]); // This does nothing 
```

它没有做任何事情，因为它失败并出现错误：

```
ReferenceError: arr is not defined 
```

如果您尝试这种方式：

```
var arr = [];
alert(typeof arr[1]); 
```

然后你会得到你所期望的。但是，执行此检查的更好方法是使用`.length`数组的属性：

```
// Instead of this...
if(typeof arr[2] == "undefined") alert("No element with index 2!");

// do this:
if(arr.length <= 2) alert("No element with index 2!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:13:47.493

使用数组时，在访问数组索引之前，您还应该检查数组本身。

错误的：

```
if (arr[0] == ...) 
```

好的：

```
if (typeof arr != "undefined" and arr[0]==...... 
```

# jquery-mobile - 为 jquery mobile 自定义 jtsage 日期框

> ID：14026356
> 
> 赞同：0
> 
> 时间：2012-12-24T23:05:26.717
> 
> 标签：jquery-mobile, datebox

我正在使用[这个非常棒的面向 jquery 移动设备的日期选择器](http://dev.jtsage.com/jQM-DateBox2/)，我想根据设备大小对其进行自定义。我看到了一些指向修改的建议，`CSS`但我无法捕获创建日历附带的弹出对话框的事件。

有没有`jsfiddle`我可以看看和学习的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:36:45.177

查看您提供的页面上的示例，它似乎绑定到 vmouseclick 事件。因此，您应该能够根据需要使用`click`, 。`vmousedown``vmouseup`

因此，如果您的 HTML 如下：

```
<label for="mydate">Some Date</label>

<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "datebox"}'> 
```

你的 JQM 会像：

```
$("mydate").click(function(){
    // Do something
}); 
```

我没有看到任何用于在打开时调整 DateBox 大小的配置选项。因此，您需要检查`DIV`创建时的 CSS 和类设置，然后添加您自己的 CSS 以覆盖他们使用的 CSS ( `<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />`)，或下载 CSS 并对其进行编辑。

对此没有默认的 jsFiddle，但如果您愿意，我将一个示例移到一个示例中供您使用：http: [//jsfiddle.net/Twisty/pNQeD/](http://jsfiddle.net/Twisty/pNQeD/)

# php - PHP 多复选框数组

> ID：14026361
> 
> 赞同：51
> 
> 时间：2012-12-24T23:06:38.430
> 
> 标签：php, arrays, variables, checkbox

我在这里查看了一些示例，但其中很多对于我对 PHP 的掌握来说太高级了，或者他们的示例对于他们自己的项目来说太具体了。我目前正在努力处理 PHP 表单的一个非常基本的部分。

我正在尝试创建一个带有几个复选框的表单，每个复选框都分配了一个不同的值，我希望将它们发送到一个变量（数组？），我可以稍后回显/使用，在我的情况下，我将发送选中的值一封电邮。

到目前为止，我已经尝试了一些变化，但我最接近它的是这个......

```
<form method='post' id='userform' action='thisform.php'>
<tr>
    <td>Trouble Type</td>
    <td>
    <input type='checkbox' name='checkboxvar' value='Option One'>1<br>
    <input type='checkbox' name='checkboxvar' value='Option Two'>2<br>
    <input type='checkbox' name='checkboxvar' value='Option Three'>3
    </td>
</tr>
</table>
<input type='submit' class='buttons'>
</form>

<?php
$checkboxvar[] = $_REQUEST['checkboxvar'];
?> 
```

我会将 $checkboxvar[] 回显到我的电子邮件中。我会完全错了吗？我的另一个想法是使用大量的 if 语句。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-24T23:08:52.503

```
<form method='post' id='userform' action='thisform.php'> <tr>
    <td>Trouble Type</td>
    <td>
    <input type='checkbox' name='checkboxvar[]' value='Option One'>1<br>
    <input type='checkbox' name='checkboxvar[]' value='Option Two'>2<br>
    <input type='checkbox' name='checkboxvar[]' value='Option Three'>3
    </td> </tr> </table> <input type='submit' class='buttons'> </form>

<?php 
if (isset($_POST['checkboxvar'])) 
{
    print_r($_POST['checkboxvar']); 
}
?> 
```

您将表单名称作为数组传递，然后您可以使用 var 本身访问所有选中的框，该 var 本身就是一个数组。

要将选中的选项回显到您的电子邮件中，您可以执行以下操作：

```
echo implode(',', $_POST['checkboxvar']); // change the comma to whatever separator you want 
```

**请记住，您应该始终根据需要清理您的输入。**

作为记录，官方文档存在： http: [//php.net/manual/en/faq.html.php#faq.html.arrays](http://php.net/manual/en/faq.html.php#faq.html.arrays)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-01T20:01:53.080

`[]`在输入标签中添加属性的名称

```
 <form action="" name="frm" method="post">
<input type="checkbox" name="hobby[]" value="coding">  coding &nbsp
<input type="checkbox" name="hobby[]" value="database">  database &nbsp
<input type="checkbox" name="hobby[]" value="software engineer">  soft Engineering <br>
<input type="submit" name="submit" value="submit"> 
</form> 
```

对于 PHP 代码：

```
<?php
 if(isset($_POST['submit']){
   $hobby = $_POST['hobby'];

   foreach ($hobby as $hobys=>$value) {
             echo "Hobby : ".$value."<br />";
        }
}
?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-19T07:13:06.597

试试这个，通过 for Loop

```
<form method="post">
<?php
for ($i=1; $i <5 ; $i++) 
{ 
    echo'<input type="checkbox" value="'.$i.'" name="checkbox[]"/>';
} 
?>
<input type="submit" name="submit" class="form-control" value="Submit">  
</form>

<?php 
if(isset($_POST['submit']))
{
    $check=implode(", ", $_POST['checkbox']);
    print_r($check);
}     
?> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-24T23:09:12.597

您需要使用方括号表示法将值作为数组发送：

```
<form method='post' id='userform' action='thisform.php'>
<tr>
    <td>Trouble Type</td>
    <td>
    <input type='checkbox' name='checkboxvar[]' value='Option One'>1<br>
    <input type='checkbox' name='checkboxvar[]' value='Option Two'>2<br>
    <input type='checkbox' name='checkboxvar[]' value='Option Three'>3
    </td>
</tr>
</table>
<input type='submit' class='buttons'>
</form> 
```

但请注意，只会发送仅选中复选框的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-27T07:56:21.080

还请记住，您可以像这样将自定义索引包含到发送到服务器的数组中

```
<form method='post' id='userform' action='thisform.php'>
<tr>
    <td>Trouble Type</td>
    <td>
    <input type='checkbox' name='checkboxvar[4]' value='Option One'>4<br>
    <input type='checkbox' name='checkboxvar[6]' value='Option Two'>6<br>
    <input type='checkbox' name='checkboxvar[9]' value='Option Three'>9
    </td>
</tr>
<input type='submit' class='buttons'>
</form> 
```

当您想要使用`id`服务器阵列中的单个对象`accounts` *（例如）*将数据发送回服务器并在服务器上识别相同时，这特别有用

```
<form method='post' id='userform' action='thisform.php'>
<tr>
    <td>Trouble Type</td>
    <td>
    <?php foreach($accounts as $account) { ?>
        <input type='checkbox' name='accounts[<?php echo $account->id ?>]' value='<?php echo $account->name ?>'>
        <?php echo $account->name ?>
        <br>
    <?php } ?>
    </td>
</tr>
<input type='submit' class='buttons'>
</form>

<?php 
if (isset($_POST['accounts'])) 
{
    print_r($_POST['accounts']); 
}
?> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-06T08:35:16.543

```
if (isset($_POST['submit'])) {

for($i = 0; $i<= 3; $i++){

    if(isset($_POST['books'][$i]))

        $book .= ' '.$_POST['books'][$i];
} 
```

# javascript - 调试 javascript 事件以使弹出框工作

> ID：14026366
> 
> 赞同：2
> 
> 时间：2012-12-24T23:07:06.093
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个页面上有很多 Javascript。包括流行的 Twitter 引导程序的弹出窗口小部件，它不起作用。特别是如果我将鼠标悬停在应该启动“弹出框”的图标上。[我知道 HTML/JS 是正确的，因为它与这个工作 jsfiddle: simple working example](http://jsfiddle.net/ksnyde/4HxtD/1/)完全相同。

这是 HTML 内联：

```
 <span id="container">
<i id="common-actions-info" 
    class="icon-info-sign" 
    rel="popover"
    data-trigger='hover'
    data-delay={show:10,hide:500}
    data-placement="right"
    data-title="Common Actions" 
    data-content="A list of actions that you have been using frequently. Choosing any of these actions will open up a new quick entry form to add another of these items."></i> 
```

​然后我将popover javascript与：

```
$("[rel=popover]").popover();​ 
```

在我更复杂的“真实环境”中，我可以运行

> $("[rel=popover]").popover('显示/隐藏')

命令并且有效，但是当我将鼠标悬停在图标上时，它只是没有得到显示它的信号。无论如何，我认为问题在于其他一些 JS 正在捕获悬停事件并且没有触发弹出框的显示。

有没有一种好方法可以使用 Chrome 的调试器来观察 DOM 事件并追踪这里发生的事情？

## 更新：

我一直在查看 Chrome 开发者工具的元素选项卡中的“事件监听器”。虽然我仍然对它提供的信息树有点不知所措，但我发现了一个重要模式：在“popover”插件工作的页面上，您会在我的小部件上找到“mouseover”和“mouseout”事件侦听器guess 负责打开和关闭小部件的显示。在它不起作用的页面中，这些事件不存在（到目前为止，我所看到的是根本没有听众）。

有人有什么主意吗：

1.  与正在设置的 Bootstraps 侦听器有什么冲突？
2.  我怎样才能解决这个问题而不会在头顶上失去更多的头发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:27:34.920

您可以使用名为 Firebug 的 Chrome/Firefox 插件。

安装它，打开它，转到 DOM 选项卡并刷新您的页面。它将向您展示 DOM 操作、函数执行......一切的详细概述。

看看这个页面：[https](https://getfirebug.com/dom) ://getfirebug.com/dom 。它将为您提供 Firebug DOM 浏览器的基本功能。

这也是一个很好的教程： http: [//www.softwareishard.com/blog/firebug/firebug-tip-log-dom-events/](http://www.softwareishard.com/blog/firebug/firebug-tip-log-dom-events/)

**编辑 ：**

有一种方法可以捕获事件。这不是最好的解决方案，但如果其他一些插件/框架控制了所需的容器，它将帮助您：

假设您将点击事件绑定到 i#common-actions-info

```
$('i#common-actions-info').click(function() { console.log('clicked!') }); 
```

然后，您可以使用此代码查看绑定到 i#common-actions-info 的事件：

```
var clickEvents = $('i#common-actions-info').data("events").click;
jQuery.each(clickEvents, function(key, handlerObj) {
    console.log(handlerObj.handler) // will print "function() { console.log('clicked!') }"
}) 
```

# php - SQL 数据库值回显两次

> ID：14026367
> 
> 赞同：0
> 
> 时间：2012-12-24T23:07:07.443
> 
> 标签：php, mysql, sql

数据库：

*   表 #1: xx_users (id, name, user_id, location, network)
*   表 #2: xx_questions (id, user_id, time)

代码：

```
$friends = $facebook->api('/me/friends');
$arr = $friends['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}

$sql = "SELECT q.*, u.location, u.network
            FROM xx_questions q 
            JOIN xx_users u 
            ON q.user_id = u.user_id
            AND (q.user_id = $user) OR
            q.user_id IN (".implode(',', $friend_ids_arr).") OR
            u.location = (SELECT location FROM xx_users WHERE user_id = $user) OR
            u.network = (SELECT network FROM xx_users WHERE user_id = $user)
            ORDER BY q.time DESC";

$data = mysql_query($sql) or die(mysql_error());

while ($row = mysql_fetch_assoc($data)) {

if ($row['anon'] == 1) {
    $asker = "<span style='color: #333;'>Anonymous</span>";
}

else {
    $asker_name = json_decode(file_get_contents("http://graph.facebook.com/".$row['user_id']))->name;
    $asker = "<a href='user.php?id=".$row['user_id']."'><b>".$asker_name."</b></a>";
}

echo "<div class='question'>";
echo "<a href='q.php?id=".$row[id]."' class='left'>".$row['question']."</a><span style='color: #666'>&nbsp;";

$sql2 = "SELECT * FROM xx_answers WHERE question_id = '".$row[id]."'";
$result = mysql_query($sql2);
$xxx = mysql_num_rows($result);
echo "($xxx)";

echo "</span>";
echo "<div class='right'><span style='color: #999'>";

$to_time = strtotime("now");
$from_time = strtotime(".$row[time].");
$since = $to_time-$from_time;

time_since($since);

echo " by <a href='user.php?id=".$row['user_id']."'><b>".$asker."</b></a></span></div>";
echo "<div style='clear:both;'></div>";
echo "</div>";
} 
```

我正在使用此代码来回显数据库中的三种问题：

1.  用户与海报的 Facebook 好友在哪里
2.  用户与发布者位于同一位置的位置
3.  用户与发布者共享网络的位置

除了所有值都回显两次之外，这一切都很好。奇怪的是，当我只回显上述 3 个中的一个时，这些值只会按预期回显一次。知道为什么会这样吗？

# algorithm - 使用 O(1) 辅助存储空间删除二叉树中的所有节点？

> ID：14026370
> 
> 赞同：12
> 
> 时间：2012-12-24T23:07:48.787
> 
> 标签：algorithm, data-structures, binary-tree, big-o, space-complexity

[删除二叉树](http://en.wikipedia.org/wiki/Binary_tree)中所有节点的标准算法使用**[后序遍历](http://en.wikipedia.org/wiki/Tree_traversal#Postorder)**这些节点：

```
if (root is not null) {
   recursively delete left subtree
   recursively delete right subtree
   delete root
} 
```

该算法使用 O(h) 辅助存储空间，其中 h 是树的高度，因为在递归调用期间存储堆栈帧所需的空间。但是，它运行时间为 O(n)，因为每个节点都被访问一次。

是否有一种算法可以在不牺牲运行时间的情况下仅使用 O(1) 辅助存储空间来删除​​二叉树中的所有节点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-24T23:07:48.787

通过使用基于**[树旋转](http://en.wikipedia.org/wiki/Tree_rotation)**的算法，确实可以使用 O(n) 和 O(1) 辅助存储空间删除二叉树中的所有节点。

给定具有以下形状的二叉树：

```
 u
          / \
         v   C
        / \
       A   B 
```

这棵树的右旋转将节点 v 拉到节点 u 上方，并产生以下树：

```
 v
       / \
      A   u
         / \
        B   C 
```

请注意，树的旋转可以在 O(1) 时间和空间内完成，只需将树的根更改为 v，将 u 的左孩子设置为 v 的前右孩子，然后将 v 的右孩子设置为 u。

在这种情况下，树旋转很有用，因为右旋转总是会将树的左子树的高度减一。这很有用，因为一个聪明的观察：如果树的根没有左子，删除它是非常容易的。特别是，如果树的形状像这样：

```
 v
      \
       A 
```

然后我们可以通过删除节点 v 来删除树中的所有节点，然后删除其子树 A 中的所有节点。这就引出了一个非常简单的删除树中所有节点的算法：

```
while (root is not null) {
    if (root has a left child) {
        perform a right rotation
    } else {
        delete the root, and make the root's right child the new root.
    }
} 
```

该算法显然只使用 O(1) 存储空间，因为它最多需要恒定数量的指针来进行旋转或更改根，并且这些指针的空间可以在循环的所有迭代中重复使用。

此外，可以证明该算法也可以在 O(n) 时间内运行。直观地说，可以通过查看给定边缘可以旋转多少次来看到这一点。首先，请注意，每当执行右旋转时，从节点到其左子节点的边将转换为从前一个子节点返回其父节点的右边。接下来，请注意，一旦我们执行将节点 u 移动到节点 v 的右子节点的旋转，我们将永远不会再接触节点 u，直到我们删除节点 v 和 v 的所有左子树。因此，我们可以通过注意树中的每条边最多与其父节点一起旋转一次来限制将要完成的总旋转次数。因此，最多完成 O(n) 次旋转，每次旋转都需要 O(1) 时间，并且恰好完成 n 次删除。

如果有帮助，我有**[这个算法的 C++ 实现](http://keithschwarz.com/interesting/code/?dir=inplace-tree-delete)**，以及对算法行为的更深入分析。它还包括算法所有步骤的正确性的正式证明。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T23:36:05.533

让我从一个严肃的笑话开始：如果您将 BST 的根设置为空，您实际上会删除树中的所有节点（垃圾收集器将使空间可用）。虽然措辞是特定于 Java 的，但这个想法也适用于其他编程语言。我提到这一点是为了以防你参加工作面试或参加考试。

否则，您所要做的就是使用`DSW algorithm`. 基本上将树变成主干，然后像删除`linked list`. 空间 O(1) 和时间 O(n)。你应该在任何教科书或网上找到关于 DSW 的讨论。

基本上 DSW 用于平衡 BST。但是对于您的情况，一旦您获得主干，而不是平衡，您就像删除链表一样删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-30T03:11:47.087

*算法 1*，**O(n)**时间和**O(1)**空间：立即删除节点，除非它有两个孩子。否则到达最左边的节点反转“左”链接以确保所有节点都可以访问 - 最左边的节点成为新的根：

```
void delete_tree(Node *node) {
    Node *p, *left, *right;

    for (p = node; p; ) {
        left = p->left;
        right = p->right;
        if (left && right) {
            Node *prev_p = nullptr;
            do {
                p->left = prev_p;
                prev_p = p;
                p = left;
            } while ((left = p->left) != nullptr);
            p->left = p->right;
            p->right = prev_p;       //need it on the right to avoid loop
        } else {
            delete p;
            p = (left) ? left : right;
        }
    }
} 
```

*算法 2*，**O(n)**时间和**O(1)**空间：深度优先遍历节点，将子链接替换为父链接。每个节点在向上的过程中被删除：

```
void delete_tree(Node *node) {
    Node *p, *left, *right;
    Node *upper = nullptr;

    for (p = node; p; ) {
        left = p->left;
        right = p->right;
        if (left && left != upper) {
            p->left = upper;
            upper = p;
            p = left;
        } else if (right && right != upper) {
            p->right = upper;
            upper = p;
            p = right;
        } else {
            delete p;
            p = upper;
            if (p)
                upper = (p->left) ? p->left : p->right;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-24T17:45:12.593

我对上面所有需要复杂操作的答案感到惊讶。

通过简单地将所有递归调用替换为搜索节点并跟踪当前节点的父节点的循环，可以使用 O(1) 额外存储从 BST 中删除节点。使用递归更简单，因为递归调用会自动将搜索节点的所有祖先存储在堆栈中。但是，不必存储所有祖先。只需要存储搜索到的节点和它的父节点，这样搜索到的节点就可以被取消链接。存储所有的祖先，简直就是浪费空间。

Python 3 中的解决方案如下。不要被看似递归的调用`delete`--- 这里的最大递归深度是 2 所迷惑，因为第二次调用 delete 保证会导致删除基本情况（包含搜索值的根节点）。

```
class Tree(object):
    def __init__(self, x):
        self.value = x
        self.left = None
        self.right = None

def remove_rightmost(parent, parent_left, child):
    while child.right is not None:
        parent = child
        parent_left = False
        child = child.right
    if parent_left:
        parent.left = child.left
    else:
        parent.right = child.left
    return child.value

def delete(t, q):
    if t is None:
        return None

    if t.value == q:
        if t.left is None:
            return t.right
        else:
            rightmost_value = remove_rightmost(t, True, t.left)
            t.value = rightmost_value
            return t

    rv = t
    while t is not None and t.value != q:
        parent = t
        if q < t.value:
            t = t.left
            parent_left = True
        else:
            t = t.right
            parent_left = False

    if t is None:
        return rv

    if parent_left:
        parent.left = delete(t, q)
    else:
        parent.right = delete(t, q)

    return rv

def deleteFromBST(t, queries):
    for q in queries:
        t = delete(t, q)
    return t 
```

# python - Python 操作 % 不起作用？

> ID：14026371
> 
> 赞同：0
> 
> 时间：2012-12-24T23:07:50.410
> 
> 标签：python, python-requests, operation

我似乎无法让这个工作，不能有人指出我正确的方向吗？如果我在没有提示的情况下输入值，但当我这样做时，它会起作用，我会出错。

```
username1 = raw_input('Enter Username:\n')
password = raw_input('Enter Password:\n')
r = requests.get("https://linktoasp.net/",auth=HttpNtlmAuth("domain\\%s",password),cookies=jar) % (username1) 
```

错误：

> Traceback（最近一次通话最后一次）：文件“attend_punch.py​​”，第 32 行，在
> 
> ```
> r = requests.get("https://linktoasp.netserver/homeportal/default.aspx",auth=HttpNtlmAuth("domain\\%r",password),cookies=jar) 
> ```
> 
> % (username1) TypeError: %: 'Response' 和 'str' 不支持的操作数类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T23:12:38.883

你可以试试这个

```
auth = HttpNtlmAuth("domain\\%s" % username1, password), cookies = jar) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T23:13:02.067

你可能想要的是：

```
r = requests.get(
        "https://linktoasp.net/",
         auth=HttpNtlmAuth("domain\\%s" % username1,password),cookies=jar) 
```

为了用 进行字符串插值`%`，`%`和 值需要紧跟在字符串后面：

```
"domain\\%s" % username1 
```

而不仅仅是排在后面：

```
HttpNtlmAuth("domain\\%s", ...) % username1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T23:14:45.677

该`%`符号在 Python 中可以有 2 种含义：

*   模运算符，它将为您提供一个 int 除以另一个的余数。这通常用于 2 个数字。
*   字符串格式化运算符，位于字符串之后，用于将占位符替换为实际值。这就是你想要的，但你没有把它放在字符串之后，所以 Python 将它解释为模运算符，并且由于它没有为任何对象定义（仅适用于`int` *通常*），因此引发了该异常。

# design-patterns - 这是装饰器模式（向对象添加数据）的示例吗？

> ID：14026380
> 
> 赞同：0
> 
> 时间：2012-12-24T23:09:29.943
> 
> 标签：design-patterns, decorator

我需要向对象添加额外的数据——但我不需要添加功能。因此，以下是经典 GOF 装饰器模式的示例吗？

```
class ClassIWantToDecorate
{
    public string GetData() { return "data"; }
}

class Decorator
{
    private ClassIWantToDecorate _classIWantToDecInstance = null;
    private string _additionalData;
    public Decorator(ClassIWantToDecorate classIWantToDec, string additionalData)
    {
        _classIWantToDecInstance = classIWantToDec;
        _additionalData = additionalData;
    }

    public string DataINeed()
    {
        return _classIWantToDecInstance.GetData();
    }

    public string AdditionalDataINeed()
    {
        return _additionalData;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:22:28.070

不，我会说这只是[composition](http://en.wikipedia.org/wiki/Object_composition)。

装饰器将是这样的：

```
interface DataINeedProvider {
    string DataINeed();
}

class LoggingDecorator implements DataINeedProvider
{
    private DataINeedProvider _classIWantToDecInstance = null;
    private Logger logger = new Logger();
    public LoggingDecorator(DataINeedProvider classIWantToDec) {
        _classIWantToDecInstance = classIWantToDec;
    }

    public string DataINeed()
    {
        logger.log("DataINeed has been called");
        return _classIWantToDecInstance.DataINeed();
    }
} 
```

PS：抱歉，如果这不是有效的 C# 语法。我是一名 Java 开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:23:14.373

你的实现的问题是你的装饰器接口与被装饰对象的接口不兼容。

一个有效的装饰器解决方案是：

```
interface ClassIWantToDecorateInterface {
  public string GetData();
}

class ClassIWantToDecorate implements ClassIWantToDecorateInterface {
    public string GetData() { return "data"; }
}

class Decorator implements ClassIWantToDecorateInterface {
    private ClassIWantToDecorateInterface _classIWantToDecInstance = null;
    private string _additionalData;
    public Decorator(ClassIWantToDecorateInterface classIWantToDec, string additionalData)
    {
        _classIWantToDecInstance = classIWantToDec;
        _additionalData = additionalData;
    }

    public string GetData() {
        return _classIWantToDecInstance.GetData();
    }

    public string AdditionalDataINeed() {
        return _additionalData;
    }
} 
```

（我使用 java 语法是因为我不确定您使用的是 C# 还是 Java。根据语法它可能是两者）

# android - Android：无法在 Nexus7/10 和其他平板电脑上安装我的应用

> ID：14026384
> 
> 赞同：0
> 
> 时间：2012-12-24T23:10:07.203
> 
> 标签：android, google-play, nexus-7

我无法在 Nexus 7 上从 Google Play 安装我的应用程序。它告诉我该设备不受支持，并且在不受支持的设备中我看到很多平板电脑，即使我可以直接在设备上安装 .apk 并且它可以工作在原生大小。

minSdkVersion 是 7，我试过 targetSdkVersion 8 和 17，结果是一样的。

我做错了什么？

是因为任何使用许可吗？

**更新：**所有权限中最少的：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:14:52.300

这通常是由于清单中的使用权限未声明为不需要。（即 android:required="false"）。以我个人的经验，涉及相机的权限通常是罪魁祸首

更多信息直接来自[开发者页面：](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)

> 如果您请求与硬件相关的权限（例如 CAMERA），Google Play 会假定您的应用程序需要底层硬件功能，并从不提供该功能的设备中过滤掉该应用程序。
> 
> 要控制过滤，请始终在元素中明确声明硬件功能，而不是依靠 Google Play 来“发现”元素中的需求。然后，如果要禁用对特定功能的过滤，可以在声明中添加 android:required="false" 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:55:41.633

我不得不添加一些`<uses-feature>`

**重要提示：**所有内容都必须小写。最初我尝试使用大写，如在类声明中，但它不起作用

```
<uses-feature android:name="android.hardware.telephony" android:required="false" />
<uses-feature android:name="android.hardware.location" android:required="false" />
<uses-feature android:name="android.hardware.location.network" android:required="false" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" /> 
```

`android.hardware.telephony`足以让它在 Nexus 7/10 和所有这些平板电脑上运行。

# rspec - Rspec render_template 等效于 Sinatra？

> ID：14026390
> 
> 赞同：1
> 
> 时间：2012-12-24T23:10:49.710
> 
> 标签：rspec, sinatra, rspec-rails

我目前正在构建一个 Sinatra 应用程序，它将作为 API 的一部分输出 JSON 模板。在使用 rails 和 rspec-rails gem 进行测试时，我可以调用：

```
response.should render_template('template-name') 
```

但是，由于我没有使用 Rails，所以我假设这不起作用。Sinatra 用于测试 json 输出的替代方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-25T13:35:35.993

这里有一些[关于使用 RSpec 和 RSpec 测试的文档](http://www.sinatrarb.com/testing.html)，但这就是我设置我的东西的方式。通过将应用程序包装在模块的类方法中，可以更轻松地在规范中运行，然后只需通过验证响应`last_response.body`（这是您问题的简短答案）。

```
# config.ru

require 'rubygems'
require "bundler/setup"

root = File.expand_path File.dirname(__FILE__)
require File.join( root , "./app/config.rb" )

# everything was moved into a separate module/file 
# to make it easier to set up tests

map "/" do
  run HelloWorld.app
end 
```

* * *

```
# app/config.rb
require 'main'

module HelloWorld
  def self.app
    Rack::Builder.app do
      # middleware setup here, cookies etc
      run App
    end
  end
end 
```

* * *

```
# app/main.rb
require 'sinatra/base'

module HelloWorld
  class App < Sinatra::Base
    get "/", :provides => :json do
      {key: "value"}.to_json
    end
  end
end 
```

* * *

```
# spec/spec_helper.rb

require 'rspec'
Spec_dir = File.expand_path( File.dirname __FILE__ )

require 'rack/test'

Dir[ File.join( Spec_dir, "/support/**/*.rb")].each do |f|
  require f
end 
```

* * *

```
# spec/support/shared/all_routes.rb

require 'hello_world'  # <-- your sinatra app

shared_context "All routes" do
  include Rack::Test::Methods
  let(:app){
    HelloWorld.app 
  }
end

shared_examples_for "Any route" do
  subject { last_response }
  it { should be_ok }
end 
```

* * *

```
# spec/hello_world_spec.rb
require 'spec_helper'

describe 'getting some JSON' do
  include_context "All pages"

  let(:expected) {
    '{"key": "value"}'
  }

  before do
    get '/', {}, {"HTTP_ACCEPT" => "application/json" }
  end
  it_should_behave_like "Any route"

  subject { last_response.body }
  it { should == expected }
end 
```

# jquery - 使用 jQuery 查找从一个属性到另一个属性的匹配值

> ID：14026391
> 
> 赞同：1
> 
> 时间：2012-12-24T23:10:50.130
> 
> 标签：jquery, attributes

好的，在这个例子中，我有一个变量可以帮助我加载一些 ajax。

```
var postname = itsname; 
```

我需要能够从属性 data-postname 中找到匹配值并使用 jQuery 获取 data-slider 的值。所以在这个例子中，我需要获得 2 才能加载正确的幻灯片。

```
<div id="mydiv">
    <a data-slider="0" data-postname="somename" href="#"></a>
    <a data-slider="1" data-postname="anothername" href="#"></a>
    <a data-slider="2" data-postname="itsname" href="#"></a>
</div> 
```

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:13:01.700

```
var postname = "itsname",
    slider = $("#mydiv a[data-postname='" + postname + "']").data("slider");

console.log(slider);  // "2" 
```

# python - 使用 pymongo 将当前时间插入 mongo

> ID：14026392
> 
> 赞同：11
> 
> 时间：2012-12-24T23:11:00.757
> 
> 标签：python, mongodb, pymongo

当创建新文档时，我正在尝试以特定格式存储当前时间。这是调用无效方法的代码部分：

```
 dbm = AccountsDB()
    dbm.store_info(user_info) 
```

这是实际的 AccountsDB() 类：

```
#! /usr/bin/env python2.7

import pymongo
import datetime
import time

class AccountsDB():
    def store_info(self, user_info=None):
        try:
            conn = pymongo.Connection('localhost', 27017)
            db_name = 'accountsdb'
            coll_name = 'user_info'

            db = conn[db_name]
            coll = db[coll_name]
            print "Successfully connected to '%s'" % db_name

            now = datetime.datetime.now()
            if user_info is not None:
                now = datetime.datetime.now()
                ''' 
                This is not Working...

                created_time = {
                    'created_time': {
                        'day': now.day,
                        'month': now.month,
                        'year': now.year,
                        'hour': now.hour,
                        'minute': now.minute,
                        'second': now.second,
                        'microsecond': now.microsecond
                    }
                }
                user_info.append(created_time)
                '''
                print user_info
                coll.insert(user_info)
            else:
                print 'No user_info'
            print "Data where stored in database"
        except:
            print "Some Error Occured" 
```

我希望文档看起来像这样：

```
> db.user_info.find().pretty()
{
    "_id" : ObjectId("50d8ded1bdbff3401c252f1a"),
    "ip" : "24.xx.xx.xx",
    "region_code" : "MA",
    "region_name" : "Massachusetts",
    "secret_answer2" : "Mercedes",
    "l_name" : "Flores",
    "f_name" : "Jacob",
    "country_name" : "United States",
        // I want to add next objects to the document
        'created_time': {
            'day': 10,
            'month': 11,
            'year': 12,
            'hour': 11,
            'minute': 11,
            'second': 22,
            'microsecond': 1234
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-24T23:35:09.527

看起来您希望 python 代码在 pymongo 调用中将当前时间传递给 mongo。你这个：

```
>>> from datetime import datetime
>>> datetime.now()
datetime.datetime(2012, 12, 24, 18, 33, 46, 266943) 
```

完整的代码如下所示：

```
import pymongo
from datetime import datetime

class AccountsDB():
    def __init__(self):
        pass
    def store_info(self, user_info=None):
        try:
            conn = pymongo.Connection('localhost', 27017)
            db_name = 'accountsdb'
            coll_name = 'user_info'
            db = conn[db_name]
            coll = db[coll_name]
            print "Successfully connected to '%s'" % db_name
            if user_info is not None:
                user_info['created_time'] = datetime.now()
                print user_info
                coll.insert(user_info)
            else:
                print 'No user_info'
            print "Data where stored in database"
        except:
            print "Some Error Occured"

a = AccountsDB()
a.store_info({}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-15T14:48:13.277

pymongo 建议你应该简单地使用`datetime.datetime.utcnow()`

> 例如，以下代码将当前 UTC 日期和时间存储到 MongoDB 中：
> 
> `>>> result = db.objects.insert_one( ... {"last_modified": datetime.datetime.utcnow()})`
> 
> 始终使用 datetime.datetime.utcnow()，它以 UTC 格式返回当前时间，而不是`datetime.datetime.now()`，它返回当前本地时间。避免这样做：
> 
> `>>> result = db.objects.insert_one( ... {"last_modified": datetime.datetime.now()})`

[pymongo 日期时间](http://api.mongodb.com/python/current/examples/datetimes.html)

# c# - 不能在同一个类中使用声明的字典？

> ID：14026393
> 
> 赞同：2
> 
> 时间：2012-12-24T23:11:05.453
> 
> 标签：c#

好吧，我无法弄清楚到底发生了什么。

我声明并初始化了一个字典：

```
public Dictionary<byte, Color> blobType = new Dictionary<byte, Color>(); 
```

但是我不能在课堂上使用它，智能也不会显示它。如果我尝试像这样使用它，我会收到错误：

```
blobType.add(1, Color.White); 
```

或者，如果我不初始化它并稍后尝试：

```
 public Dictionary<byte, Color> blobType;
    blobType = new Dictionary<byte, Color>(); 
```

仍然不能使用它，它就像它没有看到它在那里的 blobType。

我尝试重命名变量，在 VS2012 中进行，仍然发生同样的事情。因此，当该类是另一个类中的对象时，它可以在该类之外访问它。但是 VS2010 C# Express 在我声明它的类中拒绝承认它的存在。这是怎么回事？

根据要求，全班：

```
namespace blob
{
    class Blob
    {
        public Texture2D texture;

        public Dictionary<byte, Color> blobType = new Dictionary<byte, Color>();
        blobType.add(1, Color.White);

        public Vector2 position;

        private float scale = 1;
        public float Scale
        {
            get { return scale; }
            set { scale = value; }
        }

        public Blob(Texture2D texture, float scale)
        {
            this.texture = texture;
            this.Scale = scale;
        }

        public void Draw(SpriteBatch spriteBatch)
        {
            spriteBatch.Draw(texture, position, null, Color.White, 0, Vector2.Zero, Scale, SpriteEffects.None, 0);
        }
    }
} 
```

EDIT2：大写添加，同样的事情。错误：

```
Error   1   Invalid token '(' in class, struct, or interface member declaration C:\Users\Iurie\Documents\Visual Studio 2010\Projects\blob\blob\blob\Blob.cs 20  21  blob

Error   2   Invalid token ')' in class, struct, or interface member declaration C:\Users\Iurie\Documents\Visual Studio 2010\Projects\blob\blob\blob\Blob.cs 20  36  blob

Error   3   'blob.Blob.blobType' is a 'field' but is used like a 'type' C:\Users\Iurie\Documents\Visual Studio 2010\Projects\blob\blob\blob\Blob.cs 20  9   blob

Error   4   'Microsoft.Xna.Framework.Color.White' is a 'property' but is used like a 'type' C:\Users\Iurie\Documents\Visual Studio 2010\Projects\blob\blob\blob\Blob.cs 20  31  blob 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T23:16:27.120

您不能在 C# 中的方法之外执行代码。要将一组默认条目添加到字典中，请将它们添加到 Blob 类的构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T23:20:06.130

您不能在方法之外执行代码。要添加默认值，请在构造函数中调用 add 。

```
class Blob
{
    public Texture2D texture;

    public Dictionary<byte, Color> blobType = new Dictionary<byte, Color>();

    public Blob() 
    {
        blobType.add(1, Color.White);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:27:36.300

这将满足您的需求：

```
class Blob
{
    public Texture2D texture;

    public Dictionary<byte, Color> blobType = new Dictionary<byte, Color>() { { 1, Color.White } };

    public Vector2 position;

    private float scale = 1;
    public float Scale
    {
        get { return scale; }
        set { scale = value; }
    }

    public Blob(Texture2D texture, float scale)
    {
        this.texture = texture;
        this.Scale = scale;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, null, Color.White, 0, Vector2.Zero, Scale, SpriteEffects.None, 0);
    }
} 
```

# javascript - 如何使用点击事件用javascript输入填充textarea

> ID：14026395
> 
> 赞同：-2
> 
> 时间：2012-12-24T23:11:30.193
> 
> 标签：javascript, button, onclick, click, textarea

我有一个文本区域，人们应该可以在其中链接到我网站上的其他主题。我现在有 6 个按钮`OnClick`，但我希​​望它更容易实现，所以我想要一个`click event`而不是它......

问题是我不知道该怎么做。例如，如果有人点击某个按钮，它必须弹出一个带有输入字段的 javascript 弹出窗口，人们可以在其中填写网站或主题的 URL。这个填完后，要自动放到textarea上。

我怎样才能做到这一点？

这是我尝试过的：

```
<?php
if ($verified_user) {
  echo "
<form method=post action=\"\" class=post> 

<textarea id=\"qut\"></textarea>

<div class=wtf>
        <input type=\"button\" class=\"button\" onclick=\"hen('d','--! ($language[spoil]: spoiler) !--\n\r','\n\r--! ($language[spoil] : spoiler) !--\r')\" value=\"$language[spoiler]\"  />
</div>   
";    }

?>

</div>
</textarea>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:20:14.027

因此，首先，您需要检查如何使用事件侦听器。谷歌它，你会发现这个链接：[https ://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

然后你需要知道如何更新文本框的内容。再次：在 Internet 上查找它，您会找到`innerHTML`.

最后它可能看起来像这样：http: [//jsfiddle.net/zvnAH/1/](http://jsfiddle.net/zvnAH/1/)

```
var button = document.getElementById("button");

if(button.addEventListener){ //FF, Chrome, Safari, IE > 9, ...
    button.addEventListener('click', addLink, false); 
}else if(button.attachEvent){ //IE < 9
    button.attachEvent('onclick', addLink);
}

function addLink(){
    var tmp = document.getElementById("txt").innerHTML;
    var link = prompt("Add link:");
    document.getElementById("txt").innerHTML = tmp + link;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:20:31.140

在您的按钮（六个中的一个）上，添加以下内容：

```
<input type="button" onclick="window.open(URL_of_the_new_page_with_input_field,'name_popup','menubar=no, status=no, scrollbars=no, menubar=no, width=200, height=100');" /> 
```

在另一页中，您有输入字段和一个按钮确定。

用这个 ：

```
<input type="button" value="OK" onclick="window.opener.document.getElementById('the_textarea_id').value = document.getElementById('the_inputfield_id').value" /> 
```

愿这有帮助。

# asp.net - ajax 工具包错误将第一个网站上传到新的托管服务器

> ID：14026408
> 
> 赞同：3
> 
> 时间：2012-12-24T23:13:21.217
> 
> 标签：asp.net, ajax, webserver

我的托管服务公司正在使用 parallels plesk panel 9.5

在 Windows 7 上的本地 iis 中正常工作后

因为这是我**第一次**在那里上传网站，所以这个错误可能是什么问题

*无法加载文件或程序集“AjaxControlToolkit”或其依赖项之一。该系统找不到指定的文件。*

如果它很重要，在页面底部有一条消息

程序集加载跟踪：以下信息有助于确定无法加载程序集“AjaxControlToolkit”的原因。

警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。

我意识到我无法访问注册表，因为这不是我认为我应该考虑的事情，我应该认为这只是一个一般信息，因为该公司是一家成熟的公司

更新

这是应用程序，我不使用在线私人服务器 `parallels plesk panel 9.5`

![如果您看不懂，请下载到您的电脑上](../Images/8c5fb055441bdce4e224f191739142dc.png)

iis 在**我**的dev pc = **local**上（在处理项目时）并且**没**问题！

**上传**网站的问题-在线时=在软管服务公司的服务器上

在图片中查看您的评论：“*转到应用程序池中的高级设置，将身份更改为网络服务。让我知道任何更新。* ”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:43:10.977

虚拟目录设置和写入/执行脚本的权限存在问题

当您使用 plesk 时，您应该知道如何在域的虚拟目录部分的属性中为每个虚拟目录设置属性。

# javascript - 这是什么类型的 HTML 表格，你可以使用什么类型的网页抓取技术？

> ID：14026410
> 
> 赞同：6
> 
> 时间：2012-12-24T23:13:53.617
> 
> 标签：javascript, jquery, html, r, web-scraping

我正在尝试在此链接[http://www.rchsd.org/doctors/index.htm?strt=0&ln=&fn=&sp=&grp=&loc=&lng=&gen=](http://www.rchsd.org/doctors/index.htm?strt=0&ln=&fn=&sp=&grp=&loc=&lng=&gen=)中提取数据，`R`但这相当困难.

我注意到每当我单击页码时，url 链接都不会改变。这个表是用 JavaScript 创建的吗？该表是由某些外部源创建的，我如何访问它？另外，这种类型的表有技术名称吗？

另外，对于任何知道*网络抓取*或任何其他程序的人`R`，您将如何从该表中提取所有数据？我尝试使用以下代码`R`提取数据，但我得到`NULL`. 你会如何解决这个问题？

```
mps <- paste("http://www.va.gov/providerinfo/SANDIEGO/index.asp?servicesearch=&specialtysearch=&gendersearch=&sort=&currentPage=1") 
mps.doc <- htmlParse(mps)
mps.tabs <- readHTMLTable(mps.doc) 
```

另外，如果你不能回答我问题的后半部分，那也没关系。我主要想知道我问题前半部分的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:54:37.960

***答案使用 3 种不同的技术进行了修订，全部基于 .ajax() 和 YQL。***

# **技术1**

 ***参考 HTML：** [http ://doctors.ucsd.edu/?index=1](http://doctors.ucsd.edu/?index=1)

对于您问题的第一部分，您提供的 URL 中的表格类型是标准的[**HTML 表格模型**](http://www.w3.org/TR/html401/struct/tables.html)种类。在创建它`table`时，该网站使用一个**XML 文件**来填充它`rows`和`columns`数据，包括医生的照片。

为了让服务器满意，并非**XML 文件**中的所有数据都加载到浏览器中，仅显示*有限的结果*，并带有进入下一页的选项。

您写的评论部分中的 URL 链接也是如此（即[http://doctors.ucsd.edu/?index=1 ），访问者可以从网页](http://doctors.ucsd.edu/?index=1)***结果每页***下拉列表中选择 10、25 或 50 个结果菜单。例如，网络的地址栏将显示***请求***的号码**`&setsize=25`**。

尽管您可能希望对[**引用 URL 进行数据抓取**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22http%3A%2F%2Fdoctors.ucsd.edu%2F%3Fsetsize%3D5%22)，但最好不要这样做，因为***您已经拥有***包含所有所需数据的**XML 文件。*****直接访问它的工作量更少！***

**参考 XML：** [http ://www.rchsd.org/api/physdir/](http://www.rchsd.org/api/physdir/)

您的问题的第二部分很容易，因为**XML 文件**很容易获得。这一次，当您[**抓取引用 XML File 的数据**](http://developer.yahoo.com/yql/console/?q=SELECT%20phys%20FROM%20xml%20WHERE%20url%3D%22http%3A%2F%2Fwww.rchsd.org%2Fapi%2Fphysdir%2F%22%20LIMIT%205)时，它会快速显示您正在寻找的信息，并且具有很高的可读性。

***在上述两个数据抓取查询***中，出于测试目的，我已将请求限制为 5 个结果，但您可以将其增加到*更大的采样值*。第一个示例中的额外网页数据量需要使用`XPATH`来映射节点并需要额外处理才能使用该数据。

我准备了一个详细的 jsFiddle，它应该可以解释你关于这个过程的很多问题。在其中，我解释了如何使用 YQL、`.ajax()`和**XML 文件**的链接。

**参考示例：**

```
$.ajax({
    type: 'GET',
    url: 'http://query.yahooapis.com/v1/public/yql?q=SELECT%20phys%20FROM%20xml%20WHERE%20url%3D%22http%3A%2F%2Fwww.rchsd.org%2Fapi%2Fphysdir%2F%22%20LIMIT%205',
    dataType: 'xml',
    success: function(data) {
        var dataResults = $(data).find('results');
        console.log(dataResults);
    }
}); 
```

**参考教程：**
[**jsFiddle Data Scraping XML Demo**](http://fiddle.jshell.net/2Ck6h/1/)（*jsFiddle HTML Demo见下文*）

* * *

# **技巧2**

 ***编辑：**返回***原始***参考 HTML：[http ://doctors.ucsd.edu/?index=1](http://doctors.ucsd.edu/?index=1)

我在第一部分写的*最后一件事****实际上是不正确的***，因为您*不一定*拥有所需的所有数据。**虽然您可以从XML 文件**中的物理医生地址创建自己的*Google 地图位置数据*，但该信息已经可供使用。

 **然后还发现此 URL 还包含一个独特的格式化***缩略图图像***，并在可用时包括***医生信息***部分。

那么，接下来是一个重新编写的 jsFiddle，它展示了如何抓取该 HTML 网页的数据。您将在这个新的 jsFiddle 中注意到*YQL 语句*不再存在`ACCESS phys FROM xml`，因为我们现在正在处理 HTML 文档。此外，我们将在该*YQL 语句*中使用通配符`*`而不是标记名。届时将`phys`*`ACCESS * FROM html`*

 **正如您从上面的数据抓取第一种方法*中记得的那样，该请求返回了太多数据。我将解释如何[**`XPATH`**](http://developer.yahoo.com/yql/guide/yql-select-xpath.html)向该*YQL 语句*添加一个，以便您只获取所需的数据。

你问从哪里开始？在浏览器中的那个网站上！我将使用 Firefox 继续。

首先，让我们在测试中强制返回 5 个结果。为此，请将**Results Per Page**更改为 25，然后在浏览器栏中将 25 更改为 5 以进行`&setsize=`查询。在键盘上按 Enter 以应用更改。

使用网页**Additional Search Criteria**、**Show More Specialties**、**Location**和**Sort results by:**也会修改浏览器栏并进一步创建自定义 URL 以供使用。

对于我们的演示，我们只需要对**排序结果的 1 个额外自定义：姓氏 AZ**。如果需要，请重新加载网页，并确保...我们的自定义 URL 应如下所示：

[http://doctors.ucsd.edu/?sortby=familyName&sortDirection=asc&setsize=5](http://doctors.ucsd.edu/?sortby=familyName&sortDirection=asc&setsize=5)

现在网页已经填充了我们请求的 5 个结果，我们需要查看布局如何支持这些项目。

通过右键单击鼠标使用 Firefox **Inspect Element工具来查看和学习***表格布局结构*。很快，您将看到所有返回的结果都包含在一个***唯一的类名***中。

下面是使用 Firefox 的截图来说明：

![在此处输入图像描述](../Images/b99bc84f6bb32bbf8d752a6598221278.png)

当通过**Inspect Element**工具底部的图标（*在 Inspect Element Icon 的右侧）**弹出**HTML 面板*时，您可以看到单个 Doctors 框的情况：***`layout`***

 ***![在此处输入图像描述](../Images/d26ca5d4b6774cc404069c91b41fd954.png)

在上面的照片中，您可以**直观地** *向上遍历 DOM*，看到主*类名* `resultsList`是`div`持有请求的 5 个结果。*可以使用*实际的类名，但要使用的更***精致的类名***是**`resultsListProvider`**每个返回的项目所携带的。

您现在拥有构建要使用的 YQL 语句所需的信息。首先，这是我们开始使用的最低要求：

```
ACCESS * FROM html WHERE url="http://doctors.ucsd.edu/?sortby=familyName&sortDirection=asc&setsize=5" 
```

上面真的不行，因为它返回了太多非必要的网页数据，这就是为什么我们使用**Inspect Element**来发现什么是真正重要的。话虽如此，我们将使用[**`XPATH`**](http://developer.yahoo.com/yql/guide/yql-select-xpath.html)通过*classname* **`resultsListProvider`**访问我们需要的网页部分。

```
xpath="//div[@class='resultsListProvider']" 
```

现在我们可以结合使用*这两个部分*来`AND`创建我们可以数据抓取的[**最终 YQL 语句**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22http%3A%2F%2Fdoctors.ucsd.edu%2F%3Fsortby%3DfamilyName%26sortDirection%3Dasc%26setsize%3D5%22%20AND%20xpath%3D%22%2F%2Fdiv%5B%40class%3D'resultsListProvider'%5D%22)：

```
SELECT * FROM html WHERE url="http://doctors.ucsd.edu/?sortby=familyName&sortDirection=asc&setsize=5" AND xpath="//div[@class='resultsListProvider']" 
```

上面的**最终 YQL 语句**现在将提供可用的结果，以便在我创建的新 jsFiddle 中使用，它更新了注释以反映这些更改。如果需要，您可以结合**XML 文件**和**HTML URL**方法来满足您的数据抓取要求，因为每种方法都提供其他方法可能缺少的内容。

提醒：网页加载时或使用**YQL Rest State**查询时，可能会直接渲染部分数据。这意味着***您的动态数据***可能基于***它们的动态数据***。*天啊！*

**参考教程：**

[**jsFiddle 数据抓取 HTML 演示**](http://fiddle.jshell.net/2EYKd/1/)（*请参阅上面的 jsFiddle XML 演示*）

* * *

# **技巧3**

 ***编辑 2：直接使用 HTML**

[**jsFiddle 数据抓取 HTML 演示：克隆该网页**](http://fiddle.jshell.net/xvFbJ/)

最新的编辑展示了如何使用原始网页的样式表（*这是可选的，您可以创建自己的*`dataType`），但使用属性以不同的方式请求 Ajax 数据。使用这种方法将准确的标记放置在本地网页上，包括任何`classnames`或`id's`与它一起。

jsFiddle 截图： ![在此处输入图像描述](../Images/1da447044b0e76e600e1708aa4ea54ac.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T00:01:28.443

该表是使用此[XML形成的](http://www.rchsd.org/api/physdir/)*********

# objective-c - 自定义friendsPickerViewController的样式

> ID：14026420
> 
> 赞同：0
> 
> 时间：2012-12-24T23:15:52.337
> 
> 标签：objective-c, ios, facebook, sdk

有没有办法自定义`friendsPickerViewController`随**facebook ios sdk 3.1**提供的样式？

我正在尝试改变 facebook 中导航栏的外观`friendsPickerViewController`。

似乎没有任何效果。甚至以下内容：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"customNavBarBGImage"]  forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:50:48.407

这是可能的，但它有点像黑客。首先，`FBFriendPickerViewController`使用 a`UIToolbar`而不是 a `UINavigationBar`。

您必须呈现`FBFriendPickerViewController`，然后浏览其视图的子视图以找到`UIToolbar`显示在顶部的那个。一旦你找到了，`UIToolbar`你可以随意修改它。

因此，在要显示好友选择器的视图控制器的代码中，您可以这样做：

```
FBFriendPickerViewController *fbFriendPickerController = [[FBFriendPickerViewController alloc] init];

[fbFriendPickerController loadData];
[self presentViewController:fbFriendPickerController animated:NO completion:nil];

//Search through subviews of friendPicker until we find the UIToolbar
//NOTE: you have to do this after calling [self presentViewController...], otherwise
//the UIToolbar won't be in the array of subviews
NSArray *subs = [fbFriendPickerController.view subviews];
for (UIView *child in subs) {
    if ([child isKindOfClass:[UIToolbar class]]) {
        UIToolbar *bar = (UIToolbar *)child;
        [bar setBackgroundImage:[UIImage imageNamed:@"YOUR_IMAGE.png"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:38:10.517

如果你想自定义它，你必须创建一个新的视图控制器，它是 FBFriendPickerViewController 的子类，带有一个 XIB 文件。

在您的 xib 文件中，为您的导航添加一个标题视图、一个表格视图和一个微调器。将 tableview 和 spinner 链接到文件所有者。并根据需要自定义标题视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T23:50:30.653

如果您的应用程序中的所有工具栏颜色相同没有任何问题，请尝试：`[[UIToolbar appearance] setTintColor:[UIColor myColor]];`

在您的应用委托的*didFinishLaunchingWithOptions*方法中。

感谢 gwilkins 指出它是一个 UIToolbar！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T01:55:59.643

不幸的是，您无法自定义导航栏的外观。自定义仅限于显示/隐藏完成按钮和工具栏等功能，以及过滤掉要在选择器中显示的朋友。

# javascript - 让 jQuery 动画函数无限循环？

> ID：14026421
> 
> 赞同：1
> 
> 时间：2012-12-24T23:15:54.537
> 
> 标签：javascript, animation

> **可能重复：**
> [如何无限期循环播放此动画？](https://stackoverflow.com/questions/13978348/how-do-i-loop-this-animation-indefinitely)

有人可以告诉我如何让这个脚本重复或循环（如不结束动画功能并永远永远继续下去）。

我对javascript很陌生，所以如果有人能够告诉我我能做些什么来实现这一点，我将不胜感激。

谢谢你。

```
$(document).ready(function() {
    var rageImg = $('.foo');
    $(rageImg).animate({top:'+=100px'}, 1000).animate({top:'-=100px'}, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:19:41.843

```
$(function loop() {
    $('.foo').animate({ top: '+=100px' }, 1000, function() {
        $(this).animate({ top: '-=100px' }, 1000, loop);
    });
}); 
```

**演示：http:** [//jsfiddle.net/VC3S6/](http://jsfiddle.net/VC3S6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:18:01.123

```
function loop() {
    $(rageImg).animate({top:'+=100px'}, 1000).animate({top:'-=100px'}, loop);
}

$(document).ready(function() {
    loop();
}); 
```

*演示*：http: [//jsfiddle.net/JD9hN/](http://jsfiddle.net/JD9hN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:21:22.310

仅 CSS：

```
.foo {
  animation:sway 1s infinite alternate;
  position:relative;
}
@keyframes sway {
  from {top:0px}
  to {top:100px}
} 
```

为 Chrome 支持添加`-webkit`前缀 ( `-webkit-animation`, )。`@-webkit-keyframes`

适用于 IE10、Firefox 16（`-moz-`为 Firefox 5 至 15 添加前缀）和 Chrome 4。

~~由于这很可能是审美问题，因此不受支持没什么大不了的。~~

jQuery 答案：

```
$(function() {
  $('.foo').animate({top:'+=100px'},1000)
                   .animate({top:'-=100px'},1000,arguments.callee);
}); 
```

# android - 以编程方式添加的 Android 联系人不显示数据字段

> ID：14026428
> 
> 赞同：1
> 
> 时间：2012-12-24T23:16:58.963
> 
> 标签：android, contact, android-syncadapter

我有一些工作代码，给定一个现有的contactID，将更改应用于联系人中的现有字段（例如照片、电话号码、电子邮件等）并将字段添加到联系人。

这段代码取自一些示例并且运行良好，我可以看到现有联系人的所有修改/新字段。

问题是，如果我以编程方式创建联系人，我会将其视为仅包含图片的联系人，以及属于我的同步适配器的字段，该字段显示联系人的图标、状态和存在。没有其他字段可见（例如电话、电子邮件等）。

我尝试将联系人添加为属于我的同步适配器的帐户类型和谷歌帐户。在这两种情况下，结果都是一样的。调试代码时，看起来一切都成功了......

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T12:46:21.770

我的问题是尝试更新现有联系人的数据。解决方案是使用相关数据创建我自己的 RawContact，然后将其加入现有联系人。然后系统允许我修改属于同一联系人的其他原始联系人的数据。

# ajax - 如何从简单的对象文字中提取变量？

> ID：14026441
> 
> 赞同：0
> 
> 时间：2012-12-24T23:20:38.207
> 
> 标签：ajax, json

我创建了我的第一个 AJAX-JSON 项目，没有发布任何（愚蠢的）问题，除了这个小问题：

```
function processEvent(data)  {  
var evt = $(data).text();
   } 
```

当我写警报（evt）时；我看到以下内容：

```
{meat:'beef',vegetable:'carrots',potato:'mashed'} 
```

我可以使用以下代码从变量“evt”中提取“牛肉”一词：

```
 evt.substr(7,4) 
```

但如果我写：

```
 evt.meat 
```

我收到一个错误：未定义。如何在不诉诸字符串操作的情况下直接检索变量“肉”的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:26:38.543

这是因为此时您专门制作`evt`了一个字符串。根据`data`表示的内容（JSON 字符串数据或已从 JSON 解析的对象，或 DOM 节点 - 如果您的代码示例中没有更多上下文，我无法判断哪个），您可能需要做一些事情来获取对象表示. 至少您可以这样做以将字符串解析为 JSON：

```
var evt = JSON.parse($(data).text()); 
```

然而，我的猜测是你可能已经有一个对象表示，你通过调用将它变成一个字符串`text()`，所以这里可能会发生一些不必要的序列化/反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:26:57.720

您需要使用`JSON.parse()`从 JSON 字符串转换为相应的数据。

```
var evt = JSON.parse($(data).text());
console.log(evt.meat); 
```

jQuery 可以自动为您完成这项工作。任何一个：

1.  调用`$.getJSON()`以执行 AJAX 调用。
2.  `dataType: 'json'`在 AJAX 调用的选项参数中指定。
3.  服务器发送标头“内容类型：应用程序/json”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T00:12:15.380

如果您的`evt`数据是 JSON，您可以解析它并获取肉类属性。目前不是，这`{meat:'beef',vegetable:'carrots',potato:'mashed'}`就像 JSON 一样`{"meat":"beef","vegetable":"carrots","potato":"mashed"}`。请注意，使用的是双引号而不是单引号，并且还引用了属性。

```
function processEvent(data)  {  
var evt = $(data).text();// === {"meat":"beef","vegetable":"carrots","potato":"mashed"}
    evtObj = $.parseJSON(evt);
    alert(evtObj.meat); //shows beef
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T23:26:45.497

```
var obj = JSON.parse(data);
var val = obj['meat']; 
```

# jquery - 针对特定点击的 Jquery 事件处理，但使用 off 关闭分组类名下的所有点击

> ID：14026452
> 
> 赞同：-1
> 
> 时间：2012-12-24T23:23:27.930
> 
> 标签：jquery

如何为每个单击的锚标记附加特定的处理程序，然后关闭分组在具有类名的一个 div 下的所有锚标记？

如何为每个单击的锚标记附加特定的处理程序，然后关闭分组在具有类名的一个 div 下的所有锚标记？

```
<div id="x">
    <a id="a">link one</a>
    <a id="b">link two</a>
    <a id="c">link three</a>
</div> 
```

jQuery：

```
$('#a').on('click touchstart', handlerfuncA );
$('#b').on('click touchstart', handlerfuncB );
$('#c').on('click touchstart', handerfuncC );

$('x').off('click touchstart' ); 
```

然后重新连接所有，而无需再次专门连接每个锚。但是我如何轻松地重新连接每个处理程序？我需要重新附加处理程序，但想知道是否有一种简单的方法，无需再次指定附加每个处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:28:53.220

你在做什么没有意义。最好将单个事件处理程序附加到您的一组锚或您的 div，然后根据锚的 id、值等确定要做什么。

当然，除非这些锚点的事件彼此完全无关……在这种情况下，单独解除它们的绑定是有意义的（而不是像你想要的那样作为一个组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:30:21.657

添加一些 html 可能会有所帮助，但她是基本想法：

使用 jQuery`on`附加事件：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

用于`off`删除它们： [http ://api.jquery.com/off/](http://api.jquery.com/off/)

例子：

从锚点中删除事件

`$("body").off("click", "a", oldClickFunction)`

**编辑**

`$('#x').off( 'click','a', touchstart );`

# sharepoint-2010 - 如何：禁用网站页面数据视图的“添加新页面”？

> ID：14026453
> 
> 赞同：1
> 
> 时间：2012-12-24T23:23:42.970
> 
> 标签：sharepoint-2010, sharepoint-designer

使用 Sharepoint 2010 的 Sharepoint Designer 是否可以禁用或更好地删除站点页面数据视图底部的“添加新页面”链接？

我正在寻找一个复选框或“禁用添加新页面”或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T05:12:10.500

试试这个：

### 使用 SharePoint 设计器

1）打开你的网站到sharepoint desinger 2010。

2) 转到列表和库 > 文档库 > 网站页面

3）在高级模式下使用编辑文件打开您的视图（右键单击视图）

4)`Toolbar`在 XsltListViewWebPart 中搜索节点标签并替换它。

`<Toolbar Type="None"/>`

### 使用编辑页面

1) 使用站点操作 > 编辑页面编辑您的默认页面。

2) 编辑 webpart > 工具栏类型 > 无工具栏。

![在此处输入图像描述](../Images/96b8de07444e5634c99b26d3a0974af6.png)

应用比好的。

啤酒花它有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T12:11:52.767

您可以编辑 webpart，并将工具栏类型更改为“无工具栏”或“完整工具栏”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T08:45:29.927

下面的解决方案是2013 SharePoint版本之后，点击下面的网站权限

![在此处输入图像描述](../Images/f6f97a68912748f5d4a9a01ccc57728d.png)

点击高级权限设置

![在此处输入图像描述](../Images/b646137105f3eb55bb69256e88a98787.png)

点击权限级别

![在此处输入图像描述](../Images/1e6f459f228feb25fa3279efa4073f82.png)

单击读取权限并复制并将其设置为 EditOnly 并启用编辑

![在此处输入图像描述](../Images/775af5e3e76384e1cf900673ce129ca1.png)

![在此处输入图像描述](../Images/bdf82320161a1457d8e121d7d231623c.png)

创建一个新组并添加权限级别 EditOnly

![在此处输入图像描述](../Images/667b76ed89282e9f850f48cbefd192d2.png)

然后在组内添加用户，现在新+图标不会出现在共享链接上，只能编辑。

# objective-c - 使用 Objective-C 根据框架在 Xcode 中的可用性有条件地链接框架的最佳方法

> ID：14026458
> 
> 赞同：6
> 
> 时间：2012-12-24T23:24:53.240
> 
> 标签：objective-c, ios, frameworks

我正在开发一个基于 Cocoa touch 的 Objective-c 框架，并且正在研究其他用于解析 JSON 和 XML 数据的框架。

我希望开发人员能够轻松地使用我的框架开箱即用，并且想知道有条件地包含第三方框架的最佳方式是什么。我想在信用到期时给予信用，所以我不想将其他项目包含在发行版中，但我希望开发人员能够添加一个框架（甚至只是一堆类），比如 SBJson 或触摸 XML 并让我的代码库查看包含的代码库并将其与它提供的附加功能一起使用。通过某种配置文件或在项目设置中启用框架也是一种选择，但不太理想。

1.  使用编译器设置执行此操作的最佳方法是什么？我看到很多开发人员将包含的框架从“必需”切换到“可选”，但我认为 SBJson 或 Touch XML 都没有被编译为或使用 Objective-C 框架包 (.framework) 或 C 来实现静态库（.a），因此无法利用这一点。

2.  如何在代码中有条件地实现这一点？例如，SBJson 的头文件是通过 `#import "SBJson.h"`编译器指令导入的，但如果找不到所需的头文件，这将失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:41:20.483

您可以包含 .h 但使用其中的对象时，您需要使用 NSClassFromString 调用它

# azure - 能否将 Azure 移动服务与 Azure 云服务混合使用？

> ID：14026459
> 
> 赞同：13
> 
> 时间：2012-12-24T23:25:24.560
> 
> 标签：azure, azure-mobile-services

我正在调查 Azure（即初学者）。移动服务本身无法满足我的移动应用程序需求（数据访问过于简单）。我的问题是您能否混合使用移动服务和云服务，以便它们都访问相同的数据库/模式？换句话说，编写一个移动应用程序，将移动服务用于它提供的基本功能（CRUD、身份验证等），然后可能会调用我在 Web 角色服务器上运行的自定义 REST API 以进行更复杂的数据库操作。为此，云服务实例需要能够读取/写入相同的数据库/模式。这是否可能，如果可以，有关如何从云应用程序访问自动生成的移动数据库的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-25T04:23:56.050

毫无疑问，移动服务在设计时非常考虑到这一点。

你可以

*   借助 HTTP REST API，从其他服务（在 Azure 或其他任何地方）调用移动服务：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)
*   使用服务器脚本和请求模块从移动服务调用其他服务：[http ://www.thejoyofcode.com/Making_HTTP_requests_from_Scripts_in_Mobile_Services.aspx](http://www.thejoyofcode.com/Making_HTTP_requests_from_Scripts_in_Mobile_Services.aspx)
*   从任何地方直接连接到您的移动服务 SQL 数据库。这只是一个 SQL Azure 数据库，因此您可以使用连接字符串从 Azure（甚至更远）中的另一个服务进行连接
*   向您的 SQL 数据库添加附加功能（如存储过程）。它只是一个 SQL 数据库！
*   使用 mssql 全局模块从移动服务脚本调用 T-SQL。

很多很多的组合选项，所以简短的回答是肯定的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:31:08.037

我相信简短的回答是“是”。

此外，我认为主要问题是价格/许可，而不是技术：

*   [http://www.windowsazure.com/en-us/pricing/details/](http://www.windowsazure.com/en-us/pricing/details/)

我怀疑您的“数据库”将驻留在 MS Azure/Cloud 中，而“访问”将是移动/直接访问和/或自定义 Web 服务的任意组合，两者都对您的 Azure/Cloud 实例。

# wordpress - 静态首页上的分页 - WordPress

> ID：14026467
> 
> 赞同：1
> 
> 时间：2012-12-24T23:27:17.120
> 
> 标签：wordpress, pagination

我的[WP 作品](http://mtthwbsh.com)集有一个静态首页，并尝试使用 codex，但似乎无法弄清楚我的循环。这是我的第一个查询的样子：

```
<?php query_posts('category_name=portfolio&posts_per_page=4') ?>
<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?> 
```

知道在静态首页上对其进行分页会是什么样子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T00:31:28.643

没有任何插件你可以使用它（只是一个简单的例子）

```
$paged = (get_query_var('page')) ? get_query_var('page') : 1;
$args=array('category_name'=>'portfolio','posts_per_page'=>4,'paged'=>$paged);
query_posts($args);
if (have_posts()) : while (have_posts()) : the_post();
/...
endwhile;
posts_nav_link();
wp_reset_query();
endif; 
```

访问[Codex](http://codex.wordpress.org/Function_Reference/posts_nav_link)以了解有关形成链接的更多信息。

或者，您可以使用[pagenavi](http://wordpress.org/extend/plugins/wp-pagenavi/)（我使用这个）或[无限滚动](http://wordpress.org/extend/plugins/infinite-scroll/screenshots/)之类的插件。[如果您想手动构建无限滚动](http://wp.tutsplus.com/tutorials/theme-development/how-to-create-infinite-scroll-pagination/)，还有一个很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:08:15.050

你可以使用这个插件：[wp page navi](http://wordpress.org/extend/plugins/wp-pagenavi/)

如果您在此查询中有更多帖子，它将自动添加页面导航。

# php - 使用主干 .save 方法尝试在 php 文件中提取 json 数据

> ID：14026470
> 
> 赞同：0
> 
> 时间：2012-12-24T23:27:45.043
> 
> 标签：php, ajax, backbone.js

我在我的应用程序中使用主干，我正在尝试使用主干方法更新 json 文件。这里的保存方法是网站[http://dalydd.com/projects/backbone/backbone.html](http://dalydd.com/projects/backbone/backbone.html)

这是我的 js 这工作正常

```
 var ModalInfo = Backbone.Model.extend({
defaults: {
  person:'',
  occupation:'',
  home:'',
},
url:'sample.php',
});

 var developer = new ModalInfo();
developer.toJSON();
 developer.save({person:'madan', occupation:'developer', home:'middtown'}, {
wait:true,
success:function(model, response) {
console.log('Successfully saved!' + model + response);
},
 error: function(model, error) {
console.log(model.toJSON());
console.log('error.responseText' +model);
}
}); 
```

这是我的 sample.php 中的 php 我正在尝试获取 json.js 的内容，将其解码为我的新数据，然后对其进行解码并将其作为响应返回

```
 <?php

 $json_data = json_decode(file_get_contents('json.js'), true);
 for ($i = 0, $len = count($json_data); $i < $len; ++$i) {
      //do the right logic
 }
 file_put_contents('json.js', json_encode($json_data));
 $final_data = file_get_contents('json.js', json_encode($json_data));
 echo $final_data;
 echo(var_dump($_POST));
 ?> 
```

当我尝试回显超级全局帖子时，我得到 array(0)

我希望有人可以帮助我解决我的 php 问题，以及为什么当我在骨干网中使用 .save 方法时无法提取 sample.php 中的任何帖子数据 - 当我回显服务器请求方法时，它表明我只想发布帖子获取发布数据并将其写入文件然后返回它我是否以错误的方式进行此操作 - 任何帮助表示赞赏 - 我一直在为此绞尽脑汁。我的第一步只是弄清楚为什么我无法获得任何发布数据，即使当我加载页面时萤火虫告诉我它正在发布 - 你也可以检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:32:52.403

您的问题的答案在于，除非您发布表单编码的数据，否则`$_POST`PHP 不会填充超全局。您需要获取原始发布的输入。你可以这样做：

```
$json_data = json_decode(file_get_contents('php://input')); 
```

You can actually use any of the various PHP file input methods here (i.e `fopen`/`fread`, `file` (useless in this context), etc.) . However the above will probably be the easiest if you are not going to be dealing with large chunks of JSON input to the point where memory management becomes more of a concern.

# java - Java Spring MVC Webform POST 请求方法

> ID：14026471
> 
> 赞同：0
> 
> 时间：2012-12-24T23:28:19.927
> 
> 标签：java, spring, model-view-controller, post, request

如果按下按钮，我希望执行 showEnteredData 方法。但它不执行该功能。我认为它应该自动完成。问题是什么？感谢您的帮助:=)

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ page session="false"%>

    <div id="leer" style="float: left;"></div>
    <div class="filmFilter">
        <form action="articles" method="get">

            <select name="dropdownFilmeFilter">
                <option value="aufsteigend">Preis: aufsteigend</option>
                <option value="absteigend">Preis: absteigend</option>
                <option value="bewertung">Kundenbewertung</option>
                <option value="erscheinungsdatum">Erscheinungsdatum</option>
            </select>

            <input type="submit" value="Done" /> <a href="home">bring me back
                home</a>
        </form>

    </div>

@RequestMapping(value = "/articles")
public String showHome ( Model model){
    List<Article> article = (List<Article>) gd.findAll(Article.class);  
    model.addAttribute("articles", article);

    return "articles";
}

@RequestMapping(value = "/articles", method = RequestMethod.POST)
public String showEnteredData(@RequestParam("dropdownFilmeFilter") String filter, Model model) {
    System.err.println("hohooh");

    List<Article> article = (List<Article>) gd.sortByAttribute(Article.class, "price", true);
    article.clear();

    if (filter == "aufsteigend"){
        article = (List<Article>) gd.sortByAttribute(Article.class, "price", true);
    }
    model.addAttribute("articles", article);

    return "articles";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:32:44.340

您可以将表单标签中的方法更改为“post”，或者将@RequestMapping 的方法更改为RequestMethod.GET。我会推荐第一个选项。

# python - Flask + Sqlite：整数字符串作为int类型返回？

> ID：14026478
> 
> 赞同：3
> 
> 时间：2012-12-24T23:29:29.073
> 
> 标签：python, string, sqlite, int, flask

当我将具有整数值的内容存储为字符串时，当我检索它时，它突然变成了一个 int。

所以这就是我所看到的：我用这个存储

```
db = get_db()
hello = escape(str(request.form['name'])).striptags()
what = escape(str(request.form['content'])).striptags()
db.execute('''insert into entry (
title, content, score, approved, pub_date) values (?, ?, 0, 0,?)''',
[hello,what,int(time.time())])
raise Exception('what')
db.commit() 
```

当我从页面提交时，说`form['name']='1'`and `form['content']='2'`, at the `Exception`, `hello==u'1'`and `content==u'2'`。到目前为止，这一切都很好。然后我存储在 中`DB`，但是当我去检索时，突然条目是 type`int` `1`和`2`。对于任何其他字符串，一切正常，例如`"lorem ispum"`.

在我的`sql schema`,`title`和`content`都是类型`string`。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:42:43.070

请注意，在 SQLite 中使用任何列类型都不能保证该列只允许存储该类型的值——它仍然可以存储任何类型的值。

我认为您的情况是您的列具有 INTEGER 或 NUMERIC 亲和力，在这种情况下，SQLite 通常会存储 INTEGER 类型的值。但是，如果您尝试存储无法无损转换为 INTEGER 的数据，SQLite 会自动将其转换为 TEXT。（或者，您的列可能具有 TEXT 亲和力，但如果它看起来像整数，Python 会以某种方式强制该字段将其存储为 INTEGER）。

[您可以在SQLite 文档](http://www.sqlite.org/datatype3.html)中阅读更多相关信息- 滚动到*2.0 Type Affinity*。

# c++ - 无法将着色器发送到 GPU 内存

> ID：14026479
> 
> 赞同：1
> 
> 时间：2012-12-24T23:29:29.647
> 
> 标签：c++, opengl, glsl, shader

我正在尝试将 glsl 程序与之前已成功编译的 2 个着色器链接，但该程序不会链接。根据 glRemedy 的调试器，错误信息是`ERROR: Definition for "void main()" not found`. 经过一些调试，我发现 GPU 没有收到任何着色器，再次根据 glRemedy。我相信，我的代码看起来正确并且从客户端按预期执行。

顶点着色器：

```
layout(location = 0) in vec3 vertexPosicao;

void main() {
    gl_Position.xyz = vertexPosicao;
    gl_Position.w = 1.0;
} 
```

片段着色器：

```
out vec3 cor;

void main() {
    cor = vec3(1, 0, 0);
} 
```

加载代码：

```
bool Shader::fromCode(std::string strCode) {
    GLint result;
    GLchar *code = new GLchar[strCode.size() + 1];
    strcpy(code, strCode.c_str());

    glShaderSource(m_id, 1, const_cast<const GLchar **>(&code), NULL);
    glCompileShader(m_id);
    glGetShaderiv(m_id, GL_COMPILE_STATUS, &result);
    return (bool)result;
} 
```

编辑：

在`glShaderSource`我使用的着色器 ID 上使用后，我得到了源代码。所有的。但它*似乎*缺少\n。那会是个问题吗？

编辑2：

Infolog 说一切正常。从 C++ 代码来看，程序的信息日志也说没问题，但是从 glRemedy 来看，上面有那个错误。另外，我看不到 glRemedy 着色器的来源，它们的大小为 0kb。不，我设置的测试显示某些东西不起作用。

编辑 3：

圣诞节快乐！=D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:14:50.330

为什么这么复杂，复制到一个新分配的 GLchar* 我的意思是（你忘记删除 [] 之后）。我会将其重写为

```
bool Shader::fromCode(std::string strCode) {
    GLint result;
    GLuint source_length = strCode.length();
    GLchar const * strCodePtr = strCode.c_str();

    glShaderSource(m_id, 1, &strCodePtr, &source_length);
    glCompileShader(m_id);
    glGetShaderiv(m_id, GL_COMPILE_STATUS, &result);
    return (bool)result;
} 
```

附加的 source_length 参数负责处理之后可能在内存中找到的任何尾随垃圾（第 1 个原因，大多数人的着色器加载器不起作用）。

# intellij-idea - 如何在 IDEA 中切换自定义选择

> ID：14026480
> 
> 赞同：4
> 
> 时间：2012-12-24T23:29:40.490
> 
> 标签：intellij-idea

好吧，我承认，我不知道它是怎么变成这样的。

![在此处输入图像描述](../Images/50a5642b138de6ef9732e04a657cdc2e.png)

我怎样才能让世界恢复正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T23:31:26.560

您处于列选择模式；调整去`Edit > Column Selection Mode`。

![在此处输入图像描述](../Images/f38b34cfd9696f47cc96e34aeecc5d8e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:32:01.307

看起来您启用了列选择模式。要禁用它，请转到编辑 > 列选择模式并禁用它。

# zend-framework - 如何将页面插入 zend 导航容器

> ID：14026481
> 
> 赞同：0
> 
> 时间：2012-12-24T23:29:45.320
> 
> 标签：zend-framework, zend-navigation

我目前正在使用 Zend_Navigation 从 XML 文件创建菜单，到目前为止，菜单可以正确呈现。我的问题是我需要将页面添加到导航容器中的特定位置。到目前为止，我有：

```
$this->_navContainerConfig = new Zend_Config_Xml(APPLICATION_PATH .
            '/configs/navigation.xml', 'nav');

        $this->_navContainer = new Zend_Navigation($this->_navContainerConfig);

        $this->_navContainer->findById('defaultindex')->addPage(array(
            'label'         => 'Open Prints',
            'module'        => 'default',
            'controller'    => 'artwork',
            'action'        => 'list',
            'params'        => array(
                'medtyp'        => 2),
            'resource'      => 'default:artwork',
            'privilege'     => 'list',
            'route'         => 'default'
        )); 
```

这只是在页面 id 'defaultindex' 中添加了一个子页面，我需要在 'defaultindex' 页面之后添加该页面。

有谁知道如何做到这一点？

提前非常感谢，祝大家圣诞快乐，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:33:45.473

您可以直接从 Zend_Navigation_Container 使用方法 addPage

```
$this->_navContainer->addPage(your_array); 
```

它将在容器中的所有页面之后添加您的页面。如果您需要自定义顺序，您需要扩展 Zend_Navigation_Container 并添加方法来重写容器中页面的属性 $_index 以按您想要的顺序对它们进行排序

# ruby-on-rails-3 - Seed.rb 中变量内的 Rails 迭代变量

> ID：14026485
> 
> 赞同：1
> 
> 时间：2012-12-24T23:30:42.647
> 
> 标签：ruby-on-rails-3, refactoring

在我的 seed.rb 中，我使用来自一个 title-1.txt 文件的文本数据填充 4 列。

```
title  = File.read(File.join(Rails.root, '/features/support/titles/title-1.txt'))  

1.upto(4) do |i|
  PressRelease.create(
    :title => title
  )
end 
```

我想用来自不同 txt 文件（title-1.txt、title-2.txt、...）的不同内容填充每一列

我知道我可以做到这一点：

```
1.upto(4) do |i|
  PressRelease.create(
    :title => File.read(File.join(Rails.root, '/features/support/titles/title-' + "#{i}" +'.txt'))
  )
end 
```

为了简短起见，我尝试将标题变量更改为：（
注意标题-“#{i}”）

```
title  = File.read(File.join(Rails.root, '/features/support/titles/title-' + "#{i}" + '.txt')) 
```

但我收到此错误：
未定义的局部变量或方法'i' for main:Object

任何提示如何制作一个可重用的短变量让我在迭代中使用它？

--**更新** --
这篇文章没有完整的解决方案，从@Paul Fioravanti 的回答中我得到了另一种缩短代码的方法。url 必须存储在没有 File.open 方法的变量中，如下所示：

```
title_url  = '/features/support/titles/title-' + '%s' + '.txt'  

1.upto(4) do |i|
  PressRelease.create(
    :title => File.read(File.join(Rails.root, "#{title_url %i}"))
  )
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:50:19.720

我从[这个 StackOverflow 线程](https://stackoverflow.com/q/646126/567863)得到的这个解决方案怎么样，这样你就可以在循环中保持变量简短，并且在定义变量时不需要定义编号文件`title`：

```
title  = File.read(File.join(Rails.root, '/features/support/titles/title-' + '%s' + '.txt'))
1.upto(4) do |i|
  PressRelease.create(
    :title => title % i
  )
end 
```

# android - Android：语音识别

> ID：14026491
> 
> 赞同：6
> 
> 时间：2012-12-24T23:31:24.403
> 
> 标签：android, voice-recognition

[可能重复]但我没有在下面找到我的问题的答案。

这两天我一直在做一些语音识别方面的研究，但没有得到我的问题的答案：

1.  是否可以将语音识别作为服务运行？我想实现这样的事情：虽然我的电话通过语音识别处于睡眠模式，但我需要拨打一个号码。
2.  当我在火车、公共汽车等上时，语音识别是否可以正常检测单词？
3.  除了语音识别，还有其他传感器可以检测语音吗？
4.  为使语音识别正常工作，用户是否需要靠近手机说话？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-25T02:32:57.943

**1）**将语音识别放入服务中是正确的方法，就像在Google api中所做的那样，其中使用回调方法来获取结果。为了使其持续运行，服务必须处理唤醒锁，以避免陷入睡眠模式。此处提供了更多信息[Wake locks android service recurring](https://stackoverflow.com/questions/5286947/wake-locks-android-service-recurring)它有一个很大的缺点 - 电池使用率高，这是由 CPU 的连续工作和传入声音数据的连续计算引起的。（可以通过过滤器、阈值等来减少）

**2）**语音识别不是一项简单的任务。它需要大量的计算和数据来参考。如果输入音频不清晰（噪音、许多人声等），则很难获得正确的输出。可以做些什么来提高准确性，过滤输入音频：噪声抑制、低通滤波器等。你不能期望 100% 的准确性，但可以达到 80-95%。

更难的是过滤许多人的声音。但是可以使用一些具有自适应阈值的简单幅度（音频强度级别）算法来决定单词何时开始和结束。想法是正确的声音是最响亮的=最接近电话/设备。因此，根据**4）**，当用户靠近麦克风说话时，准确度会更好，因为它是最响亮的声音。

**3）**我不知道您所说的传感器是什么意思，但是有一些算法可以简单地检测人声而不是解码单词。这些算法称为语音活动检测 (VAD) 一些代码应在 Speex 项目文档 [http://www.speex.org/中找到](http://www.speex.org/)

处理语音识别的最简单方法是使用 Google Speech api，它非常好，它可以识别多种语言但需要 Internet 连接——而且需要一段时间才能得到结果。
更快的是 CMU Sphinx，但它的语言模型很少，需要更多的 RAM 内存和处理器计算，因为所有解码都是在设备上进行的。在我看来，当字典（被重新认识的单词）像命令（左、右、后退、停止、开始等）一样小时非常好。

# android - Fragment 和 DialogFragment 之间的通信

> ID：14026492
> 
> 赞同：19
> 
> 时间：2012-12-24T23:31:24.907
> 
> 标签：android, android-fragments, android-alertdialog

我正在尝试制作一个使用[API](http://developer.android.com/reference/android/app/DialogFragment.html)`Fragment`来显示。`Dialog`[`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html)

我的对话框只有一个`EditText`视图，我想将写在上面的字符串传递回`Fragment`.

我能够显示来自 的对话框`Fragment`，但我无法将输入字段中的字符串检索回我的`Fragment`.

我尝试了两种方法来创建对话框：覆盖`DialogFragment.onCreateView`方法并编写整个对话框的视图并覆盖`DialogFragment.onCreateDialog`并使用`AlertDialog.Builder`来更容易编写按钮行为。

[关于对话框将事件传回对话框主机](http://developer.android.com/guide/topics/ui/dialogs.html#PassingEvents)的 Android 文档是关于主机始终是一个`Activity`而不是一个`Fragment`. 我试图概括在我的案例中使用它的行为，但我不能。

我尝试使用`DialogFragment.onAttach`回调来获取`Activity`引用并使用和之间的接口`Fragment`，`DialogFrament`它工作正常，但我无法`Fragment`从 中检索`Activity`以使其工作。

任何人都可以提供一个简短的例子吗？

提前致谢

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-24T23:43:49.293

您可以使用 的[`setTargetFragment`](http://developer.android.com/reference/android/app/Fragment.html#setTargetFragment%28android.app.Fragment,%20int%29)和[`getTargetFragment`](http://developer.android.com/reference/android/app/Fragment.html#getTargetFragment%28%29)方法`Fragment`。您可以将 your 设置`Fragment`为 的目标，`DialogFragment`然后从`DialogFragment`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T23:37:04.437

你可以使用回调。只需在您的对话框片段中实现一个“完成”按钮或类似的东西。

所以在你的对话片段中做这样的事情：

```
protected OnDialogClickedListener callback = null;

public interface OnDialogClickedListener {
    public abstract void onDialogClicked(int position);
}

public void setOnDialogClickedListener(OnDialogClickedListener l){
    callback = l;
}

button.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        callback.onDialogClicked(position);
        dismiss();
    }
}); 
```

在你的活动中做这样的事情：

```
final YourFragment f = YourFragment .newInstance(0);
f.show(ft, "YourFragment ");
f.setOnDialogClickedListener(new OnDialogClickedListener() {
    @Override
    public void onDialogClicked(int position) {
        updateText(position);
        f.dismiss();
    }
}); 
```

# javascript - java脚本中的文件扩展名验证

> ID：14026494
> 
> 赞同：0
> 
> 时间：2012-12-24T23:31:28.437
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JQuery 在输入类型文件中验证文件扩展名？](https://stackoverflow.com/questions/7041854/how-can-the-file-extension-be-validated-in-an-input-type-file-using-jquery)

这是我的文件扩展验证码，以防止上传不需要的文件

有没有更简单的方法来编码？

有人可以改进吗？

```
<script>
function onSubmitForm(re) {
    var formDOMObj = document.frmSend;
    var file1 = formDOMObj.attach1.value;

    var pdf=file1.toLowerCase().lastIndexOf(".pdf");
    var doc=file1.toLowerCase().lastIndexOf(".doc");
    var docx=file1.toLowerCase().lastIndexOf(".docx");
    var xls=file1.toLowerCase().lastIndexOf(".xls");
    var xlsx=file1.toLowerCase().lastIndexOf(".xlsx");
    var wps=file1.toLowerCase().lastIndexOf(".wps");

    if (file1  == "" )
    {
        alert("Please pick a file.")
        return false;
    }
    else
    if ( pdf == -1 && doc == -1 && docx == -1 && xls == -1 && xlsx == -1 && wps == -1 )
    {
        alert("File not acceped. Please upload your RESUME in .pdf, .doc, or docx")
        frmSend.reset(re);
        return false;
    }
    else
        return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T23:42:52.093

为了简化：

```
var extension = file1.split('.').pop().toLowerCase();
var allowed = ['pdf', 'doc', 'docx', 'xls', 'xlsx', 'wps'];

if(allowed.indexOf(extension) === -1) {
    // Not valid.
} 
```

当然，文件不一定包含其扩展名所说的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T23:38:50.420

正则表达式很强大。

```
function onSubmitForm(re) {
    var formDOMObj = document.frmSend;
    var file1 = formDOMObj.attach1.value;

    var acceptedTypes = ["pdf", "doc", "docx", "xls", "xlsx", "wps"];
    var re = new RegExp("\\.(" + acceptedTypes.join("|") + ")$");

    if (file1  == "" )
    {
        alert("Please pick a file.")
        return false;
    }
    if (!re.test(file1))
    {
        alert("File not acceped. Please upload your RESUME in .pdf, .doc, or docx")
        frmSend.reset(re);
        return false;
    }
    return true;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T23:40:16.690

您不需要此代码在您的标签内使用接受

```
<input type="file" accept="application/pdf,application/msword"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T23:42:19.470

您还可以将扩展名分配给 var 并在其上执行 switch case，这样如果您愿意，您也可以处理不同的操作，这是另一种可能的更短的解决方案

```
function onSubmitForm(re) {
    var formDOMObj = document.frmSend;
    var file1 = formDOMObj.attach1.value;
    var ext = file1.match(/\.(.+?)$/)
    ext = ext == null ?"NONE": ext.ext[1].toLowerCase();

    switch (ext) {
        case "":
            alert("Please pick a file.")
            return false;
        case "pdf":
        case "doc":
        case "docx":
        case "xls":
        case "xlsx":
        case "wps":
            return true;
        default:
            alert("File not acceped. Please upload your RESUME in .pdf, .doc, or docx")
            frmSend.reset(re);
            return false;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T00:09:54.760

我认为使用直接的 RegExp 更容易阅读：

```
function onSubmitForm(re) {
    var formDOMObj = document.frmSend;
    var file1 = formDOMObj.attach1.value;

    if (file1  == "" )
    {
        alert("Please pick a file.")
        return false;
    }
    if (!/\.(doc|docx|pdf|wps|xls|xlsx)$/.test(file1))
    {
        alert("File not acceped. Please upload your RESUME in .pdf, .doc, or docx")
        frmSend.reset(re);
        return false;
    }
    return true;
} 
```

# c++ - 当我想发送“vk_up”时，SendInput 发送“num8”？怎么会？

> ID：14026496
> 
> 赞同：5
> 
> 时间：2012-12-24T23:31:58.880
> 
> 标签：c++, winapi, visual-studio-2012

好吧，我正在尝试对游戏进行简单的修改，这是模拟按键的代码：

```
#define PWNFUNC(a) static cell AMX_NATIVE_CALL a(AMX *amx, cell *params)
PWNFUNC(EmulateKeyPressINPUT)
{
    // This structure will be used to create the keyboard
    // input event.
    INPUT ip;

    // Set up a generic keyboard event.
    ip.type = INPUT_KEYBOARD;
    ip.ki.wScan = 0; // hardware scan code for key
    ip.ki.time = 0;
    ip.ki.dwExtraInfo = 0;

    ip.ki.wVk = params[2]; // virtual-key code for the "a" key
    switch(params[1])
    {
        case WM_KEYDOWN:
        ip.ki.dwFlags = 0; // 0 for key press
        break;
        case WM_KEYUP:
        ip.ki.dwFlags = KEYEVENTF_KEYUP;
        break;
    }
    SendInput(1, &ip, sizeof(INPUT));
    return 1;
} 
```

问题在于，当我想发送向上箭头键时，发送了 numpad8 键（可能是因为我的硬件键盘？）。当我按下键盘上的箭头键时，游戏中的飞机会前进。当我模拟向上箭头时，我的推进器会改变旋转（旋转变化映射到数字 8）。同样的情况分别发生在向下箭头 - num2、向左箭头 - num4 和向右箭头 - num6 上。

到底是怎么回事？

__

也许不相关，但如果您想查看控制飞机的代码，就是这样：

（它在 PAWN - 一种脚本语言）

```
 #define KEYPRESS_DOWN 0x0100
        #define KEYPRESS_UP 0x0101
        GetMovementSpeed(pos[0][0],pos[0][1],pos[0][2],true);
        new Float:speed = floatsqroot(pos[0][0]*pos[0][0]+pos[0][1]*pos[0][1]+pos[0][2]*pos[0][2])*174.0;
        if ( speed > 260.0 )
            speed = 260.0;

        if(GetVehicleModel() == 520)//f-22 airplane
        {
            static sent = 0;
            if(IsKeyDown(VK_TAB))
            {
                if(speed < 200.0)
                {
                    EmulateKeyPress(KEYPRESS_UP,VK_DOWN);
                    EmulateKeyPress(KEYPRESS_DOWN,VK_UP);
                    sent = 1;
                    DrawText( id,50.0,160.0,0xFFFFFFFF, "GO birdy!! gooo!!!!" );

                }
                else if(speed > 210.0)
                {
                    EmulateKeyPress(KEYPRESS_UP,VK_UP);
                    EmulateKeyPress(KEYPRESS_DOWN,VK_DOWN);
                    sent = 2;
                    DrawText( id,50.0,160.0,0xFFFFFFFF, "TOO fastststs!!!! SOTTP STOP!!!" );
                }
            }
            else if(sent == 1)
            {
                EmulateKeyPress(KEYPRESS_UP,VK_UP);
                sent = 0;
                DrawText( id,50.0,160.0,0xFFFFFFFF, "You won't see this message" );
            }
            else if(sent == 2)
            {
                EmulateKeyPress(KEYPRESS_UP,VK_DOWN);
                sent = 0;
                DrawText( id,50.0,160.0,0xFFFFFFFF, "Nor this one, c'mon if you do, you can notice a change in one f**king frame between 2 other frames?!" );
            }
            else
            {
                DrawText( id,50.0,160.0,0xFFFFFFFF, "Something other is going on.. our relation ship is too complicated :(" );
            }
        }
        else
        {
            DrawText( id,50.0,160.0,0xFFFFFFFF, "Well, f**k you too, no autopilot if you're not in an F-22.." );
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T14:10:34.953

根据[扫描码 2 页面](http://www.computer-engineering.org/ps2keyboard/scancodes2.html)和它的主页，硬件默认扫描码设置为 2，向上箭头的代码是 E0,75，而 numpad8 只是普通的 75，这意味着箭头键是扩展键，所以你需要启用扩展密钥标志。此代码成功地使您能够操作脚本中的数据：

```
PWNFUNC(EmulateKeyPressINPUT)
{
    // This structure will be used to create the keyboard
    // input event.
    INPUT ip;

    // Set up a generic keyboard event.
    ip.type = INPUT_KEYBOARD;
    ip.ki.dwFlags = 0;
    if(params[4] == 1)
    {
        ip.ki.wScan = params[2]; // hardware scan code for key
        ip.ki.wVk = 0; // virtual-key code for the  key
        ip.ki.dwFlags |= KEYEVENTF_SCANCODE;
    }
    else
    {
        ip.ki.wScan = 0; // hardware scan code for key
        ip.ki.wVk = params[2]; // virtual-key code for the  key
    }

    ip.ki.time = 0;
    ip.ki.dwExtraInfo = 0;

    if(params[3] == 1)
    {
        ip.ki.dwFlags |= KEYEVENTF_EXTENDEDKEY;
    }
    if(params[1] == 1)
    {
        ip.ki.dwFlags |= KEYEVENTF_KEYUP;
    }
    return SendInput(1, &ip, sizeof(INPUT));
} 
```

脚本的示例用法：

```
 GetMovementSpeed(pos[0][0],pos[0][1],pos[0][2],true);
        new Float:speed = floatsqroot(pos[0][0]*pos[0][0]+pos[0][1]*pos[0][1]+pos[0][2]*pos[0][2])*174.0;
        if ( speed > 260.0 )
            speed = 260.0;

        if(GetVehicleModel() == 520)//f-22 airplane
        {
            static sent = 0;
            static status = 0;
            static vKEY_UP = VK_UP;
            static vKEY_DOWN = VK_DOWN;
            static bool:extended = false;
            static bool:hardware = false;
            if(IsKeyDown(VK_KEY_0))
            {
                vKEY_UP = VK_NUMPAD8;
                vKEY_DOWN = VK_NUMPAD2;
            }
            else if(IsKeyDown(VK_KEY_9))
            {
                vKEY_UP = VK_UP;
                vKEY_DOWN = VK_DOWN;
            }
            else if(IsKeyDown(VK_KEY_8))
            {
                extended = true;
            }
            else if(IsKeyDown(VK_KEY_7))
            {
                extended = false;
            }
            else if(IsKeyDown(VK_KEY_6))
            {
                hardware = true;
            }
            else if(IsKeyDown(VK_KEY_5))
            {
                hardware = false;
            }
            DrawText( id,50.0,170.0,0xFFFFFFFF, sprintf("UP: %x DOWN: %x Extended: %d Hardware: %d",vKEY_UP,vKEY_DOWN,extended,hardware) );
            if(IsKeyDown(VK_TAB))
            {
                if(speed < 200.0)
                {
                    if(status == 0)
                    {
                        new PressedKeys[2];
                        PressedKeys[0] = EmulateKeyPress(KEYPRESS_UP,vKEY_DOWN,extended,hardware);
                        PressedKeys[1] = EmulateKeyPress(KEYPRESS_DOWN,vKEY_UP,extended,hardware);
                        DrawTextTimed(id,50.0,210.0,0xFFFFFFFF,sprintf("Presses:{%d,%d} if(speed < 200.0)",PressedKeys[0],PressedKeys[1]),2000,250,0);
                        sent = 1;
                        status = 1;
                    }
                    DrawText( id,50.0,160.0,0xFFFFFFFF, "GO birdy!! gooo!!!!" );
                }
                else if(speed > 210.0)
                {
                    if(status == 0)
                    {
                        new PressedKeys[2];
                        PressedKeys[0] = EmulateKeyPress(KEYPRESS_UP,vKEY_UP,extended,hardware);
                        PressedKeys[1] = EmulateKeyPress(KEYPRESS_DOWN,vKEY_DOWN,extended,hardware);
                        DrawTextTimed(id,50.0,210.0,0xFFFFFFFF,sprintf("Presses:{%d,%d} if(speed > 210.0)",PressedKeys[0],PressedKeys[1]),2000,250,1);
                        sent = 2;
                        status = 1;
                    }
                    DrawText( id,50.0,160.0,0xFFFFFFFF, "TOO fastststs!!!! SOTTP STOP!!!" );
                }
                else
                {
                    status = 0;
                    EmulateKeyPress(KEYPRESS_UP,vKEY_UP,extended,hardware);
                    EmulateKeyPress(KEYPRESS_UP,vKEY_DOWN,extended,hardware);
                }
            }
            else if(sent == 1)
            {
                DrawTextTimed(id,50.0,220.0,0xFFFFFFFF,sprintf("Presses:{%d} if(sent == 1)",EmulateKeyPress(KEYPRESS_UP,vKEY_UP,extended,hardware)),2000,250,2);
                sent = 0;
                status = 0;
                DrawText( id,50.0,160.0,0xFFFFFFFF, "You won't see this message" );
            }
            else if(sent == 2)
            {
                DrawTextTimed(id,50.0,230.0,0xFFFFFFFF,sprintf("Presses:{%d} if(sent == 1)",EmulateKeyPress(KEYPRESS_UP,vKEY_DOWN,extended,hardware)),2000,250,3);
                sent = 0;
                status = 0;
                DrawText( id,50.0,160.0,0xFFFFFFFF, "Nor this one, c'mon if you do, you can notice a change in one frame between 2 other frames?!" );
            }
            else
            {
                DrawText( id,50.0,160.0,0xFFFFFFFF, "Something other is going on.. our relation ship is too complicated :(" );
            }
        }
        else
        {
            DrawText( id,50.0,160.0,0xFFFFFFFF, "Well, no autopilot if you're not in an F-22.." );
        } 
```

允许您使用 5、6、7、8 键更改标志，使用 9 和 0 更改输入键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-28T17:02:12.617

只需添加一个额外的标志`KEYEVENTF_EXTENDEDKEY`：

```
input.ki.dwflags |= KEYEVENTF_EXTENDEDKEY; 
```

# perl - 如何在 Gtk2::TreeView Perl 中设置行的颜色？

> ID：14026501
> 
> 赞同：2
> 
> 时间：2012-12-24T23:33:10.877
> 
> 标签：perl, gtk, gtk2, gtktreeview

我使用 TreeView 和 ListStore 来显示 GUI 表。如何为定义的行设置颜色？有没有样品怎么做？通过谷歌，我找到了一个仅适用于 SimpleList 的示例，但我需要它用于 ListStore。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:07:47.563

有两种方法可以在 TreeView 上设置颜色。第一个是：设置一个将保留颜色的列，然后使用TreeViewColumn“set_attributes”的方法来设置单元格渲染器的颜色。

```
my $list_store = Gtk2::ListStore("Glib::String", "Glib::String"); # keep one note and color
my $tree_view = Gtk2::TreeView->new($list_store);
my $col = Gtk2::TreeViewColumn->new;
my $rend = Gtk2::CellRendererText->new;
$col->pack_start($rend, TRUE);
$col->set_attributes($rend,'text' => $i++, 'background' => 1,);
$tree_view->append_column($col); 
```

* * *

第二种方法是：不要使用额外的列来保持颜色，而是使用 TreeViewColumn 的 set_cell_data_func 方法：

```
$col->set_cell_data_func($rend, sub {
    my ($column, $cell, $model, $iter) = @_;        
    if ($model->get($iter, 0) eq 'Good') {  
        print "Red\n";
        $cell->set('background' => 'red');
    } else {
        $cell->set('background' => 'white');
    }
}); 
```

# android - RestFul 使用 Spring POST 方法

> ID：14026504
> 
> 赞同：1
> 
> 时间：2012-12-24T23:34:31.980
> 
> 标签：android, spring, hibernate, rest

我一直在研究从 Android 设备使用的 Spring RESTful 应用程序。当我尝试发送 POST 请求时会出现我的问题。我的对象在服务器端收到，但所有属性均为空。

我的控制器：

```
@Controller
public class BeanController {

@Autowired
private ReservationService reservationService;

    @RequestMapping(value = "reservation/add/{dateR}", method = RequestMethod.POST)
public ModelAndView addReservation(@RequestBody Reservation reservation, @PathVariable String dateR) {
    Date date = Date.valueOf(dateR);
    boolean result = reservationService.saveReservation(reservation,date);
    return new ModelAndView("beanXmlView", BindingResult.MODEL_KEY_PREFIX + "reservation", result);
    }
} 
```

在我的客户端，我确保设置了对象属性。

我的客户端：

```
Reservation reservation = new Reservation();
            reservation.setDateReservation(Model.date);
            reservation.setSalle(Model.salle);
            if(Model.selectedEquipements.size() == 0)
                reservation.setEquipements(new ArrayList<Equipement>());
            else reservation.setEquipements(Model.selectedEquipements);
            reservation.setPlagesHoraires(Model.selectedPlageHoraires);
            reservation.setUtilisateur(user);
            final String url = "http://10.0.2.2:8080/HibernateSpringREST/";
            RestTemplate restTemplate = new RestTemplate();
            // Add the Jackson and String message converters
            restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
            restTemplate.getMessageConverters().add(new SimpleXmlHttpMessageConverter());
            // Make the HTTP POST request, marshaling the request to JSON, and the response to a String
            restTemplate.postForObject(url + "reservation/add/"+Model.date, reservation, Reservation.class); 
```

有没有人知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T13:10:52.713

根据给出的信息，我无法推断出问题所在。要找出我将按如下方式进行：

1.  在调试模式下运行服务器并在第一行设置断点`addReservation`
2.  观察`reservation`参数是否符合您的预期
3.  如果没有，请检查从客户端发送的 POST 请求，无论是[在设备上还是使用 Fiddler/Wireshark](https://stackoverflow.com/questions/6752978/is-there-http-proxy-like-fiddler-or-wireshark-on-android)

# javascript - 显示以 html 文件字段结尾的文件路径

> ID：14026506
> 
> 赞同：0
> 
> 时间：2012-12-24T23:34:56.643
> 
> 标签：javascript, html

假设我们有`<input type="file" name="my_file>`. 如果我单击选择/选择（或我的浏览器显示的任何内容）并选择一个文件，则该字段将显示文件的路径。

如果文件路径很长，我看不到它的结尾：

如果文件路径是`/very/long/path/to/my/file/my_file.png`则只显示文件名的开头，`/very/long/path...`然后文件字段结束。

我想做一些事情（最好使用javascript），以便浏览器显示文件名结尾而不是开头：`...y/file/my_file.png`。

是否存在适用于所有浏览器的通用解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:38:55.007

检查[FileList](https://developer.mozilla.org/en-US/docs/DOM/FileList) API。他们有一个非常广泛的例子，你可能会觉得有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T20:04:49.883

如果您使用的是 jQuery，请查看此插件 - [https://github.com/ajaxray/bootstrap-file-field](https://github.com/ajaxray/bootstrap-file-field)

它将文件输入字段显示为引导按钮，并将漂亮地显示选定的文件名。此外，您可以使用简单的数据属性设置各种限制。例如，`data-file-types="image/jpeg,image/png"`将限制选择除 jpg 和 png 图像之外的文件类型。

# c++ - 从 byte[] 读取字符串

> ID：14026507
> 
> 赞同：1
> 
> 时间：2012-12-24T23:34:59.303
> 
> 标签：c++

我有一个字节数组，例如它包含长度为 3`0x21, 0x0D, 0x01, 0x03, 0x31, 0x32, 0x33`的 ascii 字符串。 我正在学习，那么有人能告诉我如何从中获取输出并将其放入 a 中吗？非常感谢`"123"``(string starts at 0x03, 0x31, 0x32, 0x33)``"123"``char*`

```
 BYTE Data[] = { 0x0D, 0x01, 0x03, 0x31, 0x32, 0x33 };
                int Length = Data[2];

                //Extract string "123" from Data and store as char* ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:47:49.977

如果您在 BYTE 类型中有 char 大小的数据：

```
#include <iostream>
typedef unsigned char BYTE;
BYTE Data[] = { 0x0D, 0x01, 0x03, 0x31, 0x32, 0x33 };

int main() {
  std::string str(reinterpret_cast<char*>(Data) + 3, 3); 
  std::cout << str << std::endl;
  const char * c = str.c_str();
  std::cout << c << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:45:26.240

这是一个例子：

```
#include <windows.h> // typedef for BYTE
#include <stdio.h>
#include <ctype.h> // isnum(), isalpha(), isprint(), etc

BYTE bytes[] = {
  0x21, 0x0D, 0x01, 0x03, 0x31, 0x32, 0x33
};

#define NELMS(A) (sizeof(A) / sizeof(A[0]))

int 
main(int argc, char *argv[])
{
    char buff[80];
    for (int i=0, j=0; i < NELMS(bytes); i++) {
      if (isprint(bytes[i])) {
        buff[j++] = bytes[i];  
      }
    }
    buff[j] = '\0';
    printf ("buff=%s\n", buff);
    return 0;
} 
```

示例输出：

> buff=!123

您会注意到“0x21”是一个可打印字符（“！”）。您可以使用“isalpha()”或“isalnum()”来代替“isprint()”（可打印的 ASCII 字符）。

'希望有帮助！

# javascript - 您将如何根据表单选择元素的值执行数据库查询？

> ID：14026510
> 
> 赞同：9
> 
> 时间：2012-12-24T23:35:23.857
> 
> 标签：javascript, jquery, ajax, coldfusion, cfml

我使用 ColdFusion 作为我的应用程序服务器和数据库的 SQL Server。我有一个选择表单元素，其中列出了许多车辆：`Volvo S60`, `BMW M6`, `VW Jetta`.

根据用户选择的车辆，我需要我的网页执行数据库查询，以找出他们选择的车辆“类型”，例如 SUV、Coupe、敞篷车。根据从数据库返回的“类型”，数据库将返回适合该车辆类型的选项列表。我的数据库表可以根据车辆下拉列表的值执行此操作，这一切都很好。

现在，我现在想将该车辆“类型”的可用选项列出为一组复选框。这样做应该是遍历数据库结果集并为每一行生成一个复选框的简单案例。

我想在不刷新页面的情况下执行此操作。**如何从下拉列表中动态获取值，将此值传递给数据库，取回结果，然后显示相应的复选框？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T13:23:11.640

我在之前的评论中提到过，在 ColdFusion 中执行此操作的最简单方法是将表单元素绑定到 cfc 方法。谷歌搜索“cfinput bind”会导致很多例子，但由于我被要求提供答案，我将展示一个我曾经写过的例子。这不完全是 OP 想要的，但它显示了总体思路。它将根据另一个文本框的值填充一个文本框。

请注意，cfc 和 cfm 文件必须位于同一目录中。

.cfm 文件

```
<!--- When you type a clinic code here: ---->
<div id="clinicCodeInput" class="hidden">
Clinic Code <input name="clinicCode" type="text" />
</div>

<!---- A query result will appear here ---->
<div id="clinicNameFromPatientSatisfaction" class="hidden">
Patient Satisfaction Name <cfinput type="text" 
name="NameOfClinic" 
bind="cfc:PatientSatisfactionClinics.GetClinicName({clinicCode})" 
bindonload="no"> 
</div> 
```

.cfc 文件

```
<cffunction name="GetClinicName" access="remote" returntype="string">
<cfargument name="clinicCode" type="string" required="yes">
<cfscript>
var clinicName = QueryNew("a");
var returnString = "No Record for Clinic Code " & arguments.clinicCode & ".";
var clinicCodeAsInt = 0;

if (isNumeric(arguments.clinicCode) 
and round(arguments.clinicCode) is arguments.clinicCode)
clinicCodeAsInt = arguments.clinicCode;
</cfscript>

<cfif clinicCodeAsInt gt 0>
<cfquery name="clinicName" datasource="dw">
select name
from patient_satisfaction_clinic
where clinic_code = 
<cfqueryparam cfsqltype="cf_sql_integer" value="#clinicCodeAsInt#">
</cfquery>

<cfif clinicName.recordcount gt 0>
<cfset returnString = clinicName.name[1]>
</cfif>
</cfif>  <!--- clinicCodeAsInt gt 0 --->

<cfreturn returnString>

</cffunction> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T10:46:09.397

[Adobe ColdFusion 文档中`<cfajaxproxy>`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-79f9.html)有一个您需要做什么的示例，该文档演示了必要的技术。这并不*完全*符合您的要求，但只需将标记从纯文本更改为复选框以满足您的要求。这里代码太多，无法复现，但关键是你用来`<cfajaxproxy>`在客户端的JS和服务器端的CFC之间建立一个代理，使JS能够从服务器检索数据。

使用`<cfajaxproxy>`不需要滚动您自己的 JS AJAX 处理，或使用 JQuery（等）来这样做。也就是说，手工操作并不太难……使用该文档中演示的技术将 CF 与前端代码完全分离就很容易了（有一个很好的例子，不使用 CF 来做客户端） -side stuff)...这一切都归结为让事件处理程序监听相关事件，然后以某种方式对服务器进行 AJAX 回调以获取数据，然后将其放入`<div>`或其他东西中。在这种情况下，CF 仅依赖提供代理位：您仍然需要自己做其余的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T22:23:34.530

好的，这就是我所做的，到目前为止似乎对我有用。但我要回顾一下亚当和丹的好回答。

我在 Vehicle.cfm 页面上创建了一个包含所有表单元素的表单，复选框除外。

我创建了一个名为 vehicleOptions.cfm 的新 CFM 模板，它接受一个参数，运行一个 SQL 查询，然后输出实际的 HTML 以创建复选框。

然后我在 Vehicle.cfm 页面上的表单中转到我希望我的复选框出现的区域并输入： `<cfdiv bind="url:cfincludes/vehicleOptions.cfm?VehicleModel={Model}" />`

“模型”是我的表单上元素的 ID，它包含用户选择的车辆的值。因此，现在每当用户更改下拉列表中的模型时，该区域每次都会使用不同的复选框进行更新。它真的很棒，我不必写一行 Javascript！

这个解决方案适用于我想要的，但我猜它不是 ColdFusion AJAX 最优雅的用法？正如我所说，我将审查答案并尝试制定更好的解决方案。感谢所有 CF 开发人员的帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T02:42:48.507

这很简单。每个**选项**都应该有编码在其中的值，例如

```
<select>
<option class="car" name="car" value="volvo">Volvo</option>
<option class="car" name="car" value="honda">Honda</option>
<option class="car" name="car" value="ford">Ford</option>
</select> 
```

然后，您使用 jQuery。

```
$('#go').on('click', function() {
    var car = $('.car:selected').val(); 
    // make ajax call here
});​ 
```

这是一个工作示例：http: [//jsfiddle.net/Yxmjk/](http://jsfiddle.net/Yxmjk/)。它不演示 AJAX 调用，但它演示了如何获取包含在 AJAX 调用中的数据。

# php - 如何使用两个键删除数组中的重复项？

> ID：14026511
> 
> 赞同：0
> 
> 时间：2012-12-24T23:35:31.877
> 
> 标签：php, arrays, duplicates

以下脚本将基于**单个 key从数组****中删除重复**项。我通过以下参考找到了它。参考：[从数组中删除重复项（数组 uni 键）](https://stackoverflow.com/questions/7867350/remove-duplicates-from-array-array-unic-by-key)

 **我的问题是**$initial_data**数组可能包含具有相同**[Post_Date]**值但不同**[Item_Title]**值的项目。

有没有办法修改代码，使其仅在**[Post_Date]**和**[Item_Title]**值相同的情况下删除重复项？

```
 // Remove Duplicates based on 'Post_Date'
    $_data = array();
    foreach ($initial_data as $v) {
      if (isset($_data[$v['Post_Date']])) {
        continue;
      } 
      $_data[$v['Post_Date']] = $v;
    }
    // if you need a zero-based array, otherwise work with $_data
       $unique_results = array_values($_data); 
```

下面是显示 4 个字段的数组的简化输出。原始数组包含 16 个字段。

**$initial_data**：原始数据数组。[ **Post_Date]**值相同，但**[Item_Title]**值不同。

```
Array
(
    [0] => Array
        (
            [id] => 22000
            [Category] => vehicles
            [Post_Date] => 1356373690
            [Item_Title] => Car Painting
        )

    [1] => Array
        (
            [id] => 22102
            [Category] => vehicles
            [Post_Date] => 1356373690
            [Item_Title] => Car Repair

        )
...
) 
```

**$_data**：脚本中的 $_data 数组

```
Array
(
    [1356373690] => Array
        (
            [id] => 22000
            [Category] => vehicles
            [Post_Date] => 1356373690
            [Item_Title] => Car Painting
        )

    [1356373690] => Array
        (
            [id] => 22102
            [Category] => vehicles
            [Post_Date] => 1356373690
            [Item_Title] => Car Repair

        )
...
) 
```

**$unique_results**：最终的唯一结果数组。如您所见，脚本仅根据**[Post_Date]**删除了重复的数组项，但我还需要它来评估**[Item_Title]**值是否不同或相同，以便它不会将此数组项视为重复项。

```
Array
(
    [0] => Array
        (
            [id] => 22000
            [Category] => vehicles
            [Post_Date] => 1356373690
            [Item_Title] => Car Painting
        )
...
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:41:18.070

我想，最简单的方法是使用这两个属性的简单连接作为这个`$data`哈希的键：

```
$key = $v['Post_Date'] . $v['Item_Title'];
if (isset($_data[$key])) {
  continue;
} 
$_data[$key] = $v; 
```

如果 Post_Date 和 Item_Title 可以“重叠”，这显然是行不通的——但从给定的样本中似乎不可能。为了防止这种情况，您可以在其中插入一个分隔符`$key`，如下所示：

```
$key = $v['Post_Date'] . ':' . $v['Item_Title']; 
```

...作为冒号符号显然不会用于存储时间戳字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:58:19.997

你可以用嵌套循环解决这个问题

```
$uniqueData = array();
foreach ($initialData as $item) {
    $exists = false;

    // check if same item was already added to uniqueData array
    foreach ($uniqueData as $uniqueItem)
        if($item['postDate'] == $uniqueItem['postDate'] && $item['itemTitle'] == $uniqueItem['itemTitle'])
            $exists = true;

    // there is no same item in uniqueData array
    if(!$exists)
        $uniqueData[] = $item;
}

print_r($uniqueData); 
```

附带说明一下，在大多数情况下，最好避免使用`continue`语句，因为它会使您的代码更难阅读。**

# iphone - 将 UISlider 连接到 fontSize

> ID：14026512
> 
> 赞同：0
> 
> 时间：2012-12-24T23:35:54.107
> 
> 标签：iphone, ios

将 UISlider 连接到 fontSize [ (IBAction)font1 和 (IBAction)font2 ] 的可能方式。这是代码

。H

```
@interface ViewController : UIViewController
{
    IBOutlet UISlider* fontSizeSlider;
    IBOutlet UITextView* textView;
}
-(IBAction)sliderValueChanged:(UISlider*)sender;
-(IBAction)font1;
-(IBAction)font2;
@end 
```

.m

```
-(IBAction)sliderValueChanged:(UISlider*)sender
{
   textView.font = [UIFont fontWithName:@"??????" size:sender.value];
}

-(IBAction)font1{
   textView.font = [UIFont fontWithName:@"Heiti TC" size:18];
}

-(IBAction)font2{
    textView.font = [UIFont fontWithName:@"Marker Felt" size:18];
}

-(IBAction)font1; //[UIButton]

-(IBAction)font1; //[UIButton]

-(IBAction)sliderValueChanged; //[UISlider] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:54:28.733

如果您想保留正在使用的字体，并在移动滑块时调整它的大小，您可以抓取现有字体实例并将其传递`fontWithSize:`以派生具有相同字体的新字体实例：

```
-(IBAction)sliderValueChanged:(UISlider*)sender
{
   textView.font = [textView.font fontWithSize:sender.value];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:55:24.103

如果我理解正确，您希望能够从两种字体中进行选择。因此，您必须将字体名称存储在`NSString`. 像这样的东西：

。H

```
@interface ViewController : UIViewController
{
    IBOutlet UISlider* fontSizeSlider;
    IBOutlet UITextView* textView;
    NSString *currentFont;
}
-(IBAction)sliderValueChanged:(UISlider*)sender;
-(IBAction)font1;
-(IBAction)font2;
@end 
```

.m

```
-(void)viewDidLoad {
    [super viewDidLoad];
    currentFont = @"Heiti TC"; //Or whatever your default font is
    textView.font = [UIFont fontWithName:currentFont size:sender.value];
}
-(IBAction)sliderValueChanged:(UISlider*)sender
{
   textView.font = [UIFont fontWithName:currentFont size:sender.value];
}

-(IBAction)font1{
   currentFont = @"Heiti TC";
   textView.font = [UIFont fontWithName:currentFont size:fontSizeSlider.value];
}

-(IBAction)font2{
   currentFont = @"Marker Felt";
   textView.font = [UIFont fontWithName:currentFont size:fontSizeSlider.value];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:51:04.853

如果我对您的理解正确，您希望根据滑块的值更改字体大小。尝试使用此代码根据滑块值更改字体大小：

```
- (IBAction)sliderChangeFontSize:(id)sender {
     textView.font = [UIFont fontWithName:@"Heiti TC" size:slider.value];
} 
```

然后将 IBAction 挂钩到 nib 文件中的 Slider 并选择 Sent Event 为“Value Changed”

**或者**

使用您使用的方法应该可以工作。唯一的问题是您必须将滑块委托连接到视图控制器，以便您能够使用发件人值。

# java - 通过`get（0，TimeUnit.Microseconds）`检查`Future`状态是个好主意吗？

> ID：14026513
> 
> 赞同：6
> 
> 时间：2012-12-24T23:35:54.763
> 
> 标签：java, concurrency, executorservice, future

我有一个`Future`，我想知道它的状态是什么。我想到的是这样的代码：

```
try {
    // Is that a good idea? Counting on exceptions looks weird.
    future.get(0, TimeUnit.MICROSECONDS);
    this.status = DONE;
} catch (InterruptedException e) {
    Thread.currentThread().interrupt();
    throw Throwables.propagate(e);
} catch (ExecutionException e) {
    this.status = FAILED;
} catch (TimeoutException e) {
    this.status = RUNNING;
} catch (CancellationException e) {
    this.status = CANCELED;
} 
```

看起来`FutureTask`会尝试持有锁，如果它可以得到锁将检查`Future`状态。所以这似乎是个好主意。

有没有我在这里遗漏的陷阱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T09:10:37.833

正如[评论中所建议的](https://stackoverflow.com/questions/14026513/is-checking-future-state-by-get0-timeunit-microseconds-a-good-idea#comment19373190_14026513)，只需用于[`Future.isDone`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#isDone())检查运行状态。但是，您仍然需要调用`get()`以确定它是否成功完成，检查异常。

# python - 在 Pygame 中，如何清除一个 blit 以将其替换为另一个？

> ID：14026515
> 
> 赞同：0
> 
> 时间：2012-12-24T23:36:13.343
> 
> 标签：python, pygame

我正在制作一个游戏，并且在标题屏幕上，当我在坐标 278,365 处悬停时按返回键时，我希望它能够显示新背景（background1）。如何做到这一点，以便当我在这些坐标处按 Enter 键时，它会删除当前背景并用新的 background1 替换它？

```
screen=pygame.display.set_mode((1024,768),0,32)

background=pygame.image.load(bif).convert()
background1=pygame.image.load(wi1).convert()
cursor=pygame.image.load(mif).convert_alpha()

x,y =278,365

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

        if event.type == KEYDOWN:
            if event.key == K_DOWN:
                x=420
                y=508
            elif event.key == K_UP:
                x=278
                y=365

            elif event.key == K_RETURN and x==420 and y==508:
                pygame.quit()
                sys.exit()

            elif event.key == K_RETURN and x==278 and y==365:

    screen.blit(background, (0,0))
    screen.blit(cursor, (x,y))
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:30:19.250

```
# your code
while True:
    for event in pygame.event.get():
            # more of your code
            elif event.key == K_RETURN and x==420 and y==508:
                pygame.quit()
                sys.exit()

            elif event.key == K_RETURN and x==278 and y==365:
                #just blit the other image on top of it over it
                screen.blit(background1, 0, 0)
            else:
                #no action performed for other background, set normal background
                screen.blit(background, (0,0))
    screen.blit(cursor, (x,y))
    pygame.display.update() 
```

我没有时间测试它，但我希望它有效:)

# .htaccess - 从博主链接到受密码保护的目录中的图像，而不在帖子上显示

> ID：14026517
> 
> 赞同：0
> 
> 时间：2012-12-24T23:37:00.007
> 
> 标签：.htaccess, blogger, protected

我正在尝试将图像嵌入存储在 .htaccess/.htpasswd 受保护目录中的博主博客文章中，并且在没有访问者单击非密码保护缩略图提示输入用户名/密码的情况下没有实际图像显示。路径如下：

缩略图：/mysite/thumbs/image-t.jpg（非保护目录）

图片：/mysite/gallery/image.jpg（受保护目录）

当在博客上以这种方式发布/保存时，缩略图嵌入在帖子中并且可以点击，正如预期/期望的那样。但是，当访问者单击该缩略图时，显示的图像没有登录提示，就好像不受保护一样。如果我直接在浏览器中输入受保护图像的 URL，系统会提示我登录。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:48:24.187

为此，您需要能够在帖子中包含代码，否则无法完成，尤其是因为大多数博客会去除 html 标签以保护其网站的安全性并防止垃圾邮件。

但是，如果您确实有权添加代码，则取决于博客中使用的编程语言，您可以添加一个条件语句，例如...

```
if $logged-in = "1" then
     // display image here
  else
     // nothing
end if 
```

$logged-in 的变量必须是您的特定博客使用的变量。

# php - 将本地化从 PHP 转移到 Javascript

> ID：14026525
> 
> 赞同：1
> 
> 时间：2012-12-24T23:40:13.990
> 
> 标签：php, javascript, localization

我用 PHP 为我的 wabsite 编写了本地化。由于我也在使用 Javascript (jQuery) 来动态添加一些标签，因此我在本地化方面遇到了问题。

例如：我动态添加评论。用户可以点击“显示更多评论”，显示下一页的评论。如果显示所有评论，则文本更改为“显示所有评论”。但是这种方式，没有任何东西是本地化的，因为它只使用 Javascript。

如何将本地化转移到 javascript？我目前的想法是创建一个 PHP 脚本，它可以接受一个 GET 变量，例如“all-comments”。然后它会搜索它的本地化版本，并返回一个 JSON 字符串。有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T23:48:06.060

有很多方法可以解决这个问题。

*   如果您想在服务器端 PHP 逻辑中处理所有本地化，您可以让所有更改 DOM 内容的调用从服务器中提取新的本地化内容（通过 AJAX）。
*   或者，如果您不希望服务器调用但仍希望通过 PHP 生成所有本地化，则可以使用一组本地化预填充 javascript 对象，以用于该页面上可能需要显示的任何内容。
*   如果您想在 javascript 中保留 javascript 本地化，您可以在服务器上本地化 js 文件（或者至少具有本地化的 javascript 语言文件，例如包含具有所有本地化的 javascript 对象）。

# python - ip地址的python解析文件

> ID：14026529
> 
> 赞同：3
> 
> 时间：2012-12-24T23:40:59.353
> 
> 标签：python

我有一个包含多个 IP 地址的文件。4行txt大约有900个IP。我希望输出为每行 1 个 IP。我怎样才能做到这一点？基于其他代码，我想出了这个，但它失败了，因为多个 IP 在单行上：

```
import sys
import re

try:
    if sys.argv[1:]:
        print "File: %s" % (sys.argv[1])
        logfile = sys.argv[1]
    else:
        logfile = raw_input("Please enter a log file to parse, e.g /var/log/secure: ")
    try:
        file = open(logfile, "r")
        ips = []
        for text in file.readlines():
           text = text.rstrip()
           regex = re.findall(r'(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})$',text)
           if regex is not None and regex not in ips:
               ips.append(regex)

        for ip in ips:
           outfile = open("/tmp/list.txt", "a")
           addy = "".join(ip)
           if addy is not '':
              print "IP: %s" % (addy)
              outfile.write(addy)
              outfile.write("\n")
    finally:
        file.close()
        outfile.close()
except IOError, (errno, strerror):
        print "I/O Error(%s) : %s" % (errno, strerror) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T23:52:36.757

表达式中的`$`锚阻止您找到除最后一个条目之外的任何内容。删除它，然后使用返回的列表`.findall()`：

```
found = re.findall(r'(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})',text)
ips.extend(found) 
```

`re.findall()`将始终返回一个列表，该列表可能为空。

*   如果您只想要唯一的地址，请使用集合而不是列表。
*   如果您需要验证 IP 地址（包括忽略私有网络和本地地址），请考虑[`ipaddress.IPV4Address()`使用](https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv4Address).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:44:23.140

findall 函数返回一个匹配数组，您不会遍历每个匹配项。

```
regex = re.findall(r'(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})\.(?:[\d]{1,3})$',text)
if regex is not None:
    for match in regex:
        if match not in ips:
            ips.append(match) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T22:41:22.140

**从文件中提取 IP 地址**

[我在这个讨论](https://stackoverflow.com/questions/17327912/python-parse-ipv4-addresses-from-string-even-when-censored/24113743#24113743)中回答了一个类似的问题。简而言之，这是一个基于我正在进行的项目之一的解决方案，用于从不同类型的输入数据（例如字符串、文件、博客发布等）中提取基于网络和主机的指标：[https ://github.com/JohnnyWachter/intel](https://github.com/JohnnyWachter/intel)

* * *

我将导入*IPAddresses*和*Data*类，然后使用它们以下列方式完成您的任务：

```
#!/usr/bin/env/python

"""Extract IPv4 Addresses From Input File."""

from Data import CleanData  # Format and Clean the Input Data.
from IPAddresses import ExtractIPs  # Extract IPs From Input Data.

def get_ip_addresses(input_file_path):
    """"
    Read contents of input file and extract IPv4 Addresses.
    :param iput_file_path: fully qualified path to input file. Expecting str
    :returns: dictionary of IPv4 and IPv4-like Address lists
    :rtype: dict
    """

    input_data = []  # Empty list to house formatted input data.

    input_data.extend(CleanData(input_file_path).to_list())

    results = ExtractIPs(input_data).get_ipv4_results()

    return results 
```

*   现在您有了一个列表字典，您可以轻松地访问您想要的数据并以您想要的任何方式输出它。下面的例子利用了上面的函数；将结果打印到控制台，并将它们写入指定的输出文件：

    ```
    # Extract the desired data using the aforementioned function.
    ipv4_list = get_ip_addresses('/path/to/input/file')

    # Open your output file in 'append' mode.
    with open('/path/to/output/file', 'a') as outfile:

        # Ensure that the list of valid IPv4 Addresses is not empty.
        if ipv4_list['valid_ips']:

            for ip_address in ipv4_list['valid_ips']:

                # Print to console
                print(ip_address)

                # Write to output file.
                outfile.write(ip_address) 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T01:08:47.650

没有`re.MULTILINE`标志`$`仅在字符串末尾匹配。

为了使调试更容易，将代码分成几个部分，您可以独立测试。

```
def extract_ips(data):
    return re.findall(r"\d{1,3}(?:\.\d{1,3}){3}", data) 
```

*   正则表达式过滤掉一些有效的 ip，例如[`2130706433`"1::1"](https://stackoverflow.com/questions/14026529/python-parse-file-for-ip-addresses#comment19373351_14026529)。

*   相反，正则表达式匹配无效字符串，例如`999.999.999.999`. 您可以使用[或更通用](https://stackoverflow.com/a/4017219/4279)[的方法验证 ip 字符串`socket.inet_aton()``socket.inet_pton()`](https://stackoverflow.com/a/4017219/4279)。您甚至可以在不搜索 ip 的情况下将输入分成几部分，并使用这些函数来保持有效的 ips。

如果输入文件很小并且您不需要保留 ips 的原始顺序：

```
with open(filename) as infile, open(outfilename, "w") as outfile:
    outfile.write("\n".join(set(extract_ips(infile.read())))) 
```

除此以外：

```
with open(filename) as infile, open(outfilename, "w") as outfile:
    seen = set()
    for line in infile:
        for ip in extract_ips(line):
            if ip not in seen:
               seen.add(ip)
               print >>outfile, ip 
```

# facebook - 来自公共应用程序的 Facebook Connect

> ID：14026535
> 
> 赞同：0
> 
> 时间：2012-12-24T23:42:24.837
> 
> 标签：facebook, api, rest, web-applications

我正在构建一个 RESTful API，我希望允许用户通过 Facebook 登录或注册。

我的麻烦如下：

*   如果 Facebook Connect 是在*客户端*执行的，我想我必须在 SDK 中添加 APP_ID 和 APP_SECRET，这对安全性不利。
*   如果 Facebook Connect 是在*服务器端*执行的，那么当他没有登录 Facebook（例如在他的 iPhone 上）时，用户体验可能会更差。

所以我真的不知道该怎么做……顺便说一句，我说的对吗？

是否有完美的方法来处理移动应用程序的基本 Facebook Connect？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T02:54:25.147

为每个平台使用适当的 SDK，直到获得`access_token`. 通过 HTTP SSL 将该 access_token 传递给您的 API 调用，例如`facebook_login`.

在 API 端，对 Graph API 进行服务器端调用以获取 facebook `user_id`。将该 user_id 与数据库中的记录相匹配，您就知道您正在处理的是哪个用户！

现在，您可以像处理任何其他 API 登录情况一样处理此问题。向他们传递令牌或其他东西以供将来的 API 调用使用，或者您选择对其进行身份验证。

# angularjs - Angularjs中的锚链接？

> ID：14026537
> 
> 赞同：79
> 
> 时间：2012-12-24T23:43:47.487
> 
> 标签：angularjs

是否可以在 Angularjs 中使用锚链接？

IE：

```
 <a href="#top">Top</a>
 <a href="#middle">Middle</a>
 <a href="#bottom">Bottom</a>

 <div name="top"></div>
 ...
 <div name="middle"></div>
 ...
 <div name="bottom"></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-08-22T06:19:05.290

似乎有几种方法可以做到这一点。

### 选项 1：原生 Angular

Angular 提供了一项`$anchorScroll`服务，但文档严重缺乏，我无法让它工作。

查看[http://www.benlesh.com/2013/02/angular-js-scrolling-to-element-by-id.html](http://www.benlesh.com/2013/02/angular-js-scrolling-to-element-by-id.html)了解`$anchorScroll`.

### 选项 2：自定义指令/本机 JavaScript

我测试的另一种方法是创建自定义指令并使用`el.scrollIntoView()`. 通过在指令链接函数中基本上执行以下操作，这非常有效：

```
var el = document.getElementById(attrs.href);
el.scrollIntoView(); 
```

但是，当浏览器本身支持时，同时执行这两项操作似乎有点夸大其词，对吧？

### 选项 3：角度覆盖/本机浏览器

如果您查看[http://docs.angularjs.org/guide/dev_guide.services.$location](http://docs.angularjs.org/guide/dev_guide.services.%24location)及其 HTML 链接重写部分，您会发现链接未在以下内容中重写：

> 包含目标元素的链接
> 
> 例子：`<a href="/ext/link?a=b" target="_self">link</a>`

因此，您所要做的就是将`target`属性添加到链接中，如下所示：

```
<a href="#anchorLinkID" target="_self">Go to inpage section</a> 
```

Angular 默认使用浏览器，因为它是一个锚链接而不是不同的基本 url，浏览器会根据需要滚动到正确的位置。

我选择了选项 3，因为它最好在这里依赖本机浏览器功能，并且可以节省我们的时间和精力。

**需要注意的是，在成功滚动和散列更改之后，Angular 会跟进并将散列重写为其自定义样式。但是，浏览器已经完成了它的业务，你可以开始了。**

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-26T01:08:10.380

我不知道这是否回答了您的问题，但是可以，您可以使用 angularjs 链接，例如：

`<a ng-href="http://www.gravatar.com/avatar/{{hash}}"/>`

AngularJS 网站上有一个很好的例子：

[http://docs.angularjs.org/api/ng.directive:ngHref](http://docs.angularjs.org/api/ng.directive:ngHref)

更新：AngularJS 文档有点晦涩难懂，并没有为它提供一个好的解决方案。对不起！

您可以在这里找到更好的解决方案：[如何在 AngularJS 中处理锚散列链接](https://stackoverflow.com/questions/14712223/how-to-handle-anchor-hash-linking-in-angularjs)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-10-18T22:09:31.957

您可以尝试使用[anchorScroll](http://docs.angularjs.org/api/ng.%24anchorScroll)。

[例子](http://plnkr.co/edit/QeU4oPJ1f0tx5b0tyFFX?p=preview)

所以控制器将是：

```
app.controller('MainCtrl', function($scope, $location, $anchorScroll, $routeParams) {
  $scope.scrollTo = function(id) {
     $location.hash(id);
     $anchorScroll();
  }
}); 
```

和观点：

```
<a href="" ng-click="scrollTo('foo')">Scroll to #foo</a> 
```

...锚ID没有秘密：

```
<div id="foo">
  This is #foo
</div> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-27T04:25:29.233

$anchorScroll 确实是这个问题的答案，但是在更新的 Angular 版本中有更好的方法来使用它。

现在，$anchorScroll 接受哈希作为可选参数，因此您根本不必更改 $location.hash。（[文档](https://docs.angularjs.org/api/ng/service/$anchorScroll)）

这是最好的解决方案，因为它根本不影响路线。我无法让任何其他解决方案发挥作用，因为我正在使用 ngRoute，并且在我设置后，该路由将立即重新加载`$location.hash(id)`，然后 $anchorScroll 才能发挥它的魔力。

以下是如何使用它...首先，在指令或控制器中：

```
$scope.scrollTo = function (id) {
  $anchorScroll(id);  
} 
```

然后在视图中：

```
<a href="" ng-click="scrollTo(id)">Text</a> 
```

此外，如果您需要考虑固定导航栏（或其他 UI），您可以像这样设置 $anchorScroll 的偏移量（在主模块的运行功能中）：

```
 .run(function ($anchorScroll) {
      //this will make anchorScroll scroll to the div minus 50px
      $anchorScroll.yOffset = 50;
  }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-02T18:12:56.973

我有同样的问题，但这对我有用：

```
<a ng-href="javascript:void(0);#tagId"></a> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-09T18:17:48.383

为我工作：

```
 <a onclick='return false;' href="" class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" ng-href="#profile#collapse{{$index}}"> blalba </a> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-25T20:43:02.237

您只需将 target="_self" 添加到您的链接

前任。`<a href="#services" target="_self">Services</a><div id="services"></div>`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-23T09:48:39.967

或者你可以简单地写：

`ng-href="\#yourAnchorId"`

请注意井号前面的反斜杠

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-16T02:02:35.700

对我来说最好的选择是创建一个指令来完成这项工作，因为`$location.hash()`劫持 `$anchorScroll()`URL 会给我的 SPA 路由带来很多问题。

```
MyModule.directive('myAnchor', function() {
  return {
    restrict: 'A',
    require: '?ngModel',
    link: function(scope, elem, attrs, ngModel) {
      return elem.bind('click', function() {
        //other stuff ...
        var el;
        el = document.getElementById(attrs['myAnchor']);
        return el.scrollIntoView();
      });      
    }
  };
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-04T11:51:00.343

如果您使用的是 SharePoint 和 Angular，请执行以下操作：

```
<a ng-href="{{item.LinkTo.Url}}" target="_blank" ng-bind="item.Title;" ></a> 
```

其中 LinkTo 和 Title 是 SharePoint 列。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-12T15:07:32.843

您还可以从控制器内部导航到 HTML id

```
$location.hash('id_in_html'); 
```

# javascript - 我可以在javascript中将数组附加到“formdata”吗？

> ID：14026539
> 
> 赞同：48
> 
> 时间：2012-12-24T23:43:55.643
> 
> 标签：javascript, jquery, arrays, multipartform-data

我正在使用 FormData 上传文件。我还想发送一组其他数据。

当我只发送图像时，它工作正常。当我将一些文本附加到表单数据时，它工作正常。当我尝试附加下面的“标签”数组时，其他一切正常，但没有发送数组。

FormData 和附加数组的任何已知问题？

实例化表单数据：

`formdata = new FormData();`

我创建的数组。Console.log 显示一切正常。

```
 // Get the tags
        tags = new Array();
        $('.tag-form').each(function(i){
            article = $(this).find('input[name="article"]').val();
            gender = $(this).find('input[name="gender"]').val();
            brand = $(this).find('input[name="brand"]').val();
            this_tag = new Array();
            this_tag.article = article;
            this_tag.gender = gender;
            this_tag.brand = brand;
            tags.push(this_tag);    
            console.log('This is tags array: ');
            console.log(tags);
        });
        formdata.append('tags', tags);
        console.log('This is formdata: ');
        console.log(formdata); 
```

我如何发送它：

```
 // Send to server
        $.ajax({
            url: "../../build/ajaxes/upload-photo.php",
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (response) {
                console.log(response);
                $.fancybox.close();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-24T23:47:32.400

这个怎么样？

```
formdata.append('tags', JSON.stringify(tags)); 
```

...并且相应地，`json_decode`在服务器上使用它来解析它。看，FormData.append 的第二个值可以是...

> Blob、File 或字符串，如果两者都不是，则将值转换为字符串

在我看来，您的`tags`数组包含对象（@Musa 是对的，顺便说一句；创建`this_tag`一个数组，然后为其分配字符串属性是没有意义的；请改用普通对象），因此本机转换（with `toString()`）是不够的。不过，JSON'ing 应该可以获取信息。

作为旁注，我会将属性分配块重写为：

```
tags.push({article: article, gender: gender, brand: brand}); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-01-23T03:46:38.133

写作

```
var formData = new FormData;
var array = ['1', '2'];
for (var i = 0; i < array.length; i++) {
    formData.append('array_php_side[]', array[i]);
} 
```

您可以通过 php 接收正常的数组 post/get。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-19T15:41:05.587

用作`"xxx[]"`formdata 中字段的名称（您将获得一个 - 字符串化对象数组 - 在您的情况下）

所以在你的循环中

```
$('.tag-form').each(function(i){
            article = $(this).find('input[name="article"]').val();
            gender = $(this).find('input[name="gender"]').val();
            brand = $(this).find('input[name="brand"]').val();
            this_tag = new Array();
            this_tag.article = article;
            this_tag.gender = gender;
            this_tag.brand = brand;
            //tags.push(this_tag);    
            formdata.append('tags[]', this_tag);
... 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-08-13T13:39:22.413

我们可以简单地这样做。

```
formData = new FormData;
words = ["apple", "ball", "cat"]
words.forEach((item) => formData.append("words[]", item))

// verify the data
console.log(formData.getAll("words[]"))
//["apple", "ball", "cat"]
```

在服务器端，您将获得`words = ["apple", "ball", "cat"]`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-26T13:21:21.877

功能：

```
function appendArray(form_data, values, name){
    if(!values && name)
        form_data.append(name, '');
    else{
        if(typeof values == 'object'){
            for(key in values){
                if(typeof values[key] == 'object')
                    appendArray(form_data, values[key], name + '[' + key + ']');
                else
                    form_data.append(name + '[' + key + ']', values[key]);
            }
        }else
            form_data.append(name, values);
    }

    return form_data;
} 
```

利用：

```
var form = document.createElement('form');// or document.getElementById('my_form_id');
var formdata = new FormData(form);

appendArray(formdata, {
    sefgusyg: {
        sujyfgsujyfsg: 'srkisgfisfsgsrg',
    },
    test1: 5,
    test2: 6,
    test3: 8,
    test4: 3,
    test5: [
        'sejyfgjy',
        'isdyfgusygf',
    ],
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-17T05:36:05.813

只需您可以这样做：

```
var formData = new FormData();
formData.append('array[key1]', this.array.key1);
formData.append('array[key2]', this.array.key2); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-29T10:07:23.967

```
var formData = new FormData;
var alphaArray = ['A', 'B', 'C','D','E'];
for (var i = 0; i < alphaArray.length; i++) {
    formData.append('listOfAlphabet', alphaArray [i]);
} 
```

并且在您的请求中，您将获得一系列字母。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-24T11:48:10.180

```
var formData = new FormData; var arr = ['item1', 'item2', 'item3'];

arr.forEach(item => {
    formData.append(
        "myFile",item
    ); }); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-27T10:20:39.613

当我发送文件+文本+数组时，这对我有用：

```
const uploadData = new FormData();
if (isArray(value)) {
  const k = `${key}[]`;
  uploadData.append(k, value);
} else {
  uploadData.append(key, value);
}

const headers = {
  'Content-Type': 'multipart/form-data',
}; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-21T11:16:05.917

您只能对数组进行字符串化并附加它。将数组作为实际数组发送，即使它只有一项。

```
const array = [ 1, 2 ];
let formData = new FormData();
formData.append("numbers", JSON.stringify(array)); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-31T03:46:03.697

我就是这样做的：

```
const data = new FormData();
data.append('id', class.id);
data.append('name', class.name);

class.people.forEach((person, index) => {
    data.append(`people[${index}].id`, person.id);
    data.append(`people[${index}].firstname`, person.firstname);
    data.append(`people[${index}].lastname`, person.lastname);

    // Append images
    person.images.forEach((image, imageIndex) =>
        data.append(`people[${index}].images`, {
            name: 'image' + imageIndex,
            type: 'image/jpeg',
            uri: image,
        })
    );
}); 
```

*我在前端使用 React，在后端使用 Asp.Net。*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-06T13:42:28.730

在前端使用 JSON.stringify 如下：

```
...
...
const entityData = new FormData();
entityData.append("Entities Open", JSON.stringify(login_entities));
axios
.post("/oneview/load_entity", entityData)
.then(response => {
   var entity_group = response.data.entity_group;
   var entity_code = response.data.entity_code;
   var entity_name = response.data.entity_name;
})
.catch(error => {
   console.log(error);
   alert(error);
}); 
```

然后在后端使用 json.loads() 如下：

```
...
...
login_entities = json.loads(request.POST.get('Entities Open'))
for i in login_entities:
   ...
   ... 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-09T08:13:21.423

我正在使用 vuejs 中的 formData
为我发送文件（数组），下面的代码正在运行

```
 if(this.requiredDocumentForUploads.length > 0) {
            this.requiredDocumentForUploads.forEach(file => {
                var name = file.attachment_type  // attachment_type is using for naming
                if(document.querySelector("[name=" + name + "]").files.length > 0) {
                    formData.append("requiredDocumentForUploadsNew[" + name + "]", document.querySelector("[name=" + name + "]").files[0])
                }
            })
        } 
```

# apache-flex - Flash / Flash Builder 图形对象

> ID：14026540
> 
> 赞同：0
> 
> 时间：2012-12-24T23:44:14.603
> 
> 标签：apache-flex, flash-builder, flash-cs5, flash

我试图找到在 as3 中使用 Flash 图形的最佳方法。目前我在 Flash 中创建图形并将其导出到 swc 库中。然后我在 as3 项目的 Flash/flex builder 中使用它。

我想模仿 Flash 的行为。在 Flash 中，您可以为影片剪辑指定类名。如果类名与现有类的名称相同，则影片剪辑将嵌入 Flash 中定义的图形和类中定义的代码。

当图形在 swc 库中定义时，是否有任何方法可以在 Flash Builder 中执行相同的操作？拥有一个同名的课程似乎没有帮助。继承不是解决方案，因为类可能必须扩展另一个类。我现在使用的唯一选项是使用 this.addChild(); 将图形电影剪辑添加到类中；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T02:36:26.190

阅读有关[在 Flex 中嵌入资产的](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html#175759)文档。这是语法：

```
[Embed(source='SWFFileName.swf', symbol='symbolName')]
[Bindable]
public var imgCls:Class; 
```

然后，您可以将“imgCls”变量用作 Sprite：

```
 protected var imgClsInstance : Sprite = new imgCls();
 // enter other sizing, positioning, or other processing of imgClsInstance here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:49:03.033

如果你想在movieClip中有你的方法，你可以像这样分配

```
movieClip.doSomething = doSomething;

//your function
protected function doSomething(...args):void{

} 
```

如果您想在该 MovieClip 的所有实例中使用它们，您应该做类似的事情，但使用原型： `MyMovieClipClass.prototype.doSomething= doSomething`；

# signalr - SignalR MVC3 网站和 WPF 客户端

> ID：14026551
> 
> 赞同：4
> 
> 时间：2012-12-24T23:46:20.030
> 
> 标签：signalr, signalr-hub

我在 IIS Express 上设置了一个 SignalR 集线器和一个带有标准聊天示例应用程序的示例网站。它在浏览器中运行良好，我可以看到同时在不同浏览器中显示的消息。不幸的是，我在获得类似于在 WPF 中工作的东西时遇到了障碍。

我已经设置了聊天示例作为基础。最终，我需要服务器将更新推送到所有连接的 WPF 客户端。有人能告诉我哪里出错了吗？

**中心：**

```
public class Chat : Hub
{
    public void Send(string message)
    {
        Clients.All.send(message);
    }
} 
```

**WPF示例类：**

```
public class ChatSample
{
    public ChatSample()
    {
        var hubConnection = new HubConnection("http://localhost:21638/");
        var proxy = hubConnection.CreateHubProxy("Chat");
        proxy.On<string>("send", Console.WriteLine);
        hubConnection.Start().Wait();
    }
} 
```

**当前的实现在以下方面给出了以下例外：**

```
hubConnection.Start().Wait();

{"The remote server returned an error: (401) Unauthorized."} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T23:46:20.030

当我输入问题时，我找到了解决方案。以为我会把它留在这里，以防它帮助其他人。我只需要在以下位置提供凭据`HubConnection`：

```
hubConnection.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

# python - python Templer有红宝石替代品吗？

> ID：14026557
> 
> 赞同：0
> 
> 时间：2012-12-24T23:48:14.117
> 
> 标签：python, ruby, zopeskel

在 Python 中，通常使用 ZopeSkel 生成应用程序骨架。最近 ZopeSkel 被重构以定义一个名为 Templer 的新模块。在创建骨架 Templer 的过程中，不仅复制目录，还在模板文件中设置值，询问用户并运行进程。

我不知道Ruby中有类似的东西。有没有类似的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T06:54:52.277

对于 Rails，有几个“自定义”生成器：

*   [https://github.com/RailsApps/rails-composer](https://github.com/RailsApps/rails-composer)
*   [https://github.com/RailsApps/rails_apps_composer](https://github.com/RailsApps/rails_apps_composer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T16:43:54.643

[Monk 项目](https://github.com/monkrb/monk)就是这样做的。如果你环顾四周，你会发现很多其他人的骷髅也可以使用。

# java - 何时使用环境变量与系统属性？

> ID：14026558
> 
> 赞同：12
> 
> 时间：2012-12-24T23:48:50.510
> 
> 标签：java, environment-variables, system-properties

我想知道以下哪个是首选方法？

我们可以将事物设置为`APP_HOME=/path/to/file`( `export`in`.profile`或类似的东西) 并将其访问为`System.getenv("APP_HOME")`

或者，或者使用属性 as`-DAPP_HOME=/path/to/file`并将其访问为`System.getProperty("APP_HOME")`

现在.. 任何一个都可以为应用程序的立场提供价值，但是这两种方法都是首选吗？为什么？什么时候？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-25T00:14:18.293

Javadoc for`System.getenv(String)`直接解决了这个问题，[说](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#EnvironmentVSSystemProperties)：

> *系统属性*和*环境变量*在概念上都是名称和值之间的映射。这两种机制都可用于将用户定义的信息传递给 Java 进程。环境变量具有更全局的影响，因为它们对定义它们的进程的所有后代可见，而不仅仅是直接的 Java 子进程。在不同的操作系统上，它们可能具有细微的不同语义，例如不区分大小写。由于这些原因，环境变量更有可能产生意想不到的副作用。 **最好尽可能使用系统属性。** 当需要全局效果或外部系统接口需要环境变量（例如`PATH`）时，应使用环境变量。

（强调我的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T00:12:09.550

如果您使用的是 Java 1.3 或 1.4（和 1.2，IIRC），您应该使用系统属性，因为`System.getenv`已弃用。它在 Java 1.5 中恢复。相关的错误报告可以在[这里](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4199068)找到。

您可以同时使用两者。搜索密钥的系统属性，如果它不存在，则搜索环境。这为您提供了两全其美的体验。

这些真的不是一回事：一个需要明确设置值，另一个不需要。另外，请注意，环境是放置一些字符串以实现互操作性的便利位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T05:11:29.010

目前还不能发表评论，所以我将添加几点作为答案。

我同意 javadoc 的说法“最好在可能的情况下使用系统属性。”，用我自己的话来说，在看到这个页面之前，Java 系统变量被封装在 JVM 中。它们对主机上的其他进程不可见，因此与主机系统的耦合较少。

此外，有多个接口可以设置全局环境变量，因此随着时间的推移跟踪所有正在使用的值可能有点棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T07:30:52.880

应该考虑使用环境变量（envs）和系统属性之间的一个重要区别是环境变量不能在运行时/在运行过程中更改，但系统属性可以。参考Javadoc：

[https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#setProperties-java.util.Properties-](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#setProperties-java.util.Properties-)

# winapi - 如何从活动登录表中删除用户名？

> ID：14026561
> 
> 赞同：2
> 
> 时间：2012-12-24T23:49:05.500
> 
> 标签：winapi, c#-4.0, vba

我想创建一个只允许同一用户进行单一登录会话的应用程序。即该用户没有并发登录。

我创建了一个存储当前登录列表的表。当用户注销或退出应用程序时，用户名将从登录表中删除。

但是当用户异常中止程序或由于应用程序崩溃时，用户名仍然留在登录列表表中。当用户再次尝试登录时，系统将拒绝他的登录，因为他的用户名仍在登录列表中。

我该如何克服这个问题？应用异常退出，如何从登录列表中删除用户名？

非常感谢您的建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T00:07:17.010

For any user that opens the database (via AutoExec) you might have a hidden form that runs 2 modules on a timer. The first module will "Check in" every x minutes and add a time-stamp to the login table you have created. The second will check that for every username on the table, they have an associated time-stamp within x minutes, and if not, remove them from the table.

There are probably more efficient ways to do this, but off the top of my head: add a yes/no "MarkForDeletion" column to your table so you can run an UPDATE query on any time-stamp row that is out of date. Then run a DELETE query for those rows marked for deletion.

```
Public Sub CheckIn()

'Code to UPDATE now() onto table where you have added the current username

End Sub

Public Sub AuditCheckIn()

'UPDATE SQL here
'DELETE SQL here

End Sub 
```

Example of Update SQL:

```
----assuming you are checking in every 2 minutes
UPDATE Logins SET Logins.Deletion = -1
WHERE (((Logins.Timestamp)<=DateAdd("n",2,Now()))); 
```

Example of Delete SQL:

```
-----Presumably you already have this, just add:
WHERE Logins.Deletion=-1 
```

# ruby - 使用 JSON 的 Sinatra POST 错误

> ID：14026562
> 
> 赞同：1
> 
> 时间：2012-12-24T23:49:07.720
> 
> 标签：ruby, json, post, curl, sinatra

我正在学习 Ruby + Sinatra，并在[这里](http://alfuken.tumblr.com/post/874428235/upload-and-download-files-in-sinatra)找到了一篇关于如何上传文件的好帖子。

```
post '/upload/:filename' do
  userdir = "./upload"
  FileUtils.mkdir_p(userdir) unless File.exists?(userdir)
  filename = File.join(userdir, params[:filename])
  datafile = params[:data]
  File.open(filename, 'wb') do |file|
    file.write(datafile[:tempfile].read)
  end
end 
```

我可以使用以下 cURL 命令很好地上传文件。

```
curl -v -F "data=@/Users/me/Desktop/test.pdf"  http://localhost:4567/upload/test.pdf 
```

但现在我决定使用 JSON 来处理所有传入/传出响应。我试过这个，但它似乎没有用。

```
curl -i -X POST -H Accept:application/json -H Content-Type:application/json -d '{file:{filename:"test.pdf",md5sum:"ab3d2f"}}'  --data-binary @/Users/me/Desktop/test.pdf 'http://localhost:4567/upload/test.pdf' 
```

我也收到这样的错误：

```
NoMethodError at /upload/test.pdf
undefined method `get' for #<WebTest:0x101374dd8>
file: web.rb location: POST /upload/:filename line: 48 
```

我现在该怎么办？

**编辑：**

第48行是这个`file.write(datafile[:tempfile].read`

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:57:08.277

我不确定你期望你的第二个 curl 命令做什么，但我很确定它没有做你想要的。如果您为 curl 提供多个`--data`或`-d`参数，它们的值将连接在一起，以 . 分隔`&`。

例如，如果您有一个`test.txt`包含内容的文件`This is a test.`并且您确实请求这样：

```
curl -i -X POST -H Accept:application/json -H Content-Type:application/json \
    -d '{file:{filename:"test.txt",md5sum:"ab3d2f"}}'                  \
    --data-binary @test.txt 'http://localhost:4567/upload/test.txt' 
```

这是请求的样子：

```
POST /upload/test.txt HTTP/1.1
User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Host: localhost:4567
Accept:application/json
Content-Type:application/json
Content-Length: 61

{file:{filename:"test.txt",md5sum:"ab3d2f"}}&This is a test. 
```

请求正文不是有效的 JSON。它也不是有效的 URL 编码表单数据或多部分表单数据。

如何将 JSON 请求与文件上传结合起来并不明显。以下是一些选项：

*   只需使用`multipart/form-data`. 也就是说，用你的 Ruby 代码和`-F`curl 选项做你现在正在做的事情。
*   `multipart/form-data`与 JSON 的一部分一起用于元数据，另一部分与原始上传的文件一起使用。
*   通过 base64 编码将文件嵌入到 JSON 中。
*   执行某种双请求工作流，首先将元数据作为 JSON 发布，然后将文件上传到 POST 正文中。

我可能会选择第一个选项，因为它得到了广泛的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T15:16:35.133

好像你的 Ruby 代码坏了；你忘了一个`end`：

```
post '/upload/:filename' do
  userdir = "./upload"
  FileUtils.mkdir_p(userdir) unless File.exists?(userdir)
  filename = File.join(userdir, params[:filename])
  datafile = params[:data]
  File.open(filename, 'wb') do |file|
    file.write(datafile[:tempfile].read)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:25:39.013

现在我可以使用下面的带有 JSON 的 curl 命令让它工作：

```
curl -v -F 'json=[ {"filename": "@/Users/me/Desktop/test.pdf", "md5sum": "1496f9b6f42b7ed8260eadeb158c33f4", type": "generic"}, {"filename": "@/Users/me/Desktop/test2.pdf", "md5sum": "1496f9b6f42b7ed8260eadeb158c33f4", type": "generic"} ]' http://localhost:4567/upload 
```

但是，由于我不使用`-F 'file=@/Users/me/Desktop/test.pdf'`POST 文件，如何使用 JSON 对象在服务器端检索文件？

以下不再工作。

```
tempfile = params[:file][:tempfile]
filename = params[:file][:filename]
dest = "#{userdir}/#{filename}"
FileUtils.cp(tempfile.path, dest) if not File.exists?(dest) 
```

# c# - 使用 DateTime.ParseExact 会抛出 FormatExceiption

> ID：14026563
> 
> 赞同：0
> 
> 时间：2012-12-24T23:49:17.903
> 
> 标签：c#, parsing, datetime

我正在尝试使用`DateTime.ParseExact`，但我不断收到错误消息

> 字符串未被识别为有效的日期时间。

查看下面的屏幕截图，我已将我的项目存储在`dateToParse`变量中（仅供参考）。

但在我试图设置的底部，`Date`它不想玩得很好。

```
Date = DateTime.ParseExact(rawDescription[4], "MM'/'dd'/'yyyy", null) 
```

我也尝试过不带单引号和指定文化的

```
Date = DateTime.ParseExact(rawDescription[4], "MM/dd/yyyy", CultureInfo.InvariantCulture) 
```

![在此处输入图像描述](../Images/eb3d2c8693b4a4e6c2c0a53a3587a8ce.png)

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:12:59.910

`var dateToParse = rawDescription[4];`在第一个字符之前显示一个空格。添加调用`Trim`将解决此问题。

```
Date = DateTime.ParseExact(rawDescription[4].Trim(), "MM'/'dd'/'yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:55:12.887

您需要为格式提供程序指定一个不变的文化，而不是 null：

```
Date = DateTime.ParseExact(rawDescription[4], "MM/dd/yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T00:10:45.140

也许您的字符串中有一个前导空格字符，如`" 03/27/2011"`. 这是以前见过的。

您的字符串还可能包含不可见字符，例如从左到右的标记或不间断的零宽度空格，或者它们都称为的任何字符。我们以前在 Stack Overflow 上[看到过。](https://stackoverflow.com/questions/13770105)

返回什么`rawDescription[4].Length`？尝试`char`逐一检查，如`rawDescription[4][0]`、`rawDescription[4][1]`等。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-24T23:53:17.757

您需要将 rawDescription[4] 放入字符串并将字符串传递给方法。

# c# - 存储状态以在应用程序启动时执行某些操作

> ID：14026564
> 
> 赞同：1
> 
> 时间：2012-12-24T23:50:15.977
> 
> 标签：c#, error-handling, dependency-injection

我正在寻找一种永久存储状态+序列化类（或其他东西）的方法，这样当计算机/程序崩溃时，我可以在下一个程序启动时修复东西。例如，当我上传文件时，我需要在下次启动时知道它是否没有完成。这样我就可以删除远程文件（或者如果可能的话附加到它等等）

现在，我想出了一些伪代码，它基本上使用数据库（通过接口轻松交换）来创建存储状态的表+列+行，并在作业成功完成时删除行。现在，在每次启动时，我们都可以从数据库中读取数据，并根据我们上次所处的状态调用相应的操作。

问题：

1.  我不确定我正在做的事情是否有必要完成这个......替代方案？
2.  如果这是正确的方法，我有点希望有一个可用的库已经这样做了（无需重新发明轮子）
3.  依赖注入呢？在我的代码中，我只是将类名添加到行中，但是如果我想为插件公开所有这些并且存在类名冲突怎么办？事实上，我怎么知道我必须从哪个注入的 dll 开始传递存储的数据？（不确定我此时是否仍然有意义。）或者如果删除了依赖项怎么办，我将如何识别哪些数据库文件（如果使用文件）属于所述删除的插件，并要求用户保留它与否？

到目前为止的示例代码：

```
class CPersistantthingy
{
    IDatabase mDatabase;
    string _mTablename;
    List<string> _mCols = new List<string>(new string[]{"State","SerializedClass","ClassType"}); //can't contain "ID"

    public Dictionary<string,string> AcquireRow()
    {
        //Make sure table exists and has the columns we need
        CreateTableIfNotExist();
        if(!VerifyTableHasColumns())
            throw new CorruptedTableException();

        //Create new row with State "undef", fetch the Auto Increment ID and return it
        return mDatabase.CreateRow();
    }

    public void WriteRow(Dictionary<string,string> row)
    {
        mDatabase.UpdateRow(row); //The database will lookup by ID and update fields.
    }

    private void CreateTableIfNotExist()
    {
        mDatabase.CreateTableIfNotExist(_mTablename, _mCols);
    }

    private bool VerifyTableHasColumns()
    {
        return mDatabase.VerifyTableHasColumns(_mTablename, _mCols);
    }
}
interface IDatabase
{
    //CreateTable / CreateRow / UpdateRow etc etc
} 
```

文件上传示例：

```
States:
Acquired //Chosen a remote path
Started //First bytes written to server
Failed //Upload failed 
```

所以一行看起来像：

```
State: Acquired|Started|Failed
SerializedClass: {host: "127.0.0.1", user: "usr", local:"C:\somefile.txt", remote:"/we/somefile.txt"}
ClassType: CFileObj 
```

所以现在在我的程序中我可以像这样使用它；

```
SomeDatabaseClass_Object db = new SomeDatabaseClass_Object(blabla);
CPersistantthingy pers = new CPersistantthingy(db, "fileuploads");

private void StartUpload(string localfile)
{
    var row = pers.AcquireRow();
    row["State"] = "Acquired";
    row["ClassType"] = "CFileObj";

    /*Imagine that GetRemotePath reserves a remote path on the server we'll 
      upload our file to. That's how my current system works.*/
    string remfile = GetRemotePath(localfile);
    CFileObj obj = new CFileObj(currenthost, currentuser, localfile, remfile);

    row["SerializedClass"] = obj.Serialize();

    //Write the acquired state
    pers.WriteRow(row);

    //Uploading class has a callback to let us know when the first bytes have been written.
    try
    {
        StartUpload(obj.local, obj.remote, () => { row["State"] = "Started"; pers.WriteRow(row); } ); 
    }
    catch(Exception ex)
    {
        row["State"] = "Failed";
        pers.WriteRow(row);
        throw; //Catch at caller to immediately fix rather than waiting for next boot.
    }

    //Now do whatever else you want to do on a succesful upload. 
    //Maybe add new states for this too so we know at least the upload succeeded.

    //Finally delete the entry so it's not picked up at next boot.
    pers.DeleteByKey(row["ID"]);
} 
```

然后确保服务器在崩溃后清除失败的文件（不完整的上传）：

```
public static void Main()
{
    SomeDatabaseClass_Object db = new SomeDatabaseClass_Object(blabla);
    CPersistantthingy pers = new CPersistantthingy(db, "fileuploads");

    CUploadServerObj serverObj = new CUploadServerObj(bla,di,bla);
    serverObj.Connect();

    //Now let's imagine a class that hooks a state to an action etc.
    var ima = new CImagineIt(pers); 

    /*I may have picked a bad example because I'd have to do the same for all States
      but you get the idea. */
    ima.AddStateAction("Failed", (row) => { FixFailedUpload(serverObj, pers, row); });

    //Read all rows from database and fire actions accordingly
    ima.DoWork();
} 
```

使用该操作，在这种情况下，只需检查服务器上的文件是否小于本地文件。

```
private void FixFailedUpload(CUploadServerObj serverObj, CPersistantthingy pers, Dictionary<string,string> row)
{
    if(!row["ClassType"].Equals("CFileObj"))
    {
        //handle error
        return;
    }

    CFileObj obj;
    try
    {
        obj = DeSerialize(row["SerializedClass"]);
    }//Catch and handle etc etc

    //Are we using different credentials this boot? Then we can't check.
    if(obj.host != currenthost || obj.usr != currentuser)
    {
        //handle error and return
    }

    try
    {
        if(serverObj.RemoteSizeSmaller(obj.local, obj.remote))
        {
            if(serverObj.DeleteFromRemote(obj.remote))
            {
                pers.DeleteByKey(row["ID"]);
            }
        }
    }
    catch(RemoteFileNotExistsException)
    {
        //The file didn't even exist so no worries
    }
    catch(RemoteFileDeleteException)
    {
        //The file existed but could not be removed.. it's probably time to request manual user input now because that's just weird.
    }
} 
```

我认为这可行，但并不理想。可能上传失败，因为保留路径已被另一个进程写入。这意味着我们不能使用`Acquired`状态来证明删除文件是正当的。事后检查失败原因也无济于事，因为程序可能会在两者之间崩溃。这意味着我们`Acquired`无论如何都被困住了。或者，也许我们在写入的第一个字节和它的回调之间崩溃，这意味着`Acquired`即使我们确实获得了我们保留的文件路径，我们也被卡住了。

# applescript - AppleScript 语音识别服务器监听任何响应

> ID：14026565
> 
> 赞同：2
> 
> 时间：2012-12-24T23:50:31.670
> 
> 标签：applescript

好的，目前，我有一个如下所示的脚本：

```
tell application "SpeechRecognitionServer"
    set theResponse to listen for {"Mark"} with prompt "What is your name?"
end tell 
```

但是，我不希望它听特定的关键字。我希望它从该提示中收集语音数据并将其转换为可以存储在数据库中的字符串。

因此，例如，用户会被提示“你叫什么名字？”这个口头问题。然后，他们会说出他们的名字，说“Mark”，语音识别服务器将捕获该输入，将其转换为文本，将其存储为变量，（userName = theResponse;）

这可能吗？现在我只看到了监听关键字的选项，这对于我想要实现的目标来说是不可取的。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:48:59.890

正如加勒特所说，我所做的是使用对话框来输入文本。默认语音命令键是双击“fn”键。

```
tell application "Finder"
say "Which application would you like me to open?" using "Alex"
end tell
set theOpen to text returned of (display dialog "Press the 'fn' key twice and speak!" default answer "" buttons {"Cancel", "Ok"} default button 2)
tell application "Finder"
say "Ok! I will open " & theOpen & " for you" using "Alex"
end tell
tell application theOpen
activate
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-19T20:25:21.413

这是我的 QuickAction Automator 脚本，用于打开对话框、开始听写、捕获输入并运行 shell 脚本将其转换为连字符文本，然后它将连字符文本插入前台应用程序。

您可能需要调整键盘快捷键以启动 Preferences->Keyboard->Dictation 下的听写。

QuickActions 将进入所有应用程序的“服务”菜单。然后，您可以在键盘首选项下为该新服务分配键盘快捷键。然后我在辅助功能键盘上创建一个按钮来运行该快捷方式。

```
on run {input, parameters}

ignoring application responses
    tell application "System Events"
        -- send keystrokes to start dictation.
        -- delay 1
        keystroke "`" using {control down, command down}
    end tell
end ignoring

-- capture input
set theResponse to text returned of (display dialog "Input:" default answer "" with icon note buttons {"Cancel", "Continue"} default button "Continue")

-- convert to hyphenated
set newOutput to do shell script "ruby -e 'puts ARGV.join(\"-\").downcase' " & theResponse

    return newOutput
end run 
```

# php - CentOS 6/PHP5 - 无法安装 mcrypt？

> ID：14026567
> 
> 赞同：-1
> 
> 时间：2012-12-24T23:51:10.767
> 
> 标签：php, centos, mcrypt

我正在尝试在[CentOS](http://en.wikipedia.org/wiki/CentOS) 6 上为 PHP 5 安装 mcrypt。我已经设置了 EPEL 存储库，但是每当我尝试安装它时，都会得到以下信息。

```
yum --enablerepo=epel install php-mcrypt
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
* base: dallas.tx.mirror.xygenhosting.com
* epel: fedora-epel.mirror.lstn.net
* extras: centos.mirror.lstn.net
* updates: mirror.rackspace.com
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package php-mcrypt.x86_64 0:5.1.6-5.el5 will be installed
--> Processing Dependency: php-api = 20041225 for package: php-mcrypt-5.1.6-    5.el5.x86_64
--> Processing Dependency: libmcrypt.so.4()(64bit) for package: php-mcrypt-5.1.6-    5.el5.x86_64
--> Running transaction check
---> Package libmcrypt.x86_64 0:2.5.7-5.el5 will be installed
---> Package php-mcrypt.x86_64 0:5.1.6-5.el5 will be installed
--> Processing Dependency: php-api = 20041225 for package: php-mcrypt-5.1.6-    5.el5.x86_64
--> Finished Dependency Resolution
Error: Package: php-mcrypt-5.1.6-5.el5.x86_64 (epel)
       Requires: php-api = 20041225
       Installed: php-common-5.3.3-14.el6_3.x86_64 (@updates)
           php-api = 20090626
       Available: php-common-5.3.3-3.el6_2.8.x86_64 (base)
           php-api = 20090626
You could try using --skip-broken to work around the problem
You could try running: rpm -Va --nofiles --nodigest 
```

我看到它需要 php-api，所以我尝试更新它，但它说它已经全部是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:57:38.670

> 我已经全部设置了 EPEL 存储库...

除非你不这样做，因为它试图在你的 EL6 系统上安装 EL5 包。验证您的 EPEL 安装并重试。

# routing - hMailServer 未发送 Google Apps 邮件

> ID：14026569
> 
> 赞同：0
> 
> 时间：2012-12-24T23:51:34.590
> 
> 标签：routing, google-apps, mail-server, hmail-server, gmail-pop

我在**windows 7上使用****hMailServer** **-5.4-B1944**版本的hMailServer 。我的**www.xyz.com.np**域邮件托管在 gmail 上。我已将所有电子邮件转发或设置为**mail@xyz.com.np**。我已经从电子邮件帐户部分启用了**转发和 POP/IMAP 。**

 ******我在**hMailServer**上创建了一个本地域***xyz.com.np。***在该域下创建***了 mail@xyz.com.np***。在外部帐户选项卡上，我定义了

 ***```
name MY NAME,
enabled YES ,
server address pop.gmail.com
port 995
use SSL YES
username mail@xyz.com.np (of the gmail)
password ********** (of the gmail)
minutes between download 3
Deliver to receipients in MIME headers YES
Retrieve date from Received header YES
Do not Delete Messages YES 
```

保存并单击立即下载。我可以从 Outlook 和 Round Cube 邮件登录/发送和接收来自 hmailserver 的本地电子邮件。但是没有从 gmail 中提取电子邮件。

我的防火墙已关闭。我可以在 telnet pop.gmail.com 上 telnet 或空白**995** 没有下载电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:25:56.177

yuppy....得到了我的答案

有一个小错误..

**使用应用程序专用密码登录**

[http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)

我正在使用谷歌邮件应用程序密码..

```
name MY NAME
enabled YES 
server address pop.gmail.com
port 995
use SSL YES
username mail@xyz.com.np (of the gmail)
password ********** (of the gmail)
minutes between download 3
Deliver to receipients in MIME headers YES
Retrieve date from Received header YES
Do not Delete Messages YES 
```

使用特定于应用程序的密码而不是**gmail****密码** [http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833) =>> 点击链接以获取应用程序特定密码*********

# ruby-on-rails - 在 Mac 上安装 Ruby on Rails 时出错

> ID：14026571
> 
> 赞同：1
> 
> 时间：2012-12-24T23:52:11.497
> 
> 标签：ruby-on-rails

我已经安装了最新版本的 Ruby。我已经安装了最新版本的 XCode。我也为 XCode 安装了命令行工具。

然后我想安装 Ruby on Rails，但出现以下错误：

> 获取：json-1.7.5.gem (100%) 构建原生扩展。这可能需要一段时间... 错误：安装 rails 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /Users/JonyIve/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb creating Makefile 
> ```
> 
> make 编译 generator.c make: /usr/bin/gcc-4.2: No such file or directory make: *** [generator.o] Error 1
> 
> Gem 文件将继续安装在 /Users/JonyIve/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/json-1.7.5 以供检查。结果记录到 /Users/JonyIve/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:40:45.373

我想我在新安装的 10.8 mac 上设置 rails env 时遇到了这个问题。命令行工具已安装，但仍然缺少 gcc。我参考了一些博客文章：（即[Beryllium Work](http://blog.berylliumwork.com/2012/09/missing-gcc-42-in-mac-os-x-108-when.html)）建议创建指向 make 脚本正在寻找的位置的链接：

```
bash> sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2
bash> sudo ln -s /usr/bin/g++ /usr/bin/g++-4.2 
```

我认为这解决了我安装导轨的问题

# php - 如何解决存储过程中不支持“加载数据”和/或 MySQL 中的 TRANSACTION 中缺少 EXIT HANDLER 的问题？

> ID：14026576
> 
> 赞同：1
> 
> 时间：2012-12-24T23:53:28.307
> 
> 标签：php, mysql

这是我的第一篇 Stack Overflow 帖子！社区提供了很大的帮助！

我有一个 90K 行的 CSV 我试图通过一个带有 CSV 的临时表插入到一个表中，例如：

```
CREATE TEMPORARY TABLE temp_product like product;
LOAD DATA LOCAL INFILE "myfile.csv"
... 
```

但我试图通过一个包含事务的过程和一个退出处理程序来结束插入和一些额外的操作，以防万一任何失败或引发警告：

```
CREATE PROCEDURE update_products ()
BEGIN
    DECLARE EXIT HANDLER FOR SQLEXCEPTION, NOT FOUND, SQLWARNING ROLLBACK;
    START TRANSACTION;
    .... 
```

我喜欢这种方法，因为它允许我在遇到任何错误时自动回滚，并且还可以很好地包装整个逻辑事务块。唉：

```
Error : LOAD DATA is not allowed in stored procedures 
```

（我不确定这是为什么？我想它只是还不支持？）我不确定我的语法是否正确（或者如果这甚至可能）但我什至可以接受类似的东西：

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION, NOT FOUND, SQLWARNING ROLLBACK;
START TRANSACTION; 
```

但这会引发明显的语法错误：

```
Error : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE EXIT HANDLER FOR SQLEXCEPTION, NOT FOUND, SQLWARNING ROLLBACK' at line 1 
```

如果我可以以不同的方式加载 CSV，我似乎可以完成这项工作，但我可能会失去批量插入的速度，和/或必须使用基于磁盘的表，因为我可能需要与它建立多个连接。据我了解，临时表只存在于单个连接/事务，我不能 100% 确定我的 MySQL 客户端 Navicat 是如何管理这个的。

如果这是管理脚本的最明智的方法，该脚本在使用`LOAD DATA`.

随意告诉我，我也完全错误地处理了这个问题。我觉得可能有一种更聪明的方法来做我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:04:05.713

不幸的是，不支持`LOAD DATA INFILE`存储过程。我确实记得曾经看到有人使用 MySQL 存储过程调用 shell 脚本来实际执行上传的解决方法，但这似乎是一个潜在的问题解决方案，安全方面。你也许可以用谷歌搜索这个解决方案。

最好的选择可能是使用某种脚本（PHP、shell 等）来执行加载到临时表中，然后调用存储过程来实际填充到永久表中。我认为只要您对这部分有事务支持，您就可以回滚真正重要的部分（填充永久表）。

# c++ - 在 C++ 中从 std::string 转换为 char *

> ID：14026580
> 
> 赞同：3
> 
> 时间：2012-12-24T23:54:45.520
> 
> 标签：c++, visual-studio-2010, type-conversion

我正在使用 VS2012/C++，我需要将 std::string 转换为 char * 并且我在网上找不到任何材料，提供有关如何去做的任何指导。

任何代码示例和建议将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T23:59:07.880

利用

```
std::string bla("bla");
char* blaptr = &bla[0]; 
```

这保证从 C++11 开始就可以工作，并且在 C++11 之前的所有流行实现上都有效。

如果你只需要一个`const char*`，你可以使用`std::string::c_str()`或者`std::string::data()`

# spring - 如何在 Spring 中保护对静态资源的访问

> ID：14026581
> 
> 赞同：5
> 
> 时间：2012-12-24T23:55:10.763
> 
> 标签：spring, spring-mvc, spring-security

我正在从 Web 应用程序外部的文件夹中提供图像。我将图像存储在 C:\source\Pictures 中。我在 spring 的 servlet 上下文文件中将此资源配置为静态资源：

```
<resources location="file:///C:/source/Pictures/" mapping="/img_resources/**"/> 
```

我使用显示存储在该文件夹中的图像

```
<img src="<spring:url value='/img_resources/guinnes_choc_cake.jpg/'/>"></img> 
```

它对我很有效。但是，我有安全方面的顾虑。我不想向公众公开我的服务器中的目录。[1](https://stackoverflow.com/questions/8041839/spring-mvcresources-access-to-outside-folder)

有没有办法在 Spring 中围绕这个文件夹建立安全性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T00:16:12.713

如果您使用的是 Spring Security，您可以在 Spring 上下文文件中添加类似这样的内容：

```
<sec:intercept-url pattern="/img_resources/**" access="isAuthenticated()" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T21:18:04.950

没有特别的理由限制对静态资源的访问。

鉴于目录结构定义明确并且文件排序是语义化的（即`img_resources`文件夹将仅包含图像），您应该允许访问此类资源，甚至完全绕过过滤器以避免通过过滤器链的开销，例如：

```
<sec:intercept-url pattern="/img_resources" filters="none" /> 
```

* * *

来自[Spring Security 教程](http://static.springsource.org/spring-security/site/tutorial.html)：

> 我们完全不希望 Spring Security 的过滤器处理静态资源。为此，您可以添加 `<http>`仅适用于特定模式的附加块。这必须在现有块之前，因为它适用于特定模式。如果未提供模式属性，则该块适用于任何请求。

# ios - iOS AVFoundation 导出会话缺少音频

> ID：14026584
> 
> 赞同：26
> 
> 时间：2012-12-24T23:55:37.033
> 
> 标签：ios, audio, video, export, avfoundation

我正在使用 iOS AVFoundation 框架，并且能够成功地合并视频轨道、图像叠加层和文本叠加层。但是，我的输出文件不会使原始源视频中的音频保持完整。

如何确保我的一个视频的音频源与我创建的新视频保持一致？

## 编辑

*使用此代码有一个很好的示例，说明如何创建视频（带有原始音频）。对我来说，在使用 AVFoundation 处理视频时需要单独包含音轨并不明显。希望这对其他人有帮助。

```
 AVAssetTrack *videoTrack = nil;
    AVAssetTrack *audioTrack = nil;
    CMTime insertionPoint = kCMTimeZero;

    if([[url tracksWithMediaType:AVMediaTypeVideo] count] != 0) {
        videoTrack = [url tracksWithMediaType:AVMediaTypeVideo][0];
    }

    if([[url tracksWithMediaType:AVMediaTypeAudio] count] != 0) {
        audioTrack = [url tracksWithMediaType:AVMediaTypeAudio][0];
    }

    // Insert the video and audio tracks from AVAsset
    if (videoTrack != nil) {
        AVMutableCompositionTrack *compositionVideoTrack = [videoComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [url duration]) ofTrack:videoTrack atTime:insertionPoint error:&error];
    }
    if (audioTrack != nil) {
        AVMutableCompositionTrack *compositionAudioTrack = [videoComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [url duration]) ofTrack:audioTrack atTime:insertionPoint error:&error];
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-15T10:28:03.887

这是解决这个问题的完整代码，它有两个视频，它们与他们的音频相结合：-

```
AVURLAsset* video1 = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:path1] options:nil];

AVURLAsset* video2 = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:path2] options:nil];

if (video1 !=nil && video2!=nil) {

    // 1 - Create AVMutableComposition object. This object will hold your AVMutableCompositionTrack instances.
    AVMutableComposition *mixComposition = [[AVMutableComposition alloc] init];
    // 2 - Video track

    AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                        preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *firstTrackAudio = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                        preferredTrackID:kCMPersistentTrackID_Invalid];

    [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, video1.duration)
                        ofTrack:[[video1 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];
    [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, video2.duration)
                        ofTrack:[[video2 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:video1.duration error:nil]; 
```

// 它有一个音轨

```
 if ([[video1 tracksWithMediaType:AVMediaTypeAudio] count] > 0)
    {
        AVAssetTrack *clipAudioTrack = [[video1 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        [firstTrackAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, video1.duration) ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];
    } 
```

// 它有一个音轨

```
 if ([[video2 tracksWithMediaType:AVMediaTypeAudio] count] > 0)
    {
        AVAssetTrack *clipAudioTrack = [[video2 tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        [firstTrackAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, video2.duration) ofTrack:clipAudioTrack atTime:video1.duration error:nil];
    } 
```

// 导出会话

```
 AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition
                                                                      presetName:AVAssetExportPresetHighestQuality];

    //Creates the path to export to  - Saving to temporary directory
    NSString* filename = [NSString stringWithFormat:@"Video_%d.mov",arc4random() % 1000];
    NSString* path = [NSTemporaryDirectory() stringByAppendingPathComponent:filename];

    //Checks if there is already a file at the output URL.  
    if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        NSLog(@"Removing item at path: %@", path);
        [[NSFileManager defaultManager] removeItemAtPath:path error:nil];
    }

    exporter.outputURL = [NSURL fileURLWithPath:path];
    //Set the output file type
    exporter.outputFileType = AVFileTypeQuickTimeMovie;

    path3=path;
    [arr_StoredDocumentoryUrls addObject:path3];

    //Exports!
    [exporter exportAsynchronouslyWithCompletionHandler:^{
        switch (exporter.status) {
            case AVAssetExportSessionStatusCompleted:{
                NSLog(@"Export Complete");

                break;
            }
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Export Error: %@", [exporter.error description]);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Export Cancelled");
                break;
            default:
                break;
        }
    }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-26T17:39:51.607

**基于@Ashish 回答的**Swift 4版本****

 **```
let video1 = AVURLAsset(url: videoURL1)
let video2 = AVURLAsset(url: videoURL2)

// Create AVMutableComposition object. This object will hold your AVMutableCompositionTrack instances.
let mixComposition = AVMutableComposition()

guard let firstTrack = mixComposition.addMutableTrack(withMediaType: AVMediaType.video, preferredTrackID: Int32(kCMPersistentTrackID_Invalid)) else {return}

guard let firstAudioTrack = mixComposition.addMutableTrack(withMediaType: AVMediaType.audio,preferredTrackID: Int32(kCMPersistentTrackID_Invalid)) else {return}
do {
  try firstTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero, video1.duration),
                                 of: video1.tracks(withMediaType: AVMediaType.video)[0],
                                 at: kCMTimeZero)
} catch {
  print("error handling video1")
}

do {
  try firstTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero, video2.duration),
                                 of: video2.tracks(withMediaType: AVMediaType.video)[0],
                                 at: kCMTimeZero)
} catch {
  print("error handling video2")
}

// if video 1 has an audio track
if video1.tracks.count > 0 {
  let clipAudioTrack = video1.tracks[0]
  do {
    try firstAudioTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero, video1.duration), of: clipAudioTrack, at: kCMTimeZero)
  } catch {
    print("error inserting audio track 1")
  }

}

// if video 2 has an audio track
if video2.tracks.count > 0 {
  let clipAudioTrack = video2.tracks[0]
  do {
    try firstAudioTrack.insertTimeRange(CMTimeRangeMake(kCMTimeZero, video2.duration), of: clipAudioTrack, at: video1.duration)
  } catch {
    print("error inserting audio track 2")
  }

}

// Checks if there is already a file at the output URL.
if FileManager.default.fileExists(atPath: "path") {
  try? FileManager.default.removeItem(atPath: "path")
}

// Create Exporter
guard let exporter = AVAssetExportSession(asset: mixComposition, presetName: AVAssetExportPresetHighestQuality) else {return}

// Get path
guard let documentDirectory = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first else {return}
let documentUrl = documentDirectory.appendingPathComponent("mergeVideo.mov")

// Set the output file type
exporter.outputURL = documentUrl
exporter.outputFileType = AVFileType.mov

// Exports!
exporter.exportAsynchronously {
  switch exporter.status {
  case .completed:
    print("export completed")

  case .failed:
    print("export failed")

  case .cancelled:
    print("export candelled")

  default:
    break
  }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-10-27T13:30:41.600

尝试添加 MobileCoreServices 并执行。**

# php - 将mysql值从'0'更新为'1'？

> ID：14026588
> 
> 赞同：0
> 
> 时间：2012-12-24T23:56:21.917
> 
> 标签：php, mysql

我正在运行一个 mysql 查询来获取我网站上的所有用户评论，这些评论有待用户批准或删除。

我有一个基本的文件结构：

拉取mysql结果的Reviews.php和函数文件approve_review.php。

新评论在 mysql 查询中很好，但是当我尝试批准或删除评论时没有任何反应，我没有收到任何错误或任何东西。

单击批准时，假设将表 ptb_reviews.approved 从“0”更新为“1”，如果单击删除，则同样适用，它将评论从“0”更新为“1”。

（我只为此目的包含了批准代码，因为它们实际上是相同的，批准被设置为删除）

我正在使用 review_id 以便它知道要批准或删除哪个评论和会话，以便只有用户可以批准或删除它们。

有人可以看看，看看他们是否能找到让它工作的方法吗？

评论.php：

```
<?php
            $pending_set = get_pending_reviews();
            while ($reviews = mysql_fetch_array($pending_set)) {

    ?>

            <div class="prof-content-pend-reviews" id="reviews">
                 <div class="pend-review-content">
                 <?php echo "{$reviews['content']}"; ?>
                 </div>
                 <div class="message_pic">
                 <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\" src=\"data/photos/{$reviews['from_user_id']}/_default.jpg\" /></a>";?>

                 </div>

                 <div class="forum-text">
                 <?php echo "Posted by {$reviews['display_name']}"; ?> <?php echo "".$age." days ago"; ?>
              </div>

              <a href="includes/approve_review.php?review=<?php echo $reviews['review_id']; ?>"><div class="approve"></div></a>
               <a href="includes/delete_review.php"><div class="delete"></div></a>

                 </div>

                 <? }  ?> 
```

批准审查.php：

```
 function approve_review($review_id, $user) {
                            global $connection;
                global $_SESSION;
                            $query = "UPDATE ptb_reviews
                                        SET approved='1'
                                        WHERE id=$review_id";
                mysql_query($query, $connection);

                    }

        <?php
        require_once("session.php"); 
        require_once("functions.php");
        require('_config/connection.php');
        approve_review ($_GET['review_id'], $_SESSION['user_id']);
        header('Location: http://localhost/ptb1/reviews.php');
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:25:15.317

我注意到您的函数“approve_review”需要 2 个参数。但是第二个参数什么也没做。

反正，

首先，为了安全起见：

```
$review_id = (int) $_GET['review_id']; 
    // Just this, is a great security enhancement. Forces the variable to be int (like all id's are). 
    // You can also check if its a numeric by doing
if (is_numeric($review_id)){
    // continue with the update query
} else {
    // something fishy is going on..
} 
```

您可能想查看[PDO，准备好的语句以防止任何 SQL 注入。](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

您的查询应如下所示：

```
$query = "UPDATE ptb_reviews SET approved = 1 WHERE id = '$review_id' LIMIT 1";
// Using a LIMIT 1 is also a good practice. It limits the updates to 1 only in case of a hack. 
```

要调试您的查询，您应该只回显您的查询，看看它是否是正确的 SQL 格式。

```
echo $query;
die();
// See what is really sent to MySQL 
```

您还应该使用：

```
if (!mysql_query($query, $connection)){
    die(mysql_error());
} 
```

查看您的查询是否成功执行以及是否有任何错误（为什么未将其设置为已审核 = 1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:20:54.350

> 我没有错误或任何东西。

那可能是因为您没有检查错误。

每次调用数据库 API 函数时，都需要检查返回值。如果有任何错误，大多数函数都会返回`false`，然后您需要调用另一个函数来检查它是什么*类型*的错误，错误消息等。

例子：

```
$result = mysql_query($query, $connection);
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T00:23:14.320

你也可以只显示错误内联：

```
mysql_query($query, $connection) or die(mysql_error()); 
```

这应该揭示任何问题。

# css - Rails：使用 image_tag 或 css 背景图像显示图像更好吗？

> ID：14026593
> 
> 赞同：0
> 
> 时间：2012-12-24T23:58:07.927
> 
> 标签：css, ruby-on-rails, image

我有一张图片需要在我们的索引页面上突出显示/立即显示。我想知道是使用 Rails 的 image_tag() 助手更好，还是使用 CSS 的背景图像属性来快速渲染图像。或者它甚至重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:14:38.457

如果您在页面的 html 中引用图像，则必须解析页面并下载图像。

如果您在外部样式表中引用图像，则必须解析页面，然后必须下载和解析 CSS，然后需要下载图像。由于到服务器获取图像的往返次数，这将变慢。

如果您的 CSS 是内联的，那么您将返回解析第一页，然后下载图像。

一个有趣的选项，如果你的图像不是太大，为了最终的性能，是在页面中内联你的 CSS，然后将图像直接嵌入到 CSS 中，避免在页面 HTML 的初始图像之后进行任何下载。例如

```
<head>
  <style>
    #foo { background-image: url(data:image/png;base64,iVBORw0K...) 
  </style>
</head>
<body>
  <div id="foo"></div>
</body> 
```

Rails（实际上是 SASS）有帮助将资产数据内联到 CSS 文件中（搜索资产数据 URL）。我从来没有用它来将 CSS 内联到 HTML 中，但这至少是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:40:57.183

如果图像被视为内容，则应将其呈现为带有适当替代文本的图像标记。如果是装饰，应该是背景图片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T00:00:18.653

对于 Rails，这并不重要。您选择的内容最终将更多地取决于该图像应该如何显示。文字背后？作为标题图像？这将指导您使用`image_tag`或 CSS。

# css - Safari 在元素为 CSS3 动画时应用字体效果/处理

> ID：14026597
> 
> 赞同：1
> 
> 时间：2012-12-24T23:58:29.370
> 
> 标签：css, font-face, css-animations

我在我的网站上使用自定义字体。

```
@font-face {
    font-family: 'ProximaNovaCondensed-Regular';
    src: url('/media/fonts/proximanovacond-regular-webfont.eot');
    src: url('/media/fonts/proximanovacond-regular-webfont.eot?#iefix') format('embedded-opentype'),
    url('/media/fonts/proximanovacond-regular-webfont.woff') format('woff'),
    url('/media/fonts/proximanovacond-regular-webfont.ttf') format('truetype'),
    url('/media/fonts/proximanovacond-regular-webfont.svg#proxima_nova_cn_rgregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

将脉动的 CSS3 动画应用于文本元素时，字体渲染方法似乎发生了变化。

请参阅此比较图像：

![在此处输入图像描述](../Images/bcf0dc79056a8afc0d9dcf8c562be46e.png)

这是在 Safari 中呈现的。

我发现了这个 Q/A：[Safari 在运行不相关的动画时更改字体粗细](https://stackoverflow.com/questions/9733011/safari-changing-font-weights-when-unrelated-animations-are-running)

根据那里所说的，一旦应用了动画，渲染就由 GPU 完成。虽然在链接的 Q/A 中，问题集中在受影响的元素之外的其他元素上，但在我的情况下，实际元素受到了影响。

问题是：

我可以以某种方式关闭或修改此行为，以便我在整个页面中获得准确（统一）的字体渲染质量，无论我是否使用动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:47:44.950

没有完美的解决方案，但您可以尝试添加`-webkit-font-smoothing: antialiased;`并查看是否有帮助。它可能会给你一个稍微更薄的字体，但它至少会统一。

**编辑**- *抱歉，我刚刚看到您链接到的 Q/A 中发布了“抗锯齿”修复。*

有时，添加`-webkit-backface-visibility: hidden;`受影响的元素会有所帮助，但我不确定为什么。

您也可以尝试`-webkit-transform: translate3d(0,0,0);`强制硬件加速并使字体，如上面的修复，统一但稍微更薄......

希望有帮助！

# express - 快速会话管理

> ID：14026604
> 
> 赞同：0
> 
> 时间：2012-12-25T00:00:32.217
> 
> 标签：express

```
 var express = require('express');
    var app = express();
        app.use(express.cookieParser('keyboard 123'));

app.get('/', function(req, res){
  res.sendfile('./login.html');
});

        app.use(express.session());

            app.post('/login', function(req, res){

            console.log(req.body);
            if (req.session.user) {
                req.session.user=req.body.username;
              } else {
                req.session.user="test";

              }

        });

<form id="myform" action="/login" method="post" enctype="application/x-www-form-urlencoded">
  <input type="text" name="username" id="mytext" />
  <input type="submit" id="mysubmit" />
</form> 
```

我正在尝试理解和使用 express node js 。在这里，我有一个可以发布的表格。我的理解是：第一次没有可用的cookie（会话）。因此，当我们收到请求时： req.session.user 将为空。所以当我们发送200 OK。这个 req.session.user cookie 将被创建并存储在本地浏览器中。？随后在所有 req 中，这个 req.session 对象将被发送，对吗？

现在的问题是：我总是将 req.body.username 设为未定义。我在登录页面中定义了相同的用户名。我已经尝试过 console.log(req.body) 并且它总是未定义。如果我没有会话，则正文部分有效。

如果我的理解是正确的，你能澄清一下吗？这段代码有什么问题。我在理解会话的概念以及如何在快速框架中使用它时遇到了真正的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:49:54.830

您似乎混淆了请求和响应。如果您发布更大的代码摘录，我们可以提供更详细的帮助，但这是我对您的误解的看法。

*   当 POST /login 到达时，您可以检查是否`req.session.user`已设置。如果是这样，则用户已经登录但再次登录，这不是通常的情况，但您可以执行类似的操作`res.send('You are already logged in as ' + req.session.user);`
*   如果`req.session.user`未设置，则用户正在登录。通常您会确认用户知道正确的密码，但对于您的小测试应用程序，您只需照常操作`req.session.user = req.body.username`并回复 `res.send('You have been logged in as ' + req.session.user); 例如。

还要确保在应用程序中正确配置了 cookieParser、session 和 bodyParser 中间件。

# php - 计算一年中特定日期的多少天

> ID：14026606
> 
> 赞同：1
> 
> 时间：2012-12-25T00:00:52.937
> 
> 标签：php, date

最初我试图创建一个函数来显示特定日期有多少次进入特定日期。例如星期六有多少次落在某年的 1 月 1 日到某年。

```
<?php 

$firstDate = '01/01/2000';
$endDate = '01/01/2012';
$newYearDate= '01/01';

# convert above string to time
$time1 = strtotime($firstDate);
$time2 = strtotime($endDate);
$newYearTime = strtotime($newYearDate);

for($i=$time1; $i<=$time2; $i++){
    $saturday = 0;
    $chk = date('D', $newYearTime); #date conversion
   if($chk == 'Sat' && $chk == $newYearTime){ 
      $saturday++;    
      } 
}
echo $saturday;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:34:39.037

你只能有一个星期六，比如 1 月 1 日，一年一次，所以：

```
$firstDate = '01/01/2000';
$endDate = '01/01/2012';

$time1 = strtotime($firstDate);
$time2 = strtotime($endDate);

$saturday = 0;
while ($time1 < $time2) {

    $time1 = strtotime(date("Y-m-d", $time1) . " +1 year");
    $chk = date('D', $time1);
    if ($chk == 'Sat') {
        $saturday++;
    }

}

echo "Saturdays at 01/01/yyyy: " . $saturday . "\n"; 
```

我更改的行是：

```
$time1 = strtotime(date("Y-m-d", strtotime($time1)) . " +1 year"); 
```

至

```
$time1 = strtotime(date("Y-m-d", $time1) . " +1 year"); 
```

`$time1`从纪元开始已经以秒为单位——日期所需的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:24:01.777

[`strtotime`](http://php.net/manual/en/function.strtotime.php)自 1970-01-01 以来为您提供*秒数。*由于您只对天感兴趣，因此您可以每天将循环增加 86400 秒以加快计算速度

```
for($i = $time1; $i <= $time2; $i += 86400) {
...
} 
```

有几点

*   移出`$saturday`你的循环
*   检查除夕与一年中的某一天
*   检查循环计数器`$i`而不是`$newYearTime`

这应该工作

```
$firstDate = '01/01/2000';
$endDate = '01/01/2012';

# convert above string to time
$time1 = strtotime($firstDate);
$time2 = strtotime($endDate);

$saturday = 0;
for($i=$time1; $i<=$time2; $i += 86400){
    $weekday = date('D', $i);
    $dayofyear = date('z', $i);
    if($weekday == 'Sat' && $dayofyear == 0){ 
        $saturday++;    
    } 
}

echo "$saturday\n"; 
```

# matlab - 如何向量化这个算法，octave verses matlab速度问题

> ID：14026607
> 
> 赞同：2
> 
> 时间：2012-12-25T00:01:12.437
> 
> 标签：matlab, octave, vectorization

背景故事：

这是一个旧脚本，我需要比较同一物体的两个略有不同的图像，以获取相机本身的数据。我用 octave 编写了这个脚本并尝试了它，后来我发现 matlab 用它运行得更快，所以因为我使用 matlab 而不是 octave。我最近决定再次检查八度，我仍然得到 1:1000 的速比。

问题：

1.  如何矢量化这个算法？
2.  matlab (verses octave) 是否有办法自动矢量化此代码以更快地运行 1000 倍 - 对于 420X420 像素大小的彩色图像，0.1s 与 100s 相比？

脚本：

```
color_depth = 8;
number_of_colors = 3;
number_of_grey_levels = 2^color_depth;
Double_Distribution_0 =zeros(number_of_grey_levels,number_of_grey_levels,number_of_colors);
frame_A = 1+int16(imread('Path\image_A.tif'));
frame_1 = 1+int16(imread('Path\image_1.tif'));
[height,width]=size(frame_A(:,:,1));
number_of_pixels = width*height;

for k = 1:number_of_colors
    tic
    for i = 1:height
        for j = 1:width
                Double_Distribution_0(frame_1(i,j,k),frame_A(i,j,k),k) = 1 + Double_Distribution_0(frame_1(i,j,k),frame_A(i,j,k),k);
        end
    end
   toc
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:25:48.913

1) 是的，您可以按照 Shai 的解释对代码进行矢量化。但是，请注意他的解决方案缺少 frame_1 和 frame_A 上的颜色索引。这应该可以解决问题：

```
for k=1:number_of_colors
    f_1 = frame_1(:,:,k);
    f_A = frame_A(:,:,k);
    Double_Distribution_0(:,:,k) = accumarray( {f_1(:), f_A(:)}, 1,...
                                   [number_of_grey_levels, number_of_grey_levels] );

end 
```

2）Matlab 比 Octave 快很多倍的原因是，自 6.5 版以来，Matlab 使用 JIT 编译器大大加快了简单的 for 循环等。如果您不熟悉 JIT 是什么，请看[这里](http://en.wikipedia.org/wiki/JIT_compiler)。最后我检查了一下，Octave 仍在开发他们自己的 JIT，但我认为这还需要一段时间 :-)。

您的 Octave 版本是否会从上述代码中受益取决于他们在 Octave 中的编写方式。我希望有很大的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:57:32.523

感谢你们两位的快速回复。

不知何故，部分语法不起作用，但是当我将其缩短为：

```
Double_Distribution_0(:,:,k) = accumarray({frame_1(:,:,k),frame_A(:,:,k)},1); 
```

我得到了我想要的（将结果与旧代码进行比较），在这种情况下，八度音程的运行时间仅比 matlab 高约 2 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T06:19:17.787

如果我正确理解您的代码，它的作用是构建两个帧的联合颜色分布的 2D 直方图。

```
for k=1:number_of_colors
     Double_Distribution_0(:,:,k) = accumarray( {frame_1(:), frame_A(:)}, 1,...
                               [number_of_grey_levels, number_of_grey_levels] );
end 
```

# android - 如何在andengine for android中更改精灵动画？

> ID：14026611
> 
> 赞同：1
> 
> 时间：2012-12-25T00:01:49.190
> 
> 标签：android, jquery-animate, sprite, andengine

当创建一个精灵对象时，我`.animate(250);`用来开始循环我的精灵。这工作正常。

但是当我在我的碰撞检测中尝试运行类似`.animate(new long[] { 250, 250, 500, 500 }, 0, 3, true);`它只显示帧号 0 的东西时。

如果我在第一次创建对象时调用它，这个函数也可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:35:30.177

我认为是因为始终检测到碰撞，请尝试首先在您的 Sprite 中设置一个标签，例如：

```
AnimatedSprite elemen1 = new AnimatedSprite(...);
elemen1.setTag(1); 
```

在你的碰撞方法中：

```
if(elemen1.getTag==1 && elemen1.collidesWith(elementX)){
       elemen1.setTag(0);
       elemen1.animate(new long[] { 250, 250, 500, 500 }, 0, 3, true);
} 
```

因为如果动画永远不会进入第二帧是因为所有时间都在开始，最好的问候。

# python - django模型形式编码

> ID：14026614
> 
> 赞同：0
> 
> 时间：2012-12-25T00:02:19.830
> 
> 标签：python, django, encoding, utf-8

我在 django 的模型表单中使用 utf-8 字符时遇到问题。我在模型中有这个代码：

```
class Student (models.Model):
    imie = models.CharField(verbose_name=u'Imię', max_length=40)
    nazwisko = models.CharField(max_length=40)

(...)

def __unicode__(self):
    return u'%s %s'(self.imie, self.nazwisko) 
```

当我尝试将其保存在编辑器中并运行 runserver 命令时，服务器发送 Validating models... 消息并挂起，没有任何错误，并且我无法刷新页面导致服务器无法启动。当我在 verbose_name='Imie' 中插入普通（非 unicode）时，一切正常。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:16:16.807

通过在文件顶部写入以下内容将文件编码设置为 UTF-8。

```
# coding=utf8 
```

然后在字符串前添加一个小写字母 u。

```
verbose_name=u'Imię' 
```

[有关PEP 263](http://www.python.org/dev/peps/pep-0263/)中 Python 编码的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:05:25.753

您忘记使用`unicode`.

```
 imie = models.CharField(verbose_name=u'Imię', max_length=40) 
```

# scala - Scala中无限流的嵌套迭代

> ID：14026617
> 
> 赞同：2
> 
> 时间：2012-12-25T00:03:07.460
> 
> 标签：scala, stream, for-comprehension

我有时发现自己想在 Scala 中对无限流执行嵌套迭代以**进行**理解，但指定循环终止条件可能有点棘手。有没有更好的方法来做这种事情？

我想到的用例是我不一定预先知道我正在迭代的每个无限流需要多少元素（但显然我知道它不会是无限的）。假设每个流的终止条件可能以某种复杂的方式依赖于 for 表达式中其他元素的值。

最初的想法是尝试将流终止条件编写为**for表达式中的****if**过滤器子句，但是在循环嵌套无限流时会遇到麻烦，因为无法短路第一个无限流上的迭代，最终导致 OutOfMemoryError。我理解为什么会这样，考虑**到**表达式如何映射到**map**、**flatMap**和**withFilter**方法调用——我的问题是是否有更好的习惯来做这种事情（也许根本不涉及**理解**）。

 ******为了给出一个有点人为的例子来说明刚刚描述的问题，考虑以下（非常天真的）代码来生成数字 1 和 2 的所有配对：

```
val pairs = for {
  i <- Stream.from(1) 
  if i < 3 
  j <- Stream.from(1) 
  if j < 3
} 
yield (i, j)

pairs.take(2).toList 
// result: List[(Int, Int)] = List((1,1), (1,2)) 

pairs.take(4).toList
// 'hoped for' result: List[(Int, Int)] = List((1,1), (1,2), (2,1), (2,2))
// actual result:
//  java.lang.OutOfMemoryError: Java heap space
//      at scala.collection.immutable.Stream$.from(Stream.scala:1105) 
```

显然，在这个简单的示例中，可以通过将**if**过滤器移动到对原始流的**takeWhile**方法调用来轻松避免该问题，如下所示：

```
val pairs = for {
  i <- Stream.from(1).takeWhile(_ < 3) 
  j <- Stream.from(1).takeWhile(_ < 3) 
}    
yield (i, j) 
```

但是为了这个问题的目的，想象一个更复杂的用例，其中流终止条件不能轻易移动到流表达式本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T16:32:30.887

一种可能性是包装`Stream`到您自己的处理`filter`方式不同的类中，在这种情况下，如`takeWhile`：

```
import scala.collection._
import scala.collection.generic._

class MyStream[+A]( val underlying: Stream[A] ) {
  def flatMap[B, That](f: (A) => GenTraversableOnce[B])(implicit bf: CanBuildFrom[Stream[A], B, That]): That = underlying.flatMap(f);

  def map[B, That](f: (A) ⇒ B)(implicit bf: CanBuildFrom[Stream[A], B, That]): That = underlying.map(f);

  def filter(p: A => Boolean): Stream[A] = underlying.takeWhile(p);
  //                                       ^^^^^^^^^^^^^^^^^^^^^^^^
}

object MyStream extends App {
  val pairs = for {
    i <- new MyStream(Stream.from(1))
    if i < 3
    j <- new MyStream(Stream.from(1))
    if j < 3
  } yield (i, j);

  print(pairs.toList);
} 
```

这打印`List((1,1), (1,2), (2,1), (2,2))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:31:08.747

我已经调整了 Petr 的建议以提出我认为更普遍可用的解决方案，因为它不会限制**if**过滤器在 for 理解中的定位（尽管它有更多的语法开销）。

这个想法再次将底层流封装在一个包装器对象中，它在不修改的情况下委托`flatMap`,`map`和`filter`方法，但首先将`takeWhile`调用应用到底层流，谓词为`!isTruncated`，其中`isTruncated`是属于包装器对象的字段。在任何时候调用`truncate`包装对象都会翻转`isTruncated`标志并有效地终止对流的进一步迭代。这在很大程度上依赖于`takeWhile`对底层流的调用是延迟评估的事实，因此在迭代后期执行的代码可能会影响其行为。

`|| s.truncate`缺点是您必须通过附加到过滤器表达式（`s`对包装流的引用在哪里）来保留对您希望能够在迭代中截断的流的引用。您还需要确保`reset`在流中的每次新迭代之前调用包装器对象（或使用新的包装器对象），除非您知道重复迭代每次的行为都相同。

```
import scala.collection._
import scala.collection.generic._

class TruncatableStream[A]( private val underlying: Stream[A]) {
  private var isTruncated = false;

  private var active = underlying.takeWhile(a => !isTruncated)

  def flatMap[B, That](f: (A) => GenTraversableOnce[B])(implicit bf: CanBuildFrom[Stream[A], B, That]): That = active.flatMap(f);

  def map[B, That](f: (A) => B)(implicit bf: CanBuildFrom[Stream[A], B, That]): That = active.map(f);

  def filter(p: A => Boolean): Stream[A] = active.filter(p);

  def truncate() = {
    isTruncated = true
    false
  }

  def reset() = {
    isTruncated = false
    active = underlying.takeWhile(a => !isTruncated)
  }
}

val s1 = new TruncatableStream(Stream.from(1))
val s2 = new TruncatableStream(Stream.from(1))

val pairs = for {
  i <- s1

  // reset the nested iteration at the start of each outer iteration loop 
  // (not strictly required here as the repeat iterations are all identical)
  // alternatively, could just write: s2 = new TruncatableStream(Stream.from(1))  
  _ = _s2.reset()      

  j <- s2
  if i < 3 || s1.truncate
  if j < 3 || s2.truncate
} 
yield (i, j)

pairs.take(2).toList  // res1: List[(Int, Int)] = List((1,1), (1,2))
pairs.take(4).toList  // res2: List[(Int, Int)] = List((1,1), (1,2), (2,1), (2,2)) 
```

毫无疑问，这可以改进，但这似乎是解决问题的合理方法。******

# matlab - 分割图像的错误分类错误

> ID：14026619
> 
> 赞同：-1
> 
> 时间：2012-12-25T00:03:30.783
> 
> 标签：matlab, image-segmentation

我正在研究图像分割，我想使用等于的错误分类错误来评估我的工作

```
ME = 1- (|b0 intersect bt|+ |f0 intersect ft|)/(|b0|+|f0|) 
```

其中 BO 和 FO 表示原始（ground-truth）图像的背景和前景，BT 和 FT 表示测试图像中的背景和前景区域像素。

我不知道如何从背景中区分对象，以及如何生成缩放值。我正在研究matlab。我将不胜感激。迫在眉睫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T16:01:36.343

使用该`nnz`命令，您可以轻松计算图像中非零像素的数量。假设你有一个分割图像`si`和一个真实图像`gt`，它们都是二值图像，只要有信号，错误分类可以写成

```
ME = 1 - (nnz(~gt & ~si) + nnz(gt & si))/(numel(gt)); 
```

在分母中，您只需输入像素总数，因为这是背景加上前景的总和。

# c++ - std::map 赋值

> ID：14026625
> 
> 赞同：2
> 
> 时间：2012-12-25T00:04:12.780
> 
> 标签：c++, map, std

全部，我有以下代码：

在 .h 文件中：

```
struct Foo
{
   int ma;
   double mb;
   Foo(int a, double b)
   {
        ma = a;
        mb = b;
   }
   Foo()
   {
        ma = 0;
        mb = 0.0;
   }
};

class MyClass
{
public:
    MyClass();
private:
     std::map<std::string,Foo> m_map;
};

In .cpp file:

MyClass::MyClass()
{
    m_map["1"] = Foo( 1, 0.1 );
    m_map["2"] = Foo( 2, 0.2 );
    m_map["3"] = Foo( 3, 0.3 );
} 
```

将 Foo(0, 0) 分配给 m_map["2"] 的最简单方法是什么？

我可以简单地写

```
m_map["2"] = Foo( 0, 0 ); 
```

但在这种情况下，将创建一个 Foo 类型的新变量。

另外，我没有循环，所以不能真正使用迭代器......

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:12:43.960

你可以简单地写：

```
m_map["2"]; 
```

这是来自[cppreference](http://en.cppreference.com/w/cpp/container/map/operator_at)的关于`std::map::operator[]`：

> **使用 key 作为键和默认构造**的映射值将新元素插入容器，并返回对**新构造**的映射值的引用。

因此，如果您尝试“获取”该值，则将调用您的默认构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T00:11:46.603

如果我理解正确，你可以写

```
m_map["2"].ma = 0;
m_map["2"].mb = 0; 
```

虽然我不明白为什么

```
m_map["2"] = Foo(0,0); //or just Foo() because of the overloaded constructor 
```

是个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T00:20:07.007

C++ 使用复制语义，容器保存您放入其中的内容的副本。另请注意，库可以自由复制容器中的对象（例如`std::vector`在重新分配时），并且假定对象的副本等同于该对象。

如果复制对您来说是一个问题（因为性能或语义），那么解决方案是添加一个间接级别并在映射中放置指向对象或代理的智能指针而不是真实对象本身。

这样，图书馆创建的副本或临时文件的数量将无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T00:08:46.637

> 我可以简单地写

```
m_map["2"] = Foo( 0, 0 ); 
```

> 但在这种情况下，将创建一个 Foo 类型的新变量。

不，它会`Foo( 0, 0)`在地图内部存储中创建实例的副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T00:14:34.490

由于您没有更改 a 值的方法`Foo`，是的，只需为 a 分配`map["2"]`一个新对象。旧的将被覆盖 - 因为它无论如何都是原始对象的副本，所以没有区别。反正你的`Foo(0,0)`寿命很短。

或者，您可以添加一个`Foo::SetAB(int a, double b) { ma = a; mb = b; }`函数（或两个函数来设置 a 和 b，或者一个将两者都设置为零的 clear 函数，或者这个主题的其他一些变体。然后使用`m_map["2"].SetAB(0, 0);` - 在这种情况下，两者之间没有太大区别选项，但如果`Foo`是一些复杂的对象需要花费大量的“努力”来创建（例如，有很多成员、有很多值、要分配的内存、要存储的字符串等），那么拥有一个更改成员变量的函数。

# html - 无法使用文本输入

> ID：14026628
> 
> 赞同：0
> 
> 时间：2012-12-25T00:05:15.663
> 
> 标签：html, css, input

为什么我无法单击并输入以下文本输入？解决此问题的最佳方法是什么？

```
<body>
    <div class="centralCollumn">
        <div class="NewsTitle">Forum, Ask Questions or give advice</div>
        <div class="NewsHeadBreak"></div>
        <div class="NewsPara">
            <form class="commentForum">
                Leave a comment or question: <input type="text" name="comment" class="comment" ></input>
            </form>
        </div>
    </div>
</body> 
```

这是我的CSS：

```
.centralCollumn {
    position: absolute;
    top: 18%;
    left: 10%;
    width: 90%;
    height: 100%;
    text-align: center;
    z-index: -1;
    background-color: #ecf1f3;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T00:22:19.560

`z-index: -1;`放在它的`.centralCollumn`父母后面，使它不可能与它上面的任何东西进行交互。不过，您仍然可以看到它，因为父母的背景是透明的。把那部分拿出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:29:32.013

您的输入标签不正确。尝试删除...

```
</input> 
```

占位符的正确使用是...

```
<input type="text" name="comment" class="comment" value="$comment" > 
```

# php - 如何在项目中不产生太多单独的页面（文件）？

> ID：14026631
> 
> 赞同：0
> 
> 时间：2012-12-25T00:05:45.233
> 
> 标签：php, optimization, architecture

已经接管了项目，他们需要向数据库添加许多不同的信息，然后再对其进行编辑。`create_x.php` `edit_x.php` `list_all_x.php`考虑到我使用 smarty 模板语言，它将 php 与 html 分开，因此总页面数为 120 页（60 个 php 和 60 个 smarty 模板文件），就像 20 多个不同的沙子样式页面一样，相同的布局会运行 20 次。

哪里的页面 create_x.php 和 edit_x.php 除了按钮名称“编辑”与“创建”之外基本相同，并且该信息是预先填充的，以及添加到数据库的代码不同。

是否有理由让我保持这种方式，而不是在同一页面中合并编辑和创建页面，然后在逻辑上预填充字段或更改提交按钮值？

这会将页面数减少到 60。这仍然很多，有没有办法减少页面，即使它们都不同，但具有相同的用法添加或编辑数据库中的信息。

就像这如何调用一些使用模块等的编程方法一样。我觉得如果我先设计站点引擎然后只提供我想要显示的字段并根据张贴的字段等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:09:18.807

而不是拥有`create_user.php`,`create_issue.php`等，只需使用`create.php`并执行类似`create.php?class=user`.

编辑/列表也是如此。

你需要每个类都有一个可编辑字段的列表，以及它们的“友好名称”，但你也会摆脱很多模板化的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:12:46.980

是否有更好的做事方法的答案可能是“是”。这听起来像是在您采用剪切和粘贴方法进行编程之前从事该项目的人。现在，您正在考虑重构代码。我只是建议您继续沿用当前的方法。查找公共代码被反复重用的区域，并通过类、公共函数等使该代码可用。当你经历并这样做时，很快就会发现更多有类似问题的代码区域。继续重构这些。

当然，如果您认为当前的代码库太过分了，将其重构为易于维护的东西可能比从头开始并尝试匹配输出更麻烦，那么您也可以采用这种方法和设计从一开始就有意义的事情。

# c - 释放指向指针结构的指针

> ID：14026632
> 
> 赞同：0
> 
> 时间：2012-12-25T00:07:05.173
> 
> 标签：c, multithreading, memory-management, malloc

我有一个似乎无法解决的情况。它导致缓慢但随着时间的推移灾难性的内存泄漏。我注意到，即使我释放了一个指针结构（我将其传递给了一个函数），我也忘记了释放它们内部的指针，根据 valgrind 的说法，这会导致内存泄漏。我试图从函数中释放指针的内存，但似乎无法解决错误消息`error: request for member 'xxx' in something not a structure or union`。

这是我的程序的简短概述。我正在创建一个数据结构，其中包含线程函数所需的变量。有一个主函数，参数被传递给它，并根据数据填充适当的结构。然后它启动实际函数的线程（将结构作为 void 指针传递），我在其中获取并重新创建函数内部的实际结构。这是代码：

```
void cmd_test(char *sender, char **args, int arg_count) {
    char command[1024];

    // creates my exec pointer structure
    exec_struct *exec = malloc(sizeof(exec_struct));

    // adds a thread identifier to a struct to keep track of threads
    exec->tID = thread_add(EXEC);

    // the first malloc which I don't know how to free
    exec->sender = malloc(sizeof(char) * strlen(sender) + 1);
    sprintf(exec->sender, "%s", sender);

    // move ahead 5 arguments (there will always be 5 or more arguments supplied
    // by the calling function)
    args += 5;
    memset(command, 0, sizeof(command));

    // concatenate the remaining arguments into a cstring
    while(*args[0]) {
        printf("arg: %s\n", *args);
        sprintf(command, "%s %s", command, *args);
        args++;
    }

    // the second malloc which I don't know how to free
    exec->exec = malloc(sizeof(char) * strlen(command) + 1);

    // copy the string to the structure from pointer+1 to end of pointer
    // removes a space created from the first iteration of previous loop)
    sprintf(exec->exec, "%s", command + 1);

    printf("command:%s\n exec:%s\n", command, exec->exec);

    //stores an actual thread id into a struct of threads to keep track of 
    //the actual thread (other one is just to keep track of what type
    //of thread is running)
    threads[exec->tID].tID = Thread_Start(exec_cmd, exec);
} 
```

这就是我设置我的结构的方式，并对正在发生的事情发表一些评论。`Thread_Start()`只是一个函数，它接受一个函数地址和一个结构地址传递给线程函数。这是`exec_cmd`功能：

```
void *exec_cmd(void *param) {
    char buf[1024];
    FILE *command;

    // recreate the structure locally inside the thread
    exec_struct exec = *((exec_struct *)param);

    // causes the error described
    // free(param.exec);
    // free(param.sender);

    // free the structure memory from the thread creating function.
    free(param);

    memset(buf,0,1024);
    sprintf(buf,"%s",exec.exec);
    command = popen(buf,"r");

    while(!feof(command)) {
        memset(buf,0,1024);
        fgets(buf,1024,command);
        printf("%s\n", buff);
        sleep(1);
    }

    pclose(command);

    // cleans itself up from the tracking structures
    thread_remove(EXEC, 0);

    // exits cleanly
    return NULL;
} 
```

为了解决该错误，我尝试将结构投射到它前面，但错误仍然存​​在。使用`->`运算符会导致`void* deference`错误。

我还从功能中删除了一些大块内容，例如检查线程是否已经在运行和错误检查以减少混乱。这两个函数都可以在我的应用程序中工作（它创建的线程可以很好地存储它，并且它正在完美地传递和创建新结构，并且它正在执行传递的命令）。只是我不知道如何释放我从线程内部进行的两个 malloc 调用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:16:02.843

```
exec_struct exec = *((exec_struct *)param);

//free(param.exec);
//free(param.sender); 
```

param 是`void *`传入的。您的结构副本称为`exec`.

你的意思可能是：

```
free(exec.exec);
free(exec.sender); 
```

但是请注意，您`exec.exec`稍后会在同一功能中立即访问。如果你已经释放了它，你就不能这样做。复制结构并不意味着您已经复制了指针指向的内存。

这一行：

```
sprintf(buf,"%s",exec.exec); 
```

需要发生之前`exec.exec`是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:59:47.900

一般原则是从结构中的“最深”层次开始，然后逐步向上。永远不要让“上”层的东西被释放，直到它里面的所有东西都被释放。换句话说，使用您调用 malloc 的相反顺序。

我真的不明白这样做的意义：

```
exec_struct exec = *((exec_struct *)param); 
```

我只想复制原始指针：

```
exec_struct *exec = (exec_struct *)param; 
```

然后

```
free(exec->sender); 
free(exec->command);

free(exec); 
```

当然，在您使用完 exec 结构之前，您不应该进行任何释放。

# c# - 为什么 System.Text.RegularExpressions.Group 没有 Name 属性？

> ID：14026633
> 
> 赞同：3
> 
> 时间：2012-12-25T00:07:09.173
> 
> 标签：c#, regex, regex-group

在c#的正则表达式中，我们可以写一个正则表达式，给一个组赋值，例如，

```
(?<One>abc) 
```

但是，在 System.Text.RegularExpressions.Group 类中，没有组名称的属性。我们能得到名字的唯一方法是

```
System.Text.RegularExpressions.GetGroupNames() 
```

为什么他们不能在名称的 Group 类中放置一个属性？是否有特殊原因不按设计这样做？

**编辑：** 当我尝试使用以下功能时遇到了这个问题：

```
Regex.Replace(string input,
string pattern,
MatchEvaluator evaluator
) 
```

我想使用同一个评估器来处理基于不同正则表达式的多个替换。如果组有 name 属性，在 evaluator 内部，我可以通过查看它的名称来判断它是哪个正则表达式。但是，没有这样的属性。

我最终通过使用闭包并使用 GetGroupNames 来做到这一点，但我仍然认为它应该具有 name 属性。如果组没有名称，则该属性可以为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T00:17:38.063

`Group`在 API 中不提供a背后的逻辑`Name`是，如果您通过使用 a 的索引器检索了`Group`from ，那么该组可能不是命名的；否则，您可能更喜欢通过索引器检索它。`GroupCollection``int``string`

另一方面，如果您通过索引器检索了组`string`，那么您已经知道组的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T14:32:06.997

[Group Class](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group(v=vs.110).aspx "团体课")的文档暗示该类的最新版本确实具有 Name 属性。我的经验是这在运行时可用，但在编译时不可用（！！）我在 MSDN 论坛[论坛问题上问过一个关于此的问题](https://social.msdn.microsoft.com/Forums/en-US/8b632ef0-610d-4e1f-a965-6f179c5cea19/systemtextregularexpressionsgroup-missing-name-property?forum=netfxbcl)

# python - NSTask 没有以正确的路径启动 Python

> ID：14026634
> 
> 赞同：0
> 
> 时间：2012-12-25T00:07:09.730
> 
> 标签：python, xcode, cocoa, frameworks

在我的 Mac OS 应用程序中，我包含了一个 Python.framework (v 2.7)，所以我根据需要将它添加到“链接框架”中。同样在应用程序中，我正在使用 NSTask 启动一个 Python 脚本，例如：

```
//...
pythonEnv = [[[NSBundle mainBundle] privateFrameworksPath] stringByAppendingPathComponent:@"Python.framework/Versions/2.7/bin/python"];
task = [[NSTask alloc] init];
outPipe = [NSPipe pipe];
readHandle = [outPipe fileHandleForReading];
data = [[NSMutableData alloc] init];

args = [NSArray arrayWithObjects: scriptPath, kbt, server, port, username, password, nil];

[task setArguments:args];
[task setLaunchPath: pythonEnv];

readHandle = [outPipe fileHandleForReading];
[task setStandardInput:[NSPipe pipe]];
[task setStandardOutput:outPipe];
[task launch];
[task waitUntilExit];
//... 
```

当我构建应用程序并在 Python 脚本中检查它使用的版本时`sys.path`，它会返回：

["/Users/...脚本的路径.../Contents/Resources", "/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip", "/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7", "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin", "/Library/Frameworks/Python.framework/Versions/2.7 /lib/python2.7/plat-mac", "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages", "/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7/lib-tk”、“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old”、“/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7/lib-dynload", "/Users/tatiana/Library/Python/2.7/lib/python/site-packages", "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages", "/Library/Python/2.7/site-packages"]

...它没有使用我包含的框架。我还应该在哪里设置正确的路径？我忘记了构建设置中的内容吗？

**更新 1 ---------------------**

如果我没有设置任务环境，并且在 Python 测试中`sys.executable`，我得到：

/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python

...所以看起来它没有使用我的框架。如果设置任务环境：

```
// pythonEnv = [[[NSBundle mainBundle] privateFrameworksPath] stringByAppendingPathComponent:@"Python.framework/Versions/2.7/bin/python"];
NSDictionary *environment = [NSDictionary dictionaryWithObjectsAndKeys: pythonEnv, @"PYTHONPATH", nil];
[task setEnvironment:environment]; 
```

并测试它，我仍然得到相同的结果。但是，如果在 Python 中我用 测试`os.environ["PYTHONPATH"]`，我得到：

/Users/tatiana/Desktop/MyApp.app/Contents/Frameworks/Python.framework/Versions/2.7/bin/python

这看起来更有希望，但我很困惑为什么 sys.executable 没有给我这个。

**更新 2**

我的**bin/python**不是可执行文件，所以我将其更改为 python2.7；`sys.executable`仍然显示它默认为 Library/...

```
pythonEnv = [[[NSBundle mainBundle] privateFrameworksPath] stringByAppendingPathComponent:@"Python.framework/Versions/2.7/bin/python2.7"];
NSString *searchPath = [[[NSBundle mainBundle] privateFrameworksPath] stringByAppendingPathComponent:@"Python.framework/Versions/2.7/lib/python2.7"];
NSDictionary *environment = [NSDictionary dictionaryWithObjectsAndKeys: searchPath, @"PYTHONPATH", nil];
[task setEnvironment:environment]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:36:38.720

这可能是一个已知的错误。在 bugs.python.org 上查看这个[旧的邮件列表帖子](http://mail.python.org/pipermail/python-bugs-list/2001-November/008487.html)和这个[更近的错误](http://bugs.python.org/issue7774)。

Python 2.7.3 的 Modules/getpath.c 中有这样的评论：

```
 /* On Mac OS X, if a script uses an interpreter of the form
  * "#!/opt/python2.3/bin/python", the kernel only passes "python"
  * as argv[0], which falls through to the $PATH search below.
  * If /opt/python2.3/bin isn't in your path, or is near the end,
  * this algorithm may incorrectly find /usr/bin/python. To work
  * around this, we can use _NSGetExecutablePath to get a better
  * hint of what the intended interpreter was, although this
  * will fail if a relative path was used. but in that case,
  * absolutize() should help us out below
  */ 
```

虽然这可能并不直接适用于您，但这是一个提示，可能`argv[0]`在执行的 python 进程中只是`"python"`. 如果注释中提到的 hack 失败或您的版本中不存在，Python 将查看`$PATH`并尝试找到 Python 解释器的绝对路径。`_NSGetExecutablePath`您的框架（不在 中`$PATH`）被忽略，因此它会找到系统 Python 并使用它。

您可以通过几种方式验证这一点。您可以在调试器中设置断点并查看`NSTask`最终传递给`exec()`. 或者，您可以查看`ps ax`并找到您的 Python 进程（让您的脚本打印其 PID 然后永远运行可能会有所帮助）并查看第一个参数是否是您的框架的完整路径。或者，您可以`sys.argv[0]`在您的脚本中签出（可能——也许它已被修改）。

如果这确实是问题所在，则解决方法是获得适当的`argv[0]`设置。我看`NSTask`不出`bin/`用`PATH`. 至少 Python 可以推断出正确的值`sys.executable`。

或者，如果您的脚本中没有任何内容真正关心`sys.executable`，那么您可以在确定您的 Python 实际上是正在执行的那个之后将其保持原样，尽管`sys.executable`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:52:00.947

听起来你混淆了两个相关的事情：

1.  启动应用程序包中的 Python 可执行文件
2.  设置 Python 搜索路径以包含应用程序包中的 Python lib 文件夹

要设置`NSTask`运行的 Python 可执行文件的路径，请设置其`launchPath`. 在 Python 中，您可以使用`sys.executable`.

要操作 Python 的搜索路径，请`-[NSTask setEnvironment:]`使用`PYTHONPATH`set调用**框架的`lib/python2.7`文件夹**。在 Python 中，您可以使用`sys.path`.

# intellij-idea - 如何在 IDEA 中配置运行时属性参数？

> ID：14026635
> 
> 赞同：1
> 
> 时间：2012-12-25T00:07:10.100
> 
> 标签：intellij-idea

使用`IntelliJ`，我设置了一个属性

![在此处输入图像描述](../Images/8651f94b0d2abdba276ac553a3119cf4.png)

我不能，但是以`System.getProperty("Key")`（我得到`null`）的身份访问它

这不是这样做的方法吗？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:57:11.600

可能有不止一种方法可以做到这一点，但这种方法绝对有效：

![设置虚拟机选项](../Images/922191f173c97749cbb869d7b9187f24.png)

要进入此对话框，请单击顶部的下拉菜单（菜单栏正下方）并选择`Edit Configurations...`。单击`OK`然后按绿色播放按钮运行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T01:47:04.677

您可以设置“VM 选项”值，例如 -DKey="key"。

# iphone - UITableView 和 UILabel 重复

> ID：14026637
> 
> 赞同：2
> 
> 时间：2012-12-25T00:07:42.033
> 
> 标签：iphone, ios, ipad, uitableview

这简直让我大吃一惊。

我有一个自定义 UIView 和 UILable 作为子视图添加到 cell.contentView 中的 UITableView 中。我有一个名为 arryData 的数组，其中包含大约 100 个字符串作为我想在表中显示的数据。问题是，当创建表时，我看到 arryData 的前 0-4 行带有值，如果我继续向下滚动表，我看到的只是前 5 个字符串一遍又一遍地重复。我究竟做错了什么？这是我的代码。

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //NSLog(@"Inside cellForRowAtIndexPath");

    static NSString *CellIdentifier = @"Cell";

    // Try to retrieve from the table view a now-unused cell with the given identifier.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    UILabel *labelValue1 = [[UILabel alloc] initWithFrame:CGRectMake(70, 25, 200, 30)];

    // If no cell is available, create a new one using the given identifier.
    if (cell == nil)
    {
        // Use the default cell style.
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        //cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        UIImageView *imgVw1 = [[UIImageView alloc] initWithFrame:CGRectMake(11, 0, 300, 75)];
        imgVw1.image = [UIImage imageNamed:@"background_pic5.png"];
        imgVw1.userInteractionEnabled = YES;
        imgVw1.exclusiveTouch = YES;
        [cell.contentView addSubview:imgVw1];

        labelValue1.text = [arryData objectAtIndex:indexPath.row];
        labelValue1.font = [UIFont fontWithName:@"BradleyHandITCTT-Bold" size: 22.0];
        labelValue1.textColor = [UIColor whiteColor];
        labelValue1.textAlignment = UITextAlignmentCenter;
        labelValue1.numberOfLines = 1;
        labelValue1.backgroundColor = [UIColor clearColor];
        labelValue1.adjustsFontSizeToFitWidth = YES;
        labelValue1.minimumFontSize = 10.0;
        labelValue1.tag = (indexPath.row)+100;
        [cell.contentView addSubview:labelValue1];

        NSLog(@"indexPath.row: %d - arrayData: %@..." , indexPath.row, [arryData objectAtIndex:indexPath.row]);
    }
    else
    {
        NSLog(@"indexPath.row: %d - arrayData: %@..." , indexPath.row, [arryData objectAtIndex:indexPath.row]);

        labelValue1 = (UILabel *) [cell viewWithTag:((indexPath.row)+100)];
        labelValue1.text = [arryData objectAtIndex:indexPath.row];
    }

    //Do this only if row has a value. For blank ones, Skip this

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        //its iphone
        cell.textLabel.font = [UIFont systemFontOfSize:13];
    }

    if([arryDataMutable containsObject:indexPath])
    {
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
    } 
    else 
    {
        [cell setAccessoryType:UITableViewCellAccessoryNone];
    }

    //cell.backgroundColor = [UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;

} 
```

这就是当我向下滚动表格时我的输出的样子，我看到的只是我 labelValue1 中 indexPath.row 0 - 4 中的文本一遍又一遍地重复

```
indexPath.row: 0 - arrayData: Behind Whipped...
indexPath.row: 1 - arrayData: Aftershock Whip...
indexPath.row: 2 - arrayData: Bull Whipped Sound 1...
indexPath.row: 3 - arrayData: Bull Whipped Sound 2...
indexPath.row: 4 - arrayData: Bullet Fire Whip...
indexPath.row: 5 - arrayData: Circus Whip...
indexPath.row: 6 - arrayData: Circus Whip2... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T00:21:45.810

在这种情况下更改您设置标签的方式，

```
labelValue1.tag = 100; 
```

并将其读作，

```
labelValue1 = (UILabel *) [cell viewWithTag:100]; 
```

由于您正在使单元格出列，因此它将尝试重用单元格，并在您为单元格分配内存时将标签添加到该单元格中。执行 else 部分时，您需要访问已添加为`[cell viewWithTag:100];`.

`[cell viewWithTag:((indexPath.row)+100)];`对于第一次不可见的大多数单元格将返回 nil。由于您正在重用单元格，因此您将再次看到相同的前 5 个可见单元格和相同的文本。在这种情况下，您试图将文本设置为`nil`对象。所以它不会有任何区别，因此你会看到相同的文本重复。

# android - 在 Android 中使用 LibNoDave 库，总是从 PLC 内存接收 0

> ID：14026640
> 
> 赞同：1
> 
> 时间：2012-12-25T00:08:24.443
> 
> 标签：android, plc, siemens, s7-1200, libnodave

我正在尝试使用 Android 设备（当前使用模拟器）与我的 S7-1200 PLC 通信。我找到了示例程序，但我无法让它工作。

这是主程序：

```
public class Avvio extends Activity {
private final static String newline = "\n";
public final static String PlcIpAddress = "10.9.15.58";
Button btnConnectRetreive, btnDelete;
TextView lblPlcAddress, txtRisultato, lblStatus, txtStatus;
TestISOTCP tp;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    settaLayout();
    gestiscoEventi();

    validaIndirizzoIp();
}

private void settaLayout() {
    lblPlcAddress = (TextView) findViewById(R.id.lblPlcAddress);
    btnConnectRetreive = (Button) findViewById(R.id.btnConnectRetreive);
    btnDelete = (Button) findViewById(R.id.btnDelete);
    lblStatus = (TextView) findViewById(R.id.lblStatus);
    txtStatus = (TextView) findViewById(R.id.txtStatus);
    txtRisultato = (TextView) findViewById(R.id.txtRisultato);

}

private void validaIndirizzoIp() {
    ValidateIP validaIp = new ValidateIP();
    if (validaIp.validate(PlcIpAddress)) {
        btnConnectRetreive.setEnabled(true);
        lblPlcAddress.setText("PLC Address: " + PlcIpAddress);
    } else {
        btnConnectRetreive.setEnabled(false);
    }
}

private void gestiscoEventi() {
    // Gestico Evento per il Bottone Collega e Leggi
    // I handle event for the button Connect Retrive
    btnConnectRetreive.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            PlcState.ErrPlc = false;
            long timeOut;

            timeOut = network.testConnection("10.9.15.58", 102, 20000);

            if (timeOut > -1) {// connection is alive
                PlcState.ErrPlc = false;
                // System.out.println("time " +
                // String.valueOf(timeOut));
                txtStatus.setText("OK " + "timeout: " + String.valueOf(timeOut));
                // Now re try to read and write
                readSomeData();
            } else {// connection is not alive
                PlcState.ErrPlc = true;
                txtStatus.setText("!!! " + "timeout: " + String.valueOf(timeOut));
            }
        }
    });

    // Gestisco Evento per cancellare i dati letti
    // I handle event for the button delete result
    btnDelete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            txtRisultato.setText("");
        }
    });

}

private void readSomeData() {
    try {
        TestISOTCP.prepara();
        txtRisultato.append("=======================" + newline);
        txtRisultato.append("DBW1.DBB0 DoubleInt " + DB1.DBB0 + newline);
        txtRisultato.append("DBW1.DBB1 DoubleInt  " + DB1.DBB1 + newline);
        txtRisultato.append("MD0 DoubleInt " + Merker.MD0 + newline);
        txtRisultato.append("MD1 DoubleInt " + Merker.MD4 + newline);
        txtRisultato.append("MD2 DoubleInt " + Merker.MD8 + newline);
        txtRisultato.append("MD3 Float " + Merker.MD12 + newline);
    } catch (Exception e) {
        PlcState.ErrPlc = true;
        Toast.makeText(this, "Errore" + e, Toast.LENGTH_SHORT).show();

    }
}
} 
```

这是 TestISOTCP 类：

```
public class TestISOTCP
{
static boolean doWrite = true;
static int useProtocol = Nodave.PROTOCOL_ISOTCP;
static int slot = 2;

public int i, j;
public char buf[];
public byte buf1[];
public PLCinterface di;
public TCPConnection dc;
public Socket sock;

TestISOTCP(String host) {

    buf = new char[Nodave.OrderCodeSize];
    buf1 = new byte[Nodave.PartnerListSize];
    try
        {
            System.out.println("Sono nel costruttore");

            sock = new Socket(host, 102);
        } catch (SocketException e)
        {
            System.out.println("Errore con soket in costruttore " + e);
            e.printStackTrace();

        } catch (IOException e)
        {
            System.out.println("Errore in costruttore " + e);
            e.printStackTrace();
        }

    System.out.println("Esco dal costruttore");
}

public static void prepara()
    {
        // Plc Address to connect 
        TestISOTCP tp = new TestISOTCP("10.9.15.58");
        tp.runSomething();
    }

void runSomething()
    {
        OutputStream oStream = null;
        InputStream iStream = null;
        System.out.println("sono in run2");
        byte[] by;
        if (sock != null)
            {
                try
                    {
                        oStream = sock.getOutputStream();
                    } catch (IOException e)
                    {
                        PlcState.ErrPlc = true;
                        System.out
                                .println("oStream = sock.getOutputStream() "
                                        + e);
                    }
                try
                    {
                        iStream = sock.getInputStream();
                    } catch (IOException e)
                    {
                        PlcState.ErrPlc = true;
                        System.out
                                .println("iStream = sock.getInputStream() "
                                        + e);
                    }
                di = new PLCinterface(oStream, iStream, "IF1", 0,
                        Nodave.PROTOCOL_ISOTCP);

                dc = new TCPConnection(di, 0, slot);

                int res = dc.connectPLC();
                if (0 == res)// Here we Read from PLC
                    {
                        System.out
                                .println("Read flags");
                        dc.readBytes(Nodave.FLAGS, 1, 0, 1, null);// Read
                                                                // DataBlok
                        DB1.DBB0 = dc.getBYTE();
                        System.out.println("DB1:DW0:" + DB1.DBB0);
                        //DB1.DBB2 = dc.getWORD();
                        //System.out.println("DB1:DW1: " + DB1.DBB2);

                        /*
                        System.out
                                .println("Trying to read 16 bytes from FW0.\n");
                        dc.readBytes(Nodave.FLAGS, 0, 0, 16, null);// Read
                                                                    // Flag
                        Merker.MD0 = dc.getU32();
                        Merker.MD4 = dc.getU32();
                        Merker.MD8 = dc.getU32();
                        Merker.MD12 = dc.getFloat();
                        System.out.println("4 DWORDS " + Merker.MD0 + " "
                                + Merker.MD4 + " " + Merker.MD8);
                        System.out.println("1 Float: " + Merker.MD12);

                        if (doWrite)// Here we write from PLC
                            {
                                System.out
                                        .println("Now we write back these data after incrementing the first 3 by 1,2,3 and the float by 1.1.\n");

                                by = Nodave.bswap_32(Merker.MD0 + 1);
                                dc.writeBytes(Nodave.FLAGS, 0, 0, 4, by);

                                by = Nodave.bswap_32(Merker.MD4 + 1);
                                dc.writeBytes(Nodave.FLAGS, 0, 4, 4, by);

                                by = Nodave.bswap_32(Merker.MD8 + 1);
                                dc.writeBytes(Nodave.FLAGS, 0, 8, 4, by);

                                by = Nodave.toPLCfloat(Merker.MD12 + 1.1);
                                dc.writeBytes(Nodave.FLAGS, 0, 12, 4, by);

                                dc.readBytes(Nodave.FLAGS, 0, 0, 16, null);
                                Merker.MD0 = dc.getU32();
                                Merker.MD4 = dc.getU32();
                                Merker.MD8 = dc.getU32();
                                Merker.MD12 = dc.getFloat();
                                System.out.println("FD0: " + Merker.MD0);
                                System.out.println("FD4:" + Merker.MD4);
                                System.out.println("FD8:" + Merker.MD8);
                                System.out.println("FD12: " + Merker.MD12);

                            } // doWrite
*/
                        System.out.println("Now disconnecting\n");
                        dc.disconnectPLC();
                        di.disconnectAdapter();
                    } else
                    {
                        PlcState.ErrPlc = true;
                        System.out
                                .println("Couldn't connect to PLC. Error:"
                                        + res);
                    }
            } else
            {
                PlcState.ErrPlc = true;
                System.out.println("Couldn't open connection");
            }
    }

 } 
```

连接似乎正在工作，我可以 ping 它并且代码的第一部分显示连接状态正常。

但是，每个返回值都等于 0，我确定我在 PLC 中设置了它。我还在PLC中启用了网络服务器功能（据我所知，这是必要的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:22:12.277

你的问题是 s7-300 中的 1200 slot=1 和 400 slot=2 中的插槽

# html - 将背景扩展到边缘

> ID：14026643
> 
> 赞同：4
> 
> 时间：2012-12-25T00:08:48.267
> 
> 标签：html, css, background, background-image

我有一个`<div>`具有 10 像素边距的元素，如下面的代码所示。我的问题很简单：如何将背景图像扩展到边缘？我尝试使用 CSS3`background-clip`和`background-origin`子属性，但它们没有将背景扩展到边缘的选项。

**CSS：**

```
#pagesidebar
{
    background-image:url('/Users/bagavatu/images/background.png');
    margin:10px;
} 
```

**HTML：**

```
<div id="pagesidebar">Hello</div> 
```

我知道我可以将`pagesidebar`div 附加到父 div 中，并在此处简单地应用背景图像，但我更喜欢不需要新 div 的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T00:14:07.053

切换`margin: 10px`到`padding: 10px`它应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T00:22:45.153

背景与您的 div 相关，而不是与边距相关，请改用填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T00:14:00.853

你应该能够结合[背景大小](http://www.w3schools.com/cssref/css3_pr_background-size.asp)和[背景位置来做到这一点](http://www.w3schools.com/cssref/pr_background-position.asp)

# ios - Facebook SDK for IOS 登录 Facebook 后无法返回当前视图但跳转到应用优先视图

> ID：14026645
> 
> 赞同：2
> 
> 时间：2012-12-25T00:09:04.710
> 
> 标签：ios, facebook, facebook-graph-api, ios6

我的应用程序有两个视图：

1.  午餐应用程序时显示的主视图或第一个视图。在单击此视图的 vlidate 按钮时，我们转到第二个视图。
2.  女巫的第二个视图有一个按钮“登录到 Facebook”。单击此按钮时，我们可以登录 facebook。

但是在登录 facebook 后，并没有返回到当前视图（第二个视图），而是返回到第一个视图（主视图）

谢谢！

# java - 如何在java中实现可访问性

> ID：14026650
> 
> 赞同：7
> 
> 时间：2012-12-25T00:10:16.320
> 
> 标签：java, swing, accessibility

我有视力障碍，正在开发一些 Java GUI，如果我自己无法访问我的 GUI，我会觉得非常讽刺。因此，如果有人可以就如何在 java 中实现可访问性提供一些建议/示例，那么任何可以提供帮助的人都会很棒。

我正在寻找如何制作、可访问的组合框、tabbedPanes、按钮、 *表格*（添加描述）以及您认为重要的任何其他内容。另外，有人可以解释什么是 getAccessibleContext 方法以及如何使用它？其中一些按钮（例如按钮）似乎已经很容易访问了，但是我制作的测试组合框并没有被我的语音阅读器很好地解释。

任何有关上述任何信息的信息将不胜感激。

非常感谢

PS如果有用的话，使用eclipse来纠正代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T00:28:13.213

有教程可访问性解释了什么是可访问的上下文。链接：[如何支持辅助技术](http://docs.oracle.com/javase/tutorial/uiswing/misc/access.html)

# asp.net-mvc-3 - 从 Razor 助手中获取模型

> ID：14026652
> 
> 赞同：0
> 
> 时间：2012-12-25T00:10:29.307
> 
> 标签：asp.net-mvc-3, razor

有没有办法将视图模型传递给 @helper 函数？

我有一个显示是/否/可能单选按钮的自定义编辑器。此编辑器的代码如下所示。由于它需要一个自定义函数加上 3 行代码来显示每个单选按钮，我想将创建每个单选按钮及其关联标签的代码封装在一个全局 @helper 函数中，但我不知道如何将 RadioButtonFor 移动到全局辅助函数中。

鲍勃

这是现有的代码：

```
@model System.String

@functions {
    // Returns an anonymous object that specifies the radio button HTML options
    private object HTMLOptions(string id, bool @checked) {
        if (@checked) {
            return new { id, @checked = "checked" };
        } else {
            return new { id };
        }
    }
}

@{
    string value = Model + "";
    string id;
}

<div class="option-list">
    @{id = ViewData.TemplateInfo.GetFullHtmlFieldId("radioYes");}
    @Html.RadioButtonFor(q => q, "true", HTMLOptions(id, value == "true"))
    @Html.LabelFor(q => q, "Yes", new {@for = id})
    <br />

    @{id = ViewData.TemplateInfo.GetFullHtmlFieldId("radioNo");}
    @Html.RadioButtonFor(q => q, "false", HTMLOptions(id, value == "false"))
    @Html.LabelFor(q => q, "No", new {@for = id})
    <br />

    @{id = ViewData.TemplateInfo.GetFullHtmlFieldId("radioMaybe");}
    @Html.RadioButtonFor(q => q, "maybe", HTMLOptions(id, value == "maybe"))
    @Html.LabelFor(q => q, "Maybe", new {@for = id})
    <br />
</div> 
```

我希望能够在一次调用中编写一个封装 RadioButtonFor 和 LabelFor 的通用帮助程序，以及包含“checked”属性的附加代码，如下所示：

```
@model something

<div class="option-list">
    @MyRadioButtonAndLabelFor(q => something.x, "Yes",   "true") @* (model, label, value) *@
    @MyRadioButtonAndLabelFor(q => something.x, "No",    "false")
    @MyRadioButtonAndLabelFor(q => something.x, "Maybe", "maybe")
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:41:29.967

~~试试这样：~~

 ~~```
@model System.String

@functions {
    private object HtmlAttributes(string id, string model, string value) {
        if (model == value) {
            return new { id, @checked = "checked" };
        }

        return new { id };
    }
}

@helper Radios(HtmlHelper<string> html) {
    var model = html.ViewData.Model;

    @html.RadioButtonFor(q => q, "true", HtmlAttributes("yes", model, "true"))
    @Html.LabelFor(q => q, "Yes", new { @for = "yes" })
    <br/>

    @html.RadioButtonFor(q => q, "false", HtmlAttributes("no", model, "false"))
    @Html.LabelFor(q => q, "No", new { @for = "no" })
    <br/>

    @html.RadioButtonFor(q => q, "maybe", HtmlAttributes("maybe", model, "maybe"))
    @Html.LabelFor(q => q, "Maybe", new { @for = "maybe" })
    <br/>
}

<div class="option-list">
    @Radios(Html)
</div> 
```~~  ~~* * *

更新：

看来我误读了你的问题。更新后，我更了解您要实现的目标。为了实现它，您可以编写一个自定义 Html 助手：

```
using System;
using System.Linq.Expressions;
using System.Text;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Html;

public static class HtmlExtensions
{
    public static IHtmlString MyRadioButtonAndLabelFor<TModel, TValue>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TValue>> expression,
        string label,
        object value
    )
    {
        var name = ExpressionHelper.GetExpressionText(expression);
        var id = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(
            name + value
        );
        var sb = new StringBuilder();
        sb.Append(htmlHelper.RadioButtonFor(expression, value, new { id = id }));
        var labelTag = new TagBuilder("label");
        labelTag.SetInnerText(label);
        labelTag.Attributes["for"] = id;
        sb.Append(labelTag.ToString());
        return new HtmlString(sb.ToString());
    }
} 
```

然后你可以有一个视图模型：

```
public class MyViewModel
{
    public string Value { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel
        {
            Value = "false"
        });
    }
} 
```

和相应的观点：

```
@model MyViewModel

<div class="option-list">
    @Html.MyRadioButtonAndLabelFor(q => q.Value, "Yes",   "true")
    @Html.MyRadioButtonAndLabelFor(q => q.Value, "No",    "false")
    @Html.MyRadioButtonAndLabelFor(q => q.Value, "Maybe", "maybe")
</div> 
```

备注：为了将`MyRadioButtonAndLabelFor`自定义扩展方法引入范围，您需要添加命名空间，其中包含类 ( `HtmlExtensions`) 已在您`~/Views/web.config`(not ) 的命名空间标记中或通过添加指令`~/web.config`在视图本身中声明。`@using ...`

* * *

如果您愿意，还可以在 Razor 视图中定义内联助手：

```
@functions {
    public IHtmlString MyRadioButtonAndLabelFor<TModel, TValue>(
        HtmlHelper<TModel> htmlHelper,
        System.Linq.Expressions.Expression<Func<TModel, TValue>> expression,
        string label,
        object value
    )
    {
        var name = ExpressionHelper.GetExpressionText(expression);
        var id = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(name + value);

        var sb = new StringBuilder();
        sb.Append(htmlHelper.RadioButtonFor(expression, value, new { id = id }));
        var labelTag = new TagBuilder("label");
        labelTag.SetInnerText(label);
        labelTag.Attributes["for"] = id;
        sb.Append(labelTag.ToString());

        return new HtmlString(sb.ToString());
    }
} 
```

然后像这样使用它：

```
<div class="option-list">
    @MyRadioButtonAndLabelFor(Html, q => q.Value, "Yes",   "true")
    @MyRadioButtonAndLabelFor(Html, q => q.Value, "No",    "false")
    @MyRadioButtonAndLabelFor(Html, q => q.Value, "Maybe", "maybe")
</div> 
```

就 Razor 助手而言（`@helper`定义），它们不能是通用的，因此您将很难声明这样的构造。~~

# php - PHP 的 MySQL 语法错误

> ID：14026653
> 
> 赞同：4
> 
> 时间：2012-12-25T00:10:31.367
> 
> 标签：php, mysql, windows, wampserver

我遇到了 MySQL 5.5.24 和 PHP 5.4.3 的问题。我有以下 HTML/PHP 代码：

```
<?php
function connect() {
    $con = mysql_connect( "127.0.0.1", "root", "" );
    if ( !$con ) {
        die( "Could not connect: " . mysql_error() );
    }
    mysql_select_db( "game" );    
}

function protect( $string ) {
    return mysql_real_escape_string( strip_tags( addslashes( $string ) ) );
}

if ( isset( $_POST[ 'register' ] ) ) {
    connect();
    $username = protect( $_POST[ 'username' ] );    
    $register = mysql_query( "SELECT 'id' FROM 'user' WHERE 'username'='$username'" ) or die( mysql_error() );
    if ( mysql_num_rows( $register ) > 0 ) {
        echo "That username is already in use!";
    } else {
        $ins = mysql_query( "INSERT INTO 'user' ('username') VALUES ('$username')" ) or die( mysql_error() );
        echo "You have registered!"; 
    } 
}
?>
<form action="register.php" method="POST">           
Username: <input type="text" name="username"/><br/>
<input type="submit" name="register" value="Register"/>
</form> 
```

无论我输入什么，MySQL 都会返回

```
"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''user' WHERE 'username'='XXX'' at line 1" 
```

我用 phpmyadmin 检查了这些查询，它们工作得很好！也没有连接问题。我什至尝试`"SELECT * FROM 'user'"`了同样的结果。我根本没有得到任何回应，只是提到了关于格式错误的 SQL 语法的错误。

现在我检查了大量具有相同错误的文章，在每种情况下，问题都是使用了 PHP 的关键字或缺少/拼写错误的变量名等。我现在检查了我的陈述一百次，我找不到任何错误。我对 PHP 很陌生，所以也许我错过了一些东西......

我最后的实验之一是更改数据库的排序规则以及存储引擎，同样没有结果......

希望你们能看到我看不到的东西！:-)

顺便说一句，我正在运行 Windows 7 和 WAMP 2.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:12:39.413

```
SELECT 'id' FROM 'user' WHERE 'username' 
```

更改`'`为```（反引号）

你在说什么表名和列名，你应该使用反引号。当您谈论字符串（如值）时，请使用单/双引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:12:48.113

写名字时应该使用反引号（而不是引号）：

```
SELECT `id` FROM `user` WHERE `username` = 'foo' 
```

引号用于字符串文字。

顺便说一句，您的`protect`功能是个坏主意。我建议您避免使用已弃用的`mysql_*`功能。在 mysqli 或 PDO 中使用参数化查询。

**有关的**

*   [用 PHP 清理用户输入的最佳方法是什么？](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)
*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# redis - 用于存储数据库主键列表的 Redis 集设计

> ID：14026657
> 
> 赞同：1
> 
> 时间：2012-12-25T00:11:38.377
> 
> 标签：redis

嘿，我希望有人可以阐明实现以下目标的最佳方法。

基本上，我希望能够在 redis 中针对几种类型存储 id 列表，以便我可以使用 id 列表执行查询。

即我们有一个用户类型，它具有由他们创建的操作。我希望能够从 redis 中获取密钥，例如 user:X:action_ids == [1, 6, 7, 8] 并从 postgres 中进行查询，例如从 [ids] 中 id 的操作

我喜欢要订购的列表，因为我可能一次只需要十个项目，因此索引该 id 列表也很重要。

我一直在查看文档并对需要的内容有一个基本的了解，我只是不确定如何将所有元素组合在一起以产生结果

# php - 从作为数组的对象属性访问值

> ID：14026660
> 
> 赞同：1
> 
> 时间：2012-12-25T00:12:00.067
> 
> 标签：php, arrays, object, properties

如何从作为数组的对象属性访问值？

例如：

```
$myObject = new MyClass;

$myObject->myproperty = array(1 => 'English', 2 => 'French', 3 => 'German'); 
```

如何使用来自的数组键获取单个属性值`$myObject->mypropery`？使用`$myObject->myproperty[3]`不起作用。

**编辑：**使用`$myObject->myproperty[3]`确实有效。我发现问题的地方是这样做的：

```
$myproperty = 'myproperty';

echo $myObject->$myproperty[3]

// result : 'r' 
```

然而，如果我对我做一个 var_dump ，`$myObject->$myproperty`我会看到我的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:21:50.177

试试这个：

```
$myObject->myproperty[3] 
```

而不是这个：

```
$myObject->$myproperty[3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:27:05.323

```
$tmp = $myObject->$myproperty;
echo $tmp[1];
//or
echo $myObject->{$myproperty}[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T00:27:23.947

要访问您的`myproperty`数组值，请尝试以下操作：

```
$myObject->{$myproperty}[3] 
```

代替：

```
$myObject->$myproperty[3] 
```

这些被称为变量变量，更多信息请访问： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

The reason your `echo` result was `r` is because your `$mypropery` value is `mypropery` and you executed this `echo $myObject->$myproperty[3]` which translate to saying you want the third character array keys value. Since arrays are zero based this means you will get the character `r` as a result. Hope this clears up why your result was `r`.

# android - Android In-App Billing v3: "Can't perform operation: queryInventory"

> ID：14026668
> 
> 赞同：29
> 
> 时间：2012-12-25T00:12:58.990
> 
> 标签：android, in-app-billing

I have setup In-App Billing for the first time using the new v3 API. It is working correctly on my devices but I have received a lot of error reports from other users.

One of them is:

```
java.lang.IllegalStateException: IAB helper is not set up. Can't perform operation: queryInventory
    at my.package.util.iab.IabHelper.checkSetupDone(IabHelper.java:673)
    at my.package.util.iab.IabHelper.queryInventory(IabHelper.java:462)
    at my.package.util.iab.IabHelper$2.run(IabHelper.java:521)
    at java.lang.Thread.run(Thread.java:1019) 
```

And another one is:

```
java.lang.NullPointerException
    at my.package.activities.MainActivity$4.onIabSetupFinished(MainActivity.java:159)
    at my.package.util.iab.IabHelper$1.onServiceConnected(IabHelper.java:242) 
```

My activity implementation follows Google's example code (all referenced classes are untouched from the example):

```
IabHelper mHelper;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //...

    mHelper = new IabHelper(this, IAB_PUBLIC_KEY);
    mHelper.enableDebugLogging(true);

    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
        public void onIabSetupFinished(IabResult result) {
            if (!result.isSuccess()) {
                // Oh noes, there was a problem.
                return;
            }

            // Hooray, IAB is fully set up. Now, let's get an inventory of
            // stuff we own.
            mHelper.queryInventoryAsync(mGotInventoryListener); //***(1)***
        }
    });
}

// Listener that's called when we finish querying the items we own
IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result,
            Inventory inventory) {
        if (!result.isFailure()) {
            if (inventory.hasPurchase(SoundsGlobals.IAB_SKU_PREMIUM)){
                //we are premium, do things
            }
        }
        else{
            //oops
        }
    }
};

@Override
protected void onDestroy() {
    if (mHelper != null) {
        mHelper.dispose();
        mHelper = null;
    }
    super.onDestroy();
} 
```

I assume that both errors originate from the line marked as `***(1)***`

What is the cause of these errors? If I'm calling `queryInventoryAsync` only within `onIabSetupFinished`, how is it possible that `mHelper` is null, or that `mHelper` is not set up?

Does anyone know a solution to this?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T13:29:07.697

As @Martin explained, there was a bug in the Google In-App Billing example which caused this.

However, after fixing it, I was still receiving some errors in internal calls (`queryInventory` inside the thread created in `queryInventoryAsync` in some rare cases reports that the helper is not setup). I have solved this by adding an additional catch in that case:

```
try {
    inv = queryInventory(querySkuDetails, moreSkus);
}
catch (IabException ex) {
    result = ex.getResult();
}
catch(IllegalStateException ex){ //ADDED THIS CATCH
    result = new IabResult(BILLING_RESPONSE_RESULT_ERROR, "Helper is not setup.");
} 
```

I also got a crash on `mHelper.dispose()` which I fixed in a similar way:

```
try{
    if (mContext != null) mContext.unbindService(mServiceConn);
}
catch(IllegalArgumentException ex){ //ADDED THIS CATCH
    //IGNORE IT - somehow, the service was already unregistered
} 
```

Of course, instead of ignoring these errors you can silently log them to ACRA, for example :)

Thanks for all your comments.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-06T20:01:07.203

There is a bug in IABHelper. The return line in the exception handler is missing, meaning it drops through and calls the success hanlder - however, mSetupDone has not been set, so further calls to the API fail. Add the return statement in as below - this will still fail, but the failure will be correctly reported to your app so you can take appropriate action.

```
 catch (RemoteException e) {
                if (listener != null) {
                    listener.onIabSetupFinished(new IabResult(IABHELPER_REMOTE_EXCEPTION,
                                                "RemoteException while setting up in-app billing."));
                }
                e.printStackTrace();
                return;  // This return line is missing
            }

            if (listener != null) {
                listener.onIabSetupFinished(new IabResult(BILLING_RESPONSE_RESULT_OK, "Setup successful."));
            } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-25T14:09:51.310

I believe that there are still two bugs in the Android code, which explains why you still see the error. Notice that the call stack is on a stand-alone thread. But the code that sets mSetupDone (IabHelper) to true executes on the main UI thread. Java does not guarantee that data changed by one thread will be visible to the other thread due to CPU caching unless you declare the variable with the volatile keyword. Thus it is possible that it was setup (mSetupDone == true), but that the new value of mSetupDone is cached on UI thread, not yet visible to this thread in your call stack. So that thread still sees mSetupDone == false.

I tried to fix this by declaring mSetupDone with volatile, and also every other non-final field of IabHelper just to be safe.

Now the other problem is the .dispose() function. It does not stop the ongoing threads. This means that it can set mSetupDone to false while one of the worker threads is running. If you look at queryInventoryAsync(), you will see it does check that mSetupDone is true. And based on your call stack, it did get past that. Then it crashed later with mSetupDone == false. Only way that could happen is if dispose() were called while your thread was in flight. Fix is that dispose() needs to signal threads to just silently bail out instead of continuing and throwing errors when it sees mSetupDone == false. This also prevents yet another problem with IabHelper where disposed instances call listener callbacks even after being disposed! It's a bit complicated to explain line by line here, but hopefully thus gets you pointed in the right direction.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-06T17:11:04.170

I found out! It's about the version of the user's Google Play Store app. In-app billing V3 needs 3.9.16 or higher ([http://developer.android.com/google/play/billing/versions.html](http://developer.android.com/google/play/billing/versions.html)). I used an older version and I received that error, now on 4.4.21 its ok!

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T07:36:22.980

Make sure you are implementing the `IabHelper.han.handleActivityResult(requestCode, resultCode, data)` method in your activities `onActivityResult` method.

```
 @Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

// Pass on the activity result to the helper for handling
  if (!mIabHelper.handleActivityResult(requestCode, resultCode, data)) {
      // not handled, so handle it ourselves (here's where you'd
      // perform any handling of activity results not related to in-app
      // billing...
      super.onActivityResult(requestCode, resultCode, data);
  } else {
      Log.i(TAG, "onActivityResult handled by IABUtil.");
  }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-04T12:17:05.700

I'm getting that EXACT same error with pretty-much the exact same code.

Only seems to be happening on certain handsets (actually, it seems almost exclusively the Acer Iconia Tablet in recent error reports!!) - and I am handling onActivityResult...

There are a number of errors in the Google v3 Billing Sample which can cause ANRs/FCs - I suspect this is just another one (shoddy code and shoddy docs are becoming a Google trademark - sadly).

My guess is - for now - that we need to allow for either mHelper or mGotInventoryListener being null and just disable In-App Billing in that case (as if result.isSuccess() was false, basically)

p.s. editted to add - it could just be that the user has an out-of-date version of the Play Store - that only auto-updates if they allow it to run!?

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T07:58:50.023

You can keep up to date with the inapp v3 API development at [https://code.google.com/p/marketbilling/](https://code.google.com/p/marketbilling/)

The code there is newer than the one that is available through the Android SDK Manager.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-02T00:57:49.853

In addition to @DavidM and @Ereza.

Another major issue with the IabHelpr class is the poor choice of throwing RuntimeExcptions (IllegalStateException) in multiple methods. Throwing RuntimeExeptions from your own code in most cases is not desirable due to the fact that they are *unchecked exceptions*. That is like sabotaging your own application- if not caught, these exceptions will bubble up and crash your app.

The solution to this is to implement your own *checked exception* and change the IabHelper class to throw it, instead of the IllegalStateException. That will force you to handle this exception everywhere it could be thrown in your code at compile time.

Here is my custom exception:

```
public class MyIllegalStateException extends Exception {

    private static final long serialVersionUID = 1L;

    //Parameterless Constructor
    public MyIllegalStateException() {}

    //Constructor that accepts a message
    public MyIllegalStateException(String message)
    {
       super(message);
    }
} 
```

Once we make the changes in the IabHelper class, we can handle our checked exception in our code where we call the class methods. For example:

```
try {
   setUpBilling(targetActivityInstance.allData.getAll());
} catch (MyIllegalStateException ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-11T22:45:37.433

If all above fail to help you, give it a go to try to analyse your code a little - **is your `IabHelper` really set up at the time you're calling it?**

I found myself doing it slightly wrong without realising it. A simple example of using it **wrong** in `Activity.onCreate()`

```
m_iabHelper = new IabHelper(this, base64EncodedPublicKey); // Declare

m_iabHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() { // Setup
    public void onIabSetupFinished(IabResult result) {
        // Setup code
    }
}

// Don't do this, will produce an error
List additionalSkuList = new ArrayList(); 
additionalSkuList.add(SKU_MYSKU);
m_iabHelper.queryInventoryAsync(true, additionalSkuList, m_queryFinishedListener);
// Don't do this, will produce an error 
```

.

Above will honour you with the *"IAB helper is not set up"* error since while your app tries to execute the `m_iabHelper.queryInventoryAsync()`, the IabHelper it is not set up yet. Consider using these functions in `onIabSetupFinished()` or somewhere after that function is called (eg. outside the `onCreate()`)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-11T00:44:01.477

I get the same errors. I also ran into other issues...

Having more than one google account on a device disabled in-app billing on my Galaxy Tab 7\. Remove one account re-enabled it.

I've seen issues with the in app billing sample code on a GT-P5110, LGL75C, and GT-S5839i among others.

(I use the code in an application with ACRA installed... so everytime it crashes, I get info)

The devices Android version ranges from 2.3.3 to 4.0.4.

It's very annoying.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-20T15:46:31.390

There were many problems with IABHelper.java.

Firstly - the version that is downloaded by the SDK Manager is not kept up to date. Use the version found here: [https://code.google.com/p/marketbilling/source/detail?r=15946261ec9ae5f7c664d720f392f7787e3ee6c7](https://code.google.com/p/marketbilling/source/detail?r=15946261ec9ae5f7c664d720f392f7787e3ee6c7) It is the most up to date version as of posting this answer. Many issues seem to have been fixed with this version compared to the initial release which comes from the SDK Manager.

Only thing I've had to change in this version is adding `flagEndAsync();` after line 404 which fixes an IllegalStateException when 2 IAB purchase flows are launched in quick succession.

With this version you do not need to manage using `flagEndAsync();` in your files and can leave the method to not be public.

# jquery - 将更多对象数组添加到本地存储键中

> ID：14026673
> 
> 赞同：3
> 
> 时间：2012-12-25T00:13:50.470
> 
> 标签：jquery, arrays, json, local-storage

我有一个具有值的本地存储键“ `st`”：

```
[{"id":"es","state":"5hwrte5"},{"id":"bs","state":"dakiei3"}] 
```

**如果它不存在，我想在最后添加一个键值，**最终得到：

```
[{"id":"es","state":"5hwrte5"},{"id":"xs","state":"dakiei3"},{"id":"NEWKEY","state":"off"}] 
```

所以我尝试的是：

```
if (typeof getstate(json, 'NEWKEY') == "undefined"){
  localStorage["st"] = JSON.stringify([{
     "id": "es",
     "state": getstate(json, "es")
  }, {
     "id": "xs",
     "state": getstate(json, "bs")
  }, {
     "id": "NEWKEY",
     "state": "off"
  }])
} 
```

Where`getstate`为我提供了某个特定 ID 的状态。

现在主要问题是我想保持这些值不变（所以我需要在当时检索它们）并使用最简单的方法，所以**如果我的密钥有 30 个不同的 id 而我想再添加 1 个，我没有必须检索所有 30 个 id 的值。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:32:26.443

使用每个 ID 作为键的对象而不是对象数组似乎会好得多

```
var st={
  "es":{"state":"5hwrte5"},
  "xs":{"state":"dakiei3"}
} 
```

然后访问 ID 的数据：

```
alert( st.es.state); 
```

要添加新属性：

```
st['newKey']={state:"off"}/* same as writing st.newKey={state:"off"}
     /* OR*/
st.newKey={state:"off"} 
```

然后对象看起来像：

```
var st={
  "es":{"state":"5hwrte5"},
  "xs":{"state":"dakiei3"},
  newKey :{state:"off"}/* quotes on object keys are optional unless they contain special characters or spaces*/
} 
```

`JSON.stringify(st)`然后，您将使用或将整个对象与 JSON 进行转换`JSON.parse( localStorage['st'])`

**编辑：**如果您更喜欢保持数组格式，您可以添加一个新元素，如下所示：

```
var st = [{"id":"es","state":"5hwrte5"},{"id":"bs","state":"dakiei3"}];

st.push( {"id":"NEWKEY","state":"off"})

/* results in */
[{"id":"es","state":"5hwrte5"},{"id":"xs","state":"dakiei3"},{"id":"NEWKEY","state":"off"}] 
```

使用数组，您必须遍历数组中的每个元素才能搜索特定 ID

```
for(i=0 ; i< st.length; i++){
     var object= st[i];
    if ( object.id=="NEWKEY"){
           alert(object.state)
    }
} 
```

# java - 我无法将响应发送回客户端

> ID：14026679
> 
> 赞同：1
> 
> 时间：2012-12-25T00:14:24.580
> 
> 标签：java, sockets, serversocket

我正在创建一个服务器和一个客户端。现在我可以从 向 发送消息`Client`，`ServerThread`并且`ServerThread`能够得到消息。但是当`ServerThread`尝试回复时，`Client`没有得到响应，但消息已发送。似乎它正在等待响应，但永远无法收到它。

服务器线程：

```
public class ServerThread extends Thread {
   private Socket socket;
   private DataOutputStream outToClient;
   private BufferedReader inFromClient;

   public ServerThread(Socket socket) {
      try {
         System.out.println("Thread started");
         this.socket = socket;
         outToClient = new DataOutputStream(socket.getOutputStream());
         inFromClient = new BufferedReader(new InputStreamReader(socket.getInputStream()));
      } catch (FileNotFoundException e) {
         e.printStackTrace();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }

   public void run() {
      System.out.println("Thread running");
      try {
         System.out.println("ServerThread: " + inFromClient.readLine());
         outToClient.writeBytes("I Can help you");
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
} 
```

服务器：

```
public class Server {
   public static final int PORT = 5589;

   public static void main(String[] args) {
      ServerSocket socket;

      try {
         socket = new ServerSocket(5589);

         while (true)
            new ServerThread(socket.accept()).start();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }
} 
```

客户：

```
public class Client {
   public static void main(String args[]) throws Exception {
      Socket socket = new Socket("localhost", App.PORT);
      BufferedReader inFromServer = new BufferedReader(new InputStreamReader(socket.getInputStream()));
      PrintWriter outToServer = new PrintWriter(socket.getOutputStream(), true);

      outToServer.println("Hello, I'm Lost");

      System.out.println(inFromServer.readLine()); //Hangs on this line

      socket.close();
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:22:09.830

您的数据在服务器端缓冲，并且在缓冲区已满之前不会自动发送：您应该`.flush()`在服务器端`.writeBytes()`确保它被发送，即使您没有达到缓冲区大小（这取决于操作系统和套接字配置）。

# graphics - 如何确定片段的颜色是否为白色？

> ID：14026686
> 
> 赞同：4
> 
> 时间：2012-12-25T00:15:40.420
> 
> 标签：graphics, opengl-es, glsl, webgl, three.js

我的场景中有很多相邻的圆圈（白色圆圈和不同颜色的圆圈）。我只想模糊白色圆圈。（在我的情况下，白色表示 (1,1,1)。）

我的问题是：我应该如何仅使用片段着色器来选择和模糊白色片段？

我想在 GLSL 中做这样的事情：

```
if (my_current_fragment's_color == white)
{blur current fragment;}
else
{do not blur current fragment} 
```

（我有一个有效的模糊效果，但它不恰当地模糊了整个场景，因为我无法根据片段的颜色在我的代码中做出决定。）

我该怎么做？上述代码在 GLSL 语言中的精确匹配是什么？如何确定片段的颜色是否为白色？你们有什么想法吗？

* * *

如果您可能需要，这是我的代码：

```
 vertexShader: [
        //"#define KERNEL_SIZE 25.0",
        "uniform vec2 uImageIncrement;",
        "varying vec2 vUv;",
        "void main() {",
        "vUv = uv - ( ( KERNEL_SIZE - 1.0 ) / 2.0 ) * uImageIncrement;",
        "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
        "}"
    ].join("\n"),
    fragmentShader: [
        //"#define KERNEL_SIZE 25",
        "uniform float cKernel[ KERNEL_SIZE ];",
        "uniform sampler2D tDiffuse;",
        "uniform vec2 uImageIncrement;",
        "varying vec2 vUv;",
        "void main() {",
            "vec2 imageCoord = vUv;",
            "vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );",
            "for( int i = 0; i < KERNEL_SIZE; i ++ ) {",

            "sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];",
            //THE ABOVE LINE SHOULD BE RUN FOR WHITE FRAGMENTS ONLY. BUT HOW?

            "imageCoord += uImageIncrement;",
            "}",
            "gl_FragColor = sum;",
        "}" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T01:09:03.580

这将非常困难，您将不得不做出一些妥协，除非您可以将白色圆圈渲染到不同的帧缓冲区。

假设你从这个开始。

![蓝色背景的粉红色三角形上的白色圆圈](../Images/0737a652038879d94e9cc99890f11182.png)

如果您只将模糊内核应用于白色像素，您将得到：

![蓝色背景的粉红色三角形上内部模糊的白色圆圈](../Images/ec6551160a9f351cefcc0753b10b17e6.png)

由于蓝色像素没有得到模糊内核，因此白色像素不能渗入蓝色。只有粉红色和蓝色像素可以渗入白色。

因此，您尝试将图像分为白色部分和非白色部分：

![白色圆圈](../Images/8b52c343b0681b6e993a4d764bc2252c.png) ![蓝色背景的粉红色三角形上的黑色圆圈](../Images/07575753b6f521746c617e8f93f24dfa.png)

然后您可以分别模糊白色部分，然后重新组合（在多个步骤中，或全部在同一个着色器中）。但是你必须弄清楚用什么重新组合它。如果将其与原始图像重新组合，硬边白色仍然存在。如果你将它与只有非白色部分的图像重新组合，你会得到一个硬黑边。

![蓝色背景的粉红色三角形上带有光晕的白色圆圈](../Images/b612a83375a5d4e54ebe09169cbaac07.png) ![在蓝色背景的粉红色三角形上带有光晕和黑色边缘的白色圆圈](../Images/b84007e088ee693055d28ad689a130b2.png)

## 解决方案

*   您可以将白色圆圈渲染为单独的纹理，然后将其模糊，然后将其叠加在其他所有内容之上。

*   您可以缩放内核，使内核“向外”模糊（膨胀），因此当您在黑色背景上模糊白色圆圈时，白色像素保持白色。这将消除边缘。

*   您可以模糊靠近但不完全等于白色圆圈的图像区域。例如，您可以使用模糊的白色圆圈作为 Alpha 蒙版来混合模糊图像和清晰图像。

*   你可以想办法让白色圆圈一开始看起来很模糊。

# c++ - 奇怪地重复出现的模板模式乘以 2

> ID：14026687
> 
> 赞同：1
> 
> 时间：2012-12-25T00:16:02.027
> 
> 标签：c++, scientific-computing, crtp

我有一般设计问题。我正在尝试实现这样的事情：

```
 ------------
                  |Base Class|
                  ------------
                       |
               ------------------
               |                |
          -----------      -----------
          |SubClass1|      |SubClass2|
          -----------      -----------
               |                |
         --------------   --------------
         |SubSubClass1|   |SubSubClass2|
         --------------   -------------- 
```

其中基类提供虚函数，子类提供实现，子子类为实现提供常量。

我曾想过两次使用“奇怪的重复模板模式”：

```
// header baseclass.h
template <typename subclass>
class baseclass {
private:

public:

  virtual double GetQuantity1(double given1, double given2) = 0;

  virtual double GetQuantity2(double given1) = 0; 

}

// header subclass1.h
template <typename n>
class subclass1:public baseclass<subclass>{
private:

  private1(double, double);

public:

  double GetQuantity1(double given1, double given2);

  double GetQuantity2(double given1); 

}

// header subsubclass1.h
class subsubclass1:public subclass1<subsubclass1>{
private:

public:

  double constant1;

  double constant2;
} 
```

然后我会在使用代码时调用 Subsubclass::GetQuantity1() 。

像犹太洁食一样的东西还是有更好的方法来做这样的事情？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:22:41.767

这样做很好，我认为这样做没有任何普遍的缺点。我只是不明白您实际在哪里使用 CRTP，以及为什么简单的虚拟继承不适用于您的用例（CRTP 通常用作静态多态）。

也不明白你的意思

```
private1(double, double); 
```

你的`subclass1`意思是构造函数吗？就目前而言，它在实例化时不会编译（除了构造函数或析构函数之外，不允许没有返回值的函数）。

另一个批评者是：如果你的意思是常量，你应该在你的子类中声明`const`or`static const`成员。

~~由于您没有明确指定您的特定用例，因此很难说什么才是真正的最佳设计。~~我可以提供一个尝试遵循您的想法的替代方案：

```
// header baseclass.h
template <typename subclass>
class baseclass {
public:

    inline double GetQuantity1(double given1, double given2) {
        // may be add a static check for GetQuantity1_Impl with a traits 
        // check on subclass.
        return static_cast<subclass*>(this)->GetQuantity1_Impl(given1,given2);
    }

    inline double GetQuantity2(double given1) {
        return static_cast<subclass*>(this)->GetQuantity2_Impl(given1);
    }

    // You also can provide default implementations, otherwise the interface
    // method will be required from subclass to compile correctly
    inline double GetQuantity1_Impl(double given1, double given2) {
        // ...
    }
}; 
```

* * *

```
// header subclass1.h
template<double const1, double const2>
class subclass1:public baseclass<subclass1>{
public:
    subclass1() {}

    double GetQuantity1_Impl(double given1, double given2) {
        return 0.0; // Apply formula using the constants instead of 0.0
    }
    double GetQuantity2_Impl(double given1) {
        return 0.0; // Apply formula using the constants instead of 0.0
    }
}; 
```

* * *

```
// Client implementation file
// No need for subsubclass1 just instantiate for usage

subclass1<0.3, 3.1415> myAlgo;
// A client calls the public interface of the (implicit) base class
double result1 = myAlgo.GetQuantity1(23.2,42);
double result2 = myAlgo.GetQuantity2(2.71828); 
```

`subclass`消除基类中的纯虚方法定义，并用对模板参数的静态接口（'traits'）检查替换它们。

# android - 需要从 cmd 行访问 SQLite 表

> ID：14026689
> 
> 赞同：0
> 
> 时间：2012-12-25T00:16:04.057
> 
> 标签：android, sqlite

我有一个从我开发的 Android 应用程序创建和访问的数据库。但是，我想访问我的应用程序之外的表格。我已经尝试了命令行工具'sqlite3'并尝试了来自 master 的各种 SELECTS，但它找不到我的 DB 文件。在代码中它是“/data/data/databases/dbname”，但指定它不起作用。此外，如果我搜索我的高清内容，则找不到我的数据库。H... 在哪里是 DB 文件，我如何从我的 Android 应用程序外部访问它？非常感谢帮助，并有一个愉快的假期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:38:40.923

在 adb shell 试试这个

```
run-as <package-name> sqlite3 /data/data/<packagename>/databases/dbname 
```

为此，您的应用程序应该是调试版本（进程应该在 ddms 中可见）

# php - INSERT ... ON DUPLICATE KEY UPDATE 插入错误的顺序

> ID：14026693
> 
> 赞同：1
> 
> 时间：2012-12-25T00:16:40.980
> 
> 标签：php, sql

我正在尝试插入和更新数据。问题是它没有像我想象的那样插入。

```
foreach($urls as $key => $value)
    {
        $mysqli->query("INSERT INTO urls (url_id,parent_id,url) VALUES ('$key','$parent_id','$value') ON DUPLICATE KEY UPDATE url = '$value'");
    } 
```

该表应如下所示：

```
url_id   |   parent_id   |   url
1        |   1           |   http://cnn.com
2        |   1           |   http://msn.com
3        |   1           |   http://amazon.com 
```

它最终看起来像：

```
url_id   |   parent_id   |   url
1        |   1           |   http://cnn.com
3        |   1           |   http://amazon.com
2        |   1           |   http://msn.com 
```

如果插入另一行，它将高于：

```
3        |   1           |   http://amazon.com 
```

我了解 SQL 没有订单，但为什么查询会以这种方式插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:18:23.240

MySQL 表中没有固有的顺序。`ORDER BY url_id`从中选择时使用。

# ajax - JSF ViewParam 必需 +AJAX 中断页面

> ID：14026702
> 
> 赞同：5
> 
> 时间：2012-12-25T00:18:59.403
> 
> 标签：ajax, jsf, jsf-2, viewparams

当我单击下面页面上的命令按钮时，导航失败。（单击按钮刷新页面，删除 URL 参数并显示所需的错误消息，而不是导航到索引页面）

但是，如果我删除所需的属性或删除 f:ajax 标记，导航工作正常。

使用 com.sun.faces JSF 2.1.13 和 primefaces 3.4。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>

 <f:metadata>
        <f:viewParam name="product"
            required="true" requiredMessage="Bad request. Please use a link from within the system."/>
    </f:metadata>

<body>

    <h:form id="form">
        <h:selectBooleanCheckbox>
            <f:ajax update="form" />
        </h:selectBooleanCheckbox>
        <h:commandButton value="buy" action="/index.xhtml?faces-redirect=true" />
    </h:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T01:30:38.127

我假设这`update="form"`是一个粗心的过度简化，并且您实际上打算使用`render="@form"`它并将其与 PrimeFaces 左右混淆。

回到具体问题，这是由执行非 ajax 回发引起的，该回发也触发了视图参数的处理。

要么仅在非回发时需要它（但要确保 bean 是视图范围的），

```
<f:viewParam ... required="#{not facesContext.postback}" /> 
```

或在回发时也将其传递

```
<h:commandButton ...>
    <f:param name="product" value="#{bean.product}" />
</h:commandButton> 
```

如果您已经在使用视图范围的 bean，则使用[OmniFaces 。`<o:viewParam>`](http://showcase.omnifaces.org/components/viewParam)它不会处理回发时的视图参数。

```
<... xmlns:o="http://omnifaces.org/ui">
...
<o:viewParam ... /> 
```

# python - 如何在 Flask 视图中获取 url 参数

> ID：14026704
> 
> 赞同：21
> 
> 时间：2012-12-25T00:19:19.407
> 
> 标签：python, html, flask

我正在尝试从烧瓶视图中获取 url 参数：

```
www.domain.com/?f=x**2 
```

如何`x**2`从`url`Flask 视图中获取？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-25T00:35:27.237

您可以使用检索查询字符串变量

```
request.args.get('myParam') 
```

或者

```
request.args['myParam'] 
```

`myParam`您尝试接收的查询字符串中的变量在哪里。

# java - 断言没有按照我在 java 中的想法工作

> ID：14026705
> 
> 赞同：0
> 
> 时间：2012-12-25T00:19:22.667
> 
> 标签：java

我是java新手..所以也许这就是为什么我没有得到正确的关键字？

所以..我从那个银行客户示例中写了一个快速课程..其中一种方法是提款。

```
public void withdraw(double d){
        double diff = balance - d;
        assert (diff>=0 ) :" Insufficient funds!";
        balance = diff;
    } 
```

所以我的意图是如果提款金额大于余额......然后抛出一个错误......（我认为应该更像是一个例外......但可以说我想通过断言来检查这个） ...

但它没有做任何事情..即使差异小于零..

代码编译得很好..而我期望它会抛出一个错误。

我究竟做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T00:20:59.710

默认情况下禁用断言。您可以通过在调用 JVM 时传递 -enableassertions 标志来启用所有断言。

[编辑]

[您可以在此处](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)找到带有断言的 Java 编程指南。请注意有关启用和禁用断言的位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-25T00:22:27.567

默认情况下不启用断言，您需要在运行 java 应用程序时显式启用它们，例如

```
java -ea SomeClass 
```

# php - 我的 php 图像处理代码安全吗？

> ID：14026706
> 
> 赞同：1
> 
> 时间：2012-12-25T00:19:41.313
> 
> 标签：php, image, security

我需要一些帮助来确定我的代码是否安全。这是我基于 url 重写调整图像大小的函数。

URL重写代码......在（。*）里面有一个字符串，告诉产品的名称......我使用这种方法进行搜索引擎优化，图像托管在不同的服务器上，因为我有多个网站，并且图像也将调整大小以具有更小的文件大小。

```
RewriteRule mypic/(.*)/demo.gif$ preview.php?p=$1 
```

PHP 代码。每个产品都有自己的带有预览图片的文件夹，该文件夹是为 SEO 目的而构建的，源自名称。就像是

> 'www.mywebsite.com/products/eye-glasses-diesel/preview.gif'

这将是传递给 PHP 的数据：`products/eye-glasses-diesel/`

.

```
<?php
$src = 'http://www.mywebsite.com/'.$_GET['p'];
if (!$img = imagecreatefromgif($src."/preview.gif")){
    $img = imagecreatefromgif('http://www.mywebsite.com/na.gif');
}
// some image processing code like resizing,etc
// ......
header("Content-Type: image/gif"); 
imagegif($img); 
// Remove image 
imagedestroy($img);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T20:46:05.810

我认为两个基本检查是有序的。

首先你应该标准化你的名字，（这是我的谦虚提议）并允许只说字符和下划线（没有数字和其他特殊字符）并在你的 p 参数中检查该模式。因此，您将免受“../..”攻击。

其次，您的问题有些不清楚，我认为可能存在循环？那是您的服务器会不断尝试获取图像，而不是获取图像，而是将其定向到您提供的代码，然后再一次？（它可以拒绝你的服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:53:33.337

我认为它是安全的，但是你可以提高性能。最好多占用一点磁盘空间，并保存每次切换时调整大小的图像。

您可以在第一次请求图像时保存，之后只显示保存的文件。这是一个例子： http: [//pastebin.com/2kzga4Zs](http://pastebin.com/2kzga4Zs)

# actionscript-3 - flex中的补间库

> ID：14026713
> 
> 赞同：1
> 
> 时间：2012-12-25T00:21:35.740
> 
> 标签：actionscript-3, apache-flex, flare3d

我正在**为 Flex 寻找一个补间库。** 但我需要的是：

1) 它使用 (x,y,z) 而不仅仅是 (x,y)

2）它只是进行计算并且与电影剪辑无关：目标是将其用于 3D 库（Flare3D）以使相机移动平滑。所以我会根据 (x,y,z) 手动更新相机位置

我尝试了tweelite，但没有满足这两个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:54:59.387

为什么 TweenLite 不适合？它可以为您喜欢的任何属性设置动画，而不仅仅是 x/y。

顺便说一句，避免使用 Flex 补间引擎 - 它很臭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T16:25:01.390

这个例子展示了如何使用 TweenLite 和 Flare3D 来生成一个基于顶点的动画。 [http://wiki.flare3d.com/index.php?title=Tweened_Vertex_Spheres](http://wiki.flare3d.com/index.php?title=Tweened_Vertex_Spheres)

此外，您可以在 Flare3D 论坛中找到更多信息。例如： [http ://www.flare3d.com/support/index.php?topic=1957.msg16605#msg16605](http://www.flare3d.com/support/index.php?topic=1957.msg16605#msg16605)

# c++ - 如何检查USB插槽中是否存在空的闪存卡读卡器？

> ID：14026720
> 
> 赞同：7
> 
> 时间：2012-12-25T00:22:31.577
> 
> 标签：c++, winapi

我`GetLogicalDrives()`过去常常在我的计算机上获取所有驱动器，但该功能不仅显示当前准备使用的卷，而且还显示没有卡的空闪存阅读器。接下来`GetDriveType()`显示此类卷的代码 2。这与闪存卡是否存在于插槽中无关。一些多阅读器产生许多这样的不存在的驱动器，问题是我如何确定这样的卷的正确状态。

`FindFirstFile()`即使在控制台应用程序中尝试调用此类不存在的驱动器也会产生视觉错误：`Exception Processing Message c0000013 Parameters 75b3bf7c 4 75b3bf7c 75b3bf7c`在此类错误之后，代码继续运行，但这个烦人的错误会在窗口中显示给用户，因为应用程序会导致严重崩溃。

因此，处理该问题的一种方法是使用 FindFirstFile，但我不知道有什么方法可以让该错误远离用户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T15:05:54.307

终于我找到了！这里成功的关键是`GetVolumeInformation()`。

当 USB 插槽中的读卡器为空时，它返回 0 并将最后一个错误设置为 21。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:25:51.327

这里有一些很好的选择：

*   [如何检测硬盘是否通过 USB 连接？](https://stackoverflow.com/questions/220123/how-do-i-detected-whether-a-hard-drive-is-connected-via-usb)

尤其：

`if( 2 == ::getDriveType( <driveletter> ))`

函数返回值：

DRIVE_UNKNOWN 0：无法确定驱动器类型。

DRIVE_NO_ROOT_DIR 1：根路径无效；例如，指定路径上没有安装卷。

DRIVE_REMOVABLE 2：驱动器有可移动媒体；例如，软盘驱动器、拇指驱动器或闪存卡读卡器。

DRIVE_FIXED 3：驱动器有固定介质；例如，硬盘驱动器或闪存驱动器。

DRIVE_REMOTE 4：驱动器是远程（网络）驱动器。

DRIVE_CDROM 5：驱动器是 CD-ROM 驱动器。

DRIVE_RAMDISK 6：驱动器是 RAM 磁盘。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364939(v=vs.85).aspx)

# python - 如何将文件搜索限制为仅特定扩展名

> ID：14026723
> 
> 赞同：-1
> 
> 时间：2012-12-25T00:23:10.230
> 
> 标签：python, python-2.7, file-extension

我有一个基本问题（下面的#1）和一个我不知道答案的问题（#2）。任何人都可以提供输入吗？

1.如何将搜索限制为仅特定的，`extensions`让我们说只有`.c`，，，`.h``.cpp`

2.如何使下面的in变量`"."`之前的点成为可选的`"\n"``usertring`

```
userstring="Copyright (c) 2012 Company, Inc.\nAll Rights Reserved.\nCompany Confidential and Proprietary." variable

import os
import sys
import fnmatch
userstring="Copyright (c) 2012 Company, Inc.\nAll Rights Reserved.\nCompany Confidential and Proprietary."
print len(sys.argv)
print sys.argv[1]
if len(sys.argv) < 2:
    sys.exit('Usage: python.py <build directory>')
for r,d,f in os.walk(sys.argv[1]):
    for files in f:
        userlines = userstring.split('\n') # Separate the string into lines
        if files.endswith("." + c) or files.endswith("." + cpp):
            with open(os.path.join(r, files), "r") as file:
                match = 0
                for line in file:
                    if userlines[match] in line.strip('\n\r .'): # Check if the line at index `m` is in the user lines
                        match += 1 # Next time check the following line
                    elif match > 0: # If there was no match, reset the counter
                        match = 0
                    if match >= len(userlines): # If 3 consecutive lines match, then you found a match
                        break
                if match != len(userlines): # You found a match
                    print files 
```

编译错误：-

```
 File "test.py", line 12, in <module>
    if files.endswith("." + c) or files.endswith("." + cpp):
NameError: name 'c' is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:30:14.140

对于问题 #1，您可能想要使用 os.path.splitext()

```
>>> os.path.splitext('/home/myfile.txt')
('/home/myfile', '.txt') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:37:20.597

解决第一个问题：

如果您想查找以某个扩展名结尾的文件，您始终可以在包含文件名的 str 上使用 endswith() 方法。例如这样的：

```
if filename.endswith("." + extension1) or filename.endswith("." + extension2) 
```

文件名将是类似“foo.c”的str，而extension1 将是另一个类似“c”的str，而extension2 将是“cpp”。

来源：[http ://docs.python.org/2/library/stdtypes.html#str.endswith](http://docs.python.org/2/library/stdtypes.html#str.endswith)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T01:07:39.927

然后`fnmatch`模块用于根据模式匹配测试文件名。

正则表达式可以帮助匹配您正在搜索的内容的变体。

```
import os
import sys
import re
import fnmatch

# Build a match pattern with optional periods and any amount of whitespace
# between the sentences.
userstring = re.compile(r"Copyright \(c\) 2012 Company, Inc\.?\sAll Rights Reserved\.?\sCompany Confidential and Proprietary\.?")

print len(sys.argv)
print sys.argv[1]
if len(sys.argv) < 2:
    sys.exit('Usage: python.py <build directory>')
for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        # Test the filename for particular pattern matches.
        for pat in ['*.cpp','*.c','*.h']:
            if fnmatch.fnmatch(fname,pat):
                fullname = os.path.join(path,fname)
                with open(fullname) as f:
                    # This expects the copyright to be in the first 1000 bytes
                    # of the data to speed up the search.
                    if userstring.search(f.read(1000)):
                        print fullname 
```

这是上面代码将匹配的文件：

```
blah
blah
Copyright (c) 2012 Company, Inc
All Rights Reserved.
Company Confidential and Proprietary.
blah
blah
blah 
```

# php - mysqli 获取记录

> ID：14026727
> 
> 赞同：2
> 
> 时间：2012-12-25T00:23:33.757
> 
> 标签：php, mysql, mysqli, mysqlimport, picturegallery

这是关于一个帖子[显示来自每个用户的三张图片，](https://stackoverflow.com/questions/13980078/show-three-images-from-each-user)其中有一个很好的解决方案来解决我遇到的相同问题。

```
if ($stmt = $mysqli->prepare("SELECT p1.userID, p1.picture as pic1, p2.picture as pic2, p3.picture as pic3
FROM
  pictures p1 left join pictures p2
  on p1.userID=p2.userID and p1.picture<>p2.picture
  left join pictures p3
  on p1.userID=p3.userID and p1.picture<>p3.picture and p2.picture<>p3.picture
GROUP BY p1.userID
LIMIT ?,1")) {

    $stmt->bind_param("i", $first); 
    $stmt->execute();
    $stmt->bind_result($user, $pic1, $pic2, $pic3);
    $stmt->fetch();
    $stmt->close();
}
$mysqli->close();
?>
<div style="position:absolute; top:50px; left:100px; width:800px; text-align: center;">
  <img src="<?PHP echo (isset($pic1) ? $image_path.$pic1 : $no_image); ?>" width="176px" height="197px">
  <img src="<?PHP echo (isset($pic2) ? $image_path.$pic2 : $no_image); ?>" width="176px" height="197px">
  <img src="<?PHP echo (isset($pic3) ? $image_path.$pic3 : $no_image); ?>" width="176px" height="197px">
</div> 
```

我想知道如何在此查询中也获取图片ID？例如，如果我使用图片进行投票，那么我也必须获得图片ID。

**在 Supericy 帮助后回答：（**如果有人在寻找相同的东西）

```
if ($stmt = $mysqli->prepare("SELECT p1.userID, p1.picture as pic1, p1.pictureID as pic1id, p2.picture as pic2, p2.pictureID as pic2id, p3.picture as pic3, p3.pictureID as pic3id
FROM
  pictures p1 left join pictures p2
  on p1.userID=p2.userID and p1.picture<>p2.picture
  left join pictures p3
  on p1.userID=p3.userID and p1.picture<>p3.picture and p2.picture<>p3.picture
GROUP BY p1.userID
LIMIT ?,1")) { 
```

然后绑定

```
$stmt->bind_result($user, $pic1, $pic1id, $pic2, $pic2id, $pic3, $pic3id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:30:53.933

试试这个，

```
SELECT p1.userID,coalesce(p1.pictureID,p2.pictureID,p3.pictureID) pictureID, 
       coalesce(p1.picture,p2.picture,p3.picture) as pic
FROM
  pictures p1 left join pictures p2
  on p1.userID=p2.userID and p1.picture<>p2.picture
  left join pictures p3
  on p1.userID=p3.userID and p1.picture<>p3.picture and p2.picture<>p3.picture
GROUP BY p1.userID,pictureID,pic
LIMIT ?,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:34:43.077

假设图片的 ID 列名为“pictureID”：

```
SELECT p1.userID, p1.picture as pic1, p1.pictureID as pic1id, p2.picture as pic2, p2.pictureID as pic2id, p3.picture as pic3, p3.pictureID as pic3id
FROM
  pictures p1 left join pictures p2
  on p1.userID=p2.userID and p1.picture<>p2.picture
  left join pictures p3
  on p1.userID=p3.userID and p1.picture<>p3.picture and p2.picture<>p3.picture
GROUP BY p1.userID
LIMIT ?,1 
```

然后在绑定结果时：

```
$stmt->bind_result($user, $pic1, $pic1id, $pic2, $pic2id, $pic3, $pic3id); 
```

# ios - 从 iOS CoreData 获取图像

> ID：14026734
> 
> 赞同：0
> 
> 时间：2012-12-25T00:25:07.770
> 
> 标签：ios, core-data, uiimage

我有一个用`NSData`property定义的 Core Data 实体`imageData`。`image`我在实体上有一个 setter 和 getter 设置。

setter, `setImage`, 只是调用`[self setImageData:UIImagePNGRepresentation(img)];` getter, `image`, 只是返回`[UIImage imageWithData:[self imageData]];`

当我创建一个新实体并且我的获取结果控制器加载新表行时，**图像总是拉 null**。但是，**如果我点击该行以转到下一个视图控制器，则图像显示得很好**。

我该怎么做才能让它在保存发生后立即显示图像，并且 fetchResultsController 使用新行更新。

编辑：添加代码

图像片段的核心数据头和 getter/setter

```
.h
@property (nonatomic, retain) NSData * imageData;

@property (nonatomic, retain) UIImage *image;

.m
- (void)setImage:(UIImage *)image
{
    NSData *data = UIImagePNGRepresentation(image);
    [self setImageData:data];
}

- (UIImage *)image
{
    return [UIImage imageWithData:[self imageData]];
} 
```

表视图代码

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    [NSFetchedResultsController deleteCacheWithName:@"Artists"];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"ArtistModel" inManagedObjectContext:[[BKDataManager sharedInstance] mainObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];

    [fetchRequest setFetchBatchSize:20];

    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[[BKDataManager sharedInstance] mainObjectContext] sectionNameKeyPath:nil cacheName:@"Artists"];

    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ArtistTableViewCell *cell = (ArtistTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"ArtistsTableViewCell"];

    if(!cell) {
        cell = (ArtistTableViewCell *)[[[UINib nibWithNibName:@"ArtistTableViewCell" bundle:nil] instantiateWithOwner:nil options:nil] objectAtIndex:0];
    }

    ArtistModel *row = [[self fetchedResultsController] objectAtIndexPath:indexPath];

    [[cell artistNameLabel] setText:[row name]];
    [[cell artistImageView] setImage:[row image]]; // This is where it pulls from the artist model

    return cell;
} 
```

保存到核心数据位

```
- (void)addArtistWithName:(NSString *)name confirmed:(BOOL)confirmed managedContext:(NSManagedObjectContext *)managedContext success:(BKClientIdResult)success failure:(BKClientError)failure
{
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            name, @"name",
                            [NSNumber numberWithBool:confirmed], @"confirmed"
                            , nil];

    [[BKClient sharedInstance] postPath:@"/users/artists" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
        if([[responseObject objectForKey:@"status"] boolValue]) {
            NSDictionary *result = [responseObject valueForKeyPath:@"payload.artist"];

            ArtistModel *artistModel = (ArtistModel *)[NSEntityDescription insertNewObjectForEntityForName:@"ArtistModel" inManagedObjectContext:managedContext];

            [artistModel setName:[result objectForKey:@"name"]];

                NSURLRequest *imageRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:[result objectForKey:@"image"]]];

                AFImageRequestOperation *op = [AFImageRequestOperation imageRequestOperationWithRequest:imageRequest imageProcessingBlock:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                    [artistModel setImage:image];

                    [managedContext save:nil];

                    if(success) {
                        success(artistModel);
                    }
                } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
                    // TODO FIX
                }];

                [op start];
        } else {
            if(failure) {
                failure([NSError errorWithDomain:@"com.nf" code:0 userInfo:[responseObject objectForKey:@"error"]]);
            }
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        if(failure) {
            failure(error);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:22:07.230

根据您的问题，刷新数据的最简单方法是执行新的提取（通过`NSFetchedResultsController`）并在完成保存后重新加载表视图。

```
NSError *error = nil;
if (![[self fetchedResultsController] performFetch:&error]) {
    // error handling here...
}

[yourTableView reloadData]; 
```

或者，您可以考虑为您的`NSFetchedResultsController`. 有关更多信息，请查看[NSFetchedResultsControllerDelegate 文档](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)和[core-data-tutorial-how-to-use-nsfetchedresultscontroller](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)。

设置此委托，它允许您侦听托管上下文的更改并正确响应表视图修改（添加、删除、更新部分和行）。

PS如果您提供一些代码，我们将能够以更详细的方式为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:22:17.730

您可以使用`NSValueTransformer`轻松地将图像存储到 CoreData 中（使用`Transformable`type 而不是`NSData`）：

。H

```
@interface ImageToDataTransformer : NSValueTransformer

@end 
```

.m

```
#import "DataTransformer.h"

@implementation ImageToDataTransformer

#pragma mark - UIImage to NSData

+ (BOOL)allowsReverseTransformation {
  return YES;
}

+ (Class)transformedValueClass {
  return [NSData class];
}

- (id)transformedValue:(id)value {
  NSData * data = UIImagePNGRepresentation(value);
  return data;
}

- (id)reverseTransformedValue:(id)value {
  UIImage * image = [[UIImage alloc] initWithData:value];
  return [image autorelease];
}

@end 
```

并且不要忘记将您的属性设置为`Transformable`类型，然后在“数据模型检查器”中，将名称设置为`ImageToDataTransformer`.

# image - MVC 4 Entity Framework 5 - 存储和接收图像

> ID：14026735
> 
> 赞同：2
> 
> 时间：2012-12-25T00:25:13.013
> 
> 标签：image, asp.net-mvc-4, entity-framework-5

使用 EF5 和 MVC（建议）处理图像的“最佳”方式是什么？（我使用代码优先的方法）

*   我应该如何在本地数据库中存储它们（类型）？

**在我的示例中，我想要一个用户存储（他/她自己的）图像，并且还可以选择从集合中挑选图像。最后我希望我的页面显示图像*。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T01:05:34.270

如果要将图像存储在 SQL DB 中，请将它们存储为 BLOB - 这里有一篇很好的文章：[在 SQL Server 中存储图像和 BLOB 文件](http://www.databasejournal.com/features/mssql/article.php/3719221/Storing-Images-and-BLOB-files-in-SQL-Server.htm)。

如果这是一个包含大量图像的大型项目，那么您最好将图像存储在 CDN（如 Azure Blob 存储）上，并将 url 和相关图像信息（用户、标题、大小等）存储在数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T00:32:42.447

我认为这是一个更重要的决定。您想在数据库中存储路径（文件名）或其字节吗？

两者都有优点和缺点，但我个人发现存储路径更方便，这需要向您的业务对象添加一个简单的字符串属性。

**显示图像集**

您可以使用 CKEditor 的文件管理器来显示图像集合并让用户选择一个。他们的javascript函数的返回值返回图片路径：

[http://labs.corefive.com/projects/filemanager/](http://labs.corefive.com/projects/filemanager/)

# php - php中的可重载运算符

> ID：14026740
> 
> 赞同：0
> 
> 时间：2012-12-25T00:26:24.960
> 
> 标签：php

> **可能重复：**
> [PHP 中的运算符重载](https://stackoverflow.com/questions/787692/operator-overloading-in-php)

我发现几乎相同的问题回答“否”，但它是在 7 个月前被问到的，新版本的 php 可能已经支持重载。

有没有办法重载php中的比较运算符，比如c/c++？我一直在开发一个（排序的）对象列表，以便在没有迭代的情况下快速操作，我需要虚拟地比较对象，而不知道对象的任何属性。应使用 <、<=、==、>=、> 等进行比较。是否可以虚拟定义运算符或取决于任何虚拟映射函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:28:05.520

不，这在较新的版本中没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:29:42.453

那会很好，不是吗？

但不是。

而且我也不认为它正在开发中（尽管这可能是错误的......）。目前，最好使用带有布尔返回值的方法/函数：`myarray_lessthan($array1, $array2)`、`myarray_equals($array1, $array2)`等。

# git - 如何删除分支并回滚到工作主分支

> ID：14026745
> 
> 赞同：2
> 
> 时间：2012-12-25T00:27:33.073
> 
> 标签：git

我对 master 分支的最后一次提交是我想要恢复所有内容的地方。我创建了一个分支并提交，甚至将其合并到主分支。但是，在我合并该分支后一切都出错了。

我想完全删除该分支并将所有内容恢复到最后一次主提交。我怎么做？

PS：我确实尝试`git branch -D [branch-name]`过（如果我不合并到主分支，效果很好），但是错误的文件和目录仍然在主分支中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:36:46.837

签出主分支 ( `git checkout master`)。然后查看日志 ( `git log`) 并复制您想要返回的提交的 SHA。

然后使用以下命令重置回该提交：

```
git reset --hard whatever_your_sha_is 
```

SHA 的一个示例是 f75b7ca5beb502e7f99434ea47e631bdd18fef13。如果您希望将所做的更改保留为分阶段更改，还可以使用 --soft 开关，并使用 --mixed 开关将它们保留为非分阶段更改。

然后，如果您仍然愿意，您可以删除您的分支。

PS git reset 命令非常有用，我在[这里](http://danlimerick.wordpress.com/2012/03/05/a-few-tips-on-git-reset/)写了一篇关于它的博客文章或查看任何著名的 git 网站以获取有关如何使用它的更多提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:32:32.143

你应该申请：

```
git branch -D [branch-name]
git checkout master 
```

您已经创建了一个新分支并在签出后提交了它。所以你的主人没有你所做的改变和承诺。您可以简单地删除您创建的分支并签出您的主分支
如果您已经对主分支进行了一些提交并且您想要回滚。你可以做。

```
git reflog 
```

你选择你想去的提交。例如：HEAD@{25}，然后你申请

```
git checkout master
git reset --hard HEAD@{25} 
```

# android - 使用了不同的 Landroid/support/v4/app/FragmentActivity；预验证期间：Android + Fragments + JUnit + Maven

> ID：14026748
> 
> 赞同：3
> 
> 时间：2012-12-25T00:28:22.900
> 
> 标签：android, eclipse, maven, junit, android-support-library

我有两个在 Eclipse 下用 Maven 构建的 Android 项目。一个是项目本身，另一个是测试项目。

当我以 a 运行项目时，`Android JUnit Test`它会引发错误：

```
java.lang.RuntimeException: Exception during suite construction
Caused by: java.lang.reflect.InvocationTargetException
Caused by: java.lang.NoClassDefFoundError: com.some.TestClass 
```

查看`Logcat`我发现此错误的根本原因是：

```
Lcom.some.TestClass; had used a different Landroid/support/v4/app/FragmentActivity; during pre-verification 
```

在网上挖掘我发现它解决方案的一个[类似问题](https://stackoverflow.com/a/5645277/1007772)`android-support-v4.jar`是从测试项目中删除重复项。但这不适用于 Maven 的项目，因为依赖继承。

我发现让它工作的唯一方法是，在启动之前，我必须手动从测试项目的构建路径中删除`Maven Dependencies`库，并显式地将一个添加`Project Reference`到目标 Android 项目。

*¿ 有没有人知道在没有这个hack*的情况下让它工作的方法？

这是我项目中的一个相关片段`pom.xml`：

```
<groupId>com.some</groupId>
<artifactId>project</artifactId>
<packaging>apk</packaging>
...
<dependencies>
    ...
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
    </dependency>
    ...
</dependencies> 
```

和测试项目`pom.xml`：

```
<groupId>com.some</groupId>
<artifactId>project-test</artifactId>
<packaging>apk</packaging>
...
<dependencies>
    ...
    <dependency>
        <groupId>com.some</groupId>
        <artifactId>project</artifactId>
        <packaging>apk</packaging>
    </dependency>

    <dependency>
        <groupId>com.some</groupId>
        <artifactId>project</artifactId>
        <packaging>jar</packaging>
    </dependency>
    ...
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T18:18:59.587

最近解决了似乎是同样的问题。这不是特定于`android-support-library`. 请检查[这个答案](https://stackoverflow.com/a/20103673/1027527)。

# python - Django 模型：始终按用户过滤

> ID：14026750
> 
> 赞同：13
> 
> 时间：2012-12-25T00:29:01.497
> 
> 标签：python, django, django-models

我如何实现以下....

每次在模板中显示点对象时，都必须始终由当前用户过滤。所以，在模型中，我尝试了下面的代码。

这可能吗？我怎样才能实现上述目标？

模型.py

```
from django.db import models
from django.contrib.auth.models import User

POINTS_PENDING, POINTS_ADDED, POINTS_DEDUCTED, ORDER_PROCESSING = range(4)
STATUS_OPTIONS = (
    (POINTS_PENDING, ('Pending')),
    (POINTS_ADDED, ('Added')),
    (POINTS_DEDUCTED, ('Deducted')),
    (ORDER_PROCESSING, ('Processing')),
    )

class PointsManager(models.Manager):

    def points_list(self,User):
        list = Points.objects.filter(points_user=User).exclude(status=ORDER_PROCESSING)
        return list

class Points (models.Model):
    user = models.ForeignKey(User)
    points = models.IntegerField(verbose_name=("Points"), default=0)
    created = models.DateTimeField(("Created at"), auto_now_add=True)
    updated = models.DateTimeField(verbose_name=("Updated at"), auto_now=True)

    objects = PointsManager() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T00:33:38.223

您可以通过使用确保您的视图有用户

[`@login_required`](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)装饰师

那么您可以在您的视图中按用户查询积分

`user_points = Points.objects.filter(user=request.user)`

或使用反向[FK 查找](https://docs.djangoproject.com/en/1.8/topics/db/examples/many_to_one/)

`request.user.points_set.all()`

# php - 与实体同步获取 Imagine Bundle 服务

> ID：14026751
> 
> 赞同：1
> 
> 时间：2012-12-25T00:29:09.157
> 
> 标签：php, symfony, doctrine

每次从数据库加载图像实体时，我都需要[Avalanche Imagine Bundle为我提供图像实体的缩略图位置。](https://github.com/avalanche123/AvalancheImagineBundle)

正如它在他们的 github 页面上所说，在控制器中执行此操作非常简单：

```
$avalancheService = $this->get('imagine.cache.path.resolver');
$cachedImage = $avalancheService->getBrowserPath($object->getWebPath(), 'my_thumb'); 
```

问题是，我不想在我的控制器中使用它。每次从数据库加载它时，我都需要我的实体调用它，但我无法从我的实体内部访问 Symfony 服务。正如我发现的那样，我真的不应该能够将服务容器作为“实体应该只知道自己和其他实体”，但是我该如何实现我想要的呢？

具体来说，如何调用服务方法并将其值存储在每个实体加载的实体属性中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:52:23.737

您可以有一个实体管理器来管理特定实体类型的创建、加载、更新等。

例如，对于 FOSUserBundle，您可能希望使用[UserManager](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/user_manager.md)来创建用户实体，而不是使用旧方法。

```
// Good
$user = $container->get('fos_user.user_manager')->createUser();

// Not so good
$user = new User(); 
```

这样，您可以将管理委派给另一个类（在本例中为[UserManager](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)）并添加额外的控件。

所以假设你有一个实体`Foo`。您必须创建一个在创建和加载时`FooManager`自动绑定`Imagine`的服务。`Foo`

实体 ：

```
<?php

namespace Acme\DemoBundle\Entity;

class Foo
{
    protected $id;

    protected $imagine;

    public function getId()
    {
        return $this->id;
    }

    public function setImagine($imagine)
    {
        $this->imagine = $imagine;

        return $this;
    }

    public function getImagine()
    {
        return $this->imagine;
    }

    public function getBrowserPath()
    {
        return $this->imagine->getBrowserPath($this->getWebPath(), 'my_thumb')
    }

    public function getWebPath()
    {
        return 'the_path';
    }
} 
```

经理 ：

```
<?php

namespace Acme\DemoBundle\Manager;

class FooManager
{
    // Service 'imagine.cache.path.resolver' injected by DIC
    protected $imagine;

    // Entity repository injected by DIC
    protected $repository;

    public function __construct($imagine, $repository)
    {
        $this->imagine = $imagine;
        $this->repository = $repository;
    }

    public function find($id)
    {
        // Load entity from database
        $foo = $this->repository->find($id);

        // Set the Imagine service so we can use it inside entities
        $foo->setImagine($this->imagine);

        return $foo;
    }
} 
```

然后你会使用类似的东西`$foo = $container->get('foo_manager')->find($id);`。

当然，您将不得不稍微调整一下这个类。

不确定这是否是最好的方法，但这是我发现的唯一解决方法，因为我们无法将服务注入实体。

# google-places-api - 如何使用 Google Places API 获取城市或国家/地区的所有地点（或特定类型的地点，例如餐厅）？

> ID：14026759
> 
> 赞同：37
> 
> 时间：2012-12-25T00:30:45.587
> 
> 标签：google-places-api

例如，我正在尝试查找城市或国家/地区的所有“餐馆”或“保险公司”。好吧，也许一个国家太宽泛，但主要是大城市。

我正在使用 Google Places API 和 python，但我看到您只能使用“radius”参数或“rankby=distance”。问题是，根据文档，我相信每个查询只能在 3 页上返回 20 个结果，或者 60 个结果（如果我错了，请纠正我）。因此，例如，如果我想查找纽约的所有餐馆，我必须从中心或其他地方开始并设置“rankby=distance”，以便它可以在设定的半径内为我提供 60 个最接近的结果。但是我不知道我的下一个查询是什么......

任何想法如何去做这件事？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-30T21:51:26.183

不幸的是，您不能从 Google Places API 获得超过 60 个结果；至少在不违反服务条款的情况下：

> 除非您已获得 Google（或，如适用，特定内容的提供者）的事先书面授权，否则您不得：(d) 以允许您或任何其他人访问大量下载或批量提要的方式使用产品任何内容，包括但不限于数字纬度或经度坐标、图像和可见地图数据

此外，您可以[在此处](http://code.google.com/p/gmaps-api-issues/issues/detail?id=3425)阅读：

> 这在很大程度上是一个许可问题。但这也是因为 Places API 的目标不是以您描述的方式促进 Google Places 数据的抓取或聚合。任何这样做的应用程序几乎肯定不符合 Google Maps 或 Google Maps API 服务条款，并且可能随时被阻止使用 API 或其他 Google 服务。Places API 旨在允许应用程序为其用户提供一种发现附近地点的方法。用户将浏览并考虑的搜索结果的数量存在实际限制。我认为没有必要为用户提供 200 个结果，而且我怀疑这样做只会增加抓取 Google Places 数据的应用程序的开发，

作为进一步的参考，也看看[这个答案](https://stackoverflow.com/questions/6965847/obtaining-more-than-20-results-with-google-places-api)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-25T19:59:14.107

使用雷达搜索。[在此处](https://developers.google.com/places/documentation/search#RadarSearchRequests)查看文档。

您可以一次性获得 200 个结果，但您的配额需要 5 个请求。与附近搜索相比，结果的详细信息较少，但您始终可以通过使用地点详细信息搜索来获得。

希望这可以帮助。

> 注意：雷达搜索自 2018 年 6 月 30 日起已弃用。此后，此功能将不再可用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-18T17:02:43.147

我前一阵子制作了这样一个工具[https://github.com/Pithikos/Geoexplorer](https://github.com/Pithikos/Geoexplorer)。你可以[在这里](https://www.youtube.com/watch?v=lIZnQhAf9e4)看到它的样子。

我什至有一个使用 Google Places 的工作示例，如果您有 API 密钥，您可以使用它。

1.  `git clone https://github.com/Pithikos/Geoexplorer.git`
2.  在文件 examples/google_radar_search.py​​ 中添加您的 API 密钥
3.  `python3 examples/google_radar_search.py`
4.  在浏览器中打开 GUI/index.html

这将在瑞典的一个大区域寻找名为“ICA”的杂货。*您可以在config.py*中配置正在扫描的区域，在*google_radar_search.py*​​ 中配置您的搜索查询。

这应该在 13.10 之后的任何 Ubuntu 上运行良好。如果您使用 Windows 或更早版本，请阅读[此处](https://github.com/Pithikos/Geoexplorer/blob/master/README.md)（*安装依赖项*部分）。

您还可以使用 API 添加您喜欢的任何其他服务。请记住，使用它时不要违反 Google 或任何其他公司的政策。我这样做只是为了在决定使用哪个服务之前测试哪个服务会给我最好的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-02T21:05:27.650

不幸的是，谷歌不希望人们能够做到这一点，所以他们设计他们的 API 来阻止人们做这样的事情。然而，还有其他选择。如果你想通过 API 访问做到这一点，[Factual](http://factual.com)是领导者；他们在 50 个国家/地区拥有 1.02 亿个条目。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-11T14:47:02.177

我在谷歌地图搜索之上创建了爬虫，你可以在这个用例中使用它。[你可以在这里](https://github.com/drobnikj/crawler-google-places)查看爬虫。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T16:14:49.767

根据我的理解..我们建议在我的场景中使用交叉 api 引用，将使用嵌套的异步 WCF 调用区域除以谷歌制定的有限调用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-16T19:24:33.420

您可以使用 SerpApi 等第三方解决方案。这是一个免费试用的付费 API。我们为您处理代理、解决验证码并解析所有丰富的结构化数据。

我们提供了用于抓取完整的[Google Places](https://serpapi.com/local-results)结果和[Google Maps](https://serpapi.com/google-maps-api)结果的 API。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-09T04:53:31.407

在 URL 中使用页面令牌，您可以获得所有结果。

要求：

*   需要放置 API 密钥。
*   安装请求库。

你可以试试下面的代码：

```
import requests
import json

final_data = []

location='24.4165267,75.833981'
radius='2000'
types='restaurant'
url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=%s&radius=%s&types=%s&key=api key" % (location,radius,types)

while True:

    response = requests.request("POST", URL)
    response = json.loads(response.text)
    results = response['results']

    for result in results:
       final_data.append(data)

    if 'next_page_token' not in response:
        break
    else:
        next_page_token = response['next_page_token']

    next_page_token = '&pagetoken=%s' % str(next_page_token)
    url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=%s&radius=%s&types=%s&key=api key%s" % (location,radius,types,next_page_token)

print(final_data) 
```

# c++ - C++ 对象保留？

> ID：14026761
> 
> 赞同：3
> 
> 时间：2012-12-25T00:31:15.333
> 
> 标签：c++, object, retain

我是一名 Objective-C 程序员，最近开始使用 C++，我在我的代码组织中偶然发现了这个问题：

```
std::list<char *> stuff = std::list<char *>();
thing *object = new thing(stuff); 
```

`stuff`我在班级的整个生命周期中需要的对象在哪里（也就是说，直到它被破坏），如何避免丢失它？

在 Objective-C 上，我可以简单地调用`-retain`构造函数。在 C++ 上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T00:46:36.617

不要在不需要指针时使用它们，[也不要使用拥有原始指针](http://tinyurl.com/fuck-pointers)（除非您有充分*的*理由使用它们）。

使用*自动存储期限*：

```
std::list<char> stuff;
thing object{stuff}; 
```

的构造函数`thing`将`std::list<char>`作为其参数：

```
#include <utility> // for std::move

class thing {
public:
    explicit thing(std::list<char> stuff_) : stuff(std::move(stuff_)) {}

private:
    std::list<char> stuff;
}; 
```

如果你这样做，`thing`当`thing`超出范围时将调用 的析构函数，隐式调用 的析构函数`stuff`。许多[优秀的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)都非常详细地解释了这一点。

与 Objective-C 不同，C++ 使用 RAII 而不是引用计数。`new`基本规则是：尽可能使用自动存储持续时间，避免原始拥有指针，除非你有充分的理由，否则不要使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:47:26.377

通常的方法是复制或移动`stuff`到`thing`的构造函数中`thing`：

```
class thing {
public:
    thing(std::list<char*> stuff) : stuff(std::move(stuff)) {}
private:
    std::list<char *> stuff;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:10:56.687

目前尚不清楚您将如何`stuff`在示例中使用，因此我将为您提供一些不同的选项。

1.  `thing`存储自己的`stuff`.
    在这种情况下，您的类存储一个类型为 的对象`std::list<char*>`。

    ```
    class thing
    {
    public:
      thing(std::list<char*>& aList):m_list(alist){}
      std::list<char*> m_list;
    }; 
    ```

    当您构造`thing`副本时，`stuff`会制作并存储在类中。当对象被破坏时，它会自动释放`m_list`。

2.  `thing`存储对 的弱引用`stuff`。
    您的类将存储一个指针 ( `std::list<char*>* m_list`) 或引用 ( `std::list<char*>& m_list`)。`thing`将能够以任何方式使用您的列表，但它不应该负责资源管理。如果列表的范围小于`thing`那么您将留下一个悬而未决的参考。

    ```
    thing getThing()
    {
    std::list<char*> list1;
    thing object1(list1);
    return object1; //bad - list will be deallocated, object1 will have a hanging reference
    } 
    ```

3.  `thing`存储指向 的共享指针`stuff`。这是与`retain`Objective C 中最相似的方法。C++ 没有自动引用计数。如果要存储具有共享所有权的对象引用，可以使用`std::shared_ptr`. `thing`商店`std::shared_ptr<std::list<char*>> m_list`。

    ```
    std::shared_ptr<std::list<char*>> stuff = std::make_shared<std::list<char*>>();
    thing object(stuff); //reference count incremented, even if stuff is destroyed object will still hold a valid reference 
    ```

# java - 从 C++/C# 到 Java——使用“每个类一个公共类型”规则正确构建代码

> ID：14026767
> 
> 赞同：1
> 
> 时间：2012-12-25T00:32:57.367
> 
> 标签：java, coding-style, project-structure

我刚开始用 Java 开发，因为我从大学时代就没有接触过它。到目前为止，我已经能够记住很多事情并阅读了一大堆，这对我来说仍然不清楚......

我遇到的问题是，很多书籍/示例/教程/SE 帖子都专注于不会出现此类问题的更简单、更小的问题。

如果您有一个具有 1000 种类型（类、接口或两者）的项目......是为每种类型简单地创建一个新文件的最佳项目结构/布局约定吗？来自 C++/C# 背景，这对我来说不太合适（还没有？），因为我习惯于通常有一个或可能很少的文件来定义整个项目其余部分使用的接口。小的相关类通常会在一个文件中实现。

作为一个更具体的例子，我目前正在重构一个“事件”类，该类目前正在处理 15 种不同的事件类型，都在一个类中。定义该类的包还具有其他事件处理类，例如读取器、写入器和解析器。

如果我创建基本事件类和 15 个派生类，因为每个类的属性/行为略有不同……这些是我的选择：

1.  15 个新文件全部添加到现有包中 - 似乎我会“污染”该包，因为文件数量将从 6 个变为 21 个，并且正交性会中断。
2.  将所有事件类移动到它们自己的包中并将它们放在一起
3.  创建一个名为“Events.java”的文件，并将所有 15 个类作为该主类的嵌套静态类（本质上“类事件”将成为一个命名空间） - 谷歌似乎使用他们的协议缓冲区来做到这一点。

由于没有足够的 Java 经验，我无法确定哪种方法是公认的标准。可以在一个目录中有 1000 个文件吗？我应该创建更多包吗？（查看其他库/框架，似乎它们将包的数量保持在最低限度）

在其他情况下，特别是在实现策略模式时，我会创建一个带有静态工厂方法的公共基类和一些非公共类，这样我就可以将它们保存在一个文件中。似乎我只是根据每个班级规则的一个公共类型以及我这样做的所有时间做出这些“设计”选择，这个问题又回来了......也许我只是做得不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:40:20.167

我会将所有 15 个事件子类放在他们自己的包中，在他们自己的文件中。十五节课也不算多。我听说过企业应用程序有数千个（甚至可能是数万个）类/文件。

我唯一一次在一个文件中看到多个公共类型是当它们是常量或枚举时，例如 java.sql.Types。您也可以将它们定义为枚举，然后打开它们，但是您会失去多态性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:46:51.390

不得不克服“文件太多”的想法在从其他语言转向 java 的程序员中很常见。

在某些特殊情况下，您可能希望拥有一个公开的静态内部类（例如，参见 Map.Entry），但通常，您希望每个公共类都使用一个类（一个源文件）。

当类可以在逻辑上进行子分组时，创建子包当然是有意义的。不要害怕创建“太多”的包。

# c - 纯 C 中 RSA 实现的库

> ID：14026768
> 
> 赞同：9
> 
> 时间：2012-12-25T00:33:12.670
> 
> 标签：c, rsa, signal-processing

我正在寻找 C 中 RSA 的一个非常简单的实现。我需要将它放在 DSP 中，所以我想使用一些非常简单和简单的东西。尽管如此，我只找到了小数字（int 或 long）的示例，而我需要至少在 1024 位上实现 RSA，所以我还必须处理大数字。

你能指点我一些图书馆或例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T05:29:51.587

LibTomCrypt和相关项目非常干净易懂[。](http://www.libtom.net/?page=features&newsitems=5&whatfile=crypt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:41:10.067

最新的[openssl 版本的源代码](http://openssl.org/source/openssl-1.0.1c.tar.gz)包含 RSA 的实现，它应该可以很好地满足您的目的。或者，您也可以考虑[GNUPg](http://gnupg.org)项目，这是另一个具有 RSA 组件的开源项目。

# node.js - 卡在 sockets.io hello world 上。不确定如何运行应用程序？

> ID：14026772
> 
> 赞同：0
> 
> 时间：2012-12-25T00:34:18.570
> 
> 标签：node.js, http, express, websocket, socket.io

这么愚蠢的问题，对不起。所以我下载了node.js/sockets.io/express.js。尝试制作一个简单的多人游戏，但目前从 hello world 开始。

我有以下目录结构：

```
-index.html
-server.js
-package.json
-node_modules/ 
```

server.js 有以下代码：

```
var app = require('express');
var http = require('http');
var io = require('socket.io');
/*
var server = http.createServer(function(req,res){
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end('<h1>Hello world</h1>');
}).listen(80);
*/

var server = http.createServer(app);
server.listen(80);

var socket = io.listen(server);

var usersCount = 0;

socket.on('conection', function(client){
    ++usersCount;
    console.log('client connecting... client# = ' + userCount);
    client.emit('onMessageReceived',{msg:"You are client number: " + userCount});
}); 
```

我的客户端代码在 index.html 中，它的内容是：

```
<html>
 <head>
    <title> Client Code </title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">    </script>
 </head>

 <body>
  <script>
    $(document).ready(function(){
        var socket = new io.Socket({'127.0.0.1',{port:80}});
        socket.connect();
        socket.on('connect', function(obj){
            console.log('client connection successful..');
        });
        socket.on('onMessageReceived', function(data){
        console.log("client has received message: " + data.msg);
        });
    });
  </script>
 </body> 
```

我的 package.json 包含：

```
{
  "name": "hello_world",
  "version": "0.0.0",
  "description": "hello world test program",
  "main": "server.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": "",
  "author": "",
  "license": "BSD",
  "dependencies":{
    "express":"3.0.5",
    "http": "",
    "socket.io":""
  }
} 
```

现在我不确定如何继续运行该应用程序，如果我已经完成的话。关于下一步如何进行的任何帮助。我猜现在我需要让 server.js 不断运行，并让多个客户端打开 index.html 以连接到 server.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T17:28:57.427

首先，您不想在 hello world 程序中真正使用端口 80，这会使它变得更难，您必须是 root 用户，使用端口 8080 代替它比端口 80 更容易。然后运行程序打开您的命令行和 cd 进入 server.js 目录并运行，`node server.js` 然后在浏览器中打开 localhost:8080，在控制台上您应该会看到日志。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T18:12:29.337

在我看来，您没有正确声明您的服务器。你需要创建一个 express 服务器的实例，因为[express 3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)看起来像这样

```
var io = require('socket.io')
  , express = require('express');

var app = express()
  , server = require('http').createServer(app)
  , io = io.listen(server); 
```

然后你可以设置你的服务器监听一个端口

```
server.listen(8080); 
```

然后您可以[渲染](http://expressjs.com/api.html#res.render)页面

```
app.get('/', function(req, res){
     res.render('index');
}); 
```

# iphone - 在 iPhone 上以编程方式制作音乐？

> ID：14026777
> 
> 赞同：16
> 
> 时间：2012-12-25T00:34:45.730
> 
> 标签：iphone, ios, cocoa-touch, audio

当谈到 iPhone 或任何平台上的音频和音乐时，我完全天真。

假设我想制作一个简单的钢琴应用程序 -*是否可以通过编程方式为每个键生成声音？*

还是*我必须为每种可能的声音提供一个 .wav 文件？*

我想知道像 GarageBand 这样的程序是如何提供如此多样的声音的——难道他们有一个文件可以容纳每一种可能的声音吗？

或者*有没有办法动态生成这些声音？*

**编辑**：我发现[这篇最优秀的文章](http://www.hollance.com/2010/12/sound-synthesis-on-the-iphone/)准确地描述了我想做的事情，这个人甚至有一个带有小钢琴的示例项目，所有声音都是以编程方式生成的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T05:08:45.833

如本[教程](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html?m=1)中所述，您可以通过编程方式生成音调。此处的示例向您展示了如何使用音频单元生成纯正弦波。

由于傅立叶定理，任何（周期）连续函数都可以表示为不同幅度和相位的正弦函数之和。使用它，您可以混合其中的一些功能来模拟乐器的声音。然而，这需要大量的研究和对波力学和微积分的深刻理解，所以这不是一项简单的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T10:29:48.717

钢琴合成器通常通过样本播放实现 - 这也包括真实世界的数码钢琴。[与DDS 振荡器](http://www.electricdruid.net/index.php?page=info.dds)结合使用时，每个键的采样通常要少得多。

高质量的数码钢琴合成器还携带不同键速下的初始降键、延音、制音踏板打开和上键的样本，然后将这些样本混合在一起。

[VST3 SDK](http://www.steinberg.net/nc/en/company/developer/sdk_download_portal.html)中有一个源代码

# php - PHP 预期参数是资源

> ID：14026778
> 
> 赞同：-1
> 
> 时间：2012-12-25T00:35:22.337
> 
> 标签：php, mysql

只是想知道为什么我会收到此错误。

> `Warning: mysql_result() expects parameter 1 to be resource, boolean given in C:\wamp\www\Active\Formula One\script\blog.php on line 37`

使用了一些调试来得到这个进一步的错误

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''categories' WHERE 'name' = 'nocat'' at line 1`

**blog.php** - 只是代码片段，所以不要填满页面

```
function category_exists($name) {
    $name = mysql_real_escape_string($name);

    $query = mysql_query("SELECT COUNT(1) FROM 'categories' WHERE 'name' = '{$name}'");

    echo mysql_error();

    return ( mysql_result($query, 0) == '0' ) ? false : true; 
}

function add_category($name) {
    $name = mysql_real_escape_string($name);

    mysql_query("INSERT INTO 'blog_categories' SET 'name' = '{$name}'");

} 
```

任何帮助将不胜感激。和一个快乐的圣诞节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:37:06.023

对列名和表名使用反引号而不是引号

```
mysql_query("SELECT COUNT(1) FROM `categories` WHERE `name` = '{$name}'"); 
```

如果您使用引号，它将被解释为字符串而不是名称。

你混淆了`insert`语法`update`。采用

```
mysql_query("INSERT INTO `blog_categories` (`name`) values ('{$name}'"); 
```

# java - Java Thread.sleep() 实现

> ID：14026784
> 
> 赞同：6
> 
> 时间：2012-12-25T00:37:12.153
> 
> 标签：java, multithreading, concurrency, thread-sleep

有人可以帮我理解 Thread.sleep() 函数是如何实现的吗？当指定的时间过去或其他一些线程中断时，线程恢复/唤醒。我有兴趣了解其工作背后的设计模式。

据说睡眠对 CPU 消耗没有影响。当前线程是否已添加到侦听器列表中？何时检查中断标志？调度程序是否继续检查每个“x”时间休眠的每个线程的中断状态（基于操作系统支持的内容）？线程如何在不影响 CPU 的情况下获得控制权。

我已经搜索过了。抱歉，如果我错过了任何容易找到的链接。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T00:39:58.563

> 有人可以帮我理解 Thread.sleep() 函数是如何实现的吗？

它调用`sleep`操作系统提供的底层本地线程。

> 据说睡眠对 CPU 消耗没有影响。

未运行的线程不会消耗 CPU 时间。

> 当前线程是否已添加到侦听器列表中？

不。

> 何时检查中断标志？

线程无法检查中断标志，因为它没有运行。如果请求，操作系统可以唤醒线程。

> 调度程序是否继续检查每个“x”时间休眠的每个线程的中断状态（基于操作系统支持的内容）？

不。

> 线程如何在不影响 CPU 的情况下获得控制权。

该线程在时间到期时被操作系统自动唤醒，或者另一个线程可以请求操作系统提前唤醒它。

* * *

以下是[OpenJVM](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/e392695de029/src/share/vm/prims/jvm.cpp)中 Thread.sleep() 背后的一些代码：

```
 2811     ThreadState old_state = thread->osthread()->get_state();
 2812     thread->osthread()->set_state(SLEEPING);
 2813     if (os::sleep(thread, millis, true) == OS_INTRPT) {
 2814       // An asynchronous exception (e.g., ThreadDeathException) could have been thrown on
 2815       // us while we were sleeping. We do not overwrite those.
 2816       if (!HAS_PENDING_EXCEPTION) {
 2817         HS_DTRACE_PROBE1(hotspot, thread__sleep__end,1);
 2818         // TODO-FIXME: THROW_MSG returns which means we will not call set_state()
 2819         // to properly restore the thread state.  That's likely wrong.
 2820         THROW_MSG(vmSymbols::java_lang_InterruptedException(), "sleep interrupted");
 2821       }
 2822     }
 2823     thread->osthread()->set_state(old_state); 
```

# google-maps-api-3 - Google Maps V3 - 地图OK，方向不正确

> ID：14026787
> 
> 赞同：2
> 
> 时间：2012-12-25T00:38:15.060
> 
> 标签：google-maps-api-3

这是页面： [我的站点](http://mainaloski.gr/index.php?id=9) 如您所见，地图显示正常、居中并按我想要的方式缩放。问题是方向没有显示...

谷歌地图代码：

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
function initialize() {
directionsDisplay = new google.maps.DirectionsRenderer();
var myLatlng = new google.maps.LatLng(37.651429,22.267043);    
var myOptions = {
  zoom:9,
  center: new google.maps.LatLng(37.722392,22.769925),
  mapTypeId: google.maps.MapTypeId.ROADMAP,

}
map = new google.maps.Map(document.getElementById("map1"), myOptions);
directionsDisplay.setMap(map);
}
function calcRoute() {
var request = {
    origin:"athens, greece", 
    destination:myLatlng,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
});
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:54:46.327

你至少有两个问题：

1.  你有一个 calcRoute 函数来计算和显示路线，但你从不调用它（解决方案：调用它，可能在你的初始化函数结束时）。
2.  myLatLng 变量是初始化例程的本地变量，因此当 calcRoute 尝试访问它时不可用（解决方案：使其成为全局变量）。

    ```
     var directionDisplay;
     var directionsService = new google.maps.DirectionsService();
     var map;
     var myLatlng = new google.maps.LatLng(37.651429,22.267043);    

     function initialize() {
       directionsDisplay = new google.maps.DirectionsRenderer();
       var myOptions = {
         zoom:9,
         center: new google.maps.LatLng(37.722392,22.769925),
         mapTypeId: google.maps.MapTypeId.ROADMAP,
       }
       map = new google.maps.Map(document.getElementById("map1"), myOptions);
       directionsDisplay.setMap(map);
       calcRoute();
     }

     function calcRoute() {
       var request = {
         origin:"athens, greece", 
         destination:myLatlng,
         travelMode: google.maps.DirectionsTravelMode.DRIVING,
       };
       directionsService.route(request, function(response, status) {
         if (status == google.maps.DirectionsStatus.OK) {
           directionsDisplay.setDirections(response);
         }
       });
     } 
    ```

# horizontal-scrolling - 摆脱水平滚动条 CSS

> ID：14026788
> 
> 赞同：0
> 
> 时间：2012-12-25T00:38:25.283
> 
> 标签：horizontal-scrolling

这真让我抓狂。单杠不断出现

这是网站： http: [//www.injinji.com/shop/](http://www.injinji.com/shop/) 谢谢大家！！乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:50:03.927

问题出`dropdown.css`在第 76 行，其中定义`ul.dropdown ul`为具有`width`.`2500px`

我通过删除元素直到滚动条消失的过程中发现了这一点:)

# c++ - 可以分段的基于哈希的数据容器 - C++

> ID：14026794
> 
> 赞同：1
> 
> 时间：2012-12-25T00:39:30.230
> 
> 标签：c++, data-structures, hash, record

我想根据它们的散列索引一系列奇异值或结构/类（意味着一次散列多个值）。

我已经对哈希函数进行了编码，因此为任何值或结构或类提供摘要都没有问题，问题是：

*   C++ 中是否真正支持基于散列的数据结构？我的意思是，如果有一个更好的替代方法来替代`std::map`例如的琐碎使用，以及**为此设计的具有超过 2 个字段的容器** （我还没有决定我的数据结构中真正需要多少个字段）。
*   由于我计划轻松达到 10^5 条记录，因此管理**零散的数据结构**对我来说很重要的是避免直接处理内存中的巨大数据结构并分配结构的无用部分。
*   如果我想**将此结构保存在磁盘上**，序列化是唯一的选择吗？

假设我的哈希函数是`hash::digest()`我将欣赏对实际代码的最小参考，并提供有关使用适当数据结构的示例。

谢谢。

编辑：

我想避免无序的数据结构，因为：

*   错误的分支预测
*   因为它们没有被排序，所以它们不能以有效的方式被分割
*   我的主要关注点是管理这种结构及其碎片化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:09:16.893

我将把这个写成答案，因为我不认为评论真的能让我们走到任何地方：

首先，我认为你要么找错了树，要么你需要坐下来为我们画一个小图表，这样我们就明白你在问什么。

一般来说，我和许多其他人都遵循“在工作时使用 std::vector 的原则（索引是合理的类型/范围），直到证明它不够好。如果索引不适用于向量，请使用 std ::map，除非证明这不是一个合适的解决方案”。但更重要的是，无论您使用什么存储，都应该对主代码隐藏。你应该有访问器函数来获取数据，如果你使用向量、映射、trie、B-tree、堆、堆栈、队列等都没有关系。只要你的程序需要的功能可以由您的界面，应该可以将数据存储在任何类型的容器类中。有了这个原则，您可以在需要时/根据需要更改实际的存储容器，而不必担心使用容器的代码是否会中断。

至于存储数据结构，任何不只是 POD 的东西都需要序列化，无论您使用什么形式的容器。所以如果你存储任何类，例如std::string，那么你必须序列化数据，因为内部结构不能仅仅存储在文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T01:58:49.480

在您的描述中，您声明您想要使用“散列”函数（有时称为“摘要”）的东西，这似乎表明您想要使用某种散列容器。散列容器本质上是无序的，但您也声明您不想使用像标准库这样的无序容器`std::unordered_map<...>`。您想要散列函数是什么？

您还声明您希望您的容器“碎片化”，但我很不清楚您对这种碎片化的含义。从它的声音来看，您似乎暗示您的容器实际上部分保存在磁盘上，并且由于其大小而仅引入内存。但是请注意，10^5 并不是一个*很大*的尺寸，实际上是一个相当小的尺寸！

如果您的意思是您的“散列”函数实际上提供了一个顺序，即它提供了[严格的键弱顺序](http://en.wikipedia.org/wiki/Strict_weak_ordering)，并且您的内容可以呈现为字节序列（例如，使用适当的序列化和反序列化），您可能会寻找[b 树](http://en.wikipedia.org/wiki/B-tree)：基于数据段的数据结构。虽然我确信这个数据结构有 C++ 实现，但标准 C++ 库中没有。我也没有可用的代码，创建 b-tree 也不是一件容易的事。

# matlab - 在 Matlab 中将一个矩阵复制到另一个矩阵中

> ID：14026797
> 
> 赞同：4
> 
> 时间：2012-12-25T00:40:04.197
> 
> 标签：matlab, loops, for-loop

如何在没有 for 循环的情况下将一个矩阵复制到另一个矩阵？有可能吗？

这是一个使用循环的短代码，我怎样才能在这里避免循环？

```
% middleImg , newImg are matrices 
[rows columns] = size(middleImg);
for i=1:rows
    for j=1:columns     
        newImg(i,j) = middleImg(i+1,j+1);
    end
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T04:30:48.370

做就是了：

```
 newImg = middleImg; 
```

如果您的意思是复制除第一行和列之外的所有内容，那么只需：

```
 newImg = middleImg(2:end,2:end); 
```

# javascript - 如何使用 jQuery 选择具有特定精确文本的元素

> ID：14026801
> 
> 赞同：0
> 
> 时间：2012-12-25T00:40:44.027
> 
> 标签：javascript, jquery

我知道 :contains() 可用于选择包含指定文本的所有元素。但是有没有办法找到**完全**匹配的？

我的意思是使用`jQuery(':contains(josh)')`也适用于带有 joshua 或 joshephin 的节点。有没有办法找出特定的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:48:47.370

这在 jQuery 中并不准确`Content Filter`，但您应该能够使用以下代码来模仿：

```
$(":contains(josh)").filter(function(){ return ($(this).text() == "josh") }) 
```

参考：来自[jQuery .filter() API 文档](http://api.jquery.com/filter/)

> **.filter( function(index) )**用于测试集合中每个元素的函数。这是当前的 DOM 元素。

# linux - 仅查看过去 24 小时的电子邮件日志

> ID：14026802
> 
> 赞同：0
> 
> 时间：2012-12-25T00:40:44.747
> 
> 标签：linux, email, ssh, exim

我正在编写一个 ssh 命令，以使用 awk 将某些电子邮件日志条目处理为可读的格式。此脚本仅在过去 24 小时内的 /var/log/exim_mainlog 条目上运行。我对时间搜索选项不是很熟悉。关于仅针对过去 24 小时内日期的条目 grep 电子邮件日志的最佳方式的任何建议？最好是 grep 选项或类似的东西。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:35:28.380

查看可能已经安装在您的系统上的**exiqgrep命令。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T01:02:23.550

也许[锯木厂](http://www.sawmill.net/)做你想要的？它解析[exim](http://www.exim.org)邮件日志并允许您按时间过滤。让我知道这是否有帮助。

# jquery - :animated 选择器等待动画菜单完成

> ID：14026806
> 
> 赞同：0
> 
> 时间：2012-12-25T00:41:08.610
> 
> 标签：jquery, animation

我有这段代码等待菜单完成动画：

```
 if( $('#pc_lhs_top_ul').children(':animated').length > 0 ||
        $('#pc_lhs_bottom_ul').children(':animated').length > 0 || 
        $('#pc_lhs_top_ul:animated').length > 0 ||
        $('#pc_lhs_bottom_ul:animated').length )
    {
        return;
    } 
```

当我使用 chrome 检查器检查它时，每次我尝试单击链接时都会运行这段代码，这是我的意图。但是，如果我非常快速地反复单击，在动画完成的确切时刻，由于某种原因，单击链接将不会返回。

在调试了更多之后，我发现，我有两个单独的动画，一个接一个地运行，单击锚标记被禁用，但是当第一个动画完成时，它没有被禁用，并与第二部动画。有某种没有动画的时间间隔。我应该在第一个动画之后添加延迟吗？

# ios - UIScrollView 使用自动布局缩放

> ID：14026807
> 
> 赞同：32
> 
> 时间：2012-12-25T00:41:10.820
> 
> 标签：ios, uiscrollview, zooming, autolayout

我正在尝试使用 Auto Layout 实现`UIScrollView`New [Way](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/)。我已经设置了从内部视图到滚动视图的约束，以便它可以自动计算自己的约束，`contentSize`这就像一个魅力——除了当我尝试放大或缩小时所有的地狱都崩溃了。我什至无法正确描述发生了什么，只能说内心的看法“搞砸了”。

[您可以在此处](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch20p573scrollViewAutoLayout2)查看此行为的示例（不是我的项目；您必须设置滚动视图`maximumZoomScale`并`-viewForZoomingInScrollView:`在缩放生效之前实现）。

有没有其他人遇到过这种行为？目前有什么方法可以放大`UIScrollView`以使用自动布局，而无需自己重新实现缩放行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T00:55:24.023

我见过的最好的答案是 Mark 的 ( [https://stackoverflow.com/users/1051919/mark-kryzhanouski](https://stackoverflow.com/users/1051919/mark-kryzhanouski) )，发布在这里：[UIScrollView Zoom 不适用于 Autolayout](https://stackoverflow.com/questions/14433109/uiscrollview-zoom-does-not-work-with-autolayout)。

关键是您必须将嵌套在滚动视图中的图像视图锚定到滚动视图的父级。尽管 iOS 6 发行说明中提供了指导，但对我来说，哪个视图“浮动”于什么之上并不直观。在这种情况下，滚动视图只是一个图像视图。

我确实对此做了很多实验，希望找到一种全 IB 的方法，但没有找到。您仍然可以在 IB 中生成视图层次结构，但您仍然必须以编程方式添加约束。您可以删除部分或全部默认约束（主要只是为了安抚约束冲突警告），但您始终需要 Mark 的代码将图像视图绑定到滚动视图的父级，即图像视图的祖父级。

似乎它应该比这更简单 - 它“应该可以工作”但是：

```
NSDictionary *viewsDictionary = @{ @"scrollView": self.scrollView, @"imageView": self.imageView };
[self.view addConstraints:[NSLayoutConstraint
    constraintsWithVisualFormat:@"H:|[imageView(width)]"
    options:0
    metrics:@{@"width": @(self.imageView.image.size.width)}
    views:viewsDictionary]];

[self.view addConstraints:[NSLayoutConstraint
    constraintsWithVisualFormat:@"V:|[imageView(height)]"
    options:0
    metrics:@{@"height": @(self.imageView.image.size.height)}
    views:viewsDictionary]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T20:12:10.603

没有在情节提要中添加 imageView，我发现以下工作完美：

```
-(UIImageView *)imageView
{
    if (!_imageView) _imageView = [[UIImageView alloc] initWithFrame:CGRectZero];
    return _imageView;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.scrollView addSubview:self.imageView];
    // Set the min and max:
    self.scrollView.minimumZoomScale = 0.2;
    self.scrollView.maximumZoomScale = 5.0;
    self.scrollView.delegate = self;

    // Set the content:
    self.scrollView.zoomScale = 1.0; // reset zoomScale for new image
    self.scrollView.contentSize = CGSizeMake(image.size.width/2, image.size.height/2);
    self.imageView.frame = CGRectMake(0, 0, image.size.width/2, image.size.height/2);
    self.imageView.image = image;
}

-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageView;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-06T07:27:38.010

## 完整的 Swift Playground 示例

我能想到的最简单的例子是将 a 添加`UIImageView`到`UIScrollView`. 这是 100% 的代码，您只需将 PNG 添加到 Playground。我打电话给我`Image.png`的。在 Playground 中，您会看到在“实时视图”中呈现的整个内容。捏缩放使用 Ctrl 键单击将一根手指放在屏幕上，然后四处拖动。直到内容放大到大于屏幕平移才会起作用。双击图像以在 1x 和 3x 比例之间切换。

基于 Apple 的[技术说明 TN2154：UIScrollView 和 Autolayout](https://developer.apple.com/library/content/technotes/tn2154/_index.html)

### 明白了

如果您的内容不大于屏幕尺寸，您会发现整个事情非常令人沮丧。如果您的内容完全适合屏幕，则不会发生任何事情。这就是为什么您也必须进行缩放才能工作。如果您想向自己证明它有效，请使用非常大的图像（比窗口大）进行测试。

```
import UIKit
import PlaygroundSupport

enum TapToggle {
    case Regular, Large
}

class ScrollingViewController : UIViewController
{
    var tapToggle: TapToggle = .Large
    var scrollView: UIScrollView?
    var imageView: UIImageView?

    override func viewDidLoad()
    {
        let image = UIImage(named: "Image")
        let imageView = UIImageView(image: image)
        imageView.translatesAutoresizingMaskIntoConstraints = false
        imageView.backgroundColor = .white
        imageView.isUserInteractionEnabled = true

        let scrollView = UIScrollView()
        scrollView.minimumZoomScale = 0.5
        scrollView.maximumZoomScale = 10.0
        scrollView.delegate = self
        scrollView.translatesAutoresizingMaskIntoConstraints = false
        scrollView.addSubview(imageView)
        let imageViewKey = "imageView"
        let imageViews = [imageViewKey: imageView]
        scrollView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[\(imageViewKey)]|", options: [], metrics: nil, views: imageViews))
        scrollView.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|[\(imageViewKey)]|", options: [], metrics: nil, views: imageViews))
        self.imageView = imageView

        scrollView.backgroundColor = .white
        self.view.addSubview(scrollView)

        let scrollViewKey = "scrollView"
        let scrollViews = [scrollViewKey: scrollView]
        self.view.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|[\(scrollViewKey)]|", options: [], metrics: nil, views: scrollViews))
        self.view.addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|[\(scrollViewKey)]|", options: [], metrics: nil, views: scrollViews))

        self.scrollView = scrollView

        let tapGesture = UITapGestureRecognizer(target: self, action: #selector(didDoubleTap(sender:)))
        tapGesture.numberOfTapsRequired = 2
        self.imageView?.addGestureRecognizer(tapGesture)
    }

    @objc
    public func didDoubleTap(sender: AnyObject)
    {
        switch self.tapToggle {
        case .Regular:
            self.scrollView?.zoomScale = 1.0
            self.tapToggle = .Large
        case .Large:
            self.scrollView?.zoomScale = 3.0
            self.tapToggle = .Regular
        }
    }
}

extension ScrollingViewController: UIScrollViewDelegate
{
    func viewForZooming(in scrollView: UIScrollView) -> UIView? {
        return self.imageView
    }

    func scrollViewDidEndZooming(_ scrollView: UIScrollView, with view: UIView?, atScale scale: CGFloat)
    {
        print("\(scale)")
    }
}

PlaygroundPage.current.needsIndefiniteExecution = true
PlaygroundPage.current.liveView = ScrollingViewController() 
```

# objective-c - 自定义 UIButton 嵌入图像大小

> ID：14026810
> 
> 赞同：0
> 
> 时间：2012-12-25T00:41:45.953
> 
> 标签：objective-c, ios, xcode4.2

这是一个后续问题（http://stackoverflow.com/questions/14017273/iphone-ipad-rounded-custom-button-and-png-files）并得到了很好的答复。我仍然需要澄清一些事情。

由于我的 UIButton 是自定义的一轮，我正在尝试为 iPhone 和 iPad（非视网膜和视网膜）提供最好的嵌入式 png 文件。我发现尺寸为 40x40（iPhone）和 72x72（iPhone 视网膜）最适合我。我的问题是我想确保我正在做的事情就在这里。所以，我所做的就是将 512x512px 缩小到指定的尺寸。另外，对于 iPad，我可以有 104x104 和 136x136 尺寸吗？当显示在真实设备（视网膜和非视网膜）上或在批准期间，这会成为问题吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T12:53:21.730

我认为你应该在你的 png 文件中使用后缀。例如`CustomButon.png`用于 iphone 和`CustomButton@2x.png`用于视网膜 iphone，也`CustomButon~ipad.png`用于`CustomButton~ipad@2x.png`用于视网膜 ipad 的 ipad。

代码很简单`UIImage *image = [UIImage imageNamed:@"CustomButton.png"];`

希望有帮助。

顺便提一句。我相信视网膜 png 应该比正常高/长两倍。

# javascript - jQuery 替换 this 对象内的 img src

> ID：14026813
> 
> 赞同：0
> 
> 时间：2012-12-25T00:42:12.053
> 
> 标签：javascript, jquery

好的，所以我有一个被点击的链接......一旦它被点击，我想要改变'a'属性中的img src。这是我所拥有的

HTML：

```
"<td>
  <a href='#' class='flag' name='$files[id]' >
      <img src='".$this->config->item('base_url')."/images/notflagged.png' 
         class='flagimg' />
  </a>
</td>" 
```

jQuery：

```
$(".flag").on("click", function(e){
    var fileID = $(this).attr("name");
    var src = '<?php echo base_url().'images/flagged.png';?>';

    // This is where I am hung up, as I want to replace the current src...if I
    // just use $(".flagimg") it will change all src'c with the same class
    $(this).find(".flagimg").attr("src", src);  

    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T00:46:25.727

替换这一行：

```
$(this).(".flagimg").attr("src", src); 
```

有了这个：

```
$(this).find(".flagimg").attr("src", src); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:47:14.183

```
$(".flagimg", this).attr("src", src); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T01:09:32.090

我不知道它是否适合您，但也许您可以尝试更改您的 HTML，例如：

```
<td>
<a href='#' class='flag' name='$files[id]' >
  <img class='flagimg' src='".$this->config->item('base_url')."/images/notflagged.png' 
      />
</a>
</td> 
```

没有测试，但你可以试试：

```
$(".flag").on("click", function(e){

  var fileID = $(this).attr("name");
  var src = '<?php echo base_url().'images/flagged.png';?>';

  $(this).children('.flagimg').attr("src", src);    

  return false;
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T01:12:44.483

可能是，建议php代码不要和js混合写

HTML：

```
<a href='#' class='flag' name='$files[id]' >
<img src='".$this->config->item('base_url')."/images/notflagged.png' data-src="<?php echo base_url().'images/flagged.png';?>" class='flagimg' /> 
```

jQuery：

```
$(".flag").on("click", function(e){
    var fileID = $(this).attr("name");
    var flag = $(this).children(".flagimg");
    flag.attr("src", flag.attr('data-img'));
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-04T06:27:41.070

您的 src 引号是否输入错误？

改变

```
var src = '<?php echo base_url().'images/flagged.png';?>'; 
```

到

```
var src = "<?php echo base_url().'images/flagged.png';?>"; 
```

# android - 为渲染脚本分配大位图（android）

> ID：14026814
> 
> 赞同：1
> 
> 时间：2012-12-25T00:42:34.333
> 
> 标签：android, memory, image-processing, bitmap, renderscript

我尝试在 android renderscript 中制作简单的图像过滤器，它确实适用于小图像。但是`out of memory error`，例如，我得到的照片与用相机拍摄的照片一样大（尽管对于小图像，一切都很好）。我知道我的代码有点糟糕（主要是从[这里](http://buildmobile.com/master-mobile-friendly-image-manipulation-emboss-images-using-androids-renderscript-api/)复制的），所以任何关于如何在大位图上进行渲染脚本计算的提示都值得赞赏。这是调用 rs 的代码：

```
RenderScript rs = RenderScript.create(this);
        Allocation allocIn = Allocation.createFromBitmap(rs, bmp);
        Allocation allocOut = Allocation.createTyped(rs,  allocIn.getType());

        ScriptC_sample sc = new ScriptC_sample(rs, getResources(), R.raw.sample);

        sc.set_in(allocIn);
        sc.set_out(allocOut);

        sc.forEach_root(allocIn, allocOut);

        Bitmap bmpOut = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), bmp.getConfig());
        allocOut.copyTo(bmpOut);
        imgView.setImageBitmap(bmpOut); 
```

这是我认为与 rendescript 文件本身相关的内容：

```
rs_allocation in;

void root(const uchar4* v_in, uchar4* v_out, const void* usrData, 
uint32_t x, uint32_t y) {

    float4 curPixel = rsUnpackColor8888(*v_in);

    // ... computations 

    *v_out = rsPackColorTo8888(curPixel.r, curPixel.g, curPixel.b, curPixel.a);
} 
```

我确实知道我不能真正将这么大的位图加载到内存中（我可以将文件加载到 imageView 中吗？），而且我之前使用过 inJustDecodeBounds 来处理它。但是在这里我不知道如何以及在哪里使用它，我不想调整位图的大小（我想处理原始文件并保存相同大小的修改文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:24:09.143

如果您在 Android 2.3.3 或更高版本的设备上运行，则可以使用[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)仅读取图像文件的一部分。因此，您可以读取一个区域，对其进行处理并保存结果，然后重复直到处理完整个图像。

根据您正在执行的图像处理，您可能需要重叠区域以正确处理它们的边缘。

在 Android 框架中，我不相信有一个等效的 BitmapRegionDecoder 可以分段保存大图像，因此您必须使用外部库来实现这一点。像[PNGJ](http://code.google.com/p/pngj/)这样的东西允许逐行加载和保存PNG文件（我没有使用PNGJ，所以不能评论库本身）。

# android - 我们可以在 Android 中替换短信正文的某些部分吗？

> ID：14026817
> 
> 赞同：0
> 
> 时间：2012-12-25T00:43:43.210
> 
> 标签：android, text, replace, sms

我想替换所有短信中的一些选定单词。我不一定需要修改原始消息。我只想在视图中显示新词，而不是替换的词。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:51:04.803

您应该为此研究正则表达式。如果您收到字符串形式的消息，您可以调用`replaceAll(String regex, String replacement)`. 该方法返回修改后的字符串，因此您可以在视图中显示新字符串，而不是原始字符串。

例如：

```
String str = "I want to change what I own";
//modifiedStr is "you want to change what you own"
String modifiedStr = str.replaceAll("I", "you"); 
```

# grails - 编译升级的 grails 应用程序时 Gant 抛出 NullPointerException

> ID：14026818
> 
> 赞同：1
> 
> 时间：2012-12-25T00:44:17.860
> 
> 标签：grails

我通过执行以下操作将我的 Grails 1.3.7 应用程序升级到 Grails 2.2

1.  将`GRAILS_HOME`变量设置为 Grails 2.2 的位置
2.  编辑了指向此位置的路径
3.  冉`grails upgrade`
4.  编辑`application.properties`删除所有插件引用
5.  编辑`Build.config`创建一个`plugins`闭包来引用我的插件
6.  冉`grails clean`
7.  冉`grails compile`

步骤 7 失败并出现以下错误：

```
C:\code\querium\AppServer-grails-2>grails compile --stacktrace
| Compiling 98 source files
| Warning The [executeSafely] action accepts a parameter of type [groovy.lang.Closure] which has not been marked with @V
alidateable.  Data binding will still be applied to this command object but the instance will not be validateable.

       def executeSafely(Closure c) {
       ^
| Warning The [executeSafely] action accepts a parameter of type [groovy.lang.Closure] which has not been marked with @V
alidateable.  Data binding will still be applied to this command object but the instance will not be validateable.

        def executeSafely(Closure c) {
    ^
| Warning The [increment] action accepts a parameter of type [java.util.Map] which has not been marked with @Validateabl
e.  Data binding will still be applied to this command object but the instance will not be validateable.

        def increment(Map map, String t, int index) {
    ^
| Compiling 98 source files.
| Error Fatal error during compilation org.apache.tools.ant.BuildException: Compilation Failed (NOTE: Stack trace has be
en filtered. Use --verbose to see entire trace.)
java.lang.NullPointerException
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.codehaus.gant.GantBuilder.invokeMethod(GantBuilder.java:99)
        at _GrailsCompile_groovy$_run_closure2_closure6_closure7.doCall(_GrailsCompile_groovy:48)
        at _GrailsCompile_groovy$_run_closure2_closure6_closure7.doCall(_GrailsCompile_groovy)
        at _GrailsCompile_groovy.withCompilationErrorHandling(_GrailsCompile_groovy:69)
        at _GrailsCompile_groovy.this$4$withCompilationErrorHandling(_GrailsCompile_groovy)
        at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
        at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:168)
        at _GrailsCompile_groovy$_run_closure2_closure6.doCall(_GrailsCompile_groovy:47)
        at _GrailsCompile_groovy$_run_closure2_closure6.doCall(_GrailsCompile_groovy)
        at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
        at _GrailsCompile_groovy$_run_closure2.doCall(_GrailsCompile_groovy:46)
        at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
        at org.codehaus.gant.GantMetaClass.invokeMethod(GantMetaClass.java:133)
        at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy:1
85)
        at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16_closure18.doCall(GantBinding.groovy)
        at org.codehaus.gant.GantBinding.withTargetEvent(GantBinding.groovy:90)
        at org.codehaus.gant.GantBinding.this$4$withTargetEvent(GantBinding.groovy)
        at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy:185)
        at org.codehaus.gant.GantBinding$_initializeGantBinding_closure5_closure16.doCall(GantBinding.groovy)
        at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
        at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
        at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
        at gant.Gant.withBuildListeners(Gant.groovy:427)
        at gant.Gant.this$2$withBuildListeners(Gant.groovy)
        at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
        at gant.Gant.dispatch(Gant.groovy:415)
        at gant.Gant.this$2$dispatch(Gant.groovy)
        at gant.Gant.invokeMethod(Gant.groovy)
        at gant.Gant.executeTargets(Gant.groovy:591)
        at gant.Gant.executeTargets(Gant.groovy:590)
| Error Fatal error during compilation org.apache.tools.ant.BuildException: Compilation Failed 
```

我不确定真正的错误在哪里，以及如何纠正它。我很乐意忽略这些警告，除非有充分的理由来修复它们。（如果有，怎么做？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:14:43.410

我不确定 NPE，但警告是由于控制器中的公共方法引起的。控制器不能从应用程序代码中调用，所以公共方法没有意义。在 2.0+ 中，动作现在可以是除了闭包之外的方法，因此您的辅助方法被误解为控制器动作。将它们设为私有，警告就会消失，幸运的是，NPE 也会消失。

顺便说一句，文档中有升级信息:)

# haxe - Haxe 有没有像 JSFiddle 这样的东西？

> ID：14026819
> 
> 赞同：0
> 
> 时间：2012-12-25T00:44:21.840
> 
> 标签：haxe

我正在寻找一种在线测试 Haxe 代码的方法。有没有像 Haxe 的 jsfiddle 之类的东西（例如，Haxe 编程语言的在线代码测试工具）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:45:23.137

是的，有一个网站：http: [//try.haxe.org/](http://try.haxe.org/)它允许 Haxe 程序在线运行，并在浏览器中进行测试。

# php - Apache2 mod_ruid2 和 RDocumentChRoot -- 无法连接到 MySQL 数据库

> ID：14026821
> 
> 赞同：0
> 
> 时间：2012-12-25T00:44:32.673
> 
> 标签：php, mysql, database, apache2, chroot

在 Apache2 虚拟主机中，我使用 RMode stat 让 mod_ruid2 正常工作。我添加了 RDocumentChRoot 以将进程 chroot 到网站文件夹，一个不需要的副作用是 PHP 无法连接到 MySQL 数据库。我用谷歌搜索帮助，找不到任何东西。

谁能给我一些绳子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:41:25.543

感谢 Mario 提到“mysql socket thingy”。经过一番搜索，我发现 MySQLD 使用一个名为 mysqld.sock 的文件作为接收连接的可选方式。在您的系统上运行 'locate *.sock' 将显示 .sock 文件。dkim-filter 也使用 .sock 文件。根据我阅读的另一个网站，套接字文件是由应用程序创建的 FIFO 文件，它们只是充当重定向管道，允许应用程序相互通信，而无需通过其他套接字配置内容。

在我询问的情况下，chrooted php 进程无法访问 .sock 文件，因为它在 chroot 之外。幸运的是，我推断 PHP 使用 .sock 文件是因为连接变量。在 WordPress 中，默认配置使用“localhost”。PHP 中的“localhost”规范将导致 PHP 查找 .sock 文件而不是进行网络连接。将“localhost”更改为“127.0.0.1”可以优雅地解决问题。不需要硬链接或其他解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T17:03:24.553

我在[这个 PHP 错误](https://bugs.php.net/bug.php?id=42977)中添加了一条评论，您可能会发现它很有用。

就我阅读 PHP 源代码而言，不可能从运行时更改行为。您必须修改源以使其通过 TCP 工作。

如果有人认为我错了，请告诉我们如何从运行时配置中绕过此行为：D

# javascript - 我应该使用 `.toPrecision()` 而不是舍入和取幂吗？

> ID：14026822
> 
> 赞同：1
> 
> 时间：2012-12-25T00:44:47.817
> 
> 标签：javascript, numbers, rounding

我是说，

我应该使用这个干净的代码...

```
var rounded=num.toFixed(n); 
```

...而不是这个丑陋的代码...

```
var pow10=Math.pow(10,n),
    rounded=''+Math.round(num*pow10)/pow10; 
```

即使第二个更快？（[http://jsperf.com/round-numbers-number-decimals/2](http://jsperf.com/round-numbers-number-decimals/2)）

为什么第一个这么慢？浏览器不能为第一个代码实现第二个代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:48:35.147

除非你有一个特定的用例需要大量迭代的速度，否则我会坚持使用，`.toFixed()`因为它简单易读，易于理解你在做什么。但是，如果您必须优化速度，至少您知道从哪里开始！

# c# - 在 C# 中使用动态 SQL 的变量表名

> ID：14026823
> 
> 赞同：1
> 
> 时间：2012-12-25T00:45:02.357
> 
> 标签：c#, asp.net, sql, dynamic

我一直在寻找一种输入变量表名的方法，似乎最好的方法是使用动态 sql，尽管它可能导致 SQL 注入。任何人都可以演示这是如何在 C# 中完成的吗？例如，我想要一些东西来实现这样的东西：

```
 SqlCommand command= new SqlCommand("SELECT x FROM @table WHERE @column = @y", conn); 
```

从这里可以看出，表名和列名将是变量。我之前使用过字符串连接，但出于安全目的我想避免这种情况。不确定是否重要，但表和列不是由用户输入决定的，而是由用户选择的链接实际决定的，所以这里的 SQL 注入可能不是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T00:52:10.793

我能想到的最好的方法是两部分。

1.  您有一个将名称作为参数的存储过程。这个过程首先在目录 ( `Information_Schema.Table`) 中查找表名并获取正确的名称以验证它是否有效。

2.  然后使用这个查找存储过程构造所需的 SQL，而不是从参数。

使用此查找，您基本上可以防止传入无效的表名。

```
CREATE PROCEDURE RunSQL
    (@table NVARCHAR(50))
AS
BEGIN 
    DECLARE @validTableName NVARCHAR(50)

    SELECT 
        @validTableName = TABLE_NAME    
    FROM 
        INFORMATION_SCHEMA.TABLES
    WHERE 
        TABLE_NAME = @table
        AND SCHEMA_NAME = 'dbo' -- here you can limit or customise the schema

    IF @validTableName IS NULL
        RAISE ... raise an exception

    DECLARE @dynamicSql NVARCHAR(100) = REPLACE('SELECT * FROM dbo.[#TABLE#]', '#TABLE' @validTableName) 

    EXECUTE sp_executesql .... @dynamicSql ....
END 
```

您可以使用扩展它来验证、模式、列等...

您最终需要构建自己的 SQL 并防止注入。没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T23:37:54.953

看来您必须使用动态 SQL，这基本上意味着您必须将表名连接到查询字符串中并通过 TSQL 中的“sp_executesql”存储过程运行它。

使用 SqlCommand 不是动态 SQL。尽管您正在动态构建 SQL 字符串，但最终您仍然在运行一个普通的旧 SQL 字符串。

为了安全地执行此操作并针对 SQL 注入进行项目，您必须确保表名有效，并且您必须通过任何必要的方式自己执行此操作。幸运的是，您有 3 个不错的选择，其中之一非常简单且几乎万无一失。

正如其他人所提到的，您可以：

1.  根据白名单检查名称，或
2.  在系统表中查找名称以查看它是否是真实的表名，或者
3.  只需使用[QUOTENAME 函数](http://technet.microsoft.com/en-us/library/ms176114.aspx)来转义字符并使它们成为带引号的标识符。

我有一个关于按名称删除表的类似问题，这就是提到 QUOTENAME 函数的地方：[https ://stackoverflow.com/a/19528324/88409](https://stackoverflow.com/a/19528324/88409)

要使用动态 SQL，您实际上必须执行以下操作：

```
string sql = 
    "declare @query nvarchar(max) = 'SELECT * FROM ' + QUOTENAME(@tablename) + ' WHERE ' + QUOTENAME(@columnname) + ' = @cv'; " +
    "declare @params nvarchar(500) = N'@cv nvarchar(500)'; " +
    "exec sp_executesql @query, @params, @cv=@columnvalue;";

SqlCommand command = new SqlCommand( sql, conn );
command.Parameters.AddWithValue( "@tablename", tableName );
command.Parameters.AddWithValue( "@columnname", columnName );
command.Parameters.AddWithValue( "@columnvalue", columnValue ); 
```

如果碰巧 SqlCommand 类不支持使用“declare”语句进行如此复杂的查询，那么您只需将“sql”字符串的值移动到采用相同三个参数的存储过程中，然后调用它通过将 SqlCommand.CommandType 设置为 StoredProcedure 来命名，如下所示：

```
SqlCommand command = new SqlCommand( "MyStoredProcedureName", conn );
command.CommandType = System.Data.CommandType.StoredProcedure;
command.Parameters.AddWithValue( "@tablename", tableName );
command.Parameters.AddWithValue( "@columnname", columnName );
command.Parameters.AddWithValue( "@columnvalue", columnValue ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:51:39.907

我曾经创建了一个允许某些用户访问特定表的网站。使用 ASP Membership 和用户 ID，我有一个表，该表在创建用户帐户时建立了 USER ID 之间的关系。他们被允许访问的表名是当时分配的。表名是硬编码的，并根据项目的参数动态构建。因此 tblCustomersNew 或 tlbInventoryOld 等表被链接到 UserID。

当用户登录时，我只需针对 SQL 表查询 UserID 以获取表名，然后将其添加到查询中或将其传递给存储过程。

效果很好，所有这些都发生在经过身份验证的用户帐户后面。

编辑：我只是想补充一点，这可以避免 SQL 注入，因为您的表名是在项目中预定义并存储在数据库中的。您只需使用经过身份验证的用户帐户查询它们即可访问用户有权访问的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T01:07:28.100

最简单的方法是简单地使用字符串连接将表名放入 SQL 查询中。但是，只要恶意用户可以将任意字符串注入到您的查询中，您仍然可以接受 SQL 注入。例如，假设您的 API URL 是[http://example.org/all?table_name=customer&order=desc](http://example.org/all?table_name=customer&order=desc)，而您只是从 URL 中提取“table_name”作为用户名。

您应该通过拥有有效表名的静态服务器端白名单来防止可能的 SQL 注入（例如`String[] ValidTableNames = new String[] { "customer", "purchase", ... }`，并确保 table_name 参数值是这些值之一，然后再将其添加到 SQL 查询。

# php - 使用 fetchAll() 从 PDO 对象中进行选择

> ID：14026828
> 
> 赞同：1
> 
> 时间：2012-12-25T00:46:04.200
> 
> 标签：php, mysql, pdo

出于某种原因，无论参数是什么以及 SQL 行中的实际内容是什么，以下代码总是返回 true。它还会引发错误“注意：未定义的偏移量：第 7 行 C:\wamp\www\Social Networking\INC\login.inc 中的 0”，但我看不出有什么问题：

```
<?php
function checkAccount($username, $password){
    include("INC/dbconnect.inc");/*"INC/dbconnect.inc" is <?php $pdo = new PDO("mysql:host=localhost;dbname=socialnetwork","user","123"); ?>*/
    $select = $pdo->prepare("SELECT id,password FROM users WHERE user_username = :username");
    $select->execute(array(':username'=>$username));
    $q_rows = $select->fetchAll();
    if($q_rows[0][0]/*the ID of the user, it should always be greater than 1, if not then the username does not exist*/ > 0 && $q_rows[0][0] != null){
        if($q_rows[0][1]/*the password of the user*/ == $password)
            return true;
        else
            return false;
    }
    else
        return false;
    $pdo=null;
} ?> 
```

有人可以告诉我有什么问题吗？我已经在代码中评论了我遇到的问题，并且我尝试了正常`$select->fetch()`而不是`$select->fetchAll()`无济于事。在发布此之前，我已经阅读了 PDO（[http://php.net/manual/en/pdostatement.fetchall.php](http://php.net/manual/en/pdostatement.fetchall.php)）。这是我的文件[http://pastebin.com/YCkrRivs](http://pastebin.com/YCkrRivs)的其余部分，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:01:58.903

如果数据库没有返回任何行，那么就不会有 entry `$q_rows[0]`。因此，当您尝试检索数组中不存在的行时，未定义的偏移量为 0。对于不存在的用户，您的“ID”不 > 0 不是正确的摘要。

样本返回看起来像这样（如果你 print_r()'d 它）

在场用户：

```
$q_rows = Array (
  [0] => Array ( 
   [id] => 1,
   [password] => 'dno23n3io3'
  )
) 
```

没有用户在场：

```
$q_rows = Array (
) 
```

你应该做：

```
if(size($q_rows) > 0) {
   //Handle user present
} else {
   //Handle no user present
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T01:05:32.823

您不需要使用`fetchAll`，只需使用`fetch`：

```
$q_row = $select->fetch();

if ($q_row) {
  // do your logic ...
} 
```

你返回的是字符串`"true"/"false"`，而不是布尔值，你应该使用它`true/false`。

更简单，你可以像下面这样：

```
$q_row = $select->fetch();
return $q_row && $q_row[0] > 0 && $q_row[1] === $password; 
```

# opencv - 使用 PCL 和 OpenCV 连接 Kinect for Windows

> ID：14026833
> 
> 赞同：1
> 
> 时间：2012-12-25T00:46:38.693
> 
> 标签：opencv, kinect, point-cloud-library

我的主要目标是使用 Cmake 建立一个基本的 c++ 解决方案，在那里我可以使用 PCL 和 OpenCV 的功能来处理从 Kinect for Windows 传感器获取的数据。

我使用： - Kinect for Windows 和 SDK，因为 OpenNI 与新版本的 Kinect 不兼容。[https://github.com/avin2/SensorKinect](https://github.com/avin2/SensorKinect)将是解决方案之一，但它不适用于 Windows 8（根据 README 文件）

然后我想，我将使用 Cmake 生成 VS 解决方案，我已经尝试使用这个 CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.6 FATAL_ERROR)
project(MultiKinect)
add_executable(pcl pcl.cpp)
include_directories("C:/Program Files/Microsoft SDKs/Kinect/v1.6/inc")
link_directories("C:/Program Files/Microsoft SDKs/Kinect/v1.6/lib/x86")
target_link_libraries(pcl "C:/Program Files/Microsoft SDKs/Kinect/v1.6/lib/x86/Kinect10.lib") 
```

但我收到以下编译错误：

```
Error   1   error LNK2019: unresolved external symbol __imp_NuiGetSensorCount referenced in function main   
Error   2   error LNK1120: 1 unresolved externals 
```

编码：

```
#include <iostream>
#include <Windows.h>
#include <NuiApi.h>

int main (int argc, char** argv)
{
    int number;
    NuiGetSensorCount(&number);

    return (0);
} 
```

将来，使用 Cmake 生成 C++ 解决方案会更容易，而不是在项目属性下设置适当的目录。创建与 Kinect for Windows 一起使用的 Visual Studio C++ 解决方案的首选方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T14:33:39.743

使用 Visual Studio 10 / Visual Studio 11 生成器可以正常工作。我使用了 Visual Studio 10 Win64 生成器，这就是问题所在。

# c++ - 无法访问私有成员：std::copy

> ID：14026834
> 
> 赞同：0
> 
> 时间：2012-12-25T00:46:40.607
> 
> 标签：c++, vector, std, ofstream

我正在尝试使用 std::copy 将向量的内容复制到输出文件中。我正在使用以下代码：

```
void save()
{
    std::basic_ofstream<TChar> fo(mFilename.c_str());
    std::copy(mContent.begin(), mContent.end(), fo);
} 
```

问题是，我收到此错误：

错误 2 错误 C2248: 'std::basic_ios<_Elem,_Traits>::basic_ios' : 无法访问在类 'std::basic_ios<_Elem,_Traits>' c:\program files (x86)\microsoft visual studio 中声明的私有成员8\vc\include\fstream 802

我在 SO 上搜索过这个，每个人在传递参数时似乎都意外地使用了复制构造函数。由于我没有传递参数，我不确定复制构造函数是如何被触发的（或者它是否被触发了）。

附加信息：

TChar 是一个模板字符，通常是 char、int、wchar_t 等类型。在这个调用上下文中，我使用的是 char。

mContent 是 TChar 类型的向量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T00:52:05.973

您需要使用[std::ostream_iterator](http://en.cppreference.com/w/cpp/iterator/ostream_iterator)：

```
void save()
{
    std::basic_ofstream<TChar> fo(mFilename.c_str());
    std::copy(
        mContent.begin(), mContent.end(),
        std::ostream_iterator<mContent::value_type>(fo, " "));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T00:50:28.920

Copy 将输出迭代器而不是输出流作为第三个参数。你向它传递了一个输​​出流。该错误是因为如果您尝试将输出流用作迭代器，则会发生很多错误。那恰好是第一个。

# python - 如何在 Python 中对数字或字符串应用掩码？

> ID：14026843
> 
> 赞同：2
> 
> 时间：2012-12-25T00:49:13.190
> 
> 标签：python

我不知道掩码是否只能应用于字符串或数字，所以我将两者都包含在我的标题中（因为我以后总是可以在两者之间进行翻译）。

假设我有一个掩码`mask = '001001'`，我想以某种方式说“对于掩码中等于 1 的所有位置，将 X 应用于其他字符串中的相同位置”。

例如，假设我有一个数字 123456，我应用该掩码并希望将数字设置为 0。我会得到 120450。

如果我没有道理，请道歉。如果我之前的字符串示例不是最好的，请建议一个理想的掩码类型，以及使用它来将更改应用于单独的数字/字符串的简单方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T00:52:54.597

```
In [272]: mask = '001001'

In [273]: num=123456

In [274]: "".join(x if y!='1' else '0' for x,y in zip(str(num),mask))
Out[274]: '120450' 
```

`itertools.izip_longest()`如果数字和掩码字符串的长度不同，则使用：

```
In [277]: mask = '001001'

In [278]: num=12345678

In [279]: "".join(x if y!='1' else '0' for x,y in izip_longest(str(num),mask,fillvalue="#"))
Out[279]: '12045078' 
```

# java - 比较两个java映射的键和值

> ID：14026848
> 
> 赞同：4
> 
> 时间：2012-12-25T00:50:54.753
> 
> 标签：java, map, comparison

我对 Java 还是比较陌生，我发现自己坚持尝试正确编写这段代码，我觉得应该更简单一些。

我有两张由同一对象的两个不同实例组成的地图。键是对象，值是对象。

有两个实例，因为我试图确定一个实例中的键是否与另一个实例中的键不同。我正在尝试专门定位新键或丢失的键，然后比较两个映射中存在的键的值。

下面的示例代码只是为了帮助可视化我正在尝试做的事情（希望它不会更令人困惑！）

下面示例的目标应该告诉我缺少键“C”并且有一个新键（“D”），然后它应该最终比较两个映射中键的值。

主要问题是，有没有办法在一个循环中做到这一点？主要是因为我的实际代码将接触文件系统以获取地图中的值，并且我试图最小化它必须接触磁盘的时间

```
Map<objA, objB> mapA = new HashMap<objA, objB>();
mapA.put("A", "1");
mapA.put("B", "2");
mapA.put("C", "3");

Map<objA, objB> mapB = new HashMap<objA, objB>();
mapB.put("A", "1");
mapB.put("D", "4");

// Check if something is missing from mapB
for(Map.Entry<objA, objB> entryMapA:mapA.entrySet())
{
    if(!mapB.containsKey(entryMapA.getKey())
        {
            System.out.println(entryMapA.getKey() + " is missing");
        }
}

// Check if something is new is in mapB
for(Map.Entry<objA, objB> entryMapB:mapB.entrySet())
{
    if(!mapA.containsKey(entryMapB.getKey())
    {  
        System.out.println(entryMapB.getKey() + " is new");
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T00:56:04.147

a 中的键`Map`是`Set`s，因此您可以使用集合和对它们的可用操作。

例如：

```
Set<String> keysInA = new HashSet<String>(mapA.keySet());
Set<String> keysInB = new HashSet<String>(mapB.keySet());

// Keys in A and not in B
Set<String> inANotB = new HashSet<String>(keysInA);
inANotB.removeAll(keysInB);

// Keys common to both maps
Set<String> commonKeys = new HashSet<String>(keysInA);
commonKeys.retainAll(keysInB); 
```

等等等等

注意：您不得直接使用地图的密钥集。如果你这样做：

```
// This returns the actual key set of the map, NOT a copy!
Set<String> inANotB = mapA.keysSet();
inANotB.removeAll(mapB.keySet()) 
```

您实际上*删除了`mapA`*.

最后，您应该注意，`HashSet`不保证订单。如果这对您很重要，您需要查看`SortedSet`（例如`TreeSet`）的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T00:58:57.487

您可以减去键集：

```
Set<objA> keysA1 = new HashSet<objA>(mapA.keySet()); // deepcopy
Set<objA> keysA2 = new HashSet<objA>(mapA.keySet()); // deepcopy
Set<objB> keysB = new HashSet<objB>(mapB.keySet()); // deepcopy

keysA1.removeAll(keysB);
keysB.removeAll(keysA2);

System.out.println("Missing in A: " + keysB);
System.out.println("Missing in B: " + keysA1); 
```

# python - Django模板：如何在页面上完整转储对象

> ID：14026851
> 
> 赞同：5
> 
> 时间：2012-12-25T00:51:40.073
> 
> 标签：python, django, django-templates

尽管有数据，以下模板没有输出任何内容。

我的问题是......我是否可以将“点”对象的内容转储到模板中，以便我可以看到其中的内容？

模板.py

```
 <h3>{% trans "Points" %}</h3>

    {% if points %}
        <p>{% trans "Total Points" %}: {{ points.Points }}</p>

        <table>
            <thead>
            <tr>
                <th>{% trans "Transaction" %}</th>
                <th>{% trans "Status" %}</th>
                <th>{% trans "Points" %}</th>
            </tr>
            </thead>
            <tbody>
            {% for item in points.Points_items.all %}
                <tr>
                    <td>{{ item.transaction_description }}</td>
                    <td>{{ item.get_status_display }}</td>
                    <td>{{ item.points }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-25T07:22:15.360

我为此使用自定义标签：

```
# Custom tag for diagnostics
@register.simple_tag()
def debug_object_dump(var):
    return vars(var) 
```

和

```
{% load extra_tags %}
...
{% for thing in things %}
  <pre>{% debug_object_dump thing %}</pre>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-25T00:55:29.097

把这个贴在顶部：

```
<h1>|{{ points }}|</h1> 
```

如果两者之间没有任何内容，`|`则为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T19:32:19.043

您可以使用`{% debug %}`，它会转储大量信息，对调试这些情况很有用。

更细粒度的还有一个`pprint`过滤器：`{{ points.Points|pprint }}`

# jquery - 突出显示 jQuery datepicker 日期

> ID：14026854
> 
> 赞同：5
> 
> 时间：2012-12-25T00:52:08.450
> 
> 标签：jquery, css, datepicker

使用与此页面相关的**jQuery Datepicker** [http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)
我想突出显示指定由数组给出的日期

```
ex: array("2012-12-24" => "red", "2012-12-24" => "green") 
```

如何获得这种方法。

我可怜的代码

```
<style type="text/css">
    @import"jquery.datepick.css";
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="jquery.datepick.js"></script>
<script type="text/javascript">
    $(function () {
        $('#popupDatepicker').datepick();
        $('#inlineDatepicker').datepick({
            onSelect: showDate
        });
    });

    function showDate(date) {
        alert('The date chosen is ' + date);
    }
</script>
</head>
<body>
    <p>A popup datepicker
        <input type="text" id="popupDatepicker">
    </p>
    <p>Or inline</p>
    <div id="inlineDatepicker"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T10:14:53.983

您也可以尝试 Kendo UI。它有一个 Calendar 小部件和 DatePicker 小部件，它接受一组日期，从中可以轻松自定义小部件的模板。

[剑道 UI - 日历](http://demos.kendoui.com/web/calendar/template.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T09:35:45.760

您可以使用您的代码库尝试以下一个。（这是一个示例）

**CSS**

```
.Highlighted a{
   background-color : Green !important;
   background-image :none !important;
   color: White !important;
   font-weight:bold !important;
   font-size: 12pt;
} 
```

**jQuery**

```
$(document).ready(function() {
    var SelectedDates = {};
    SelectedDates[new Date('12/25/2012')] = new Date('12/25/2012');
    SelectedDates[new Date('05/04/2012')] = new Date('05/04/2012');
    SelectedDates[new Date('06/06/2012')] = new Date('06/06/2012');

    $('#txtDate').datepicker({
        beforeShowDay: function(date) {
            var Highlight = SelectedDates[date];
            if (Highlight) {
                return [true, "Highlighted", Highlight];
            }
            else {
                return [true, '', ''];
            }
        }
    });
});​ 
```

**更新 1**

[**这里**](http://jsfiddle.net/cqf9d/213/)的工作示例[](http://jsfiddle.net/cqf9d/213/)

 ****Jquery 文档**说有**"beforeShowDay:" Option**。

检查[**Datepicker 小部件 API**](http://api.jqueryui.com/datepicker/)

**更新 2：**

您可以使用 Google CDN 引用 jquery，如下所示。因此，注释掉您的 jquery 引用并如下所示。

```
<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/base/jquery-ui.css"
            type="text/css" media="all" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

**更新 3：**

下面我只提到**了伪代码**。根据Jquery语法更改它。

```
$(document).ready(function() {

$('#txtDate').datepicker({
    beforeShowDay: function(date) {

      //according to the date you have to decide which css should load.
        var Highlight = SelectedDates[date];
        var yourColor = whichColor(SelectedDates[date]);

        if (Highlight  && yourColor =='red') {
            return [true, "RedHighlighted", Highlight];
        }
        else if (Highlight   && yourColor =='green') {
             return [true, "GreenHighlighted", Highlight];
        }
        else {
            return [true, '', ''];
        }
    }
});

//return a color according to your date logic
 function whichColor(dateArray) { 

      return color;
   } 
```

});​</p>

有关更多信息，请检查[**突出显示 jQuery UI DatePicker 中的特定日期**](http://jquerybyexample.blogspot.com/2012/05/highlight-specific-dates-in-jquery-ui.html)

我希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T09:06:34.250

使用`onDate`回调来实现目标。

示例：单击“逐日”选项卡 > 国庆 (CSS) 以查看演示

[http://keith-wood.name/calendarsPicker.html](http://keith-wood.name/calendarsPicker.html)

```
$('#nationalPicker').calendarsPicker({ 
    onDate: nationalDays,
    showTrigger: '#calImg'}); 

var natDays = [[1, 26, 'au'], [2, 6, 'nz'], [3, 17, 'ie'], [4, 27, 'za'], 
    [5, 25, 'ar'], [6, 6, 'se'], [7, 4, 'us'], [8, 17, 'id'], 
    [9, 7, 'br'], [10, 1, 'cn'], [11, 22, 'lb'], [12, 12, 'ke']]; 

function nationalDays(date, inMonth) { 
    if (inMonth) { 
        for (i = 0; i < natDays.length; i++) { 
            if (date.month() == natDays[i][0] && date.day() == natDays[i][1]) { 
                return {dateClass: natDays[i][2] + '_day', selectable: false}; 
            } 
        } 
    } 
    return {}; 
} 
```

参考：http: [//forum.jquery.com/topic/highlight-multiple-dates-on-keith-wood-jquery-datepick-plugin](http://forum.jquery.com/topic/highlight-multiple-dates-on-keith-wood-jquery-datepick-plugin)**

# javascript - 如何在 javascript 中的正则表达式上运行正则表达式？

> ID：14026856
> 
> 赞同：7
> 
> 时间：2012-12-25T00:52:17.377
> 
> 标签：javascript, regex

我有以下正则表达式模式和字符串：

```
var str="Is this all there is?";
var patt1=/is/gi; 
```

我想从使用**另一个**`is`正则表达式中提取主表达式（没有修饰符），我们可以调用它作为参数。`var patt1`**`var patt2`**

 **这怎么可能在 vanilla JavaScript 中做到呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T00:55:08.377

是的，`patt1`是一个正则表达式对象。

您可以通过`patt1.source`.

```
> console.dir(patt1);
  /is/gi
    global: true
    ignoreCase: true
    lastIndex: 0
    multiline: false
    source: "is"
    __proto__: /(?:)/ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-25T00:55:17.517

不需要正则表达式。尝试这个：

```
> patt1.source
"is" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T01:20:42.010

我想你需要的是这样的：

```
 var patt1=/[is]/gi;
 alert(patt1.test()); 
```**

# tcp - TCP/IP 数据包和数据报

> ID：14026858
> 
> 赞同：7
> 
> 时间：2012-12-25T00:54:03.947
> 
> 标签：tcp, udp, datagram, packets

在接收到从传输层 (TCP) 到网络层 (IP) 的段后，结果数据单元将是一个数据包，这是真的吗？而当从传输层（UDP）接收用户数据报时，生成的数据单元将是一个数据报？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-25T01:16:35.347

您正在陷入细节中……*数据包*和*数据报*的定义并不完全明确。我也认为你也在倒着看事情。在传统网络中：

1.  **链路层**（例如，802.3“以太网”或 802.11“Wi-Fi”）将*帧*呈现给网络层（例如，IP、ICMP）
2.  **网络层**将帧组装成*数据包*，然后传递到堆栈中的下一层——*传输*层
3.  反过来，**传输层**将字节传递给*应用层*。应用层 API 真正区分 TCP 中的数据流和 UDP 中的数据报

[OSI 堆栈](http://en.wikipedia.org/wiki/OSI_protocols)不再在实践中真正使用。在大多数情况下，它已被[Internet Protocol Suite](http://en.wikipedia.org/wiki/Internet_Protocol_Suite)取代。了解网络堆栈如何工作的最简单方法是购买一份[*“TCP/IP 图解：第 1 卷”*](http://en.wikipedia.org/wiki/TCP/IP_Illustrated)，下载一个[不错的网络捕获实用程序](http://www.wireshark.org/)，然后查看一些 Internet 流量。您可以看到数据包是如何从物理层向上组装的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-21T14:20:14.817

> 术语**数据报**通常被认为是**数据包**的同义词，但有一些细微差别。术语**数据报**通常保留给不可靠服务的**数据包**，如果交付失败，它无法通知发送者，而术语**数据包**适用于任何**数据包**，无论是否可靠。**数据报**是像 UDP 一样提供快速和不可靠服务的 IP 数据包，所有 IP**数据包**都是**数据报**；[4] 然而，在 TCP 层，所谓的 TCP 段是数据报有时必要的 IP 分段**，** [5 ] 但那些被称为“**数据包**”。[6]

[强调补充]

[维基来源](https://en.wikipedia.org/wiki/Datagram)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T00:56:14.793

您绝对需要熟悉“7 层网络堆栈”。

它并不完全适用于 TCP/IP，但它是理解*任何*“网络”协议（包括 TCP/IP）的极好基础：

*   [http://en.wikipedia.org/wiki/OSI_model](http://en.wikipedia.org/wiki/OSI_model)

简短的回答：

*   “数据包”是通过网络发送的东西。

*   对于 TCP/IP，接收主机将数据包组装成“流”。

*   另一方面，对于 UDP，接收主机将相同的数据包（或实际上是数据包）组装成“数据报”。

“数据包”是第 3 级（“网络层”）的东西。

“流”和“数据报”是第 4 级（“传输层”事物）。

在 TCP/IP 的情况下，“流”和“数据报”都由第 7 层直接访问（“应用层”：包括 HTTP/web、SMTP/电子邮件、FTP/文件传输等）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T08:40:57.210

> 在接收到从传输层 (TCP) 到网络层 (IP) 的段后，结果数据单元将是一个数据包，这是真的吗？

不。

客户端可以看到的 TCP 中唯一的接收单位是一个字节。TCP 段由一个或多个 IP 数据包组成，但应用程序只能看到一个字节流。在应用程序看到任何数据之前，所有的段和数据包边界都会丢失。你发送一些字节，你接收一些字节，并且分别发送和接收的字节数之间不一定有很强的相关性，除了它们都加起来是同一个流。

相比之下，在 UDP 中，发送和接收的单位都是数据报。您发送一个数据报，如果它完好无损地到达，您将收到包含相同字节和相同字节数的相同数据报。

# c# - 在 .bin 文件中查找 bmp

> ID：14026860
> 
> 赞同：3
> 
> 时间：2012-12-25T00:54:46.503
> 
> 标签：c#, search, header, offset

在搜索了数周后，我似乎无法找到解决问题的方法。我想做的是用 RichTextBox 打开一个表单，按下加载按钮并加载一个`.bin` 文件进行搜索。然后，在 RichTextBox 中有一个单选按钮来选择`jpeg`或`bmp`&，显示所有 jpeg 或 bmp——不是图像，只是偏移位置。

例如，“jpg found at 0x00002311”是 ÿØÿà 开始的偏移量，或者“bmp found at 0x00009382”是 BM 在所选`.bin`文件中的开始位置。

这就是我所在的位置：它找到一个`bmp`或`jpeg`并显示一个计数，但不是偏移量。我需要它来查找所有图像和偏移量。

```
private void button7_Click(object sender, EventArgs e)
{
    using (OpenFileDialog dlgOpen = new OpenFileDialog())
    {
       try
        {
            long count = 0; string line;
            List<String> LinesFound = new List<string>();
            dlgOpen.Filter = "All files(*.*)|*.*";
            dlgOpen.InitialDirectory = "C://bin";
            dlgOpen.Title = "Load";

            if (dlgOpen.ShowDialog() == DialogResult.OK)
                textBox5.Text = dlgOpen.FileName;
            {
                var sr = new StreamReader(dlgOpen.FileName, Encoding.Default);

                while ((line = sr.ReadLine()) != null)
                {
                    if (line.Contains("ÿØÿà"))
                        richTextBox1.Text = ("JPEG Found at address") + count++;
                    else if (line.Contains("BM"))
                        richTextBox1.Text = ("BMP Found at address") + count++;
                }
             }
          }
            catch (Exception)
            {
                MessageBox.Show("error in reading file");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:16:09.647

您遇到的问题是[StreamReader.Readline](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline%28v=vs.100%29.aspx)正在寻找文本而不是二进制数据。

行定义为字符序列后跟换行符 ("\n")、回车符 ("\r") 或回车符后紧跟换行符 ("\r\n")。

您需要进行二进制搜索。尝试从：

```
byte[] bytes = File.ReadAllBytes(dlgOpen.FileName); 
```

# node.js - NodeJS readdirSync 忽略常见模式（即'.svn'、'.git'、'.DS_Store'、'thumbs.db'）

> ID：14026868
> 
> 赞同：4
> 
> 时间：2012-12-25T00:56:45.533
> 
> 标签：node.js

readdir 或 readdirSync 有什么方法可以忽略常见模式（即“.svn”、“.git”、“.DS_Store”、“thumbs.db”）？显然不是来自文档，但是是否有一个很好的包装器 fs 库可以使用它来做到这一点？

文档：[http ://nodejs.org/docs/v0.3.1/api/fs.html#fs.readdirSync](http://nodejs.org/docs/v0.3.1/api/fs.html#fs.readdirSync)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T18:35:10.403

其实没有：

从 nodejs 来源：deps\uv\src\win\fs.c 第 747 行：

```
 747:  if (name[0] != L'.' || (name[1] && (name[1] != L'.' || name[2]))) { 
```

这仅排除 . 和 .. 文件说的路径。

# c# - 点击时突出显示框中的文本？

> ID：14026870
> 
> 赞同：1
> 
> 时间：2012-12-25T00:58:25.550
> 
> 标签：c#, windows-phone-7

点击时如何在文本框中突出显示文本？

这是我的代码：

```
 TextSelection.Equals(bar.Text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:08:56.637

我对你的问题有点困惑，因为 TextSelection 与 RichTextBox 相关。我只会使用您点击的 TextBox 的[SelectAll 方法](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectall%28v=VS.95%29.aspx)。

```
private void bar_Tap(object sender, GestureEventArgs e)
{
    bar.SelectAll();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T01:08:47.383

您可以选择要选择的字符数以及从哪里开始选择。这将选择整个文本（尽管如果您想始终选择整个文本，您可以使用`SelectAll`Mark Hall 的答案中提到的方法。

```
bar.Focus(); 
bar.SelectionStart = 0;
bar.SelectionLength = bar.Text.Length; 
```

有时需要调用，具体`Focus()`取决于您如何调用它。例如，如果您决定要按一个按钮来选择整个文本，则需要设置焦点。

# web-services - Web服务架构设计

> ID：14026872
> 
> 赞同：1
> 
> 时间：2012-12-25T00:58:34.430
> 
> 标签：web-services, api, architecture

我的目标是创建一些 API 或服务，其输出必须显示在网站上，并且需要访问客户端的数据库。但是代码应该在我的服务器上，因此服务。

我认为它喜欢这样，当页面请求发生时，客户端会让我的服务器知道请求及其类型。然后我的服务器查询客户端数据库（远离我的服务器）并获取运行算法所需的数据。然后运行算法并将输出返回到客户端服务器，然后再次处理（添加 html 标签等）并显示给用户。

这是一个健全的架构吗？要显示的输出不是页面的实际值，我的意思是它只是一个附加组件。所以异步加载也不会受到伤害。我相信以同步方式这将大大减慢页面加载时间。

如果（您的代码需要保持私有 && 客户端数据库并且您的服务器是远程连接的 && 您的代码的输出会影响页面），您将如何完成此类任务 :)）

最后一个意思是客户端向您发送一些数据不仅足够，它还对输出感兴趣。

*PS：我觉得这种问题在SO中不是很喜欢。但我有时会遇到这类问题，而 SO 是真正的交易，您可以在其中获得最快且最出色的答案。如果这需要关闭，有人可以在评论中指出我们可以在网络上讨论这些问题的地方吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:25:45.687

这是一个有一定深度的话题，因此这里可能不适合详细介绍。基本上，您需要了解异步 Javascript/ajax 调用。这通常是通过许多流行的 Javascript 框架直接实现的，因此我建议您接下来看看。

# c++ - CreateWindowEx 失败

> ID：14026875
> 
> 赞同：4
> 
> 时间：2012-12-25T00:59:04.467
> 
> 标签：c++, winapi, createwindowex

我正在关注 NeHe gamedev 教程（同时将它们更改为 OO），我在 CreateWindowEx 演示中遇到了问题（http://nehe.gamedev.net/tutorial/creating_an_opengl_window_(win32)/13001/）。

我正在尝试通过 lpParam 向 WndProc 传递一个指向我的 Window 对象的指针（详见此处：[http](http://web.archive.org/web/20051125022758/www.rpi.edu/~pudeyo/articles/wndproc/) ://web.archive.org/web/20051125022758/www.rpi.edu/~pudeyo/articles/wndproc/ ）但如果我尝试这样做，CreateWindowEx 将失败，GetLastError 返回 1400 - ERROR_INVALID_WINDOW_HANDLE。

我是 Windows API 的完全初学者，并且已经用尽了我所知道的解决此问题的所有方法，请您在这里指出我的错误吗？相关代码如下：

```
LRESULT CALLBACK cog::WindowProc(HWND window, UINT msg, WPARAM wParam, LPARAM lParam) {
    // Member method as windowproc: http://web.archive.org/web/20051125022758/www.rpi.edu/~pudeyo/articles/wndproc/

    if(msg == WM_NCCREATE) {
        LPCREATESTRUCT cs = (LPCREATESTRUCT)lParam;
        SetWindowLong(window, GWL_USERDATA, (long)cs->lpCreateParams);
    }

    cog::Window* w = (cog::Window*)GetWindowLong(window, GWL_USERDATA);
    if(w) {
        return w->windowProc(msg, wParam, lParam);

    } else {
        return DefWindowProc(window, msg, wParam, lParam);
    }
}

cog::Window::Window(int width, int height, int bits, bool fullscreen) :
fullscreen(fullscreen), appInstance(GetModuleHandle(NULL)), active(FALSE) {

    // Generate a rectangle corresponding to the window size
    RECT winRect = {0, 0, width, height};

    WNDCLASS winClass;
     winClass.style         = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;   // Redraw On Size, And Own DC For Window.
    winClass.lpfnWndProc    = (WNDPROC) cog::WindowProc;            // WndProc Handles Messages
    winClass.cbClsExtra     = 0;                                    // No Extra Window Data
    winClass.cbWndExtra     = sizeof(this);                         // Window Data - pointer to Window object
    winClass.hInstance      = this->appInstance;                    // Set The Instance
    winClass.hIcon          = LoadIcon(NULL, IDI_WINLOGO);          // Load The Default Icon
    winClass.hCursor        = LoadCursor(NULL, IDC_ARROW);          // Load The Arrow Pointer
    winClass.hbrBackground  = NULL;                                 // No Background Required For GL
    winClass.lpszMenuName   = NULL;                                 // We Don't Want A Menu
    winClass.lpszClassName  = TEXT("OpenGL");   

    if(!RegisterClass(&winClass)) {
        throw cog::WindowException(std::string("Failed to register class"));
    }

    if(this->fullscreen) {
        DEVMODE screenSettings;
        memset(&screenSettings, 0, sizeof(DEVMODE));

        screenSettings.dmSize = sizeof(DEVMODE);
        screenSettings.dmPelsWidth = width;
        screenSettings.dmPelsHeight = height;
        screenSettings.dmBitsPerPel = bits;
        screenSettings.dmFields = DM_BITSPERPEL | DM_PELSWIDTH | DM_PELSHEIGHT;

        if(DISP_CHANGE_SUCCESSFUL != ChangeDisplaySettings(&screenSettings, CDS_FULLSCREEN)) {
            if(MessageBox(NULL, "Cannot start in full screen mode - start in windowed mode instead?", "OpenGL", MB_YESNO | MB_ICONEXCLAMATION)) {
                this->fullscreen = FALSE;

            } else {
                throw cog::WindowException(std::string("Refused to launch program in windowed mode"));

            }
        }
    }

    DWORD winExStyle;
    DWORD winStyle;
    if(fullscreen) {
        winExStyle = WS_EX_APPWINDOW;
        winStyle = WS_POPUP;
        ShowCursor(FALSE);

    } else {
        winExStyle = WS_EX_APPWINDOW | WS_EX_WINDOWEDGE;
        winStyle = WS_OVERLAPPEDWINDOW;
    }

    AdjustWindowRectEx(&winRect, winStyle, FALSE, winExStyle);

    /*
     * !! BLOWS UP AT THIS CALL - WindowException triggered
     */
    if(!(this->window = CreateWindowEx(
    winExStyle,
    TEXT("OpenGL"),
    TEXT("OpenGL Testing"),
    winStyle,
    0, 0,
    winRect.right - winRect.left,
    winRect.bottom - winRect.top,
    NULL,
    NULL,
    this->appInstance,
    this))) {
        throw cog::WindowException(std::string("Failed to create window"));
    }

    // ... cut here ...
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE lPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
    MSG msg;
    cog::Window* w = NULL;

    try {
        w = new cog::Window(100, 100, 16, TRUE);

        // ... cut here ...

    } catch(cog::Exception e) {
        MessageBox(NULL, e.what(), "Exception Raised", MB_OK | MB_ICONEXCLAMATION);
    }

    if(w) {
        delete w;
    }
} 
```

成员windowProc：

```
LRESULT CALLBACK cog::Window::windowProc(UINT msg, WPARAM wParam, LPARAM lParam) {
    switch(msg) {
    case WM_ACTIVATE:
        if(HIWORD(wParam)) {
            this->active = FALSE;

        } else {
            this->active = TRUE;
        }

        return 0;;

    case WM_SYSCOMMAND:
        switch(wParam) {
        case SC_SCREENSAVE:
        case SC_MONITORPOWER:
            return 0;
        }

        break;

    case WM_CLOSE:
        PostQuitMessage(0);
        return 0;

    case WM_KEYDOWN:
        this->keys[wParam] = TRUE;
        break;

    case WM_KEYUP:
        this->keys[wParam] = FALSE;
        break;

    case WM_SIZE:
        this->resize(LOWORD(lParam), HIWORD(lParam));
        return 0;

    default:
        break;
    }

    return DefWindowProc(this->window, msg, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:53:29.400

您请求全屏的事实是否会导致问题？`w = new cog::Window(100, 100, 16, TRUE);`

如果有帮助，这适用于我的代码库：

```
HWND impl::window_impl::create_window_(
    window_impl* window // associated window object
) {
    auto const INSTANCE = ::GetModuleHandleW(L"");

    WNDCLASSEXW const wc = {
        sizeof(WNDCLASSEXW),
        CS_OWNDC | CS_HREDRAW | CS_VREDRAW,
        window_impl::top_level_wnd_proc_,
        0,
        0,
        INSTANCE,
        nullptr,
        ::LoadCursorW(nullptr, MAKEINTRESOURCE(IDC_ARROW)),
        nullptr,
        nullptr,
        CLASS_NAME,
        nullptr
    };

    ::RegisterClassExW(&wc); // ignore return value

    auto const result = ::CreateWindowExW(
        0,
        CLASS_NAME,
        L"window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT,
        CW_USEDEFAULT, CW_USEDEFAULT,
        (HWND)nullptr ,
        (HMENU)nullptr,
        INSTANCE,
        window
    );

    return result;
} 
```

[编辑] 我认为您对 CreateWindowExW 的调用具有错误顺序的参数 - 特别是实例参数。您是否使用 STRICT 进行编译？它应该检测到这种问题。

[编辑] 不直接相关，但是当编译为 64 位代码时，您的实现将无法工作，并且它不会检查可能的错误——您应该使用类似的东西：

```
//--------------------------------------------------------------------------
//! Get the userdata for the window given by @c hwnd (our window object).
//! @throw bklib::platform::windows_exception
//--------------------------------------------------------------------------
impl::window_impl* get_window_ptr(HWND hwnd) {
    ::SetLastError(0);
    auto const result = ::GetWindowLongPtrW(hwnd, GWLP_USERDATA);

    if (result == 0) {
        auto const e = ::GetLastError();
        if (e) {
            BOOST_THROW_EXCEPTION(bklib::platform::windows_exception()
                << bklib::platform::windows_error_code(e)
            );
        }
    }

    return reinterpret_cast<impl::window_impl*>(result);
}

//--------------------------------------------------------------------------
//! Set the userdata for the window given by @c hwnd to be our
//! window object.
//! @throw bklib::platform::windows_exception
//--------------------------------------------------------------------------
void set_window_ptr(HWND hwnd, impl::window_impl* ptr) {
    ::SetLastError(0);
    auto const result = ::SetWindowLongPtrW(hwnd, GWLP_USERDATA, reinterpret_cast<LONG_PTR>(ptr));

    if (result == 0) {
        auto const e = ::GetLastError();
        if (e) {
            BOOST_THROW_EXCEPTION(bklib::platform::windows_exception()
                << bklib::platform::windows_error_code(e)
            );
        }
    }
} 
```

[编辑] 更多代码以防万一

```
//------------------------------------------------------------------------------
//! Top level window procedure which forwards messages to the appropriate
//! impl::window_impl instance.
//! @throw noexcept
//!     Swallows all exceptions at the API boundary.
//------------------------------------------------------------------------------
LRESULT CALLBACK impl::window_impl::top_level_wnd_proc_(
    HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam
) try {
    // set the instance pointer for the window given by hwnd if it was just created
    if (msg == WM_NCCREATE) {
        auto const cs =
            reinterpret_cast<CREATESTRUCTW const*>(lParam);
        auto const window_ptr =
            reinterpret_cast<window_impl*>(cs->lpCreateParams);

        set_window_ptr(hwnd, window_ptr);
    }

    // the window object to forward the message to
    auto const window = get_window_ptr(hwnd);

    if (window) {
        return window->window_proc_(hwnd, msg, wParam, lParam);
    } else {
        // it's possible we will receive some messages beofre WM_NCCREATE;
        // use the default handler
        return ::DefWindowProcW(hwnd, msg, wParam, lParam);
    }
} catch (std::exception&) {
    ::PostQuitMessage(-1);
    return 0;
} catch (...) {
    ::PostQuitMessage(-1);
    return 0;
}

//------------------------------------------------------------------------------
//! Called by the top level window proc. Dispatches messages to their
//! appropriate handler function.
//------------------------------------------------------------------------------
LRESULT impl::window_impl::window_proc_(
    HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam
) {
    return ::DefWindowProcW(hwnd, msg, wParam, lParam);
}

//------------------------------------------------------------------------------
void impl::window_impl::create() {
    handle_ = create_window_(this);
}

//------------------------------------------------------------------------------
void impl::window_impl::show(bool visible) {
    ::ShowWindow(handle_, SW_SHOWDEFAULT);
    ::InvalidateRect(handle_, nullptr, FALSE);
    ::UpdateWindow(handle_);
} 
```

# android - 如何以编程方式更改 CPU 使用模式。

> ID：14026876
> 
> 赞同：0
> 
> 时间：2012-12-25T00:59:08.803
> 
> 标签：android, cpu-usage

在三星 Galaxy s3 中，用户可以从电源模式限制 CPU 的使用。我的应用程序需要大量 CPU，我想在 onResume 中打开它并在 onPause 方法中关闭它。我知道我可以使用[PowerManager.WakeLock](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)强制屏幕保持打开状态，但据我所知，这不会影响 CPU。那么是否可以通过编程方式更改 CPU 模式。
欢迎任何建议和意见。

# php - Laravel 模块化结构

> ID：14026877
> 
> 赞同：3
> 
> 时间：2012-12-25T00:59:38.000
> 
> 标签：php, module, laravel, modularity

我正在使用 Laravel 开发一个应用程序。但是我对应用程序的模块化结构有疑问。

这是一个例子。

假设我需要一个名为“特色项目”的模块；

这是一个小模块，应该包含在一些控制器中。

问题是我不知道该怎么做？这应该是一个将在其他控制器内部调用的新控制器吗？

这应该是模型吗？这应该写成一个捆绑包吗？

有谁知道什么是最好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:36:54.103

I dont think there's a right answer to this really as it is matter of preference though there are things to bear in mind to let you make an intelligent decision as to where your code should be placed.

Does the module have a small footprint and will function with no more than itself?

*   Create a library

Does the module require it's own routes and views but no requirement for libraries?

*   Create an application controller
*   Use Laravel Routes
*   Use bundle controllers

Does the module contain both the above?

*   Create a bundle with controllers and libraries

It's not as simplistic, other factors should be taken into consideration as well. If the module requires multiple controllers for example, you'd be better off writing it in a bundle. As bundles do not require you to have anything more than start.php file within the bundle directory, you register what you want with the Autoloader. From this you can see a lot of peoples preferences would be to build all their modular code in bundles.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-09T10:08:30.453

这个包让你能够使用带有模块系统的 Laravel 5。您可以简单地将具有自己的控制器、模型、视图、翻译和路由文件的模块拖放或生成到 app/Modules 文件夹中，然后继续使用它们。

**按照步骤**

安装

安装此软件包的最佳方法是通过 Composer 通过您的终端。

从项目根目录运行以下命令

composer 需要 artem-schander/l5-modular 此操作完成后，只需将服务提供者添加到项目的 config/app.php 即可。

服务提供者

ArtemSchander\L5Modular\ModuleServiceProvider::class,

入门

内置的 Artisan 命令 php artisan make:module name [--no-migration] [--no-translation] 在 app/Modules 文件夹中生成一个随时可用的模块，并在必要时生成迁移/翻译。

[https://github.com/Artem-Schander/L5Modular](https://github.com/Artem-Schander/L5Modular)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T04:25:25.287

把它放在一个库中并自动加载它怎么样？[http://laravel.com/docs/models#libraries](http://laravel.com/docs/models#libraries)

这样您就可以在任何控制器中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T06:11:02.857

诸如特色项目之类的东西可能会调用您的数据库。我会在您的产品模型中创建一个方法，例如称为 getFeaturedItems。然后使用 eloquent 或 fluent 来获得结果。

# android - android - 将录音保存在缓冲区中并稍后播放

> ID：14026878
> 
> 赞同：1
> 
> 时间：2012-12-25T00:59:37.280
> 
> 标签：android

我正在尝试在不保存声音文件的情况下进行录制，我使用 AudioRecord 将录制的声音保存在缓冲区中，并在稍后点击“播放”按钮时使用 AudioTrack 播放声音

这是我的应用程序代码源

```
package com.stackoverflow.sofproject;

import java.io.IOException;

import android.media.AudioFormat;
import android.media.AudioManager;
import android.media.AudioRecord;
import android.media.AudioTrack;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.TextView;
import android.app.Activity;

public class MainActivity extends Activity {

    boolean recorder = true;
    AudioRecord ar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final int minSize = AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);
        ar = new AudioRecord(MediaRecorder.AudioSource.MIC,
                8000,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT,minSize);

        final short[] buffer = new short[minSize];

        ar.startRecording();        
        Log.e("SoundRecordingActivity", "Start record !");

        Thread Rthread = new Thread(new Runnable() {
            public void run() {
                while(recorder)
                {
                    ar.read(buffer, 0, minSize);
                }
            }
        });
        Rthread.start();
    }

    public void stopRecordButtonAndPlayBack(){
        ar.stop();
        recorder = false;
        Log.e("SoundRecordingActivity", "Stop record !");
        // play sound
        int minSize = AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);
        ar = new AudioRecord(MediaRecorder.AudioSource.MIC,
                8000,AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT,minSize);

        AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
                8000,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                 AudioFormat.ENCODING_PCM_16BIT,
                minSize,
                AudioTrack.MODE_STREAM);

        audioTrack.play();

        while (true) {
            audioTrack.write(buffer, 0, minSize);
        }           
    }
} 
```

录音工作正常

当我录制播放按钮（stopRecordButtonAndPlayBack）时，应用程序强制关闭

问题不在按钮和 stopRecordButtonAndPlayBack 之间的链接问题 如何将缓冲区作为声音播放

对不起我的英语不好

# android - android getPosition 和排序

> ID：14026884
> 
> 赞同：0
> 
> 时间：2012-12-25T01:01:56.280
> 
> 标签：android, sqlite

是否可以按一个字段排序并查看另一个字段的行位置。例如，在第一个字段中有姓名，在第二个字段中有年龄 按姓名排序并在第三个字段中查看从最小到最老的位置。

```
Ann 25years 2 // 2nd position in the age.
Joe 30years 3 // 3rd position in the age.
Ron 20years 1 // 1st position 
```

我想从“列时代”获得定位，这可能吗？

我的代码

Show_Activity

```
///ON RESUME    
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

    datasource.open();
        Cursor cursor = datasource.Query(filter);

        String[] columns = new String[] { "swimm_pos", "swimm_date","swimm_lap", "swimm_stroke", "swimm_time", "swimm_media", "swimm_efficiency", "swimm_note" };
        int[] to = new int[] { R.id.swimm_pos, R.id.swimm_date, R.id.swimm_lap, R.id.swimm_stroke, R.id.swimm_time, R.id.swimm_medialap, R.id.swimm_efficiency, R.id.swimm_note};

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
            this, 
            R.layout.list_layout, 
            cursor, 
            columns, 
            to);

    adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
              if (view.getId() == R.id.swimm_pos)
                { 
                  rowcounter = cursor.getPosition()+1;
                  String s = String.valueOf(rowcounter);
                  TextView tv = (TextView)view;
                  tv.setBackgroundColor(0xFF558866);
                  tv.setText(s);
                  return true;
            }
              return false;}
        });

    this.setListAdapter(adapter);
    datasource.close();
} 
```

数据库适配器

```
public Cursor Query(String filter) {
            Cursor cursor = database.rawQuery
                    ("select _id, swimm_pos,swimm_date, swimm_lap,swimm_stroke,swimm_time,swimm_media,swimm_efficiency,swimm_note from swimm_table order by cast("+filter+" as integer) asc", null);
            return cursor;
        }
......... 
```

我有按钮来改变排序

```
....
    switch (v.getId()) {
      case R.id.btn_sort_date:
            filter = "swimm_date";
            datasource.open();
                cursor = datasource.Query(filter);        
                adapter = new SimpleCursorAdapter(
                    this, 
                    R.layout.list_layout, 
                    cursor, 
                    columns, 
                    to); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:37:41.363

你可以用不同的方式来做。您可以通过编写代码然后插入表格来对年龄进行排序，或者您可以在不同的表格中设置人员的年龄并使其`ORDER BY`（默认升序）年龄。将年龄表标记为主键自动增量一列。然后与包含人名的表进行内部连接。这样您就可以得到上面提到的表格。

# algorithm - 推荐阅读高级图论？

> ID：14026886
> 
> 赞同：-1
> 
> 时间：2012-12-25T01:02:10.570
> 
> 标签：algorithm, graph

我正在寻找有关高级图论的书籍。你会推荐什么？

相关主题：
- 着色理论
- 最小切割
- 旅行商问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T01:18:47.217

谷歌“MAA 评论”这是一个书评网站，一旦在那里搜索“图表”。你会发现那里有很多书评。如果那太霰弹枪的方法，你可能会发布一个更具体的问题。

稍后添加

MAA 网站面向数学家。从您更具体的问题来看，我怀疑您想要的东西比那里的许多书更基础和更实用。他们审查的其中包括这种基本且相对便宜的文本

图论初学者指南 WD Wallis

和这本巨大的参考书，它的大小价格合理

图论及其应用 Jonathan L. Gross 和 Jay Yellen

# php - 距离任何日期还有多少天？

> ID：14026888
> 
> 赞同：3
> 
> 时间：2012-12-25T01:02:33.590
> 
> 标签：php, datetime

> **可能重复：**
> [距离 XXX 日期还有多少天？](https://stackoverflow.com/questions/654363/how-many-days-until-xxx-date)

目前我正在使用此代码来确定距离预期日期还有多少天。但是这段代码显示了意想不到的结果。例如，如果 $last_date 是 2012 年 12 月 26 日，那么我会得到`0 day(s) left.`但应该是`1 day(s) left.`我认为我的问题只是`floor()`功能。不是吗？

```
 $timezone = "Asia/Dhaka";
 if(function_exists('date_default_timezone_set')) date_default_timezone_set($timezone);

 $now = time();
 $last_date = strtotime("$year-$month-$day");
 $datediff = $last_date - $now;
 $day_left=floor($datediff/(60*60*24));
 echo "$day_left day(s) left."; 
```

N:B：我的时区是 +6 GMT，我的意思是亚洲/达卡。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T01:07:20.713

根据 PHP[文档](http://php.net/manual/en/datetime.diff.php)：

```
<?php

$year = '2012';
$month = '12';
$day = '26';

$current_date = new DateTime(date('Y-m-d'), new DateTimeZone('Asia/Dhaka'));
$end_date = new DateTime("$year-$month-$day", new DateTimeZone('Asia/Dhaka'));
$interval = $current_date->diff($end_date);
echo $interval->format('%a day(s)');

?> 
```

# django - Django：文件上传不适用于 Ajax

> ID：14026889
> 
> 赞同：1
> 
> 时间：2012-12-25T01:03:13.397
> 
> 标签：django, jquery

我不明白为什么，但是如果我尝试通过 ajax 上传文件，它不起作用，但通过常规请求它可以。

打印 request.FILES。

```
#For ajax request
<MultiValueDict: {}>

#For regular request
<MultiValueDict: {u'file': [<TemporaryUploadedFile: IMG_3056.JPG (image/jpeg)>]}>

#Here's my front-end and back-end code
<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
...
</form>
function submitForm(target, form){
    $.ajax({
        url:form.attr('action'),
        type:'post',
        data:form.serialize(),
        dataType:"html",
        error:function(data, status, xhr){
            error();
        },
        beforeSend:function(){
            loading();
        },
        success:function(data, status, xhr){
            $(target).html(data);
        },
        complete:function(){
            loadingDone();
        }
    });
}

#views.py

def file_upload(request):
    doc_form = DocumentForm(user = request.user)
    if request.method == 'POST':
        doc_form = DocumentForm(request.POST, request.FILES, user = request.user)
        print request.FILES
        if doc_form.is_valid():
            document = doc_form.save()
    return render_to_response("create_doc.html", {                                                                  'doc_form':doc_form, 
}, context_instance = template.RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T04:03:06.357

使用常规 jQuery 的 AJAX 上传文件不起作用。请参阅其中一些链接以获取帮助：

[http://www.nickdesteffen.com/blog/file-uploading-over-ajax-using-html5](http://www.nickdesteffen.com/blog/file-uploading-over-ajax-using-html5)

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

[使用 jQuery.ajax 发送 multipart/formdata](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

基本上，HTML 5 中有一个新的 API 用于处理文件，或者老式的方法是使用 iFrame/Flash。几个月前，我个人在一个项目中使用了[Uploadify 。](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T08:44:43.503

请尝试使用这个[jquery 表单提交插件](http://malsup.com/jquery/form/#getting-started)，我认为它会像你需要的那样将文件发送到服务器。

（它适用于我的 PHP 服务器端，没有理由对你也不起作用）

# meteor - 如何保护文件目录并只允许经过身份验证的用户访问文件？

> ID：14026891
> 
> 赞同：6
> 
> 时间：2012-12-25T01:04:07.093
> 
> 标签：meteor

如何限制文件夹，只有登录我的 Meteor 应用程序的人才能下载文件？

我研究了多种方法，但主要问题是我无法访问（我得到`null`。）：

```
Meteor.user() or this.userId() 
```

我试过了：

```
__meteor_bootstrap__.app
    .use(connect.query())
    .use(function(req, res, next) {
        Fiber(function () {  

          // USER HERE?

        }).run();
    }); 
```

或者

```
__meteor_bootstrap__.app.stack.unshift({

    route: "/protected/secret_document.doc", // only users can download this

    handle: function(req, res) { Fiber(function() {

        // CHECK USER HERE ?

        // IF NOT LOGGED IN:
        res.writeHead(403, {'Content-Type': 'text/html'});
        var content = '<html><body>403 Forbidden</body></html>';
        res.end(content, 'utf-8');
    }).run() }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T01:19:36.773

您可以[尝试将文件存储在 mongodb](https://stackoverflow.com/questions/8515410/store-files-on-disk-or-mongodb)中，这意味着它们将被挂接到您的收集系统中并且可以在客户端和服务器上查询。然后，只需为特定用户将相关数据发布到客户端，或者使用 Meteor.methods 以这种方式公开信息。

**例子：**

假设文件存储在 MongoDB 中，我们首先将它们发布到客户端：

```
Meteor.publish("files", function(folder) {
  if (!this.userId) return;
  // the userHasAccessToFolder method checks whether
  // this user is allowed to see files in this folder
  if (userHasAccessToFolder(this.userId, folder))
    // if so, return the files for that folder
    // (filter the results however you need to)
    return Files.find({folder: folder});
}); 
```

然后在客户端，我们自动订阅发布的频道，这样每当它发生变化时，它就会被刷新：

```
Meteor.startup(function() {
  Meteor.autosubscribe(function() {
    // send the current folder to the server, 
    // which will return the files in the folder
    // only if the current user is allowed to see it
    Meteor.subscribe("files", Session.get("currentFolder"));
  });
}); 
```

注意。我没有测试过上面的代码，所以认为它是伪代码，但它应该为你指明解决这个问题的大方向。困难的部分是将文件存储在 mongodb 中！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:26:04.733

我会更关心为什么`Meteor.user()`不起作用。

几个问题：

*   你在流星 0.5.0 上吗？
*   你添加`accounts-base`到你的流星项目了吗？
*   您是否使用过流星的登录系统之一（`accounts-password`、`accounts-facebook`等）？（可选 -`accounts-ui`为了便于使用？）
*   你还有自动发布吗？或者您是否正确设置了发布/订阅？

Meteor.user() 应该是当前用户，而 Meteor.users 应该是所有以前登录用户的 Meteor 集合。

# c# - ValidationGroup和有效地验证多个文本框asp c#

> ID：14026897
> 
> 赞同：2
> 
> 时间：2012-12-25T01:05:45.120
> 
> 标签：c#, asp.net, validation

我有一个注册页面，其中包含几个必填字段（电子邮件、用户名、密码等）的文本框。

有没有办法验证所有这些都不是空的，如果其中任何一个没有填写，只会显示一个错误消息？我知道我可能必须为所有这些表单设置一个RequiredFieldValidator，但是如果它们都有错误消息，那么每个失败的验证都不会显示错误消息，而不仅仅是一个通用的“请填写所有必填字段“ 信息。

我认为validationgroup 可以解决这个问题，但是这些文本框除了RequiredFieldValidator 之外还有其他验证，我认为这会有问题，因为我认为您不能将一个文本框分配给超过1 个validationGroup？有没有最佳实践方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T10:40:37.410

您可以使用 ASP.NET[自定义验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator%28v=vs.100%29.aspx)控件。您可以对其进行调整，以便为**任意**数量的控件提供自定义验证逻辑，我相信这就是您正在寻找的。它还具有验证客户端（通过使用 javascript）和/或服务器上的输入的功能。

我将向您展示一个使用服务器端验证的示例，如果您需要它在客户端上工作，请查看[ClientValidationFunction](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction%28v=vs.100%29.aspx)

**ASPX：**

```
First Name:<br />
<asp:TextBox ID="txtFirstName" runat="server"></asp:TextBox><br />
Last Name:<br />
<asp:TextBox ID="txtLastName" runat="server"></asp:TextBox><br />
Email Address:<br />
<asp:TextBox ID="txtEmailAddress" runat="server"></asp:TextBox><br />
<asp:Button ID="btnSignUp" runat="server" Text="Sign Up" OnClick="SignUp" />&nbsp;
<asp:CustomValidator ID="signUpValidator" runat="server" ErrorMessage="Please fill in all the fields first"
    ForeColor="Red" OnServerValidate="ValidateSignUp"></asp:CustomValidator> 
```

**后面的代码：**

```
protected void ValidateSignUp(object source, ServerValidateEventArgs args)
{
    bool hasFirstName = txtFirstName.Text.Length > 0 ? true : false;
    bool hasLastName = txtLastName.Text.Length > 0 ? true : false;
    bool hasEmail = txtEmailAddress.Text.Length > 0 ? true : false;

    if (hasFirstName && hasLastName && hasEmail)
        args.IsValid = true;
    else
        args.IsValid = false;
}

protected void SignUp(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        //All the required fields have been filled in, sign the user up
    }   
} 
```

# python - Django 模型：使用过滤器获取数据，为空

> ID：14026898
> 
> 赞同：0
> 
> 时间：2012-12-25T01:06:02.957
> 
> 标签：python, django, django-models

我正在尝试从表“points_points”中列出页面上的所有数据，其中 user_id 是登录的用户。但是，当显示未列出任何数据时，该对象为空白。我 100% 在数据库中有用户的数据。为什么什么都没有显示？任何人都可以在下面发现任何错误吗？

**模型.py**

```
class PointsManager(models.Manager):

    def points_list(self,thisUser):
        list = Points.objects.filter(user=thisUser)
        return list

class Points (models.Model):
    user = models.ForeignKey(User)
    points = models.IntegerField(verbose_name=("Points"), default=0)
    created = models.DateTimeField(("Created at"), auto_now_add=True)
    updated = models.DateTimeField(verbose_name=("Updated at"), auto_now=True)

    objects = PointsManager()

    class Meta:
      verbose_name = ('Point')
      verbose_name_plural = ('Points') 
```

**视图.py**

```
@login_required
def history(request):

    thisPoints = Points.objects.points_list(request.user)
    context = {'points':thisPoints}
    return render_to_response('points/history.html', context, context_instance=RequestContext(request)) 
```

**模板.py**

```
 <h1>|{{ points }}|</h1>

 {% for item in points.Points_items.all %}

     <tr>
       <td>{{ item.points }}</td>
     </tr>
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:22:07.857

试试这个

```
def points_list(self,thisUser):
       return super(PointsManager, self).get_query_set().filter(user=thisUser) 
```

您的模板看起来不正确..

```
{% for item in points %}

     <tr>
       <td>{{ item.points }}</td>
     </tr>
  {% endfor %} 
```

# cuda - CUFFT：如何计算倾斜指针的 fft？

> ID：14026900
> 
> 赞同：3
> 
> 时间：2012-12-25T01:06:13.217
> 
> 标签：cuda, fft, cufft

我正在尝试使用 CUFFT 计算图像的 fft。似乎 CUFFT 只提供 fft 分配的普通设备指针`cudaMalloc`。

我的输入图像是使用分配的，`cudaMallocPitch`但没有处理图像指针间距的选项。

目前，我必须删除行的对齐方式，然后执行 fft，并将结果复制回倾斜的指针。我目前的代码如下：

```
void fft_device(float* src, cufftComplex* dst, int width, int height, int srcPitch, int dstPitch)
{
    //src and dst are device pointers allocated with cudaMallocPitch

    //Convert them to plain pointers. No padding of rows.
    float *plainSrc;
    cufftComplex *plainDst;

    cudaMalloc<float>(&plainSrc,width * height * sizeof(float));
    cudaMalloc<cufftComplex>(&plainDst,width * height * sizeof(cufftComplex));

    cudaMemcpy2D(plainSrc,width * sizeof(float),src,srcPitch,width * sizeof(float),height,cudaMemcpyDeviceToDevice);

    cufftHandle handle;
    cufftPlan2d(&handle,width,height,CUFFT_R2C);

    cufftSetCompatibilityMode(handle,CUFFT_COMPATIBILITY_NATIVE);

    cufftExecR2C(handle,plainSrc,plainDst);

    cufftDestroy(handle);

    cudaMemcpy2D(dst,dstPitch,plainDst,width * sizeof(cufftComplex),width * sizeof(cufftComplex),height,cudaMemcpyDeviceToDevice);

    cudaFree(plainSrc);
    cudaFree(plainDst);
} 
```

它给出了正确的结果，但我不想在函数内部进行 2 次额外的内存分配和复制。我想做这样的事情：

```
void fft_device(float* src, cufftComplex* dst, int width, int height, int srcPitch, int dstPitch)
{
    //src and dst are device pointers allocated with cudaMallocPitch
    //Don't know how to handle pitch here???
    cufftHandle handle;
    cufftPlan2d(&handle,width,height,CUFFT_R2C);

    cufftSetCompatibilityMode(handle,CUFFT_COMPATIBILITY_NATIVE);

    cufftExecR2C(handle,src,dst);

    cufftDestroy(handle);
} 
```

# 问题：

如何直接使用CUFFT计算倾斜指针的fft？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:47:48.323

我想您可能对`cufftPlanMany`哪个可以让您使用音高进行 1D、2D 和 3D ffts 感兴趣。这里的关键是 inembed 和 oneembed 参数。

您可以查看 CUDA_CUFFT_Users_Guide.pdf（第 23-24 页）了解更多信息。但是对于您的示例，您将执行以下操作。

```
void fft_device(float* src, cufftComplex* dst,
                int width, int height,
                int srcPitch, int dstPitch)
{
    cufftHandle handle;
    int rank = 2; // 2D fft
    int n[] = {width, height};    // Size of the Fourier transform
    int istride = 1, ostride = 1; // Stride lengths
    int idist = 1, odist = 1;     // Distance between batches
    int inembed[] = {srcPitch, height}; // Input size with pitch
    int onembed[] = {dstPitch, height}; // Output size with pitch
    int batch = 1;
    cufftPlanMany(&handle, rank, n, 
                  inembed, istride, idist,
                  onembed, ostride, odist, CUFFT_R2C, batch);

    cufftSetCompatibilityMode(handle,CUFFT_COMPATIBILITY_NATIVE);
    cufftExecR2C(handle,src,dst);
    cufftDestroy(handle);
} 
```

PS为了举例，我没有在这里添加退货支票。始终检查代码中的返回值。

# iphone - 属性内的 UILabel 未初始化

> ID：14026902
> 
> 赞同：1
> 
> 时间：2012-12-25T01:06:31.837
> 
> 标签：iphone, xcode, ios6

我创建了一个属性

```
 @property (weak,nonatomic) UILabel *vishalSays; 
```

然后我试图初始化属性，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.vishalSays = [[UILabel alloc] initWithFrame:CGRectMake(30, 100, 200, 44)];
    [self.vishalSays setText:@"Hello World"];
    [self.view addSubview:self.vishalSays];
} 
```

但是上面的代码在 iPhone 模拟器中没有显示标签。将代码更改为以下时：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(30, 100, 200, 44)];
    self.vishalSays = label;
    [self.vishalSays setText:@"Hello World"];
    [self.view addSubview:self.vishalSays];
} 
```

然后“Hello World”标签变得可见。有人可以解释为什么这两种语法之间存在行为差异吗？谢谢维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:17:01.070

我认为这是因为您的属性设置为`weak`. 您可以将其更改为`strong`（首选），或`retain`在初始化周围添加一个块（不确定这是否可行，而不是在计算机上进行测试）。

如果您使用的是 ARC，则不会保留初始化，因为没有任何人拥有该实例。

有关更多信息，请参阅：[https ://stackoverflow.com/a/11013715/785791](https://stackoverflow.com/a/11013715/785791)

# android - Holo 主题上未显示背景渐变

> ID：14026904
> 
> 赞同：2
> 
> 时间：2012-12-25T01:06:36.803
> 
> 标签：android, styles

在、 和`styles.xml`的内部`values/`，我将 设置为。`values-v11/``values-v14/``AppBaseTheme``android:Theme.Holo`

现在它似乎运行良好，除了当我在 API 级别 17 的 4.2 AVD 上运行它时没有显示漂亮的背景渐变。

我看到了一些类似于硬件加速的东西。这可能是为什么它没有显示 Holo 主题应该使用的背景渐变吗？是在 AVD 的设置中吗？还是我错过了其他东西？

当我在 AVD 上运行应用程序时，如何让 Holo 背景渐变显示在我的应用程序中？我知道这纯粹是装饰性的，但我认为它看起来更好，我希望我的应用程序能够使用它。

# r - 在 R 和 gnuplot 中为 3D 绘图绘制大量 x、y、z 点，并在每个时间步提取 bmp/gif/png 文件

> ID：14026905
> 
> 赞同：2
> 
> 时间：2012-12-25T01:06:36.027
> 
> 标签：r, 3d, gnuplot

我有大量的 x、y、z 点（8000 个点），其中 x 和 y 是固定的，并且 z 坐标在每个时间步长（大约 100 个时间步长）发生变化。每个时间步长都有一个单独的数据文件（x，y ,z) 对于每个时间步。为每个文件绘制这些数据点以显示 z 坐标及时变化的最佳方法是什么？可以在每个时间步生成 3D 表面/散点图，并使用这些 gif/bmp 文件制作视频文件。我可以使用绘图软件在每个时间步绘制 x、y、z，但是手动执行 100 次会很乏味。你能建议我在 R 和 gnuplot 中做到这一点吗？我想创建像这里链接的图片文件。 [http://dl.dropbox.com/u/9267983/stack/1.gif](http://dl.dropbox.com/u/9267983/stack/1.gif)

谢谢

例如我在特定时间的数据集 = 1.0 分钟

```
 4.00      4.00    126.6310
         8.00      4.00    126.3585
        12.00      4.00    126.1797
        16.00      4.00    126.0514
        20.00      4.00    125.8081
        24.00      4.00    125.3174
        28.00      4.00    124.6824
        32.00      4.00    124.0422
        36.00      4.00    123.4376
        40.00      4.00    122.8637
        44.00      4.00    122.4779
        48.00      4.00    122.4673
        52.00      4.00    122.4825
        56.00      4.00    122.2762
        60.00      4.00    122.5483
        64.00      4.00    122.0322
        68.00      4.00    122.5442
        72.00      4.00    122.2031
        76.00      4.00    122.4452
        80.00      4.00    122.3936
        84.00      4.00    122.4258
        88.00      4.00    122.4239
        92.00      4.00    122.4239
        96.00      4.00    122.4226 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T02:50:02.070

在 R 中，最适合参数化绘图的 3D 选项是`rgl`包。

```
require(rgl)
x=sin( (1:100)/10 )
 y=cos( (1:100)/10 )
 z=(1:100)/100
 lines3d(x,y,z)
 #after rotation with cursor controls
 rgl.postscript("spiral.ps""
 # and conversion to a png file 
```

![在此处输入图像描述](../Images/364606a10b8fa84e11eba848200ec481.png)

给我们50-100分，我们可以用真实数据来证明！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T21:34:10.340

根据您的样本数据，我生成了一组假数据并生成了一系列图并将它们保存为单独的图像（按顺序命名）。可以使用 ImageMagick、QuickTime Pro、GIMP 或任何其他功能强大的图形编辑器将此类图像转换为动画 gif 或电影文件。

![在此处输入图像描述](../Images/24b3013aeeccfeb24e513652eea9845e.png)

下面是我的 gnuplot 代码。请注意，do-loops 是在 gnuplot 4.6 版中新引入的，在早期版本中不起作用。使用旧版本的 gnuplot，您可以使用外部 shell 脚本多次运行相同的脚本，同时更改输出文件名和数据文件名以产生相同的结果。

```
set term pngcairo
set palette defined ( 0    '#000fff',\
                      0.99 '#000fff',\
                      1    '#90ff70',\
                      1.99 '#90ff70',\
                      2    '#ee0000',\
                      2.99 '#ee0000')
set ticslevel 0
set view 51,120

do for [t=0:29] {
  set output sprintf("%d.png", t)
  splot sprintf("< awk '{if ($2!=prev) print ; prev=$2; print $0}' %d.dat", t) w p pt 7 linecolor palette notitle
} 
```

# ruby - 为什么这个 Ruby 哈希不是我想象的那样？

> ID：14026906
> 
> 赞同：5
> 
> 时间：2012-12-25T01:06:36.493
> 
> 标签：ruby, hashmap

我有这个代码：

```
$ze = Hash.new( Hash.new(2) )

$ze['test'] = {0=> 'a', 1=>'b', 3 => 'c'}

$ze[5][0] = 'one'
$ze[5][1] = "two"

puts $ze
puts $ze[5] 
```

这是输出：

```
{"test"=>{0=>"a", 1=>"b", 3=>"c"}} 
{0=>"one", 1=>"two"} 
```

为什么没有输出：

```
{"test"=>{0=>"a", 1=>"b", 3=>"c"}, 5=>{0=>"one", 1=>"two"}} 
{0=>"one", 1=>"two"} 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T01:29:35.103

`$ze[5][0] = xxx`您首先调用 的 getter `[]`，然后调用的`$ze`setter `[]=`。`$ze[5]`请参阅[哈希的 API](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D)。

如果`$ze`不包含键，它将返回您使用 初始化的默认值`Hash.new(2)`。

```
$ze[5][0] = 'one'
# in detail
$ze[5] # this key does not exist,
       # this will then return you default hash.
default_hash[0] = 'one'

$ze[5][1] = 'two'
# the same here
default_hash[1] = 'two' 
```

您没有添加任何内容，`$ze`而是将键/值对添加到其默认哈希中。这就是为什么你也可以这样做。您将得到与 相同的结果`$ze[5]`。

```
puts $ze[:do_not_exist]
# => {0=>"one", 1=>"two"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:01:29.627

```
h = Hash.new(2)
print "h['a'] : "; p h['a']

$ze = Hash.new( Hash.new(2) )
print '$ze[:do_not_exist]    : '; p $ze[:do_not_exist]
print '$ze[:do_not_exist][5] : '; p $ze[:do_not_exist][5]

$ze = Hash.new{|hash, key| hash[key] = {}}
$ze['test'] = {0=> 'a', 1=>'b', 3 => 'c'}
$ze[5][0] = 'one'
$ze[5][1] = "two"
print '$ze : '; p $ze 
```

执行 ：

```
$ ruby -w t.rb
h['a'] : 2
$ze[:do_not_exist]    : {}
$ze[:do_not_exist][5] : 2
$ze : {"test"=>{0=>"a", 1=>"b", 3=>"c"}, 5=>{0=>"one", 1=>"two"}} 
```

# java - 是否需要 try catch 块

> ID：14026912
> 
> 赞同：0
> 
> 时间：2012-12-25T01:07:50.900
> 
> 标签：java

我正在从不同的 Windows 服务器获取 directoreis 和文件的总字节数，但不确定我是否需要在这 2 种方法中使用 try catch 块？请帮忙

```
private void retrieveTotalBytes(File sourceFile)
{
    File[] files = sourceFile.listFiles();
    for(File file : files)
    {
        if(file.isDirectory()) 
            retrieveTotalBytes(file);
        else totalBytes += file.length();
    }
}

private void copyFiles(File sourceFile, File targetFile) throws IOException
{
    if(sourceFile.isDirectory())
    {
        if(!targetFile.exists()) targetFile.mkdirs();

        String[] filePaths = sourceFile.list();
        for(String filePath : filePaths)
        {                                 
            File srcFile = new File(sourceFile, filePath);
            File destFile = new File(targetFile, filePath);

            copyFiles(srcFile, destFile);
        }
    }
    else
    { }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:15:00.197

我认为您不需要在这些函数内部，因为它们较低（假设客户端足够聪明，可以做出这些负责任的决定）。但是您可能会考虑在调用这些函数的更高级别上执行此操作。

例如 。. .

```
File data, destination;

try { copyFiles(data, destination); }
catch (IOException e) { . . . }

// and. . .

try { retrieveTotalBytes(data); }
catch (Exception e) { . . . }; 
```

. . . 但这取决于你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T01:42:44.080

你有几个选择。

1) 捕获和处理（需要在这个低级别进行日志记录）。

如果错误与代码的操作无关（可能不是），这才是真正的解决方案

2）作为应用程序特定的异常捕获并重新抛出。

这允许您在“ApplicationException”树中构建异常并将其与其他异常一起捕获。

3) 作为 RuntimeException 捕获并重新抛出。

由于您可能已经进行了所有检查以确保文件可读、目录可管理等，因此没有实际理由让它抛出错误。如果它确实抛出一个，您可能无法从中恢复。如果你不能，你最终会在堆栈中一直抛出“IOException”，这很愚蠢。

相反，您可以将这个“不可恢复”作为 RuntimeException 重新抛出并在非常高的级别捕获它，然后弹出一个对话框并崩溃。

4) 抛出普通的 IO 异常并将问题向上传递。

这并不能解决问题，它只是将它移到您的应用程序中（并允许 IOException 渗入您的代码库）。

# javascript - SuperScrollarama javascript滑动div greensock

> ID：14026913
> 
> 赞同：-4
> 
> 时间：2012-12-25T01:07:54.840
> 
> 标签：javascript, jquery, gsap

我希望有人能给我一些帮助。为什么#slide 标签没有滑入？当我在其中添加#sliding 标签时，它会阻止其余的 superscrollorama 标签工作。我错过了什么？我是 javascript 新手，所以任何帮助将不胜感激！这是我正在处理的网站的链接。thesurrealstudio.com/new-site

谢谢！

```
 $(document).ready(function() {
        // This example adds a duration to the tweens so they are synced to the scroll position

        var controller = $.superscrollorama();

        // amount of scrolling over which the tween takes place (in pixels)
        var scrollDuration = 200; 

        // individual element tween examples

        controller.addTween('#fade-it', TweenMax.from( $('#fade-it'), .5, {css:{opacity: 0}}), scrollDuration);
        controller.addTween('#fly-it', TweenMax.from( $('#fly-it'), .25, {css:{right:'1000px'}, ease:Quad.easeInOut}), scrollDuration);
        controller.addTween('#spin-it', TweenMax.from( $('#spin-it'), .25, {css:{opacity:0, rotation: 720}, ease:Quad.easeOut}), scrollDuration);
        controller.addTween('#scale-it', TweenMax.fromTo( $('#scale-it'), .25, {css:{opacity:0, fontSize:'20px'}, immediateRender:true, ease:Quad.easeInOut}, {css:{opacity:1, fontSize:'240px'}, ease:Quad.easeInOut}), scrollDuration);
        controller.addTween('#smush-it', TweenMax.fromTo( $('#smush-it'), .25, {css:{opacity:0, 'letter-spacing':'30px'}, immediateRender:true, ease:Quad.easeInOut}, {css:{opacity:1, 'letter-spacing':'-10px'}, ease:Quad.easeInOut}), scrollDuration); // 100 px offset for better timing
        controller.addTween('#slide', TweenMax.from( $('#slide'), .5, {css:{margin-left: 0}}), scrollDuration);

        // set duration, in pixels scrolled, for pinned element
            var pinDur = 4000;
            // create animation timeline for pinned element
            var pinAnimations = new TimelineLite();
            pinAnimations
                .append(TweenMax.from($('#pin-frame-pin h2'), .5, {css:{marginTop:0}, ease: Quad.easeInOut}))
                .append([
                    TweenMax.to($('#slide'), .5, {css:{marginLeft:0}}),
                    TweenMax.to($('#services/portfolio'), .5, {css:{marginLeft:'100%'}})
                ], .5)

    }); 
```

HTML

```
<div id="about/services" class="divider"></div>

        <!--start of services page  --> 
        <section id="slide" class="pin-frame">

            <div class="grid wfull">

                <div class="row">

                    <div class="c12">
                    <header>

                    </header>
                    </div>

                </div>

                  <div class="row">

                    <div class="c4">

                    </div>

                    <div class="c4 s4 end">

                    </div>

                </div>

                <div class="row">

                    <div class="c12">

                    </div>

                </div>

                <div class="row">

                    <div class="c12">
                    <footer>

                    </footer>
                    </div>
                </div>

            </div>

        </section>
        <!--end of services page   --> 

        <div id="services/portfolio" class="divider"></div>

        <!--start of portfolio page  --> 
        <section id="portfolio-page" class="section">

            <div class="grid wfull" class="section">

                <div class="row">

                    <div class="c12">
                    <header>

                    </header>
                    </div>

                </div>

                  <div class="row">

                    <div class="c4">

                    </div>

                    <div class="c4 s4 end">

                    </div>

                </div>

                <div class="row">

                    <div class="c12">

                    </div>

                </div>

                <div class="row">

                    <div class="c12">
                    <footer>

                    </footer>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:05:44.357

尝试从它的源加载 jquery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

你也有这一行：

```
controller.addTween('#slide', TweenMax.from( $('#slide'), .5, {css:{margin-left: 0}}), scrollDuration); 
```

使用单个配额将 margin-left 更改为 'margin-left'：

```
controller.addTween('#slide', TweenMax.from( $('#slide'), .5, {css:{'margin-left': 0}}), scrollDuration); 
```

# javascript - JavaScript 中光纤的客户端实现。

> ID：14026927
> 
> 赞同：6
> 
> 时间：2012-12-25T01:10:13.417
> 
> 标签：javascript, meteor, coroutine, fibers, node-fibers

AFAIK meteorjs 使用[node-fibers](https://github.com/laverdet/node-fibers)，但他们的 github 页面声明它仅是服务器端和 v8（或者不是？）。

1.  meteorjs 是如何在客户端实现非阻塞、*同步的*api 的 **？**

2.  它是否与chrome以外的其他浏览器兼容？

如果有人能给我指出纤维的纯 JS 实现，或者解释它们是如何工作的（他们有自己的事件循环吗？），我将不胜感激。

任何指向工作客户端光纤实现的 github 项目的链接也将不胜感激！

毕竟是圣诞节 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T01:13:28.167

node-fibers 项目是Node.js~~的仅限 Windows 的~~服务器端扩展，用 C++ 实现。您可能永远不会在网络浏览器中看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T03:26:06.150

JavaScript 是单线程的。如果要实现非阻塞 I/O，则必须实现节点样式的消息循环和异步 I/O 库。默认情况下，所有客户端 I/O 都是同步的，尽管 Meteor 和其他库提供回调。

是的，Meteor 的客户端实现在 Chrome 之外的多个浏览器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T12:11:36.877

尝试 JSCEX ( [Windjs](https://github.com/JeffreyZhao/wind) )

Wind.js 是一个高级库，它使我们能够使用纯 JavaScript 控制流进行异步编程（以及更多），而无需额外的预编译步骤。

它适用于服务器端和客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T17:08:38.523

我相信在服务器端，一切都与 Meteor 完全同步，这要归功于 MiniMongo。因此不需要异步回调，或者更准确地说，Meteor 不需要等待`update`来自服务器的回调继续执行下一条指令，这要归功于 MiniMongo 同步响应。

我还没有通过查看源代码来验证我刚才所说的一切，但我无法想象它会如何以不同的方式工作。

**编辑**

还没有深入研究源代码，但是[Meteor 指南的这一部分](http://guide.meteor.com/collections.html#mongo-collections)似乎朝着我想的方向发展。

# java - Primitive + "" 与 Wrapper.toString(primitive)

> ID：14026929
> 
> 赞同：1
> 
> 时间：2012-12-25T01:10:20.540
> 
> 标签：java, coding-style

当需要将原语转换为字符串时，例如传递给需要字符串的方法，基本上有两种选择。

举`int`个例子，给定：

```
int i; 
```

我们可以做以下之一：

```
someStringMethod(Integer.toString(i));
someStringMethod(i + ""); 
```

第一个是“正式”方法，第二个似乎有点“hack”。

当然，代码更少，更容易阅读“hack”恕我直言。
但是使用“hack”是“好”的编码风格吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T01:19:21.227

这不是一个好主意，但它不会是非常有害的。

在这两个示例`Integer.toString()`中，JVM 都调用了它（即使在第一种情况下不是直接调用）。

在第二个示例中，JVM 可能会构造两个字符串，然后生成连接的结果。根据优化，这可能会导致 0、1 或 2 个额外的字符串进行垃圾收集。

从代码编写的角度来看，第三个更短，但对于正在发生的事情也可能不太透明。

第二种方法在可读性方面的问题如下：

```
int i = 1, j = 2;
someStringMethod(i + j + "" + i + j + ""); 
```

产生：

```
someStringMethod(312); 
```

并不是

```
someStringMethod(33); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T01:27:50.617

将 * 转换为 String 的最佳方法是使用：

```
String.valueOf(x) 
```

它适用于实现的原始类型、包装类和对象`toString()`。

其中 x 是任何类型的基元或对象。如果为 null，则返回字符串“null”。

这是最好的原因，因为使用“+”操作数意味着字符串连接，加上“”意味着字符串实例化。如果您使用 ""+something 反编译一个类，您会看到编译器将其转换为多个操作。

"" 连接结果相同，`String.valueOf()`但它有点贵。性能差异可能可以忽略不计，但是当有更好的方法时，优秀的程序员不会编写 '"" + something' 来将某些内容转换为字符串，而这恰好是正确的方法:)。

对于数组，请查看[Arrays.toString()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)和 -better- [Arrays.deepToString()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)

> 但是使用“hack”是“好”的编码风格吗？

有时语法 hack 会使代码变得更好。但是上面的案例并不是真正的案例之一。"" 连接不被认为是好的代码。

一个有用的句法技巧的例子是双括号实例化：

```
List<String> list = new ArrayList<String>() {{
    add("foo");
    add("bar");
    add("baz");
}}; 
```

代替

```
List<String> list = new ArrayList<String>();
list.add("foo");
list.add("bar");
list.add("baz"); 
```

""+something 更像是一种代码味道，而不是提高可读性的 hack；任何有经验的人都会想到缺乏 API 和语言知识的 Java 开发人员。

其他有趣的“hacks”是流畅的 API（如 Mockito）、dsl 或 lambda4j 之类的东西，这是一个相当不错的 hack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:45:10.167

当使用 + 号形成字符串时，jvm 会创建一个中间字符串/字符串缓冲区对象来进行转换，这不是最佳方式。此外，+ 符号是左关联的，所以当用于像 *“”+1+2*这样的表达式时，将产生 12 而不是“3”。所以最好使用 String.toValue() 或 Type.toString()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-08T23:54:52.733

java中的连接符号是+。因此，您将结果转换 `(i + "")`为字符串，因为您在示例代码中将一个空字符串连接到一个数字。
这两种方法都很好，但我通常使用`String.valueOf(x);`

# ruby-on-rails - NilClass:Class 的未定义方法“model_name”。找不到操作“创建”

> ID：14026930
> 
> 赞同：1
> 
> 时间：2012-12-25T01:10:37.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我转到 时`http://localhost:3000/register_entries/new`，我收到此错误：`undefined method `model_name' for NilClass:Class`

下面是我的`_checkoutform.html.erb`。如果我将此行添加`<% @register_entry = RegisterEntry.new %>`到控制器的开头，则会出现表单，但是当我提交时，出现以下错误`The action 'create' could not be found for RegisterEntriesController`：

```
<%= form_for (@register_entry) do |f| %>
  <% if @register_entry.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@register_entry.errors.count, "error") %> prohibited this register from being saved:</h2>

      <ul>
      <% @register_entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :publisher %>
    <%= f.collection_select :publisher_id, Publisher.order(:name), :id, :name %>
  </div>
  <div class="field">
    <%= f.label :territory %>
    <%= f.collection_select :territory_id, Territory.order(:last_worked), :id, :number %>
  </div>
  <div class="field">
    <%= f.label "Checkout Date" %>
    <%= f.date_select :checkout %>
  </div>
  <!-- <div class="field">
    <%= f.label :checkin %><br />
    <%= f.date_select :checkin %>
  </div> -->
<!--   <div class="field">
    <%= f.label :notes %><br />
    <%= f.text_field :notes %>
  </div> -->
  <div class="actions">
    <%= f.submit "Checkout Territory" %>
  </div>
<% end %> 
```

这是我的`register_entries_controller.rb`：

```
class RegisterEntriesController < ApplicationController
    # GET /RegisterEntries
    # GET /RegisterEntries.json

    before_filter :authenticate_user!

    helper_method :sort_column, :sort_direction

    private
    def sort_column
        @register_entry.column_names.include?(params[:sort]) ? params[:sort] : "checkout"
    end

    def sort_direction
        %w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"
    end

    def index
        authorize! :index, @user, :message => 'Not authorized'
        @register_entries = RegisterEntry.order(sort_column + ' ' + sort_direction) #pluralized @register_entry

        respond_to do |format|
            format.html # index.html.erb
            format.json { render json: @register_entries }
        end
    end

    # GET /RegisterEntries/1
    # GET /RegisterEntries/1.json
    def show
        @register_entry = RegisterEntry.find(params[:id])
        @publishers     = Publisher.all

        respond_to do |format|
            format.html # show.html.erb
            format.json { render json: @register_entry }
        end
    end

    # GET /RegisterEntries/new
    # GET /RegisterEntries/new.json
    def new
        @register_entry = RegisterEntry.new
        authorize! :index, @user, :message => 'Not authorized'

        respond_to do |format|
            format.html # new.html.erb
            format.json { render json: @register_entry }
        end
    end

    # GET /RegisterEntries/1/edit
    def edit
        authorize! :index, @user, :message => 'Not authorized'
        @register_entry = RegisterEntry.find(params[:id])
    end

    # POST /RegisterEntries
    # POST /RegisterEntries.json
    def create
        authorize! :index, @user, :message => 'Not authorized'

        @register_entry = RegisterEntry.new(params[:register_entry])

        respond_to do |format|
            if @register_entry.save
        format.html { redirect_to @register_entry, notice: 'Register Entry was successfully created.' }
                format.json { render json: @register_entry, status: :created, location: @register_entry }
            else
                format.html { render action: "new" }
                format.json { render json: @register_entry.errors, status: :unprocessable_entity }
            end
        end
    end

    # PUT /RegisterEntries/1
    # PUT /RegisterEntries/1.json
    def update
        authorize! :index, @user, :message => 'Not authorized'

        @register_entry = RegisterEntry.find(params[:id])

        respond_to do |format|
            if @register_entry.update_attributes(params[:register_entry])
        format.html { redirect_to @register_entry, notice: 'Register Entry was successfully updated.' }
                format.json { head :no_content }
            else
                format.html { render action: "edit" }
                format.json { render json: @register_entry.errors, status: :unprocessable_entity }
            end
        end
    end

    # DELETE /RegisterEntries/1
    # DELETE /RegisterEntries/1.json
    def destroy
        authorize! :index, @user, :message => 'Not authorized'

        @register_entry = RegisterEntry.find(params[:id])
        @register_entry.destroy

        respond_to do |format|
            format.html { redirect_to register_entries_url }
            format.json { head :no_content }
        end
    end
end 
```

已经为此奋斗了几个小时。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:17:06.400

您将所有控制器操作方法设为私有，这意味着它们不能被称为操作。[请参阅 ActionController Rails 指南的方法和操作](http://guides.rubyonrails.org/action_controller_overview.html#methods-and-actions)部分的末尾。

# android - 在 EditText 末尾添加单位符号

> ID：14026932
> 
> 赞同：3
> 
> 时间：2012-12-25T01:10:56.627
> 
> 标签：android

我有一个 EditText 女巫是 numberDecimal 类型。我想在值的末尾加上单位符号（例如 m、km、kg、g）。我在 stackoverflow 上发现了很多帖子，告诉使用 TextWatcher 或 InputFilter，但我真正想要的是限制这个单位符号对用户不可编辑。

因此，当您在文本框中编辑值时，您无法移动课程来操作/删除符号。它基本上不是值的可编辑部分。

我确信这是可以实现的，但我不确定我需要编写多少自定义代码才能使其工作。是否有任何 SDK 支持？

伊斯马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:22:11.473

```
 <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_weight="0.70"
            android:gravity="center_horizontal"
            android:padding="4dip" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/browseurl"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginLeft="5dip"
                    android:imeOptions="actionGo"
                    android:textColor="#BCBCBC"
                    android:textSize="14dip"
                    android:typeface="serif" />

                <ImageButton
                    android:id="@+id/cross"
                    android:layout_width="25dip"
                    android:layout_height="25dip"
                    android:layout_alignParentRight="true"
                    android:layout_centerInParent="true"
                    android:background="@android:drawable/ic_menu_close_clear_cancel"
                    android:clickable="true"
                    android:focusable="false" />
            </RelativeLayout>
        </LinearLayout> 
```

将 ImageButton 替换为单位的文本框或图像按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T08:37:21.303

感谢您的提示。这是我的解决方案，我有一个左右两侧有 20dip 边距的线性布局。在布局内部，我有一个 EditText 和一个 TextViw。我在 EditText 上将权重设置为 1，以便它填充父视图中的任何剩余空间。

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="20dip"
    android:layout_marginRight="20dip"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/value_edittext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:inputType="numberDecimal"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/value_unit_symbol"
        android:layout_width="wrap_content"
        android:layout_height="25dip"
        android:text="kg"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout> 
```

# php - 在 PHP 中重新声明变量

> ID：14026934
> 
> 赞同：0
> 
> 时间：2012-12-25T01:12:00.433
> 
> 标签：php, variables

在重新分配变量之前是否需要清空变量？

例如，我有一个对象“用户”。

```
$random_user = new User(); 
```

如果我声明了几个 $random_users，对象将不会保留它的旧值，它会被完全重写，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T01:14:57.567

每次重新声明 $random_user 时，该值将被完全覆盖：

```
$random_user = new User();
$random_user = new User(); // entirely different object
$random_user = 10; // now an integer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T01:14:34.643

是的，您可以用新值“覆盖”变量。所有旧数据都将被遗忘。例如：

```
$var = 1;
echo $var; // Will output 1
$var = 2; // Overrules $var with 2, 1 will be dropped entirely
echo $var; // Will output 2 
```

放入变量中的对象也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:18:17.237

是的，您不需要在重新分配之前清空变量，只需重新分配它们，没有的对象`refCount`将被 php Garbage Collection 销毁。

```
$random_user = new User();
$random_user = new User(); 
$random_user = new User(); // the first two User object will be destroyed by GC 
```

# php - Phalcon git安装错误？

> ID：14026939
> 
> 赞同：1
> 
> 时间：2012-12-25T01:14:38.813
> 
> 标签：php, phalcon

在我的服务器上，我通过 git 成功安装了 phalcon 0.6.0 版。这些是我使用的步骤。

**git clone git://github.com/phalcon/cphalcon.git**

**cd cphalcon/构建**

**须藤 ./安装**

**重新启动网络服务器**

我尝试更新到 0.7.0 版本，所以我删除了原始文件夹并重新下载了 git 文件夹。我遵循相同的步骤，安装后我检查 phpinfo。它安装正确，但是安装了以前的版本（0.5.2）。

我尝试多次安装扩展，但它仍然给我旧版本。

有什么我做错了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:48:59.020

`phalcon.so`查找您周围是否有任何文件，并且使用它们而不是实际文件。很可能 0.5.2 位于您系统中的某个位置，由您的 Web 服务器引用，并且安装过程无法更新它。

```
locate phalcon.so 
```

注意：对于我的安装，它位于`/usr/lib/php5/20100525/phalcon.so`

检查您`php.ini`或您的`/etc/php/conf.d`文件夹以获取对扩展的引用。如果有一些删除它们。

使用

```
cd build
sudo ./install 
```

注意脚本输出，尤其是最后。它会告诉您扩展程序的安装位置。

记下文件夹并在 php.ini 文件中添加指令，然后重新启动 Web 服务器以使更改生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T17:26:06.127

您似乎在 CLI 上安装了 PHP 5.3，但在 Apache/Nginx 上安装了 PHP 5.4，请确保您的“phpize”命令指向 5.4：

```
[#] whereis phpize 
```

一旦知道正确的路径更改可执行文件的优先级，删除 PHP 5.3 或在 bash 控制台中添加别名：

```
[#] alias phpize=/path/to/5.4/phpize 
```

然后尝试再次运行 ./install

# ruby-on-rails - 我无法在 mac osx 10.8.2 上安装 sqlite3 gem

> ID：14026944
> 
> 赞同：5
> 
> 时间：2012-12-25T01:16:36.973
> 
> 标签：ruby-on-rails, ruby, macos, sqlite, rvm

我`bundle install`的不工作，我得到这个错误：

```
Installing sqlite3 (1.3.6) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /Users/Frank/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb --with-sqlite3-       include=/Users/Frank/include --with-sqlite3-lib=/Users/Frank/lib --with-sqlite3-dir=/Users/Frank/bin
checking for sqlite3.h... yes
checking for sqlite3_libversion_number() in -lsqlite3... yes
checking for rb_proc_arity()... yes
checking for sqlite3_initialize()... yes
checking for sqlite3_backup_init()... yes
checking for sqlite3_column_database_name()... no
checking for sqlite3_enable_load_extension()... no
checking for sqlite3_load_extension()... no
checking for sqlite3_open_v2()... yes
checking for sqlite3_prepare_v2()... yes
checking for sqlite3_int64 in sqlite3.h... yes
checking for sqlite3_uint64 in sqlite3.h... yes
creating Makefile 
```

我认为这与 libsql-dev 不起作用有关。但后来我明白了

```
make
compiling backup.c
In file included from ./sqlite3_ruby.h:51,
             from backup.c:3:
./backup.h:7: error: expected specifier-qualifier-list before ‘sqlite3_backup’
backup.c: In function ‘initialize’:
backup.c:63: error: ‘sqlite3_backup’ undeclared (first use in this function)
backup.c:63: error: (Each undeclared identifier is reported only once
backup.c:63: error: for each function it appears in.)
backup.c:63: error: ‘pBackup’ undeclared (first use in this function)
backup.c:77: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c: In function ‘step’:
backup.c:101: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c:102: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c: In function ‘finish’:
backup.c:115: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c:116: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c:117: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c: In function ‘remaining’:
backup.c:133: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c:134: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c: In function ‘pagecount’:
backup.c:149: error: ‘sqlite3BackupRuby’ has no member named ‘p’
backup.c:150: error: ‘sqlite3BackupRuby’ has no member named ‘p’
make: *** [backup.o] Error 1

Gem files will remain installed in /Users/Frank/gems/gems/sqlite3-1.3.6 for inspection.
Results logged to /Users/Frank/gems/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out

An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling. 
```

我今天开始随机使用它，没有它我无法运行我的 Rails 应用程序。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T13:56:31.713

最近有这个问题。必须打开 XCode 工具并接受服务条款。然后一切正常。（确保先安装了 XCode）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:10:59.387

Himanshu 的链接解决了我的问题。

[https://github.com/luislavena/sqlite3-ruby/issues/20](https://github.com/luislavena/sqlite3-ruby/issues/20)

# c# - SQLiteConnection 是否设置在事务内部？

> ID：14026948
> 
> 赞同：1
> 
> 时间：2012-12-25T01:17:51.010
> 
> 标签：c#, sqlite, resharper, windows-store-apps, sqlite-net

这可行，但 Resharper在注释行上说“*访问已处置的闭包”*

```
using (var db = new SQLiteConnection(SQLitePath))
            {
                db.CreateTable<Locations>();

                db.RunInTransaction(() =>
                {
                    db.Insert(new Locations // Resharper: "Access to disposed closure" ???
                    {
                        PersonId = personId,
                        Latitude = latitude,
                        Longitude = longitude,
                        SentTimeUTC = sentTimeUTC,
                        ReceivedTimeLocal = receivedTimeLocal,
                        CivicAddress = civicAddress
                    });
                });
            } 
```

这种替代方法也有效，但与 Resharper 的手指摆动相同：

```
 var db = new SQLiteConnection(SQLitePath);
    {
        db.CreateTable<Locations>();

        db.RunInTransaction(() =>
        {
        　　　　db.Insert(new Locations // this works, although Resharper warns: "Access to disposed closure" ???
               {
               　　　　PersonId = personId,
                      Latitude = latitude,
                      Longitude = longitude,
                      SentTimeUTC = sentTimeUTC,
                      ReceivedTimeLocal = ReceivedTimeLocal,
                      CivicAddress = civicAddress
              　});
        });
    }
    db.Dispose(); 
```

它们都有效，所以我想这并不重要，但是一种方式比另一种方式更可取吗？有没有办法安抚 Resharper 并仍然完成工作？

## 更新

Donal 所说的似乎是明智的，但在 xaction 中的 Insert 语句中，我仍然收到 Resharper “潜在代码质量问题”的警告：

```
public void InsertLocationRecord(string personId, double latitude, double longitude,
    DateTime sentTimeUTC, DateTime receivedTimeLocal, string civicAddress) 
{
    Locations locs = new Locations { PersonId = personId,
                                     Latitude = latitude,
                                     Longitude = longitude,
                                     SentTimeUTC = sentTimeUTC,
                                     ReceivedTimeLocal = receivedTimeLocal,
                                     CivicAddress = civicAddress
                                   };

    using (var db = new SQLiteConnection(SQLitePath))
    {
        db.CreateTable<Locations>();

        db.RunInTransaction(() =>
                                {
                                    db.Insert(locs); // Still get, "Access to disposed closure" on this line.
                                });
    }
} 
```

也许我以错误的方式重构问题？我想这与以前的方式并没有太大的不同；如何确保 locs 实例已处理？或者这不是这里的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T09:02:44.297

问题是您`Locations`在中间创建了一个自定义子类，它会拾取作为当前上下文的一部分不需要的各种东西，而 ReSharper 正在接受这一点（并且无法证明它不会以某种方式逃脱）。最简单的修复方法实际上是添加一个构造函数（或多个构造函数，如果需要），`Locations`以允许您使用所有正确的值实例化它而无需捕获闭包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T04:52:17.703

**第 1 步：** 假设您的 Location 类中有这样的代码。

```
class Locations { 
    int PersonId;
    int Latitude;
    int Longitude;
    int SentTimeUTC;
    int ReceivedTimeLocal;
    int CivicAddress;

    // Functions;

    // {
    // Disposable resource
    // }
    public Locations (latitude,longitude,sentTimeUTC,receivedTimeLocal,civicAddress)
    {
        PersonId = personId;
        Latitude = latitude;
        Longitude = longitude;
        SentTimeUTC = sentTimeUTC;
        ReceivedTimeLocal = receivedTimeLocal;
        CivicAddress = civicAddress;
    };
}; 
```

像这样将您的课程更改为 IDisposable 课程。

```
class Locations : IDisposable { 
    int PersonId;
    int Latitude;
    int Longitude;
    int SentTimeUTC;
    int ReceivedTimeLocal;
    int CivicAddress;

    // Functions;

    // {
    // Disposable resource
    // }
    public Locations (latitude,longitude,sentTimeUTC,receivedTimeLocal,civicAddress)
    {
        PersonId = personId;
        Latitude = latitude;
        Longitude = longitude;
        SentTimeUTC = sentTimeUTC;
        ReceivedTimeLocal = receivedTimeLocal;
        CivicAddress = civicAddress;
    }

    public void Dispose() {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing) {
        if (disposing) {
            // Free your disposable resources here
            base.Dispose(disposing);
        }
    }
}; 
```

**第2步：** 然后将您的调用更改为原始代码

```
Locations locs = new Locations { PersonId = personId,
         Latitude = latitude,
         Longitude = longitude,
         SentTimeUTC = sentTimeUTC,
         ReceivedTimeLocal = receivedTimeLocal,
         CivicAddress = civicAddress
       };
using (var db = new SQLiteConnection(SQLitePath))
{
db.CreateTable<Locations>();

db.RunInTransaction(() =>
    {
        db.Insert(locs); // Still get, "Access to disposed closure" on this line.
    });
} 
```

到

```
using (Locations locs = new Locations { PersonId = personId,
         Latitude = latitude,
         Longitude = longitude,
         SentTimeUTC = sentTimeUTC,
         ReceivedTimeLocal = receivedTimeLocal,
         CivicAddress = civicAddress
    }) {
    using (var db = new SQLiteConnection(SQLitePath))
    {
    db.CreateTable<Locations>();

    db.RunInTransaction(() =>
        {
            db.Insert(locs); // Still get, "Access to disposed closure" on this line.
        });
    }
} 
```

# encoding - 在移动到前变换和 BWT 后有效地应用游程变换？

> ID：14026952
> 
> 赞同：0
> 
> 时间：2012-12-25T01:18:36.427
> 
> 标签：encoding, compression, transformation, run-length-encoding, burrows-wheeler-transform

我是编码新手，所以我试图了解基础知识。我遇到了一个描述无损文本压缩技术的文档，在这个文档中，有一张图说明了他们的压缩是如何工作的。它是这样工作的：

```
Source -> BWT -> MTF -> RLT -> Proprietary Entropy Encoder 
```

我不明白为什么他们会在 Move to Front Transform 之后使用 Run-Length Transform，这对我来说似乎效率不高。据我了解，MTF 本身不会产生很多运行，因此使用 RLT 后记没有用。

一些解释将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:12:06.850

BWT 之后的 MTF 的目标是缩小符号范围，这有利于熵编码。MTF 用它们的等级替换符号，由于 BWT 生成的重复，它们通常很小。此后可能会应用零长度编码，因为 MTF 可能会产生大量 0（这只是 RLE 的一种特殊情况，其中只有 0 的运行按长度编码）。

查看[https://github.com/flanglet/kanzi-cpp](https://github.com/flanglet/kanzi-cpp)以获取实现示例。您可以使用带或不带 MTF+ZLE 的 Block 编解码器运行 BlockCompressor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T19:27:51.060

它效率不高。

这可能是关于 BWT 的旧论文。当时，使用 RLE（运行长度编码器）是提高速度的常用技巧。RLE，顺便说一句，不仅在 BWT 之后使用，而且在之前使用，以加快 BWT 阶段。相同的逻辑可以应用于熵编码器，但不太可能提供同样多的好处。

如今，这个技巧已经完全过时了。在 BWT 之前，您可能会发现某种 LZP 预处理，特别是对于长距离匹配（超出块大小），在提高速度方面与 RLE 的意图大致相同，但更强大。MTF 也被完全取代，因为它过于 CPU 密集，而且其成本效率不高。

# scala - V <: Vector[V] 在scala中是什么意思？

> ID：14026957
> 
> 赞同：4
> 
> 时间：2012-12-25T01:21:18.443
> 
> 标签：scala

嗨，我遇到了这段代码，但无法理解。令人困惑的地方是“V <: Vector[V]”，这意味着 V 是 Vector[V] 的子类型？这里非常混乱。

```
trait Vector[V <: Vector[V]] { this: V =>
  def +(other: V): V
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T06:32:56.080

它被称为[F 有界类型多态性](http://www.cs.utexas.edu/~wcook/papers/FBound89/CookFBound89.pdf)和

> 当有人试图解决面向对象语言中的一个常见抽象问题时，通常会尝试：如何定义一个多态函数，尽管它是根据超类型定义的，但当传递某个子类型的值时，它总是返回一个值与其参数相同的子类型。

[（摘自Kris Nuttycombe](https://stackoverflow.com/users/390636/kris-nuttycombe)最近的一篇博文“ [F-Bounded Type Polymorphism Considered Tricky](http://logji.blogspot.com/2012/11/f-bounded-type-polymorphism-give-up-now.html) ” ）

另请参阅这个 SO 问题：[泛型中的“递归类型绑定”是什么意思？](https://stackoverflow.com/questions/7385949/what-does-recursive-type-bound-in-generics-mean)

# python - Python从列表中的项目中提取单词/令牌计数？

> ID：14026958
> 
> 赞同：0
> 
> 时间：2012-12-25T01:21:45.480
> 
> 标签：python

我有一个关于获取列表中项目字数的最佳方法的问题。

我在列表中索引了 400 多个项目。它们有不同的长度。例如，如果我枚举，那么我会得到：

```
for index, items in enumerate(my_list):
    print index, items

0 fish, line, catch, hook
1 boat, wave, reel, line, fish, bait
.
.
. 
```

每个项目将被写入 csv 文件的单独行中。我想要相应的字数来补充相邻列中的文本。我可以使用 Excel 很好地找到单词/标记计数，但我希望能够在 Python 中执行此操作，因此我不必在程序之间来回切换来处理我的数据。

我确信有几种方法可以做到这一点，但我似乎无法拼凑出一个好的解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T03:48:39.617

正如评论中发布的那样，您的目标不是很清楚，但是如果要打印一个每行一个单词以及每个单词的长度的csv文件，

```
import csv
with open(filename, 'w') as outfile:
    writer = csv.writer(outfile)
    writer.writerow(['Word', 'Length'])
    for word in mylist:
        writer.writerow([word, str(len(word))]) 
```

如果我在这里误解了，实际上你所拥有的是一个字符串列表，其中每个字符串都包含一个逗号分隔的单词列表，那么你想要做的是：

```
import csv
with open(filename, 'w') as outfile:
    writer = csv.writer(outfile)
    writer.writerow(['Word', 'Length'])
    for line in mylist:
        for word in line.split(", "):
            writer.writerow([word, str(len(word))]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:43:23.907

如果我理解正确，您正在寻找：

```
import csv

words = {}
for items in my_list:
    for item in items.split(', '):
        words.setdefault(item, 0)
        words[item] += 1

with open('output.csv', 'w') as fopen:
    writer = csv.writer(fopen)
    for word, count in words.items():
        writer.writerow([word, count]) 
```

这将在一个列中写入一个包含唯一单词的 CSV，并在下一列中写入该单词的出现次数。

这是你要求的吗？

# perl - Slash in Dancer token

> ID：14026962
> 
> 赞同：1
> 
> 时间：2012-12-25T01:22:29.823
> 
> 标签：perl, dancer

I would like to interpret, for example a request like this:

```
GET /my/path?foo=bar 
```

just as if it was actually rewritten to e.g.

```
GET /?path=/my/path&foo=bar 
```

* * *

Now I thought I'll be able to achieve this using following route, and use `param('path')` along with `param('foo')` and the likes, e.g.:

```
get '/:path' => sub {
    return printf "...so you want %s, thinking that best foo is %s...",
        param('path'),
        param('foo');
} 
```

but I get 404 -- It seems that the `:path` part cannot contain slashes.

Can I achieve this with routes at all? Or I'm looking at the wrong direction (I'm fresh new to Dancer)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:40:56.473

您可能希望通过正则表达式而不是令牌来匹配路由。然后将匹配项存储在可以由关键字返回的特殊数组中`splat`。但是，您`path`将无法通过 访问`param('path')`。

代码：

```
get qr{/([^?]*)} => sub {
    my ($path) = splat;
    return printf "...so you want %s, thinking that best foo is %s...",
        $path,
        param('foo');
} 
```

# vb.net - Google Calendar API vb .net 2010, reach the event time of a calendar event

> ID：14026963
> 
> 赞同：1
> 
> 时间：2012-12-25T01:22:40.783
> 
> 标签：vb.net, google-calendar-api

I am working on a custom notepad application that supports the Google Calendar API and have been on a dead end for some time now. The problem is that I try (using the standard code) to update / adjust an existing event. But in VB I only manage to get an AtomFeed and that allows everything but changing the Event date / time (as far as I could see / Google). The code:

```
EventQuery myQuery = new EventQuery(feedUrl);
myQuery.Query = "Tennis";
EventFeed myResultsFeed = myService.Query(myQuery);
if (myResultsFeed.Entries.Count > 0) {
AtomEntry firstMatchEntry = myResultsFeed.Entries0];
String myEntryTitle = firstMatchEntry.Title.Text; 
```

In this code the query returns an EventFeed type that contains the start / end time of a single occuring event easy accessible through the When class. However if I translate that code to VB instead of C# (I created my notes application in VB.NET 2010) the service.Query method only returns an AtomFeed. I can not seem to acces the Event Start / End date from the AtomEntry, nor have I found a way to parse or convert the Atom type to the Event type classes... My current code:

```
Dim myResultsFeed As AtomFeed = service.Query(myQuery)
Dim firstMatchEntry As AtomEntry

If (myResultsFeed.Entries.Count > 0) Then
firstMatchEntry = myResultsFeed.Entries(0)
firstMatchEntry.Title.Text = updatedNote.Subject

'Would be available in the EventEntry class
'firstMatchEntry.times.add(New [When](gNote.GCalendarDate, endDate))
firstMatchEntry.Update() 
```

I have searched the net extensively. Any responses are very much appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:15:00.417

我不确定我是否理解您的问题，但如果您想从 vb.net 更新您的开始和结束时间，您首先必须清除现有时间并添加一个新时间，就好像您会使用创建事件一样。以下是代码。

>

> ```
>  Dim srvce As New Google.GData.Calendar.CalendarService("gCal")
>        Dim query As New FeedQuery
>        Dim evntEntry As Google.GData.Calendar.EventEntry
> 
>        query.Uri = New Uri(eventSelfURI) 'SELF URI IS THE URI FOR GOOGLE CALENDAR FEED
> 
>        srvce.setUserCredentials("<<EMAIL>>", "<<PASSWORD>>")
>        Dim calfeed As AtomFeed
>        calfeed = srvce.Query(query)
> 
>        evntEntry.Title.Text = newTitle
>        evntEntry.Content.Content = newContent
> 
>        'SETTING UP THE START AND END TIME - FIRST CLEARING EXISTING TIMING AND ADDING NEW
>        evntEntry.Times.Clear() 'THIS WILL CLEAR THE EXISTING TIME
>        Dim newTime As New [When]()
>        newTime.StartTime = newStartDateTime
>        newTime.EndTime = newEndDateTime
>        evntEntry.Times.Add(newTime)
> 
>        evntEntry.Update() 
> ```

希望这会帮助你。

# node.js - calling child_process.exec in Node as though it was executed in a specific folder

> ID：14026967
> 
> 赞同：1
> 
> 时间：2012-12-25T01:23:55.563
> 
> 标签：node.js, command-line, node-modules

I'm using the following to execute a CLI command in nodeJS

```
var cp = require('child_process');
cp.exec('foocommand', callback); 
```

However, the foocommand is executing in the current folder node is running from. How can I make it execute as though it is being invoked from a different folder?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T07:49:52.900

它在[文档](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)中：

```
var cp = require('child_process');
cp.exec('foocommand', { cwd: 'path/to/dir/' }, callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:09:44.213

不是一个完全的专家，但如果它是一个 cli，那么你希望能够使用 stdin 女巫在 process.exec 中不可用。也许你想看看是否有 cli 的可编程接口？

# mysql - Is it possible to simplify this SQL statement with multiple subqueries and JOINs

> ID：14026968
> 
> 赞同：0
> 
> 时间：2012-12-25T01:23:54.580
> 
> 标签：mysql, sql, database

I've spent a couple of days creating this rather complicated SQL statement, and it now gives me exactly what I want. Now I'm wondering if there is a better/simpler way to do it. Also MySQL wont let me CREATE VIEW on this statement

```
 SELECT name, a.user, liste, c.order, total_1kr, total_5kr, total_8kr, total_10kr, total_paid, differens, sbdato, spaid, sbreg, sfdato, sforbrug, sfreg
 FROM (SELECT t.user, t.paid AS spaid, t.dato AS sbdato, t.registrant AS sbreg FROM( 
    SELECT user,MAX(dato) AS maksdato
    FROM g_kiosk_f WHERE paid!=0
    GROUP BY user) AS x 
    JOIN g_kiosk_f AS t ON x.user =t.user
    AND x.maksdato = t.dato) AS a 
 JOIN (SELECT s.user, (s.1kr+(s.5kr)*5+(s.8kr)*8+(s.10kr)*10) AS sforbrug, s.dato AS sfdato, s.registrant AS sfreg FROM( 
    SELECT user,MAX(dato) AS maksdato
    FROM g_kiosk_f WHERE 1kr!=0 OR 5kr!=0 OR 8kr!=0 OR 10kr!=0
    GROUP BY user) AS y 
    JOIN g_kiosk_f AS s ON y.user=s.user
    AND y.maksdato=s.dato) AS b
 JOIN (SELECT t1.name, t2.user, t1.liste, t1.order, sum( t2.1kr ) AS total_1kr, sum( t2.5kr ) *5 AS total_5kr, sum( t2.8kr ) *8 AS total_8kr, sum( t2.10kr ) *10 AS total_10kr, sum( t2.paid ) AS total_paid, ( sum( t2.1kr ) + sum( t2.5kr ) *5 + sum( t2.8kr ) *8 + sum( t2.10kr ) *10 - sum( t2.paid )) AS differens
    FROM g_kiosk_users AS t1
    INNER JOIN g_kiosk_f AS t2 ON t1.nr = t2.user
    GROUP BY t2.user
    ORDER BY t1.name ASC) AS c
 ON a.user=b.user AND a.user=c.user 
```

I have a table 'g_kiosk_f' containing id (user), date (dato), 5 kinds of transactions (1kr, 5kr, 8kr, 10kr, and paid) a cashier (registrant). Another table, 'g_kiosk_users', contains name and id (nr). I want a result set showing

1.  the date, registrant and amount of newest transaction where paid!=0
2.  the date, registrant and amount of newest transaction where 1kr!=0, 5kr!=0, 8kr!=0 or 10kr!=0
3.  the total difference of sum(1kr+5kr+8kr+10kr) and sum(paid)

So the result should look something like

```
Name | id | difference | newest paid date | newest paid registrant | newest paid amount | newest kr date | newest kr registrant | newest kr amount | 
```

In the above I've included the numbers needed to do the difference calculation by hand, because it was needed at some point, but is now obsolete. Does any of this even make sense?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:59:22.997

似乎应该可以像这样重写您的查询：

```
SELECT t1.name AS name, a.user AS user, t1.liste, t1.order,
       SUM(t2.1kr) AS total_1kr, SUM(t2.5kr) * 5 AS total_5kr,
       SUM(t2.8kr) AS total_8kr, SUM(t2.10kr) * 5 AS total_10kr,
       SUM(52.paid) AS total_paid,
       SUM(t2.1kr + 5 * tt.5kr + 8 * t2.8kr + 10 * t2.10kr)
       -SUM(t2.paid) AS differens
       a.dato AS sbdato, a.paid AS spaid, a.registrant as sbreg,
       b.dato as sfdato,
       (b.1kr+(b.5kr)*5+(b.8kr)*8+(b.10kr)*10) AS sforbrug,
       b.registrant AS sfreg
FROM g_kiosk_f AS a
INNER JOIN (SELECT user, MAX(dato) FROM g_kiosk_f
            WHERE paid != 0
            GROUP BY user) AS a2
ON a.user = a2.user AND a.dato = a2.dato
INNER JOIN g_kiosk_f as b  ON b.user = a.user
INNER JOIN (SELECT user, MAX(dato) FROM g_kiosk_f
            WHERE  1kr!=0 OR 5kr!=0 OR 8kr!=0 OR 10kr!=0
            GROUP BY user) AS b2
ON b.user = b2.user AND b.dato = b2.dato
INNER JOIN g_kiosk_f as t2 ON t2.user = a.user
INNER JOIN g_kiosk_users as t1 ON t1.nr = t2.user
GROUP BY a.user
ORDER BY name ASC 
```

# php - Remove URL file ending (.php , .js , .asp etc)

> ID：14026969
> 
> 赞同：1
> 
> 时间：2012-12-25T01:24:01.757
> 
> 标签：php, html

I have a question about removing the ending of a file in the url bar (the .something like `.php, .html, .js, .asp` part). My goal is such that whenever somebody is typing in the url something like `www.123.com/a` where the file is, let's say a php file( so it's `a.php` ) so that people can type in **www.123.com/a** instead of **www.123.com/a.php**. How do I fix this?

Is there some unique way to save files so that they are saved and can be called via the url just by its name? In my case, if I call `www.123.com/a` it will say `"object not found error"` but it will work for `www.123.com/a.php`.

How do I hide the .something part of a file in the url bar?

Additional notes, I use `notepad` so whenever I save I type in `a.php` as save as for PHP or `a.js` for javascript files.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T01:26:39.073

通常这是通过以下方式完成的`.htaccess`：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule (.*) $1.php [QSA] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T01:28:32.210

使用.htaccess！

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

[https://stackoverflow.com/a/10469791/1533203](https://stackoverflow.com/a/10469791/1533203)

[http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T01:27:29.243

> 我该如何解决？是否有一些独特的方法来保存文件，以便它们被保存并可以通过 url 仅通过其名称调用？

不。

实际发生的是我们让 Web 服务器在请求到达 PHP 之前重新编写请求。

所以用户可能会输入（或被发送到）：

`http://stackoverflow.com/questions/14026969/remove-url-file-ending-php-js-asp-etc`

Apache（或您正在使用的任何 Web 服务器）然后会将其重写为：

`http://stackoverflow.com/index.php?page=questions&id=14026969&title=remove-url-file-ending-php-js-asp-etc`

我们可以从中处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-23T12:37:05.780

如果 repo 文件夹中存在机器人，则创建 .htaccess 文件并将该代码添加到其中

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

# linux - 移动宽带 Sierra Gobi 3000 驱动程序在内核 3.2 下编译

> ID：14026971
> 
> 赞同：0
> 
> 时间：2012-12-25T01:24:56.653
> 
> 标签：linux, mobile, broadband

我从这里得到了驱动程序：[Codeaurora](https://www.codeaurora.org/contribute/projects/gobi/)。

我能够在 2.6.32 内核下轻松构建驱动程序，但由于其他问题，我不得不将内核从后端端口压缩升级到 3.2。

现在我一切正常。只是我不能再构建这些驱动程序了。

我从某人那里找到了要添加到`.c`文件中的提示：

`#include <linux/module.h>`

但这对我不起作用。（我在这里读到：[https](https://www.codeaurora.org/forums/viewtopic.php?f=15&t=141) ://www.codeaurora.org/forums/viewtopic.php?f=15&t=141 ）

这是我在制作后得到的：

```
rm -rf *.o *~ core .depend .*.cmd *.ko *.mod.c .tmp_versions Module.* modules.order
make -C /lib/modules/3.2.0-0.bpo.3-amd64/build SUBDIRS=/home/user/Desktop/gobi/GobiSerial modules
make[1]: Entering directory `/usr/src/linux-headers-3.2.0-0.bpo.3-amd64'
  CC [M]  /home/user/Desktop/gobi/GobiSerial/GobiSerial.o
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c: In function ‘GobiOpen’:
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c:409: warning: format ‘%d’ expects type ‘int’, but argument 4 has type ‘long unsigned int’
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c: In function ‘GobiClose’:
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c:485: warning: format ‘%d’ expects type ‘int’, but argument 4 has type ‘long unsigned int’
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/user/Desktop/gobi/GobiSerial/GobiSerial.mod.o
  LD [M]  /home/user/Desktop/gobi/GobiSerial/GobiSerial.ko
make[1]: Leaving directory `/usr/src/linux-headers-3.2.0-0.bpo.3-amd64' 
```

如果你有任何线索请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T02:34:26.023

```
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c: In function ‘GobiOpen’:
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c:409: warning: format ‘%d’ expects type ‘int’, but argument 4 has type ‘long unsigned int’
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c: In function ‘GobiClose’:
/home/user/Desktop/gobi/GobiSerial/GobiSerial.c:485: warning: format ‘%d’ expects type ‘int’, but argument 4 has type ‘long unsigned int’ 
```

此错误是由 printk 没有正确的格式字符串引起的。在格式字符串的正确位置使用 %lu。

这可能在 2.6 中也被破坏了，但由于 3.x 内核中对编译器的设置更严格，因此可能作为警告而不是错误通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:19:35.527

鉴于您的编译器输出，我根本看不到构建失败的地方：

```
 LD [M]  /home/user/Desktop/gobi/GobiSerial/GobiSerial.ko
make[1]: Leaving directory `/usr/src/linux-headers-3.2.0-0.bpo.3-amd64' 
```

这对我来说似乎成功了。检查您是否有该文件`/home/user/Desktop/gobi/GobiSerial/GobiSerial.ko`，如果有，那么 volia，它有效。

令人惊讶的是，这里的其他人都回答了一些 printk() 格式，而很明显你没有编写这个驱动程序，而且很明显构建成功了。

你确定在`make install`之后`make`和之前跑了`modprobe GobiSerial`吗？

# ruby-on-rails - 如何使用 ruby oauth 发出多个请求？

> ID：14026972
> 
> 赞同：0
> 
> 时间：2012-12-25T01:25:30.307
> 
> 标签：ruby-on-rails, ruby, api, oauth

我能够获得使用 oauth 的访问令牌，但端点将每个请求的最大记录限制为 100。

我需要得到更多，并且想知道是否有一种简单/常见的方法可以做到这一点？

我想继续提出请求，直到我得到所有记录。例如：

```
@products = JSON.parse(@access_token.get("/api/rest/products?page=#{@n}&limit=100").body) 
```

我可能需要 10,000 多种产品。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:08:33.813

假设 @products 是一系列产品，您应该能够做到这一点

```
@products = []

(1..100).each do |page|
  @products << JSON.parse(@access_token.get("/api/rest/products?page=#{page}&limit=100").body)
end 
```

如果您不确切知道有多少页面或产品，除非 api 为您提供，否则您可以执行类似的操作以在没有更多产品时停止获取。

```
@products = []

# Assuming you never want more then 10.000
(1..100).each do |page|
  new_products = JSON.parse(@access_token.get("/api/rest/products?page=#{page}&limit=100").body)
  @products << new_products
  break if new_products.size < 100
end 
```

# css - 使用带有 css 边框的图像

> ID：14026974
> 
> 赞同：0
> 
> 时间：2012-12-25T01:25:51.380
> 
> 标签：css

我有这张我想用作边框的图像。

有 3 个内联列，其中有 2 个图像将中心列与左右列分开。

我可以使用 css`border`属性，但它看起来不正确，因为边框通过顶部、底部和中心的图像。可以做到这一点，如果可以，我该怎么做？

要记住的是，如果中心列增长，图像的高度也需要随之增长。我想远离在页面上设置高度。

### 编辑：

如果侧柱或中心柱增长**，**有没有办法让这些边界的高度增长？

![在此处输入图像描述](../Images/ae05426f963881adb9ca1afb0bb287de.png)

```
<style>
#col1{
display:inline;
float:left;
width:100px;
border:1px solid
}

#col2{
display:inline;
float:left;
width:300px;
border:1px solid
}

#col3{
display:inline;
float:left;
width:100px;
border:1px solid
}
</style>

<div id="col1">1</div>
<div id="col2">2</div>
<div id="col3">3</div> 
```

你现在看到的边界，它们应该被这个图像替换，但是图像应该随着最高的列而增长，无论是哪一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:40:10.070

### 要使用图像边框：

```
img {border-left: 1px solid #ccc;}
/* assuming that the image is right and you need a border to the left. */ 
```

* * *

### 从评论中，尝试了这个......

### HTML

```
<div class="wrap">
    <div class="left"><textarea></textarea></div>
    <div class="right">
        <img src="http://i.imgur.com/Dhu0f.jpg" alt="grow" />
    </div>
</div>​ 
```

### CSS

```
.wrap {overflow: hidden; height: auto;}
.left, .right {float: left; height: 100%;}
.right img {height: 100%; width: auto;}​ 
```

### 小提琴：http: [//jsfiddle.net/N2bVR/](http://jsfiddle.net/N2bVR/)

* * *

### 更新：

您的问题的最佳选择是，将边框图像作为背景图像运行到身体并在 y 轴上重复。

# ip-address - 术语“外部 IP 地址”和“公共 IP 地址”是同义词吗？

> ID：14026981
> 
> 赞同：3
> 
> 时间：2012-12-25T01:26:41.710
> 
> 标签：ip-address, terminology

外部IP地址与公共IP地址和内部IP地址与私有IP地址的含义有区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T01:35:22.267

是的，外部 IP 地址和公共 IP 地址是一回事，而内部或私有 IP 地址是您在防火墙/路由器中拥有的地址。例如，如果你有一个 BT 家庭集线器，它会给你的机器一个 IP 地址，比如 192.168.1.65。外部 IP 地址是您的路由器用来在属于路由器的防火墙之外发送/接收数据的地址。您可以通过访问这样的网站来查看您的 IP 地址： [http](http://whatismyipaddress.com/) ://whatismyipaddress.com/ （通常也可以在路由器管理的某些菜单中深入了解，但所有路由器都很漂亮不同的用户界面，所以很难解释在哪里/如何）

使用内部 IP 地址有两个原因：

1.  缺少“免费”IP 地址，所以如果每个人的计算机都有公共 IP 地址，我们就会玩音乐椅，但椅子比人少得多……通过拥有私有 IP 地址，许多计算机可以使用相同的私有 IP 地址，只有几个路由器连接到具有公共 IP 地址的实际公共网络。

2.  通过不允许直接路由到防火墙内的每台机器，可以提高安全性，因此通过在防火墙内拥有具有私有 IP 地址的机器 - 对于攻击者来说，防火墙内部只是一个大黑匣子。

您可以通过检查网卡上的设置找到自己的 IP 地址。在 Windows 中，[`ipconfig`](http://en.wikipedia.org/wiki/Ipconfig)将显示网卡及其 IP 地址。在 linux 系统[`ifconfig`](http://en.wikipedia.org/wiki/Ifconfig)上会显示相同类型的信息。

# android - android：如何使页面可滚动垂直也可点击？

> ID：14026982
> 
> 赞同：2
> 
> 时间：2012-12-25T01:26:50.617
> 
> 标签：android

我想在下面的 android 应用程序中创建页面：
，我正在考虑以下两种方法，但我不确定这些是否是好方法甚至启用方法。

你能给我有关方法的建议或给我更好的方法吗？

**[想做]**

1.  大约有10页。
2.  page 1 : index 页面
    上有列表。
    如果单击，您可以看到该页面。
3.  第 2 ~ 9 页：正常页面
    只是内容（图像或文本）

**[我正在考虑的方法]**

**方式 A. 制作 10 个布局**

布局（称为 layout1）用于索引页面。另一个布局（称为layout2~10）用于其他页面。如果点击 layout1 中的按钮，将显示布局（从 2 ~ 10）

**[问题]**我不知道如何以这种方式启用可滚动。

**方式 B. 制作 1 个 html（和 1 个布局包括一个 WebView）**

使用如下文本和链接创建索引：

```
 <link href="common.css" rel="stylesheet" type="text/css">
       ~~~~~~~
 <div class="pages"></div>  
    <a href="#p1">to page 1 </a>  
    <a href="#p2">to page 2 </a>  
       ~~~~~~~  
 </div> 
```

仅使用图像制作其他页面并命名这些部分

```
<div class="pages"></div>  
    <a name="p1">  
    <img src="imgP1.jpg">  
 </div>  
 <div class="pages"></div>  
    <a name="p2">  
       ~~~~~~~ 
```

这种方式有以下两个问题：

**[问题1]**如何为手机设置每一页的大小。

**[问题2]**在这种情况下，滚动不是水平的。我怎样才能改变它水平使用JavaScript？如果是这样，我该如何使用它，我应该使用哪个 JavaScirpt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T07:24:35.540

A 的方式通常会给你的应用程序一个更原生的外观和感觉，所以我会遵循这条路线。

使 page1 成为 ListView。如果列表中有更多项目适合屏幕，ListView 将自动允许滚动。

单击一个项目时，`onItemClick`将调用一个回调方法，您可以在其中打开显示第 2 到第 9 页的其他活动。

# javascript - 中心工地形式

> ID：14026990
> 
> 赞同：0
> 
> 时间：2012-12-25T01:29:05.797
> 
> 标签：javascript, html

使用嵌入式模板设置快速表单，但我想使表单居中并且不能。

```
<a name="form789985197" id="formAnchor789985197"></a>
<script type="text/javascript" src="http://fs8.formsite.com/include/form/embedManager.js?789985197"></script>
<script type="text/javascript">
EmbedManager.embed({
    key: "http://fs8.formsite.com/res/showFormEmbed?EParam=bJeI6E3QIKDSIfZNMjkSkRGOwQgdGLHi&789985197",
    width: "70%"
});
</script>
<!-- Notes: 
To control the width of the form, change width: "100%" to any number or percentage.
To pre-populate fields in the form or to use a custom resize callback, see http://fs8.formsite.com/documentation/embedded-form.html
--> 
```

如何使表格居中？

这是密码板[链接](http://codepad.org/A3EsMv1g)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T04:13:46.577

我从未使用过 Embedded Form，但我阅读了[文档](http://fs8.formsite.com/documentation/embedded-form.html)并设置了这个 jsFiddle [http://jsfiddle.net/roimergarcia/NxzCH/](http://jsfiddle.net/roimergarcia/NxzCH/)。看起来`a`标签只是一个标记，并且`iframe`在它之前插入了一个。解决方案是在 div 中扭曲`a`标签，并设置`text-align:center`为该 div：

```
<div id="formContainer" style='text-align: center;'>
    <a name="form789985197" id="formAnchor789985197"></a>
</div>
<script type="text/javascript" src="http://fs8.formsite.com/include/form/embedManager.js?789985197"></script>
<script type="text/javascript">
EmbedManager.embed({
    key: "http://fs8.formsite.com/res/showFormEmbed?EParam=bJeI6E3QIKDSIfZNMjkSkRGOwQgdGLHi&789985197",
    width: "70%"
});
</script> 
```

# java - 广度优先搜索

> ID：14026993
> 
> 赞同：1
> 
> 时间：2012-12-25T01:30:08.270
> 
> 标签：java, depth-first-search, breadth-first-search

我只是有一个简单的实现查询。

所以我使用以下代码制作了一个 BST：

```
class Node{

    int data;
    Node left=null;
    Node right=null;
    Node link=null;

    public Node(int d)
    {
        data=d;
    }

    public void append(int d)
    {
        Node n=this;
        Node nval=new Node(d);
        if(n==null)
        {
            n.data=d;
        }
        else
        {   boolean done=false;
            while(!done)
            {
                 if(n.data<=d)
                 {
                     if(n.left==null)
                     {
                         n.left=nval;
                         done=true;
                     System.out.println("Data Entered "+nval.data);
                     }
                     else
                     {
                         n=n.left;
                     }
                 }
                 else
                 if(n.data>d)
                 {
                     if(n.right==null)
                     {
                         n.right=nval;
                         done=true;
                     System.out.println("Data Entered "+nval.data);
                     }
                     else
                     {
                         n=n.right;
                     }
                 }
            }
        }
    }
} 
```

现在，我开始对其应用广度优先和深度优先搜索。我在这样做时遇到了真正的问题。

对于 DFS，我必须添加放置在堆栈上的当前节点的左右值，对吗？我将如何编程？我在使用链接列表时遇到问题？有人可以告诉我数据结构或指针应该如何吗？

BFS 也会发生同样的事情。如果我之前不清楚，我的主要问题是删除一个数组元素，然后用它的子元素替换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:59:19.350

[队列](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)(FIFO)通常适用于 BFS。它不一定是优先级队列，但通常是因为赋予权重很常见：

> *队列通常但不一定以 FIFO（先进先出）方式对元素进行排序。*例外情况包括优先级队列，它根据提供的比较器或元素的自然顺序对元素进行排序，以及对元素进行排序的 LIFO 队列（或堆栈） LIFO（后进先出）。无论使用何种排序，队列的头部都是将通过调用 remove() 或 poll() 删除的元素。在 FIFO 队列中，所有新元素都插入到队列的尾部。其他类型的队列可能使用不同的放置规则。每个 Queue 实现都必须指定其排序属性。

带有队列的 BFS 的基本“算法”规则：

1.  将初始状态放入`Q`（队列）
2.  带头`Q`（见`remove`）
3.  用所取的值做一些事情（例如`parent -> [child1, child2 ..]`）
4.  将第 3 步的任何结果附加到`Q`（参见`add`）的尾部
5.  返回步骤 #2 直到`Q`为空或达到其他最终情况

数组只是处理过去初始化和迭代的 PITA。“切片”和“调整大小”在 Java 中往往特别痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:36:12.680

对于 DFS(FILO)，你只需要使用一个堆栈

对于每个节点，先将其右孩子压入堆栈，然后再将左孩子压入堆栈

对于 BFS(FIFO)，你应该使用@pst 提到的队列

# python - Python 无法从命令行找到模块，但可以在 eclipse 中使用

> ID：14026996
> 
> 赞同：1
> 
> 时间：2012-12-25T01:30:38.190
> 
> 标签：python, import, python-2.7

我对 Python 很陌生并且有奇怪的错误。我在 Eclipse 和命令行中使用 Eclipse/PyDev 进行开发，使用 Python 2.7.3。我创建了几个模块，每个文件夹都有**init** .py 文件和其他源文件。当我尝试`__name__ == '__main__'`从 Eclipse 执行文件时，它工作正常，但是当我调用时从命令行

```
python models.py

Traceback (most recent call last):
  File "models.py", line 8, in <module>
    from database import uuid_generator
ImportError: No module named database 
```

看起来![在此处输入图像描述](../Images/1c4ce8cd639fc6dcc41c0b4ae88de197.png) 有人可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:11:58.973

`database`父目录不在`sys.path`（pythonpath）中。尝试`python -mdatabase.uuid_generator`在父（顶层）目录中运行脚本。或者创建一个包装脚本：

```
from database.uuid_generator import main

main() 
```

并将其放在`database`的父（顶级）目录中。当您调用此脚本时，它的目录会`sys.path`自动添加到其中，因此一切正常，无需修改`database`目录或`PYTHONPATH`环境变量中的模块。

只有顶层目录中没有`__init__.py`（不是 Python 包）需要在`sys.path`ie 中，`database`目录不应该在`sys.path`.

粗心的请参阅[陷阱](http://www.python.org/dev/peps/pep-0395/#traps-for-the-unwary)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T01:37:06.010

显然 Eclipse 已将数据库目录添加到模块搜索路径中。

要在不修改脚本的情况下获得相同的效果，您可以将数据库路径附加到 $PYTHONPATH 环境变量中。

如果您愿意修改脚本，您可以在导入相关模块后将其添加到顶部`sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))`

**未经测试的黑客**

**请参阅下面的 JFSebastian 的回答和评论**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:34:45.557

尝试改用这个

```
from uuid_generator 
```

编辑：确保 uuid_generator.py 与 models.py 位于同一文件夹中

# mysql - MySQL ORDER BY CASE / IF 相关问题

> ID：14026997
> 
> 赞同：1
> 
> 时间：2012-12-25T01:30:40.213
> 
> 标签：mysql, sql-order-by, relevance

我从未使用过 ORDER BY CASE 或 ORDER BY IF() ，我在互联网上找到的几个例子比帮助我尝试完成以下任务更令人困惑：

我有一个成员列表，我想通过在此成员列表中将用户排序更高（到顶部）来“奖励”用户的活动。

在我的示例中，我有一个名为“users”的 MySQL 表，其中包含 3 列：

```
 user_percentage     |     user_photo     |     user_lastlogin
    ----------------------------------------------------------
        12                      1                  1356389646
        42                      1                  1456549641
        37                      0                  1776389443
        84                      1                  1356535535
        56                      0                  1868689646
        66                      0                  1811189622
        71                      1                  1656779645 
```

*   “user_percentage”保存每个用户填写的所有配置文件字段的值 (0 - 100)。
*   如果用户上传了个人资料照片，则“user_photo”保留值（0 = false，1 = true）。
*   “user_lastlogin 保存他们上次访问的值（时间戳）。

这有点难以解释，但简单地说就是我想要的：

*   具有较高 user_percentage 值的用户应该在成员列表的顶部，但如果他没有 user_photo，那么他应该在成员列表中“下移”，如果他有一个旧的 user_lastlogin 时间戳，则将他列出更多在会员顺序下。

*   另外，我要防止的是用户已经注册，填写了所有个人资料字段（然后 user_percentage 值将 = 100）并上传了照片（然后 user_photo 将 = 1），但从那以后再也没有登录很长一段时间（所以他有一个很旧的 user_lastlogin = 时间戳），然后我希望这个用户在成员列表中向下移动。

我的问题是：这是否可能与 1 MySQL ORDER BY 语句有关？

假设 user_photo 的重要性仅为 30%，而 user_lastlogin 的重要性更高，而 user_percentage 的重要性也更高一些。

有任何想法吗？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T01:58:58.790

为了开始编写 SQL，您需要明确每个参数的价值。

您应该生成一个示例列表，然后将其转换为简单的计算，例如：

`(photo*timesincelogin*20)+(percentage)`

或基于 CASE 的语句，每个语句都有一个计算 - 即：

所有有照片的人，然后是所有没有照片的人，按`time*percentage`.

手动“向下移动一点”对于 SQL 命令的答案来说不够具体。

# javafx-2 - 多个场景（FXML 文件）在一个阶段同时运行？

> ID：14026999
> 
> 赞同：0
> 
> 时间：2012-12-25T01:30:59.840
> 
> 标签：javafx-2, scene, fxml

我试图弄清楚是否可以在一个阶段同时运行 2 个场景......

这是我有两个场景的场景，我使用borderPane布局；我想将第一个场景放在布局的顶部，将另一个场景放在中心。

现在的问题是可能吗？

* * *

我已经咨询了谷歌甚至我的其他同事，但仍然遇到这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T01:36:02.707

场景是舞台内窗口的一部分。你不能在一个阶段同时拥有两个。

如果你想在顶部和中心有不同的内容，你可以使用任何布局类，例如`Pane`代替 Scene。