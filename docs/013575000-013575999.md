# StackOverflow 问答 13575000-13575999

# ios - NSMutableURLRequest 在设备上发送空值但在浏览器中工作

> ID：13575001
> 
> 赞同：1
> 
> 时间：2012-11-26T23:32:49.937
> 
> 标签：ios, objective-c, iphone, nsmutableurlrequest

在您阅读本文之前，请记住，我是一名 Objective C 程序员，试图与一个对我的工作一无所知的 C# 程序员帮助调试服务器问题。

我正在向 .net/c# 端发送一个 SOAP 数据包，并且服务器接收到变量的空值。当 url 和变量字符串放入浏览器时，我得到了正确的响应。

帖子注销到“？help=1& email=test@email.net & password=testpassword”，但我不断收到“Result=Error&Details=Object reference not set to an instance of an object”。返回我的返回字符串。

```
NSString *post = [NSString stringWithFormat:@"?help=1& email=? & password=%@",userEmail, userPassword];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
[request setURL:[NSURL URLWithString:LOGIN_SERVICE]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"multipart/form-data" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

//Submit the Post:
[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

/NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

//Extract Return:
NSString *returnString = [[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:44:46.283

格式字符串中的电子邮件变量没有被填充。而且，为什么你的帖子数据中有空格？我想这会导致你的问题。因为您的数据可以包含空格，所以您需要对它们进行转义。

代替：

```
NSString *post = [NSString stringWithFormat:@"?help=1& email=? & password=%@",userEmail, userPassword]; 
```

尝试：

```
NSString* escapedUserEmail = [userEmail stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSString* escapedUserPassword = [userPassword stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

NSString *post = [NSString stringWithFormat:@"?help=1&email=%@&password=%@",escapedUserEmail, escapedUserPassword]; 
```

有关该主题的更多阅读，请参阅：[http ://deusty.blogspot.com/2006/11/sending-http-get-and-post-from-cocoa.html](http://deusty.blogspot.com/2006/11/sending-http-get-and-post-from-cocoa.html)

# c++ - 如何将点字符添加到字符串中的字符？

> ID：13575010
> 
> 赞同：0
> 
> 时间：2012-11-26T23:34:00.260
> 
> 标签：c++

我想添加“。” 除了字符串中的另一个字符之外的字符，但我不知道该怎么做？可能吗？

```
#include <iostream>

#include <string.h>

using namespace std;

int main(int argc, char *argv[]) {

    string input;
    char dot='.';
    cin>>input;
    for(int i=0;i<input.length();i++)
    {

        if( input[i]>=65 && input[i]<=90)
                {
                    input[i]=input[i]+32;   
                }
        if( (input[i]=='a') || (input[i]=='e') || (input[i]=='i') ||  (input[i]=='o') || input[i]=='y'  || input[i]=='u' )
        {
            input.erase(i,i+1);
        }
        input[i]+=dot;
    }
    cout<<input<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:24:36.030

我假设你想要这个输入：

```
Hello world! 
```

给你这个输出：

```
h.ll. w.rld! 
```

无需尝试就地修改字符串，您只需随时生成一个新字符串：

```
#include <cctype>
#include <iostream>
#include <string>
using namespace std;

int main(int argc, char *argv[]) {
    string input;
    getline(cin, input);
    string output;
    const string vowels = "aeiouy";
    for (int i = 0; i < input.size(); ++i) {
        const char c = tolower(input[i]);
        if (vowels.find(c) != string::npos) {
            output += '.';
        } else {
            output += c;
        }
    }
    cout << output << '\n';
    return 0;
} 
```

笔记：

*   `<cctype>`是为`toupper()`。

*   `<string.h>`已弃用；使用`<string>`.

*   `getline()`用;读整行 `istream::operator>>()`读单词。

*   使用`tolower()`, `toupper()`, &c。用于字符转换。`c + 32`没有描述你的意图。

*   当您需要比较时，`c >= 'A' && c <= 'Z'`将起作用；你不需要使用 ASCII 码。

*   用于`const`不会改变的事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:15:46.270

在尝试编写代码之前，您应该编写一份详细说明它应该做什么的规范。使用您的代码，我只能猜测：转换为小写（天真，假装您只会遇到 ASCII 中的 26 个非重音字母），然后删除所有元音（再次，非常天真，因为确定某物是否是元音是不平凡的，即使在英语中——考虑y in yet和day），最后在每个字符后插入一个点。最明显的方法是：

```
std::string results;
for ( std::string::const_iterator current = input.begin(),
                end = input.end();
        current != end;
        ++ current ) {
    static std::string const vowels( "aeiouAEIOU" );
    if ( std::find( vowels.begin(), vowels.end(), *current )
                != vowels.end() ) {
        results.push_back(
            tolower( static_cast<unsigned char>( *current ) ) );
    }
    results.push_back( '.' );
} 
```

但是，我只是在猜测您要做什么。

另一种选择是`std::transform`在初始字符串上使用以使其全部小写。如果你经常做这种事情，你就会有一个`ToLower`功能对象；否则，为了能够使用`std::transform`一次而编写一个可能太麻烦了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T23:36:10.823

Based on your comments, it sounds like you want something like this:

```
#include <iostream>
#include <string>
#include <algorithm>

int main(int argc, char *argv[])
{
    std::string input;
    std::cin >> input;

    std::transform (input.begin(), input.end(), input.begin(), tolower);

    size_t i = 0;
    while (i < input.length())
    {
        switch (input[i])
        {
            case 'a':
            case 'e':
            case 'i':
            case 'o':
            case 'y':
            case 'u':
            {
                size_t pos = input.find_first_not_of("aeioyu", i+1);
                if (pos == std::string::npos)
                  pos = input.length();
                input.erase(i, pos-i);
                break;
            }

            default:
            {
                input.insert(i, '.');
                i += 2;
                break;
            }
        }
    }

    std::cout << input << std::endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T00:01:35.153

来自 cpluplus.com 参考（[http://www.cplusplus.com/reference/string/string/insert/](http://www.cplusplus.com/reference/string/string/insert/)）

```
// inserting into a string
#include <iostream>
#include <string>
using namespace std;

int main ()
{
  string str="to be question";
  string str2="the ";
  string str3="or not to be";
  string::iterator it;

  // used in the same order as described above:
  str.insert(6,str2);                 // to be (the )question
  str.insert(6,str3,3,4);             // to be (not )the question
  str.insert(10,"that is cool",8);    // to be not (that is )the question
  str.insert(10,"to be ");            // to be not (to be )that is the question
  str.insert(15,1,':');               // to be not to be(:) that is the question
  it = str.insert(str.begin()+5,','); // to be(,) not to be: that is the question
  str.insert (str.end(),3,'.');       // to be, not to be: that is the question(...)
  str.insert (it+2,str3.begin(),str3.begin()+3); // (or )

  cout << str << endl;
  return 0;
} 
```

另外，请检查以下链接：

[http://www.cplusplus.com/reference/string/string/](http://www.cplusplus.com/reference/string/string/) http://www.cplusplus.com/reference/string/string/append/ [http://www.cplusplus.com/reference/string/string/推回/](http://www.cplusplus.com/reference/string/string/push_back/)

# matlab - matlab：使用选项'ComputeOOBvarImp'的treebagger

> ID：13575014
> 
> 赞同：1
> 
> 时间：2012-11-26T23:34:18.657
> 
> 标签：matlab

我正在尝试使用 Matlab 中的函数 Treebagger 评估特征的重要性。

Treebagger 帮助文件显示：

```
COMPUTEOOBVARIMP Flag to compute out-of-bag variable importance.
    The ComputeOOBVarImp property is a logical flag specifying whether out-of-bag
    estimates of variable importance should be computed.  The default is
    false. If this flag is true, COMPUTEOOBPREDICTION is true as well.

If this flag is true, the following properties are available:
   OOBPermutedVarDeltaError, OOBPermutedVarDeltaMeanMargin,
   OOBPermutedVarCountRaiseMargin 
```

但我得到的输出是：

> > b = treeBagger(20,resultMatrix,runOutputs,'OOBVarImp','on','Method','classification','NVarToSample',10);
> 
> > 包含 20 个袋装决策树的集成：

```
 Training X:           [4130x308]

           Training Y:             [4130x1]

               Method:       classification

                Nvars:                  308

         NVarToSample:                   10

              MinLeaf:                    1

                FBoot:                    1

SampleWithReplacement:                    1

 ComputeOOBPrediction:                    1

     ComputeOOBVarImp:                    1

            Proximity:                   []

           ClassNames:             '0'             '1' 
```

据我了解，ComputeOOBVarImp 设置为 true，但属性 OOBPermutedVarDeltaError、OOBPermutedVarDeltaMeanMargin 和 OOBPermutedVarCountRaiseMargin 不在这里。

谁能帮我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T02:24:41.047

试试 b.OOBPermutedVarDeltaError

# tomcat - 可以在 web.xml 中引用 context-param 吗？

> ID：13575015
> 
> 赞同：5
> 
> 时间：2012-11-26T23:34:22.130
> 
> 标签：tomcat, servlets, web.xml

我可以在 DD 本身中引用上下文参数吗？
例如：

```
<context-param>
    <param-name>firstParam</param-name>
    <param-value>/first</param-value>
</context-param> 
```

然后我希望能够做这样的事情：

```
<servlet-mapping>
    <servlet-name>firstServlet</servlet-name>
    <url-pattern>${firstParam}</url-pattern>
</servlet_mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:11:03.110

不，这是不可能的。没有这样的功能。

# javascript - jQuery - 如何延迟表单提交直到动画完成？

> ID：13575016
> 
> 赞同：1
> 
> 时间：2012-11-26T23:34:26.757
> 
> 标签：javascript, jquery, forms, validation, delay

我有这个页面动画，当用户离开页面时，文档会向左滑动。但是，我也有这个用户填写然后点击“下一步”按钮的表单，我希望提交表单等到动画完成（动画 e3ms？）

凭借我对 JavaScript 的平庸知识（尤其是表单和解析），我编写了一个脚本，据我所知它*应该可以*工作，但事实并非如此。有任何想法吗？任何帮助将非常感激。

**JavaScript：**

```
function ValidateForm() {
    var x = document.forms["myForm"]["myInput"].value;

    if(x == null || x == "") {
        $(".error-msg").animate({
            opacity: "1"
        });

        return false;
    } else {
        $("body").animate({
            "margin-left": "-200px",
            opacity: "0"
        });
    }
} 
```

**HTML：**

```
<form name="myForm" action="next.html" onsubmit="return ValidateForm();">
    <input type="text" name="myInput" placeholder="Example: johnnyappleseed@me.com">
    <span class="error-msg">You must fill out required elements!</span>

    <input type="submit" value="Next">
</form> 
```

*CSS 代码只是对表单进行样式设置并将 .error-msg 设置为不透明度为“0”。*

PS：我知道 JavaScript 表单验证很危险，但是一旦我发布了我的网站，我会在我的服务器上使用 PHP 或 ASP 验证以及 JavaScript 验证来备份它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:41:30.110

您需要在动画结束时使用回调函数来提交表单。试试下面的。

```
function ValidateForm() {
    var x = document.forms["myForm"]["myInput"].value;

    if(x == null || x == "") {
        $(".error-msg").animate({
            opacity: "1"
        });
    } else {
        if ($('form').css('opacity') == 0) {
            return true;
        }

        $("body").animate(
            {margin-left: "-200px",opacity: "0"},
            function() {
                $('form').submit();
            }
        );
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:47:44.930

我可能会将您的 ValidateForm 回调移动到提交按钮的 onclick 上。然后在您的回调中调用 e.preventDefault() 以阻止表单从点击冒泡提交。之后，在动画的回调中手动提交表单（[http://api.jquery.com/animate/](http://api.jquery.com/animate/)）

**HTML**

```
<form name="myForm" action="next.html">
    <input type="text" name="myInput" placeholder="Example: johnnyappleseed@me.com">
    <span class="error-msg">You must fill out required elements!</span>

    <input type="submit" value="Next" onclick="ValidateForm();">
</form> 
```

**Javascript**

```
function ValidateForm() {
    // stop the form auto submitting
    e.preventDefault();
    var x = document.forms["myForm"]["myInput"].value;

    if(x == null || x == "") {
        $(".error-msg").animate({
            opacity: "1"
        });

        return false;
    } else {
        $("body").animate({
            "margin-left": "-200px",
            opacity: "0"
        },
        {
             complete: function() { $("form[name='myForm']").submit(); }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T23:43:35.380

这是关于 jQ animate [Here的文档](http://api.jquery.com/animate/)

.animate 参数中的最后一个参数是动画结束时执行的回调函数，所以你的看起来像：

```
$("body").animate({
            "margin-left": "-200px",
            opacity: "0"
        }, 200, function() {
            $('form').submit();
        }); 
```

PS 200 表示完成动画所需的时间....默认为 400。

# python - Python在IDLE上工作的相同位置或位置打印输出

> ID：13575021
> 
> 赞同：0
> 
> 时间：2012-11-26T23:34:44.397
> 
> 标签：python, python-3.x

> **可能重复：**
> [如何使用 python 创建一个旋转的命令行光标？](https://stackoverflow.com/questions/4995733/how-to-create-a-spinning-command-line-cursor-using-python)
> [python 3 IDLE进度条/加载条](https://stackoverflow.com/questions/5563320/python-3-idle-progressbar-loadingbar)

我想打印如下输出：

```
Percentage: 10% 
```

只有百分比在同一位置不断变化为 20、30、40 等等。覆盖 10%。我在stackoverflow上看到了很多帖子。但是它们都不能在 Python 3 中正常工作。

我尝试使用 \r、\c 甚至 \b 但不能从内部工作`print() or sys.stdout()`

我正在尝试使用 IDLE 并通过按 F5 从 Python Shell 运行程序。环境是Windows。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:01:45.773

IDLE 不提供真正的 TTY/终端。对不起。

通过从 Windows 命令行运行程序来测试您的程序：

`C:\PythonXX\python.exe path\to\script.py`

# c - 错误：在 '*' 标记之前应为 ')'

> ID：13575023
> 
> 赞同：0
> 
> 时间：2012-11-26T23:35:09.573
> 
> 标签：c

我在编译代码时收到此错误，并且在尝试了一个小时后完全不知道。

这是导致错误 os_memory_strategies.h 的文件：

```
 #ifndef _OS_MEMORY_STRATEGIES_H
    #define _OS_MEMORY_STRATEGIES_H
    #include "os_mem_drivers.h"

    #include "os_memheap_drivers.h"

    #include "os_process.h"
    #include "defines.h"
    #include <stdint.h>

    MemAddr os_Memory_FirstFit (Heap *heap, uint16_t size);

    #endif 
```

线

```
 MemAddr os_Memory_FirstFit (Heap *heap, uint16_t size); 
```

导致错误。据我了解，“堆”在这一点上是未知的。struct Heap 在 os_memheap_drivers.h 中定义，包含在这里。该结构如下所示：

```
 typedef struct Heap{
    prog_char *const name;
    MemDriver *const driver;
    AllocStrategy allocStrat;
    Memory const memory;
    }Heap; 
```

使用 AVRStudio，所有文件都在同一个目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:46:34.050

最典型的原因是循环头包含。你包括`os_memheap_drivers.h`在你的`os_memory_strategies.h`（如我们在上面看到的）。但显然你也直接或间接地包含`os_memory_strategies.h`在其中`os_memheap_drivers.h`。

包含守卫自然会“解决”这种循环包含，这是一种不可预测的方式，即这些文件中的一个最终将首先被包含，另一个最终将被包含在第二个。在您的情况下`os_memory_strategies.h`，首先被包含在内，这就是为什么它不能识别`Heap`为类型名称的原因。

循环标头包含永远不会起作用，也永远不会取得任何成就。摆脱它，即确保`os_memory_strategies.h`不包含在`os_memheap_drivers.h`.

# objective-c - Objective-C 如何从标准输入读取数据并忽略额外（不需要的）字符

> ID：13575031
> 
> 赞同：4
> 
> 时间：2012-11-26T23:36:05.260
> 
> 标签：objective-c

我目前正在使用以下代码从标准输入中读取第一个字符（提示后）：

```
NSFileHandle *stdIn = [NSFileHandle fileHandleWithStandardInput];
    NSString* input = [[NSString alloc]
        initWithData:[stdIn readDataOfLength:1]
        encoding:NSUTF8StringEncoding]; 
```

但是，在程序完成后，所有多余的字符都会被命令行（在本例中为 bash）解释。例如，提示是

```
File already exists, do you want to overwrite it? [y/N] 
```

如果我输入`noooooo`，bash`-bash: oooooo: command not found`会在程序完成后说。我该如何避免这种情况？使用`[stdIn readDataToEndOfFile]`不起作用，预期。

我可以使用`[stdIn readToEndOfFileInBackgroundAndNotify]`，但如果我需要再次从这样的提示中获取用户输入，这是不可能的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-07T03:51:48.223

如果您想将其严格保留在 Objective C 中，您可以随时执行以下操作：

```
NSFileHandle *kbd = [NSFileHandle fileHandleWithStandardInput];
NSData *inputData = [kbd availableData];
NSString *option = [[[NSString alloc] initWithData:inputData 
                 encoding:NSUTF8StringEncoding] substringToIndex:1];
NSLog(@"%@",option); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T00:07:08.857

您不使用scanf的任何特殊原因？

有关如何执行此操作以及如何将 scanf 的 C 方面与 Obj-C 集成的简要指南，请参阅[将 scanf 与 NSStrings一起使用。](https://stackoverflow.com/questions/3220823/using-scanf-with-nsstrings)

# java - JDBC 事务不工作

> ID：13575040
> 
> 赞同：2
> 
> 时间：2012-11-26T23:37:03.957
> 
> 标签：java, jdbc, transactions

我有一个简单的数据库事务，如下面的代码。第一个查询应该可以正常工作，而第二个应该抛出异常，因此事务不应该通过！

问题是，运行此代码后，第一个查询似乎在我的表中插入了一行，就好像它不是事务性的一样。该代码确实会引发异常并被`myCon.rollback();`执行，但无论如何都会将新行插入表中。

我不确定我到底错过了什么，任何提示将不胜感激。

-- 编辑：问题是我为我的表使用了默认的 MyISAM 引擎。我把它改成 InnoDB 问题就解决了。

```
 Connection myCon = null;

    try
    {
        Class.forName("com.mysql.jdbc.Driver");
        myCon = DriverManager.getConnection (dbUrl, dbUser, dbPass);

        myCon.setAutoCommit(false); // the intention is to do a transaction

        Statement stmt = myCon.createStatement();

        String query = "INSERT INTO tbltest(f1) VALUES (1);";
        stmt.executeUpdate(query);

        query = "INSERT INTO"; // a malformed query
        stmt.executeUpdate(query);

        con.commit();
    }
    catch(Exception e)
    {
        System.err.println(e.toString());
        myCon.rollback();
    }
    finally
    {
        myCon.close();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T23:41:10.033

您的 MySQL 数据库必须设置为支持这样的事情。我相信这意味着每个表的 InnoDB。你的情况是这样吗？如果没有，请创建 InnoDB 表并重试。

[http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T23:42:48.440

您使用的是什么 MySql 引擎？AFAIK，某些引擎（例如 MyISAM）不支持事务。InnoDB 可以。

# haskell - Y-Combinator 是单子吗？

> ID：13575041
> 
> 赞同：3
> 
> 时间：2012-11-26T23:37:08.457
> 
> 标签：haskell, functional-programming, lisp

我试图了解使用 y-combinator 和 continuation monad 抽象函数之间的相似之处。直觉上，我觉得他们有共同点，但我还没有理解他们中的任何一个能够掌握答案。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:57:01.160

它们是完全不同的概念。它们唯一的共同点是它们用于管理程序控制流。

# android - Add Action to ContactsContract list

> ID：13575043
> 
> 赞同：0
> 
> 时间：2012-11-26T23:37:19.993
> 
> 标签：android, android-actionbar

Created Intent based on ContactContract (load up Native Android Contact App) into an activity in an app. Is it possible to add an Action to the Action Bar versus building a separate List view. Trying to standardize on Android's interface

Here is the code:

```
 setContentView(R.layout.contact_list);
    ActionBar actionBar = getActionBar();
    actionBar.setTitle(R.string.contacts);
    actionBar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_HOME); 

    Intent intent = new Intent(Intent.ACTION_VIEW,ContactsContract.Contacts.CONTENT_URI);  
    startActivityForResult(intent, PICK_CONTACT);  

    // ContentResolver for Contacts
    getContacts(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:41:02.753

您可以通过将选项菜单项添加为“操作项”来将操作添加到操作栏。请参阅文档。就像选项菜单项一样，您可以将 Intent 与操作项相关联。

但是，为什么不直接向列表视图本身添加一个操作：当用户单击联系人时，您的 Intent 就会触发。您可以使用 setOnItemClickListener() 来执行此操作。如果您真的想让用户单击列表中的项目，然后单击操作项以发送 Intent，请使用项目单击侦听器存储所选联系人的行 id，然后从操作项侦听器发送 Intent。

要为单个项目构建内容 URI，请使用 ContactsContract.Contacts.CONTENT_VCARD_URI 和支持该项目的行中的 LOOKUP_ID 值来构建 URI。用于组合这些的方法是 android.net.Uri.withAppendedPath(Uri, String)。

# python - Why would mechanize .open() / .read() / .close() return None/have socket internals be None?

> ID：13575045
> 
> 赞同：0
> 
> 时间：2012-11-26T23:37:22.643
> 
> 标签：python, mechanize, mechanize-python

I'm getting occasional `AttributeError`s with code of the following sort. I set a `mechanize` instance up with:

```
self.mech = mechanize.Browser(factory=mechanize.RobustFactory())
self.cj = mechanize.CookieJar()
self.mech.set_cookiejar(self.cj)
self.mech.set_proxies({'http': <snipped>})
self.mech.set_handle_robots(False)

USER_AGENT = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"
headers = [h for h in self.mech.addheaders if h[0].lower() != 'user-agent']
headers.append(('User-agent', USER_AGENT))
self.mech.addheaders = headers 
```

And I use it as such:

```
resp = self.mech.open(the_url)
html = resp.read()
resp.close() 
```

The latter snippet occasionally raises exceptions:

```
...
    html = resp.read()
AttributeError: 'NoneType' object has no attribute 'read' 
```

In other cases, the traceback is actually:

```
...
    resp.close()
  File "C:\Python26\lib\site-packages\mechanize\_response.py", line 88, in close
    self.wrapped.close()
  File "C:\Python26\lib\site-packages\mechanize\_response.py", line 368, in close
    wrapped.close()
  File "C:\Python26\lib\socket.py", line 273, in close
    self._sock.close()
AttributeError: 'NoneType' object has no attribute 'close' 
```

That is, the `.read()` does not fail, but the `.close()` does. More tracebacks:

```
...
    html = resp.read()
  File "C:\Python26\lib\site-packages\mechanize\_response.py", line 190, in read
    self.__cache.write(self.wrapped.read())
  File "C:\Python26\lib\socket.py", line 348, in read
    data = self._sock.recv(rbufsize)
  File "C:\Python26\lib\httplib.py", line 542, in read
    s = self.fp.read(amt)
  File "C:\Python26\lib\socket.py", line 377, in read
    data = self._sock.recv(left)
error: [Errno 10035] A non-blocking socket operation could not be completed immediately 
```

And:

```
 resp = self.mech.open(the_url)
  File "C:\Python26\lib\site-packages\mechanize\_mechanize.py", line 203, in open
    return self._mech_open(url, data, timeout=timeout)
  File "C:\Python26\lib\site-packages\mechanize\_mechanize.py", line 249, in _mech_open
    self._set_response(response, False)
  File "C:\Python26\lib\site-packages\mechanize\_mechanize.py", line 308, in     _set_response
    self._factory.set_response(response)
  File "C:\Python26\lib\site-packages\mechanize\_html.py", line 623, in set_response
    data = response.read()
  File "C:\Python26\lib\site-packages\mechanize\_response.py", line 190, in read
    self.__cache.write(self.wrapped.read())
  File "C:\Python26\lib\socket.py", line 348, in read
    data = self._sock.recv(rbufsize)
  File "C:\Python26\lib\httplib.py", line 542, in read
    s = self.fp.read(amt)
  File "C:\Python26\lib\socket.py", line 377, in read
    data = self._sock.recv(left)
AttributeError: 'NoneType' object has no attribute 'recv' 
```

Why might this happen? The mechanize documentation isn't very good, and a cursor poke-through of the source reveals that it is relatively convoluted.

# php - 有没有办法搜索以逗号分隔的 JSON 属性并通过不同的属性名称返回成员 ID？

> ID：13575050
> 
> 赞同：0
> 
> 时间：2012-11-26T23:37:57.443
> 
> 标签：php, javascript, mysql, json

我希望我能正确解释这一点；例如，我想要匹配值的 user_id: ***id*** : 在返回的 jSON Array/Object 中，像这样......

```
[{"user_id":"1","value":"92056,92054,92018"},{"user_id":"3","value":"92056"},
{"user_id":"2","value":"Massachusetts, Wyoming, Tennessee"},
{"user_id":"5","value":"California"},
{"user_id":"9","value":"New Mexico, Mississippi, Washington"},
{"user_id":"11","value":"Nevada"},{"user_id":"8","value":"Oklahoma, Louisiana"},
{"user_id":"6","value":"Montana, Oregon"},
{"user_id":"10","value":"Virginia, Illinois"}] 
```

例如，如果我的来源是**92056**，我想得到**"1"**，因为我的 92056 的 user_id 是 "1"。

如果是**新墨西哥州**，我想要“ **9** ”等等。

这个值可以包含数百个邮政编码，所以我想要一种快速搜索这些值或***类似值***的方法，因为这永远不会重复；每个 user_id 将有多个独特的区域或“价值”。

如果出现这种情况，我将使用 PHP 从数据库中提取数据并像这样（在 Wordpress 中）传递给 JavaScript 变量......

```
 <?php
        global $wpdb;
        $fullPHP = $wpdb->get_results("SELECT user_id, value FROM " . "refer_cimy_uef_data;");
 ?>
        var phpreps = JSON.stringify(<?php echo json_encode($fullPHP); ?>);
        $("#phpoutput").html(phpreps); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:49:17.583

这似乎做你想要的？：

[http://jsfiddle.net/WVqFr/1/](http://jsfiddle.net/WVqFr/1/)

```
var input = [{"user_id":"1","value":"92056,92054,92018"},{"user_id":"3","value":"92056"},
{"user_id":"2","value":"Massachusetts, Wyoming, Tennessee"},
{"user_id":"5","value":"Massachusetts, Wyoming, California, Tennessee"},
{"user_id":"9","value":"New Mexico, Mississippi, Washington"},
{"user_id":"11","value":"Nevada"},{"user_id":"8","value":"Oklahoma, Louisiana"},
{"user_id":"6","value":"Montana, Oregon"},
{"user_id":"10","value":"Virginia, Illinois"}];

function searcher(value) {
    for (var item in input) {
        var obj = input[item];
        var val_arr = obj["value"].split(",");
        for (var i = 0; i < val_arr.length; i++) {
            var cur = val_arr[i].trim();
            if (value == cur) {
                return obj["user_id"];
            }
        }
    }
}

alert(searcher("New Mexico")); 
```

但这是假设您的原始输入采用您指定的格式。如果您使用不同的输入格式，搜索可能会更容易或更快，但这取决于您。请注意，`.trim`并非所有浏览器都完全支持它，因此您需要包含一个 polyfill 或实现您自己的“trim”类型。我修剪只是因为用“，”分割是最安全的，但这可能会在您的某些数组中留下空格，但不会在其他数组中留下空格。如果您知道逗号后面的字符串中不会有空格，那么您可以忽略该`trim`部分。你的代码很奇怪，因为在某些地方你有类似的东西，`"92056,92054,92018"`但在其他地方，你有`"New Mexico, Mississippi, Washington"`- 注意空间的差异。

此外，如果您不需要使用`trim`，您可以删除内部`for`循环并使用`if (val_arr.indexOf(value) > -1) { return obj["user_id"]; }`来查看拆分数组是否包含您正在搜索的项目。但要知道旧的 IE 版本不支持`Array.indexOf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:10:55.873

您更喜欢在服务器端还是客户端进行搜索？页面是否需要进行多次搜索？如果没有，服务器端可能会稍微快一些，因为通过网络发送的数据会更少。

假设客户端（并且没有加载库），这是一种可能的解决方案：

```
var json = [
    {"user_id":"1","value":"92056,92054,92018"},{"user_id":"3","value":"92056"},
    {"user_id":"2","value":"Massachusetts, Wyoming, Tennessee"},
    {"user_id":"5","value":"Massachusetts, Wyoming, California, Tennessee"},
    {"user_id":"9","value":"New Mexico, Mississippi, Washington"},
    {"user_id":"11","value":"Nevada"},{"user_id":"8","value":"Oklahoma, Louisiana"},
    {"user_id":"6","value":"Montana, Oregon"},
    {"user_id":"10","value":"Virginia, Illinois"}
];

function search(needle) {
    var reg = new RegExp('\\b'+needle+'\\b');
    for (var i = 0; i < json.length; i++) {
        if (json[i]['value'].match(reg)) {
            return json[i]["user_id"];
        }
    }
}

alert(search("New Mexico"));​ 
```

关于您的示例数据需要注意的一点：多个用户 id 出现了一些值（例如，'Tennessee'）......此函数返回找到的第一个，但您可以轻松搜索整个列表并附加到结果数组而不是返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:07:00.817

你对自己太苛刻了。在将“值”属性发送到浏览器客户端之前，将其转换为数组，然后在每个值数组上使用 indexOf 来检查搜索查询是否存在。在下面的代码中，底部的搜索功能非常简单。第一部分是一些客户端转换代码，用于将值属性转换为适当的数组。

```
//pre-process the data to put 'value' into an array. This would be better done from the server in the initial response.

var input = (function(){

    var arr = [
        {"user_id":"1","value":"92056,92054,92018"},{"user_id":"3","value":"92056"}, 
        {"user_id":"2","value":"Massachusetts, Wyoming, Tennessee"},
        {"user_id":"5","value":"California"},
        {"user_id":"9","value":"New Mexico, Mississippi, Washington"},
        {"user_id":"11","value":"Nevada"},
        {"user_id":"8","value":"Oklahoma, Louisiana"},
        {"user_id":"6","value":"Montana, Oregon"},
        {"user_id":"10","value":"Virginia, Illinois"}
    ];

    arr.forEach(function(item, index){ //remove extra space from some splitting
        arr[index].value = arr[index].value.replace(/,\s/gi,',').split(',');
    });

    return arr;

})();

var search = function(val){

    for(var i=0, len=input.length; i<len; i++){

        if( input[i].value.indexOf(val) > -1 ) return input[i].user_id;

    }

    return null;

}

console.log( search('New Mexico') ); 
```

# c# - updating a user control in an asp.net update panel (based upon action in another user control)

> ID：13575053
> 
> 赞同：-1
> 
> 时间：2012-11-26T23:38:07.887
> 
> 标签：c#, asp.net, asp.net-ajax, updatepanel

I have 2 Update Panels, as shown below, on an aspx page. The aspx page uses a UserControl element, which implements a repeater with a list of page numbers displayed on it. There are 2 lists of page numbers, say L1 ans L2, one at the top of the page and one at the bottom. (Hence, the 2 User Controls, RevPaging1 and RevPaging2 on the aspx page).

```
<%@ Register Src="../Controls/UseControl.ascx" TagName="UserControl" TagPrefix="uc1" %>

 <asp:UpdatePanel runat="server" ID="UpdatePanel1" UpdateMode="Conditional">
        <ContentTemplate>

        <div id="Div1" class="paging" runat="server" visible="false">
            <uc1:UserControl id="RevPaging1" runat="server" ShowResult="false">
            </uc1:UserControl>          
        </div>

         </ContentTemplate>
    </asp:UpdatePanel>   

    <asp:UpdatePanel runat="server" ID="UpdatePanel2" UpdateMode="Conditional">

         <ContentTemplate>

            <div id="Div2" class="paging" runat="server" visible="false">
                    <uc1:UserControl id="RevPaging2" runat="server" ShowResult="false">
                    </uc1:UserControl>          
            </div>          

       </ContentTemplate>

    </asp:UpdatePanel> 
```

Question: How do I make sure that when I click on any page number on "RevPaging1" , the page number is automatically updated on "RevPaging2" to the same number that i selected on RevPaging1(one that I did not click on) and similarly, when I click on any page number on "RevPaging2" the page number is automatically updated on "RevPaging1" (one that I did not click on).

Following is the implementation of the UserControl (which is declared twice inside the the 2 update panels above).

```
<%@ Control Language="C#" AutoEventWireup="true" 
    CodeBehind="UserControl.ascx.cs" Inherits="Namespace.UserControl" %>

    <table>
        <tr>
            <td class="left">
                <p class="button2Left"></p>
                    <asp:Button ID="btPreviousPage" runat="server" cssclass="button2" 
                                 OnClick="btPreviousPage_Click" Text="Previous Page" />
                <p class="button2Right"></p>
            </td>
            <td class="middle">
            <asp:Repeater ID="pageNumbers" runat="server" OnItemCommand="pageNumbers_ItemCommand">
                <HeaderTemplate>
                    <ul>This is the header template</ul>
                </HeaderTemplate>
                <ItemTemplate>
                    <li class='<%#DataBinder.Eval(Container.DataItem,"PCssClass")%>'>
                        <asp:LinkButton ID="LinkButton1" CommandName="prefixLink" 
                                        CommandArgument='<%#DataBinder.Eval(Container.DataItem,"PText")%>' 
                                        runat="server" 
                                        Text='<%#DataBinder.Eval(Container.DataItem,"PText")%>' />
                    </li>
                </ItemTemplate>
                <FooterTemplate>
                      <ul>This is the footer template</ul>
                </FooterTemplate>
            </asp:Repeater>
            </td>

            <td class="right">
                <p class="button2Left"></p>
                    <asp:Button ID="btNextPage" cssclass="button2" runat="server" OnClick="btNextPage_Click" Text="Next Page" />
                <p class="button2Right"></p>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:44:12.837

当您处理单击控件中的页码的事件时，有一个单独的函数可以使用数据更新两个面板/控件。

# jquery - Hoverintent 延迟在 html 页面中不起作用

> ID：13575055
> 
> 赞同：1
> 
> 时间：2012-11-26T23:38:15.453
> 
> 标签：jquery, jquery-ui, jquery-plugins, hoverintent

当我申请 html 页面时，Hoverintent 不起作用。帮助！在 jsfddle 上它可以工作，但在 html 页面上测试它不起作用。

在这里工作：http: [//jsfiddle.net/GZV5V/3/](http://jsfiddle.net/GZV5V/3/)

不适用于 .html 页面（以下代码与[http://jsfiddle.net/GZV5V/3/](http://jsfiddle.net/GZV5V/3/)相同）

```
<html>

    <head>
        <style type="text/css">
            #nav {
                padding: 40px;
                border: solid #999 1px;
            }
            #nav ul {
                margin: 0;
                padding: 0;
                display: none;
                background-color: #CCC;
            }
            #nav ul li {
                margin: 0;
                list-style: none;
                list-style-type: none;
                padding: 5px;
                width: 40px;
            }
            #nav a {
                color: black;
                text-decoration: none;
                padding: 5px;
            }
            #nav a:hover {
                text-decoration: none;
                background-color: yellow;
            }
            ​
        </style>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script type="text/javascript" src="http://cherne.net/brian/resources/jquery.hoverIntent.js"></script>
        <script>
            var config = {
                over: function() { //onMouseOver callback (REQUIRED) 
                    $('ul', this).slideDown(250); //show its submenu

                },
                timeout: 500, // milliseconds delay before onMouseOut  (default 0)  
                out: function() { // function = onMouseOut callback (REQUIRED)
                    $('ul', this).slideUp(500); //hide its submenu        
                }
            };
            $('#nav li').hoverIntent(config);​
        </script>
    </head>

    <body>
        <ul id="nav">
            <li><a href="#">Main</a>

                <ul>
                    <li><a href="#">AAAAA</a>
                    </li>
                    <li><a href="#">BBBBB</a>
                    </li>
                    <li><a href="#">CCCCC</a>
                    </li>
                    <li><a href="#">DDDDD</a>
                    </li>
                    <li><a href="#">FFFFF</a>
                    </li>
                </ul>
            </li>
        </ul>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:18:34.663

DOM 尚未加载。将您的代码包装在[`$(document).ready`](http://api.jquery.com/ready/)：

```
$(document).ready(function () {
    var config = {    
        over: function () { //onMouseOver callback (REQUIRED) 
            $('ul', this).slideDown(250);//show its submenu
        },    
        timeout: 500, // milliseconds delay before onMouseOut  (default 0)  
        out: function () { // function = onMouseOut callback (REQUIRED)
            $('ul', this).slideUp(500); //hide its submenu        
        }     
    };
    $('#nav li').hoverIntent(config);​
}); 
```

您已经配置 JSFiddle 来运行您的代码`onLoad`（请参阅“框架”下的配置）。这就是为什么它在小提琴中起作用。

# html - meta tag description

> ID：13575057
> 
> 赞同：0
> 
> 时间：2012-11-26T23:38:26.667
> 
> 标签：html

> **Possible Duplicate:**
> [HTML: How to get my subpages listed on a google search](https://stackoverflow.com/questions/1739898/html-how-to-get-my-subpages-listed-on-a-google-search)

I was wondering how to make( write) meta tag description like facebook has. I mean if you search facebook on google you see the way it presented. It shows a bunch of links and their descriptions!

Any idea or help will be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:42:21.670

您可以在`<head>`标签中添加要在 Google 上显示的说明：

`<meta name="description" content="Description here" />`

就在主页下方放置链接而言，Google 会自动执行该过程，尽管您可以进行一些更改。[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)

# javascript - 如何使用 EntityManager 的 saveChanges() 方法保存单个实体？

> ID：13575058
> 
> 赞同：4
> 
> 时间：2012-11-26T23:38:25.533
> 
> 标签：javascript, breeze

假设我有以下数据结构：具有**订单**集合（1 到 n 关系）的**客户**实体。因此，返回一个由零个或多个**Orders**组成的数组。**`Customer.Orders()`**

 ****现在，我创建了一个新的**Customer** `newCustomer`和一个新的**Orders**实体数组。此**Orders**实体数组分配给**Customer**。所有实体都具有“已添加”实体状态。

然后，我调用`saveChanges()`如下：

```
manager.saveChanges([newCustomer]) 
```

我根据本文档使用了`saveChanges()`'s参数： [http ://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_saveChanges](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_saveChanges)`[entities]`

我希望 the`newCustomer`及其**Orders**数组都保存在服务器中，**但只** `newCustomer` **保存了 。**

有什么方法可以保存`newCustomer`及其**Orders**数组吗？也许我可以在`[entities]`参数中传递所有实体，但这会很冗长并且有一点错误。我知道我只能调用`saveChanges()`方法来保存所有实体，但我只想完全保存**一个**特定的实体。

提前致谢，

贝尔纳多·帕切科

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T01:33:50.813

# 2014 年 10 月 8 日更新

我坚持我最初的建议，以避免挑剔的变化。

但是，如果您必须这样做，@utopik 的评论提醒我，[微风实验室有`getEntityGraph`插件](http://www.breezejs.com/breeze-labs/getentitygraph)，可以使此类场景变得更加容易。

在微风本身之后安装*getEntityGraph.js*插件脚本。然后你应该可以说：

```
// get flat array of cust and its orders
var graph = manager.getEntityGraph(newCustomer,'Orders'); 
manager.saveChanges(graph); 
```

您必须明确声明*应*使用轻而易举的“扩展”子句语法包含哪些导航路径。

这种方法会将已更改和未修改的图形实体发送到服务器。您可以过滤掉未更改的：

```
var changes = manager
    .getEntityGraph(newCustomer,'Orders')
    .filter(function(entity){
        return !entity.entityAspect.entityState.isUnchanged();
    }); 

manager.saveChanges(changes) 
```

`getEntityGraph`有朝一日可能会成为核心产品。在那之前，有微风实验室。

# 原始答案

很好的问题，BP。您对省略应该保存的实体的担忧是我们不鼓励调用的原因`saveChanges(array-of-entities)`。常规的、安全的做法就是调用`saveChanges()`. 这将在单个事务中保存**每个具有待处理更改的实体。**

我们为您需要挑选应该保存的实体的特殊情况提供选择性保存重载（您尝试过的那个）。执行此操作时必须小心；您不想孤立相关实体……例如您添加到新客户的新订单。犯错真的很容易……正如您正确指出的那样。

我可以看到您希望 Breeze 推断它应该包含父客户的子订单。但你是在让 Breeze 猜测你真正想要做什么。如果 Breeze 从`newCustomer`每条导航路径的每个分支沿着 cookie 追踪，谁知道它会保存什么……或不保存？我们为您提供挑选樱桃的选择；现在你有责任准确说出你的意思。

如果你真的需要保存 the`newCustomer`和它的命令，你可以这样写：

```
var entityToSave = newCustomer.Orders().slice(); // 确保它是一个副本！
entityToSave.push(newCustomer); // 也添加 newCustomer。
manager.saveChanges(entitiesToSave); // 保存 newCustomer 及其订单。

```

但我求你避免这种方法。如果您发现自己经常需要保存带有更改的实体子集，我敦促您重新检查您的工作流程。也许您需要多个管理器……[如此处所述](http://www.breezejs.com/documentation/multiple-managers)。****

# jquery - How to enlarge image from thumbnail in jQuery?

> ID：13575061
> 
> 赞同：1
> 
> 时间：2012-11-26T23:38:37.170
> 
> 标签：jquery, css, ajax, image

On my website there is a list of small thumbnails ("t1.jpg", "t2.jpg", "t3.jpg",...) and I want to create code that in centered dialog box will show a full-size version of the image. How to do this?

For example when I click on t1.jpg I want to see in centered box a big1.jpg image. Dynamically. I don't want to load all images when the page is loading. It must be good performance for that.

Anyone can give me some advice? Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T00:04:07.143

这是一个非常简单的方法 - [**Darkbox Gallery**](https://github.com/rokobuljan/Darkbox-Gallery)的简化版本：

基本上，您将大图像存储`src`在一个`data-pop`属性中。单击此类元素
时会调用弹出窗口。 CSS 真的很简单，甚至 jQuery 也不应该很复杂——除了计算当前窗口大小的部分，以便定义弹出窗口的背景图像是 CSS3还是——其中*“auto”*用于较小的图像（所以他们不'不缩放）：`data-pop`
`contain``auto`

 *```
/* POP BOX */
;(function() {

  var $pop = $("#pop");

  $(document).on("click", "[data-pop]", function() {

    var popSrc= $(this).data("pop"),
        docW= Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
        docH= Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

    $pop.addClass("visible loading").css({backgroundImage:"none"});

    $("<img/>").on("load", function() {
      var bigger = (this.width > docW || this.height > docH)
      $pop.removeClass("loading").css({
        backgroundSize: bigger ? "contain" : "auto",
        backgroundImage: "url(" + this.src + ")"
      });
    }).attr("src", popSrc);

  });

  $("#popClose").on("click", function() {
    $pop.removeClass("visible loading");
  });

}());
```

```
/* 
POP BOX 
*/
#pop {
  position: fixed;
  z-index: 999999;
  color: #fff;
  background: rgba(0, 0, 0, 0.6) none no-repeat 50% 50%;
  box-shadow: 0 0 0 24px rgba(0, 0, 0, 0.6);
  left: 24px;
  top: 24px;
  right: 24px;
  bottom: 24px;
  transition: 0.3s;
  visibility: hidden;
  opacity: 0;
}

#pop.loading:after {
  content: "Loading...";
  position: absolute;
  top: 50%;
  left: 44%;
}

#pop.visible {
  visibility: visible;
  opacity: 1;
}

#popClose {
  cursor: pointer;
  position: absolute;
  top: 0px;
  right: 0px;
  font-size: 2em;
}
```

```
<!-- POP BOX -->
<div id="pop"><a id="popClose">&times;</a></div>

<!-- USE EXAMPLE -->
<img src="http://placehold.it/50x50/0bf" data-pop="http://placehold.it/860x590/0bf" alt="" />
<img src="http://placehold.it/50x50/f0b" data-pop="http://placehold.it/590x860/f0b" alt="" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:41:14.910

有几个 jQuery 灯箱脚本可以帮助您做到这一点。

以下是一些最好的列表：http: [//line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts](http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T23:41:40.913

像一个 jquery 灯箱？

[http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts](http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts)

单击图像缩略图时，图像以模式加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T23:42:35.690

灯箱。有 jQuery 插件。查看官方网站上的“如何使用”标签：http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T23:44:57.940

我认为[facebox](http://defunkt.io/facebox/)是一个不错的选择。他们在此页面中提供了您想要的功能示例。*

# google-places-api - Accessing LIst of Businesses at GoogleMaps

> ID：13575065
> 
> 赞同：1
> 
> 时间：2012-11-26T23:38:58.587
> 
> 标签：google-places-api

If you go to www.google.com/maps and enter an address with a business at it (such as 100 Congress Ave, Austin, TX) you get a return page which includes "At this address" and then lists some businesses there.

Not all addresses have this section (see 100 S Congress Ave, Austin, TX).

I'm using google places API and would like to access this info. When I compare the results for 100 Congress Ave, Austin, TX between the Google Places API and www.google.com/maps, I don't get the same results.

Anybody know how to get this list of business via the Google API's which shows up on www.google.com/maps?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:13:43.680

您可以使用参数中地址的in from执行[Places API 文本搜索请求](https://developers.google.com/places/documentation/search#TextSearchRequests)：`what's at``query`

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=what's%20at%20100%20Congress%20Ave,%20Austin,%20TX&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/textsearch/json?query=what%27s%20at%20100%20Congress%20Ave,%20Austin,%20TX&sensor=false&key=YOUR_API_KEY)

# riak - Riak - 所有分区属于一个节点

> ID：13575070
> 
> 赞同：4
> 
> 时间：2012-11-26T23:39:38.977
> 
> 标签：riak

我正在阅读《[七周内的七个数据库](http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks)》一书（到目前为止读得很好），我对书中快速传递的 Riak 细节感到困惑。

默认情况下，Riak 应该将数据分成 64 个分区。这些分区中的每一个都应该在环中的节点之间分割。（如果我用错了术语，请纠正我。）

我正在使用 Riak 源附带的 4 个开发节点。他们都开始了，但是当我`curl http://localhost:8091/stats | grep ring`，我看到

```
"ring_ownership": "[{'dev1@127.0.0.1',64}]" 
```

进一步证实了这一点`$RIAK_INSTALL/dev/dev4/bin/riak-admin member-status`：

```
================================= Membership ==================================
Status     Ring    Pending    Node
-------------------------------------------------------------------------------
joining     0.0%      --      'dev2@127.0.0.1'
joining     0.0%      --      'dev3@127.0.0.1'
joining     0.0%      --      'dev4@127.0.0.1'
valid     100.0%      --      'dev1@127.0.0.1'
------------------------------------------------------------------------------- 
```

这是怎么回事？为什么 dev1 节点要求所有分区，我怎样才能让它共享？

### 也许相关

我为每个节点（在`RIAK_ROOT/dev/devN/etc/app.config`）编辑 app.config 以制作 pb_ip`0.0.0.0`而不是`127.0.0.1`. 这样我就可以从主机中的浏览器访问 Riak，即使我在 Vagrant VM 中运行 Riak。尽管我对它们中的每一个都进行了相同的更改，但我只能从主机的浏览器（而不是 dev2、dev3 或 dev4）访问 dev1。

如果您认为这会有所帮助，我可以打包此 VM 并使其可用，以帮助您帮助我进行故障排除。（虚拟机很棒的众多原因之一。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T02:20:52.220

我怀疑您看到该输出`riak-admin member-status`是因为您对集群有未完成的更改需要提交。

`riak-admin cluster plan`

`riak-admin cluster commit`

运行`riak-admin cluster plan`将显示有关未完成的*传输*的信息（如果有）。然后，您需要使用第二个命令将更改提交到集群。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:53:15.503

在高速项目上发表作品的危险在于，界面会在墨水干之前发生变化。

集群管理在 1.0（本书涵盖的内容）和 1.2（当前版本）之间发生了重大转变。这本书只是直接发出`join`来`dev1`，就这样收工了。现在您必须执行`riak-admin cluster`命令，该命令将多个连接/离开批处理并将它们作为单个事务执行。加入后，您必须查看`plan`和`commit`交易，如另一条评论中所述。

FWIW，剩下的大部分 Riak 信息还是一样的。

# vba - 如何锁定过滤器

> ID：13575073
> 
> 赞同：1
> 
> 时间：2012-11-26T23:39:55.947
> 
> 标签：vba, ms-access

我知道`me.filter ="filter"`设置过滤器并`me.filteron = true`打开过滤器，但是 vba 中的哪些代码使用户在应用过滤器后无法删除它？

# epub - 在 Ibook 3.0.2 中看不到嵌入的字体

> ID：13575074
> 
> 赞同：0
> 
> 时间：2012-11-26T23:39:59.693
> 
> 标签：epub, ibooks

我创建了一个 epub 3.0 文件，该文件具有如下字体嵌入

```
 @font-face{
               font-family:Myfont;
               font-weight:normal;
               font-style:normal;
               src:url("Fonts/footfont.otf");
               } 
```

我将字体应用于标签，如下所示：

```
 p{
      font-family:"Myfont";
      font-size:12pt;
     } 
```

我还将 com.apple.ibooks.display-options.xml 包含在 META-INF 中。我可以在 ADE 中看到我的嵌入字体，但在 ipod iTouch 中看不到它。可能是什么原因。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:12:24.397

您是否尝试过添加：

```
<meta property="ibooks:specified-fonts">true</meta> 
```

到.opf 文件？（iBookstoreAssetGuide5.1.pdf 第 26 页）

# php - PHP - 修剪功能仅对第一个字符生效？

> ID：13575075
> 
> 赞同：-3
> 
> 时间：2012-11-26T23:40:00.323
> 
> 标签：php, trim

我正在尝试修剪 $_SERVER['REQUEST_URI'] 以摆脱它后面的 .php 文件。但是经过调查因为没有修剪，所以修剪了/，然后我发现它只是修剪了REQUEST_URI中的第一个字符。

```
<? var_dump (trim($_SERVER['REQUEST_URI'], '/')); ?> 
```

这将返回 string(37) "ncms/admin/login.php?p=login&failed=1"

你可以看到它只是修剪第一个/在ncms之前。

这是未触及的字符串，

```
string(37) "/ncms/admin/login.php?p=login&failed=1" 
```

为什么它只影响第一个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T23:42:03.617

你不需要`trim()`，但你需要[`str_replace()`](http://php.net/str_replace)：

```
str_replace('/', '', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:43:48.173

str_replace 将影响整个变量

```
str_replace('/', '', $_SERVER['REQUEST_URI']); 
```

# google-apps-script - 创建二维数组

> ID：13575077
> 
> 赞同：3
> 
> 时间：2012-11-26T23:40:05.683
> 
> 标签：google-apps-script

我是 JS 新手，需要一些基本帮助：

我有一个包含数据方阵的电子表格。

我可以按如下方式读取这些数据：

```
 var freqArr     = new Array(new Array());
  var freqSheet   = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("freq");
  var freqRows    = freqSheet.getDataRange();
  var freqNumRows = freqRows.getNumRows();
  freqArr = freqSheet.getRange(2, 2, freqNumRows, freqNumRows).getValues(); 
```

我现在想在内存中创建一个数组，类似于我从工作表中读取的数组

```
 var tempArr = new Array(new Array());
  for (var i = 0; i <= 3; i++) {
    for (var j = 0; j <= 3; j++) {        
      tempArr [i][j] = freqArr[i][j] ;
    }
  } 
```

一旦 j incs 从 0 到 1 并且我尝试在 tempArr [i][j] 中存储任何内容，我就会收到错误“TypeError：无法将未定义的属性“0.0”设置为“xxx”

我已经尝试了所有我能想到的创建 tempArr 的组合以及更多组合。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T00:09:38.483

比我聪明得多的人可能会帮助您更好地编写此代码，但在我看来，您希望创建 tempArr 作为主数组，其中包含**2 个**数组。

每个数组内部都有值，因此：

```
// result: tempArr = [[1,2],[4,5]]
tempArr = [] // or new Array
for (var i = 0; i <= 3; i++) {
  tempArr[i] = [];
  for (var j = 0; j <= 3; j++) {        
    tempArr[i].push(freqArr[i][j]);
  }
} 
```

您在 tempArr 中创建第一个主数组，在您的 for 中，每次循环时，tempArr[i] 都会创建为一个数组，而在第二个 for 中，您希望将 freqArr 的值推送到内部数组。

**UPDATE**在 tempArr[i] 中有一个空间，这会导致它肯定不能工作。对不起！

# actionscript-3 - 如何将动作框架链接到不同舞台 AS3 上的 MOVIE Clip？

> ID：13575080
> 
> 赞同：1
> 
> 时间：2012-11-26T23:40:26.987
> 
> 标签：actionscript-3, action, frame, keyframe

我正在做一个小程序，其中时间轴中有两个关键帧动作，在程序的主屏幕加载之前向用户致意。问题是我需要第 2 帧上的一个按钮，它将用户带到位于图书馆不同阶段的主页。hompage 的代码包含在 main.as 谢谢

# php - 我应该如何在函数中使用 PDO

> ID：13575081
> 
> 赞同：2
> 
> 时间：2012-11-26T23:40:46.467
> 
> 标签：php, mysql, pdo

1：PDO使用准备好的语句，准备好的意思是我们在我认为的许多函数中使用它，并且我们为许多函数准备了它。然后我只想知道我应该在我的所有函数中使用不同的sql查询还是应该我首先在我的 init.php 文件中定义了许多查询（其中包括函数和与 db 的连接），然后在每个函数中将它们传递给函数以使用这些查询？这只是我所描述的示例：

```
$query1 = "Insert into names(id,name) values (:id,:names)"
$query2 = "insert into games(id,name) values (:id,:names)" 
```

然后对于像这样的功能

```
function job($query){
//do the job
} 
```

我问这个问题是因为我在某个地方读到我必须在多个地方使用这个准备好的语句，如果它是真的，我应该如何在函数中使用一些独特的查询？

2：我可以在两个准备好的语句中使用这个 :id :names 吗？或者我必须设置唯一的名称？

```
$query1 = "Insert into names(id,name) values (:id,:names)"
$query2 = "insert into games(id,name) values (:id,:names)" 
```

他们不会互相冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:47:58.087

我当然不会将我的所有查询都定义在一个地方以供以后使用——我会将查询放在将要使用的地方；否则它可能会变得非常混乱，*特别是*如果你将它们命名为`query1`,`query2`等。

如果您有单独准备的相同查询，那么您可以毫无问题地使用相同的标记：

```
$stmt1 = $db->prepare($query1);
$stmt2 = $db->prepare($query2); 
```

您可以为 和 绑定完全不同`:id`的值。`:name``stmt1``stmt2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:44:38.763

如果在每个查询之后绑定 :id 和 :name 就可以了，但是如果在声明两个查询语句后只绑定一次，最后一个绑定的语句将覆盖这些值。如果您愿意，您可以创建一个函数来处理查询，我个人每次都会写出查询，只是为了留意我在做什么，以防我需要在最后一刻进行更改，但这可以简化您的工作。

# c - 在 C 中返回浮点变量会丢失其精度

> ID：13575082
> 
> 赞同：4
> 
> 时间：2012-11-26T23:40:59.393
> 
> 标签：c, function, floating-point, return

嗨，是的，我在使用以下代码时遇到了一些问题。上面的函数执行并将 132.87 输出到 float 变量，但是当我将其返回到主程序时，输出会缩短为 132.00

这显然是我想念的简单的东西，有人可以帮我解决这个问题吗？非常感激。

```
calcSigmaXY(max) {
 int count= 0;
 float runTotal = 0, product[max];
 for (count = 1; count <= max; count++) {
     product[count] = pointData[count][1] * pointData[count][2];
     runTotal = runTotal + product[count];
 }
 printf("\nruntotal is %4.2f",runTotal); // outputs 132.87
 return(runTotal);
} 

int maxPoints = 6;
float sigmaXY = 0,
sigmaXY = calcSigmaXY(maxPoints);
printf("\nsigmaxy set to : %4.2f\n", sigmaXY); // outputs 132.00 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T23:43:06.053

在某些 C 版本中，返回值和类型默认为`int`，因此通过声明您的函数

```
calcSigmaXY(max) 
```

你基本上是在说

```
int calcSigmaXY(max) 
```

ergo 精度损失 -`float`您返回的将转换为`int`. 将您的功能声明为

```
float calcSigmaXY(max) {
      //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T23:44:06.427

您必须声明 的返回值`calcSigmaXY`，否则返回值是`int`隐式的。

如果您声明您的函数`float calcSigmaXY`应该按预期工作。

还要考虑在您的编译器/IDE 中启用和读取警告。

# python - 从嵌套字典中的项目构造 pandas DataFrame

> ID：13575090
> 
> 赞同：117
> 
> 时间：2012-11-26T23:41:31.213
> 
> 标签：python, pandas, dataframe, multi-index

假设我有一个嵌套字典 'user_dict' 的结构：

*   **级别 1：** UserId（长整数）
*   **级别 2：**类别（字符串）
*   **第 3 级：**各种属性（浮点数、整数等）

例如，此字典的条目将是：

```
user_dict[12] = {
    "Category 1": {"att_1": 1, 
                   "att_2": "whatever"},
    "Category 2": {"att_1": 23, 
                   "att_2": "another"}} 
```

中的每个项目都`user_dict`具有相同的结构，并且`user_dict`包含大量我想提供给 pandas DataFrame 的项目，从属性构造系列。在这种情况下，分层索引将对此有用。

具体来说，我的问题是是否存在一种方法来帮助 DataFrame 构造函数理解该系列应该从字典中“级别 3”的值构建？

如果我尝试类似：

```
df = pandas.DataFrame(users_summary) 
```

“级别 1”（UserId）中的项目被视为列，这与我想要实现的目标相反（将 UserId 作为索引）。

我知道我可以在遍历字典条目后构建系列，但如果有更直接的方法，这将非常有用。一个类似的问题是询问是否可以从文件中列出的 json 对象构造 pandas DataFrame。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-11-27T10:05:17.983

pandas MultiIndex 由一个元组列表组成。因此，最自然的方法是重塑您的输入字典，使其键是与您需要的多索引值相对应的元组。然后，您可以`pd.DataFrame.from_dict`使用以下选项构建您的数据框`orient='index'`：

```
user_dict = {12: {'Category 1': {'att_1': 1, 'att_2': 'whatever'},
                  'Category 2': {'att_1': 23, 'att_2': 'another'}},
             15: {'Category 1': {'att_1': 10, 'att_2': 'foo'},
                  'Category 2': {'att_1': 30, 'att_2': 'bar'}}}

pd.DataFrame.from_dict({(i,j): user_dict[i][j] 
                           for i in user_dict.keys() 
                           for j in user_dict[i].keys()},
                       orient='index')

               att_1     att_2
12 Category 1      1  whatever
   Category 2     23   another
15 Category 1     10       foo
   Category 2     30       bar 
```

另一种方法是通过连接组件数据框来构建您的数据框：

```
user_ids = []
frames = []

for user_id, d in user_dict.iteritems():
    user_ids.append(user_id)
    frames.append(pd.DataFrame.from_dict(d, orient='index'))

pd.concat(frames, keys=user_ids)

               att_1     att_2
12 Category 1      1  whatever
   Category 2     23   another
15 Category 1     10       foo
   Category 2     30       bar 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-01-22T03:41:56.340

[`pd.concat`](https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.concat.html)接受字典。考虑到这一点，可以通过使用[字典理解](https://www.python.org/dev/peps/pep-0274/)来构建将键映射到子帧的字典，从而在简单性和性能方面改进当前接受的答案。

```
pd.concat({k: pd.DataFrame(v).T for k, v in user_dict.items()}, axis=0) 
```

或者，

```
pd.concat({
        k: pd.DataFrame.from_dict(v, 'index') for k, v in user_dict.items()
    }, 
    axis=0) 
```

```
 att_1     att_2
12 Category 1     1  whatever
   Category 2    23   another
15 Category 1    10       foo
   Category 2    30       bar 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-07T14:44:33.207

所以我过去也使用 for 循环来遍历字典，但我发现工作得更快的一件事是先转换为面板，然后再转换为数据框。假设你有一本字典 d

```
import pandas as pd
d
{'RAY Index': {datetime.date(2014, 11, 3): {'PX_LAST': 1199.46,
'PX_OPEN': 1200.14},
datetime.date(2014, 11, 4): {'PX_LAST': 1195.323, 'PX_OPEN': 1197.69},
datetime.date(2014, 11, 5): {'PX_LAST': 1200.936, 'PX_OPEN': 1195.32},
datetime.date(2014, 11, 6): {'PX_LAST': 1206.061, 'PX_OPEN': 1200.62}},
'SPX Index': {datetime.date(2014, 11, 3): {'PX_LAST': 2017.81,
'PX_OPEN': 2018.21},
datetime.date(2014, 11, 4): {'PX_LAST': 2012.1, 'PX_OPEN': 2015.81},
datetime.date(2014, 11, 5): {'PX_LAST': 2023.57, 'PX_OPEN': 2015.29},
datetime.date(2014, 11, 6): {'PX_LAST': 2031.21, 'PX_OPEN': 2023.33}}} 
```

命令

```
pd.Panel(d)
<class 'pandas.core.panel.Panel'>
Dimensions: 2 (items) x 2 (major_axis) x 4 (minor_axis)
Items axis: RAY Index to SPX Index
Major_axis axis: PX_LAST to PX_OPEN
Minor_axis axis: 2014-11-03 to 2014-11-06 
```

其中 pd.Panel(d)[item] 产生一个数据框

```
pd.Panel(d)['SPX Index']
2014-11-03  2014-11-04  2014-11-05 2014-11-06
PX_LAST 2017.81 2012.10 2023.57 2031.21
PX_OPEN 2018.21 2015.81 2015.29 2023.33 
```

然后，您可以点击命令 to_frame() 将其转换为数据帧。我也使用 reset_index 将主轴和次轴转换为列，而不是将它们作为索引。

```
pd.Panel(d).to_frame().reset_index()
major   minor      RAY Index    SPX Index
PX_LAST 2014-11-03  1199.460    2017.81
PX_LAST 2014-11-04  1195.323    2012.10
PX_LAST 2014-11-05  1200.936    2023.57
PX_LAST 2014-11-06  1206.061    2031.21
PX_OPEN 2014-11-03  1200.140    2018.21
PX_OPEN 2014-11-04  1197.690    2015.81
PX_OPEN 2014-11-05  1195.320    2015.29
PX_OPEN 2014-11-06  1200.620    2023.33 
```

最后，如果您不喜欢框架的外观，可以在调用 to_frame() 之前使用面板的转置功能更改外观，请参阅此处的文档 [http://pandas.pydata.org/pandas-docs/dev/generated /pandas.Panel.transpose.html](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Panel.transpose.html)

举个例子

```
pd.Panel(d).transpose(2,0,1).to_frame().reset_index()
major        minor  2014-11-03  2014-11-04  2014-11-05  2014-11-06
RAY Index   PX_LAST 1199.46    1195.323     1200.936    1206.061
RAY Index   PX_OPEN 1200.14    1197.690     1195.320    1200.620
SPX Index   PX_LAST 2017.81    2012.100     2023.570    2031.210
SPX Index   PX_OPEN 2018.21    2015.810     2015.290    2023.330 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-03-30T14:19:04.013

如果有人想在没有多索引的情况下以“长格式”（叶值具有相同类型）获取数据框，您可以这样做：

```
pd.DataFrame.from_records(
    [
        (level1, level2, level3, leaf)
        for level1, level2_dict in user_dict.items()
        for level2, level3_dict in level2_dict.items()
        for level3, leaf in level3_dict.items()
    ],
    columns=['UserId', 'Category', 'Attribute', 'value']
)

    UserId    Category Attribute     value
0       12  Category 1     att_1         1
1       12  Category 1     att_2  whatever
2       12  Category 2     att_1        23
3       12  Category 2     att_2   another
4       15  Category 1     att_1        10
5       15  Category 1     att_2       foo
6       15  Category 2     att_1        30
7       15  Category 2     att_2       bar 
```

（我知道最初的问题可能希望（I.）将第 1 级和第 2 级作为多索引，将第 3 级作为列，并且（II.）询问除迭代字典中的值之外的其他方法。但我希望这个答案仍然相关并且有用（I.）：对于像我这样试图找到一种方法将嵌套字典变成这种形状的人，谷歌只返回这个问题和（II.）：因为其他答案也涉及一些迭代，我发现这个方法灵活且易于阅读；但不确定性能。）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-03-24T21:24:20.940

通过将字典键展平到元组链，该解决方案应该适用于任意深度

```
def flatten_dict(nested_dict):
    res = {}
    if isinstance(nested_dict, dict):
        for k in nested_dict:
            flattened_dict = flatten_dict(nested_dict[k])
            for key, val in flattened_dict.items():
                key = list(key)
                key.insert(0, k)
                res[tuple(key)] = val
    else:
        res[()] = nested_dict
    return res

def nested_dict_to_df(values_dict):
    flat_dict = flatten_dict(values_dict)
    df = pd.DataFrame.from_dict(flat_dict, orient="index")
    df.index = pd.MultiIndex.from_tuples(df.index)
    df = df.unstack(level=-1)
    df.columns = df.columns.map("{0[1]}".format)
    return df 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-09T01:06:48.953

对于表示数据的其他方式，您不需要做太多事情。例如，如果您只想将“外部”键作为索引，将“内部”键作为列，将值作为单元格值，则可以这样做：

```
df = pd.DataFrame.from_dict(user_dict, orient='index') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-05T04:41:09.443

基于经过验证的答案，对我来说这效果最好：

```
ab = pd.concat({k: pd.DataFrame(v).T for k, v in data.items()}, axis=0)
ab.T 
```

# javascript - 清除文本字段 JavaScript 中的文本

> ID：13575095
> 
> 赞同：1
> 
> 时间：2012-11-26T23:41:53.773
> 
> 标签：javascript, textfield

我想清除文本字段中的文本，例如如果你去 [gmail帐户注册](https://accounts.google.com/SignUp?continue=https://accounts.google.com/ManageAccount) 你可以看到你开始输入后文本会被清除，很简单

`document.getElementById("FirstName").value = "";`行不通，字`First`还在那边。

那么如何清除呢？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T23:44:03.513

仔细看看 HTML。该字符串`First`不是文本框的值，而是通过 CSS 放置在其上的 SPAN。

```
<label id="firstname-label" class="firstname">
  <strong>First name</strong>
  <input id="FirstName" type="text" spellcheck="false" name="FirstName" value="" n="1">
  <span id="firstname-placeholder" class="placeholder-text" style="display: block;">First</span>
</label> 
```

该技术有时被称为[水印](https://stackoverflow.com/questions/7433589/input-with-watermark-css-jquery)。

**至于如何改变值和隐藏SPAN**

一旦输入有一个值（它看起来像是绑定在 keyUp 事件上），这个内联样式就会被添加到 span`display: none;`中。如果您想以编程方式设置`input#FirstName`和清除范围，您需要以编程方式触发触发隐藏的事件或以编程方式隐藏范围（看起来每个具有占位符值的输入都使用 ID `<input ID>-placeholder`，因此您可以猜到正确的跨度基于您正在设置的输入的 ID）

# c# - 如何从跨域iframe中的子文档中获取父文档中的iframe元素？

> ID：13575098
> 
> 赞同：2
> 
> 时间：2012-11-26T23:42:18.093
> 
> 标签：c#, internet-explorer, mshtml, shdocvw

我有这段代码会做相反的事情：获取给定 iframe 的子文档`element`：

```
var htmlWindow = (element as IHTMLFrameBase2).contentWindow;
if (htmlWindow == null) return null;
// Convert IHTMLWindow2 to IWebBrowser2 using IServiceProvider.
IServiceProvider sp = (IServiceProvider)htmlWindow;
// Use IServiceProvider.QueryService to get IWebBrowser2 object.
Object brws = null;
//brws = 
sp.QueryService(ref IID_IWebBrowserApp, ref IID_IWebBrowser2, out brws);
// Get the document from IWebBrowser2.
SHDocVw.IWebBrowser2 browser = (SHDocVw.IWebBrowser2)(brws);
return (IHTMLDocument2)browser.Document; 
```

我的问题是我该怎么做相反的事情？我试着给孩子这样做，`document`但我得到一个 null `frameWindow`：

```
Object frameWindow;
IServiceProvider isp = (IServiceProvider)document.parentWindow;
isp.QueryService(ref IID_IWebBrowserApp, ref IID_IHTMLFrameBase, out frameWindow); 
```

以下是供您参考的所有 GUID：

```
private static Guid IID_IWebBrowserApp = new Guid("0002DF05-0000-0000-C000-000000000046");
private static Guid IID_IWebBrowser2 = new Guid("D30C1661-CDAF-11D0-8A3E-00C04FC9E26E");
private static Guid IID_IHTMLFrameBase2 = new Guid("3050F6DB-98B5-11CF-BB82-00AA00BDCE0B");
private static Guid IID_IHTMLFrameBase = new Guid("3050F311-98B5-11CF-BB82-00AA00BDCE0B");
private static Guid IID_IHTMLWindow2 = new Guid("332C4427-26CB-11D0-B483-00C04FD90119"); 
```

这是我的`IServiceProvider`：

```
[ComImport(), ComVisible(true), Guid("6D5140C1-7436-11CE-8034-00AA006009FA"),
InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
private interface IServiceProvider
{
    [return: MarshalAs(UnmanagedType.I4)]
    [PreserveSig]
    int QueryService(ref Guid guidService, ref Guid riid, [MarshalAs(UnmanagedType.Interface)] out object ppvObject);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:17:02.007

好吧，实际上您将无法从主浏览器获取 Iframe 文档/元素。您必须执行 javascript。就我而言，幸运的是，我的目标网站中提供了 jquery，因此我使用以下 express 从内部 iframe 之一获取一些文本。

我这样做了：

```
 var tmp = browser.Document.InvokeScript("eval", new object[] { "$(\"#iframe_id\").contents().find('#element').html())" }); 
```

在您的情况下，如果您真的想对目标 iframe 中某个元素的 html 做某事，那么您应该准确地抓取它的 html，然后在主浏览器窗口中创建一个空元素，并用您抓取的那个更新它的 html 并执行你的东西。

这是我迄今为止找到的唯一方法。

# jquery - 将 ajax 有效负载中的数组字符串化到 WCF 端点

> ID：13575100
> 
> 赞同：1
> 
> 时间：2012-11-26T23:42:22.053
> 
> 标签：jquery, ajax, wcf, stringify

我有以下 Javascript：

```
 $.ajax({
    url: "/Web/WebServices/Operation.svc/SetScope",
    type: "POST",
    contentType: "application/json; charset=utf-8",
    beforeSend: function () {
    },
    dataType: "json",
    cache: false,
    data: JSON.stringify({
        Id: Id,
        RIds: RIds,
        rScope: rScope 
    }),
    success: function (data) { onSuccess(data); },
    error: function (data) { onError(data); }
    }); 
```

如果你看一下数据位——

*   Id 是一个整数
*   RIds 是整数数组
*   rScope 是一个对象数组，每个对象都包含一个 int 和一个字符串

的结果

```
data: JSON.stringify({
            Id: Id,
            RIds: RIds,
            rScope: rScope 
        }) 
```

是

> '{"Id":1,"rIds":[1,2,3,4],"rScope":[{"id":3,"type":"barney"},{"id":2, “类型”：“ted”}]}'

将其传递给`$.parseJSON`返回预期的对象。

问题是它返回 400 Bad Request。

等待调用的签名在 IIS 中托管的 WCF 中

```
public OperationResult SetScope(int rId, string rIds, string rScope) 
```

如果我从代码中删除 rScope，一切都很好，但它似乎在填充对象而不是原语的数组时遇到问题。

我在这里想念什么？

我发现了类似的问题，但没有一个能够真正解释我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:48:34.213

如果我没记错的话，你的解析结果暗示这`rScope`是一个对象数组，每个对象都有一个`id`和一个`type`属性，而不仅仅是一个简单的字符串。

```
"rScope":[{"id":3,"type":"barney"},{"id":2,"nodetype":"ted"}] 
```

如果您有类似的课程：

```
public class ScopeClass{
    public int Id {get; set;}
    public string Type {get; set;}
} 
```

并在您的方法中使用它，如下所示：

```
public OperationResult SetScope(int rId, string rIds, IList<ScopeClass> rScope) 
```

### 编辑

实际上，我刚刚注意到您还有第二个对象`nodetype`，而不是类型。

如果您使用上述方法，您需要确保在您传递的数据中，节点类型也被命名为类型，否则您无法匹配这些值。

此外，`Type`由于 C# 的`Type`. 如果您有任何影响，您可以更新`Type`为更有意义的内容，例如`GroupType`它所代表的内容，然后在传递的数据中将其命名为相同的名称。然后模型绑定器应该简单地对其进行魔术匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:03:40.267

您的操作需要一个字符串作为`rIds`参数，但您将一个数组传递给它。有一些转换是自动发生的，但只有非常简单的转换（例如数字到字符串）。此外， rScope 需要一个字符串，但您正在将一个对象传递给它。

您可以做几件事。第一种是将数据作为字符串而不是作为它们的“正常”类型传递——这意味着对`RIds`和`rScope`参数进行字符串化：

```
var data = JSON.stringify({
    Id: Id,
    rIds: JSON.stringify(RIds),
    rScope: JSON.stringify(rScope)
});
$.ajax({
   url: "/Web/WebServices/Operation.svc/SetScope",
   type: "POST",
   contentType: "application/json; charset=utf-8",
   beforeSend: function () { },
   dataType: "json",
   cache: false,
   data: data,
   success: function (data) { onSuccess(data); },
   error: function (data) { onError(data); }
}); 
```

另一种选择与 François Wahl 提到的一致，即制作将接收您发送的数据的类型。您需要为`rIds`和`rScope`参数执行此操作：

```
public class StackOverflow_13575100
{
    [ServiceContract]
    public class Service
    {
        [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]
        public string SetScope(int rId, string rIds, string rScope)
        {
            return string.Format("{0} - {1} - {2}", rId, rIds, rScope);
        }
        [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
        public string SetScopeTyped(int rId, int[] rIds, ScopeClass[] rScope)
        {
            return string.Format("{0} - {1} - {2}",
                rId,
                "[" + string.Join(", ", rIds) + "]",
                "[" + string.Join(", ", rScope.Select(s => s.ToString())) + "]");
        }
    }
    [DataContract]
    public class ScopeClass
    {
        [DataMember(Name = "id")]
        public int Id { get; set; }
        [DataMember(Name = "type")]
        public string Type { get; set; }

        public override string ToString()
        {
            return string.Format("Scope[Id={0},Type={1}]", Id, Type);
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "application/json";
        string data = @"{""Id"":1,""rIds"":[1,2,3,4],""rScope"":[{""id"":3,""type"":""barney""},{""id"":2,""type"":""ted""}]}";
        Console.WriteLine(data);
        try
        {
            Console.WriteLine(c.UploadString(baseAddress + "/SetScope", data));
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }

        c.Headers[HttpRequestHeader.ContentType] = "application/json";
        Console.WriteLine(c.UploadString(baseAddress + "/SetScopeTyped", data));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# javascript - 如何使用 Backbone.Marionette 处理嵌套的 CompositeView？

> ID：13575101
> 
> 赞同：11
> 
> 时间：2012-11-26T23:42:23.883
> 
> 标签：javascript, jquery, backbone.js, marionette

我正在使用 Backbone 进入更大规模的数据结构，并且遇到了通过 CompositeViews 可以很好地表示数据的情况；也就是说，CollectionViews 在它们周围添加了“添加绒毛”，例如标题、按钮等。

但是，我在将 CompositeView 相互嵌套时遇到了很多困难。使用 CompositeView 上的标准 itemView 属性来呈现另一个 CompositeView 似乎根本没有触发。

假设我有一个**父 ItemView**，这样实例化（按照[Derick Bailey 的示例](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)；假设此顶层是`fetch()`调用集合上的初始值的位置）：

```
var User = Backbone.Model.extend({});

var UserCollection = Backbone.Collection.extend({
    model: User
});

var userList = new UserCollection(userData);

var schedulerCompositeView = new SchedulerCompositeView({
    collection: userList
});

schedulerCompositeView.render();

this.ui.schedulerWidget.html(schedulerCompositeView.el); 
```

**SchedulerCompositeView**看起来像这样：

```
return Backbone.Marionette.CompositeView.extend({
    template: Handlebars.compile(schedulerCompositeViewTemplate),
    itemView: SchedulerDetailCompositeView,
    appendHtml: function (collectionView, itemView) {
        collectionView.$("#schedulerGroups").append(itemView.el);
    }
}); 
```

最后，**SchedulerDetailCompositeView**：

```
return Backbone.Marionette.CompositeView.extend({
    template: Handlebars.compile(schedulerDetailCompositeViewTemplate),
    itemView: SchedulerDetailItemView,
    appendHtml: function (collectionView, itemView) {
        collectionView.$("#schedulerDetailStops").append(itemView.el);
    }
}); 
```

SchedulerDetailCompositeView 永远不会被实例化；事实上，它的`appendHtml()`方法似乎根本不会触发。

显然这里缺少一些其他信息；显然目的是将集合/模型传递给 SchedulerDetailCompositeView，但由于嵌套的 CompositeViews，我不确定这样做的正确技术是什么。

作为参考，这是我试图实现的结构的粗略模型；如果可能有比嵌套 CompositeViews 更好的方法来实现这个目标，我当然会全神贯注：

[http://jsfiddle.net/KAWB8/](http://jsfiddle.net/KAWB8/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T23:29:18.167

尤里卡！deven98602 让我走上了正确的道路。

要记住的关键是，如果你嵌套了多个 CompositeViews（或 CollectionViews），每个向下级联的层级将代表其父集合中的一个单元；也就是说，我之前的**SchedulerDetailCompositeView表示****SchedulerCompositeView**集合中的单个模型。因此，如果我正在构建嵌套的 CompositeViews（可能基于深度嵌套的数据），我必须在这些级联子级上重新定义一个集合，因为它们只有一个与之关联的模型，而不是要呈现的正确集合。

也就是说，更新后的**SchedulerDetailCompositeView**如下所示：

```
return Backbone.Marionette.CompositeView.extend({
    template: Handlebars.compile(schedulerDetailCompositeViewTemplate),
    itemView: SchedulerDetailItemView,
    initialize: function () {
        var Load = Backbone.Model.extend();

        var LoadCollection = Backbone.Collection.extend({
            model: Load
        });

        // this array of loads, nested within my JSON data, represents
        //  a new collection to be rendered as models using SchedulerDetailItemView
        var loadList = new LoadCollection(this.model.get("loads"));

        this.collection = loadList;
    },
    appendHtml: function (collectionView, itemView) {
        collectionView.$("#schedulerDetailStops").append(itemView.el);
    }
}); 
```

集合设置后，`appendHtml()`按预期触发并渲染此新集合中的每个新模型。

# android - 操作栏中的细进度条

> ID：13575104
> 
> 赞同：2
> 
> 时间：2012-11-26T23:42:38.280
> 
> 标签：android

我正在寻找任何在屏幕顶部包含一个细进度条的代码示例，类似于[this](http://developer.android.com/design/building-blocks/progress.html)。

我只能找到有关“常规”进度条的信息：

![在此处输入图像描述](../Images/f684e0695b8e1670aa0bfbee8a31f28c.png)

我的链接中调用的细蓝色进度条是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T06:05:34.167

为了使它变薄，只需给你的进度条一个静态高度，例如：android:layout_height="4dp"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:49:00.067

新的 Android 版本水平进度条通常是这样的：

```
<ProgressBar
     style="@android:style/Widget.ProgressBar.Horizontal"
     ... /> 
```

[这是自定义示例](http://www.jagsaund.com/blog/2011/11/6/customizing-your-progress-bar-part-one.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T22:21:21.753

You can also get the progress bar for lower Android versions using ActionBarSherlock.

The link for the source code: [http://actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)

In the zip file, go to actionbarsherlock-samples -> demos. You will get the code in "Progress.java" in the src folder.

# jquery - jquery carousel - 似乎无法让以前的图像滑入

> ID：13575116
> 
> 赞同：3
> 
> 时间：2012-11-26T23:43:58.157
> 
> 标签：jquery, carousel

请jsfiddle：http: [//jsfiddle.net/Snp7F/2/](http://jsfiddle.net/Snp7F/2/)

单击下一个按钮效果很好（当前图像向左滑动，下一个图像滑入），但是当我单击上一个按钮时它确实可以工作，但是它不会在集合中的上一个图像中滑动。

我不确定我做错了什么，有人可以帮我吗？

这是代码：

```
$.carousel = function(obj){
var width = $(obj).find('ul').find("li:first").outerWidth();

$(obj).find('.slider_prev').click(function() {
   if($(obj).find('li').length > 1) {
       $(obj).find('ul').animate({marginLeft:326},750,function(){
            $(this).find("li:last").after($(this).find("li:first"));
            $(this).css({marginLeft:0});
       })
   }               
   return false;
});
$(obj).find('.slider_next').click(function() {
   if($(obj).find('li').length > 1) {
        $(obj).find('ul').animate({marginLeft:-326},750,function(){
            $(this).find("li:last").after($(this).find("li:first"));
            $(this).css({marginLeft:0});
        })
   }
   return false;
}); 
}
$.carousel('#slider_1');​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:39:32.057

在任何给定时间，您实际正在查看的图像的**左右**都应该有一个图像。我会更新逻辑以包含第三个`li`.

# differential-equations - 绘制非线性微分方程的解

> ID：13575119
> 
> 赞同：3
> 
> 时间：2012-11-26T23:44:05.557
> 
> 标签：differential-equations, maxima

我在 Maxima 中有一个微分方程组。我正在尝试找出解决方案。

```
diff_eq1: 'diff(p(t),t) = (5/2 + (3^(1/2))/24 - (5/8)*p(t) - ((3^(1/2))/24)*q(t)) * p(t);
diff_eq2: 'diff(q(t),t) = (7/8 + (3*(3^(1/2))/2) - (3*(3^(1/2))/8)*p(t) - (7/8)*q(t)) * q(t);
atvalue (p(t), t=0, 0.25);
atvalue (q(t), t=0, 3);
sol: desolve([diff_eq1, diff_eq2], [p(t),q(t)]);
plot2d([rhs(sol[1]), rhs(sol[2])], [t,0,5]); 
```

但我有一个错误：

```
plot2d: expression evaluates to non-numeric value everywhere in plotting range.
plot2d: expression evaluates to non-numeric value everywhere in plotting range.
plot2d: nothing to plot. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:46:46.250

似乎maxima没有找到解决方案。但是，您可以使用 Runge-Kutta 方法来获得数值结果。

[http://maxima.sourceforge.net/docs/manual/en/maxima_50.html](http://maxima.sourceforge.net/docs/manual/en/maxima_50.html)

```
diff_eq1: (5/2 + (3^(1/2))/24 - (5/8)*p - ((3^(1/2))/24)*q) * p;
diff_eq2: (7/8 + (3*(3^(1/2))/2) - (3*(3^(1/2))/8)*p - (7/8)*q) * q;

(p0: 0.25, q0: 3);
sol: rk([diff_eq1, diff_eq2], [p, q], [p0, q0], [t, 0, 2, 0.1])$
pq: map( lambda([x], [x[2], x[3]]), sol)$
plot2d( [discrete, pq], [xlabel, "p"], [ylabel, "q"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T23:25:50.620

查看 Maxima 函数“plotdf”。它绘制方向场并绘制解（数值计算）。

# android - Eclipse git 在文件中获取错误的相对路径

> ID：13575121
> 
> 赞同：1
> 
> 时间：2012-11-26T23:44:05.957
> 
> 标签：android, eclipse, git, egit

我正在尝试使用 Eclipse 的 git 扩展将两个文件添加并提交到 github 存储库。我已经使用这个 repo 设置好几个星期了。

我只是尝试将文件 set_player_info.xml 添加到 repo，但 Egit 得到了错误的文件相对路径（见图）。

关于如何纠正这个问题的任何想法？我在任何地方都找不到类似的问题，也没有找到任何解决方案。![列出了不正确的相对路径](../Images/2a595414f06e3a713358e49a47029ba1.png)

# wix - WIX 仅创建目录中的最后一个快捷方式

> ID：13575125
> 
> 赞同：1
> 
> 时间：2012-11-26T23:44:16.517
> 
> 标签：wix, windows-installer, wix3.5

我有以下 WIX (3.7) 代码（通用）问题是当我添加超过 1 个快捷方式时，在安装过程中只创建了最后一个。我检查了日志，它只执行了一个 CreateShortcut 实例......

```
 <Directory Id="ProgramMenuFolder">
                <Directory Id="company_StartMenu" Name="company">
                    <Component Guid="FBF1EE90-789F-4891-BF3D-C73E6E786BA3" Id="comapny_StartMenu">
                        <CreateFolder />
                        <RemoveFolder Id="company_StartMenu" On="uninstall" />
                    </Component>
                    <Directory Id="AppDir_StartMenu" Name="app">
                        <Component Guid="93ECCEED-C0B6-46B5-ADA6-3E45BD0A1B2C" Id="AppDir_StartMenu">
                            <CreateFolder />
                            <RemoveFolder Id="AppDir_StartMenu" On="uninstall" />
                            <Shortcut Id="__radDD6BE_STARTSHORTCUT" Name="app" Description="Start app"  Target="runtime.exe" Advertise="no">
                                <Icon Id="___radDD6BE_STA" SourceFile="C:\path\appicon.ico" />       </Shortcut>
                            <Shortcut Id="__rad5206D_openfolder"    Name="Open folder"   Description="Open install folder " Target="[INSTALLDIR]" Advertise="no"></Shortcut>
                        </Component>
                    </Directory>
                </Directory>
            </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:56:31.533

使用此示例代码，我可以在安装时添加两个快捷方式

A）应用程序的快捷方式
B）快捷方式链接到安装文件夹

```
<DirectoryRef Id="ApplicationProgramsFolder">
  <Component Id="ApplicationShortCutA" Guid="{D5318419-F1C2-4D4A-9F21-7DD8C9916426}">

    <Shortcut  Id="AppShortCutA" Name="!(wix.Product)"
              Description="!(wix.ProductDesc)"
              Target="[INSTALLDIR]SomeFileA.txt"
              WorkingDirectory="INSTALLDIR" />

    <RegistryKey Root="HKCU" Key="!(wix.Manufacturer)\!(wix.Product)" Action="createAndRemoveOnUninstall">
      <RegistryValue Name="ShortCutA" Type="integer" Value="1" KeyPath="yes"  />
    </RegistryKey>

    <RemoveFolder Id="ApplicationShortCutA" On="uninstall"/>
  </Component>

  <Component Id="OpenFolderShortCut" Guid="{5596B2C5-A460-439d-838E-4B134EE6FDD1}">
    <CreateFolder />
    <Shortcut Id="OpenFolderLink" Name="Open Folder"
              Description="Open install Folder" Target="[INSTALLDIR]"
              Advertise="no" WorkingDirectory="INSTALLDIR" />

    <RegistryKey Root="HKCU" Key="!(wix.Manufacturer)\!(wix.Product)" Action="createAndRemoveOnUninstall">
      <RegistryValue Name="OpenInstallFolder" Type="integer" Value="1" KeyPath="yes" />
    </RegistryKey>

    <RemoveFolder Id="OpenFolderShortCut" On="uninstall"/>
  </Component>
</DirectoryRef> 
```

HTH
PS 未验证卸载 ;)

# matlab - MATLAB中的曲线拟合：不同的结果形式工具箱与命令行？

> ID：13575126
> 
> 赞同：2
> 
> 时间：2012-11-26T23:44:17.393
> 
> 标签：matlab, curve-fitting

这是我用于 Y 数据的数据：

```
0.577032413537833
0.288198874369377
0.192282280031568
0.143824619265244
0.114952782524097
0.0960518606520442
0.0824041879978560
0.0719078360110914
0.0640919744028295
0.0572120310249072
0.0519630635470660
0.0479380073164273
0.0443712721513307 
```

X 只是从 1 到 13 的整数值，我知道这是在 MATLAB 上运行 GUI cftool 的形式 a*x^b+c 的幂函数，具有相当高的 R 平方值 (1)

为了在命令行上执行拟合，我使用了：

```
>> g = fittype('a*x^b+c','coeff',{'a','b','c'})
>> x=1:13;
>> [c3,gof3] = fit(x',B3(:,1),g) 
```

这导致

c3 =

```
 General model:
   c3(x) = a*x^b+c
 Coefficients (with 95% confidence bounds):
   a =        -179  (-1.151e+005, 1.148e+005)
   b =    0.001066  (-0.6825, 0.6847)
   c =       179.5  (-1.148e+005, 1.151e+005) 
```

gof3 =

```
 sse: 0.0354
   rsquare: 0.8660
       dfe: 10
adjrsquare: 0.8392
      rmse: 0.0595 
```

哪个不一样

```
General model Power2:
       f(x) = a*x^b+c
Coefficients (with 95% confidence bounds):
   a =      0.5771  (0.5765, 0.5777)
   b =      -1.001  (-1.004, -0.9983)
   c = -8.972e-005  (-0.0005845, 0.000405)

Goodness of fit:
  SSE: 4.089e-007
  R-square: 1
  Adjusted R-square: 1
  RMSE: 0.0002022 
```

我在 cftool GUI 界面上运行回归时得到的。我在这里缺少哪些选项，在看似模型上给了我相当不同的结果？a = -179 很可疑....

提前感谢您的投入。

哦，还有，一旦我把它们整理出来，有没有办法从拟合模型中只获得特定的价值？说，我只对 A 的值感兴趣。

对于 gof，我知道我可以使用 gof.rsquare 提取...等等，但是对于 cfit 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T06:34:16.333

当我尝试做

```
>> g = fittype('a*x^b+c','coeff',{'a','b','c'})
>> x=1:13;
>> [c3,gof3] = fit(x',B3(:,1),g) 
```

我有

```
Warning: Start point not provided, choosing random start point. 
> In Warning>Warning.throw at 31
  In fit>iFit at 320
  In fit at 109 
```

所以我把它改成了

```
>> [c3,gof3] = fit(x', B3(:,1),g, 'Startpoint', [0 0 0]) 
```

这给了我

```
c3 = 

     General model:
     c3(x) = a*x^b+c
     Coefficients (with 95% confidence bounds):
       a =      0.5771  (0.5765, 0.5777)
       b =      -1.001  (-1.004, -0.9983)
       c =  -8.972e-05  (-0.0005844, 0.000405) 
```

这确实与您从`cftool`GUI 获得的更接近。

GUI 的“随机起点”很可能比 CLI 适合的要好得多，所以你很幸运。

如果可以始终如一地产生这些结果，那么必须对 GUI 进行编程，以便在可用时也使用全局优化工具箱，或一些类似的方案。但这只是疯狂的猜测。

# java - 指向同一个对象的对象引用

> ID：13575133
> 
> 赞同：-3
> 
> 时间：2012-11-26T23:44:46.473
> 
> 标签：java, class, pointers, reference

例如，假设我们有一个`Board`包含许多字段的类（即一个相当复杂的类）。我们像这样实例化一个 Board：

```
Board b = new Board(); 
```

请注意，为了这个示例，我没有在构造函数中输入任何参数，尽管在实际示例中，这些参数可能是必需的。如果我们要实例化一个新的 Board 实例并将其设置为如下所示：

```
Board c = b; 
```

这实际上不会创建一个新板。据我所知，`c`现在`b`指向同一个内存区域，同一个 Board 对象。所以，如果我要改变一些关于 的东西`b`，比如说增加一个整数字段，就像这样：

```
b.count++;//Assume count is an integer field in the Board class. 
```

该值`c.count`也应该增加。但是，当我自己这样做时，它不起作用。 `b.count`是递增的，但`c.count`不是。
谁能向我解释为什么会这样？这种效果是我想要发生的，因此任何关于如何实现它的建议都会非常有帮助（一般的例子很好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:48:14.343

又错了：

```
package cruft;

/**
 * Board description here
 * @author Michael
 * @link
 * @since 11/26/12 6:46 PM
 */
public class Board {

    public int count;

    public static void main(String[] args) {
        Board b = new Board();
        Board c = b;
        System.out.println("b before: " + b);
        System.out.println("c before: " + c);

        ++b.count;

        System.out.println("b after : " + b);
        System.out.println("c after : " + c);
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append("Board");
        sb.append("{count=").append(count);
        sb.append('}');
        return sb.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:49:35.137

这不应该发生。看看这个例子。

```
public class Board {

    public Integer count = 0;

    public static void main(String[] args)
    {
        Board b = new Board();
        Board c = b;

        c.count++;

        System.out.println("b.count="+b.count);
        System.out.println("c.count="+c.count);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T23:49:54.573

这不会发生在单个线程中。如果您为第二个线程执行 c=b，则适用正常的可见性规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T23:50:07.013

首先，您应该尽量避免`public`在对象中使用字段。使用一个`private`字段，然后使用一个`getFieldName()`和一个`setFieldName(FieldType arg)`方法。这样您就可以更好地控制发生的事情，并且如果您希望在某个变量更改时发生其他事情，您可以添加代码。

话虽如此，您的代码中一定有错误，因为：

```
public static void main(String[] args) {
    Board b = new Board();
    Board c = b;

    System.out.println("BEFORE++: b.count = " + b.count);
    System.out.println("BEFORE++: c.count = " + c.count);

    b.count++;

    System.out.println("AFTER++: b.count = " + b.count);
    System.out.println("AFTER++: c.count = " + c.count);
}

public static class Board {
    public int count = 0;
} 
```

输出：

```
BEFORE++: b.count = 0
BEFORE++: c.count = 0
AFTER++: b.count = 1
AFTER++: c.count = 1 
```

# r - 如何命名数据框中的维度？

> ID：13575136
> 
> 赞同：1
> 
> 时间：2012-11-26T23:45:30.520
> 
> 标签：r, dataframe

我被困在应该相当明显的东西上，但是......我有我通过导入没有标题的 CSV 创建的数据框。我现在似乎无法弄清楚如何命名我的列。我发现了很多关于创建新数据框或导入带有标题的数据的说明，但不是在导入数据后添加列/维度名称的说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T23:56:28.263

`names(df) <- c("col1", "col2", ...)`

`colnames(df) <- ...`也可以工作，因为在很多情况下 data.frames 可以被视为矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:14:04.987

```
> a = sample(LETTERS, 10)
> b = sample(LETTERS, 10)
> c = sample(LETTERS, 10)

> D = data.frame(a, b, c)

> colnames(D) = c("colA", "colB", "colC")

> D
       colA colB colC
    1    H    M    Z
    2    F    U    O
    3    S    O    X
    4    K    I    L
    5    O    H    Q 
```

另一种方法：一次分配一个列：

```
> # copy second column and bind it to "col_B"
> D$col_B = D[,2]

> # then delete original column (bound to "colB")
> D[,2] = NULL

> D
        colA colC col_B
    1    H    Z     M
    2    F    O     U
    3    S    X     O
    4    K    L     I
    5    O    Q     H 
```

# javascript - superscrollorama的导航

> ID：13575137
> 
> 赞同：1
> 
> 时间：2012-11-26T23:45:34.420
> 
> 标签：javascript, jquery

您好，我正在使用 superscrollorama [http://johnpolacek.github.com/superscrollorama/](http://johnpolacek.github.com/superscrollorama/)可以以某种方式创建导航，我找不到任何创建方式，我正在使用 scrollTo 插件，但它只滚动一个部分然后它停止。我该怎么办 ？非常感谢您的帮助

这是javascript代码：

```
$('.menu li a').on('click',function(e){
    e.preventDefault();
    var $this = $(this),
        pieces = $this.attr('class').split('m_');

    if(typeof pieces[1] != "undefined"){
        var section = $('body').find('#'+pieces[1]);
        var pos = section.position();

        $(window).scrollTo(pos.top, 2500, {queue:true});
    }
}); 
```

十分感谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T17:11:51.197

我没有使用超级滚动进行导航，我只是使用了 jquery animate。

```
`// Scroll
$('a.scroll').click(function(e) { 
  e.preventDefault();
scroll($(this).attr("href"));
});`

`// LINKS
function scroll(link){
  $('html,body').animate({scrollTop: $(link).offset().top - 0}, 'slow');
}` 
```

请注意，您可能需要将链接代码包含在 jquery on ready 函数中。

# php - 使用数据库中的列 ID 作为用户 ID 是否有任何问题

> ID：13575138
> 
> 赞同：4
> 
> 时间：2012-11-26T23:45:34.493
> 
> 标签：php, variables, userid

我总是在我的数据库中包含一个具有自动增量功能的列 ID。有什么理由我不想将其用作社交网站的用户 ID。该 ID 将为公众所知并在 URL 中使用，等等。认为这比添加另一个功能来为成员创建单独的唯一 ID 更容易。在我在代码中使用它之前，只是想看看其他人是否发现了任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:58:18.340

我还认为，这是解决基本问题的规范方法。

它还使链接到具有其他用户 ID 的其他站点变得微不足道：只需有一个带有用户 ID 的表（如您所描述的）、其他站点 ID（来自`foreign sites`表）、用户 ID 即可在那里使用。

我观察到的唯一缺点是，当一些脚本小子使用 n、n+1、n+2... 来测试具有易受攻击密码的用户 ID 时。虽然随机 ID 使这变得更加困难，但我个人认为，这应该在其他地方处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:17:30.447

id 本身会泄漏信息，使第三方能够估计他或她在您的网站上注册的日期。因此，如果 Alice 是 Bob 的朋友，并且知道她去年注册并且他在 3 天后关注并且她的 id 是 100，而他的 id 是 150，她就会知道 Carol，她不是她的朋友，当时在您的网站上注册了，并且不像 Carol 声称的“最近”，她试图找一个借口来解释为什么她在你的社交媒体网站上与 Alice 不是“朋友”！

这是一个问题吗？您将自己决定，但就我个人而言，我更愿意有点专业/偏执（这两个经常在一起，无论这对我们的职业意味着什么！）并避免在 URL 中包含自动增量 ID，即使是最轻微的安全性/隐私问题。或者至少，建议你成为:-)

如果您决定走 Virtue 的道路，您可能需要考虑其他 id 也会泄漏信息（例如，如果 Alice 发现她的个人资料 id 比 Bob 的数字小，她会比她声称的更早认识 Carol）。因此，虽然您似乎可以添加一个 GUID 列，并将其用作辅助 id，可以安全地包含在 URL 中，但您最好从自动增量 id 切换到使用 GUID。（有关 GUID 的更多信息：[http](http://en.wikipedia.org/wiki/Globally_unique_identifier) ://en.wikipedia.org/wiki/Globally_unique_identifier ）

希望有帮助:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T23:51:43.043

我认为这是一个完全有效的方法。如果您想支持用户的唯一 ID（例如，如果他们想要唯一的 user_id），您可以稍后将其作为单独的列添加到用户表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T23:52:01.083

不，您没有理由不想将其用作 user_id。

如果您将其他一些列设置为 id，您将遇到以下问题：

*   如何生成用户ID
*   如何检查表中是否有可能的重复ID

此外，如果您通过主键（也是 AUTO_INCREMENT）执行 SELECT 过滤，则在表中查找特定用户会快得多。

# ios - 为应用程序创建加载屏幕

> ID：13575141
> 
> 赞同：1
> 
> 时间：2012-11-26T23:45:50.843
> 
> 标签：ios, ios5, uiview

我知道实现要加载的默认图像很容易。

但是，我想要一个带有一些动画的加载屏幕。就像 DrawSomething 应用程序一样，在加载应用程序时，不同的资产会进入以制作徽标。

这怎么可能？是否有一种特定的技术应该用于动画，即流行的框架或教程如何实现这一点？

我想知道的是在 IOS 应用程序的视图上创建动画的最佳方法？或者有哪些可用的选项来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:59:20.240

用户点击您的应用程序图标后，iOS 会立即显示静态启动画面图像。这里不可能有例外。在 iOS 加载您的应用程序时，您无法显示任何动画。

但是，如果您正在执行一些长时间运行的自定义初始化（例如，在应用程序启动后立即查询某些网络服务），那么您可以并且应该显示您自己的自定义加载屏幕。在该屏幕上，您可以显示任何您想要的动画。

无论如何，您都可以显示自定义启动屏幕，但除非您执行一些必要的初始化/加载，否则这不是最好的主意：用户启动您的应用程序是为了做某事，而不是查看虚假的加载屏幕。在该屏幕上添加“不再显示”按钮可能会有所帮助，但我仍然不喜欢 UX。

# java - 根据用户输入点创建折线图

> ID：13575142
> 
> 赞同：0
> 
> 时间：2012-11-26T23:46:00.000
> 
> 标签：java, swing, user-interface, graph, jframe

我有一个家庭作业，我必须编写一个程序，询问用户 4 个点，并计算线的斜率/方程。我想，一旦用户点击计算按钮，在我的程序窗口的左角显示一个简单的折线图。

我该怎么做呢？它只需要绘制 y 截距并显示线，我只是不知道如何真正解决这个问题。我的程序运行良好，一切正常，只需要在图表上开始，我不知道如何开始。有任何想法吗？

如果您将我的代码复制粘贴到 JGrasp 或任何 IDE 中，您会明白我的意思，我只想在组合中添加一个图表。

我应该如何制作图表，我应该如何将它放在窗口中，以便在我点击计算时它会改变？

这是我的代码：

```
public class lineCalculator extends javax.swing.JFrame {

public lineCalculator() {
initComponents();
}

@SuppressWarnings("unchecked")
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jLabel5 = new javax.swing.JLabel();
    jSeparator1 = new javax.swing.JSeparator();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jTextField4 = new javax.swing.JTextField();
    jLabel6 = new javax.swing.JLabel();
    jLabel7 = new javax.swing.JLabel();
    jButton1 = new javax.swing.JButton();
    jTextField5 = new javax.swing.JTextField();
    jTextField6 = new javax.swing.JTextField();
    jLabel8 = new javax.swing.JLabel();
    jTextField7 = new javax.swing.JTextField();
    jLabel9 = new javax.swing.JLabel();
    jTextField8 = new javax.swing.JTextField();
    jLabel10 = new javax.swing.JLabel();
    jTextField9 = new javax.swing.JTextField();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tahoma", 1, 18)); 
    jLabel1.setText("Line Calculator");

    jLabel2.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel2.setText("X1");

    jLabel3.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel3.setText("X2");

    jLabel4.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel4.setText("Y1");

    jLabel5.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel5.setText("Y2");

    jLabel6.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel6.setText("Slope");

    jLabel7.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel7.setText("Distance between points");

    jButton1.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jButton1.setText("Calculate");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jLabel8.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel8.setText("Angle(radians)");

    jLabel9.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel9.setText("Angle(degrees)");

    jLabel10.setFont(new java.awt.Font("Tahoma", 1, 12)); 
    jLabel10.setText("Equation of the line");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(211, 211, 211)
                    .addComponent(jLabel1))
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                            .addGap(39, 39, 39)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jLabel6)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, 77, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(30, 30, 30)
                                    .addComponent(jLabel7)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGroup(layout.createSequentialGroup()
                                    .addComponent(jLabel8)
                                    .addGap(18, 18, 18)
                                    .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(39, 39, 39)
                                    .addComponent(jLabel9)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                    .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, 92, javax.swing.GroupLayout.PREFERRED_SIZE))))
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(jButton1)
                            .addGap(29, 29, 29)
                            .addComponent(jLabel10)
                            .addGap(18, 18, 18)
                            .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, 221, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGroup(layout.createSequentialGroup()
                    .addGap(141, 141, 141)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jLabel2)
                        .addComponent(jLabel3))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jTextField2)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 78, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGap(40, 40, 40)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(jLabel4)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jTextField4))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                            .addComponent(jLabel5)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 509, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(26, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addGap(29, 29, 29)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(jLabel4)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(jLabel5)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel6)
                .addComponent(jTextField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel7)
                .addComponent(jTextField6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(33, 33, 33)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jTextField7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel8)
                .addComponent(jLabel9)
                .addComponent(jTextField8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(36, 36, 36)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel10)
                .addComponent(jTextField9, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(49, Short.MAX_VALUE))
    );

    pack();
}

public boolean isNumeric(String str)
{
try
{
Double.parseDouble(str);
}
catch(Exception e)
{
return (false);
}
return(true);
}

public double Round(double val, int plc)
{
 double pwr = Math.pow(10,plc);
 val = val * pwr;
 double tmp = (int) val;

if( ((int)(val + .5)) == (int) val)
return (tmp/pwr);
else
return((tmp + 1.0)/pwr);
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
double x1;
double x2;
double y1;
double y2;
double length_of_x;
double length_of_y;
double slope;
double opposite;

double angle_degrees;
double angle_radians;
double y_intercept;
double distance_between_2_points;

x1 = (double) (Double.parseDouble(jTextField1.getText()));
x2 = (double) (Double.parseDouble(jTextField2.getText()));
y1 = (double) (Double.parseDouble(jTextField4.getText()));
y2 = (double) (Double.parseDouble(jTextField3.getText()));

length_of_x = x2 - x1;
length_of_y = y2 - y1;
slope = length_of_y / length_of_x;
slope = (double) Round(slope,2);
opposite = y2 - y1;
distance_between_2_points = Math.sqrt((length_of_x * length_of_x) + (length_of_y * length_of_y));
distance_between_2_points = (double) Round(distance_between_2_points,2);
angle_radians = opposite / distance_between_2_points;
angle_radians = (double) Round(angle_radians,2);
angle_degrees = angle_radians * (180 / 3.14159);
angle_degrees = (double) Round(angle_degrees,2);
y_intercept = (y1)-(angle_radians * x1);

jTextField5.setText(slope + "");
jTextField6.setText(distance_between_2_points + "");
jTextField7.setText(angle_radians + "");
jTextField8.setText(angle_degrees + "");
jTextField9.setText("Y = " + slope + "" + "X + " + y_intercept + "");
}

public static void main(String args[]) {
try {
  for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
    if ("Nimbus".equals(info.getName())) {
      javax.swing.UIManager.setLookAndFeel(info.getClassName());
      break;
    }
  }
} catch (ClassNotFoundException ex) {
  java.util.logging.Logger.getLogger(lineCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (InstantiationException ex) {
  java.util.logging.Logger.getLogger(lineCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (IllegalAccessException ex) {
  java.util.logging.Logger.getLogger(lineCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
} catch (javax.swing.UnsupportedLookAndFeelException ex) {
  java.util.logging.Logger.getLogger(lineCalculator.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
}

/* Create and display the form */
java.awt.EventQueue.invokeLater(new Runnable() {

  public void run() {
    new lineCalculator().setVisible(true);
  }
});
}

private javax.swing.JButton jButton1;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel10;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
private javax.swing.JLabel jLabel7;
private javax.swing.JLabel jLabel8;
private javax.swing.JLabel jLabel9;
private javax.swing.JSeparator jSeparator1;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
private javax.swing.JTextField jTextField4;
private javax.swing.JTextField jTextField5;
private javax.swing.JTextField jTextField6;
private javax.swing.JTextField jTextField7;
private javax.swing.JTextField jTextField8;
private javax.swing.JTextField jTextField9;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:59:11.293

> ..我应该怎么把它放在窗户里..？

![线计算器](../Images/0e21c71506f3648dfebcde97d1155dc8.png)

在之前更改代码，`layout.setHorizontalGroup(..`例如：

```
JPanel gui = new JPanel(new BorderLayout());
JPanel graphPanel = new JPanel(new GridBagLayout());
JPanel controls = new JPanel();
GroupLayout layout = new GroupLayout(controls);
controls.setLayout(layout);

gui.add(graphPanel, BorderLayout.LINE_START);
BufferedImage img = new BufferedImage(
    200,200,BufferedImage.TYPE_INT_RGB);
JLabel l = new JLabel(new ImageIcon(img));
graphPanel.add(l);

gui.add(controls);
getContentPane().add(gui);

layout.setHorizontalGroup(.. 
```

> ..我应该如何制作图表..？

将其绘制到`BufferedImage`，然后`repaint()`是显示它的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T01:30:43.213

您可以创建一个扩展 JPanel 的新类。然后将该 JPanel 添加到您现有的 Frame 到您的组布局中。在 JPanel 中，您只需覆盖 paintComponent(Graphics) 方法并在其中进行绘图。

这只是一个使用 400x400 像素的固定屏幕的简单示例，其中 1 个像素等于 1 个坐标。

您可能想要对显示的屏幕进行一些标准化，其中屏幕根据线条放大或缩小。我建议您始终在中间绘制坐标系的原点 (0|0)，然后根据需要进行缩放。

```
private class Graph extends JPanel {
    final int screenWidth = 400;
    final int screenHeight = screenWidth;

    final int xAxisPos = screenHeight/2;
    final int yAxisPos = screenWidth/2;

    public Graph() {
        this.setBounds(0, 0, screenWidth, screenHeight);
    }

    private double y(double x) {
        return 2*x; // This is an example for y=2x
    }

    public void paintComponent(Graphics g) {
        g.setColor(Color.BLACK);
        g.drawLine(0, xAxisPos, screenWidth, xAxisPos); // draws the x-axis
        g.drawLine(yAxisPos, 0, yAxisPos, screenHeight); // draws the y-axis

        int yValueStart = (int) y(-yAxisPos); // calculates the y value on the left edge of the screen
        int yValueEnd = (int) y(screenWidth-yAxisPos); // calculates the y value on the right edge of the screen

        g.setColor(Color.BLUE);
        g.drawLine(0, -yValueStart, screenWidth, -yValueEnd);       
    }
} 
```

在上面的示例中，我将计算结果放入函数 y(double) 中，该函数返回某个 x 值的双精度值。另请注意，在 Swing 中绘制时，坐标系会翻转，这就是为什么在 drawLine 函数中必须将 y 值设为负值的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T00:32:50.960

本质上，您将需要“标准化”这些点，以便您可以使它们适合已知范围（因为您的图表可能是固定/已知大小）。

这意味着用户不限于输入适合您图形的值，他们可以自由输入他们想要的任何值。

这基本上意味着你要缩放点......就像......

```
// Size of the component
int width = getWidth();
int height = getHeight();

// p1 and p1 two are java.awt.Point references
// The maximum extend of the points
int maxX = Math.max(p1.x, p2.x);
int maxY = Math.max(p1.y, p2.y);

// Generate a "scale to fit"
float scale = Math.min(width / (float)maxX, height / (float)maxY);

// Scale the points..
int x1 = (int)(p1.x * scale);
int y1 = (int)(p1.y * scale);

int x2 = (int)(p2.x * scale);
int y2 = (int)(p2.y * scale); 
```

这是一个生成随机点的相对简单的示例

```
public class TestGraph {

    public static void main(String[] args) {
        new TestGraph();
    }

    public TestGraph() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GraphPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class GraphPane extends JPanel    {

        private Point p1;
        private Point p2;

        public GraphPane() {

            // Generate random points, replace with your own coordinates
            p1 = getRandomPoint();
            p2 = getRandomPoint();

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int width = getWidth();
            int height = getHeight();

            int maxX = Math.max(p1.x, p2.x);
            int maxY = Math.max(p1.y, p2.y);

            float scale = Math.min(width / (float)maxX, height / (float)maxY);

            int x1 = (int)(p1.x * scale);
            int y1 = (int)(p1.y * scale);

            int x2 = (int)(p2.x * scale);
            int y2 = (int)(p2.y * scale);

            g.drawLine(x1, y1, x2, y2);

        }

        protected Point getRandomPoint() {
            return new Point(getRandomValue(), getRandomValue());
        }

        protected int getRandomValue() {
            return (int)Math.round(Math.random() * 1000);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

} 
```

可能想通读

*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

欲了解更多信息和想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T00:08:18.593

您必须使用 awt 包中的一个对象，并使用他们称为paint 的方法。

然后你必须覆盖每个组件继承的方法......这就是方法

```
public void paint(Graphics g) {
  super.paint(g);
  g.drawLine(25, 0, 25, 50);
  g.setColor(Color.black);
} 
```

完成此操作后，您必须使用图形类创建线

您的代码的问题在于您使用的是轻量级和预打包组件的摆动组件，我个人不会使用它们来绘制自定义项目。

以下是一些来源：

让您开始：[http ://docs.oracle.com/javase/tutorial/uiswing/painting/index.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)

一个工作示例：[http ://www.java2s.com/Code/Java/2D-Graphics-GUI/Drawline.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Drawline.htm)

# sql - 从未分配过班次的司机的显示名称

> ID：13575145
> 
> 赞同：0
> 
> 时间：2012-11-26T23:46:07.427
> 
> 标签：sql, oracle

我应该显示尚未分配轮班的司机。我已经通过司机号的主键加入了表格。这是我的代码。

```
select distinct dr_drvname
from driver,shift
where dr_drvnum <> sh_drvnum; 
```

我在代码中使驱动程序编号不相等以显示不合格的驱动程序，但此代码显示所有驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T23:48:55.773

猜测你的表结构，我怀疑你想要类似的东西

```
select d.dr_drvname
  from driver d
 where not exists( select 1
                     from shift s
                    where d.dr_drvnum = s.sh_drvnum ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:53:50.007

与贾斯汀的回答相反，这是一个使用连接的版本：

```
SELECT d.dr_drvname
FROM driver d
LEFT JOIN shift s
          ON s.sh_drvnum = d.dr_drvnum
WHERE s.sh_drvnum IS NULL 
```

通常，最好始终明确指定您的连接，而不是使用隐式连接语法（逗号分隔`FROM`子句）。

（但你*为什么*要在列前面加上 -short-table 前缀：`'dr_'`？包括在初始表中？当你似乎让它们加上一个稍长的前缀时：`'drv'`？）

# newline - 如何将 IFS 与 upstart 脚本一起使用？

> ID：13575149
> 
> 赞同：0
> 
> 时间：2012-11-26T23:46:25.657
> 
> 标签：newline, upstart, ifs

我想将新贵预启动脚本中的 IFS 变量设置为换行符，但 IFS=$'\12' 不起作用。如何在此处设置 IFS 变量 - 我之前在此脚本中使用 export LC_ALL="en_US.UTF-8"

我在使用普通 bash 脚本并像之前提到的那样设置 IFS 时对其进行了测试，但在使用 upstart 时不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T22:34:17.270

您不能在 Upstart 脚本中使用 Bash 语法。幸运的是，很容易在一对引号之间添加一个换行符：

```
IFS='
' 
```

# c# - 即插即用机器学习

> ID：13575150
> 
> 赞同：0
> 
> 时间：2012-11-26T23:46:27.683
> 
> 标签：c#, python, sql, sql-server-2008, tsql

开始机器学习的最简单方法是什么？

我有一个非常实际的应用程序。

一些经理把一个“东西”的**数据仓库**扔在我的腿上，让我告诉他们是什么**推动了销售。**

数据包括：

```
sales by client (clients being doctors offices)
sales by doctor
products they bought
client demographics
all kinds of different date information 
```

总结数据，它基本上是公司与所有客户进行的每笔交易的完整数据以及每笔交易的详细信息。

数据全部存储在sql server 2008中。

**问题：** c#/python 中是否有任何工具可以连接到数据库以开始分析趋势/模式/关系？

**更具体地说：** 如何将使用 python 或 c# 的机器学习算法应用于我的数据以提取某种有意义的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:05:26.800

您将获得捆绑在 SQL Server 2008 中的数据挖掘工具。您应该首先在 Google 上搜索“SQL Server 2008 中的数据挖掘简介”之类的实际示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T05:14:59.427

我不知道从哪里开始处理这个问题。首先，这里的问题不是“机器学习”。没有软件可以接收一堆数据库表并回答诸如“什么在推动销售”之类的问题。天哪，人们甚至没有做好这方面的工作，所以对无人监督的计算机提出了很多要求。

我不清楚数据是否包含问题的答案。数据确实包含对已售商品和各种其他因素的描述。这些“推动”销售是否相当主观。

其他人对编程工具提出了宝贵的建议。我强烈建议您专注于数据挖掘工具而不是编程工具。SQL Server 确实有一个内置工具。我不确定这是否有帮助。您可以在[此处](http://www.kdnuggets.com/)找到工具列表。其中一些是免费软件。如果您通过编程访问它们，您将面临两个问题。首先是您将只关注问题的“编程”方面而不是结果。第二个是即使你找到了好的结果，你也无法将它们传达给其他人。

最后，我对他们真正想要的猜测是一种可以沿各个维度对数据进行切片和切块的工具——在 SQL Server 中也可以使用。您可以按照事实表结构将一组表放在一起（正如 Ralph Kimball 在他的书中所描述的，例如“数据仓库工具包”）。这听起来像是一个报告问题，而不是机器学习问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:25:24.573

谷歌有一个预测/机器学习 API，如果你对结果更感兴趣而不是理解，那么它非常棒（尽管有一些背景肯定会有所帮助，这样你就可以知道你正在尝试做什么甚至是有道理的）。

[https://developers.google.com/prediction/](https://developers.google.com/prediction/)

# javascript - 在 Backbone.js 视图中多次引用 div

> ID：13575155
> 
> 赞同：0
> 
> 时间：2012-11-26T23:46:51.997
> 
> 标签：javascript, backbone.js, refactoring

想知道处理这个问题的最佳方法是什么。假设我有一个 div，我在我的一个 Backbone 视图中的多个方法中引用它，我不想每次都重新查询它。

例如

```
Backbone.View.extend({
    showReviewOverlay : function(evt) {
        var $overlay = $('#js-add-review-overlay');
        $(evt.currentTarget).prepend($overlay.show());
    }
    hideReviewOverlay : function(evt) {
        var $overlay = $('#js-add-review-overlay');
        $(evt.currentTarget).closest($overlay.hide());
    }
}); 
```

引用它的首选方法是将其声明为对象吗？还是有一些我不知道的更好的模式？

例如

```
Backbone.View.extend({
    overlay : { 'container' : $('#js-add-review-overlay') },

    showReviewOverlay : function(evt) {
        $(evt.currentTarget).prepend(this.container.overlay.show());
    }
    hideReviewOverlay : function(evt) {
        $(evt.currentTarget).closest(this.container.overlay.hide());
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:51:12.003

如果这是特定情况，您可能会在`render`调用时获取对元素的引用：

```
Backbone.View.extend({
    render: function () {
        // do rendering stuff
        this.$overlay = this.$('#js-add-review-overlay');
    },
    showReviewOverlay : function(evt) {
        $(evt.currentTarget).prepend(this.$overlay.show());
    }
}); 
```

# python - 递归生成器

> ID：13575168
> 
> 赞同：5
> 
> 时间：2012-11-26T23:48:14.340
> 
> 标签：python, recursion, generator

有时我发现自己在 Python 中编写递归生成器。这是一个[最近的例子](https://stackoverflow.com/a/13573935/367273)：

```
def comb(input, lst = [], lset = set()):
   if lst:
      yield lst
   for i, el in enumerate(input):
      if lset.isdisjoint(el):
         for out in comb(input[i+1:], lst + [el], lset | set(el)):
            yield out

for c in comb([[1, 2, 3], [3, 6, 8], [4, 9], [6, 11]]):
   print c 
```

算法的细节并不重要。我把它作为一个完整的、真实的插图来给这个问题一些背景。

我的问题是关于以下构造：

```
 for out in comb(...):
      yield out 
```

这里，`comb()`是生成器的递归实例化。

每次我必须拼出`for: yield`循环，它让我畏缩。这真的是在 Python 中编写递归生成器*的*方法，还是有更好的（更惯用的、更高性能的等）替代方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T23:51:20.113

> 每次我必须拼出 for:yield 循环时，都会让我畏缩。这真的是在 Python 中编写递归生成器的方法，还是有更好的（更惯用的、更高性能的等）替代方案？

有一个更好的选择：

```
yield from comb(...) 
```

这实际上与以下内容相同：

```
for out in comb(...):
    yield out 
```

这需要 Python 3.3。如果您坚持使用 Python 2.x（或更早的 3.x），则必须坚持使用旧方式，因为 Python 2 的语法在 2.7 之后将永远不会再次更新（并且 3.0 到 3.2 显然同样被冻结）。

首先，查看评论中提到的 Wessie的[纯 Python 产量。](http://code.activestate.com/recipes/576727-pure-python-implementation-of-pep-380-yield-from/)此版本仅适用于单一级别的“yield from”，但底部有一个链接，指向更灵活和优化（但更难理解）的版本。它似乎并没有真正起作用（我得到了一个`NameError`on `_stack`，但它看起来应该很容易修复。如果是这样，并且如果可以`@supergenerator`在最外面的生成器上放置一个装饰器，并且如果性能可以接受，那么你的回答。

如果没有，您可以采取各种技巧来在一个地方而不是在每个级别处理多个级别的产量循环。然而，它们都不会让你降到 0 级——而且实际上，它们很少值得去做。例如：

一旦你考虑序列而不是生成器函数，很明显我们要做的就是展平序列。无论您是要尝试展平 N 个级别，展平直到达到不可迭代，展平直到满足其他一些可预测的级别，等等，都有一个简单的算法；你只需要选择正确的。但它会让你的代码更惯用、更易读、更高效等吗？很少。让我们举一个超级简单的案例。

```
def flatten(seq, levels=1):
    for level in range(levels):
        seq = itertools.chain.from_iterable(seq)
    return seq 
```

所以：

```
def a():
    yield 1
    yield 2
    yield 3
def b():
    yield a()
def c():
    yield b()
def d():
    yield c()

for i in flatten(d(), 3):
    print i 
```

好处是我只需要在调用站点的一个地方处理嵌套，而不是在沿途的每个生成器的 3 个地方。代价是读者不太清楚发生了什么，而且更容易出错。（好吧，在这种情况下不是那么多......但想象一下扁平化直到`lambda x: isinstance(list)`，测试它的地狱，释放它，然后有人呼吁`comb`...... `tuple`）治愈比疾病更糟糕，这就是为什么我称之为把戏。

除非展平确实是算法的自然部分，或者中间的某些步骤是您不能或不想接触的代码，或者以这种方式构造事物是有用的说明或提醒某事，或者…</p>

只是为了好玩，我写了一个全唱全跳的 flatten-any-way-you-want 函数，并将它作为一个补丁提交给 Erik Rose 漂亮的[more-itertools](http://packages.python.org/more-itertools/api.html)库。即使他不接受，你也可以在[我的 fork](https://github.com/abarnert/more-itertools/blob/master/more_itertools/more.py)中找到它——它被称为`collapse`，它是文件中的最后一个函数。

# php - 如何添加（连接）到现有的 PHP 数组

> ID：13575171
> 
> 赞同：1
> 
> 时间：2012-11-26T23:48:29.403
> 
> 标签：php, arrays

这行得通吗？我知道您可以通过这种方式连接变量。

```
 while ($row = mysql_fetch_array($result)) {
          $recipients[] = $row['phone'] . $row['carrier'];
    }

    while ($row = mysql_fetch_array($result)) {
        $recipients[] .= $row['email'];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:50:45.497

它不会起作用，因为您已经到达提取的末尾（即`mysql_fetch_array`在第二个循环中将始终返回 false）。

此外，如果您想要一些电话与电子邮件的指标，这可能不是一个好主意，但我想您不会：

```
$phones = array();
$emails = array();
while ($row = mysql_fetch_assoc($result)) {
   $phones[] = $row['phone'] . $row['carrier'];
   $emails[] = $row['email'];
}
$recipients = $phones + $emails; 
```

另外，没有人告诉你使用`PDO`or`mysqli`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:56:43.813

*假设您有两个单独的查询，并且它们都以完全相同*的顺序返回相同数量的结果，您应该使用计数器来帮助您找到要修改的正确条目：

```
$i = 0;
while ($row = mysql_fetch_array($result)) {
    $recipients[$i++] .= $row['email'];
} 
```

# ios - 自定义uipicker——处理图片大小

> ID：13575173
> 
> 赞同：1
> 
> 时间：2012-11-26T23:48:37.587
> 
> 标签：ios, uipicker

![在此处输入图像描述](../Images/28b68a1bee2fde2abbe08d5a0ce863c9.png)

```
-(UIView *)pickerView:(UIPickerView *)pickerView
           viewForRow:(NSInteger)row
         forComponent:(NSInteger)component reusingView:(UIView *)view
{
    //NSLog(@"%d",component);
   // NSLog(@"tag: %d",pickerView.tag);

    if([pickerView isEqual:picker1])

    {

        NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
        NSArray *array1 = [self valueForKey:arrayName];
        UIImageView *imageView = [array1 objectAtIndex:row];
        if ([pickerView selectedRowInComponent:component] == row) {
            imageView.frame = CGRectMake(60,60,40,80);//set bigger frame
        } else {
            //imageView.frame = CGRectMake(30,30,20,60);//set normal frame
        }
        return imageView;
        }

}

- (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component
{
    return 80.0;

} 
```

我正在实现自定义 uipicker 以实现以下第一个图像。我要使用 uipicker 选择三个图像。但是，它们都显示在下面第二张图像的屏幕上。我只想在中间显示占据更大的尺寸，而不是如图所示的其他图像。

![在此处输入图像描述](../Images/bed93e1ea766865b5599d9a14d9899e0.png)

![在此处输入图像描述](../Images/09c31306de9b61cbf5322369eb398c6a.png)

![在此处输入图像描述](../Images/9cda1369be182e1f8d27af34e0119e2d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:12:15.370

**更新：**根据您的评论，您需要使中间行更大。

将您的 viewForRow 方法修改为，

```
- (UIView *)pickerView:(UIPickerView *)pickerView
           viewForRow:(NSInteger)row
         forComponent:(NSInteger)component reusingView:(UIView *)view
{
    //NSLog(@"%d",component);
    NSLog(@"tag: %d",pickerView.tag);

    if(pickerView.tag==1)
    {   NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
        NSArray *array1 = [self valueForKey:arrayName];
        UIImageView *imageView = [array1 objectAtIndex:row];
        if ([pickerView selectedRowInComponent:component] == row) {
           imageView.frame = CGRectMake(..);//set bigger frame
        } else {
           imageView.frame = CGRectMake(..);//set normal frame
        }
        return imageView;
    } 
```

实现`pickerView:rowHeightForComponent:`方法并为行设置合适的高度。

```
 - (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component { 
```

为了隐藏选择指示器，设置`showsSelectionIndicator`的属性`UIPickerView`。有关更多详细信息，[请查看苹果文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html#//apple_ref/occ/instp/UIPickerView/showsSelectionIndicator)

根据您的评论，

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
      [pickerView reloadComponent:component];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:11:26.353

谁需要帮助！这是解决方案。所有学分都归@ACB！！！

```
-(UIView *)pickerView:(UIPickerView *)pickerView
               viewForRow:(NSInteger)row
             forComponent:(NSInteger)component reusingView:(UIView *)view
    {
        //NSLog(@"%d",component);
       // NSLog(@"tag: %d",pickerView.tag);

        if(pickerView.tag==1)

        {

            NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
            NSArray *array1 = [self valueForKey:arrayName];
            UIImageView *imageView = [array1 objectAtIndex:row];
            if ([pickerView selectedRowInComponent:component] == row) {
                imageView.frame = CGRectMake(60,60,40,80);//set bigger frame
            } else {
                imageView.frame = CGRectMake(30,30,20,60);//set normal frame
            }
            return imageView;

            //NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
            //NSArray *array1 = [self valueForKey:arrayName];
            //return [array1 objectAtIndex:row];
        }
        else if([pickerView isEqual:picker2])
        {
            NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+5];
            NSArray *array1 = [self valueForKey:arrayName];
            UIImageView *imageView = [array1 objectAtIndex:row];
            if ([pickerView selectedRowInComponent:component] == row) {
                imageView.frame = CGRectMake(60,60,40,80);//set bigger frame
            } else {
                imageView.frame = CGRectMake(30,30,20,60);//set normal frame
            }
            return imageView;

            /* NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+5];
            NSArray *array2 = [self valueForKey:arrayName];
            return [array2 objectAtIndex:row];*/
        }
        else
        {
            NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+9];
            NSArray *array1 = [self valueForKey:arrayName];
            UIImageView *imageView = [array1 objectAtIndex:row];
            if ([pickerView selectedRowInComponent:component] == row) {
                imageView.frame = CGRectMake(60,60,40,80);//set bigger frame
            } else {
                imageView.frame = CGRectMake(30,30,20,60);//set normal frame
            }
            return imageView;

           /* NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+9];
            NSArray *array3 = [self valueForKey:arrayName];
            return [array3 objectAtIndex:row];*/
        }

    }

    - (CGFloat)pickerView:(UIPickerView *)pickerView rowHeightForComponent:(NSInteger)component
    {
        return 120.0;

    }

    - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
        [pickerView reloadComponent:component];
    } 
```

# python-2.7 - Texting from Huawei e220 using PyGSM

> ID：13575177
> 
> 赞同：0
> 
> 时间：2012-11-26T23:48:48.523
> 
> 标签：python-2.7, sms, gsm, modem

I am trying to programmatically send and recieve txt messages in python, using a huawei e220 modem on vodafone.

editedit: I got it to work, need to set smsc to *****. what i need to know is, what is the command to set it to this?? EG AT+????

How do I do this with serial.Serial module??? I'm having a difficult time.

is PyGSM the best module to do this? How do I use it? I can't find any documentation anywhere, but also I can't find a better module.

```
Daisy13_on_D1="/dev/ttyUSB0"

gsm = GsmModem(port=Daisy13_on_D1,baudrate=115200,logger=GsmModem.debug_logger).boot()

s = gsm.wait_for_network()

gsm.send_sms(642723243,"Hey, what's up") 
```

gives me this output

```
debug Booting
   debug Connecting
   write 'ATE0\r'
    read '\r\n'
    read 'OK\r\n'
   write 'AT+CMEE=1\r'
    read '\r\n'
    read 'OK\r\n'
   write 'AT+WIND=0\r'
    read '\r\n'
    read 'COMMAND NOT SUPPORT\r\n'
   write 'AT+CMGF=1\r'
    read '\r\n'
    read 'OK\r\n'
   write 'AT+CSQ\r'
    read '\r\n'
    read '+CSQ: 19,99\r\n'
    read '\r\n'
    read 'OK\r\n'
   write 'AT+CMGS="642723243"\r'
    read '\r\n'
    read '+CMS ERROR: 330\r\n'
   write '\x1b 
```

I am also trying to use the sms0.4 module now too with no luck.

```
import sms

m = sms.Modem("/dev/ttyUSB0")

m.send('64272923243','This works YO')
print m.conn.sent() 
```

results:

```
Traceback (most recent call last):   File "testSMSMODULE.py", line 5, in <module>
    m.send('0272923243','This works YO')   File "/usr/local/lib/python2.7/dist-packages/sms-0.4-py2.7.egg/sms/__init__.py", line 61, in send
    self._command('AT+CMGS="%s"' % number)   File "/usr/local/lib/python2.7/dist-packages/sms-0.4-py2.7.egg/sms/__init__.py", line 109, in _command
    raise ModemError(results) sms.ModemError: ['\r\n', '+CMS ERROR: 330\r\n'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:18:24.643

AFAIK the best free library that does what you want is called SMSLib, and it's written in Java. Be prepared to fix numerous issues specific to your hardware, but in general it works OK.

There's a commercial solution called "[ActiveXperts Mobile Messaging Toolkit](http://www.activexperts.com/mobile-messaging-component/)" which you can use from Python through COM bindings. Didn't tried that myself (when I needed to, I've implemented my own solution instead), however people on the Internets say it works OK.

AFAIK the rest of them is crap.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:09:59.430

The `sms` module seems a lot easier to use: [http://pypi.python.org/pypi/sms](http://pypi.python.org/pypi/sms)

In brief, to send a text via serial interface of a GSM modem in Python:

```
#!env python
import serial
m = serial.Serial('/dev/ttyUSB0', 115200, timeout=1)
m.write('ATZ\r')
m.write('AT+CMGF=1\r\n')
m.write('AT+CMGS="%s"\r\n' % '+phone_number_here')
m.write('this is the text message here')
m.write(chr(26))
m.close() 
```

The AT command to set SMSC is: `AT+CSCA="+smsc_number_here",145`. See [http://www.developershome.com/sms/cscaCommand.asp](http://www.developershome.com/sms/cscaCommand.asp)

# r - 如何在 R 中更改语言设置

> ID：13575180
> 
> 赞同：134
> 
> 时间：2012-11-26T23:49:01.907
> 
> 标签：r

我的错误信息以法语显示。如何更改我的系统语言设置以使错误消息以英语显示？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-11-27T00:16:44.073

您可以使用该`Sys.setenv()`功能进行设置。我的 R 会话默认为英语，因此我将其设置为法语，然后再返回：

```
> Sys.setenv(LANG = "fr")
> 2 + x
Erreur : objet 'x' introuvable
> Sys.setenv(LANG = "en")
> 2 + x
Error: object 'x' not found 
```

可以在[此处](http://en.wikipedia.org/wiki/ISO_639-1)找到缩写列表。

`Sys.getenv()`为您提供所有设置的环境变量的列表。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-10-31T12:35:36.913

在 RStudio for Windows 的情况下，我成功地按照[R for Windows FAQ](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#I-want-R-in-English_0021)中的说明更改了语言，特别是我写道：

```
language = EN 
```

在文件`Rconsole`中（在我的安装中是`C:\Program Files\R\R-2.15.2\etc\Rconsole`）；这也适用于命令`Rscript`。

例如，您可以在`Rconsole`命令提示符下使用以下两个命令定位文件：

`cd \`

`dir Rconsole /s`

第一个将根目录作为当前目录，第二个查找`Rconsole`文件。

在以下屏幕截图中，您有该`Rconsole`文件位于文件夹中`C:\Program Files\R\R-3.4.1\etc`。

您可能有多个位置，在这种情况下，您可以编辑所有`Rconsole`文件。

[![在此处输入图像描述](../Images/d578c791483bb5011a698e57de879335.png)](https://i.stack.imgur.com/32K7U.png)

之后，您可以`Rconsole`使用您喜欢的编辑器打开文件并查找该行`language =`，然后`EN`在该行的末尾追加。

在下面的屏幕截图中，有趣的行是数字 70，您必须`EN`在其末尾附加。 [![在此处输入图像描述](../Images/875a523fc92c0adb207052b55b647b73.png)](https://i.stack.imgur.com/sG96q.png)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-02-05T20:12:05.487

对于 Mac 用户，我在[R for Mac 常见问题解答中找到了这个](http://cran.r-project.org/bin/macosx/RMacOSX-FAQ.html)

> 如果您使用非标准设置（例如与格式不同的语言），您可以通过设置“force.LANG”默认设置来覆盖执行的自动检测，例如
> 
> ```
>  defaults write org.R-project.R force.LANG en_US.UTF-8 
> ```
> 
> 在终端中运行时，无论系统设置如何，它都会强制执行美式英语设置。如果你不知道终端是什么，你可以使用这个 R 命令来代替：
> 
> ```
>  system("defaults write org.R-project.R force.LANG en_US.UTF-8") 
> ```
> 
> 但不要忘记退出 R 并在之后再次启动 R.app。请注意，您必须始终使用 `.UTF-8' 版本的语言环境，否则 R.app 将无法正常工作。

这帮助我将控制台语言从中文更改为英文。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-10-05T14:28:33.020

这适用于命令行：

```
$ export LANG=en_US.UTF-8 
```

上面的其他答案都不适合我

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-01-30T08:15:52.937

如果您使用 Ubuntu，您将设置

```
LANGUAGE=en 
```

在 /etc/R/Renviron.site 中。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-04-12T13:32:24.943

例如，您可能还想了解 和 之间的`Sys.setenv(LANG = "ru")`区别`Sys.setlocale(locale = "ru_RU.utf8")`。

```
> Sys.setlocale(locale = "ru_RU.utf8")
[1] "LC_CTYPE=ru_RU.utf8;LC_NUMERIC=C;LC_TIME=ru_RU.utf8;LC_COLLATE=ru_RU.utf8;LC_MONETARY=ru_RU.utf8;LC_MESSAGES=en_IE.utf8;LC_PAPER=en_IE.utf8;LC_NAME=en_IE.utf8;LC_ADDRESS=en_IE.utf8;LC_TELEPHONE=en_IE.utf8;LC_MEASUREMENT=en_IE.utf8;LC_IDENTIFICATION=en_IE.utf8" 
```

如果您有兴趣更改引用这些元素之一的函数的行为（例如`strptime`提取日期），您应该使用`Sys.setlocale()`. 有关`?Sys.setlocale`更多详细信息，请参阅。为了查看 linux 系统上所有可用的语言，您可以运行

```
system("locale -a", intern = TRUE) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-07-10T10:38:19.087

对我来说工作：

```
Sys.setlocale("LC_MESSAGES", "en_US.utf8") 
```

测试：

```
> Sys.setlocale("LC_MESSAGES", "en_US.utf8")
[1] "en_US.utf8"
> x[3]
Error: object 'x' not found 
```

还努力获取英文信息：

```
Sys.setlocale("LC_MESSAGES", "C") 
```

要重置为我使用的德语消息

```
Sys.setlocale("LC_MESSAGES", "de_DE.utf8") 
```

这是我的开始`sessionInfo`：

```
> sessionInfo()
R version 3.4.1 (2017-06-30)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.2 LTS 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-07-05T16:14:46.647

首先输入： **system("defaults write org.R-project.R force.LANG en_US.UTF-8")** 然后你会得到一个索引号（在我的例子中是 127）

然后输入： **Sys.setenv(LANG = "en")** 然后输入数字并 ENTER **127**

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-03-21T14:00:43.960

一个简单的解决方案是在 bash 脚本中设置 export Lang=C。我有一个类似的问题，默认语言是德语，所以它恢复为英语。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2021-05-06T03:24:29.283

为了使其永久有效，在 R 和 Rstudio（使用 Win 10）中，一种方法是每次在后台自动运行脚本。

不再更改影响 Windows 的系统语言。不再只有 R，但在 Rstudio 中失败了。不再需要每次手动运行脚本。没有更多的管理员权限，但失败了。没有更多的捷径设置但失败。

步骤 1\. 使用您的系统搜索，找到名为“Rprofile”的文件

我的回应是

C:\Program Files\R\R-4.0.5\library\base\R

C:\Program Files\R\R-4.0.5\etc

步骤 2\. 编辑 C:\Program Files\R\R-4.0.5\library\base\R\Rprofile

内容：

*   这是系统 Rprofile 文件。它总是在启动时运行。
*   附加命令可以放置在站点或用户 Rprofile 文件中
*   （参见 ?Rprofile）……等等。

步骤 3\. 在脚本末尾添加 Sys.setenv(LANGUAGE="en")

```
local({
    Sys.setenv(LANGUAGE="en")
}) 
```

就这样。感谢上帝，感谢我，哈哈。

PS。如果您遇到授权/保存问题，请将此文件移动到桌面并在编辑后替换原始文件。

* * *

聚苯乙烯。我太生气了，无法解决这个问题。现在是 2021 年，但不是 1976 年。这花了我大约 53 个小时，下载了 3 次 R 和 3 次 Rstudio。许多文章被审查。以及我遇到的无数失败。

我想尝试一些有趣的事情。

这是我在币安的 USDT 钱包。TRC(20) TE8VbB2ZA6bSN1Aq3Qi6Gq7WGE89GEbYqA

*   如果您对这个答案感到满意，请（并且只是）给我发送 1.0 USDT 让我记录捐赠金额，以防您是加密用户作为鼓掌。请不要更多。
*   请注意，无论如何我都不会退回 USDT。哈哈
*   如果这违反了这里的规范，请通知我或删除/编辑 PPS。直接地。谢谢你。

* * *

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-10-28T12:06:26.293

如果您想将终端中的 R 语言永久更改为英语，这在 macOS 中对我来说很好：

打开 terminal.app，然后说：

```
touch .bash_profile 
```

然后说：

```
open -a TextEdit.app .bash_profile 
```

这两个命令将帮助您在 TextEdit 中打开“.bash_profile”文件。

将此添加到“.bash_profile”文件中：

```
export LANG=en_US.UTF-8 
```

然后保存文件，重新打开终端并输入`R`，您会发现它的语言已更改为英文。

如果你想让语言回到原来的样子，只需简单地添加一个`#`before `export LANG=en_US.UTF-8`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-01-18T14:09:29.777

唯一对我有用的是完全卸载 R（确保也将其从 Programs 文件中删除），然后安装它，但在安装过程中*取消选择Message Translations。*当我安装 R 和随后的 RCmdr 时，它终于出现了英文版。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-23T16:21:55.100

Change your current regional format to a different regional format in region settings on time&language settings in Windows by clicking on your time/date in lower right corner > adjust time/date > Region > change regional format to UK or US

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-29T13:38:06.230

在 Ubuntu 14.04 LTS 中，我不得不`#`从评论中删除`#LANGUAGE=EN`。
所有其他选项都对我不起作用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-11-10T11:24:01.753

这对我使用德语的 Windows 10 笔记本电脑很有用，我希望 lubridate 以英语返回日期：

```
Sys.setlocale("LC_TIME", "English") 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-02T11:15:33.103

我在 Mac 上使用 R Studio，但找不到 Rconsole 文件。所以我采取了更残酷的方式，只是从 R 应用程序中删除了不需要的语言文件。您只需要在您的应用程序文件夹中转到您的 Rapp，右键单击，然后显示包内容 /contents/Resources/。有语言文件，例如 English.lproj 或我删除的 de.lproj。重新启动 R 后，错误消息显示为英文.. 也许这有帮助！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-06-06T09:35:34.943

在 Windows 上，**当您没有管理员权限时**，只需为 Rgui.exe 创建一个新的**程序快捷方式**。然后在该快捷方式的属性中，转到“快捷方式”选项卡并修改目标以包含您选择的系统语言，例如`"C:\Program Files\R\R-3.5.3\bin\x64\Rgui.exe" LANGUAGE=en`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-05-15T15:31:14.670

你只需要在你的电脑上改变微软的基本语言！

将 windows 按钮与 r 一起按下，然后将以下代码提示到打开的窗口中

control.exe / 名称 Microsoft.Language

加载您要使用的语言包并更改选项。但请注意，这也会改变您的键盘布局！

# google-maps - Google 静态地图 API 和 45 度（倾斜）图像

> ID：13575186
> 
> 赞同：1
> 
> 时间：2012-11-26T23:49:38.693
> 
> 标签：google-maps, google-static-maps

无论如何从谷歌静态地图api获得45度图像？

我可以从 javascript api 做到这一点，但在静态地图 api 的文档中看不到类似的访问。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:18:51.243

目前没有检索 45 度图像的选项。 [https://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# selenium - Selenium - 网站的安全证书

> ID：13575187
> 
> 赞同：2
> 
> 时间：2012-11-26T23:49:53.593
> 
> 标签：selenium, internet-explorer-8, ssl-certificate, selenium-webdriver

试过 - 得到这个错误`OpenQA.Selenium.WebDriverException: No response from server for url`

```
driver.Navigate().GoToUrl("javascript:document.getElementById('overridelink').click()"); 
```

**结束编辑**

需要测试的网站有自签名证书。所以 Internet Explorer（Windows 7 中的 8）显示了以下消息消息以及应该如何处理任何线索？

`The security certificate presented by this website was not issued by a trusted certificate authority. The security certificate presented by this website was issued for a different website's address.`

![在此处输入图像描述](../Images/e0bc9bc85ca9e81483a043e34dd61e8e.png)

如果通过单击覆盖链接`"Continue to this website (no recommended)"`然后它重定向页面，我得到这个窗口，上面写着：

`Do you want to view only the webpage content that was delivered securely? - with YES | NO button`以及无论您单击是/否，我都会收到错误消息：

`Unable to open the Internet site <site_name> Operation aborted`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:55:37.267

如果您使用的是 selenium rc..您可以`-trustAllSSSlCertificates`在启动 selenium 服务器时使用选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:43:13.420

对于 IE，您应该首先在本地计算机上手动安装证书，然后再使用它。AFAIK 没有其他方法可以规避这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:30:03.217

如果上述“证书安装”过程没有帮助，请尝试以下替代解决方案。就我而言，由于我机器上的一些客户端限制设置，它没有帮助。所以我在我的 Webdriver 代码中使用了以下几行。

```
driver.get(baseUrl");
driver.findElement(By.name("overridelink")).sendKeys(Keys.ENTER); 
```

//以上行用于单击“继续访问此网站（不推荐）”链接。

# ios6 - 呈现在 iOS 6 中损坏的 MFMessageComposeViewController

> ID：13575192
> 
> 赞同：2
> 
> 时间：2012-11-26T23:50:31.017
> 
> 标签：ios6, modalviewcontroller, mfmessagecomposeview

我的应用程序以模态方式呈现 MFMessageComposeViewController。它在 iOS 5 中运行良好（在模拟器和设备上）。在我将我的 iPhone 升级到 6 后，它就不再工作了。应用程序冻结 10 秒，然后此消息出现在调试器中

“远程撰写控制器超时（是）！”

并且模态视图不显示。我在 stackoverflow 和网络上进行了广泛搜索，但找不到任何解决方案。作为最后的手段，我下载并运行了苹果的示例代码“MessageComposer”，唉，即使在苹果代码中，它也不能在 iOS 6 上运行。我完全一无所知，并且在这上面花了几个小时......任何想法我怎样才能解决这个问题？

# expressionengine - 允许用户将网站上的任何条目标记为功能

> ID：13575193
> 
> 赞同：1
> 
> 时间：2012-11-26T23:50:43.593
> 
> 标签：expressionengine

我正在构建一个包含大约 5 个不同频道和五个不同字段组的站点。该站点的主页具有多个“功能”区域，可以显示来自任何这些渠道的任何条目。我需要一种方法来允许用户将条目“标记”为主页的功能，然后让管理员获取该条目并将其放置在主页的 5 个功能区域中的任何一个中。

我已经弄清楚了这个等式的第二部分（管理员放置功能）——我为此使用了[低变量](http://devot-ee.com/add-ons/low-variables)和[Playa](http://pixelandtonic.com/playa)，这太棒了。这是第一部分（用户将条目标记为功能），我无法确定一个很好的方法。

正如我所提到的，大约 5 个通道中的任何一个都可以将条目标记为特征，并且每个通道都有不同的字段组。将任何条目标记为功能时，需要做一些事情：

1.  特色图片
2.  摘抄
3.  部门

这适用于任何渠道中的任何条目。对我来说棘手的事情是我不能在不同的字段组中拥有类似标题的字段。

关于如何解决这个问题的任何想法，所以这对用户来说不是一个复杂的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:39:34.867

我会看看 Flag Master 的用户标记条目。来自[mithra62](http://mithra62.com/projects/view/flag-master/)的附加组件，您也可以在此处看到：

[http://devot-ee.com/add-ons/flag-master](http://devot-ee.com/add-ons/flag-master)

> 对我来说棘手的事情是我不能在不同的字段组中拥有类似标题的字段。

一种方法可能是在通道条目循环内使用带有变量的[Switchee 。](http://devot-ee.com/add-ons/switchee)`{channel}`伪代码可能如下所示：

```
{exp:channel:entries channel="news|someother"}

    {exp:switchee variable="{channel}" parse="inward"}

        {case value="someother"}
            someother channel tags
        {/case}

        {case value="news"}
            your news channel tags
        {/case}

        {case default="yes"}
            everything else etc.
        {/case}

    {/exp:switchee}

{/exp:channel:entries} 
```

您也可以使用 Stash 做一些事情，并且它[与参数匹配](https://github.com/croxton/Stash/tree/dev#match--regex-2)，但这可能会更复杂一些。如果您遇到解析顺序问题（我的下一个建议可能就是这种情况），存储和低变量可能会在早期解析标签时派上用场。

另外，不要忘记您可以在自定义字段前加上频道短名称，并将它们设置为使用原生 {channel} 变量。对于您的自定义字段，请给它们一个与频道短名称一致的前缀。例如，如果它是用于某种描述的新闻频道文本区域字段，您可能会这样做`news_textarea_description`。

然后，当调用所述字段时，您可以这样做，它会为您构建自定义字段前缀：

```
{exp:channel:entries channel="news|someother"}

    {{channel}_textarea_description}

{/exp:channel:entries} 
```

另外，你说你已经把第一部分放在一边了，这个附加组件可能对其他人也有用：

[http://brandnewbox.co.uk/products/details/selected_items](http://brandnewbox.co.uk/products/details/selected_items) -[文档和下载](https://bitbucket.org/ajweaver/ajw_selecteditems/src)

# svn - Tortise SVN 多个用户在签出存储库时遇到错误

> ID：13575196
> 
> 赞同：1
> 
> 时间：2012-11-26T23:50:51.770
> 
> 标签：svn, tortoisesvn, svn-checkout

我工作的 SVN 存储库的几个用户无法使用以下消息连接到存储库：

```
Unable to connect to repository at URL: <url>
Could Not Open Requested File System 
```

这里的主要问题是几个用户能够打开存储库，并且我已经验证他们使用的 URL 是正确的，他们的身份验证凭据也是正确的。特别是已经尝试过的事情：

*   管理帐户可以签出某些机器上的存储库（但不能签出其他机器）
*   一般用户帐户可以签出某些机器上的存储库（但不能签出其他机器）
*   已通过在所有相关机器上使用 Web 浏览器访问来验证存储库的 URL。
*   所有相关用户的身份验证凭据均已确认正确。

我真的很茫然，因为就我读过的大多数文档和问题而言，这些似乎排除了服务器配置和用户错误。关于问题可能是什么以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:55:08.080

“无法打开请求的文件系统”是（可能是）存储库的坏信号。

*   您是否尝试验证有问题的存储库，将存储库克隆到同一主机上的另一个位置？
*   您拥有哪种类型的存储库（FSFS、BDB），使用哪种协议？
*   您可以使用普通浏览器从有问题的用户连接到 repo 吗？
*   如果您的存储库是基于 http 的，您是否阅读过 Apache 日志？

# javascript - 将 Google Maps API 与 Facebook 评论插件集成

> ID：13575197
> 
> 赞同：0
> 
> 时间：2012-11-26T23:50:53.873
> 
> 标签：javascript, facebook, google-maps-api-3, google-maps-markers, facebook-comments

好的，有一个[类似的问题](https://stackoverflow.com/questions/12546202/google-maps-api-facebook-comments)，但它仍然没有解决。

是否可以在每个信息窗口中添加 Facebook 评论功能？单击地图上的点后，我希望在每个信息窗口中显示不同的 Facebook 评论流。我目前正在尝试，但如果有人知道怎么做，如果你能提供一些帮助，那将会很有帮助！

这是我到目前为止所拥有的：

```
<script type="text/javascript">

        var map;
        function initialize() {
        var myOptions = {
            zoom: 3,
            center: new google.maps.LatLng(46.073231,-41.865238),
            mapTypeId: google.maps.MapTypeId.ROADMAP,
                map = new
                    google.maps.Map(document.getElementById('map'),
            myOptions);

        var locations = [
            ["Event",51.526902,-0.085588,"London, UK","Jan 23, 2012"],
            ["Event",34.083517,-118.389373,"Los Angeles, USA","Jan 25, 2012"],
            ["Event",40.716428,-73.966241,"New York, USA","Jan 30, 2012"],
            ["Event",40.723454,-73.986497,"Queens, USA","Jan 31, 2012"]
        ];

        var infowindow = new google.maps.InfoWindow();

        var marker, i;

        for (i = 0; i < locations.length; i++) 
        {
            var iconImage, heading;

            switch(locations[i][0]) {
                case "Event":   
                    iconImage = "img/event.png";
                    heading = "<h2 class='event'><img src="+iconImage+" />" +locations[i][3]+"</h2>";
                    break;

            marker = new google.maps.Marker({
                icon: iconImage,
                position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                map: map
            });
            google.maps.event.addListener(marker, 'click', (function(marker, i, heading) {
                return function() {
                    markerContent = heading+"<p><b></b> "+ locations[i][4]+"</p>";
                    infowindow.setContent(markerContent);
                    infowindow.open(map, marker);
                }
            })(marker, i, heading));  // end marker click function
                }}; // end for loop     
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:50:26.600

It's just a matter of creating unique info windows for each of your markers and assuring that the fb plugin inside each points to a valid unique url. If you're not using markers and allow users to click anywhere in the map, a latitude + longitude hash would probably solve.

If you have problems creating unique info windows, this might help: [google maps api multiple markers with info windows](https://stackoverflow.com/questions/9111993/google-maps-api-multiple-markers-with-info-windows)

# php - SimpleXML 多维数组的最小值

> ID：13575198
> 
> 赞同：0
> 
> 时间：2012-11-26T23:50:55.820
> 
> 标签：php, arrays, simplexml, min

我尝试过使用array_map 之类的东西，但它似乎不起作用，因为我有一个多维数组作为 SimpleXML 元素。min($array) 也不起作用。当我 print_r($array) 时，这就是代码的显示方式。有没有办法获取最小值？

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => 11
        )

    [1] => SimpleXMLElement Object
        (
            [0] => 15
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:12:32.427

不知道这是否是最好的方法，但我还是这样做了，它有效！

我通过在 foreach 循环中运行将多维数组创建为一维

```
foreach ($expected_seconds_array as $key => $value) { 
$value = (string) $value;
    $min_sec_array[] = $value;
} 
```

然后我可以调用 min($min_sec_array); 函数以获得正确的结果。希望它可以帮助别人

# java - 当配置文件不活动时包括 bean 定义

> ID：13575201
> 
> 赞同：70
> 
> 时间：2012-11-26T23:51:24.307
> 
> 标签：java, spring, spring-profiles, negation

在我的应用程序中，我使用了几个[配置文件](http://blog.springsource.com/2011/02/14/spring-3-1-m1-introducing-profile/)来使某些 bean 符合自动装配的条件。我缺少的是当某个配置文件不活动时使 bean 有资格进行自动装配的可能性。

我想到的最好的方法是这样的：

1.  假设我们有一个所有可能配置文件的列表，例如{A, B, C, D}。
2.  对特定执行活动的配置文件是 {A, C}。
3.  我所做的是为所有可能的非活动配置文件创建人工配置文件。在示例情况下，我将创建 {not_B, not_D} 配置文件。
4.  我想根据`X`我为 profile激活的非活动配置文件激活 bean `not_X`。在我的情况下，如果我希望 bean 在配置文件 B 不活动时有资格进行自动装配，我会注释它们`@Profile("not_B")`

但是，此解决方案需要预先了解所有可能的配置文件。

你能想出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-26T23:55:42.487

您可以使用 not (!) 运算符...但您必须使用 Spring 3.2 M1。

> 现在支持以下语法
> 
> ```
> <beans profile="A,!B">
> 
> @Profile({"A", "!B"}) 
> ```
> 
> 指示仅当配置文件“A”处于活动状态或配置文件“B”不活动时才应处理元素或注释组件。

请参阅此处宣布的更改：[Spring Framework 3.2 M1 Released](https://spring.io/blog/2012/05/29/spring-framework-3-2-m1-released)
提交在 GitHub：[支持 not (!) operator for profile selection](https://github.com/SpringSource/spring-framework/commit/bcd44f3798ed06c0704d2a3564b8a9735e747e87)
JIRA 中的问题：[SPR-8728](https://jira.spring.io/browse/SPR-8728)

如果您的项目无法升级到 Spring 3.2，我建议不要使用该`@Profile`方法并确保未在 Spring 配置中创建 bean。

# c# - ado.net 实体框架 4.1 数据库初始化错误 40

> ID：13575203
> 
> 赞同：1
> 
> 时间：2012-11-26T23:51:43.563
> 
> 标签：c#, sql-server, entity-framework, networking, sql-server-2008-r2

我正在使用 ado.net 实体框架 4.1 连接到位于我的计算机上的 sql server 2008 r2 64 位实例。但是当我尝试初始化连接时，出现以下异常：

> {“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）"}

该实例的 sql 服务正在运行，还有 sql 浏览器。为 1433 端口和 sql 浏览器添加了例外。在 sql server 配置管理器中，启用了共享内存，也称为管道和 tcp/ip。

这些是我的 app.config 连接字符串：使用用户名和密码：

```
 <connectionStrings>
<add name="DbTerminalContext" connectionString="Data Source=URIEL\SQLIT64;Initial Catalog=IFDB;User Id=sa;Password=password;MultipleActiveResultSets=True"
  providerName="System.Data.SqlClient" /> 
```

这是使用 Windows 身份：

```
<add name="DbTerminalContext" connectionString="Data Source=URIEL\SQLIT64;Initial Catalog=IFDB;Trusted_Connection=True;MultipleActiveResultSets=True"
  providerName="System.Data.SqlClient" /> 
```

我尝试使用 URIEL、.\SQLIT64 和 localhost\SQLIT64 的 insted，但我根本无法连接。

我已经搜索并尝试了在这里和其他地方找到的各种解决方案。没有任何解决办法。所以有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:57:11.973

尝试将元数据资源信息添加到您的连接字符串。

假设您的实体数据模型名为“TerminalDataEntities.edmx”，则在项目的 obj\Debug\edmxResourcesToEmbed 文件夹中生成了三个文件。

*   终端数据实体.csdl
*   终端数据实体.ssdl
*   终端数据实体.msl

要将这些资源添加到您的连接字符串中，您需要更改 add-Tags connectionString-Value 的格式。

元数据：

```
metadata=res://*/TerminalDataEntities.csdl|res://*/TerminalDataEntities.ssdl|res://*/TerminalDataEntities.msl; 
```

提供者：

```
provider=System.Data.SqlClient; 
```

和提供者连接字符串：

```
provider connection string=&quot;Data Source=URIEL\SQLIT64;Initial Catalog=IFDB;Trusted_Connection=True;MultipleActiveResultSets=True&quot; 
```

把它们放在一起：（使用 Windows 标识）

```
<add name="DbTerminalContext" connectionString="metadata=res://*/TerminalDataEntities.csdl|res://*/TerminalDataEntities.ssdl|res://*/TerminalDataEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=URIEL\SQLIT64;Initial Catalog=IFDB;Trusted_Connection=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

（没有 Windows 标识）

```
<add name="DbTerminalContext" connectionString="metadata=res://*/TerminalDataEntities.csdl|res://*/TerminalDataEntities.ssdl|res://*/TerminalDataEntities.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=URIEL\SQLIT64;Initial Catalog=IFDB;User Id=sa;Password=password;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:31:19.123

检查是否在 Sql Server 配置管理器中启用了 NamedPipes

（开始 -> SQL* -> 配置 -> SQL Server 配置管理器，然后单击 SQL Server 网络配置节点）。

# c# - 使用 WindowFromPoint P/Invoke 获取浏览器选项卡的句柄

> ID：13575213
> 
> 赞同：3
> 
> 时间：2012-11-26T23:53:09.790
> 
> 标签：c#, .net, pinvoke

我正在编写一个与 Web 浏览器游戏交互的 C# 应用程序（不是出于恶意目的，只是为了挑战自动化），并通过移动鼠标、单击然后将鼠标移回前一点来进行交互。

我现在要做的是在不移动光标的情况下单击该点，以便在鼠标运行时移动鼠标不会导致误点击。我找到了 WindowFromPoint 和 SendMessage 挂钩，可用于单击该位置，并且在我的测试中，我能够使这种组合起作用。但是，当试图让这种钩子组合在我的游戏所在的 Chrome 网络浏览器上运行时，它不会点击。

我假设正在收集不正确的句柄，因为 chrome 是如此复杂。但是我认为它会起作用的方式是 WindowFromPoint 将为我提供当前打开的浏览器选项卡的句柄，因此 SendMessage 将能够在我想要的位置执行单击。

这是我正在使用的代码，start 和 end 都是 Point 对象，它们位于我要单击的位置：

```
IntPtr hWnd = WindowFromPoint(start);
if(hWnd != IntPtr.Zero) {
    SendMessage(hWnd, BM_CLICK, IntPtr.Zero, IntPtr.Zero);
    IntPtr hWnd2 = WindowFromPoint(end);
    SendMessage(hWnd2, BM_CLICK, IntPtr.Zero, IntPtr.Zero);
} 
```

为了在浏览器选项卡中单击游戏，我应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:55:22.723

事情不会那么简单：

BM_CLICK 消息假定窗口处理程序的所有者处理 BM_CLICK 消息。这是在处理“低级”消息（例如鼠标向下/向上、键盘按下等）时生成的“高级”消息。在 Windows 标准控件（例如按钮）的情况下，这发生在场景下，但我不相信浏览器（或 flash 插件或其他）使用标准 Win32 控件来呈现其页面，因此它可能会或可能不会处理鼠标点击/键盘按下并发出 BM_CLICK 事件。

大多数版本的 Visual Studio（甚至是一些 C++ 表达版本）中都有一个很棒的工具可以帮助您完成任务，称为 Spy++。该工具允许您“遍历”窗口句柄结构、选择窗口（使用 Spy->Log Messages 中有些奇怪的查找工具）并记录特定窗口处理的事件。

根据此工具，在 Chrome 中按下您的问题中的“C#”标签按钮不拥有句柄并查看渲染控件上的事件，它没有创建 BM_CLICK 事件。

# javascript - 如何判断 IE8 窗口何时失去焦点？

> ID：13575216
> 
> 赞同：2
> 
> 时间：2012-11-26T23:53:14.747
> 
> 标签：javascript, jquery, internet-explorer-8

我一直在使用它，尽管直到最近我才意识到它在 ie8 中运行不正常。

```
$(window).blur(function () {
 alert("lost");
}); 
```

在 Firefox 或 chrome 或 safari 中，这会在窗口失去焦点时正确显示警报。但是，在 IE8 中，警报似乎被放入了某种队列中。“丢失”警报仅在窗口重新获得焦点时显示。更令人困惑的是，当与跟踪窗口是否获得焦点的事件相结合时，它们会出现乱序。

```
$(window).focus(function () {
 alert("gained");
}); 
```

（不要在 chrome 或 firefox 中尝试这个，因为警报会进入某种循环）

如果这两个都与 IE8 一起使用，当窗口失去焦点，然后重新获得它时，IE8 会提示“获得” `ok`“丢失”。这种乱序事件触发会导致我的代码问题，因为它是向后的，并报告最后一个事件是浏览器失去焦点。

如何在 IE8 中跟踪它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:04:06.130

方法的功劳：[https ://stackoverflow.com/a/10999831/1026459](https://stackoverflow.com/a/10999831/1026459)

我的情况的解决方案：

```
document.onfocusout = function(){
 alert("lost");
}; 
```

这实际上控制了一个间隔，但这不是重点。`onfocusout`适用于 ie8、~~chrome、safari 和 ff~~。我不确定 ie8 有什么问题，`blur`但我正在逐步淘汰它。

**编辑**

不幸的是 document.onfocusout 在 chrome 或 safari 中不起作用，所以我不得不做更多的解决方法。这就是我最终得到的。

```
 //ie workaround
    document.onfocusout = function(e){
        if( e === undefined ){//ie
            var evt = event;//ie uses event
            if( evt.toElement == null ){//check where focus was lost to
             console.log("lost");
            }
        }
    };

    window.onblur = function(e){
     if( e !== undefined ){//ie will have an undefined e here, so this screens them out
      console.log("lost");
     }
    };

    $(window).focus(function () {
     console.log("gained");
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:13:13.387

在 IE8 中复制此内容后，我测试了 Mathias Bynens 的页面可见性 shim 是否有效，并且似乎可以解决您的问题。你可以在这里下载：http: [//mths.be/visibility](http://mths.be/visibility)。

我确实稍微更改了您的测试代码以避免进入警报循环；

```
$(document).on({
    'show.visibility': function () {
        $(document.body).append(new Date().getTime() + '<br/>');
    },
    'hide.visibility': function () {
        $(document.body).append(new Date().getTime() + '<br/>');
    }
}); 
```

`$(window).blur()`另请注意，这与and的行为确实略有不同`$(window).focus()`，而不是在用户在窗口元素外单击时激活，在大多数浏览器（IE 除外）中，这只会在用户不再看到窗口时激活（例如开关选项卡，或最小化浏览器，但在更改为不同的应用程序或监视器时不会）。我个人赞成这种行为，因为我不希望网站在我仍在观看但与不同的应用程序交互时发生变化。

# java - 将 java 系统属性与 hadoop 一起使用

> ID：13575218
> 
> 赞同：0
> 
> 时间：2012-11-26T23:53:39.070
> 
> 标签：java, hadoop

我正在尝试运行一个简单的 hadoop 作业，

```
hadoop jar /root/ravi/ConvertDataWithHadoopOne.jar   com.mdotm.recommender.ConvertDataWithHadoopOne -Dmapred.job.priority=VERY_HIGH   /mdotm/observationtotal/2012-11-18 /mdotm/recommendationsworkdir/recommendationinput/2012-11-18 
```

然而，它被`-Dmapred.job.priority=VERY_HIGH`作为输入而不是系统属性，因此它失败了。

谁能帮助我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:57:44.320

在您的 hadoop`conf`目录中，将所需的 JVM 参数添加到`hadoop-env.sh`. 像这样的东西应该工作：

```
export HADOOP_OPTS="$HADOOP_OPTS -Dmapred.job.priority=VERY_HIGH" 
```

[http://hadoop.apache.org/docs/r0.18.3/cluster_setup.html#Configuration+Files](http://hadoop.apache.org/docs/r0.18.3/cluster_setup.html#Configuration+Files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:32:23.460

我找到了答案 如果想使用系统属性，必须使用 GenericsOptionsParser 来处理参数。

一个例子可以在这里找到

[http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/util/GenericOptionsParser.html](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/util/GenericOptionsParser.html)

# java - “比较法违反了它的总契约！” - TimSort 和 GridLayout

> ID：13575224
> 
> 赞同：37
> 
> 时间：2012-11-26T23:54:58.197
> 
> 标签：java, swing, java-7, grid-layout, timsort

我制作了一个带有 jPanel 和 JLabel 数组的调色板。起初它运行良好，但后来我将其他一些 jLabels 从 JPanel 中取出并添加了一些事件。现在我不断收到此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Comparison method violates its general contract!
at java.util.TimSort.mergeLo(TimSort.java:747)
at java.util.TimSort.mergeAt(TimSort.java:483)
at java.util.TimSort.mergeCollapse(TimSort.java:410)
at java.util.TimSort.sort(TimSort.java:214)
at java.util.TimSort.sort(TimSort.java:173)
at java.util.Arrays.sort(Arrays.java:659)
at java.util.Collections.sort(Collections.java:217)
at javax.swing.SortingFocusTraversalPolicy.enumerateAndSortCycle(SortingFocusTraversalPolicy.java:136)
at javax.swing.SortingFocusTraversalPolicy.getFocusTraversalCycle(SortingFocusTraversalPolicy.java:110)
at javax.swing.SortingFocusTraversalPolicy.getFirstComponent(SortingFocusTraversalPolicy.java:435)
at javax.swing.LayoutFocusTraversalPolicy.getFirstComponent(LayoutFocusTraversalPolicy.java:166)
at javax.swing.SortingFocusTraversalPolicy.getDefaultComponent(SortingFocusTraversalPolicy.java:515)
at java.awt.FocusTraversalPolicy.getInitialComponent(FocusTraversalPolicy.java:169)
at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:380)
at java.awt.Component.dispatchEventImpl(Component.java:4731)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.SequencedEvent.dispatch(SequencedEvent.java:116)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:682)
at java.awt.EventQueue$3.run(EventQueue.java:680)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:696)
at java.awt.EventQueue$4.run(EventQueue.java:694)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

在我第一次收到此错误后，我试图删除我所做的所有事情，但仍然会收到它。当我将布局从 GridLayout 更改为其他任何内容时，错误就会消失，但代码变得无用。所以我需要GridLayout。当我将该 JPanel 中的所有内容移动到另一个 JPanel 时，错误也会消失。但是当我删除第一个 JPanel 时，错误又回来了。

顺便说一句，该程序可以运行，但是不断出现错误并不令人高兴...

编辑：当我使用少于 225 的颜色时，没有错误。我真的很好奇发生了什么。任何解释将不胜感激......

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-27T00:55:53.913

在我看来，您[在 JDK 中遇到了一个错误，](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=7075600)因为错误似乎来自 Swing 类。

选项：

1.  将属性定义 `java.util.Arrays.useLegacyMergeSort`为`true`。在您的代码中使用该行

    ```
    System.setProperty("java.util.Arrays.useLegacyMergeSort", "true"); 
    ```

    在任何 Swing 代码之前。作为该`main`方法的第一行应该有效。

    或添加

    ```
    -Djava.util.Arrays.useLegacyMergeSort=true 
    ```

    到您的启动选项（在控制台中，或在 IDE、Ant 脚本等的项目属性中）

2.  升级你的JDK，看看问题是否消失

3.  降级到 Java 6

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-09T15:35:25.767

报告我的发现：

```
-Djava.util.Arrays.useLegacyMergeSort=true 
```

作品

但

```
System.setProperty("java.util.Arrays.useLegacyMergeSort", "true"); 
```

不起作用。

这是因为在 JDK Arrays.class

```
 static final class LegacyMergeSort {
    private static final boolean userRequested = ... 
```

它是一个静态变量，在 jvm 启动时定义。如果类已加载到 jvm 中，则在程序中设置系统属性将不起作用。

我一直在监视 LegacyMergeSort.userRequested 变量，并且上述声明证实了调查结果。

**更新**：程序必须在将 java.util.Arrays 加载到类加载器之前设置系统属性。否则，一旦加载，由于上述原因，设置属性将无用。

确保没有其他加载 Arrays.class：

通过将以下代码放入您的程序进行测试：

```
 java.lang.reflect.Method m = ClassLoader.class.getDeclaredMethod("findLoadedClass", new Class[] { String.class });
    m.setAccessible(true);
    ClassLoader cl = ClassLoader.getSystemClassLoader();
    Object test1 = m.invoke(cl, "java.util.Arrays");
    System.out.println("test1 loaded? ->" + (test1 != null)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-05T17:50:14.387

**[更新]** 遗憾的是，此解决方案不能保证在所有情况下都能解决问题。仅修补 KeyboardFocusManager 的默认 SortingFocusTraversalPolicy 是不够的。

我建议阅读下面 Robin Loxley 的答案，包括他的更新。 **[/更新]**

```
java.lang.IllegalArgumentException: Comparison method violates its general contract!
    at java.util.TimSort.mergeHi(TimSort.java:868) 
```

这个问题是由`javax.swing.LayoutComparator`.

下面的类安装了一个固定的版本`javax.swing.LayoutComparator`，不违反`Comparator<Component>`. 这个（或任何其他）固定版本`javax.swing.LayoutComparator`应该由一些 Oracle 贡献者提交给 Oracle。

```
package ...;

import java.awt.Component;
import java.awt.ComponentOrientation;
import java.awt.FocusTraversalPolicy;
import java.awt.KeyboardFocusManager;
import java.awt.Window;
import java.lang.reflect.Field;
import java.util.Comparator;
import java.util.LinkedList;
import java.util.ListIterator;

import javax.swing.JRootPane;
import javax.swing.SortingFocusTraversalPolicy;
import javax.swing.UIManager;

/**
 * Uses reflection to install a fixed version of {@link javax.swing.LayoutComparator} to solve the
 * LayoutFocusTraversalPolicy/TimSort problem.
 * 
 * <p>
 * <code>java.lang.IllegalArgumentException: Comparison method violates its general contract!</code>
 * <br/>
 * &nbsp;&nbsp;&nbsp;&nbsp;{@code     at java.util.TimSort.mergeHi(TimSort.java:868)}
 * </p>
 * <p>
 * Usage: call {@code Class.forName(LayoutFocusTraversalPolicyTimSortBugFixer.class.getName())}
 * before creating Swing components.
 * </p>
 * 
 * @author Burkhard Strauss
 * @since Feb 2015
 */
public class LayoutFocusTraversalPolicyTimSortBugFixer
{

   static
   {
      UIManager.getUI(new JRootPane()); // make Swing install the SortingFocusTraversalPolicy
      final KeyboardFocusManager keyboardFocusManager = KeyboardFocusManager
            .getCurrentKeyboardFocusManager();
      final FocusTraversalPolicy focusTraversalPolicy = keyboardFocusManager
            .getDefaultFocusTraversalPolicy();
      boolean fixed = false;
      if (focusTraversalPolicy instanceof SortingFocusTraversalPolicy)
      {
         try
         {
            final Field field = SortingFocusTraversalPolicy.class.getDeclaredField("comparator");
            final boolean accessible = field.isAccessible();
            try
            {
               field.setAccessible(true);
               field.set(focusTraversalPolicy, new LayoutComparator());
               fixed = true;
            }
            finally
            {
               field.setAccessible(accessible);
            }

         }
         catch (final Exception e)
         {
         }
      }
      if (!fixed)
      {
         Loggers.getLoggerFor(LayoutFocusTraversalPolicyTimSortBugFixer.class).warn("could not fix the bug");
      }
   }

   /**
    * Fixed version of {@link javax.swing.LayoutComparator}.
    * <p>
    * Search for 'bugfix' in the code.
    * </p>
    * 
    * @author Burkhard Strauss
    * @since Feb 2015
    */
   @SuppressWarnings("serial")
   private static class LayoutComparator implements Comparator<Component>, java.io.Serializable
   {

      private static final int ROW_TOLERANCE = 10;

      private boolean horizontal = true;
      private boolean leftToRight = true;

      @SuppressWarnings("unused")
      void setComponentOrientation(final ComponentOrientation orientation)
      {
         horizontal = orientation.isHorizontal();
         leftToRight = orientation.isLeftToRight();
      }

      @Override
      public int compare(Component a, Component b)
      {
         if (a == b)
         {
            return 0;
         }

         // Row/Column algorithm only applies to siblings. If 'a' and 'b'
         // aren't siblings, then we need to find their most inferior
         // ancestors which share a parent. Compute the ancestory lists for
         // each Component and then search from the Window down until the
         // hierarchy branches.
         if (a.getParent() != b.getParent())
         {
            final LinkedList<Component> aAncestory = new LinkedList<Component>();
            for (; a != null; a = a.getParent())
            {
               aAncestory.add(a);
               if (a instanceof Window)
               {
                  break;
               }
            }
            if (a == null)
            {
               // 'a' is not part of a Window hierarchy. Can't cope.
               throw new ClassCastException();
            }
            final LinkedList<Component> bAncestory = new LinkedList<Component>();
            for (; b != null; b = b.getParent())
            {
               bAncestory.add(b);
               if (b instanceof Window)
               {
                  break;
               }
            }
            if (b == null)
            {
               // 'b' is not part of a Window hierarchy. Can't cope.
               throw new ClassCastException();
            }
            for (ListIterator<Component> aIter = aAncestory.listIterator(aAncestory.size()), bIter = bAncestory
                  .listIterator(bAncestory.size());;)
            {
               if (aIter.hasPrevious())
               {
                  a = aIter.previous();
               }
               else
               {
                  // a is an ancestor of b
                  return -1;
               }
               if (bIter.hasPrevious())
               {
                  b = bIter.previous();
               }
               else
               {
                  // b is an ancestor of a
                  return 1;
               }
               if (a != b)
               {
                  break;
               }
            }
         }

         final int ax = a.getX(), ay = a.getY(), bx = b.getX(), by = b.getY();
         int zOrder = a.getParent().getComponentZOrder(a) - b.getParent().getComponentZOrder(b);
         {
            //
            // Here is the bugfix:
            // Don't return 0 if a != b. This would violate the contract of
            // Comparator<Component>.compare().
            //
            if (zOrder == 0)
            {
               zOrder = -1;
            }
         }
         if (horizontal)
         {
            if (leftToRight)
            {

               // LT - Western Europe (optional for Japanese, Chinese, Korean)

               if (Math.abs(ay - by) < ROW_TOLERANCE)
               {
                  return (ax < bx) ? -1 : ((ax > bx) ? 1 : zOrder);
               }
               else
               {
                  return (ay < by) ? -1 : 1;
               }
            }
            else
            { // !leftToRight

               // RT - Middle East (Arabic, Hebrew)

               if (Math.abs(ay - by) < ROW_TOLERANCE)
               {
                  return (ax > bx) ? -1 : ((ax < bx) ? 1 : zOrder);
               }
               else
               {
                  return (ay < by) ? -1 : 1;
               }
            }
         }
         else
         { // !horizontal
            if (leftToRight)
            {

               // TL - Mongolian

               if (Math.abs(ax - bx) < ROW_TOLERANCE)
               {
                  return (ay < by) ? -1 : ((ay > by) ? 1 : zOrder);
               }
               else
               {
                  return (ax < bx) ? -1 : 1;
               }
            }
            else
            { // !leftToRight

               // TR - Japanese, Chinese, Korean

               if (Math.abs(ax - bx) < ROW_TOLERANCE)
               {
                  return (ay < by) ? -1 : ((ay > by) ? 1 : zOrder);
               }
               else
               {
                  return (ax > bx) ? -1 : 1;
               }
            }
         }
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-08T19:10:15.533

我刚刚遇到了同样的错误，并花了很多时间来追踪它。为了帮助遇到此错误的其他人，了解如何测试 TimSort 很重要。违反传递性契约并抛出此错误的检查在算法中很深，需要测试以满足某些标准才能重现此问题。

1.  创建一个包含 32 个或更多对象的列表。
2.  在该列表中，需要进行两次或多次运行。
3.  每次运行必须包含 3 个或更多对象。

一旦满足这两个标准，您就可以开始测试此故障。

运行被定义为列表的子集，其中每个项目已经处于所需的有序状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T13:17:58.873

按照上面的建议修补 LayoutComparator 是不够的。此修复在我的情况下不起作用。该问题已在 JDK 8（至少 8u45）中得到修复。SortingFocusTraversalPolicy 使用旧的合并排序方法。

# ruby-on-rails - heroku PGError：已经存在 500 很抱歉，出了点问题

> ID：13575225
> 
> 赞同：1
> 
> 时间：2012-11-26T23:55:04.063
> 
> 标签：ruby-on-rails, heroku

> 已解决：这个问题是如何神秘消失的，这是 heroku 生成的 url
> 
> [http://pacific-escarpment-9949.herokuapp.com/](http://pacific-escarpment-9949.herokuapp.com/)
> 
> 如果有人能详细说明为什么它在 30 分钟前给出了错误页面，我将不胜感激，但现在不再如此。

它在本地运行良好。但是当我将它推送到 Heroku 时，它给出了这个错误。

我认为它与数据库有关，因为我使用了以下命令：

```
rails generate migration add_user_id_to_post integer (pseudocode, it worked fine) 
```

我已经运行：$ heroku run rake db:migrate

应该是主页的页面显示：我们很抱歉，但出了点问题。

我之前遇到过这个问题，但是当我运行 heroku run rake db:migrate 时，它​​解决了这个问题。但这次不是。请帮助。我已经被困了3个小时了。谢谢你。

这是我在 git hub 上的仓库：[https ://github.com/nixor/blog](https://github.com/nixor/blog)

请原谅我的菜鸟，所有这些对我来说都是 2 周新的。

```
nixor@unix:$ heroku run rake db:migrate
    Running `rake db:migrate` attached to terminal... up, run.1
    DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
    DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
    Connecting to database specified by DATABASE_URL
    Migrating to CreatePosts (20121124111726)
    ==  CreatePosts: migrating ====================================================
    -- create_table(:posts)
    NOTICE:  CREATE TABLE will create implicit sequence "posts_id_seq" for serial column "posts.id"
    NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "posts_pkey" for table "posts"
       -> 0.0215s
    ==  CreatePosts: migrated (0.0216s) ===========================================

    Migrating to CreateUsers (20121126134513)
    ==  CreateUsers: migrating ====================================================
    -- create_table(:users)
    NOTICE:  CREATE TABLE will create implicit sequence "users_id_seq" for serial column "users.id"
    NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "users_pkey" for table "users"
       -> 0.0121s
    ==  CreateUsers: migrated (0.0122s) ===========================================

    Migrating to AddUserIdToPosts (20121126173652)
    ==  AddUserIdToPosts: migrating ===============================================
    -- add_column(:posts, :user_id, :integer)
    rake aborted!
    An error has occurred, this and all later migrations canceled:

    PGError: ERROR:  column "user_id" of relation "posts" already exists
    : ALTER TABLE "posts" ADD COLUMN "user_id" integer
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:652:in `async_exec'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:652:in `block in execute'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
    /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1025:in `add_column'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:466:in `block in method_missing'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `block in say_with_time'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:438:in `say_with_time'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:458:in `method_missing'
    /app/db/migrate/20121126173652_add_user_id_to_posts.rb:3:in `change'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:407:in `block (2 levels) in migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:407:in `block in migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:389:in `migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:528:in `migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:775:in `call'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:775:in `block in ddl_transaction'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/transactions.rb:208:in `transaction'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:775:in `ddl_transaction'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:719:in `block in migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:700:in `each'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:700:in `migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:570:in `up'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/migration.rb:551:in `migrate'
    /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
    Tasks: TOP => db:migrate
    (See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:12:51.147

[将 user_id 添加到帖子](https://github.com/nixor/blog/blob/master/db/migrate/20121126173652_add_user_id_to_posts.rb)没有意义，因为 user_id 已经在第[一次迁移](https://github.com/nixor/blog/blob/master/db/migrate/20121124111726_create_posts.rb)中定义。Postgres 正确地引发了错误。

删除迁移应该是安全的，因为它不会进行任何更改。

# java - IP 地址不会连接到相同的 IP 地址

> ID：13575238
> 
> 赞同：2
> 
> 时间：2012-11-26T23:57:20.167
> 
> 标签：java

编辑：这个问题是我项目组中的其他人写的。它的措辞不是很好，也不是信息丰富，所以如果你偶然发现这里，请告诉我你是否需要任何澄清等。

服务器通过消息将 IP 地址发送给客户端。然后我们的客户端读取消息并通过读取它来显示 IP 地址。我在它收集正确数字的地方有它，但在返回到发送的 IP 地址时没有连接。知道为什么即使使用相同的地址也无法连接吗？代码如下：

```
byte IPAddr[] = Arrays.copyOfRange(message, 3, 7); //and that is equal to "0.0.0.1" 

try {    
  InetAddress IP = InetAddress.getByAddress(IPAddr);    
  Socket clientSocket = new Socket(IP, returnPort);    
  System.out.println("Connected!");    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:00:09.270

服务器有多个 IP 地址。为此，它提供给客户端的地址必须是其*外部*IP 地址。一个不起作用的示例是环回地址 127.0.0.1，即使从服务器的角度来看它是正确的 IP。

# wcf - wcf webservice 使用 mtom 流式传输二进制数据得到错误“接收 HTTP 响应时发生错误 ***”

> ID：13575240
> 
> 赞同：3
> 
> 时间：2012-11-26T23:58:10.103
> 
> 标签：wcf, web-services, serialization, mtom

我必须开发一个能够发送带有附件的电子邮件的 Web 服务和一个使用 wcf 和 mtom 进行序列化的客户端。我在工作中使用以下工具：

Windows 7 Professional x64 Microsoft Visual Studio 2012 Microsoft Development Server/ IIS Express 8.0 用户：管理员

每次我尝试在客户端中使用来自消息合同的自定义类的 Web 服务时，我都会收到错误消息“接收对 . 的 HTTP 响应时发生错误`http://localhost:2364/Service1.svc`。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关详细信息，请参阅服务器日志。

现在，我只是尝试设置一个简单的测试服务和一个简单的测试客户端。我尝试了以下事情并且总是得到相同的错误，而使用来自 web 服务的方法，这些方法只在请求和响应中使用简单的字符串，效果很好，没有任何错误。

1.  来自 Visual Studio 2012 和 IIS Express 8.0 的集成 Microsoft 开发服务器上的相同错误

2.  在客户端和服务的配置中使用 basicHttpBinding 或 wsHttpBinding 的相同错误

3.  试图在两台服务器上生成日志文件。IIS Express 服务器在配置文件之外的其他文件夹中生成一些日志，但不使用我的配置文件中的设置。Microsoft 开发服务器不生成任何内容。

4.  我使用 svctraceviewer.exe 来查看生成的几个日志文件，并且刚刚看到一些带有操作码 MODULE_SET_RESPONSE_ERROR_STATUS 的警告。我无法理解这些信息。

5.  我尝试为指定文件夹启用 localService 和 networkService 的读/写权限，但没有结果。

6.  我尝试使用 RawCap 嗅探 localhost 并使用 wireshark 观察结果，但输出文件有 0 个字节（这一定是另一个问题）。

如果您需要更多信息，请告诉我。

谢谢！

以下是我的服务和客户端代码和配置（仅用于测试）：

**服务：IService1.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.IO;

namespace WcfTestService
{

[ServiceContract]
public interface IService1
{

    [OperationContract]
    string GetData(int value);

    /*
    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);*/

    // TODO: Hier Dienstvorgänge hinzufügen

    [OperationContract]
    ServiceResponse TestCase(ServiceRequest testRequest);
}

/*
// Verwenden Sie einen Datenvertrag, wie im folgenden Beispiel dargestellt, um Dienstvorgängen zusammengesetzte Typen hinzuzufügen.
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string stringValue = "Hello ";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    }
}*/

[MessageContract]
public class ServiceRequest
{
    [MessageHeader]
    public String Type { get; set; }

    [MessageBodyMember]
    public Stream Contents { get; set; }
}

[MessageContract]
public class ServiceResponse
{
    [MessageHeader]
    public String Type { get; set; }

    [MessageBodyMember]
    public Stream Contents { get; set; }
}
} 
```

**服务：web.config：**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

<system.diagnostics>
<sources>
  <source name="System.ServiceModel.MessageLogging"  switchValue="Ausführlich,ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="ServiceModelMessageLoggingListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
  <source propagateActivity="true" name="System.ServiceModel" switchValue="Ausführlich,ActivityTracing">
    <listeners>
      <add type="System.Diagnostics.DefaultTraceListener" name="Default">
        <filter type="" />
      </add>
      <add name="ServiceModelTraceListener">
        <filter type="" />
      </add>
    </listeners>
  </source>
</sources>
<sharedListeners>
  <add initializeData="d:\log\web_messages.svclog"
    type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
    <filter type="" />
  </add>
  <add initializeData="d:\log\web_tracelog.svclog"
    type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
    <filter type="" />
  </add>
</sharedListeners>
<trace autoflush="true" />
</system.diagnostics>
<appSettings>
<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
<compilation debug="true" targetFramework="4.5" />
<!--httpRuntime targetFramework="4.5"/>-->
<httpRuntime targetFramework="4.5" maxRequestLength="102400" executionTimeout="7200"/>
</system.web>
<system.serviceModel>
<diagnostics>
  <messageLogging logEntireMessage="true" logKnownPii="true" logMalformedMessages="true"
    logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
  <endToEndTracing propagateActivity="true" activityTracing="true"
    messageFlowTracing="true" />
</diagnostics>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpMtomBinding" closeTimeout="10:01:00"
      openTimeout="10:01:00" receiveTimeout="10:10:00" sendTimeout="10:01:00"
      transferMode="Streamed" messageEncoding="Mtom">
      <readerQuotas maxDepth="1000" maxStringContentLength="1000" maxArrayLength="1000"
        maxBytesPerRead="1000" maxNameTableCharCount="1000" />
    </binding>
  </basicHttpBinding>
  <wsHttpBinding>
    <binding name="wsHttpMtomBinding" closeTimeout="10:01:00" openTimeout="10:01:00"
      receiveTimeout="10:10:00" sendTimeout="10:01:00" maxBufferPoolSize="999999999"
      maxReceivedMessageSize="1048576" messageEncoding="Mtom"
useDefaultWebProxy="true">
      <readerQuotas maxDepth="100" maxStringContentLength="1000" maxArrayLength="1000"
        maxBytesPerRead="100000" maxNameTableCharCount="1000" />
      <reliableSession inactivityTimeout="10:10:00" />
      <security mode="None" />
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<protocolMapping>
  <remove scheme="http" />
  <add scheme="http" binding="wsHttpBinding" bindingConfiguration="wsHttpMtomBinding" />
  <add scheme="https" binding="basicHttpsBinding" />
</protocolMapping>    
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"
multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
<!--
    Um das Stammverzeichnis der Webanwendung beim Debuggen auszuwählen, legen Sie den Wert unten auf "true" fest.
    Legen Sie ihn vor der Bereitstellung auf "false" fest, um die Veröffentlichung von Informationen über den Webanwendungsordner zu vermeiden.
  -->
<directoryBrowse enabled="true"/>
</system.webServer>

</configuration> 
```

**客户端：app.config：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IService1" messageEncoding="Mtom">
                <security mode="None" />
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:2364/Service1.svc" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IService1" contract="ServiceReference1.IService1"
            name="WSHttpBinding_IService1">
            <identity>
                <userPrincipalName value="Ares\Admin" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel>
</configuration> 
```

**客户：Form1.cs**

```
 ...

        private void button1_Click(object sender, EventArgs e)
    {

        ServiceReference1.IService1 testService = new ServiceReference1.Service1Client();
        ServiceReference1.ServiceRequest testInput = new ServiceReference1.ServiceRequest();
        ServiceReference1.ServiceResponse testOutput = new ServiceReference1.ServiceResponse();

        BinaryFormatter formatter = new BinaryFormatter();
        MemoryStream inoutStream = new MemoryStream();

        testInput.Type = "TestType";
        String test = "TestContent";
        testInput.Contents = new MemoryStream();
        formatter.Serialize(testInput.Contents, test);
        //testInput.Contents.Position = 0;

        testService.TestCase(testInput);

        MessageBox.Show("Done!");

    }

    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:01:28.647

我在 web.config（端点等）中看不到任何服务配置数据

```
 <services>
      <service behaviorConfiguration="..." name="[Namespace].Service1">
        <endpoint address="" binding="basicHttpBinding" bindingNamespace="..." bindingConfiguration="..." contract="[Namespace].IService1">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
             <add baseAddress="http://localhost:5000/Service1"/>
... 
```

您可以在运行时配置端点（基本上在自托管服务中），但对于简单的场景和 IIS 基础架构......？

请参阅[http://msdn.microsoft.com/en-us/library/ee354381.aspx](http://msdn.microsoft.com/en-us/library/ee354381.aspx)

# ruby-on-rails - 为什么即使在运行时我也不能使用 postgres？

> ID：13575243
> 
> 赞同：0
> 
> 时间：2012-11-26T23:58:19.927
> 
> 标签：ruby-on-rails, postgresql, database-connection

> **可能重复：**
> [Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的 PostgreSQL 权限被拒绝错误 - Lion Server 10.7.3 或 Lion Server 10.7.4](https://stackoverflow.com/questions/11377416/postgresql-permission-denied-error-on-unix-domain-socket-var-pgsql-socket-s-p)

我使用 postgres 作为 Rails 的后端数据库，但由于配置错误问题，它已停止工作，但我看不到它是什么。

我的 postgres 版本是 9.1.4，安装在 /usr/bin

我正在运行 ruby​​ 版本 1.9.3，但我必须在 rvm 中手动切换到它，因为会出现默认的 1.8.7。

我正在运行 Rails 3.2.8

我的配置文件 pg_hba.conf 看起来像：

```
# "local" is for Unix domain socket connections only
local   all         all                               md5
# IPv4 local connections:
host    all         all         127.0.0.1/32          md5
# IPv6 local connections:
host    all         all         ::1/128               md5 
```

postgres.conf 文件中的大多数行都被注释掉了，除了一些无害的行，例如：

```
log_destination = 'stderr'
listen_addresses = '*'   
port = 5432                             
max_connections = 100 
```

我还为 Mac 安装了“Postgres 应用程序”（请参阅​​ postgresapp.com/documentation），它说它正在运行并在端口 5432 上侦听。

当我运行 ps -ax | 我看到的 grep 帖子：

```
1088 ??         0:00.08 com.heroku.postgres-service
 1135 ??         0:00.29 /Applications/Postgres.app/Contents/MacOS/bin/postgres -D /Users/rickc/Library/Application Support/Postgres/var -p5432
 1137 ??         0:01.14 postgres: writer process      
 1138 ??         0:00.78 postgres: wal writer process      
 1139 ??         0:00.20 postgres: autovacuum launcher process      
 1140 ??         0:00.26 postgres: stats collector process 
```

但是当我尝试在 localhost:3000 启动 rails connect 时，我收到以下错误消息：PG::Error

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我试图在这里检查以前的帖子，当然，postgres 文档看不到这里配置错误的地方；非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T21:18:57.407

这是一个 postgres 问题，而不是 rails/ruby 问题。

为了向自己证明这一点，请打开一个终端并执行

```
psql -U username -W db_name 
```

`username`您的用户名在哪里，`db_name`是数据库的名称。

您应该收到“无法连接到服务器”错误。

这是你要做的：

*   `tail`您的 postgres 在终端窗口中登录
*   重启 postgres 并观察终端

您将在日志中看到问题。如果您无法找出问题所在，请发布日志的相关部分，我们将进行查看。

# css - 如何阻止绝对定位元素的父级折叠

> ID：13575245
> 
> 赞同：11
> 
> 时间：2012-11-26T23:58:28.363
> 
> 标签：css, positioning

如何阻止绝对定位元素的父级折叠？

在以下代码中，外部 div 的高度为 0：

```
<div id="outer" style="position: relative;">
    <div id="inner" style="position: absolute; height: 100px;">
        <p>This is the inner content.</p>
    </div>            
</div> 
```

这与这个问题非常相似，[你如何防止浮动元素的父母崩溃？](https://stackoverflow.com/questions/218760/how-do-you-keep-parents-of-floated-elements-from-collapsing)，它处理浮动元素，但是我尝试了一些解决方案（包括 spacer 和 clearfix 类），但它们不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:34:20.407

你不能：一旦孩子处于绝对位置，它实际上就在父母的“外面”（在外观上）。

如果你包含了 jquery，你可以做的是使用这个不雅的 hack：

```
$(".absolutepos").each(function() {
    $(this).parent().css("height",$(this).height());
}); 
```

并在将 div 放置在绝对位置时添加“absolutepos”类：

```
<div id="outer" style="position: relative;">
    <div id="inner absolutepos" style="position: absolute; height: 100px;">
        <p>This is the inner content.</p>
    </div>            
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-14T19:51:31.557

**你可以：**通过我称之为“**双亲**”的东西：

在一个类似的挑战中，我最终定义了一个外部相对对象（浮动的父对象）和一个与相对父对象具有相同尺寸的绝对定义的框，从共享（相对）父对象的 0,0 开始：一个相同的副本允许将对象放置在其中可以忽略浮动的外部限制的好处（我需要它将对象在页面上居中，而不管动态浮动的宽度如何。）

“双亲”解决了这两个问题：

1.  绝对父级无法获得浮动的高度（但能够适应浮动的共同父级的高度）。
2.  相对父级无法定位以页面为中心的对象（它只会找到浮动之间的中间，并防止居中的内容越过浮动对象的边界）。

我做了一个[小提琴（包含文档）](http://jsfiddle.net/Acanthus/8da6n6tL/)，演示了这个设置如何挤压和挤压，同时仍然保持居中的盒子。下面的代码概述了基本思想：

**html** （附带说明：div 的顺序（左-中-右，中-右-左，...）无关紧要。）

```
<header>
     <div class="header-left">left</div>
     <div class="header-center">
        <div class="centerinner">middle</div>
     </div>
     <div class="header-right">right</div>
</header> 
```

**css**

```
header {
    position:relative; /* shrinkwrap to contained floats */
    /* display: block  /* no need to state this here */
    width: 100%;
    margin:0;
    padding:0;
    vertical-align: top;
    /* background-color: papayawhip; /* Debug */
}
.header-left { /* top left of header. header adapts to height */
    float:left;
    display:block;
    /* width and padding as desired */
}
.header-center { /* absolute reference for container box */
    position:absolute;
    left: 0;
    width: 100%;
    height:100%;
    /* background-color: gainsboro; /* Debug */
}
.centerinner { /* centered within absolute reference */
    margin-left:45%;
    margin-right:45%;
    padding-left: 1ex;
    padding-right: 1ex;
    background-color: #D6A9C9;
    width: -moz-fit-content;
    width: -webkit-fit-content;
    width: fit-content;
    height:100%;
}
.header-right {
    float:right;
    text-align: right;
    padding-left: 1ex;
    color: forestgreen;
 /* background-color: #D6F2C3; /* Debug */
} 
```

# php - PHP：使用 array_filter

> ID：13575246
> 
> 赞同：1
> 
> 时间：2012-11-26T23:58:29.843
> 
> 标签：php, arrays, callback

这实际上与我之前询问的一个问题有关，在哪里有人好心地提供了一些我可以使用的代码作为我提出的问题的解决方案。

现在，我了解了大部分已发布的代码，直到我了解使用 array_filter 检索重复行的位置。

作为参考，这是我之前提出的问题；[PHP：以 OOP 方式搜索 CSV 文件](https://stackoverflow.com/questions/13249018/php-searching-through-a-csv-file-the-oop-way)

这就是我很难完全理解发生了什么的地方；

```
public static function getRowsWithDuplicates($columnIndex) {
    $values = array();
    for ($i = 0; $i < $this->_dataSet->getRowCount(); ++$i) {
        $values[$this->_dataSet->->getValueAt($i, $columnIndex)][] = $i;
    }

    return array_filter($values, function($row) { return count($row) > 1; });
} 
```

首先; 查看该代码，在我看来 $values 是一个关联数组。如果是这样，那么 array_filter 如何表现以返回具有重复值的行？

我不认为我完全理解 array_filter 发生的过程来理解这段代码；我知道 array_filter 将数组中的每个值传递到其参数中提供的函数中，然后从该函数返回一个值，但是在这个特定的示例中，我认为我不明白 array_filter 中到底发生了什么。

如果有人能在我可以逐步理解该过程的水平上向我解释它，我将不胜感激，这样我就可以更好地理解上述代码中发生的事情，这样我就可以超越仅仅复制结果。

~~如果 $values 是关联数组，那么代码如何利用关联数组的属性返回重复行？~~

我想这并不是我难以理解的函数本身，而是它在这种特殊情况下的使用方式。

```
return count($row) > 1; 
```

我不明白返回值时比较运算符的行为方式；是不是说只有在多于 1 行时才返回 TRUE，然后 array_filter 正在评估该 TRUE 语句并返回与之关联的值？

在函数（$row）中传递给 $row 的是什么？

正如你所看到的，我的问题比我回答的要多得多，我宁愿向我解释，也不愿花太长时间推测并得出错误的结论。

~~$row 只是 array_filter 用来传递数组值的参数吗？~~

**编辑：这是我修改后的问题，更具体，更符合我正在寻找的答案；**

我了解 array_filter 在做什么，但我不明白它是如何做到的。代码的原始发布者 Jon 写道；“此代码将返回一个数组，其中键是 CSV 数据中的值，值是数组，其中每个值出现的行的索引从零开始。”

这是我不明白的；如何达到 $values 的值是数组的值，这些值是每个值出现的行的从零开始的索引。代码如何找到每个值出现的每一行的索引，并将其放入存储在 $values 中的数组中？

所以我的问题与这部分代码有关：

```
for ($i = 0; $i < $this->_dataSet->getRowCount(); ++$i) {
    $values[$this->_dataSet->->getValueAt($i, $columnIndex)][] = $i; 
```

代码如何找到匹配值的所有索引，将它们放入一个数组中，该数组的键是索引相关的值？

就像我看不到重复值的整个搜索一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:01:59.960

中的回调`array_filter`应该返回`true`or `false`。如果返回`true`，则表示应保留当前值。如果返回`false`，则应丢弃当前值。

数组的每个值都作为其第一个参数（`$row`在本例中）传递给回调函数，然后由回调决定是否保留该值。

# php - 选择提供日期之前的所有 MySQL 数据

> ID：13575248
> 
> 赞同：1
> 
> 时间：2012-11-26T23:58:38.960
> 
> 标签：php, mysql, sql

我有一个小型 PHP 应用程序，它应该允许用户在 XHTML Web 表单中输入 4 位数的年份，并返回保存在 MySQL 数据库中的所有信息，其年份低于提供的年份。年份存储在 db 列下`yearPublished`。我有查询工作，我没有收到任何错误，但是没有返回任何数据。

这是用于创建数据库的 SQL 文件：

```
CREATE TABLE IF NOT EXISTS `books` (
`ISBN` char(13) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
`title` varchar(40) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`author_firstName` varchar(40) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`author_lastName` varchar(40) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`genre` varchar(35) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`publisher` varchar(40) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`yearPublished` varchar(4) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
`price` float DEFAULT '0.0',
PRIMARY KEY (`ISBN`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

这是执行查询的 PHP 代码：

```
 if(isset($_POST['submitForm'])) {
    $strBookPubYear = $_POST['pubYear'];

    if(empty($strBookPubYear)) {
        print("<p class='error'>You must enter a 4 digit publication date!</p>\n");
    } else {
        if(!is_numeric($strBookPubYear)) {
            print("<p class='error'>The publication date must be numeric.</p>\n");
        } else {
            if(!(strlen($strBookPubYear) === 4)) {
                print("<p class='error'>The Publication date must be exactly 4 characters long.</p>\n ");
            } else {

        $sqlQuery = mysql_query("SELECT yearPublished FROM books WHERE yearPublished < '$strBookPubYear'");

        if($sqlQuery === false) {
            print("<p class='error'>Could not execute the query, please try again.</p>\n");
        } else { 
```

注意`$sqlQuery`应该获取`yearPublished`低于的所有数据的变量`$strBookPubYear`。我已经阅读了多个关于此的教程，但它们都使用 MySQL 'Date' 数据类型。就我而言，我使用的是文本数据类型。请不要告诉我使用mysqli，这个具体项目不需要我使用mysqli。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:03:58.267

您在数据库中的最大问题在这里：

``yearPublished` varchar(4) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,`

YearPublished 至少应该是 Integer 或更好的实际 Date 数据类型。

使用 varchar 数据类型（字符串数据类型），此 SQL 永远不会返回任何值：

`$sqlQuery = mysql_query("SELECT yearPublished FROM books WHERE yearPublished < '$strBookPubYear'");`

小于符号，`<`如果字符串值“小于”某个其他字符串值，则无法比较。

**更新**

如果不能改变表的结构，可以使用 MySQL 的[CONVERT 函数](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_convert)在数据类型之间进行转换。

所以这样的事情应该有效：

`$sqlQuery = mysql_query("SELECT yearPublished FROM books WHERE CONVERT(yearPublished, SIGNED) < CONVERT($strBookPubYear, SIGNED)");`

由于`$strBookPubYear`是来自表单提交的字符串，因此您也需要对其进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:03:39.197

您的 yearPublished 存储为 varchar，本质上是一个字符串。因此，当您说 时`yearPublished < '$strBookPubYear'`，它可能没有做您认为它正在做的事情。存储年以 INTEGER 形式发布。无论哪种方式，它都需要 4 个字节。

您可以手动将 varchar 转换为查询中的数字，它可能应该开始工作。

```
SELECT yearPublished FROM books WHERE (yearPublished+0) < '$strBookPubYear' 
```

好吧，这不是真正的问题！试试这个错误检查块，吐出一些更好的线索：

```
// Check result
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$sqlQuery) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    die($message);
} 
```

# php - 如何比较每个列名对的两条最新记录

> ID：13575256
> 
> 赞同：1
> 
> 时间：2012-11-27T00:00:11.593
> 
> 标签：php, mysql, compare

我正在使用 PHP 和 MySQL 并具有以下表结构：

```
 date             |      name      |       value

2012-11-20 10:30:03            visits              503
2012-10-23 09:30:03           pageviews            567
2012-09-23 09:30:03           pageviews            345
2012-10-20 11:30:03            visits              874 
```

我需要运行一个 MySQL 查询来比较每个名称/值对的两条最新记录，并返回名称/值对的值是否下降或上升。

例如，使用上面的示例数据，查询将返回网页浏览量上升而访问量下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:22:37.163

如果您想完全在 中进行比较`MySQL`，您可以分两步进行。

请参阅此处的 SQLFiddle - [http://sqlfiddle.com/#!2/80677/9/0](http://sqlfiddle.com/#!2/80677/9/0)。注意 - SQLFIDDLE 不允许`CREATE TEMPORARY TABLE`，所以我不得不将其修改为`CREATE TABLE`

首先，您需要创建一个临时表，其中仅包含每个`name`组的最后 2 行 -

```
CREATE TEMPORARY TABLE tmptable
   SELECT * FROM
        (SELECT IF(@prev != sq.name, @rownum:=1, @rownum:=@rownum + 1) AS rownumber, @prev:=sq.name, sq.* FROM
       (SELECT * FROM table_name , (SELECT @rownum:=0, @prev:=0) r ORDER BY name, date DESC ) sq
   ) q WHERE q.rownumber <=2; 
```

然后，您将比较这 2 行中的每一行以确定它是上升还是下降 -

```
SELECT a.name,
       IF(a.value > b.value, 'up', 'down') action
FROM tmptable a
JOIN tmptable b 
ON a.name = b.name AND a.date > b.date ORDER BY a.date DESC; 
```

如果您的表结构与您发布的相同`(date,name,value)`- 那么您需要进行的唯一更改就是查询`table_name`中显示的位置。`CREATE TEMPORARY TABLE`

在 PHP 中，您可以回显 -

```
while($row = ...fetch_array($query)){
  echo $row['name'] ." -> ".$row['action']."<br />";
} 
```

# mysql - 是否可以只使用 mysql 查询按时间范围分组？

> ID：13575259
> 
> 赞同：0
> 
> 时间：2012-11-27T00:00:13.173
> 
> 标签：mysql, time, group-by

基本上我有一个包含某种日志的数据库，每条记录都有一个 IP 地址字段，我需要生成一份报告，找出在一小时内记录超过 10 次的任何 IP 地址。我以前还没有写过任何这样的查询，所以我想知道在我开始编写代码之前是否可以只写查询。

表列：

```
ip
time 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:02:24.083

```
select distinct ip
from logs_table
group by ip, date_format(`time`, '%Y%M%d%H')
having count(*) > 10 
```

# c# - 试图用递归更优雅地解决电话词

> ID：13575260
> 
> 赞同：12
> 
> 时间：2012-11-27T00:00:15.907
> 
> 标签：c#, linq, loops, recursion

我已经查看了 Stack Overflow，但无法让任何工作。如果我错过了一个明显的帖子，我深表歉意。

我有一个学校问题，涉及获取电话号码，获取所有可能的单词组合，然后将其写入文本文件。我做到了，并获得了我的任务的全部功劳。我可以用七个嵌套循环来做到这一点，但这不是很优雅而且很死板。当我发现教科书的解决方案是七个嵌套循环时，我大吃一惊，完全失望。我的导师也没有任何答案。

我尝试了许多不同的方法，但我无法将其拨入。我确定了递归和终止点，但始终无法使其正常工作。我可以生成字母序列，但远不及应该有多少。我注释掉了我的尝试，以便您可以看到我失败的思维过程:) 如果您有任何想法，请看一下并告诉我。

```
public partial class TelephoneWorderizer : Form
{
    protected Dictionary<int, IEnumerable<string>> KeyMappings = new Dictionary<int, IEnumerable<string>>();
    protected string[][] ActiveLettersGroups = null;
    protected List<string> Words = new List<string>();
    protected List<string> RecursiveWords = new List<string>();
    protected int Iteration = 0;

    public TelephoneWorderizer()
    {
        InitializeComponent();

        this.KeyMappings = this.GetKeyMappings();
    }

    private void btnGetWords_Click(object sender, EventArgs e)
    {
        string textBoxContent = textBoxNumber.Text;

        int[] digits = this.GetPhoneNumbers(textBoxContent);

        List<string> words = this.GetWords(digits);

        using (StreamWriter writer = new StreamWriter(@"E:\words.txt"))
        {
            foreach (var word in words)
            {
                writer.WriteLine(word);
            }
        }

        textBoxNumber.Clear();
    }

    private List<string> GetWords(int[] digits)
    {
        List<string[]> letterGroupings = new List<string[]>();

        //digits array of numbers
        for (int i = 0, j = digits.Length; i < j; i++)
        {
            int digit = digits[i];

            //if the number has a letter group mapped to it
            if (this.KeyMappings.ContainsKey(digit))
            {
                // letters mapped to a given number
                letterGroupings.Add(this.KeyMappings[digit].ToArray());
            }
        }

        this.WordMakerLoop(letterGroupings);
        //this.WordMaker(letterGroupings);

        return this.Words;
        //return this.RecursiveWords;
    }

    //private void RecursionTest(string word, List<string[]> groups, int letterCtr, int groupCtr)
    //{
    //    string[] Group = groups[groupCtr];

    //    word += Group[letterCtr];

    //    letterCtr += 1;

    //    if (letterCtr < Group.Length - 1)
    //    {
    //        letterCtr = 0;
    //        groupCtr += 1;

    //        // Hit bottom
    //        if (groupCtr == groups.Count - 1)
    //        {
    //            groupCtr -= 1;
    //        }

    //        RecursionTest(word, groups, letterCtr, groupCtr);
    //    }
    //}

    private void WordMaker(List<string[]> letterCollections)
    {
        string newword = "";
        int numberLength = letterCollections.Count;

        this.ActiveLettersGroups = letterCollections.ToArray();

        string[] letterGroup = this.ActiveLettersGroups[0];

        this.RecursiveGetWords(newword, 0, 0);
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="word"></param>
    /// <param name="groupIndex"></param>
    /// <param name="letterIndex"></param>
    private void RecursiveGetWords(string word, int groupIndex, int letterIndex)
    {

        /*
         * 
         * 
         * 
         */

        var numActiveLetterGroups = this.ActiveLettersGroups.Length;

        if (this.ActiveLettersGroups.Length > 0 && this.Iteration < numActiveLetterGroups)
        {
            if (groupIndex < numActiveLetterGroups)
            {
                var letters = this.ActiveLettersGroups[groupIndex]; // Picks the a letter group ex: A, B, C 

                if (letterIndex < letters.Length)
                {
                    //var letter1 = letters.Select(x => 
                    string letter = letters[letterIndex]; // Picks a letter from the group ex: A

                    word += letter;

                    this.RecursiveGetWords(word, groupIndex + 1, this.Iteration);
                }
                else
                {
                    //this.RecursiveWords.Add(word);
                    //word = "";

                    //this.RecursiveGetWords(word, 0, 1);
                }
            }
            else
            {
                this.RecursiveWords.Add(word);
                word = "";
                this.Iteration++;

                this.RecursiveGetWords(word, 0, this.Iteration);
            }
        }
    }

    #region
    private void WordMakerLoop(List<string[]> letterGroups)
    {
        string word = "";

        // array of string[]
        var newGroup = letterGroups.ToArray();

        //grabs a letter group
        for (int i = 0; i < newGroup.Length; i++)
        {
            var letterGroup1 = newGroup[i];

            //grabs a letter from group 1
            for (int j = 0; j < letterGroup1.Length; j++)
            {
                string letter1 = letterGroup1[j];

                if (i + 1 < newGroup.Length)
                {
                    var letterGroup2 = newGroup[i + 1];

                    //grabs a letter from group 2
                    for (int k = 0; k < letterGroup2.Length; k++)
                    {
                        string letter2 = letterGroup2[k];

                        if (i + 2 < newGroup.Length)
                        {
                            var letterGroup3 = newGroup[i + 2];

                            //grabs a letter from group 3
                            for (int l = 0; l < letterGroup3.Length; l++)
                            {
                                string letter3 = letterGroup3[l];

                                if (i + 3 < newGroup.Length)
                                {
                                    var letterGroup4 = newGroup[i + 3];

                                    //grabs a letter from group 4
                                    for (int m = 0; m < letterGroup4.Length; m++)
                                    {
                                        string letter4 = letterGroup4[m];

                                        if (i + 4 < newGroup.Length)
                                        {
                                            var letterGroup5 = newGroup[i + 4];

                                            //grabs a letter from group 5
                                            for (int n = 0; n < letterGroup5.Length; n++)
                                            {
                                                string letter5 = letterGroup5[n];

                                                if (i + 5 < newGroup.Length)
                                                {
                                                    var letterGroup6 = newGroup[i + 5];

                                                    //grabs a letter from group 6
                                                    for (int o = 0; o < letterGroup6.Length; o++)
                                                    {
                                                        string letter6 = letterGroup6[o];

                                                        if (i + 6 < newGroup.Length)
                                                        {
                                                            var letterGroup7 = newGroup[i + 6];

                                                            //grabs a letter from group 6
                                                            for (int p = 0; p < letterGroup7.Length; p++)
                                                            {
                                                                string letter7 = letterGroup7[p];

                                                                word = letter1 + letter2 + letter3 + letter4 + letter5 + letter6 + letter7;
                                                                this.Words.Add(word);
                                                                word = "";
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    // Sanitizes input text and converts the string into and arra of int
    private int[] GetPhoneNumbers(string content)
    {
        int[] phoneNumbers = null;

        string cleanString = this.SanitizeString(content);

        int numbers;

        if (Int32.TryParse(cleanString, out numbers))
        {
            //phoneNumbers = this.GetIntArray(numbers).OfType<int>().ToList();
            phoneNumbers = this.GetIntArray(numbers);
        }

        return phoneNumbers;
    }

    // Removes potential unwanted characters from the phone number
    private string SanitizeString(string content)
    {
        content = content.Replace("-", "");
        content = content.Replace("(", "");
        content = content.Replace(")", "");

        return content;
    }

    //breaks a number into an array of its individual digits
    private int[] GetIntArray(int num)
    {
        List<int> listOfInts = new List<int>();

        while (num > 0)
        {
            listOfInts.Add(num % 10);
            num = num / 10;
        }

        listOfInts.Reverse();

        return listOfInts.ToArray();
    }

    //gets the mappings for the numerical values
    private Dictionary<int, IEnumerable<string>> GetKeyMappings()
    {
        List<string> alphabet = new List<string>() { "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" };
        Dictionary<int, IEnumerable<string>> mappings = new Dictionary<int, IEnumerable<string>>();

        for (int i = 0; i < 10; i++)
        {
            string[] letters = null;
            switch (i)
            {
                case 0:
                case 1:
                    break;
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 8:
                    letters = alphabet.Take(3).ToArray();
                    mappings.Add(i, letters);
                    alphabet.RemoveRange(0, 3);
                    break;
                case 7:
                case 9:
                    letters = alphabet.Take(4).ToArray();
                    mappings.Add(i, letters);
                    alphabet.RemoveRange(0, 4);
                    break;
                default:
                    break;
            }
        }

        return mappings;
    }
    #endregion
} 
```

让我强调一下，对于那些有疑问的人来说，学校作业已经结束。我想做得更好，更有效率。如果有帮助，我可以在 gitHub 上发布我的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:21:17.500

我现在懒得写任何代码，但你绝对应该能够通过递归而不是七个嵌套循环来做到这一点，事实上你应该能够设计一种适用于任意长度电话的方法数字。

基本思想是您将设计一个类似这样的递归方法：

```
void recurse(String phone, int index, StringBuilder sb)
{
   // Get the number at position phone[index]
   // Loop through the possible letters for that particular number (eg. A, B, C):
      // Add the letter to the StringBuilder
      // Call recurse(phone, index + 1, sb)
      // Subtract last letter from the StringBuilder
} 
```

每次递归时，您都在处理下一个数字/字母位置。

当然，如果您遇到终止条件（sb 长度 == 电话长度），那么您只需将 StringBuilder 的当前值写入文件并返回，而不是递归。

希望这可以帮助。

编辑：开始实际编写一些代码。就这么简单，不需要 LINQ：

```
 class Program
   {
      static Dictionary<Char, String> DigitMap = new Dictionary<Char, String>()
      {
         {'0', "0"},
         {'1', "1"},
         {'2', "ABC"},
         {'3', "DEF"},
         {'4', "GHI"},
         {'5', "JKL"},
         {'6', "MNO"},
         {'7', "PQRS"},
         {'8', "TUV"},
         {'9', "WXYZ"}
      };

      static void Main(string[] args)
      {
         String phone = Regex.Replace("867-5309", "[^0-9]", "");
         recurse(phone, 0, new StringBuilder());
      }

      static void recurse(String phone, int index, StringBuilder sb)
      {
         // Terminating condition
         if (index == phone.Length)
         {
            Console.WriteLine(sb.ToString());
            return;
         }

         // Get digit and letters string
         Char digit = phone[index];
         String letters = DigitMap[digit];

         // Loop through all letter combinations for digit
         foreach (Char c in letters)
         {
            sb.Append(c);
            recurse(phone, index + 1, sb);
            sb.Length -= 1;
         }
      }
   }
} 
```

在这段代码中（我制作了一个简单的控制台应用程序），我只是将单词写入控制台，但您可以将字符串添加到数组或将它们写入磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:19:51.377

我假设您可能希望将每个数字转换为自身以及所有普通字母映射，以及映射`0`到`+`. 所以我制作了这本字典来处理映射：

```
var map = new Dictionary<char, string>()
{
    { '0', "+0"},
    { '1', "1" },
    { '2', "2ABC"},
    { '3', "3DEF"},
    { '4', "4GHI"},
    { '5', "5JKL"},
    { '6', "6MNO"},
    { '7', "7PQRS"},
    { '8', "8TUV"},
    { '9', "9WXYZ"},
}; 
```

然后我的置换函数如下所示：

```
Func<IEnumerable<char>, IEnumerable<IEnumerable<char>>> permutate = null;
permutate = cs =>
{
    var result = Enumerable.Empty<IEnumerable<char>>();
    if (cs.Any())
    {
        result = map[cs.First()].Select(c => new [] { c });
        if (cs.Skip(1).Any())
        {
            result =
                from xs in result
                from ys in permutate(cs.Skip(1))
                select xs.Concat(ys);
        }
    }
    return result;
}; 
```

而已。

你可以像这样使用它：

```
var digits = "(08) 8234-5678"
    .Where(x => char.IsDigit(x));

var results =
    permutate(digits)
        .Select(x => new string(x.ToArray())); 
```

结果是一个字符串列表，其中每个字符串都是输入数字的排列。

如果您不想将数字映射到数字，只需将它们从原始字典定义中取出，但您必须为数字保留一个字符才能`1`使其正常工作。

让我知道这是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:02:57.433

这是一个非递归的解决方案，

*   给定一个数字，计算它的第一个单词
*   给定一个单词，“递增”它以找到下一个单词

```
public static class TelephoneFinder
{
    static char[] firstDigits = new char[]
                   { '0', '1', 'A', 'D', 'G', 'J', 'M', 'P', 'T', 'W' };
    public static string First(string number)
    {
        char[] firstWord = new char[number.Length];
        for (int i = 0; i < number.Length; i++)
        {
            var c = number.Substring(i, 1);
            firstWord[i] = firstDigits[int.Parse(c)];
        }
        return new String(firstWord);
    }

    static Dictionary<char, char> rollovers = new Dictionary<char, char> { 
        { '1', '0' }, { '2', '1' }, { 'D', 'A' }, { 'G', 'D' }, { 'J', 'G' },
        { 'M', 'J' }, { 'P', 'M' }, { 'T', 'P' }, { 'W', 'T' }, { '[', 'W' } };
    public static string Next(string current)
    {
        char[] chars = current.ToCharArray();
        for (int i = chars.Length - 1; i >= 0; i--)
        {
            // Increment current character
            chars[i] = (char)((int)chars[i] + 1);

            if (rollovers.ContainsKey(chars[i]))
                // Roll current character over
                // Will then continue on to next character
                chars[i] = rollovers[chars[i]];
            else
                // Finish loop with current string
                return new String(chars);
        }
        // Rolled everything over - end of list of words
        return null;
    }
} 
```

称为例如

```
string word = TelephoneFinder.First("867");
while (!String.IsNullOrEmpty(word))
{
    Console.WriteLine(word);
    word = TelephoneFinder.Next(word);
} 
```

它可能需要一些整理，但它是一种通用的非递归解决方案，可以修改以适用于类似的“交叉产品”情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T14:57:04.997

对不起大家。这是我的第一篇 Stack Overflow 帖子，当我的问题的答案发布但从未收到时，我期待收到一封电子邮件。我只是想我的问题被吞入了堆栈溢出的深渊。

与我一起工作的一组开发人员用大约 5 行就搞定了这个。目前我似乎找不到解决方案，但我认为它与 Enigmativity 发布的内容非常接近。我很肯定我们使用了排列。我会寻找我们使用的解决方案。感谢大家。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T04:52:26.983

这是 Javaish 伪代码递归函数：

```
void recWords(String number, int ind, String buf, Collection<String> result){
  if(ind==number.length()) {
    result.add(buf);
  } else {
    for(char letter : lettersForNumber(number.charAt(ind)) {
      recWords(number, ind+1, buf+letter, result);
    }
  }
} 
```

在上面编写为 C# 并将其调整为您的代码之后的进一步练习：

1.  `buf`从更改`String`为 共享`StringBuilder`。
2.  然后将其包装到类中并仅以递归方式传递 ind，将其他作为类成员变量。
3.  然后最后将递归变成循环（提示：3 个嵌套循环，其中一个内部循环将具有越来越多的迭代次数）。

关于我在想的非递归版本的注意事项：它的效率会低于递归，但让它变得有趣和值得作为练习编码的是，它将是[广度优先的](http://en.wikipedia.org/wiki/Breadth-first_search)，而这个递归版本是[深度优先的](http://en.wikipedia.org/wiki/Depth-first_search)。

# mysql - Ruby 在我设置 MySQL 时尝试使用 SQLite？

> ID：13575266
> 
> 赞同：2
> 
> 时间：2012-11-27T00:00:41.703
> 
> 标签：mysql, ruby-on-rails, sqlite

*是的，这个问题以前被问过。2年前。我对把它搞砸感到很难过，并认为开始一个新线程会是一个更好的主意。*

就像其他问题的 OP 一样，我已经正确生成了我的 Rails 应用程序，将我的 databases.yml 更改为使用 MySQL，但它仍在尝试使用 SQLite3。当我运行 rake db: 命令时，它可以正常工作。它在数据库中生成表，但在浏览器中，应用程序不断给出错误提示它正在尝试访问（/创建）sqlite 数据库。

有没有人找到这个问题的答案？我的数据库.yml：

```
development:
  adapter: mysql2
  host: localhost
  database: robinkanters_dev
  username: [[ correct username ]]
  password: [[ correct password ]]

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  host: localhost
  database: robinkanters_test
  username: [[ correct username ]]
  password: [[ correct password ]]

production:
  adapter: mysql2
  host: localhost
  database: robinkanters_prod
  username: [[ correct username ]]
  password: [[ correct password ]] 
```

罗宾坎特斯

*PS。这是我第一次在SO上发帖，请放轻松*

编辑：我想我并没有真正解释这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:40:14.883

我认为您应该重新启动服务器，如果您在生产模式下运行它，请尝试

```
touch tmp/restart.txt 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:52:46.193

如果 rails 版本是 3.x，请检查您的 gemfile。删除 sqlite3 gem 并添加 mysql gem。重启服务器

# com - 如何从 Excel 2007 VBA 模块中调用 System.Runtime.InteropServices.Marshal.ReleaseComObject

> ID：13575268
> 
> 赞同：1
> 
> 时间：2012-11-27T00:00:54.433
> 
> 标签：com, excel, com-interop, excel-interop, vba

我想从我的工作簿关闭事件中对我在 VBA 代码中实例化的一些第 3 方 COM 对象调用 System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)，如下所示：

```
 Public Sub disconnect(obj As Variant)
        Dim refs As Long
        refs = 0

        If Not obj Is Nothing Then
            Do
                refs = System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)
            Loop While (refs > 0)
        End If
    End Sub 
```

但是，我得到了`compile error: invalid qualifier`上面`System`代码突出显示的结果。搜索似乎没有返回任何从 VBA 宏调用 System.Runtime 方法的 VBA 代码 - 我只能找到 VB.Net 自动化 Excel。我不确定这是否可能。

我正在尝试解决此问题：[Excel 2007 Zombie Process not COM 自动化，但](https://stackoverflow.com/questions/13499250/excel-2007-zombie-process-not-com-automation-but-w-references-to-3rd-party-com)通过确保在 Excel 退出之前正确处理这些第 3 方 COM 对象来引用第 3 方 com 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:44:51.293

我没有使用过 VBA，但我认为它不是 .NET 语言，所以自然不能在 VBA 中使用 System.Runtime.InteropServices.Marshal 等 .NET Framework 类。

当您希望 Excel 退出时，您确定要删除对 COM 对象的所有引用吗？确保为您持有的 COM 对象的每个引用放置如下行：

```
obj = Nothing ' Where "obj" is a reference to the COM object 
```

如果这不能解决它，那么问题也可能是循环引用。COM 对象是否存储了对您的 VBA 对象的引用，而 VBA 对象又持有对 COM 对象的引用？如果是这样，将创建循环引用并且永远不会释放对象。我正在搜索其他内容，发现一个与您的帖子非常相似的帖子：

[强制垃圾回收](https://stackoverflow.com/questions/1775470/forcing-garbage-collection-in-vba-excel-2000)

如果这是问题所在，您将真的需要一种类似于 Marshal.ReleaseComObject 的手动释放 COM 对象的方法（并且多次释放直到引用计数为零），但我不知道如何在 VBA 中做到这一点。

其他几个类似的线程：

[如何从 Excel VBA 中释放进程内 COM 服务器对象](https://stackoverflow.com/questions/7333134/how-to-release-inprocess-com-server-object-from-excel-vba) [Excel 进程在互操作后保持打开状态；传统方法不起作用](https://stackoverflow.com/questions/8977571/excel-process-remains-open-after-interop-traditional-method-not-working?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:12:30.327

即使在仔细检查和删除循环引用之后，我也无法使用推荐的仅 VBA 方法解决僵尸问题。

额外的搜索找到了一种调用方法的方法，该`ReleaseCom`方法[使用包装的代码`System.Runtime.InteropServices.Marshal.FinalReleaseComObject`来创建可以从 VBA 调用的 COM 可见 dll](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/7f43cb01-3296-4926-9973-4ec7de245ad0/)

使用教程[“如何使用 vs 2008 创建 com 对象并从 vb6.0 客户端使用它”](http://www.c-sharpcorner.com/uploadfile/yougerthen/how-to-create-a-com-object-using-vs-2008-and-consume-it-from-vb-6-0-client-application-part-ii/)和新安装的 VS2010 Express 副本，我能够创建一个可从 VBA 调用的 COM 可见 dll。

这是稍微修改的包装器以及如何构建 dll：

```
 using System;
    using System.Collections.Generic;
    using System.Runtime.InteropServices;
    using System.EnterpriseServices;

    namespace ComDisposerLib
    {
        [ClassInterface(ClassInterfaceType.None)]
        [ComponentAccessControl(false)]
        public class ComDisposer : System.EnterpriseServices.ServicedComponent, IDisposable, ComDisposerLib.IComDispose
        {
            private List<Object> _comObjs;

            public ComDisposer()
            {
                _comObjs = new List<Object>();
            }

            ~ComDisposer()
            {
                Dispose(false);
            }

            public Object Add(Object o)
            {
                if (o != null && o.GetType().IsCOMObject)
                    _comObjs.Add(o);
                return o;
            }

            public void Clear()
            {
                Dispose(true);
            }

            protected override void Dispose(bool disposing)
            {
                if (disposing)
                {
                    for (int i = _comObjs.Count - 1; i >= 0; --i)
                        Marshal.FinalReleaseComObject(_comObjs[i]);
                    _comObjs.Clear();
                }
            }

            void IDisposable.Dispose()
            {
                Dispose(true);
                GC.SuppressFinalize(this);
            }
        }
    } 
```

和界面：

```
 using System;

    namespace ComDisposerLib
    {
        public interface IComDispose
        {
            Object Add(Object o);
            void Clear();
            void Dispose();
        }
    } 
```

要构建，创建一个新的类库项目，添加对`System.Runtime.InteropServices`和的引用`System.EnterpriseServices`，启用“签署程序集”（在项目/属性/签名下的菜单中）并选择或创建一个密钥文件。添加类和接口代码文件。在 AssemblyInfo.cs 文件（位于属性下）中添加

```
using System.Runtime.InteropServices;
using System.EnterpriseServices; 
```

和

```
[assembly: ComVisible(true)]
[assembly: ApplicationName("ComDisposer")]
[assembly: ApplicationActivation(ActivationOption.Library)] 
```

并建造。如果一切顺利，您可以按如下方式注册您的 dll：

```
regsvcs "C:\Documents and Settings\username\My Documents\Visual Studio 2010\Projects\ComDispose\ComDispose\obj\Release\ComDisposer.dll" 
```

在 VBA 中，添加对新 COM 库的引用后，按如下方式使用它：

```
Sub disposeGlobalComObjects()
' global scope objects used only to simplify example 

    Dim cd As ComDisposer
    Set cd = New ComDisposer

    If Not SomeGlobalComObject Is Nothing Then
        cd.Add SomeGlobalComObject
        Set SomeGlobalComObject = Nothing
    End If
    If Not AnotherGlobalComObject Is Nothing Then
        cd.Add AnotherGlobalComObject
        Set AnotherGlobalComObject = Nothing
    End If
    cd.Dispose
End Sub 
```

早期测试表明它正在工作，即 Excel 干净地关闭并且不再创建僵尸进程。

*有趣的是，我刚刚遇到了这种[使用 VBA 中的 dll 的方法，而无需先注册它](https://stackoverflow.com/a/13333819/149060)，如果您无法访问客户端计算机上的注册表，这可能会很有用。*

# xml - 通过 XSLT 构建 XML 的缺失部分

> ID：13575269
> 
> 赞同：5
> 
> 时间：2012-11-27T00:00:56.640
> 
> 标签：xml, xslt, xslt-1.0

**XSLT 版本：** 1.0

**数据（如何“渲染”）：**

![渲染数据](../Images/d017100909c4083998b26443f4e624f4.png)

**数据（如何存储为 XML）：**

```
<data>
  <item>
    <row>Row1</row>
    <col>Col2</col>
    <value>323</value>
  </item>
  <item>
    <row>Row2</row>
    <col>Col1</col>
    <value>12</value>
  </item>
  <item>
    <row>Row2</row>
    <col>Col2</col>
    <value>53</value>
  </item>
</data> 
```

请注意`Row1/Col1`XML 数据中完全没有空的“单元格”( )。

**我需要的：**

我需要填写“结构”的其余部分，以便空“单元格”在 XML 中具有相应的空元素：

```
<data>
  <!-- New, "empty" item gets created -->
  <item>
    <row>Row1</row>
    <col>Col1</col>
    <value />
  </item>
  <!-- Output the others as before -->
  <item>
    <row>Row1</row>
    <col>Col2</col>
    <value>323</value>
  </item>
  <item>
    <row>Row2</row>
    <col>Col1</col>
    <value>12</value>
  </item>
  <item>
    <row>Row2</row>
    <col>Col2</col>
    <value>53</value>
  </item>
</data> 
```

**渔获：**

这个样本数据比我的目标数据集小得多。真实数据可能有数百行和列，到处都是空的“单元格”。因此，我不能硬编码任何东西。

**到目前为止我的“解决方案”：**

我考虑过使用 Muenchian Grouping 来挑选所有唯一的列名和行名；然后，有了这些，我将遍历每个组合（`Row1/Col1`、`Row2/Col2`等）并检查`<item>`源文档中是否存在具有这些值的元素。如果我找到一个，我复制它（连同它的后代）；如果找不到，我会输出适当的“空”元素。

这对我来说听起来过于程序化（以至于我什至很难启动 XSLT 文档）。一定有更好的方法。

我很感激你能给的任何指示。:)

**更新：**

不幸的是，该解决方案不能指望在其值中具有序号的行和列；它们只是为了便于演示而以这种方式呈现。例如，代替`"Row2"`，该行的第一列的值也可能是`"Peanut Butter and Jelly"`。

`<item>`元素在源 XML 中按顺序排列：从左到右（按列）、从上到下（按行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T02:59:41.197

这是一个样式表，它将按照您建议的方式执行某些操作，但请注意，创建表的顺序取决于输入，并且可能会根据缺少的数据而改变。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="xs exsl"
  version="1.0">

  <xsl:strip-space elements="*"/>

  <xsl:output indent="yes"/>

  <xsl:variable name="doc" select="/"/>

  <xsl:key name="rows" match="row" use="."/>

  <xsl:variable name="rows">
    <xsl:for-each select="//row[generate-id() = generate-id(key('rows', .)[1])]">
      <xsl:copy-of select="."/>
    </xsl:for-each>
  </xsl:variable>

  <xsl:key name="cols" match="col" use="."/>

  <xsl:variable name="cols">
    <xsl:for-each select="//col[generate-id() = generate-id(key('cols', .)[1])]">
      <xsl:copy-of select="."/>
    </xsl:for-each>
  </xsl:variable>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:key name="by.rowcol" match="item" use="concat(row,col)"/>

  <xsl:template match="data">
    <xsl:copy>
      <xsl:for-each select="exsl:node-set($rows)/row">
        <xsl:variable name="row" select="."/>
        <xsl:for-each select="exsl:node-set($cols)/col">
          <xsl:variable name="col" select="."/>
          <xsl:for-each select="$doc">
            <xsl:choose>
              <xsl:when test="key('by.rowcol',concat($row,$col))">
                <xsl:copy-of select="key('by.rowcol',concat($row,$col))"/>
              </xsl:when>
              <xsl:otherwise>
                <item>
                  <xsl:copy-of select="$row"/>
                  <xsl:copy-of select="$col"/>
                  <value/>
                </item>
              </xsl:otherwise>
            </xsl:choose>
          </xsl:for-each>
        </xsl:for-each>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

或者，如果 row 和 col 值是数字，这里有一个样式表，它将通过连续迭代元素来完成您想要的操作：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="1.0">

  <xsl:strip-space elements="*"/>

  <xsl:output indent="yes"/>

  <!-- Figure out how wide the table is -->
  <xsl:variable name="max.col">
    <xsl:for-each select="//col">
      <xsl:sort select="substring-after(.,'Col')" data-type="number" order="descending"/>
      <xsl:if test="position() = 1">
        <xsl:value-of select="substring-after(.,'Col')"/>
      </xsl:if>
    </xsl:for-each>
  </xsl:variable>

  <!-- The identity template -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="data">
    <xsl:copy>
      <!-- Start off processing the first time in the first row -->
      <xsl:apply-templates select="item[row = 'Row1'][1]">
        <!-- We expect the coordinates to be (1,1) -->
        <xsl:with-param name="expected.row" select="1"/>
        <xsl:with-param name="expected.col" select="1"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="item">
    <xsl:param name="expected.row"/>
    <xsl:param name="expected.col"/>

    <!-- Figure out what coordinates this item is at -->
    <xsl:variable name="row" select="substring-after(row,'Row')"/>
    <xsl:variable name="col" select="substring-after(col,'Col')"/>

    <!-- Check to see if we're the last item in the row -->
    <xsl:variable name="is.last-in-row" select="not(following-sibling::item[row = current()/row])"/>

    <!-- Check to see if we skipped any rows -->
    <xsl:if test="$row > $expected.row">
      <!-- Call a template to recursively create the skipped rows of item -->
      <xsl:call-template name="fill.row">
        <xsl:with-param name="row" select="$expected.row"/>
        <xsl:with-param name="stop.row" select="$row - 1"/>
      </xsl:call-template>
    </xsl:if>

    <!-- We're further along than we expected that means some item were missed -->
    <xsl:if test="$col > $expected.col">
      <!-- Call a template to recursively create the skipped item -->
      <xsl:call-template name="fill.col">
        <xsl:with-param name="row" select="$row"/>
        <xsl:with-param name="col" select="$expected.col"/>
        <xsl:with-param name="stop.col" select="$col - 1"/>
      </xsl:call-template>
    </xsl:if>

    <!-- Copy the item we're on -->
    <xsl:copy-of select="."/>

    <!-- If this is the last item on the row and there are missing items create them -->
    <xsl:if test="$is.last-in-row and $max.col > $col">
      <xsl:call-template name="fill.col">
        <xsl:with-param name="row" select="$row"/>
        <xsl:with-param name="col" select="$col + 1"/>
        <xsl:with-param name="stop.col" select="$max.col"/>
      </xsl:call-template>
    </xsl:if>

    <!-- Move on to the next item -->
    <xsl:choose>
      <xsl:when test="$is.last-in-row">
        <!-- If we're the last in row, increase our expected row and reset the expected.col -->
        <xsl:apply-templates select="following-sibling::item[1]">
          <xsl:with-param name="expected.row" select="$expected.row + 1"/>
          <xsl:with-param name="expected.col" select="1"/>
        </xsl:apply-templates>
      </xsl:when>
      <xsl:otherwise>
        <!-- Increment our expected col and keep expected row the same -->
        <xsl:apply-templates select="following-sibling::item[1]">
          <xsl:with-param name="expected.row" select="$expected.row"/>
          <xsl:with-param name="expected.col" select="$expected.col + 1"/>
        </xsl:apply-templates>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>

  <!-- Recursively create item elements with the given $row for all the cols from $col to $stop.col inclusive -->
  <xsl:template name="fill.col">
    <xsl:param name="row"/>
    <xsl:param name="col"/>
    <xsl:param name="stop.col"/>
    <xsl:if test="$stop.col >= $col">
      <item>
        <row><xsl:value-of select="concat('Row',$row)"/></row>
        <col><xsl:value-of select="concat('Col',$col)"/></col>
        <value/>
      </item>
      <xsl:call-template name="fill.col">
        <xsl:with-param name="row" select="$row"/>
        <xsl:with-param name="col" select="$col + 1"/>
        <xsl:with-param name="stop.col" select="$stop.col"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <!-- Recursively create $max.col length rows of item elements from $row to $stop.row inclusive  -->
  <xsl:template name="fill.row">
    <xsl:param name="row"/>
    <xsl:param name="stop.row"/>
    <xsl:if test="$stop.row >= $row">
      <xsl:call-template name="fill.col">
        <xsl:with-param name="row" select="$row"/>
        <xsl:with-param name="col" select="1"/>
        <xsl:with-param name="stop.col" select="$max.col"/>
      </xsl:call-template>
      <xsl:call-template name="fill.row">
        <xsl:with-param name="row" select="$row + 1"/>
        <xsl:with-param name="stop.row" select="$stop.row"/>
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:55:44.363

我的方法是...

1.  计算最大列宽并将其粘贴到变量中。
2.  对行做同样的事情。
3.  使用 Piez 方法迭代行和列，测试空值并适当输出。

## XSLT 1.0 解决方案（Piez 风格）

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:so="http://stackoverflow.com/questions/13575269"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="xsl so exsl">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />    

<xsl:variable name="rank-and-file">
  <xsl:apply-templates select="/*" mode="counting" />
</xsl:variable>

<xsl:variable name="col-count">
  <xsl:for-each select="exsl:node-set($rank-and-file)/so:col">
    <xsl:sort select="." data-type="number" order="descending" />
    <xsl:if test="position() = 1">
      <xsl:value-of select="."/>
    </xsl:if>
  </xsl:for-each>  
</xsl:variable>

<xsl:variable name="row-count">
  <xsl:for-each select="exsl:node-set($rank-and-file)/so:row">
    <xsl:sort select="." data-type="number" order="descending" />
    <xsl:if test="position() = 1">
      <xsl:value-of select="."/>
    </xsl:if>
  </xsl:for-each>  
</xsl:variable>

<xsl:template match="*" mode="counting">
  <xsl:apply-templates mode="counting" />
</xsl:template>  

<xsl:template match="row" mode="counting">
  <so:row>
    <xsl:value-of select="substring(.,4)" />
  </so:row>  
</xsl:template>  

<xsl:template match="col" mode="counting">
  <so:col>
    <xsl:value-of select="substring(.,4)" />
  </so:col>  
</xsl:template>  

<xsl:template match="/*">
  <xsl:variable name="data" select="." />
  <xsl:copy> 
    <xsl:for-each select="(((/)//*)/node())[position() &lt;= $row-count]">
      <xsl:variable name="row" select="position()" />
      <xsl:for-each select="(((/)//*)/node())[position() &lt;= $col-count]">
        <xsl:variable name="col" select="position()" />
        <xsl:variable name="cell" select="$data/item[row=concat('Row',$row)]
                                                    [col=concat('Col',$col)]" />
        <xsl:copy-of select="$cell" />
        <xsl:if test="not( $cell)">
          <item>
            <row><xsl:value-of select="concat('Row',$row)" /></row>
            <col><xsl:value-of select="concat('Col',$row)" /></col>
            <value/>
          </item>
        </xsl:if>
      </xsl:for-each>  
    </xsl:for-each>  
  </xsl:copy>  
</xsl:template>

</xsl:stylesheet> 
```

## 买者自负

1.  当然，关于 Piez 方法的常见注意事项也适用。如果 Piez 不合适，请告诉我们。
2.  副作用是行和列已排序。这可能是也可能不是一件好事，这取决于你想要什么。

## 更新

如果您有一个超稀疏输入文档并且 Piez 限制成为问题，这里有一个更安全（但更慢）的替代方案。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:so="http://stackoverflow.com/questions/13575269"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="xsl so exsl">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />    

<xsl:variable name="rank-and-file">
  <xsl:apply-templates select="/*" mode="counting" />
</xsl:variable>

<xsl:variable name="col-count">
  <xsl:for-each select="exsl:node-set($rank-and-file)/so:col">
    <xsl:sort select="." data-type="number" order="descending" />
    <xsl:if test="position() = 1">
      <xsl:value-of select="."/>
    </xsl:if>
  </xsl:for-each>  
</xsl:variable>

<xsl:variable name="row-count">
  <xsl:for-each select="exsl:node-set($rank-and-file)/so:row">
    <xsl:sort select="." data-type="number" order="descending" />
    <xsl:if test="position() = 1">
      <xsl:value-of select="."/>
    </xsl:if>
  </xsl:for-each>  
</xsl:variable>

<xsl:template match="*" mode="counting">
  <xsl:apply-templates mode="counting" />
</xsl:template>  

<xsl:template match="row" mode="counting">
  <so:row>
    <xsl:value-of select="substring(.,4)" />
  </so:row>  
</xsl:template>  

<xsl:template match="col" mode="counting">
  <so:col>
    <xsl:value-of select="substring(.,4)" />
  </so:col>  
</xsl:template>  

<xsl:template name="make-counters">
  <xsl:param name="count" />
  <so:_/><so:_/><so:_/><so:_/><so:_/><so:_/><so:_/><so:_/>
  <xsl:if test="$count &gt; 8">
    <xsl:call-template name="make-counters">
      <xsl:with-param name="count" select="$count - 4" />
    </xsl:call-template>  
  </xsl:if>  
</xsl:template>

<xsl:variable name="counters-doc">
  <xsl:call-template name="make-counters">
    <xsl:with-param name="count" select="$col-count + $row-count" />
  </xsl:call-template>  
</xsl:variable>

<xsl:variable name="counters" select="exsl:node-set($counters-doc)/*" />

<xsl:template match="/*">
  <xsl:variable name="data" select="." />
  <xsl:copy> 
    <xsl:for-each select="$counters[position() &lt;= $row-count]">
      <xsl:variable name="row" select="position()" />
      <xsl:for-each select="$counters[position() &lt;= $col-count]">
        <xsl:variable name="col" select="position()" />
        <xsl:variable name="cell" select="$data/item[row=concat('Row',$row)]
                                                    [col=concat('Col',$col)]" />
        <xsl:copy-of select="$cell" />
        <xsl:if test="not( $cell)">
          <item>
            <row><xsl:value-of select="concat('Row',$row)" /></row>
            <col><xsl:value-of select="concat('Col',$row)" /></col>
            <value/>
          </item>
        </xsl:if>
      </xsl:for-each>  
    </xsl:for-each>  
  </xsl:copy>  
</xsl:template>

</xsl:stylesheet> 
```

# actionscript-3 - NetStream.seek 导致我的视 频停止

> ID：13575271
> 
> 赞同：0
> 
> 时间：2012-11-27T00:01:03.560
> 
> 标签：actionscript-3, netstream, akamai

我的视频播放得很好。如果我这样做`netStream.seek(0)`，那效果很好。如果我这么多，`netStream.seek(1)`那么我的流当场结束并停止回到零。

[但是，如果我在http://support.akamai.com/flash/](http://support.akamai.com/flash/)中播放我的文件，那么它会很好地擦洗。该特定播放器使用的是 OVP 框架，而我使用的是基于 OVP 框架的 Akamai HD Core 框架，所以我不明白为什么会发生这种情况。

任何人都可以为我阐明这一点吗？谢谢。

PS - 用于测试的 url 是 rtmp://cp67126.edgefcs.net/ondemand/mediapm/strobe/content/test/SpaceAloneHD_sounas_640_500_short

从上到下的代码（一站式fla）

```
import com.akamai.display.AkamaiMediaSprite;
import org.openvideoplayer.events.OvpEvent;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.events.NetStatusEvent;
import flash.net.NetStream;

var s:AkamaiMediaSprite = new AkamaiMediaSprite(this.stage.stageWidth, this.stage.stageHeight);

this.addChild(s);

//
s.load("rtmp://cp67126.edgefcs.net/ondemand/mediapm/strobe/content/test/SpaceAloneHD_sounas_640_500_short");
s.addEventListener(OvpEvent.LOADED, playerLoadedHandler);

function playerLoadedHandler(event:OvpEvent):void {
    var ns:NetStream = s.netStream;
    ns.addEventListener(OvpEvent.NET_STATUS, netStatusHandler);
}

function mouseClickHandler(event:MouseEvent):void {
    trace(s.netStream.time);
    //s.netStream.seek(0);
    s.netStream.seek(1);
}

function netStatusHandler(event:NetStatusEvent):void {
    trace("!! net status: ", event.info.code);
}

this.addEventListener(MouseEvent.CLICK, mouseClickHandler); 
```

# ruby-on-rails - 为什么 `around_save` 或 `after_touch` 回调不会在创建新记录时执行？

> ID：13575274
> 
> 赞同：1
> 
> 时间：2012-11-27T00:01:06.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我试图在创建/更新记录时执行一种方法。

我尝试了两者`after_touch`，`around_save`但都没有为新的记录创造工作。

实际上`around_save`，当记录已被编辑时，它不起作用。

在保存记录时（包括创建时或编辑/更新时），我可以使用什么回调来更新记录？

**编辑 1**

这是一些代码：

```
after_save :set_firm_size, :if => Proc.new { |c| c.firm.present? }
after_save :set_score
after_save :check_or_set_max
after_save :calculate_weighted_score, :if => Proc.new { |c| c.score.present? } 
```

未执行的回调是最后一个`calculate_weighted_score`。

```
def calculate_weighted_score
    # Sum products of weight & scores of each attribute
        weight = Weight.first
        score = self.score
        self.weighted_score = (weight.firm_size * score.firm_size) + (weight.priority_level * score.priority_level) + 
                (weight.inflection_point * score.inflection_point) + (weight.personal_priority * score.personal_priority) +
                (weight.sales_priority * score.sales_priority) + (weight.sales_team_priority * score.sales_team_priority) +
                (weight.days_since_contact * score.days_since_contact) + (weight.does_client_vote * score.does_client_vote) +
                (weight.did_client_vote_for_us * score.did_client_vote_for_us) + (weight.days_until_next_vote * score.days_until_next_vote) +
                (weight.does_client_vote_ii * score.does_client_vote_ii) + (weight.did_client_vote_ii_for_us * score.did_client_vote_ii_for_us) + 
                (weight.days_until_vote_ii * score.days_until_vote_ii)
        # self.update_attributes(:weighted_score => weighted_score)
end 
```

这是一个`edit`动作的日志的样子：

```
Started PUT "/clients/20" for 127.0.0.1 at 2012-11-26 23:26:34 -0500
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J172LuZQc5SPv8=", "client"=>{"name"=>"Jackie Boys", "email"=>"jack@welch.com", "phone"=>"1234567890", "firm_id"=>"2", "topic_ids"=>["1", "2", "10"], "personal_priority"=>"1", "last_contact"=>"2012-09-01", "vote"=>"1", "vote_for_user"=>"1", "next_vote"=>"2012-12-01", "vote_ii"=>"0", "vote_ii_for_us"=>"0"}, "commit"=>"Update Client", "id"=>"20"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Client Load (0.1ms)  SELECT "clients".* FROM "clients" WHERE "clients"."user_id" = 1 AND "clients"."id" = ? LIMIT 1  [["id", "20"]]
  Topic Load (0.1ms)  SELECT "topics".* FROM "topics" 
   (0.0ms)  begin transaction
  Topic Load (0.2ms)  SELECT "topics".* FROM "topics" WHERE "topics"."id" IN (1, 2, 10)
  Topic Load (0.1ms)  SELECT "topics".* FROM "topics" INNER JOIN "clients_topics" ON "topics"."id" = "clients_topics"."topic_id" WHERE "clients_topics"."client_id" = 20
   (0.8ms)  UPDATE "clients" SET "name" = 'Jackie Boys', "updated_at" = '2012-11-27 04:26:34.772771' WHERE "clients"."id" = 20
  Firm Load (0.1ms)  SELECT "firms".* FROM "firms" WHERE "firms"."id" = 2 LIMIT 1
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Score Load (0.2ms)  SELECT "scores".* FROM "scores" WHERE "scores"."user_id" = 1 LIMIT 1
  SalesTeam Load (0.1ms)  SELECT "sales_teams".* FROM "sales_teams" WHERE "sales_teams"."id" = 3 LIMIT 1
  PriorityLevel Load (0.1ms)  SELECT "priority_levels".* FROM "priority_levels" WHERE "priority_levels"."id" = 1 LIMIT 1
   (0.3ms)  UPDATE "scores" SET "client_id" = 20, "firm_size" = 102.0, "inflection_point" = 0.0, "sales_priority" = 1.0, "days_since_contact" = 86.0, "did_client_vote_for_us" = 1.0, "days_until_next_vote" = 5.0, "does_client_vote_ii" = 0.0, "did_client_vote_ii_for_us" = 0.0, "updated_at" = '2012-11-27 04:26:35.043986' WHERE "scores"."id" = 26
  Score Load (0.2ms)  SELECT "scores".* FROM "scores" WHERE "scores"."client_id" = 20 LIMIT 1
  Max Load (0.2ms)  SELECT "maxes".* FROM "maxes" WHERE "maxes"."user_id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "scores".* FROM "scores" WHERE "scores"."client_id" = 20 LIMIT 1
  Weight Load (0.2ms)  SELECT "weights".* FROM "weights" LIMIT 1
   (52.4ms)  commit transaction
Redirected to http://localhost:3000/clients
Completed 302 Found in 505ms (ActiveRecord: 60.7ms) 
```

请注意，您应该看到的是一个更新`client.weighted_score`但未出现在日志中的语句。

当我添加时，`self.update_attributes...`我得到了一个`stack is too deep error`. 当我添加`self.save`而不是`self.update_attributes`.

# php - 从sql中获取序列化数据

> ID：13575275
> 
> 赞同：2
> 
> 时间：2012-11-27T00:01:09.800
> 
> 标签：php, sql, serialization, foreach

我想从 sql 中获取未序列化的数据，但它只显示第一行。怎么了？

```
$cars=unserialize($rows["cars"]);
foreach($cars as $car)
{
  echo "<li>".$car."</li>";
} 
```

SQL 表中的字段如下所示：

```
a:2:{s:6:"car";s:9:"mercedes";s:6:"ps";s:46:"120";}
a:2:{s:6:"car";s:7:"audi";s:6:"ps";s:74:"145";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:46:19.190

起初您的序列化字符串无效： a:2:{s:3:"car";s:8:"mercedes";s:2:"ps";s:3:"120";} a:2 :{s:3:"car";s:4:"audi";s:2:"ps";s:3:"145";} 是正确的。

第二：

您不能连接这些值并像在这个 NOT WORKING 示例中那样进行反序列化：

```
unserialize('a:2:{s:3:"car";s:8:"mercedes";s:2:"ps";s:3:"120";}a:2:{s:3:"car";s:4:"audi";s:2:"ps";s:3:"145";}'); 
```

这将只返回第一个条目。您现在必须选择： 1\. 事先通过换行符拆分该字符串，或者将其作为一个序列化字符串正确写入数据库。因为它会：

```
var_dump(serialize(array(array('car'=>'mercedes', 'ps' => '120'), array('car'=>'audi', 'ps' => '145'))));
string(110) "a:2:{i:0;a:2:{s:3:"car";s:8:"mercedes";s:2:"ps";s:3:"120";}i:1;a:2:{s:3:"car";s:4:"audi";s:2:"ps";s:3:"145";}}" 
```

更新：抱歉没有看到“8 更多评论链接”

# c - C：int* 数组在传递给函数时给我一个运行时堆栈溢出

> ID：13575276
> 
> 赞同：1
> 
> 时间：2012-11-27T00:01:12.860
> 
> 标签：c, function, multidimensional-array, parameter-passing, stack-overflow

```
/* 
INCLUDES & DEFINES
*/
#define _CRT_SECURE_NO_WARNINGS 1

#include "stdlib.h"
#include "stdio.h"
#include "string.h"

#define N 10

#define LINE_LENGTH (65537*6) /* assuming we deal with integers. 65536 is the largest integer. each number in line offers a ' ' or '\0' and each number consists of 5 chars max.*/
#define STR_MAIN_ERROR_MSG "error occured while attempting to read data from file. aborted!\n"
#define STR_MENU "(a) print double-dynamic array.\n(b) add new number.\n(c) add new column.\n(d) remove last number.\n(e) remove last column.\n(q) quit program.\n\nEnter your choice: "
#define STR_MENU_INPUT_ERROR "Wrong Choice, try again.\n"
#define STR_MENU_QUIT "End of program, Thank you & good bye...\n"
#define STR_MENU_SHORT "Menu: ...\nEnter your choice: "
/*
FUNCTION DECLARATIONS
*/
int allocate_subarray(int**, const int);
int parse_line_data(char*,int**,const int);
int read_file_successful(int**);
void start_menu(int**);
void terminate(int**);

void funcA(const int**);
void funcB(int**);
void funcC(int**);
void funcD(int**);
void funcE(int**);
/*
MAIN FUNCTION BODY
*/
int main(){
    int *Array[N]={NULL};
    if ( read_file_successful(Array)) start_menu(Array);
    else printf("%s",STR_MAIN_ERROR_MSG);
    return 0;
}
/*
OTHER FUNCTION BODIES
*/
int allocate_subarray(int** p, const int size){
    *p=(int*)malloc(sizeof(int)*size);
    return (p!=NULL);
}
int parse_line_data(char *S, int **A, const int i){
    int j;
    int size=atoi(strtok(S," "));
    if(!allocate_subarray(&A[i], size)) return 0;
    for(j=0; j<size; j++) A[i][j]=atoi(strtok(NULL," "));
    return 1;
}
int read_file_successful(int** A){   /* <----- STACK OVERFLOW HAPPENS HERE. */
    FILE *f=fopen("input3.txt", "r");
    if(f){
        char line[LINE_LENGTH*N];
        int i;
        for(i=0; fgets(line,sizeof(line),f) && i<N; i++) 
            if (!(parse_line_data(line, A, i))) return 0;
        fclose(f);
        return 1;
    }
    return 0;
}
void start_menu(int **A){
    char choice;
    printf("%s",STR_MENU);
    do{
        scanf("%c",&choice);
        while(getchar()!='\n');
        switch(choice){
            case 'q': terminate(A); printf("%s",STR_MENU_QUIT); return;
            case 'a': funcA(A); break;
            case 'b': funcB(A); break;
            case 'c': funcC(A); break;
            case 'd': funcD(A); break;
            case 'e': funcE(A); break;
            default: printf("%s",STR_MENU_INPUT_ERROR);
        }
    } while(printf("%s",STR_MENU_SHORT));
}
void terminate(int **A){
    int i;
    for(i=0; i<N && A[i]; i++) free(A[i]);
}
/**/
void funcA(const int **A){}
void funcB(int **A){}
void funcC(int **A){}
void funcD(int **A){}
void funcE(int **A){} 
```

帮朋友做这件事，这是一个从文本文件中读取行并将它们转换为存储在 malloc 分配的数组中的整数的基本程序（文本中也给出了大小）。问题是，很久没有用 C 调试这个美了，它在我为你评论的地方给了我一个堆栈溢出错误消息。尝试了函数参数的不同变体： int* A[] ， int* A[N].. 仍然让我绊倒@run-time。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:29:40.090

您正在分配 N * LINE_LENGTH 堆栈空间`read_file_successful()`。算一算。那是 10 * 65537 * 6，或 3932220 字节。从而炸毁你的筹码。

```
char line[LINE_LENGTH*N]; 
```

其中 LINE_LENGTH 为 65537*6，N 为 10。

# java - Jersey：具有 1 个元素的 Json 数组被序列化为对象

> ID：13575280
> 
> 赞同：27
> 
> 时间：2012-11-27T00:01:50.643
> 
> 标签：java, ajax, json, jersey

我正在使用 Jersey/Java 创建一个 REST 服务器，但我发现了一个奇怪的行为。

我在服务器上有一个方法，它返回一个对象数组作为 Json

```
@GET
@Path("/files")
@Produces(MediaType.APPLICATION_JSON)
public Object getFiles() throws Exception{
    DatabaseManager db = new DatabaseManager();
    FileInfo[] result = db.getFiles();
    return result;
} 
```

代码正确执行并将数据返回给客户端（jQuery ajax 调用）。问题是如果“结果”数组有一个或多个元素，则返回数据的格式会发生变化。

一个元素的响应：

```
{"fileInfo":{"fileName":"weather.arff","id":"10"}} 
```

包含两个元素的响应：

```
{"fileInfo":[{"fileName":"weather.arff","id":"10"},{"fileName":"supermarket.arff","id":"11"}]} 
```

如您所见，在第一种情况下，返回对象的“fileInfo”属性的值是一个对象，而在第二种情况下，该值是一个数组。我究竟做错了什么？第一种情况不应该返回如下内容：

```
{"fileInfo":[{"fileName":"weather.arff","id":"10"}]} 
```

即一个内部有一个对象的数组？

我知道我可以在客户端检测到这一点，但这似乎是一个非常丑陋的黑客攻击。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T23:05:58.040

我最终使用了 Jackson，也在泽西官方文档 (http://jersey.java.net/nonav/documentation/latest/user-guide.html#json.pojo.approach.section) 中进行了描述。

我之前尝试过，但它不起作用，因为我的项目的构建路径中没有杰克逊 jar（根据文档，我认为它是内置到 jersey 的核心库中的）。

我刚刚添加了 jackson-all.jar 文件 (http://wiki.fasterxml.com/JacksonDownload) 并在配置中启用了 POJO 支持

```
 <init-param>
          <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
          <param-value>true</param-value>
    </init-param> 
```

瞧！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T04:42:37.473

如果您使用 JAXB 构建 JSON 结果，您可以配置 Jersey JSON 处理器以获得更重要的 JSON 格式。

[jersey 官方文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e928)有详细的配置：

要实现更重要的 JSON 格式更改，您需要配置 Jersey JSON 处理器本身。可以在 JSONConfiguration 实例上设置各种配置选项。然后可以进一步使用该实例来创建 JSONConfigurated JSONJAXBContext，作为该区域的主要配置点。要将您的专用 JSONJAXBContext 传递给 Jersey，您最终需要实现一个 JAXBContext ContextResolver：

```
 @Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {
    private final JAXBContext context;
    private final Set<Class> types;
    private Class[] ctypes = { FileInfo.class}; //your pojo class
    public JAXBContextResolver() throws Exception {
        this.types = new HashSet(Arrays.asList(ctypes));
        this.context = new JSONJAXBContext(JSONConfiguration.natural().build(),
                ctypes); //json configuration
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
        return (types.contains(objectType)) ? context : null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-11T15:25:20.920

另请查看以下答案，它为我解决了这个问题：

[如何自定义将 JAXB 对象列表序列化为 JSON？](https://stackoverflow.com/questions/2199453/how-can-i-customize-serialization-of-a-list-of-jaxb-objects-to-json/3143214#3143214)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-17T14:10:40.497

我正在使用 cxf，这是我的 applicationContext.xml 在 JSON 中强制数组：

```
<jaxrs:server id="myService" serviceName="MyService"
address="/mysvc">
<jaxrs:serviceBeans>
    <ref bean="myServiceImpl"/>
</jaxrs:serviceBeans>
<jaxrs:providers>
    <bean class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
   <property name="dropRootElement" value="true" />
   <property name="supportUnwrapped" value="true" />
   <property name="namespaceMap">
      <map>
        <entry key="http://example.com/myservice" value=""/>
      </map>
   </property>
   <property name="arrayKeys">
      <list>
    <value>fileInfo</value>
      </list>
   </property>                          
    </bean>
</jaxrs:providers>
</jaxrs:server> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:01:01.047

您也可以尝试 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它与 jersey 很好地集成，只需将 jar 放入您的类路径中，一切都会正常工作。它不需要你编写额外的代码，它应该像你现在拥有的那样工作，但没有任何奇怪的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T00:24:22.503

您可以使用 Jettison（与 Jersey 一起提供）并准备您希望自己使用的结构`JSONObject`并`JSONArray`作为返回值。它们在包`org.codehaus.jettison.json`中，包的`jettison-1.3.2.jar`传递依赖于`jerysey-json`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-11T06:15:47.503

我挣扎了很多，找到了这个简单的解决方案

在你的 pom.xml 中：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-jaxrs</artifactId>
    <version>1.9.13</version>
</dependency>
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-xc</artifactId>
    <version>1.9.13</version>
</dependency> 
```

在您的 web.xml 中：

```
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.other-packages;org.codehaus.jackson.jaxrs</param-value>
</init-param> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-08T11:19:32.853

将 Array 转换为 ArrayList 就可以满足这里的要求。我遇到过类似的矛盾问题，如果是单个元素，我必须返回 Json 数组对象而不是列表。

我在下面的注释的帮助下完成了我的工作-

@JsonFormat（与 = JsonFormat.Feature.WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED）。下面是 JSON Pojo 类的示例：

```
import java.util.List;

import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;

@JsonIgnoreProperties(ignoreUnknown = true)
public class TAResponseMapper {

    @JsonProperty("Response")
    @JsonFormat(with = JsonFormat.Feature.WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED) 
    private List<TAResponse> responses;

    public List<TAResponse> getResponses() {
        return responses;
    }

    public void setResponses(List<TAResponse> responses) {
        this.responses = responses;
    }

} 
```

# java - “。”附近的 JDBC 语法不正确 从执行查询

> ID：13575283
> 
> 赞同：1
> 
> 时间：2012-11-27T00:02:11.050
> 
> 标签：java, jdbc, executequery

好吧，我没有头发了。将常量字符串传递给 executeQuery 时没有问题。传递 String 对象时，它失败并且异常是`' incorrect syntax near "."'`.

一切基本上都完全相同，但由于某种原因，一种情况有效，另一种情况无效。提供一点背景知识，我正在连接到一个 SQLServer2008 数据库。是什么赋予了？

这是让我失去头发的代码：

```
public List<IdValuePair> Get_Job_Types() {
   ArrayList<IdValuePair> jt = Get_Id_Value_Pairs(
         "SELECT * FROM USER_JOB_TYPE", "JOB_TYPE_ID", "JOB_TYPE");
   return (jt);
}

private List<IdValuePair> Get_Id_Value_Pairs(String query, String idRowName,
      String valueRowName) {
   try {
      List<IdValuePair> pairs = new ArrayList<IdValuePair>();

      Class.forName("net.sourceforge.jtds.jdbc.Driver");
      m_Connection = DriverManager.getConnection(db_connect_string,
            db_userid, db_password);

      Statement stmt = m_Connection.createStatement();

      // THIS WORKS ?!
      ResultSet rs = stmt.executeQuery("SELECT * FROM USER_JOB_TYPE");

      // THIS DOESN'T !!!!???
      rs = stmt.executeQuery(query);

      // ...

      rs.close();
      stmt.close();

      return (pairs);
   }

   catch (Exception e) {
      e.printStackTrace();
      return (null);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:19:32.900

> 当传递一个字符串对象时，它会失败，并且异常是“。”附近的语法不正确。'。
> 
> 是什么赋予了？

根据您提供的证据，问题出在您的查询字符串中。基本上，SQLServer 会告诉您 SQL 查询中存在语法错误。

但这有效：

```
 ResultSet rs = stmt.executeQuery("SELECT * FROM USER_JOB_TYPE"); 
```

...因为该 SQL 查询的语法很好。

打印出`query`您正在使用的实际值：

```
 rs = stmt.executeQuery(query); 
```

如果解决方案不明显，请将 的值添加`query`到您的问题中，以便我们查看。

* * *

在重新阅读问题时，*看起来*该`query`字符串*应该*与工作的字符串相同。但是异常/消息的证据表明它不是，我更倾向于相信这个证据而不是源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:08:40.970

我想到了。我责怪微软。出于某种愚蠢的原因，当我从 Visual Studio 复制 sql 语句并将其粘贴到 InteliJ 中时，MS 添加了一个隐藏的 BOM 字符。因此，似乎是微软向我们发送了 BOM。谢谢微软，你这个平庸的白痴蜂巢。

# android - Android 如何读取 android 联系人和 SIM 联系人？

> ID：13575286
> 
> 赞同：0
> 
> 时间：2012-11-27T00:02:25.727
> 
> 标签：android, android-contacts, contactscontract, sim-card

我目前正在获得只读的 android 联系人，下面是我正在使用的代码：

```
String[] projecao = new String[] { Contacts._ID,
    Contacts.LOOKUP_KEY, Contacts.DISPLAY_NAME };
String selecao = Contacts.HAS_PHONE_NUMBER + " = 1";
Cursor contatos = contexto.getContentResolver().query(
    ContactsContract.Contacts.CONTENT_URI, projecao, selecao, null, null); 
```

并获取电话号码：

```
Cursor phones = contexto.getContentResolver().query(
                Phone.CONTENT_URI,
                new String[] { Phone.NUMBER },
                Phone.CONTACT_ID + " = ?",
                new String[] { contatos.getString(contatos
                        .getColumnIndex(Contacts._ID)) }, null); 
```

我想维护一个包含所有数字联系人的数据库。

我还要做什么才能获得 SIM 卡联系人？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:37:30.323

您正在阅读的联系人来自 Contacts Provider，它是 Android 平台的一部分。它们不是只读的，尽管您应该在尝试更改它们之前阅读文档。

SIM 卡联系人完全不同。它们单独存储在 SIM 卡本身上，您可能必须使用手机制造商或服务提供商的应用程序才能找到它们。它们与 Google 通讯录无关。我建议不要对他们做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T07:47:00.977

首先，为每个联系人运行电话查询效率非常低，并且可能会导致您的代码在具有大量联系人的设备上运行几分钟（！！）。

下面的代码将通过一个快速查询获得您需要的所有信息：

```
class Contact {
    Long id;
    String name;
    String lookupKey;
    List<String> phones = new ArrayList<>();

    public Contact(Long id, String name, String lookupKey, String number) {
        this.id = id;
        this.name = name;
        this.lookupKey = lookupKey;
        this.phones.add(number);
    }
}

Map<Long, Contact> contacts = new HashMap<Long, PhoneContact>();

String[] projection = {Data.CONTACT_ID, Data.DISPLAY_NAME, Data.LOOKUP_KEY, Phone.NUMBER};
String selection = Data.MIMETYPE + " IN ('" + Phone.CONTENT_ITEM_TYPE + "')"; 

Cursor cur = cr.query(Data.CONTENT_URI, projection, selection, null, null);

while (cur.moveToNext()) {
    long id = cur.getLong(0);
    String name = cur.getString(1);
    String lookup = cur.getString(2);
    String number = cur.getString(3)

    if (!contacts.containsKey(id)) {
        Contact newContact = new Contact(id, name, lookup, number);
        contacts.put(id, phoneContact);
    } else {
        Contact existingContact = contacts.get(id);
        existingContact.phones.add(number);
    }
}
cur.close(); 
```

关于 SIM 联系人，它们已经存储在同一个数据库中，并且可以通过 ContactsContract 访问，这意味着存储在 SIM 中的所有电话也应该使用上述代码接收。

如果您只想查询 SIM 卡联系人，请在此处查看我的答案：[https ://stackoverflow.com/a/49624417/819355](https://stackoverflow.com/a/49624417/819355)

# iphone - 无法让 jQuery mobile 与 PhoneGap 一起使用

> ID：13575290
> 
> 赞同：0
> 
> 时间：2012-11-27T00:02:32.390
> 
> 标签：iphone, xcode, cordova, jquery-mobile

我知道关于堆栈溢出的这个主题有类似的问题；但是，我还没有弄清楚我的问题。

我对应用程序开发非常陌生，现在正在尝试使用 phonegap 和 jquery mobile 为 iphone 创建一个应用程序。不幸的是，我显然无法正确加载引用的文件。

编辑：

这是对我有用的新结构：

```
<!DOCTYPE html>
<html>
<head>
    <title>Hello World</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <script src="jquery_mobile/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <link rel="stylesheet" type="text/css" href="jquery_mobile/jquery.mobile-1.2.0.min.css" />
    <script src="jquery_mobile/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
    <script src="http://debug.phonegap.com/target/target-script-min.js#anonymous"></script>
    <script type="text/javascript">
        var deviceReadyDeferred = $.Deferred();
        var jqmReadyDeferred = $.Deferred();

        document.addEventListener("deviceReady", deviceReady, false);

        function deviceReady() {
            deviceReadyDeferred.resolve();
        }

        $(document).one("mobileinit", function () {
                        jqmReadyDeferred.resolve();
                        });

        $.when(deviceReadyDeferred, jqmReadyDeferred).then(doWhenBothFrameworksLoaded);

        function doWhenBothFrameworksLoaded() {
            // TBD
        }
</script>
</head>
<body>
    <div class="app">
        <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p>
        </div>
    </div>

    <!-- Homepage -->
    <div data-role="page" id="home">
        <div data-role="header">
            <h1>Some Title</h1>
        </div><!-- /header -->
        <div data-role="content">
            <ul data-role="listview" data-inset="true" data-theme="e">
                <li><a href="#about-us">About US</a></li>
                <li><a href="#">Audi</a></li>
            </ul>
        </div><!-- /content -->
        <div data-role="footer">
            <h4>Pgae Footer</h4>
        </div>
    </div><!-- /page -->

    <!-- About Us -->
    <div data-role="page" id="about-us" data-title="About Us">
        <div data-role="header">
            <h1>Some Other Title</h1>
        </div><!-- /header -->
        <div data-role="content">
            <p>About Us</p>
        </div><!-- /content -->
        <div data-role="footer">
            <h4>Pgae Footer</h4>
        </div>
    </div><!-- /page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:21:13.343

它在浏览器中加载时是否有效？deviceready 在这种情况下当然不会触发，但它应该让您更好地查看正在运行的脚本，以便您可以修复其他错误。

一些更明显的事情需要研究：

*   应用程序在哪里定义？
*   为什么页面正文中有phonegap脚本？
*   您的脚本路径没有一致的结构。网址都正确吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:20:34.100

Phonegap 要求您将代码放入 assets/www 项目目录（至少在 android 平台上），无论代码必须在 www 目录中的什么位置。让我们继续这个假设。

如果你有这个目录结构：

*   索引.html
*   js/index.js
*   css/index.css

那么你不能有这个href：

```
<link rel="stylesheet" type="text/css" href="/css/index.css" /> 
```

而不是它使用这个：

```
<link rel="stylesheet" type="text/css" href="css/index.css" /> 
```

因此，从所有可用的 href-s 中删除每个第一个斜杠（“/”）。也来自像这样的 scr 属性：

```
<script type="text/javascript" src="/js/index.js"></script> 
```

也将其更改为（以及以 / 开头的所有其他 src ）：

```
<script type="text/javascript" src="js/index.js"></script> 
```

# actionscript-3 - 1119：通过静态类型 Class 的引用访问可能未定义的属性 SEEKED

> ID：13575292
> 
> 赞同：2
> 
> 时间：2012-11-27T00:03:11.977
> 
> 标签：actionscript-3, video, video-processing, flvplayback

需要有关此 as3 代码的帮助，该代码曾经在 Flash CS5.5 中工作，但现在不适用于 Flash CS6。

我在舞台上有一个名为 myVideo 的 FLVPlayback 实例，我尝试使用以下代码捕获“seek”事件：

**导入 fl.video.*；
导入 fl.video.FLV 播放；
导入 fl.video.VideoEvent；

myVideo.addEventListener(VideoEvent.SEEKED, seekHandler);

函数 seekHandler(myEvent:VideoEvent) {
    trace("seeked");
}**

此时我在发布时遇到了下一个错误：
**1119: Access of possible undefined property SEEKED through an reference with static type Class。**

我在 as3 中阅读了有关严格模式的一些内容。我取消选中该选项，现在当我尝试在视频播放器中寻找另一个点时，我得到了这个输出：

**TypeError：错误 #1034：类型强制失败：无法将 fl.video::VideoEvent@4697c239 转换为 flash.events.VideoEvent。**

如果这适用于 Flash CS5.5，任何人都可以告诉我我做错了什么。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:59:00.033

因为import fl.video.VideoEvent中有一个VideoEvent类；还有 flash.events.VideoEvent。myVideo 正在触发 fl.video.VideoEvent... 但您的听众正在收听 flash.events.VideoEvent。测试..更改为函数 seekHandler(myEvent:fl.video.VideoEvent)。

很高兴你得到它！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-19T06:49:10.120

可悲的是土坯`flash CS5`并`CS6`有这个问题，

将 myEvent 更改为`myEvent:fl.video.VideoEvent`

最好的

# android - 如何在 Android 源代码中更改导航栏颜色？

> ID：13575294
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:03:27.370
> 
> 标签：android

编辑这个古老的声誉问题：

我正在阅读 AOKP 源代码，以帮助自己，并想知道导航栏的实际创建位置。特别想改一下颜色吧。我在哪里可以找到 Android 源代码中的 Navigation Bar 类？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:23:49.147

IIRC SystemUI 负责渲染导航栏。看[这里](http://developer.android.com/design/get-started/ui-overview.html)

# azure - Azure CDN 不传递 Gzip 文件

> ID：13575301
> 
> 赞同：3
> 
> 时间：2012-11-27T00:03:44.630
> 
> 标签：azure, azure-cdn

我无法让 Azure 的 CDN 传递来自源的压缩文件。

**原始文件（gzips就好了:)**

[http://www.schooldigger.com/cdn/clientscript/SchoolDigger.1.45.min.js](http://www.schooldigger.com/cdn/clientscript/SchoolDigger.1.45.min.js)

```
>curl -I -H "Accept-Encoding: gzip,deflate" http://www.schooldigger.com/cdn/clientscript/SchoolDigger.1.45.min.js 
```

返回

```
HTTP/1.1 200 OK
Cache-Control: max-age=1209600
Content-Length: 57390
Content-Type: text/javascript
Content-Encoding: gzip
Last-Modified: Mon, 26 Nov 2012 04:45:00 GMT
Accept-Ranges: bytes
ETag: "31143cb90cbcd1:0"
Vary: Accept-Encoding
Server: Microsoft-IIS/7.0
X-Powered-By: ASP.NET
Date: Mon, 26 Nov 2012 17:25:25 GMT 
```

**CDN 文件（不返回 gzipped）：**

[http://cdnaz.claarware.com/clientscript/SchoolDigger.1.45.min.js](http://cdnaz.claarware.com/clientscript/SchoolDigger.1.45.min.js)

```
>curl -I -H "Accept-Encoding: gzip,deflate" http://cdnaz.claarware.com/clientscript/SchoolDigger.1.45.min.js 
```

返回：

```
HTTP/1.1 200 OK
Cache-Control: max-age=1209600
Content-Length: 150551
Content-Type: text/javascript
Accept-Ranges: bytes
ETag: "31143cb90cbcd1:0"
Server: Microsoft-IIS/7.0
X-Powered-By: ASP.NET
Age: 43723
Date: Mon, 26 Nov 2012 17:31:50 GMT
Last-Modified: Mon, 26 Nov 2012 04:45:00 GMT
Expires: Mon, 10 Dec 2012 05:23:07 GMT
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:14:09.937

如何在您的内容中启用压缩？根据您的电子邮件，不清楚您是否使用 Web 角色来压缩 Windows Azure 所需的内容。

如此**[处](http://blogs.msdn.com/b/windowsazure/archive/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network.aspx)**所述，关于**带有压缩内容的 Windows Azure CDN？**, Windows Azure CDN 不会修改（或添加）压缩到您的对象。Windows Azure CDN 尊重源基于“Accept-Encoding”标头提供的任何压缩。如果您使用托管服务对象交付，则可以将 IIS 配置为返回压缩对象。

**[这](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx)**是一篇关于如何对您的内容启用压缩的文章，以及关于这方面**[的一些SO 讨论。](https://stackoverflow.com/questions/10420004/azure-cdn-enabling-http-compression-hosted-web-role)**

# android - 如何在 Android 的 ListView 中放置图像和文本

> ID：13575302
> 
> 赞同：1
> 
> 时间：2012-11-27T00:03:45.080
> 
> 标签：android, xml, image, listview

我是新来的，所以我有一个问题..我有一个专门的 Listview 菜单，我想在文本之前放一张图片..这是我的 menu2.java..

```
public class menu2 extends Activity {

private ListView listApps;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu2);

listApps = (ListView) findViewById(R.id.listView1);

String str[] = new String[] {"Messaging", "Phone Dialer", "Simple Math", "Splash", "Exit","Quit Application"};
//final ImageView imageView = (ImageView) findViewById(R.id.);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.activity_list_item,android.R.id.text1, str);

listApps.setAdapter(adapter);

listApps.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> parent, View aview, int position,
            long id){
        switch(position){
        case 0:
            //imageView.setImageResource(R.drawable.ic_launcher);
            Intent i1 = new Intent(menu2.this,Messaging.class);
            startActivity(i1);
            break;
        case 1:
            Intent i2 = new Intent(menu2.this,PhoneDialer.class);
            startActivity(i2);
            break;                  
        case 2:
            Intent i3 = new Intent(menu2.this,SimpleMath.class);
            startActivity(i3);
            break;                  
        case 3:
            Intent i4 = new Intent(menu2.this,Splash.class);
            startActivity(i4);
            break;                  
        case 4: 
            Intent i5 = new Intent(menu2.this,Exit.class);
            startActivity(i5);
            break;                                      
        case 5:

            AlertDialog.Builder alt_bld = new AlertDialog.Builder(menu2.this);
            alt_bld.setMessage("Are you sure you want to quit application?");
            alt_bld.setCancelable(false);
            alt_bld.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    finish(); 
                }

            })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                //  Action for 'NO' Button
                    dialog.cancel();
                }
            });
            AlertDialog alert = alt_bld.create();
            alert.setTitle("Confirmation");
            alert.setIcon(R.drawable.ic_launcher);
            alert.show();                   

        }
    }
});
} 
```

然后我有我的 menu2.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我在将图像视图放在左侧而将文本视图放在右侧时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:18:48.490

你看到你是如何用你的 ListView 元素设置你的布局了吗？您还必须为列表中的每一行创建一个单独的布局，例如 listview_row.xml 或您选择的任何名称。除此之外，您还必须创建一个自定义适配器，将您的 textView 和 ImageView 绑定到每个 ListView 行。这使您可以更好地控制列表行。我写了一篇关于这个主题的博客文章。看看，如果您需要更多帮助，请告诉我。祝你好运！

[http://jadebyfield.blogspot.com/2012/10/custom-listview-with-textviews-and.html](http://jadebyfield.blogspot.com/2012/10/custom-listview-with-textviews-and.html)

# iphone - 没有启用 iCloud 的 URLForUbiquityContainerIdentifier？

> ID：13575310
> 
> 赞同：0
> 
> 时间：2012-11-27T00:05:16.640
> 
> 标签：iphone, objective-c, ios, core-data, icloud

我有一个应用程序，无论是否启用 iCloud，我都希望每次都以相同的方式工作。因此，我想在启用 iCloud 的情况下将我的核心数据持久存储存储在同一个位置，就像没有启用它一样。

如果启用了 iCloud，则调用

```
NSURL *iCloudURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier]; 
```

给出结果：

```
file://localhost/private/var/mobile/Library/Mobile%20Documents/12345~com~andrew~icloudid/ 
```

在没有启用 iCloud 的情况下调用它会返回 nil。我希望能够在未启用 iCloud 时访问它，以便仍然从那里使用我的核心数据存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:36:54.540

*在设备*而不是模拟器上尝试相同的设置。

您会发现，无论用户设置如何，无处不在的容器 URL 都是相同的。

# c# - 从 2 个现有列表创建新列表，其中有匹配的值

> ID：13575312
> 
> 赞同：0
> 
> 时间：2012-11-27T00:05:44.083
> 
> 标签：c#, list, object

我有 2 个列表，其中包含 2 种不同类型的对象。是否可以比较两个列表中的对象并创建一个包含具有匹配属性值的对象的新列表？

例如，如果我有一个公共汽车列表（带有属性'busID'）和一个司机列表（也带有属性'busID'）。我可以在哪里（buses.busesID = drivers.busID）创建一个新列表吗？

我意识到这个问题很模糊，不包含示例代码。不过，我被困在这里了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:39:47.470

您可以使用 LINQ 在此 ID 上加入这两个集合，例如生成一个总线及其驱动程序的元组。使用 LINQ 语法，它看起来像这样：

```
var result = from bus in buses
             join driver in drivers on bus.busID equals driver.busID
             select new { Bus = bus, Driver = driver } 
```

这可能会为您引入几个新功能，例如**[LINQ](http://msdn.microsoft.com/en-us/library/bb397897.aspx)**本身或**[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)**定义。

结果是一个查询，它被懒惰地执行并产生一个总线+司机对的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:57:37.720

如果您追求更抽象的解决方案，那么您可以使用反射。

```
 class A
    {
        public int x { get; set; }
        public int y { get; set; }
    }

    class B
    {
        public int y { get; set; }
        public int z { get; set; }
    }

    static List<A> listA = new List<A>();
    static List<B> listB = new List<B>();

    static void Main(string[] args)
    {
        listA.Add(new A {x = 0, y = 1});
        listA.Add(new A {x = 0, y = 2});
        listB.Add(new B {y = 2, z = 9});
        listB.Add(new B {y = 3, z = 9});

        // get all properties from classes A & B and find ones with matching names and types
        var propsA = typeof(A).GetProperties();
        var propsB = typeof(B).GetProperties();
        var matchingProps = new List<Tuple<PropertyInfo, PropertyInfo>>();
        foreach (var pa in propsA)
        {
            foreach (var pb in propsB)
            {
                if (pa.Name == pb.Name && pa.GetType() == pb.GetType())
                {
                    matchingProps.Add(new Tuple<PropertyInfo, PropertyInfo>(pa, pb));
                }
            }
        }

        // foreach matching property, get the value from each element in list A and try to find matching one from list B
        var matchingAB = new List<Tuple<A, B>>();
        foreach (var mp in matchingProps)
        {
            foreach (var a in listA)
            {
                var valA = mp.Item1.GetValue(a, null);

                foreach (var b in listB)
                {
                    var valB = mp.Item2.GetValue(b, null);

                    if (valA.Equals(valB))
                    {
                        matchingAB.Add(new Tuple<A, B>(a, b));
                    }
                }
            }
        }

        Console.WriteLine(matchingAB.Count); // this prints 1 in this case
    } 
```

旁注：Tuple 是一个 .NET 4 类，如果您不能使用它，那么您可以轻松编写自己的：[Equivalent of Tuple (.NET 4) for .NET Framework 3.5](https://stackoverflow.com/questions/7120845/equivalent-of-tuple-net-4-for-net-framework-3-5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:39:41.070

尝试这个：

```
var query =
    from driver in drivers
    join bus in buses on driver.busID equals bus.busID
    select new { driver, bus };

var results = query.ToList(); 
```

# java-6 - 如何通过双击桌面上的文档来启动 Java 应用程序？

> ID：13575316
> 
> 赞同：2
> 
> 时间：2012-11-27T00:06:41.867
> 
> 标签：java-6

双击运行 Java 应用程序的桌面文档时，打开 Java 应用程序的最佳方式（或只是一种方式）是什么？[我说的不仅仅是从桌面启动应用程序，而是启动它并传递一个特定的文件（名称）]。我假设文件名必须作为命令行参数传递给 main，但我不确定如何通过双击告诉应用程序什么文件。最终，我希望能够在 Windows、MacOSX 和 Linux 上做到这一点。

感谢您的任何建议。

# c# - SQL C# 使用 LIKE 和通配符生成 SQL 语句；在“bla”附近给出不正确的语法

> ID：13575318
> 
> 赞同：1
> 
> 时间：2012-11-27T00:07:02.100
> 
> 标签：c#, sql, syntax, quotes

所以我有一个名为 arr 的 ArrayList，其中包含诸如“decoration”、“metal”、“paper”等字符串。

我想要做的是循环遍历该 ArrayList，将每个标签添加到查询字符串中，使用该查询字符串从数据库中获取数据。目前我有这样的事情：

```
String strSel="select * from Table1 where Tags";

for(int x=0;x<arr.Count;x++){
  if (x == arr.Count - 1)
    {
      strSel += " like '%'"+arr[x]+"'%'";
    }
      else
    {
      strSel += " like '%'" + arr[x] + "'%' or Tags";
    }
}

cmdSel=new SqlCommand(strSel,connectionName);
sqlDataReaderName=cmdSel.ExecuteReader(); 
```

无论如何，我收到一个关于“bla 附近语法不正确”的错误......它可能与单引号或通配符有关，但我无法弄清楚。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:08:29.813

您应该*在*_ *_*`percent symbol`

```
strSel += " like '%" + arr[x] + "%'"; 
```

抛出错误的原因是因为您的查询是这样形成的

```
select * from Table1 where Tags like '%'hello'%'
                                       ^     ^ extra single quote that
                                               should be removed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:17:20.323

是的 Kuya John 是正确的，额外的 ' 是导致问题的原因

```
 String strSel = "select * from Table1 where Tags";
        string[] arr = new string[] { "This", "That", "Something" };
        for (int x = 0; x < arr.Count(); x++)
        {
            if (x == arr.Count() - 1)
            {
                strSel += string.Format(" like '%{0}%' ", arr[x]);
            }
            else
            {
                strSel += string.Format(" like '%{0}%' or Tags", arr[x]);
            }
        } 
```

这在没有额外的 ' 的情况下表现良好

# c# - 将数据从c#文本框插入到excel

> ID：13575321
> 
> 赞同：1
> 
> 时间：2012-11-27T00:07:22.840
> 
> 标签：c#, visual-studio-2010, excel

嗨，我取消了 Oledb 以将数据从多个文本框插入到 Excel 工作表中。我遇到的问题是它不是作为数字类型而是字符串进入 excel，所以 grpah 不能自动关闭日期。我如何将值作为数字类型插入到 Excel 中？我尝试将文本框转换为 int，但没有成功。

我的代码如下。

```
 string szConn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=L://Metrics_gen.xlsx;Extended Properties='Excel 8.0;HDR=YES;'";
            OleDbConnection conn = new OleDbConnection(szConn);
            int v1 = Convert.ToInt32(textBox1.Text);
            int v2 = Convert.ToInt32(textBox2.Text);
            int v3 = Convert.ToInt32(textBox3.Text);
            int v4 = Convert.ToInt32(textBox4.Text);
            int v5 = Convert.ToInt32(textBox5.Text);

            conn.Open();
            OleDbCommand cmd = new OleDbCommand("INSERT INTO [Sheet1$]([Total],[Closed],[Issues],[Cancelled],[Back out]) VALUES('" + v1 + "','" + v2 + "','" + v3 + "','" + v4 + "','" + v5 + "')", conn);
            cmd.ExecuteNonQuery();

            conn.Close();
            MessageBox.Show("complete"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:25:26.817

问题是您在构造插入命令时将整数转换为字符串文字。见下文：

```
OleDbCommand cmd = new OleDbCommand("INSERT INTO [Sheet1$]([Total],[Closed],[Issues],[Cancelled],[Back out]) VALUES('" + v1 + "','" + v2 + "','" + v3 + "','" + v4 + "','" + v5 + "')", conn); 
```

将该行更改为：

```
OleDbCommand cmd = new OleDbCommand("INSERT INTO [Sheet1$]([Total],[Closed],[Issues],[Cancelled],[Back out]) VALUES(" + v1 + "," + v2 + "," + v3 + "," + v4 + "," + v5 + ")", conn); 
```

这应该可以解决您所有的问题:-)

注意：手工构建 SQL 容易出错。整数是您最不必担心的问题。想象一下，尝试插入一个恰好包含单引号字符 (') 的字符串、一个浮点数（当您将文化设置为一个以逗号作为小数分隔符时）、一个日期等等。就个人而言，我更喜欢使用 EPPlus (XLSX) 和 ExcelLibrary (XLS) 等库。两者均获得 LGPL 许可，比您当前使用的方法具有更大的灵活性。它们不需要在机器上安装 Excel，这使它们成为服务器端 Excel 报告生成的理想选择。此外，它们有助于避免使用 Microsoft Office Interop 的各种内存泄漏问题解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:49:48.293

此代码片段帮助我处理 C# 中的 Excel 电子表格，特别是输入数字行，然后生成该数据的总和。如果您在将数据加载到 excel 后处理代码中的行，请确保您忽略了标题行，这应该很明显，但只是在这里提到它，以防您遇到问题。

以下代码需要声明 - using Excel = Microsoft.Office.Interop.Excel;

```
 Excel.Application oXL;
       Excel.Workbook oWB;
        Excel.Worksheet oSheet;
        Excel.Range oRange;

             var filepath = "/somefilepath";

            // Start Excel and get Application object.  
            oXL = new Excel.Application();

            // Set some properties  
            oXL.Visible = true;
            oXL.DisplayAlerts = false;

            // Get a new workbook.  
            oWB = oXL.Workbooks.Add(Missing.Value);

            // Get the Active sheet  
            oSheet = (Excel.Worksheet)oWB.ActiveSheet;
            oSheet.Name = "Data";

            int rowCount = 1;
            string strExpr;
            string strSort;

            foreach (DataRow dr in dt.Rows)
            {
                rowCount += 1;
                for (int i = 1; i < dt.Columns.Count + 1; i++)
                {
                    // Add the header the first time through  
                    if (rowCount == 2)
                    {
                        oSheet.Cells[1, i] = dt.Columns[i - 1].ColumnName;
                    }
                    oSheet.Cells[rowCount, i] = dr[i - 1].ToString();
                }
            }
           //Freze the first row
            oSheet.Application.ActiveWindow.SplitRow = 1;
            oSheet.Application.ActiveWindow.FreezePanes = true;

            // Resize the columns  
            oRange = oSheet.get_Range(oSheet.Cells[1, 1],
                          oSheet.Cells[rowCount, dt.Columns.Count]);
            oRange.EntireColumn.AutoFit();

            // Save the sheet and close  
            oSheet = null;
            oRange = null;
            oWB.SaveAs(filepath, Excel.XlFileFormat.xlWorkbookNormal,
                Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                Excel.XlSaveAsAccessMode.xlExclusive,
                Missing.Value, Missing.Value, Missing.Value,
                Missing.Value, Missing.Value);
            oWB.Close(Missing.Value, Missing.Value, Missing.Value);
            oWB = null;
            oXL.Quit(); 
```

# php - 获取：即使在声明数组后也不能将字符串偏移量用作数组

> ID：13575323
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:07:43.927
> 
> 标签：php, arrays, fatal-error

我收到错误：

> 致命错误：不能在第 149 行的 /home/a1591957/public_html/sidor/NewSidor.php 中使用字符串偏移作为数组

这是第 149 行：

```
$emp_names_LB[$i][$j] .= "\n\t\t\t\t\t\t<option value=\"\">-------</option>"; 
```

这是该行所在的整个循环：

```
$emp_names_LB = array();

 for ($i=0;$i<=$num_of_pos;$i++) {
     for ($j=0;$j<=6;$j++) {
          $emp_names_LB[$i][$j] = "\n\t\t\t\t\t" .
           "<select name=\"WorkersDay" . $j . "Shift" . $i . "\">";
          $emp_names_LB[$i][$j] .= "\n\t\t\t\t\t\t" .
           "<option value=\"none\">&nbsp;</option>";
          for($x=0;$x<=($num_sent_sidor - 1);$x++){
              $emp_names_LB .= "\n\t\t\t\t\t\t" .
               "<option value=\"" . $sent_sidor_emp[$x]["id"] . "\">" .
                $sent_sidor_emp[$x]["FirstName"] . 
                " " . $sent_sidor_emp[$x]["LastName"] . "</option>";
          }
          $emp_names_LB[$i][$j] .= "\n\t\t\t\t\t\t" .
           "<option value=\"\">-------</option>";
          for ($x=0;$x<=($num_no_sidor-1);$x++) {
              $emp_names_LB[$i][$j] .= "\n\t\t\t\t\t\t" .
               "<option value=\"" . $no_sidor_emp[$x]["id"] . "\">" . 
                . $no_sidor_emp[$x]["FirstName"] . 
                " " . $no_sidor_emp[$x]["LastName"] . "</option>";
          }              
         $emp_names_LB[$i][$j] .= "\n\t\t\t\t\t</select>";
     }
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:30:09.810

在这条线上（大约在 147 号线左右）

```
$emp_names_LB .= "\n\t\t\t\t\t\t" . 
```

您将`$emp_names_LB`其视为执行隐式类型转换的字符串，从而阻止您进一步访问多维数组。

您可能打算`$emp_names_LB[$i][$j]`改用。

# c# - 我的 XML 的正确自定义配置代码是什么？

> ID：13575329
> 
> 赞同：0
> 
> 时间：2012-11-27T00:08:25.677
> 
> 标签：c#, custom-configuration

假设以下 XML，正确的自定义配置代码是什么？：

```
<ServicesMonitor>
  <serviceTestGroups>
    <serviceTestGroup name="foo">
      <serviceTest uri="http://server1/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
      <serviceTest uri="http://server2/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
      <serviceTest uri="http://server3/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
    </serviceTestGroup>
  </serviceTestGroups>
</ServicesMonitor> 
```

我知道我需要：

*   服务测试元素：配置元素

我想我需要：

*   服务测试元素集合：配置元素集合
*   ServiceTestGroupsElement : 配置部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:22:40.437

这不是您上面的确切 XML，但它非常接近：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="servicesMonitor" type="TestConfigurationElement.ServicesMonitorSection, TestConfigurationElement"/>
  </configSections>
  <servicesMonitor>
    <serviceTestGroups>
      <add name="foo">
        <serviceTests>
          <add uri="http://server1/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
          <add uri="http://server2/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
          <add uri="http://server3/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
        </serviceTests>
      </add>
    </serviceTestGroups>
  </servicesMonitor>
</configuration> 
```

这是代码：

```
using System;
using System.Configuration;

namespace TestConfigurationElement
{
    public class ServicesMonitorSection : ConfigurationSection
    {
        [ConfigurationProperty("serviceTestGroups", IsRequired = true)]
        public ServiceTestGroupElementCollection ServiceTestGroups
        {
            get { return (ServiceTestGroupElementCollection)this["serviceTestGroups"]; }
            set { this["serviceTestGroups"] = value; }
        }
    }

    public class ServiceTestGroupElement : ConfigurationElement
    {
        [ConfigurationProperty("name", IsRequired = true)]
        public string Name
        {
            get { return (string)this["name"]; }
            set { this["name"] = value; }
        }

        [ConfigurationProperty("serviceTests", IsRequired = true)]
        public ServiceTestElementCollection ServiceTests
        {
            get { return (ServiceTestElementCollection)this["serviceTests"]; }
            set { this["serviceTests"] = value; }
        }
    }

    public class ServiceTestGroupElementCollection : ConfigurationElementCollection
    {
        protected override ConfigurationElement CreateNewElement()
        {
            return new ServiceTestGroupElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((ServiceTestGroupElement)element).Name;
        }
    }

    public class ServiceTestElement : ConfigurationElement
    {
        [ConfigurationProperty("uri", IsRequired = true)]
        public Uri Uri
        {
            get { return (Uri)this["uri"]; }
            set { this["uri"] = value; }
        }

        [ConfigurationProperty("expectedResponseTime", IsRequired = true)]
        public int ExpectedResponseTime
        {
            get { return (int)this["expectedResponseTime"]; }
            set { this["expectedResponseTime"] = value; }
        }
    }

    public class ServiceTestElementCollection : ConfigurationElementCollection
    {
        protected override ConfigurationElement CreateNewElement()
        {
            return new ServiceTestElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((ServiceTestElement)element).Uri;
        }
    }

    public static class Program
    {
        public static void Main(string[] args)
        {
            ServicesMonitorSection section = (ServicesMonitorSection)ConfigurationManager.GetSection("servicesMonitor");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:43:27.050

这是我想出的最终解决方案。我只需要稍微修改 taylorjonl 的代码。

```
namespace Demo.ServiceMonitor
{
    using System;
    using System.Configuration;

    public class ServiceMonitorSection : ConfigurationSection
    {
        [ConfigurationCollection(typeof(ServiceTestGroupElementCollection), AddItemName = "serviceTestGroup")]
        [ConfigurationProperty("serviceTestGroups", IsRequired = true)]
        public ServiceTestGroupElementCollection ServiceTestGroups
        {
            get { return this["serviceTestGroups"] as ServiceTestGroupElementCollection; }
            set { this["serviceTestGroups"] = value; }
        }
    }

    public class ServiceTestGroupElementCollection : ConfigurationElementCollection
    {
        public ServiceTestGroupElement this[int index]
        {
            get { return (ServiceTestGroupElement)this.BaseGet(index); }
            set
            {
                if (this.BaseGet(index) != null)
                {
                    this.BaseRemoveAt(index);
                    this.BaseAdd(index, value);
                }
            }
        }

        public ServiceTestGroupElement this[string Name]
        {
            get { return (ServiceTestGroupElement)this.BaseGet(Name); }
        }

        protected override ConfigurationElement CreateNewElement()
        {
            return new ServiceTestGroupElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((ServiceTestGroupElement)element).Name;
        }
    }

    public class ServiceTestGroupElement : ConfigurationElement
    {
        [ConfigurationProperty("name", IsKey = true, IsRequired = true)]
        public string Name
        {
            get { return this["name"] as string; }
            set { this["name"] = value; }
        }

        [ConfigurationCollection(typeof(ServiceTestElementCollection), AddItemName = "serviceTest")]
        [ConfigurationProperty("serviceTests", IsKey = false, IsRequired = true)]
        public ServiceTestElementCollection ServiceTests
        {
            get { return this["serviceTests"] as ServiceTestElementCollection; }
            set { this["serviceTests"] = value; }
        }
    }

    public class ServiceTestElementCollection : ConfigurationElementCollection
    {
        public ServiceTestElement this[int index]
        {
            get { return (ServiceTestElement)this.BaseGet(index); }
            set
            {
                if (this.BaseGet(index) != null)
                {
                    this.BaseRemoveAt(index);
                    this.BaseAdd(index, value);
                }
            }
        }

        public ServiceTestElement this[string Name]
        {
            get { return (ServiceTestElement)this.BaseGet(Name); }
        }

        protected override ConfigurationElement CreateNewElement()
        {
            return new ServiceTestElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((ServiceTestElement)element).Uri;
        }
    }

    public class ServiceTestElement : ConfigurationElement
    {
        [ConfigurationProperty("uri", IsKey = true, IsRequired = true)]
        public Uri Uri
        {
            get { return this["uri"] as Uri; }
            set { this["uri"] = value; }
        }

        [ConfigurationProperty("expectedResponseTime", IsKey = false, IsRequired = true)]
        public int ExpectedResponseTime
        {
            get { return (int)this["expectedResponseTime"]; }
            set { this["expectedResponseTime"] = value; }
        }
    }
} 
```

XML 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="servicesMonitor"
             type="Demo.ServiceMonitor.ServiceMonitorSection, Demo.ServiceMonitor"/>
  </configSections>
  <servicesMonitor>
    <serviceTestGroups>
      <serviceTestGroup name="Geocoding Service Tests">
        <serviceTests>
          <serviceTest uri="http://server1/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
          <serviceTest uri="http://server2/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
          <serviceTest uri="http://server3/GIS/rest/services/geocode/FindAddress/GeocodeServer?f=json" expectedResponseTime="1000" />
        </serviceTests>
      </serviceTestGroup>
    </serviceTestGroups>
  </servicesMonitor>
</configuration> 
```

谢谢，

汤姆

# ios - 支持横向方向

> ID：13575339
> 
> 赞同：0
> 
> 时间：2012-11-27T00:09:22.197
> 
> 标签：ios, controller, orientation

我有一个只支持纵向的应用程序，但是，要求发生了变化，要求应用程序支持横向，我完全震惊了，因为我不知道该怎么做，以防万一我必须重做所有xib的支持横向？

无论如何，或者有一种可用的技术来做到这一点？

TIA

海市蜃楼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:55:36.247

如果问题出在 InterfaceBuilder 上，CMD+Z 是解决方案，但我希望它不会迟到。

如果是 iOS 6 的问题，解决方法是改变你的界面方向方法，你可以 google 那个。

如果问题是目标信息，只需查看摘要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:04:41.280

这实际上取决于您的布局是如何构建的。首先，您需要启用所有需要支持的方向，并查看它在自动旋转后的样子 - 如果出现问题，那么您可以考虑要做什么以及如何做，但您必须发布更多信息。

要启用自动旋转，只需在控制器中编辑/添加适当的方法：

```
// iOS >= 6.0
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

// iOS < 6.0
// that method is deprecated but you need that if you want to support iOS < 6.0
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

# jquery - Jquery插件实例问题

> ID：13575342
> 
> 赞同：0
> 
> 时间：2012-11-27T00:09:31.860
> 
> 标签：jquery, jquery-plugins

所以这很可能是一个非常简单的问题，我只是无法弄清楚。

基本上我想选择多个元素并为每个对象创建新实例。

然后稍后我希望能够`public`从外部插件调用方法。

现在的问题是，当我调用这些方法时，我似乎无法访问每个实例`settings`，我可以，但看起来这些设置在循环槽元素时被覆盖了。

我想我不会在这里发布代码，因为它很长，但我已经制作了这个[**jsfiddle**](http://jsfiddle.net/5EGEY/)，并且我已经在评论中解释了什么不起作用。

为了清楚起见，插件被调用了`two`次，然后我调用了公共方法`test`，它应该将此文本设置`container`为`.result`div 但它设置`container2`不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:38:25.580

1.  您需要将数据附加到内部的dom元素`init`

    $.data(obj, "设置", 设置);

2.  你最好在 dom 元素的上下文中调用方法

    方法[方法].apply（这个，选项）；

[http://jsfiddle.net/5EGEY/1/](http://jsfiddle.net/5EGEY/1/)

# objective-c - UILabel 在子视图中有白色背景

> ID：13575343
> 
> 赞同：3
> 
> 时间：2012-11-27T00:09:37.767
> 
> 标签：objective-c

我不得不将我的几个 UILabel 从 xib 到代码，并且标签有白色背景。标签显示每 5 秒更改一次的游戏日期。文字很好，只有白色背景。我试过 backgroundColour 和 opaque，没有结果。

```
CGRect frame = CGRectMake(0, 278, 105, 33);
timerView = [[UIView alloc] initWithFrame:frame];
[self.view addSubview:timerView];

UIButton *timerBackground = [UIButton buttonWithType:UIButtonTypeCustom];
[timerBackground setBackgroundImage:[UIImage imageNamed:@"Time Background.png"] forState:UIControlStateNormal];
[timerBackground addTarget:self action:@selector(_addContactButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
timerBackground.frame = CGRectMake(-2 , 15, 102, 27);
[timerView addSubview:timerBackground];

dateDay = [[UILabel alloc] init];
dateDay.frame = CGRectMake(15, 5, 20, 21);
dateDay.opaque = NO;
[timerBackground addSubview:dateDay]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:11:26.557

将背景颜色设置为清除。

```
label.backgroundColor = [UIColor clearColor]; 
```

# python - 散列 Python 闭包会忽略 __closure__ 变量

> ID：13575346
> 
> 赞同：1
> 
> 时间：2012-11-27T00:09:48.437
> 
> 标签：python, closures

我正在使用 Python 2.7，并注意到它在计算 hash() 时似乎忽略了闭包变量。这是预期的行为吗？这似乎很奇怪，因为 == 按我的预期工作。

```
def foo(x):
    def bar():
        print x
    return bar

>>> foo(1)
<function bar at 0x2aaaaba0e758>
>>> foo(2)
<function bar at 0x2aaaaba0e848>
>>> foo(1) == foo(2)
False
>>> hash(foo(1))
-9223369104822759804
>>> hash(foo(2))
-9223369104822759804
>>> foo(1).__closure__
(<cell at 0x2aaaaba08130: int object at 0x7a97d8>,)
>>> foo(2).__closure__
(<cell at 0x2aaaaba08168: int object at 0x7a97c0>,)
>>> 
```

# pdf - iTextSharp - 将文档附加为页面

> ID：13575347
> 
> 赞同：0
> 
> 时间：2012-11-27T00:10:07.697
> 
> 标签：pdf, itextsharp

到目前为止，使用 iTextSharp，我已经能够使用带有文本字段的 Adob​​e Acrobat Pro 创建 pdf。我可以使用 iTextSharp 打开 PDF，然后将所需字段与关键信息填充到关键字段中。

接下来，我可以打包所有内容并将文件从字节数组中作为文件附件发送出去——所以一切正常。

问题在于——我必须在内存流中创建一个 PDF 文档，并用必要的文本填充文档。我已经很好地解决了这个问题。

问题是我对如何将内存流中的文档附加到作为**新页面位于文件流中的现有源 .PDF 感到困惑。**

一种是使用 stamper.insert 页面，但我对无法向矩形添加标题的想法感到困惑，我认为使用 Document doc = new Document() 是可行的方法。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:40:21.253

这是伪代码代码。这就是它目前所做的。

打开源文件并存储到 byte[] 使用 .SetField 使用 Acrofields 填充 pdf 中的文本字段（这是成功的） 标记并关闭 作为字节数组返回并作为文件附件发送。这一切都很好。

现在 - 我们需要将一个新页面附加到上述现有文档的文本 - 几个段落。

创建内存流 创建文档 创建编写器并将内存流和文档混合在一起。

```
MemoryStream ms = new MemoryStream();
Document doc = new Document(PageSize.LETTER);
PdfWriter writer = PdfWriter.GetInstance(doc, ms);
doc.Open();
doc.NewPage();
Paragraph p = new Paragraph();
p.Add(new Chunk(complaintinfo.COMPLAINT_DESC, new Font(Font.NORMAL, qSize, iTextSharp.text.Font.NORMAL)));
// doc - add header info later..
doc.Add(p); 
```

如何将文档作为新页面添加到文件流中已经存在的现有 .pdf 中？自然，我假设我们要在盖章并关闭链接到原始 PDF 的阅读器之前添加页面。

# c# - IIS 7 连接 C# 字符串真的很慢

> ID：13575348
> 
> 赞同：0
> 
> 时间：2012-11-27T00:10:08.563
> 
> 标签：c#, string, memory, iis-7

我们有一个用大量字符串连接实现的大型系统——它无处不在。

我们编写了一个快速页面，在循环中连接字符串。这在我们的 dev boxen（调试关闭）和我们的测试虚拟机上运行 3.3 秒。但是在生产（IIS7）上它运行时间为 15.7 秒。

任何人都可以建议我们可以查看服务器端（IIS 设置、内存设置等）来解决这个问题吗？

仅供参考 - 服务器有大量可用内存和可用 CPU 周期 - 所以它不是资源问题。 **重写所有代码以使用 string.Join 或 StringBuilder 不在预算之内。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:18:07.383

这会在内存中创建许多微小的字符串对象，这些对象需要稍后由垃圾收集器收集。将其替换为

```
 var sMain = new StringBuilder();
  while (something)
  {
    sMain.Append(sStringSub);
    // ...
  }

  // Call sMain.ToString() when you need the whole string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T01:36:54.563

不敢相信我是第一个推荐[RedGates Profiling Tools](http://www.red-gate.com/code-profiling)的人。

**这将告诉您究竟是什么在服务器上与开发 PC 上花费了这么多时间。**

字符串是存储在托管堆上的引用类型，因此受垃圾回收的约束。GC 将在 GC 第一次检测到它无法释放内存时将您的字符串提升几代（0,1,2）。如果您查看[CLR Profiler](http://www.microsoft.com/en-au/download/details.aspx?id=16273)，我敢打赌您会看到分配给第 2 代的大量字符串。

> 重写所有代码以使用 string.Join 或 StringBuilder 不在预算之内。

它是否在预算内并不重要。如果一个应用程序需要 15 秒来响应，那么没有人会想要使用它，你也不会赚钱。你将不得不改变一些东西。

如果没有 Profiler 的踪迹，它就像在黑暗中开枪……我最好的猜测是开发 PC 有一个 SSD。

即使字符串是不可变的，并且很大一部分内存可能是指已连接的字符串，但 GC 无法收集。我仍然不认为这是一个内存问题，我敢打赌它与 I/O 有关，但分析器跟踪会确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:28:50.790

将您的开发箱上的网站设置与您的生产箱不同。有很多事情可能会导致不同，从工作线程数到最大内存大小。如果超过这些阈值，IIS 将回收工作人员。

另外，您在开发盒上使用的是 IIS 还是 Cassini？

检查您的应用程序是否未在调试模式下运行。

# php - 将 PHP URL 变量传递给 jquery/ajax 表单

> ID：13575350
> 
> 赞同：1
> 
> 时间：2012-11-27T00:10:22.947
> 
> 标签：php, javascript, jquery, mysql, ajax

我正在使用 jquery/ajax 提交表单而不刷新页面。

这是我的表单代码：

```
<div id="event_form">
    <form name="event_submit" method="post" action="">
        <label for="what" id="what_label">What is the event?</label>
        <input type="text" name="what" id="what" class="entry_field" />
        <br />
        <label class="error" for="what" id="what_error">This field is required.</label>
        <br />
        <label for="where" id="where_label">Where is the event?</label>
        <input type="text" name="where" id="where" class="entry_field" />
        <br />
        <label class="error" for="where" id="where_error">This field is required.</label>
        <br />
        <label for="when" id="when_label">When is the event?</label>
        <input type="text" name="when" id="when" class="entry_field" />
        <br />
        <label class="error" for="when" id="when_error">This field is required.</label>
        <br />
        <label for="details" id="details_label">Additional details</label>
        <textarea rows="8" cols="30" name="details"></textarea>            
        <br />
        <input type="submit" value="Post Event" name="submit" class="submitButton" title="Click to post event" />
    </form>
</div> 
```

这是我的 jquery/ajax：

```
 $(function() {
    $('.error').hide();

    $(".submitButton").click(function() {
      // validate and process form
      // first hide any error messages
      $('.error').hide();

      var what = $("input#what").val();
      if (what == "") {
        $("label#what_error").show();
        $("input#what").focus();
        return false;
      }
      var where = $("input#where").val();
      if (where == "") {
        $("label#where_error").show();
        $("input#where").focus();
        return false;
      }
      var when = $("input#when").val();
      if (when == "") {
        $("label#when_error").show();
        $("input#when").focus();
        return false;
      }

      var dataString = 'what='+ what + '&where=' + where + '&when=' + when;
      //alert (dataString);return false;

      $.ajax({
        type: "POST",
        url: "event_submit.php",
        data: dataString,
        success: function() {
          $('#event_form').html("<div id='message'></div>");
          $('#message').html("<h2>Event Submitted!</h2>");
        }
       });
      return false;
    });
  }); 
```

这是php：

```
<?php

include "conf.php";

if ((isset($_POST['what'])) && (strlen(trim($_POST['what'])) > 0)) {
    $what = stripslashes(strip_tags($_POST['what']));
} else {$what = 'No description of the event entered.';}
if ((isset($_POST['where'])) && (strlen(trim($_POST['where'])) > 0)) {
    $where = stripslashes(strip_tags($_POST['where']));
} else {$where = 'No location entered for the event.';}
if ((isset($_POST['when'])) && (strlen(trim($_POST['when'])) > 0)) {
    $when = stripslashes(strip_tags($_POST['when']));
} else {$when = 'No time entered for the event.';}
if ((isset($_POST['details'])) && (strlen(trim($_POST['details'])) > 0)) {
    $details = stripslashes(strip_tags($_POST['details']));
}

if(isset($details)){
    mysql_query("INSERT INTO `events` (`school_id`, `what`, `where`, `when`, `details`) VALUES ('$school_id', '$what', '$where', '$when', '$details')") or die(mysql_error());
}
else {
    mysql_query("INSERT INTO `events` (`school_id`, `what`, `where`, `when`) VALUES ('$school_id', '$what', '$where', '$when')") or die(mysql_error());
}

exit;
?> 
```

在表单所在的页面上，URL 中有一个“$school_id”，如 ?school=1687 或其他。我可以使用 $_GET 在表单页面上检索它，但是如何将此变量传递给 ajax/php？我需要将它作为变量插入到表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:14:53.383

怎么样的东西

```
<input type="hidden" name="schoolid" value="<?php echo $_GET['school_id']; ?>"> 
```

以你的形式？请理解，回显未清理的 GET 参数仅用于说明目的 - 它使您对 CSS 敞开心扉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:15:00.120

您可以只使用隐藏的输入。就像是：

```
<input type="hidden" id="school_id" value="<?php echo $school_id" /> 
```

然后将其附加到您的数据变量上：

```
var dataString = 'school_id='+$('#school_id').val()+'&what='+ what + '&where=' + where + '&when=' + when; 
```

然后在您的 php 页面上检索它：

```
$school_id = $_POST['school_id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:14:49.803

尝试：

```
//Retrieving $_GET['school_id']  and passing as JSON object
var school_id = <?php echo $_GET['school_id']; ?>
var dataString = { 'what': what, 'where' : where, 'when': when, 'school_id': school_id }
$.ajax({
    type: "POST",
    url: "event_submit.php",
    data: dataString,
    type: json,
    success: function() {
      $('#event_form').html("<div id='message'></div>");
      $('#message').html("<h2>Event Submitted!</h2>");
    }
   }); 
```

`$_POST['school_id']`您可以在 上访问它`event_submit.php`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T05:28:56.220

在表单中添加一个隐藏字段，如下所示

```
 <input type="hidden" id="school_id" value="<?php echo $_REQUEST['school']; ?>" /> 
```

现在在 jQuery 脚本中，您可以通过一行代码简单地获取所有表单元素值

```
var dataString = $('#form-id-here').serialize(); 
```

然后通过ajax发送

```
$.ajax({
    type: "POST",
    url: "event_submit.php",
    data: dataString,
    success: function() {
      $('#event_form').html("<div id='message'></div>");
      $('#message').html("<h2>Event Submitted!</h2>");
    }
   }); 
```

最后将mysql插入查询更改为followig

```
 mysql_query("INSERT INTO `events` (`school_id`, `what`, `where`, `when`, `details`) VALUES ('".$_POST['school_id']."', '$what', '$where', '$when', '$details')") or die(mysql_error()); 
```

我想现在你已经拥有了所有需要的东西。享受 ：）

# r - “闪亮”的 R 包如何处理数据帧？

> ID：13575353
> 
> 赞同：11
> 
> 时间：2012-11-27T00:10:34.903
> 
> 标签：r, web-applications, twitter, dataframe, shiny

我正在构建一个网络应用程序，该应用程序使用“twitteR”R 包下载推文，整理这些推文并通过“闪亮”R 网络应用程序显示它们。执行将推文下载并处理到数据框中的代码没有问题：

```
do.call('rbind', lapply(userTimeline('nutwition_log'), as.data.frame)) 
```

...您可以自己在终端中运行它（加载 twitteR 库），然后查看它下载推文数据并将生成的数据帧打印到屏幕上。

但是，当我在“闪亮”应用程序（服务器端）中使用这种调用时......例如......

* * *

服务器.R：

```
library(shiny)
library(twitteR)
shinyServer(function(input, output) {

  datasetInput <- reactive(function() {
    tweets <- userTimeline(input$subscriber)
    do.call('rbind', lapply(tweets, as.data.frame))
  })

  output$view <- reactiveTable(function() {
    head(datasetInput(), n = input$obs)
  })

}) 
```

* * *

ui.R:

```
library(shiny)
library(twitteR)

shinyUI(pageWithSidebar(
  headerPanel('FitnessTrack'),
  sidebarPanel(
    selectInput("subscriber", "Select Subscriber:", 
                choices = c("nutwition_log", "anotherAccount")),
    numericInput("obs", "Number of observations to view:", 10)
  ),
  mainPanel(
    tableOutput("view")
  )
)) 
```

...我收到以下错误：

```
Error in as.data.frame.default(X[[1L]], ...) : 
  cannot coerce class 'structure("status", package = "twitteR")' into a data.frame
Error in as.data.frame.default(X[[1L]], ...) : 
  cannot coerce class 'structure("status", package = "twitteR")' into a data.frame
Error in as.data.frame.default(X[[1L]], ...) : 
  cannot coerce class 'structure("status", package = "twitteR")' into a data.frame 
```

...我想要做的就是能够更改正在下载和修改推文的用户，然后将生成的数据框（...`datasetInput()`返回，加载到`output$view`）输出到`mainPanel()`. 我不知道为什么这不起作用。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T05:57:04.637

我想我明白了：[https ://github.com/rstudio/shiny/commit/0b469f09df7e2ca3bbdb2ddadc8473a8126a9431](https://github.com/rstudio/shiny/commit/0b469f09df7e2ca3bbdb2ddadc8473a8126a9431)

在经过正确测试并将其引入新的 Shiny 构建之前，您可以使用 devtools 直接从 GitHub 安装来测试它：

```
library(devtools)
install_github('shiny', 'rstudio') 
```

谢谢，很高兴把那个修好了！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T01:17:09.400

我不确定这是否是一个错误，但 Joe Cheng 和他的同事肯定会在这里发生一些奇怪的事情。想了解一下。它的工作原理是这样的：

服务器.R

```
library(shiny)
library(twitteR)
shinyServer(function(input, output) {

  datasetInput <- reactive(function() {
    tweets <- userTimeline(input$subscriber)
    tmp <- lapply(1:length(tweets),function(x) data.frame(
      text=tweets[[x]]$text,
      created=tweets[[x]]$created,
      screename=tweets[[x]]$getScreenName()))

    do.call(rbind,tmp)
  })

  output$view <- reactiveTable(function() {
    head(datasetInput(), n = input$obs)
  })

}) 
```

所以这不是 data.frames 的问题，而是与 twitteR 为引用类对象设置方法的方式有关`status`。通过访问器引用字段来运行完全相同的代码似乎运行得很好。

感觉就像“又一个 S4 / 参考类之谜”。

# .net - 大型 C# .Net 开发项目的 Visual Source Safe 与 GIT

> ID：13575357
> 
> 赞同：0
> 
> 时间：2012-11-27T00:11:00.723
> 
> 标签：.net, git, svn, version-control, visual-sourcesafe

我目前正在与印度的一家开发公司合作开发大型 C# .Net 基于云的应用程序。

我们有数百万行代码和 10 多名开发人员致力于该项目。

他们目前正在使用[Microsoft Visual SourceSafe](http://en.wikipedia.org/wiki/Microsoft_Visual_SourceSafe)进行我们的版本控制。

我和很多人谈过，他们都说使用 VSS 是一个坏主意，而且已经过时了。

普遍的共识是 GIT 或 Subversion 会是更好的选择。

在我让他们朝某个方向前进之前，我想从 StackOverflow 社区的专家那里获得一些反馈，因为我确信人们在这方面的经验比我多。

如果我们真的使用 GIT，他们学习起来会很复杂吗？因为我们还有其他重要目标，所以我绝对不想浪费很多时间进行转换。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:43:48.933

好吧， VSS 之后的**几乎任何其他**SCM 都会是更好的选择。我认为，您并没有将搜索区域限制在这两个（SVN|Git）SCM 中，而是以不紧不慢的方式并考虑到所有本地特定要求，做出您的选择。我可以添加到列表

*   塑料单片机
*   水银

请注意，所有选项都有其优点和缺点。回答你的问题

> 如果我们真的使用 GIT，他们学习起来会很复杂吗？

很明显：**是的，会的！**与任何其他迁移相比，这将是最复杂的方式，并且在以后使用的过程中

# c - C - 使用 sprintf 读取文件

> ID：13575359
> 
> 赞同：0
> 
> 时间：2012-11-27T00:11:07.807
> 
> 标签：c, file

我正在尝试读取多个文件。文件的格式类似于`YYYY-mm-dd-HH-MM.txt`，例如`2012-11-26-18-50.txt`

我有以下代码

```
char text_buffer[1000];
char file_buffer[256];
int year, month, day, hour, minute;
year = 2012; month = 11; day = 26; hour = 18; minute = 0;

sprintf(file_buffer, "%d-%d-%d-%d-%d.txt", year, month,day,hour,minute);
FILE *ptr_file;
ptr_file=fopen(file_buffer, "r");
if(ptr_file != NULL)
    printf("File opened %s for reading.\n", file_buffer);
else
    printf("Couldn't open %s.\n", file_buffer);

line_number = 0;
while(fgets(buffer,sizeof(buffer), ptr_file) != NULL){
    if(strcmp(buffer, "")==0)
       return 0;
    char *views = strok(buffer, ",");
...
} 
```

我假设这就是所需的所有信息。如果仍然不清楚我的问题出在哪里，我会发布所有这些。当我运行程序时。我得到了 `Filed opened...`和`Couldn't open...`。然后是分段错误。

有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:23:12.110

首先，您需要确保在无法打开文件时执行某些操作（可能返回错误代码）。尝试从 NULL FILE* 读取时会发生分段错误。

此外，您正在破坏内存，因为 file_buffer 是指针，而不是缓冲区。您需要将其初始化为某些东西。最后，您要确保关闭您打开的文件。

我还假设您在某处定义缓冲区。在您的代码示例中，我没有看到定义。也许您打算改用 text_buffer ？

如果您正在使用 LINUX 处理这些类型的内存损坏，我建议您使用两种工具。

1.  GDB，每次单步执行程序并检查变量。
2.  Valgrind，它将让您了解像这样的简单内存损坏。

这两个工具，一旦你熟练使用它们，就可以帮助消除大多数简单的编程错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:15:35.163

`file_buffer`从未初始化，它可以指向任何地方。你可能想要这样的东西：

```
char file_buffer[PATH_MAX+1]; 
```

代替

```
char *file_buffer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:15:50.827

您没有`file_buffer`在任何地方初始化变量。

您应该将其初始化为

```
char file_buffer[256]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T01:14:50.233

格式打印日期和时间，例如`%02d`，因为它们每个可能包含 1-2 位数字。

# translation - 谷歌翻译 - 如何从我的网站中删除烦人的标题和弹出文本框

> ID：13575370
> 
> 赞同：1
> 
> 时间：2012-11-27T00:12:36.010
> 
> 标签：translation, google-translate

所以我在我的网站上安装了谷歌翻译。但是当语言被翻译成另一种语言时，顶部会弹出一个烦人的标题，并且每次用户滚动任何文本时都会弹出一个烦人的文本框显示建议。如何删除这 2 个烦人的功能？提前感谢任何帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T20:24:56.523

右键单击您使用 Google 翻译的页面，然后左键单击“此框架”，然后左键单击“仅显示此框架”

# ruby-on-rails - 使用 Ruby on Rails 将 JSON 嵌入到 JavaScript 测试中

> ID：13575371
> 
> 赞同：1
> 
> 时间：2012-11-27T00:12:50.127
> 
> 标签：ruby-on-rails, angularjs, jasmine

我们目前在我们的 Ruby on Rails 应用程序中运行[AngularJS的](http://angularjs.org/)[Jasmine](http://pivotal.github.com/jasmine/)测试。有了这个，我们使用[VCR](https://github.com/myronmarston/vcr)生成带有假数据的 API JSON 文件。

是否可以将这些文件嵌入到我们的 JavaScript 单元测试中？

*   我们不希望对这些文件进行 Ajax 调用（性能）
*   我们尽量避免将其放入，`assets`因为它应该被排除在生产代码中。

我们当前的结构如下所示：

**规范/controllerSpec.js**

```
scope.user.handleUserLoaded({
  "is_logged_in": true,
  "preferred_name": "Christian"
});
expect(scope.user.isAuthenticated()).toBeTruthy(); 
```

**固定装置/fake_data/user.json**

```
{
  "is_logged_in": true,
  "preferred_name": "Christian"
} 
```

与其做这种重复，我们更愿意在 JavaScript 中包含某种类型的内容：

```
scope.user.handleUserLoaded(<% include "fixtures/fake_data/user.json" %>);
expect(scope.user.isAuthenticated()).toBeTruthy(); 
```

最好的方法是什么？
我们绝对可以移动文件、使用`.js.erb`文件或尝试不同的方法。

# file - CakePHP 与 Azure Blob

> ID：13575374
> 
> 赞同：2
> 
> 时间：2012-11-27T00:12:58.917
> 
> 标签：file, cakephp, azure, upload

我想知道是否有人遇到过关于如何使用 cakephp 2.* 将文件上传到 Azure 的好教程？即使有人能指出我正确的方向，我将不胜感激！！.... 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:28:58.363

CakePHP 本身并没有提供上传特定的代码。您可以为 Azure 服务实现所需的代码和 API。

Azure 正在使用[REST](http://en.wikipedia.org/wiki/REST) [http://msdn.microsoft.com/en-us/library/windowsazure/dd179355.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179355.aspx)

因此，对于通用文件上传教程和 RESTful 教程，也许更好看（谷歌）。还有一个[用于 Azure 的 php SDK](http://www.windowsazure.com/en-us/develop/php/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:10:00.373

使用任何语言的大多数快速开发框架包，您都将在包中获得基本功能，但是您需要编写或包含特定于您需要的组件，CakePHP 也是如此。要使用 CakePHP 访问 Azure Blob 存储，您可以通过从 Windows Azure PHP SDK 获取代码来创建一个数据源，然后在您的包中使用以满足您的需要。

关于 user1679844，使用带有 Azure Blob 存储的 cpanel 服务器的问题，我不确定可能是什么问题。一旦您将数据源构建为类，我认为您肯定可以使用相同的数据源。

我可以就如何将 PHP 库获取到本地 Azure Blob 存储提供一些指导，然后您可以使用源代码创建数据源并将其包含在您的框架中并发布以供其他人使用。

[您可以从此处](https://www.windowsazure.com/en-us/develop/php/common-tasks/download-php-sdk/)下载适用于 Windows Azure Blob 存储的 PHP SDK，以下链接提供了有关如何使用 PHP SDK 访问 Windows Azure Blob 的分步详细信息

*   [在 PHP 中访问 Azure Blob 存储](https://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/)

还有[另一个较旧的 PHP 代码库](http://www.windowsazure4e.org/learn/labs/lab2_azure_storage/lab2_1_azure_storage_blobs/#part2)可用于使用 PHP 访问 Azure 存储，您可以查看一下。

这是一个[适用于 Windows Azure 表的示例 PHP 数据源](http://bakery.cakephp.org/articles/Howard/2010/02/02/microsoft-windows-azure-tables-datasource)，您也可以查看它。如果您碰巧开始为 Azure Blob 创建数据源，我当然可以添加 soe 帮助。

# python - Python - 到 NodeTree 的字典

> ID：13575375
> 
> 赞同：1
> 
> 时间：2012-11-27T00:13:09.307
> 
> 标签：python, python-2.7

我请教你我有一个类 NodeTree。然后我有一个函数 create_T (d) 这个函数将代表树的字典 d 作为输入，并创建一个节点类型为 NodeTree 的树 你建议我做什么？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:23:44.170

你的信息很少，所以我做了一些假设。基本上我认为你需要知道从树的哪里开始。如果你选择一个随机点，那么你必须向上和向下工作。如果你能确定哪个是树的顶部，那么你只需要向下工作。我通过进行集合比较来计算树的顶部，以查看哪个节点不是任何其他节点的子节点。

```
import itertools

# NodeTree
class Node(object):
    def __init__(self, name):
        self.name = name
        self.children = []

    def add_child(self, child_node):
        self.children.append(child_node)

    def __repr__(self):
        if not self.children:
            return '<%s/>' % self.name
        else:
            children = ''.join([repr(child) for child in self.children])
            return '<%s>%s</%s>' % (self.name, children, self.name)

# create_T(d)
def create_tree(tree_dict):
    # find which node is the top of the tree (assume it is well-formed)
    all_leaves = set(itertools.chain(*tree_dict.values()))
    top_of_the_tree = set(tree_dict.keys()) - all_leaves

    def get_node(name):
        node = Node(name)
        for child_name in tree_dict[name]:
            node.add_child(get_node(child_name))
        return node
    return get_node(top_of_the_tree.pop())

print create_tree({'a': ['b', 'c'],
                   'b': ['d'],
                   'c': ['e'],
                   'd': [],
                   'e': [],
                   'f': ['a']}) 
```

给予：

> ```
>  <f><a><b><d/></b><c><e/></c></a></f> 
> ```

# jquery - 如何在 datetimepicker 上设置“默认”日期（日期突出显示）？

> ID：13575377
> 
> 赞同：1
> 
> 时间：2012-11-27T00:13:38.160
> 
> 标签：jquery, jquery-ui-datepicker, datetimepicker, timepicker

Per [Trent Richardson 的](http://trentrichardson.com/examples/timepicker/)datetimepicker...如何在日历上设置“默认”日期？

以下适用于今天的设置，就好像它被选中/单击一样：

```
$( ".selector" ).datepicker( "setDate", "11/12/2012" ); 
```

...但我不知道如何设置默认日期（显示日历时带有红色圆圈的浅蓝色 - 我真正想要的是设置为 12 日的日期）？

![在此处输入图像描述](../Images/71b95aaf4b61874933b2ed91fabe92ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:24:13.750

您可以通过设置输入字段的值来设置默认日期。

```
​$("#picker").datepicker().val( "12/11/2012" );​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

不幸的是，我认为您所指的是今天以蓝色突出显示的日期。我怀疑这是可定制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:42:09.460

设法根据默认和模式颜色将其组合在一起。

```
.ui-datepicker .ui-state-highlight {
   border: 1px solid #d3d3d3; 
   background: #e6e6e6;
   color: #363636;}
.ui-datepicker .ui-state-active {
   border: 1px solid #aaaaaa; 
   background: #518bdf url(images/ui-bg_glass_65_518bdf_1x400.png) 50% 50% repeat-x; 
   font-weight: normal; 
   color: #fff; 
   outline: none;}

$.datepicker._gotoToday = function (id) {
var inst = this._getInst($(id)[0]),
$dp = inst.dpDiv;
this._base_gotoToday(id);
var tp_inst = this._get(inst, 'timepicker');
now = new Date();
var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
this._setTime(inst, now_utc);
$('.datetime:focus').datepicker('setDate', now_utc);
// $('.ui-datepicker-today', $dp).click(); 
```

};

# sql - 将带有 XML 的 SQL 查询作为单个扁平行返回

> ID：13575379
> 
> 赞同：1
> 
> 时间：2012-11-27T00:14:32.413
> 
> 标签：sql, xml, sql-server-2008-r2

SQL Server 2008R2 或 2012

是否可以将 XML 节点查询作为单行而不是多行返回，其中每个返回的项目都是新列而不是行？

例如，XML 字段包含以下 XML 结构：

```
<MetaFieldData>
  <MetaField>
    <Name>Volume</Name>
    <Value>Large</Value>
  </MetaField>
  <MetaField>
    <Name>Code</Name>
    <Value>3DP</Value>
  </MetaField>
  <MetaField>
    <Name>Photo</Name>
    <Value>foo.png</Value>
  </MetaField>
  <MetaField>
    <Name>CommonName</Name>
    <Value>Foo Bar</Value>
  </MetaField>
</MetaFieldData> 
```

使用以下 SQL：

```
select 
    m.value('Name[1]', 'varchar(100)') as Name,
    m.value('Value[1]', 'varchar(max)') as Value
from MyTable 
cross apply MetaFieldData.nodes('/MetaFieldData/MetaField') as Meta(m)
where Id = 1 
```

结果集将返回：

```
Name        Value
--------------------
Volume      Large
Code        3DP
Photo       foo.png
CommonName  Foo Bar 
```

您将如何将结果集返回为：

```
Volume     Code     Photo     CommonName
----------------------------------------------
Large      3DP      foo.png   Foo Bar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T11:06:58.450

尝试这个

```
SELECT Volume,Code,Photo,CommonName
FROM 
(
    SELECT 
        m.value('Name[1]', 'varchar(100)') as Name,
        m.value('Value[1]', 'varchar(max)') as Value
    FROM MyTable 
    CROSS APPLY MetaFieldData.nodes('/MetaFieldData/MetaField') as Meta(m)
    WHERE Id = 1
) P
PIVOT
(
    MAX(Value) FOR Name IN (Volume,Code,Photo,CommonName)
) pvt 
```

# c++ - 严格的弱序混淆

> ID：13575380
> 
> 赞同：1
> 
> 时间：2012-11-27T00:14:48.067
> 
> 标签：c++, operator-overloading, set, strict-weak-ordering

我对严格的弱排序以及在定义 operator< 时如何使用它感到困惑。我有几个结构：

```
struct Plane
{
    std::string name;

    int xrudder;
    int yrudder;

    int wingwidgets;

    bool hasLegacyEngine;
};

struct Airport
{
    bool securityCheck;
    unsigned __int64 capacity;

    std::vector<Plane> planes;
}; 
```

我想创建一个`std::set`机场。我需要定义 operator< 使用严格的弱排序，但我不知道这意味着什么和/或如何去做。

```
struct cmpless
{
bool operator()(const Airport& left, const Airport& right)
    {
        //?
    }
}; 

std::set<Airport, cmpless> airportSet; 
```

**一个机场“少于”另一个机场是没有意义的。**仅当机场根据其统计数据相等时才有意义。

我如何确定我对 operator< 的定义将遵循严格的弱排序？`operator<`在这种情况下，我如何开始考虑定义？

如果可能的话，一个带有解释的例子会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T00:42:06.557

`Airport`如果一个人出现在另一个人之前“没有意义”，`Airport`那么使用`std::set<Airport>`也没有意义。此容器利用订单金额元素来定位操作中的对象（容器的大小在`O(log(n))`哪里）。`n`如果您只能通过身份识别对象，那么您可以实现的最佳复杂度是`O(n)`. 您可以使用`std::find()`or`std::find_if()`和其中一个序列容器的组合，例如`std::vector<Airport>`或`std::deque<Airport>`。

由于您不需要根据 定义顺序，因此将s 放入某种顺序`operator<()`可能是合理的，以便将它们定位在 a中，这是通过使用与 . 不同的比较函数对象来完成的。但是，您当前在对象中拥有的属性看起来并不像合适的键。事实上，它们看起来都好像是可变的，也就是说，你可能不想要 a ，因为你不能修改 an 中的元素（好吧，至少，你不应该；是的，我意识到你可以耍花招，但这势必会破坏元素的顺序）。`Airport``std::set<Airport>``std::less<Airport>``Airport``std::set<Airport>``std::set<T>``mutable`

基于此，我建议使用 a `std::map<std:string, Airport>`: the`std::string`来识别机场，例如，使用`"JFK"`纽约肯尼迪机场或`"LHR"`伦敦希思罗机场等机场代码。方便的是，已经在字符串上定义了严格的弱顺序。

也就是说，要在一组 objects 上定义[严格的弱顺序](http://en.wikipedia.org/wiki/Strict_weak_ordering)`O`，您需要一个二元关系`r(x, y)`，使得以下条件适用于 elements `x`、`y`和`z`from `O`：

*   反身的：`r(x, x) == false`
*   不对称：`r(x, y) == true`暗示`r(y, x) == false`
*   及物的： `r(x, y) == true`并`r(y, z) == true`暗示`r(x, z) == true`
*   不可比性: `r(x, y) == false`and `r(y, x) == false`and and `r(y, z) == false`and`r(z, y) == false`暗示`r(x, z) == false`and`r(z, x) == false`

前三个应该足够简单。最后一个起初有点奇怪，但实际上也没有那么难：基本思想是关系并不完全对元素进行排序，而是将它们分组到等价的类中。如果您认为关系`r`“小于”，它只是说如果既不`x`小于`y`也不`y`小于`x`，则`x`和`y`是等价的。无与伦比的元素只是等价的。

标准容器以严格的弱顺序工作，但例如`std::set<T>`只`std::map<K, V>`保留一个版本的等效键。很好，这已经足够了，但是通常只使用一个严格的弱顺序的总顺序更简单，其中对于每对元素`x`和`y`一个`r(x, y) == true`或`r(y, x) == true`（但是，由于不对称，不是两个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T19:04:01.000

[在musingstudio 博客](https://musingstudio.com/2013/02/25/implementing-operator-for-strict-weak-ordering/)上找到了一个不错的解决方案，并认为我在这里分享它以供下一个需要的人使用（即使 Dietmar 可能是正确的，地图不合适）：

```
bool operator <(const T& rhs) const
{
  if (a < rhs.a)
    return true;
  else if (rhs.a < a)
    return false;

  if (b < rhs.b)
    return true;
  else if (rhs.b < b)
    return false;

  // repeat for all child elements c, d, e etc
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:23:17.343

`<`如果每个成员都定义了，您可以执行类似于字典顺序的操作：

```
 struct cmpless
    {
    bool operator()(const Airport& left, const Airport& right)
        {
            return
              left.securityCheck < right.securityCheck
              || ((left.securityCheck == right.securityCheck
                   && left.capacity < right.capacity)
                  || (left.capacity == right.capacity
                      && left.planes < right.planes));
        }
    }; 
```

# matlab - Matlab 返回向量

> ID：13575381
> 
> 赞同：1
> 
> 时间：2012-11-27T00:14:48.533
> 
> 标签：matlab, octave

对不起初学者的matlab问题......

```
function [ A B C ] = crunch(i)
  A = i^2;
  B = 2*A;
  C = A+B;
end;

vals = zeros(5,3);
  for i=1:5
    vals(i,:) = crunch(i);
  endfor;
disp(vals); 
```

这不是我预期的结果。

```
vals =
 1 1 1
 4 4 4
 9 9 9
 ..... etc 
```

如果我改为明确地将 A、B 和 C 放在一个行向量中并返回它，那么一切都很好。

```
function retval = crunch(i)
  A = i^2;
  B = 2*A;
  C = A+B;
  retval = [ A B C ];
end;

ans = 
  1    2    3
  4    8   12
  9   18   27
 16   32   48
 25   50   75 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:45:34.437

MATLAB 通常不愿意给您多个返回值，除非您明确要求它们。所以在第一个版本中，当你这样做时：

```
vals(i,:) = crunch(i); 
```

MATLAB 所做的只是从 中获取第一个返回值`crunch(i)`，然后将其广播到 中的所有元素`vals(i,:)`。就像这样做：

```
return_val = crunch(i);
vals(i,:) = return_val; 
```

如果您明确要求 MATLAB 提供多个返回值，您将获得所需的行为。正如@igon 所说，此版本将修复该行为：

```
[vals(i,1), vals(i,2), vals(i,3)] = crunch(i); 
```

或者，我认为如果`vals`是单元格数组，`vals{i, :} = crunch(i);`也可以，但在这种情况下这没有意义——在您的代码中使用常规（不是单元格）数组似乎是正确的方法。

# php - smarty 获取数组元素，如果键以 * 结尾

> ID：13575384
> 
> 赞同：0
> 
> 时间：2012-11-27T00:14:51.150
> 
> 标签：php, smarty

如果键以“_description_name”结尾，smarty 有没有办法获取数组元素？

例如，在 jquery 中执行此操作将是： [array$="_description_name"]

例子：

```
[index] => Array
    (
        [language_id] => Array
            (
                [1] => Array
                    (
                        [language_id] => Array
                            (
                                [name] => language_id
                                [value] => 1
                                [fvalue] => 1
                            )

                        [extra_description_name] => Array
                            (
                                [name] => extra_description_name
                                [value] => Paint Colours
                            ) 
```

我想得到文本“Paint Colours”，没有“extra_”。因此，如果将其更改为`product_description_name`.

我看到这分为两部分：

```
1\. {assign var="name" value=$index.language_id[1]|endsWith:'_description_name'}
2\. {if $name.value}{$name.value}{/if} 
```

但是`endWith`不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:10:42.643

你或许可以试试`{...|preg_match:'/_description_name$/'}`

# ruby - 解析数组元素并添加到哈希

> ID：13575385
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:14:51.837
> 
> 标签：ruby

在 Ruby 中，我有一个数组元素，比如说

```
arr[1] = "key1=vale1|key2=value2|key3=value3". 
```

现在我有另一个包含 hstore 数据的数组，例如

```
h_arr=[hkey1=>hvalue1, hkey2=>hvalue2] 
```

我怎样才能添加`arr[1]`元素`h_arr`并能够得到这样的结果

```
h_arr=[hkey1=>hvalue1, hkey2=>hvalue2, key1=>value1, key2 => value2, key3 => value3] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:31:35.230

```
h_arr.merge!(Hash[*arr[1].split(/[=|]/)]) 
```

请注意，我假设它`h_arr`实际上被定义为像下面这样的哈希（与您的语法相反，它计算为给定哈希的单个项目的数组）：

```
h_arr = {hkey1=>hvalue1, hkey2=>hvalue2} 
```

如果您的语法确实正确，则合并到`h_arr[0]`而不是`h_arr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:25:03.907

你可以试试这个：

```
str = "key1=vale1|key2=value2|key3=value3"
h_arr = {'hkey1'=>'hvalue1', 'hkey2'=>'hvalue2'}

h1 = str.split('|').inject({}) {|f,c| f.update Hash[*c.split('=')] }

final = h_arr.merge(h1)

p final

#=> {"hkey1"=>"hvalue1", "hkey2"=>"hvalue2", "key1"=>"vale1", "key2"=>"value2", "key3"=>"value3"} 
```

请注意，这种结构实际上是哈希，而不是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:30:30.253

我建议使用`yaml`来序列化/反序列化您的数据。尝试这样的事情：

```
require "yaml"

# starting hash
hash = {:key1 => "value1", :key2 => "value2", :key3 => "value3"}

# create serial from hash
serial = hash.to_yaml

# show serial
puts serial
#=> --- 
#=> :key3: value3
#=> :key1: value1
#=> :key2: value2

# load hash from serialized string
new_hash = YAML.load(serial)

# show new hash
puts new_hash.inspect
#=> {:key3=>"value3", :key1=>"value1", :key2=>"value2"} 
```

在 Ruby 中拥有常规散列对象后，很容易在它们上使用`Hash#merge`它们来组合它们。

```
# voilà
hash1.merge(hash2) 
```

# ruby-on-rails - Rails 3.2 并按顺序处理外键

> ID：13575389
> 
> 赞同：0
> 
> 时间：2012-11-27T00:15:02.760
> 
> 标签：ruby-on-rails, activerecord

`A`所以我有一个表（为简单起见，我们称之为），其中包含 4 个整数列（ `slot1`, `slot2`, `slot3`, `slot4`）。这 4 个对应于不同表中的 ID（`B`与示例保持一致）。

我需要从 中的相应行中提取数据`B`，但在这里我遇到了问题。我正在尝试使用`where()`如下方法获取 4 个插槽：

```
@a_item = A.where("publish_at <= ?", DateTime.now).last
@slots = B.where(:id => [@a_item.slot1, @a_item.slot2, @a_item.slot3, @a_item.slot4]) if @a_item != nil 
```

但是，当然，插槽的顺序在我返回的内容中不会保持不变，它是按`B`对象的 ID 排序的。

因此，这样做的一种肮脏方式是单独获取所有 4 个项目，但在此之前，是否有更好的方法来执行此操作或可能构建关系？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:24:48.210

```
@a_item = A.order(:published_at).last
ids = [@a_item.slot1, @a_item.slot2, @a_item.slot3, @a_item.slot4] unless @a_item.nil?
@slots = B.find(ids) unless ids.nil?
results = ids.map { |id| @slots.detect { |slot| slot.id == id } } 
```

我会让你添加其余的弹性检查和故障保护，以防在你期望的地方没有返回任何东西。

# c# - 无法弄清楚如何将类字符串转换为数据网格

> ID：13575397
> 
> 赞同：1
> 
> 时间：2012-11-27T00:15:38.817
> 
> 标签：c#, list, datagrid, datagridview

我正在尝试获取“名字、姓氏、关联 ID 等”。在我的表单上的数据网格中显示。我是一个新的程序员/脚本小子，如果这是一个愚蠢的问题，我很抱歉。我只是不知道如何调用 associateList.firstName 到可读的数据网格条目。

如果可能，我希望数据网格使用 associateList 中的每个关联。正在考虑以某种方式在索引参考上建立一个基本计数器。

关于我如何编写代码的其他输入也很受欢迎。我是新手，是自学的。

**简而言之：**我希望员工在数据网格中显示，使用列来分隔信息。

数据网格名称是 windows 窗体上的 dataGridAssociates。

```
namespace Associate_Tracker
{
    public partial class Form1 : Form
    {
        public class Associate
        {
            //No idea wtf {get; set;} does but I read that I need it?

            public string firstName { get; set; }
            public string lastName { get; set; }
            public string assocRFID { get; set; }
            public int assocID { get; set; }
            public bool canDoDiverts { get; set; }
            public bool canDoMHE { get; set; }
            public bool canDoLoading { get; set; }
        }

        public Form1()
        {
            InitializeComponent();
        }

        private void buttonAddAssoc_Click(object sender, EventArgs e)
        {
            #region Datagrid Creation -- Name: dt
            DataTable dt = new DataTable();
            dt.Columns.Add("First Name");
            dt.Columns.Add("Last Name");
            dt.Columns.Add("RFID");
            dt.Columns.Add("Associate ID#");
            dt.Columns.Add("Diverts");
            dt.Columns.Add("MHE");
            dt.Columns.Add("Loading");
            dataGridAssociates.DataSource = dt;
            #endregion

            //First & Last name splitter
            string allValue = textBoxAssocName.Text;
            string firstNameTemp = String.Empty;
            string lastNameTemp = String.Empty;
            int getIndexOfSpace = allValue.IndexOf(' ');

            for (int i = 0; i < allValue.Length; i++)
            {
                if (i < getIndexOfSpace)
                {
                    firstNameTemp += allValue[i];
                }
                else if (i > getIndexOfSpace)
                {
                    lastNameTemp += allValue[i];
                }
            }
            firstNameTemp = firstNameTemp.Trim(); // To remove empty spaces
            lastNameTemp = lastNameTemp.Trim();   // To Remove Empty spaces
            //End splitter

            int assocIDTemp;    //TryParse succeeds
            bool assocIDparse;  //Bool for TryParse

            //Try Parsing Associate ID to an integer
            //Includes catch -> return
            assocIDparse = int.TryParse(textBoxAssocID.Text, out assocIDTemp);
            if (assocIDparse == false)
            {
                MessageBox.Show("Please use only numbers in the AssocID input");
                return;
            }
            var associateList = new List<Associate>();
            associateList.Add(new Associate
            {
                firstName = firstNameTemp,
                lastName = lastNameTemp,
                assocID = assocIDTemp,
                canDoDiverts = checkBoxDiverts.Checked,
                canDoMHE = checkBoxMHE.Checked,
                canDoLoading = checkBoxLoading.Checked,
            });
            textBoxAssocID.Clear();
            textBoxAssocName.Clear();
            textBoxRFID.Clear();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:07:27.010

我不会说这是执行此操作的最优雅的方式，但使用 WinForms 和 DataGridView 控件，您可以使用 BindingSource 控件执行此操作。我在下面添加了一个带有修改后的代码的示例，以实现您想要做的事情。

这里需要注意的关键点如下：

*   请注意在顶部创建的 BindingSource 实例。这是我用来在构造函数中绑定到 DataGridView 的元素
*   在构造函数中，我将关联列表的实例附加到 BindingSource 的 DataSource
*   再次在构造函数中，我将 BindingSource 附加到 DataGridView 控件的 DataSource。
*   最后在按钮事件的底部，我首先在 BindingSource 中使用 AddNew 创建 Associate 的实例（这将在构造函数中的 Asociate 列表实例中自动创建）并为其分配适当的值，然后填充到 DataGridView直接地。

有什么问题告诉我。

```
 readonly BindingSource _bindingSource = new BindingSource();

    public Form1()
    {
        InitializeComponent();
        _bindingSource.DataSource = new List<Associate>();
        dataGridAssociates.DataSource = _bindingSource;
    }

    public class Associate
    {
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string assocRFID { get; set; }
        public int assocID { get; set; }
        public bool canDoDiverts { get; set; }
        public bool canDoMHE { get; set; }
        public bool canDoLoading { get; set; }
    }

    private void buttonAddAssoc_Click(object sender, EventArgs e)
    {
        //First & Last name splitter
        string allValue = textBoxAssocName.Text;
        string firstNameTemp = String.Empty;
        string lastNameTemp = String.Empty;
        int getIndexOfSpace = allValue.IndexOf(' ');

        for (int i = 0; i < allValue.Length; i++)
        {
            if (i < getIndexOfSpace)
            {
                firstNameTemp += allValue[i];
            }
            else if (i > getIndexOfSpace)
            {
                lastNameTemp += allValue[i];
            }
        }
        firstNameTemp = firstNameTemp.Trim(); // To remove empty spaces
        lastNameTemp = lastNameTemp.Trim(); // To Remove Empty spaces
        //End splitter

        int assocIDTemp; //TryParse succeeds
        bool assocIDparse; //Bool for TryParse

        //Try Parsing Associate ID to an integer
        //Includes catch -> return
        assocIDparse = int.TryParse(textBoxAssocID.Text, out assocIDTemp);
        if (assocIDparse == false)
        {
            MessageBox.Show("Please use only numbers in the AssocID input");
            return;
        }

        var obj = (Associate) _bindingSource.AddNew();
        if (obj != null)
        {
            obj.firstName = firstNameTemp;
            obj.lastName = lastNameTemp;
            obj.assocID = assocIDTemp;
            obj.canDoDiverts = checkBoxDiverts.Checked;
            obj.canDoMHE = checkBoxMHE.Checked;
            obj.canDoLoading = checkBoxLoading.Checked;
        }

        textBoxAssocID.Clear();
        textBoxAssocName.Clear();
        textBoxRFID.Clear();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:26:37.413

```
DataTable dt=new DataTable(); 
dt.clear(); 

dt.Columns.Add("First Name");
dt.Columns.Add("Last Name");
dt.Columns.Add("RFID");
dt.Columns.Add("Associate ID#");
dt.Columns.Add("Diverts");
dt.Columns.Add("MHE");
dt.Columns.Add("Loading")

DataRow yourDataRow = dt.NewDataRow();
yourDataRow["First Name"] = //assign the value for FirstName here;
yourDataRow["Last Name"] = //assing the value for LastName here; 
dt.Rows.Add(yourDataRow); 
```

如果您要在循环中执行此操作.. 这应该给您一个很好的例子来说明从哪里开始..

***不要忘记，在将 DataSource 分配给 DataGrid 之后，您将其绑定，如下所示 ***

```
GridView1.DataSource=dt;
GridView1.DataBind(); 
```

# iphone - 使用在另一个块中声明的 UIImageView 变量

> ID：13575400
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:15:48.437
> 
> 标签：iphone, objective-c

我正在尝试回忆我`(void)viewDidLoad`在另一个块中加载的图像，`(void)moveObject`. 但是，因为我正在处理两个不同的块，我显然无法回忆起图像。有什么方法我应该重新排列代码以使其工作？

```
- (void)viewDidLoad {
    CGRect myImageRect = CGRectMake(200.0f, 350.0f, 52.0f, 100.0f);
    UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];

    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(moveObject) userInfo:nil repeats:YES];
}

-(void) moveObject { 
    myImage.center = CGPointMake(myImage.center.x, myImage.center.y +1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:20:27.930

为 myImage 创建一个实例变量，或者如果您还需要 getter 和 setter，则创建一个属性。

以下是仅使用实例变量的方法：

.m

```
@implementation MyClass {

    UIImageView *_myImage;

}

- (void)viewDidLoad
{
    CGRect myImageRect = CGRectMake(200.0f, 350.0f, 52.0f, 100.0f);
    UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];
    _myImage = myImage;
}

-(void) moveObject { 
    _myImage.center = CGPointMake(_myImage.center.x, _myImage.center.y +1); 
```

# google-analytics - 谷歌分析/电子商务/高级跟踪

> ID：13575402
> 
> 赞同：0
> 
> 时间：2012-11-27T00:16:00.657
> 
> 标签：google-analytics, e-commerce

在我的商店里，我有不同的区域和页面来推送产品：

*   主页
    *   块折扣
    *   屏蔽特色产品
*   产品页面
    *   屏蔽相关产品
    *   阻止您可能还喜欢
*   带有产品列表的类别页面

我想知道从哪个页面或区域，产品已售出并获取如下数据：

## 区域-----------产品浏览次数（或点击次数）---------销售次数

屏蔽精选首页---------------------------1000-------- -----------------10

屏蔽相关产品（产品页面）-------1000------------------------------------ -12

## 主页中功能块的详细信息：

## 名称-----------产品浏览次数（或点击次数）---------销售次数

产品 1----------------------------------------450-------- -------------------------------------------------------8

产品 2--------------------------330---------- -------------------------------------------------------2

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:24:32.377

如果您使用的是 Magento 之类的产品，这将很容易。但是，您可以确认哪些页面访问已转换为销售的唯一方法将有所不同。看看[https://www.google.com/analytics/features/conversion-suite.html](https://www.google.com/analytics/features/conversion-suite.html)看看这是否满足您的需求。如果只是按地理位置划分的访问者，则有很多选择，但要跟踪转化，您必须合并更多。

# iphone - 更改应用名称会更改应用的链接？

> ID：13575404
> 
> 赞同：1
> 
> 时间：2012-11-27T00:16:09.823
> 
> 标签：iphone, ios, app-store

我在应用商店有一个应用程序，我想通过更新更改它的名称，如果我更改应用程序的名称，应用程序的链接是否会更改？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:24:30.553

只要应用 ID 不变。答案是否定的，您的应用链接通过其数字 ID 而非名称来引用您的应用。希望有帮助。阿德里安

编辑

应用程序的名称可以在您的应用程序的info.plist 中更改，并且您在名称没有更改后看到的id 号。只需转到应用程序的 info.plist 并更改捆绑包名称即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:27:36.730

不，如果您只更改名称并将捆绑 ID 保留为旧形式。当您更改捆绑 ID 时，您需要在应用商店中创建新应用。

* * *

编辑

默认情况下，所有名称都来自 PRODUCT_NAME：

![在此处输入图像描述](../Images/616af976b7b90ef4d20ceb7708c23e28.png)

您需要从那里删除变量并手动输入名称（并保持捆绑 ID 不变）。

# c++ - C++ 从这里用 std::set 实例化错误

> ID：13575405
> 
> 赞同：0
> 
> 时间：2012-11-27T00:16:14.807
> 
> 标签：c++, instantiation, stdset

我发现了一堆关于“从这里实例化”问题的线程。他们似乎都是忘记了默认构造函数的人。我认为我的问题是不同的（但是我是 C++ 新手，它可能对同一个问题略有不同，我只是不知道如何实现解决方案）。

我正在尝试插入一个集合，显然它正在从那里实例化。它正在引发错误。

```
class Node{
public:
bool operator <(const Node& other){
    return id < other.id;
}
class Graph {
public:
    int poner;
    map<string, Node> nodeMap;
    set<Node> reachables;

    void DepthFirstSearch(Node node){
        reachables.clear(); //fine at this point
        poner = 0;
        DFS(node);
    }

    private:
        void DFS(Node node){
            reachables.insert(node); //instantiated from here
        }

    };

Node.h:131:25: instantiated from here
c:\..... errir: passing 'const Node' as 'this' argument of 'bool Node::operator<(const Node&)' discards qualifiers [-fpermissive] 
```

任何帮助总是受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:11:54.387

某处试图将 a`const Node`与 a进行比较`const Node`。由于您`operator<`的未标记`const`，因此失败。

```
operator<(const Node& other) const {}
                             ^^^^^ 
```

标准库期望比较是合乎逻辑`const`的。如果他们真的不能`const`，使用`mutable`隐藏操作员正在做突变，但要确保这从外面真的不可见。

关于错误信息：`instantiated from here`真的只是意味着这段代码负责实例化发生错误的模板。这不是真正的错误，而是实例化回溯的一部分。*真正的*错误通常（在 gcc 中）包含在单词 之后`error`，听起来很明显。

# python - TypeError：“int”对象在方程式中不可下标

> ID：13575411
> 
> 赞同：0
> 
> 时间：2012-11-27T00:16:38.873
> 
> 标签：python, typeerror

这是我的第四个 python 脚本，所以请耐心等待我的新手......我正在编写一个脚本来告诉某个日期的星期几。除了一个错误，一切都运行良好。我对出了什么问题有一个模糊的想法，但不太确定：

> TypeError：“int”对象不可下标

```
#!/usr/bin/python
import sys, string

# Call example:  day_of_week(2,10,1988); February 10, 1988
def day_of_week(month, date, year):
    # January
    if month == 1: m = 11
    # February
    elif month == 2: m = 12
    # March
    elif month == 3: m = 1
    # April
    elif month == 4: m = 2
    # May
    elif month == 5: m = 3
    # June
    elif month == 6: m = 4
    # July
    elif month == 7: m = 5
    # August
    elif month == 8: m = 6
    # September
    elif month == 9: m = 7
    # October
    elif month == 10: m = 8
    # November
    elif month == 11: m = 9
    # December
    elif month == 12: m = 10

    # Calculate the day of the week
    dow = (date + ((13 * m-1)/5) + year[2:] + (year[2:]/4) + (year[:2]/4) - 2 * year[:2]) % 7)

    # Formatting!
    if dow == 0: return "Sunday"
    elif dow == 1: return "Monday"
    elif dow == 2: return "Tuesday"
    elif dow == 3: return "Wednesday"
    elif dow == 4: return "Thursday"
    elif dow == 5: return "Friday"
    elif dow == 6: return "Saturday"
    else: return "Error!"

try:
    m = int(raw_input("What month were you born in (1-12)?  "))
    if not 1 <= m <= 12: raise Exception("There are no months with a number higher than 12!")
    d = int(raw_input("On what date were you born on?  "))
    y = int(raw_input("What year were you born in?  "))
    print("\nYou were born on a %s!" % day_of_week(m,d,y))
except ValueError:
    print("You need to enter a number!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:20:58.150

在这一行：

```
dow = (date + ((13 * m-1)/5) + year[2:] + (year[2:]/4) + (year[:2]/4) - 2 * year[:2]) % 7) 
```

您正在使用`year`（一个整数）并试图从中返回一个切片。如错误所示，`int`对象不允许您这样做。为了完成您想要的，您需要转换`year`为字符串。

然而，更简单的解决方案可能是使用模块的内置功能`datetime`来计算星期几：

```
In [1]: import datetime

In [2]: my_date = datetime.date(2012, 11, 26)

In [3]: my_date.weekday()
Out[3]: 0 
```

这使用星期一作为开始日期 (0)。为了与您当前的代码保持一致，您可以使用`isoweekday()`，其中 Monday = 1：

```
In [11]: import datetime

In [12]: my_date = datetime.date(2012, 11, 26)

In [13]: my_date.isoweekday()
Out[13]: 1 
```

然后，您可以使用上面@JonClement 的简洁片段返回当天的字符串：

```
In [14]: '{0:%A}'.format(my_date)
Out[14]: 'Monday' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:28:28.977

不要将您的 int 转换为字符串；使用算术：

```
century = year / 100
lasttwo = year % 100
dow = (date + ((13 * m-1)/5) + lasttwo + (lasttwo/4) + (century/4) - 2 * century) % 7) 
```

而且因为我身体上无法抵抗这样的挑战，所以我试图让其余的代码更加 Pythonic：

```
#!/usr/bin/python

"""Calculate the day of the week of dates"""

def day_of_week(month, day, year):
    """Return the name of the weekday of the given date

    >>> day_of_week(1, 1, 1970)
    'Friday'
    >>> day_of_week(11, 26, 2012)
    'Monday'
    """
    moff = (month + 9) % 12 + 1

    # Calculate the day of the week
    century = year / 100
    lasttwo = year % 100
    dow = (day + (13 * moff - 1) / 5 + lasttwo + lasttwo / 4 + century / 4
        - 2 * century) % 7

    # Formatting!
    return ("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday",
        "Saturday")[dow]

def main():
    """Test the program, then run it interactively"""
    import doctest
    testresult = doctest.testmod()
    if testresult.failed:
        import sys
        sys.exit(1)
    try:
        month = int(raw_input("What month were you born in (1-12)?  "))
        if not 1 <= month <= 12:
            raise Exception("Month must be between 1 and 12!")
        day = int(raw_input("On what date were you born on?  "))
        year = int(raw_input("What year were you born in?  "))
        print("\nYou were born on a %s!" % day_of_week(month, day, year))
    except ValueError:
        print("You need to enter a number!")

if __name__ == '__main__':
    main() 
```

请注意，实际逻辑与您的版本相同。它只是使用更简单的代码。我认为您的最终目标更多是关于学习 Python，而不是实际执行此计算。如果我错了，请从头开始以上所有内容并使用`datetime`更简单的模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T00:21:26.137

您必须先将`int`其转换为`string`第一个，[`str()`](http://docs.python.org/2/library/functions.html#str)然后才能对其进行切片。

# joomla2.5 - Virtuemart 2 / Joomla 2.5 产品详细信息链接到白页（错误）

> ID：13575412
> 
> 赞同：3
> 
> 时间：2012-11-27T00:16:40.417
> 
> 标签：joomla2.5, virtuemart

单击时，我网站上的所有产品详细信息页面都返回空白页面。在过去的几个月里，直到现在，一切都运行良好。我不相信我做了任何真正关键的事情来破坏它。[单击页面http://lge-ctsmotorsports.com/catalog/apparel-accessories](http://lge-ctsmotorsports.com/catalog/apparel-accessories)中的任何“产品详细信息”链接，您将看到错误。不幸的是，这是一个实时站点，因此非常感谢任何帮助。

我将补充一点，我启用了错误调试并编辑了我的 configuration.php 文件以显示错误，但我无法显示任何错误。我还尝试禁用那些特定页面上的插件，但似乎不会改变结果。

更新：我能够从 GoDaddy 看到一些错误日志，上面写着：[Mon Nov 26 22:13:08 2012] [error] [client 66.249.75.70] 文件不存在：/var/chroot/home/content/40 /9930540/html/product_detail.asp 和 [Tue Nov 27 05:17:55 2012] [error] [client 76.94.24.49] 文件不存在：/var/chroot/home/content/40/9930540/html/catalog

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T12:36:54.020

您在这里没有提供足够的信息。

来自 GoDaddy 的错误听起来像是您的主机一直在玩弄文件权限，所以从那里开始。确保文件是 644 和文件夹 755。也可能是红鲱鱼。

接下来，您可以尝试将 Firebug 安装到 Firefox 或 Chrome 或 Web 开发工具中。在 Firebug 中，有一个“控制台”选项卡...这将为您提供错误的详细信息。

空白屏幕通常表明 JavaScript 错误或可能无法访问？

希望对您有所帮助。

# html - 不明白为什么我的映射点不会显示

> ID：13575419
> 
> 赞同：3
> 
> 时间：2012-11-27T00:17:56.297
> 
> 标签：html, image, google-maps, marker, points

我正在尝试在我的谷歌地图 api 上使用叠加层显示一组停车图标，但由于某种原因无法使其正常工作。

[我在这里](http://jsfiddle.net/caseymmiller/VuUKP/)为我的 html 创建了一个 js fiddle 。这是它的开头：

```
 function setMarkers(map, locations) {

      var image = new google.maps.MarkerImage('parkingIcon.png');
  }; 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:38:03.917

好的，试试这段代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html {
        height: 100%
      }
      body {
        height: 100%;
        margin: 0;
        padding: 0
      }
      #map_canvas {
        height: 100%
      }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoiYR3lgzcF8CxuOwe7SYsJAPjZQXOhQQ&sensor=false"></script>
    <script type="text/javascript">
      var line;
      var map;
      var loc;
      var locations = [];
      var image = new google.maps.MarkerImage('parkingIcon.png');

      function initialize() {
        var raleigh = new google.maps.LatLng(35.77425, -78.639248);
        var mapOptions = {
          zoom : 17,
          minZoom : 17,
          center : raleigh,
          mapTypeId : google.maps.MapTypeId.HYBRID
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        var cityPlaza;

        /*var RLINELayer = new google.maps.KmlLayer('http://caseymmiller.com/j586/MapsTest/RLINE.kml');
         RLINELayer.setMap(map);*/

        var plazaCoords = [
          new google.maps.LatLng(35.773893, -78.63854),
          new google.maps.LatLng(35.772944, -78.638594),
          new google.maps.LatLng(35.772962, -78.639345),
          new google.maps.LatLng(35.773884, -78.63928)
        ];

        cityPlaza = new google.maps.Polygon({
          paths : plazaCoords,
          strokeColor : "#33CCFF",
          strokeOpacity : 0.8,
          strokeWeight : 2,
          fillColor : "#33CCFF",
          fillOpacity : 0.35
        });
        cityPlaza.setMap(map);

        var parking = [
          ['Salisbury Deck', 35.775007, -78.640804],
          ['Cabarrus Deck', 35.774589, -78.640793],
          ['Hannover Deck', 35.774511, -78.640031],
          ['Convention Center Underground Deck', 35.773292, -78.639355],
          ['Performing Arts Deck', 35.772666, -78.641576],
          ['Charter Square Deck', 35.773893, -78.638551],
          ['Blount Street Deck', 35.776226, -78.637499],
          ['McDowell Street Surface Parking', 35.775303, -78.641673],
          ['Salisbury Parking Lot', 35.775442, -78.640814],
          ['Convention Center Parking Lot', 35.772553, -78.639527],
          ['Lenoir Street Parking Lot', 35.773231, -78.638207],
          ['Carrabus street Parking Lot', 35.774032, -78.63824]
        ];

        for (var i = 0; i < parking.length; i++) {
          createMarker(parking[i]);
        }

        var lineCoordinates = [new google.maps.LatLng(35.779742, -78.643389), new google.maps.LatLng(35.77438, -78.643733), new google.maps.LatLng(35.774259, -78.640396), new google.maps.LatLng(35.772953, -78.640482), new google.maps.LatLng(35.772866, -78.638465), new google.maps.LatLng(35.776879, -78.638315), new google.maps.LatLng(35.776766, -78.634989), new google.maps.LatLng(35.778097, -78.634883), new google.maps.LatLng(35.778202, -78.638209), new google.maps.LatLng(35.781178, -78.638059)];

        var lineSymbol = {
          path : google.maps.SymbolPath.CIRCLE,
          scale : 8,
          strokeColor : '#000'
        };

        line = new google.maps.Polyline({
          path : lineCoordinates,
          strokeColor : '#C82536',
          icons : [{
            icon : lineSymbol,
            offset : '100%'
          }],
          map : map
        });
        animateCircle();
      }

      function animateCircle() {
        var count = 0;
        var time = offsetId = window.setInterval(function() {
          count = (count + 1) % 2400;

          var icons = line.get('icons');
          icons[0].offset = (count / 24) + '%';
          line.set('icons', icons);
        }, 20);
      }

      function createMarker(parking) {
        var myLatLng = new google.maps.LatLng(parking[1], parking[2]);
        console.log(myLatLng.toUrlValue());
        var marker = new google.maps.Marker({
          position : myLatLng,
          map : map,
          //icon : image   //<---- Get rid the comment after upload "parkingIcon.png" file.
          /*title: parking[0],*/
        });
        return marker;
      }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:36:44.763

1.  您需要一个用于您的parkingIcon 的URL，它在jsfiddle 中不起作用；如果它位于本地目录中，它可能会在您的站点上运行。
2.  您需要实际处理您的数组并创建标记，这段代码没有做任何有用的事情：

    ```
    function setMarkers(map, locations) {
    var image = new google.maps.MarkerImage('parkingIcon.png');
    }; 
    ```

    这样的事情会更好：

    ```
    function setMarkers(map, locations) {

      var image = new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/parkinglot.png');
      for (var i=0; i<locations.length; i++)
      {
        var marker = new google.maps.Marker({
          icon: 'http://maps.google.com/mapfiles/ms/icons/parkinglot.png', 
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          title: locations[i][0],
          map: map
        });
      }
     }; 
    ```

3.  您需要将“停车”数组传递给函数（位置是未定义的单个元素）。

[工作jsfiddle](http://jsfiddle.net/sQSPx/3/embedded/result/)

# eclipse - 在 Eclipse 中是否有一个快捷方式可以一次终止和删除所有任务？

> ID：13575421
> 
> 赞同：2
> 
> 时间：2012-11-27T00:18:11.070
> 
> 标签：eclipse

在 Eclipse 中，每次我们要删除终止/中断的任务时，我们必须首先选择它们，然后右键单击并选择终止并删除。有没有更短的方法来做到这一点？PS。不用说，我正在寻找比我在[这个线程中已经知道的更短的方法](https://stackoverflow.com/questions/1644040/eclipse-how-to-terminate-all-applications-at-once)

![在此处输入图像描述](../Images/5c6da744fb31c4b303a87ccf545f57dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:56:57.900

刚刚发现删除键可以从另一个线程工作，而不仅仅是调试 java！为什么它不在菜单上或在 Keys 首选项上打败了我？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:36:41.800

我找到了，点击右上角的那些灰色十字标志就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T17:34:58.437

您可以使用`Ctrl`+`A`来聚焦 Debug 窗口，然后按`Delete`和`Enter`。

# oracle - Oracle - 我应该使用异常还是触发器？

> ID：13575425
> 
> 赞同：0
> 
> 时间：2012-11-27T00:18:36.707
> 
> 标签：oracle, triggers, oracle11g, oracleexception

尝试向表中插入数据时，可能会由于违反唯一键或违反外键等各种原因而失败。

我可以使用 DUP_VAL_ON_INDEX 异常来知道违反了唯一键，但是如果有多个带有唯一标记的列，我怎么知道哪个键？在这种情况下我应该使用触发器吗？

（我使用异常来驱动存储过程的流程，而不是查询表以确保插入的数据正常。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:35:01.603

这不是触发器的用途。请记住，您[无法在触发器中查询目标表](https://www.google.com/search?q=oracle%20mutating%20table%20trigger&oq=oracle%20mutating%20table%20trigger)，因此您无法真正检查是否存在唯一性违规。我想说触发器的最佳理由是确保行填充有默认数据，例如序列中的 id。触发器也会混淆代码，因为不清楚为什么插入的行与您的语句不同。

约束执行除了显而易见的功能之外的有用功能：优化器可以使用约束中的信息来判断执行计划。例如，如果优化器知道列是否为 NOT NULL，则可以计算出更有效的路由。

上面@Ben 给出的`INSERT`语句是一个很好的语句，你也可以将你的语句包装在一个匿名块中：

```
BEGIN
    ... application code ... 
    BEGIN
        INSERT INTO mytable (col1, col2) VALUES (val1, val2);
    EXCEPTION WHEN DUP_VAL_ON_INDEX THEN
        ... error handling code ...
    END;
    ... application continues...
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:58:32.317

对于它的价值，我建议您不要**仅仅**依靠应用程序代码来强制执行唯一性。一个关键（双关语）原因是很难编写正确执行此操作的代码，特别是对于在多个事务中同时插入或更新数据的情况。声明数据库将正确有效地强制执行的唯一约束相对简单。

如果您想知道哪些*列*违反了唯一约束，一种方法（我意识到这不是“漂亮”）是：

1.  从错误消息中解析约束名称（例如，由 返回的`SQLERRM`）。
2.  使用某种机制（如数据字典或您自己的表）来“查找”哪些列对应于约束。

如果您想知道哪些*行*违反了唯一约束，您可以使用语句的`LOG ERRORS INTO`子句将有问题的`INSERT`行记录到错误记录表中，如[本示例](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#BCEGDJDJ)中所述。

如果您想知道哪些行*和*列违反了唯一约束，您可以结合这两种方法——使用`LOG ERRORS INTO`子句记录行，然后从错误消息中解析约束名称（也记录在错误日志中表）并查找相应的列。

话虽如此，您不一定需要在以下之间进行选择：a）首先检查数据并仅在通过检查时插入数据，以及 b）尝试插入数据，然后报告和/或处理任何错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:42:18.910

异常（来自约束）或触发器？我说也不是。

我*强烈*建议使用应用程序代码和查询来驱动应用程序的逻辑，而不是触发器和约束。将逻辑与错误条件处理分开只会让代码的行为显得更加神奇。

尽管约束作为备份计划非常有用（在应用程序逻辑错误或更改的情况下），但您是正确的，因为它们不会以您想要的方式帮助处理运行时错误（即不会帮助您公开重复的键该`INSERT`语句试图使用）。

正如您毫无疑问地确定的那样，您可以很容易地使用触发器来执行您所描述的操作，但最终这意味着您只是在触发器中隐藏了相同的逻辑测试（“这条记录是否已经存在？”）与您的`INSERT`语句将存在的应用程序代码相反。如果表上存在多个触发器，您*可能*还会经历不必要的执行开销，就好像一个会引发错误一样，任何其他先运行的触发器都是徒劳的。

如果您不想在运行新`INSERT`语句之前编写额外的语句来预先检查数据的条件，那么我建议使用这样的东西：

```
 INSERT INTO my_table (col1, col2)
  SELECT l_val1, l_val2
  FROM dual
  WHERE NOT EXISTS (
    SELECT 1
    FROM my_table t
    WHERE t.col1 = l_val1
    AND t.col2 = l_val2
  ) 
```

至少这样你就不会违反密钥，但你会通过测试`SQL%ROWCOUNT`是 0（没有插入行，所以必须已经存在）还是 1 来知道一行是否已经存在。

但是，这仍然不会为您提供违反键的值。您将不得不编写查询来找出哪些会违反约束。

# python - While 循环失败 - 凯撒密码

> ID：13575426
> 
> 赞同：0
> 
> 时间：2012-11-27T00:18:44.440
> 
> 标签：python, loops, while-loop, shift, encryption

我遇到了一个问题，当我要求我的程序退出时，它会像我要求的那样打印，但是也会连续显示我的选项菜单。

所以我得到了这个：

```
>>> 
(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to begin: q
Goodbye!
(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to continue: 
```

如果我选择“q”，我希望它在哪里显示：

```
>>> 
(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to begin: q
Goodbye! 
```

这是我的完整代码，请解释为什么我的菜单要重新打印，我的 while 循环是否出错，或者我的代码中有什么不合适的地方？

```
def hw8():

    print('(S)huffle a message.')
    print('(U)nshuffle a message.')
    print('(Q)uit program.')

    x = input('Choose a option to begin: ')

    if x == 'Q' or x == 'q':
        print('Goodbye!')

    while x != 'q' or 'Q' :

        if x == 'S' or x == 's':
            y = input('Enter a message to shuffle: ')

            q1 = ''

            for i in y:
                if ord(i) in range(65,90) or ord(i) in range(97,122):
                    q = chr(ord(i) + 1)
                    q1 = q1 + q
                elif ord(i) == 90:
                    q = chr(ord(i) + 7)
                    q1 = q1 + q
                elif ord(i) == 122:
                    q = 'A'
                    q1 = q1 + q
                else:
                    q = i
                    q1 = q1 + q
            print(q1)

        if x == 'U' or x == 'u':
            f = input('Enter a message to unshuffle: ')

            t2 = ''

            for i in f:
                if ord(i) in range (66,91) or ord(i) in range(98,123):
                    t = chr(ord(i) - 1)
                    t2 = t2 + t
                elif ord(i) == 65:
                    t = 'z'
                    t2 = t2 + t
                elif ord(i) == 97:
                    t = 'Z'
                    t2 = t2 + t
                else:
                    t = i
                    t2 = t2 + t

            print(t2)

        print('(S)huffle a message.')
        print('(U)nshuffle a message.')
        print('(Q)uit program.')

        x = input('Choose a option to continue: ')

hw8() 
```

我希望程序在改组消息或解组消息后以及开始时显示菜单，但不是在用户通过选择“q”要求退出程序后显示菜单。

* * *

编辑代码：

```
def hw8():

    print('(S)huffle a message.')
    print('(U)nshuffle a message.')
    print('(Q)uit program.')

    x = input('Choose a option to begin: ')

    while x != 'q' or x != 'Q' :

        if x == 'S' or x == 's':
            y = input('Enter a message to shuffle: ')

            q1 = ''

            for i in y:
                if ord(i) in range(65,90) or ord(i) in range(97,122):
                    q = chr(ord(i) + 1)
                    q1 = q1 + q
                elif ord(i) == 90:
                    q = chr(ord(i) + 7)
                    q1 = q1 + q
                elif ord(i) == 122:
                    q = 'A'
                    q1 = q1 + q
                else:
                    q = i
                    q1 = q1 + q
            print(q1)

        if x == 'U' or x == 'u':
            f = input('Enter a message to unshuffle: ')

            t2 = ''

            for i in f:
                if ord(i) in range (66,91) or ord(i) in range(98,123):
                    t = chr(ord(i) - 1)
                    t2 = t2 + t
                elif ord(i) == 65:
                    t = 'z'
                    t2 = t2 + t
                elif ord(i) == 97:
                    t = 'Z'
                    t2 = t2 + t
                else:
                    t = i
                    t2 = t2 + t

            print(t2)

        print('(S)huffle a message.')
        print('(U)nshuffle a message.')
        print('(Q)uit program.')

        x = input('Choose a option to continue: ')

        if x == 'Q' or x == 'q':
            print('Goodbye!')

hw8() 
```

新输出：

```
>>> ================================ RESTART ================================
>>> 

(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to begin: s
Enter a message to shuffle: hello
ifmmp
(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to continue: q
Goodbye!
(S)huffle a message.
(U)nshuffle a message.
(Q)uit program.
Choose a option to continue: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:32:17.580

`x != 'q' or 'Q'`被处理为`(x != 'q') or 'Q'`，并且 'Q' 始终为 True。

最好是： `x not in 'qQ'`或`x.lower() != 'q'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:31:52.737

你的问题是这一行：

```
while x != 'q' or 'Q' : 
```

问题是它`Q`本身总是返回`True`，所以表达式总是为真。尝试使用以下命令更改行：

```
while x != 'q' and x != 'Q' : 
```

# .net - 通过引用将值类型变量传递给静态方法线程安全吗？

> ID：13575434
> 
> 赞同：1
> 
> 时间：2012-11-27T00:19:10.103
> 
> 标签：.net, thread-safety, interlocked

代码如下所示：

```
public class JobManager
{
    public static void TrackExceptionCount(ref int exceptionCount)
    {
        Interlocked.Increment(ref exceptionCount);
    }

    //other helper methods
} 
```

我将在其他地方调用此方法，例如：

```
private static int _exceptionCount;

JobManager.TrackExceptionCount(ref _exceptionCount); 
```

我以为 Interlocked.Increment 会处理线程安全问题，对吧？

编辑：

我有多个这样的 Job 类：

```
class JobA
{
    private static int _exceptionCount;

    public void method1()
    {
       Task.Factory.Start(()=>{
         try
         {
             //Some code
         }
         catch(exception ex)
         {
            JobManager.TrackExceptionCount(ref _exceptionCount);
         }
       });
    }

    public void method2()
    {
       Task.Factory.Start(()=>{
         try
         {
             //Some code
         }
         catch(exception ex)
         {
            JobManager.TrackExceptionCount(ref _exceptionCount);
         }
       });
    }
}

class JobB
{
    private static int _exceptionCount;

    public void method1()
    {
       Task.Factory.Start(()=>{
         try
         {
             //Some code
         }
         catch(exception ex)
         {
            JobManager.TrackExceptionCount(ref _exceptionCount);
         }
       });
    }

    public void method2()
    {
       Task.Factory.Start(()=>{
         try
         {
             //Some code
         }
         catch(exception ex)
         {
            JobManager.TrackExceptionCount(ref _exceptionCount);
         }
       });
    }
} 
```

我相信在 catch 块中直接调用 Interlocked.Increment 可能是更好的方法。

但仍然想知道 JobManager.TrackExceptionCount(ref _exceptionCount) 是否可能工作

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:26:13.960

假设您的调用`Interlocked.Increment`是存储位置的唯一用途，`_exceptionCount`这是安全的。您可以安全地传递`ref`参数。它们的工作方式有点像指向变量的托管指针（在内部，它们是）。

# java - 实时日志分析 Scala 或 Java 解决方案

> ID：13575436
> 
> 赞同：-2
> 
> 时间：2012-11-27T00:19:20.850
> 
> 标签：java, scala, logging, real-time, analysis

我正在寻找 Java/Scala 中的实时日志分析库或框架。

一些建议？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:20:30.987

也许storm可以满足你的要求（你描述得很模糊:-)） [http://storm-project.net/](http://storm-project.net/)

# c# - 获取设备句柄时出错

> ID：13575437
> 
> 赞同：2
> 
> 时间：2012-11-27T00:19:26.400
> 
> 标签：c#, c++, pinvoke, guid

我一直在尝试连接 GPS 接口卡的设备驱动程序。我从供应商那里获得的示例是 C++ 中的。我正在尝试使用 pinvoke 让它在 C# 中工作

```
class HaveQuick
{
    [DllImport("setupapi.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SetupDiGetClassDevs(
        ref Guid ClassGuid,
        IntPtr Enumerator,
        IntPtr hwndParent,
        uint Flags
        );

    [DllImport(@"setupapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern Boolean SetupDiEnumDeviceInterfaces(
       IntPtr hDevInfo,
       ref SP_DEVINFO_DATA devInfo,
       ref Guid interfaceClassGuid,
       UInt32 memberIndex,
       ref SP_DEVICE_INTERFACE_DATA deviceInterfaceData
    );

        Guid GUID_DEVINTERFACE_IPHQT = new Guid(0x13ff045f, 0xe9d2, 0x479c, 0xb3, 0x90, 0x8c, 0xae, 0xc7, 0xd1, 0x1c, 0xc4);
        hDeviceInfo = SetupDiGetClassDevs(ref GUID_DEVINTERFACE_IPHQT, IntPtr.Zero, IntPtr.Zero, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);
        if (hDeviceInfo == IntPtr.Zero)
        {
            lastError = Marshal.GetLastWin32Error();
            Console.WriteLine("**Error: couldn't get class info error code = {0}\n");
            return;
        }

             // Find the interface for device
        devNum = 0x0000;    
        SP_DEVICE_INTERFACE_DATA interfaceData = new SP_DEVICE_INTERFACE_DATA();                // Interface data for this device
        interfaceData.cbSize = (uint)Marshal.SizeOf(interfaceData);
        SP_DEVINFO_DATA deviceInfoData = new SP_DEVINFO_DATA();
        deviceInfoData.cbSize = (uint)Marshal.SizeOf(deviceInfoData);
        success = SetupDiEnumDeviceInterfaces(hDeviceInfo, ref deviceInfoData, ref GUID_DEVINTERFACE_IPHQT, devNum, ref interfaceData);
        if (!success)
        {
            lastError = Marshal.GetLastWin32Error();
            Console.WriteLine("**Error: couldn't enum device error number = {0}\n", lastError); 
```

}

当我运行代码时，我得到 lasterror = 87 这是 Invalid Parameter

如果我用这行代码替换成功 = SetupDiEnumDeviceInterfaces(hDeviceInfo, IntPtr.Zero, ref GUID_DEVINTERFACE_IPHQT, devNum, ref interfaceData);

我得到 lasterror = 1784 Invlid 用户缓冲区。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:46:37.240

您的`SetupDiGetClassDevs`原型没有`SetLastError=true`. 所以调用`Marshal.GetLastWin32Error`可能没有得到正确的值。此外，除非调用返回的值无效，否则不应检查最后一个错误。

正如[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360.aspx)的文档所说：

> 当函数的返回值表明这样的调用将返回有用的数据时，您应该立即调用 GetLastError 函数。

所以使用的模式`Marshal.GetLastWin32Error`应该是：

```
IntPtr hDeviceInfo = SetupDiGetClassDevs( ... );
if (hDeviceInfo == IntPtr.Zero)
{
    // error here
    lastError = Marshal.GetLastWin32Error();
} 
```

如果您在没有错误时检查最后一个错误，则无法确定您将获得什么值。并非所有函数都`SetLastError`在成功时调用值为 0。所以你可能会从很久以前得到一个错误。

# cmake - SWIG/CMAKE 构建问题，尝试在 GNURadio 中安装和使用新模块

> ID：13575439
> 
> 赞同：1
> 
> 时间：2012-11-27T00:19:37.810
> 
> 标签：cmake, shared-libraries, swig, gnuradio, usrp

我正在尝试复制 GNURadio 的 UHD 模块中包含的 USRP Source 块，以便我可以自由修改该`work()`功能。

目前，我只是想制作一个与“USRP Source”块完全一样的块。我创建了一个名为“asat”的新模块，创建了`.cc`、`.h`、`.xml`、`CMakeLists`和`__init__`文件，并让整个东西编译和安装没有错误。

但是，当我尝试运行 GRC .py 文件时，出现以下错误：

```
File "/usr/local/lib/python2.7/dist-packages/asat/__init__.py", line 128, in <module> _prepare_asat_swig()
File "/usr/local/lib/python2.7/dist-packages/asat/__init__.py", line 32, in _prepare_asat_swig import asat_swig
File "/usr/local/lib/python2.7/dist-packages/asat/asat_swig.py", line 26, in <module> _asat_swig = swig_import_helper()
File "/usr/local/lib/python2.7/dist-packages/asat/asat_swig.py", line 22, in swig_import_helper _mod = imp.load_module('_asat_swig', fp, pathname, description)
ImportError: /usr/local/lib/python2.7/dist-packages/asat/_asat_swig.so: undefined symbol: /ZTIN3uhd9key_errorE 
```

我一直在努力解决这个错误，从我的谷歌搜索中我怀疑这是一个库在 CMAKE 中没有正确链接的问题，但我是 SWIG/CMAKE 的新手，我似乎无法解决它.

如果我在图书馆的正确轨道上，即使有人可以建议链接到的图书馆，我也非常感谢任何帮助解决错误原因的帮助。

我已经[用我的源代码创建了一个 github 存储库，并](https://github.com/JoelSpark/gr-asat)为任何愿意帮助我的人构建目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:04:45.580

乔尔 -

您需要为您的新块创建一个 SWIG 文件，以便它将 SWIG 转换为 Python - 否则，您将无法从 GRC 生成的 Python 流程图中使用它。

GNURadio 源代码树中有很多 *.i SWIG 文件可供您查看。或者，我建议您在 gnuradio-discuss 邮件列表中询问，几乎所有 GNURadio 支持都在该列表中进行（我是唯一一个知道监视 SO 的人）：

[https://lists.gnu.org/mailman/listinfo/discuss-gnuradio](https://lists.gnu.org/mailman/listinfo/discuss-gnuradio)

干杯，

本

# wpf - WPF Datagrid：除了新行之外的所有行中的一列只读 - 如何？

> ID：13575440
> 
> 赞同：1
> 
> 时间：2012-11-27T00:19:39.613
> 
> 标签：wpf, entity-framework, wpfdatagrid

我正在使用后备数据库中的特定表，该表使用相关数据项作为主键（在本例中为用户的姓名首字母）。这是我无法改变的；这是一个遗留设计，所以我坚持下去。但是因为它是相关的，所以它必须显示在我正在使用的 DataGrid 中（通过 ObjectContext 绑定到数据库中的表。）

不幸的是，这意味着当用户尝试编辑现有记录的首字母时，会引发异常，因为他们正在尝试编辑与该表对应的实体的实体键。

这一切都很好，因为他们不需要也确实不应该编辑该列，因此在一般情况下，我只需将该列标记为只读。麻烦的是，我确实需要他们能够在表中输入新记录，但是如果我将该列标记为只读，他们就无法在“新行”中输入首字母。任何一个。

*除了*“新行”中的单元格之外，如何使该列中的所有单元格为只读？

（或者我在这里的整个方法从根本上被误导了 - 请记住我无法更改表格，并且该字段需要存在并且可由用户插入，尽管不可更新？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:29:41.813

如果您不想编辑单元格，我认为您可以处理`DataGrid.BeginningEdit`事件和设置`e.Cancel=true`（请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.datagridbeginningediteventargs.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridbeginningediteventargs.aspx) ）（您可以使用`e.Column`and e.`Row properties`来检查）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:10:02.793

罗恩的上述回答解决了我的一半问题（非常感谢！），另一半首先检测哪些单元格是“新行”的一部分。不过，我通过一些实验得出了这个答案——检查附加到该行的实体的 EntityState 会告诉你，因为当你在“新行”中时它是“分离的”，并更改为“已添加” " 一旦你离开它，但在更改实际保存在 ObjectContext 上之前（此时实体键列仍然可以自由编辑而不会导致错误）。

因此，实现此目的的代码如下：

```
private void userDataGrid_BeginningEdit(object sender, DataGridBeginningEditEventArgs e)
{
    if ((string)e.Column.Header == "Initials")
    {
        // If this is the new row, entity is not yet attached to the context.
        if (
            (((User)e.Row.Item).EntityState != EntityState.Detached) &&
            (((User)e.Row.Item).EntityState != EntityState.Added))
        {
            e.Cancel = true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T17:54:37.947

Cerebrate 答案的变体

```
private void gridData_BeginningEdit(object sender, DataGridBeginningEditEventArgs e)
    {
        if ((string)e.Column.Header == "Doctor ID")
        {
            if (!e.Row.IsNewItem)
            {
                e.Cancel = true;
            }
        }
    } 
```

# apache - apache重写规则仅重定向.aspx url

> ID：13575444
> 
> 赞同：1
> 
> 时间：2012-11-27T00:20:06.050
> 
> 标签：apache, .htaccess, mod-rewrite

嗨，我正在用 linux 网站替换现有的 Windows 服务器，并且需要重新路由某人可能以 mysite.com/folder/somename.aspx 的形式放置的任何链接

我需要做的是抓取域之后的所有内容并将其重定向到托管先前应用程序的新 Windows 服务器

现在我有以下似乎不起作用

```
RewriteEngine on
RewriteOptions MaxRedirects=10
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.aspx -f
RewriteRule ^mysite.com/(.*)$ https://new.mysite.com/$1 [R=301,NC,L] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:05:57.307

您不希望重写规则中的 URI 模式中的任何主机信息，所有这些都`%{HTTP_HOST}`使用重写条件与变量匹配：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.aspx -f
RewriteCond %{HTTP_HOST} ^mysite.com$ [NC]
RewriteRule ^/?(.*)$ https://new.mysite.com/$1 [R=301,L] 
```

# c# - UIElement 克隆

> ID：13575445
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:20:22.317
> 
> 标签：c#, wpf, clone, uielement

我正在尝试克隆`UIElement`. 一切似乎都很好，但我`DependencyProperties`也复制到一个新元素，如下所示：

```
var newEl = new MyElement(); 
```

并且因为我`DependencyProperties`的一个也是一个`UIElement`并且它已经绑定到窗口错误发生该元素已经在使用中。所以我什至无法创建新元素。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:30:03.107

好的，我发现的唯一解决方案是删除并为我的和使用`DependencyProperty`创建一个正常的属性。`ObservateCollection<UIElement>``INotifyPropertyChanged`

# ruby-on-rails - 如何防止资产管道与我的 /.../.../.../images URL 冲突？

> ID：13575448
> 
> 赞同：0
> 
> 时间：2012-11-27T00:20:32.893
> 
> 标签：ruby-on-rails, url-rewriting, asset-pipeline

我有一个由 Rails 提供的 REST API，它有一个路径 /api/blah/blah/images.json，它提供有关图像的信息，它是图像模型的一个实例。在开发中，这很好用；在我们创建的沙盒环境中，这会产生 apache 错误（路径永远不会与 routes.rb 匹配，并且 rails 日志根本没有记录请求）。

我们玩了一圈发现这个问题发生在那些包含子字符串“/images”、“/javascripts”或“/stylesheets”的URL上，所以我们怀疑rails资产管道以某种方式拦截了这些URL（然后不是在该路径中找到任何图像，并给出错误）。

如何根据 routes.rb 配置哪些 URL 被视为资产，哪些被传递给控制器​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:56:54.697

解决了。我们的 {environment}.include apache conf 文件中有以下几行：

```
# Turn passenger off for directories w/ just static content and
# allow auto indexing.
<Location ~ /(stylesheets|javascripts|images|snapshots|fonts)>
  PassengerEnabled off
  FileETag None
  # Options -Indexes
</Location> 
```

只要 url 路径与 regex 匹配，这就会关闭乘客（因此阻止 Rails 收到请求）`/\/(stylesheets|javascripts|images|snapshots|fonts)/`。这是一个非常过分热心的正则表达式 - 在我们的例子中，它应该只在路径以这些名称之一开头时才匹配，所以我们将其更改为

```
# Turn passenger off for directories w/ just static content and
# allow auto indexing.
<Location ~ ^/(stylesheets|javascripts|images|snapshots|fonts)/>
  PassengerEnabled off
  FileETag None
  # Options -Indexes
</Location> 
```

这样它只会在该单词实际上是路径中的第一件事时匹配。

# java - Jtabbedpane 使用多个类

> ID：13575456
> 
> 赞同：2
> 
> 时间：2012-11-27T00:21:29.133
> 
> 标签：java, swing, class, jtabbedpane

我对java相当陌生，正在创建一个windowbuilder程序。我想知道是否可以在使用 Jtabbedpane 并在程序窗口中的选项卡之间切换时是否可以使用 actionlistener 从单独的类中获取内容。例如，我有一个带有两个选项卡和两个类的程序，第一个选项卡将包含一个类的代码，第二个选项卡将包含第二个类的代码。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T00:45:45.567

如果您想将创建 GUI 的代码分成多个类，您可以使用以下方法：

这将是您的主要课程，其中将包含`JTabbedPane`：

```
import javax.swing.JFrame;
import javax.swing.JTabbedPane;
import javax.swing.SwingUtilities;

public class Main {
    JFrame frame = new JFrame();
    JTabbedPane tabbedPane = new JTabbedPane();
    FirstPanel fp = new FirstPanel();
    SecondPanel sp = new SecondPanel();

    public Main() {
        tabbedPane.add("First", fp);
        tabbedPane.add("Second", sp);
        frame.getContentPane().add(tabbedPane);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setSize(640, 480);
        // frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Main();
            }
        });
    }

} 
```

这将是您的第二个扩展类`JPanel`或其他类型的容器：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;

import javax.swing.JPanel;

public class FirstPanel extends JPanel{

    public void paintComponent(Graphics g){
        g.setColor(Color.BLACK);
        g.setFont(new Font("Verdana",Font.BOLD,16));
        g.drawString("Hello there", 20, 20);
    }
} 
```

第三类的示例也扩展了`JPanel`：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class SecondPanel extends JPanel{
    JButton button = new JButton("Click me!");

    public SecondPanel() {
        button.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                JOptionPane.showMessageDialog(null, "You just clicked button");
            }
        });
        add(button);
    }

    public void paintComponent(Graphics g){
        g.setColor(Color.BLACK);
        g.setFont(new Font("Verdana",Font.BOLD,16));
        g.drawString("Hello there again!", 20, 20);
    }
} 
```

截屏：

![在此处输入图像描述](../Images/76eaea65913c59c62ecd7373ea255794.png)

**编辑：**

此外，最好不要使用 扩展类，而是`JPanel`在该类中创建一个返回自定义的方法`JPanel`。这样，您的类就可以保持“开放”状态以进行继承。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T00:33:52.800

你说：

> 我想知道是否可以在使用 Jtabbedpane 并在程序窗口中的选项卡之间切换时是否可以使用 actionlistener 从单独的类中获取内容。

如果您希望侦听所选选项卡中的更改，则 ActionListener 将不起作用，因为它仅由 AbstractButton 类的子级激活。请注意，JTabbedPane 使用 SingleSelectionModel 作为其模型，您可以使用 ChangeListener 监听对此的更改。API 和教程可以帮助填写详细信息。

另一方面，如果您想知道是否可以在选项卡持有的一个组件中使用 JButton/ActionListener 并让操作导致另一个选项卡上持有的另一个组件发生变化，那么答案肯定是，即使这两个视图是由不同的类创建。这就是观察者或监听者设计模式出现的地方。有关这方面的详细信息，请提供有关您的特定问题的更多详细信息。

我也非常同意 brano88 —— 在您非常熟悉并且实际上已经充分了解 Swing 库的基础之前，不要使用窗口构建器程序。

# ruby-on-rails-3 - 局部变量可以通过调试器访问，但是 ERB 抱怨没有定义这样的变量

> ID：13575461
> 
> 赞同：1
> 
> 时间：2012-11-27T00:21:56.150
> 
> 标签：ruby-on-rails-3, erb

我正在执行以下操作：

```
<%= render :partial => "folder/content", :locals => {:var1 => featured_content, :featured => true} %> 
```

在 _content.html.erb 部分内部，我可以很好地访问第一个局部变量。var1 效果很好。但是，第二个局部变量有问题。

我在要使用特色变量的行之前调用了调试器。我可以很好地访问该变量（及其值）。事实上，在调试器中，我可以列出所有的局部变量……我看到“featured”就是其中之一。

但是当我运行我的服务器时，我收到以下错误：

```
undefined local variable or method `featured' for #<#<Class:0x002g9ff8617940>:0x007f9aa251eb38> 
```

这里可能发生什么？这对我来说毫无意义！

**更新：**

如果我执行以下操作：

```
<% if local_assigns.has_key? :featured %>
  <% 'hello world' if featured %>
<% end %> 
```

然后一切正常。但是，如果特色不在 if 语句的范围内，则会出现错误。

据我所知，这完全是疯狂的——我很想了解正在发生的事情以及为什么它只发生在这个可怜的变量上（另一个变量完全没问题，请注意……）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:54:39.927

看起来 has_key 是目前唯一有效的选项（请参阅我的编辑）。我将关闭它，因为我没有得到任何更好的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:14:36.880

你可以试试这个：

```
<%= render "folder/content", :var1 => featured_content, :featured => true %> 
```

查看此以获取更多信息：

[Rails：对将局部变量传递给局部变量的语法感到困惑](https://stackoverflow.com/questions/4402556/rails-confused-about-syntax-for-passing-locals-to-partials)

# ruby - 是否可以在流水线块内捕获 redis 异常？

> ID：13575462
> 
> 赞同：0
> 
> 时间：2012-11-27T00:21:57.133
> 
> 标签：ruby, redis

我在 Ruby 1.9 中使用 redis gem

是否可以在 Redis.pipelined 中捕获 Redis 异常以确保批处理的其余部分也被执行？

我试过 redis.pipelined do begin redis.hGet ... rescue Redis::ComandError ... end end 但`rescue`代码永远不会被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:56:05.970

Multi 似乎与流水线的工作方式相似，只是每个操作都是原子的。我的“aaa”键被设置了，即使 smembers 导致抛出异常。我知道这不是您正在寻找的，因为您无法处理块内的异常。

```
#> $redis.multi do
*>   $redis.set "asdf", 1
*>   $redis.smembers "asdf"
*>   $redis.set "aaa", 2
*> end 
```

# c++ - 访问类外的类模板变量

> ID：13575468
> 
> 赞同：0
> 
> 时间：2012-11-27T00:22:38.130
> 
> 标签：c++, templates

我有这样的课：

```
template<char _character>
class Foo
{
    ...
public:
    static const char character = _character;
}; 
```

有没有办法可以在类外访问 _character 参数，而无需静态转发它？类似的东西`Foo::_character`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:31:53.160

您可以使用模式匹配：

```
template<typename T>
struct get_character;
template<char _character>
struct get_character<Foo<_character> > {
    static const char character = _character;
}; 
```

要使用：

```
get_character< Foo<'a'> >::character 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:36:21.500

简短的回答是否定的，你不能。

`_character`是模板参数，在实例化模板之前是未知的。

实例化后`_character`不再是您具体实例化的成员，而是您传入的字符。

通过创建`static const char character = _character;`，您正在创建一个*char 数据成员*，该成员*依赖*于用于实例化类模板的模板参数。

您现在可以从实例化的类模板访问所述数据成员：

```
typedef Foo<'c'> CFoo;
std::cout << CFoo::character << std::endl; 
```

一旦你实例化了类模板，`Foo<'c'>::_character`就不存在了。

# objective-c - Objective c 中的 NSTimer 阻塞主线程 - ipad 编程

> ID：13575469
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:22:38.680
> 
> 标签：objective-c, multithreading, ipad, nstimer

我`NSTimer`在 Objective-C 中使用定期（1 分钟间隔）运行后台进程，该进程检查任何未保存的数据并通过 Web 服务提交到数据库。此过程运行良好，不会阻塞主应用程序的流程，直到重新启动 Web 服务器的特定场景。

当 Web 服务器启动时，后台进程正在尝试连接到服务器，然后就挂在那里，直到服务器完全启动并可以访问。当它挂断时，它还阻塞了主要应用程序流并冻结了整个屏幕。当网络服务器完全启动时，挂起的进程恢复并且主应用程序也恢复工作。

谁能告诉我为什么在后台进程挂起时主应用程序会间歇性冻结。

以下代码启动计时器

```
- (void) startSync{
    syncTimer = [NSTimer scheduledTimerWithTimeInterval:60
                                         target:self
                                       selector:@selector(syncExtSys:)
                                       userInfo:nil
                                        repeats:YES];
} 
```

以下方法每 60 秒调用一次，并且`saveAgendaToDb`方法调用调用 Web 服务：

```
- (void) syncExtSys:(NSTimer *) theTimer{
    UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
    AgendaItemViewController *agendaItemViewController = [storyboard instantiateViewControllerWithIdentifier:@"AgendaItemViewController"];
    RollCallViewController *rollCallViewController = [storyboard instantiateViewControllerWithIdentifier:@"RollCallViewController"];

    for(int i=0;i<agenda.count;i++){
        unsavedAgenda = [agenda objectAtIndex:i];
        if(unsavedAgenda !=nil && [unsavedAgenda.dirtyFlag isEqualToString:@"Y"] && [self checkNetworkStatus]){

            NSLog(@"agenda out of sync = %@ %@",unsavedAgenda.measureType,unsavedAgenda.measureNum);
            [agendaItemViewController saveAgendaToDb:[agendaItemViewController createDictForAgenda:unsavedAgenda]:unsavedAgenda];
        }
    }
    for(int i=0;i<_rollCall.count;i++){
        Member *member = [_rollCall objectAtIndex:i];

        if(member !=nil && [member.dirtyFlag isEqualToString:@"Y"] && [self checkNetworkStatus]){

            [rollCallViewController saveRollCall:[rollCallViewController createRollCall]];
            break;
        }
    }

    [self calcDirtyFlag];
} 
```

调用 Web 服务的代码

```
-(void) saveAgendaToDb:(NSMutableDictionary*) agendaDictionary:(AgendaItem*) agenda{
    NSError *error;
    CommVotesAppDelegate *delegate = (CommVotesAppDelegate *)[[UIApplication sharedApplication] delegate];
    @try{

        NSString *postUrlString = [NSString stringWithFormat:@"%@%@:%@%@%@/%@",@"http://",delegate.prop.serverName,
                                   delegate.prop.port,delegate.prop.urlPattern,delegate.prop.saveAgendaMethod,delegate.prop.objectType];
        NSURL *postUrl = [NSURL URLWithString:postUrlString];
        NSMutableURLRequest *urlRequestPost = [[NSMutableURLRequest alloc] initWithURL:postUrl];
        NSData *postData = [NSJSONSerialization dataWithJSONObject:agendaDictionary options:0 error:&error];
        [urlRequestPost setHTTPMethod:@"POST"];
        [urlRequestPost setValue:@"text/plain" forHTTPHeaderField:@"Accept"];
        [urlRequestPost setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [urlRequestPost setHTTPBody: postData];
        // NSLog(@"After calling webservices");
        NSData *returnData = [ NSURLConnection sendSynchronousRequest: urlRequestPost returningResponse: nil error: &error ];
        NSString *returnString = [[NSString alloc] initWithData:returnData encoding: NSUTF8StringEncoding];
        NSLog(@"Response after calling save agenda web service = %@",returnString);
       [delegate dirtyFlagCalc:returnString :[error localizedDescription]:agenda];
    }@catch(NSException *nserror){
      NSLog(@"Error while sending agenda through webservices = %@",nserror.debugDescription);
    }@finally {
        NSLog(@"Inside finally block of agenda saving ");
        [delegate saveDataToDisk];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:46:48.413

你的错误是这个电话：`sendSynchronousRequest`。简而言之就是这样。几乎没有*任何*理由同步发送 Web 请求 - 现在您知道为什么不应该这样做了。是同步的！这意味着它会在我们等待时阻塞线程——如果等待时间很长，就会有很长的阻塞。这是主线程，所以我们阻塞了用户界面，定时器，一切。

只需切换到异步请求并正确使用委托回调，一切都会好起来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:39:40.613

计时器在主线程上触发。如果 syncExtSys: 方法没有及时完成，它将挂起主线程。

您的情况是您想做一些可能需要一段时间的事情，但您希望结果显示在主线程的 UI 中。处理此问题的一些好方法是使用 Grand Central Dispatch 执行以下操作之一：

1.  使用计时器调度源在后台队列上进行处理，然后调度结果以显示在主队列上。
2.  坚持使用 NSTimer，但将 syncExtSys: 中可能需要一段时间的任何内容分派到后台队列，然后在完成时将结果分派回主队列。
3.  使用 syncExtSys: 中的所有非阻塞调用及其调用的所有内容。

# bash - 用于截断大文件的 Unix shell 脚本

> ID：13575477
> 
> 赞同：89
> 
> 时间：2012-11-27T00:23:18.790
> 
> 标签：bash, shell, truncate

我正在尝试编写一个 Unix 脚本，该脚本将截断/清空应用程序在达到 3GB 空间时不断写入/打开的文件。我知道下面的命令会做到这一点：

```
cp /dev/null [filename] 
```

但我将在生产环境中自动运行它作为一项 cron 作业 - 只是在这里发布，看看你们在做类似的事情时是否遇到任何问题。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-27T02:12:19.473

只是为了添加另一个答案，

```
: > filename 
```

`:`是 bash 中的无操作（符合 POSIX），所以这实际上只是打开文件进行写入（这当然会截断文件）然后立即关闭它。

编辑：正如 shellter 评论的那样，您实际上不需要命令来进行重定向：

```
$ echo foo > foo.txt
$ cat foo.txt
foo
$ > foo.txt
$ cat foo.txt
$ 
```

一个简单的重定向本身将清除文件。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-11-27T02:16:47.070

我在 debian 上使用了以下命令

```
truncate -s 0 filename 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-27T00:37:48.557

这对我来说似乎很合理。当然，Unix 可以让你用大约 50 种不同的方式来做这件事。例如，

```
echo -n "" >filename
cat /dev/null >filename 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-19T13:04:39.610

`trunc filename`

适用于 AIX 风格的 UNIX

# java - 数组索引超出范围错误

> ID：13575479
> 
> 赞同：0
> 
> 时间：2012-11-27T00:24:00.187
> 
> 标签：java

好的，所以我的代码出现错误，试图计算数组中每个整数的数量。所以我不知道如何解决它。我在底部的 while 循环中遇到错误。任何帮助，将不胜感激。谢谢。

```
 if (ndx != array.length)
                while (array[ndx] == array[ndx + 1])
                    ndx++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:42:22.130

在外部for循环的最后一次迭代中，ndx比array.length小一，所以当你调用array[ndx+1]时，它相当于array[array.length]，它越界了，因为数组开始索引在 0\. 将底部 if 语句更改为：

```
if (ndx != array.length-1) 
```

应该做的伎俩。

它还在最后的 while 循环中增加 ndx，因此也应该有一个条件来检查它：

```
while(ndx != array.length-1 && array[ndx]==array[ndx+1]) 
```

由于您现在处理了 array.length-1 条件，因此您可以摆脱上述行中的 if 条件。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:44:25.673

由于这行代码，您会得到异常：

`while (array[ndx] == array[ndx + 1])`

在循环的最后一次迭代中，ndx 等于`array.length - 1`

当您尝试访问时，`array[ndx + 1]`您正在尝试访问超出范围的数组索引。

您应该将 while 循环上方的*if 语句更改为：*

`if (ndx != array.length - 1)`

# ruby-on-rails - Rails HABTM 与多个表单元素的关系

> ID：13575480
> 
> 赞同：0
> 
> 时间：2012-11-27T00:24:05.047
> 
> 标签：ruby-on-rails, ruby, relationship, has-and-belongs-to-many

我正在开发一个需要 has_and_belongs_to_many 关系的项目。

这涉及拥有许多“提案”的用户和属于许多用户的提案。

这很重要，因为用户可以创建提案并邀请其他用户加入。

我无法正确设置，已阅读许多其他教程和 SO 问题，但无法对其进行排序。

这是我到目前为止所拥有的。

```
User.rb

class User < ActiveRecord::Base
  has_and_belongs_to_many :proposals
 .......

Proposal.rb

class Proposal < ActiveRecord::Base
  has_and_belongs_to_many :users
...

database migration for HABTM

class CreateProposalUserJoinTable < ActiveRecord::Migration
  def change

  create_table :proposals_users, :id => false do |t|
    t.integer :user_id
    t.integer :proposal_id
  end
  end
end

/views/proposals/_form.html.erb
...
<%= f.collection_select(:users, User.all, :id, :trading_name) %>

<%= f.collection_select(:users, User.all, :id, :trading_name) %>

<%= f.collection_select(:users, User.all, :id, :trading_name) %>

... 
```

这是我希望用户选择三个用户并将它们添加到关系中的地方。

我尝试将此逻辑添加到控制器，但无法使其正常工作。

最初我将它与 id 作为外键一起破解，但想使用活动记录关联。

[编辑]

```
proposals_controller.rb
 def create
    @proposal = Proposal.new(params[:proposal])

    if current_user
     @user = current_user

     @proposal.creator_id = @user.id
     @proposal.cost = 10

    end

    respond_to do |format|
      if @proposal.save

       (params[:proposal][:users]).each do |user|
          if user.to_i.to_s == user || user.to_f.to_s == user
            puts user 
            puts "********************\n\n\n\n\n\n\n"
            @proposal.users = User.find(user)

         User.find(user).proposals << @proposal
        end
        end
        @proposal.save
        format.html { redirect_to @proposal, notice: 'proposal was successfully created.' }
        format.json { render json: @proposal, status: :created, location: @proposal }
      else
        format.html { render action: "new" }
        format.json { render json: @proposal.errors, status: :unprocessable_entity }
      end
    end

  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:36:09.997

不必将用户分配给提案。相反，您也可以分配 id，如下所示：

```
proposal.user_ids = params[:proposal][:user_ids] 
```

在以下代码中，分配是自动完成的：

```
proposal.attributes = params[:proposal] 
```

为了使这项工作，应该像这样更改视图：

```
<%= select_tag("proposal[user_ids][]", options_from_collection_for_select(User.all, :id, :trading_name)) %> 
```

# ruby-on-rails - 表单后如何更改rails中的受保护属性

> ID：13575481
> 
> 赞同：1
> 
> 时间：2012-11-27T00:24:05.283
> 
> 标签：ruby-on-rails, mass-assignment

我认为这个问题是如此简单，以至于我不知道如何用谷歌搜索它。

在 RoR 中，如果我有一个类似`:premium`or的受保护属性`:admin`，并且我只想在 a`User`执行特定操作（注册高级帐户或提供电话号码等简单的操作）时更改它，我该怎么做？只有在满足某些条件时才应该改变，但我不希望有人能够伪造这些条件。

我了解诸如“高级”或“管理员”之类的事情，我想通过批量分配来避免。那么如果用户填写了某个表格，你如何更改它呢？

随意将我引导到任何有用的链接，我只是不知道如何措辞，但我认为这是一个简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:29:01.070

阅读有关[批量分配的信息](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

您可以创建**角色**

```
attr_accessible :first_name, :last_name                            # default role
attr_accessible :first_name, :last_name, :premium, :as => :special # 'special' role 
```

调用`.update_attributes(params)`此模型时，将使用默认角色；如果`:premium`在 中找到`params`，则会抛出错误。

在`POST`您的特殊形式的方法中，您可以为like指定`:special`角色，指示使用允许大规模分配属性的角色。`update_attributes``.update_attributes(params, :special)``update_attributes``:special``:premium`

您可以根据 in 的某些属性有条件地传递角色名称`params`，例如具有您提到的值的电话号码

```
@the_model.update_attributes(params, params[:phone_no].present? ? :special : :default) 
```

如果这些条件更复杂，您可以考虑将它们作为类方法添加到模型中

```
def self.special_role?(params)
  # fancy conditions here, returning true/false
end 
```

然后`update_attributes`可能看起来像

```
@the_model.update_attributes(params, TheModel.special_role?(params) ? :special : :default) 
```

# python - 在列表中压缩项目的 Pythonic 方法

> ID：13575482
> 
> 赞同：1
> 
> 时间：2012-11-27T00:24:10.390
> 
> 标签：python

> **可能重复：**
> [Python：遍历列表中除最后一项之外的所有项](https://stackoverflow.com/questions/914715/python-looping-through-all-but-the-last-item-of-a-list)

假设我想遍历一个列表。每次我迭代时，我都想使用当前项和下一项来计算一些东西。我可以做类似的事情

```
mylist = [1, 2, 3, 4]
for i in range(len(mylist)):
    try:
        compute(mylist[i], mylist[i+1])
    except IndexError:
        compute(mylist[i]) 
```

我也可以

```
mylist = [1, 2, 3, 4]
for num in mylist:
    try:
        compute(num, mylist[mylist.index(num)+1])
    except IndexError:
        compute(num) 
```

这些似乎都不是特别好。有没有更蟒蛇的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:36:13.960

有三种方法可以做到这一点（尽管我可能更喜欢第一种，除非您的条件不同）：

1.  使用`itertools.izip()`- 这将是高效和 Pythonic：

    ```
    for item1, item2 in itertools.izip(my_list, my_list[1:]):
        # do something... 
    ```

2.  使用`enumerate()`：

    ```
    for index, item in enumerate(my_list):
        # do something... 
    ```

3.  将前一行存储在一个变量中（该示例假设`None`您的列表中没有）：

    ```
    previous = None
    for item in my_list:
        if previous is None:
            previous = item
            continue
        # do something... 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:31:35.410

您可以使用内置功能`enumerate`：

```
mylist = [1, 2, 3, 4]
for i, num in enumerate(mylist):
    try:
        compute(num, mylist[i+1])
    except IndexError:
        compute(num) 
```

但是在你的两个实现之间进行选择是相当容易的——第二个不仅慢得多（`O(n^2)`），而且对于重复元素也有奇怪的语义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:27:30.460

不使用 itertools 的函数式样式可能类似于：

```
for t in zip(mylist, mylist[1:]):
    compute(*t) 
```

如果性能很重要，您可以使用[itertools.izip](http://docs.python.org/2/library/itertools.html#itertools.izip)防止在 zip 期间创建中间列表。

要涵盖问题中所示的特殊情况，请使用：

```
for t in zip(mylist, mylist[1:]) + [(mylist[-1],)]
    compute(*t) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T00:35:42.483

最后要涵盖您的特殊情况，您需要：

```
for t in zip(mylist, mylist[1:]) + [(mylist[-1],)]
    compute(*t) 
```

# iphone - 检查两个 NSOperationQueue 何时完成调用 endBackgroundTask 以停止后台任务模式

> ID：13575484
> 
> 赞同：0
> 
> 时间：2012-11-27T00:24:21.520
> 
> 标签：iphone, ios, background-process, nsoperation, nsoperationqueue

在我的应用程序中，我有一些 NSOperation 从在线数据库更新一些核心数据元素，有时更新需要一些时间，当 iPhone 屏幕锁定时，应用程序进入后台模式，并且此更新停止，所以我有重新打开应用程序以继续更新，所以我在几分钟前问过这个问题，我收到了这个正确的答案：

```
- (void)someMethodToKeepRunningInBackground {
UIBackgroundTaskIdentifier taskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^(void) {
    // Uh-oh - we took too long. Stop task.
}];

// Perform task here
CheckForUpdate *checkUpdate = [[CheckForUpdate alloc] init];
[sectionCheckUpdateQueue addOperation:checkUpdate];       

if (taskId != UIBackgroundTaskInvalid) {
    [[UIApplication sharedApplication] endBackgroundTask:taskId];
}
} 
```

问题是我有更多的 NSOperationQueue 运行来执行更新，我在上面写的 sectionCheckUpdateQueue，如果在其他 NSOperationQueue 上找到更新计划更多的 NSOperation，所以我不能这样称呼：

```
endBackgroundTask:taskId 
```

因为我不知道这个 NSOperationQueue 什么时候完成，所以我的问题是，那么我如何检测这个 NSOperationQueue 什么时候完成以便调用 endBacgkround:taskId？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:54:12.357

您可以致电`waitUntilAllOperationsAreFinished`了解`NSOperationQueue`所有操作何时完成。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/waitUntilAllOperationsAreFinished](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/instm/NSOperationQueue/waitUntilAllOperationsAreFinished)

# mysql - MySQL存储过程中的可选WHERE比较

> ID：13575486
> 
> 赞同：0
> 
> 时间：2012-11-27T00:24:29.227
> 
> 标签：mysql

我来自前端背景，我正在尝试编写一个可以接受空参数的存储过程。这是一个**简化**版本：

```
CREATE PROCEDURE get_item(IN item_id INT(11))
BEGIN

SELECT * FROM item a WHERE a.item_id = IF(item_id IS NULL, a.item_id, item_id);

END;; 
```

因此，`SELECT`如果`item_id`为空，我希望所有内容，否则，我希望该`WHERE`子句适用。这是这样做的方法吗？它似乎有效，但我不确定是否有更好的方法。

我想我也可以这样写：

```
SELECT * FROM item a WHERE ((item_id IS NULL) OR (a.item_id = item_id)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:34:24.510

它应该可以按照您的方式正常工作：

```
SELECT * 
FROM item a 
WHERE @item_id IS NULL OR a.item_id = @item_id; 
```

或者：

```
SELECT * 
FROM item a 
WHERE a.item_id = COALESCE(@item_id, a.item_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:33:22.123

```
SELECT * FROM item a WHERE a.item_id = IF(item_id IS NULL, a.item_id, item_id); 
```

是性能杀手：它不是不使用**WHERE**，而是`IF`对每一行进行评估，因为它不是一个常量表达式。

```
SELECT * FROM item a WHERE ((item_id IS NULL) OR (a.item_id = item_id)); 
```

是一个好方法，正如查询规划器将看到的那样，`WHERE`计算结果为`TRUE`

我的方法是将 a`IF`放入存储过程的顶层，在两个查询之间做出决定，一个有 a `WHERE`，另一个没有。虽然这很冗长，但它也很可读。

# jquery - 彩盒动态网址

> ID：13575487
> 
> 赞同：0
> 
> 时间：2012-11-27T00:24:30.210
> 
> 标签：jquery, colorbox

Colorbox 不会接受它出现的动态 url？，不知道为什么这不起作用..（选择器是具有动态生成值（sku）的“scr”的图像。有什么想法吗？

准备好文档。

```
$('.product-selected .column-2 img').css('cursor', 'pointer').colorbox({
                  href : '/loading-designer?sku='+$(this).attr('alt')+'&type=direct'
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:06:41.600

您需要控制“this”（执行上下文）的值。在这种情况下，`$(this).attr('alt')`可能是`undefined`因为`this`很可能是指窗口对象。

要确保它`this`引用您的 img 元素，您可以执行以下操作：

```
$('.product-selected .column-2 img').css('cursor', 'pointer').colorbox({
    href : function(){ 
           return '/loading-designer?sku='+$(this).attr('alt')+'&type=direct';
    }
}); 
```

或这个：

```
$('.product-selected .column-2 img').css('cursor', 'pointer').each(function(){
    $(this).colorbox({href : '/loading-designer?sku='+$(this).attr('alt')+'&type=direct'});
}); 
```

# http-headers - HTTP 标头 Content-Disposition “附件”（而不是“附件”）

> ID：13575492
> 
> 赞同：2
> 
> 时间：2012-11-27T00:24:37.233
> 
> 标签：http-headers, content-disposition

我正在编写代码来读取 HTTP 响应，我看到了

```
 Content-Disposition: attachement; filename=xxxx 
```

看起来[rfc2183](http://www.ietf.org/rfc/rfc2183.txt)是相关标准，上面写着“附件”。环顾四周，我找不到任何关于为什么服务器可能会返回“附件”的信息。（部分问题似乎是很多人似乎都在使用“附件”作为这个词的正确拼写。）

我确实发现了几页（[示例](http://dotanything.wordpress.com/2008/05/30/content-disposition-attachment-vs-inline/)）表明 IE 没有（或在某一时刻没有）正确处理“附件”——这是每个人都开始围绕一个 bug 编写并且现在已成为标准的情况吗？

如果是这种情况，我是否应该认为附件/附件毫无意义，并将任何具有文件名的内容视为可下载的？或者我应该明确处理任何一个词？

此外，在这种特殊情况下，服务器属于我的组织，他们正试图保持一切基于标准——我可以为此合法地提交错误报告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:25:24.113

相关规范是 RFC 6266 (http://greenbytes.de/tech/webdav/rfc6266.html)，它说未知的处置类型应该被视为“附件”（参见[http://greenbytes.de/tech/ webdav/rfc6266.html#rfc.section.4.2](http://greenbytes.de/tech/webdav/rfc6266.html#rfc.section.4.2)）。

关于您引用的示例：不，IE 确实支持“附件”（并且永远支持）。那里的问题可能与无意义的缓存响应标头有关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-08T05:03:12.110

阴谋论者可能会注意到 HTML 标准基于巴黎，附件是法语拼写，但如前所述，指定的行为是将无法识别的字符串视为附件，因此这可能是一个错字，或者可能是法国人没有注意到他们使用法语拼写，因为他们得到了预期的行为。可能两者兼而有之。

# python - Python - 遍历字典并更改字典 - 如何？

> ID：13575493
> 
> 赞同：1
> 
> 时间：2012-11-27T00:24:38.737
> 
> 标签：python, python-3.x

我正在编写一个函数来根据多数在系统中选择获胜者。如果没有多数，那么我需要删除得票最少的选择并继续进行，直到有多数票的获胜者。例如，

```
voting({'a':12, 'b':9, 'd':4}) 
```

在这种情况下，`'a'`有 12 票、`'b'`9 票和`'d'`4 票。由于`'a'`没有多数票（12/25 票），我需要`'d'`从可用选择中删除，它将获得多数票（12/21）。每个“选票”中可能有任意数量的选择，重要的是每个选项中的第一个。

我的代码是`def voting(votes)`：

```
d = {}
winning_party = ''
i = 0
for key in votes.keys():
    d[key] = votes[key]
while winning_party == '':
    for key, vote in d.items():
        if d[key] > 0.5 * sum(d.values()):
            winning_party = key
            return winning_party
        else:
            if d[key] == min(d.values()):
                del d[key] 
```

我尝试进行一些小的更改，但我得到一个错误，即字典在迭代期间改变了大小，或者函数停止工作。

谁能帮我修复代码，或者告诉我如何避免在循环中更改字典？我只能真正使用上面的代码，即我不能导入任何东西或使用除基本功能以外的任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:46:39.420

```
while winning_party == '':
    total_votes = sum(d.values())    # Recompute the total before each iteration.
    for key, vote in d.items():
        if d[key] > 0.5 * total_votes:
            winning_party = key
            return winning_party

    min_party = min(d, key=d.get)    # Find key having minimum votes.
    del d[min_party]                 # Delete it. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:58:49.513

@FMc 所说的，除了您正在根据最小值测试不平等而不是测试平等。换句话说，你想要：

```
if d[key] == min(d.values()):
    del d[key]
    total_votes = sum(d.values()) 
```

（注意 == 而不是 !=）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T02:37:21.913

您的问题已得到解答，但我认为这是一个有趣的问题，所以这是我的解决方案。

```
def findmajority(votes):
  major = max(votes, key=votes.get)
  if sum([v for k,v in votes.iteritems() if k != major]) < votes[major]:
    return major    
  del votes[min(votes, key=votes.get)]
  return findmajority(votes)

>>> votes = {'a': 10, 'b': 9, 'c':4}
>>> findmajority(votes)
'a' 
```

有几点需要考虑：

*   它不会规范关系，并将返回一个获胜者，而不是全部。
*   它将**修改您现有的`votes`结构**。您可以通过在传递给函数时复制 dict 或在每次递归时创建新 dict 来解决此问题。

# c# - 二进制<ascii>十六进制转换</ascii>

> ID：13575494
> 
> 赞同：1
> 
> 时间：2012-11-27T00:24:42.403
> 
> 标签：c#, binary, hex, ascii, converter

好的，所以我在互联网上查找了以下代码，但是对于我的项目，我不允许使用代码，如果它有效就将其扔进去。我必须理解它，并且能够对代码及其作用给出和解释。

```
Convert.ToInt32("a").ToString("x");//ascii to hex
String.Join(String.Empty, 
      stringInput.Select(
         c => Convert.ToString(
            Convert.ToUInt32(c.ToString(), 16), 2).PadLeft(4, '0'))); 
```

你能给我解释一下这两行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:03:27.387

这段代码看起来很复杂，因为作者试图将尽可能多的功能打包到一行中。（如果我心情更糟，我会称其为“炫耀”，如果有小辈试图检查这一点，我可能会抱怨。）但是，这行代码的任何一个部分都不是复杂的。只需将它一块一块地拆开并检查每一位。

对于初学者来说，第一行就是垃圾。`ToInt32("a")`抛出 a`FormatException`因为您没有指定 16 的基数，如：`ToInt32("a", 16)`. 但是，如果您修复它，它将返回`10.ToString("x")`which is `"a"`. 所以忽略那条线，它没有任何用处。（我们可以想象作者打算使用类似`Encoding.UTF8.GetBytes()`return的东西`0x61`，但他们没有。）

第二行，你分解每一位，看看它做了什么：

```
String.Join(String.Empty, 
```

这很简单：它将获取一个字符串数组并将[它们连接在一起](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)，`String.Empty`用作分隔符（IOW，无分隔。）

```
 stringInput.Select( 
```

这是我们使用 LINQ 来构建一个`IEnumerable`字符串；它将遍历字符串中的字符，一次一个，并在每个字符上执行 lambda 表达式。

```
 c => Convert.ToString(
        Convert.ToUInt32(c.ToString(), 16), 2).PadLeft(4, '0'))); 
```

这就是它变得混乱的地方，因为即使对我来说，用眼睛匹配这些括号也是一种痛苦，但如果你将嵌套函数调用扩展为临时函数，你会得到：

```
s = c.ToString();              // Convert the character to a string
u = Convert.ToUInt32(s, 16);   // Convert a string of hex digits to a uint
b = Convert.ToString(u, 2);    // Convert a uint to a string of binary digits.
return b.PadLeft(4, '0')));    // Add 0s to make the string at least 4 digits. 
```

这些“返回”值中的每一个都成为可枚举中的下一个元素，由 返回`Select`，然后将其连接起来。

这里的最终结果是你从一串从 0 到 F 的十六进制数字开始，当作为数字读取时，它具有一些特定的数值，你最终得到一串二进制数字 0 和 1，当读取为一个数字，具有相同的数值。IOW，您正在将一串十六进制数字“转换”为二进制数字的“等价”字符串。

# java - 不同的缓冲区策略大小如何影响性能？

> ID：13575496
> 
> 赞同：4
> 
> 时间：2012-11-27T00:24:45.163
> 
> 标签：java, image

在java中，在Canvas类中，我听到有人解释过，当你从1到2和2到3时，更大的缓冲策略更有效，但超过3并没有什么区别。为什么 bufferstrategy size 大于 3 不会显着提高速度，从 createBufferStrategy(2) 到 createBufferStrategy(3) 的增加是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:47:29.993

当且仅当您不希望动画撕裂时才会出现性能问题：在这种情况下，您必须等待系统完成缓冲区的显示，然后才能再次更改此缓冲区。

因此，对于 1 个缓冲区，您必须等待，什么也不做。使用 2 个缓冲区，您可以在显示第一个缓冲区时写入另一个缓冲区，但如果速度足够快，您可能会在开始下一帧之前等待。使用 3 个缓冲区，您可以再次做某事而不是等待。

在第一个缓冲区完全显示之前，不太可能在第三个缓冲区中完成绘制，因此增益在 3 个缓冲区以上非常低。

请注意，您使用的缓冲区越多，托管这些缓冲区所需的内存就越多。这在普通计算机上不是问题，但对于手机应用程序来说可能是这样。

# language-agnostic - “惰性评估”和“反应式编程”

> ID：13575498
> 
> 赞同：2
> 
> 时间：2012-11-27T00:24:58.103
> 
> 标签：language-agnostic, programming-languages, functional-programming, lazy-evaluation, reactive-programming

有人可以通过示例演示惰性评估与反应式编程的不同之处。或者，它们非常相似吗？

* * *

鉴于`c = 3;`这两种方法似乎都涉及`b = c + 2;`至少在内部实现，而不管代码看起来如何`int b() {return c + 2;}`。在这两种情况下，直到需要它的值才知道`b`是什么，然后进行计算。

描述这种方法的名称是什么？

* * *

那么反应式编程使用或模拟惰性评估？具有惰性评估的语言是以反应方式编程的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T01:44:58.310

您似乎将惰性评估和反应式编程混淆为处于相同的“逻辑级别”。

对我来说，惰性求值是一种允许无限数据存在和操作的语言工具。（具有某种“有限结构”的数据，但在某种意义上是无限的，因为您可以随心所欲地完成并且仍然有一些剩余。）如果您稍微挠一下头并尝试一些示例，您会看到在存在无限数据结构的情况下进行惰性求值是很好的，因为在使用这些值时不会“永远循环”。（虽然惰性评估也有其他用途，但有时肯定会有一些性能提升。）

维基百科定义反应式编程：

> 在计算中，反应式编程是一种面向数据流和变化传播的编程范式。这意味着应该可以使用所使用的编程语言轻松表达静态或动态数据流，并且底层执行模型将自动通过数据流传播更改。

对我来说，这根本不适合懒惰的评估。懒惰的评估只是意味着你只计算你需要做更多工作的答案，然后保留一个持有者（通常称为“thunk”），让你在需要时做更多的工作，这样你就可以计算更多答案。（顺便说一句，这种“尽可能多地”实现的能力正是允许您使用惰性评估来处理无限数据的原因。）

相比之下，反应式编程允许您简洁地定义数据流将如何传播。（例如，响应式框架可以让您设置您给出的示例，*而无需*使用回调和函数指针显式实现它。）但实际上，这条线非常模糊。命令式语言中肯定有反应式框架：大多数人会称 GUI 框架为反应式。

相比之下，在[函数式反应式编程（FRP）](http://en.wikipedia.org/wiki/Functional_reactive_programming)中，您以声明方式指定反应式数据。这是使用 Haskell 语言的惰性“在后台”实现的（在那种特定情况下），因为这是最适合进行更新的方法（因为它最直接适合该范式）。

但是在像 C 或 C++ 这样的语言中，您通常通过函数指针或回调进行响应式编程，而没有明确的惰性求值概念。当然，在支持这种东西时可能会有一些惰性，但你并没有真正处于正确的语义级别来做出这种区分，在这种情况下，你通常可以使用惰性“技巧”来加速反应式框架（表面上更新一些东西——比如GUI——当用户使用它的更多部分时，它会按需更新）。

# actionscript-3 - 根据标签的宽度缩小 BitmapImage

> ID：13575501
> 
> 赞同：0
> 
> 时间：2012-11-27T00:25:04.407
> 
> 标签：actionscript-3, apache-flex, flex4

我希望我`BitmapImage`根据`Label`.
这是一段非常简单的代码：

```
<s:VGroup>
    <s:BitmapImage width="100%" source="@Embed('/image.png')" fillMode="scale" scaleMode="stretch"/>
    <s:Label text="Short"/>
</s:VGroup>
<s:VGroup>
    <s:BitmapImage width="100%" source="@Embed('/image.png')" fillMode="scale" scaleMode="stretch"/>
    <s:Label text="Very long message"/>
</s:VGroup> 
```

这是输出：

![在此处输入图像描述](../Images/3877cdbf91ac18cb6142b272f01dbfc7.png)

正如你所看到的，我的图像是自愿放大的，而它根本没有缩小。

背后的原因是什么？有简单的解决方案吗？

注意：我不能将宽度设置`BitmapImage`为`Label`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:41:38.440

粘贴我的评论作为答案。

width="100%" 说 - 和我一样大……或者我容器中最大的东西。如果你想让它适合标签..告诉它 width="{label.width}".. EDIT... 然后设置 width="{myLabel.width}"

# java - Java/Scala 中的实时数据库观察工具

> ID：13575502
> 
> 赞同：-3
> 
> 时间：2012-11-27T00:25:08.173
> 
> 标签：java, database, scala, real-time, observer-pattern

我正在寻找 Scala 或 Java 中的实时数据库观察者框架或库。

我不想使用与特定数据库链接的触发器或其他解决方案。

有什么建议么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:39:08.700

如果您只想监控应用程序生成的语句/结果，请查看您正在使用的 jdbc 驱动程序的文档。大多数驱动程序都有一些日志记录选项。如果没有，您可以考虑使用自定义类包装 jdbc-driver，它将所有调用委托给真正的驱动程序并在那里插入您的日志记录代码。使用 AOP 也可能是完成此任务的不错选择。

# jquery-mobile - JQMobile .trigger('create') 不工作

> ID：13575504
> 
> 赞同：0
> 
> 时间：2012-11-27T00:25:22.333
> 
> 标签：jquery-mobile

我在 jqmobile 应用程序中的 .trigger('create') 方法有一个奇怪的问题。

我正在尝试在整个站点上创建一些共享的、重复使用的页面。

这是我的 index.html；

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>phonegap & jquery mobile boilerplate</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile.structure.css"/>
    <link rel="stylesheet" href="css/jquery.mobile.theme.css"/>
    <script>
        var userAgent = navigator.userAgent + '';
        if (userAgent.indexOf('iPhone') > -1) {
            document.write('<script src="js/lib/cordova-iphone.js"></sc' + 'ript>');
            var mobile_system = 'iphone';
        } else if (userAgent.indexOf('Android') > -1) {
            document.write('<script src="js/lib/cordova-android.js"></sc' + 'ript>');
            var mobile_system = 'android';
        } else {
            var mobile_system = '';
        }
    </script>
    <script src="js/lib/jquery.js"></script>
    <!-- your scripts here -->
    <script src="js/app/app.js"></script>
    <script src="js/app/bootstrap.js"></script>
    <script src="js/lib/jquery.mobile.js"></script>
    <script src="js/globals.js"></script>
    <script src="js/logged_in.js"></script>
</head>
<body>
<div data-role="page">
    <div id="headerDiv" data-role='header'><a href="index.html" data-icon="home">Home</a>

        <h1>Jubilee Distributors</h1>
        <a href="login.html" id="logged_in" data-icon="home">Login</a></div>
    <div id="navDiv"></div>
    <div data-role="content">Blah Blah
    </div>

    <div id='footerDiv' data-role="footer"></div>

</div>
</body>
</html> 
```

这是我共享的 nav.html：

```
<div data-role='navbar'>
    <ul>
        <li><a href="orders.html">Orders</a></li>
        <li><a href="clients.html">Clients</a></li>
        <li><a href="products.html">Products</a></li>
    </ul>
</div> 
```

在 dom 准备就绪时，我正在 globals.js 文件中执行以下操作：

```
$(document).bind("mobileinit", function () {
    jQuery.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
});

$(function () {
    $('#navDiv').load('shared/nav.html').trigger('create');
    $('#footerDiv').load('shared/footer.html').trigger("create");
}); 
```

html 加载到 div 中没有问题，但触发器似乎没有做任何事情，因为它的样式.. 有什么我遗漏的吗？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:39:01.977

试试这个，如果它不起作用，我们会尝试其他方法：

将 globals.js 放在 Jquery mobile 之前，如下所示：

```
 <script src="js/globals.js"></script>
   <script src="js/lib/jquery.mobile.js"></script>
   <script src="js/logged_in.js"></script> 
```

如果这不起作用，请以这种方式重写您的最后一个函数：

```
$(function () {
    $('#navDiv').load('shared/nav.html', function(){$(this).trigger('create')});
    $('#footerDiv').load('shared/footer.html', function(){$(this).trigger('create')});
}); 
```

这样，在 jQM 增强之前，它会等到您的文件完全加载并插入到 DOM 中；

# javascript - 如何从 Firefox 扩展访问动态生成的 HTML？

> ID：13575508
> 
> 赞同：2
> 
> 时间：2012-11-27T00:25:53.790
> 
> 标签：javascript, plugins, dynamic, xul

我想从我的 FF 扩展 (XUL) 访问动态生成的 HTML 代码。

例如，我使用 XUL 创建了一个工具栏按钮，然后当我单击此工具栏按钮时，我需要完成一个 javascript 代码来访问某个页面/url 的 DOM 对象。

但不幸的是，这个页面是动态生成代码的，所以 element.innerHTML 总是返回一个空字符串。

谁能帮忙，这很紧急。

提前致谢。

# mysql - MySQL将数据插入表中，外键不是参考表的主键

> ID：13575509
> 
> 赞同：2
> 
> 时间：2012-11-27T00:25:58.287
> 
> 标签：mysql, reference, insert, foreign-keys

我有一个表歌曲，其中包含艺术家姓名和流派作为外键，但它们不是艺术家和流派表中的主键。我希望将数据输入歌曲表并自动填充到其他两个表中，除非我的逻辑错误。所以这是歌表：

```
 CREATE  TABLE IF NOT EXISTS `project`.`song` (
`idsong` INT(11) NOT NULL AUTO_INCREMENT ,
`artistname` VARCHAR(45) NULL DEFAULT NULL ,
`title` VARCHAR(45) NULL DEFAULT NULL ,
`genre` VARCHAR(15) NULL DEFAULT NULL ,
`year` INT(4) NULL DEFAULT NULL ,
`lyrics` TEXT NULL DEFAULT NULL ,
`url` VARCHAR(45) NULL DEFAULT NULL ,
PRIMARY KEY (`idsong`) ,
INDEX `title` (`title` ASC) ,
INDEX `genre_idx` (`genre` ASC) ,
INDEX `artistname_idx` (`artistname` ASC) ,
CONSTRAINT `genre`
FOREIGN KEY (`genre` )
REFERENCES `project`.`genres` (`genre` )
ON DELETE CASCADE
ON UPDATE CASCADE,
CONSTRAINT `artistname`
FOREIGN KEY (`artistname` )
REFERENCES `project`.`artist` (`artistname` )
ON DELETE CASCADE
ON UPDATE CASCADE)
ENGINE = InnoDB 
```

和另外两个表：

```
CREATE  TABLE IF NOT EXISTS `project`.`genres` (
`genre` VARCHAR(15) NOT NULL ,
 PRIMARY KEY (`genre`) )
 ENGINE = InnoDB

 CREATE  TABLE IF NOT EXISTS `project`.`artist` (
`idartist` INT(11) NOT NULL AUTO_INCREMENT ,
`artistname` VARCHAR(45) NULL DEFAULT NULL ,
`bio` TEXT NULL DEFAULT NULL ,
PRIMARY KEY (`idartist`) ,
INDEX `artistname` (`artistname` ASC) )
ENGINE = InnoDB 
```

这是我的查询不起作用：

```
INSERT INTO song (artist, title, genre, year, lyrics, url)
    VALUES
    ('Jason Aldean', 'Night Train', 'Country', '2012', 'This is the song lyrics', '9ADpkg1dkDU'); 
```

有什么想法有什么问题吗？我是新手，所以我确定是用户:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:39:12.757

这不会像你想象的那样工作：外键约束可以做`ON DELETE CASCADE`and `ON UPDATE CASCADE`，但不能做类似的事情`ON INSERT CASCADE`。

您需要的是`BEFORE INSERT`歌曲表上的触发器，如有必要，它将填充引用的表。

# mysql - 为什么在 MySQL 中的变量前面使用 @？

> ID：13575510
> 
> 赞同：0
> 
> 时间：2012-11-27T00:26:00.523
> 
> 标签：mysql

> **可能重复：**
> [MySQL：@variable 与变量。有什么不同？](https://stackoverflow.com/questions/1009954/mysql-variable-vs-variable-whats-the-difference)

我来自前端背景，所以如果这个问题看起来很简单，请耐心等待。

我注意到大多数关于 MySQL 存储过程的帖子都`@`用于变量。我知道这意味着该变量是一个会话变量，只要连接处于活动状态，它就会在存储过程中持续存在，但是为什么您希望一个变量在 1 个连接中交叉污染多个存储过程调用？将所有内容本地化不是更好吗？如果我不使用`@`，则该变量会在下一次存储的 proc 调用时重新初始化`NULL`，这不是更可取吗？这样做是出于性能原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:33:53.823

@ 符号指定一个[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)。看来您已经阅读了有关此内容的手册，但无论如何我都会发布此摘录。

> 您可以在一个语句中将值存储在用户定义的变量中，然后稍后在另一个语句中引用它。这使您能够将值从一个语句传递到另一个语句。用户定义的变量是特定于连接的。也就是说，一个客户端定义的用户变量不能被其他客户端看到或使用。当客户端退出时，给定客户端连接的所有变量都会自动释放。

如果您在单个连接中有多个存储过程调用，您应该非常清楚在整个请求中何时以及是否对变量的值进行了任何重新定义时使用了哪些变量。此外，您应该在某些条件下使用事务，这也有助于确保在其中定义的 UDV 在请求的生命周期内不会被外部来源损坏。

# windows - 合并多个文件

> ID：13575511
> 
> 赞同：0
> 
> 时间：2012-11-27T00:26:05.447
> 
> 标签：windows

我没有编程经验，但想做以下事情：

我希望能够从最多十个文件夹中选择要合并的文件。一旦做出选择...假设 a、b 和 d 程序将合并文件夹 1-10 中的 a、b 和 d，然后将十个文件夹的输出合并到 1 个文件中......

这是可能的吗？最好的编程方法是什么？

文件夹 #1

文件 A - 合并文件 B - 合并文件 C 文件 D - 合并

文件夹 #2

文件 A - 合并文件 B - 合并文件 C 文件 D - 合并

文件夹 # 3

文件 A - 合并文件 B - 合并文件 C 文件 D - 合并

文件夹 #4

文件 A - 合并文件 B - 合并文件 C 文件 D - 合并

文件夹#10

文件 A 文件 B 文件 C 文件 D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:38:39.043

您可以在命令行中使用 Windows >> 中的 append 运算符，然后列出您想要合并的所有文件，就像这样。

```
Folder1\fileA.txt >> Folder10\merge.txt
Folder2\fileB.txt >> Folder10\merge.txt
Folder2\fileC.txt >> Folder10\merge.txt
Folder3\fileA.txt >> Folder10\merge.txt 
```

如果您想要一个批处理程序向用户询问文件，然后将其合并到某个位置，您可以这样做......

```
:while1
    SET /P file=Please enter file name
    if NOT (%file%) == () (
        echo %file%
        %file% >> Folder10\merge.txt
        goto :while1
    ) 
```

通常，如果您有文件操作任务，则脚本语言（如批处理、perl 或 powershell）比编程语言更合适。如果你打算在 Windows 中做一些非常简单的事情，那么批处理通常可以完成工作，否则我建议使用 perl 或 powershell。

如果您真的没有编程经验，那么我建议您阅读一些 powershell 教程[http://www.powershellpro.com/powershell-tutorial-introduction/](http://www.powershellpro.com/powershell-tutorial-introduction/)并花一些时间学习该语言。如果这对您来说初始投资太大，那么我只建议像我在开始时所做的那样将附加命令输入到 .bat 文件中并运行一次。它可能比尝试编写和调试您的第一个脚本更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:58:25.577

这是你想做的吗？：

```
@Echo OFF

:: By Elektro H@cker

Set "folder=C:\Users\Administrador\Desktop\Test"

Echo Selected Folder: "%FOLDER%"
Set /P "files=Select files to merge (Example: "File1.txt" "File2.txt" "File3.txt") >> "

For %%@ in (%files%) Do (
    For /R "%FOLDER%" %%# in (*) DO (
        IF /I "%%@" EQU "%%~nx#" (call Set "Files_to_merge=%%Files_to_merge%% "%%#"+")
        )
    )
)

Copy /A %Files_to_merge:~0,-1% ".\output_file.txt"
pause&Exit 
```

PS：记得更改Copy命令的格式，/A为文本文件，/B为二进制文件。

**命令输出：**

```
>Selected Folder: "C:\Users\Administrador\Desktop\Test"
>Select files to merge (Example: "File1.txt" "File2.txt" "File3.txt") >>

>file1.txt file2.txt file3.txt

C:\Users\Administrador\Desktop\Test\file1.txt
C:\Users\Administrador\Desktop\Test\Nueva carpeta\file1.txt
C:\Users\Administrador\Desktop\Test\file2.txt
C:\Users\Administrador\Desktop\Test\Nueva carpeta\file2.txt
C:\Users\Administrador\Desktop\Test\file3.txt
C:\Users\Administrador\Desktop\Test\Nueva carpeta\file3.txt
        1 file(s) copied(s).

Presione una tecla para continuar . . . 
```

**Output_file.txt 内容：**

```
Content of "File1.txt" in first dir

Content of "File1.txt" in firstsub-dir

Content of "File2.txt" in first dir

Content of "File2.txt" in firstsub-dir

Content of "File3.txt" in first dir

Content of "File3.txt" in firstsub-dir 
```

# php - MongoDB 和 PHP 和移动应用程序之间的中间层

> ID：13575514
> 
> 赞同：0
> 
> 时间：2012-11-27T00:26:38.473
> 
> 标签：php, node.js, mongodb, database-design, serverside-javascript

我们计划使用 PHP 作为 web 前端和 MongoDB 作为数据库的 web 项目（会计软件）。此外，可能还会有适用于 iPhone 和 Android 的移动应用程序、可能的 REST API 等等。我们需要在原始数据库（设计模式 MVC 或 MVP 中的“模型”）上编写具有尽可能多的共享功能的中间层。在这种情况下编写中间层的聪明方法是什么？

我们正在考虑的选项：

1）将中间层编写为PHP库。另外：与 PHP 前端的连接超级简单，但对于其他用例（移动应用程序、REST API ......）来说不是很好。**编辑：**对于安全性和隔离性也不是很好。

2）将中间层编写为MongoDB服务器上的[服务器端执行代码。](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution# "服务器端执行的代码")但是它们的限制太多（db.eval() 写锁，只有一个分片），而且似乎不推荐使用这个 MongoDB 功能。我一直在寻找可以扩展服务器端代码执行能力的 MongoDB 扩展，但没有找到。

3) 将中间层编写为独立的 Web 服务，例如 PHP、python 或 Node.js。我看到的主要问题 - MongoDB 在 BSON 中通信。许多中间层函数会做简单的 MondoDB 查询。比他们必须将结果重新编码为其他一些序列化标准（因为 BSON 是特定于 MongoDB 的），然后将结果发送给客户端——这在我看来是很大的浪费。

除非我们找到更好的解决方案，否则我们可能会选择变体 1)，但我们将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:37:20.297

我将把我放在 Google 网上论坛上的答案放在这里。

第二点并不是真正的服务器端，而是更多地在 MongoDB 附带的内置 JS 引擎中运行。正如您所说，这将是一种糟糕的方式。

第三点不会那么糟糕，使用 PHP 或您只需使用 JSON 与其通信的单点入口和 MongoDB 的 PHP 驱动程序将为您完成艰苦的工作，无需担心 BSON。但是，它存在大量安全漏洞，一个是您需要打开一个直接接受 MongoDB 查询的接口，因此即使“安全”，该接口也会立即成为安全性黑洞。

在我看来，您最好不要选择第一点，因为这决定了您必须编写自己的库。相反，我会选择像 Kohona、Lithium 或 Yii 这样的 PHP 框架。像这样的东西可能是你最好的选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T07:41:33.340

我正在写这是一个答案，因为评论太长了。

* * *

关于第**1)**点，显然您不知道 PHP 是如何工作的，否则您会知道：

*   移动应用程序是一个流行词。PHP 至少从 2004 年就开始为移动设备提供服务。
*   REST API.... PHP 是一种网络语言，一个 REST 类可以写在 20 行以下。
*   安全性不取决于您使用什么，而是取决于您如何使用它。使用相同的逻辑，您是不安全的，因为您使用 MongDB 而不是`$someOtherDbPackage`.

# c# - 从 IEnumerable 中提取项目 > C#

> ID：13575518
> 
> 赞同：4
> 
> 时间：2012-11-27T00:27:21.650
> 
> 标签：c#, linq, ienumerable, observablecollection

我有：

```
IEnumerable<ObservableCollection<PointCollection>> rings = 
    from graphic 
    in e.FeatureSet 
    select ((Polygon)e.FeatureSet.Features).Rings; 
```

我想从每个图形中提取所有 PointCollection，并将它们合并到一个 ObservableCollection 中。像这样的东西：

```
ObservableCollection<PointCollection> allRings = ?; 
```

有没有更好的方法来迭代这个而不做一堆嵌套的 ForEach 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:29:41.443

你可以使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)：

```
var allRings = new ObservableCollection<PointCollection>(
    rings.SelectMany(rings => rings)
); 
```

# iphone - 动画调整 UIButton 的宽度

> ID：13575522
> 
> 赞同：2
> 
> 时间：2012-11-27T00:27:51.630
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我在调整按钮宽度大小的动画时遇到了一些麻烦。这是我的代码：

```
- (IBAction)profileButtonPressed:(UIButton *)sender {
    UIImage *buttonProfileDefault = [[UIImage imageNamed:@"Profile_Button_Default"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)];
    [sender setBackgroundImage:buttonProfileDefault forState:UIControlStateNormal];

    UIImage *buttonProfileDefaultDown = [[UIImage imageNamed:@"Profile_Button_Default_Down"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 3)];
    [sender setBackgroundImage:buttonProfileDefaultDown forState:UIControlStateHighlighted];

    [sender setTitle:@"LOG OUT" forState:UIControlStateNormal];

    sender.titleLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    sender.imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

    // Animate
    CGRect originalFrame = sender.frame;
    originalFrame.size.width = sender.frame.size.width+60;
    [UIView animateWithDuration:1.5 animations:^{
        sender.frame = originalFrame;
    }];
} 
```

它改变了按钮的宽度（除非我去掉了改变标题的那段代码），但它并没有通过动画来做到这一点。

有什么建议可能是错的吗？

**更新**

所以我设法为宽度变化设置动画，但将 setTitle 放在动画部分，但它没有为文本本身获得正确的宽度（下图）。我怎样才能做到这一点？

![在此处输入图像描述](../Images/827fa2f697f4ff00208a686125e81e13.png)

**解决方案**

所以我最终以编程方式放置了uibutton。似乎自动布局导致了问题。

是我自己还是Objective C中有很多东西有点笨拙？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:40:53.827

我怀疑您的问题与内在内容大小有关。如果已设置（我认为这是默认设置），那么当您更改标题时，按钮将更改大小，没有动画，无需您在代码中执行任何操作。有几种方法可以解决这个问题。我认为最简单的方法是将 IB 中按钮的大小扩大一点，即使一个像素也足以让 IB 设置明确的宽度（或者您可以自己设置）。然后在代码中，你可以这样做：

```
-(IBAction)buttonClick:(UIButton *)sender {
    [sender setTitle:@"Log Out Immediately" forState:UIControlStateNormal];
    [self.button removeConstraint:self.lengthConstraint];
    [UIView animateWithDuration:.5 animations:^{
        self.button.frame = CGRectMake(self.button.frame.origin.x, self.button.frame.origin.y, 250, 44);
    }];
} 
```

self.lengthConstraint 是在 IB 中设置的长度约束的 IBOutlet。

另一种方法是使用 NSTimer 更改约束方法中的常量。这是 WWDC 2012 演讲“掌握自动布局的最佳实践”中提到的方法之一：

```
-(IBAction)buttonClick:(UIButton *)sender {
    [sender setTitle:@"Log Out Immediately" forState:UIControlStateNormal];
    [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(expandButton:) userInfo:nil repeats:YES];
}

-(void)expandButton:(NSTimer *) timer {
    self.lengthConstraint.constant += 2;
    if (self.lengthConstraint.constant > 170) [timer invalidate];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:38:42.507

在制作动画之前移除`setTitle`并在完成块中执行。

```
 CGRect originalFrame = sender.frame;
    originalFrame.size.width = sender.frame.size.width+60;

    [UIView animateWithDuration:1.5 delay:0.0 options:UIViewAnimationOptionLayoutSubviews animations:^{
        sender.frame = originalFrame;
    } completion:^{
        [sender setTitle:@"LOG OUT" forState:UIControlStateNormal];
    }]; 
```

**更新：** 检查您是否使用自动布局功能。我不确定，但这应该是这里的问题。正如我在以编程方式创建按钮时在评论中提到的那样，这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:36:23.670

解决方案

所以我最终以编程方式放置了uibutton。似乎自动布局导致了问题。

是我自己还是Objective C中有很多东西有点笨拙？！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T15:40:02.737

一旦你开始使用自动布局，你应该停止修改框架，而是修改视图的约束值。

您可以`IBOutlet`向按钮的宽度约束添加一个并修改其`constant`值。

# matlab - MATLAB找到最大值。一个结构的

> ID：13575523
> 
> 赞同：2
> 
> 时间：2012-11-27T00:28:11.227
> 
> 标签：matlab, octave

我试图找到一个结构的最大值但`max([tracks(:).matrix])`不起作用。它给了我以下错误：“错误使用 horzcat CAT 参数尺寸不一致。” 你有想法吗？

这是我的结构的样子：

```
tracks = 

1x110470 struct array with fields:
    nPoints
    matrix 
```

track.matrix 包括 3D 点。例如这里是

```
tracks(1,2).matrix:

33.727467   96.522331   27.964357
31.765503   95.983849   28.984663
30.677082   95.989578   29 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:10:53.063

您可以使用数组 fun，然后使用另一个最大值来执行此操作：

```
s.x = [1 3 4];
s(2).x = [9 8];
s(3).x = [1];

maxVals = arrayfun(@(struct)max(struct.x(:)),s);

maxMaxVals = max(maxVals(:)); 
```

或者，如果您想在 MAX 之后保留 .x 的大小：

```
s.x = [1 3 4];
s(2).x = [9 8 3];
s(3).x = [1 2 2; 3 2 3];

maxVals = arrayfun(@(struct)max(struct.x,[],1),s,'uniformoutput',false);

maxMaxVals = max(cat(1,maxVals{:})) 
```

或者，如果你知道一切都是 nx 3

```
s.x = [1 3 4];
s(2).x = [9 8 3];
s(3).x = [1 2 2; 3 2 3];
matrix = cat(1,s.x)
maxVals = max(matrix) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:35:22.677

我不确定您要查找的最大值是什么，但是您可以这样做：

```
matrixConcat = [tracs.matrix] 
```

这将为您提供所有矩阵的大串联列表。然后，您可以对其进行 max 以找到最大值。

让我知道这是否是您正在寻找的东西，否则我会改变我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:49:02.040

You can't use `[]` because the sizes of all `tracks.matrix` are different, hence the concatenation fails.

You *can* however use `{}` to concatenate to cell:

```
% example structure
t = struct(...
    'matrix', cellfun(@(x)rand( randi([1 5])), cell(1, 30), 'uni', 0))

% find the maximum of all these data    
M = max( cellfun(@(x)max(x(:)), {t.matrix}) ); 
```

Now, if you don't want to find the overall maximum, but the maximum per column (supposing you have (x,y,z) coordinates in each column, you should do

```
% example data
tracks = struct(...
    'matrix', {rand(2,3) rand(4,3)})

% compute column-wise max 
M = max( cat(1, tracks.matrix) ) 
```

This works because calling `tracks.matrix` when `tracks` is a multi-dimensional structure is equal to expanding the contents of a cell-array:

```
tracks.matrix         % call without capture equates to:

C = {tracks.matrix};  % create cell
C{:}                  % expand cell contents 
```

# windows - IRP_MJ_QUERY_INFORMATION 会导致多少磁盘活动？

> ID：13575526
> 
> 赞同：1
> 
> 时间：2012-11-27T00:28:28.477
> 
> 标签：windows, winapi, filesystems, irp

对 IRP_MJ_QUERY_INFORMATION 的调用由 Win32 的 GetFileInformationByHandle 或内核模式 ZwQueryInformationFile 等函数生成。

有人可以向我解释这个电话实际发生了什么吗？假设我有一个传统的 7200RPM 磁存储 HDD。

我知道从磁性旋转驱动器读取时的许多延迟是由于寻道时间造成的，但 IRP_MJ_QUERY_INFORMATION 调用在我的应用程序中似乎非常快。我检查了预取缓存的内容，但在其中看不到它正在查询的文件。我猜它被缓存在内存中的某个地方，因为调用很多，但解决得很快，而且我没有看到太多的 HDD 活动（尽管我可能是错的）。在这些情况下实际上会发生什么？文件是否被 Windows 缓存在其他地方？如果是这样，我怎么能看到它？

我知道也有一个 HDD 缓存，但我的理解是它更像是用于预读等的缓冲区。

编辑：我在 MSDN 上阅读[了这篇](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364218%28v=vs.85%29.aspx)文章，它建议“始终缓存文件系统元数据。”，我假设这意味着如果您打开文件并对其进行修改，诸如“上次修改日期”之类的元数据将不会在刷新文件缓冲区之前，不会将其提交到磁盘。就我而言，我正在查询一个文件，因此我不需要对元数据进行任何更改。在我的程序第一次查询信息后，Windows 是否缓存元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:48:33.573

这完全取决于所涉及的文件系统和检索的信息类型。让我们谈谈NTFS。:)

打开文件时，目录条目和文件记录中包含的大部分信息都缓存在与句柄关联的数据结构（称为 FCB）中。

当调用 IRP_MJ_QUERY_INFORMATION 时，此信息会从 FCB 复制到用户的缓冲区中。然而，诸如检索重解析标签之类的事情需要返回到原始文件记录并读取该信息。大多数情况下，该记录驻留在缓存中（因为它在文件本身打开时被访问）。

# javascript - 选择和选择2有什么区别？

> ID：13575531
> 
> 赞同：157
> 
> 时间：2012-11-27T00:28:53.910
> 
> 标签：javascript, jquery-chosen, jquery-select2

[Chosen](http://harvesthq.github.com/chosen/)和[Select2](http://ivaynberg.github.com/select2/)是两个比较流行的扩展选择框的库。

两者似乎都得到了积极维护，Chosen 比较老，并且支持 jQuery 和 Prototype。

Select2 只是 jQuery，它的文档说 Select2 是受 Chosen 启发的，但没有详细说明所做的任何改进（如果有的话）或重写的其他原因。

两个库具有几乎相同的功能集，我发现的唯一比较是一个有点不确定的 jsperf 测试页面。

这些库中的任何一个都比其他库有什么优势吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-04T12:48:16.623

从 Select2 3.3.1 开始，以下是其 README.md 中记录的内容

> Select2 支持哪些选择不支持？
> 
> *   处理大型数据集：Chosen 要求将整个数据集作为`option`标签加载到 DOM 中，这限制了它只能处理小型数据集。Select2 使用一个函数来即时查找结果，这允许它部分加载结果。
> *   结果分页：由于 Select2 适用于大型数据集，并且一次只加载少量匹配结果，因此它必须支持分页。当用户滚动到当前加载的结果集的底部时，Select2 将调用搜索函数，从而允许“无限滚动”结果。
> *   结果的自定义标记：选择仅支持呈现文本结果，因为这是标签支持的唯一标记`option`。Select2 提供了一个扩展点，可用于生成任何类型的标记来表示结果。
> *   动态添加结果的能力：Select2 提供了从用户输入的搜索词添加结果的能力，这允许它用于标记。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-27T01:09:09.357

恕我直言，选择是“维护”但不是“积极维护”。Chosen 的 341 个问题和 51 个拉取请求。Select2 有 128 个问题和 25 个拉取请求。我认为这些模式基本上是

*   选择表面上对你更有吸引力的那个
*   在一个或两个应用程序中使用它
*   遇到定制问题或限制
*   也许尝试通过问题和拉取请求与社区合作
*   最终会厌倦并使用您在此过程中学到的知识来构建自己的

无论您选择哪一个，如果您的用例恰好处于最佳位置，那么任何一个都可以工作。如果没有，您最终将不得不自己编写或大量定制这些内容。在任何一种情况下，具体选择哪一个都不是那么重要。我想我会在这里支持@Andy Ray 和@paul，Select2 可能是更好的初始选择。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-08-07T20:16:30.740

另一个值得一提的区别是，`Chosen`是在和中开发的`Sass`，`CoffeeScript`而`Select2`在普通`CSS`和`JS`中。这是我个人的选择，`Sass`并且`CoffeeScript`是不必要的复杂层，这使得调试变得困难。

在尝试了这两种方法之后，我决定不使用任何一种 - 尝试获得`Select2`创建项目功能结果是一件非常麻烦的事情，因为当附加到元素时你根本无法做到`<select>`- 它只是觉得我没有好好考虑过我会拥有的箍跳过。

我已经决定使用[selectize.js](https://selectize.github.io/selectize.js/)，它只是将新`<option>...</option>`元素添加到表单的 DOM 中——这很正常。它也确实使用`LESS`- 但我会绕过它，`CSS`直接在你的项目中定制编译。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-01-26T15:17:31.710

### selected.js 与 select2.js

*   两者的 MIT 许可证
*   依赖项：
    *   选择2：jQuery
    *   已选择：待定
*   桌面浏览器支持：
    *   选择2：IE8+
    *   选择：IE8+
*   设备支持：
    *   选择2：不清楚
    *   已选择：在 iPhone、iPod Touch 和 Android 移动设备上禁用
*   重量（缩小）：
    *   选择2：57KB
    *   已选择：27KB
*   用法：Select2 支持更多“花哨”的 UI（参见“模板”）
*   两个代码库都可以在 Github 上找到
    *   Select2：贡献：非常活跃
    *   选择：贡献：比 Select2 少大约 3 倍

![select2.js 贡献](../Images/d056edd2f0292754a72ff70645f6be95.png) ![selected.js 贡献](../Images/82d10feff65712adbb50467143f5ebd2.png)

附言。当我了解有关缺失点的更多信息时，我将尝试更新此答案

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-06-21T23:32:16.670

首先，让我告诉你 Chosen 和 Select2 是两个很棒的插件，这是我对 Chosen 的个人体验。他们所说的关于天选者的一切都是真实的。

Pēteris Caune 指出的[问题](https://github.com/harvesthq/chosen/issues/86)`select`已有 2 年历史，但仍然没有官方修复。API 根本没有好的文档。已经多次指出（观看第 671 期），但仍然一无所获。他们花了将近 2 年的时间来解决这个[问题](https://github.com/harvesthq/chosen/issues/92)，如果在显示 div 之前将其隐藏，则选择基本上不起作用`overflow:hidden`（并且您必须使用一个`witdh:X%`如果您不寻找问题，您基本上永远不会知道的选项）。

我会说主要问题是修复速度，如第 92 期中所说的 DelvarWorld：

> 我的拉取请求解决了这个问题，但就像我的另一个和许多选择的一样，它们被忽略了。这个项目的贡献者太多，代码库太少。

我首先选择 Chosen 是因为它的 MIT 许可证，但我遇到了所有这些问题（下拉菜单，找不到 API，寻找隐藏溢出的时间），所以我决定切换到 select2，因为它有更好的文档，没有下拉菜单错误和更快的修复。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-06-20T13:02:17.410

在 Select2 中有效但在 Chosen 中无效的一项功能是`select`在具有`overflow: hidden`or的元素内部`overflow: auto`。

![在此处输入图像描述](../Images/00f89aa2ba5634bf0dc4c01e0c449109.png)

Chosen 的对应问题：[https ://github.com/harvesthq/chosen/issues/86](https://github.com/harvesthq/chosen/issues/86)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-06-24T15:51:35.413

我发现使用这两个插件的一些差异：

*   使用 select2，您可以在选项中的任何位置进行搜索。例如，如果您有一个名为 ABCDEFG 的选项并且您输入 CDE，您将在搜索结果中获得该选项，但选择后您必须输入 AB.. 等等才能获得结果。

*   我发现对于较大的数据集，choose 似乎比 select2 更快，尤其是在 IE 中。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-07-29T01:13:48.493

Select2 支持移动设备，而 Chosen专门在 iPod、iPhone 和移动 Android 上[禁用自身。](https://github.com/harvesthq/chosen/pull/1388)如果您想在移动设备上使用“扩展”选择框，这使您的选择变得容易。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-12-11T13:53:38.390

我在桌面上使用 Select2 的体验很棒，但在触控移动设备上却大不相同，总有一些怪癖。例如，在带有 ics 和股票浏览器下拉菜单的 xperia st15i 上，由于键盘窃取焦点，它总是自行关闭。再次打开它的唯一方法是触摸菜单数十次，按住手指一秒钟以及其他巫术魔法。或者在下拉列表关闭时开始输入，有多少用户会解决这个问题？

selectize.js似乎比select2更平滑，但是它在选择值或输入时也会在移动设备上单独出现问题，以便出于某种原因将页面一直移至左侧。此外，在不支持溢出的较旧的 Android 2.x 设备上，无法选择超过几个顶部选项，因为键盘不会弹出。:(

仍然必须测试 Chosen，毕竟禁用移动设备可能不是一个坏主意，但最终好的旧下拉菜单始终无处不在。

更新：现在我也测试了 Chosen，它在一个方面更好：默认情况下它在移动设备上不起作用（太棒了！），但它有过滤单词的问题。例如，不在单词中间搜索，如果你使用 hack 进行对齐，它也会忽略完整的选项。回到绘图板。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-23T12:22:01.410

*为什么我选择 select2 而不是 Chosen*

select2 具有的关键功能，没有其他控件具有自动神奇功能，是“清除所有”选择，控件右侧带有“x”。这是我的应用程序的杀手级功能。我不知道为什么其他选择标签增强库缺少此功能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-16T17:07:33.607

Select2 支持 AJAX 选择不支持

选择 2 的尺寸比选择的要重一些。

我切换到 Select2 因为没有官方支持 ajax 操作。

# jquery - 防止子 div 触发事件

> ID：13575532
> 
> 赞同：1
> 
> 时间：2012-11-27T00:28:59.213
> 
> 标签：jquery

我试图防止在用户单击子项或 div 时触发单击事件。

我有

```
<div class='test'>
   <div class='click1'>
     test 1

    </div>
   <div class='click1'>
     test 2

    </div>

   <div class='click1'>
     test 3

    </div>

</div> 
```

我的jQuery

```
 $('.test').click(function(e){

      e.stopPropagation(); //doesn't work
     alert('click!')

  }) 
```

我需要将单击事件注册到 .test div，并且我不希望在用户单击子 div 时弹出警报。

有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:30:50.310

```
$('.test').on('click', '*', function(e){
  e.stopPropagation();
}); 
```

演示：http: [//jsfiddle.net/rD2ua/](http://jsfiddle.net/rD2ua/)

**编辑**

```
$('.test').children().bind('click', function(e){
  e.stopPropagation();
}); 
```

您可以直接绑定到子元素

演示：http: [//jsfiddle.net/rD2ua/1/](http://jsfiddle.net/rD2ua/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:30:57.267

更新：

```
$('.test').click(function(e){
     if (e.target.className == 'click1') {
         return false;
     }
}) 
```

工作演示：http: [//jsfiddle.net/drDMK/](http://jsfiddle.net/drDMK/)

甚至这样：

```
$('.test').click(function(e){
     if (e.target.className != 'test') {
         return false;
     }
}) 
```

工作演示：http: [//jsfiddle.net/drDMK/1/](http://jsfiddle.net/drDMK/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T00:41:06.060

您应该在子级别（即“click1”）捕获单击事件并在那里停止传播。它正在向上传播到其父级（“测试”）。

# php - 验证用户和不验证用户

> ID：13575534
> 
> 赞同：0
> 
> 时间：2012-11-27T00:29:06.780
> 
> 标签：php, codeigniter

我正在尝试验证用户名的输入字段。我创建了一个回调函数来报告用户输入是否已经作为名称存在于数据库中，但每次它都报告它确实存在。即使数据库中没有任何内容。对函数 save 的调用来自 jquery ajax 请求。

```
public function save()
{
    $output_status = 'Error';
    $output_title = 'Not processed';
    $output_message = 'The request was unprocessed!';

    $this->form_validation->set_rules('username', 'User Name', 'required|trim|xss_clean|callback_username_check');

    if ($this->form_validation->run())
    {
        $user_saved = $this->users_model->save_user($this->input->post('username'), $this->input->post('user_directory_name'), $this->input->post('user_status'));
        if ($user_saved)
        {
            $output_status = 'Success';
            $output_title = 'User Created';
            $output_message = 'User was successfully created!';
        }
        else
        {
            $output_title = 'User Not Created';
            $output_message = 'User was not successfully created!';
        }
    }
    else
    {
        $output_title = 'Form Not Validated';
        $output_message = validation_errors();
    }
    echo json_encode(array('status' => $output_status, 'title' => $output_title, 'message' => $output_message));  
}

public function username_check($title_name)
{
    $username_exists = $this->users_model->get_user(array('username' =>$username));
    if (is_null($username_exists))
    {
        $this->form_validation->set_message('username_check', 'The username already exists!');
        return FALSE;
    }
    else
    {
        return TRUE;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:51:16.233

这可能是因为您的回调函数正在使用未定义的变量。您应该将 $username 更改为 $title_name 或反之亦然。

```
public function username_check($username)
{
  $username_exists = $this->users_model->get_user(array('username' =>$username));
  if (is_null($username_exists))
  {
    $this->form_validation->set_message('username_check', 'The username already exists!');
    return FALSE;
  }
  else
  {
    return TRUE;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:03:14.590

你可以从规则做到这一点： $this->form_validation->set_rules('username', 'Username', 'required|is_unique[users.username]');

# asp.net-mvc-4 - Global.asax 应该驻留在具有多个项目的 ASP.NET MVC 4 解决方案的什么位置？

> ID：13575542
> 
> 赞同：0
> 
> 时间：2012-11-27T00:30:02.893
> 
> 标签：asp.net-mvc-4, global-asax

例如，如果我有一个包含两个项目的解决方案：Project.Core 和 Project.Web。现在我将 Project.Web 设置为启动项目。global.asax 是否应该驻留在此项目 (Project.Web) 的根目录中？如果是这样，我是否还必须在我的 Project.Web 中包含 App_Start 文件夹，因为该文件夹具有在 global.asax 中调用的类（如路由、过滤器、捆绑、身份验证等）？

如果相反，我将 global.asax 放在 Project.Core 上（不是启动项目）......它还能工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:41:02.107

global.asax 文件可以帮助处理与 Web 相关的事件（Application_Start、Application_BeginRequest 等），因此将其放在 Project.Core 中会破坏创建两个项目的目的。

# c++ - 为什么在 Windows 的 sys/types.h 中没有定义 S_IRWXG 和 S_IRWXO？

> ID：13575543
> 
> 赞同：2
> 
> 时间：2012-11-27T00:30:03.520
> 
> 标签：c++, unix, windows-xp, porting, systypes.h

我正在将一些软件从 Unix 移植到 Window，并在 Windows XP SP3 上使用 g++ v4.7。我有一个如下所示的头文件声明：

```
#include <string>
#include <sys/types.h>

using namespace std;

bool MakeDir(const string &dirName,
             mode_t mode =S_IRWXU | S_IRWXG | S_IRWXO); 
```

但是当我编译它时，我得到了这个错误：

```
FileName.h:35:40: error: 'S_IRWXG' was not declared in this scope
FileName.h:35:50: error: 'S_IRWXO' was not declared in this scope 
```

为什么会`sys/types.h`定义`S_IRWXU`但不是`S_IRWXG`呢`S_IRWXO`？

我找到了一些在 Windows 上定义它们的代码，如下所示：

```
#define S_IRWXG (S_IRWXU >> 3)
#define S_IRWXO (S_IRWXG >> 3) 
```

这似乎是一个混乱并且容易打破，有没有更好的方法来获得这些定义？我不想使用 Cygwin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-14T15:43:30.120

S_IRWXG 和 S_IRWXO 对于 Linux 来说是实际的，在 Windows 上你不需要它们，你可以从 Linux 获得值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:58:00.303

Windows XP 在其文件系统中没有概念组和其他权限，因此没有定义这些宏。

# mysql - 将 MySQL 数据库从 utf8_general_ci 更改为 utf8_bin - 好主意吗？

> ID：13575552
> 
> 赞同：3
> 
> 时间：2012-11-27T00:30:36.717
> 
> 标签：mysql

我最近了解到，如果您不希望 MySQL 将 å 读为 a 或 ö 读为 o，则需要使用 uft8_bin 排序规则。

我的网站是多租户的，所以不是每个人都需要 utf8_bin 排序规则。我的一些客户在挪威和芬兰，他们要求正确订购这些“非英语”字符。

但是无论如何将表设置为 utf8_bin 是个好主意吗？

还是有更好的方法，例如仅在非英语国家/地区将排序规则设置为 utf8_bin ？

这是否会影响来自英国国家的任何人，或者 utf8_bin 的行为与 utf8_general_ci 相同，但具有正确排序 å、ö 等的额外好处？

还是有比 utf8_bin 更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:32:54.220

`utf8_general_ci`正确排序 å 和 ö。`utf8_*_ci`和排序规则之间的区别在于`utf8_bin`前者是不区分*大小写的*。

# emacs - minibuffer中匹配括号的显示行

> ID：13575554
> 
> 赞同：5
> 
> 时间：2012-11-27T00:30:48.977
> 
> 标签：emacs, minibuffer

当我在 emacs 中键入右括号时，迷你缓冲区会显示包含匹配左括号的行。有没有办法在 minibuffer 中显示括号、括号等的匹配行而不删除括号并重新键入它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T02:46:02.527

我假设您已打开 show-paren-mode 以突出显示匹配的括号：

```
(show-paren-mode t) 
```

如果括号不在屏幕上，这将显示匹配的行：

```
(defadvice show-paren-function (after my-echo-paren-matching-line activate)
  "If a matching paren is off-screen, echo the matching line."
  (when (char-equal (char-syntax (char-before (point))) ?\))
    (let ((matching-text (blink-matching-open)))
      (when matching-text
        (message matching-text))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:11:56.137

您可以这样做`M-x blink-matching-open RET`，如果您喜欢经常使用它，请将其绑定到一个键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T16:20:16.120

scotfrazer 的答案非常适用于括号、大括号等，但如果您需要匹配 ruby​​ def...end 或 class...end 分隔符（或其他语言中的类似） ，来自 emacs.stackexchange 的[这个答案](https://emacs.stackexchange.com/a/3468/261)效果很好：

```
(defvar match-paren--idle-timer nil)
(defvar match-paren--delay 0.5)
(setq match-paren--idle-timer 
     (run-with-idle-timer match-paren--delay t #'blink-matching-open)) 
```

如果将光标停在分隔符上 0.5 秒或更长时间，匹配的（页外）分隔符将突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T22:49:21.367

您可以安装[Mic Paren](http://www.emacswiki.org/emacs/MicParen)（在 MELPA 上可用：）`M-x package-install mic-paren`并使用`M-x paren-activate`

# mysql - 如何根据两个不同的列选择行？

> ID：13575560
> 
> 赞同：0
> 
> 时间：2012-11-27T00:31:08.120
> 
> 标签：mysql

我有一张这样的桌子

```
id  type        type_id cust    ip_address      datetime
395 Category    5       0       119.63.196.29   2012-11-27 00:34:21
394 Cart        812     0       84.208.217.178  2012-11-27 00:31:48
393 Cart        812     0       84.208.217.178  2012-11-27 00:31:41
392 Cart        812     0       84.208.217.178  2012-11-27 00:31:35
391 Product     812     0       84.208.217.178  2012-11-27 00:31:34 
```

我想选择 4 行，按 id desc 排序，它们具有不同的 type+type_id 数据。

因此查询的结果将删除 id 393 和 392，因为 type 和 type_id 组合已经在 id 394 中。

伪代码： select * from table where type and type_id is distinct from resultset, order by id desc limit 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:33:26.497

```
select * from table
where id in 
(
  select min(id)
  from table 
  group by  type, type_id 
)
order by id desc
limit 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:39:22.190

```
SELECT *
  FROM AnonymousTable AS a1
  JOIN (SELECT type, type_id, MAX(id) AS id
          FROM AnonymousTable
         GROUP BY type, type_id
       ) AS a2
    ON a1.type = a2.type AND a1.type_id = a2.type_id AND a1.id = a2.id 
```

不过，由于 ID 值可能是唯一的，您可以简化子查询和后续连接：

```
SELECT *
  FROM AnonymousTable AS a1
  JOIN (SELECT MAX(id) AS id
          FROM AnonymousTable
         GROUP BY type, type_id
       ) AS a2
    ON a1.id = a2.id 
```

即使`id`不是唯一的（只要`id`,`type`和的组合`type_id`是唯一的），较长的形式也会产生正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:39:25.257

试试这个：

```
SELECT t1.* 
FROM table t1
INNER JOIN 
(
   SELECT MAX(id) maxid, type_id, type
   FROM table
   GROUP BY type_id, type
) t2 ON t1.id = t2.maxid AND t1.type = t2.type AND t1.type_id = t2.type_id
ORDER BY t1.id desc 
LMIT 4; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/94b83/1)

# php - 将 PHP 变量传递给 onClick 方法

> ID：13575561
> 
> 赞同：0
> 
> 时间：2012-11-27T00:31:12.967
> 
> 标签：php, parameters, onclick

我正在使用 PHP 从 MySQL 中提取一些数据，并且需要将 ID 作为参数传递给 onClick() 方法。

```
while($row = mysql_fetch_array($result))
{   
  echo '<a href=# onclick="showFilm('<?php echo $row['ID'] ?>')">' . 
    $row['Title'];
} 
```

我在`echo`语句中遇到语法问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:32:44.710

是的，您正在尝试在一行 php.ini 中打开一个 php 标签。做这个

```
echo '<a href="#" onclick="showFilm(' . $row['ID'] .')">' . $row['Title'] . '</a>'; 
```

还有一个`</a>`你错过的结束。理想情况下，您不会使用 onclick ，但这不是您所要求的，也不会在那里中断。哦，应该引用 href 的值。

所以，既然你问了，假设你想使用 jQuery 而不是 onclick

```
echo '<a href="#" class="showfilm" data-filmid="' . $row['ID'] .'">' . $row['Title'] . '</a>'; 
```

您需要包含 jquery 库。请参阅此[http://docs.jquery.com/How_jQuery_Works](http://docs.jquery.com/How_jQuery_Works)，您需要在单独的 js 文件之前`</body>`或在单独的 js 文件中使用自己的脚本。

```
<!-- the rest of your html blah blah -->
<script src="jquery.js"></script>
<script src="your-other-js-funcs.js"></script>
<script>
$(function(){
    $('.showfilm').on('click', function(e){
        e.preventDefault(); // stops the link doing what it normally 
                            // would do which is jump to page top with href="#"
        showFilm($(this).data('filmid'));
    });
});
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:35:47.333

另一种方式：

```
<?php while($row = mysql_fetch_array($result)) { ?>   
    <a href=# onclick="showFilm('<?php echo $row['ID'] ?>')"> <?php echo $row['Title'] ?> </a>
<?php } ?> 
```

不要忘记在最后关闭 a 标签。在您的代码中没有看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:36:24.073

你的 HTML

```
<?php while($row = mysql_fetch_assoc($result)): ?>
    <a href="#showFilm" data-film-id="<?php echo $row['ID'] ?>">
        <?php echo $row['Title'] ?>
    </a>
<?php endwhile ?> 
```

你的 jQuery

```
$('a[href=#showFilm]').click(function(event) {
    showFilm( $(this).attr('data-film-id') );
    event.preventDefault();
}); 
```

# python - 从 Python 2.7 中的数字列表中删除一组索引的最有效方法是什么？

> ID：13575562
> 
> 赞同：8
> 
> 时间：2012-11-27T00:31:13.977
> 
> 标签：python, list, indexing

所以我想知道如何使用 Python 2.7 最有效地获取用于表示如下索引的值列表：（但长度最多为 250,000+）

```
indices = [2, 4, 5] 
```

并从一个更大的列表中删除该索引列表，如下所示：（3,000,000+ 个项目）

```
numbers = [2, 6, 12, 20, 24, 40, 42, 51] 
```

得到这样的结果：

```
[2, 6, 20, 42, 51] 
```

我正在寻找一种有效的解决方案。我知道有很多方法可以做到这一点，但这不是我的问题。效率是。此外，此操作必须执行多次，并且列表都将呈指数级变小。我没有一个方程来表示随着时间的推移它们会变小多少。

编辑：

数字必须始终在列表中保持排序，或者在删除索引后返回排序。称为索引的列表可以排序或不排序。它甚至不必在列表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T00:41:04.087

您可能需要考虑使用[numpy](http://numpy.scipy.org/)库来提高效率（如果您正在处理整数列表，这可能不是一个坏主意）：

```
>>> import numpy as np
>>> a = np.array([2, 6, 12, 20, 24, 40, 42, 51])
>>> np.delete(a, [2,4,5])
array([ 2,  6, 20, 42, 51]) 
```

注释`np.delete`：[http ://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.delete.html)

保持主数组不变，但维护一个掩码数组可能也值得考虑（虽然也没有对此进行任何速度测试......）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T01:41:32.160

我怀疑在索引之间获取整个切片可能比列表理解更快

```
def remove_indices(numbers, indices):
    result = []
    i=0
    for j in sorted(indices):
        result += numbers[i:j]
        i = j+1
    result += numbers[i:]
    return result 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T00:36:35.130

另外的选择：

```
>>> numbers = [2, 6, 12, 20, 24, 40, 42, 51]
>>> indicies = [2, 4, 5]
>>> offset = 0
>>> for i in indicies:
...     del numbers[i - offset]
...     offset += 1
...
>>> numbers
[2, 6, 20, 42, 51] 
```

**编辑：**

因此，在这个答案完全错误之后，我对每种不同的方法进行了基准测试：

![在此处输入图像描述](../Images/a0fc28fb2d6a84f5f3874c7f71a7e674.png)

横轴是项目数，纵轴是以秒为单位的时间。

最快的选择是使用切片来构建一个新列表（来自@gnibbler）：

```
def using_slices(numbers, indices):
    result = []
    i = 0
    for j in indices:
        result += numbers[i:j]
        i = j + 1
    result += numbers[i:] 
```

令人惊讶的是它和“设置”（@Eric）击败`numpy.delete`（@Jon Clements）

这是[我使用的脚本](https://gist.github.com/4151954)，也许我错过了一些东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T00:40:59.093

这是我的第一种方法。

```
def remove_indices(numbers, indices):
    indices = set(indices)
    return [x for i, x in enumerate(numbers) if i not in indices] 
```

这是一个测试模块，用于在您指定的条件下对其进行测试。（300 万个元素，需要删除 25 万个元素）

```
import random

def create_test_set():
    numbers = range(3000000)
    indices = random.sample(range(3000000), 250000)
    return numbers, indices

def remove_indices(numbers, indices):
    indices = set(indices)
    return [x for i, x in enumerate(numbers) if i not in indices]

if __name__ == '__main__':
    import time
    numbers, indices = create_test_set()
    a = time.time()
    numbers = remove_indices(numbers, indices)
    b = time.time()
    print b - a, len(numbers) 
```

在我的笔记本电脑上大约需要 0.6 秒。如果您要多次使用它，您可以考虑预先设置索引。

（FWIW bradley.ayers 解决方案花费的时间比我愿意等待的时间长。）

**编辑**：这稍微快一点：（0.55 秒）

```
def remove_indices(numbers, indices):
    return [numbers[i] for i in xrange(len(numbers)) if i not in indices] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-27T00:41:51.933

效率不高，但方法不同

```
indices = set([2, 4, 5])

result = [x for i,x in enumerate(numbers) if i not in indices] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-21T14:21:08.970

实现这一目标的另一种不同方法：

```
>>> numbers = [2, 6, 12, 20, 24, 40, 42, 51]
>>> indices = [2, 4, 5]
>>> [item for item in numbers if numbers.index(item) not in indices]
[2, 6, 20, 42, 51] 
```

# python - 尝试从声音和 zip 文件中保存 jpeg 图像时出错

> ID：13575565
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:31:32.867
> 
> 标签：python, python-3.x

我想在 Python 中执行以下操作：-获取声音文件-将其转换为带有 gzip（gz 扩展名）的 zip 文件-然后将其保存为 jpg 扩展名

这是我试过的代码：

```
import gzip

# write compressed file
with gzip.open('sound.wav', 'wb') as f:
    f.write(content)

# read it again
with gzip.open('my_file.jpg', 'rb') as f:
    content = f.read() 
```

我得到了这个错误：

```
 f.write(content)
NameError: name 'content' is not defined 
```

谁能解释一下如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:40:58.510

`content`应该包含您要写入的文件的内容。由于您从未指定`content`变量，因此当您到达 时`f.write(content)`，Python 不知道是什么`content`并引发错误。如果`sound.wav`是您的`.wav`文件，请尝试：

```
In [1]: import gzip

In [2]: with open('sound.wav', 'rb') as f:
   ...:     o = gzip.open('zipped_file.gz', 'wb')
   ...:     o.write(f.read())
   ...:     o.close()
   ...:
   ...: 
```

这将使用以下内容写入您的`zipped_file.gz`文件（我在不支持的`sound.wav`Python 2.6 上运行此文件，但如果您使用的是 2.7+，则使用您所做的语句会更好）。至于这部分，我不是 100% 确定我理解 - 你只是想将你的文件重新保存为? 如果您想将它们都保存在同一个存档中，您将无法使用，但如果您出于某种原因想要重新保存到新存档中，我想您可以试试这个：`with``gzip``with``jpg``gz``jpg``gzip`

```
In [3]: j = gzip.open('my_file.jpg', 'wb')

In [4]: o = gzip.open('zipped_file.gz', 'rb')

In [5]: j.write(o.read())

In [6]: j.close()

In [7]: o.close() 
```

# json - Spring MVC，处理 JSON 请求...我有一些问题要理解

> ID：13575568
> 
> 赞同：0
> 
> 时间：2012-11-27T00:31:37.263
> 
> 标签：json, spring, jquery, spring-mvc

我正在研究可从 STS 仪表板下载的 Spring MVC showwcase。

现在我正在研究 Spring MVC 如何映射资源，但我在理解以下内容时遇到了一些问题：

所以，我有以下链接，它会生成一个指向“/mapping/produces”文件夹的 HTTP 请求：

```
 <li>
        <a id="byProducesAcceptJson" class="writeJsonLink" href="<c:url value="/mapping/produces" />">By produces via Accept=application/json</a>
    </li> 
```

如您所见，此链接具有名为“writeJsonLink”的类，并且对于该类，定义了单击链接时触发的以下 JQuery 函数：

```
$("a.writeJsonLink").click(function() {

    var link = $(this); // Variable that referer the clicked link in the DOM

    // Execute AJAX call
    $.ajax({ 
        url: this.href,     // Address to which the request is addressed        
        beforeSend: function(req) {     // Before send the Http Request call a function passing it the referer to the HTTP Request
            if (!this.url.match(/\.json$/)) {                               // If the url of the clicked link end with .json
                req.setRequestHeader("Accept", "application/json");         // Add to the HTTP Request theheader Accept: application/json 
            }
        },
        success: function(json) {
            MvcUtil.showSuccessResponse(JSON.stringify(json), link);
        },
        error: function(xhr) {
            MvcUtil.showErrorResponse(xhr.responseText, link);
        }});
    return false;
}); 
```

好的，我已经评论了代码以尝试理解它的行为（我是 Javascript 和 JQuery 的初学者），并且似乎我认为这个脚本的行为如下：当我点击链接时，启动发送之前的函数对 Web 应用程序的 ajax 调用检查单击链接的 url 是否是以 .json 扩展名结尾的地址。

在这种情况下，我的 URL 不以 .json 结尾（因为我的 url 指向文件夹：/mapping/produces 而不是指向 .json 文件），因此该函数不添加标题“Accept”，“ application/json" 到 HTTP 请求正文字段。

好的，现在我的问题是了解这段代码的作用：

```
 success: function(json) {
            MvcUtil.showSuccessResponse(JSON.stringify(json), link);
        }, 
```

在成功的情况下，调用具有名为 json 的参数的函数，该函数只需调用名为 showSuccessResponse 的方法，将 json obkect 转换为 String 和链接。

现在，我知道 showSuccessResponse 做了什么（我用它来创建一个 span 标签，在我的页面中单击的链接旁边显示一条消息）。

问题是：我在成功案例中传递给函数的json参数是谁。我正在将此参数转换为字符串，但是：我何时何地创建了 id？

如果我在单击链接时执行我的示例（在链接旁边）出现以下消息：**{“foo”：“bar”，“fruit”：“apple”}**

似乎它被创建了一个具有以下键\值内容的 JSON 对象：

**富：酒吧**

**水果：苹果**

但是它是在哪里创建的？！？！嘘

当我单击链接并执行该方法时，我的堆栈跟踪中有以下消息：

```
01:27:38 [tomcat-http--28] DispatcherServlet - DispatcherServlet with name 'appServlet' processing GET request for [/spring-mvc-showcase/mapping/produces]
01:27:38 [tomcat-http--28] RequestMappingHandlerMapping - Looking up handler method for path /mapping/produces
01:27:38 [tomcat-http--28] RequestMappingHandlerMapping - Returning handler method [public org.springframework.samples.mvc.mapping.JavaBean org.springframework.samples.mvc.mapping.MappingController.byProducesJson()]
01:27:38 [tomcat-http--28] DispatcherServlet - Last-Modified value for [/spring-mvc-showcase/mapping/produces] is: -1
01:27:38 [tomcat-http--28] RequestResponseBodyMethodProcessor - Written [JavaBean {foo=[bar], fruit=[apple]}] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@360eb2b8]
01:27:38 [tomcat-http--28] DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'appServlet': assuming HandlerAdapter completed request handling
01:27:38 [tomcat-http--28] DispatcherServlet - Successfully completed request 
```

你能帮我理解发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:11:27.767

也看一下服务器端代码。您会注意到**/mapping/produces** URL 映射到 MappingController 中的处理程序方法：

```
@RequestMapping(value="/mapping/produces", method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody JavaBean byProducesJson() {
    return new JavaBean();
} 
```

这里有两件重要的事情：

*   通过在返回类型上放置**@ResponseBody**注解，Spring 会将返回的 JavaBean 实例直接序列化为 HTTP 响应
*   **produce=MediaType.APPLICATION_JSON_VALUE**会告诉 Spring 在序列化返回的对象时应该使用 JSON 格式

如您所见，此控制器方法仅返回[JavaBean 类](https://github.com/SpringSource/spring-mvc-showcase/blob/master/src/main/java/org/springframework/samples/mvc/mapping/JavaBean.java)的新实例，该实例具有以下默认属性：

```
public class JavaBean {
...
    private String foo = "bar";
    private String fruit = "apple";
...
} 
```

结果，您将在响应中获得提到的**{"foo":"bar","fruit":"apple"}** JSON。

您还可以从日志中找出调用 URL 时哪个控制器方法正在处理您的请求：

```
01:27:38 [tomcat-http--28] RequestMappingHandlerMapping - Looking up handler method for path /mapping/produces
01:27:38 [tomcat-http--28] RequestMappingHandlerMapping - Returning handler method [public org.springframework.samples.mvc.mapping.JavaBean org.springframework.samples.mvc.mapping.MappingController.byProducesJson()] 
```

# arrays - 用 PHP 连接两个关联数组

> ID：13575576
> 
> 赞同：0
> 
> 时间：2012-11-27T00:32:53.217
> 
> 标签：arrays, array-merge

我正在尝试将来自 Wordpress 提要的数据与 Google Analytics API 数据合并，以创建一个包含每个帖子的页面浏览量的 Wordpress 帖子信息表。我想我可以匹配帖子网址来完成此操作，但我不确定如何执行此操作。我花了一些时间从两个来源获取数据，如下所示：

**print_r($分析);** 返回：

```
Array ( 
 [0] => Array ( 
  [url] => blog-post-url-121 
  [pageViews] => 34326 ) 
 [1] => Array ( 
  [url] => blog-post-url-245 
  [pageViews] => 14642 ) 
 [2] => Array ( 
  [url] => blog-post-url-782
  [pageViews] => 13201 )
 ) 
```

...我有将近 2,000 个实例

**print_r($blogfeed);** 返回

```
Array ( 
 [0] => Array ( 
  [url] => blog-post-url-457
  [PostID] => 87249 
  [Date] => 2012-11-26 15:58:45 
  [Author] => John-Smith 
  [Title] => Blog Post Title #457
  [Categories] => Dining, News ) 
 [1] => Array ( 
  [url] => blog-post-url-245
  [PostID] => 88148 
  [Date] => 2012-11-26 15:00:20 
  [Author] => Mary-Jones 
  [Title] => Blog Post Title #245
  [Categories] => Events, Nightlife ) 
) 
```

我确信“关键”网址字段存在并且在博客提要和 Google Analytics API 数据中都匹配。所需的结果数组只需将“pageViews”数据添加到 $blogfeed 数组中的信息。所以

```
[1] => Array ( 
 [url] => blog-post-url-245
 [PostID] => 88148 
 [Date] => 2012-11-26 15:00:20 
 [Author] => Mary-Jones 
 [Title] => Blog Post Title #245
 [Categories] => Events, Nightlife
 [pageViews] => 14642 ) 
```

我尝试了 array_merge、array_merge_recursive 的不同变体，并在两个数组变量之间添加了一个“+”，但没有任何运气。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:40:11.747

这可以在 中完成`O(n)`，我认为...

```
foreach ($analytics as $viewElement) {
    $viewAssoc[$viewElement['url']] = $viewElement['pageViews'];
}
foreach ($blogfeed as $index => $blogElement) {
    $blogElement['pageViews'] = $viewAssoc[$blogElement['url']];
    $newBlogfeed[$index] = $blogElement;
} 
```

我没有设置用于测试的 php 环境，但这应该可以。我认为没有“一个命令”的解决方案。

# cloud - 更改私有云设置的 external_uri

> ID：13575579
> 
> 赞同：2
> 
> 时间：2012-11-27T00:33:18.923
> 
> 标签：cloud, installation, private, cloud-foundry

我正在尝试使用 cloudfoundry 设置本地/私有云，因此我需要将本地域设置为我的目标 url（而不是 .vcap / .cloudfoundry.com）。我在论坛的某个地方读到，通过更改 cloud_controller.yml 中的 external_uri 值，我们可以实现这一点。(vcap/cloud_controller/config/cloud_controller.yml)

但是在我更改了文件中的值之后，我需要重新启动什么？我尝试重新应用配置选项或重新启动 vm（我在 vmware fusion 上运行它），但是重置回旧的配置值。

任何有关使用 cloudfoundry 设置私有云的帮助/指南都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:29:07.867

As described in the comment, posting your OSS question at the [VCAP-DEV google group](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev) is your best bet.

# haskell - 你如何证明一个函数对于它的类型是唯一的？

> ID：13575583
> 
> 赞同：14
> 
> 时间：2012-11-27T00:33:38.533
> 
> 标签：haskell, types, proof

`id`是 type 的唯一函数，也是 type`a -> a`的 `fst`唯一函数`(a,b) -> a`。在这些简单的情况下，这很容易看出。但总的来说，您将如何证明这一点？如果同一类型有多个可能的函数怎么办？

或者，给定一个函数的类型，你如何推导出该类型的唯一（如果这是真的）函数？

编辑：我对当我们开始向类型添加约束时会发生什么特别感兴趣。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T06:05:50.467

您正在寻找的结果来自 Reynolds 的参数性，并且最著名的是 Wadler 在[定理中的 free](http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf)。

我见过的证明基本参数结果的最优雅的方法是使用“单例类型”的概念。本质上，给定任何 ADT

```
data Nat = Zero | Succ Nat 
```

存在一个索引族（也称为 GADT）

```
data SNat n where
   SZero :: SNat Zero
   SSucc :: SNat n -> SNat (Succ n) 
```

我们可以通过将所有类型“擦除”为无类型语言，从而为我们的语言赋予语义，从而将其`Nat`擦除`SNat`为同一事物。然后，通过语言的打字规则

```
id (x :: SNat n) :: SNat n 
```

`SNat n`只有一个居民（它的单身人士），因为语义是通过擦除给出的，所以函数不能使用它们的参数的类型，所以唯一可以从`id`any`Nat`上返回的值是你给它的数字。这个基本论证可以扩展来证明大多数参数化结果，并且被 Karl Crary 在参数化结果[的简单证明技术中](http://www.cs.cornell.edu/talc/papers/param.pdf)使用，尽管我在这里的演示文稿受到了[Stone 和 Harper的启发](http://www.cs.hmc.edu/~stone/papers/tocl-final.pdf)

# javascript - 基础网格与 jQuery 日期选择器冲突？

> ID：13575584
> 
> 赞同：2
> 
> 时间：2012-11-27T00:33:47.040
> 
> 标签：javascript, jquery, zurb-foundation

我有以下示例代码，如果我将基础脚本放在 jQuery 脚本之前，它可以正常工作，但如果我将基础脚本放在 jQuery 之后，日历不会显示。

我想在 jQuery 之前还是之后放置基础脚本（或其他 jQuery 相关脚本）？

从基础网站，他们的示例建议将基础脚本放在 jQuery 脚本之后。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/foundation/3.2.2/javascripts/foundation.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#datepicker').datepicker();
    });
</script>

<div id="datepicker"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:38:04.863

考虑到[这个 git issue](https://github.com/zurb/foundation/issues/86)，我注意到foundation.min.js 包含jQuery（1.8.2，不是1.8.3），两个版本可能有冲突。如果您只是取出单独的 jQuery，会发生什么？

如果您绝对需要 1.8.3，我会重建您的基础脚本以包含它而不是 1.8.2

# javascript - 通过 jQuery 从返回的 JSON 对象渲染 ruby 对象

> ID：13575585
> 
> 赞同：0
> 
> 时间：2012-11-27T00:33:48.230
> 
> 标签：javascript, jquery, ruby-on-rails, json, render

我不知道这是否是正确的方法，但我想完全按照标题所说的去做。我缺少一些 jQuery 概念，因为我是新手。

我正在使用[jQuery.rest：https://github.com/lyconic/jquery.rest](https://github.com/lyconic/jquery.rest)

此脚本会定期检查在线和离线用户是否已更新：

```
<!-- Online checker -->
<script type="text/javascript">
  $(function(){
    setInterval (checkTrackings, 5000);
    var js = '<checkTrackings> ';
    function checkTrackings(){     
      $.read(
        '/users/{id}/check',
        { id: <%= @user.id.to_json %> },
        function (response) {
          $("ul#online").empty();
          $("ul#offline").empty();

          // Code to add users back to list
          $("ul#online").html('<%= escape_javascript(render(@online_users)).html_safe %>')
          $("ul#offline").html('<%= escape_javascript(render(@offline_users)).html_safe %>')

          console.log(js + 'Check trackings');
        }
      );
    }
  });
</script> 
```

但是，我需要返回的 JSON 对象，而不是 @online_users 和 @offline_users，并且需要将它们转换为所述变量。该脚本调用的方法在这里：

```
 # Updates contacts
  def check
    @online_users = Array.new
    @offline_users = Array.new

    @user = User.find(params[:id])
    @followed_users = @user.followed_users

    @followed_users.each do |followed_user|
      @online_users.push(followed_user) if followed_user.state.online
    end

    @offline_users = @followed_users - @online_users

    respond_to do |format|
      format.js { render :json => { :online_users => @online_users, :offline_users => @offline_users } }
    end
  end 
```

任何其他提示也会很好。我对网络开发很陌生。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:44:28.450

您是否尝试过将响应记录在

```
function (response) {...} 
```

您的响应应该分别具有 response.online_users 和 response.offline_users 对象，因此登录为：

```
function (response) {
  console.log(response.online_users, response.offline_users);
  ...
} 
```

看看您的响应是否包含您的 json 对象？

因此，如果您有 response.online_users，您需要在 javascript 中执行此操作：

```
// Code to add users back to list
var online_users = response.online_users,
    online_users_len = online_users.length,
    buffer = [];

for(var i = 0; i < online_users_len;  i++) {
  buffer.push("<li>", online_users[i], "</li>");
}
          $("ul#online").html(buffer.join(""));
// Put the offline user count in ul#offline
          $("ul#offline").html(response.offline_users); 
```

# c++ - c++ 中简单 std::map 迭代的意外输出

> ID：13575588
> 
> 赞同：2
> 
> 时间：2012-11-27T00:34:09.847
> 
> 标签：c++, map, std

我有点难过，我以为是一些简单的代码。它以前可以工作，所以我不确定它为什么停止工作。这是一个单线程程序。

```
 Model *model;
    ModelMap::iterator model_map_iterator;

    cout << this->models.size() << endl;

    for( model_map_iterator = this->models.begin(); model_map_iterator != this->models.end(); model_map_iterator++ ){

        cout << "what" << endl;
        //model = model_map_iterator->second;
        //cout << *model;

    }

    cout << this->models.size() << endl; 
```

这是分别有 1、2 和 4 个模型时的输出。

```
$ program
    1
    what
    1

$ program
    2
    what
    what
    2

$ program
    4
    what
    what
    4 
```

如您所见，对于任何数量大于 2 的模型，“what”输出的数量为 2。我已经尝试了 2-5 个模型。它们都产生两个“what”字符串，但输出 std::map 的正确大小。

谁能帮我找出我做错了什么？

提前致谢...

**更新：**

提交整个代码库进行调试：

[https://github.com/homer6/modeler/tree/crudepythonmodeler](https://github.com/homer6/modeler/tree/crudepythonmodeler)

提交（00c01ad634df70cc7f67efba96b1503ffd63529c）

这是粗略的pythonmodeler 分支

README.md 包含 ubuntu 的安装步骤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:03:45.657

我想我找到了答案。

这是 ModelMap 的 typedef：

```
typedef ::std::map<Utf8String,Model*,Utf8StringComparator> ModelMap; 
```

我草率地将 Utf8StringComparator 中的签名更改为返回 int 而不是 bool。

感谢您对此进行调查。当我确定时我会确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:34:17.737

可能是 ModelMap::iterator 的问题。您可能想修改这是如何编写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:53:27.853

假设上面的代码打印出引用的结果，很明显`ModelMap`数据结构以某种方式被破坏了。几乎可以肯定，损坏发生在调用此函数之前。根据引用的代码和数据，无法准确判断地图是如何损坏的。最有可能的两个候选人是

1.  一些值的键发生了变化（假设数据结构确实是一个映射）。
2.  内部指针在某些时候被覆盖。

我可能会猜测后者，尽管这通常会导致崩溃而不是部分输出。一个潜在的原因可能是正在查看的对象恰好是函数引用返回的销毁对象。然而，这几乎都是猜测：要找到错误，您需要发布更多代码，同时删除许多不相关的代码（即，发布数百行代码不会给您答案问题在哪里确切地说，上面的代码也不会）。

# c# - Zend Framework 2 SOAP 与 .NET 不兼容

> ID：13575589
> 
> 赞同：4
> 
> 时间：2012-11-27T00:34:11.827
> 
> 标签：c#, php, .net, soap, zend-framework2

我正在尝试在我的 ZF2 应用程序中创建一个 SOAP 服务器，我可以使用向导使用 Visual Studio 将它导入到 C# 应用程序中。我已经创建了服务并使用soapUI 对其进行了测试。我在soapUI 中运行了WS-I 合规性测试，我的服务通过了它。但是，当我尝试使用 Visual C# Express 2008 将服务添加到 C# 应用程序中时，它说 HTML 文档没有 Web 服务发现信息。

这是我在 ZF2 控制器中使用的代码：

```
public function exampleAction() {
  if (isset($_GET['wsdl'])) {
    $soapAutoDiscover = new AutoDiscover();
    $soapAutoDiscover->setBindingStyle(array('style' => 'document'));
    $soapAutoDiscover->setOperationBodyStyle(array('use' => 'literal'));
    $soapAutoDiscover->setClass('SoapClass');
    $soapAutoDiscover->setUri($serverUrl);
    echo $soapAutoDiscover->generate()->toXml();
  } else {
    $soap = new Server($serverUrl . '?wsdl');
    $soap->setClass('SoapClass');
    $soap->handle();
  }
} 
```

这是 SoapClass 类：

```
class SoapClass{

  /**
   * returns the sum of two parameters
   * @param int $a
   * @param int $b
   * @return int
   */
  public function sum ($a, $b){
    return $a + $b;
  }

  /**
   * twice function doc
   * @param int $a
   * @return int
   */
  public function twice($a){
    return $a * 2;
  }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T22:53:20.863

在一遍又一遍地阅读和重新阅读我在此找到的一些帖子和文档之后，终于找到了解决方案：

SoapClass 很好，但在生成 wsdl 和服务器时，我必须进行一些更改：

```
public function exampleAction() {
  if (isset($_GET['wsdl'])) {
    //this is new:
    $soapAutoDiscover = new AutoDiscover(new \Zend\Soap\Wsdl\ComplexTypeStrategy\ArrayOfTypeSequence());
    $soapAutoDiscover->setBindingStyle(array('style' => 'document'));
    $soapAutoDiscover->setOperationBodyStyle(array('use' => 'literal'));
    $soapAutoDiscover->setClass('SoapClass');
    $soapAutoDiscover->setUri($serverUrl);
    //so this is:
    header("Content-Type: text/xml");
    echo $soapAutoDiscover->generate()->toXml();
  } else {
    $soap = new Server($serverUrl . '?wsdl');
    //drop this:
    //$soap->setClass('SoapClass');
    //and instead, add this:
    $soap->setObject(new DocumentLiteralWrapper(new SoapClass()));
    $soap->handle();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T21:57:42.873

我认为您需要指定运输方式：

```
$style = array('style'=>'document', 'transport'=>'http://schemas.xmlsoap.org/soap/http');
$soapAutoDiscover->setBindingStyle($style); 
```

标题应该是：

```
header('Content-type: application/soap+xml'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T21:50:27.603

在这里您可以阅读有关 ZF SOAP 组件兼容性的几个问题：

[http://framework.zend.com/issues/browse/ZF-6349](http://framework.zend.com/issues/browse/ZF-6349)

# claims-based-identity - thinktecture 身份服务器是否可以配置为允许与多个合作伙伴的联合身份

> ID：13575595
> 
> 赞同：1
> 
> 时间：2012-11-27T00:34:40.383
> 
> 标签：claims-based-identity, federated-identity, thinktecture-ident-server

我有以下挑战：

1.  我的公司需要为拥有自己的 ADFS 实例和 IP 的客户启用 SSO。（未来我相信我们也需要与其他公司联合）
2.  我们还需要继续支持客户针对我们的 SQL 数据库进行身份验证。

基本上我认为我需要做的是按照这里的描述进行设置[http://msdn.microsoft.com/en-us/library/hh446524.aspx](http://msdn.microsoft.com/en-us/library/hh446524.aspx)，但我想使用 thinktecture 身份服务器而不是使用ADFS。

为了支持 #2 我们使用 thinktecture 身份服务器，因为它可以轻松配置为查询现有 SQL 数据库的 STS 和 IDP。

thinktecture 可以设置为同时支持 1 和 2 吗？非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:36:46.283

是的 - 这在 v2 中都受支持。

另见：[https ://vimeo.com/51666379](https://vimeo.com/51666379)

# php - 将我的 PDO 声明转换为单例工厂类？

> ID：13575597
> 
> 赞同：0
> 
> 时间：2012-11-27T00:35:09.567
> 
> 标签：php, mysql, sql, pdo

我今天正在尝试优化我的 PHP 代码，并且我想为 PDO 连接设置一个单例工厂。先说明一下我现在的情况。

我有一个functions.php，里面有一堆函数，几乎在我拥有的每个页面的顶部

```
include 'functions.php'; 
```

就像许多人为他们的网站所做的那样。其中一个功能是我的 PDO 连接，如下所示：

```
function db_connect(){
$host = 'localhost';
$port = 3306; 
$database = 'mybigdb';
$username = 'user11';
$password = 'password1';

$dsn = "mysql:host=$host;port=$port;dbname=$database";

$db = new PDO($dsn, $username, $password);
return $db;
} 
```

在我的每个需要数据库连接的函数中，我都会有这样的东西：

```
function fetch_row($param1, $param2, $db=NULL){
if(is_null($db))$db=db_connect();

//Rest of code here

} 
```

这样我就可以传递我的数据库对象，但添加它以防万一它不包括在内。上面的代码工作正常，我已经使用了一段时间。但是，阅读有关 Singleton Factory 类的信息并认为这可能会更好。

我读[了这个关于单例工厂的答案，](https://stackoverflow.com/a/219599/1019588)但我不太确定如何使用它。我是一个上课和努力学习的菜鸟。我有一些问题...

1.  我会在他有 new ConnectionFactory(...) 的“...”中放什么？?
2.  我应该在哪里复制和粘贴课程代码？我会把它放在functions.php的顶部吗？
3.  我会在每个函数的开头放什么？我还应该尝试通过参数传递数据库对象吗？
4.  这种方法真的值得转换吗？或者是我目前的策略好吗。

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:46:23.537

你可以像这样创建一个单例。

```
class Connection {
  private static $_con = null;
  private function _constructor(){
      // here you instantiate de pdo conection
  }
  public static function GetInstace(){
      if ( self::$_con == null ) 
         self::$_con = new Connection();
      return self::$_con;
  }
} 
```

之后，您将执行以下操作：`$db = Connection::GetInstance();`

# c - C字符数组初始化

> ID：13575599
> 
> 赞同：1
> 
> 时间：2012-11-27T00:35:20.650
> 
> 标签：c, arrays, char

在以下代码中：

```
char *p = "Linux"; 
```

堆栈上的“Linux”内存还是程序的只读段？

参考文章[12 有趣的 C 面试问答](http://www.thegeekstuff.com/2012/08/c-interview-questions/)中的第 9 题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:38:53.363

该实现可以自由地将其存储在任何它想要的地方。它是一个常数，所以它可以在只读存储器中，但不是必须的。

> 我的 C 编程讲师总是说它在堆栈上，因此存在疑问。

他可能指的是指针。考虑：

```
char *p = "Linux";
p = "Rules"; 
```

在第二行中，从指向“Linux”变为指向“Rules”。刚刚改变的那个东西在堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:44:07.393

正如链接所说，它不存储在动态分配的内存中，而是存储在代码本身所在的内存中。即只读部分。因此，尝试更改它会导致段错误的原因。

# c# - 将 GetResponseStream 输出返回到另一个函数，响应处置呢

> ID：13575607
> 
> 赞同：2
> 
> 时间：2012-11-27T00:35:50.687
> 
> 标签：c#, getresponsestream

我正在研究下载管理器项目，我正在使用：

```
public Stream GetStream(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    return response.GetResponseStream();
} 
```

然后在 while 语句中使用返回的流作为输入流和 FileStream 作为输出流：

```
Stream InputStream = GetStream("http://test_url/test.zip");
Stream OutputStream = new FileStream("d:\\test.zip", FileMode.Create, FileAccess.Write));
do
{
    readSize = InputStream.Read(buffer, 0, buffSize);
    OutputStream.Write(buffer, 0, (int)readSize);
}
while (readSize > 0); 
```

在大约 20 - 30 MB 后使用我的 256kpps 连接下载超过 50 MB 的文件时，readSize 变为 0 而没有错误

我的问题是： Response 对象有什么问题吗，它被处理了吗？？？？或者是什么问题？

提前谢谢你，如果我不能更好地解释，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:14:14.603

您没有处理 HttpWebRequest / HttpWebResponse 对象，这可能会导致问题 - 对同一服务器的并发连接数存在内置限制。

您应该执行以下操作：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
using(HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    using(Stream responseStream = response.GetResponseStream())
    {
        using(Stream outputStream = new FileStream(...))
        {
            responseStream.CopyTo(outputStream);
        }
    }
} 
```

`Stream.CopyTo`是 .NET 4.0 中的新功能。如果您使用的是 .NET <= 3.x，则需要[编写自己的](https://stackoverflow.com/questions/1933742/how-is-the-stream-copytostream-method-implemented-in-net-4).

# mediaelement.js - mediaelement.js：循环图标/图像不出现

> ID：13575613
> 
> 赞同：3
> 
> 时间：2012-11-27T00:36:28.997
> 
> 标签：mediaelement.js

循环图标/图像没有出现在[http://mediaelementjs.com/examples/?name=loop](http://mediaelementjs.com/examples/?name=loop)的示例中，我也无法让它出现在我自己的项目中。该功能工作得很好，只是图标没有出现（显示空白）。检查了所有的css，看起来很好。IE9 需要，但似乎不适用于任何浏览器。

# python - AttributeError：“str”对象没有属性“slice”

> ID：13575622
> 
> 赞同：3
> 
> 时间：2012-11-27T00:37:30.613
> 
> 标签：python

我正在编写一个 Sublime2 插件并进行了一些斗争。

代码是：

```
 def run(self, edit):
    self.edit            = edit
    self.view.window().show_input_panel("New Controller and View Path (ex: client_area/index )", "", self.trigger, None, None)

  def trigger(self, user_entry):
    formatted_entry = user_entry.encode('utf-8')
    print formatted_entry.__class__
    print formatted_entry
    if formatted_entry.slice('/')[0] == '':
      #some code 
```

输出是：

```
<type 'str'>
client_area/index
Traceback (most recent call last):
  File "./PluginName.py", line 27, in trigger
AttributeError: 'str' object has no attribute 'slice' 
```

我是怎么得到的`'str' object has no attribute 'slice'`？（Python 版本为 2.6）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T00:39:21.077

字符串`slice`在 Python 中没有方法 - 你的意思是[`split`](http://docs.python.org/2/library/stdtypes.html#str.split)（或它的一些变体，例如[`rsplit`](http://docs.python.org/2/library/string.html#string.rsplit)）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T12:06:48.310

`$`slice() 方法不适用于 pandas.Series，因此首先我们必须使用 .str 将其转换为 StringMethods，然后我们可以应用切片表示法。

> > s=pd.Series(["2020", "2010", "2013"]) s 0 2020 1 2010 2 2013 dtype: object s.slice() # doesn't work s.str.slice(2,4) .astype(int) 0 20 1 10 2 13 数据类型：int32

# c - 如何在 MinTTY 下关闭回声？

> ID：13575624
> 
> 赞同：1
> 
> 时间：2012-11-27T00:37:41.077
> 
> 标签：c, windows, shell, mintty

我有一个在 MinTTY（cygwin 的 shell）下运行的程序并调用`GetConsoleMode`/`SetConsoleMode`失败。`_getch`也回声到控制台。这是一个本机 win32 应用程序，没有绑定到 cygwin 环境，所以任何 cygwin 函数都没有了。如何关闭回显以便输入密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:51:03.823

我基本上通过以下方式模拟了以下内容`popen`：

```
保存状态=$(stty -g)

/bin/echo -n "账号："
阅读帐户
/bin/echo -n "密码："
stty -echo
读取密码#这不会回显
stty "$save_state"

回声“”
回显帐户 = $acct 和密码 = $password
在 http://www.askdavetaylor.com/how_to_read_password_without_echoing_c.html#Z3FtcTtMHe0gJdES.99 阅读更多信息

```

# networking - 在 LAN 设备上看不到主机名

> ID：13575625
> 
> 赞同：1
> 
> 时间：2012-11-27T00:37:44.300
> 
> 标签：networking, hostname, dhcp

我正在尝试让我的 Android 2.3.5 手机在我的 LAN 网络上列出所有可能的 Raspberry Pi（运行 Raspbian）。网络上还有其他设备，所以我想用伪代码来做这件事的方法是：

```
foreach ip 0..254
    hn = gethostname("192.168.0." + ip);
    if(hn == "rpi*") {
        do_something();
    } 
```

我已经成功设置了 RPi 的主机名：

```
sudo hostname rpi0 
```

我的路由器显示 RPi 已连接到`192.168.0.4`. 我可以从我的 Win7 PC 中`ping`获取 ip 地址`192.168.0.4`，但是我无法`ping`获取主机名、`nslookup`ip 或主机名。

当我在手机上尝试使用 java 中的以下代码时，它声称它是可访问的，但是 get hostname 行返回的是 ip 地址而不是主机名，我认为如果找不到主机名，它应该这样做：

```
InetAddress inetAddress = InetAddress.getByAddress(ipAddress);
Log.d(TAG, inetAddress.isReachable(5000));
Log.d(TAG, inetAddress.getHostName()); 
```

有谁知道我做错了什么？这甚至是在 LAN 上查找所有一种类型的设备的明智方法吗？如果是这样，我相当确定我的 android 方面是正确的，但我对 LAN 知之甚少。

PS对不起，如果这个问题很长而且令人费解，我想包括我尝试过的所有内容。此外，我正在使用声称：

```
Software version "R36"
Hardware version 2.00 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:45:17.617

简而言之：您的 DNS 无法按您预期的方式工作 - 它在主机名`rpi0`和 IP 地址之间没有关联`192.168.0.4`。

这可能有多种原因，其中一个原因是，并非所有家用路由器都保留本地区域 - 如果您的路由器就是这种情况，那么您根本就不走运。

如果您的路由器确实保留了本地区域，请确保您的 PI 使用正确的主机名运行其 DHCP 请求 - 您可以通过在设置主机名后简单地断开/重新连接它们来做到这一点。

# css - 如何填充对齐块的背景？

> ID：13575639
> 
> 赞同：0
> 
> 时间：2012-11-27T00:39:03.767
> 
> 标签：css, layout, css-float

我有以下代码：

```
<div style="background-color:Aqua">
    <div style="float:left">left</div>
    <div style="float:right">right</div>
</div> 
```

我想显示...

```
left                                                                        right 
```

...具有浅绿色背景，但块不填充颜色。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:47:45.423

浮动 - 定位规则取决于某些东西，所以没有那个东西你永远不会对齐对象。因此，您应该使用以下顺序：

```
<div style="background-color:Aqua">
  <div style="float:right;max-width:50%;">Right</div><!-- 100% by default -->
  <div>Left</div>
  <div style="clear:right;"></div><!-- closing the floating -->
</div> 
```

否则：

```
<div style="background-color:Aqua">
  <div style="float:left;max-width:50%;">Left</div>
  <div>Right</div>
  <div style="clear:left;"></div>
</div> 
```

或两者：

```
<div style="background-color:Aqua">
  <div style="float:left;max-width:30%;">Left</div>
  <div style="float:right;max-width:30%;">Right</div>
  <div>Center</div>
  <div style="clear:both;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:49:23.320

我是否可以建议使用强大的 clearfix，尤其是这个：[http ://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)

添加这个CSS：

```
.clearfix:before,
.clearfix:after {
  content: ".";    
  display: block;    
  height: 0;    
  overflow: hidden; 
}
.clearfix:after {clear: both;}
.clearfix {zoom: 1;} /* IE < 8 */ 
```

然后给你的容器，父母aqua div a`class="clearfix"`

这是一个[小提琴演示](http://jsfiddle.net/9rUqf/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:40:56.020

清除你的浮动，例如`overflow: hidden`

```
<div style="background-color:Aqua; overflow: hidden">
    <div style="float:left">left</div>
    <div style="float:right">right</div>
</div> 
```

# file - 编译一个程序，只在编译失败时报告（不显示错误）

> ID：13575650
> 
> 赞同：2
> 
> 时间：2012-11-27T00:39:41.507
> 
> 标签：file, shell, compilation

`$2`有C文件的路径。问题是当我编译一个有错误的文件时，它会显示错误。我不想显示错误，我只想让它说：“$2 无法编译。” 有任何想法吗？

```
 cc $2
 if test ! $? = 0              
 then
        echo "$2 doesn't compile."
        exit 1    # exit failure    
 fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T00:53:38.790

您可以通过将其重定向到来抑制`cc`' 的输出`/dev/null`：

```
 if ! cc "$2" >/dev/null 2>&1 ; then
        echo "$2 doesn't compile."
        exit 1    # exit failure    
 fi 
```

# c# - 如何根据 C# 中的搜索条件合并 csv 文件中的多行？

> ID：13575653
> 
> 赞同：2
> 
> 时间：2012-11-27T00:40:05.537
> 
> 标签：c#, csv

有没有一种简单的方法来搜索 csv 字符串数组，然后在一行中写入某些数据位。目前它搜索一个 csv 文件并根据来自 TextBoxes 的两个用户输入提取某些数据，然后对其进行排序并将其写入另一个 csv 文件。

本质上，如果设备名称相同，我希望它在同一行上写入数据。假设一个设备称为“dev1 id1”，另一个设备称为“dev1 id2”。我不想把它们写在单独的行上（就像现在这样），我希望它写在一个组合的行上。就像是：

```
dev1,id1,id2 
```

代替：

```
dev1,id1

dev1,id2 
```

我曾尝试使用 for 循环和 if 语句，但它很快就会变得混乱。Bellow 是我当前的代码（抱歉，由于工作原因，我不得不重新输入任何错字）。

```
StreamWriter sw = new StreamWriter(@"c:\test.csv");
StreamReader sr = new StreamReader(@"c:\rtest.csv");

List<string> list = new List<string>();
string line = "Station,Device,Key,AOR";
string sta = textBox1.Text;
string[] devs = richTextBox1.Text.Split(',').Select(dev => dev.Trim()).ToArray();
string[] sort,strs;
bool cont;

sw.WriteLine(line);

while (!sr.EndOfStream)
{
    strs = line.Split(',');
    cont = (devs.Any(s => strs[1].IndexOf(s, StringComparison.OrdinalIgnoreCase) >= 0));
    if (strs[2].ToString() == sta && cont ==true)
    {
        list.Add(line.ToString());
    }
    line = sr.ReadLine();
}
sort = new string[list.Count];
list.CopyTo(sort);
Array.Sort(sort);

foreach (string var in sort)
{
    strs = var.Split(',');
    sw.WriteLine(string.Format("{2},{1},{0},{3}", strs[0], strs[1], strs[2], strs[3]));
}

sw.Close();
if (File.Exists(@"c:\test.csv")
{
    Process.Start(@"c:\test.csv");
} 
```

希望我的问题可以理解，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:19:14.017

您应该使用第 3 方解析器来读取您的 CSV 文件 - 它会减轻您的负担。

例如，使用[KBCsv](http://kbcsv.codeplex.com/releases/view/86060)，您的代码可能如下所示（最初用 VB.NET 编写，对于任何转换错误，我深表歉意）：

```
Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();
using (CsvReader reader = new CsvReader("Input.csv")) {
  foreach (string[] record in reader.DataRecordsAsStrings) {
    //assuming each record contains exactly 2 columns, under index 0 and 1
    string key = record[0];
    string value = record[1];
    List<string> targetList = null;
    if (!dict.TryGetValue(key, out targetList))
    {
      targetList = new List<string>();
      dict.Add(key, targetList);
    }
    targetList.Add(value);
  }
}
List<string> output = new List<string>();
foreach (KeyValuePair<string, List<string>> kv in dict)
{
  string outputCsvLine = kv.Key + "," + string.Join(",", kv.Value);
  output.Add(outputCsvLine);
}
System.IO.File.WriteAllLines("output.csv", output); 
```

为了编写输出，您可能需要考虑转义 CSV 特殊字符，例如逗号和引号，如果它们在您的值中。

**编辑：**如果您真的希望避免使用任何第 3 方组件（出于安全或其他原因），您可以将上述代码中的第 2 行和第 3 行更改为：

```
using (System.IO.StreamReader reader = new System.IO.StreamReader("Input.csv")) {
  foreach (string rawRecord in reader.ReadLine()) {        
    string[] record = rawRecord.Split(","); 
```

**免责声明：**使用这样的 CSV 文件是一种不好的做法，但对于您的特定示例，它会起作用。其余代码保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:39:29.433

使用逗号简单地拆分 CSV 行并不是一种可靠的方法。字段可以包含逗号，甚至是换行符。

正如所指出的，.NET 中有一个可以正确读取 CSV 文件的库。或者，您可以使用我在[用 C# 读取和编写 CSV 文件](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)一文中介绍的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:05:39.673

使用 Linq 清理您的代码。

*   GroupBy 获取每个键的一组值
*   选择将值重新连接在一起。

您所需要的只是实现 IEnumerable 的东西。我已经包含了一个非常基本的版本，它以“，”分割。

keySelector lambda 提取键
valueSelector lambda 提取值

```
 [TestMethod]
    public void CsvParser()
    {
        string columns = "Device,Id";
        string source = "Dev1,id1" + Environment.NewLine + "Dev1,id2" + Environment.NewLine + "Dev2,id3" + Environment.NewLine + "Dev2,id4";

        List<string> columnNames = columns.Split(',').ToList();

        int keyIndex = columnNames.IndexOf("Device");
        int valueIndex = columnNames.IndexOf("Id");

        GroupByKey(keyIndex, valueIndex, source);
    }

    private void GroupByKey(int keyIndex, int valueIndex, string source)
    {
        LineReader reader = new LineReader(new StringReader(source));

        Func<string[], string> keySelector = lineItems => lineItems[keyIndex];
        Func<string[], string> valueSelector = lineItems => lineItems[valueIndex];

        List<string> idsByDev = reader
            // .Skip(1)  <-- Uncomment if first row contains headers
            .GroupBy(keySelector, valueSelector, StringComparer.OrdinalIgnoreCase)
            .Select(device => device.Key + "," + string.Join(",", device))
            .ToList()
            ;

        Console.WriteLine( string.Join(Environment.NewLine, idsByDev ));
    }

    public class LineReader : IEnumerable<string[]>
    {
        private readonly TextReader source;

        public LineReader( TextReader source )
        {
            this.source = source;
        }

        public IEnumerator<string[]> GetEnumerator()
        {
            return new LineReaderEnumerator(this.source);
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        private class LineReaderEnumerator : IEnumerator<string[]>
        {
            private TextReader source;

            public LineReaderEnumerator(TextReader source)
            {
                this.source = source;
            }

            public void Dispose()
            {
                this.source.Dispose();
            }

            public bool MoveNext()
            {
                // Replace these lines with a good CSV parser
                string line = source.ReadLine();

                if (!String.IsNullOrEmpty(line))
                {
                    this.Current = line.Split(',');
                }
                else
                {
                    this.Current = null;
                }

                return this.Current != null;
            }

            public void Reset()
            {
                throw new NotImplementedException();
            }

            public string[] Current { get; private set; }

            object IEnumerator.Current
            {
                get { return Current; }
            }
        }
    } 
```

# mongodb - Meteor 没有更新远程服务器上的用户数据库

> ID：13575654
> 
> 赞同：0
> 
> 时间：2012-11-27T00:40:08.463
> 
> 标签：mongodb, meteor, account

我有一个使用 Meteor 帐户包的项目。我有一个没有用户名字段的用户登录。当我在 localhost 上运行时尝试更新它时，使用`Meteor.users.update({}, {$set:{username:"Zach Ary"}})`它效果很好，并且更改通过帐户 ui 和`meteor mongo`. 但是，当我将它部署到远程流星服务器并尝试更新它时，没有显示任何更改。有任何想法吗？

这是服务器上使用的代码（仅用于测试目的）

```
Meteor.users.allow({
  update:function(userId, upd) {
    console.log(upd)
    return true;
  }
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:57:20.427

不确定这是您的问题，但在开发服务器上 Meteor 会自动发布您的所有收藏。

当您捆绑和部署时，您需要手动发布您的集合。

服务器上是这样的：

```
Meteor.publish("userData", function () {
        return Meteor.users.find({_id: this.userId});
    }); 
```

并在客户端

```
 Meteor.subscribe("userData") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:12:12.113

好的，所以这让我措手不及。显然这与将其发布到服务器无关，而这只是一个误导性的巧合。问题源于我的更新命令`Meteor.users.update({}, {$set:{username:"Zach Ary"}})`。为此，它必须是`Meteor.users.update({_id:Meteor.userId()}, {$set:{username:"Zach Ary"}})`. 否则它会尝试更新以前登录的用户。我不知道这是一个错误，还是一个被误解的功能，但它似乎可以解决问题。

# php - 获取此 category.php 以显示某个类别！（WordPress）

> ID：13575656
> 
> 赞同：0
> 
> 时间：2012-11-27T00:40:48.860
> 
> 标签：php, wordpress

我试图让一个页面显示某个类别。这个特定的页面是“想法和想法”

我想写几行关于我的想法和想法，并在其下显示 ID 为 16 的 CATEGORY，名为“Thoughts”

我该怎么办？

这是我的主题 category.php：

```
<?php get_header(); ?>

<div id="wrap">
<!-- Main Content-->
    <img src="<?php bloginfo('template_directory');?>/images/content-top.gif" alt="content top" class="content-wrap" />
    <div id="content">
        <!-- Start Main Window -->
        <div id="main">
            <?php global $query_string; $catnum_posts = get_option('theme_catnum_posts') ;
        query_posts($query_string . "&showposts=$catnum_posts&paged=$paged&cat=$cat"); ?>
            <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

                <?php include(TEMPLATEPATH . '/includes/entry.php'); ?>

            <?php endwhile; ?>

                <?php if(function_exists('wp_pagenavi')) { wp_pagenavi(); }
                else { ?>
                    <?php include(TEMPLATEPATH . '/includes/navigation.php'); ?>
                <?php } ?>

            <?php else : ?>
                <?php include(TEMPLATEPATH . '/includes/no-results.php'); ?>
            <?php endif; wp_reset_query(); ?>
        </div>
        <!-- End Main -->

<?php get_sidebar(); ?> 
```

我试图改变：

```
query_posts($query_string . "&showposts=$catnum_posts&paged=$paged&cat=$cat"); ?> 
```

至

```
query_posts($query_string . "&showposts=$catnum_posts&paged=$paged&cat=16"); ?> 
```

然而它没有工作..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:38:54.873

类别页面上的 global`$query_string`几乎可以肯定已经定义了`cat`参数，这可能是它忽略您的`cat=16`. 我也会`query_posts`听从凯的建议并打电话来做新鲜事`wp_reset_query`。试试这个循环：

```
<?php $catnum_posts = get_option('theme_catnum_posts') ;
    wp_reset_query();
    $cat = 16;
    query_posts("&showposts=$catnum_posts&paged=$paged&cat=$cat"); ?>
        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

            <?php include(TEMPLATEPATH . '/includes/entry.php'); ?>

        <?php endwhile; ?> 
```

# box-api - 支持上传到 box.com 的简单应用程序

> ID：13575657
> 
> 赞同：0
> 
> 时间：2012-11-27T00:40:48.860
> 
> 标签：box-api

我正在尝试创建一个简单的 box.com 应用程序，该应用程序将支持文件夹创建和文件从我们的应用程序上传到 box.com 以供多个 box.com 用户使用。

我有一些问题：

1.  为了测试，我创建了一个新应用程序并指定我不希望它公开（在我们开发它时）。但是我无法将它添加到我的测试用户帐户中，因为我找不到它 - 那么我该如何测试它呢？如何将其添加到我的最终用户 box.com 帐户？

2.  这个想法是让 box.com 用户在我们的软件中输入他们的凭据或密钥或其他内容，以便我们可以在他们的帐户中自动上传文件和创建文件夹。但我读到的所有内容都是关于获取票证并将用户重定向到登录页面。我们需要自动化这个过程，这样我们就可以在没有 box.com 用户在场的情况下上传文件/创建文件夹。这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:35:12.420

Box.com 总是需要`auth_tokens`进行 API 调用。

因此，您必须首先`API key`从您的用户那里获取并`auth_tokens`从该 API 密钥生成并保存它。进行 API 调用将需要用户“API 密钥”和“身份验证令牌”的组合。

**注意：** auth_tokens 当前没有过期。

查看 box [api Documentation](http://developers.box.com/get-started/#uploading-and-downloading)，以生成身份验证令牌。要开发您的私有应用程序，您可以跳过第 2 步和第 3 步，因为您将拥有用户的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:58:00.823

您应该能够通过导航到 URL 中的名称找到您自己的应用程序。例如 Box 的 FTP“应用程序”描述位于[https://cloud.box.com/services/box_ftp_server](https://cloud.box.com/services/box_ftp_server)。

至于您必须通过其 Box 帐户对用户进行身份验证的过程，Box 使用非常标准的 OAuth 类型过程，您可以在其中设置重定向 URL，并将您的用户发送到 Box 站点进行身份验证。用户通过身份验证后，Box 将重定向回您。这样可以保证用户的交易安全，因此他们不会向您提供他们的 Box 登录凭据。FaceBook、Google 等都在做几乎相同的事情。

# python - 无需先在屏幕上渲染，直接将图形保存到磁盘

> ID：13575659
> 
> 赞同：1
> 
> 时间：2012-11-27T00:40:57.143
> 
> 标签：python, matplotlib, figure

我目前有如下代码：

```
import os
import numpy as np
import pylab 

import matplotlib.pyplot as plt
import matplotlib.cm as cm    
from matplotlib.patches import Polygon  
import numpy as np

...

# Read my image
img = matplotlib.image.imread(p_image)

# Render it, move the coordinates' origin to the upper left corner
plt.imshow(np.flipud(img), cmap=cm.Greys_r,origin='upper')

# Overlay a polygon
p = Polygon( zip(xs,ys), alpha=0.2)
plt.gca().add_artist(p)

# Save it to disk
plt.savefig(p_image_output) 
```

我怎样才能直接将这个数字保存到磁盘**而不先在屏幕上渲染它？**（请注意，我希望该图保留我传递给的三个参数中指定的属性`imshow`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:49:07.597

一种方法是将`matplotlib`后端设置为没有交互式支持的东西。一种标准方法是在开始使用或从其他部分导入之前插入以下行`matplotlib`：

```
import matplotlib
matplotlib.use('Agg') 
```

标准后端是`TkAgg`，它使用带有 Tk 交互式事件循环的“agg”（“anti-grain geometry”）渲染。Using`Agg`执行相同类型的图形渲染，但在屏幕上不显示任何内容。

请注意，一旦您更改后端，`matplotlib`可能无法将其切换回来。因此，如果您知道不想在此脚本的屏幕上绘制任何内容，则此方法效果最佳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T00:49:28.497

除非您正在使用，否则该图形仅在您执行或`ipython --pylab`时才会出现在屏幕上。如果您不希望它显示在屏幕上，只需确保您没有进行任何这些调用。`show()``draw()`

或者，您可以在 matplotlib 中使用非交互式后端。例如，`Agg`后端。只需确保您的`~/.matplotlib/matplotlibrc`文件中有以下设置：

```
backend      : Agg 
```

请记住，使用此后端您将永远不会在屏幕上看到任何内容。如果您使用，您可以保留配置文件并通过调用特定后端`ipython`来拥有交互式后端。`--pylab`例如：

```
ipython --pylab=qt 
```

# reporting-services - 报表工具栏无法在报表管理器中正确呈现。怎么修？

> ID：13575665
> 
> 赞同：2
> 
> 时间：2012-11-27T00:41:12.487
> 
> 标签：reporting-services, https, ssrs-2008

使用 SQL Server Reporting Services 2008 并且刚刚注意到通过报表管理器应用程序查看任何报表时报表工具栏未正确呈现。我在没有 IIS 的 Windows 2008 Server 上运行所有内容（我使用的是 http.sys），并且所有流量都配置为 SSL。

注意到显示报告时出现以下错误：

> **/Reserved.ReportViewerWebControl.axd?OpType=StyleSheet&Version=2007.100.5512.00 500（内部服务器错误）**

经过进一步检查，我发现请求此 .axd 文件会引发**401（未经授权）**异常。

有谁知道如何解决这个问题？

# google-closure-library - google 闭包库富文本编辑器

> ID：13575666
> 
> 赞同：0
> 
> 时间：2012-11-27T00:41:17.917
> 
> 标签：google-closure-library

我想要一个来自[谷歌闭包库的独立](https://developers.google.com/closure/library/)[富文本编辑器](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/editor.html)，但它确实

文件很多 有没有**缩小版**

仅供[文本编辑器](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/editor.html)下载

我花了 4 个小时，我找不到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:41:26.290

不是我知道的——那会回避闭包编译器。

虽然 Google Closure Tools 附带了“Closure Compiler”，可以为您缩小代码，但它也会混淆代码。为了实现您的目标，您可以假设使用 Closure Compiler 编译代码，并使用该[`goog.exportSymbol`](https://code.google.com/p/closure-library/source/browse/closure/goog/base.js#1424)函数为您的其他 JavaScript 代码制作您自己的具有未混淆端点的最小化版本，这将控制何时以及如何渲染编辑器。

恕我直言，这听起来需要大量工作才能提取 Google Closure Library 的一个组件。您可能应该使用原始文件并通过一些维护函数和属性名称的第三方最小化程序运行它们，或者您可以完全使用另一个组件。如果您计划在未来使用更多的 Google Closure 库，编译技术只有积极的一面。

您是否考虑过使用[TinyMCE](http://www.tinymce.com/)组件？它可能比半步进入 Google Closure Library 更能满足您的需求。

# arrays - 制作记忆牌游戏，如何检查两个牌是否相同

> ID：13575670
> 
> 赞同：0
> 
> 时间：2012-11-27T00:41:49.837
> 
> 标签：arrays, image, processing

游戏使用二维数组制作，加载了12张图片；准确地说是6对。当一个图块被点击时，它会被添加 1，从而使其成为 2，从而显示它。当显示 2 个图块并单击第三个图块时，前 2 个图块被隐藏。

我的问题：如何检查两个显示的图块是否显示相同的图像？如果它们显示相同的图像，我如何确保它们保持不变并且不会在单击第三个图块时被隐藏？

我尝试制作某种与数组对应的计数器，但根本不起作用。也没有检查一个数组是否等于另一个。

任何帮助，将不胜感激。非常非常感谢你。

这是我的参考代码：

> ```
>  // Number of columns and rows in the grid
> int cols;
> int rows;
> int counter = 0; //counts how many are shown
> boolean[] tracker = new boolean[12]; 
> ```

```
PImage [][] img = new PImage[4][3]; // load images

int[][] grid;

void setup() {
  size(600, 600);
  cols = height/4; //I want 4
  rows = width/3; //I want 3
  for (int m =0; m<tracker.length;m++){
        tracker[m]=false; //To laod array as false. Will be used to track numbers given out to make sure each every image is only put out once (but in reality I have pairs)
  }
  for (int i =0; i<img.length; i++) {
    for (int j=0; j<img[i].length;j++) {
      //int k = (j * 4 + i)%6;//2D array to 1D
      int k = (int)random(0,12);
      while(tracker[k]) //While it's true, pick 0-11 corepsonding to an image
      {
        k = (int)random(0,12);
      }
      tracker[k]=true; //Make it true, therefore can't be picked again
      img[i][j] = loadImage("img" + k + ".jpeg"); //Load the images
    }
  }
  grid = new int[cols][rows]; //To make the 2D array of 30 and 30
  for (int i=0; i<cols; i++) {
    for (int j=0; j<rows; j++) {
      grid[i][j] = 1; //If mouse clicked, will by multiplied by -1 to change if black or white
    }
  }
}

void draw() {
  rects(); //Calls the function to display rectangles
}

void rects() {
  for (int i=0; i<cols; i++) {
    for (int j=0; j<rows; j++) {
      if (grid[i][j]== 1) { //if grid at i,j is 1, change white
        fill(255); //white
        rect(cols*i, rows*j, cols, rows);
      }
      if (grid[i][j]== 2) { //if grid at i,j is -1, change black
        image(img[i][j], cols*i, rows*j);
        //rect(cols*0, rows*0, cols, rows);
      }
    }
  }
}

void mouseClicked() {
  for (int i=0; i<cols; i++) {
    for (int j=0; j<rows; j++) {
      if (mouseX<(i*cols)+cols && mouseX >= i*cols && mouseY<((j)*rows+rows) && mouseY >= (j)*rows) { // find square that is clicked then change color
        counter++;
        if (counter == 3) {
          for (int k=0; k<cols; k++) {
            for (int l=0; l<rows; l++) {
              grid[k][l]=1; //Making it 1 again, thus white
            }
          }
          counter =1;
        }
        grid[i][j] +=1; //By adding one, we make it show the imahe
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:38:21.927

您不想尝试比较 PImage，因为它很慢且并不总是准确的。

您不想存储比您需要的更多的图像，因为这会浪费内存。仅存储唯一图像。

您想将模型与视图分开。你永远不需要操纵你的图像。您只需要知道它们应该显示在哪里以及搜索匹配项的过程。您存储图像的方式应该与该逻辑分开。

我建议您创建一个包含 6 个独特图像的“PImage”数组。然后，创建一个“int”数组，其大小是唯一图像数量的两倍（因为您想要成对）。最后，创建一个与“int”数组长度相同的“布尔”数组。

因此，在设置时，您将使用 6 个图像填充图像数组（“PImage”数组），使用图像数组的键（0 到 5 重复，即 {0,1）填充标签数组（“int”数组） ,2,3,4,5,0,1,2,3,4,5)，打乱标签数组，并用“false”值填充显示数组（“布尔”数组）。

当用户单击一个磁贴时，您将确定磁贴编号（0 到 11），将该磁贴编号的显示设置为 true，并将该磁贴编号存储为第一次单击。当用户单击另一个磁贴时，首先检查它是否与第一次单击的磁贴编号不同，然后将显示设置为 true，并将磁贴编号存储为第二次单击。现在已经单击了两个，检查每个图块编号的标签数组，看看它们是否相等。如果是，则您有一个匹配项，如果没有，则没有匹配项，第一次和第二次单击将被重置，并且这些图块编号的显示再次设置为 false。

在下面我创建的示例中，有两个 pde 文件，match 和 colors。match.pde 文件包含了解标签匹配方法所需的所有内容。colors.pde 仅作为生成随机颜色的方法包含在内，您无需担心。重点是使用颜色向您展示逻辑，以便您可以使用图像来实现它。

匹配.pde

```
import java.util.Arrays; // used for shuffling
import java.util.Collections; // used for shuffling

int COLOR_COUNT = 6; //number of colors we will try to match

int WINDOW_X = 600;
int WINDOW_Y = 600;

//we will set these values during setup
int COLUMN_COUNT;
int ROW_COUNT;

color TILE_BACK_COLOR = color(255);
color TILE_EDGE_COLOR = color(0);

//we will set these values after we set the size of the window
int TILE_WIDTH;
int TILE_HEIGHT;

int ROUNDED_CORNER = 10;

//this is where we will store the colors
color[] COLORS = new color[COLOR_COUNT];

//the following must be Integer to allow for shuffle
//see http://stackoverflow.com/a/3981494/1736092
//this is where we will store the labels for the colors
Integer[] LABELS = new Integer[COLOR_COUNT*2]; 

//this is where we will store which tiles may be displayed
boolean[] DISPLAY = new boolean[COLOR_COUNT*2];

//this is where we will store the last 2 clicked tiles
int[] CLICKED = new int[2];

boolean MATCHED = false;
int MATCH_COUNT = 0;
int GUESS_COUNT = 0;

void setup() {
  /* calculate how many rows and columns we need based on number of tiles
   * since this is a matching game, number of tiles is twice the number of colors
   * we want a board that is as square as possible
   * take the square root of the number of tiles and round down (floor) and set that as rows
   * if rows divide evenly into the number of tiles, just divide tiles by rows to get columns
   * if not, keep subtracting a row until they divide evenly then get columns
   */
  println("Tiles: " + COLOR_COUNT*2);
  ROW_COUNT = floor(sqrt(COLOR_COUNT*2));
  println("Initial ROW_COUNT: " + ROW_COUNT);
  if((COLOR_COUNT*2) % ROW_COUNT == 0) {
    COLUMN_COUNT = (COLOR_COUNT*2) / ROW_COUNT;
    println("Keeping ROW_COUNT: " + ROW_COUNT + ", Setting COLUMN_COUNT: " + COLUMN_COUNT);
  } else {
    for(int i = ROW_COUNT - 1; i > 1; i--) {
      ROW_COUNT = i;
      if((COLOR_COUNT*2) % ROW_COUNT == 0) {
        COLUMN_COUNT = (COLOR_COUNT*2) / ROW_COUNT;
        println("Calculated ROW_COUNT: " + ROW_COUNT + ", Setting COLUMN_COUNT: " + COLUMN_COUNT);
      }
    }  
  }

  // make sure that the rows and columns are valid
  assert(COLUMN_COUNT * ROW_COUNT == COLOR_COUNT*2);

  size(WINDOW_X, WINDOW_Y);
  TILE_WIDTH = width/COLUMN_COUNT;
  TILE_HEIGHT = height/ROW_COUNT;

  populateColors(); // populate the colors
  newGrid(); // set up the initial grid

  background(0);
  drawGrid();
}

void draw() {
// //With no animations, this game is visually static
// //No need for a draw loop
}

void populateColors() {
  //for this game, we'll just generate random colors
  //however, you could change this function to set specific colors
  for(int i = 0; i < COLORS.length; i++) {
    COLORS[i] = getRandomColor();
  }  
}

//this function will create a new grid
//labels will be populated and shuffled
//clicks will be initialized to -1, which we will use to mean no click
void newGrid() {
  print("Initial LABELS[" + LABELS.length + "]:\t");

  for(int i = 0; i < LABELS.length; i++) {
    if(i < LABELS.length/2) LABELS[i] = i;
    else LABELS[i] = i-COLOR_COUNT;

    DISPLAY[i] = false;

    print(LABELS[i] + " ");
  }

  CLICKED[0] = -1;
  CLICKED[1] = -1;

  // shuffles the labels array
  Collections.shuffle(Arrays.asList(LABELS));

  print("\nShuffled LABELS[" + LABELS.length + "]:\t");
  for(int i = 0; i < LABELS.length; i++) print(LABELS[i] + " ");
  println();
}

//this just iterates through the grid and displays tiles as necessary
void drawGrid() {
  stroke(TILE_EDGE_COLOR); //set outline color
  for(int row = 0; row < ROW_COUNT; row++) {
    for(int col = 0; col < COLUMN_COUNT; col++) {
      int tile_number = col + row*(COLUMN_COUNT);
      if(DISPLAY[tile_number]) {
        fill(COLORS[LABELS[tile_number]]); //set fill color to that of tile front
      } else {
        fill(TILE_BACK_COLOR); //set fill color to that of tile back
      }
      //rect(top left x, top left y, width, height)
      rect(col*TILE_WIDTH, row*TILE_HEIGHT, TILE_WIDTH, TILE_HEIGHT, ROUNDED_CORNER);
    }
  }
}

//this is called when two tiles have been clicked
//it checks the labels of the colors of the given tiles, not the actual colors 
void checkMatch() {
  //we want to make sure that both of the clicked tiles have been properly logged
  if(CLICKED[0] != -1 || CLICKED[1] != -1) {
    println("Comparing LABELS of COLORS[" + LABELS[CLICKED[0]] + "] and COLORS[" + LABELS[CLICKED[1]] + "]");
    if(LABELS[CLICKED[0]] == LABELS[CLICKED[1]]) {
      println("Colors match! MATCHED set to true and MATCH_COUNT++");
      MATCHED = true;
      MATCH_COUNT++;
      println("MATCH_COUNT now " + MATCH_COUNT);
      if(MATCH_COUNT == COLOR_COUNT) {
        println("MATCH_COUNT now equals COLOR_COUNT, board must be complete, executing win()"); 
        win();
      }
    } else {
      println("Colors do not match");
    }
  }  
}

//this funciton is called when a win condition has been met
void win() { 
  println("You Win! You made " + GUESS_COUNT + " tile flips, best possible is " + COLOR_COUNT*2);
  if(GUESS_COUNT == COLOR_COUNT*2) println("PERFECT GAME!");
  println("Press SPACE to generate a new board."); 
}

//this function is called when the user wants to reset the board
void reset() {
  println("Resetting the board");

  COLORS = new color[COLOR_COUNT];
  LABELS = new Integer[COLOR_COUNT*2]; 
  DISPLAY = new boolean[COLOR_COUNT*2];

  CLICKED = new int[2];
  MATCHED = false;
  MATCH_COUNT = 0;
  GUESS_COUNT = 0;

  populateColors();
  newGrid();
}

void mouseClicked() {
  println("Mouse Clicked");
  int clicked_column = mouseX/TILE_WIDTH;
  int clicked_row = mouseY/TILE_HEIGHT;
  int tile_number = clicked_column + clicked_row*(COLUMN_COUNT);
  println("Clicked: " + clicked_column + "," + clicked_row + " [" + tile_number + "]");

  //we don't want to allow clicking a tile that is already being displayed
  if(!DISPLAY[tile_number]) {
    GUESS_COUNT++;
    println("Guess count incremented to " + GUESS_COUNT);

    if(CLICKED[0] != -1 && CLICKED[1] != -1) {
      if(!MATCHED) {
        println("Set DISPLAY[" + CLICKED[0] + "] and DISPLAY[" + CLICKED[1] + "] to false");
        DISPLAY[CLICKED[0]] = false;
        DISPLAY[CLICKED[1]] = false;
      } else {
        println("Set MATCHED to false");
        MATCHED = false;  
      }
      CLICKED[0] = -1;
      CLICKED[1] = -1;
    }

    if(CLICKED[0] == -1 && CLICKED[1] == -1) {
      CLICKED[0] = tile_number;
      DISPLAY[tile_number] = true;
      println("Tile " + tile_number + " set as CLICKED[0], set DISPLAY[" + tile_number + "] to true");
    } else if(CLICKED[0] != -1 && CLICKED[1] == -1) {
      CLICKED[1] = tile_number; 
      DISPLAY[tile_number] = true;
      println("Tile " + tile_number + " set as CLICKED[1], set DISPLAY[" + tile_number + "] to true");
      checkMatch();
    } else {
      println("error in mouseClicked()");
    }
  }

  drawGrid();
  if(DISPLAY[tile_number]) {
    println("Tile " + tile_number + " is already being displayed");
    for(int i = 0; i < LABELS.length; i++) {
      print("-["+i+"]-");
      if(i != tile_number && LABELS[tile_number] == LABELS[i]) {

        break;  
      }
    }
  }

}

//allow user to reset the board by pressing SPACE
void keyPressed() {
  if(key == ' ') reset();
} 
```

颜色.pde

```
final float PHI = (1 + sqrt(5))/2;
float rand = random(0,1);

color HSVtoRGB(float h, float s, float v) {
  float r, g, b;
  if (s == 0) {
    r = v * 255;
    g = v * 255;
    b = v * 255;
  } else {
    float var_h = h * 6;
    float var_i = floor(var_h);
    float var_1 = v * (1 - s);
    float var_2 = v * (1 - s * (var_h - var_i));
    float var_3 = v * (1 - s * (1 - (var_h - var_i)));

    float var_r, var_g, var_b;

    if (var_i == 0) {var_r = v; var_g = var_3; var_b = var_1;}
    else if (var_i == 1) {var_r = var_2; var_g = v; var_b = var_1;}
    else if (var_i == 2) {var_r = var_1; var_g = v; var_b = var_3;}
    else if (var_i == 3) {var_r = var_1; var_g = var_2; var_b = v;}
    else if (var_i == 4) {var_r = var_3; var_g = var_1; var_b = v;}
    else {var_r = v; var_g = var_1; var_b = var_2;}

    r = var_r * 255;
    g = var_g * 255;
    b = var_b * 255;
  }
  return color(r, g, b);
}

// returns a random color
color getRandomColor() {
  //0.25,0.8
  float sat = 0.65;
  float val = 0.6;
  rand += PHI - 1;
  rand %= 1;
  //this is a custom function to convert HSV to RGB
  return HSVtoRGB(rand, sat, val);
} 
```

顺便说一句，您不必使用 Java shuffle 方法，特别是如果您想避免使用 Java 库并只使用处理。一种流行的方法是 Fisher-Yates Shuffle。 [http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

# image - 如何在 Magento 中获取属性选项的图像 url？

> ID：13575672
> 
> 赞同：1
> 
> 时间：2012-11-27T00:41:56.467
> 
> 标签：image, magento, attributes, options

例如，我们有 LG、Philips 等选项的属性制造商。Magento 中的属性选项有图像的个人字段。我想使用该图像作为制造商的标志。如何在产品页面中显示该图像。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:38:49.370

让我澄清一下 - 您是在谈论属性（在管理面板中配置：目录 -> 属性 -> 管理属性）还是自定义选项（在管理面板中配置：目录 -> 管理产品 ->*选择产品*-> 自定义选项）？

两者都没有图像的个人字段。这就是为什么你的问题很混乱。您是否有可能安装了一些提供该图像功能的自定义扩展程序？如果是真的，那么你需要联系扩展的作者，因为只有作者知道正确的使用方法。

仅供参考：

*   您可以查看[本教程和免费的自定义扩展](http://www.johannreinke.com/en/2012/02/05/magento-add-images-to-product-attribute-options/)，它将图像添加到下拉属性中。它在前端显示图像。
*   您可以[在 MagentoCommerce.com 公共论坛查看此解决方案](http://www.magentocommerce.com/boards/viewreply/223960/)，这将帮助您将图像添加到自定义选项。

# linux - awk 问题：对非整数求和的问题？

> ID：13575683
> 
> 赞同：1
> 
> 时间：2012-11-27T00:43:16.553
> 
> 标签：linux, bash, awk

所以我正在编写一个 bash 脚本，它必须根据命令“ps u”计算出总共使用了多少 CPU。我正在尝试像这样使用 awk：

```
TOTAL_CPU=$(ps u | awk '{sum = sum + $3}; END {print sum}') 
```

命令“ps u”的典型输出有 11 列，第三列是 CPU 使用率。

问题是，这并不像它应该的那样工作。当 CPU 值有小数时，我收到如下错误：

```
syntax error: invalid arithmetic operator (error token is ".x") 
```

其中 x 是总和后的“剩余”小数。例如，如果值为“1.4”和“8.7”​​，则总和为“10.1”，因此错误将显示：

```
syntax error: invalid arithmetic operator (error token is ".1") 
```

我怎样才能做我需要的？如果小数被截断也没关系，我不需要很多精度。

编辑：帖子编辑器改变了我最初写的内容

EDIT2：问题解决了！这根本不是 awk 的错。事实证明，这行代码隐藏在其他地方：

```
declare -i TOTAL_CPU 
```

所以 bash 试图将像“3.4”这样的值分配给一个预计只包含整数值的变量。我把这个放在这里，以防有人稍后通过谷歌找到这篇文章！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T03:54:10.727

查看`ps`系统手册页中的命令。您可以重新格式化`ps`输出以获得所需的内容。例如，您可以只打印 CPU 数量而忘记输出的其余部分：

```
sum=$(ps -udavid -o %cpu | tail -n +2 | paste  -sd+ - | bc) 
```

*   `ps -udavid`: *david拥有的进程*
*   `ps -udavid -o %cpu`: david 拥有的进程。只显示CPU
*   `tail -n +2`：删除标题行（所有第 2 行到末尾）
*   `paste -sd+ -`将`-s`所有行组合成一行的方法。`d+`意思是在每一*行*后面加一个`+`符号。最后的手段使用标准输入。*`-`*
**   `bc`计算线条。由于所有数字都用`+`符号分隔，因此它将所有 CPU 数量加在一起。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:47:49.057

将其更改为：

```
TOTAL_CPU=ps u | awk '{sum = sum + $3}; END {print sum}' 
```

至：

```
TOTAL_CPU=$(ps u | awk '{sum = sum + $3}; END {print sum}') 
```

这不是`awk`问题，而是您的 bash 语法。

该`$(...)`符号称为[Command Substitution](http://tldp.org/LDP/abs/html/commandsub.html)。基本上，它会从您当前的 shell 生成一个新的子 shell 来执行它所包含的任何命令，然后将输出返回到新子 shell 的`stdout`.*

# android - 需要帮助 Json Parsing Error Android

> ID：13575684
> 
> 赞同：1
> 
> 时间：2012-11-27T00:43:25.840
> 
> 标签：android, json, parsing

我一直在尝试在 000webhost 上制作一个具有非常丰富的数据库 mySQL 和 PHP 支持的应用程序。我们试图计算这个人的情绪。

有两个表**Color**和**Element**我根据**Colour_ID**和**Element_ID从中挑选****分数**。实际上，我通过 android Application 从**用户那里获取了****Colour_ID**和**Element_ID**值，并通过**JSON PARSING**传递了它。

 ******mood.php 的代码是：

```
<?php
$response = array();

if (isset($_POST['Colour']) && isset($_POST['Element'])) { 

$colour = $_POST['Colour'];
$element = $_POST['Element'];  

$con = mysql_connect("mysql1.000webhost.com","a4633783_snyz","software123");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("a4633783_snyz", $con);

// get color id from color table

$result_colour = mysql_query("SELECT Score FROM COLOUR WHERE Colour_ID = $colour");

$result1 = mysql_fetch_array($result_colour);

$result_element = mysql_query("SELECT Score FROM ELEMENT WHERE Element_ID = $element");

$result2 = mysql_fetch_array($result_element);

$main_result = ($result1[0] + $result2[0]);

$mood=mysql_query("SELECT Mood FROM CHECK_MOOD WHERE Score = $main_result");

$row = mysql_fetch_array($mood);

$response["mood"]=array();
array_push($response["mood"], $row);

// success
$response["success"] = 1;
// echoing JSON response
echo json_encode($response);
} else {
// no products found
$response["success"] = 0;
$response["message"] = "No mood available";
// echo no users JSON
echo json_encode($response);
}
?> 
```

现在我想要的是当用户**选择 1**作为**Colour_ID**和**1 作为 Element_ID时，****分数 2**上的情绪应该在这个 android 应用程序上显示给他。

Mood.java 是：

```
public class mood extends Activity {

private ProgressDialog pDialog;
JSONParser jsonParser = new JSONParser();

RadioGroup color;
RadioGroup element;
TextView JsonResult;
String mood_result;

// url to create new product
private static String url_create_signup = "http://snyz.site88.net/mood.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mood);
    color = (RadioGroup) findViewById(R.id.color);
    element = (RadioGroup) findViewById(R.id.element);
    JsonResult = (TextView) findViewById(R.id.json_result);

    // Create button
    Button btnCreateProduct = (Button) findViewById(R.id.submit);

    // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            new signup().execute();
        }
    });
}

/**
 * Background Async Task to Create new product
 * */
class signup extends AsyncTask<String, String, String> {

    int color_value = color.getCheckedRadioButtonId();
    int element_value = element.getCheckedRadioButtonId();

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(mood.this);
        pDialog.setMessage("Please wait!");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        // pDialog.show();
    }

    protected String doInBackground(String... args) {
        String Colour = Integer.toString(color_value);
        String Element = Integer.toString(color_value);

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        params.add(new BasicNameValuePair("Colour", Colour));
        params.add(new BasicNameValuePair("Element", Element));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_signup,
                "POST", params);

        // check log cat for response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {

                JSONArray jArray = json.getJSONArray("ARRAYNAME");

                // for (int i = 0; i < jArray.length(); i++) {
                JSONObject oneObject = jArray.getJSONObject(0);
                // Pulling items from the array
                mood_result = oneObject.getString("STRINGNAMEinTHEarray");
                // String oneObjectsItem2 = oneObject
                // .getString("anotherSTRINGNAMEINtheARRAY");

                String JsonResultt = "\n\nYour mood is: " + mood_result;

                JsonResult.setText("\n" + JsonResultt);

                // display.show();
                // successfully created product
                // Intent i = new Intent(getApplicationContext(),
                // login.class);
                // startActivity(i);

                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        // pDialog.dismiss();
    }
} } 
```

但**我没有得到想要的输出**，甚至无法找出确切的问题。我的**Logcat**给出以下**错误**：

```
Error parsing data org.json.JSONException: Value Your of type java.lang.String cannot be converted to JSONObject 
```

请帮助我在哪里出错并正确指导我如何在我的 Android 应用程序上获得我想要的输出。希望尽快听到。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:48:46.767

我的猜测是您正在将数组输出到 JSON，但试图解析为`JSONObject`. 如果要对数组进行编码，则需要使用`JSONArray`. 在问题中显示您的 JSON，我可以验证是这种情况。******

# c++ - OpenMP 矩阵乘法嵌套循环

> ID：13575689
> 
> 赞同：3
> 
> 时间：2012-11-27T00:44:11.890
> 
> 标签：c++, c, multithreading, parallel-processing, openmp

这是一个矩阵乘法代码，一个`i`循环并行化，另一个`j`循环并行化。对于这两个版本，`C`数组的值都是正确的（我已经用小矩阵大小进行了测试）。与其他相比也没有性能改进。

谁能告诉我这两个版本有什么区别？`C`无论矩阵的大小如何，这两个版本的数组都会准确吗？提前致谢

```
void mat_multiply ( void )
{
    int t;
    int i, j, k;    
    #pragma omp parallel for private(k) // parallelize i loop
    for(i = 0; i < dimension; i++)
    {
        for(j = 0; j < dimension; j++) 
        {
            for(k = 0; k < dimension; k++)
            {
                C[dimension*i+j] += A[dimension*i+k] *  B[dimension*k+j];       
            }
        }
    }
 } 
```

* * *

```
 void mat_multiply ( void )
 {
     int t;
     int i, j, k;   

     for(i = 0; i < dimension; i++)
     {
         #pragma omp parallel for private(k) // parallelize j loop
         for(j = 0; j < dimension; j++) 
         {
             for(k = 0; k < dimension; k++)
             {
                 C[dimension*i+j] += A[dimension*i+k] *  B[dimension*k+j];      
             }
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:11:33.323

起初，似乎第一个版本的线程创建开销较低，因为它只会创建一次线程。而在第二个版本中，似乎线程将被创建`dimension`时间。

但是按照[这个](http://bisqwit.iki.fi/story/howto/openmp/)

> 人们可能会担心在内循环中创建新线程。不用担心，GCC 中的 libgomp 足够聪明，实际上只创建了一次线程。团队完成工作后，线程将返回到“dock”中，等待新的工作完成。
> 
> 也就是说，clone系统调用的执行次数正好等于最大并发线程数。并行指令与 pthread_create 和 pthread_join 的组合不同。

在第一个版本中，您应该保证该变量`j`也是私有的。

您可以只使用一种嵌套循环并行化的方法，而不是使用两种方法。在**OpenMP 3.0**中，嵌套循环的并行化可以通过*for*指令中的**collapse 子句**来处理，即：

 *```
void mat_multiply ( void ) {

    #pragma omp parallel for collapse(2)
    for(int i = 0; i < dimension; i++)
      for(int j = 0; j < dimension; j++)
        for(int k = 0; k < dimension; k++)
            C[dimension*i+j] += A[dimension*i+k] *  B[dimension*k+j];        
  } 
```

顺便说一句：看看块方法，你可以[在这里](http://oz.nthu.edu.tw/%7Ed947207/chap19_openmp.ppt)看到一个例子（从幻灯片 62 开始）。*

# javascript - 使用 jQuery 或 jQTouch 的幻灯片转换脚本

> ID：13575692
> 
> 赞同：1
> 
> 时间：2012-11-27T00:44:30.130
> 
> 标签：javascript, jquery, css

是否有分步教程或使用 jQuery 或 jqTouch 拖放脚本进行**过渡幻灯片**动画？

我已经尝试过了，但仍然不够。 [https://github.com/senchalabs/jQTouch/wiki/Getting-Started](https://github.com/senchalabs/jQTouch/wiki/Getting-Started)

我希望使用简单的模板或复制/粘贴**过渡幻灯片**的脚本？

它适用于 iphone 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:08:36.270

您所要做的就是在标签状态 data-transition="slide"

IE

```
<a href="photo.html" data-role="button" data-transition="slide" data-theme="a"> Photo gallery </a> 
```

# objective-c - 如何构建一个从关系中引用实体的谓词？

> ID：13575693
> 
> 赞同：0
> 
> 时间：2012-11-27T00:44:36.650
> 
> 标签：objective-c, cocoa, core-data, nspredicate

我需要用一个与另一个实体有关系的实体与另一个实体建立一个谓词。这可能吗？我有以下实体：

```
Entity: BOOK
Entity: AUTOR
Entity: SCHOOL 
```

而这些关系：

```
BOOK -> relationAutor <- AUTOR
AUTOR -> relationSchool <- SCHOOL
SCHOOL -> attribute "country" 
```

所以，我需要从特定的`country`. 因为我通过实体 AUTOR 从实体 BOOK 到属性`country`（来自实体 SCHOOL）有一些关系，所以我尝试连接这个谓词：

```
NSString *pred = [[NSPredicate predicateWithFormat:@"relationAutor.relationSchool.country IN %@",[countries valueForKey:@"country"]]predicateFormat];
predicateFormat = [predicateFormat stringByAppendingFormat:@" AND (%@)",pred]; 
```

但我的代码崩溃：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'unimplemented SQL generation for predicate : (relationAutor.relationSchool.country IN {France})' 
```

我想要做的甚至可能吗？如果是，我将如何构建这样的谓词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:13:13.957

您不能通过字符串连接来组合谓词。如果您需要一个谓词，它是 2 个（或更多）其他谓词的“AND”组合，请使用`NSCompoundPredicate`，例如

```
NSArray *countries = @[@"France"]; 
NSPredicate *pred1 = [NSPredicate predicateWithFormat:@"relationAutor.relationSchool.country IN %@", countries];
NSPredicate *pred2 = ... // other predicate

// pred = pred1 AND pred2:
NSPredicate *pred = [NSCompoundPredicate andPredicateWithSubpredicates:@[pred1, pred2]]; 
```

另请参阅文档`predicateFormat`：

> 此方法返回的字符串不保证与使用 predicateWithFormat: 等创建谓词的字符串相同。您不能使用此方法创建可用于重新创建原始谓词的谓词的持久表示。

# eclipse - Eclipse RCP：未找到应用程序 ID

> ID：13575695
> 
> 赞同：36
> 
> 时间：2012-11-27T00:44:43.857
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我第一次尝试创建一个 Eclipse RCP 应用程序，所以我在这里遵循 Vogella 教程：[http ://www.vogella.com/articles/EclipseRCP/article.html](http://www.vogella.com/articles/EclipseRCP/article.html)

根据这些步骤，我使用所有默认设置创建了一个新的 Eclipse 4 应用程序项目，但是当我单击“启动 Eclipse 应用程序”时，我得到了一个异常。在错误日志中，它列出了多个无法解析的捆绑包，然后在日志末尾出现 RuntimeException: No application id has found。

我与教程/默认设置中列出的步骤完全不同。有什么想法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-27T00:56:49.733

发布后不久，我找到了解决此问题的特定魔法咒语。

您需要做的是转到您的运行配置（运行 -> 运行配置）。选择插件选项卡，然后点击“添加所需插件”。应用，然后运行，它现在应该可以工作了。

有趣的是，它似乎有规律地忘记了这种变化（这里有错误），所以你可能需要在启动之前经常这样做:-(

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-11T15:50:41.737

我在提到的教程中添加了启动产品的常见问题列表。在这里找到它：[常见启动问题的 Eclipse RCP 检查表](http://www.vogella.com/tutorials/EclipsePlugin/article.html#checklist-for-common-launch-problems)

请注意，修改启动配置是错误的解决方案，因为您的应用程序将在导出后启动失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T11:44:10.593

这可能是使用不同版本的 eclipse 的结果（不确定）。我有同样的错误。当我尝试按照描述更改运行配置时，我没有发现任何按钮、复选框或任何其他说明“添加所需插件”的内容。但是，我确实找到了插件选项卡顶部的下拉列表。

启动：

1.  所有工作区和启用的目标插件
2.  仅在下面选择的插件
3.  仅在下面选择的功能

我的设置为选项 2。我切换到选项 1 并单击“应用”。错误消失了，尽管生成的 RCP 窗口不包含预期的列表……但我怀疑这完全是另一个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-02T07:01:07.930

我单击了“添加必需的插件”按钮，但由于某种原因，它没有解决“未找到应用程序 ID”的问题。

对我有用的是在[这里](https://www.eclipse.org/forums/index.php/t/155457/)找到的解决方案，即：

*   去'运行>运行配置...'
*   选择您的运行配置
*   单击“插件”选项卡
*   在下面添加插件：

org.eclipse.core.net

org.eclipse.ui.ide.application

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T09:40:59.193

对于那些即使添加了所有必需的插件也无法运行的人，当*运行配置*中配置的**JRE 系统库**不满足插件的最低执行环境时，我也会收到此错误（--> *plugin.xml* ||清单中*的Bundle-RequiredExecutionEnvironment*）。

 **** * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-17T14:21:43.757

经过一番尝试和错误，我发现“运行配置”有一些问题。

可以通过以下步骤进行管理：

1.  在包资源管理器中右键单击项目的最顶层文件夹
2.  运行方式
3.  运行配置...
4.  左键单击列表项“Eclipse Application”
5.  从该分层树状视图中，您可以看到一个或多个条目 [一个是主要的 Eclipse 实例 [称为“Eclipse 应用程序”，没有什么大不了的]，其他的，如果有的话，是您希望运行的其他 Eclipse 实例] . 您应该至少有第二个问题来解决整个问题 =)
6.  在“主要”选项卡中搜索“要运行的程序”部分。
7.  选择单选按钮“运行产品”并在文本字段中写入您在步骤 5 中提到的条目“Eclipse 应用程序”中找到的相同程序名称 [在我的例子中，它是“org.eclipse.platform.ide”]。
8.  单击“应用”，然后单击“运行”
9.  享受 :D

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-10T08:52:46.317

Neils 解决方案被 Eclipse 遗忘的原因是，当您从 *.product 文件启动产品时，Eclipse 会覆盖运行配置。因此，解决方案是调整 *.product 文件中的依赖关系，而不是运行配置。此外，我建议始终从 *.product 文件启动 Eclipse RCP 项目，以避免更改配置时出现问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-03T07:26:31.027

对我有用的东西是使用 eclipse Photon ...所以检查支持的版本。***

# django - SQLAlchemy Django：如何将外部表声明导入到相同的元数据中？

> ID：13575699
> 
> 赞同：1
> 
> 时间：2012-11-27T00:45:08.217
> 
> 标签：django, sqlalchemy

我将 Django 与 SQLAlchemy 结合使用。我有将所有表声明放入同一个元数据的问题。我在不同的包中有几个模块使用声明性方法声明表，有些表有关系。当我运行`create_all`命令时出现错误，因为元数据中不存在不同包中的引用表。

更确切地说，这是 SQLAlchemy 中执行该验证的代码行：

```
if _get_table_key(tname, schema) not in parenttable.metadata:
    raise exc.NoReferencedTableError(
        "Foreign key associated with column '%s' could not find "
        "table '%s.%s' with which to generate a "
        "foreign key to target column '%s'" % (schema, self.parent, tname, colname),
                tname)
        table = Table(tname, parenttable.metadata,
                      mustexist=True, schema=schema) 
```

我对此感到迷茫，我已经阅读了文档和几篇文章，但我没有找到答案。

有没有办法将外部表模块附加到现有元数据？

谢谢。

# scheme - 带有非法函数错误的 Gimp script-fu

> ID：13575700
> 
> 赞同：0
> 
> 时间：2012-11-27T00:45:09.337
> 
> 标签：scheme, gimp, script-fu

我正在编写我的第一个脚本，方案对我来说仍然不是很清楚。

我的脚本工作正常，但我想添加一个其他参数（仅可见），我有一行在某个地方导致非法函数错误，但在其他地方没有。

感谢您的帮助 ：-）

这是我的台词：

```
(display " onlyvisible: ")(display onlyvisible)(newline) 
```

这是我的代码：

```
(define (pitibalrog-test img filename onlyvisible)
(let*
    (
        (imgcopy (car ( gimp-image-duplicate img))) ; Copy to avoid changes on the original image
    )
    (display " onlyvisible: ")(display onlyvisible)(newline)
    (pitibalrog-export-layers imgcopy (gimp-image-get-layers imgcopy) filename onlyvisible) 
)
)

(define (pitibalrog-export-layers img listlayers filename onlyvisible)
(let*
    (
        (nblayers (car listlayers))
        (layers (cadr listlayers))
        (display "EXPORT LAYERS: LAYERS = ")(display layers)(newline)

        (display " onlyvisible: ")(display onlyvisible)(newline) ; <--- HERE IT WORKS
        (index 0)

        (basename (unbreakupstr (butlast (strbreakup filename ".")) "."))
        (extension (car (last (strbreakup filename "."))))
        (layer)
    )

    (display " onlyvisible: ")(display onlyvisible)(newline) ; <--- HERE IS THE PROBLEM

    (while (< index nblayers)
        (set! layer (aref layers index))
        (gimp-item-set-visible layer FALSE)
        (set! index (+ index 1))
    )
    (set! index 0)
    (while (< index nblayers)
        (set! layer (aref layers index))
        (set! filename (string-append basename (car(gimp-drawable-get-name layer)) "." extension))

        (pitibalrog-export-layer img layer filename onlyvisible)

        (set! index (+ index 1))
    )
)
)

(define (pitibalrog-export-layer img layer filename onlyvisible)
    (display " - export layer: ")(display layer)(newline)

    (gimp-item-set-visible layer TRUE)

    ; LAYER GROUP
    (when (= (car(gimp-item-is-group layer)) 1)
        (display "Layer ")(display layer)(display " is a group")(newline)
        (pitibalrog-export-layers img (gimp-item-get-children layer) filename onlyvisible)
    )
    ; REAL LAYER
    (when (= (car(gimp-item-is-group layer)) 0)
        (display "Layer ")(display layer)(display " is not a group")(newline)
        ; (gimp-file-save RUN-NONINTERACTIVE img layer filename filename) ; NO MASK HANDLING!!!
        (gimp-file-save RUN-WITH-LAST-VALS img layer filename filename)
    )

    (gimp-item-set-visible layer FALSE)
)

(script-fu-register "pitibalrog-test"
"<Image>/Script-Fu/Utils/pitibalrog-test..."
"Export all layers of the image in separete files" ;comment
"pitiBalrog" ;author
"pitiBalrog" ;copyright
"November 2012" ;date
"*A"
SF-IMAGE "img" 0
SF-FILENAME "destination" ""
SF-TOGGLE   "Export only visible layers" TRUE
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T04:55:37.780

免责声明：我从来没有用 script-fu 做过任何工作，所以我不知道那些 script-fu 特定的程序是做什么的。计划，但是，我可以做到。

请仔细查看`let`特殊形式所需的语法：

```
(let <List of forms that assign values>
   <body>) 
```

我认为您的主要问题来自这样一个事实，即**在方案中您可以更改几乎任何东西的值**——像其他语言一样，保留字很少。所以，当你说`(let ((display 3)) <body>)`,`display`不再指向向 REPL 显示东西的过程。然后，在你的正文中，`let*`当你说`(display " onlyvisible")`你试图调用一个不是函数的函数时——在这种情况下，不管值`layers`是什么。

一般来说，所有需要做类似事情的代码都`display`应该在函数体中。例如：

```
(let ((foo 3)                 ; associate symbol foo with the value 3
      (bar "I'm a string!")   ; associate symbol bar with a string
      (* '(a b c)))           ; associate symbol * with a list '(a b c)
  (display foo)               ;\
  (newline)                   ; \    
  (display bar))              ;  }-- expressions that make up the body
  (newline)                   ;  /
  (display *)                 ; /
  (* 3 4))                    ;/ --- this is the same type of error you made

;;Output
3
I'm a string!
(a b c)
ERROR -- invalid function 
```

最后，请不要像 C 或 Java 等那样格式化方案代码。这是第一个过程的方案友好版本：

```
(define (pitibalrog-test img filename onlyvisible)
  (let ((img copy (car (gimp-image-duplicate img))))
    (display " onlyvisible: ")
    (display onlyvisible)
    (newline)
    (pitibalrog-export-layers imgcopy (gimp-image-get-layers imgcopy) filename onlyvisible))) 
```

格式良好的代码使策划者感到高兴，并且您更有可能获得快速帮助。

# python - 适用于 Windows 的 IPython IDE

> ID：13575703
> 
> 赞同：3
> 
> 时间：2012-11-27T00:45:26.517
> 
> 标签：python, debugging, ide, ipython

我最近在这个论坛上听说过 IPython 后安装了它。我正在寻找一个类似于 MATLAB 或 RStudio for R 的环境。

我的印象是 IPython 会给我这个，但我为 Windows 下载的版本看起来很简单。事实上，除了制表符补全和历史记录（我一直想要）之外，我并没有真正看到 IDLE 和 IPython 之间的区别，但这与我过去认为很难使用的 R 附带的解释器差不多。

我是否误解了 IPython 的意义？还是我没有正确安装？

我还下载了“控制台”，虽然我不相信它工作正常，但它看起来也很裸露。

科莫多看起来不错，但有点贵。Netbeans 和 Eclipse 看起来也不错，但似乎安装起来并不简单，至少对于我的知识水平的人来说，所以如果有人能验证它们与 Python 的兼容性、特性和易用性，那将是很好的。 - 专家用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T02:24:07.457

我建议你试试 Spyder 你可以在这里找到它：[https ://www.spyder-ide.org/](https://www.spyder-ide.org/)

它非常适合您：它是一个轻量级的科学 IDE，其明确目的是在感觉上与 matlab 相似。它有一个编辑器、一个控制台和许多简洁的功能和插件。它可以使用 IPython 作为其控制台。

IPython“只是”一个增强的 Python 控制台，内置了纯粹的强大功能。（实际上它更多：它是一个客户端-服务器架构，具有多个纯魔法接口，在控制台模式、Qt 中，甚至在带有 Notebook 的浏览器中）当您使用基本控制台时，一定要稍后查看尽管。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:10:43.003

对于上下文，我一直在使用 Eclipse，pycharm，厌倦了这些，我开始询问人们使用什么，而我听到最多的是[sublime text](http://www.sublimetext.com/)。你应该看看，也许这就是你要找的！我只是看到它不是开源的！

我现在使用的是[Ninja-IDE](http://ninja-ide.org/)，它是用 python 编写的，是开源的，看起来还不错！它有很多插件，其中包括一个 IPython 插件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-13T22:07:51.510

你试过[`qtconsole`](https://ipython.org/ipython-doc/3/interactive/qtconsole.html)后端吗？它是在您提出问题后发布的。

> 这是一个非常轻量级的小部件，在很大程度上感觉就像一个终端，但提供了许多只能在 GUI 中实现的增强功能，例如内联图形、带有语法突出显示的正确多行编辑、图形调用提示等等。

在 Windows 命令提示符下，输入：

```
ipython qtconsole 
```

[![在此处输入图像描述](../Images/2f813e21543722f43b1790e589752db3.png)](https://i.stack.imgur.com/ABqdj.jpg)

# soql - SOQL 剥离时间或日期构造

> ID：13575706
> 
> 赞同：1
> 
> 时间：2012-11-27T00:45:36.447
> 
> 标签：soql

有没有办法使用 SOQL 从日期时间列中去除时间或构造日期？

例如 SELECT DATE('2001-12-31') 将返回 2001 年 12 月 31 日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T08:11:18.903

在某种程度上，你可以这样做，即，

```
User a = [Select createddate from user limit 1];
system.debug(a.createddate);
system.debug(a.createddate.format('MM/dd, yyyy ') ); 
```

在调试日志中，得到

|调试|2010-12-13 00:41:39

|USER_DEBUG|[3]|调试|2010 年 12 月 13 日

好像不能直接把12转12月。

# python - django/celery - 芹菜状态：错误：没有节点在时间限制内回复

> ID：13575711
> 
> 赞同：13
> 
> 时间：2012-11-27T00:46:19.477
> 
> 标签：python, django, celery, django-celery

我正在尝试在我的生产服务器中部署一个简单的 celery 示例，我遵循了 celery 网站中关于将 celery 作为守护进程运行的教程[http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html #daemonizing](http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html#daemonizing)，我在**/etc/default/celeryd中获得了配置文件**

```
  1 # 要启动的节点名称
  2 # 这里我们只有一个节点
  3 CELERYD_NODES="w1"
  4 # 或者我们可以有三个节点：
  5 #CELERYD_NODES="w1 w2 w3"
  6
  7 # 开始时 chdir 的位置。
  8 CELERYD_CHDIR="/home/audiwime/cidec_sw"
  9
 10 # 来自环境的 Python 解释器。
 11 ENV_PYTHON="/usr/bin/python26"
 12
 13 # 如何调用“manage.py celeryd_multi”
 14 CELERYD_MULTI="$ENV_PYTHON $CELERYD_CHDIR/manage.py celeryd_multi"
 15
 16 ##如何调用“manage.py celeryctl”
 17 CELERYCTL="$ENV_PYTHON $CELERYD_CHDIR/manage.py celeryctl"
 18
 19 # celeryd 的额外参数
 20 CELERYD_OPTS="--time-limit=300 --concurrency=8"
 21
 22 # celery 配置模块的名称。
 23 CELERY_CONFIG_MODULE="celeryconfig"
 24
 25 # %n 将替换为节点名。
 26 CELERYD_LOG_FILE="/var/log/celery/%n.log"
 27 CELERYD_PID_FILE="/var/run/celery/%n.pid"
 28
 29 # 工人应该以非特权用户身份运行。
 30 CELERYD_USER="audiwime"
 31 CELERYD_GROUP="audiwime"
 32
 33 导出 DJANGO_SETTINGS_MODULE="cidec_sw.settings"

```

但如果我跑

```
芹菜状态
```

在终端中，我收到了以下回复：

```
错误：在时间限制内没有节点回复
```

[我可以通过https://github.com/celery/celery/tree/3.0/extra/generic-init.d/](https://github.com/celery/celery/tree/3.0/extra/generic-init.d/)中提供的 celeryd 脚本重新启动 celery

```
/etc/init.d/celeryd 重启
celeryd-multi v3.0.12 (Chiastic Slide)
> w1.one.cloudwime.com: DOWN
> 重启节点 w1.one.cloudwime.com：OK

```

我可以运行`python26 manage.py celeryd -l info`并且我在 django 中的任务运行良好，但是如果我让守护进程完成它的工作，我不会得到任何结果，甚至不会在**/var/log/celery/w1.log中出现错误**

我知道我的任务已被注册，因为我这样做了

```
from celery import current_app
def call_celery_delay(request):
    print current_app.tasks
    run.delay(request.GET['age'])
    return HttpResponse(content="celery task set",content_type="text/html") 
```

我得到一本字典，其中出现了我的任务

```
{'celery.chain': <@task: celery.chain>, 'celery.chunks': <@task: celery.chunks>, 'celery.chord': <@task: celery.chord>, 'tasks.add2': <@task: tasks.add2>, 'celery.chord_unlock': <@task: celery.chord_unlock>, **'tareas.tasks.run': <@task: tareas.tasks.run>**, 'tareas.tasks.add': <@task: tareas.tasks.add>, 'tareas.tasks.test_two_minute': <@task: tareas.tasks.test_two_minute>, 'celery.backend_cleanup': <@task: celery.backend_cleanup>, 'celery.map': <@task: celery.map>, 'celery.group': <@task: celery.group>, 'tareas.tasks.test_one_minute': <@task: tareas.tasks.test_one_minute>, 'celery.starmap': <@task: celery.starmap>} 
```

但除此之外，我什么也没得到，我的任务没有结果，日志中没有错误，什么也没有。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T07:07:07.287

使用以下命令查找问题：

```
C_FAKEFORK=1 sh -x /etc/init.d/celeryd start 
```

这通常是因为您的源项目中存在问题（权限问题、语法错误等）

如芹菜文档中所述：-

> 如果工作人员以“OK”开始但之后几乎立即退出并且日志文件中没有任何内容，则可能存在错误，但由于守护程序标准输出已经关闭，您将无法在任何地方看到它们。对于这种情况，您可以使用 C_FAKEFORK 环境变量来跳过守护程序步骤

祝你好运

资料来源：[芹菜文档](http://celery.readthedocs.org/en/latest/tutorials/daemonizing.html#troubleshooting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T07:54:46.237

这是因为 celery 守护进程可能没有启动。这是原因之一。所以请使用 python manage.py celeryd --loglevel=INFO 重新启动它

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-29T15:31:11.193

我解决了我的问题，这是一个非常简单的解决方案，但也是一个奇怪的解决方案：我所做的是：

```
$ /etc/init.d/celerybeat restart
$ /etc/init.d/celeryd restart
$ service celeryd restart 
```

我必须按此顺序执行此操作，否则我会得到一个丑陋的错误：在时间限制内没有节点回复。

# java - 动态 JavaFX 对象

> ID：13575712
> 
> 赞同：0
> 
> 时间：2012-11-27T00:46:22.867
> 
> 标签：java, object, dynamic, text, javafx

我是 Java 和 JavaFX 的新手，我有 php、javascript、HTML 经验……我正在尝试创建一个 GUI 来进行数学运算并使用 javaFX 文本对象显示结果。我有一个构造方法来根据其输入创建每个文本对象。然后我有另一个构造方法，它会多次调用前一个创建多个文本对象，但我不能让它工作，因为它不会让我根据方法输入定义新的文本对象例如：

```
public function(variable)
{
    Text variable = new Text();
} 
```

问题是每次程序运行时屏幕上都会有不同数量的文本对象，所以当我事先不知道对象的总数时，我不确定如何完成命名约定。

另外，我如何将它们全部添加到最后的场景中。构造函数方法是否会在创建时将每个组添加到组中，然后使用 get children 方法添加整个组？

关于我想要创建的更一般的想法：该程序将从屏幕上的 10 个文本项开始。用户可以单击两个对象并选择将它们相加/相减/相乘，然后在处理完事件后将创建另一个带有答案的文本标签。然后可以使用新的答案来创建另一个答案，然后再创建一个等等......

也许我正在接近这个完全错误的，让我知道你会如何接近它。

- 回到我最初的问题，如果我愿意，我可以静态命名起始 10，但我需要知道如何动态地添加更多我认为...... .

在此先感谢，布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:51:29.543

您想使用某种简单的集合，例如`Array`or `List`。您可能想通读Java[的 Collections 教程](http://docs.oracle.com/javase/tutorial/collections/index.html "收藏之路")。对于您的程序，最简单的方法可能是一组 Text 对象：

```
Text[] textObjects = new Text[10];//Replace 10 with however many you will need
for(int i = 0; i < 10; i++) {
  textObjects[i] = new Text();
} 
```

# algorithm - 多图和最便宜的路径

> ID：13575715
> 
> 赞同：1
> 
> 时间：2012-11-27T00:46:28.530
> 
> 标签：algorithm, graph, shortest-path

我有一个问题要解决，我需要找到两个城市之间最便宜的路径，但是两个相邻城市之间有几种可能的路径，所以我有一个 Multigraph，我可以在两个边缘之间有折扣。是否有一种算法可以在多图中找到最便宜的路径？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-07T18:24:36.400

Dijkstra 与 Multigraphs 一起工作，但您不应该跟踪访问过的顶点，由于平行边，您必须再次检查它们。此外，无论何时你发现一个自环，你都应该移动一个而无需任何计算。

# c++ - 直观解释运算符重载及其意义

> ID：13575720
> 
> 赞同：-1
> 
> 时间：2012-11-27T00:46:40.920
> 
> 标签：c++, operator-overloading

我在操作员重载方面遇到了很多麻烦。我只是不确定它的用途，以及何时应该使用它来产生所需的结果。这与我的困惑密切相关，即在创建复制构造函数时（据我所知，每当函数按值传递类类型的对象时都会调用该构造函数），通常认为 = 赋值运算符应该被重载并且应该明确定义析构函数。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:07:00.650

这是两个问题。关于三法则的问题已在[另一个主题](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)中得到解答（剧透：如果您正在实施其中一个，您可能正在管理一个资源，如果您这样做，您应该实施另外两个来管理该资源）。

有关使用运算符重载的简短答案，请比较需要此操作的矩阵库的语法：

```
M.multiply( a).plus( N).plus( A.multiply( B)); 
```

甚至：

```
plus( plus( multiply( a, M), N), multiply( A,B)); 
```

和：

```
a * M + N + A * B; 
```

# javascript - 如何拆分具有多个分隔符的字符串，仅在 javascript 中充当一个分隔符？

> ID：13575721
> 
> 赞同：0
> 
> 时间：2012-11-27T00:46:55.710
> 
> 标签：javascript, jquery, arrays, split

我想使用“空格和逗号”（“，”）作为分隔符将字符串拆分为数组。通过查看一些类似的问题，我想出了如何使它们作为一个分隔符工作。但是我希望他们只作为一个工作。所以我不希望数组只用逗号或空格分隔。所以我希望字符串`"txt1, txt2,txt3 txt4, t x t 5"`成为数组 txt1，`"txt2,txt3 txt4", "t x t 5"` 这是我当前不这样做的代码：

```
var array = string.split(/(?:,| )+/) 
```

这是 jsFiddle 的链接：http: [//jsfiddle.net/MSQxk/](http://jsfiddle.net/MSQxk/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T00:49:04.507

做就是了：`var array = string.split(", ");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:49:33.317

你可以用这个

```
var array = string.split(/,\s*/);
//=> ["txt1", "txt2", "txt3", "txt4", "t x t 5"] 
```

这将补偿字符串，如

```
// comma separated
foo,bar

// comma and optional space
foo,bar, hello 
```

如果你想补偿逗号两边的可选空格，你可以使用这个：

```
// "foo,bar, hello , world".split(/\s*,\s*);
// => ['foo', 'bar', 'hello', 'world'] 
```

# git - 在使用正在积极开发的库时运行 git bisect

> ID：13575723
> 
> 赞同：0
> 
> 时间：2012-11-27T00:47:20.693
> 
> 标签：git, git-bisect

我有两个项目，LogViewer 和 LogAnalyzer，它们都在单独的 git 存储库中开发，而 LogViewer 依赖于 LogAnalyzer。我正在尝试在 LogViewer 上进行 git bisect，但每次我尝试测试新提交时，我都必须在具有正确 API 的 LogAnalyser 中查找并签出一个提交，这既烦人又耗时。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:32:53.300

LogViewer 可能知道它所依赖的 LogAnalyzer 的版本/标签。创建一个检查相应版本的 LogAnalyzer 的脚本应该很容易。

由于 LogAnalyzer 有一个 API，它也应该在该 API 更改时更改版本。

# python - 计算 MxN 数组列表的平均值

> ID：13575724
> 
> 赞同：0
> 
> 时间：2012-11-27T00:47:23.960
> 
> 标签：python, numpy

我仍然掌握使用 numpy 和数组操作的窍门。

我正在寻找获取二维数组列表的逐行平均值的方法。

例如，我有一个 4x3x25 数组，我希望得到一个 3x25 的行平均值数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:52:58.337

如果一切都在一个 3D 阵列中，您可以这样做：

```
A.mean(axis=0) 
```

…它将沿第一维运行。

如果它实际上只是 2D 数组的列表，则必须先将其转换为 3D 数组。我会做：

```
A = np.dstack(list_of_arrays)  # Combine the 2D arrays along a new 3rd dimension
A.mean(axis=2)                 # Calculate the means along that new dimension 
```

# jquery - 使用 jquery 仅创建一个开始的 div 标签

> ID：13575729
> 
> 赞同：4
> 
> 时间：2012-11-27T00:47:55.363
> 
> 标签：jquery, jquery-ui

好的，所以我已经在这个网站上搜索了很多，但我似乎找不到答案，所以我将以更好的理由问同样的问题。我正在尝试使用 jquery 添加一个打开的 div 标签。当我尝试使用 . 我知道 jquery 不喜欢像我想要的那样本地创建标签。但是，情况如下：

我有一个用于显示表单的动态表单生成器。我在表单中使用了几个标题作为部分标题。我想使用 jquery 手风琴，它想看到一个 div 元素包装了手风琴框架的内容，它想直接在我的 . 问题是开始和结束 div 标签之间的元素数量是动态的。所以我不能只是包装一些东西并完成它。我想做的是这样的：

```
<h3>Section 1</h3> 
```

...动态代码部分在这里

```
<h3>Section 2</h3> 
```

我想使用 jquery 来结束这样的事情：

```
<h3>Section 1</h3>
<div> 
```

动态代码部分在这里

```
</div>
<h3>Section 2</h3>
<div> 
```

更多动态代码

```
</div> 
```

我知道我可以找到我知道的元素（h3 标签）并插入 html。问题是 jquery 不会让我。显然它对我不够信任，无法靠我自己来平衡。有人对如何使它起作用有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T00:53:01.573

利用[`.wrapAll()`](http://api.jquery.com/wrapAll/)

```
$('h3').each(function(){
   $(this).nextUntil('h3').wrapAll(document.createElement('div'));
}); 
```

演示：http: [//jsfiddle.net/ph8D2/](http://jsfiddle.net/ph8D2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T00:55:36.837

不，实际上不可能插入开始或结束标签，感谢上帝。阻止你的不是 jquery，而是 DOM api。插入开始标签没有任何意义，因为那不是有效的实体。

只是做类似的事情

```
<h3>Section 1</h3>
<div class="dynamic">

</div> 
```

和

```
$('.dynamic').html( .. your dynamic content ..) 
```

# java - 是否可以将对象从对象重新输入为整数

> ID：13575730
> 
> 赞同：0
> 
> 时间：2012-11-27T00:48:02.523
> 
> 标签：java, parsing, object, arraylist

我面临将对象重新输入为整数的问题。

我有具有 2 个字符串属性的对象 Car。第一个属性是 ID。我将 ID 从字符串重新输入为整数

```
ArrayList<Car> intList = new ArrayList<Car>(); // already filled with objects 

ArrayList<Integer> intList = new ArrayList<Integer>();

for(Car tempInt : items){   
intList.add(Integer.parseInt(tempInt.getID()));
}
Collections.sort(intList); // i sorted id's 
```

我可以将整数重新输入 Car 对象吗？

```
for (ItemObject temp : intList) { // HERE I GET THE ERROR

if(temp instanceof Car){
System.out.println("ID : "+((Car)temp).getID())
        }} 
```

这可能吗？我需要排序对象。谢谢。小号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:54:21.603

我认为您从根本上误解了在这种情况下哪些对象是哪些对象。当您创建您的时，`ArrayList<Integer>`您不会神奇地保留有关这些整数连接到哪些汽车的任何信息。

我*认为*您想要做的是`Cars`按 id 对列表进行排序，对吗？在这种情况下，你想要的是`Comparator`：[http ://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

以下是使用 a 进行排序的示例`Comparator`：

```
ArrayList<Car> cars = ...//Filled with cars
Comparator<Car> carSorter = new Comparator<Car>() {
  @Override
  public int compare(Car a, Car b) {
    return a.getID() - b.getID();
  }
};
Collections.sort(cars, carSorter);//After this line, cars will be in order 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:56:01.507

我根本不会这样做。如果您改为允许汽车能够相互比较（通过将 id 存储为`Integer`，则`Car`s 可以自行排序。这样做：

```
public class Car implements Comparable<Car> {
    private String id;
    private String otherString;
    private Integer intId; // this is new

    public Car(String arg0, String arg1) {
        // Add this line to constructor
        intId = Integer.parseInt(id);
    }

    @Override
    public int compareTo(Car arg0) {
        return intId.compareTo(arg0.intId);
    }
} 
```

然后，只需执行以下操作：

```
Collections.sort(carList); 
```

# html - 仅使用 html 列出项目，没有任何 css 样式

> ID：13575731
> 
> 赞同：0
> 
> 时间：2012-11-27T00:48:05.097
> 
> 标签：html, list, line-breaks

我的问题很简单。列出不包含项目符号或缩进的项目的最佳方式是什么。没有css可以吗？例如：

```
item 1 
item 2
item 3 
```

同时，我使用了换行符：

```
item 1 
<br>
item 2
<br>
item 3 
```

这是没有css的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:52:36.457

用于`<p>`段落，这就是您要的。像这样：

```
<p>A paragraph</p> 
```

对于列表，`<ul>`对于无序列表或`<ol>`有序列表（带有数字的列表）。然后，`<li>`用于每个元素。

举个例子：

```
<ul>
  <li>Element 1</li>
  <li>Element 2</li>
  <li>Etc</li>
</ul> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:53:57.887

有多种方法可以做到这一点，您可以将每个项目放在它自己的`div`中，每个项目在一个单独`tr`的 a 中`table`，您可以`br`像当前一样使用，您可以将每个项目放在一个单独的`p`元素中，等等。

主要问题是你为什么不想使用 CSS？如果您想使用`ul`/`li`您可以轻松设置样式以根据需要显示。我想我提到这一点的原因是，如果您尝试进入 HTML 而不尝试学习 CSS，那么您就走错了路。在这一点上，两者是不可分割的技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T06:30:14.790

最好的方法是将每个项目包装在一个`div`元素中：`<div>item 1</div>`. 这比 好`br`，因为每个项目都成为一个元素，所以它可以在客户端脚本和 CSS 中作为一个单元来处理。但是忽略这些方面，`br`在实践中是可以的。

# javascript - 为什么 Opera 中的 document.attachEvent 为假？

> ID：13575732
> 
> 赞同：0
> 
> 时间：2012-11-27T00:48:06.267
> 
> 标签：javascript, dom-events, opera

这纯粹是一种令人费解的好奇心。

我知道 Opera 支持 IE 的高级事件模型 ( `attachEvent`)，但是为什么`document.attachEvent`在这个浏览器中评估为 false 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:12:45.573

出于与除 IE 之外的任何地方都隐秘存在相同的原因`document.all`：支持无条件使用它的网站，但避免在有条件地检查它的网站上使用遗留的仅 IE 代码路径（通常使用其他非标准的 IE 东西）支持）。[这是在 11.62 中引入的，在这里](http://my.opera.com/sitepatching/blog/2012/02/09/window-event-attachevent-detachevent-script-onreadystatechange)宣布；似乎值得注意的是`detachEvent`并且`window.event`也被隐藏了。

至于为什么 Opera 这样做而其他人不这样做：Opera 历来支持它而不隐藏它，虽然人们认为完全删除它是可取的，但 Opera 支持它的遗产太多，无法实现这一点，破坏了诸如：

```
function _aspxAttachEventToElement(element, eventName, func) {
 if(__aspxNetscapeFamily || __aspxWebKitFamily)
 element.addEventListener(eventName, func, true);
 else { if(eventName.toLowerCase().indexOf("on") != 0) eventName = "on" + eventName; element.attachEvent(eventName, func); }
 } 
```

（来自[DevExpress](http://www.devexpress.com/)。）

```
if (d.opera)
    d.attachEvent("onmousewheel", j);
else
    d.onmousewheel = h.onmousewheel = j; 
```

（来自[krpano](http://krpano.com/)。）

# c# - 在文本框中显示有关在列表框中选择的对象的信息

> ID：13575733
> 
> 赞同：1
> 
> 时间：2012-11-27T00:48:10.123
> 
> 标签：c#, visual-studio-2010

我想在旁边的文本框中显示有关在列表框中选择的任何航班的信息。我的问题是我无法让我的 curFlight 变量正常工作，这给了我 InvalidCastException 是未处理的错误，并说当从数字转换时，该值必须是小于无穷大的数字。

这是我的表单代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Reservations
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Flight curFlight;

        Flight flight1 = new Flight("Cessna Citation X", "10:00AM", "Denver", 6, 2);
        Flight flight2 = new Flight("Piper Mirage", "10:00PM", "Kansas City", 3, 2);

        private void Form1_Load(object sender, EventArgs e)
        {
            MakeReservations();
            DisplayFlights();

        }

        private void lstFlights_SelectedIndexChanged(object sender, EventArgs e)
        {
            curFlight = (Flight)lstFlights.SelectedItem;
            txtDepart.Text = curFlight.DepartureTime;
            txtDestination.Text = curFlight.Destination;
        }

        private void MakeReservations()
        {
            flight1.MakeReservation("Dill", 12);
            flight1.MakeReservation("Deenda", 3);
            flight1.MakeReservation("Schmanda", 11);
            flight2.MakeReservation("Dill", 4);
            flight2.MakeReservation("Deenda", 2);
        }

        private void DisplayFlights()
        {
            lstFlights.Items.Clear();
            lstFlights.Items.Add(flight1.Plane);
            lstFlights.Items.Add(flight2.Plane);
        }

        private void btnMakeReservation_Click(object sender, EventArgs e)
        {
            string name;
            int seatNum;

            name = txtCustomerName.Text;
            seatNum = Convert.ToInt16(txtSeatNum.Text);

            curFlight.MakeReservation(name, seatNum);
        }
    }
} 
```

这是班级代码

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Reservations
{
    class Flight
    {
        private string mPlane;
        private string mDepartureTime;
        private string mDestination;
        private int mRows;
        private int mSeats;
        private string[] mSeatChart;

        public Flight()
        {
        }

        public Flight(string planeType, string departureTime, string destination, int numRows, int numSeatsPerRow)
        {
            this.Plane = planeType;
            this.DepartureTime = departureTime;
            this.Destination = destination;
            this.Rows = numRows;
            this.Seats = numSeatsPerRow;

            // create the seat chart array
            mSeatChart = new string[Rows * Seats];

            for (int seat = 0; seat <= mSeatChart.GetUpperBound(0); seat++)
            {
                mSeatChart[seat] = "Open";
            }
        }

        public string Plane
        {
            get { return mPlane; }
            set { mPlane = value; }
        }

        public string DepartureTime
        {
            get { return mDepartureTime; }
            set { mDepartureTime = value; }
        }

        public string Destination
        {
            get { return mDestination; }
            set { mDestination = value; }
        }

        public int Rows
        {
            get { return mRows; }
            set { mRows = value; }
        }

        public int Seats
        {
            get { return mSeats; }
            set { mSeats = value; }
        }

        public string[] SeatChart
        {
            get { return mSeatChart; }
            set { mSeatChart = value; }
        }

        public void MakeReservation(string name, int seat)
        {
            if (seat <= (Rows * Seats) && mSeatChart[seat - 1] == "Open")
            {
                mSeatChart[seat - 1] = name;
            }
            else
            {
                //let calling program know it didnt work.

            }
        }

        public bool IsFull()
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:25:07.637

您收到错误的原因是因为您正在将一个字符串分配给列表框，然后尝试将该字符串强制转换为飞行对象

```
lstFlights.Items.Add(flight1.Plane);   // Just say it is named "Plane 1"
lstFlights.Items.Add(flight2.Plane);   // Just say it is named "Plane 2"

curFlight = (Flight)lstFlights.SelectedItem; // Now you are trying to convert "Plane 2" into a flight object which is incorrect 
```

试试这个

添加类型航班的全球列表

```
List<Flight> flightList = new List<Flight>();

Flight flight1 = new Flight("Cessna Citation X", "10:00AM", "Denver", 6, 2);
Flight flight2 = new Flight("Piper Mirage", "10:00PM", "Kansas City", 3, 2); 
```

在您的表单加载中添加 SetupFlights

```
private void Form1_Load(object sender, EventArgs e)
{
        MakeReservations();
        DisplayFlights();
        SetupFlights();  // added this line
}

 private void SetupFlights()
 {
        flightList.Add(flight1);
        flightList.Add(flight2);
 } 
```

并且您选择的 Index Changed 应该是这样的

```
private void lstFlights_SelectedIndexChanged(object sender, EventArgs e)
{
        curFlight = flightList.FirstOrDefault(x => x.Plane == lstFlights.SelectedItem.ToString()); // Changed this line
        txtDepart.Text = curFlight.DepartureTime;
        txtDestination.Text = curFlight.Destination;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:44:13.443

虽然 MVCKarl 的答案更笼统，但我将展示一种更简单的方法，它可能适合简单的情况。

您可以简单地覆盖`ToString`该类`Flight`：

```
class Flight
{
    //your code

    public override string ToString()
    {
        //or anything you want to display
        return this.Plane;
    }        
} 
```

然后编辑`DisplayFlights`方法以将航班添加到列表中：

```
private void DisplayFlights()
{
    lstFlights.Items.Clear();
    lstFlights.Items.Add(flight1);
    lstFlights.Items.Add(flight2);
} 
```

在此之后，您`lstFlights_SelectedIndexChanged`将按预期开始工作：

```
private void lstFlights_SelectedIndexChanged(object sender, EventArgs e)
{
    curFlight = (Flight)lstFlights.SelectedItem;
    textBox1.Text = curFlight.DepartureTime;
    textBox2.Text = curFlight.Destination;
} 
```

# c++ - 释放内存失败：free()：下一个大小无效（快速）：

> ID：13575735
> 
> 赞同：0
> 
> 时间：2012-11-27T00:48:29.167
> 
> 标签：c++, debugging, memory, free, allocation

我有一个动态重新分配大小的矩阵类。具体来说：动态重新分配行数组。

但在某些情况下，调用矩阵的析构函数时会出现内存释放问题：

> *** 检测到 glibc *** ./solver: free(): invalid next size (fast): 0x0000000000c112b0 ***

并且该过程正在中止。

矩阵类：

```
#ifndef __matrix_hpp
#define __matrix_hpp

#include <cstring>
#include <stdexcept>
#include "row.hpp"

using namespace std;

class Matrix {

public:
    Matrix();
    ~Matrix();
    size_t size();
    void resize(size_t size);
    double get(size_t x, size_t y) throw (out_of_range);
    void set(size_t x, size_t y, double value) throw (out_of_range);
    double getfv(size_t y) throw (out_of_range);
    void setfv(size_t y, double value) throw (out_of_range);
    void optimize(size_t y) throw (out_of_range);
    void _print();

private:
    size_t sz;
    Row **data;

};

#endif 
```

和身体的重要功能：

```
Matrix::~Matrix() {
    if (data != NULL) {
        for (size_t i = 0; i < sz; ++i)
            delete data[i];
        delete [] data;
    }
}

void Matrix::resize(size_t size) {
    if (size == sz)
        return;
    Row **newData = new Row *[size];
    if (data != NULL)
        memcpy(newData, data, sz * sizeof(Row*));
    if (size > sz) {
        for (size_t i = sz; i < size; ++i)
            newData[i] = new Row();
    }
    else {
        for (size_t i = size; i < sz; ++i)
            delete data[i];
    }
    delete [] data;
    data = newData;
    sz = size;
} 
```

所以，这就是代码。当我制作一个矩阵然后减小它的大小并调用析构函数时，问题就来了。例如：

```
Matrix *matrix = new Matrix();
matrix->resize(10);
matrix->resize(7);
delete matrix; 
```

但是使矩阵更大的效果很好：

```
Matrix *matrix = new Matrix();
matrix->resize(10);
matrix->resize(13);
delete matrix; 
```

最有趣的是，这个例子有效：

```
Matrix *matrix = new Matrix();
matrix->resize(3);
matrix->resize(2);
delete matrix; 
```

所以我不知道有什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T00:58:27.377

错误是您在分配的空间之外写：罪魁祸首是这一行

```
Row **newData = new Row *[size];
if (data != NULL)
    memcpy(newData, data, sz * sizeof(Row*)); 
```

如果 sz 大于 size，那么你会写太多并且可能会破坏你的堆。将其更改为下面的代码，一切应该会更好。这样，您将始终复制有效数据，并且不会超过您分配的数据。

```
Row **newData = new Row *[size];
if (data != NULL)
    memcpy(newData, data, (size>sz?sz:size) * sizeof(Row*)); 
```

从 3 到 2 的大小调整取决于运气（以及堆的工作方式）。

此外，您不会检查 new Row[] 是否失败，但这会导致 NULL 指针异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:52:29.373

经过非常粗略的检查，我敢打赌你的问题是这样的：

```
if (data != NULL)
    memcpy(newData, data, sz * sizeof(Row*)); 
```

如果您从 10 缩小到 7，那么您只需将 10 个指针复制到大小为 7 的缓冲区上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:55:00.463

当您分配一些内存并写入超过该内存的末尾时会发生这种情况，从而覆盖您不拥有的用于管理空闲堆的内存。

查看您写入分配内存的每个位置。确保您不会写超出您请求并正确拥有的内存的末尾。

# python - 返回 GAE ProtoRPC 的 HTTP 代码

> ID：13575736
> 
> 赞同：0
> 
> 时间：2012-11-27T00:48:37.360
> 
> 标签：python, google-app-engine, protorpc

如何控制`protoRPC`响应中的 HTTP 状态码？

假设我有以下服务：

```
class ApiService(remote.Service):

    @remote.method(ApiRequestContextCreate, ApiResponseContextCreate)
    def context_create(self, request):
        cid = helpers.create_context(request.name)
        return ApiResponseContextCreate(cid=cid) 
```

在我看来，protoRPC API 缺乏语义：要么可以满足请求并返回 a `200`，要么引发异常以产生`404`. 当然可以在 RPC 方法中制作错误响应，但这似乎很笨拙。

更新：我发现我也可以`ApplicationError`为`400`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:55:54.063

HTTP 状态代码不是 ProtoRPC 规范的一部分，因为 ProtoRPC 旨在支持 HTTP 以外的协议。因此，它不能具有特定于 HTTP 的返回码。相反，错误是通过引发 ApplicationError 来返回的，使用 error_name 字段来指定应用程序特定的错误条件。

# ide - 在aptana studio3中关闭自动关闭标签

> ID：13575741
> 
> 赞同：3
> 
> 时间：2012-11-27T00:49:03.320
> 
> 标签：ide, aptana

我正在将 Aptana 用于 Rails 开发 IDE。对于一直让我烦恼的一件事，我找不到允许我关闭自动关闭 ruby​​ 方法（def/end）标记的配置。

我确实设法在首选项->aptana->editor->html->自动插入结束标签下关闭 HTML 标签，但不是使用 ruby​​ 代码。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-09T16:41:17.657

如果您转到首选项 > 编辑器 > HTML，则有一个用于自动关闭标签的选项。取消选中此项，它将停止自动关闭。

# google-app-engine - 使用 Google App Engine 和 GWT 创建移动应用程序？

> ID：13575744
> 
> 赞同：2
> 
> 时间：2012-11-27T00:49:09.123
> 
> 标签：google-app-engine, gwt, mobile, mobile-application

我有一个带有使用 GWT 创建的前端的 Google App Engine 应用程序。我将如何创建一个与此等效的移动应用程序？特别是我更喜欢使用 GWT 在这里创建前端。Google 在 GWT 中是否有专门用于创建移动应用程序的东西？GWT 中是否已经存在一些现有结构，它采用您创建的前端并使其可扩展，以便可以轻松地将其转换为移动应用程序？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:11:48.933

您还应该明确检查[mgwt](http://www.m-gwt.com/) + [gwt-phonegap](http://code.google.com/p/gwt-phonegap/)。这是一个跨平台的 gwt/phonegap[解决方案](http://mobilegwt.appspot.com/showcase/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T02:30:06.340

这在很大程度上取决于您是希望像在 phonegap 中那样构建跨平台，还是像在您下载的 gwt zip 文件的示例文件夹中提供的 mobilewebapp 示例中那样保持简单。

mobilewebapp 示例不访问智能手机功能，但可以通过任何移动设备上的浏览器访问。phonegap 或类似的框架，如钛、sencha，提供了访问智能手机功能的 api。

更多信息——

[http://www.sapandiwakar.in/technical/api-research-study-iphone-and-android-applications/](http://www.sapandiwakar.in/technical/api-research-study-iphone-and-android-applications/)

[Sencha Touch 2 原生构建与在 Phonegap 中包装 Sencha Touch 2](https://stackoverflow.com/questions/10642897/sencha-touch-2-native-build-vs-wrapping-sencha-touch-2-in-phonegap)

# nhibernate - nhibernate 多对多映射三个表。快速启动

> ID：13575745
> 
> 赞同：1
> 
> 时间：2012-11-27T00:49:17.783
> 
> 标签：nhibernate, many-to-many, nhibernate-mapping

我正在努力解决这个问题，但到目前为止还不能。各种错误。

这些是我的数据库表

人（personID、姓名、年龄）

角色（角色 ID、角色名称）

PersonRoles（personRolesID、personID、roleID）

这是我的域类

```
public Person
{
public virtual Roles RolesForThisPerson {get;set;}
public virtual string Name {get;set;}
public virtual int Age {get;set;}
}

public Roles
{
public virtual IList<string> RoleList {get;set;}
} 
```

我完全不知道如何处理这个问题。我对套装、包、清单感到很困惑……我什至不知道从哪里开始。

任何人都可以在这里给我一点推动？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:14:38.613

让我们保持 DB 模式不变并首先调整 C# 域类：

```
public class Person
{
    public virtual string Name {get;set;}
    public virtual int Age {get;set;}
    public virtual IList<Role> RolesForThisPerson {get;set;}
}
public class Role
{
    public virtual string RoleName { get; set; }
} 
```

现在将这两个实体基本映射到已定义的表中：

```
<class name="Person" table="Person" lazy="true">
    <id name="ID" column="personID">
        <generator class="native" />
    </id>
    <property name="Name" not-null="true" />
    <property name="Age" not-null="true" />

    <!-- placeholder for roles -->

</class>

<class name="Role" table="Role" lazy="true">
    <id name="ID" column="roleID">
        <generator class="native" />
    </id>
    <property name="RoleName" not-null="true" />
</class> 
```

现在我们可以通过这种方式使用`<idbag>`映射并扩展`Person`类映射：

```
<idbag name="RolesForThisPerson" batch-size="25" table="PersonRoles"
    inverse="true" lazy="true" cascade="none" >
    <collection-id column="personRolesID" type="System.Int32" >
        <generator class="native" />
    </collection-id>
    <key column="personID" />            
    <many-to-many class="Role" column="roleID" />
</idbag> 
```

可以从这样一个事实中`<idbag>`受益，即使是对表也有自己的标识符。Cascade 设置为 none，期望角色在系统中，并且仅将用户分配给它们（从中删除）。属性`batch-size`将影响在获取惰性角色集合时将执行多少 SELECT 语句。

# c++ - 检查两个向量之间的差异

> ID：13575748
> 
> 赞同：0
> 
> 时间：2012-11-27T00:49:33.027
> 
> 标签：c++, sorting, c++11, vector

假设您有 2 个向量`v1`，并且`v2`具有以下值：

```
v1 = {8,4,9,9,1,3};
v2 = {9,4,3,8,1,9}; 
```

检查它们是否“相等”的最 STL 方法是什么？我将“相等”定义为无论顺序如何，内容都是相同的。我宁愿这样做而不进行排序。

我倾向于建造两个`std::map<double, int>`来计算每个向量的元素。

所有，我需要的是算法中的布尔值是/否。

你说什么？

Stack Overflow 上的其他对话诉诸于对向量进行排序，我宁愿避免这种情况。因此，这个新线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T00:56:09.673

> 我倾向于构建两个 std::map 来计算每个向量的元素。

这比仅仅创建排序向量要慢得多。（还要注意，它`std::map` *是*由排序驱动的；它只是使用红黑树或 AVL 树来实现）映射是针对插入和查找的均匀混合而优化的数据结构；但是您的用例是一大堆插入，然后是一大堆没有重叠的查找。

我只会对向量进行排序（或制作副本并对它们进行排序，如果您不允许销毁源副本），然后使用内置的向量`operator ==`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T01:04:34.837

对向量进行排序并调用 set_difference 仍然是最好的方法。如果副本对您来说很重，那么两个未排序数组之间的比较会更糟吗？

如果您希望当前数组不受影响，您可以制作当前数组的副本吗？

```
v1 = {8,4,9,9,1,3};
v2 = {9,4,3,8,1,9};

// can trade before copy/sort heavy work
if (v1.size() != v2.size()){
}     
std::vector<int> v3(v1);
std::vector<int> v4(v2);

sort(v3.begin(), v3.end());
sort(v4.begin(), v4.end());

return v3 == v4; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T00:57:02.197

我假设由于某种原因您无法对向量进行排序，很可能是因为您仍然需要按原始顺序排列它们，或者复制它们的成本很高。否则，只需对它们进行排序。

在每个向量中创建一个“视图”，允许您以任何顺序查看向量。您可以使用开始按顺序指向元素的指针向量来执行此操作。然后对两个视图进行排序，为每个向量生成一个排序视图。然后比较两个视图，按视图顺序比较两个向量。这避免了对向量本身进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T00:52:15.220

最初是在考虑以集合的方式工作，因为这就是您实际考虑的方式，但这确实需要排序。这可以`O(n)`通过将两者都转换为哈希图并在那里检查是否相等来完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-27T00:54:07.267

只需取第一个向量并将其与第二个向量中的每个元素进行比较。

如果在第二个中找不到第一个值中的一个值，则向量是不同的。在最坏的情况下，它需要 O(n*m) 时间，其中 n = 第一个向量的大小，m = 第二个向量的大小。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-27T02:03:14.333

这个 util 方法将帮助您比较 2 个 int[]，如果有任何问题，请告诉我

公共静态布尔比较数组（int [] v1，int [] v2）{

```
 boolean returnValue = false;

    if(v1.length != v2.length)
        returnValue = false;

    if(v1.length == 0 || v2.length == 0)
        returnValue = false;

    List<Integer> intList =  Ints.asList(v2);

    for(int element : v1){
        if(!intList.contains(element)){
            returnValue = false;
            break;
        }else{
            returnValue = true;
        }
    } 
```

# android - 必须在添加内容之前调用 RequestFeature，不确定为什么要调用它

> ID：13575750
> 
> 赞同：1
> 
> 时间：2012-11-27T00:49:39.900
> 
> 标签：android, onclicklistener

我目前正在尝试弹出一个 AlertDialog 框，其中包含有关具有自定义布局文件“details.xml”的电影的信息我觉得这可能是我在 AlertDialog 方面填充这些字段的方式，但我不确定如何最好处理它。

```
listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> Parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            Movie mTemp = movieArray.get(position);             
            //Intent intent = new Intent(getApplicationContext(), SingleItemList.class);

            AlertDialog.Builder builder = new AlertDialog.Builder(MovieList.this);
            builder.setView(getLayoutInflater().inflate(R.layout.details, null));
            builder.setTitle("Details");
            builder.setNeutralButton("Post to Facebook", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // User clicked OK button
                }
            });
            AlertDialog d = builder.create();
            if (mTemp != null) {
                ImageView image = (ImageView) d.findViewById(R.id.detailIcon);
                TextView title = (TextView) d.findViewById(R.id.detailTitle);
                TextView year = (TextView) d.findViewById(R.id.detailYear);
                TextView rating = (TextView) d.findViewById(R.id.detailRating);
                TextView director = (TextView) d.findViewById(R.id.detailDirector);

                if (title != null) {
                    title.setText("Name: " + mTemp.title);
                }

                if(year != null) {
                    year.setText("Year: " + mTemp.year);
                }

                if(rating != null) {
                    rating.setText("Rating: " + mTemp.rating + "/10");
                }

                if(director != null) {
                    director.setText("Director: " + mTemp.director);
                }

                if(image != null) {
                    image.setImageBitmap(getBitmap(mTemp.coverURL));
                }
            }

            d.show();

            /*
            Dialog dialog = new Dialog(MovieList.this);
            dialog.setTitle("Details");
            dialog.setContentView(R.layout.details);

            dialog.show();*/
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:57:07.520

你还没有发布你的 LogCat 错误，但我认为是你的`(mTemp != null)`块造成了麻烦。更改膨胀的视图，然后将其传递给`setView()`.

```
View view = getLayoutInflater().inflate(R.layout.details, null);
if (mTemp != null) {
    ImageView image = (ImageView) view.findViewById(R.id.detailIcon);
    TextView title = (TextView) view.findViewById(R.id.detailTitle);
    ...
}

AlertDialog.Builder builder = new AlertDialog.Builder(MovieList.this);
builder.setTitle("Details");
builder.setView(view);
builder.setNeutralButton("Post to Facebook", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // User clicked OK button
            }
        });

AlertDialog d = builder.create();
d.show(); 
```

# python - Django 应用程序：指向抽象类的外键

> ID：13575754
> 
> 赞同：3
> 
> 时间：2012-11-27T00:50:16.377
> 
> 标签：python, django, django-models

我正在尝试设计一个框架来帮助实现复杂的 Web 流程。该框架将提供可以由子应用程序继承和实现的抽象类。现在，您可以看到我的抽象类 Action 有一个带 Stage 的外键。因为它有一个外键，所以它不能被抽象化，因为它有自己的表。所以，如果我有 2 个实现应用程序，那么我的第一个应用程序可以看到它自己以及其他应用程序的所有阶段。我可以对查询进行一些调整以避免这种情况。但我想知道是否有解决方案，我的实现 Action 类可以直接指向 Inheriting Stage 类。

```
parent_app/models.py

class Stage(models.Model):
   name = models.CharField(max_length=255)

class Action(models.Model):
    stage = models.ForeignKey(Stage)
    class Meta:
       abstract = True 
```

sub_app1/models.py

```
class StageImpl1(Stage):
    pass

class ActionImpl1(Action):
    ... 
```

sub_app2/models.py

```
class StageImpl2(Stage):
    pass

class ActionImpl2(Action):
    ... 
```

# 更新：

目前的情况是：

ActionImpl1 有一个指向 Stage 的外键

我想要的是：

ActionImpl1 与 StageImpl1 有一个外键

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T00:58:12.587

抽象类是不存在的类。它被用作其他类的基础。它永远不会被初始化。

不存在的东西不能有外键指向它！

如果您想有一种方法可以指向几种不同的类，请看一些东西：[泛型关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#generic-relations)。这是 Django 的内置方式，可以在许多不同的对象上拥有看起来像外键点的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T01:13:46.820

这是不可能的。想想如果 A 是抽象的并且几个类从 A 继承，那么所有具有指向 A 的外键的类会发生什么。

我不知道您的要求，但我也许您应该考虑使用多表继承，并将 FK 指向父表。

从 Django 文档中：

多表继承

[https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)

> Django 支持的第二种模型继承类型是层次结构中的每个模型都是单独的模型。每个模型对应自己的数据库表，可以单独查询和创建。继承关系引入了子模型与其每个父模型之间的链接（通过自动创建的 OneToOneField）。例如：

# java - 德尔福Win32和JAVA？

> ID：13575757
> 
> 赞同：0
> 
> 时间：2012-11-27T00:50:36.173
> 
> 标签：java, delphi, winapi

想知道您是否可以提供帮助。我们使用名为 Nethelpdesk 的产品。据说它是用 Delphi Win32 编写的。（我是系统管理员，对代码工作知之甚少）基本上开发人员无法帮助我们解决问题，我们正在寻找其他人是否有任何线索。

运行他们的应用程序（nethelpdesk = nhd）时，如果 Java 是打开的，他们的应用程序就会很慢。这适用于任何机器，包括我的 i7 \ SSD \ 16GB ram，以 5GB 使用率和 8% 处理器平均运行。

关闭 NHD，我可以打开 15 个 Java 应用程序以及 12 个其他软件，然后机器就飞起来了。

重新打开他们的应用程序，系统突然停止。Windows 卡顿，流式传输时声音可能会中断，并且 NHD 应用程序的响应可能需要 30 秒或更长时间才能击中每个按钮。

关闭 JAVA 和 NHD 加速。

所有机器都运行良好，打开了大量应用程序，直到 NHD 打开。

如果 JAVA 关闭 NHD 运行得很好。

开发人员帮不上忙，我们只是希望指向任何方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:57:02.010

曾几何时，我是一名 Delphi 开发人员。当时我注意到，当我使用调试器单步执行代码时，运行 Outlook 会导致严重的性能问题。这种行为类似于您所描述的：在它们并发之前，任何一个进程都很好。最终我发现这与处理 OLE 消息的方式有关。这两个进程都倾向于使消息队列停滞，因此它们在反馈循环中彼此减慢了速度。

我怀疑这些方面的互动是您问题的根源。这本身并不能帮助您，但它可能会给您的开发人员一些洞察力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:02:40.780

使用 procmon 监视并检查应用程序正在做什么或正在访问什么。我猜GDI（图形子系统）......但它可以是其他任何东西。

# html - 电子邮件通讯的 HTML 表格问题

> ID：13575758
> 
> 赞同：0
> 
> 时间：2012-11-27T00:50:40.110
> 
> 标签：html, css, electronic-direct-mail

我编写了一个用于电子邮件分发的 EDM，但我遇到了一个轻微的渲染问题。

我的问题是，为什么它在 Outlook 中呈现这样的效果，我该怎么做才能修复它？

此外，如果您在浏览器中查看它，它并不完全正确，主要是因为我必须将 9px 下边距设置为`.l4`. 有人可以推荐另一种方法来解决这个问题，以便它正确地跨浏览器和电子邮件客户端呈现吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:54:35.267

@Jonah Bishop，除非您使用扁平图像，否则在电子邮件营销中使用嵌套表格总是一个好主意。CSS 被许多在线电子邮件应用程序（如 hotmail）绊倒，并且 div 上的内联样式对许多客户来说都是个问题。有问题，我的意思是编写适用于所有电子邮件客户端的内联样式具有挑战性。

你用什么来测试你的电子邮件？如果您的电子邮件营销平台不提供测试套件，[http://www.emailonacid.com/](http://www.emailonacid.com/)是一个不错的选择。[http://litmus.com/](http://litmus.com/)是与 mailchimp 配合使用的另一个不错的选择。事实上，mailchimp（很棒的服务）使您可以从您的帐户中使用石蕊：http: [//blog.mailchimp.com/tag/litmus/](http://blog.mailchimp.com/tag/litmus/)

一些提示： http: [//kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

这也是一个很好的资源：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# c# - Entity Framework 5（代码优先）导航属性

> ID：13575760
> 
> 赞同：2
> 
> 时间：2012-11-27T00:50:48.933
> 
> 标签：c#, entity-framework, entity-framework-5

在查询/过滤之前使用导航属性的给定外键加载所有项目是否是实体框架的正确行为？

例如：

```
myUser.Apples.First(a => a.Id == 1 && !a.Expires.HasValue); 
```

将加载与该用户关联的所有苹果。（SQL 查询不查询 ID 或 Expires 字段）。

还有其他两种方法（生成正确的 SQL），但都不像使用导航属性那样干净：

```
myDbContext.Entry(myUser).Collection(u => u.Apples).Query().First(a => a.Id == 1 && !a.Expires.HasValue);

myDbContext.Apples.First(a => a.UserId == myUser.Id && a.Id == 1 && !a.Expires.HasValue); 
```

### 我检查过的东西

*   延迟加载已启用，并且不会在任何地方禁用。
*   导航属性是`virtual`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:23:21.023

**编辑：**

好的，根据您的编辑，我认为我对您的要求有错误的想法（现在这更有意义）。我会留下以前的答案，因为我认为它可能对解释很有用，但与您的具体问题的相关性要小得多。

根据您发布的内容，您的用户对象已启用延迟加载。EF 默认启用延迟加载，但是延迟加载有一个要求，即将导航属性标记为虚拟（您已经完成）。

延迟加载通过附加到导航属性上的 get 方法并在该点执行 SQL 查询来检索外部实体来工作。导航属性也不是可查询的集合，这意味着当您执行 get 方法时，您的查询将立即执行。

在上面的示例中，在执行 .first 调用（使用普通的旧 linq 对象发生）之前枚举 User 上的 apples 集合。这意味着 SQL 将返回与用户关联的所有苹果，并在查询机器的内存中过滤它们（如您所见）。这也意味着您需要两个查询来拉下您感兴趣的苹果（一个用于用户，一个用于导航属性），如果您想要的只是苹果，这对您来说可能效率不高。

一个可能更好的方法是尽可能长时间地将整个表达式保留为查询。这方面的一个例子如下：

```
myDbContext.Users
   .Where(u=>u.Id == userId)
   .SelectMany(u=>u.Apples)
   .Where(a=>a.Id == 1 && !a.Expires.HasValue); 
```

这应该作为单个 SQL 语句执行，并且只拉下您关心的苹果。

高温高压

* * *

好的，根据我对您的问题的理解，您在问为什么 EF 似乎允许您在查询中使用导航属性，即使它们在结果集中可能为空。

在回答您的问题时，是的，这是预期的行为，原因如下：

为什么你写一个查询它被翻译成SQL，例如

```
myDbContext.Apples.Where(a=>a.IsRed) 
```

会变成类似的东西

```
Select * from Apples
where [IsRed] = 1 
```

类似以下内容也将直接转换为 SQL

```
myDbContext.Apples.Where(a=>a.Tree.Height > 100) 
```

会变成类似的东西

```
Select a.* from Apples as a
inner join Tree as t on a.TreeId = t.Id
where t.Height > 100 
```

然而，当我们实际拉下结果集时，情况就有些不同了。

为了避免提取过多数据并使其变慢，EF 提供了几种机制来指定结果集中返回的内容。一是延迟加载（如果您想避免性能问题，需要小心使用），二是包含语法。这些方法限制了我们撤回的内容，以便查询快速且不消耗不需要的资源。

例如，在上面你会注意到只返回 Apple 字段。

如果我们要像下面这样添加一个包含，您可能会得到不同的结果：

```
myDbContext.Apples.Include(a=>a.Tree).Where(a=>a.Tree.Height > 100) 
```

将转换为类似于以下内容的 SQL：

```
Select a.*, t.* from Apples as a
inner join Tree as t on a.TreeId = t.Id
where t.Height > 100 
```

在您上面的示例中（我很确定这在语法上不正确，因为 myContext.Users 应该是一个集合，因此不应该有一个 .Apples）您正在创建一个查询，因此所有变量都可用。当您枚举该查询时，您必须明确返回的内容。

有关导航属性及其工作方式（以及 .Include 语法）的更多详细信息，请查看我的博客：http: [//blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)

# database - 使用 pgadmin 运行两个并发会话

> ID：13575761
> 
> 赞同：1
> 
> 时间：2012-11-27T00:51:15.267
> 
> 标签：database, concurrency, pgadmin, transaction-isolation

我需要对我的数据库运行两个并发会话（同时运行两组事务）。每个事务都有自己的开始和结束事务语句。

更改事务隔离级别后，我需要使用哪些语句来告诉我的数据库同时运行两个特定会话？我正在使用 pg-admin。

pg_sleep 函数会帮助我同时运行两组事务吗？

谢谢！

# verilog - 这个 16 位进位超前加法器在结构 verilog 中看起来正确吗？

> ID：13575765
> 
> 赞同：2
> 
> 时间：2012-11-27T00:51:36.440
> 
> 标签：verilog

我完成了这个 16 位进位超前加法器，并问教授这是否正确。他告诉我这是错误的。我寻求帮助以了解如何使用结构 Verilog 构建一个。有人可以帮我验证我的代码有什么问题吗？

```
 `timescale 1ns/1ns
             module fulladder(a, b, c, s, cout); //one bit fulladder

                    //the wires
                wire w1, w2, w3, w4, s, cout;

                input a, b, c;
                output s, cout;
                reg [0 : 0] s,cout; //register with one bit

                //exclusive or gate with 1 ns delay
                  xor   #1
                  g1(w1, a, b),
                  g2(s, w1, c);
                //and gate with 1 ns delay
                  and   #1
                  g3(w2, c, b),
                  g4(w3, c, a),
                  g5(w4, a, b);
                  //or gate with 1 ns delay
                  or    #1
                  g6(cout, w2, w3, w4);

               endmodule

          //16bit carry look ahead
          module sixteen_bit_carry_lookahead(a, b, c, s, cout);
                input  [15:0] a,
                input  [15:0] b,
                input        c,    //Carry in
                output [15:0] s,    //Sum
                output       cout  //Carry

            //wires
            wire [3:1] carry, [3:0] p, [3:0] g, [3:1] carry;  
            fulladder f0(.a(a[0]), .b(b[0]), .c(c),.s(s[0]),.cout(),.g(g[0]),.p([0]));
            fulladder f1(.a(a[1]),.b(b[1]),.c(carry[1]),.s(s[1]),.cout(),.g(g[1]),.p([1]));
            fulladder f2(.a(a[2]), .b(b[2]), .c(carry[2]), .s(s[2]), .cout(), .g(g[2]),.p([2]));
            fulladder f3(.a(a[3]), .b(b[3]), .c(carry[3]), .s(s[3]), .cout(), .g(g[3]), .p([3]));
            fulladder f4(.a(a[4]), .b(b[4]), .c(carry[4]), .s(s[4]), .cout(), .g(g[4]), .p([4]));
            fulladder f5(.a(a[5]), .b(b[5]), .c(carry[5]), .s(s[5]), .cout(), .g(g[5]), .p([5]));
            fulladder f6(.a(a[6]), .b(b[6]), .c(carry[6]), .s(s[6]), .cout(), .g(g[6]), .p([6]));
            fulladder f7(.a(a[7]), .b(b[7]), .c(carry[7]), .s(s[7]), .cout(), .g(g[7]), .p([7]));
            fulladder f8(.a(a[8]), .b(b[8]), .c(carry[8]), .s(s[8]), .cout(), .g(g[8]), .p([8]) );
            fulladder f9(.a(a[9]), .b(b[9]), .c(carry[9]), .s(s[9]), .cout(), .g(g[9]), .p([9]) );
                .  
                .   //goes all the way to 16 bit
                .
            fulladder f15(.a(a[15]),.b(b[15]),.c(carry[15]),.s(s[15]),.cout(),.g(g[15),.p([15]));

            endmodule

            //the carry look ahead adder with inputs and outputs
            module carry_lookahead(.p, .g, .c, .cout);
              input .p(p); //input  [15:0] 
              input .g(g); //input  [15:0]
              output .c(carry); //output [15:1]
              output .cout (cout);  //output

            endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:09:40.147

您包含的 fulladder 没有您在实例化中连接的传播`p`和生成`g`输出。我将使用这些输出创建一个名为propagate_adder 的新模块，并删除生成`cout`.

该模块`sixteen_bit_carry_lookahead`缺少 的实例化`carry_lookahead`，这是进位路径所必需的。

在 fulladder 的声明中，`reg [0:0]`这与编写`reg`.

# identity - .NET 4.5 中的 microsoft.identityModel 和 system.identityModel 有什么区别

> ID：13575766
> 
> 赞同：12
> 
> 时间：2012-11-27T00:51:44.507
> 
> 标签：identity, wif

我可能不是第一个问但我们现在应该使用哪个？据我了解，它从 WCF 的一个非常小的**System** .IdentityModel 开始。然后是**Microsoft** .IdentityModel 类，它增加了很多。这是[http://social.technet.microsoft.com/wiki/contents/articles/1898.aspx#v3q10中的情况](http://social.technet.microsoft.com/wiki/contents/articles/1898.aspx#v3q10)

但是现在在 4.5 中，我看到**System** .IdentityModel 几乎包含**Microsoft** .IdentityModel 的所有类（尽管似乎进行了一些重构并且 web.config 中的配置略有不同）。
现在微软预发布了一个 JSON Web Token Handler 作为 nuget，它依赖于**Microsoft** .IdentityModel AND **System** .IdentityModel。（JWTSecurityTokenHandler 驻留在 Microsoft.IdentityModel.Tokens.JWT 中，派生自 System.IdentityModel.Tokens.SecurityTokenHandler）。

这变得相当混乱。有人知道我应该使用哪一个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T04:48:14.537

WIF 1.0 版本，即您从 Microsoft 下载“Windows Identity Foundation”时获得的版本，面向 .NET 3.5（并且与 .NET 4.0 兼容）。由于它是一个带外版本，所有类型都必须存在于非核心命名空间（**Microsoft** .IdentityModel 等）和非核心程序集中。

当前的 WIF 4.5 版本（如果我理解正确，它们会在版本编号中跳转）已直接集成到核心 .NET 4.5 框架中。最极端的例子，IClaimsPrincipal 接口已被 ClaimsPrincipal 基类取代，所有 .NET IPrincipal 实现现在都从该基类派生 - 这直接在*mscorlib.dll*中。因此，**System** .IdentityModel 等命名空间。

当然，预发布的 JWT 处理程序 (nuget) 是一个带外版本。如果它进入核心 .NET vNext（假设 JWT 标准到那时最终确定），我一点也不感到惊讶，但在此之前，框架命名指南要求 JWTSecurityTokenHandler 等驻留在**Microsoft** .IdentityModel 中。

我能理解你的困惑；我可以从头开始我的项目，只需要担心 .NET 4.5，这让我受益匪浅——现在。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T07:03:09.530

**在WIF 3.5中的****Microsoft.IdentityModel**命名空间下收集的 WIF 类现在分布在以下命名空间中：**System.Security.Claims、System.ServiceModel.Security 和****WIF 4.5**中的 System.IdentityModel 命名空间。此外，一些 WIF 3.5 命名空间在 WIF 4.5 中被整合或完全删除。

 ******参考：[https ://docs.microsoft.com/en-us/dotnet/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5](https://docs.microsoft.com/en-us/dotnet/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5)******

# c++ - Windows Media Foundation - 使用模拟相机/采集卡

> ID：13575769
> 
> 赞同：2
> 
> 时间：2012-11-27T00:52:13.827
> 
> 标签：c++, windows, qt

我想知道 WMF 是否支持模拟摄像机？我目前使用的是 Osprey 440 采集卡，它没有附带 UVC 1.1 驱动程序。

无论如何都可以使用带有windows media基础的采集卡进行视频采集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:49:58.667

简短的回答是不，不是开箱即用的atm。

# php - 为什么我上传的图片的文件名没有插入到我的数据库中？

> ID：13575771
> 
> 赞同：0
> 
> 时间：2012-11-27T00:52:23.983
> 
> 标签：php, codeigniter

我已经对这个问题提出了一些问题，但我最终并没有真​​正取得太大进展。我正在尝试将图像上传到页面上，并让文件名出现在用户名旁边的数据库中，但它一直显示为零。为什么会这样？图像字段是一个 varchar，因此它将保存文件名。但既然我希望我的 getProfileImage 函数将图像显示回屏幕，它应该是一个 blob 吗？

这是我的控制器：

```
 function __construct()
  {
   // Call the parent construct
   parent::__construct();

   $this->load->model("profiles");
   $this->load->model("profileimages");
   $this->load->helper(array('form', 'url'));      

 } 

   function upload()
      {
    $config = array(

        'allowed_types' =>'gif|jpg|jpeg|png',
        'upload_path' =>'./web-project-jb/assets/puploads/',
         'max_size' => 10000,
         'max_width' => 1024,
        'max_height' => 768

);

$this->load->library('upload', $config);
$img = $this->session->userdata('img');
$username = $this->session->userdata('username');
//fail show upload form
if (! $this->upload->do_upload())
{

    $error = array('error'=>$this->upload->display_errors());

    $username = $this->session->userdata('username');

    $viewData['username'] = $username;
    $viewData['profileText'] = $this->profiles->getProfileText($username);

    $this->load->view('shared/header');
    $this->load->view('homeprofile/homeprofiletitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('homeprofile/homeprofileview', $error, $viewData, array('error' => ' ' ));
    $this->load->view('shared/footer');

    //redirect('homeprofile/index');

}

else
{
    //successful upload so save to database, which it doesn't

    $file_data = $this->upload->data();

    $data['img'] = '/web-project-jb/assets/puploads/'.$file_data['file_name'];
    // you may want to delete the image from the server after saving it to db
    // check to make sure $data['full_path'] is a valid path
    // get upload_sucess.php from link above
    //$image = chunk_split( base64_encode( file_get_contents( $data['file_name'] ) ) );

    $this->username = $this->session->userdata('username');

    $this->profileimages->putProfileImage($username, $img);

    $data['profileimages'] = $this->profileimages->getProfileImage($username, $img);

    $viewData['username'] = $username;
    $viewData['profileText'] = $this->profiles->getProfileText($username);

    $username = $this->session->userdata('username');

    $this->load->view('shared/header');
    $this->load->view('homeprofile/homeprofiletitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('homeprofile/homeprofileview', $data, $viewData);
    $this->load->view('shared/footer');

    //redirect('homeprofile/index');
}

  }

    function index()
     {

$username = $this->session->userdata('username');

$img = $this->session->userdata('img');

$data['profileimages'] = $this->profileimages->getProfileImage($username, $img);

$viewData['username'] = $username;
$viewData['profileText'] = $this->profiles->getProfileText($username);

$this->load->view('shared/header');
$this->load->view('homeprofile/homeprofiletitle', $viewData);
$this->load->view('shared/nav');
//$this->load->view('homeprofile/upload_form', $data);
$this->load->view('homeprofile/homeprofileview', $data, $viewData, array('error' => ' ' ) );
$this->load->view('shared/footer');
 }

} 
```

我的模型：

```
var $proimage_path;

function ProfileImages()
{
    parent::__construct();

    $this->proimage_path = 'web-project-jb/assets/puploads';

}

function exists($username)
{
    $this->db->select('*')->from("profileimages")->where('user', $username);
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {

        return true;
        /*
         echo "user $user exists!";
        $row = $query->row();
        echo " and his profileimage is $row->profileimage";
        */
    }

    else

    {

        return false;
        //echo "no such user as $user!";
    }

}

function putProfileImage($username, $img)
{

    $record = array('user' => $username, 'profileimage' => $img);
    if ($this->exists($username))
    {
        $this->db->where('user', $username)->update('profileimages', $record);

    }
    else
    {
        $this->db->where('user', $username)->insert('profileimages', $record);

    }

}

function getProfileImage($img)
{

$this->db->select('*')->from('profileimages')->where('profileimage', $img);

$query = $this->db->get();
if ($query->num_rows() > 0){
    $row = $query->row();
    return $row->profileimage;
  }

  return $img;

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:15:58.750

你能告诉我为什么你从会话中读取文件名而不是使用上传的图像文件名吗？假设用户没有图像并且您在用户登录时设置了会话，那不是空吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:21:48.890

在你的控制器中

```
function upload() {
    if ($this->input->post('submit')) {
        $config['upload_path'] = './uploads/album/';
        $config['allowed_types'] = 'jpeg|jpg|png|gif|';
        $config['max_size'] = '500000';
        $this->load->library('upload', $config);
        if ($this->upload->do_upload()) {
            $file = $this->upload->data();
            $keterangan = $this->input->post('keterangan');
            $this->MGallery->addGallery($file['file_name'], $keterangan);
            $this->session->set_flashdata('message', 'Foto <b>' . $file['file_name'] . '</b> berhasil di upload!');
            redirect('admin/album/index', 'refresh');
        } else {
            $this->session->set_flashdata('message', 'Foto <b>' . $file['file_name'] . '</b> gagal di upload!');
            redirect('admin/album/lihat', 'refresh');
        }
    } else {
        redirect('admin/album/lihat', 'refresh');
    }
} 
```

在你的模型中

```
function addGallery($file_name, $keterangan) {
    $now = date("Y-m-d H:i:s");
    $data = array(
        'foto' => $file_name,
        'keterangan' => $keterangan,
        'IDKategori' => $this->input->post('kategori'),
        'tgl' => $now
    );
    $this->db->insert('album', $data);
} 
```

然后，在你看来，像这样

```
<?php
if ($this->session->flashdata('message')) {
    echo "<div class='message'>" . $this->session->flashdata('message') . "</div>";
} ?>
<form action="<?= base_url(); ?>admin/album/upload" method="post" enctype="multipart/form-data" name="form1" id="form1">
    <p>
        <input type="file" name="userfile" size="20" />
    </p>
    <p>
        <select name="kategori">
        <?php
        foreach ($gallery_cat as $key => $list) {
        ?>
            <option value="<?= $list['IDKategori'] ?>">
            <?= $list['kategori'] ?>
        </option>
        <?php
        }
        ?>
    </select>
</p>
<p>
    <textarea name="keterangan" cols="40" rows="5"></textarea>
</p>
<p>
    <label>
        <input type="submit" name="submit" value="Uplaod Foto" />
    </label>
    <input type="button" value="Kembali" onClick="javascript: history.go(-1)" />
</p> 
```

# kineticjs - KineticJS 数据到 URl 进入标签而不是新窗口

> ID：13575775
> 
> 赞同：1
> 
> 时间：2012-11-27T00:52:46.487
> 
> 标签：kineticjs, data-url

我正在制作一个类似于[KineticJS 拖放示例](http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/)的游戏。我将它与[保存图像功能](http://www.html5canvastutorials.com/kineticjs/html5-canvas-stage-data-url-with-kineticjs/)结合起来，这样用户就可以保留他们所做的最终结果。

有谁知道我如何控制画布结果图像的位置？我想包括让用户分享/发布他们的图片到 Facebook、通过电子邮件发送或保存的选项。

我认为这要么是对

```
function() {
         stage.toDataURL({callback: function(dataUrl) { window.open(dataUrl);} });  }, false);
      } 
```

或者之后的一些额外代码？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:28:17.737

你是对的。您可以保存您的 dataURL，您只需将其作为图像进行操作。

```
var myDataUrl;  //place outside of scope of function for saving
stage.toDataURL({
    callback: function(dataUrl){
      // do something with the data url
      // like window.open(dataUrl); 
      // you can do anything do anything really, like
      myDataUrl = dataUrl;

      var img= new Image(); //or document.createElement('img');
      img.src= myDataUrl; 

      //(new Image()).src = "myDataUrl"; //or the shortcut way

      document.getElementById('container').appendChild(img);
    },
    mimeType: 'image/jpeg',
    quality: 0.5
}); 
```

# java - 如何调用带参数的私有方法

> ID：13575777
> 
> 赞同：1
> 
> 时间：2012-11-27T00:53:00.233
> 
> 标签：java, methods, private-methods

我很难获得一个带有参数的私有方法，以便在我的 toString 方法中使用，但不知道如何让这两种方法合作。

主类：

```
import static java.lang.System.*;

public class Triples
{
 private int number;

public Triples()
{
    //this(0);
}

public Triples(int num)
{
    number = num;
}

public void setNum(int num)
{
    number = num;
}

private int greatestCommonFactor(int a, int b, int c)
{
    int max = number;

    for(int n = 1; n <= max; n++)
    {

    for(a = n; a <= max; a++)
    {
        a = n;
        for(b = a +1; b <= max; b++)
        {
            b =n;
            for(c = b + 1; c <= max; c++)
            {
                c = n;
                if(Math.pow(a, 2)+ Math.pow(b, 2)== Math.pow(c, 2))
                {
                    if((a%2==1 && b%2==0)|| (a%2==0 && b%2==1))
                    {
                        if(a%2<=1 && b%2<=1 && c%2<=1)
                        {

                            String last = a + "" + b + c;
                        }
                    }
                }

            }

        }

    }
    }

    return 1;
}

public String toString()
{
    String output="";
    output = output + this.greatestCommonFactor( ) + " \n";

    return output;
}
} 
```

并交叉引用我的跑步者课程：

```
import static java.lang.System.*;

import java.util.Scanner;

public class Lab11j
{
 public static void main(String args[])
  {
       Scanner keyboard = new Scanner(System.in);
        String choice="";
            do{
                out.print("Enter the max number to use : ");
                int big = keyboard.nextInt();

                    //instantiate a TriangleThree object
             Triples triple = new Triples(big);
                //call the toString method to print the triangle
                out.println( triple );

                System.out.print("Do you want to enter more data? ");
                choice=keyboard.next();
            }while(choice.equals("Y")||choice.equals("y"));
    }
} 
```

[如果你发现你需要澄清这个实验室，这里是实验室表的谷歌文档： https](https://docs.google.com/open?id=0B_ifaCiEZgtcX08tbW1jNThZZmM) ://docs.google.com/open?id= 0B_ifaCiEZgtcX08tbW1jNThZZmM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:00:03.420

变量`a`, `b`&`c`在这里可以用作局部变量。这将允许您从以下参数列表中删除它们`greatestCommonFactor`：

```
private int greatestCommonFactor() {

   int a = 0;
   int b = 0;
   int c = 0; 
   ... 
```

因为它们仅在方法范围内需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:53:53.413

嗯，是的。你没有传递任何东西给`greatestCommonFactor`. `toString()`当您没有向方法传递足够的参数时，我不确定您期望在方法中发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T00:57:41.870

你需要像这样传递它们

```
output = output + this.greatestCommonFactor(1,2,3) + " \n"; 
```

问题是，除非您将参数传递给 toString，否则，此代码似乎非常有限。或者，您需要在类上设置一些字段，其中包含将传递给您的函数的内容。

# java - httpServer 执行 PHP 脚本

> ID：13575788
> 
> 赞同：1
> 
> 时间：2012-11-27T00:53:45.550
> 
> 标签：java, php, httpserver, java-server

我正在编写一个 java http 服务器，并且我已经完成了 FileServer 类来处理对 index.hitml 等普通文件的请求（Get、Head、Post 等）
我还想让我的服务器能够执行 PHP 脚本并将输出返回给客户端。“http://localhost/phpinfo.php”

我怎样才能做到这一点？我需要一些资源。请指出我要阅读的任何资源或api:)
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:09:10.703

完成的最简单方法是从 java 调用 PHP 解释器（通过`Runtime.getRuntime().exec()`。您可以使用获取 PHP 解释器生成的输出并将其发送到浏览器。但是，当这样调用时，PHP 运行在所谓的“命令行界面”模式，其行为与标准 CGI 模式不同（尤其是在读取脚本参数、http 请求等时）

更好的方法可能是使用 fastCGI。查看此页面，了解如何将 PHP 生成为快速 cgi 进程：[http](http://wiki.nginx.org/PHPFcgiExample) ://wiki.nginx.org/PHPFcgiExample (linux)

在您的服务器中，您需要实现快速 cgi 协议，可以在这里找到：http: [//www.fastcgi.com/devkit/doc/fcgi-spec.html](http://www.fastcgi.com/devkit/doc/fcgi-spec.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:01:33.973

最不痛苦的编写方式也是最痛苦的运行方式：CGI。这仅涉及设置一些环境变量和运行 PHP 解释器。

更好的方法是实现一个 FCGI 客户端，它（启动并）连接到 PHP 的许多现有 FCGI 包装器之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T03:53:42.047

在 php 版本 5.4 之后，php(cli) 具有内置的 web-server 命令`-S`

```
--server addr:port
-S addr:port   # Start embedded Webserver on the given local address and port 
```

示例：侦听所有传入流量的 8080 端口

`php -S 0.0.0.0:8080 <target_file|dictionary>`

# iis - 在 ASP 1.1 会话 ID cookie 上设置 HttpOnly=true

> ID：13575794
> 
> 赞同：2
> 
> 时间：2012-11-27T00:54:14.813
> 
> 标签：iis, cookies, asp-classic, iis-6, session-cookies

我有一个客户在 IIS 6.0 下运行他的经典 ASP 站点。该网站在 ASP.NET 配置选项卡中面向 ASP.NET 2.0。最近对他的网站进行的一次 PCI 扫描使他失败，因为他的 ASPSESSIONID cookie 上有一个 HttpOnly 漏洞。

我已经安装了一个 ISAPI .dll，它成功地在所有手动创建的 cookie 上设置了 HttpOnly，但由于某种原因，ASPSESSIONID cookie 不受此影响。

我已经使用以下配置设置了 web.config：

```
<system.web>
    <httpCookies httpOnlyCookies="true" />
</system.web> 
```

这种配置似乎对任何东西都没有任何影响。我怀疑，即使该网站是针对 ASP.NET 2.0 的，它毕竟是一个经典的 ASP 应用程序，并且根本不支持 HttpOnly。

客户的网站使用 a`global.asa`而不是`global.asax`. 这排除了使用 Application_EndRequest 添加 HttpOnly。

我可以使用 Firefox/Firebug 加载客户端的站点并查看 cookie。那些手动创建的设置了 HttpOnly，但 ASPSESSIONID cookie 不是 HttpOnly。

有谁知道在这种设置方案下如何使 ASPSESSIONID cookie 成为 HttpOnly ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:08:46.607

经典 ASP 代码无法修改 ASP 会话 Cookie，因此对于 IIS 6，您需要让 ISAPI 模块重写 cookie。

[为经典 Asp 会话 Cookie 设置 HTTPONLY](https://stackoverflow.com/questions/2990686/setting-httponly-for-classic-asp-session-cookie)

[http://msdn.microsoft.com/en-us/library/ms972826](http://msdn.microsoft.com/en-us/library/ms972826)

客户端 JavaScript 解决方法

[http://ko-lwin.blogspot.com/2010/12/how-to-secure-classic-asp-session-id.html](http://ko-lwin.blogspot.com/2010/12/how-to-secure-classic-asp-session-id.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T00:55:59.493

Request.ServerVariables("HTTP_COOKIE") 将获取当前 cookie 值，然后您可以使用更新的 cookie 进行响应，添加 HttpOnly 但唯一的问题是如果您尝试通过安全扫描，它们通常不会采用更新的值对于 cookie，只有初始值。

# java - 以编程方式将类添加到现有 JAR 文件

> ID：13575795
> 
> 赞同：0
> 
> 时间：2012-11-27T00:54:15.640
> 
> 标签：java, file, jar

我将 .jar 文件的路径作为我的 java 应用程序的用户输入。我需要将我的类路径上的一个类添加到该 .jar 文件，然后将 .jar 文件发送到外部服务（通过网络）。另一个站点上的服务必须能够从 .jar 文件中加载类，包括我在应用程序中添加的类。

解决方案应具有以下属性：

*   通用：应该适用于任何包含用户可以给我的类的可想到的 .jar。
*   自动：类添加必须由我的 java 应用程序完成。

要添加到 .jar 文件的类的名称不会与该 JAR 中的任何其他类发生冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:00:21.987

由于 jar 是常规的 zip 文件，因此您可以使用`java.util.zip`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:04:38.310

要补充其他人所说的，如果您需要在另一端加载 JAR，您应该检查[http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:06:20.327

我知道您的类路径上有一个类，您想要做的是获取它的字节数组表示，以便将其注入现有的 JAR 文件。

整洁的。

看看这个`javax.tools`包，JDK 1.6 及更高版本可用：

[http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)

您可以使用那里可用的机制以编程方式编译代码和序列化字节码。如果没有，ASM 也会有所帮助：[http ://asm.ow2.org/](http://asm.ow2.org/)

# copy - 如何复制hbase数据

> ID：13575796
> 
> 赞同：2
> 
> 时间：2012-11-27T00:54:15.927
> 
> 标签：copy, hbase

我需要将数据从一个集群复制到另一个集群。我做了一些研究，发现我可以做 copyTable，它基本上可以扫描并将数据从一个到另一个。

我也知道我可以为 Hhase 复制整个 HDFS 卷。我想知道这是否有效，并且性能是否比 copyTable 更好？（我相信它应该表现得更好，因为它在没有逻辑操作的情况下复制文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:04:18.587

看看[HBase 复制](http://hbase.apache.org/replication.html)，你可以在[这里找到一个简短的方法](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/replication/package-summary.html#requirements)

# imagemagick - 如何使用 imagemagick 去除低对比度图像的背景

> ID：13575800
> 
> 赞同：0
> 
> 时间：2012-11-27T00:54:26.373
> 
> 标签：imagemagick, imagemagick-convert

我是 Imagemagick 的新手，正在尝试制定一个脚本，可以用来删除许多图像的背景。

问题是某些图像（参见下面的示例）涉及主色非常接近背景的对象。

有人可以帮我指出正确的方法和/或提供我可以玩的真实例子吗？

非常感谢！

!(http://dev.gmce.com.br/foto2-small.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:13:45.830

```
convert test.jpeg  -white-threshold 90%  -transparent white output.png 
```

只玩阈值百分比

# dojo - dojo tabContainer 标题（标签）

> ID：13575803
> 
> 赞同：1
> 
> 时间：2012-11-27T00:54:41.817
> 
> 标签：dojo, title, tabcontainer

我有一个带有倾斜（标签）的tabContainer，我需要实现的是当单击一个选项卡时，我希望将颜色更改为红色或任何处于活动状态的含义，而剩余的非活动选项卡可能保持黑色作为默认颜色。我试过在网上搜索，我看到的唯一解决方案是带有 class .tabLabel{color: Red;} 的 css，它将所有选项卡标题更改为红色，还尝试了 onShow 事件，它可以响应警报事件但不能响应样式表。此外，如果您在 tabcontainer 中有 id 并使用 dojo javascript 应用 css，它会更改选项卡中的内容而不是标题。这是我从 dojo 获得的示例代码，以显示我想要实现的目标。

```
 <!DOCTYPE html>
<html >
<head>

    <link rel="stylesheet" href="../../_static/js/dojo/../dijit/themes/claro/claro.css">

<script>dojoConfig = {parseOnLoad: true}</script><script src='../../_static/js/dojo/dojo.js'></script><script>require(["dojo/parser", "dijit/layout/TabContainer", "dijit/layout/ContentPane"]);</script>
</head>
<body class="claro">
    <div style="width: 350px; height: 300px">
    <div data-dojo-type="dijit/layout/TabContainer" style="width: 100%; height: 100%;">
        <div data-dojo-type="dijit/layout/ContentPane" title="My first tab" data-dojo-props="selected:true">
            Lorem ipsum and all around...
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="My second tab">
            Lorem ipsum and all around - second...
        </div>
        <div data-dojo-type="dijit/layout/ContentPane" title="My last tab" data-dojo-props="closable:true">
            Lorem ipsum and all around - last...
        </div>
    </div>
</div>
</body>
</html> 
```

从上面的代码中，我想使用不同颜色的文本和其他选项卡以默认颜色激活 title="My first tab"，当单击我的第二​​个选项卡时使其激活并执行与第一种菜单相同的操作网站上的链接。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:15:14.480

您可以通过添加此类来更改活动选项卡的文本颜色。

```
.dijitChecked.dijitTab .tabLabel {
    color:red;
} 
```

[这是一个例子。](http://jsfiddle.net/oamiamgod/SepCb/4/)

# cocos2d-iphone - 如何在 cocos2d 游戏中添加短暂的暂停（思考时间）

> ID：13575804
> 
> 赞同：0
> 
> 时间：2012-11-27T00:54:47.023
> 
> 标签：cocos2d-iphone, sleep

我正在开发一款类似于跳棋的两人 iOS 游戏。我正在使用 cocos2d 来创建这个游戏。

我希望玩家移动渲染和计算机移动渲染之间的思考时间为 0.5 秒，以模拟思考时间。

游戏的流程是使用 NSNotification 事件控制的，看起来像这样......

玩家（计算机或人类）提交移动 -> 棋盘添加新精灵 -> 游戏控制器更新当前玩家并要求他们提交移动。

我尝试在板子更新结束或游戏更新开始时添加 usleep(500000)。最终发生的是在棋盘更新中添加的精灵，对于人类玩家来说，直到计算机玩家提交他的动作之后才会出现。所以游戏等待 500 毫秒，然后更新两个动作。

有没有办法强制 CCLayer 在睡眠之前更新它的子精灵，或者有没有更好的方法来添加这个思考时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:59:40.627

如果您计划在控制器中接收更新，您可以在 update:(ccTime)dt 函数中延迟时间。

在你的 .h

```
float _slipTime; 
```

在你的 .m

```
// with other declaratives

static float THINK_TIME=.5f;

// last line before the stall

_slipTime=0.f; 
[self schedule:@selector(pauseForThink:)];

-(void) pauseForThink:(ccTime) dt {
    _slipTime+=dt;
    if(_slipTime>THINK_TIME) {
        [self unschedule:@selector(pauseForThink:)];
        // trigger here whatever you wanted to accomplish after
        // the think pause.
    }
 } 
```

好的，这很简单，但会阻止主循环被阻塞（这就是你的睡眠会发生的事情）。以 60 FPS 运行时，pauseForThink 方法会被调用大约 30 次，cocos 在暂停期间会有 30 个绘制周期。

# asp.net-mvc - ASP MVC 4 Web Api 包装了我的 json 结果

> ID：13575806
> 
> 赞同：3
> 
> 时间：2012-11-27T00:55:06.253
> 
> 标签：asp.net-mvc, asp.net-web-api

我的 WebApi 操作返回一个从 JObject.parse(jsonString); 构建的动态对象；

我有 GlobalConfiguration.Configuration.Formatters.XmlFormatter.SupportedMediaTypes.Clear();

但是该对象被包装在响应中的默认结果消息中。

根据这篇[文章](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#json_anon)返回匿名对象很好，应该给出预期的结果

我正在使用异步控制器，因为我必须在这里等待一些 ReadAsStringAsync() 我的操作原型：

```
public async Task<dynamic> Pics(string flavor, int pagesize) 
```

预期结果 ：

```
{"flavor":"","maxFeedSize":0,"mediaContent":[]} 
```

返回动态对象时我得到的结果：

```
{
        "Result": {
            "flavor": "",
            "maxFeedSize": 0,
            "mediaContent": []
        },
        "Id": 1,
        "Exception": null,
        "Status": 5,
        "IsCanceled": false,
        "IsCompleted": true,
        "CreationOptions": 0,
        "AsyncState": null,
        "IsFaulted": false
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:19:46.353

正如我所想和评论中提到的那样。`Task<Task<dynamic>>`由于天真的方法重载，我返回了一个。

```
 public async Task<dynamic> Pics(string flavor, string pagesize)
    {
        return Pics(flavor, pagesize, null);
    } 
```

编辑：我尝试了这个，因为与 MVC 路由不同，即使字符串可以为空，字符串参数也会引发错误

```
 public async Task<dynamic> Pics(string flavor, string pagesize, string startid =null) 
```

工作正常 ：）

# php - PHP 访问 CollectionArray 数据

> ID：13575814
> 
> 赞同：0
> 
> 时间：2012-11-27T00:56:03.397
> 
> 标签：php, apache-flex, flash-builder

如何访问此数组数据（即 id、name 等）：

```
stdClass Object
(
    [_externalizedData] => Array
        (
            [0] => stdClass Object
                (
                   [id] => 5
                   [tipo_usuario] => 0
                   [username] => maria@maria.com.br
                   [nome] => maria
                )
        )
[_explicitType] => flex.messaging.io.ArrayCollection
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:57:54.713

看起来会是，如果`$object`等于

```
$object->_externalizedData[0]->id 
```

如在

```
echo $object->_externalizedData[0]->id; // 5    
echo $object->_externalizedData[0]->username; // maria@maria.com.br 
```

好的，给出更多信息，那个对象= `$Object_param`并且OP想要修复一个循环

```
foreach ($Object_param->_externalizedData as $Obj)
{ 
    // line breaks just for readability 
    $query="INSERT INTO grupo_usuario 
        (id_grupo,id_usuario) 
        VALUES 
        (1, '" . mysql_real_escape_string($Obj->id) . "')";
    $result = mysql_query($query,$mysql); 
    error_log( print_r( $query, true )); 
} 
```

但是您要将每一行的 id_grupo 设置为 1。希望您知道如何对 SQL 进行排序，现在您了解如何获取一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:59:16.723

您可以像这样访问它：

```
$outer_class->_externalizedData[0]->nome 
```

# django - Django空白选择字段

> ID：13575816
> 
> 赞同：0
> 
> 时间：2012-11-27T00:56:10.460
> 
> 标签：django, django-forms

我有一个 django 表单，它是一个名为的选择字段`piece`，将填充为 ModelChoiceField：

```
class ProjectInfoForm(forms.Form):
    module = forms.ModelChoiceField(
        queryset=Module.objects.all(),
    )
    piece = forms.ModelChoiceField(
        queryset=Piece.objects.all(),
    ) 
```

我最初有这个如上所述，该字段`piece`最初加载了所有对象。但是，这是不必要的，因为该`piece`字段是通过 ajax 填充的，具体取决于用户选择的内容`module`。

我的问题是，将此`piece`字段初始化为空白选择字段的最佳方法是什么，可能带有一个空标签，沿着“--------”的行？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:04:59.443

对于该`-------`选项，只需将其设置为可选字段，`required=False`并以无选项开头，请使用空查询集`Piece.objects.none()`：

```
class ProjectInfoForm(forms.Form):
    module = forms.ModelChoiceField(
        queryset=Module.objects.all(),
    )
    piece = forms.ModelChoiceField(
        queryset=Piece.objects.none(),
        required=False,
    ) 
```

# javascript - iScroll，如何调用我的滚动条？

> ID：13575818
> 
> 赞同：1
> 
> 时间：2012-11-27T00:56:18.863
> 
> 标签：javascript, iscroll

iScroll 文档显示了一个典型的 iScroll 设置，如下所示。

```
var myScroll;
function loaded() {
    setTimeout(function () {
        myScroll = new iScroll('wrapper');
    }, 100);
}
window.addEventListener('load', loaded, false); 
```

我的问题是如何调用滚动条？如果我使用：

```
var currentItem = 5;
myScroll.scrollToElement('.nav > li:nth-child('+currentItem+')', 300); 
```

我得到一个错误。

```
Uncaught TypeError: Cannot call method 'scrollToElement' of undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:03:56.887

我想您需要使用分配给 iScroll 的变量名称：

```
myScroll.scrollToElement ... 
```

并不是

```
scroller.scrollTo ... 
```

**更新：**

根据你后面的测试，这显然是一个时间错误。您可能`myScroll.scrollToElement`在执行超时功能之前调用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:27:32.330

看起来您在第一个参数中添加了额外的引号。

删除引号，并尝试将您的代码更改为以下

```
myScroll.scrollToElement('.nav > li:nth-child(5)', 300); 
```

如果您希望使查询动态化，请将数字替换为变量并添加加号以连接字符串。

```
var incNumber = 5;
myScroll.scrollToElement('.nav > li:nth-child('+ incNumber +')', 300); 
```

似乎您的 iScroll 是在超时延迟的情况下创建的。在实例化库之前是否调用了您的函数？

# c - 资源受限环境的近似指数积分

> ID：13575819
> 
> 赞同：1
> 
> 时间：2012-11-27T00:56:22.607
> 
> 标签：c, matlab, math

在资源高度受限的设备中，计算或近似指数积分函数的最佳方法是什么？如果可能，我想先在 C 或 Matlab 中尝试近似函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:15:55.680

这里有一个计算指数积分函数的 C 函数[http://www.mymathlib.com/functions/exponential_integrals.html](http://www.mymathlib.com/functions/exponential_integrals.html)。

我不确定它是否满足您的资源限制，但源代码除了 math.h 和 float.h 之外没有其他依赖项，您希望它们可以在您的设备上使用。

# c++ - 如何获取对具有 shared_ptr 的对象的引用？

> ID：13575821
> 
> 赞同：11
> 
> 时间：2012-11-27T00:56:27.507
> 
> 标签：c++, shared-ptr

如何获得对拥有`shared_ptr<T>`它的对象的引用？（对于一个简单的类`T`）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T00:58:42.377

[`operator*`](http://en.cppreference.com/w/cpp/memory/shared_ptr/operator%2a)已经返回一个参考：

```
T& ref = *ptr; 
```

或者，我想我可以举一个更有意义的例子：

```
void doSomething(std::vector<int>& v)
{
    v.push_back(3);
}

auto p = std::make_shared<std::vector<int>>();

//This:
doSomething(*p);

//Is just as valid as this:
vector<int> v;
doSomething(v); 
```

（请注意，使用引用已释放对象的引用当然是无效的。保留对对象的引用与保留 shared_ptr 实例的效果不同。如果 shared_ptr 实例的计数降至 0，则该对象无论有多少引用引用它，都将被释放。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T00:42:29.427

> 有没有共享参考的概念？

实际上是的！`shared_ptr`提供了一个“[别名构造函数](https://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr)”，可以完全用于此目的。它返回一个`shared_ptr`使用与输入相同的引用计数`shared_ptr`但指向不同的引用，通常是从支持数据派生的字段或值。

> `ptr`只要这个 shared_ptr 存在，程序员就有责任确保它保持有效，例如在典型的用例中，`ptr`它是由管理的对象的成员`r`或别名（例如，向下转换）`r.get()`

[shared_ptr 的别名构造函数是干什么用的？](https://stackoverflow.com/q/27109379/113632)更详细地介绍了这一点，包括如何使用它的示例。

# r - 使用 bash 脚本 (Ubuntu) Rscript、pdflatx 和 API 的最佳方式

> ID：13575827
> 
> 赞同：1
> 
> 时间：2012-11-27T00:57:09.550
> 
> 标签：r, api, bash, pdflatex, rscript

我目前正在编写一些代码

1.  通过 API 连接到服务器并获取一堆数据，
2.  按案例 ID 组织该数据，
3.  生成个案报告，
4.  每个案例创建一个 pdf（案例概述）文件，最后
5.  将这些文件推送回服务器。

我对 R 很熟悉，对 pdflatex 也有些熟悉。我刚刚发现了 bash 脚本——因为我已经开始在 Ubuntu 环境中工作——我现在开始意识到哪些程序最适合这项工作并不简单。

我目前的计划是在 R 中使用 RCrul 获取数据，在 R 中组织数据并生成一堆 .tex 文件。以后我打算使用 pdflatex 创建 pdf 文件，最后再次使用 R 将新创建的 pdf 文件推送回服务器。我已经开始写一个小的 bash 脚本，

```
for f in *Rnw
do
# do something on ${f%%.*}
Rscript -e “source("fetch.data.and.generate.Rnw.R")”             # 1 through 3 
Rscript -e "library(knitr); knit('${f%%.*}.Rnw')"                # 4
pdflatex "${f%%.*}.tex"                                          # 4 continued
rm "${f%%.*}.tex" "${f%%.*}.aux" "${f%%.*}.log" "${f%%.*}.out"   # cleanup after 4
Rscript -e “source("push.pdf.R")”                                # 5
done 
```

我希望有人能告诉我什么软件最适合工作的各个部分，什么软件能给我最好的表现。

数据不是那么广泛，我将处理大约 500 到 2000 个案例和大约 20 到 30 个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:00:44.013

@flodel 和 @shellter 提出了很好的观点。我只会补充一点，如果您决定在解决方案中继续使用 bash，您可能会发现计算一次文件名变量然后在其他地方使用它更容易：

```
for f in *Rnw; do
    stem="${f%%.*}"
    Rscript commands with $stem
    pdflatex command involving $stem
    Rscript commands for pushing $stem.pdf
    rm $stem.*
end 
```

# c# - 更新已序列化的对象

> ID：13575840
> 
> 赞同：3
> 
> 时间：2012-11-27T00:58:56.137
> 
> 标签：c#, protobuf-net

假设我有一堂课`MyClass`：

```
[ProtoContract]
public class MyClass
{
    [ProtoMember(1)]
    public string PropA { get; set; }
    [ProtoMember(2)]
    public string PropB { get; set; }
    // ...
    [ProtoMember(12)]
    public string PropL { get; set; }
} 
```

我也有一个`List<MyClass>`protobuf-net 二进制文件被反序列化到其中。如何即时更新`MyClass`序列化文件中包含的实例（可能包含数百或数千个序列化`MyClass`对象）？我查看了 Marc 对其他问题的一些评论，似乎我需要使用`Deserialize`并传入`MyClass`实例，但我看到的唯一方法签名是

```
public static T Deserialize<T>(System.IO.Stream source) 
```

也许我需要使用合并？我不确定我应该如何使用它。

```
public static T MergeWithLengthPrefix<T>(System.IO.Stream source, T instance, ProtoBuf.PrefixStyle style) 
```

我正在使用 protobuf-net v2.0.0.480。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:30:41.440

*听起来*您想更新对象的**文件**版本 - 对吗？如果是这样，不重写文件是不可能的 - 这就像问“我如何更新 xml 文件中间的元素” - 很容易做到，但你需要重写整个文件。好吧，*从技术上讲*，您可以在要更改的位*之后*重新编写内容，但坦率地说，最简单的选择可能是：读取然后重新写入。

如果这是您需要*定期*执行的操作，并且您需要快速追加，我可能会建议（在您的应用程序级别）一种策略，允许您通过简单地在末尾追加新版本来**替换**对象 - 即如果您看到重复id，假设它**替换**了较早的事件 - 但是，这意味着您的读取需要通读所有内容，因此偶尔重新设置可能是一个想法。

但是，除非您需要花哨的东西，否则最简单的答案是：

*   将内容反序列化为列表（或类似列表）
*   做出你需要的改变
*   连载

# r - rstudio 代码折叠，如 matlab GUI

> ID：13575843
> 
> 赞同：2
> 
> 时间：2012-11-27T00:59:06.603
> 
> 标签：r, matlab, rstudio

我通常使用 matlab GUI 进行编程，它具有非常好的代码折叠功能，例如：

```
 %% This is one chunk of code I can fold just because I am using the %% comment format.
    matrix = [1 2 3; 4 5 6];
    vector = [1 2];
    ax = vector*matrix;

    %% This is another chunk of code I can fold because I am using the %% comment format.
    matrix2 = [7 8 9; 10 11 12];
    vector2 = [7 8];
    ax2 = vector2*matrix2; 
```

如 matlab 代码中所述，%% 注释将立即为 matlab GUI 提供折叠选项，并且该行上将出现一个用于展开/折叠的加号/减号，并且注释可见。

无论如何要在 rstudio 或好的 R gui 中实现这种格式？

我想要加/减功能，并且第一行注释是可见的，这样我就可以知道折叠的代码块中有什么。

谢谢。

GUI 减/加展开/折叠的照片附在下面：

![减去折叠](../Images/4e0ac997c7a2d88be1b1897298155c32.png) ![加上折叠](../Images/5e01280a2b896e429310a36474aa8221.png)

当我在 RStudio 中尝试相同的方法时，似乎唯一的选择是编辑->折叠折叠/展开，但它隐藏了评论，并且它不像 %% 功能那样自动化。就我而言，这是一个更大的问题，因为我使用 X11，所以我不想一直去编辑 -> 折叠...，而是像在 matlab 中使用 %% 一样自动化。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T01:02:49.023

你看过 RStudio 文档的[代码折叠](http://www.rstudio.com/ide/docs/using/code_folding)部分吗？您所要求的一切都在其中进行了描述。

要直接引用文档中最相关的部分，您可以通过以下方式在任何注释行上创建代码部分`including at least four trailing dashes (-), equal signs (=), or pound signs (#) automatically creates a code section.`

如果这还不够清楚，也许我们可以通过例子来学习：

```
 # Section One ---------------------------------

 # Section Two =================================

 ### Section Three ############################# 
```

为了说明这实际上更有效，请检查以下两个屏幕截图。如果你得到不同的东西，我建议你更新 RStudio，然后直接与 RStudio 的好人联系：

扩展： ![在此处输入图像描述](../Images/741382829c4b59f73699795dbd536bdc.png)

折叠：![在此处输入图像描述](../Images/8df6a20de88c5ecdf723c8d1ac56ec17.png)

# c - 我的 c 代码中的错误“分段错误”

> ID：13575851
> 
> 赞同：3
> 
> 时间：2012-11-27T01:00:04.920
> 
> 标签：c, segmentation-fault

```
#include<string.h>
#include<stdio.h>

int firstState(char s[], int length);
int secondState(char s[], int length);
int thirdState(char s[], int length);
int forthState(char s[], int length);

int main()
{
    char string[10];

    gets(string);

    if( firstState(string, 0) )
        printf("Accept\n");
    else
        printf( "Not accept\n" );

    return 0;
}

int firstState(char s[], int length)
{  
    if(s[length] == 'a')
        return (secondState(s, length++));
    else if(s[length] == 'b')
        return firstState(s, length++);
    else
        return 0;
}

int secondState(char s[], int length)
{  
    if(s[length] == 'a')
        return secondState(s, length++);
    else if(s[length] == 'b')
        return thirdState(s, length++);
    else
        return 0;
}

int thirdState(char s[], int length)
{  
    if(s[length] == 'a')
        return secondState(s, length++);
    else if(s[length] == 'b')
        return forthState(s, length++);
    else
        return 0;
}

int forthState(char s[], int length)
{  
    if(s[length] == 'a')
        return secondState(s, length++);
    else if(s[length] == 'b')
        return firstState(s, length++);
    else
        return 0;
} 
```

它给了我一个分段错误或核心转储我很困惑！！！有人可以解释为什么它给了我这种错误吗？？？？并告诉如何调试以使我的代码运行得非常清楚！！

我真的厌倦了这个:(

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T01:04:11.640

你有一个无限递归，

```
return (secondState(s, length++)); 
```

传递的`length`参数是`length`增量之前的值，所以你只看第一个`char`。

`length`将参数作为传递`length + 1`，并检查它`length`是否小于 10（`char`数组的长度`string`）。

另一个注意事项，

```
gets(string); 
```

非常不安全，如果输入超过九个字符，则在分配的内存之外写入。采用

```
fgets(string, sizeof string, stdin); 
```

反而。

* * *

好吧，由于只需要上述修复和一个返回值的变化，大部分逻辑是正确的，固定代码：

```
// #include<string.h> <- We don't use that
#include<stdio.h>

// Match the grammar (a+b)*abb

int firstState(char s[], int length);    // nothing of the suffix matched
int secondState(char s[], int length);   // matched one character of the suffix
int thirdState(char s[], int length);    // matched two
int forthState(char s[], int length);    // matched the complete suffix

int main()
{
    char string[10];
    // Get a 0-terminated string into the buffer.
    fgets(string, sizeof string, stdin);

    if( firstState(string, 0) )
        printf("Accept\n");
    else
        printf( "Not accept\n" );

    return 0;
}

int firstState(char s[], int length)
{  
    if(s[length] == 'a')  // first character of suffix matched
        return (secondState(s, length+1));
    else if(s[length] == 'b')  // nothing matched
        return firstState(s, length+1);
    else    // end of string in not-accepting state
        return 0;
}

int secondState(char s[], int length)
{  
    if(s[length] == 'a')  // the old matched 'a' wasn't part of the suffix, the new may be
        return secondState(s, length+1);
    else if(s[length] == 'b') // now matched two characters of the suffix
        return thirdState(s, length+1);
    else    // end of string in not-accepting state
        return 0;
}

int thirdState(char s[], int length)
{  
    if(s[length] == 'a')  // last three chars aba, the last 'a' could be part of the suffix
        return secondState(s, length+1);
    else if(s[length] == 'b')  // full suffix matched
        return forthState(s, length+1);
    else    // end of string in not-accepting state
        return 0;
}

int forthState(char s[], int length)
{  
    if(s[length] == 'a')  // another char, start a new candidate for the suffix
        return secondState(s, length+1);
    else if(s[length] == 'b')  // another char, can't be part of the suffix, start over
        return firstState(s, length+1);
    else        // end of string in accepting state, yay!
        return 1;
        // return s[length] == '\0';
        // if characters other than 'a' and 'b' need not signal the end of the string
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T01:06:27.490

Segmentation Fault 是访问冲突，即当程序尝试访问内存时，它不应该访问[http://en.wikipedia.org/wiki/Segmentation_fault](http://en.wikipedia.org/wiki/Segmentation_fault)。

在您的情况下，这是由不安全的数组索引引起的，例如

```
int firstState(char s[], int length)
{
...
return firstState(s, length++);
...
} 
```

您实际上并没有检查新长度是否仍在范围内，因此如果字符串不是以空值结尾的，在您的情况下可能不是，那么您将有一个无限循环，导致 SegFault。

对于调试，使用 GUI 将是最明智的方法，在 Windows 上尝试 Visual Studio，在其他一切上尝试 Eclipse。

# javascript - Node.js + AngularJS + Socket.io：推送的数据在控制器中不可用

> ID：13575856
> 
> 赞同：5
> 
> 时间：2012-11-27T01:00:26.273
> 
> 标签：javascript, node.js, websocket, socket.io, angularjs

我已经设置我的节点服务器以随机间隔推出一些数据，并且数据正在到达客户端/浏览器；但是，我不知道如何在我的应用程序控制器中访问它。

```
#node.js file: /server.js (truncated for brevity)

var http    = require('http').createServer(handler),//refers to handler()
    fs      = require('fs'),
    io      = require('socket.io').listen(http);
http.listen(8000);

…

io.sockets.on('connection', function (socket) {
    /* DUMMY CODE: this generates fake alerts at random intervals */
    (function loop() {
        var rand = Math…;
        …
        setTimeout(function(){
            …
            var alert = { … };

            socket.emit('alert', {
                "alert": alert
            });//socket.emit()

            loop();
        }, rand);
    }());
});//io.sockets.on() 
```

当我登录`alert`到终端时，它看起来像这样：

```
alert: {
    id: 258,
    lat:    -95.20933,
    long:   37.027676,
    neighbourhood: "Downtown",
    time:   //stringified js timestamp
} 
```

并且`arguments`从下面包含我想要的数据（与 基本相同`alert`）。

```
# /app/js/services.js

angular.module( 'BAR.services' , [])
.factory('socketio', function($rootScope){

    var socket = io.connect();
    return {
        on: function(event, callback) {
            socket.on(event, function(){
                //console.log(arguments);
                $rootScope.$apply(function(){
                    callback.apply(socket, arguments);
                });//$rootScope.$apply()
            });//socket.on()
        },//on
        emit: function(event, data, callback) {
            socket.emit(event, data, function(){
                //console.log(arguments);
                $rootScope.$apply(function(){
                    if (callback) callback.apply(socket, arguments);
                });//$rootScope.$apply()
            });//socket.emit()
        },//emit
        disconnect: function() {
            socket.disconnect();
        }
    }//return

});// AlertServices 
```

但是，我不知道如何从`arguments`我的控制器中访问数据：

```
# /app/js/controllers.js

function Alerts( $scope , socketio ) {

    socketio.on('alert', function(data) {
        console.log(data);      /* I expect this to be the data I want */
        $scope.alert = data.alert;
    });

    $scope.disconnect = function(){
        socketio.disconnect();
    }

}
Alerts.$inject = ['$scope','socketio']; 
```

当我在控制器中登录`data`到浏览器的控制台时，我得到一个巨大的对象，它似乎是`$scope`;的父对象。并且`data.alert`是未定义的。我还尝试指定第二个参数，像这样`socketio.on('alert', function( data , args )`认为它可能是`arguments`（因为`callback.apply( … )`在服务中有 2 个），但是当我这样做并将其记录到控制台时，`args`返回未定义。

顺便说一句，我基于AngularJS 实习生[的教程](http://www.html5rocks.com/en/tutorials/frameworks/angular-websockets/)。不同的部分有相同的名称，所以我很难弄清楚每个不同的部分做了什么（而且它在 Jade 中也没有帮助）。

我真正想做的是使用来自`alert`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T03:15:42.163

在您的`on`和`emit`功能中，您正在使用：

```
socket.on(event, function() {
  $rootScope.$apply(function() {
    callback.apply(socket, arguments);
  });
}); 
```

但在本教程的原始版本中，它说：

```
socket.on(eventName, function() {  
  var args = arguments;
  $rootScope.$apply(function () {
    callback.apply(socket, args);
  });
}); 
```

这`var args = arguments`很重要，因为它设置`args`为传递给回调的参数`socket.on`（这是您要查找的数据）。如果没有这一步，当你实际使用时`arguments`，它会解析为传递给回调的参数（[根据文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)`$rootScope.$apply`，这是一个 Angular 范围，解释了为什么你会得到控制台输出）。

解决方案是在调用之外捕获参数`$apply`并将其传递给您的回调：

```
socket.on(event, function() {
  var args = arguments;
  $rootScope.$apply(function() {
    callback.apply(socket, args);
  });
}); 
```

# wpf - 需要有关如何完成 wpf 原理图设计软件的信息

> ID：13575857
> 
> 赞同：0
> 
> 时间：2012-11-27T01:00:33.563
> 
> 标签：wpf, diagramming

大家好，感谢阅读这篇文章.. :) 我是 wpf 的菜鸟，想创建某种电子原理图设计软件。实际上，它通过块而不是电子原理图软件进行更可视化的编程。这是所需的描述：

想象一个具有输入输出引脚的对象。在软件引脚必须定义为输入或输出。

对象可以拖放到画布上

可以在物体之间画线

当对象相互连接时，必须在文本框上生成指定的 C 代码

你知道如何实现吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:27:35.177

[在WPF 图表设计器](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)上试用这个出色的代码项目教程和示例代码。它为制作其他类型的图表提供了良好的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:49:06.747

在商业场景中，您当然可以查看那里的（少数）商业通用图表库。

例如，其中一种选择是[yFiles](http://www.yworks.com/yfileswpf)库。它具有对一流端口对象（您的命名法中的引脚）的内置支持，并提供复杂的边缘路由算法，因此每当您的用户连接两个引脚时，可以重新计算对象（“节点”）之间的路由以最小化交叉口和弯道。当然，当用户进行编辑时（或者甚至在用户进行编辑以获得更直接的反馈时），您可以注册大量事件，这些事件可用于更新业务对象，其中您的情况意味着为文本框生成 C 代码。

全面披露：我在 yWorks 工作，但在 Stackoverflow 上我不代表我的雇主。

# ruby - 是否可以将 Rack::Session 中间件与 async_sinatra 一起使用？

> ID：13575860
> 
> 赞同：1
> 
> 时间：2012-11-27T01:00:41.440
> 
> 标签：ruby, session, sinatra, rack

`Rack::Session`与`async_sinatra`'方法一起使用`aroute`似乎是不可能的。我认为这是因为在会话中间件有机会修改必要的标头之前`async_sinatra`引发`:async`，但这似乎是一个常见问题。有没有办法在不重写会话中间件的情况下完成这项工作？我是否忽略了一些明显的东西？

```
require "sinatra/async"

class AsyncTest < Sinatra::Base
  register Sinatra::Async

  enable :sessions

  aget "/foo" do
    session[:message] = "Hello World!"
    body "foo: #{session[:message]}"
  end

  aget "/bar" do
    body "bar: #{session[:message]}"
  end

  run! if app_file == $0
end 
```

访问`/foo`呈现“foo：Hello World！” 正如预期的那样，但`/bar`呈现“bar：”，引起全城的皱眉。该怎么办？这是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:37:24.393

您必须在调用之前`body`调用会话中间件：

```
aget "/bar" do
  message = session[:message]
  body "bar: #{message}"
end 
```

# excel - Excel图表网格大小和多种颜色（无VBA）

> ID：13575861
> 
> 赞同：3
> 
> 时间：2012-11-27T01:00:44.680
> 
> 标签：excel, charts

我想就 Excel (2003) 图表遇到的两个主要问题寻求您的帮助：

1）我想创建一个有 25 个网格的图表（x 轴上 5 个，y 轴上 5 个）。网格的数量不得改变，即数据不应影响网格的大小、长度和数量（使用几个不同的工作表作为图表的输入）。如何根据数据创建这样的图表，而不需要不同的网格长度？

2）我需要一个有 25 个网格的图表，每个网格的颜色不同，例如右上角的 3 个网格是红色的，左下角的 3 个网格是绿色的，中间的所有网格都是白色的。我已经阅读了一些关于创建具有象限背景的图表的文章，即 4 个网格，每个网格都有不同的颜色。但我想知道如何为 25 个网格创建多色背景？

提前谢谢了！！

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:53:49.837

由于您不想使用 VBA，因此需要一些手动步骤来创建您正在寻找的网格图。在大多数情况下，可以按任何顺序执行这些步骤。

*   在工作表的 1 x 5 单元格范围内输入水平列标签。
*   在正下方的 5 x 5 单元格区域中，在每个单元格中输入值 1。
*   选择 6 x 5 单元格范围，将 100% 堆积柱形图插入工作表。您现在将拥有一个图表，其中包含五个水平条带，每个条带颜色不同。
*   删除图例。
*   选择要格式化的波段之一并将其间隙宽度设置为“无间隙”。
*   插入图表标题以及水平和垂直轴标题（如果有）。
*   选择每个波段（数据系列）并将其填充颜色设置为实心填充白色，并将其边框颜色设置为实线黑色。
*   选择图表区域并将其高度和宽度设置为相同的值。
*   锁定图表区域的纵横比。
*   选择并设置所需的每个数据点（网格单元格）的填充颜色为对比色。

（除了通过 VBA 之外，我不知道有任何方法可以根据不同的数据值动态设置网格单元格的颜色。）

*   如果要更改其中一个轴标签的字体大小，请务必将另一个轴设置为相同大小以保留方形网格布局。
*   将纵轴的主要刻度类型设置为无，纵轴标签的字体颜色为白色。
*   此时，您可能希望将绘图区域向左移动，以便在绘图区域的右边界和图表区域之间有更多的空白。
*   选择图表区域，然后在垂直轴标签区域上插入一个文本框。
*   在文本框中输入您要显示的垂直轴标签，每个标签之间有一个空行，以及您选择的字体大小和颜色。
*   垂直移动文本框，以使文本框中的第一个标签与网格顶行的中心垂直对齐。
*   选择文本框中前两个标签之间的空白行并更改行的字体大小，以便再次通过肉眼看到第二个标签与第二个网格行的中心垂直对齐。继续使用剩下的三个标签。
*   如果您想更好地控制标签的对齐方式，请在每对标签之间插入第二行，并将第二行的字体大小设置为比第一行更小的字体。
*   如果您更改图表的大小，此文本框是图表中唯一不会自动调整大小的元素。

除了对字体大小或图表标题和轴标签的对齐方式进行任何细微调整外，图表已完成：

![最终产品](../Images/1f9207bb215b883ae4df87a2286eb57e.png)

# c# - 使用 Windows 模拟连接到 SQL Server

> ID：13575865
> 
> 赞同：2
> 
> 时间：2012-11-27T01:01:26.237
> 
> 标签：c#, windows, wcf, service, impersonation

我用 C# 编写了一个 Windows 服务，我必须对 SQL Server 使用 Windows 身份验证。所以我在 SQL 连接字符串中使用了 Trusted Connection。

设置如下：Windows 服务中托管了 WCF。Windows 服务使用本地服务帐户，该帐户是该应用程序服务器上的管理员...因为 WCF 必须注册 uri。所以我模拟了另一个将使用 Windows 身份验证到 SQL 服务器的帐户...我没有获得 SQL 帐户..所以问题是当我在模拟后尝试进行身份验证...它试图使用服务所在的帐户即使我检查 Windows 身份并且它是正确的并且是模拟帐户，它仍在运行。为什么它使用服务帐户？

另一个问题是，WCF 服务的方法之一返回所有异常的列表...当它为空或我在其中放置新异常但 Windows 服务抛出异常并且该异常进入时，此列表有效列表，我尝试检索它，它说没有终点。有任何想法吗？这不是超时或任何事情，因为我增加了时间。我还有其他只返回字符串的方法，它们工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:48:01.603

好的，我在经过更多调试后发现了这一点。模拟工作正常，但我解密的密码不正确。所以解决了这个问题。

关于未检索的异常列表的问题......显然.Net无法序列化异常类。所以我写了一个返回异常信息的客户类，效果很好。

# git - Git无限循环

> ID：13575867
> 
> 赞同：2
> 
> 时间：2012-11-27T01:01:44.827
> 
> 标签：git

按照 git 命令行的说明陷入 git 无限循环。如果我已经是最新的，为什么我不能推送。它要求我拉。所以我拉。我已经是最新的了。我需要推我的东西。

```
$ git push
trace: built-in: git 'push'
trace: run_command: 'ssh' 'git@somewhere' 'git-receive-pack '\''rt.git'\'''
Enter passphrase for key '/blah/blah':
To git@somewhere:rt.git
 ! [rejected]        BRANCH-1600 -> BRANCH-1600 (non-fast-forward)
 ! [rejected]        release_1.0.1 -> release_1.0.1 (non-fast-forward)
error: failed to push some refs to 'git@somewhere:rt.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.

$ git pull
trace: exec: 'git-pull'
trace: run_command: 'git-pull'
trace: built-in: git 'rev-parse' '--git-dir'
trace: built-in: git 'rev-parse' '--is-bare-repository'
trace: built-in: git 'rev-parse' '--show-toplevel'
trace: built-in: git 'ls-files' '-u'
trace: built-in: git 'symbolic-ref' '-q' 'HEAD'
trace: built-in: git 'config' '--bool' 'branch.BRANCH-1600.rebase'
trace: built-in: git 'config' '--bool' 'pull.rebase'
trace: built-in: git 'rev-parse' '-q' '--verify' 'HEAD'
trace: built-in: git 'fetch' '--update-head-ok'
trace: run_command: 'ssh' 'git@somewhere' 'git-upload-pack '\''rt.git'\'''
Enter passphrase for key '/home/achen/.ssh/id_rsa':
trace: run_command: 'rev-list' '--verify-objects' '--stdin' '--not' '--all' '--quiet'
trace: run_command: 'rev-list' '--verify-objects' '--stdin' '--not' '--all'
trace: exec: 'git' 'rev-list' '--verify-objects' '--stdin' '--not' '--all'
trace: built-in: git 'rev-list' '--verify-objects' '--stdin' '--not' '--all'
trace: built-in: git 'rev-parse' '-q' '--verify' 'HEAD'
trace: built-in: git 'fmt-merge-msg'
trace: built-in: git 'merge' 'Merge branch '\''rel_3.6.0'\'' of somewhere:rt into RTDE                                                 V-1600' 'HEAD' '6ba69b1fc5973ecbc5cef61a3846a901ca82c17a'
Already up-to-date. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:41:49.353

尝试

```
$ git co BRANCH-1600
$ git pull
$ git push 
```

和`release_1.0.1`分支一样。

或者您可以先在远程仓库中删除`BRANCH-1600`和分支。`release_1.0.1`

```
$ git push :BRANCH-1600
$ git push :release_1.0.1
$ git push -u origin BRANCH-1600
$ git push -u origin release_1.0.1 
```

我猜您已经回滚了一些提交（或使用`--amend`arg 提交），但您之前已经将它们推送到远程仓库。

如果您确定本地分支的来源是正确的，只需使用`-f`arg 将其强制推送到远程：

```
$ git push -f origin BRANCH-1600
$ git push -f origin release_1.0.1 
```

# android - 带有 CursorAdapter 的 ListView 慢刷新

> ID：13575869
> 
> 赞同：0
> 
> 时间：2012-11-27T01:02:02.223
> 
> 标签：android, listview, android-cursoradapter

我正在使用 a在 a和 a的帮助下`ListActivity`显示a 。`ListView``CursorAdapter``ContentProvider`

该列表包含 1.000 多个项目，因此初始加载需要一段时间。如果用户选择了一个项目，另一个活动将通过 调用`startActivityForResult()`。用户可以编辑项目，更改存储在数据库中。

Back in `ListActivity`with `onActivityResult()`：重新加载光标`getAdapter().changeCursor()`并刷新视图`getAdapter().notifyDataSetChanged()`

这是正确的方法吗？因为刷新需要1-2秒，而且很慢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-08T21:36:41.593

使用 AsynTask 并运行 backgroundTask，如果 ListView 可以使用 RecyclerView

# jms - JMS 工作流 - 混合队列和主题

> ID：13575870
> 
> 赞同：0
> 
> 时间：2012-11-27T01:02:19.910
> 
> 标签：jms, activemq

我对应该如何使用 JMS 有疑问。这是我的情况：

*   我有一个有多个消费者的队列
*   一条消息被发送到队列 - 一个“登录”消息
*   其中一位消费者处理消息

现在我想告诉我所有的系统关于“登录”消息 - 即用户成功登录。我目前正在做的是：

*   处理消息的消费者向每个人都听的主题发送一条消息，告诉他们“用户 x 成功登录”。让我们称之为成功。

现在每个相关系统都知道“用户 x 已成功登录”，因为 SUCCESS 消息。这就是我要的。

但是，如果我正确理解了 JMS 消息传递规则，那么理论上有可能向另一个主题/队列发送消息，该消息依赖于接收消费者知道“用户 x 登录”可能在收到我的 SUCCESS 消息之前到达这一事实。即使它是在成功消息的 session.send() 调用之后发送的。是对的吗？

如果是这样，您应该如何使用 JMS 实现这种情况？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:14:03.787

> 是对的吗？

不幸的是，是的。

> 如果是这样，您应该如何使用 JMS 实现这种情况？

我想到了两种不同的方法：

*   模拟其他网络协议 - 添加每个系统在收到 SUCCESS 消息时必须发送的 ACKNOWLEDGE 消息。ACKNOWLEDGE 消息将被发送到某个专用主题，并且依赖于接收消费者知道用户 x 登录这一事实的消息在 ACKNOWLEDGE 消息从该消费者到达之前无法发送。

*   在同一主题上发送 SUCCESS 和更多消息（如果适用；如果它们不是最终目的地，其他消费者可以忽略更多消息），并给予 SUCCESS 消息更高的优先级。那应该（至少在理论上——JMS API 不需要这个！）保证 SUCCESS 消息在消息之前到达，这些消息依赖于接收消费者知道用户 x 登录的事实。在这种情况下，您应该感兴趣的方法是[Message #setJMSPriority](http://docs.oracle.com/javaee/6/api/javax/jms/Message.html#setJMSPriority)

# javascript - 如何通过 JavaScript 获取 iFrame 信息（引用 URL）？

> ID：13575874
> 
> 赞同：1
> 
> 时间：2012-11-27T01:02:57.543
> 
> 标签：javascript, iframe

我们如何访问 iFrame 信息（在浏览器中右键单击 iFrame -> This Frame -> 查看框架信息）？主要是我想获取引用 URL。

我能够获取地址，`contentDocument.location.href`但无法获取其他属性（类型、渲染模式、引用 URL，...）。

顺便说一句，`document.referrer`这不是我要寻找的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:18:11.227

主机页面和 iframe 是否在同一个域中？由于“跨框架通信”在所有现代浏览器中都受到严格限制，我认为没有办法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:08:50.113

我没有写这个，也不记得它来自哪里，但它非常有用，它是我一直保留的一个片段：

```
 function parseUri(str) {
            var o = parseUri.options,
                m = o.parser[o.strictMode ? "strict" : "loose"].exec(str),
                uri = {},
                i = 14;

            while (i--) uri[o.key[i]] = m[i] || "";

            uri[o.q.name] = {};
            uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {
                if ($1) uri[o.q.name][$1] = $2;
            });

            return uri;
        };

        parseUri.options = {
            strictMode: false,
            key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
            q: {
                name: "queryKey",
                parser: /(?:^|&)([^&=]*)=?([^&]*)/g
            },
            parser: {
                strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
            }
        }; 
```

然后像这样使用它：

```
 parseUri(document.referrer).host //<-- gets host name 
```

# php - 如何使用 PHP 创建关机按钮来关闭计算机？

> ID：13575876
> 
> 赞同：1
> 
> 时间：2012-11-27T01:03:22.207
> 
> 标签：php, linux, button, shutdown, system-shutdown

是否可以在 PHP 中创建一个关闭按钮来关闭使用 Linux Debian 操作系统的计算机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:06:41.373

我想如果你想给在你的 web 服务器中运行 PHP 的用户提供这样的系统权限是可能的。从安全的角度来看，这将是一个糟糕的设计。

# c++ - MSBuild.exe 不尊重 /MT 编译器标志？

> ID：13575878
> 
> 赞同：3
> 
> 时间：2012-11-27T01:03:30.360
> 
> 标签：c++, visual-studio-2010, msbuild

我惊讶地发现，在将我们的构建系统从 VS2008 切换到 VS2010 之后，我们的应用程序现在抱怨运行时缺少 MSVCR100.dll。我检查了我们项目的构建选项，我们正在为运行时库指定多线程 (/MT)。但是，当我们使用 GUI 构建时，DLL 是静态链接的，并且不会出现错误。该错误仅在我们从命令行使用 MSBuild.exe 构建时发生。

我比较了命令行，它们几乎相同，都指定/MT：

**VS2010 界面：**

> /nologo /W3 /WX- /O2 /Oi /Oy- /GL /D "_CRT_SECURE_NO_WARNINGS" /D "GSL_DLL" /D "WIN32" /D >"_WINDOWS" /D "_USRDLL" /D "_VC80_UPGRADE=0x0710" / D "__STDC_CONSTANT_MACROS" /D >"_WINDLL" /D "_UNICODE" /D "UNICODE" /Gm- /EHsc /MT /GS /Gy /fp:precise /Zc:wchar_t >/Zc:forScope /Fp"Release\Temp \ourProject.pch" /Fa"Release\Temp\" /Fo"Release\Temp\" >/Fd"Release\Temp\vc100.pdb" /Gd /analyze- /errorReport:queue

**MSBuild.exe：**

MSBuild.exe "%WORKSPACE%\OurProject.vcxproj" /t:重建 /p:Configuration=Release

> /nologo /W3 /WX- /O2 /Oi /Oy- /GL /D _CRT_SECURE_NO_WARNINGS /D GSL_DLL /D WIN32 /D _WINDOWS /D _USRDLL /D _VC80_UPGRADE=0x0710 /D __STDC_CONSTANT_MACROS /D _WINDLL /D _UNICODE /D UNICODE /Gm - /EHsc /MT /GS /Gy /fp:precise /Zc:wchar_t /Zc:forScope > /Fo"Release\Temp\" /Fd"Release\Temp\vc100.pdb" /Gd /TP /analyze- /errorReport ：队列

我看过一些关于[VS2010 静态链接的帖子没有按预期运行](https://stackoverflow.com/questions/6437538/vs2010-static-linking-issue)，但是我的项目构建和链接都很好。直到运行时才找不到所需的 DLL。安装 VS2010 运行时或随运行时一起提供是我们试图避免的选项。

谢谢！

# python - 描述符“join”需要一个“unicode”对象但收到一个“str”

> ID：13575879
> 
> 赞同：3
> 
> 时间：2012-11-27T01:03:38.697
> 
> 标签：python

[从这里](http://wiki.geany.org/howtos/convert_camelcase)改编的代码：

```
#from 'foo_bar' to 'Foo.Bar'
def lower_case_underscore_to_camel_case(self, string):
  print string
  class_ = string.__class__
  return class_.join('.', map(class_.capitalize, string.split('_'))) 
```

输出：

```
client_area
TypeError: descriptor 'join' requires a 'unicode' object but received a 'str' 
```

特别令人失望，因为源代码指出：

> """将字符串或unicode从小写下划线转换为驼峰式"""

如何解决这个问题？

* * *

轻松修复：

```
return str.join('.', map(class_.capitalize, string.split('_'))) 
```

谁能解释一下整个过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:08:07.807

该代码似乎引入了不必要的复杂性，但您可以这样做：

```
#from 'foo_bar' to 'FooBar'
def lower_case_underscore_to_camel_case(self, string):
  print string
  class_ = string.__class__
  return class_.join(class_('.'), map(class_.capitalize, string.split('_'))) 
```

您实际上可以将最后一行缩短为：

```
return class_('.').join(map(class_.capitalize, string.split('_'))) 
```

此外，从代码来看，您会`Foo.Bar`从“”收到类似“”（注意一个点）的信息`foo_bar`。

# android - android - 处理大量图像和视图时处理保存片段状态的最佳方法

> ID：13575885
> 
> 赞同：1
> 
> 时间：2012-11-27T01:04:05.400
> 
> 标签：android, android-fragments

我在活动中有一个片段，我在其中动态创建视图并在用户从我创建的图库中选择图像后将图像分配给图像视图。但是，如果用户点击后退按钮然后重新打开片段，则视图已全部重置并且没有图像。我尝试了几种不同的方法来处理保存的状态，但是由于我可能处理多达 20 张图像，我不确定如何处理我的片段的状态，因为我尝试过的方法似乎都不起作用。现在我正在尝试使用 Fragment.SavedState 并使用它重新实例化，但我无法弄清楚如何实际使用 savedstate。任何有关此事的帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:22:08.707

最好的办法是使用 LRU 缓存，为了获得最佳性能，您需要结合基于内存的缓存和基于磁盘的缓存。Jake Wharton 在[这里](https://github.com/JakeWharton/DiskLruCache)有一个出色的实现。

一旦片段/活动不再可见，它就会被垃圾收集，所以你需要能够重建整个视图。我建议`Don't Keep Activities`在开发人员选项中打开进行测试。

Android 开发者网站上的[BitmapFun](http://developer.android.com/training/displaying-bitmaps/index.html)中有一个很好的从网络加载图像的示例。

# javascript - 窗口调整大小确定控件父级更小或更大

> ID：13575886
> 
> 赞同：1
> 
> 时间：2012-11-27T01:04:07.947
> 
> 标签：javascript, jquery

我需要一个脚本来确定何时调整控件的父元素宽度。这是在 windows 调整大小事件上确定的，我只需要立即知道父级是比以前小还是大。请留下一个工作示例 - 将不胜感激谢谢

JavaScript：

```
(function ($) {
   $.fn.quicklist = function () {
      var _this = this;
      var config = {   
         quicklistParentWidth: $(_this).parent().width(),    
      }                

      var parentWidth = config.quicklistParentWidth;
      $(window).resize(function (event) {
         var currWidth = config.quicklistParentWidth;
         $(_this).parent().css('width', config.quicklistParentWidth);

         if (currWidth > parentWidth) {
            $('#width').text('greater');    
         } else if(parentWidth < currWidth) {
            $('#smaller').text('smaller');
         }
         parentWidth = currWidth;
      });
   };
})(jQuery);

$(document).ready(function () {            
   $('#quicklist').quicklist();
}); 
```

HTML：

```
<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr style="height:34px">
        <td style="background:url(images/classic/quicklink_bar.png) 0px 0px; background-repeat:repeat-x; width:100%;">
            <ul id="quicklist">
                <li><a href="#">List Goes here</a></li>
           </ul>
        </td>
        <td style="background:url(images/classic/quicklink_bar.png) 0px 0px; background-repeat:repeat-x; ">
            <a id="link" href="#">Link</a>
        </td>
    </tr>
</table>
<span id="width"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:08:37.937

这是javascript中的工作版本。[http://jsfiddle.net/ZhG8N/](http://jsfiddle.net/ZhG8N/)

```
<div style="width:50%; background:#F00">not yet resized
    <div id="child"></div>
</div>

<script>
var parent = document.getElementById('child').parentNode,
    lastSize = parent.offsetWidth,
    newSize, timer;

window.onresize = function(){
    newSize = parent.offsetWidth;
    if(lastSize > newSize){
        parent.innerHTML = 'smaller';
    }
    else if(lastSize< newSize){
        parent.innerHTML = 'wider';
    }
    lastSize = newSize;
}
</script> 
```

# haskell - 为什么我们使用折叠将数据类型编码为函数？

> ID：13575894
> 
> 赞同：16
> 
> 时间：2012-11-27T01:04:54.667
> 
> 标签：haskell, functional-programming, algebraic-data-types, church-encoding, scott-encoding

或者具体来说，为什么我们使用 foldr 来编码列表和迭代来编码数字？

很抱歉介绍冗长，但我真的不知道如何命名我想问的事情，所以我需要先做一些说明。这很大程度上来自[这篇 CAMcCann 帖子](http://www.haskell.org/pipermail/haskell-cafe/2010-May/078251.html)，它不能完全满足我的好奇心，而且我还将讨论 rank-n-types 和无限懒惰事物的问题。

* * *

将数据类型编码为函数的一种方法是创建一个“模式匹配”函数，该函数为每种情况接收一个参数，每个参数都是一个函数，该函数接收与该构造函数相对应的值，并且所有参数都返回相同的结果类型。

对于非递归类型，这一切都按预期进行

```
--encoding data Bool = true | False
type Bool r = r -> r -> r

true :: Bool r
true = \ct cf -> ct

false :: Bool r
false = \ct cf -> cf

--encoding data Either a b = Left a | Right b
type Either a b r = (a -> r) -> (b -> r) -> r

left :: a -> Either a b r
left x = \cl cr -> cl x

right :: b -> Either a b r
right y = \cl cr -> cr y 
```

然而，与模式匹配的很好的类比在递归类型中被打破了。我们可能会想做类似的事情

```
--encoding data Nat = Z | S Nat
type RecNat r = r -> (RecNat -> r) -> r
zero = \cz cs -> cz
succ n = \cz cs -> cs n

-- encoding data List a = Nil | Cons a (List a)
type RecListType a r = r -> (a -> RecListType -> r) -> r
nil = \cnil ccons -> cnil
cons x xs = \cnil ccons -> ccons x xs 
```

但是我们不能在 Haskell 中编写那些递归类型定义！通常的解决方案是强制将 cons/succ 案例的回调应用于所有级别的递归，而不仅仅是第一个级别（即，编写折叠/迭代器）。在这个版本中，我们使用`r`递归类型的返回类型：

```
--encoding data Nat = Z | S Nat
type Nat r = r -> (r -> r) -> r
zero = \cz cf -> cz
succ n = \cz cf -> cf (n cz cf)

-- encoding data List a = Nil | Cons a (List a)
type recListType a r = r -> (a -> r -> r) -> r
nil = \z f -> z
cons x xs = \z f -> f x (xs z f) 
```

虽然此版本有效，但它使定义某些功能变得更加困难。例如，如果您可以使用模式匹配，则为列表编写“tail”函数或为数字编写“predecessor”函数是微不足道的，但如果您需要使用折叠来代替，则变得很棘手。

所以我的真正问题是：

1.  **我们如何确定使用折叠的编码与假设的“模式匹配编码”一样强大？**有没有办法通过模式匹配来获取任意函数定义，然后机械地将其转换为仅使用折叠的函数？（如果是这样，这也将有助于在 foldr 方面使诸如 tail 或 foldl 之类的棘手定义变得不那么神奇）

2.  **为什么 Haskell 类型系统不允许“模式匹配”编码中需要的递归类型？**. 是否有理由只允许在通过定义的数据类型中使用递归类型`data`？模式匹配是直接使用递归代数数据类型的唯一方法吗？它与类型推断算法有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T05:51:30.097

给定一些归纳数据类型

```
data Nat = Succ Nat | Zero 
```

我们可以考虑如何对这些数据进行模式匹配

```
case n of
  Succ n' -> f n'
  Zero    -> g 
```

很明显，每个类型的函数`Nat -> a`都可以通过给出适当的`f`and来定义，`g`并且唯一的方法`Nat`是使用两个构造函数之一。

* * *

编辑：想一想`f`。如果我们`foo :: Nat -> a`通过给出适当的`f`和`g`这样的`f`递归调用来定义一个函数，那么`foo`我们可以重新定义`f`它`f' n' (foo n')`不是`f'`递归的。如果类型`a = (a',Nat)`比我们可以改为写`f' (foo n)`. 所以，不失一般性

```
foo n = h $ case n
                 Succ n' -> f (foo n)
                 Zero    -> g 
```

这是使我的帖子的其余部分有意义的表述：

* * *

因此，我们可以将 case 语句视为应用“析构字典”

```
data NatDict a = NatDict {
   onSucc :: a -> a,
   onZero :: a
} 
```

现在我们之前的案例陈述可以变成

```
h $ case n of
      Succ n' -> onSucc (NatDict f g) n'
      Zero    -> onZero (NatDict f g) 
```

鉴于此，我们可以得出

```
newtype NatBB = NatBB {cataNat :: forall a. NatDict a -> a} 
```

然后我们可以定义两个函数

```
fromBB :: NatBB -> Nat
fromBB n = cataNat n (NatDict Succ Zero) 
```

和

```
toBB :: Nat -> NatBB
toBB Zero = Nat $ \dict -> onZero dict
toBB (Succ n) = Nat $ \dict -> onSucc dict (cataNat (toBB n) dict) 
```

我们可以证明这两个函数是同构的见证（直到快速和失去推理），从而表明

```
newtype NatAsFold = NatByFold (forall a. (a -> a) -> a -> a) 
```

（与 相同`NatBB`）同构于`Nat`

我们可以对其他类型使用相同的构造，并通过证明基础类型与代数推理（和归纳）同构来证明生成的函数类型是我们想要的。

至于你的第二个问题，Haskell 的类型系统基于等递归而不是等递归类型。这可能是因为理论和类型推断更容易使用 iso-recursive 类型解决，并且它们具有所有功能，它们只是将更多的工作强加给程序员部分。我喜欢声称你可以在没有任何开销的情况下获得你的 iso-recursive 类型

```
newtype RecListType a r = RecListType (r -> (a -> RecListType -> r) -> r) 
```

但显然 GHCs 优化器有时会扼杀那些 :(。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T16:33:22.460

[Scott 编码](http://en.wikipedia.org/wiki/Mogensen%e2%80%93Scott_encoding)的维基百科页面有一些有用的见解。简短的版本是，您指的是 Church 编码，而您的“假设模式匹配编码”是 Scott 编码。两者都是明智的做事方式，但 Church 编码需要使用更轻的类型机器（特别是，它不需要递归类型）。

两者等价的证明使用以下思想：

```
churchfold :: (a -> b -> b) -> b -> [a] -> b
churchfold _ z [] = z
churchfold f z (x:xs) = f x (churchfold f z xs)

scottfold :: (a -> [a] -> b) -> b -> [a] -> b
scottfold _ z [] = z
scottfold f _ (x:xs) = f x xs

scottFromChurch :: (a -> [a] -> b) -> b -> [a] -> b
scottFromChurch f z xs = fst (churchfold g (z, []) xs)
 where
  g x ~(_, xs) = (f x xs, x : xs) 
```

这个想法是，既然`churchfold (:) []`是列表上的身份，我们可以使用 Church 折叠来产生它给出的列表参数以及它应该产生的结果。然后在链`x1 `f` (x2 `f` (... `f` xn) ... )`中最外层`f`接收一对`(y, x2 : ... : xn : [])`（对于`y`我们不关心的一些），所以返回`f x1 (x2 : ... : xn : [])`。当然，它也必须返回`x1 : ... : xn : []`，以便更多的应用程序`f`也可以工作。

（这实际上有点类似于[强（或完全）归纳](http://en.wikipedia.org/wiki/Mathematical_induction#Complete_induction)的数学原理的证明，来自“弱”或通常的归纳原理）。

顺便说一句，你的`Bool r`类型对于真正的 Church 布尔值来说有点太大了——例如`(+) :: Bool Integer`，但`(+)`不是真正的 Church 布尔值。如果启用`RankNTypes`，则可以使用更精确的类型：`type Bool = forall r. r -> r -> r`. 现在它被迫是多态的，所以真正只包含两个（忽略`seq`和底部）居民 -`\t _ -> t`和`\_ f -> f`. 类似的想法也适用于您的其他教会类型。

# c# - xna 模型侧翻，相机相关

> ID：13575899
> 
> 赞同：0
> 
> 时间：2012-11-27T01:05:51.920
> 
> 标签：c#, xna, camera

我有 3 个类：游戏类、相机类和模型类。项目构建并运行，模型出现，当我按下 w 并使其前进时，相机会跟随它，但是当我重新启动项目并旋转模型以面对任何其他方式时，它似乎在俯冲，而不是去是的，我试图实现的是遵循模型的相机，

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace test1
{
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;

    //Visual components
    Ship ship = new Ship();
    Camera _camera;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

    }

   protected override void Initialize()
    {
     //   this.graphics.ToggleFullScreen(); 
        this._camera = new Camera(graphics.GraphicsDevice.Viewport);
        this._camera.LookAt = new Vector3(0.0f, 0.0f, 0.0f);

        this._camera.Position = new Vector3(0.0f, -5000.0f, 1000.0f);

        base.Initialize();
    }

    protected override void LoadContent()
    {
        ship.Model = Content.Load<Model>("Models/p1_wedge");
        ship.Transforms = _camera.SetupEffectDefaults(ship.Model);

    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {

        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed ||
            Keyboard.GetState().IsKeyDown(Keys.Escape))
            this.Exit();

        // Get some input.
        UpdateInput();

        base.Update(gameTime);
    }

    protected void UpdateInput()
    {
        // Get the game pad state.
        GamePadState currentState = GamePad.GetState(PlayerIndex.One);
        KeyboardState currentKeyState = Keyboard.GetState();

            ship.Update(currentState);

        }

    protected override void Draw(GameTime gameTime)
    {
        graphics.GraphicsDevice.Clear(Color.CornflowerBlue);

        //camera
        this._camera.Update();
        _camera.LookAt = ship.Position;

        Matrix shipTransformMatrix = ship.RotationMatrix
                * Matrix.CreateTranslation(ship.Position);
        DrawModel(ship.Model, shipTransformMatrix, ship.Transforms);

        base.Draw(gameTime);

    }

    public void DrawModel(Model model, Matrix modelTransform, 
Matrix[] absoluteBoneTransforms)
{
//Draw the model, a model can have multiple meshes, so loop
foreach (ModelMesh mesh in model.Meshes)
{
    //This is where the mesh orientation is set
    foreach (BasicEffect effect in mesh.Effects)
    {
        effect.World = 
            absoluteBoneTransforms[mesh.ParentBone.Index] * 
            modelTransform;
        effect.Projection = _camera.ProjectionMatrix;
        effect.View = _camera.ViewMatrix; 
    }

    //Draw the mesh, will use the effects set above.
    mesh.Draw();
}
}

        }
    } 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace test1
{
public class Camera
{

    private Vector3 _position;
    private Vector3 _lookAt;
    private Matrix _viewMatrix;
    private Matrix _projectionMatrix;
    private float _aspectRatio;

 public Camera(Viewport viewport)
{
    this._aspectRatio = ((float)viewport.Width) / ((float)viewport.Height);

    this._projectionMatrix = Matrix.CreatePerspectiveFieldOfView(
                                MathHelper.ToRadians(40.0f),
                                this._aspectRatio,
                                1.0f,
                                10000.0f);
}

 public Matrix[] SetupEffectDefaults(Model myModel)
{
 Matrix[] absoluteTransforms = new Matrix[myModel.Bones.Count];
 myModel.CopyAbsoluteBoneTransformsTo(absoluteTransforms);

 foreach (ModelMesh mesh in myModel.Meshes)
 {
     foreach (BasicEffect effect in mesh.Effects)
     {
         effect.EnableDefaultLighting();
         effect.Projection = ProjectionMatrix;
         effect.View = ViewMatrix;
     }
 }
 return absoluteTransforms;
 }

public Vector3 Position
{
    get { return this._position; }
    set { this._position = value; }
}
public Vector3 LookAt //= Vector3.Zero;

{
    get { return this._lookAt; }
    set { this._lookAt = value; }
}

public Matrix ViewMatrix
{
    get { return this._viewMatrix; }
}
public Matrix ProjectionMatrix
{
    get { return this._projectionMatrix; }
}
public void Update()
{
    this._viewMatrix = 
        Matrix.CreateLookAt(this._position, this._lookAt, Vector3.Up);

}

}
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace test1
{
class Ship
{
    public Model Model;
    public Matrix[] Transforms;

    //Position of the model in world space
    public Vector3 Position = Vector3.Zero;

    //Velocity of the model, applied each frame to the model's position
    public Vector3 Velocity = Vector3.Zero;
    private const float VelocityScale = 5.0f;

    public Matrix RotationMatrix =
 Matrix.CreateRotationX(MathHelper.PiOver2);

    private float rotation;

    public float Rotation
    {
        get { return rotation; }
        set
        {
            float newVal = value;
            while (newVal >= MathHelper.TwoPi)
            {
                newVal -= MathHelper.TwoPi;
            }
            while (newVal < 0)
            {
                newVal += MathHelper.TwoPi;
            }

            if (rotation != value)
            {
                rotation = value;
                RotationMatrix =
                    Matrix.CreateRotationX(MathHelper.PiOver2) *
                    Matrix.CreateRotationZ(rotation);
            }

        }
    }

    public void Update(GamePadState controllerState)
    {

        KeyboardState currentKeyState = Keyboard.GetState();
        if (currentKeyState.IsKeyDown(Keys.A))
            Rotation += 0.10f;
        else
        // Rotate the model using the left thumbstick, and scale it down.
        Rotation -= controllerState.ThumbSticks.Left.X * 0.10f;

        if (currentKeyState.IsKeyDown(Keys.D))
            Rotation -= 0.10f;

        if (currentKeyState.IsKeyDown(Keys.W))
            Velocity += RotationMatrix.Forward * VelocityScale;
        else
        // Finally, add this vector to our velocity.
        Velocity += RotationMatrix.Forward * VelocityScale *
         controllerState.Triggers.Right;

        // In case you get lost, press A to warp back to the center.
        if  (currentKeyState.IsKeyDown(Keys.Enter))
        {
            Position = Vector3.Zero;
            Velocity = Vector3.Zero;
            Rotation = 0.0f;

        }

        Position += Velocity;
        Velocity *= 0.95f;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:42:06.233

我会这样做：

![架构](../Images/ddac0b2fe92a7341d5685b5f2c267eee.png)

我在飞机上展示它以便于理解，但不需要进行计算。

您只需要相机的前向矢量、船的前向矢量、相机到船的距离和相机的仰角矢量。

这样当船移动时会做类似的事情：

```
 Camera.Forward = Vector3.Lerp( Ship.Forward, Camera.Fordward, 0.05f);
 Camera.Forward.Normalize();
 Camera.Forward*=Camera.Distance;
 Camera.Target = Ship.Target;
 Camera.Source = Ship.Target - Camera.Forward;
 Camera.Position = Camera.Source + Camera.Elevation; 
```

我希望这会有用。

# linux - 包含文件路径的 Bash 变量

> ID：13575903
> 
> 赞同：1
> 
> 时间：2012-11-27T01:06:39.473
> 
> 标签：linux, bash, filepath, mv

我正在编写一个脚本，该脚本需要根据用户输入在目录中查找文件。该文件包含一个文件路径，我需要将该文件路径用作变量，以便稍后在 mv 命令中使用它。至今 ：-

```
read x
path = `cat ~/filepaths/$x` 
```

稍后它需要使用从该文件读取的文件路径从垃圾箱中移动文件

```
mv ~/trash/$x $path 
```

目前，它似乎不起作用，并在运行时挂起。我在这里错过了什么愚蠢的事情吗？

编辑：已解决，是一个愚蠢的语法错误。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T01:10:24.687

删除作业周围的空格：

```
path=`cat ~/filepaths/$x` 
```

或者：

```
path=$(< ~/filepaths/$x) 
```

# objective-c - iOS拼写检查器使单词复数

> ID：13575907
> 
> 赞同：1
> 
> 时间：2012-11-27T01:06:54.747
> 
> 标签：objective-c, ios

我正在开发一个具有 UISearchBar 的应用程序。点击搜索按钮后，iOS 拼写检查器会在搜索词中添加一个“s”。例如，如果我搜索电视，拼写检查器会提供将其更改为电视。即使我搜索脚，它也提供将其更改为脚。这甚至都不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:06:14.440

设置`UITextSpellCheckingType`为`UITextSpellCheckingTypeDefault`

# git - 使用 gitignore 嵌套存储库。

> ID：13575914
> 
> 赞同：2
> 
> 时间：2012-11-27T01:08:09.333
> 
> 标签：git

我想嵌套 2 个 git repos。我一直在阅读子模块，有一段时间我认为它很棒，我想我可能想要别的东西。这是我的情况：

首先，我想我应该提到我的所有服务器都托管网站，并且设置为 staging.domain.com 和 domain.com（实时）模式。

在每台服务器中，我都有一个作为网站的父存储库和一个作为我的核心库的子存储库。我需要我的核心在我的所有服务器上都相同，但网站存储库对于它们所在的服务器都是唯一的。我想将更改写入核心，同时推送到所有暂存域，然后做一些质量保证，然后推送到所有实时服务器。

我最初虽然这些子模块可以满足我的需求，但我对它们的问题是我需要一次更新所有内核。如果我使用子模块，我的核心将更新，但在父网站运行 git submodule update 和 git commit 之前不会生效。

我想为什么不直接使用 gitignore 来忽略核心所在的文件夹并将它们视为独立的实体。有没有其他人这样做过？我会遇到什么问题？你有更好的建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:45:18.833

看来您可能会从暂存服务器上的接收后提交中受益，您可以在该服务器上：

*   将您的更新推送到一个裸仓库核心
*   触发`git submodule update`所有临时站点
    *   `cd`到一个服务器站点`/path/staging/site1`
    *   `GIT_DIR=/path/staging/site1/.git WORK_TREE=/path/staging/site1/.git git submodule update`
    *   对每个站点重复

这个想法是：

*   一推
*   多次更新
*   保持子模块的优势（即，记录您的站点正在使用的核心的确切版本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:12:37.863

[您可以使用git-subtree](https://github.com/apenwarr/git-subtree)代替子模块（[使用示例](http://psionides.eu/2010/02/04/sharing-code-between-projects-with-git-subtree/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:52:49.413

这取决于您是否希望父 repo 上的“git status”返回 repo 是干净的。如果您可以在父 repo 上使用“git status”返回类似“Untracked files:... core-libraries/”的内容，那么您可以将 core-libraries repo 作为父 repo 的未跟踪子项。

Git 真的不关心未跟踪的文件和目录。

# java - 为什么我的 Java 程序在高负载下关闭而没有任何错误消息？

> ID：13575916
> 
> 赞同：1
> 
> 时间：2012-11-27T01:08:25.650
> 
> 标签：java, crash

当我加载一个相当大的文件时，我的 Java 程序崩溃（在 Eclipse 中）。

我已经运行了 VisualVM，并且我的 CPU 在崩溃之前似乎达到了 20% 的峰值使用率，而且我的堆大小似乎并不太高。崩溃时运行的线程数约为 20。

我确实收到错误消息 - 但不是每次发生崩溃时。我收到的两条错误消息是：

> [错误太多，中止]

和

> # Java 运行时环境检测到一个致命错误：
> 
> #
> 
> # SIGSEGV (0xb) at pc=0x00007f096d096942, pid=12102, tid=139678234564352
> 
> #
> 
> # JRE 版本：6.0_24-b24
> 
> # Java VM：OpenJDK 64-Bit Server VM（20.0-b12混合模式linux-amd64压缩oops）
> 
> # 衍生产品：IcedTea6 1.11.5
> 
> # 发行版：Ubuntu 12.04 LTS，包 6b24-1.11.5-0ubuntu1~12.04.1
> 
> # 有问题的框架：
> 
> # J java.util.HashMap.put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;

我找到了与第二个警告有关的线程，但它似乎表明存在硬件问题。我相信我的错误出在软件中，因为它似乎只发生在较大输入文件的特定实例中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:13:05.283

如果 JVM 被授予使用 X 数量内存的权限，它将会崩溃，但系统没有更多的内存可以给它。例如，您说它可以使用 512MB (-Xmx512m)，而您的程序的堆仅使用 128MB。应该允许再分配 384MB。然而，当它去分配更多的内存时，机器会被窃听，而操作系统说不，JVM会在这些情况下崩溃。查看 CPU 使用率和堆大小看起来很正常，但问题是机器没有更多的内存可以给它。因此，当发生这种情况时，请检查您的总内存和可用内存，看看您是否只是内存不足。

有趣的是，如果您降低 JVM 上的上层内存 (-Xmx)，它可能会阻止它崩溃，因为它会在分配更多内存之前强制 Java 进行 GC。但是将它降低得太远，它会运行缓慢或只是抛出 OOM 异常。这就是为什么选择不太大或太小的尺寸对于您的应用程序有效运行很重要的原因。您还可以考虑预先分配更多，或更改您的程序以更有效地使用内存。你会想要关闭那些占用你的内存的进程，这些进程不是你的应用程序的核心，或者只是购买更多的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T01:12:12.770

似乎它可能是一个`OutOfMemoryException`，尽管我承认 Eclipse 通常会报告这些。

但是请注意，已启动应用程序的堆大小与 IDE 本身的堆大小*不同*，并且默认值非常小（不记得了，但并不大）。

查看默认启动配置文件的 VM 设置，或更改应用程序特定启动的 VM 以添加大量堆`-Xmx1G`或其他内容

# version-control - 版本控制建议

> ID：13575919
> 
> 赞同：1
> 
> 时间：2012-11-27T01:08:52.440
> 
> 标签：version-control, mercurial, lamp, bitbucket

我们已经决定了一个版本控制系统——使用 Mercurial 客户端和 Bitbucket 作为存储库。但我突然想到我们有一个我没有考虑过的问题。

我们有一个内部开发 LAMP 服务器 (Ubuntu)，所有开发人员都在存储在上面的网站上工作，这意味着所有开发人员共享一个文件源，我们都在使用它。两个不同的开发人员同时在同一个站点上工作的情况很少见，但偶尔会发生。这意味着如果两个开发人员同时处理同一个文件，他们可以轻松地覆盖彼此的工作。

所以我的问题是：这个问题的最佳解决方案是什么？请记住，我们喜欢单个内部服务器的便利性，以便我们可以在内部演示站点，并且它还运行一个 cron 作业来备份文件和数据库。

我猜每个开发人员都必须在各自的工作站上运行自己的 LAMP（或 WAMP）服务器，提交并推送到 bitbucket 存储库。当然，无论何时在不同的网站上工作，都要像往常一样拉动并解决任何差异。这当然剥夺了其他团队成员（非开发人员）能够浏览到 192.168.0.100（LAMP 服务器 IP 地址）并查看网站进度的便利，更不用说某些客户端也可以访问同一服务器在外部（我已经设置了一个端口转发并仅限于他们的 IP 地址）来查看他们网站的进度。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:29:56.460

我认为，您必须**认真重新考虑**使用过的工作流程，因为 LAMP-per-dev 仅*比*就地编辑站点好一点

*   我看不到 Bitbucket 在严肃的企业发展中的位置 - 内部资源至少更易于管理
*   我看不出为什么不将 Staging Mercurial-server（伪中央）与 Staging 内部 LAMP 服务器（您现在拥有并使用）一起使用

我可以想象至少有两种可能的选择（快速，肮脏，草稿，不是现成的解决方案），两者都是基于[钩子的](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)

## 不易管理，实施速度更快

每个开发人员都有自己的本地 repo 钩子，在（每个？）提交后导出他的提示并将副本导出到相关的站点空间。工作流程：提交 - 内部站点上的测试结果

优点：简单、快速实施

缺点：无法防止（由于分布式特性）被其他开发人员的代码覆盖测试代码

## 可管理的部署，更难实施和管理

LAMP-server 也成为 Mercurial-server，它托管所有站点存储库的“中央”克隆，仅通过来自开发人员本地存储库的推送进行更新。此服务器上的每个 repo 都必须有两个钩子：

*   “推前”检查，是否允许现在推，或网站被以前的开发者“锁定”
*   “post-push”，它导出复制接收到的数据并执行钩子 1 的控制功能：根据条件（讨论主题）锁定/解锁推送到 repo

工作流程：提交 - 推送 - 测试结果 - 使用特殊（移动）标签标记 WC - 提交标签 - 将解锁变更集推送到 repo

优点：可管理的单点测试

缺点：由于推送工作流和推送阻塞可能导致延迟。需要安装、配置、支持额外的服务器。changegroup 和 pretxnchangegroup 钩子的复杂性

**解决方案 2 的最后说明和提示：**我*认为*（**未测试**），特殊标签（带有 -f 用于跨变更集移动）可以用作解锁标志（书签将不满足“手动移动”条件）。即 - 开发人员提交（并推送）未标记的变更集，标记（fe）“通过”标记一些较旧的变更集。当 Staging 服务器上的测试结果完成后，开发人员使用上述标记、提交标记标记 WC 并推送到中央仓库。更改组挂钩必须检测 .hgtags 的推送，并且（以某种方式）允许未来的数据推送（必须始终允许控制推送）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:38:15.093

是的，更好的解决方案可能是为每个开发人员设置一个本地服务器。这对您来说可能看起来不方便，因为您显然习惯于共享服务器，但请考虑：

1.  如果您真的对使用单个服务器作为演示服务器感兴趣，那么人们当时不积极地开发它可能会更好。他们可以那样破坏东西！开发人员在开发时不必担心会破坏东西。开发通常意味着试验。
2.  让每个开发人员运行他们自己的服务器将使他们能够灵活地进行工作，例如，断开连接。你有一个分散的版本控制系统（mercurial），但是你的开发过程是高度集中的。即使您不希望人们远程工作，也要意识到当您的单台服务器出现故障时，*每个人都会出现故障*。
3.  任何时候开发人员提交并推送这些提交，您都可以直接自动部署到您的演示站点。这样，您的演示服务器上仍然有一个相当最新的源代码。

**TL;DR：保留演示服务器，但让您的开发人员在他们自己的服务器上工作。**

# java - Akka 和 Apache Camel 优于 Apache Service Mix 和其他 ESB

> ID：13575923
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:09:19.447
> 
> 标签：java, scala, integration, akka, esb

在通过xml数据交换进行系统集成的高性能、可扩展性和海量并发方面，是否值得使用Akka和Camel开发一个通道少、简单的解决方案，而不是采用mamut ESB解决方案？

我知道 apache 服务组合在幕后使用骆驼在服务之间进行引擎消息调解。但是关于akka可以提供的性能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:23:09.293

除了没有看到真正的问题之外，我可以告诉您，有几种非 mamut ESB 解决方案可用，尤其是在开源环境中。

这取决于你想做什么。例如，如果您需要对“通道”进行监控和管理，为什么不使用轻量级 ESB（ServiceMix、Fuse、Talend、WSO2、Fiorano 等）而不是自己实现呢？

也许您应该更多地告诉我们您的问题 - 讨论“真正的” ESB 或 Camel + Akka 是否是更好的选择......

# php - PHP 包含的内容不适用于本地页面 css

> ID：13575926
> 
> 赞同：0
> 
> 时间：2012-11-27T01:09:50.333
> 
> 标签：php, html, css, include

在我的 html 页面中，我使用 PHP 包含来插入我的站点范围的标题：

`<?php include 'header.php'; ?>`

这是 header.php 中的代码：

```
<div id="header">
    <div id="navigation">
            <ul>
                <li><a href="index.php" class="active">home</a></li>
                <li><a href="about_us.php" id="nav_about">about us</a></li>
                <li><a href="competition.php" id="nav_competition">competition</a></li>
                <li><a href="media.php" id="nav_media">media</a></li>
                <li><a href="sponsors.php" id="nav_sponsors">sponsors</a></li>
                <li><a href="contact_us.php" id="nav_contact">contact us</a></li>
            </ul>
        </div>  
</div> 
```

这是 HTML 文档标题中的 CSS：

```
#nav_about { color:#4c005c; } 
```

插入代码中的“活动”类是更改该链接的颜色以表示您所在的页面。这功能很好，因为“活动”是在链接到 html 文件的 CSS 文档中定义的。我想根据包含的页面修改特定链接的颜色。问题是，当我测试它时，该页面上的 CSS（定义 #nav_about 的那个）不适用。包含工作正常。

总之，我需要找到一种方法来修改通过 PHP 插入的站点范围的 HTML 片段，并在它插入的页面上包含 CSS。

我是 HTML 和 PHP 的新手，所以我认为这里缺乏一些知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:25:13.567

根据您在 PHP 中所在的当前页面更改 HTML 元素的类的简单方法可能如下所示：

```
<?php
$nav_links = array(
    '/index.php' => array('id' => 'nav_home', 'label' => 'Home'),
    '/about_us.php' => array('id' => 'nav_about', 'label' => 'About Us'),
    // and so on for each link
);
?>
<div id="header">
    <div id="navigation">
        <ul>
<?php
foreach ($nav_links as $href => $link_info) {
    if ($_SERVER['REQUEST_URI'] === $href) {
?>
            <li><a href="<?php echo $href; ?>" id="<?php echo $link_info['id']; ?>" class="active"><?php echo $link_info['label']; ?></a></li>
<?php
    } else {
?>
            <li><a href="<?php echo $href; ?>" id="<?php echo $link_info['id']; ?>"><?php echo $link_info['label']; ?></a></li>
<?php
    }
}
?>
        </ul>
    </div>  
</div> 
```

在这里，您只需将 class=`active`应用于与当前查看的页面相对应的链接。如果您愿意，这也使得分离页面/链接配置变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:13:46.287

听起来像是选择器特异性问题。导航链接的 CSS 是什么？

如果它类似于`#navigation li {color: #abc}`，那将优先于`#nav_about`选择器。

选择器特异性按每个中的 id、类和元素的数量排列。

**1 个标识 + 1 个元素 > 1 个标识**。

增加`#nav_about`选择器的特异性（例如将其更改为 `#navigation #nav_about`），您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:21:14.580

尝试使用传统方式，在 PHP 标签内，

```
<?php
  echo "<link rel='stylesheet' href='css-filename.css' type='text/css'>";
 ?> 
```

# objective-c - 不是 UIView 子视图的按钮不起作用

> ID：13575928
> 
> 赞同：0
> 
> 时间：2012-11-27T01:10:08.237
> 
> 标签：objective-c, ios, cocoa-touch

如果我将它更改为 timerView 的子视图，它可以正常工作，但没有其他工作。

```
timerView = [[UIView alloc] initWithFrame:CGRectMake(0, 278, 105, 33)];
[self.view addSubview:timerView];

UIImageView *changerBackground = [[UIImageView alloc] init];
[changerBackground setImage:[UIImage imageNamed:@"speedbackground.png"]];
changerBackground.frame = CGRectMake(-12 , -16, 105, 33);
[timerView addSubview:changerBackground];

UIButton *normal = [UIButton buttonWithType:UIButtonTypeCustom];
normal.frame = CGRectMake(40, 8, 22, 22);
[normal setBackgroundImage:[UIImage imageNamed:@"normalwhite.png"] forState:UIControlStateNormal];
[normal setBackgroundImage:[UIImage imageNamed:@"normalred.png"] forState:UIControlStateHighlighted];
[normal addTarget:self action:@selector(quickTest:) forControlEvents:UIControlEventTouchUpInside];
[changerBackground addSubview:normal]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:17:16.047

```
[changerBackground setUserInteractionEnabled:YES]; 
```

将解决您的问题。由于 UIImageView 默认禁用用户交互。

# lambda - 编程项目（课程项目）需要帮助。读语法，输出乔姆斯基

> ID：13575929
> 
> 赞同：0
> 
> 时间：2012-11-27T01:10:13.287
> 
> 标签：lambda, production, context-free-grammar

所以我被分配了这个项目，并且一直在尝试旧的大学，但我对如何去做有点迷茫。这个想法是给你一个 txt 文件，其语法格式为：

*   五：S、A、B、C
*   标签
*   小号：小号
*   磷：
*   S -> aAaA|aABBA
*   A -> AaaA|$
*   B -> bB|bbC
*   C -> B

这些生产规则不会是唯一经过测试的规则，但这只是一个示例。

所以第一步是读入程序。下一步是删除 Lambda ($) 产生式。最后一步是删除单位产品。

我是......我删除 lambda 产品的方式并不是我认为的最佳方式。

这就是我的做法。

所以首先，使用 getline 读取文件。接下来使用一些循环来遍历文件。

现在在一个数组中，我已经存储了与具有 lambda 产生式的规则相对应的非终结符，所以请记住这一点。

因此，在遍历每个产生式中的每个字符时，检查该字符是否与表示 lambda 产生式的非终结符数组中的一个相同（不包括索引 0，因为那是产生式的开始）

如果您找到匹配项，请标记您所在的索引

所以说你通过S。

S -> a (没问题) s -> aA (好吧有点问题)

而不是写A，不要。跳过它，然后使用另一个循环，打印出该生产规则的剩余部分（即，打印到你打到一个条）所以我们得到 S -> aaA

现在画一个酒吧

S->aaA| 现在将索引返回到该块中的第一个字符，这里是 a。从那里，通过你第一次点击非终端的地方重写字符。

S -> aaA|aA

现在继续循环查找下一个非终结符是 lambda

S -> aaA | aAaA（我们在这里）

画条

S -> aaA | 啊啊|

回到起点，继续

S -> aaA | 啊啊| 啊啊啊

继续阅读语法并输出每个字符并重复此过程以获得

S -> aaA | 啊啊| 啊啊啊| aABB | aBBA | aABBA

在所有代码的末尾，我有两个循环来检查语法中的原始条（当我这样做时，我将它们替换为！），然后在最后输出具有所有 lambda 产品作为 lambdas 给出的形式

S -> aaA | 啊啊| 啊啊啊| 啊 | aABB | aBBA | aABBA | aBB

我将在此处包含代码，但请注意，... 这很粗糙。它很粗糙，我实际上无法让它很好地落在这里的编码块下，所以我要链接它。

[代码](http://pastebin.com/78yv3czJ)

我很欣赏你将如何进行这个项目的任何想法，或者我是否在做一些公然错误的事情。

该代码当前抛出了一些错误（我很确定这是我在某处读取一些空字符的原因），但如果你忽略它们，它会吐出来控制台正确的事情......主要是。

感谢您的帮助，感谢您花时间阅读所有这些混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:23:21.873

这是我推荐的架构：

1.  定义语法的元语法（您正在使用的语法产生的语法）
2.  为该元语法编写一个简单的分词器
3.  编写基于元语法的手写递归体面解析器，对每个输入语法产生式进行解析并创建语法树
4.  根据 CNF 规则操作语法树
5.  从修改后的语法树生成输出。

**元语法示例：**

```
production:
    nonterminal ':' alternatives

alternatives:
    alternative,
    alternative ',' alternatives

alternative:
    symbols

symbols:
    symbol,
    symbol symbols

symbol:
    terminal,
    nonterminal,
    '$'

etc.. 
```

# visual-studio - 我需要帮助格式化在 Microsoft Visual Studio 中创建的代码才能在 Mac 上的 Xcode 中工作

> ID：13575936
> 
> 赞同：-1
> 
> 时间：2012-11-27T01:11:11.170
> 
> 标签：visual-studio, xcode4, formatting

我在 Microsoft Visual Studio 上编写了一小段代码，这是一个简单的程序，用来教别人 C++ 的基础知识。我正在迁移到 Xcode，这对我来说是新的。我需要帮助重新格式化此代码，以便它可以在 Mac 上运行。请帮忙！

```
#include <iostream>
#include <string>
#include <random> //this needs to be included for the rand() function
#include <time.h> //this needs to be included for the seed time
#include <windows.h>
#include <conio.h>

using namespace std;
//PAB

int random_in_range(int a, int b)//this function will generate a random number between specified range
{
    return (a+rand()%(b-a+1));
}

void hangman(){
    char guess;
    string word="";
    string hidden ="";
    int strikesLeft= 0;

    int random = random_in_range(1,15);

    switch(random){
    case 1:
        word = "bacon";
        hidden ="?????";
        strikesLeft=5;
        break;
    case 2:
        word = "computer";
        hidden ="????????";
        strikesLeft=7;
        break;
    case 3:
        word = "human";
        hidden = "?????";
        strikesLeft=7;
        break;
    case 4:
        word = "desk";
        hidden = "????";
        strikesLeft=7;
        break;
    case 5:
        word = "card";
        hidden = "????";
        strikesLeft=7;
        break;
    case 6: 
        word="keyboard";
        hidden = "????????";
        strikesLeft=7;
        break;
    case 7:
        word="phone";
        hidden="?????";
        strikesLeft=7;
        break;
    case 8:
        word="mouse";
        hidden="?????";
        strikesLeft=7;
        break;
    case 9:
        word="camp";
        hidden="????";
        strikesLeft=7;
        break;
    case 10:
        word="captain";
        hidden="???????";
        strikesLeft=7;
        break;
    case 11:
        word="brother";
        hidden="???????";
        strikesLeft=7;
        break;
    case 12:
        word="beauty";
        hidden="??????";
        strikesLeft=7;
        break;
    case 13:
        word="cave";
        hidden="????";
        strikesLeft=7;
        break;
    case 14:
        word="children";
        hidden="????????";
        strikesLeft=7;
        break;
    case 15:
        word="action";
        hidden="??????";
        strikesLeft=7;
        break;
}

    bool gameOver=false;
    int pos;
    //add strike counter

    cout << "                            ***WELCOME TO HANGMAN***" << endl << endl;
    cout << "Try to guess the word in question marks. But watch out, if you use too many letters not in the word, you will lose." << endl;
    cout << "You start with " << strikesLeft << " strikes." << endl;
    cout << "Good luck..." << endl;

    do{
        cout << "Word is " << hidden << endl << endl;
        cout << "Enter guess: ";
        cin >> guess;

        pos = word.find_first_of(guess);

        if(pos!=-1)
            hidden[pos]=guess;

        else{
            strikesLeft--;
            cout <<"Sorry, " << guess << " is not in this word." << endl;
            cout <<"You have " << strikesLeft << " strikes left." << endl; //also tell them strikes remaining
        }

        if(hidden==word || strikesLeft==0)
            gameOver=true;

    }
    while(gameOver==false);

    if(strikesLeft==0)
    cout << "Game Over! You failed..." << endl;
    cout << "The word was " << word << "." << endl;

    if(strikesLeft>0)
    cout << "Congrats! You completed my game with " << strikesLeft << " strikes left." << endl;

    system("PAUSE");

}

int main(){

cout << "" << endl << endl << endl << endl << endl << endl << endl;
        cout << "                                  *WELCOME*" << endl;

        system("color 0c");

        Sleep(500);

        cout << "                              **TO**" << endl;

        system("color 0f");

        Sleep(500);

        cout << "                     ***PAB***";

        system("color 0a");

        Sleep(3000);

        system("cls");
        cout << "" << endl << endl << endl << endl << endl << endl << endl;

        cout << "                             P";
        Sleep(100);
        cout << "E";
        Sleep(100);
        cout << "R";
        Sleep(100);
        cout << "S";
        Sleep(100);
        cout << "O";
        Sleep(100);
        cout << "N";
        Sleep(100);
        cout << "A";
        Sleep(100);
        cout << "L";
        Sleep(1000);
        cout << " A";
        Sleep(100);
        cout << "W";
        Sleep(100);
        cout << "E";
        Sleep(100);
        cout << "S";
        Sleep(100);
        cout << "O";
        Sleep(100);
        cout << "M";
        Sleep(100);
        cout << "E";
        Sleep(1000);
        cout << " B";
        Sleep(150);
        cout << "O";
        Sleep(150);
        cout << "T";
        Sleep(2000);
        system("cls");

        system("color 08");

        cout << "Program loading.";
        Sleep(500);
        system("cls");
        cout << "Program loading..";
        Sleep(500);
        system("cls");
        cout << "Program loading...";
        Sleep(500);
        system("cls");
        cout << "Program loading.";
        Sleep(500);
        system("cls");
        cout << "Program loading..";
        Sleep(500);
        system("cls");
        cout << "Program loading...";
        Sleep(500);
        system("cls");
        cout << "Program loading.";
        Sleep(500);
        system("cls");
        cout << "Program loading..";
        Sleep(500);
        system("cls");

    srand(time(NULL));//seeds the random number generator. Do this before calling the randomInRange function
        string name;
        int friends;
        int DecimalArray[] = {1,2,3,4,5,22,555,85,18,741}; //Create an array of decimal numbers.

        system ("color 0f");

        cout << "Enter name:  ";
        cin >> name;
        cout << "Hi " << name << "." << " My name is PAB, your personal awesome bot." << endl; 

        cout << "Now tell me, how many friends do you have? " << endl;
        cin >> friends;

        if(friends >=75 && friends <300)
            cout << "Gee, " << friends << " friends is a lot. But you could always have one more...ME!!" << endl; 
        if(friends >300)
            cout << "Yeah, maybe on Facebook...But we should still be friends!" << endl;

        if(friends <75)
            cout << "Man, you totally need more friends. I can be one of them!" << endl;

        int randomNum=random_in_range(1,50);
        int numGuess;

        cout << "Now that we're friends, I want to play a game. Now, pick a number between 1 and 50\. " << endl;
        do{ //dowhile loop using "getting closer" for when your getting closer to the number
            cin >> numGuess;
            if(numGuess >50)
                cout << "Can you read? It clearly says between 1 and 50\. " << endl;
            if(numGuess >randomNum)
                cout << "That's too high guess again. " << endl;
            if(numGuess <randomNum)
                cout << "That's too low please guess again. " << endl;

        }while(numGuess !=randomNum);
        system("cls");
                cout << "Congratulations! You found out my number." << endl;
                cout << "Okay, I agree that was stupid. But, I have another game!" << endl << endl << endl;
        hangman();

        system("cls");
        cout << "Thanks for playing with me today! I hope you had fun." << endl;
        cout << "In the future I will have new games and jokes." << endl << endl << endl << endl << endl << endl;
        cout << "                                   THE END" << endl;

        Sleep(5000);

        system("cls");
        system("color 08");
        cout << "v1.7" << endl;
        cout << "[copyright]" << endl;
        cout << "Ethan MacCumber 2012" << endl;

    system("PAUSE");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:13:21.840

您的主要问题是您的代码并不完全是标准的 C++。您使用了仅在 Windows 上可用的 C++ 代码、windows.h 和 conio.h 头文件中的函数。这些头文件中的任何功能都无法在 Mac 上运行。

如果您希望您的代码在 Mac OS X 上运行，请注释掉 windows.h 和 conio.h 的包含。注释掉特定于 Windows 的标头的包含将产生大量编译器错误，这应该会告诉您特定于 Windows 的代码在哪里。摆脱那些代码并坚持使用标准 C++ 的代码，例如 cin 和 cout。快速浏览一下您的代码，对 Sleep() 和 System("cls") 的调用在 Mac 上不起作用。

# google-apps-script - GAS 中库的设计模式？

> ID：13575942
> 
> 赞同：2
> 
> 时间：2012-11-27T01:12:31.170
> 
> 标签：google-apps-script

一段时间以来，我一直在尝试找出编写 GAS 库的最佳方法，但我很难弄清楚。我阅读了 Douglas Crockford 的 - Javascript: The good parts，我正在尝试在 GAS 中实施这些课程。每个导入的库都会向您的项目（ScriptModule 类型）添加全局变量，因此[模块化设计模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)似乎是一个不错的起点。借用我链接到这种模式的文章可能如下所示：

```
var MODULE = (function () {
    var my = {},
        privateVariable = 1;

    function privateMethod() {
        // ...
    }

    my.moduleProperty = 1;
    my.moduleMethod = function () {
        // ...
    };

    return my;
}()); 
```

然后可以像这样调用这个模块：

```
var module = LibName.MODULE;
var property = module.moduleProperty; // 1
var method = module.moduleMethod; // ... 
```

据我所知，最好尽可能少地使用全局变量，因此一般建议似乎是将所有内容保存在一个全局变量中。因此，命名约定应如下所示：LibName.PROJECT_NAME，其中项目名称是您的单个全局变量的名称，该变量包含一个包含其他所有内容的模块。

我的目标是设计安全、不冲突的库。我使用这种设计模式是否正确？有没有人为 GAS 库开发了自己的健壮设计模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:28:15.650

当您在 GAS 中将脚本作为库导入时，已经为其创建了一个新的“命名空间”，因此您自己创建另一个脚本没有必要也没有好处。你必须像你一样“尊重”它：

```
//there's no purpose for this
var module = LibName.MODULE;
var method = module.method;

//comparing if you write code directly on the library
var method1 = LibName.method1; 
```

GAS 不是客户端 javascript，您学到的大部分内容并不真正适用于 Apps 脚本，例如没有 DOM、没有命名空间冲突、没有浏览器兼容性问题等。

顺便说一句，我认为这种对象嵌套结构甚至不适用于 Apps 脚本库。

# ruby-on-rails - Ajax Rails 3 更新属性

> ID：13575945
> 
> 赞同：0
> 
> 时间：2012-11-27T01:12:58.760
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms, radio-button

我有一个带有两个单选按钮的表单，每个按钮都有自己的值，如下所示：

```
<%= form_for @product, url: ship_df_product_path(@product), remote: true do |f| %>

    <td><%= radio_button_tag 'ship', @product.ship_df %> Envío dentro DF - $<%= @product.envio_df %> </td>

    <td><%= radio_button_tag 'ship', @product.ship_int %> Envío interior del país- $<%= @product.envio_int %></td>

        <%= f.text_field :shipping, :class => "span2", :style => "display:" %>

<% end %> 
```

问题是我需要更新@product 对象的“：shipping”属性，具体取决于单击了哪个。

我怎样才能做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:50:59.907

尝试使用 radio_button 标签

```
<td><%= f.radio_button 'ship', @product.ship_df %> Envío dentro DF - $<%= @product.envio_df %> </td>

<td><%= f.radio_button 'ship', @product.ship_int %> Envío interior del país- $<%= @product.envio_int %></td> 
```

# python - 如何从非连续集合中获取随机数？

> ID：13575952
> 
> 赞同：1
> 
> 时间：2012-11-27T01:13:34.083
> 
> 标签：python, random

我需要从数字中随机选择`[1, 4, 7, 9, 13, 42]`。

我不能使用`random.randint(1,42)`，因为它会给我一些介于两者之间的数字。如何仅从列表中的这些数字中进行选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T01:14:42.603

你想要`random.choice`。

```
import random
random.choice([1,4,7,9,13,42]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T01:15:12.500

我做了一些更多的研究，发现我可以使用`random.choice([1, 4, 7, 9, 13, 42])`，它会从列表中随机选择一个项目。

# python - AppEngine 从命令行测试用户服务

> ID：13575958
> 
> 赞同：1
> 
> 时间：2012-11-27T01:14:15.753
> 
> 标签：python, google-app-engine, protorpc

如何`user service`使用命令行测试`curl`？

假设我有一个`protoRPC`服务正在运行，并且我发出如下内容：

`curl -H 'content-type:application/json' -d '{"name":"test1"}' http://localhost:8080/api.context_create`

但此服务需要登录用户。如何模拟一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:17:03.760

看起来您需要分两步完成（有关详细信息，请参阅[此](http://johannilsson.com/2011/04/13/authenticated-requests-on-app-engine.html)链接）。首先是提交请求：

```
$ curl http://localhost:8000/_ah/login -d "email=youremail@here.com&action=Log+In" -c - 
```

响应将如下所示：

```
localhost FALSE / FALSE 0 dev_appserver_login "youremail@here.com:False:0123456789101112" 
```

然后，您可以使用提供的 cookie 向您的目标页面提交请求。在您的情况下（假设上面的 cookie），您可以尝试：

```
curl -H 'content-type:application/json' \
    -d '{"name":"test1"}' \
    -b "dev_appserver_login="youremail@here.com:False:0123456789101112"" \
    http://localhost:8080/api.context_create 
```

# meteor - 使用accounts-facebook时拉取并显示更多数据

> ID：13575962
> 
> 赞同：0
> 
> 时间：2012-11-27T01:14:37.493
> 
> 标签：meteor

我尝试在使用 accounts-ui + facebook 时从 facebook 提取更多数据，但由于某种原因，我无法提取/显示数据我尝试编辑 facebook_server.js 以提取电子邮件和年龄但没有成功另外尝试添加 Meteor.loginWithFacebook 功能，但仍然没有运气任何人都可以附上一个例子如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:56:02.093

这个答案可能会有所帮助，尽管它使用的是 Github 服务而不是 facebook。但是流程应该是一样的。

[Meteor 使用外部服务登录：如何获取个人资料信息？](https://stackoverflow.com/questions/13660219/meteor-login-with-external-service-how-to-get-profile-information/13870972#13870972)

# linux - Linux脚本cp更改文件名

> ID：13575963
> 
> 赞同：2
> 
> 时间：2012-11-27T01:14:41.590
> 
> 标签：linux, bash, cp, bin, recycle

我正在尝试制作一种回收箱。我有一个删除功能，它将所选文件发送到回收站，并将其存储的目录的位置添加到文件中。问题是当我使用 tail 从脚本中获取位置时。尽管该脚本有效，但它将文件重命名为tail。谁能解释为什么cp要重命名文件？这是我认为问题所在的片段：

```
destination=(tail $1 -n 1)
cp ~/Recycling/$1 $destination 
rm ~/Recycling/$1 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:20:59.127

你需要一个`$`括号前：

```
destination=$(tail $1 -n 1)
cp ~/Recycling/$1 $destination 
rm ~/Recycling/$1
sed -i '$d' $destination # this removes the last line from the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:21:03.537

您在`$`括号之前缺少 a ：

```
destination=$(tail $1 -n 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:21:18.477

你会想要

```
$(tail $1 -n 1) 
```

或者

```
`tail $1 -n 1` 
```

# jqzoom - 如何获得 jqzoom 绝对位置？

> ID：13575970
> 
> 赞同：1
> 
> 时间：2012-11-27T01:15:33.900
> 
> 标签：jqzoom

我正在尝试在我的页面上设置 JQzoom 的 zoompad 绝对定位。我确实尝试更改 CSS，但它不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:45:33.103

问题解决了，我找到了另一个图像缩放插件来解决位置需求。如果您想知道，该插件调用 Easyzoom。链接：[http ://cssglobe.com/jquery-plugin-easy-image-zoom/](http://cssglobe.com/jquery-plugin-easy-image-zoom/)

# grails - 确定 Spock 测试的执行顺序

> ID：13575972
> 
> 赞同：21
> 
> 时间：2012-11-27T01:15:40.647
> 
> 标签：grails, spock, geb

有没有办法设置在 Spock 规范中执行测试的顺序？

例如：

```
class MySpec extends IntegrationSpec {
    def 'test A'...

    def 'test B'...
} 
```

我希望始终在“测试 B”之前执行“测试 A”

这是因为我正在使用 Geb 和 Spock 进行一些功能测试，并且数据不会在测试之间回滚。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-27T04:56:26.110

您可以`@Stepwise`在规范上使用注释，并且 spock 将按照指定的顺序运行规范的每个测试定义。看看[这个例子](https://github.com/spockframework/spock-example/blob/master/src/test/groovy/StepwiseExtensionSpec.groovy)。

# xcode - 添加第二个应用程序 (iTunes Connect)

> ID：13575974
> 
> 赞同：0
> 
> 时间：2012-11-27T01:15:51.317
> 
> 标签：xcode, itunes

我最近将我的第一个 iPhone 应用程序上传到了 App Store，我正在考虑创建一个新应用程序。我想知道我需要创建哪些新东西才能提交。示例：捆绑 ID、证书或配置文件等。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:18:23.723

您将需要第一个应用程序所需的一切，除了您的分发证书是个人身份并且存在于您的钥匙串和门户中，因此您只需要其中一个（直到它过期，当您需要制作一个新的）。

如果我在这里为您制作一个小图表可能会有所帮助。

你：只有你们一个人，所以你只需要一张开发证和一张发行证。

APP：每个应用程序都有自己的捆绑 ID，如果您想将其提交到商店或以临时分发的形式分发，您需要告诉门户网站这是什么。

个人资料：个人资料将您和一个应用程序结合在一起。因此，它是该应用程序独有的，您需要为每个要分发的应用程序创建一个新的。**-- 例外：为方便起见，Apple 现在允许您使用单个团队开发配置文件**在设备上开发多种应用程序，其中 APP 实际上是通配符。但情况并非总是如此。过去，每个应用程序都需要一个新的开发配置文件，就像每个应用程序都需要一个新的分发配置文件一样。对于有特殊需求的应用程序，您可能仍需要仅针对该应用程序的开发配置文件。

# image - 根据 alt 标签使用 jquery 更改图像

> ID：13575981
> 
> 赞同：1
> 
> 时间：2012-11-27T01:16:59.990
> 
> 标签：image, alt

我正在使用 RSS 提要在我的网站上显示来自外部来源的天气。我希望能够将提要中的图像更改/替换为我自己的图像。唯一让每张图片独一无二的是它的 Alt 标签。

```
<p>
<b>Tuesday:</b>
<br>
<img alt="Sunny" src="http://www.weather.com.au/images/icons/1.gif">
<br>
Sunny. Warm.
<br>
20 - 28
<br>
</p> 
```

那么，有没有办法识别 Alt 标签是“Sunny”，并用我自己的一个替换这个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:20:14.520

不要害怕参考[手册](http://api.jquery.com/attribute-equals-selector/)。

```
$('img[alt="Sunny"]').attr('src', someUrl); 
```

# context-free-grammar - 非上下文无关语言，它们是什么？

> ID：13575986
> 
> 赞同：1
> 
> 时间：2012-11-27T01:17:58.977
> 
> 标签：context-free-grammar, turing-machines

我在理解非上下文无关语言时遇到了很多麻烦。简单地说，它们是递归可枚举的吗？例如，可以使用图灵机来表示非上下文无关语言吗？它甚至可以被图灵机识别或共同识别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:27:19.430

许多非上下文无关语言都是递归的。考虑`(a^n)(b^n)(c^n)`；用于这种语言的简单图灵机可以在磁带上来回运行，一次删除每个符号中的一个，直到所有符号都被删除或者它先用完一种符号。递归语言也是递归可枚举的。

Chomsky 层次结构是规则的、上下文无关的、上下文相关的、递归的（大致）。在此之外还有一些级别，甚至还有介于这些规范级别之间的级别。

# apache - 如何在 Ubuntu 12.10 中创建虚拟主机

> ID：13575987
> 
> 赞同：5
> 
> 时间：2012-11-27T01:18:00.427
> 
> 标签：apache, ubuntu, virtualhost

我关注了很多关于“如何在 Ubuntu 中创建 VirtualHost”的文章。这就是我所做的

**安装阿帕奇**

```
sudo apt-get  install lamp-server^ phpmyadmin 
```

我创建了名为`site1.com`/var/www/ 的文件夹

然后我在`/etc/apache2/sites-available/site1.com`

然后将以下代码添加到该`site1.com`文件

```
<VirtualHost *:80>
    ServerName www.site1.com
    ServerAdmin mifas@site1.com
    ServerAlias site1.com
    DocumentRoot /var/www/site1.com

    # Other directives here
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    <Directory /var/www/site1.com/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride all
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

然后之后我编辑主机文件添加了以下代码行

```
127.0.0.1   site1.com 
```

**编辑** 另外我通过启用site1.com`sudo a2ensite site1.com`

然后我重新启动apache服务。（即使我重新启动了电脑）

当我访问 site1.com 时，它会显示`The connection has timed out`错误消息。但我可以通过`localhost/site1.com`. 从前两天开始我一直在尝试。没有解决方案。并关注了许多文章和视频。

# node.js - 打开后立即关闭mongo / mongolian连接？

> ID：13575988
> 
> 赞同：0
> 
> 时间：2012-11-27T01:18:02.193
> 
> 标签：node.js, mongodb

打开连接后无法立即关闭连接尝试了 db.server.close() 和 server.close()

```
var Mongolian = require("mongolian");
var server = new Mongolian;
var db = server.db("database");
var shops = db.collection("collection");
db.server.close();
server.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:52:09.123

```
var Mongolian = require("mongolian");
var server = new Mongolian();
var database = server.db("database")
var db = {
    collection: database.collection("collection"),
};

db.collection.find({},{"id":1}).limit(1).toArray(function(err, array){
    console.log(array);
    server.close();
}); 
```

在您提出请求之前，您无法关闭 mongo，然后`server.close()`就可以了。

# php - 解析带引号的 PHP 字符串

> ID：13575993
> 
> 赞同：1
> 
> 时间：2012-11-27T01:18:36.327
> 
> 标签：php, regex, parsing

我想解析如下字符串：

```
'serviceHits."test_server"."http_test.org" 31987' 
```

成一个数组，如：

```
[0] => serviceHits
[1] => test_server
[2] => http_test.org
[3] => 31987 
```

基本上我想分割点和空格，将引号内的字符串视为单个值。

这个字符串的格式不固定，这只是一个例子。它可能包含不同数量的元素，在不同的地方带有引号和数字元素。

其他字符串可能如下所示：

```
test.2 3                       which should parse to [test|2|3]
test."342".cake.2 "cheese"     which should parse to [test|342|cake|2|cheese]
test."red feet".3."green" 4    which should parse to [test|red feet|3|green|4] 
```

有时 oid 字符串可能包含一个引号，如果可能的话应该包含它，但它是解析器中最不重要的部分：

```
test."a \"b\" c" "cheese face" which should parse to [test|a "b" c|cheese face] 
```

我正在尝试以一种通用的方式从对 OID 应该是什么样子有不同想法的人编写的代理中解析 SNMP OID 字符串。

将 oid 字符串（用点分隔的位）返回值（最后一个值）解析为单独的命名数组会很好。在解析字符串之前简单地分割空间是行不通的，因为 OID 和值都可以包含空格。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:30:55.187

我同意这很难找到一个正则表达式来解决这个问题。

这是一个完整的解决方案：

```
$results = array();
$str = 'serviceHits."test_\"server"."http_test.org" 31987';

// Encode \" to something else temporary
$str_encoded_quotes = strtr($str,array('\\"'=>'####'));

// Split by strings between double-quotes
$str_arr = preg_split('/("[^"]*")/',$str_encoded_quotes,-1,PREG_SPLIT_DELIM_CAPTURE);

foreach ($str_arr as $substr) {

    // If value is a dot or a space, do nothing
    if (!preg_match('/^[\s\.]$/',$substr)) {

        // If value is between double-quotes, it's a string
        // Return as is
        if (preg_match('/^"(.*)"$/',$substr)) {
            $substr = preg_replace('/^"(.*)"$/','\1',$substr); // Remove double-quotes around
            $results[] = strtr($substr,array('####'=>'"'));    // Get escaped double-quotes back inside the string

        // Else, it must be splitted
        } else {
            // Split by dot or space
            $substr_arr = preg_split('/[\.\s]/',$substr,-1,PREG_SPLIT_NO_EMPTY);
            foreach ($substr_arr as $subsubstr)
                $results[] = strtr($subsubstr,array('####'=>'"')); // Get escaped double-quotes back inside string
        }
    }
    // Else, it's an empty substring
}

var_dump($results); 
```

使用您所有的新字符串示例进行了测试。

**第一次尝试（旧）**

使用 preg_split ：

```
$str = 'serviceHits."test_server"."http_test.org" 31987';

// -1 : no limit
// PREG_SPLIT_NO_EMPTY : do not return empty results
preg_split('/[\.\s]?"[\.\s]?/',$str,-1,PREG_SPLIT_NO_EMPTY); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T01:52:18.443

最简单的方法可能是用占位符替换字符串中的点和空格，拆分，然后删除占位符。像这样的东西：

```
$in = 'serviceHits."test_server"."http_test.org" 31987';

$a = preg_replace_callback('!"([^"]*)"!', 'quote', $in);
$b = preg_split('![. ]!', $a);
foreach ($b as $k => $v) $b[$k] = unquote($v);

print_r($b);

# the functions that do the (un)quoting

function quote($m){
    return str_replace(array('.',' '),
      array('PLACEHOLDER-DOT', 'PLACEHOLDER-SPACE'), $m[1]);
}
function unquote($str){
    return str_replace(array('PLACEHOLDER-DOT', 'PLACEHOLDER-SPACE'),
      array('.',' '), $str);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T04:49:12.800

这是一个适用于所有测试样本（加上我自己的一个）的解决方案，并允许您转义引号、点和空格。

由于需要处理转义码，因此实际上不可能进行拆分。

尽管可以想象一个正则表达式将整个字符串与 '()' 匹配以标记单独的元素，但我无法使用`preg_match`or使其工作`preg_match_all`。

相反，我逐步解析字符串，一次提取一个元素。然后我使用`stripslashes`unescape 引号、空格和点。

```
<?php

$strings = array
(
    'serviceHits."test_server"."http_test.org" 31987',
    'test.2 3',
    'test."342".cake.2 "cheese"',
    'test."red feet".3."green" 4',
    'test."a \\"b\\" c" "cheese face"',
    'test\\.one."test\\"two".test\\ three',
);

foreach ($strings as $string)
{
    print"'{$string}' => " . print_r(parse_oid($string), true) . "\n";
}

/**
 * parse_oid parses and OID and returns an array of the parsed elements.
 * This is an all-or-none function, and will return NULL if it cannot completely
 * parse the string.
 * @param string $string The OID to parse.
 * @return array|NULL A list of OID elements, or null if error parsing.
 */
function parse_oid($string)
{
    $result = array();
    while (true)
    {
        $matches = array();
        $match_count = preg_match('/^(?:((?:[^\\\\\\. "]|(?:\\\\.))+)|(?:"((?:[^\\\\"]|(?:\\\\.))+)"))((?:[\\. ])|$)/', $string, $matches);
        if (null !== $match_count && $match_count > 0)
        {
            // [1] = unquoted, [2] = quoted
            $value = strlen($matches[1]) > 0 ? $matches[1] : $matches[2];

            $result[] = stripslashes($value);

            // Are we expecting any more parts?
            if (strlen($matches[3]) > 0)
            {
                // I do this (vs keeping track of offset) to use ^ in regex
                $string = substr($string, strlen($matches[0]));
            }
            else
            {
                return $result;
            }
        }
        else
        {
            // All or nothing
            return null;
        }
    } // while
} 
```

这会生成以下输出：

```
'serviceHits."test_server"."http_test.org" 31987' => Array
(
    [0] => serviceHits
    [1] => test_server
    [2] => http_test.org
    [3] => 31987
)

'test.2 3' => Array
(
    [0] => test
    [1] => 2
    [2] => 3
)

'test."342".cake.2 "cheese"' => Array
(
    [0] => test
    [1] => 342
    [2] => cake
    [3] => 2
    [4] => cheese
)

'test."red feet".3."green" 4' => Array
(
    [0] => test
    [1] => red feet
    [2] => 3
    [3] => green
    [4] => 4
)

'test."a \"b\" c" "cheese face"' => Array
(
    [0] => test
    [1] => a "b" c
    [2] => cheese face
)

'test\.one."test\"two".test\ three' => Array
(
    [0] => test.one
    [1] => test"two
    [2] => test three
) 
```

# c# - Windows Phone 8 Geolocator 在模拟器上返回虚假位置

> ID：13575996
> 
> 赞同：4
> 
> 时间：2012-11-27T01:18:43.987
> 
> 标签：c#, windows-phone, windows-phone-8, windows-phone-8-emulator

我试图在 xaml windows phone 8 应用程序中显示我的位置。但总是当我试图找到我当前的位置时，我会得到假的微软位置，即使使用默认的地图应用程序也是如此。例如，上面的代码总是返回相同的纬度和经度：

```
Geolocator locator = new Geolocator();
locator.DesiredAccuracy = PositionAccuracy.High;
Geoposition position = await locator.GetGeopositionAsync();
LatitudeValue.Text = position.Coordinate.Latitude.ToString("0.00");
LongitudeValue.Text = position.Coordinate.Longitude.ToString("0.00"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T02:13:52.873

Windows Phone 8 模拟器的右上角有一个小工具栏。底部按钮是双 V 形（如“>>”） - 如果单击它会显示“其他工具”，其中一个选项卡是“位置”。您可以双击地图在模拟器中设置您的位置，还可以记录和回放已行驶的路线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T10:37:25.323

如果我在地图上添加一个图钉，然后调用

```
await locator.GetGeopositionAsync(); 
```

无论我选择了哪个当前位置，它总是返回 Microsoft 的坐标（47.643318，-122.141937）。

它看起来像一个错误还是我错过了什么？有其他人遇到这种情况吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T09:17:49.740

关于 Microsoft HQ 位置错误，有一个变通方法。

如果你设置：

```
geoLocator = new Geolocator
                             {
                                 DesiredAccuracy = PositionAccuracy.High
                             }; 
```

它将显示您在模拟器附加工具中设置的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:46:49.147

模拟器总是返回一个虚假的位置。正如 gregstoll 所提到的，您可以控制它应该报告哪个“假”位置。使用内置 API 无法获取真实位置。

# mysql - 使用 IN 和 GROUP BY 运行 MySQL 查询非常慢

> ID：13575997
> 
> 赞同：2
> 
> 时间：2012-11-27T01:18:45.110
> 
> 标签：mysql, sql, performance, greatest-n-per-group

我正在尝试构建一个页面，其中显示成员收到的消息列表。我想出了这个 mySQL 查询，但它运行得非常慢。执行它至少需要 10 秒。

```
SELECT senderid,
       receiverid
FROM   messages
WHERE  ( receiverid, sentdate ) IN (SELECT receiverid,
                                           Max(sentdate)
                                    FROM   messages
                                    WHERE  receiverid = '1'
                                    GROUP  BY senderid)
ORDER  BY sentdate DESC 
```

这是我正在使用的数据库：

```
`autoID` mediumint(11) 无符号 NOT NULL AUTO_INCREMENT
`senderID` mediumint(11) 无符号 DEFAULT '0'
`receiverID` mediumint(11) unsigned DEFAULT '0'
`sentDate` 日期时间默认 '0000-00-00 00:00:00'
`消息`长文本
主键（`autoID`）
KEY `receiverID` (`receiverID`)
KEY `senderID` (`senderID`)
```

该数据库只有 150,000 个条目。我正在运行我自己的专用服务器，上面只有那个 mySQL 数据库。

任何帮助是极大的赞赏。

G-Nugget，我在 sentDate 上添加了一个索引，但速度没有增加。这是解释（对不起，显示的方式。不知道我还能怎么做）：

id:1
select_type:PRIMARY
table:messages
type:ALL
possible_keys:null
keys:null
key_len:null
ref:null
rows:149433
Extra:Using where; 使用文件排序

id:2
select_type:DEPENDENT SUBQUERY
table:messages
type:ref
possible_keys:receiverID
key:receiverID
key_len:4
ref:const
rows:20
Extra:Using where; 使用临时的；使用文件排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:14:14.937

这个查询如何产生你提到的结果集？

```
SELECT m.senderid,
       m.receiverid
  FROM messages m
  JOIN (
            SELECT  max(autoID) autoID, 
                    receiverID, SenderID
              FROM  messages
          GROUP BY  receiverId, SenderID
       ) X on m.autoID = x.AutoId
  WHERE m.receiverId = '1'
  ORDER BY m.autoID desc 
```

这利用了 autoID 和 sentdate 很可能都随着时间的推移单调增加的假设。它在每对不同的发送者/接收者之间提取最新消息的 ID，然后使用这些 ID 选择要显示的消息表的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:43:56.070

在 MySQL 中，子查询`in`没有正确优化。您的查询有点复杂。我认为这是编写查询的有效方法：

```
SELECT senderid,
       receiverid
FROM   messages m
WHERE  m.receiverid = '1' and
       exists (SELECT 1
               FROM   messages m1
               WHERE  m1.receiverid = '1'
               GROUP  BY m1.senderid
               having max(sentdate) =  m.sentdate)
ORDER  BY sentdate DESC 
```

您的查询似乎正在尝试从每次发送到“1”获取最新消息。一个更简单的版本可能是：

```
select senderid, receiverid
from messages m
where m.receiverid = '1' 
```

也就是说，每个发件人 ID 都将包含在您的原始查询中，因为它们最近的发送日期将匹配`in`条件。您可以有两个日期和时间完全相同的发件人。是否需要显示此类重复项？

# crystal-reports - Crystal Reports - 删除多余的记录

> ID：13575998
> 
> 赞同：0
> 
> 时间：2012-11-27T01:18:51.600
> 
> 标签：crystal-reports

今天是个好日子。我想寻求有关使用 Crystal Reports 打印记录的帮助。

我的目标是打印报告中的所有记录。问题是当我只有两三条记录的时候，表格还是会打印一个空格来强行展开成一整页。

我所做的是将所有参数手动放置在表单中，并在 Crystal Reports 设计器中添加一个内置的记录号参数。我加载了一个没有任何内容的虚拟记录。现在，当我运行一个只有两到三个记录的报告时，我有这个输出。

![我的交货收据只有一条记录。](../Images/469b965207e1073c051567a459a0a8a2.png)

我将如何解决这个问题？我只能在互联网上找到关于缩小而不是扩大的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:12:05.733

在 Section Expert 中，选中“Suppress Blank Section”。希望有帮助

# grails - 使用 Geb 在测试之间保持会话

> ID：13575999
> 
> 赞同：1
> 
> 时间：2012-11-27T01:19:06.653
> 
> 标签：grails, geb

我正在使用 Geb 测试我的应用程序，并且我想在测试之间保持会话，这样我就可以避免登录每个测试（在浏览器中观看测试时这很烦人）。

有没有办法维持会话？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T14:07:34.290

默认情况下，Geb 测试集成会在每次测试后清除所有 cookie，这意味着您会丢失 Web 会话。您可以通过在 GebConfig.groovy 中使用[以下配置选项](http://www.gebish.org/manual/current/configuration.html#auto_clearing_cookies)轻松更改该行为：

```
autoClearCookies = false 
```

[您可以在此处](http://www.gebish.org/manual/current/configuration.html)阅读有关使用配置的更多信息。

所以是的，可以在测试之间保持会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T07:01:46.273

如果您使用 Spock，您可以做的一个选择是以线性方式构造您的“功能”（测试方法）并在类上使用 @Stepwise 注释。这将确保 cookie 和浏览器对象不会在功能/测试方法之间重置/替换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:21:11.050

是的，现在不可能了。我的规范以登录开始，以注销结束。