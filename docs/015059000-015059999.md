# StackOverflow 问答 15059000-15059999

# c++ - 策略模式 C++

> ID：15059004
> 
> 赞同：2
> 
> 时间：2013-02-25T01:59:32.630
> 
> 标签：c++, design-patterns

我想在 C++ 中实现策略模式，但我有疑问。Alwyas 策略模式示例比遵循代码（在 C# 中）。我想修改客户端，即MainClass，这样选择具体的策略将是动态的方式。例如，通过 main 方法的 args[] 参数传递策略名称。我将如何在不修改此模式的属性的情况下实现这一点？

```
namespace StrategyPatterns
{ 
  // Interface definition for a Sort algorithm
  public interface ISort
  {
  void Sort(List<string> list)
  }

  // QuickSort implementation
  public class CQuickSorter : ISort
  {
    void Sort(List<string> list)
    {
      // Here will come the actual imp
    }
  }

   // BubbleSort
  public class CBubbleSort : ISort
  {
    void Sort(List<string> list)
    {
      // The actual imp of the sort
    }
  }

  public class Context
  {
   private ISort sorter;

   public Context(ISort sorter)
   {
     // We pass the context the strategy to use
     this.sorter = sorter;
   }

public ISort Sorter
 {
  get{return sorter;)
 }
}

public class MainClass
{
    static void Main()
     {
       List<string> myList = new List<string>();

       myList.Add("Hello world");
       myList.Add("Another item");

       Contexto cn = new Contexto(new CQuickSorter());
       cn.Sorter.Sort(myList);
       cn = new Contexto(new CBubbleSort());
       cn.Sorter.Sort(myList);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:06:41.860

我们在 C++ 中没有反射，这是你需要让它正常工作的概念。我能想到的替代方法是制作一个工厂方法，如下所示。

```
ISort* CreateSorter(SortType type)
{
    switch (type){
    case QUICK_SORT: return new CQuickSorter();
    ...
    }
} 
```

我使用`enum`更简洁的代码，但您可以将其更改为字符串，只要您能够理解我的基本观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T20:20:47.303

我会给上下文类一个模板化的工厂函数`setSorter`，并在内部处理排序器对象的整个生命周期。

```
class Interface {  //this class and all sorting clases could be templated to be able to deal with sorting lists of different data types
    std::unique_ptr<ISort> sorter_;
public:
    Interface():sorter_(new CQuickSorter()){ //CQuickSorter is the default sorter
    }
    template<typename T>
    setSorter(){    //one could also use perfect forwarding to pass arguments to T's constructor
        sorter_.reset(new T());
    }
    void sort(std::list<string> &list){
        sorter_->sort(list); 
    }
};

int main(){
    std::list<int> li;
    Interface cn;
    cn.sort(li);  //using a default sort
    cn.setSorter<CBubbleSort>();
    cn.sort(li);  //using bubble sort
} 
```

# python - wx.python 如何获取主帧列表到第二帧的更新值？

> ID：15059007
> 
> 赞同：0
> 
> 时间：2013-02-25T02:00:21.420
> 
> 标签：python, frame

打开我的应用程序后，会有一个按钮打开第二个框架。所以我想告诉我的第二个框架根据一个列表来获取信息，该列表的值将由主框架附加到。
**例如**
在主框架中，有`self.pubID`一个动作后，我将一个数字附加到该列表中。之后我打开第二帧，但它没有获取我附加的值，这意味着它无法从该列表中获取更新的信息。谢谢你的帮助。我知道我提供的代码看起来很糟糕，但整个脚本可能很长而且上传时容易混淆，所以我希望它能显示一些东西。

```
class MyFrame(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title)
        panel = wx.Panel(self, -1)

    def OnSelect(self, event):        
        item = event.GetSelection()
        del self.pubID[:]
        self.pubID.append(item)
    def onInsert(self, event):
            self.Lin = InLink("Insert")
            self.Lin.Show()
class InLink(wx.Frame):
    def __init__(self,title):
        wx.Frame.__init__(self, None, title=title, pos=(150,150), size=(200,200))    
        panel = wx.Panel(self) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:53:36.667

如果我理解正确，`InLink`需要知道里面是什么`MyFrame.pubID`。这个问题有一个简单的解决方案：将它传递给你的构造函数。所以你`InLink.__init__()`变成了这样：

```
class InLink(wx.Frame):
    def __init__(self,title, pubID):
        #now you can easily get the value from pubID
        ... 
```

但是，我认为您在他们的代码中还存在一些问题。我发表了一条评论，要求您更详细地解释您想要做什么。通过阅读您的问题，我*认为*您想`InLink`返回一些`MyFrame`将使用的值。它是否正确？如果是这样，`wx.Frame`您应该使用 a而不是使用`wx.Dialog`. 这是关于[s](https://stackoverflow.com/a/10522076/1369712)[的先前 SO 帖子`wx.Dialog`](https://stackoverflow.com/a/10522076/1369712)。该答案包含指向其他教程的链接，可帮助您入门。

# php - preg_replace 用变量替换字符串的一部分

> ID：15059008
> 
> 赞同：1
> 
> 时间：2013-02-25T02:00:25.363
> 
> 标签：php, regex, preg-replace

我有一个看起来有点像这样的字符串：

```
$string = 'var1=foo&var2=bar&var3=blahblahblah&etc=etc'; 
```

我想从中创建另一个字符串，并用一个值替换它，例如它看起来像这样

```
$newstring = 'var1=foo&var2=bar&var3=$myVariable&etc=etc'; 
```

所以新字符串中的 var3 将是`$myVariable`.

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:08:16.920

不需要正则表达式；内置的 URL 函数应该更可靠地工作。

```
// Parse the url first
$url = parse_url($string);

// Parse your query string into an array
parse_str($url['query'], $qs);

// Replace the var3 key with your variable
$qs['var3'] = $myVariable;

// Convert the array back into a query string
$url['query'] = http_build_query($qs);

// Convert the $url array back into a URL
$newstring = http_build_url($url); 
```

签出[`http_build_query`](http://www.php.net/http_build_query)和[`parse_str`](http://php.net/parse_str)。即使没有，这也会附加一个 var3 变量，它会 URL encode `$myVariable`，并且它比 using 更具可读性`preg_replace`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:07:16.337

您可以使用该方法[`preg_replace`](http://php.net/manual/de/function.preg-replace.php)。这里有一个例子

```
<?php

$string = 'var1=foo&var2=bar&var3=blahblahblah&etc=etc';
$var = 'foo';

echo preg_replace('/var3=(.*)&/', 'var3=' . $var . '&', $string); 
```

# hash - 如何对基于路径的数据进行建模

> ID：15059012
> 
> 赞同：0
> 
> 时间：2013-02-25T02:00:49.257
> 
> 标签：hash, redis, set

我需要在 redis 中对数据进行建模，其中键是文件路径，并且每个路径都有 N 个键/值。

我目前正在使用哈希对数据进行建模。

```
HSET /products/clothes/pants/501-jeans "title" "Levi 501 Jeans" 
```

这很好用，但是我希望能够获得所有“裤子”哈希“孩子”的列表。我可以通过

```
KEYS /products/clothes/pants/* 
```

但是， [redis 文档](http://redis.io/commands/keys)状态`KEYS pattern`不应在生产中使用。

我正在考虑创建一个与哈希相关的所有“路径”的集合，但我仍然不确定如何/是否可以搜索这些。

关于如何最好地建模此类数据的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:38:36.910

这是我对数据建模的方式，它似乎工作得很好。

```
resources::/path/foo => Redis Hash of Resource data
resources::/path/foo/bar => Redis Hash of Resource data
resources::/path/foo/cat => Redis Hash of Resource data
resources::/path/foo/cat/dog => Redis Hash of Resource data

children::/path/foo => Redis Map [ /path/foo/bar, /path/foo/cat/, /path/foo/dog ]
children::/path/foo/bar => Redis Map [ /path/foo/bar, /path/foo/cat ]
children::/path/foo/bar/cat => Redis Map [ /path/foo/dog ] 
```

每当我添加/删除**资源:: 键**时，我都必须管理**孩子:: 地图**

 **我选择建模**children::**使用 Redis**映射**，因此不可能有重复的路径键，但是使用列表也可以工作（易于**

# hive - 什么会导致 Hive 的 where 子句不起作用？

> ID：15059013
> 
> 赞同：1
> 
> 时间：2013-02-25T02:00:54.133
> 
> 标签：hive

我有这个看似简单的查询。

```
SELECT
     table1.one 
FROM 
    (SELECT
       user, 
       1 AS one
    FROM 
       users
    WHERE date=${hiveconf:TODAY}
    DISTRIBUTE BY user.id
    SORT BY user.id
    ) table1
WHERE table1.one < 0; 
```

令人惊讶的是，这会返回表中的所有行`users`：

```
Execution completed successfully
Mapred Local Task Succeeded . Convert the Join into MapJoin
OK
1
1
1 
```

由于 table1.one 显然是 1，因此 table1.one < 0 是错误的，我希望不会返回任何行。怎么会这样？

**编辑：** 当我将 table1.one < 0 添加到 select 子句时，我得到

```
Mapred Local Task Succeeded . Convert the Join into MapJoin
OK
1   false
1   false
1   false 
```

**第二次编辑：**
删除 WHERE date=${hiveconf:TODAY} （这是不必要的，因为那是一个分区属性）修复了这种奇怪的行为。不知道是什么原因。

# c# - 以共享形式引用本地设置

> ID：15059021
> 
> 赞同：0
> 
> 时间：2013-02-25T02:02:27.110
> 
> 标签：c#, .net, vb.net

在 .NET 4 winforms 中，我有一个包含多个项目的解决方案。在其中两个项目中，我想记住每个表单的表单设置，所以我让每个表单都继承自“CustomForm”，它保存和加载位置、大小等设置类，使用生成表单的名称作为参考。

作为参考，`CustomForm`代码如下所示：

```
Public Class CustomForm : Inherits Form

    Private ReadOnly Property SuidenSettings As My.MySettings
        Get
            Return My.MySettings.Default
        End Get
    End Property

    ''' <summary>
    ''' Restore the window settings from the settings file
    ''' </summary>
    ''' <remarks></remarks>
    Public Sub RestoreSettings() Handles MyClass.Load

        Dim state As FormWindowState
        Dim settings As List(Of String) = SuidenSettings.Properties.Cast(Of SettingsProperty).Where(Function(p) p.Name.StartsWith(Me.Name)).Select(Function(p) p.Name).ToList()
        Dim primaryWorkArea As Rectangle = Screen.PrimaryScreen.WorkingArea

        ' Make sure each setting exists before accessing or exceptions will fly
        If settings.Any() Then
            If settings.Contains(Me.Name & "_Location") Then
                Me.Location = CType(SuidenSettings(Me.Name & "_Location"), Point)
            End If

            If settings.Contains(Me.Name & "_Size") Then
                Me.Size = CType(SuidenSettings(Me.Name & "_Size"), Size)
            End If

            If settings.Contains(Me.Name & "_State") Then
                If [Enum].TryParse(SuidenSettings(Me.Name & "_State").ToString(), state) Then
                    Me.WindowState = state
                Else
                    Me.WindowState = FormWindowState.Normal
                End If
            End If
        End If

        ' Verify that the form is actually positioned on screen, otherwise position it on the primary screen
        If Not IsOnScreen() Then
            Me.Location = New Point(Me.Location.X Mod primaryWorkArea.Width, Me.Location.Y Mod primaryWorkArea.Height)
            If Not primaryWorkArea.Contains(New Rectangle(Me.Location, Me.Size)) Then
                Me.Location = New Point(primaryWorkArea.Top, primaryWorkArea.Left)
            End If
        End If

    End Sub

    ''' <summary>
    ''' Save the form settings to the settings file
    ''' </summary>
    Public Overridable Sub SaveSettings() Handles MyClass.FormClosed

        Dim settings As List(Of String) = SuidenSettings.Properties.Cast(Of SettingsProperty).Where(Function(p) p.Name.StartsWith(Me.Name)).Select(Function(p) p.Name).ToList()

        ' Make sure each setting exists before accessing or exceptions will fly
        If settings.Any() Then
            If settings.Contains(Me.Name & "_Location") Then
                SuidenSettings(Me.Name & "_Location") = Me.Location
            End If

            If settings.Contains(Me.Name & "_Size") Then
                SuidenSettings(Me.Name & "_Size") = Me.Size
            End If

            If settings.Contains(Me.Name & "_State") Then
                SuidenSettings(Me.Name & "_State") = Me.WindowState
            End If
            Call SuidenSettings.Save()
        End If

    End Sub

    ''' <summary>
    ''' Check if the form is at least partially visible on screen
    ''' </summary>
    ''' <returns>True if the form is partially visible on screen, else false</returns>
    Private Function IsOnScreen() As Boolean

        Dim formRectangle As Rectangle = New Rectangle(Me.Location, Me.Size)

        Return Screen.AllScreens.Any(Function(s) s.WorkingArea.IntersectsWith(formRectangle))

    End Function

End Class 
```

当我仍然有一个项目并且效果很好时，我使用了这种方法。现在，我不得不复制该项目来运行两个（并排略有不同的程序 - 请不要问我为什么必须这样做，我只是不得不这样做）。因此，我取出了该`CustomForm`对象并将其放在一个单独的项目中，我在两个应用程序项目中都引用了该项目。

我现在遇到的问题是我不知道如何修改`CustomForm`代码，以便它引用一个设置文件，该文件是使用表单的项目的本地文件，而不是共享项目中的设置文件.

由于使用表单名称检索表单设置并且两个项目实际上相同，因此所有表单都具有相同的名称。我想避免将项目中的所有表单重命名为稍微不同的名称，而是从项目本地的设置文件中加载设置。那可能吗？

C# 或 VB.NET 中的任何答案都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:32:38.840

您可以重构代码以也使用应用程序可执行路径。

例如：

```
If settings.Contains(Application.ExecutablePath & "_" & Me.Name & "_Location") Then
    SuidenSettings(Application.ExecutablePath & "_" & Me.Name & "_Location") = Me.Location
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:32:48.557

Derek Thomas 的回答让我走上了正轨。我想我可以`Me.GetType().Assembly.GetName().Name`在`CustomForm`返回实例所在程序集名称的类中使用。然后我可以重新设置我的设置以包括程序集 + 表单名称。

这不是我所要求的，但它确实起到了我猜想的作用。

# php - 使用超链接更新数据库

> ID：15059025
> 
> 赞同：4
> 
> 时间：2013-02-25T02:02:55.927
> 
> 标签：php, javascript, mysql, ajax

我想知道是否可以使用超链接更新数据库。在我的网站上，我正在尝试更新用户在游戏世界中的位置。位置由数值表示。

前任：

1 = 营地
2 = 城镇
3 = 森林

为此，我创建了一个 PHP 函数：

```
function updatePlayerLocation($location)
{
    mysql_query("UPDATE ss_character SET location='$location' WHERE id='".$_SESSION['id']."'");
} 
```

然后在链接的 onClick 函数上调用该函数，如下所示：

```
echo "<a href=\"play.php?p=location_0\" onclick='updatePlayerLocation(0)'>" . $possibleLocations[0] . "</a><br />"; 
```

$possibleLocations 数组包含用户可以在的所有位置，范围从 0 到 10。

该链接在加载页面时似乎工作，它只是不执行 MySQL 查询。我之前的研究建议使用 AJAX，但由于页面需要刷新，我想知道是否有替代方法。

感谢您的时间和建议！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:03:13.713

首先，您需要验证输入，并且您的代码对[**sql injection**](http://en.wikipedia.org/wiki/SQL_injection)是脆弱的。检查[**如何防止 PHP 中的 SQL 注入？**](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)

所以考虑到这一点，这里有一个 PDO 脚本，它做同样的事情，我意识到它更长，但如果需要，你可以将它用作一个类，因为这只是一个示例。

```
<?php

// create connection to database
$conn = new PDO('mysql:dbname=DATABASE_NAME;host=localhost;port=3306', USERNAME, PASSWORD);

// prepare query
$pdo = $conn->prepare("UPDATE ss_character SET location = :location WHERE id = :session_id");

// set up parameters
$params = ['location' => (int)$_POST['location'], 'session_id' => $_SESSION['id']];

// loop through the paramaters to determine the type
foreach ($params as $key => $value) {

    switch ($value) {

        case is_int($value):
            $param = PDO::PARAM_INT;
            break;

        case is_bool($value):
            $param = PDO::PARAM_BOOL;
            break;

        case is_null($value):
            $param = PDO::PARAM_NULL;
            break;

        default:
            $param = PDO::PARAM_STR;
            break;
    }

    // bind paramter to query
    $pdo->bindValue(":$key", $value, $param);
}

// execute the query
$result = $pdo->execute($params);

// echo result for ajax
echo ($result) ? true : false; 
```

你会想要一些jQuery来做你的ajaxing，这样页面就不会被迫重新加载

```
<script>

    function updatePlayerLocation(location) {

        // ensure location is numeric or stop
        if !isNaN(location) return false;

        // update location via ajax
        $.ajax({
            url: 'http://your_url/to/php/script.php',
            type: 'POST',
            data: 'location=' + location,
            success: function(data) {
                // log result to console for error trapping purposes
                console.log(data);
            }
        });

        // stop link from being processed
        return false;

    }

</script> 
```

HTML 当然会包括[jQuery](http://jquery.com/)、上面的脚本和至少一个链接：

```
<a href="#" onclick="return updatePlayerLocation(0);">Location name</a><br /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:02:47.610

通过单击超链接，您正在服务器上执行 GET 请求。由于您已经在 get 请求中发送了一个参数，因此您可以在 PHP 代码中执行以下操作：

```
if(isset($_GET['p'])){ 
    $location = $_GET['p'];
    $number = preg_replace("/[^0-9]/", '', $location);
    updatePlayerLocation(intval($number));
} 
```

请注意，这将在每次刷新网页时运行，因此建议将上述代码放在另一个 PHP 页面中，然后使用与之前传递的相同参数重定向到 play.php。

# php - 单击图像时更改下拉选择的值

> ID：15059026
> 
> 赞同：0
> 
> 时间：2013-02-25T02:02:58.423
> 
> 标签：php, javascript, jquery, sql

单击图像时如何更改选择选项的值？我有一个下拉列表，其中填充了数据库中的日期，我也有左右两个图像，因此单击左侧时 - 选择上一个日期，单击右侧时使用列表中的下一个日期。

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:13:05.987

Setting the id of the populated drop down list to be "ddl", and the onClick events for the images to the corresponding functions, this Javascript should do it:

```
var ddl =  document.getElementById("ddl");

function leftImageClicked(){
    if(ddl.selectedIndex > 0) ddl.selectedIndex -= 1;
}

function rightImageClicked(){
    if(ddl.selectedIndex < ddl.length - 1) ddl.selectedIndex += 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:53:58.610

在 JSFiddle 中创建的全功能示例：http: [//jsfiddle.net/whizkid747/eDfZ5/](http://jsfiddle.net/whizkid747/eDfZ5/)

```
<div>

    <img src="http://icons.iconarchive.com/icons/deleket/button/48/Button-Previous-icon.png" id="img-left-arrow" height="20px" on/> 

    <select>
        <option value="12/1/2013">12/1/2013</option>
  <option value="12/1/2014">12/1/2014</option>
  <option value="12/1/2015">12/1/2015</option>
  <option value="12/1/2016">12/1/2016</option>
</select>    
        <img src="http://icons.iconarchive.com/icons/deleket/button/48/Button-Next-icon.png" id="img-right-arrow" height="20px"/> 

</div>

<script>
    $('#img-right-arrow').on('click', function() {
    $('select option:selected').next().prop('selected', true) });

$('#img-left-arrow').on('click', function() {
    $('select option:selected').prev().prop('selected', true) }); 

<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:42:52.160

```
<script>
    function changeDate(option){
       var selectList = document.getElementById("list");
       if(option == 0){
           selectList.selectedIndex++;
       }else if (option == 1 && selectList.selectedIndex > 0){
           selectList.selectedIndex--;
       }
    }
</script>

<img src="img1.jpg" onclick="changeDate(0)"> 
<img src="img2.jpg" onclick="changeDate(1)"> 
    <select id="list">
        <option id="1">One</option>
        <option id="2">Two</option>
        <option id="3">three</option>
        <option id="4">Four</option>
    </select> 
```

这里有一些改进的空间，但这表明了基本思想。使用点击事件处理程序来更改选定的索引。

# iphone - 仅在屏幕的一部分中使用 GLKViewController 是否安全？

> ID：15059028
> 
> 赞同：1
> 
> 时间：2013-02-25T02:03:18.953
> 
> 标签：iphone, ios, ipad, opengl-es, glkit

我记得 UIViewControllers 仅用于全屏。在屏幕的一部分中使用 GLKViewController 是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:17:29.943

确实 UIViewControllers 仅适用于全屏，但这并不意味着它不可能。如果你能让它工作，那就去吧！但是，在这种情况下，最好将 GLKView 放在角落并从 UIViewController 控制超级视图的任何地方进行管理。

# firebase - 使用经过身份验证的用户访问嵌套数据以进行有条件的访问

> ID：15059030
> 
> 赞同：4
> 
> 时间：2013-02-25T02:03:27.050
> 
> 标签：firebase

我正在尝试使新的帖子对象只能由存储在每个帖子中的“成员”字典中的用户读取。我不断收到“7:17：无效 == 表达式：左操作数不是数字、布尔值、字符串或空值。” 在 .read 规则上：

```
{
  "rules": {

  "posts" : {
      ".write":true,
      "$post" : {
         ".read": "data.child('members').child(auth.uid) == true"
      }
    }  
  }
} 
```

我在生成的令牌中传递了“uid”参数：[https ://www.firebase.com/docs/security/custom-login.html](https://www.firebase.com/docs/security/custom-login.html)

目的是只允许其成员数组中存在的用户阅读帖子。我在 firebase 文档、谷歌群组或谷歌搜索中找不到任何关于访问嵌套数据的示例:-(

这是允许/可能的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T02:29:04.780

您需要在 .child() 之后添加 .val() 才能获取值。：-） 尝试：

```
".read": "data.child('members').child(auth.uid).val() == true" 
```

# java - 如何将 JWindow 添加到 NetBeans 项目并使用 GUI 编辑器对其进行编辑？

> ID：15059032
> 
> 赞同：0
> 
> 时间：2013-02-25T02:03:38.697
> 
> 标签：java, swing, netbeans-7

只有一个选项可以将 JFrame 和 JPanel 添加到项目中。我尝试编辑 JFrame 类来扩展 JWindow，但它使 NetBeans 的自动生成代码出现错误，并且无法编辑此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:08:40.793

您可以创建自己的模板...

将这两个文件放在`...\NetBeans\7.2.1\config\Templates\GUIForms`文件夹中。

在 Windows 7 上`C:\Users\{your user name}\AppData\Roaming\NetBeans\7.2.1\config\Templates\GUIForms`

**JWindow.java**

```
<#assign licenseFirst = "/*">
<#assign licensePrefix = " * ">
<#assign licenseLast = " */">
<#include "../Licenses/license-${project.license}.txt">

<#if package?? && package != "">
package ${package};

</#if>
/**
 *
 * @author ${user}
 */
public class ${name} extends javax.swing.JWindow {

    /** Creates new form ${name} */
    public ${name}() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        pack();
    }
    // </editor-fold>//GEN-END:initComponents

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(${name}.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(${name}.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(${name}.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(${name}.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ${name}().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables

} 
```

**JWindow.form**

```
<?xml version="1.0" encoding="UTF-8" ?>

<Form version="1.3" type="org.netbeans.modules.form.forminfo.JFrameFormInfo">
  <SyntheticProperties>
    <SyntheticProperty name="formSizePolicy" type="int" value="1"/>
  </SyntheticProperties>

</Form> 
```

# jakarta-ee - 在struts2中从JavaScript检索值到Action类

> ID：15059035
> 
> 赞同：0
> 
> 时间：2013-02-25T02:04:04.707
> 
> 标签：jakarta-ee, jqgrid, struts2, struts2-jquery

我正在使用 jquery struts2 网格插件。我正在使用自己的表单来更新、删除和插入对象。我创建了一个隐藏字段来从 javascript 中检索值，但它没有用......这似乎是什么问题？

当我单击下面的网格代码时，它被激活。

```
var product_id = grid.jqGrid('getCell', sel_id, 'product_Id'); 
```

我想通过这个将product_id的值传递给struts2中的隐藏标签。

```
document.getElementById('product_Id').value = product_id; 
```

所以它应该通过这个标签将 product_id 值传递给 product_Key 字段。

```
<s:hidden value="" name="product_Key" id="product_Id"/> 
```

然后，当我单击网格上的编辑按钮时，它应该作为参数通过这条线传递。

```
 <s:url id="editurl" action="ProductUpdate">
            <s:param name="product_Key"><s:property value="product_Key"/></s:param>
 </s:url> 
```

这是编辑单击按钮。

```
 Edit : { 
            title :'Edit record on the selected record on the row',
            caption :'Edit Record', 
            icon:'ui-icon-pencil',
            onclick: function(){ alert('Edit is clicked'),document.getElementById('product_Id').value = product_id,window.location = '%{editurl}' }
            } 
```

整个代码受到影响。

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
<!DOCTYPE html>
<html>
    <head>
        <sj:head jqueryui="true" jquerytheme="redmond" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>

        <s:url id="remoteurl" action="ProductMain"/>
        <s:url id="editurl" action="ProductUpdate">
            <s:param name="product_Key"><s:property value="product_Key"/></s:param>
        </s:url>

        <s:url id="myUrl" action="ProductInitialise" />
        <s:hidden value="" name="product_Key" id="product_Id"/>   -----> use to retrieve value of product id

        <script type="text/javascript">
            // this will retrieve the record in the row.. retrieve this for delete and edit.
            $.subscribe('rowselect', function(event, data) {
                var grid = event.originalEvent.grid; 
                var sel_id = grid.jqGrid('getGridParam', 'selrow'); 
                var product_id = grid.jqGrid('getCell', sel_id, 'product_Id'); 
                var last_date =  grid.jqGrid('getCell', sel_id, 'last_Date'); 
                alert(product_id + 'date' + last_date);
                document.getElementById('product_Id').value = product_id; ---> paste the value of the product_id.
                //  alert('Selected Row : ' + event.originalEvent.id );
            });

        </script>

        <sjg:grid
            id="gridtable"
            caption="Customer Examples"
            dataType="json"
            href="%{remoteurl}"
            pager="true"
            gridModel="gridModel"
            rowList="10,15,20"
            rowNum="10"
            rownumbers="true"

            navigatorExtraButtons="{
            seperator: { 
            title : 'seperator'  
            }, 
            Insert : { 
            title : 'Insert Record', 
            caption : 'Insert', 
            icon: 'ui-icon-plusthick', 
            onclick: function(){  alert('Grid Button clicked!') ,window.location = '%{myUrl}'} 
            },
            Edit : { 
            title :'Edit record on the selected record on the row',
            caption :'Edit Record', 
            icon:'ui-icon-pencil',
            onclick: function(){ alert('Edit is clicked'),window.location = '%{editurl}' }
            }
            }"
            navigatorAdd="false"
            navigatorEdit="false"
            navigator="true"
            resizable="true"
            onSelectRowTopics="rowselect"
            >

            <sjg:gridColumn name="product_Id" 
                            index="product_Id" 
                            title="Product_Id"  
                            sortable="false"
                            />

            <sjg:gridColumn name="serial_Number" 
                            index="serial_Number" 
                            title="Serial_Number" 
                            editable="true"
                            sortable="true"/>
            <sjg:gridColumn name="date_Assembled" 
                            index="date_Assembled" 
                            title="Date_Assembled"  
                            editable="true"
                            sortable="true"/>
            <sjg:gridColumn name="time_Assembled" 
                            index="time_Assembled" 
                            title="Time_Assembled" 
                            editable="true"
                            sortable="true"/>
            <sjg:gridColumn name="model" 
                            index="model" 
                            title="Model"  
                            editable="true"
                            sortable="true"/>
            <sjg:gridColumn name="batch_Id" 
                            index="batch_Id" 
                            title="Batch_Id" 
                            sortable="true"/>
            <sjg:gridColumn name="process_Code" 
                            index="process_Code" 
                            title="Process_Code"  
                            editable="true"
                            sortable="false"/>
            <sjg:gridColumn name="dc_Power_PCB_Serial" 
                            index="dc_Power_PCB_Serial" 
                            title="Dc_Power_PCB_Serial" 

                            editable="true"
                            sortable="dc_Power_PCB_Serial"/>
            <sjg:gridColumn name="control_Power_PCB_Serial" 
                            index="control_Power_PCB_Serial" 
                            title="Control_Power_PCB_Serial" 
                            editable="true"
                            sortable="control_Power_PCB_Serial"/>
            <sjg:gridColumn name="mains_Power_PCB_Serial" 
                            index="mains_Power_PCB_Serial" 
                            title="Mains_Power_PCB_Serial" 
                            editable="true"
                            sortable="mains_Power_PCB_Serial"/>
            <sjg:gridColumn name="blower_Serial" 
                            index="blower_Serial" 
                            title="Blower_Serial" 
                            editable="true"
                            sortable="blower_Serial"/>
            <sjg:gridColumn name="heaterPlate_Serial" 
                            index="heaterPlate_Serial" 
                            title="HeaterPlate_Serial" 
                            editable="true"
                            sortable="heaterPlate_Serial"/>
            <sjg:gridColumn name="last_Process" 
                            index="last_Process" 
                            title="Last_Process" 
                            editable="true"
                            sortable="last_Process"/>
            <sjg:gridColumn name="last_Date" 
                            index="last_Date"  
                            formatter="date" 
                            formatoptions="{newformat : 'd.m.Y H:i', srcformat : 'Y-m-d H:i:s'}"
                            editable="true"
                            title="Last_Date" sortable="last_Date"/>
            <sjg:gridColumn name="updatedTime" 
                            index="updatedTime" 
                            title="UpdatedTime" 
                            sortable="updatedTime"/>

        </sjg:grid>
    </body>
</html> 
```

这是我的行动课

```
 package lotmovement.action;

    import com.opensymphony.xwork2.*;
    import java.util.Date;
    import lotmovement.business.crud.ProductCrud;
    import lotmovement.business.crud.RecordExistProduct;
    import lotmovement.business.crud.crudinterface.CrudInterface;
    import lotmovement.business.entity.Product;
    import org.apache.struts2.interceptor.validation.SkipValidation;

    public class ProductAction extends ActionSupport implements CrudInterface {

        private Long product_Id;
        private String serial_Number;
        private String date_Assembled;
        private String time_Assembled;
        private String model;
        private int batch_Id;
        private int process_Code;
        private String dc_Power_PCB_Serial;
        private String control_Power_PCB_Serial;
        private String mains_Power_PCB_Serial;
        private String blower_Serial;
        private String heaterPlate_Serial;
        private String last_Process;
        private String last_Date;

        private Date today;
        private Long product_Key; --> this is the hidden field

        ProductCrud productCrud;

        RecordExistProduct recordExistProduct;

        Product product;

        public Product getProduct() {
            return product;
        }

        public void setProduct(Product product) {
            this.product = product;
        }

        public ProductCrud getProductCrud() {
            return productCrud;
        }

        public void setProductCrud(ProductCrud productCrud) {
            this.productCrud = productCrud;
        }

        public RecordExistProduct getRecordExistProduct() {
            return recordExistProduct;
        }

        public void setRecordExistProduct(RecordExistProduct recordExistProduct) {
            this.recordExistProduct = recordExistProduct;
        }

        @Override
        public void validate() {
          setToday(new Date());

          if(recordExistProduct.ProductExist(getSerial_Number())==true){
                addActionError("Record already exist. Please use another Serial Number");
          }

        }

        @Override

        public String execute() {
          setToday(new Date());

            return SUCCESS;
        }

        @SkipValidation
        public String Initialise_Product(){

              setToday(new Date());
              return SUCCESS;
        }

        @Override
        @SkipValidation
        public void Update() {

        PopulateProduct();     
        }

        @Override
        @SkipValidation
        public void Insert() {

            PopulateProduct();
            productCrud.Insert(product);

        }

        @Override
        @SkipValidation
        public void Delete() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        public void PopulateProduct()
        {
            product.setProduct_Id(getProduct_Id());
            product.setSerial_Number(getSerial_Number());
            product.setDate_Assembled(getDate_Assembled());
            product.setTime_Assembled(getTime_Assembled());
            product.setModel(getModel());
            product.setBatch_Id(getBatch_Id());
            product.setProcess_Code(getProcess_Code());
            product.setDc_Power_PCB_Serial(getDc_Power_PCB_Serial());
            product.setControl_Power_PCB_Serial(getControl_Power_PCB_Serial());
            product.setMains_Power_PCB_Serial(getMains_Power_PCB_Serial());
            product.setBlower_Serial(getBlower_Serial());
            product.setHeaterPlate_Serial(getHeaterPlate_Serial());
            product.setLast_Process(getLast_Process());
            product.setLast_Date(getLast_Date());
        }

        public Long getProduct_Id() {
            return product_Id;
        }

        public void setProduct_Id(Long product_Id) {
            this.product_Id = product_Id;
        }

        public String getSerial_Number() {
            return serial_Number;
        }

        public void setSerial_Number(String serial_Number) {
            this.serial_Number = serial_Number;
        }

        public String getDate_Assembled() {
            return date_Assembled;
        }

        public void setDate_Assembled(String date_Assembled) {
            this.date_Assembled = date_Assembled;
        }

        public String getTime_Assembled() {
            return time_Assembled;
        }

        public void setTime_Assembled(String time_Assembled) {
            this.time_Assembled = time_Assembled;
        }

        public String getModel() {
            return model;
        }

        public void setModel(String model) {
            this.model = model;
        }

        public int getBatch_Id() {
            return batch_Id;
        }

        public void setBatch_Id(int batch_Id) {
            this.batch_Id = batch_Id;
        }

        public int getProcess_Code() {
            return process_Code;
        }

        public void setProcess_Code(int process_Code) {
            this.process_Code = process_Code;
        }

        public String getDc_Power_PCB_Serial() {
            return dc_Power_PCB_Serial;
        }

        public void setDc_Power_PCB_Serial(String dc_Power_PCB_Serial) {
            this.dc_Power_PCB_Serial = dc_Power_PCB_Serial;
        }

        public String getControl_Power_PCB_Serial() {
            return control_Power_PCB_Serial;
        }

        public void setControl_Power_PCB_Serial(String control_Power_PCB_Serial) {
            this.control_Power_PCB_Serial = control_Power_PCB_Serial;
        }

        public String getMains_Power_PCB_Serial() {
            return mains_Power_PCB_Serial;
        }

        public void setMains_Power_PCB_Serial(String mains_Power_PCB_Serial) {
            this.mains_Power_PCB_Serial = mains_Power_PCB_Serial;
        }

        public String getBlower_Serial() {
            return blower_Serial;
        }

        public void setBlower_Serial(String blower_Serial) {
            this.blower_Serial = blower_Serial;
        }

        public String getHeaterPlate_Serial() {
            return heaterPlate_Serial;
        }

        public void setHeaterPlate_Serial(String heaterPlate_Serial) {
            this.heaterPlate_Serial = heaterPlate_Serial;
        }

        public String getLast_Process() {
            return last_Process;
        }

        public void setLast_Process(String last_Process) {
            this.last_Process = last_Process;
        }

        public String getLast_Date() {
            return last_Date;
        }

        public void setLast_Date(String last_Date) {
            this.last_Date = last_Date;
        }

          public Date getToday() {
            return today;
        }

        public void setToday(Date Today) {
            this.today = Today;
        }

        public Long getProduct_Key() {
            return product_Key;
        }

        public void setProduct_Key(Long product_Key) {
            this.product_Key = product_Key;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:20:02.433

尝试在里面传递一个参数`<s:url>`

```
<s:url id="remoteurl" action="ProductMain" namespace="/">
   <s:param name="product_Key"><s:property value="product_Key"/></s:param>
</s:url> 
```

# c# - 如果控制器中为空或 null，则将 MVC3 参数设置为默认值

> ID：15059039
> 
> 赞同：1
> 
> 时间：2013-02-25T02:04:40.933
> 
> 标签：c#, asp.net-mvc-3

如果参数为空，我正在努力默认`CId`和1，`SId`

```
 public ViewResult Index(int? CId,int?SId,string name,int? p)
    {

        if (CId == 0 || SId == 0)
        {
            CId = 1;
            SId = 1;
        } 
```

然后我将使用这些值进行正常查询。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:07:55.123

`Cid`并且`Sid`是[Nullable](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)，因此您可以使用[HasValue](http://msdn.microsoft.com/en-us/library/sksw8094.aspx)属性来检查变量是否具有值（null）

```
 public ViewResult Index(int? CId,int?SId,string name,int? p)
  {
        if (!CId.HasValue || !SId.HasValue)
        {
            CId = 1;
            SId = 1;
        }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:37:54.573

只是好奇，但您是否尝试过：

```
public ViewResult Index(string name,int? p,int? CId = 1,int? SId = 1)
    {

    } 
```

您必须重新排列它们，因为默认值参数必须排在最后。另外，由于它们可以为空，我实际上不确定这是否可行。

# javascript - 在谷歌地图上禁用捏缩放[桌面]

> ID：15059041
> 
> 赞同：2
> 
> 时间：2013-02-25T02:04:46.797
> 
> 标签：javascript, google-maps

我有一个使用 Google Maps API v3 的网站，但无法让 pinch-zoom 属性正常工作。手势始终执行缩小，而不是捏合放大。

这是一款具有触控功能的 PC 显示器。因此，由于我无法使其正常工作，我决定禁用该功能。

我使用下面取消了触摸事件

```
document.documentElement.ontouchstart = function() {return false} 
```

这有一个不想要的副作用。此代码取消了整个触摸事件，因此用户无法使用 Google Maps 默认缩放控件。我尝试将“ontouchstart”更改为“ontouchmove”事件，但这并不能阻止地图缩小。

关于如何禁用该功能或​​可能是如何修复捏合放大功能的任何想法？我可以发布网站网址，但它只是一个普通的谷歌地图，除非你有触摸屏显示器，否则你不会注意到这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:12:42.847

这里有类似问题的人以这种方式解决了它，也许它对你有用

```
var tblock = function (e) {
if (e.touches.length > 1) {
    e.preventDefault()
}

return false;
}

document.body.addEventListener("touchmove", tblock, true); 
```

[Google Maps API v3 在 iPad Safari 上禁用双指缩放](https://stackoverflow.com/questions/10729067/gmaps-v3-disable-pinch-to-zoom-on-ipad-safari)

和这里

[如何在 Android MapView 中禁用捏合](https://stackoverflow.com/questions/4626028/how-to-disable-pinch-in-android-mapview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T19:13:27.573

禁用“touchmove”只能解决部分问题，因为谷歌地图有自己的想法。您的设备将允许您捏缩放（在一定程度上，并且不一致），直到您禁用谷歌地图自己的可拖动选项，例如

```
mymap.setOptions({draggable: false}); 
```

至少在 Android 4.4.2 上是这样的。

# python - 未知命令：'runserver'

> ID：15059044
> 
> 赞同：2
> 
> 时间：2013-02-25T02:05:15.143
> 
> 标签：python, django

出乎意料的是，我不能再使用`manage.py`“命令”（runserver、shell、syndb）。这是我得到的错误；

```
(pinax) C:\Python27\Projects\Catalog\pinax\catalog>python manage.py runserver
Unknown command: 'runserver'
Type 'manage.py help' for usage.

(pinax) C:\Python27\Projects\Catalog\pinax\catalog>python manage.py help
Usage: manage.py subcommand [options] [args]

Options:
  --settings=SETTINGS   The Python path to a settings module, e.g.
                    "myproject.settings.main". If this isn't provided, the
                    DJANGO_SETTINGS_MODULE environment variable will be
                    used.
  --pythonpath=PYTHONPATH
                    A directory to add to the Python path, e.g.
                    "/home/djangoprojects/myproject".
  --traceback           Print traceback on exception
  --version             show program's version number and exit
  -h, --help            show this help message and exit
Traceback (most recent call last):
  File "manage.py", line 28, in <module>
    execute_from_command_line()
  File "build\bdist.win-amd64\egg\django\core\management\__init__.py", line 352,
 in execute_from_command_line

  File "build\bdist.win-amd64\egg\django\core\management\__init__.py", line 295,
 in execute

  File "build\bdist.win-amd64\egg\django\core\management\__init__.py", line 242,
 in main_help_text

  File "build\bdist.win-amd64\egg\django\core\management\__init__.py", line 128,
 in get_commands

KeyError: 'startproject'

(pinax) C:\Python27\Projects\Catalog\pinax\catalog> 
```

我在虚拟环境中运行 pinax 项目。因此，当我遇到此错误时，我在 windows 中通过 PYTHONPATH 检查了该错误。重新设置一下，还是没有变化。我还是 python 的新手，但出于某种原因，它似乎`__init__`在构建文件中寻找“”，而不是“ `site-packages\django`”。关于我的问题根源的任何想法。

# ios - ASIHTTPRequest POST 库

> ID：15059046
> 
> 赞同：1
> 
> 时间：2013-02-25T02:05:29.060
> 
> 标签：ios, ios6, http-post, asihttprequest

我真的很想将 ASIHTTPRequest 用于其简单且已构建的库。由于它是旧代码格式，并且在我使用 ARC 的项目中它并没有真正起作用。是否有任何非官方的更新，或者是否有其他运行良好的开源代码？我只是觉得返回这段代码并更正它等等非常乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:22:00.690

考虑使用[`AFNetworking`](https://github.com/AFNetworking/AFNetworking)代替`ASIHTTPRequest`.

或者只是禁用 ARC `ASIHTTPRequest`，请参阅@La boa boa

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:23:30.283

1.  如果您的新项目使用 ARC，您可以为`ASIHTTPRequest`. 这是一个很好的答案[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

2.  的创建者`AFNetworking`编写了一个适配器以简化`AFNetworking`从`ASIHTTPRequest`. 见[https://github.com/AFNetworking/AFNetworking-ASIHTTPRequest](https://github.com/AFNetworking/AFNetworking-ASIHTTPRequest)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:20:11.280

检查这个答案 [https://stackoverflow.com/a/6658549/975959](https://stackoverflow.com/a/6658549/975959)

它允许您对某些文件禁用 ARC，从而允许您使用 ASIHTTPRequest。

我已经成功地将它与该库一起使用。

# c# - ASP.NET & Microsoft Dynamics NAV 2009 如何获取数据？

> ID：15059047
> 
> 赞同：0
> 
> 时间：2013-02-25T02:05:46.923
> 
> 标签：c#, asp.net, microsoft-dynamics, dynamics-nav, dynamics-nav-2009

**我想在Microsoft Dynamics NAV 2009**中插入、更新和删除客户表，帮助 ASP.NET、C#； **通过 Microsoft Dynamics NAV 服务器；** 有没有关于这个的 C# 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T23:19:14.037

在 Dynamics NAV Developer 手册中，您将找到有关如何使用 Web 服务的一章。这还包括一些关于如何进行 CRUD 操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T08:18:35.483

您需要添加一个 Web 引用并将其指向 NAV 2009 的 Web 服务。

首先，如果您在右上角搜索“Web 服务”，则需要公开“客户卡”页面（第 21 页）。

然后在 C# 中，您需要一个 Web 引用来连接到 SOAP Web 服务。

请记住，如果您更新，则需要先阅读。当您调用 UPDATE 时，会有一个“关键”字段。此字段在 UPDATE 方法调用中传递，以确保在其他用户更新数据时不会覆盖数据。

这是添加 Web 参考的好指南。[使用 Web 参考连接到导航](https://www.crt-insights.com/2018/08/15/connecting-to-nav-web-services-from-c-using-web-reference/)

# eclipse - osgi 与 eclipse maven 和 maven-bundle-plugin

> ID：15059048
> 
> 赞同：0
> 
> 时间：2013-02-25T02:05:57.127
> 
> 标签：eclipse, maven, osgi, maven-bundle-plugin

我是 osgi 的新手，对它们如何组合在一起感到非常困惑。我想创建 3 个包，一个定义接口的 api 包，一个提供实现的 impl 包，以及另一个使用 maven 和 maven-bundle-pugin 实现的包。

我需要一些指导：

1.  我需要 3 个 Maven 项目吗？

2.  它有助于/我应该使用 Maven 原型来创建项目吗？

3.  我需要你使用 maven-pax 吗？

4.  osgi新手的任何其他提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:09:39.683

我前段时间写了一个[教程，其中可能包含您需要的内容。](http://liquid-reality.de/display/liquid/2011/02/15/Karaf+Tutorial+Part+1+-+Installation+and+First+application)一些剧透..

*   是的，您应该创建三个 Maven 项目。理想情况下也是一个父项目，因此您可以在一个命令中构建它们。

*   您可以使用原型，但更简单的方法可能是复制示例代码并进行更改。

*   本教程展示了如何在 Apache Karaf 上进行部署，恕我直言，这是最容易上手的 OSGi 服务器。在构建过程中生成的包仍然应该在普通的 Felix 或 Equinox 中工作，但部署会有点困难。

# delphi - Delphi 非阻塞 ShowModal

> ID：15059049
> 
> 赞同：4
> 
> 时间：2013-02-25T02:06:12.013
> 
> 标签：delphi, delphi-7, vcl, tform

我想知道是否有一种方法可以在不等待的情况下显示 TForm（有点像 TForm.Show）。但我想要的是阻止所有其他形式（就像在 ShowModal 中一样）

例子：

我有Form1和Form2。Form1 有一个应该打开 Form2 但 Form1 被阻止的按钮，但单击该按钮仍会继续执行 Form2 打开后的代码。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Form2.ShowModal; // ===> Something like that but the Code should continue, yet Form1 and all other forms are blocked (disabled)
  MessageBox (0, 'Code continues', '', 0);
end; 
```

希望你明白我的意思。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T06:21:17.000

您可以调用 DisableTaskwindows，除了您的 Window 被禁用，然后 EnableTaskWindows 再次启用其他窗体。

```
 Form3.Show;
  FP:=DisableTaskwindows(Form3.Handle);
  //Some Code
  EnableTaskwindows(FP); 
```

# google-apps-script - 游戏模拟器超时

> ID：15059052
> 
> 赞同：0
> 
> 时间：2013-02-25T02:06:37.873
> 
> 标签：google-apps-script

这是我在这里的第一篇文章。提前感谢您花时间阅读我的问题。

我是新手编码员。我在十年前获得了计算机科学的辅修课程。我有做一些简单编码的冲动，机会来了，所以我做到了！

在开发游戏时，我想运行一个程序来确定给定参数的给定结果的机会。我兴奋地达到了可以尝试的地步，但 Google Scripts 无法处理运行 60,000,000 个可能的场景来计算获胜百分比。

我得到了，“错误：超过了最大执行时间。”

我只是想找到我和运行这个程序之间的最短路径。想法：

1）有没有办法删除最大执行时间，让它花一整天？有没有其他方法可以让它在 Google Scripts 中运行？2）也许我可以通过输入随机数来运行较少数量的试验。有没有办法在 Google Scripts 中生成随机数？3) 除了 Google Scripts 之外，我还应该做这种事情吗？如果是这样，我应该研究一下适用于 Mac 的免费/负担得起的编译器吗？我尝试将它导入 Xcode，但我很困惑，似乎无法找到一个简单的地方进行编译。此外，将其导入“C”会产生一些兼容性问题；虽然我可能只需要把它吸起来并在这里重新组装它。

作为参考，这是将其超时的函数：

```
function dieFeeder(winCount, fSkill, fMagnitude, fHeart, fDie1, fDie2, fDie3, fDie4,   fDie5, cSkill, cMagnitude, cHeart, cDie1, cDie2, cDie3, cDie4, cDie5){
// a parent function to function questionMatrix, feeds the changing dice into it

 var matrixWinner;  

//This 'for' clause keeps going until all dice permutations have been tried out

 for (var i=0; i<60466176; i++){
//This part changes the dice to go through all combiations in a way similar to counting in base 6

if (cDie5 == 7){
  cDie5 = 1;
  cDie4 = cDie4+1;
}

if (cDie4 == 7){
  cDie4 = 1;
  cDie3 = cDie3 +1;
}  

if (cDie3 == 7){
  cDie3 = 1;
  cDie2 = cDie2 +1;
}  

if (cDie2 == 7){
  cDie2 = 1;
  cDie1 = cDie1 +1;
}  

if (cDie1 == 7){
  cDie1 = 1;
  fDie5 = fDie5 +1;
}  

if (fDie5 == 7){
  fDie5 = 1;
  fDie4 = fDie4 +1;
}  

if (fDie4 == 7){
  fDie4 = 1;
  fDie3 = fDie3 +1;
}  

if (fDie3 == 7){
  fDie3 = 1;
  fDie2 = fDie2 +1;
}      

if (fDie2 == 7){
  fDie2 = 1;
  fDie1 = fDie1 +1;
}  

cDie5 = cDie5 + 1;

//This part checks to see who wins and increases the winCount if it was the Favorite

matrixWinner = questionMatrix(fSkill, fMagnitude, fHeart, fDie1, fDie2, fDie3, fDie4, fDie5, cSkill, cMagnitude, cHeart, cDie1, cDie2, cDie3, cDie4, cDie5);

if (matrixWinner == 'favorite'){

  winCount = winCount +1;

}

}

  return winCount;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:12:24.093

1.  There is no way to lift the maximum execution time. The limit is there so that other users (like me) can have time to run our scripts too! The solution to this problem is to break up your problem into many subproblems.

    *   One solution would be to continue executing your script while your running time is under some threshold (say, 3 minutes) (i.e. keep track of how long your script has been running). Then save all state relating to your script (variables, etc.). Save these to ScriptDb. Then have your script run on a 5-minute trigger. When your script runs again, it reads the values from ScriptDb and picks up where it left off.
2.  If you're looking for random numbers, use `Math.random()`. Google Apps Scripts is built off of javascript, so basic javascript functions are available.

3.  Relating to my answer to #2, what you have shown is entirely javascript, so you can just copy your code over to some webpage to run it. ([For testing, you can use jsfiddle](http://jsfiddle.net/)). Also you need to define `if (cDie5 == 7){`

# javascript - ko foreach 与 ko.computed 将输入值处理到下一个输入

> ID：15059055
> 
> 赞同：0
> 
> 时间：2013-02-25T02:07:02.967
> 
> 标签：javascript, data-binding, knockout.js

我有一个可观察的字符串，女巫包含一个选项列表。每个选项都由这个符号“-*！*-”分隔。还有一个名为**optionsSplitted**的计算函数，它负责返回一个选项数组。该数组用于**foreach**绑定。还有一个按钮可以添加选项。

模型上一切正常，我可以编辑我的选项，添加一个新选项。 **但是当我添加一些选项然后编辑一个时，它将被复制到下一个。为什么？？？**

[jsfiddle](http://jsfiddle.net/calm/9YZT9/2/)

```
function ViewModel(args) {
    var self = this;

    self.activeAttributes = ko.observable({
        options: ko.observable('a-*!*-b-*!*-c')
    });

    self.activeAttributes.optionsSplitted = ko.computed(function(){
        return self.activeAttributes().options().split("-*!*-");      
    });

    self.changed = function (data) {
        var options = "", optionsSize = $('.option').length;
        $('.option').each(function(i){
            if(i < optionsSize - 1)
                options += $(this).val() + "-*!*-";
            else
                options += $(this).val();
        });
        self.activeAttributes().options(options);
        alert("Options: " + options)
    };

    self.addOption = function(data) {
        self.activeAttributes().options(self.activeAttributes().options() +  "-*!*-");
    };
}

var model = {
};

var viewModel = new ViewModel(model);
ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:46:26.347

使用 ko.utils.arrayMap 实用程序很好。

[jsfiddle](http://jsfiddle.net/calm/9YZT9/3/)

```
function ViewModel(args) {
var self = this;

self.activeAttributes = ko.observable({
    options: ko.observable('a-*!*-b-*!*-c')
});

self.activeAttributes.optionsSplitted = ko.computed(function(){
    var options = self.activeAttributes().options().split("-*!*-");
    return ko.utils.arrayMap(options, function (option) {
        return {
            value: ko.computed({
                read: function () { return option; }
            })
        };
    });
});

self.changed = function (data) {
    var options = "", optionsSize = $('.option').length;
    $('.option').each(function(i){
        if(i < optionsSize - 1)
            options += $(this).val() + "-*!*-";
        else
            options += $(this).val();
    });
    self.activeAttributes().options(options);
    alert("Options: " + options)
};

self.addOption = function(data) {
    self.activeAttributes().options(self.activeAttributes().options() +  "-*!*-");
}; 
```

};

变种模型 = { };

var viewModel = new ViewModel(model); ko.applyBindings(viewModel);

# php - 复选框已选中？

> ID：15059056
> 
> 赞同：0
> 
> 时间：2013-02-25T02:07:04.050
> 
> 标签：php, html, checkbox, isset, checked

现在我做了很多研究，在 PHP 中尝试了很多方法，包括 $_POST isset.. foreach 等

但我需要一些帮助！

基本上，**只想检查复选框是否已被选中。然后，如果复选框已被选中，则将 $visits 的数量加 1。**

只要我可以检查复选框是否被选中，我想我可以从那里弄清楚！

提前致谢

（注意：$visits 是访问属性的次数。此编码显示从文件中读取的属性信息）

```
<?
    $filename = "house.txt";
    $filepointer = fopen($filename,"r");  // open for read
?>

<html>
<head>
    <h1> Search for properties</h1>
    <form method = "post" action= "visit.php">
        Enter max price
        <input type = "text" name = "max" value="<?=$Max;?>">
        <input type = "submit" name = "submit">
        <br><i><p>Properties found</p></i></br>
    </form>
</head>
</html>

<?
    $myarray = file ($filename);
    for ($mycount = 0; $mycount < count($myarray); $mycount++ ) { // one input line at a time
        $aline = $myarray[$mycount];
        $postcode = getvalue($aline,0);
        $value = getvalue($aline,1);
        $image = getvalue ($aline,2);
        $visits = getvalue($aline,3);
        $Max = $_POST['max'];

        if ($value < $Max) {
            print "<table border = 2>";
            print "<FORM METHOD='POST' ACTION='visit.php' >";
            print "<td> <input type='checkbox' name='check' value='Yes' > $postcode </td><BR> \n";
            print "<td>$value <BR>";
            print "<td>$image<BR>";
            print "<td>$visits<BR><p>";
            print "</table>";
            print "</form>";
        }
    }

    function getvalue ($aline, $commaToLookFor) {   
        $intoarray = explode(",",$aline);
        return  $intoarray[ $commaToLookFor];  
    }

    if (isset($_POST['check']) && $_POST['check'] == 'Yes') {
        echo "checked!";
    } else {
        echo "not checked!.";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:39:27.867

您提交的表单与您认为的表单不同……页面上有两个表单，都提交到“visit.php”。这条线不应该存在：

`print "<FORM METHOD='POST' ACTION='visit.php' >";`

...因为您已经在文件顶部创建了表单。

这将需要对您的代码进行一些重组，但基本思想是您只需要一个包含所有字段和提交按钮的表单，否则您将提交包含最高价格的表单，仅此而已。

或者，如果您确实需要单独的表单（我对您的用例不够熟悉），那么第二个表单将需要它自己的提交按钮。

简化的工作代码：

```
 print "<table border = 2>";
print "<FORM METHOD='POST' ACTION='visit.php' >";
  print "<td> <input type='checkbox' name='check' value='Yes' > $postcode </td><BR> \n";
  print "<td> <button type='submit'>Submit</button> </td><BR> \n";
 print "</table>";
 print "</form>";

//personally I would just check for isset($_POST['check']), but it doesn't really matter... 
if (isset($_POST['check']) && $_POST['check'] == 'Yes') 
{
  echo "checked!";
}
else
{
  echo "not checked!.";
} 
```

# ios - CoreLocation 查找行驶距离并用作 iOS 变量

> ID：15059060
> 
> 赞同：2
> 
> 时间：2013-02-25T02:07:28.170
> 
> 标签：ios, gps, core-location, distance

我正在制作一个警报，该警报仅在手机移动一定距离后才会关闭（以迫使用户下床）。我需要能够在警报响起后找到行进的距离，然后获取此距离并在已行进最小距离时将其用于关闭警报声音的方法。有任何想法吗？我正在使用以下内容来更新位置。关于如何将其纳入禁用警报的任何想法？

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation     *)newLocation fromLocation:(CLLocation *)oldLocation
{
if(!newLocation) {
    NSLog(@"No movement");
}

if ((oldLocation.coordinate.latitude != newLocation.coordinate.latitude) &&
    (oldLocation.coordinate.longitude != newLocation.coordinate.longitude))
{

    CLLocation *loc1 = [[CLLocation alloc] initWithLatitude:oldLocation.coordinate.latitude longitude:oldLocation.coordinate.longitude];
    CLLocation *loc2 = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];
    CLLocationDistance distance = [loc2 distanceFromLocation:loc1];
    if (distance>=4) {
        NSLog(@"Very good!");
    }

}

NSLog(@"Location:%@", newLocation);
}

-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
NSLog(@"Could not find location: %@", error);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T02:53:55.790

几个想法：

1.  你不考虑[`horizontalAccuracy`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/horizontalAccuracy)。首先，如果这对任一坐标都是负数，那么您就无法进行任何比较。即使它们都是非负的，如果你真的想确定用户是否移动了一定距离，你可能想要退出水平精度。

    不仅要查看纬度和经度，还要查看[`horizontalAccuracy`](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instp/CLLocation/horizontalAccuracy)。

2.  你没有考虑到，当你打开定位服务时，经常会有一整串坐标进来，随着水平精度越来越好，坐标可能会反弹。您要确保不要将这种缓慢的三角测量视为有资格起床所需的运动。

3.  确保您在真实的设备上、在真实世界的场景中进行实验。使用模拟器绝对不是一个好的测试。也不是使用插入计算机的设备（因为您希望在现实世界的场景中看到您的 GPS，其中有人在睡觉前四处走动）。

4.  我建议从一个简单的应用程序开始，该应用程序在数据库（或其他格式）中记录位置事件，并可能在表格视图中显示日志，因此您不必总是返回计算机查看结果。启动该应用程序，四处走走，然后查看您获得的位置事件。这将帮助您了解人们使用实际设备时看到的模式。

5.  请注意，如果此应用程序是为应用程序商店而设计的，您将需要在不同的环境、不同的设备和不同的场景（GPS 位置不佳、有 wifi、没有 wifi 等）中吸引许多不同的人。即使您使用物理设备进行自己的真实 GPS 体验，您也必须意识到其他人可能会体验到不同的 GPS 结果。

6.  我必须承认 iPhone GPS 作为一种通用解决方案对于这类应用程序是否足够准确，并且您可能想要警告用户确保在他们睡觉之前插入他们的 iPhone，以便 GPS 不会不要耗尽电池。您可能还想玩一些技巧，例如在用户证明他们已经启动后打开定位服务。您甚至可能不想在闹钟响起前几分钟打开定位服务，从而确保 GPS 在闹钟响起时尽可能准确，但如果他们不这样做，也不会在他们睡觉时耗尽电池电量碰巧插上电源并充电。

* * *

**更新：**

可能比自己计算距离更容易，使用位置服务距离过滤器（即仅在位置变化*x*米时生成事件）。例如：

```
- (void)startLocationManager
{
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.locationManager.distanceFilter = 5.0; // detect when I move 5 meters
    self.locationManager.delegate = self;
    [self.locationManager startUpdatingLocation];
} 
```

当我这样做时，完全静止不动，一旦我打开定位服务，我什至在开始移动之前就收到了一大堆事件。您可以看到 GPS 正在升温，并且越来越准确：

```
纬度经度水平精度
 ---------------- ------------------ ---------------- --
 39.9482837548282 (82.4963494095571) 65
 39.9482817585030 (82.4964543834170) 10
 39.9482392622539 (82.4964914314290) 5
 39.9481753502422 (82.4964918505242) 5
 39.9481269028419 (82.4964797805836) 5

```

我等待它完全下降（在我的情况下花了 15 到 20 秒），然后我开始直线行走，看着距离上一个位置的距离。

```
纬度经度水平精度距离
 ---------------- ------------------ ---------------- ----------
 39.9481722908476 (82.4964962091138) 5 5.3
 39.9482206544289 (82.4965029146363) 5 10.4
 39.9482627315828 (82.4965282279839) 5 15.4
 39.9483157471204 (82.4965248752227) 5 21.2

```

我必须承认，虽然我没有测量它，但这些距离感觉不太对，但可能在我用我的`distanceFilter`.

无论如何，正如所有这些证据所表明的那样，正确的过程可能是

*   打开位置服务，设置`distanceFilter`适合您的应用程序；

*   等待地点安定下来；

*   确保 Horizo​​ntalAccuracy 甚至是合理的，这个过程完全可以工作；和

*   等待基于 GPS 确定`distanceFilter`已超过的新位置通知。

这永远不会是完美的（例如，在我的“5 米”开始之前，我必须步行 6 到 10 米，可能`distanceFilter`是 GPS 滞后几秒钟和`horizontalAccuracy`。”

（顺便说一句，我在上面的日志中改变了我的坐标，所以不要在这个俄亥俄州的玉米地里找我，但它会让你知道你可能会看到什么样的模式。）

# magento - magento - 在管理屏幕中强制要求客户的公司

> ID：15059061
> 
> 赞同：2
> 
> 时间：2013-02-25T02:07:33.720
> 
> 标签：magento, field

我正在尝试在 Magento CE1.7 中强制使用公司名称。我找到了很多前端的地方进行更改，但我无法在后端管理面板中找到要修改的相关文件。

管理控制台中的链接：/admin/customer/edit/id/68/...

以下是我已确定要进行更改的相关前端文件。

```
 \app\design\frontend\base\default\template\checkout\onepage\billing.phtml
 \app\design\frontend\base\default\template\persistent\checkout\onepage\billing.phtml
 \app\design\frontend\base\default\template\customer\form\address.phtml
 \app\design\frontend\base\default\template\customer\address\edit.phtml
 \app\design\frontend\base\default\template\customer\form\register.phtml
 \app\design\frontend\base\default\template\persistent\customer\form\register.phtml
 \app\design\frontend\base\default\template\checkout\onepage\shipping.phtml 
```

相关链接 - 用于前端... ttp://stackoverflow.com/questions/5456794/magento-make-the-field-company-required

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T05:10:05.673

您应该通过后端执行此操作 - 特别是数据库。

转到**管理 -> 客户 -> 属性 -> 管理客户地址属性**将显示公司字段。单击后，您可以看到必填字段，但是由于这是系统属性，因此**“必填值”**字段已**禁用**。

您可以通过使用开发人员工具栏并从 select 标记中删除**disabeld="disabled"**属性来覆盖它，*或者*您可以直接转到数据库并转到表**eav_attribute**。**然后在attribute_code**下寻找公司，将**is_required**从0改为1。

# c# - ASPX 关于列表 and sorting I am a php programmer. Unlucky that I have to face some Aspx problem. I have two dataSource list Objects: List < Event > eventSource=eventSource.ToList(); List < News > n 问问题 问问题 2013-02-25T02:07:46.523 43 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am a php programmer. Unlucky that I have to face some Aspx problem. I have two dataSource list Objects: List < Event > eventSource=eventSource.ToList(); List < News > newsSource=newData.ToList(); Although event and News had the same fields(id, title, description, last_updated), they are stored in the different tables (news and event), and there is no relationship between two tables. Both of them had last_updated field which contain a datetime. I need to join them into one table and sort them by last_updated desc. Then I write something funny with my java(?) knowledge: List < Object > resultSource=new List < Object >(); foreach (Event eventInfo in eventSource){ resultSource.Add(eventInfo); } I have loop the newsSource and add them in the resultSource. Then I try to use this to sort by datetime: resultSource=resultSource.OrderBy(???).ToList(); But I don't know what parameter should be filled in that ??? area, and I found that I cannot get the "resultInfo.title" in the foreach loop, because I don't have "title" field in the Object class. Do I have anyway to solve this in simple way? No need for regex; built in URL functions should work more reliably. // Parse the url first $url = parse_url($string); // Parse your query string into an array parse_str($url['query'], $qs); // Replace the var3 key with your variable $qs['var3'] = $myVariable; // Convert the array back into a query string $url['query'] = http_build_query($qs); // Convert the $url array back into a URL $newstring = http_build_url($url); Check out http_build_query and parse_str. This will append a var3 variable even if there isn't one, it will URL encode $myVariable, and its more readable than using preg_replace. c#list 4 1 回答 1 This answer is useful 1 您需要使用 lambda 表达式。就像是： resultSource=resultSource.OrderBy(res => res.Name).ToList(); 但是用Name您想要排序的任何属性替换。 于 2013-02-25T02:47:42.977 回答 Related 1 asp.net - .net 将商品和价格存储在数组中 5 c# - 将行动态添加到 HTML 表 1 asp.net-mvc - 实体框架和 AutoMapper - 查询返回视图模型的所有列并且太慢 1 python - 如何让多个客户端监听服务器发送的事件？ 2 jquery - 如何在 JS 中访问嵌套的 JSON？ 1 spring - Spring 上下文配置 0 php - 使用 jqPlot ajax 获取具有两个结果的 JSON 数据 2 c# - 我可以在 using() 之外声明一个上下文并仍然调用 Dispose() 吗？ 0 ios - 通过 iOS 应用程序访问 mac os 服务器上的文件 1 vba - 使用 vba 在模块中以编程方式创建表单 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15059063
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, list

I am a php programmer. Unlucky that I have to face some Aspx problem.

I have two dataSource list Objects:

```
List < Event > eventSource=eventSource.ToList();
List < News > newsSource=newData.ToList(); 
```

Although event and News had the same fields(id, title, description, last_updated), they are stored in the different tables (news and event), and there is no relationship between two tables. Both of them had last_updated field which contain a datetime. I need to join them into one table and sort them by last_updated desc.

Then I write something funny with my java(?) knowledge:

```
List < Object > resultSource=new List < Object >();
foreach (Event eventInfo in eventSource){
   resultSource.Add(eventInfo);
} 
```

I have loop the newsSource and add them in the resultSource. Then I try to use this to sort by datetime:

```
resultSource=resultSource.OrderBy(???).ToList(); 
```

But I don't know what parameter should be filled in that ??? area, and I found that I cannot get the "resultInfo.title" in the foreach loop, because I don't have "title" field in the Object class.

Do I have anyway to solve this in simple way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:47:42.977

您需要使用 lambda 表达式。就像是：

```
resultSource=resultSource.OrderBy(res => res.Name).ToList(); 
```

但是用`Name`您想要排序的任何属性替换。

# java - Location passed from android to web always gets 999.9999

> ID：15059071
> 
> 赞同：0
> 
> 时间：2013-02-25T02:08:32.370
> 
> 标签：java, android, database, location

i can pass successfully my location to my web service using php and android java. but the thing is i always have 999.99999 and -999.99999 in both my longitude and latitude. Can you point to me in what part am i having mistakes.

These are my codes:

**

```
public class LocationGetter extends MapActivity implements LocationListener { // <1>
    private static final String TAG = "LocationActivity";
    LocationManager locationManager; // <2>
    Geocoder geocoder; // <3>
    TextView locationText;
    MapView map;
    MapController mapController; // <4>
    // ** This declarations was for passing of data to web service
    // Progress Dialog
    private ProgressDialog pDialog;
    // JSONParser Object creation
    JSONParser jsonParser = new JSONParser();
    // url to pass location to web
    // private static String url_create_product =
    // "http://student-thesis.netii.net/location_adding.php";
    private static String url_create_product = "http://10.0.2.2/TheCalling/location_adding.php";
    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    //Latitude and Longitude
    private static String ILatitude;
    private static String ILongitude;
    // ** End
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maps);
        locationText = (TextView) this.findViewById(R.id.lblLocationInfo);
        map = (MapView) this.findViewById(R.id.mapview);
        map.setBuiltInZoomControls(true);
        mapController = map.getController(); // <4>
        mapController.setZoom(19);
        locationManager = (LocationManager) this
                .getSystemService(LOCATION_SERVICE); // <2>
        geocoder = new Geocoder(this); // <3>
        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER); // <5>
        if (location != null) {
            Log.d(TAG, location.toString());
            this.onLocationChanged(location); // <6>
        }
    }
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                60000, 5, this); // <7>
    }
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this); // <8>
    }
    @Override
    public void onLocationChanged(Location location) { // <9>
        Log.d(TAG, "onLocationChanged with location " + location.toString());
        String text = String.format(
                "Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f \n",
                location.getLatitude(), location.getLongitude(),
                location.getAltitude(), location.getBearing());
        this.locationText.setText(text);
        try {
            List<Address> addresses = geocoder.getFromLocation(
                    location.getLatitude(), location.getLongitude(), 10); // <10>
            for (Address address : addresses) {
                this.locationText.append(" " + address.getAddressLine(0));
            }
            int latitude = (int) (location.getLatitude() * 1000000);
            int longitude = (int) (location.getLongitude() * 1000000);

            GeoPoint point = new GeoPoint(latitude, longitude);
            mapController.animateTo(point); // <11>
            List<Overlay> mapOverlays = map.getOverlays();
            Drawable drawable = this.getResources().getDrawable(
                    R.drawable.reddot);
            AddItemizedOverlay itemizedOverlay = new AddItemizedOverlay(
                    drawable, this);
            OverlayItem overlayitem = new OverlayItem(point, "Hello",
                    "Sample Overlay item");
            itemizedOverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedOverlay);

            ILatitude = Integer.toString(latitude);
            ILongitude = Integer.toString(longitude);
            new phpconnect().execute();

        } catch (IOException e) {
            Log.e("LocateMe", "Could not get Geocoder data", e);
        }
    }
    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    class phpconnect extends AsyncTask<String, String, String> {
        @Override
        protected String doInBackground(String... args) {
            String strLatitude = ILatitude;
            String strLongitude = ILongitude;
            // Building parameters
            List<NameValuePair> params1 = new ArrayList<NameValuePair>();
            params1.add(new BasicNameValuePair("latitude", strLatitude));
            params1.add(new BasicNameValuePair("longitude", strLongitude));
            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params1);
            // check log cat fro response
            Log.d("Create Response", json.toString());
            try {
                int success = json.getInt(TAG_SUCCESS);
                if (success == 1) {
                    // successfully updated
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }
    }
} 
```

**

Thank you in advance guys.

well i guess i don't need to post my php codes here, but if you want to check just notify me. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:13:16.060

I'm guessing your numbers are exceeding the bounds of int. Try using BigInteger or perhaps the long primitive type.

# python - What do I put in pip requirements file for a package not in pypi

> ID：15059072
> 
> 赞同：6
> 
> 时间：2013-02-25T02:08:44.593
> 
> 标签：python, heroku, pip

I installed python google visualization api into my virtualenv with

```
pip install -U -f http://code.google.com/p/google-visualization-python/ gviz-api-py 
```

What do I need to put in pip requirements.txt file so that Heroku can download and install it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:52:46.337

尝试在您的`requirements.txt`:

```
-e svn+http://google-visualization-python.googlecode.com/svn/trunk#egg=google-visualization-python 
```

**或者**

```
-e svn+http://google-visualization-python.googlecode.com/svn/trunk@26#egg=gviz_api.py-1.8.2-py2.7-dev_r26 
```

了解如何使用 pip[从 VCS 安装。](http://guide.python-distribute.org/pip.html#installing-from-a-vcs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T01:22:55.410

这应该这样做：

```
https://github.com/google/google-visualization-python/zipball/master 
```

这将安装 gviz-apy.py

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T12:09:57.167

根据错误信息

> [从 svn+ http://google-visualization-python.googlecode.com/svn/trunk@26#egg=gviz_api.py-1.8.2-py2.7-dev_r26](http://google-visualization-python.googlecode.com/svn/trunk@26#egg=gviz_api.py-1.8.2-py2.7-dev_r26)获取 gviz-api.py （来自 -r requirements.txt （第 6 行））检查[http://google-visualization-python.googlecode.com/svn/trunk](http://google-visualization-python.googlecode.com/svn/trunk)（到修订版 26）到 ./.heroku/src/gviz-api.py 找不到命令 'svn'

连svn都不允许。

在这种情况下，从 googlecode 获取源代码到您的项目目录中并将`.svn`目录添加到`.gitignore`. 或者在 github 上创建 fork 并使用它。

但在克隆到 github 之前阅读[http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)我不知道它是否允许这样的动作。

# dotcloud - Run Python 2.7 by default in a Dotcloud custom service

> ID：15059073
> 
> 赞同：0
> 
> 时间：2013-02-25T02:08:58.733
> 
> 标签：dotcloud

I need to make Python 2.7 the default version of Python for running a Jenkins build server. I'm trying to use `python_version` to do this, but Python 2.6 remains the default version. I'm probably missing something really simple. Any suggestions?

*dotcloud.yml*

```
jenkins:
  type: custom
  buildscript: jenkins/builder
  ports:
    www: http
  config:
    python_version: v2.7
  processes: 
    sshagent: ssh-agent /bin/bash
    jenkins: ~/run
db:
  type: postgresql 
```

*builder*

```
#!/bin/bash                                                                                                                                                                                                                                   
if [ -f ~/jenkins.war ]
then
    echo 'Found jenkins installation.'
else
    echo 'Installing jenkins.'
    wget -O ~/jenkins.war http://mirrors.jenkins-ci.org/war/latest/jenkins.war
fi
echo 'Installing dotCloud scaffolding.'
cp -a jenkins/. ~

echo 'Setting up SSH.'
mkdir -p ~/.ssh
cp jenkins_id ~/.ssh/id_rsa
chmod 0600 ~/.ssh/id_rsa
ssh-keygen -R bitbucket.org
ssh-keyscan -H bitbucket.org >> ~/.ssh/known_hosts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:52:51.297

我仍然不确定为什么我的构建文件没有解决问题，但我能够通过`--python=/usr/bin/python2.7`在我的 Jenkins 构建脚本中使用 virtualenv 选项来解决它。

# linux - How can I write a mini program that is compatible with all unix-like systems?

> ID：15059074
> 
> 赞同：0
> 
> 时间：2013-02-25T02:09:04.430
> 
> 标签：linux, freebsd, glibc, system-calls, libc

I want to write a socket program in Linux. So it'll use glibc system calls like socket(), bind(), listen(), write() etc.

I wonder, can i compile it without any changing in FreeBSD, Solaris or Mac OS? If yes, is it called "posix standards"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:05:08.317

Socket()、bind()、write() 都是 Posix 函数，使用它们将使您的代码可在各种 POSIX 兼容操作系统上移植。

Linux 使用 glibc，但其他 POSIX 投诉操作系统将使用任何其他 libc，不一定是 glibc。但是上述所有函数（系统调用）都将使用相同的签名和功能实现，您可以编译并在任何地方运行相同的代码。

[http://en.wikipedia.org/wiki/Berkeley_sockets#BSD_vs_POSIX](http://en.wikipedia.org/wiki/Berkeley_sockets#BSD_vs_POSIX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:46:57.503

您提到的所有系统都遵循[Single UNIX Specification](http://en.wikipedia.org/wiki/Single_UNIX_Specification)，并将 POSIX:2001 作为共同点（请参阅[合规性](http://en.wikipedia.org/wiki/Single_UNIX_Specification#Compliance)部分），因此这就是您想要的目标。

然而，GNU libc 有许多 POSIX 中没有的功能。要查看是否可以使用特定功能，可以查看相关联机帮助页的“CONFORMING TO”部分，或参考 GNU libc 手册。例如我们可以在 socket(2) 中看到 socket 符合 POSIX.1-2001，所以你可以使用它。

有关这方面的更多背景信息，请阅读[1.2 标准和可移植性](http://www.gnu.org/software/libc/manual/html_mono/libc.html#Standards-and-Portability)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T02:17:48.333

套接字调用起源于 BSD，但如今所有类 Unix 操作系统都支持它们。Windows 也以自己的方式在一定程度上支持这些（称为 Winsock）。

我不认为这些是 Posix 的一部分，但实际上你不应该有可移植性问题。

顺便说一句，当您执行“man 2 socket”（或任何调用）时，它会在底部显示有用的历史记录和标准信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T02:25:25.667

您可以进行网络的最便携的方法之一是使用 Boost 的 Asio 库：

[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio.html)

它易于使用并可移植到 Windows 和 Unix/Posix 系统（如 Linux、Mac、各种 BSD 等）

# haskell - Haskell http-conduit web-scraping daemon crashes with out of memory error

> ID：15059075
> 
> 赞同：8
> 
> 时间：2013-02-25T02:09:25.060
> 
> 标签：haskell, memory, conduit

I've written a daemon in Haskell that scrapes information from a webpage every 5 minutes.

The daemon originally ran fine for about 50 minutes, but then it unexpectedly died with `out of memory (requested 1048576 bytes)`. Every time I ran it it died after the same amount of time. Setting it to sleep only 30 seconds, it instead died after 8 minutes.

I realized the code to scrape the website was incredibly memory inefficient (going from about 30M while sleeping to 250M while parsing 9M of html), so I rewrote it so that now it only uses about 15M extra while parsing. Thinking the problem was fixed, I ran the daemon overnight and when I woke up it was actually using less memory than it was that night. I thought I was done, but roughly 20 hours after it had started, it had crashed with the same error.

I started looking into ghc profiling but I wasn't able to get that to work. Next I started messing with [rts options](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/runtime-control.html), and I tried setting `-H64m` to set the default heap size to be larger than my program was using, and also using `-Ksize` to shrink the maximum size of the stack to see if that would make it crash sooner.

Despite every change I've made, the daemon still seems to crash after a constant number of iterations. Making the parsing more memory efficient made this value higher, but it still crashes. This doesn't make sense to me because none of these have runs have even come close to using all of my memory, much less swap space. The heap size is supposed to be unlimited by default, shrinking the stack size didn't make a difference, and all my ulimits are either unlimited or significantly higher than what the daemon is using.

In the original code I pinpointed the crash to somewhere in the html parsing, but I haven't done the same for the more memory efficient version because 20 hours takes so long to run. I don't know if this would even be useful to know because it doesn't seem like any specific part of the program is broken because it run successfully for dozens of iterations before crashing.

Out of ideas, I even looked through the [ghc source code](https://github.com/ghc/ghc/blob/master/rts/posix/OSMem.c) for this error, and it appears to be a failed call to mmap, which wasn't very helpful to me because I assume that isn't the root of the problem.

(Edit: code rewritten and moved to end of post)

I'm pretty new at Haskell, so I'm hoping this is some quirk of lazy evaluation or something else that has a quick fix. Otherwise, I'm fresh out of ideas.

I'm using GHC version 7.4.2 on FreeBsd 9.1

Edit:

Replacing the downloading with static html got rid of the problem, so I've narrowed it down to how I'm using http-conduit. I've edited the code above to include my networking code. The hackage docs mention to share a manager so I've done that. And it also says that for `http` you have to explicitly close connections, but I don't think I need to do that for `httpLbs`.

Here's my code.

```
import Control.Monad.IO.Class (liftIO)
import qualified Data.Text as T
import qualified Data.ByteString.Lazy as BL
import Text.Regex.PCRE
import Network.HTTP.Conduit

main :: IO ()
main = do
    manager <- newManager def
    daemonLoop manager

daemonLoop :: Manager -> IO ()
daemonLoop manager = do
    rows <- scrapeWebpage manager
    putStrLn $ "number of rows parsed: " ++ (show $ length rows)
    doSleep
    daemonLoop manager

scrapeWebpage :: Manager -> IO [[BL.ByteString]]
scrapeWebpage manager = do
    putStrLn "before makeRequest"
    html <- makeRequest manager
    -- Force evaluation of html.
    putStrLn $ "html length: " ++ (show $ BL.length html)
    putStrLn "after makeRequest"
    -- Breaks ~10M html table into 2d list of bytestrings.
    -- Max memory usage is about 45M, which is about 15M more than when sleeping.
    return $ map tail $ html =~ pattern
    where
        pattern :: BL.ByteString
        pattern = BL.concat $ replicate 12 "<td[^>]*>([^<]+)</td>\\s*"

makeRequest :: Manager -> IO BL.ByteString
makeRequest manager = runResourceT $ do
    defReq <- parseUrl url
    let request = urlEncodedBody params $ defReq
                    -- Don't throw errors for bad statuses.
                    { checkStatus = \_ _ -> Nothing
                    -- 1 minute.
                    , responseTimeout = Just 60000000
                    }
    response <- httpLbs request manager
    return $ responseBody response 
```

and it's output:

```
before makeRequest
html length: 1555212
after makeRequest
number of rows parsed: 3608
...
before makeRequest
html length: 1555212
after makeRequest
bannerstalkerd: out of memory (requested 2097152 bytes) 
```

Getting rid of the regex computations fixed the problem, but it seems that the error happens after the networking and during the regex, presumably because of something I'm doing wrong with http-conduit. Any ideas?

Also, when I try to compile with profiling enabled I get this error:

```
Could not find module `Network.HTTP.Conduit'
Perhaps you haven't installed the profiling libraries for package `http-conduit-1.8.9'? 
```

Indeed, I have not installed profiling libraries for `http-conduit` and I don't know how.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:44:38.127

所以你发现自己有漏洞。通过欺骗编译器选项和内存设置，您只能推迟程序崩溃的那一刻，但您无法消除问题的根源，因此无论您在那里设置什么，最终您仍然会耗尽内存。

我建议您仔细浏览所有非纯代码，主要是使用资源的部分。检查所有资源是否正确释放。检查您是否有累积状态，例如不断增长的无界通道。当然，正如 nm 明智地建议的那样，[对它进行剖析](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/prof-heap.html)。

我有一个抓取器，它可以在不暂停和下载文件的情况下解析页面，并且它同时完成所有操作。我从来没有见过它使用超过 60M 的内存。我一直在用 GHC 7.4.2、GHC 7.6.1 和 GHC 7.6.2 编译它，并且两者都没有问题。

应该注意的是，您的问题的根源也可能在您正在使用的库中。在我的刮刀中，我使用`http-conduit`,和.`http-conduit-browser``HandsomeSoup``HXT`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T03:23:41.333

我最终解决了我自己的问题。这似乎是 FreeBSD 上的 GHC 错误。我提交了一份错误报告并切换到了 Linux，现在它在过去几天里运行完美。

# r - Call apply-like function on each row of dataframe with multiple arguments from each row

> ID：15059076
> 
> 赞同：187
> 
> 时间：2013-02-25T02:09:31.870
> 
> 标签：r, dataframe

I have a dataframe with multiple columns. For each row in the dataframe, I want to call a function on the row, and the input of the function is using multiple columns from that row. For example, let's say I have this data and this testFunc which accepts two args:

```
> df <- data.frame(x=c(1,2), y=c(3,4), z=c(5,6))
> df
  x y z
1 1 3 5
2 2 4 6
> testFunc <- function(a, b) a + b 
```

Let's say I want to apply this testFunc to columns x and z. So, for row 1 I want 1+5, and for row 2 I want 2 + 6\. Is there a way to do this without writing a for loop, maybe with the apply function family?

I tried this:

```
> df[,c('x','z')]
  x z
1 1 5
2 2 6
> lapply(df[,c('x','z')], testFunc)
Error in a + b : 'b' is missing 
```

But got error, any ideas?

**EDIT:** the actual function I want to call is not a simple sum, but it is power.t.test. I used a+b just for example purposes. The end goal is to be able to do something like this (written in pseudocode):

```
df = data.frame(
    delta=c(delta_values), 
    power=c(power_values), 
    sig.level=c(sig.level_values)
)

lapply(df, power.t.test(delta_from_each_row_of_df, 
                        power_from_each_row_of_df, 
                        sig.level_from_each_row_of_df
)) 
```

where the result is a vector of outputs for power.t.test for each row of df.

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-02-25T02:18:02.340

您可以应用`apply`到原始数据的子集。

```
 dat <- data.frame(x=c(1,2), y=c(3,4), z=c(5,6))
 apply(dat[,c('x','z')], 1, function(x) sum(x) ) 
```

或者如果您的函数只是 sum 使用矢量化版本：

```
rowSums(dat[,c('x','z')])
[1] 6 8 
```

如果你想使用`testFunc`

```
 testFunc <- function(a, b) a + b
 apply(dat[,c('x','z')], 1, function(x) testFunc(x[1],x[2])) 
```

**编辑**要按名称而不是索引访问列，您可以执行以下操作：

```
 testFunc <- function(a, b) a + b
 apply(dat[,c('x','z')], 1, function(y) testFunc(y['z'],y['x'])) 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-02-25T02:47:38.677

A`data.frame`是`list`, 所以 ...

对于**矢量化函数** `do.call`，通常是一个不错的选择。但是参数的名称开始发挥作用。在这里，您`testFunc`用 args x 和 y 代替 a 和 b 调用。`...`允许传递不相关的参数而不会导致错误：

```
do.call( function(x,z,...) testFunc(x,z), df ) 
```

对于**非向量化函数**，`mapply`可以使用，但您需要匹配 args 的顺序或明确命名它们：

```
mapply(testFunc, df$x, df$z) 
```

有时`apply`会起作用 - 因为当所有 args 都属于同一类型时，因此强制`data.frame`转换为矩阵不会因更改数据类型而导致问题。你的例子就是这种。

如果您的函数要在参数全部传递到的另一个函数中调用，则有比这些更巧妙的方法。`lm()`如果你想走那条路，研究一下身体的第一行。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-02-25T02:31:04.640

利用`mapply`

```
> df <- data.frame(x=c(1,2), y=c(3,4), z=c(5,6))
> df
  x y z
1 1 3 5
2 2 4 6
> mapply(function(x,y) x+y, df$x, df$z)
[1] 6 8

> cbind(df,f = mapply(function(x,y) x+y, df$x, df$z) )
  x y z f
1 1 3 5 6
2 2 4 6 8 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-11-05T21:53:31.870

## `dplyr`包的新答案

如果您要应用的函数是矢量化的，那么您可以使用包中的`mutate`函数`dplyr`：

```
> library(dplyr)
> myf <- function(tens, ones) { 10 * tens + ones }
> x <- data.frame(hundreds = 7:9, tens = 1:3, ones = 4:6)
> mutate(x, value = myf(tens, ones))
  hundreds tens ones value
1        7    1    4    14
2        8    2    5    25
3        9    3    6    36 
```

## `plyr`包的旧答案

在我看来，最适合该任务的工具`mdply`来自`plyr`包。

例子：

```
> library(plyr)
> x <- data.frame(tens = 1:3, ones = 4:6)
> mdply(x, function(tens, ones) { 10 * tens + ones })
  tens ones V1
1    1    4 14
2    2    5 25
3    3    6 36 
```

不幸的是，正如[Bertjan Broeksema](https://stackoverflow.com/users/1683513/bertjan-broeksema)指出的那样，如果您没有在`mdply`调用中使用数据框的所有列，这种方法就会失败。例如，

```
> library(plyr)
> x <- data.frame(hundreds = 7:9, tens = 1:3, ones = 4:6)
> mdply(x, function(tens, ones) { 10 * tens + ones })
Error in (function (tens, ones)  : unused argument (hundreds = 7) 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-01-16T00:21:37.010

其他人已经正确地指出这`mapply`是为此目的而制作的，但是（为了完整起见）概念上更简单的方法就是使用`for`循环。

```
for (row in 1:nrow(df)) { 
    df$newvar[row] <- testFunc(df$x[row], df$z[row]) 
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-02-25T02:25:37.983

许多函数已经矢量化，因此不需要任何迭代（`for`循环或`*pply`函数）。你`testFunc`就是这样一个例子。您可以简单地调用：

```
 testFunc(df[, "x"], df[, "z"]) 
```

一般来说，我建议先尝试这种矢量化方法，看看它们是否能得到你想要的结果。

* * *

或者，如果您需要将多个参数传递给未矢量化的函数，则`mapply`可能是您正在寻找的：

```
 mapply(power.t.test, df[, "x"], df[, "z"]) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-02T18:53:41.533

这是另一种方法。它更直观。

我觉得一些答案没有考虑到的一个关键方面，我为后代指出的是 apply() 让您可以轻松地进行行计算，但仅适用于矩阵（所有数字）数据

对于数据框，仍然可以对列进行操作：

```
as.data.frame(lapply(df, myFunctionForColumn())) 
```

为了对行进行操作，我们首先进行转置。

```
tdf<-as.data.frame(t(df))
as.data.frame(lapply(tdf, myFunctionForRow())) 
```

缺点是我相信 R 会复制你的数据表。这可能是内存问题。（这真的很可悲，因为 tdf 在编程上很简单，只是作为原始 df 的迭代器，从而节省了内存，但 R 不允许指针或迭代器引用。）

此外，一个相关的问题是如何对数据帧中的每个单独的单元格进行操作。

```
newdf <- as.data.frame(lapply(df, function(x) {sapply(x, myFunctionForEachCell()})) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-01-15T20:58:06.247

`data.table`也有一种非常直观的方法：

```
library(data.table)

sample_fxn = function(x,y,z){
    return((x+y)*z)
}

df = data.table(A = 1:5,B=seq(2,10,2),C = 6:10)
> df
   A  B  C
1: 1  2  6
2: 2  4  7
3: 3  6  8
4: 4  8  9
5: 5 10 10 
```

`:=`可以在括号内调用运算符以使用函数添加新列

```
df[,new_column := sample_fxn(A,B,C)]
> df
   A  B  C new_column
1: 1  2  6         18
2: 2  4  7         42
3: 3  6  8         72
4: 4  8  9        108
5: 5 10 10        150 
```

使用此方法也很容易接受常量作为参数：

```
df[,new_column2 := sample_fxn(A,B,2)]

> df
   A  B  C new_column new_column2
1: 1  2  6         18           6
2: 2  4  7         42          12
3: 3  6  8         72          18
4: 4  8  9        108          24
5: 5 10 10        150          30 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-02-25T02:42:56.577

@user20877984 的回答非常好。由于他们总结得比我之前的答案好得多，所以这是我（可能仍然是粗制滥造）尝试应用该概念的尝试：

以`do.call`基本方式使用：

```
powvalues <- list(power=0.9,delta=2)
do.call(power.t.test,powvalues) 
```

处理完整的数据集：

```
# get the example data
df <- data.frame(delta=c(1,1,2,2), power=c(.90,.85,.75,.45))

#> df
#  delta power
#1     1  0.90
#2     1  0.85
#3     2  0.75
#4     2  0.45 
```

`lapply``power.t.test`指定值的每一行的函数：

```
result <- lapply(
  split(df,1:nrow(df)),
  function(x) do.call(power.t.test,x)
)

> str(result)
List of 4
 $ 1:List of 8
  ..$ n          : num 22
  ..$ delta      : num 1
  ..$ sd         : num 1
  ..$ sig.level  : num 0.05
  ..$ power      : num 0.9
  ..$ alternative: chr "two.sided"
  ..$ note       : chr "n is number in *each* group"
  ..$ method     : chr "Two-sample t test power calculation"
  ..- attr(*, "class")= chr "power.htest"
 $ 2:List of 8
  ..$ n          : num 19
  ..$ delta      : num 1
  ..$ sd         : num 1
  ..$ sig.level  : num 0.05
  ..$ power      : num 0.85
... ... 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-03-05T15:04:42.323

我来这里是为了寻找[tidyverse](http://tidyverse.org/)函数名称——我知道它存在。添加此内容以供（我的）未来参考和`tidyverse`爱好者：（`purrrlyr:invoke_rows`在`purrr:invoke_rows`旧版本中）。

通过与原始问题中的标准统计方法的连接，[扫帚](https://github.com/tidyverse/broom)包可能会有所帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-07-11T19:28:22.997

如果 data.frame 列是不同的类型，就会`apply()`有问题。行迭代的一个微妙之处`apply(a.data.frame, 1, ...)`在于，当列是不同的类型时，如何将隐式类型转换为字符类型；例如。一个因子和数字列。这是一个示例，使用一列中的因子来修改数字列：

```
mean.height = list(BOY=69.5, GIRL=64.0)

subjects = data.frame(gender = factor(c("BOY", "GIRL", "GIRL", "BOY"))
         , height = c(71.0, 59.3, 62.1, 62.1))

apply(height, 1, function(x) x[2] - mean.height[[x[1]]]) 
```

减法失败，因为列被转换为字符类型。

一种解决方法是将第二列反向转换为数字：

```
apply(subjects, 1, function(x) as.numeric(x[2]) - mean.height[[x[1]]]) 
```

但是可以通过保持列分开并使用来避免转换`mapply()`：

```
mapply(function(x,y) y - mean.height[[x]], subjects$gender, subjects$height) 
```

`mapply()`是必需的，因为`[[ ]]`不接受向量参数。因此，列迭代可以在减法之前通过将向量传递给 来完成`[]`，代码更难看：

```
subjects$height - unlist(mean.height[subjects$gender]) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-02-08T20:42:47.260

一个非常好的函数是`adply`from `plyr`，特别是如果你想将结果附加到原始数据帧。这个函数和它的表弟`ddply`为我省去了很多麻烦和代码行！

```
df_appended <- adply(df, 1, mutate, sum=x+z) 
```

或者，您可以调用所需的函数。

```
df_appended <- adply(df, 1, mutate, sum=testFunc(x,z)) 
```

# javascript - Accessing app settings in Express 3 controllers

> ID：15059077
> 
> 赞同：2
> 
> 时间：2013-02-25T02:09:44.347
> 
> 标签：javascript, express

I'm curious what people use for accessing Express 3 settings (from get/set) in controllers and models. I know that I can access it through the request but I am not sure what the best approach is to access it outside of the routes such as in a model. I currently use a combination of app.set and app.get as well as a static array called settings that I require here:

Here's what I have right now:

```
// conf/configuration.js
var settings;

module.exports = function(app, express) {
  app.set("root_dir", process.cwd() + "/");
  app.set("public_dir", process.cwd() + "/public");
  ...
};

settings = {
  foo: bar,
  ...

};

module.exports.settings = settings; 
```

and in models I do

```
var settings = require("../conf/configuration").settings; 
```

But I would like to do away with that settings array as I find the 2 methods a bit messy. Recommendation on how to access say 'root_dir' in a misc file?

# .net - .NET 框架中的 Vector3 类

> ID：15059078
> 
> 赞同：3
> 
> 时间：2013-02-25T02:09:49.133
> 
> 标签：.net, performance, vector

我发现 .NET 框架中有两个不同的矢量类实现：Microsoft.DirectX.Vector3 和 Microsoft.XNA.Framework.Vector3。

查看成员方法，它们提供几乎相同的功能，所以我很困惑.. 通常推荐哪些类？

我的程序不需要可视化 3D 对象，而只需要计算具有 3D 点的 CPU 密集型作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-18T01:27:59.053

从**.NET Framework 4.6** `System.Numerics.Vectors`开始引入了支持 SIMD 的类型：

*   `Vector2`,`Vector3`和 `Vector4`
*   `Vector<T>`T型任意长度
*   `Quaternion`
*   `Plane`
*   `Matrix4x4`和`Matrix3x2`

（在*System.Numerics.Vectors.dll*中）

如果您使用的是 DirectX 或 XNA，您应该坚持使用它们提供的类。

对于可以使用 .NET 4.6 或更高版本的新项目，这是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:37:50.077

**更新 06/2016** *此答案最初是在 .NET 4.6 可用之前编写的，因此当时 System.Numerics.Vectors.dll 不存在。从那时起，System.Numerics.Vectors.dll 为使用 BCL 中定义的类型提供了强大的动力*。

根据您将使用的框架，您将需要使用相应的结构。否则它们非常相似并且都是值类型。

在两个不同的命名空间/程序集中存在相同类型对象的两种实现的原因是，如果一个引用另一个，则会在程序集之间创建一个依赖关系，否则这是不必要的。

如果您不打算使用 DirectX 或 XNA，那么您可以选择其中任何一个。但在这种情况下，您可能应该使用 System.Numerics.Vectors.dll 中定义的新结构，正如@JBeurer 在他的回答中提到的那样。

# python - How can I run python3 on my apache server by default?

> ID：15059080
> 
> 赞同：1
> 
> 时间：2013-02-25T02:10:05.450
> 
> 标签：python, python-3.x, mod-wsgi, mod-python

I am a beginner to Python here, and I am having an issue.

In my setup, I was using a PHP script to call the command line which in turn would execute a python script. Since then, I've discovered that I can run python directly.

My problem is that 2.6 is running when I call the script directly, and I need Python 3.3 to run instead.

After looking this up, I found I need to recompile `mod_python`, but then I found that I want to use `mod_wsgi` instead which is giving me a whole series of other errors like my python3 installation not having `--shared-libraries` when `make` was ran.

I am pulling my hair out trying to do such a seemingly simple task. Is there any direction someone can point me in? Again, I am a Python beginner. Any help is apprecited!

# css - CSS。删除溢出-y。无包装。保持元素内联

> ID：15059081
> 
> 赞同：4
> 
> 时间：2013-02-25T02:10:33.040
> 
> 标签：css, overflow, inline, nowrap

这有什么问题？我已经阅读了几篇文章，其中建议为了将 inline-block 元素全部放在同一行上，**只需要**溢出-x，父级上只需要以下 CSS：

```
div { 
overflow-x:scroll;
overflow-y:hidden;
white-space:nowrap;
} 
```

这是我的 CSS，直接来自我的萤火虫，用于父级和我在同一行上需要的元素。元素仅以垂直溢出包装。我很困惑。有什么建议么？

```
.elementsRequiredOnSameLine {
background: none repeat scroll 0 0 white;
display: inline-block;
float: left;
height: 10em;
text-align: center;
width: 6em;
}

.parent{
display: inline-block;
margin: 10px auto;
min-height: 12em;
overflow-x: scroll;
padding: 10px;
white-space: nowrap;
width: 95%;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T02:16:39.847

在元素上使用`float: left`会导致它们忽略`nowrap`规则。由于您已经在使用`display: inline-block`，因此无需浮动元素即可让它们并排显示。只需删除`float: left`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:13:04.597

是因为浮动：左；，一旦我删除它，很好。输入问题后发现它抱歉。

# python - How to use first function's return value in second function?

> ID：15059082
> 
> 赞同：-5
> 
> 时间：2013-02-25T02:10:48.433
> 
> 标签：python, python-3.x, tuples, function

This is my code. In the first def function, I made it return column_choose, and I wanna use column_choose's value in second def function(get_data_list). What can I do? I have tried many times. But IDLE always show:global name 'column_choose' is not defined.

How to use column_choose's value in second function? By the way, I use python 3.2

```
def get_column_number():
while True:
    column_choose = input('What column:')
    if column_choose == '1' or column_choose == '2' or column_choose == '3' or column_choose == '4' or column_choose == '5' or column_choose == '6':
        column_choose = int(column_choose)
        return column_choose
        break
    else:
        print('bad column number, try again')

def get_data_list(column_number):
new_column_number = column_number.split(',')
date_column = new_column_number[0]
choose_column = new_column_number[column_choose-1]

return result

def main():
#Call get_input_descriptor
get_input_descriptor()
#Call get_column_number
get_column_number()

file_obj = open("table.csv", "r")
for column_number in file_obj:
    column_number = (column_number.strip())
    result = get_data_list(column_number)
    print(result)

file_obj.close()
main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:52:31.970

1.  你的缩进格式错误？

2.  `return`你在你的函数中有使用`get_column_number`，所以你不需要`break`在它之后使用

3.  该函数`get_column_number`返回一个变量，因此您可以使用它分配给一个变量

    就像：

    ```
    var = get_column_number() 
    ```

    然后使用 var 变量

4.  如果你希望它是一个全局变量，你可以使用`global`

我觉得你需要读一本python书来掌握基本知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:15:46.897

您需要将列号分配给变量。此外，您不需要该`break`声明，因为您将其放在退货之后。

```
#Call get_column_number
column_num = get_column_number() 
```

另外，我不确定您是否正确编写了代码。该行 `for column_number in file obj:`正在遍历您的 csv 文件。如果您尝试访问特定列，您可以这样做：

```
content = ''
file_obj = open('table.csv','r')
content = fle_obj.split(',')
print(content[column_number]) 
```

# rabbitmq - 有没有一种简单的方法可以订阅 EasyNetQ 中的默认错误队列？

> ID：15059083
> 
> 赞同：6
> 
> 时间：2013-02-25T02:11:52.117
> 
> 标签：rabbitmq, easynetq

在我的测试应用程序中，我可以看到处理后的异常消息被自动插入到默认的 EasyNetQ_Default_Error_Queue 中，这很棒。[然后，我可以使用Hosepipe](https://github.com/mikehadlow/EasyNetQ/wiki/Re-Submitting-Error-Messages-With-EasyNetQ.Hosepipe)成功转储或重新排队这些消息，这也可以正常工作，但需要下拉到命令行并调用 Hosepipe 和 RabbitMQ API 以清除重试消息的队列。

所以我认为我的应用程序最简单的方法是简单地订阅错误队列，这样我就可以使用相同的基础设施重新处理它们。但在 EastNetQ 中，错误队列似乎很特殊。我们需要使用正确的类型和路由 ID 进行订阅，所以我不确定错误队列的这些值应该是什么：

`bus.Subscribe<WhatShouldThisBe>("and-this", ReprocessErrorMessage);`

我可以使用简单的 API 订阅错误队列，还是需要深入研究[高级 API](https://github.com/mikehadlow/EasyNetQ/wiki/The-Advanced-API)？

如果我的原始消息的类型是`TestMessage`，那么我希望能够执行以下操作：

`bus.Subscribe<ErrorMessage<TestMessage>>("???", ReprocessErrorMessage);`

其中`ErrorMessage`是 EasyNetQ 提供的用于包装所有错误的类。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:15:45.660

您不能使用简单的 API 来订阅错误队列，因为它不遵循 EasyNetQ 队列类型命名约定——也许这是应该修复的；）

但高级 API 工作正常。您不会得到原始消息，但很容易获得 JSON 表示，您可以很容易地对自己进行反序列化（使用 Newtonsoft.JSON）。这是您的订阅代码应如下所示的示例：

```
[Test]
[Explicit("Requires a RabbitMQ server on localhost")]
public void Should_be_able_to_subscribe_to_error_messages()
{
    var errorQueueName = new Conventions().ErrorQueueNamingConvention();
    var queue = Queue.DeclareDurable(errorQueueName);
    var autoResetEvent = new AutoResetEvent(false);

    bus.Advanced.Subscribe<SystemMessages.Error>(queue, (message, info) =>
    {
        var error = message.Body;

        Console.Out.WriteLine("error.DateTime = {0}", error.DateTime);
        Console.Out.WriteLine("error.Exception = {0}", error.Exception);
        Console.Out.WriteLine("error.Message = {0}", error.Message);
        Console.Out.WriteLine("error.RoutingKey = {0}", error.RoutingKey);

        autoResetEvent.Set();
        return Task.Factory.StartNew(() => { });
    });

    autoResetEvent.WaitOne(1000);
} 
```

在此之前，我必须修复在 EasyNetQ 中编写代码的错误消息中的一个小错误，因此请在尝试之前获取一个 >= 0.9.2.73 的版本。[您可以在此处](https://github.com/EasyNetQ/EasyNetQ/blob/master/Source/EasyNetQ.Tests/Integration/SubscribeToErrorQueueSpike.cs)查看代码示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T19:56:32.337

有效的代码：（我猜了一下）

'foo' 的诡异之处在于，如果我只是将该函数 HandleErrorMessage2 传递给 Consume 调用，它无法确定它返回的是 void 而不是 Task，因此无法确定要使用哪个重载。（VS 2012）分配给一个 var 让它快乐。您将需要捕获调用的返回值，以便能够通过处置对象来取消订阅。

另请注意，有人使用了系统对象名称（队列）而不是使其成为 EasyNetQueue 或其他名称，因此您必须为编译器添加使用说明，或完全指定它。

```
 using Queue = EasyNetQ.Topology.Queue;

  private const string QueueName = "EasyNetQ_Default_Error_Queue";
  public static void Should_be_able_to_subscribe_to_error_messages(IBus bus)
  {
     Action <IMessage<Error>, MessageReceivedInfo> foo = HandleErrorMessage2;

     IQueue queue = new Queue(QueueName,false);
     bus.Advanced.Consume<Error>(queue, foo);
  }

  private static void HandleErrorMessage2(IMessage<Error> msg, MessageReceivedInfo info)
 {
 } 
```

# mongodb - mongodb store and sort by color

> ID：15059084
> 
> 赞同：0
> 
> 时间：2013-02-25T02:11:55.203
> 
> 标签：mongodb

I'm going to create a database with a lot of RGB colors within a document. Later on I would like so sort, filter them by color/closeness.

Do you have any tips'n tricks for me? How should i store them?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:14:27.587

如处理参考中所述，我通过将它们存储为整数找到了解决方案。

[http://processing.org/reference/color_datatype.html](http://processing.org/reference/color_datatype.html)
[http://processing.org/reference/rightshift.html](http://processing.org/reference/rightshift.html)

# entity-framework - MVC4 EF DB First - How to access a models foreign key (ICollection)

> ID：15059086
> 
> 赞同：0
> 
> 时间：2013-02-25T02:12:30.263
> 
> 标签：entity-framework, asp.net-mvc-4, model, foreign-key-relationship, icollection

I created a MSSQL database with tables containing foreign keys. I then created a new MVC 4 web application. I used Entity Framework to generate my controllers/models/views. In the models, tables that were linked using foreign keys appear as ICollections. For example:

```
 public partial class Test
{

    public Test()
    {
        this.Questions = new HashSet<Question>();
        this.Users = new HashSet<User>();
    }

    public int testId { get; set; }
    public string name { get; set; }
    public string description { get; set; }
    public Nullable<int> pointValue { get; set; }
    public Nullable<int> numberOfQuestions { get; set; }

    public virtual ICollection<Question> Questions { get; set; }
    public virtual ICollection<User> Users { get; set; }

    }
} 
```

My question is how am I able to access the data stored in those ICollections in a view? Test.Questions[x] <-- gives errors.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:57:32.190

这比我预期的要简单。我只需要使用一个 foreach 循环：

```
 @foreach (var question in item.Questions)
    {
        <td>@question.question1</td>
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:21:07.097

`ICollection<T>`就像`IList<T>`or一样`T[]`，因此您必须先在集合中获取一个元素，然后再引用它的属性。例如

```
Test test = testService.Get(1);
Question question = test.Questions.FirstOrDefault(); // using System.Linq;
if (question.quertionType == ....)
{
} 
```

# ios - Record audio and save permanently in iOS

> ID：15059089
> 
> 赞同：5
> 
> 时间：2013-02-25T02:12:53.057
> 
> 标签：ios, objective-c, xcode, record

I have made 2 iPhone apps which can record audio and save it to a file and play it back again.

One of them uses AVAudiorecorder and AVAudioplayer. The second one is Apple's [SpeakHere](http://developer.apple.com/library/ios/samplecode/SpeakHere/Introduction/Intro.html) example with Audio Queues.

Both run on Simulater as well as the Device.

BUT when I restart either app the recorded file is not found!!! I've tried all possible suggestions found on stackoverflow but it still doesnt work!

This is what I use to save the file:

```
NSArray *dirPaths; 
NSString *docsDir; 

dirPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES); 
docsDir = [dirPaths objectAtIndex:0]; 

NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"sound1.caf"]; 
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T23:49:33.813

好的，我终于解决了。问题是我正在设置 AVAudioRecorder 并在我的 ViewController.m 的 viewLoad 中归档路径，覆盖现有的同名文件。

1.  录制音频并将其保存到文件并停止应用程序后，我可以在 Finder 中找到该文件。（/Users/xxxxx/Library/Application Support/iPhone Simulator/6.0/Applications/0F107E80-27E3-4F7C-AB07-9465B575EDAB/Documents/sound1.caf）
2.  当我重新启动应用程序时，记录器的设置代码（来自 viewLoad）将覆盖我的旧文件，称为：

    sound1.caf

3.  一个新的。同名但没有内容。

4.  回放只会播放一个空的新文件。--> 显然没有声音。

* * *

**所以这就是我所做的：**

**我使用 NSUserdefaults 来保存录制文件名的路径，以便稍后在我的 playBack 方法中检索。**

* * *

在 ViewController.m 中清理了 viewLoad：

```
- (void)viewDidLoad
{

     AVAudioSession *audioSession = [AVAudioSession sharedInstance];

     [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];

     [audioSession setActive:YES error:nil];

     [recorder setDelegate:self];

     [super viewDidLoad];
} 
```

在 ViewController.m 中编辑记录：

```
- (IBAction) record
{

    NSError *error;

    // Recording settings
    NSMutableDictionary *settings = [NSMutableDictionary dictionary];

    [settings setValue: [NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
    [settings setValue: [NSNumber numberWithFloat:8000.0] forKey:AVSampleRateKey];
    [settings setValue: [NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];
    [settings setValue: [NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [settings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [settings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];
    [settings setValue:  [NSNumber numberWithInt: AVAudioQualityMax] forKey:AVEncoderAudioQualityKey];

    NSArray *searchPaths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentPath_ = [searchPaths objectAtIndex: 0];

    NSString *pathToSave = [documentPath_ stringByAppendingPathComponent:[self dateString]];

    // File URL
    NSURL *url = [NSURL fileURLWithPath:pathToSave];//FILEPATH];

    //Save recording path to preferences
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    [prefs setURL:url forKey:@"Test1"];
    [prefs synchronize];

    // Create recorder
    recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

    [recorder prepareToRecord];

    [recorder record];
} 
```

在 ViewController.m 中编辑播放：

```
-(IBAction)playBack
{

AVAudioSession *audioSession = [AVAudioSession sharedInstance];

[audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];

[audioSession setActive:YES error:nil];

//Load recording path from preferences
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

temporaryRecFile = [prefs URLForKey:@"Test1"];

player = [[AVAudioPlayer alloc] initWithContentsOfURL:temporaryRecFile error:nil];

player.delegate = self;

[player setNumberOfLoops:0];
player.volume = 1;

[player prepareToPlay];

[player play];

} 
```

并向 ViewController.m 添加了一个新的 dateString 方法：

```
- (NSString *) dateString
{
    // return a formatted string for a file name
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"ddMMMYY_hhmmssa";
    return [[formatter stringFromDate:[NSDate date]] stringByAppendingString:@".aif"];
} 
```

* * *

现在它可以通过 NSUserdefaults 加载最后记录的文件：

```
 //Load recording path from preferences
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

temporaryRecFile = [prefs URLForKey:@"Test1"];

player = [[AVAudioPlayer alloc] initWithContentsOfURL:temporaryRecFile error:nil]; 
```

在（IBAction）播放中。temporaryRecFile 是我的 ViewController 类中的 NSURL 变量。

声明如下 ViewController.h ：

```
@interface SoundRecViewController : UIViewController <AVAudioSessionDelegate,AVAudioRecorderDelegate, AVAudioPlayerDelegate>
{
......
......
    NSURL *temporaryRecFile;

    AVAudioRecorder *recorder;
    AVAudioPlayer *player;

}
......
......
@end 
```

# debugging - Is it possible to break on a handled exception in OCaml?

> ID：15059092
> 
> 赞同：1
> 
> 时间：2013-02-25T02:13:11.950
> 
> 标签：debugging, ocaml

Debugging an OCaml program that has an unhandled exception is fairly easy, because the program stops running and you can obtain a backtrace by running in `ocamldebug` or setting the `OCAMLRUNPARAM` environment variable to `b`. Is there any way to obtain such a backtrace for a *handled* exception?

Note: Modifying the program so it does not handle the exception is of course one option. However, I'd like to avoid modifying the program if possible. Something analogous to `gdb`'s `catch` command would be great.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:19:23.800

有一个函数`Printexc.print_backtrace`将打印一个回溯，显示从引发异常的点到正在处理异常的当前点的堆栈。这可能会有所帮助，但请注意它不会打印完整的堆栈回溯。

我曾经写过一些 hacky 代码，使用`Unix.fork`它在类 Unix 系统上打印完整的堆栈回溯。[请参阅我对打印堆栈跟踪](https://stackoverflow.com/questions/7599472/printing-stack-traces/7600069#7600069)的回答。（我不建议在生产中使用此代码。）

# r - ggplot2: Adjust the symbol size in legends

> ID：15059093
> 
> 赞同：83
> 
> 时间：2013-02-25T02:13:15.430
> 
> 标签：r, ggplot2

How should I change the size of symbols in legends? I checked the document of `theme` but found no answer.

Here is an example:

```
library(ggplot2);library(grid)
set.seed(1000)
x <- 1:6
mu <- sin(x)
observed <- mu + rnorm(length(x), 0, 0.5*sd(mu))
data <- data.frame(
  t=rep(x, 2), 
  value=c(mu, observed) - min(mu, observed) + 0.5, 
  class = rep(c("mu", "observed"), each=length(x)))
mu <- data$value[1:length(x)]
observed <- data$value[1:length(x) + length(x)]
mu.min <- mu - 3 * 0.5 * sd(mu)
mu.max <- mu + 3 * 0.5 * sd(mu)
g <- ggplot(data=data)
g <- g + geom_point(aes(x=value, y=t, shape=class, size=24)) + scale_size(guide="none")
g <- g + scale_shape(name="", labels=expression(paste(S[u](t), ", the observation at time ", t), paste(mu[u](t), ", the mean of ", tilde(S)[u](t), "          ")))
stat_function.color <- gray(0.5)
g <- g + geom_segment(aes(y=1:6, yend=1:6, x=mu.min, xend=mu.max, linetype="2", alpha = 1), color=stat_function.color) + scale_alpha(guide="none") + scale_linetype(name= "", labels=expression(paste("probability density function (pdf) of ", tilde(S)[u], " at time ", t)))
for(i in 1:length(x)) {
  g <- g + stat_function(fun=function(x, i) {
    ifelse( x <= mu.max[i] & x >= mu.min[i], dnorm(x, mu[i], sd(mu)) + i, NA)
    }, color=stat_function.color, args=list(i=i))
}
background.color <- gray(0.75)
g <- g + theme(
  axis.text=element_blank(),
  title=element_text(size=rel(1.5)),
  legend.text=element_text(size=rel(1.5)),
  legend.position="top",
  legend.direction="vertical",
#   legend.key.size = unit(2, "cm"),
  panel.background=element_rect(fill=background.color), 
  panel.grid.major=element_line(color=background.color),
  panel.grid.minor=element_line(color=background.color)
  ) + coord_flip()
plot(g) 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2017-01-25T03:49:09.673

你应该使用：

```
theme(legend.key.size = unit(3,"line")) 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-02-25T02:26:15.343

`override.aes`您可以使用以下参数手动进行这些更改`guide_legend()`：

```
g <- g + guides(shape = guide_legend(override.aes = list(size = 5)))
print(g) 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-02-04T12:39:47.933

从 R 版本 3.2.2 开始，Marius 的回答对我不起作用。您仍然可以`guide_legend()`使用相同的`override.eas`参数进行调用，但您需要指定`color`而不是`shape`在包装函数中指定。

因此，如果您正在运行更高版本的 R，请尝试以下操作：

```
g + guides(color = guide_legend(override.aes = list(size=5))) 
```

**编辑**

正如@Ibo 在评论中指出的那样，这可能是由于对象中的色阶`ggplot`。如果`ggplot`对象包含色标，则`size=5`必须在颜色上设置大小 ( ) 的映射。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-05-05T16:52:45.380

如果您想独立更改图例的 2 个组件的大小，它会变得更加棘手，但可以通过使用`grid`包手动编辑绘图的各个组件来完成。

基于[此 SO 答案](https://stackoverflow.com/a/34304453/3174566)的示例：

```
set.seed(1)
dat <- data.frame(x = runif(n = 100),
                  x2 = factor(rep(c('first', 'second'), each = 50)))
set.seed(1)
dat$y = 5 + 1.8 * as.numeric(dat$x2) + .3 * dat$x + rnorm(100)

# basic plot
g <- ggplot(data = dat,
       aes(x = x, y = y, color = x2))+
   theme_bw()+
   geom_point()+
   geom_smooth(method = 'lm') 
```

[![在此处输入图像描述](../Images/34d376dc900b9f671fa645c367d39ab2.png)](https://i.stack.imgur.com/I8dKK.png)

```
# make the size of the points & lines in the legend larger
g + guides(color = guide_legend(override.aes = list(size = 2))) 
```

[![在此处输入图像描述](../Images/32f019818336fde48476ee6d0a596f77.png)](https://i.stack.imgur.com/HAcJD.png)

```
# Make JUST the legend points larger without changing the size of the legend lines:
# To get a list of the names of all the grobs in the ggplot
g
grid::grid.ls(grid::grid.force())

# Set the size of the point in the legend to 2 mm
grid::grid.gedit("key-[-0-9]-1-1", size = unit(4, "mm"))

# save the modified plot to an object
g2 <- grid::grid.grab()
ggsave(g2, filename = 'g2.png') 
```

[![在此处输入图像描述](../Images/105ddc80c3e290e347c7624d24493633.png)](https://i.stack.imgur.com/n885D.png)

# php - How Can I Update an SQL database with a foreach loop?

> ID：15059094
> 
> 赞同：0
> 
> 时间：2013-02-25T02:13:16.133
> 
> 标签：php, sql, foreach

I have a photo gallery and want to update multiple captions at once via form input. I've tried to research this but I think I'm in way over my head. This is what I have so far but it's not working..

The data is saved in an SQL table called "gallery". An example row might look like:

```
gallery_id(key) = some number
product_id      = 500
photo           = photo.jpg
caption         = 'look at this picture' 
```

My form inputs are generated like this:

> $sql = mysql_query("SELECT * FROM gallery WHERE product_id = 500");
> 
> ```
>  while($row = mysql_fetch_array($sql)) {
>   $photo=$row['photo'];
>   $caption=$row['caption'];
>   echo '<img src="$photo"/>';
>   echo '<input name="cap['.$caption.']" id="cap['.$caption.']" value="'.$caption.'" />';
>   } 
> ```

So once I submit the form I start to access my inputs like this but I hit a wall..

```
 if( isset($_POST['cap']) && is_array($_POST['cap']) ) {
       foreach($_POST['cap'] as $cap) {
        mysql_query("UPDATE gallery 
                     SET caption=$caption
                     WHERE ???????");
       }

    } 
```

I don't know how to tell the database where to put these inputs and as far as I can tell you can't pass more than one variable in a foreach loop.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:24:46.070

$_POST 是一个数组，如果我没有错（我现在无法测试它并且我在 PHP 中是新的）你可以做

```
foreach ($_POST as $p) {
    $id=$p['id'];'
    $cap=$p['caption'];
mysql_query("UPDATE gallery 
                 SET caption=$cap
                 WHERE photoid=$id");

} 
```

# list - 返回最大子列表的总和

> ID：15059103
> 
> 赞同：0
> 
> 时间：2013-02-25T02:14:01.407
> 
> 标签：list, python-3.x, sum, max, minimum

我必须编写一个函数，它接受一个整数列表并返回列表的最大总和子列表。一个例子是：

```
l = [4,-2,-8,5,-2,7,7,2,-6,5] 
```

返回`19`

到目前为止，我的代码是：

```
count = 0
for i in range(0,len(l)-1):
    for j in range(i,len(l)-1):
        if l[i] >= l[j]:

            count += l[i:j]

return count 
```

我有点卡住和困惑，有人可以帮忙吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:51:16.410

这称为“最大子阵列问题”，可以在线性时间内完成。维基[百科文章](http://en.wikipedia.org/wiki/Maximum_subarray_problem)有你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:13:55.213

我认为这是一个家庭作业，所以我不会在这里尝试谷歌算法和/或发布太多代码。

一些想法（只是从我的脑海中，因为我喜欢这些类型的任务:-)）

正如用户 lc 已经指出的那样，天真且详尽的方法是测试每个子列表。我相信您的 (user2101463) 代码朝着这个方向发展。只需用于`sum()`建立总和并与已知的最佳值进行比较。要使用合理的起始值初始化最知名的总和，只需使用列表的第一个值。

```
the_list = [4,-2,-8,5,-2,7,7,2,-6,5]

best_value = the_list[0]
best_idx = (0,0)
for start_element in range(0, len(the_list)+1):
    for stop_element in range(start_element+1, len(the_list)+1):
        sum_sublist = sum(the_list[start_element:stop_element])
        if sum_sublist > best_value:
            best_value = sum_sublist
            best_idx = (start_element, stop_element)

print("sum(list([{}:{}])) yields the biggest sum of {}".format(best_idx[0], best_idx[1], best_value)) 
```

这当然具有二次运行时间 O(N^2)。这意味着：如果由输入列表的元素数量定义的问题大小随着 N 的增长而增长，则运行时间随着 N*N 的增长而增长，并且具有一些任意系数。

一些改进的启发式方法：

*   显然负数不好，因为它们减少了可实现的总和
*   如果遇到负数序列，如果到目前为止的最佳列表加上负数的总和 < 0，请在该序列之后重新启动最佳子列表。在您的示例列表中，前三个数字不能成为最佳列表的一部分，因为的积极影响`4`总是被 否定`-2, -8`。
*   可能这甚至会导致`O(N)`实现从头到尾迭代，记住最知名的开始索引，同时计算从该开始索引的完整总数的运行总和以及最后一个连续的正数和负数序列的正负小计， 分别。
*   一旦找到这样的最佳列表，可能需要进行最终清理以删除尾随的负面子列表，`-6, 5`例如示例末尾的 。

希望这会导致正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T12:29:15.067

最佳解决方案是采用 O(n) 的线性运行时间。但是这个问题有“n*lgn”运行时解决方案（基于分治算法）和“n^2”运行时解决方案。如果你对这些感兴趣这里的算法是强烈推荐的算法的链接[介绍，在这里我用](https://www.amazon.in/Introduction-Algorithms-Thomas-H-Cormen-ebook/dp/B007CNRCAO?ie=UTF8&keywords=introduction%20to%20algorithms&qid=1467634087&ref_=sr_1_1&s=books&sr=1-1)**java**编写了一个具有线性运行时的代码。

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner sc=new Scanner(System.in);
    int n=sc.nextInt();
    int []A=new int[n];
    int highestsum=Integer.MIN_VALUE;
    int sumvariable=0;
    int x=0;
    for(int i=0;i<n;i++)
    {
        A[i]=sc.nextInt();
    }
    for(int i=0;i<n;i++)
    {
        sumvariable+=A[i];
        if(sumvariable<0)
        {
            if(sumvariable>=highestsum)
            {
                highestsum=A[i];
                sumvariable=A[i];
            }
            else
            {
                sumvariable=0;
            }
        }
        else
        {
            if(sumvariable>highestsum)
            {
                highestsum=sumvariable;
            }

        }
    }
    System.out.println(highestsum);
} 
```

# apache - 扩展 CakePHP 2.3.0 版

> ID：15059104
> 
> 赞同：0
> 
> 时间：2013-02-25T02:14:13.120
> 
> 标签：apache, cakephp, mysqli, cakephp-2.0, scalability

我正在使用 CakePHP 开始一个新项目。我喜欢“自动魔术”功能，我认为它非常适合该项目。我想知道将 CakePHP 扩展到每天数百万 IP 访问的潜力。每天有数十万次数据库写入和读取。还有大约 50,000 到 500,000 个用户，通常有 3000 个同时使用该站点。我正在使用繁重的存储过程来抵消这一点，并且我正在访问包括负载平衡器在内的多个服务器。

我想知道一些自动魔术的计算时间以及 Cake 能够如何协助会话请求产生许多 db 命中。有没有人在这种流量级别的单个服务器阵列设置上运行蛋糕取得成功？我还没有使用云或分布式数据库。我真的很担心使用这个框架的潜在瓶颈。我对任何在生产中与 Cake 合作过的人的建议感兴趣。我已经研究过，但我希望有第二个意见。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:11:27.663

这不是问题，但优化取决于您。

*   您可以实现不同的缓存方法，memcache、redis、整页缓存……所有这些都已被 cacke 支持。您缓存的内容和位置取决于您。
*   对于搜索，您可以尝试使用弹性搜索来加快速度
*   在调度程序过滤器之前有通过控制器实例化（您可能希望在特殊情况下这样做，例如检查资产过滤器）
*   使用 nginx 而不是 apache

此外，在编写任何代码之前，我不会从过度优化和过度思考开始，良好开始，考虑缓存，但是当你开始遇到瓶颈分析并修复它们时。否则，在您编写任何有效的东西之前，您将浪费大量时间进行过度优化。

蛋糕本身很快。只是为了证明这些花哨的基准测试的胡说八道因素，我们做了一个使用调度程序过滤器来“优化”它的框架，甚至击败了似乎非常渴望展示它有多快的 Yii，但基准测试毫无意义，特别是在可以引入如此多的人为失败的巨大项目。

# python - 计数函数的运行时复杂度

> ID：15059108
> 
> 赞同：0
> 
> 时间：2013-02-25T02:15:10.223
> 
> 标签：python, list, complexity-theory

```
def findTarget(myList, target):

    count = 0

    for item in myList:

         if (target == item):

              count = count + 1

    return count 
```

有人告诉我这是 0(log)n 虽然我相信这是 0(1) ？有人可以确认或否认吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T02:18:14.850

您的循环具有`N`比较和小于`N`添加 - 导致最多 2*N 操作，为您提供 O(N) 算法。

请注意，对于列表，这是一个内置方法：

```
myList.count(item) 
```

这会将循环推送到`C`代码中——它仍然是 O(N)，但我敢打赌那个版本会比你的版本运行得快很多:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T02:16:52.900

循环是`O(n)`，其中`n`是 的长度`myList`。

# java - Java 中的生产者-消费者 - 多个消费者

> ID：15059109
> 
> 赞同：2
> 
> 时间：2013-02-25T02:15:25.087
> 
> 标签：java, producer-consumer

我在 Java 中有一个具有多个消费者的生产者-消费者模型。我在生产者和消费者之间传递一个具有变量的对象，我们称之为“名称”。

现在，该名称可以是 A、B 或 C。如果值为 A，则一个消费者会将其从队列中取出并对其进行处理。如果值为 B，则不同的消费者会将其从同一个队列中取出并执行其他操作。如果值为 C，则第三个消费者执行相同操作。

我的问题是如何实现这一点。我目前的理论如下（伪代码）：

```
// This is code for each consumer
pull item off the queue
check if item.name is right for this consumer (A, B, or C)
if so, send it to consume()
else, put it back on the queue 
```

像这样的东西会起作用，还是会对我的线程同步造成严重破坏？如果它不起作用，我应该使用什么模型来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:27:02.667

最简单的方法是在消息发布时定义消息头。然后你可以有多个消费者，每个消费者都有唯一的 MessageSelector 来寻找特定的消息头。这样，只有正确的消费者才能收到消息，如果不正确的消费者收到消息，您不必担心重新发布消息（这非常低效，并且在有大量消息的负载系统上不会很好）通过系统）。

[http://docs.oracle.com/javaee/1.3/jms/tutorial/1_3_1-fcs/doc/prog_model.html](http://docs.oracle.com/javaee/1.3/jms/tutorial/1_3_1-fcs/doc/prog_model.html)

# android - 传递数组列表 在服务和活动之间

> ID：15059110
> 
> 赞同：2
> 
> 时间：2013-02-25T02:15:28.487
> 
> 标签：android, service

我有一个应用程序，它有一个运行 STICKY 的服务，如果有工作要做，即使用户关闭应用程序服务工作直到完成她的工作。

看，我已经按照教程[Android 示例：使用消息传递在 Activity 和服务之间进行通信](http://blog.philippheckel.com/2012/06/10/android-example-communication-between-activity-and-service-using-messaging/)并适应我的应用程序，但是当我尝试发送消息时，我的服务或客户端没有收到。

我还需要像 ArrayList 一样传递更复杂的参数，工作流程是这样的

1.  用户启动我的应用，应用启动服务
2.  用户在应用程序中按下按钮，应用程序向服务发送信号（可以是整数）
3.  该服务从 Internet 获取数据，处理并将此数据发送到应用程序（如果正在运行），如果未运行，则该服务通知用户获取新数据
4.  如果一段时间后没有从服务器收到任何内容，则服务停止。

问题是**如何在服务和应用程序之间传递复杂的对象？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:21:30.373

`Message`您可以在using中传递复杂对象[`setData(android.os.Bundle)`](http://developer.android.com/reference/android/os/Message.html#setData%28android.os.Bundle%29)。Bundles 需要[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)数据以便它们可以被序列化，但为了方便起见，它支持基本类型（例如整数和字符串）的 ArrayList。如果您的列表包含自定义对象，您将需要使它们实现`Parcelable`并使用[`putParcelableArrayList(String key, ArrayList<? extends Parcelable> value)`](http://developer.android.com/reference/android/os/Bundle.html#putParcelableArrayList%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29).

如果您的数据非常复杂/结构化，您还可以考虑使用[Content Provider](http://developer.android.com/guide/topics/providers/content-providers.html)。有一个初始学习曲线，但提供者非常适合某些情况。

# json - wso2 esb, json, PL/SQL 发送 JSON Web 服务到 WSO2 ESB 代理服务，连接被客户端关闭

> ID：15059111
> 
> 赞同：1
> 
> 时间：2013-02-25T02:15:36.103
> 
> 标签：json, web-services, plsql, wso2esb

我正在尝试将 JSON 消息从 Oracle 过程（PL/SQL）发送到 WSO2 ESB。因此， **我创建了存储过程 TEST_JSON，如下所示：**

```
create or replace PROCEDURE test_json
AS
  http_resp utl_http.resp;
  req_msg      CLOB;
  resp_msg     CLOB;
  TYPE tab_type IS TABLE OF PNLM%ROWTYPE;
  t_tab tab_type := tab_type();
  v_parser     dbms_xmlparser.parser;
  v_xmldoc     XMLDOM.DOMDocument;
  v_node       dbms_xmldom.DOMNode;
  v_item       dbms_xmldom.domnodelist;
  v_n          dbms_xmldom.DOMNode;
  l_pstatus    varchar2(20);
  v_clob_length  binary_integer;
  v_amount       pls_integer := 16383;
  v_offset       pls_integer := 1;
  v_buffer       varchar2(32767);

  json_msg     CLOB;
BEGIN
  json_msg := '{"loc":{"longitude":"30.5","latitude":"20.5"}}';

  http_req := utl_http.begin_request('http://test.esb:8280/services/test_json', 'POST');
  utl_http.set_body_charset(http_req, 'UTF-8');
  utl_http.set_header(http_req, 'Content-Type', 'application/json');

  v_clob_length := dbms_lob.getLength(json_msg);
  if v_clob_length <= 32767 then
    utl_http.write_text(http_req, dbms_lob.substr(json_msg,dbms_lob.getLength(json_msg),1));
  elsif v_clob_length > 32767 then
    while (v_offset < v_clob_length) loop
      dbms_lob.read(lob_loc => json_msg,amount => v_amount,offset => v_offset,buffer => v_buffer);
      utl_http.write_text(http_req, v_buffer);
      v_offset := v_offset + v_amount;
    end loop;
  end if;

 http_resp := utl_http.get_response(http_req);
 utl_http.read_text(http_resp, resp_msg);
 dbms_output.put_line(resp_msg);
 v_parser := dbms_xmlparser.newParser;
 dbms_xmlparser.setValidationMode(v_parser, FALSE);
 dbms_xmlparser.parseCLOB(v_parser, resp_msg);
 v_xmldoc := dbms_xmlparser.getDocument(v_parser);
 dbms_xmlparser.freeParser(v_parser);
 v_node := xmldom.makenode(v_xmldoc);
 v_item := dbms_xslprocessor.selectNodes(v_node,'//ts_state');
 t_tab.EXTEND;
 v_n := dbms_xmldom.item(v_item, 0);
 dbms_xslprocessor.valueOf(v_n, '//ts_state', l_pstatus);
 dbms_output.put_line('l_pstatus=['||l_pstatus||']');
 utl_http.end_response(http_resp);

 exception when utl_http.end_of_body then utl_http.end_response(http_resp);
 when utl_http.request_failed then dbms_output.put_line('Response Failed.'); utl_http.end_response(http_resp);
 when others then dbms_output.put_line('Unknown Error!.'); utl_http.end_response(http_resp);
END; 
```

**并创建了 WSO2 ESB 代理服务 TEST_JSON （以下内容在代理服务 TEST_JSON 的顺序中）：**

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="test_json" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <clone continueParent="true" id="clon1" sequential="true">
            <target>
               <sequence>
                  <log level="full">
                     <property name="text" value="==========in clone=========="/>
                  </log>
                  <property name="longitude" expression="//longitude/text()" scope="default" type="STRING"/>
                  <property name="latitude" expression="//latitude/text()" scope="default" type="STRING"/>
                  <log level="custom">
                     <property name="LONGITUDE" expression="get-property('longitude')"/>
                     <property name="LATITUDE" expression="get-property('latitude')"/>
                  </log>
               </sequence>
            </target>
         </clone>
         <header name="To" action="remove"/>
         <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
         <property name="RESPONSE" value="true" scope="default"/>
         <property name="DISABLE_CHUNKING" value="true" scope="axis2"/>
         <send/>
         <log level="full">
            <property name="text" value="==============End=============="/>
         </log>
      </inSequence>
   </target>
   <description></description>
</proxy> 
```

但是，Oracle 过程总是超时（ORA-29276：传输超时），尽管 WSO2 ESB 会收到消息（客户端关闭连接后 ESB 控制台中显示日志中介消息）。

当我**通过 cURL 发送 JSON 消息时**：</p>

```
curl -i \
-H "Content-Type: application/json" \
-X POST \
-d '{"loc":{"longitude":"30.5","latitude":"20.5"}}' \
http://test.esb:8280/services/test_json 
```

这是很快的反应。

任何人都可以帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:57:52.107

我找到了重点，将“Transfer-Encoding”设置为“chunked”，在 utl_http.begin_request 之后添加该行，

```
utl_http.set_header(http_req, 'Transfer-Encoding', 'chunked' ); 
```

# php - PHP if 语句认为 png 扩展名是 jpg/jpeg（检查 pathinfo()）？

> ID：15059112
> 
> 赞同：1
> 
> 时间：2013-02-25T02:15:36.320
> 
> 标签：php, png, mime, file-type

我正在使用 PHP 将图像处理成缩略图，并且我允许通过 3 种单独的扩展类型：.jpg、.jpeg 和 .png... 前 2 和后者必须通过不同的函数进行处理，即createimagefromjpg() 和 createimagefrompng() 分别。

我正在获取图像的文件扩展名，然后使用 if 语句检查它是哪种文件类型，以便可以正确处理它：

```
$extension = pathinfo($filename, PATHINFO_EXTENSION);

// Read source image
if ($extension == ('jpg' || 'jpeg')) {
    $source_image = imagecreatefromjpeg($filename); 
    return '1';
} else if ($extension == 'png') {
    $source_image = imagecreatefrompng($filename);
    return '2';
} else {
    return 'error';
} 
```

jpg 和 jpeg 图像被正确处理，因为这个函数返回 1...所以一切看起来都很好。但是，当我通过 png 文件时，它同样会进入第一个分支并返回“1”，即使 png ！= jpeg 或 jpg。奇怪的。此错误导致我的缩略图根本不生成。

它变得更加混乱。如果我通过替换 IF statemtn 中的 with 来启用严格比较`==`，`===`则 jpg 和 jpeg 文件会完全出错，表明显然是 'jpg' != 'jpg' （即使它确实如此），同样使用 jpeg。PNG 文件完全破坏了脚本。

* * *

编辑：问题似乎不是我的 IF 语句，而是`imagecreatefrompng()`函数。它适用于小图像（200x200），但不适用于较大的图像......谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T02:17:58.610

您的 if 语句使用了不正确的语法。用这个：

```
if ($extension == 'jpg' || $extension == 'jpeg') { 
```

您的示例将 ('jpg' || 'jpeg') 评估为布尔值。由于字符串在 PHP 中的计算结果为 true，因此该语句始终是正确的。

`$extension`然后将类型转换为布尔值，使您的语句等效于`(true == true)`.

使用 === 运算符将导致`$extension`不进行类型转换，因此它将`("some string value" === true)`是 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T02:19:05.883

这不是你写你的条件的方式。你目前有...

```
$extension == ('jpg' || 'jpeg') 
```

基本上是一样的...

```
$extension == TRUE 
```

...这是真的，只要字符串不为空。

相反，分别进行比较，例如...

```
$extension == 'jpg' || $extension == 'jpeg' 
```

或者，您可以这样做...

```
preg_match("/^jpe?g\z/", $extension); 
```

...或者...

```
in_array($extension, array("jpg", "jpeg")) 
```

等等，但它们（可以说）更难阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T02:20:41.750

您可以尝试使用或[mime_content_type](http://us3.php.net/manual/en/function.mime-content-type.php) 或[Fileinfo](http://us3.php.net/manual/en/ref.fileinfo.php)获取文件的 mime-type (png ，我认为这个选项会更准确。

# mysql - 将 .sql 文件从批处理文件导入 mysql

> ID：15059115
> 
> 赞同：1
> 
> 时间：2013-02-25T02:15:51.860
> 
> 标签：mysql, sql, batch-file, import

您好，我正在创建一个批处理文件来安装 wampserver。之后，我想将我的 name.sql 文件导入到 wampserver 创建的数据库中。我使用这个命令：

```
mysql --u [bonis] --password=[bonis] ["jdbc:mysql://localhost"] < ["C:\Documents and    Settings\Bonis\Desktop\bpx.sql"]

pause 
```

并告诉我：“文件名、目录名或卷标语法不正确。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:24:06.040

使用以下命令行：mysql < name.sql

但是，文件中的 sql 代码必须包含“create database”和“create table”命令。

# c# - 如何在 C# 中为 RavenDB 正确创建 Map/Reduce 索引

> ID：15059122
> 
> 赞同：3
> 
> 时间：2013-02-25T02:17:18.410
> 
> 标签：c#, mapreduce, ravendb

我正在开发一个在后端使用 RavenDB 的应用程序。这是我第一次使用 Raven，我正在努力使用 Map/Reduce。

我一直在[阅读文档](http://ravendb.net/docs/client-api/querying/static-indexes/defining-static-index)，但不幸的是我在这个过程中没有得到任何进展。

基本上我有成千上万的这样的文件。

```
{
  .....
  "Severity": {
    "Code": 6,
    "Data": "Info"
  },
  "Facility": {
    "Code": 16,
    "Data": "Local Use 0 (local0)"
  },
  .....
} 
```

除此之外，我需要使用如下所示的输出进行单个查询。

```
{"Severity": [
    {"Emergency":0},
    {"Alert":0},
    {"Critical":0},
    {"Error":0},
    {"Warning":0},
    {"Notice":0},
    {"Info":2711},
    {"Debug":410}
],
"Facility": [
    {"Kernel Messages":0},
    {"User-Level Messages":0},
    {"Mail System":0},
    {"System Daemons":0},
    {"Security/Authorization Messages":0},
    {"Internal Syslogd Messages":0},
    {"Line Printer Subsystem":2711},
    {"Network News Subsystem":410},
    ....
    {"Local Use 0 (local0)": 2574},
    ...
]} 
```

其中 Severity/Facility Array 中的“Key”是`Data`上述 json 数据的一部分，Severity/Facility Array 中的“value”是`Count`每种`Code`类型的文档。

示例：
以上述数据为指导，

> 我的数据库中有 2711 个文档的`Info`严重性。
> 我的数据库中有 410 个文档的`Debug`严重性。
> 我的数据库中有 2574 份文档`local0`。
> ETC...

* * *

我想做的是在应用程序启动时生成适当的索引（或检查它们是否已经存在），但我什至不知道从哪里开始。

注意：应用程序需要生成索引，仅手动将其写入 RavenDB Web UI 是不够的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:53:47.473

您将需要结合多种技术来实现这一点，但这是非常可行的。

这是一个适合您的索引。

```
public class MyIndex : AbstractMultiMapIndexCreationTask<MyIndex.ReduceResult>
{
    public class ReduceResult
    {
        public string Source { get; set; }
        public string Code { get; set; }
        public string Data { get; set; }
        public int Count { get; set; }
    }

    public MyIndex()
    {
        AddMap<MyDoc>(docs => from doc in docs
                              select new
                                     {
                                         Source = "Severity",
                                         doc.Severity.Code,
                                         doc.Severity.Data,
                                         Count = 1
                                     });

        AddMap<MyDoc>(docs => from doc in docs
                              select new
                                     {
                                         Source = "Facility",
                                         doc.Facility.Code,
                                         doc.Facility.Data,
                                         Count = 1
                                     });

        Reduce = results => from result in results
                            group result by new { result.Source, result.Code }
                            into g
                            select new
                            {
                                g.Key.Source,
                                g.Key.Code,
                                g.First().Data,
                                Count = g.Sum(x => x.Count)
                            };

        TransformResults = (database, results) =>
                           from result in results
                           group result by 0
                           into g
                           select new
                           {
                               Severity = g.Where(x => x.Source == "Severity")
                                           .ToDictionary(x => x.Data, x => x.Count),
                               Facility = g.Where(x => x.Source == "Facility")
                                           .ToDictionary(x => x.Data, x => x.Count)
                           };
    }
} 
```

您还需要一个用于转换结果的容器类：

```
public class MyDocCounts
{
    public IDictionary<string, int> Severity { get; set; }
    public IDictionary<string, int> Facility { get; set; }
} 
```

你会像这样查询它：

```
var result = session.Query<MyIndex.ReduceResult, MyIndex>()
                    .As<MyDocCounts>()
                    .ToList().First(); 
```

`.ToList()`看起来可能是多余的，但它是必要的，因为我们在转换中进行分组。

完整的单元测试在[这里](https://gist.github.com/mj1856/5027357)。其输出如下所示：

```
{
  "Severity": {
    "AAA": 20,
    "BBB": 20,
    "CCC": 20,
    "DDD": 20,
    "EEE": 20
  },
  "Facility": {
    "FFF": 20,
    "GGG": 20,
    "HHH": 20,
    "III": 20,
    "JJJ": 20
  }
} 
```

# google-maps-sdk-ios - 在主视图以外的视图中使用 Google Maps SDK

> ID：15059123
> 
> 赞同：5
> 
> 时间：2013-02-25T02:17:31.280
> 
> 标签：google-maps-sdk-ios

我正在尝试在我在情节提要中创建并通过 IBOutlet 链接到视图控制器的主视图的子视图中使用适用于 iOS 的 Google Maps SDK（我将其称为 extraView，从 UIView 子类化）。当我按照 SDK 入门指南中的步骤操作时，SDK 工作得很好，但它使用了层次结构中的最上面的视图（主视图），这是我不想要的。我希望我的地图位于屏幕的较小部分，并将屏幕的其余部分用于其他用途。当我尝试将 mapView_ 对象（请参阅入门指南）分配给 self.extraView 而不是 self.view 时，整个屏幕都是黑色的，并且在控制台输出中出现错误：

“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”

有没有其他人知道这一点？我在文档中找不到任何内容，并且 Google 提供的示例代码不使用情节提要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T07:36:53.217

就是这样...

*   将 UIView 添加到您正在工作的视图控制器中
*   将它的类设置为`GMSMapView`身份检查器。

然后将它控制拖到您的代码中，就像您对任何其他插座一样。

你可以在它的 setter 中懒惰地实例化它......

```
- (void) setMapView:(GMSMapView *)mapView {
    if (!mapView) {
        mapView = [[GMSMapView alloc] initWithFrame:mapView.bounds];
    }
    _mapView = mapView;
} 
```

要显示地图，Google 的示例代码变为...

```
 GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:1.285
                                                          longitude:103.848
                                                               zoom:12];
  self.mapView = [GMSMapView mapWithFrame:CGRectZero camera:camera]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T17:08:48.510

我解决了我的问题，只是删除了我从示例中获取的 loadview 代码。只需像 sberley 所说的那样添加一个视图就可以了。

更重要的是，在身份检查器上，您必须更改的属性是类，至少它在 xcode 4.5 上

# python - 金字塔上扩展名为 .html 的 Jinja2 模板？

> ID：15059124
> 
> 赞同：3
> 
> 时间：2013-02-25T02:17:37.027
> 
> 标签：python, pyramid, jinja2

如何在金字塔中使用带有 .html 扩展名的 jinja2 模板？例如，我希望视图配置看起来像，

```
@view_config(context=MyModel, renderer='templates/index.html')
def home_view(request):
... 
```

是否可以？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T04:05:35.910

```
config.add_renderer('.html', 'pyramid_jinja2.renderer_factory') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T19:30:49.130

在最近的版本中：

```
config.add_jinja2_renderer(".html") 
```

# javascript - 如何通过流星服务 HTTP 请求

> ID：15059125
> 
> 赞同：5
> 
> 时间：2013-02-25T02:17:46.627
> 
> 标签：javascript, node.js, http, meteor, http-live-streaming

我正在使用流星创建一个实时流媒体应用程序。目前我需要创建一个实时转码选项，所以我正在尝试将此 node.js 模块与我们的流星应用程序集成：[https](https://github.com/mifi/hls-vod) ://github.com/mifi/hls-vod 。但是，它的工作方式是您实际上从 HTML5 视频标签的 src 调用 app.get(hls/)。我想知道是否有一种方法可以期待使用流星调用这个 get 。由于我无法将 express 与流星集成，因此我在执行此操作时遇到了一些麻烦。我想知道是否有办法让流星接收 HTTP 请求并根据节点模块发回数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T09:00:40.077

本帖已更新

要通过流星服务 http 请求，您需要一个路由器。我会推荐ironRouter。有流星路由器，但汤姆科尔曼也建立了ironRouter。

你可以使用这样的东西：

```
Router.map(function () {

this.route('serverFile', {
    path: '/pathonserver',

    action: function () {
      console.log(this.params); //Contains params

      this.response.writeHead(200, {'Content-Type': 'text/html'});
      this.response.end('hello from server');
    }
  });
}); 
```

希望这应该使路由类似于快速路由器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-08T03:54:21.287

Meteor Router 现在已被[Iron Router](https://github.com/EventedMind/iron-router)弃用。

请参阅[此处](https://github.com/iron-meteor/iron-router/blob/devel/Guide.md#server-routing)了解使用 Iron Router 的服务器端路由

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T23:40:48.323

[您可以直接使用此处](https://stackoverflow.com/questions/33048610/meteor-webapp-middleware-passing-params)所示的底层[web 应用](https://docs.meteor.com/packages/webapp.html)程序， 或者使用[flow-router](https://github.com/veliovgroup/flow-router) 或[picker](https://github.com/Meteor-Community-Packages/picker)进行 SSR 路由。

# ruby - 如何正确使用搜索功能和 json 解析器？

> ID：15059133
> 
> 赞同：0
> 
> 时间：2013-02-25T02:18:09.180
> 
> 标签：ruby, ruby-on-rails-3, json

在我看来我有

```
<%= form_tag searches_path, method: 'get', do %>
  <p>
      <%= text_field_tag :search %>
      <%= submit_tag "Search", name: nil %>
  </p>
<% end %> 
```

在我的控制器中我有

```
class SearchesController < ApplicationController
  def index
    raw_result = params[:search]
    result = raw_result.gsub(/\s+/, "+")
    movie_details = HTTParty.get("http://imdbapi.org/?title="+result+"&type=json")
    @searches = ActiveSupport::JSON.decode(movie_details)

  end
end 
```

当我访问视图时，我得到一个未定义的方法“gsub”，用于 nil:NilClass。我猜是因为表单尚未提交。我是否正确实现了 json 解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:12:16.470

```
raw_result = params[:search] || "default value" 
```

# windows-server-2008 - 调用网址时运行可执行文件

> ID：15059136
> 
> 赞同：0
> 
> 时间：2013-02-25T02:18:16.290
> 
> 标签：windows-server-2008, ubuntu-server

我试图找到一种在被另一台服务器调用时运行 dos 可执行文件的方法。很难解释对不起，

所以我有一个windows server 2008r2。上面是我需要运行的dos exe。我还有一个托管一些 SQL 和网页（apache）的 linux ubuntu 服务器。

用户更新 linux 框中的表，当他们更新时，我需要在 windows 框上运行 dos exe。

我不想在 windows 盒子上使用计划任务，因为更新需要在 linux 盒子中更改数据的那一刻发生，几乎没有延迟。

任何人都可以想到linux机器可以“调用”windows服务器来运行exe吗？

谢谢 ：）

# html - 使用 CSS3 过渡导航时出现意外的 CSS 行为

> ID：15059138
> 
> 赞同：2
> 
> 时间：2013-02-25T02:18:42.827
> 
> 标签：html, google-chrome, css, css-transitions

我设计了一个带有 5 个宽度相等的页面“链接”的导航栏。当悬停在这些上时，会显示一个下拉菜单，其中包含与该页面相关的更多链接。[请参阅导航 jsFiddle](http://jsfiddle.net/8em5z/2/)。这完美地工作。

* * *

## 问题

当我将导航栏放入我的网站时，它无法按预期工作。下拉动画*滞后很多*，页面两侧随机出现*白条（Windows 7 Ultimate、Chrome 24、其他操作系统和浏览器未经测试）。*[请参阅此处的网站](http://resolutiongaming.com/)。

* * *

## 白条

![奇怪的白条](../Images/96b0d3b76ed90ff511cc575da2adeddf.png)

* * *

## 示例标记

```
<nav id="nav">
    <ul id="nav1">
        <li> 
        <span>Games</span>
            <div>   
                <span><a href="">All Games</a></span>
                <span><a href="">Free Games</a></span>
                ...
            </div>
        </li>
        ...
    </ul>
</nav> 
```

## 动画 CSS

```
#nav1 > li > div {
    position: absolute;
    margin: 5px 0 5px -45px;
    top: 0;
    left: 50%;
    max-height: 30px;
    width: 90px;
    opacity: 0;
    overflow: hidden;
    -webkit-transition: 
        width 500ms, 
        max-height 500ms, 
        opacity 200ms ease 400ms, 
        margin-left 500ms;
}
#nav1 > li:hover > div {
    max-height: 200px;
    width: 200px;
    opacity: 1;
    margin-left: -100px;
    -webkit-transition: 
        width 500ms, 
        max-height 1s ease 500ms,
        opacity 200ms, 
        margin-left 500ms;
} 
```

* * *

## 我试过的

在花了一个小时寻找问题没有成功后，我决定为我的整个站点制作一个 jsFiddle，看看是否能找出问题所在。令我惊讶的是，它在[jsFiddle](http://jsfiddle.net/SzBWj/)中运行良好。

**编辑：**经过更多测试后，我确定当*宽度*或*高度*的转换`#nav1 > li > div`完成时会出现问题。它也肯定与过渡有关。不确定这是否有帮助。

* * *

## 我的问题

如果有人可以对问题提供一些见解，将不胜感激。我完全不知道问题的原因是什么或如何解决它。

**注意：**导航目前仅在 Chrome 中具有动画效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:51:19.197

问题是：

```
#mainbar 
```

摆脱它，看看你的问题是否不会消失。但不仅如此。这包括 DOM 的整个宽度：

```
width:100%; 
```

并且它的 z-index 比 #wapper el 更高，它只占据了页面的一部分。#mainbar el 覆盖了没有 #wrapper 的一侧的区域。但是因为那里没有任何东西（风格方面），所以你会得到浏览器 bg 的默认白色；因此，侧面的白条。

如果你认为我错了，请设置

```
#mainbar{width:700px;} 
```

您会看到您的白条已扩展到新的未覆盖区域。:P

简单的解决方案：

```
#wrapper{z-index:0;} 
```

那应该解决它。

# lotus-notes - 用于重建索引的 Lotus 脚本

> ID：15059139
> 
> 赞同：1
> 
> 时间：2013-02-25T02:18:47.953
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我们有超过 40,000 个文档的数据库。有一个视图每月保存一个文档，有时会显示错误的数字。此视图不会由在午夜运行的 updall 函数自动重建。因此，我们每月手动执行 Shift+F9，然后它会显示正确的数字。我们的用户要求为此提供永久解决方案。您能否建议执行此功能的最佳方法？

我已经准备了一个计划代理来传递服务器控制台中的 updall 命令，并且不知道它是否会重建视图，因为我现在无法对其进行测试。它真的有用吗？请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:57:08.600

您需要重建视图。在您的程序文档或控制台命令中使用它：

```
load updall yourdb.nsf -T yourview -R 
```

根据帮助 -R 的意思是“重建所有使用的视图”。所以 -T 选项可能不起作用。但是，如果您每月只运行一次，那么重建所有视图是可以的（甚至是一件好事）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:15:46.223

您可以在脚本中刷新单个视图：

```
 ...
  dim vw as notesView
  Set vw = db.GetView("All")
  Call vw.Refresh
  ... 
```

这将刷新后端视图索引并且不会更新 UI 中显示的任何视图，但应该在计划代理中按预期工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-31T03:03:35.757

实际上在更新事件之前，您通常应该：

```
load fixup yourdb.nsf 
```

程序文档是一个好方法。

# php - 如何使用 curl 将其合并到我的脚本中？

> ID：15059140
> 
> 赞同：0
> 
> 时间：2013-02-25T02:19:02.790
> 
> 标签：php, curl

有人建议我在我的脚本中使用它

```
 curl -X POST https://api.twilio.com/2010-04-01/Accounts/HIDDEN/SMS/Messages.json \
        -u HIDDEN\
        -d "From=+442033228389" \
        -d "To=hidden" \
        -d 'Body=test' 
```

但是简单的剪切和粘贴就不行吗？我将如何将其合并到我的脚本中？

结果：

var_dump($输出); 返回：布尔（假）

var_dump($info); 返回：

> 数组（26）{[“url”]=>字符串（95）“ [https://api.twilio.com/2010-04-01/Accounts/AC7ae43150d51cce16de4be6ed0be5ca90/SMS/Messages.json](https://api.twilio.com/2010-04-01/Accounts/AC7ae43150d51cce16de4be6ed0be5ca90/SMS/Messages.json)" ["content_type"]=> NULL ["http_code"]=> int(0) ["header_size"]=> int(0) ["request_size"]=> int(0) ["filetime"]=> int (-1) ["ssl_verify_result"]=> int(0) ["redirect_count"]=> int(0) ["total_time"]=> float(0.093) ["namelookup_time"]=> float(0) [" connect_time"]=> float(0.093) ["pretransfer_time"]=> float(0) ["size_upload"]=> float(0) ["size_download"]=> float(0) ["speed_download"]=> float (0) ["speed_upload"]=> float(0) ["download_content_length"]=> float(-1) ["upload_content_length"]=> float(-1) ["starttransfer_time"]=> float(0) [ "redirect_time"]=> float(0) ["redirect_url"]=> string(0) "" ["primary_ip"]=> string(15) "174.129.254.101" ["certinfo"]=> array(0) { } ["primary_port"]=> int(443) [ "local_ip"]=> 字符串(11) "192.168.0.2" ["local_port"]=> int(28469) }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:22:33.980

如果您想从 PHP 脚本中执行 shell 命令，您必须使用其中一个函数`exec`,或简单的反引号运算符 ``shell_exec``system``proc_open`

```
$output = `curl -X POST https://api.twilio.com/2010-04-01/Accounts/HIDDEN/SMS/Messages.json -u HIDDEN -d "From=+442033228389" -d "To=hidden" -d 'Body=test'`; 
```

但是如果你想在 PHP 中使用 curl 功能，更好的方法是使用 curl 扩展。这里有一个例子：

```
<?php

// check if the curl extension is available
if(!function_exists('curl_init')) {
    die('the curl extension is not installed');
}

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.twilio.com/2010-04-01/Accounts/HIDDEN/SMS/Messages.json');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "From=+442033228389\nTo=hidden\nBody=test");

$result = curl_exec($ch);

// json_decode is used to translate the result into an object
var_dump(json_decode($result)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:25:16.943

```
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.twilio.com/2010-04-01/Accounts/HIDDEN/SMS/Messages.json");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data = array(
    'From' => '+442033228389',
    'To' => 'hidden',
    'Body' => 'test'
);
/* // WHERE $username = your account username
   // Where $password = Your account password
*/
curl_setopt($ch, CURLOPT_USERPWD, $username . ":" . $password);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

# python - 与opencv和python匹配的智能模式

> ID：15059142
> 
> 赞同：0
> 
> 时间：2013-02-25T02:19:18.797
> 
> 标签：python, opencv, artificial-intelligence, computer-vision

我有 35 张这样的图片：[https](https://dl.dropbox.com/u/239592/pat-all-lines.png) ://dl.dropbox.com/u/239592/pat-all-lines.png 。它们都是八边形，里面有四个数字，以及连接数字的手工线（类似于图表）。一个模式可以有一条线，或两条...或六条线，因此有 2 pow 6 = 64 种可能的有效组合。

我必须制作一个 python 脚本来计算有多少不同（唯一）组合。我怎样才能做到这一点？

以下是一些限制： - 不应接受与这 64 种不同的模式。示例：[https](https://dl.dropbox.com/u/239592/pat-wrong01.png) ://dl.dropbox.com/u/239592/pat-wrong01.png和[https://dl.dropbox.com/u/239592/pat-wrong02.png](https://dl.dropbox.com/u/239592/pat-wrong02.png) - 行可以更长、更短而不是非常直，就像这些：[https ://dl.dropbox.com/u/239592/pat-shaked-lines.png](https://dl.dropbox.com/u/239592/pat-shaked-lines.png)

我认为也许正确的方法是使用人工智能和对接受的模式进行某种培训，并且某个函数可以以某种方式返回更像模式及其匹配分数（即：从 1 到 100）

有什么建议吗？请记住，我是opencv的新手。

非常感谢你的帮助！

# java - 如何在java中找到上传文件的扩展名？

> ID：15059143
> 
> 赞同：0
> 
> 时间：2013-02-25T02:19:20.840
> 
> 标签：java, struts2, upload

我有以下代码来上传文件，当我使用`file.getNeme`它显示具有`tmp`扩展名的临时文件名时，我怎样才能找到实际上传文件的扩展名？我上传的文件被称为`test.jpg`

```
import java.io.File;
import org.apache.commons.io.FileUtils;

public class FileUploder {

  private File file;

  public File getFile() {
        return file;
  }

  public void setFile(File file) {
        this.file = file;
  }
   ......

  System.out.println("file:" +file.getName());  
  try {
        File fileToCreate = new File(filePath,name);
        FileUtils.copyFile(file, fileToCreate);
  } catch (IOException ex) {
        ex.printStackTrace();
  }

  ...... 
```

当前输出类似于>>>`file:upload__1a6d32_13d0eda6d49__7fdf_00000012.tmp`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T04:49:23.857

```
 private String getImageFileExtendtion (FileItem item) {
        String formatName = "png";
        String fileName = item.getName();
        if (fileName != null && fileName.length() >0) {
            int index = -1;
             for (int i = fileName.length()-1 ; i >=0; i --) {
                 if (fileName.charAt(i)=='.') {
                     index = i;
                     break;
                 }
             }
            if (index >=0 && index < fileName.length() -1) {
                 formatName = fileName.substring(index+1);
            }
        }
        return formatName ;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T12:18:38.013

只需添加另一个 getter/setter，如下所示，并删除 getFile() 方法，它将起作用

私有字符串文件文件名；

```
public String getFileFileName() {
    return fileFileName;
}

public void setFileFileName(String fileFileName) {
    this.fileFileName = fileFileName;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T03:02:11.533

你不应该使用`file.getName()`

[http://struts.apache.org/release/2.0.x/docs/file-upload.html#FileUpload-BasicUsage](http://struts.apache.org/release/2.0.x/docs/file-upload.html#FileUpload-BasicUsage)

```
setX(File file)  
    The file that contains the content of the uploaded file. This is a temporary file and file.getName() will not return the original name of the file 
```

相反，创建另一个 setter`setFileName(String fileName)`应该这样做。

# java - Lucene 和 Google App Engine

> ID：15059146
> 
> 赞同：1
> 
> 时间：2013-02-25T02:19:41.167
> 
> 标签：java, google-app-engine, lucene

我正在尝试将现有的 Web 应用程序移植到 AppEngine 中，但是它与 Lucence 有一些依赖关系。对于那些使用过 Lucence-AppEngine 的人来说，这些软件包可以与 AppEngine 一起使用：

```
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.tokenattributes.TermAttribute;
import org.apache.lucene.util.Version; 
```

如果有，具体是哪个版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:59:24.407

是他们会。在全文搜索 API 出现之前，我一直在使用这些。我将使用 Lucene 将实体字段解析和标记为关键字，并将它们存储到实体上的索引属性列表中。但这有严重的局限性。

我刚刚将我的关键字搜索移植到搜索 API，这真的很开心。

请注意，如果您在类路径中保留自己的 Lucene jar，则在使用 LocalServiceTestHelper 运行单元测试时，您很可能会遇到一些启动异常。我将假设 Search API 期望或依赖于特定版本的 Lucene 及其依赖项。如果您的 Lucene jar 被加载而不是来自 GAE 环境的那些，预计会出现一些问题。

祝你好运！

# javascript - 为 Kendo UI 堆叠和分组条形图定义颜色

> ID：15059147
> 
> 赞同：3
> 
> 时间：2013-02-25T02:19:50.187
> 
> 标签：javascript, html, kendo-ui, kendo-dataviz

我希望在 Kendo 的图表中得到[这个](http://demos.kendoui.com/dataviz/bar-charts/grouped-stacked-bar.html)，但他们没有任何使用数据源的示例。

我目前正在使用 hack 在**没有**数据源的情况下获得此功能，但是能够使用数据源可以为我带来很多好处。

到目前为止，这是我的代码：

```
var graph_data = [
    {'date': '2013-02-22T00:00:00', 'color': 'white', 'y_value': 1, 'name': 'name01'},
    {'date': '2013-02-23T00:00:00', 'color': 'orange','y_value': 1, 'name': 'name01'},
    {'date': '2013-02-22T00:00:00', 'color': 'red',   'y_value': 1, 'name': 'name02'},
    {'date': '2013-02-23T00:00:00', 'color': 'grey',  'y_value': 1, 'name': 'name02'},
    {'date': '2013-02-22T00:00:00', 'color': 'black', 'y_value': 1, 'name': 'name03'},
    {'date': '2013-02-23T00:00:00', 'color': 'blue',  'y_value': 1, 'name': 'name03'}
]
var unique_names = 3;
var series = [];
for(var i = 0; i < unique_names; i++){
    series.push({'field':'y_value', 'type':'bar'});
}
$('#chart').kendoChart({
    'dataSource':{
        'data':graph_data,
        'group': {
            'field':'name',
            'dir':'asc'
        },
        'schema':{
            'model':{
                'fields':{
                    'name':{'type':"string"},
                    'date':{'type':'date'},
                    'y_value':{'type':'number'},
                    'color':{'type':'string'}
                }
            }
        }
    },
    'seriesDefaults' : {
        'colorField':'color',
        'stack':true,
        'gap':0.1
    },
    'series': series,
    'categoryAxis': {
        'field': 'name'
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T18:24:05.883

我将配置更改为按日期分组，并且神奇地起作用了。

```
$('#chart').kendoChart({
'dataSource':{
    'data':graph_data,
    'group': {
        'field':'date',
        'dir':'asc'
    },
    'schema':{
        'model':{
            'fields':{
                'name':{'type':"string"},
                'date':{'type':'date'},
                'y_value':{'type':'number'},
                'color':{'type':'string'}
            }
        }
    }
},
'seriesDefaults' : {
    'colorField':'color',
    'stack':true,
    'gap':0.1
},
'series': [{'type':'bar', 'field':'stack_value', 'stack':true}],
'categoryAxis': {
    'field': 'name'
}
}); 
```

# php - 带有javascript onclick事件的jQuery .ajax调用不起作用

> ID：15059151
> 
> 赞同：0
> 
> 时间：2013-02-25T02:20:04.897
> 
> 标签：php, javascript, jquery

我有这段代码，它在隔离到我下面的 2 个小脚本中时运行良好。基本上我按下一个按钮来调用数据库以删除一行。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script>
function removeNo(){
$.ajax({url: "removeno.php",
type: "post",
});        
};
</script>

</head>
<body>
<input class='mybutton' type='submit' onclick='removeNo()' value='Remove' />
</body>
</html> 
```

删除no.php

```
<?php
include 'config.php';
$sql = "DELETE FROM comments WHERE id='24453305255'";
$query = mysql_query($sql);
?> 
```

现在，当我将 HTML 按钮部分放入更大的 PHP 脚本中时，它不起作用。我要删除的条目仍在数据库中。我仍在调用相同的 PHP 文件“removeno.php”。Javascript 在标题中与上面相同。所有文件都在同一个目录中，我确保在 PHP 脚本中包含“config.php”连接文件。

我没有发布我的完整 PHP 脚本，因为它有几百行，但是整个页面评估为这一部分，并通过我下面的“if”迷宫进行评估。它甚至以“删除”的值显示按钮。如果评估不正确，它将显示“提交”。我在这个 PHP 脚本中正确调用了这个函数吗？

```
echo "<td>"; //Main Button 
if($isleadership == 2) {
      if($reviewed == "Yes") {
          echo "<input class='mybutton' type='submit' onclick='removeNo()' value='Remove' />";
       } else if ($reviewed == "No") {
           echo "<input class='mybutton' type='submit' name='".$a."' value='Submit' />";
       }
} 
```

# java - SearchView 附有建议 CursorAdapter，非常慢？

> ID：15059156
> 
> 赞同：0
> 
> 时间：2013-02-25T02:20:49.477
> 
> 标签：java, android, sql, android-cursoradapter, searchview

我将我的搜索视图设置如下：

```
searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
searchView.setOnQueryTextListener(this);

searchAdapter = new SimpleCursorAdapter(this, R.layout.listentry, null, new String[] { "name" }, new int[] { R.id.name_entry }, 0);

searchView.setSuggestionsAdapter(searchAdapter); 
```

我在`SimpleCursorAdapter`这里创建并将其设置为`SearchView`对象的建议适配器。然后，在`onQueryTextChanged`我的方法中：

```
searchAdapter.changeCursor(dbHelper.runAlgorithms(q)); //"q" is the text from searchview 
```

这是我的`runAlgorithms`方法中的内容：

```
q = q.replace("'", "%27");
q = q.replace("%", "\\%");
Cursor c = db.rawQuery("SELECT _id, name, desc, data FROM verbs WHERE name_unaccented LIKE '" + q + "' ESCAPE '\\'", null);
return c; 
```

但是，每次调用所有这些时（每次我在搜索视图中按一个键）它每次都会跳过大约 50 到 150 帧，这太多了。可能是什么问题/什么可能会减慢建议的速度？这是这样做的正确方法吗？被查询的表有大约 7500 行。

# ember.js - 将条件类绑定与现有类结合起来

> ID：15059157
> 
> 赞同：6
> 
> 时间：2013-02-25T02:20:53.623
> 
> 标签：ember.js

在尝试将条件属性绑定与同一元素上的常规类组合时，我注意到它们存在问题。这是我正在尝试的车把标记：

```
<a href="#" class="button" {{bindAttr class="isDirty:dirty:clean"}} {{action save}}>Save</a> 
```

我期望生成的是：

```
<a href="#" class="button clean" data-bindattr-3="3" data-ember-action="4">Save</a> 
```

但实际生成的是：

```
<a href="#" class="button" data-bindattr-3="3" data-ember-action="4">Save</a> 
```

当我修改模型时，它会正确生成脏类：

```
<a href="#" class="button dirty" data-bindattr-3="3" data-ember-action="4">Save</a> 
```

如果我尝试在绑定后移动类，它将生成条件类而不是声明的类：

```
<a href="#" {{bindAttr class="isDirty:dirty:clean"}} class="button" {{action save}}>Save</a> 
```

生成条件而非按钮类：

```
<a href="#" class="clean" data-bindattr-3="3" data-ember-action="4">Save</a> 
```

我想要的是让它只使用 Handlebars 生成组合的声明类和条件类（无需创建视图）。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T04:57:04.183

在[模板指南](http://emberjs.com/guides/templates/binding-element-class-names/#toc_static-classes)中，它描述了一种为一个项目组合静态类和绑定类的方法：

> 如果您需要一个元素具有静态类和绑定类的组合，则应将静态类包含在绑定属性列表中，并以冒号为前缀。

在你的情况下，你会做这样的事情：

```
<a href="#" {{bindAttr class=":button isDirty:dirty:clean"}} {{action save}}>Save</a> 
```

这是一个工作示例[http://jsbin.com/ixupad/82/edit](http://jsbin.com/ixupad/82/edit)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-15T00:18:03.033

从 Ember 1.11 开始，您可以使用[inline-if-syntax](http://guides.emberjs.com/v1.11.0/templates/conditionals/#toc_inline-if-syntax)

```
<a href="#" class="button {{if isDirty 'dirty' 'clean'}}" {{action save}}>
  Save
</a> 
```

# ruby-on-rails - 重命名 Rails 数据库

> ID：15059159
> 
> 赞同：1
> 
> 时间：2013-02-25T02:21:23.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我创建了一个名为 food-pantry-manager 的应用程序 - 我发现破折号会导致 postgresql 出现问题，这显然不喜欢破折号 - 我尝试将数据库重命名为 pantry 但我担心会出现命名不一致的问题

我不应该担心这个吗？

进行一些更改以解决名称问题？

将我的应用程序重命名为像我的数据库一样的储藏室 - 从我所看到的情况来看，这并不容易？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:53:36.350

命名数据库没有问题`food-pantry-manager`，您只需在使用时将标识符双引号，以免连字符被误解；例如：

```
psql => create database "where-is-pancakes-house?"; 
```

也就是说，如果您的所有 PostgreSQL 标识符（数据库名称、列名称、表名称……）都是小写字母数字并带有下划线来分隔单词，那么您将有更好的时间。这样您就不必担心引用您的标识符或案例问题或类似的烦恼。

就 Rails 而言，它不关心数据库名称是什么，它只是读取数据库名称`database.yml`并使用它。因此，您可以根据需要调用数据库`fargo`并进行如下设置`database.yml`：

```
development:
  adapter: postgresql
  database: fargo
  ... 
```

不管你的应用程序叫什么，一切都应该是快乐的。

# asp.net-web-api - WebApi：如何将状态从过滤器传递到控制器？

> ID：15059161
> 
> 赞同：27
> 
> 时间：2013-02-25T02:21:57.113
> 
> 标签：asp.net-web-api

我在动作过滤器中提取了一些用户数据，并且可以在控制器的动作中使用其中的一些数据，但不完全确定如何将数据从过滤器传递到控制器。在 MVC 中，我可能会使用 session 或 HttpContext.Items，但它在 web api 中不可用。另一种选择是使用 ThreadStatic，但我认为必须有更好的解决方案？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-25T03:05:38.177

你可以使用`Request.Properties`字典来做到这一点。

在过滤器中：

```
MyType myObject = //initialize from somwhere
actionContext.Request.Properties.Add("mykey", myObject); 
```

然后你可以在控制器中检索它：

```
object myObject;
Request.Properties.TryGetValue("mykey", out myObject);
//cast to MyType 
```

这种方法的优点是当前请求实例在 Web API 管道中随处可用，因此您也可以在 Formatter 或 MessageHandler 中访问该对象。

# c++ - C++11 正则表达式匹配

> ID：15059162
> 
> 赞同：11
> 
> 时间：2013-02-25T02:21:59.207
> 
> 标签：c++, regex, gcc

我正在 C++11 中尝试一个相当简单的正则表达式匹配（使用 gcc 4.7.2），但我遇到了很多麻烦。尝试使用

```
std::regex unquoted(R"regex(\s*([^",]+)\s*)regex"); 
```

导致构造函数`std::regex_error`用代码抛出异常`std::regex_constants::error_escape`。在线的几个正则表达式测试人员对相同的表达式没有问题，我尝试使用不同的一些不同的语法选项无济于事。我没有掌握的 C++ 正则表达式语法有什么根本不同吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T03:14:34.557

请参阅[gcc 的 stdc++11 实现状态页面](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)——从 gcc 4.8 开始不支持正则表达式

为后代编辑：如评论中所述，正则表达式库现在在`libstdc++`并且应该在 gcc 4.9 及更高版本中。

# perl - 在 fork/execs 的程序上使用 Devel::NYTProf

> ID：15059165
> 
> 赞同：5
> 
> 时间：2013-02-25T02:22:33.593
> 
> 标签：perl, exec, fork, devel-nytprof

首先，我`export PERL5OPT=-d:NYTProf`从命令行开始，以便我的调试选项将被子进程继承。然后我启动我的 Perl 程序**contactd**。它 fork 成为一个守护进程，然后 fork/execs 另一个 Perl 程序**table_manager**的九个实例。（exec 看起来像`exec /path/to/perl /path/to/table_manager`.）此时我可以看到 10 或 11 个名为**nytprof.out 的新文件。*nnnn*** ; 正如预期的那样，到目前为止已经分叉的每个进程都有一个。

客户端连接到被联系的哪个 fork/execs **slave** **，**后者又连接到九个表管理器并接受来自客户端的请求并将它们传递给九个表管理器。

运行典型的客户端连接后，我关闭了所有服务器进程。我运行**nytprofmerge**来合并各种**nytprof.out。*nnnn***文件到**nytprof-merged.out**中，然后运行`nytprofhtml -f nytprof-merged.out --open`​​.

当 HTML 报告打开时，我看到除了**contactd 之外**没有提及任何内容。最上面的子程序主要是 BEGIN 块、**import**、**AUTOLOAD** ... 早期执行的东西。

这让我认为 NYTPROF*正在*经历一个分叉（基于多个 nytprof.out 文件），但由于某种原因没有继续分析**exec**的 Perl 程序。

我在 MacOSX 10.8.2 中运行 perl 5.16.1 和最新的 Devel::NYTProf。

关于我没有做什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:58:14.950

您可以将叉深度变量设置为 -1：

[http://search.cpan.org/~timb/Devel-NYTProf-4.25/lib/Devel/NYTProf.pm#forkdepth=N](http://search.cpan.org/~timb/Devel-NYTProf-4.25/lib/Devel/NYTProf.pm#forkdepth=N)

> 叉深=N
> 
> 当正在分析的 perl 进程执行 fork() 时，也会分析子进程。forkdepth 选项可用于控制这一点。如果 forkdepth 为零，则在子进程中将禁用分析。
> 
> 如果 forkdepth 大于零，则将在子进程中启用分析，并且该进程中的 forkdepth 值减一。
> 
> 如果 forkdepth 为 -1（默认值），则对所分析的子代数没有限制。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T11:19:29.797

AFAIU，您忘记了要合并的第一个 nytprof.out。您可以合并它，或者您可以传递 addpid=1 选项以始终获取 nytprof.out.nnnn ，即使是第一次进入也是如此。

# android - Android“从左向右滑动删除”，列表项上的手势，ICS Style

> ID：15059168
> 
> 赞同：8
> 
> 时间：2013-02-25T02:22:39.137
> 
> 标签：android, android-listview, android-animation, android-gesture

我正在尝试实现 Android ICS 及更高版本中的通知存在的“从左向右滑动以删除”手势。我的应用程序中有一个列表视图。我有手势检测器工作。但是，当我在特定列表项上从左向右滑动时，我希望该项目与我的手指一起移动。当我将手指移动到某个点之外时，只有这样该项目才会自行删除。我的 OnFling() 方法目前还没有做到这一点。

如何修改 OnFling() 方法以使项目与我的手指一起移动？

我的手势监听器类是

```
class GestureListener extends SimpleOnGestureListener {
        private static final int SWIPE_MIN_DISTANCE = 50;
        private static final int SWIPE_MAX_OFF_PATH = 100;
        private static final int SWIPE_THRESHOLD_VELOCITY = 25;

        private MotionEvent mLastOnDownEvent = null;

        @Override
        public boolean onDown(MotionEvent e) {
            mLastOnDownEvent = e;
            return super.onDown(e);
        }

        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "On Single TAP up ", Toast.LENGTH_SHORT).show();
            return super.onSingleTapUp(e);
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            if (e1 == null) {
                e1 = mLastOnDownEvent;
            }
            if (e1 == null || e2 == null) {
                return false;
            }

            float dX = e2.getX() - e1.getX();
            float dY = e1.getY() - e2.getY();

            if (Math.abs(dY) < SWIPE_MAX_OFF_PATH
                    && Math.abs(velocityX) >= SWIPE_THRESHOLD_VELOCITY
                    && Math.abs(dX) >= SWIPE_MIN_DISTANCE) {
                if (dX > 0) {
                    int position = tasks.pointToPosition((int) e1.getX(),
                            (int) e1.getY());

                    int _id = (int) tasks.getItemIdAtPosition(position);
                    databaseConnector.deleteContact(_id);

                    new DeleteRow(_id, contactAdapter, getApplicationContext());
                contactAdapter.notifyDataSetChanged();

                    Toast.makeText(getApplicationContext(),
                            "Right Swipe" + _id, Toast.LENGTH_SHORT).show();
                } else {

                    Toast.makeText(getApplicationContext(), "Left Swipe",
                            Toast.LENGTH_SHORT).show();
                }
                return true;
            }

            return false;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T02:26:59.110

如果你想实现这种类型的功能，你应该看看 Roman Nurik 在 github 上的 swipe to dismiss snippets。你可以在[这里](https://gist.github.com/romannurik/2980593)找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-09T20:15:29.223

如果您能够使用更新的支持库，`RecyclerView`具有一些内置功能的形式`ItemTouchHelper`和`onSwiped`方法可以为您提供所需的行为。

根据这个非常有用的答案，该支持从 RecyclerView 支持库的 v22.2.0 开始：[https ://stackoverflow.com/a/30601554/1518546](https://stackoverflow.com/a/30601554/1518546)

# c++ - 列出模数错误

> ID：15059169
> 
> 赞同：-2
> 
> 时间：2013-02-25T02:22:44.853
> 
> 标签：c++, list, stl, modulus

p 是一个整数列表。

```
std::list<int> p;
    if ( 2 % p(0) == 0 ); 
```

但是 p 有“表达式必须具有整数或无范围枚举类型”错误。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:57:27.533

`list`不超载`operator(int)`，这是你能说的要求`p(0)`。

如果您的意思是 `p[0]`,`list`也不会超载`operator[int]`，这仅适用于`vector`, `map`（或实际上`operator[keyType]`）等。这是因为`list`s 没有随机访问权限（意味着您无法获取任何元素，除非您循环访问）

但是，您可以执行以下操作：

```
if (2 % p.front() == 0) 
```

或者

```
if (2 % *p.begin() == 0) 
```

它访问第一个元素。

# android - 如何更新 Andengine 的实体修饰符？

> ID：15059171
> 
> 赞同：0
> 
> 时间：2013-02-25T02:23:12.970
> 
> 标签：android, andengine

我想要实现的是更改 mRectangles 属性，例如用户在设置中更改它的持续时间。我已经读过我想将 modifier.reset() 与原始的相应参数一起使用。我似乎无法弄清楚我应该在第四个参数中传递什么。我应该调用一个变量或函数来获得正确的上下文吗？

```
 @Override
public void onPopulateScene(Scene pScene,
        OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
    // TODO Auto-generated method stub

    Rectangle mRectangle = new Rectangle(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT,
            mEngine.getVertexBufferObjectManager());

    // With this anonymous function, you can add events to the beginning and end
    // of the modified state
    IEntityModifierListener mIEntityModifierListener = new IEntityModifierListener() {

        @Override
        public void onModifierStarted(IModifier<IEntity> pModifier,
                IEntity pItem) {
            // Grab the current duration value and compare it to the
            // one that's stored
            final int mDuration = (int) pModifier.getDuration();
            Log.i("MODIFIER", "Current duration value: " + mDuration);

            if(mDuration != mDurationPref)
            {
                Log.i("UPDATEDURATION","Duration value: " + mDurationPref);
                mFinalDuration = mDurationPref;

                pModifier.reset();

            }
            else
            {
                Log.i("UPDATEDURATION","Both values match: " + COLORONE_DEFAULT);
                mFinalDuration = COLORONE_DEFAULT;
            }

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier,
                IEntity pItem) {
            // TODO Auto-generated method stub
            Log.i("MODIFIER", "It finished!");

        }
    };

    Log.i("FINALDURATIONVALUE", "Final duration: " + mFinalDuration);
    // This is where you can chain up the colors
    // TODO: Make this in to a function that interpolates the colors together
    ColorModifier mColorModifier = new ColorModifier(5, Color.CYAN,
            Color.RED, mIEntityModifierListener, EaseSineIn.getInstance());
    ColorModifier tColorModifier = new ColorModifier(5, Color.RED,
            Color.CYAN, EaseSineInOut.getInstance());
    ColorModifier iColorModifier = new ColorModifier(5, Color.CYAN,
            Color.GREEN, mIEntityModifierListener, EaseSineIn.getInstance());
    ColorModifier xColorModifier = new ColorModifier(5, Color.GREEN,
            Color.YELLOW, EaseSineInOut.getInstance());
    ColorModifier yColorModifier = new ColorModifier(5, Color.YELLOW,
            Color.CYAN, mIEntityModifierListener, EaseSineIn.getInstance());

    // The sequence modifier will go through the color modifiers
    // and the loop entity modifier makes it continuous 
    SequenceEntityModifier mSequenceEntityModifier = new SequenceEntityModifier(
            mColorModifier, tColorModifier, iColorModifier, xColorModifier,
            yColorModifier);
    LoopEntityModifier mLoopEntityModifier = new LoopEntityModifier(
            mSequenceEntityModifier);

    mRectangle.registerEntityModifier(mLoopEntityModifier);

    scene.attachChild(mRectangle);

    pOnPopulateSceneCallback.onPopulateSceneFinished();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:12:38.890

有两种方法可以做到这一点。您可以尝试覆盖修饰符中的内置方法（即，您可以@override onUpdate()）并在那里执行您自己的逻辑，或者您可以使用更简单的方法：剥离现有修饰符并堆叠在新的修饰符上那些。

您在评论中提到，“我尝试清除并添加另一种颜色修饰符，但没有成功，”但没有详细说明原因。如果您的意思是您收到了一些错误，请发布错误消息，我们可以讨论它。如果您的意思是您没有从现有颜色到新颜色的“平滑”过渡（这是有道理的），那么您应该做的是让新修饰符从当前现有值开始。换句话说，在执行颜色修改器时，您为其提供“From”和“To”颜色，使用 mRectangle.getColor() 作为“From”，这样您就可以从当前所在的任何位置开始过渡。

# html5-canvas - 在彩色方块上创建半透明的内部笔画？

> ID：15059174
> 
> 赞同：2
> 
> 时间：2013-02-25T02:23:32.030
> 
> 标签：html5-canvas

我在画布上绘制不同颜色的正方形，固定大小为 50px x 50px。

我已经成功地为这些彩色方块添加了一个 5px 的透明内部笔划，但我这样做的方式似乎有点过分了。

```
ctx.fillStyle = this.color;
ctx.fillRect(this.x, this.y, engine.cellSize, engine.cellSize);
ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
ctx.fillRect(this.x, this.y, engine.cellSize, engine.cellSize);
ctx.fillStyle = this.color;
ctx.fillRect(this.x + 5, this.y + 5, engine.cellSize - 10, engine.cellSize - 10); 
```

有没有比绘制 3 个单独的矩形更好的方法来实现我所追求的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:04:15.990

是的！

您可以在矩形内部使用填充颜色，也可以在矩形周围使用描边颜色。

这是一个小提琴的代码：http: [//jsfiddle.net/m1erickson/myGky/](http://jsfiddle.net/m1erickson/myGky/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

      var canvas=document.getElementById("canvas");
      var ctx=canvas.getContext("2d");

      ctx.beginPath();
      ctx.fillStyle = "red";
      ctx.fillRect(100,100,50,50);
      ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      ctx.fillRect(100,100,50,50);
      ctx.fillStyle = this.color;
      ctx.fillRect(105, 105, 40, 40);
      ctx.fill();

      ctx.beginPath();
      ctx.rect(160,102.5,45,45);
      ctx.fillStyle = 'rgb(163,0,0)';
      ctx.fill();
      ctx.lineWidth = 5;
      ctx.strokeStyle = 'rgb(204,0,0)';
      ctx.stroke();

    }); // end $(function(){});
</script>

</head>

<body>
   <canvas id="canvas" width=600 height=400></canvas>
</body>
</html> 
```

# c# - 如何将多个字节数组组合成一个以创建文件

> ID：15059175
> 
> 赞同：2
> 
> 时间：2013-02-25T02:23:38.037
> 
> 标签：c#, file, bytearray

我需要的帮助是知道如何将每个长度为 1024 字节的多个字节数组组合成一个字节数组来创建文件。

我需要这样做，因为我必须将多个文件发送到 SAP，但是文件必须拆分为 1024（字节 [1024]）的字节数组，并且在我拆分文件后，我将这些文件保存到一个集合中，并且我遇到的问题是在 SAP 中创建文件时，这个文件已损坏。我想在拆分文件时放弃任何问题

这是我用来分割文件的方法

```
for (int i = 0; i < attachRaw.Count(); i++)
        {
            countLine = attachRaw[i].content.Length / 1024;
            if (attachRaw[i].content.Length % 1024 != 0)
                countLine++;
            ZFXX_ATTATTACHMENT_VBA[] attachArray = new ZFXX_ATTATTACHMENT_VBA[countLine];               
            for (int y = 0; y < countLine; y++)
            {
                ZFXX_ATTATTACHMENT_VBA attach = new ZFXX_ATTATTACHMENT_VBA();
                attach.CONTENT = new byte[i == (countLine - 1) ? (attachRaw[i].content.Length - i * 1024) : 1024];
                if (i == (countLine - 1))
                {
                    countLine++;
                    countLine--;
                }
                if (attachRaw[i].content.Length < 1024)
                {
                    attach.CONTENT = attachRaw[i].content;
                }
                else
                {
                    attach.CONTENT = FractionByteArray(i * 1024, (i == (countLine - 1) ? attachRaw[i].content.Length : (i * 1024 + 1024)), attachRaw[i].content);
                }
                attach.FILE_LINK = attachRaw[i].fileLink;
                attachmentRaw.Add(attach);

            }

        }

private static byte[] FractionByteArray(int start, int finish, byte[] array)
    {
        byte[] returnArray = new byte[finish - start];

        for (int i = 0; i < finish - start; i++)
        {
            returnArray[i] = array[start + i];
        }
        return returnArray;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T03:36:36.220

您可以使用`BlockCopy`加入所有阵列。

就像是：

```
 private byte[] JoinArrays(IEnumerable<byte[]> arrays)
    {
        int offset = 0;
        byte[] fullArray = new byte[arrays.Sum(a => a.Length)];
        foreach (byte[] array in arrays)
        {
            Buffer.BlockCopy(array, 0, fullArray, offset, array.Length);
            offset += array.Length;
        }
        return fullArray;
    } 
```

# java - 用 Java 编写 removeAll 的实现

> ID：15059176
> 
> 赞同：2
> 
> 时间：2013-02-25T02:23:41.713
> 
> 标签：java

我正在研究以下问题：

编写一个方法 removeAll ，它接受一个整数值作为参数，并从列表中删除所有出现的给定值。

我的代码没有检查数组中的所有元素。当我将 for 循环中的“大小”更改为数组中的整数数时，它工作正常。它检查所有这些。

```
public class ArrayIntList { 
    private int[] elementData;
    private int size;
}

public void remove(int index) {

    for(int i = index; i < size-1; i++) {
        elementData[i] = elementData[i+1];
    }
    size--;
}

public void removeAll(int num) {

    for (int j = 0; j < size; j++) {// this loop doesn't check all the elements

        if (elementData[j] == num) {
            remove(j);
        } 

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:28:01.037

如果要删除元素，则需要递减，`j`否则会跳过元素。

```
remove(j);
j--; 
```

或者，如果您从结尾迭代到开头，则不必更改计数器，因为您已经处理了这些元素。

```
 for (int j = size - 1; j >= 0; j--) {
    if (elementData[j] == num) {
          remove(j);
     } 
 } 
```

# java - 指定 URLConnection 响应的文档编码

> ID：15059186
> 
> 赞同：1
> 
> 时间：2013-02-25T02:25:36.370
> 
> 标签：java, urlconnection

```
 URL url = new URL("http://google.com");
        URLConnection connection = url.openConnection();

        connection.connect();

        System.out.println("conncetion successful.");

        String contentType = connection.getContentType();
        System.out.println(contentType); 
```

contentType 是“文本/html；字符集=EUC-KR”。（可能在其他语言环境中有所不同）并且文档编码与 contentType 之一相同。

但是，当我使用网络浏览器（IE、Firefox、Opera 等）访问相同的 URL（“ [http://google.com ”）时，它说这是一个 UTF-8 编码的页面。](http://google.com)（并且文档编码实际上是 UTF-8。）

我想获得 UTF-8 编码的 URLConnection，但似乎没有 API。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:03:17.257

我自己找到了答案。

Google 不会检查请求中的 Accept-Charset 属性，而是检查 User-Agent。如果指定了 User-Agent 并且众所周知（Opera、Mozila 等），Google 会以 UTF-8 格式发送响应。否则响应将是 EUC-KR（可能在其他环境中有所不同）。

所以，这是一个答案：在连接之前添加这一行。

```
connection.setRequestProperty("User-Agent", "Opera/9.80"); 
```

您可能更喜欢其他代理。（mozila等...）

# javascript - 简单的警告框在第一次点击后没有关闭，如何使它工作？

> ID：15059190
> 
> 赞同：-1
> 
> 时间：2013-02-25T02:25:45.930
> 
> 标签：javascript, jquery, fancybox

我有一个简单的 jquery 脚本，它在单击按钮后调用花式框，现在的问题是，花式框在第一次单击按钮后不会关闭，只有在第二次单击后...

第二个问题是，在花哨的框中，有一个带有 3 个输入字段的表单，提交按钮/按钮无法单击一次，它还需要单击两次..有什么想法吗？

```
jQuery("#hsbcloanbutton").click(function(e){

    e.preventDefault();
    var loanAmount = jQuery('#loanAmount').val();
    var loanTenure = jQuery('#loanTenure').val();
    var InstalmentAmount = jQuery('#InstalmentAmount').val();
    var loanName = jQuery('#loanName').val();
    var loanNric = jQuery('#loanNric').val();
    var loanContact = jQuery('#loanContact').val();
    if(loanAmount.length < 1 || loanTenure.length  < 1 || InstalmentAmount.length < 1)
    {
        alert("Please enter data");
        return false;
    } else if(isNaN(loanAmount) || isNaN(InstalmentAmount)){
        alert("Please put numbers only in Loan Amount and Instalment Amount fields");
        return false;
    } else {
                jQuery("#hsbcloanbutton").fancybox({
                'titlePosition' : 'inside',
                'transitionIn' : 'none',
                'transitionOut' : 'none',
                'hideOnOverlayClick' : false,
                'hideOnContentClick' : false,
                'showCloseButton' : false,
        });

    }
    jQuery("#hsbcloansubmitformbutton").click(function(e){
        e.preventDefault();
        jQuery.ajax({
            'type' : 'POST',
            'url' : "<?php echo Yii::app()->createUrl?>",   
        )};
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:31:24.830

看来您正在单击事件中初始化您的幻想框：这可能是导致此问题的原因。

初始化脚本`$(document).ready()`

```
$(function() {
        jQuery("#hsbcloanbutton").fancybox({
                'titlePosition' : 'inside',
                'transitionIn' : 'none',
                'transitionOut' : 'none',
                'hideOnOverlayClick' : false,
                'hideOnContentClick' : false,
                'showCloseButton' : false,
        });
}); 
```

# c++ - 包含另一个类作为成员变量的类的构造函数

> ID：15059192
> 
> 赞同：0
> 
> 时间：2013-02-25T02:26:01.483
> 
> 标签：c++, oop, class, constructor

我正在尝试创建一个包含另一个类作为成员变量的类。我遇到以下问题：

```
class SubClass{
    ....
};

class MainClass{
   public:
    MainClass(SubClass const & subClass_);
   private:
    SubClass subClass
}; 
```

在构造函数的 .cpp 文件中

```
MainClass::MainClass(SubClass const & subClass_){
   subClass =  subClass_;
} 
```

这会给出编译器错误。但以下工作：

```
MainClass::MainClass(SubClass const & subClass_):
   subClass(subClass_) {} 
```

谁能告诉我这两者有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T09:59:42.903

*   **在第一种**情况下`operator=`，它应用于**已经创建**的类实例（创建类的第一个默认实例，然后调用 operator=）
*   **在第二种情况下**，使用成员初始化允许使用**复制构造函数**来创建类实例，因此最初使用所需的值对其进行初始化。

**区别：**
第二种情况被认为更有效，因为它执行的操作更少。
第一种情况 - 要求类具有默认构造函数。

**您的问题可能是**MainClass 没有实现默认构造函数的结果，只要您实现了自己的构造函数版本 - 编译器不再创建特殊成员函数（默认构造函数）

**解决方案：**实现默认构造函数/使用成员初始化语法（根据您的应用程序逻辑选择变体）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T09:35:05.370

您不能简单地使用 '=' 来复制对象，除非该运算符“重载”以某种方式克隆对象。不过，这里的 subClass 有一个构造函数，可以将输入对象复制到新的对象中，这就是您可以使用第二个代码的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:37:05.140

这很可能表明 SubClass 不支持赋值运算符（这在您以前的代码中是必需的）。后面的代码不调用赋值，而是从 subClass_ 复制初始化子类成员

一旦你输入了 SubClass 的定义，就可以说更多

# zeromq - zeromq 模式：发布/订阅保证交付

> ID：15059193
> 
> 赞同：2
> 
> 时间：2013-02-25T02:26:02.590
> 
> 标签：zeromq

我想扇出消息并确保任何连接的套接字都已收到它们（如果存在）。

那么是否有一种模式可以实现以下目标：

*   如果有一个或多个 SUB 连接，PUB 套接字将阻塞水印，即所有的 SUB 套接字都收到了消息。
*   如果没有连接 SUB，PUB 套接字将掉入水印。

我在 OSX/Linux 上的 Qt5 中使用[nzmqt](https://github.com/jonnydee/nzmqt)，如果这有帮助或者在这种特殊情况下可以解决上述问题。

# javascript - 在字体大小上执行 jQuery 动画时避免文本换行

> ID：15059198
> 
> 赞同：1
> 
> 时间：2013-02-25T02:26:47.790
> 
> 标签：javascript, jquery, html, css

我有一些以预览比例显示的内容，通过对所有内容使用 em，然后在我想缩小/放大时缩放根字体大小，所以您可以通过单击预览查看完整内容，此时我使用 jQuery 将字体大小设置为 100% 的动画：

[http://jsfiddle.net/5fCd5/3/](http://jsfiddle.net/5fCd5/3/)

所以基本上：

CSS：

```
.example section {
  font-size: 30%;    
} 
```

JS：

```
zoomed.animate({
  fontSize: '100%'
}); 
```

但是请参阅小提琴以获得更好的主意。

问题是，尽管容器随着字体大小缩放，但浏览器会在整个动画中将文本包装在稍微不同的点 - 我理解为什么会发生这种情况的逻辑（以不同大小呈现时字符的不同比例/提示等.)，但它看起来很糟糕。它在 Chrome 中比在 Firefox 中更明显。有趣的是，IE10 根本不会改变换行的位置。这是在 Windows 上 - 可能 OSX 上的字体渲染没有这个问题。

谁能想到某种修复或解决方法？

我最初考虑的一种解决方法是：

以 100% 字体大小创建预览，在空白处拆分文本，一次将一个单词添加到容器中，当容器增加高度时存储位置，然后将每一行包装在一个带有空白不换行的元素中并给出容器溢出：隐藏。

但是，由于我想使用任意 HTML（包括 em 大小的图像）进行预览，所以这并不可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:30:05.333

这个想法是，通过放大常规文本，您放弃了*如何*将其放大为 css/html 的决定。您想设计一种方法，让您可以更好地控制文本的动画和缩放。

一个例子是将您的文本转换为位图，然后对其进行缩放。出于显而易见的原因，这将是一个糟糕的选择，例如将字体转换为位图的成本很高，以及位图本身一旦被缩放就会看起来像素化（即存在质量损失）。此外，即使在放大和缩小时使用 css 也会`scale()`导致一些[模糊（请参阅原始问题下的评论）。](http://www.the-art-of-web.com/css/css-animation/#.USr5MOv25r0)

**我的建议：**

1.  首先，使用[cufon](http://cufon.shoqolate.com/generate/)[将](http://net.tutsplus.com/articles/news/the-easiest-way-to-use-any-font-you-wish/)您的字体转换为等效的画布。Cufon 混合使用和来渲染字体。`Canvas``VML`
2.  使用 cufon/canvas 是很好的第一步。[但是，如果您查看此处](http://d2o0t5hpnwv4c1.cloudfront.net/259_cufon/MyNewProject/index.html)的 cufonned 文本示例，您会注意到，如果您放大和缩小，您将看到通常与位图相关联的相同像素化/质量损失症状。进一步的[研究](https://stackoverflow.com/a/3422425/766570)证明了画布缩放会显示像素化（参见这个例子[http://jsfiddle.net/mBzVR/4/](http://jsfiddle.net/mBzVR/4/)）。
3.  为了解决这个问题，而不是简单地通过将高度乘以一个数字来缩放画布..您可以以每秒 25 帧 (FPS) 渲染画布，在渲染为 1 的每一帧时略微增加/减小其大小/25 秒。我从[Flot](http://www.flotcharts.org/)得到这个想法，这是一个用于渲染画布图表的 jQuery 库。如果您查看他们的主页示例.. 您将看到通过向左/向右平移来动画图表。如果您保存该页面.. 您将在 flot.demo.js 中看到类似的内容：

来自[fllotcharts.org](http://www.flotcharts.org/)：

```
// Update the random dataset at 25FPS for a smoothly-animating chart
setInterval(function updateRandom() {
    series[0].data = getRandomData();
    plot.setData(series);
    plot.draw();
}, 40); 
```

通过这种方式，您可以完全控制动画包装并确保不会发生像素化/缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:23:45.920

Using css letter-spacing ing the `div.padder` like:

```
letter-spacing: 1px; 
```

makes a bit of difference, thought I don't know if it's exactly the change you're hoping for.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:16:14.467

我建议使用等宽字体 - 这将消除您在动画中字体大小发生变化时看到的小间距变化。这是您可以在 Google Web Fonts 上尝试的一种，以查看是否至少没有遇到相同的问题。

[http://www.fonts.com/search/web-fonts?searchtext=Helvetica+Monospaced&SearchType=WebFonts&src=GoogleWebFonts](http://www.fonts.com/search/web-fonts?searchtext=Helvetica%20Monospaced&SearchType=WebFonts&src=GoogleWebFonts)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-19T15:38:16.890

嗯。在我的 Mac 上，Firefox 没有任何问题，但 Chrome 比我想象的更糟糕——调整大小后文本超出了容器的边界。

我认为我们可能需要后退一步，再考虑一下这个问题。所以：

*   有任意大小（尽管相同）的文本容器（“文本容器”）
*   这些容器包含在另一个任意大小的容器（“外部容器”）中
*   浏览器根据容器的宽度可以容纳多少单词来换行（假设`overflow: auto;`）
*   所以，**假设所有这些东西在 resize 期间保持它们的相对大小**，你描述的症状应该是不可能的（没有浏览器错误等等......）

这个推理过程让我检查了你的 jsfiddle，果然，**你的例子中的各个部分在 resize 期间并没有保持它们的相对大小**。

在我的机器上（笔记本电脑，所以像素尺寸很小，但这不会影响这里的逻辑），各个文本容器（最里面的`.padder`）的纵横比为`143px / 53px = 2.70`，而外部容器（`.examples`）的纵横比为`526px / 253px = 2.08`.

这会产生以下后果：

*   调整大小期间行长与容器宽度的*比例**变化*
*   因此，在某些情况下，至少对于某些行，换行符的位置也*必须*在调整大小期间发生变化

我只能看到一种解决方案来防止您遇到的问题：**强制外部容器和文本容器具有相同的纵横比**（即，因为任何涉及使用实际 HTML 文本*并*在转换期间更改纵横比的解决方案都将具有同样的问题）。

这也应该纠正我在 Chrome 中看到的文本高度超过容器高度的问题。发生这种情况是因为行数发生了变化，但放大后的文本容器的高度是由外部容器预先确定的（它与文本容器中的文本高度完全无关）。

# jquery - 我应该如何在 Django 模板中填充 JSON 数据？

> ID：15059206
> 
> 赞同：0
> 
> 时间：2013-02-25T02:28:40.357
> 
> 标签：jquery, python, django

我需要像这样从 url 中获取数据

`http://www.example.com/data?format=json`

它的输出就像

```
student_details: {
    terms: {
        subjects: {
            assigments: {
                id:11, name:"ass_1"
            }
        }
    }
} 
```

以上不是有效的 json，它只是一个示例，展示了 json 的样子。

我想知道在详细视图页面中显示上述数据的最佳方式是什么。

我的意思是我需要对每一列进行编码并在那里放置一个占位符吗？还是我应该有一列并遍历所有行？

我该怎么做？

我也对如何显示嵌套主题、术语分配等感到困惑。

如果有人能指出我正确的方向，那就太好了。

编辑：Django 将创建 JSON。我需要的是仅在 jquery 或 html 中生成详细信息页面。我不想包含任何服务器端渲染。这将是一个静态 html 页面，但从 JSON 获取其数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:31:44.630

JSON 几乎是 Python 中的字典列表的同义词，因此在 Django 模板中迭代键：值对不需要做任何特别的事情。听起来您需要熟悉 Django 模板语言，尤其是`{% for %}`标签：[https ://docs.djangoproject.com/en/1.10/ref/templates/builtins/#for](https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:55:20.273

如果我理解正确，我不认为你想做的事情可以完成，因为正如你所说，你不想包含任何服务器端的工作。Django 模板渲染发生在服务器端，当 jQuery 获取您的 django 生成的 JSON 时，模板已经被渲染、交付回客户端并呈现在浏览器中。

I would recommend you find a similar templating solution, but client-side, like [underscore.js](http://underscorejs.org). What you'll want to do is define the HTML template you'd want to populate with the JSON, and on the success callback of your ajax call, insert the its rendered result on the DOM.

# jquery - jquery .eq() 方法中的“eq”代表什么？

> ID：15059207
> 
> 赞同：42
> 
> 时间：2013-02-25T02:28:45.467
> 
> 标签：jquery

例子：

```
$("td:eq(2)").css("color", "red"); or
$('td').eq(2).css("color", "red"); 
```

我想知道缩写“eq”代表什么，我不是在问 .eq() 方法的作用，可以在[这里](http://api.jquery.com/eq/)找到。

关于这个问题的重要性：当我知道某些缩写的真正含义时，我自己发现学习一门语言更容易。而且我有时也会使用“真实”的单词大声“阅读”我的书面代码。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-25T02:56:01.853

`eq()`如果您知道它是一组相关选择器的一部分（来自 JQuery 文档），那么这是有道理的：

> 与索引相关的选择器 ( **`:eq()`**, **`:lt()`**, **`:gt()`**, **`:even`**, **`:odd`**) 过滤与前面的表达式匹配的元素集。

`lt`当在（小于）和（大于）旁边排列时`gt`，很明显它意味着等于，特别是“*索引*等于*n* ”。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-25T02:30:16.143

我一直认为这`.eq()`是“等于”的缩写。[许多（甚至大多数）以“eq”开头](http://www.merriam-webster.com/browse/dictionary/e/eponymy.htm) [的](http://en.wiktionary.org/wiki/equi-#Prefix)[常见](http://www.merriam-webster.com/browse/dictionary/e/equation%20of%20continuity.htm) [英语单词](http://en.wiktionary.org/wiki/Category:English_words_prefixed_with_equi-)都有[*equi-*](http://en.wiktionary.org/wiki/equi-#Prefix)[前缀](http://en.wiktionary.org/wiki/equi-#Prefix)，源于拉丁语中的“equals”。[](http://en.wiktionary.org/wiki/equi-#Prefix)

 ** * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-04T09:28:07.393

我认为它是 **​​ e* *lement * *q* *ueue。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T02:44:49.837

我一直认为`eq`缺少`sequence`:)*

# python - 检查 Python 中是否存在变量 - 不适用于 self

> ID：15059212
> 
> 赞同：8
> 
> 时间：2013-02-25T02:29:27.750
> 
> 标签：python, maya

在您发表这篇文章之前，在我能找到的任何地方都没有问过它。

我正在使用检查列表是否存在

```
if 'self.locList' in locals():
    print 'it exists' 
```

但它不起作用。它从不认为它存在。这一定是因为我正在使用继承并在`self.`其他地方引用它，我不明白发生了什么。

任何人都可以阐明一下吗？

这是完整的代码：

```
import maya.cmds as cmds

class primWingS():
    def __init__(self):
        pass
    def setupWing(self, *args):
        pass
    def createLocs(self, list):
        for i in range(list):
    if 'self.locList' in locals():
        print 'it exists'
            else:
                self.locList = []
            loc = cmds.spaceLocator(n = self.lName('dummyLocator' + str(i + 1) + '_LOC'))
            self.locList.append(loc)
            print self.locList

p = primWingS() 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-25T02:30:07.797

我想你想要`hasattr(self,'locList')`

虽然，您通常最好尝试使用属性并捕获`AttributeError`如果它不存在则引发的属性：

```
try:
    print self.locList
except AttributeError:
    self.locList = "Initialized value" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T13:01:15.537

换个角度回答一下。`Try ... catch`，`getattr`或者`dir`如果您只想让代码正常工作，那就是要走的路。

该调用`locals()`返回本地范围的字典。那就是它包括`self`. 但是，您要的是`self`( `self.locList`) 的孩子。孩子根本不在字典里。与您正在做的最接近的事情是：

```
if 'locList' in dir(self):
    print 'it exists' 
```

函数`dir`是查询对象项的通用方法。但正如其他帖子中所指出的，从速度的角度查询对象的属性没有多大意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T02:38:28.433

您可以使用带有默认值的 try/except 或 getattr，但这些东西对您的代码没有意义。__init__ 方法用于初始化对象：

```
def __init__(self):
    self.locList = [] 
```

让 locList 不存在是没有意义的。零长度列表是没有位置的对象。

# dojo - 如何在 XPages Domino 9 预览版中直接引用 Dojo 1.8 文件？

> ID：15059217
> 
> 赞同：1
> 
> 时间：2013-02-25T02:30:35.450
> 
> 标签：dojo, xpages

我想知道如何在 Domino 9.0 Beta Preview 的 XPages 中直接访问 dojo 1.8。

例如在 Dojo Docs 我看到：

这当然适用于移动控件，但我不想使用 XPages Mobile 控件，我希望访问 Dojo 1.8 本身并手动进行。

谢谢！

==== Per 很好地回答了我的问题。以下是我最终得到的代码片段，以防将来人们感兴趣。

```
<xp:this.resources>
    <xp:metaData name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"> </xp:metaData>
    <xp:metaData name="apple-mobile-web-app-capable" content="yes"> </xp:metaData>
    <xp:styleSheet href="/.ibmxspres/dojoroot/dojox/mobile/themes/iphone/iphone.css"> </xp:styleSheet>

    <xp:dojoModule name="dojox.mobile"></xp:dojoModule>
    <xp:dojoModule name="dojox.mobile.parser"></xp:dojoModule>
    <xp:dojoModule name="dojox.mobile.ScrollablePane"></xp:dojoModule>

</xp:this.resources> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T06:02:50.113

使用`/.ibmxspres/dojoroot`. 它总是指向最新的 Dojo 版本，因此应该指向 Domino 9 中的 1.8。

# matlab - MATLAB：一个 .(dot) 运算符

> ID：15059222
> 
> 赞同：0
> 
> 时间：2013-02-25T02:31:25.033
> 
> 标签：matlab

我必须解释以下 MATLAB 代码：

```
load('pmat.mat');
vecP = pmat.pmat; 
```

我不知道“pmat.mat”的样子。我想知道点（。）运算符是做什么的。我将它应用于向量，它返回一个错误。

```
>> x=[1 2 3]

x =

 1     2     3

>> x.x
Attempt to reference field of non-structure array. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:35:14.377

这是一个 matlab [struct](http://www.mathworks.com/help/matlab/ref/struct.html)。

例如，

```
>> x = struct('a', 4, 'b', [1 2 3]);
>> x.a
4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:36:48.893

它认为您正在尝试引用名为 x 的结构的名为 x 的字段，但由于数组 x 不是结构，因此您收到错误消息。

# python - 如何覆盖此类中的函数？

> ID：15059227
> 
> 赞同：1
> 
> 时间：2013-02-25T02:32:00.190
> 
> 标签：python, pygal

我正在使用 pygal 库来创建图表，并希望覆盖一些函数，例如 _tooltip_data 函数等。对于初学者，我试图覆盖 _title 函数（要创建文本，我意识到我可以这样做：gauge.title = "Blah Title"，但我想覆盖 _title 函数中的一些其他内容）。

我很迷茫。为了创建 Gauge 图表，我创建了一个 Gauge 类，它继承自 MyGraph 类，MyGraph 类继承自 pypal 的 Graph 类。如果我尝试创建 MyGauge 图表，则会收到错误消息：

```
AttributeError: 'module' object has no attribute 'MyGauge' 
```

这是我的代码，其中包含我确定的大量错误。请记住，我仍然是新手（我可能不必告诉您，您可能只需查看我的代码就可以猜到）。

```
import pygal, os 
from pygal.graph.graph import Graph
from pygal.graph.gauge import Gauge
from pygal.graph import CHARTS_NAMES

class MyGraph(Graph):

    def _title(self):
        """Make the title"""
        if self.title:
            for i, title_line in enumerate(self.title, 1):
                self.svg.node(
                    self.nodes['graph'], 'text', class_='title',
                    x=self.margin.left + self.view.width / 2,
                    y=i * (self.title_font_size + 10)
                ).text = "Hey, this is my Chart Title" # my addition

class MyGauge(MyGraph):
    pass

gauge_chart = pygal.MyGauge(human_readable=True,pretty_print=True) #@UndefinedVariable
gauge_chart.title = 'DeltaBlue V8 benchmark results'
gauge_chart.x_labels = ['Richards', 'DeltaBlue', 'Crypto', 'RayTrace', 'EarleyBoyer', 'RegExp', 'Splay', 'NavierStokes']
gauge_chart.range = [0, 10000]
gauge_chart.add('Chrome', 8212)
gauge_chart.add('Firefox', 8099)
gauge_chart.add('Opera', 2933)
gauge_chart.add('IE', 41)

png = 'gauge.png'
if os.path.isfile(png):
    os.remove(png)

gauge_chart.render_to_png(png) 
```

我被困住了。我什至尝试创建一个 MyPygal 类，它继承自 pygal，所以我可以覆盖 CHARTS_NAMES

```
class MyPygal(pygal):
    def __init__(self):
        CHARTS_NAMES = [
            'Line',
            'StackedLine',
            'XY',
            'Bar',
            'HorizontalBar',
            'StackedBar',
            'HorizontalStackedBar',
            'Pie',
            'Radar',
            'Funnel',
            'Pyramid',
            'VerticalPyramid',
            'Dot',
            'Gauge',
            'MyGauge' # my new chart type
        ] 
```

我用“MyPygal.MyGauge”调用它，但我得到了错误：

```
TypeError: Error when calling the metaclass bases
    module.__init__() takes at most 2 arguments (3 given) 
```

我什至走在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:34:23.893

如果您在自己的文件中创建自己的类，请不要尝试使用`pygal.MyGauge`. 使用`pygal.`前缀是为了引用库中的东西`pygal`。但是您的`MyGauge`课程不是该库的一部分；你自己创造的。只需使用`MyGauge(...)`.

另外，你为什么要创建这个`MyGauge`类？它什么也没做。为什么不直接实例化`MyGraph`？

# asp.net - 压缩图像大小而不影响其尺寸 asp vb

> ID：15059228
> 
> 赞同：0
> 
> 时间：2013-02-25T02:32:11.757
> 
> 标签：asp.net, vb.net, image, compression

我正在通过 ashx 从数据库中检索图像，该网页只能通过我们的内部网查看，但在某些用户中，图像加载需要很长时间。所以我在想也许压缩图像大小会减少加载时间，我还应该保持 400 x 441 的图像尺寸。压缩图像大小的可能方法是什么？它是 jpeg 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:49:25.913

您可以使用 GDI+ 来压缩图像。在 MSDN 上查看[此页面。](http://msdn.microsoft.com/en-us/library/bb882583.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

请注意，Bitmap 的构造函数和 Save 方法都存在重载，可以采用 Stream 而不是文件路径。

# sql - 为文本框设置有效值

> ID：15059230
> 
> 赞同：-3
> 
> 时间：2013-02-25T02:32:19.307
> 
> 标签：sql, database, visual-studio-2010, sql-server-2005, textbox

我正在创建一个程序，我想限制要插入的字符串`Database`有人可以告诉我该怎么做吗？

截至目前，这是我的代码：

```
 Dim SQLcon As New SqlConnection
        Dim SQLdr As SqlDataReader
        Try
            SQLcon.ConnectionString = "Data Source=#### ;Initial Catalog=####;Persist Security Info=True;User ID=####;Password=####"
            Dim SQLcmd As New SqlCommand("INSERT INTO dbo.Patients" & _
                                         "(pIDNo,pLName,pFName,pMI,pSex,pStatus,pTelNo,pDocID,pAddr,pStreet,pBarangay,pCity,pProvince,pLNameKIN,pFNameKIN,pMIKIN,pRelationKIN,pTotalDue)" & _
                                         "VALUES(@pIDNo,@pLName,@pFName,@pMI,@pSex,@pStatus,@pTelNo,@pDocID,@pAddr,@pStreet,@pBarangay,@pCity,@pProvince,@pLNameKIN,@pFNameKIN,@pMIKIN,@pRelationKIN,@totaldue)", SQLcon)
            SQLcmd.Parameters.AddWithValue("@pIDNo", txtPNumber.Text)
            SQLcmd.Parameters.AddWithValue("@pLName", txtLname.Text)
            SQLcmd.Parameters.AddWithValue("@pFName", txtFname.Text)
            SQLcmd.Parameters.AddWithValue("@pMI", txtMI.Text)
            SQLcmd.Parameters.AddWithValue("@pSex", txtPatientSex.Text)
            SQLcmd.Parameters.AddWithValue("@pStatus", txtStatus.Text)
            SQLcmd.Parameters.AddWithValue("@pTelNo", txtPatientTelNo.Text)
            SQLcmd.Parameters.AddWithValue("@pDocID", txtPatientDoctor.Text)
            SQLcmd.Parameters.AddWithValue("@pAddr", txtStreetNumber.Text)
            SQLcmd.Parameters.AddWithValue("@pStreet", txtStreetName.Text)
            SQLcmd.Parameters.AddWithValue("@pBarangay", txtBarangay.Text)
            SQLcmd.Parameters.AddWithValue("@pCity", txtCity.Text)
            SQLcmd.Parameters.AddWithValue("@pProvince", txtProvince.Text)
            SQLcmd.Parameters.AddWithValue("@pLnameKIN", txtKinLname.Text)
            SQLcmd.Parameters.AddWithValue("@pFnameKIN", txtKinFname.Text)
            SQLcmd.Parameters.AddWithValue("@pMIKIN", txtKinMI.Text)
            SQLcmd.Parameters.AddWithValue("@pRelationKIN", txtRelationToPatient.Text)
            SQLcmd.Parameters.Add("@totaldue", SqlDbType.Money).Value = Decimal.Parse(txtTotalDue.Text)
            SQLcon.Open()
            MsgBox("Patient Added!", MsgBoxStyle.Information)
            SQLdr = SQLcmd.ExecuteReader()
        Catch ex As Exception
            MessageBox.Show("Error Occured, Can't Add Patient!" & ex.Message)
        Finally
            SQLcon.Close()
        End Try
        Return "" 
```

在里面`txtSex.Text`

我只希望用户只为男性输入“M”，为女性输入“F”

在里面`txtStatus.Text`

我只希望用户只输入“S”代表单身，“M”代表已婚，“W”代表寡妇，“H”代表分居

还有一件事 ：

在用户输入值后是否可以进行转换`txtMI`？`txtMIKIN`

例子 ：

如果用户输入 'a,b,c,d,e,f,g,h,i,j,k,l,m, .......' 作为他/她的中间名首字母，它将自动插入为'A，B，C，D，E，F，G，H，I，J，K，L，M，......' 在我的`Database`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:36:38.463

您正在插入数据，因此您需要调用：

```
SQLcmd.ExecuteNonQuery() 
```

而不是

```
SQLcmd.ExecuteReader() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:41:31.283

既然`combobox`已经回答了。

我想回答即将更改为[UPPERCASE](http://support.microsoft.com/kb/312897)。

您可以使用这些类型的代码。

方式#1

```
Dim upper as string = (txtMI.text.ToUpper()) 
```

方式#2

```
Dim upper as string = (UCase(txtMI.text)) 
```

方式#3

```
Dim upper as string = (StrConv(txtMI.text,VbStrConv.UpperCase)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:44:59.247

```
txtMI.Text = StrConv(txtMI.Text, VbStrConv.Uppercase) this codes solve my problem... 
```

# javascript - 谷歌地球插件：先加载静态.kmz，然后玩游.kmz？

> ID：15059231
> 
> 赞同：1
> 
> 时间：2013-02-25T02:32:19.883
> 
> 标签：javascript, kml, google-earth, google-earth-plugin, kmz

有没有办法让谷歌地球插件在网页加载时执行以下操作？

1.  显示静态 .kmz 文件，如[http://www.ppacg.org/tours/logo.html](http://www.ppacg.org/tours/logo.html)
2.  启动巡回播放器.kmz，如[http://www.ppacg.org/tours/tabview.html?project=08-37](http://www.ppacg.org/tours/tabview.html?project=08-37)

我可以分别执行上面的#1 或#2，但我不知道如何让它们在网页加载时同时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:19:36.617

[您可以使用google.earth 命名空间中的](https://developers.google.com/earth/documentation/reference/google_earth_namespace)[fetchKml](https://developers.google.com/earth/documentation/kml#fetchkml_and_parsekml)方法简单地加载这两个文件。然后，您可以提供逻辑来处理显示数据并在回调参数中输入游览。

要播放游览，您必须在 Kml DOM 中寻找[KmlTour](https://developers.google.com/earth/documentation/reference/interface_kml_tour)对象，以便您可以使用[GETourPlayer](https://developers.google.com/earth/documentation/reference/interface_g_e_tour_player)打开它。为此，您可以使用[earth 实用程序库](http://code.google.com/p/earth-api-utility-library/)，或者您可以使用[kmldomwalk.js](http://earth-api-samples.googlecode.com/svn/trunk/lib/kmldomwalk.js)脚本。

类似以下 java 脚本的东西应该可以工作（尽管它是在这里编写的并且未经测试）。

```
<script src="//www.google.com/jsapi/"></script>
<script src="//earth-api-samples.googlecode.com/svn/trunk/lib/kmldomwalk.js"></script>
<script>
google.load("earth", "1");

var ge = null;
var kml1= '//www.ppacg.org/tours/logo.html';
var kml2= '//www.ppacg.org/tours/tabview.html?project=08-37';
var tour = null; // so you can call pause, stop, etc globally...

function init() {
  // presumes you have a div with the id 'map3d'
  google.earth.createInstance("map3d", initCallback, function(e){alert(e);});
}

function initCallback(object) {
  ge = object;
  ge.getWindow().setVisibility(true);
  // load your data 
  google.earth.fetchKml(ge, kml1, fetchKmlCallback);
  google.earth.fetchKml(ge, kml2 , fetchKmlCallback);
}

function fetchKmlCallback(object) {
  if (object) {
    // add the features to the plugin
    ge.getFeatures().appendChild(object);
    // Walk the DOM looking for a KmlTour
    walkKmlDom(object, function() {
      if (this.getType() == 'KmlTour') {
        tour = this;
        ge.getTourPlayer().setTour(tour); // enter the tour
        return false; // stop the DOM walk here.
      }
    });
  } else {
    setTimeout(function() {
     alert('Bad or null KML.');
    }, 0);
  }
}

google.setOnLoadCallback(init);
</script> 
```

如果遇到困难，还可以查看这些使用[fetchkml](http://earth-api-samples.googlecode.com/svn/trunk/examples/kml-fetch-interactive.html)和[玩游览的示例。](http://earth-api-samples.googlecode.com/svn/trunk/examples/tour-player.html)

# tsql - Check if a table contains a row with a specific column value

> ID：15059236
> 
> 赞同：11
> 
> 时间：2013-02-25T02:32:56.323
> 
> 标签：tsql, sql-server-2012, exists

In T-SQL syntax, how could I check to see if a table has a row with a a column matching a particular value? I am using SQL Server 2012 and am completely new to it.

Any and all help is greatly appreciated.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T02:35:49.790

```
IF EXISTS (SELECT * FROM TABLE WHERE [column] = 'column_value')
  -- The value 'column_value' was found in column [column] 
```

*   [`IF`](http://msdn.microsoft.com/en-us/library/ms182717.aspx)
*   [`EXISTS`](http://msdn.microsoft.com/en-us/library/ms188336.aspx)
*   [`SELECT`](http://msdn.microsoft.com/en-us/library/ms189499.aspx)

# android - Android，httpPOST 生成 GET 响应

> ID：15059240
> 
> 赞同：0
> 
> 时间：2013-02-25T02:34:21.183
> 
> 标签：android, http

为了执行 http POST 请求，我编写了以下函数：

```
private void httpPost(final File xmlFile){
    String textviewresponse;
    Thread thread = new Thread(){
        @Override
        public void run() {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://myURL");
            StringEntity entity;
            HttpResponse httpresponse;

            try {
                entity = new StringEntity(xmlFile.toString());
                entity.setContentType("text/xml");
                Log.d("TAG",httppost.getURI().toString());
                httppost.setEntity(entity);

                try {

                    httpresponse = httpclient.execute(httppost);
                    textviewresponse=EntityUtils.toString(httpresponse.getEntity()); 
                    Log.d("TAG",textviewresponse);

                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();    
                }finally {
                    httpclient.getConnectionManager().shutdown();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };

    thread.start(); 
} 
```

问题是，当我发送请求时，我不断收到 GET 方法的响应，而不是我应该得到的 POST 响应。

什么可能导致这个问题？

# javascript - 如何在启用 VoiceOver 的 iPad 上检测 Safari 中的滚动事件？

> ID：15059243
> 
> 赞同：3
> 
> 时间：2013-02-25T02:34:49.677
> 
> 标签：javascript, html, accessibility, voiceover

我正在为我们的识字网站[http://tarheelreader.org](http://tarheelreader.org)提供 VoiceOver 支持。当 VoiceOver 关闭时，我可以使用触摸事件来允许滑动翻页。当 VoiceOver 开启时，我使用 3 指轻扫我会听到叮当声，但我无法检测到任何事件。

我看过滚动、触摸移动等，但没有任何乐趣。是否有一些技巧可以让我注意到三指向左滑动或快速导航键盘选项向右箭头？

# objective-c - 如何使用 NSURLConnection 刷新连接

> ID：15059245
> 
> 赞同：0
> 
> 时间：2013-02-25T02:35:09.837
> 
> 标签：objective-c, xml-parsing, nsurlconnection

我正在为学校做一个项目，我想知道如果用户提交了一些东西，是否有办法实际更新与 NSURLConnection 的连接。例如，我正在根据用户名进行 twitter 搜索，并且在加载视图时设置了默认用户名。当用户在该页面上输入不同的用户名时，我需要做什么来刷新该连接？我已经设置了所有按钮处理程序，并且我使用的代码与我的 viewDidLoad 函数中的代码相同。是否有方法调用或实际重置连接的东西？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:34:05.363

我附上了示例代码

```
// member variable 'conn'
// NSURLConnection *conn;
// @property(strong, nonatomic) NSURLConnection *conn;
-(void)viewDidLoad {
  [super viewDidLoad];
  [self sendRequest];
}
- (IBAction)sendButtonClicked {
  [self sendRequest];
}
- (void)sendRequest {
  if (self.conn) {
    [self.conn cancel];
    self.conn = nil;
  }
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]];
    NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];
    self.conn = conn;
    [conn start];

} 
// NSURLConnection Delegates
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
   // append received data
}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
   // error handling
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
   // using data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:36:12.287

* * *

我认为您不能“重置”连接。您将不得不提出新的请求。在您的按钮单击方法中，只需使用新用户名进行新的请求调用。它就像浏览器中的请求一样工作，当您更改 url 中的某些参数时，浏览器会向 Web 服务器发送新请求。

看看苹果的这个例子（如果你不需要缓存部分，只需关注 URLCacheConnection.h/.m）[http://developer.apple.com/library/ios/#samplecode/URLCache/Listings/Classes_URLCacheController_m.html #//apple_ref/doc/uid/DTS40008061-Classes_URLCacheController_m-DontLinkElementID_10](http://developer.apple.com/library/ios/#samplecode/URLCache/Listings/Classes_URLCacheController_m.html#//apple_ref/doc/uid/DTS40008061-Classes_URLCacheController_m-DontLinkElementID_10) i

# java - 如何映射地图 通过注释？

> ID：15059248
> 
> 赞同：0
> 
> 时间：2013-02-25T02:35:15.373
> 
> 标签：java, spring, hibernate

我有 POJO，我需要在其中通过注释映射 MAP 字段。我正在尝试下面的代码。

```
@Entity
@Table(name = "ITEM_ATTRIBUTE", catalog = "DataSync")
public class ItemAttribute implements Cloneable, Serializable {

    @ElementCollection(targetClass = AttributeValueRange.class) 
    @MapKeyColumn(name="rangeId") 
    @Column(name="value")   
    @CollectionTable(name="ATTRIBUTE_VALUE_RANGE", joinColumns=@JoinColumn(name="ITEM_ID"))
    private Map<String, String> attributeValueRange;
} 
```

我还为 Map 字段创建了一个单独的类。下面是`AttributeValueRange`类

```
@Entity
@Table(name="ATTRIBUTE_VALUE_RANGE", catalog="datasync")
public class AttributeValueRange {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private Long id;

    private String rangeId;

    private String value;

    /**
     * @return the rangeId
     */
    public String getRangeId() {
        return rangeId;
    }

    /**
     * @param rangeId the rangeId to set
     */
    public void setRangeId(String rangeId) {
        this.rangeId = rangeId;
    }

    /**
     * @return the value
     */
    public String getValue() {
        return value;
    }

    /**
     * @param value the value to set
     */
    public void setValue(String value) {
        this.value = value;
    }

    /**
     * @return the id
     */
    public Long getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(Long id) {
        this.id = id;
    }
} 
```

我有以下错误堆栈跟踪

```
Caused by: org.springframework.orm.hibernate3.HibernateSystemException: could not get a field value by reflection getter of AttributeValueRange.id; nested exception is org.hibernate.PropertyAccessException: could not get a field value by reflection getter of AttributeValueRange.id

Caused by: org.hibernate.PropertyAccessException: could not get a field value by reflection getter of AttributeValueRange.id

Caused by: java.lang.IllegalArgumentException: Can not set java.lang.Long field AttributeValueRange.id to java.lang.String 
```

请确定我在这里缺少什么？

我正在使用 ZK 框架、Spring 和 Hibernate

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:01:11.907

我对映射进行了以下更改以使其正确：

```
@ElementCollection(targetClass = java.lang.String.class)
@JoinTable(name="ATTRIBUTE_VALUE_RANGE", joinColumns=@JoinColumn(name="ID"))
@MapKeyColumn (name="RANGE_ID")
@Column(name="VALUE")
private Map<String, String> attributeValueRange = new HashMap<String, String>(); 
```

`@JoinColumn`表示包含此 Map 字段的 Entity 类的 ID 字段。

`@MapKeyColumn`表示 Map 的键列。

`@Column`表示 Map 的值列。

`@JoinTable`表示将为此 Map 自动创建的表名。

无需为此 Map 创建单独的实体类。

# php - 如何在成功登录时关闭父级中的 iframe？

> ID：15059249
> 
> 赞同：0
> 
> 时间：2013-02-25T02:35:38.563
> 
> 标签：php, jquery, iframe, fancybox, parent

我正在尝试在 iframe 中打开登录表单。如果用户单击提交按钮时登录成功，我希望 iframe 关闭并将浏览器重定向到 index.php。问题是我不知道如何从那时起关闭 iframe。

这是我拥有的与 iframe 相关的代码：

login.tmpl（html文件，表单所在的位置）

```
<div class="form_item submit_button">
  <button type="submit" name="submit">Login</button>
</div> 
```

login.php（我重定向到索引的地方。这是我认为我需要一些额外的代码来关闭 iframe 的地方）

```
 if (!$error) {
        throw new RedirectBrowserException('index.php');
  } 
```

gallery.tmpl （调用 iframe 的地方。我认为应该不重要）

```
<a class="fancybox iframe fancybox.iframe" href="login.php">Iframe Login</a> 
```

编辑。这是我的 jQuery 代码（gallery.tmpl）：

```
 $(document).ready(function() {
          $(".fancybox").fancybox({
            padding : 0,
            prevEffect : 'none',
            nextEffect : 'none',
            helpers : {
                title : {
                  type: 'over'
                },
                thumbs : {
                  width : 50,
                  height : 50
                }
            }
          });
        });
        $(document).ready(function() {
          $("a.iframe").fancybox({
            autoDimensions : false,
            autoSize : false,
            padding : 0,
            width : 395,
            height : 195,
            type : 'iframe'
          });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:17:57.360

您宁愿从打开 fancybox ( *gallery.tmpl* )的页面重定向到*index.php 。*只需在您的 fancybox 自定义脚本中添加一个回调：

 *```
$(".fancybox").fancybox({
   afterClose : function(){
      // redirects to another file after closing
      window.location.href = "index.php";
   }
}); 
```

然后，在*logging.php 中*，您可以这样做以在成功时关闭 fancybox：

```
<?php if (!$error) { ?>
  <script>parent.jQuery.fancybox.close();</script>
<?php }; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:23:13.470

刚刚解决了问题。最后，这使它工作：

```
 if (!$error) { ?>
    <script type="text/javascript">
    parent.$.fancybox.close();  //can use jQuery instead of $
    window.parent.location ='index.php';    
    </script> <?php
  } 
```

因此，在我刚刚弄清楚之前，重定向父母是我所缺少的。起初我尝试使用某种延迟，但没有奏效。*

# c++ - 制作可变参数函数，它接受任意函子并返回输入函子的每个返回值的元组

> ID：15059250
> 
> 赞同：1
> 
> 时间：2013-02-25T02:35:47.873
> 
> 标签：c++, c++11, tuples, variadic-templates

我想创建一个函数对象，它接受任意函数对象并返回一个存储每个函数对象的返回值的元组。

为了实现这个目标，我做了一个`class A`

```
class A
{
private:
    template <class Ret, class Func>
    auto impl(Ret ret, Func func) -> decltype(tuple_cat(ret, make_tuple(func())))
    {
        return tuple_cat(ret, make_tuple(func()));
    }

    template <class Ret, class First, class... Funcs>
    auto impl(Ret ret, First first, Funcs... funcs) 
    -> decltype(impl(tuple_cat(ret, make_tuple(first())), funcs...))
    {
    return impl(tuple_cat(ret, make_tuple(first())), funcs...);
    }

public:
    template <class Func>
    auto operator()(Func func) -> decltype(make_tuple(func()))
        {
        return make_tuple(func());
    }

    template <class First, class... Funcs>
    auto operator()(First first, Funcs... funcs)
     -> decltype(impl(make_tuple(first()),funcs...))
    {
        impl(make_tuple(first()),funcs...);
    }
}; 
```

在主函数中，我做了三个 lambdas。

```
int main(){
    auto func1 = [](){ cout << 1 << endl; return 1;};
    auto func2 = [](){ cout << 2 << endl; return 2;};
    auto func3 = [](){ cout << 3 << endl; return 3;};

    A a;
    auto x = a(func1, func2);
    cout << "ans : " << get<0>(x) << get<1>(x) << endl; // I expect ans : 12
} 
```

这段代码可以通过 gcc 4.7.2 编译。但是，它并没有像我预期的那样工作。我应该如何修改这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:39:53.270

我认为问题在于您缺少一个`return`声明：

```
template <class First, class... Funcs>
auto operator()(First first, Funcs... funcs)
 -> decltype(impl(make_tuple(first()),funcs...))
{
    return impl(make_tuple(first()),funcs...);
//  ^^^^^^
} 
```

没有它，您的代码将具有未定义的行为。根据 C++11 标准的第 6.6.3/2 段：

> [...] 从函数末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:45:10.103

明显的问题是您缺少其他答案所指出的 return 语句。

反正我觉得你做的太多了。这应该有效：

```
class A
{
public:
    template <class First, class... Funcs>
    auto operator()(First first, Funcs... funcs) -> decltype((make_tuple(first(),funcs()...)))
    {
        return (make_tuple(first(),funcs()...));
    }
};

int main(){
    auto func1 = [](){ cout << 1 << endl; return 1;};
    auto func2 = [](){ cout << 2 << endl; return 2;};

    A a;
    auto x = a(func1, func2);
    cout << "ans : " << get<0>(x) << get<1>(x) << endl; // I expect ans : 12
} 
```

[在线演示](http://stacked-crooked.com/view?id=4495a718a494a626e57f5e915473c3dc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T02:46:20.483

@Andy 的修复工作，但你可以做到比这*更*简单，无需实现重载或辅助函数：

```
#include <iostream>
#include <tuple>

template<typename... Args>
auto tuple_from_funs(Args&&... args) -> std::tuple<decltype(args())...>{
    return std::make_tuple(args()...);
}

int f() { return 1; }
char g() { return '2'; }
std::string h() { return "jorge"; }

int main() {
    auto tup = tuple_from_funs(f, g, h);
    std::cout << std::get<0>(tup) << ", " << std::get<1>(tup) << ", " << std::get<2>(tup) << std::endl;
} 
```

演示[在这里](http://ideone.com/bgV2Ad)。

# css - 如何通过内联 CSS 样式使用 Watir 查找元素

> ID：15059254
> 
> 赞同：1
> 
> 时间：2013-02-25T02:36:44.987
> 
> 标签：css, ruby-on-rails-3, watir

如何使用它的内联样式声明找到一个元素？

这是我的尝试：

```
results = browser.div(:id => 'summon_panel')
                 .div(:class => 'tabs2_container')
                 .div(:class => 'pane_inner', :index => 4)
                 .div(:class => 'pagination_tabs_container')
                 .div(:style => 'display: block') # This is what I've added.
                 .divs(:class => 'rank') 
```

结果：

> Watir::Exception::UnknownObjectException (无法定位元素，使用 {:style=>"display: block", :tag_name=>"div"}): app/controllers/streams_controller.rb:61:in `saveranks'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:41:14.990

^(应 OP 的要求 Copypasta：)

元素上是否`"display: block"`有*确切的*内联样式？

# python - Python：整数的最小总和子列表

> ID：15059256
> 
> 赞同：1
> 
> 时间：2013-02-25T02:37:01.117
> 
> 标签：python, sum, max, minimum, sublist

Python 麻烦：我在如何处理这个程序上遇到了很多麻烦。有人可以帮助我，或者至少给我一个关于这个程序要求什么的提示吗？

5.37 编写函数 mssl()（最小和子列表），将整数列表作为输入。然后它计算并返回输入列表的最大和子列表的总和。最大和子列表是输入列表的条目总和最大的子列表（切片）。空子列表定义为总和为 0。例如，列表的最大总和子列表。

```
[4, -2, -8, 5, -2, 7, 7, 2, -6, 5]
is [5, -2, 7, 7, 2] and the sum of its entries is 19.
>>> l = [4, -2, -8, 5, -2, 7, 7, 2, -6, 5]
>>> mssl(l)
19
>>> mssl([3,4,5])
12
>>> mssl([-2,-3,-5])
0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:30:04.390

首先，要求您找到列表中所有可能的子列表。鉴于您的列表是`[3,4,5]`，所有可能的子列表是：

```
[]
[3]
[3,4]
[3,4,5]
[4]
[4,5]
[5] 
```

您可以使用嵌套[循环](http://docs.python.org/2/tutorial/controlflow.html#for-statements)和[切片](https://stackoverflow.com/questions/509211/the-python-slice-notation)来执行此操作：

```
l = your_list
for start in xrange(len(l)):
  for end in xrange(1, len(l)+1):
    current_sublist = l[start:end] 
```

接下来，您的任务是找到任何这些子列表的最大总和。一种方法是如果当前子列表的总和大于之前的任何总和，则在循环中创建一个局部变量更新它。让我们也将它包装成一个函数：

```
def mssl(l):
  f = 0
  for start in xrange(len(l)):
    for end in xrange(1, len(l)+1):
      s = sum(l[start:end]) 
      if s > f: 
        f = s
  return f 
```

* * *

让我们测试一下：

```
print mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5])
print mssl([3,4,5])
print mssl([-2,-3,-5]) 
```

输出：

```
19
12
0 
```

* * *

一个很好的措施：

```
l = [4, -2, -8, 5, -2, 7, 7, 2, -6, 5]
max(sum(l[s:e]) for s in xrange(len(l)) for e in xrange(1, len(l)+1)) 
```

# png - 从 photoshop 将所有图像导出为 png 格式

> ID：15059260
> 
> 赞同：4
> 
> 时间：2013-02-25T02:37:18.077
> 
> 标签：png, export, extract, photoshop

我有一个 psb 文件，我想将所有单独的图层提取并导出为 png 格式的图像。有没有办法做到这一点？否则，我必须手动选择一层并“保存为 Web 和设备”。这很慢。

谢谢。

# android - API 级别 11 之前的 Android View 动画

> ID：15059261
> 
> 赞同：2
> 
> 时间：2013-02-25T02:37:23.343
> 
> 标签：android, animation, android-support-library

有没有办法使用 API 11 之前的 View 动画方法？我知道 Support v4 库，但我不知道如何使用它，所以我不知道那里是否有解决方案。我希望能够在早期版本中执行如下所示的行：

```
activeAnimator = sliderHolder.Animate().TranslationX(newX).SetDuration(500).SetListener(new SlideFinishListener(this)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T02:39:46.810

查看[NineOldAndroids](http://nineoldandroids.com/)，它提供了与 HoneyComb+ API 相同的所有功能和 API。

# javascript - 如何在谷歌地图中编辑默认标记

> ID：15059264
> 
> 赞同：0
> 
> 时间：2013-02-25T02:38:01.833
> 
> 标签：javascript, google-maps-api-3

请检查此地图视图： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/map_language/map_lang.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/map_language/map_lang.html)

如果您单击 A 或 B，它将在默认标记中显示位置名称。我希望在这里展示一些自定义文本。我怎样才能做到这一点？我的 JavaScript 代码是：

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var oldDirections = [];
var currentDirections = null;

//getting latitude and longitude from address
var latitude;
var longitude;

var geocoder = new google.maps.Geocoder();
var address = "Downtown Berkeley";
geocoder.geocode( { "address": address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK)
  {
      // do something with the geocoded result
      //
      latitude = results[0].geometry.location.lat()
      longitude = results[0].geometry.location.lng()
      alert(latitude )
  }
});

//map initialize    

function initialize() {
var myOptions = {
  zoom: 13,
  center: new google.maps.LatLng(-33.879,151.235),
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

//adding marker 
var marker = new google.maps.Marker
    (
        {
            position: new google.maps.LatLng(latitude , longitude),
            map: map,
            title: "Click me"
        }
    );
    var infowindow = new google.maps.InfoWindow({
        content: "Location info:<br/>Country Name:<br/>LatLng:"
    });
    google.maps.event.addListener(marker, "click", function () {
        // Calling the open method of the infoWindow 
        infowindow.open(map, marker);
    });

directionsDisplay = new google.maps.DirectionsRenderer({
    "map": map,
    "preserveViewport": true,
    "draggable": true

});
directionsDisplay.setPanel(document.getElementById("directions_panel"));

google.maps.event.addListener(directionsDisplay, "directions_changed",
  function() {
    if (currentDirections) {
      oldDirections.push(currentDirections);

    }
    currentDirections = directionsDisplay.getDirections();

  });

calcRoute();
}

function calcRoute() {
var start = "El Cerrito del Norte";
var end = "Downtown Berkeley";
var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:44:37.760

您在 createInfoWindow() 方法中设置该内容。

# java - Swing瘦客户端中的MVC设计模式

> ID：15059266
> 
> 赞同：0
> 
> 时间：2013-02-25T02:38:20.157
> 
> 标签：java, swing, model-view-controller

我正在开发一个应用程序，它有许多摆动瘦客户端 UI 访问一个公共服务器。客户端使用 RMI 与服务器通信。

**如何在此类应用程序中实现 MVC 模式？**

编辑：

我想`Controller`在客户端和服务器端都有。监听客户端 UI 中的`ClientController`所有事件`View`并将信息传递到 `Controller`服务器端。然后`ServerController`访问`Model`用于. `Service`_ `Model`我`Controller`在客户端和服务器端都考虑过，以便客户端发生的任何小事件都可以在客户端处理，而无需使用 RMI 开销调用服务器中的控制器。

**这是实现 MVC 的正确方法吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:08:33.807

mvc 最初是指一台机器上的迷你架构（[http://heim.ifi.uio.no/~trygver/themes/mvc/mvc-index.html](http://heim.ifi.uio.no/~trygver/themes/mvc/mvc-index.html)）。由于您的应用程序是 Web 应用程序，请查看[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)上的另一种方法。另请参阅衍生和扩展：[http](http://c2.com/cgi/wiki?ModelViewController) ://c2.com/cgi/wiki?ModelViewController 。其中之一可能是您想要的。

# spring - 有没有办法在给定的春季消息上强制语言环境？

> ID：15059269
> 
> 赞同：0
> 
> 时间：2013-02-25T02:38:52.873
> 
> 标签：spring, locale, message

```
<spring:message code="someMessageCode" /> 
```

这适用于用户区域设置（浏览器区域设置）。我需要对特定消息强制使用语言环境。我可以用一个 scriplet 来处理这个问题，但我想知道是否有一种方法可以告诉 Spring 使用特定的语言环境来处理特定的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:03:37.057

我认为 spring 消息宏不可能，但您可以创建`MessageSourceAccessor`并使用它。

前任：

```
MessageSourceAccessor messageResolver = new MessageSourceAccessor(messageSource, locale); 
```

将其传递给 freemarker，然后在 freemarker 中

```
${messageResolver.getMessage("someMessageCode")} 
```

# java - 每个线程应该运行 10 分钟，如果时间结束则中断线程

> ID：15059284
> 
> 赞同：0
> 
> 时间：2013-02-25T02:41:44.873
> 
> 标签：java, multithreading, executorservice

我正在尝试制作一个`ExecutorService`可以为每个线程提供超时或中断的实现。

在我下面的例子中，假设我正在产卵`2 threads`（在实际场景中，这个数字会很高），那么我需要确保`each thread`应该运行`10 minutes`. 这意味着，`Thread1 will run for 10 minutes`和`Thread2 will run for 10 minutes as well`。如果 10 分钟结束，那么我需要中断线程或超时。

下面是我到目前为止的代码，我无法理解如何`interrupt or timeout`以如此干净的方式在此处添加此功能，以便如果我`no of threads`在我的代码中使此参数可配置，那么它也应该在那里正常工作。

```
public static void main(String[] args) {

    final int noOfThreads = 2;
    final long exp_time_millis = 600000; //10 minutes

    //create thread pool with given size 
    ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

    for (int i = 0, i< noOfThreads; i++) {
        service.submit(new ThreadTask());
    }
}

class ThreadTask implements Runnable {

    @Override
    public void run() {

        while(true) {
            System.out.println("Thread running...");
            try {

        /* make a select sql to the database 
         * and measure how much time it is taking in 
         * returning the response
         */

            } catch (InterruptedException e) {

            }
        }
    }
} 
```

任何建议都会有很大帮助。

我已经看过几篇关于 SO 的文章，但我找不到任何与我的场景相匹配的东西，我可以轻松地实现它。

**更新代码：-**

我正在尝试下面的代码，但它在运行方法中的 catch 块上给了我错误。不确定我是否做错了什么。谁能帮我？

```
public class ThreadTimeout {

    public static void main(String[] args) {

        final int noOfThreads = 2;

        //create thread pool with given size 
        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        ScheduledExecutorService scheduleService = Executors.newScheduledThreadPool(noOfThreads);
        for (int i = 0; i< noOfThreads; i++) {
            final Future future = service.submit(new ThreadTask());
            scheduleService.schedule(new Runnable(){
                public void run(){
                    future.cancel(true);
                }
            }, 10, TimeUnit.MINUTES);
        }
    }
}

class ThreadTask implements Runnable {

    @Override
    public void run() {

           //make a database connection

        while (true) {
            System.out.println("Thread running...");
            try {
                /*
                 * make a select sql to the database and measure
                 * how much time it is taking in returning the
                 * response
                 */
            } catch (InterruptedException e) {

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:55:11.527

我建议使用第二个`ScheduledExecutorService`. 您可以提交`Future`从您的原始提交返回`ScheduledExecutorService`到取消。

```
ScheduledExecutorService scheduleService =   Executors.newScheduledThreadPool(n);
for (int i = 0, i< noOfThreads; i++) { 
   final Future future = service.submit(new ThreadTask());
   scheduleService.schedule(new Runnable(){
       public void run(){
           future.cancel(true);
       }
  }, 10, TimeUnits.MINUTES);
} 
```

现在`ThreadTask`需要响应中断，否则这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:47:32.167

我推荐的是使用`ExecutorService.awaitTermination(...);`方法，然后使用`ExecutorService.shutdownNow()`方法。

例如：

```
for (int i = 0; i < noOfThreads; i++) {
    service.submit(new ThreadTask());
}
// we always need to shutdown the service _after_ we've submitted all jobs
service.shutdown();
// now we wait for those tasks to finish for 10 minutes
if (!service.awaitTermination(10, TimeUnit.MINUTES)) {
    // if we timed out waiting for the tasks to finish, forcefully interrupt them
    service.shutdownNow();
} 
```

请注意，这将中断线程，但这只会导致某些方法，例如`Thread.sleep()`,`Object.wait()`和其他一些方法抛出`InterruptedException`。它还在线程上设置中断位，可以用`Thread.currentThread().isInterrupted()`. 它*不会*像 unix 进程那样“杀死”线程。

# r - 绑定一组数据集的行？

> ID：15059285
> 
> 赞同：5
> 
> 时间：2013-02-25T02:41:52.607
> 
> 标签：r, dataframe, dataset, bind

我已经阅读了一个数据集列表并将其命名为 n。我想做的是从n中获取数据集的一个子集，然后在R中将它们绑定在一起。当我尝试这样做时，`rbind(n)`这只是给了我所有数据集名称的数据框，而不是实际放置元素每个数据集在彼此之下。我想要做的是绑定共享一个通用名称的数据集的子集。例如，18 个数据集以“4”开头。我想把所有这些结合在一起。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T02:45:24.010

想要你想做的`rbind(n[[1]],n[[2]],...)`是不一样的`rbind(n)`。

你不需要把它写出来，你可以`do.call`用来创建和执行它`call`

```
 do.call(rbind, n) 
```

这将运行您想要的命令。然而，这是出了[名的慢](https://stackoverflow.com/a/12290824/1385941)

您可以使用`rbindlist`包`data.table`中的内容更快地执行相同的操作

```
 library(data.table)

 rbindlist(n) 
```

如果您只想要那些名称以`4`

```
rbindlist(n[grep(names(n), pattern = '^4')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:31:42.790

如果您尝试聚合许多文件，您可能需要`rbind.fill`plyr 包中的函数（如果有 data.table 等效项，我不知道）

```
ll <- list(a=data.frame(x=1,y=2,z=1),
         b= data.frame(x=2,y=3),
         c=data.frame(x=3:4,y=5))

library(plyr)
Reduce(rbind.fill,ll[c('a','b')])   ## subset by list names and 
                                    ## apply recursively using Reduce
  x y  z
1 1 2  1
2 2 3 NA 
```

# php - php爆炸缩写以输出带有hyperkinks的全文的方法

> ID：15059287
> 
> 赞同：0
> 
> 时间：2013-02-25T02:41:57.623
> 
> 标签：php, explode

当前情景：

表“主题”可能包含行“类型”，其中包含以下缩写：

*   网络 - W,
*   电子邮件 - E,
*   电话-P

所以

```
if ( isset($topic['type'])) {
echo $topic['type']; 
```

通常可以输出

```
W P 
```

我的问题是如何输出全文而不是缩写，并有从全文到 url 的超链接，例如：

```
<a href='somesite.com/web'>Web</a> <a href='somesite.com/phone'>Phone</a> 
```

到目前为止我所拥有的：

```
if ( isset($topic['type'])) {
    $typeArr = explode(' ',$topic['type']);
    $fulldesc = array(
        'W' => $lang['textentryW'], // textentryW equals Web
        'E' => $lang['textentryE'], // Email
        'P' => $lang['textentryP'], // Phone
    );
    foreach ($fulldesc as $abc => $name) {
        if(in_array($abc, $typeArr))
            // mental blank !!!
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:50:27.490

就像是：

```
if ( isset($topic['type'])) {
$typeArr = explode(' ',$topic['type']);
$fulldesc = array(
    'W' => $lang['textentryW'], // textentryW equals Web
    'E' => $lang['textentryE'], // Email
    'P' => $lang['textentryP'], // Phone
);
foreach ($typeArr as $type) {
    if(isset($fulldesc[$type])) {
        echo "<a href=\"somesite.com/" . strtolower($fulldesc[$type]) . "\">{$fulldesc[$type]}</a>";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:49:57.103

在最简单的情况下，您可以使用：

```
 echo $fulldesc[ $topic["type"] ]; 
```

已经`$fulldesc`包含最终的 HTML/链接以增加惰性。

`foreach`可能是多余的，如果可能出现意外的缩写字母，您只需要一个或您的测试`isset`：`in_array`

```
if ( isset($topic['type'])) {
    $typeArr = explode(' ',$topic['type']);
    $fulldesc = array(
        'W' => $lang['textentryW'],
        'E' => $lang['textentryE'],
        'P' => "<a href='somesite.com/phone'>$lang[textentryP]</a>",
    );
    if (isset($fulldesc[ $topic["type"] ])) {
        echo $fulldesc[ $topic["type"] ];
    }
    else {
        echo "<a href='somesite.com/UNKNOWN'>$topic[type]</a>";
    } 
```

另外，题外话：您应该使用简单的英语作为`$lang`占位符，以便有一天可以更轻松地过渡到 gettext。从编程的角度来看，缩写很好，但通常更难维护。

# joomla - 带表单的joomla模块开发-如何处理

> ID：15059289
> 
> 赞同：7
> 
> 时间：2013-02-25T02:42:02.893
> 
> 标签：joomla, joomla2.5

我正在创建一个简单的 Joomla 2.5 模块，它将有一个 html 表单。

`mod_mymodule/tmpl/default.php`：

```
<form method="post" id="myemailform" action="">
    <label for="ReferralName">Enter Name:</label><input type="text" name="name" value="<?php echo modCamcloudReferralHelper::getReferralName(); ?>">
    <label for="ReferralEmail">Enter Email Address:</label><input type="text" name="email">
    <label for="ReferralMessage">Enter Message (optional):</label><textarea class="message"></textarea>
    <span class="countdown"></span>
    <button type="submit" value="Send Email">Send Email</button>
    <?php echo JHtml::_('form.token'); ?>   
</form> 
```

我有一个助手班：

`mod_mymodule/helper.php`- 这只是有一些实用功能。

我的问题是在服务器端处理我的表单的通​​常约定是什么。我试图找到人们所做的事情的例子，但我似乎找不到任何东西。我是否将所有内容都放在帮助程序类中：

```
<form method="post" id="myemailform" action="..\helper.php"> 
```

或类似的东西？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:28:48.113

是的，您应该在模块助手类中进行表单处理。将任何逻辑保留在模板文件之外，您可以`mod_mymodule.php`在包含视图文件之前调用帮助方法和分配变量。

不要设置为表单动作帮助文件！我认为在您的情况下操作应该是同一页面，因此您也可以省略操作 url。

编辑：根据评论中的要求，这将是您的内容`mod_mymodule.php`

```
// include helper file
require_once dirname(__FILE__).'/helper.php';
// call some method of the helper class
$items = modMymoduleHelper::getItems();

$moduleclass_sfx = htmlspecialchars($params->get('moduleclass_sfx'));
// render view file from mod_mymodule/tmpl/default.php, $items is available in the view file
require JModuleHelper::getLayoutPath('mod_mymodule', $params->get('layout', 'default')); 
```

# spring - Spring - AbstractApplicationContext close() 方法不会破坏 bean

> ID：15059291
> 
> 赞同：0
> 
> 时间：2013-02-25T02:42:23.610
> 
> 标签：spring

总之：

一种。春天.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.0.xsd">
<context:annotation-config />
<context:component-scan base-package="org.tutorial.spring" />
</beans> 
```

湾。SpringJdbcDemo.java

```
package org.tutorial.spring;

import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.tutorial.spring.dao.SpringJdbcDao;
import org.tutorial.spring.model.Circle;

public class SpringJdbcDemo {

public static void main(String[] args) {
    AbstractApplicationContext ctx = new ClassPathXmlApplicationContext("spring.xml");
    SpringJdbcDao dao = ctx.getBean("springJdbcDao", SpringJdbcDao.class);
    ctx.close();
    Circle circle = dao.getCircle(1);
    System.out.println(circle);
}

} 
```

注意 ctx.close() 在 dao.getCircle(); 之前

C。SpringJdbcDao.java

```
package org.tutorial.spring.dao;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.stereotype.Component;
import org.tutorial.spring.model.Circle;

@Component
public class SpringJdbcDao {

public Circle getCircle(int circleId) {

    Connection conn = null;
    Circle circle = null;
    String derbyDriver = "org.apache.derby.jdbc.ClientDriver";

    try {
        Class.forName(derbyDriver).newInstance();
        conn = DriverManager.getConnection("jdbc:derby://localhost:1527/db");
        PreparedStatement ps = conn.prepareStatement("select * from circle");
        ResultSet rs = ps.executeQuery();

        if (rs.next()) {
            circle = new Circle(circleId, rs.getString("name"));
        }

        rs.close();
        ps.close();
    } catch (Exception e) {
        throw new RuntimeException(e.toString());
    } finally {
        try {
            conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    return circle;
}

} 
```

输出：

2013 年 2 月 24 日晚上 9:40:55 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons 信息：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@45e7c8de 中销毁单例：定义 bean [org.springframework.context. annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,springJdbcDao,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; 工厂层次结构的根
Circle [id=1, name=First Circle

在 ctx.close() 方法之后，dao 仍然有效。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:45:00.337

> 在 ctx.close() 方法之后，dao 仍然有效。

为什么它不起作用？一旦你有了你的实例`SpringJdbcDao`，它就不需要 Spring 的任何帮助来完成它的工作。有了以上内容，您基本上已经编写了一个非常复杂的`SpringJdbcDao dao = new SpringJdbcDao()`.

# c# - 如何在 Microsoft .net 图表中将图例内容与左侧对齐？

> ID：15059292
> 
> 赞同：4
> 
> 时间：2013-02-25T02:42:43.770
> 
> 标签：c#, asp.net-mvc-3, charts, styles, asp.net-charts

我有不同长度的图例文本，需要将图例项对齐到图例的左侧以获得一致的布局。

```
|         My Legend         |

|     X what I have now     |

|  X what I have now long   |   -->  causes irregular layout

| X what I need             |

| X what I need long        |   --> nice, regular layout 
```

一定是显而易见的，但已经研究了几个小时，似乎与工作示例没有任何关系。在此先感谢您的帮助！

**编辑：**

我正在尝试生成一个饼图，因此有多个系列，每个系列都需要系列符号和适当的系列数据点文本，就像默认图例布局中的情况一样。我的图例创作方法：

```
public Legend CreateLegend()
{
    var legend = new Legend();

    legend.Enabled = true;
    legend.Font = new Font("Arial", 11F);
    legend.ForeColor = Color.FromArgb(102, 102, 102);
    legend.InsideChartArea = "Result Chart";

    legend.Position = new ElementPosition(50, 20, 50, height);

    legend.LegendStyle = LegendStyle.Column;

    return legend;
} 
```

还有我的系列创建方法（目前将图例作为我的实验/想法中的参数作为此处的解决方案）：

```
public Series CreateSeries(List<ChartDivision> series, Legend legend)
{
    var seriesDetail = new Series();
    seriesDetail.Name = "Result Chart";
    seriesDetail.IsValueShownAsLabel = false;
    seriesDetail.ChartType = SeriesChartType.Pie;
    seriesDetail.BorderWidth = 2;

    foreach(var datapoint in series)
    {
        var p = seriesDetail.Points.Add(datapoint.Logged);
        p.LegendText = datapoint.Name;                
    }

    seriesDetail.ChartArea = "Result Chart";
    return seriesDetail;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:44:16.633

说到`System.Windows.Forms.DataVisualization.Charting.Chart`这里。这实际上是默认行为。

但是您可以覆盖它：在设计器中选择图表，单击 Legends-property。在相应的图例中，编辑 CellColumns-Property。默认为空。您可以添加两列并将第一列设置为“ `ColumnType=SeriesSymbol`”以使用自定义列获取默认值。然后，在第二列上，对齐属性（默认情况下在 MiddleCenter 上）应该是您要查找的内容。

* * *

所以这里是我的测试程序：[http](http://pastebin.com/ZTwMhsXB) ://pastebin.com/ZTwMhsXB 在表单中添加一个图表控件和两个按钮并运行它。但是，我无法重现您的问题。

请注意，我做了更多的接线。您能否确认您在某处有这些行：

```
chart1.Legends.Add(leg);
// and
legend.Name = // whatever
seriesDetail.Legend = legend.Name; 
```

因为否则可能是您没有看到您创建的图例，而是默认图例。如果您不将图例添加到图表区域，则它是不可见的。

* * *

好的，所以我们现在处于文本在其列中左对齐的点，列总是在图例区域内居中。请参阅此 SO 线程以获取解决方案：[如何控制 winform mschart 图例文本对齐 c#？](https://stackoverflow.com/questions/12916901/how-to-control-winform-mschart-legend-text-alignment-c)

像这样编辑代码：

```
legend.LegendStyle = LegendStyle.Column;
legend.CellColumns.Add(new LegendCellColumn() {
    ColumnType = LegendCellColumnType.SeriesSymbol,
    MinimumWidth = 250,
    MaximumWidth = 250
});
legend.CellColumns.Add(new LegendCellColumn()
{
    ColumnType = LegendCellColumnType.Text,
    Alignment = ContentAlignment.MiddleLeft,
    MinimumWidth = 1500,
    MaximumWidth = 1500
}); 
```

请注意，数字 250 和 1500 是字体大小的百分比，因此 1500 表示字体高度的 15 倍。我已经相应地更新了 pastebin（[http://pastebin.com/GGCZGWF9](http://pastebin.com/GGCZGWF9)），这是我的示例程序的屏幕截图：

![我的示例程序的屏幕截图](../Images/5f8dc80130984724fa8bc840b1fe314a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T19:58:44.500

尝试这样的事情：

```
myChart.Legends["MySeries Name"].CellColumns.Add(new LegendCellColumn("", LegendCellColumnType.Text, "MySeries Name"));
myChart.Legends["MySeries Name"].CellColumns[1].Alignment = ContentAlignment.MiddleLeft; 
```

# performance - 在oracle中用减法比较两个表

> ID：15059296
> 
> 赞同：1
> 
> 时间：2013-02-25T02:43:09.397
> 
> 标签：performance, oracle, resources, compare

某些表的数据需要在我的系统中更新（或删除、插入）。但我想知道哪些数据被更新、删除和插入。所以在数据改变之前，我会像这样备份不同模式的表：

```
create table backup_table as select * from schema1.testtable 
```

并且在数据更改后，我想找到 backup_table 和 testtable 之间的差异，并且我想将差异保存到备份模式中的表中。

我将运行的 sql 是这样的：

```
 CREATE TABLE TEST_COMPARE_RESULT
 AS
 SELECT 'BEFORE' AS STATUS, T1.*
 FROM (
        SELECT * FROM backup_table
        MINUS
        SELECT * FROM schema1.testtable
 ) T1
 UNION ALL
 SELECT 'AFTER' AS STATUS, T2.*
 FROM (
        SELECT * FROM schema1.testtable
        MINUS
        SELECT * FROM backup_table
  ) T2 
```

我担心的是我听说减号操作会占用大量系统资源。在我的系统中，某些表大小会超过700M。所以我想知道oracle如何读取内存中的700M数据（PGA ??) 还是临时表空间？以及我应该如何确保资源足以进行比较操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T06:54:03.500

减号确实是一项资源密集型任务。它需要读取两个表并进行排序以比较两个表。然而，Oracle 有先进的技术来做到这一点。如果做不到，它不会将两个表都加载到内存（SGA）中。是的，它将使用临时空间进行排序。但我建议你试一试。只需运行查询，看看会发生什么。数据库不会受到影响，您始终可以停止执行语句。

您可以做些什么来提高查询的性能：

首先，如果您有确定不会更改的列，请不要包含它们。所以，最好写：

```
select a, b from t1
minus 
select a, b from t2 
```

比使用 a `select * from t`，如果多于这两列，因为工作量较小。

其次，如果要比较的数据量对您的系统来说真的很大（临时空间太小），您应该尝试在块上比较它们：

```
select a, b from t1 where col between val1 and val2
minus 
select a, b from t2 where col between val1 and val2 
```

当然，另一种可能性`minus`是拥有一些日志列，比如updated_date。选择 where updated_date 大于 start of process 将显示更新的记录。但这取决于您如何更改数据库模型和 etl 代码。

# entity-framework - 如何在实体框架中维护有序列表？

> ID：15059298
> 
> 赞同：5
> 
> 时间：2013-02-25T02:43:16.923
> 
> 标签：entity-framework, .net-4.0

更改简单列表中元素的顺序，不会停留在实体框架中。原因很简单，因为订购信息从未存储在数据库中。

有没有人遇到过可以与实体框架一起使用的有序列表的通用实现？

要求是允许用户重新排序所选项目的列表，并且需要保留项目的排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-29T21:31:40.917

# 概述

尽管似乎没有任何“魔法”来实现这一点，但我们已经使用了一种模式来解决这个问题，尤其是在处理对象层次结构时。它归结为三个关键点：

1.  构建一个与您的域模型分开的实体模型。这样做的好处是提供了良好的关注点分离，有效地允许设计和更改您的域模型，而不会被持久性细节所困扰。
2.  使用**AutoMapper**克服实体模型和域模型之间映射的麻烦。
3.  实现自定义值解析器以双向映射列表。

## 魔法

因为模型中经常包含对象之间的分层和循环引用，所以`Map<>()`可以使用下面的方法来避免自定义映射时的 StackOverflow 错误

```
private class ResolveToDomain : IValueResolver
{
    ResolutionResult Resolve(ResolutionResult rr)
    {
        //...
        ((MappingEngine) rr.Context.Engine).Map<Product, ProductEntity>(rr.Context, subProduct)
        //...
    }
} 
```

## 编码

**领域模型**。请注意，子产品列表顺序很重要。

```
class Product
{
    public Product ParentProduct { get; set; }
    public string Name { get; set; }
    public IList<Product> Subproducts { get; set; } 
} 
```

**实体模型**

```
class ProductEntity
{
    public int Id { get; set; }
    public ProductEntity ParentProduct { get; set; }
    public string Name { get; set; }
    public IList<ProductSubproductEntity> Subproducts { get; set; } 
}

class ProductSubproductEntity
{
    public int ProductId { get; set; }
    public ProductEntity Product { get; set; }
    public int Order { get; set; }
    public ProductEntity Subproduct { get; set; }
} 
```

**实体框架上下文**

```
class Context : DbContext
{
    public DbSet<ProductEntity> Products { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<ProductEntity>()
            .HasOptional(e => e.ParentProduct);

        modelBuilder.Entity<ProductSubproductEntity>()
            .HasKey(e => new {e.ProductId, e.Order})
            .HasRequired(e => e.Product)
            .WithMany(e => e.Subproducts)
            .HasForeignKey(e => e.ProductId);

        base.OnModelCreating(modelBuilder);
    }
} 
```

**AutoMapper 配置**

```
class Mappings : Profile
{
    protected override void Configure()
    {
        Mapper.CreateMap<Product, ProductEntity>()
            .ForMember(m => m.Subproducts, a => a.ResolveUsing<ProductSubproductResolver>());

        Mapper.CreateMap<ProductEntity, Product>()
            .ForMember(m => m.Subproducts, a => a.ResolveUsing<ProductSubproductEntityResolver>());

        base.Configure();
    }
}

class ProductSubproductResolver : IValueResolver
{
    public ResolutionResult Resolve(ResolutionResult rr)
    {
        var result = new List<ProductSubproductEntity>();
        var subproductsSource = ((Product) rr.Context.SourceValue).Subproducts;

        if (subproductsSource == null) return rr.New(null);

        for (int i = 0; i < subproductsSource.Count; i++)
        {
            var subProduct = subproductsSource[i];

            result.Add(new ProductSubproductEntity()
            {
                Product = (ProductEntity)rr.Context.DestinationValue,
                Order = i,
                Subproduct = ((MappingEngine) rr.Context.Engine).Map<Product, ProductEntity>(rr.Context, subProduct)
            });
        }
        return rr.New(result);
    }
}

class ProductSubproductEntityResolver: IValueResolver
{
    public ResolutionResult Resolve(ResolutionResult rr)
    {
        var subproductEntitiesSource = ((ProductEntity) rr.Context.SourceValue).Subproducts;

        if (subproductEntitiesSource == null) return rr.New(null);

        var result = subproductEntitiesSource.OrderBy(p => p.Order).Select(p => 
            ((MappingEngine) rr.Context.Engine).Map<ProductEntity, Product>(rr.Context, p.Subproduct))
            .ToList();
        return rr.New(result);
    }
} 
```

**用法**

```
private static IList<Product> CreateDomainProducts()
{
    var result = new List<Product>();

    var mainProduct1 = new Product()
    {
        Name = "T-Shirt"
    };
    var subProduct1 = new Product()
    {
        ParentProduct = mainProduct1,
        Name = "T-Shirt (Medium)",
    };
    var subProduct2 = new Product()
    {
        ParentProduct = mainProduct1,
        Name = "T-Shirt (Large)",
    };
    mainProduct1.Subproducts = new []
    {
        subProduct1,
        subProduct2
    };

    var mainProduct2 = new Product()
    {
        Name = "Shorts"
    };

    result.Add(mainProduct1);
    result.Add(mainProduct2);

    return result;
}

static void Main(string[] args)
{
    Mapper.Initialize(a => a.AddProfile<Mappings>());
    Database.SetInitializer(new DropCreateDatabaseAlways<Context>());

    var products = CreateDomainProducts();
    var productEntities = Mapper.Map<IList<ProductEntity>>(products);

    using (var ctx = new Context())
    {
        ctx.Products.AddRange(productEntities);
        ctx.SaveChanges();
    }
    // Simulating a disconnected scenario...
    using (var ctx = new Context())
    {
        var productEntity = ctx.Products
            .Include(p => p.Subproducts)
            .Include(p => p.Subproducts.Select(p2 => p2.Subproduct))
            .OrderBy(p=>p.Name)
            .ToList();

        var productsResult = Mapper.Map<IList<Product>>(productEntity);

        // Should be 'T-Shirt (Medium)'
        Console.WriteLine(productsResult[1].Subproducts[0].Name);
        // Should be 'T-Shirt (Large)'
        Console.WriteLine(productsResult[1].Subproducts[1].Name);
    }
} 
```

瞧。希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T16:20:07.923

这里没有魔法。如果您想在列表中保留特定的项目顺序（而不是按名称的可复制顺序），您必须在数据库中存储一个序列号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T02:59:04.177

不会有用于在数据库上重新排序的实现。数据库中的数据在物理上默认是按照聚集索引排序的，本质上是按照主键排序的。

你为什么要这样做？EF 鼓励通过 LINQ 查询完成所有排序。

如果您希望优化查找，您可以通过修改为 Migrations 生成的代码在数据库上创建其他非聚集索引：

```
CreateTable(
                "dbo.People",
                c => new
                    {
                        ID = c.Int(nullable: false, identity: true), 
                        Name = c.String()
                    })
                .PrimaryKey(t => t.ID)
                .Index(t => t.Name); // Create an index 
```

请注意，这不会影响数据库中的物理顺序，但会加快查找速度，尽管这需要通过较慢的写入/更新来平衡。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-18T21:10:00.097

为了找到解决这个挑战的方法，我通过以下链接看到了一篇文章：

[SQL中的用户自定义顺序](https://begriffs.com/posts/2018-03-20-user-defined-order.html)

本文分析了在改变列表顺序时产生顺序索引值的不同方法。我发现本文中提到的算法在最小限制下非常高效。该算法称为**True Fractions**，它生成的订单索引如下图所示：

[![在此处输入图像描述](../Images/f05e3638555053fdda47d6faae3133ae.png)](https://i.stack.imgur.com/W6oiH.gif)

我准备了一个代码示例，我通过 EF Core 和 InMemory 数据库实现了这种方法。

[.NET Fiddle 代码示例](https://dotnetfiddle.net/Myhoap)

# javascript - 单击按钮时如何将X和Y坐标传递给服务器

> ID：15059299
> 
> 赞同：1
> 
> 时间：2013-02-25T02:43:27.337
> 
> 标签：javascript, servlets, button, submit, popover

我正在开发一个网页，有一次我得到了图像上单击按钮的 X 和 Y 坐标。当我点击提交按钮时，我想将这些值传递给我的服务器。

当我单击图像时，会打开一个弹出框。它有一个输入文本和一个提交按钮。

```
$('.ImgMapa').popover({
        html: true,
        trigger: 'manual',
        title: "<form action='adiciona'><input type='text' name='nome'/>"
            + "<button type='submit' id='saveStore' class='btn' value='Save'>Save</button></form>"
    }) 
```

我已经声明了我的 servlet 并将它与我的表单相关联。我可以正常将输入文本字符串发送到我的服务器。为此，我正在使用这样的 HttpServlet 类：

```
public class AddInfo extends HttpServlet {

    @Override
    public void service(ServletRequest request, ServletResponse response)
            throws ServletException, IOException {

        PrintWriter out = response.getWriter();

        String name = request.getParameter("nome");
} 
```

使用该代码，我可以在弹出框上插入名称值。但是我怎样才能传递 X 和 Y 坐标呢？

Obs.：我已经有 2 个带有 X 和 Y 坐标的 javascript 变量。我要做的就是在弹出窗口中的提交按钮被点击时将这两个值传递给我的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:01:31.587

虽然还有其他更优雅的方法，但最简单的方法是简单地创建一个隐藏的输入字段。然后在 GET/POST 之前使用和 onclick 事件处理程序将值设置为 X 、 Y 值。

HTML：

```
<input type=hidden name="xValue"/>  
<input type=hidden name="yValue"/> 
```

JavaScript：

```
<script>  
 function submitxy(x , y){  
    document.form.xValue.value = x;   
    document.form.yValue.value = y;   
 }  
</script> 
```

# reporting-services - 如何将一个域名下的一组用户分配给Security？

> ID：15059301
> 
> 赞同：0
> 
> 时间：2013-02-25T02:43:52.897
> 
> 标签：reporting-services, ssrs-2008

我一直在从互联网上寻找解决方案，不幸的是没有适合我的解决方案。

我需要向公司中的所有用户授予“浏览器”访问权限，所有用户都在“公司”域名下。

我曾尝试这样做，但用户仍然获得的权限不足。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:01:44.347

*   使用公司域上的所有用户在 SQL Server 上创建一个登录名。
*   授予对获取报告数据的表或 sp 的 exec 权限。

# qt - 在 Qt 5.0.1 MSVC2010 中设置编译器

> ID：15059304
> 
> 赞同：0
> 
> 时间：2013-02-25T02:44:11.720
> 
> 标签：qt, compiler-construction

我刚刚安装了 Qt 5.0.1 MSVC2010 32bit，我需要配置工具包和编译器。我已经安装了 minGW 并由 Qt 自动检测到。但是在 Tools->Option->Build & Run 菜单中的 Qt Version 选项卡上，我得到了这个：

> 没有编译器可以为此 Qt 版本生成代码

我应该怎么办？我必须使用哪个编译器？我无法构建/运行任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:44:15.800

您应该为下载的 Qt 使用 MSVS 2010 或下载[MinGW Qt 发行版](http://releases.qt-project.org/qt5/5.0.1/qt-windows-opensource-5.0.1-mingw47_32-x86-offline.exe)。

# php - 如何在 Symfony2 中翻译教义日期时间

> ID：15059308
> 
> 赞同：1
> 
> 时间：2013-02-25T02:44:53.763
> 
> 标签：php, date, datetime, symfony, internationalization

我正在尝试在 Symfony2 中将日期时间对象翻译成荷兰语。谁能告诉我如何做到这一点。

我已经尝试对日期进行strftime =>没有运气:(我已经尝试格式化日期=>也没有运气:(

有人可以帮忙吗？

如果需要任何额外信息，请告诉我，我会将信息添加到这个问题中。

* * *

我找到了另一种解决方案，无需安装任何额外的捆绑包即可完成。

```
$formatter = new \IntlDateFormatter(\Locale::getDefault(), \IntlDateFormatter::NONE, \IntlDateFormatter::NONE);
//http://userguide.icu-project.org/formatparse/datetime for date formats
$formatter->setPattern("EEEE d MMMM Y");
$page['modify_date'] = $formatter->format($page['modify_date']);
$page['create_date'] = $formatter->format($page['create_date']); 
```

$formatter->format(DATE) 用正确的模式格式化日期。这可以从控制器完成。

日期可以从树枝打印如​​下：{{modify_date}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:55:36.537

您可以使用/查看[KNPTimeBundle](https://github.com/KnpLabs/KnpTimeBundle)以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:05:31.283

使用[SonataIntlBundle](https://github.com/sonata-project/SonataIntlBundle)，您可以：

```
{{ date_time_object | format_date }} => '1 févr. 2011'
{{ date_time_object | format_time }} => '19:55:26'
{{ date_time_object | format_datetime }} => '1 févr. 2011 19:55:26' 
```

您当然可以传递语言环境参数。[检查文档](https://github.com/sonata-project/SonataIntlBundle/blob/master/Resources/doc/reference/datetime.rst)

# sublimetext2 - SublimeText2中“查找全部”的快捷方式

> ID：15059314
> 
> 赞同：0
> 
> 时间：2013-02-25T02:45:55.383
> 
> 标签：sublimetext2

当我双击任何单词时，ST 会突出显示文件中的所有其他此类单词。是否有任何组合可以将光标放在每个这样的单词上，以便我可以一次编辑它们（比如在 ctrl+f 然后 alt+enter -“查找全部”之后）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:53:15.463

Ctrl + D 几次或 Alt + F3 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-30T20:35:19.560

在 Mac 上，但我使用 CTRL + COMMAND + G 突出显示该单词的所有实例。

# java - 为什么不是 LinkedList 中定义的 ListIterator 的静态类？

> ID：15059317
> 
> 赞同：0
> 
> 时间：2013-02-25T02:46:15.177
> 
> 标签：java, static-members, listiterator

我正在阅读 LinkedList 的 ListIterator 的 Java Doc，它被定义为非静态内部类。为什么不是静态类？这个数据结构不应该在 LinkedList 的所有实例之间共享吗？我很困惑。谢谢。

```
private class ListItr implements ListIterator<E>{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:52:35.993

我认为您对 Java 中静态和非静态类与静态和非静态成员之间的区别有一点误解：静态和非静态类之间的区别在于非静态类有一个隐式成员持有引用外部类，而静态类没有这样的隐式引用。两种内部类在所有实例之间共享；它是内部类的*实例*，它们与其外部类的实例相关联。

这正是您想要的迭代器：每个迭代器都连接到它所迭代的集合的实例，因此通过使内部类非静态来隐式地持有这个引用是非常有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T02:55:49.500

首先，`ListItr`它***不是***数据结构，它是一个内部类。`ListIterator`实例不会自动共享此类的实例，它们不应该！由于内部类`ListItr`可以访问其封闭类数据，这对于在数据集合上实现迭代器非常有用。静态类***不会***有这种访问级别，因此作为迭代器的实现会做出更糟糕的选择。

# ruby - XPath 使用 Nokogiri 返回空数组

> ID：15059320
> 
> 赞同：1
> 
> 时间：2013-02-25T02:46:37.863
> 
> 标签：ruby, xpath, nokogiri, mechanize

我正在尝试使用 Nokogiri、Mechanize 和 XPath 解析页面，但是，无论我尝试什么，我都会收到一个空数组。

![页面我正在尝试解析。](../Images/96c6270c845d116335aa37e370fc0251.png)

我在 Chrome 中检查了它并得到了 XPath，然后尝试了多种方法来解析它，但总是收到一个空数组。

我试过了：

```
puts page.search('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect

puts  post_page.parser.xpath('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect

puts  post_page.parser.at_xpath('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect 
```

所有带有和不带有尾随“/ text”的内容

这是我要抓取的页面的来源：

```
<SCRIPT language="JavaScript">
<!-- 
document.cookie = "IV_JCT=%2FMPIS; path=/";
//--> 
</SCRIPT>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

  <head>
    <title>My Schedule</title>

    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="-1">    
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my schedule">
    <!--
    <link rel="stylesheet" type="text/css" href="styles.css">
    -->

  </head>

  <body>
  <div align="center"> 
    <strong>My Schedule</strong><br>as of Sun Feb 24 2013 06:43:09 PM CST<br><br>
    <div align="left"><pre><br>Employee Name: Johnson Appleseed    
Unit = 12345</pre>    
    <br> 
  </div>

    <table border="0" cellpadding="0" cellspacing="0" width="100%">
     <tr>
     <td colspan="8" align="center"><b><font size="+1">Schedules may be subject to change based on business needs or demand</font></b></td>
     </tr>   

      <tr><td>
      <table border="4" bordercolor="#2D73B9" cellpadding="2" cellspacing="2" width="100%">
      <tr bgcolor="#7C9BCF">
        <td width="12%" align="center"><b>Sunday</b></td>
        <td width="12%" align="center"><b>Monday</b></td>
        <td width="12%" align="center"><b>Tuesday</b></td>
        <td width="12%" align="center"><b>Wednesday</b></td>
        <td width="12%" align="center"><b>Thursday</b></td>
        <td width="12%" align="center"><b>Friday</b></td>
        <td width="12%" align="center"><b>Saturday</b></td>
        <td rowspan="2" width="12%" align="center"><b>Total weekly Hours</b></td>
      </tr>  

      <tr bgcolor="#7C9BCF">

        <td width="14%" align="center">2013-02-24</td>

        <td width="14%" align="center">2013-02-25</td>

        <td width="14%" align="center">2013-02-26</td>

        <td width="14%" align="center">2013-02-27</td>

        <td width="14%" align="center">2013-02-28</td>

        <td width="14%" align="center">2013-03-01</td>

        <td width="14%" align="center">2013-03-02</td>

      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="left"><pre>&nbsp;</pre></td>

        <td width="14%" align="left"><pre><b>Shift: </b>
5:30 PM - 9:00 PM
<b>Meal:</b>
 - </pre></td>

        <td width="14%" align="left"><pre>&nbsp;</pre></td>

        <td width="14%" align="left"><pre>&nbsp;</pre></td>

        <td width="14%" align="left"><pre>&nbsp;</pre></td>

        <td width="14%" align="left"><pre><b>Shift: </b>
2:00 PM - 9:15 PM
<b>Meal:</b>
5:45 PM - 6:30 PM</pre></td>

        <td width="14%" align="left"><pre><b>Shift: </b>
4:45 PM - 9:15 PM
<b>Meal:</b>
 - </pre></td>

        <td width="12%" align="center">14.5</td> 
      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">3.5</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">6.5</td>

        <td width="14%" align="center">4.5</td>

        <td width="14%" align="center">Daily Hours</td>   
      </tr>  

     </table>
     </td></tr>

      <tr><td>
      <table border="4" bordercolor="#2D73B9" cellpadding="2" cellspacing="2" width="100%">
      <tr bgcolor="#7C9BCF">
        <td width="12%" align="center"><b>Sunday</b></td>
        <td width="12%" align="center"><b>Monday</b></td>
        <td width="12%" align="center"><b>Tuesday</b></td>
        <td width="12%" align="center"><b>Wednesday</b></td>
        <td width="12%" align="center"><b>Thursday</b></td>
        <td width="12%" align="center"><b>Friday</b></td>
        <td width="12%" align="center"><b>Saturday</b></td>
        <td rowspan="2" width="12%" align="center"><b>Total weekly Hours</b></td>
      </tr>  

      <tr bgcolor="#7C9BCF">

        <td width="14%" align="center">2013-03-03</td>

        <td width="14%" align="center">2013-03-04</td>

        <td width="14%" align="center">2013-03-05</td>

        <td width="14%" align="center">2013-03-06</td>

        <td width="14%" align="center">2013-03-07</td>

        <td width="14%" align="center">2013-03-08</td>

        <td width="14%" align="center">2013-03-09</td>

      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="12%" align="center">0.0</td> 
      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">Daily Hours</td>   
      </tr>  

     </table>
     </td></tr>

      <tr><td>
      <table border="4" bordercolor="#2D73B9" cellpadding="2" cellspacing="2" width="100%">
      <tr bgcolor="#7C9BCF">
        <td width="12%" align="center"><b>Sunday</b></td>
        <td width="12%" align="center"><b>Monday</b></td>
        <td width="12%" align="center"><b>Tuesday</b></td>
        <td width="12%" align="center"><b>Wednesday</b></td>
        <td width="12%" align="center"><b>Thursday</b></td>
        <td width="12%" align="center"><b>Friday</b></td>
        <td width="12%" align="center"><b>Saturday</b></td>
        <td rowspan="2" width="12%" align="center"><b>Total weekly Hours</b></td>
      </tr>  

      <tr bgcolor="#7C9BCF">

        <td width="14%" align="center">2013-03-10</td>

        <td width="14%" align="center">2013-03-11</td>

        <td width="14%" align="center">2013-03-12</td>

        <td width="14%" align="center">2013-03-13</td>

        <td width="14%" align="center">2013-03-14</td>

        <td width="14%" align="center">2013-03-15</td>

        <td width="14%" align="center">2013-03-16</td>

      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="14%" align="left"><pre>Sched Not Posted</pre></td>

        <td width="12%" align="center">0.0</td> 
      </tr>  

      <tr bgcolor="#FFFFFF">

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">0.0</td>

        <td width="14%" align="center">Daily Hours</td>   
      </tr>  

     </table>
     </td></tr>

     <tr>
     <td colspan="8" align="center"><b><font size="+1">Schedules may be subject to change based on business needs or demand</font></b></td>
     </tr>
    </table >

        <p><br>
        </p>
        <p class="align_center" >      
            <input type=button value="Print this page" onClick="javascript:window.print();">     
            <input type=button value="Close This Window" onClick="javascript:window.close();">
        </p>

  </div>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:23:58.290

Notice that in your XPath accessors you're requiring `tbody` be part of the path:

```
puts page.search('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect
puts  post_page.parser.xpath('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect
puts  post_page.parser.at_xpath('/html/body/div/table/tbody/tr[2]/td/table/tbody/tr[2]/td[2]').inspect 
```

The HTML doesn't have a `tbody` tag, causing your lookup to fail.

Try simplifying your accessor. I usually start with CSS, which Nokogiri supports, then, if I can't get there I switch to XPath. Your mileage might vary for that.

For instance:

```
(rdb:1) puts doc.at('table table tr').to_html 
```

Outputs:

```
<tr bgcolor="#7C9BCF">
<td width="12%" align="center"><b>Sunday</b></td>
        <td width="12%" align="center"><b>Monday</b></td>
        <td width="12%" align="center"><b>Tuesday</b></td>
        <td width="12%" align="center"><b>Wednesday</b></td>
        <td width="12%" align="center"><b>Thursday</b></td>
        <td width="12%" align="center"><b>Friday</b></td>
        <td width="12%" align="center"><b>Saturday</b></td>
        <td rowspan="2" width="12%" align="center"><b>Total weekly Hours</b></td>
        </tr> 
```

That's a lot simpler way of getting at the column headers.

To get at the second row you can use:

```
(rdb:1) puts doc.at('table table tr[2]').to_html 
```

Which gets you:

```
<tr bgcolor="#7C9BCF">
<td width="14%" align="center">2013-02-24</td>
        <td width="14%" align="center">2013-02-25</td>
        <td width="14%" align="center">2013-02-26</td>
        <td width="14%" align="center">2013-02-27</td>
        <td width="14%" align="center">2013-02-28</td>
        <td width="14%" align="center">2013-03-01</td>
        <td width="14%" align="center">2013-03-02</td>
        </tr> 
```

To get at the cell contents you can use:

```
(rdb:1) puts doc.search('table table tr[2] td').map(&:text) 
```

Which returns:

```
2013-02-24
2013-02-25
2013-02-26
2013-02-27
2013-02-28
2013-03-01
2013-03-02
2013-03-03
2013-03-04
2013-03-05
2013-03-06
2013-03-07
2013-03-08
2013-03-09
2013-03-10
2013-03-11
2013-03-12
2013-03-13
2013-03-14
2013-03-15
2013-03-16 
```

Notice how that is returning the headings for two tables. To limit it to the first table we can use `at` instead of `search`. `at` returns the first matching node, where `search` returns a NodeSet, which is like an array. Also, `search` looks through the entire document finding all matches, unlike `at`'s behavior.

This code finds the first table's second row, then walks the embedded cells:

```
(rdb:1) puts doc.at('table table tr[2]').search('td').map(&:text)
2013-02-24
2013-02-25
2013-02-26
2013-02-27
2013-02-28
2013-03-01
2013-03-02

```

It's much simpler, easier to understand and maintain.

# c++ - DirectX11 执行警告 #355

> ID：15059333
> 
> 赞同：0
> 
> 时间：2013-02-25T02:48:58.833
> 
> 标签：c++, directx, warnings

当我运行我的 DirectX11 项目时，每次`ID3D10Device::DrawIndexed`使用此警告调用时，我都会在输出窗口中收到垃圾邮件

> D3D11：警告：ID3D11DeviceContext::DrawIndexed：输入顶点槽 0 的步幅为 48，小于从当前输入布局（56 字节）逻辑上预期的最小步幅。这没关系，因为硬件完全能够读取重叠数据。然而，开发人员可能并不打算利用这种行为。[执行警告#355：DEVICE_DRAW_VERTEX_BUFFER_STRIDE_TOO_SMALL]

这就是我当前调用该函数的方式

> pImmediateContext->DrawIndexed(this->vertexBuffer.indices.size() * 3, 0, 0);

我不确定我做错了什么导致了这个警告。如果有人能对这个问题有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:53:07.700

该错误告诉您输入布局的总字节大小与设置顶点缓冲区时设置的步幅不同。

要解决此问题，您需要确保通过 IASetInputLayout() 设置的输入图层与调用 IASetVertexBuffers() 时设置的输入图层具有相同的步幅。

# wolfram-mathematica - 一种将关系数据库导入的时间序列数据转换为 Mathematica 中可用形式的简单方法

> ID：15059335
> 
> 赞同：1
> 
> 时间：2013-02-25T02:49:11.550
> 
> 标签：wolfram-mathematica, time-series, list-manipulation

我正在尝试找到一种快速的方法来转换从关系数据库（从单个 sql 查询）导入的时间序列数据的形式

```
ticker     date   price      num_tickers num_dates
-------    ----   --------   ----------  ---------
t001       d1     pr001_d1    k           n    
t001       d2     pr001_d2    k           n     
...    
t001       dn     pr001_dn    k           n 
...
t002       d1     pr002_d1    k           n     
t002       d2     pr002_d2    k           n     
... 
t002       dn     pr002_dn    k           n 

...

t00k       d1     pr00k_d1    k           n     
t00k       d2     pr00k_d2    k           n     
... 
t00k       dn     pr00k_dn    k           n 
```

（我已经包含了最后两列，因此无需遍历数据即可知道代码和日期的数量）

它以以下形式导入 Mathematica

```
data = {{'t001',d1,pr001d1,k,n},{'t001',d2,pr001d2,k,n},...,{'t001',dn,pr001dn,k,n},
{'t002',d1,pr002d1,k,n},{'t002',d2,pr002d2,k,n},...,{'t002',dn,pr002dn,k,n}
...
{'t00k',d1,pr00kd1,k,n},{'t00k',d2,pr00kd2k,k,n},...,{'t00k',dn,pr00kdn,k,n}} 
```

但我需要它的形式：

```
tickers = {'t001','t002',...,'t00k'}
dates =   {d1,d2,...,dn}
timeseries ={{pr001_d1,pr002_d1,...,pr00k_d1},
             {pr001_d2,pr002_d2,...,pr00k_d2},
             ...
             {pr001_dn,pr002_dn,...,pr00k_dn}} 
```

我可以通过蛮力循环遍历所有内容来做到这一点，但我知道 Mathematica 有一些非常强大的列表操作功能（我不太熟悉），我希望有人可能知道这样做的巧妙方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:29:24.917

您想根据第一个元素（某种标签）拆分数据。使用`SplitBy`，像这样：

```
Module[{split=SplitBy[data,First]},
  tickers=split[[All,1,1]];
  dates=split[[1,All,2]];
  timeseries=split[[All,All,3]];] 
```

# search - 如何仅在 Joomla 2.5 的搜索结果中显示模块？

> ID：15059336
> 
> 赞同：1
> 
> 时间：2013-02-25T02:49:12.453
> 
> 标签：search, joomla, module

您好，请阅读整个问题，这不仅仅是通过仅为搜索页面启用模块来解决的：

我有几个模块专门显示在 Joomla 的搜索页面上。

我还为搜索创建了一个隐藏的菜单条目，以便告诉模块仅在此页面上显示。这没问题，但是当我单击其中一个结果并重定向到实际结果时，应该只显示在搜索页面上的模块仍然显示在结果页面中。

任何线索如何解决这个问题？真的很烦人，因为我使用 3rd 方搜索增强模块，并且它们显示在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:30:48.337

使用标准的 Joomla，无法将模块仅定位到搜索结果页面，也没有任何链接到结果的页面——但我知道你知道这一点！隐藏的菜单项是一种帮助，但不会更改该页面上某些链接的菜单项。这与Joomla中“Itemids”的分配和使用有关。

为了能够更具体地定位模块，您需要使用 3rd-party 扩展。我开发了 MetaMod (www.metamodpro.com) 来应对这个用例。MetaMod 是一个包装器模块，它可以决定包含（或不包含）哪个其他模块。因此，您将 MetaMod 分配给页面，然后将一段代码放入 MetaMod 中，以决定要包含哪个其他模块。

在这种情况下，我会在 MetaMod 中使用以下内容：

```
if ($core_genius->check("pagetype = search, searchresults")) return XXX;
// replace XXX with the module id of the module to include
// ONLY on the search page, or the searchresults page, but
// no other type of page. 
```

希望有帮助，

斯蒂芬

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:45:14.233

尽管 MetaMod 很棒（我自己用过，而且 Stephen 的支持很棒！）还有另一种方法可以在不使用 3rd 方扩展的情况下做到这一点。

您可以在您想要使用的模块位置上方（或下方）的模板中创建新的模块位置，并将它们包装在 if 语句中，如下所示：

```
<?php if(!isset(JRequest::getString('searchword'))) : ?> 
    <jdoc:include type="modules" name="right-search" style="xhtml" />
<?php endif; ?> 
```

# java - 不知道为什么这段代码会抛出 NumberFormatException。（有效输入）

> ID：15059340
> 
> 赞同：3
> 
> 时间：2013-02-25T02:50:06.010
> 
> 标签：java, parseint

所以我在读这个：

```
10011011001;0110,1001,1001,0,10,11 
```

并在其上运行此代码：

```
 String[] parts = line.split(";");
        System.out.println("Part 1 = " + parts[0]);
        System.out.println("Part 2 = " + parts[1]);
        System.out.println(isNumeric(parts[0]));
        int original = Integer.parseInt(parts[0]);
        System.out.println("Original = " + original); 
```

该`isNumeric`方法是我为调试而编写的。

```
public static boolean isNumeric(String str) {
    for (char c : str.toCharArray()) {
        if (!Character.isDigit(c)) {
            return false;
        }
    }
    return true;
} 
```

输出：

```
Line = 10011011001;0110,1001,1001,0,10,11
Part 1 = 10011011001
Part 2 = 0110,1001,1001,0,10,11
true
Exception in thread "main" java.lang.NumberFormatException: For input string: "10011011001"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at str_substitution.main(str_substitution.java:45) 
```

不知道为什么会出现这个异常，显然字符串是数字的，并且有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T02:52:16.620

10,011,011,001 太大而无法放入 32 位整数。

也许您的意思是使用`long`and `parseLong()`？

或者您是否真的打算将其解析为二进制数（十进制 1241）`parseInt(parts[0], 2)`？

[您可以在此处检查每种 Java 数据类型的最小值和最大值](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T02:52:35.480

你的数字是 100 亿，而 Java 的整数最大值大约是 -2b - 2b。因此它是不可解析的。

也许您想用[`parseInt(String s,int radix)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)二进制数来读取它？或`parseLong()`。

来自 Javadoc（类似案例的示例）-

```
parseInt("2147483648", 10) throws a NumberFormatException 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T02:57:07.747

也许你想使用`Long.parseLong()`而不是`Integer.parseInt()`？

# php - 警告：注意 Session_start() - 标头已发送 - 无输出显示

> ID：15059344
> 
> 赞同：0
> 
> 时间：2013-02-25T02:50:28.140
> 
> 标签：php

按下 index.php 上的提交按钮后，index2.php 中没有显示输出

```
 //index1.php
   <form action="index2.php" name="firstSubmit" method="POST">
<table border="0" cellspacing="10">
    <tr>
        <td>Full Name: </td>
        <td><input name="fullname" id="name" type="text" size="20" maxlength="80"></td>
    </tr>
    <tr>
        <td>Title:</td>
        <td><input name="title" id="title" type="text" size="20" maxlength="80"></td>
    </tr>
    <tr>
        <td>Company:</td>
        <td><input name="company" id="company" type="text" size="20" maxlength="80"></td>
    </tr>
    <tr>
        <td>Course:</td>
        <td>PHP Basics</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td colspan="2"><input type="Submit" name="submit" value="Proceed"></td>
    </tr>
</table>
</form>

//index2.php
<?php session_start();
$_SESSION['fullname']       = $_POST['fullname'];
$_SESSION['title']          = $_POST['title'];
$_SESSION['company']        = $_POST['company'];
$_SESSION['time']           = $_POST['time'];
?> 

<form action="certificate.php" name="certificateSubmit" method="POST">
<table border="0" cellspacing="10">
    <tr>
        <td>Full Name: </td>
        <td><?php echo  $_SESSION['fullname']; ?></td>
    </tr>
    <tr>
        <td>Title:</td>
        <td><?php echo  $_SESSION['title']; ?></td>
    </tr>
    <tr>
        <td>Company:</td>
        <td><?php echo  $_SESSION['company']; ?></td>
    </tr>
    <tr>
        <td>Course:</td>
        <td>PHP Basics</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td colspan="2"><input type="Submit" name="submit" value="Generate Certificate &gt; &gt;"></td>
    </tr>
</table>
</form> 
```

---------我刚刚更新了脚本。这次没有出现关于 session_start() 的警告，但是按下进程按钮后没有结果显示+----

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:55:26.263

确保 index.php 和 index2.php 在开头之前`<?php`或结尾之后没有空格`?>`。此外，许多人已将其作为最佳实践采用的提示：不要`?>`在任何文件的底部包含结束标记；当 PHP 遇到文件末尾时，它会自动添加它。我提到它是因为这也有助于避免空格问题。

根据要求，这是一个基本正确会话使用的示例（尽管这里的问题实际上与调试包含的文件和空格等有关，以确保在`session_start`调用之前没有输出）： [http://www.php。网络/手册/en/session.examples.basic.php](http://www.php.net/manual/en/session.examples.basic.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:10:15.323

The problem is that you have a php comment *before* the opening `<?php`. Take away the `//index2.php` and you should be good to go.

Unless, of course, you just added that for this example! If that is the case, then just check that the `<?php` is the absolute first character in the file.

# java - 如何将 ArrayList 中的元素更改为不同的对象类型？

> ID：15059345
> 
> 赞同：0
> 
> 时间：2013-02-25T02:51:06.093
> 
> 标签：java, arraylist, integer, parseint

我有一个`ArrayList<Character>`. 如何将数组中的元素更改为整数？代码是在 Java 中的。

例子：

```
private ArrayList<Character> arrayList; 
```

我试过`Integer.parseInt()`这样：

```
Integer.parseInt(arrayList, arrayList.get(0)); 
```

但`parseInt`唯一适用于字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:57:05.547

看看[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html)，你可以使用`.charValue()`并将其转换为 int

```
(int)(arrayList.get(0).charValue()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:53:37.817

您正在尝试将字符转换为 int，而该`parseInt`方法仅适用于字符串。试试这个：

```
Integer.parseInt(arrayList.get(0).toString()); 
```

# javascript - 如何使用Javascript将图像与中心对齐？

> ID：15059349
> 
> 赞同：1
> 
> 时间：2013-02-25T02:51:36.163
> 
> 标签：javascript, html, alignment, image

原谅我，我还是 Javascript/HTML/PHP 的新手。在我的 HTML 代码中，我引用了 DisplayImage.js 文件中的 JavaScript 函数：

```
<body>
<div id="display_image" align="center">
    <script type="text/javascript" src="DisplayImage.js"></script>
</div>
</body> 
```

DisplayImage.js JavaScript 代码的一部分在哪里：

```
function show_image(src, width, height, alt) {
    var img = document.createElement("img");
    img.src = src;
    img.width = width;
    img.height = height;
    img.alt = alt;
    document.body.appendChild(img);
}   

show_image("sample1.jpg", 900, 690, "sample image #1"); 
```

这个 JS 函数只是将我想要传递给它的任何图像显示到我的页面上。我的问题是，它总是左对齐的。我希望图像在中心对齐。我尝试将 align="center" 放入我的 HTML 代码中的 div 标记中，但这不起作用，所以我假设您需要从 JS 函数中执行此操作。

谁能帮我让图像在这里居中对齐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:57:25.910

添加该行`img.style.margin = "0 auto";`应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T02:59:01.997

正如其他人所提到的，使用“margin：0 auto;” 在 img 标签上。但是，图片需要设置为“display:block;”

```
#display_image > img {
    display: block;
    margin: 0 auto;
} 
```

[http://jsfiddle.net/slamborne/yffwN/](http://jsfiddle.net/slamborne/yffwN/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T03:06:49.717

您可以使用 CSS 样式标签修改您的 div。

```
<div id="display_image" style="display:block; margin:0 auto;">
    <script type="text/javascript" src="DisplayImage.js"></script>
</div> 
```

如果您要修改多个实例，请更改您的 CSS（嵌入式或外部文件）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-09T21:10:02.137

```
<!DOCTYPE html>
<head>
 <style>
    img.center {
        position: absolute;
        top: 50%;
        bottom: 50%;
        left: 50%;
        right: 50%;
        margin: auto;
    }
</style>

<script>

function ex() {
  var x = document.createElement("IMG")
  x.setAttribute("class", "center")
  x.setAttribute("src", "example.png");
  x.setAttribute("width", "50");
  x.setAttribute("height", "50");
  x.setAttribute("alt", "example");
  document.body.appendChild(x);
}

</script>
</head>
<body>
<button onclick="ex()">click</button>
</body>
</html> 
```

# java - 使用嵌套接口在 java / android 中的两个类之间进行通信

> ID：15059351
> 
> 赞同：0
> 
> 时间：2013-02-25T02:51:36.833
> 
> 标签：java, android, interface, onclicklistener

谁能告诉我我是对还是错？我在解决我的问题时真的很困惑。

我所拥有的是（或我想做或正在想的是:)

我有：

```
 Class B{

     ........
     ........
    interface I{
     ......
     ........
     }
   .......
   .......  
    } 
```

和 ：

```
 Class A implements B.I{
      ........
      .......
      B b= new B();
       } 
```

这是B类和A类两个类之间的正确通信方式吗？我应该如何使这项工作。我希望将 A 类中的一些数据传递给 B 类以进行进一步操作。

当我需要数据时，我应该如何让我将在 A 中实现的方法从 B 中调用？具有相同场景的接口上的一个简单示例将真正帮助我。有人对界面的工作原理有很好的解释吗？或者应该如何使用它们？

我还想进一步询问android中接口工作背后的逻辑..？我们在 OnClick 侦听器中拥有的回调方法背后的逻辑是什么？因为这也是使用接口进行的？例如：我们在课堂上实现它们

```
 class A implements View.OnClickListener 
```

并在我们的类中提供处理 onClick 事件的逻辑？所以它们什么时候被调用。（我知道当我们点击那个特定视图时它们被调用）我想要它们被调用的机制或实现

或者我应该使用抽象类来做到这一点？我真的被困住了！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:51:18.337

我不完全确定我理解，但听起来你只需要实现一个 DB 类。为此，您可以找到许多很好的示例，例如[Here](https://stackoverflow.com/questions/4721732/sqlite-example-program-in-android)。您可以在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)`ActivityA`中执行您的数据库操作，以便这些操作在后台完成并且不会占用您的线程。然后使用单独的 in访问您的 DB 类以检索信息`UI``AyncTask``ActivityB`

至于使用`OnClickListener`s，你可以用不同的方式来做到这一点。您可以在单独的类中定义它们，但在使用它们的类中执行它们通常更容易且同样有效。您可以在 xml 中定义它们

```
<Button
android:id="@+id/btn1"
// button attributes
android:onClick=methodName/> 
```

然后在你的java代码中

```
public void methodName(View v)
    {
     //do stuff here
    } 
```

或使用类似的东西

```
 button1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // do more stuff
    }
}); 
```

定义后在你的java代码中`button1`

在没有看到代码并且不知道您的具体问题的情况下，这听起来像是您可能正在寻找的。如果没有，请更具体地说明您想要什么，也许我们可以更好地为您提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:07:22.827

It seems that what you are trying to figure out is communication between `Fragments`. [Here](http://developer.android.com/training/basics/fragments/communicating.html) it is well explained. If you want to communicate between `Activities` then you should read about `Intents`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:26:30.667

接口旨在定义 Java 中的一种行为。如果一个类实现了一个接口，它会让编译器确信它可以执行该接口中的所有方法。

例如，您可以有一个 Printable 接口，其中包含可以打印的对象所需的方法（例如 getStringRepresentation 方法）。任何实现 Printable 的类都必须实现它的所有方法，因此您必须能够打印该类的对象。

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)阅读有关接口的更多信息。

如果您只想将数据从 A 类传递到 B 类，则不一定需要接口，因为您没有*多个可以执行相同操作的类，此时*您可能需要通过使用来定义它们的共同行为一个界面。

为什么不能使用 B 方法之一的参数将数据从 A 类传递到 B 类的对象？

例如

```
// somewhere in the methods of A
B b = new B();
b.giveData(theData); 
```

# ruby - 在 RMagick 中量化为相同的基色

> ID：15059355
> 
> 赞同：0
> 
> 时间：2013-02-25T02:52:29.610
> 
> 标签：ruby, image-processing, imagemagick, rmagick

在 RMagick 中，您可以调用 quantize 函数来减少原始图像中的颜色。我想知道是否有任何方法可以将特定的调色板强制到图像上。我正在处理数千张图像，我希望能够将它们相互比较，这意味着在 quantize 调用之后我需要它们具有相同的颜色。有没有办法在 RMagick 中强加调色板或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:37:06.390

查看 ImageList 类中的[#quantize](http://www.imagemagick.org/RMagick/doc/ilist.html#quantize)方法。它将列表中的所有图像量化为同一组颜色。此外，[ImageList#remap](http://www.imagemagick.org/RMagick/doc/ilist.html#remap)和 Image#remap 方法将图像重新映射到参考图像指定的颜色集。

# java - 使用休眠将对象保存到与另一个表有关系的表中

> ID：15059356
> 
> 赞同：0
> 
> 时间：2013-02-25T02:52:31.857
> 
> 标签：java, hibernate, hibernate-mapping, data-persistence

我有 2 张桌子。

```
Student (id,name,class_id)<br>
class(id,name) 
```

`student`与`class`表相关`class_id`

使用休眠并生成对象后，我将有 2 个对象

```
Student { int id; String name; Class class }
Class {int id; String name; Set<Student> student} 
```

我想使用休眠（`session.save(student)`）保存学生信息。但是，我必须通过`class_id`. 因此，有没有办法在不使用休眠获取类对象的情况下保存学生？

这只是一个例子，我使用了一个表与其他表有很多关系的数据库，这对我来说很痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:19:41.740

我猜

```
student.setClass(null);
session.save(student); 
```

应该有帮助。虽然我不确定“。但是，我必须通过class_id调用类”是什么意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:08:06.947

您可能正在查看从班级到学生的单向一对多关系（基于上面给出的班级定义）。您还需要了解级联。正如你所说的那样，通过[这个](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html)和[这个](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/example-parentchild.html)来了解关联，你有类似的场景。

# javascript - 为什么我不能在带有 javascript 的对象的对象中设置此变量？

> ID：15059359
> 
> 赞同：0
> 
> 时间：2013-02-25T02:52:38.480
> 
> 标签：javascript, object

为什么我不能这样做我不明白？

```
function hello() {
    this.say = 'fdfsd';
}
function goodbye() {
    this.example = new hello();
} 
```

但如果我这样做，它会起作用；

```
function hello() {
    this.say = 'fdfsd';
}
function goodbye() {
    this.example = false;
}
var goodbye = new goodbye();
goodbye.example = new hello(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:56:42.290

你必须构建`goodbye`

```
var x = new goodbye(); 
```

调用构造函数将创建一个新对象（类型为`goodbye`）。

此行将构造一个类型的对象`hello`并将其分配给实例的`example`属性`goodbye`

```
this.example = new hello(); 
```

构建后，这就是实例`goodbye`将包含的内容

```
// x
{
    example: {
        say: "fdfsd"
    }
} 
```

# c++ - 使用 gcc 编译 boost 1.53 库并隐藏符号可见性

> ID：15059360
> 
> 赞同：3
> 
> 时间：2013-02-25T02:52:53.130
> 
> 标签：c++, gcc, boost, ld

我的链接器出现了一些恼人的错误：

ld：警告：在 boost::detail::sp_counted_base::sp_counted_base() 中直接访问 boost::detail::sp_counted_base 的全局弱符号 vtable 意味着在运行时不能覆盖弱符号。这可能是由使用不同可见性设置编译的不同翻译单元引起的。

在根深蒂固之后，我确定这是由 -fvisibility=hidden 编译引起的，这正是我所需要的。所以我需要用隐藏符号编译boost，一切都应该很好，对吧？

我注意到，当使用 ./b2 构建 boost 时，它会在输出顶部附近列出以下内容：

执行配置检查

```
- gcc visibility           : yes 
```

太好了，但是如何关闭可见性？文档似乎没有提到它。我尝试将“-fvisibility-inlines-hidden -fvisibility=hidden”直接传递给编译器，但这不起作用（出于某种原因）。

提前致谢

# android - 是否可以使用 Java + (Cordova/Titanium) 开发混合移动应用程序

> ID：15059368
> 
> 赞同：3
> 
> 时间：2013-02-25T02:53:51.937
> 
> 标签：android, cordova, image-processing, titanium

我希望为 Android 和 iOS 开发一个跨平台的图像处理应用程序。我正在考虑使用钛移动或 Cordova 等开发框架，但我无法为它们找到任何图像处理/处理库

我只是想知道是否可以使用 Java/ObjectiveC 为特定平台开发核心图像处理部分，并使用 Titanium/Cordova 开发通用的跨平台前端是否可以使用 Titanium 或 Cordova 等开发框架开发 Hybrid Mobile 应用程序（ phoneGap)，同时还有一部分用 Java 编写的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:06:10.687

Yes. its possible. if you are going the PhoneGap route, you need to create a **PhoneGap plugin** for this: [http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_index.md.html](http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_index.md.html)

Once you create the plugin, you can invoke your native methods using Javascript.

Creating plugin for Android: [http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android) Creating Plugin for iOS: [http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS](http://cordova.apache.org/docs/en/2.4.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:47:37.670

PhoneGap 和 Titanium 都允许您这样做。这个问题的标题似乎暗示你想为 iOS 做 JAVA 开发，这是不可能的（至少不能使用 Titanium 或 PhoneGap）。

Titanium 有一个关于如何扩展平台的开发指南：

[http://docs.appcelerator.com/titanium/3.0/#!/guide/Extending_Titanium_Mobile](http://docs.appcelerator.com/titanium/3.0/#!/guide/Extending_Titanium_Mobile)

它链接到特定于 iOS 和 Android 的文章。

# c++ - Windows Phone 8 上的 CCTMXTiledMap (Cocos2d-x) 错误

> ID：15059371
> 
> 赞同：0
> 
> 时间：2013-02-25T02:54:08.627
> 
> 标签：c++, windows-8, windows-phone-8, cocos2d-x

伙计们，我尝试将其放入代码中，但没有成功

```
CCTMXTiledMap* map = CCTMXTiledMap::tiledMapWithTMXFile("TileMaps/orthogonal-test2.tmx"); 
```

我有以下错误：

```
error LNK2019: unresolved external symbol "public: static class cocos2d::CCTMXTiledMap * __cdecl cocos2d::CCTMXTiledMap::tiledMapWithTMXFile(char const *)" 
```

有人可以为我提供解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T10:07:39.020

当我用 Hello World 项目测试瓦片地图时，我也遇到了这个问题。作者可能忘记将所有源代码包含到该项目中。发生错误是因为缺少瓦片地图的 CPP 文件。为了解决这个问题，将文件夹“cocos2dx/tileMap_parallax_nodes”下的所有文件添加到当前项目中。

[http://cocos2d-x.org/boards/6/topics/23325?r=34274](http://cocos2d-x.org/boards/6/topics/23325?r=34274)

截图： [http ://cocos2d-x.org/attachments/2363/Screenshot%20(3).png](http://cocos2d-x.org/attachments/2363/Screenshot%20%283%29.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:41:26.593

我遇到了同样的错误，因为我的项目错过了 CCTMXT 的源（实现）文件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T13:04:22.417

伙计们，它在 cocos2d-x 3.3 版中不工作，它在 v3.2 中工作检查出来，它将在 windows phone 中运行。我`tmx`在visual studio的assets文件夹中得到了输出添加文件

```
TMXTiledMap* platform = TMXTiledMap::create("Tile.tmx");
    addChild(platform); 
```

# python - Python：在交互式终端中使用 eval。如何获得返回值。什么编译模式

> ID：15059372
> 
> 赞同：0
> 
> 时间：2013-02-25T02:54:17.343
> 
> 标签：python, compilation, eval

我有一些代码，例如：

```
 try:
        c = compile(s, COMPILE_STRING_FN, "single")
    except Exception as e:
        answer = (idx, "compile-exception", (e.__class__.__name__, str(e)))
    else:
        try:
            ret = eval(c, globals, locals)
        except Exception as e:
            answer = (idx, "eval-exception", (e.__class__.__name__, str(e)))
        else:
            if ret is not None:
                try:
                    ret = str(ret)
                except Exception as e:
                    ret = "<str-cast exception: %s: %s>" % (e.__class__.__name__, str(e))
            answer = (idx, "return", ret) 
```

这不能按预期工作，因为`ret`总是`None`- 值，如果有的话，将被打印出来。这不是我想要的——我想拥有它`ret`。

对我来说，这似乎`"single"`不是正确的编译模式。此外，`s = "def f(): return 42"`不起作用。

但是，两者都不是`"eval"`因为我想支持任何命令，而不仅仅是单个表达式。

并且使用 mode `"exec"`，我也不会得到返回值。

那么，解决方案是什么？

* * *

上游建议：[单次执行的编译标志以返回值而不是打印它](http://bugs.python.org/issue17294)

* * *

用例：Python 远程外壳​​。我已经为[我的应用程序](https://github.com/albertz/music-player)实现了这个，以便能够随时附加它。[服务器`socketcontrol`模块](https://github.com/albertz/music-player/blob/master/socketcontrol.py)和[客户端交互外壳实现](https://github.com/albertz/music-player/blob/master/socketcontrol-interactiveclient.py)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:16:40.193

而不是`compile(s, COMPILE_STRING_FN, "single")`，我可以使用这个函数：

```
def interactive_py_compile(source, filename="<interactive>"):
    c = compile(source, filename, "single")

    # we expect this at the end:
    #   PRINT_EXPR     
    #   LOAD_CONST
    #   RETURN_VALUE    
    import dis
    if ord(c.co_code[-5]) != dis.opmap["PRINT_EXPR"]:
        return c
    assert ord(c.co_code[-4]) == dis.opmap["LOAD_CONST"]
    assert ord(c.co_code[-1]) == dis.opmap["RETURN_VALUE"]

    code = c.co_code[:-5]
    code += chr(dis.opmap["RETURN_VALUE"])

    CodeArgs = [
        "argcount", "nlocals", "stacksize", "flags", "code",
        "consts", "names", "varnames", "filename", "name",
        "firstlineno", "lnotab", "freevars", "cellvars"]
    c_dict = dict([(arg, getattr(c, "co_" + arg)) for arg in CodeArgs])
    c_dict["code"] = code

    import types
    c = types.CodeType(*[c_dict[arg] for arg in CodeArgs])
    return c 
```

# php - 使用 Drush 时，命令行上的 Apache 服务器变量 ENV 不同

> ID：15059381
> 
> 赞同：1
> 
> 时间：2013-02-25T02:55:42.057
> 
> 标签：php, apache, drupal, ubuntu, command-line-interface

Drupal 会出现此问题，但可归因于一般的 Apache - PHP 配置。在我的配置文件中，我正在确定服务器变量要使用哪个数据库。

```
if($_SERVER['ENV'] == 'development') {
//Use connection A
} else {
//Use connection B
} 
```

在 apache 中，我像这样设置环境：

```
<VirtualHost *:80>
//Other normal Apache variables set
SetEnv ENV development
</VirtualHost> 
```

在我的正常网站设置中，通过网络服务器访问 PHP，这可以很好地工作。但我正在尝试使用命令行上的 drush 运行命令，它总是连接到错误的数据库。问题真的是命令行 php 总是连接到连接 B，我认为它不一定是 drush。

如何将 ENV 设置为同时在 apache 和命令行上工作？操作系统是 ubuntu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:23:53.040

Drush 不使用 Apache 来运行命令，而是直接加载和运行 PHP 文件。要在服务器上全局设置变量，您可以编辑`/etc/environment`和添加

```
ENV=development 
```

您可以阅读有关在 Ubuntu 中设置环境变量的更多信息，请查看[此帮助文章](https://help.ubuntu.com/community/EnvironmentVariables)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T16:13:48.013

--uri 开关将通知 Drush 在运行时未设置 HTTP_HOST 的情况下使用哪个域。

例子：`drush --uri=http://uri-to-development cc all`

您可以将其添加到每台机器上的 drushrc 中，这样您就不必每次都键入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T09:28:56.797

笼统的回答，

Apache 有自己的环境与命令行 ENV（运行`export`以查看差异）。Apache 还包括仅对 Web 服务器有意义的标头/ENV 变量（例如`HTTP_REFERER`& ），这些通过命令行是无意义的（定期使用 shell 时`DOCUMENT_ROOT`您实际上没有）`DOCUMENT_ROOT`

在我看来，问题开始`SetEnv`于您在 Apache 配置中添加一些变量时，当您通过命令行测试文件时还需要包括这些变量（例如自定义`PATH`（s）等..或`LD_LIBRARY_PATH`Oracle 即... )

更大的问题是有时你可以`SetEnv`在你的变量`some-local-websiteX.conf`和一些`SetEnv`被定义在全局下`httpd.conf`

所以我通常这样做

### 1\. 打印 Apache 正在使用的 ENV 变量

在我的文档根目录中，我添加了这个小脚本（它在 Python 中，但您可以调整它以在 PHP 中执行相同的操作）

`File: www/env.cgi`

```
#!/usr/bin/python

print "Content-Type: text/html; charset=utf-8\n"

import os
for e in os.environ:
    print "export {key}='{value}' <br />".format(key=e, value=os.environ[e]) 
```

### 2\. 创建自定义 bash env 文件

然后我将浏览器中的输出复制粘贴到本地文件`~/.bash_apache_env`

### 3\. 通过命令行运行我的网站

每个终端窗口都会将环境重置为默认值（除非你的`~/.bashr`ie ofc 中有一些设置），所以我在我需要的每个窗口中运行以下命令。

```
source ~/.bash_apache_env

# then I can execute
www/index.cgi
www/admin.cgi

# etc .. 
```

#1 & #2 通常只是一次性的

希望能帮助到你...

# python - 当精度和召回率为 1.00 时，在 svm 中得到错误的类预测

> ID：15059384
> 
> 赞同：0
> 
> 时间：2013-02-25T02:56:01.900
> 
> 标签：python, scikit-learn, svm

我有一个包含 340 个图像样本的训练集。在 scikit-learn 中训练 SVM 之后，是否有可能我在 train_test_split() 中犯了一个错误，因为它只使用了 84 个样本并返回了这些度量：

```
Classification report for classifier SVC(C=1000.0, cache_size=200, class_weight=None, coef0=0.0, degree=3,
  gamma=0.0, kernel=rbf, probability=False, shrinking=True, tol=0.001,
  verbose=False):
             precision    recall  f1-score   support

          1       0.60      0.64      0.62        14
          2       0.92      1.00      0.96        12
          3       1.00      1.00      1.00        10
          4       0.30      0.33      0.32         9
          5       0.67      0.80      0.73         5
          6       0.78      0.78      0.78         9
          7       0.64      0.69      0.67        13
          8       1.00      0.62      0.76        13

avg / total       0.75      0.73      0.73        85

Confusion matrix:
[[ 9  1  0  0  0  1  3  0]
 [ 0 12  0  0  0  0  0  0]
 [ 0  0 10  0  0  0  0  0]
 [ 4  0  0  3  0  0  2  0]
 [ 0  0  0  1  4  0  0  0]
 [ 0  0  0  2  0  7  0  0]
 [ 0  0  0  4  0  0  9  0]
 [ 2  0  0  0  2  1  0  8]] 
```

使用所有 340 个样本，我得到了这些措施：

```
Classification report for classifier SVC(C=1000.0, cache_size=200, class_weight=None, coef0=0.0, degree=3,
  gamma=0.0, kernel=rbf, probability=True, shrinking=True, tol=0.001,
  verbose=False):
             precision    recall  f1-score   support

          1       0.56      0.95      0.71        37
          2       1.00      0.97      0.99        36
          3       1.00      1.00      1.00        21
          4       0.97      0.80      0.88        41
          5       0.83      0.95      0.89        21
          6       0.88      0.88      0.88        48
          7       0.98      0.81      0.89        73
          8       0.97      0.78      0.87        37

avg / total       0.91      0.87      0.88       314

Confusion matrix:
[[35  0  0  0  1  1  0  0]
 [ 1 35  0  0  0  0  0  0]
 [ 0  0 21  0  0  0  0  0]
 [ 5  0  0 33  0  1  1  1]
 [ 0  0  0  0 20  1  0  0]
 [ 6  0  0  0  0 42  0  0]
 [10  0  0  1  3  0 59  0]
 [ 5  0  0  0  0  3  0 29]] 
```

在这两种情况下，我都得到错误的类预测： print(clf.predict([fv]))

第 3 类，它具有精确和召回 1.00 值，但是 predict() 在 21 个样本中返回了 14 次错误的类！66% 的时候是错的！

这是我的代码：

```
import csv
import string 

import numpy as np
from sklearn import svm, metrics
from sklearn.cross_validation import train_test_split
from sklearn.svm import SVC

features = list()
path = 'imgsingoleDUPLI/'

reader = csv.reader(open('features.csv', 'r'), delimiter='\t')
listatemp = list()
for row in reader:
    r = row[0]

    if (r != ','):
        numb = float(r)
        listatemp.append(numb)
    else:
        features.append(listatemp)
        listatemp = list()

print(len(features))

target = [        1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,                   
          1,1,1,1,2,2,2,
          2,2,2,2,2,2,2,
          2,2,2,2,2,2,2,
          2,2,2,2,2,2,2,
          2,2,2,2,2,2,2,                  
          2,2,2,2,2,3,3,
          3,3,3,3,3,3,3,
          3,3,3,3,3,3,3,                  
          3,3,3,3,3,4,4,
          4,4,4,4,4,4,4,
          4,4,4,4,4,4,4,
          4,4,4,4,4,4,4,
          4,4,4,4,4,4,4,
          4,4,4,4,4,4,4,                  
          4,4,4,4,5,5,5,
          5,5,5,5,5,5,5,
          5,5,5,5,5,5,5,                  
          5,5,5,5,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,                  
          6,6,6,7,7,7,7,               
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,                  
          7,7,7,7,7,7,8,
          8,8,8,8,8,8,8,
          8,8,8,8,8,8,8,
          8,8,8,8,8,8,8,
          8,8,8,8,8,8,8,
          8,8,8,8,8,8,8,                  
          8]

X = features
y = target

X_train, X_test, y_train, y_test = train_test_split(X, y,
        test_size=0.25, random_state=42)

C = 1000.0

#clf = svm.SVC(kernel='rbf', C=C).fit(X, y)
#y_predicted = clf.predict(X)
clf = svm.SVC(kernel='rbf', C=C).fit(X_train, y_train)
y_predicted = clf.predict(X_test)

print "Classification report for classifier %s:\n%s\n" % (
    clf, metrics.classification_report(y_test, y_predicted))
print "Confusion matrix:\n%s" % metrics.confusion_matrix(y,_test y_predicted)

# feature vectors taken from class 3 of training set where predict() assing a different class

fv1 = [0.16666666666634455, 8.0779356694631609e-26, 7.6757837200946069e-22, 1.0, 1.0000000000034106]

fv2 = [0.22222222221979693, 0.012345679011806714, 0.0044444444443150974, 0.13333333333333333, 2.999999999956343]

fv3 = [0.22222222221979693, 0.012345679011806714, 0.0044444444443150974, 0.13333333333333333, 2.999999999956343]

fv4 = [0.16666666666662877, 0.0017361111111079532, 1.6133253119051825e-23, 1.0, 1.6666666666660603]

fv5 = [0.24813735017910915, 0.0088802547101916908, 0.0046856535169676481, 0.4666666666666667, 2.224609846181971]

fv6 = [0.16666666666662877, 0.0017361111111079532, 9.1196662533971301e-23, 1.0, 1.6666666666660603]

print(clf.predict([fv1])) 
```

我的功能文件： [https ://docs.google.com/file/d/0ByS6Z5WRz-h2VThLMk9VYVh4ZE0/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2VThLMk9VYVh4ZE0/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:19:35.723

`train_test_split(X, y, test_size=0.25)`将随机抽取 25% 的数据来制作测试集（在这种情况下为 85 个样本），并保留剩余的 75%（在您的情况下应该是 255）来制作训练集。

分类报告显示，在您的测试集中，您在第 3 类中只有 10 个样本，因此您无法观察到该类的“在 21 个样本中返回 14 次错误的类”（否则这意味着您没有使用测试集进行评估） .

尝试更改 的值`random_state`以生成不同的随机拆分，并检查对于不同的随机拆分，类别 3 的精度和召回率是否始终为 1.0。要自动执行此过程并计算测试分数的平均值，您可以使用[ShuffleSplit执行](http://scikit-learn.org/stable/modules/generated/sklearn.cross_validation.ShuffleSplit.html)[交叉验证](http://scikit-learn.org/dev/modules/cross_validation.html)。

# css - CSS3奇偶仅可见行

> ID：15059388
> 
> 赞同：6
> 
> 时间：2013-02-25T02:56:45.057
> 
> 标签：css, css-selectors

我正在尝试条纹交替元素的颜色。但我希望行颜色仅交替可见行。如果您查看以下内容，这是我尝试使其正常工作的尝试。

[http://jsfiddle.net/kuwFp/3/](http://jsfiddle.net/kuwFp/3/)

```
<!DOCTYPE html>
<html>
<head>
<style>
p:not(.hide):nth-child(odd)
{
background:#ff0000;
}
p:not(.hide):nth-child(even)
{
background:#0000ff;
}
.hide { display:none; }
</style>
</head>
<body>

<p>The first paragraph.</p>
<p class="hide">The second paragraph.</p>
<p>The third paragraph.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:07:42.653

You can't do this with pure CSS because the `:nth-child` selector is calculated with respect to the element and `:not` does not filter element position in the DOM. You need to use JavaScript for a fully flexible solution.

It's still possible for you to do this *inflexibly* by making elements after `.hide` with `:nth-child` alternate the color they should be:

```
.hide + p:nth-child(odd) {
    background: #0000ff;    
} 
```

You can continue to add similar rules for more and more combinations of sibling `.hide` and `p`, but this is very inflexible.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T06:06:19.333

诀窍是隐藏具有不同标签的行，而不是类。在我的示例中，我使用“del”标签来隐藏。

```
.list div:nth-of-type(odd) { background: ghostwhite; }
.list del { display: none; }
```

```
<div class="list">
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <del>4</del>
  <div>5</div>
  <del>6</del>
  <div>7</div>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T15:08:52.390

如果您有权访问隐藏和显示元素的代码，则可以在每个原始隐藏元素之后添加另一个辅助隐藏元素，因此将为 css 选择器保留奇偶性。此外，当原始辅助元素再次出现时，删除每个隐藏的辅助元素。

# java - 优化导出到小程序的类

> ID：15059396
> 
> 赞同：1
> 
> 时间：2013-02-25T02:57:17.837
> 
> 标签：java, jar, applet, minimization

我是Java的新手。在开发小程序时，我还制作了一个库，其中包含一系列要在服务器端应用程序中使用的函数。
我意识到，也许我可以通过仅从库中导出类来缩小 jar 的大小，我在 applet 中使用。
有什么办法可以半自动吗？
一些可以指向我使用过的类的应用程序，或者类似的东西......

**编辑：**
也许我无法正确表达。
我想做的是**从我的这个库中获取哪些类用于小程序**。
我可以手动完成，就像我现在正在做的那样，但我宁愿使用一个工具来帮助我创建一个构建，告诉我正在使用哪些类，而不是猜测我正在使用哪个类。我正在使用eclipse，但我知道蚂蚁。我知道如何构建小程序或罐子。我的问题是让它更有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:11:28.263

这在很大程度上取决于您用于构建 jar 文件的工具。但可能这些工具已经有一种机制可以从 jar 文件中排除类/文件。一个经典的工具是蚂蚁。如果您使用的是 ant，此链接应为您提供信息：[How to exclude a directory from ant fileset, based on commands content](https://stackoverflow.com/questions/2232943/how-to-exclude-a-directory-from-ant-fileset-based-on-directories-contents)

如果您使用其他工具，请编辑您的问题。

附注：您真的确定要将 Java Applet 用于客户端/服务器应用程序吗？如果您更喜欢小程序，因为您可以轻松地分发它，请考虑使用 Java Web Start。

# python - 带有函数注释的装饰器

> ID：15059397
> 
> 赞同：4
> 
> 时间：2013-02-25T02:57:19.447
> 
> 标签：python, python-3.x, decorator

在 PEP 3107 和[这个 SO 答案](https://stackoverflow.com/a/14379780/455276)中，暗示 Python3K 函数注释和装饰器适合手和手套——我应该能够编写一个与函数属性一起使用的装饰器。

但是，我无法弄清楚如何使它们按我的预期工作。

考虑：

```
def verbose(lcls):
    def wrap(f):
        print('inside wrap')
        def wf(*args):
            print('inside wf')
            print('lcls in wf:',lcls)
            print('locals in wf:',locals())
            print('wf annotations:',wf.__annotations__)
            print('xYx annotations:',xXy.__annotations__)
            r=f(*args)
            print('after f(*args)')
            return r
        return wf
    return wrap           

@verbose(locals())    
def xXy(x: 'x in x\'s', y: 'y in Y\'s') -> ('x times y','in x and y units'):
    print('locals in xXy:',locals())
    return x*y

xy=xXy(10,3)    
print(xy) 
```

印刷：

```
inside wrap
inside wf
lcls in wf: {'xXy': <function verbose.<locals>.wrap.<locals>.wf at 0x109767ef0>, '__doc__': None, 'verbose': <function verbose at 0x109767050>, '__cached__': None, '__builtins__': <module 'builtins'>, '__package__': None, '__file__': '/private/var/folders/gx/gqtmx9mn7b75pk1gfy0m9w3w0000gp/T/Cleanup At Startup/test-383453350.857.txt', '__loader__': <_frozen_importlib.SourceFileLoader object at 0x10959ac10>, '__name__': '__main__'} 
locals in wf: {'f': <function xXy at 0x109767e60>, 'args': (10, 3), 'lcls': {'xXy': <function verbose.<locals>.wrap.<locals>.wf at 0x109767ef0>, '__doc__': None, 'verbose': <function verbose at 0x109767050>, '__cached__': None, '__builtins__': <module 'builtins'>, '__package__': None, '__file__': '/private/var/folders/gx/gqtmx9mn7b75pk1gfy0m9w3w0000gp/T/Cleanup At Startup/test-383453350.857.txt', '__loader__': <_frozen_importlib.SourceFileLoader object at 0x10959ac10>, '__name__': '__main__'}, 'wf': <function verbose.<locals>.wrap.<locals>.wf at 0x109767ef0>}
wf annotations: {}
xYx annotations: {}
locals in xXy: {'y': 3, 'x': 10}
after f(*args)
30 
```

那组行告诉我的是，我看不到如何在装饰器中访问 xXy 中的 x 和 y 的值或 xXy 的函数属性。

我*想做*的是1）有一个带有PEP 3107中指定的注释的函数，2）能够有一个装饰器，可以访问函数注释和调用函数的值，而不仅仅是xXy的克隆函数签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T02:59:43.360

我相信您正在寻找[`functools.wraps()`](http://docs.python.org/3/library/functools.html#functools.wraps)：

```
def verbose(lcls):
    def wrap(f):
        print('inside wrap')
        @functools.wraps(f)
        def wf(*args):
            print('inside wf')
            print('lcls in wf:',lcls)
            print('locals in wf:',locals())
            print('wf annotations:',wf.__annotations__)
            print('xYx annotations:',xXy.__annotations__)
            r=f(*args)
            print('after f(*args)')
            return r
        return wf
    return wrap 
```

这是一个简单的装饰器，可确保包装函数携带它包装的函数的属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T04:46:39.110

3.3 版中的新功能，[`inspect.signature()`](http://docs.python.org/3/library/inspect.html#inspect.signature)将允许您在函数装饰器中获得所需的信息。这是一个使用它来打印在每次调用装饰函数时传递的参数名称和值以及访问相关注释的示例：

```
import functools
import inspect

def verbose(wrapped):
    @functools.wraps(wrapped)  # optional - make wrapper look like wrapped
    def wrapper(*args):
        print('inside wrapper:')
        fsig = inspect.signature(wrapped)
        parameters = ', '.join('{}={}'.format(*pair)
                               for pair in zip(fsig.parameters, args))
        print('  wrapped call to {}({})'.format(wrapped.__name__, parameters))
        for parameter in fsig.parameters.values():
            print("  {} param's annotation: {!r}".format(parameter.name,
                                                         parameter.annotation))
        result = wrapped(*args)
        print('  returning {!r} with annotation: {!r}'.format(result,
                                                         fsig.return_annotation))
        return result
    return wrapper

@verbose
def xXy(x: 'x in X\'s', y: 'y in Y\'s') -> ('x times y','in X and Y units'):
    return x*y

xy = xXy(10, 3)
print('xXy(10, 3) -> {!r}'.format(xy)) 
```

输出：

```
inside wrapper:
  wrapped call to xXy(x=10, y=3)
  x param's annotation: "x in X's"
  y param's annotation: "y in Y's"
  returning 30 with annotation: ('x times y', 'in X and Y units')
xXy(10, 3) -> 30 
```

# java - 如何确保/强制在 HashMap 中平均分配？

> ID：15059398
> 
> 赞同：2
> 
> 时间：2013-02-25T02:57:21.197
> 
> 标签：java, data-structures, hash, hashmap

HashMap 数据结构根据 Key 的哈希码在其存储桶之间分配密钥。大多数情况下，如果散列算法非常好，所有密钥都将分布在不同的桶中。但是，如果所有键都返回相同的哈希码怎么办？插入/检索操作的顺序为 O(n)。

如果我正在实现自己的 HashMap，我将如何（或者我应该怎么做）确保桶之间的平等分配？有没有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:59:47.603

> 但是，如果所有键都返回相同的哈希码怎么办？

那么你就输掉了比赛，对此你无能为力。

不过不用担心，因为您的数据结构实际上并不关心——您的数据结构的*用户*`hashCode`可能会关心，但在第一种情况下，他们是负责病态实现的人。

[从理论上讲，即使是恶意选择的输入值也可以通过通用散列](http://en.wikipedia.org/wiki/Universal_hashing)合理均匀地分布，但在 Java 中，这确实不是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:01:21.810

在密钥上运行类似 DES 的东西来生成哈希。一个体面的加密算法可以保证结果看起来是随机的。

# objective-c - NSURLConnection 异步请求返回 null

> ID：15059405
> 
> 赞同：0
> 
> 时间：2013-02-25T02:58:15.257
> 
> 标签：objective-c, asynchronous, nsurlrequest

按照最近制作的 YouTube 教程尝试异步连接到网址。为响应重新调整 null，但数据长度大于 0。我见过其他同时进行 null 和长度检查的代码，我没有抛出，只是 NSLog'd 他们。

```
@implementation ViewController

-(void)fetchAddress:(NSString *)address  {

NSLog(@"Loading Address: %@", address);
[iOSRequest requestToPath:address onCompletion:^(NSString *result, NSError *error)  {
    dispatch_async(dispatch_get_main_queue(), ^{
        if (error)  {
            [self stopFetching:@"Failed to Fetch"];
            NSLog(@"%@", error);
        } else  {
            [self stopFetching:result];
            NSLog(@"Good fetch:  %@", result);
        }
        });
    }];

}

- (IBAction)fetch:(id)sender {

    [self startFetching];
    [self fetchAddress:self.addressField.text];
    NSLog(@"Address: %@", self.addressField.text);

}

-(void)startFetching  {

    NSLog(@"Fetching...");
    [self.addressField resignFirstResponder];
    [self.loading startAnimating];
    self.fetchButton.enabled = NO;

}

-(void)stopFetching:(NSString *)result  {

    NSLog(@"Done Fetching  %@", result);
    self.outputLabel.text = result;
    [self.loading stopAnimating];
    self.fetchButton.enabled = YES;

}

@implementation iOSRequest

    +(void)requestToPath:(NSString *)
        path onCompletion:(RequestCompletionHandler)complete  {

    NSOperationQueue *backgroundQueue = [[NSOperationQueue alloc] init];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:path]
        cachePolicy:NSURLCacheStorageAllowedInMemoryOnly
        timeoutInterval:10];

    NSLog(@"path:  %@  %@", path, request);

    [NSURLConnection sendAsynchronousRequest:request
        queue:backgroundQueue
        completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)  {
        NSString *result = [[NSString alloc] initWithData:
            data encoding:NSUTF8StringEncoding];
        if (complete)  {
           complete(result, error);
           NSLog(@"result:  %@ %lu %@", result, (unsigned long)[data length], error);
        }
    }];
} 
```

请求为 http://www.google.com> 响应为空 数据长度为 13644

不知道出了什么问题...有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:31:12.937

感谢 Josh Caswell 指出了正确的方向，但让我自己弄清楚。

将 initWithData 编码从 NSUTF8StringEncoding 更改为 NSASCIIStringEncoding。

```
[NSURLConnection sendAsynchronousRequest:request
    queue:backgroundQueue
    completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)  {
    NSString *result = [[NSString alloc] initWithData:
        data encoding:NSASCIIStringEncoding];
    if (complete)  {
       complete(result, error);
       NSLog(@"result:  %@ %lu %@", result, (unsigned long)[data length], error);
    }
}]; 
```

# php - 无法使用 PHP 上传大文件（尝试了所有其他答案）

> ID：15059406
> 
> 赞同：0
> 
> 时间：2013-02-25T02:58:31.010
> 
> 标签：php, javascript, jquery, ajax, xmlhttprequest

我已经更改了 php.ini 文件并在我的页面顶部添加了一个 set_time_limit(0)，但我仍然无法使用 php 上传大文件。我也在使用 ajax 和 javascript 来上传，我可以上传 400Mb 的文件。我试图在 WAMP 上上传一个 3.2GB 的文件。

我的代码：

```
<?php
set_time_limit(0);
session_start();
include('../Connect/Connect.php');

$User = $_SESSION['User'];
$Files = $_FILES['File'];
if(isset($User))
{
    if(!empty($Files))
    {
        for($X = 0; $X < count($Files['name']); $X++)
        {
            $Name = $Files['name'][$X];
            $TMP = $Files['tmp_name'][$X];

            move_uploaded_file($TMP, '../Users/' . $User . '/' . $Name);
        }
    }
}
else
{
    header("location:../"); 
}
header("location:index.php");
$Connect->close();
?> 
```

![内存限制](../Images/91b070a81a8cc1bc835d9ca19c18f5cf.png)

![上传限制](../Images/6fd3c059d923c4e3235ab56ea6871552.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:26:34.230

*   检查您的浏览器，它是否支持 >2 GB 的文件
*   将 POST_MAX_SIZE 设置为高于 UPLOAD_MAX_FILESIZE （当然在设置中设置正常值，不像 memory_limit 10 000GB ....
*   max_input_time 例如设置为 30000
*   检查 x64 或 x86 操作系统/浏览器
*   在 debian 上出现 php 5.3.21 错误，它不允许 >2GB 文件导致 PHP 中的错误 -> 它只是让您有机会获得带有错误 atoi() 和 atol() 转换的 php 版本。

# sql - SQL - 根据条件连接表

> ID：15059407
> 
> 赞同：0
> 
> 时间：2013-02-25T02:58:31.700
> 
> 标签：sql, sql-server, sql-server-2008, join

我需要在 DBName 列上加入以下 2 个表：

表 A

```
ProductName DbName ServerName
A           DB1    sername
B           DB2    sername
C           DB3    sername
D           DB3    sername 
```

表 B

```
ID DBName ObjectName
1  DB3    objC
2  DB2    objD
3  DB3    objD
4  DB1    objD 
```

这样我就可以获得具有以下列的最终表（即表 B + 产品名称的所有列）：

```
 ID DBName ObjectName ProductName 
```

正如您从表 AI 中看到的那样，DB3 与 2 个不同的 ProductName（C 和 D）相关，这导致了多对多关系（即，如果 col 在连接后有 DB3，则它变成 2 行，其中一行在 ProductName 中显示 C 和一个是D。）

我想做的是通过以下条件获得 1-1 关系：如果 ObjectName 是 ObjD，那么 ProductName 是 D，如果 ObjectName 是 ObjC，那么 ProductName 是 C。

如果有人能指出正确的方法来解决这个问题，我将不胜感激......

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:03:29.020

```
SELECT  a.*, b.ProductName
FROM    tableB a
        INNER JOIN tableA b
            ON  a.DBName = b.DbName  AND
                a.ObjectName LIKE '%' + b.ProductName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e6162/2)

上面的查询按预期工作，但性能肯定很慢。它将执行`FULL TABLE SCAN`，因为它不使用和索引。

请规范化您的表格，以便搜索将使用索引。

这是一个建议的架构：

表A

*   产品名称
*   数据库名称
*   服务器名称

表B

*   ID
*   数据库名称
*   对象名
*   产品名称

`ProductName, DbName`并在两个表上定义一个 coumpundcolumn 索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:03:53.970

太丑了 （并且可能会变慢）。您应该使用整数 id 进行连接。

对于您的表格，它将是：

```
SELECT b.ID, b.DBName, b.ObjectName, a.ProductName
FROM a
  JOIN b
    ON a.DBName = b.DBName
    AND CONCAT('%',a.ProductName) LIKE b.ObjectName 
```

我希望这行得通。

# java - IntelliJ IDEA 代码检查突出显示错误的可见性错误

> ID：15059408
> 
> 赞同：0
> 
> 时间：2013-02-25T02:58:41.643
> 
> 标签：java, intellij-idea, package, visibility, code-inspection

所以，我遇到了这个问题——一个奇怪的问题。我有一个库作为 IDEA 项目的一部分 - 其中所有代码在 'tk.*' 下都是公开可见的（即：所有类都存在于 tk 的子包中）。如果尝试导入驻留在该包中的类 IDEA 会突出显示导入语句（只有 'tk' 提醒你 - 这很奇怪），引用后面提到的原因。尽管存在明显的“错误”，但该项目（由大量文件组成）编译成功 - 事实上非常如此。

信息：

*   高亮原因（当您将鼠标悬停在上述高亮上时）：'tk' is not public in ''
    *   请注意：从所述包导入的文件不在默认包中。
*   似乎IDEA没有发现从驻留在其他库中的包导入的错误
*   上述文件导入的类不是包私有的，也不是受保护的，也不是私有的——它们是公共的
*   项目的路径设置应该是正确的，但是我愿意接受这些可能有问题的建议

笔记：

*   对不起，如果这个问题读起来很奇怪——我对我目前居住的环境相当分心。

# ruby-on-rails - Bundler 与 Rubygems 2.0 不兼容。请升级到 Bundler 1.3 或更高版本

> ID：15059409
> 
> 赞同：13
> 
> 时间：2013-02-25T02:58:44.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, bundler, gem-bundler

我正在部署一个 Ruby on Rails 应用程序，并且我在配置新盒子时拥有的部分启动脚本是`gem update --system`.

这恰好将 Rubygems 升级到 2.0 版。但是，它看起来`bundler`与这个较新版本的 Rubygems 不兼容。

```
Bundler is not compatible with Rubygems 2.0.
Please upgrade to Bundler 1.3 or higher. 
```

有没有人看到这个或找到解决方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T03:00:18.443

更新到 bundler 的预发布版本修复了它。

```
gem install bundler --pre 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T16:59:47.403

我遇到了同样的问题，因为我使用的是 RVM，所以我使用以下命令修复了它：

```
rvm rubygems 1.8.25 
```

如果您不使用 RVM，则可以尝试以下操作：

```
rubygems 1.8.25 
```

这应该会删除您的 Rubygems 2.0 并允许 Bundler 再次工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T21:00:21.743

正如[这里](http://weblog.rubyonrails.org/2013/2/25/Rails-4-0-beta1/)所写，为了使用 RubyGems 2.0 安装预发行版，您必须指定版本并禁用`ri`和`rdoc`：

```
gem install rails --version=4.0.0.beta1 --no-ri --no-rdoc 
```

这也适用于捆绑器 1.3.0。

# jquery - JQuery 拖动和滚动与缓动

> ID：15059413
> 
> 赞同：3
> 
> 时间：2013-02-25T02:59:02.447
> 
> 标签：jquery, animation, scroll, draggable, easing

有谁知道任何脚本 JQuery 或其他可以通过缓动进行拖动和滚动的脚本？

我发现各种脚本可以通过缓动平滑滚动，或者通过缓动平滑拖动。但是滚动和拖动的脚本似乎都不包括缓动。这里有些例子：

Utterscroll
[https://github.com/debiki/utterscroll](https://github.com/debiki/utterscroll)

DragOn
[http://dragon.deparadox.com/](http://dragon.deparadox.com/)

DragScrollable
[http://hitconsultants.com/dragscroll_scrollsync/scrollpane.html](http://hitconsultants.com/dragscroll_scrollsync/scrollpane.html) [http://hitconsultants.com/dragscroll_scrollsync/scrollsync.js](http://hitconsultants.com/dragscroll_scrollsync/scrollsync.js) [http://hitconsultants.com/dragscroll_scrollsync/dragscrollable.js](http://hitconsultants.com/dragscroll_scrollsync/dragscrollable.js)

如果有人知道带有缓动的拖动滚动脚本，请告诉我。或者，我们可能需要将缓动集成到上述脚本之一中，但这些脚本非常复杂，难以处理。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:24:41.807

你检查过这些吗？

[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

[http://the-taylors.org/jquery.kinetic/](http://the-taylors.org/jquery.kinetic/)

它们并不完全支持“缓动”，但它们模拟某种速度和阻力......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:07:23.700

我也建议iscroll4。Simurai [http://simurai.com/post/31460815120/flick-scroll](http://simurai.com/post/31460815120/flick-scroll)也有一个非常独特的触摸实现（它试图为长时间的移动滚动找到一个干燥的手势，更多的是你的问题的 UX 方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T15:35:08.097

查看 jQuery 自定义滚动条：http: [//manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

易于设置，具有大量可自定义的选项，以及用于回调的 API。

# php - PHP：从基于PNG大小的PNG源崩溃函数生成PNG缩略图图像

> ID：15059415
> 
> 赞同：0
> 
> 时间：2013-02-25T02:59:13.617
> 
> 标签：php, image, png, thumbnails

我编写了这个小函数来生成较大 jpg/jpeg/png 源的缩略图图像，它在 jpg/jpeg 图像上完美运行，但根据 png 图像的大小，该函数会在不确定的点崩溃。300x200 的小图像可以工作，但 2880x1800 之类的图像则不行。

这是我的（带注释的）函数：

```
function make_thumb($filename, $destination, $desired_width) {
    $extension = pathinfo($filename, PATHINFO_EXTENSION);

    // Read source image
    if ($extension == 'jpg' || $extension == 'jpeg') {
        $source_image = imagecreatefromjpeg($filename); 
    } else if ($extension == 'png') {
        $source_image = imagecreatefrompng($filename); // I think the crash occurs here. 
    } else {
        return 'error';
    }

    $width = imagesx($source_image);
    $height = imagesy($source_image);

    $img_ratio = floor($height / $width);

    // Find the "desired height" of this thumbnail, relative to the desired width
    $desired_height = floor($height * ($desired_width / $width));

    // Create a new "virtual" image
    $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

    // Copy source image at a resized size
    imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

    // Create the physical thumbnail image to its destination 
    if ($extension == 'jpg' || $extension == 'jpeg') {
        $source_image = imagejpeg($virtual_image, $destination); 
    } else if ($extension == 'png') {
        $source_image = imagepng($virtual_image, $destination, 1);
    } else {
        return 'another error';
    }
} 
```

我发现的唯一与我提到类似问题的文档是[this](http://www.php.net/manual/en/function.imagecreatefrompng.php#67854)。这是我的问题吗？有什么解决办法吗？为什么这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:07:42.767

您很可能内存不足。2880 x 1800 的真彩色大约需要 20 兆字节。

检查你的 php.ini 文件`memory_limit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:10:08.730

我是个白痴。那或 PHP 在处理大型 PNG 图像方面确实很糟糕。[此处](http://www.php.net/manual/en/function.imagepng.php#104913)PHP 文档中的此评论说`imagepng()`：

> 我的脚本无法完成：致命错误：XX 字节的允许内存大小已用尽（试图分配 XX+n 字节）。
> 
> 我发现 PHP 处理未压缩格式的图像：我的输入图像是 8768x4282@32 位 => 每个内存中的副本约 150 MB。
> 
> 作为一种解决方案，您可以检查尺寸并拒绝任何太大的东西，或者像我一样使用 ini_set('memory_limit','1024M'); 在页面开始（如果您的服务器有足够的板载内存）。

`ini_set('memory_limit','1024M');`因此，请记住使用!!!来增加可用内存限制

# linux - 在另一个文件中查找一个文件的内容

> ID：15059422
> 
> 赞同：10
> 
> 时间：2013-02-25T02:59:53.307
> 
> 标签：linux, shell, unix, awk, grep

我正在使用以下 shell 脚本将一个文件的内容查找到另一个文件中：

```
#!/bin/ksh
file="/home/nimish/contents.txt"

while read -r line; do
    grep $line /home/nimish/another_file.csv
done < "$file" 
```

我正在执行脚本，但它没有显示 CSV 文件中的内容。我的 contents.txt 文件也包含CSV 文件中存在的数字，例如`"08915673"`或。`"123223"`我的所作所为有什么问题吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-25T03:02:27.480

`grep`本身是能够做到的。只需使用标志`-f`：

```
grep -f <patterns> <file> 
```

`<patterns>`是每行包含一个模式的文件；并且`<file>`是您要在其中搜索内容的文件。

请注意，要强制`grep`将每一行视为一个模式，即使每一行的内容看起来像一个正则表达式，您也应该使用 flag `-F, --fixed-strings`。

```
grep -F -f <patterns> <file> 
```

如果您的文件是 CSV，如您所说，您可以这样做：

```
grep -f <(tr ',' '\n' < data.csv) <file> 
```

* * *

例如，考虑文件“a.txt”，其中包含以下几行：

```
alpha
0891234
beta 
```

现在，文件“b.txt”，包含以下行：

```
Alpha
0808080
0891234
bEtA 
```

以下命令的输出是：

```
grep -f "a.txt" "b.txt"
0891234 
```

你根本不需要在`for`这里循环；`grep`本身就提供了这个功能。

* * *

现在使用您的文件名：

```
#!/bin/bash
patterns="/home/nimish/contents.txt"
search="/home/nimish/another_file.csv"
grep -f <(tr ',' '\n' < "${patterns}") "${search}" 
```

您可以更改`','`为文件中的分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:07:51.280

另一种解决方案：

*   使用`awk`和创建您自己的`hash`（例如 ahash），全部由您自己控制。
*   替换`$0 to $i`，您可以匹配您想要的任何字段。

* * *

```
awk -F"," '
{  
   if (nowfile==""){ nowfile = FILENAME;  }

   if(FILENAME == nowfile)
   {
     hash[$0]=$0;
   }
   else
   {
       if($0 ~ hash[$0])
       {  
           print $0
       }
   }
} '  xx yy 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-08T18:09:31.987

我不认为你真的需要一个脚本来执行你正在尝试做的事情。

一个命令就够了。就我而言，我需要 CSV 文件的第 11 列中的标识号（使用“;”作为分隔符）：

```
grep -f <(awk -F";" '{print $11}' FILE_TO_EXTRACT_PATTERNS_FROM.csv) TARGET_FILE.csv
```

# matlab - 在 Matlab 中绘制 A^x * v 中向量的第一个元素（矩阵幂）

> ID：15059425
> 
> 赞同：2
> 
> 时间：2013-02-25T03:00:04.017
> 
> 标签：matlab, matrix, plot, adjacency-matrix

我想绘制`A^x * v`，其中`A`是表示图中的邻接矩阵的方阵，`x`是步数，`v`是初始向量。

我的目标是绘制每个结果向量的第一个元素；也就是说，我想要`A*v[1], A^2*v[1], A^2*v[1]`

我试过

```
x = 1:1:50 
y = A^x*v
plot(y(1),x) 
```

但是得到了

```
Error using  ^ 
Inputs must be a scalar and a square matrix.
To compute elementwise POWER, use POWER (.^) instead. 
```

我理解这个错误，但不明白如何解决这个问题，只是离开 Matlab 的情节示例。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:55:24.960

如果你想要一个几乎一个班轮：

```
x = 1:1:50;
f = @(z) z(1);
plot(x, arrayfun(@(n) f(A^n*v), x)) 
```

* * *

您尝试的错误来自`A^x`：`x`不能是向量，它必须是标量，因为`A`是方阵。有关更多信息，请参阅[帮助。`mpower`](http://www.mathworks.com/help/matlab/ref/mpower.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:48:38.830

节省一些计算怎么样？
要获得第一个元素，您不需要计算整个 product `A*v`。

```
x = 1:1:50;
f = (n) A(1,:) * ( A^(n-1) ) * v; % returns a scalar - no redundant computation
plot( x, arrayfun( f, x ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:06:14.143

使用而不是匿名函数对[@Simon 的](https://stackoverflow.com/a/15059830/1714410)答案进行了修改。[`subsref`](http://www.mathworks.com/help/matlab/ref/subsref.html)

```
x = 1:1:50;
s.type = '()';
s.subs = {1};
plot( x, arrayfun( @(n) subsref( (A^n)*v, s ), x ) ); 
```

另请[参阅](https://stackoverflow.com/questions/3627107/how-can-i-index-a-matlab-array-returned-by-a-function-without-first-assigning-it?lq=1)有关`subsref`.

# postgresql - 在 postgresql 午夜之后

> ID：15059426
> 
> 赞同：0
> 
> 时间：2013-02-25T03:00:09.563
> 
> 标签：postgresql

我有一个文本文件中的数据，我正在读入一个 postgres 9.1 表，数据如下所示：

```
451,22:30:00,22:30:00,San Jose,1
451,22:35:00,22:35:00,Santa Clara,2
451,22:40:00,22:40:00,Lawrence,3
451,22:44:00,22:44:00,Sunnyvale,4
451,22:49:00,22:49:00,Mountain View,5
451,22:53:00,22:53:00,San Antonio,6
451,22:57:00,22:57:00,California Ave,7
451,23:01:00,23:01:00,Palo Alto,8
451,23:04:00,23:04:00,Menlo Park,9
451,23:07:00,23:07:00,Atherton,10
451,23:11:00,23:11:00,Redwood City,11
451,23:15:00,23:15:00,San Carlos,12
451,23:18:00,23:18:00,Belmont,13
451,23:21:00,23:21:00,Hillsdale,14
451,23:24:00,23:24:00,Hayward Park,15
451,23:27:00,23:27:00,San Mateo,16
451,23:30:00,23:30:00,Burlingame,17
451,23:33:00,23:33:00,Broadway,18
451,23:38:00,23:38:00,Millbrae,19
451,23:42:00,23:42:00,San Bruno,20
451,23:47:00,23:47:00,So. San Francisco,21
451,23:53:00,23:53:00,Bayshore,22
451,23:58:00,23:58:00,22nd Street,23
451,24:06:00,24:06:00,San Francisco,24 
```

它来自通勤铁路线 Caltrain 的时间表。我正在尝试查询车站，以获取火车到达和出发时间。几个月前我在MySql中做了这个，我得到了

```
select * from trains as a, trains as b where a.trip_id=b.trip_id and a.st
op_id='San Antonio' and b.stop_id='San Carlos' and a.arrival_time < b.arrival_ti
me; 
```

到目前为止一切顺利，非常简单。但是，当我尝试将数据复制到 postgres 数据库中时，对于在午夜之后（24 点或 25:00:00 左右）有时间的各个列出现错误。但是，如果我将它们更改为 00:00:00 和 01:00:00 的东西，这不会与查询混淆吗？午夜之后的时间会出现在开始时间之前吗？MySql 显然在那个时候没有问题，我不知道该怎么办。我在想我应该使用最后一列，或者将时间转换为不考虑 PM/AM 的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:22:02.190

您应该尝试对时间列使用间隔类型。这些将跟踪小时数、分钟数和秒数，而不是尝试记录一天中的某个时间。

请参阅[有关日期和时间的 PostgreSQL 文档](http://www.postgresql.org/docs/current/static/datatype-datetime.html)。

与`interval`仅限`time`于`00:00 <= x <= 23:59`.

# sas - 禁止 proc 报告中的列标题

> ID：15059430
> 
> 赞同：0
> 
> 时间：2013-02-25T03:00:18.823
> 
> 标签：sas

我的老板希望我在 SAS 中创建一个图表和表格，类似于您可以在 excel 中生成的东西，其中数据表位于图表下方。这意味着使用 x 轴上的数据并在其下方放置更多数据。

期望的输出

> ```
>  (chart area) (Row 1) Building 1    Building 2   Building 3   Building 4 
>                  (Row 2)   333             267          234         235 
>                  (Row 3)   3232            213         3215         657 
> ```

我不确定如何在 proc 报告中执行此操作，其中数据运行时间很长，而不是很宽。此外，数据集很长：

```
Building ID    var1     var2
Building 1      333     3232
Building 2      267     213 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:36:22.057

IMO，CarolinaJay 建议使用 PROC GCHART 或 SGPLOT 或其他未遵循的其他 proc 是要走的路；虽然你可以同时做这两件事，但要做到这一点还有很多工作要做。

为了完成您的特定表格，我推荐 PROC TABULATE; 它并不关心您的数据走向何方。

```
data have;
informat buildingID $12.;
input BuildingID $    var1     var2;
datalines;
Building1      333     3232
Building2      267     213
;;;;
run;
proc tabulate data=have;
class buildingID;
var var1 var2;
tables (var1 var2)*sum=' ', buildingID=' ';
run; 
```

把它放在一个情节下，你就会有这样的东西（我不知道如何绘制这个，所以我只是完全随机选择了一些东西）：

```
ods _all_ close;
ods html;
data have;
informat buildingID $12.;
input BuildingID $    var1     var2;
datalines;
Building1      333     323
Building2      267     213
;;;;
run;
proc sgplot data=have;
vbar var1/response=var2 group=buildingID;
run;
title;
proc tabulate data=have;
class buildingID;
var var1 var2;
tables (var1 var2)*sum=' ', buildingID=' ';
run;
ods html close; 
```

# eclipse - 无法安装 Eclipse 插件

> ID：15059433
> 
> 赞同：3
> 
> 时间：2013-02-25T03:00:59.680
> 
> 标签：eclipse

我安装了 Eclipse IDE for Java Developers (Juno)，当我尝试安装插件时，Eclipse 吐了这个：

*!ENTRY org.eclipse.equinox.p2.ui.sdk 2 0 2013-02-24 20:54:28.703 !MESSAGE 找不到正在运行的配置文件实例。eclipse.p2.data.area 和 eclipse.p2.profile 属性可能未在此应用程序的 config.ini 文件中正确设置。*

我应该怎么做才能解决这个问题？

# c# - 从会话中读取整数

> ID：15059435
> 
> 赞同：-2
> 
> 时间：2013-02-25T03:01:14.840
> 
> 标签：c#, webforms

我正在尝试将全局变量 Label1.Text 保存到会话并在 page_load 上将其读回。我在这里传递了整数：

```
Session["points"] = TotalPoints.Label1; 
```

我试图在这里读回来。我究竟做错了什么？

```
Label1.Text = (int)Session["points"]; 
```

所有代码如下：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = (string)Session["points"];
    }

    public class TotalPoints
    {
        public static int Label1;
    }

    public void Validations()
    {
        if (TextBox1.Text == "20")
        {
            Image5.Visible = true;
            Image6.Visible = false;
            TotalPoints.Label1 += 1;
        }
        else
        {
            Image5.Visible = false;
            Image6.Visible = true;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Validations();
    }

    protected void newWindow(object sender, EventArgs e)
    {

        int next = new Random().Next( 3 ) + 1;
        Response.Redirect(string.Format( "Question{0}.aspx", next ));
        Session["points"] = TotalPoints.Label1;
    }

</script>

<html>
<form id="form1" runat="server">
        <asp:Image ID="Image1" runat="server" Height="60px" ImageUrl="http://www.ixl.com/qgen_res/sets_of_objects/popsicles_100.gif" Width="107px" />
        <asp:Image ID="Image2" runat="server" Height="60px" ImageUrl="http://www.ixl.com/qgen_res/sets_of_objects/popsicles_100.gif" Width="107px" />
        <asp:Image ID="Image3" runat="server" Height="60px" ImageUrl="http://www.ixl.com/qgen_res/sets_of_objects/popsicles_100.gif" Width="107px" />
        <asp:Image ID="Image4" runat="server" Height="60px" ImageUrl="http://www.ixl.com/qgen_res/sets_of_objects/popsicles_100.gif" Width="107px" />
        <br />
        How many popsicles are there?&nbsp; Count by fives. <br />
        <br />
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Button ID="Button1" runat="server" Text="Submit" OnClick="button1_Click"/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Image ID="Image5" runat="server" Height="30px" ImageUrl="http://www.lookseeedit.com/resources/tick.jpg" Width="30px" Visible="False" />
        <asp:Image ID="Image6" runat="server" Height="30px" ImageUrl="http://star-w.kir.jp/grp/9/red-cross-wrong-i19.svg" Width="30px" Visible="False" />
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="Label1" runat="server" /> </asp:Label>
        <asp:Label ID="Label2" runat="server" Text="/10"></asp:Label>
        <br />
        <br />
        <asp:Button ID="Button2" runat="server" Text="Next Question" OnClick="newWindow"/>
    </form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:09:05.327

No, you're not doing it right.

`Response.Redirect` occurs before `Session["points"]` is set inside of the `newWindow` function.

To start, you should rearrange those lines, but you should also call that function from somewhere too.

# java - 如何将一个大数组列表分解为哈希图中的几个数组列表？

> ID：15059436
> 
> 赞同：0
> 
> 时间：2013-02-25T03:01:16.857
> 
> 标签：java, hashmap

示例：一个查询引发下一个结果集：

姓名 | 年龄 | 累计

*   约翰·史密斯，45 岁，1000 岁
*   约翰·史密斯，56 岁，800 岁
*   约翰史密瑟斯，34 岁，500 岁
*   约翰史密斯, 56, 500
*   约翰史密斯, 56, 1100

我想将此数组列表分成三个，并将它们存储在一个哈希图中，其中键是客户端名称。

我在想类似的东西

```
Arraylist<Row> rows = dao.getClientActivity();
Map map = new HashMap<Clients Name, Clients Row>();
Arraylist<Row>  = null;

for (Row row : rows){

    if (map.get(row.clientName) == null) list = new ArrayList<Row>();

    list.add(row);

    if(map.get(row.clientName) == null) map.put(row.clientName, list);

} 
```

该列表将始终按名称排序。

把上面的代码片段当作伪代码，我家里没有编码程序，我刚想出来，我想我这个星期五测试了类似的东西，但它只打印在行上；

我不知道是否有更好的方法来做到这一点，但这是我想出的第一件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:12:01.213

您的地图声明应如下（假设`Row.clientName`为`String`）：

```
Map<String, List<Row>> map = new HashMap<String, List<Row>>(); 
```

for 循环应该如下所示：

```
for (Row row : rows){
    /*Get the list of rows for current client name.*/
    List<Row> currRows = map.get(row.clientName); 
    if (currRows == null) {/*If not list exists for*/
        currRows = new ArrayList<Row>(); /*create a new one*/
        map.put(row.clientName, currRows); /*and put it in the map*/
    }
    currRows.add(row);/*add the current row to the list*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:20:14.680

我假设您无法更改输入格式。

我建议您创建一个模型来代表客户：

```
public class Client {

    private final String name;
    private final byte age; //Nobody should be older than 256
    private final int total;

    /* Construct model */

    /* Getters/Functions */

} 
```

我还建议您在内部创建一个工厂方法，`Client`以从您的字符串输入创建类。

```
public static Client parseClient(String clientRep){

    String[] clientData = clientRep.split(',');

    Client newClient = new Client(); //TODO: Name conventionally. 

    newClient.name = clientData[0];
    newClient.age = Byte.valueOf(clientData[1]);
    newClient.total = Integer.valueOf(clientData[2]);

    return newClient;

} 
```

现在，您可以将这些添加到地图 ( `Map<String, Client>`)。

```
String clientFromWherever = getWhateverDataFromWherever();

Map<String, Client> clientel = new HashMap<>();

Client addingToMap = Client.parseClient(clientFromWherever);

clientel.put(addingToMap.getName() /* or however the name should be got */, addingToMap); 
```

那应该做得足够好。

=====

但是 - 如果您不想使用客户端对象，我建议您创建一个`Map<String, int[]>`并将该年龄和费用存储在数组中。如果您的费用不超过`Short.MAXVALUE`使用`short[]`. 存储大量数组列表（或任何复杂的集合）只是为了存储少量数据是不必要的。

```
ArrayList<Row> rows = dao.getClientActivity();
Map<String, int[]> clientelData = new HashMap<>();

for(Row clientRow : rows) {

    if (!map.containsKey(clientRow.clientName) {

        int[] clientNumericalData = new int[2];

        map.put(clientRow.clientName, clientNumericalData);

    }

} 
```

# .net - 移动图片框 vb.net mousekeydown 和 up

> ID：15059439
> 
> 赞同：0
> 
> 时间：2013-02-25T03:01:36.920
> 
> 标签：.net, vb.net, picturebox, keydown, keyup

我在visual basic dot net中我有一个图片框，我需要移动它，用户单击并移动鼠标，当用户释放鼠标时，图片框需要随之移动图片框有位置

```
Public Class Form1
Dim punto As New Point()

Private Sub PictureBox1_MouseDown1(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseDown
punto = Cursor.Position
PictureBox1.Location = punto
End Sub

Private Sub PictureBox1_MouseUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles PictureBox1.MouseUp
punto = Cursor.Position
PictureBox1.Location = punto

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:11:24.513

```
Dim Offset As Point
Private Sub PictureBox1_MouseDown(ByVal sender As Object, ByVal e As MouseEventArgs) Handles PictureBox1.MouseDown
     Offset = New Point(-e.X, -e.Y)
End Sub

Private Sub PictureBox1_MouseMove(ByVal sender As Object, ByVal e As MouseEventArgs) Handles PictureBox1.MouseMove
     If e.Button = Windows.Forms.MouseButtons.Left Then
         Dim Pos As Point = Me.PointToClient(MousePosition)
         Pos.Offset(Offset.X, Offset.Y)
         PictureBox1.Location = Pos
     End If
    End Sub 
```

# joomla - 如何在 Joomla 中设置选项的默认设置

> ID：15059441
> 
> 赞同：2
> 
> 时间：2013-02-25T03:02:09.517
> 
> 标签：joomla, joomla2.5

我到处搜索，在stackoverflow的任何地方都找不到这个问题。所以这是我的问题：

在菜单创建/编辑中 - 我们得到一大堆选项 - 类别/博客布局等选项。有选择“使用全局”的选项。

我很想知道在哪里更改此选项。因此，我发现很难让我的网站看起来统一。

请帮忙。

谢谢，马杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:27:25.543

Try this,

There are more things related to this.For global settings case in menu , article components are different options.

Such as for menu items use global option is set in menus->menu manager - >options(on the tool bar menu).

For articles use global section are you can find at contnet->article manager ->(options on the tool bar).

for other components layout like Virtuemart ,K2 etc they have their own option button in their layout.

Hope this may help you..

# javascript - 附加后输入相关功能未运行

> ID：15059446
> 
> 赞同：0
> 
> 时间：2013-02-25T03:02:30.700
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我有以下代码，它将文本输入附加到焦点上，如果输入为空，则将其隐藏。问题是它仅适用于原始输入字段，生成的第二个输入字段不会在焦点上激活此功能。任何想法为什么？

```
$('input:text')
.on('focus', function()
{
  var $this = $(this);
  if ($this.val() == "")
  {
    numItems++;
    $($this.parent().append($('<input type="text" value ="" id="item' + numItems + '"></input>')));
  }
})
.on('blur', function()
{
  var $this = $(this);
  if ($this.val() == "")
  {
    $this.hide();
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:04:41.233

尝试改变：

```
$('input:text')
.on('focus', function() 
```

到

```
$(document)
.on('focus','input:text', function() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:09:37.897

或者，您可以委托给要附加输入的直接父级。

```
$("#parentOfInput").on('focus','input:text', function(){
    //Handler
}); 
```

这比@sudhir 的回答更有效。

这将确保事件在它一直冒泡到文档根之前被拦截。

# android - 是否可以使线性布局可滚动？

> ID：15059455
> 
> 赞同：5
> 
> 时间：2013-02-25T03:03:59.037
> 
> 标签：android, android-layout

我创建了一个垂直线性布局，并在其中放置了许多项目，并且**只有部分**项目可以显示在屏幕上。我可以看到布局的前几项，但看不到布局的最后几项。如何使线性布局**可滚动**，以便用户可以滚动屏幕以查看线性布局的最后几个项目？以下是布局xml文件的内容：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView_gridw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Grid Width"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_gridw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView_gridh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Height"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_gridh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        <TextView
            android:id="@+id/textView_gridbt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Border thickness"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_gridborderthickness"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView_bgw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="BgImg Width"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_bgw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:focusable="false"
            android:inputType="number" />

        <TextView
            android:id="@+id/textView_bgh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Height"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_bgh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:focusable="false"
            android:inputType="number" />

        <TextView
            android:id="@+id/textView_mtgw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="MTG Width"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_mtgw"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        <TextView
            android:id="@+id/textView_mtgh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:text="Height"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_mtgh"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView_margin"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Margin(left, top, right, bottom):"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/editText_margin_l"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        <EditText
            android:id="@+id/editText_margin_t"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        <EditText
            android:id="@+id/editText_margin_r"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

        <EditText
            android:id="@+id/editText_margin_b"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />

    </LinearLayout>

    <TextView
        android:id="@+id/textView_pathname_bg"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Background image file path name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText_pathname_bg"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <TextView
        android:id="@+id/textView_pathname_thumbdir"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Thumbnail images directory path name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText_pathname_thumbdir"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <TextView
        android:id="@+id/textView_pathname_treasure"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Treasure image file path name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText_pathname_treasure"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <TextView
        android:id="@+id/textView_pathname_signature"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Signature image file path name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText_pathname_signature"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button_reset"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="reset"
            android:text="Reset" />
        <Button
            android:id="@+id/button_apply"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="apply"
            android:text="Apply" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T03:09:09.980

您应该将您的包装`LinearLayout`在[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)中：

> 用户可以滚动的视图层次结构的布局容器，允许它大于物理显示。ScrollView 是 FrameLayout，这意味着您应该在其中放置一个包含要滚动的全部内容的子视图；这个孩子本身可能是一个具有复杂对象层次结构的布局管理器。经常使用的子元素是垂直方向的 LinearLayout，它呈现用户可以滚动浏览的顶级项目的垂直数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T03:11:59.947

您可以使用`ScrollView`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView_gridw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="Grid Width"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_gridw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" >

                <requestFocus />
            </EditText>

            <TextView
                android:id="@+id/textView_gridh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="Height"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_gridh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />

            <TextView
                android:id="@+id/textView_gridbt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="Border thickness"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_gridborderthickness"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView_bgw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="BgImg Width"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_bgw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:focusable="false"
                android:inputType="number" />

            <TextView
                android:id="@+id/textView_bgh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="Height"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_bgh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:focusable="false"
                android:inputType="number" />

            <TextView
                android:id="@+id/textView_mtgw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="MTG Width"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_mtgw"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />

            <TextView
                android:id="@+id/textView_mtgh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:text="Height"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/editText_mtgh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView_margin"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Margin(left, top, right, bottom):"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText_margin_l"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText_margin_t"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText_margin_r"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />

            <EditText
                android:id="@+id/editText_margin_b"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10"
                android:inputType="number" />
        </LinearLayout>

        <TextView
            android:id="@+id/textView_pathname_bg"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Background image file path name:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_pathname_bg"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" />

        <TextView
            android:id="@+id/textView_pathname_thumbdir"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Thumbnail images directory path name:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_pathname_thumbdir"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" />

        <TextView
            android:id="@+id/textView_pathname_treasure"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Treasure image file path name:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_pathname_treasure"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" />

        <TextView
            android:id="@+id/textView_pathname_signature"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Signature image file path name:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText_pathname_signature"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button_reset"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="reset"
                android:text="Reset" />

            <Button
                android:id="@+id/button_apply"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="apply"
                android:text="Apply" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

# windows-phone-8 - MDIL 如何适用于企业电话应用程序？

> ID：15059462
> 
> 赞同：2
> 
> 时间：2013-02-25T03:04:57.317
> 
> 标签：windows-phone-8

我了解 MDIL 背后的概念以及 CIL -> MDIL .. 云编译的作用。

我的问题是，当我们删除“云编译”故事时会发生什么，企业部署的 Windows Phone 应用程序的 MDIL 编译步骤如何或如何？

在“发布”模式下 F5 时，它是作为 VS 的一部分运行的 CrossGen.exe 吗？在这种情况下，我们在“企业”商店中部署的 XAP 是 MDIL XAP 还是 CIL XAP？

抱歉，如果我的问题听起来令人困惑，因为我对 MDIL 在企业商店中的工作方式感到非常困惑 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:28:27.187

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681686.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681686.aspx)

Microsoft 推荐的方法是使用`BuildMDILXap.ps1`WP8 SDK 附带的 PowerShell 脚本。给定一个 XAP 文件和一个企业代码签名密钥（您从赛门铁克获得）——它解压缩内容、运行 MDIL 编译、对 DLL 进行代码签名、将它们压缩回 XAP 并对 XAP 文件进行签名。

该脚本使用两个工具 -`MDILXAPCompile.exe`并`XapSignTool.exe`完成工作。手机完全能够运行 IL (JIT)。以我的经验（一个简单的 LOB 应用程序，带有不太复杂的 UI 显示来自服务器的数据），无论有没有 MDIL 编译，都没有明显的性能差异。YMMV。

虽然 MDIL 编译使程序集变得更大，但复杂的应用程序可能会从中受益。我会观察启动性能以及任何繁重的计算（如果适用）。

# jquery - jQuery .fadeOut applied after page switch

> ID：15059463
> 
> 赞同：1
> 
> 时间：2013-02-25T03:05:00.823
> 
> 标签：jquery

I'm using the method of loading content as described here [http://css-tricks.com/rethinking-dynamic-page-replacing-content/](http://css-tricks.com/rethinking-dynamic-page-replacing-content/) however I'm running into the issue of the jQuery function .fadeOut occurring AFTER the content is changed. So when the user clicks the navigation link the content changes, then the new content fades out then fades back in. In the demo the content fades out, changes, then the new content fades in.

Here's the only part of the jQuery that I've changed to fit my site.

```
function loadContent(href){
    $mainContent
            .find("#guts")
            .fadeOut(750, function() {
                $("header nav ul li a").removeClass("current");
                console.log(href);
                $("header nav ul li a[href$='"+href+"']").addClass("current");
                $mainContent.hide().load(href + " #guts", function() {
                    $mainContent.fadeIn(750, function() {
                        $pageWrap.animate({
                            height: baseHeight + $mainContent.height() + "px"
                        });
                    });
                });
            });
} 
```

Edit: I forgot to add, this script appears to be working fine in Firefox, but not in Chrome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:17:05.370

我们解决这个问题的方法是使用 2 个“页面”，其中一个是不可见的。

```
<div id="page">The actual visible page</div>
<div id="holder">The 'hidden' page</div> 
```

然后我们将内容加载到 holder 中，然后淡出、淡入，然后切换。这是一个基本脚本，显示了我的意思

```
<script>

    // load the content into the hidden div
    function loadContent(URL) {

        // show a loading gif or something
        $('#loading').show();

        // grab new page content
        $('#holder').load('URL', function() {

            // remove loading gif
            $('#loading').hide();

            // fade divs
            replaceDivs();

        });
    }

    // fade out old div, fade in new div, replace content and switch
    function replaceDivs() {

        // fade out old div
        $('#page').fadeOut(750, function() {

            // fade in new div
            $('#holder').fadeIn(750, function() {

                // add content to old div
                $('#page').html($('#holder').html());

                // show old div
                $('#page').show();

                // hold new div until next click
                $('#holder').hide();

            });
        });
    }
</script> 
```

# vim - Vim：当采购 vimrc 时，最后一次搜索 hl 重新出现

> ID：15059464
> 
> 赞同：4
> 
> 时间：2013-02-25T03:05:04.373
> 
> 标签：vim

标题基本概括了所有内容。当 I`:source $MYVIMRC`或`:source ~/.vimrc`时，最后一次搜索重新出现。我可以很容易地再次关闭`:noh`它，但每次我都会重新出现`:source`。

这仍然存在

*   带着新鲜`.vimrc`
*   删除当前 MacVim 安装并下载新副本后
*   在 iTerm 中使用`vim`

我已经签入了 列出的每个文件`:version`，除了 my 之外`.vimrc`，列出的唯一不为空的其他文件是`$VIM/vimrc`- 它只有：

```
set nocompatible  
set backspace+=indent,eol,start  
set langmenu=none 
```

我还尝试了核方法：禁用所有插件并假装它是全新安装：

```
mv .vim .vim-old  
mv .vimrc .vimrc-old  
touch .vimrc  
echo "set hlsearch" > .vimrc 
```

问题仍然存在。

我很困惑，因为我不记得这是正常行为。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:29:15.053

感谢@AndyRay - 我误`noh`用了摆脱最后一次搜索的突出显示，而我应该用`:let @/ = ""`.

参见：[Vim clear last search highlighting](https://stackoverflow.com/questions/657447/vim-clear-last-search-highlighting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T05:40:13.067

摆脱乔希的意图。将以下内容添加到您的`~./vimrc`:

```
" higlight search but not when sourcing .vimrc
set hls
let @/ = "" 
```

# motorola - Windows Embedded Compact 7 - 不自动显示屏幕键盘

> ID：15059471
> 
> 赞同：6
> 
> 时间：2013-02-25T03:06:52.200
> 
> 标签：motorola, .net-cf-3.5, windows-embedded-compact

我一直在为 Windows CE 用 c# 构建一个 .net 应用程序。我最初是为运行 Windows CE 5 的摩托罗拉 WT4090 创建的。我现在有一个运行 Windows Embedded Compact 7 的摩托罗拉 WT41N0。当我使用 Windows Embedded Compact 7 在 WT41N0 上运行应用程序时，屏幕键盘会自动显示一个文本框被选中。这在 Windows CE 5 下的 WT4090 上没有发生。我不希望屏幕键盘自动显示，除非我专门对其进行了编码。

有谁知道如何在选择文本框时阻止屏幕键盘自动显示？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T20:14:59.140

当基于注册表设置 (dword) HKEY_CURRENT_USER\ControlPanel\SIP\TurnOffAutoDeploy 选择文本框时，屏幕键盘将自动显示。如果设置为 0，则屏幕键盘将自动显示。如果设置为 1，则不会。要解决此问题，您可以编辑注册表设置。如果您使用的是摩托罗拉设备，您可以在 \Application 目录中创建一个扩展名为 .reg 的文件，其中包含以下内容：

```
[HKEY_CURRENT_USER\ControlPanel\SIP]
"TurnOffAutoDeploy"=dword:1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T15:09:26.700

如果您根本不想看到屏幕键盘出现（就像您拥有普通键盘的情况一样），请从操作系统的“用户界面”设置中删除“软件输入面板”设置设计。

# plone - 如何自定义标题的显示方式？

> ID：15059472
> 
> 赞同：1
> 
> 时间：2013-02-25T03:07:12.100
> 
> 标签：plone, dexterity

我想自定义如何生成我的 Dexterity 内容类型标题的 HTML。

我为使用 metadata.IBasic 行为的类型编写了一个视图模板：

```
<html ...>
  <body>
    <metal:content-core fill-slot="content-core">
      <metal:content-core define-macro="content-core">
        <div id="conent-images">...</div>
        ...
        <div id="content-metadata">
          <h1 tal:content="context/title">Title</h1>
          ...
        </div>
        ...
        <div id="content-body">...</div>
      </metal:content-core>
    </metal:content-core>
  </body>
</html> 
```

但是 Plone 然后将标题呈现两次。如何删除标题的第一个幻影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:34:10.673

使用该代码，您将填充名为 content-core 的插槽。在作为模板基础的布局中定义了[几个插槽](http://plone.org/documentation/kb/how-to-write-templates-for-plone-4)`content-title`： 、`content-description`y `content-core`。

要删除第一个标题幻影，您可以用空填充该`content-title`插槽。

```
<html ...>
  <body>
    <metal:content-core fill-slot="content-title">
      <metal:content-core define-macro="content-title">
      </metal:conent-core>
    </metal:conent-core>
    <metal:content-core fill-slot="content-core">
      <metal:content-core define-macro="content-core">
        ...
        <h1 tal:content="context/title">Title</h1>
        ...
        <div id="content-body">...</div>
      </metal:content-core>
    </metal:content-core>
  </body>
</html> 
```

其他解决方案是编辑定义插槽的模板，但这个解决方案对我来说已经足够了。

# python - 检查一个字符是否等于python中的引号

> ID：15059478
> 
> 赞同：4
> 
> 时间：2013-02-25T03:08:39.260
> 
> 标签：python

我正在遍历 python 中的字符串，我想检查每个字符是否等于`"`. 我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T03:09:55.970

像这样：

```
for c in theString:
    if c == '"':
        print 'Aha!' 
```

您也可以像这样直接获取第一个引号的索引：

```
theString.index('"') 
```

# ios6 - iOS controls on iPad specific screen sizes

> ID：15059481
> 
> 赞同：0
> 
> 时间：2013-02-25T03:09:18.713
> 
> 标签：ios6, xcode4.6

I have a fundamental question that I would like to get addressed. I'm almost done with my universal app and I was told that I need to specifically customize the UI controls for iPad screens (e.g) labels, buttons. So, for example, I have the following code in viewDidLoad event in one of my xibs.

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    [_lblRandomDisplay setFont: [UIFont fontWithName: @"Helvetica Neue" size:100]];
}
else
{
    [_lblRandomDisplay setFont: [UIFont fontWithName: @"Helvetica Neue" size:250]];
} 
```

Here _lblRandomDisplay is UILabel IBOutlet property and I increase the font for iPad and reduce it for iPhone. Is this the way to approach the iPad screens or does iOS automatically scale the screen when viewed on iPad?. As a side note, I have named the xib filenames as filename~iphone.xib and filename~ipad.xib and it loads correctly based on the device selected in the simulator.

In those lines, I have a Settings screen (not using the Settings bundle) using UITableViews that I have designed for iPhone and programmatically load data from NSArray. When loaded on iPad using the settings~ipad.xib (copied the controls from settings~iphone.xib), I haven't adjusted the row height specifically for iPad to make it look bigger. The screen shows OK on the iPad but it looks smaller. Is this the right approach or what is the best way to approach this?

Please advise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:22:02.597

给你的建议，为屏幕尺寸定制 UIControls，似乎是错误的。UIControl 大小和一般的文本大小在所有设备上都应保持相同。这些项目的设计尺寸适合可读性和可触摸性，两者都与屏幕尺寸无关。

iOS 在设计时就考虑到了这一点。如果您使用 iPad 和 iPhone xib 或故事板制作通用项目，您会发现无论设备如何，用户界面小部件都是相同的像素/点大小（为了简单起见，我在这里忽略了视网膜/非视网膜的区别）。例如，标准按钮的默认大小为 73 x 43，两种情况下的字体大小均为 15pt。两个设备上的导航栏都是 44 像素/点高。这是应该的。如果我们假设 iPhone、iPad mini 或 iPad 上的阅读距离大致相同，则没有理由调整文本大小。为 iPad 重新设计的想法实际上是您可以在一个屏幕上获得*更多*信息，而不是*相同*信息的更大版本。

iOS“缩放屏幕”有两种情况：

*   如果您创建一个仅限 iPhone 的应用程序并在 iPad 上运行它。然后有一个用户选项可以以双倍大小运行它。在这种情况下，包括字体大小在内的所有内容都按比例放大，但这是通过像素加倍完成的，因此效果非常模糊。看看它——你就会明白这正是你不应该以这种方式设计的*原因*。

*   如果您为 iPhone 和 iPad 使用单个 xib/storyboard，并依靠自动布局 (ios6+) 或自动调整掩码 (ios5-) 来自动调整不同屏幕尺寸的布局。此方法可以 - 根据您的设置 - 按比例调整视图的图像内容大小，但不会动态调整文本内容的大小，如果您想这样做，您必须在代码中进行调整。无论如何，这不是设计应用程序的好方法，最好像您所做的那样在单独的 xib/storyboards 中为 iPhone 和 iPad 进行专门的设计。

我希望当你说 iPad “看起来更小”时，你的意思是 UI 看起来更小，因为它在更大的屏幕上丢失了......但答案不仅仅是扩大数据的大小，而是重新考虑你的布局在每个屏幕上放置更多数据。这就是为什么苹果在 iPad 上提供了 SplitViewController 并引入了 Container ViewController 的模式。

我想知道您是否还提出了一个相关但单独的问题，即出于图形设计目的的视图比例大小问题（您提到字体大小为 100 和 250pt，而不是 UI 控件标签的常用大小）。您可能希望应用程序的*外观*随屏幕缩放，有点像所谓的可变窗口大小的流体网页设计方法。因此，例如，您可能有一个基于巨大字母“A”的图形设备，它会填满您的 iphone 屏幕，并希望该字母同样填满您的 ipad 屏幕。在这种情况下，您可能需要在代码示例中设置字体大小。

*通过不*为不同设备更改表格单元格的行高，您当然是在做正确的事情，但是对于更大的屏幕，您当然可以使表格高度更大，并在视图中容纳更多表格单元格。

所有这些评论都有些笼统，因为您没有发布足够详细的问题。发布一两张图片通常会有所帮助...

# java - What design pattern does these code follow?

> ID：15059482
> 
> 赞同：0
> 
> 时间：2013-02-25T03:09:35.213
> 
> 标签：java, jquery

in jQuery we often do this:

```
$('#el1').css('margin-left','5px').attr('title','test title').removeClass('class1'); 
```

in Java StringBuilder, same as above：</p>

```
StringBuilder builder  = new StringBuilder();  
builder.append("str1").insert(0, 'A').deleteCharAt(2); 
```

So, what design pattern does this code follow?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:11:01.413

It's an application of [the fluent interface](http://en.wikipedia.org/wiki/Fluent_interface) pattern.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:14:44.447

它在 OOP 语言中称为方法链接/命名参数习语。参考[http://en.wikipedia.org/wiki/Method_chaining](http://en.wikipedia.org/wiki/Method_chaining)

# database - Different results with and without a dummy WITH clause

> ID：15059483
> 
> 赞同：0
> 
> 时间：2013-02-25T03:09:35.110
> 
> 标签：database, select, mdx, olap

I'm trying to diagnose a bug in a calculated measure in a SSAS cube, and while debugging I get this weird behaviour ...

```
select
    [Measures].[Net Lost Commitments] on columns 
  , {[Date Dimension].[Fiscal Year Hierarchy].[Fiscal Year].[2009\10],[Date Dimension].[Fiscal Year Hierarchy].[Fiscal Year].[2010\11]} on rows
from Compass3 
```

...returns the following:

```
 Net Lost Commitments
2009\10  (null)
2010\11  9,937 
```

I'm trying to figure out why the value for 2009\10 is null and so I've been adding various other calculations via a WITH clause to help track back the problem. But any WITH clause I add changes the results, even if the calculation in the WITH clause is not used. For instance ...

```
with
    member [Measures].[test] as null
select
    [Measures].[Net Lost Commitments] on columns 
  , {[Date Dimension].[Fiscal Year Hierarchy].[Fiscal Year].[2009\10],[Date Dimension].[Fiscal Year Hierarchy].[Fiscal Year].[2010\11]} on rows
from Compass3 
```

...returns the following:

```
 Net Lost Commitments
2009\10  8,783
2010\11  9,937 
```

Have you ever seen that before? What could possibly be the cause?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:48:00.650

我已经将度量定义重新设计成更简单的形式，这个问题似乎已经消失了。我仍然不知道这种看似随机的行为是如何发生的，但它不再是一个问题。

——马特。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:32:39.483

也许计算成员的存在会影响 [Date Dimension] 聚合的求解顺序？[Net Lost Commitments] 是经过计算的衡量标准吗？如果是这样，您可以将其求解顺序更改为稍后在查询处理中吗？

# content-management-system - SilverStripe CMS times-out when changing pages in the CMS

> ID：15059485
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:09:40.477
> 
> 标签：content-management-system, silverstripe

I have installed SilverStripe on several servers successfully in the past (but I'm not a SilverStripe expert). This time my SS install fails to work and I'm at a loss how to fix it.

**The Problem**

*   SilverStripe 2.4.6 installed correctly on the server (AFAIK).
*   The front-end works as expected. (Show default theme. Pages all load correctly.)
*   I am able to log into the CMS admin section succesfully. The CMS loads but when changing site pages in the CMS using the browser pane on the left, the CMS shows the circular loading symbol. The new page load never completes.
*   Using the console of Firebug in Firefox - When attempting to change pages in the CMS (by clicking on the page browser pane) the CMS tries to load two pages. The second page request 404s. ![SilverStripe CMS with error.](../Images/5e605230e27a4d9ef826d9653b6a1bed.png) The first GET request is from the initial page loads. The following POST+GET requests fire when clicking on the page tree to change pages.

**Attempting to Find the Solution**

I've tried deleting and re-installing silverstripe twice. (2.4.7 and 2.4.6) Both times the problem recurs.

A strange thing is that this server is already running two other silverstripe sites (both of which I installed without a hitch). All three websites are accessed via different domains. I tried accessing this install via another domain thinking there might be something wrong with how this third domain is configured but that didn't help either.

What should I try now? I'm stumped.

Thanks in advance.

**Responses to Comments**

> Check your root .htaccess file. Make sure RewriteBase is set to /

Checked. [Full .htaccess on PasteBin](http://pastebin.com/p8NVrVE2 "Full .htaccess at PasteBin")

> Indeed the javascrip URL is strange. Check if there is anything unusual about what's being returned from the previous POST request. Is the site running in dev, test or live mode?

I can't see anything unusual in the POST request.

*Clue Found:* The site is running in DEV mode. Switching to LIVE mode and the problem disappears. Also the second GET request only shows up in DEV mode.

[Example Post request with response](http://pastebin.com/2WqVbFLN).
[Example Get request with respones](http://pastebin.com/R5nm6rj3).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:17:39.333

这不仅仅是一个修复，但如果你宁愿编码而不是寻找错误，它可能值得一试！（请记住在进行此修复之前退出 SS）

在您的 mysite/_config.php 文件更改

```
Director::set_environment_type("dev"); 
```

至

```
if(!isset($_GET['isDev']))
   Director::set_environment_type("dev");
else
   Director::set_environment_type("live"); 
```

然后你就可以在dev模式下正常开发网站，在live模式下使用admin，避免你刚才去的bug：**http://{your_domain}/admin?isDev=0**

当 pastebin.com 没有超载时，NB 可能会找到正确的答案，我可以看到您的回复！

# visual-studio - C++ Win32 Project in Visual Studio 2008

> ID：15059492
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:10:41.067
> 
> 标签：visual-studio, visual-studio-2008

I want to create a C++ Win32 Application project in Visual Studio 2008, but I don't have that option (as in comparison to Visual Studio 6.0). How can I get that option back or create an equivalent project?

The Option in VS 6.0 looks like this: ![enter image description here](../Images/e9f01add15d703a8d1acd8583fbded60.png)

Whereas it's missing in VS 2008:

![enter image description here](../Images/fb356c73a030f26790480100f5e6ff4f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:26:23.640

在 VS 2008 中，选择“Win32 项目”向导生成相当于 VS 6 的“Win32 应用程序”。

# php - Split Letters Into Combination Chunks w/ Simplified Query

> ID：15059493
> 
> 赞同：0
> 
> 时间：2013-02-25T03:10:50.967
> 
> 标签：php, mysql, string, math

It's a confusion problem - so the wording may seem hard to follow. I'm likely over complicating a simple problem. Added an example question to help figure this out.

## Example Question

Finding a 5 letter word from a database with the characters hxinenvarbav. I've organized the words in the DB to also contain a column of the word in alphabetical format. This means, the word "happy" has a column with the value "ahppy", so from the letters hxinenvarbav I can alphabetically organize them using the following code.

```
<?
    $letters = str_split('hxinenvarbav'); asort($letters);
    $letters = implode('',$letters); // returns 'aabehinnrvvx'
?> 
```

## The Issue

However, I can't simply search with mysql "LIKE '%aabehinnrvvx%' " and find 5 letter words with those characters, as obviously that will not pull any results. Unless maybe there is a MySQL query I could do? Maybe organize the column differently. I can however, use str_split($letters,5) to take 5 letters chunks of the 12 letter combination.

How would I go about, splitting in chunks each possible 5 letter combination from these 12 letters while keeping in mind, I need to query the table.

Does this make sense? Do I need to elaborate any further? Likely, I'm just over thinking and can't seem to simplify what it is I'm trying to accomplish. I have some complex mathematics that can find all possible combinations. But since I have placed in alphabetical order, I'm only searching combinations - not permutations. And on top of that, I don't *need* to as far as I logically believe, query 'each' combination. As there are 792 possible 5 letter combinations from only 12 letters (without calculating repeating characters). So 792 query calls is not nice - and 792 OR statements in my query, is clearly not an option. LOL!.

Any suggestions?

I did just think about searching via available characters left from alphabet - but, some words have repeating letters so that's not an option either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:31:45.187

如果您有一个名为“dict”的表，其中包含字段“word”和“combo”，其中“combo”包含每个“word”的字母字符，那么您可以索引“combo”。

您以编程方式在内存中构建您的组合集，并使用它基于使用 IN 子句的每个组合构建 SELECT 语句，例如“SELECT * FROM dict WHERE combo IN ('combo1', 'combo2', ..., 'comboN ');"。

应该非常快速且易于实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:33:14.347

出于性能原因，您可能不会仅使用一条 SQL 语句来完成此操作，而是结合使用 SQL 和查询后过滤。

```
select * from A where word_len = 5 and (
 substring( word_in_db, 1, 1) IN ('h', 'x', 'i', 'n', 'e', 'n', 'v', 'a', 'r', 'b', 'a', 'v')
 and 
 substring( word_in_db, 2, 1) IN ('h', 'x', 'i', 'n', 'e', 'n', 'v', 'a', 'r', 'b', 'a', 
-- etc...
) 
```

这会将条款的数量限制为目标单词中的字母数量。

这不会像具有 2 个 E 但输入的字母只有 1 个 E 的单词那样找到重复项。您可能希望计算单词长度并将其保存为速度的派生值（当然，还要索引列）。

# java - 检查php后如何在android上显示通知

> ID：15059495
> 
> 赞同：0
> 
> 时间：2013-02-25T03:11:01.907
> 
> 标签：java, php, android, eclipse, notifications

我有一个*php* .. 有人将通过**webview登录****我的应用程序**。android 应用程序必须每 5 秒检查一次**www.website.com/notification.php 。**

 ****```
 if notification php ==> echo 1 ; .. show notification.
 if notification php ==> echo 0 ; .. dont do anything.. 
```

我想通过 android 检查 0 或 1 值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:29:41.000

您需要在`AsynchTask`、专用`thread`或中执行您的网络代码`IntentService`，这是一个示例代码：

```
Thread networkThread = new Thread() {
   public void run() {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://www.website.com/notification.php");
        HttpResponse response = httpclient.execute(httppost);
        String result = EntityUtils.toString(httpresponse.getEntity());

        if("1".equals(result.trim()){
            showNotification(); // You have to implement this
        }
    }
}
networkThread.start(); 
```

请注意，每 5 秒发出一次网络请求会很快耗尽电池电量，因为它会一直保持 GSM/3G 处于活动*状态*。****

# python - 另一个列表中的列表中的最大值

> ID：15059498
> 
> 赞同：0
> 
> 时间：2013-02-25T03:11:34.283
> 
> 标签：python, arrays

这就是场景的样子：我试图从一个列表中获取最大元素，基于另一个元素，该元素基本上表示我需要搜索的元素中的索引。的长度`foo`可以改变。但测试的长度不会改变。

```
>>> test = [1,2,3,4,5,6,7,8]
>>> foo = [1,4]
>>> print max(test[foo[1]]) 
```

这有效..

但是，当我试图做

```
>>> print max(test[foo])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: list indices must be integers, not list 
```

有没有其他方法，或者我应该参考另一个模块？如果是的话，请你给我推荐一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:14:57.633

根据其他帖子，我不确定这是否是您所要求的，但假设您想要所有元素的最大值`test`（`foo`我所理解的），您可以这样做：

```
print max([test[i] for i in foo]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:16:27.977

如果`foo`是一个总是有两个元素的列表，表示您要搜索的索引，您可以这样做：

```
sl = slice(*foo)
print(max(test[sl])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:18:18.370

```
test = [1,2,3,4,5,6,7,8]
foo = [1,4]
print max(test[foo[0]:foo[1]]) 
```

# iphone - How do I stream audio from a URL for an iPhone app and change volume using AVPlayer?

> ID：15059507
> 
> 赞同：5
> 
> 时间：2013-02-25T03:12:54.040
> 
> 标签：iphone, ios, avaudioplayer, audio-streaming, avplayer

I am trying to stream audio for an iPhone app. With the AVPlayer, I can stream audio from a URL with a few lines of code. I cannot change the volume with the AVPlayer though. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:25:40.083

you can change volume by property volume, see below code

```
NSString* resourcePath = url; //your url
NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:resourcePath]];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
        audioPlayer.numberOfLoops = 0;
        audioPlayer.volume = 5.0f;  //set volume here
        [audioPlayer prepareToPlay]; 
```

# regex - Perl 正则表达式 - (x|y)* 是否等同于 [xy]*？

> ID：15059508
> 
> 赞同：22
> 
> 时间：2013-02-25T03:12:57.023
> 
> 标签：regex, perl

正如标题所说，正则表达式模式是否`(x|y)*`与相同的字符串匹配`[xy]*`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T03:15:35.037

是的，它们匹配完全相同的字符串集。

它们不是等价的。 `(x|y)*`设置[反向引用](http://www.regular-expressions.info/brackets.html)，`[xy]*`没有。

因此`(?:x|y)*`和`[xy]*`在行为上是等效的，因为两者都没有设置反向引用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-25T03:15:12.890

它接近等效，但第一种形式从由它分隔的*组中**捕获*，当匹配时可以使用（对于第一个）进行检索。*`( )``$1``regex`*

 *如果要避免捕获，请使用

```
(?:re) 
```

`re`正则表达式在哪里。

## 笔记

这仅在`x`并且`y`完全是`x`and时才有效`y`，如果它们是一般的正则表达式则无效

见[回溯](http://perldoc.perl.org/perlre.html#Backtracking)*

# java - Android ExpandableList：在 onChildClick 方法中获取组而不是子项

> ID：15059509
> 
> 赞同：1
> 
> 时间：2013-02-25T03:12:58.720
> 
> 标签：java, android, expandablelistview

我有一个问题：我实现了一种从数据库中调用组和子项的方法，在将所有内容放入可扩展列表之后，直到那时，一切都很好，所有数据都按预期出来了。

但是，当我将带有单击子项的 Toast 消息调用到 onChildClick 方法中时，Toast 会显示组而不是子项（组也是错误的）谁能帮我找到我出错的地方？

记住：可扩展列表的输出是正确的

这是我的活动与可扩展列表：

```
public class ShowDeckActivity extends ExpandableListActivity {

/** Called when the activity is first created. */
    @SuppressWarnings("unchecked")
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.carddeck);

    try{     

        SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),      
                R.layout.group_row,             
                new String[] { "Group Item" },  
                new int[] { R.id.row_name },                    
                createChildList(),          
                R.layout.child_row,             
                new String[] {"Sub Item"},      
                new int[] { R.id.grp_child}     
            );
        setListAdapter( expListAdapter ); 

}catch(Exception e){
    System.out.println("Errrr +++ " + e.getMessage());
}

    }

    @SuppressWarnings("rawtypes")
private List createGroupList(){
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());

    return db.getGroupList();
    }

    @SuppressWarnings("rawtypes")
private List createChildList(){

    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    return db.getChildList();
    }

    public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {

    String nameLable = parent.getItemAtPosition(childPosition).toString();

    // Debug
    // System.out.println("Inside onChildClick at groupPosition = " + (groupPosition + 1) +" Child clicked at position " + (childPosition + 1));

    Toast.makeText(getApplicationContext(), nameLable, Toast.LENGTH_SHORT).show();
    return true;
    } 
```

}

这是我的 DatabaseHandler 方法：

```
 public List getGroupList() { 
    String SQL = "SELECT * FROM assunto"; 

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(SQL, null);
    int numeroColunas = cursor.getCount();

    ArrayList result = new ArrayList();

    if(cursor.moveToFirst()){
         do{                            
             HashMap m = new HashMap();
             m.put( "Group Item", cursor.getString(2) ); 
             result.add( m );
         }while(cursor.moveToNext());
    }
      cursor.close();
      db.close();

      return (List)result;
}

//@SuppressWarnings({ "unchecked", "rawtypes" })
public List getChildList(){

    String sqlAssunto = "SELECT * FROM assunto";

    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursorAssunto = db.rawQuery(sqlAssunto, null);

    ArrayList result = new ArrayList();

    if(cursorAssunto.moveToFirst()){
        do {                                    // Loop begin 1
            String assuntoID = cursorAssunto.getString(0); 
            String sqlDeck = "SELECT * FROM deck WHERE table_assuntos_id=" + assuntoID;

            Cursor cursorDeck = db.rawQuery(sqlDeck, null);

            ArrayList secList = new ArrayList();
            if(cursorDeck.moveToFirst()){ // Move-se nos decks
                do {       
                                                            // Loop Begin 2
                    HashMap child = new HashMap();          
                    child.put( "Sub Item", cursorDeck.getString(2) );
                    secList.add( child );
                } while (cursorDeck.moveToNext());                  // Loop end 2
            }

            result.add( secList );

        } while (cursorAssunto.moveToNext());                  // Loop end 1

    }
    cursorAssunto.close();
    db.close();

    return result; 
} 
```

可扩展列表输出（如预期）：

```
GROUP1
 - SUB ITEM1_1
 - SUB ITEM1_2
 - SUB ITEM1_3
GROUP2
 - SUB ITEM2_1
 - SUB ITEM2_2
GROUP3
 - SUB ITEM3_1
GROUP4

[..] 
```

示例：当我点击时（GROUP3 x SUB ITEM3_1）

错误的 Toast 消息是：

```
{Group Item= GROUP1} 
```

...而不是预期的：

```
{Sub Item=SUB ITEM3_1} 
```

有人知道发生了什么吗？提前致谢！

==================[已编辑，我找到了解决方案]======================== =

要解决此问题，您必须实例化一个 ExpandableListAdapter，如下所示：

```
ExpandableListAdapter adap = parent.getExpandableListAdapter();

String adaptar = adap.getChild(groupPosition, childPosition).toString(); // This get the correct child name 
```

感谢帮助！

# soap - 使用 Apache CXF 或 JAX-WS 调用 OFBIZ Web 服务

> ID：15059511
> 
> 赞同：0
> 
> 时间：2013-02-25T03:13:28.227
> 
> 标签：soap, wsdl, cxf, mule, ofbiz

我有一个基于 OFBiz SOAP 的 Web 服务，它被公开（可以接受请求）并生成了一个 WSDL 代码和一个 WSDL URL。我的问题是，有没有办法使用 CXF Java 客户端或 JAX-WS 客户端来使用这个 Web 服务？

总的来说，我希望能够将客户端添加到 Mule esb consigeration 中，作为 Mule FLOW 的一部分。我可以使用 AXIS2 调用 OFBiz Web 服务，但 Mule ESB 似乎不支持 AXIS2，这给我带来了另一个问题 - 有没有办法可以在 Mule ESB 中配置 AXIS2 Web 服务客户端？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:53:42.293

遵循[Consuming Web Services](http://www.mulesoft.org/documentation/display/current/Consuming+Web+Services+with+CXF)用户指南中的 WSDL-first 方法。

这涉及：

*   使用来自 CXF 或 Maven 插件的 WSDL to Java 工具生成 CXF 客户端，
*   将客户端配置为出站端点。

并导致 Mule 配置如下所示：

```
<cxf:jaxws-client
     clientClass="org.apache.hello_world_soap_http.SOAPService"
     wsdlPort="SoapPort"
     wsdlLocation="classpath:/wsdl/hello_world.wsdl"
     operation="greetMe"/>
<outbound-endpoint address="http://localhost:63081/services/greeter"/> 
```

# php - $dispatcher->forward() 执行后处理 URI

> ID：15059512
> 
> 赞同：1
> 
> 时间：2013-02-25T03:13:31.293
> 
> 标签：php, dispatcher, phalcon

我已将表单提交 URI 设置为类似的东西，`'/register'`并且在控制器操作`$dispatcher->forward()`中设置为`'/profile'`. 提交表单时，它会转发到正确的页面，但浏览器中显示的 URI 是`'/register'`. 有没有办法将 URI 设置为在`$dispatcher->forward()`方法中定义的而不是在表单操作中定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:22:41.170

您可以使用该`redirect`方法。

因此，在您的控制器中，您可以执行以下操作：

```
public function registerAction()
{
    $this->view->disable();

    if ($this->request->isPost()) {

        // Here is where you process the POST and check the user

        if ($user) {

            // Valid user
            $this->flash->success('OK');
            return $this->response->redirect('profile');

        } else {

            $this->flash->error('Oops! Something went wrong.');

        }

    }
} 
```

# javascript - 根据当前 URL 创建超链接

> ID：15059513
> 
> 赞同：1
> 
> 时间：2013-02-25T03:13:32.260
> 
> 标签：javascript, jquery, url-rewriting

我使用两个数据库创建了一个双语网站：

www.martyregan.com/ www.martyregan.com/jp/

您可以使用“网站语言”标志选择网站的语言，但目前这些链接只会将您带到主页。两个站点上的路径/URL 完全相同，除了日本站点上的 /jp/ 目录。

我正在寻找一种方法来根据访问者当前所在页面的 URL 更改超链接以转到并行页面。我认为路径相同会很简单，但我不太确定从哪里开始，因为我对 jquery 的了解很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:42:21.673

这假设您的语言可以访问，如下所示。为方便起见，从 URL 中删除了“http://”。

```
$(function(){
    var lang = 'jp';

    $('a').attr('href', function(x, url){
        var split = url.replace(/(http:)?(\/\/)?/, '').split('/');
        return split.shift() + '/' + lang + '/' + split.join('/');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:18:29.677

[`<base>`](http://www.w3.org/community/webed/wiki/HTML/Elements/base)根据您需要支持的浏览器，您可能可以不使用标签。您可以通过从服务器获取它来将其设置为任何基础。

如果你想使用 jQuery 来做，如果你所有的`href`s 都是绝对的，那应该是相当简单的：

```
$("a").attr('href', function (_, href) {
    return $("base").attr('href') + href;
}); 
```

这假设您正在使用`<base>`. 如果不是，您可以从 获取路径`window.location.path`，甚至可以获取页面上的其他元素。

*`<base>`如果您感到困惑，仅当 JavaScript不足以独立工作时才需要*

# itext - 如何使用 iText 剪辑 PdfPTable 中的单元格？

> ID：15059514
> 
> 赞同：0
> 
> 时间：2013-02-25T03:13:44.090
> 
> 标签：itext, clipping, pdfptable

我正在给定一个矩形，在一个特定的绝对位置创建一列 PdfPTable。在此表中，我需要添加一个 PdfPCells 集合并尽可能多地显示单元格内容，并且必须在表格矩形边界处裁剪单元格。我通过以下方式处理宽度：

```
 PdfPTable cutTable = new PdfPTable(1);
    cutTable.setTotalWidth(200f);
    cutTable.setLockedWidth(true); 
```

我在每个单元格中都有一个短语对象，我在表格中添加了一组单元格。问题是单元格溢出了表格高度边界并且没有被剪裁。添加每个单元格后，我尝试跟踪总单元格的高度，但问题是，由于我向表格询问行高，因此必须先插入一个单元格，并且我的计算因最后一个单元格溢出而关闭。

如何让表格在其边界处剪切单元格内容？如果我不能这样做，在将其添加到表格之前，如何确定单元格的高度（该短语使用 Arial 8 字体）和默认文本换行？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:06:12.177

看看我的书“iText in Action”中的[CellHeights示例。](http://itextpdf.com/examples/iia.php?id=81)它使用不同的选项来设置单元格的高度。我想你需要这个`setFixedHeight()`方法。使用此方法时，所有添加到单元格中的不适合高度的内容都将被丢弃。

# android - 当触摸android上的返回按钮时如何通过cocos2d-x退出应用程序

> ID：15059515
> 
> 赞同：0
> 
> 时间：2013-02-25T03:13:44.247
> 
> 标签：android, cocos2d-x

cocos2dx 制作的一款游戏。在活动场景中，当我触摸 android 上的后退按钮时，我该如何退出它！可以举同样的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T11:06:07.927

版本 cocos2d-2.0-x-2.0.4 和 cocos2d-x-2.1.4

在我们的 Layer.h 中：

```
 ...
    void keyBackClicked();
    ... 
```

在我们的 Layer.ccp 中：

```
 Layer::init(){
    ...  
    this->setKeypadEnabled(true);  
    ...
    }

    void Layer::keyBackClicked() {
         CCDirector::sharedDirector()->end();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:18:04.377

现在您处于一个位置，如果您单击返回，那么您将导航到您开始游戏应用程序的上一个屏幕，对吗？那么解决方法是：在导航到 new 后`intent`，前一个屏幕在 android[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)中处于非活动状态，您会发现前一个屏幕进入不可见状态。现在我们可以使用`onPause()`方法来关闭隐藏的活动。在同一个类中添加此代码，当您按下 back 时，您的应用程序应该关闭`button`。

```
protected void onPause() {
    super.onPause();
    finish();
} 
```

当您单击任何按钮并转到新意图时，应用程序会进入不可见状态，并且 onPause() 方法会自动触发并在后台关闭相同的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:08:23.727

覆盖`backKeyClicked()`层中的方法。

不要忘记添加图层方法`this->isKeypadEnabled(true)`。`init`

在您`backKeyClicked`的方法中，您可以将其切换到上一个场景或您想做的任何事情。

# regex - 正则表达式搜索，排除一个词

> ID：15059516
> 
> 赞同：6
> 
> 时间：2013-02-25T03:13:44.543
> 
> 标签：regex, visual-studio-2010

`age`我喜欢在 Visual Studio Find 中搜索包含字符串的单词，我喜欢在任何其他字符串（如、、 ）`age`中或中查找，但不在.`CCAge``sage``mage``abcAGExyz``message`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:54:57.347

这个搜索正则表达式应该可以解决问题：`~(mess)age`

`~(X)`是 上的阻止[匹配](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.100%29.aspx)`X`。

也可以忽略`Tabpages`，您可以使用`~(mess|tabp)age`. 基本上`|`用作 OR，例如防止`mess`OR上的匹配`tabp`，您可以通过添加其他单词`|`。

# php - wordpress 插件的 jquery 脚本在通过 ajax 加载的内容中不起作用

> ID：15059517
> 
> 赞同：1
> 
> 时间：2013-02-25T03:13:50.280
> 
> 标签：php, jquery, wordpress

我正在使用 Jquery Hover Footnotes 插件，该插件允许添加脚注并在悬停时动态显示它们。

其用法示例如下：[http ://restoredisrael.org/blog/961/footnote-plugin-test-page/](http://restoredisrael.org/blog/961/footnote-plugin-test-page/)

此外，在我的 single.php 中，我使用选项卡式内容显示来自自定义字段的元数据。换句话说，当点击一个选项卡时，通过 ajax 在 div 上加载一个自定义字段，并且该内容包含脚注。

管理标签的jquery函数是：

```
function tab(var)
{
$(document).ready(function(){

    var Tabs = {
        '1' : 'page1.php?p='+var,
        '2' : 'page2.php?p='+var,
        '3' : 'page3.php?p='+var,
        '4' : 'page4.php?p='+var,
        '5' : 'page5.php?p='+var
    }

    $.each(Tabs,function(i,j){
        var tmp = $('<li><a href="" class="tab">'+i+'</a></li>');
        tmp.find('a').data('page',j);
        $('ul.tabContainer').append(tmp);
    })
    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

            var bg = element.attr('class').replace('tab','');

        if(!element.data('cache'))
        {   
            $.get(element.data('page'),function(msg){
            $('#contentHolder').html(msg);

            element.data('cache',msg);
            });
        }

        e.preventDefault();

    })

    the_tabs.eq(0).click();

});   
      return false; 
} 
```

其中 Ajax 正在调用 pagex.php，它使用以下方法返回自定义字段：

```
get_post_meta($post->ID, 'key', true); 
```

single.php 中的 html 代码是：

```
<ul class="tabContainer" style="display: none;">
</ul>

<div class="clear"></div>

<div id="tabContent" style="display:none;">

    <div id="contentHolder">

    </div>
</div> 
```

和：

```
<body onLoad="tab(<?php echo $thePostID?>);> 
```

问题是脚注正确显示，但悬停不起作用。悬停由插件文件夹内的 js 脚本管理，该脚本在最终源代码中正确加载，但悬停效果不适用于 ajax 加载的 div 中的脚注。

我希望我很清楚。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:05:11.153

所以正如你所说，问题与DOM更新后触发插件JS动作有关。我在插件的js源码上发现该动作是由：Footnotes.Setup()触发的，所以我在ajax加载函数中添加了它。

现在的代码是：

```
function tab(var)
{
$(document).ready(function(){

    var Tabs = {
        '1' : 'page1.php?p='+var,
        '2' : 'page2.php?p='+var,
        '3' : 'page3.php?p='+var,
        '4' : 'page4.php?p='+var,
        '5' : 'page5.php?p='+var
    }

    $.each(Tabs,function(i,j){
        var tmp = $('<li><a href="" class="tab">'+i+'</a></li>');
        tmp.find('a').data('page',j);
        $('ul.tabContainer').append(tmp);
    })
    var the_tabs = $('.tab');

    the_tabs.click(function(e){

        var element = $(this);

            var bg = element.attr('class').replace('tab','');

        if(!element.data('cache'))
        {   
            $.get(element.data('page'),function(msg){
            $('#contentHolder').html(msg);
            **Footnotes.setup();**
            element.data('cache',msg);
            });
        }

        e.preventDefault();

    })

    the_tabs.eq(0).click();

});   
      return false; 
} 
```

# javascript - SignalR：在具有完整属性的 Javascript 客户端上捕获服务器异常

> ID：15059518
> 
> 赞同：2
> 
> 时间：2013-02-25T03:13:52.230
> 
> 标签：javascript, exception, signalr, signalr-hub

我在服务器端集线器上获得了一个简单的示例：

```
 public int CanThrowException(int input)
    {
        if (0==input)
            throw new ArgumentOutOfRangeException("input", "was zero");
        return -input;
    } 
```

在客户端上：

```
$.connection.testHub.server.canThrowException(0).fail(function (x)
{
    console.log(x);
}); 
```

现在我检查时得到`x`的是一个包含参数名称和我的消息的字符串。

我正在寻找的是一种获取反映服务器端异常属性的实际 Javascript 对象的方法。因此，在给定的情况下，它应该具有属性`message`和。`actualValue``ParamName`

我为什么要这个？因为我想编写通常会返回对象的服务器端代码，但在某些情况下会抛出一个异常，该异常将包含有关错误的详细信息，这反过来在我的场景中向用户显示绝对有意义（实际上，它不是只是有道理，这是必要的）。

当然，现在我可以`client.caller.OnErrorThisAndThat()`在服务器端捕获异常时调用一些方法。但是，这会使我的 JavaScript 代码更加复杂，因为我必须保持状态，我最后调用了哪个服务器端方法，挂钩到该回调并在这两者之间建立连接。

那么有没有办法在 JavaScript 客户端上获取类型化的异常代理呢？如果没有，除了提到的事件排序混乱之外，任何想法如何在没有它们的情况下实现我想要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:52:33.480

在可能引发错误的集线器方法周围放置一个 try catch 语句。

服务器抛出时在客户端调用方法：

```
public int CanThrowException(int input)
{
    try
    {
        if (0==input) {
            throw new ArgumentOutOfRangeException("input", "was zero");
        }
        return -input;
    }
    catch(Exception e)
    {
        Clients.Caller.ErrorOnServer(e);
    }
} 
```

返回错误对象：

```
public object CanThrowException(int input)
{
    try
    {
        if (0==input) {
            throw new ArgumentOutOfRangeException("input", "was zero");
        }
        return -input;
    }
    catch(Exception e)
    {
        return e;
    }
} 
```

这两种方法都会在客户端上为您提供错误对象及其相应的属性。但是，如果这是面向客户的应用程序，我建议不要使用此方法。如果可以防止异常暴露给客户，那就不好了。

希望这可以帮助！

# django - django中基于类的视图中的“直接到模板”等价于什么

> ID：15059519
> 
> 赞同：2
> 
> 时间：2013-02-25T03:14:07.057
> 
> 标签：django

当存在基于函数的通用视图时，我曾经这样做过

```
 (r'^foo/$', direct_to_template, {'template': 'foo_index.html'}), 
```

在基于类的视图中这个等价物是什么，所以我不需要在我的`views.py`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:18:34.097

That would be the [`TemplateView`](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#django.views.generic.base.TemplateView), and you use it like:

```
from django.conf.urls import patterns, url
from django.views.generic.base import TemplateView

urlpatterns = patterns('',
    url(r'^foo/$', TemplateView.as_view(template_name='foo_index.html')),
) 
```

# wix - 32 位和 64 位的单个 msi 取决于目标机器

> ID：15059520
> 
> 赞同：2
> 
> 时间：2013-02-25T03:14:23.853
> 
> 标签：wix, 64-bit, 32-bit

使用 WIX，我需要创建一个可以在 32 位和 64 位机器上工作的 msi 或 exe，具体取决于系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:22:47.493

您不能，因为 MSI 格式要求您指定处理器架构。因此，您必须创建两个单独的 .msi 文件，但您至少可以从 Wix 中的同一个项目文件生成它们，这样可以避免一些重复的工作。

我用这个：

```
<?if $(var.Platform) = x64 ?>
<?define ProductName = "InsomniacGeek: Windows Setup Test (64 bit)" ?>
<?define Win64 = "yes" ?>
<?define PlatformProgramFilesFolder = "ProgramFiles64Folder" ?>
<?else ?>
<?define ProductName = "InsomniacGeek: Windows Setup Test" ?>
<?define Win64 = "no" ?>
<?define PlatformProgramFilesFolder = "ProgramFilesFolder" ?>
<?endif ?>

<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" Platform="$(var.Platform)"/> 
```

然后您必须构建项目并创建一个 32 位 Msi 和 64 位 Msi。

# php - 如何改进评论在聊天框中的显示方式 JavaScript/PHP

> ID：15059523
> 
> 赞同：0
> 
> 时间：2013-02-25T03:14:36.317
> 
> 标签：php, javascript, jquery

我创建了一个聊天框，但是当我删除不需要的评论时出现问题。对于插入的每个评论，我都有一个与 onclick 事件关联的删除函数这是我显示评论的方式：（评论存储在数据库中）

```
var refreshMsg = setInterval(function() {
    $.post("chatFunc.php", { action: "load", id_userMsg: '<?php echo $id_user; ?>' },
function(dVLoadUsers) {
$("#divMsg").append(dVLoadUsers);   // appending the new comments into a div        $("#divMsg").scrollTop($("#divMsg")[0].scrollHeight);   
        }); 
}, 399); // Loop time in milliseconds 
```

这是删除功能（jquery）：

```
function DeleteMsg(id_msg){
$.post("chatFunc.php", { action: "del", id_msgChat: id_msg, id_userMsg: '<?php echo $id_user; ?>' },
    function(dVLoad) {
        $("#divMsg").html(dVLoad);
        $("#inputMsg").val("").focus();
    }); 
} 
```

这是 php 中的操作：“del”：

```
if($action == "del"){
$msgDeleted = "Comment Deleted";
$qBorraMsj = mysqli_query($classDB->con,"UPDATE chat SET message = '$msgDeleted ' WHERE id LIKE '$id_msgChat'"); // Updating message content to "Comment Deleted"
$qChat = mysqli_query($classDB->con,"SELECT id, message, userNameFROM chat ORDER BY id ASC LIMIT 60"); // Getting the last 60 messages inserted
while($row = mysqli_fetch_array($qChat) ){
    if($row['message'] == $msgDeleted ) // Showing deleted messages
        echo '<span class="styleUsName">'.$row['userName'].'</span>:&nbsp;<span class="styleMsgDel">'.$row['message'].'</span></br>';
    else // Showing the rest of the messages
        echo '<span class="styleUsName">'.$row['userName'].'</span>:&nbsp;<span class="styleMsgDel">'.$row['message'].'</span>&nbsp;<span class="styleDelMsg" onClick="deleteMsg('.$row['id'].')">delete</span></br>';
 }
} 
```

所以，基本上当一条消息被删除时，div 会重新加载并插入最后 60 条消息。它适用于删除消息的人，但不适用于所有人，因为只有他在执行代码。

如何刷新面板并为每个人提供消息？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:26:57.177

Like [Jon](https://stackoverflow.com/users/1745573/jon) suggests, you could send the ID of the most recent message that has been displayed to the server and then only get messages that are newer than that. You would then `.append()` the new message/s rather than clearing out the whole div with `.load()`.

# c# - uint 中的按位移位

> ID：15059524
> 
> 赞同：2
> 
> 时间：2013-02-25T03:14:38.220
> 
> 标签：c#, c#-4.0, c#-3.0, bitwise-operators, bit-shift

```
uint number = 0x418  in bits : 0000010000011000
uint number1 = 0x8041 in bits: 1000000001000001
uint number2 = 0x1804 in bits: 0001100000000100 
```

我无法得到 0x8041

```
 number >> 4; 
```

或者

```
 (number >> 4) & 0xffff; 
```

如何通过移位从 0x418 获得 0x8041 和 0x1804？

**解决方案**

```
(number >> nbits) | (number << (16 - nbits)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:18:29.180

C# 没有按位*循环*运算符 -*移*过右端的位会脱落并消失。你可以做些什么来解决这个问题

`(number >> nbits) | (number << (32 - nbits))`

这将按位右移一个 32 位无符号整数`nbits`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:31:08.150

您所描述的通常称为旋转，而不是移位。在汇编 (x86) 中，这是通过 ROR 和 ROL 指令公开的。

我不知道 C# 中有可用的按位运算符来执行此操作，但算法很简单：

```
value = value & 0x1 ? (1 << Marshal.SizeOf(value) * 8 - 1) | (value >> 1) : ( value >> 1); 
```

# python - 这里舍入误差的性质是什么？

> ID：15059529
> 
> 赞同：12
> 
> 时间：2013-02-25T03:15:30.097
> 
> 标签：python, floating-point

有人可以帮我解开这里到底发生了什么吗？

```
>>> 1e16 + 1.
1e+16
>>> 1e16 + 1.1
1.0000000000000002e+16 
```

我在 64 位 Python 2.7 上。首先，我假设因为浮点数的精度只有 15，所以它只是舍入误差。真正的浮点答案可能类似于

```
10000000000000000.999999.... 
```

小数点就被删掉了。但第二个结果让我质疑这种理解，不能准确表示 1 吗？有什么想法吗？

[**编辑**：只是为了澄清。我绝不是在暗示答案是“错误的”。显然，他们是对的，因为他们是对的。我只是想了解原因。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T03:56:53.467

它只是尽可能地四舍五入。

浮动十六进制的 1e16 是`0x4341c37937e08000`.

1e16+2 是`0x4341c37937e08001`.

在这个数量级上，您可以表示的最小精度差异是 2。加上 1.0 会精确舍入（因为通常 IEEE 浮点数学会舍入为偶数）。添加大于 1.0 的值将向上舍入到下一个可表示的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T04:01:00.247

10^16 = 0x002386f26fc10000 完全可以表示为双精度浮点数。下一个可表示的数字是 1e16+2。1e16+1 正确舍入为 1e16，1e16+1.1 正确舍入为 1e16+2。检查此 C 程序的输出：

```
#include <stdio.h>
#include <math.h>
#include <stdint.h>

int main()
{
  uint64_t i = 10000000000000000ULL;
  double a = (double)i;
  double b = nextafter(a,1.0e20); // next representable number
  printf("I=0x%016llx\n",i); // 10^16 in hex
  printf("A=%a (%.4f)\n",a,a); // double representation
  printf("B=%a (%.4f)\n",b,b); // next double
} 
```

输出：

```
I=0x002386f26fc10000
A=0x1.1c37937e08p+53 (10000000000000000.0000)
B=0x1.1c37937e08001p+53 (10000000000000002.0000) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T04:13:38.580

让我们解码一些浮点数，看看实际发生了什么！我将使用 Common Lisp，它有一个方便的函数来获取浮点数的有效位（又名尾数）和指数，而无需旋转任何位。使用的所有浮点数都是 IEEE 双精度浮点数。

```
> (integer-decode-float 1.0d0)
4503599627370496
-52
1 
```

也就是说，如果我们将存储在有效数字中的值*视为整数*，则它是可用的 2 的最大幂 (4503599627370496 = 2^52)，按比例缩小 (2^-52)。（它不存储为指数为 0 的 1，因为有效数字的左侧永远不会有零更简单，这允许我们跳过表示最左边的 1 位并具有更高的精度。不是这种形式的数字被称为*不正常*的。）

让我们看看1e16。

```
> (integer-decode-float 1d16)
5000000000000000
1
1 
```

这里我们有表示 (5000000000000000) * 2^1。请注意，尽管有效数字是一个很好的四舍五入数，但它不是 2 的幂；这是因为 1e16 不是 2 的幂。每次乘以 10，就是乘以 2 和 5；乘以 2 只是增加指数，但乘以 5 是“实际”乘法，这里我们乘以 5 16 次。

```
5000000000000000 = 10001110000110111100100110111111000001000000000000000 (base 2) 
```

请注意，这是一个 53 位二进制数，因为双浮点数具有 53 位有效数。

但是理解这种情况的关键是指数是 1。（指数很小表明我们正在接近精度的极限。）这意味着浮点值是 2^1 = 2 倍这个有效数。

现在，当我们试图表示这个数字加 1 时会发生什么？好吧，我们需要以相同的比例表示 1。但是我们可以对这个数字做出的最小改变恰好是 2，因为有效数字的最低有效位的值为 2！

也就是说，如果我们增加有效位，使最小的变化，我们得到

```
5000000000000001 = 10001110000110111100100110111111000001000000000000001 (base 2) 
```

当我们应用指数时，我们得到 2 * 5000000000000001 = 10000000000000002，这正是您观察到的值。您只能拥有 10000000000000000 或 10000000000000002，而 10000000000000001.1 更接近于后者。

（请注意，这里的问题甚至不是十进制数在二进制中不精确！这里没有二进制“重复小数”，有效数字的右端有很多 0 位 - 只是你的输入整齐地下降刚好超过最低位。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T04:32:42.760

使用 numpy，您可以看到下一个越来越小的可表示 IEEE 浮点数：

```
>>> import numpy as np
>>> huge=1e100
>>> tiny=1e-100
>>> np.nextafter(1e16,huge)
10000000000000002.0
>>> np.nextafter(1e16,tiny)
9999999999999998.0 
```

所以：

```
>>> (np.nextafter(1e16,huge)-np.nextafter(1e16,tiny))/2.0
2.0 
```

和：

```
>>> 1.1>2.0/2
True 
```

因此 1e16 + 1.1 正确舍入为下一个更大的 IEEE 可表示数字 10000000000000002.0

原样：

```
>>> 1e16+1.0000000000000005
1.0000000000000002e+16 
```

和 1e16-（略大于 1）向下舍入 2 到下一个较小的 IEEE 数字：

```
>>> 1e16-1.0000000000000005
9999999999999998.0 
```

请记住，32 位与 64 位 Python 是无关紧要的。[重要的是所使用的IEEE 格式](http://en.wikipedia.org/wiki/IEEE_floating_point)的大小。还要记住，数字的幅度越大，epsilon 值（两个下一个较大和较小的 IEEE 值之间的差值基本上）[会发生变化](https://stackoverflow.com/a/10557705/298607)。

您也可以看到这一点：

```
>>> def f_to_bits(f): return struct.unpack('<Q', struct.pack('<d', f))[0]
... 
>>> def bits_to_f(bits): return struct.unpack('<d', struct.pack('<Q', bits))[0]
... 
>>> bits_to_f(f_to_bits(1e16)+1)
1.0000000000000002e+16
>>> bits_to_f(f_to_bits(1e16)-1)
9999999999999998.0 
```

# java - 构建 maven 项目，不包含 web 项目的 jar 文件

> ID：15059530
> 
> 赞同：0
> 
> 时间：2013-02-25T03:15:32.820
> 
> 标签：java, maven, jetty

我有一个多模块 maven 项目，我的 web 项目的 pom.xml 文件如下所示：

```
<parent>
    <artifactId>myapp</artifactId>
    <groupId>com.myapp</groupId>
    <version>1.0</version>
</parent>
<modelVersion>4.0.0</modelVersion>
<artifactId>myapp-web</artifactId>
<packaging>war</packaging>
<name>myapp-web Maven Webapp</name>
<url>http://maven.apache.org</url> 
```

这是一个 Spring MVC 应用程序，我也有一个嵌入式码头实例：

```
 Server server = new Server(8080);

    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setContextPath("/");
    webAppContext.setWar("file:/path/to/war/myapp-web.war"); 
    webAppContext.setParentLoaderPriority(true);
    server.setHandler(webAppContext);

    server.start();
    server.join(); 
```

我使用 maven 构建 web 项目：

```
mvn clean package 
```

所以让我感到困惑的是，当我解压缩 maven 在构建过程中生成的 myapp.war 文件时，我查看了 lib 文件夹，却没有看到 web 项目的 .jar 文件？

另外，如何使用 .war 文件运行嵌入式码头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:41:58.253

最终创建战争的 web 项目的内容应该直接进入战争中的 WEB-INF/classes，而不是进入 jar 文件。

只要您正确设置了嵌入式 Jetty，您应该能够使用

```
java -jar myapp-web.war 
```

配置将涉及创建一个 main 方法，添加正确的码头依赖项，并在生成清单时指定主类。

jetty-console-maven-plugin 可能是设置所有这些的更简单的替代方案。看看这个指南：[http ://www.dzone.com/links/r/make_your_war_file_executable_with_the_jetty_cons.html](http://www.dzone.com/links/r/make_your_war_file_executable_with_the_jetty_cons.html)

# mysql - 加速 MyISAM 插入

> ID：15059533
> 
> 赞同：1
> 
> 时间：2013-02-25T03:16:07.767
> 
> 标签：mysql, mysqldump

从 mysqldump 文件恢复数据需要很长时间。是否有任何参数可以动态更改以加快 MyISAM 仅数据的插入而无需重新启动 mysql 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:04:22.900

这看起来像是一份工作`bulk_insert_buffer_size`

根据[**bulk_insert_buffer_size上的 MySQL 文档**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_bulk_insert_buffer_size)

> MyISAM 使用特殊的树状缓存来使 INSERT ... SELECT、INSERT ... VALUES (...)、(...)、... 和 LOAD DATA INFILE 的批量插入更快表。此变量限制每个线程的缓存树大小（以字节为单位）。将其设置为 0 会禁用此优化。默认值为 8MB。

尝试将其提高到 256M

不需要重启 MySQL。赶紧跑：

```
SET GLOBAL bulk_insert_buffer_size = 1024 * 1024 * 256; 
```

请记得添加到`my.cnf`

```
[mysqld]
bulk_insert_buffer_size=256M 
```

的，你可以重新加载mysqldump。

试试看 ！！！

# python - 如何处理需要很长时间才能运行的请求？

> ID：15059534
> 
> 赞同：1
> 
> 时间：2013-02-25T03:16:12.530
> 
> 标签：python, django

我正在使用 Django 开发分类器服务，用户可以使用类似的 api 构建模型`http://localhost/api/buildmodel`，但是，因为构建模型需要很长时间，可能需要 2 个小时，而且我正在使用网页来显示构建结果模型。如何设计我的 Django 程序以在构建完成后立即返回并显示结果？也许我可以使用 ajax，但我想在 Python 中实现它，比如使用异步方法并在构建后调用回调函数，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:29:46.957

您需要使用任务队列管理器。[Celery](http://celeryproject.org/)是迄今为止最受欢迎的 Django 任务管理器。这个想法是你给这个管理器一个任务，然后它处理任务，一旦完成，它可以触发一个回调函数。在回调函数中，您可以运行逻辑以通知用户任务已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:27:20.400

One way to do it is to create a row in a persistent database (or a redis key/value pair) for the task which says if it is running or finished. Have the code set the value to be running when the task starts and done when the task completes. Then have an AJAX call do a GET lookup on a URL that sends the status for the task via a web service. You can put that in a setInterval() to periodically poll the database to see if it is done. You could send an email on completion or just have a landing page / dashboard that shows the status of the tasks being run.

# php - ImageMagick 无法在 svg 文件中渲染文本

> ID：15059536
> 
> 赞同：1
> 
> 时间：2013-02-25T03:16:27.097
> 
> 标签：php, imagemagick, imagick

我遇到了关于 imagick 读取 svg 文本的问题，如下所示：

```
$xmlDoc = new DOMDocument();
$svgroot = $xmlDoc->createElement('svg');
$textnode = $xmlDoc->createElement('text');
$textnode->setAttribute('font-size','24');
$textnode->setAttribute('transform','matrix(3.1054,0,0,3.1054,158.5,0)');
$textnode->setAttribute('font-family','helvetica');
$textnode->appendChild($xmlDoc->createTextNode("eeee"));

$textnode = $svgroot->appendChild($textnode);
$xmlDoc->appendChild($svgroot);

$svgtext = new Imagick();
$svgtext->setbackgroundcolor('#00000000');

$svgtext->readImageBlob($xmlDoc->saveXML()); 
```

它将在 readImageBlob 函数的最后一行抛出异常（“helvetica”字体已安装在 windows/fonts 中。）。它说：

```
 Uncaught exception 'ImagickException' with message 'must specify image size `C:/DOCUME~1/ADMINI~1/LOCALS~1/Temp/1/magick-270886DDFFPHkGTr' @ error/mvg.c/ReadMVGImage/185' in C:\xampp\htdocs\opencart\imagicktest.php:106 Stack trace: #0 C:\xampp\htdocs\opencart\imagicktest.php(106): Imagick->readimageblob('<?xml version="...') #1 {main} thrown in C:\xampp\htdocs\opencart\imagicktest.php on line 106 
```

这个bug只在windows server 2003下才有。在winXP下运行imageMagic时不会抛出这个异常。我认为这个错误类似于[https://bugzilla.redhat.com/show_bug.cgi?id=193474](https://bugzilla.redhat.com/show_bug.cgi?id=193474)

可能是windows2003需要安装一些东西来支持imagick render svg字体？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T14:35:04.400

由于`ImagickException`根`svg`元素中缺少图像大小属性，因此抛出 。不同版本的 ImageMagick 和 SVG 系统库将有助于您体验到的行为。要解决此问题 - 只需使用 、 和 & 属性指定`viewBox`图像`x`尺寸`y`。

```
$xmlDoc = new DOMDocument();
$svgroot = $xmlDoc->createElement('svg');
$svgroot->setAttribute('viewBox','0 0 60 24'); // Set the viewable canvas
$svgroot->setAttribute('x',0);                 // Left offset
$svgroot->setAttribute('y',16);                // Top offset 
$svgroot->setAttribute('width',60);            // Optional rendering width
$svgroot->setAttribute('hieght',24);           // Optional rendering height 
```

# c - 在 C 中错误地打印输出；故障和重复

> ID：15059545
> 
> 赞同：0
> 
> 时间：2013-02-25T03:18:25.547
> 
> 标签：c, printing, malloc, repeat

我的代码有效，但打印不正确。这是我的输入：

请输入 1 表示字符，2 表示整数，3 表示浮点数，4 表示单词

1 abcdefghijklmnop 3 123.4 45.54 6.0 7890.09876 2 123 34 23 12345 4 aaaaa bbbbb ccccc sssssssssssssssssss

我不知道如何让它像它应该的那样在 cccccc 之后停止。在它通过之前，我必须输入随机的东西来填满空间。我很确定这与不使用malloc有关。

然后这是输出：

类型 1：abcdefghijklmnop 类型 3：123.400002/ 45.540001/ 6.000000/ 7890.098633 类型 2：123、34、23、12345 类型 4：ccccc ccccc ccccc 类型 1：ssssssssssssss

在类型 4 上，它应该是 aaaaa bbbbb ccccc，但它却是这样做的。并且在类型 1 上，它没有显示，但它打印出来就像这个奇怪的方形故障一样。

这是我的代码。它在 3 个文件中

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "lab5.h"
#include "lab5dispatch.c"
#define MAX_ENTRIES 16

int main()
{
MESSAGE cache[MAX_ENTRIES];
int i = 0;
printf("Please enter in 1 for characters, 2 for ints, 3 for floats and 4 for words\n");

while (scanf("%d", &cache[i].messageType) != EOF && i < MAX_ENTRIES) 
{
   switch(cache[i].messageType)
    {
    case 1:
        scanf("%16s", &cache[i].MESSAGE_CONTENT.charPointer);
        break;
    case 2:
        scanf("%d", &cache[i].MESSAGE_CONTENT.theInts[0]);
        scanf("%d", &cache[i].MESSAGE_CONTENT.theInts[1]);
        scanf("%d", &cache[i].MESSAGE_CONTENT.theInts[2]);
        scanf("%d", &cache[i].MESSAGE_CONTENT.theInts[3]);
        break;
    case 3:
        scanf("%f",  &cache[i].MESSAGE_CONTENT.theFloats[0]);
        scanf("%f",  &cache[i].MESSAGE_CONTENT.theFloats[1]);
        scanf("%f",  &cache[i].MESSAGE_CONTENT.theFloats[2]);
        scanf("%f",  &cache[i].MESSAGE_CONTENT.theFloats[3]);
        break;
    case 4:
        scanf("%s", &cache[i].MESSAGE_CONTENT.word1);
        scanf("%s", &cache[i].MESSAGE_CONTENT.word2);
        scanf("%s", &cache[i].MESSAGE_CONTENT.word3);
        break;
    }
    i++;
}
message_dispatcher(cache, i);
} 
```

这是第二个文件。

```
#ifndef LAB5_H_ /* to prevent re-definitions */
#define LAB5_H_ /* that cause errors */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//the unsigned short is to store what type of data the main struct will store

typedef struct MESSAGE
{
unsigned short int messageType;
union
{
    char * charPointer; //this is for the string
    int theInts[4];
    float theFloats[4];
    char word1[5]; //can probably use a 2d array here but that's too complicated right now haha
    char word2[5];
    char word3[5];
} MESSAGE_CONTENT;
} MESSAGE; 
```

这是最后一个文件。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "lab5.h"
void message_dispatcher( MESSAGE msg[], int j ) {
int i;
for (i = 0; i < j; i++)
{
    switch(msg[i].messageType)
    {
    case 1:
        printf("Type 1: %s\n", &msg[i].MESSAGE_CONTENT.charPointer);
        break;

    case 2:
        printf("Type 2: %d, %d, %d, %d\n", msg[i].MESSAGE_CONTENT.theInts[0],
                msg[i].MESSAGE_CONTENT.theInts[1], msg[i].MESSAGE_CONTENT.theInts[2],
                msg[i].MESSAGE_CONTENT.theInts[3]);
        break;

    case 3:
        printf("Type 3: %f/ %f/ %f/ %f \n", msg[i].MESSAGE_CONTENT.theFloats[0], msg[i].MESSAGE_CONTENT.theFloats[1], msg[i].MESSAGE_CONTENT.theFloats[2], msg[i].MESSAGE_CONTENT.theFloats[3]);
        break;

    case 4:
        printf("Type 4: %s %s %s\n", msg[i].MESSAGE_CONTENT.word1, msg[i].MESSAGE_CONTENT.word2, msg[i].MESSAGE_CONTENT.word3);
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:32:30.400

因为 word1、word2 和 word3 都在同一个联合 MESSAGE_CONTENT 中，所以它们被存储在同一个内存中。因此，每次您读取其中一个时，所有这些看起来都会被您读取的最后一个值覆盖。

看看[http://en.cppreference.com/w/cpp/language/union](http://en.cppreference.com/w/cpp/language/union)

您应该尝试使用“char word[3][6];” 在工会。这样您就可以存储所有三个单词。您还需要确保每个单词都有 NULL 字符的空间。你通常无法逃脱惩罚，但工会中有更多的空间。

这些中的任何一个都会让您更接近您想要的，（当然，您的代码中的其他错误无法承受）：

**替代#1**

```
typedef struct MESSAGE
{
    unsigned short int messageType;
    union
    {
        char * charPointer;
        int theInts[4];
        float theFloats[4];
        char theWords[3][6];
    } MESSAGE_CONTENT;
} MESSAGE; 
```

**替代#2**

```
typedef struct MESSAGE
{
    unsigned short int messageType;
    union
    {
        char * charPointer;
        int theInts[4];
        float theFloats[4];
        struct {
            char word1[6];
            char word2[6];
            char word3[6];
        } WORDS;
    } MESSAGE_CONTENT;
} MESSAGE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:50:43.687

由于代码的以下部分，您得到了错误的（不是您期望的）输入：

```
case 4:
        scanf("%s", &cache[i].MESSAGE_CONTENT.word1);
        scanf("%s", &cache[i].MESSAGE_CONTENT.word2);
        scanf("%s", &cache[i].MESSAGE_CONTENT.word3);
        break; 
```

根据**scanf 函数**语法，它的**参数是：**
1\. 参数字符串；
2\. 对象地址。

注意第二个（**对象的地址**）
作为 cache[i].MESSAGE_CONTENT.word == **char word1[5]** ==**数组上的 const 指针**，这已经是一个地址，所以在我们的代码中你应该省略 &，

```
case 4:
            scanf("%s", cache[i].MESSAGE_CONTENT.word1);
            scanf("%s", cache[i].MESSAGE_CONTENT.word2);
            scanf("%s", cache[i].MESSAGE_CONTENT.word3);
            break; 
```

# c# - TabControl、TabPage 避免 switch 语句

> ID：15059550
> 
> 赞同：0
> 
> 时间：2013-02-25T03:18:33.310
> 
> 标签：c#, .net, winforms

我在 WinForms 应用程序中使用 MVP 监督演示者模式。我有一个带有 a`TabControl`和多个`TabPage`s 的视图。我需要延迟加载每个标签页的内容，因为在尝试填充整个视图时存在明显的滞后。

我希望挂钩 TabPage.GotFocus 事件并在选择给定选项卡但似乎不起作用时提供处理程序。所以我不得不使用`TabControl.SelectedIndexChanged`事件和 switch 语句来让它工作。必须放入 switch 语句是一个真正的痛苦。有没有办法避免 switch 语句？

```
public partial class Form1 : Form
{
    public event EventHandler TabPage1Selected;

    public event EventHandler TabPage2Selected;

    public event EventHandler TabPage3Selected;

    public Form1()
    {
        InitializeComponent();
        this.tabControl1.SelectedIndexChanged += tabControl1_SelectedIndexChanged;

        this.tabPage1.GotFocus += tabPage1_GotFocus; //Doesn't work!
    }

    private void tabPage1_GotFocus(object sender, EventArgs e)
    {
        Debug.WriteLine("event fired for tabpage1");
    }

    private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Debug.WriteLine("Raising tab selected event");
        EventHandler h = null;
        switch (this.tabControl1.SelectedIndex)
        {
            case 0:
                h = this.TabPage1Selected;
                break;
            case 1:
                h = this.TabPage2Selected;
                break;
            case 2:
                h = this.TabPage3Selected;
                break;
            default:
                break;
        }
        if (h != null) h(this, new EventArgs());
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:22:56.403

You could subclass TabItem for each TabItem you want to add and implement a .Load() method on each one. Apart from subclassing or some overly complex dictionary/delegate solution, I don't think you'll avoid some form of flow control. Switch is the most appropriate form of flow control here.

I would look at finding something better than index to switch on - some sort of tab id or name. You don't want to have to rewrite this code if you rearrange your tabs later on.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T05:07:54.047

您可以使用 Enter 事件。在属性 | 中选择 TabPage 您可以在设计器中的事件列表中设置 Enter 事件/或者您可以通过编程方式设置事件。每次 TabPage 获得焦点时都会触发 enter…

```
public Form1()
{
    InitializeComponent();

    // I set tabPage1 & 2 event w/ the designer
    tabPage3.Enter += tabPage3_Enter;
}

private void tabPage1_Enter(object sender, EventArgs e)
{
    Debug.WriteLine("tabPage1_Enter");
}

private void tabPage2_Enter(object sender, EventArgs e)
{
    Debug.WriteLine("tabPage2_Enter");
}

private void tabPage3_Enter(object sender, EventArgs e)
{
    Debug.WriteLine("tabPage3_Enter");
} 
```

# mysql - MySQL search field with double '@' sign

> ID：15059553
> 
> 赞同：0
> 
> 时间：2013-02-25T03:18:48.367
> 
> 标签：mysql, search

I have a db table which is stored few thousand of member's email, some of the email was entry with double email address within a field, for example is like `abc@site.comxyz@site.com`, how can I filter/search these kind of entry with double `@` sign?

thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:19:43.920

```
SELECT email FROM t1 WHERE email LIKE '%@%@%' 
```

这也将选择可能有三个或更多的条目`@`。我也不确定将它们分开会有多少运气。我想你会使用`.com`.

# c++ - 使用对作为键的 C++ 映射

> ID：15059554
> 
> 赞同：1
> 
> 时间：2013-02-25T03:18:56.763
> 
> 标签：c++, dictionary, containers, std-pair

我正在使用一个地图（这似乎是[上一个问题](https://stackoverflow.com/questions/15016197/stdmapint-int-vs-vector-of-vector)之后最好的实现，带有一对键，作为传入消息的“容器”，可以根据 sourceID 和优先级进行排序，即 key: (sourceID, priority) 指向一个int 值。处理将在此地图上进行。

我刚刚遇到了一个问题 - 我需要执行类似以下伪代码的操作来随后检索消息：

```
map<pair<int, int>, int> mymap;

if (!mymap[make_pair(nodeID,i)].empty()) //i refers to all the priority levels
    //processing occurs here to retrieve a value 
```

但我似乎不能轻易做到。有没有办法在不运行迭代器的情况下简单地做到这一点`for (i = 0; i <priority ; i++)`？我知道如果我使用等价物`vector<vector<int>>`，我将能够轻松地做到这一点，但目前地图更适合我的程序。

编辑：

消息按（sourceID，优先级）排序到映射中，然后在按（destID，优先级）映射到另一个映射之前进行处理。我需要检查是否有可用于任何特定 destID 的消息，无论优先级如何，因此我正在寻找一种简单的方法来检查这一点。

我知道如果我使用 a ，如果我想检查节点 2 是否没有可用消息`vector<vector<int>>`，我将能够执行类似的操作。`node[2].empty()`地图有等价物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:40:29.853

`(node_id,i)`如果我理解正确，您会想要一种方便的方法来确定地图有多少条目，在哪里`node_id`是固定的并且`i`可以是任何东西。

如果这种理解是正确的，您可以利用 map 中的排序基于 定义的排序这一事实，`std::less<std::pair<int,int>>`默认情况下是字典顺序。换句话说，node-id 将用作主要排序标准，而该对的第二个元素将用作次要排序标准。

因此，您可以使用 map 的`lower_bound`和`upper_bound`函数来确定给定节点 ID 的条目范围，如下所示（C++11 代码，但可以转换为 C++03）：

```
std::ptrdiff_t num_per_node(const mymap &map, const int node_id)
{
  using std::distance;
  static constexpr int min = std::numeric_limits<int>::min();
  static constexpr int max = std::numeric_limits<int>::max();

  auto lo = map.lower_bound({node_id,min});
  auto hi = map.upper_bound({node_id,max});
  return distance(lo,hi);
} 
```

`map`上面定义的函数返回给定 node-id映射中的条目数`node_id`。

所以你的伪代码变成：

```
if (num_per_node(mymap,nodeID) > 0) 
```

该函数具有对数复杂度，这显然（渐近地）优于遍历所有优先级值。

请注意，这仅有效，因为您的对的元素是`int`，因此很容易建立最小值和最大值。同样，它也仅因字典顺序而起作用。如果您在地图上使用自定义的比较器功能，则此方法将不再起作用，并且是否可以找到对应的方法取决于您的比较器是如何定义的。

这是一个带有完整示例的 GIT-gist，演示了如何使用该函数：[https ://gist.github.com/jogojapan/5027365](https://gist.github.com/jogojapan/5027365)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:51:30.283

只是为了建立@jogojapan 所做的工作，我已经对其进行了调整以不使用 C++11（因为我没有使用它），并将其留在这里以供参考。不确定它会做他所做的*一切*，但对我来说足够用

```
#include <iostream>
#include <utility>
#include <limits>
#include <map>

using namespace std;

std::ptrdiff_t num_per_node(const map<pair<int, int>, int> &map, const int node_id)
{
  using std::distance;
  static int min = std::numeric_limits<int>::min();
  static int max = std::numeric_limits<int>::max();

    auto lo = map.lower_bound(make_pair(node_id,min));
    auto hi = map.upper_bound(make_pair(node_id,max));
    return distance(lo,hi);
  }

  int main() {
    map<pair<int, int>, int> m;
    m.insert(make_pair(make_pair(1,3),1));
    m.insert(make_pair(make_pair(3,4),2));
    m.insert(make_pair(make_pair(3,5),3));
    m.insert(make_pair(make_pair(3,9),4)); 
    m.insert(make_pair(make_pair(4,2),5)); 
    m.insert(make_pair(make_pair(4,3),6)); 
    m.insert(make_pair(make_pair(5,1),7)); 
    m.insert(make_pair(make_pair(8,2),8));

    for (int node_id = 0 ; node_id < 10 ; ++node_id)
      std::cout << "node-id " << node_id << ": " << num_per_node(m,node_id) << '\n';

    return 0;
  } 
```

正确返回

```
node-id 0: 0
node-id 1: 1
node-id 2: 0
node-id 3: 3
node-id 4: 2
node-id 5: 1
node-id 6: 0
node-id 7: 0
node-id 8: 1
node-id 9: 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:02:47.937

一种可能的解决方案是使用 2 个嵌套地图：

```
typedef std::map<int,int> priorities;
typedef std::map<int,priorities> messages; 
```

查找给定 sourceId 是否有任何消息，并且当您需要查找具有给定 sopurceId 和优先级的消息时，任何优先级对于 2 次查找的价格都变得微不足道。

# asp.net - 回到上一页

> ID：15059558
> 
> 赞同：1
> 
> 时间：2013-02-25T03:19:29.543
> 
> 标签：asp.net

在我的项目中，我有两个页面，page1 和 page2。在 page1 中，我几乎没有下拉控件来过滤数据库中的记录。在网格视图中，我将按钮设置为“查看详细信息”。当我单击“查看详细信息”按钮时，页面必须重定向到 page2，并且将查看该记录的完整详细信息。

现在我需要的是我在 page2 中有后退按钮。当我单击该按钮时，页面必须返回到 page1 并且页面应该像我离开它的方式一样显示，不应该作为新页面加载....自从初学者到 asp.net 我找不到这个问题的解决方案. 请提供一些例子......

非常感谢提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:21:55.093

Try this in you `viewdetails` button click event:

```
 Server.Transfer("Page2.aspx") 
```

And similarly in your page2 `back button` click event

```
Server.Transfer("Page1.aspx") 
```

***The Server.Transfer method also has a second parameter—"preserveForm". If you set this to True, using a statement such as Server.Transfer("Page2.aspx", True), the existing query string and any form variables will still be available to the page you are transferring to.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:11:30.030

一个简单的解决方案是保留您在会话中设置的任何此类过滤器。

即使用户离开页面，这也允许您保持过滤器处于活动状态。

您可以使用 Page1 按钮来清除过滤器。

**第1页加载：**

```
if(!String.IsNullOrEmpty(Session["Filter1"]))
{
   dropDownList1.Text = Session["Filter1"];
} 
```

**Page1 dropDownList1_SelectedIndexChanged**

```
Session["Filter1"] = dropDownList1.Text; 
```

# sql - 何时链接表格或将其保留为具有更多字段的表格

> ID：15059566
> 
> 赞同：0
> 
> 时间：2013-02-25T03:20:25.307
> 
> 标签：sql

我有一个包含很多字段的表格，其中包含“总计”，如下所示：

```
UserID | total_classA | total_classB | total_classC   // and so on 
```

我可以有第二张桌子但是：

```
ClassType | Total | UserID 
```

但是我真的看不出第二个表对多对一关系有什么好处，首先我必须存储更多的数据行，并且我必须使用连接来选择数据。

但是我读到的很多东西都建议有两张表比一张有很多字段的表最好……为什么会这样，因为在上述情况下我看不到这样做的好处=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:44:21.947

按照您对“第二张表”的建议，干净地存储您的数据。

您始终可以在需要时使用 PIVOT（取决于您的平台）或专门的查询来获得汇总的列总显示。

这样做的最大好处将是消除您决定引入的每个附加类类型都必须更改表结构。您将能够通过添加行（DML 而不是 DDL）来扩展您的数据跟踪功能。

查看[第二范式以](http://en.wikipedia.org/wiki/Second_normal_form)获得更多关于这条路线的技术解释。

# c# - 如何设置 SVN 进行颠覆

> ID：15059568
> 
> 赞同：0
> 
> 时间：2013-02-25T03:20:33.240
> 
> 标签：c#, asp.net, windows-7, tortoisesvn

我有一个装有 Windows 7 的 VPS 服务器，在该服务器上我放置了我的 Asp.net c# web 应用程序。现在我将如何使用 SVN 进行设置，以便我可以从我的个人计算机签入和签出代码？

**注意：这是 Tortoise SVN**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:24:37.963

The best thing to do is to read the [Subversion book](http://svnbook.red-bean.com/), as you'll need to have a better understanding of subversion to run a server. It's not terribly difficult, a lot depends on whether you need access to the repository from other computers. If not, you set up a local file based repository without using a server at all. Again, this is all well covered in book.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:56:40.820

一种简单的方法是在您用作服务器的机器上安装[VisualSVNServer](http://www.visualsvn.com/server/)，然后在您用于开发人员工作站的机器上安装 TortoiseSVN。安装 VisualSVNServer 后，创建一个存储库，它会显示存储库的 URL，然后您可以将其插入开发工作站上的 Tortoise。

然后使用 Tortoise 将 C# 代码添加到存储库中，一切就绪。

# java - Java：使用 getClass 获取子类引用

> ID：15059571
> 
> 赞同：1
> 
> 时间：2013-02-25T03:21:14.987
> 
> 标签：java

如果我有一个名为 Animal 的超类，以及一个名为 Cat、Dog、Bird 的子类。

如果我读取了一个 Animals 数组，并且想要访问一个名为 meow() 的特定于 Cat 的方法，我该怎么做？

我知道我可以使用 getClass() 来找出 Animal 的子类，但是我如何使用来创建访问 meow() 的引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:24:03.593

如果您使用的是 s 数组`animal`，则需要检查您正在使用的对象是否是`Cat`类的实例，这可以通过使用[instanceof](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)运算符来实现。然后我们可以使用[向下转换](http://en.wikipedia.org/wiki/Downcasting)运算符将 a 转换`Animal`为 a`Cat`然后调用该`meow()`方法。

```
if(animal instanceof Cat){
    (Cat)animal.meow()
} 
```

带数组

```
Animal [] animals = [];
foreach(Animal animal: animals){
    //do something

    if(animal instanceof Cat){
        (Cat)animal.meow()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:24:30.553

你可以投到`Cat`

```
if (animal.getClass().getName().equals('Cat')) {
    ((Cat)animal).meow();
} 
```

或者你可以使用`instanceof`.

* * *

这两种解决方案都很丑陋，而且 Java 的设计初衷并不是以这种方式使用。相反，您应该为可以在内部`.speak`调用的动物创建一个方法。`Cat.meow`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:22:55.867

像这样 ...

```
if (animal.getClass().getName().equals('Cat')) {
    ((Cat)animal).meow();
} 
```

或者

```
if (animal instanceof Cat) {
    ((Cat)animal).meow();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T03:23:41.413

一旦你找到了你想要使用的子类，你就可以强制转换它。在你的情况下，它会是

```
((Cat)animals[index]).meow(); 
```

# java - Java：如何将同一字符串中的两个单词输出到不同的行中？

> ID：15059576
> 
> 赞同：2
> 
> 时间：2013-02-25T03:22:04.670
> 
> 标签：java, system.out

我试图在一个字符串中输入名字和姓氏，然后在不同的行上显示名字和姓氏。我认为 nextLine(); 命令可以工作，但不在单独的行上显示名字和姓氏

```
 String full_name;

    System.out.println("Please enter your first and last name?");

     full_name = c.nextLine();

    System.out.printf("Your name is: "+ full_name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:27:43.010

你可以试试...

```
System.out.print("Your name is: "+ full_name.replace(" ", "\n")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:24:46.027

假设这`c`是一个`Scanner`要监听的集合`System.in`，那么由于它在输入流上，它不会对输出流产生影响。

相反，如果您想打印输入的名字和姓氏，并且我们假设名字和姓氏由一个空格分隔（可能需要中间名的逻辑），您可以这样写。

```
String[] brokenName = full_name.split(" ");
System.out.printf("Your name is:\n%s\n%s", full_name[0], full_name[1]); 
```

# java - For loop only loop 1 time JAVA?

> ID：15059578
> 
> 赞同：3
> 
> 时间：2013-02-25T03:22:23.030
> 
> 标签：java, loops, for-loop

I have a trouble with the for loop method that only loop 1 times whats is the problem? In the array was no problem at all, it able to print the value I want to.

here is my code:

```
public static void main(String[] args){

        String s = "Apple0, Apple1, Apple2, Apple3, Apple4";
        String[] word = s.split(",");
        StringBuffer str = new StringBuffer();
        Integer total = 0;

        for (int y = 0; y < word.length; y++){
            if(word[y].toString().equals("Apple2") ){
                total++;
                //str.append(word[y].toString());
            }else if(word[y].toString().equals("Apple3") ){
                total++;
                //str.append(word[y].toString());
            }else if(word[y].toString().equals("Apple4") ){
                total++;
                //str.append(word[y].toString());
            }
            else if(word[y].toString().equals("Apple1") ){
                total++;
                //str.append(word[y].toString());
            }

    }
        System.out.println( word[0] + word[1] + word[2] +  word[3] + word[4] + word.length);
        System.out.println(str + "hihi" + total);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T03:36:15.237

其他人已经确定了您的问题的原因。然而，他们建议的解决方案过于具体......而且很脆弱。（拆分`split("\\s*,\\s*")`更好，但它不会处理整个字符串开头/结尾的空格。）

我建议你继续使用`split(",")`，但在测试前修剪一下；例如

```
 for (int y = 0; y < word.length; y++) {
        String trimmed = word[y].trim();
        if (trimmed.equals("Apple2")) {
            total++;
            //str.append(trimmed.toString());
        } else if (trimmed.equals("Apple3")) {
            // etcetera 
```

或者更好：

```
 String[] words = s.split(",");
  for (String word : words) {
        String trimmed = word.trim();
        if (trimmed.equals("Apple2")) {
            total++;
            //str.append(trimmed.toString());
        } else if (trimmed.equals("Apple3")) {
            // etcetera 
```

这将使您的代码无论逗号周围以及字符串的开头和结尾处的空格字符如何都可以正常工作。健壮性很好，尤其是在实施成本几乎为零的情况下。

最后，您甚至可以用 Java 7 String switch 语句替换 if / else if / ... 东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T03:26:11.753

Try splitting on `", "` (with space)

```
String[] word = s.split(", "); 
```

without that space in split `word[1]` would look like `" Apple1"` instead `"Apple1"`

* * *

Other option would be calling `word[y].trim().equals("Apple2")` to get rid of that additional space, but I would say including it in split is better. If you aren't sure how many white-spaces can be near comma you can split this way `split("\\s*,\\s*")` to include all white-spaces around comma.

* * *

Also as Matt Ball pointed in his comment you don't need to call `toString()` on `word[y]` since it is already String.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T03:28:01.377

您在拆分期间忽略了空间。String[] word = s.split(", ");

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T03:27:25.597

You'are split by "," but your String contains ", ". You can change the `s.split(",");` to `s.split(", ");`

Or trim the split's result like this :

```
public static void main(String[] args) {

        String s = "Apple0, Apple1, Apple2, Apple3, Apple4";
        String[] word = s.split(",");
        StringBuffer str = new StringBuffer();
        Integer total = 0;
        for (int y = 0; y < word.length; y++) {
            if (word[y].trim().equals("Apple2")) {
                total++;
                // str.append(word[y].toString());
            } else if (word[y].trim().equals("Apple3")) {
                total++;
                // str.append(word[y].toString());
            } else if (word[y].trim().equals("Apple4")) {
                total++;
                // str.append(word[y].toString());
            } else if (word[y].trim().equals("Apple1")) {
                total++;
                // str.append(word[y].toString());
            }

        }
        System.out.println(word[0] + word[1] + word[2] + word[3] + word[4]
                + word.length);
        System.out.println(str + "hihi" + total);

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T03:51:53.123

您的代码没有任何问题，但问题在于您提供给变量的字符串。

```
String s = "Apple0, Apple1, Apple2, Apple3, Apple4"; 
```

这里的字符串在逗号后包含它们之间的空格。这样，当您拆分字符串时，它会像

```
word[0]= "Apple0"
word[1]= " Apple1"
word[2]= " Apple2"
word[3]= " Apple3" 
```

等等。

所以当你比较喜欢

word[y].equals("Apple1") 它返回 false 因为 "Apple1" 和 "Apple1" 是两个不同的字符串。所以像这样初始化你的字符串

```
String s = "Apple0,Apple1,Apple2,Apple3,Apple4"; // without white spaces 
```

它会正常工作。或者您可以在现有代码中使用 trim 方法，而无需更改 String

```
word[y].trim().equals("Apple1") //It will trim all the leading and trailing white spaces. 
```

希望这可以帮助。

# nfc - reading EMV card using PPSE and not PSE

> ID：15059580
> 
> 赞同：8
> 
> 时间：2013-02-25T03:22:41.380
> 
> 标签：nfc, credit-card, emv

I'm trying to read the data off a contactless Visa Paywave card.

For the Paywave, I have to submit a SELECT using PPSE (2PAY.SYS.DDF01) instead of PSE (1PAY.SYS.DDF01).

The EMV book 1, section 11.3.4, table 43 only describes how to interpret the response for a successful SELECT command using PSE. Does anyone know or can refer me to a source that shows how to process the data returned from a successful SELECT command using PPSE?

Here's my request APDU:

```
00A404000e325041592e5359532e444446303100 
```

Here's the response:

```
6F2F840E325041592E5359532E4444463031A51DBF0C1A61184F07A0000000031010500A564953412044454249548701019000 
```

I understand tag `84`, tag `85`, tag `BF0C` from the response. According to the examples for reading PSE, I should be able to just send GET PROCESSION OPTIONS (to get the AIP and AFL) with PDOL = null after this successful response as follows: `80A80000830000`.

But request `80A80000830000` returns error code `6985` - Command not allowed; conditions of use not satisfied.

I also tried reading all the files after successfully selecting the PPSE by traversing through every single SFI (0-30) and every single record (0-16) of each SFI. Yes, I also did the 3 bit shift and bitwise-OR the SFI with `0x4`. But I got no data.

I'm stuck, any help that would point me into getting some info from my Paywave card would be appreciated!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-25T15:26:20.920

您是否从 EMVLAB [http://www.emvlab.org/emvtags/尝试过这个工具](http://www.emvlab.org/emvtags/)

使用那个工具，

[http://www.emvlab.org/tlvutils/?data=6F2F840E325041592E5359532E4444463031A51DBF0C1A61184F07A0000000031010500A564953412044454249548701019000](http://www.emvlab.org/tlvutils/?data=6F2F840E325041592E5359532E4444463031A51DBF0C1A61184F07A0000000031010500A564953412044454249548701019000)

![在此处输入图像描述](../Images/16e4500652270247ce58afb2bda4312a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-07T22:22:33.560

2PAY.SYS.DDF01 用于非接触式（例如 NFC）卡，而 1PAY.SYS.DDF01 用于接触式卡。

1.  成功（SW1 SW2 = 90 00）读取 PSE 后，您应该只搜索返回的 FCI 模板中的必填字段 SFI（标签 88）。

2.  使用 SFI 作为起始索引，您必须从起始索引开始读取记录，直到获得 6A83 (RECORD_NOT_FOUND)。例如，如果您的 SFI 为 1，您将使用 record_number=1 执行 readRecord。那可能会成功。然后将 record_number 增加到 2 并再次执行 readRecord。增加到 3 .... 重复此操作，直到您获得 6A83 作为您的状态。

3.  读取的记录将是 ADF（至少 1 个）。然后，您必须将读取的 ADF 名称与您的终端支持的名称以及基于 ASI（应用程序选择指标）的名称进行比较。最后，您将获得一份可能的 ADF 列表（候选列表）

所有上述步骤 (1-3) 都记录在 EMV 规范的第 12.3.2 Book1 v4.3 章中。

您必须做出最终选择（第 12.4 章第 1 册）

阅读规范书 1 第 12.3 - 12.4 章了解所有详细步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-05T18:21:56.383

您似乎有点混淆了流程，您想要：

*   发送 1PAY 或 2PAY，对于我测试过的所有卡实际上并不重要。这将返回卡上可用的 AID 列表。或者，如果您知道它在那里，您可以直接选择 AID，但好的做法是先检查。

*   获取响应 1PAY/2PAY 返回的 AID 列表，在 PayWave 的情况下，如果您发送 2PAY，这可能是 A0000000031010，但如果您发送 1PAY，您可能会得到更多。

*   选择一种发回的 AID（或您已经知道的 AID）。

*   然后循环通过发送读取记录命令的 SFI 和记录以获取数据。

您不必在发送读取记录命令之前发送获取处理选项，即使现在这是正常的事务流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T23:31:04.443

如果您也对万事达卡感兴趣，您可以使用 triangle.io 的 API 来执行此操作。它是免费的，可以为您读取 MasterCard 和 Visa 非接触式卡，这正是您想要的。

请注意，直接从卡上读取所有文件，虽然它会给你你想要的数据，但并不是真正遵循 EMV 数据流。选择应用程序后，您应该执行“获取处理选项”，然后构建 PDOL 和其余的魔法。

[http://www.triangle.io](http://www.triangle.io)

免责声明：我为 triangle.io 工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T13:11:51.840

我认为您正在寻找的信息可以从[这个 VISA 网站](https://technologypartner.visa.com/Library/Specifications.aspx#Contactless)获得。但前提是您是 VISA 的注册和/或许可合作伙伴。

编辑：查看下生成的 TLV 结构`BF0C`：

```
tag=0xBF0C, length=0x1A
    tag=0x61, length=0x18
        tag=0x4F, length=0x07, value=0xA0000000031010 // looks like an AID to me
        tag=0x50, length=0x0A, value="VISA DEBIT"
        tag=0x87, length=0x01, value=0x01 
```

我猜您需要先选择`A0000000031010`才能获得处理选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T02:33:53.243

我正在选择应用程序 2PAY.SYS.DDF01。当我应该选择 AID = 0xA0000000031010 时。应用程序 2PAY.SYS.DDF01 下似乎没有记录。

但是应用程序 0xA0000000031010 下有 1 条记录。拿到这个应用程序后，我执行了 READ RECORD，第一条记录给了我 PAN 和我想要的所有信用卡信息。

谢谢大家插话。

# android - 图像从 SD 卡到字节 []

> ID：15059584
> 
> 赞同：1
> 
> 时间：2013-02-25T03:23:00.310
> 
> 标签：android, image-processing, bytearray

如何从 android 模拟器 SD 卡获取图像的字节 []？

这是我当前的代码：

```
File f = new File("/mnt/sdcard/test.jpg");
ImageView mImgView1 = (ImageView)findViewById(R.id.iv);
Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath()); 
```

我想要的是图像的字节格式，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:41:40.130

创建一个`ByteArrayOutputStream`then 调用`compress()`方法，`Bitmap`这样位图的内容将被传入`ByteArrayOutputStream`并转换为`byte[]`

```
public byte[] bitmapToByteArray(Bitmap b)
{
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    b.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    return byteArray;
} 
```

申请，

```
Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath());

byte[] bitmapBytes = bitmapToByteArray(bmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:40:21.810

您可以将 Bitmap 转换为 byte[] ，例如：

```
String imageInSD = Environment.getExternalStorageDirectory().getAbsolutePath() +"/Folder/" + filename + ".PNG";
Bitmap bmp = BitmapFactory.decodeFile(imageInSD);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

# c# - How to get notified when user window closes from signalR

> ID：15059586
> 
> 赞同：1
> 
> 时间：2013-02-25T03:23:09.807
> 
> 标签：c#, javascript, signalr, signalr-hub

I am able to get notified instantly when a user joins, and rejoins a group. I do not know if I am doing something wrong here, but I cannot get notified when an user leaves.

Here is the code for starting the hub on the client.

```
$.connection.hub.start(); 
```

Here is what I am using to stop the connection.

```
$.connection.hub.stop(); 
```

The stop doesn't seem to disconnect the user, so I cannot update the other users in a group and remove that connection from their session.

Client code to be called back

```
$.connection.hub.proxies.collaboratorhub.client.joined = function (connectionId) {
    //
    console.log('joined : ' + connectionId);
};
$.connection.hub.proxies.collaboratorhub.client.joined = function (connectionId) {
    //
    console.log('Re joined : ' + connectionId);
};
$.connection.hub.proxies.collaboratorhub.client.gone = function (connectionId) {
    //
    console.log('gone : ' + connectionId);
}; 
```

Here is the c# code for the server side.

```
public override Task OnConnected()
{
    string pid = this.Context.QueryString["pid"];
    Groups.Add(this.Context.ConnectionId, pid);

    return Clients.Group(pid).joined(Context.ConnectionId);
}

public override Task OnDisconnected()
{
    string pid = this.Context.QueryString["pid"];
    Groups.Remove(Context.ConnectionId, pid);

    return Clients.Group(pid).gone(Context.ConnectionId);
}
public override Task OnReconnected()
{
    string pid = this.Context.QueryString["pid"];

    return Clients.Group(pid).rejoined(Context.ConnectionId);
} 
```

The join and rejoin work perfectly, but not the disconnected.

What am I missing here?

# java - CS106a 棋盘优化

> ID：15059588
> 
> 赞同：0
> 
> 时间：2013-02-25T03:23:21.227
> 
> 标签：java, graphics

我正在从 Roberts 的 The Art & Science of Java （斯坦福的 CS106a 文本）中学习 Java。我使用 NetBeans 作为我的 IDE。

第 4 章，练习 14 要求您扩展前面介绍的棋盘程序。具体来说，它要求您将棋盘居中并绘制一组与游戏初始状态相对应的红白格子。

我已经按照要求完成了，但是有两个问题-

1.  该板未完全居中在窗口中。它比右侧更靠近窗口的左侧。我不知道如何更集中它。我这样做对吗？NetBeans 中是否有我可以/应该更改的设置？

2.  跳棋应该占据他们所坐的大部分瓷砖。我将棋子的大小指定为取决于瓷砖的大小，以便设置简单且相称。有没有更好的方法来使跳棋更大？

    ```
    import acm.graphics.*;
    import acm.program.*;
    import java.awt.*;

    public class Checkerboard extends GraphicsProgram{

    public void run(){

    double sqSize = (double)getHeight() / N_ROWS;
    for (int i = 0; i < N_ROWS; i++){
        for(int j = 0; j < N_COLUMNS; j++){
            double x = ((j * sqSize) + (getWidth() / N_COLUMNS));  //centers square??
            double y = (i * sqSize);
            GRect sq = new GRect( x, y, sqSize, sqSize );
            sq.setFilled((i + j) % 2 != 0);
            sq.setFillColor(Color.GRAY);
            add(sq);

            double circleCoord = (sqSize * .33);
            double xx = ((j * sqSize) + (getWidth() / N_COLUMNS) + circleCoord);
            double yy = ((i * sqSize) + circleCoord);

            if((i + j) % 2 != 0 && i < 3 ){
                GOval red = new GOval( xx, yy, circleCoord, circleCoord);
                red.setFilled(true);
                red.setFillColor(Color.RED);
                add(red);

            } else if((i + j) % 2 != 0 && i > 4 ){
                GOval black = new GOval( xx, yy, circleCoord, circleCoord);
                black.setFilled(true);
                black.setFillColor(Color.BLACK);
                add(black);
            }

         }
       }
    }
    private static final int N_ROWS = 8;
    private static final int N_COLUMNS = 8; 

    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:55:06.493

对于 1\. 板的中心也应该在宽度的中心。所以我们知道

tile 的左边缘`N_COLUMNS/2`=`getWidth()/2`例如 tile 4 in 0 索引的左边缘在中心

并且它左边或右边的每个图块都会有一个 sqSize 的移动，所以：

`double x = getWidth()/2 + (j-N_COLUMNS/2)*sqSize`

# android - How to disable ListView touch events? Allow only childview clicks

> ID：15059591
> 
> 赞同：1
> 
> 时间：2013-02-25T03:23:46.043
> 
> 标签：android, listview, event-handling

I need to disable touchevent handling for a listview but allow it's children to receive clicks. I have a frame layout which has a mapview and the listview over it. When the list is empty, I want the map to handle all touch events but when the list is filled, I want the list items to receive clickevents.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:02:36.247

您可以使用 onInterceptTouchEvent() 拦截自定义 FrameLayout（您的根 ViewGroup）中的所有触摸事件：http: [//developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent)](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent))。

您在那里所做的是捕获 MotionEvent.ACTION_DOWN 事件并根据 ListView 是空的（触摸转到 MapView）还是填充并在 ListView 的边界内（触摸转到）来决定该事件是针对 ListView 还是 MapView到列表视图）。在这两种情况下都返回 true 并在 onTouchEvent() 中捕获以下 ACTION_DOWN 事件（仍然是 FrameLayout）。这样，直到 ACTION_CANCEL 的所有触摸事件都将转到 FrameLayout 的 onTouchEvent()。

您的 FrameLayout 的 onTouchEvent() 会将所有触摸事件分派给 ListView 或 MapView。在 onInterceptTouchEvent() 中决定了哪些视图获取事件，因此您需要以某种方式存储该决定的结果。该决定在 ACTION_DOWN 和 ACTION_POINTER_UP、ACTION_UP、ACTION_CANCEL 事件之间有效。

我不确定您是否要禁用未选择列表项的非空 ListView 的所有触摸事件（翻动、滚动等）？因为这会使事情变得相当复杂。尽管从用户的角度来看，我认为这没有意义，因为无法单击不适合 ListView 视口的列表项，因为您无法向上或向下滚动。

不要指望这很容易。理解运动事件的流程以及 onInterceptTouchEvent() 和 onTouchEvent() 之间的交互是具有挑战性的，并且使其工作更是如此。但我相信这是解决您的问题的可行方法。

# java - How to crop image in different shapes

> ID：15059595
> 
> 赞同：1
> 
> 时间：2013-02-25T03:24:06.373
> 
> 标签：java, image, crop

I try to get a subImage from the given image as shown below: ![enter image description here](../Images/f7fde3a9ab667ffe5a5451af468375e3.png) I know how to crop in rectangular shape like this

```
image = image.getSubImage(x, y, width, height); 
```

but by using this method it is not possible for me to get different shape image from a given image, if anyone has suggestion can show me. Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:49:08.080

您可以通过 Graphics 类做到这一点：http: [//docs.oracle.com/javase/tutorial/2d/advanced/clipping.html](http://docs.oracle.com/javase/tutorial/2d/advanced/clipping.html)

# javascript - Event .on and .off

> ID：15059598
> 
> 赞同：0
> 
> 时间：2013-02-25T03:24:19.410
> 
> 标签：javascript, events, javascript-events, jquery

I am having a few issues with some events I am making.

on my document.ready I have

```
jQuery(document).ready(function () {

//deal with clicks

jQuery(".touchslider-prev").click( function() { 

    jQuery(window).trigger('swipeForward');
});

jQuery(".touchslider-next").click( function() { 

    jQuery(window).trigger('swipeBackward');
});

//deal with swipe 

var maxTime = 1000,
    // allow movement if < 1000 ms (1 sec)
    maxDistance = 50,
    // swipe movement of 50 pixels triggers the swipe
    target = jQuery('.pageSize'),
    startX = 0,
    startTime = 0,
    touch = "ontouchend" in document,
    startEvent = (touch) ? 'touchstart' : 'mousedown',
    moveEvent = (touch) ? 'touchmove' : 'mousemove',
    endEvent = (touch) ? 'touchend' : 'mouseup';

target.bind(startEvent, function(e) {
    // prevent image drag (Firefox)
    // e.preventDefault();
    startTime = e.timeStamp;
    startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;
}).bind(endEvent, function(e) {
    startTime = 0;
    startX = 0;
}).bind(moveEvent, function(e) {
    // e.preventDefault();
    var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
        currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),
        // allow if movement < 1 sec
        currentTime = e.timeStamp;
    if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {
        if (currentX < startX) {
            // swipe left code here

           console.log("page forward trigger");
           jQuery(window).trigger('swipeForward');

        }
        if (currentX > startX) {
            // swipe right code here
             console.log("page back trigger");
           //slide("back", pageSize);
            jQuery(window).trigger('swipeBackward');
        }
        startTime = 0;
        startX = 0;
    }
});

//handle triggers from click and slide

jQuery(window).on('swipeForward', clickHandlerNext );
jQuery(window).on('swipeBackward', clickHandlerPrev );

}); 
```

* * *

If i then click forward or swipe forward this should trigger swipeForward which brings this bit of code into play `jQuery(window).on('swipeForward', clickHandlerNext );`

so the function clickHandlerNext should be run

```
function clickHandlerPrev(event) {

if(event.handled !== true) {

        // Kill event handler, preventing any more clicks
        jQuery(window).off("click", clickHandlerPrev);
        jQuery(window).off("click", clickHandlerNext);
        console.log("switch off handlers");

        // Do your stuff here
        slide("back");

        // Mark event as handled
        event.handled = true;
    } 

    return false;
}

function clickHandlerNext(event) {

    // If event isn't already marked as handled, handle it

    if(event.handled !== true) {

        // Kill event handler, preventing any more clicks
        jQuery(window).off("click", clickHandlerPrev);
        jQuery(window).off("click", clickHandlerNext);
        console.log("switch off handlers");

        // Do your stuff here
        slide("forward");

        // Mark event as handled
        event.handled = true;
    }
    return false;
} 
```

this should switch off the handler and then run the slide function.

```
function slide(data) {

        jQuery('#pageHolder').animate({
            left: 950

          }, 400, function() {
            console.log("animation started");
            console.log("switch on handles");
jQuery(window).on("click", clickHandlerPrev);
            jQuery(window).on("click", clickHandlerNext);

            console.log("animation complete");

        });

} 
```

This then turns back on the handler. If i however remove the line `jQuery(window).on("click", clickHandlerPrev);` the next time i press the button it still runs the handler - but it shouldn't as it should be set .off

can anyone help?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:36:16.113

jQuery.one[是](http://api.jquery.com/one/)一种选择吗？它只应用一次处理程序。

# javascript - Stripchart using raphael.js only partially functioning in IE8

> ID：15059609
> 
> 赞同：0
> 
> 时间：2013-02-25T03:26:07.120
> 
> 标签：javascript, internet-explorer-8, raphael

I'm using Raphael.js to help in creating a Stripchart, but unfortunately it's not displaying the actual data in IE8\. The grid for the chart is displaying but that's about it. Does anything in the code jump out at you as to why this may be an issue? Just looking for a second set of eyes, thanks!

```
 /*
     * accelerometer charts, needs raphael-min.js
     */

    function Stripchart(element) {
        var ret = new SChart(element);

        return ret;
    }

    function SChart(element) {
        vpwidth = element.offsetWidth;
        vpheight = element.offsetHeight;
        tzero = 0;

    mspertick = 100.0;

    bwidth = 0;
    bheight = 0;
    mgperpx = 1000.0 / 30.0;
    chanwidth = 2;

    labelheight = 8;
    labelevery = 30000;

    arraymax = vpwidth * (mspertick/5) * 2;

    xchan = new Array(arraymax);
    ychan = new Array(arraymax);
    zchan = new Array(arraymax);
    clock = new Array(arraymax);

    head = 0;
    tail = 0;

    Paper = Raphael(element, vpwidth, vpheight);

    this.svg_line = function(x1, y1, x2, y2) {
        var ret = "M" + parseInt(x1) + " " + parseInt(y1) + " L" + parseInt(x2) + " " + parseInt(y2);
        return ret;
    }

    this.clear = function() {
        Paper.clear();
    }

    this.draw_grid = function(torigin) {
        epsilon = this.clockToTick(torigin-tzero) % 10;
        yzero = vpheight / 2;
        tline = 0;
        tlast = (parseInt(torigin/labelevery) + 1) * labelevery;

        for (i = vpwidth-bwidth - epsilon ; i > bwidth; i-= 10) {
            svg = this.svg_line(i, bheight, i, vpheight-bheight);
            l = Paper.path(svg);
            l.attr("stroke", "#eee");
            l.attr("stroke-width", "1");
            l.attr("opacity", 0.75);
        }

        for (i = 0; i < torigin-tzero; i += labelevery) {
            if(i > torigin - this.tickToClock(vpwidth-bwidth*2) - tzero) {
                xpos = vpwidth - bwidth - this.clockToTick(torigin - tzero - i);

                minutes = parseInt(i/60000);
                seconds = parseInt((i%60000)/1000);
                if(seconds < 10) {
                    seconds = "0" + seconds;
                }
                timestring = "" + minutes + ":" + seconds;
                Paper.text(xpos, vpheight-bheight-(labelheight/2)-1, timestring);
            }
        }

        for (i = yzero; i > bheight; i -= 15) {
            svg = this.svg_line(bwidth, i, vpwidth-bwidth, i);
            l = Paper.path(svg);
            l.attr("stroke", "#eee");
            l.attr("stroke-width", "1");
            l.attr("opacity", 0.75);
        }

        for (i = yzero; i < vpheight-bheight; i += 15) {
            svg = this.svg_line(bwidth, i, vpwidth-bwidth, i);
            l = Paper.path(svg);
            l.attr("stroke", "#eee");
            l.attr("stroke-width", "1");
            l.attr("opacity", 0.75);
        }

        var svg = this.svg_line(bwidth, yzero, vpwidth-bwidth, yzero);
        var l = Paper.path(svg);
        l.attr("stroke-width", "1");
        l.attr("stroke", "#ddd");
        l.attr("opacity", 0.75);

        var r = Paper.rect(bwidth, bheight, vpwidth-bwidth*2, vpheight-bheight*2);
        r.attr("stroke-width", "2");
        r.attr("stroke", "#ccc");
        r.attr("opacity", 0.75);
    }

    this.draw_channel = function(data, color) {
        var now;
        var svg_path = ""
            var mean_datum = 0;
        var this_tick;
        var prev_tick;
        var count;
        var xorig = vpwidth-bwidth;
        var yorig = vpheight / 2;

        // this.text(150, 40, "head = " + head + " tail = " + tail);

        if (head == tail) {
            return;
        }

        i = this.prev(head);
        now = this.clockToTick(clock[i]);
        prev_tick = now;
        count = 0;
        mean_datum = 0;

        // this.text(150, 30, now + " " + i);

        // console.log("Start " + this.prev(head) + " end " + this.prev(tail) + " max " + arraymax);

        for(i = this.prev(head); i != this.prev(tail); i = this.prev(i)) {
            this_tick = this.clockToTick(clock[i]);

            if(this_tick == prev_tick) {
                mean_datum += data[i];
                ++count;
            } else {
                mean_datum = parseInt(mean_datum / count);

                if(svg_path.length == 0) {
                    svg_path = "M";
                } else {
                    svg_path += "L";
                }

                svg_path += parseInt(xorig - now + prev_tick) + " ";

                yplot = yorig - this.chanToPx(mean_datum);
                if(yplot < 1) {
                    yplot = 1;
                } else if(yplot > vpheight - bheight) {
                    yplot = vpheight - bheight;
                }
                svg_path += parseInt(yplot);

                mean_datum = data[i];
                count = 1;
                prev_tick = this_tick;
            }

            if(xorig - now + this_tick <= bwidth) {
                break;
            }
        }

        var chan_path = Paper.path(svg_path);
        if(color == "#00f") {
            // console.log(svg_path);
        }
        chan_path.attr("stroke", color);
        chan_path.attr("stroke-path", 1);
        chan_path.attr("stroke-width", chanwidth);
        chan_path.attr("opacity", 0.9);
    }

    this.text = function(x, y, s) {
        Paper.text(x, y, s);
    }

    this.prev = function(index) {
        var ret;

        ret = index - 1;
        if(ret <= 0) {
            ret += arraymax;
        }

        return ret;
    }

    this.next = function(index) {
        var ret;

        ret = index + 1;
        if(ret >= arraymax) {
            ret -= arraymax;
        }

        return ret;
    }

    this.dequeue = function() {
        if(head != tail) {
            tail = this.next(tail);
        }
    }

    this.enqueue = function() {
        var ret = head;

        head = this.next(head);

        // detect collision
        if(this.next(head) == tail) {
            this.dequeue();
        }

        return ret;
    }

    this.add_datum = function(time, x, y, z) {
        // assume java applet has already handled clock rollover
        var entry = this.enqueue();

        if(tzero == 0) {
            tzero = parseInt(time);
        }

        clock[entry] = parseInt(time);
        xchan[entry] = parseInt(x);
        ychan[entry] = parseInt(y);
        zchan[entry] = parseInt(z);

        // console.log("Adding datum " + entry + " head " + head + " tail " + tail);

        // clock[head] = parseInt((parseInt(time) + (mspertick / 2)) / mspertick);
        // xchan[head] = parseInt((parseInt(x) + (mgperpx / 2)) / mgperpx);
        // ychan[head] = parseInt((parseInt(y) + (mgperpx / 2)) / mgperpx);
        // zchan[head] = parseInt((parseInt(z) + (mgperpx / 2)) / mgperpx);

        // this.text(150, 30, "(" + clock[head] + ", " + xchan[head] + ", " + ychan[head] + ", " + zchan[head] + ")");
        // while(clock[head] - clock[tail] > vpwidth - (bwidth * 2)) {
        //    tail++;
        //    if (tail >= arraymax) {
        //    tail -= arraymax;
        //    }
        // }
    }

    this.tickToClock = function(tick) {
        ret = tick * mspertick;

        return ret;
    }

    this.clockToTick = function(clock_ms) {
        ret = parseInt(((mspertick / 2) + clock_ms) / mspertick);

        return ret;
    }

    this.chanToPx = function(chan) {
        ret = parseInt((chan + (mgperpx / 2)) / mgperpx);

        return ret;
    }

    this.draw = function() {
        var top = this.prev(head);

        this.clear();
        this.draw_grid(clock[top]);
        this.draw_channel(xchan, "#00f");
        this.draw_channel(ychan, "#0f0");
        this.draw_channel(zchan, "#f00");
    }

    this.reset = function() {
        tzero = 0;
        head = 0;
        tail = 0;
    }

    this.add_test_datum = function(tick) {
        // add some jitter +/- 16ms
        time = tick * mspertick + 16 - Math.floor(Math.random() * 32);

        x = Math.floor(Math.random() * 1000) - Math.floor(Math.random() * 1000);
        y = 1000 + Math.floor(Math.random() * 1000) - Math.floor(Math.random() * 1000);
        z = -1000 + Math.floor(Math.random() * 1000) - Math.floor(Math.random() * 1000);

        time = "" + time;
        x = "" + x;
        y = "" + y;
        z = "" + z;
        this.add_datum(time, x, y, z);
    }

    this.test_animate = function(self) {
        var tid;
        var tcount = 0;
        var tmax = 500;

        function interval_display() {
            for (i=0 ; i<10; i++) {
                tcount++;
                self.add_test_datum(tcount);
            }

            self.draw(tcount);

            if(tcount > tmax) {
                clearInterval(tid);
            }
        }

        tid = setInterval(interval_display, 2500);
    }
} 
```

# python - 尝试使用图像创建 JSON 响应时出现 StringIO 问题

> ID：15059610
> 
> 赞同：0
> 
> 时间：2013-02-25T03:26:08.550
> 
> 标签：python, django, json, matplotlib

我正在尝试在 Django 中发送 JSON 响应，其中包括来自 python 的 matplotlib 的 .png 图的 base64 字符串表示形式和一些关于它的文本信息。我在尝试将图像转换为 base64 字符串时遇到了一些问题：

```
 # Initialize objects imma need
    img_buffer = StringIO.StringIO()
    out = StringIO.StringIO()
    canvas = FigureCanvasAgg(fig)

    # Print and convert
    canvas.print_png(img_buffer)
    base64.encode(img_buffer, out)
    img_str = out.getvalue()

    # Make dictionary
    logger.info(img_str)
    resp_d = {'image': img_str, 'nodes': str(pxs)}

    return HttpResponse(json.dumps(resp_d), content_type='application/json') 
```

注意： fig 是我的 matplotlib `Figure()`，我已将其直接打印到响应中并显示，所以我知道它正在正确创建。

不幸的是，我没有得到图像，并且记录器显示 img_str 是空的。我环顾四周并尝试了一些事情，包括使用`fig.savefig(img_buffer)`而不是`canvas.print_png(img_buffer)`，但没有任何成功。我完全被难住了......任何想法可能会发生什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:52:44.707

问题是

```
canvas.print_png(img_buffer) 
```

将文件指针留在“文件”的末尾，因此`img_buffer.read()`返回一个空字符串。您可以在调用`img_buffer.seek(0)`后立即调用`canvas.print_png(img_buffer)`，但实际上，您的`out`变量不是必需的。相反，替换这个：

```
base64.encode(img_buffer, out)
img_str = out.getvalue() 
```

和：

```
img_str = base64.encodestring(img_buffer.getvalue()) 
```

或者，由于 base64.encodestring 是遗留接口的一部分，最好使用：

```
img_str = base64.b64encode(s.getvalue()) 
```

# javascript - qTip2 验证在输入变为有效时不会消失

> ID：15059616
> 
> 赞同：3
> 
> 时间：2013-02-25T03:27:22.437
> 
> 标签：javascript, jquery, asp.net-mvc-4, qtip2

我正在尝试以[qTips](http://craigsworks.com/projects/qtip2/)的形式显示 ASP.net MVC 客户端验证错误消息，方法是更改`onError`​​函数，`jquery.validation.unobstrusive.js`类似于在[此处](http://nickstips.wordpress.com/2011/08/18/asp-net-mvc-displaying-client-and-server-side-validation-using-qtip-tooltips/)完成的方式。

```
function onError(error, inputElement) {  // 'this' is the form element        
    var container = $(this).find("[data-valmsg-for='" + inputElement[0].name + "']"),
    replace = $.parseJSON(container.attr("data-valmsg-replace")) !== false;

    // Remove the following line so the default validation messages are not displayed        
    // container.removeClass("field-validation-valid").addClass("field-validation-error");

    error.data("unobtrusiveContainer", container);

    if (replace) {
        container.empty();
        error.removeClass("input-validation-error").appendTo(container);
    }
    else {
        error.hide();
    }

    /**** Added code to display the error message in a qTip tooltip ****/        
    // Set positioning based on the elements position in the form
    var elem = $(inputElement),
        corners = ['left center', 'right center'],
        flipIt = elem.parents('span.right').length > 0;

    // Check we have a valid error message
    if (!error.is(':empty')) {
        // Apply the tooltip only if it isn't valid
        elem.filter(':not(.valid)').qtip({
            overwrite: false,
            content: error,
            position: {
                my: corners[flipIt ? 0 : 1],
                at: corners[flipIt ? 1 : 0],
                viewport: $(window)
            },                
            show: {
                event: false,
                ready: true
            },
            hide: false,
            style: {
                classes: 'qtip-red' // Make it red... the classic error colour!
            }
        })

        // If we have a tooltip on this element already, just update its content
        .qtip('option', 'content.text', error);
    }

    // If the error is empty, remove the qTip
    else { elem.qtip('destroy'); }
} 
```

我的模型：

```
public class Model
{
    [DataType(DataType.Currency)]
    [Range(typeof(decimal), "0", "79228162514264337593543950335")]
    public decimal Amount { get; set; }
    // bunch of other properties
} 
```

一切正常，错误（例如，金额字段是必需的）显示在 qTips 中。但是，当我将输入更改为有效值时，qTip 不会消失。以下是具体步骤：

1.  `Amount`为字段输入无效值
2.  当输入焦点丢失时，qTip 会出现正确的错误消息
3.  使用有效值更新输入
4.  qTip 未关闭

从 Chrome Developers Tool 中，我将问题定位到这行代码：`if (!error.is(':empty')`. 即使提供了有效输入，此条件也会返回 true。

`error`变量：

```
[<span for=​"Amount" class>​&lt;/span>​] 
```

我想知道为什么即使`span`是空的，上述条件也会返回 true？我希望 qTip 在输入有效时自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:44:05.560

不显眼的代码看起来是正确的。我之前在 QTip 上使用过它并且可以正常工作。

听起来仍然有一个验证规则没有得到满足。值得检查浏览器开发工具中的代码，以查看该字段存在哪些验证属性。

我还会检查您的开发工具控制台以检查没有客户端错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:27:07.303

原来是一个[qTip2 错误](https://github.com/Craga89/qTip2/issues/476)。我更新了我的构建，一切正常。

# php - Ajax 显示使用 php 显示导航与目录中的图像显示

> ID：15059622
> 
> 赞同：1
> 
> 时间：2013-02-25T03:27:37.617
> 
> 标签：php, javascript, html, css, ajax

嗨，有人可以帮我做这个项目吗这是图片

如果有人可以帮助我解决这个问题和这里的一些编码，我会遇到多个问题 具有蓝色图像的 image.php 使用 php 获取图像名称、描述等，并且图像存储在 php 调用的目录中只有名字。。

问题是，当我调用页面时，图像不显示，但来自数据库的数据/字符串显示但不显示图像部分，我该如何解决这个问题？

我还有一个连接到数据库并显示产品列表的导航 我如何在这里使用 ajax 在数据库中添加产品 ID 名称，这样我就不必添加越来越多的文件，只需一个显示的 php 页面产品和其中的图像是我使用的编码

**CSS 代码**

```
<style>
    #body{
        background-image:url(bg0.png);
        background-repeat:repeat-x;
        width:100%;
        height:100%;            
    }

    #header{
        width:90%;
        height:150px;
        background-color:#39F;
        margin:auto;
        background-image:url(hd.png);
        border-radius: 15px;
        -moz-box-shadow: 3px 3px 4px #000;
        -webkit-box-shadow: 3px 3px 4px #000;
        box-shadow: 10px 10px 25px #000;

    }

    #himg{      
        border-radius: 0px 0px 0px 15px;
    }

    #navi{
        float:left;
        width:20%;
        height: 500px;
        margin-left: 74px;
        margin-top: 10px;
        border-radius: 100px 0px 100px 0px;     
        overflow:hidden;
        position:relative;
        background-color:#456B87;
        background-image:url(nav1.png);         
        -moz-box-shadow: 3px 3px 4px #000;
        -webkit-box-shadow: 3px 3px 4px #000;
        box-shadow: 8px 10px 8px #000;

    }

    #navi ol{
        clear:left;
        float:left;
        list-style:none;
        margin:0;
        padding: 0;
        position:relative;
        text-align:center;
        left:50%;
        vertical-align:middle;
        display:table-cell;
    }

    #navi ol li{
        display:block;
        float:left;
        list-style:none;
        margin:0;
        padding:0;
        position:relative;
        right:50%;
    }

    #navi ol li details{
        border-style:solid;
        border-radius:  25px 0px 25px 0px;
        width: 200px;
        background-color:#FDB735;
    }

    #navi ol li details summary::-webkit-details-marker { display:none; }

    #bod{
        background-color:#FFFFFF;
        float:left;
        width: 69%;
        max-width: 69%;
        margin-left: 9px;
        margin-top: 10px;
        height: 500px;
        max-height: 500px;
        border-radius: 15px;
        background-image:url(nav1.png); 
        -moz-box-shadow: 3px 3px 4px #000;
        -webkit-box-shadow: 3px 3px 4px #000;
        box-shadow: 10px 10px 15px #000;
    }

    #main{
        background-color:#FFFFFF;
        width: 95%;     
        margin-top: 20px;
        border-radius: 15px;        
        height: 90%;                
    }

</style> 
```

**AJAX / JAVASCRIPT 代码**

```
<script language="JavaScript" type="text/javascript">
    function getXmlHttpRequestObject() {
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest(); //Not IE
        } else if(window.ActiveXObject) {
            return new ActiveXObject("Microsoft.XMLHTTP"); //IE
            alert("Your browser doesn't support the XmlHttpRequest object.  Better upgrade to Firefox.");
        }
    }           
    var receiveReq = getXmlHttpRequestObject();     
    function catia() {
        if (receiveReq.readyState == 4 || receiveReq.readyState == 0) {
            receiveReq.open("GET", 'products/product-display-cat.php', true);
            receiveReq.onreadystatechange = handleCat; 
            receiveReq.send(null);
        }           
    }
    function handleCat() {
        if (receiveReq.readyState == 4) {
            document.getElementById('main').innerHTML = receiveReq.responseText;

        }
    }
</script> 
```

**java脚本结束**

**代码**

```
<div id='navi'>
    </br>
    </br>
    <ol>
        <li><details>
            <summary>Products</summary>
            <table align='center'>
                <tr>
                    <td><a href='javascript:cat();'>Catia</a></td>
                </tr>

            </table>                    
        </details></li>
    </ol>
</div> 
```

**HTML 代码结束**

**这是我使用 ajax 调用的原始页面代码**

```
<?php
$result = mysql_query("SELECT * FROM products WHERE ID='6'");                
while($row = mysql_fetch_array($result))                    
{echo"
    <tr><td><img src='image/1361663812.png'></td></tr>

    <tr><td colspan='2'><img src='image/".$row['Logo']."'></td></tr>        

    <tr><td>Product: ".$row['Product']."</td></tr>
":}
?> 
```

**这是原始页面代码的结尾**

在这里非常感谢您提供一些帮助甚至一点帮助，并感谢您的时间和精力！抱歉，我不知道如何正确显示 javascript，再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:25:23.117

没关系，我知道了

```
document.getElementById('img').style.visibility = 'visible';
                    document.getElementById('img').style.display = 'block';
                    document.getElementById('img').src='products/image/1361663812.png'; 
```

在ajax部分之后

# spring - Spring集成通道消息计数

> ID：15059626
> 
> 赞同：0
> 
> 时间：2013-02-25T03:28:02.550
> 
> 标签：spring, integration

我有 2 个问题。他们来了：

1.  有什么方法可以确定在 spring 集成通道中等待处理的消息数量，而客户数量一直在增加？

2.  在应用程序上下文中，我希望能够定义 bean y 的 x 个实例，其中 x 和 y 都从通道 p 消耗，根据负载以编程方式增加或减少消费者。

spring 2gx 中显示了一个示例，但它用于`rabbitmq`确定负载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T22:09:09.093

*   对于 1)，Spring 集成通道就像任何其他 bean 一样只是 bean。假设您使用的是标准可轮询通道，您可以按名称自动连接它，然后获取等待的消息数：

[http://docs.spring.io/spring-integration/api/org/springframework/integration/channel/QueueChannel.html#getQueueSize()](http://docs.spring.io/spring-integration/api/org/springframework/integration/channel/QueueChannel.html#getQueueSize())

如果您愿意，您也可以通过 JMX 进行内省。

*   对于 2)... 为此，您需要在对象池之上使用 AOP 代理，然后将代理连接到（我假设是）Service Activator。这些属性可以使用 PropertyPlaceholderConfigurer 进行外部化。所以，举个例子：

    ```
    <bean id="propertyPlaceholder" 
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="systemPropertiesMode" value="2" />
        <property name="locations" value="classpath:my_config_params.properties" />
    </bean>

    <bean id="myBusinessObjectImpl" class="com.mycompany.whatever.impl.MyServiceImpl"
          scope="prototype" autowire-candidate="false" />

    <bean id="myBusinessObjPool" class="org.springframework.aop.target.CommonsPoolTargetSource">
        <property name="targetBeanName" value="myBusinessObjectImpl" />
        <!-- THIS IS THE KEY.  myconfig.params.poolsize is the name of the property in the my_config_params.properties above. -->
        <property name="maxSize" value="${myconfig.params.poolsize}" /> 
    </bean>

    <bean id="myBusinessObject" class="org.springframework.aop.framework.ProxyFactoryBean">
        <property name="targetSource" ref="myBusinessObjPool" />
    </bean>

    <int:channel id="myInputChannel">
        <int:queue size="500" />
    </int:channel>

    <int:service-activator inputChannel="myInputChannel" ref="myBusinessObject" method="processMessages">
        <int:poller max-messages-per-poll="10" fixed-rate="5000"/>
    </int:service> 
    ```

这也允许您使服务激活器有状态。对象池功能的强制性链接：

[http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/aop-api.html#aop-ts-pool](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/aop-api.html#aop-ts-pool)

# android - android SurfaceHolder.lockCanvas 返回 null

> ID：15059628
> 
> 赞同：4
> 
> 时间：2013-02-25T03:28:21.950
> 
> 标签：android, observers, surfaceholder

我一直在尝试在观察者回调中进行绘制，当我尝试锁定画布时，我总是得到一个空返回。SurfaceHolder 似乎还可以。我添加了一个 SurfaceHolder 回调，它在游戏早期被调用。

这是我的观察者更新方法：

```
// implements Observer
public void update(Observable observable, Object data) {
   Canvas c = null;
   Log.i(TAG, "Surface Observer of CbSurfaceState thread: "
         + Thread.currentThread().getName());
   try {
      synchronized(mCbHolder) {
         c = mCbHolder.lockCanvas(null);
         if(c == null) {
             Log.i(TAG, "lockCanvas returned null");
          } else {
             doDraw(c);
          }
       }
    } finally {
       // do this in a finally so that if an exception is thrown
       // during the above, we don't leave the Surface in an
       // inconsistent state
       if (c != null) {
          mCbHolder.unlockCanvasAndPost(c);
       }
    }
} 
```

这是我在初始化中第一次使用它的地方：

```
public void initCbSurfaceView(Context context) {
   mContext = context;
   // register our interest in hearing about changes to our surface
   mCbHolder = getHolder();
   Log.i(TAG,"got holder");
   mCbHolder.addCallback(cbSurfaceHolderCallback);
   Log.i(TAG,"added callback");
   // initially in preview mode
   mCbHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
   // previewHolder.(SurfaceHolder); Don't know how to replace, but it
   // won't work without the above.
   ...
   mCbSurfaceState.addObserver(this);
   Log.i(TAG, "Creation of CbSurfaceState thread: "
         + Thread.currentThread().getName());
} 
```

我什至在创建表面时再次设置它，（我最近添加它只是为了确定）

```
SurfaceHolder.Callback cbSurfaceHolderCallback = new SurfaceHolder.Callback() {
   @Override
   public void surfaceCreated(SurfaceHolder holder) {
      Log.i(TAG, "In surfaceCreated callback");
      mCbHolder = holder;
   }
   ...
}; 
```

这是一些日志。我打印了线程，因为起初它是从异步线程开始的，我设法避免了这种情况。：

```
02-24 20:31:10.380: I/CbSurfaceView(4013): In surfaceCreated callback

02-24 20:31:10.380: I/CbSurfaceView(4013): SurfaceChanged 854X404

02-24 20:31:10.380: I/CbSurfaceView(4013): initPreview width 854 height 404

...

02-24 20:31:25.974: I/CbTouchListener(4013): onTouch Down x 665.7714 y 194.92023

02-24 20:31:25.974: I/CbSurfaceView(4013): Surface Observer of CbSurfaceState thread: main

02-24 20:31:25.981: I/CbSurfaceView(4013): lockCanvas returned null

02-24 20:31:26.005: I/CbSurfaceView(4013): Surface Observer of CbSurfaceState thread: main

02-24 20:31:26.075: I/CbSurfaceView(4013): lockCanvas returned null 
```

我到底做错了什么？我的 doDraw 一直在工作，直到它开始尝试绘制位图。然后我想从lockCanvas中检查null。

我在这里找到了答案[How to draw an overlay on a surfaceView used by Camera on Android?](https://stackoverflow.com/questions/2933882/how-to-draw-an-overlay-on-a-surfaceview-used-by-camera-on-android) 看来你不能在预览上画画。我得到了一个关于 PUSH_BUFFER 类型表面的异常，所以我将它重置为 NORMAL，这样它就不会抱怨了。我无法锁定预览的表面，如果它不是 NORMAL，它会抛出异常。显然你不能动态地改变表面类型。这可能是它被弃用的原因，但是除非您将其设置为 PUSH_BUFFER，否则相机预览将不起作用。我将在顶部添加另一个非 Surface 视图，用于绘制和渲染拍摄的照片。

感谢您的关注，我希望这对某人有所帮助。

# google-tv - Google TV 以编程方式更改指针点击声音

> ID：15059631
> 
> 赞同：1
> 
> 时间：2013-02-25T03:28:35.743
> 
> 标签：google-tv

我正在为 Google TV (Sony NSZ-GS7) 开发一款游戏，它使用触摸板来移动东西。AFAIK（还）不可能以编程方式更改或禁用指针箭头位图，这从游戏设计的角度来看非常糟糕，是否至少可以禁用设备在每次点击时播放的默认点击声音，这样我就可以用我自己的替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:46:16.967

尝试使用 setSoundEffectsEnabled(false) 禁用标准的 onClick 噪音；

# java - 错误请求 - 来自 Android 模拟器的 SOAP WCF Web 服务的主机名异常无效

> ID：15059634
> 
> 赞同：2
> 
> 时间：2013-02-25T03:28:53.383
> 
> 标签：java, android, .net, wcf, iis

我实现了一个 WCF SOAP 服务（.Net 4），并从 Eclipse 中的 Android 模拟器调用该服务。我的服务作为 Web 应用程序部署在 IIS 7 中。android 上的 Web 服务客户端使用 SOAP 消息执行 HTTP POST。

当我通过 Eclipse 从 android 模拟器调用 Web 服务时，我得到了 FileNotFoundException。错误输入流给了我以下异常：

```
<BODY><h2>Bad Request - Invalid Hostname</h2>
<hr><p>HTTP Error 400\. The request hostname is invalid.</p>
</BODY></HTML> 
```

当我从 wcftestclient 调用我的 SOAP Web 服务时，请求被成功处理。此外，当我从 Android 模拟器客户端使用 Apache common tcpmon 时，成功处理了 SOAP Web 服务请求。

只有当我将 Android 模拟器设置为直接访问 WCF SOAP Web 服务时，我才会收到此异常。我已将 WCF SOAP Web 服务配置为 IIS 中的网站，并通过 IP 地址/端口 ( `http://<myIPAddress>:<myPortNumber>/MyService.svc?wsdl`) 访问它。

我在我的 Android 客户端中设置我的 HttopURLConnection 如下：

```
connection.setRequestProperty("Content-Type", "text/xml;charset=utf-8");
connection.setRequestProperty("SOAPAction", this.getSOAPAction());
connection.setRequestProperty("Host", "base_urlforwebservices like - xyz.net");
connection.setRequestProperty("Accept-Encoding", "None");
connection.setRequestProperty("Connection", "close");
connection.setRequestMethod("POST");
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setRequestProperty("User-Agent", "android"); 
```

我尝试取出`setDoOutput(true)`并`setDoInput(true)`尝试在连接属性中设置授权凭据：

```
connection.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(userCredentials.getBytes(), Base64.DEFAULT)); 
```

它没有任何区别。

在我的 Android.manifest 文件中，我添加了以下设置：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

但这也没有什么不同。

非常感谢您对此的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T21:05:32.373

你从 Visual Studio 运行 WCF 吗？如果是这样，它仅限于本地主机，有两种解决方案：

1.  如果从 Visual Studio 记事本 %USERPROFILE%\My Documents\IISExpress\config\applicationhost.config 并将绑定从 for eaxmpe ":21433:localhost" 更改为 ":21422:" 现在您应该可以从 android (10.0 .2.2)

2.  将 WCF 服务部署到 IIS

3.  mae localhost(pc) 上的代理，并在目标下的 android 运行配置中使用 --http-proxy

# php - Cibonfire 修复面包屑

> ID：15059642
> 
> 赞同：0
> 
> 时间：2013-02-25T03:29:47.953
> 
> 标签：php, codeigniter

我尝试使用 cibonfire 面包屑

`<?php echo breadcrumb(); ?>`

但是，链接将我指向上目录，我有`Object not found!`错误。

如何修复此链接位置？

`http://localhost:8082/admin/content`

这应该是

`http://localhost:8082/ces/admin/content`

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:36:09.117

请参阅[文档](http://cibonfire.com/docs/files2/designers/utilities-txt.html#breadcrumb)。根据文档：

> 面包屑是从当前页面的 URI 段构建的。如果默认 uri 段不适用于您的应用程序中的页面，您可以传递表示 crumbs 的键/值对数组。每对的键是要显示的值，而每对的值代表要传递给它的 url 段。

# c++ - glsl 灯似乎不起作用

> ID：15059645
> 
> 赞同：0
> 
> 时间：2013-02-25T03:30:00.263
> 
> 标签：c++, opengl, glsl

我正在我的应用程序中处理一些基本的照明，并且无法让一个简单的灯工作（到目前为止..）。

这是顶点着色器：

```
#version 150 core

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;
uniform mat4 pvmMatrix;
uniform mat3 normalMatrix;

in vec3 in_Position;
in vec2 in_Texture;
in vec3 in_Normal;

out vec2 textureCoord;
out vec4 pass_Color;

uniform LightSources {
    vec4 ambient = vec4(0.5, 0.5, 0.5, 1.0);
    vec4 diffuse = vec4(0.5, 0.5, 0.5, 1.0);
    vec4 specular = vec4(0.5, 0.5, 0.5, 1.0);
    vec4 position = vec4(1.5, 7, 0.5, 1.0);
    vec4 direction = vec4(0.0, -1.0, 0.0, 1.0);
} lightSources;

struct Material {
    vec4 ambient;
    vec4 diffuse;
    vec4 specular;
    float shininess;
};

Material mymaterial = Material(
    vec4(1.0, 0.8, 0.8, 1.0),
    vec4(1.0, 0.8, 0.8, 1.0),
    vec4(1.0, 0.8, 0.8, 1.0),
    0.995
);

void main() {
    gl_Position = pvmMatrix * vec4(in_Position, 1.0);

    textureCoord = in_Texture;

    vec3 normalDirection = normalize(normalMatrix * in_Normal);
    vec3 lightDirection = normalize(vec3(lightSources.direction));

    vec3 diffuseReflection = vec3(lightSources.diffuse) * vec3(mymaterial.diffuse) * max(0.0, dot(normalDirection, lightDirection));

    /*
    float bug = 0.0;    
    bvec3 result = equal( diffuseReflection, vec3(0.0, 0.0, 0.0) );
    if(result[0] && result[1] && result[2]) bug = 1.0;
    diffuseReflection.x += bug;
    */

    pass_Color = vec4(diffuseReflection, 1.0);
} 
```

这是片段着色器：

```
#version 150 core

uniform sampler2D texture;

in vec4 pass_Color;
in vec2 textureCoord;

void main() {   
    vec4 out_Color = texture2D(texture, textureCoord);

    gl_FragColor = pass_Color;

    //gl_FragColor = out_Color;
} 
```

我在屏幕上渲染一只带纹理的狼作为测试。如果我将片段着色器更改为使用`out_Color`，我会看到狼正确渲染。如果我使用`pass_Color`，我在屏幕上什么也看不到。

`out_Color`这是我在片段着色器中 使用时屏幕的样子：![在此处输入图像描述](../Images/7bc858ea9df933c089e1c1102ec9f715.png)

通过在顶点着色器中取消注释此代码，我知道`diffuseReflection`向量充满了 0：

```
...
/*
float bug = 0.0;    
bvec3 result = equal( diffuseReflection, vec3(0.0, 0.0, 0.0) );
if(result[0] && result[1] && result[2]) bug = 1.0;
diffuseReflection.x += bug;
*/
... 
```

这将使向量的`x`分量变为红色，使狼变红。`diffuseReflection``1.0`

有没有人看到我在这里做错了什么明显的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:05:52.213

正如评论中所建议的，尝试逐步调试。我看到你的着色器可能有很多错误。也许您的 normalMatrix 没有正确传递？也许您的 in_Normal 未映射到适当的输入？也许当您将 lightSources.direction 转换为 vec3 时，编译器正在做一些时髦的事情？也许你的着色器甚至根本没有运行，但你认为它是？也许你有几何或镶嵌单元，但它没有正确传递？

没有人真正有机会正确回答这个问题。至于我，它看起来不错——但同样，上述任何因素都可能发生——而且可能更多。

要调试它，您需要将其分解。正如评论中所建议的，尝试渲染法线。然后，您应该尝试渲染光线方向。然后渲染你的 n dot l 术语。然后乘以您的材料参数，然后乘以您的纹理。一路走来，您会发现问题所在。作为附加提示，将您的透明颜色更改为黑色以外的颜色，以便任何黑色渲染的对象脱颖而出。

值得注意的是，上述建议——分解它——适用于所有调试，而不仅仅是着色器。如我所见，您还没有在这里这样做。

# php - 在 Windows 中运行 cmd 'ipconfig /all' 并获取 Mac 地址？

> ID：15059647
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:30:39.233
> 
> 标签：php, windows, cmd

谁能告诉我在 PHP 上运行或执行命令提示符的最佳方式是什么，或者是否有任何安全的方式来运行“ipconfig /all”并获取设备的物理地址或 Mac 地址。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:47:27.933

此代码段将获取系统上的所有 Mac 地址：

```
<?php

exec("ipconfig /all", $out, $res);

foreach (preg_grep('/^\s*Physical Address[^:]*:\s*([0-9a-f-]+)/i', $out) as $line) {
    echo substr(strrchr($line, ' '), 1), PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:32:17.070

如果您想从 PHP 脚本中执行 shell 命令，您必须使用其中一个函数[`exec`](http://php.net/manual/de/function.exec.php), [`shell_exec`](http://php.net/manual/de/function.shell-exec.php)，[`system`](http://php.net/manual/de/function.system.php)或者[`proc_open`](http://php.net/manual/de/function.proc-open.php)只是反引号运算符 `

在您的情况下，它将类似于：

```
$output = `ipconfig /all`; 
```

# c++ - 扫描图片并检测线条

> ID：15059650
> 
> 赞同：3
> 
> 时间：2013-02-25T03:30:53.503
> 
> 标签：c++, opencv, feature-detection

我的任务如下：“使用具有合适内核的 cvFilter2D 函数来扫描图片，然后只保留 +- 45 度和 +- 60 度的线”。

有人可以给我一些线索，特别是如何计算内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:54:53.997

你需要一点微积分。我假设您想创建一个线路内核。所以你需要知道如何创建一条线。

[http://courses.engr.illinois.edu/ece390/archive/archive-f2000/mp/mp4/anti.html](http://courses.engr.illinois.edu/ece390/archive/archive-f2000/mp/mp4/anti.html)包含大量技术。

最后，对内核中的所有像素求和，并将它们归一化，使它们加起来为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:43:32.377

很抱歉，我答复晚了 ！我已经完成了这个任务！首先，再次感谢您，佩凡诺夫！感谢您的参考链接，我找到了解决问题的方法！这是我的代码：

```
// Image Transforms.cpp : Defines the entry point for the console application.

/*The purpose of this program is to detect lines which are +-45 degree and +- 60 degree from a binary picture.*/
 #include "stdafx.h"
 #include "cv.h"
 #include "highgui.h" 

int _tmain(int argc, _TCHAR* argv[])
{
//IplImage* src = cvLoadImage("C:\\Users\\USER\\Desktop\\black white 1.jpg");
IplImage* src = cvLoadImage("C:\\Users\\USER\\Desktop\\line detection 4.png");

cvNamedWindow("src", CV_WINDOW_NORMAL);
cvShowImage("src", src);    

IplImage* DstSum = cvCreateImage(cvGetSize(src),src->depth, 3);
IplImage* Dst45 = cvCreateImage(cvGetSize(src),src->depth, 3);
IplImage* Dst135 = cvCreateImage(cvGetSize(src),src->depth, 3);
IplImage* Dst60 = cvCreateImage(cvGetSize(src),src->depth, 3);
IplImage* Dst120 = cvCreateImage(cvGetSize(src),src->depth, 3);

/*double Ker0 [] = { -0.1,-0.1,-0.1,-0.1,-0.1,
                0, 0, 0, 0, 0, 0,
                0.2,0.2,0.2,0.2,0.2,
                0, 0, 0, 0, 0, 0,
                -0.1,-0.1,-0.1,-0.1,-0.1
                };
double Ker90 [] = {-0.1,0,0.2,0,-0.1,
                -0.1,0,0.2,0,-0.1,
                -0.1,0,0.2,0,-0.1,
                -0.1,0,0.2,0,-0.1,
                -0.1,0,0.2,0,-0.1
                }; */

double Ker45[]={
                 0,-0.1,-0.1, 0, 0.2,
                -0.1,-0.1, 0, 0.2, 0,
                -0.1, 0, 0.2, 0,-0.1,
                 0, 0.2, 0,-0.1,-0.1,
                0.2, 0,-0.1,-0.1, 0
                };// 45 degree 

CvMat Kernel45=cvMat(5, 5, CV_64FC1,Ker45);

double Ker135[]={
        0.2, 0,-0.1,-0.1, 0,
        0, 0.2, 0,-0.1,-0.1,
        -0.1, 0, 0.2, 0,-0.1,
        -0.1,-0.1, 0, 0.2, 0,
        0,-0.1,-0.1, 0, 0.2
        };// 135 degree 

CvMat Kernel135=cvMat(5, 5, CV_64FC1,Ker135);

double Ker120[] = {0,0,0,0,0,0,0,
                  1/7,0.25/7,0,0,0,0,0,
                  0,0.75/7,0.75/7,0.25/7,0,0,0,
                  0,0,0,0.75/7,0.6/7,0.25/7,0,
                  0,0,0,0,0.4/7,0.75/7,1/7,
                  0,0,0,0,0,0,0,
                  0,0,0,0,0,0,0
                };//120 degree
CvMat Kernel120=cvMat(7, 7, CV_64FC1,Ker120);

double Ker60[] = {0,0,0,0,1/7,0,0,
                  0,0,0,0.25/7,0.75/7,0,0,
                  0,0,0,0.6/7,0.4/7,0,0,
                  0,0,0.25/7,0.75/7,0,0,0,
                  0,0,0.75/7,0.25/7,0,0,0,
                  0,0.25/7,0.75/7,0,0,0,0,
                  0,1/7,0,0,0,0,0
                };//60 degree

CvMat Kernel60=cvMat(7, 7, CV_64FC1,Ker60);

cvFilter2D(src,Dst60,&Kernel60,cvPoint(-1,-1));
cvThreshold(Dst60,Dst60,100,255,CV_THRESH_BINARY);

cvFilter2D(src,Dst120,&Kernel120,cvPoint(-1,-1));
cvThreshold(Dst120,Dst120,100,255,CV_THRESH_BINARY);

cvFilter2D(src,Dst45,&Kernel45,cvPoint(-1,-1));
cvThreshold(Dst45,Dst45,200,255,CV_THRESH_BINARY);

cvFilter2D(src,Dst135,&Kernel135,cvPoint(-1,-1));
cvThreshold(Dst135,Dst135,200,255,CV_THRESH_BINARY);

cvAdd(Dst45,Dst60,DstSum,NULL);
cvAdd(Dst135,DstSum,DstSum,NULL);
cvAdd(Dst120,DstSum,DstSum,NULL);

cvNamedWindow("dst", CV_WINDOW_NORMAL);
cvShowImage("dst", DstSum);

cvReleaseImage(&DstSum);

cvWaitKey(0);

cvReleaseImage(&src);

cvDestroyWindow("src");
cvDestroyWindow("dst"); 

return 0; 
```

}

结果如下： ![在此处输入图像描述](../Images/5d5e9e49efd9a37ec30b030eda5c9533.png)

# pushdown-automaton - 了解下推自动机 (PDA) 中的详细信息

> ID：15059654
> 
> 赞同：0
> 
> 时间：2013-02-25T03:31:13.177
> 
> 标签：pushdown-automaton

我最近被设置了一个任务来创建一个基于我之前创建的有限自动机的下推自动机。（我实际上并没有成功，这就是为什么我的导师给了我一份工作副本）

我无法理解两个图中都包含的部分。

“”第一个是当箭头与一个状态连接但只是指向它时，它的确切含义是什么，我是否认为这是检查预先输入的语言（在我的情况下为 0-9）是否正确（此箭头指向终端状态）""

我已经尝试过进行研究，但不幸的是，我没有想出任何可以用基本术语真正向我解释的东西，我什至尝试过“傻瓜有限自动机”，但仍然没有！我还检查了可能有我的答案但没有的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:22:34.053

如果您指的是像下图中标有“1”的两个箭头这样的循环：

![有限状态机示例](../Images/5c734837ae81ceffb999acc65f253636.png)

那么这些只是正常的状态转换，唯一的特殊方面是下一个状态与前一个状态相同。即，如果我们处于上面的 S_2 状态，那么当输入包含“1”时，我们消耗那些并留在 S_2 中。只有在输入中出现“0”后，我们才会移动到 S_1。

对于您的特定机器，您可能应该在输入包含任何数字（“0-9”）时保持终端状态。

# ruby - Ruby：如何在 Git 存储库中安装插件

> ID：15059659
> 
> 赞同：0
> 
> 时间：2013-02-25T03:32:00.080
> 
> 标签：ruby, ruby-on-rails-3, plugins

我对编程并不陌生，但对 Ruby 来说是全新的。一切正常，但我仍然缺少一个关键概念：如何安装插件以及在何处/如何将其包含在应用程序中？

示例：我正在尝试使用 Facebooker2 插件：[https](https://github.com/mmangino/facebooker2) ://github.com/mmangino/facebooker2 。在自述文件中，第 1 步是“将 facebooker2 作为插件安装在您的 rails 应用程序中”。我已经运行命令 git clone [https://github.com/mmangino/facebooker2.git](https://github.com/mmangino/facebooker2.git)来下载存储库的只读版本。

然后我是否使用 Bundler 将其捆绑起来，或者我是否需要以某种方式创建一个 gem 文件？我是简单地使用 gem 来安装它，还是需要将它编译成 gem？

任何帮助（终端命令或其他）都非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:36:41.493

我查看了回购协议，它被设置为宝石。您可以简单地添加

```
gem 'facebooker2' 
```

到您的 Gemfile（在项目的根目录中）并运行

```
bundle install 
```

下载它并将其添加到您的已安装 gem 列表中，无论是在开发中还是在生产中。

Rails 曾经包含插件的概念（添加到您的 /vendor/plugins 目录中），但它已被放弃以支持 gems。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:18:11.713

如果您是源代码，`source 'https://rubygems.org'`但您需要的 gem 是特定于 github 的，而不是 ruby​​gems.org 库的一部分，那么您可以将 git 方法添加到您的 gemfile 中。您还可以选择特定的分支版本。例如，这里我从分支`cancan`的 github 存储库中提取了 gem。`2.0`

```
gem "cancan", :git => "git://github.com/ryanb/cancan.git", :branch => "2.0" 
```

# ruby-on-rails - :Condition 语句和 Ruby Rails

> ID：15059661
> 
> 赞同：0
> 
> 时间：2013-02-25T03:32:13.850
> 
> 标签：ruby-on-rails, ruby

我正在尝试使这些语句起作用：

```
@all_ratings = ["G","PG","PG-13","R"]
@valid_ratings = params["ratings"]
@movies = Movie.find(:all ,  :conditions => {@valid_ratings[:rating.upcase] => "1"}   ) 
```

但我收到错误：

```
undefined method `to_sym' for nil:NilClass 
```

当我应该得到一场比赛时。

一个示例输入是：

```
"ratings"=>{"PG-13"=>"1"} 
```

我哪里错了？

* * *

更多信息：

该表有标题、发布日期和评分三个字段，非常简单。评级选项在上面的 中进行了说明`@all_ratings`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:35:57.997

它告诉你，你`@valid_ratings`在`nil`

你可能正在尝试这样做？

```
@valid_ratings = Rating.find(params["ratings"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:56:54.760

导轨 3.x：

```
@all_ratings = ["G","PG","PG-13","R"]
@valid_ratings = params["ratings"]
# Is @valid_ratings the same as you example, "ratings"=>{"PG-13"=>"1"}?
# It would be easiest to pass a subset of @all_ratings such that the params
# get converted to something like this: "ratings"=>["G", "PG"]
Movie.where(:rating => valid_ratings).all
# SQL: SELECT * FROM movies WHERE rating IN ('G','PG') 
```

我不确定你想做什么`:rating.upcase`。是否有一个名为 rating 的变量？`:rating`是一个符号。`upcase`不是符号上的方法。

# c# - 长时间运行的阻塞方法。阻塞、睡眠、开始/结束和异步之间的区别

> ID：15059674
> 
> 赞同：3
> 
> 时间：2013-02-25T03:33:39.337
> 
> 标签：c#, blocking, networkstream, thread-sleep

这个问题与设计或模式以及使用哪个无关。这个问题的核心是关于线程和阻塞发生了什么。

此示例适用于旨在连续执行相同操作的任何阻塞方法。在这种情况下，它是对网络流的阻塞读取或写入。关于方法之间的线程和性能，幕后是否有任何明显的差异？

我的假设是下面的每个方法都会创建一个线程或使用一个池化线程。然后阻塞该线程，直到有数据要读取。话虽如此，在这种情况下，这些方法之间的线程、性能和可伸缩性是否有明显差异？

目前我正在创建一个服务器应用程序。此应用程序将有 1000 个客户端创建 tcp 连接。这些连接将保持打开状态，经常发送和接收少量数据。我希望使用模型 A，因为它最容易实现且最易于维护。无论选择哪种模式，我最终都会得到 1000 个线程吗？

请注意，这些方法只是为了给出结构的概念，而不是在没有适当的流式读取、超时和异常处理的情况下使用的东西。

方法 A：阻塞

```
Task.Factory.StartNew(ReadMessage,TaskCreationOptions.LongRunning);
private void ReadMessage()
{
   while(true)
   {
      TcpClient.Read();
   }
} 
```

方法 B：睡觉

```
Task.Factory.StartNew(ReadMessage,TaskCreationOptions.LongRunning);
private void ReadMessage()
{
    while(true)
    {
        if(TcpClient.DataAvailable)
            TcpClient.Read();
        else
            Thread.Sleep(1);
    }
} 
```

方法 C：递归开始/结束

```
private void ReadMessage()
{
      stream.BeginRead(readCallBack)
}
private void readCallBack()
{
      stream.EndRead();
      stream.BeginRead(readCallBack)
} 
```

方法 D：来自 BCL 的异步 socket.ReceiveAsync()

```
private void readCallBack()
{
    while(true)
    {
        await socket.ReceiveAsync(eventArgs);
    }
} 
```

方法 E：具有阻塞读取的异步方法（使用方法 D 调用，但它是一种自定义方法，而不是使用 BCL 中的内置套接字扩展）

```
private async Task<byte[]> ReceiveAsync()
{
   return await Task.Factory.StartNew(() => TcpClient.Read());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:28:54.917

> My assumption is that each of the methods below creates a thread or uses a pooled thread. Then blocks that thread until there is data to be read.

Not at all. Your first two examples block threads, but your second two examples are asynchronous.

Asynchronous methods work by queueing the work to the OS and then waiting for a callback, in this case on an I/O completion port. So while the read is pending, there are no threads being used.

Since asynchronous approaches don't use as many threads, they scale better.

Your last example (`async`) is really just as simple as your first example, and that would be the approach I recommend unless you use Rx or TPL Dataflow. When doing socket communications, by the time you consider error handling such as detection of dropped connections, asynchronous communication is clearly the way to go.

# iphone - 如何创建自定义 iOS 视图

> ID：15059679
> 
> 赞同：0
> 
> 时间：2013-02-25T03:35:01.443
> 
> 标签：iphone, ios, objective-c, uiview

![在此处输入图像描述](../Images/e66eb54052545bd15b566cd8fcef1108.png)

我正在寻找创建一个自定义`UIView`（如上面的 realtor.com 应用程序），所以当用户选择发送电子邮件或类似的效果时，会弹出一个小视图，确认操作然后消失。任何方向、教程或代码片段将不胜感激。另外，我想要做什么的正确术语是什么？请原谅我对这个问题的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:19:15.730

使用`UIActivityIndicator`您可以在此链接中找到的自定义

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

这不是 Apple 特定的控件。您可以创建它们。第一张图片中显示的弹出窗口非常容易制作。您必须使用 3 个控件来制作它。

1)`UIImageView`带有图像的背景。

2) UIActivityIndi​​catory

3）`UILabel`你想显示的任何消息。

`MBProgressHUD`是一个 iOS 插件类，它在后台线程中完成工作时显示带有指示器和/或标签的半透明 HUD。HUD 旨在替代未记录的私有 UIKit UIProgressHUD 并具有一些附加功能.......
**还有更多对您的工作有用的选项，有关更多信息，请转到上面的链接**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:39:13.110

为什么不使用已经可用的东西？看看 ZAActivityBar ( [https://github.com/zacaltman/ZAActivityBar](https://github.com/zacaltman/ZAActivityBar) )，它处理创建类似“toast”的弹出窗口。

它是 CocoaPods 的一部分，因此很容易安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T03:39:31.070

是的，您可以自定义，请按照以下步骤操作

1）将选择器添加到您的 sendEmail 按钮

2）在该选择器功能中创建一个视图，并将您的 emailSent 图像添加为背景

3）现在只需通过 addSubView 将此视图添加到 mainView

或者比上面更好

1）将选择器添加到您的 sendEmail 按钮

2）在该选择器函数中创建一个大小为 480 x320 的 UIControl，并向其中添加一个 imageView，如果您愿意，还可以添加一个确定按钮

3）现在为 UIControl 添加选择器，在该选择器功能中，只需从 sperView 中删除您的视图

4) 现在将 UIcontrol 添加到 mainView

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:35:18.577

在这里你可以找到像android一样显示toast的源代码

[https://github.com/scalessec/Toast](https://github.com/scalessec/Toast)

# asp.net-mvc-4 - 如何在 MVC 4.0 (Razor) 中以表格格式显示产品

> ID：15059680
> 
> 赞同：1
> 
> 时间：2013-02-25T03:35:05.313
> 
> 标签：asp.net-mvc-4

目前我的数据显示在这样的行中

第 1 项 第 2 项 第 3 项 第 4 项 第 5 项

我使用以下代码得到这个结果

```
@using SportsStore.Models.WebUI
@model SportsStore.Models.ProductsListViewModel
@{
    ViewBag.Title = "Products";
}
<div style="padding-left: 300px;">
    <table style="height: 300px; border: 2px; border: 1px solid Red;">
        <tr>
            @foreach (var p in Model.Products)
            {

                <td style="height: 100px; width: 150px; border: 2px">
                    <a href="@Url.Action("Detail", "Product",
        new { id = p.ProductID })">
                        <img alt="@p.ProductDescription" src="@p.Imagename"  width="150" height="150"/>
                        <br />
                        Name : @p.ProductDescription<br />
                        Price : <span>@p.RetailPrice</span> </a>
                </td>

            }
        </tr>
    </table

</div> 
```

**我想显示我的数据**

第 1 项 第 2 项 第 3 项 第 4 项 第 5 项

第 6 项 第 7 项 第 8 项 第 9 项 第 10 项

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:48:15.800

你可以使用 div。首先`width`为外部 div 设置`width`大小，然后设置单元格 div 的大小，`float:left`如下所示。

```
<div style="padding-left: 300px;width:750px;">
    @foreach (var p in Model.Products)
    {
        <div style="height: 100px; width: 150px; float:left;">
            <a href="@Url.Action("Detail", "Product",
    new { id = p.ProductID })">
                <img alt="@p.ProductDescription" src="@p.Imagename"  width="150" height="150"/>
                <br />
                Name : @p.ProductDescription<br />
                Price : <span>@p.RetailPrice</span> </a>
        </div>
    }
</div> 
```

所以，如果你的外部 div`width = 750`和单元格 div`width = 150`那么你有 750/150 = 5 列。因此，它会自动在每行中创建 5 列。

# java - 将预制按钮与预制活动连接起来

> ID：15059682
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:35:07.087
> 
> 标签：java, android, xml, layout, android-activity

我最近在 Google Play Store 上发布了一款由一些开源代码制作的游戏，但我忘记将一些活动连接到几个预制按钮。按钮位于第一个活动中，这是主要活动。按钮的活动也已经完成。如何将按钮连接到活动？

（该游戏是由开源代码制作的，我发布了它以便了解代码是如何工作的）

我需要一步一步的教程，因为我是 android 开发的新手，并且对 java 的经验很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:55:43.043

`Button`您可以通过实现对象`OnclickListener`来触发操作`Button`。

```
Button button = (Button) findViewById(R.id.buttonID);
button.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
      // button was clicked!
   }
  }); 
```

可以通过提供作为参数`Activity`调用来启动。`startActivity()``intent`

```
Intent intent = new Intent(this, ActivityToStart.class);
startActivity(intent); 
```

您可以在他们调用的 OnClickListner 实现中的某处看到`startActivity()`。

参考：

对于屏幕之间的简单导航：[http ://www.androidhive.info/2011/08/how-to-switch-between-activities-in-android/](http://www.androidhive.info/2011/08/how-to-switch-between-activities-in-android/)

# c# - C# 不会 .show() 已经创建的表单

> ID：15059683
> 
> 赞同：0
> 
> 时间：2013-02-25T03:35:10.627
> 
> 标签：c#, forms

试图让 C# 显示已经创建的第二种形式。如果我像这样创建一个新的，它将显示它：

```
 Form bottomForm = new Form();
        bottomForm.Show(); 
```

但是，我预先创建的表单不会提供 .Show() 的选项（该表单是通过“项目 - > 添加 Windows 表单”创建的）

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:37:56.997

尝试这个：

创建 Form2 的实例并调用 ShowDialog() 方法来显示它。使用`ShowDialog()`代替`show()`

```
 Form2 form2= new Form2();
 form2.ShowDialog(); 
```

# r - 绘制不同类型的条形图 ggplot

> ID：15059691
> 
> 赞同：3
> 
> 时间：2013-02-25T03:36:33.147
> 
> 标签：r, ggplot2

[我正在尝试绘制此数据](http://dl.dropbox.com/u/105195130/Coverage_test)的条形图

到目前为止，我编写的 R 脚本如下：

```
library(ggplot2)
f<-read.table("Coverage_test", sep="\t", header=TRUE)
f$Coverage <- factor(f$Coverage, levels=unique(as.character(f$Coverage)))
g = ggplot(data=f, aes(x=Coverage, y=Variable_counts, group=Form, fill=Type)) 
+ geom_bar(position="dodge", stat="identity", colour="black") 
+ facet_grid( ~ Sample_name, scales="free") + opts(title = "Coverage", axis.text.x = theme_text(angle = 90, hjust = 1, size = 8, colour = "grey50")) 
+ ylab("Number of variables") + scale_fill_hue() + scale_y_continuous(formatter="comma")
ggsave("Figure_test_coverage.pdf") 
```

这段代码的输出如下：

![在此处输入图像描述](../Images/f9cf1e5316a1e9262a92579e4fb4fab9.png)

我的问题是：有没有办法显示基于图形的两个变量的行为差异。每个 x 轴变量都有四个条形。我已经选择用“类型”填充颜色，这显示了不同的“类型”（一个变量）在我的数据中的行为方式。但我也想展示变量“表单”在我的数据中的行为。我已将它们分组在我的代码“group=Form”中，但无法在实际图形中区分它（视觉上）。这可以通过显示一个变量的不同颜色和另一个变量的不同线型（实线和虚线）来在线图中完成。如下所示： ![在此处输入图像描述](../Images/645313f9b0d45f816f22560a102df66e.png)。

我想知道“表单”变量是否可以用不同的颜色显示，或者至少可以在它们各自的条形下方或任何可能的地方命名？任何帮助是极大的赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T03:53:54.997

我想你想要这样的东西：

```
ggplot(data=dat, aes(x=Coverage, 
                        y=Variable_counts, 
                         group=interaction(Form,Type), 
                         fill=interaction(Form,Type))) +
 geom_bar(position="dodge", stat="identity", colour="black") 
```

![在此处输入图像描述](../Images/008c67add0b0d43d6178a93ab9940327.png)

**编辑**

由于条形图和 samrt 公式表示法，在这里我会使用格子。为了好玩，我使用 ggplot 之类的主题`latticeExtra`。

```
library(latticeExtra)
barchart(Variable_counts~Coverage|Sample_name,
         groups=interaction(Type,Form),
         data=dat,stack=F,auto.key=list(columns = 4),
         par.settings = ggplot2like(),
         axis = axis.grid,
         between=list(x=2)) 
```

![在此处输入图像描述](../Images/0faa50b3f169695c6216c77c61778ce1.png)

# linux - Linux：使用 * 通配符复制所有包含 word 文件的文件

> ID：15059697
> 
> 赞同：2
> 
> 时间：2013-02-25T03:37:45.470
> 
> 标签：linux, wildcard, cp

我已经为此工作了一夜，但只解决了部分问题。我正在尝试使用 * 通配符将文件名中包含单词 file 的所有文件复制到工作目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:38:48.783

尝试这样做：

```
cp *file* ./work/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:38:57.003

```
cp *file* work/ 
```

这是作业吗？

# c++ - 如果我过早获得窗口句柄，控制台窗口就会出错..？

> ID：15059707
> 
> 赞同：3
> 
> 时间：2013-02-25T03:38:47.093
> 
> 标签：c++, windows, winapi, console, console-application

我正在制作一个必须无边界的控制台应用程序；为此，我更改了控制台窗口样式和窗口区域，如下所示。
在某些时候，我遇到了一个问题，它使控制台窗口的大小通常约为 2x1 个字符，或者有时完全出现错误（不可见的客户区、某些部分为白色、某些部分透明、随机边框等）。
有人告诉我，添加`ShowWindow(hWnd, SW_HIDE);`到它现在所在的行将解决问题。它做了。
现在我想弄清楚为什么问题首先存在，以及是否有其他方法可以防止它？

有人告诉我这个问题可能会发生，因为 Windows 试图在我的程序同时访问窗口属性（位置、样式、大小等）。不过，我不知道这是不是真的。

```
#include <Windows.h>
#include <iostream>
int main()
{
    HANDLE hCon = GetStdHandle(STD_OUTPUT_HANDLE);

    SMALL_RECT srWnd = {0, 0, 1, 1};
    SetConsoleWindowInfo(hCon, 1, &srWnd);
    COORD cBuffSize = {81, 26};
    SetConsoleScreenBufferSize(hCon, cBuffSize);
    srWnd.Top = 0;
    srWnd.Right = 80;
    srWnd.Bottom = 25;
    srWnd.Left = 0;
    SetConsoleWindowInfo(hCon, 1, &srWnd);

    // When the next two lines are moved so that they are the first two lines inside main(), the window gets bugged.
    HWND hWnd = GetConsoleWindow();
    ShowWindow(hWnd, SW_HIDE); // Or if you just remove this line

    RECT rClnt;
    GetClientRect(hWnd, &rClnt);

    SetWindowLong(hWnd, GWL_STYLE, WS_POPUP);
    LONG exStyle = GetWindowLong(hWnd, GWL_EXSTYLE);
    exStyle &= ~(WS_EX_CLIENTEDGE | WS_EX_APPWINDOW);
    SetWindowLongPtr(hWnd, GWL_EXSTYLE, exStyle | WS_EX_TOOLWINDOW);

    rClnt.right += 1;
    HRGN rgnClnt = CreateRectRgnIndirect(&rClnt);
    SetWindowRgn(hWnd, rgnClnt, 1);

    RECT rScrn;
    GetWindowRect(GetDesktopWindow(), &rScrn);
    SetWindowPos(hWnd, HWND_TOPMOST, rScrn.right / 2 - rClnt.right / 2, rScrn.bottom / 2 - rClnt.bottom / 2, 0, 0, SWP_NOSIZE | SWP_FRAMECHANGED);

    ShowWindow(hWnd, SW_SHOW);

    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:50:57.507

这是 Windows 8 的工作示例。但是每次移动/调整大小/恢复控制台时，您都需要刷新窗口区域。

```
#include <windows.h>
#include <tchar.h>
#include <conio.h>
#include <dwmapi.h>

//#pragma comment(lib, "uxtheme.lib")
#pragma comment(lib, "dwmapi.lib")

int _tmain(int argc, _TCHAR* argv[])
{
    HWND hWnd = GetConsoleWindow();
    DWMNCRENDERINGPOLICY policy = DWMNCRP_DISABLED;
    DwmSetWindowAttribute(hWnd, DWMWA_NCRENDERING_POLICY, &policy, sizeof(DWMNCRENDERINGPOLICY));
    //SetThemeAppProperties(0);
    //SetWindowThemeNonClientAttributes(hWnd, STAP_VALIDBITS, 0);
    //SetWindowPos(hWnd, NULL, 0, 0, 0, 0, SWP_NOSIZE | SWP_NOMOVE | SWP_NOZORDER | SWP_FRAMECHANGED);
    //RedrawWindow(hWnd, NULL, NULL, RDW_INVALIDATE | RDW_UPDATENOW);
    RECT rClnt, rWnd;
    GetClientRect(hWnd, &rClnt);
    GetWindowRect(hWnd, &rWnd);
    POINT pt = {0,0};
    MapWindowPoints(hWnd, NULL, &pt, 1);
    OffsetRect(&rClnt, pt.x-rWnd.left, pt.y-rWnd.top);
    HRGN rgnClnt = CreateRectRgnIndirect(&rClnt);
    SetWindowRgn(hWnd, rgnClnt, 1);

    _getch();
    return 0;
} 
```

# c# - StructureMap 异常代码：202 没有为 PluginFamily NServiceBus.IBus、NServiceBus、版本=2.6.0.1504 定义默认实例

> ID：15059709
> 
> 赞同：0
> 
> 时间：2013-02-25T03:38:54.117
> 
> 标签：c#, javascript, json

例如，我的代码有问题，
我想在我的程序中创建 POS，
但是我有消息错误

> StructureMap 异常代码：202 没有为 PluginFamily NServiceBus.IBus、NServiceBus、Version=2.6.0.1504、Culture=neutral、PublicKeyToken=9fc386479f8a226 定义默认实例

这是我的脚本，任何人都可以帮助我，，，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Nancy;
using Nancy.Security;
using dokuku.pos.setting;
using StructureMap;
using NServiceBus;
using dokuku.sales.pos.messages;
using System.IO;
using Nancy.IO;

namespace dokuku.pos.web.modules
{
    public class PosSettingModule : Nancy.NancyModule
    {
        public PosSettingModule()
        {
            this.RequiresAuthentication();
            Post["card/addcard.json"] = p =>
            {
                string addCard = getJson(this.Request.Body);
                try
                {
                    POSCard cards = this.CardService().Insert(addCard, this.CurrentAccount().OwnerId);
                    PublishCardCreated(cards);
                    return Response.AsJson(cards);
                }
                catch (Exception ex)
                {
                    return Response.AsJson(new { error = true, message = ex.Message });
                }
            };

private void PublishCardCreated(POSCard cards)
{
    ObjectFactory.GetInstance<IBus>().Publish(new CardCreated()
    {
        _id = cards._id,
        OwnerId = cards.OwnerId,
        Code = cards.Code,
        Name = cards.Name,
        Cost = cards.Cost,
        Discount = cards.Discount
    });
} 
```

如果我运行此程序并单击创建按钮，系统发送消息错误

> StructureMap 异常代码：202 没有为 PluginFamily NServiceBus.IBus、NServiceBus、Version=2.6.0.1504、Culture=neutral、PublicKeyToken=9fc386479f8a226c 定义默认实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:55:39.970

您需要配置结构图以使用具体实例。这是您设置总线配置的地方。[这个问题](https://stackoverflow.com/questions/14256526/injecting-nservicebus-using-structuremap-without-global-asax)有一个例子

# flash - 从 AVM2 字节码回到动作脚本？

> ID：15059712
> 
> 赞同：0
> 
> 时间：2013-02-25T03:39:22.863
> 
> 标签：flash, bytecode, avm2

我目前有一个解压缩和反编译的 .swf 文件。我一直在寻找有关如何使用 ABC 字节码的教程，但我没有找到太多。是否有可以将其转换回 ActionScript 3 的调试程序？

飞2会这样做吗？或 Adob​​e Flash 投影仪调试器？还是 AS3 巫师？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:59:17.823

一世。您可能正在使用 Alchemy 反编译。但是，“Alchemy”项目现在是 Flash C++ 编译器 (FlasCC)。Adobe 论坛，请参阅有关它的信息。

> Alchemy 是 Adob​​e Systems 的一个研究项目，它允许将 C 和 C++ 代码编译为 ActionScript 虚拟机 (AVM2)，以便它可以在 Flash Player 或 Adob​​e AIR 上运行。这是通过将 C/C++ 代码编译为 LLVM 字节码，然后使用内联 AVM2 字节码将 LLVM 转换为 ActionScript 3 来实现的，然后使用专门的 ActionScript 编译器进行编译。生成的 SWF/SWC 比普通的 ActionScript 代码快得多，但比本机 C++ 代码慢 2 到 10 倍。

Alchemy 站点：[Alchemy](http://labs.adobe.com/technologies/alchemy/)
FlasCC 文档：[FlasCC](http://www.adobe.com/devnet-docs/flascc/README.html)

ii. 另一种方法是使用免费的 swf 反编译器。

[Free_SWF_Decompilers](http://bruce-lab.blogspot.co.il/2010/08/freeswfdecompilers.html)

# java - 从内部类访问父小程序

> ID：15059714
> 
> 赞同：0
> 
> 时间：2013-02-25T03:39:36.040
> 
> 标签：java, oop, applet

我想知道是否有人可以让我知道如何从我在主（小程序）类中创建的对象访问我的主（小程序）类中的对象。消息来源可能会澄清一些事情。通常我会使用访问器，但这是为了简单起见

```
public class Bravo  {

  int copyint;

  Bravo()  {

    // Here I want to access the targetobj's theint from here
    copyint = targetobj.theint;  // I belive this doesn't work 
  }
}

public class Charlie  {

  static int theint;

  Charlie() {

    theint = 7;
  }
}

public class alpha extends JApplet {

  public void init() {

    createApp();
  }

  public void createApp()  {

     Charlie targetobj = new Charlie();
     Bravo askingobj = new Bravo();
  }
} 
```

TYIA-罗兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:42:23.797

看到`static int theint`您已将其声明为静态。所以你不需要使用对象来访问这个变量。您可以只使用`className.variable`，如下所示：

```
Charlie.theint; 
```

如果类对其他类可见，这将起作用。

# java - 使用 Java 访问 JavaScript 对象属性

> ID：15059716
> 
> 赞同：2
> 
> 时间：2013-02-25T03:40:07.120
> 
> 标签：java, javascript, object, properties

这是JS代码：

```
var build_info = new Object;

build_info.BUILD_DISPLAY_VERSION       = "Build 201302232300"; 
```

这是Java代码：

```
 ScriptEngineManager mgr = new ScriptEngineManager();
    ScriptEngine jsEngine = mgr.getEngineByName("JavaScript");
    jsEngine.eval(buildInfoJS);
    buildInfoObj =  jsEngine.get("build_info.BUILD_DISPLAY_VERSION"); 
```

但是， buildInfoObj 返回为 null。

如果我使用`buildInfoObj = jsEngine.get("build_info");`，我会得到一个 sun.org.mozilla.javascript.internal.NativeObject 类的对象，我理解它是一个受限类。

有没有一种简单的方法可以访问我忽略的 build_info.BUILD_DISPLAY_VERSION 属性？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T03:11:24.973

关键是获取javascript对象`build_info`而不是`build_info.BUILD_DISPLAY_VERSION`使用mozilla内部`NativeObject`

下面的代码应该打印出来：

```
BUILD_DISPLAY_VERSION
Build 201302232300 
```

这是源代码（我将语法尽可能设为 Java，但我正在 Groovy 下进行测试）

```
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.SimpleBindings;
import sun.org.mozilla.javascript.internal.NativeObject;

String buildInfoJS = "var build_info = new Object;build_info.BUILD_DISPLAY_VERSION       = 'Build 201302232300'";
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine jsEngine = mgr.getEngineByName("JavaScript");
jsEngine.eval(buildInfoJS);
Object nativeObject = jsEngine.get("build_info");

if (nativeObject instanceof NativeObject) {
    NativeObject nObj = (NativeObject)nativeObject;
    for (String key: nObj.getAllIds()) {
        System.out.println(key);
        System.out.println(nObj.get(key, nObj));
    }
} 
```

参考：这似乎与以下问题有关，尽管对于 Groovy：[How to execute Javascript code from groovy and get the results as a map?](https://stackoverflow.com/questions/6348587/how-to-execute-javascript-code-from-groovy-and-get-the-results-as-a-map)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T04:58:32.810

您将需要查看 jsEngine 实例的[context](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html#getContext%28%29)或[bindings](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html#getBindings%28int%29)属性。

我相信在 jsEngine 上调用“get”只会导致在引擎上设置属性而不是在脚本执行期间设置值。

# jquery - 匹配 id FILTER 的 Jquery Checkbox

> ID：15059717
> 
> 赞同：1
> 
> 时间：2013-02-25T03:40:13.107
> 
> 标签：jquery, filter, replace, prop

```
<div class="posts">
<input id="chkbox_0" type="checkbox" value="chck_0" name="list" style="float:left;height:95px; width:15px;">
<div class="title box " onclick="thisimg(0,252250)">
<div class="click" style="float:right;">
Clicks
<br>
<div id="count_0"> 0 </div>
</div>
</div>
</div>

<div class="posts">
<input id="chkbox_1" type="checkbox" value="chck_1" name="list" style="float:left;height:95px; width:15px;">
<div class="title box " onclick="thisimg(0,252250)">
<div class="click" style="float:right;">
Clicks
<br>
<div id="count_1"> 0 </div>
</div>
</div>
</div>

<div class="posts">
<input id="chkbox_2" type="checkbox" value="chck_2" name="list" style="float:left;height:95px; width:15px;">
<div class="title box " onclick="thisimg(0,252250)">
<div class="click" style="float:right;">
Clicks
<br>
<div id="count_2"> 6 </div>
</div>
</div>
</div>

<div class="posts">
    <input id="chkbox_3" type="checkbox" value="chck_3" name="list" style="float:left;height:95px; width:15px;">
<div class="title box " onclick="thisimg(0,252250)">
<div class="click" style="float:right;">
Clicks
<br>
<div id="count_3"> 0 </div>
</div>
</div>
</div> 
```

我已经为此工作了 7 天，但没有成功，所以我假设我问的问题不正确。所以我想要做的是选中对应于点击元素索引为 0 的框。不是索引 0，而是数字零。除了索引之外，我有 4 个相同的代码片段。有时点击次数大多为零，这很重要。我希望索引的复选框与零点击次数相同。这是我尝试过的：

```
var allZeros = $("[id^=count]:contains(0)").css('color', 'red').each(function(i) {
  $("input:checkbox").trigger('click');
}); 
```

这会检查所有框。

我也试过

```
$("input:checkbox").eq(i).trigger('click');
$("input:checkbox").trigger('click').attr('id'); 
```

两者都使用 allZeros 索引并检查该数量的框。例如，在示例中，我有 3 个全零，因此它选中了前 3 个，但它应该做的是选中前 2 个零，点击 6 次跳过那个并选中第 3 个零。

您可以在此处查看页面：[http](http://www.zyngapokerchipsfree.com/) ://www.zyngapokerchipsfree.com/ 页面 上有 60 到 70 项。我希望这更清楚。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:49:49.833

您可以使用匹配元素的 ID。

```
var $c = $("input[type=checkbox]");

$("div[id^=count]:contains(0)").css('color', 'red').each(function(i) {
    var id = this.id.replace('count', 'chkbox');
    $c.filter('[id="'+ id +'"]').prop('checked', true);
}); 
```

如果您想选择其文本内容只是`0`而不是`10`, `20`, ... 的元素，您可以使用`filter`方法：

```
$("div[id^=count]").filter(function(){
   return $.trim( $(this).text() ) === '0';
}).css('color', 'red').each(function(i) {
    var id = this.id.replace('count', 'chkbox');
    $c.filter('[id="'+ id +'"]').prop('checked', true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:43:10.080

要检查您需要使用的复选框

```
$('checkbox').prop('checked', 'checked') 
```

在你的情况下

```
var allZeros = $("div[id^=count]:contains(0)").css('color', 'red').each(function(){
    var id = $(this).attr('id').substring(6);
    $('#chkbox_'+id).prop('checked', 'checked')
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/wHyqW/)

# jquery-ui - 错误：无法在初始化之前调用对话框上的方法；试图调用方法“打开”

> ID：15059718
> 
> 赞同：0
> 
> 时间：2013-02-25T03:40:17.383
> 
> 标签：jquery-ui, jquery

只是一个小前言......我对jQuery相当陌生，所以如果看起来有问题或多余的东西，请随时提供任何有用的建议。

现在讨论这个问题。我有 2 个从页面上的 2 个单独链接启动的模式。

*   第一个模式是完全没有问题的。这是一个简单的表单，可以回发到同一页面。如果您想知道“关闭：”部分中的项目是什么，它们是我想在对话框关闭时清除其值的表单字段。
*   一旦我添加了第二个，我就遇到了问题。该模态将coldfusion页面调用为模态显示图片。打开第二个后出现问题。我无法从“关闭”按钮关闭第二个模式。我收到以下错误。

*错误：无法在初始化之前调用对话框上的方法；试图调用方法“关闭”*

我必须从模式右上角的“x”关闭它。关闭它后，尝试打开第一个时出现错误。

*错误：无法在初始化之前调用对话框上的方法；试图调用方法“打开”*

这是它的代码。

```
$(document).ready(function() {
    $(".dig").click(function() {
        //based on which we click, get the current values
        var cItemName = $("#checklistItemName").attr( "title");
        var c2id = $("#check2id").attr( "title");
        $("#ItemName").html(cItemName);
        $("#ItemID").html(c2id);
        $("#objCheckItemName").val(cItemName);        
        $("#objCheck2ID").val(c2id);
        console.log(cItemName);
        console.log(c2id);
    }); 
    $( "#image-form" ).dialog({
        autoOpen: false,
        height: 450,
        width: 650,
        modal: true,
        buttons: {
            "Submit": function() {
                $('#mForm').submit();
                return true;
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            $('#defaultSectionName')
                .val('');
            $('#defaultSectionDesc_hidden')
                .val('');
            $('#Photo')
                .val('');
            $('#objCheck2ID')
                .val('');
            $('#Check21')
                .val('');
        },
        zIndex: 500
    }); 
```

下一段代码是我认为问题发生的地方。

```
 $( "#image_trigger" )
        .click(function() {
        $( "#image-form" ).dialog( "open" );
    });
    var dlg=$('#register').dialog({
        title: 'Case Pictures',
        resizable: true,
        autoOpen:false,
        modal: true,
        hide: 'fade',
        width:650,
        height:450,
        buttons: {
            close: function() {
                $( this ).dialog( "close" );
            }
        },
        zIndex: 500
    });
    $('#reg_link').click(function(e) {
        e.preventDefault();
        var linkurl=('assets/includes/modalPictures.cfm' + '?'
            + 'id=' + $("#objCheck2ID").val()
    );
    dlg.load(linkurl, function(){
        dlg.dialog('open');
    });
}); 
```

jQuery 用户界面：1.10.1

jQuery：1.9.1

服务器端：Coldfusion

HTML 相当广泛。如果您需要查看其中的任何部分，请告诉我。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:38:47.993

大写？

```
Close: function() { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T14:37:36.150

您必须在调用 open 函数之前初始化您的 jquery 对话框。

```
<script type="text/javascript">
    $(document).ready(function () {
         initializeDialog();
    });
</script> 
```

并更改您的 js 文件以在 initializeDialog() 函数中包含对话框代码。

```
function initializeDialog(){

    $("#your-dialog-id").dialog({
        autoOpen: false,
        buttons: {
            "Cancel": function() {
                $(this).dialog("close");
            }
        },
        modal: true,
        resizable: false,
        width: 600px,
        height: 400px
    });
} 
```

谢谢@bpjoshi

# c# - 控制不能从一个案例标签转移到另一个案例标签

> ID：15059719
> 
> 赞同：1
> 
> 时间：2013-02-25T03:40:18.237
> 
> 标签：c#, sql

我环顾四周，我已经收集到这意味着中断是无法到达的，但我不明白它是如何无法到达的，或者它试图达到什么。我得到错误的代码如下，也许有人可以告诉我要添加什么以使中断可达：

```
#region :buy <item>

case "buy":
    string Item = stringManager.wrapParameters(args, 1);

    if (Item == "bread") 
    {
        int foodfunds;
        int myfood;
        int foodCheck;
        int creditCheck;
        using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
            foodfunds = dbClient.getInt("SELECT credits FROM users WHERE name = '" + _Username + "'");
        using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
            myfood = dbClient.getInt("SELECT food FROM users WHERE name = '" + _Username + "'");
        if (foodfunds < 10)
        {
            Room.sendData("BK" + "Not enough cash.");
        }
        if (_roomID != 193)
        {
            sendData("BK" + "You must be in the supermarket to buy bread");
        }
        else
        {
            using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
                dbClient.runQuery("UPDATE users SET food = food + 1 WHERE name = '" + _Username + "'");
            using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
                foodCheck = dbClient.getInt("SELECT food FROM users WHERE name = '" + _Username + "'");
            using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
                dbClient.runQuery("UPDATE users SET credits = credits - 10 WHERE name = '" + _Username + "'");
            using (DatabaseClient dbClient = Eucalypt.dbManager.GetClient())
                creditCheck = dbClient.getInt("SELECT credits FROM users WHERE name = '" + _Username + "'");
            Room.sendShout(roomUser, "*Buys a loaf of bread and stashes in bag*");
            Room.sendSaying(roomUser, "(Now have: " + foodCheck + " loaves of bread)");
            Room.sendSaying(roomUser, "(Now have: " + creditCheck + " credits left)");
        }
        if (myfood > 255)
        {
            Room.sendData("BK" + "You cannot carry anymore food!");
        }
        break;
    }
#endregion 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T03:42:57.150

该错误意味着在某些情况下`break;`不会被击中。

具体来说，`if (Item == "bread")`是不对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:44:08.707

最后移到`break`外面`}`。使用您的代码，如果 Item 不是“面包”，`break`则无法到达。

# mysql - 查询中的 Where 子句

> ID：15059723
> 
> 赞同：0
> 
> 时间：2013-02-25T03:40:33.150
> 
> 标签：mysql, sql

我的查询看起来像这样。假设它运行良好。我混淆了**Where**子句的最后一部分。我可以从两个不同的表中写出来吗？..我怎么写呢，因为我想显示那些在那个日期范围内活跃的员工。

```
select d.Division,a.FirstName,
 (select count(h.id) from Department h
  inner join institution i on d.institution_id = i_Id
  ----
  ----
where i.institution_id =d.Id and h. date between @startDate and @endDate) as test

from Division d, inmate a
where d.Active = 1 and a.Active = 1 
```

编辑我已经编辑了我的查询，最终看起来像这样..

```
select d.DivisionName,a.FirstName, (select count(h.id) from InHistory h inner join Institution i on h.Institution_id = i.Id inner join InType it on h.InType_id = it.Id inner join mate a on h.mate_id = a.Id where i.InstitutionRegion_id = d.Id and it.InTypeName like '%Staff%' and h.AdmissionDate between '18/02/2013' and '18/02/2013') as Admission from Division d, mate a where d.Active= 1 and a.Active =1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:41:34.457

您可以在 SQL 查询的 WHERE 中添加任意数量的子句。

看一个例子

```
SELECT *
FROM employee inner join department on
    employee.DepartmentID = department.DepartmentID;
WHERE 
    employee.active = TRUE AND
    department.group = 3 
```

[http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join](http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:05:28.480

是的，您可以在 where 子句中对任意数量的表进行比较，前提是您在 where 子句中给出了有效条件。我认为你应该参考[SQL JOINS](http://www.w3schools.com/sql/sql_join.asp)

# ios - UIView 动画可以用于动画包含的控制器吗？

> ID：15059724
> 
> 赞同：0
> 
> 时间：2013-02-25T03:40:43.420
> 
> 标签：ios, uiviewcontroller, uiviewanimation

我有以下适用于 UIImageView 之类的东西。我不确定 UIView 动画是否适用于包含的控制器？我知道我正在为视图的框架设置动画，但只是不确定这是否/应该工作（下面的代码只是概念验证）。但即使这样做了，以下内容也不起作用。关于为什么不的任何想法？

提前谢谢

**编辑#1** 我添加了一个屏幕截图，其中显示了一个黄色的自定义视图控制器，其中包含短语`holla`。如您所见，下面的代码使框架动画化，而不是该视图控制器的元素。这是故意的吗？有解决方法吗？

```
#import "MyViewController.h"

@interface ViewController ()
  @property (nonatomic, strong) MyViewController *firstIV;
@end

- (void)viewDidLoad
{
  [super viewDidLoad];

  // lets add a few UIImageViews that we will animate
  MyViewController *tmpFirstIV=[[MyViewController alloc] init];
  tmpFirstIV.view.backgroundColor=[UIColor yellowColor];
  tmpFirstIV.view.frame=CGRectMake(10.0f, 10.0f, 100.0f, 100.0f);
  self.firstIV=tmpFirstIV;
  [self addChildViewController:self.firstIV];
  [self.view addSubview:self.firstIV.view];
  [self.firstIV didMoveToParentViewController:self.firstIV];

-(void)updateAction:(id) sender{
  NSLog(@"Here are some results");
  if([self.updateButton.currentTitle isEqualToString:@"update this"]){
     [UIView animateWithDuration:6.0f animations:^{  // yeah I know, long animation
       self.firstIV.view.frame=CGRectMake(10.0f, 10.0f, 100.0f, 0.0f);
     }];
     [self.updateButton setTitle:@"make bigger" forState:UIControlStateNormal];
   }else{
     [UIView animateWithDuration:6.0f animations:^{  // equally long
       self.firstIV.view.frame=CGRectMake(10.0f, 10.0f, 100.0f, 100.0f);
     }];
     [self.updateButton setTitle:@"update this" forState:UIControlStateNormal];
   }
} 
```

![在此处输入图像描述](../Images/b503f836a14ddaf574e724da015893d7.png)

**编辑2**

似乎没有做任何事情......将研究这一层。

-(void)viewWillLayoutSubviews { [super viewWillLayoutSubviews];

```
CGRect viewBounds = self.view.bounds;
self.myLabel.frame = CGRectMake(100.0f,viewBounds.size.height-20.0f,50.0f,50.0f); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:58:47.527

您只是为黄色框的框架设置动画，而不是标签。标签的框架不会因为其父视图的框架发生变化而改变。您要么需要：

1.  编写代码以在点击按钮时为两个对象设置动画
2.  编写代码以在调整框大小时自动移动标签，通常通过覆盖视图控制器的`- (void)viewWillLayoutSubviews`方法。
3.  如果您只针对 iOS 6，则可以使用新的自动布局功能。Ray Wenderlich 有一个[很好的教程](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)。

# mongodb - 为什么 32 位机器上的 mongodb 数据大小限制为 2GB 而不是 4GB？

> ID：15059725
> 
> 赞同：4
> 
> 时间：2013-02-25T03:40:48.663
> 
> 标签：mongodb

正如[这里](http://docs.mongodb.org/manual/faq/fundamentals/#faq-32-bit-limitations)提到的，mongodb 在具有单个 mongod 实例的 32 位机器中将数据大小限制为 2GB。但是我想知道 32 位机器理论上有 4GB 的可寻址空间，mongod 可以使用这 4GB 而不是 2GB 来使用虚拟内存。那么为什么答案是 2GB，而不是 4GB？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T04:28:36.900

4Gb 的可寻址空间与用户应用程序打开的内存映射文件可用的内存空间不同。一些可寻址空间是为操作系统内核和内存映射设备（如显卡）保留的。

例如，32 位 Windows 将用户模式（以及内存映射文件）限制为 ~2Gb RAM，将总系统 RAM 限制为 ~3.5Gb。

如需更多阅读，请参阅：

*   [编码恐怖：伙计，我的 4 GB RAM 呢？](http://www.codinghorror.com/blog/2007/03/dude-wheres-my-4-gigabytes-of-ram.html)
*   [MSDN：管理内存映射文件](http://msdn.microsoft.com/en-us/library/ms810613.aspx)
*   [MSDN：内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

大多数现代桌面和服务器环境在大约十年前开始转向 64 位（请参阅[Wikipedia 上的 64 位操作系统时间线](http://en.wikipedia.org/wiki/64-bit#64-bit_operating_system_timeline)），因此这不是实际上影响部署的限制。

您只想在数据有限的开发环境中使用 32 位 MongoDB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:43:53.367

> 32 位 MongoDB 进程限制为大约 2 GB 的数据。这让许多习惯于不必担心这一点的人感到惊讶。原因是 MongoDB 存储引擎使用内存映射文件来提高性能。
> 
> 通过在 32 位上不支持超过 2gb，我们能够使我们的代码更加简单和整洁。这大大减少了错误的数量，并减少了我们发布 1.0 产品所需的时间。

[http://blog.mongodb.org/post/137788967/32-bit-limitations](http://blog.mongodb.org/post/137788967/32-bit-limitations)

# php - 输出 XML 文件，不保存

> ID：15059728
> 
> 赞同：0
> 
> 时间：2013-02-25T03:41:51.793
> 
> 标签：php, xml

我希望能够创建一个 XML 文件，向其中添加节点等，然后将其输出到屏幕而不保存。

```
$bookxml = new DOMDocument('1.0', 'utf-8'); 
```

是我创建 XML 文件的方式，但是无论如何我都无法在屏幕上显示 XML 文件而不保存它。

但是，即使在保存时我也有输出问题，这是我的行

```
echo $bookxml->save("testing.xml"); 
```

所有这些都是返回新创建的 XML 的文件大小，而不是内容。

任何帮助都会很棒，我对此完全感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:45:22.157

您正在寻找的是[saveXML](http://php.net/manual/en/domdocument.savexml.php)，另外您可以使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)对 xml 进行编码，以便您可以在浏览器显示中看到它。

```
echo htmlspecialchars($bookxml->saveXML()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:45:25.470

你想要的是`saveXML`方法，而不是`save`方法：

[http://us3.php.net/manual/en/domdocument.savexml.php](http://us3.php.net/manual/en/domdocument.savexml.php)

# facebook-graph-api - 什么是用户/external_edge

> ID：15059730
> 
> 赞同：1
> 
> 时间：2013-02-25T03:42:01.413
> 
> 标签：facebook-graph-api, permissions

什么是用户/外部边缘？在我的 facebook 应用中心。在应用程序->我的 Ninja->Insights->Activity & Errors 上，我看到我的应用程序请求这么多。这是百分百失败，因为权限。我应该为我的应用程序设置什么权限？ [http://developers.facebook.com/docs/reference/login/extended-permissions/](http://developers.facebook.com/docs/reference/login/extended-permissions/) [http://developers.facebook.com/docs/reference/login/open-graph-permissions/](http://developers.facebook.com/docs/reference/login/open-graph-permissions/)

我无法通过之前给出的两个 url 找到任何许可。

# .net - 与他人分享我的脚本的最佳地点？

> ID：15059731
> 
> 赞同：-4
> 
> 时间：2013-02-25T03:42:03.977
> 
> 标签：.net, powershell, vbscript, sharing

有人会推荐一个网站（或多个网站），在那里人们可以分享他们编写的、他们认为可能对其他人有帮助的脚本吗？有这么多，这么多看起来已经不复存在了，我很犹豫随便挑一个。我的脚本主要是 PowerShell，偶尔会混入 VBS 或 .NET。

终于达到了 Advanced Scripting Padewan 的水平，我想我已经准备好与整个社区分享我的一些工作了。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:44:40.770

GitHub gist 是分享代码片段的好地方。如果您的脚本很小，您可以选择一个。或者只是在 GitHub 上创建一个开放的存储库。

# ios - 录制和播放 .wav 文件 IOS 的问题

> ID：15059733
> 
> 赞同：1
> 
> 时间：2013-02-25T03:42:16.627
> 
> 标签：ios, ios5, ios6

我一直面临录制音频并在 IOS 上播放的问题。

这是我用于录制的内容：

```
 AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSettings = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                      [NSNumber numberWithFloat: 16000.0],AVSampleRateKey,
                      [NSNumber numberWithInt: kAudioFormatLinearPCM], AVFormatIDKey,// kAudioFormatLinearPCM
                      [NSNumber numberWithInt:8],AVLinearPCMBitDepthKey,
                      [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                      [NSNumber numberWithBool:NO],AVLinearPCMIsBigEndianKey,
                      [NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,
                      [NSNumber numberWithInt: AVAudioQualityLow],AVEncoderAudioQualityKey,
                      nil];

    recorderFilePath = [[NSString stringWithFormat:@"%@/%@", filePath, fileName] retain];
    NSLog(@"recorderFilePath: %@",recorderFilePath);
    NSURL *audioFileURL = [NSURL fileURLWithPath:recorderFilePath];

    recorder = [[ AVAudioRecorder alloc] initWithURL:audioFileURL settings:recordSettings error:&err];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        [alert release];
        return;
    }

    //prepare to record
    [recorder setDelegate: self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;
    [recorder record]; 
```

并且在具有上述设置的 .wav 文件中录制对我来说效果很好。现在，问题在于回放。

下面是播放录制的 .wav 音频文件。

```
 NSURL * url = [NSURL fileURLWithPath:filePath];
    audioPlayer = [[[AVAudioPlayer alloc] initWithContentsOfURL:url
                                                  error:&err] autorelease];
    if (! audioPlayer) {
        NSLog(@"Sound named '%@' had error %@", name, [err localizedDescription]);
    } else {
        [audioPlayer prepareToPlay];  // Getting the return value NO here.
    }
   // audioPlayer.volume = 1; // Tried setting different values, but of no help.
   [audioPlayer play];  // Getting the return value NO here. 
```

它没有抛出任何错误，但它什么也不做。没有声音正在播放。虽然可以使用播放器播放“.mp3”文件（资源中的测试文件），但播放使用上述设置录制的文件是个问题。

我不确定我在这里缺少什么。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:22:19.857

AFAIK Apple 的 iOS 不支持播放 .wav 格式，因为它是主要为 windows 媒体开发的格式。WAV（Windows Audio Video）是一种不压缩文件的媒体格式。甚至 iPad 上的默认音乐播放器也不播放 wav 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:08:29.327

问题解决了。

我错过了在播放文件之前停止录音机。

```
[recorder stop]; 
```

在播放前添加上述语句后修复了该问题。

# java - 模式匹配 Java 正则表达式 - “一个或多个”运算符

> ID：15059740
> 
> 赞同：10
> 
> 时间：2013-02-25T03:43:24.990
> 
> 标签：java, regex

Java的正则表达式中如何使用“一个或多个”运算符？例如，我想匹配这个：

( (a) (b) (c) ) - 匹配

( (a) ) - 匹配

其中 a,b,c 是任何字符或数字

此表达式的基本描述是一组括号内的括号组，其中包含由一个空格分隔的所有组

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T03:47:19.253

你想要类似的东西 `\((\(\w*\))+\)`

为了更清楚它是如何工作的，请在视觉上扩展一下：

```
\(    # outer bracket
(     # start of group
\(    # inner bracket
\w*   # 0 or more word characters ([0-9a-zA-Z_])
\)    # inner bracket
)     # end of group
+     # and we do that group 1 or more times
\)    # outer bracket 
```

解释：如果你申请 * 或 + 或 ? 对于刚刚在（未转义）括号中的内容，然后将其应用于括号的全部内容而不是仅应用于一个元素。

[每当我遇到正则表达式问题时，我都会在http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)中查找

# php - 每秒加载图像

> ID：15059742
> 
> 赞同：1
> 
> 时间：2013-02-25T03:44:01.057
> 
> 标签：php, javascript, ajax

我有一个 PHP 页面，它在另一个页面上调用一个 JavaScript 函数，以便加载 60 个图像中的一个（每秒 1 个）。每个图像的名称中都有一个数字（即 1-60），当用户按下按钮时，加载的图像对应于按下按钮时的第二个图像。

我有返回当前秒数的 JavaScript 页面，但我似乎无法引用正确的图像名称。这是 JavaScript 语法问题还是应该通过 Ajax 单独捕获“秒”变量：

```
<img src=<?php echo image-1.jpg' ) ?> id="imageX" />
<div id="mySec">Seconds</div>
<button type="button" onclick="myFunction_1()">Function_1</button>

<script>
    function myFunction_1() {
        var d = new Date();
        var x = document.getElementById("mySec");
        x.innerHTML=d.getSeconds();
        var z = d.getSeconds();
        document.getElementById("imageX").src="<?php echo 'image-' . "z". '.jpg' ?>" ;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T05:01:23.420

尝试：

```
<img src="image-1.jpg" id="imageX" /> 
```

和：

```
<script>
    function myFunction_1() {
        var d = new Date();
        var x = document.getElementById("mySec");
        var z = d.getSeconds();
        x.innerHTML = z + ' Seconds';
        document.getElementById("imageX").src = 'image-' + z + '.jpg';
    }
</script> 
```

根本不需要 PHP。

# c - Unix C - 将标准输出重定向到管道然后回到标准输出

> ID：15059744
> 
> 赞同：4
> 
> 时间：2013-02-25T03:44:10.400
> 
> 标签：c, unix, pipe, stdout

我不确定是否可以完成以下操作，因为我无法通过 Google 找到任何问题/结果。我想将 fork() 的标准输出更改为管道，然后将其更改回正常的标准输出。

这就是我所拥有的：

第一个可执行文件：

```
int main()
{
      int fd[2]; //Used for pipe
      int processID;

      if(pipe(fd) == -1)
      {
            printf("Error - Pipe error.\n");
            exit(EXIT_FAILURE);
      }

      if((processID = fork()) == -1)
      {
            fprintf(stderr, "fork failure");
            exit(EXIT_FAILURE);
      }

      if(processID == 0)
      {
           int newFD = dup(STDOUT_FILENO);

          char newFileDescriptor[2];

          sprintf(newFileDescriptor, "%d", newFD);

          dup2 (fd[1], STDOUT_FILENO);

          close(fd[0]);

          execl("./helloworld", "helloworld", newFileDescriptor, NULL);
      }
      else
      { 
          close(fd[1]);

          char c[10];

          int r = read(fd[0],c, sizeof(char) * 10);

          if(r > 0)
               printf("PIPE INPUT = %s", c);
      }
} 
```

你好世界

```
int main(int argc, char **argv)
{
      int oldFD = atoi(argv[1]);

      printf("hello\n"); //This should go to pipe

      dup2(oldFD, STDOUT_FILENO);

      printf("world\n"); //This should go to stdout
} 
```

期望的输出：

```
world
PIPE OUTPUT = hello 
```

实际输出：

```
hello
world 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:48:32.707

尝试改变

```
 printf("hello\n"); 
```

到

```
 printf("hello\n");
  fflush(stdout); 
```

这里的问题是缓冲。出于效率原因，文件句柄在写入时并不总是立即产生输出。相反，它们在内部缓冲区中累积文本。

有三种缓冲模式，无缓冲、行缓冲和块缓冲。无缓冲句柄总是立即写入（stderr 无缓冲）。行缓冲句柄等到缓冲区已满或`'\n'`打印换行符 ( ) （如果 stdout 引用终端，则为行缓冲）。块缓冲句柄等到缓冲区已满（如果标准输出不引用终端，则它是块缓冲的）。

当您的 helloworld 程序启动时，stdout 进入管道，而不是终端，因此它被设置为块缓冲。因此 printf 调用只是将文本存储在内存中。由于缓冲区没有变满，它只在标准输出关闭时才被刷新，在这种情况下，当程序退出时会发生这种情况。

但是当程序退出时，文件描述符 1 (stdout) 已恢复为引用父级的原始标准输出，而不是管道。因此，缓冲的输出最终被写入原始标准输出。

`fflush`强制缓冲文本立即写入。

# objective-c - UITextView 边界之外的文本

> ID：15059748
> 
> 赞同：1
> 
> 时间：2013-02-25T03:45:00.150
> 
> 标签：objective-c, cocoa-touch, uitextview, quartz-core

在我的 iOS 应用程序中，我试图向`UITextView`使用 QuartzCore 添加阴影，但最终文本滚动到了边界之外`UITextView`：

![在此处输入图像描述](../Images/ff737ffc73883be1da276b4da526eca0.png)

我尝试在[Text scrolls outside the UITextView box boundary](https://stackoverflow.com/questions/7607907/text-scrolls-outside-of-the-uitextview-box-boundary)使用解决方案，但是没有一个解决方案有效。当我将第一个解决方案放在方法中时`textView.contentInset = UIEdgeInsetsZero;`，它绝对没有任何作用。第二种解决方案摆脱了我要添加的阴影：.`UITextView``viewDidLoad``[textView setClipsToBounds:YES];`

这是我用来创建阴影的 Quartz Core 代码：

```
textView.layer.masksToBounds = NO;
textView.layer.shadowOffset = CGSizeMake(-1, 1);
textView.layer.shadowRadius = 3;
textView.layer.shadowOpacity = 0.3; 
```

我究竟做错了什么？这是iOS中的错误吗？如果是这样，是否有任何解决方法或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:41:22.013

您可以使用它来获取内容大小：

```
textView.frame = CGRectMake(0, 0, textView.contentSize.width, textView.contentSize.height); 
```

# python - 定期将 DBase (dbf) 文件导入 MySQL 表的最佳方法是什么？

> ID：15059749
> 
> 赞同：0
> 
> 时间：2013-02-25T03:45:10.043
> 
> 标签：python, mysql, dbf, dbase

DBF 文件每隔几个小时更新一次。我们需要将新记录导入 MySQL 并跳过重复项。我对 DBF 文件没有任何经验，但据我所知，我们正在使用的一些文件没有唯一 ID。

如果没有现成的实用程序可以做到这一点，我计划使用 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:01:03.037

DBF 格式是在 30 多年前开发的，当时典型的 PC 曾经有 640K 的 RAM。它很容易阅读，早在我为它编写了一个 Autocad 数据库驱动程序的那天（是的，我已经老了）。基本上，您所要做的就是创建一些 C 结构并将它们从磁盘加载/转储到磁盘。

有一个[用于读取 DBF 文件的 Python 库](https://pypi.python.org/pypi/dbf/)，我不时使用它，因为 Shapefiles（一种流行的 GIS 数据格式）通常包含一个 DBF 文件。

例子：

```
>>> from dbf import Table
>>> placenames = Table('PLCNAM.DBF', codepage='cp1252')
>>> placenames.open()
>>> for place in placenames:
...     print(place.count, place.name)
41   Springfield
26   Clinton
25   Madison
24   Franklin
... 
```

也许你想看看这个项目：http: [//sourceforge.net/projects/dbfconverter/](http://sourceforge.net/projects/dbfconverter/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T14:19:56.470

当您说您正在使用 dBase 时，我认为您可以访问 (.) 点提示符。

在点提示符处将 .dbf 文件转换为带分隔符的文本文件。

在 MySql 中使用必要的命令将分隔的文本文件重新转换为 MySql 数据文件。我不知道它的实际命令。所有 DBMS 都会有命令来完成这项工作。

为了消除重复，您必须在通过用 dBase 编写的程序将数据填充到 .dbf 文件时执行此操作。

# c++ - 通过 getline() w/c++ 从 .dat 检索文件

> ID：15059753
> 
> 赞同：1
> 
> 时间：2013-02-25T03:45:35.540
> 
> 标签：c++, file-io

我在 Code Review Beta 上发布了这个，但注意到那里的活动要少得多。

我有以下代码，它工作得很好。它的功能是从文件中获取输入并将其显示出来（以确认它已被抓取）。我的任务是编写一个程序，计算在输入文件中找到某个单词（字符串）“abc”的次数。

将输入存储为字符串还是数组/向量并单独存储每一行​​是否更好？a[1]、a[2] 等？也许有人还可以向我指出一个资源，我可以使用它来学习如何过滤输入数据。

谢谢。

```
input_file.open ("in.dat");
while(!input_file.eof()) // Inputs all the lines until the end of file (eof).
{
    getline(input_file,STRING); // Saves the input_file in STRING.
    cout<<STRING; // Prints our STRING.
}
input_file.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:41:05.233

将尽可能多的文件读入内存总是比一次读一个字母或文本行更有效。磁盘驱动器需要很长时间才能启动并重新定位到一个扇区。但是，如果您可以最大限度地减少从文件中读取的次数，您的程序将运行得更快。

内存搜索速度很快。

我的建议是读取整个文件，或者尽可能多地读入内存，然后在内存中搜索“单词”。请记住，在英语中，单词可以有连字符“-”和单引号“don't”。如果单词被分割成一行或包含缩写（带句点），单词识别可能会变得更加困难。

祝你好运。

# iphone - 如何将两个 xib 文件添加到我的 AppDelegate 以支持 iPhone 屏幕尺寸？

> ID：15059755
> 
> 赞同：1
> 
> 时间：2013-02-25T03:45:46.663
> 
> 标签：iphone, xcode, xib, retina-display, appdelegate

我遇到了 iPhone 5 屏幕尺寸的问题。我创建了**两个 xib 文件**（**MainWindow.xib**和**MainWindowiPhone5.xib**），以便我的应用程序支持两种屏幕尺寸。

我一直在尝试在我的 AppDelegate.m 上对其进行编码，但它不起作用。

这是我的 AppDelegate 代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
    UIStoryboard *storyBoard;

    CGSize result = [[UIScreen mainScreen] bounds].size;
    CGFloat scale = [UIScreen mainScreen].scale;
    result = CGSizeMake(result.width * scale, result.height * scale);

    if(result.height == 1136){
        storyBoard = [UIStoryboard storyboardWithName:@"MainWindowiPhone5" bundle:nil];
        UIViewController *tabBarController = [storyBoard instantiateInitialViewController];
        [self.window.rootViewController = self.tabBarController];
    }
}

return YES;

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Override point for customization after application launch.
// Set the tab bar controller as the window's root view controller and display.
self.window.rootViewController = self.tabBarController;
tabBarController.moreNavigationController.navigationBar.tintColor = [UIColor blackColor];
[self.window makeKeyAndVisible];
return YES; 
```

}

如何让两个 xib 都在我的代码上工作？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:07:54.193

条件应该是::

对于 iPhone-4S 或更旧的屏幕：

```
 if ([[UIScreen mainScreen] bounds].size.height == 480)
 {
   ---- Your Code ----
 } 
```

iPhone-5 屏幕：

```
 if ([[UIScreen mainScreen] bounds].size.height == 568)
 {
   ---- Your Code ----
 } 
```

希望...它可能对您有所帮助。
谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:28:30.163

在初始化中添加此代码：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
     if([UIScreen mainScreen].bounds.size.height == 568.0)){
             //move to your iphone5 storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
     else{
             //move to your iphone4s storyboard
             [UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)];
  }
} 
```

# c++ - substr C++ 的多个元素

> ID：15059756
> 
> 赞同：1
> 
> 时间：2013-02-25T03:45:49.353
> 
> 标签：c++, line, substr

我正在研究一个需要我获取一行前两个元素的子字符串的函数。

> char 那些 = line.substr(0,1);

当我运行程序时，它只需要第一个元素，就是这样。

你能告诉我我做错了什么吗？

另外，我如何告诉 C++ 从索引中获取以下元素直到行尾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:47:57.467

第二个参数是[要采用的元素数量，而不是包含索引](http://en.cppreference.com/w/cpp/string/basic_string/substr)。

# xcode - 显示特定于 NSString 值的图像

> ID：15059757
> 
> 赞同：0
> 
> 时间：2013-02-25T03:46:04.167
> 
> 标签：xcode, xcode4, nsstring, nsnumber

如果调用了特定值，我正在尝试发布特定图像，我的理解是这不起作用，因为 NSNumber 没有正确转换为 NSString，但我不确定这是否是问题。通过使用NSLog，我看到数据是通过的，比如一个评分是4.5，这样的话我想显示四星半，但是图片不贴。我已经验证了视图已链接，并且所有内容都已连接，但没有骰子。代码如下。反馈非常感谢！

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    [self setString];

    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
    NSString *string1 = [dic objectForKey:@"name"];
    NSString *string2 = [[dic objectForKey:@"rating"]stringValue];

    NSLog(@"RATE STRING ---> %@", string2);

    if (string2 == @"0")
    {
        UIImage *img = [UIImage imageNamed:@"zerorate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"1")
    {
        UIImage *img = [UIImage imageNamed:@"onerate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"1.5")
    {
        UIImage *img = [UIImage imageNamed:@"onehalfrate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"2")
    {
        UIImage *img = [UIImage imageNamed:@"tworate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"2.5")
    {
        UIImage *img = [UIImage imageNamed:@"twohalfrate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"3")
    {
        UIImage *img = [UIImage imageNamed:@"threerate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"3.5")
    {
        UIImage *img = [UIImage imageNamed:@"threehalfrate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"4")
    {
        UIImage *img = [UIImage imageNamed:@"fourrate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"4.5")
    {
        UIImage *img = [UIImage imageNamed:@"fourhalfrate.png"];
        [imageView2 setImage:img];
    }
    if (string2 == @"5")
    {
        UIImage *img = [UIImage imageNamed:@"fiverate.png"];
        [imageView2 setImage:img];
    }
        [[self myTableView] reloadData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:48:08.760

的值`string2 == @"0"`未定义。试试`if ([string2 isEqualToString:@"0"])`。

此外，您可能会考虑在您返回的值之后命名您的 png 文件。然后你可以这样做：

```
UIImage *img = [UIImage imageNamed:string2];
[imageView2 setImage:img]; 
```

如果这不能解决问题，那么`po string2`在调试器中会发生什么？当你`po img`设置之后会发生什么，当你设置时会发生什么`po imageView2`？

# java - 如何在 Drools 5.5 中指定列表的类型？

> ID：15059758
> 
> 赞同：2
> 
> 时间：2013-02-25T03:46:19.807
> 
> 标签：java, generics, drools, rules

我们的规则基于 v4.x，现在我们正在迁移到 v5.5。看来此版本是类型安全的，因此以下代码将无法正常工作：

```
$contractualBalances : ArrayList() from accountService.getContractualBalances($id, $cmounts) 
```

现在当我们有这个 forall 语句时，它不起作用，因为上面的 ArrayList 没有指定类型：

```
ContractualBalance() from $contractualBalances 
```

谁能帮助我如何指定类型。我尝试使用 ArrayList() 但没有运气

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:04:39.023

我解决了这个问题：

```
$contractualBalances : ContractualBalance() from accountService.getContractualBalances($id, $cmounts) 
```

# php - 如何将敏感数据安全地存储在 MySQL 数据库中？

> ID：15059761
> 
> 赞同：15
> 
> 时间：2013-02-25T03:47:02.257
> 
> 标签：php, security, encryption

我正在为我工​​作的公司提出就业申请。我有它来防止 SQL 注入和一些 XSS 技术。我的主要问题是保证敏感信息的安全，比如 SSN 和地址，因为公司需要这些信息来制作 1099 表格以用于销售人员的税金。

我不知道如何做这部分，但我应该加密所有内容，然后在它进入 MySQL 数据库时解密它吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T04:09:44.923

这是一个过于简化的答案，应该持保留态度，因为大多数关于安全的答案：

*   到处使用 SSL。

*   使用安全的加密密钥

对于加密数据的存储，您可以使用`BLOB`字段，并使用 MySQL 的[内置加密函数](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)。例子：

```
update mytable set myfield = AES_ENCRYPT('some value', SHA2('your secure secret key', 512)); 
```

如果您更喜欢在应用程序代码中进行加密/解密，请查看 PHP 的[Mcrypt](http://www.php.net/manual/en/book.mcrypt.php)函数。

*   加密用户输入
*   存储在数据库中
*   获取后解密

这绝不是一个完整的指南，但它是一个开始，总比什么都不做要好。

您可以在[https://security.stackexchange.com/上了解更多信息](https://security.stackexchange.com/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-19T14:46:03.770

带有键的 SQL 查询（正如 Wesley Murch[建议](https://stackoverflow.com/a/15059949)的那样）不是一个好主意。如果你这样做：

```
update mytable set myfield = AES_ENCRYPT('some value', 'your secure secret key'); 
```

...并且查询被记录（inst 的慢日志。）您的安全密钥以纯文本形式捕获，这永远不会发生。当您运行类似`SHOW PROCESSLIST`.

下一个问题在哪里存储安全密钥？在 PHP 文件中？它又是纯文本。

**加密数据：**

使用私钥/公钥加密（[http://en.wikipedia.org/wiki/Public-key_cryptography](http://en.wikipedia.org/wiki/Public-key_cryptography)）。PHP 对它有很好的支持。

*   公钥可以与用户一起存储在数据库中，它是公开的。
*   私钥可以用用户密码加密。当用户登录时，您解密私钥并将其存储在他的 cookie 中（如果您使用 SSL，这不是那么糟糕的地方）或会话。两者都不完美，但比 php 文件中的纯文本更好。
*   使用公钥加密，私钥解密。
*   只有用户才能访问他的数据。

如果想了解更多，可以google“用户控制加密”或“零知识隐私”。

**SQL 插入/XSS：**

最好的保护是安全的应用程序。毫无疑问。如果你想保护它，你可以使用 for inst PHP IDS 来检测攻击： [https ://github.com/PHPIDS/PHPIDS](https://github.com/PHPIDS/PHPIDS)

我有很好的经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:08:41.470

正如评论中所暗示的那样，您提出了一个很大的问题。您将需要研究一些单独的问题：

*   SQL 注入以及如何防止它
*   XSS 以及如何预防它
*   使用 SSL 加密提交的表单数据
*   在数据库中存储敏感信息的最佳实践

很难在一个答案中解决所有这些问题。我建议在此站点上对上述主题进行一些搜索。

# javascript - Angularjs ngResource'@id'

> ID：15059764
> 
> 赞同：4
> 
> 时间：2013-02-25T03:47:59.953
> 
> 标签：javascript, ruby-on-rails-3, routes, angularjs

我有一个快速的问题。在 Angular js 中，'@id' 来自哪里（比如哪个对象）来自 rails 应用程序的以下代码？

```
var User = $resource("/users/:id", {id: '@id'}); 
```

我知道它设置了默认 ID。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T07:11:12.740

从 AngularJs[文档](http://docs.angularjs.org/api/ngResource.%24resource)：

> “如果参数值以 @ 为前缀，则该参数的值将从数据对象中提取（对非 GET 操作有用）。”

这意味着当调用非 GET 操作（如 POST）时，您可以将 id 作为调用中包含的数据对象的字段之一传递。

# android - 检查文件是否已在 Android 中写入

> ID：15059766
> 
> 赞同：0
> 
> 时间：2013-02-25T03:48:11.647
> 
> 标签：android, file, file-io

我有一个关于 Android 编程的问题。基本上，我不确定在哪里检查我的文件在哪里，以及我是否正确写入。我想找到文件的位置，我也想知道我是否正确地写入它。下面是我想出的代码：

```
String lsNow = "testing";
try {
    fos = openFileOutput("output.txt", Context.MODE_APPEND);
    fos.write(lsNow.getBytes());
    fos.close();
}
catch{
...
} 
```

我在哪里可以找到 output.txt？可能有人知道如何检查这一切吗？如果是这样，那就太好了！顺便说一句，我正在使用模拟器。如果我要在真正的 Android 上执行此操作，还有一种方法可以解决这个问题吗？（仅供参考）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:07:26.553

你用两种方式测试它

1.  使用文件资源管理器

    转到 DDMS 透视图-> 打开文件资源管理器-> 文件的位置

2.  务实地使用`exits()`方法

    文件文件=新文件（context.getFilesDir（），文件名）；如果（文件。存在（））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:23:37.500

使用`openFileOutput(...)`意味着该文件将被写入 Android 设备上的内部存储中，该区域是安全的，不会被其他应用程序访问。

如果要确保正确写入文件，请确保您的`catch`块处理任何失败（如果调用它，则文件写入失败）。

要在文件写入后访问文件，请使用`openFileInput(...)`.

# c - 在C中为3d数组赋值

> ID：15059769
> 
> 赞同：0
> 
> 时间：2013-02-25T03:48:58.650
> 
> 标签：c

我有2个数组如下 -

```
int **data; 
int ***count; 
```

进行一些分析后，我想做以下任务-

```
count[i][j][k] = data[i][j]; 
```

但是，我不断收到分段错误，我认为这与一些指针分配问题有关 - 谁能建议我如何进行此分配？

- data[i][j] = 0/1/2 的典型值。

ZALLOC的定义：

```
#define ZALLOC(item,n,type)      if ((item = (type *)calloc((n),sizeof(type))) == NULL)    fatalx("Unable to allocate %d unit(s) for item\n",n)

// memory assignment
int **data; 
int nrow, ncol; 

ZALLOC(data, ncol, int *);

for (index = 0; index < ncol; index++)
{
    ZALLOC(data[index], nrow, int);
}

int g=0, index1=0, index2=2;
data[index1][index2] = g;

int ***count;
int dim1 = 100, dim2 = 1, dim3=2;
ZALLOC(count, dim1, int **);

for (i = 0; i < dim1; i++)
{
ZALLOC(count[i], dim2, int *);
for (j = 0; j < dim2; j++)
{
ZALLOC(count[i][j], dim3, int);
}
}

// Initialize
for (i = 0; i < dim1; i++)
{
    for (j = 0; j < dim2; j++)
{
    for (k = 0; k < dim3; k++)
    {
        count[i][j][k] = 0;
    }
}
}
// Assignment
count[0][1][2] = data[1][2]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T05:28:41.993

您的分配组织有点奇怪。如果您有 3 个维度（我们称它们为级别、行和列），您通常会分配空间来保存级别，然后对于每个级别，您将为级别内的行分配空间，最后您将分配行内列的空间。

您的代码似乎从中间（行）开始；然后在层次上做一些工作；最后在列。

这段代码完全重写了你的代码，但它可以正常工作而不会崩溃。我还没有用 ; 验证它`valgrind`。我需要升级这台机器上的版本。

```
#include <stdio.h>
#include <stdlib.h>

#define ZALLOC(item, n, type) if ((item = (type *)calloc((n), sizeof(type))) == NULL) \
                                  fatalx("Unable to allocate %d unit(s) for item\n", n)

static void fatalx(const char *str, size_t n)
{
    fprintf(stderr, "%s: %zu\n", str, n);
    exit(1);
}

static int ***alloc_3d(int levels, int rows, int cols)
{
    int count = 0;
    int ***array_3d;
    ZALLOC(array_3d, levels, int **);
    for (int i = 0; i < levels; i++)
    {
        int **data;
        ZALLOC(data, rows, int *);
        array_3d[i] = data;
        for (int j = 0; j < rows; j++)
        {
            int *entries;
            ZALLOC(entries, cols, int);
            array_3d[i][j] = entries;
            for (int k = 0; k < cols; k++)
            {
                array_3d[i][j][k] = count++;
            }
        }
    }
    return array_3d;
}

static void print_3d(int ***a3d, int levels, int rows, int cols)
{
    for (int i = 0; i < levels; i++)
    {
        printf("%d:\n", i);
        for (int j = 0; j < rows; j++)
        {
            printf("   %d:  ", j);
            for (int k = 0; k < cols; k++)
                printf(" %3d", a3d[i][j][k]);
            putchar('\n');
        }
    }
}

static void free_3d(int ***a3d, int levels, int rows)
{
    for (int i = 0; i < levels; i++)
    {
        for (int j = 0; j < rows; j++)
            free(a3d[i][j]);
        free(a3d[i]);
    }
    free(a3d);
}

int main(void)
{
    int d1 = 3;
    int d2 = 5;
    int d3 = 7;
    int ***a3d = alloc_3d(d1, d2, d3);

    print_3d(a3d, d1, d2, d3);
    free_3d(a3d, d1, d2);

    return(0);
} 
```

输出：

```
0:
   0:     0   1   2   3   4   5   6
   1:     7   8   9  10  11  12  13
   2:    14  15  16  17  18  19  20
   3:    21  22  23  24  25  26  27
   4:    28  29  30  31  32  33  34
1:
   0:    35  36  37  38  39  40  41
   1:    42  43  44  45  46  47  48
   2:    49  50  51  52  53  54  55
   3:    56  57  58  59  60  61  62
   4:    63  64  65  66  67  68  69
2:
   0:    70  71  72  73  74  75  76
   1:    77  78  79  80  81  82  83
   2:    84  85  86  87  88  89  90
   3:    91  92  93  94  95  96  97
   4:    98  99 100 101 102 103 104 
```

# php - 循环未按我希望的方式运行

> ID：15059773
> 
> 赞同：0
> 
> 时间：2013-02-25T03:49:13.577
> 
> 标签：php, loops, foreach

不知道我是否可以举例说明...

好吧，我现在在这里运行循环来检查学生# 和电子邮件我使用了 $error_check = 0 和 $error_check ++ 来考虑是否有错误。如果存在则将显示错误并将某些内容打印到 error.log 如果没有，则 .txt 文件之类的内容将打印出来并打印内容

但我刚刚意识到脚本只有在我的 .txt 文件的第一行有错误时才能正常运行，或者如果我的 .txt 文件中的第二行以上内容有错误，那么正确的消息将打印出来第一行内容和错误消息也会打印出来。

但是我当然希望它运行脚本，即使第一行内容没有错误并且其他一些行有错误，那么只会打印错误消息。

我认为这应该是关于我将脚本放在循环中的位置，但不知何故我一直在阅读我的脚本，不知道我应该改变什么......

```
else  //else file exist then.......else #1
{
    $fileContents = file("./courses/" . $_GET["filename"]);  //calls out the file into $fileContents[] array....so $fileContents[0] is like the first row of the contents

$datePrinted = false;  //setting a flag first so the date will be print only once when there's error..being used later in the foreach loop

$error_message = false;  //setting a flag so error message only show once and being used later in the foreach loop

$well_formed = false;  //another flag  to stop the looping message saying the file is correctly formed

$table = false;

$error_check = 0;

sort($fileContents);

foreach($fileContents as $row)  //the contents will be then seen as $row
{
    $column = preg_split("/,/", $row);  //splits the row by , and name each array as $column
    $error_log = fopen("./courses/path/error.log","a+") or die ("File can not be opened");  //creates/open an error.log file

    if(!(isEmailAddressWellFormed($column[3])) || !(isStudentNumberWellFormed($column[0])))  //two functions calls from page4.php using preg_match to check email and student# validation
    //if one of them do not validate the following will start
    {
        $error_check++;
        if(!$error_message)  //if this is false then the error message+link will show
        {
        echo "Errors have been found in " . $_GET['filename'] . "<br/><a href='./courses/path/error.log'>Click here for the log</a>";
        $error_message = true;  //since this is in a loop but doesn't need to print it out so many times so changing the value here to true so when this loop runs again if(!error_message) will not run again
        }
        if(!$datePrinted)  //works as how error_message works.  the date only print once by here
        {
        fwrite($error_log, date("F t, Y (h:i:s a)") . PHP_EOL);
        $datePrinted = true;
        }

        if(!(isEmailAddressWellFormed($column[3])))  //checks again if the email is not valid then print the follow to error.log
        {
        fwrite($error_log, "Improper email address from" . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($error_log, "$column[2] $column[1] $column[3]" . PHP_EOL);
        }
        if(!(isStudentNumberWellFormed($column[0])))  //checks again if the student # is not valid then print the follow to error.log
        {
        fwrite($error_log, "Improper student numbers from" . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($error_log, "$column[2] $column[1] $column[0]" . PHP_EOL . "\n");            
        }
    }

    elseif($error_check == 0)
    {

        if(!$well_formed)
        {
            echo "<h1 style='color: red'>" . $_GET["filename"] . " is well formed.</h1>";
            echo "<table>";

            $well_formed = true;
        }

                echo $column[0];
                echo $column[1];
                echo $column[2];
                echo $column[3];

    }

}//closing foreach
        fwrite($error_log, str_repeat("-",80) . PHP_EOL);  //puts a line to separate the next error but each time the page runs this line will print even if there's no error
        fclose($error_log);

                    if(!$table)
        {
            echo "</table>";
            $table = true;
        }

}//closing else #1 
```

提前感谢人们的帮助......谢谢......

我添加了

```
$row = $column[0] . $column[1] . $column[2] . $column[3]; 
```

在 preg_split 之后的 foreach 开头，然后在底部我改为...

```
 elseif($error_check == 0)
    {

        $row.=$row;
    }

}//closing foreach
        fwrite($error_log, str_repeat("-",80) . PHP_EOL);  //puts a line to separate the next error but each time the page runs this line will print even if there's no error
        fclose($error_log);

    if($error_check == 0)
        {

            echo "<h1 style='color: red'>" . $_GET["filename"] . " is well formed.</h1>";
            echo "<table>";
            echo $row;
            echo "</table>";

        }

}//closing else #1

?> 
```

但现在它只打印出内容中的第二行 Oo 目前只有三行内容进行测试....我在这里遗漏了一些小东西吗？

# c++ - 在自定义图形类型上使用 boost::push_relabel 算法

> ID：15059775
> 
> 赞同：3
> 
> 时间：2013-02-25T03:49:22.220
> 
> 标签：c++, boost-graph

我的图表有以下声明

```
struct vertex_info 
{
  std::string name;
  std::string label;    
  unsigned int type;
  bool isND; 
};

struct edge_info 
{
  std::string name;
  long capacity;
  long residualCapacity;
  long rev;
};

typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS
  , vertex_info, edge_info > expr_graph_t; 
```

我已经构建了一个`flowG`带有`source`和`sink`节点的图（流网络）。现在我想使用`push_relabel`boost 图形库中给出的方法计算最大流量。我正在调用该函数，如下所示。

```
 push_relabel_max_flow(flowG, source, sink
      , get(&edge_info::capacity, flowG)
      , get(&edge_info::residualCapacity, flowG)
      , get(&edge_info::rev, flowG)
      , get(boost::vertex_index, flowG)
      ); 
```

编译器 (g++) 正在生成长错误消息（[粘贴在此处](http://pastebin.com/Zn9zn3px)）。我怀疑我无法将正确类型的映射传递给函数。函数签名[在 boost-doc](http://www.boost.org/doc/libs/1_53_0/libs/graph/doc/push_relabel_max_flow.html)中可用。

文档中给出了许多示例，但他们使用的图表与我的不同。我无法更改图形声明，否则很多代码会中断。我不习惯提升`property_map`概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:10:16.303

该解决方案归功于 llonesmiz。

问题是`reverse_edge_map`需要一个带有 key_type=`edge_descriptor`和 value_type=的属性映射，`edge_descriptor`而我使用的那个有 value_type= `long`。我宣布`rev`为`adjacency_list_traits<vecS,vecS,bidirectionalS>::edge_descriptor`. 它编译认为我生成了一个段错误，我认为这是函数逻辑而不是函数原型的问题。

# delphi - 是否有用于跨平台使用的 MulDiv 功能？

> ID：15059778
> 
> 赞同：6
> 
> 时间：2013-02-25T03:49:44.717
> 
> 标签：delphi, cross-platform, delphi-xe3

谁能帮我找到一个单元，它定义了[`MulDiv`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383718%28v=vs.85%29.aspx)Delphi XE3 中用于跨平台使用的功能？它的原型是在 Windows 单元中定义的（通常），这在 OSX 下显然不起作用。

[`MulDiv`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383718%28v=vs.85%29.aspx)Delphi XE3有跨平台使用功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T11:33:46.347

没有[`MulDiv`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383718%28v=vs.85%29.aspx)跨平台使用的功能，只有从Windows导入的功能。所以，如果你需要，你需要自己为不同的平台制作这样的功能。例如 Lazarus 为此使用类似的代码：

```
function MathRound(AValue: Extended): Int64; inline;
begin
  if AValue >= 0 then
    Result := Trunc(AValue + 0.5)
  else
    Result := Trunc(AValue - 0.5);
end;

function MulDiv(nNumber, nNumerator, nDenominator: Integer): Integer;
begin
  if nDenominator = 0 then
    Result := -1
  else
    Result := MathRound(Int64(nNumber) * Int64(nNumerator) / nDenominator);
end; 
```

来源[`lcltype.pp`](https://github.com/graemeg/lazarus/blob/master/lcl/lcltype.pp#L2702)单位和问题[`#0009934`](http://bugs.freepascal.org/view.php?id=9934)。

# google-app-engine - 无法计算“deviceinfoendpoint”导入

> ID：15059780
> 
> 赞同：0
> 
> 时间：2013-02-25T03:49:55.560
> 
> 标签：google-app-engine

我一直在这里遵循这些说明：

[https://developers.google.com/eclipse/docs/endpoints-addentities](https://developers.google.com/eclipse/docs/endpoints-addentities)

但我无法计算出这些进口：

```
import com.testproject.deviceinfoendpoint.Deviceinfoendpoint;
import com.testproject.deviceinfoendpoint.Deviceinfoendpoint.Builder;
import com.testproject.deviceinfoendpoint.model.DeviceInfo; 
```

那些在 Eclipse 中给出错误。他们在哪里？为什么它们不出现在我的项目中？当我按照我链接的网站上的设置说明进行操作时，是否应该生成它们？

在这种情况下，“testproject”是我的项目的名称。

如果有人能告诉我这里发生了什么，我将不胜感激。几天来我一直在努力解决这个问题，这让我发疯了。

谢谢， 雅罗姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:18:40.683

通过右键单击 App Engine 项目并选择 Google > Generate Cloud Endpoint Client ... 为 App Engine 项目生成 Cloud Endpoint 客户端库...然后它就可以工作了

每次添加新端点或修改现有端点的字段或方法时，都必须重复此操作。

# malware - 在拆包中，您是否找到了 Aspack 2.12 的 ECX 值或 ESP 值？

> ID：15059782
> 
> 赞同：4
> 
> 时间：2013-02-25T03:49:59.843
> 
> 标签：malware

我正在自学如何进行恶意软件分析。在尝试分析在 USB 驱动器上发现的恶意文件时，我注意到该恶意软件包含 Aspacker 2.12 (PEiD)。我以前从来没有遇到过 Aspack，快速的谷歌搜索让我看到了这个视频：[http](http://www.youtube.com/watch?v=I3QeEqC4-jE) ://www.youtube.com/watch?v=I3QeEqC4-jE 这家伙说要找到 ECX 寄存器来找到原始条目观点。

另一个谷歌搜索让我在一个名为 tuts4you 的网站上找到了另一个教程（我无法发布链接，因为你需要下载文件才能查看教程）但是这个人说要找到 ESP 寄存器和 EDI 寄存器并完全按照一样。

他们都使用 ollydbg 和 import REC，看来教程显示的内容完全相同——即找到用于解压 ASpack 的 OEP。

由于我是新手，有人介意解释哪个是正确的，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T11:40:17.173

希望这个问题不会过时......有更多方法可以完成这项任务。您可以按照上述教程中的步骤操作或尝试其他方式（通常取决于打包程序版本/选项等）。要提及另一种方法，请尝试在打包的可执行文件中找到以下说明：

```
6800000000   push 0
C3           retn 
```

将此`push 0`指令设置断点并运行可执行文件。该指令将在打包程序代码执行期间被修改，并且`0`(DWORD 0x000000) 将被替换为原始入口点的地址 (DWORD)（因此该指令看起来像`push 00451000`示例）。

一旦执行，OEP 的地址将被压入堆栈，随后的`ret`指令将把它作为返回地址，执行应该继续......因此将`EIP`（指令指针）设置为原始入口点。

要搜索这些说明，我建议使用一些十六进制编辑器或 HIEW32...搜索以下十六进制模式： `6800000000C3`

# php - 如果之前设置了会话名称，则增加它

> ID：15059786
> 
> 赞同：0
> 
> 时间：2013-02-25T03:50:29.957
> 
> 标签：php, session

我正在尝试创建一组会话，这些会话仅存储通过复选框勾选的项目数量。这些项目需要分组，并且都来自同一个表单。

假设我勾选了 3 个框，那么 `group_selection_1`应该创建一个名为 3 的会话。然后我回到同一个表单，这次选择 5 个复选框，然后`group_selection_2`将值设为 5。

我很难想到如何实现这一目标。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:02:19.127

```
// get all sessions
$sessions = $_SESSION;

if (!empty($sessions)) {
    // loop and check the session keys
    foreach ($sessions as $key => $value) {

        // match group_selection_* (* = any digits)
        if (preg_match('/group_selection_(?<num_key>\d)/im', $key, $matches)) {

            // session group_selection_* is existed
            if (isset($matches['num_key'])) {
                $increment = $matches['num_key'] + 1;
                $_SESSION['group_selection_' . $increment] = 'new thing...';
            } else {
                // not existed
                $_SESSION['group_selection_1'] = 'something....';
            }
        }
    }
} 
```

# bnf - 将 EBNF 转换为 BNF 基础知识

> ID：15059790
> 
> 赞同：2
> 
> 时间：2013-02-25T03:50:51.790
> 
> 标签：bnf, ebnf

我不太确定如何回答我的计算机语言课的问题。我要将以下语句从 EBNF 形式转换为 BNF 形式：

EBNF：`expr --> [-] term {+ term}`

我知道花括号中包含的表达式将重复零次或多次，而直角括号中包含的内容代表零个或一个选项。如果我的理解是正确的，这是否是正确的转换？

我的 BNF：

```
expr --> expr - term
       | expr + term
       | term 
```

## 奖金阅读

*   [将 EBNF 转换为 BNF](https://stackoverflow.com/questions/2466484/converting-ebnf-to-bnf) *（一般规则）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T06:48:16.930

我不认为这是正确的。事实上，我不认为 EBNF 实际上是有效的 EBNF。[如何将 BNF 转换为 EBNF](https://stackoverflow.com/questions/14922242/how-to-convert-bnf-to-ebnf)问题的答案显示了有效的 EBNF 是如何构造的，引用自 ISO/IEC 14977:1996，扩展巴科斯-瑙尔形式标准。

我认为表达式：

```
expr --> [-] term {+ term} 
```

应该写成：

```
expr = [ '-' ] term { '+', term }; 
```

这意味着一个表达式由一个可选的减号组成，后跟一个`term`，然后是一个零序列，多个加号和 a 出现`term`。

下一个问题：您针对的是 BNF 的哪种方言？这里的事情变得棘手；有很多方言。但是，这是一种可能的翻译：

```
<expr> ::= [ MINUS ] <term> <opt_add_term_list>

<opt_add_term_list> ::= /* Nothing */
     | <opt_add_term_list> <opt_add_term>

<add_term> ::= PLUS term 
```

其中 MINUS 和 PLUS 是终端（用于“-”和“+”）。这是一个非常严格但最小的 BNF。另一种可能的翻译是：

```
<expr> ::= [ MINUS ] <term> { PLUS <term> }* 
```

其中`{ ... }*`部分表示零个或多个包含的模式`...`（`PLUS <term>`在本例中如此）。或者您可以使用带引号的字符：

```
<expr> ::= [ '-' ] <term> { '+' <term> }* 
```

因此，可能的替代方案清单还在继续。你必须查看你被赋予工作的 BNF 的定义，如果它是 ISO 标准 EBNF，你应该抱怨你得到的非常草率的 EBNF。如果它只是一些称为 EBNF 的随机 BNF 风格的语言，我想它只是令人困惑的名称。私人方言只要有定义就可以，但不熟悉方言的人不可能知道正确答案是什么。

# c++ - c++以相反的顺序逐行传输文件

> ID：15059794
> 
> 赞同：0
> 
> 时间：2013-02-25T03:51:22.517
> 
> 标签：c++

我有这段代码应该以相反的顺序逐行将文件传输到另一个文件中。但是它不起作用。也许我忘了添加一些东西：

```
while(cnvFile.good()) {
    getline(cnvFile, cnvPerLine);

    reverseFile << cnvPerLine;
    reverseFile.seekp(0, ios::beg);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:05:26.150

当您寻找开头并尝试写入时，您不是在*插入*数据，而是在*覆盖*数据。一个简单的（尽管可能远非最佳）解决方案将类似于：

```
std::string reversedContents
while (getline(inFile, line)) {
    // This actually *appends* to the beginning, not overwriting
    reversedContents = line + "\n" + reversedContents; // manually add line breaks back in
}

// now write reversedContents to a file... 
```

# r - 如何通过R中的素食包计算空模型下的棋盘格分数（C分数）

> ID：15059797
> 
> 赞同：0
> 
> 时间：2013-02-25T03:51:31.607
> 
> 标签：r, vegan

我最近想按照空模型方法下的棋盘分数来计算`pvalue`本文采用的共现分析“使用网络分析探索土壤微生物群落中的共现模式”。

不幸的是，本文没有很好地描述 vegan 包的命令和参数的使用。

我相信R中必须有一些素食包专家在空模型下根据棋盘分数进行这种共现分析。

任何人都可以帮助我使用脚本或命令和参数来计算 R 中空模型下的 C 分数吗？

这个 C 分数的东西会给我一个矩阵`pvalue`，我可以用它来表示共现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:39:10.900

我想这可能会回答你的问题：

```
library(vegan)

library(bipartite)

null.model <- oecosimu(species, bipartite::C.score, "swap", burnin=100, thin=10, statistic="evals", nsimul=10000) #where species is you species by sites matrix

print(null.model) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:50:54.597

这应该可以快速估计 C 分数

```
library(vegan)
library(bipartite)
C.score(species, normalise=T, FUN=mean, na.rm=T)->cscore.speciesN
C.score(species, normalise=F, FUN=mean, na.rm=T)->cscore.speciesS
cscore.speciesN
cscore.speciesS 
```

# javascript - 如何使用javascript获取或赋值给gridview中的隐藏字段？

> ID：15059799
> 
> 赞同：0
> 
> 时间：2013-02-25T03:52:20.360
> 
> 标签：javascript, asp.net, gridview

```
<ItemTemplate>
   <asp:TextBox ID="txtReviewM" OnChange="javascript:HandlerCodeTextChange(this); 
         Text='<%# Bind("ch_slcode") %>' runat="server" Width="100%" Columns="50" 
         AutoPostBack="true"> </asp:TextBox>
   <asp:HiddenField ID="hidempCode" runat="server" />
   <asp:HiddenField ID="hidempName" runat="server" />
   <ajaxtoolkit:autocompleteextender id="aceHandler2" runat="server" 
        targetcontrolid="txtReviewM"   usecontextkey="true" completionsetcount="10" 
        completioninterval="500" enablecaching="false"  minimumprefixlength="1" 
        servicemethod="GetEmployee" firstrowselected="true" 
        completionlistcssclass="AutoExtender"
        completionlistitemcssclass="AutoExtenderList" 
        completionlisthighlighteditemcssclass="AutoExtenderHighlight">
   </ajaxtoolkit:autocompleteextender>
</ItemTemplate> 
```

这是我的 Javascript 函数

```
function HandlerCodeTextChange(txtBox) {
   if (txtBox.value.indexOf(':') == "-1") {
      txtBox.value = "";
      txtBox.focus();
      document.getElementById('<%=hidempCode.ClientID%>').value = "";
      document.getElementById('<%=hidempName.ClientID%>').value = "";
   }
   else {
      var code = txtBox.value.split(':');
      document.getElementById('<%=hidempCode.ClientID%>').value = code[0];
      document.getElementById('<%=hidempName.ClientID%>').value = code[1];
   }
} 
```

在javascript中找不到隐藏字段，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:23:54.540

使用跨度标记的魔力。它具有这个令人垂涎的功能，当页面由 ASP.Net 呈现时，它的 id 不会被破坏。用这样的跨度标记夹住你的隐藏字段

```
<ItemTemplate>
  <span id='SpanHid'>
   <asp:HiddenField ID="hidempCode" runat="server" />
  </span>   
</ItemTemplate>
  <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="GetHidden();" /> 
```

**准系统 JavaScript**

```
 <script type="text/javascript">

        function GetHidden()
        {

         var elm = document.getElementById("SpanHid");
            if (elm!==null)
            {

              var hiddenfield = elm.children[0].id;
              //do stuff with it
              }

          }

    </script> 
```

如果您考虑使用 Jquery，那么您会喜欢这一款

```
 <script type="text/javascript">
   function GetHidden()
       {
        var hiddenfield=$('#SpanHid >input');
           //then do stuff with it
        }
       </script> 
```

您如何调用 GetHidden() 将取决于您的逻辑。

# c - 如何从字符串中获取线？

> ID：15059800
> 
> 赞同：2
> 
> 时间：2013-02-25T03:52:23.607
> 
> 标签：c

我正在尝试从字符串（char *）中逐行读取。我试图根据我在网上阅读的内容来实现它，但它不起作用。我编写了此测试代码以使其在我的项目代码之外工作，但它仍然无法正常工作（第一次 readline 调用时出现段错误）。

提前感谢您的帮助！

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

static void parse_message(char *message);
static void readline(char *message, char *line, int *counter);

int main(int argc, char *argv[]){

    printf("starting\n");

    char *message1 = "Chat {\nHey what's up do you like zebras?\n}\n";

    parse_message(message1);

    printf("Finished\n");
    return EXIT_SUCCESS;
}

static void parse_message(char *message){
    char *line = (char *) malloc (50 * sizeof(char));
    int *counter = 0;

    readline(message, line, counter);//read in first line

    if(strcmp(line, "CHAT {") == 0){
        readline(message, line, counter); //read in message
        printf("%s",message); //print message
        readline(message,line,counter); //read in close bracket
    } else{

        printf("Error occurred\n");
    }

}

static void readline(char *message, char *line, int *counter){

    int index = 0;
    while(message[*counter] != '\n'){
        line[index] = message[*counter];
        counter++;
        index ++;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:28:10.437

有几个错误。

在 parse_message 中，您应该将“message”与“CHAT {”进行比较。此外，strcmp 不会返回 0，因为这两个字符串不相同。请改用 strncmp。

int *counter=0 表示指针为 0。您应该只使用“int”并传递计数器的地址。

在 readline() 中，您需要 null 终止字符串。*counter++ 应该是 (*counter)++。否则，您将增加指针而不是指针的内容。

```
static void parse_message(char *message) {
    char *line = (char *) malloc (50 * sizeof(char));
    int counter = 0;
    char *startline = "Chat {";
    if(strncmp(message, startline, strlen(startline)) == 0){
        readline(message, line, &counter); //read in message
        printf("%s",message); //print message
        readline(message,line,&counter); //read in close bracket
    } else{
        printf("Error occurred\n");
    }
}

static void readline(char *message, char *line, int *counter){
    int index = 0;
    while(message[*counter] != '\n'){
        line[index] = message[*counter];
        (*counter)++;
        index ++;
    }
    line[index] = 0;
} 
```

# cakephp - cakephp：单个代码行或块以允许所有经过身份验证的用户执行操作

> ID：15059801
> 
> 赞同：0
> 
> 时间：2013-02-25T03:52:24.123
> 
> 标签：cakephp, authentication, cakephp-2.0, acl, cakephp-2.1

我正在使用蛋糕 2.x

我也在使用 Auth 和 Acl 组件。

我想允许对所有登录用户执行单个操作。

但这导致我多次编写此代码，然后运行 ​​initDB。

```
public function initDB() {
    $group = $this->User->Group;
    //Allow ADMINISTRATORS to everything
    $group->id = ADMINISTRATORS;
    $this->Acl->allow($group, 'controllers');

    //allow SALES_MANAGERS to upload SOW file at `products`
    $group->id = SALES_MANAGERS;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Pages');

    //allow SOLUTION_ARCHITECTS to only add and edit on posts and widgets
    $group->id = SOLUTION_ARCHITECTS;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Pages');

    //allow IMPLEMENTATION_MANAGERS to only add and edit on posts and widgets
    $group->id = IMPLEMENTATION_MANAGERS;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Pages');

    //we add an exit to avoid an ugly "missing views" error message
    echo "all done";
    exit;
} 
```

正如您所注意到的，我需要允许 Pages 访问所有不同的组。

我更喜欢类似于 Auth->allow 的简单方法，它始终允许所有登录用户执行某些操作。

谢谢你。

**更新**

这是我的解决方法。有更好的解决方案吗？

```
public function initDB() {
    $group = $this->User->Group;

  ... // didn't want to repeat this part which  is same as above.

  // we allow all groups the following actions
    $onlyForLoggedInUsers = array(
        'controllers/Users/logout',
        'controllers/Pages',
    );
    $this->_allowAllGroupsThisAction($onlyForLoggedInUsers);

    //we add an exit to avoid an ugly "missing views" error message
    echo "all done";
    exit;
}

protected function _allowAllGroupsThisAction($actions) {
    $groups = array(SALES_MANAGERS, SOLUTION_ARCHITECTS, IMPLEMENTATION_MANAGERS);
    $actions = (array)$actions;
    $group = $this->User->Group;
    foreach ($groups as $id) {
        $group->id = $id;
        foreach($actions as $action) {
            $this->Acl->allow($group, $action);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:04:18.743

如果您将组创建为分层的，则可以。创建一个充当树的组结构，并像这样构造您的数据：

*   用户
    *   管理员
    *   经理人
        *   销售经理
        *   实施经理
    *   开发者
        *   解决方案架构师

使用这种结构，分配给父 ARO 的任何权限都将由所有后代继承。关于如何设置父行为的说明可以在这里找到：http: [//book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application。 html#acts-as-a-requester](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html#acts-as-a-requester)

# linq - 具有大量数据源/查找的表单的最佳实践

> ID：15059802
> 
> 赞同：1
> 
> 时间：2013-02-25T03:52:31.350
> 
> 标签：linq, c#-4.0, entity-framework-4.1

我有一个 C# WinForm，它有很多查找数据，大约需要 40-50 个不同的代码集来填充各种组合框。我希望我能把它分解成不同的形式，但是数据需要在一个形式上放在一起。

我正在使用实体框架对数据进行建模，所以我不确定加载所有这些数据源的最佳做法是什么。我担心如果我一次加载所有数据源，会对性能产生重大影响......所以我想另一个选项是按需加载（仅在需要编辑时加载代码集），但是会增加很多代码复杂性（我需要为每个组合框添加事件处理程序）。

此外，创建绑定源或仅使用 LINQ 查询直接填充数据源是否具有更好的性能。

# excel - 如何生成平均时间？

> ID：15059808
> 
> 赞同：0
> 
> 时间：2013-02-25T03:53:00.987
> 
> 标签：excel, google-docs

在 Excel（实际上是 Google Table，但它非常相似）中，我有一个`C8:C100`格式的范围（比如）显示时间`HH:MM:SS`- 例如`00:15:21`或`01:10:49`.

是否可以让一个单元格显示该范围的平均时间`C8:C100`？

我已经尝试过`=AVERAGE(C8:C100)`，但输出 ( `0,016527777777778`) 非常没用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:06:24.673

感谢 Matt Ball 的评论，我现在明白了。

`=AVERAGE(C8:C100)`是一个不错的结果，我只是调整了输出格式。感谢您将相关问题链接到我。

# c++ - 数字常量之前的预期不合格ID？

> ID：15059810
> 
> 赞同：4
> 
> 时间：2013-02-25T03:53:18.233
> 
> 标签：c++, comma-operator

我在线路上遇到错误`102, 115, and 128`。我究竟做错了什么？它说：

> 数字常量之前的预期不合格 id

我不知道那是什么意思。我已经尝试解决这个问题一周了，它将于本周三在我的 C++ 课上到期。我真的可以在这里使用一些外部建议。我究竟做错了什么：

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <conio.h>
#include <string>

using namespace std;

double qMeter = 0;
double hMeter = 0;
double oneMeter = 0;
int solDay = 0;
string garbage;
string localTime;
string decSol;
ifstream input;
ofstream output;

//function prototypes
double low(double lowTemp);
double high(double highTemp);
float average(double avgTemp);

int main()
{

input.open("curiosity234x.dat"); //opens input data file
output.open("output.dat"); //opens output data file

  for (int i = 0; i < 4; i++) //gets rid of the first four lines
{
  getline(input,garbage);
  cout << endl;
}

while (!input.eof())
{
    int count; 
    double newOneMeter;
    double newHMeter;
    double newQMeter;

    if (solDay == 2) //processes data for the second solar day
    {
     input >> solDay >> localTime >> decSol 
     >> newOneMeter >> newHMeter >> newQMeter;

     oneMeter = oneMeter + newOneMeter;
     hMeter = hMeter + newHMeter;
     qMeter = qMeter + newQMeter;
     count++;

     output << solDay << fixed << setprecision(1) << setw(5)
        << "Solar" << "Average" << "Low" << "High"
        << "Average" << "Low" << "High" 
        << "Average" << "Low" << "High" 
        << "Day" << "Temp" << "Temp" << "Temp" << "Temp" << "Temp"
        << "Temp" << "Temp" << "Temp" << "Temp"
        << fixed << setprecision(15) << "1 meter" << ".5 meters"
        << ".25 meters"
        << average(oneMeter) << low(oneMeter) << high(oneMeter)
        << average(hMeter) << low(hMeter) << high(hMeter)
        << average(qMeter) << low(qMeter) << high(qMeter);
    }

    if (solDay == 3) //processes data for the third solar day
    {
     input >> solDay >> localTime >> decSol 
     >> newOneMeter >> newHMeter >> newQMeter;

     oneMeter = oneMeter + newOneMeter;
     hMeter = hMeter + newHMeter;
     qMeter = qMeter + newQMeter;
     count++;

     output << solDay << fixed << setprecision(1) << setw(5)
        << "Solar" << "Average" << "Low" << "High" 
        << average(oneMeter) << low(oneMeter) << high(oneMeter)
        << average(hMeter) << low(hMeter) << high(hMeter)
        << average(qMeter) << low(qMeter) << high(qMeter);
    }
  }

  cout << endl << "The output.dat file has been written and transmitted.";
  /*
  reads first line. Assigns first string to 'int solDay' 
  second to 'string time', third to decSol, fourth to oneMeter, 
  fifth to hMeter and sixth to qmeter. Meters should have setw().
  */
getch();
return 0;

input.close();
output.close();
}

//functions used in main
double low(double lowTemp)
{
   int test = 10,000;
   double least;

   if (lowTemp < test)
   {
     lowTemp = test;
     lowTemp = least;       
    }
    return least;
}

double high(double highTemp)
{
   int test = 10,000;
   double most;

   if (highTemp < test)
   {
      highTemp = test;
      highTemp = most;        
    }
   return most;
}

float average(double avgTemp)
{
   avgTemp = avgTemp / count;
   return avgTemp;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T03:22:37.190

当我遇到它时，我搜索了这个错误。我烦恼的原因是什么？我试图给一个与#define 值相同的名称，该值已从第 3 方 API 标头包含到我的项目中。尝试不同的类名，我得到了编译！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T04:01:08.193

第 102 行和第 115 行的错误是由于您在 中有一个*逗号*，`10,000`但应该是`10000`，*逗号*不能用作数字分隔符。您实际使用的是[逗号运算符，它](http://en.wikipedia.org/wiki/Comma_operator)*从左到右*评估它的表达式，并且只返回最后一个。所以在这种情况下：

```
int test = 10,000;
           ^  ^
           |  Expression 2
           Expression 1 
```

因为`=`具有更高的优先级，它首先发生，另一方面，您会遇到语法错误：

```
int test = (10,000); 
```

会导致该值`10`被丢弃并将*八进制文字* `000`分配给`test`.

第 128 行的最后一个错误是由于 count 是本地的，`main`但您试图在 中使用它`average`，您需要`count`作为第二个参数传递。

# bash - 打印到文件 bash 用户名和帐户状态

> ID：15059813
> 
> 赞同：0
> 
> 时间：2013-02-25T03:53:51.763
> 
> 标签：bash

我想创建一个脚本来循环遍历 /etc/passwd 并打印所有用户名和帐户状态。

```
while read line; do
print username to field1 in user.txt
print status active/disabled in field2 in user.txt
done</etc/passwd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:58:20.793

```
while IFS=: read user status placeholder; do
    [[ $status == x ]] && active=active || active=inactive
    echo "$user $active" >> user.txt
done < /etc/passwd
cat user.txt 
```

但是如果第二列是`x`用户有一个加密的密码，那不代表活跃或不活跃......

看

```
man 5 passwd 
```

你应该看看

```
account expiration date 
```

在

```
man 5 shadow 
```

# plone - Plone 4.2.3 连续死机，然后以错误“未定义符号：clock_gettime”重新启动

> ID：15059816
> 
> 赞同：1
> 
> 时间：2013-02-25T03:54:00.423
> 
> 标签：plone

通过统一安装程序在运行 CentOS 5.9 版的机器上安装 Plone 4.2.3 作为独立 Zope 实例。那台机器的本地 IP 地址是 192.168.1.10。我在 buildout.cfg 中所做的唯一更改是：

```
http-address = 192.168.1.10:8080 
```

然后成功地`./bin/buildout`从`/usr/local/Plone-4.2.3/zinstance/`. 没有其他进程在端口 8080 上侦听。成功启动 Plone：

```
# pwd; date; /usr/bin/sudo -u plone /usr/local/Plone-4.2.3/zinstance/bin/plonectl start
/usr/local/Plone-4.2.3
Sun Feb 24 14:12:06 EST 2013
instance: . .
daemon process started, pid=2687 
```

问题是 ZServer 大约每 25 到 30 秒就会停止并启动另一个，因此无法使用。.../zinstance/var/log/instance.log 显示：

```
------
2013-02-24T14:12:31 INFO ZServer HTTP server started at Sun Feb 24 14:12:31 2013
    Hostname: xxxxx
    Port: 8080
------
2013-02-24T14:13:11 INFO ZServer HTTP server started at Sun Feb 24 14:13:11 2013
    Hostname: xxxxx
    Port: 8080
------
2013-02-24T14:13:39 INFO ZServer HTTP server started at Sun Feb 24 14:13:39 2013
    Hostname: xxxxx
    Port: 8080
------
2013-02-24T14:14:09 INFO ZServer HTTP server started at Sun Feb 24 14:14:09 2013
    Hostname: xxxxx
    Port: 8080 
```

并且更多此类条目会不断添加到日志文件中。

`.../zinstance/parts/instance/etc/zope.conf`然后我将事件日志级别从 INFO 更改为*ALL*并*设置*“ `zserver-threads 1`”然后停止并启动 Plone。

ZServer 再次在 25 到 30 秒后死亡，另一个 ZServer 启动，它在 25-30 秒后死亡，等等。instance.log 中的所有条目都是 DEBUG 级别。对于给定的 ZServer，最后一个日志条目的日期约为。其“INFO ZServer HTTP 服务器已启动”条目后 19 秒。大约。8 秒后，下一个条目是另一个“INFO ZServer HTTP 服务器已启动”。

问题：为什么 ZServer 进程会死掉？

* * *

Ran server if fg mode 和 ZServer 死前的最后几个错误是：

zope.configuration.xmlconfig.ZopeXMLConfigurationError：文件“/usr/local/Plone-4.2.3/zinstance/parts/instance/etc/site.zcml”，第 16.2-16.23 行

ZopeXMLConfigurationError：文件“/usr/local/Plone-4.2.3/buildout-cache/eggs/Products.CMFPlone-4.2.3-py2.7.egg/Products/CMFPlone/configure.zcml”，第 102.4-106.10 行

ZopeXMLConfigurationError：文件“/usr/local/Plone-4.2.3/buildout-cache/eggs/plone.app.theming-1.0.4-py2.7.egg/plone/app/theming/configure.zcml”，第 19.4 行-19.34

ZopeXMLConfigurationError：文件“/usr/local/Plone-4.2.3/buildout-cache/eggs/plone.app.theming-1.0.4-py2.7.egg/plone/app/theming/browser/configure.zcml”， 12.4-18.10 行

ImportError：/usr/local/Plone-4.2.3/buildout-cache/eggs/lxml-2.3.4-py2.7-linux-i686.egg/lxml/etree.so：未定义符号：clock_gettime

clock_gettime 错误显然与 dev plone org 票证有关：

# 13426（lxml 错误：未定义的符号：带有 Plone-4.2 的clock_gettime ...

和

# 13409（使用 UnifiedInstaller 安装 Plone 4.2.3 时出现问题）– Plone ...

用 nm 检查 /usr/local/Plone-4.2.3/buildout-cache/eggs/lxml-2.3.4-py2.7-linux-i686.egg/lxml/etree.so 并且输出中仅出现 clock_gettime 是：

0008a130 T callLookupFallback U clock_gettime U close

“T”符号在文本（代码）部分。"U" 符号未定义。

谷歌搜索 (linux clock_gettime) 找到

[https://bbs.archlinux.org/viewtopic.php?id=88108](https://bbs.archlinux.org/viewtopic.php?id=88108)和

[Ubuntu Linux C++ 错误：未定义对“clock_gettime”和“clock_settime”的引用](https://stackoverflow.com/questions/2418157/ubuntu-linux-c-error-undefined-reference-to-clock-gettime-and-clock-settim)

两者都说将 -lrt 添加到您链接到的库的（末尾）列表中将解决问题。我查看了 Plone-4.2.3-UnifiedInstaller/base_skeleton/lxml_static.cfg。这种make文件对我来说并不熟悉。不知道下一步该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:26:08.980

选择最新版本的 4.2.x 统一安装程序（撰写本文时为 4.2.4），它修复了 CentOS 上的 libxml2 构建。然后，在 ./install.sh 命令行上使用“--static-lxml”参数。

# c++ - 常量函数不能用于常量引用的对象？

> ID：15059818
> 
> 赞同：0
> 
> 时间：2013-02-25T03:54:27.910
> 
> 标签：c++

我不完全确定如何描述我的问题。

基本上我有一个函数来检查我的矩形是否包含不同的矩形，但是，当我尝试使用我的函数时`getX`，`getY`我遇到了：`Error: the object has type qualifiers that are not compatible with the member function object type is: const Rectangle2D`。

我的功能如下。

```
const bool Rectangle2D::contains(const Rectangle2D &r) {
    const double x = r.getX();
    const double y = r.getY();
    const double width = r.getWidth();
    const double height = r.getHeight();
} 
```

我所有的`get`功能都是不变的，例如：

```
const double Rectangle2D::getX() {
    return x;
} 
```

在我的课堂上，它的功能被定义为`const bool contains(const Rectangle2D &r)`.

如果需要更多信息，请告诉我。如果有人可以帮助我或指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:58:20.113

您需要将 const 放在函数名称和参数列表之后，大括号或分号之前。所以在你的课上你应该有

```
double getX() const; 
```

然后当你实现它时，你应该有

```
double Rectangle2D::getX() const {
    return x;
} 
```

您需要对 contains 函数和您希望能够在 const Rectangle2D 上使用的任何其他函数执行相同的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:58:09.090

这样做：

```
const double Rectangle2D::getX() {
    return x;
} 
```

这是一个*非常量*函数，它返回一个常量 double。

要使其成为 const 函数，请执行以下操作：

```
double Rectangle2D::getX() const {
  return x;
} 
```

# php - 将SQL表转为文件夹结构

> ID：15059820
> 
> 赞同：0
> 
> 时间：2013-02-25T03:54:29.387
> 
> 标签：php, sql, algorithm

我有一个看起来像这样的表：

```
+----+-----------+------------------+------------+
| ID | folder_id | parent_folder_id |  group_id  |
+====+===========+==================+============+
| 01 |         1 | null             | parent     |
| 02 |         2 | 1                | group_id_1 |
| 03 |         3 | 2                | group_id_2 |
| 04 |         4 | 3                | group_id_3 |
| 05 |         5 | 4                | group_id_4 |
+----+-----------+------------------+------------+ 
```

我需要将其转换为文件夹结构，其中具有 parent_id 的每个文件夹行！= null 显示在具有 folder_id = parent_id 的文件夹下方。我需要以理智的方式做到这一点，并且不知道如何去做。创建后，我将添加与行的 group_id 对应的项目。

最终，我需要将 SQL 表转换为如下所示的数组：

```
$folders["parent"] = array["folder_id_2"] (
    array["folder_id_3"](file 1, file2);
    array["folder_id_4"](
        array["folder_id_5"](file 3, file 4),
        file 5
    );
    file 6
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:08:19.110

我可能无法创建您想要的数组。但是，尝试替代解决方案怎么样？使用树形结构。这是我要做的：

1.  声明`class Folder`其中包含`$parent`和`$files`属性。`$parent`用于引用父`Folder`对象，`$files`将是文件数组。
2.  迭代数据库记录并`Folder`从每一行实例化对象。
3.  将每个`Folder`对象的`$parent`属性设置为引用父`Folder`对象。

这样，我们就可以得到树形的文件夹结构。

# c# - mvvmcross 与 xamarin.ios

> ID：15059825
> 
> 赞同：3
> 
> 时间：2013-02-25T03:55:10.577
> 
> 标签：c#, mvvmcross, xamarin.ios

有没有人尝试过将 MvvmCross 与 Xamarin.iOS 2 一起使用？

是否需要任何特殊步骤才能使其工作 - 特别是在针对 iOS 应用程序的 VS 中？

有多少现有的设置说明仍然适用？PCL 是否使用[http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)上的现有步骤工作？

我问是因为我在编译部分 mvvmcross 时遇到问题。

我遇到的一个问题是，我似乎错过了在我的 Mac 上的 VMWare 下运行的 Win8 上的一些设置。

这是我收到的一条错误消息：

```
System.Windows.dll could not be found

resulting in System.Windows.Interactivty not being available and the following failing to compile

using System.Windows.Interactivity;

namespace Cirrious.MvvmCross.Wpf.Commands
{
    public class MvxEventToCommand : TriggerAction<DependencyObject> 
```

TIA,

安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:33:34.127

为了讨论 xam2.0 的当前状态，我今天推荐这个线程 - [http://forums.xamarin.com/discussion/1549/pcls-and-mvvmcross-in-the-new-tools#latest](http://forums.xamarin.com/discussion/1549/pcls-and-mvvmcross-in-the-new-tools#latest)

或者在这里提出问题 - 但请尽可能多地提供有关您遇到的“麻烦”的技术细节。

在我可以看到的细节上，Cirrious.MvvmCross.Wpf.Commands 不是 iOS 框架的一部分 - 所以不会影响 iOS 构建。在这个 Wpf 问题上，我建议 - [https://github.com/slodge/MvvmCross/issues/171](https://github.com/slodge/MvvmCross/issues/171)最后是：

> @hugoterelle 评论说：必须为 .NET 4 (BlendWPFSDK_en.msi) 安装 Blend SDK 并且一切都运行完美......

# r - ggplot 比例、颜色和线型参数的问题

> ID：15059832
> 
> 赞同：0
> 
> 时间：2013-02-25T03:55:29.143
> 
> 标签：r

这是我在这里的第一篇文章，希望我能说清楚！我正在尝试对我的 ggplot 进行非常微妙的更改。我正在绘制以 (x,y) 为中心的十字准线，其中 SD 显示为误差线，但我的复杂之处在于比例和线型。我有一个数据框（z），其中每一行都是多行的聚合。每行将在 ggplot 中绘制为具有自己颜色的十字准线，但是，数据框的某些行应绘制为法线，而其他行应绘制为虚线。两列 groupnum 和 groupttl 分别具有应该在比例中显示的颜色和标签的数值，除了颜色之外，我还想在比例栏中显示线型。但我还无法弄清楚这一点！

这是我的代码正在做的事情：

```
chp <- ggplot(data=z,aes(x=x,y=y,colour = group,group = group,linetype=factor(othr))) + 
    theme_bw() + #remove background
    xlab(m1) +
    ylab(m2) +
    geom_errorbar(aes(ymin = y - ySD, ymax = y + ySD, linetype = factor(othr))) + 
    geom_errorbarh(aes(xmin = x - xSD, xmax = x + xSD, linetype = factor(othr))) +
    guides(linetype=FALSE) + #remove the legend added by linetype
    scale_colour_manual(name=hierarchyname, values=factor(unique(groupnum))) + #add colors manually
    scale_linetype_manual(values = factor(unique(othr))) 
```

注意： othr 只有两个值 (1,2) 我只想显示两种类型的线——普通线和虚线。

我找到的最接近的匹配是：[Passing variable with line types to ggplot linetype](https://stackoverflow.com/questions/11714564/passing-variable-with-line-types-to-ggplot-linetype)

他们说的诀窍是结合使用 line_type = geography 和 scale_linetype_manual(values = lty)。但就我而言，不同之处在于我不希望每条线都有自己的线型，我只需要两条。

我真的很感激对此的任何建议。如果您需要更多信息，请告诉我。谢谢 SP

* * *

行。感谢您的建议。这是我的数据框

```
"groupnum","group","N","x","y","xSE","ySE","xSD","ySD","othr"
"1",1,"a1",874,9.31080482242276,3.78151559519843,0.000919599013717256,0.0010731700399164,0.803729537988882,0.93795061488693,1
"2",2,"a2",323,9.32858454311781,3.85117814673799,0.00434633223522011,0.00262887468315802,1.4038653119761,0.84912652266004,1
"3",3,"a3",401,8.65698443874862,3.61961141000158,0.00320566652230181,0.0024382624307443,1.28547227544303,0.977743234728466,1
"4",4,"a4",364,8.02722008290545,4.03272290234161,0.00664827121575061,0.00285893561941909,2.41997072253322,1.04065256546855,1
"5",5,"a5",2117,9.38192555351799,3.39287371184691,0.000317738758329197,0.000433382027761261,0.672652951382911,0.917469752770589,1
"6",6,"a6",347,9.2600568761331,3.34027019277033,0.00105036291416114,0.0024058297735207,0.364475931213916,0.834822931411683,1
"7",7,"a7",782,9.26685442279479,3.32913948807558,0.000672770018741615,0.00103475341970955,0.526106154655943,0.809177174212869,1
"8",9,"a8",335,9.33774697202318,3.83086473063289,0.0022406672509349,0.0033135194052142,0.750623529063193,1.11002900074676,1
"9",10,"a9",588,9.2362799520667,3.79905936514298,0.000648139660555769,0.00112763352751969,0.381106120406792,0.663048514181577,1
"10",8,"b1",631,9.39770259697672,3.49584647787853,0.00147287975375933,0.00176346535893738,0.929387124622137,1.11274664148949,2 
```

可以使用命令读取

```
read.table(file = "zp.txt",sep = ",", header = TRUE, stringsAsFactors = FALSE) 
```

另一个要求是：我想使用

```
scale_colour_hue(name=hierarchyname, # Legend label, use darker colors
             breaks=unique(group),
             labels=unique(group),#add the legend for all groups
             l=50,       # Use darker colors, lightness=50
             c=100)        #chroma (intensity of color) 
```

而不是 scale_colour_manual 由于更好的颜色，但是，这是一个次要问题，首先我希望修复比例！

好的也可以编辑它！谢谢 SP

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:09:50.520

没有你的数据框`z`来检查它是不可能知道的，但我认为如果你改变这将起作用：

```
 scale_linetype_manual(values = factor(unique(othr)) 
```

到

```
 scale_linetype_manual(values =c(1,2)) 
```

* * *

**编辑**

以下似乎可以满足您的需求：

```
chp <- ggplot(data=z,aes(x=x,y=y,colour = group, linetype=as.factor(othr))) + 
  geom_errorbar(aes(ymin = y - ySD, ymax = y + ySD)) + 
  geom_errorbarh(aes(xmin = x - xSD, xmax = x + xSD)) +
  theme_bw() +
  guides(linetype=FALSE)
chp 
```

![在此处输入图像描述](../Images/92b95cdfaaa994cbe27b6a49870770fc.png)

* * *

没有`guides(linetype=FALSE)`： ![在此处输入图像描述](../Images/f1472810f92a63340dd77c191e555de3.png)

* * *

**手动解决方案**

这将允许您指定色标图例的线型。

```
guides(colour=guide_legend(override.aes=list(linetype=c(2,rep(1,times=9))))) 
```

的`override.aes`参数`guide_legend()`允许您调整列表中的图例特征。So`linetype`被指定为 2 和 9 个（虚线是`linetype=2`，实线是`linetype = 1`）。这就是我所说的手动。

![在此处输入图像描述](../Images/6333f98c631068ae80e1211b346c881a.png)

# algorithm - 二叉搜索树的顺序旋转

> ID：15059835
> 
> 赞同：0
> 
> 时间：2013-02-25T03:56:06.597
> 
> 标签：algorithm, rotation, binary-search-tree

假设我有一个表示这个有序序列的平衡二叉搜索树。

```
A<B<C<D<E<F<G<H 
```

给定其中一个元素，例如 F，我如何有效地转换树以使结果代表这个有序序列？

```
F<G<H<A<B<C<D<E? 
```

从 F 向右的元素被移动到所有其他元素的前面。请注意，这与通常意义上的“树旋转”无关。这里的旋转发生在元素顺序的意义上。这与双向链表的“旋转”的含义相同。例如，如果问题是关于双向链表而不是二叉搜索树，则解决方案很简单：

```
E.next := null
F.prev := null
H.next := A
A.prev := H 
```

平衡二叉搜索树是否有有效的解决方案？

**实施说明：**

乍一看，即使有一个有效的算法，它也没有多大用处，因为必须更新移动元素的值以保留二叉搜索树的不变量（左孩子较小，右孩子更大）。但是，情况并非如此，因为在模算术模*N*中，顺序可以在恒定时间内固定，而无需更改节点的值。假设节点的顺序定义如下：

```
(A < B) if and only if ((A.value - C) mod N) < ((B.value - C) mod N) 
```

这里，*A.value*、*B.value*和*C是**[0,N)*范围内的整数。对此的图形解释是，我们有一个散布有*N*个点的圆，我们对这些点进行排序，使得*C*是最小的点，然后是*C+1*、*C+2*等，直到*C+(N-1)*，这是最大的一点。

无论如何，在将*F和所有后续元素移到前面之后，可以通过更改**C*轻松修复树不变量：

```
C := F.value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:50:19.223

一般来说，这不能在少于 O(N) 的时间内完成。稍作改动后，可以在 O(log N) 内恢复平衡，但是剪切整个分支并将其粘贴到其他地方是一个很大的变化。

提取 n 个元素并一个一个地插入它们需要 O(n log N)。如果 n 很大，则值得重建整棵树，这可以在 O(N) 时间内完成。

也就是说，您可以将有序遍历的整个序列视为循环列表。您可能会维护一个指向您认为是“第一个”的元素的指针，并且当您想要将某些元素从“结尾”移动到“开头”时只需更改它，反之亦然。当你想按顺序访问序列时，只需从指向的元素（“第一个”）开始，继续按顺序遍历并环绕树的末尾。访问最右边的元素后，继续最左边的。当您再次到达“第一个”元素时停止。

# sql-server-2008 - 在 2 个日期之间重复结果

> ID：15059837
> 
> 赞同：0
> 
> 时间：2013-02-25T03:56:46.227
> 
> 标签：sql-server-2008, tsql

我有一个事务表，每次客户更改状态时都会添加一条记录，我正在尝试在 SQL 2008 Management Studio 中的 t-sql 中编写一个过程，该过程将找到客户每天的最后状态，我可以做。

我遇到的问题是填写状态没有变化的每一天的最后一个状态。这是我尝试填写的数据示例。我需要 AB 成为每个日期之间的状态两个状态日期。

```
Customer Number Status  Status Date
XXXXXX123       AB          2/15/2013

XXXXXX123       AC          2/24/2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:10:25.780

就像是

`Select status from (select * from table where date < enddate order by date desc limit 1)`

这将在表格中找到最近日期仍低于结束日期的行，然后您可以获取其状态。

# python - NameError：未定义全局名称“reverse”

> ID：15059838
> 
> 赞同：1
> 
> 时间：2013-02-25T03:56:49.707
> 
> 标签：python

python的新手......真的对这个奇怪的错误感到困惑......我不认为我做错了什么，是吗？

主文件

```
from methods import Reverse

def main ():

    b = [1,2,3,4,5,6,6,7,8,8,9,1,212,312,31,23,123455435,56,56,123]
    a = "llaa"

    thing = Reverse()
    print thing.reverse(a)

main() 
```

方法.py

```
class Reverse():

  def __init__(self):
    print "initialized reverse"

  def reverse(self,var):
    if var == "":
      return var
    else: 
      print var[-1] + reverse(var[:-1]) 
```

我正在尝试使用反向进行递归调用......请帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:59:01.070

在您的类`Reverse`中，`reverse`是一个方法，因此您需要将其作为方法调用：

```
print var[-1] + self.reverse(var[:-1]) 
```

注意`self`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T04:02:07.913

与其他一些`this`隐含的语言不同，Python 要求您`self`在使用实例方法或变量时明确说明，因此`Reverse`您需要明确说明

```
self.reverse(var[:-1]) 
```

当然`reverse`不会返回任何内容，因此您需要将其更改为

```
return var[-1] + self.reverse(var[:-1]) 
```

# java - System.out.println() 和扫描仪的奇怪问题

> ID：15059843
> 
> 赞同：0
> 
> 时间：2013-02-25T03:57:00.510
> 
> 标签：java, system, java-7, println

我有一个总是正确的 while 循环，它要求用户输入一个字母。当输入一个字母时，它会在 switch 语句中查找，然后从请求更多输入的 switch 语句中执行一段代码。似乎代码的输出在代码的某些部分被注册为用户的输入。这是我的代码的简短示例：

```
while (true) {
    System.out.print("Enter a letter :: ");
    selection = keyboard.nextLine();
    selection = selection.toUpperCase();

    switch (selection) {
    case "A":
        A = null;
        A = new Matrix();
        System.out.println("Default matrix A initialized.");
        break;

    case "C":
        System.out.print("Enter the number of rows (rows > 0) :: ");
        rows = keyboard.nextInt();
        System.out
                .print("Enter the number of columns (colums > 0) :: ");
        cols = keyboard.nextInt();
        System.out
                .print("Enter the initial value for each element :: ");
        initialValue = keyboard.nextInt();

        C = null;
        C = new Matrix(rows, cols, initialValue);
        System.out.println("Matrix C initialized.");
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:19:12.337

`nextInt()`获取下一个 int，但不读取换行符。在您使用`nextInt()`的“C”的情况下，您需要包含另一个`nextLine()`以移动到下一行。

```
case "C":
 ...
 ...
 keyboard.nextLine();
break; 
```

# php - jquery访问php jason_encoded数组

> ID：15059846
> 
> 赞同：1
> 
> 时间：2013-02-25T03:57:14.490
> 
> 标签：php, jquery

在 test.php 中：

```
<?php
array_push($stack, "BLABLA");
array_push($stack, "BLABLA2");
echo json_encode($stack);
?> 
```

在 test.html 中：

```
<script type="text/javascript">
$(document).ready(function(){
    $.post( 
    'test.php', // location of your php script
    {}, // any data you want to send to the script
    function( data ){  // a function to deal with the returned information
        $('#mydiv').html(data[0]).show();
    }, "json");
});
</script>

<div id="mydiv"></div> 
```

我已经做了一些健全性检查，似乎 data[0] 不是访问我在 php.ini 中推送的第一个元素的正确方法。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:09:51.810

将数据转换回数组：

```
function( data ){  // a function to deal with the returned information
    data = JSON.parse(data); // convert the JSON data back to an array
    $('#mydiv').html(data[0]).show();
}, "json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:13:10.383

尝试

```
<?php
    $stack = array();
    array_push($stack, "BLABLA");
    array_push($stack, "BLABLA2");
    echo json_encode($stack);
?> 
```

并且看到它肯定会`BLABLA`在 div 中为您提供 id `mydiv`。

只需`$stack`先定义为空数组或确保`$stack`数组已经存在。

使用[**firebug**](http://getfirebug.com/) Firefox 插件。

# java - 在 JTable 单元格编辑器中自动完成 JComboBox

> ID：15059847
> 
> 赞同：0
> 
> 时间：2013-02-25T03:57:20.383
> 
> 标签：java, swing, autocomplete, jtable, jcombobox

我借助上[一篇文章](https://stackoverflow.com/questions/14974228/java-swing-multi-column-autocompleate-combobox)开发了一个带有表格的自动完成组合框，但是当添加到表格单元格并按下一个键时，它会显示以下错误。它在桌子外面工作得很好。

错误：

> 线程“AWT-EventQueue-0”java.awt.IllegalComponentStateException 中的异常：组件必须显示在屏幕上才能确定其在 java.awt.Component.getLocationOnScreen_NoTreeLock(Component.java:2044) at java.awt.Component.getLocationOnScreen 的位置(Component.java:2018) at javax.swing.JPopupMenu.show(JPopupMenu.java:939) at test.DetailedComboBox$TableComboPopup.show(DetailedComboBox.java:203) at javax.swing.plaf.basic.BasicComboBoxUI.setPopupVisible( BasicComboBoxUI.java:878) at javax.swing.JComboBox.setPopupVisible(JComboBox.java:818) at javax.swing.JComboBox.showPopup(JComboBox.java:803) at test.ComboKey​​Handler$1.run(DetailedComboBox.java:339)在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701) 在 java.awt.EventQueue.access$000(EventQueue.java:102) 在 java.awt.EventQueue$3.run(EventQueue.java:662) 在 java.awt.EventQueue$3.run(EventQueue.java:660)在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:671) 在 java.awt.EventDispatchThread。 pumpOneEventForFilters(EventDispatchThread.java:244) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :147) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) 在 java.awt.EventDispatchThread。运行（EventDispatchThread.java:97）

这是我的代码：

//// 详细组合框

```
 package test;

import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Point;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.plaf.basic.BasicComboPopup;
import javax.swing.plaf.basic.ComboPopup;
import javax.swing.plaf.metal.MetalComboBoxUI;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

/**
 *
 * @author W.A.R.R.Wijesinghe
 */
public class DetailedComboBox extends JComboBox {

    public static enum Alignment {

        LEFT, RIGHT
    }
    private List<List<? extends Object>> tableData;
    private String[] columnNames;
    private int[] columnWidths;
    private int displayColumn;
    private Alignment popupAlignment = Alignment.LEFT;

    /**
     * Construct a TableComboBox object
     */
    public DetailedComboBox(String[] colNames, int[] colWidths, int displayColumnIndex) {
        super();
        this.columnNames = colNames;
        this.columnWidths = colWidths;
        this.displayColumn = displayColumnIndex;

        setUI(new TableComboBoxUI());
        setEditable(true);
        this.setSelectedIndex(-1);

    }

    /**
     * Set the type of alignment for the popup table
     */
    public void setPopupAlignment(Alignment alignment) {
        popupAlignment = alignment;
    }

    /**
     * Populate the combobox and drop-down table with the supplied data. If the
     * supplied List is non-null and non-empty, it is assumed that the data is a
     * List of Lists to be used for the drop-down table. The combobox is also
     * populated with the column data from the column defined by
     * <code>displayColumn</code>.
     */
    public void setTableData(List<List<? extends Object>> tableData) {
        this.tableData = (tableData == null
                ? new ArrayList<List<? extends Object>>() : tableData);

        // even though the incoming data is for the table, we must also
        // populate the combobox's data, so first clear the previous list.
        removeAllItems();

        // then load the combobox with data from the appropriate column
        Iterator<List<? extends Object>> iter = this.tableData.iterator();
        while (iter.hasNext()) {
            List<? extends Object> rowData = iter.next();
            addItem(rowData.get(displayColumn));
        }
    }

    public List<? extends Object> getSelectedRow() {
        return tableData.get(getSelectedIndex());
    }

    public List<? extends Object> getRowAt(int row) {
        return tableData.get(row);
    }

    /**
     * The handler for the combobox's components
     */
    private class TableComboBoxUI extends MetalComboBoxUI {

        /**
         * Create a popup component for the ComboBox
         */
        @Override
        protected ComboPopup createPopup() {
            return new TableComboPopup(comboBox, this);
        }

        /**
         * Return the JList component
         */
        public JList getList() {
            return listBox;
        }
    }

    /**
     * The drop-down of the combobox, which is a JTable instead of a JList.
     */
    private class TableComboPopup extends BasicComboPopup implements ListSelectionListener, ItemListener {

        private final JTable table;
        private TableComboBoxUI comboBoxUI;
        private PopupTableModel tableModel;
        private JScrollPane scroll;
//    private JList list = new JList();
//    private ListSelectionListener selectionListener;
//    private ItemListener itemListener;

        /**
         * Construct a popup component that's a table
         */
        public TableComboPopup(JComboBox combo, TableComboBoxUI ui) {
            super(combo);
            this.comboBoxUI = ui;

            tableModel = new PopupTableModel();
            table = new JTable(tableModel);
            table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
            table.getTableHeader().setReorderingAllowed(false);

            TableColumnModel tableColumnModel = table.getColumnModel();
            tableColumnModel.setColumnSelectionAllowed(false);

            for (int index = 0; index < table.getColumnCount(); index++) {
                TableColumn tableColumn = tableColumnModel.getColumn(index);
                tableColumn.setPreferredWidth(columnWidths[index]);
            }

            scroll = new JScrollPane(table);
            scroll.setHorizontalScrollBarPolicy(
                    JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
            scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

            ListSelectionModel selectionModel = table.getSelectionModel();
            selectionModel.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            selectionModel.addListSelectionListener(this);
            combo.addItemListener(this);

            table.addMouseListener(new MouseAdapter() {

                @Override
                public void mousePressed(MouseEvent event) {
                    Point p = event.getPoint();
                    int row = table.rowAtPoint(p);

                    comboBox.setSelectedIndex(row);
                    hide();
                }
            });

            table.setBackground(UIManager.getColor("ComboBox.listBackground"));
            table.setForeground(UIManager.getColor("ComboBox.listForeground"));
        }

        /**
         * This method is overridden from BasicComboPopup
         */
        @Override
        public void show() {
            if (isEnabled()) {
                super.removeAll();

                int scrollWidth = 200;//table.getPreferredSize().width
                      //  + ((Integer) UIManager.get("ScrollBar.width")).intValue() + 1;
                int scrollHeight = 100;//comboBoxUI.getList().
                       // getPreferredScrollableViewportSize().height;
                scroll.setPreferredSize(new Dimension(scrollWidth, scrollHeight));

                super.add(scroll);

                ListSelectionModel selectionModel = table.getSelectionModel();
                selectionModel.removeListSelectionListener(this);
                selectRow();
                selectionModel.addListSelectionListener(this);

                int scrollX = 0;
                int scrollY = 25;//comboBox.getBounds().height;
/*
                if (popupAlignment == Alignment.RIGHT) {
                    scrollX = comboBox.getBounds().width - scrollWidth;
                }

* */
                show(comboBox, scrollX, scrollY);

            }
        }

        /**
         * Implemention of ListSelectionListener
         */
        @Override
        public void valueChanged(ListSelectionEvent event) {
            comboBox.setSelectedIndex(table.getSelectedRow());
        }

        /**
         * Implemention of ItemListener
         */
        @Override
        public void itemStateChanged(ItemEvent event) {
            if (event.getStateChange() != ItemEvent.DESELECTED) {
                ListSelectionModel selectionModel = table.getSelectionModel();
                selectionModel.removeListSelectionListener(this);
                selectRow();
                selectionModel.addListSelectionListener(this);
            }
        }

        /**
         * Sync the selected row of the table with the selected row of the
         * combo.
         */
        private void selectRow() {
            int index = comboBox.getSelectedIndex();

            if (index != -1) {
                table.setRowSelectionInterval(index, index);
                table.scrollRectToVisible(table.getCellRect(index, 0, true));
            }
        }
    }

    /**
     * A model for the popup table's data
     */
    private class PopupTableModel extends AbstractTableModel {

        /**
         * Return the # of columns in the drop-down table
         */
        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        /**
         * Return the # of rows in the drop-down table
         */
        @Override
        public int getRowCount() {
            return tableData == null ? 0 : tableData.size();
        }

        /**
         * Determine the value for a given cell
         */
        @Override
        public Object getValueAt(int row, int col) {
            if (tableData == null || tableData.isEmpty()) {
                return "";
            }

            return tableData.get(row).get(col);
        }

        /**
         * All cells in the drop-down table are uneditable
         */
        @Override
        public boolean isCellEditable(int row, int col) {
            return false;
        }

        /**
         * Pull the column names out of the tableInfo object for the header
         */
        @Override
        public String getColumnName(int column) {
            String columnName = null;

            if (column >= 0 && column < columnNames.length) {
                columnName = columnNames[column].toString();
            }

            return (columnName == null) ? super.getColumnName(column) : columnName;
        }
    }
}

class ComboKeyHandler extends KeyAdapter {

    private final DetailedComboBox comboBox;
    //  private final Vector<String> list = new Vector<String>();
    private final List<List<?>> list = new ArrayList<>();

    public ComboKeyHandler(DetailedComboBox combo) {

        this.comboBox = combo;

        for (int i = 0; i < comboBox.getItemCount(); i++) {

            List<? extends Object> rowData = combo.getRowAt(i);
            // name.setText(rowData.get(1).toString());
            //  capital.setText(rowData.get(2).toString());
            list.add(rowData);
            System.out.println("List Create: " + list);
            // list.addElement((String) comboBox.getItemAt(i));
        }
    }
    private boolean shouldHide = false;

    @Override
    public void keyTyped(final KeyEvent e) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                String text = ((JTextField) e.getSource()).getText();
                System.out.println(text);
                if (text.length() == 0) {
                    setSuggestionModel(comboBox, list, "");
                    comboBox.hidePopup();
                } else {
                    List<List<?>> m = getSuggestedModel(list, text);
                    if (m.isEmpty() || shouldHide) {
                        comboBox.hidePopup();
                    } else {
                        setSuggestionModel(comboBox, m, text);
                        comboBox.showPopup();
                    }
                }
            }
        });
    }

    @Override
    public void keyPressed(KeyEvent e) {
        JTextField textField = (JTextField) e.getSource();
        String text = textField.getText();
        shouldHide = false;
        switch (e.getKeyCode()) {
            case KeyEvent.VK_RIGHT:

                    if (!list.isEmpty()) {

                    }

                break;
            case KeyEvent.VK_ENTER:
                if (list.isEmpty()) {
                    //list.add(new ArrayList<>(Arrays.asList(text, "a", "a")));
                    //  setSuggestionModel(comboBox, getSuggestedModel(list, text), text);
                }
                shouldHide = true;
                break;
            case KeyEvent.VK_ESCAPE:
                shouldHide = true;
                break;
            default:
                break;
        }
    }

    private static void setSuggestionModel(DetailedComboBox comboBox, List<List<?>> newList, String str) {
        comboBox.setTableData(newList);
        comboBox.setSelectedIndex(-1);
        ((JTextField) comboBox.getEditor().getEditorComponent()).setText(str);
    }

    private static List<List<?>> getSuggestedModel(List<List<?>> list, String text) {

        List<List<?>> BacktableData = new ArrayList<>();
        System.out.println("List before: " + list);

        for (int i = 0; i < list.size(); i++) {
            List<List<?>> Innerlist = new ArrayList<>();
            Innerlist = (List<List<?>>) list.get(i);

            String[] toArray = Innerlist.toArray(new String[Innerlist.size()]);
            List<String> Stringlist = new ArrayList<>(Arrays.asList(toArray));
            System.out.println("String List ::::::: " + Stringlist);
            boolean isSearch = false;
            for (Iterator<String> it = Stringlist.iterator(); it.hasNext();) {
                isSearch = false;

                if (it.next().contains(text)) {
                    //it.remove(); // NOTE: Iterator's remove method, not ArrayList's, is used.
                    isSearch = true;
                    if (isSearch) {
                        break;
                    }
                }

            }

            if (isSearch) {
                BacktableData.add(new ArrayList<>(Innerlist));

            }
            System.out.println("BackList : " + BacktableData);
        }
        System.out.println("Filter Text: " + text);
        System.out.println("List After: " + list);
        return BacktableData;

        /*
         * for (String s : list) { if (s.startsWith(text)) { m.addElement(s); }
         * } return m;
         *
         */
    }
} 
```

//////TestTbl

```
package test;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import javax.swing.DefaultCellEditor;
import javax.swing.JTextField;
import javax.swing.table.TableColumn;

public class TestTbl extends javax.swing.JFrame {

    JTextField field;
    private DetailedComboBox combo;

    public TestTbl() {
        initComponents();
        List<List<?>> tableData = new ArrayList<>();
        tableData.add(new ArrayList<>(Arrays.asList("MD", "Maryland", "Annapolis")));

        tableData.add(new ArrayList<>(
                Arrays.asList("NH", "New Hampshire", "Concord")));
        tableData.add(new ArrayList<>(
                Arrays.asList("NJ", "New Jersey", "Trenton")));
        tableData.add(new ArrayList<>(
                Arrays.asList("NM", "New Mexico", "Santa Fe")));
        tableData.add(new ArrayList<>(
                Arrays.asList("ND", "North Dakota", "Bismark")));

        String[] columns = new String[]{"State", "Name", "Capital"};
        int[] widths = new int[]{50, 100, 100};

        combo = new DetailedComboBox(columns, widths, 0);
        System.out.println(tableData);
        combo.setTableData(tableData);
        combo.setSelectedIndex(0);
        combo.setPopupAlignment(DetailedComboBox.Alignment.LEFT);
        field = (JTextField) combo.getEditor().getEditorComponent();
        field.setText("");
        field.addKeyListener(new ComboKeyHandler(combo));

        combo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (field.getText().trim().length() != 0) {
                    showDetails();
                }
            }
        });

        name = new JTextField(10);
        capital = new JTextField(10);
        name.setEditable(true);
        capital.setEditable(false);

        TableColumn Item = jTable1.getColumnModel().getColumn(0);
        Item.setCellEditor(new DefaultCellEditor(combo));
    }

    private void showDetails() {
        List<? extends Object> rowData = combo.getSelectedRow();
        name.setText(rowData.get(1).toString());
        capital.setText(rowData.get(2).toString());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        name = new javax.swing.JTextField();
        capital = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTable1.setRowHeight(25);
        jScrollPane1.setViewportView(jTable1);

        name.setText("jTextField1");

        capital.setText("jTextField2");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(82, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 375, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(68, 68, 68))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(name, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(34, 34, 34)
                        .addComponent(capital, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(110, 110, 110))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(28, 28, 28)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(name, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(capital, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 45, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 275, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(21, 21, 21))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TestTbl.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TestTbl.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TestTbl.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TestTbl.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTbl().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField capital;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTextField name;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:49:54.997

不要重新发明轮子，没有问题

1.  [SwingX 中的自动完成装饰器](https://web.archive.org/web/20170414092630/http://swinglabs-demos.java.net/demos/swingxset6/swingxset.jnlp)

2.  [自动完成 JComboBox / JTextField](https://stackoverflow.com/a/10901944/714968)

for `JTable`( `JTable`/ `JXTable`by using `SwingX`) as [TableCellEditor](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

# ruby-on-rails - 如何处理在 Rails 应用程序中共享唯一 URL？

> ID：15059848
> 
> 赞同：4
> 
> 时间：2013-02-25T03:57:25.337
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我正在创建一个网络应用程序来学习 Ruby on rails。该应用程序允许用户登录并在画布上绘图。我希望用户能够通过特定于用户作品编号的唯一生成的 URL 分享杰作。艺术品的创建者也应该可以选择用密码保护 URL。我不需要在 Facebook 或 LinkedIn、twitter 或类似的东西上共享 URL。只想要一个可以通过电子邮件或短信等发送的纯 URL。

我应该使用什么方法来实现这一点？是否有任何宝石可以轻松实现此功能？任何设计建议和智慧将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:13:24.977

您可以在您的杰作模型上使用一个布尔值，称为 public。如果图片是公开的，那么任何人都可以访问它。但是，如果它不是公开的，那么使用您的返回 URL 将不会做任何事情。

您的公共网址可以通过哈希创建。我通常喜欢在创建模型时创建哈希令牌。

`rails g migration add_hash_token_to_masterpieces hash_token`

在您的模型中，您可以使用该`before_create`方法调用私有方法，该方法将使用随机十六进制更新您的 hash_token。

```
 before_create :generate_hash_token

private

  def generate_hash_token
    begin
      self.hash_token = SecureRandom.hex
    end while self.class.exists?(hash_token: hash_token)
  end 
```

然后在你的路线文件中，你可以做这样的事情

`match "/public/:hash_token" => "masterpieces#public_masterpiece", as: "public"`

然后在您的控制器中，您可以拥有哈希令牌的 find 方法，并拥有相应的视图来为公共用户显示图像。注意`_and_public`只查找公开的。即使哈希有效，如果杰作不公开，它也不会返回记录。

```
def public_masterpiece
  @masterpiece = Masterpiece.find_by_hash_token_and_public(params[:hash_token], true)
  ...
end 
```

然后在您的杰作视图中，您可以拥有一个名为的文件，该文件`public_masterpiece.html.erb`是为尚未拥有授权帐户但仍可以查看图片的用户提供的特定渲染。如果您使用 cancan 之类的 gem 进行授权，则需要确保允许 public_masterpiece 操作。

# javascript - jQuery：我如何找到特定的输入类型，它是 id/name，然后是持有它并切换它

> ID：15059850
> 
> 赞同：0
> 
> 时间：2013-02-25T03:57:35.913
> 
> 标签：javascript, jquery

单击文本“单击以显示”时，如何切换复选框及其显示文本？

**我的代码：**编辑-这是实际代码在应用程序中的显示方式-

```
 <td class="txtval"><input type="checkbox" name="798[]" id="798[]" value="1" 0="txtval" 1="" style="display: inline-block;">Yes
<td class="txtval"><input type="checkbox" name="798[]" id="798[]" value="1" 0="txtval" 1="" style="display: inline-block;">No
<td class="txtval"><input type="checkbox" name="798[]" id="798[]" value="1" 0="txtval" 1="" style="display: inline-block;">Maybe</td></tr> 
```

**如何找到名称为 798[] 的输入类型复选框，然后找到上一个并切换它**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:06:14.270

我会去：

```
$("input[name='7365[]']").attr("checked", "checked") 
```

顺便提一句。每个元素的 ID 属性值应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:08:38.130

这将使单击复选框的文本切换显示：

```
$('tr td:first').on("click", function()
                    {
                        $(this).next().toggle();
                    }); 
```

[http://jsfiddle.net/pq7tK/3/](http://jsfiddle.net/pq7tK/3/)

在您的评论中您问：*“我该怎么做：找到名称为 798[] 的输入类型复选框，然后找到前一个 td 并切换它”*

我的猜测是你想要这个：

```
$('input[name='798[]']).closest('td').toggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:10:18.047

您可以使用以下代码进行切换：[切换](http://jsfiddle.net/aMapR/1/)

```
$('input[type=checkbox]').each(function () {
              this.checked = !this.checked;
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T04:11:50.940

```
<table>
    <tr>
        <td valign="top">Fruits: <a href="javascript:;" id="lnkClickToDisplay">[click to display]</a>&nbsp;&nbsp; &nbsp;</td>
        <td id="checkboxesContainer" style="display:none">
            <input type="checkbox" name="7365[]" id="7365[]" value="orange"0="">orange<br />
            <input type="checkbox" name="7365[]" id="7365[]" value="apples"0="">apples<br /><input type="checkbox" name="7365[]" id="7365[]" value="pears"0="">pears<br />                
        </td>
    </tr>
</table>

<script>

$(function() {
    $('#lnkClickToDisplay').click(function() {
        $('#checkboxesContainer').show();
        $(this).hide();
    });
});

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T04:17:20.567

我认为这应该有效

```
$('tr td:eq(1)').hide();

$('tr').on('click', '.toggler', function(e){
    var ct = $(e.currentTarget);
    if(ct.is('.items-hidden')){
        ct.html('click to display').removeClass('items-hidden');
    } else {
        ct.html('click to hide').addClass('items-hidden');
    }
    ct.parent().next().toggle();
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/pq7tK/4/)

# c# - C#如何在Crystal Report中获取datagridview的数据

> ID：15059851
> 
> 赞同：2
> 
> 时间：2013-02-25T03:57:46.163
> 
> 标签：c#, crystal-reports

我在 C# 中有一个窗口窗体。我希望当我单击获取报告时，datagridview 的确切数据也显示在水晶报告查看器中。

```
 DataTable dt = new DataTable();
            DataSet ds = new DataSet();

            dt = dataGridView1.DataSource as DataTable;

            ds.Tables.Add(dt);

            CrystalReport2 cos = new CrystalReport2();

            cos.SetDataSource(ds);

            crystalReportViewer1.ReportSource = cos; 
```

![在此处输入图像描述](../Images/0d2bdeb2e1661aef5d46a9d042806318.png)

![在此处输入图像描述](../Images/23d8b3f56a76c4803a5cc3c47a6561cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:54:46.637

亲爱的 Saima 按照给定的链接。您缺少的是设计模式下的表格。设计模式下的水晶报表需要有一个包含数据集中完全相同字段的表然后你可以使用你的代码，它会很好地工作

希望这可以帮助

[按照这个链接](http://www.codeproject.com/Articles/28899/Crystal-Report-with-DataSet-and-DataTable-using-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T11:31:49.880

```
 SqlDataAdapter sda = new SqlDataAdapter("select * from MRU1 where RegDate between '" + dateTimePicker1.Value.ToString() + "' and '" + dateTimePicker2.Value.ToString() + "'", con);

 DataTable dt = new DataTable();
 sda.Fill(dt);

 RegisCrystalReport cos = new RegisCrystalReport();

 cos.SetDataSource(dt);

 crystalReportViewer1.ReportSource = cos; 
```

# javascript - 使用编码为 utf8 的 readFileSync 在 Jade 电子邮件模板中呈现 HTML

> ID：15059852
> 
> 赞同：3
> 
> 时间：2013-02-25T03:57:53.900
> 
> 标签：javascript, node.js, express, pug

我正在尝试发送一个玉电子邮件模板，但它目前在实际电子邮件中将所有内容呈现为字符串而不是 HTML。我尝试寻找其他编码类型，`fs.readFileSync`但不确定这是否是我应该改变的。

在这里调用模板：

```
var emailTemplate = jade.compile(fs.readFileSync('./views/email/new_user.jade', 'utf8'));
    var html = emailTemplate({
      confirmCode: 233,
      name: params.name,
      siteName: config.siteName
      siteLogo: config.siteLogo
    }); 
```

模板：

```
div(style='width: 300px; margin: 0 auto')
  div(style='text-align: center')
    img(src='#{siteLogo}')
  | Hi #{name},
  p
    | Welcome to #{siteName}! You can now vote on submissions and leave comments.
    | In order for your submissions to be public, please confirm your account by
    | clicking the confirmation link below
  div(style='background-color: #fafafa; border: 1px solid #ddd; border-right: none; border-left: none; display: block; font-weight: bold; line-height: 35px; height: 35px; text-align: center; width:    100%;')
    a(href='http://localhost/users/confirm/') Confirm your account 
```

输出（在我的电子邮件中）：

```
<div style="width: 300px; margin: 0 auto"><div style="text-align: center"><img src="http://localhost/site_logo.png"/></div>Hi USER,<p>Welcome to SITENAME! You can now vote on submissions and leave comments. In order for your submissions to be public, please confirm your account by clicking the confirmation link below</p><div style="background-color: #fafafa; border: 1px solid #ddd; border-right: none; border-left: none; display: block; font-weight: bold; line-height: 35px; height: 35px; text-align: center; width: 100%;"><a href="http://localhost/users/confirm/">Confirm your account</a></div></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T05:13:48.850

我认为您遇到此问题是因为`Content-Type`您的电子邮件不是`text/html`. 尝试这样做。

# ejb - Singletone EJB 不应该维护状态

> ID：15059853
> 
> 赞同：0
> 
> 时间：2013-02-25T03:58:02.277
> 
> 标签：ejb

根据 oracle 文档...

> 单例会话 bean 提供与无状态会话 bean 类似的功能，但与它们的不同之处在于每个应用程序只有一个单例会话 bean，而不是无状态会话 bean 池，其中任何一个都可以响应客户端请求。与无状态会话 bean 一样，单例会话 bean 可以实现 Web 服务端点。
> 
> ***单例会话 bean 在客户端调用之间维护它们的状态，***但不需要在服务器崩溃或关闭时维护它们的状态。

为什么单例会话 bean 在客户端调用之间维护它们的状态？据我所知，一旦调用完成，无状态/单例都应该被清理！请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:10:58.537

答案在您的帖子中，可能是您从上面获得报价的一段。每个应用程序一个实例。它遵循单例模式......

[http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipim](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipim)

> 单例会话 Bean 单例会话 Bean 在每个应用程序中实例化一次，并且在应用程序的整个生命周期内都存在。单例会话 bean 设计用于单个企业 bean 实例在客户端之间共享并由客户端同时访问的情况。
> 
> 单例会话 bean 提供与无状态会话 bean 类似的功能，但与它们的不同之处在于每个应用程序只有一个单例会话 bean，而不是无状态会话 bean 池，其中任何一个都可以响应客户端请求。与无状态会话 bean 一样，单例会话 bean 可以实现 Web 服务端点。
> 
> 单例会话 bean 在客户端调用之间维护它们的状态，但不需要在服务器崩溃或关闭时维护它们的状态。
> 
> 使用单例会话 bean 的应用程序可以指定应在应用程序启动时实例化单例，这允许单例执行应用程序的初始化任务。单例也可以在应用程序关闭时执行清理任务，因为单例将在应用程序的整个生命周期中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:31:46.930

你混淆了这个段落。它说单例会话 bean 提供与无状态会话 bean 类似的功能。并不是说他们**是**无国籍的。您从哪里获得在调用之间必须清理单例的信息？这是不真实的。在您的应用程序中使用单例的一个原因是您可以保存状态并使其在整个应用程序中保持一致。可以使用单例的示例在日志记录中或用于存储应用程序范围的配置信息。有关更多信息，请参见[维基百科](http://en.wikipedia.org/wiki/Singleton_pattern)页面。

# mongodb - mongodb mapreduce - 缺少数据

> ID：15059855
> 
> 赞同：1
> 
> 时间：2013-02-25T03:58:12.553
> 
> 标签：mongodb, mapreduce

这是我的 Map、Reduce 和 finalize 函数。有 4 条记录与键匹配，当使用较少的数据（100 秒）调用 mapreduce 时结果正确，但当使用更多数据（少数 1000 秒）调用 mapreduce 时，计数始终为 2。我检查了 Reduce 函数，对我来说它似乎是正确的，即使它在内部被多次调用以获取更大的数据。这越来越奇怪，我花了很长时间，但仍然无法正确处理。

```
var map1 = function(){
    var mapPosCnt = 0, mapPosSum = 0, mapZeroCnt = 0;
    if (isNumber(this.val1)){
        if(this.val1.toPrecision(10)  > 0.0000000000){
            mapPosCnt = 1;
            mapPosSum = this.val1;
        }else{
            mapZeroCnt = 1;
        }
    }else{
        mapPosCnt = 0, mapPosSum = 0, mapZeroCnt = 0;
    }
    emit({key1: this.key1, key2: this.key2+'', val1: 'val1'}
        ,{key1: this.key1, key2: this.key2+'', posCnt: mapPosCnt, posSum: mapPosSum, posAvg: 0, zeroCnt: mapZeroCnt, val1: this.val1});
}
var reduce1 = function(key, values){
    var retval = {key1: key.CE, key2: key.key2, posCnt: 0, posSum: 0, posAvg: 0, zeroCnt: 0, val1: 0};
    values.forEach(function(value){
        if (isNumber(value.val1)){
            if(value.val1.toPrecision(10)  > 0.0000000000){
                retval.posCnt += 1;
                retval.posSum += value.val1;
            }else{
                retval.zeroCnt += 1;
            }
        }
    })
    return retval;
}
var finalize1 = function(key, value){
    value.key2 = value.key2.toString();
    if(value.posCnt > 0){
        value.posSum = Math.round(value.posSum * Math.pow(10, 6)) / Math.pow(10, 6);
        value.posAvg = Math.round((value.posSum/value.posCnt) * Math.pow(10, 6)) / Math.pow(10, 6);
    }
    return value;
}
collection1.mapReduce(map1, reduce1, {out: {merge: 'collection2'}, finalize: finalize1}, function(err, collection){}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:56:18.390

如果没有文档来测试它，我猜测了一下，但我可以看到几个问题：

1.  发出/减少的值不应包含关键字段。因此，您发出的值应如下所示： `{ posCnt: mapPosCnt, posSum: mapPosSum, zeroCnt: mapZeroCnt }`
2.  reduce 函数不应该像你正在做的那样尝试重新应用发出逻辑，而应该通过对它们的值求和来聚合具有相同键的值。

所以`reduce1`应该看起来像：

```
var reduce1 = function(key, values){
    var retval = { posCnt: 0, posSum: 0, zeroCnt: 0 };
    values.forEach(function(value){
        retval.posCnt += value.posCnt;
        retval.posSum += value.posSum;
        retval.zeroCnt += value.zeroCnt;
    });
    return retval;
}; 
```

# java - 需要有关 Breakout 游戏碰撞错误的帮助

> ID：15059856
> 
> 赞同：0
> 
> 时间：2013-02-25T03:58:18.320
> 
> 标签：java, swing

这是 12 年级的 OPP 作业。

目前我有一个问题，球偶尔会进入积木而不是反射。

这是我的代码：

main 如何检查球是否击中障碍物：

```
public void theBall(){
    //System.out.println(blocks.size());
    if(!started){
        balls.get(0).withPaddle(paddle.returnX());
    }
    if(started){
        for(int i=0;i<balls.size();i++){
            if(balls.get(i).returnX()>=0 && balls.get(i).returnX()<=800 && balls.get(i).returnY()>=0){
                balls.get(i).move();
            }
            if(balls.get(i).returnX()+balls.get(i).returnDx()<= 0){
                balls.get(i).collide(1);//collide with left wall
            }
            if(balls.get(i).returnX()+10+balls.get(i).returnDx() >= 800){
                balls.get(i).collide(2);//collide with right wall
            }
            if(balls.get(i).returnY()-balls.get(i).returnDy() <= 0){
                balls.get(i).collide(3);//collide with up wall
            }

            if(paddle.returnX() < balls.get(i).returnX() && balls.get(i).returnX()< paddle.returnX()+paddle.returnSize() && balls.get(i).returnY()-balls.get(i).returnDy() >= 545){//fix this && balls.get(i).returnY()-balls.get(i).returnDy() <= 560
                balls.get(i).collidePaddle(balls.get(i).returnX()-paddle.returnX());//collide with paddle
                //System.out.println(ball.returnDy());
            }
            for(int j=0;j<blocks.size();j++){
                //blocks.get(j).getHit(balls.get(i));
                if(balls.get(i).returnX()+10+balls.get(i).returnDx() >= blocks.get(j).returnX() && balls.get(i).returnX()+10+balls.get(i).returnDx() <= blocks.get(j).returnX()+5 && balls.get(i).returnY() >= blocks.get(j).returnY() && balls.get(i).returnY() < blocks.get(j).returnY()+50){
                    if(!blocks.get(j).returnHit()){
                        balls.get(i).collide(2);//collide with right wall (block's left)
                        blocks.get(j).getHit(balls.get(i));
                        System.out.println("boiboiboiboibo1");
                    }
                }

                if(balls.get(i).returnX()+balls.get(i).returnDx() <= blocks.get(j).returnX()+50 && balls.get(i).returnX()+balls.get(i).returnDx() >= blocks.get(j).returnX()+45 && balls.get(i).returnY() >= blocks.get(j).returnY() && balls.get(i).returnY() < blocks.get(j).returnY()+50){
                    if(!blocks.get(j).returnHit()){
                        balls.get(i).collide(1);//collide with left wall (block's right)
                        blocks.get(j).getHit(balls.get(i));
                        System.out.println("boiboiboiboibo2");
                    }
                }

                if(balls.get(i).returnX() >= blocks.get(j).returnX() && balls.get(i).returnX() < blocks.get(j).returnX()+50 && balls.get(i).returnY()-balls.get(i).returnDy() <= blocks.get(j).returnY()+50 && balls.get(i).returnY()-balls.get(i).returnDy() >= blocks.get(j).returnY()+45){
                    if(!blocks.get(j).returnHit()){
                        balls.get(i).collide(3);//collide with up wall (block's bottom)
                        blocks.get(j).getHit(balls.get(i));
                        System.out.println("boiboiboiboibo3");
                    }
                }
                if(balls.get(i).returnX() >= blocks.get(j).returnX() && balls.get(i).returnX() < blocks.get(j).returnX()+50 && balls.get(i).returnY()+10-balls.get(i).returnDy() >= blocks.get(j).returnY() && balls.get(i).returnY()+10-balls.get(i).returnDy() <= blocks.get(j).returnY()+5){
                    if(!blocks.get(j).returnHit()){
                        balls.get(i).collide(4);//collide with down wall (block's top)
                        blocks.get(j).getHit(balls.get(i));
                        System.out.println("boiboiboiboibo4");
                    }
                }
            }
            for(int j=0;j<specialBlocks.size();j++){
                if(balls.get(i).returnX()>=specialBlocks.get(j).returnX() && balls.get(i).returnX()<=specialBlocks.get(j).returnX()+100 && balls.get(i).returnY()>=specialBlocks.get(j).returnY() && balls.get(i).returnY()<=specialBlocks.get(j).returnY()+100){
                    oneAndThreeBalls(i, j);
                    balls.get(i).changeType(j);
                }
            }
        }
    }
} 
```

球如何反射：

```
public void collide(int collideWith){
    if(collideWith==1){//collide with left wall
        if(90<direction && direction<180){
            direction = 180-direction;
        }
        if(180<direction && direction<270){
            direction = 540-direction;
        }
    }
    if(collideWith==2){//collide with right wall
        if(0<direction && direction<90){
            direction = 180-direction;
        }
        if(270<direction && direction<360){
            direction = 540-direction;
        }
    }
    if(collideWith==3){//collide with up wall
        direction = 360-direction;
    }
    if(collideWith==4){//collide with down wall
        direction = 360-direction;

    }
} 
```

我很清楚这个错误是由于对边界的双重检查。当球在一个街区的角落时，它就会发生。但这是我能想到的检查球的位置以反映的唯一方法。关于如何修复此错误的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:03:39.163

为什么不这样做：

1) 弹起后，您停止检查该球的碰撞，直到游戏的下一个滴答声。这样，一个球每刻只能反弹一次。

2）在与块碰撞并反弹后，您忽略该特定块与球之间的碰撞，直到球不与块重叠为止。这样一来，球就不会在同一次撞击中两次虚假地从一个街区反弹。

顺便说一句，您有很多复制和粘贴的代码，只是数字稍有变化等等。如果你找到了一种方法来用稍微不同的参数调用的方法来重述它，你的代码将变得更加整洁，问题的基本对称性也将更加明显。

# c - ld 和静态库“未定义引用”的问题

> ID：15059859
> 
> 赞同：6
> 
> 时间：2013-02-25T03:58:24.947
> 
> 标签：c, gcc, makefile, static-libraries, ld

这个有点尴尬。我知道发生了什么，但不知道为什么。我收到“未定义的引用”错误，这意味着链接器 (ld) 没有从我创建的库中放入代码。

我目前正在玩 Zed A. Shaw [“Learn C the Hard Way”](http://c.learncodethehardway.org/)课程。我正在尝试完成练习 32，但我不断收到同样的错误。

在本书中，您开发了一个运行以下命令的 make 文件：

```
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  build/liblcthw.a \
    tests/list_tests.c   -o tests/list_tests 
```

其中 -g 是启用调试信息，-Wall 是启用“所有”警告，-Wextra 是启用更多警告，-Isrc 将 src 目录包含到库目录中，-o tests/list_tests 是产生输出该目录中的名称，-DNDEBUG 用于启用代码中的变量，-O2 用于级别 2 优化（无论这意味着什么）和 build/liblcthw.a 以包含该库（正在构建的那个）。其余的我不知道他们在做什么。

如果我猜对了，src 目录中有一个 list.c，它创建了一个对象 list.o。该对象稍后通过 ar 和 ranlib 包含在 lib 中。所以调用头文件 list.h 应该让 ld 在 build/liblcthw.a 中查找 list.o。问题是 ld 由于某种原因没有读取 build/liblcthw.a。所以我得到了这个未定义的错误引用。

我曾尝试联系 Zed，但他显然是个大忙人。所以我希望在这里得到帮助。告诉我是否需要添加有关该问题的更多信息。到目前为止，这是整个图书馆的链接[。](http://dl.dropbox.com/u/105216643/liblcthw.tar.bz2)

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T04:03:55.447

下面的工作吗？

```
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG 测试/list_tests.c \
   -o 测试/列表测试 -Lbuild -llcthw

```

这样做是使用`-l`链接库的`-L`选项，以及指定链接器应在其中查找库的附加目录的选项。不得在参数中指定前缀`lib`和后缀。`.a``-l`

请注意，如果您在“build”目录中还有一个共享库 (*.so)，事情就会变得复杂。为简单起见，您应该删除“liblcthw.so”文件并仅保留“liblcthw.a”，或者尝试通过将其列为输入来链接静态库，就像您最初所做的那样，但指定它*在*您的源文件之后：

```
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG 测试/list_tests.c \
   -o 测试/list_tests 构建/liblcthw.a

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-01T11:51:02.787

你可以简单地写

`$ gcc -Isrc filename.c -o anyname.o /path/to/direc/archivefile/stored/archivedfile.a`

当我收到返回 -ld 的错误时，我运行了它它对我有用

# frameworks - yii-帮助使用多对多关系

> ID：15059860
> 
> 赞同：0
> 
> 时间：2013-02-25T03:58:38.293
> 
> 标签：frameworks, yii, many-to-many, table-relationships

所有，我需要从它的表中获取一个基于主键的表值，然后我在另一个表上使用它。我可以这样说明我的问题：

**表一**

*   id_a
*   att_a1
*   att_a2
*   att_a3
*   att_a4
*   att_a5

**表 b**（虚拟表）

*   id_a
*   id_c
*   百分比_a1
*   百分比_a2

**表c**（这里我需要计算我的结果）

*   id_c
*   att_c1`= att_a1*percentage_a1`
*   att_c2`= att_a2*percentage_a2`
*   att_c3`= att_c2+att_a4`

我怎么能在 Yii 中做到这一点？

任何回应请谢谢，我的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T13:05:11.707

您需要做几件事。您需要在中间表的类内的两个表之间建立多对多关系。您需要为每个外部表设置设置。

请遵循以下说明：

[http://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

# python - 数据清理和重新格式化

> ID：15059862
> 
> 赞同：0
> 
> 时间：2013-02-25T03:58:52.500
> 
> 标签：python, data-scrubbing

Python代码

清理和重新格式化数据是计算机科学中的一个现实问题，它是接收可能格式不正确的人工输入并将其清理为标准格式的过程。我如何编写一个程序，要求某人输入电话号码，然后如果可能的话以标准格式返回该电话号码，否则会出错。

例子：

请输入包含区号的电话号码：607-8675309

(607)867-5309

请输入包含区号的电话号码：16078675309

(607)867-5309

请输入包含区号的电话号码：(607) Jenny 我得到了你的号码，我需要让你成为我的，Jenny 不要更改你的号码，8675309

(607)867-5309

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:10:27.577

您需要清理输入字段并检查所需的输出并相应地返回消息。Python Web 框架（如[Django](http://djangoproject.com/)、[Web2py](http://www.web2py.com/)、[Flask](http://flask.pocoo.org/) ）的存在可以精确地帮助解决这些类型的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:03:35.023

我建议使用正则表达式清理/验证电话号码格式。

# python - Python 类错误

> ID：15059865
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:59:32.683
> 
> 标签：python, class, attributes

```
 from Card import Card

    class Hand(object):
        def __init__(self):
            self.cards=[]

        def takeCards(self, cards):
            self.cards.append(card)
            pass

        def clear(self):
            self.card=[]
            pass

        def getTotal(self):
            for card in slef.cards:
                if card.value >21 and card ==11:
                    return 1
                elif not card.value:
                    return None
                else:
                    total+=card.value        
            pass

        def isBusted(self):
            if getTotal>21:
                return True

        def __str__(self):
            if self.__cards:
                card = ""
                for i in self.__cards:
                    card += str(i) + "\t"
            else:
                card = "Empty"
            return card + "\t(value " + str(self.getTotal())+")"

from Hand import Hand

class Dealer():

    def __init__(self,name):
        super(Dealer,self).__init__() 
        self.name = name
        pass

    def takeCards(self,cards):
        self.__hand.takeCards(cards)
        pass

    def clearHand(self):
        self.Hand.clear(card)
        pass 
```

我正在写一个关于二十一点的游戏，但我有一些无法修复的错误......我有两个班级。当我测试我的代码时，程序说，经销商对象没有属性“手”。在明确的手的定义。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:17:57.557

我看到的第一个问题是您正在通过 self 访问 Hand。在您的 Dealer 类中，您没有实例化 Hand 类。您可以在 Dealer 课程中尝试以下操作。

```
class Dealer(object):

    def __init__(self,name):
        super(Dealer,self).__init__() 
        self.name = name
        self.__hand = Hand() # Instance Hand so you can use its contents.
        pass

    def takeCards(self,cards):
        self.__hand.takeCards(cards)
        pass

    def clearHand(self):
        # self.Hand.clear(card)
        self.__hand.clear(card) # fixed this to point to our instance
        pass 
```

# java - Thread.dispatchUncaughtException 被抛出，但我没有任何线程

> ID：15059866
> 
> 赞同：1
> 
> 时间：2013-02-25T03:59:36.200
> 
> 标签：java

我收到了这个错误 dispatchUncaughtException ，我不知道这意味着什么，谷歌搜索在回答它是什么方面效果不佳。我总是在第一次运行我为递归插值搜索编写的一些代码时得到它。

```
public static int interpolationSearch(int[] array, int target) {
    if (array.length < 4)
        return sequentialSearch(array, target);
    else {
        long numLeft = target - array[0];
        long numRight = array.length - 1;
        long numerator = numLeft * numRight;
        long denominator = array[array.length - 1] - array[0];
        int i = (int) Math.floor(numerator / denominator);
        //int i = (int)Math.floor(((target - array[0])*(array.length - 1))/(array[array.length - 1] - array[0]));
        if (target == array[i]) //center point is answer
            return i;
        if (target < array[i]) //recurse on left side
            return interpolationSearch(Arrays.copyOfRange(array, 0, i),
                    target);
        //recurse on right side
        return i
                + interpolationSearch(
                        Arrays.copyOfRange(array, i, array.length), target);
    }
} 
```

知道是什么导致了这个错误以及如何解决它吗？我注意到我一直在为 i 得到 0，每次发生这种情况时，我的计算都不应该是这样。

编辑：好的，所以现在我只得到一个 IndexOutOfBoundsException。虽然我实际上并没有改变任何东西，所以我有点困惑。尽管我不知道如何计算，但不知何故数学是错误的。如果你知道逻辑错误是什么，请告诉我，否则我只需要解决它。我知道这个例外是怎么回事。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-25T05:07:16.890

我认为您始终获得 0 的原因是由于 if 条件。您正在检查数组长度小于 4 的情况，如果是，则再次调用该函数。数组的值是否发生了变化？

在 Java 中为每个运行的进程分配线程。您正在重复调用您的函数，因此可以安全地假设每次都分配了一个新线程。由于线程池中的线程数量有限，这可能会导致错误，因为递归永远不会中断。如果我忽略了数组值被更改的事实，请忽略这一点。:)

# matlab - 从 matlab 图中仅提取一个尖峰

> ID：15059867
> 
> 赞同：-1
> 
> 时间：2013-02-25T03:59:41.147
> 
> 标签：matlab, octave

我在两个矩阵（129 x 1）之间有一个 matlab 图，我只想从图中看到的多个尖峰中提取唯一的第一个尖峰。我是 Matlab 的新手。

![在此处输入图像描述](../Images/a0a9d84c54dcf6f8fc00be3fc25f3be2.png)

-约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:21:25.163

要么自己编写代码，要么使用这个[峰值查找](http://www.mathworks.com/matlabcentral/fileexchange/25500-peakfinder)算法。那个效果很好。

# wpf - 如何通过桌面程序设置win8 toast图标

> ID：15059868
> 
> 赞同：3
> 
> 时间：2013-02-25T03:59:43.913
> 
> 标签：wpf, windows, toast

我想通过 Toast 通知自定义，我的程序是桌面程序（WPF）。当我完成它时，我发现 toast 的图标是默认的 windows 软图标，而不是我的程序的。所以我想知道如何设置它？

# memory - 什么设置了处理器可以访问的 RAM 上限？

> ID：15059869
> 
> 赞同：2
> 
> 时间：2013-02-25T03:59:50.180
> 
> 标签：memory, processor

根据IIT 教授[的](http://www.youtube.com/watch?v=p4RcMLFIr5o&list=PL0E131A78ABFBFDD0&index=2)讲座，8 位 8085 处理器将具有 8 位寄存器，可以配对访问 16 位地址。他通过告诉我们程序计数器和堆栈指针寄存器是 16 位来强制执行它可以访问 16 位地址的事实。他后来还继续告诉我们，数据总线是 8 位的，但地址总线是 16 位的。

因此，这是否意味着 32 位处理器能够访问 64 位地址？但我知道 32 位处理器可以处理的最大容量约为 4GB。是什么设定了这个限制？

**更新：**就像你们中的一些人指出的那样，使用 PAE 可以扩展这个地址，但是没有 PAE 是什么设置了这个限制？换句话说，为什么没有 PAE 的 32 位奔腾处理器有 4GB 的上限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T05:02:48.440

不会。8085 有 8 位寄存器和 16 位地址空间，但这并不意味着 64 位计算机需要能够访问 128 位。每个架构都是不同的架构。

答案是，知道机器地址空间的唯一方法是让制造商告诉你。每个地址空间的选择都有其自身的原因。8086 有 16 位寄存器和 20 位地址空间。ARM2 有 32 位寄存器和 26 位地址空间。80286 有 16 位寄存器和 24 位地址空间。amd64 有 64 位寄存器，并且有 40 位和 48 位物理地址空间实现。地址也可以在多个时钟周期内发送到存储器控制器。银行切换可用于允许任意大小的地址空间。

奔腾处理器的地址空间是多少？

> 每个字节都被分配了一个唯一的地址，称为物理地址，范围从零到最大 2^32–1（4 GB） -- Pentium Processor Family Developer's Manual, Volume 3: Architecture and Programming Manual

[http://www.intel.com/design/pentium/MANUALS/24143004.pdf](http://www.intel.com/design/pentium/MANUALS/24143004.pdf)

现代 Intel 64 处理器的地址空间是多少？

> Intel 64 架构将软件的线性地址空间增加到 64 位，并支持高达 40 位的物理地址空间。-- Intel 64 和 IA-32 架构软件开发人员手册，第 1 卷：基本架构

[http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-1-manual.pdf](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-1-manual.pdf)

现代英特尔处理器在 32 位模式下的地址空间是多少？

> 地址空间——在 IA-32 处理器上运行的任何任务或程序都可以寻址高达 4 GBytes（2^32 字节）的线性地址空间和高达 64 GBytes（2^36 字节）的物理地址空间——英特尔64 和 IA-32 架构软件开发人员手册，第 1 卷：基本架构

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:20:20.160

32 位处理器只能寻址 4GB 的内存是不正确的，例如使用[PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)最多可以寻址 36 位地址空间。

基本上一般规则是相同的，它主要取决于系统板逻辑和 CPU 对最大地址大小（地址寄存器大小）的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:05:35.937

有几个限制：

1.  地址寄存器的大小和地址计算逻辑。

2.  从处理器出来的物理地址线的数量。

使用[PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)，32 位处理器的地址路径大于 32 位。

# grails - 如何将 args 添加到 grails 中的自定义 i18n 消息？

> ID：15059872
> 
> 赞同：0
> 
> 时间：2013-02-25T04:00:17.870
> 
> 标签：grails

我有一个我声明为“unique:true”的对象，然后我在 grails 的 message.properties 中创建了一条自定义消息。它看起来正确，但我不知道如何将参数传递给它。甚至可能吗？

```
net.mypackage.MyObject.myField.unique = The Object {0} already belongs to the Object Group {1}. 
```

我知道我可以通过“g：message”传递参数，但在这种情况下，我通过这个片段呈现我的错误：

```
<g:hasErrors bean="${object}">
                        <ul class="errors no-margin" role="alert">
                            <g:eachError bean="${object}" var="error">
                            <li <g:if test="${error in org.springframework.validation.FieldError}">data-field-id="${error.field}"</g:if>><g:message error="${error}"/></li>
                            </g:eachError>
                        </ul>
                    </g:hasErrors> 
```

我可能可以像说做一个 if-else 来确定错误是否是“唯一约束”错误然后传递值，但除此之外我没有任何想法。我在互联网上看到的大多数自定义消息示例都与自定义验证器有关。我试过了..但我还不想诉诸于此......关于如何做到这一点的任何意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T09:02:58.207

从 Grails 文档（[http://grails.org/doc/latest/guide/i18n.html](http://grails.org/doc/latest/guide/i18n.html)）：

```
<g:message code="my.localized.content" args="${ ['Juan', 'lunes'] }" /> 
```

# wcf - 如何处理来自 wcf 服务的大数据

> ID：15059873
> 
> 赞同：0
> 
> 时间：2013-02-25T04:00:34.197
> 
> 标签：wcf, silverlight-4.0

我有 wcf 服务，其中一种方法返回一个列表。从 oracle 数据库中获取数据，这是一个大数据（以十万为单位的记录）。使用 wcf 客户端测试时，此方法可以正常工作。当我在 silverlight 应用程序中使用相同的服务时，我得到了超时异常。请建议必要的步骤来处理大数据或避免这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:47:24.980

几年前我工作的一个应用程序有类似的要求。如果我没记错的话，我们创建了一些自定义 WCF 行为来压缩/解压缩数据集并将其作为二进制数据传输。您也可以流式传输数据，但在我看来这有点脆弱，需要在客户端上做更多的工作。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:28:45.493

您可以通过在对象集合中保存数据并使用 silverlight 数据网格分页来做到这一点，因此通过适当的编码，您可以一次显示至少 1000 条记录，因为根据我的观点，用户无法通过向下滚动和向上滚动来查看数以万计的记录。如果您不想分页，那么当用户向上滚动或向下滚动时，根据索引进行数据获取。在编码级别处理尽可能多的数据。

以上是我在上一个项目中所做的事情。

# opennlp - opennlp chunker 和 postag 结果

> ID：15059878
> 
> 赞同：16
> 
> 时间：2013-02-25T04:01:17.157
> 
> 标签：opennlp

Java-opennlp

我是 opennlp 的新手，我正在尝试分析句子并获得 post 标签和块结果，但我无法理解值的含义。是否有任何表格可以解释帖子标签和块结果值的完整形式含义？

```
Tokens: [My, name, is, Chris, corrale, and, I, live, in, Philadelphia, USA, .]
Post Tags: [PRP$, NN, VBZ, NNP, NN, CC, PRP, VBP, IN, NNP, NNP, .]
chunk Result: [B-NP, I-NP, B-VP, B-NP, I-NP, O, B-NP, B-VP, B-PP, B-NP, I-NP, O] 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T17:19:20.607

POS 标签来自[Penn Treebank 标签集](https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)。组块是名词短语 (NP)、动词短语 (VP) 和介词 (PP)。“B-..”标志着这样一个短语的开始，“I-..”表示类似于“inner”的意思，即这个短语在这里继续（参见[OpenNLP 文档](http://opennlp.apache.org/docs/1.8.3/manual/opennlp.html#tools.chunker.training)）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-18T13:49:25.123

S -> 简单陈述性从句，即不由（可能为空的）从属连词或 wh 词引入且不表现主谓倒置的子句。

SBAR -> 由（可能为空的）从属连词引入的子句。

SBARQ -> 由 wh 词或 wh 短语引入的直接问题。间接问题和关系从句应括为 SBAR，而不是 SBARQ。

SINV -> 倒置陈述句，即主语跟在时态动词或情态之后的句子。

SQ -> 在 SBARQ 中的 wh 短语之后，倒置的是/否问题，或 wh 问题的主要子句。

ADJP -> 形容词短语。

ADVP -> 副词短语。

CONJP -> 连词。

碎片 -> 片段。

INTJ -> 感叹词。大致对应于词性标签 UH。

LST -> 列表标记。包括周围的标点符号。

NAC->不是成分；用于显示 NP 中某些名词前修饰语的范围。

NP -> 名词短语。

NX -> 在某些复杂的 NP 中用于标记 NP 的头部。非常粗略地对应于 N-bar

PP -> 介词短语。

PRN -> 括号。

PRT -> 粒子。应标记为 RP 的单词的类别。

QP -> 量词短语（即复杂的度量/数量短语）；在 NP 中使用。

RRC -> 简化的相对条款。

UCP -> 与协调短语不同。

VP -> 动词短语。

WHADJP -> Wh 形容词短语。包含 wh 副词的形容词短语，如 how hot。

WHAVP -> Wh 副词短语。引入一个带有 NP 间隔的子句。可以为空（包含 0 补语）或词法，包含 wh 副词，例如 how 或 why。

WHNP -> Wh 名词短语。引入一个带有 NP 间隔的子句。可能是空的（包含 0 补语）或词法的，包含一些 wh 词，例如谁，哪本书，谁的女儿，一个都没有，或者有多少豹子。

WHPP -> Wh 介词短语。介词短语包含一个 wh 名词短语（例如 of which 或 by who authority），它要么引入 PP 间隙，要么被 WHNP 包含。

X -> 未知、不确定或不可括号。X 常用于括号中的拼写错误和括号中的...结构。

信用： http: [//mail-archives.apache.org/mod_mbox/opennlp-users/201402.mbox/%3CCACQuOSXOeyw2O-AZtW3m=iABo1=3cpZOdPiWFXoNwN-SVWo4gQ@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/opennlp-users/201402.mbox/%3CCACQuOSXOeyw2O-AZtW3m=iABo1=3cpZOdPiWFXoNwN-SVWo4gQ@mail.gmail.com%3E)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-20T11:01:40.740

请参阅[POSTag 列表](http://nishutayaltech.blogspot.com/2015/02/penn-treebank-pos-tags-in-natural.html)以获取标签详细信息。

**像“ B-NP** ”这样的块标签由两个或三个部分组成：
**第一部分**：

```
B - marks the beginning of a chunk
I - marks the continuation of a chunk
E - marks the end of a chunk 
```

作为一个chunk，它可能只有一个词长（如上例中的“She”），它可以同时是一个chunk的开头和结尾。

**第二部分**：

```
NP - noun chunk
VP - verb chunk 
```

如需更多参考，您可以参考 [OpenNLP 文档](https://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.parser.chunking)。

# java - 在数组中搜索重复项

> ID：15059880
> 
> 赞同：0
> 
> 时间：2013-02-25T04:01:30.490
> 
> 标签：java, arrays, comparison

如果我用这个数据初始化一个人对象数组

```
myPeople[0] = new Person("Alice", "Foo", 22 );
myPeople[1] = new Person("Alice", "Foo", 22 );
myPeople[2] = new Person("Bob", "Bar", 2);
myPeople[3] = new Person("Joe", "Blogs", 64);
myPeople[4] = new Person("Jane", "Joe", 42); 
```

我想用我的方法返回重复的数量。在这种情况下，它将是 2，因为 Person 0 和 1 是彼此的重复项。如果我要将对象 2 更改为相同，它应该返回 3。目前我的方法返回 1 和两个重复项，4 和三个。

有问题的方法：

```
public static int searchForClones(Person[] array){
    int numberOfClones=0;
    for(int j =0; j<array.length-1; j++)
    {
        String tmp1 = array[j].getFirstName();          //Store first element of the array in tmp so it can be compared
        String tmp3 = array[j].getLastName();   
        for(int i = 0; i<array.length-1; i++)           //Loop to compare for every element in the array
        {   
            String tmp2 = array[i].getFirstName();      //Do the same for the next element
            String tmp4 = array[i].getLastName();
            if(i!=j)                                    //If i an j aren't the same element
            {

                if(tmp1.equals(tmp2) && tmp3.equals(tmp4)   //and if they match
                    && array[i].getAge()==array[i+1].getAge())
                {   
                    numberOfClones++;                   //increment the number of clones
                }
           }
       }
    }
    return numberOfClones;
} 
```

我真的很感激任何帮助，因为我认为唯一的问题是我增加克隆数量的方式。也许我需要检查一些东西并在那之后增加一个适当的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:04:13.750

这是一种方法：

```
public static int searchForClones(Person[] array){
    if(array == null || array.length == 0) return 0;

    return array.length - new HashSet(Arrays.asList(array)).size();
} 
```

与往常一样，确保正确地实现 Person 对象的`equals`and`hashCode`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:34:27.957

```
public static int searchForClones(Person[] array)
{
    int numberOfClones = 0;
    for(int i=0; i<array.length-1; i++)
    {
        for(int j=i+1; j<array.length; j++)
        {
            if(array[i].getFirstName().equals(array[j].getFirstName())
                && array[i].getLastName().equals(array[j].getLastName())
                && array[i].getAge() == array[j].getAge()) )
            {
                numberOfClones++;
            }
        }
    }

    return numberOfClones > 0 ? ++numberOfClones : 0;  // To count the one which was duplicate of itself (as per your comment)
} 
```

用上面的程序
输入：

```
myPeople[0] = new Person("Alice", "Foo", 22 );
myPeople[1] = new Person("Alice", "Foo", 22 );
myPeople[2] = new Person("Bob", "Bar", 2);
myPeople[3] = new Person("Joe", "Blogs", 64);
myPeople[4] = new Person("Jane", "Joe", 42); 
```

输出：2

但是如果输入是：

```
myPeople[0] = new Person("Alice", "Foo", 22 );
myPeople[1] = new Person("Alice", "Foo", 22 );
myPeople[2] = new Person("Bob", "Bar", 2);
myPeople[3] = new Person("Joe", "Blogs", 64);
myPeople[3] = new Person("Joe", "Blogs", 64); 
```

你怎么期待计数？？？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:08:43.353

1.  您的第二个`for`应该从`j+1`或者您将比较同一对元素两次，例如一次 when`j=0`和`i=1`，第二次 when`j=1`和`i=0`。

2.  将第二个 for 循环的条件更改为，`i<array.length`否则您将跳过最后一个元素

3.  改变

    ```
    array[i].getAge()==array[i+1].getAge() 
    ```

    至

    ```
    array[i].getAge()==array[j].getAge() 
    ```

    因为您想将第一次迭代的元素与第二次迭代的元素进行比较，而不是“邻居”元素。

另请记住，此方法将返回相同元素对的数量，而不是相同元素的数量。

要计算相同元素的数量，您可能应该更早地对数组进行排序，以便相同的元素彼此靠近，然后遍历该数组，并且每对第一对 X 元素将计数器增加 2（因为有两个相同的元素），对于每下一对 X 元素将 counter 增加 1（现在只有一个新元素）。

# android - 使用本地服务更新 Activity 中的 Textview

> ID：15059886
> 
> 赞同：6
> 
> 时间：2013-02-25T04:02:23.357
> 
> 标签：android, service, textview

我有一个带有 R.id.eventDistance 和 R.id.eventTime 的活动来显示基于当前位置的距离和旅行时间。我使用我的位置服务类每 30 秒计算一次这些值。

我的问题是：如何更新 Activity 中的 TextView？我尝试查找问题并找到了一些可能的解决方案，例如使用 BroadcastReceiver 并在 onReceive() 方法中调用 TextView.setText() 。我不确定这是怎么做到的。我是否应该像这样传递 Activity 类：

```
public class MyReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Intent i = new Intent(context, HomeActivity.class);
   }
} 
```

我不知道在那之后该怎么做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T04:24:43.740

请看这个流程。

1.在您想要更新 UI 时的 LocationService 类中。在您的情况下，它应该每 30 秒调用一次。

```
Intent i = new Intent("LOCATION_UPDATED");
i.putExtra("<Key>","text");

sendBroadcast(i); 
```

2.在你的 UI (HomeActivity) 类中

在 onCreate()

```
registerReceiver(uiUpdated, new IntentFilter("LOCATION_UPDATED")); 
```

在班上

```
private BroadcastReceiver uiUpdated= new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        TextView.setText(intent.getExtras().getString("<KEY>"))

    }
}; 
```

在 onDestroy()

```
unregisterReceiver(uiUpdated); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:27:04.643

您应该将 Activity 绑定到您的服务，以便它们可以直接通信和消息传递。

## 参考

[http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

# android - 使用 TextView.setText(Html.fromHtml(string)) 将具有 html 图像标签的字符串转换为图像

> ID：15059888
> 
> 赞同：2
> 
> 时间：2013-02-25T04:02:30.390
> 
> 标签：android, android-layout

我有一个字符串，如下所示：

```
String text = "<img src="https://www.google.com/images/srpr/logo3w.png">" 
```

当我做

```
TextView.setText(Html.fromHtml(text)); 
```

我需要在活动中显示图像。

**我不想使用 WebView。**

请让我知道实现这一目标的其他方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:08:41.943

你必须使用异步任务，在`doInbackground()`设置图像到文本视图中打开连接`onPostExecute()`

```
try {
        /* Open a new URL and get the InputStream to load data from it. */
        URL aURL = new URL("ur Image URL");
        URLConnection conn = aURL.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();
        /* Buffered is always good for a performance plus. */
        BufferedInputStream bis = new BufferedInputStream(is);
        /* Decode url-data to a bitmap. */
        Bitmap bm = BitmapFactory.decodeStream(bis);
        bis.close();
        is.close();

        Drawable d =new BitmapDrawable(bm);
       d.setId("1");
 textview.setCompoundDrawablesWithIntrinsicBounds(0,0,1,0);// wherever u want the image relative to textview
        } catch (IOException e) {
        Log.e("error", "Remote Image Exception", e);
        } 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:58:27.327

我遵循以下链接中的想法。

[http://www.docstoc.com/docs/120417139/How-To-Implement-Htmlfromhtml-With-Imagegetter-In-Android](http://www.docstoc.com/docs/120417139/How-To-Implement-Htmlfromhtml-With-Imagegetter-In-Android)

[http://shiamiprogrammingnotes.blogspot.com/2010/09/textview-with-html-content-with-images.html](http://shiamiprogrammingnotes.blogspot.com/2010/09/textview-with-html-content-with-images.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T05:17:30.897

您需要在`strings.xml`

```
<string name="nice_html">
<![CDATA[<img src='https://www.google.com/images/srpr/logo3w.png'>
]]></string> 
```

然后，在您的代码中：

```
TextView foo = (TextView)findViewById(R.id.foo); 
foo.setText(Html.fromHtml(getString(R.string.nice_html))); 
```

# couchdb - 无法在 couchdb futon 中运行用 python 编写的视图

> ID：15059891
> 
> 赞同：0
> 
> 时间：2013-02-25T04:02:53.903
> 
> 标签：couchdb, couchdb-futon, couchdb-python

我最近开始将 couchdb 与 python-couchdb 一起使用。问题是当我使用蒲团运行我用 python 编写的视图时，我收到以下错误消息：

错误：os_process_error

{退出状态，4}

即使对于默认视图，它也会崩溃。

def fun(doc): yield None, doc 我将 local.ini 中的 query_server 设置为

[query_server] python=C:\Python27\Lib\site-packages\couchpy-0.2dev-py2.7.egg\couchpy ![在此处输入图像描述](../Images/e74cb70fea3a74cf5f67a271558be97b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:30:52.263

Windows 的退出状态 4 表示 CouchDB 无法打开或定位文件。我想你会用[couchpy](http://pythonhosted.org/CouchDB/views.html)视图服务器搞砸[couchpy](http://code.google.com/p/couchpy/)项目。第一个只是（afaik）客户端库，而第二个是视图服务器附带的[另一个客户端库的一部分。](http://code.google.com/p/couchdb-python/)

UPD：对于 Windows Python 视图服务器，根据您的 Python 路径安装下一行：

```
[query_servers]
python=C:\Python27\Scripts\couchpy.exe 
```

# string - C# 中使用 List 或 Strings 或 ado.net 的奇怪的内存不足异常？

> ID：15059893
> 
> 赞同：1
> 
> 时间：2013-02-25T04:03:21.727
> 
> 标签：string, list, memory-management, ado.net, system.reactive

我有一个很大的疑问。问题是我班上的内存不足异常。但这里似乎有些奇怪。我在 dll 中有课程。

```
 public class MyClass : IDisposible
 {
     List<ClassA> a_classLists = new .....// new instance.
     List<ClassB> b_classLists = new .....// new instance.

     public string Method1(int IDValue)
     {
         // do here some web service call and get some XML data from it.
         // parse the xml.
         // Iterate through a for loop and add each node value to a_classLists
         // Usually contains 10 or 15 items

         Method2();  // from here calling another method
         FinalSaveToDB(); // finally save the data to DB
         return "";
     }

     private void Method2()
     {
         // do here some web service call and get some XML data from it.
         // Iterate through a forloop.
         // parse the xml. [large xml data. ie, image in binary format]
         // For each loop add image binary data and other xml to b_classLists
         // Usually it contains 50 or 60 such large lists.
     }

     private void FinalSaveToDB()
     {
         // using sqlbulkcopy, i am saving the data in the 2 lists to 2 different
         // tables in the DB.
         // Tab lock is mentioned in sqlbulk class.
         // Actually 2 sqlbulkcopy class for 2 lists.
         // Only 1 sql connection opens, then do the sqlbulkcopy. [there is no dataset or datareader]
         // sqlconnection closes. I am using "using" clause for sqlconnection, bulkcopy etc
         // these all are working fine.
     }

     private void Dispose()
     {
         // here nulling everything
         // proxy null
         // all the lists null....
     }
 } 
```

这是我使用响应式框架的 Observable.Start 方法实例化 1000 次的类，如下所示...

```
 private IObservable<string> SendEmpDetails(Employee emp)
  {
    using (MyClass p = new MyClass())
    {
      return Observable.Start(() => p.Method1(emp.ID), Scheduler.ThreadPool);
    } 
   // here I hope it will call the Dispose and release all objects in the class.
  }

   // This EmployeeLists contains 1000 employee objects
   EmployeeLists.ToObservable().Select(x => SendEmpDetails(x).Select(y => new { emp = x, retval = y }))
                     .Merge(10)
                     .ObserveOn(Scheduler.CurrentThread)
                     .Subscribe(x =>
                     {
                        SendStatus(x.retval.Item1, x.retval);
                     }); 
```

即使，为什么我会出现内存不足异常？？？启动应用程序后，当它处理第 200 个（或以上）MyClass 对象时，它会抛出错误。

我忘了再提一件事，我使用的是 VS 2010 和 C# 4.0（win7，64 位操作系统）。

我需要记录每个活动。[即，我需要了解应用程序经历的每一个过程]。所以我声明了一个类 [MyClass] 级别的私有字符串变量并分配每个进程的详细信息，如“调用此方法”、“从该 Web 服务获取 5 条记录”等。

```
 logdata = Environment.Newline() + "This method has completed"; 
```

所以这里抛出错误，说内存不足，一些评估失败。

所以我从 VS 中的 Options 中关闭了字符串评估复选框。

再次，没有用。

所以我将字符串更改为 StringBuilder 并尝试每次都附加活动字符串。

还是没用。我不明白它有什么问题。

这是因为所有线程都在并行工作，它们交换 MyClass 资源吗？？？为什么不释放对象？？？

请在这件事上帮助我。

# php - 一次将所有 csv 文件导出到内存并压缩

> ID：15059895
> 
> 赞同：1
> 
> 时间：2013-02-25T04:03:33.807
> 
> 标签：php, zip, export-to-csv, zipfile

我有一个导出一个 csv 文件的功能，包括每个调查的所有答案。我需要一个功能来将所有调查的所有答案（每个 csv 文件一个调查）导出到 menory 并在下载到计算机之前对其进行压缩

不将所有 csv 文件保存到服务器或本地存储中，我需要将其存储到内存中并在下载到计算机之前对其进行压缩

我曾经使用过这段代码：

```
function exportAllAnswer() {
    allTokenId = getAllTokenId();

    foreach(allTokend as $key->$value) {
        exportAnswer($value->id, false);
    }
    $path = 'exportAllCsv';

    // we deliver a zip file
    header("Content-Type: archive/zip");

    // filename for the browser to save the zip file
    header("Content-Disposition: attachment; filename=allCsvs.zip");

    // get a tmp name for the .zip
    $tmp_zip = tempnam ("tmp", "tempname") . ".zip";

    //change directory so the zip file doesnt have a tree structure in it.
    chdir($path);
    // zip the stuff (dir and all in there) into the tmp_zip file
    exec('zip '.$tmp_zip.' *');

    // deliver the zip file
    $fp = fopen("$tmp_zip","r");
    echo fpassthru($fp);

    // clean up the tmp zip file
    unlink($tmp_zip);

    // delete folder csv
    rmdir($path);
} 
```

# java - java - 如何在java中使用forloop获取这样的输出到文本文件？

> ID：15059898
> 
> 赞同：-2
> 
> 时间：2013-02-25T04:03:40.560
> 
> 标签：java, string, for-loop, filewriter

我必须在java中得到这样的输出

```
 digraph G 
   {
     main -> parse -> execute;
     main -> init;
     main -> cleanup;
     execute -> make_string;
     execute -> printf
     init -> make_string;
     main -> printf;
     execute -> compare;
     } 
```

我试过这个

```
PrintStream out = new PrintStream(new FileOutputStream("graph.gv"));

         for(int i=0;i<1;i++)

    {
        System.out.println("digraph G {");

    for (String node : visited)

    {

        System.out.print(node);
        System.out.print("->");
        out.write(node);
        out.flush();

    }
   out.close();

    System.out.println();
    }
      System.out.println("}");
} 
```

这是我的输出

```
 digraph G {
     A->B->E->
     }
     digraph G {
     A->B->D->E->
     }
     digraph G {
     A->B->C->E->
     }
     digraph G {
     A->B->C->D->E->
     }
     digraph G {
     A->D->E->
     } 
```

但输出未正确打印

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:22:06.353

删除这个：`System.out.println("digraph G {");`在for循环之外。也就是说，改变这个：

```
for(int i=0;i<1;i++)
{
   System.out.println("digraph G {");
   //Your remaining code
} 
```

到：

```
System.out.println("digraph G {"); //Notice change here
for(int i=0;i<1;i++)
{
   //Your remaining code
} 
```

这应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:55:23.273

用这个：

```
System.out.println("digraph G {");   //  To print it once
for(int i=0;i<1;i++)
{
    for(int j=0; j<visited.length()-1; j++)  // Accessing one less node to avoid extra "->" at the end
    for (String node : visited)
    {
        System.out.print(node);
        System.out.print("->");
        out.write(node);
        out.flush();
    }
    System.out.print(node);  //Printing the last node left
    out.flush();
    out.close();

    System.out.println();
}
System.out.println("}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:56:31.590

使用**System.out.format()**方法而不是**System.out.println()**

如果您想以某种方式格式化输出，可以使用 format()。

[请参阅 Oracle 的 System.out.format 教程](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)。

# python - 从 s3 获取 ogg 曲目的长度而不下载整个文件

> ID：15059902
> 
> 赞同：10
> 
> 时间：2013-02-25T04:04:03.587
> 
> 标签：python, ogg

如何在不下载整个文件的情况下获得 ogg 文件的播放长度？我知道这是可能的，因为 HTML5 标签和 VLC 都可以在加载 URL 后立即显示整个播放长度，而无需下载整个文件。

是否有标题或我可以阅读的内容。甚至可能是比特率，我可以将其除以文件大小以获得大致的播放长度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T10:06:06.870

不幸的是，似乎没有办法实现这一目标。

Mozilla 的[为 Ogg 媒体配置服务器](https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media)非常有指导意义。基本上：

1.  Gecko 使用`X-Content-Duration`标头 -如果有，则由*Web 服务器发送。*这解释了您提出的 HTML5 音频流示例。如果失踪，那么
2.  Gecko根据采样率（在标头中）和来自HTTP 标头的文件大小*估计长度*`Content-length`

采样率存储在标识报头 - 第一个报头数据包中。请参阅[规范](http://xiph.org/vorbis/doc/Vorbis_I_spec.html)转到“4.2 标头解码和解码设置”部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T19:02:32.267

这*是*可能的。这样做的方法是使用[HTTP 范围请求](https://en.wikipedia.org/wiki/Byte_serving)来获取文件的末尾，找到最后一个 Ogg 页面，并从中提取时间戳。这是假设文件由具有相同长度的连续流（即没有链接）组成，并且流时间从 0 开始（否则，您应该解码流的开头并从最终时间戳中减去该时间戳） . 从 Ogg Page granulepos 字段中解码时间戳是特定于编解码器的（例如，对于 Vorbis，它表示为多个样本）。

或者，如果您的 Ogg 文件具有[Ogg Skeleton](https://wiki.xiph.org/Ogg_Skeleton_4)元数据，您可以直接读取该元数据以确定文件的持续时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:20:45.423

如果不下载数据本身，这是不可能的。您可以将相关信息指定为相关密钥的 S3 元数据的一部分。因此可以在实际下载数据之前写入以自省元数据。

# c++ - 使用节点类

> ID：15059908
> 
> 赞同：0
> 
> 时间：2013-02-25T04:05:02.357
> 
> 标签：c++

```
node *temp; 
temp->dataItem = newPassenger;
if(size == 0)
{
    Head = temp;
    Tail = temp;
}
else
{
    Tail->nextNode = temp;
    Tail = temp;
}
size++; 
```

我需要帮助，因为 VS 一直说`temp`没有初始化，我对 C++ 的经验很少。我的节点类如下

```
#include "passenger.h"
#pragma once
class node
{
public:
    node();
    passenger dataItem;
    node * nextNode;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:13:02.007

您应该阅读更多介绍性 C++ 书籍。这通常很早就被覆盖了。

你应该写

```
node *temp = new node; 
```

这将为内存中的节点保留空间。完成此节点后，您应该编写

```
delete temp; 
```

你必须确保你没有删除两次，因为这会导致你的程序崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:09:42.990

```
node *temp = new node; 
temp->dataItem = newPassenger;
if(size == 0)
{
    Head = temp;
    Tail = temp;
}
else
{
    Tail->nextNode = temp;
    Tail = temp;
}
size++; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:08:56.800

```
node *temp; 
temp->dataItem = newPassenger; 
```

如果上面确实是您的代码，那么编译器是完全正确的 - 您在`temp`没有初始化它的情况下进行了延迟。你可能想要这样的东西：

```
node* temp = new node;
temp->dataItem etc... 
```

# php - 为总数中的每个 int 添加一个 div

> ID：15059909
> 
> 赞同：1
> 
> 时间：2013-02-25T04:05:05.023
> 
> 标签：php

我想为每个数字添加一个 div（带样式的框）。

例如，假设`[ ]`是我们的样式框。是我们的`1,700,700`号码。

我希望它看起来像这样：

```
[ 1 ] , [ 7 ][ 0 ][ 0 ] , [ 7 ][ 0 ][ 0 ] 
```

这甚至可能吗？如果是，如何？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:09:07.143

首先将数字转换为字符串，然后

为此，我们首先需要知道我从[Wikipedia](http://en.wikipedia.org/wiki/String_%28computer_science%29)引用的字符串到底是什么来解释

> 字符串通常被理解为一种数据类型，通常被实现为一个字节（或字）数组，它使用某种字符编码存储一系列元素，通常是字符。字符串也可以表示更通用的数组或其他序列（或列表）数据类型和结构。

你可以这样做

```
<?php
$foo="1,700,700";

for($i=0; $i<strlen($foo); $i++){
  if($foo[$i] != ',')
    echo '[',$foo[$i],']';
  else
    echo',';
} 
```

[**实时结果**](http://codepad.org/ZoKlForw)

# java - 尝试与父类中的对象共享套接字

> ID：15059911
> 
> 赞同：0
> 
> 时间：2013-02-25T04:05:10.873
> 
> 标签：java, oop, sockets, applet

谁能启发我？我试图访问属于父类（主小程序类）的对象中的套接字。我希望我能为你做这个更简洁。有点拗口，但也许我的消息来源会进一步解释。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JApplet;
import javax.swing.JOptionPane;

class SocketsC {

    Socket clientsocket;
    static PrintWriter out;
    static BufferedReader in;

    public void SocketsC()  {

    }

    public void connectSock()   {

        try {

            clientsocket = new Socket( "localhost", 9900 );
            out = new PrintWriter(clientsocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader( clientsocket.getInputStream()));

        } catch (UnknownHostException e) {

            System.exit(1);

        } catch (IOException e) {

            System.exit(1);
        }
    }
}

class AccessSock    {

  AccessSock()  {

        // Here is where I am trying to access the socket from the mysocks object
      mysocks.out.println( "working" );  // This doesn't work...
  }

}

public class main extends JApplet {

    static SocketsC mysocks;

    public void init() {

      createApp();
    }

    public void createApp() {

        SocketsC mysocks = new SocketsC();
        AccessSock sendtext = new AccessSock();
    }
} 
```

TYIA-罗兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:12:08.217

由于您已定义`mysocks`为静态，因此您需要使用`className.variable`它来访问它。

```
static SocketsC mysocks; 
```

改变这个：

```
mysocks.out.println( "working" ); 
```

到

```
main.mysocks.out.println( "working" ); 
```

这应该有效。`mysocks`由于您的类中没有调用变量。它正在抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:19:43.210

从您的代码`mysocks.out.println( "working" );`中，我了解到您想要访问`println`方法
所以您可以直接使用

```
SocketsC.out.println( "working" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:21:12.300

尝试...

```
 public class main extends JApplet {
    //existing code

    public void createApp() {
      mysocks = new SocketsC();
      AccessSock sendtext = new AccessSock(mysocks);
  } 
```

和

```
class AccessSock    {

  AccessSock(SocketsC mysocks)  {
    // Here is where I am trying to access the socket from the mysocks object
    mysocks.out.println( "working" );  // This doesn't work...

  }
} 
```

# ruby-on-rails - 分组这个红宝石对象数组的有效方法

> ID：15059918
> 
> 赞同：0
> 
> 时间：2013-02-25T04:06:13.997
> 
> 标签：ruby-on-rails, ruby, enumerable

我有一组 model 实例`Foo`。`Foo`是基于欧姆的数据存储。`Foo`has和 integer 属性的每个实例，`an_id`例如`follows`, `likes`。如果有两个`Foo`with same 的实例`an_id`，我很乐意将`follows`and`likes`属性加在一起。我的解决方案是创建一个散列，其中每个键都是`an_id`数组的一个，并将状态保留在那里。如果数组足够大，这效率不高，因为我需要将每个对象放回数组中。我很想将数组分组`Foo#an_id`并将计数器属性合并/添加在一起，然后将其弹出回数组中。目前支持这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:23:18.060

[group_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by) ,[总和](http://apidock.com/rails/Enumerable/sum)

首先，是这样的：

```
grouped_hash = your_array.group_by(&:an_id)
sums_by_id = {}
grouped_hash.each do |id,values|
  sums_by_id[id] = {}
  # you could also just iterate over values once and += :follows and :likes
  sums_by_id[id][:follows] = values.sum(&:follows)
  sums_by_id[id][:likes]   = values.sum(&:likes)
end 
```

示例输出： sums_by_id => {1 => {:follows => 2, :likes => 4}, 2 => ...

另外，看看：

[注入](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

```
(5..10).inject {|sum, n| sum + n }  # 45 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:23:23.320

您可以使用`inject`来获取值的总和：

```
array = *array of Foo*
total = array.inject { |sum, x| sum + x.likes } 
```

# python - 适用于 Windows、iPad、Droid 和 Facebook 的编程

> ID：15059927
> 
> 赞同：-1
> 
> 时间：2013-02-25T04:07:32.190
> 
> 标签：python, windows, facebook, ipad, portability

我想编写可移植到尽可能多平台的半简单策略游戏。理想情况下，我希望（以后）可以选择移植到 Windows、Facebook、iPad 和 Droid。

据我所知，Python 以某种形式在除 iPad 之外的所有设备上都是可行的。

问题：是否有任何语言/框架适用于所有 4 个？（相反，有什么比 C++ 更“高级”的东西可以做到这四点吗？）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:15:47.867

浏览器！这是 Google 和 Udacity 开设的一门很好的课程，教授 HTML5 游戏开发。[https://www.udacity.com/course/cs255](https://www.udacity.com/course/cs255)

# javascript - 从对象 Javascript 中调用 setInterval？

> ID：15059928
> 
> 赞同：1
> 
> 时间：2013-02-25T04:07:43.377
> 
> 标签：javascript, object, canvas, game-engine

我正在尝试使用 Jvascript 制作游戏引擎。到目前为止，我有：

```
function gameEngine() {

    this.canvas = $('canvas')[0];
    this.ctx = this.canvas.getContext('2d');
    this.framerate = 20;

    this.resetCanvas = function() {
        this.ctx.fillStyle = 'red';
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    };

    this.loop = function() {
        this.resetCanvas();
    };

    this.run = function() {
        setInterval(this.loop, this.framerate);
    };
}

new gameEngine(); 
```

但是画布没有出现；为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T04:11:16.953

[`this`传递`this.loop`到时变得分离`setInterval`。](https://stackoverflow.com/a/11853792/139010)常见解决方案：

[`Function.bind`：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
this.run = function() {
    setInterval(this.loop.bind(this), this.framerate);
}; 
```

或者[使用闭包：](https://stackoverflow.com/q/9602700/139010)

```
var self = this;
this.run = function() {
    setInterval(function () {
        self.loop();
    }, this.framerate);
}; 
```

然后你需要实际*调用*该`run`方法：

```
new gameEngine().run();

// or 

function gameEngine() {

    // snip...

    this.run();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:11:11.487

你从不打电话`setInterval`。

```
var ngin = new gameEngine();
ngin.run(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:11:18.187

您需要在初始化后调用您的`run()`函数。`gameEngine`您可能还想将您的存储`gameEngine`在一个变量中。

例子：

```
var myGameEngine = new gameEngine();
myGameEngine.run(); 
```

或者，如果您不想调用 run，请坚持`this.run()`在对象定义的末尾。这消除了存储对您的`gameEngine`对象的引用的需要，尽管您可能仍然应该供以后参考。

# asp.net-mvc - 从 Razor 调用类中的方法

> ID：15059932
> 
> 赞同：1
> 
> 时间：2013-02-25T04:08:22.177
> 
> 标签：asp.net-mvc, razor

我的 MVC 4 项目的 App_Code 目录中的类中有一个方法。我可以从控制器中调用它，但我不知道如何从视图（.cshtml）文件中调用它。

```
namespace LST.App_Code
{
    public static class Utilities
    {
        public static readonly log4net.ILog log = log4net.LogManager.GetLogger("GeneralLog"); 
```

从我的角度来看，我已经尝试了几件事，所有这些都是：

```
@LST.App_Code.Utilities.log.Info("asdf"); 
```

当我这样做时，我在尝试加载页面时收到以下编译错误：

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0433：“LST.App_Code.Utilities”类型存在于“c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\bd7cb704\59585235\assembly\dl3\ 3b0ad3ff\ec2b5faa_0b13ce01\mvcroot.DLL' 和 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\bd7cb704\59585235\App_Code.cggwncvj.dll'
> 
> 源错误：
> 
> 第 7 行：@using (Html.BeginForm()) 第 8 行：{ 第 9 行：
> @(LST.App_Code.Utilities.log.Info("asdf")) 第 10 行：第 11 行：
> @Html.AntiForgeryToken()

我已经尝试了有关清理项目、asp.net 临时文件目录和设置批处理编译选项的建议。没有任何工作。

我对 Razor 语法的复杂性不太熟悉。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:28:44.813

我让它在 .cs 文件中完全没有命名空间的情况下工作。

如果你已经创建了 app_code 文件夹，那么你可以像这样创建类文件（没有命名空间）：

```
using System:
...

public class FooClass{
  public string Foo(...)
  {
      ...
  }
} 
```

并从您的角度这样称呼它：

```
@{
   new FooClass().Foo(...);

} 
```

为我工作...

# gwt - ExtGWT Resizing TabPanel (TabItem) with ChartsVizualization an ChartsTable

> ID：15059942
> 
> 赞同：0
> 
> 时间：2013-02-25T04:09:08.213
> 
> 标签：gwt, layout, gxt

问题出在通过单击或调整浏览器大小的绘图上。我将 TabPanel 与 RowData、两个带有图表（Google Vizualization）的 TabItems 放在一个上，将具有相同数据的 Table 放在下一个上。我在页面加载时创建它们。然后我点击从 DB 中加载数据（按钮），我重绘了这两个：

```
 public void reDraw(final List<Double> slices, final String[] devices)
    {
        pcPie.draw(createTable(slices,devices),createOptions("По автомобилям"));
        tPie.draw(createTable(slices, devices),CreateTableOptions());
    } 
```

这仅适用于活动 TabItem 并在生成的 HTML 中用这个大小（400px；200px）替换后面的绘图空间，我发现后面部分的数据没有改变。

此外，当我调整浏览器的大小时，图表和表格没有调整大小。我尝试使用一些布局，它们不起作用。可能是我不明白如何正确使用它们。所以，

1.  如何在这两个部分（活动和后面）中正确调整图表和表格的大小？
2.  如何在浏览器调整大小事件上调整图表和表格的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:05:53.680

我们的第一个问题来自于此：当您将 TabPanel 组件与一些 TabItems 一起使用时，TabItems 的后面并没有被完全创建，并且您无法重绘它们，因为没有创建对象。所以我们在激活部分更改我们的代码：

```
public void run() { 
    tpLineCharts.setBorders(true);                 
        TabItem tiGraph = new TabItem("График");
            tableData = createTable();
            lcLines = new LineChart(tableData, 
                                    createOptions("По компании"));
            lcLines.addSelectHandler(createSelectHandler(lcLines)); 
        tiGraph.setLayout(new FitLayout());
        tiGraph.add(lcLines);
    tpLineCharts.add(tiGraph);  
        TabItem tiTable = new TabItem("Таблица");                      
            tLine = new Table(tableData, CreateTableOptions());                                                 
        tiTable.add(tLine);                                               
        tiTable.addListener(Events.Select, new Listener<BaseEvent>()
        {
            @Override
            public void handleEvent(BaseEvent be) {                                           
                tLine.draw(tableData);
            }
        });
    tpLineCharts.add(tiTable);                  
}}, CoreChart.PACKAGE, Table.PACKAGE); 
```

其中 tableData - AbstractTableData。修改后我们可以重绘我们的组件：

```
public void reDrawLineChart(final ArrayList <Double> sumCompanyTraffic, 
    final ArrayList<Integer> axisName, String title)
{          
    tableData =createTable(sumCompanyTraffic, axisName); 
    tLine.draw(tableData, CreateTableOptions());
    lcLines.draw(tableData, createOptions(title));
} 
```

您还需要添加此选项：

```
private Options createOptions(String title) 
{
    Options options = Options.create();
    options.setTitleX("Период");                
    options.setTitle(title);     
    if(tpLineCharts.isRendered())
        options.setSize(tpLineCharts.getWidth(true), 
                tpLineCharts.getHeight(true));

    return options;
} 
```

# c++ - 企业销售 C++

> ID：15059945
> 
> 赞同：-2
> 
> 时间：2013-02-25T04:09:34.640
> 
> 标签：c++

我和一个朋友在教授分配给我们的这个项目挑战中遇到了困难。我们所拥有的是 int main()。导师是否一直向我们指出它，但不会解释什么是错的。因此，如果您能解释并向我们展示我们做错了什么，我们将不胜感激。

问题是：一家公司有六个部门，每个部门负责对不同地理位置的销售。设计一个保存部门销售数据的 Divsales 类，其中包含以下成员：

*   一个包含四个元素的数组，用于保存该部门四个季度的销售数据
*   一个私有静态变量，用于保存全年所有部门的公司总销售额。
*   一个接受四个参数的成员函数，每个参数都假定为一个季度的销售额。应将参数的值复制到保存销售数据的数组中。四个参数的总和应添加到保存年度公司总销售额的静态变量中。
*   采用 0-3 范围内的整数参数的函数，该参数将用作除法季度销售额数组的下标。该函数应返回具有该下标的数组元素的值。

编写一个程序，创建一个包含六个 DivSales 对象的数组。程序应要求用户输入每个部门四个季度的销售额。输入数据后，程序应显示一个表格，显示每个季度的部门销售额。然后该程序应显示该年度的公司总销售额。

```
#include <iostream>
#include <cstdlib>
#include  <cctype>

using namespace std;

class DivSales
{
private:
    double quarter [4];
    static double DivCorp;

public:
    double display(int);
    void qutrSale();
}

void DivSales::qutrSale()
{
    int number;

    for (number = 0; number < 4; number++)
    {
        cout << "The sales for the quarter"<< number+1<< ": ";
        cin>> quarter [number];

        DivCorp += quarter[number];

        while (quarter[number] < 0)
        {
            cout<< "Error, please enter a positive sale amount: $";
            cin >> quarter [number];
        }
    }
}

double DivSales::display(int input)
{
    return quarter [input];
}

int main ()
{
    int count;
    DivSales div[5];

    for (count=0; count<5; count++)
    {
        div [count].qutrSale();
    }
    return 0;
} 
```

一些错误是

*   错误 1 ​​错误 C2628: 'DivSales' 后跟 'void' 是非法的（你忘记了 ';' 吗？） h:\school\cosc 1337.01\chapter 11 program challenge 7\chapter 11 program challenge 7\corporate sales.cpp 23

*   错误 2 错误 C2556: 'DivSales DivSales::qutrSale(void)' : 重载函数仅因返回类型与 'void DivSales::qutrSale(void)' h:\school\cosc 1337.01\chapter 11 程序挑战 7\chapter 11 不同项目挑战 7\corporate sales.cpp 24

*   错误 3 错误 C2371：'DivSales::qutrSale'：重新定义；不同的基本类型 h:\school\cosc 1337.01\chapter 11 program challenge 7\chapter 11 program challenge 7\corporate sales.cpp 24

*   错误 4 错误 C2264: 'DivSales::qutrSale' : 函数定义或声明错误；未调用函数 h:\school\cosc 1337.01\chapter 11 program challenge 7\chapter 11 program challenge 7\corporate sales.cpp 54

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:32:31.287

即使我们知道它应该做什么，该代码也无法编译。无论如何，我对其进行了一些细微的更改以使其编译和运行，希望您能对此有所帮助：

```
#include <iostream>
#include <cstdlib>
#include  <cctype>

using namespace std;

class DivSales

{

private:

double quarter [4];
        static double DivCorp;

    public:
        double display(int);
        void qutrSale();

};
double DivSales::DivCorp = 0;
void DivSales::qutrSale()
{

 int number;

       for (number = 0; number < 4; number++)
        {
            cout << "The sales for the quarter"<< number+1<< ": ";
            cin>> quarter [number];

            DivCorp += quarter[number];

            while (quarter[number] < 0)
            {
                 cout<< "Error, please enter a positive sale amount: $";
                cin >> quarter [number];
            }
        }   
}

double DivSales::display(int input)

{
        return quarter [input];
}

int main ()

{

int count;

DivSales div[5];

    for (count=0; count<5; count++)
    {
        div [count].qutrSale();
    }
    return 0;
} 
```

测试运行

```
$ g++ -o test test.c 
$ ./test 
The sales for the quarter1: 1
The sales for the quarter2: 1
The sales for the quarter3: 1
The sales for the quarter4: 1
The sales for the quarter1: 2
The sales for the quarter2: 2
The sales for the quarter3: 2
The sales for the quarter4: 2
The sales for the quarter1: 3
The sales for the quarter2: 3
The sales for the quarter3: 3
The sales for the quarter4: 3
The sales for the quarter1: 4
The sales for the quarter2: 4
The sales for the quarter3: 4
The sales for the quarter4: 4
The sales for the quarter1: 5
The sales for the quarter2: 5
The sales for the quarter3: 5
The sales for the quarter4: 5
$ 
```

# r - 多个图表相同的情节

> ID：15059946
> 
> 赞同：1
> 
> 时间：2013-02-25T04:09:42.150
> 
> 标签：r

您如何在 2 个不同的行中维护不同的图表数量。例如，我想要第 1 行中的 1 个图表和第 2 行中的 10 个图表。我该怎么做？

我得到的最接近的是：

```
> par(mfrow=c(2,1))
> x=c(1,2,3324,324)
> y=c(1,2,32,2323)
> plot(x,y)
> plot(x,y) 
```

这会在另一个之上创建 1 个图表，但我无法让第二行能够处理 10 个图表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:14:50.243

使用`layout`，一旦你创建了正确的矩阵就很容易了

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    1    1    1    1    1    1    1    1     1
[2,]    2    3    4    5    6    7    8    9   10    11

layout(matrix(c(rep(1,10),2:11),nrow=2,byrow=T))
 x=c(1,2,3324,324)
 y=c(1,2,32,2323)
 plot(x,y)
 replicate(n=10,plot(x,y)) 
```

![在此处输入图像描述](../Images/d3a94f56ba6c79d98f093cec4c5db9ad.png)

**编辑**给出不同的宽度

```
mat <- matrix(c(rep(1,10),2:11),nrow=2,byrow=T)
layout(mat, widths = c(rep(1,5),rep(2,3),rep(3,2))) 
```

我喜欢这个`layout.show`功能。控制布局非常方便。

```
layout.show(n = 11) 
```

![在此处输入图像描述](../Images/428a5deb31674522e17b31f4e59a2503.png)

# eclipse - 打开工作区之外的与 git 同步的 eclipse 项目

> ID：15059952
> 
> 赞同：4
> 
> 时间：2013-02-25T04:10:04.543
> 
> 标签：eclipse, git

我在我的 eclipse 工作区之外有一个项目，我正在使用 git 来更新它，我想使用 eclipse 来处理文件。但是如果我在eclipse中将现有项目导入工作区，它会不会只复制当时项目的内容？那么当我将新的更改拉入项目时，文件会在 eclipse 中自动更新吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T04:18:33.937

单击`Import`-> `Existing projects into workspace`，然后选择外面的文件夹`copy projects into workspace`并未选中。现在可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T04:22:34.000

*但是如果我在eclipse中将现有项目导入工作区，它会不会只复制当时项目的内容？*

**eclipse中的项目不仅仅是项目的副本。严格来说eclipse会链接到项目目录。**

*那么当我将新的更改拉入项目时，文件会在 eclipse 中自动更新吗？*

**如果项目在 Eclipse 之外发生变化，它们会自动更新。但是您需要在 Eclipse 中引用该项目。在你刷新项目之前，eclipse会提示信息。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T17:27:49.240

您也可以只使用 Eclipse git 集成插件“egit”从 Eclipse 内部进行所有 git 管理。它可以完美地处理工作区之外的项目。

这样做的一个好处是您无需手动同步当前打开的编辑器的内容，因为磁盘上更改的文件在 Eclipse 内部得到正确处理，并且（非脏）编辑器的内容会自动更新。

# c++ - 什么是可伸缩锁？

> ID：15059958
> 
> 赞同：4
> 
> 时间：2013-02-25T04:10:33.360
> 
> 标签：c++, locking

什么是可伸缩锁？它与不可扩展的锁有什么不同？我第一次在 TBB rw-lock 的上下文中看到这个术语，但无法决定使用哪个。

此外，是否有任何 rw-lock 将读者优先于作者？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T04:56:48.473

术语“可伸缩锁”或“不可伸缩锁”没有正式的定义。这意味着一些锁定算法、技术或实现即使在对锁有很多争用的情况下也表现得相当好，而有些则不然。

有时问题是算法问题。例如，一个简单的优先级继承实现可能需要 O(n) 的工作来释放一个锁，其中 n 是等待线程的数量。这意味着 O(n^2) 为每个等待服务的线程工作。

有时问题与硬件有关。简单的自旋锁（例如，共享锁缓存行且获取者不退避的实现）不能在具有单个总线互连的 SMP 硬件上扩展，因为写入缓存行需要 CPU 获取缓存行，并且CPU 互连是单点竞争。如果有 n 个 CPU 试图同时获取同一个锁，那么您最终可能需要 O(n) 总线流量来获取锁。同样，这意味着满足所有 n 个 CPU 的 O(n^2) 时间。

通常，除非满足两个条件，否则应避免使用不可伸缩锁：

1.  争论很轻。
2.  关键部分很短。

您确实必须*知道*满足这两个条件。关键部分的代码行数可能很短，但在墙上的时间上不会很短。如果有疑问，请使用可伸缩锁，然后修复任何被*测量*会导致性能问题的锁。

至于您的最后一个问题，我不知道有利于读者的现成读写锁。实际上，大多数 API 都没有指定策略，包括 pthreads（很烦人）。

我的第一条评论是你可能不想要它。如果您有高争用，则偏爱一个而不是另一个杀死吞吐量，如果您没有高争用，那将没有什么不同。关于我认为不使用具有完全公平策略的 rw 锁的唯一原因是，如果您有必须尊重的线程优先级，那么您希望优先级最高的线程优先。

但如果你必须，你总是可以自己动手。您只需要几个标志（一个用于“读者现在可以去”，一个用于“作者现在可以去”），保护标志的条件变量，保护条件变量的单个互斥锁，以及几个指示如何许多读者和作家都在等待。这应该就是你所需要的；实施这一点应该很有指导意义。

# windows - 编辑命令在 Windows 命令行中不起作用

> ID：15059965
> 
> 赞同：0
> 
> 时间：2013-02-25T04:11:26.173
> 
> 标签：windows, cmd

我正在使用以下命令通过命令提示符打开和编辑文件。但是在我的系统中不允许该文件编辑并返回错误。但是在我的笔记本电脑编辑器窗口中打开来编辑这个文件。

```
'edit' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T05:17:25.120

我怀疑您的台式机运行的是 64 位 Windows 7，而您的笔记本电脑运行的是 32 位 Windows 7。

正如 Wikipedia 指出的那样，MS-DOS 编辑器[曾经/现在是一个 16 位应用程序](http://en.wikipedia.org/wiki/MS-DOS_Editor)，并且[不能在 64 位版本](http://support.microsoft.com/kb/282423)的 Windows 上运行。

另请参阅：[https ://superuser.com/questions/237023/what-is-the-edit-command-for-64-bit-windows-7](https://superuser.com/questions/237023/what-is-the-edit-command-for-64-bit-windows-7)

# jquery - jquery xml属性返回未定义

> ID：15059968
> 
> 赞同：0
> 
> 时间：2013-02-25T04:11:37.533
> 
> 标签：jquery, xml, parsing

我无法弄清楚这一点，现在已经搞砸了一段时间。

XML:

```
<page name="bio">
<image imageUrl="img/bio.png" link="#"/>
<texts>
<pageText><![CDATA[blah
]]></pageText>
</texts>
</page> 
```

jQuery

```
$.get('../tfile_main.xml', function(xml){
$varbioimg = $(xml).find('page[name="bio"] image');
alert($varbioimg.attr('imageUrl'));
}); 
```

由于某种原因，这返回未定义，我也尝试找到（'page[name="bio"] > image')

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:20:47.377

试试看[`.parseXML`](http://api.jquery.com/jQuery.parseXML/)，不推荐使用jQuery的css选择器解析xml

```
var xml = '<page name="bio"><image imageUrl="img/bio.png" link="#"/><texts><pageText><![CDATA[blah]]></pageText></texts></page>';

xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );    
console.log($xml.find('page[name="bio"] image')); 
```

这是演示[http://jsfiddle.net/FVHEU/](http://jsfiddle.net/FVHEU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:30:52.263

在我第二次使用`.parseXML`时，我还必须提到您的原始示例对我有用。确保您的 XML 文件与您在此处发布的内容完全匹配（`<?xml version="1.0">`在顶部添加），并使用 Firefox 导航到 XML 文件的 URL；它会让你知道是否有任何解析错误。

# ios - NSCoding -decoder 返回错误值 -iOS

> ID：15059971
> 
> 赞同：0
> 
> 时间：2013-02-25T04:11:51.157
> 
> 标签：ios, objective-c, nskeyedarchiver, nscoding

我编写了以下方法来编码/解码数据..

```
- (void) encode: (BOOL) encodeBool int: (NSNumber *) integer boolean:(BOOL) boolean key: (NSString *) keyStr {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *gameStatePath = [documentsDirectory stringByAppendingPathComponent:@"gameData"];

    if (encodeBool == YES) {

        NSMutableData *gameData = [NSMutableData data];
        NSKeyedArchiver *encoder = [[NSKeyedArchiver alloc] initForWritingWithMutableData:gameData];

        if (integer) {
            [encoder encodeInt:[integer intValue] forKey:keyStr];
        }
        else if (boolean) {
            [encoder encodeBool:boolean forKey:keyStr];
        }

        [encoder finishEncoding];
        [gameData writeToFile:gameStatePath atomically:YES];
        [encoder release];

    } else {

        NSMutableData *gameData = [NSData dataWithContentsOfFile:gameStatePath];

        if (gameData) {

            NSKeyedUnarchiver *decoder = [[NSKeyedUnarchiver alloc] initForReadingWithData:gameData];

            if (integer) {
                NSLog(@"%d", [decoder decodeIntForKey:keyStr]);
            }
            else if (boolean) {

                if ([decoder decodeBoolForKey:keyStr]==YES) {
                    NSLog(@"YES");

                } else {
                    NSLog(@"NO");
                }

            }

            [decoder finishDecoding];
            [decoder release];

        }

    }

} 
```

还有一些测试

```
 [[GameData sharedData] encode:YES int: [NSNumber numberWithInt:100] boolean:NO key:@"testInt"];
    [[GameData sharedData] encode:YES int:nil boolean:YES key:@"bool"];        
    [[GameData sharedData] encode:YES int:[NSNumber numberWithInt:1030] boolean:nil key:@"test"];

    [[GameData sharedData] encode:NO int: [NSNumber numberWithInt:1]  boolean:nil key:@"testInt"];
    [[GameData sharedData] encode:NO int:nil boolean:YES key:@"bool"];
    [[GameData sharedData] encode:NO int:[NSNumber numberWithInt:100]  boolean:nil key:@"test"]; 
```

输出是

```
0
NO
1030 
```

只有最后一个是正确的..有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:29:06.010

第一个问题是当你测试时`if (boolean)`它和说一样`if (boolean == YES)`。布尔不是对象，也不能是`nil`. 当您`nil`作为布尔值传入时，它与传入相同`NO`。我认为这并不能解决您的所有问题。我认为该文件也没有保存。

来自 NSKeyedUnarchiver 文档：

> 如果您使用存档中不存在的键调用此类的 decode... 方法之一，则会返回非正值。该值因解码类型而异。例如，如果存档中不存在密钥，则 decodeBoolForKey: 返回 NO，decodeIntForKey: 返回 0，而 decodeObjectForKey: 返回 nil。

这些是您得到的错误值。首先，我注意到您没有进行任何错误检查。尝试添加一些检查以查看失败的原因，例如，您可以尝试：

```
 [encoder finishEncoding];
    NSError *error;
    BOOL success = [gameData writeToFile:gameStatePath options:NSDataWritingAtomic error:&error];
    if (success == NO) NSLog(@"Error: %@", [error localizedDescription]); 
```

一旦你得到一个错误，我们可以从那里开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T04:36:04.607

您的问题是，每次调用方法时，都会覆盖文件 - 删除您在之前调用中编码的值。您可能应该重写您的方法，以便在一次调用中对所有值进行编码。

一种替代方法是创建一个`GameState`对象并让它实现`NSCoding`，然后用 读取和序列化它，然后用`+[NSKeyedArchiver archiveRootObject:toFile:]`反序列化它`+[NSKeyedUnarchiver unarchiveObjectWithFile:]`。这样做的代码看起来有点像这样：

```
@interface GameState : NSObject <NSCoding>

@property (nonatomic) int someInt;
@property (nonatomic) BOOL someBool;
@property (nonatomic, strong) NSString *someString;

@end

static NSString *const BoolKey = @"BoolKey";
static NSString *const StringKey = @"StringKey";
static NSString *const IntKey = @"IntKey";

@implementation GameState

- (id)initWithCoder:(NSCoder *)coder
{
    self = [super init];
    if (self) {
        _someBool = [coder decodeBoolForKey:BoolKey];
        _someInt = [coder decodeIntForKey:IntKey];
        _someString = [coder decodeObjectForKey:StringKey];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeBool:self.someBool forKey:BoolKey];
    [aCoder encodeInt:self.someInt forKey:IntKey];
    [aCoder encodeObject:self.someString forKey:StringKey];
}

@end

//  Somewhere in your app where reading and saving game state is needed...
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = nil;
if ([paths count]) {
    documentsDirectory = paths[0];
}
NSString *archivePath = [documentsDirectory stringByAppendingPathComponent:@"archive"];
GameState *gameState = [NSKeyedUnarchiver unarchiveObjectWithFile:archivePath];
if (!gameState) {
    gameState = [[GameState alloc] init];
    gameState.someString = @"a string";
    gameState.someInt = 42;
    gameState.someBool = YES;
}

//  Make changes to gameState here...

[NSKeyedArchiver archiveRootObject:gameState toFile:archivePath]; 
```

# json - 来自数组的 Json 键值对

> ID：15059973
> 
> 赞同：0
> 
> 时间：2013-02-25T04:12:00.317
> 
> 标签：json

尝试使用 jquery ui 中的自动完成功能，但我认为我的数组是错误的，因为它包含位置的 id

```
var locations = [{"182":{"id":"182","name":"England"},"42":{"id":"42","name":"Barnsley"},"6":{"id":"6","name":"Bath"},"155":{"id":"155","name":"Beverley"},"7":{"id":"7","name":"Birmingham"},"72":{"id":"72","name":"Blackburn"},"8":{"id":"8","name":"Blackpool"},"69":{"id":"69","name":"Bournemouth"},"45":{"id":"45","name":"Bradford"},"38":{"id":"38","name":"Bridlington"},"78":{"id":"78","name":"Brighton"},"9":{"id":"9","name":"Bristol"},"73":{"id":"73","name":"Burnley"},"160":{"id":"160","name":"Colchester"},"11":{"id":"11","name":"Cornwall"},"12":{"id":"12","name":"Coventry"},"44":{"id":"44","name":"Cumbria"},"13":{"id":"13","name":"Derby"},"14":{"id":"14","name":"Devon"},"161":{"id":"161","name":"Dewsbury"},"40":{"id":"40","name":"Doncaster"},"156":{"id":"156","name":"Driffield"},"15":{"id":"15","name":"Essex"},"75":{"id":"75","name":"Exeter"},"16":{"id":"16","name":"Gloucestershire"},"46":{"id":"46","name":"Goole"},"17":{"id":"17","name":"Grimsby"},"71":{"id":"71","name":"Guildford"},"74":{"id":"74","name":"Hartlepool"},"54":{"id":"54","name":"Hornsea"},"154":{"id":"154","name":"Howden"},"1":{"id":"1","name":"Hull"},"18":{"id":"18","name":"Kent"},"76":{"id":"76","name":"Lanarkshire"},"5":{"id":"5","name":"Leeds"},"19":{"id":"19","name":"Leicestershire"},"20":{"id":"20","name":"Lincolnshire"},"21":{"id":"21","name":"Liverpool"},"43":{"id":"43","name":"London"},"23":{"id":"23","name":"Manchester"},"67":{"id":"67","name":"Middlesborough"},"68":{"id":"68","name":"Milton Keynes"},"24":{"id":"24","name":"Newcastle"},"51":{"id":"51","name":"Northampton"},"25":{"id":"25","name":"Nottingham"},"77":{"id":"77","name":"Plymouth"},"65":{"id":"65","name":"Pontefract"},"41":{"id":"41","name":"Portsmouth"},"36":{"id":"36","name":"Rotherham"},"39":{"id":"39","name":"Scarborough"},"26":{"id":"26","name":"Scunthorpe"},"27":{"id":"27","name":"Sheffield"},"28":{"id":"28","name":"Somerset"},"29":{"id":"29","name":"Stoke On Trent"},"66":{"id":"66","name":"Sunderland"},"31":{"id":"31","name":"Tamworth"},"32":{"id":"32","name":"Warwick"},"153":{"id":"153","name":"Withernsea"},"33":{"id":"33","name":"Wolverhampton"},"34":{"id":"34","name":"Worcestershire"},"37":{"id":"37","name":"York"},"189":{"id":"189","name":"France"},"167":{"id":"167","name":"Bordeaux"},"163":{"id":"163","name":"Lyon"},"164":{"id":"164","name":"Marseille"},"169":{"id":"169","name":"Nice"},"162":{"id":"162","name":"Paris"},"168":{"id":"168","name":"Rennes"},"165":{"id":"165","name":"Strasbourg"},"166":{"id":"166","name":"Tours"},"191":{"id":"191","name":"Germany"},"178":{"id":"178","name":"Berlin"},"179":{"id":"179","name":"Frankfurt"},"180":{"id":"180","name":"Hamburg"},"181":{"id":"181","name":"Munich"},"188":{"id":"188","name":"India"},"151":{"id":"151","name":"Agra"},"133":{"id":"133","name":"Ahmedabad"},"131":{"id":"131","name":"Bangalore"},"144":{"id":"144","name":"Bhopal"},"134":{"id":"134","name":"Chennai"},"130":{"id":"130","name":"Delhi"},"149":{"id":"149","name":"Ghaziabad"},"132":{"id":"132","name":"Hyderabad"},"142":{"id":"142","name":"Indore"},"138":{"id":"138","name":"Jaipur"},"140":{"id":"140","name":"Kanpur"},"135":{"id":"135","name":"Kolkata"},"139":{"id":"139","name":"Lucknow"},"150":{"id":"150","name":"Ludhiana"},"129":{"id":"129","name":"Mumbai"},"141":{"id":"141","name":"Nagpur"},"152":{"id":"152","name":"Nashik"},"147":{"id":"147","name":"Patna"},"146":{"id":"146","name":"Pimpri-Chinchwad"},"137":{"id":"137","name":"Pune"},"136":{"id":"136","name":"Surat"},"143":{"id":"143","name":"Thane"},"148":{"id":"148","name":"Vadodara"},"145":{"id":"145","name":"Visakhapatnam"},"183":{"id":"183","name":"Ireland"},"63":{"id":"63","name":"Cork"},"52":{"id":"52","name":"Dublin"},"64":{"id":"64","name":"Limerick"},"190":{"id":"190","name":"Italy"},"177":{"id":"177","name":"Florence"},"176":{"id":"176","name":"Genoa"},"171":{"id":"171","name":"Milan"},"175":{"id":"175","name":"Palermo"},"170":{"id":"170","name":"Rome"},"174":{"id":"174","name":"Turin"},"184":{"id":"184","name":"Northern Ireland"},"61":{"id":"61","name":"Armagh"},"3":{"id":"3","name":"Belfast"},"62":{"id":"62","name":"Lisburn"},"59":{"id":"59","name":"Londonderry"},"60":{"id":"60","name":"Newry"},"55":{"id":"55","name":"Newtownards"}}] 
```

我错过了数组开头和结尾的 [ 和 ] 但我现在意识到我需要一个函数来格式化多维数组

这是我的函数，适用于非多维数组

```
function imAutocompleteJSONParse(data) {
var rows = [];
var rowData = null;
var dataLength = data.length;
for (var i = 0; i < dataLength; i++) {
    rowData = data[i];

    rows[i] = {
        label: rowData.name,
        value: rowData.id
    };

}
return rows; 
```

}

我将如何访问此函数中的 ID 和名称？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:15:59.537

没有必要`$.parseJSON(locations)`，因为**`locations`不是 JSON。**它已经是一个合适的 JavaScript 对象。

```
$('#location_id').autocomplete({source: locations}); 
```

# python - 如何打开与 Python 程序位于同一文件夹中的文件夹中的文件？

> ID：15059975
> 
> 赞同：1
> 
> 时间：2013-02-25T04:12:22.693
> 
> 标签：python, python-2.7

基本上我正在寻找一种简单的方法来打开与程序位于同一文件夹内的文件夹中的文本文件。我的目录结构如下所示：

`/programfolder/textfiles/textfile`

我正在尝试像这样使用 open ：

```
text=functionthatgetsfilename()
file=open("textfiles/"+text,"r") 
```

我究竟做错了什么？我只是在某个地方打错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:06:06.470

您需要知道*当前目录*和脚本所在目录之间的区别。当前目录是您在命令行（CMD、SH 等）中启动应用程序的目录。你可以用`os.path.normpath(os.curdir)`.

为了解决您的问题，您可以使用

```
file=open(os.path.join(os.path.dirname(__file__),'holdstextfiles',text),'r') 
```

或者

```
os.chdir(os.path.dirname(__file__))
... 
```

第一个解决方案使用所需文件的绝对路径，无论如何都是一样的：它是*绝对的*

第二种解决方案在尝试使用您正在使用的*相对*路径之前更改当前目录。

# php - 保存/恢复 PHP rand() 的状态

> ID：15059979
> 
> 赞同：5
> 
> 时间：2013-02-25T04:12:42.413
> 
> 标签：php, random

为了防止长时间运行的预渲染脚本中的内存损坏，我希望能够对我的程序说“好的，渲染前 1000 步”。然后我可以查看输出，检查它等等。然后我想说“现在生成步骤 1,001 到 10,000”。

我让它工作得几乎完美。我只有一件事在挣扎。

渲染脚本用于`rand()`将熵添加到生成的输出中，并`srand()`在开始时确保它在重新渲染中保持不变。目前我通过计算`rand()`被调用的次数来“解决”这个问题，然后在开始实际生成之前调用它多次。这样做的问题是它可能非常慢，尤其是当我生成了几百万个随机数时。

有什么方法可以确定我需要传递什么值`srand()`才能继续生成序列？这甚至可能吗？

如果没有，有什么方法可以找出`rand()`正在使用的确切算法？我真的很喜欢我从中得到的地图`srand(43)`，如果可能的话，我想保留它！

* * *

编辑：使用 Patashu 的回答，这就是我想出的：

```
function rnd() {
    static $seed = 42;
    $seed = $seed*214013+2531011;
    $mod = pow(2,32);
    while($seed > $mod) $seed -= $mod;
    $rs = floor($seed/65536)&0x7fff;
    return floor(2*$rs/0x8000);
} 
```

它依赖于浮点数的使用，因为据我所知，尾数的 51 位很容易以完美的精度存储数字，如果使用位运算符，整数会被截断或环绕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:21:06.057

这并不能*直接*回答您的问题，但既然看起来您不需要特别“好”的随机数，为什么不考虑编写自己的伪随机数生成器呢？这样，您可以在需要时轻松序列化和反序列化其状态。

[http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods](http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)上的算法之类的东西甚至可以解决问题。每当您开始一个新序列时，您都可以使用当前时间为其播种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:22:14.600

这个页面在这里[http://cod.ifies.com/2008/05/php-rand01-on-windows-openssl-rand-on.html](http://cod.ifies.com/2008/05/php-rand01-on-windows-openssl-rand-on.html)解释了 PHP rand() 的源代码

请注意，它不是很漂亮，它取决于 PHP 的怪癖和您的 rand() 的操作系统实现 :)

# javascript - 没有数组就无法嵌套模式的原因是什么

> ID：15059986
> 
> 赞同：1
> 
> 时间：2013-02-25T04:13:31.450
> 
> 标签：javascript, node.js, mongodb, mongoose

我只是想知道为什么猫鼬模式定义中不允许这样的事情：

```
var NameSchema = new mongoose.Schema({
  first: {type: String, trim: true },
  last: {type: String, trim: true }
});

var UserSchema = new mongoose.Schema({
  name: NameSchema,          // this line causes an error
  age: {type: Number}
}); 
```

这似乎是一个设计决定，我只是想知道是否可以解释为什么不支持它

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:00:36.263

您可以使用此方法嵌套架构：

```
name: [{ some: "props" } ] 
```

或者

```
name: [NameSchema] 
```

直接给出模式定义（不使用“类型：...”）的问题是 Mongoose 无法区分**选项**对象和**模式**对象。Mongoose 会认为**NameSchema**实际上是一个**选项**对象（包含类型、修剪等选项）。

# php - 从 $_POST 接收的 json 中读取关联数组

> ID：15059988
> 
> 赞同：0
> 
> 时间：2013-02-25T04:14:21.960
> 
> 标签：php, json, post

我有一个 php 文件接收 $_GET 信息和 $_POST 信息，对于 $_GET 信息没有问题，所以对于 $_POST 信息我收到这个字符串：

```
[{"channel":"\/meta\/handshake","id":"10","minimumVersion":"1.0","supportedConnectionTypes":["websocket","long-polling"],"version":"1.0"}] 
```

用 [ 开始和 ] 结束。

那我怎么读这个？感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:21:06.853

您可以使用[json_decode` 函数](http://php.net/manual/en/function.json-decode.php)

```
$channels = json_decode(file_get_contents('php://input')); // parse raw post
print_r($channels) // print structure of channels 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:16:34.453

首先像这样解码`json`数据

```
$arr = json_decode($_POST,true); 
```

然后像这样访问数据

```
echo $arr[0]['channel']; // output "/meta/handshake" 
```

工作示例[http://codepad.viper-7.com/ZeI9n3](http://codepad.viper-7.com/ZeI9n3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:24:31.150

尝试这个 ：

```
$str  = '[{"channel":"\/meta\/handshake","id":"10","minimumVersion":"1.0","supportedConnectionTypes":["websocket","long-polling"],"version":"1.0"}]';

echo "<pre>";
$arra   = json_decode($str,true);
print_r($arra);
/*Uncomment this for your out put*/
//echo "Required : ".echo $arra[0]['channel']; 
```

输出 ：

```
Array
(
    [0] => Array
        (
            [channel] => /meta/handshake
            [id] => 10
            [minimumVersion] => 1.0
            [supportedConnectionTypes] => Array
                (
                    [0] => websocket
                    [1] => long-polling
                )

            [version] => 1.0
        )

) 
```

参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# c - 将数据 buf 写入文件的最佳方法是什么

> ID：15059989
> 
> 赞同：1
> 
> 时间：2013-02-25T04:14:35.530
> 
> 标签：c, file-io

将数据 buf 写入文件的最佳方法是什么？

```
char buf[1024];
FILE *fp = fopen("test", "a+"); 
```

1.  `fwrite(buf, 1, 1024, fp);`
2.  `fwrite(buf, 1024, 1, fp);`
3.  `for (i = 0; i < 1024; i++) fwrite(buf, 1, 1, fp);`
4.  还是其他更高性能的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T04:24:52.940

循环很慢；可能很慢。`putc()`很可能，你会比`fwrite()`循环体做得更好。

前两个选项的区别在于返回值。第一个输出 1024 个单字节，如果完全成功则返回 1024，如果失败则返回一些较小的数字。第二个输出1024字节的单个单元；如果将它们全部写入，它将返回 1，但如果未能将它们全部写入，则返回 0。这是否重要取决于您在短写时可能会做什么。除了返回值，两者是等价的。

至少在您坚持使用文件流时，没有其他更高性能的方法。切换到文件描述符打开了更多选项，但是`write`对数据的一次调用可能就和它一样好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:17:43.877

1 和 2 将是相同的......但是，我会做 1，但就像：-

```
fwrite(buf, sizeof(char), 1024, fp); 
```

# android - developer.android.com 服务教程不清楚

> ID：15059990
> 
> 赞同：0
> 
> 时间：2013-02-25T04:14:38.863
> 
> 标签：android, android-service

我正在尝试了解 android 开发者网站上的教程：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

我理解它的大部分期望它在教程的“远程信使服务示例”部分中使用这个位代码......

```
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className,
        IBinder service) {
    ...

    Toast.makeText(Binding.this, R.string.remote_service_connected,
            Toast.LENGTH_SHORT).show();
} 
```

...在哪里`Binding.this`定义？那是错字吗？教程中还有其他几个地方`Binding.this`使用，但没有解释什么`Binding`是初始化或如何初始化。

`Binding.this`像这样在这里使用...

```
void doBindService() {
    // Establish a connection with the service.  We use an explicit
    // class name because there is no reason to be able to let other
    // applications replace our component.
    bindService(new Intent(Binding.this, 
        MessengerService.class), mConnection, Context.BIND_AUTO_CREATE);
    mIsBound = true;
    mCallbackText.setText("Binding.");
} 
```

任何帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:45:52.453

它只是外部包含类。在这种情况下，您可以通过它的用法看到它源自`Context`. 通过命名，您可以推断出它是绑定到 的类，`Service`很可能是`Activity`.

# sql - SQL Server TSQL 相当于“MySQL 限制”？

> ID：15059991
> 
> 赞同：1
> 
> 时间：2013-02-25T04:14:39.567
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

**我知道 MySQL 有 limit 命令，但我不知道我应该在 SQL Server 2008 中使用什么命令？**

我需要选择 clientId 和每次取件的最后一天，大多数客户都有多个取件（取件表中有 65 000 + 条记录）。

```
select  P.ClientID,LastName+' '+FirsName as Name , Adress,p.PickupDate
from Pickup P,Clients C
where P.ClientID= C.ClientID
order by PickupDate desc limit 1

throwing error *Msg 102, Level 15, State 1, Line 4
Incorrect syntax near 'limit'.*
because **LIMIT** is not key word in SQL server 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T04:50:09.720

限制命令在 sql server 中是 top

```
select top 1 P.ClientID
   ,LastName+' '+FirsName as Name 
   ,Adress
   ,p.PickupDate
from Pickup P
join Clients C on P.ClientID= C.ClientID
order by PickupDate desc 
```

根据海报的澄清 - 这甚至不是最高/限制问题。这是一个简单的 group by 语句。

```
select P.ClientID
   ,LastName+' '+FirsName as Name 
   ,Adress
   ,max(p.PickupDate)
from Pickup P
join Clients C on P.ClientID= C.ClientID
group by p.clientid, lastname + ' ' + firsname,adress 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T04:26:30.897

这通常使用[窗口函数](http://msdn.microsoft.com/en-us/library/ms189461.aspx)完成（2012 年之前） ：

```
;WITH Data
AS
    (
    SELECT P.ClientID
        , LastName + ' ' + FirsName as Name
        , Address
        , PickupDate
        , ROW_NUMBER() OVER(PARTITION BY P.ClientID ORDER BY PickupDate DESC)
            AS [Entry #]
    FROM Pickup P
    JOIN Clients C
        ON P.ClientID= C.ClientID
    )
SELECT *
FROM Data
WHERE [Entry #] = 1
ORDER BY PickupDate DESC 
```

有关该技术的一些很好的改进，请参阅[此博客文章](http://sqlblogcasts.com/blogs/sqlandthelike/archive/2012/04/26/offset-without-offset.aspx)（以避免扫描不必要的行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:27:09.547

尝试这个

```
select P.ClientID, LastName+' '+FirsName as 'Name', Adress, max(p.PickupDate)
from Pickup P,Clients C
where P.ClientID= C.ClientID
GROUP BY P.ClientID, Adress, LastName+' '+FirsName
order by PickupDate desc 
```

[小提琴](http://sqlfiddle.com/#!3/8b04f/1)

# android - 插入图像得到异步错误

> ID：15059992
> 
> 赞同：0
> 
> 时间：2013-02-25T04:14:42.683
> 
> 标签：android, android-asynctask, parse-platform

我正在尝试将图像插入 Parse 云，但出现错误这是我的代码：

```
public void uploadImage() { 
File f = new File("/mnt/sdcard/test.jpg");  
Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath());
ParseFile file = new ParseFile("test.jpg",bitmapToByteArray(bmp));
file.saveInBackground();
test = new ParseObject("Testing");
test.put("images", file);
test.saveInBackground();    
} 
```

以及来自 LogCat 的错误代码：

```
02-25 12:08:53.259: E/AndroidRuntime(12444): FATAL EXCEPTION: AsyncTask #2
02-25 12:08:53.259: E/AndroidRuntime(12444): java.lang.RuntimeException: An error occured while executing doInBackground()
02-25 12:08:53.259: E/AndroidRuntime(12444):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.lang.Thread.run(Thread.java:1096)
02-25 12:08:53.259: E/AndroidRuntime(12444): Caused by: java.lang.RuntimeException: This query has an outstanding network connection. You have to wait until it's done.
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseFile.assertNotRunning(ParseFile.java:126)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseFile.save(ParseFile.java:264)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseFile.save(ParseFile.java:258)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseObject.deepSave(ParseObject.java:1527)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseObject.save(ParseObject.java:924)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseObject$5.run(ParseObject.java:957)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.ParseObject$5.run(ParseObject.java:954)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.BackgroundTask.doInBackground(BackgroundTask.java:39)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at com.parse.BackgroundTask.doInBackground(BackgroundTask.java:1)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-25 12:08:53.259: E/AndroidRuntime(12444):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-25 12:08:53.259: E/AndroidRuntime(12444):    ... 4 more 
```

我不知道是什么导致了错误，请帮助我并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:13:58.437

只需摆脱对 file.saveInBackground() 的调用。保存对象将自动处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T06:54:24.317

您正在尝试同时保存一个文件和一个包含它的对象 - 显然，您正在使用的框架不允许这样做。因此，要么不这样做，要么将后续调用作为第一次调用的成功/完成回调。

这是几个相关链接（顺便说一句，通过谷歌搜索异常找到了它们）：

[Android 2.2 上的异常“此查询具有出色的网络连接..”](https://parse.com/questions/exception-this-query-has-an-outstanding-network-connection-on-android-22)

[为什么我会收到“此对象具有出色的网络连接”NSInternalInconsistencyException？](https://parse.com/questions/why-am-i-getting-a-this-object-has-an-outstanding-network-connection-nsinternalinconsistencyexception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T23:09:14.810

我必须把它改成这个

```
public void uploadImage()  {
        test = new ParseObject("Testing");
        File f = new File("/mnt/sdcard/test.jpg");

        Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath());
        file = new ParseFile("test.jpg",bitmapToByteArray(bmp));
        file.saveInBackground(new SaveCallback() {

            @Override
            public void done(ParseException e) {
                // TODO Auto-generated method stub

                test.put("images", file);
                test.saveInBackground();
            }
        }); 
} 
```

# bison - 为什么编译我的野牛文件时出现这么多警告？

> ID：15059994
> 
> 赞同：1
> 
> 时间：2013-02-25T04:14:51.253
> 
> 标签：bison, yacc, lex, flex-lexer

我正在为一种简单的编程语言设计一个词法和语法分析器。这是我的 flex .l 文件：

```
%{
#include <cstdio>
#include <stdio.h>
#include <iostream>
#include <stdlib.h>
using namespace std;
#define YY_DECL extern "C" int yylex()
#include "littleDuck.tab.h" 
int line_num = 1;
%}
id      [a-zA-Z][a-zA-Z0-9]*
cteI    [0-9]+
not     (<)(>)
cteF    {cteI}(\.{cteI}((e|E)("+"|"-")?{cteI})?)?
ctestring   (\".*\")

%%

[ \t]   ;
program {return PROGRAM;}
var     {return VAR;}
print   {return PRINT;}
"else"  {return ELSE;}
"if"    {return IF;}
{id}    {return ID;}
\=      {return '=';}
\<      {return '<';}
\>      {return '>';}
{not}   {return NOT;}
\+      {return '+';}
\-      {return '-';}
\/      {return '/';}
\*      {return '*';}
\:      {return ':';}
\,      {return ',';}
\;      {return ';';}
\{      {return '{';}
\}      {return '}';}
\(      {return '(';}
\)      {return ')';}
{cteI}  {yylval.ival = atoi(yytext); return INT;}
{cteF}  {yylval.fval = atof(yytext); return FLOAT;}
{ctestring} {yylval.sval = strdup(yytext); return STRING;}
\n      {++line_num;}
.       ;

%% 
```

flex 正在正确编译该文件，尽管我不完全确定是否可以总结一些术语。编译我的野牛文件时，我的真正问题出现了。我通过输入以下内容从 Ubuntu 终端执行此操作：

```
gabriel@virtualbox:~/Lenguajes/flexBison$ bison -d littleDuck.y 
```

它返回 22 个语法无用的非终结符和 41 个语法无用的规则。我的野牛文件是下一个：

```
%{
#include <cstdio>
#include <iostream>
using namespace std;

extern "C" int yylex();
extern "C" int yyparse();
extern "C" FILE *yyin;
extern int line_num;

void yyerror(const char *s);
%}

%union{
    int ival;
    float fval;
    char *sval;
}

%token ID NOT PROGRAM VAR PRINT IF ELSE

%token <ival> INT
%token <fval> FLOAT
%token <sval> STRING

%%
programa:
    PROGRAM ID ':' vars_1
    ;
vars_1:
    VAR
    ;
vars:
    VAR ID id_1
    ;
id_1:   
    ',' id_1
    | ':' tipo tipo_1
    ;
tipo:
    INT
    | FLOAT
    ;
tipo_1:
    /* empty */
    ID id_1
    ;
bloque:
    '{' e1
    ;
e1:
    estatuto e2
    | e2
    ;
e2:
    estatuto e2
    | '}'
    ;
estatuto:
    asignacion
    | condicion
    | escritura
    ;
asignacion:
    ID '=' expresion ';'
    ;
expresion:
    exp exp_1
    ;
exp:
    termino exp_2
    ;
exp_1:
    /* empty */
    | '>' exp
    | '<' exp
    |NOT exp
    ;
exp_2:
    '+' exp
    | '-' exp
    ;
escritura:
    PRINT '(' esc_1
    ;
esc_1:
    expresion esc_2
    | STRING esc_2
    ;
esc_2:
    ',' esc_1
    | ')' ';'
    ;
condicion:
    IF '(' expresion ')' bloque cond
    ;
cond:
    ';'
    | ELSE bloque ';'
    ;
termino:
    factor term
    ;
term:
    '*' termino
    | '/' termino
    ;
var_cte:
    ID
    | INT
    | FLOAT
    ;
factor:
    '(' expresion ')'
    | var_cte
    | '+' var_cte
    | '-' var_cte
    ;

%%
main() {
    FILE *myfile = fopen("testFile", "r");
    if (!myfile) {
        cout << "I can't open file" << endl;
        return -1;
    }
    yyin = myfile;

    do {
        yyparse();
    } while (!feof(yyin));

}

void yyerror(const char *s) {
    cout << "Yikes! Parse error on line " << line_num << "! Message: " << s << endl;
    exit(-1);
} 
```

为什么会生成警告，我该如何摆脱它们？很抱歉发布完整的程序，但我认为所有信息都很重要，因为 flex 文件显示了正在生成的令牌，并且 bison 文件具有所有语法规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:17:06.177

您的语法本质上只是：

```
programa:
    PROGRAM ID ':' vars_1
    ;
vars_1:
    VAR
    ; 
```

这意味着它将接受的唯一有效程序是

```
program id : var 
```

where`id`可能是任何有效的标识符。其他任何内容都将是语法错误。

所有其余的规则都是无法到达且无用的，因为无法从`programa`. 所以野牛告诉你，你不妨删除它们。

您可能想要的是添加一些其他规则`programa`或`vars_1`规则以导致其余规则，以便实际解析您想要的语言

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T15:48:20.583

某些语法确实不正确或缺少符号。我重写了我的语法，它工作正常，只是指出有 3 个班次减少。我在接下来的标记中添加了左关联性：

```
%left '*' '/'
%left '+' '-' 
```

此外，我没有为保留字“int”和“float”添加标记，只为 int 和 float 常量添加标记。这显然是一个大问题，因为我不能声明任何变量。我添加了它们并用 FLOATC 和 INTC 替换了常量的标记。这是在词汇文件和语法文件中添加的。

# vbscript - vbscript 获取网络驱动器的登录用户名

> ID：15059997
> 
> 赞同：0
> 
> 时间：2013-02-25T04:15:29.767
> 
> 标签：vbscript, drive

我想获得每个网络驱动器的连接用户名。我发现打印本地计算机名称而不是网络驱动器连接的登录用户名很容易。有人知道吗？谢谢。

```
Set wn1 = Wscript.CreateObject("WScript.network")
MsgBox(wn1.UserName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:51:29.103

如果您想知道与显式凭据连接的共享的登录名，则必须枚举服务器端的会话。客户端不存储此信息。对于所有其他网络驱动器，登录名是当前用户的名称 ( `CreateObject("WScript.Network").UserName`)。

# ember.js - 如何在 Ember 中访问 RSVP？

> ID：15059998
> 
> 赞同：2
> 
> 时间：2013-02-25T04:15:35.390
> 
> 标签：ember.js

RSVP 在 Ember.js 中被打包为一个模块。但是，它似乎并不在全球范围内可用。我想用它`RSVP.all`来解决不确定数量的承诺。是否有其他方法可以访问此功能，或者可能在其他地方需要该模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:37:16.830

对 RSVP 的访问刚刚添加`Ember`到此提交中的命名空间：[https ://github.com/emberjs/ember.js/commit/d433d59690eac9a368432e01324d6424a3480d95](https://github.com/emberjs/ember.js/commit/d433d59690eac9a368432e01324d6424a3480d95)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:09:20.503

我没有使用模块的经验，但唯一使用它们的地方是 DeferredMixin（参见[源代码](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/deferred.js)）。所以它不是公开的。

您是否尝试过要求它？

```
var RSVP = requireModule("rsvp"); 
```