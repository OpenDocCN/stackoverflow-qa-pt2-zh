# StackOverflow 问答 13581000-13581999

# javascript - 替换标签（如果存在）

> ID：13581011
> 
> 赞同：0
> 
> 时间：2012-11-27T09:25:22.993
> 
> 标签：javascript, jquery

`input`当我单击按钮时，我会在标签内动态附加标签`div`，因此可能会在该 div 中重复相同的标签。我想做的是用新的替换现有的。我的代码如下：

```
<div id="data" name="data"></div>
<input type=button value="+ Ajouter Element" onclick="ajouter();">

<script>
function ajouter() {   
    for(k=0;k<i;k++) {
        h=$("#hauteur"+(k+1)).val();
        l=$("#largeur"+(k+1)).val();
        p=$("#position"+(k+1)).val();
        ch+='<div style="width: '+l+'%; height: '+h+'%; border-style:solid; float:'+p+' "></div>';
        $("#data").append('<input type="hidden" name="div'+(k+1)+'" id="div'+(k+1)+'" value="'+(k+1)+';'+h+';'+l+';'+p+'">');}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:25:22.993

好吧，我自己找到了它：

```
if($("#div"+(k+1)).length == 0) {
    $("#data").append('<input type="hidden" name="div'+(k+1)+'" id="div'+(k+1)+'" value="'+(k+1)+';'+h+';'+l+';'+p+'">');
} else {
    $("#data").find("#div"+(k+1)).replaceWith('<input type="hidden" name="div'+(k+1)+'" id="div'+(k+1)+'" value="'+(k+1)+';'+h+';'+l+';'+p+'">');
} 
```

希望这可以帮助任何需要它的人:)

# cakephp-1.3 - cakephp1.3 中的验证

> ID：13581020
> 
> 赞同：0
> 
> 时间：2012-11-27T09:25:43.457
> 
> 标签：cakephp-1.3

我在模型中使用了这个查询来验证大写字母的等级

```
 'grade' => array(
                 'ruleName' => array(
                           'rule' => '/^[A-Z]{1}$/i',
                           'message'=>'You must enter the code'
                                  // extra keys like on, required, etc. go here...
                              ),
                 'ruleName2' => array(
                          'rule'=> 'isUnique',
                          'on'=> 'create',
                          'message' => 'This grade is already taken. Please choose a different one.'
                               ),
                 'ruleName3'=>array(
                          'rule'=>'notEmpty',
                           'message'=>'This field is required'
                             )
                 ), 
```

但它不起作用，就像我给一个小写字母而不是大写字母一样，它会进入数据库。所以请帮我解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:42:46.447

不是很了解规则吗？为什么只有大写字母，如果真的有必要，为什么不在你的保存函数中创建一个 strtoupper() 呢？

但要回答，我相信这个角色应该是这样的：

```
'rule' => '/^[A-Z -]+$/i' 
```

# javascript - 将数据从节点传递到玉？

> ID：13581023
> 
> 赞同：3
> 
> 时间：2012-11-27T09:25:47.887
> 
> 标签：javascript, node.js, pug, render

问题是我渲染视图并发送一些数据

```
console.log(products); // shows an array
res.render('seller/sell',{'shop_id':req.user.shop_id ,'products':products}); 
```

我把这样的数据保存在玉中

```
input(id='shop_id',type='hidden',name='shop_id',value='#{shop_id}')
input(id='pd',type='hidden',name='pd',value='#{products}')

 if(products !='')
    each val , key in products
        a(href!='home/sell/edit?id=#{val.id} ',class='product')
            img(class='product_thum',src!='#{ val.product_thum}',alt!='#{ val.product_name}',title!='#{ val.product_name}')
            p.product_name #{ val.product_name} 
```

然后我尝试获取产品

```
var d = $('#pd').val();
console.log(typeof d);  //shows string 
```

我知道产品应该是一个数组，否则

```
 if(products !='')
    each val , key in products
        a(href!='home/sell/edit?id=#{val.id} ',class='product')
            img(class='product_thum',src!='#{ val.product_thum}',alt!='#{ val.product_name}',title!='#{ val.product_name}')
            p.product_name #{ val.product_name} 
```

不起作用，但是为什么我需要数组时会得到一个字符串？

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:42:55.087

您不能在隐藏的输入字段中“存储”数组，但您可以做的是存储产品 ID 的列表，如下所示：

```
var productIds = products.map(function(product){return product.id}).toString();

res.render('seller/sell',
  {'shop_id':req.user.shop_id ,'products':products, productIds: productIds}); 
```

然后，在您的翡翠视图中：

```
input(id='shop_id',type='hidden',name='shop_id',value='#{shop_id}')
input(id='pd',type='hidden',name='pd',value='#{productIds}')

 if(products !='')
    each val , key in products
        a(href!='home/sell/edit?id=#{val.id} ',class='product')
            img(class='product_thum',src!='#{ val.product_thum}',alt!='#{ val.product_name}',title!='#{ val.product_name}')
            p.product_name #{ val.product_name} 
```

的值`pd`现在将是一个逗号分隔的产品 ID 列表

不是特别优雅，但它解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T06:56:56.767

显示逗号分隔字符串的最佳方式 Example data = abc,pqr,lmn;

```
below code in js file
test = data.toString().split('",");
res.render("show.jade",{list: test});
display the code in jade as
table
 tbody
    each item in list
     tr
      td #{item} 
```

# iphone - Amazon DynamoDB ProvisionedThroughputExceededException (iOS 开发工具包)

> ID：13581025
> 
> 赞同：1
> 
> 时间：2012-11-27T09:25:52.847
> 
> 标签：iphone, objective-c, ios, amazon-web-services, amazon-dynamodb

我正在使用 DynamoDB。我从应用程序进行扫描操作。一切都很完美。一段时间后，响应为零。但我没有收到任何例外。我启用了详细日志记录，

```
[AmazonLogger verboseLogging]; 
```

如果启用了详细日志记录，我可以看到一些日志，例如，

> "__type":"com.amazonaws.dynamodb.v20111205#ProvisionedThroughputExceededException","message":"超出了为表配置的预置吞吐量级别。考虑使用 UpdateTable API 提高预置级别"

我的代码看起来像这样，

```
@try {
    DynamoDBScanRequest *request = /* Create request */;
    DynamoDBScanResponse *response = [[AmazonClientManager ddb] scan:request];
    /* 
     * response is nil if the provisioning throughput is exceeded 
     * and the all retries are over
     */
    ALog(@"Response: %@", response); 
    NSMutableArray *array = response.items;
    return array;
} @catch (NSException *exception) {
    /* 
     * I am expecting the  ProvisionedThroughputExceededException 
     * to be thrown here. But its not throwing here. Instead I get the response
     * as nil above.
     */
    ALog(@"Exception: %@", exception);
    return nil;
} 
```

我做对了吗？有人可以帮我吗？

谢谢。

**编辑：**谁能给我一个粗略的想法，即为 QuestionAnswer 表设置多少吞吐量（读/写）容量，其中有近 10 个字段，如 TopicID、QuestionID、Question、Answer、AskedAt、RepliedAt、QuestionType 等？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T00:01:37.460

我尝试了一个读取容量单位比预置多的扫描请求，我收到`AmazonClientException`一条通用消息：“发生未知错误。” 我们正在修复，下一个版本应该`DynamoDBProvisionedThroughputExceededException`在描述的情况下正确返回。

您说响应为零，但我无法重现该问题。你打电话`[AmazonErrorHandler shouldNotThrowExceptions]`来关闭例外吗？`AmazonClientException`开启此选项后，SDK 不会抛出`AmazonServiceException`. 您也可能使用的是旧版本的 SDK。请尝试 1.4.4 看看是否有异常。这是次优的，但至少你应该能够在出现问题时捕获异常。

# android - Android TextView 内存泄漏

> ID：13581026
> 
> 赞同：3
> 
> 时间：2012-11-27T09:25:59.250
> 
> 标签：android, memory-leaks, garbage-collection, textview, settext

我正在开发一个音乐应用程序，其中使用了 Seekbar。我有一种方法可以处理搜索栏的性能，并且效果很好。但是如果 seekbar 正在运行，则会出现内存泄漏并且 Log cat 显示如下

```
GC_CONCURRENT freed 1692K, 34% free 10759K, paused 3ms+8ms 
```

当搜索栏正在进行时，这会不断出现

我发现问题是由于动态更新 TextView 导致的，即显示当前歌曲的持续时间。

我该如何解决。请帮我解决这个问题

我的功能是

```
public void seekbarProgress(){

        handler.postDelayed(new Runnable() {
            @Override
            public void run() {

                //current position of the play back 
                currPos = harmonyService.player.getCurrentPosition();
                if(isPaused){
                    //if paused then stay in the current position
                    seekBar.setProgress(currPos);
                    //exiting from method... player paused, no need to update the seekbar
                    return;
                }

                //checking if player is in playing mode
                if(harmonyService.player.isPlaying()){
                    //settting the seekbar to current positin
                    seekBar.setProgress(currPos);
                    //updating the cuurent playback time
                    currTime.setText(getActualDuration(""+currPos));
                    handler.removeCallbacks(this);
                    //callback the method again, wich will execute aftr 500mS
                    handler.postDelayed(this, 500);
                }
                //if not playing...
                else{
                    //reset the seekbar
                    seekBar.setProgress(0);
                    //reset current position value
                    currPos = 0;
                    //setting the current time as 0
                    currTime.setText(getActualDuration(""+currPos));
                    Log.e("seekbarProgress()", "EXITING");
                    //exiting from the method
                    return;
                }
            }
        }, 500);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:38:07.607

`GC_CONCURRENT`行并不意味着您有内存泄漏。它只是垃圾收集器清理未使用的内存。

**编辑** 这一行：

```
currTime.setText(getActualDuration(""+currPos)); 
```

不会造成内存泄漏（除非`getActualDuration()`做了一些有趣的事情）。它只是`String`每 500 毫秒创建一个新的，但它不是内存泄漏。旧的将像您的情况一样被垃圾收集。

# http - 来自 hadoop 映射作业的 HTTP 请求问题

> ID：13581030
> 
> 赞同：2
> 
> 时间：2012-11-27T09:26:14.930
> 
> 标签：http, sockets, hadoop

我有一个过程，我在其中聚合数据并通过 http POST 从地图作业中发送请求。我必须等待结果。不幸的是，我遇到了这种方法的问题。

这样做时，在发送过程中会丢失数据。我们设法调查了这个问题，以至于我们知道通信“破坏”了套接字，因此数据丢失了。有没有人有从映射器发出 http POST 请求的经验以及需要注意什么？

一些示例代码；映射器：

```
public void map(final LongWritable key, final Text value, Context context) throws IOException {
        String someData = value.toString();
        buffer.add(someData);

        if (buffer.size() >=  MAX_BUFFER_SIZE) {
                emit(buffer);
            }
        }
    } 
```

在“emit”中，我序列化数据（这很好，我测试了几次）然后发送；发件人：

```
byte[] received = null;
    URL connAddress = new URL(someComponentToBeAdressed);
    HttpURLConnection urlConn;
    urlConn = (HttpURLConnection) connAddress.openConnection();

    urlConn.setDoInput(true);
    urlConn.setDoOutput(true);
    urlConn.setRequestMethod("POST");
    urlConn.setRequestProperty("Content-type", "text/plain");

    urlConn.getOutputStream().write(serialized_buffer);
    urlConn.getOutputStream().flush();
    urlConn.getOutputStream().close();

    received = IOUtils.toByteArray(urlConn.getInputStream());
    urlConn.disconnect(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:41:09.110

我们能够解决这个问题。hadoop 中没有错误，错误在于我们的 apache tomcat 配置中的一些超时设置为一小段时间。对于一些更大的数据块，我们克服了超时时间并得到错误。不幸的是，没有那么有用的例外情况。

# azure - Azure SDK 更新后 WCF 停止生成 Silverlight 类

> ID：13581033
> 
> 赞同：1
> 
> 时间：2012-11-27T09:26:20.193
> 
> 标签：azure

我最近更新到 Azure SDK 1.8，但生成的代码文件包含这样的错误：

```
 /// <summary>
    /// Gets the context that is registered as a lifetime object with the current application.
    /// </summary>
    /// <exception cref="InvalidOperationException"> is thrown if there is no current application,
    /// no contexts have been added, or more than one context has been added.
    /// </exception>
    /// <seealso cref="System.Windows.Application.ApplicationLifetimeObjects"/>
    public new static WebContext Current
    {
        get
        {
            return ((WebContext)(WebContextBase.Current));
        }
    } 
```

贾拉勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:47:38.687

我现在找到了以下解决方案。将以下代码添加到 app.config 和 web.config ：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="1.1.0.0" newVersion="1.7.0.0" />
  </dependentAssembly>
</assemblyBinding>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.ServiceBus" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="1.6.0.0" newVersion="1.7.0.0" />
  </dependentAssembly>
</assemblyBinding>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.ApplicationServer.Caching.Core" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="101.0.0.0" newVersion="1.0.4655.0" />
  </dependentAssembly>
</assemblyBinding> 
```

# java - 使用 groovy 的表达式引擎

> ID：13581034
> 
> 赞同：1
> 
> 时间：2012-11-27T09:26:20.303
> 
> 标签：java, groovy

我正在尝试为最终用户公开基于 groovy 构建的表达式引擎。我有一些 excel 风格的关键字，用户可以使用这些关键字中的变量（需要在运行时替换）进行评估。例如，静态关键字 FIRSTCHAR(varName) 将返回字符串的第一个字符。我有这个以某种方式工作。

当前的实现我已经重写了 groovy 类加载器来创建一个编译单元，其中包含一个重写的 PrimaryClassNodeOperation 之类的东西

```
class MyGroovyClassLoader extends GroovyClassLoader {
    protected CompilationUnit createCompilationUnit(
            CompilerConfiguration config, CodeSource source) {
        CompilationUnit cu = super.createCompilationUnit(config, source);
        cu.addPhaseOperation(new PrimaryClassNodeOperation(){

            @Override
            public void call(SourceUnit source, GeneratorContext context, ClassNode classNode)
                    throws CompilationFailedException {
               source.getAST().getStatementBlock().visit(visitor);
            }
        }, Phases.SEMANTIC_ANALYSIS);
        return cu;
    }
} 
```

然后访问者识别静态表达式和变量表达式。但是，使用这种方法我遇到了困难

1) 使用点 (.) 支持变量名称，因为点被视为属性表达式。我可以在此阶段将属性表达式保留为变量表达式吗？

2) 另外，对于像 (left(name,1)=='S' && right(name,1)=='n') [name 中的第一个字符是 s，最后一个字符是 n] 这样的表达式 - 我想要相等检查是否为单等号而不是双等号，和/AND 而不是 && 或 .and() 类似 (left(name,1)='S' and right(name,1)='n')

实现此类自定义的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:05:19.600

最好的方法是使用自定义解析器（因为您不希望您的用户编写任何 groovy），然后使用 groovy 实际实现后端

例如：非常具有指示性，您的实施可能会有所不同

```
(left(name,1)='S') 
```

对于上面的片段，标记可以是 method:left, args:((var:name),(val:1)), exp:EQUALS, val:'S' 在后面有一个映射，它将你的标记等同于 groovy 等价物

然后，您可以针对 groovy 类触发解析的标记，当然方法和参数不存在，使用一些 groovy 技巧将其转换为您的实际实现[1](http://groovy.codehaus.org/Dynamic+Groovy)

# java - 如何获得 1 个 JFrame？

> ID：13581042
> 
> 赞同：0
> 
> 时间：2012-11-27T09:26:41.133
> 
> 标签：java, swing, jframe

我有 2 个 JFrame ：来自屏幕 A 的 A 和 B ：调用 B 为：

```
B b=new B();
b.setName("B1");
b.show(); 
```

和

```
 B b=new B();
    b.setName("B2");
    b.show(); 
```

结果：显示 2 屏幕 B 为：B1 和 B2 如果来自屏幕 A：我想要设置值来控制 B1 或 B2。怎么码？谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:32:32.470

*   使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是创建两个或更多[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

*   如果您有真正重要的理由使用另一个弹出窗口和/或鼠标和按键事件的模式，请使用具有[专利的](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Frame,%20boolean%29)[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)[`JFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Frame,%20boolean%29)

# iphone - 在摆动的图像上显示删除按钮并删除该特定图像

> ID：13581046
> 
> 赞同：4
> 
> 时间：2012-11-27T09:27:02.163
> 
> 标签：iphone, xcode, uiscrollview, uianimation

我在滚动视图中添加了图像。在长按时，我为所有图像提供了摆动动画。当我们卸载任何类似的应用程序时，我想在每个图像的右上角显示删除按钮，就像在 iphone 中一样。

```
- (void)startWobble {
for (UIView *imgView in viewsInScrollView) {
    UIButton *deleteImgButton = [[UIButton alloc] initWithFrame:CGRectMake(55,-7,12,12)];        
    [deleteImgButton setImage:[UIImage imageNamed:@"close_icon.png"] forState:UIControlStateNormal];
    [deleteImgButton addTarget:self action:@selector(deleteImage:) forControlEvents:UIControlEventTouchUpInside];
    [imgView addSubview:deleteImgButton];

    imgView.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-5));        
    [UIView animateWithDuration:0.20
                          delay:0.0
                        options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse)
                     animations:^ {
                         imgView.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(5));
                     }
                     completion:NULL
     ];
}
}
-(void)deleteImage : (id)sender {
     NSLog(@"Delete Image");
} 
```

这里没有调用选择器....我该如何解决这个..???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:32:58.860

您最初可以在所有自定义视图中添加带有 TAG 值的删除按钮并将它们隐藏。现在在`- (void)startWobble`方法中，您只需使用他们的 TAG 就可以让他们取消隐藏。

我以这种方式在我的一个应用程序中完成了。希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:02:01.767

简单的.....

```
#define RADIANS(degrees) ((degrees * M_PI) / 180.0)

CGAffineTransform leftWobble = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-5.0));
CGAffineTransform rightWobble = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(5.0));

itemView.transform = leftWobble;  // starting point

[UIView beginAnimations:@"wobble" context:itemView];
[UIView setAnimationRepeatAutoreverses:YES]; // important
[UIView setAnimationRepeatCount:10];
[UIView setAnimationDuration:0.25];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(wobbleEnded:finished:context:)];

itemView.transform = rightWobble; // end here & auto-reverse

[UIView commitAnimations];

...

- (void) wobbleEnded:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context 
{
     if ([finished boolValue]) {
        UIView* item = (UIView *)context;
        item.transform = CGAffineTransformIdentity;
     }
} 
```

从[thisQuestion得到它](https://stackoverflow.com/questions/929364/how-to-create-iphones-wobbling-icon-effect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:03:25.043

从苹果文档中找到这句话并记住你的问题：

> 在动画期间，对于正在动画的视图，用户交互暂时被禁用。（在 iOS 5 之前，整个应用程序都禁用了用户交互。）

# javascript - 打开网络分析；正确实施热图有人吗？

> ID：13581047
> 
> 赞同：1
> 
> 时间：2012-11-27T09:27:13.343
> 
> 标签：javascript, analytics

开放式网络分析的热图功能非常酷；如果你让它工作。文档不完整，wiki 完全不清楚。论坛什么都没有出现，所以很令人沮丧。谁在 OWA 中实现了热图并可以分享如何做到这一点？

所以这是基本的示例代码：

```
<script type="text/javascript">
//<![CDATA[
var owa_baseUrl = 'http://stats.viewcom.nl/';
var owa_cmds = owa_cmds || [];
owa_cmds.push(['setSiteId', 'xxx']);
owa_cmds.push(['trackPageView']);
owa_cmds.push(['trackClicks']);
owa_cmds.push(['trackDomStream']);

(function() {
    var _owa = document.createElement('script'); _owa.type = 'text/javascript'; _owa.async = true;
    owa_baseUrl = ('https:' == document.location.protocol ? window.owa_baseSecUrl || owa_baseUrl.replace(/http:/, 'https:') : owa_baseUrl );
    _owa.src = owa_baseUrl + 'modules/base/js/owa.tracker-combined-min.js';
    var _owa_s = document.getElementsByTagName('script')[0]; _owa_s.parentNode.insertBefore(_owa, _owa_s);
}());
//]]> 
```

维基指的是：

```
http://wiki.openwebanalytics.com/index.php?title=Heatmap 
```

以某种方式在某处添加（不清楚）：

```
//create the object
var heatmap = new owa.heatmap();
heatmap.generate(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T05:12:30.483

很抱歉回答晚了，但我自己是通过谷歌搜索来到这里的，对没有人回答感到非常失望。我一直在为同一个问题苦苦挣扎——“如何在 OWA 中启用/查看 heatmpas”，直到我从 az 扫描了他们的演示页面。看起来热图已经默认启用。只需打开任何页面的报告，您就会在“报告”部分看到底部链接。![看截图](../Images/280a2d7d67e46547df17bc6eb9e99190.png)

# php - 如何检查数组中包含的值？

> ID：13581048
> 
> 赞同：0
> 
> 时间：2012-11-27T09:27:12.927
> 
> 标签：php, arrays, variables

如何检查以下值​​​：

```
$var1 = x <= 100;
$var2 = 'P1, P2';
$check = array ($var1, $var2); 
```

如果有数据输入如下：

```
$input1 = 60;
$input2 = P2; 
```

如果其中包含的值`$input1`将值 1，如果 包含在其中`$var1`的值将值 1，如果不是，则为 0。我怎么看？谢谢你`$input2``$var2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:33:45.867

这就是我猜你想要的，但是我认为存在一定的语言障碍。

```
$var1 = 100;
$var2 = 'P1, P2'

$input1 = 60;
$input2 = 'P2';

$check = 60 <= $var1 ? 1 : 0;
$check = strpos($var2, $input2) ? 1 : 0; 
```

# java - 将值返回给“开启者”的 GWT 对话框

> ID：13581050
> 
> 赞同：2
> 
> 时间：2012-11-27T09:27:16.960
> 
> 标签：java, gwt, callback, communication, dialog

我想创建一个弹出窗口（实现为 DialogBox 或其他类似组件），我应该能够在多个页面或表单中重用它。我希望 DialogBox 能够将值返回给“opener”。

我在想，即显示一个表格的对话框（通过 RPC 获得）。该对话框可以在几个不同的页面中使用。当用户选择一行时，一个对象被“传回页面”（例如，在其上调用一个方法），因此它可以将其写入表单字段，或对它进行任何操作。被调用者对 de DialogBox 内部的逻辑一无所知，只知道如何处理返回类型。

我打算做的一个很好的例子可能是返回 java.util.Date 的 DatePicker。

你做过类似的事情吗？我感谢您的帮助。谢谢！大卫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T10:00:16.667

这真的很容易。您应该首先创建一个界面，该界面将由打开您的所有页面实现`DialogBox`：

```
public interface DialogBoxOpener {
    void dialogBoxValidated (Date selectedDate);
    void dialogBoxCancelled ();
} 
```

然后，创建您的`DialogBox`, 并将`DialogBoxOpener`as 参数添加到您的`showDialogBox`方法中：

```
public class MyDialogBox extends DialogBox {
    private DialogBoxOpener opener = null;
    private final Button cancelButton = new Button("Cancel");
    private final Button validButton = new Button("Ok");
    private final DateBox myDateBox = new DateBox();

    public MyDialogBox () {
            cancelButton.addClickHandler(new ClickHandler () {
                    @Override
                    public void onClick(final ClickEvent event) {
                            hide();
                            if (opener!=null)
                                    opener.dialogBoxCancelled();
                    }
            });

            validButton.addClickHandler(new ClickHandler () {
                    @Override
                    public void onClick(final ClickEvent event) {
                            hide();
                            if (opener!=null)
                                    opener.dialogBoxValidated(myDateBox.getValue());
                    }
            });
            // TODO : create your DialogBox
    }

    public void showDialogBox (final DialogBoxOpener opener) {
            this.opener = opener;
            // Show the DialogBox
            center ();
    }
} 
```

现在，您可以`DialogBox`从您的页面显示您的：

```
public class MyPage implements DialogBoxOpener {
    private MyDialogBox myDialogBox = getMyDialogBox();

    private void openDialogBox () {
            myDialogBox.showDialogBox(this);
    }

    public void dialogBoxValidated (Date selectedDate) {
            // TODO : Do something with the date
    }

    public void  dialogBoxCancelled () {
            // TODO : Do something
    }
} 
```

# ruby - 如何验证内容是灰色的

> ID：13581058
> 
> 赞同：1
> 
> 时间：2012-11-27T09:27:38.677
> 
> 标签：ruby, selenium-webdriver

我正在为其编写脚本的应用程序（使用 selenium-webdrive 和 Ruby）是在 AJAX 中构建的。在那，我想检查内容是否变灰-

```
<div id="bottomHalf" class="disabled" style="background-color: transparent;"> 
```

为了检查它是否变灰，我很困惑如何编写代码。根据我的知识，我只能找到元素 -

```
driver.find_element(:id, "bottomHalf") 
```

但是我不知道如何编写代码来检查 class="disabled" 以便我可以验证内容是否真的变灰了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:45:30.497

您可以使用 CSS 选择器代替裸 ID 选择。

```
driver.find_element(:css, '#bottomHalf.disabled') 
```

有关可用选择选项的更多信息，请单击[此处](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/SearchContext.html#find_element-instance_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:44:57.493

你在正确的方向队友......找到一个元素后，你可以检索该元素的属性。在 Ruby 中使用以下方法。

```
# get an attribute
class_name = element.attribute("class") 
```

这是 C# 中的一个示例，用于在找到元素后检索属性值。

```
driver.Navigate().GoToUrl("http://google.com");
IWebElement Element = driver.FindElement(By.Id("gbqfq"));
String Class_name = Element.GetAttribute("Class"); 
```

检查此 URL 以获取更多 Ruby Selenium 特定绑定 [http://code.google.com/p/selenium/wiki/RubyBindings](http://code.google.com/p/selenium/wiki/RubyBindings)

# java - 有没有理由避免使用 slf4j？

> ID：13581061
> 
> 赞同：2
> 
> 时间：2012-11-27T09:27:44.543
> 
> 标签：java, logging, log4j, slf4j

深入研究一些 Java 日志记录，以及关于[*slf4j*](http://www.slf4j.org/manual.html)的问题。看起来非常方便，总是在 .java 文件中以相同的方式进行日志记录，只关心记录器名称，然后通过正确的 .jar 和 .properties/.xml 文件进行所有日志记录配置。

在任何项目中默认使用或不使用*slf4j的原因是什么？*

在这种特殊情况下，log4j 实际上会进行日志记录（一些到文件，一些到标准输出，一些到数据库），它是一个 maven 项目。

我希望有经验的人给出简单的“是的，去吧”或“不，使用 slf4j 是在自找麻烦 X”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:33:25.510

我们已经登录`SLF4J`API 1.5 年了。在此之前我们`log4j`直接使用。现在我们使用`jboss.logging`, 和一个`logback`间奏，并且必须在我们的代码中更改零行以更改所有框架。

所以，去吧；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T09:32:12.337

绝对使用 slf4j。它是当今标准的通用日志接口，它最终在插入实际日志实现方面做得很好。强烈推荐 logback 作为实现，它是 log4j 的继承者，由从一开始就退出 log4j 的同一个人完成，但理顺了 log4j 中无法理顺的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:29:31.493

好吧，我实际上最终没有使用 slf4j，而是直接使用 log4j，因为 slf4j 只是继续使用`JDK14LoggerAdapter`而不是`Log4jLoggerAdapter`或 LogBack，我厌倦了试图通过调整依赖项来让它工作......

有问题的项目是使用 Maven2 构建的 Jenkins 插件，这可能是复杂的原因。“只是将这些依赖项放到 .pom 中”确实不起作用。

所以，回答我自己的问题，不使用 slf4j 的一个原因是：更少的移动部件，更少的依赖，更少的手册和文档需要阅读，更少的问题可以在 SO/邮件列表中提问。

# ios - 我可以在 IOS 设备（ipad、iphone）上为 OSX 平台使用 SDK 吗？

> ID：13581062
> 
> 赞同：3
> 
> 时间：2012-11-27T09:27:45.933
> 
> 标签：ios

我正在研究在 ipad/iphone 上使用读卡器读取其上/可用数据的可能性。

我发现一些带有 SDK 的读卡器似乎可以完成这项工作：

```
http://www.idtechproducts.com/products/mobile-readers/136.html
http://www.dekimado.com/scr/iCard.html
http://smartware2u.com/products/75-iphone-and-ipad-smart-card-readers.aspx
http://www.thursby.com/PKard_Reader.html 
```

对于我正在寻找 e-id/sis 的卡片，有一个中间件 SDK（eID Middleware SDK 4.0）。我想我将不得不用它来读取卡。以下是兼容性规格。

我的问题是；我可以将此 SDK 用于 ios 吗？

谢谢，

兼容平台：

```
Windows: Win32 (Windows 2000, XP, Vista)
Linux: Fedora 9, Debian etch, OpenSUSE 11
Mac: OSX 10.4 and 10.5 for PPC and Intel 
```

编程语言

```
C++: Windows/Linux/Mac
Java: Windows/Linux/Mac
dotNet languages (VB, C#,...): Windows 
```

C++ 编译器：

```
Windows: Microsoft Visual Studio 2005
Linux: default installed g++ compiler
Mac OSX: default installed g++ compiler 
```

爪哇：

```
JDK 1.4.2 or higher (some samples require 1.5 or higher) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:34:46.503

您将遇到两个主要问题：

首先，iOS 使用与 OS X 不同的架构（ARM 与 Intel）。除非您可以访问您的 SDK 的源代码（这听起来不太可能），否则您可能无法使用它。虽然 OS X 和 iOS 库*可以*交叉兼容，但通常至少需要一些工作来解决平台不一致问题。

其次，在 iOS 上，外部硬件需要经过 Apple 的认证。好消息是，有一个专为 iOS 开发者设计的框架，用于与读卡器等配件进行交互——[外部配件框架](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/ExternalAccessoryFrameworkReference/_index.html)。如果您找到一张标有 Made for iPhone 的卡片，您可能会更幸运（看起来您发现的一些读卡器使用底座连接器，因此希望可以通过外部附件框架使用）。

如果您的读卡器*未经*Apple 官方认证，那么您几乎肯定需要运行越狱设备才能访问它。

# java - 更改切换按钮背景

> ID：13581065
> 
> 赞同：0
> 
> 时间：2012-11-27T09:27:52.227
> 
> 标签：java, android, eclipse, background, togglebutton

我想将切换按钮背景更改为我单击的图像并且它变得更暗，然后一旦我释放它就会恢复到相同的图像。我已经成功地用一个按钮做到了这一点，但我的应用程序需要一个切换按钮。我用切换按钮尝试了这个，只设法改变了切换按钮的背景图像。但是，小绿色复选框的东西仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:38:23.190

我认为将 xml drawable 用于切换按钮更符合您的要求。单击[此处](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)为您的切换按钮设置样式

# asp.net - 单点登录 WinForms 应用程序和 asp.net wep 应用程序

> ID：13581067
> 
> 赞同：2
> 
> 时间：2012-11-27T09:28:07.943
> 
> 标签：asp.net, winforms, authentication, single-sign-on, wif

我被指派寻找在我们的产品中实施 SSO 的方法。我们有几个 Winform 应用程序和一个 asp.net 4.0 Web 应用程序（不是 MVC）。

所有产品均使用 .Net 4.0 构建，Web 应用程序为 ASP.NET 4.0。一些 Winforms 通过 Web 服务 (asmx) 与我们的 API 通信，一些直接使用我们的 API。Web 应用程序也使用相同的 API。我们为外部客户端提供一组使用相同 API 的 Web 服务 (asmx)。

目前，我们的系统中有自己的身份验证实现（用户、密码、角色），我们希望将其替换为 SSO。或者这两种身份验证机制能否以某种方式共存？Winforms 用于 Intranet，Web 应用程序用于 Intranet，我们还为客户端托管 Web 应用程序（可从 Internet 访问）。

用户是在我们的系统中创建的，但同时我们使用我们自己的工具从 Active Directory 导入用户。Active Directory 是真正的主要用户来源。

我已阅读有关 Windows Identity Foundation 的信息，我想知道是否可以使用它来实现 SSO。但是我不明白的是，当他们直接使用API​​时，如何在winform应用程序中使用WIF。

我想要实现的是从我们的系统中删除所有用户管理并使用 Active Directory 作为用户源。我想这意味着使用 ADFS 2.0 创建声明等。

我可以在这个实现中使用 .Net Framework 4.5（我知道 WIF 现在是 .Net Framework 4.5 中的一等公民）。

你有什么建议如何做到这一点？WIF 是跨 winforms 应用程序和 Web 应用程序实现 SSO 的最佳替代方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T12:33:56.420

有一种方法可以从 WinForms 应用程序中获取 WIF 身份验证 cookie。

为此，您只需托管`WebBrowser`控件并将其指向您的 Web 应用程序的登录页面。假设 Web 应用程序与 ADFS2 联合，Web 浏览器控件将自动跟随流程 - 它将重定向到 ADFS 并停在那里以显示用户凭据提示（表单身份验证模式下的 ADFS2）或仅使用 NTLM/Kerberos 进行身份验证（ Windows 身份验证模式下的 ADFS2）。然后 Web 浏览器将重定向回您的应用程序。

这是您挂钩代码的地方。您只需向 Web 浏览器的导航事件添加一个处理程序，并在 ADFS2.0 对用户进行身份验证后检查它何时返回您的应用程序。然后，您可以在 WinForms 应用程序中调用该`InternetGetCookie`方法来获取您的应用程序发出的所有身份验证 cookie，然后您可以关闭托管 Web 浏览器的窗口。

此时，您已拥有 WIF (the `SessionAuthenticationModule`) 为您的应用程序发出的所有身份验证 cookie。您现在可以调用您的应用程序 Web 服务并将 cookie 注入到 http 调用中。Web 服务器将正确识别用户已通过身份验证，这意味着您所要做的就是为您的 Web 服务添加适当的授权（`PrincipalPermission`您的 Web 方法应该这样做）。

另一种方法是从您的 Web 应用程序中公开 WCF 服务并使用 WS-Federation 主动身份验证来保护它们。这种方法的缺点是（在我看来）如果您的身份提供者 (ADFS) 进一步与另一个不一定实现 WS-Trust/WS-Federation 的身份提供者联合，那么主动身份验证可能会失败（因为另一个身份提供者没有实现它），而被动场景仍然有效（一堆重定向很快就会以一个页面结束，该页面需要用户提供凭据，但连续身份提供者之间的身份验证协议流无关紧要）。

# macos - 在另一个 Mac OS 应用程序中检索和修改界面元素的值

> ID：13581069
> 
> 赞同：0
> 
> 时间：2012-11-27T09:28:13.420
> 
> 标签：macos, cocoa

在 Mac OS 上，我看到一些应用程序设法控制其他应用程序的用户界面元素，以便提供一种控制它们的新方法（例如，通过触控板）。

谁能告诉我这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:38:20.187

实现这一目标的一些明显（和*非骇人听闻的*）方法包括

*   [可访问性](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Accessibility/cocoaAXIntro/cocoaAXintro.html#//apple_ref/doc/uid/10000118-SW1)，或
*   [苹果脚本](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html)

# javascript - 测试 jquery.dimensions.js 是否安装正确

> ID：13581072
> 
> 赞同：1
> 
> 时间：2012-11-27T09:28:27.367
> 
> 标签：javascript, jquery, menu

你好，我可以得到一些关于如何测试我是否正确实现 jquery.dimensions 的提示吗？

[http://archive.plugins.jquery.com/project/dimensions](http://archive.plugins.jquery.com/project/dimensions)

有点像你测试jquery时，

```
$(document).ready(function() {
    alert('hi');
}); 
```

我正在尝试在网站上实现浮动菜单栏。怀疑我没有正确安装尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:32:25.410

您可以测试插件是否加载：

```
if(jQuery().somePluginName) {
   // plugin is loaded
 } 
```

# php - 具有多个子域的网站的程序或 OOP

> ID：13581077
> 
> 赞同：0
> 
> 时间：2012-11-27T09:28:35.587
> 
> 标签：php, forms, oop, class, subclass

## 简要说明

我不确定我用于这组网站的结构。我试图在这些网站上共享尽可能多的代码，以尽量减少重复代码并提高效率。但是，我不确定它是否是好的 OOP，因此我想听听一些关于它的其他观点以及我是否应该改变结构。

考虑这些网站：

```
www.domain.com
support.domain.com
clients.domain.com
export.domain.com
etc 
```

我首先创建了一个名为`class.domain.php`. 此类包含 Web 应用程序的所有全局方法。

然后对于每个子域，我创建了一个子类，例如`class.www.php`，`class.support.php`等等。

如果这些子域有任何大扇区，那么我会创建更多子类以减小父类的大小。

如此有效地，我最终得到了一个像这样的类的家谱：

![类关系树](../Images/015d192d66d20b1388b339457d060d24.png)

每个类都包含与该特定站点/部分相关的方法。这些方法包括以下内容：

1.  收集动态数据并返回到页面
2.  处理表格和发送电子邮件（联系方式、支持请求等）。
3.  安全令牌系统
4.  登录系统
5.  ETC

## 我的问题

我不仅想知道这种结构是否良好，我还想知道我是否应该使用 OOP 来处理诸如处理“联系”表格等事情。

如果我对每种形式都有单独的方法，这似乎有点奢侈（并且难以维护）。这些表单太独特了，无法通过一种全局方法进行管理，因此必须对每个表单使用唯一的方法来处理它们，或者为每个表单设置一个与类无关的脚本（更容易维护） .

总结一下：

1.  这种结构是一种有效且良好的 OOP 结构吗？
2.  我应该在类中使用单独的方法处理我的表单，还是应该为每个表单编写单独的脚本？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:38:22.173

对我来说似乎很好。

您可以通过为表单过程实现接口或一些抽象函数来使事情更抽象，例如

您可以编写一个 BaseForm 并且 BaseForm 的所有子项都需要实现“validate()”、“process()”。鉴于您始终可以确定您的类实现了这些方法。这样您就可以在您的操作中使用它，例如

```
$form->validate($post_data);
if($form->isValid()){
  $form->process();
} else {
  $form->handleError();
} 
```

因为您有可能编写 OOP，所以我建议您这样做，因为它也更容易维护。

在我的工作中，我仍然不得不摆弄旧项目（如 osCommerce），当我看到所有代码重复并且单个文件包含大约 3000-4000 行代码且 if 子句跨越一千行时，我可能会尖叫很难维护它。所以为了你自己：坚持 oop

# .htaccess - 将文件夹中的所有文件重写到另一个文件夹

> ID：13581079
> 
> 赞同：1
> 
> 时间：2012-11-27T09:28:43.447
> 
> 标签：.htaccess, redirect, directory

我想将所有请求的文件从文件夹-a 重定向到文件夹-b。例如[http://www.yoursite.com/folder-a/index.php](http://www.yoursite.com/folder-a/index.php)到[http://www.yoursite.com/folder-b/index.php](http://www.yoursite.com/folder-b/index.php)。

我怎样才能做到这一点？我已验证 mod_rewrite 是否适用于此代码：

```
RewriteEngine On
RewriteRule ^google.html$ http://www.google.com/ [R=301] 
```

网络空间的结构如下：

.htacces
|-文件夹-a |-
文件夹-b

但是如果我想要我的文件夹重定向

```
RewriteEngine On
RewriteRule ^/folder-a/(.*)$ http://www.yoursite.com/folder-b/$1 [L,R=301] 
```

如果我输入以下 URL，重定向将不起作用：

[http://www.yoursite.com/folder-a/](http://www.yoursite.com/folder-a/)
[http://www.yoursite.com/folder-a/index.php](http://www.yoursite.com/folder-a/index.php)

重定向不会发生。我保持在同一页面上......我做错了什么？我也用这个 htaccess 试过：

```
Options +FollowSymLinks
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^folder-a(.*)$ http://www.yoursite.com/folder-b$1 [L,R=301]

</IfModule> 
```

如果所有这些都有效，我想排除一些文件。例如。使用此 htaccess：

```
RedirectPermanent /folder-a/info.php /folder-b/new-info.php 
```

**编辑**：

现在我尝试了这个 htaccess

```
redirectMatch 301 ^/folder-a/ http://www.yoursite.com/folder-b 
```

这行得通，但我需要一些东西来获取整个路径并将其重写到新文件夹。

例如，这不起作用：

```
RewriteRule ^folder-a/(.*)$ folder-b/$1 
```

**解决方案**

我有一个旧的 htacess 文件，`folder-a`所以重定向不起作用。这是我最后的 htaccess：

```
Options +FollowSymLinks
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^folder-a/excludefile1.php http://www.yoursite.com/folder-b/newnameforfile1.php [L,R=301]
RewriteRule ^folder-a/excludefile2.php http://www.yoursite.com/folder-b/newnameforfile2.php [L,R=301]
RewriteRule ^folder-a/(.*)$ http://www.yoursite.com/folder-b/$1 [L,R=301]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:53:46.730

您可能需要设置两个规则：一个用于空文件夹，另一个用于其他文件，然后是底部的全部内容。这未经测试：

```
RewriteEngine On

RewriteRule ^folder-a/info.php http://www.yoursite.com/folder-b/new-info.php [L,R=301]
RewriteRule ^folder-a/ http://www.yoursite.com/folder-b/ [L,R=301]
RewriteRule ^folder-a/(.*)$ http://www.yoursite.com/folder-b/$1 [L,R=301] 
```

# html - 如何给列表的超链接

> ID：13581082
> 
> 赞同：0
> 
> 时间：2012-11-27T09:28:50.220
> 
> 标签：html, css

请检查这个小提琴：http: [//jsfiddle.net/cZTjd/1/](http://jsfiddle.net/cZTjd/1/)

我需要使下拉列表完全可点击。目前，只有当我们点击文本而不是同一链接的其他部分时，它才会打开链接。某些列表项可能只包含一两个字母。所以如果我们只允许点击文本是不好的。有没有办法在不改变锚标签位置和简单地编辑css的情况下解决这个问题？

```
.top-header{
    height:40px;
    background:#383838;
    padding:0 30px;
}
.top-active-link{
    height: 39px;
    background: #545454;
    padding: 12px;
}
.top-header-links-right .simple{color:#fff;}
.top-header-links-right .simple:hover{text-decoration:none;}
.top-header-links-right{
    float:right;
    position:relative;
    top:-15px;
}
.top-header-links-left{
    list-style:none;
    float:left;
    position:absolute;
    line-height:8px;
    left:-10px;
    top:-15px;
    z-index:999;
}
.top-header-links-left li a:hover{
    text-decoration:none;
}
.top-header-links-left li:hover >.top-header-links-left-drop ul{
    display:block;
}
.top-header-links-right li:hover >.top-header-links-right-drop ul{
    display:block;
}
.top-header-links-left .top-header-links-left-drop, .top-header-links-left .top-header-links-right-drop{
    z-index:99;
}
.top-header-links-left .top-header-links-left-drop ul{
    padding:0;
    z-index:99;
    display:none;
    position:absolute;
    background:#383838;
    list-style:none;
    width:200px;
    box-shadow: 0px 1px 3px #C2C2C2;
    border-radius: 0;
    top:39px;
    margin-left:-5px;
}
.top-header-links-right .top-header-links-right-drop ul{
    padding:0;
    z-index:99;
    display:none;
    position:absolute;
    background:#383838;
    list-style:none;
    width:200px;
    box-shadow: 0px 1px 3px #C2C2C2;
    border-radius: 0;
    top:39px;
    right:95px;
}

.top-header-links-left .top-header-links-left-drop ul li, .top-header-links-right .top-header-links-right-drop ul li{
    padding:0;
    height:30px;
    line-height:30px;
}
.top-header-links-left .top-header-links-left-drop li, .top-header-links-right .top-header-links-right-drop li{
    list-style:none;
    border-bottom:1px solid #4B4B4B;
    display:list-item;
    width:100%;
}
.top-header-links-left .top-header-links-left-drop li:hover, .top-header-links-right .top-header-links-right-drop li:hover{
    background:#545454;
    cursor:pointer;
}
.top-header-links-left .top-header-links-left-drop li a, .top-header-links-right .top-header-links-right-drop li a{
    position:relative;
    left:10px;
    padding:3px;
    color:#fff;
    line-height:30px;
}
.top-header-links-left .top-header-links-left-drop li:hover, .top-header-links-right .top-header-links-right-drop li:hover{
    text-decoration:none;
}
.blog-count{
    position: relative;
    height: 12px;
    width: 8px;
    border-radius: 2px;
    background: #6CB535;
    top: -5px;
    left: 3px;
    color: white;
    font-size: 11px;
    line-height: 12px;
    padding-left: 3px;
    display: inline-block;
}
.blog-count a{
    color:#fff;
    text-decoration:none;
}
.blog-count:hover{
    cursor:pointer;
    background:#549b1e;
}
.top-header-links-right ul{
    list-style:none;
    line-height:8px;
    position: relative;
    right: -20px;
}
.top-header-links-left li, .top-header-links-right li{
    float:left;
    color:#fff;
    text-transform:uppercase;
    font-size:11px;
    margin-right:20px;
    letter-spacing:1px;
    -webkit-transition: text-shadow 0.2s linear;
    -moz-transition: text-shadow 0.2s linear;
    -ms-transition: text-shadow 0.2s linear;
    -o-transition: text-shadow 0.2s linear;
    transition: text-shadow 0.2s linear;
    height:39px;
    line-height:40px;
    width:auto;
    padding:0 5px;
    cursor:pointer;
}
.top-header-links-right li{
    height:39px;
    line-height:39px;
}
.top-header-links-left a, .top-header-links-right a{
    color:#fff;
    text-decoration:none;
}
.top-header-links-left li:hover, .top-header-links-right li:hover{
    text-decoration:none;
    background:#545454;
}
.top-header-links-right li:last-child:hover{
    background:#6bb533;
}
.top-header-links-right .top-header-links-right-drop ul li:last-child:hover{
    background:#545454;
} 
```

​</p>

```
<div class="top-header">
            <ul class="top-header-links-left">
                <li><a href="#">tools</a>
                    <div class="top-header-links-left-drop">
                        <ul>
                            <li><a href="#">go.htm file</a></li>
                            <li><a href="#">simple bookmarlet</a></li>
                            <li><a href="#">sidebar</a></li>
                            <li><a href="#">import links (beta)</a></li>
                            <li><a href="#">API</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="#">blog</a>
                    <span class="blog-count"><a href="#">9</a></span>
                </li>
                <li><a href="#">settings</a></li>
                <li><a href="#">support</a></li>
            </ul>
        </div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:30:36.167

设置您的和以匹配您`width`的和，以便它填充列表项的整个区域。`height``a``width``height``li`

然后整个区域将被链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:35:26.780

A 必须是块元素才能设置高度/宽度。下面的代码应该做你想做的事。

```
li a {
    display: inline-block;
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:33:13.603

尝试这样的事情：

```
li a {
    width: 100%;
    height: 100%;
    float: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:54:03.260

从`top:-15px`_`.top-header-links-left`

**[演示](http://jsfiddle.net/cZTjd/5/)**

# ajax - 计时问题：计数被结果覆盖

> ID：13581091
> 
> 赞同：1
> 
> 时间：2012-11-27T09:29:39.927
> 
> 标签：ajax, datasource, kendo-ui

我对这个问题几乎视而不见：我正在使用 KendoUI 的数据源和一些过滤器来进行一种 ajax 搜索：[http](http://www.high-quality.nl/kandidaten/vacatures/) ://www.high-quality.nl/kandidaten/vacatures/ 。发生的事情是我的函数没有按正确的顺序执行。我的 dataSource 和 kendoObservable 如下所示：

```
var jobTemplate = kendo.template($('#job-stub').html());
var jobCount = new kendo.data.ObservableObject({
    count: 20
});

jobCount.bind('change', function(){
    if(this.count == 0){
        $('#result-wrapper').prepend('<h2>Er zijn geen vacatures gevonden.</h2>');
    } else if(this.count == 1){
        $('#result-wrapper').prepend('<h2>Er is <span class="blue">'+this.count+'</span> vacature gevonden.</h2>');
    } else {
        $('#result-wrapper').prepend('<h2>Er zijn <span class="blue">'+this.count+'</span> vacatures gevonden.</h2>');
    }
});

var jobData = new kendo.data.DataSource({
    transport: {
        read: {
            url: '/jobs/json/search',
            dataType: 'json',
            data: {
                job_matching_function: function(){
                    return $('#job_matching_function').val();
                },
                job_matching_type: function(){
                    return $('#job_matching_type').val();
                },
                job_matching_hours: function(){
                    return $('#job_matching_hours').val();
                },
                job_matching_education: function(){
                    return $('#job_matching_education').val();
                }
            }
        }
    },
    schema: {
        data: 'results'
    },
    change: function(){
        $('#result-wrapper').html(kendo.render(jobTemplate, this.view()));
        jobCount.set('count', this.view().length);
    }
}); 
```

当点击其中一个过滤器时，我运行`jobData.read();`. 时不时地，结果计数不会出现。有谁知道为什么？

谢谢，

*   史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:51:03.113

史蒂文，我从未尝试过在读取中使用 4 个匿名方法，不确定它的行为方式 - 尝试进行一次读取调用，一次返回。然后您可以使用完整事件，如本文所示[。](https://stackoverflow.com/questions/13569676/using-a-kendogrid-how-to-pop-up-a-successfully-saved-message-when-doing-a-batc)

# iphone - 如何在 info.pliost 中动态传递 Facebook 应用 ID？

> ID：13581093
> 
> 赞同：1
> 
> 时间：2012-11-27T09:29:41.653
> 
> 标签：iphone, objective-c, ios, facebook-apps, info.plist

我正在制作一个应用程序，用户管理员可以根据他的要求更改 Facebook 应用程序 ID。现在我从网络服务接收这个应用程序 ID。我想在 FacebookAppID 键的 info.plist 中传递这个应用程序 ID。那你能建议怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:34:41.540

您不能在运行时更改应用程序捆绑项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:48:03.073

我们无法更改应用程序包中的任何内容。我们用它来一次存储值。

# python - 结合 field__contains 和 field__in

> ID：13581099
> 
> 赞同：0
> 
> 时间：2012-11-27T09:30:21.923
> 
> 标签：python, django-models

> **可能重复：**
> [加入 __contains 和 __in 的最简单方法是什么？](https://stackoverflow.com/questions/1732680/what-is-simplest-way-join-contains-and-in)

所以本质上我想创建一个搜索机制，其中输入是一个空格分隔的字符串，例如：

```
terms = "these are some search terms" 
```

...它可以有可变数量的术语，并最终得到一个模型查询过滤器，例如：

```
Term.objects.filter(Q(term__contains='these') | Q(term__contains='are') | Q(term__contains='some') | Q(term__contains='search') | Q(term__contains='terms')) 
```

当然，如果有更好的方法来做到这一点，那么我很灵活:) 但是我不太清楚如何构造过滤器参数。

谢谢

**在这里找到解决方案**：[https ://stackoverflow.com/a/1751385/698289](https://stackoverflow.com/a/1751385/698289)

# cordova - 带有条形码扫描仪的 Phonegap 问题与屏幕旋转

> ID：13581104
> 
> 赞同：3
> 
> 时间：2012-11-27T09:30:39.143
> 
> 标签：cordova, barcode, barcode-scanner, screen-rotation

我正在使用 PhoneGap 2.2.0 和条形码插件[https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner（2.0.0](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)版）

这是 index.html：

```
<!DOCTYPE HTML>
    <html>
    <head>
    <title>Cordova</title>
    <link rel="stylesheet" type="text/css" href="kkstyle.css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
<script type="text/javascript" charset="utf-8" src="barcodescanner.js"></script>

<script type="text/javascript" charset="utf-8">
    document.addEventListener("deviceready", onDeviceReady, onDeviceReadyFailed);

    function onDeviceReady() {

    }

    function onDeviceReadyFailed() {
        alert("device not ready");
    }

    function scanIt() {

        window.plugins.barcodeScanner.scan(function(result) {
            alert("We got a barcode\n" + "Result: " + result.text + "\n"
                    + "Format: " + result.format + "\n" + "Cancelled: "
                    + result.cancelled);
            navigator.app.loadUrl("http://m.kelkoo.com/fr/search/"
                    + result.text);
            //http://m.kelkoo.com/fr/search/9782092610954
            //window.location.href = "http://www.kelkoo.fr/ss-"+ result.text +".html";
        }, function(error) {
            alert("Scanning failed: " + error);
        });

    }
</script>

</head>
<body>
    <div data-role="page">
        <br><br><br>
        <div id="camera">
            <button class="camera-control" onclick="scanIt();">Scan</button>
            <div style="text-align: center; margin: 20px;">
                <img id="cameraPic" src="" style="width: auto; height: 120px;"></img>
            </div>
        </div>
    </div>
</body>
</html> 
```

当我在我的手机（4.1.1 下的 Galaxy S3）上以横向模式启动此代码时，一切正常。当我以纵向模式启动此代码时，扫描栏结果永远不会返回，也不会出现错误消息。它只是回到 index.html，如果我重新启动扫描（横向）它可以工作。

所以我猜手机旋转和phonegap条形码插件存在错误。有人有解决方案吗？

# python - 在 Python 中使用 gdata 和 Unicode Cyrillic 时遇到问题

> ID：13581105
> 
> 赞同：0
> 
> 时间：2012-11-27T09:30:40.093
> 
> 标签：python, unicode, youtube, gdata

我有这个代码

```
# -*- coding: utf8 -*-
__author__ = 'user'
import gdata.youtube.service
yt_service = gdata.youtube.service.YouTubeService()
query = gdata.youtube.service.YouTubeVideoQuery()
query.vq = u"не"
feed = yt_service.YouTubeQuery(query)

for yt_item in feed.entry:
    print yt_item.GetSwfUrl() 
```

我收到了这个错误：

> 回溯（最后一次调用）：
> 文件“cyr_search.py​​”，第 7 行，在
> feed = yt_service.YouTubeQuery(query)
> 文件“/Users/user/Documents/GrabaHeroku/graba_h_ve/lib/python2.7/site-packages/ gdata/youtube/service.py”，第 1346 行，在 YouTubeQuery
> 结果 = self.Query(query.ToUri())
> 文件“/Users/user/Documents/GrabaHeroku/graba_h_ve/lib/python2.7/site-packages/gdata /service.py”，第 1715 行，在 ToUri
> 返回 atom.service.BuildUri(q_feed, self)
> 文件“/Users/user/Documents/GrabaHeroku/graba_h_ve/lib/python2.7/site-packages/atom/service.py "，第 584 行，在 BuildUri
> parameter_list = DictionaryToParamList(url_params, escape_params)
> 文件“/Users/user/Documents/GrabaHeroku/graba_h_ve/lib/python2.7/site-packages/atom/service.py”，第 551 行，DictionaryToParamList
> 中的参数，值在（url_parameters 或 {}）.items() ]
> 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib.py”，第 1275 行，在 quote_plus
> 返回引号（s，安全）
> 文件“/Library/Frameworks/Python.framework/ Versions/2.7/lib/python2.7/urllib.py"，第 1268 行，引用
> 返回 ''.join(map(quoter, s))
> KeyError: u'\u043d'

如何搜索非 ASCII。我需要对查询进行 url 编码吗？我以为图书馆会自己做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:39:01.743

改成：

```
query.vq = u"не".encode('utf8') 
```

字符串在发送之前需要进行编码。

# php - 如何配置 Apache 让 PHP 处理 OPTIONS HTTP 请求？

> ID：13581106
> 
> 赞同：7
> 
> 时间：2012-11-27T09:30:38.723
> 
> 标签：php, apache, http, configuration

为了为 CORS（跨域请求）设置适当的测试套件，我需要能够直接从脚本处理 HTTP OPTIONS 方法。因此，我有一个简单的 PHP 脚本来检测 OPTIONS 方法，并通过输出一些特定的标题做出相应的反应。

PHP端不是问题。如果我使用 curl 发出 GET/POST/HEAD/PUT/等。请求他们都去脚本，它显然可以很好地处理它们。但是，如果我发出 OPTIONS 请求，它永远不会到达脚本：Apache 会立即回复并列出它认为适合该资源的一组方法。我可以说脚本没有运行（没有日志记录，它的输出都没有进入响应，等等）。

我一直在检查 Apache 配置，确保没有适用的 .htaccess 妨碍我，我已经调整了很多东西，例如 Limit/LimitExcept 指令，但我无法让它改变它的行为。我还尝试从我年轻时找到一种可能对这里有所帮助的技术的信息：NPH（非解析的标头）脚本；但显然现在已经消失了（至少，我找不到任何关于它的最新信息）。

所以问题是：如何调整 Apache 的配置，以便让我的脚本处理 OPTIONS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:23:45.787

我刚刚测试了我自己的 PHP（5.3，Apache 2.2），它仍然可以工作（因为它已经有一段时间了）。OPTIONS 被发送，并出现在 $_SERVER 数组中，如您所料

目标应该是将设置恢复为默认设置（应该可以），然后使用您需要的其他选项建立您的 conf 备份。

否则，如果没有看到 .conf 文件，我们就会失明——所以这里有一些东西需要寻找。

1.  限制指令。你说你在那里检查过，但只是为了调试，删除所有引用。可以单独更改虚拟主机和目录中的任何内容。
2.  与 LimitExcept 相同（您说您尝试过 - 只需将它们全部删除）
3.  检查 .conf 和 .htaccess 是否有任何重定向或其他基于`RequestHeader`或的条件`REQUESTHEADER`（进行搜索和分析）
4.  [我刚刚也读过一些关于检查的东西，`THE_REQUEST`但以前从未听说过。也值得检查？]
5.  最后，检查您没有为 OPTIONS 指定特定的处理程序，即`Script OPTIONS /cgi-bin/optionshandler`您的 PHP 处理程序同样被指定为仅处理 GET 和 POST。再次记住 vhosts 和目录和 .htaccess 可以单独更改，因此请检查它们。

这就是我能想到的。否则，正如我建议的那样，从头开始（它有效）并构建其他所有内容，直到它不起作用。

# c# - 如何在php中解密.net加密字符串

> ID：13581122
> 
> 赞同：0
> 
> 时间：2012-11-27T09:31:31.060
> 
> 标签：c#, php, asp.net

我在 c# 中加密一个字符串并将其发送到这样的 php 页面。

```
sfplr.Attributes.Add("href", "http://sml.com.pk/a/sfpl/reports.php?id=" + Convert.ToBase64String(Encoding.Unicode.GetBytes(emailid))); 
```

并且从此代码生成的网址是这样的

```
http://sml.com.pk/a/sfpl/reports.php?id=bQBhAGwAaQBrAC4AYQBkAGUAZQBsAEAAcwBoAGEAawBhAHIAZwBhAG4AagAuAGMAbwBtAC4AcABrAA== 
```

现在我想在 php 中再次解密这个`bQBhAGwAaQBrAC4AYQBkAGUAZQBsAEAAcwBoAGEAawBhAHIAZwBhAG4AagAuAGMAbwBtAC4AcABrAA==`o 显示在 php 页面中。请任何人帮我这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:32:42.167

尝试使用 `base64_decode`函数

参考[http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

在您的情况下，它将是：

```
<?php    
    echo base64_decode($_GET['id']);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:36:15.313

```
$email =  base64_decode("bQBhAGwAaQBrAC4AYQBkAGUAZQBsAEAAcwBoAGEAawBhAHIAZwBhAG4AagAuAGMAbwBtAC4AcABrAA==");
echo $email;  //****** You will get email here... */ 
```

请参阅[.Net 中的“convert.tobase64string”是否等于 PHP 中的“base64_encode”？](https://stackoverflow.com/questions/3116805/is-convert-tobase64string-in-net-equal-to-base64-encode-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:46:02.807

使用该`base64_decode`函数将返回您最初传递给`convert.toBase64String`.

之后，您必须通过以下方式检索它们：

```
<?php $emailBytes = base64_decode($_GET['id']); ?> 
```

如果已正确序列化，这将返回您使用 Convert.toBase64String 在 C# 中创建的数组，请参阅[Encoding.getBytes](http://msdn.microsoft.com/en-us/library/aa904341%28v=vs.71%29.aspx)。

意思是，如果数组按照您的预期传递（我对此表示怀疑）

```
$msg = "";
foreach ($emailBytes as $character) {
    $msg .= (char) $character;
} 
```

我怀疑您甚至需要 Encoding.getBytes ，您可以将字符串作为参数传递。

在 C# 中使用

```
Convert.ToBase64String(emailid); 
```

然后您在 php 中所要做的就是按照我第一次提到的方式进行检索，这将为您提供原始传递的字符串。

此外，正如多次指出的那样，这是您正在执行的加密，它只是确保它可以以不发生冲突的方式在 URL 中传递。

如果您确实想加密，请使用 C# 端的库，对消息进行编码，然后对其进行 base64 编码。然后在 PHP 方面你必须做相反的事情。

# android - 安卓万事达卡支付通集成

> ID：13581128
> 
> 赞同：0
> 
> 时间：2012-11-27T09:31:40.303
> 
> 标签：android

我需要开发一个 android 应用程序，通过移动应用程序促进信用卡支付，我没有任何起点，他们也没有任何文档来找到更接近的解决方案。谁能告诉我如何将万事达卡paypass java sdk集成到android应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T07:58:33.903

现在不可能！因为它的 api 可用于 java，但在 android 中不受支持，请参阅此链接 [https://developer.mastercard.com/portal/display/forums/How+do+i+integrate+ paypass+在线+with+android+应用程序](https://developer.mastercard.com/portal/display/forums/How+do+i+integrate+paypass+online+with+android+application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T16:51:46.660

您应该尝试使用 Remote Secure Element API，这将使您无需使用卡信息对 SIM 卡进行个性化即可进行 NFC 支付。

# cuda - 在 CUDA 中读取 nvprof 的输出

> ID：13581129
> 
> 赞同：5
> 
> 时间：2012-11-27T09:31:43.840
> 
> 标签：cuda, profiler

我正在使用 nvprof 运行我的程序，以使用以下命令获取配置文件信息：

```
nvprof -o profileOutput -s ./exe args 
```

我想要关于扭曲发散、合并读/写、占用等的信息。但是当我打开文件 profileOutput 时，它完全是其他格式，并且有奇怪的符号，如 @^@^.....

我在 vim 中打开文件。查看 CUDA 程序的配置文件信息的正确方法是什么。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-31T20:05:29.497

您不需要`-s`，因为它本身就是默认情况。

`-o`指定可以稍后导入或由 Nvidia 视觉分析器打开的输出文件，该文件不是人类可读的。

如果您需要计算占用率，您可以使用Nvidia 提供的这个[占用率计算器。](http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls)有[一篇](https://devtalk.nvidia.com/default/topic/368105/cuda-occupancy-calculator-helps-pick-optimal-thread-block-size/)关于它的文章。

如果您需要跟踪分支，您可以在跟踪模式和跟踪分支中使用分析。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-04T09:53:40.547

您可以在 Nvidia Visual Profiler（通常包含在 CUDA SDK 中）中打开您的输出文件。

还有一种生成人类可读文件的可能性：您可以指定`--log-file human-readable-output.log`选项`nvprof`（当然`human-readable-output.log`是您的输出文件名）。您可以为日志输出
启用其他一些选项：`nvprof`

*   `--print-gpu-trace`用于 GPU 跟踪；
*   `--events`用于收集事件（例如分支、启动的经线数量等）；
*   `--metrics`对于一些自定义指标（如共享负载事务、DRAM 利用率等 - 您可以通过`nvprof --query-metrics`在命令行中输入查看的完整指标列表）。

您可以在[NVIDIA nvprof 文档](http://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview "NVIDIA nvprof 编码")中找到完整的选项列表。

# javascript - 如何从数组中获取下一个 N 元素？

> ID：13581132
> 
> 赞同：1
> 
> 时间：2012-11-27T09:31:54.437
> 
> 标签：javascript

需要一个从给定数组中返回下一个 N 个元素的函数，具有给定的偏移量，但是当偏移量大于数组长度时，它必须返回数组开头的元素。

**界面：**
`slice2(array, chunk, offset);`

**例子：**

`var array = [1,2,3,4,5];`
`slice2(array,2,2)`输出：[3,4]
`slice2(array,2,4)`输出：[5,1]
`slice2(array,3,4)`输出：[5,1,2]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:41:27.830

```
function slice2(array, chunk, offset) {
    var subarray = [];
    for (var i = 0; i<chunk; i++) {
        var ind = (offset + i) % array.length;
        subarray.push(array[ind]);
    }

    return subarray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:39:42.547

内置的 .slice() 方法可能足以解决您的问题：

```
var slice = array.slice(1,3); 
```

我设置了一个快速的jsfiddle，界面需要更改，因为它只允许比赛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:45:09.623

对不起，我忍不住：）

以下函数处理更多场景，并且仅使用 2 个切片来执行此操作。

```
// standard
slice2( [1,2,3,4,5], 3, 3 ); // [1, 4, 5]
// specify chunk as a negative number
slice2( [1,2,3,4,5], -3, 3 ); // [1, 2, 3]
// what if chunk is larger than array
slice2( [1,2,3,4,5], -7, 3 ); // [1, 2, 3, 4, 5]
// what if chunk is 0
slice2( [1,2,3,4,5], 0, 3 ); // []

function slice2( array, chunk, offset ) {

    var start1, len = array.length, end1, start2, end2, result;

    if( !chunk || !array ) return []; // if chunk or array resolve to falsy value.
    if( Math.abs(chunk) >= len ) return array;

    if( chunk < 0 ) {

        end1 = offset;
        leftover = offset + chunk;
        start1 = leftover < 0 ? 0 : leftover;
        start2 = leftover;
        end2 = len;

    } else {

        start1 = offset;
        leftover = ( offset + chunk ) - len;
        end1 = leftover > 0 ? ( offset + chunk ) : len;
        start2 = 0;
        end2 = leftover;
    }

    result = array.slice( start1, end1 );
    if( leftover ) result = array.slice( start2, end2  ).concat( result );

    return result;
} 
```

[**在这里**](http://jsfiddle.net/bruno/6HvBh/3/)提琴[](http://jsfiddle.net/bruno/6HvBh/3/)

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:45:44.897

试试这个：

```
function slice2(array, chunk, offset){
    var end = offset + chunk,
        out = array.slice(offset, end);  // Get the chunk
    if(array.length < end){              // If the chunk should wrap
        out = out.concat(array.slice(0, end - array.length)); // Concatenate a the rest of the chunk, from the start of the array, to the output.
    }
    return out;
} 
```

它不会手动循环遍历数组，并且使用最少的计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:25:10.110

private static List sliceArray(List mainarray, int chunk, int offset) {

```
 int size = mainarray.size();
    List<Integer> resultArray = new ArrayList<Integer>();

    if(!mainarray.contains(chunk)){
        return null;
    }

    int index = mainarray.indexOf(chunk);
    int doOffset = size - index;

    if(doOffset > offset){

        for(int element = 1 ; element <= offset; element++ ){
            resultArray.add(mainarray.get(index+1));
            index++;
        }

    }else if(doOffset == 0){
        for(int element = 0 ; element <= offset; element++ ){
            element = mainarray.get(element);
            resultArray.add(element);
        }

    }else{
        int position =0;
        for(int element = index ; element <= offset; element++ ){
            int value = 0;
            if(element < size-1){
                value = mainarray.get(element+1);
            }
            else
            {
                value = mainarray.get(position);
                position ++;
            }
            resultArray.add(value);
        }
    }

    return resultArray;
    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-27T13:45:20.317

这是我所做的一个片段。感谢@Andrei 我刚刚修改了他的代码。所以我想要的是一个函数来获取数组中的选定数字以及该数字之前的 x 个数字和该数字之后的 x 个数字。例如，[1,2,3,4,5,6,7,8] 如果我选择 2 作为我的偏移量和块作为 3，输出将是：[ 8, 1 , 2, 3, 4, 5, 6 ]如果 offset = 3，chunk = 3，op: [ 1, 2, 3, 4, 5, 6, 7]

```
function cyclicSlice(array, chunk, offset) {
var subarray = [];
for (var i = array.length; i>=(array.length-chunk); i--) {
    var ind = (offset + i) % array.length;
    subarray.push(array[ind]);
}
subarray = subarray.reverse();
const newOffset = offset + 1; // To avoid the repititon of the selected number
for (var i = 0; i<chunk; i++) {
    var ind = ( newOffset + i) % array.length;
    subarray.push(array[ind]);
}

return subarray; 
```

}**

# php - 使用 PHP 获取 reverbnation.com 粉丝数

> ID：13581134
> 
> 赞同：0
> 
> 时间：2012-11-27T09:31:56.633
> 
> 标签：php

有没有办法让指定用户从 reverbnation [dot] com 获得粉丝数？我需要使用 PHP 获取指定用户的总粉丝数。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:35:24.737

您可以尝试使用来自[https://github.com/j3k0/ReverbNation-Unofficial-API的非官方 API](https://github.com/j3k0/ReverbNation-Unofficial-API)

# c++ - 原始 pcm 音频文件到 Windows Qt 项目中的 ogg

> ID：13581136
> 
> 赞同：1
> 
> 时间：2012-11-27T09:32:08.397
> 
> 标签：c++, qt, audio, encoding, ogg

今天我需要你的帮助，因为我正试图为我的项目进入一个新的编程领域：音频编码。

我目前正在开发一个仅限 Windows 的 Qt C++ 项目（使用 msvc 编译器）。我现在能做的就是将麦克风中的音频文件录制为原始 .pcm 文件。

我需要做的是：直接将麦克风录制到 .ogg 音频文件，或者只是将我可以创建的文件转换为 ogg 文件。

我所做的是阅读有关录音的 Qt 文档，并尝试理解 vorbis/ogg 文档。我找不到任何用于 vorbis/ogg 的原始 pcm 到 ogg 代码示例，但也许你们知道我在哪里可以找到这样的代码。

我需要知道的是，我想要实现的目标是否可行，如果可以，如果您能指出有助于我实现目标的东西，我将不胜感激。

基本上，我很高兴，因为我可以得到我想要的 pcm 格式的音频文件，但现在我需要将这些文件编码为 .ogg 文件。我想知道是否可以使用 ogg/vorbis，如果可以，我应该遵循哪些步骤以及应该阅读哪些内容以了解我在做什么。

感谢任何花时间阅读我的问题的人，祝你有美好的一天，

埃亚尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:58:32.237

libvorbis 源代码分发中有一个“示例”目录。你应该看看encoder_example.c。

# android - 删除选定行后的 ListView 动画行

> ID：13581142
> 
> 赞同：5
> 
> 时间：2012-11-27T09:32:14.293
> 
> 标签：android, listview, animation

我已经阅读了很多关于行动画的教程，但它们都描述了如何为选定的行设置动画。我设法做到了。但是有一个问题。当使用动画删除行时，我从适配器中删除数据并调用 notifyDataSetChanged(); 行（在删除的行下方）在没有动画的情况下上升。如何实现这些行的动画？我希望他们顺利滑上去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:23:05.530

删除项目单击时的列表项，希望此代码对您有所帮助

```
 listview.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                    final int position, long id) {
                // TODO Auto-generated method stub
                Animation anim = AnimationUtils.loadAnimation(view.getContext(),
                        android.R.anim.slide_out_right);
                anim.setDuration(500);
                view.startAnimation(anim);

                new Handler().postDelayed(new Runnable() {

                    public void run() {

                        strings.remove(position);
                        mAdapter.notifyDataSetChanged();

                    }

                }, anim.getDuration());

            }
            }); 
```

**更新**

请记住在调用 notifydatasetChanged() 时工作​​的架构框架。

1.  调用 getView 方法
2.  在调用 get view 时，它将重建列表视图的所有行。

在您的情况下，我们必须为 getView 方法设置动画（将在 notifydatasetchanged 的​​操作上再次调用该方法）。这是解决方案：

```
/**
       * Hear strings is the data set
       */
      @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            final String str = this.strings.get(position);
            final Holder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(
                        android.R.layout.simple_list_item_1, null);
                convertView.setBackgroundColor(0xFF202020);

                holder = new Holder();
                holder.textview = (TextView) convertView
                        .findViewById(android.R.id.text1);
                holder.textview.setTextColor(0xFFFFFFFF);

                convertView.setTag(holder);
            } else {
                holder = (Holder) convertView.getTag();
            }

            holder.textview.setText(str);

            Animation animation = null;
            animation = new ScaleAnimation((float) 1.0, (float) 1.0, (float) 0,
                    (float) 1.0);

            animation.setDuration(750);
            convertView.startAnimation(animation);
            animation = null;

            return convertView;
        } 
```

请检查它是否有效，并让我知道它是否对您有用/有帮助。

# facebook - Facebook Graph API - 图片上传的自动登录

> ID：13581154
> 
> 赞同：0
> 
> 时间：2012-11-27T09:32:46.853
> 
> 标签：facebook, image, facebook-graph-api, image-uploading

这是问题所在：

我们有一个离线工作的系统，无需互联网访问。但是，它应该为用户提供功能，以便他们可以在系统上线时选择他们想上传到 Facebook 的照片。

我们可以从用户那里收集 Facebook 用户名和密码。但 Facebook 需要访问令牌，这是由其网站上的登录对话框提供的。此外，用户必须向 Facebook 上的应用程序授予权限。

是否有可能以某种方式自动化这些事情，以便系统可以使用用户名和密码上传用户选择的照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:43:33.293

我不能肯定地说，但我想不会。
我很确定这样做是为了防止在未经您许可的情况下发布任何内容。

它可以防止恶意程序发布虚假状态更新或在您的个人资料上发布不适当的图片等。
显然这不是您想要做的，但不幸的是，它们都陷入了同一个网络中。

我猜你能做的最好的事情就是存储请求并在下次他们能够登录到 facebook 时重新询问用户是否仍然可以发布更新，并获得他们的明确许可。

# android - action_bar_embed_tabs 在 Android 中究竟是如何工作的？

> ID：13581155
> 
> 赞同：4
> 
> 时间：2012-11-27T09:32:51.073
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

我在操作栏中有标签。在大屏幕上，选项卡嵌入到操作栏，但在小屏幕上则不是。我想控制选项卡手册，以便我可以将选项卡与操作栏分开。我试图设置 abs__action_bar_embed_tabs 但这没有用

```
<resources>
    <bool name="abs__action_bar_embed_tabs">false</bool>
</resources> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-20T09:15:02.727

我知道这是一篇旧文章，但是我想`action_bar_embed_tabs`为未来的读者添加一个解决方案。

创建以下方法（请注意导入），

```
public static void setHasEmbeddedTabs(Object inActionBar, final boolean inHasEmbeddedTabs)
{
    // get the ActionBar class
    Class<?> actionBarClass = inActionBar.getClass();

    // if it is a Jelly Bean implementation (ActionBarImplJB), get the super class (ActionBarImplICS)
    if ("android.support.v7.app.ActionBarImplJB".equals(actionBarClass.getName()))
    {
            actionBarClass = actionBarClass.getSuperclass();
    }

    try
    {
            // try to get the mActionBar field, because the current ActionBar is probably just a wrapper Class
            // if this fails, no worries, this will be an instance of the native ActionBar class or from the ActionBarImplBase class
            final Field actionBarField = actionBarClass.getDeclaredField("mActionBar");
            actionBarField.setAccessible(true);
            inActionBar = actionBarField.get(inActionBar);
            actionBarClass = inActionBar.getClass();
    }
    catch (IllegalAccessException e) {}
    catch (IllegalArgumentException e) {}
    catch (NoSuchFieldException e) {}

    try
    {
            // now call the method setHasEmbeddedTabs, this will put the tabs inside the ActionBar
            // if this fails, you're on you own <img src="http://www.blogc.at/wp-includes/images/smilies/icon_wink.gif" alt=";-)" class="wp-smiley">
            final Method method = actionBarClass.getDeclaredMethod("setHasEmbeddedTabs", new Class[] { Boolean.TYPE });
            method.setAccessible(true);
            method.invoke(inActionBar, new Object[]{ inHasEmbeddedTabs });
    }
    catch (NoSuchMethodException e)        {}
    catch (InvocationTargetException e) {}
    catch (IllegalAccessException e) {}
    catch (IllegalArgumentException e) {}
} 
```

然后像下面这样调用它，

1.  如果您希望选项卡出现在操作栏内，

    `setHasEmbeddedTabs(actionBar, true);`

2.  如果您希望标签在操作栏下方单独显示/显示，

    `setHasEmbeddedTabs(actionBar, false);`

[克里夫的](http://www.blogc.at/2014/01/23/android-tabs-appear-above-or-below-actionbar/#comment-32)所有学分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T12:12:19.397

我找到了一个解决方案来分隔代码中的选项卡。

```
private void embeddedTabs(Object actionBar, Boolean embed_tabs) {
    try {
        if (actionBar instanceof ActionBarWrapper) {
            // ICS and forward
            try {
                Field actionBarField = actionBar.getClass()
                        .getDeclaredField("mActionBar");
                actionBarField.setAccessible(true);
                actionBar = actionBarField.get(actionBar);
            } catch (Exception e) {
                Log.e("", "Error enabling embedded tabs", e);
            }
        }
        Method setHasEmbeddedTabsMethod = actionBar.getClass()
                .getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(actionBar, embed_tabs);
    } catch (Exception e) {
        Log.e("", "Error marking actionbar embedded", e);
    }
} 
```

但现在我有一个新问题。选项卡不会完全填满选项卡栏。 [操作栏选项卡不填满选项卡栏](https://stackoverflow.com/questions/13583885/actionbar-tabs-dont-fill-the-tabbar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:29:18.047

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T16:44:18.110

在这个文件中：ActionBarImpl.java

上`private void setHasEmbeddedTabs(boolean hasEmbeddedTabs)`

更改值：
`mHasEmbeddedTabs = hasEmbeddedTabs;`

至：
`mHasEmbeddedTabs = false;`

# javascript - 带有自定义标头的 AJAX 文件下载

> ID：13581157
> 
> 赞同：17
> 
> 时间：2012-11-27T09:33:00.923
> 
> 标签：javascript, jquery, asp.net, ajax, download

我想向提供文件下载对话框的 URL 发送请求。同时服务器需要请求头中的某些参数。我想在请求中插入一个自定义标头并获取一个文件作为响应。我们有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-13T06:56:32.397

尝试使用设置为请求标头的`a`元素，并将选项设置为元素对象。`data-*``$.ajax()``headers``a``data-headers`

在`$.ajax()` `success`将`a`元素设置`href`为响应`Blob`内`objectURL`、`download`属性`file.name`或临时文件名时，调用元素`.click()`以`a`激活“保存文件”对话框。

```
$(document).ready(function() {
  $("input[type=button]").click(function() {
    // set `data-headers` object
    var el = $("[data-headers]");
    el.data("headers")["x-custom-headers"] = $("input[type=text]")[0].value 
      || el.data("headers")["x-custom-headers"];
    $.ajax({
      url: URL.createObjectURL(new Blob([$("textarea").val()], {
        type: "text/plain"
      })),
      type: "GET",
      // set `headers` to `a` element `data-headers` object
      headers: $("[data-headers]").data("headers"),
      beforeSend: function(jqxhr) {
        console.log(this.headers);
        alert("custom headers" + JSON.stringify(this.headers));
      },
      success: function(data, textStatus, jqxhr) {
        var file = new Blob([data], {
          "type": jqxhr.getResponseHeader("Content-Type")
        });
        console.log(data, file);
        $("textarea, input[type=text]").val("");
        $("a")
          .attr({
            "href": URL.createObjectURL(file),
            "download": file.name || "file-" + $.now()
          }).on("click", function() {
            $(this).remove()
          })
          .get(0).click();
      },
      error: function(jqxhr, textStatus, errorThrown) {
        console.log(textStatus, errorThrown)
      }
    });
  })
})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js">
</script>
<textarea maxlength="5" placeholder="echo"></textarea>
<br>
<!-- set `x-custom-header` to `input type="text"` value -->
<input type="text" maxlength="5" placeholder="set request header" />
<br />
<input type="button" value="download" />
<!-- set default `x-custom-header` to "123" -->
<a data-headers='{"x-custom-headers":"123"}'></a>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-17T21:34:00.093

据我了解，您想从网络请求一个需要身份验证标头但无法通过简单链接下载的文件。

然后您需要做的是使用身份验证标头进行 ajax 调用，以将数据下载为 blob。然后从客户端保存数据

* * *

jQuery 的 ajax/get 方法不支持 responseType = blob

所以这个例子是在 Blink 和 Firefox 中使用最新的[Fetch API 。](https://developer.mozilla.org/en/docs/Web/API/Fetch_API)它还使用[FileSaver.js](https://github.com/eligrey/FileSaver.js)来保存客户端生成的 blob，而不是处理跨浏览器问题。

```
fetch("/", {headers: {"X-mashape-key": "XXXXXX-4-YYYYYY"}})
    .then( response => {
        // we can get the filename if the
        // response headers contains Content-Disposition
        var cd = response.headers.get("Content-Disposition");
        var name = cd && cd.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/)[1];

        response.blob().then( 
            blob => window.saveAs(blob, name || "index.html")
        )
    }) 
```

它还使用了一些在 es6 中可用的新 suger 语法，可以使用 babel 或 traceur 转换为 es5

如果您不包含[fetch polyfill](https://github.com/github/fetch)并且需要支持旧版浏览器 - 那么您需要使用 XHR 以旧方式进行

```
var xhr = new XMLHttpRequest();
xhr.responseType = 'blob';
xhr.open("get", "/");
xhr.setRequestHeader("X-mashape-key", "XXXXXX-4-YYYYYY");
xhr.send();
xhr.onload = function(){
    var cd = xhr.getResponseHeader("Content-Disposition")
    var name = cd && cd.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/)[1];

    window.saveAs(xhr.response, name || "index.html")
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T10:13:53.580

也许我不明白你的意思。

我的想法是这样的：

```
//server xxx.php
//omit some code
echo '<a href="file_path" id="download">file_name</a>';

//browser
ajax({
    url: 'http://xxxx/xxx.php',
    success: function(html){
        //append to dom and TODO other manipulations
        $(dom).append(html);
        $('#download').trigger('click');
        $(dom).remove(html);
    }
}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T13:16:08.580

好的，我签入了一个旧应用程序，这是一个示例。你需要适应，但想法就在这里。第一部分是请求拦截器属性的一部分，该属性位于`WebMethod`. 整个拦截器非常复杂，因为它管理多种情况。

```
int byteSize = 262144;
byte[] data = new byte[byteSize];

if (!String.IsNullOrEmpty(myfileName))
{
    _context.Response.AddHeader("Content-disposition", "attachment; filename=\"" + myfileName+ "\"");
}

_context.Response.ContentType = DefaultContentType;
_context.Response.Cache.SetCacheability(HttpCacheability.Private);
_context.Response.Cache.SetExpires(DateTime.UtcNow.AddHours(1));
_context.Response.Buffer = false;
_context.Response.BufferOutput = false;
_context.Response.AddHeader("Content-length", myStreamSize.ToString());

try
{
    int counter = 0;
    int bytesRead = mystream.Read(data, 0, byteSize);
    while ((long)counter < myStreamSize|| bytesRead > 0)
    {
        counter += bytesRead;
        if (bytesRead < byteSize)
        {
            byte[] outBuf = new byte[bytesRead];
            Array.Copy(data, outBuf, bytesRead);
            _context.Response.BinaryWrite(outBuf);
        }
        else
        {
            _context.Response.BinaryWrite(data);
        }
        bytesRead = mystream.Read(data, 0, byteSize);
    }
}
finally
{
    mystream.Close();
    mystream.Dispose();
}
_context.Response.End(); 
```

这是客户端 Javascript 的第二部分。我们使用 ExtJS 而不是 jQuery。

```
downloadFile: function(url, getArgs) {
    if( !this.iframe )
    {
        this.iframe = document.createElement("iframe");
        this.iframe.className = "x-hidden";
        document.body.appendChild(this.iframe);
    }

    var args = Ext.urlEncode(getArgs);
    url = url + (args ? ("?" + args) : "");
    this.iframe.src = url;
} 
```

单击按钮将调用此函数并为其提供 WebMethod 的 URL，并最终传递额外的参数。JS 方面的想法是创建一个隐藏的 iFrame，它将获取 URL，然后提示用户下载。

我希望它有所帮助

# java - 按名称删除xml节点并更新它

> ID：13581159
> 
> 赞同：0
> 
> 时间：2012-11-27T09:33:06.290
> 
> 标签：java, xml, nodes

我有一个以下 xml 文件。

```
<abc>
  <sample name="xyz">
    <a>....</a>
  </sample>
  <sample name="pqr">
    <a>....</a>
  </sample>
</abc> 
```

我只需要删除`<sample name="xyz">`，但是当我单击删除按钮时，它会删除所有`<sample>`节点，但我只需要删除名称为“xyz”的节点。删除后，我需要自动更新我的 xml 文件。
这是我使用的代码，但不适用于我

```
try{
   String xmlFile = "C:/practise.xml";
   File file = new File(xmlFile);
    String remElement = "sample";
   if (file.exists()){
   DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
   DocumentBuilder builder = factory.newDocumentBuilder();
   Document doc = builder.parse(xmlFile);
   TransformerFactory tFactory = TransformerFactory.newInstance();
   Transformer tFormer = tFactory.newTransformer();
   Element element = (Element)doc.getElementsByTagName(remElement).item(0); 
   element.getParentNode().removeChild(element);
    doc.normalize();
    Source source = new DOMSource(doc);
   Result dest = new StreamResult(System.out);
   tFormer.transform(source, dest);
   System.out.println("jhala re delete");
   //createOutputFile("C:/MyTestbeds/TestBed1.xml", transformToString(doc));
}
else{
     System.out.println("File not found!");
   }
}
catch (Exception e){
System.err.println(e);

}
} 
```

我不明白我的代码有什么问题。当我删除第一个节点时，我还需要更新我的 xml 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:53:37.667

为我工作。尝试发布说明您的问题的[SSCCE 。](http://sscce.org)

```
import java.io.ByteArrayInputStream;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Result;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class TestXML {

    private static final String XML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<abc>\r\n" + "<sample name=\"xyz\">\r\n"
            + "    <a>....</a>\r\n" + "  </sample>\r\n" + "  <sample name=\"pqr\">\r\n" + "    <a>....</a>\r\n" + "  </sample>\r\n"
            + "</abc>";

    public static void main(String[] args) {
        try {
            String remElement = "sample";
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(new ByteArrayInputStream(XML.getBytes("UTF-8")));
            TransformerFactory tFactory = TransformerFactory.newInstance();
            Transformer tFormer = tFactory.newTransformer();
            Element element = (Element) doc.getElementsByTagName(remElement).item(0);
            element.getParentNode().removeChild(element);
            doc.normalize();
            Source source = new DOMSource(doc);
            Result dest = new StreamResult(System.out);
            tFormer.transform(source, dest);
        } catch (Exception e) {
            e.printStackTrace();

        }
    }
} 
```

# maven - 为什么maven每次都先从maven中央服务器搜索我的私有依赖jar？

> ID：13581162
> 
> 赞同：1
> 
> 时间：2012-11-27T09:33:14.713
> 
> 标签：maven, nexus

我的 Maven 私有服务器（nexus）中有一个名为 brandstore-repository 的 jar，

为什么maven每次都先从maven中心服务器搜索它？

```
[artifact:mvn] Downloading: http://search.maven.org/remotecontent?filepath=/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom
[artifact:mvn] Downloading: http://repository.jboss.com/maven2/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom
[artifact:mvn] Downloading: https://oss.sonatype.org/content/repositories/snapshots//com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom
[artifact:mvn] Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.pom
[artifact:mvn] 1K downloaded
[artifact:mvn] Downloading: http://search.maven.org/remotecontent?filepath=/com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom
[artifact:mvn] Downloading: http://repository.jboss.com/maven2/com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom
[artifact:mvn] Downloading: https://oss.sonatype.org/content/repositories/snapshots//com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom
[artifact:mvn] Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore/4.0.0/brandstore-4.0.0.pom
[artifact:mvn] 17K downloaded
[artifact:mvn] Downloading: http://search.maven.org/remotecontent?filepath=/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar
[artifact:mvn] Downloading: http://repository.jboss.com/maven2/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar
[artifact:mvn] Downloading: https://oss.sonatype.org/content/repositories/snapshots//com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar
[artifact:mvn] Downloading: http://10.8.12.100/nexus/content/groups/public/com/jumbo/brandstore/brandstore-repository/4.0.0/brandstore-repository-4.0.0.jar
[artifact:mvn] 913K downloaded 
```

在我的 setting.xml 文件中，我已经在顶部设置了我的私人服务器（nexus）“http://10.8.12.100/nexus/content/groups/public”

和 activeProfiles 我在“maven-home”之前设置了“profile-baozun”

```
<profiles>
        <profile>
            <id>profile-baozun</id>
            <repositories>
                <repository>
                    <id>public</id>
                    <url>http://10.8.12.100/nexus/content/groups/public</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>

                <repository>
                    <id>loxia2</id>
                    <url>http://loxia2.googlecode.com/svn/repository</url>
                    <releases>
                        <enabled>true</enabled>
                        <checksumPolicy>warn</checksumPolicy>
                    </releases>
                </repository>
            </repositories>
        </profile> 

        <profile>
            <id>maven-home</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://search.maven.org/remotecontent?filepath=</url>
                </repository>

                <repository>
                    <id>jboss</id>
                    <url>http://repository.jboss.com/maven2</url>
                </repository>

                <repository>
                    <id>sonatype</id>
                    <url>https://oss.sonatype.org/content/repositories/snapshots/</url>
                </repository>
            </repositories>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>maven-home</activeProfile>
                 <activeProfile>profile-baozun</activeProfile>

    </activeProfiles> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T09:39:32.450

如果不检查存储库索引，Maven 无法知道您的 Maven 坐标指向的位置。我建议您将您的 nexus 代理放在中央 maven 存储库和其他存储库中，然后在 settings.xml 中添加一个[镜像节。](http://maven.apache.org/guides/mini/guide-mirror-settings.html)

这样所有的请求都会去nexus，如果nexus没有工件，它会缓存它并提供它，这样下一次，你会更快地得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:30:36.247

我建议将 settings.xml 设置为仅指向存储库组，然后将其他代理和托管存储库添加到 Nexus 中的组。这样您就不必在第一次安装后重新配置 settings.xml。

查看[Nexus book](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)中的示例 settings.xml 。

# java - 在 Java Swing 中使用线程获得惊人的异常

> ID：13581164
> 
> 赞同：0
> 
> 时间：2012-11-27T09:33:19.320
> 
> 标签：java, multithreading, swing, exception, event-dispatch-thread

当我在我的代码中使用多线程时，我得到了以下惊人的异常，但是我不知道它发生在哪里。此外，此异常仅有时会发生。

> 线程“AWT-EventQueue-0”中的异常 java.util.NoSuchElementException：javax.swing.plaf.basic.BasicTableHeaderUI.getPreferredSize(BasicTableHeaderUI.java) 的 java.util.Vector$1.nextElement(Vector.java:348) 的向量枚举:793) 在 javax.swing.JComponent.getPreferredSize(JComponent.java:1660)

我在我的应用程序中使用以下代码进行多线程。

```
 try {
        Thread Thread4 = new Thread() {
           public void run() {
                GetOrderData(mID, "OrderInfo_Orn");
            }
        };
        Thread4.start();
        Thread4.sleep(20);

        Thread Thread5 = new Thread() {
           public void run() {
                GetOrderData(mID, "OrderInfo_Parts");
            }
        };
        Thread5.start();
        Thread5.sleep(20);
        Thread queryThread = new Thread() {

            public void run() {
                GetMasterData(mID, rowId);
            }
        };
        queryThread.start();
        queryThread.sleep(20);
        Thread Thread2 = new Thread() {
            public void run() {
                GetDetailData(mID, "'RcvPrePolishGoods_Detail'");
            }
        };
        Thread2.start();
        Thread2.sleep(20);

        Thread Thread3 = new Thread() {
            public void run() {
                GetDetailData(mID, "'RcvPrePolishGoods_Parts'");
            }
        };
        Thread3.start();
        Thread3.sleep(20);
      } catch (InterruptedException ex) {
        Logger.getLogger(RcvPrePolishGoods.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:08:37.157

您需要研究几件事：

1.  如果您从函数更新 GUI（向 JTable 添加项目是异常所暗示的）`Get****Data`，您将遇到 EDT 问题（这就是`AWT-EventQueue-0`您在错误中看到的）。而是使用[SwingUtils.InvokeLater()](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)。或者，如果您需要它在 20 毫秒（或 20 毫秒间隔）后运行，请使用[Swing Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)

2.  你打电话`threadname.start();`，然后在下一行，打电话`threadname.sleep(20);`。根据[API](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long,%20int%29)，`Thread.sleep`导致当前运行的线程等待 - 在这种情况下是 EDT（不是线程名）。如果您希望线程名休眠，请将 sleep 放置在可运行对象中，如下所示：

    ```
    Thread Thread5 = new Thread() {
       public void run() {
            Thread.sleep();
            GetOrderData(mID, "OrderInfo_Parts");
        }
    }; 
    ```

# mysql - 检查登录详细信息（用户名和密码）的最佳查询

> ID：13581168
> 
> 赞同：2
> 
> 时间：2012-11-27T09:33:29.383
> 
> 标签：mysql, optimization

这是检查 MySql 数据库中是否存在用户名和密码的最佳查询。

```
1)SELECT * FROM login_details WHERE username='username' AND password='password'
2)SELECT count(*)FROM login_details WHERE username='username' AND password='password'
3)SELECT count(Username)FROM login_details WHERE username='username' AND password='password'
4)SELECT 1 FROM login_details WHERE username='username' AND password='password' 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T09:44:29.683

希望`'password'`实际上是[用户密码的加盐哈希](https://stackoverflow.com/a/477578)，并且您将应用程序中的两个文字作为[参数传递给准备好的语句](https://stackoverflow.com/a/60496)。

假设您有一个索引`(username, password)`，“最佳”将是：

```
SELECT EXISTS (
  SELECT * FROM login_details WHERE username = ? AND password = ?
) 
```

这样，一旦遇到单个结果，MySQL 就会[停止搜索。](http://dev.mysql.com/doc/en/subquery-optimization-with-exists.html)

# java - 在 Android 中使用 AES 128 算法进行文本加密

> ID：13581172
> 
> 赞同：2
> 
> 时间：2012-11-27T09:33:36.930
> 
> 标签：java, android, security, encryption, aes

我尝试使用 AES 128 算法加密文本并使用 PHP 服务器对其进行解密，问题是加密文本不正确，我正在使用网站（[http://phpaes.com/index.php#encrypt](http://phpaes.com/index.php#encrypt)）来测试正确的结果，因为服务器端的解密方法正确解密了网站结果。

我需要创建与网站结果完全相同的加密文本吗？任何人都可以帮助我。

我当前的加密代码返回此文本 (EfYqMP/MMIoTRfE5J7GvpbAhNSdiffLkS6ZCWUdTCfoUnUEl7INa9jdQErXClzx7) 除了最后 16 个字符外，它与网站结果完全相同！！！

我的加密代码：

```
public class AES4all {

public static Cipher getAESCBCEncryptor(byte[] keyBytes, byte[] IVBytes, String      padding) throws Exception{
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(IVBytes);
    Cipher cipher = Cipher.getInstance("AES/CBC/"+padding);
    cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);
    return cipher;
}

public static Cipher getAESCBCDecryptor(byte[] keyBytes, byte[] IVBytes, String padding) throws Exception{
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(IVBytes);
    Cipher cipher = Cipher.getInstance("AES/CBC/"+padding);
    cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);
    return cipher; 
} 

public static Cipher getAESECBEncryptor(byte[] keyBytes, String padding) throws Exception{
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/"+padding);
    cipher.init(Cipher.ENCRYPT_MODE, key);
    return cipher;
}

public static Cipher getAESECBDecryptor(byte[] keyBytes, String padding) throws Exception{
    SecretKeySpec key = new SecretKeySpec(keyBytes, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/"+padding);
    cipher.init(Cipher.DECRYPT_MODE, key);
    return cipher;
}

public static byte[] encrypt(Cipher cipher, byte[] dataBytes) throws Exception{
    ByteArrayInputStream bIn = new ByteArrayInputStream(dataBytes);
    CipherInputStream cIn = new CipherInputStream(bIn, cipher);
    ByteArrayOutputStream bOut = new ByteArrayOutputStream();
    int ch;
    while ((ch = cIn.read()) >= 0) {
      bOut.write(ch);
    }
    return bOut.toByteArray();
} 

public static byte[] decrypt(Cipher cipher, byte[] dataBytes) throws Exception{
    ByteArrayOutputStream bOut = new ByteArrayOutputStream();
    CipherOutputStream cOut = new CipherOutputStream(bOut, cipher);
    cOut.write(dataBytes);
    cOut.close();
    return bOut.toByteArray();    
} 
/**
 * @param args
 */

public static byte[] demo1encrypt(byte[] keyBytes, byte[] ivBytes, String sPadding, byte[] messageBytes) throws Exception {
    Cipher cipher = getAESCBCEncryptor(keyBytes, ivBytes, sPadding); 
    return encrypt(cipher, messageBytes);
}

public static byte[] demo1decrypt(byte[] keyBytes, byte[] ivBytes, String sPadding, byte[] encryptedMessageBytes) throws Exception {
    Cipher decipher = getAESCBCDecryptor(keyBytes, ivBytes, sPadding);
    return decrypt(decipher, encryptedMessageBytes);
}

public static byte[] demo2encrypt(byte[] keyBytes, String sPadding, byte[] messageBytes) throws Exception {
    Cipher cipher = getAESECBEncryptor(keyBytes, sPadding); 
    return encrypt(cipher, messageBytes);
}

public static byte[] demo2decrypt(byte[] keyBytes, String sPadding, byte[] encryptedMessageBytes) throws Exception {
    Cipher decipher = getAESECBDecryptor(keyBytes, sPadding);
    return decrypt(decipher, encryptedMessageBytes);
}

public static void main(String[] args) throws Exception {
    String sDemoMesage = "This is a demo message from Java!";
    byte[] demoMesageBytes = sDemoMesage.getBytes();
    //shared secret
    byte[] demoKeyBytes = new byte[] {  0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
            0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};
    // Initialization Vector - usually a random data, stored along with the shared secret,
    // or transmitted along with a message.
    // Not all the ciphers require IV - we use IV in this particular sample
    byte[] demoIVBytes = new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
                                    0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};
    String sPadding = "ISO10126Padding"; //"ISO10126Padding", "PKCS5Padding"

    System.out.println("Demo Key (base64): "+ new String(SimpleBase64Encoder.encode(demoKeyBytes)));
    System.out.println("Demo IV  (base64): "+ new String(SimpleBase64Encoder.encode(demoIVBytes)));

    byte[] demo1EncryptedBytes = demo1encrypt(demoKeyBytes, demoIVBytes, sPadding, demoMesageBytes);
    System.out.println("Demo1 encrypted (base64): "+ new String(SimpleBase64Encoder.encode(demo1EncryptedBytes)));
    byte[] demo1DecryptedBytes = demo1decrypt(demoKeyBytes, demoIVBytes, sPadding, demo1EncryptedBytes);
    System.out.println("Demo1 decrypted message : "+new String(demo1DecryptedBytes));

    byte[] demo2EncryptedBytes = demo2encrypt(demoKeyBytes, sPadding, demoMesageBytes);
    System.out.println("Demo2 encrypted (base64): "+ new String(SimpleBase64Encoder.encode(demo2EncryptedBytes)));
    byte[] demo2DecryptedBytes = demo2decrypt(demoKeyBytes, sPadding, demo2EncryptedBytes);
    System.out.println("Demo2 decrypted message : "+new String(demo2DecryptedBytes));

}

}

 public class SimpleBase64Encoder {

// Mapping table from 6-bit nibbles to Base64 characters.
private static char[]    map1 = new char[64];
   static {
      int i=0;
      for (char c='A'; c<='Z'; c++) map1[i++] = c;
      for (char c='a'; c<='z'; c++) map1[i++] = c;
      for (char c='0'; c<='9'; c++) map1[i++] = c;
      map1[i++] = '+'; map1[i++] = '/'; }

// Mapping table from Base64 characters to 6-bit nibbles.
private static byte[]    map2 = new byte[128];
   static {
      for (int i=0; i<map2.length; i++) map2[i] = -1;
      for (int i=0; i<64; i++) map2[map1[i]] = (byte)i; }

/**
* Encodes a string into Base64 format.
* No blanks or line breaks are inserted.
* @param s  a String to be encoded.
* @return   A String with the Base64 encoded data.
*/
public static String encodeString (String s) {
   return new String(encode(s.getBytes())); }

/**
* Encodes a byte array into Base64 format.
* No blanks or line breaks are inserted.
* @param in  an array containing the data bytes to be encoded.
* @return    A character array with the Base64 encoded data.
*/
public static char[] encode (byte[] in) {
   return encode(in,in.length); }

/**
* Encodes a byte array into Base64 format.
* No blanks or line breaks are inserted.
* @param in   an array containing the data bytes to be encoded.
* @param iLen number of bytes to process in <code>in</code>.
* @return     A character array with the Base64 encoded data.
*/
public static char[] encode (byte[] in, int iLen) {
   int oDataLen = (iLen*4+2)/3;       // output length without padding
   int oLen = ((iLen+2)/3)*4;         // output length including padding
   char[] out = new char[oLen];
   int ip = 0;
   int op = 0;
   while (ip < iLen) {
      int i0 = in[ip++] & 0xff;
      int i1 = ip < iLen ? in[ip++] & 0xff : 0;
      int i2 = ip < iLen ? in[ip++] & 0xff : 0;
      int o0 = i0 >>> 2;
      int o1 = ((i0 &   3) << 4) | (i1 >>> 4);
      int o2 = ((i1 & 0xf) << 2) | (i2 >>> 6);
      int o3 = i2 & 0x3F;
      out[op++] = map1[o0];
      out[op++] = map1[o1];
      out[op] = op < oDataLen ? map1[o2] : '='; op++;
      out[op] = op < oDataLen ? map1[o3] : '='; op++; }
   return out; }

/**
* Decodes a string from Base64 format.
* @param s  a Base64 String to be decoded.
* @return   A String containing the decoded data.
* @throws   IllegalArgumentException if the input is not valid Base64 encoded data.
*/
public static String decodeString (String s) {
   return new String(decode(s)); }

/**
* Decodes a byte array from Base64 format.
* @param s  a Base64 String to be decoded.
* @return   An array containing the decoded data bytes.
* @throws   IllegalArgumentException if the input is not valid Base64 encoded data.
*/
public static byte[] decode (String s) {
   return decode(s.toCharArray()); }

/**
* Decodes a byte array from Base64 format.
* No blanks or line breaks are allowed within the Base64 encoded data.
* @param in  a character array containing the Base64 encoded data.
* @return    An array containing the decoded data bytes.
* @throws    IllegalArgumentException if the input is not valid Base64 encoded data.
*/
public static byte[] decode (char[] in) {
   int iLen = in.length;
   if (iLen%4 != 0) throw new IllegalArgumentException ("Length of Base64 encoded input string is not a multiple of 4.");
   while (iLen > 0 && in[iLen-1] == '=') iLen--;
   int oLen = (iLen*3) / 4;
   byte[] out = new byte[oLen];
   int ip = 0;
   int op = 0;
   while (ip < iLen) {
      int i0 = in[ip++];
      int i1 = in[ip++];
      int i2 = ip < iLen ? in[ip++] : 'A';
      int i3 = ip < iLen ? in[ip++] : 'A';
      if (i0 > 127 || i1 > 127 || i2 > 127 || i3 > 127)
         throw new IllegalArgumentException ("Illegal character in Base64 encoded data.");
      int b0 = map2[i0];
      int b1 = map2[i1];
      int b2 = map2[i2];
      int b3 = map2[i3];
      if (b0 < 0 || b1 < 0 || b2 < 0 || b3 < 0)
         throw new IllegalArgumentException ("Illegal character in Base64 encoded data.");
      int o0 = ( b0       <<2) | (b1>>>4);
      int o1 = ((b1 & 0xf)<<4) | (b2>>>2);
      int o2 = ((b2 &   3)<<6) |  b3;
      out[op++] = (byte)o0;
      if (op<oLen) out[op++] = (byte)o1;
      if (op<oLen) out[op++] = (byte)o2; }
   return out; }

private SimpleBase64Encoder() {}

} // end class SimpleBase64Encoder 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:43:58.890

最后一个字符是填充。CBC/EBC 算法要求消息是块大小的倍数。

该网站没有指定他们使用的填充，因此那里缺少非常重要的信息。我想你必须尝试看看。最常见的是`ZeroBytePadding`这样尝试：

```
String sPadding = "ZeroBytePadding"; //"ISO10126Padding", "PKCS5Padding" 
```

# android - 限制位图不应从图像视图中划掉特定区域

> ID：13581178
> 
> 赞同：1
> 
> 时间：2012-11-27T09:34:06.937
> 
> 标签：android, android-imageview

我在 imageview 中设置了位图，并在触摸多次时执行旋转和拖动位图的操作。我希望在 imageview 中设置的位图不应该从 imageview 的特定区域之外。

有什么办法可以做到这一点。

请帮我这个..

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.save();
        scaleCount=scaleCount+scale;
        angleCount = addAngle(angleCount, Math.toDegrees(angle));       

        if (!isInitialized) {
            int w = getWidth();
            int h = getHeight();
            position.set(w / 2, h / 2);
            isInitialized = true;
        }

        Paint paint = new Paint();
        paint.setFilterBitmap(true);
        //Log.v("Height and Width", "Height: "+ getHeight() + "Width: "+ getWidth());

        transform.reset();
        transform.postTranslate(-width / 2.0f, -height / 2.0f);
        transform.postRotate((float) Math.toDegrees(angle));
        transform.postScale(scale, scale);
        transform.postTranslate(position.getX(), position.getY());

        rectangleF = new RectF();
        transform.mapRect(rectangleF);
        //Log.v("VM", "Rect " + rectangleF.left + " " + rectangleF.top + " " + rectangleF.right + " " + rectangleF.bottom);

        canvas.drawBitmap(bitmap, transform, paint);
        canvas.restore();
        BitmapWidth=BitmapWidth+bitmap.getScaledWidth(canvas);
        BitmapHeight=BitmapHeight+bitmap.getScaledHeight(canvas);

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        vca = null;
        vcb = null;
        vpa = null;
        vpb = null;

        x = event.getX();
        y = event.getY();

        try {
            touchManager.update(event);

            if (touchManager.getPressCount() == 1) {
                vca = touchManager.getPoint(0);
                vpa = touchManager.getPreviousPoint(0);

                position.add(touchManager.moveDelta(0));
            }
            else {
                if (touchManager.getPressCount() == 2) {
                    vca = touchManager.getPoint(0);
                    vpa = touchManager.getPreviousPoint(0);
                    vcb = touchManager.getPoint(1);
                    vpb = touchManager.getPreviousPoint(1);

                    VMVector2D current = touchManager.getVector(0, 1);
                    VMVector2D previous = touchManager.getPreviousVector(0, 1);
                    float currentDistance = current.getLength();
                    float previousDistance = previous.getLength();

                    if (currentDistance-previousDistance != 0) {
                        scale *= currentDistance / previousDistance;
                    }
                    angle -= VMVector2D.getSignedAngleBetween(current, previous);
                    /*angleCount=angleCount+angle;*/
                }
            }
            invalidate();
        }
        catch(Exception exception) {
        //  Log.d("VM", exception.getMessage());
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:02:46.870

设置画布剪辑矩形。下一个绘图调用将仅在指定区域内修改画布。请参阅：[使用 clipRect - 解释](https://stackoverflow.com/questions/3331805/using-cliprect-explantion)

# php - php中的脚本边距

> ID：13581180
> 
> 赞同：0
> 
> 时间：2012-11-27T09:34:12.140
> 
> 标签：php

必须可以将两个或多个脚本组合在一起。但我不知道怎么可能。
举个例子 ：

```
<?php
// here links of POST/GET action for if else. Users can choice here

if (action 1 ){
// first script 
echo "first Test";
}
if (action 2){
//second scripts
echo "second test";
}

?> 
```

可以通过`if-else with POST/GET` .

但是在许多脚本中，例如 wordpress 登录面板脚本，没有`POST/GET`选项。只有链接选项。这是一个内部链接。喜欢 ：

```
wp-login.php        //main script
wp-login.php?action=lostpassword       //internal script 
```

我怎样才能用我的示例脚本做到这一点？请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:37:32.973

```
$action = null;
if(array_key_exists('action', $_REQUEST)) {
    $action = $_REQUEST['action'];
}

switch($action) {
    case 'lostpassword':
        //dothis;
        echo 'first Test';
        break;
    case 'dothat':
        //dothat;
        break;
    case 'doda':
        //doda;
        break;
    default:
        //other actions!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:39:14.487

干得好：

```
<?php

if ($_GET['action'] == 'lostpassword') {
    echo 'you have lost your password';
}

if ($_GET['action'] == 'login') {
    echo 'logging you in';
}

?> 
```

或者：

```
<?php

if ($_GET['action'] == '1') {
    echo "first Test";
}

if ($_GET['action'] == '2') {
    echo "second test";
}

?> 
```

基本上，如果您要访问`doc.php?action=lostpassword`，“您丢失了密码”将是输出，但如果您访问`doc.php?action=login`，“登录您”将是输出。

# c# - 拆分 - 索引超出了数组的范围

> ID：13581182
> 
> 赞同：6
> 
> 时间：2012-11-27T09:34:17.630
> 
> 标签：c#, split

我使用以下代码拆分字符串并存储它：

```
string[] proxyAdrs = linesProxy[i].Split(':');
string proxyServer = proxyAdrs[0];
int proxyPort = Convert.ToInt32(proxyAdrs[1]);

if(proxyAdrs[2] != null)
{
    item.Username = proxyAdrs[2];
}

if (proxyAdrs[3] != null)
{
    item.Password = proxyAdrs[3];
} 
```

问题是我得到

> 指数数组的边界之外。

什么时候`proxyAdrs[2]`不在。

有时 proxyAdrs[2] 有时不存在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:35:36.500

只需检查 if 语句中返回的数组的长度

```
if( proxyAdrs.Length > 2 &&  proxyAdrs[2] != null)
    {
        item.Username = proxyAdrs[2];
    } 
```

您收到异常的原因是拆分返回的数组大小小于您正在访问的索引。如果您正在访问数组元素，`2`则数组中必须至少有`3`元素，因为数组索引以`0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:36:11.007

您可以在通过索引访问其元素之前检查数组的长度。

改变

```
 if(proxyAdrs[2] != null)
   {
            item.Username = proxyAdrs[2];
   } 
```

到

```
 if(proxyAdrs.Length > 2 )
   {
            item.Username = proxyAdrs[2];
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:36:01.143

试试这个：

```
 string[] proxyAdrs = linesProxy[i].Split(':');
        string proxyServer = proxyAdrs[0];
        int proxyPort = Convert.ToInt32(proxyAdrs[1]);

        if(proxyAdrs.Length > 2 && proxyAdrs[2] != null)
        {
            item.Username = proxyAdrs[2];
        }

        if (proxyAdrs.Length > 3 && proxyAdrs[3] != null)
        {
            item.Password = proxyAdrs[3];
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:36:08.830

`proxyAdrs`在尝试下标可能不存在的项目之前检查长度。

```
if ( proxyAdrs.Length > 1 ) {
  item.Username = proxyAdrs[2];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:38:48.900

这是您的`i`which 可能低于`2`您尝试设置为索引的 :)

`if i >= 2`然后你可以做所有的folwing：----

```
if(proxyAdrs[2] != null)
        {
            item.Username = proxyAdrs[2];
        }

        if (proxyAdrs[3] != null)
        {
            item.Password = proxyAdrs[3];
        }
}
else I suggest you get out :D 
```

但同样，检查`proxyAdrs.Lenght`将是最好的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T09:54:33.127

有两个选项可以帮助您，具体取决于您是否形成传入数据（变量`linesProxy`）：

1.  如果您确实形成传入数据：始终包括字符串的所有部分。在您的情况下，如果没有提供 2nd 的值，请始终通过在 1st 和 3rd 值之间添加额外的值来确保您有 4 个（假设`proxyAdrs[3]`是最后一个）部分。`:`因此，`.Split()`操作后（确保您不激活`RemoveEmptyStrings`选项）您的`proxyAdrs[2]`意愿`null`和您的样本会很好。
2.  否则：如果`proxyAdrs[2]`是唯一可以为空的部分，以下代码段可以防止崩溃：

    ```
    string[] proxyAdrs = linesProxy[i].Split(':');
    string proxyServer = proxyAdrs[0];
    int proxyPort = Convert.ToInt32(proxyAdrs[1]);    

    if(proxyAdrs.Length > 3)
    {
      if(proxyAdrs[2] != null)
          item.Username = proxyAdrs[2];
      if (proxyAdrs[3] != null)
          item.Password = proxyAdrs[3];
    }
    else
    {
     if(proxyAdrs[2] != null)
          item.Password = proxyAdrs[2];
    } 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-18T11:21:32.407

```
try
{
    objCommonDD = new CommonDropDownBLL();
    objCommonDDEntity = new CommonDropdownEntity();

    //string strState=contextKey.ToString();
    string[] contextKeySplit = contextKey.Split('^');
    string strState = contextKeySplit[0].ToString();
    string strPin = contextKeySplit[1].ToString();

    objCommonDDEntity.TableName = "PCOM_PINCODES";
    objCommonDDEntity.DeleteField = "";
    objCommonDDEntity.TextField = "RTRIM(PIN_CITY_NAME) AS PC_DESC";
    objCommonDDEntity.ValueField = "DISTINCT PIN_CITY_CODE AS PC_CODE";

    objCommonDDEntity.StrCondition = " AND PIN_COUNTRY_CODE='IND' AND UPPER(PIN_CITY_NAME) LIKE UPPER('" + prefixText + "%') AND PIN_STATE_NAME='" + strState + "' AND PIN_CODE='" + strPin + "' ORDER BY PC_DESC";

    DataTable dtCity = new DataTable();
    dtCity = objCommonDD.GetData(objCommonDDEntity);

    string[] items = new string[dtCity.Rows.Count];
    int i = 0;

    for (i = 0; i < dtCity.Rows.Count; i++)
    {
        items.SetValue(dtCity.Rows[i]["PC_DESC"].ToString(), i);
    }

    return items;
} 
```

# java - GCM 服务器端的问题

> ID：13581190
> 
> 赞同：0
> 
> 时间：2012-11-27T09:34:46.027
> 
> 标签：java, rest, google-cloud-messaging

我试图在 android 设备中使用 GCM 测试推送通知。只是我使用stackoverflow中的可用片段运行服务器端测试。但我得到了**java.lang.NoClassDefFoundError: com/univ/entity/GCMTestingClient**

```
import java.io.IOException;

import com.google.android.gcm.server.Message;
import com.google.android.gcm.server.Result;
import com.google.android.gcm.server.Sender;

public class GCMTestingClient {
    public String  GCMTest() throws IOException {
        Sender sender = new Sender("AszEaAipXqOJl--lMKSk6qHiOO7zmavU3cRQPk");
        Message message = new Message.Builder()
                .collapseKey("1")
                .timeToLive(3)
                .delayWhileIdle(true)
                .addData("hello",
                        "this text will be seen in notification bar!!").build();

        Result result = sender.send(message, "93821834343", 1);
        System.out.println("result" + result);
        return result.toString();
    }

    public static void main(String[] args) {

        try {
            GCMTestingClient gcm=new GCMTestingClient();
            gcm.GCMTest();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

帮我解决这个问题。

错误信息 ：

```
 java.lang.NoClassDefFoundError: com/univ/entity/GCMTestingClient
Caused by: java.lang.ClassNotFoundException: com.univ.entity.GCMTestingClient
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:44:52.493

您是否正在使用运行应用程序

```
java com.univ.entity.GCMTestingClient 
```

?

如果是，那么您的代码顶部缺少包名称：

```
package  com.univ.entity 
```

基本上，您的错误是说 java 找不到您要运行的类。您应该在顶级目录中，并使用 GCMTestingClient 类查看“com/univ/entity/”目录。

# android-annotations - 如何处理 android 注释中的配置更改。（屏幕旋转）

> ID：13581191
> 
> 赞同：2
> 
> 时间：2012-11-27T09:34:50.110
> 
> 标签：android-annotations, android-configchanges

我正在使用 Android 注释。有一个进度对话框，但是当我旋转屏幕时（着陆到端口）。进度对话框关闭并在 log cat 中显示这些错误。

> 活动 com.example.progressdialog.AnnotationProgressDialogActivity_ 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40661c20
> 
> android.view.WindowLeaked: 活动 com.example.progressdialog.AnnotationProgressDialogActivity_ 已经泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40661c20

这是我的代码：-

```
@EActivity(R.layout.main)
public class AnnotationProgressDialogActivity extends Activity 
{
    @NonConfigurationInstance
    ProgressDialog pd ;

    @NonConfigurationInstance
    @Bean 
    BackgroundTask bgt;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

    }

    @Click
    public void loginButton()
    {

        pd = ProgressDialog.show(this,"Login", "Loading please wait.....");
        bgt.backGroundMethod();
    }

    public void dismissDialog()
    {
        pd.dismiss();
    }
}

    enter code here

@EBean
public class BackgroundTask 
{
    @RootContext
    Activity apda;

    @Background
    public void backGroundMethod()
    {
        try
        {
            TimeUnit.SECONDS.sleep(10);
            update();
        }
        catch(Exception e)
        {
            Log.e("Error",""+e);
        }
}

    @UiThread
    public void update()
    {
        //((AnnotationProgressDialogActivity)apda).updateUI();
        ((AnnotationProgressDialogActivity)apda).dismissDialog();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:29:19.070

出现此错误是因为您保留了对 ProgressDialog 的引用，而 ProgressDialog 本身保留了对已破坏活动的引用，该活动具有对泄漏的 DecorView 的引用。

这是您应该做的：

1.  有办法将 BackgroundTask 标记为“正在运行”，例如布尔字段
2.  在 onCreate() 中，检查“正在运行”是否为真，如果是，则创建一个新的进度对话框并显示它

另请注意，`@RootContext Activity apda`可以替换为`@RootContext AnnotationProgressDialogActivity apda`.

# asp-classic - vbscript 使用 Ccur 舍入到小数点后 2 位

> ID：13581195
> 
> 赞同：4
> 
> 时间：2012-11-27T09:35:01.273
> 
> 标签：asp-classic, vbscript

我正在使用`CCur()`而不是`CDbl()`在这个问题中回答：

[VBScript数学表达式不起作用](https://stackoverflow.com/questions/13569944/vbscript-mathematical-expression-not-working)

但我想显示小数位数，例如 3 应该是 3.00，3.555 应该是 3.55。

如何使用 CCur() 函数实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:47:07.247

CCur() 是“转换为货币”函数，而不是数字格式化函数。

请改用以下函数：

**FormatNumber** (number [,DecimalPlaces [,IncludeLeadingZero [,UseParenthesis [, GroupDigits]]]] )

或者

**FormatCurrency** (Expression[,NumDigAfterDec[,IncLeadingDig[,UseParForNegNum[,GroupDig]]]])

*number ：要格式化的数字。
DecimalPlaces ：小数点后显示的位数。
IncludeLeadingZero : 包括数字 <1 和 > -1 的前导零
UseParenthesis : 在括号中显示负数 (500) = -500
GroupDigits : 用逗号（或区域分隔符）对大数字进行分组* 

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T10:29:52.473

不四舍五入固定到小数点后两位；

```
curvar = int(curvar  * 100) / 100 
```

格式化显示（`3`-> `"3.00"`：

```
curvar  = formatnumber(int(curvar * 100) / 100, 2) 
```

# java - Java 小程序 VOIP 音频流合并，发出断断续续的声音

> ID：13581203
> 
> 赞同：3
> 
> 时间：2012-11-27T09:35:34.050
> 
> 标签：java, applet, voip, audio-streaming

我正在尝试编写一个 VOIP 会议 Java Applet。一切正常，音质良好，直到第三个用户进入房间。我正在尝试合并几个音频流，但是当它完成时，声音真的很不稳定。每个流都进入不同的线程。登录小程序的用户越多，质量损失就越大。

音频格式：采样率：8000，位：16

这是单个音频流的来源：

```
while (true) {
                DatagramPacket receive = new DatagramPacket(mBuffer, mBuffer.length);
                datagramSocket.receive(receive);
                System.out.println("Received from: " + receive.getAddress() + ":" + receive.getPort());
                short[] shortBuffer = convert(mBuffer); // Convert the buffer to a 2byte short

                double volume = calcVolume(calcDistance(Client.getUser().getXPosition(), Client.getUser().getYPosition(), mUser.getXPosition(), mUser.getYPosition())); // Used to calculate sound for proximity effect
                for (int i = 0; i < shortBuffer.length; i++) {
                    shortBuffer[i] *= volume;
                }
                mBuffer = convert(shortBuffer);

                position = 0; // Set the short position in the buffer to 0
                //resetPosition();
            } 
```

这是音频流汇集并合并的地方：

```
 class PlayThread extends Thread {
    private short[] previousBuffer; // Used to prevent from duplicated data
    private short[] buffer = new short[1];

    @Override
    public void run() {
        while (true) {

            previousBuffer = Arrays.copyOf(buffer, buffer.length);

            for (int i = 0; i < buffer.length; i++) {
                int sum = 0;
                int total = 0;

                synchronized (mReceiveThreads) {
                    for (ReceiveThread receiveThread : mReceiveThreads) {
                        short[] sBuffer = convert(receiveThread.mBuffer);

                        buffer = smoothArray(sBuffer, 1.6); // Smooth the current buffer
                        if (receiveThread.position < sBuffer.length) {
                            sum += sBuffer[receiveThread.position];
                            receiveThread.position++;
                            total++;
                        }

                    }
                }

                if (total > 0) {
                    buffer[i] = (short) (sum / total);
                }

            }

            if(!Arrays.equals(buffer, previousBuffer)) {

                //lowerVolume();
                if(ClientPanel.getAudioselected()) {
                    sourceDataLine.write(convert(buffer), 0, buffer.length * 2);
                }
            }
            //System.out.println("Took " + (System.nanoTime() - start) + "ns.");
        }
    } 
```

正如你所看到的，我遍历了我所有的接收线程并从所有线程中得到 1 个短。我得到平均声音并将输出写入源数据线。

任何想法如何防止声音变得如此波涛汹涌？

# javascript - 浏览器性能统计服务

> ID：13581208
> 
> 赞同：0
> 
> 时间：2012-11-27T09:35:39.963
> 
> 标签：javascript, performance, browser, web-statistics

我想创建一些带有建议的 html 页面来更新旧版本的浏览器或安装其他浏览器（类似[这样](http://www.sophrosynelife.com/wp-content/uploads/2012/09/example.png)）。

我认为用户查看浏览器的性能（速度）比较（像[这样](http://support.threetags.com/wp-content/uploads/2009/10/browser_speed_test.PNG)）会很有用，这有助于他做出选择。

是否有任何服务可以让我从中提取有关现代浏览器性能的原始数据并将其显示在此类页面中。

例如，我得到（以任何方式 - ajax 可能）这样的数据：

```
{
    browsers: [
        ie: {
            edgeVersion: 10,
            generalizedSpeed: 8
        },
        chrome: {
            edgeVersion: 25,
            generalizedSpeed: 9999
        },
        firefox: {
            edgeVersion: 17,
            generalizedSpeed: 500
        },
        ...
    ]
} 
```

所以我总是有实际信息并将其显示给用户，我不需要每次出现新的浏览器版本时都用浏览器比较来更新图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-24T10:22:58.113

我在[网上](https://opendata.socrata.com/Business/Browser-Speed/e3fb-j9c6)找到了这个。我非常有信心可以使用其他此类资源，但是您会发现，衡量性能和定义正确的指标将比从服务中收集数据本身更成问题。我之所以这么说，是因为浏览器性能自相矛盾地是一个复杂而简单的主题。

一方面，分析渲染 DOM 树、重绘和重排的速度取决于您使用的 Web 应用程序，而不一定是浏览器。

另一方面，您可以简单地分析浏览器渲染某个页面需要多长时间（即使这些结果在某种程度上也可能是主观的）不同的渲染引擎在给定任务上可能比其他渲染引擎执行得稍好，但这并不意味着它们是更好的渲染引擎。

我建议以下资源。

1.  [https://vimeo.com/103108124](https://vimeo.com/103108124)
2.  [https://developers.google.com/web/fundamentals/performance/](https://developers.google.com/web/fundamentals/performance/)

此外，该`window.performance`对象还有一些浏览器支持，可用于提取有关应用程序在浏览器中的性能的一些发现。如果您在不同的应用程序中比较来自此对象的数据，您将能够获得一些见解，但它在服务中的问题尚未解决。

# php - 肥皂连接php导致错误500

> ID：13581210
> 
> 赞同：3
> 
> 时间：2012-11-27T09:35:57.353
> 
> 标签：php, web-services, soap, wsdl, windows-server-2008

我有以下问题：我尝试从 php 访问 wsdl webservice。这是我当前的代码：

```
if (isset($_POST['submit'])){

  $soap = new SoapClient("http://footballpool.dataaccess.eu/data/info.wso?wsdl");

} 
```

当我访问此代码时，我得到的只是“500 - 内部服务器错误”。目前我的 php 正在 Windows Server 2008 R2 上运行，但我认为这不可能是错误源。其他应用程序（如 Wordpress）运行没有任何问题。Soap 客户端和服务器在 php.ini 中激活。PHP 版本是 5.4.6。有人知道如何处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:38:43.203

`500 Internal Server Error`表示 PHP 遇到了致命错误。

如果 SoapClient 无法访问远程文件（由于网络原因）或无法解析 XML，SoapClient 将引发异常。

从[手册](http://www.php.net/manual/en/soapclient.soapclient.php)：

> 如果无法加载 wsdl URI，将引发 SoapFault 异常。

检查您的错误日志以获取更多信息或打开错误报告：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

# android - 在 Android 中使用 Ksoap2 库时出错

> ID：13581212
> 
> 赞同：0
> 
> 时间：2012-11-27T09:36:03.140
> 
> 标签：android, jar, ksoap2, android-ksoap2

我正在尝试使用 KSoap2 库。我将文件 Ksoap2-android-assembly-2.5.7-jar-with-dependencies.jar 放在目录 workspace > myproject > libs

然后我将它设置在构建路径中。（图书馆）

运行应用程序时出现错误：

```
 11-27 10:32:56.260: E/dalvikvm(1593): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method 
```

与此代码行相关联：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
```

[在使用 ksoap2 库进行 android](https://stackoverflow.com/questions/5708624/exception-while-using-ksoap2-library-for-android) whitout 成功时，我还尝试了此线程异常中建议的步骤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:44:17.127

如果您想使用 SOAP 解析，请尝试在堆栈上使用我的此代码。这是一个链接 [将数据从 Android 发送到 Web 服务（通过 SOAP）](https://stackoverflow.com/questions/13514384/send-data-from-android-to-web-service-via-soap/13523246#13523246)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:43:03.867

您应该使用正确的 ksoap 库。你用的是什么版本的android？

[https://stackoverflow.com/questions/10092712/ksoap-android-soap-client](https://stackoverflow.com/questions/10092712/ksoap-android-soap-client)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:03:21.880

我解决了 Java 构建路径选项、订单和导出选项卡中 kosoap2 库上的问题检查复选框。

# scala - Scala：在字段中查找循环（ 图）

> ID：13581213
> 
> 赞同：1
> 
> 时间：2012-11-27T09:36:07.557
> 
> 标签：scala, find

如果我有这样的课程：

```
class Component (val name, val description, var subElements : Set[Component]) 
```

如何测试组件内部是否包含循环（使用布尔函数）以及谁启动了这个循环。我很清楚，如果我使用 val 而不是 var 避免循环，但我不能使用 val。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:05:15.603

`Component`返回下图中开始循环的所有元素的成员。如果没有循环，则返回一个空集。

```
def descendantsWithCycle = {
  def findCycle(current: Component, checked: Set[Component]): Set[Component] =
    if (checked contains current) Set(current)
    else {
      val newChecked = checked + current
      current.subElements.flatMap(findCycle(_, newChecked))
    }

  findCycle(this, Set())
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:25:46.050

如果您不需要 var，请不要使用它！val 或 var 也一样：

```
class Component (val name : String, val description : String,  val subElements : Set[Component]){
    def hasCyle(val seen) : Boolean = (seen contains this ||
                                       subElements.exists(item => item.hasCycle(seen + this)))
    def isCyclic = hasCycle(Set())
  }
} 
```

如果您看到的列表包含当前项目，或者如果您看到的集合中包含任何子元素以及当前项目，则您可以读取 hasCycle，因为它有一个循环。

# linux - Bash 输出最高值的行

> ID：13581225
> 
> 赞同：5
> 
> 时间：2012-11-27T09:36:38.790
> 
> 标签：linux, bash, sorting, uniq

我的问题很像[这个](https://stackoverflow.com/questions/5429840/bash-eliminate-duplicate-lines)问题，但有一个不同；我想要输出在第三个选项卡上得分最高的行。我的数据是这样的：

```
1.gui  Qxx  16
2.gui  Qxy  23
3.guT  QWS  11 
```

我想得到这个：

```
1.gui  Qxy  23
3.guT  QWS  11 
```

我用了：

```
cat file.f | uniq | cut -d" " -f3 | sort | uniq -d >>out.f 
```

但没有得到我想要的！？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:42:37.583

与`sort`：

```
$ sort -rk3 file             # Sort on column 3, display all results

2.gui  Qxy  23
1.gui  Qxx  16
3.guT  QWS  11

$ sort -rk3 file | head -2   # Sort on column 3, filter number of results

2.gui  Qxy  23
1.gui  Qxx  16

$ sort -rk3 file | uniq      # Sort on column 3, on display unique results 

2.gui  Qxy  23
1.gui  Qxx  16
3.guT  QWS  11 
```

`-r`反向排序，最高优先。

`-k3`在第三列排序。

* * *

如果您只想显示第 3 列大于某个值*（即 15）*的行，请尝试使用`awk`：

```
awk '$3>15' file | sort -rk3  # Display line where column 3 > 15 and sort

2.gui  Qxy  23
1.gui  Qxx  16 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:02:21.983

对于有相同问题的未来用户：

不要忘记在`-sort`命令中引入 -n 开关，或者您的值从 9999 开始排序，然后是 999 等。所以使用

```
sort -rnk3 file 
```

如果您只想获得具有最高值的一行（删除重复项），请使用以下命令：

```
sort -rnk3 file | awk '!x[$2]++' 
```

如果你有一个常用的分隔符，你可以告诉`-awk`注意：

```
sort -rnk3 file | awk -F"[. ]" '!x[$2]++' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T00:00:33.047

这必须为重复名称的那些行提供最高值，并保留那些没有重复名称的行。

```
sort -rk3 file | awk '!seen[$1]++' > file_filtered.txt 
```

# django - 如何注册装饰器或添加中间件到第三方视图功能？

> ID：13581226
> 
> 赞同：0
> 
> 时间：2012-11-27T09:36:41.047
> 
> 标签：django, view, decorator, django-middleware

我使用 django-allauth 进行帐户管理，包括注册。allauth 应用程序中用于注册的内置 url 是`http://example.com/accounts/signup/`. 在进入注册页面之前，我需要显示条款和条件页面。现在，任何人都可以直接在浏览器中输入此 URL 以进入注册页面，而无需阅读 T&C 页面。但他们应该。

我怎么能这样做？有没有办法向该视图添加装饰器或没有装饰器的任何其他方式？这同样适用于任何管理视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:19:05.357

如果当前用户已接受条款，您可以使用 django session 来存储信息。

如果用户没有这样做，只需将他重定向到 T&C 页面。

如果您在使用此类检查代码包装第三个应用程序视图功能时遇到困难，请尝试使用中间件[process_view](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-view)方法实现该逻辑。

`view_func`论点和`request.session`是你要找的。

# forms - Symfony2 formbuilder HTML 字段

> ID：13581234
> 
> 赞同：1
> 
> 时间：2012-11-27T09:37:24.307
> 
> 标签：forms, symfony, customization, formbuilder

我正在 symfony2 中使用 formbuilder 创建一个表单。在这种形式中，我想放置一些自定义 HTML，但我不想将整个内容模板化，例如。我想用 `{{ form_widget(form) }}`. 是否可以在字段之间放置一些自定义html？

@编辑：让它更清楚

```
$builder
  ->add('description')
  ->add('thisIsMyHTMLField', '<p>Render this HTML</p>') //This is just custom html
  ->add('talentName')
  ->add('keywords')
  ->add('differentiation') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:06:37.617

一种可能的方法（使您免于覆盖 的默认行为`{{ form_widget() }}`）是执行类似的操作

```
{% for fields in form %}
 {% if fields.vars.name != '_token' %}
  {% if fields.vars.errors|length %} <div="errors">
  {% else %} <div class="{{ cycle(["even","odds"], loop.index) }}">
  {% endif %}
  {{ form_label(fields) }}
  {{ form_widget(fields) }}
  {{ form_errors(fields) }}
  </div>
 {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T22:08:40.320

我了解您将表单完全提取为表单类型的动力，但在这种情况下，您正在寻找特定的布局控制。模板是应该进行布局的地方！

在您的模板中，只需将表单分解为各个部分。

在写作时： `{{ form_widget(my_form) }}` 感觉很干净，绝对没有什么能阻止你完全控制布局：

`{{ form_row(my_form.an_item) }}`

`<div>Custom HTML</div>`

`{{ form_row(my_form.another_item) }}`

# regex - 如何使用正则表达式将一个数字替换为另一个数字

> ID：13581239
> 
> 赞同：0
> 
> 时间：2012-11-27T09:37:37.253
> 
> 标签：regex, perl

我有一个名为 files 的文件，其中包含

```
100-1-0_Message1_Tableau_problem.txt
1001-1-0_EDM_Queries_v2.mdb
1001-1-0_geocodes.xlsx
1001-1-0_losstypes.xlsx
1001-10-0_Exposure_Analysis_Tables_Needed.xlsx 
```

我想通过增加文件名的第一部分来替换这个文件。即 001-1-0_EDM_Queries_v2.mdb 到 1002-1-0_EDM_Queries_v2.mdb。下面使用 perl 的正则表达式无法做到这一点。

```
perl -e '@lines = <>;foreach $f (@lines){$n = $f; $n=~s/^(\d+)/$1+1/g; print $n}' files 
```

它打印

```
100+1-1-0_Message1_Tableau_problem.txt
1001+1-1-0_EDM_Queries_v2.mdb
1001+1-1-0_geocodes.xlsx 
```

如何告诉正则表达式添加 +1 而不是追加？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:48:24.783

替换通常只是一个字符串，它不会被评估为表达式。要评估它，请添加`e`修饰符：

```
 $n =~ s/^(\d+)/$1+1/eg; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T09:49:15.913

您需要更改替换，以便替换是*表达式*而不是简单的插值字符串。通过添加`e`修饰符来做到这一点，使其`s/^(\d+)/$1+1/eg`

# list - 更改循环python3的列表

> ID：13581244
> 
> 赞同：1
> 
> 时间：2012-11-27T09:37:59.210
> 
> 标签：list, for-loop, python-3.x

```
a1 = '   '
a2 = '   '
a3 = '   '
b1 = '   '
b2 = '   '
b3 = '   '
c1 = '   '
c2 = '   '
c3 = '   '
boardspace = [[a1,a2,a3],[b1,b2,b3],[c1,c2,c3],[a1,b1,c1],[a2,b2,c2],[a3,b3,c3],[a1,b2,c3],[a3,b2,c1]]

while x != 'a'
    a1 = '0'
    a2 = '0'
    a3 = '0'
    for a in baordspace:
        if a[0]==a[1]==a[2]!= "  "
           x ='a' 
```

如您所见，列表将始终打印`"" "" ""`

`a1` `a2` `a3`永远不会`'0'`在for循环中，这是为什么呢？

但是，如果您打印`a1`它是，`'0'`但是`[a1,a2,a3]``"" "" ""`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:47:16.110

我认为您误解了变量的含义。

当您创建列表“boardspace”时，您正在使用`a1`et al 当时包含的值创建它。然后您将变量`a1`et al 重新分配给不同的值。

该列表不包含`a1`或任何其他变量，而是字符串列表。就这样。

**编辑：**

假设你有这样的事情：

```
a = 1
b = 2
arr = [[a, b], [b, a]] 
```

并且您希望更改`a`反映在 中的两个子列表中`arr`，那么您需要执行以下两项操作之一：

1.  将这些变量转换为对象
2.  将索引存储`arr`到单独的列表中（不太好）

两者都有原因，但由于您可能想要做#1，这里有一个例子：

```
class Tile:
    def __init__(self, val):
        self.val = val

    def __repr__(self):
        return self.val

    def __str__(self):
        return self.val

a = Tile('  ')
b = Tile('  ')

arr = [[a, b], [b, a]]

print arr # [[  ,   ], [  ,   ]]

a.val = '0'

print arr # [[0,   ], [  , 0]] 
```

我已经定义了一个具有一些神奇功能的类：

*   `__init__`- 构造函数
*   `__str__`-`str(obj)`相当于`obj.__str__()`
*   `__repr__`- 输出对象的表示。在这种情况下，我们只有一个值，因此`val`是一个充分的表示。它也使`print arr`工作。有关更多信息，请参阅[此处](http://forums.devshed.com/python-programming-11/tostring-is-to-java-as-blank-is-to-python-445428.html)的最后一篇文章

这里的变化是我们创建了一个对象。Python 通过值传递所有内容，因此当它将我们创建的对象传递给数组时，引用被复制，但底层对象是相同的。

这意味着对任何这些对象的任何更改都将按照您在问题中的预期表现。

# html - 将元素粘贴到具有灵活宽度的 div 上方

> ID：13581253
> 
> 赞同：1
> 
> 时间：2012-11-27T09:38:25.343
> 
> 标签：html, css

事情是这样的，我想让文本“不太可能”坚持数字 1，而文本“很可能”坚持最后一个数字。因此，如果我只有 6 个数字，按钮将居中对齐，文本将跟随第一个和最后一个按钮。我怎么能只用css做到这一点？

![按钮率](../Images/e5fe5097982c72937efb99755ff04713.png)

到目前为止，我有这样的代码

HTML 结构

```
<div class="module-block">
    <div class="num-block">
    <ul>
        <li><a href="javascript:void(0);">1</a></li>
        <li><a href="javascript:void(0);">2</a></li>
        <li><a href="javascript:void(0);">3</a></li>
        <li><a href="javascript:void(0);">4</a></li>
        <li><a href="javascript:void(0);">5</a></li>
        <li><a href="javascript:void(0);">6</a></li>
        <li><a href="javascript:void(0);">7</a></li>
        <li><a href="javascript:void(0);">8</a></li>
        <li><a href="javascript:void(0);">9</a></li>
        <li><a href="javascript:void(0);">10</a></li>
    </ul>
    </div>
    <div style="clear:both;">
        <span style="color:#ffffff; float:left;">not at all likely</span>
        <span style="color:#ffffff; float:right;" class="right">very likely</span>
    </div>
</div> 
```

这是CSS代码：

```
 ul { margin: 0; padding: 0; text-align: center;}
    li { margin:0 1px 0 0; display: inline-block; list-style: none;}
    a { display: inline-block; width: 33px; background-color: #E61968; color: #ffffff; font-size: 16px; font-weight: 600; line-height: 33px; text-align: center; text-decoration: none;}
    .module-block { width: 390px;} 
```

这是 jsfiddle 链接：http: [//jsfiddle.net/d433j/](http://jsfiddle.net/d433j/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:41:52.837

将它们放在包含数字的 div 中：

```
<div class="module-block">
  <div class="num-block">
    <ul>
      <li><a href="javascript:void(0);">1</a></li>
      <li><a href="javascript:void(0);">2</a></li>
      <li><a href="javascript:void(0);">3</a></li>
      <li><a href="javascript:void(0);">4</a></li>
      <li><a href="javascript:void(0);">5</a></li>
      <li><a href="javascript:void(0);">6</a></li>
    </ul>
        <span style="float:left;">not at all likely</span>
        <span style="float:right;" class="right">very likely</span>
  </div>
</div>​ 
```

还要更改CSS，删除居中对齐`ul`（如果要使块居中还有其他方法）。这里的关键是浮动块（并删除它的宽度！），这样下面的标题将适合块。

CSS：（我在外部块上放置了一个边框并删除了一些数字以表明它适用于更少/不同的数字）

```
ul { margin: 0; padding: 0; text-align: left;}
li { margin:0 1px 0 0; display: inline-block; list-style: none;}
a { display: inline-block; width: 33px; background-color: #E61968;    color: #fff; font-size: 16px; font-weight: 600; line-height: 33px; text-align: center; text-decoration: none;}
.module-block {width: auto; border: 1px blue solid; float: left;} 
```

示例：http: [//jsfiddle.net/d433j/2/](http://jsfiddle.net/d433j/2/)

编辑：

如果您想使块居中，并且不知道外部块的宽度，只需将外部块显示设置为`inline-block`，为其添加位置并添加到数字块。此外，将 添加`overflow: hidden`到 numbers 块以使其包含标题：

新的 CSS：

```
ul { margin: 0; padding: 0; text-align: left;}
li { margin:0 1px 0 0; display: inline-block; list-style: none;}
a { display: inline-block; width: 33px; background-color: #E61968;    color: #fff; font-size: 16px; font-weight: 600; line-height: 33px; text-align: center; text-decoration: none;}
.module-block {display:inline-block;
    position:relative;
    left:50%;}
.num-block {width: auto; border: 1px blue solid; position:relative;
    left:-50%; height: auto; overflow: hidden;} 
```

示例：http: [//jsfiddle.net/d433j/3/](http://jsfiddle.net/d433j/3/)

# python - 跟踪 Python 包中方法和函数的执行次数

> ID：13581254
> 
> 赞同：0
> 
> 时间：2012-11-27T09:38:29.230
> 
> 标签：python, oop, debugging

> **可能重复：**
> [如何分析 Python 脚本？](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)

我正在开发一个 API，其中几个包通过各种 gui 协作在一起，我正在慢慢思考如何分析在正常运行下从用户那里获得的包和模块以及方法和类的调用量。认为我可能能够检测到瓶颈并找出大部分工作需要在哪里，同时还可以看到我可以在哪里合并类似的功能。

我把它想象成一个简单的条形图

![在此处输入图像描述](../Images/acb5172b03e5aae9437ca9270d1f988b.png)

每个条形代表一个方法、模块或包，具体取决于您有兴趣查看的“深度”，而高度轴是它获得的调用量。

目前有没有类似的东西和/或你将如何在 Python 中实现它？

我正在考虑在每个方法的入口处放置一个简单的记录器，例如 Debug，然后在制作图表时将其过滤掉。但这意味着我的代码会变得更加混乱，我必须记住为所有代码都这样做。更容易的是，如果我可以在使用某个标志进行编译时应用编译时装饰器。用 Python 可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:29:27.613

我认为 stdlib 中的[跟踪模块](http://docs.python.org/2/library/trace.html)会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:11:37.020

PythonDecoratorLibrary 中提到了用于[分析/跟踪单个函数](http://mg.pov.lt/blog/profiling.html)的装饰器。它会给你一个运行你所描述的实施的开始。

你并没有真正在 Python 中编译东西，它是即时完成的，但你可以根据运行时标志改变装饰器定义来打开和关闭它。

# ant - 如何使用 ant replaceregex 任务在 windows 中用文件路径替换一行？

> ID：13581258
> 
> 赞同：3
> 
> 时间：2012-11-27T09:38:36.443
> 
> 标签：ant, build-automation, build-script

在我的构建文件中，我有一个 ant 目标，其中有以下代码段，

```
 <replaceregexp replace="custom.dir=${basedir}/tasks/custom" byline="true" file="${basedir}/MyApp/configuration.properties">
        <regexp pattern="custom.dir=(.*)"/>
 </replaceregexp> 
```

我想用“configuration.properties”文件中的路径替换“custom.dir”属性，但是一旦我执行我的目标，我就会将“custom.dir”属性的条目修改为

> custom.dir=c:arenaplaygroundmytestapp/tasks/custom

代替

> custom.dir=c:\arena\playground\mytestapp/tasks/custom

我应该怎么做才能使用正确的文件分隔符将路径正确写入“configuration.properties”文件。我在 windows 上，使用的 ant 是 ant 1.8 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:42:02.203

当您尝试将 WINDOW_STYLE_PATH 写入文件时，WINDOW_FILE_SEPARATOR 被识别为转义序列字符。因此，您可以在将路径写入文件之前以 unix 样式更改路径。Pathconvert 将帮助您转换路径...

```
<pathconvert property="new" dirsep="/">
    <path location="${basedir}"/>
</pathconvert>
    <echo message="${new}"/>
 <replaceregexp replace="custom.dir=${new}/tasks/custom" byline="true" file="${basedir}/configuration.properties">
        <regexp pattern="custom.dir=(.*)"/>
 </replaceregexp> 
```

# iphone - iPhone - 动态更改颜色

> ID：13581264
> 
> 赞同：0
> 
> 时间：2012-11-27T09:38:48.740
> 
> 标签：iphone, objective-c, ios, xcode, uicolor

我有一个仪表，如图所示。我可以将指针移过仪表，这没问题。问题是，我需要根据用户输入动态更改仪表中的颜色代码。

我从用户那里得到三个值。如果第一个值是 30，我需要在 0 到 30 范围内设置绿色。如果第二个值是 70，我需要设置黄色直到 70 范围内。同样对于第三个值，我需要设置最大值值并设置为红色。 ![在此处输入图像描述](../Images/02a1babe15b835f77328231fbdcc146d.png)

更改视图的颜色代码并不是什么大问题。但是，我不知道如何在特定范围内动态设置颜色（不规则形状）。

**编辑：**目前我只是在仪表上移动指针（在普通 UIView 内移动图像视图）。预期的输出应该像附加的图像，我现在没有设置任何颜色。

帮助我继续。提前致谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:22:27.797

我想最简单的方法是-

将 3 个单独的 UIView 层添加到父 UIView 层。

所有这 3 个子视图层都将具有不同的颜色 - 可以动态更改。

这些子视图只是普通的矩形。

现在 - 这是乐趣开始的地方：

您必须分别旋转和定位每个子视图 - 相应地应该如何。

它也可以动态完成，但会有点困难。

只需按照这些教程旋转 UIView：

[http://iphonedevsdk.com/forum/iphone-sdk-development/4181-rotating-an-uiimageview-around-an-arbitrary-point.html](http://iphonedevsdk.com/forum/iphone-sdk-development/4181-rotating-an-uiimageview-around-an-arbitrary-point.html)

[围绕屏幕外的一个点旋转 UIImageView？（uiImageView 的中心](https://stackoverflow.com/questions/12162374/rotate-a-uiimageview-around-a-point-off-screen-center-of-uiimageview)

[围绕一个点旋转 UIView/UITableView](https://stackoverflow.com/questions/9102632/rotate-uiview-uitableview-around-a-point)

[如何多次围绕锚点旋转视图](https://stackoverflow.com/questions/5307083/how-to-rotate-view-around-anchor-point-multiple-times)

最后 - 屏蔽父 UIView，以便所有子视图都被修剪并显示为不规则形状。

这是一个教程如何做到这一点： [如何在IOS sdk中屏蔽图像？](https://stackoverflow.com/questions/9872975/how-to-mask-an-image-in-ios-sdk)

祝你好运！

# f# - F# Interactive 比编译快

> ID：13581266
> 
> 赞同：4
> 
> 时间：2012-11-27T09:39:09.880
> 
> 标签：f#, f#-interactive

我最近注意到 F# Interactive 比编译版本快得多（在发布或调试模式下）。这是一个例子：

```
let rec fib n = if n < 3 then 1 else fib (n-1) + fib (n-2)

[<EntryPoint>]
let rec main argv = 
    let w = System.Diagnostics.Stopwatch()
    w.Start()
    fib 45
    w.Stop()
    printfn "%d" w.ElapsedMilliseconds
    System.Console.ReadLine()
    0 
```

在发布模式下编译时，运行此输出“12784”，在 F# Interactive 中运行时输出“4986”。我使用“main [||];;”在交互模式下运行它。

肯定会发生一些奇怪的事情，但我不知道是什么！

**编辑[规格]：.** NET 4 的 F# 3.0。优化代码和生成尾调用标志已设置，我正在为 x86 编译。我在 i7 950 上运行它。我正在使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:32:56.543

按照pad的建议在VS2012之外运行可执行文件，然后更改为.NET 4.5。这平衡了运行时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-29T10:50:35.643

请看我的回答：[是什么让这个 F# 在 VS2012 中这么慢？](https://stackoverflow.com/questions/14250824/what-makes-this-f-so-slow-in-vs2012/19651820#19651820)

您必须将 Fsharp.core.dll 文件添加到您的 exe 文件中以使其加载更快。

# jsf-2 - Jsf 2 PreRenderViewEvent UiViewRoot 为空

> ID：13581267
> 
> 赞同：0
> 
> 时间：2012-11-27T09:39:10.330
> 
> 标签：jsf-2

我已经为 注册了一个`SystemEventListener`，`PreRenderViewEvent`其目的是根据 ui 角色映射将一些组件设置为呈现 --> false。当一个页面第一次加载时，`UiViewRoot`我得到的`event.getSource`没有孩子，尽管它有正确的 viewId。在随后的调用中，无论何时从 page 调用事件，都会`UiViewRoot`填充 ，并且侦听器按预期工作（所需的组件从页面中消失）。

关于它为什么会这样工作的任何见解？我认为预期的行为`PreRenderViewEvent`是在调用侦听器之前构建组件树。

（ps 在 Mojarra 上运行，禁用 VDL）

# php - Php ezPdf 库 UTF - 8 种印地语字体显示为垃圾

> ID：13581274
> 
> 赞同：2
> 
> 时间：2012-11-27T09:39:36.513
> 
> 标签：php, codeigniter, ezpdf

我正在使用 ezPdf 库。当我打印存储在我的数据库（印地语数据）中的 utf-8 字体时，它显示了这种输出： ![在此处输入图像描述](../Images/ef6139d0bba3dfb7171d64d6537690dd.png)

任务名称以印地语字体 (UTF-8) 存储。它在网页上正确可见，但是当我生成 pdf 时，它显示为垃圾。

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T21:55:11.960

我认为它要求你有一种字体来显示你试图包含的字符集（即 Cyber​​bit）。然后你必须`$isUnicode = true;`在 Cpdf.php 文件中设置。这将允许字符按预期显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:11:10.987

**您必须在i18n.ini**中设置 ezFDF 库的国际化设置，请参阅[此文档](http://doc.ez.no/eZ-Publish/Technical-manual/4.x/Reference/Configuration-files/i18n.ini)

# objective-c - -drawRect、RoundCorner、Shadow 不能一起工作

> ID：13581275
> 
> 赞同：0
> 
> 时间：2012-11-27T09:39:37.483
> 
> 标签：objective-c, core-graphics, calayer

我正在定制一个 UIView。

要求：1.纹理背景2.圆角。3\. 阴影。

我已经做到了

```
- (void)drawRect:(CGRect)rect
{
// Drawing code
CGContextRef context = UIGraphicsGetCurrentContext();

//draw the background texture
UIColor *color = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mainBG"]];
CGContextSetFillColorWithColor(context, color.CGColor);
CGContextFillRect(context, rect);

//cover it with a desired Color
UIColor *startColor = [UIColor colorWithRed:50/255.f green:50/255.f blue:50/255.f alpha:0.55f];

UIColor *endColor = [UIColor colorWithRed:40/255.f green:40/255.f blue:40/255.f alpha:0.55f];

drawLinearGradient(context, rect, startColor.CGColor, endColor.CGColor);

//make round corner

UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds
                                               byRoundingCorners:UIRectCornerAllCorners                                                       cornerRadii:CGSizeMake(10.0, 10.0)];
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = self.bounds;
maskLayer.path = maskPath.CGPath;
self.layer.mask = maskLayer;

//make shadow

self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOpacity = 0.3f;
self.layer.shadowOffset = CGSizeMake(3.0f, 3.0f);
self.layer.shadowRadius = 5.0f;
self.layer.shadowPath = maskPath.CGPath;

} 
```

此代码符合前两个，但第三个没有。

似乎我对如何使用 CoreGraphics 和 Layer 有一些错误的概念或困惑，有什么建议或建议的参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:57:09.697

您应该首先创建圆形路径，然后绘制它。

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGPathRef roundPath = [UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:10.0f].CGPath;
    CGContextAddPath(context, roundPath);
    CGContextClip(context);
    //continue drawing here

    //draw the background texture
    UIColor *color = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mainBG"]];
    CGContextSetFillColorWithColor(context, color.CGColor);
    CGContextFillRect(context, rect);
    //cover it with a desired Color
    UIColor *startColor = [UIColor colorWithRed:50/255.f green:50/255.f blue:50/255.f alpha:0.55f];

    UIColor *endColor = [UIColor colorWithRed:40/255.f green:40/255.f blue:40/255.f alpha:0.55f];
    drawLinearGradient(context, rect, startColor.CGColor, endColor.CGColor);

    //draw the shadow    
    UIColor *shadowColor = [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.3f];
    CGContextSetShadowWithColor(context, CGSizeMake(3.0f, 3.0f), 5.0f, [shadowColor CGColor]);
    CGContextEOFillPath(context);

} 
```

# ios - 如何确定一个位置是否在 UIbeizerPath 内？

> ID：13581278
> 
> 赞同：0
> 
> 时间：2012-11-27T09:39:48.060
> 
> 标签：ios, cocoa-touch, core-graphics

如何确定某个点是否位于贝泽路径中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:44:06.743

```
if([beizerPath containsPoint:point])
{
    NSLog("point lies in Path");
} 
```

用这个 。希望它可以帮助你。

# c# - 根据名称从数据库中获取数据填充到组合框？

> ID：13581279
> 
> 赞同：0
> 
> 时间：2012-11-27T09:39:52.960
> 
> 标签：c#, database

当从数据库中获取数据时根据名称填写到组合框...</p>

```
SqlConnection con = new SqlConnection(@"Data Source=CENTAUR09-PC\SQLEXPRESS;Initial Catalog=Sample;Integrated Security=true");
SqlCommand cmd = new SqlCommand("Select cust_name from customer", con);
con.Open();
comboBox1.DataSource = cmd;
comboBox1.DisplayMember = cmd.ToString();
con.Close(); 
```

... 数据源和显示成员是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:47:37.857

像这样的东西：

```
DataTable dt = new DataTable();

    using(SqlConnection con = new SqlConnection(@"Data Source=CENTAUR09-PC\SQLEXPRESS;Initial Catalog=Sample;Integrated Security=true"))
    {
       SqlCommand cmd = new SqlCommand("Select id, cust_name from customer", con); 

       SqlDataAdapter adapter = new SqlDataAdapter(cmd);
       adapter.Fill(dt);

       comboBox1.DataSource = dt.DefaultView; 
       comboBox1.DisplayMember = "cust_name"; 
       comboBox1.ValueMember = "id"; 
    } 
```

**编辑：**

最好选择客户的 PK 并将其路径设置为 VlaueMember

# c++ - 更改后如何将默认名称设置为窗口？

> ID：13581280
> 
> 赞同：1
> 
> 时间：2012-11-27T09:40:06.130
> 
> 标签：c++, opencv

我有一个名为“Skylines”的窗口，我想在这个窗口内获取鼠标点击的坐标。我想将它们写在窗口的标题上，但我不明白在释放鼠标按钮后如何更改窗口的名称。

现在我已经这样做了：

```
void mouseOnSkylines(int evt, int x, int y, int flags, void* param)
{
    char sWindowName[100];
    HWND hWnd, hPar;

    switch(evt)
    {
    case CV_EVENT_LBUTTONDOWN:
        hWnd = (HWND)cvGetWindowHandle("Skylines");
        hPar = GetParent(hWnd);

        sprintf(sWindowName, "(%d, %d)", x, y);
        SetWindowText(hPar, sWindowName);
        break;
    case CV_EVENT_LBUTTONUP:
        hWnd = (HWND)cvGetWindowHandle("Skylines");
        hPar = GetParent(hWnd);

        sprintf(sWindowName, "Skylines");
        SetWindowText(hPar, sWindowName);
    }
} 
```

怎样才能做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:25:04.210

在 windows 中，您可以设置和重置 OpenCV 窗口的标题，如下所示：

```
#include<afxwin.h>
void mouse(int _event, int x, int y,int flags, void* param)
{
    static char old_name[256];

    if(_event==CV_EVENT_LBUTTONDOWN)
    {
        char* old_name_ptr = (char*)param;
        memcpy(old_name,old_name_ptr,256);

        char new_name[256];
        sprintf(new_name,"%d, %d\0",x,y);

        HWND hWnd = (HWND)cvGetWindowHandle(old_name);
        CWnd *wnd = CWnd::FromHandle(hWnd);
        CWnd *wndP = wnd->GetParent();
        wndP->SetWindowText(new_name);      
    }

    if(_event==CV_EVENT_LBUTTONUP)
    {
        char* old_name_ptr = (char*)param;
        HWND hWnd = (HWND)cvGetWindowHandle(old_name_ptr);
        CWnd *wnd = CWnd::FromHandle(hWnd);
        CWnd *wndP = wnd->GetParent();
        wndP->SetWindowText(old_name);      
    }
} 
```

# 在主函数中：

```
IplImage* img = cvLoadImage(path);

char winTitle[256] = "Skylines";

cvNamedWindow(winTitle);
cvSetMouseCallback(winTitle,mouse,winTitle);
cvShowImage(winTitle,img);
cvWaitKey(); 
```

# mysql - 这个特定的 sql 查询有什么问题？

> ID：13581282
> 
> 赞同：0
> 
> 时间：2012-11-27T09:40:21.303
> 
> 标签：mysql, sql

这个sql查询有什么问题：

```
select a.*
from samples_order a
inner join
( 
    select distinct customeremail, min(id) as id
    from samples_order group by customeremail
) as b
    on a.customeremail = b.customeremail 
    and a.id = b.id where order_site="blindsuk" 
    and order_status = "logged" limit 50, 0 
order by id desc 
```

返回错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的“order by id desc”附近使用正确的语法

```
select a.* 
from samples_order a 
   inner join (
      select distinct customeremail, min(id) as id 
      from samples_order 
      group by customeremail 
   ) as b on a.customeremail = b.customeremail and a.id = b.id 
where order_site="blindsuk" 
  and order_status = "logged" 
limit 50, 0 
order by id desc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:41:25.287

子句应该在`ORDER BY`前面`LIMIT`

所以，

```
SELECT a.*
FROM samples_order a
     INNER JOIN (
    SELECT DISTINCT customeremail
        , min(id) AS id
    FROM samples_order
    GROUP BY customeremail
    ) AS b
    ON a.customeremail = b.customeremail
        AND a.id = b.id
WHERE   order_site = "blindsuk"
    AND order_status = "logged" 
ORDER BY id DESC                           -- ORDER BY before LIMIT
LIMIT 50, 0 
```

# php - 一个统一的 SQL 查询来处理不同的选择选项值

> ID：13581290
> 
> 赞同：0
> 
> 时间：2012-11-27T09:40:51.523
> 
> 标签：php, mysql, sql

我有一个我用 PHP 制作的表格，我想用它来记录 MySQL 数据库中项目的数量。

我目前在表单中使用的选择列表。

```
<select name="fish" id="fish">
    <option value="blueFish">Blue Fish</option>
    <option value="redFish">Red Fish</option>
    <option value="pinkFish">Pink Fish</option>
    <option value="greenFish">Green Fish</option>
</select>

<select name="numFish" id="numFish">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
   <option value="6">6</option>
</select> 
```

我有一个数据库表，其中包含字段 numBlueFish、numRedFish、numPinkFish 和 numGreenFish。

我想要一个 SQL 插入/更新查询，虽然我不确定如何去做。

到目前为止，我最好的尝试是通过 POST 读取 fish 和 numFish，然后有 4 个不同的 SQL 查询，每种颜色的鱼一个。

有没有更简单的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:49:26.427

您应该首先规范化您的数据库以拥有一个包含`(Colour, FishCount)`您拥有的任何其他字段的表。您可能还希望有一个您加入到该表的颜色表，并用于填充您的可接受颜色列表。

这样您就可以编写更简单的查询，而不必在添加新的彩色鱼时重新构建数据库。例如：

```
Update FishColourCount
set FishCount = 3
where Colour = 'blue' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:55:03.410

同意 podiluska，但如果你不能标准化表格，你可以使用这样的想法

```
switch ($_POST['fish']) {
    case 'blueFish' :
    case 'redFish' :
    case 'pinkFish' :
    case 'greenFish' :
        $field = 'num' . ucfirst($_POST['fish']);
        break;
}

$value = (int) $_POST['numFish'];
$query = "UPDATE table SET {$field} = {$value}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:51:44.300

使列成为变量。例如，从“鱼”发布的变量中选择要更新的列。但正如 podiluska 提到的，您可能应该规范化表结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:47:16.700

我认为您的想法是最好的，尤其是在可读性方面...

但是，您可以尝试：

```
"UPDATE table 
 SET numBlueFish = numBlueFish + " . ($_POST['fish'] == 'blueFish' ? $_POST['numFish'] : 0) . ", 
     numRedFish = numRedFish + " . ($_POST['fish'] == 'redFish' ? $_POST['numFish'] : 0) . ", 
     numPinkFish = numPinkFish + " . ($_POST['fish'] == 'pinkFish' ? $_POST['numFish'] : 0) . ", 
     numGreenFish = numGreenFish + " . ($_POST['fish'] == 'greenFish' ? $_POST['numFish'] : 0) 
```

# c# - IExpress 停止从临时位置删除文件

> ID：13581291
> 
> 赞同：0
> 
> 时间：2012-11-27T09:40:56.457
> 
> 标签：c#, visual-studio, iexpress

我已经将 IExpress 用于自提取器。我想防止从临时位置删除文件。有没有可能？

如果没有，那么任何其他自提取器都可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T07:29:32.780

使用 IExpress似乎无法*直接*使用，尽管您可以以一种笨拙的方式解决它。还有其他存档器可以直接执行此操作；WinRAR 浮现在脑海中，但我相信还有更多。

IExpress 似乎具有三种模式：

1.  将文件提取到临时目录（似乎类似于`%temp%\IXP000.TMP`），运行安装命令，运行可选的安装后命令，删除临时目录。

2.  提取文件; 该位置必须在命令行中指定，否则将提示用户输入位置。（我看不到在向导或`.sed`文件中设置提取目录的任何方法。）

3.  创建一个`.cab`文件。（但老实说，我只是使用`makecab`或`cabarc`......）

一种解决方法是将 IExpress 存档捆绑*在*IExpress 存档中；内部存档（包含您的实际文件）是仅提取类型（2），外部存档（仅包含您的内部存档）是安装程序类型（1）。外部 IExpress 存档有一个安装命令，如：

```
cmd /c innerArchive.exe /q /t:"%temp%\persistent" 
```

这会将文件留在`%temp%\persistent`. （在`cmd /c`上执行变量扩展需要`%temp%`。）

如果您确实需要运行命令来安装某些东西，则可以将其指定为安装后命令（`%temp%\persistent`如果您正在运行内部存档中的文件，请参考）。同样，您可能需要`cmd /c`扩展它。

* * *

另一种可能更直接的方法是一个简单的批处理文件：

```
@echo off
xcopy /y * "%temp%\persistent\"
rem Execute any other commands here... 
```

然后，您只需要一个 IExpress 存档，即执行批处理文件的安装程序类型 (1)。确保你像运行它`cmd /c persist.bat`- 否则它将被执行`command.com`，这是不好的。

# jquery - jQuery Back Button - 交易隐藏页面

> ID：13581292
> 
> 赞同：1
> 
> 时间：2012-11-27T09:41:05.150
> 
> 标签：jquery, jquery-mobile

我已经构建了一个小的单个文件 jQuery Mobile 页面/站点。我的网站有以下流程：
`HomePage -> DataPage -> EditData`

**我的后退按钮有问题。**

我尝试使用`<a href="#HomePage " data-theme="b" data-icon="arrow-l" data-transition="reverse slide">Back</a>`with`href`指向`HomePage`

在这里一切正常，**除了过渡看起来像是在中间的空白页面中滚动**。一旦我删除**反向**所有工作正常，但根据我在顶部的流程，动画的方向是错误的。

**[演示在这里。](http://jsfiddle.net/Seefeld/yKwmL/)**

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:07:40.390

您应该使用`data-direction`请查看 jQM 网站上的示例。

```
<a href="docs-transitions.html" data-role="button" data-rel="back" class="ui-btn ui-btn-corner-all ui-shadow ui-btn-active ui-btn-up-b" data-transition="slide" data-direction="reverse"> 
```

您还可以从[此处查看其他示例](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-transitions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:19:50.860

从您的后退按钮中删除这部分代码：

```
data-rel="back" 
```

正因为如此，它充当了一个真正的后退按钮，并引导您到最后一页，即 SaveDate。

# java - 计算两个日期之间的天数

> ID：13581299
> 
> 赞同：0
> 
> 时间：2012-11-27T09:41:54.533
> 
> 标签：java, android, datetime, time, calendar

我有一个要求，比如计算两个日期之间的剩余天数。它对我来说很好。但问题是当我将构建发送到英国时，与印度相比，它显示的时间少了一天（例如：印度：215 天，但在英国：214 天）。我正在使用以下代码：

```
public static int noOfDays(String currDate, String tarDate){
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
    Date date1 = null;
    Date date2 = null;

    try {
        date1 = sdf.parse(currDate);
        date2 = sdf.parse(tarDate);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return (int)( (date2.getTime() - date1.getTime()) / (1000 * 60 * 60 * 24));
} 
```

获取当前日期：

```
public static String getcurrentdate()
{
    Calendar now = Calendar.getInstance();

    int month = now.get(Calendar.MONTH) + 1;
    int year = now.get(Calendar.YEAR);
    int day = now.get(Calendar.DATE);
    return day+"/"+month+"/"+year;
} 
```

我相信现在 Calendar = Calendar.getInstance(); 将只给出本地时区实例。如果它是正确的，那么它应该在任何位置给出相同的结果。但结果似乎不同。请帮我解决这个问题。

谢谢， 加内什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:08:36.490

您需要设置 Calender 类的 TimeZone。你可以这样做：

```
Calender.setTimeZone(timeZone); 
```

您可以使用以下方法获取应用程序运行位置的时区：

```
TimeZone.getDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:01:42.693

在存储和进行时间计算时，您应该将所有时间戳存储在 UTC 中。然后将时区显式设置为 UTC。
如果必须在显示器上显示本地时间，则必须在显示前立即转换 Utc 时间戳，不要将本地时间存储在数据库中。
如果您需要本地时间，则需要将额外的时区信息与您的 UTC 时间一起存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:04:03.683

使用 JodaTime 库进行日期计算并始终以 UTC 存储日期。

# c++ - OpenGL - 与未来的上下文共享现有纹理？

> ID：13581303
> 
> 赞同：2
> 
> 时间：2012-11-27T09:42:20.713
> 
> 标签：c++, c, windows, opengl

我有一个应用程序，我使用 FBO 扩展将帧绘制到纹理。

这些框架随后会显示到应用程序运行**时打开的不同窗口。**`wglShareLists`这意味着可以在创建和调用任何新窗口的 OpenGL 上下文之前创建和池化纹理。

目前我必须做`glReadPixels`，`glMapBufferRange`并将`glTexSubImage`纹理移动到不同的窗口上下文中，这是相当低效的。

关于如何改进这一点的任何想法？我是否应该在程序启动期间创建多个（在任何时候都达到最大窗口数 ~4 个）OpenGL 上下文和隐藏窗口？那会有什么开销？

或者更好的是，有没有办法在现有和**未来的**OpenGL 上下文之间共享纹理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T10:45:15.617

在 OpenGL 上下文之间共享列表也将共享封装缓冲区对象（纹理、顶点缓冲区对象、像素缓冲区对象）的所有数据，但不共享抽象集合对象（帧缓冲区对象、顶点数组对象）。在新上下文中创建任何新的命名对象之前，必须创建共享，因为在共享之前创建名称可能会导致命名空间冲突。已经创建的对象是共享的。但这当然需要预防措施，因为如果上下文 A 和 B 都具有 ID=1 的纹理会发生什么？然而，如果 A 有很多纹理而 B 没有，那么 A 的纹理名称可以转移到 B 上就好了。这就是警告。

但是，如果您只想渲染到多个窗口：完全可以在任意数量的窗口上使用单个 OpenGL 上下文，只要它们的 PIXELFORMATDESCRIPTOR 兼容。这就是 wglMakeCurrent 的 HDC 参数的含义。如果上下文严格绑定到单个窗口，则 wglMakeCurrent 只有一个 HRC 参数。

# sml - 这段代码我哪里出错了？

> ID：13581309
> 
> 赞同：0
> 
> 时间：2012-11-27T09:42:41.590
> 
> 标签：sml, smlnj

我正在尝试计算前 n 个数字的平方和。这是代码：

```
fun sumSq 0 = 0 |
    sumSq x = x + sumSq(x * x-1); 
```

我收到一个未捕获的异常溢出 [溢出] 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:55:54.173

sumSq( x * x-1) 与 sumSq( (x * x) - 1) 完全相同，而不像 sumSq( x * (x - 1))。

结果 ：

```
 if x = 0 or 1 it's ok.
   if x is greater than 1 (5 for example) 

   sumSq 5 = 5 + sumSq( 5 * 5-1 ) = 5 + sumSq(24) x will never decrease!!! 
```

你有一个无限循环

# tridion - 覆盖命名空间的最简单方法是什么

> ID：13581310
> 
> 赞同：5
> 
> 时间：2012-11-27T09:42:51.530
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

对于我的基于 ASP.Net 的 Tridion2011 驱动的站点，我需要用一些 < **custom :ComponentLink/> 替换标准生成的 <** **tridion** :ComponentLink /> 。

 **（我们假设这个自定义控件的语义是一样的，即：只需要替换命名空间部分。）

执行此操作的最简单和最少干扰的方法是什么？

我的猜测是我应该实现标准**LinkTagHandler**的替代方案。这是对的吗？

该解决方案唯一的 [infinitesimal] 缺点是它需要在 cd_deployer_conf 中显式配置所有标记处理程序。

**编辑**

找到了一个简单的简单解决方案来解决别名命名空间的非常具体的任务：

```
<TCDLEngine>
    <Properties>
        <Property Name="aspnet.tagprefix" Value="custom"/>
    </Properties>
</TCDLEngine> 
```

幸运的是，我的所有`<tcdl:../>`标签都映射到了`<custom:../>`，否则，这个小骗子将无法正常工作。

总的来说，我更赞成 Peter 和 Nuno 关于创建自定义 TCDL 标签处理程序的建议。

> （只需要克服我的懒惰:-)。

**编辑 2**

哎呀，刚刚注意到，Nuno 建议的正是上述内容！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:01:50.227

是的，我建议创建您自己的 TCDL 标记处理程序来输出您的自定义控件而不是默认控件。但是，还有另一个潜在的缺点：您需要重新发布页面/组件才能使其生效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T14:51:46.913

您可以通过在 cd_deployer_conf（在 TCDLEngine 元素中）更改前缀来轻松控制前缀。

显然，您需要注意实现该前缀的控制/标记处理程序，并重新发布应该使用它的每个页面/dcp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:17:33.453

当然，您根本不需要使用 TCDL。只需直接从您的模板中发出所需的代码。唯一需要为此使用 TCDL 的情况是，如果您有一个通用的针对多个前端平台的硬性要求。**

# c# - 输入框打开时Excel无响应，c#

> ID：13581311
> 
> 赞同：3
> 
> 时间：2012-11-27T09:42:53.493
> 
> 标签：c#, excel, excel-addins, inputbox

我正在使用 c# 构建一个 excel 插件，我希望用户选择一个范围。我已经设置了输入框，并且在作为文本输入时接收范围很好。问题是当输入框打开时 excel 无响应，用户无法转到 excel 并仅用鼠标选择范围，在我停止调试后，我收到一条消息“文件现在可用”。

这是代码的一部分

```
Excel.Range str = excelApp.InputBox("Select table range", "", _ 
Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, 8);
MessageBox.Show("range = " + this.range.get_Address()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:54:59.147

这完全是任何 Windows 用户界面的设计和标准。InputBox 函数显示一个*模式对话框*。对话框总是禁用应用程序中的其他窗口。非常烦人但重要的安全措施，以防止由于重新进入而出现问题。 [这个答案](https://stackoverflow.com/a/5183623/17034)解释了为什么模态对话框会这样。

您将不得不编写自己的非模态输入表单来解决该限制。请注意这样做时可能遇到的麻烦，如链接答案所示。您不必担心用户关闭用户界面问题，这也会杀死表单。但绝对是用户重新发布命令问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:54:42.330

看看这个：[如何使用 RefEdit 控件选择一个 excel 范围](http://blogs.msdn.com/b/gabhan_berry/archive/2008/06/12/net-refedit-control.aspx)

如果您需要，我可以更新代码。请先试一试。

# iphone - iPhone 上的 CSS 媒体查询

> ID：13581312
> 
> 赞同：1
> 
> 时间：2012-11-27T09:42:58.700
> 
> 标签：iphone, ios, cordova, media-queries

我正在为 iPhone、iPad、Android 和 BlackBerry 构建应用程序。该应用程序只需要在纵向模式下工作（即，如果您将移动设备横向旋转，则不会发生任何事情）。该应用程序必须根据分辨率以不同方式显示：

*   如果屏幕宽度 <= 240px：微模式（主要针对 BlackBerry）
*   否则，如果屏幕宽度 <= 480px：小模式（适用于普通 res 移动设备）
*   否则，如果屏幕宽度 <= 767px：中等模式（适用于 iPhone 4+ 等高分辨率移动设备）
*   否则（屏幕宽度 >= 768px）：大模式（适用于平板电脑）

尝试在浏览器上调整窗口大小时一切正常，所有元素都会根据视口大小正确调整大小和重新定位。我面临的唯一问题是 iPhone 4（iPhone 4S 和 iPhone 5 上可能会发生同样的事情）。事实上，尽管它的屏幕宽度是 640 像素，但它使用的是小模式而不是中模式。我通过以下方式指定了视口元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, target-densitydpi=device-dpi" /> 
```

有谁知道为什么会发生这种情况以及如何解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:01:13.400

iPhone 的宽度为 320 CSS 像素，从 640 设备像素缩放而来。

如果您需要以与非视网膜版本不同的方式处理它，您可以按 device-pixel-ratio:2 进行过滤。

# android - 谷歌地图不适用于谷歌播放的应用程序

> ID：13581314
> 
> 赞同：1
> 
> 时间：2012-11-27T09:43:03.310
> 
> 标签：android, map, api-key

我知道以前有人问过这个问题，但我认为我的情况几乎没有什么不同。

我有两个用于 mapview、调试和生产的键。据我所知，要创建适合 google play 的地图密钥，您首先从 eclipse 创建一个密钥库（使用导出签名应用程序对话框中的创建新密钥库选项），提取指纹并从谷歌的 api 注册页面生成 api 密钥。

然后，您可以使用此密钥导出已签名的应用程序并使用 adb 实用程序将其安装在设备上，并且 map 将起作用，而 usign debug 则不会。对？

到目前为止还不错。如果我使用 adb 或设备的包管理器安装它，地图就可以工作。但是，如果我将应用程序放在 google play 上然后从中安装，它将无法正常工作。这与我使用调试密钥时的情况相同：IOException with message: server returned: 3。

也许是重要的部分。使用不同的电子邮件（我不拥有）注册了一个游戏帐户，就像在生成“生产”地图 api 密钥时使用的那样。这可能是问题吗？

**编辑**：一些澄清。我是该应用程序的第二个开发者。第一个使用不同的密钥库和不同的 api 密钥，他用来签署应用程序以在 Play 上提交它。在我接手项目后，我创建了一个新的密钥库并使用它的指纹来获取 api 密钥。我使用这个密钥来创建签名包，如果我安装它，它应该正常显示地图。

现在，我创建了签名包（使用从密钥库生成的密钥）并安装它（adb），我可以正常看到地图（如果我使用调试密钥就不会）。但是当我在游戏中上传应用程序的更新并从那里安装时，地图就会中断。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:46:02.097

要生成指纹，请务必使用您为要上传的项目创建的相同密钥库。

# objective-c - 从 iCal 检索事件到我的 iOS 应用程序

> ID：13581316
> 
> 赞同：1
> 
> 时间：2012-11-27T09:43:10.050
> 
> 标签：objective-c, icalendar, eventkit

你好堆栈的人！

我正在寻找将事件从 iCal 导入 iOS 应用程序的任何教程（？）

找不到任何东西，我只能找到相反的方法，我的意思是将 iOS 应用程序中的事件添加到 iCal ... :(

我找到了这个不错的教程：`http://neilang.com/entries/using-eventkit-in-ios/` 我知道我必须使用 EventKit.framework 但这并不能帮助我很好地开始......

您对此有任何教程的想法吗？会很高兴使用它；）

有一个美好的一天/早上/晚上/下午。;)

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:57:08.030

我很抱歉，但 ！我找到了答案；）

这是代码：

```
EKEventStore *eventStore = [[EKEventStore alloc] init];

    NSDate *startDate = [NSDate date];
    NSDate *endDate   = [NSDate distantFuture];
    //NSArray *calendarArray = [NSArray arrayWithObject:defaultCalendar];

    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:startDate
                                                                 endDate:endDate
                                                               calendars:nil];

    NSArray *events = [eventStore eventsMatchingPredicate:predicate];

    if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        /* iOS Settings > Privacy > Calendars > MY APP > ENABLE | DISABLE */
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
         {
             if ( granted )
             {
                 NSLog(@"User has granted permission!");
                 NSLog(@"events %@", events);

             }
             else
             {
                 NSLog(@"User has not granted permission!");
             }
         }];
    } 
```

这是要求用户允许应用程序获取日历（默认情况下所有日历）

```
[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) 
```

# wpf - MVVM：模型状态更改时通知视图

> ID：13581318
> 
> 赞同：2
> 
> 时间：2012-11-27T09:43:19.047
> 
> 标签：wpf, mvvm, mvvm-light

这是关于 MVVM 模式最佳实践的具体问题。我正在使用 MvvmLight 库。它是这样的：我的模型，比如“Flight”，实现了一些可以通过方法启动、暂停和停止航班的业务逻辑。无论是播放停止还是暂停飞行，每种方法都会执行其逻辑以实现功能。一个重要的变化变量是状态枚举，它指示飞行状态 - 播放、停止或暂停。如前所述，状态变量（和属性）在模型中定义。另一方面，飞行类由 ViewModel 类包装，该类包含一个 Status 属性，该属性包装了飞行模型中的状态变量，以及连接到飞行模型播放停止暂停方法的 RelayCommands。

问题就从这里开始：当我通过视图执行其中一个命令时，它会执行模型中的方法，因此状态变量本身会直接更改，但它只会在模型中更改.. ViewModel 中的状态属性不会知道包装变量是否已更改，因为它是直接更改的...这意味着如果某些视图元素绑定到状态属性，它不会在命令执行时更改..

我知道解决这个问题的几种方法，但我要求一个不会破坏 MVVM 模式的公平解决方案（比如在 Model 的飞行类中使用 INotifyPropertyChanged ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T09:50:58.210

这类问题没有灵丹妙药的解决方案。您的 ViewModel 和 Model 需要以允许信息传播到 View 的方式设计；如果这是不可能的，那么设计就有缺陷，需要改变。

以下是您应该研究的几件事：

*   如果模型的状态修改方法被记录为同步执行，则在 ViewModel 上创建将操作转发给模型的方法，然后立即查询其状态。使用这些方法来实现`RelayCommand`s。
*   如果模型的方法不是同步的，那么模型的客户端应该有一些机制可以在方法完成时通知他们。这可以通过延续回调、事件或者甚至使用`INotifyPropertyChanged`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T09:55:58.027

如上所述，您的 ViewModel 应按以下方式包装 Model：

```
class Model
{
   public int State{get;private set;}
   public void Fly()
   {
      State=1;
   }

   public void Stop()
   {
      State = 2;
   }
}

class ViewModel : ViewModelBase
{
   int State{ get{ Model.State;}}
   ...
   OnFlyCommand()
   {
      Model.Fly();
      NotifyPropertyChanged("State");
   }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T09:54:30.273

您可以在 ViewModel 对 Model 执行方法之后调用 OnNotifyPropertyChanged。这不是很优雅，但是如果不重构 Model 类，您将无法变得更简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T09:49:45.527

最佳实践是从命令执行调用 viewmodel，而不是从 viewmodel 调用模型更改，然后将 viewmodel 状态标记为已更改

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T09:57:05.760

你知道命令执行后哪些属性发生了变化吗？我的意思是，您能否明确提出特定属性集的更改通知，或者修改后的属性集正在更改？

在前一种情况下，您调用命令并显式引发这些属性的事件：

```
command.Execute();
NotifyPropertyChanged("PropA");
...
NotifyPropertyChanged("PropN"); 
```

在第二种情况下，您可以使用反射为类的每个属性引发更改通知事件，`Model`也可以使用更智能的解决方案，如[PostSharp.Domain.Toolkit](http://www.sharpcrafters.com/blog/category/Toolkits.aspx)。

# php - mysql查询将值分配给来自不同列的相同变量

> ID：13581325
> 
> 赞同：2
> 
> 时间：2012-11-27T09:43:50.410
> 
> 标签：php, mysql, sql

我有一个有很多列的表，但有两个主要列，称为`District`和`State`。我的sql查询如下。

```
$query = "SELECT * FROM table WHERE District = '" . $var . "' ORDER BY Date DESC"; 
```

此查询从区列返回我的数据。

现在这就是我想要的。在某些行中，`District`列是空的，所以在这种情况下，我希望查询从`State`列中提取数据。那可能吗？

可以在mysql查询中完成还是我必须在php中写一些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:46:54.157

你说的空是什么意思？如果是，`NULL`那么你应该使用`COALESCE`

```
SELECT *, COALESCE(District, State) NewDistrict
FROM... 
```

但如果它是空的`''`。然后

```
SELECT *, IF(District = '', State, District) NewDistrict
FROM... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:49:52.797

```
SELECT * 
FROM table 
WHERE District = '$var' 
  OR (District='' AND State='var') 
ORDER BY Date DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T09:49:20.827

```
$query = "SELECT * FROM table WHERE District = '" . $var . "' OR State = '" . $var . "' ORDER BY Date DESC"; 
```

# php - 多站点系统的数据库结构 - 数据库和 PHP

> ID：13581332
> 
> 赞同：1
> 
> 时间：2012-11-27T09:44:17.570
> 
> 标签：php, mysql, database, database-design, architecture

我正在使用的系统结构如下。鉴于我打算使用 Joomla 作为基础。

![在此处输入图像描述](../Images/db8e89d8d73d799ec6b2d7367d34ff27.png)

a(www.a.com),b(www.b.com),c(www.c.com) 是允许用户搜索预订的搜索门户。

x(www.x.com),y(www.y.com),z(www.z.com) 是用户进行预订的酒店。

*   www.a.com 的用户只能搜索 www.x.com 中的预订
*   www.b.com的用户只能搜索www.x.com,www.y.com的预订
*   www.c.com的用户可以搜索www.x.com、www.y.com、www.z.com上的所有预订

所有 a、b、c、x、y、z 都运行相同的系统。但他们应该有单独的域。因此，根据我的发现和研究架构，API 集成了所有数据库调用。

鉴于此处仅显示了 6 个实例（a、b、c、x、y、z）。最多可以有 100 个不同的搜索组合。

我的问题，

我应该为整个系统维护一个数据库吗？如果是这样，如果需要，我该如何拔出一个实例（例如：从系统中删除 www.a.com 或从系统中删除 www.z.com）？既然我用的是mysql，会不会因为记录的数量而对系统来说很麻烦？

如果我为每个实例维护单独的数据库，我该如何进行搜索？如何将所需的记录整合到一起并进行搜索？

是否有不同的数据库方法可以使用而不是上面提到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:57:23.507

您描述的问题是“多租户” - 这是一个相当棘手的问题，但幸运的是，其他人已经写了一些[有用的方法](http://msdn.microsoft.com/en-us/library/aa479086.aspx)。（虽然链接指向 Microsoft，但它适用于大多数 SQL 环境，但详细信息除外）。

在您的情况下，权衡是：

*   您酒店的数据是否适合单一模式？他们的“空缺”记录是否具有相同的字段？
*   会有多少家酒店？3 个独立的数据库有点易于管理；30 可能不是；300绝对不是。
*   数据库将增长到多大？有多少空缺记录？
*   数据结构随时间变化的可能性有多大？一家酒店需要改变而其他酒店不需要的可能性有多大？

到目前为止，最简单的管理和开发是“单一数据库”模型，但前提是数据在模式中具有适度的同质性，并且只要您能够以合理的性能查询数据。我不担心在 MySQL 中放置大量记录——它的扩展性非常好。

在这样的设计中，您可以在查找表中将“门户”映射到“酒店”：

门户酒店访问

```
PortalID   HotelID
-----------------
A          X
B          X
B          Y
C          X
C          Y
C          Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:41:49.487

我可以建议两种方法。选择哪一个取决于有关整个系统的一些附加信息。事实上，主要问题是您的系统是否可以从消费者的角度（a、b、c 等）冒充（在法律上自行替代）任何数据提供者（x、y、z 等） .

**集中式数据库**

第一个实际上是基于您使用集中式 API 的原始方案。它意味着一个单一的搜索引擎，从数据源收集所需的数据，将其聚合到自己的数据库中，并提供给数据消费者。

如果数据源的数据表示方式不同，这很可能是一个更可取的解决方案，因此您需要对其进行预处理以保持一致性。此外，此变体可保护您的客户免受连接中可能出现的问题，即如果源站点之一在短时间内离线（我认为这甚至可能长达几个小时而不会对预订服务实际产生很大影响），您仍然可以处理对离线站点的请求，并将所有新文档存储在中央数据库中，直到问题解决。另一方面，这意味着您应该在数据库和每个数据源站点之间提供某种双向同步。此外，集中式数据库的创建首先应该考虑到可靠性，因此它似乎应该是分布式的（最好是在不同的数据中心上）。

因此 - 这种方法可能会提供最佳的用户体验，但需要足够的努力才能实现健壮的实施。

**多个本地数据库**

如果每个数据提供者都运行自己的数据库，但所有这些（包括后端 API）都基于单一标准，则您可以消除将其数据复制到中央数据库的需要。当然，中心点应该保留，但它将只承载一个没有 DB 的中间层逻辑。该层实际上是一个将 (x, y, z) 与适当的 (a, b, c) 绑定的 API - 这是一个配置，仅此而已。每个消费者站点都将托管一个从您的中心点加载的小部件（可以只是一个 javascript 或成熟的 Web 应用程序），其中嵌入了适当的设置。

小部件将直接请求所有指定的后端，并将它们的结果汇总到一个列表中。

这种变体与当今大多数 Web 应用程序的工作方式非常相似，实现起来更简单，但更容易出错。

# html - 水平居中无序列表

> ID：13581335
> 
> 赞同：0
> 
> 时间：2012-11-27T09:44:29.410
> 
> 标签：html, css, list, alignment, unordered

我无法将我在一个非常基本的“即将推出”页面上的水平无序列表*居中。*

您可以点击[该站点的链接](http://deangrobler.com/)并查看代码等。您会注意到带有 3 个社交图​​标的水平列表相对于大标题和电子邮件地址并不完全居中，似乎有点向右浮动。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:47:09.717

设置`padding-left:0;`在您的`ul`元素上。

这将覆盖`-webkit-padding-start: 40px;`Google Chrome 正在偏移中心位置的默认浏览器。其他浏览器默认设置可能会有所不同。

在谷歌浏览器中测试，这解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:50:55.700

从`.social_list`元素中删除左侧填充。

```
.social_list {
  padding: 0;
} 
```

Firebug 使解决此类问题变得更加容易，因为它会在您检查 DOM 时向您显示元素的填充和边距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:54:07.960

@Curt 答案是正确的，但是您需要重置元素，因此您实际上正面临这个问题

使用它来重置浏览器默认值，我总是使用它而不是`CSS Reset`样式表..

```
* {
  padding: 0;
  margin: 0;
} 
```

比你不需要为你在网页上使用`padding-left: 0;`的每一个声明，因为浏览器为某些元素设置了默认样式，因此你面临这个问题`ul`

# google-chrome - 是什么导致我们的日志中出现这些 /cache/xxx 条目？

> ID：13581341
> 
> 赞同：1
> 
> 时间：2012-11-27T09:44:42.057
> 
> 标签：google-chrome, logging, browser

我们有一个路径为“/some/url”的有效 url，但我们在日志中遇到错误，原因是某些东西正在尝试访问：“/some/url/cache/526402928a7041a5c61ae7da95c679c3”（无效的 url）。

'/some/url' 部分有所不同，但客户端始终尝试获取 './cache/xxx'。

有谁知道为什么客户端试图检索这个 url - 哪个组件/插件导致了这个？

用户代理是：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11

或者

Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, 像 Gecko) Chrome/23.0.1271.64 Safari/537.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:58:44.450

在以下位置找到原因： [http ://code.google.com/p/chromium/issues/detail?id=132059](http://code.google.com/p/chromium/issues/detail?id=132059)

可能由故障扩展引起：“Ginyas Browser Companion”的“Browser Companion Helper”部分

# android - 从 onLongclickListener 启动 Activity 时出错

> ID：13581345
> 
> 赞同：0
> 
> 时间：2012-11-27T09:45:02.523
> 
> 标签：android

我从 Imageview 的 onlongclicklistener 开始我的活动，但是当我按下 imageview 长应用程序时停止工作

这是我的代码

```
 img1.setOnLongClickListener(new OnLongClickListener() {
        public boolean onLongClick(View v1) {
            if(vibration){
            v.vibrate(300);
            }
            Intent intent=new Intent(MainActivity.this,settings.class);
            startActivity(intent);
            finish();
        return false;
        } 
```

这是我的日志

![日志](../Images/3079ef65d24d9bd0a45104686fb5af54.png)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:16:28.063

如果您正在消费（做某事）长按，您需要**`true`**从您的`onLongClick()`方法返回，而不是`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:47:12.057

`finish();`调用意图后删除该方法。并将您的代码更改为这样

```
img1.setOnLongClickListener(new OnLongClickListener() {
    public boolean onLongClick(View v1) {
        if(vibration){
        v.vibrate(300);
        }
        Intent intent=new Intent(MainActivity.this,settings.class);
        startActivity(intent);
    return false;
    } 
```

# python - Django ORM - .update(...) 带有额外的(...) 和 F(...)

> ID：13581346
> 
> 赞同：2
> 
> 时间：2012-11-27T09:45:04.897
> 
> 标签：python, django, django-models, django-queryset, django-orm

我想做一个 sql 查询来更新 Django 站点中的许多模型。我想将一个字符列/字段更改为基于 id 和一些文本，在 MySQL（这个站点是）中，我会用`"UPDATE table SET blah = 'prefix'||id||'suffix'"`.

我在 Django 中的第一次尝试是：

```
Model.objects.update(blah='prefix'+F('id')+'suffix') 
```

但这试图给 MySQL 一个`+`，而不是一个`||`运算符。

我的下一次尝试是这样使用`.extra(…)`：

```
Model.objects.extra(select={'newvalue':'"prefix"||id||"suffix"'}).update(blah=F('new_value')) 
```

但是`F(…)`无法从选择中看到新字段。

有没有办法在不分解为原始 SQL 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:09:05.233

没有。Django 的 ORM 是多数据库编译器。它没有附带自定义数据库功能，例如这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:49:52.930

如果我正确理解您的问题，这可能会有所帮助：

```
blah = '%s %s %s' %(prefix, id, suffix)

Model.object.update(blah=blah) 
```

# javascript - 奇怪的jQuery动画行为

> ID：13581351
> 
> 赞同：1
> 
> 时间：2012-11-27T09:45:31.307
> 
> 标签：javascript, jquery, html, css

该网站使用了一个“黑色不透明度”过滤器：

```
 /* Body black hover */
    $(document).ready(function() {
        $("#bg_hover").stop();
        $("#bg_hover").animate({ opacity: 0.5 }, 1000);
        $("body").hover(function() {
            $("#bg_hover").stop();
            $("#bg_hover").animate({ opacity: 0.5 }, 1000);
        }, function( ) {
            $("#bg_hover").stop();
            $("#bg_hover").animate({ opacity: 0 }, 1000);
        });
    }); 
```

我遇到的问题是，当用户进入“SOBRE NOSALTRES”（单击上方菜单进入页面）时，我想制作一个小动画。

正如您所看到的，它的动画效果“很好”，但根本没有，有时如果您转到“PRODUCTES”并返回“SOBRE NOSALTRES”，动画会停留在 98% 的宽度。有点奇怪，为什么会这样？

这是错误的屏幕截图： [http ://webkunst.comeze.com/test/3.png](http://webkunst.comeze.com/test/3.png)

这是我用来在 NOSALTRES 页面上制作动画的脚本：

```
 <script>
        $(document).ready(function() {
            $("#bg_hover").stop();
            $("#bg_hover").animate({ width: '80%', opacity: 0.9, left: '10%', right: '10%' }, 800);
            $('li#nosaltres').addClass('active')
        });
        $("body").hover(function() {
            $("#bg_hover").stop();
            $("#bg_hover").animate({ opacity: 0.9 }, 500);
        }, function( ) {
            $("#bg_hover").stop();
            $("#bg_hover").animate({ opacity: 0 }, 500);
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:04:47.343

当您将*鼠标悬停*在加载**PRODUCTES**页面`<body>`时会出现问题，因为您在第一行调用停止*所有*动画，包括将宽度减小到的动画。**`$("#bg_hover").stop();``$("body").hover(function() {});`*`80%`***

 ***我可以通过单击**SOBRE NOSALTRES**来重现该问题，然后将鼠标快速移入和移出浏览器窗口。

`<body>`在初始调整大小完成之前，我不会将悬停效果添加到`80%`，例如通过添加一个匿名函数来在动画完成后调用。

```
$("#bg_hover").stop().animate({ width: '80%', opacity: 0.9, left: '10%', right: '10%' }, 800, function() {
    $('li#nosaltres').addClass('active');

    $("body").hover(function() {
        $("#bg_hover").stop().animate({ opacity: 0.9 }, 500);
    }, function( ) {
        $("#bg_hover").stop().animate({ opacity: 0 }, 500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:50:56.973

不要把它分成两行：\

```
$("#bg_hover").stop();
$("#bg_hover").animate({ width: '80%', opacity: 0.9, left: '10%', right: '10%' }, 800); 
```

相反，使用：

```
$("#bg_hover").stop().animate({ width: '80%', opacity: 0.9, left: '10%', right: '10%' }, 800); 
```***

# java - 关于投射对象括号的问题

> ID：13581353
> 
> 赞同：5
> 
> 时间：2012-11-27T09:45:54.197
> 
> 标签：java, object, casting

我注意到有两种方法可以转换对象（不同之处在于外括号的位置）：

```
 1\. SimpleType simpleType = ((SimpleType) (property.getType()));
 2\. SimpleType simpleType = ((SimpleType) property).getType(); 
```

他们在做同样的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:47:25.437

> 他们在做同样的事情吗？

**不**，他们不是。

*   第一个是将返回的值转换为 `property.getType()`to `SimpleType`。（*调用*在*Casting*之前完成）
*   第二个是首先将您的目标`property`转换为`SimpleType`然后`getType()`在其上调用该方法。（*铸造*是在*调用*之前完成的）。

* * *

也可以从*括号*的优先级来理解。由于它具有最高优先级，因此将首先对其进行评估。

**第一种情况：-**

所以，在`((SimpleType) (property.getType()));`： -

```
(property.getType()) 
```

首先评估，然后执行铸造。实际上，您实际上并不需要括号。（与操作员的结合比操作员`property`更紧密）。因此，调用将始终在强制转换之前完成。除非您在以下情况下强制它反转：-`dot (.)``cast`

**第二种情况： -**

在`((SimpleType) property).getType()`： -

```
((SimpleType) property) 
```

首先评估，然后调用完成。因为，现在您已将括号括`property`在括号内，因此它与运算符的*绑定*更紧密，因为*括号*`cast`强制执行更高的优先级。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T09:47:16.263

他们正在做两件完全不相关的事情：第一是向下转换结果，`getType()`第二是向下转换`property`变量。鉴于左侧的类型，第一个看起来像您需要的那个。请注意，在第一个示例中，您有额外的括号，这就足够了，并且这是惯用的写法：

```
SimpleType simpleType = (SimpleType) property.getType(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T09:47:40.077

它们是不相同的。

*   第一个将结果转换为`getType`to `SimpleType`。
*   第二个转换`property`为`SimpleType`并调用`getType`它，但结果`getType`不转换为`SimpleType`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T09:48:09.070

他们完全在做不同的事情。它们根本不一样。

```
 1\. SimpleType simpleTypee = ((SimpleType) (property.getType())); 
```

这首先调用属性的 getType，然后将返回的 Object 转换为 SimpleType

```
 2\. SimpleType simpletype = ((SimpleType) property).getType(); 
```

这首先将属性转换为 SimpleType，然后在 SimpleType 上调用 getType

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T09:49:01.857

不，他们没有做同样的事情。

```
SimpleType simpleTypee = ((SimpleType) (property.getType())); 
```

首先`property.getType()`将调用并将返回的对象`property.getType()`转换为`SimpleType`

在第二种情况下

```
SimpleType simpletype = ((SimpleType) property).getType(); 
```

首先该对象`property`将被转换为`SimpleType`，然后`getType()`将在该新转换的对象上调用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-27T09:49:10.100

他们正在做其他答案中详述的不同事情。你也可以这样做

```
SimpleType.class.cast(property.getType());
SimpleType.class.cast(property).getType(); 
```

取决于您实际想要投射的内容。属性或 getType() 的结果。我更喜欢这种语法，因为它更明确，更容易看...*

# delphi - Delphi Form的OnClose事件中如何使用MessageDlg？

> ID：13581354
> 
> 赞同：3
> 
> 时间：2012-11-27T09:45:56.450
> 
> 标签：delphi, dialog, delphi-xe2

当通过单击“交叉按钮”或 Alt + F4 关闭我的表单时，我希望用户询问他是否要关闭应用程序。如果是，我将终止申请，否则无事可做。我在表单的 onclose 事件上使用以下代码

```
procedure MyForm.FormClose(Sender: TObject; var Action: TCloseAction);
var
  buttonSelected : integer;
begin
  buttonSelected := MessageDlg('Do you really want to close the application?',mtCustom, [mbYes,mbNo], 0);
  if buttonSelected = mrYES then
  begin
    Application.Terminate;
  end
  else
  begin
    //What should I write here to resume the application
  end;

end; 
```

无论我单击是或否，我的应用程序都将终止。我应该怎么做才能在没有点击确认框时，我的应用程序不应该终止。我应该如何改进我的上述功能？我是否使用正确的表单事件来实现此功能？请帮忙..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T09:53:47.923

如果您键入，窗口将保持打开状态

`Action := caNone;`

在你的其他部分

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T09:54:12.400

```
procedure TForm1.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
var
  buttonSelected: integer;
begin
  buttonSelected := MessageDlg('Do you really want to close the application?', mtCustom, [mbYes, mbNo], 0);
  if buttonSelected = mrYES then
  begin
    CanClose:=true;
  end
  else
  begin
    CanClose:=false;
  end;
end; 
```

或如@TLama 建议的那样，简化：

```
procedure TForm1.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  CanClose := MessageDlg('Do you really want to close the application?', mtCustom, [mbYes, mbNo], 0) = mrYES;
end; 
```

# linux - VirtualBox VM 中的 VirtualBox VM

> ID：13581358
> 
> 赞同：3
> 
> 时间：2012-11-27T09:46:02.113
> 
> 标签：linux, windows, virtual-machine, virtualbox

我在运行 Windows 7 (1) 的 Mac 上有一个 VirtualBox。问题是 Windows 7 的环境可以使用 Linux (2) 启动 VirtualBox VM，它会导致 VirtualBox (1) 崩溃。有没有人在另一个 VirtualBox VM 中运行 VirtualBox VM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:14:01.680

简单...我刚刚在Mac中添加了VirtualVM（2），并通过网络连接它们...

# web-services - 使用 CodeIgniter 创建 Web 服务

> ID：13581361
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:04.330
> 
> 标签：web-services, codeigniter

我使用 CodeIgniter 1.7 框架来制作我的网站。另一个团队为 iPhone 做移动版本。所以其他团队要求我做一个网络服务进行身份验证。他们告诉他们会寄给我：

```
POST REQUEST 
Input : login , password, push_token
if failure authentification -> Output HTTP : error code 0
if success -> Output XML :
<DATA>
 <User id='id_user' title='..' first_name='' last_name='' email='' postal='' country_id=''/> 
</DATA> 
```

基本上我有这个功能进行身份验证：

```
function check_login($username="", $password="")
{
$username = $_POST['username'];
$password = $_POST['password'];
...
...
} 
```

我正在查看这篇文章[Codeigniter Web 服务](https://stackoverflow.com/q/9696009/874800)，但我不明白它是如何工作的，因为我是 Web 服务的新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:02:56.507

我会考虑使用 json 作为唯一输出，其中一个值是`TRUE`或`FALSE`取决于成功。它更容易处理，并且只需要您的网站使用 utf8。

如果您有`check_login()`回报`TRUE`，请将其作为成功的条件。

回复示例：

```
/* Class etc. */

function do_login() {
    $arr_json = array('success' => FALSE);
    if ($this->login_library->check_login()) {
        $arr_json['success'] = TRUE;
        $arr_json['user_id'] = $this->login_library->user_id;
    }
    echo json_encode($arr_json);
} 
```

`login_library`只是您登录的图书馆的一个例子。他们收到的回复只需要通过`json_decode()`. 然后只需检查密钥`success`是否`TRUE`存在。

如果需要，可以使用额外的键或类似键，您可以通过[**form_validation**](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)`error_message`运行所有后置值。然后你也可以在之前有。[](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)**`$arr_json['error_message'] = trim(validation_errors('', "\n"));``echo`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:51:21.313

你一定要看看 Phil Sturgeons CodeIgniter Rest Server：

> [https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

有一个很好的文档。他还对此进行了截屏：http: [//philsturgeon.co.uk/blog/2011/03/video-set-up-a-rest-api-with-codeigniter](http://philsturgeon.co.uk/blog/2011/03/video-set-up-a-rest-api-with-codeigniter)

此外，您可以看看这篇文章，亚当惠特尼解释了他的方法：

> *使用 CodeIgniter 构建 RESTful 服务*
> 
> [http://adamwhitney.net/blog/?p=707](http://adamwhitney.net/blog/?p=707)**

# android - 无法使用反射访问 MediaController 字段

> ID：13581362
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:05.550
> 
> 标签：android, reflection, mediacontroller

我正在尝试使用反射的概念来更改 MediaController 类中存在的 FastForward 按钮的可见性。

下面是我的代码片段。

```
package com.example.reflection;

import java.lang.reflect.Field;
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.ImageButton;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class MainActivity extends Activity {

    private VideoView videoView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Class <? > aClass;

        try {

            MediaController controller = new MediaController(this);

            aClass = Class.forName("android.widget.MediaController");

            Field forwardButton = aClass.getDeclaredField("mFfwdButton");
            forwardButton.setAccessible(true);

 NPE--->>   ImageButton button = (ImageButton) forwardButton.get(controller);

            if (null == button) Toast.makeText(this, "Button is null", Toast.LENGTH_LONG)
                .show();
            else button.setVisibility(View.INVISIBLE);

            videoView = (VideoView) findViewById(R.id.videoView);
            videoView.setVideoPath(Environment.getExternalStorageDirectory() + "/Video/NeYo.flv");
            videoView.setMediaController(controller);
            videoView.requestFocus();

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }

    }
} 
```

获取 ImageButton 时出现 NullPointerException。

有人可以指出我犯的错误吗？

谢谢

**无论如何，我得到了这个问题的答案。**

mFfwdButton 仅在 View 膨胀时被实例化。这就是为什么我得到一个空值。甚至在 MediaController 已附加到 VideoView 之前，我就试图获取该变量。

我遵循以下方法并且它有效。这可能不是生产环境中的最佳实践，但下面的代码片段对我有用。

```
@Override
protected void onResume() {
    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            ImageButton button;
            try {
                button = (ImageButton) forwardButton.get(controller);

                if (null == button) Toast.makeText(MainActivity.this, "Button is null",
                Toast.LENGTH_LONG).show();
                else button.setVisibility(View.INVISIBLE);
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }, 50);
    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:41:17.050

`mFfwdButton`仅在视图膨胀时实例化。所以你得到一个空值。所以我想在活动显示给用户之前你不能使用它。您甚至在将 mediacontroller 附加到 VideoView 之前尝试获取变量

尝试在 OnResume 中延迟发布可运行文件

# .net - 将数据附加到文件末尾时拒绝访问

> ID：13581367
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:19.887
> 
> 标签：.net, asynchronous, windows-8, windows-runtime, async-await

我编写了一个点击事件处理程序来将数据附加到文件的末尾，步骤如下：

1.  使用 `GetFileAsync`方法获取文件；
2.  使用`WriteAsync`方法将数据写入文件末尾；
3.  加载文件内容并显示。

但是如果我点击按钮太快，我会收到异常

> 拒绝访问

我认为这是由异步操作引起的，有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:34:14.073

您可以在函数上使用 lock 语句来不允许任何操作，直到加载文件的内容并显示它

# debugging - 通过 VirtualBox 仅主机网络进行 Windows 8 内核调试

> ID：13581369
> 
> 赞同：2
> 
> 时间：2012-11-27T09:46:33.783
> 
> 标签：debugging, windows-8, kernel, virtualbox

我的设置是：Windows 7 主机系统、VirtualBox/Windows 8 32 位目标系统（被调试者）、仅主机网络连接两者。从 Windows 8 开始，声明可以通过网络设置内核调试 --- 在这种情况下似乎是一个不错的选择。因此，我验证了 NIC 是否受支持（http://msdn.microsoft.com/en-us/library/windows/hardware/hh830880 --- Intel 822540 DevID 100E 包含在列表中）并按照[http:/中的说明进行操作/msdn.microsoft.com/en-us/library/windows/hardware/hh439346(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh439346(v=vs.85).aspx)。不成功，windbg 说：调试对象未连接，无法破坏目标系统。（由于windbg检测到目标系统重启，所以有一些通信。）

所以问题是：有人试过吗？成功了吗？我错过了什么重要的事情？我应该求助于配置串行连接还是安装 VirtualKD？

# javascript - 我们怎样才能转到第 1 页、第 2 页和第 3 页

> ID：13581370
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:35.063
> 
> 标签：javascript, jquery

我正在尝试使用 JavaScript (PhoneGap) 开发移动 Web 应用程序，问题如下：

我有 3 页 javascript 将动态创建页面中包含的 html，第一页包含 butoon 1

  第二页包含按钮 2

  第三页包含按钮 3

我们点击按钮一我们转到第二页，点击第三页上的按钮 2 通行证。

一开始一切顺利，但是如果我回到第1页，我会转到第二页，程序直接显示第1页，而不经过前两个。

我想因为，我应该删除以前的事件，或者缓存你说的内容？

第 1 页

```
$('#header-left-container').prepend(results.rows.item(i).LibelleTypeTravail +"" +
                "<br>" +
                "<img src='../js/images/add.png' name="+results.rows.item(i).IdTypeTravail+" >" +
                "<textarea rows='6'  cols='60' id='"+results.rows.item(i).IdTypeTravail+"'   name='"+results.rows.item(i).LibelleTypeTravail+"'> </textarea><br><br>" );

 $('img').live('tap',function(e)
         {

     //-------------Pass param with localstorage

         window.localStorage.setItem("id_grp", id_grp_tr);
         window.localStorage.setItem("id_travail", e.target.name);

            $.mobile.changePage('../prestation_html/list_rubrique.html' , {role: 'dialog', transition: 'flip'});
         }
         ); 
```

第2页

```
$('#lbtn').append('<input type="button" value="Consulter" onclick="go()"  id="Consulter">');

function go()
    {

        if(s == 0)
            {
            var sel_id_rub = $('input[name=opt1]:checked').attr('id');//ID of Rubrique

             window.localStorage.setItem("id_rub", sel_id_rub);       //Id Rubrique
        //alert(sel_id_rub);

             liste_Phrase();

            } 
```

第 3 页

```
 $('#lbtn').append('<input type="button" value="Ajouter"  id="ajouter">');

$('#ajouter').live('click',function(e)
         {
        // alert( $("label[for='" + ( $('input[name=opt1]:checked').attr('id') ) + "']").text() );
     window.localStorage.setItem("phrase", $("label[for='" + ( $('input[name=opt1]:checked').attr('id') ) + "']").text());       //Id Rubrique

     $.mobile.changePage('../prestation_html/etape'+window.localStorage.getItem("id_grp")+'.html');
         }
         ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:02:17.710

简单的方法是使用在现代浏览器中利用 HTML5 History/State 的插件：

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

# php - php邮件功能问题

> ID：13581373
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:46.097
> 
> 标签：php

成功注册后，我正在尝试向用户发送电子邮件。所以下面是我的 .php 代码。

```
$to = $email;                       
$subject = "Signup | Verification";
$message = "Congratulation $f_name $l_name you have been successfully registered. Please 
click the link to active your account.\r\n";
$message .= "http://www.maaks.fr/hotel/verify.php?email=$email&hash=$hash\r\n";

$from = "noreply@yoursite.com";
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-rype: text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding; 7bit\r\n";
$headers = "From:" . $from . "\r\n";

$sentmail = mail($to,$subject,$message,$headers);                   
if($sentmail)
{
header("Location: thankyou.php?member=successfully");
exit();
} 
```

它不会向用户发送电子邮件。我检查了一下，如果**$sentmail 没**问题，那就是**感谢**页面。但有趣的是，它没有发送电子邮件就进入了**感谢页面。**

有什么我忘记了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:49:12.270

如果消息被接受传递，该[`mail()`](http://php.net/manual/en/function.mail.php)函数返回`true`，这并不意味着消息将被传递。

从[手册](http://php.net/manual/en/function.mail.php)：

> 如果邮件被成功接受传递，则返回 TRUE，否则返回 FALSE。
> 
> 重要的是要注意，仅仅因为邮件被接受交付，并不意味着邮件实际上会到达预定目的地。

您的邮件可能被收件人垃圾邮件过滤器阻止或直接进入垃圾文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:04:04.277

您的电子邮件中有一个小错字，但我认为它不会解决您的问题。

您指定了 Content-rype，您应该将其更改为 Content-type ...

但同样我不认为这会解决你的问题。

# javascript - 在 JQuery FileUpload 中删除成功返回

> ID：13581374
> 
> 赞同：1
> 
> 时间：2012-11-27T09:46:47.283
> 
> 标签：javascript, jquery, file-upload, jquery-events

我正在使用[blueimp 的 Jquery 文件上传插件](http://blueimp.github.com/jQuery-File-Upload/)。对于添加文件，有许多不同的回调。例如：

```
$('#fileupload').bind('fileuploaddone', function (e, data) {/* ... */}) 
```

我想绑定一个回调，告诉我文件是否已成功删除，但我已经搜索了文档，但找不到任何看起来像这样做的东西。有人知道我该怎么做吗？

更新：我应该说上面的代码只返回上传文件。删除文件不返回任何事件。这就是我想尝试并在 bluimp 的源代码中实现的。

回调的源代码在这里[https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.fileupload-ui.js](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.fileupload-ui.js)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:34:01.533

总结前面的评论，回调函数是处理通过事件从服务器接收到的数据的函数`fileuploaddone`。因此，您将拥有这样的代码：

```
$('#fileupload').bind('fileuploaddone', callbackfunc); 

// Your callback function
function callbackfunc(e, data) { 
    /* your code, like : if (data.kind === "error") alert(data.message); */ 
} 
```

但是您可以通过匿名函数缩短它：

```
$('#fileupload').bind('fileuploaddone', function (e, data) {/* your code, like : if (data.kind === "error") alert(data.message); */}) 
```

* * *

**编辑**

对于删除，回调可以与事件绑定`fileuploaddestroy`（参见此页面：[BlueImp 选项](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T22:38:23.813

如果有人还在寻找这个，我通过将 jquery.fileupload-ui.js 文件中“destroy”函数中的“removeNode”函数声明更改为：

```
removeNode = function (d) {
    that._transition(data.context).done(function () {
        $(this).remove();
        that._trigger('destroyed', e, d);
    });
}; 
```

然后只需为“fileuploaddestroyed”添加事件，数据将包含服务器响应而不是原始表单数据

# javascript - 使用 excanvas 进行双重缓冲

> ID：13581375
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:48.813
> 
> 标签：javascript, html5-canvas, excanvas

使用资源管理器画布库实现双缓冲的解决方法是什么？

IE。我想这样实现

SourceImage -> Canvas1 -> Canvas2

*   将源图像绘制到背景隐藏的画布中。帆布1

*   从背景画布绘制实际画布。

如何使用资源管理器画布实现此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:54:13.587

我不这么认为，因为 excanvas 使用 VML 技术在 IE 中绘制形状和图像，这是基于矢量的。所以你不能预渲染它。

# matlab - 如何从 Matlab 调用 Vbscript

> ID：13581378
> 
> 赞同：0
> 
> 时间：2012-11-27T09:46:56.500
> 
> 标签：matlab, vbscript

有没有办法在 Matlab 中调用 vbscript 代码？基本上，我想运行一些 vbscript 代码并将输出变量传递给 Matlab。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:50:47.477

不是直接的。应该可以通过 COM / ActiveX 实现，尽管我认为这会很麻烦。见[http://undocumentedmatlab.com/blog/running-vb-code-in-matlab](http://undocumentedmatlab.com/blog/running-vb-code-in-matlab/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T16:56:23.840

更简单的解决方案：

在您的 VBS 代码中，有以下行：

```
Wscript.Echo MyOutputVariables 
```

其中“MyOutputVariables”是您想要的输出

然后用dos从matlab调用：

```
[status,message] = dos('cscript //NoLogo myvbsfile.vbs'); 
```

其中 myvbsfile.vbs 是脚本的名称。变量 message 将包含您要查找的输出。

瞧！

cscript 是 wscript（VBS 文件的 Windows 默认设置）的替代方案，它将命令输出到控制台（即消息框）——在这种情况下，是 MATLAB 控制台，因为它是从 MATLAB 调用的。

//NoLogo 选项将删除原本会出现在输出中的 Microsoft 消息。您必须使用它来使输出“干净”，这样您就不需要删除 MATLAB 本身中的消息。

我在 2015a 中尝试过这个，但我确信它适用于任何带有 dos 命令的版本和支持 cscript 的 Windows 版本。

# map - 弹出悬停在开放层框架云

> ID：13581382
> 
> 赞同：0
> 
> 时间：2012-11-27T09:47:06.630
> 
> 标签：map, gis

我已经用谷歌搜索过这个，我不知道我是否只是使用错误的关键字进行搜索。

这是场景。

我在我的地图中自动生成了很多标记。每次我将鼠标悬停在任何标记上时，都会显示一个弹出窗口。当我将鼠标悬停在外面时，弹出窗口会关闭。但问题是，当我缩小地图时，标记会挤在一个区域。既然是这种情况，当我将鼠标悬停在任何标记上时，显示的弹出窗口现在不会切换。因此，它一直在我的地图中弹出，直到我的地图中显示了很多弹出窗口。

知道为什么会这样吗？

感谢您的任何投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:07:20.910

我以前没有经历过这种情况。我建议您的代码中存在错误，而不是 OpenLayers 的不当行为。就像是

```
selectControl.events.on({
    featurehighlighted: function() {/* show popup */},
    featureunhighlighted: function() {/* hide popup */}
}); 
```

即使地图上有很多功能，也应该可以正常工作。

# javascript - 文本框中的自动完成

> ID：13581383
> 
> 赞同：0
> 
> 时间：2012-11-27T09:47:09.243
> 
> 标签：javascript, jquery

![在此处输入图像描述](../Images/4197b61e4e10d90957892b539e7f3be4.png)

我想要一个看起来像图像中的自动完成，蓝色背景和 xs 用于删除所选项目。

在示例中，我写了“j”，下拉列表中列出了两个名称中带有 j 的用户。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:58:00.783

这是您正在寻找的 jquery 插件

[点击这里了解更多..](http://textextjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:00:24.153

我推荐你使用 jQuery UI。您有一个[自动完成小部件](http://jqueryui.com/autocomplete/)，您可以根据需要自定义 CSS。要选择多个项目，您可以使用[tagsinput plugin](http://xoxco.com/projects/code/tagsinput)。

以下是标签输入的示例代码：

```
$('#emails').tagsInput({ 
    width: 'auto', defaultText: 'Add email', isEmail: true 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:07:41.393

您需要使用 ajax 并且可能是 jquery ui 自动完成小部件：

由于您使用的是 asp.net，因此您可以首先在应用程序中创建类似于处理程序的内容。

**样品处理程序**

```
<%@ WebHandler Language="C#" Class="SimpleHandler" %>

using System;
using System.Web;
using System.Data;
using System.Web;
using System.Web.Security;
using System.Net;
using System.Text;
using System.IO;                      

public class SimpleHandler : IHttpHandler {   
    UCA.Common.DataControl.DBUtility dbu = new UCA.Common.DataControl.MsSqlDbUtility();
    public void ProcessRequest (HttpContext context) {
        context.Response.ContentType = "text/plain";

        if (context.Request.QueryString["query"] != null)
        {
            context.Response.Write("You asked for "+ context.Request.QueryString["query"]);
            return;
        }

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

在您的 html 页面中，以此为基础，

```
<html>
    <body>
        <form>
            <input type="text" id="txtSearch"/>
            <input type="button" id="btnSubmit" onclick="getDetails(document.getElementById("txtSearch").value)" value="Submit"/>
        </form>
        <br>
        <div id="txtResult"><b>Person info will be listed here.</b></div>
        <script type="text/javascript">
            function getDetails(keyword)
            {
                var xmlhttp=new XMLHttpRequest();
                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    document.getElementById("txtResult").innerHTML=xmlhttp.responseText;
                }
                xmlhttp.open("GET","simplehandler.ashx?query="+keyword,true);
                xmlhttp.send();
            }
        </script>
    </body>
</html> 
```

# ios - UINavigationController：应用程序冻结

> ID：13581386
> 
> 赞同：0
> 
> 时间：2012-11-27T09:47:13.177
> 
> 标签：ios, xcode

在 myAppDelegate.m 中：

```
MainViewController *mainViewController         = [ [MainViewController alloc] init];
UINavigationController *navController = [[UINavigationController alloc]
                                         initWithRootViewController:mainViewController];

[navController setNavigationBarHidden:YES];
[[self window] setRootViewController:navController]; 
```

在 MainViewController.m 中没有什么特别的，只有一个绑定到按钮的操作：

```
- (IBAction)go:(id)sender {
   if (!whereamiViewController)
   {
      whereamiViewController = [[WhereamiViewController alloc] init];
   }
   [[self navigationController] pushViewController:whereamiViewController animated:YES];

} 
```

在 WhereamiViewController.m 中，只需一个按钮即可在 UINavigationViewController 中显示另一个屏幕：

```
-(IBAction)showList:(id)sender
{

PointsViewController *container = [[PointsViewController alloc] init];
[[self navigationController] pushViewController:container animated:YES];
} 
```

和：

```
@interface PointsViewController : UITableViewController

@end 
```

一切都很好。但是当我登陆最后一个屏幕 PointsViewController 并返回 WhereamiView 时，应用程序冻结了，Xcode 在 CoureFoundation CFHas 处显示了一个陷阱。

现在，我知道 Objective-C 不是 php，但这确实是一个简单的例子：我错过了什么？有没有办法调试问题？

调试器说：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-  [__NSCFType _forgetDependentConstraint:]: unrecognized selector sent to instance 
```

今天早上我在模拟器中运行了应用程序，没有崩溃！！这怎么可能？如果我在 iPhone 里面运行崩溃，在模拟器中没有崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:38:05.110

我并没有真正看到问题出在哪里，因为它发生在您发布的代码之外。我可能遗漏了一些东西，但是如果应用程序在您返回时崩溃，`whereamiViewController`您实际上是如何返回的？我在这里没有看到它的详细信息。

`navigationControllers`像这样，您将推送（添加）或弹出（删除）以`viewControllers`在导航控制器树上上下移动。由于此时该应用程序似乎正在崩溃，因此可能值得发布您如何做这个？你在哪里弹出容器（PointsViewController *）。

从您发布的代码中，我怀疑您可能正试图`whereamiViewController`通过再次重新推送它来返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:58:17.280

蒂姆是对的。弹出 PointsViewController 也是我的做法。

你的 Xcode 在说什么？你能提供调试器的内容吗？这对找出问题所在更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:45:42.160

[部分解决] 这很奇怪：在调试所有内容并删除所有可疑声明后，没有任何改进。相同的崩溃 SIGABRT。重新启动 iPhone 和 Mac 后，一切都很好！

# mysql - 在 JW Player 中添加/删除播放列表项（使用 MySQ/RTMP）

> ID：13581393
> 
> 赞同：2
> 
> 时间：2012-11-27T09:47:21.973
> 
> 标签：mysql, jwplayer, playlist

好的，我们有一个包含数百个视频的服务器（来自本地电视台），我们正在制作一个小型网站，用于使用 RTMP 和 MySQL 数据库显示视频。所有视频名称都存储在数据库中，我们使用 PHP 在列表中显示名称并使其可点击（onClick 将视频添加到播放器）。我已经完成了这项工作，但现在我们想在每个视频之前添加一个小前贴片。这是一个小片段，展示了我们的徽标几秒钟。

假设我有一个这样的播放列表：

1.  前贴片视频
2.  主视频

然后我想单击一个链接（从我的 MySQL 数据库生成）将第二个视频更改为其他视频：

1.  前贴片视频（与以前相同）
2.  主视频（新）

然后加载播放列表并从头开始播放。所有这些都使用 RTMP。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:11:47.243

我使用 PHP 变量作为第二个视频让它工作。

# html - HTML5 视频在 Firefox 17 中部分工作

> ID：13581395
> 
> 赞同：1
> 
> 时间：2012-11-27T09:47:33.627
> 
> 标签：html, firefox, video

我在网页中嵌入了一个 html5 视频，当用户单击链接时，该视频会淡出。
如果我点击播放，时间线光标会跳到最后，不播放任何内容。
如果我单击时间线（如此寻找），则视频从我单击并正常播放的位置开始。
我已经在 .htaccess 中添加了视频格式。
我怎样才能解决这个问题？
在 chrome 上，它按预期工作。

```
<video width="660" height="275" controls="controls">
     <source type="video/webm" src="video/nev.webm"/>
     <source type="video/mp4" src="video/nev.mp4"/>
     <source type="video/ogv" src="video/nev.ogv"/>
     <source type="video/flash" src="video/nev.flv"/>
</video> 
```

罗比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T16:55:49.013

我认为问题在于电影的维度，特别是格式。当我使用 600 x 480 像素时，一切都可以完美播放，但超出这种关系，除非我“推”光标 5 秒，否则时间线光标在自动播放中不起作用。转发....我也使用 Miro 视频转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:40:40.000

我修复了更改视频转换器，我使用了“Miro 转换器”，它正在创建这个问题，“任何视频转换器”转换了视频，使其在 Firefox 中工作。

# iphone - Objective-C 与 Microsoft Dynamics CRM 交互

> ID：13581397
> 
> 赞同：4
> 
> 时间：2012-11-27T09:47:35.350
> 
> 标签：iphone, objective-c, ios, web-services, dynamics-crm-2011

我希望通过我的 iPhone 与我的 Microsoft Dynamics CRM 系统进行交互，执行诸如下拉、更新、创建和删除记录之类的任务。

这可能吗？如果是这样，任何人都可以将我链接到有关此事的任何良好资源或向我提供您认为相关的任何信息吗？

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:20:17.333

是的，这将是可能的，并且在 CRM SDK 中至少有一些相关的指针[（从 Microsoft Dynamics CRM 中的非 .NET 客户端开发）](http://msdn.microsoft.com/en-us/library/gg327838.aspx)但是一般支持和轶事信息很少（实际上引用的主题和它的链接都是存在于官方意义上）。

您将通过 SOAP 端点进行访问，并[通过 CRM UI](http://msdn.microsoft.com/en-us/library/gg309401.aspx)（设置 > 自定义 > 开发人员资源）公开指向 WSDL 的链接。

我会先下载[CRM SDK](http://www.microsoft.com/en-us/download/details.aspx?id=24004)并阅读我链接的主题。

***警告**- 我对 Objective-C 或 IOS 一无所知*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T10:44:32.733

我对此一无所知，但也许这会有所帮助：[http ://www.cwrmobility.com/](http://www.cwrmobility.com/)

如果您想自己开发一些东西，这可能会有所帮助：[http ://www.microsoft.com/en-us/download/details.aspx?id=13621](http://www.microsoft.com/en-us/download/details.aspx?id=13621)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T10:54:40.653

有可能，您需要使用 Web 服务 API。

[MSDN 网络服务 API 文档](http://msdn.microsoft.com/en-us/library/cc150838.aspx)

它使用 JScript，因此在 iPhone 上，您应该使用 NSURLRequest 和 NSURLConnection 来检索返回的数据。

这是另一个使用 JSON 的链接，因为 iOS 现在内置了 JSON 解析器

[使用 JSON 的 MS CRM](http://inogic.blogspot.co.uk/2011/12/read-records-synchronously-using-json_13.html)

# jquery - ajax 的动态生成内容的 jquery ui 问题

> ID：13581400
> 
> 赞同：1
> 
> 时间：2012-11-27T09:47:41.057
> 
> 标签：jquery, ajax, jquery-ui, dynamic-data

我使用 ajax 来获取我正在开发的 web 应用程序的主要内容；问题是我想从 jquery ui 实现一些小部件，但这与 ajax 脚本混淆。

我有一个带有#mainContent DIV 的Index.php 页面，其中一旦检索到ajax 回复就会显示。

这是我写的ajax脚本：

```
$(function() {
    var newHash      = "",
        $mainContent = $("#mainContent"),
        $pageWrap    = $("#contentCenter"),
        $mainMenu = $("#topMenu li a"),
        baseHeight   = 0,
        $el;

    $pageWrap.height($pageWrap.height());
    baseHeight = $pageWrap.height() - $mainContent.height();

    $mainMenu.on("click", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });

    $(window).bind('hashchange', function(){

        newHash = window.location.hash.substring(1);

        if (newHash) {
            $mainContent
                .fadeOut(200, function() {
                    $mainContent.hide(function() {
                        $(".loader").show();
                        var page = newHash;
                        var data = 'page=' + page;
                        $.ajax({
                                url: "main_content/action.php", 
                                type: "POST",       
                                data: data + "&request=ajax",
                                cache: false,
                                success: function (html) {
                                        $mainContent.html(html);
                                        if ($mainContent.find("img").length > 0) {
                                                        $("#mainContent img").on('load', function() {
                                                                $(".loader").hide();
                                                                        $mainContent.fadeIn(200, function() {
                                                                        $pageWrap.animate({
                                                                        height: baseHeight + $mainContent.height() + "px"
                                                                        }, 300);
                                                                    });

                                                            $mainMenu.removeClass('selected');
                                                            $('a[href="' + newHash + '"]').addClass('selected');
                                                            return false

                                                        });
                                        }

                                        else {

                                            $(".loader").hide();
                                                                $mainContent.fadeIn(200, function() {
                                                                $pageWrap.animate({
                                                                height: baseHeight + $mainContent.height() + "px"
                                                                }, 300);
                                                            });

                                                    $mainMenu.removeClass('selected');
                                                    $('a[href="' + newHash + '"]').addClass('selected');
                                                    return false

                                            }   
                                  }
                            });
                    }); 
                });  
        };

    });

    $(window).trigger('hashchange');

}); 
```

现在的问题是，如果我在 index.php 页面的顶部包含 jquery ui 脚本，则 ajax 脚本不再起作用，它甚至无法进行调用（用 firebug 检查）。

包含的顺序是：
jquery
jquery ui
all the html
my ajax script

我无法理解 jquery 脚本如何干扰我的脚本。有什么建议么？谢谢

编辑：如果我在需要使用它的加载内容的底部包含 jquery ui 脚本，则 jquery ui 小部件可以工作，而 ajax 只能工作一次（当你到达页面时它会加载内容检查哈希但如果你点击任何菜单项都不起作用）。

# jquery - 多个日期范围选择器

> ID：13581402
> 
> 赞同：3
> 
> 时间：2012-11-27T09:47:43.660
> 
> 标签：jquery, jquery-ui-datepicker

我想知道如何在 JQuery 中创建一个多日期范围选择器。我有 4 周，我将每周选择 5 天。

*   第 1 周有`date_from1`和`date_to1`。
*   第 2 周有`date_from2`和`date_to2`。
*   第 3 周有`date_from3`和`date_to3`。
*   第 4 周有`date_from4`和`date_to4`。

我已经有日期范围选择器只为 2 个日期工作。因此，当我选择一个日期`date_from1`（例如 2012-11-25）时，`date_to1`将无法选择早于 2012-11-25 的日期，因此可以正常工作。

我要做的就是当我为第 2 周选择的日期`date_from2`必须大于`date_to1`第 1 周时。

我需要它像这样工作：

*   第 1 周
    *   日期从 1 = 2012-11-02
    *   Date To 1 = 2012-11-07 // 这将无法选择小于 2012-11-02 的日期
*   第 2 周
    *   Date From 2 = 2012-11-08 // 这将无法选择小于 2012-11-07 的日期，这是第 1 周的 Date To 1 的值。
    *   Date To 2 = 2012-11-13 // 这将无法选择小于 2012-11-08 的日期
*   第 3 周
    *   Date From 3 = 2012-11-14 // 这将无法选择小于 2012-11-13 的日期，这是第 2 周的 Date To 2 的值。
    *   Date To 3 = 2012-11-19 // 这将无法选择小于 2012-11-14 的日期
*   第 4 周
    *   Date From 4 = 2012-11-24 // 这将无法选择小于 2012-11-19 的日期，这是第 3 周的 Date To 3 的值。
    *   Date To 4 = 2012-11-29 // 这将无法选择小于 2012-11-24 的日期

下面的 JavaScript 在里面`$(document).ready`。这仅适用于两个日期。

JS：

```
 var dates = $( "#date_from1, #date_to1" ).datepicker({ changeMonth: true, changeYear: true, dateFormat: "yy-mm-dd", outputDateFormat : 'yy MM dd', changeMonth: true, numberOfMonths: 1,
                beforeShowDay: $.datepicker.noWeekends,
                onSelect: function( selectedDate ) {
                    var option = this.id == "date_from1" ? "minDate" : "maxDate", instance = $( this ).data( "datepicker" ), date = $.datepicker.parseDate( instance.settings.dateFormat || $.datepicker._defaults.dateFormat, selectedDate, instance.settings );
                    dates.not( this ).datepicker( "option", option, date );
                }
            }); 
```

HTML：

```
Week 1
Date From1: <input type="text" name="date_from1" id="date_from1" value=""/>
Date To1: <input type="text" name="date_to1" id="date_to1" value=""/>

Week 2
Date From2: <input type="text" name="date_from2" id="date_from2" value=""/>
Date To2: <input type="text" name="date_to2" id="date_to2" value=""/>

Week 3
Date From3: <input type="text" name="date_from3" id="date_from3" value=""/>
Date To3: <input type="text" name="date_to3" id="date_to3" value=""/>

Week 4
Date From4: <input type="text" name="date_from4" id="date_from4" value=""/>
Date To4: <input type="text" name="date_to4" id="date_to4" value=""/> 
```

希望你们能帮助我。提前致谢。

# java - 如何在 Java 中计算枚举的哈希码，并将枚举 hashCodes 组合为 HashMap 的键

> ID：13581409
> 
> 赞同：24
> 
> 时间：2012-11-27T09:48:18.217
> 
> 标签：java, enums, hashmap, hashcode

我有一个包含不同枚举（不同类型）的类。此类用作`HashMap`. 目前类 hashCode 是这样实现的：

```
 public static class Key implements Comparable<Key> {
    final int a;
    final Enum1 enum1;
    final Enum2 enum2;

    @Override
    public int hashCode() {
      return a ^ enum1.hashCode() ^ enum2.hashCode();
    }

    // ... definition of equals and toString ...
  } 
```

现在，如果枚举 hashCode 只返回枚举定义中枚举值的索引，这将不是最优的（冲突太多）。的方法定义`Enum.hashCode()`是这样的：

```
/**
 * Returns a hash code for this enum constant.
 *
 * @return a hash code for this enum constant.
 */
public final int hashCode() {
    return super.hashCode();
} 
```

假设这个委托给`Object.hashCode()`，一切都应该没问题，因为对于每个枚举常量，只存在一个实例，并且`Object.hashCode()`理论上将类似于从对象的内部地址派生的整数。我对吗？

PS：当然，当同一个枚举在一个键中多次使用时，您将不得不使用更复杂的东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T09:55:45.547

是的，你是对的，枚举元素的哈希码将来自静态实例，绑定到内存位置，并且是唯一的。

另一方面，有更好的方法来生成冲突概率较小的哈希码。例如，检查 eclipse 可以为您自动生成的默认值（右键单击，Source> Generate hashCode and equals）

```
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((enum1 == null) ? 0 : enum1.hashCode());
    result = prime * result + ((enum2 == null) ? 0 : enum2.hashCode());
    return result;
} 
```

通过将素数混入其中（精确的数学使我无法理解），您应该会更有抵抗力。

注意你也可以让eclipse为你生成一个equals方法！（甚至是 toString）。并不是说你必须盲目相信他们，但他们通常是一个很好的开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T10:26:31.250

如上所述，Enum 在 Java 中是不可变的，因此为 Enum 生成的 hashcode 是 Hash 集合的完美键，就像 String 是完美键一样。

枚举声明是一种特殊的类声明。枚举类型对于每个命名的枚举常量都有公共的、自类型的成员。所有枚举类都有高质量的 toString、hashCode 和 equals 方法。所有这些都是可序列化的、可比较的和有效的最终结果。没有一个是可克隆的。除 toString 之外的所有“对象方法”都是最终的：我们负责比较和序列化，并确保它正确完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T09:57:41.130

刚刚在 Oracle 1.6 JVM 上对此进行了测试。枚举确实委托给 Object.hashCode()。它在不同的运行之间有所不同。请记住，尽管密钥在不同的虚拟机/虚拟机实例之间是不稳定的。因此，当您序列化 HashMap 并在不同的 VM 中读回它时，您将无法使用在该 VM 中构建的键在那里查找值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-11T03:29:25.980

在 Java 8 中，您可以将`Objects.hash()`其用于此目的。

例如，您可以重写您`hashCode`的

```
//
import static java.util.Objects.hash;

// 
@Override
public int hashCode() {
  return hash(a, enum1, enum2);
} 
```

# c# - 从 C# VSTO 设置 Excel PowerView 属性

> ID：13581411
> 
> 赞同：1
> 
> 时间：2012-11-27T09:48:22.833
> 
> 标签：c#, .net, excel, vsto

是否有可能访问 Excel 的 2013 PowerView Dashboard 属性，尤其是来自 C# 程序的 Font 和 FontSize 属性（使用 Microsoft.Office.Interop.Excel lib）？亲切的问候！

# php - 如何验证使用 php 上传的文件不包含可执行二进制文件？

> ID：13581425
> 
> 赞同：2
> 
> 时间：2012-11-27T09:49:20.973
> 
> 标签：php, security

使用一个简单的 firefox 插件，黑客可以更改他们想要上传的任何文件的 mime 类型，绕过您的文件类型检查器。

然后，黑客可以使用 GIMP 之类的程序将 php 脚本嵌入图像、音频或任何其他文件的二进制数据中。

我该如何检查并防止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:40:50.523

您可以使用[mime_content_type](http://php.net/manual/en/function.mime-content-type.php) () 来获取文件的实际 mime 类型，而不是客户端浏览器传输的值。

然后，您可以使用允许在 PHP 中执行病毒扫描的库，例如[php-ClamAV 。](http://sourceforge.net/projects/php-clamav/)

您可以丢弃除您期望的文件扩展名之外的任何文件扩展名（例如，如果您期望图像，则为 .png、.jpg 等）。在图像的特定情况下，您还可以通过修改图像来中和图像（例如稍微调整它们的大小、修改压缩率、修改数据并中和任何可执行文件）。

最后当然是不给文件执行权。但与评论中所说的相反，这并不能真正保护你。例如，如果黑客通过注入找到了运行 php 文件的方法，他将能够对文件进行 chmod 并正确执行（甚至运行它）。

一个好的做法是始终以不可预测的方式重命名文件。如果上传后不打算被客户端访问，请将文件发送到禁用目录浏览的文件夹中。

# search - 网格存储配置抛出“未捕获的类型错误：无法读取未定义的属性‘缓冲’”

> ID：13581427
> 
> 赞同：2
> 
> 时间：2012-11-27T09:49:24.690
> 
> 标签：search, extjs, grid, store, extjs4.1

我有表格和网格。用户必须在表单字段中输入数据，然后在网格中显示相关记录。

我想实现一个搜索表单，例如：用户将输入学生的姓名和性别，然后将获得所有具有相同姓名和性别的学生的网格。

因此，我使用 Ajax 将表单字段值发送到 PHP，然后创建一个`json_encode`将在网格存储中使用的。

我真的不确定我的想法是否好。但我还没有找到另一种方法来做到这一点。

问题是我的商店有一个错误，但我无法弄清楚它是什么。我收到此错误： `Uncaught TypeError: Cannot read property 'buffered' of undefined`

**我的观点：**

```
{
  xtype: 'panel',
  layout: "fit",
  id: 'searchResult',
  flex: 7,
  title: '<div style="text-align:center;"/>SearchResultGrid</div>',
  items: [{
    xtype: 'gridpanel',
    store: 'advSearchStore',
    id: 'AdvSearch-grid',
    columns: [{
        xtype: 'gridcolumn',
        dataIndex: 'name',
        align: 'right',
        text: 'name'
      }, {
        xtype: 'gridcolumn',
        dataIndex: 'gender',
        align: 'right',
        text: 'gender'
      }
    ],
    viewConfig: {
      id: 'Arr',
      emptyText: 'noResult'
    },
    requires: ['MyApp.PrintSave_toolbar'],
    dockedItems: [{
      xtype: 'PrintSave_tb',
      dock: 'bottom',
    }]
  }]
} 
```

**我的控制器：**

```
.
.
.
xmlhttp.open("GET","AdvSearch.php?search_name="+search_name,true);
xmlhttp.send(null); 
```

**我的 PHP 脚本：**

```
if (!$con) {
    throw new Exception("Error in connection to DB");
}

$query ="SELECT name, gender FROM students  WHERE name ILIKE '%$search_name%' ";
$result = pg_query($query); 

while ($row = pg_fetch_array($result)) {
   $Arr[] = array('name' => $row[0], 'gender' => $row[1]);
}

$searchResult_list = array();
$searchResult_list['success'] = true;
$searchResult_list['Arr'] = $Arr;

$searchResult_list['totalCount'] = count( $searchResult_list['Arr'] );

echo json_encode($searchResult_list); 

if (!$result) 
    die("Error in query: " . pg_last_error());

pg_close($con); 
```

**我的商店，型号：**

```
Ext.define('AdvSearchPost', {
  extend: 'Ext.data.Model',
  proxy: {
    type: 'ajax',
    url: 'AdvSearch.php',
    reader: {
      type: 'json',
      root: 'Arr',
      totalProperty: 'totalCount'
    }
  },
  fields: [{
      name: 'name'
    }, {
      name: 'type_and_cargo'
    }
  ]
});
advSearchStore = Ext.create('Ext.data.Store', {
  pageSize: 10,
  model: 'AdvSearchPost'
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T09:55:43.000

好吧，这只是您的商店名称的拼写错误。

该错误`Uncaught TypeError: Cannot read property 'buffered' of undefined`仅表明无法绑定商店。这可能有点误导。

尝试使用任何一个网格

```
store: advSearchPost 
```

或者

```
store: Ext.StoreMgr.lookup('AdvSearchPost') // if in any form a controller takes care about your store 
```

它会起作用。

**编辑**

我猜你没有任何控制器所以我建议你像这样创建你的商店

```
Ext.create('Ext.data.Store', {
   pageSize: 10,
   model: 'AdvSearchPost',
   storeId: 'AdvSearchPost'
}); 
```

这将使您能够`StoreManager`从任何地方接收商店（在创建之后）。这也将使最后一条语句在没有任何控制器的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T11:41:31.220

即使您这样调用.. `store: Ext.StoreMgr.lookup('bla bla bla')`也不会在控制台中引发任何错误。

**用storeId**替换**store**参数，然后将您的实际商店分配给它将连接到您的实际商店。**`storeId:advSearchPost`**

# ruby-on-rails - `require': 无法加载此类文件 -- capybara/rspec (LoadError)

> ID：13581431
> 
> 赞同：11
> 
> 时间：2012-11-27T09:49:37.463
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我试图测试我的项目。它以前工作过，我不知道每当我输入`bundle exec rspec spec/`它时我做了什么`cannot load such file -- capybara/rspec (LoadError)`。并且请我需要一个建议，哪个适合作为新手在 ruby​​ on rails 中测试我的 MVC。

```
Gemfile:
------------

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'minitest'
  gem 'capybara', '1.1.2'
  gem 'rb-inotify', '0.8.8'
  gem 'libnotify', '0.5.9'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'spork-testunit'
  gem 'guard-test'
  gem 'ruby-prof'
  gem 'factory_girl_rails', '1.4.0' 
  if RUBY_PLATFORM =~ /linux/
    gem 'capybara-webkit'
  end
  gem 'launchy'
end

group :development, :test do
  gem 'rspec-rails', '2.10.0'
  gem 'guard-rspec', '0.5.5'
end 
```

## 规范助手：

```
require 'rubygems'
#require 'factory_girl'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'
  require 'capybara/rails'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.mock_with :rspec

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = false

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  #Capybara.default_driver = :selenium
  Capybara.javascript_driver = :webkit
end 
```

## 错误：

```
/home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- capybara/rspec (LoadError)
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
        from /home/IN4SYSTEMS/sri.kalai/Documents/promaster/spec/spec_helper.rb:11:in `<top (required)>'
        from /home/IN4SYSTEMS/sri.kalai/Documents/promaster/spec/helpers/loc/epcs_helper_spec.rb:1:in `require'
        from /home/IN4SYSTEMS/sri.kalai/Documents/promaster/spec/helpers/loc/epcs_helper_spec.rb:1:in `<top (required)>'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:66:in `rescue in run'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:62:in `run'
        from /home/IN4SYSTEMS/sri.kalai/Desktop/gems/ruby/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:24:57.203

我希望您确实安装了所有必需的宝石？顺便说一句，您是否更改了Gemfile `bundle install`，在这种情况下，您将需要使用 bundle install 安装 Gems。

您可以通过以下方式查看可用的宝石列表`gem list`

关于问题的第二部分，使用哪个测试 API。这是选择的问题。你可以坚持下去，`rpsec`如果你发现它达不到你的期望，那么就要注意改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T17:35:18.620

尝试`gem query --local`查看是否`capybara-screenshot`出现在已安装的 gem 列表中。（出于某种原因，这呈现了与我不同的列表`gem list`。）

如果您没有看到它，请尝试`gem install capybara-screenshot`. 它不包含在 的安装中`capybara`，因此`capybara`仅在您的 gem 列表中查看是不够的！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-09T15:10:39.930

我今天遇到了同样的问题，我通过以下方式解决了它：

*   在文件`spec_helper.rb` 下一个 raws 中评论`require 'capybara/rspec'` `require 'capybara/rails'`，

*   `/usr/local/rvm/gems/ruby-1.9.3-p327@olha/gems/capybara-webkit-1.1.0` 从我的硬盘空间中删除 。

# asp.net - 使用 C# 在 Asp.net 中卸载用户控件

> ID：13581432
> 
> 赞同：1
> 
> 时间：2012-11-27T09:49:39.720
> 
> 标签：asp.net, asp.net-4.0

我想卸载用户控件 control.dispose() & remove 不起作用。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:02:14.410

在从窗体或面板中删除控件之前，您首先需要删除与控件关联的所有*事件处理程序，然后将其释放。*

# ios - 删除 CoreData 对象和反向关系

> ID：13581438
> 
> 赞同：2
> 
> 时间：2012-11-27T09:50:06.917
> 
> 标签：ios, core-data, relationship, inverse

我有一个对象 (A) 与另一个对象 (B) 具有多对多关系。此外，B 与 A 具有反比关系。

当我删除 B 时，它仍然显示在 A 的关系计数上，除非我在删除之前手动清除 B 的反向关系。我希望它同步发生，所以我可以更新 UITableView 并删除 B 的行，而不是等待 MOC 的保存操作完成。

有没有办法在不手动清理 B 的逆的情况下处理这个问题？（我有很多这样的关系，这是不好的做法，很难维持）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:08:45.330

如果您在 Xcode 的核心数据模型检查器中将 B 到 A 的反向关系的“删除规则”设置为“无效”，那应该会自动工作。

有关详细信息，请参阅“核心数据编程指南”中的[关系删除规则](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/HowManagedObjectsarerelated.html#//apple_ref/doc/uid/TP40001075-CH17-SW1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T13:03:25.897

差不多 5 年后（现在是 iOS 10），我偶然发现了同样的问题。

在我决定通过`saveContext()`从几乎所有地方删除来“优化”事物后，应用程序开始崩溃，认为内存中的表示保证是正确的（因为`includesPendingChanges`默认`true`情况下）。

但是我得到了描述的问题（并且因为后来`UITableView`需要更新一些，应用程序崩溃了）。

这里有四种不同的方法，其中任何一种都解决了我的问题：（据我判断，从最好到最差排序）

*   删除后调用`processPendingChanges()`(on the )`NSManagedObjectContext`
*   删除后调用`refreshAllObjects()`(on the )`NSManagedObjectContext`
*   删除后打电话`saveContext()`（正如其他人在评论中指出的那样）
*   只是等待。例如，将依赖于正确数据的代码的执行延迟 0.1 秒左右（使用`DispatchQueue.main.asyncAfter`）。（这当然是迄今为止最糟糕的方法，你不应该实施它）

我仍然不确定的事情：

*   我尝试在一个单独的非常小的示例项目上复制它，但没有遇到问题。那么根本问题是什么？
*   这是预期的行为还是错误？它在任何地方都有记录吗？

# networking - Windows 服务器 2008 和 Opendns

> ID：13581440
> 
> 赞同：0
> 
> 时间：2012-11-27T09:50:10.207
> 
> 标签：networking, dns, windows-server-2008, windows-server

我有一个问题，我的网络在一台机器上配置了域控制器、文件服务器、DHCP 和 DNS 服务器，我想使用 opendns 过滤互联网内容。

但是网络上的某些计算机应从该填充字符串中排除。

要点： 1\. 计算机通过 DHCP 获取 IP 配置。2\. Computers DNS & Alternat 是本地服务器（无法更改）。3\. 客户端计算机是混合的（Windows XP SP3 和 Windows 7）。4\. 服务器操作系统 windows server 2008 R2 64 位。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:00:10.600

只需将 OpenDNS 服务器放在 DNS 转发器选项卡中并配置您的 DHCP 以将您的域控制器 IP 地址作为您的客户端的 DNS 服务器。

# c++ - 多线程程序线程连接问题

> ID：13581448
> 
> 赞同：4
> 
> 时间：2012-11-27T09:50:30.867
> 
> 标签：c++, multithreading, boost, c++11

我目前正在编写一个多线程程序，有时可能会根据某些情况创建一个线程。如果创建了这个线程，它需要独立于所有其他线程运行，我不能阻止任何其他线程等待它加入。生成的线程运行的时间长度各不相同；有时可能需要几个小时。

我已经尝试生成线程并在类的析构函数中加入一个工作正常的连接，但是如果生成的线程中的代码在调用析构函数之前完成很长时间（大约 99% 的时间）我会就像线程杀死自己释放所有资源等。

我研究过为此使用分离，但您不能重新加入分离的线程，并且如果在该线程完成之前调用析构函数，则生成的线程将无法完成并可能产生灾难性的后果。

是否有任何可能的解决方案可以确保线程在类被破坏之前完成，并允许它在线程完成工作后立即加入？

我正在使用 boost/c++11 进行线程化。任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:25:57.193

线程可能会自行分离，释放其资源。如果析构函数看到线程是可加入的，即仍在运行，让它加入。如果线程到达终点，则自分离。可能的竞争条件：is_joinable() 在析构函数中返回 true - 线程自行分离 - 析构函数加入并惨遭失败。所以使用互斥锁来保护线程的死亡：

```
struct ThreadContainer
{
   std::mutex threadEndMutex;
   std::thread theThread;

   ThreadContainer()
     : theThread([=]()
       {
         /* do stuff */

         // if the mutex is locked, the destructor is just
         // about to join, so we let him.
         if (threadEndMutex.try_lock())
           theThread.detach();
       })
   {}

   ~ThreadContainer()
   {
     // if the mutex is locked, the thread is just about 
     // to detach itself, so no need to join.
     // if we got the mutex but the thread is not joinable, 
     // it has detached itself already.
     if (threadEndMutex.try_lock() && theThread.is_joinable())
       theThread.join();
   }
}; 
```

PS：您甚至可能不需要调用 is_joinable，因为如果线程自行分离，它永远不会解锁互斥锁并且 try_lock 失败。

PPS：您可以使用 std::atomic_flag 代替互斥锁：

```
struct ThreadContainer
{
   std::atmoic_flag threadEnded;
   std::thread theThread;

   ThreadContainer()
     : threadEnded(ATOMIC_FLAG_INIT)
     , theThread([=]()
       {
         /* do stuff */

         if (!threadEnded.test_and_set())
           theThread.detach();
       })
   {}

   ~ThreadContainer()
   {
     if (!threadEnded.test_and_set())
       theThread.join();
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:12:53.673

您可以在“独立”线程算法中定义暂停/步骤，并在每个步骤中查看一个全局变量，该变量可帮助您决定取消计算和自动销毁，或继续线程中的计算。

如果全局变量不够用，即如果需要更精确的粒度，您应该为您的线程函数定义一个仿函数对象，这个仿函数有一个方法kill()。在将仿函数作为线程启动后，您会保留对仿函数的引用。当您调用 MyThreadFunctor::kill() 时，它会设置一个布尔字段，并且在仿函数线程函数本身的计算的每个步骤中都会检查该字段。

# php - 在刷新网页之前不会设置 Cookie

> ID：13581449
> 
> 赞同：0
> 
> 时间：2012-11-27T09:50:45.913
> 
> 标签：php, cookies

> **可能重复：**
> [无法在同一页面上设置 PHP cookie](https://stackoverflow.com/questions/7455214/cant-set-php-cookie-on-the-same-page)

我有以下代码：

```
 <?php
    $value = 'something from somewhere';

    setcookie("TestCookie1", $value);
    setcookie("TestCookie2", $value, time()+3600);  /* expire in 1 hour */
    setcookie("TestCookie31", $value, time()+3600);

     echo "<pre>";
     print_r($_COOKIE);
     echo "</pre>";

     ?> 
```

当我第一次在浏览器中看到上面的代码时，它只打印空白数组，但它只在我下次刷新页面时显示。如何在第一次运行网页时显示 cookie。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:52:47.543

是的，确切地说，它就是这样工作的。它甚至在手册中提到。`$_COOKIE`包含*此请求*的 cookie ，而不是您要在响应中发送回客户端的任何 cookie。

由于您只是设置值，因此您应该知道它们是什么，因此鉴于此限制，您实际上无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:53:16.310

set cookie 会将 cookie 添加到响应中，以便客户端/浏览器知道页面显示的那一刻。$COOKIES 从请求中获取其 cookie。它只包含浏览器/客户端已经拥有的 cookie。

# ios - 如何去除搜索栏背景？

> ID：13581452
> 
> 赞同：0
> 
> 时间：2012-11-27T09:50:47.100
> 
> 标签：ios, uisearchbar

我想删除搜索栏背景，我在自定义搜索栏子类中尝试了以下代码：

```
-(void)didAddSubview:(UIView *)subview
{
    if ([subview isKindOfClass:NSClassFromString(@"UISearchBarBackground")])
    {
        subview.alpha=0;

    }
} 
```

一切正常，但是当单击搜索栏或取消搜索时，背景颜色设置为黑色，
有人知道如何删除此背景颜色吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:25:15.180

```
searchbar.barStyle = UIBarStyleBlackTranslucent; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:02:27.743

我在我的一个应用程序中使用了这段代码来删除背景并添加了我自己的背景图像

```
[[searchBar.subviews objectAtIndex:0] removeFromSuperview];
     UIImageView *searchImage=[[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, 319.0, 44.0)];
    [searchImage setImage:[UIImage imageNamed:@"searchbg.png"]];
    [searchBar insertSubview:searchImage atIndex:1]; 
```

这可能会对您有所帮助。

# ajax - f:ajax 监听器未调用

> ID：13581456
> 
> 赞同：0
> 
> 时间：2012-11-27T09:50:56.910
> 
> 标签：ajax, jsf-2, listener

无论我做什么，我都无法理解 f:ajax 标记的 listener 属性。该方法不会被调用。我没有收到任何错误消息。这是一个例子：

## 测试.xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
    <h:head>
        <title>
            Example
        </title>
    </h:head>
    <h:body>
        <h:form>
            <h:selectOneMenu value="#{testBean.value}">
                <f:selectItem itemLabel="1" itemValue="1" />
                <f:selectItem itemLabel="2" itemValue="2" />                    
                <f:ajax render="messages" listener="#{testBean.processAjaxBehaviour}" onevent="test" />
            </h:selectOneMenu>
            <h:messages id="messages" />
        </h:form>
        <script type="text/javascript">
            function test(event)
            {
                alert(event.status);
            }
        </script>
    </h:body>
</html> 
```

## TestBean.java

```
package test;

import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AjaxBehaviorEvent;
import javax.faces.event.AbortProcessingException;

@ManagedBean
@ViewScoped
public class TestBean implements Serializable
{
    int value = 2;

    public int getValue()
    {
        return value;
    }

    public void setValue(int value)
    {
        value = value;
    }

    @PostConstruct
    public void init()
    {
        System.out.println("Done constructing testBean.");
    }

    public void processAjaxBehaviour(AjaxBehaviorEvent event) throws AbortProcessingException
    {
        System.out.println("Processing AJAX behaviour.");
    }
} 
```

正如预期的那样，该函数`test`被调用了 3 次，我得到了“成功”状态。`processAjaxBehaviour`但是，不会调用侦听器。

该`init`方法被调用。`option`由 渲染的第二个元素`f:selectItem`按预期选择。

# web - 为什么我的网站出现在 a 中？

> ID：13581457
> 
> 赞同：2
> 
> 时间：2012-11-27T09:50:56.397
> 
> 标签：web, frameset

我有一个网站（仅供我自己参考，对公众来说没有什么有趣的。）

当我在 IE9 中加载我的页面（[测试页面](http://marrowbrook.com/TestFiles/testpage.htm)）并查看页面的源时 - 我可以看到预期的 HTML。

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Test Page</title>
  </head>
<body>
  <div id="body">
    Simple test page, with an image. <br />
    <img src="http://www.w3.org/2008/site/images/logo-w3c-mobile-lg" alt="WC3 logo" />
  </div>
</body>
</html> 
```

但是当我查看开发人员工具栏（按 f12）时，HTML 出现在`<framset>`标签中。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>  
        <title>Marrowbrook.com </title>  
    </head>
    <frameset rows="100%,*" border="0"> 
       <frame src="http://217.118.128.188/wotney//TestFiles/testpage.htm" frameborder="0" />  
       <frame frameborder="0" noresize />
     </frameset>
<!-- pageok -->
<!-- 02 -->
<!-- ->
</html> 
```

使用 Chrome，如果我右键单击并查看源代码，我会看到上面的`<frameset>`代码，但我也可以右键单击并选择查看框架源代码，我可以在其中看到预期的 HTML。

谁能告诉我为什么我会看到这个？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:31:44.507

这可能是因为您的主机名是从一个提供商处购买的，但您将其托管在另一个提供商上 - 并且您获得了基于帧的重定向设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:19:49.777

您的网站托管在哪个平台上？看起来服务器正在做某事，因为框架集中框架的 src 指向您的页面。它可能是某种“预览模式”或服务器/cms 的某种东西。因此，看起来服务器正在使用带有框架集的默认页面，在部署后将实际页面拉入其中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T15:13:11.783

当您用于访问该站点的域设置为“屏蔽”转发时，也会发生这种情况。请与您的主机上的域管理员联系并删除屏蔽转发。

# postgresql - 在PostgreSQL中用特定值填充表的所有列？

> ID：13581463
> 
> 赞同：6
> 
> 时间：2012-11-27T09:51:22.897
> 
> 标签：postgresql, fill, autofill

我有一张表，我想用特定值填充一列。

示例表：它包括空的温度列，我想用 4.56 填充相关列的所有行。

```
+------------+------------------+
|温度 |dt |
+------------+------------------+
| |9/15/2007 12:12:12|                  
| |9/15/2007 12:14:16|
| |9/15/2007 12:16:02|
| |9/15/2007 12:18:23|
| |9/15/2007 12:21:01|
+------------+------------------+

```

结果：

```
+------------+------------------+
|温度 |dt |
+------------+------------------+
| 4.56 |9/15/2007 12:12:12|                  
| 4.56 |9/15/2007 12:14:16|
| 4.56 |9/15/2007 12:16:02|
| 4.56 |9/15/2007 12:18:23|
| 4.56 |9/15/2007 12:21:01|
+------------+------------------+

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T10:18:33.537

```
update the_table
   set temperature = 4.56;
commit; 
```

# r - 通过成功的字符串替换来提高循环的性能？

> ID：13581465
> 
> 赞同：4
> 
> 时间：2012-11-27T09:51:25.320
> 
> 标签：r

我有（html-）文本，我想将这些`&ouml;`内容更改为真正的字符，如 ä、ü、ö 等，因为否则 xml 包不接受它。

所以我写了一个小函数，它循环通过一个替换表（[link1](http://www.w3schools.com/tags/ref_entities.asp)，[link2](http://www.w3schools.com/tags/ref_symbols.asp)）并用 sp 用特殊字符替换特殊字符......这个函数看起来像这样（只有 looonger）：

```
html.charconv <- function(text){
    replacer <- matrix(c(
    "Á",    "&Aacute;",
    "á",    "&aacute;",
    "Â",    "&Acirc;",
    "â",    "&acirc;",
    "´",    "&acute;"
    )
    ,ncol=2,byrow=T)

    for(i in 1:length(replacer[,1])){
        text <- str_replace_all(text,replacer[i,2],replacer[i,1])
    }
    text
} 
```

**我该如何加快速度？**我考虑过矢量化，但没有提供任何帮助解决方案，因为对于每个周期，最后一个周期的结果是它的起点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T12:26:40.783

你可以通过稍微不同地构建你的函数来获得显着的加速，而忘记文本工具。基本上你：

1.  拆分字符串
2.  匹配您想要的字符并用新字符替换它们
3.  再次将所有内容粘贴在一起

您可以使用以下功能做到这一点：

```
html.fastconv <- function(x,old,new){
    xs <- strsplit(x,"&|;")
    old <- gsub("&|;","",old)
    xs <- lapply(xs,function(i){
        id <- match(i,old,0L)
        i[id!=0] <- new[id]
        return(i)
    })
    sapply(xs,paste,collapse="")
} 
```

这工作为：

```
> sometext <- c("&Aacute;dd som&aacute; le&Acirc;tter&acirc; acute problems et&acute; cetera",
+  "&Aacute;dd som&aacute; le&Acirc;tter&acirc; acute p ..." ... [TRUNCATED] 

> newchar <- c("Á","á","Â","â","´")

> oldchar <- c("&Aacute;","&aacute;","&Acirc;","&acirc;","&acute;")
> html.fastconv(sometext,oldchar,newchar)
[1] "Ádd somá leÂtterâ acute problems et´ cetera" "Ádd somá leÂtterâ acute problems et´ cetera" 
```

作为记录，一些基准测试：

```
require(rbenchmark)
benchmark(html.fastconv(sometext,oldchar,newchar),html.charconv(sometext),
     columns=c("test","elapsed","relative"),
     replications=1000) 
                                       test elapsed relative
2                   html.charconv(sometext)    0.79    5.643
1 html.fastconv(sometext, oldchar, newchar)    0.14    1.000 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T13:49:05.353

只是为了好玩，这里是一个基于`Rcpp`.

```
#include <Rcpp.h>
using namespace Rcpp ;

// [[Rcpp::export]]
CharacterVector rcpp_conv( 
    CharacterVector text, CharacterVector old , CharacterVector new_){

    int n  = text.size() ;
    int nr = old.size() ;

    std::string buffer, current_old, current_new ;
    size_t pos, current_size ; 
    CharacterVector res(n) ;

    for( int i=0; i<n; i++){
        buffer = text[i] ;
        for( int j=0; j<nr; j++){
             current_old = old[j] ;
             current_size = current_old.size() ;
             current_new = new_[j] ;
             pos = 0 ;   
             pos = buffer.find( current_old ) ;
             while( pos != std::string::npos ){
                 buffer.replace( 
                     pos, current_size, 
                     current_new
                 ) ;
                 pos = buffer.find( current_old ) ;
             }
        }
        res[i] = buffer ;
    }
    return res ;
} 
```

为此，我获得了相当大的性能提升：

```
> microbenchmark(
+     html.fastconv( sometext,oldchar,newchar),
+     html.fastconvJC(sometext, oldchar, newchar),
+     rcpp_conv( sometext, oldchar, newchar)
+ )
Unit: microseconds
                                         expr    min      lq   median      uq
1   html.fastconv(sometext, oldchar, newchar) 97.588 99.9845 101.4195 103.072
2 html.fastconvJC(sometext, oldchar, newchar) 19.945 23.3060  25.8110  28.134
3       rcpp_conv(sometext, oldchar, newchar)  4.047  5.1555   6.2340   9.275
      max
1 256.061
2  40.647
3  25.763 
```

这是一个基于该`Rcpp::String`功能的实现，可从`Rcpp >= 0.10.2`：

```
class StringConv{
public:
    typedef String result_type ;
    StringConv( CharacterVector old_, CharacterVector new__): 
        nr(old_.size()), old(old_), new_(new__){}

    String operator()(String text) const {
        for( int i=0; i<nr; i++){
            text.replace_all( old[i], new_[i] ) ;
        }     
        return text ;
    }

private:
    int nr ;
    CharacterVector old ;
    CharacterVector new_ ;
} ;

// [[Rcpp::export]]
CharacterVector test_sapply_string( 
   CharacterVector text, CharacterVector old , CharacterVector new_
){
   CharacterVector res = sapply( text, StringConv( old, new_ ) ) ;
   return res ;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T12:10:23.703

我猜 36,000 个文件读写是你的瓶颈，而你在 R 中编码的方式对此无济于事。有些事情只需要一段时间。你的函数看起来可以正常工作，让它运行。您可以进行一些小的改进。

```
replacer <- matrix(c(
    "Á",    "&Aacute;",
    "á",    "&aacute;",
    "Â",    "&Acirc;",
    "â",    "&acirc;",
    "´",    "&acute;"
    )
    ,ncol=2, byrow=T)

html.fastconvJC <- function(x,old,new){
    n <- length(new)
    s <- x #make a copy cause I'm scared of scoping in R :)
    for (i in 1:n) s <- gsub(old[i], new[i], s, fixed = TRUE)
    s
    }

# borrowing the strings from Joris Meys
benchmark(html.fastconvJC(sometext, replacer[,2], replacer[,1]),
      html.charconv(sometext), columns = c("test", "elapsed", "relative"),
      replications=1000)

                                                     test elapsed relative
2                                 html.charconv(sometext)   0.727    17.31
1 html.fastconvJC(sometext, replacer[, 2], replacer[, 1])   0.042     1.00 
```

他们的速度比我预期的要快。请注意，加速的很大一部分是`fixed = TRUE`，否则 Joris Meys 的回答速度大致相同。

如果这不能使您的整体速度提高很多，您就会知道瓶颈在其他地方，可能是文件读取和写入。除非您有固态或 RAID 驱动器，否则并行运行它不会加快速度，可能只会减慢速度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T11:15:07.673

我会尝试 plyr ：

```
input.data <- llply(input.files, html.charconv, .parallel=TRUE) 
```

# php - 从第一个表中选择数据并按mysql中第二个表中的字段排序

> ID：13581466
> 
> 赞同：0
> 
> 时间：2012-11-27T09:51:25.710
> 
> 标签：php, mysql

我有两张桌子。第一个表是`je_addchoice`，其中包含诸如

*   选择ID
*   花粉
*   选择名称
*   选择创作者id

第二个表是`je_uservote`，字段是

*   用户身份
*   花粉
*   选择ID

我想做的是，

根据`je_uservote`表格中的投票数显示选项名称

```
$query = select * from je_addchoice where poll_id='$poll_id' //order by (count(choiceid)) from second table 
```

//根据投票数查询显示选择名

如何编写上述查询

我的问题是如何访问 jeuservote 表中的计数并根据结果计数显示选择名称。实际上，addchoice 表计数中choicenames 的投票存储在 jeuservote 表中。我如何访问选项名称的投票计数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:57:38.807

```
SELECT *, (
            SELECT count(*) 
            FROM je_uservote T2 
            WHERE T2.pollid=T1.pollID 
            AND T2.choiceid=T1.choiceID) AS votes
FROM je_addchoice T1
ORDER BY votes 
```

# jquery - jQuery动态设置顶部属性以在当前页面框架内显示巨大的子类别列表

> ID：13581470
> 
> 赞同：0
> 
> 时间：2012-11-27T09:51:32.327
> 
> 标签：jquery, css, drop-down-menu, opencart

我的 opencart 站点中有一个左侧类别菜单。

一些代码是

```
<div id="menu_box">
    <div class="box-heading">Categories</div>
        <ul>
            <li>
                <a href="http://localhost/makeatech/index.php?route=product/category&amp;path=224">Game Cd's</a> 
                <ul class="second-level" style="position: absolute; left: 166px; top: -2px; padding: 5px; margin: 0px; width: 350px; background-color: rgb(245, 245, 245); border: 1px solid rgb(236, 236, 236); z-index: 10; display: block;">
                    <li id="third-li">
                        <a href="http://localhost/makeatech/index.php?route=product/category&amp;path=224_226"> SONY Playstations</a>                            
                    </li>
                    <li id="third-li">
                        <a href="http://localhost/makeatech/index.php?route=product/category&amp;path=224_225"> Xbox</a>
                    </li>
                </ul>
            </li>
            <li>.......</li>                     
        </ul>
    </div> 
```

我有一个庞大的类别列表，其中包含 3 个级别的子类别。因此，以下类别将进入屏幕。

我知道问题出在`fixed top css`. 有什么方法可以使用 jquery 在屏幕上显示我的所有类别，比如[Flipkart.com](http://www.flipkart.com)

请给我你的建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:38:38.730

要实现像 Flipkart.com 这样的菜单，您应该在父子关系之间建立`relative`->关系。`absolute`给你举个例子：

*   使主菜单（父级）有一个`position: relative;`（`UL` 之后的元素`<div class="box-heading">`）
*   使子菜单元素（孩子）有`position: absolute;`（你已经有这个了`<ul class="second-level">`）
*   你也应该把孩子们带出屏幕（通过使用`left: -999em;`或使用`display: none;`）

一个基本的 CSS 样式可能如下所示：

```
.box-heading > ul {
  position: relative;
}

.box-heading .second-level {
  position: absolute; 
  left: -999em; 
  top: -2px; 
  padding: 5px; 
  margin: 0px; 
  width: 350px; 
  background-color: rgb(245, 245, 245); 
  border: 1px solid rgb(236, 236, 236); 
  z-index: 10; 
  display: block;
}

.box-heading li:hover .second-level {
  left: 166px;
} 
```

# spring - 为 RequestMappingHandlerMapping 定制 spring 3 mvc:annotation

> ID：13581472
> 
> 赞同：8
> 
> 时间：2012-11-27T09:51:33.520
> 
> 标签：spring, spring-mvc, spring-3

我正在使用`<mvc:annotation-driven/>`并且我想配置`RequestMappingHandlerMapping`为禁用`useTrailingSlashMatch`. 当我声明另一个 RequestMappingHandlerMapping 时，我将结束 2 `RequestMappingHandlerMapping`。我该如何配置`RequestMappingHandlerMapping`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T15:12:33.083

正如您已经注意到的，这在 xml 中是可行的，方法是删除`mvc:annotation-driven`和替换整个 xml 等效项：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"/>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
        </list>
    </property>
</bean>

<bean name="handlerMapping" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useTrailingSlashMatch" value="true"></property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:45:43.343

您可以尝试使用 Java 配置来覆盖`RequestMappingHandlerMapping`值吗

```
@Configuration
@ComponentScan(basePackages = "base.package.name")
public class WebAppConfig extends WebMvcConfigurationSupport {

    @Override
    @Bean
    public RequestMappingHandlerMapping requestMappingHandlerMapping() {
        RequestMappingHandlerMapping rmh = super.requestMappingHandlerMapping();
        rmh.setUseTrailingSlashMatch(false);
        return rmh;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T10:46:21.593

如果您想要一个不涉及在 Spring 中复制功能的解决方案，那么您可以覆盖 DisplatcherServlet。在 Servlet 3.0 容器中，这可能看起来像：

```
@WebServlet(name="spring-dispatcher", loadOnStartup=1, urlPatterns={"/"},
        initParams={
            @WebInitParam(name="contextConfigLocation", 
            value="/WEB-INF/spring/spring-dispatcher-servlet.xml")})
public class MyDispatcherServlet extends DispatcherServlet {

    @Override
    protected void initStrategies(ApplicationContext context) {
        super.initStrategies(context);
        for (RequestMappingInfoHandlerMapping handlerMapping 
                : BeanFactoryUtils.beansOfTypeIncludingAncestors(
                    context, RequestMappingInfoHandlerMapping.class, true, false).values()) {

            handlerMapping.setUseTrailingSlashMatch(false);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:03:16.677

将以下内容添加到您的 spring 配置文件以切换该`useTrailingSlashMatch`字段。

```
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
    <property name="useTrailingSlashMatch" value="true">
    </property>
</bean> 
```

# c# - 为什么我的数据库上下文中不存在 ObjectStateManager 属性？

> ID：13581473
> 
> 赞同：57
> 
> 时间：2012-11-27T09:51:35.370
> 
> 标签：c#, entity-framework

我需要从我的数据库上下文中返回一个新添加的对象列表。

我读过我必须`ObjectStateManager`为此目的使用。问题是，我的数据库上下文没有该`ObjectStateManager`属性。

但是，上下文可以很好地用于检索、添加和更新对象。

我正在使用 EF 5.0

```
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-11-27T09:56:56.097

试试这个：

```
var manager = ((IObjectContextAdapter)dbContext).ObjectContext.ObjectStateManager; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-03-31T12:35:13.607

试试这个：

```
dbContext.Entry(entity).State = EntityState.Modified; 
```

# android - 截屏延迟

> ID：13581476
> 
> 赞同：0
> 
> 时间：2012-11-27T09:52:02.107
> 
> 标签：android, android-asynctask, screenshot

我的应用程序中有一个活动，它需要几个屏幕捕获并通过单击按钮移动到下一个活动。我想在截屏时向用户显示一些进度或状态（需要 5-8 秒）。我尝试使用`AsyncTask`with `runOnUithread()`。但没有运气。即使我在 中编写了整个代码`doInBackground()`，我也不知道为什么在截取所有屏幕截图后会启动 ProgressDialog。这样做的更好方法是什么？这是我的代码：

```
public class TakeScreenShots extends AsyncTask<Void, Void, Void> {
        private ProgressDialog dialog;

            @Override
            protected void onPreExecute() {
                this.dialog = ProgressDialog.show(MyActivity.this, "MyTitle",
                        "Loading .....", true);

            }

            @Override
            protected Void doInBackground(Void... params) {
                 MyActivity.this.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        takeScreenshots();

                    }
                }); 

                return null;
            }

            @Override
            protected void onPostExecute(Void unused) {
                gotoNextActivity();

                this.dialog.dismiss();

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:43:07.333

不，你做错了，而是在`runOnUiThread`直接捕获它`doInBackground()`

这是工作示例

```
public class backImageProcess extends AsyncTask<Void, Void, Void>
    {
private ProgressDialog dialog;
        @Override
        protected void onPreExecute() {

            this.dialog = ProgressDialog.show(MyActivity.this, "MyTitle",
                        "Loading .....", true);

            try {
                File mFile= new File(mTempImagename);
                if(mFile!=null)
                    mFile.delete();
            } catch (Exception e) {
            }   

            super.onPreExecute();
        }
        @Override
        protected Void doInBackground(Void... params) {
            mLayoutRoot.setDrawingCacheEnabled(true);
            mLayoutRoot.buildDrawingCache();

            Bitmap mBitmap= mLayoutRoot.getDrawingCache();
            try {
                if(mBitmap!=null)
                {
                    FileOutputStream out = new FileOutputStream(mTempImagename);
                    mBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
                    out.flush();
                    out.close();
                }
            } catch (Exception e) { }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            if(this.dialog!=null)
                this.dialog.dismiss();

            gotoNextActivity();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:19:50.577

[我从这个问题](https://stackoverflow.com/questions/7937399/android-view-viewrootcalledfromwrongthreadexception-only-the-original-thread-t)的答案中得到了答案。我正在为图像视图设置一个可绘制对象。所以，我将那条线保留在 Ui Thread 中，并保留在 doInBackground() 中。

# sublimetext2 - 修改前的 Sublime Text 2？

> ID：13581478
> 
> 赞同：1
> 
> 时间：2012-11-27T09:52:07.677
> 
> 标签：sublimetext2, sublimetext

当我为 Sublime Text 2 编写代码插件时，我想使用事件**on_before_modified**。但是在[api 页面](http://www.sublimetext.com/docs/2/api_reference.html)（仅 on_modified）中，我没有看到该事件，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:23:57.593

没有`on_before_modified`事件处理程序；但是，您可以使用`on_query_context`它来做同样的事情。它有点复杂，但在修改任何内容之前都会调用它。

# mysql - 按未选择的列与联合排序

> ID：13581479
> 
> 赞同：0
> 
> 时间：2012-11-27T09:52:10.970
> 
> 标签：mysql, sql

嘿，我有一个按日期排序的查询，我希望日期与按时间排序相同，以保持稳定的结果。

我有以下查询：

```
 (
SELECT  'album' AS RowType, id, DATE, title, time_added
FROM albums
WHERE is_temp =0
AND subject_id =  '3'
)
UNION ALL (

SELECT  'video' AS RowType, id, DATE, title, time_added
FROM videos
WHERE is_temp =0
AND subject_id =  '3'
)
UNION ALL (

SELECT  'story' AS RowType, id, DATE, title, time_added
FROM stories
WHERE is_temp =0
AND subject_id =  '3'
)
ORDER BY DATE, time_added 
```

哪个效果很好，但我**不想**选择该`time_added`列，因为我的结果集中不需要它。

我能以某种方式实现这一目标吗？如果我删除 time_add 查询将不会运行。

我发现了以下内容：

> ORDER BY 子句导致对输出行进行排序。
> ORDER BY 的参数是用作排序键的表达式列表。对于简单的 SELECT，表达式不必是结果的一部分，但在复合 SELECT 中，每个排序表达式必须与结果列之一完全匹配。每个排序表达式可以可选地后跟一个 COLLATE 关键字和用于排序文本的排序函数的名称和/或关键字 ASC 或 DESC 以指定排序顺序。

我无法决定是否意味着这是不可能的，或者我应该更加努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:53:23.623

尝试这个

```
SELECT RowType
    , id
    , DATE
    , title
FROM 
(
    SELECT 'album' AS RowType , id , DATE , title , time_added
    FROM albums
    WHERE is_temp = 0 AND subject_id = '3'

    UNION ALL

    SELECT 'video' AS RowType , id , DATE , title , time_added
    FROM videos
    WHERE is_temp = 0 AND subject_id = '3'

    UNION ALL

    SELECT 'story' AS RowType , id , DATE , title , time_added
    FROM stories
    WHERE is_temp = 0 AND subject_id = '3'

) s
ORDER BY DATE , time_added 
```

# mysql - 转置 MySQL 查询 - 需要将行转换为列

> ID：13581482
> 
> 赞同：3
> 
> 时间：2012-11-27T09:52:15.137
> 
> 标签：mysql, sql

一个菜鸟 MYSQL 用户....我有一个简单的 MySQL 查询，它返回值，并使用 GROUP_CONCAT 函数：

```
SELECT Productid, Name, GROUP_CONCAT(value)
FROM search_export 
Group By Productid, Name;

Productid   Name                     GROUP_CONCAT(value)
666056542   Brand Name           Netgear
1054677552  Ethernet Technology  Gigabit Ethernet
665655662   Form Factor          Wall Mountable,Desktop
56565765    Media Type Supported     Twisted Pair 
```

但是，我需要转置查询，使其返回“名称”作为单独的列，而不是一行。这对 MySQL 来说有可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T10:15:49.217

您需要执行`PIVOT`MySQL 本身不支持的操作（与其他一些 RDBMS 不同）。

您可以获得的最接近的是按照以下几行构造 SQL：

```
SELECT   ProductId,
         GROUP_CONCAT(IF(Name='Brand Name'          ,value,NULL))
           AS `Brand Name`,
         GROUP_CONCAT(IF(Name='Ethernet Technology' ,value,NULL))
           AS `Ethernet Technology`,
         GROUP_CONCAT(IF(Name='Form Factor'         ,value,NULL))
           AS `Form Factor`,
         GROUP_CONCAT(IF(Name='Media Type Supported',value,NULL))
           AS `Media Type Supported`
FROM     search_export
GROUP BY ProductId 
```

如果可能的`Name`值是动态的，您可以从以下结果中以更高级别的语言生成此类 SQL：

```
SELECT DISTINCT Name FROM search_export 
```

事实上，甚至可以使用 SQL 本身：

```
SELECT CONCAT('
         SELECT   ProductId, ',
       GROUP_CONCAT('
                  GROUP_CONCAT(IF(Name=',QUOTE(Name),',value,NULL))
                    AS `',REPLACE(Name,'`','``'),'`'
       ), '
         FROM     search_export
         GROUP BY ProductId
       ')
INTO @sql
FROM (
  SELECT DISTINCT Name FROM search_export
) t;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请注意，如果有很多不同的`Name`值，您可能需要[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len)从其默认值 1KiB 增加。

# bash - bash printf：忽略参数或按索引访问？

> ID：13581484
> 
> 赞同：1
> 
> 时间：2012-11-27T09:52:32.053
> 
> 标签：bash, printf

我有一个 bash 函数，它获取值（使用 curl 和 cut）并从中创建一个文件名。现在我想支持需要一组不同参数的第二种命名方案。

例子：

```
#!/bin/bash

TEMPLATE="%02i. %s.txt"

foo() {
    a="Imagine these to"
    b="be set dynamically"
    c="42"

    filename="$(printf "$TEMPLATE" "$c" "$a")"
    # second: filename="$a - $b.txt"
    # or:     filename="$(printf "%s - %s.txt" "$a" "$b")"
    echo "$filename"
    # generate file
}

# actual script loops over:
foo 
```

其中一个值是一个数字，如果需要，应该用前导零填充，因此`printf`在当前实现中。

有没有办法通过全局设置不同的模板来实现这一点？这将要求模板可以按索引访问参数或至少跳过其中一些参数。

如果没有，我的替代方案是什么？模板由命令行参数选择，初始化后不改变。

什么不起作用：

*   bash 手册页建议不可能输出零长度（跳过值）
*   C 的 printf 手册页提到了一个 "%m$" 构造，显然 bash 不支持它
*   函数本身生成值，因此它无法接收完整的文件名作为参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:59:09.607

如果需要跳过参数，可以使用`%.s`. 例子：

```
$ printf "%.s%s\n" "Bonjour" "Hello"
Hello
$ printf "%s%.s\n" "Bonjour" "Hello"
Bonjour 
```

AFAIK，您不能按索引访问参数。

如果您需要将格式化的字符串存储在变量中，请不要使用子shell，如下所示：

```
$ variable=$(printf "%.s%s" "Bonjour" "Hello")
$ echo "$variable"
Hello 
```

相反，请使用以下`-v`选项`printf`（键入`help printf`以获取详细信息），如下所示：

```
$ printf -v variable "%.s%s" "Bonjour" "Hello"
$ echo "$variable"
Hello 
```

此外，如果您的模板可以来自用户输入，我建议您`--`在它之前添加（这是为了结束命令的选项，以防用户想用破折号开始模板）。因此我会替换你的行

```
filename="$(printf "$TEMPLATE" "$c" "$a")" 
```

和

```
printf -v filename -- "$TEMPLATE" "$c" "$a" 
```

最后，使用大写的变量名被认为是不好的 bash 做法。

# javascript - 使用 postMessage 在两个 iframe 子项之间进行通信

> ID：13581493
> 
> 赞同：16
> 
> 时间：2012-11-27T09:52:58.597
> 
> 标签：javascript, iframe, postmessage

我有一些嵌入代码，用户可以放在他们的网站上。它在页面上创建两个子 iframe。我希望这些孩子能够交流。

我正在使用 javascript 的`window.postMessage` [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

由于两个 iframe 子级无法直接通信，因此我将父级用作消息的中继。但是，父级可以位于不同的域中，因为它是可嵌入的代码。

当所有三个（父母和两个孩子）都在同一个域上时，这很容易，我可以通过安全检查来检查这`e.origin`是我自己的网站

```
# coffeescript
# host = "http://www.mysite.com"
host = "http://localhost"

receive_message = (e) ->
  console.log("received message from " + e.origin + ": " + e.data)
  return if e.origin != host

  if e.data == "show"
    ...
  else if e.data == "hide"
    ...

window.addEventListener("message", receive_message, false) 
```

当父母可以在任何域上时，检查来源的优雅方法是什么？

什么是允许调试源可以是本地主机的脚本的好方法？

如果传递非破坏性/更改消息，仅检查数据参数是否足够？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T19:46:34.883

为什么说子iframe不能直接通信？事实上，他们可以。您可以在子 iframe 中执行的操作是使用该`window.parent`属性获取对父窗口的引用，然后使用父窗口的`frames`属性获取对所有子 iframe 的引用（该`frames`属性为您提供此类引用的数组）。之后，您可以`postMessage`在这些引用中的每一个上使用，并在 postMessage 调用中设置所需的原始限制，这样您就可以确定只有正确的 iframe 才能收到消息。

请注意，即使所有三个窗口（iframe1、父窗口和 iframe2）都在不同的域上，这也会起作用，因为 iframe1 没有对父窗口做任何事情（这会违反 SOP），它只是获取对嵌套 iframe 的引用。

链接：

[https://developer.mozilla.org/en-US/docs/DOM/window.parent](https://developer.mozilla.org/en-US/docs/DOM/window.parent)

[https://developer.mozilla.org/en-US/docs/DOM/window.frames](https://developer.mozilla.org/en-US/docs/DOM/window.frames)

# java - JFormattedTextField 删除用户输入

> ID：13581494
> 
> 赞同：1
> 
> 时间：2012-11-27T09:52:59.570
> 
> 标签：java, swing, user-interface, jformattedtextfield

我有以下代码：

```
public test() {
    setLayout(new FlowLayout());
    JFormattedTextField price = new JFormattedTextField(new DecimalFormat("#,##0.00 \u00A4"));
    price.setValue(new Float(105.00));
    add(price);
    add(new JButton("Ok"));

    pack();
    setVisible(true);

} 
```

如果我现在输入一个数字，例如“20”。文本字段再次输入“105.00”。为什么它不接受我的输入并且总是回到默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:47:19.583

您的 decimalFormat 无法正常工作。

尝试删除**,**

之后 20 欧元有效

但请注意，您仍然必须在数字后输入空格和€符号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:40:27.367

与第 1 点和第 2 点相比，共有三种方法，从最简单开始，以无用结尾，可能是胡说八道。

*   使用`NumberFormat.getCurrencyInstance();`or `NumberFormat.getCurrencyInstance(Locale);`for `Currency symbol`, 那么这个值对具体`JTextField`/ `JFormattedTextField`/ `JSpinner`/ `XxxCellRenderer`/有效`XxxCellEditor`,

代码

```
import java.awt.GridLayout;
import java.math.RoundingMode;
import java.text.NumberFormat;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.text.NumberFormatter;

public class MaskFormatterTest {

    public static void main(String[] args) throws Exception {
        //NumberFormat format = NumberFormat.getNumberInstance();
        NumberFormat format = NumberFormat.getCurrencyInstance();
        format.setMaximumFractionDigits(2);
        format.setMinimumFractionDigits(2);
        format.setParseIntegerOnly(true);
        format.setRoundingMode(RoundingMode.HALF_UP);

        NumberFormatter formatter = new NumberFormatter(format);
        formatter.setMaximum(1000.0);
        formatter.setMinimum(0.0);
        formatter.setAllowsInvalid(false);
        formatter.setOverwriteMode(false);

        JFormattedTextField tf = new JFormattedTextField(formatter);
        tf.setColumns(10);
        tf.setValue(123456789.99);
        JFormattedTextField tf1 = new JFormattedTextField(formatter);
        tf1.setValue(1234567890.99);
        JFormattedTextField tf2 = new JFormattedTextField(formatter);
        tf2.setValue(1111.1111);
        JFormattedTextField tf3 = new JFormattedTextField(formatter);
        tf3.setValue(-1111.1111);
        JFormattedTextField tf4 = new JFormattedTextField(formatter);
        tf4.setValue(-56);

        JFrame frame = new JFrame("Test");
        frame.setLayout(new GridLayout(5, 0));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(tf);
        frame.add(tf1);
        frame.add(tf2);
        frame.add(tf3);
        frame.add(tf4);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

.

*   应用自己的`NavigationFilter`，固定位置可以在////中位置（偏差）的开始`JTextField`或结束`JFormattedTextField`，`JSpinner``XxxCellRenderer``XxxCellEditor`

代码

```
//@see & read http://stackoverflow.com/questions/7421337/limited-selection-in-a-jtextfield-jtextcomponent
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;

public class NavigationFilterPrefixWithBackspace extends NavigationFilter {

    private int prefixLength;
    private Action deletePrevious;

    public NavigationFilterPrefixWithBackspace(int prefixLength, JTextComponent component) {
        this.prefixLength = prefixLength;
        deletePrevious = component.getActionMap().get("delete-previous");
        component.getActionMap().put("delete-previous", new BackspaceAction());
        component.setCaretPosition(prefixLength);
    }

    @Override
    public void setDot(NavigationFilter.FilterBypass fb, int dot, Position.Bias bias) {
        fb.setDot(Math.max(dot, prefixLength), bias);
    }

    @Override
    public void moveDot(NavigationFilter.FilterBypass fb, int dot, Position.Bias bias) {
        fb.moveDot(Math.max(dot, prefixLength), bias);
    }

    class BackspaceAction extends AbstractAction {

        private static final long serialVersionUID = 1L;

        public void actionPerformed(ActionEvent e) {
            JTextComponent component = (JTextComponent) e.getSource();
            if (component.getCaretPosition() > prefixLength) {
                deletePrevious.actionPerformed(null);
            }
        }
    }

    public static void main(String args[]) throws Exception {
        JTextField textField = new JTextField("Prefix_", 20);
        textField.setNavigationFilter(new NavigationFilterPrefixWithBackspace(7, textField));
        JFrame frame = new JFrame("Navigation Filter Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(textField);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

.

*   创建自己`InputMask`的`InputVerifier`, workaroung 可以/不能为（每个）`JTextField`/ `JFormattedTextField`/ `JSpinner`/ `XxxCellRenderer`/不同`XxxCellEditor`，

# php - 使用 Varnish HTTP 加速器清除目录下的所有文件

> ID：13581495
> 
> 赞同：4
> 
> 时间：2012-11-27T09:53:00.313
> 
> 标签：php, varnish, varnish-vcl

是否可以使用 Varnish 清除特定目录下的所有文件？你怎么能在 PHP 脚本中完成这个？

例如，如果 URL 包含路径`/product/a-specific-product/`，是否也可以清除诸如`/product/a-specific-product/a-sub-page/`?

我有以下函数用于清除 Varnish 3 中的特定 URL（类的一部分`VarnishPurger()`：

```
public function executePurge()
{
    $purgeUrls = array_unique($this->purgeUrls);

    foreach($purgeUrls as $url)
    {
        $this->purgeUrl($url);
    }

    if (!empty($purgeUrls))
    {
        $this->purgeUrl(home_url());
    }        
}

protected function purgeUrl($url)
{
    $c = curl_init($url);
    curl_setopt($c, CURLOPT_CUSTOMREQUEST, 'PURGE');
    curl_exec($c);
    curl_close($c);    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:58:54.297

您可以在 Varnish 中创建一个自定义 PURGE 处理程序来处理正则表达式清除，例如，使用`ban_url()`.

例如，在 PHP 中，当您想要清除时添加自定义 HTTP 标头以供 Varnish 发现。

```
curl_setopt($c, CURLOPT_HTTPHEADER, array('X-Purge-Regex-URL')); 
```

然后在 vcl_recv() 添加

```
if (req.http.X-Purge-Regex-URL) {
  if (!client.ip ~ purge) {
    error 405 "Not allowed.";
  }
  ban_url(req.url);
  error 200 "Banned URL";
} 
```

`/product/a-specific-product/`现在，当您对匹配正则表达式的所有内容发出清除时，包括`/product/a-specific-product/a-sub-page/`将被清除。

请注意，HTTP 主机被忽略，因此如果您正在运行虚拟主机并且只希望清除特定站点，则需要使用`ban()`和`req.http.host`参数`req.url`。如果您需要这种类型的解决方案，请告诉我。

此外，如前所述，清除是正则表达式清除，因此清除`/product`将清除*所有*匹配的 URL `product`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:13:16.843

尝试这个：

```
// $version = VERSION_OF_VARNISH;
$command = $version >= 3 ? "ban" : "purge";
exec("$command req.http.host ~ $host && req.url ~ \"$pattern\""); 
```

# typo3 - 是否有将 tt_news AMENU 集成到我现有的 HMENU 的解决方案？

> ID：13581496
> 
> 赞同：0
> 
> 时间：2012-11-27T09:53:01.153
> 
> 标签：typo3, typoscript, tt-news

我的菜单结构应该是这种格式

PressRelease（在页面树中） Archive（在页面树中） - 2012 年新闻稿（来自 tt_news 档案） - 2011 年新闻稿（来自 tt_news 档案）

这是我的 HMENU

```
 lib.sidebarmenu = COA
    lib.sidebarmenu {
    10 = HMENU
    10 {
        entryLevel = 1
        1 = TMENU
        1 {
           expAll = 1
           noBlur = 1
           stdWrap.cObject = COA
           stdWrap.cObject {
           10 = HMENU
           10 {
              special = rootline
              special.range = 1|1
               wrap = <h2>|</h2>
               1 = TMENU
               1.NO.doNotLinkIt = 0
               }

           20 = HMENU
           20 {
                entryLevel = 1
                1 = TMENU
                1 {
                  expAll = 1
                  noBlur = 1
                  NO {            
                     ATagTitle.field = subtitle//title
                     ATagParams = class="sidebarNav"
                     stdWrap.htmlSpecialChars = 1 
                     wrapItemAndSub = <li>|</li>      
                      }
                   ACT = 1
                   ACT {
                        wrapItemAndSub = <li class="active"> | </li>

                       }

                   }
                   2 < .1
                   2.wrap = <ul id="submenu">|</ul>
                   3 < .2
                   4 < .2
                 }
             }
            wrap =  <ul class="tabs"> | </ul>
            NO {   

          }

        }

      }

    }
 This is my AMENU

  [PIDinRootline = 55]
  lib.newsArchiveMenu < plugin.tt_news
  lib.newsArchiveMenu {
    code >
    code = AMENU
    pid_list >
    pid_list = 42,61,63
    singlePid = 44
    archiveTypoLink.parameter =55
    catImageMode = 0
    catTextMode = 0
    archiveMode = year
    archiveTitleCObject {
            10 = TEXT
            10.field = start
            10.strftime =%Y
             }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:15:16.643

是的，只需将您的`tt_news`菜单作为 COA 对象的下一个元素（可能就在`[PIDinRootline = 55]`条件结束之前：

```
lib.sidebarmenu.30 < lib.newsArchiveMenu 
```

# oracle - 从 plsql 块执行查询花费的时间太长

> ID：13581500
> 
> 赞同：2
> 
> 时间：2012-11-27T09:53:11.093
> 
> 标签：oracle, plsql

此查询单独执行时需要 1 秒执行当通过过程执行相同查询时需要 20 秒，请帮助我

```
SELECT * FROM
     (SELECT TAB1.*,ROWNUM ROWNUMM FROM
       (SELECT wh.workitem_id, wh.workitem_priority, wh.workitem_type_id, wt.workitem_type_nm,
          wh.workitem_status_id, ws.workitem_status_nm, wh.analyst_group_id,
          ag.analyst_group_nm, wh.owner_uuid, earnings_estimate.pr_get_name_from_uuid(owner_uuid) owner_name,
          wh.create_user_id, earnings_estimate.pr_get_name_from_uuid( wh.create_user_id) create_name, wh.create_ts,
          wh.update_user_id,earnings_estimate.pr_get_name_from_uuid(wh.update_user_id) update_name, wh.update_ts, wh.bb_ticker_id, wh.node_id,
          wh.eqcv_analyst_uuid, earnings_estimate.pr_get_name_from_uuid( wh.eqcv_analyst_uuid) eqcv_analyst_name,
          WH.WORKITEM_NOTE,Wh.PACKAGE_ID ,Wh.COVERAGE_STATUS_NUM ,CS.COVERAGE_STATUS_CD ,Wh.COVERAGE_REC_NUM,I.INDUSTRY_CD INDUSTRY_CODE,I.INDUSTRY_NM
INDUSTRY_NAME,WOT.WORKITEM_OUTLIER_TYPE_NM  as WORKITEM_SUBTYPE_NM
          ,count(1) over() AS total_count,bro.BB_ID BROKER_BB_ID,bro.BROKER_NM BROKER_NAME, wh.assigned_analyst_uuid,earnings_estimate.pr_get_name_from_uuid(wh.assigned_analyst_uuid)
assigned_analyst_name
     FROM earnings_estimate.workitem_type wt,
          earnings_estimate.workitem_status ws,
          earnings_estimate.workitem_outlier_type wot,
          (SELECT * FROM (
               SELECT  WH.ASSIGNED_ANALYST_UUID,WH.DEFERRED_TO_DT,WH.WORKITEM_NOTE,WH.UPDATE_USER_ID,EARNINGS_ESTIMATE.PR_GET_NAME_FROM_UUID(WH.UPDATE_USER_ID)
UPDATE_NAME, WH.UPDATE_TS,WH.OWNER_UUID, EARNINGS_ESTIMATE.PR_GET_NAME_FROM_UUID(OWNER_UUID)
OWNER_NAME,WH.ANALYST_GROUP_ID,WH.WORKITEM_STATUS_ID,WH.WORKITEM_PRIORITY,EARNINGS_ESTIMATE.PR_GET_NAME_FROM_UUID( WI.CREATE_USER_ID) CREATE_NAME, WI.CREATE_TS,
               wi.create_user_id,wi.workitem_type_id,wi.workitem_id,RANK() OVER (PARTITION BY WH.WORKITEM_ID ORDER BY WH.CREATE_TS DESC NULLS LAST, ROWNUM) R,
               wo.bb_ticker_id, wo.node_id,wo.eqcv_analyst_uuid,
               WO.PACKAGE_ID ,WO.COVERAGE_STATUS_NUM ,WO.COVERAGE_REC_NUM,
               wo.workitem_outlier_type_id                             
                     FROM earnings_estimate.workitem_history wh
                     JOIN EARNINGS_ESTIMATE.workitem_outlier wo
                     ON wh.workitem_id=wo.workitem_id
                     JOIN earnings_estimate.workitem wi
                     ON wi.workitem_id=wo.workitem_id
                     AND WI.WORKITEM_TYPE_ID=3
                     and wh.workitem_status_id not in (1,7)
                    WHERE ( wo.bb_ticker_id IN (SELECT  
                           column_value from table(v_tickerlist)  )
            )
      )wh
                       where r=1
                    AND DECODE(V_DATE_TYPE,'CreatedDate',WH.CREATE_TS,'LastModifiedDate',WH.UPDATE_TS) >= V_START_DATE
                    AND decode(v_date_type,'CreatedDate',wh.create_ts,'LastModifiedDate',wh.update_ts) <= v_end_date
                    and decode(wh.owner_uuid,null,-1,wh.owner_uuid)=decode(v_analyst_id,null,decode(wh.owner_uuid,null,-1,wh.owner_uuid),v_analyst_id)
                    ) wh,
          earnings_estimate.analyst_group ag,
          earnings_estimate.coverage_status cs,
          earnings_estimate.research_document rd,
         ( SELECT
             BB.BB_ID ,
              BRK.BROKER_ID,
              BRK.BROKER_NM
          FROM EARNINGS_ESTIMATE.BROKER BRK,COMMON.BB_ID BB
          WHERE  BRK.ORG_ID = BB.ORG_ID
          AND BRK.ORG_LOC_REC_NUM = BB.ORG_LOC_REC_NUM
          AND BRK.primary_broker_ind='Y') bro,
          earnings_estimate.industry i
     WHERE  wh.analyst_group_id = ag.analyst_group_id
      AND wh.workitem_status_id = ws.workitem_status_id
      AND wh.workitem_type_id = wt.workitem_type_id
      AND wh.coverage_status_num=cs.coverage_status_num
      AND wh.workitem_outlier_type_id=wot.workitem_outlier_type_id
      AND wh.PACKAGE_ID=rd.PACKAGE_ID(+)
      AND rd.industry_id=i.industry_id(+)
      AND rd.BROKER_BB_ID=bro.BB_ID(+)
      ORDER BY wh.create_ts)tab1 )
      ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:51:29.067

我同意这个问题很可能与`SELECT column_value from table(v_tickerlist)`.

默认情况下，Oracle 估计表函数返回 8168 行。由于您使用单个值测试查询，因此我假设实际值的数量通常要小得多。与任何预测一样，基数估计总是错误的。但它们至少应该在优化器正确完成工作的实际基数范围内。

您可以强制 Oracle 始终使用动态抽样检查大小。这将需要更多时间来生成计划，但在这种情况下可能是值得的。

例如：

```
SQL> --Sample type
SQL> create or replace type v_tickerlist is table of number;
  2  /

Type created.

SQL> --Show explain plans
SQL> set autotrace traceonly explain;
SQL> --Default estimate is poor.  8168 estimated, versus 3 actual.
SQL> SELECT column_value from table(v_tickerlist(1,2,3));

Execution Plan
----------------------------------------------------------
Plan hash value: 1748000095

----------------------------------------------------------------------------------------------
| Id  | Operation                             | Name | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                      |      |  8168 | 16336 |    16   (0)| 00:00:01 |
|   1 |  COLLECTION ITERATOR CONSTRUCTOR FETCH|      |  8168 | 16336 |    16   (0)| 00:00:01 |
----------------------------------------------------------------------------------------------

SQL> --Estimate is perfect when dynamic sampling is used.
SQL> SELECT /*+ dynamic_sampling(tickerlist, 2) */ column_value
  2  from table(v_tickerlist(1,2,3)) tickerlist;

Execution Plan
----------------------------------------------------------
Plan hash value: 1748000095

----------------------------------------------------------------------------------------------
| Id  | Operation                             | Name | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                      |      |     3 |     6 |     6   (0)| 00:00:01 |
|   1 |  COLLECTION ITERATOR CONSTRUCTOR FETCH|      |     3 |     6 |     6   (0)| 00:00:01 |
----------------------------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

SQL> 
```

如果这没有帮助，请查看您的解释计划（并在此处发布）。找出基数估计最错误的地方，然后尝试找出原因。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-30T22:27:06.823

您的查询太大，在批量数据上执行时需要时间。尝试放置一些非规范化的临时表，在那里提取数据，然后在临时表之间加入。这将提高性能。

使用此独立查询，请勿在子查询中传递任何变量，如下行所示...

> WHERE ( wo.bb_ticker_id IN (SELECT
> column_value from table(v_tickerlist)

此外，外连接会影响性能。更好地实现非规范化临时表

# c++ - 在 C++ 中将临时推入向量中

> ID：13581501
> 
> 赞同：0
> 
> 时间：2012-11-27T09:53:14.340
> 
> 标签：c++

假设启用了正常的编译器优化，以下存在多少副本发生/对象：

```
std::vector<MyClass> v;
v.push_back(MyClass()); 
```

如果不完全是 1 个对象创建和 0 个复制，我能做些什么（包括更改`MyClass`）来实现这一点，因为在我看来，这就是真正需要的全部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:05:58.580

如果 的构造函数`MyClass`有副作用，则在 C++03 中不允许省略副本。这是因为作为副本源的临时对象已绑定到引用（的参数`push_back`）。

如果 的复制构造函数`MyClass`没有副作用，则允许编译器根据“as-if”规则对其进行优化。我认为确定它是否真的通过“正常优化”这样做的唯一明智方法是检查发出的代码。不同的人有不同的想法什么是正常的，并且给定的编译器可能对`MyClass`. 我的猜测是，这相当于编译器（或链接器）是否内联了所有可见的内容。如果是，那么它可能会优化，如果不是，那么它不会。因此，即使构造函数代码的大小也可能是相关的，别管它做了什么。

所以我认为你可以做的主要事情是确保默认和复制构造函数`MyClass`都没有副作用并且可以内联。如果它们不可用，那么编译器当然会假设它们可能有副作用并会进行复制。如果链接时优化对您来说是一个正常的编译器选项，那么您不必做太多事情就可以使它们可用。否则，如果它们是用户定义的，则在定义`MyClass`. 您可能能够摆脱具有某些副作用的默认构造函数：如果效果不依赖于与向量元素的地址不同的临时地址，那么“as-if”仍然适用。

在 C++11 中，你有一个动作（如果它有副作用，同样也不能被忽略），但你可以使用它`v.emplace_back()`来避免它。移动将调用移动构造函数`MyClass`，否则将调用复制构造函数，并且我上面所说的关于“as-if”的所有内容都适用于移动。`emplace_back()`调用无参数构造函数来构造向量元素（或者如果你将参数传递给`emplace_back`任何与这些参数匹配的构造函数），我认为这正是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:55:54.247

你的意思是：

```
std::vector<MyClass> v;
v.push_back(MyClass()); 
```

没有任何。临时将导致调用 push_back 的移动版本。即使是移动结构也很可能会被省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:00:53.320

如果您有 C++11 编译器，则可以使用[emplace_back](http://msdn.microsoft.com/de-de/library/vstudio/dd647620.aspx)构造向量末尾的元素，需要零份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:07:36.340

在 C++03 中，您将拥有一个构造和一个副本，以及临时的销毁。

如果你的编译器支持 C++11 并且 MyClass 定义了一个移动构造函数，那么你就有一个构造和一个移动。

正如 Timbo 所提到的，您还可以使用 emplace_back 来避免移动，即就地构建的对象。

# image - 生成更多不同角度的物体图像

> ID：13581502
> 
> 赞同：3
> 
> 时间：2012-11-27T09:53:15.153
> 
> 标签：image, image-processing, image-manipulation

我有几个旋转物体的图像。每个图像显示不同的角度。现在我想让用户用他或她的手指旋转对象。这可行，但没有足够的帧来显示平滑的旋转。太浮躁了。

我想让它更平滑，因此我可能需要生成更多“步骤”，生成不同缺失角度的图像。我可以使用现有的算法或技术吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:09:38.473

我认为，如果您尝试在两个连续图像之间临时插入像素值，会导致结果不佳，但可能值得一试。

一种更有趣的方法是使用立体技术对对象进行 3D 估计，然后在中间位置投射估计场景的合成视图。为此，您现在需要在每一帧中确定对象的精确角度。遮挡也是立体镜的一个问题。

# .net - 多视图控制和扩展属性问题

> ID：13581509
> 
> 赞同：0
> 
> 时间：2012-11-27T09:53:46.850
> 
> 标签：.net, ajax, customvalidator, multiview, expando

我有一个多视图控件，我有效地使用它作为通过 4 个面板完成表单的向导。

每个视图都有许多输入控件/验证器控件。为了重用，这些被捆绑在一起作为用户控件。例如，我的电子邮件用户控件包含一个面板，带有标签、文本框、必需的验证器和正则表达式验证器。

我知道使用多视图加载所有内容，然后隐藏当前视图之外的控件，但这给我带来了一个小问题，我正在寻找如何解决它的最佳建议。

这是场景。

面板 3 包含一个名为“数字”的用户控件。它有一个面板，包含一个标签、文本框和一个自定义验证器。

该控件具有可以设置的属性（我通常在包含的 aspx 页面中设置它们），并且该控件在页面加载时填充。

页面：

```
<uc4:Number ID="UC_Number" runat="server"
    Label="Monthly Take Home Pay" 
    MinValue="1"
    MaxValue="9999" /> 
```

Page_Load 数量：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        SetValidation();
    }
} 
```

我遇到的问题出在 SetValidation 方法中。

```
 void SetValidation()
    {
        CusVal_ValueLimits.ErrorMessage = GetErrorMessage();

        if (MinValue > 0)
        {
            ScriptManager.RegisterExpandoAttribute(
                this,
                CusVal_ValueLimits.ClientID,
                "MinValue",
                MinValue.ToString(),
                false);
        }

        if (MaxValue > 0)
        {
            ScriptManager.RegisterExpandoAttribute(
                this,
                CusVal_ValueLimits.ClientID,
                "MaxValue",
                MaxValue.ToString(),
                false);
        }
    } 
```

为了允许在客户端上进行自定义验证，我添加了 2 个新的 expando 属性。这会导致问题，因为创建了属性但用户控件随后被多视图隐藏。

.net ajax 代码无法很好地处理此问题，并导致 javascript 错误，因为引用的用户控件不可用，这反过来又导致页面上的其余 javascript 落在其 ar*e 上。

我需要知道的是，我如何安全地加载这些用户控件，即当视图可见时，或者更改我的 expando 相关代码以应对这种情况。

所有想法都表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T18:57:40.183

我通过检查用户控件在预渲染期间是否可见 if(this.Visible) 以及如果是则调用 expando 的东西来解决这个问题。

# mysql - 从一个表中选择记录并将其插入到具有不同结构的不同表中，避免重复

> ID：13581514
> 
> 赞同：1
> 
> 时间：2012-11-27T09:53:59.567
> 
> 标签：mysql

我有两个结构不同的表，比如`property_bid`和`sc_property_queries`。

`sc_property_queries`保存来自`property_bid`以及另一个表的值。并且有一个`query_method`在目标表中调用的字段，它告诉行来自哪个表。该字段`raw_id`包含来自源表的 ID。我想要做的是，从`property_bid`表中选择并将其插入到`sc_property_queries`中，但仅使用新项目，即避免基于`raw_id`and的重复项`query_method`。下面是我的 MySQL 代码，它似乎不起作用

```
INSERT INTO sc_property_queries (
  `property_id`,
  `raw_id`, `query_method`,
  `contact_fullname`,
  `contact_address`,
  `contact_email`,
  `contact_phone`,
  `contact_date`,
  `entry_date`,
  `title`,
  `query_status`,
  `remarks`,
  `description`
) 
SELECT 
 t1.property_id,
  t1.id,
  'web-bids',
  t1.fullname,
  'n/a',
  t1.email,
  t1.phone,
  t1.on_date,
  NOW(),
  'n/a',
  '1',
  'n/a',
  t1.comment 
FROM
  property_bid t1 
  LEFT JOIN sc_property_queries t2 
    ON (t1.id = t2.raw_id) 
WHERE  t2.query_method='web-bids' AND t2.raw_id IS NULL; 
```

此查询应返回`property_bid`sc_property_queries 中不存在的所有行。但它什么也没做。任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:57:36.373

`WHERE t2.raw_id IS NULL`将您的结果集限制为仅在 中不存在的那些记录`t2`；因此`t2.*`都是`NULL`。因此，该标准不能与其他标准同时为真`WHERE t2.query_method='web-bids'`。

也许您打算在联接中包含该标准：

```
FROM
  property_bid t1 
  LEFT JOIN sc_property_queries t2 
    ON (t1.id = t2.raw_id AND t2.query_method='web-bids')
WHERE t2.raw_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:02:46.733

您不需要加入，只需使用 NOT IN：

```
FROM
  property_bid t1 
  where 
   t1.id not in (select t2.raw_id from sc_property_queries t2 where t2.query_method='web-bids') 
```

# pandas - 过滤具有 MultiIndex 列的行

> ID：13581517
> 
> 赞同：2
> 
> 时间：2012-11-27T09:54:04.640
> 
> 标签：pandas

创建具有 MultiIndex 列的 DataFrame 时，似乎无法使用类似`df[df["AA"]>0.0]`. 例如：

```
import pandas as pd
import numpy as np

dates = np.asarray(pd.date_range('1/1/2000', periods=8))
_metaInfo = pd.MultiIndex.from_tuples([('AA', '[m]'), ('BB', '[m]'), ('CC', '[s]'), ('DD', '[s]')], names=['parameter','unit'])

df = pd.DataFrame(randn(8, 4), index=dates, columns=_metaInfo)
print df[df['AA']>0.0] 
```

df["AA"]>0.0 的结果是一个索引 DataFrame iso 一个 Timeseries。这可能会导致崩溃。

当使用相同的 metaInfo 作为行的索引时，情况有所不同：

```
df1 = pandas.DataFrame(np.random.randn(4, 6), index=_metaInfo)
print df1[df1["AA"]>0.0] 
```

产生：

```
[ 1.13268106 -0.06887761  0.68535054  2.49431163 -0.29349413  0.34772553] 
```

AA 行中大于零的元素。这仅给出 AA 行的值，而不给出 DataFrame 的其他列的值。

有解决方法吗？我是否正在尝试做我不应该做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:08:09.503

您只能选择“AA”列并将其用作整个 df 的过滤器。

喜欢：

```
df[df[('AA','[m]')]>0.0]

parameter         AA        BB        CC        DD
unit             [m]       [m]       [s]       [s]
2000-01-01  0.600748 -1.163793 -0.982248 -0.397988
2000-01-03  1.045428  0.365353  0.049152  1.902942
2000-01-06  0.891202  0.021921  1.215515 -1.624741
2000-01-08  0.999217 -1.110213  0.257718 -0.096018 
```

# php - 如何在标头中设置 ip，然后使用 cron 作业运行脚本？

> ID：13581521
> 
> 赞同：1
> 
> 时间：2012-11-27T09:54:14.523
> 
> 标签：php, http, header, http-headers, pear

我有脚本这段代码：

```
require_once 'Request2.php';
$request  = new HTTP_Request2('http://fakevisit.blogfa.com/');
$request->setHeader(array(
    'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Encoding: gzip, deflate',
    'Accept-Language: en-US,en;q=0.5',
    'Connection: keep-alive',
    'Ip: 88.168.25.98',
    'SomeBull: BeingIgnored',
    'Referer: http://www.google.com',
    'User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)'
));

$response = $request->send();
echo "Response body:\n" . $response->getBody(); 
```

该程序每 1 分钟运行一次 运行正常。但在 google analytics 和其他计数器脚本中不会添加到访问者！在这条线上

```
echo "Response body:\n" . $response->getBody(); 
```

使用脚本显示访问者数量的页面的全部内容在页面中正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:59:12.533

谷歌分析和大多数其他人使用 Javascript 来填充命中。如果您通过 Cron/Scheduled Tasks 调用它，那么您正在执行 HTTP 请求并获取响应，但您没有执行 GA 的 Javascript，因此不会添加任何命中。

# c# - 什么是 SSL 连接以及如何在 Windows 8 Metro 应用程序中使用它？

> ID：13581529
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:54:33.627
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我要为 Windows 8 Metro App 创建一个 XMPP 客户端，我需要启用套接字连接。我不知道 ssl 连接以及如何使用它。Metro 应用程序在其库中是有限的。

地铁应用程序中有 2 个套接字连接，

```
 StreamSocket
    DatagramSocket 
```

哪一个适合 ssl 连接，有人说我如何使用它来启用它。.

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:02:10.240

在 Net 2.0 之后，创建了一个名为 SslStream 的类。您可以通过 SSL 安全协议（安全套接字层）验证您的服务器和客户端

在此处查找详细信息和示例代码：

[http://msdn2.microsoft.com/en-us/library/system.net.security.sslstream.aspx](http://msdn2.microsoft.com/en-us/library/system.net.security.sslstream.aspx)

但是您需要自己的 SSL 证书！

有关 SSL 的更多信息，请参见此处： [http ://www.anything-it.com.au/4-tafe/simplessl.htm](http://www.anything-it.com.au/4-tafe/simplessl.htm)

# javascript - 使用 EaselJS 库在 Firefox 中的缓慢移动

> ID：13581532
> 
> 赞同：5
> 
> 时间：2012-11-27T09:54:55.810
> 
> 标签：javascript, canvas, easeljs

我想知道为什么这个简单的球移动代码在 IE 和 Chrome 中运行流畅，而在 Firefox 中它看起来很慢，尽管它保持相同的 FPS 速率。

我需要做什么才能在所有浏览器中实现相同的平滑移动？

```
var canvas,canvasContext,
    ball,txt_shadow,txt_fps,
    speed,angle;        

function init() {

    canvas = document.getElementById("canvas");
    canvasContext = canvas.getContext("2d");
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    stage = new createjs.Stage(canvas);
    stage.autoClear = true;

    txt_shadow= new createjs.Shadow("black", 1, 1, 0);

    ball = new createjs.Shape();
    ball.graphics.beginFill("red").drawCircle(0, 0, 40);

    txt_fps = new createjs.Text("", "18px Arial", "white");
    txt_fps.shadow=txt_shadow;
    txt_fps.x=canvas.width/2;txt_fps.y=100;

    stage.addChild(txt_fps,ball);

    ball.x=canvas.width/2;ball.y=canvas.height/2;
    angle=Math.random()*360;
    speed=8;

    createjs.Ticker.addListener(window);
    createjs.Ticker.setFPS(60);

} 

function tick() {    

    fps=createjs.Ticker.getMeasuredFPS();
    txt_fps.text=Math.round(fps);    
    ball.x += Math.sin(angle*(Math.PI/-180))*speed;
    ball.y += Math.cos(angle*(Math.PI/-180))*speed;

    if (ball.y<0 || ball.x<0 || ball.x>canvas.width || ball.y>canvas.height) {
        angle+=45;
    }
    stage.update();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T23:20:22.640

[画布文本渲染很慢。](https://stackoverflow.com/questions/18074896/optimize-browser-text-rendering)`<canvas>`通过在其中生成文本而不是将 FPS 写入单独的元素，您对自己造成了伤害。

但是您可以用来加速已经编写的内容的一种技术是限制某些计算成本高昂的任务（渲染 FPS）与最关键的任务（球弹跳）的运行频率不同。

EaselJS 不允许您指定某些任务更频繁地运行。（`createjs.Ticker.setFPS`是一个静态函数。）所以我们需要创建一个解决方法。

`true`这是一个每 60 次调用它就会返回一次的闭包。

```
var onceEverySixty = (function(){
    var i = 0;
    return function(){
        i++;
        return ((i % 60) == 0);
    }
})(); 
```

使用这个闭包，我们可以在你的代码中实现它来限制 FPS 文本被更新的次数：

```
function tick(){
    if(onceEverySixty()){
        fps=createjs.Ticker.getMeasuredFPS();
        txt_fps.text=Math.round(fps);
    }
    // The ball-drawing code here, outside the conditional
} 
```

# wcf - Silverlight WCF 服务在部署时返回远程服务器未找到错误

> ID：13581535
> 
> 赞同：0
> 
> 时间：2012-11-27T09:55:03.580
> 
> 标签：wcf, silverlight

我一直在尝试为 Silverlight OOB 应用程序托管 WCF 服务。当我从本地计算机运行应用程序时，它工作正常。但是当同样的部署到服务器时，我得到以下

> *找不到远程服务器错误。*

我用提琴手来跟踪错误，它说

> *HTTP/1.1 500 System.ServiceModel.ServiceActivationException*

这可能是服务器上的 IIS 设置有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:08:11.973

You need to check two things,

1.Check for these two files in your service root folder clientaccesspolicy.xml and crossdomain.xml.

2.Check for the namespace of your service.you might be wrong on the namespace.

if these does not work post your web.config .

# javascript - 就浏览器兼容性而言，在 javascript 中使用“let”？

> ID：13581537
> 
> 赞同：12
> 
> 时间：2012-11-27T09:55:06.560
> 
> 标签：javascript, backwards-compatibility, polyfills

`let`在 javascript中使用关键字的选项有哪些。好像真的很有用。

我见过[traceur](http://traceur-compiler.googlecode.com/git/demo/repl.html)，但我想知道是否还有其他选择，所以我不必通过它运行整个项目。

是否有可能使用某种类型的 polyfill 或库。还是我基本上必须等到所有旧浏览器都消失才能原生使用它...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-06-05T12:27:42.403

让我引用我刚刚在*[You Don't Know JS: Scope & Closures - 附录 B：Polyfilling Block Scope上读到的内容](https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20&%20closures/apB.md)*

**[PS：这是根据知识共享 CC BY-NC-ND 3.0](http://creativecommons.org/licenses/by-nc-nd/3.0/)许可的，所以只要提到参考就可以分享它**

## 前方大报价：

考虑以下示例

```
{
 let a = 2;
 console.log( a ); // 2
}

console.log( a ); // ReferenceError 
```

这将在 ES6 环境中工作得很好。但是我们可以在 ES6 之前这样做吗？抓住就是答案。

```
try{throw 2}catch(a){
 console.log( a ); // 2
}
console.log( a ); // ReferenceError 
```

哇！那是一些丑陋，奇怪的代码。我们看到一个看起来强制抛出错误的try/catch，但它抛出的“错误”只是一个值2，然后接收它的变量声明在catch(a)子句中。心：吹。

没错，catch 子句具有块作用域，这意味着它可以在 ES6 之前的环境中用作块作用域的 polyfill。

“但是……”，你说。“……没有人愿意写出那样丑陋的代码！” 确实如此。也没有人编写（部分）由 CoffeeScript 编译器输出的代码。那不是重点。

关键是工具可以将 ES6 代码转换为在 ES6 之前的环境中工作。您可以使用块范围来编写代码，并从此类功能中受益，并让构建步骤工具负责生成在部署时可以实际工作的代码。

这实际上是所有（嗯，大多数） ES6 的首选迁移路径：在从 pre-ES6 到 ES6 的过渡期间，使用代码转译器获取 ES6 代码并生成与 ES5 兼容的代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T10:04:39.707

绝对*没有办法*在 ECMAscript 中模仿/填充关键字。因此，您要么选择完全使用它（目前这可能是一个非常糟糕的主意），要么您还不能使用它。

您可能知道，`let`它是*ECMAscript Next* / *Harmony*的一部分，充其量只是在某些浏览器中作为*实验性功能提供。*即使`let`是一个非常稳定的特性，*ES.Next*规范仍然在不断变化。去玩它，但依靠它真的没有意义恕我*直言*。

# google-chrome - 仅当我对我的排序和单击以刷新或单击以可排序的列进行排序时，我的 chrome 中的错误都失去了它们的宽度

> ID：13581538
> 
> 赞同：2
> 
> 时间：2012-11-27T09:55:07.183
> 
> 标签：google-chrome, jqgrid

它只是 chrome 上的错误（我有最新版本）

当您在表上重新组织 tr 以及单击刷新图标或单击列对其进行排序时！所有 tr 都失去了宽度！

您可以在 trirand 的演示页面上看到它（jqgrid 的官方网页）

1.  [http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

2.  点击查看：3.6 版新功能

3.  点击：可排序的行

并尝试对任何 tr 进行一次或多次排序，然后单击 REFRESH 图标后，您会看到一个奇怪的结果……仅在 chrome 上（ff 和 ie 都可以）

# sencha-touch-2 - Sencha 2 导航视图在不替换旧视图的情况下创建新的视图实例

> ID：13581541
> 
> 赞同：0
> 
> 时间：2012-11-27T09:55:19.723
> 
> 标签：sencha-touch-2

我有一个以 list(A) 作为其项目的导航视图。单击列表（A）项目，显示新视图（B）。现在新视图（B）有一个按钮，再次单击更改为视图（C）。

问题是视图（C）与视图（B）相同。

我能够创建新视图并推送它，但无法填充新数据。回到视图（B），我得到了视图（C）的数据。

如何解决这种情况。

**代码：**

```
 /**
 * navigationview with list(A) 
 */
Ext.define('activity', {
    extend: 'Ext.navigation.View',
    config: {
        items:[
            {
                grouped:true,
                pinHeaders:   true,
                xtype:'list',
                store:{
                    xclass:'ActivityList'
                },
                itemTpl:'{title}',
                emptyText: 'nothing found'
            }
        ]
    }
});

/**
 * child view(B) to be appeared on clicking any item in list(A).
 */
Ext.define('TaskDetails', {
    extend: 'Ext.Panel',

    config:   {
        title:  'Task',
        layout: {
            type: 'fit'
        },
        items:  [
            {
                xtype:  'toolbar',
                docked: 'top',
                height: '40px',
                items:  [
                    { xtype: 'spacer'},
                    {
                        xtype:        'segmentedbutton',
                        height:       '30px',
                        items:        [
                            {
                                text:    'Task Details',
                                pressed: true
                            },
                            {
                                text:      'Child Tasks',
                                badgeText: '0'
                            }
                        ]
                    },
                    { xtype: 'spacer'}
                ]
            },
            {
                xtype:  'container',
                items:  [
                    {
                        xtype:'dataview',
                        store:     {
                            xclass: 'TaskDetails'
                        },
                        itemTpl:   'some thing....'
                    },
                    {
                        xtype:'list',
                        store:{
                            xclass:'ChildTask'
                        },
                        itemTpl: 'some template...'
                    }
                ]
            }
        ]
    }

}); 
```

我正在更改控制器中的视图，并希望在单击视图（B）中的列表时再次显示相同的视图（B）和新数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:35:58.883

这是您无法规避的导航视图功能。使用 setActiveItem 代替推送视图...我遇到了同样的问题并更改为 setActiveItem 它使您可以比导航视图更好地控制视图，所以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:57:11.263

在你第一次加载 view(2) 之后，ref 返回一个 1 的数组，正如它应该的那样。Refs 仅在返回 1 个组件时才有效。

再次加载 view(2) 后，ref 返回一个 2 的数组。

这意味着不会触发任何侦听器，并且数据不会加载到新实例上。

当控制器第一次看到视图时，Refs 绑定到 dom 元素。我们无法改变这一点。这意味着我们不能直接使用 ref。我们知道 Ext.ComponentQuery.query 是 refs 所依赖的。使用它，我们可以在运行时模拟 refs。我在控制器的 initialize() 函数中放置了一个运行时数据视图引用，以加载新视图的数据。这似乎在每次创建视图时都会运行，因此可以正常工作。

# web-services - OPA：HttpRequest.get_body() 不工作

> ID：13581545
> 
> 赞同：1
> 
> 时间：2012-11-27T08:04:33.153
> 
> 标签：web-services, opa

我正在测试 Mac os X 10.8.2 + OPA 1.0.7 + node.js v0.8.14 上的 REST 调用的 opa 示例。

首先，我按照示例： [https ://github.com/cedricss/ian-oliver-tutorials/blob/master/tutorial4.opa](https://github.com/cedricss/ian-oliver-tutorials/blob/master/tutorial4.opa)

使用 [ CURL -d "posted data" localhost:8080/expressions ] 测试 post 调用，我发现 HttpRequest.get_body() 不工作，服务器没有响应，但 get 调用工作。我评论了 HttpRequest.get_body() 调用，服务器正在工作。

然后，我按照 OPA 的站点示例：

```
 https://github.com/MLstate/opalang/wiki/Hello%2C-web-services 
```

同样的问题，调用 HttpRequest.get_form_data() 不工作，调用 HttpRequest.getURI() 工作。

不知道哪里出错了，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:35:35.130

我确认，这是 Opa 最新版本中出现的错误。感谢您的报告。[您可以在https://github.com/MLstate/opalang/issues/95](https://github.com/MLstate/opalang/issues/95)上观看线程问题

# android - Android：如何为 Nexus10 创建 Android 模拟器？

> ID：13581548
> 
> 赞同：39
> 
> 时间：2012-11-27T09:56:02.817
> 
> 标签：android, android-emulator, emulation

我正在尝试使用最新的 ADT(21) 和 SDK 工具为 Nexus 10 创建 android 模拟器。我对 Nexus 10 AVD 有以下配置：

```
Screen Size - 10 inches 
Resolution - 2560 X 1600 
Screen Size - xlarge Screen Density - Xhdpi 
Screen ratio - long
RAM - 1024 
```

让我知道此配置是否错误。创建上述配置后，我能够创建 AVD 但无法加载它。它只显示黑屏。这里可能是什么问题？

我正在使用 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-04T08:20:12.380

我遇到过同样的问题。你可以做一件事，

1) 创建 AVD 时，确保选中**Use Host GPU选项。**

![在此处输入图像描述](../Images/9e8191f3745c5380f747093d7ec8b7c4.png)

它对我有用，在我的 Mac OS X Mountain Lion 10.8.2 和 eclipse juno 中。

编辑：对不起，人们的困惑。没有 Google Nexus 10 皮肤（在撰写本文时）。您在图像中看到的是我使用 Eclipse 的设备定义（AVD 管理器第二个选项卡）功能创建的 Nexus 10 等号。只是我将它命名为**Nexus 10**，它不是默认的谷歌模拟器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-08T08:42:26.853

我认为**显示器分辨率比**计算机的硬件更重要。我在 Windows 7 下有一台 PC i7 和 16GB RAM，有两个 DELL 显示器 1920x1080，并且无法运行 Nexus 10 模拟器。这台电脑完美运行 Nexus 7 模拟器。

但我在 OSX Mountain Lion 下功能较弱的 iMac i5 和 8 GB RAM 可以完美运行 Nexus 10 AVD。

我尝试过使用/不**使用主机 gpu选项，并且仅在****选中**时才起作用。

我曾尝试模拟三星 Galaxy S4 等其他设备，但情况相同！

顺便说一句，建议为性能指定低值 RAM 和 SD 卡值（512MB 和 16-96MB）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T10:49:29.497

我有同样的问题（实际上有）。这很简单，分辨率和屏幕密度对于您的显示器（在该屏幕尺寸上）来说太高了，因此无法显示。- 我相信你的模拟器可以在其他配置上完美运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T01:03:20.290

这是 Nexus 10 的正确配置`Android Virtual Device`：

![Nexus10_AVD](../Images/3dd3d9f82237582dfa3d24faca88b102.png)

你`screensize`和`density`错了。

> **屏幕尺寸**- 10.1 英寸
> **分辨率**- 2560x1600
> **尺寸**- xlarge
> **密度**- xxhdpi
> **屏幕比例**- 长
> **RAM** - 2048 MiB

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-13T07:16:02.053

另一种方法是使用新的

> Genymotion Android 模拟器

它也适用于 Ubuntu，请查看我[的帖子](https://stackoverflow.com/a/18779975/877994)以获取与其相关的其他信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:39:23.647

使用 IntelliJ，您需要打开工具 - android - AVD 管理器，然后当您添加新的 AVD 时，请尝试确保您的 CPU/ABI 设置为 ARM(armeabi) 之前遇到过一些麻烦，这取决于此设置。

希望这可以帮助！

# activex - TYPE_E_LIBNOTREGISTERED（库未注册）同时调用未注册的 ActiveX 控件的 Invoke（）？

> ID：13581549
> 
> 赞同：0
> 
> 时间：2012-11-27T09:56:03.833
> 
> 标签：activex, invoke

代码如下。如何避免`TYPE_E_LIBNOTREGISTERED(hr=0x8002801D, Library not registered) error(DO NOT register the ActiveX to Windows)`的`disp->Invoke()`？
注册 ActiveX 控件时，一切正常，但我不想注册到 WINDOWS。
谢谢！

```
#define WIN32_LEAN_AND_MEAN
#include <tchar.h>
#include <Windows.h>
#include <assert.h>
#include <stdio.h>
#include <ole2.h>

int APIENTRY _tWinMain(HINSTANCE hInstance,
    HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
{
    OleInitialize(NULL);
    LPCTSTR lpFile = _T("D:\\Temp\\Flash32_11_4_402_287.ocx");
    HMODULE hDll = LoadLibrary(lpFile);
    if (hDll)
    {
        typedef HRESULT (WINAPI *DllGetClassObject_t)(REFCLSID, REFIID, LPVOID*);

        DllGetClassObject_t DllGetClassObject = NULL;
        DllGetClassObject = (DllGetClassObject_t)GetProcAddress(hDll, "DllGetClassObject");
        if (DllGetClassObject)
        {
            CLSID clsid = GUID_NULL;
            IClassFactory *pCF = NULL;
            if (SUCCEEDED(CLSIDFromString(L"{D27CDB6E-AE6D-11CF-96B8-444553540000}", &clsid))
                && SUCCEEDED(DllGetClassObject(clsid, IID_IClassFactory, (void**)&pCF)))
            {
                IOleObject *obj = NULL;
                IDispatch *disp = NULL;
                if (SUCCEEDED(pCF->CreateInstance(NULL, IID_IOleObject, (void**)&obj))
                    && SUCCEEDED(obj->QueryInterface(IID_IDispatch, (void**)&disp)))
                {
                    DISPPARAMS params = { NULL, NULL, 0, 0 };
                    HRESULT hr = disp->Invoke(0x70, IID_NULL,
                        LOCALE_USER_DEFAULT, DISPATCH_METHOD,
                        &params, NULL, NULL, NULL);

                    assert(SUCCEEDED(hr));
                    //ERROR: hr=0x8002801D,TYPE_E_LIBNOTREGISTERED, Library not registered
                }

                if (disp) disp->Release();
                if (obj) obj->Release();
                pCF->Release();
            }
        }
    }

    OleUninitialize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T06:59:00.103

致 Hans Passant：非常感谢。英语不是我的母语，但是在你详细的回答下，我已经完美解决了这个问题，这是我在stackoverflow上的第一个问题，再次感谢。正如你所说，我的解决方案如下：

```
//ITypeInfo *m_ti = NULL;
//pCF->CreateInstance(...);

ITypeLib *tl = NULL;
if (SUCCEEDED(LoadTypeLib(wsOcxFile, &tl)))
{
    if (SUCCEEDED(tl->GetTypeInfoOfGuid(guid, &m_ti)))
    {
        hr = m_ti->Invoke(disp,
            dispid, wFlags, &m_dispParams,
            pvResult, &ei, &nArgErr);

    }
    tl->Release();
}

//m_ti->Release(); 
```

# facebook - 问题：用facebook登录

> ID：13581550
> 
> 赞同：0
> 
> 时间：2012-11-27T09:56:16.250
> 
> 标签：facebook, yii

这是我第一次尝试将我的页面与 facebook 登录集成。我使用[http://www.domagojsalopek.com/Details/Create-a-Registration-and-Login-System-using-Facebook-Registration-Plugin/21](http://www.domagojsalopek.com/Details/Create-a-Registration-and-Login-System-using-Facebook-Registration-Plugin/21)中显示的方式。

我做了与教程中完全相同的操作。我什至下载了示例并尝试了，但它不起作用。

但是，一旦我填写了所有详细信息并单击“注册”按钮，它就会进入“服务器错误”页面。我发现错误来自 register.php 中的以下行

```
$facebook = new Facebook(array(
  'appId'  => FB_ID,
  'secret' => FB_SECRET,
)); 
```

注意：我已经在 config.php 中替换了我的 ID 和 Secret。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:26:16.667

我已经有了解决方案。在示例代码中，它不包含 facebook.php。

# jquery-ui - 如何强制用户仅从自动完成弹出窗口中选择值

> ID：13581555
> 
> 赞同：0
> 
> 时间：2012-11-27T09:56:37.810
> 
> 标签：jquery-ui

我正在使用 jquery UI 自动完成邮政编码文本字段。我想强制用户只选择自动完成选项中的邮政编码。

在提出这个问题之前，我已经对上述问题进行了很多搜索，但我没有得到任何适合我的场景的解决方案。

实际上，我正在使用 Ajax 调用从 www.geonames.org 站点获取 json 响应，该站点具有 zipcode 、state 、city 和其他一些值的响应。

我的问题是我无法实现强制用户仅从自动完成中选择值的功能。

怎么做任何提示和答案对我有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:06:20.263

*您可能想考虑使用自动完成来限制用户在字段上的输入对用户体验的影响。通常，这些类型的控件用于帮助建议可能性，而不是限制。以护目镜建议为例。*

不过，要回答这个问题。您可以根据自动完成返回的结果检查输入的值，`blur`以确保它至少与其中一个匹配。我在[这里找到了一个工作示例](http://jsfiddle.net/EuXrP/)。

另一种流行的方法是填充仅由自动完成`result`事件填充的隐藏表单元素： [https ://stackoverflow.com/a/2585868/159341](https://stackoverflow.com/a/2585868/159341)

# c# - XPathSelectElement 有多个时选择第二个

> ID：13581556
> 
> 赞同：2
> 
> 时间：2012-11-27T09:56:42.657
> 
> 标签：c#, .net, xml, xpath

嗨 不知道这是否可以做到，但我知道这里有人会知道 :)

使用

```
XElement oNodeEquip = xmlDoc.XPathSelectElement("//ItemAry/Item/Equip"); 
```

我将如何从以下第二个中选择装备：

```
<TestInfo>
  <ItemAry>
    <Item>
      <testData>ABC</testData>
    </Item>
    <Item>
      <testData>XYZ</testData>
      <Equip>xxx</Equip>
    </Item>
  </ItemAry>
</TestInfo> 
```

总会有至少 2`<Item>`并且我想要的值的节点总是在第二个`<Item>`

这是一个使用 .Net 4.0 的 WPF 应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:00:52.190

试试这个 XPath 表达式：

```
//ItemAry/Item[2]/Equip 
```

它只考虑第二个`<Item>`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:59:32.310

您可以使用 Linq to Xml 轻松完成：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var second = (string)xdoc.Descendants("Item").Skip(1).Element("Equip"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T14:18:14.930

**使用**：

```
(/*/ItemAry/Item)[2]/Equip 
```

**当前选择的答案可能会产生意想不到的结果，具体取决于手头的特定 XML 文档**：

```
//ItemAry/Item[2]/Equip 
```

选择作为其父元素的第二个子元素`Equip`的*所有元素的子元素。* `Item``Item``ItemAry`

**因此，如果源 XML 文档是**：

```
<TestInfo>
  <ItemAry>
    <Item>
      <testData>ABC</testData>
    </Item>
    <Item>
      <testData>XYZ</testData>
      <Equip>xxx</Equip>
    </Item>
  </ItemAry>
  <ItemAry>
    <Item>
      <testData>DEF</testData>
    </Item>
    <Item>
      <testData>TUW</testData>
      <Equip>yyy</Equip>
    </Item>
  </ItemAry>
</TestInfo> 
```

**上述可能错误的表达式选择*了两个*元素**：

```
<Equip>xxx</Equip>
<Equip>yyy</Equip> 
```

**此答案中提供的正确表达式**：

```
(/*/ItemAry/Item)[2]/Equip 
```

只选择：

```
<Equip>xxx</Equip> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:09:34.917

如果您确定节点的位置，您可以使用以下[`position()`函数](http://oreilly.com/catalog/xmlnut/chapter/ch09.html)`XPath`：

```
XElement oNodeEquip = xmlDoc.XPathSelectElement("//ItemAry/Item[position()=2]/Equip"); 
```

# layout - Zend Framework 2 为布局中的 Navigation-Helper 设置翻译器

> ID：13581557
> 
> 赞同：2
> 
> 时间：2012-11-27T09:56:48.170
> 
> 标签：layout, navigation, zend-framework2

从骨架应用程序开始，我想创建一个多语言项目。对于导航，我使用 Zend\Navigation。Everyhting 运行良好 - 没有为导航视图助手设置翻译器。

翻译器在 module.config.php 中注册，适用于各种翻译（包括翻译视图助手，也在布局中）。但是为了能够翻译导航标签，我需要将翻译器设置为导航视图助手。根据文档，这可以这样完成：

```
$this->navigation()->setTranslator($translator); 
```

或类似的东西。问题是我不知道如何从布局中获取配置的翻译器。有没有办法访问 ServiceManager 或获取服务定位器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:11:31.520

无需使用导航设置翻译器，因为它已经按照您所说的进行配置，您可以使用 TextDomain 代替。这是我目前所做的：

$this->navigation('Zend\Navigation\Navigation')->setTranslatorTextDomain('textdomainhere');

当然如果你所有的翻译都在同一个默认的文本域中，那么你不需要设置任何东西： $this->navigation('Zend\Navigation\Navigation');

至于让翻译在布局中工作，你所做的就是：

echo $this->translate('翻译此文本', 'textdomainhere');

# asp.net-mvc - MVC4 - 获取视图中的字段列表

> ID：13581562
> 
> 赞同：1
> 
> 时间：2012-11-27T09:57:03.033
> 
> 标签：asp.net-mvc, asp.net-mvc-4

是否可以安全地以编程方式获取刚刚回发到控制器的视图中的字段列表？

我注意到脚手架的默认实现存在问题，在

```
DB.Entry(model).State = EntityState.Modified
DB.SaveChanges() 
```

问题是，如果我没有在视图中包含要编辑的字段，它将被 .NET 在创建对象时分配的字段的默认值覆盖。例如。如果我有一个带有 ID、Email 和 PasswordHash 的 User 类，并且我想只允许用户更新他们的电子邮件地址，如果我没有为 PasswordHash 字段包含任何内容，它会在传递到控制器时重置为 NULL作为NULL。目前，我正在通过从数据库中检索当前对象并仅从传入的模型更新我知道在视图中的字段来解决它。对于小表来说这不是问题，但我会喜欢有一个我可以全面应用的通用解决方案，特别是对于可能在开发过程中的大型表，我不想每次都更新代码。

我知道我可以遍历 POST 变量并检查它们以查看已发布的内容，但这会产生安全问题，因为用户可能会注入我不希望他们编辑的其他字段。我想我可以明确排除那些我不想让他们编辑的内容，但话又说回来，如果我可以避免它，我宁愿不必列出那些，因为这是额外的维护工作。

我认为这里有两个问题，我不确定是否可以解决...

*   获取回发的视图
*   确定该视图中包含哪些字段（我可能需要暂时再次构建它才能做到这一点？）

我想我可能可以忽略第一个，因为我只能在控制器上使用该方法来获取单个视图。这仍然没有我想要的那么整洁，但它确实将问题减少到仅确定哪些字段在视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:27:13.103

如果视图只需要某些属性，请创建一个只包含这些属性的界面。在 HttpGet 和 HttpPost 方法中使用此接口。

然后您可以使用 AutoMapper 之类的东西将视图模型映射到您的实体。

# php - 如何在 PHP 中处理浏览器关闭注销？

> ID：13581563
> 
> 赞同：0
> 
> 时间：2012-11-27T09:57:03.640
> 
> 标签：php, mysql, ajax

我在登录用户关闭浏览器时遇到问题。由于浏览器关闭，我的代码无法运行，因此它们的登录状态无法在数据库中更新为“N”。此外，由于会话被破坏，他们无法返回主页，因为我有此代码`if (!isset($_SESSION['logged in'])) {`等，以防止人们在未登录的情况下查看任何页面。

当用户登录时，他们的登录状态更改为“Y”，我记录他们登录的时间。我记录他们在每次页面加载时的最后活动时间。如果用户在页面上闲置 20 分钟，我会将用户重定向到登录页面并更改其登录状态。由于浏览器关闭问题，我还有一个 cron 作业，该问题每 5 分钟运行一次，并检查用户上次活动是否超过 20 分钟，如果是，他们的登录状态变为“N”

我认为由于浏览器关闭，用户必须等待 20 分钟以上才能重新登录，所以我希望能够立即再次登录。

我已经阅读了有关 javascript 的卸载功能，但显然它是不可靠的。

我还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:00:34.887

您需要更改会话 cookie 的持续时间，以便它们在浏览器窗口保持打开时持续存在；这样做[`session_set_cookie_params`](http://php.net/manual/en/function.session-set-cookie-params.php)，将生命周期设置为`0`. 不要忘记确保您的 cron 脚本和 PHP 的会话 gc max 生命周期不会在 20 分钟过去之前删除会话。

由于您记录了他们的最后访问时间并在每个请求上进行检查，因此您可以在 20 分钟不活动后继续注销他们（只需破坏他们的会话并重定向到登录页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:09:53.283

关闭浏览器始终是客户端操作。因此，您将需要 javascript 将操作发送到服务器，以便 PHP 执行某些操作。

可以使用 onbeforeunload 向服务器发送一些东西，但确实不可靠。一种更可靠的方法是使会话时间更短（例如：2 分钟），然后每 30 秒对服务器进行一次 ajax 调用以保持会话处于活动状态（确保其页面对服务器/连接的影响非常小） . 如果请求失败 4 次，则会话被销毁。现在您的 cronjob 可以每 2 分钟运行一次，用户只需等待那么长时间。

另一种方法是使用 GUID 在用户计算机上存储 cookie，并使用“Logged ='Y'”将其保存在数据库中。现在，当有人尝试登录已登录的帐户时，请检查其是否为同一用户（cookie），如果是，则允许。这仍然使一个用户可以登录两次，只是更难而且不是错误的。

# java - 从 Postgres 数据库检索时，字节数组的大小加倍

> ID：13581568
> 
> 赞同：3
> 
> 时间：2012-11-27T09:57:21.617
> 
> 标签：java, postgresql, jetty

我正在使用 JSF2.0、码头服务器和 Postgres 数据库。我想以字节数组形式将 mp3 文件存储在数据库中。我上传了 mp3 文件的字节数组。但是当我从数据库中检索相同的字节数组时，我得到双倍大小的字节数组，因为我的 mp3 文件不能正常工作。

```
public void updateAnnouncementDetail(AnnouncementDetail announcementDetail) {
    System.out.println("Upload  byte array size:" + announcementDetail.getContent().length);
    Session sess=get Session();
    sess.beginTransaction();
    sess.save(announcementDetail);
    sess.getTransaction().commit();
    AnnouncementDetail detail;
    detail = retrieveAnnouncementDetailById(new AnnouncementDetailPK(announcementDetail.getAnnouncementDetailPK().getAnnouncement(), announcementDetail.getAnnouncementDetailPK().getLanguage()));
    System.out.println("Retrived byte array size:" + detail.getContent().length);
} 
```

**输出：**

上传字节数组大小：384440

检索到的字节数组大小：768879

我不知道为什么会这样。我正在存储字节数组，在下一行我正在检索它。但我得到双倍大小的字节数组。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T15:33:36.657

Postgres 9.x bytea 值将十六进制作为默认输出。所以，试试：

`ALTER DATABASE database_name SET bytea_output = 'escape';`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T10:19:08.180

在 Postgres 中处理二进制数据时，使用正确的数据绑定很重要。

首先，数据列的类型必须是`BYTEA`。是这样吗？

要存储数据，请使用准备好的语句并确保调用**`setBinaryStream()`**：

```
File file = new File("myimage.gif");
FileInputStream fis = new FileInputStream(file);
PreparedStatement ps = conn.prepareStatement(
    "INSERT INTO images VALUES (?, ?)"
);
ps.setString(1, file.getName());
ps.setBinaryStream(2, fis, (int)file.length());
ps.executeUpdate();
ps.close();
fis.close(); 
```

要检索数据，还可以使用准备好的语句并使用**`getBytes()`**：

```
PreparedStatement ps = conn.prepareStatement(
    "SELECT img FROM images WHERE imgname = ?"
);
ps.setString(1, "myimage.gif");
ResultSet rs = ps.executeQuery();
while (rs.next()) {
    byte[] imgBytes = rs.getBytes(1);
    // use the data in some way here
}
rs.close();
ps.close(); 
```

[在这里](http://jdbc.postgresql.org/documentation/91/binary-data.html)查看更多。

# c++ - QSqlQuery 插入字符

> ID：13581569
> 
> 赞同：1
> 
> 时间：2012-11-27T09:57:33.123
> 
> 标签：c++, qt, insert, char

我正在尝试将一个字符插入到表的列中。而是插入字符的十进制代码。如何插入字符？

细节：

```
QString insertSql;
insertSql
    .append("INSERT INTO ")
    .append(" table ")
    .append(" (direction) ")
    .append("VALUES (?)");
QSqlQuery update;
update.prepare(insertSql);

update.bindValue(0, 'F');

bool ex = update.exec();
qDebug() << update.lastError().type() << endl;
qDebug() << update.lastError().databaseText() << endl;
qDebug() << update.lastError().driverText() << endl; 
```

如果表中的方向属性是varchar，我会插入字符串'70'（字符的十进制代码），如果属性'char'是则产生错误，即类型太短而无法存储值。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:20:19.067

在对 的调用中`bindValue`，第二个参数是 QVariant，但 QVariant 没有接受 char 的构造函数。您的 char 可能已转换为 int，因为这是标准转换，而不是 QChar。您的 QVariant 是整数类型，并在`bindValue`.

您可以尝试显式使用 QChar ：

```
update.bindValue(0, QChar('F')); 
```

# java - Android - 在使用标志活动单击推送通知后打开或重新启动应用程序

> ID：13581574
> 
> 赞同：11
> 
> 时间：2012-11-27T09:57:49.927
> 
> 标签：java, android, push-notification, google-cloud-messaging

我在 Android 中使用推送通知。当我收到推送通知时，如果应用程序仍在运行，我想打开它，否则它应该打开它的一个新实例。

我在用

```
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 
    Intent.FLAG_ACTIVITY_CLEAR_TOP | 
    Intent.FLAG_ACTIVITY_SINGLE_TOP | 
    Intent.FLAG_ACTIVITY_NEW_TASK); 
```

但是当我现在收到推送通知并单击它时，什么也没有发生。

我怎样才能通过使用 flagIntents 来实现这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T10:10:14.227

您需要在`Intent`. 您在调用中指定它们以获取`PendingIntent`. 试试这个：

```
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | 
    Intent.FLAG_ACTIVITY_SINGLE_TOP | 
    Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
    notificationIntent, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T19:36:26.477

在您的 Android Mainfest 文件中设置以下内容

```
android:noHistory="true"
 android:launchMode = "singleTop" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T08:41:51.027

在我的情况下，每次单击推送通知时，正在运行的应用程序都会重新启动。但我不想重新启动应用程序。

在`PendingIntent`我有一个名为 Activity2 的所需 Activity1 的意图。这些行中有一个错误：

```
val intent = Intent(context, Activity2::class.java)
// Remove this line:
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)
context.startActivity(intent) 
```

# java - 系统无法扩展以支持并发用户

> ID：13581575
> 
> 赞同：3
> 
> 时间：2012-11-27T09:57:53.237
> 
> 标签：java, mysql, tomcat, autoscaling

我在扩展系统上的并发用户数量时遇到问题。从我的测试来看，扩展并发用户的数量似乎直接增加了请求的持续时间，呈线性关系。

我正在运行一个部署在具有 16Gb RAM 的（虚拟）Ubuntu 四核机器上的 Java Web 应用程序。我正在使用 Apache Tomcat 7 和 MySQl 5.5 数据库。Tomcat 和 MySQL 使用默认设置——我没有以任何方式配置它们。

我正在使用 Apache Benchmark 运行许多测试，最终创建一个 SQL 查询以返回一行数据，其中响应大小非常小。

我使用 Spring 的 JDBCTemplate 和 Apache Commons BasicDataSource。spring bean 的配置如下所示。

```
<!-- READ ONLY CONNECTION TO DATABASE -->
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
  <property name="driverClassName">
    <value>com.mysql.jdbc.Driver</value>
  </property>
  <property name="username">
    <value>${database.username}</value>
  </property>
  <property name="password">
    <value>${database.password}</value>
  </property>
  <property name="url">
    <value>${database.url}/${database.schema}</value>
  </property>
  <property name="timeBetweenEvictionRunsMillis" value="7200000" />
  <property name="minEvictableIdleTimeMillis" value="3600000" />
  <property name="maxActive" value="100" />
  <property name="maxIdle" value="5" />
  <property name="defaultAutoCommit" value="false" />
  <property name="defaultReadOnly" value="true" />
</bean>

<bean id="myDao" class="...">
   <property name="jdbcTemplate" ref="jdbcTemplate"></property>
   <property name="dataSource" ref="dataSource"></property>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
   <property name="dataSource" ref="dataSource" />
</bean> 
```

我的创建几个查询的 Java 方法用 @Transactional 注释。

这些是我的测试结果：

*   1 个请求需要 0.2 秒。
*   10 个请求（同时执行）需要 0.9 秒。

因此，您可以看到我的应用程序没有缩放。我不确定问题的原因可能是什么。谁能看到我做错了什么或建议我可以进一步调查的方法？

提前致谢，

菲尔

**更新**

更多指标：

```
  1 个请求，并发 1 = 0.22s
 10 个请求，并发 10 = 0.6 秒（平均），0.5（分钟）
100 个请求，并发 100 = 7（平均），3.7（分钟）
300 个请求，并发 300 = 12 秒（平均），4.3（分钟）
300 个请求，并发 300 = 18 秒（平均），6.4（分钟）

```

响应大小为 1kb。

尝试相同的请求并更改并发：

```
300 个请求，并发 8 = 总时间：14.9s
300 个请求，并发 20 = 总时间：15.3s
300 个请求，并发 300 = 总时间：24 秒

```

因此，将并发减少到 8 比并发 300 快 10 秒。从 8 增加会减慢事务。8 似乎是最优化的并发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:27:58.620

尝试使应用程序并发时需要考虑一些事项。

首先，仅仅因为您的服务器有四个内核，并不意味着它们都对您的 JVM 可用，您需要询问运行时以查看有多少可用，并且在 JVM 的生命周期内这在技术上也是可能的，虽然很少见。

接下来，您需要考虑环境的物理拓扑。数据库是否与应用程序在同一台服务器上运行？如果是这样，您在处理和 IO 方面对资源有额外的争用，而不仅仅是您的应用程序正在做什么。

了解了这些要点后，您需要考虑应用程序的 IO 与处理配置文件。例如，查找素数并将它们输出到系统日志的应用程序实际上是 100% 处理与 0% IO。在这种类型的应用程序中，在应用程序中拥有比可用内核更多的线程是没有意义的，因为内核将不断地忙于它们正在做的事情，而任务切换的开销实际上会减慢你的应用程序。

与数据库密切相关的应用程序通常具有相对较高的 IO 到处理配置文件，尽管如果您只是读取并且这些读取相对较小，并且查询的数据在逻辑上布局良好的数据库，该配置文件的 IO 限制会减少. DB 的大小也会影响 IO，这取决于整个 DB 集是否可以保存在内存中或是否正在发生磁盘分页。

如果您不熟悉并发，我强烈建议您阅读 Brian Goetz 的 Java Concurrency in Practice。话虽如此，您正在采取一种明智的方法，即按原样分析您的应用程序。

# php - 如何从客户的 Magento CSV 导入发送新密码

> ID：13581576
> 
> 赞同：1
> 
> 时间：2012-11-27T09:57:54.210
> 
> 标签：php, email, magento, csv-import

我们一直在尝试修改 Customer.php 文件 ( import/export ) 以使其在从 CSV 文件导入客户时自动发送新帐户详细信息。

我们在正确的领域工作，因为我们放弃了一个简单的 mail() 调用，该调用被调用（我们收到了电子邮件）每个新行。当试图让它生成一个新的随机密码并发送新的帐户详细信息时会出现问题 - 它从不发送任何邮件，我们无法弄清楚为什么！代码如下（从 app/code/local/Mage/ImportExport/Model/Import/Entity/Customer.php 编辑）

```
 /**
 * Update and insert data in entity table.
 *
 * @param array $entityRowsIn Row for insert
 * @param array $entityRowsUp Row for update
 * @return Mage_ImportExport_Model_Import_Entity_Customer
 */
protected function _saveCustomerEntity(array $entityRowsIn, array $entityRowsUp)
{
    if ($entityRowsIn) {
        $this->_connection->insertMultiple($this->_entityTable, $entityRowsIn);

          // BEGIN: Send New Account Email          
          $cust = Mage::getModel('customer/customer');
          $cust->setWebsiteId(Mage::app()->getWebsite()->getId());              
          foreach($entityRowsIn as $idx => $u){
            // Failed
            $cust->loadByEmail($u['email']);
            $cust->setConfirmation(NULL);
            $cust->setPassword($cust->generatePassword(8));
            $cust->save();
            $cust->sendNewAccountEmail();
            //$cust->sendPasswordReminderEmail(); // this call doesnt work either
          }
          // END: Send New Account Email

    }
    if ($entityRowsUp) {
        $this->_connection->insertOnDuplicate(
            $this->_entityTable,
            $entityRowsUp,
            array('group_id', 'store_id', 'updated_at', 'created_at')
        );
    }
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:34:17.127

为了提高性能 magento 'caches' 对象，因此当尝试在循环中加载对象时，您需要加载新实例或调用它 reset() 方法

```
$website_id = Mage::app()->getWebsite()->getId();       
foreach($entityRowsIn as $idx => $u){
    $cust = Mage::getModel('customer/customer');
    $cust->setWebsiteId($website_id);
    $cust->loadByEmail($u['email']);
    $cust->setPassword($cust->generatePassword(8));
    $cust->save();
    $cust->sendNewAccountEmail();  // if you are getting 2 email then remove this line
} 
```

如果您加载大量客户，那么您可能会遇到内存问题，我需要使用其他技术`reset()`

如果此代码是从 Magento 的管理部分运行的，那么您需要确保设置了正确的网站 ID（ `Mage::app()->getWebsite()->getId()`将返回不正确的 ID）。

从前端看，这段代码可以正常工作，但对于管理工作，您应该使用“1”或任何您的前端网站 ID，因为 getId() 方法在管理区域返回“0”！小问题，但让我走了几个小时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:02:30.637

我找到了这个关于如何为现有客户自动生成密码的脚本

```
$passwordLength = 10;
$customers = Mage::getModel('customer/customer')->getCollection();
foreach ($customers as $customer){
    $customer->setPassword($customer->generatePassword($passwordLength))->save();
    $customer->sendNewAccountEmail();
} 
```

# windows-phone-7 - windows phone 8 模拟器，Internet Explorer 缩放快捷方式，或如何捏缩放

> ID：13581577
> 
> 赞同：0
> 
> 时间：2012-11-27T09:57:55.193
> 
> 标签：windows-phone-7, windows-phone-8

在 windows phone 8 模拟器中，我可以通过双击屏幕在 Internet Explorer 中缩放我的网页，但我需要慢慢缩放我的网页，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:40:10.577

这篇文章回答了这个问题：[在 Windows Phone 8 模拟器中模拟捏合手势](https://stackoverflow.com/questions/13453410/simulate-pinch-gesture-in-windows-phone-8-emulator)

基本上，如果你想捏缩放，你需要一个多点触控设备，让你做到这一点！

# c++ - 对齐非 POD 结构的缓存

> ID：13581578
> 
> 赞同：-1
> 
> 时间：2012-11-27T09:57:56.857
> 
> 标签：c++

假设下面有非POD struct，对齐是否生效？如果没有，会发生什么？

```
struct S1
{
    string s;
    int32_t i;
    double d;
} __attribute__ ((aligned (64))); 
```

编辑：下面示例代码的输出是 64 甚至 s 设置为一个长字符串。

```
int main(int argc,char *argv[])
{

        S1 s1;

        s1.s = "123451111111111111111111111111111111111111111111111111111111111111111111111111";
        s1.i = 100;
        s1.d = 20.123;
        printf("%ld\n", sizeof(s1));
        return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:13:02.507

C++ 中对象的大小永远不会改变。它是编译时间常数。必须如此，因为编译器需要知道为对象分配多少空间。实际上，`sizeof(s1)`只是别名，`sizeof(S1)`后面没有涉及任何实例。

这`std::string`是一个小型对象，它包装指向字符数组的指针并重新分配该数组以容纳您设置的值。所以字符串本身存储在`S1`对象之外。

`__attribute__ ((aligned (64)))`不是标准的C++，它是 GCC 扩展。即使对于非 POD 对象，它也会受到尊重。它只是告诉编译器将结构的大小四舍五入到下一个 64 字节的倍数。

虽然它在非 POD 对象上很受欢迎，但我想不出将它用于一个对象的理由，只能想到很少的理由将它用于 POD 对象。默认对齐是合理的。你不需要调整它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:20:11.037

是的，对齐在 GCC 中生效。

示例代码：

```
#include <string>
#include <iostream>
#include <cstddef>
using namespace std;

struct S1
{
    string s;
    int i;
    double d;
} __attribute__ ((aligned (64)));

struct S2
{
    string s;
    int i;
    double d;
} __attribute__ ((aligned)); // let the compiler decide

struct S3
{
    string s;
    int i;
    double d;
};

int main() {
    cout << "S1 " << sizeof(S1) << endl;
    cout << "S2 " << sizeof(S2) << endl;
    cout << "S3 " << sizeof(S3) << endl;
} 
```

输出：

```
S1 64
S2 16
S3 16 
```

* * *

另外：您已经观察到这`S1`是非 POD。请注意，`std::string`允许在外部存储其数据（通常这样做是因为数据可以是任意长度，因此必须动态分配内存缓冲区）。

请记住，`sizeof`它仅在编译期间计算，它不能依赖于运行时值。具体来说，您永远无法以这种方式查询动态分配的内存大小。

还要记住，**数组中的每个元素总是具有相同的类型**，因此也具有相同的大小。

# php - Magento：使用附加属性创建自己的运输方法

> ID：13581581
> 
> 赞同：1
> 
> 时间：2012-11-27T09:57:58.233
> 
> 标签：php, magento, magento-1.4

我创建了一个模块，它为 magento 实现了一种新的运输方法。目前该模块运行良好。

送货方式显示在单页结帐中。

```
class Tigerbytes_Barverkauf_Model_Carrier_Selbstabholung extends Mage_Shipping_Model_Carrier_Abstract 
```

现在我想扩展功能。新的运输模块不应再在前端可见。因此，我为我的模块添加了一个新属性。(show_frontend)

配置文件

```
<default>
        <carriers>
            <selbstabholung>
                <active>1</active>
                <allowed_methods>selbstabholung</allowed_methods>
                <methods>selbstabholung</methods>
                <sallowspecific>0</sallowspecific>
                <model>Tigerbytes_Barverkauf_Model_Carrier_Selbstabholung</model>
                <name>Selbstabholung</name>
                <title>Selbstabholung</title>
                <specificerrmsg>Zur Zeit ist die Versandmethode nicht verfuegbar</specificerrmsg>
                <handling>0</handling>
                <handling_type>F</handling_type>
                <show_frontend>0</show_frontend>
            </selbstabholung>
        </carriers>

    system.xml
<show_frontend translate="label">
                            <label>zeige im Frontend?</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </show_frontend> 
```

属性 show_frontend 显示在后端，也保存在 core_config_data 表中。

现在最大的问题是在获取单页结帐以供用户选择的运输方法时，对象中没有 show_frontend 属性。

我认为用于运输方式列表的对象是

```
Mage_Sales_Model_Quote_Address_Rate 
```

那么我必须扩展什么，让 rate 对象知道 show_frontend 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:08:43.907

你正在做所有你的模块，对吗？

去做就对了：

在您的 collectRates() 方法中，您输入了以下代码：

```
if(!Mage::getStoreConfig('carrier/selbstabholung/show_frontend'))
    return false; 
```

这段代码应该可以完成这项工作。

再会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:37:10.847

附件：

我只想允许在前端显示运输方式。在后端订单的后端，我想显示它。

所以在 collectRates() 方法中，我实现了以下条件。

```
if(Mage::getDesign()->getArea() === Mage_Core_Model_App_Area::AREA_FRONTEND &&
        !Mage::getStoreConfig('carriers/'.$this->_code.'/show_frontend')){

        return false;
    } 
```

现在它的工作完美！

# wpf - WPF：MVVM：命令与 CallMethodAction？

> ID：13581585
> 
> 赞同：5
> 
> 时间：2012-11-27T09:58:05.920
> 
> 标签：wpf, mvvm, mvvm-light, command-pattern

我正在用一个新的（小）项目学习 MVVM 模式，我对在我们的控制器上调用操作的方式有一个疑问：

我看到很多教程，他们告诉我们使用命令，暗示要声明一个 RelayCommand，初始化它并创建由 RelayCommand 调用的动作。

另一方面，我有一位同事说我可以使用`CallMethodAction`触发器：

```
<i:Interaction.Triggers> 
  <i:EventTrigger> 
    <ei:CallMethodAction MethodName="Init" TargetObject="{Binding}" /> 
  </i:EventTrigger> 
</i:Interaction.Triggers> 
```

对我来说，他的方法的优点是我不必为命令创建一些 inits 方法（可能永远不会使用）。

那么我错过了什么？为什么每个人都使用命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T10:37:26.633

命令是开箱即用的解决方案，只能附加到实现`ICommand`接口的元素。另一方面，事件触发器可以附加到任何事件，这使得它们更加灵活。我遵循一般策略来使用涉及用户交互（按钮、菜单）并且`CanExecute`需要模式的命令。我的命令严格连接到可视界面（提供标题、图像源等）。当我想摆脱代码隐藏时，我会在任何其他情况下使用 CallMethodAction。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T10:01:26.773

命令提供了在 ViewModel 代码中禁用的功能。这可以用来自动禁用例如绑定到命令的按钮。这就是使 Commands 变得更好的原因。此外，根据您的逻辑，您可以在同一插槽中动态提取另一个命令，它将重新路由来自 View 的流量，而在 CallMethodAction 中，您必须在被调用的方法中编写重新路由逻辑，这将是丑陋的。

如您所见，这取决于您尝试完成什么以及您的逻辑有多复杂:)

# google-app-engine - 如何通过 cron 删除旧备份？

> ID：13581586
> 
> 赞同：4
> 
> 时间：2012-11-27T09:58:07.673
> 
> 标签：google-app-engine, backup

我正在使用 GAE/J 并通过 cron 进行备份。 [https://developers.google.com/appengine/articles/scheduled_backups](https://developers.google.com/appengine/articles/scheduled_backups)

API（/_ah/datastore_admin/backup.create）可以进行备份，但我找不到通过API删除备份的方法。

我已经尝试过“backup.delete”，但没有奏效。

有人知道通过 cron 删除旧备份的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:41:13.743

如果您转到 Datastore Admin 页面，选择一些备份，然后点击删除，您将看到它带您进入的页面上有一个带有隐藏字段的表单。该表单将备份 ID（作为具有相同名称“backup_id”的单独字段）发布到此 URL：`/_ah/datastore_admin/backup_delete.do`

backup_id 是数据存储中 _AE_Backup_Information 实体的键。

我还没有尝试使用它。该表单使用 XSRF 令牌。

# jquery - Jquery拖放：如何避免重叠？

> ID：13581588
> 
> 赞同：1
> 
> 时间：2012-11-27T09:58:11.867
> 
> 标签：jquery, jquery-ui-draggable

我正在构建一个 JQuery 拖放界面，并且希望在放置一个元素时，如果上面还有另一个元素，它会自动排列以避免重叠。有没有办法做到这一点，还是我需要额外的库？

# c# - c#简单的后台线程

> ID：13581592
> 
> 赞同：7
> 
> 时间：2012-11-27T09:58:27.977
> 
> 标签：c#, multithreading, background, task

我正在寻找一种在后台执行任务的简单方法，然后在完成时更新某些内容（在主线程上）。它在一个低级的“模型”类中，所以我不能调用 InvokeOnMainThread，因为我周围没有 NSObject。我有这个方法：

```
public void GetItemsAsync(Action<Item[]> handleResult)
{
  Item[] items=null;
  Task task=Task.Factory.StartNew(() =>
  {
    items=this.CreateItems(); // May take a second or two
  });
  task.ContinueWith(delegate
  {
    handleResult(items);
  }, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

这似乎工作正常，但是

1）这是最好（最简单）的方式吗？

2）我担心局部变量：

```
Item{} items=null 
```

当方法在后台线程完成之前返回时，是什么阻止了这种消失？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:05:41.993

像这样的东西：

```
 public void GetItemsAsync(Action<Item[]> handleResult)
    {
        int Id = 11;
        Task<Item[]> task = Task.Factory.StartNew(() => CreateItems(Id)); // May take a second or two
        task.ContinueWith(t => handleResult(t.Result), TaskScheduler.FromCurrentSynchronizationContext());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:43:42.203

我认为你的方法稍微违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，因为它做得太多了。

首先，我建议更改`CreateItems`为 return`Task`而不是将其包装在`GetItemsAsync`：

```
public Task<Item[]> CreateItems(CancellationToken token)
{
   return Task.Factory.StartNew(() => 
     // obtaining the data...
     {});
} 
```

[CancellationToken](http://msdn.microsoft.com/ru-ru/library/system.threading.cancellationtoken.aspx)是可选的，但如果您能够取消此长时间运行的操作，则可以为您提供帮助。

使用此方法，您可以完全删除`GetItemsAsync`，因为它可以很简单地由您的客户端处理结果而无需传递此委托：

```
// Somewhere in the client of your class
var task = yourClass.CreateItems(token);
task.ContinueWith(t => 
 // Code of the delegate that previously
 // passed to GetItemsAsync method
 {}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

Using this approach you'll get more clear code with only one responsibility. [Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx) class itself is a perfect tool for representing asynchronous operation as a [first class object](http://en.wikipedia.org/wiki/First-class_citizen). Using proposed technique you can easily mock you current implementation with a fake behavior for unit testing without changing your clients code.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:04:25.803

你的代码看起来不错。

`async / await`如果可以使用 C# 5，这是一个完美的示例，但如果不能，则必须像使用 continuation 一样编写它。

该`items`变量在您的 lambda 表达式中被捕获，所以这也很好。

当您编写使用外部变量的 lambda 时，C# 编译器会创建一个包含该变量的类。这称为闭包，意味着您可以访问 lambda 中的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T10:04:25.880

这是一个更好的灵魂：

```
 public void GetItemsAsync(Action<Item[]> handleResult)
    {
        var task = Task.Factory.StartNew<Item[]>(() =>
        {
            return this.CreateItems(); // May take a second or two
        });

        task.ContinueWith(delegate
        {
            handleResult(task.Result);
        }, TaskScheduler.FromCurrentSynchronizationContext());
    } 
```

# python - AttributeError：“模块”对象（scipy）没有属性“杂项”

> ID：13581593
> 
> 赞同：60
> 
> 时间：2012-11-27T09:58:31.270
> 
> 标签：python, scipy

我从 ubuntu 12.04 更新到 ubuntu 12.10 并且我编写的 python 模块突然不再适用于模块 scipy 没有属性“misc”的错误消息。这以前有效。更新后我仍在使用 python 2.7。这是代码崩溃的地方

```
import scipy
scipy.misc.imsave(slice,dat) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-27T10:15:51.350

```
>>> import scipy
>>> scipy.misc
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'misc'
>>> 
>>> 
>>> import scipy.misc
>>> scipy.misc.imsave
<function imsave at 0x19cfa28>
>>> 
```

这似乎很常见`scipy`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-24T15:11:58.993

因为您不能直接使用 scipy 中的 misc 模块而不显式导入它。下面是加载 scipy.misc 的方式：

```
import scipy.misc

#Load the Lena image into an array, (yes scipy does have a lena function)
lena = scipy.misc.lena()
... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-24T09:01:38.470

imread 在 1.2.0 版本之后贬值！所以为了解决这个问题我不得不安装 1.1.0 版本。

```
 pip install scipy==1.1.0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-15T12:07:34.250

1.  您需要显式导入`scipy.misc`为：

    `import scipy.misc`

2.  如果尚未安装，您需要安装包**枕头（以前称为 PIL）。**为了使图像处理功能`scipy.misc`正确运行`imread()`，`imsave()`必须安装枕头。要验证，请再次运行您的代码或键入以下命令：

    `scipy.misc.imread`

# html - 从 html 表单中的按钮中删除焦点

> ID：13581596
> 
> 赞同：0
> 
> 时间：2012-11-27T09:58:43.677
> 
> 标签：html

我有一个包含一些标签的表单，在此下方有一些按钮，问题是第一个按钮被聚焦的表单的加载。如何移除焦点？

HTML 代码：

```
<td align="center" color="black">
<button type="submit" class="pd" name="Close" onclick="window.close();">
                 Close</button>
<button type="submit"  class="pd" name="Submit" onclick="Submit();">Submit</button>
</td> 
```

请提出一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:57:45.957

您可以尝试以下方法。

```
document.getElementById('Id').blur(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:55:34.757

将按钮类型更改为按钮，而不是提交和编写用于操作的 javascript。

# jquery - 如何设置“$.mobile.changePage”转换时间？

> ID：13581599
> 
> 赞同：0
> 
> 时间：2012-11-27T09:58:45.583
> 
> 标签：jquery, jquery-ui, jquery-mobile

如何在下面的代码中设置“滑动”时间？

```
$.mobile.changePage("#page37", { transition: "slideup"}); 
```

我试过 {transition: "slideup", delay: 1000} 但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:22:38.203

转换时间不能用`changePage()`参数修改。[但是，您可以按照此处](http://jquerymobile.com/test/docs/pages/page-customtransitions.html)所述自定义转换。jquery mobile 中的默认转换时间使用以下 CSS 定义

```
.in {
-webkit-animation-timing-function: ease-out;
-webkit-animation-duration: 350ms;
-moz-animation-timing-function: ease-out;
-moz-animation-duration: 350ms;
} 
```

# mfc - 使用 COLeDateTime 为 python 编译 swig 扩展

> ID：13581600
> 
> 赞同：0
> 
> 时间：2012-11-27T09:58:54.780
> 
> 标签：mfc, swig

我正在使用一个相当广泛的 C++ 项目。只是为了好玩，我想我会尝试一个非常简单的 swig 示例，它仅使用项目中的标头来构建 python 模块。

Swig 正常运行并创建了一个 project_wrap.cxx 文件。但是，当我尝试编译该文件并将其与项目的其余部分链接时，我遇到了错误：

似乎它们主要与 MS COLeDateTime 相关：

```
Error   14  error C2061: syntax error : identifier 'COleDateTime' 
```

由以下声明产生：

```
void   SetStartTime     (COleDateTime dt    )  {m_simstart_time = dt;  } 
```

或来自 IntelliSense：

```
194 IntelliSense: identifier "COleDateTime" is undefined 
```

我认为解决方法是使用 windows.i 文件，但是有人对此有一些提示/经验/示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:42:10.397

添加

```
%{
   #include "the_coledatetime_header.h"   // whatever the header is
%} 
```

到你的 .i

#include 将添加到您的 project_wrap.cxx 中并且应该编译。检查[http://www.swig.org/Doc2.0/SWIGDocumentation.html#Preprocessor_delimiters](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Preprocessor_delimiters)了解更多信息。

# asp.net - WebAPI服务设计

> ID：13581601
> 
> 赞同：1
> 
> 时间：2012-11-27T09:58:56.807
> 
> 标签：asp.net, asp.net-mvc, rest, asp.net-web-api

在设计服务时，我对 Asp.NET MVC 控制器的工作方式非常满意。但是新的 WebAPI 控制器。我应该如何在这里设计我的服务？

假设我们有 3 种不同的方式来列出例如用户。

获取 10 个最新的，获取所有，获取非活动或其他。

这些都可能不需要参数。那么你将如何在 WebAPI 中解决这个问题

```
IEnumerable<User> Get10Latest()
IEnumerable<User> GetAll()
IEnumerable<User> GetInactive() 
```

这是行不通的，因为它们具有相同的参数签名。那么在这里设计这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:07:00.740

通过使用 action 参数，您可以在一个控制器中为单个 HTTP 方法支持多个方法。
例如

```
public class UsersController : ApiController
{

    [ActionName("All")]
    public HttpResponseMessage GetAll()
    {
        return new HttpResponseMessage();
    }

    [ActionName("MostIQ")]
    public HttpResponseMessage GetMostIQ()
    {
        return new HttpResponseMessage();
    }

    [ActionName("TenLatest")]
    public HttpResponseMessage GetTenLatest()
    {
        return new HttpResponseMessage();
    }

} 
```

不幸的是，我还没有找到一种方法来让单个控制器同时处理有和没有动作的情况。

例如

```
public class UsersController : ApiController
{

    [ActionName("")]  // Removing this attribute doesn't help
    public HttpResponseMessage Get()
    {
        return new HttpResponseMessage();
    }

    [ActionName("All")]
    public HttpResponseMessage GetAll()
    {
        return new HttpResponseMessage();
    }

    [ActionName("MostIQ")]
    public HttpResponseMessage GetMostIQ()
    {
        return new HttpResponseMessage();
    }

    [ActionName("TenLatest")]
    public HttpResponseMessage GetTenLatest()
    {
        return new HttpResponseMessage();
    }

} 
```

能够将单个控制器用于集合资源及其所有子集会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:07:38.743

那么为什么没有这样的网址：

```
GET /users
GET /users/latest
GET /users/inactive 
```

使用路由，您可以将它们路由到

```
public classs UserController : ApiController
{
    public IEnumerable<User> Get(string mode)
    {
        // mode is in routing restricted to be either empty, latest, or inactive
     }
 } 
```

否则使用多个控制器。在 Web API 中使用动作名称是一种错误的处理方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:58:29.290

可能有人会陪我，并为此缠住我，但你需要配置你的路由来处理 Gets。这就是我如何使用上述操作：

```
config.Routes.MapHttpRoute(
            name: "CustomApi",
            routeTemplate: "api/{controller}/{action}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

因此，现在您的请求通过路由模板映射到正确的控制器 -> 操作。注意，新路由需要先在 WebApiConfig.cs 中注册。如果你保留旧的，默认的。

编辑

重新阅读了这个问题后，我意识到我并没有完全回答设计问题。我认为从 REST 的角度来看，一种解决方法是使用单独的资源来公开正确的集合（例如 Get10Latest），因为我认为通过服务。在这种情况下，您将通过其自己的控制器中的单个 Get 公开该资源（如果这是所需的行为）。

# jpa - JPA 和乐观锁定模式

> ID：13581603
> 
> 赞同：23
> 
> 时间：2012-11-27T09:59:01.450
> 
> 标签：jpa, transactions, locking

[我在 Oracle的](https://blogs.oracle.com/enterprisetechtips/entry/locking_and_concurrency_in_java)博客上阅读了一篇关于 JPA 和锁定模式的文章。

我不完全理解`OPTIMISTIC`和`OPTIMISTIC_FORCE_INCREMENT`锁定模式类型之间的区别。

***`OPTIMISTIC`模式 ：***

![在此处输入图像描述](../Images/a5582df80332d88d17e66b258e86bf36.png)

当用户使用此模式锁定实体时`@version`，事务开始时会检查版本字段实体 ()，事务结束时也会检查版本字段。如果版本不同，则事务回滚。

***`OPTIMISTIC_FORCE_INCREMENT`模式 ：***

![在此处输入图像描述](../Images/f528c82d34fb3f520697cff059079dd3.png)

当用户选择此模式时，他必须将 EntityManager 的状态刷新（）到数据库中以手动增加版本字段。因此，所有其他乐观事务都将失效（回滚）。在事务结束时也会检查版本以提交或回滚事务。

看起来很清楚，但我什么时候应该使用`OPTIMISTIC`vs`OPTIMISTIC_FORCE_INCREMENT`模式？我看到的唯一标准是`OPTIMISTIC_FORCE_INCREMENT`当我希望事务优先于其他事务时应用模式，因为选择此模式将回滚所有其他正在运行的事务（如果我理解机制的话）。

还有其他理由选择这种模式而不是`OPTIMISTIC`模式吗？

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-08-26T13:48:40.797

不要被这个冗长的答案吓到。这个话题不简单。

默认情况下 ，如果您未指定任何锁定（与 using 相同的行为），JPA 会强制执行*读取提交*`LockModeType.NONE`隔离级别。

*已*提交读*要求**不存在***脏读*现象。只是 T1 只能在 T2 提交后看到 T2 所做的更改。*

 *在 JPA 中使用乐观锁定将隔离级别提高到可 *重复读取*。

如果 T1 在事务开始和结束时读取了一些数据，可*重复读取*可确保 T1 看到相同的数据，即使 T2 更改了数据并在 T1 中间提交。

棘手的部分来了。JPA以最简单的方式实现*可重复读取：通过***防止** *不可重复读取*现象。JPA 不够复杂，无法保留读取的快照。它只是通过引发异常来防止发生第二次读取（如果数据已从第一次读取发生更改）。

您可以从两个乐观锁定选项中进行选择：

*   `LockModeType.OPTIMISTIC`（`LockModeType.READ`在 JPA 1.0 中）

*   `LockModeType.OPTIMISTIC_FORCE_INCREMENT`（`LockModeType.WRITE`在 JPA 1.0 中）

**两者有什么区别？**

`Person`让我用这个实体的例子来说明。

```
@Entity
public class Person {
    @Id int id;
    @Version int version;
    String name;
    String label;
    @OneToMany(mappedBy = "person", fetch = FetchType.EAGER)
    List<Car> cars;
    // getters & setters
} 
```

现在假设我们有一个名为*John*的 Person存储在数据库中。我们在 T1 中读取了这个人，但在第二个事务 T2 中将他的名字改为*Mike*。

**没有任何锁定**

```
Person person1 = em1.find(Person.class, id, LockModeType.NONE); //T1 reads Person("John")

Person person2 = em2.find(Person.class, id); //T2 reads Person("John")
person2.setName("Mike"); //Changing name to "Mike" within T2
em2.getTransaction().commit(); // T2 commits

System.out.println(em1.find(Person.class, id).getName()); // prints "John" - entity is already in Persistence cache
System.out.println(
  em1.createQuery("SELECT count(p) From Person p where p.name='John'")
    .getSingleResult()); // prints 0 - ups! don't know about any John (Non-repetable read) 
```

**乐观读锁**

```
 Person person1 = em1.find(Person.class, id, LockModeType.OPTIMISTIC); //T1 reads Person("John")

    Person person2 = em2.find(Person.class, id); //T2 reads Person("John")
    person2.setName("Mike"); //Changing name to "Mike" within T2
    em2.getTransaction().commit(); // T2 commits

    System.out.println(
            em1.createQuery("SELECT count(p) From Person p where p.name='John'")
                    .getSingleResult()); // OptimisticLockException - The object [Person@2ac6f054] cannot be updated because it has changed or been deleted since it was last read. 
```

* * *

`LockModeType.OPTIMISTIC_FORCE_INCREMENT`当对其他实体（可能是非拥有关系）进行更改并且我们希望保持完整性时使用。让我以约翰购买一辆新车为例。

**乐观读锁**

```
Person john1 = em1.find(Person.class, id); //T1 reads Person("John")

Person john2 = em2.find(Person.class, id, LockModeType.OPTIMISTIC); //T2 reads Person("John")
//John gets a mercedes
Car mercedes = new Car();
mercedes.setPerson(john2);
em2.persist(mercedes);
john2.getCars().add(mercedes);
em2.getTransaction().commit(); // T2 commits

//T1 doesn't know about John's new car. john1 in stale state. We'll end up with wrong info about John.
if (john1.getCars().size() > 0) { 
    john1.setLabel("John has a car");
} else {
    john1.setLabel("John doesn't have a car");
}
em1.flush(); 
```

**乐观写锁**

```
Person john1 = em1.find(Person.class, id); //T1 reads Person("John")
Person john2 = em2.find(Person.class, id, LockModeType.OPTIMISTIC_FORCE_INCREMENT); //T2 reads Person("John")
//John gets a mercedes
Car mercedes = new Car();
mercedes.setPerson(john2);
em2.persist(mercedes);
john2.getCars().add(mercedes);
em2.getTransaction().commit(); // T2 commits

//T1 doesn't know about John's new car. john1 in stale state. That's ok though because proper locking won't let us save wrong information about John.
if (john1.getCars().size() > 0) { 
    john1.setLabel("John has a car");
} else {
    john1.setLabel("John doesn't have a car");
}
em1.flush(); // OptimisticLockException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) 
```

尽管在 JPA 规范中有以下注释，但 Hibernate 和 EclipseLink 表现良好，不要使用它。

> 对于版本化对象，允许实现在请求 LockModeType.OPTIMISTIC 的地方使用 LockModeType.OPTIMISTIC_FORCE_INCREMENT，但反之则不行。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-27T15:09:06.587

通常，您永远不会使用 lock() API 进行乐观锁定。JPA 将自动检查任何更新或删除的任何版本列。

用于乐观锁定的 lock() API 的唯一目的是当您的更新依赖于另一个未更改/更新的对象时。如果其他对象发生更改，这允许您的事务仍然失败。

何时执行此操作取决于应用程序和用例。OPTIMISTIC 将确保在您提交时其他对象尚未更新。OPTIMISTIC_FORCE_INCREMENT 将确保其他对象尚未更新，并将在提交时增加其版本。

乐观锁定总是在提交时验证，并且在提交之前不能保证成功。您可以使用 flush() 提前强制数据库锁定，或触发较早的错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-16T13:54:13.883

[`LockModeType.OPTIMISTIC`](https://vladmihalcea.com/hibernate-locking-patterns-how-does-optimistic-lock-mode-work/)遇到`check-then-act`问题，因此最好将其与 a[`PESSIMISTIC_READ`](https://vladmihalcea.com/how-to-fix-optimistic-locking-race-conditions-with-pessimistic-locking/)或[`PESSIMISTIC_WRITE`](https://vladmihalcea.com/how-to-fix-optimistic-locking-race-conditions-with-pessimistic-locking/).

另一方面，[`LockModeType.OPTIMISTIC_FORCE_INCREMENT`](https://vladmihalcea.com//hibernate-locking-patterns-how-does-optimistic_force_increment-lock-mode-work/)不会遇到任何数据不一致问题，并且您通常会在修改子实体时使用它来控制父实体的版本。

例如，您可以使用`LockModeType.OPTIMISTIC_FORCE_INCREMENT`or[`LockModeType.PESSIMISTIC_FORCE_INCREMENT`](https://vladmihalcea.com/hibernate-locking-patterns-how-does-pessimistic_force_increment-lock-mode-work/)使[父实体版本也考虑到子实体的变化](https://vladmihalcea.com/how-to-increment-the-parent-entity-version-whenever-a-child-entity-gets-modified-with-jpa-and-hibernate/)。*

# backbone.js - 使用 require.js 构建backbone.js 应用程序

> ID：13581604
> 
> 赞同：1
> 
> 时间：2012-11-27T09:59:07.807
> 
> 标签：backbone.js, requirejs

我开始关注[使用模块组织您的应用程序（require.js](http://backbonetutorials.com/organizing-backbone-using-modules/)教程，但在将第一个事件处理程序添加到我的视图后 - 我遇到了问题：

```
 // Filename: views/project/list
define([
  'jquery',
  'underscore',
  'backbone',
  'handlebars',
  'collections/projects',
  'text!templates/projects/list.js'
], function ($, _, Backbone, Handlebars, ProjectsCollection, projectListTemplate) {
    var ProjectListView = Backbone.View.extend({
        el: $('#container'),
        events: {
            "click .open-proj": "openProject",
        },
        initialize: function () {
          ...
        },
        render: function () {
            ...
        },
        openProject: function(e) {
            // HERE I WANT TO TRIGGER ROUTING VIA router.navigate
            alert("opened");
        }
    });
    // Our module now returns our view
    return ProjectListView;
}); 
```

在`openProject`回调中我想触发路由，但我不能向 app.js 引入依赖，因为它会导致循环依赖（路由器依赖于视图）。我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:18:12.693

您可以`ProjectListView`在创建路由器时将其传递给：

```
var projectListView = new ProjectListView({
    router: app_router
}); 
```

既然`ProjectListView`是 a `Backbone.View`，那么它就可以使用 访问路由器`this.options.router`，这里没有循环依赖问题。

# java - 日期格式化后以小写形式显示 AM 和 PM

> ID：13581608
> 
> 赞同：74
> 
> 时间：2012-11-27T09:59:19.960
> 
> 标签：java, datetime, simpledateformat

格式化日期时间后，时间以大写形式显示 AM 或 PM，但我希望它以小写形式显示，例如 am 或 pm。

这是我的代码：

```
public class Timeis {
    public static void main(String s[]) {
        long ts = 1022895271767L;
        String st = null;  
        st = new SimpleDateFormat(" MMM d 'at' hh:mm a").format(ts);
        System.out.println("time is " + ts);  
    }
} 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-27T10:14:44.927

这有效

```
public class Timeis {
    public static void main(String s[]) {
        long ts = 1022895271767L;
        SimpleDateFormat sdf = new SimpleDateFormat(" MMM d 'at' hh:mm a");
        // CREATE DateFormatSymbols WITH ALL SYMBOLS FROM (DEFAULT) Locale
        DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());
        // OVERRIDE SOME symbols WHILE RETAINING OTHERS
        symbols.setAmPmStrings(new String[] { "am", "pm" });
        sdf.setDateFormatSymbols(symbols);
        String st = sdf.format(ts);
        System.out.println("time is " + st);
    }
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-11-27T10:02:41.217

不幸的是，标准格式化方法不允许您这样做。乔达也没有。我认为您将不得不通过简单的后格式替换来处理您的格式化日期。

```
String str = oldstr.replace("AM", "am").replace("PM","pm"); 
```

您可以使用`replaceAll()`使用 regepxs 的方法，但我认为以上内容可能就足够了。我*没有*做一个毯子`toLowerCase()`，因为如果您将来更改格式字符串以包含（例如）月份名称或类似名称，这可能会破坏格式。

编辑：[James Jithin 的解决方案](https://stackoverflow.com/a/13581910/2911458)看起来好多了，而且这样做的正确方法（如评论中所述）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-26T08:41:13.230

**如果您不想进行字符串替换，并且正在使用 Java 8** `javax.time`：

```
Map<Long, String> ampm = new HashMap<>();
ampm.put(0l, "am");
ampm.put(1l, "pm");

DateTimeFormatter dtf = new DateTimeFormatterBuilder()
        .appendPattern("E M/d h:mm")
        .appendText(ChronoField.AMPM_OF_DAY, ampm)
        .toFormatter()
        .withZone(ZoneId.of("America/Los_Angeles")); 
```

有必要手动构建一个`DateTimeFormatter`（指定单个部分），因为小写 am/pm 没有模式符号。您可以`appendPattern`在之前和之后使用。

我相信没有办法替换默认的 am/pm 符号，这使得这是在最终字符串上进行字符串替换的唯一方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-27T10:03:07.177

尝试这个：

```
System.out.println("time is " + ts.toLowerCase()); 
```

尽管您可以创建自定义格式，如此处和[此处](https://stackoverflow.com/questions/223325/customizing-java-text-formatters-for-different-locales)[详述](http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html)

不幸的是，[开箱](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)即用的 AM 和 PM 似乎无法在标准 SimpleDateFormat 类中自定义

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-30T09:47:58.350

```
Calendar c = Calendar.getInstance();

System.out.println("Current time => " + c.getTime());

SimpleDateFormat df = new SimpleDateFormat("HH:mm a");
String formattedDate = df.format(c.getTime());
formattedDate = formattedDate.replace("a.m.", "AM").replace("p.m.","PM");

TextView textView = findViewById(R.id.textView);
textView.setText(formattedDate); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-06T21:12:33.010

如果您想要除默认上午、下午以外的其他风格，詹姆斯的回答非常棒。但恐怕您需要在区域设置和区域设置特定的 AM/PM 设置之间进行映射以采用覆盖。现在您只需使用 java 内置的 java.util.Formatter 类。所以一个简单的例子看起来像这样：

```
System.out.println(String.format(Locale.UK, "%1$tl%1$tp", LocalTime.now())); 
```

它给：

```
9pm 
```

请注意，如果您想要大写，只需将“%1$ **t** p”替换为“%1$ **T** p”即可。[您可以在http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#dt](http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#dt)找到更多详细信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-24T10:31:13.073

这就是我们在 android studio 的 java 代码中执行传递 unix 时间戳作为参数的方式

```
private String convertTimeToTimeStamp(Long timeStamp){
            SimpleDateFormat sdf=new SimpleDateFormat("hh:mm aaa", Locale.getDefault());
            return sdf.format(timeStamp);
        } 
```

函数返回格式为 09:30 PM 的时间

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-18T13:06:16.053

```
 String today = now.format(new DateTimeFormatterBuilder()
            .appendPattern("MM/dd/yyyy ")
            .appendText(ChronoField.AMPM_OF_DAY)
            .appendLiteral(" (PST)")
            .toFormatter(Locale.UK)); 
```

// 输出 => 2019 年 6 月 18 日上午（太平洋标准时间）

Locale.UK => 上午或下午；Locale.US => 上午或下午；根据您的需要尝试不同的语言环境（默认等）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-04T12:21:45.287

`toLowarCase()`像这样添加

```
public class Timeis {
public static void main(String s[]) {
      long ts = 1022895271767L;
      String st = null;  
      st = new SimpleDateFormat(" MMM d 'at' hh:mm a").format(ts).toLowerCase();
      System.out.println("time is " + ts);  
}
} 
```

`toUpperCase()`如果你想要大写

# tfs - 如何避免在不使用忽略属性的 mstest 中运行测试？

> ID：13581609
> 
> 赞同：4
> 
> 时间：2012-11-27T09:59:23.157
> 
> 标签：tfs, msbuild, visual-studio-2012, mstest

我们有几个在与外部服务集成时使用的单元测试。这些服务可能不稳定，并且超出我们的控制范围，因此有必要将它们从我们的日常构建中删除。

我们已经在单独的程序集中进行了集成测试，因为通常的单元测试是作为门控签入的一部分运行的。

尽管如此，我们仍然希望在日常构建中运行一些集成测试，因此我们无法从日常构建中完全删除程序集。

我试图删除 [TestClass] 属性，并且在 VS2012 中运行良好。但是当我们签入并让 TFS (2010) 构建和运行测试时，我得到了以下错误。

*[错误消息] = UTA004：非法使用 Test.TestMethod 上的属性。TestMethodAttribute 只能在标有 TestClass 属性的类中定义。*

有人知道如何完全删除测试运行吗？[Ignore] 不行，然后我的测试运行将被关于忽略测试的警告弄得一团糟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:14:56.767

为什么不使用[`TestCategoryAttribute`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcategoryattribute.aspx)来装饰您的集成测试。

例如让你的测试像这样：

```
[TestClass]
public class Tests
{
    [TestMethod]
    public void AtomicTest
    {
        Assert.IsTrue(true);
    }

    [TestMethod, TestCategory("Integration")]
    public void IntegrationTest
    {
        Assert.IsFalse(false);
    }
} 
```

然后将您的 TFS 构建配置为仅运行您感兴趣的构建：

*   [EdSquared 上的示例](http://www.edsquared.com/2009/09/25/Test+Categories+And+Running+A+Subset+Of+Tests+In+Team+Foundation+Server+2010.aspx)
*   [MSDN 上的示例](http://msdn.microsoft.com/en-us/library/ms182489%28VS.100%29.aspx#category)

# java - 运行 mybatis 生成器时出现意外错误。不支持的major.minor 51.0版

> ID：13581610
> 
> 赞同：0
> 
> 时间：2012-11-27T09:59:24.707
> 
> 标签：java, mybatis

运行 mybatis 生成器配置时出现此错误。所以当我点击 generatorConfig.xml 然后点击 Generate Mybatis artifacts。我得到了错误

我使用的是 java 1.7，我检查了安装的 java 版本是 jdk1.7.0，jdk 编译时间也是 1.7。

```
 Unexpected error while running MyBatis Generator. 
    com/mycom/myproject/db/mybatis/model/BaseModel : Unsupported major.minor version 51.0 
```

我正在使用的表格是这样的

```
 <table  tableName="feed_entries" domainObjectName="Categories" modelType="conditional">
  <property name="useActualColumnNames" value="false"/>
  <property name="rootClass" value="com.mycom.myproject.db.mybatis.model.BaseModel"/>
  <generatedKey column="id" sqlStatement="MySql" identity="true"/>
</table> 
```

请让我知道是否需要其他任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:55:57.433

错误是由于您正在使用 J2SE 7 (51) 进行编译，但您正在使用较低版本运行您的应用程序。我会说它与 myBatis 无关。

仔细检查您是否正在使用 J2SE 7 运行代码。看看这个[问题](https://stackoverflow.com/q/7237536/980472)。如果您通过 Eclipse 使用它，请确保 Eclipse 也使用 J2SE 7。

# python - 正则表达式匹配之间的字符串列表

> ID：13581611
> 
> 赞同：1
> 
> 时间：2012-11-27T09:59:25.737
> 
> 标签：python, regex

如何找到正则表达式模式之间的所有字符串？例如，

```
>>> s="123 asd 12 456 sfd g 789"
>>> reg=re.compile("\d{3}")
>>> reg.findall(s)
['123', '456', '789'] 
```

我想找到：

```
[' asd 12 ', ' sfd g '] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:00:51.127

使用[`.split()`方法](http://docs.python.org/2/library/re.html#re.RegexObject.split)而不是`.findall()`：

```
>>> reg.split(s)
['', ' asd 12 ', ' sfd g ', ''] 
```

它包括匹配之间的*所有*结果，包括开头和结尾的空字符串。您可以过滤掉那些：

```
>>> filter(None, reg.split(s))
[' asd 12 ', ' sfd g '] 
```

尽管在 Python 3 上您需要使用`list(filter(None, reg.split(s)))`，或迭代`filter()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:00:39.113

使用`re.split`而不是`re.findall`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:06:32.850

您可以尝试以下方法：

```
>>> reg = re.compile(r'(?:\d{3})?(.*?)\d{3}')
>>> reg.findall("123 asd 12 456 sfd g 789")
[' asd 12 ', ' sfd g '] 
```

由于`.findall()`不会找到重叠匹配项，因此您需要将第一组数字指定为可选匹配项。最后，与单独的正则表达式相比，采用不同的方法可能会更好，以获得更强大的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:41:14.213

```
>>> s = "123 asd 12 456 sfd g 789"
>>> filter(None, re.compile("\d{3}").split(s))
[' asd 12 ', ' sfd g '] 
```

# javascript - 最可行的 WebSocket/Perl 解决方案

> ID：13581612
> 
> 赞同：6
> 
> 时间：2012-11-27T09:59:28.000
> 
> 标签：javascript, perl, apache, websocket, mod-perl

我工作的公司将 Perl 用于所有“后端相关”的东西。但是，我们希望通过浏览器在服务器进程和连接的客户端之间使用一些实时通信。

我们还使用 Apache 作为带有*mod.perl*的 Web 服务器。所以这是我的第一个问题，我看不到任何实用的方法可以在那个星座中组合 WebSocket-Server。也许有一个我还没有找到？

唯一真正认真对待该主题的是*Mojolicious*。但是我还没有那么有经验，所以如果有人能说明我是否可以在我当前的 mod-perl 环境中使用它，我会很高兴。我想我也必须让它作为*独立的网络服务器进程*运行，不是吗？

这让我想到了第二个问题。*最佳实践是什么，如果您有多个 perl 文件，它们在Apache/modperl*上运行某些事情，但您希望让所有连接的用户了解这些事情。我的意思是，所有这些脚本都是通过*XHR*访问的，但有些操作需要其他用户了解。目前，我们做了一个经典的*ajax polling*。

我正在努力解决的问题是，如果有一个独立运行的*专用 websocket 服务器*，那么所有这些脚本也需要以某种方式与这个进程进行通信，对吗？如何做到这一点？管道？插座？共享内存？

从理论上讲，如果我选择使用这种独立的*ws 服务器*解决方案，我可以用任何语言编写它，对吧？甚至可以是 Ruby 或 Node。我只是想知道这是否是最好的方法，或者是否有一个很好的解决方案可以更好地集成到现有的 perl/modperl 结构中。

**TL;DR**
最好的做法是拥有一个*独立的 Web 套接字服务器*，它与您的*Apache/modperl*脚本的其余部分以及与其连接的客户端进行通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:09:09.270

您可以查看 AnyEvent CPAN 模块： [http ://metacpan.org/pod/AnyEvent](http://metacpan.org/pod/AnyEvent)

有了它，您可以编写自己的独立事件驱动的 WebSocket 服务器，也可以在 google 或 AnyEvent 的 perldoc 中找到很多示例。

# sql - 基于函数的索引

> ID：13581617
> 
> 赞同：1
> 
> 时间：2012-11-27T09:59:55.323
> 
> 标签：sql, performance, oracle

```
select
<here I have functions like to_char, nvl, rtrim, ltrim, sum, decode>
from
table1
table2
where
joining conditions 1
joining conditions 2
group by
<here I have functions like to_char, nvl, rtrim, ltrim, sum, decode> 
```

我从生产中得到了这个查询，并认为它需要提供一些调整解决方案，我正在考虑使用基于函数的 inbex 来按列分组。我认为选择列不必是索引。几天后我会得到环境，但在此之前我需要想出不同的方法。我需要检查按索引的函数是否有用？另外，除了解释计划之外，我还需要向 DBA 询问哪些其他文件？

我在这里添加实际的 sql，我已经要求解释计划，我会在某个时候得到：-

```
SELECT
  D_E_TRADE.DATE_VALUE,
  to_char(D_E_TRADE.DATE_VALUE,'Mon-yyyy'),
  NVL(P_DIM.P_NAME,' '),
  rtrim(ltrim(P_DIM.C_CTRY)),
  D_E_TRADE.YEAR,
  L_E_DIM.L_CODE,
  NVL(D_DIM.DESCR,' '),
  ( decode(D_DIM.DEPT_ID,'-1',' ',D_DIM.DEPT_ID) ),
  sum(A_CGE.TOTAL_CALC_NET_FEES),
  L_E_DIM.L_NAME,
  decode(A_CGE.E_M_CENTER,-9,0,A_CGE.E_M_CENTER),
  NVL(F_DIM.S_DESC,'-1'),
  sum(A_CGE.C_TOTAL_SHARES)
FROM
  DATE_D  D_E_TRADE,
  P_DIM,
  L_E_DIM,
  D_DIM,
  A_CGE,
  F_DIM
WHERE
  ( D_E_TRADE.DATE_KEY=A_CGE.T_KEY  )
  AND  ( P_DIM.PARTY_KEY=A_CGE.E_P_KEY  )
  AND  ( F_DIM.F_T_KEY=A_CGE.F_T_KEY  )
  AND  ( L_E_DIM.L_E_KEY=A_CGE.L_E_KEY  )
  AND  ( D_DIM.DEPT_KEY=A_CGE.DEPT_KEY  )
  AND  
  (
   rtrim(ltrim(P_DIM.C_CTRY))  =  'AC'
   AND
   ( A_CGE.T_KEY >= (SELECT   DATE_D_PROMPTS.DATE_KEY FROM   DATE_D  DATE_D_PROMPTS WHERE (  DATE_D_PROMPTS.DATE_VALUE = '01-01-2012 00:00:00'  ) )
 AND
 A_CGE.T_KEY <= (SELECT  DATE_D_PROMPTS.DATE_KEY FROM   DATE_D  DATE_D_PROMPTS WHERE  (  DATE_D_PROMPTS.DATE_VALUE = '31-08-2012 00:00:00'  ))
  AND
 A_CGE.TRANS_REGION_KEY IN (SELECT REGION_KEY FROM REGION_DIM WHERE REGION_DIM.REGION_NAME IN ('Americas') )                                                                                                       )
   AND
   ( A_CGE.T_KEY >= (SELECT   DATE_D_PROMPTS.DATE_KEY FROM   DATE_D  DATE_D_PROMPTS WHERE (  DATE_D_PROMPTS.DATE_VALUE = '01-01-2012 00:00:00'  ) )
 AND
 A_CGE.T_KEY <= (SELECT  DATE_D_PROMPTS.DATE_KEY FROM   DATE_D  DATE_D_PROMPTS WHERE  (  DATE_D_PROMPTS.DATE_VALUE = '31-08-2012 00:00:00'  ))
  AND
 A_CGE.TRANS_REGION_KEY IN (SELECT REGION_KEY FROM REGION_DIM WHERE REGION_DIM.REGION_NAME IN ('Americas') )                                                                                                       )
   AND
   ( 'All Fees' IN ('2 - E','3 - P','4 - F','5 - C,')     OR                                                                                                                                        A_CGE.F_T_KEY IN (SELECT F_T_KEY FROM F_DIM WHERE (F_DIM.s_id ) || ' - ' || ( F_DIM.CHARGE_LVL1_NAME ) IN ('2 - E','3 - P','4 - F','5 - C'))  )
  )
GROUP BY
  D_E_TRADE.DATE_VALUE, 
  to_char(D_E_TRADE.DATE_VALUE,'Mon-yyyy'), 
  NVL(P_DIM.P_NAME,' '), 
  rtrim(ltrim(P_DIM.C_CTRY)), 
  D_E_TRADE.YEAR, 
  L_E_DIM.L_CODE, 
  NVL(D_DIM.DESCR,' '), 
  ( decode(D_DIM.DEPT_ID,'-1',' ',D_DIM.DEPT_ID) ), 
  L_E_DIM.L_NAME, 
  decode(A_CGE.E_M_CENTER,-9,0,A_CGE.E_M_CENTER), 
  NVL(F_DIM.S_DESC,'-1') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:23:25.800

一般来说，当您有可能使用索引的过滤条件时，索引可以帮助您快速检索数据。

（另一种情况是您仅检索索引中的列，因此引擎不需要从表中读取任何内容）

在您的情况下，您可能需要以下部分中的过滤/连接条件索引：

```
joining conditions 1
joining conditions 2 
```

但请记住。如果您获得超过 15%-20% 的表行，最好从表中读取，而不是使用索引。也就是说，索引可能不会被使用。

# css - Bootstrap 主题 - variables.less - Bootswatch

> ID：13581620
> 
> 赞同：12
> 
> 时间：2012-11-27T10:00:02.493
> 
> 标签：css, twitter-bootstrap, less

如何从[http://bootswatch.com/](http://bootswatch.com/)的 variables.less 和 bootstrap.less 文件生成 bootstrap.css 文件？

使用lessC编译，我得到一个css文件，但它比bootstrap.css小得多。我应该如何更改其中一个主题的颜色？

万分感谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-04T21:06:40.737

Bootswatch Swatchmaker 很棒，但有时您会尝试在更具脚本化的环境中包含 Bootswatch 主题，或者需要更好地了解 Bootswatch 主题是如何组合在一起的。这是我**手动**编译 Bootswatch 主题的方法。

1.  从[源代码](https://github.com/twbs/bootstrap)下载 Twitter Bootstrap并解压缩。
2.  将 Bootswatch 文件移动到文件`variables.less`夹`bootswatch.less`，`less/`替换现有`variables.less`文件。
3.  最后`bootstrap.less`，追加`@import "bootswatch.less";`.
4.  编译`bootstrap.less`。我推荐使用[Bootstrap 提供的 grunt 任务](http://getbootstrap.com/getting-started/#grunt)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-27T18:51:11.357

# Bootswatch Swatchmaker

Bootswatch 的创建者和维护者 Thomas Park 制作了一个名为**Swatchmaker**的小工具包，专门用于自定义 Bootswatch 主题或创建新主题。

[在 GitHub 上的 Bootswatch 存储库中](https://github.com/thomaspark/bootswatch/tree/master/swatchmaker)查看Swatchmaker 自述文件以获取更多信息。

完成设置后，只需将要编辑的主题的 LESS 文件添加到`swatch`目录中，使用您的自定义编辑**variables.less**。

**swatchmaker.less**的内容很好地总结了它的作用：

```
@import "bootstrap/less/bootstrap.less";
@import "swatch/variables.less";
@import "swatch/bootswatch.less";
@import "bootstrap/less/utilities.less"; 
```

然后**bootstrap.css**从`lessc swatchmaker.less > bootstrap.css`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-24T17:44:52.393

不确定如何将其作为“补充”答案（@merv 已经给出了正确答案！），但以防万一它对任何人都有用：

我的问题是我只想使用 bootstrap.less 和 variables.less 文件来生成一个新主题，而这种方式只使用了 Bootstrap 发行版中已经开发的 Grunt 任务。我不想安装任何特定于 Bootswatch 的工具来编译新主题。

我已经有一个修改后的构建脚本，它使用路径 /lib/bootstrap 中的核心引导程序。我认为主题也是 lib 的一部分，但我给了它自己的目录：/lib/theme

在主题目录中，我放置了从[http://bootswatch.com](http://bootswatch.com)下载的两个文件——即“bootswatch.less”和“variables.less”。问题是，这两个文件本身并没有真正“做任何事情”。他们仍然依赖 Bootstrap。所以把它全部连接起来意味着创建第三个文件，我称之为“theme.less”。theme.less 的内容如上面@merv 所述：

```
@import "../bootstrap/less/bootstrap.less";
@import "variables.less";
@import "bootswatch.less";
@import "../bootstrap/less/utilities.less"; 
```

根据您构建项目的方式，您的路径会有所不同。然后，在 Gruntfile.js（修改自 Bootstrap 中包含的那个）中，找到 compileTheme 配置对象并将其修改为指向这个新的 theme.less 文件：

```
compileTheme: {
    options: {
      strictMath: true,
      sourceMap: true,
      outputSourceFiles: true,
      sourceMapURL: '<%= pkg.name %>-theme.css.map',
      sourceMapFilename: 'dist/css/<%= pkg.name %>-theme.css.map'
    },
    src: 'lib/theme/theme.less',
    dest: 'dist/css/<%= pkg.name %>-theme.css'
  } 
```

只有“src”行发生了变化。

现在，当您运行 > `grunt dist`（或任何其他相关的 grunt 任务）时，它将从新位置获取主题，应用 Bootstrap 包含文件的适当部分，并生成一个新主题。

希望这对任何人都有帮助。它不直接回答 OP，因为它是 bootstrap-theme.css 文件而不是 bootstrap.css 文件，但它更符合人们在撰写本文时倾向于使用 Bootstrap 3.2+ 所做的事情。更重要的是，对于那些比较熟悉 LESS 和 Grunt 的人来说，在不覆盖引导目录中的文件的情况下修改构建脚本是一种相当轻松的方式。

# javascript - 在 mvc4 中使用 javascript 渲染同一页面

> ID：13581630
> 
> 赞同：0
> 
> 时间：2012-11-27T10:00:42.733
> 
> 标签：javascript, asp.net-mvc

我是 mvc4 的新手。我正在使用部分视图。在那个局部视图中，我需要填充原始图像和负图像。第一次，我正在加载原始图像，当我按下切换按钮时，我需要使用负图像更新局部视图，而无需转到控制器。

**注意：**我从控制器获得了原始图像和负图像。

请帮我怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:17:52.070

如果您同时加载原始图像和负像，我猜负像在不可见的 div 中。因此，您只需切换原始图像和负面图像的可见性。

**HTML 代码：**

```
<div id="image-1"><img src="..."></div>
<div id="image-neg-1" class="invisible"><img src="..."></div>
<button id="toggle-1" /> 
```

**Javascript代码：**

```
document.getElementById("toggle-1").onclick = toggleImage;

function toggleImage() {
    var firstImage = document.getElementById("image-1"),
        vis = firstImage.style.display;

    document.getElementById("image-1").style.display = (vis === "none") ? "block" : "none";   
    document.getElementById("image-neg-1").style.display = (vis === "none") ? "none" : "block";
} 
```

# python - windows 7下python中使用textfile作为stdin

> ID：13581632
> 
> 赞同：2
> 
> 时间：2012-11-27T10:00:47.583
> 
> 标签：python, windows, pipe, io-redirection

我是win7用户。

我无意中读到了`command1 < infile > outfile`*nix 系统中的重定向（如），然后我发现[在 Windows（链接）中可以完成类似](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)的事情。python 也可以用管道（？）或标准输入/标准输出（？）做这样的事情。

我不明白这在 Windows 中是如何发生的，所以我有一个问题。

我使用某种专有的 Windows 程序 (.exe)。该程序能够将数据附加到文件中。为简单起见，我们假设它相当于类似

```
while True:
    f = open('textfile.txt','a')
    f.write(repr(ctime()) + '\n')
    f.close()
    sleep(100) 
```

**问题：** 我可以使用这个文件（textfile.txt）作为标准输入吗？我的意思是脚本（当它运行时）应该总是（不是一次）处理所有新数据，即

在“永无止境的循环”中：

*   程序（.exe）写了一些东西。

*   Python 脚本捕获数据和进程。

你能否写下如何在 python 中执行此操作，或者在 win cmd/.bat 或其他方式中。

**这是非常酷的事情。我想学习怎么做！:D**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:26:13.383

如果我正确阅读了您的问题，那么您希望将输出从一个命令传递到另一个命令。

这通常是这样完成的：

```
cmd1 | cmd2 
```

但是，您说您的程序只写入文件。我会仔细检查文档，看看它们是否不是让命令写入标准输出而不是文件的方法。

如果这不可能，那么您可以创建所谓的`named pipe`. 它在您的文件系统上显示为一个文件，但实际上只是一个可以写入和读取的数据缓冲区（数据是一个流，只能读取一次）。这意味着您的程序读取它不会完成，直到写入管道的程序停止写入并关闭“文件”。我没有在 Windows 上使用命名管道的经验，因此您需要为此提出一个新问题。管道的一个缺点是它们的缓冲区大小有限。因此，如果没有程序从管道读取数据，那么一旦缓冲区已满，写入程序将无法继续，只能无限期地等待，直到程序开始从管道读取数据。

另一种选择是，在 Unix 上，有一个名为的程序`tail`可以设置为持续监视文件的更改并在文件附加到文件时输出任何数据（有很短的延迟。

```
tail --follow=textfile.txt --retry | mycmd 
# wait for data to be appended to the file and output new data to mycmd

cmd1 >> textfile.txt # append output to file 
```

需要注意的一点是，它`tail`不会仅仅因为第一个命令停止写入文件而停止。`tail`将永远继续监听该文件的更改，或者直到 mycmd 停止监听`tail`，或者直到`tail`被杀死（或“sigint-ed”）。

这个[问题](https://stackoverflow.com/questions/187587/looking-for-a-windows-equivalent-of-the-unix-tail-command)有关于如何`tail`在 Windows 机器上获取一个版本的各种答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:02:56.133

```
import sys
sys.stdin = open('textfile.txt', 'r')
for line in sys.stdin:
    process(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:08:09.893

如果程序写入`textfile.txt`，您不能将其更改为重定向到`stdin`您的 Python 脚本，除非您重新编译程序以执行此操作。

如果要编辑程序，*则*需要将其写入`stdout`，而不是文件系统上的文件。这样，您可以使用重定向运算符将其输入您的 Python 脚本（在您的情况下为`|`运算符）。

假设您不能这样做，您可以编写一个程序来轮询文本文件的更改，并仅使用新写入的数据，方法是跟踪上次更新时读取的数据量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:08:22.903

当您使用`<`将文件的输出定向到 python 脚本时，该脚本会在其[`stdin`stream](http://docs.python.org/2/library/sys.html#sys.stdin)上接收该数据。

只需读取`sys.stdin`即可获取该数据：

```
import sys
for line in sys.stdin:
    # do something with line 
```

# linux - 按小时计算行数

> ID：13581636
> 
> 赞同：18
> 
> 时间：2012-11-27T10:00:57.463
> 
> 标签：linux, unix, awk

什么命令可以按小时或按分钟计算我们看到某行的次数？

文件：

```
Nov 26 08:50:51
Nov 26 08:50:51
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:40 
```

我想看到的输出：

按分钟：

```
Nov 26 08:50    2
Nov 26 08:51    5 
```

按小时：

```
Nov 26 08       7 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-27T10:07:03.790

这可以通过以下方式完成`uniq`：

```
$ uniq -w9 -c file       # by hour
      7 Nov 26 08:50:51
$ uniq -w12 -c file      # by minute
      2 Nov 26 08:50:51
      5 Nov 26 08:51:09 
```

`-w`只比较第一个`n`字符。

`-c`前缀行的出现次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:36:37.243

awk one-liner 让您一次按小时和分钟计算：

```
awk -F: '{h[$1]++;m[$1":"$2]++;}END{for(x in h)print x,h[x]; print "---"; for(x in m)print x,m[x]}' file 
```

测试

```
kent$  echo "Nov 26 08:50:51
Nov 26 08:50:51
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:09
Nov 26 08:51:40"|awk -F: '{h[$1]++;m[$1":"$2]++;}END{for(x in h)print x,h[x]; print "---"; for(x in m)print x,m[x]}' 
```

输出

```
Nov 26 08 7
---
Nov 26 08:50 2
Nov 26 08:51 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:22:59.690

按小时：

```
awk '{split($3,a,":");b[$1" "$2" "a[1]]++}END{for(i in b)print i,b[i]}' your_file 
```

测试如下：

```
> awk '{split($3,a,":");b[$1" "$2" "a[1]":"a[2]]++}END{for(i in b)print i,b[i]}' temp
Nov 26 08:50 2
Nov 26 08:51 5
> 
```

按分钟：

```
awk '{split($3,a,":");b[$1" "$2" "a[1]":"a[2]]++}END{for(i in b)print i,b[i]}' your_file 
```

测试如下：

```
> awk '{split($3,a,":");b[$1" "$2" "a[1]]++}END{for(i in b)print i,b[i]}' temp
Nov 26 08 7 
```

# c# - 关于在读/写访问数据库时获得最少锁定时间的最佳方法

> ID：13581639
> 
> 赞同：2
> 
> 时间：2012-11-27T10:01:05.277
> 
> 标签：c#, .net, ms-access

我有一个项目，我要将 MS Access DB 与 MySQL DB 同步，我想知道从/向 MS Access DB 读取/写入的最佳方法，因为它会在我执行此操作时锁定 DB。（会有其他应用程序读取/写入同一个 Access DB，所以我想尽量减少锁定它的时间）。

我选择的语言有区别吗？我最习惯使用 C# 和 .NET 编写应用程序。

有没有更经验丰富的建议/经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:23:08.823

将您的应用程序将专门用于查找目的的查询存储在 Access DB 中，并在查询属性中存储为 ReadOnly。然后让您的应用程序查询那些 ReadOnly 查询，这将防止不必要的锁定。

在应用程序中保持更新和插入 SQL 语句的简短和简单也会在一定程度上限制锁定时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:44:39.697

I dont think the language matters much - you can use C# or VB in a .NET environment. Are you planning a real-time synchronization or an off-hours (lets say daily) synchronization of the two databases?

One approach for the synchronization would be to do a data dump of the tables to a text file, load them into properly indexed tables and then find updated records (using data access queries) and find new records (with an outer join) and append them to the datastore.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T16:03:16.103

1.  如果您的表不包含主键。添加一个，我们将其命名为“Id”

2.  创建表“sync_log”以存储更改。

    *   “SQL”的一列适用于目标数据库。
    *   此“SQL”的执行状态的一列。（待定，已完成）
    *   此“SQL”的时间一列，然后您可以按原始顺序将 SQL 应用到目标数据库。
3.  为创建、更新、删除创建触发器

    **crate：** 创建一行时，您的触发器会将以下行插入另一个表“sync_log”

    “插入表 T 值（CA、CB、CC、CD）”

    **删除：** 创建一行时，您的触发器会将以下行插入另一个表“sync_log”

    “从 Id = 99 的表 T 中删除”

    **update:**类似，也是通过主键“Id”识别目标行

4.  让您的应用轮询表“sync_log”，将新的“待处理”SQL 应用到目标数据库，然后将“sync_log”中的 SQL 状态更新为“已完成”。

这是一种方式同步，另一种方式同步类似。

if (你正在使用 Microsoft Access 项目) then {http://office.microsoft.com/en-au/access-help/create-a-trigger-adp-HP003085415.aspx } else { Access 宏事件类似于触发器. [http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx) }

# android - WebView 加载过时的本地图像。如何更新？

> ID：13581645
> 
> 赞同：2
> 
> 时间：2012-11-27T10:01:23.403
> 
> 标签：android, caching, webview

我有一个`WebView`只显示来自外部 SD 卡的图像。这很好用，但是如果图像被新数据覆盖，`WebView`则不会更新图像。

这更令人好奇，因为它`WebView`是在活动方法中全新创建`onCreate`的。这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    Log.d(TAG, "Creating Viewer");
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();

    String imagePath = extras.getString("imgFile");

    shareImage(Uri.fromFile(new File(imagePath)));

    setContentView(R.layout.viewer_test);

    WebView viewer = (WebView) findViewById(R.id.imageViewer);
    viewer.getSettings().setAllowFileAccess(true);
    viewer.getSettings().setBuiltInZoomControls(false);
    viewer.getSettings().setLoadWithOverviewMode(true);
    viewer.getSettings().setUseWideViewPort(true);
    viewer.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
    String filename = "file://"+ imagePath;
    String html = "<html><head></head><body bgcolor=\"#000000\"><center><img src=\""+ filename + "\"></center></body></html>";
    viewer.loadDataWithBaseURL(null, html, "text/html","utf-8", null);
    viewer.reload();
} 
```

`imagePath`在将路径发送到此活动之前，保存的路径处的图像被另一个活动覆盖。然而，`WebView`仍然显示旧的图像数据。

如您所见，我已经尝试设置缓存模式并尝试手动重新加载`WebView`，但不幸的是没有运气。

我还检查了文件管理器，SD 卡上的图像被新数据覆盖。我试图多次覆盖该文件，但这也不起作用。不知何故，图像数据被缓存在某处或某处。我怎样才能避免这种情况并每次都加载新数据？

（显然，创建一个具有不同文件名的新文件可以正常工作，但我想替换旧文件。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:14:33.800

我对 Webview 不太熟悉。但在普通网站中，您可以使用查询字符串来模拟唯一地址，同时仍加载相同的图像。这通常用于 css 文件的网页上。

示例：[http](http://www.webpage.com/image.jpg?cachekey=23456456754) ://www.webpage.com/image.jpg? cachekey=23456456754 通过在每次加载图像时随机化缓存键，它被视为唯一图像并且不会从缓存中加载。

在文件名字符串的末尾放置一个随机的 int 或字符串

```
Random r = new Random();
int randInt = r.nextInt(8000000-1000000) + 1000000;
String query = "?cachekey=" + randInt ;
String html = "<html><head></head><body bgcolor=\"#000000\"><center><img src=\""+ filename + query "\"></center></body></html>"; 
```

我还没有测试过这个。但这是一个如何解决它的想法。

# android - 保存按钮以存储数据并稍后检索

> ID：13581652
> 
> 赞同：0
> 
> 时间：2012-11-27T10:01:39.643
> 
> 标签：android

我四处寻找这个问题的答案，我确定我已经阅读过它，但我不明白。希望有人可以提供帮助。

我想将“名称”“地址”“支持”（分别为文本、文本、数字）保存到文件中，然后稍后检索信息以供发送文本消息时使用（天、月、手机重启后）。

我找到了[openFileOutput()](http://developer.android.com/guide/topics/data/data-storage.html#pref) 但我不知道如何使用它。

我是编码新手，所以不太了解我找到的示例属于哪里。非常感谢任何帮助。

编辑----我想做的是：创建一个应用程序，它将成为最终用户的简单一键式应用程序。安装它，将 NAME、ADDRESS 和 SUPPORT（手机/手机号码）添加到“设置”页面。稍后，当您需要帮助时，最终用户会启动应用程序并点击按钮。该应用程序检索名称、地址并将它们以文本的形式发送到支持号码任何更多的帮助非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:26:49.463

如果你想选择偏好，这里是你可以做到的。

1) 声明要存储在 XML 文件中的首选项，例如`res/xml/preferences.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <EditTextPreference
        android:key="pref_name"
        android:title="Name"
        android:defaultValue="" />
    <EditTextPreference
        android:key="pref_address"
        android:title="Address"
        android:defaultValue="" />
    <EditTextPreference
        android:key="pref_support"
        android:title="Support"
        android:defaultValue="" />
</PreferenceScreen> 
```

2) 扩展`PreferenceActivity`以显示允许修改这些首选项的屏幕：

```
public class TestActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);  
    }
} 
```

3) 使用这些首选项发送电子邮件，例如：

```
private void sendEmail(String emailAddress) {
    String name = getPreferences(0).getString("pref_name", "");
    String address = getPreferences(0).getString("pref_address", "");
    String support = getPreferences(0).getString("pref_support", "");

    String mailBody = "Name: " + name + "\nAddress: " + address + "\nSupport: " + support;

    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("text/html");
    intent.putExtra(Intent.EXTRA_EMAIL, emailAddress);
    intent.putExtra(Intent.EXTRA_SUBJECT, "Subject");
    intent.putExtra(Intent.EXTRA_TEXT, mailBody);

    startActivity(Intent.createChooser(intent, "Send Email"));  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:04:36.503

如果值仍然很小，并且您不需要对它们进行结构化（例如，如果您有用户配置文件或其他东西），那么 Shared Preferences 应该就可以了。100 个整数仅相当于**400 个字节**，因此即使共享首选项存储在内存中，也没什么大不了的。

单击[此处](http://developer.android.com/reference/android/content/SharedPreferences.html)以获取有关共享首选项的完整信息

# jquery - 具有相同名称和方括号的 jQuery 输入

> ID：13581654
> 
> 赞同：3
> 
> 时间：2012-11-27T10:01:44.247
> 
> 标签：jquery, ajax

我有一个使用 jQuery 和 Ajax 发布表单数据的表单，但无法让它发送具有相同名称和方括号的输入值。

输入看起来像这样，并且将具有不同的值：

```
<input type="text" name="service[]" value="Value 1"> 
```

这是获取值的 var：

```
var service = $("input[name=service\\[\\]]") 
```

然后用于收集数据以通过 Ajax 发送的 var 如下所示：

```
var data = 'name=' + name.val() + '&email=' + email.val() + '&phone=' + phone.val() + '&service=' + service.val() + '&brief='  + encodeURIComponent(brief.val()); 
```

然后在用于发送邮件的 PHP 脚本中包含以下内容...

```
$service = $_POST['service'];
$body .= implode(' | ', $service); 
```

所以我的问题是，如何获取带有名称的输入值`name=service[]`并通过 Ajax 发送它们。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:06:30.470

不是您问题的确切答案，但有一种更简单的方法可以做到这一点。

将您的输入字段包装在一个表单中并创建一个`on-submit`事件。将此事件返回 false，因此它实际上并未提交。

这是诀窍。在返回事件 false 之前，请执行 ajax-request。给表单一个 id 并使用 seralize-method 创建一个 json-string。

```
[...]
data: $('#formIDGoesHere').serialize(),
[...] 
```

如果您将此作为 POST 变量发布到您的 PHP 文件中，则您的所有值都不可用，就像它们通常在 `$_POST`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:10:53.783

你为什么做这个？

```
var data = 'name=' + name.val() + '&email=' + email.val() + '&phone=' 
           + phone.val() + '&service=' + service.val() + '&brief=' 
           + encodeURIComponent(brief.val()); 
```

您不应从未转义的值构建字符串。HTML 如此，URL 编码的表单数据、SQL 和 JSON 以及几乎所有其他以字符串形式传输结构化数据的方式都是如此。

显然你正在使用`encodeURIComponent()`，但为什么只有一次？

有[`.serialize()`](http://api.jquery.com/serialize/)一个负责所有细节的。使用它而不是构建您自己的 URL 字符串。

```
alert($('form').serialize()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T09:32:35.687

您可能想阅读**[此](http://benalman.com/news/2009/12/jquery-14-param-demystified/)**内容并尝试以下操作：

```
$('#theFormID').serialize().replace('%5B%5D', '[]') 
```

或这个

```
$.param(obj, true);
$.post(url,serializedObj,function(){}); 
```

`true`中的表示`$.param`应使用序列化对象的传统方法。传统方法在遇到相同的参数名时不使用方括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:11:47.353

你的意思是这样的：

```
var values = $("input[name='service\\[\\]']")
              .map(function(){return $(this).val();}).get();

var joined = values.join("|"); //so it shows val1|val2| val3 .. and pass to server 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:12:49.990

如果您有多个名称为 service[] 的输入，您可以检索如下输入

```
var service = $("input[name=service\\[\\]]"); 
```

但是，如果您现在有多个输入，则服务变量现在是一个数组，您必须遍历服务数组中的每个项目并检索诸如

```
for(var i=0;i<service.length;i++){
  data += service[i].val()+",";
} 
```

# unity-container - 在 Unity 中需要处理？

> ID：13581655
> 
> 赞同：29
> 
> 时间：2012-11-27T10:01:45.617
> 
> 标签：unity-container, dispose

可能是 Unity 初学者的一个问题：在使用 Unity 时，您是否还需要在已注入的对象上实现 Dispose 方法？或者甚至不需要（所以，由 Unity 自动完成）？这是在 Web 应用程序的上下文中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-27T10:15:27.780

实施`IDisposable`与 Unity 无关。当您的类型使用非托管资源（如文件）时，您应该实现该接口，这些资源不能被 CLR 垃圾收集。

Unity 可以[管理](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx)您的类型和实例的生命周期。对于这种情况，Unity 提供了不同类型的 LifeTimeManager 来控制实例的生命周期。

Unity 仅在您使用或`IDisposable`注册它们时尊重接口。这意味着当您处置 Unity-Container 时，它还将调用所有实现上述 LifetimeManager 注册的接口的实例。`ContainerControlledLifetimeManager``HierarchicalLifetimeManager``Dispose``IDisposable`

当您使用 注册实现`IDisposable`接口的类型时`TransientLifetimeManager`（您在容器上调用 Resolve 的每种类型都会获得一个新实例），由您来调用`Dispose`该实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-18T18:17:37.720

扩展[Jehof 所说](https://stackoverflow.com/a/13581925/80274)的内容，如果它支持`ContainerControlledLifetimeManager`，`HierarchicalLifetimeManager`两者都会调用该类。`.Dispose()`然而，一个有趣的事实是只有具体的实现需要实现`IDisposable`，而你正在映射的接口不需要。这是一个简单的示例程序来演示。

```
using System;
using System.Threading;
using Microsoft.Practices.Unity;

namespace ConsoleApplication
{
    internal class Program
    {
        private interface IFoo
        {
        }

        private class Foo : IFoo, IDisposable
        {
            public Foo()
            {
                Console.WriteLine("Foo Created");
            }

            public void Dispose()
            {
                Console.WriteLine("Foo.Dispose() called");
            }
        }

        private class Bar
        {
            public Bar(IFoo foo)
            {
            }
        }

        private static void Main()
        {
            LifetimeManager manager;

            Console.WriteLine("Choose a lifetime manager to test:");
            Console.WriteLine(" 1: ContainerControlledLifetimeManager");
            Console.WriteLine(" 2: ExternallyControlledLifetimeManager");
            Console.WriteLine(" 3: HierarchicalLifetimeManager");
            Console.WriteLine(" 4: PerThreadLifetimeManager");
            Console.WriteLine(" 5: TransientLifetimeManager");

            int choice = int.Parse(Console.ReadLine());
            switch (choice)
            {
                case 1:
                    manager = new ContainerControlledLifetimeManager();
                    break;
                case 2:
                    manager = new ExternallyControlledLifetimeManager();
                    break;
                case 3:
                    manager = new HierarchicalLifetimeManager();
                    break;
                case 4:
                    manager = new PerThreadLifetimeManager();
                    break;
                case 5:
                    manager = new TransientLifetimeManager();
                    break;
                default:
                    return;
            }

            Console.WriteLine(manager.ToString());

            //Use a thread to test PerThreadLifetimeManager's Dispose actions.
            var thread = new Thread(() => PerformTest(manager));
            thread.Start();
            thread.Join();

            Console.WriteLine("Press enter to exit...");
            Console.ReadLine();
        }

        private static void PerformTest(LifetimeManager manager)
        {
            Console.WriteLine("Pre container creation");
            using (IUnityContainer container = new UnityContainer())
            {
                Console.WriteLine("Pre type regrestration");
                container.RegisterType<IFoo, Foo>(manager);

                Console.WriteLine("Pre bar1 resolve");
                var bar1 = container.Resolve<Bar>();

                Console.WriteLine("Pre bar2 resolve");
                var bar2 = container.Resolve<Bar>();

                Console.WriteLine("Leaving container scope.");
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T14:12:54.763

另一个`ContainerControlledTransientManager`尊重的生命周期管理器于 2018 年 1 月 11 日`IDisposable`添加到[添加容器“拥有”瞬态生命周期管理器 ContainerControlledTransientManager #37](https://github.com/unitycontainer/abstractions/issues/37)`Unity`

> 所以，`ContainerControlledTransientManager`是必需的。这个生命周期管理器是一样的，`TransientLifetimeManager`除非对象实现`IDisposable`它会保持对对象的强引用并在容器被释放时释放它。如果创建的对象不是一次性的，容器不会维护任何对象引用，因此当该对象被释放时，GC 将立即收集它。

# sql - 在 sqlloader 中出现以下错误

> ID：13581663
> 
> 赞同：0
> 
> 时间：2012-11-27T10:02:14.823
> 
> 标签：sql, oracle, sql-loader

> SQL*Loader-500：无法打开文件（C:\sqlloaderpra\tmp.txt） SQL*Loader-553：找不到文件 SQL*Loader-509：系统错误：系统找不到指定的文件。SQL*Loader-2026：加载被中止，因为 SQL 加载器无法继续。

我的 ctrl 文件在哪里

```
load data
infile 'C:\sqlloaderpra\tmp.txt'
into table tmpload
append
fields terminated by ","
trailing nullcols
(
a Integer external,
b char nullif b=blanks) 
```

文件在那里，但我收到此错误。

# android - 如何在我的 Facebook 上分享我的应用页面？

> ID：13581666
> 
> 赞同：2
> 
> 时间：2012-11-27T10:02:21.673
> 
> 标签：android

我可以通过我的应用程序将我的文本发布到 facebook 帐户（facebook 集成 - 使用 facebook sdk）。

但我想将我的整个应用页面发布/分享到我的 facebook 帐户，这意味着我的应用中有绘画设计，所以我想将我设计的图像分享到 facebook。

在这里我粘贴我的疑问的截图，请检查，![在此处输入图像描述](../Images/7c68567b1d364daad8823793afecc59d.png)

但是我的实际过程是，当我单击 facebook 图标时，将打开**Post to Wall**页面，我可以键入仅在第二张图像中喜欢的文本，![在此处输入图像描述](../Images/c62d631823e10ae55d21d4141c76ab37.png)单击上面页面中的 Share 按钮后，我得到输出内容我的 facebook 帐户如图所示， ![在此处输入图像描述](../Images/7f317f94ea8b931449f4a4fcc3756aa3.png) 但我想将整个页面与图像分享到我的 facebook 帐户，现在我希望你理解我的问题。给我解决方案。谢谢

# c# - ListView 在运行时不显示更新

> ID：13581670
> 
> 赞同：0
> 
> 时间：2012-11-27T10:02:28.290
> 
> 标签：c#, winforms, visual-studio-2010, linq, linq-to-sql

我在 C# Windows 窗体应用程序中使用 Linq to SQL 进行数据库操作。当用户对数据库进行任何更新时，我正在尝试更新 ListView 数据。我已经尝试过获取更新的方法`listView.BeginUpdate()`，但 ListView 更新的数据现在显示在 ListView 中。当我重新启动应用程序时，它会显示该数据。我尝试调试，数据库在我调用之前得到更新，但 Linq 查询有较旧的数据。为什么 Linq 查询显示旧数据？这是代码。`listView.Refresh()``listView.EndUpdate()``refreshListView()`

```
studentViewLv.Clear();
studentViewLv.BeginUpdate();
var query = from c in context.StuBasics select c;
studentViewLv.Columns.Add("Ser No", 50);
studentViewLv.Columns.Add("Student Name ", 200);
studentViewLv.Columns.Add("Father's Name", 150);
studentViewLv.Columns.Add("Registration No", 150);
studentViewLv.Columns.Add("Class", 100);
studentViewLv.FullRowSelect = true;
int i = 1;
foreach (var c in query)
{
    string[] stu = new string[] { i.ToString(), c.firstName + " " + c.lastName, c.fatherName, c.registrationNo, c.currentClass };
    ListViewItem item = new ListViewItem(stu);
    studentViewLv.Items.Add(item);
    i++;
}
studentViewLv.Refresh();
studentViewLv.Update();
studentViewLv.EndUpdate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:45:31.567

从评论中复制以澄清答案：

调用方法时是否`context.StuBasics`从数据库更新？您需要确保此变量中的数据已更新。

如果`context.StuBasics`仅在加载应用程序时填充，那么问题就在这里。每次使用 DB 执行操作时，您都需要确保调用它的更新。由于您的示例中的 LINQ 非常好，并且 alays 从`context.StuBasics`

# java - 用于存储大量数据的最佳集合

> ID：13581671
> 
> 赞同：1
> 
> 时间：2012-11-27T10:02:28.030
> 
> 标签：java, collections

我需要在集合中存储大量字符串。我不需要地图，因为我只有钥匙。数据大小可能达到 400 万或更大。目前我正在使用 LinkedHashSet。linkedhashSet 的性能很好，但它使用了大量的内存。我尝试了 LinkedList，它花费了太多时间。

我的要求是我需要维护插入顺序。检查列表/集合中的每个项目是否存在，然后再抛出错误（如果存在）。

我也尝试使用逗号分隔的字符串，但它也没有带来太大的改进。

任何人都可以提出更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:10:44.327

TreeSet 非常适合维护秩序。还要确保您使用适当的搜索算法来检查您的条目的集合，这可以大大提高您的性能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:11:29.897

您是否尝试实现 TRIE？它维护按字母顺序排序的单词，并且占用更少的内存，因为您不为每个字符串维护单独的对象。相反，您只在一个节点中存储一个字符。请参阅[https://forums.oracle.com/forums/thread.jspa?messageID=8787521](https://forums.oracle.com/forums/thread.jspa?messageID=8787521) 和[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

# php - 域模型 MVC 中的本机数据库查询

> ID：13581673
> 
> 赞同：3
> 
> 时间：2012-11-27T10:02:33.540
> 
> 标签：php, model-view-controller, domain-driven-design

我构建了一个 MVC 应用程序，其模型层包含实体、数据映射器和服务类。到现在为止还挺好。但是现在我有一个控制器需要显示一个包含来自多个数据库表的数据的报告，这些数据与我的模型中的任何实体都没有关系。该报告是根据包含连接 SUM/AVG-selects 的高级 MySQL 查询构建的。我想要的只是一个数据数组，所以要显示在视图中。

1.  我可以在我的服务层中混合方法，一些返回实体（“getById（）”）和一些只从我的数据库查询返回数据数组（“getAdvancedReport（）”）？

2.  可以将 db-queries 放在服务层吗？如果没有，他们应该去哪里？数据映射器感觉不对，因为它的工作只是将我的实体映射到数据库，而不是检索自定义数据。

也许只是“编码官僚主义”，但我需要正确地做到这一点。

除了域模型的简单 CRUD 示例之外，在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:51:18.790

> [不是一个真正的答案..更像是一瓶啤酒]

您似乎对拥有数据映射器的意义甚至对一般的域对象感到有些困惑。

数据映射器负责存储（有时是 SQL 数据库）和域对象之间的信息交换。如果你有一点标准化的数据库结构，数据库实体和域对象将不会 1:1 映射。映射器是为特定的域对象制作的，而不是为数据库表制作的。单个域对象甚至可以有多个映射器（例如：一个在 DB 中存储数据的映射器，一个在会话中存储数据的映射器）。

如果您的`Report`对象没有域逻辑，您甚至可以使用活动记录。实用的方法是在潜在的域对象**只有**CRUD 而没有域逻辑时使用它们。如果有一些计算，请坚持使用域对象 + 数据映射器对。

服务层用于应用逻辑，而不是存储逻辑。里面不应该有SQL。服务应该主要管理未确定的域对象组合和映射器之间的交互。邮寄服务和类似结构除外。

此外，通常在线报告是动态的。您可以对数据进行排序、过滤和其他操作。您最终会得到一项服务，该服务可以操纵`Report`对象、对其应用过滤器或从所述对象中提取数据。所有这些修补都是“应用程序逻辑”。

> [就是这样......我的啤酒用完了]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:59:25.797

> 我可以在我的服务层中混合方法，一些返回实体（“getById（）”）和一些只从我的数据库查询返回数据数组（“getAdvancedReport（）”）？

是的，但我会更正你的句子：*一些返回实体，一些只返回**数据数组***

=> 服务的用户不关心实体/数据来自哪里。所以，是的，您的服务可以返回实体*和*原始数据（原始类型数组）。

> 可以将 db-queries 放在服务层吗？

不

> 如果没有，他们应该去哪里？

在存储库/DAO 中。可以在存储库中执行本机查询。并且这里没有使用 Data Mappers，只是因为我们不需要映射实体。

**总结一下：**

服务->getMyData() > 存储库->getMyData() > 数据库查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:10:16.743

> 可以将 db-queries 放在服务层吗？如果没有，他们应该去哪里？

数据库查询应始终放在**data-mapper**中，因为“服务”不应该知道数据来自哪里。

# php - 如何在 Symfony2 的子进程中运行 php 函数？

> ID：13581674
> 
> 赞同：1
> 
> 时间：2012-11-27T10:02:34.760
> 
> 标签：php, symfony, process, subprocess, symfony-process

我想在后台并行运行一些功能。

在 Symfony2 甚至 php 中是否有一种很好的方法可以做到这一点？

还是只有`Symfony\Component\Process\Process`?

我可以将此流程与功能一起使用吗？我需要实际的上下文（登录用户和一些会话数据），所以不可能将函数导出到外部 php 文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:31:10.590

Symfony2 Process component allows you to run some shell command or execute php-script in a different process.

To run exact function in a thread try look at PHP [Thread class](http://www.php.net/manual/en/class.thread.php)

# android - 每当在 Sqlite 数据库中更新数据时如何更新 ListFragment

> ID：13581679
> 
> 赞同：0
> 
> 时间：2012-11-27T10:02:41.683
> 
> 标签：android, android-fragments

每当在 Sqlite 数据库中更新数据时如何更新 ListFragment。我的以下片段代码正常工作，如何更新此列表片段？

```
public class MyMasterFragment extends SherlockListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /*
        Runnable mRunnable=new Runnable() {
               public void run() {
                     Log.i("mylog", "refreshing...");
                     ListAdapter myListAdapter = getMyListAdapter();
                     setListAdapter(myListAdapter);
                     Log.i("mylog", "list Updated");
                     mHandler.postDelayed( this, 60*1000 );
                   }
        };

        mHandler.postDelayed( mRunnable, 0);
        */

        ListAdapter myListAdapter = getMyListAdapter();
        setListAdapter(myListAdapter);

    }

    private ListAdapter getMyListAdapter() {
        DBHelper dbHelper=new DBHelper(getActivity().getApplicationContext());
        SQLiteDatabase myDB = dbHelper.getWritableDatabase();

        ListAdapter adapter = null ;
            String TIME_SORT_ORDER=DBConstants.TIME+" DESC";
            String[] mycolumns={DBConstants.SNO,DBConstants.MYSYMBOL,DBConstants.VALUE1,DBConstants.DATE,DBConstants.TIME,DBConstants.VALUE2,DBConstants.VALUE3,DBConstants.VALUE4,DBConstants.VALUE5,DBConstants.VALUE6};
            Cursor c1 = myDB.query(DBConstants.LATEST_MY_DATA_TABLE,mycolumns, null, null, null, null, TIME_SORT_ORDER);

            if(c1.getCount()>0)
            {
                adapter=new SimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.live_list_item, c1, new String[] {DBConstants.MYSYMBOL,DBConstants.VALUE1,DBConstants.VALUE2,DBConstants.DATE,DBConstants.TIME}, new int[] {R.id.mysymbol, R.id.value1,R.id.value2,R.id.ldate,R.id.ltime});
            }
        myDB.close();
        dbHelper.close();
        return adapter;
    }
} 
```

我还研究了 Android 文档中的 Loader Manager。

1.  如果我使用加载器管理器，它会在我的数据库中更新数据时自动更新我的片段列表？
2.  我可以使用支持库在 Pre-honeycomb versionz 上使用 Loader 管理器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:20:33.327

> 如果我使用加载器管理器，它会在我的数据库中更新数据时自动更新我的片段列表？

不，您必须收听一些内部事件或外部广播才能重新运行负载。

*   服务：与服务绑定时，您共享一个接口 [`IBinder`](http://developer.android.com/reference/android/os/IBinder.html) 进行通信。使用它，服务可以通知您的活动它已经更新了数据库。

> 我可以使用支持库在 Pre-honeycomb versionz 上使用 Loader 管理器吗？

是的你可以。

# c++ - c ++中不同指针语法之间的语义差异？

> ID：13581683
> 
> 赞同：3
> 
> 时间：2012-11-27T10:02:54.140
> 
> 标签：c++, pointers, syntax, semantics

在 C++ 中，这种形式在`int *p`语义上与这种形式不同`int* p`吗？或者这显然是风格问题？

现在这个问题可能很愚蠢，但我记得我曾在某处看到**两种**样式同时使用，这让我相信这些形式之间可能存在不同的语义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:04:13.770

他们是一样的。

有时这很棘手，因为

```
int* a, b; 
```

定义一个指针和一个整数。这种风格使它更清晰：

```
int *a, b; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T10:05:13.007

它具有相同的语义含义。如果您使用`const`关键字，请注意以下警告：

`int * conts p;`- 指向 int 的 const 指针与

`int const * p;`- 指向 const int 的非 const 指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T10:12:21.420

正如其他人所说，它们是相同的。

声明一个指针和一个整数的事实`int* a, b;`是疣的一个方面，它也以其他方式表现出来。例如：

```
int* a, f(double), c[42]; 
```

声明了一个指向`int`被调用的指针，一个接受并返回被调用`a`的函数，以及一个由 42 个被调用的数组。这是因为所有这些“装饰”( , , ) 构成了称为*声明*符的 C++ 语法的一部分，它与单个名称相关联，而不是与整个语句相关联（在语法中称为*声明*）。`double``int``f``int``c``*``()``[]`

# sharepoint-2010 - 我需要完整的 caml 查询参考

> ID：13581687
> 
> 赞同：1
> 
> 时间：2012-11-27T10:02:56.943
> 
> 标签：sharepoint-2010, caml

我正在使用 sharepoint 2010 并寻找协作应用程序标记语言 (CAML) 结构。

[我在http://msdn.microsoft.com/en-us/library/ms467521.aspx](http://msdn.microsoft.com/en-us/library/ms467521.aspx)上搜索了它，但它似乎不是一个完整的 caml 参考，因为没有属性说明。

我在哪里可以找到它或 xsd 的完整参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T14:16:09.437

`CamlQuery.xsd`从`java-sharepoint-library`Google 代码尝试。

[https://code.google.com/p/java-sharepoint-library/source/browse/trunk/xsd/CamlQuery.xsd?r=35](https://code.google.com/p/java-sharepoint-library/source/browse/trunk/xsd/CamlQuery.xsd?r=35)

# ios - 更新供应分布配置文件

> ID：13581688
> 
> 赞同：0
> 
> 时间：2012-11-27T10:03:00.033
> 
> 标签：ios, certificate, ios-provisioning

我的配置分发配置文件今天过期了，所以当我在 Xcode 管理器中按下更新按钮时，我会看到带有*"No value was provided for the parameter 'deviceIds'" 的*警报窗口。

如果我去 iOS Provisioning Portal 并尝试在那里更新，那么当我按下更新按钮时——我切换到了开发选项卡。如果我回到配置选项卡——我仍然看到更新按钮，没有任何改变。

![在此处输入图像描述](../Images/72647a2752f936044d3cd6936541e4d4.png)

更新：今天我看到了

![在此处输入图像描述](../Images/aec1d686e53236029d5cba502c0af6f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:11:49.337

再次检查下配置>分发您有下载和编辑选项。如果仍然没有更新意味着检查您的电子邮件苹果向您发送更新信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:13:51.997

问题是分发证书也过期了，我偶尔会发现。在我提交了新的配置文件后，我能够修改并获取新的配置文件。但是，我仍然无法通过 Xcode 更新它。

# java - 在 Java 中使用 AES 单独解密时出现 BadPaddingException

> ID：13581694
> 
> 赞同：1
> 
> 时间：2012-11-27T10:03:21.780
> 
> 标签：java, encryption, aes

我正在使用 AES 进行加密/解密。我正在尝试加密文本，然后稍后单独解密。

我的 AESEncrypt.java 是：

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;
import java.security.spec.KeySpec;
import org.apache.commons.codec.binary.Base64;

public class AESEncrypt {
    private static final byte[] SALT = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
    private static final int ITERATION_COUNT = 65536;
    private static final int KEY_LENGTH = 256;
    private Cipher eCipher;
    private Cipher dCipher;

    AESEncrypt(String passPhrase) throws Exception {
        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), SALT, ITERATION_COUNT, KEY_LENGTH);
        SecretKey secretKeyTemp = secretKeyFactory.generateSecret(keySpec);
        SecretKey secretKey = new SecretKeySpec(secretKeyTemp.getEncoded(), "AES");

        eCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        eCipher.init(Cipher.ENCRYPT_MODE, secretKey);

        dCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        byte[] iv = eCipher.getParameters().getParameterSpec(IvParameterSpec.class).getIV();
        dCipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));
    }

    public String encrypt(String encrypt) throws Exception {
        byte[] bytes = encrypt.getBytes("UTF8");
        byte[] encrypted = encrypt(bytes);
        return new String(Base64.encodeBase64(encrypted));
    }

    public byte[] encrypt(byte[] plain) throws Exception {
        return eCipher.doFinal(plain);
    }

    public static void main(String[] args) throws Exception {
        String passphrase = "PASSWORDPASSPHRASE";
        String password = "password123";    
        AESEncrypt aesEncrypt = new AESEncrypt(passphrase); 
        String encryptedPassword = aesEncrypt.encrypt(password);
        System.out.println("encryptedPassword = " + encryptedPassword);
    }
} 
```

运行上面的AESEncrypt代码后，结果是：

```
encryptedPassword = aUkbhjFebZ9VjJ44yptlBA== 
```

所以，现在在我的 AESDecrypt.java 中，我使用该 encryptedPassword 字符串进行解密：

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;
import java.security.spec.KeySpec;
import org.apache.commons.codec.binary.Base64;

public class AESDecrypt {
    private static final byte[] SALT = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
    private static final int ITERATION_COUNT = 65536;
    private static final int KEY_LENGTH = 256;
    private Cipher eCipher;
    private Cipher dCipher;

    AESDecrypt(String passPhrase) throws Exception {
        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), SALT, ITERATION_COUNT, KEY_LENGTH);
        SecretKey secretKeyTemp = secretKeyFactory.generateSecret(keySpec);
        SecretKey secretKey = new SecretKeySpec(secretKeyTemp.getEncoded(), "AES");

        eCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        eCipher.init(Cipher.ENCRYPT_MODE, secretKey);

        dCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        byte[] iv = eCipher.getParameters().getParameterSpec(IvParameterSpec.class).getIV();
        dCipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));
    }

    public String decrypt(String encrypt) throws Exception {
        byte[] bytes = Base64.decodeBase64(encrypt);
        byte[] decrypted = decrypt(bytes);
        return new String(decrypted, "UTF8");
    }

    public byte[] decrypt(byte[] encrypt) throws Exception {
        return dCipher.doFinal(encrypt);
    }

    public static void main(String[] args) throws Exception {
        String passphrase = "PASSWORDPASSPHRASE";
        String encryptedPassword = "aUkbhjFebZ9VjJ44yptlBA==";        
        AESDecrypt aesDecrypt = new AESDecrypt(passphrase);
        String decryptedPassword = aesDecrypt.decrypt(encryptedPassword);
        System.out.println("decryptedPasswpord = " + decryptedPassword);
    }
} 
```

运行 AESDecrypt 代码时，返回错误：

```
Exception in thread "main" javax.crypto.BadPaddingException: Given final block not properly padded
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
    at javax.crypto.Cipher.doFinal(DashoA13*..)
    at AESDecrypt.decrypt(AESDecrypt.java:41)
    at AESDecrypt.decrypt(AESDecrypt.java:35)
    at AESDecrypt.main(AESDecrypt.java:50) 
```

为什么我会收到错误消息？有人可以帮忙和建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:08:49.970

使用 CBC（密码块链接）模式时，您必须提取 InitializationVector 并附加到您的加密消息中，或者找到另一种方法将相同的 IV 传递到解密代码中。

CBC 模式比 ECB 更安全，ECB 不使用 IV。CBC 使用随机 IV 来确保两次加密的相同数据不会产生相同的密文。

所以你的代码应该是这样的：

```
import java.security.spec.KeySpec;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;

public class AESEncrypt {
    private static final byte[] SALT = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
    private static final int ITERATION_COUNT = 65536;
    private static final int KEY_LENGTH = 128;
    private Cipher eCipher;
    private Cipher dCipher;
    private byte[] iv;

    AESEncrypt(String passPhrase) throws Exception {
        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), SALT, ITERATION_COUNT, KEY_LENGTH);
        SecretKey secretKeyTemp = secretKeyFactory.generateSecret(keySpec);
        SecretKey secretKey = new SecretKeySpec(secretKeyTemp.getEncoded(), "AES");

        eCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        eCipher.init(Cipher.ENCRYPT_MODE, secretKey);

        dCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        iv = eCipher.getParameters().getParameterSpec(IvParameterSpec.class).getIV();
        dCipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));
    }

    public String encrypt(String encrypt) throws Exception {
        byte[] bytes = encrypt.getBytes("UTF8");
        byte[] encrypted = encrypt(bytes);
        byte[] cipherText = new byte[encrypted.length + iv.length];
        System.arraycopy(iv, 0, cipherText, 0, iv.length);
        System.arraycopy(encrypted, 0, cipherText, iv.length, encrypted.length);
        return new String(Base64.encodeBase64(cipherText));
    }

    public byte[] encrypt(byte[] plain) throws Exception {
        return eCipher.doFinal(plain);
    }

    public static void main(String[] args) throws Exception {
        String passphrase = "PASSWORDPASSPHRASE";
        String password = "password123";    
        AESEncrypt aesEncrypt = new AESEncrypt(passphrase); 
        String encryptedPassword = aesEncrypt.encrypt(password);
        System.out.println("encryptedPassword = " + encryptedPassword);
    }
} 
```

和：

```
 import java.security.spec.KeySpec;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;

public class AESDecrypt {
    private static final byte[] SALT = {(byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35, (byte) 0xE3, (byte) 0x03};
    private static final int ITERATION_COUNT = 65536;
    private static final int KEY_LENGTH = 128;
    private static final int IV_LENGTH = 16;
    private Cipher eCipher;
    private Cipher dCipher;
    private byte[] encrypt;

    AESDecrypt(String passPhrase, String encryptedString) throws Exception {
        SecretKeyFactory secretKeyFactory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), SALT, ITERATION_COUNT, KEY_LENGTH);
        SecretKey secretKeyTemp = secretKeyFactory.generateSecret(keySpec);
        SecretKey secretKey = new SecretKeySpec(secretKeyTemp.getEncoded(), "AES");

        encrypt = Base64.decodeBase64(encryptedString);

        eCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        eCipher.init(Cipher.ENCRYPT_MODE, secretKey);

        byte[] iv = extractIV();
        dCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        dCipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));
    }

    private byte[] extractIV() {
        byte[] iv = new byte[IV_LENGTH];
        System.arraycopy(encrypt, 0, iv, 0, iv.length);
        return iv;
    }

    public String decrypt() throws Exception {
        byte[] bytes = extractCipherText();

        byte[] decrypted = decrypt(bytes);
        return new String(decrypted, "UTF8");
    }

    private byte[] extractCipherText() {
        byte[] ciphertext = new byte[encrypt.length - IV_LENGTH];
        System.arraycopy(encrypt, 16, ciphertext, 0, ciphertext.length);
        return ciphertext;
    }

    public byte[] decrypt(byte[] encrypt) throws Exception {
        return dCipher.doFinal(encrypt);
    }

    public static void main(String[] args) throws Exception {
        String passphrase = "PASSWORDPASSPHRASE";
        String encryptedPassword = "LiN1KmaB2Pl7cooe3qvuImbAKXsVJt5oxt+ajuVZ5n4=";        
        AESDecrypt aesDecrypt = new AESDecrypt(passphrase, encryptedPassword);
        String decryptedPassword = aesDecrypt.decrypt();
        System.out.println("decryptedPasswpord = " + decryptedPassword);
    }
} 
```

# matlab - MATLAB：将年长的可变分辨率时间向量划分为月

> ID：13581695
> 
> 赞同：1
> 
> 时间：2012-11-27T10:03:23.620
> 
> 标签：matlab, octave

我有以下格式的时间序列：

```
time       data value
733408.33  x1
733409.21  x2
733409.56  x3
etc.. 
```

数据运行时间约为 2008 年 1 月 1 日至 2010 年 12 月 31 日。我想将数据分成每月长度的列。

例如，第一列（2008 年 1 月）将包含相应的数据值：

`(first 01-Jan-2008 data value):(data value immediately preceding the first 01-Feb-2008 value)`

然后是第二列（2008 年 2 月）：

`(first 01-Feb-2008 data value):(data value immediately preceding the first 01-Mar-2008 value)`

等等...

我一直在考虑但不知道如何组合的一些想法：

1.  将所有序列时间数字（例如 733408.33）转换为字符串`datestr`
2.  用于`strmatch('01-January-2008',DatesInChars)`查找对应于 2008 年 1 月 1 日的行的索引
3.  棘手的部分（？）`TransformedData(:,i) = OriginalData(start:end)`：？`end = strmatch(1) - 1`和`start = 1`。然后`start`在循环结束时更改为`strmatch(1)`，然后再次运行第 2 步以找到下一个“起始索引”并更改`end`为“新” `strmatch(1)-1`？

优化速度会很好；我将把它应用到采样约 200 万次的数据上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:36:09.287

我将使用[`histc`](http://www.mathworks.fr/fr/help/matlab/ref/histc.html)一个列表作为第二个参数的月份最后几天的列表（注意：`histc`与两个返回函数一起使用）。`datenum`可以使用或轻松创建边缘列表`datevec`。

这样你就不需要对字符串进行操作，而且你应该很快。

编辑：导致简单数据结构的示例（包括来自@Rody的一些代码）：

```
% Generate some test times/data

tstart = datenum('01-Jan-2008');
tend   = datenum('31-Dec-2010');

tspan = tstart : tend;
tspan = tspan(:) + randn(size(tspan(:))); % add some noise so it's non-uniform

data = randn(size(tspan));

% Generate list of edge
edge = [];
for y = 2008:2010
    for m = 1:12
        edge = [edge datenum(y, m, 1)];
    end
end

% Histogram
[number, bin] = histc(tspan, edge);

% Setup of result
result = {};

for n = 1:length(edge)
    result{n}  = [tspan(bin == n), data(bin == n)];    
end

% Test
% 04-Aug-2008 17:25:20
datestr(result{8}(4,1))
tspan(data ==  result{8}(4,2))
datestr(tspan(data ==  result{8}(4,2))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:31:36.187

假设您已经对非等距日期数字进行了排序，那么这里的方法是将相关数据放在一个*单元格数组*中，以便每个条目对应下一个月，并且可以容纳不同数量的元素。

以下是如何非常有效地做到这一点：

```
% generate some test times/data

tstart = datenum('01-Jan-2008');
tend   = datenum('31-Dec-2010');

tspan = tstart : tend;
tspan = tspan(:) + randn(size(tspan(:))); % add some noise so it's non-uniform

data = randn(size(tspan));

% find month numbers
[~,M] = datevec(tspan);

% find indices where the month changes
inds = find(diff([0; M]));

% extract data in columns
sz = numel(inds)-1;
cols = cell(sz,1);
for ii = 1:sz-1
    cols{ii} = data( inds(ii) : inds(ii+1)-1 );
end 
```

请注意，可能很难确定哪个条目`cols`属于哪个月、哪个年，因此以下是如何以更易于阅读的方式进行操作：

```
% change this line: 
[y,M] = datevec(tspan);

% and change these lines: 
cols = cell(sz,3);
for ii = 1:sz-1
    cols{ii,1} = data( inds(ii) : inds(ii+1)-1 );

    % also store the year and month 
    cols{ii,2} = y(inds(ii)); 
    cols{ii,3} = M(inds(ii)); 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:46:22.203

我假设你有`timeVals`一个 Nx1 双向量来保存每个数据的时间值。假设`data`也是一个 Nx1 数组。我还假设`data`并按`timeVals`时间排序：也就是说，您拥有的样品是根据它们被采集的时间排序的。

怎么样：

```
subs = @(x,i) x(:,i);
months = subs( datevec(timeVals), 2 ); % extract the month of year as a number from the time
r = find( months ~= [months(2:end), months(end)+1] );
monthOfCell = months( r );
r( 2:end ) = r( 2:end ) - r( 1:end-1 );
dataByMonth = mat2cell( data', r ); % might need to transpose data or r here...
timeByMonth = mat2cell( timeVal', r ); 
```

运行此代码后，您将拥有一个元胞数组，`dataByMonth`每个元胞都包含与特定月份相关的所有数据。对应的单元格`timeByMonth`保存了各个月份数据的采样时间。最后，`monthOfCell`告诉您每个单元格的月份编号（1-12）是多少。

# c# - 如何通知多个视图模型变量更改？

> ID：13581696
> 
> 赞同：0
> 
> 时间：2012-11-27T10:03:23.470
> 
> 标签：c#, wpf, mvvm, viewmodel

我的一个观点包含一个下拉菜单。当做出选择时，它的视图模型和程序中的所有其他视图模型必须知道更改，以便他们可以更新他们的视图。目前，每个视图模型都包含自己的选择副本，当它被更改时，我必须手动更新它们（我每个都有一个公共 Refresh(int newVal) ）。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:05:33.570

您可以使用事件聚合器并通过它发布可以由每个视图模型处理的事件（可能在某种基类中？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:07:09.077

使用（聚合）事件。

加载视图时订阅事件，卸载视图时取消订阅，并确保在加载视图模型时初始化视图模型中的变量。然后在选择更改时发布事件（将新数据作为参数传递）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:18:40.833

一种可能的方法可能是使用事件聚合器。聚合器用于在发布者和接收者之间分派消息。

需要**发送**消息的对象在 中注册消息类型`EventAggregator`，需要**接收**的对象也在 中订阅它们`EventAggregator`。

有很多方法可以实现这一点，我建议使用您选择的任何 MVVM 框架。最常见的框架提供了经过时间验证的实现。

一个例子是[Caliburn Micro](http://caliburnmicro.codeplex.com/)。CM 框架已经`EventAgregator`为此提供了类。

请参阅此处的示例：[使用 Caliburn.Micro 的 EventAggregator 进行消息传递简介](http://joshearl.wordpress.com/2011/03/31/introduction-to-messaging-with-caliburn-micros-eventaggregator/)。

# xaml - 如何使用 XAML 将数据异步数据绑定到我的文本块

> ID：13581697
> 
> 赞同：1
> 
> 时间：2012-11-27T10:03:29.783
> 
> 标签：xaml, data-binding, asynchronous

我无法将异步数据绑定到文本块。

当我使用 F11 逐步完成我的代码时，它可以工作。但是当我只是运行我的应用程序时，它会抛出一个错误说：

```
Value cannot be null. 
```

看起来代码运行得太快了。

这是我的代码：

```
settings.GetSettings();
tbNamePlayer1.Text = settings.player1;
tbNamePlayer2.Text = settings.player2; 
```

获取设置方法：

```
StorageFolder sf = await Package.Current.InstalledLocation.GetFolderAsync("XML");
StorageFile st;
try {
    st = await sf.GetFileAsync(filename);
} catch {
    WriteInitialSettings();
}
st = await sf.GetFileAsync(filename);
var reader = XmlReader.Create(st.Path);
XmlSerializer ser = new XmlSerializer(typeof(Settings));
settings = (Settings)ser.Deserialize(reader);
player1 = settings.player1;
player2 = settings.player2;
difficulty = settings.difficulty;
win = settings.win;
lose = settings.lose; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:52:59.373

你需要`await`你的`GetSettings`方法：

```
await settings.GetSettings();
tbNamePlayer1.Text = settings.player1;
tbNamePlayer2.Text = settings.player2; 
```

这样，您的方法将（异步）等待直到`GetSettings`完成，然后再分配属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:11:35.200

查看 xaml 中的 IsAsync 或/和优先级绑定。也许这可以帮助你

[http://www.switchonthecode.com/tutorials/wpf-tutorial-priority-bindings](http://www.switchonthecode.com/tutorials/wpf-tutorial-priority-bindings)

# magento-1.7 - 如何在 Magento 中为一张优惠券添加动态折扣金额

> ID：13581698
> 
> 赞同：0
> 
> 时间：2012-11-27T10:03:33.273
> 
> 标签：magento-1.7, coupon

如果使用优惠券，如何设置动态折扣金额。

为此，我创建了一个购物车价格规则并将此促销优惠券发送给一些客户，当他们从我的网站购买产品并应用此优惠券时，每个客户都会根据他们购物车中的产品获得不同的折扣金额，所以我该如何设置动态折扣金额 ?

我已经对销售规则/规则模块进行了一些研究，但感到困惑，所以请帮助我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:25:37.077

只是为了您的一些知识或有需要的人，我终于找到了我的动态折扣金额问题的解决方案。

要实现这一点，您需要更改两种方法，第一种是`process(Mage_Sales_Model_Quote_Item_Abstract $item)`在`Mage_SalesRule_Model_Validator`类中，您需要更改规则折扣金额并将其设置为任何动态计算值 `$rule->setDiscountAmount($dynamicDiscountAmount);` ，例如在 collect 方法中只需更新折扣金额以在总计块中显示

```
$address->setDiscountAmount(-$discountAmount);
$address->setBaseDiscountAmount(-$discountAmount); 
```

# xml - 如何使用 xslt 从 xml 创建 csv

> ID：13581699
> 
> 赞同：0
> 
> 时间：2012-11-27T10:03:33.353
> 
> 标签：xml, xslt

我正在尝试从以下形式的 xml 文件制作 csv：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Envelope>
        <Header>
            <env:MessageSentDateTime>2012-09-19T09:50:04Z</env:MessageSentDateTime>
            <env:MessageSequenceNumber>856432</env:MessageSequenceNumber>
        </Header>
        <Body>
            <Data>
                <Data:ID>
                    <Data:AODB>9346280</Data:AODB>
                    <Data:Ref>
                        <common:Code>HJ</common:Code>
                        <common:num>8113</common:num>
                    </Data:Ref>
                 </Data:ID>
                 ... Continues like this, no set number of nodes, parts or AnotherParts
         </Body>
         Second message starting with <Header> ending with </Body>, 
         will be more than 2 in practice
    </Envelope> 
```

我想在 /Body 标记处的 csv 文件中添加一个换行符，因为这表示一条新消息。消息会混合在一起，因此在 Body 部分中有不同数量的节点、不同数量的部分以及没有一致的端节点。此外，会有不包含任何文本的节点，但我仍然想要一个逗号。

到目前为止，我有：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="text"/>
        <xsl:strip-space elements="*"/>

        <xsl:template match="*[not(*)]">
            <xsl:value-of select="normalize-space(.)"/>
            <xsl:text>,</xsl:text>
        </xsl:template>

        <xsl:template match="Body[last()]">
            <xsl:value-of select="normalize-space(.)"/>
            <xsl:text>&#10;</xsl:text>
        </xsl:template>
    </xsl:stylesheet> 
```

它还在 Body 中的最后一条信息之后添加了一个逗号。我想用换行符替换那个逗号，有没有简单的方法可以做到这一点？

问候，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:23:37.267

一种方法是更改​​与**Body**元素匹配的模板以专门查找“叶子”子元素

```
<xsl:template match="Body">
   <xsl:apply-templates select=".//*[not(*)]"/>
   <xsl:text>&#10;</xsl:text>
</xsl:template> 
```

然后，在与叶元素匹配的模板中，您可以将其更改为仅在它不是找到的第一个元素时才输出逗号

```
 <xsl:if test="position() &gt; 1">
     <xsl:text>,</xsl:text>
  </xsl:if> 
```

如果您想试一试，这里是完整的 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>
   <xsl:strip-space elements="*"/>

   <xsl:template match="*[not(*)]">
      <xsl:if test="position() &gt; 1">
         <xsl:text>,</xsl:text>
      </xsl:if>
      <xsl:value-of select="normalize-space(.)"/>
   </xsl:template>

   <xsl:template match="Body">
      <xsl:apply-templates select=".//*[not(*)]"/>
      <xsl:text>&#10;</xsl:text>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:36:30.573

我的规范略有变化，需要节点路径和值以使每个条目唯一。这是我用来解决问题的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"></xsl:output>
    <xsl:strip-space elements="*"/>

    <xsl:template match="*[*]">
        <xsl:param name="elementNames" select="''"/>
        <xsl:apply-templates select="*">
            <xsl:with-param name="elementNames">
                <xsl:copy-of select="$elementNames"/>
                <xsl:value-of select="replace(name(.), ':', '.')"/>
                <xsl:text>_</xsl:text>
            </xsl:with-param>
        </xsl:apply-templates>
     </xsl:template>

     <xsl:template match="*[not (*)]">
         <xsl:param name="elementNames" select="''"/>
         <xsl:copy-of select="$elementNames"/>
         <xsl:value-of select="replace(name(.), ':', '.')"/>
         <xsl:value-of select="name()"/>,<xsl:apply-templates select="current()/text()"/>
         <xsl:text>&#10;</xsl:text>
     </xsl:template>

     <xsl:template match="/*">
          <xsl:apply-templates select="*"/>
     </xsl:template> 
     </xsl:stylesheet> 
```

感谢所有看过并试图提供帮助的人。

问候，大卫

# ios - 检测 UILabel 中的 url

> ID：13581714
> 
> 赞同：5
> 
> 时间：2012-11-27T10:04:19.060
> 
> 标签：ios, ipad, uitableview, uilabel

我有一个 Tableview 并且 tableview 单元被定制为有一个 UILabel。UILabel 中的文本具有 URL。有没有办法检测 url，例如 UITextView 如何启用检测 URL，以便用户交互应该能够加载 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:12:59.617

如果您只想识别 URL，可以使用[`NSDataDetector`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)检查`NSTextCheckingTypeLink`类型。

如果您想以不同的方式绘制 URL，并且您的目标是 iOS 6，您可以使用`NSAttributedString`将 URL 变为蓝色或为它们加下划线或其他方式。如果您的目标是较旧版本的 iOS，您可能希望在 Internet 上寻找一些免费代码来绘制样式文本，例如[`OHAttributedLabel`](https://github.com/AliSoftware/OHAttributedLabel).

如果你想真正让 URL 触摸敏感，你可以在标签上添加一个点击手势识别器，并尝试找出字符串的哪一部分被点击（有点复杂），或者在 Internet 上寻找一些已经免费的代码为你做（如`OHAttributedLabel`），或者只是`UITextView`在表格视图单元格中放置一个而不是标签。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-27T11:12:34.020

正如 Rob 指出的那样，我们如何才能做到这一点真是太棒了。

但是，我们可以使用机智，因此可以保存 ios 版本的问题（可能），只需使用 UILabel 和 UIButton。

我们需要做的是，无论是从 IB 还是故事板，只需放置一个带有字符串作为 URL 的 UILabel（使用它作为标题），比如说；

“www.myURL.com”

现在，在其上方放置一个 UIButton（自定义类型的按钮），然后使用“______”（下划线）并将此按钮设置为与您的 UILabel 重叠，并且“下划线”必须位于您的标签下方。

现在，只需在单击 URL 时根据需要执行任何您需要的按钮操作，您还可以在此处更改 textColor 等属性；还加载 URL 并导航到 UIWebView。

# facebook - FQL 查询不返回结果

> ID：13581725
> 
> 赞同：1
> 
> 时间：2012-11-27T10:04:51.590
> 
> 标签：facebook, facebook-fql

我的 FQL 查询有问题。我阅读了所有相关主题，但找不到我的错误。我的 Facebook 应用程序具有以下权限：电子邮件、user_birthday、user_likes、read_stream。如果用户喜欢我的页面，我想在一个函数中获取，但我的查询没有返回结果！相同的查询已在 Graph API 资源管理器中进行了测试，我得到了结果。这是功能：

```
 function getUserInfo(accessToken) {

        FB.api('/me', function (response) {
            var user_id = response.id;
            var page_id = "40796308305";   //page id for like
            var fql_query = "SELECT uid FROM page_fan WHERE page_id = " + page_id + "and uid=" + user_id;   // +"&access_token=" + accessToken.toString();
            var the_query = FB.Data.query(fql_query);

            alert(fql_query); 
```

// 第一种方式

```
 FB.api({
                method: 'fql.query',
                query: fql_query,
                access_token: accessToken
            }, function (resp) {
                alert(resp);
                if (resp.length) {
                    alert('A fan!');
                    $("#container_like").show();
                    $("#container_notlike").hide();

                    document.getElementById('displayname').innerHTML = response.name;
                    document.getElementById('FBId').innerHTML = response.id;
                } else {
                    alert('Not a fan!');
                    $("#container_notlike").show();
                    $("#container_like").hide();
                }
            }
            ); 
```

// 第二种方式

```
 the_query.wait(function (rows) {
                if (rows.length == 1 && rows[0].uid == user_id) {
                    alert('A fan!');
                    $("#container_like").show();
                    $("#container_notlike").hide();
                    document.getElementById('displayname').innerHTML = response.name;
                    document.getElementById('FBId').innerHTML = response.id;
                } else {
                    alert('NOT a fan!');
                    $("#container_notlike").show();
                    $("#container_like").hide();
                }
            });

        });
    } 
```

accessToken 用于 fql_query 中的第二种方式（现在注释）。我从代码中获取它：

```
FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {                    
                var accessToken = response.authResponse.accessToken;
                getUserInfo(accessToken); 
```

...等等。所以我看到了我所有的警报，但查询没有返回数据。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:45:26.567

不确定这是否是问题所在，但我花了很多时间才发现我在 localhost 上运行我的 javascript，但 facebook 授权的 url 是另一回事，所以我遇到了意想不到的失败。快速验证和消除可能性的东西。

# asp.net - 第三方服务器上的 AD 身份验证可能性

> ID：13581732
> 
> 赞同：2
> 
> 时间：2012-11-27T10:05:29.187
> 
> 标签：asp.net, iis, active-directory, windows-authentication

请假设有两个服务器：

*   服务器-A：Windows 2012、IIS8、ASP.NET 4.5
*   服务器-B：Windows 2012、IIS8、ASP.NET 4.5、Active Directory

两台服务器由不同的组织拥有和管理，服务器 B 上的 Active Directory 与服务器 A 无关，也没有参与。

基于此，是否可以在 Server-A 上使用 Windows 身份验证来对访问 Server-B 的用户进行身份验证？我认为不会，但显然不完全确定。

我已经设法在 Server-B 上编写代码来读取当前经过身份验证的用户的属性（例如employeeID），但需要将它们传递给 Server-A 进行处理（这最终可能充当单点登录机制）。除非当然有更好的方法可以分享？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:39:59.020

我通过以下方式实现了这一点。可能有更好的方法，但这是我能得到的最安全的方法：

1.  用户通过 Active Directory 登录服务器 B
2.  用户访问托管在服务器 B 上的“身份验证”页面
3.  该页面查找他们的 AD 员工 ID 并将其加密在 cookie 中
4.  用户正在转移到服务器 A 上的 Web 应用程序
5.  服务器 A 上的 Web 应用程序看到加密的 cookie 并对其进行解密，检查前一页是否位于客户 IP 地址上
6.  Web 应用程序使用加密 cookie 中的员工 ID 登录用户

已在服务器 B 上创建了一个接口，以便在更新员工 ID 值时，将此更改镜像到服务器 A，以便员工 ID 值保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:29:04.720

您可以使用表单身份验证和 AD 授权提供程序。

[http://msdn.microsoft.com/en-us/library/ff650308.aspx](http://msdn.microsoft.com/en-us/library/ff650308.aspx)

# javascript - JavaScript 编辑链接

> ID：13581733
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:05:29.777
> 
> 标签：javascript

我的内部搜索引擎返回的搜索结果如下所示：

[http://test.mobilkul.se/search/search.html](http://test.mobilkul.se/search/search.html)

现在，这个 JavaScript 添加了例如`"target=blank"`和`#search="query_String"`到搜索结果中的每个链接。

我正在尝试编辑 JavaScript，以便每个链接都将从

“http://test.mobilkul.se/search/click?query...”

到

“http://test.mobilkul.se/search/fetch?query...”

我试图添加：

`.replace('search/click?query=','search/fetch?query=');`

到 JavaScript 中的不同位置，但没有任何反应..

有人可以帮忙吗？

编辑：

我在这里放了一个 JSfiddle：http: [//jsfiddle.net/shibaja/kK2PZ/](http://jsfiddle.net/shibaja/kK2PZ/)

JavaScript 位于 html 代码的底部。

我想在每个链接上执行这些命令：

.replace('&url=%2Fsearch','&urlx=%2Fsearch')

.replace('search/click?query=','search/fetch?query=')

.replace('&title=file','&url=file')

.replace('&spaceId=','&space=')

但我不知道将它们放在 javascript 中的哪个位置。请节省我的时间 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:09:59.693

就像是：

```
$('a[href*=query]').each(function(){
  $(this).attr('href', $(this).attr('href').replace('query', 'fetch'));
}); 
```

您可以调整以替换更具体的字符串 ( `search/click?query`)。

另外，请记住，这`replace`不会影响原始字符串，但会以您想要的方式返回一个新字符串。

希望能帮助到你。

* * *

这是 JSFiddle：http: [//jsfiddle.net/V8B8N/](http://jsfiddle.net/V8B8N/)

# c++ - 解析来自主 C++ 的参数

> ID：13581734
> 
> 赞同：1
> 
> 时间：2012-11-27T10:05:30.160
> 
> 标签：c++, main, argv

> **可能重复：**
> [C 字符串 — 使用相等运算符 == 比较两个字符串是否相等](https://stackoverflow.com/questions/3933614/c-string-using-equality-operator-for-comparing-two-strings-for-equality)

这里的基本问题。我正在用 g++ 编译这个程序并使用单个 -r 参数 (./a.out -r) 运行它，但是它不输出下面指定的 cout 语句。这段代码有什么问题吗？

```
#include <string>
using namespace std;

int main(int argc, char* argv[]) {

    if (argv[1] == "-r" ) {
        cout << "First arg is -r" << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:06:49.043

您不能使用 比较字符串文字`==`，因为它所做的是比较*指针*（即内存地址，在这种情况下总是不同的）。

改为使用[`strcmp`](http://www.cplusplus.com/reference/cstring/strcmp/)或比较[`std::string`](http://www.cplusplus.com/reference/string/string/)对象：

```
if (strcmp(argv[1], "-r") == 0) { ... } 
```

或者

```
if (std::string(argv[1]) == "-r") { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:09:36.290

您不能将字符串文字与 == 进行比较。使用 strcmp。

（另外，不要忘记检查 argc 是否至少为 2）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:26:39.813

您的代码中的一个错误是您正在比较 char 数组的地址，而不是比较数组中的值。正如人们所说，您可以`C`使用 using 的方式进行操作`strcmp`（尽管使用它`strncmp`来避免缓冲区溢出更安全）。

但是，它更容易`std::string`在 C++ 中使用。

我会将 args 复制到字符串向量中。

```
#include <vector>
#include <string>

int main(int argc, char* argv[])
{
    vector<string> args(argv, argv+argc);
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:12:25.657

通常你会按照以下方式做一些事情：

```
while (--argc && **++argv=='-')
{
   char *p;
    p=*argv+1;
    switch(tolower(*p))
    {
        case 'r':                                       
            break;

    }
} 
```

基本上，虽然还有一些 args，但检查是否有一个 '-' 字符，然后打开下一个字符以查看修饰符（'r' 或 'a' 等）

# matlab - 矩阵行大小与向量项的比较？

> ID：13581736
> 
> 赞同：2
> 
> 时间：2012-11-27T10:05:35.490
> 
> 标签：matlab, octave

我有矩阵 [mxn] 和向量 [m]，我想将每一行与相应的向量编号进行比较，有没有办法做这个向量化的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:48:45.760

使用`bsxfun`：

```
% example data
M = rand(5, 3);
V = rand(5,1);

% for equality (==) : 
bsxfun(@eq, V, M);

% for greater-than (>) : 
bsxfun(@gt, V, M);

% for greater-than-or-equals (>=) : 
bsxfun(@ge, V, M); 
```

等。可用功能的列表在 中列出`help bsxfun`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:19:35.970

首先，你最好注意你的接受率:)

您可以尝试`intersect`使用函数来比较矩阵中是否有任何向量成员。如果这对您有帮助，则将这些成员保存到新向量中。

```
x = [mxn]
y = [m]
z=intersect(x,y) 
```

例如

```
x = [1,2,3,4,5,]
y = [5,6,2]
z = intersect(x,y) 
```

将导致

```
z = [2,5] 
```

改进的答案是：-

```
[z,ix,iy] = intersect(x,y) 
```

其中 ix, iy 为您提供 y 元素在 X 中存在的行索引。

# javascript - Chrome ext：appendChildTypeError：尝试构建覆盖 div 时无法调用 null 方法“appendChild”

> ID：13581737
> 
> 赞同：0
> 
> 时间：2012-11-27T10:05:34.417
> 
> 标签：javascript, exception, google-chrome-extension

我尝试构建来自 chrome 扩展的简单覆盖 div，它大部分时间都在工作，但我注意到很少有网站像：[http](http://en.wikipedia.org/wiki/Main_Page) ://en.wikipedia.org/wiki/Main_Page 我在尝试添加时遇到此错误分区。

这是我的代码：contenet.js：

```
var s = document.createElement('script');
s.src = chrome.extension.getURL('script_inpage.js');
s.onload = function() {
    s.parentNode.removeChild(s);
};

try{
 console.log("appendChild START");
    (document.head||document.documentElement||document.body).appendChild(s);
 console.log("appendChild DONE");
}catch(e){
  console.log("exception in appendChild");
} 
```

script_inpage.js

```
try{
    var buttonnode= document.createElement('input');
    buttonnode.setAttribute('type','button');
    buttonnode.setAttribute('id','test_btn');
    buttonnode.setAttribute('value','Test!');

    var div_bottom = document.createElement("div");
    div_bottom.id = "div_bottom";
    div_bottom.style.width = "300px";
    div_bottom.style.height = "20px";
    div_bottom.style.background = "#999";
    div_bottom.style.position="fixed";
    div_bottom.style.bottom="0";
    div_bottom.style.right="0";
    div_bottom.style.zIndex="9999"
    div_bottom.innerHTML = "Hello from div";
    div_bottom.appendChild(buttonnode);
    document.body.appendChild(div_bottom);
}
catch(e){
  console.log("script in page exception in appendChild"+e);
  alert(e);
} 
```

清单文件.json

```
{
   "background": {
      "page": "background.html" 
   },
   "content_scripts": [
    {
      "matches": ["<all_urls>"],       
      "js": ["contentscript.js"],
      "run_at": "document_end",
      "all_frames": true
    }
   ],
   "web_accessible_resources": [
    "script_inpage.js"
   ],
   "browser_action": {
      "default_icon": "icon19.png",
      "default_popup": "popup.html",
      "default_title": "Simple test"
   },
   "content_security_policy": "script-src 'self'; media-src *; object-src 'self'",
   "description": "Simple test.",
   "icons": {
      "128": "icon128.png",
      "16": "icon16.png",
      "32": "icon32.png",
      "48": "icon48.png"
   },

   "manifest_version": 2,
   "minimum_chrome_version": "20",
   "name": "Simple test",
   "permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ],

   "version": "2.6"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:31:21.437

[使用http://en.wikipedia.org/wiki/Main_Page](http://en.wikipedia.org/wiki/Main_Page)为我正确工作， 代码如下

![在此处输入图像描述](../Images/9a40f44bf628894afa466600d33fcfb5.png)

***清单.json***

```
{

   "content_scripts": [
    {
      "matches": ["<all_urls>"],       
      "js": ["content.js"],
      "run_at": "document_end",
      "all_frames": true
    }
   ],
   "web_accessible_resources": [
    "scripts.js"
   ],
   "browser_action": {
      "default_title": "Simple test"
   },
   "content_security_policy": "script-src 'self'; media-src *; object-src 'self'",
   "description": "Simple test.",

   "manifest_version": 2,
   "minimum_chrome_version": "20",
   "name": "Simple test",
   "permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ],

   "version": "2.6"
} 
```

***脚本.js***

```
try{
    var buttonnode= document.createElement('input');
    buttonnode.setAttribute('type','button');
    buttonnode.setAttribute('id','test_btn');
    buttonnode.setAttribute('value','Test!');

    var div_bottom = document.createElement("div");
    div_bottom.id = "div_bottom";
    div_bottom.style.width = "300px";
    div_bottom.style.height = "20px";
    div_bottom.style.background = "#999";
    div_bottom.style.position="fixed";
    div_bottom.style.bottom="0";
    div_bottom.style.right="0";
    div_bottom.style.zIndex="9999"
    div_bottom.innerHTML = "Hello from div";
    div_bottom.appendChild(buttonnode);
    document.body.appendChild(div_bottom);
}
catch(e){
  console.log("script in page exception in appendChild"+e);
  alert(e);
} 
```

***内容.js***

```
var s = document.createElement('script');
s.src = chrome.extension.getURL('scripts.js');
s.onload = function() {
    s.parentNode.removeChild(s);
};

try{
 console.log("appendChild START");
    (document.head||document.documentElement||document.body).appendChild(s);
 console.log("appendChild DONE");
}catch(e){
  console.log("exception in appendChild");
} 
```

# c++ - 测试夹具中的设置与构造函数

> ID：13581738
> 
> 赞同：45
> 
> 时间：2012-11-27T10:05:40.417
> 
> 标签：c++, googletest

为什么测试夹具在 Google Test 中有一个 SetUp 方法？构造函数实际上不是同一件事吗？对于 TearDown 方法也是如此。对 SetUp 和 Constructor 以及 TearDown 和 Destructor 的调用与 TestEventListener 一致：OnTestStart 和 OnTestEnd。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-27T15:38:54.737

常见问题解答中有[一个答案](https://github.com/google/googletest/blob/master/docs/faq.md#should-i-use-the-constructordestructor-of-the-test-fixture-or-setupteardown-ctorvssetup)：

> ## 我应该使用测试夹具的构造函数/析构函数还是设置/拆卸函数？
> 
> 首先要记住的是 googletest 不会**在**多个测试中重用相同的测试夹具对象。对于每一个`TEST_F`，googletest 都会创建一个**新**的测试夹具对象，立即调用`SetUp()`，运行测试体，调用`TearDown()`，然后删除测试夹具对象。

> 当您需要编写每个测试的设置和拆卸逻辑时，您可以选择使用测试夹具构造函数/析构函数或`SetUp()/TearDown()`. 前者通常是首选，因为它有以下好处：
> 
> *   通过在构造函数中初始化成员变量，我们可以选择 make 它`const`，这有助于防止意外更改其值并使测试更明显正确。
> *   如果我们需要对测试夹具类进行子类化，子类的构造函数保证首先调用基类的构造函数*，*子类的析构函数保证 *之后*调用基类的析构函数。使用`SetUp()/TearDown()`，子类可能会犯忘记调用基类`SetUp()/TearDown()`或在错误时间调用它们的错误。
> 
> > 您可能仍希望`SetUp()/TearDown()`在以下极少数情况下使用：
> 
> *   在构造函数（或析构函数）的主体中，不能使用 `ASSERT_xx`宏。因此，如果设置操作可能导致导致测试无法运行的致命测试失败，则必须使用`CHECK`宏或使用`SetUp()`构造函数来代替。
> *   如果拆卸操作可能引发异常，则必须使用 `TearDown()`而不是析构函数，因为在析构函数中抛出会导致未定义的行为，并且通常会立即终止程序。请注意，在编译器中启用异常时，许多标准库（如 STL）可能会抛出异常。因此，`TearDown()`如果您想编写可移植的测试，无论有无异常，您都应该更喜欢。
> *   googletest 团队正在考虑在启用异常的平台（例如 Windows、Mac OS 和 Linux 客户端）上抛出断言宏，这将消除用户将故障从子例程传播到其调用者的需要。因此，如果您的代码可以在这样的平台上运行，则不应在析构函数中使用 googletest 断言。
> *   在构造函数或析构函数中，您不能对此对象进行虚函数调用。（您可以调用声明为虚拟的方法，但它将被静态绑定。）因此，如果您需要调用将在派生类中重写的方法，则必须使用`SetUp()/TearDown()`.

# objective-c - ABAddressBookCopyArrayOfAllPeople 中缺少联系人

> ID：13581740
> 
> 赞同：2
> 
> 时间：2012-11-27T10:05:41.703
> 
> 标签：objective-c, abaddressbook

我试图从我的应用程序的通讯录中找到一个电话号码，但我很惊讶没有找到它。问题是我已经在我的应用程序访问的控制台中打印了我的地址簿的所有号码，奇怪的是一些联系人丢失了，我正在将输出与我的地址簿进行比较，它只有少数，但仍然如此。

这就是我访问地址簿的方式：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
 NSArray *people = (NSArray *)   ABAddressBookCopyArrayOfAllPeople(addressBook);

 BOOL found = NO;
 NSString *name;
 int i = 0;
 while (!found) {//Here I print all the contact info, name and phone number
       ABRecordRef person = (ABRecordRef)[people objectAtIndex:i];
       ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonPhoneProperty);
       NSLog(@"el telf: %@ y nombre %@",tempPhone2, [NSString stringWithFormat:@"%@ %@",ABRecordCopyValue(person, kABPersonFirstNameProperty) ? (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) : @"",ABRecordCopyValue(person, kABPersonLastNameProperty) ? (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty) : @""]);                           
      if([[key objectForKey:@"phone"] isEqualToString:tempPhone2]){
           found = YES;          
      }
 } 
```

知道为什么我不能访问我的通讯录中的所有联系人吗？

[编辑] 最奇怪的是，当我使用`ABPeoplePickerNavigationController`那些丢失的联系人时，会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:38:29.683

请尝试以下。

```
ABAddressBookRef lAddressBook = ABAddressBookCreate();
CFArrayRef lRawAddressBookEntries =
ABAddressBookCopyArrayOfAllPeople(lAddressBook);
CFIndex lTotalContactsCount = ABAddressBookGetPersonCount(lAddressBook);
for (CFIndex i = 0; i < lTotalContactsCount; i++) {
    ABRecordRef lRef = CFArrayGetValueAtIndex(lRawAddressBookEntries, i);

    ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(lRef, kABPersonPhoneProperty);
    NSArray* phoneNumbers1 = (NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty);
    CFRelease(phoneNumberProperty);

    // Do whatever you want with the phone numbers
    if(phoneNumbers1 && [phoneNumbers1 isKindOfClass:[NSArray class]]) {
        for(NSString *stringPhoneNUmber in phoneNumbers1) {
            if([stringPhoneNUmber isEqualToString:tempPhone2]){
                found = YES;
            }
        }
    }
} 
```

# html - 如何让 Firefox 在页面刷新时重新发布数据？

> ID：13581743
> 
> 赞同：1
> 
> 时间：2012-11-27T10:05:51.517
> 
> 标签：html, firefox, xhtml, browser

我目前正在开发一个需要在所有浏览器中保持一致行为的应用程序。我的一个页面加载以响应表单提交。当用户在此页面刷新窗口时，除火狐以外的所有浏览器都会重新提交数据并正确加载页面。

如何让 Firefox 在页面重新加载时也重新发布表单数据？

# freebase - Freebase 中的内容节点是什么？

> ID：13581744
> 
> 赞同：1
> 
> 时间：2012-11-27T10:05:55.277
> 
> 标签：freebase, mql

我试图找到什么是内容节点的答案，但找不到。Freebase 中的内容节点到底是什么？不是和其他人一样的话题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:55:07.730

内容节点是用作主题描述和图像等内容 blob 的代理的节点。由于此类内容存储在 Freebase 图表之外，因此需要图表中的这些节点，以便可以通过主题链接此内容。

Freebase 正在将主题描述移动到图表中，但图像仍作为内容节点。

[您可以使用以下 MQL 查询](http://tinyurl.com/bqfh53g)查看主题 San Francisco 的图像内容节点：

```
{
  "id": "/m/0d6lp",
  "name": null,
  "/common/topic/image": [{}]
} 
```

然后，使用来自图像内容节点的 ID，您可以通过 API 访问图像，如下所示：

[https://www.googleapis.com/freebase/v1/image](https://www.googleapis.com/freebase/v1/image) **/m/04j74yh**

# java - 检索多个选择值

> ID：13581746
> 
> 赞同：1
> 
> 时间：2012-11-27T10:05:59.330
> 
> 标签：java, jsp, servlets, struts

我正在使用动态填充的多选下拉菜单。如何从下拉列表中检索所有选定的值？我正在使用 struts，这是来自 JSP 的代码。

```
<html:select= name="HForm" property="selPerson" multiple="multiple"> 
   <logic:iterate id="pplist" name="HForm" property="personList">
     <option value=<bean:write name="pplist" property="id"/>><bean:write name="pplist"     
      property="value"/></option>
    </logic:iterate> 
</html:select> 
```

目前我正在尝试通过在表单对象上使用以下方法来检索选定的值，但这会返回下拉列表中的所有值。我只需要用户选择的那些。

```
hform.getPersonList 
```

表单对象：`HForm.java`

```
 private List personList=new ArrayList();
  private List selPerson=new ArrayList(); 
```

我尝试使用`hmf.getselPerson();`，但这会引发错误：

`PropertyUtils E org.apache.commons.beanutils.PropertyUtilsBean invokeMethod Method invocation failed. java.lang.IllegalArgumentException: argument type mismatch`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:00:20.050

该`getSelPerson()`方法的返回类型应该是`String[]`多选下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T15:51:09.007

```
<html:select property="selectedOption" styleId="exemple" multiple="multiple">                 
        <html:optionsCollection property="availableOption" label="name" value="ref" />
</html:select> 
```

很简单的方法...

*   selectedOption 将是在我的 java 表单中声明的​​字符串 []（使用 getter 和 setter）
*   availableOption 将是我要显示以供选择的对象的 ArrayList（此处显示名称）（还需要创建 getter 和 setter）

# python - 生成条目总和的固定值列表

> ID：13581748
> 
> 赞同：1
> 
> 时间：2012-11-27T10:06:07.733
> 
> 标签：python, sum, list-comprehension

我想生成一个`n`概率总和为 1 的概率列表。该列表的大小是固定的，但可以任意大。`n`可能是`111`, `2`, `10`, `14`,等。我意识到这`100`可能是一种计算挑战，可能没有一种最好的方法来做到这一点，但我仍然很乐意接受有关合理方法的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:14:28.407

我认为最好的方法是生成所需大小的随机数列表，将所有数字相加并将每个数字除以总数：

```
randlist = [randon.random() for i in range(n)]
total = sum(randlist)
randlist = [i/total for i in randlist] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:21:59.527

与 Smetterleen 类似，但效率可能稍高一些：

```
import random
def generate(n):
    unnormalised = [random.random() for _ in range(n)]
    s = sum(unnormalised)
    normalised = map(lambda x: x/s, unnormalised)
    return normalised 
```

*值得注意的是，这些都不一定会**精确**到 1*：

```
>>> sum(generate(4))
1.0
>>> sum(generate(4))
1.0
>>> sum(generate(4))
1.0000000000000002
>>> sum(generate(4))
0.9999999999999999
>>> sum(generate(4))
1.0 
```

# environment-variables - 如何将私有信息添加到 OpenShift 环境变量？

> ID：13581762
> 
> 赞同：13
> 
> 时间：2012-11-27T10:06:52.263
> 
> 标签：environment-variables, openshift

数据库连接字符串或密码等身份验证信息几乎不应该存储在版本控制系统中。

看起来为托管在 OpenShift 上的应用程序指定环境变量的唯一方法是将[它们提交到 Git 存储库](https://openshift.redhat.com/community/kb/kb-e1072-how-to-create-and-use-environment-variables-on-the-server)。OpenShift 论坛上对此[进行了讨论](https://openshift.redhat.com/community/blogs/new-openshift-release-may-15-2012-community-code-custom-environment-variables)，但没有针对该问题提出有用的建议解决方法。

是否可以使用另一种方法将身份验证信息添加到我的应用程序而无需将其提交到存储库？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-27T16:16:28.580

SSH 进入您的应用程序并导航到您的数据目录

```
cd app-root/data 
```

在这个目录中创建一个包含变量的文件（例如“.myenv”），内容如下

```
export MY_VAR="something" 
```

然后在“.openshift/action_hooks/pre_start”中的存储库中添加这一行

```
source ${OPENSHIFT_DATA_DIR}/.myenv 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-18T22:37:49.980

Openshift 现在支持使用 rhc 命令行工具设置环境变量，如下所示：

```
rhc set-env HEROKU_POSTGRESQL_DB_URL='jdbc:postgresql://myurl' -a myapp 
```

我认为这比所有其他答案都容易...

请参阅：[https ://blog.openshift.com/taking-advantage-of-environment-variables-in-openshift-php-apps/](https://blog.openshift.com/taking-advantage-of-environment-variables-in-openshift-php-apps/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-20T13:44:10.837

添加`.openshift/action_hooks/pre_start_*`不是很酷，因为除了通过 SSH 添加文件之外，您还必须修改存储库。

对于nodejs，编辑`nodejs/configuration/node.env`工作好几天，但我经历了文件被恢复了好几次。所以不稳定。

我找到了一个更好的解决方案。

`echo -n foobar > ~/.env/user_vars/MY_SECRET`

这完美地工作。

（也许这就是做的`rhc set-env ...`？）

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T21:55:22.257

您的另一个选择是`openshift`在本地计算机上创建项目的分支。您可以为仅存在于您的`openshift`分支中的私人信息创建一个文件夹/文件。您仍然需要获取`pre_start`挂钩中的文件，例如`source ${OPENSHIFT_REPO_DIR}/.private`.

然后在你的`master`分支中开发，合并到你的`openshift`分支中，然后从你的分支推`openshift`送到 OpenShift 主分支。这听起来令人费解，但确实使工作流程变得非常简单，尤其是在`origin`共享的情况下。

如果您的来源在 GitHub 上，这将是工作流程。

`github/master <--> local/master --> local/openshift --> openshift/master`

请注意，唯一的双向链接是在 github 和您的本地 master 之间，因此您的凭据不应该“逃逸”。

这种方法还有一个额外的好处，就是能够将任何 OpenShift 特定的更改限制在`openshift`分支中（例如 Gemfile、ENV 变量、路径等）。

至于安全性，在 OpenShift 服务器上，repo 应该具有与您相同的安全性`$OPENSHIFT_DATA_DIR`，因此您不会再暴露自己。

警告：根据您的框架，您的文件`$OPENSHIFT_REPO_DIR`可能可以通过 HTTP 直接访问。您应该能够通过`.htaccess`文件来防止这种情况。

# java - 清除 ArrayList 是否保留其容量

> ID：13581768
> 
> 赞同：4
> 
> 时间：2012-11-27T10:07:14.277
> 
> 标签：java, arraylist, capacity

如标题所述，如果我创建一个初始容量为 500 的 ArrayList ，然后在一段时间后将其清除，它的*容量*仍然是 500 吗？还是我需要为此重新启动它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:16:48.437

是的，它保留了它的容量。（至少，不在 Oracle VM 的实现中）：

```
/**
 * Removes all of the elements from this list.  The list will
 * be empty after this call returns.
 */
public void clear() {
    modCount++;

    // Let gc do its work
    for (int i = 0; i < size; i++)
        elementData[i] = null;

    size = 0;
} 
```

需要明确一点：an`ArrayList`由一个数组支持（例如，ArrayList 的 int[]），每当您通过创建一个新数组并复制内容而超出容量时，该数组就会被扩展。清除不会（如代码中所示）创建一个新的较小数组，复制那里的东西，并破坏旧的大数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:22:24.270

不，如果从列表中删除元素，arrayList 的容量不会改变。但是您可以使用**[trimToSize](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#trimToSize%28%29)**自己做到这一点。

通常，您无需担心容量会随着您添加更多元素而增加。担心容量的可能原因是由于频繁重新分配导致的性能。否则，您无需担心重新初始化容量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:44:03.667

[在ArrayList 的容量](https://stackoverflow.com/a/3564928/584420)的帮助下，我发现容量没有被重置。找到示例代码：

```
import java.lang.reflect.Field;
import java.util.ArrayList;
public class Main {

    public static void main(String[] args) {
        try {
            ArrayList<Object> al = new ArrayList<Object>(500);
            System.out.println(getCapacity(al));
            for (int i = 0; i < 550; i++) {
                al.add(new Object());
            }
            System.out.println(getCapacity(al));
            al.clear();
            System.out.println(getCapacity(al));
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    static int getCapacity(ArrayList<?> l) throws Exception {
        Field dataField = ArrayList.class.getDeclaredField("elementData");
        dataField.setAccessible(true);
        return ((Object[]) dataField.get(l)).length;
    }
} 
```

# xcode4 - 上传承包商制作的应用程序

> ID：13581769
> 
> 赞同：0
> 
> 时间：2012-11-27T10:07:19.687
> 
> 标签：xcode4, app-store-connect, appstore-approval

一位朋友请我帮忙上传一个第三方承包商制作的应用程序。承包商已提供源代码和所有相关文件。但是，由于第 3 方开发者在他们的帐户下开发了该应用程序，因此我无法上传到应用商店。

据我所知，bundleID 和代码签名元素不在我朋友帐户下的列表中。我很难在项目中进行任何更改。当我尝试在模拟器下编译和运行项目时，它似乎工作正常。

将当前项目“转换”到我朋友的帐户以便他可以将其上传到 App Store 的正确步骤是什么？

感谢你的帮助。

谢谢，JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:24:07.273

您的朋友需要为您的应用程序生成 App ID、分发证书和配置文件。他只能通过 iOS 开发者网站上的付费开发者帐户来做到这一点。

如果没有正确签署您的应用程序，您将无法将其分发到 App Store。

# java - 如何用布尔值“连接”字符串？

> ID：13581771
> 
> 赞同：1
> 
> 时间：2012-11-27T10:07:18.840
> 
> 标签：java, dictionary

我需要连接 a`Boolean`和 a `String`。我还需要一个`getter`和`setter`一个`Boolean`。

例如：

```
boolean errorFlag1;
private static final String  errorMessage1 = "...";
boolean errorFlag2;
private static final String  errorMessage2 = "...";
...

public Messages[] getErrorMessages()
{
    if(errorFlag1)
         Add errorMessage1 to Messages[]
    if(errorFlag2)
         Add errorMessage2 to Messages[]
    ...
}

public boolean getErrorFlag1()
{
    return errorFlag1;
}
public setErrorFlag1( ef1 )
{ 
    this.errorFlag1 = ef1;
}
... 
```

我可以在这里使用地图吗？有没有更好的方法将标志与消息“连接”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:16:01.037

另一个解决方案（我希望我没有误解你的目标）：

```
enum ErrorMessage
{
    ERROR_ONE("First message"), ERROR_TWO("Second message");

    private String message; 

    ErrorMessage(String str) 
    {
        message = msg;
    }

    public String getMessage() 
    {
        return message;
    }
} 
```

这样，您就会收到包含字符串作为“消息”的持续错误消息。它们的类型是`ErrorMessage`，当你传递一个 like 时，`ErrorMessage.ERROR_ONE`你可以通过 getter 方法获取它们的消息。

如果您希望有一个包含错误的类，那么您可以创建错误集合，并在错误发生时添加或删除错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:17:43.847

我不确定您的错误消息是如何设置的，但我建议将`Integer`代表每个错误的`List<Integer>`. 错误将`List`通过`addError`允许操作封装列表的方法添加到 。

然后将错误消息的定义放在 a`Map<Integer,String>`中，其键对应于相应的错误消息。这将允许您通过在地图中添加新条目来创建新错误。

```
private List<Integer> errors = new ArrayList<Errors>();
private static Map<Integer> errorLookup = new HashMap<Integer,String>();

static{
  errorLookup.put(1, "Error Message 1");
  errorLookup.put(2, "Error Message 2");
}

public void addError(Integer errorKey){
   errors.add(errorKey);
}

public List<String> getErrors(){

   List<String> errorMsgs = new ArrayList<String>();
   for(Integer key: errors){
     errorMsgs.add(this.errorLookup.get(key).value);
   }
   return errorMsgs;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:09:12.813

您可以肯定地使用 Map，因此错误消息的数量是运行时确定的。使用错误消息作为键，布尔值作为值。

# c# - 如何创建具有动态按钮数量的 Windows 窗体对话框？

> ID：13581779
> 
> 赞同：0
> 
> 时间：2012-11-27T10:07:50.750
> 
> 标签：c#, winforms

我需要创建一种对话框或类似弹出屏幕的东西。我有这个项目数组，然后我需要在对话框中为每个项目创建一个按钮，以便我可以通过单击按钮进行导航。

在 C# 中最好的方法是什么？有人可以指导我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:13:06.360

如果您使用的是[winforms](/questions/tagged/winforms "显示标记为“winforms”的问题")，请放置`FlowLayoutPanel`在您的表单上。然后在运行时将所有控件添加到它。

```
foreach(var item in items)
{
   Button button = new Button();
   // setup button properties
   // subscribe to events
   flowLayoutPanel.Controls.Add(button);
} 
```

[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/zah8ywcc.aspx)将自动排列您的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:14:40.653

考虑您的 Dialog 或类似的父元素称为 sp 并且 ar 是您要用于创建按钮的元素数组：

```
for(YourObject obj : ar)
{
  System.Windows.Controls.Button newBtn = new Button();
  newBtn.Content = obj.YourProperty;
  newBtn.Name = "Button" + obj.YourProperty;
  sp.Children.Add(newBtn);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T17:07:09.050

我在玩一些概念，**其中一部分**似乎正是创建动态对话的例子。您可以为其添加动态按钮创建、组合它并使用表格或流布局面板正确格式化它

```
DialogResult result;
using (var popup = new Form())
{
    popup.Size = new Size(1000, 500);
    popup.Location = new Point(Convert.ToInt32(this.Parent.Width / 2) - 500, Convert.ToInt32(this.Parent.Height / 2) - 250);
    popup.FormBorderStyle = FormBorderStyle.FixedDialog;
    popup.MinimizeBox = false;
    popup.MaximizeBox = false;
    popup.Text = "My title";
    var lbl = new Label() { Dock = DockStyle.Top, Padding = new Padding(3), Height = 30 };
    lbl.Font = new Font("Microsoft Sans Serif", 11f);
    lbl.Text = "Do you want to Continue?";

    // HERE you will add your dynamic button creation instead of  my hardcoded

    var btnYes = new Button { Text = "Yes", Location = new Point(700, 400) };
    btnYes.Click += (s, ea) => { ((Form)((Control)s).Parent).DialogResult = DialogResult.Yes; ((Form)((Control)s).Parent).Close(); };
    var btnNo = new Button { Text = "No", Location = new Point(900, 400) };
    btnNo.Click += (s, ea) => { ((Form)((Control)s).Parent).DialogResult = DialogResult.No; ((Form)((Control)s).Parent).Close(); };

    popup.Controls.AddRange(new Control[] { lbl, btnYes, btnNo });
    result = popup.ShowDialog(this);

}
if (result == DialogResult.Yes)
{
    // do this
}
else
{
   // do that
} 
```

这是如何使用对话结果输出创建动态对话的示例。

# c# - 索引超出范围

> ID：13581781
> 
> 赞同：0
> 
> 时间：2012-11-27T10:07:54.037
> 
> 标签：c#, visual-studio-2010, c#-4.0

我在用 C# 编程我需要把一些东西放在一个字符串'xml'中

我有以下代码

```
 TextBox[] myTextBoxes = new TextBox[] { this.textBox2, this.textBox3, this.textBox4, this.textBox5, this.textBox6, this.textBox7, this.textBox8, this.textBox9, this.textBox10, this.textBox11 };
        TextBox[] ValueBoxes = new TextBox[] { this.textBox3, this.textBox5, this.textBox7, this.textBox9, this.textBox11 };
        CheckBox[] myCheckBoxes = new CheckBox[] { this.checkBox2, this.checkBox4, this.checkBox6, this.checkBox8, this.checkBox10 };
        CheckBox[] myMandBoxes = new CheckBox[] { this.checkBox3, this.checkBox5, this.checkBox7, this.checkBox9, this.checkBox11 }; 
```

并验证我的某些条件

```
 xml += "<fields>";

        for (int i = 0; i < myTextBoxes.Length; i++)
        {
            if (string.IsNullOrWhiteSpace(myTextBoxes[i].Text))
            {
                if (myCheckBoxes[i].Checked == true)
                    xml += "<field display='yes'> ";
                else
                    xml += "<field display='no'> ";
                if (myMandBoxes[i].Checked == true)
                    xml += "<mandatory='yes'>";
                else
                    xml += "<Mandatory='no'>";
                xml += "<label>" + (string)myTextBoxes[i].Text + "</label>";

            }
        } 
```

它在 if (myCheckBoxes[i].Checked == true) 处给了我一个 Indexoutof boud 异常

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:10:44.727

您的数组中包含不同数量的元素，因此您无法使用相同的索引访问它们。他们必须独立完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:09:18.387

您没有与文本框相同数量的复选框，因此您无法针对相同的索引访问它们。您的索引从`0`to开始`myTextBoxes.Length`，如果`i`要大于`4`，那么您将收到此异常。

不太确定您要做什么，但您可以在从 myCheckBoxes 访问元素之前添加对长度的检查。

```
if (i < myCheckBoxes.Length && myCheckBoxes[i].Checked == true)
        xml += "<field display='yes'> "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:10:33.873

改用 Foreach

这里编辑为*myTextBoxes.Length - 1*

```
for (int i = 0; i < myTextBoxes.Length - 1; i++) 
```

**编辑：**

此外，您的复选框计数和 Textox 计数**不相符**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:11:00.897

您的 for 循环正在运行`myTextBoxes.length`，但您正在迭代`myCheckBoxes`。看来你有`textboxes`更多`CheckBoxes`

将其更改为：

for (int i = 0; i < myCheckBoxes.Length; i++) {

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:11:08.580

代替

```
for (int i = 0; i < myTextBoxes.Length; i++) 
```

采用

```
for (int i = 0; i < myCheckBoxes.Length; i++) // or myMandBoxes.Length (Both the CheckBoxes have same items) 
```

因为您正在使用 CheckBoxes 进行循环，所以为什么要使用 TextBox 的长度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:11:19.633

您的文本框有 11 个元素，而复选框有 5 个元素。

更改以下

```
 if (string.IsNullOrWhiteSpace(myTextBoxes[i].Text)) 
```

到

```
 if (string.IsNullOrWhiteSpace(myTextBoxes[i].Text) && i < myCheckBoxes.Length ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T10:12:57.550

首先，在用循环构造字符串时，千万不要在字符串上使用 +=，它们是[不可变](https://stackoverflow.com/questions/2365272/why-net-string-is-immutable)的，这样使用它只会浪费速度和内存。请改用[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)实例。

至于你的问题，`myTextBoxes`数组的长度是 10，所以你有索引 0 到 9 的项目。这一行中的代码

```
if (myCheckBoxes[i].Checked == true) 
```

尝试访问`myCheckBoxes`具有 5 个元素（索引 0 到 4）的数组中的相应项。当`i`变为 5 时，代码访问`myCheckBoxes[5]`不存在的，因此异常。

除此之外，`textBox2`或者`checkBox7`只是糟糕的控件名称，.net 框架中有更好的选项用于 XML 序列化和生成。

# memory-management - XML解析内存大小

> ID：13581783
> 
> 赞同：1
> 
> 时间：2012-11-27T10:08:02.623
> 
> 标签：memory-management, java-me, xml-parsing

我正在尝试解析一个 100KB XML 文件，它在 Java 中具有 1 级层次结构，尤其是 J2ME。问题是 XML 文件的解析占用了超过 1MB，尽管它的大小为 100KB，这导致了 OOME。

解析 XML 在内存中占用 10 倍以上大小是否正常？还是解析器有问题？

如果是正常的，有没有其他方法可以做到这一点？我正在考虑使用 JSON 代替，或者只是遍历一个普通的文本文件，因为 XML 只有 1 级层次结构，并且它的分区是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:10:10.367

你是如何解析它的？使用[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)读取它会将整个对象模型加载到内存中，而使用[SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)解析器会一点一点地读取它并为每个元素、文本节点等调用您的代码。这意味着它将消耗更少的空间，因为它不存储任何东西，你都可以控制你录制的内容。

# notifications - 通知和警报管理器不起作用

> ID：13581786
> 
> 赞同：1
> 
> 时间：2012-11-27T10:08:11.403
> 
> 标签：notifications, alarmmanager

嗨，我已经看到了很多关于这个问题的问题，现在这是我的代码，这是我在 onclick 中的代码，它似乎永远不会工作。

```
 if(v.getId() == In){

         Intent myIntent = new Intent(HelloAndroidActivity.this , TimeAlarm.class);     
           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
           PendingIntent pi = PendingIntent.getService(HelloAndroidActivity.this, 0,         myIntent, 0);

           Calendar calendar = Calendar.getInstance();
               calendar.set(Calendar.HOUR_OF_DAY, 3);
               calendar.set(Calendar.MINUTE, 59);
               calendar.set(Calendar.SECOND, 00);

              alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,     calendar.getTimeInMillis(), 24*60*60*1000 , pi);
     } 
```

然后这是另一部分

```
public class TimeAlarm extends BroadcastReceiver {

     NotificationManager nm;

     public void onReceive(Context context, Intent intent) {
      nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
      String from = "Nithin";
      String message = "Crazy About Android...";
      PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
      Notification notif = new Notification(R.drawable.ic_launcher, "Crazy About Android...", System.currentTimeMillis());
      notif.setLatestEventInfo(context, from, message, contentIntent);
      nm.notify(1, notif);
     }
    } 
```

这也是我的清单我希望我把接收器放在正确的地方

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.CS340.smokingsurvey"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <receiver android:name=".TimeAlarm"></receiver>

    <activity

        android:name="com.CS340.smokingsurvey.HelloAndroidActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# php - 平面数组到多维数组

> ID：13581790
> 
> 赞同：1
> 
> 时间：2012-11-27T10:08:21.140
> 
> 标签：php

我在 WP 中有一个充满导航菜单项的平面数组。每个项目都知道它的父母，但他们似乎都不知道他们是否有孩子。

```
 Array
(
    [0] => stdClass Object
        (
            [ID] => 22
            [menu_item_parent] => 0
        )
    [1] => stdClass Object
        (
            [ID] => 108
            [menu_item_parent] => 22
        )
    [2] => stdClass Object
        (
            [ID] => 117
            [menu_item_parent] => 108
        )
    [3] => stdClass Object
        (
            [ID] => 118
            [menu_item_parent] => 108
        )
    [4] => stdClass Object
        (
            [ID] => 106
            [menu_item_parent] => 22
        )
    [5] => stdClass Object
        (
            [ID] => 119
            [menu_item_parent] => 106
        )
    [6] => stdClass Object
        (
            [ID] => 120
            [menu_item_parent] => 106
        )
    [7] => stdClass Object
        (
            [ID] => 23
            [menu_item_parent] => 0
        )
) 
```

我已经尝试用几种不同的方式用条件逻辑来处理它（每次都硬编码值并不理想），但我一直把自己编码成一团糟。如何遍历数组以产生这样的结果？

```
<ul>
    <li>22
        <ul class="child">
            <li>108
                <ul class="grandchild">
                    <li>117</li>
                    <li>118</li>
                </ul>
            </li>
            <li>106
                <ul class="grandchild">
                    <li>119</li>
                    <li>120</li>
                </ul>
            </li>           
        </ul>
    </li>
    <li>23</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:46:02.557

您需要识别节点的子节点，以便可以将它们放入所需的结构中。为此，您需要遍历元素并重新组织它们。下面是一个粗略的代码；没有测试它。

```
$new = array();

foreach ($array as $elm)
{
    if ($elm->menu_item_parent != 0)
    {
        foreach($new as $it)
        {
            $found = false;
            if ($it->ID == $elm->menu_item_parent)
            {
                $it->children[] = $elm;
                $found = true; // Found the parent break loop
            } else if (isset($it->children))
            {
                foreach ($it->children as $child)
                {
                    if ($child->ID == $elm->menu_item_parent)
                    {
                        $child->children[] == $elm;
                        $found = true;
                        break;
                    }
                }

                if ($found) break;
            }
        }
    } else {
        $new[] = $elm; // Parent element - add directly
    }
} 
```

数组 $new 现在应该包含带有子节点的元素，您可以对其进行迭代以产生所需的结果。

这通过循环当前数组、识别父节点及其子节点并将它们组织起来来工作。只能工作两层；如果您需要更深入，代码可能需要重新编写以更好地组织它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:25:41.020

我想从制作单独的父（主）数组和子数组开始（或者我们可以使它成为一个长的多维数组）

```
foreach($arr AS $value)
{
    if($value->menu_item_parent == 0)
        $parentArr[] = $value->ID;
    else
        $childArr[$value->menu_item_parent][] = $value->ID; 
} 
```

递归函数将有助于获得一点全局解决方案来生成子孙。考虑到这一点，

```
$str = '';

echo "<ul>";
foreach($parentArr AS $pValue)
{
    echo '<li>'.$pValue;
        if(in_array($pValue, array_keys($childArr)))
        {
            echo '<ul class="child">';
            $result= childs($pValue); //calling a recursive function (In case one have larger child tree)
            echo $result;
            echo '</ul>';
        }
    echo '</li>';
}
echo '</ul>';

function childs($val)
{
    global $childArr;
    global $str;

    foreach($childArr[$val] AS $cValue)
    {
        $str.= '<li>'.$cValue;

        if(in_array($cValue, array_keys($childArr)))
        {
            $str.= '<ul class="grand_child">';
            childs($cValue);
            $str.= '</ul>';
        }
        $str.= '</li>';
    }

    return $str;
} 
```

必须有更好的方法来处理此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:02:07.737

我最终这样做了：

```
<?php 
$items = wp_get_nav_menu_items('primary'); // original flat array
foreach ($items as $item) {
    $pages[$item->menu_item_parent][] = $item; // create new array
}
foreach ($pages[0] as $parent) {
    if (isset($pages[$parent->ID])) { // if page has children
        echo '<li>'.$parent->ID;
        echo '<ul class="children">';
        foreach ($pages[$parent->ID] as $child) {
            if (isset($pages[$child->ID])) { // child has children
                echo '<li>'.$child->ID;
                echo '<ul class="grandchildren">';
                foreach ($pages[$child->ID] as $grandchild) {
                    echo '<li>'.$grandchild->ID.'</li>';
                }
                echo '</ul></li>';
            } else {
                echo '<li>'.$child->ID.'</li>'; // child has no children
            }
        }
        echo '</ul></li>';
    } else { // page has no children
        echo '<li>'.$parent->ID.'</li>';
    }
}
?> 
```

# java - 休眠延迟加载未更新

> ID：13581792
> 
> 赞同：2
> 
> 时间：2012-11-27T10:08:27.123
> 
> 标签：java, hibernate, jsf, web

嗨，我在 webapp 上与 jboss 一起工作。我有一个类似于论坛页面的页面，您可以在其中发布消息并回复已发布的消息。在我的 jsf 中，我有三个 div 标签，一个用于添加新消息，一个用于列出所有消息，一个用于查看选定的消息。所有标签都嵌入其中，每个标签上都有渲染属性，如下所示：

```
<h:pannelGroup rendered="#{myController.shouldRender('add')}">

<!-- Here is my html for adding new message -->

</h:pannelGroup>

<h:pannelGroup rendered="#{myController.shouldRender('list')}">

<!-- Here is my html for listing messages -->

</h:pannelGroup>

<h:pannelGroup rendered="#{myController.shouldRender('view')}">

<!--    Here is my html for viewing message and its replys.. 
    also there is hidden div with html for popup to post reply -->

<div id="reply">
<!--    This is hidden html that is shown when clicked reply 
        link in the message div below. 
        When shown users can add reply to the message -->
</div>

<div id="message">
<!-- Here is show the message itself -->
</div>

<div id="replyList">
<!-- Here is list replys for the message currently beeing viewed 

    For listing the replys i used ui:repeate and c:forEach from the jstl core
    both resulting with same outcome.

    In my message object i have list of replys which i load lazily...
-->
</div>

</h:pannelGroup> 
```

我的支持 bean，剥离了所有注释和其余代码......

```
MyController{

String page;

public boolean shouldRender(String view){
    return page.equals(view);
}
} 
```

我使用菜单项列表中的 actionListener 设置的页面属性，在我将用户重定向到 message.xhtml 页面之前，我将 myController 的属性页面设置为我想要查看的 div 名称，例如，如果我单击添加链接，我设置page = "add" 并重定向到 message.xhtml。控制器从外部拾取页面集并呈现添加 div。

因为我无法让扩展的持久性上下文正常工作，所以我在 /* 上设置了过滤器以打开用户事务，然后在 chain.DoFilter 我提交我的事务之后将实体管理器与那个合并。这我需要手动启用延迟加载..

问题是，当我添加回复消息时，带有回复的列表不会立即刷新，我需要返回消息列表，然后再次在视图 div 中打开相同的消息以刷新回复列表.. 或...在添加回复的方法中，我尝试在消息对象拥有的回复列表中手动加载我的回复（这是延迟加载并映射@OneToMany），这样它就可以工作，但我不喜欢那个解决方案。

谁能告诉我天气休眠正在重新加载延迟加载的列表，因为我管理事务并且我假设一旦它加载了我的列表，它就不会自行刷新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:31:37.827

当列表在同一个会话中被修改时，它会被更新。

当列表在不同的会话中被修改时，它不会得到更新。

由于会话对象不是多线程安全的，在您的环境中，可能每个用户都有自己的会话实例，所以您将处于第二种情况。要强制刷新，您可以 evict() 父实例并再次 load() 它，或者 clear() 会话，或者创建并使用新的会话。

注意延迟加载。由于子元素在第一次使用时加载（而不是与父实例一起加载），它们已经可以反映到加载父对象时尚未进行的修改。

# asp.net - 程序集的版本高于引用的版本。EPI5 到 EPI6

> ID：13581799
> 
> 赞同：0
> 
> 时间：2012-11-27T10:08:59.307
> 
> 标签：asp.net, .net-assembly, episerver

从 EPi5 成功升级到 EPi6 后，我收到此错误

```
 Error   101 Assembly 'EPiServer.Web.WebControls, Version=6.0.530.0, Culture=neutral,
 PublicKeyToken=8fe83dea738b45b7' uses 'EPiServer, Version=6.0.530.0, Culture=neutral, 
PublicKeyToken=8fe83dea738b45b7' which has a higher version than referenced assembly 'EPiServer, 
Version=5.2.375.236, Culture=neutral, PublicKeyToken=8fe83dea738b45b7'  
c:\EPiServer\Sites\UppgraderaSiteName\SiteName.Web\bin\EPiServer.Web.WebControls.dll    
SiteName.Web 
```

DLL 在 web.config 中配置为 6.0.530.0 在参考中它说 6.0.530.0 DLL 文件也说 6.0.530.0

有些东西我没有得到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:15:28.073

尝试从解决方案资源管理器中删除“EPiServer.Web.WebControls.dll”的引用，然后添加正确版本的引用。

此外，您可以在记事本中打开项目文件（“.csproj”或“.vbproj”）并检查`<Reference/>`元素，以验证是否使用了正确的版本：

```
<Project>
  <ItemGroup>
    <Reference/>
    ...
    <Reference/>
  </ItemGroup>
</Project> 
```

# qt - Qwt 和 boost::signals

> ID：13581801
> 
> 赞同：0
> 
> 时间：2012-11-27T10:09:01.623
> 
> 标签：qt, boost, compiler-errors, signals, qwt

我的项目同时使用 Qt（包括 Qwt）和 Boost::signals。众所周知，它们的宏彼此不兼容。`CONFIG += no_keywords`我用大写注册表编译了我的项目并重命名了所有 Qt 宏，即`signals = Q_SIGNALS`. 项目中没有更多错误，但现在我在 Qwt 中出现错误，包括这样的

```
/usr/include/qwtplot3d/qwt3d_extglwidget.h:101:1：错误：“信号”未命名类型
/usr/include/qwtplot3d/qwt3d_extglwidget.h:116:8: 错误: 'slots' 之前的预期':'
/usr/include/qwtplot3d/qwt3d_extglwidget.h:116:8: 错误：'slots' 没有命名类型

```

似乎 Qwt 仍然与 Boost::signals 冲突。我可以在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:16:27.760

Qwt 与升压信号兼容 - 您正在谈论一个名为 QwtPlot3D 的库！

当您想在 QwtPlot3D 中使用升压信号时，您必须修补其实现以替换信号/插槽/发射宏，就像您在代码中所做的那样。

# jboss - -详细的垃圾收集器解释

> ID：13581802
> 
> 赞同：1
> 
> 时间：2012-11-27T10:09:02.053
> 
> 标签：jboss, garbage-collection

我正在运行 jboss 5.1，我得到了这个 GC 数据

```
34.098: [GC 197635K->91639K(236480K), 0.0356348 secs]
37.139: [GC 217911K->100951K(239936K), 0.0541968 secs]
37.194: [Full GC 100951K->97239K(304704K), 0.3325776 secs]
38.602: [GC 214271K->97547K(285568K), 0.0488937 secs]
41.395: [GC 220811K->111699K(304512K), 0.0334592 secs]
42.734: [GC 235155K->115815K(304384K), 0.0208743 secs]
43.722: [GC 239271K->115801K(303872K), 0.0166861 secs]
44.373: [GC 241049K->118266K(304128K), 0.0106151 secs 
```

有人可以解释什么时候发生Full GC，为什么堆大小之前和之后的差异如此之小，Full GC 时不应该更大。完全 GC 之前的行是“正常”GC，它有这么大的差异（和小的收集时间？），我只注意到这两行的时间戳非常接近

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:17:29.780

你所看到的是在年轻/伊甸园空间和旧空间中发生的收集。这两个空间使用不同类型的收集器，因为这些区域中的对象具有不同的特征。那些 Full GC 通常是最大的问题，因为它们很慢并且会停止你的 VM。幸运的是，您还没有大问题，但您的问题是它是为什么引起的。

不幸的是，这是不可能的。如果你想知道更多，你应该激活开关`-XX:+PrintGCDetails`

不过，我们可以猜测。正如您正确指出的那样，堆未满（300MB 中的 100MB）并且它收集的不多（30MB）。所以我猜这个GC是由调用引起的`System.GC()`。您应该使用 -`XX:+DisableExplicitGC`来防止它们发生，或者您找到实际执行此操作的代码并将其删除。

# android - 从 Android 中的其他活动返回时，活动再次从服务器重新加载整个数据

> ID：13581805
> 
> 赞同：1
> 
> 时间：2012-11-27T10:09:04.697
> 
> 标签：android, android-activity, activitygroup, activity-lifecycle

基本上，我正在开发一个包含 4 个选项卡的选项卡活动的应用程序，并且我正在使用 actvityGroup 来管理活动和 backKeypressed() 方法。

当我的应用程序首次启动时，它会向服务器发送一个请求并显示进度条（使用 AsyncTask），如下图所示。

![在此处输入图像描述](../Images/0eb902f7f2fe62dd94fda6f0eeb05e90.png)

在此之后，我的完整 UI 显示为

![在此处输入图像描述](../Images/76e961b38b0fff8b4f8cadac394f8975.png)

它在按钮“GO”的单击事件上加载新的活动（代码如下）

```
btnGo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
                Intent bookSearchResultActivityIntent = new Intent();
                bookSearchResultActivityIntent
                        .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                bookSearchResultActivityIntent.setClass(getParent(),
                        BookSearchResultActivity.class);
                bookSearchResultActivityIntent.putExtra("LANG", language);
                bookSearchResultActivityIntent.putExtra("SEARCH_KEYWORDS",
                        edTxt_SearchField.getText().toString());
                MyActivityGroup activityStack = (MyActivityGroup) getParent();
                activityStack.push("BooksSearchActivity",
                        bookSearchResultActivityIntent); 
```

这也是我的 ActivtyGroup.java 代码

```
public class MyActivityGroup extends ActivityGroup {
    private Stack<String> stack;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (stack == null) {
                stack = new Stack<String>();
        }
        push("1stStackActivity", new Intent(this, Home.class));
    }

    @Override
    public void finishFromChild(Activity child) {
        pop();
    }

    @Override
    public void onBackPressed() {
        pop();
    }

    public void push(String id, Intent intent) {
        Window window = getLocalActivityManager().startActivity(id,
                        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        if (window != null) {
            stack.push(id);
            setContentView(window.getDecorView());
        }
    }

    public void pop() {
        if (stack.size() == 1) {
            finish();
        }
        LocalActivityManager manager = getLocalActivityManager();
        manager.destroyActivity(stack.pop(), true);
        if (stack.size() > 0) {
            Intent lastIntent = manager.getActivity(stack.peek()).getIntent()
                            .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            Window newWindow = manager.startActivity(stack.peek(), lastIntent);
            setContentView(newWindow.getDecorView());
        }
    }
} 
```

好的，现在我的问题是当我按下 backKey(); 它应该来到以前的活动。

*   是的，它涉及上一个活动，但它再次向服务器发送请求并再次显示进度条并加载，直到服务器发送响应。这浪费了我的时间。
*   我只想加载 HomeTab 一次（当我玩应用程序时）。不是一次又一次
*   我也在添加

    setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

在开始活动时

*   还在 menifest.xml 文件中添加了以下代码

    android:configChanges="键盘|keyboardHidden|方向"

但还没有工作。

这是我的主页选项卡的代码（它在 onCreate 方法中将请求发送到服务器）

```
public class Home extends Activity {
    /** Called when the activity is first created. */
    static final String URL = "http://www.shiaislamiclibrary.com/requesthandler.ashx";
    static final String KEY_ITEM = "Book"; // parent node
    static final String KEY_BOOKAUTHOR = "BookAuthor";
    static final String KEY_BOOKDATEPUBLISHED = "DatePublished";
    static final String KEY_BOOKTITLE = "BookTitle";
    static final String KEY_BOOKCODE = "BookCode";
    static final String KEY_BOOKIMAGE = "BookImage";

    String searchLang;
    String searchKeywords;
    LayoutInflater inflater = null;

    ArrayList<String> BookTitle = new ArrayList<String>();
    ArrayList<String> BookCoverPhotos = new ArrayList<String>();
    ArrayList<String> BookAuther = new ArrayList<String>();
    ArrayList<String> BookPublishDate = new ArrayList<String>();
    ArrayList<String> ImageByte = new ArrayList<String>();
    ArrayList<Bitmap> bitmapArray = new ArrayList<Bitmap>();

    Context ctx = this;
    Activity act = this;
    Context context = Home.this;
    URL bookImageURL = null;
    Bitmap bitMapImage = null;

    Button btnGo;
    Spinner spnrLanguage;
    Spinner spnrBrowseBy;
    String language;
    EditText edTxt_SearchField;

    GridView gridView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // setContentView(R.layout.home_activity);
        View viewToLoad = LayoutInflater.from(this.getParent()).inflate(
                R.layout.home_activity, null);
        this.setContentView(viewToLoad);

        gridView = (GridView) findViewById(R.id.gridview);
        spnrLanguage = (Spinner) findViewById(R.id.spnrLanguage);
        spnrBrowseBy = (Spinner) findViewById(R.id.spnrBrowseBy);
        edTxt_SearchField = (EditText) findViewById(R.id.EditTxt_Search);
        btnGo = (Button) findViewById(R.id.btn_GO);

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        // checking for availbe internet Connection
        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {

            new UIThread().execute(URL, "Imam Ali");
        }

        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {

                Toast.makeText(context, BookTitle.get(pos), Toast.LENGTH_SHORT)
                        .show();

                Intent bookSearchResultActivityIntent = new Intent();
                bookSearchResultActivityIntent.setClass(getParent(),
                        BookOverView.class);
                bookSearchResultActivityIntent.putExtra("BITMAP",
                        bitmapArray.get(pos));
                bookSearchResultActivityIntent.putExtra("BOOK_TITLE",
                        BookTitle.get(pos));
                bookSearchResultActivityIntent.putExtra("BOOK_AUTHOR",
                        BookAuther.get(pos));
                bookSearchResultActivityIntent.putExtra("BOOK_PUBLISH_DATE",
                        BookPublishDate.get(pos));

                MyActivityGroup activityStack = (MyActivityGroup) getParent();
                activityStack.push("BookOverViewActivity",
                        bookSearchResultActivityIntent);

            }
        });

        // //////////////////// Spinners handler/////////////////////////
        ArrayAdapter<String> adapterLanguage = new ArrayAdapter<String>(
                context, android.R.layout.simple_spinner_item, getResources()
                        .getStringArray(R.array.spnr_language_array));
        ArrayAdapter<String> adapterBrowseBy = new ArrayAdapter<String>(
                context, android.R.layout.simple_spinner_item, getResources()
                        .getStringArray(R.array.spnr_browse_array));
        spnrLanguage.setAdapter(adapterLanguage);
        spnrBrowseBy.setAdapter(adapterBrowseBy);

        spnrLanguage.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {
                Toast.makeText(getParent(),
                        spnrLanguage.getItemAtPosition(pos) + "",
                        Toast.LENGTH_SHORT).show();
                language = spnrLanguage.getItemAtPosition(pos).toString();
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

        spnrBrowseBy.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {
                Toast.makeText(context,
                        spnrBrowseBy.getItemAtPosition(pos) + "",
                        Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

        // ////////////////////Search Button Handler/////////////////

        btnGo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if (!edTxt_SearchField.getText().toString().equals("")) {
                    Intent bookSearchResultActivityIntent = new Intent();
                    bookSearchResultActivityIntent
                            .setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    bookSearchResultActivityIntent.setClass(getParent(),
                            BookSearchResultActivity.class);
                    bookSearchResultActivityIntent.putExtra("LANG", language);
                    bookSearchResultActivityIntent.putExtra("SEARCH_KEYWORDS",
                            edTxt_SearchField.getText().toString());
                    MyActivityGroup activityStack = (MyActivityGroup) getParent();
                    activityStack.push("BooksSearchActivity",
                            bookSearchResultActivityIntent);

                } else {
                    Toast.makeText(context, "Search Field Empty",
                            Toast.LENGTH_SHORT).show();
                }

            }
        });

    }

    private class UIThread extends AsyncTask<String, Integer, String> {

        ProgressDialog progressDialog;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            progressDialog = ProgressDialog.show(getParent(),
                    "Acumlating Books from server...",
                    "This may Take a few seconds.\nPlease Wait...");
        }

        @Override
        protected String doInBackground(String... params) {

            String URL = params[0];
            String searchKeywords = params[1];

            XMLParser parser = new XMLParser();
            String XMLString = parser.getXmlFromUrl(URL, searchKeywords,
                    searchLang);
            // Log.i("XML Response", XMLString);

            Document doc = parser.getDomElement(XMLString);

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);

            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                Element e = (Element) nl.item(i);

                BookTitle.add(parser.getValue(e, KEY_BOOKTITLE));
                BookCoverPhotos.add("http://shiaislamicbooks.com/books_Snaps/"
                        + parser.getValue(e, KEY_BOOKCODE) + "/1_thumb.jpg");
                BookAuther.add(parser.getValue(e, KEY_BOOKAUTHOR));
                BookPublishDate.add(parser.getValue(e, KEY_BOOKDATEPUBLISHED));
                Log.i("URLs", BookCoverPhotos.toString());
            }
            for (int i = 0; i < BookAuther.size(); i++) {

                try {
                    bookImageURL = new URL(BookCoverPhotos.get(i));
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                    Log.i("URL", "ERROR at image position" + i + "");
                }

                try {
                    bitMapImage = BitmapFactory.decodeStream(bookImageURL
                            .openConnection().getInputStream());
                    bitmapArray.add(bitMapImage);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.i("BITMAP", "ERROR" + i);
                }
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            progressDialog.dismiss();
            ImageAdapter adapter = new ImageAdapter(getBaseContext(), act);
            gridView.setAdapter(adapter);
        }
    }

    public class ImageAdapter extends BaseAdapter {

        public ImageAdapter(Context c) {
            context = c;
        }

        // ---returns the number of images---
        public int getCount() {
            // return imageIDs.length;
            return bitmapArray.size();
            // return 6;
        }

        public ImageAdapter(Context ctx, Activity act) {

            inflater = (LayoutInflater) act
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        // ---returns the ID of an item---
        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        // ---returns an ImageView view---
        public View getView(int position, View convertView, ViewGroup parent) {

            // ImageView bmImage;

            final ViewHolder holder;
            View vi = convertView;
            if (convertView == null) {
                vi = inflater.inflate(R.layout.grid_style, parent, false);
                holder = new ViewHolder();
                holder.txt_BooksTitle = (TextView) vi
                        .findViewById(R.id.txt_BookTitle);

                holder.img_BookCoverPhoto = (ImageView) vi
                        .findViewById(R.id.imgBookCover);
                vi.setTag(holder);
            } else {

                holder = (ViewHolder) vi.getTag();
            }
            holder.txt_BooksTitle.setText(BookTitle.get(position) + "");
            holder.img_BookCoverPhoto.setImageBitmap(bitmapArray.get(position));
            return vi;
        }
    }

    class ViewHolder {
        TextView txt_BooksTitle;
        ImageView img_BookCoverPhoto;
    }
} 
```

*   请看看我的活动小组课，告诉我该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:21:57.700

在 Home Tab 活动中加载数据时，将其放入一些静态数组中。

```
 ArrayList<String> BookTitle = new ArrayList<String>();
    ArrayList<String> BookCoverPhotos = new ArrayList<String>();
    ArrayList<String> BookAuther = new ArrayList<String>();
    ArrayList<String> BookPublishDate = new ArrayList<String>();
    ArrayList<String> ImageByte = new ArrayList<String>();
    ArrayList<Bitmap> bitmapArray = new ArrayList<Bitmap>(); 
```

快速浏览一下代码，制作它们`static ArrayList<...> ... = null;`并检查`onCreate()`方法内部：

```
if(BookTitle == null)
{
    //needs init
    BookTitle = new ArrayList<String>();
    //perform connect to server and parse response.
} 
```

当应用程序活动主页选项卡停止然后重新启动时，数据将已经在内存中，它将跳过`if`保留旧数据以供重复使用的子句。

确保在您真正想要终止应用程序时清除静态变量 - 在退出按钮单击时，调用静态方法再次将它们初始化为 null，或者如果您希望它们在 12 小时内有效，请记住静态变量中的时间戳，每次杀死/暂停主要活动时对其进行检查（是否为空或有日期，如果有日期，请检查是否已经过了 12 小时，如果是，则清除静态变量内容)

这是快速简便的方法。如果您不想处理静态变量，另一种方法是将它们存储在应用程序数据库中。

有很多选项，关键是您必须将它们标记为带有静态的“全局持久”数据，或者将它们存储在数据库/文件等中。

# select - SQLPLUS 表问题

> ID：13581806
> 
> 赞同：2
> 
> 时间：2012-11-27T10:09:11.080
> 
> 标签：select, sqlplus

我最近一直在使用 SQLPLUS，我的一项任务是显示来自两个表（股票、订单项）的一组值。我已经完成了这部分，但我被困在问题的最后一部分：“包括到目前为止尚未下订单的库存”。

这是声明：

```
`select Stocks.StockNo, Stocks.Description, OrderItems.QtyOrd
 from Stocks INNER JOIN OrderItems
 ON Stocks.StockNo = OrderItems.StockNo;` 
```

我已经得到了这部分的正确结果，但是第二部分让我望而却步，因为currnt 语句没有显示 QtyOrd 的 0 值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:17:40.023

您可能希望使用[LEFT OUTER JOIN](http://oreilly.com/catalog/orsqlpluspr2/chapter/ch01.html)否则`INNER JOIN`将排除没有任何订单的股票。您可能还考虑按库存分组，以便对每个库存的总数量求和？

```
SELECT  Stocks.StockNo, Stocks.Description, SUM(OrderItems.QtyOrd) AS QtyOrd
FROM  Stocks 
    LEFT OUTER JOIN OrderItems
         ON Stocks.StockNo = OrderItems.StockNo
GROUP BY Stocks.StockNo, Stocks.Description; 
```

# mysql - MYSQL 导入响应 'killed'

> ID：13581809
> 
> 赞同：1
> 
> 时间：2012-11-27T10:09:25.203
> 
> 标签：mysql, sql, linux, ubuntu

我有一个庞大的（3gigs）mysql 4.1.22 sql 文件，我被要求在我们的新生产服务器（运行 mysql 5）上恢复数据库，服务器是 ubuntu 12。

我使用脚本通过表插入将文件拆分为较小的 sql 文件，这对我来说效果很好，因为由于使用引号，其中 2 个插入崩溃了。

现在我的问题是我来到我最大的表插入 450MB 的 sql 文件，我使用

```
mysql --verbose -u ***** -p ******  < ****.sql 
```

它运行了一个巨大的文件（大约需要 20 分钟）然后我得到一个错误 2006，这显然是由于 max_allowed_pa​​cket，所以我去我的 my.cnf 并将它从默认的 16M 更改为 1024M，现在整个事情运行当它完成时它会等待然后说“杀死”就是这样。

这是超时还是什么，如果有人可以告诉我什么限制以及我必须增加什么来解决这个问题，这将是一个 hg 帮助，谢谢。

# machine-learning - 使用 KNN 算法的监督项加权方法

> ID：13581811
> 
> 赞同：0
> 
> 时间：2012-11-27T10:09:27.807
> 
> 标签：machine-learning, nlp, knn, document-classification

是否可以将监督术语权重模型与 KNN 分类器一起使用？我想知道如何表示测试文档的向量，只要测试文档是未标记的并且监督术语权重模型需要标记文档来计算权重。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:30:21.550

是的。您可以使用基于类信息的指标。

1.  您可以根据训练集（即 idf）为每个术语计算基于集合的值。这可能包括基于类的信息，例如每个术语的 max.chi^2 值。
2.  对于测试文档，您可以结合测量：例如将 TF 与 IDF（基于训练集）乘以 max.chi^2（也基于训练集）。

问候，

# java - 基本 Web 服务 Scala + JEE6 + weblogic

> ID：13581815
> 
> 赞同：0
> 
> 时间：2012-11-27T10:09:40.147
> 
> 标签：java, scala, weblogic-10.x

我正在尝试使用 JEE6 库编写一个基本的 web 服务是 scala，并希望将其部署在 weblogic server 10.3 上

我遵循以下链接中提到的程序：

第一次讨论在[http://www.dzone.com/links/search.html?query=scala+ws&x=0&y=0](http://www.dzone.com/links/search.html?query=scala+ws&x=0&y=0)

它完成了包装步骤。谁能帮我在 wls10.3 上部署它？

我正在使用 Ubuntu 12.04。

通过 weblogic 控制台进行部署时，出现以下错误：

*NoClassDefFoundError：scala/ScalaObject*

提前致谢，

阿潘

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:11:21.880

您需要将 .war 文件与 Scala 库 ( `scala-library.jar`) 一起打包。有关使用 SBT 执行此操作的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/3026911/packaging-and-deploying-scala-applications)

# arrays - 汇编寻址模式

> ID：13581818
> 
> 赞同：0
> 
> 时间：2012-11-27T10:09:53.487
> 
> 标签：arrays, assembly, matrix, memory-address, addressing-mode

这是代码：

```
section .data
v dw 4, 6, 8, 12
len equ 4
section .text
    global main
main:
    mov eax, 0 ;this is i
    mov ebx, 0 ;this is j
cycle:
    cmp eax, 2 ;i < len/2
    jge exit
    mov ebx, 0
    jmp inner_cycle
continue:
    inc eax
    jmp cycle
inner_cycle:
    cmp ebx, 2
    jge continue
    mov di, [v + eax * 2 * 2 + ebx * 2]
    inc ebx
    jmp inner_cycle
exit:
    push dword 0
    mov eax, 0
    sub esp, 4
    int 0x80 
```

我正在使用一个数组并将其扫描为矩阵，这是上述代码的 C 翻译

```
int m[4] = {1,2,3,4};
for(i = 0; i < 2; i++){
    for(j = 0; j < 2; j++){
        printf("%d\n", m[i*2 + j]);
    }
} 
```

当我尝试编译汇编代码时，出现此错误：

```
DoubleForMatrix.asm:20: error: beroset-p-592-invalid effective address 
```

指的是这条线

```
mov di, [v + eax * 2 * 2 + ebx * 2] 
```

有人可以解释一下这条线有什么问题吗？我认为这是因为寄存器尺寸，我尝试过

```
mov edi, [v + eax * 2 * 2 + ebx * 2] 
```

但我有同样的错误。

这是 Mac OS X 的程序集，要使其在另一个 SO 上工作，您必须更改退出系统调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:15:06.113

*SIB* ( Scale Immediate Base) 寻址模式只需要一个 Scale 参数（1,2,4 或 8）被应用到一个寄存器。

建议的解决方案是将 eax 预乘 4（也必须修改比较）。然后`inc eax`可以用`add eax,4`和 非法指令替换为`mov di,[v+eax+ebx*2]`

更高级别的优化将只是`for (i=0;i<4;i++) printf("%d\n",m[i]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:20:09.107

您不能在汇编程序中使用任意表达式。只允许少数寻址模式。

基本上最复杂的形式是 register/imm+register*scale，比例为 1,2,4,8

当然常数（如 2*2）可能会被折叠为 4，因此算作 4 的单个比例（而不是两次乘法）

你的例子试图一次做两个乘法。

解决方法：插入额外的LEA指令计算v+ebx*2，并在mov中使用结果。

```
 lea regx , [v+ebx*2]
     mov edi, [eax*2*2+regx] 
```

其中 regx 是一个免费寄存器。

# android - IntentFilter 相机和拍摄的照片

> ID：13581822
> 
> 赞同：0
> 
> 时间：2012-11-27T10:10:00.850
> 
> 标签：android, camera, media

所以我的问题是知道用 Camera 拍摄照片时是否有 Action/BroadCast ，以及是否有办法获取新 Created File(Picture) 的 File Name ？,

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:21:30.150

有两种控制相机的方法。

*   启动一个将启动默认相机活动并使用 onResult() 函数接收图像的意图。意图将返回图片。
*   通过您的应用程序控制相机，包括预览图像（我一开始不建议这样做）。

简单的方法非常简单：

```
private void dispatchTakePictureIntent(int actionCode) {
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePictureIntent, actionCode); 
```

}

第二个非常恶心。我们正在讨论处理内存异常、初始化相机的问题等等。

谷歌有很多关于这个的文档和教程。

简单： http: [//developer.android.com/training/camera/index.html](http://developer.android.com/training/camera/index.html)（拍摄照片）

高级：http: [//developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)

我记得当我实现简单的方法时，相机不会启动第二个意图。还有一个关于图像质量的问题，但我能够处理所有这些。

稍后我将发布一些代码以避免这种情况。

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:12:16.397

用于了解拍摄的新照片的意图过滤器：

```
<intent-filter>
                <action android:name="android.hardware.action.NEW_PICTURE" />
            </intent-filter> 
```

# objective-c - 修复设置自定义ios字体错误

> ID：13581829
> 
> 赞同：1
> 
> 时间：2012-11-27T10:10:23.860
> 
> 标签：objective-c, ios5, xcode4.5

我正在尝试使用外观代理设置自定义字体。

```
[[UILabel appearance] setTitleTextAttributes:@{
    UITextAttributeFont:[UIFont fontWithName:@"PT Sans Narrow" size:10.0]
}]; 
```

我已将 ttf 添加到我的项目中，并确认字体名称是正确的。

XCode 给了我这个错误：

```
2012-11-27 02:04:00.002 dashboard-mock[17093:11303] -[_UIAppearance setTitleTextAttributes:]: unrecognized selector sent to instance 0x712a1c0
2012-11-27 02:04:00.002 dashboard-mock[17093:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_UIAppearance setTitleTextAttributes:]: unrecognized selector sent to instance 0x712a1c0'
*** First throw call stack:
(0x1c92012 0x10cfe7e 0x1d1d4bd 0x1c81bbc 0x1c8194e 0x2aec 0x147b7 0x14da7 0x15fab 0x27315 0x2824b 0x19cf8 0x1beddf9 0x1bedad0 0x1c07bf5 0x1c07962 0x1c38bb6 0x1c37f44 0x1c37e1b 0x157da 0x1765c 0x28cd 0x27f5)
libc++abi.dylib: terminate called throwing an exception 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:21:08.693

您正在使用[`-setTitleTextAttributes`](https://developer.apple.com/library/ios/documentation/Uikit/reference/UIBarItem_Class/index.html#//apple_ref/occ/instm/UIBarItem/setTitleTextAttributes:forState:)标签，而它是[`UINavigationBar`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationBar_Class/)功能

```
if([[UINavigationBar appearance] respondsToSelector:@selector(setTitleTextAttributes:)])
   [[UINavigationBar appearance] setTitleTextAttributes:@{
                         UITextAttributeFont:[UIFont systemFontOfSize:12],
                    UITextAttributeTextColor:[UIColor redColor]
}]; 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:26:34.907

想通了，`setFont`而不是`setTitleTextAttributes`

```
[[UILabel appearance] setFont:[UIFont fontWithName:@"PT Sans Narrow" size:10.0]]; 
```

# javascript - 有没有办法找出哪个 iframe 正在调用父级的 JavaScript 函数

> ID：13581833
> 
> 赞同：2
> 
> 时间：2012-11-27T10:10:42.063
> 
> 标签：javascript, html, iframe

这是一个例子

父.html

```
<script>
function printWhoCalledMe() {
  console.log(???);  // what goes here that will identify the caller?
}
<iframe src="iframe1.html"></iframe>
<iframe src="iframe2.html"></iframe> 
```

iframe1.html

```
<script>
window.parent.printWhoCalledMe();
</script> 
```

iframe2.html

```
<script>
window.parent.printWhoCalledMe();
</script> 
```

更大的问题是，[我有一个测试工具，它在 iframe 中一次运行一堆测试](https://www.khronos.org/registry/webgl/sdk/tests/webgl-conformance-tests.html)。每个测试调用`window.parent.reportOnTest(success)`

我正在研究通过在超过 1 个 iframe 中运行测试来并行化测试，但我必须通过每个测试，目前是 1000 个测试，并将它们的调用从`window.parent.reportOnTest(success)`类似`window.parent.reportOnTest(success, window.location.href)`或类似的东西更改。

我想知道是否有办法在不修改测试的情况下找出哪个测试正在调用父级。

注意：我试过

```
function printWhoCalledMe() {
  console.log(window.location.href);
} 
```

但这是打印父母的href。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:27:51.913

我担心你可能不得不使用这样的字符串值..

```
function printWhoCalledMe(callerPage) {
  console.log(callerPage);  // what goes here that will identify the caller?
} 
```

你可以用这样的参数从你的子框架中调用这个函数..

iframe1.html

```
<script>
window.parent.printWhoCalledMe("iframe1");
</script> 
```

iframe2.html

```
<script>
window.parent.printWhoCalledMe("iframe2");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:29:00.220

如果您使用调用父函数`apply`，则可以将上下文更改为框架`window`

```
window.parent.printWhoCalledMe.apply(this);

function printWhoCalledMe() {
  console.log(this); // this now refers to the frame window
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-13T23:36:53.783

调用父函数时，如果不将其包含在参数中，就无法获取此信息。

幸运的是，这很容易。假设您给每个 iframe 一个 id，您只需将 iframe 的 id 传递给您正在调用的函数。您可以像这样获取您所在的 iframe 的 id `window.frameElement.id`：

例如：

iframe1.html

```
<script>
    window.parent.printWhoCalledMe(window.frameElement.id);
</script> 
```

父.html

```
<script>
    function printWhoCalledMe(iframeId) {
        console.log(iframeId);  // Prints the id of the iframe that called the function
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-16T04:41:57.040

太老套了，但你可以使用这样的东西：

1.  用于`caller`获取调用所需函数的函数的引用。
2.  继续使用`Object.getPrototypeOf`，直到达到`Object.prototype`那个境界。
3.  迭代所有框架窗口，并比较`Object.prototype`
4.  找到匹配项后，使用`frameElement`获取 iframe。

这需要同源、无沙盒和草率模式。例子：

```
window.func = function func() {
  var proto, nextProto = func.caller;
  while (nextProto) {
    proto = nextProto;
    nextProto = Object.getPrototypeOf(proto);
  }
  var win = [].find.call(window.frames, function(win) {
    try {
      return win.Object.prototype === proto;
    } catch(err) {
      return false;
    }
  });
  if (win) {
    var iframe = win.frameElement;
    console.log("function called from frame " + iframe.name);
  }
};
var iframe = document.createElement('iframe');
iframe.name = "myframe";
document.body.appendChild(iframe);
var doc = iframe.contentDocument;
var script = doc.createElement('script');
script.text = "(function f(){parent.func()})()";
doc.body.appendChild(script);
// Logs "function called from frame myframe" 
```

# mysql - 创建表中的 MySQL 错误 #1064

> ID：13581835
> 
> 赞同：1
> 
> 时间：2012-11-27T10:10:44.110
> 
> 标签：mysql, syntax, foreign-keys

这是我正在创建的两个表的 sql：

```
CREATE TABLE IF NOT EXISTS tbl_a(
    id INT(6) UNSIGNED NOT NULL,
    PRIMARY KEY(id)
)ENGINE = INNODB;

CREATE TABLE IF NOT EXISTS tbl_b(
    id INT(6) UNSIGNED NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY id REFERENCES tbl_a(id) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE = INNODB; 
```

这是我得到的错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'REFERENCES a(id) ON DELETE CASCADE ON UPDATE CASCADE )ENGINE = INNODB' at line 4 
```

有人可以建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:12:49.647

`()`在键名周围添加

```
CREATE TABLE IF NOT EXISTS tbl_b(
    id INT(6) UNSIGNED NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY (id) REFERENCES tbl_a(id) ON DELETE CASCADE ON UPDATE CASCADE
)ENGINE = INNODB; 
```

# iphone - 导航时标签栏隐藏

> ID：13581838
> 
> 赞同：1
> 
> 时间：2012-11-27T10:10:51.483
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

默认情况下，我的项目中有四个选项卡第一个选项卡被选中，这是家庭课程当用户通过选择任何选项卡导航到任何其他课程时，我必须检查那个时间，如果用户登录我的应用程序，那么他将导航到他的课程选择其他他移动到登录屏幕。

```
 if(appDelegate.sessionId==0)
            {

                Login *objLogin=[[[Login alloc] initWithNibName:@"Login" bundle:nil] autorelease];

                [self.navigationController pushViewController:objLogin animated:YES];

            }
            else 
            {
                CreatePoll *objLogin=[[[CreatePoll alloc] initWithNibName:@"CreatePoll" bundle:nil] autorelease];
                [self.navigationController pushViewController:objLogin animated:YES];

            } 
```

}

如果我导航到登录屏幕，我的标签栏被隐藏，当我调试代码时，我知道 Create Poll 类也在后台被调用，我检查此[链接](https://stackoverflow.com/questions/3544701/show-tab-bar-after-its-hidden)以显示隐藏但无法成功的标签栏。请帮助我，从过去 3 天开始，我一直在解决这个问题。在登录屏幕中看不到我的标签栏。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:15:09.390

只需在方法中编写此代码`viewWillAppear:`即可隐藏和显示`UITabBar`

```
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
[appDelegate.tabBarController.tabBar setHidden:NO]; 
```

**更新：**

将这些方法发布到`AppDelegate.m`文件中，当您想要显示和隐藏 Tabbar 时，创建 AppDelegate 对象并调用此方法

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    int height = 480;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];

    for(UIView *view in tabbarcontroller.view.subviews) {
        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, height, view.frame.size.width, view.frame.size.height)];
        } 
        else {
            [view setFrame:CGRectMake(view.frame.origin.x,view.frame.origin.y, 320, 436)];
        }
    }
    [UIView commitAnimations];
}

- (void) showTabBar:(UITabBarController *) tabbarcontroller {

    int height = 480;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3]; 

    for(UIView *view in tabbarcontroller.view.subviews) {

        if([view isKindOfClass:[UITabBar class]]) {
            [view setFrame:CGRectMake(view.frame.origin.x, height, view.frame.size.width, view.frame.size.height)];            
        } 
        else {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, height)];
        }
    }    

    [UIView commitAnimations];
} 
```

# php - Zend 中的慢 Postgres 查询

> ID：13581840
> 
> 赞同：1
> 
> 时间：2012-11-27T10:10:57.603
> 
> 标签：php, performance, zend-framework, postgresql

最近我问是否有某种方法可以让我的查询执行得更快（主题：[Zend 中的慢 postgresql 查询](https://stackoverflow.com/questions/13474751/slow-postgresql-queries-in-zend)）。我摆脱了“描述”查询，这导致了 20-30% 的提升。但我的查询仍然太慢。

```
class Application_Model_DbTable_Images extends Zend_Db_Table_Abstract
{
    protected $_name = 'images';

    public function getImage($id)
    {
        $row = $this->fetchRow("id = $id");
        return $row;
    }
} 
```

我分析了我的应用程序并注意到单个 getImage() 调用持续大约 300 毫秒。但如果我调用它两次，那么第二次调用将持续大约 15 毫秒。我该怎么做才能使所有查询执行得这么快？

我也 100% 确定不再有描述查询 - 我检查了数据库查询日志，所有查询看起来都很完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:18:04.747

听起来它只是缓存。第一次它必须从磁盘读取信息，第二次它已经在 RAM 中。

300ms 获取行是否合理 - 你通过 psql 得到什么？

如果您想了解数据库的性能，您至少需要掌握以下基本知识：

1.  您正在运行什么硬件，尤其是磁盘 I/O 和寻道时间
2.  您的查询计划（通过[EXPLAIN](http://www.postgresql.org/docs/9.2/static/using-explain.html)）
3.  在查询中移动了多少数据
4.  知道您的数据库是否变得臃肿（如果配置得当， [autovaccum](http://www.postgresql.org/docs/9.2/static/routine-vacuuming.html)应该可以防止这种情况发生）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:01:47.123

数据库本身会影响性能，调用代码也会如此。您可能想比较在 ZF 中构建查询的不同方法，看看是否有任何区别。

当前的：

```
class Application_Model_DbTable_Images extends Zend_Db_Table_Abstract
{
    protected $_name = 'images';

    public function getImage($id)
    {
        $row = $this->fetchRow("id = $id");
        return $row;
    }
} 
```

尝试：

```
class Application_Model_DbTable_Images extends Zend_Db_Table_Abstract
{
    protected $_name = 'images';

    public function getImage($id)
    {
        $select = $this->select()->where('id = ?', $id);//try using the select(), ZF will anyway
        $row = $this->fetchRow($select);
        return $row;
    }
} 
```

或者：

类 Application_Model_DbTable_Images 扩展 Zend_Db_Table_Abstract { protected $_name = 'images';

```
public function getImage($id)
{
    $select = $this->select()->where('id = ?', $id);
    $row = $this->fetchAll($select);//maybe a different fetch will have an effect
    return $row;
} 
```

}

这里有几个构建查询的不同方法的示例（还有更多），它们可能对您的性能有所帮助，也可能无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T12:29:26.937

我所要做的就是启用与我的数据库的持久连接。[此处](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html#zend.db.adapter.closing)提供了有关如何执行此操作的说明。

我不确定它是否安全或有效，但现在我的查询在 20 毫秒而不是数百毫秒内执行。

# php - PHP：如何将无穷大或 NaN 数字编码为 JSON？

> ID：13581843
> 
> 赞同：19
> 
> 时间：2012-11-27T10:11:00.780
> 
> 标签：php, json, nan, infinity

显然，infinity 和 NaN 不是 JSON 规范的一部分，所以这个 PHP 代码：

```
$numbers = array();
$numbers ['positive_infinity'] = +INF;
$numbers ['negative_infinity'] = -INF;
$numbers ['not_a_number'] = NAN;
$array_print = print_r ($numbers, true);
$array_json = json_encode ($numbers);
echo "\nprint_r(): $array_print";
echo "\njson_encode(): $array_json"; 
```

产生这个：

```
PHP Warning:  json_encode(): double INF does not conform to the JSON spec, encoded as 0 in /home/septi/test.php on line 8
PHP Warning:  json_encode(): double -INF does not conform to the JSON spec, encoded as 0 in /home/septi/test.php on line 8
PHP Warning:  json_encode(): double NAN does not conform to the JSON spec, encoded as 0 in /home/septi/test.php on line 8

print_r(): Array
(
    [positive_infinity] => INF
    [negative_infinity] => -INF
    [not_a_number] => NAN
)

json_encode(): {"positive_infinity":0,"negative_infinity":0,"not_a_number":0} 
```

有没有办法在不编写我自己的`json_encode()`函数的情况下正确编码这些数字？也许一些解决方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T10:19:44.217

您对[JSON 规范](http://www.ietf.org/rfc/rfc4627.txt)是正确的：

> 不允许使用不能表示为数字序列的数值（例如 Infinity 和 NaN）。

解决方案还必须来自规范，因为自定义“JSON”编码器无论如何都不会产生有效的 JSON（您还必须编写自定义解码器，然后您和数据的消费者将被迫使用它，直到时间结束）。

这是规范允许的值：

> JSON 值必须是对象、数组、数字或字符串，或以下三个文字名称之一：
> 
> ```
> false null true 
> ```

因此，任何涉及合法 JSON 而不是自定义的类 JSON 协议的解决方法都将涉及使用其他东西而不是数字。

一种合理的选择是使用字符串`"Infinity"`并`"NaN"`用于这些边缘情况。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T10:20:11.413

根据 JSON 规范，没有 Infinity 或 NaN 值：http: [//json.org/](http://json.org/)

解决方法：

1.  拒绝使用 JSON（纯 JSON），并编写您自己的 json_encode 函数，该函数将处理 INF/NAN（分别转换为“Infinity”和“NaN”），并确保您`result = eval('(' + json + ')');`在客户端使用类似的东西解析 JSON。

2.  将您的 IFN/NAN 值预先转换为字符串值（'Infinity' 和 'NaN'），当您要在 JavaScript 中使用这些值时，请使用以下构造：`var number1 = (+numbers.positive_infinity);`. 这会将字符串值“Infinity”转换为数字`Infinity`表示。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-31T14:04:32.380

在我看来，这是 JSON 的一大缺点。不同的 JSON 编码器处理这个不同，可以在这里找到一个快速的概述：http: //lavag.org/topic/16217-cr-json-labview/?p= [99058](http://lavag.org/topic/16217-cr-json-labview/?p=99058)

一种解决方案是将 +inf 编码为 +1e9999，因为在大多数解码器中它自然会溢出到 +inf，而 -inf 与 -1e9999 相同。NaN 更难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-26T14:35:17.217

作为对较新版本的 PHP >= 5.5.0 的此问题读者的更新，要从中获取`INF`或`NAN`值`json_encode`被编码为`0`而不是根本`json_encode`无法输出，请添加[JSON_PARTIAL_OUTPUT_ON_ERROR](http://php.net/manual/en/json.constants.php) 选项。

举个例子：`json_encode($data, JSON_NUMERIC_CHECK | JSON_PARTIAL_OUTPUT_ON_ERROR);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-26T07:00:28.253

上面提到的警告，php文档中报告了官方错误。

[https://bugs.php.net/bug.php?id=64695](https://bugs.php.net/bug.php?id=64695)

# mysql - 交替 MySQLdb 导入错误

> ID：13581845
> 
> 赞同：1
> 
> 时间：2012-11-27T10:11:07.910
> 
> 标签：mysql, linux, cluster-computing, sungridengine

我们正在使用 SGE 集群。我不时收到以下错误。当我在不同的输入文件上一次多次运行相同的脚本（使用集群）时，就会发生这种情况。你知道是什么原因造成的吗？如果我再次运行它，我将不会收到此错误...

```
 Traceback (most recent call last):
  File "/groups/pupko/mosheein/pupkoSVN/trunk/scripts/ploiDB/buildGeneraTree.py", line 10, in <module>
    import MySQLdb
  File "build/bdist.linux-x86_64/egg/MySQLdb/__init__.py", line 19, in <module>
  File "build/bdist.linux-x86_64/egg/_mysql.py", line 7, in <module>
  File "build/bdist.linux-x86_64/egg/_mysql.py", line 6, in __bootstrap__
ImportError: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory 
```

# maven - cargo-maven2-plugin 在执行集成测试之前不等待 jboss as7 启动

> ID：13581848
> 
> 赞同：3
> 
> 时间：2012-11-27T10:11:17.120
> 
> 标签：maven, jboss7.x, maven-cargo, maven-failsafe-plugin

我无法获得成功的 Maven pom.xml 配置来启动 JBoss AS 7、部署战争工件，并让它等到工件成功部署后再开始运行集成测试。

我已经咨询过了...

*   [http://navinpeiris.com/tag/jboss-as-7/](http://navinpeiris.com/tag/jboss-as-7/)
*   [http://cargo.codehaus.org/Maven2+Plugin+Reference+Guide#Maven2PluginReferenceGuide-deployer](http://cargo.codehaus.org/Maven2+Plugin+Reference+Guide#Maven2PluginReferenceGuide-deployer)

我想使用已安装（和预配置）的 JBoss AS 7 容器。我不想让它一直运行。我想启动它，运行一些测试，然后关闭它。

我的环境：

*   cargo-maven2-plugin 1.3.1
*   jboss-as-7.1.1.Final
*   maven-failsafe-plugin 2.12.4

这是我的`Failsafe`配置...

```
 <plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>${maven-failsafe-plugin.version}</version>
            <configuration>
                <forkMode>once</forkMode>
                <argLine>-javaagent:"${settings.localRepository}/org/springframework/spring-instrument/${spring.framework.version}/spring-instrument-${spring.framework.version}.jar"</argLine>
                <useSystemClassLoader>true</useSystemClassLoader>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>integration-test</goal>
                        <!-- Uncomment the line below if you want the build to fail when any integration test fails -->
                        <!-- <goal>verify</goal> -->
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

这是我的`Cargo`配置...

```
 <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <version>${cargo-maven2-plugin.version}</version>
                    <configuration>
                        <container>
                            <containerId>jboss71x</containerId>
                            <type>installed</type>
                            <home>${jboss71x.home}</home>
                            <output>${project.build.directory}/jboss71x/container.log</output>
                            <append>false</append>
                            <log>${project.build.directory}/jboss71x/cargo.log</log>
                        </container>
                        <configuration>
                            <type>standalone</type>
                            <home>${project.build.directory}/jboss71x/container</home>
                            <properties>
                                <cargo.jboss.configuration>default</cargo.jboss.configuration>
                                <cargo.rmi.port>1099</cargo.rmi.port>
                                <cargo.jvmargs>${servlet.container.jvmargs}</cargo.jvmargs>
                                <cargo.logging>high</cargo.logging>
                                <cargo.servlet.port>8080</cargo.servlet.port>
                            </properties>
                        </configuration>
                        <deployer>
                            <type>installed</type>
                            <deployables>
                                <deployable>
                                    <groupId>${project.groupId}</groupId>
                                    <artifactId>${project.artifactId}</artifactId>
                                    <type>war</type>
                                    <properties>
                                        <context>/ws</context>
                                    </properties>
                                    <pingURL>http://localhost:8080/ws/services</pingURL>
                                    <pingTimeout>30000</pingTimeout>
                                </deployable>
                            </deployables>
                        </deployer>
                    </configuration>
                    <!-- http://navinpeiris.com/2011/08/22/running-integrationacceptance-tests-in-jboss-7-using-cargo/ -->
                    <executions>
                        <execution>
                            <id>start-container</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                <goal>start</goal>
                                <goal>deploy</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>stop-container</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                <goal>stop</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 
```

当我想手动启动容器时，上面的配置效果很好`mvn clean package cargo:run`。但是在使用`mvn clean integration-test`.

提示？欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:59:27.980

**上面的配置确实有效！**

我不得不重新启动我的 shell，然后重新构建我的项目。我确实在容器的启动和停止时收到了弃用警告，但这是一个小问题。

```
[INFO] Building war: D:\workspaces\alstom-grid\Projects\SPP\SPP-MUI\spp-im-mui-ws\target\spp-im-mui-ws-1.0-SNAPSHOT.war
[INFO]
[INFO] --- cargo-maven2-plugin:1.3.1:start (start-container) @ spp-im-mui-ws ---
[WARNING] The <deployables> element under the <deployer> element is deprecated. Please use <deployables> under the plugin <configuration> instead.
[WARNING] The <deployables> element under the <deployer> element is deprecated. Please use <deployables> under the plugin <configuration> instead.
[WARNING] The <deployables> element under the <deployer> element is deprecated. Please use <deployables> under the plugin <configuration> instead.
[INFO]
[INFO] --- maven-failsafe-plugin:2.12.4:integration-test (default) @ spp-im-mui-ws ---
[INFO] Failsafe report directory: D:\workspaces\alstom-grid\Projects\SPP\SPP-MUI\spp-im-mui-ws\target\failsafe-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.spp.im.mui.jaxws.client.test.VirtualWebServiceClientITCase
Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.032 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 1

[INFO]
[INFO] --- cargo-maven2-plugin:1.3.1:stop (stop-container) @ spp-im-mui-ws ---
[WARNING] The <deployables> element under the <deployer> element is deprecated. Please use <deployables> under the plugin <configuration> instead.
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ spp-im-mui-ws ---
[INFO] Installing D:\workspaces\alstom-grid\Projects\SPP\SPP-MUI\spp-im-mui-ws\target\spp-im-mui-ws-1.0-SNAPSHOT.war to C:\.m2\repository\org\spp\im\mui\spp-im-mui-ws\1.0-SNAPSHOT\spp-im-mui-ws-1.0-SNAPSHOT.war

[INFO] Installing D:\workspaces\alstom-grid\Projects\SPP\SPP-MUI\spp-im-mui-ws\pom.xml to C:\.m2\repository\org\spp\im\mui\spp-im-mui-ws\1.0-SNAPSHOT\spp-im-mui-ws-1.0-SNAPSHOT.pom

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1:16.016s
[INFO] Finished at: Wed Nov 28 11:51:39 PST 2012
[INFO] Final Memory: 14M/256M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T11:46:26.177

由于我遇到了同样的问题，我想添加一些解释，这需要什么才能工作。

注意可部署部分中的 ping 属性。Cargo 将在继续之前重复调用给定的 URL 以获取可用性，但仅在达到超时之前。

```
 <deployable>
   <groupId>${project.groupId}</groupId>
   <artifactId>${project.artifactId}</artifactId>
   <type>war</type>
   <properties>
     <context>/example-app</context>
   </properties>
   <pingURL>http://localhost:8080/example-app/ping</pingURL>
   <pingTimeout>30000</pingTimeout>
 </deployable> 
```

要使您的应用程序可 ping，您必须提供一个 ping 端点。您可以将 JAX-RS 与 RestEasy 一起使用以轻松实现。

```
@Path("/ping")
public class PingResourceImpl {

    @GET
    @PermitAll // optional. Is needed if you protected your ressources f.e. with a SecurityInterceptor.
    public Response ping() {
        return Response.ok().build();
    }
} 
```

确保正确配置 servlet 映射。

```
<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/ping</url-pattern>
</servlet-mapping> 
```

# php - 区分更新和插入查询

> ID：13581849
> 
> 赞同：0
> 
> 时间：2012-11-27T10:11:17.883
> 
> 标签：php, mysql, sql

我有一个包含 3 列的页面，前 2 列有表格，而第三列显示信息。

每当调用页面时，对应于第一个表单的信息已经存在，但是第二个表单可以用于插入新数据或更新现有数据。

我目前拥有的代码：

```
<?php
require_once 'connect.php';
$formType = $_POST['formType'];
$id = $_POST['id'];
$favColor= $_POST['favColor'];
$favFood= $_POST['favFood'];
$country = $_POST['country'];

if($_POST['formType'] == 'guestCosts'){
$sth = $dbh->prepare("INSERT INTO info (id, favColor, favFood, country)
VALUES ('$id', '$favColor', '$favFood', '$country')");
$sth->execute();

}elseif($_POST['formType'] == 'guestCosts'){
$sth = $dbh->prepare("UPDATE info SET favColor = '$favColor', favFood = '$favFood', country = '$country' WHERE id = '$id'");
$sth->execute();
}
$dbh =null;
?> 
```

我遇到的问题是，我现在看到了区分何时应该执行 UPDATE 和何时应该执行 INSERT 的方法。

生成表单的页面执行查询以使用数据库中的值填充表单。如果特定 id 的数据库为空，我想添加一个隐藏字段，例如：

```
<input type = "hidden" name ="action" value="insert" /> 
```

但是我不确定在页面之间传递变量是最有效的方法。有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:17:55.780

看看 MySQL INSERT ON DUPLICATE KEY UPDATE

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# php - 更改数组格式

> ID：13581852
> 
> 赞同：0
> 
> 时间：2012-11-27T10:11:28.990
> 
> 标签：php, html, arrays

从我的 SOAP 服务中，我如何更改从这个肥皂服务中获得的数据：

```
Array
(
    [NE] => 42616324457
    [EMAIL] => bertho_joris@yahoo.co.id
    [TIPE] => POSTPAID
    [NAMA] => ALBERTHO
    [TELP] => 0812345678
    [DN] => 127272748174
    [STATUS_LOGIN] => 1
    [DESC_LOGIN] => Valid
) 
```

成为这样的形式：

```
Array
(
     [0] => stdClass Object
         (
            [id] => 1
            [NE] => 42616324457
            [EMAIL] => bertho_joris@yahoo.co.id
            [TIPE] => POSTPAID
            [NAMA] => ALBERTHO
            [TELP] => 0812345678
            [DN] => 127272748174
            [STATUS_LOGIN] => 1
            [DESC_LOGIN] => Valid
            [PASSWORD] => malaquena
         )

  ) 
```

我的 SOAP 服务代码：

```
<?php
require_once('lib/nusoap.php');

$Email     = $_GET['email'];
$Password   = $_GET['pass'];

 $client = new nusoap_client('http://vcare.telkomvision.net.id/services/VcareServices.php');
$BacaSOAP = $client->call('validateLogin', array('EMAIL' => $Email, 'PASSWORD' => md5($Password)));
?> 
```

请帮我更改数组的格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:17:44.833

只需转换为对象：

```
$array = array('A' => 0, 'B' => 1);
$array = array((object)$array);
print_r($array); 
```

结果：

```
Array (
    [0] => stdClass Object (
         [A] => 0
         [B] => 1
     )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:14:47.743

创建一个标准类

```
$data = array(
    'ne' => 1231232,
    'email' => 'asdasdsda'
);

$object = new stdClass();
foreach($data as $key => $value) {
    $object->$key = $value;
}
print_r($object); 
```

# c# - 从 lambda 表达式中提取属性名称和可为空的值

> ID：13581854
> 
> 赞同：0
> 
> 时间：2012-11-27T10:11:31.597
> 
> 标签：c#, lambda, expression-trees, nullable

我正在使用 lambda 表达式，需要提取属性名称和值：

```
 public MyMapping(Expression<Func<TEntity, int?>> expression)
    {
        this.expression = expression;

        if (this.expression != null)
        {
            if (expression.Body is MemberExpression)
            {
                this.expressionMemberName = ((MemberExpression)expression.Body).Member.Name;
            }
            else
            {
                var op = ((UnaryExpression)expression.Body).Operand;
                this.expressionMemberName = ((MemberExpression)op).Member.Name;
            }          
        }
    } 
```

表达式设置如下：

```
this.MyProperty(m => m.NumberOfDays.Value); 
```

我想要以下内容：

```
 var propertyName = this.expressionMemberName;

 var value = this.expression.Compile()(instance); 
```

因为我的属性可以为空，所以当它尝试编译表达式时会出现异常。此外，propertyName 设置为“Value”而不是 NumberOfDays。

我将如何获取这些数据并让表达式进行编译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T18:35:42.827

有关从表达式中提取属性名称的信息，请参阅这篇文章（[从 lambda 表达式中检索属性名称）。](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression/)另请参阅嵌套/子属性的[这个陷阱](https://stackoverflow.com/a/17220748/1037948)`Thing1.Thing2`，即来自`o => o.Thing1.Thing2`.

# python - Python 性能随着内存使用量的增加而降低

> ID：13581857
> 
> 赞同：1
> 
> 时间：2012-11-27T10:11:35.437
> 
> 标签：python, performance, python-imaging-library

我有以下函数将图像转换为哈希值列表（使用 PIL）：

```
def _GetImageHash(image):
  st = time.time()
  image_list = list(image.getdata())
  (columns, rows) = image.size
  hash_vals = [0]*rows
  for i in xrange(0,rows):
    hash_vals[i] = hash(tuple(image_list[i*columns:(i+1)*columns]))
  print "_GetImageHash time taken: ", time.time() - st
  return hash_vals, image_list 
```

在另一个函数中，我对许多图像文件调用此方法，并存储结果列表。但是，我观察到此函数计算哈希值所需的时间会随着每次调用而显着增加。如果我更改调用的顺序，它不会改变观察到的行为（所有图像的大小相同，因此该函数计算散列值所需的时间应该没有显着差异）。事实上，如果我这样做：

```
image1_hash, image1_list = _GetImageHash(image1)
image2_hash, image2_list = _GetImageHash(image1)
image3_hash, image3_list = _GetImageHash(image1)
image4_hash, image4_list = _GetImageHash(image1)
image5_hash, image5_list = _GetImageHash(image1) ... 
```

报道的时间是这样的：

```
_GetImageHash time taken:  0.672996044159
_GetImageHash time taken:  1.40435290337
_GetImageHash time taken:  2.10946083069
_GetImageHash time taken:  2.84965205193
_GetImageHash time taken:  3.57753205299
_GetImageHash time taken:  4.71754598618
_GetImageHash time taken:  5.10348200798
_GetImageHash time taken:  5.83603620529
_GetImageHash time taken:  6.57408809662
_GetImageHash time taken:  7.30649399757
_GetImageHash time taken:  7.26073002815
_GetImageHash time taken:  7.94218182564 
```

似乎发生这种情况是因为我正在存储列表。但是为什么性能会因为这里的内存使用而受到影响呢？可以做些什么来解决这个问题，以便内存使用不会对时间性能产生如此巨大的影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:05:49.233

您可以尝试禁用垃圾收集器，

```
import gc
gc.disable()

#your code

gc.enable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:37:55.690

我不知道您的图像有多大，但如果您认为这是内存问题，我会先检查进程使用了​​多少内存。您可以在线查找配方以在进程中调用（例如[此处](https://stackoverflow.com/questions/938733/total-memory-used-by-python-process)），或者仅在操作系统的进程监视器中跟踪内存使用情况。

如果是内存使用，我要做的第一件事就是用更紧凑的东西替换列表版本 image_list。Numpy 数组将是理想的，但即使是标准库模块[数组](http://docs.python.org/2/library/array.html)也应该有所帮助。

我说应该，因为如果 image_list 中的值都是小整数（低于大约 256），那么 Python 使用的是更小、更紧凑的存储，而不是重新分配这些整数。它正在重新分配列表中的指针以保存它们。如果您让数组保存 4 (8) 个字节值，那么这将与 32 (64) 位系统上的列表使用的指针大小相同。没用过PIL，所以对pil.Image.getdata的返回不熟悉。

# android - 警报对话时间过短

> ID：13581858
> 
> 赞同：0
> 
> 时间：2012-11-27T10:11:36.387
> 
> 标签：android, alert, android-alertdialog, period

我有一个警报对话框，当用户单击设备上的后退按钮时会调用该对话框，但此警报太短，用户无法读取其中的任何内容或对其执行任何操作..

```
AlertDialog alertDialog = new AlertDialog.Builder(birthDate.this).create();
                    // Setting Dialog Title
                    alertDialog.setTitle("Alert Dialog");
                    // Setting Dialog Message
                    alertDialog.setMessage("Welcome to AndroidHive.info");
                    // Setting OK Button
                    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                    // Write your code here to execute after dialog closed
                    Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_LONG).show();
                    } 
```

***我想让这个警报对话框的时间更长***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:15:26.140

我认为您正在调用 alertdialog 并且`finish()`两者都在同一时间。尝试在警报对话框中完成活动

```
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                // Write your code here to execute after dialog closed
                Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_LONG).show();
                finish();// here calling finish if user click ok button.
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:38:19.577

我的回答是指您的观点**我想让这个警报对话框的时间更长**

```
long time=System.currentTimeMillis();
Show Dialog 
```

当再次关闭对话框时**，**您需要的时间也是`long time2=System.currentTimeMillis();`如此`time2-time1`

**更新**

您是说 AlertDialog 在设备的后按按钮上关闭，然后使**AlertDialog**可取消为假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:19:38.890

我假设您在这里询问`Toast`单击警报对话框按钮时显示的内容。您可以通过增加`Toast`出现的持续时间来做到这一点。只需替换`Toast.LENGTH_LONG`为您想要的任何持续时间（以毫秒为单位）。

前任。

```
Toast.makeText(getApplicationContext(), "You clicked on OK", 5000).show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T10:52:01.097

试试下面的代码。这将为您提供足够的时间来显示警报对话框。我给3000作为参数给了3秒，你可以根据你的要求改变。

```
 @Override
public void onBackPressed() {
    AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(this);
    AlertDialog alertDialog = dialogBuilder.create();
    alertDialog.setTitle("Title of your message!");
    alertDialog.setMessage("Your message to user");
    alertDialog.show();

    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            MainActivity.super.onBackPressed();
        }
    }, 3000);

} 
```

# java - Java中具有复杂逻辑的EnumSet

> ID：13581862
> 
> 赞同：1
> 
> 时间：2012-11-27T10:11:40.780
> 
> 标签：java, oop, validation, enums

假设我有一个枚举：

```
enum EnumDemo{
 A1,
 A2,
 A3,

 B1,
 B2,
 B3,

 C1,
 C2,
 C3
} 
```

我应该使用什么方法来创建可以包含多个 EnumDemo 元素的枚举集，但所有元素都应该来自一个组，例如：

{A1, B2, C1}, {B1, C2}，但不是 {A1, A3, B1, C1}

任何想法表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:14:10.913

您可以使用该`EnumSet.of`方法生成集合，这将是最简单和最易读的：

```
 Set<EnumDemo> setA = EnumSet.of(EnumDemo.A1, EnumDemo.A2, EnumDemo.A3);
 Set<EnumDemo> setB = EnumSet.of(EnumDemo.B1, EnumDemo.B2, EnumDemo.B3);
 Set<EnumDemo> setB = EnumSet.of(EnumDemo.C1, EnumDemo.C2, EnumDemo.C3); 
```

从那里您可以使用`Collections`并集或差异来生成您想要的不同集。

如果您希望避免遇到`A1`可以将 an 添加到已经包含的集合中的问题，`A2`您必须使用逻辑 OR 自己处理这个问题，方法是创建三个仅包含其各自成员的不同 Enum 类型 ( `EnumA`, `EnumB`, )。`EnumC`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:17:21.743

您可以保留其所属组的每个枚举元素 id。并基于此 id 创建枚举组：

```
enum EnumDemo{
 A1(0),
 A2(0),
 A3(0),

 B1(1),
 B2(1),
 B3(1),

 C1(2),
 C2(2),
 C3(2);

 private int groupId;

 private EnumDemo(int groupId) {
   this.groupId = groupId;
 }

 public static Set<EnumDemo> getGroup(int groupId) {
    Set<EnumDemo> group = EnumSet.noneOf(EnumDemo.class);
    for (EnumDemo value : values()) {
      if (value.groupId == groupId) {
        group.add(value);
      }
    }
    return group;
 }
} 
```

如果组是静态的并且不随时间变化，这种方法很好。您也可以创建 enum like`Group`并使用它而不是 int 作为 id。您也可以在您的应用程序中动态更改`groupId`元素，但我不确定这是一个好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:58:39.663

将它们分成不同的`enum`类型怎么样？

```
public interface EnumDemo {
}

enum AEnumDemo implements EnumDemo { A1, A2, A3 }
enum BEnumDemo implements EnumDemo { B1, B2, B3 }
enum CEnumDemo implements EnumDemo { C1, C2, C3 } 
```

然后，您可以将`EnumSet<? extends EnumDemo>`其用作您的集合的类型。

```
EnumSet<? extends EnumDemo> demos1 = EnumSet.allOf(AEnumDemo.class);
EnumSet<? extends EnumDemo> demos2 = EnumSet.allOf(BEnumDemo.class);
EnumSet<? extends EnumDemo> demos3 = EnumSet.of(AEnumDemo.A1, AEnumDemo.A3);
EnumSet<? extends EnumDemo> demos4 = EnumSet.of(BEnumDemo.B1, BEnumDemo.B2, BEnumDemo.B3);
EnumSet<? extends EnumDemo> demos5 = EnumSet.of(AEnumDemo.A1, BEnumDemo.B2);        // compile error 
```

# mysql - 具有循环功能的经典 ASP 电子邮件通知

> ID：13581864
> 
> 赞同：0
> 
> 时间：2012-11-27T10:11:47.477
> 
> 标签：mysql, asp-classic

我将不胜感激这方面的任何帮助。情景；

我有一个包含以下示例记录的数据库表；

```
data1-------------dt2----data3------data4--------data5------data6  
Brewing Plant-----2------10000------11/3/2012----1136-------person1@yahoo.com  
Brewing Plant-----2------10000------11/3/2012----1136-------person1@yahoo.com  
Car Plant---------1------5000-------11/3/2012----568--------person1@yahoo.com  
Brewing Plant-----1------5000-------11/3/2012----568--------person2@yahoo.com  
Car Plant---------4------20000------11/3/2012----2272-------person2@yahoo.com  
Brewing Plant-----3------15000------11/3/2012----1704-------person3@yahoo.com 
```

这是我的要求：
我只想将一封通知电子邮件发送给这些不同的人及其信息。如果您注意到，在将电子邮件发送给每个人之前会进行一些汇总，例如；

Person1 应该会收到一封类似的电子邮件

```
Data1-----------dt2---data5  
Brewing Plant---4-----2272  
Car Plant-------1-----568 
```

而 Person2 应该会收到一封类似的电子邮件

```
Data1-----------dt2---data5  
Brewing Plant---1-----568  
Car Plant-------4-----2272 
```

等等。

我正在使用经典的 ASP 和 mySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:25:54.193

您只需要按人对表进行分组并[`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)酌情使用聚合：

```
SELECT   data6, data1, SUM(dt2), SUM(data5)
FROM     my_table
GROUP BY data6, data1
ORDER BY data6 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/0dca4/1/0)上查看。

然后在您的应用程序代码中循环遍历结果集，跟踪`data6`与上次看到的记录不同的时间。

# c++ - clang 的 libc++ 产品准备好了吗？

> ID：13581868
> 
> 赞同：5
> 
> 时间：2012-11-27T10:12:02.847
> 
> 标签：c++, clang, libc++

有没有人`libc++`在生产中使用clang有过积极的经验？[http://libcxx.llvm.org/libcxx_by_chapter.pdf](http://libcxx.llvm.org/libcxx_by_chapter.pdf)的状态图对我来说不是很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:29:25.860

我在 Mac OS 上使用它已经有一段时间了，从来没有遇到过任何问题。当您在 Mac OS 上创建新的 Xcode 项目时，它实际上是默认设置，据我所知，这是在 Mac 上执行 C++11 的唯一（合理）方式，因为 Apple 可能不会进一步更新 libstd++。

虽然我不能代表 Linux / Windows，但从未尝试过。

你应该记住的是它是侵入性的，这意味着如果你想在你的项目中使用它，你也必须链接任何依赖库。在您的情况下，这可能是也可能不是问题。

编辑：有关侵入性的详细信息，请参阅[此问题](https://stackoverflow.com/questions/8454329/why-cant-clang-with-libc-in-c0x-mode-link-this-boostprogram-options-examp)。

# php - 如何传递动态变量？

> ID：13581886
> 
> 赞同：-2
> 
> 时间：2012-11-27T10:13:04.023
> 
> 标签：php

我对此进行了研究，找不到我想要的东西。

```
class headerStyle{
 // now  creating our CONSTRUCTOR function
 function __construct($args=array()) {
     $this->fields = array('background','color','fontSize','backgroundUrl','imagePosition','Width','Height','backgroundSize','margin','padding','backgroundRepeat');
      foreach ($this->fields as $field) {
                $this->{"$field"} = $args["$field"];
                 }
         }
}

$style = new headerStyle(
       array(
         background =>"#DEDEDC",
         color=>"#F5F3F4",
         fontSize=>"24px",
         backgroundUrl=>"_images/bodyBg1.jpg",
         backgroundSize=>"50% 50%",
         padding=>"10px 0px 0px 0px",
         margin=>"0px 0px 0px 0px",
         width=>"100%",
         height=>"60px",
         imagePosition=>"top-left",
            )
); 
```

我需要传递一个动态变量，而不是给出一个值，例如 background=>$_post['headerBg'];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:15:55.490

您快到了。PHP 中的 POST 数组可以使用`$_POST['headerBg'];`（注意它是大写的）来访问。

```
class headerStyle{
 // now  creating our CONSTRUCTOR function
 function __construct($args=array()) {
     $this->fields = array('background','color','fontSize','backgroundUrl','imagePosition','Width','Height','backgroundSize','margin','padding','backgroundRepeat');
      foreach ($this->fields as $field) {
                $this->{"$field"} = $args["$field"];
                 }
         }
}

$style = new headerStyle(
       array(
         background =>$_POST['headerBg'],
         color=>"#F5F3F4",
         fontSize=>"24px",
         backgroundUrl=>"_images/bodyBg1.jpg",
         backgroundSize=>"50% 50%",
         padding=>"10px 0px 0px 0px",
         margin=>"0px 0px 0px 0px",
         width=>"100%",
         height=>"60px",
         imagePosition=>"top-left",
            )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:23:27.583

你的数组设置是错误的，它有数字键，你想要一个关联数组。定义默认值，然后使用[`array_merge()`](http://php.net/manual/en/function.array-merge.php)设置的任何元素覆盖默认值：

```
function __construct($args=array()) {
     $defaults = array('background' => '', 'color' => '', 'fontSize' => '', 'backgroundUrl' => '', 'imagePosition' => '', 'Width' => '', 'Height' => '', 'backgroundSize' => '', 'margin' => '', 'padding' => '', 'backgroundRepeat' => '');

     $this->fields = array_merge($defaults, $args);
} 
```

可以通过对元素进行硬编码或从以下方式获取，就像您尝试的那样使用它`$_POST`：

```
$style = new headerStyle(
   array(
     background =>'',
     color=>"#F5F3F4",
     fontSize=>"24px")
); 
```

# oracle - 使用 wlst 更改 mbean 中的属性。

> ID：13581889
> 
> 赞同：3
> 
> 时间：2012-11-27T10:13:26.013
> 
> 标签：oracle, weblogic, jmx, wlst, osb

我正在使用 Oracle Service Bus，我想创建一个脚本来更改特定 mbean 中的属性。

我找到了mbean：

```
com.bea:Name=OperationsConfig,
Location=AdminServer,
Type=com.bea.wli.sb.management.configuration.operations.OperationsConfigMBean 
```

我想改变的属性是`DomainSLAAlertingEnabled`

谁能帮助我了解如何使用 wlst（weblogic 脚本工具）更改此 mbean 中的属性？

我如何导航到此 mbean，然后如何更改它？

`DomainSLAAlertingEnabled`是布尔值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:21:39.823

这是一个[很好的**教程**](http://togotutor.com/blog/soa/soa-audit-level-setting-wlst/)，展示了**如何使用 WSLT**配置各种 Weblogic mbean。

本质上，您需要：

1.  **连接**到管理员：例如`__connectToAdmin(properties)`
2.  **检索 Mbean**：例如

    ```
    SOAInfraConfigobj = ObjectName(soaconfigmbean+’:Location=’+locationinfo+’,
                         name=’+appname+’, type=SoaInfraConfig,Application=’+appname) 
    ```

3.  **设置所需的属性**：

    `mbs.setAttribute(SOAInfraConfigobj, Attribute(auditlevel,auditlevelvalue))`

当然，您需要将值修改为您的特定 MBean 和特定属性。

# php - 左连接 - 连接表双重结果

> ID：13581891
> 
> 赞同：0
> 
> 时间：2012-11-27T10:13:33.167
> 
> 标签：php, mysql

这是我的两个左连接查询（试图加入 bcompany - 带 bpoint 的主表，错误）：

```
SELECT cName, sName, uNaslov FROM bcompany c LEFT JOIN bpoint p ON c.companyID = p.companyID LEFT JOIN bug b ON c.companyID = b.companyID WHERE c.companyID='$cID' 
```

第一个表`bcompany`是主表，并且**总是有一个**结果行。

两个表都`bpoint`通过列关联`bug`。这两个表**不一定有**任何记录。`bcompany``companyID`

 **我的问题是这两个连接表的结果加倍。我可以理解主表的多个结果，但不能理解连接的两个结果。

*表结构：*

**公司：**

```
companyID |       cName         |
---------------------------------
    1     | Mladi Tehnik d.o.o. | 
```

**点：**

```
pointID |      sName          | companyID |
-------------------------------------------
   1    |    Mladi Tehnik     |     1     |
   2    |    Pizzerija 5ka    |     1     |
   3    |    Gostilna Kekec   |     1     |
   4    |    Blejski tehnik   |     1     | 
```

**漏洞：**

```
bugID | uNaslov       | companyID |
-----------------------------------
  1   |  Testna 1     |     1     |
  2   |  Testna 2     |     1     |
  3   |  Mickino kolo |     1     | 
```

结果示例：

```
bcompany:
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.
Mladi Tehnik d.o.o.

bpoint:
Mladi Tehnik
Mladi Tehnik
Mladi Tehnik
Pizzerija 5ka
Pizzerija 5ka
Pizzerija 5ka
Gostilna Kekec
Gostilna Kekec
Gostilna Kekec
Blejski Tehnik
Blejski Tehnik
Blejski Tehnik

bug:
Testna 1
Testna 2
Mickino kolo
Testna 1
Testna 2
Mickino kolo
Testna 1
Testna 2
Mickino kolo
Testna 1
Testna 2
Mickino kolo 
```

我想要的结果（每个现有结果只有一次）：

```
bcompany:
Mladi Tehnik d.o.o.

bpoint:
Mladi Tehnik
Pizzerija 5ka
Gostilna Kekec
Blejski Tehnik

bug:
Testna 1
Testna 2
Mickino kolo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:16:21.427

结果没问题。如果`bpoint`列中只有一个条目，则结果将不一致，因为有一个*“Mladi Tehnik doo”*带有*“Mladi Tehnik”*，而完全相同的一个没有`bpoint`条目。**

# webdeploy - 我发布的 Web 配置中出现不需要的连接字符串的问题

> ID：13581892
> 
> 赞同：0
> 
> 时间：2012-11-27T10:13:35.220
> 
> 标签：webdeploy

我一直在使用 VS 2012 测试新的 Web 部署工具，但我遇到了这个问题：

我将这个额外的连接字符串添加到我已发布的 Web 配置中，而我的项目 Web 配置中目前没有。

```
 <add name="name" connectionString="name_ConnectionString" providerName="System.Data.SqlClient" /> 
```

这可能来自哪里？似乎是我过去使用过的 conn 字符串的遗物。

希望这能解释我的问题：0）感谢您的帮助

量子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:50:39.410

它必须来自 web.config 文件之一。

您是否检查过是否应用了对 web.config 的转换。检查 web.release.config、web.debug.config 文件以检查连接字符串是否仍然存在。

# java - 领域驱动设计 - 可测试性和“新”关键字

> ID：13581897
> 
> 赞同：3
> 
> 时间：2012-11-27T10:14:08.047
> 
> 标签：java, spring, unit-testing, domain-driven-design

我一直在尝试在我的新项目中遵循领域驱动的设计方法。我一直通常使用 Spring 进行依赖注入，它很好地将我的应用程序代码与构造代码分开，但是，使用 DDD，我似乎总是有一个域对象想要创建另一个域对象，它们都有状态和行为。

例如，给定一个媒体文件，我们希望将其编码为不同的格式——媒体资产调用转码服务并接收回调：

```
class MediaAsset implements TranscodingResultListener {

    private NetworkLocation permanentStorage;
    private Transcoder transcoder;

    public void transcodeTo(Format format){
        transcoder.transcode(this,format);
    }

    public void onSuccessfulTranscode(TranscodeResult result){
        Rendition rendition = new Rendition(this, result.getPath(), result.getFormat());
        rendition.moveTo(permanentStorage);
    }

} 
```

这引发了两个问题：

*   如果再现需要一些依赖项（例如 MediaAsset 需要“转码器”）并且我想使用 Spring 之类的东西来注入它们，那么我必须使用 AOP 才能让我的程序运行，这是我不喜欢的。
*   如果我想要一个 MediaAsset 的单元测试来测试新格式是否移动到临时存储，那么我该怎么做？我无法模拟再现类来验证它是否调用了它的方法......将创建真正的再现类。

有一个工厂来创建这个类是我考虑过的，但是仅仅包含导致问题的“new”关键字就需要很多代码开销。

这里有没有我错过的方法，或者我只是做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:01:07.667

我认为在这种情况下注入 RenditionFactory 是正确的方法。我知道这需要额外的工作，但你也从你的班级中删除了违反 SRP 的内容。在业务逻辑中构造对象通常很诱人，但我的经验是注入对象或对象工厂在 100 次中会获得 99 次的回报。特别是如果提到的对象很复杂，和/或如果它与系统资源交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:56:38.197

我假设您的单元测试方法是单独测试`MediaAsset`。这样做，我认为工厂是常见的解决方案。

另一种方法是测试整个系统（或几乎整个系统）。让您的测试访问外部接口[1]（用户界面、Web 服务接口等），并为系统访问的所有外部系统（数据库、文件系统、外部服务等）创建测试替身。然后让测试注入这些外部依赖。

这样做，您可以让测试全部与行为有关。测试与实现细节分离。例如，您可以对`Rendition`或不使用依赖注入：测试不在乎。此外，您可能会发现`MediaAsset`and`Rendition`不是正确的概念[2]，您可能需要将其分成`MediaAsset`两部分并将其中的一半与`Rendition`. 同样，您可以做到这一点而不必担心测试。

（免责声明：在外层进行测试并不总是有效。有时您需要测试常见的概念，这需要您编写微测试。然后您可能会再次遇到这个问题。）

[1] 最好的级别实际上可能是“域界面”，在用户界面下方的级别，您可以在其中使用域语言而不是字符串和整数，并且可以在其中讨论域操作而不是按钮单击和焦点事件。

[2] 也许这实际上是您的问题：是`MediaAsset`和`Rendition`正确的概念吗？如果你问你的领域专家，他知道这些是什么吗？如果没有，你真的在​​做 DDD 吗？

# java - 如何解决 FATAL：非超级用户超出连接限制

> ID：13581901
> 
> 赞同：12
> 
> 时间：2012-11-27T10:14:25.903
> 
> 标签：java, postgresql

我写了一个用于批量插入的java代码。我正在使用复制命令为不同的表导入和创建不同的连接对象，但是在执行时，程序抛出以下错误：

```
FATAL: connection limit exceeded for non-superusers 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T12:19:06.580

您已超出 PostgreSQL 服务器的连接限制。有一些为超级用户保留的连接。

要增加连接限制，您必须更改 postgresql.conf（默认为 100），它位于您的 PostgreSQL 数据目录中。

```
cat postgresql.conf | grep max_connection max_connections = 100
        # (change requires restart)
# Note:  Increasing max_connections costs ~400 bytes of shared memory per
# max_locks_per_transaction * (max_connections + max_prepared_transactions) 
```

增加限制并重新启动 PostgreSQL 实例。

警告：增加连接限制会影响内存。

尝试在应用程序或数据库层使用连接池优化连接。在 PostgreSQL 上，您可以使用[Pgpool2](http://www.pgpool.net/mediawiki/index.php/Main_Page)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T10:17:41.697

你在使用连接池吗？检查您的代码中的连接是否正确关闭。这应该在 try-finally 块中完成：

```
Connection connection = dataSource.getConnection();
try {
    ....
}
finally {
    connection.close();
} 
```

如果您确实需要大量连接，请相应地在 postres 中设置 max_connections-property。

[文档](http://www.postgresql.org/docs/8.2/static/runtime-config-connection.html)

# java - 如何在 Liferay 中清除我的布局缓存

> ID：13581908
> 
> 赞同：0
> 
> 时间：2012-11-27T10:14:40.903
> 
> 标签：java, caching, layout, liferay

我的 Liferay 缓存有问题。

**场景：** 我正在读取一个 XML 文件并使用 Liferay API 将布局导入我的 Liferay DB。

***布局的typeSettings***列中存储了大量数据。

**问题：** 当我导入大约 5000 个布局时，我得到一个**OutofMemoryException**。我发现保留最多的堆空间是**EhCache 对象**。（它拥有带有我巨大排版的 LayoutCacheModel）

每次布局导入后清除缓存是个好主意吗？

如果是这样，我如何清除特定于布局的缓存。（我正在使用**Liferay 6.0**）

谢谢，

西比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:22:28.703

在查看刷新 ehcache 之前（最好不要在每次导入后而是在每几百次之后进行），查看您拥有的 JVM 设置并考虑增加分配给运行门户的 JVM 的最大堆大小。例如 -Xms1024m -Xmx1024m -XX:MaxPermSize=128m

此外，您应该查看[Liferay 的](http://www.liferay.com/documentation/liferay-portal/6.0/administration/-/ai/performance-tuni-4)网站以调整门户的性能（尽管我不确定您使用的是哪个版本）。

鉴于您已经配置了 JVM 设置，您可以查看在 X 加载后刷新 ehcache（我仍然建议您在 >1 次加载后刷新它，而不是永远加载）。您可以`CacheManager`使用以下方法处理并刷新它：

```
CacheManager manager = CacheManager.getInstance();
manager.removalAll(); 
```

我自己从未在 Liferay 中这样做过，但我认为它可能仍然有一些好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:42:27.090

您还可以配置缓存大小，而不是完全清空缓存。监视 JMX 数据以确定您的实际缓存有多大，并根据您的需要采用。缓存配置的一些文档是[https://www.liferay.com/community/wiki/-/wiki/Main/ehCache+Configuration](https://www.liferay.com/community/wiki/-/wiki/Main/ehCache+Configuration)和[https://www.liferay.com/web/guest/community/wiki/-/ wiki/Main/Liferay+Caching+%28EhCache%29](https://www.liferay.com/web/guest/community/wiki/-/wiki/Main/Liferay+Caching+%28EhCache%29) - 我希望在用户指南中提供更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:09:22.960

*与@ramsinb*给出的答案类似，我能够使用以下代码清除缓存：

**LayoutPersistenceImpl.java**

```
public void clearCache() {
    if (_HIBERNATE_CACHE_USE_SECOND_LEVEL_CACHE) {
        CacheRegistryUtil.clear(LayoutImpl.class.getName());
    }

    EntityCacheUtil.clearCache(LayoutImpl.class.getName());
    FinderCacheUtil.clearCache(FINDER_CLASS_NAME_ENTITY);
    FinderCacheUtil.clearCache(FINDER_CLASS_NAME_LIST);
} 
```

我不得不手动复制此代码，因为它不能作为服务使用。

# javascript - IE 中的 $.getJSON $.each 仅在刷新后才能正常工作

> ID：13581909
> 
> 赞同：0
> 
> 时间：2012-11-27T10:14:42.400
> 
> 标签：javascript, jquery, json

我正在使用 javascript 输出图像，在 FF 和 Chrome 中一切正常，但在 IE 中，只有在您第一次加载页面时才会附加第一张图像，只有在刷新页面后才会附加所有图像。

用于输出图像的 Javascript：

```
 $.getJSON("php/v.php?"+Math.random(),function(data){              
                $.each(data,function(l){
                        if(data[l]['s']==1){                
                             $("#img"+(l+1)).append("<img src='"+data[l]['img']+"' />");
                        }                   
                    });
        }); 
```

来自 v.php 的 IE9 开发工具响应：

```
[{"img":"https:\/\/www.example.com\/example.jpg","s":"1"},{"img":"https:\/\/www.example.com\/example.jpg","s":"1"},{"img":"https:\/\/www.example.com\/example.jpg","s":"1"}] 
```

所以问题应该是由每个元素而不是getJSON引起的。在stackoverflow上发现了许多类似的问题，但没有类似的问题（http://stackoverflow.com/questions/7785138/each-method-only-applies-to-first-element-in-ie,http://stackoverflow.com/questions /4664190/javascript-each-loop-over-json-only-getting-first-element) 但在我的情况下，问题也出现在 IE9 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:22:14.380

您的 JSON 中有语法错误。第二个 URL 有两个结束的 " 引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:32:41.923

我认为您可以首先在本地浏览器中进行调试，如下所示：

```
var data= [{},{},{}];//your data

$.each(data,function(l){
    if(data[l]['s']==1){                
        $("#img"+(l+1)).append("<img src='"+data[l]['img']+"' />");
    }                   
});

//and this way
for(var i=0,l=data.length; i<l; i++){
    if(data[l]['s']==1){                
        $("#img"+(l+1)).append("<img src='"+data[l]['img']+"' />");
    } 
}

//and the third way
for(var i=0,l=data.length; i<l; i++){
    if(data[l]['s']==1){
        var img = new Image();
        img.onload = function(){
            var id = '#img'+(l+1);
            $(id).append(this);
        }
        img.src = data[l]['img'];
    } 
} 
```

# python - 行继续字符python之后的语法错误意外字符

> ID：13581916
> 
> 赞同：2
> 
> 时间：2012-11-27T10:15:02.260
> 
> 标签：python, character, syntax-error

我的代码是，

```
import MySQLdb
import collections
from pymongo import Connection

from config.MySQLdb import *
from config.MongoDB import *
from config.SyncTables import *

db = MySQLdb.connect(DB_HOST,DB_USR,DB_PWD,DB_NAME)
cursor = db.cursor()
query = "SELECT * FROM table_name WHERE userid = 1"
cursor.execute(query)
row = cursor.fetchall()

mconn = Connection(MONGODB_HOST,MONGODB_PORT)
mdb = mconn[MONGODB_DBNAME]
#col = mdb[trngl_advertiser_agegroup]

db.trngl_advertiser_agegroup .insert({'id': row[0],'userid':row[1], 'ageid':row[2],       'age_value':row[3], \                                             'created':row[4],  'modified':row[5]})
print "after update" 
```

但我收到了这个错误，

```
triongle@triongle.com [~/download/DataInsertionScript]# python IngestDataToMongo.py

  File "IngestDataToMongo.py", line 21
    db.table_name.insert({'id': row[0],'userid':row[1], 'ageid':row[2],  'age_value':row[3],\                                                       'created':row[4], 'modified':row[5]})
                                                                                                                                                                                               ^

SyntaxError: unexpected character after line continuation character 
```

但是之后我没有看到任何意想不到的角色。所以请告诉我，为什么我会收到这个错误

错误图像是， ![在此处输入图像描述](../Images/cde8b6c1967fad51341d14b0b468a16d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:17:58.203

您的代码都在一行上，但您使用的是续行转义字符 ( `\`)。删除该字符：

```
db.trngl_advertiser_agegroup .insert({'id': row[0],'userid':row[1], 'ageid':row[2], 'age_value':row[3], 'created':row[4],  'modified':row[5]}) 
```

当您在括号或方括号内换行时，您根本不需要使用这样的续行技巧，您可以安全地将语句放在多行没有*它*：

```
db.trngl_advertiser_agegroup .insert({
    'id': row[0],
    'userid':row[1], 
    'ageid':row[2], 
    'age_value':row[3],
    'created':row[4],
    'modified':row[5]
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:22:47.390

[]、{} 或 () 中不需要换行符。**如果您想不使用\**，请随意将参数放在多行中

# perl - 为什么不推荐使用`MooseX::Traits::apply_traits()`？

> ID：13581919
> 
> 赞同：2
> 
> 时间：2012-11-27T10:15:05.927
> 
> 标签：perl, moose

这个问题专门针对[MooseX::Traits](https://metacpan.org/module/MooseX%3a%3aTraits)。该方法`apply_traits`已被弃用，并给出如下警告消息：

```
apply_traits is deprecated due to being fundamentally broken. 
disable this warning with "no warnings 'MooseX::Traits'" 
```

谁能解释为什么它“从根本上坏了”？它通过了自己对该方法的测试，并且适用于我正在尝试做的事情。是因为它使用`Moose::Meta::Role::apply()`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T20:30:22.007

我不能告诉你你想知道什么，但我会建议你找到另一种方法来做你想做的事，只是为了节省你更多的工作。

我试图在生产中使用它，但它一直对 Moose 的其他部分造成问题，直到我再次将其撕掉。我忘记了具体细节，但最终与当时 Moose 背后的主要人物之一交谈，他无法提供帮助。

显然，情况并没有好转。我会听从警告。

只是一点建议，对不起，我无法回答你的问题。

# jquery - ScrollToFixed 在到达页脚时不会停止

> ID：13581922
> 
> 赞同：0
> 
> 时间：2012-11-27T10:15:16.190
> 
> 标签：jquery, scroll, scrollto, vertical-scrolling

我正在使用 ScrollToFixed 插件，它的文档可以在这里找到：[https ://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

基本上，我允许我的结帐保持在右侧，以允许用户在进入购物篮将遵循的页面时输入详细信息。但是，一旦您单击提交卡详细信息，就会使事情变得困难，会打开一个小的圣人支付表单，这会导致问题，因为它没有将页脚向下推，而是直接通过它。

```
$(document).ready(function () {
$('#reviewbasket').scrollToFixed({
marginTop:20

});

});​ 
```

有谁知道如何防止这种情况？

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:55:40.597

看看这个[http://jsfiddle.net/ZczEt/167/](http://jsfiddle.net/ZczEt/167/) 在你的情况下使用这个：

```
limit: $('.footer').offset().top - $('#reviewbasket').outerHeight(), 
```

# android - “没有这样的文件或目录”试图在 Android 设备上执行 linux 二进制文件

> ID：13581927
> 
> 赞同：28
> 
> 时间：2012-11-27T10:15:34.893
> 
> 标签：android, linux, native

我使用 Android GCC 工具链（普通 linux，没有 android 或 NDK）构建了一个原生 linux ARM 二进制文件。

我通过 adb shell 从我的 PC 连接到运行 Android 4 的平板电脑。我将该二进制文件“adb push”到该设备上的 /system/bin 中，希望我能让它在那里执行。我用 chmod 777 将它标记为可执行。

如果我尝试执行它，我会得到“没有这样的文件或目录”。

更多信息：这个小程序使用 fc 和 fm 库。由于 ARM 工具链似乎没有 crt1，从我发现的示例中，它通常包含启动代码，我们在 android 构建中搜索包含它的文件，找到 crtbegin_dynamic 和 crtend_dynamic，但对于 _static 等效项，其中之一丢失了，所以我没有将 -static 传递给 GCC。它是用“-nostdlib”构建的。

可能是什么问题？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-13T04:53:45.243

如果您在 Ubuntu 64 等 64 位平台上工作，那么此技巧可能会帮助您解决问题。只需尝试简单地使用 apt-get 安装 i386 32 位兼容性库：

```
sudo apt-get install ia32-libs 
```

它对我很有用。如果您遇到同样的麻烦，请告诉我。

**对于 Ubuntu 13.10 或更高版本**

正如 aditya 在对此答案的评论中所说：

从 Ubuntu 13.10 开始，现在必须运行： `sudo apt-get install lib32z1`，您可能还需要获取 C++ 标准库，使用以下命令：`sudo apt-get install lib32ncurses5 lib32stdc++6`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-28T19:05:28.310

要修改上面的 aditya 评论，您还可以在 Ubuntu 13.10 中对 C++ 标准库使用以下内容：

```
sudo apt-get install lib32ncurses5 libstdc++6:i386 
```

# oracle - PL/SQL oracle，使用日期和时间的测试窗口

> ID：13581928
> 
> 赞同：0
> 
> 时间：2012-11-27T10:15:35.113
> 
> 标签：oracle, debugging, plsql

我有一个返回日期的函数（实际是时间戳，日期+时间）。在表格中，它看起来像这样，“2010-09-05 17:33:00”。当我从 sql 脚本调用我的函数时，

```
select my_package.my_function('2010-09-05') 
  from dual. 
```

我会在结果中得到时间。

但是如果我在测试窗口中运行相同的程序，我只会收到日期而不是时间。

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:17:25.597

您正在看到 NLS_DATE_FORMAT 设置的效果。根据需要设置。例如：

```
alter session set NLS_DATE_FORMAT="yyyy-mm-dd hh24:mi:ss";
select my_package.my_function('2010-09-05') from dual; 
```

正确查看输出。

或 TO_CHAR 输出。

```
select to_char(my_package.my_function('2010-09-05'), 'yyyy-mm-dd hh24:mi:ss') from dual; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:19:19.293

测试窗口是什么意思？

如果您的意思是 SQL+，那么将应用一种格式，您可以使用

```
alter session set nls_date_format='DD/MM/YYYY HH24:MI:SS'; 
```

在 SQL+ 会话开始时执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T08:07:25.013

当我简单地写**ALTER** .... 然后我在程序中工作时出错。但是，我在下面添加了脚本，它对我有用。

```
execute immediate 'ALTER SESSION SET NLS_DATE_FORMAT = ''DD/MM/YYYY HH24:MI:SS'''; 
```

# php - 如何在 Drupal 联系我们页面上添加其他文本？

> ID：13581929
> 
> 赞同：0
> 
> 时间：2012-11-27T10:15:37.470
> 
> 标签：php, drupal, contact

我有一个基本的 drupal 站点，我的客户要求在联系表格的顶部放置一些信息，例如：电话、电子邮件和一个小描述。我想弄清楚该怎么做？我在 Drupal 管理员中看不到我们可以在联系我们页面中添加一些文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:10:59.143

`page--contact.tpl.php`您可以覆盖在您的主题中实现的默认联系人模板。

更多信息：[http ://drupal.org/node/1089656](http://drupal.org/node/1089656)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:17:36.770

您可以通过 /admin/build/contact/settings 的设置页面在联系表单上方添加文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:32:03.090

另一种选择是块。您可以创建一个自定义块，放入您的文本，并让它只显示在联系页面上。虽然，根据您的主题中定义的区域，最终您可能会将信息置于联系页面标题上方或表单下方。

# javascript - JSON从php解析javascript中的数据

> ID：13581931
> 
> 赞同：3
> 
> 时间：2012-11-27T10:15:41.777
> 
> 标签：javascript, php, json, parsing

我正在尝试使用 json 从 php 文件中检索 javascript 文件中的数据。

```
$items = array(); 
while($r = mysql_fetch_array($result)) { 
    $rows = array( 
        "id_locale" => $r['id_locale'], 
        "latitudine" => $r['lat'], 
        "longitudine" => $r['lng'] 
    ); 
    array_push($items, array("item" => $rows)); 
} 
ECHO json_encode($items); 
```

在 javascript 文件中，我尝试使用 ajax 调用来恢复数据：

```
$.ajax({
    type:"POST",
    url:"Locali.php",
    success:function(data){
        alert("1");
        //var obj = jQuery.parseJSON(idata);
        var json = JSON.parse(data);
        alert("2");
        for (var i=0; i<json.length; i++) {
            point = new google.maps.LatLng(json[i].item.latitudine,json[i].item.longitudine);
            alert(point);
        }
    }
}) 
```

打印了第一个警报，后者没有，它给了我错误：Unexpected token <.... 但我不明白它是什么。

有人知道我在哪里错了吗？

我也尝试用 jquery 恢复数据，但没有积极的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:26:27.087

这应该这样做。

```
$.post("Locali.php",{
    // any parameters you want to pass
},function(d){
    alert("1");
    for (var i=0; i<d.length; i++) {
      point = new google.maps.LatLng(d[i].item.latitudine,d[i].item.longitudine);
      alert(point);
    }
}, 'json'); 
```

如果它给出您上面提到的响应，PHP 很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:26:41.640

数据 $.ajax({ type:"POST", dataType: json, url:"Locali.php", success:function(data){ for (i in data) { point = new google.maps.LatLng(json[i ].item.latitudine,json[i].item.longitudine); 警报(点);
} } })

试试这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:27:26.280

稍作修改应该没问题：

```
$items = array(); 
while($r = mysql_fetch_array($result)) { 
    $items[] = array( 
        "id_locale" => $r['id_locale'], 
        "latitudine" => $r['lat'], 
        "longitudine" => $r['lng'] 
    ); 
} 
echo json_encode($items); 
```

和 jQuery：

```
$.ajax({
    type:"POST",
    dataType: 'json',
    url:"Locali.php",
    success:function(data){
        console.log(data);
        for (var i=0; i<data.length; i++) {
            point = new google.maps.LatLng(data[i].item.latitudine,data[i].item.longitudine);
            alert(point);
        }
    }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:36:17.997

我认为你应该更多地寻找你从 php 文件中获得的数据。绝对这是一个解析错误，并且必须缺少一些括号/其他内容，最终不会使返回的数据成为 json 可解析字符串。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-27T10:27:55.793

是的，试试

```
for (var i=0; i<json[0].length; i++) { 
```

因为你在那里有一个对象..

# android - Android潜在的并行读/写问题

> ID：13581932
> 
> 赞同：0
> 
> 时间：2012-11-27T10:15:43.027
> 
> 标签：android

Android 文档指出“您的应用程序中的一个活动可能会被实例化多次”。现在让我们假设：

*   我使用 onStart() 将状态保存在永久存储中
*   我使用 onStop() 从永久存储中加载状态

现在让我们假设我有 2 个主要活动实例（inst1 和 inst2），并且我有以下调用序列：

1.  inst1.onStart()
2.  inst2.onStart()
3.  inst1.onStop()
4.  inst2.onStop()
5.  inst1.onStart()

那么，这意味着实例#1 最终会加载实例#2 的状态。

这是一种可能的情况吗？如果是，如何避免这种情况？

**编辑**：实际上，看起来这种情况是不可能的，因为您不可能同时在“运行”状态下拥有相同活动的 2 个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:49:05.340

如果“永久存储”是指共享首选项或文件，那么可以。否则，如果您正在使用`onSaveInstanceState`，则不会。正如方法名称所说，它是一个实例机制。从[文档](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)：

*“调用以在被杀死之前从活动中检索**每个实例**的状态，以便可以在 onCreate(Bundle) 或 onRestoreInstanceState(Bundle) 中恢复状态（此方法填充的 Bundle 将传递给两者）*
。...
*默认实现负责处理**每个实例**状态的大部分 UI ”*

# c++ - 累积 (&name[0], &name[length]) 给出错误 cannot convert parameter 1 from 'char *' to 'const int *'

> ID：13581938
> 
> 赞同：1
> 
> 时间：2012-11-27T10:15:56.940
> 
> 标签：c++, templates

```
#include <iostream>

template <typename T>
inline
T accum (T const* beg, T const* end)
{
    T total = T();  // assume T() actually creates a zero value
    while (beg != end) {
        total += *beg;
        ++beg;
    }
    return total;
}

int main() 
{ 

// create array of 5 integer values 
int num[]={1,2,3,4,5}; 

// print average value 
std::cout << "the average value of the integer values is " 
          << accum(&num[0], &num[5]) / 5 
          << '\n'; 

// create array of character values 
char name[] = "templates"; 
int length = sizeof(name)-1; 

// (try to) print average character value 
std::cout << "the average value of the characters in \"" 
          << name << "\" is " 
          << accum(&name[0], &name[length]) / length 
          //<< accum<int>(&name[0], &name[length]) / length //but this give me error
          << '\n'; 
} 
```

我正在阅读 c++ 模板：完整的指南，作者提到我可以使用模板专业化
`accum<int>(&name[0], &name[length]) / length`
我在 Visual Studio 2012 中尝试这个并得到错误
main.cpp(34): error C2664: 'accum' : cannot convert parameter 1 from ' char *' to 'const int *'
我的 C++ 有点生疏了。
我只是好奇，如果这种“行为”以前允许，但“最新”C++ 标准发生了变化，使其非法，或者这是我正在阅读的书中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:21:03.537

实例化是`int accum<int> (int const* beg, int const* end)`，您不能将`char *`参数传递给此函数。

未注释行起作用的原因是它实例化了`accum<char>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:21:55.550

该行`accum<int>(&name[0], &name[length])`尝试调用使用`int accumt(const int*, const int*)`类型参数声明的函数`char*, char*`。编译器的抱怨是对的：C++ 从不允许隐式转换`char*`为`int*`. 如果书上是这么说的，那就有错误了。

# c - NDIS 挂钩 sendPacketsHandler

> ID：13581939
> 
> 赞同：1
> 
> 时间：2012-11-27T10:15:59.077
> 
> 标签：c, hook, wdk, ndis, wdm

我使用`NdisRegisterProtocol()`注册了一个协议驱动，并使用`_NDIS_OPEN_BLOCK`和`_NDIS_PROTOCOL_BLOCK`结构hook`ReceivePacketHandler`成功，使用MyRecivePacket()代替NDIS接收数据包的功能，当我打开一个网站，`MyRecievePacket()`就会运行。

我的问题是：当我使用打开一个网站（如`www.stackoverflow.com`）时`IE`，我怎样才能挂钩`SendPacketsHandler`来获取这个数据包并获取 url`www.stackoverflow.com`字符串。换句话说，如何在内核模式下捕获 url。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:00:17.457

首先，我还不清楚你想做什么......我的主要疑问：

*   ¿您是在注册一个协议驱动程序，还是挂钩`ReceivePacketHandler`一个先前存在的驱动程序？这真的很不一样。

我假设您的目标只是拦截 URL，而不是挂钩现有的协议驱动程序。正如@icepack 评论的那样，使用 procol 驱动程序并不是*“简单的方法”，*因为您应该跟踪所有 TCP 连接以提取 HTTP 内容。

但是，如果您必须使用 NDIS，您应该检查 DDK 的 PassThru 示例 [1] 或 NDIS 过滤器驱动程序 [2] 示例，并实现解析 TCP 协议和 HTTP 标头的必要逻辑。

如果 NDIS 不是强制性的，则可以使用更简单的技术，例如使用 TDI（已弃用但仍可使用 [3]）或 WFP 驱动程序 [4] 来拦截比 TCP 堆栈更高级别的通信。

[1] [http://code.msdn.microsoft.com/windowshardware/NDISLWFSYS-Sample-NDIS-60-42b76875](http://code.msdn.microsoft.com/windowshardware/NDISLWFSYS-Sample-NDIS-60-42b76875)

[2] [http://msdn.microsoft.com/en-us/library/windows/hardware/ff565501(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565501(v=vs.85).aspx)

[3] [http://technet.microsoft.com/en-us/library/cc939977.aspx](http://technet.microsoft.com/en-us/library/cc939977.aspx)

[4] [http://msdn.microsoft.com/en-us/library/windows/hardware/gg463267.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463267.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:20:15.667

这不是您通常应该做的事情，`URL`数据属于网络堆栈的应用程序层，不应被驻留在内核空间中的较低层访问。在此处查看更多关于 Windows 网络架构中的协议驱动程序分层的信息：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff571073 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff571073(v=vs.85).aspx)

但是，可以通过删除在到达协议驱动程序的过程中添加到数据包中的标头来通过位于其顶部的协议（例如`HTTP`,`TCP`等）`IP`来实现。您需要知道应用于您的协议的确切协议到您的协议驱动程序的途中的数据包。标头是增量添加的，对于每个底层，来自上层的输入是一个不透明的数据块（由上层数据和标头组成）。例如，您的数据包可能以纯数据`HTTP`开始，在开始时添加`TCP`标头，之后添加标头，然后再添加标`IP`头。您需要以相反的顺序删除标题以恢复原始数据。

请注意，这并不总是可行的，因为向下传输的协议可能会更改数据，例如通过对其进行加密。在这种情况下，您将无法通过执行反向操作（例如解密）来提取原始数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:44:21.397

有一些称为[深度包检测 (DPI)](http://en.wikipedia.org/wiki/Deep_packet_inspection)的工具和技术用于在丰富的应用程序层上解包传输的数据包，还有一些像 openDPI 这样的库，甚至可以在内核领域使用来跟踪数据包的内容。

当您可以将网络数据包解包到应用程序层时，您可以更改其内容。你应该得到奖励，捕获和解包抛出你的 NIC 的每个数据包并不容易。

# html - 操作元素背景

> ID：13581942
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:16:02.823
> 
> 标签：html, image, css

当您在 div 中有图像时，请说：

```
<div class="reflection">
<img src="example" alt="" />
</div> 
```

您只能使用引用特定元素`.reflection img { // do stuff here }`

我只想引用`background:`一个 CSS 元素，因为我正在使用模板，并且所有图像都使用 CSS 而不是 HTML 显示，如下所示：

```
.exampleClass { background: url("path here") no-repeat scroll 0 0 transparent; } 
```

如何在 CSS 中引用该类的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:18:24.067

只需创建它自己的类..

**HTML**

```
<div class="reflection background">
<img src="example" alt="" /> 
```

**CSS**

```
.background { background: url("path here") no-repeat scroll 0 0 transparent; } 
```

`.background`该类可以提供给您想要拥有背景的任何元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:18:48.823

只需使用`.reflection {}`和操作背景。它是一个 CSS 属性 ( `background`)，因此您可以在最初定义后更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:18:52.833

只需添加 2 个类。IE：

```
<div class="reflection defaultBackground">
    <img src="example" alt="" />
</div> 
```

然后，您可以在 .reflection img 和 .defaultBackground img 上设置样式。

# json - 通过 ajax 发送 konckoutjs ViewModel 作为数据

> ID：13581943
> 
> 赞同：1
> 
> 时间：2012-11-27T10:16:03.243
> 
> 标签：json, model, knockout.js

用我使用以下 ViewModel 的数据填充搜索表单：

```
 function AppViewModel() {
    var self = this;
    self.Countries =[{"id": "1","name": "Russia"},{"id": "2","name": "Qatar"}];
    self.selectedCountryId =ko.observable();      
 } 
```

我需要用于填充 dropdwonlist 的国家/地区列表。当用户填写表格并点击“发送”时，我需要提交数据，但我不需要发送国家列表！（仅 SelectedCountryId）

```
var vm=new AppViewModel();
ko.applyBindings(vm);

$('button').click(function(){

  console.log(ko.mapping.toJSON(vm));

}); 
```

有没有办法摆脱国家列表而不构建新的 ViewModel 来发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:17:44.853

Observables 就像普通函数一样，所以你只需要从外部调用它。

```
function AppViewModel() {
    var self = this;
    self.Countries =[{"id": "1","name": "Russia"},{"id": "2","name": "Qatar"}];
    self.selectedCountryId = ko.observable('1');      
}

$(function() {
    var vm = new AppViewModel();
    ko.applyBindings(vm);

    $('button').click(function(){
      console.log(vm.selectedCountryId()); // plain
      console.log(ko.toJSON(vm.selectedCountryId())); // json
    });
}); 
```

​</p>

[http://jsfiddle.net/DiegoVieira/6kZMj/4/](http://jsfiddle.net/DiegoVieira/6kZMj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:34:39.270

请查看我为您创建的这个演示[点击这里查看演示](http://jsfiddle.net/pkysylevych/dqUAz/)

**更新的演示[单击此处获取更新的演示](http://jsfiddle.net/pkysylevych/dqUAz/2/)**

**HTML 代码**

```
<select data-bind="options: countries, optionsText: 'name', optionsValue: 'id', value: selectedChoice, optionsCaption: 'Choose..'"></select>
<br/>
<label data-bind="text: selectedChoice"></label> 
```

**Javascript代码**

```
var CountryModel = function(data){
  var self = this;
  self.id = ko.observable(data.id);
  self.name = ko.observable(data.name);
};
var viewModel = function(data) {
  var self = this;
  self.selectedChoice = ko.observable();
  self.countries = ko.observableArray([
      new CountryModel({id: "1", name: "Russia"}),
      new CountryModel({id: "2", name: "Qatar"})]);
};

ko.applyBindings(new viewModel()); 
```

**开始更新**

**更新内容：**

**HTML 代码：**
在事件 Click 上添加按钮它调用`sendMe`返回 json 对象的函数`selectedCountryId`

```
<input type="button" data-bind="click: sendMe, enable: selectedChoice" Value="Click Me"/> 
```

**Javascript代码**

```
self.sendMe = function(){

    alert(ko.toJSON({ selectedCountryId: this.selectedChoice()}));
}; 
```

**END UPDATE**
**START UPDATE1**
这是最后一条评论的更新，关于避免添加模型，在这种情况下让我们跳过`CountryModel`
因此，**Javascript 代码**将如下：

```
var viewModel = function(data) {
   var self = this;
   self.selectedChoice = ko.observable();
   self.countries = ko.observableArray([
        {id: "1", name: "Russia"},
        {id: "2", name: "Qatar"}]);
    self.sendMe = function(){
        alert(ko.toJSON({ selectedCountryId: this.selectedChoice()}));
    };
};

ko.applyBindings(new viewModel()); 
```

**END UPDATE1**

希望对您有所帮助。
谢谢。

# regex - Apache .htaccess 删除尾部斜杠

> ID：13581944
> 
> 赞同：0
> 
> 时间：2012-11-27T10:16:04.710
> 
> 标签：regex, apache, .htaccess, mod-rewrite, apache2

好的，我已经用谷歌搜索了足够多的东西，找到了足够多的博客和足够多的关于这个主题的 SO 线程，但是这些解决方案都没有对我有用。

我已经创建了文件夹，因此可以通过以下 URL 访问它们：

*   [http://mysite.com/folder1/](http://mysite.com/folder1/)
*   [http://mysite.com/folder2/](http://mysite.com/folder2/)

我想做的就是通过以下方式使它们可以访问：

*   [http://mysite.com/folder1](http://mysite.com/folder1)
*   [http://mysite.com/folder2](http://mysite.com/folder2)

所以基本上，删除尾部斜杠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:26:23.847

确保您在 Apache 配置中**关闭**了[DirectorySlash 指令](http://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryslash)。

 ~~~~```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST}:%{SERVER_PORT}s ^(.*):(443(s)|\d+s)$
RewriteRule ^/?(.*)/$ http%3://%1/$1 [R=301,L,QSA] 
```~~  ~~```
RewriteEngine On
RewriteCond %{HTTP_COOKIE} !(?:^|;\s*)redirect=301
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST}:%{SERVER_PORT}s ^(.*):(443(s)|\d+s)$
RewriteRule ^/?(.*)/$ http%3://%1/$1 [R=301,L,QSA,CO=redirect:301:%1:0:/] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T10:24:54.313

您可以使用以下重写来删除尾部斜杠。

```
# remove trailing slashes
RewriteRule (.*)/$ $1 [L,R=301] 
```

您将需要启用 mod_rewrite。这可以放在 .htaccess 文件或 apache 配置中。~~~~

# c# - 监听 IEnumerable 时 BlockingCollection 的 Queue.Peek() 类比

> ID：13581945
> 
> 赞同：11
> 
> 时间：2012-11-27T10:16:07.510
> 
> 标签：c#, multithreading, wcf, .net-4.0, task-parallel-library

我正在使用[管道模式](http://msdn.microsoft.com/en-us/library/ff963548.aspx)实现将消息消费者与生产者分离，以避免消费缓慢的问题。

如果消息处理阶段出现任何异常，`[1]`它将丢失并且不会分派到其他服务/层`[2]`。我该如何处理这样的问题，`[3]`这样消息才不会丢失，什么是重要的！消息的顺序不会混淆，因此上层服务/层将按照它们进入的顺序获取消息。我有一个想法，它涉及另一个中间体`Queue`，但它看起来很复杂？不幸的是`BlockingCollection<T>`，没有公开任何类似的`Queue.Peek()`方法，所以我可以阅读下一条可用消息，并且在成功处理的情况下`Dequeue()`

```
private BlockingCollection<IMessage> messagesQueue;    

// TPL Task does following:
// Listen to new messages and as soon as any comes in - process it
foreach (var cachedMessage in 
             messagesQueue.GetConsumingEnumerable(cancellation))
{    
    const int maxRetries = 3;
    int retriesCounter = 0;
    bool isSent = false;

    // On this point a message already is removed from messagesQueue
    while (!isSent && retriesCounter++ <= maxRetries)
    {
        try
        {
           // [1] Preprocess a message
           // [2] Dispatch to an other service/layer    
           clientProxyCallback.SendMessage(cachedMessage);
           isSent = true;
        }                                
        catch(Exception exception)
        {
           // [3]   
           // logging
           if (!isSent && retriesCounter < maxRetries)
           {
              Thread.Sleep(NSeconds);
           }
        }            

        if (!isSent && retriesCounter == maxRetries)
        {
           // just log, message is lost on this stage!
        }
    }
} 
```

**编辑**：忘了说这是 IIS 托管的 WCF 服务，它通过客户端回调合同将消息发送回 Silverlight 客户端 WCF 代理。

**EDIT2：**下面是我将如何使用`Peek()`，我错过了什么吗？

```
bool successfullySent = true;
try
{
   var item = queue.Peek();
   PreProcessItem(item);
   SendItem(item);       
}
catch(Exception exception)
{
   successfullySent = false;
}
finally
{
   if (successfullySent)
   {
       // just remove already sent item from the queue
       queue.Dequeue();
   }
} 
```

**EDIT3：**我当然可以使用 while 循环、布尔标志`Queue`和的旧式方法`AutoResetEvent`，但我只是想知道是否可以使用相同的方法`BlockingCollection`，并且 `GetConsumingEnumerable()`我认为`Peek`在与消耗可枚举一起使用时，类似设施会非常有帮助，因为否则所有管道模式实现例如新的东西`BlockingCollection`，`GetConsumingEnumerable()`看起来不耐用，我必须回到旧的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T11:03:32.237

您应该考虑中间队列。

`BlockingCollection<T>`由于其性质，不能“偷看”物品 - 可以有多个消费者。其中一个可以*偷看*一个项目，另一个可以*拿走*它 - 因此，第一个将尝试拿走已经被拿走的项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T11:31:11.653

正如[丹尼斯](https://stackoverflow.com/a/13582679/659190)在他的评论中所说，为接口[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)的任何实现者提供了一个阻塞包装器[`IProducerConsumerCollection<T>`](http://msdn.microsoft.com/en-us/library/dd287147.aspx)。

如您所见，`IProducerConsumerCollection<T>`根据设计，没有定义`Peek<T>`实现方法所需的 a 或其他方法。这意味着，就目前而言`BlockingCollection<T>`，它不能提供对`Peek`.

如果您考虑一下，这将大大减少由实现的效用权衡产生的并发问题`Peek`。不消费怎么能消费？同时，您`Peek`必须锁定集合的头部，直到`Peek`操作完成，我和设计者`BlockingCollection<T>`认为这是次优的。我认为它也会很混乱且难以实施，需要某种一次性的 peek 上下文。

如果您消费一条消息并且它的消费失败，您将不得不处理它。您可以将其添加到另一个失败队列中，将其重新添加到正常处理队列中以供将来重试，或者仅记录其失败以供后代使用，或者其他适合您的上下文的操作。

如果您不想同时消费消息，则无需使用`BlockingCollection<T>`，因为您不需要并发消费。您可以[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)直接使用，您仍然可以获得添加的同步性，并且您可以[`TryPeek<T>`](http://msdn.microsoft.com/en-us/library/dd267308.aspx)安全地使用，因为您控制单个消费者。如果消费失败，您可以根据需要通过无限重试循环来停止消费，但我建议这需要一些设计思想。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-06T03:15:45.807

`BlockingCollection<T>`是 的包装器`IProducerConsumerCollection<T>`，它比 eg 更通用，`ConcurrentQueue`并为实现者提供了不必实现`(Try)Peek`方法的自由。

但是，您始终可以`TryPeek`直接调用底层队列：

```
ConcurrentQueue<T> useOnlyForPeeking = new ConcurrentQueue<T>();
BlockingCollection<T> blockingCollection = new BlockingCollection<T>(useOnlyForPeeking);
...
useOnlyForPeeking.TryPeek(...) 
```

但是请注意，**您不能通过 修改队列`useOnlyForPeeking`**，否则`blockingCollection`会感到困惑并可能会向您[抛出`InvalidOperationException`s](http://referencesource.microsoft.com/System/R/6b00be0930a56743.html)，但如果在此并发数据结构上调用非修改`TryPeek`会是一个问题，我会感到惊讶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:56:06.030

你可以**[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265%28v=vs.100%29.aspx)**改用，它有[`TryDequeue()`](http://msdn.microsoft.com/en-us/library/dd287208%28v=vs.100%29.aspx)方法。

> `ConcurrentQueue<T>.TryDequeue(out T result)`尝试**移除并返回**并发队列开头的对象，**如果一个元素被移除并**成功从 ConcurrentQueue 的开头返回，则返回 true。

因此，无需先检查 Peek。

`TryDequeue()`是线程安全的：

> `ConcurrentQueue<T>` **在内部处理所有同步**。如果两个线程同时调用 TryDequeue(T)，则不会阻塞任何操作。

据我了解**，仅当队列为空时它才返回 false**：

> 如果队列中填充了诸如 q.Enqueue("a"); 之类的代码。q.Enqueue("b"); q.Enqueue("c"); 并且两个线程同时尝试使一个元素出队，一个线程将 a 出队，另一个线程将 b 出队。对 TryDequeue(T) 的两次调用都将返回 true，因为它们都能够使元素出队。如果每个线程返回一个额外的元素出队，其中一个线程将出列 c 并返回 true，而另一个线程将发现队列为空并返回 false。

[http://msdn.microsoft.com/en-us/library/dd287208%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd287208%28v=vs.100%29.aspx)

**更新**

也许，最简单的选择是使用[`TaskScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler%28v=vs.100%29.aspx)Class。有了它，您可以将所有处理任务包装到队列的项目中，并简化同步的实现。

# java - card.io android-scan-demo 应用程序在 android 上崩溃

> ID：13581946
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:16:09.157
> 
> 标签：java, android, card.io

card.io 提供的演示应用程序在扫描卡片时在 Android 设备上快速单击两次后退按钮时崩溃。这是[一个链接](https://www.card.io/integrate/android)！附件是logcat....

```
11-27 13:53:59.149: D/AndroidRuntime(10401): Shutting down VM
11-27 13:53:59.149: W/dalvikvm(10401): threadid=1: thread exiting with uncaught exception (group=0x40a1d1f8)
11-27 13:53:59.149: E/AndroidRuntime(10401): FATAL EXCEPTION: main
11-27 13:53:59.149: E/AndroidRuntime(10401): java.lang.NullPointerException
11-27 13:53:59.149: E/AndroidRuntime(10401):    at io.card.payment.CardIOActivity.onBackPressed(Unknown Source)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.app.Activity.onKeyUp(Activity.java:2099)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.view.KeyEvent.dispatch(KeyEvent.java:2575)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.app.Activity.dispatchKeyEvent(Activity.java:2329)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3300)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2460)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.os.Looper.loop(Looper.java:137)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at android.app.ActivityThread.main(ActivityThread.java:4424)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at java.lang.reflect.Method.invokeNative(Native Method)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at java.lang.reflect.Method.invoke(Method.java:511)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
11-27 13:53:59.149: E/AndroidRuntime(10401):    at dalvik.system.NativeStart.main(Native Method)
11-27 13:58:50.739: I/Process(10401): Sending signal. PID: 10401 SIG: 9 
```

谁能给我一个解决方案来处理这个？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:09:29.687

card.io 的 SDK 版本 3.0.3 修复了这个问题。[在这里下载。](https://www.card.io/integrate/android)

# php - PHP 中的 XML 解析

> ID：13581947
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:16:13.563
> 
> 标签：php, xml, xml-parsing

我想解析来自这个提要的 XML 数据：http: [//finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote/](http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote/)

在格式

```
Name Price Symbol Volume 
```

请问有人可以提供代码吗？我不擅长使用 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:47:06.180

我尝试了它并使用以下代码使其工作：

```
$xmlUrl = "http://finance.yahoo.com/webservice/v1/symbols/allcurrencies/quote/";
$xmlStr = file_get_contents($xmlUrl);
$xmlObj = simplexml_load_string($xmlStr);
$resArr = $xmlObj->resources->resource;
$count = $resArr->count();

for ($i = 0; $i < $count; $i++) {
    $name   = (string) $resArr[$i]->field[0];
    $price  = (string) $resArr[$i]->field[1];
    $symbol = (string) $resArr[$i]->field[2];
    $volume = (string) $resArr[$i]->field[6];
    print_r("name: {$name}, price: {$price}, symbol: {$symbol}, volume: {$volume}<br />");
} 
```

我不喜欢按索引获取字段，但发现字段中的名称属性没有被考虑在内`simplexml`。

# sql - 在sql server中求和

> ID：13581948
> 
> 赞同：0
> 
> 时间：2012-11-27T10:16:20.570
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个带有这样的表“Bill”的数据库：

```
ID    |    Name    |    Money
1     |    A       |    100
2     |    B       |    150
3     |    C       |    200 
```

我想创建一个像这样返回数据的过程：

```
ID    |    Name    |    Money    |    Tax    |    Total
1     |    A       |    100      |    10     |    110
2     |    B       |    150      |    15     |    165
3     |    C       |    200      |    20     |    220 
```

含税=（金钱*10）/100

和总计 = 钱 + 税

我怎样才能做到这一点。我正在使用 sql server 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:18:57.353

您可以使用以下内容：

```
select id, name, money, (money*.10) as tax, (money*1.10) as Total
from Bill 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f84ca/1)

结果：

```
| ID | NAME | MONEY | TAX | TOTAL |
-----------------------------------
|  1 |    A |   100 |  10 |   110 |
|  2 |    B |   150 |  15 |   165 |
|  3 |    C |   200 |  20 |   220 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:23:50.187

此过程将返回您需要的内容。

```
CREATE PROCEDURE [dbo].[Select_Bills] 
AS
BEGIN
      SELECT Id, Name, Money, (mMoney*.10) as Tax, (Money*1.10) as Total
      FROM Bill
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:21:57.377

尝试以下操作：

```
select [ID]
,[Name]
,[Money]
,convert(decimal(10,0), (([Money] * 10) / 100)) as [Tax]
,convert(decimal(10,0), [Money] + (([Money] * 10) / 100)) as [Total]
from [Bill] 
```

请注意，我要使用 0 精度来匹配您的结果`convert`。`decimal(10, 0)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:19:13.973

```
SELECT Id
    ,NAME
    ,MONEY
    ,(MONEY * 10) / 100 AS Tax
    ,MONEY + ((MONEY * 10) / 100) AS Total
FROM Bill 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:19:23.063

```
SELECT Id, Name, Money, Money * 0.1 as Tax,  Money * 1.1 as Total FROM Bill 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:19:27.327

```
Select ID,Name,[Money],[Money]*10/100  as Tax,[Money]+ [Money]*10/100 as Total
From Table 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T10:20:16.277

像这样的东西：

```
 SELECT    [Id]
          ,[Name]
          ,[Money]
          ,[Money] * .1 AS [Tax]
          ,[Money] * 1.1 AS [Total]
 FROM [Bill] 
```

# puppet - 在 puppet 2.6 和 2.7 中定义和调用函数

> ID：13581955
> 
> 赞同：0
> 
> 时间：2012-11-27T10:16:41.250
> 
> 标签：puppet

我有一个模块`core`和一个类`core::logrotate`定义在`core/manifests/logrotate.pp`.

```
class core::logrotate {
#...some stuff here
#
  define confd ($ensure = "present" , $log_name = "dummy" ) {
    if ( $ensure == present )
    {
        file {
          "/etc/logrotate.d/$log_name":
            ensure => present,
            source => filelookup("core/${log_name}.logrotate"),
        }
    } else {
        file {
          "/etc/logrotate.d/$log_name":
           ensure => absent,
        }
    }
  }  
} 
```

在 templates.pp 中调用此函数为

`core::logrotate::confd { "mkill": log_name => mkill }`

这失败并出现错误

`Error 400 on SERVER: Puppet::Parser::AST::Resource failed with error ArgumentError: Invalid resource type core::logrotate::confd`

如果 puppet master 版本是 2.6.x，那么这将失败，为了让它在那里工作，在模块的 init.pp 中曾经有一个导入“*”。现在将其删除为移动到 puppet 2.7.20。

此处粘贴的代码在 2.7 中有效，但在 2.6 中失败。知道为什么吗？我怎样才能让它同时适用于 2.6 和 2.7？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:00:08.223

您应该在课堂之外进行定义，请参阅样式指南：[http ://docs.puppetlabs.com/guides/style_guide.html#classes](http://docs.puppetlabs.com/guides/style_guide.html#classes)

另外，我认为您可能使用错误的模块，单独拥有一个“logrotate”模块会更合乎逻辑。

所以; 在 modulepath/logrotate/manifests/confd.pp 你会放这个：

```
define logrotate::confd ($ensure = "present" , $log_name = "dummy" ) {
  if ( $ensure == present )
  {
    file {
      "/etc/logrotate.d/$log_name":
        ensure => present,
        source => filelookup("core/${log_name}.logrotate"),
    }
  } else {
    file {
      "/etc/logrotate.d/$log_name":
       ensure => absent,
    }
  }
} 
```

这应该使它正常工作。

问候，德国

# tcp - 在 RUDP、UDT、LWIP、DCCP 中广播

> ID：13581956
> 
> 赞同：3
> 
> 时间：2012-11-27T10:16:46.347
> 
> 标签：tcp, udp, protocols, broadcast, rudp

在 Reliable UDP (RUDP)、UDT、LWIP 和 DCCP 协议中，哪些协议可以支持 BROADCAST 机制？哪个更可靠并具有拥塞控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:38:01.903

“*可靠的 UDP* ”是许多不同实现相关的通用名称。例如，[Plan 9 的 RUDP](http://plan9.bell-labs.com/sources/plan9/sys/src/9/ip/rudp.c)是一个简单可靠的点对点数据报协议，具有基本的流量控制。

“ *UDT* ”是另一种点对点协议，但针对当前 TCP 拥塞逻辑失败的高延迟高带宽环境，例如洲际文件传输。该协议以拥塞为代价实现了可靠传递，数据包被大量推送以减少往返 ACK 和 NAK 机制的开销。

我假设“ *LWIP* ”指的是[轻量级 IP](http://en.wikipedia.org/wiki/LwIP)堆栈，并且与本次讨论无关。

“ *DCCP* ”是一种使用[ECN](http://en.wikipedia.org/wiki/Explicit_Congestion_Notification)在基本数据报之上添加拥塞控制的手段，并且与可靠性正交。

**那么有哪些可用的选项？**

最实用的是[覆盖网络](http://en.wikipedia.org/wiki/Overlay_network)，例如 XMPP，这样您可以获得广播语义，但利用 TCP 拥塞控制连接和 HTTP 来实现广泛连接。代价是代码的复杂性。

如果您真的需要，[PGM](http://en.wikipedia.org/wiki/Pragmatic_General_Multicast)是一种协议，它可以通过针对有线和无线网络调整的拥塞控制提供可靠的传输。然而，它依赖于 IP 多播，这意味着昂贵的网络基础设施支持和复杂得多的集成测试。目前所有针对 PGM 的研究拥塞控制机制在每秒 10,000 个数据包以上时都已饱和并变得无用，因此必须考虑使用较大有效载荷的较低数据包速率。

# java - Java的线程是否像Linux上的进程一样工作？

> ID：13581958
> 
> 赞同：4
> 
> 时间：2012-11-27T10:16:49.093
> 
> 标签：java, linux, jetty

我已经启动了一个码头服务器和一个 ehcache 实例，很快我在启动另一个 java 进程时遇到了 linux 上的线程限制。

错误消息是`unable to create new native thread`（PS 我的 linux 操作系统是 CentOS 6.2）。

然后我`ps -xH`知道两个java进程（jetty和ehcache）产生了将近800个线程，总数`ps -xH`是1023，`ulimit -u`显示1024。

所以，我的问题是为什么java产生线程但我遇到了进程数的限制？

PS我有足够的内存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:23:31.590

因为对于 Linux 线程，进程基本上是相同的。它们之间的区别在于线程共享内存、文件描述符等内容，而进程不共享。

查看[此](http://www.samba.org/~tridge/talks/threads.pdf)内容以获得更深入的见解。因此，线程和进程都计入 1023 个进程的限制。

您可能应该尝试创建更少的线程，这对我来说似乎是一个巨大的数目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:22:30.510

到目前为止，至少对于 Jetty 来说，这是过多的线程。除非您已经对服务器施加了每秒数百个请求的压力，否则这种情况不应该发生。仔细检查线程是否无限期阻塞。在任何情况下，在入队或拒绝请求之前配置允许的最大线程数。

# android - Android 4.1 MediaCodec 支持的分辨率

> ID：13581964
> 
> 赞同：2
> 
> 时间：2012-11-27T10:17:14.730
> 
> 标签：android, video, h.264, android-4.2-jelly-bean

我正在尝试让 Android 4.1 的新低级媒体功能适用于华硕 Transformer TF300T 平板电脑上的 H.264 编码。当我尝试提高编解码器的分辨率时，我遇到了一些奇怪的行为：

```
 MediaFormat mediaFormat = MediaFormat.
                                createVideoFormat("video/mp4v-es", 320, 240); // WORKS
//      MediaFormat mediaFormat = MediaFormat.
//                              createVideoFormat("video/mp4v-es", 640, 480); // DOESN'T WORK

        mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 125000);
        mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 25);
        mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar);
        mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
        mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
        mediaCodec.start(); 
```

在后一种情况下，我在调用`mediaCodec.getInputBuffers();`. 任何人有任何解释（甚至更好：修复）？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:07:02.273

1.  试试[CamcorderProfile](http://developer.android.com/reference/android/media/CamcorderProfile.html) API。与从中检索到的配置之一完全匹配的配置可能会起作用。

2.  显然，在您的情况下，分辨率*和其他参数*的某些组合使其无法正常工作。我想知道是不是帧率？25有点奇怪，试试29.97或30，或者15。我也想知道是不是比特率？分辨率太低了，试试500kbit/s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:54:55.953

请查看以下链接：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

检查“视频编码建议”部分。这些值在，`pixels`因此请确保设备分辨率支持这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:25:17.567

当我使用 MediaRecorder 时，我遇到了同样的问题。

您可以尝试使用 CamcorderProfile，但根据我的经验，它并不能保证稳定工作。同样在 Android 2.* 中，您只能拥有两个 CamcorderProfile 配置文件。

这些设置是特定于设备的，您可以通过实验方式获得适用于各种设备的最佳设置。

**编辑：**您也可以使用 H.263 而不是 H.264，对于您的情况，它应该可以工作。

# objective-c - Xcode 4.5 项目未检测到 iphone 4s

> ID：13581965
> 
> 赞同：1
> 
> 时间：2012-11-27T10:17:15.250
> 
> 标签：objective-c, xcode4.5, ios5

在我用 Xcode 4.5 开发的一个应用程序中，iphone 4s 没有检测到，它只是显示为 ios 设备。

我添加了手机的 udid，创建了应用程序的应用程序 ID，配置了配置文件并选择了 udid 和应用程序 ID，并创建了一个活动的配置文件。

我下载了它，它在组织者中显示了一个有效的配置文件。我已经配置了 plist 文件并将构建标识符设置为`com.companyname.appname`与应用程序 ID 类似（我排除了应用程序 ID 前面的 ID 号）。仍然没有检测到手机。但是在同一版本中创建的其他 xcode 项目检测到了手机。

你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:33:26.247

要识别设备，请在 Project > Summary > Deployment target 中将部署目标设置为 iPhone 的 iOS 版本。

# symfony - 在树枝中呈现特定的实体表单字段

> ID：13581966
> 
> 赞同：1
> 
> 时间：2012-11-27T10:17:17.497
> 
> 标签：symfony, twig

在我的表单生成器中，我有类似的东西：

```
$builder->add('User.username', 'text', array())
... 
```

但我的问题是，在树枝中，我无法使用以下方法渲染该字段：

```
 {{ form_widget(profile_form.User.username) }} 
```

即使我使用 form_rest 方法渲染了该字段：

```
 {{ form_rest(profile_form) }} 
```

请注意，我需要在字段名称前添加实体用户，因为它是相关实体。

有什么方法可以渲染这个字段？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:18:55.260

也许你应该使用[property_path](http://symfony.com/doc/current/reference/forms/types/form.html#property-path)

```
$builder->add('user_username', 'text', array('property_path' => 'user.username')) 
```

# export - 在 Virtuemart 中获取订单项自定义字段值

> ID：13581969
> 
> 赞同：2
> 
> 时间：2012-11-27T10:17:28.230
> 
> 标签：export, joomla2.5, virtuemart

我正在创建自定义 VirtueMart 订单项目导出。某些产品具有“购物车变体”类型的自定义字段。在这种特定情况下，客户可以在将产品放入购物篮时从列表中选择“是”或“否”。我需要在我的订单项目导出中包含客户输入的值。

似乎自定义字段值未按预期存储。我唯一能找到的是`product_attribute`table 列中的一段 json 包装的 HTML `#__virtuemart_order_items`。我可以`preg_match`从那里获得价值，但这是相当粗糙且非常不可靠的。不幸的是，我无法在任何地方找到作为普通值的实际数据。

谁能告诉我我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:25:23.493

您可以在 #__virtuemart_order_items 中找到 Product 属性

字段 product_attribute 包含自定义字段的确切值和标题。

例如：

```
{"2558":" <span class=\"costumTitle\">Gift Wrap<\/span><span class=\"costumValue\" >Yes<\/span>"} 
```

这是 product_attribute 列中字段的值（json_encoded）

类 customTitle 类 span 是字段标签。= 礼品包装。并且 customValue 类跨度包含值。= 是的

你可以像这样得到这个值

带有 span 的第一个 html 标签应转换为相应的符号。这里喜欢

```
&lt;span class=&quot;costumTitle&quot;&gt;Gift Wrap&lt;/span&gt;&lt;span class=&quot;costumValue&quot; &gt;Yes&lt;/span&gt; 
```

然后简单地 json_decode($value,true); 返回数组将正确获取您的内容

例如：

```
$str = '{"2558":"&lt;span class=&quot;costumTitle&quot;&gt;Gift Wrap&lt;/span&gt;&lt;span class=&quot;costumValue&quot; &gt;Yes&lt;/span&gt;"}';
$ar = json_decode($str,true);
print_r($ar); 
```

输出如：

```
Array ( [2558] => <span class="costumTitle">Gift Wrap</span><span class="costumValue" >Yes</span> ) . 
```

希望它会有所帮助..

# google-visualization - 谷歌图表 - 日期类型

> ID：13581970
> 
> 赞同：1
> 
> 时间：2012-11-27T10:17:35.097
> 
> 标签：google-visualization

我正在尝试测试 Google Chart，但收到以下错误：

`One or more participants failed to draw(). The filter cannot operate on a column of type string. Column type must be one of: number, date, datetime or timeofday. Column role must be domain, and correlate to a continuous axis.`

我究竟做错了什么？

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

          google.load('visualization', '1.0', {'packages':['controls']});
          google.setOnLoadCallback(drawDashboard);

      function drawDashboard() {
    var obj = [["Date","buy","sell"],["Date(2012,10,2)",15,14],["Date(2012,10,3)",55,51],["Date(2012,10,4)",53,49]];
        var dataa = google.visualization.arrayToDataTable(obj);
        var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard_div'));

        var donutRangeSlider = new google.visualization.ControlWrapper({
          'controlType': 'ChartRangeFilter',
          'containerId': 'filter_div',
          'options': {
              'filterColumnIndex': 0,
              'ui': {
                     'chartType': 'LineChart',
                     'chartOptions': {
                       'chartArea': {'width': '90%'},
                       'hAxis': {'baselineColor': 'none'}
                     },
                     'chartView': { 'columns': [0, 1] },
                     'minRangeSize': 86400000
                }
          },
        });

        var lineChart = new google.visualization.ChartWrapper({
          'chartType': 'LineChart',
          'containerId': 'chart_div',
          'options': {
                title: 'Title',
          }
        });

        dashboard.bind(donutRangeSlider, lineChart);
        dashboard.draw(dataa);
      }       
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T01:31:11.270

arrayToDataTable 不支持此处提到的日期或时间值：[https ://developers.google.com/chart/interactive/docs/datatables_dataviews#arraytodatatable](https://developers.google.com/chart/interactive/docs/datatables_dataviews#arraytodatatable)

> ### 数组到数据表（）
> 
> 此辅助函数使用单个调用创建和填充 DataTable。
> 
> **优点：**
> 在浏览器中执行的代码非常简单易读。
> 
> **缺点：**
> 不能显式指定每一列的数据类型；类型是从传入的数据中推断出来的。
> 您不能在数据中使用任何日期或时间值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T05:48:05.453

尝试使用这个：

```
 var data = new google.visualization.DataTable();
    data.addColumn('date', 'Date');
    data.addColumn('number', 'buy');
    data.addColumn('number', 'sell');
    data.addRows([
    [new Date(2012,10,2),15,14],
    [new Date(2012,10,3),55,51],
    [new Date(2012,10,4)",53,49]
    ]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:57:44.940

您可能搞砸了 java 脚本，我从您的代码中获取数据并在[Google Code Playground](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)中创建了示例 html 页面。

检查以下代码，它显示可视图表而没有任何错误：

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = google.visualization.arrayToDataTable([["Date","buy","sell"],["Date(2012,10,2)",15,14],["Date(2012,10,3)",55,51],["Date(2012,10,4)",53,49]]);

        // Create and draw the visualization.
        new google.visualization.LineChart(document.getElementById('visualization')).
            draw(data, {curveType: "function",
                        width: 500, height: 400,
                        vAxis: {maxValue: 10}}
                );
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 500px; height: 400px;"></div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-22T11:08:49.050

arrayToDataTable 现在确实支持 Date 值（不确定 3 年前）

在您的代码中，改为执行此操作

```
var obj = [[{label: "Date", type: "date"},"buy","sell"],[new Date(2012,10,2),15,14],[new Date(2012,10,3),55,51],[new Date(2012,10,4),53,49]];
var data = google.visualization.arrayToDataTable(obj); 
```

请记住，当您调用 new Date(...) 时会应用当前时区，也许您想进行更多调整。

# php - 如何使 alpha_dash 适用于阿拉伯字母？

> ID：13581971
> 
> 赞同：1
> 
> 时间：2012-11-27T10:17:38.013
> 
> 标签：php, codeigniter, validation

我想为阿拉伯语字段添加规则以确保它仅包含字符或数字。

`alpha_dash` 仅适用于英文字母，如何使其支持阿拉伯语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:48:43.827

Alpha dash 不是标准的 php 函数。

这是您提到的功能

```
function alpha_dash($str)
{
   return ( ! preg_match("/^([-a-z0-9_-])+$/i", $str)) ? FALSE : TRUE;
} 
```

这应该匹配阿拉伯字母、数字、下划线和减号。

```
function alpha_dash($str)
{
   return ( ! preg_match("/^[\-_ \d\p{Arabic}]*\p{Arabic}[\d\p{Arabic}]*$/ui", $str)) ? FALSE : TRUE;
} 
```

编辑：我可能搞砸了正则表达式，但现在至少你有一些事情要做。

# asp.net - 如何在 DropDownList 中为 DataTextField 使用 htmltext？

> ID：13581984
> 
> 赞同：0
> 
> 时间：2012-11-27T10:18:05.317
> 
> 标签：asp.net

我有一个 DropDownList 并为它设置了一个 DataSource。

html:

```
 <asp:DropDownList ID="ddlcategory" runat="server" DataSourceID="ODScategory"  DataTextField="Name" DataValueField="ID" Width="200px">
  </asp:DropDownList>

  <asp:ObjectDataSource ID="ODScategory" runat="server" SelectMethod="GetAllByCommand"TypeName="Alian.BusinessLayer.clsCustomerCategoryFactory">
  <SelectParameters>
    <asp:Parameter DefaultValue="FatherID is not null" Name="SQLWhere" Type="String" />
      </SelectParameters>
   </asp:ObjectDataSource> 
```

我的数据源是一个有两列（ID，名称）的表。我将 htmltext 保存在名称中。

例如 ：

身份证名称

1 Cofee span style="color: DarkOrange">A

2 span style="background-color: LightSalmon">酒店>

我的问题是：当我将此表用于下拉数据源时，我的值显示为 html 标记。

![在此处输入图像描述](../Images/f66f8bd1a0f3bad7dd0b123fc877d36d.png)

怎么去掉html标签？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:02:32.027

如果我理解正确，您尝试为下拉列表选项应用一些样式。在这种情况下，您需要为下拉列表项目集合中的每个项目添加您的样式。您可以使用一些分隔符将项目样式存储在名称中，例如“;” “color:red; YourItem Name”（注意但我不认为这是个好主意）

```
foreach(ListItem item in ddl.Items)
{
   string[] data=item.Text.Split(';');
   item.Attributes.Add("style", data[0]);
   item.Text=data[1];
} 
```

例如，您可以在 Page_PreRender 上执行此操作。但是您必须小心，因为并非所有浏览器都正确支持标签选项的样式属性。

从服务器端删除不需要的 html 标签：

```
 System.Text.RegularExpressions.Regex reg = new System.Text.RegularExpressions.Regex(@"(<.+>)\b|(<\/.+>)");

foreach(ListItem item in ddl.Items)
{
   item.Text=reg.Replace(item.Text," ");
} 
```

您可以在数据源中进行此替换，但我不知道您使用的是哪种类型

如果您想使用 javascript 从客户端删除不需要的 html 标签：

使用 Jquery 的解决方案

```
function RemoveUnwantedHTMLTag()
{
   $('select:[id*="elementSelectId"] > option').each(function(){var _self=$(this);   _self.text(_self.text().replace(/<[^>]+>/g,' '));});
} 
```

没有jQuery

```
function RemoveUnwantedHTMLTag()
{
  var _arr=document.getElementById('elementSelectId').childNodes;
    for (var i=0;i<_arr.length;i++)
    { 
         if(_arr[i].text!=undefined)
           { _arr[i].text=(_arr[i].text).replace(/<[^>]+>/g,' ');
                     _arr[i].value=(_arr[i].value).replace(/<[^>]+>/g,' ');
                    }

     }

} 
```

在页面加载时启动您的 javascript 函数：

jQuery

```
 $(documet).ready{RemoveUnwantedHTMLTag();} 
```

没有jQuery

```
 document.body.onload=function(){RemoveUnwantedHTMLTag();} 
```

如果页面上存在 Sys 对象（如果您的下拉列表位于某个更新面板内，此方法很有用）

```
 Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(RemoveUnwantedHTMLTag); 
```

cs文件中的所有代码：

```
protected void Page_PreRender(object sender, EventArgs e){
if (!this.Page.ClientScript.IsStartupScriptRegistered("RemoveUnwantedHTMLTag")
        {
            string script = @"function RemoveUnwantedHTMLTag()
{
 var _arr=document.getElementById('"+ddlcategory.ClientID+"').childNodes;
 for (var i=0;i<_arr.length;i++)
{ if(_arr[i].text!=undefined)
    { _arr[i].text=(_arr[i].text).replace(/<[^>]+>/g,' ');
              _arr[i].value=(_arr[i].value).replace(/<[^>]+>/g,' ');// if text is same  with value
            }
}
}
 Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(RemoveUnwantedHTMLTag); ";
            ScriptManager.RegisterStartupScript(this.Page, this.Page.GetType(),  "RemoveUnwantedHTMLTag", script, true);
        }
} 
```

# windows - 如何创建行为为 .cmd/.bat 的文件扩展名？

> ID：13581987
> 
> 赞同：4
> 
> 时间：2012-11-27T10:18:10.993
> 
> 标签：windows, batch-file, registry, cmd

我想这是一个奇怪的问题。但我很好奇。这是我迄今为止尝试过的：我已经导出并比较了`[HKEY_CLASSES_ROOT\batfile]`, `[HKEY_CLASSES_ROOT\cmdfile]`, `[HKEY_CLASSES_ROOT\.bat]`,中的值`[HKEY_CLASSES_ROOT\.cmd]`。我注意到的唯一区别是`HKEY_CLASSES_ROOT\*\FrienflyTypeName`假设对于它们的执行并不重要。所以我创建了一个具有相同数据的注册表值以获得所需的扩展名（我正在尝试创建*.scjs*文件扩展名）：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.scjs]
@="scjsfile"
#this says that the file will contains text
[HKEY_CLASSES_ROOT\.scjs\PersistentHandler]
@="{5e941d80-bf96-11cd-b579-08002b30bfeb}"

[HKEY_CLASSES_ROOT\scjsfile]
@="Windows Batch File"
"EditFlags"=hex:30,04,00,00
"FriendlyTypeName"=hex(2):40,00,25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,\
  00,6f,00,6f,00,74,00,25,00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,\
  32,00,5c,00,61,00,63,00,70,00,70,00,61,00,67,00,65,00,2e,00,64,00,6c,00,6c,\
  00,2c,00,2d,00,36,00,30,00,30,00,32,00,00,00

[HKEY_CLASSES_ROOT\scjsfile\DefaultIcon]
@=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,74,00,25,\
  00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,69,00,6d,00,\
  61,00,67,00,65,00,72,00,65,00,73,00,2e,00,64,00,6c,00,6c,00,2c,00,2d,00,36,\
  00,38,00,00,00

[HKEY_CLASSES_ROOT\scjsfile\shell]

[HKEY_CLASSES_ROOT\scjsfile\shell\edit]

[HKEY_CLASSES_ROOT\scjsfile\shell\edit\command]
@=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,74,00,25,\
  00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,4e,00,4f,00,\
  54,00,45,00,50,00,41,00,44,00,2e,00,45,00,58,00,45,00,20,00,25,00,31,00,00,\
  00

  #copied from batfile from HKEY_CLASSES_ROOT .Same as cmdfile reg values
[HKEY_CLASSES_ROOT\scjsfile\shell\open]
"EditFlags"=hex:00,00,00,00

[HKEY_CLASSES_ROOT\scjsfile\shell\open\command]
@="\"%1\" %*"

[HKEY_CLASSES_ROOT\scjsfile\shell\print]

[HKEY_CLASSES_ROOT\scjsfile\shell\print\command]
@=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,74,00,25,\
  00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,4e,00,4f,00,\
  54,00,45,00,50,00,41,00,44,00,2e,00,45,00,58,00,45,00,20,00,2f,00,70,00,20,\
  00,25,00,31,00,00,00

[HKEY_CLASSES_ROOT\scjsfile\shell\runas]
"HasLUAShield"=""

[HKEY_CLASSES_ROOT\scjsfile\shell\runas\command]
@=hex(2):25,00,53,00,79,00,73,00,74,00,65,00,6d,00,52,00,6f,00,6f,00,74,00,25,\
  00,5c,00,53,00,79,00,73,00,74,00,65,00,6d,00,33,00,32,00,5c,00,63,00,6d,00,\
  64,00,2e,00,65,00,78,00,65,00,20,00,2f,00,43,00,20,00,22,00,25,00,31,00,22,\
  00,20,00,25,00,2a,00,00,00

[HKEY_CLASSES_ROOT\scjsfile\shell\runasuser]
@="@shell32.dll,-50944"
"Extended"=""
"SuppressionPolicyEx"="{F211AA05-D4DF-4370-A2A0-9F19C09756A7}"

[HKEY_CLASSES_ROOT\scjsfile\shell\runasuser\command]
"DelegateExecute"="{ea72d00e-4960-42fa-ba92-7792a7944c1d}"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx]

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\ContextMenuHandlers]
@="Compatibility"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\ContextMenuHandlers\Compatibility]
@="{1d27f844-3a1f-4410-85ac-14651078412d}"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\ContextMenuHandlers\OpenGLShExt]
@="{E97DEC16-A50D-49bb-AE24-CF682282E08D}"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\DropHandler]
@="{86C86720-42A0-1069-A2E8-08002B30309D}"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\PropertySheetHandlers]

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\PropertySheetHandlers\ShimLayer Property Page]
@="{513D916F-2A8E-4F51-AEAB-0CBC76FB1AF8}"

[HKEY_CLASSES_ROOT\scjsfile\ShellEx\{8895b1c6-b41f-4c1c-a562-0d564250836f}]
@="{1531d583-8375-4d3f-b5fb-d23bbd169f22}" 
```

此外，我已将值 (.SCJS) 添加到 PATEXT 变量 ->`.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.SCJS`

但是当我运行文件时，我得到：**test.scjs is not valid Win32 application.Access is denied.**

所以这甚至是可能的？还有什么我应该改变的吗？

**编辑**：我发现的最佳解决方案：对于我使用的开放密钥：

```
[HKEY_CLASSES_ROOT\scjsfile\shell\open\command]
@="%SystemRoot%\\System32\\caller.bat \"%1\" \"%*\"" 
```

我在system32中有caller.bat：

```
@echo off
copy "%~nx1"  "%temp%\%~nx1.bat" /Y >nul
"%temp%\%~nx1" .bat %~2 
```

只是希望`cmd /c`管理参数更难。目前没有办法处理命令行参数。

**更多编辑：**处理命令行参数的一种方法是使用 `[HKEY_CLASSES_ROOT\scjsfile\shell\open\Run]`而不是。`[HKEY_CLASSES_ROOT\scjsfile\shell\open\command]`我现在不知道到底有什么区别，但它有效（我从我的 AutoIT 安装中看到了这一点:-)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:36:00.520

虽然这已经被接受，但我想我会在我的答案中添加我一起破解的。

我创建了自己的文件扩展名`.bali`，我可以在其中放置一些批处理命令并通过打开文件来运行它们。

`.bali`注册表导出如下所示

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.bali]
@="BaliFile" 
```

请注意，此值不能有空格（如果引用它可能会起作用，但没有尝试过）。

`balifile`注册表导出如下所示

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\balifile]

[HKEY_CLASSES_ROOT\balifile\DefaultIcon]
@="%SystemRoot%\\System32\\imageres.dll,-68"

[HKEY_CLASSES_ROOT\balifile\shell]

[HKEY_CLASSES_ROOT\balifile\shell\open]

[HKEY_CLASSES_ROOT\balifile\shell\open\command]
@="cmd.exe /c for /f \"delims=\" %%a in (%1) do %%a" 
```

我的`file.bali`长相是这样的

```
echo hello bali
pause 
```

该文件也将带有 cmd 图标，并且在运行时它将运行提示符中的命令，显然会输出`hello bali`.

这仅限于您可以使用的内容，例如您不能使用变量，但您可以自己尝试以找出您可以做什么和不能做什么。

不确定这是否是您正在寻找的东西，但无论如何制作都很有趣:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:08:03.863

之前有人问过同样的问题，但我找不到。

一致认为这是不可能的 - Windows 将不允许执行没有 .bat 或 .cmd 扩展名的批处理文件

我记得有一张海报提到了如果被允许就会产生的安全漏洞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-31T09:52:14.957

首先需要一个“安装”脚本：

```
 @echo off

    rem :: A files with .TEST extension will be able to execute batch code but is not perfect as the %0 argument is lost

    rem :: "installing" a caller.
    if not exist "c:\caller.bat" (
       echo @echo off
       echo copy "%%~nx1"  "%%temp%%\%%~nx1.bat" /Y ^>nul
       echo "%%temp%%\%%~nx1.bat"  %%*
    ) > c:\caller.bat

    rem :: associating file extension
    assoc .test=batps
    ftype batps=c:\caller "%%1" %%* 
```

然后我们可以尝试一个简单的`.test` 文件：

```
@echo off
for /l (1;1;10) do (
  echo testing .TEST extension
) 
```

`ASSOC`并且`FTYPE`两者都立即生效，因此我们可以在“安装”后立即启动`.test`文件，并且不需要第二个 cmd 实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:49:41.520

您需要为所需的扩展关联一个程序...

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.test]

[HKEY_CLASSES_ROOT\.test\shell]

[HKEY_CLASSES_ROOT\.test\shell\open]

[HKEY_CLASSES_ROOT\.test\shell\open\command]
@="notepad \"%1\"" 
```

现在在您的桌面上创建一个名为“ **File.test** ”的新文件并双击它，记事本将打开它。

我希望这对你有所帮助。

**更新**

对于您 PC 中的注册扩展...例如“.bat”是通过“batfile”键注册的，那么您需要将程序关联到注册键中，我的意思是“batfile”键，而不是“.bat”键。

PS：对不起我的英语。

# sitemap - magento 多商店站点地图不起作用

> ID：13581988
> 
> 赞同：0
> 
> 时间：2012-11-27T10:18:12.593
> 
> 标签：sitemap, magento-1.7

我有两个不同的商店一个单一的 magento 安装。

多商店工作正常，但站点地图工作不正常。

如果我为第二个商店创建站点地图，则第一个商店（安装的 magento 商店）站点地图将被重写。

我所做的 ？请帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:18:12.593

我生成站点地图并将 sitemap.xml 文件复制到我的第二个商店。

创建时间一个链接将有我替换的那个地方。

# java - 获取 JPA 本机插入查询的生成标识符

> ID：13581990
> 
> 赞同：2
> 
> 时间：2012-11-27T10:18:18.073
> 
> 标签：java, jpa, orm, persistence, nativequery

出于性能原因，我需要使用一些本机查询将新对象插入数据库。我有一个非常复杂的 JPA 持久层，它管理我通常的实体读取和写入，我想使用这个持久层来运行本机查询。

我知道我需要 EntityManager#createNativeQuery(String) 和 Query#executeUpdate 方法来实现我的目标。

我目前的问题是我还想获取新插入行的生成标识符。我知道使用 JDBC 或 SpringPersistence 可以做到这一点，但是有没有办法从 JPA 原生查询中获取这些标识符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:24:01.310

大多数情况下，这是特定于数据库的，如果您可以使用 JDBC 来完成，那么您也可以使用 JPA 原生查询来完成。您基本上需要执行（特定于数据库的）额外查询来获取插入的 ID。

# collections - Plone4 合集 - 逐页可视化不当行为

> ID：13581991
> 
> 赞同：4
> 
> 时间：2012-11-27T10:18:22.597
> 
> 标签：collections, plone

使用逐页视图时，我的 plone 收藏文件夹不显示所有项目。基本上我有 9 页的元素，但第 6 - 8 页显示的内容完全相同。因此，即使项目总数对应于集合中应包含的元素，也不会显示所有项目。这是该页面的[链接](http://www.innovationfestival.bz.it/it/media/coll-rassegna)。

将集合设置为在一页上显示所有项目或每页显示多个项目（100 个而不是 20 个），可视化是正确的，并且会出现以“20120921...”开头的元素。你可以在这个[链接](http://www.innovationfestival.bz.it/de/media/coll-pressespiegel)上看到它。

这不应该是集合过滤器的问题，因为元素在那里，但可能是一个可视化错误。执行“更新目录”没有帮助。使用 Plone 4109 和 Zope 2.13.8

其他人是否注意到这种行为，或者可能是什么原因？非常感谢任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T00:52:57.317

这可能与 Products.ZCatalog 中的错误有关，该错误已通过以下更改日志条目修复：“修复了 sortResults 中结果集后半部分中批次的错误计算。” 我建议升级到最新版本的 Zope 2.13（准确地说是 2.13.23）。

# java - 从 ActiveMQ 队列中获取消息而不出队

> ID：13581995
> 
> 赞同：4
> 
> 时间：2012-11-27T10:18:36.717
> 
> 标签：java, jms, activemq

我正在从 ActiveMQ 队列中获取消息并运行可能成功或失败的 Java 应用程序。

如果应用程序失败，我希望消息保留在队列中，即保留它而不将其出列。

有没有办法在不自动从队列中删除消息的情况下获取消息？

是否有原子操作，例如从队列中获取或从队列中擦除？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T10:21:30.150

禁用消息的自动确认，然后在工作完成后手动调用 message.acknowledge()。如果抛出异常，因此没有调用 message.acknowlege()，AMQ 将尝试再次传递消息。如果所有尝试都失败，则消息最终被放入死信队列。可以配置此行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T13:56:03.563

另一种方法是使用[QueueBrowser](http://docs.oracle.com/javaee/6/api/ "队列浏览器")。这允许您“查看队列上的消息而不删除它们”。但是，这对于检查目的更有用，从您描述的语义来看，mbelow 的答案似乎是正确的选择。

# java - 如何根据索引而不是键从 LinkedHashMap 获取值？

> ID：13581997
> 
> 赞同：56
> 
> 时间：2012-11-27T10:18:42.273
> 
> 标签：java, android, linkedhashmap

我有

```
LinkedHashMap<String, List<String>> hMap; 
```

我想`List<String>`按**位置**而不是关键。

我不想使用迭代。

有没有其他方法可以根据 index 获取 Value ？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-27T10:23:35.180

您无法获得`Map`基于索引的值，`Map`s 只是不那样工作。一种解决方法是根据您的值创建一个新列表并根据索引获取值。

```
LinkedHashMap<String, List<String>> hMap;
List<List<String>> l = new ArrayList<List<String>>(hMap.values());
l.get(0); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-27T10:23:25.493

```
public List<String> getByIndex(LinkedHashMap<String, List<String>> hMap, int index){
   return (List<String>) hMap.values().toArray()[index];
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-27T10:32:09.743

您可能需要考虑使用另一个类来存储您的数据，或者为linkedHashMap 编写一个扩展。就像是

```
//this is pseudo code
public class IndexedLinkedHashMap<K,V> extends LinkedHashMap{

HashMap<int,K> index;
int curr = 0;

    @Override
    public void add(K key,V val){
        super.add(key,val);
        index.add(curr++, key);
    }

    public V getindexed(int i){
        return super.get(index.get(i));
    }

} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-28T14:32:51.457

正如 Kevin Bowersox 所说，这很简单

```
List<String> result = (List<String>) hMap.values().toArray()[position]; 
```

但应该注意的是，这仍然会通过使用 .toArray() 进行迭代。这是一个简单的语句，我不确定是否有一个性能更好的语句，但请注意复杂性不是 log(n)（如 B* 的索引访问），而只是 n。由于 LinkedHashMap 是基于 LinkedList 的，所以没有办法随机访问元素，只能按顺序访问。

转换为 List 是不可避免的邪恶，因为 .toArray() 遵循返回 Object 而不是泛型数据类型的古老概念。

虽然这可能不是地图的主要概念，但 LinkedHashMap 不仅仅是地图。它扩展了 HashMap，并且作为一个扩展类，引入支持该类特性的其他方法非常好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-11T04:49:14.740

标准 Java Collections API 中没有直接的 DS 来提供索引映射。但是，以下内容应该可以让您获得结果：

```
// An ordered map
Map<K, V> map = new LinkedHashMap<K, V>();
// To create indexed list, copy the references into an ArrayList (backed by an array)
List<Entry<K, V>> indexedList = new ArrayList<Map.Entry<K, V>>(map.entrySet());
// Get the i'th term
<Map.Entry<K,V>> entry = indexedList.get(index);
K key = entry.getKey();
V value = entry.getValue(); 
```

您可能仍希望将地图中的数据持久性问题与检索分开。

更新：或使用Apache Commons 的[LinkedMap](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/map/LinkedMap.html)。

# cuda - 两个线程在没有任何锁或同步的情况下将相同的值写入相同的全局内存变量是否安全？

> ID：13581998
> 
> 赞同：0
> 
> 时间：2012-11-27T10:18:43.240
> 
> 标签：cuda

两个线程在没有任何锁或同步的情况下将相同的值写入相同的全局内存变量是否安全？

结果总是确定的和正确的吗？

共享内存变量和寄存器变量怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:27:52.667

你可以在这里找到一个类似的问题（有答案）： [Concurrent writes in the same global memory location](https://stackoverflow.com/questions/5953955/concurrent-writes-in-the-same-global-memory-location)

通常，并行编程模型不保证多个线程之间的执行顺序。因此，您将在每个程序执行中具有不同的行为。

# sql - 使用IN子句时的SQL案例，干净的方式？

> ID：13581999
> 
> 赞同：1
> 
> 时间：2012-11-27T10:18:44.443
> 
> 标签：sql, sql-server, arrays, case

大家好，我正在尝试根据条件使用 IN 子句。我不想要 2 个单独的 SQL 语句，并希望有一个内联解决方案。我想说，如果字符串为空，则不要应用 IN 查询，但如果不是，则使用它。我知道我可以做一个 IF 声明，但我认为这有异味，但不确定另一种方法吗？谷歌搜索显示 IN 不支持 case 关键字......

在此先感谢，奥南。

```
declare @PartStockID nvarchar(50)
set @PartStockID = '32919,40335'

select top 10 * from PMS_PartStock
where 
(@PartStockID != '' AND PartStockID in (SELECT ID FROM dbo.Split_List_Int(@PartStockID)) OR PMS_PartStock.PartStockID = PMS_PartStock.PartStockID ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:20:29.427

更改`AND`为`OR`_ `!=`_`=`

```
where 
(@PartStockID = '' OR PartStockID in (SELECT ID FROM dbo.Split_List_Int(@PartStockID)) OR PMS_PartStock.PartStockID = PMS_PartStock.PartStockID ) 
```