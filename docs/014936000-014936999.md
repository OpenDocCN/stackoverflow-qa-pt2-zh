# StackOverflow 问答 14936000-14936999

# windows-runtime - 继承用户控件

> ID：14936001
> 
> 赞同：0
> 
> 时间：2013-02-18T12:11:18.667
> 
> 标签：windows-runtime

为了便于管理具有许多显示为用户控件的元素的 UI，我希望我的用户控件继承自我自己的类。因此，在我的用户控件中，有：

继承用户控件

我把它改成

继承 MyBaseUserControl

我添加了一个 MyBaseUserControl 类，它只是继承自 UserControl。

它不会立即运行，因为 UserControl 的自动生成的中间文件 (.givb) 继承如下：

继承 Global.Windows.UI.Xaml.Controls.UserControl

..但是如果我然后将中间文件编辑为

继承 MyBaseUserControl

它工作得很好，我可以有效地识别我自己的用户控件并为它们一般地添加属性和方法，这正是我想要做的。

但是当然，如​​果我在设计器中编辑用户控件，中间文件会重新生成

继承 Global.Windows.UI.Xaml.Controls.UserControl

每当重新创建中间文件时，我都可以手动编辑中间文件，但它看起来很混乱/危险。

有没有办法正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:45:38.423

您需要将 XAML 中的 UserControl 字符串替换为 MyBaseUserControl。例如

```
<controls:MyBaseUserControl
    x:Class="Sp.MyBaseUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Sp">
...
</controls:MyBaseUserControl> 
```

`Sp`名称空间在哪里`MyBaseUserControl`。

# wpf - 按钮周围的虚线边框

> ID：14936002
> 
> 赞同：3
> 
> 时间：2013-02-18T12:11:19.077
> 
> 标签：wpf

我正在尝试在按钮周围绘制虚线边框，但没有出现边框。不知道我在这里做错了什么，你能帮忙吗？

我的 Xaml 代码：

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Height="300" Width="300">

    <Grid Background="Ivory">
        <Border Width="101" Height="31">
            <Border.BorderBrush>
                <VisualBrush>
                    <VisualBrush.Visual>
                        <Rectangle StrokeThickness="1" Stroke="Red" StrokeDashArray="1 2"/>
                    </VisualBrush.Visual>
                </VisualBrush>
            </Border.BorderBrush>
            <Button Width="100" Height="30">
                Focus Here</Button>
        </Border>
    </Grid>
</Page> 
```

**注意**：直接的问题是边框厚度，但即使添加了边框厚度，虚线边框仍然没有出现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T13:27:13.153

VisualBrush 的视觉无法自动确定其大小，因此 VisualBrush 未根据边框的大小绘制。另请注意，您需要为 Border 和 Rectangle 设置相同的 BorderThickness。看看下面的 XAML。希望它对你有好处。

```
<Border x:Name="MyBorderedButton" Width="101" Height="31" BorderThickness="2" >
      <Border.BorderBrush>
           <VisualBrush>
               <VisualBrush.Visual>
                   <Rectangle StrokeDashArray="4 2"
                      Stroke="Red"
                      StrokeThickness="2"
                      RadiusX="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=CornerRadius.TopRight}"
                      RadiusY="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=CornerRadius.BottomLeft}"
                      Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualWidth}"
                      Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualHeight}"/>
               </VisualBrush.Visual>
           </VisualBrush>
       </Border.BorderBrush>
       <Button>Focus Here</Button>
</Border> 
```

它为我工作

![在此处输入图像描述](../Images/ea0f4272de954c45e59190220d6d8190.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:26:11.533

在您的解决方案中，您的矩形没有大小，因此在绘制时，没有什么可绘制的，解决方案是从父边框继承大小：

```
<Border Width="101" Height="31" BorderThickness="1">
    <Border.BorderBrush>
        <VisualBrush>
            <VisualBrush.Visual>
                <Rectangle StrokeThickness="1"
                    Stroke="Red" 
                    StrokeDashArray="1 2"
                    Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualWidth}"
                    Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualHeight}" />
            </VisualBrush.Visual>
        </VisualBrush>
    </Border.BorderBrush>
    <Button>
        Focus Here
    </Button>
</Border> 
```

# primefaces - primefaces p:column exportOnly 和可导出

> ID：14936007
> 
> 赞同：1
> 
> 时间：2013-02-18T12:11:42.563
> 
> 标签：primefaces

我正在使用primefaces 3.2。我需要使用 p:dataExporter。但是参数`p:column exportable="false"`和`p:column exportOnly="true"`根本不起作用！这可能是什么原因？

这是代码：

```
<p:dataExporter type="xls" target="dataTable" fileName="clients" postProcessor="#{clientBean.postProcessXLS}" />

<p:dataTable value="#{clientBean.model}" var="item" id="dataTable"
                        emptyMessage="#{messages['message.empty']}" styleClass="list"
                        paginator="true" rows="10" widgetVar="table"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        currentPageReportTemplate="(#{messages['table.page.current']}: {currentPage} #{messages['table.totalpages']} {totalPages})"
                        rowsPerPageTemplate="5,10,15,25,50" paginatorPosition="bottom" paginatorAlwaysVisible="false">
                <p:column exportOnly="true">
                    <f:facet name="header">
                        <h:outputText value="#{clients['clientNumber']}" />
                    </f:facet>
                    <h:outputText value="#{item.clientNumber}" />
                </p:column>

                <p:column sortBy="#{item.clientNumber}"
                          exportable="false" filterStyle="display:none;">
                    <f:facet name="header">
                        <h:outputText value="#{clients['clientNumber']}" />
                    </f:facet>
                    <h:outputLink value="#{request.contextPath}/admin/management/clients/clientInfo.jsf">
                        <f:param name="id" value="#{item.id}" />
                        <h:outputText value="#{item.clientNumber}" />
                    </h:outputLink>
                </p:column> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:57:22.370

标签`exportOnly`中根本不存在第一个属性。属性是在 3.4 版本中引入的，因此在您的版本 (3.2) 中不存在。`p:column``exportable`

# apache - 如何将http请求转发到多个服务器？

> ID：14936009
> 
> 赞同：0
> 
> 时间：2013-02-18T12:11:51.210
> 
> 标签：apache, tomcat

问题如下：有一个客户端 C 和服务器 A 和 B。客户端向服务器 A 发送信息，但服务器 B 也应该接收此信息以执行额外的工作。我认为有一个简单的方法可以做到这一点，但我不知道。我不想触摸客户端或服务器中的代码。

我使用apache和tomcat。

到目前为止，我只发现了将传入请求重定向到另一个 url 的方法，所以关系是 one->one。但我需要一个->许多。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-01T13:53:01.887

您可能需要 3 台服务器，一台带有 3 个 nic，另一台带有 1 个。第一个应该在模式 3（广播）上有一个绑定。这是一个简单但昂贵的想法。

我不知道您是否可以使用 IPTABLES 规则或类似规则获得相同的结果...

# php - 使用 ajax 在我的网站上搜索帖子

> ID：14936012
> 
> 赞同：0
> 
> 时间：2013-02-18T12:11:57.703
> 
> 标签：php, jquery, ajax

大家好，我正在尝试创建一个搜索输入，它将搜索我所有的帖子并显示匹配的帖子：

我有一个看起来像这样的工作代码：

html:

```
<form action="" method="post"> 
            <input type="text" id="search_posts" value="" />
    </form> 
```

jQuery：

```
$(document).ready(function()
{
    $("#search_posts").keyup(function()
    {        

        var posts = $(this).val();        

        $(".posted_post").each(function()
        {
            if ($(this).text().search( new RegExp(posts, "i") ) < 0) 
            {
                $(this).fadeOut();
            } 
            else 
            {
                $(this).show();
            }
        });
    });
}); 
```

但现在我没有做任何数据库搜索和东西......我可以使用ajax转换它吗？那看起来怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:19:36.460

* * *

是的，您可以将其更改为使用 ajax，尝试一下：

```
$(".posted_post").each(function()
{
$.ajax({
    url : 'yourphpfunction.php',
    data: {posts},  
    success : function(data){
         $(this).show();
    }
});
} 
```

现在您需要创建一些 php 函数来处理您的帖子 var 值并将一些东西返回到您的 phmtml。

在那上面

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:20:24.060

如果只是通过ajax，请看这里：[http://jqapi.com/#p=jQuery.post][1]

你的问题不清楚。你到底在做什么？如果您想抓取您的数据库，那么我建议您为此构建任何类型的 REST 服务，以 JSON 格式返回结果，然后使用将其映射到 jQuery 对象

```
var i = $.map(result); 
```

有了这个，您可以将模板附加到 ul 列表中，例如使用`$(object').each(function(item){ });`

# objective-c - Twitter OAuth 和 accessToken 在 Objective-C 中获取状态/用户时间线

> ID：14936013
> 
> 赞同：3
> 
> 时间：2013-02-18T12:12:01.317
> 
> 标签：objective-c, twitter, oauth, afnetworking, access-token

我正在尝试从 Twitter 获取 accessToken 值，以便在我的应用程序中使用它（我需要使用 API v1.1 的身份验证模型来**获取 GET statuses/user_timeline**）；我已经在 api.twitter.com 上注册了我的应用程序，在项目中导入了[AFOAuth1Client](https://github.com/AFNetworking/AFOAuth1Client)类，这是简单的代码：

```
- (void)viewDidLoad
{
    self.twitterClient = [[AFOAuth1Client alloc] initWithBaseURL:
                                     [NSURL URLWithString:@"https://api.twitter.com/"] key:@"MYKEY" secret:@"MYSECRETKEY"];
    AFOAuth1Token *accessToken;

    [self.twitterClient acquireOAuthAccessTokenWithPath:@"oauth/request_token" requestToken:accessToken accessMethod:@"GET" success:^(AFOAuth1Token *accessToken) { // I have tried also accessMethod: @"POST"
        NSLog(@"Success: %@", accessToken);
    } failure:^(NSError *error) {
        NSLog(@"Error: %@", error);
    }];
} 
```

不幸的是 XCode 给了我这个错误：

```
Error: Error Domain=AFNetworkingErrorDomain Code=-1011 "Expected status code in (200-299), got 401" UserInfo=0x79a14f0 {NSLocalizedRecoverySuggestion=Failed to validate oauth signature and token, AFNetworkingOperationFailingURLResponseErrorKey=<NSHTTPURLResponse: 0x7956390> 
```

这里有什么问题？我需要在 api.twitter.com 上注册应用程序吗？这是正确的方法，或者，在 iOS 中使用 API v1.1 的 Twitter 身份验证模型**获取状态/用户时间线的更简单方法是什么？**谢谢！

**编辑：可能的航路点？**

1) 在 dev.twitter.com 上注册一个新应用

2）在OAuth设置中，读取Consumer key和Consumer secret

3) 将默认应用访问类型设置为读取？或读/写？要求访问令牌？在....中使用这个值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T19:58:22.733

[自从 Twitter 添加仅应用程序](https://dev.twitter.com/docs/auth/application-only-auth)模式以来已经有几天了。在这种模式下，您可以在没有用户上下文的情况下访问特定的 API 端点，即。您的用户不必进行身份验证。只有应用程序会偶尔进行一次身份验证以获得“承载令牌”，然后在每个请求中发送该令牌。

以下代码获取不记名令牌，然后检索@barackobama 的公共时间线。

```
STTwitterAPI *twitter = [STTwitterAPI twitterAPIApplicationOnlyWithConsumerKey:@""
                                                                consumerSecret:@""];

[twitter verifyCredentialsWithSuccessBlock:^(NSString *bearerToken) {

    NSLog(@"Access granted with %@", bearerToken);

    [twitter getUserTimelineWithScreenName:@"barackobama" successBlock:^(NSArray *statuses) {
        NSLog(@"-- statuses: %@", statuses);
    } errorBlock:^(NSError *error) {
        NSLog(@"-- error: %@", error);
    }];

} errorBlock:^(NSError *error) {
    NSLog(@"-- error %@", error);
}]; 
```

有关工作示例，请参阅[STTwitter](https://github.com/nst/STTwitter) iOS 演示项目（使用您自己的消费者密钥/秘密）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:41:02.967

如果你有自己的消费者令牌，你可以使用我写的[STTwitter 库。](https://github.com/nst/STTwitter)

```
STTwitterAPI *twitter =
  [STTwitterAPI twitterAPIWithOAuthConsumerName:@""
                                    consumerKey:@"your_key"
                                 consumerSecret:@"your_secret"
                                       username:@"username"
                                       password:@"password"];

[twitter verifyCredentialsWithSuccessBlock:^(NSString *username) {

    NSLog(@"Access granted for %@", username);

    [twitter getUserTimelineWithScreenName:@"barackobama"
                              successBlock:^(NSArray *statuses) {
        NSLog(@"-- statuses: %@", statuses);
    } errorBlock:^(NSError *error) {
        NSLog(@"-- error: %@", error);
    }];

} errorBlock:^(NSError *error) {
    NSLog(@"-- error %@", error);
}]; 
```

如果您的令牌未启用“xAuth”，则必须使用 PIN。STTwitter 提供了简单的基于异步块的方法来询问用户。您还可以选择自动化 PIN 检索，请参阅 STTwitterDemo [-[AppDelegate guessPIN:]](https://github.com/nst/STTwitter/blob/master/STTwitterDemo/AppDelegate.m)了解自动化过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T20:54:50.243

[STTwitter](https://github.com/nst/STTwitter#integration-tips)使用简单。我还添加了[示例](https://www.dropbox.com/s/sb4f4wolz7dbzht/publicTimeline.zip)，您可以获取公共 Twitter 时间线

# mysql - 如何仅选择满足条件的最后一行？

> ID：14936021
> 
> 赞同：2
> 
> 时间：2013-02-18T12:12:18.883
> 
> 标签：mysql, select

我正在尝试选择 x=5 的行，但 x 会不断变化。所以我有这样一张桌子：

```
 id    x
----  ---
 1     5
 2     6
 3     4
 4     5
 5     5 
```

所以我想执行一个查询，`"SELECT * FROM table WHERE x=5 AND _???_;"`以便它返回第 4 行和第 5 行但*不*返回第 1 行。

换句话说，我想获取 x 最近具有此值的行。我希望我说清楚了。谢谢！

编辑：x 之后的条目数得到我的更改的最后一个值。我的意思是桌子也可以是这样的：

```
 id    x
----  ---
 1     5
 2     6
 3     4
 4     5
 5     1
 6     5
 7     5
...    5
100    5
101    5 
```

在这种情况下，它应该返回行 [6-101]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:14:51.993

以下将获得最近的行

```
SELECT * FROM table WHERE x=5 ORDER BY id DESC LIMIT 0,1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:56:32.390

[SQLFiddle 演示](http://sqlfiddle.com/#!2/bcf86/3)

```
select * from t t1
where 
x=(select x from t order by id desc limit 1)
and
not exists
(select x from t where id>t1.id and x<>t1.x) 
```

或 [SQLFiddle 演示](http://sqlfiddle.com/#!2/bcf86/9)

```
select * from t t1
where 
x=(select x from t order by id desc limit 1)
and
id>=
(select max(id) from t 
  where x<>
   (select x from t order by id desc limit 1)
) 
```

选择你的基地更快的东西。

# iphone - TableView 即使识别输入也不更新数据？

> ID：14936025
> 
> 赞同：0
> 
> 时间：2013-02-18T12:12:25.963
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

所以我有 5 行，在选择时它们将一个带有行号的整数传递给我的第二个视图控制器。

每个数字都有自己的包含项目的数组，然后应该返回指定行的项目数量。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MasterCell";

    MasterCell *cell = (MasterCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

if (radInt == 0) {
     cell.textLabel.text = @"LM";
     NSLog(@"My return should have been LM");

}
if (radInt == 1) {
    cell.textLabel.text = @"Restauranger";
    NSLog(@"My return should have been Rest");
}
    if (radInt == 2) {
        cell.textLabel.text = [shoppingArray objectAtIndex:indexPath.row];
    }
    if (radInt == 3) {
        cell.textLabel.text = [annatArray objectAtIndex:indexPath.row];
    }

    //cell.textLabel.text = [listData objectAtIndex:[indexPath row]];
    cell.imageView.image = [UIImage imageNamed:@"tab-icon1.png"];
    cell.accessoryType = UITableViewCellAccessoryNone;

    return cell;
} 
```

这是我的代码，只是为了测试它，它不起作用。NSLOG 工作正常，但数据根本不会更新......我做错了什么？它每次 Nslogs LM 但它在日志中也有 1 是选定的行 (radInt)。

新的方法

```
static NSString *CellIdentifier = @"MasterCell";
    MasterCell *cell = (MasterCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil)
        cell = [[MasterCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    if (radInt == 0) {
        cell.textLabel.text = @"LM";
        NSLog(@"My return should have been LM");

    }
    else if (radInt == 1) {
        cell.textLabel.text = @"Restauranger";
        NSLog(@"My return should have been Rest");
    }
    else if (radInt == 2) {
        cell.textLabel.text = [shoppingArray objectAtIndex:indexPath.row];
    }
    else if (radInt == 3) {
        cell.textLabel.text = [annatArray objectAtIndex:indexPath.row];
    }

    else {
        cell.textLabel.text = @"Noes";
    }

    //cell.textLabel.text = [listData objectAtIndex:[indexPath row]];
    cell.imageView.image = [UIImage imageNamed:@"tab-icon1.png"];
    cell.accessoryType = UITableViewCellAccessoryNone;

    return cell; 
```

之前的景色----

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    SecondViewController *enjoy = [[SecondViewController alloc] init];
    if ([[array objectAtIndex:indexPath.row] isEqual:@"Livsmedel"]) {
        [enjoy setTitle:[array objectAtIndex:indexPath.row]];
        enjoy.radInt = 0;
        NSLog(@"0");
    }

    if ([[array objectAtIndex:indexPath.row] isEqual:@"Restauranger"]) {
        [enjoy setTitle:[array objectAtIndex:indexPath.row]];
        enjoy.radInt = 1;
        NSLog(@"1");
    }

    if ([[array objectAtIndex:indexPath.row] isEqual:@"Shopping"]) {
        [enjoy setTitle:[array objectAtIndex:indexPath.row]];
        enjoy.radInt = 2;

    }
    if ([[array objectAtIndex:indexPath.row] isEqual:@"Annat"]) {
        enjoy.radInt = 3;
    }

    [self performSegueWithIdentifier:@"main" sender:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:58:37.133

您实际上不需要实现 didSelectRowAtIndexPath: 如果您将情节提要中的 segue 从单元连接到下一个控制器。你需要实现的是 prepareForSegue:。您的代码应如下所示：

```
- (void)prepareForSegue:(UIStoryboardSegue *) segue sender:(id) sender
{
    NSInteger row = [self.tableView indexPathForSelectedRow].row;
    SecondViewController *enjoy = segue.destinationViewController;
    if ([[array objectAtIndex:row] isEqual:@"Livsmedel"]) {
        [enjoy setTitle:[array objectAtIndex:row]];
        enjoy.radInt = 0;
        NSLog(@"0");
    }

    if ([[array objectAtIndex:row] isEqual:@"Restauranger"]) {
        [enjoy setTitle:[array objectAtIndex:row]];
        enjoy.radInt = 1;
        NSLog(@"1");
    }

    if ([[array objectAtIndex:row] isEqual:@"Shopping"]) {
        [enjoy setTitle:[array objectAtIndex:row]];
        enjoy.radInt = 2;

    }
    if ([[array objectAtIndex:row] isEqual:@"Annat"]) {
        enjoy.radInt = 3;
    }
} 
```

# tomcat - 如何在 Tomcat 应用服务器上安装 Worklight

> ID：14936027
> 
> 赞同：0
> 
> 时间：2013-02-18T12:12:28.557
> 
> 标签：tomcat, ibm-mobilefirst

任何人都可以帮助我如何使用 tomcat 安装 worklight 服务器。我正在使用`worklight 5.0.5`. 我安装`worklight server`了`tomcat`. 当我尝试打开`worklight`控制台时，出现**“找不到请求的资源”之**类的错误。

大家好，

```
publicWorkLightProtocol=http
# For default port leave empty
publicWorkLightPort=7000
publicWorkLightContext=/worklight

This is where tomcat was running.

/worklight  None specified  Worklight   false   0   
 Stop   Reload   Undeploy  ![enter image description here][2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:21:12.863

如果您不确定是否遵循了安装过程的所有必需步骤，请考虑阅读以下文档：

[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/admin/c_installation.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/admin/c_installation.html)

有一整节关于在 Tomcat 上部署 Worklight。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:54:56.803

此外，如果您在远程服务器（Tomcat、Liberty 或 WebSphere）上进行部署，您必须拥有 Worklight Consumer 或 Enterprise（付费）版本。免费的开发者版只能在 eclipse 中运行。如果您有付费版本之一，您可能需要考虑从支持门户获取帮助：[http ://www-947.ibm.com/support/entry/portal/overview](http://www-947.ibm.com/support/entry/portal/overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:42:31.050

您确实需要指定正在使用的 Worklight 版本（Enterprise、Developer？）。

如果您选择不使用 IBM Installation Manager 并且您拥有企业版，那么您还拥有 Worklight Java EE .jar 文件。

这些说明仅适用于 Worklight Server，目前只是为了简化问题：

1.  精确的 Tomcat
2.  将 Worklight Java EE .jar 文件放在 \lib 文件夹中
3.  在 \lib 文件夹中也放置一个数据库连接器（可以在供应商网站上下载）
4.  在 Worklight Studio 中，创建您的项目并在 worklight.properties 中配置您的服务器（仅设置上下文根）。最后，从 \bin 文件夹中获取 .war 文件（确保停止 Worklight Server（右键单击项目 >> 停止服务器）以便释放端口 8080）
5.  启动Tomcat，进入管理页面，部署.war文件
6.  访问`http://localhost:8080/yourContext/console`

如果您使用的是 IBM Installation Manager：

1.  打开 IM，转到首选项并进入存储库
2.  按照安装，设置数据库并添加其连接器（如上述步骤中所述）
3.  选择 Tomcat 作为您的应用程序服务器（使用 IM 时，默认端口为 9080，而在其他类型的安装中为 8080）

你现在基本上完成了。对您自己的项目执行与步骤 4 到 6 相同的操作。请注意，IM 安装了一个默认的 Worklight .war 文件，您可能希望在放置之前删除或取消部署它。（创建自己的 .war 时，请确保这次将端口设置为 9080）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:54:48.253

您需要提供更多信息，例如您安装它的步骤、您尝试访问的网址等。

您可能会看到几件事：

1.  确保您启动了服务器。
2.  查看 WL 日志以确保这方面的工作正常运行。
3.  确保您可以访问 Tomcat 服务器中的其他应用程序。
4.  确保您的 worklight.properties 文件设置正确。
5.  确保您包含端口（通常）9080，并且您输入了正确的 URL。

**问题更改后**编辑：****

 **我很确定你的问题是端口。Tomcat的标准端口是8080，相信WL会自动设置9080端口（见[Tomcat默认端口）](http://www.rescarta.com/index.php/rcsoft/rcfaqssec/13-rcwebfaq/35-tomcatport.html)

我要么更改 Tomcat 端口（[如何更改 Tomcat 默认端口？](http://www.mkyong.com/tomcat/how-to-change-tomcat-default-port/)）

或者更改WL端口，我相信这是在这里完成的： `/opt/IBM/Worklight/WorklightServer/WEB-INF/classes/conf/worklight.properties`

如果这是您第一次进入该`WEB-INF`文件夹，则需要打开该`worklight.war`文件。**

# xml - 我可以创建自己的 Live Tile XML 模板吗？

> ID：14936030
> 
> 赞同：2
> 
> 时间：2013-02-18T12:12:38.813
> 
> 标签：xml, windows-8, live-tile

我目前正在为我们闪亮的新 Windows 8 应用程序开发动态磁贴功能。然而，我已经为这个动态磁贴获得了一些非常具体的设计，并且没有任何磁[贴模板](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh761491.aspx)可以调整以使其看起来像它应该的那样。

有什么方法可以为图块创建自定义 XML 模板，如果是，您将如何为它实现动画等？

提前感谢您的帮助！

编辑：即使我知道我可以让网络服务在图像上创建自定义设计并将其链接起来，但由于时间限制，我宁愿不走那条路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:25:05.437

不，那里没有。

但是您可以生成图像。它不需要是服务器端的[Windows 8 - 自定义动态磁贴](https://stackoverflow.com/questions/12149591/windows-8-custom-live-tile)

# apache - 子域上的 htaccess DirectoryIndex 不起作用

> ID：14936034
> 
> 赞同：0
> 
> 时间：2013-02-18T12:12:51.523
> 
> 标签：apache, .htaccess, subdomain, directoryindex

我在我的网络服务器上设置了一个子域（如 subdomain.domain.com）。主站点位于“httpdocs”中，子域的文件位于与“httpdocs”相同级别的“子域”文件夹中。“httpdocs”中没有 .htaccess 文件。我在“子域”文件夹中有 .htaccess 文件：

> DirectoryIndex index.html index.htm index.php

我想要的是在浏览器中调用 htpp://subdomain.domain.com 时首先打开 index.html 。但我收到 500 内部服务器错误。

有没有办法调整 .htaccess 文件来实现这一点，或者可能是一种解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:38:29.847

A 500 Internal Server Error could be caused by having incorrect permissions on your .htaccess file.

```
chmod 644 .htaccess 
```

if I understand your directory structure correctly as being ~/httpdocs/subdomain/ you will also need a rewrite rule. The following should work.

```
DirectoryIndex index.html index.htm index.php

RewriteEngine on

RewriteCond %{HTTP_HOST} ^(.*)\.domain\.com
RewriteRule ^(.*)$ http://domain.com/subdomain/%1/$1 [L,NC,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:11:37.087

根据错误日志中的消息，您的`.htaccess`文件具有 UTF-8 字节顺序标记。尝试将其保存为纯 ASCII。

# jquery - 我们可以使用 Asp.Net MVC 仅在 1 个视图中执行 CRUD 操作吗？

> ID：14936035
> 
> 赞同：0
> 
> 时间：2013-02-18T12:13:01.683
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我有一个视图，其中列出了我的测试表中的所有数据。现在我想在同一个视图中编辑，而不使用任何其他视图。假设视图中有 10 条记录。如果我单击除 10 条记录中的任何一条之外的 Edit 按钮，请说 9 。然后我希望第 9 条记录处于编辑视图中，而其余 9 条记录处于显示状态。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:21:47.873

MVC 中的任何内容都不需要您将给定视图绑定到单个操作。为了支持 CRUD 操作，您只需在控制器中编写提供给定功能的方法。然后，您可以通过提供适当的链接从您的 MVC 视图链接到这些方法（即删除链接将链接到您的删除方法等）。不用说，您可以通过 AJAX 调用这些方法，就像直接访问链接一样。其他所有内容，例如显示可编辑的内容、无法编辑的内容、用户将如何提供数据等都由视图直接处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:39:36.173

是的你可以。最常见的实现方式是使用 ajax。基本上，您将拥有带有文本（可以说是 a `<span>`）和隐藏编辑字段的元素。当用户单击“编辑”时，您隐藏`<span>`元素并为此显示编辑器字段。在“保存”按钮上，您将调用控制器操作（同样是 ajax），并根据结果隐藏编辑器字段、更新和显示`<span>`元素。

# java - 最终字段而不是枚举中的访问器

> ID：14936037
> 
> 赞同：0
> 
> 时间：2013-02-18T12:13:04.193
> 
> 标签：java, enums, sonarqube, final

例子：

```
public enum TestEnum {
    FOO(4), BAR(7);

    public final int externalValue;

    private TestEnum(int externalValue) {
        this.externalValue = externalValue;
    }
} 
```

注意没有 getExternalValue() 方法。由于 externalValue 字段是最终字段，因此不存在修改它的风险。通过 Sonar 运行这样的代码会给我一个“变量 'externalValue' 必须是私有的并且具有访问器方法”错误。

假设我是个彻头彻尾的白痴，并解释一下：为什么我绝对需要为 externalValue 实现和使用访问器？

很难解释为什么，但是 Java Bean 模式从一个聪明的构造变成一个普遍的规律的方式，不知何故让我心烦意乱。我只是觉得它不应该总是必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:21:31.990

在这种情况下，Sonar 规则是完全错误的。枚举甚至不可能符合 JavaBean 规范（因为它需要公共构造函数）

这总是发生在静态代码分析器中；您可以使用`// NOSONAR`注释或`@SuppressWarnings`注释有选择地禁用某些警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:19:20.347

如果你看到官方[文档](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

每个实例最终变量都被声明为私有的，并且它们的访问器被定义。那么，可能就必须如此吗？

# mysql - 在多个数据库上拆分数据的好习惯？

> ID：14936038
> 
> 赞同：4
> 
> 时间：2013-02-18T12:13:17.497
> 
> 标签：mysql, database

我正在设计一个用于信息系统的数据库。它将包含有关客户、员工和物品的数据。不用说，仅客户部分就有大约十几张桌子。

我想知道将这些数据拆分到多个数据库中然后在它们之间进行引用是否是不好的做法，或者是否将它们全部保存在同一个数据库中会更好。

因此，与其拥有一个带有两打表（例如,等）的单个数据库（例如**Company_DB** ） ，不如将两个数据库（**Company_Cus、Company_Emp**）分别放在一个和另一个中？`CUS_DETAILS``EMP_DETAILS`**`CUS_DETAILS``EMP_DETAILS`**

 **问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:35:48.020

“良好实践”是那些让我们让我们的偏见听起来比实际更重要的短语之一......

通常，您希望将属于一起的事物存储在一起。如果你有一个单一的信息系统，它为企业运行一切，并且你管理的实体相互关联——客户有订单，订单有销售人员和产品——你可以说它们属于同一类。另一方面，如果您注意到您的表“岛”并没有真正链接到任何其他表，那么它们可能不属于一起。

从可维护性的角度来看，管理更多数据库意味着需要管理更多备份、更多维护例程和更多安全配置文件。

从可读性的角度来看，在不同的数据库中寻找您感兴趣的表可能是一件坏事 - 例如，“客户”和“员工”之间存在多对多连接表 - 例如销售团队——那张桌子住在哪里？在“客户”数据库，还是“员工”？

从可靠性的角度来看，我不确定您是否可以跨数据库强制执行外键约束。

我真的想不出这样做有什么好处——所以我会说这是个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:18:40.520

我认为最好将所有数据放在一个数据库中，而不是将数据分散在多个数据库中。

就我个人而言，我认为在不同数据库中分离信息的唯一原因是在一个平台上拥有彼此完全不同的系统或子系统。

无论您使用多少个数据库，数据量都是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:18:42.643

> 我会选择单个数据库，除非真的没有必要拆分为多个数据源，否则单个数据库不限于十几个表。

管理多个资源总是会让人头疼。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:33:31.840

您是否将数据库存储在同一个磁盘上？如果是这样，将其拆分到不同的数据库中根本不会给您带来任何改进。多个数据库之间的引用比同一个数据库中的多个表要慢得多。

然而，单个数据库将更快、更容易维护：只需保护一个数据库，只需在应用程序中管理一个数据库连接等。

数据库存在的原因是将一组相关对象放在一起，以便我们可以相应地管理它们（否则我们将直接创建表 procs 和视图，而不将它们绑定到数据库，并且每个表都有自己的文件，统计， ETC）。

如果您认为将表放在同一个数据库中会变得混乱，也许您需要更好的对象命名模式？

底线：对我来说似乎是一个非常糟糕的做法，因为它没有带来任何优势和很多缺点。**

# jquery - jqgrid在jqgrid中选择行后刷新false

> ID：14936045
> 
> 赞同：0
> 
> 时间：2013-02-18T12:13:31.087
> 
> 标签：jquery, jqgrid

我正在使用 setInterval（在 jqGrid-LoadComplete 事件中）刷新 jqgrid。如果我选择网格中的任何行，我该如何停止刷新 jqgrid。因为它取消选中我选择的行。

```
var timer; //Global Variable 
function populateGrid() { /*Grid population Code URL:url, <ColNames> <colModel> **********/
    loadComplete: function () {
        var myGrid = $("#<grid_name>");
        $("#cb_" + myGrid[0].id).hide();
        var resCount = $("#<grid_name>").jqGrid('getGridParam', 'reccount');
        timer = setInterval(function () {
            $("#<grid_name>").trigger("reloadGrid");
        }, 4000);
    },
    onSelectRow: function (rowid, status, e) {
        clearTimeout(timer);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:25:32.583

根据我的理解，如果您选择一行，您希望停止刷新。您可以通过检查是否在 setInterval 中选择了一行来做到这一点。“grid.jqGrid（'getGridParam'，'selrow'）===null”

代码：

```
var timer; //Global Variable 
function populateGrid() { /*Grid population Code URL:url, <ColNames> <colModel> **********/
    loadComplete: function () {
        var myGrid = $("#<grid_name>");
        $("#cb_" + myGrid[0].id).hide();
        var resCount = $("#<grid_name>").jqGrid('getGridParam', 'reccount');
        timer = setInterval(function () {
            if($("#<grid_name>").jqGrid ('getGridParam', 'selrow')===null){
                   $("#<grid_name>").trigger("reloadGrid");
            }
        }, 4000);
    },
    onSelectRow: function (rowid, status, e) {
        clearTimeout(timer);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:17:15.280

为定时器声明一个全局变量

```
var timer; 
```

在您的 jqGrid 加载事件中，使用刷新代码调用该函数

```
timer = setInterval(fn, intTimeoutInMilliseconds); 
```

在选择行事件的代码中

```
onSelectRow: function(id){
    clearTimeout(timer);
} 
```

# django - Django-Celery - 如何知道子任务何时完成？

> ID：14936050
> 
> 赞同：1
> 
> 时间：2013-02-18T12:13:42.470
> 
> 标签：django, celery, django-celery

我正在使用 Django-Celery-Email。这个应用程序将发送一个任务来发送一封带有常规“from django.core.mail import send_mail”的电子邮件。

我写了一个任务来调用 send_mail 任务，但是当子任务完成时我需要在数据库中进行更新。

这是我的任务.py

```
from celery import task

@task()
def send_ad_contact_email():
    from django.core.mail import send_mail

    # Send the e.mail
    send_mail('test subject', 'Here is the message.', 'somemail@gmail.com',
        ['tosomemail@gmail.com'], fail_silently=False)

    # Update the email status on the model
    # How can I know when send_mail(celery task) is done? 
```

我怎么知道 send_mail(celery task) 什么时候完成？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:57:39.450

您可能需要使用和弦。 [http://docs.celeryproject.org/en/latest/userguide/canvas.html?highlight=taskset#chords](http://docs.celeryproject.org/en/latest/userguide/canvas.html?highlight=taskset#chords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:21:32.187

```
task_id = request.GET['task_id']
res = AsyncResult(task_id)
result = res.result 
```

更多信息[在这里](http://docs.celeryproject.org/en/latest/reference/celery.result.html)

# c# - 如何制作一个可以使用 * 倍增的结构

> ID：14936067
> 
> 赞同：1
> 
> 时间：2013-02-18T12:14:49.677
> 
> 标签：c#, .net, struct, multiplication

.net 的 XNA 框架有一个非常有用的对象，称为 vector2，它表示 2d 向量。您可以将它们乘以整数、浮点数和其他向量 2

例如。

```
 Vector2 bloo = new Vector2(5, 5);
        bloo *= 5;
        bloo *= someotherVector2; 
```

唯一的问题是 X，Y 信息存储为浮点数，在很多情况下，我只想将 2d 信息或 2d 坐标存储为整数。我想为此制作自己的结构..这就是我所拥有的..

```
internal struct Coord
{
    public int X { get; private set; }
    public int Y { get; private set; }

    public Coord(int x,int y)
    {
        X = x;
        Y = y;
    }
} 
```

我的问题是如何做到这一点，以便我的 Coord 结构可以使用 * 与整数或其他 Coord 相乘（不是“乘法”函数调用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:17:04.403

您可以使用运算符重载：

```
public static Coord operator*(Coord left, int right) 
{
    return new Coord(left.X * right, left.Y * right);
} 
```

只需将方法放入`Coord`结构中即可。您可以使用许多运算符（例如`+,-,/`etc...）以及不同的参数来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:17:56.760

您需要为您的类型重载[乘法运算符。](http://msdn.microsoft.com/en-gb/library/z19tbbca.aspx)

```
// overload operator * 
public static Coord operator *(Coord x, Coord y)
{
    // Return a `Coord` that results from multiplying x with y
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:25:45.070

重载乘法运算符：

```
public static Coord operator* (Coord multiplyThis, Coord withThis) {
    Coord result = multiply(multiplyThis, withThis); //...multiply the 2 Coords
    return result;
}

public static Coord operator* (Coord multiplyThis, float withThis) {
    Coord result = multiply(multiplyThis, withThis); //...multiply the Coord with the float
    return result;
} 
```

# ieee - 引用网站参考

> ID：14936076
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:15:07.190
> 
> 标签：ieee, citations

我正在尝试向 IEEE 写一篇论文。我使用了来自网站 freesounds.org 的声音文件。引用 IEEE 期刊的网站参考是否有特定的格式？我查看了 IEEE 网站。他们正在展示如何为一篇文章引用一个网站。不知道如何为声音文件做这件事。谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T22:40:44.380

来自[http://www.york.ac.uk/integrity/ieee.html](http://www.york.ac.uk/integrity/ieee.html)：

> [nn] D. Fisher，作家和 T. Baker，主持人，神秘博士和坑里的生物 [录音]。英国巴斯：BBC 有声读物，2009 年。

概括，

> F. Last，作家和 F. Laster，主持人，作品名称 [录音]。城市，国家：出版商，年份。

如果您使用的是 Bib(La)TeX，我会这样做：

```
@audio{last12,
  author = {Fred Last, Writer and Frank Laster, Presenter},
  title = {Title of Work},
  howpublished = {Sound Recording},
  publisher = {Publisher},
  city = {City, Country},
  year = 2009
} 
```

我最好的刺。

* * *

如果你使用的是 Word（你真的不应该这样做——用 IEEE 编写，你知道得更好），[有一种可用的](http://mikemurko.com/general/ieee-referencing-for-word-2007-2010/).

# sql-server - 如何在 SQL Server 中保存查询，使其在对象资源管理器中可见

> ID：14936079
> 
> 赞同：3
> 
> 时间：2013-02-18T12:15:24.810
> 
> 标签：sql-server, views

我是 SQL Server 新手，我的许多想法都是基于 Access DB 工作的。

我已经搜索了这个问题的答案，但没有找到任何答案。

我打开了我的查询生成器，当我关闭它时 - 它要求“另存为”并将我带到一个文件夹。我保存了它，但查询在对象资源管理器中不可见，所以我如何访问它以及如何使用它来制作带有 InfoPath 等的表单。

我一直在搜索一整天，但没有结果，所以我会很感激解释如何做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:18:17.287

您无法保存`Query`在`SQL Server`. `View`如果您打算稍后使用它，最好创建一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T11:14:28.627

实际上，可以通过用其中的双引号替换单引号来保存查询。一旦它被保存在数据库中，它可以通过反转过程来执行。

# javascript - 是否可以在不更改 HTML 的情况下像在带有 CSS 的表格中一样对齐元素的宽度？

> ID：14936080
> 
> 赞同：3
> 
> 时间：2013-02-18T12:15:26.417
> 
> 标签：javascript, jquery, html, css

我整理了一个当前菜单的[演示](http://jsfiddle.net/LSVRf/1)。改变 HTML 结构是不可行的。

**HTML**

```
<ul class="menu row1">
    <li>item</li>
    <li>varied item</li>
    <li>item</li>
    <li>item</li>
</ul>
<ul class="menu row2">
    <li>longer item</li>
    <li>item</li>
    <li>longer item</li>
</ul> 
```

**CSS**

```
.menu li {
    display: inline-block; border-right: 1px solid; 
    padding: 0 10px; margin: 0; line-height: 32px;
}
.menu {border: 1px solid; margin: 10px 10px 0;}
.menu.row2 {margin-top: 0; border-top: 0;}
.menu li, .menu {border-color: #888;} 
```

**JS**

```
var $row0 = $('.menu.row1 > li');
var $row1 = $('.menu.row2 > li');

for (x=0; x < $row0.length; x++) {
    if (typeof $row1[x] != 'undefined') {
        var w1 = $($row0[x]).width();
        var w2 = $($row1[x]).width();
        var w3 = Math.max(w1, w2);

        $($row0[x]).add($row1[x]).width(w3);
    }
} 
```

是否可以仅使用 CSS 获得与当前 JS 相同的效果？谢谢。

**更新：**

感谢[Big00d](https://stackoverflow.com/users/1437016/big00d)回答这个问题。我更新了[演示](http://jsfiddle.net/LSVRf/2/)。

**新的 CSS**

```
.menu li {
    display: table-cell; border: 1px solid #888; 
    padding: 0 10px; margin: 0; line-height: 32px;
    border-left: 0;
}
.menu {margin: 10px 10px 0; display: table-row;}
.menu.row2 {margin-top: 0;}
.menu.row2 li {border-top: 0;} 
```

[IE8及以上版本支持](http://caniuse.com/#feat=css-table)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:22:29.293

您可能想使用`display: table/table-row/table-cell`：`vertical-align:bottom;`http: [//www.quirksmode.org/css/display.html#table](http://www.quirksmode.org/css/display.html#table)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T12:27:22.290

继续添加`display:table-row;`，这应该可以解决`.menu`问题`display:table-cell``.menu > li`

# magento - Magento 文件上传最新版本

> ID：14936085
> 
> 赞同：0
> 
> 时间：2013-02-18T12:16:15.813
> 
> 标签：magento, import-from-excel

我曾经在 **Magento 版本上工作。1.7.0.1**。我找到了用于上传批量数据的**media/import文件夹，但现在我安装了最新的****Magento 1.7.0.2 版**。在这个版本中，我没有在媒体中找到**导入文件夹。**

此文件夹是否已移动到最新版本中的任何其他位置。

这是我早期版本的万磁王的屏幕截图。

![在此处输入图像描述](../Images/6ede5e6102d475219252d5f2565edfd3.png)

当前版本的magento。

![在此处输入图像描述](../Images/e4b9cdd80b8896ce4d7f69a549fb61e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:05:32.390

不，文件夹必须位于同一位置。只需再次创建此目录；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T06:41:42.153

我认为您需要创建一个名为“custom_options”的文件夹。试试这个，我想它会解决你的问题。

# php - 在 php mysql 中只用一次数据库交互就可以获取和分页超过 200000 条记录

> ID：14936088
> 
> 赞同：0
> 
> 时间：2013-02-18T12:16:26.123
> 
> 标签：php, javascript, mysql

我必须一次获取超过 2,00,000 条记录并使用每页 100 或 1000 条记录的分页，而无需一次又一次地与数据库交互。

就像我们可以有一个虚拟缓存或隐藏的记录集，我的分页将显示记录。我听说这是可能的，但没有找到合适的解决方案。

如果有人对我的要求有解决方案，请建议我，我正在使用 PHP 和 mysql。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:24:20.737

You have 2 choices here: Make one DB transaction and overload the clients DOM or do multiple DB calls.

My suggestion is to take the middle path, select in 10 000 's, display data and then when they wish to paginate from beyond that you ajax more results in.

# java - 如何使用 DB 查询提高应用程序的性能？

> ID：14936089
> 
> 赞同：-4
> 
> 时间：2013-02-18T12:16:28.747
> 
> 标签：java, mysql, database, performance

我是一名数据库人员，我有一个基于 Java 的 Web 应用程序。

它运行缓慢，开发人员向我报告说，仅由于数据库，它很慢。他们要求进行查询调优。

我试图调整查询，但我无法获得太多性能。

当我尝试在浏览器中运行查询时，它工作正常，但在应用程序中它很慢。

请给我一些关于如何解决这个问题的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:47:44.870

以下是我将如何处理这个问题：

*   让开发人员选择一个运行缓慢的用例，然后让他们向您描述。他们还应该提及作为该用例的一部分运行的所有查询，包括参数。
*   当您从 SQL 工具而不是应用程序直接针对数据库运行查询结果时，向他们显示查询结果。确保使用相同的数据库实例和相同数量的数据。
*   如果时间相差很大，请让开发人员使用 Java 分析器（例如 YourKit 或 visualVM）来确定时间花在哪里。这应该可以很容易地看到瓶颈。
*   当应用程序运行缓慢时，请注意上下文。是针对单个用户，还是当多个用户执行相同的用例时？
*   大多数数据库也会写入日志文件，概述查询性能并突出显示有问题的查询。Oracle 的 AWR 文件就是一个例子，也许 MySQL 也有类似的东西。

基本上，尝试与开发人员合作，而不是反对他们。向他们解释您是如何调整查询的，并让他们向您展示他们如何尝试调整应用程序。这种方法一直对我有用。

# python - 为什么 Weka RandomForest 给我的结果与 Scikit RandomForestClassifier 不同？

> ID：14936091
> 
> 赞同：3
> 
> 时间：2013-02-18T12:16:33.267
> 
> 标签：python, scikit-learn, weka, random-forest

在使用相同的 RandomForest 技术和相同的数据集时，我发现 WEKA 和 scikit 之间的结果存在特殊差异。使用 scikit，我的 AUC 约为 0.62（一直以来，因为我进行了广泛的测试）。但是，使用 WEKA，我得到的结果接近 0.79。这是一个巨大的差异！

我测试算法的数据集是 KC1.arff，我将其副本放在我的公共保管箱文件夹[https://dl.dropbox.com/u/30688032/KC1.arff](https://dl.dropbox.com/u/30688032/KC1.arff)中。对于 WEKA，我只是从[http://www.cs.waikato.ac.nz/ml/weka/downloading.html](http://www.cs.waikato.ac.nz/ml/weka/downloading.html)下载了 .jar 文件。在WEKA中，我将交叉验证参数设置为10倍，数据集设置为KC1.arff，算法设置为“RandomForest -l 19 -K 0 -S 1”。然后运行代码！在 WEKA 中生成结果后，应将其保存为文件、.csv 或 .arff。阅读该文件并检查“Area_under_ROC”列，它应该有点接近 0.79。

下面是 scikit 的 RandomForest 的代码

```
import numpy as np
from pandas import *
from sklearn.ensemble import RandomForestClassifier

def read_arff(f):
    from scipy.io import arff
    data, meta = arff.loadarff(f) 
    return DataFrame(data)

def kfold(clr,X,y,folds=10):
    from sklearn.cross_validation import StratifiedKFold
    from sklearn import metrics
    auc_sum=0
    kf = StratifiedKFold(y, folds)
    for train_index, test_index in kf:
        X_train, X_test = X[train_index], X[test_index]
        y_train, y_test = y[train_index], y[test_index]
        clr.fit(X_train, y_train)
        pred_test = clr.predict(X_test)
        print metrics.auc_score(y_test,pred_test)
        auc_sum+=metrics.auc_score(y_test,pred_test)

    print 'AUC: ',  auc_sum/folds
    print  "----------------------------" 

#read the dataset
X=read_arff('KC1.arff')
y=X['Defective']

#changes N, and Y to 0, and 1 respectively
s = np.unique(y)
mapping = Series([x[0] for x in enumerate(s)], index = s)  
y=y.map(mapping) 
del X['Defective']

#initialize random forests (by defualt it is set to 10 trees)
rf=RandomForestClassifier()

#run algorithm
kfold(rf,np.array(X),y)

#You will get an average AUC around 0.62 as opposed to 0.79 in WEKA 
```

请记住，如相关论文的实验结果所示，真正的 auc 值在 0.79 左右，所以问题出在我使用 scikit 随机森林的实现上。

您的帮助将不胜感激！！

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T07:28:53.210

在 scikit-learn 问题跟踪器上发布问题后，我收到反馈说问题出在我使用的“预测”功能中。它应该是“pred_test = clr.predict_proba(X_test)[:, 1]”而不是“pred_test = clr.predict(X_test)”，因为分类问题是二元的：0 或 1。

实施更改后，结果证明 WEKA 和 scikit 的随机森林的结果是相同的 :)

# indexing - Sphinx Search：按源列从索引中获取单词列表

> ID：14936095
> 
> 赞同：0
> 
> 时间：2013-02-18T12:16:57.087
> 
> 标签：indexing, sphinx

`my_table`我有一个带有两个文本字段的表格（我们称之为）：`title`和`description`。我还有一个`my_index`使用下一个源查询的 index()：

```
SELECT * FROM my_table; 
```

当我需要从中获取所有单词和频率时，`my_index`我会使用以下内容：

```
$indexer my_index --buildstops word_freq.txt 1000 --buildfreqs 
```

但是现在，我需要获取仅在列中出现的单词`title`（以及它们的频率仅来自`title`列）。这样做的最佳解决方案是什么？

**编辑：** 如果解决方案不会在磁盘空间上构建新索引，那将是完美的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:28:10.143

创建一个仅包含标题列的新“索引”。无需使用它构建物理索引，只需将其与 --buildstops 一起使用即可：)

索引继承，允许在配置文件中使用非常紧凑的位创建它

```
source my_index_title : my_index {
   sql_query = SELECT id,title from my_table
}
index my_index_title : my_index {
   source = my_index_title
   path = /tmp/my_index_title
} 
```

# maven - 如何使用 Maven 插件创建存档文件

> ID：14936096
> 
> 赞同：0
> 
> 时间：2013-02-18T12:16:57.823
> 
> 标签：maven, archive

使用 Maven 我想创建一个带有自定义扩展名 (.bar) 的存档文件。我必须在其中包含一个类文件和一个 XML 文件。

我尝试了以下但无法完成。

```
 <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.6</version>
            <executions>

                <execution>
                   <id>compile</id>
                   <phase>compile</phase>
                   <configuration>
                       <target>
                            <echo message="generating document workflow .bar file" />
                           **I need to copy a .class file and an xml file then build the .bar file.**                                

                           <!-- Create a bar file. -->
                           <zip basedir="${project.build.outputDirectory}" destfile="${project.build.outputDirectory}/document-workflow.bar" />
                      </target>
                   </configuration>
                </execution>

            </executions>
        </plugin> 
```

你能指导我吗？

我还有一个要求。基本上，我要复制到 jar 的类文件应该在根目录中，而不是在包结构中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:23:57.017

希望它能解决你的问题：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <id>bar</id>
            <phase>package</phase>
            <configuration>
                <target>
                    <echo message="generating document workflow .bar file" />
                    <!-- flatten files -->
                    <copy todir="${project.build.directory}/flattened_classes" flatten="true">
                        <fileset dir="${project.build.outputDirectory}">
                            <include name="**/*.class"/>
                        </fileset>
                    </copy>
                    <!-- Create a bar file. -->
                    <zip  destfile="${project.build.directory}/document-workflow.bar" >
                        <fileset dir="${project.build.directory}/flattened_classes">
                            <include name="**/*.class"/>
                        </fileset>
                        <fileset dir="${project.build.directory}">
                            <include name="yourfile.xml"/>
                        </fileset>
                    </zip>
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# windows-8 - Metro ui：如何在后台模式下播放音频流

> ID：14936098
> 
> 赞同：0
> 
> 时间：2013-02-18T12:17:02.597
> 
> 标签：windows-8

我正在实现音频播放器，它应该能够在应用程序进入后台模式时播放实时 PCM 流。到目前为止，我尝试过的所有解决方案（XAudio2、IAudioClient2）只要应用程序进入后台就停止播放。任何帮助都会得到帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:55:19.000

我相信这应该是可能的.. 它在 WP7 中所以不明白为什么 Win8 是不可能的。快速搜索产生[http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx)，它有一个 Build 链接（是 Build）到背景音频。

这是 WinRT c# 示例[http://code.msdn.microsoft.com/windowsapps/Background-Audio-in-WinRT-344bcf4d的链接](http://code.msdn.microsoft.com/windowsapps/Background-Audio-in-WinRT-344bcf4d)

另一个在这里向您展示了配置媒体元素来做背景音频是多么容易 [http://babaandthepigman.wordpress.com/2012/03/17/metro-background-audio-c-consumer-preview/](http://babaandthepigman.wordpress.com/2012/03/17/metro-background-audio-c-consumer-preview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:46:50.627

您需要使用带有 AudioCategory=BackgroundCapable 属性的 MediaElement。它需要在 XAML 页面上实例化。

将此样式应用于您的根框架：

```
<Style  x:Key="RootFrameStyle" TargetType="Frame">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Frame">
                <Grid>
                    <MediaElement x:Name="MediaPlayer" AudioCategory="BackgroundCapableMedia" AutoPlay="True"  />
                    <ContentPresenter />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

然后你可以像这样播放媒体：

```
var rootGrid = VisualTreeHelper.GetChild(Window.Current.Content, 0);    
var mediaElement = (MediaElement)VisualTreeHelper.GetChild(rootGrid, 0);

mediaElement.Source = new Uri("ms-appx:///relative/path/to/file.mp3"); 
```

然后，您需要在应用清单中声明您的应用能够支持背景音频。

我的博客上的完整解释：[http ://rikk.it/2012/10/background-audio-in-a-metro-c-sharp-app/](http://rikk.it/2012/10/background-audio-in-a-metro-c-sharp-app/)

# android - 如何从日期选择器中获取值？

> ID：14936101
> 
> 赞同：0
> 
> 时间：2013-02-18T12:17:08.753
> 
> 标签：android, datepicker

我的应用程序中有一个 DatePicker。我需要获取所选日期的值？？？

例如：

```
 dateDisplay=(EditText)findViewById(R.id.date); 
```

正如我们在普通的edittext中所做的那样：

```
final EditText Name = (EditText) this.findViewById(R.id.nametext); 
and we can cast the data of it by using `Name.getText().toString()` 
```

同样，我们如何将日期选择器的值获取到字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:21:03.007

检查这个：

[Android：在片段中获取 DatePickerDialog](https://stackoverflow.com/questions/13082861/android-get-datepickerdialog-in-a-fragment/13082956#13082956)

* * *

这很简单：

```
DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int year,
            int monthOfYear, int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        updateDisplay();
    }
};

DatePickerDialog d = new DatePickerDialog(getActivity(),
        R.style.MyThemee, mDateSetListener, mYear, mMonth, mDay);
d.show(); 
```

更新显示方法：

```
private void updateDisplay() {

    GregorianCalendar c = new GregorianCalendar(mYear, mMonth, mDay);
    SimpleDateFormat sdf = new SimpleDateFormat("dd MMMM yyyy");

    editDate.setText(sdf.format(c.getTime()));

    sdf = new SimpleDateFormat("yyyy-MM-dd");

    transDateString=sdf.format(c.getTime());
}// updateDisplay 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:37:07.127

这将像魅力一样起作用。

```
 final Calendar cal = Calendar.getInstance();
       pYear = cal.get(Calendar.YEAR);
       pMonth = cal.get(Calendar.MONTH);
       pDay = cal.get(Calendar.DAY_OF_MONTH);
//----------To Open datePicker----------------
private DatePickerDialog.OnDateSetListener pDateSetListener = new DatePickerDialog.OnDateSetListener()
     {
            public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
            {
                pYear = year;
                pMonth = monthOfYear;
                pDay = dayOfMonth;
                updateDisplay();
            }
     };

//----------To display date in EditText----------------
private void updateDisplay()
     {
           final Calendar cal = Calendar.getInstance();
           currentYear = cal.get(Calendar.YEAR);

           displayBirthdayDate.setText(
                new StringBuilder()
                        // Month is 0 based so add 1
                        .append(pMonth + 1).append("/")
                        .append(pDay).append("/")
                        .append(pYear));
     } 
```

# javascript - 检测移动或平板设备

> ID：14936105
> 
> 赞同：4
> 
> 时间：2013-02-18T12:17:24.877
> 
> 标签：javascript, wordpress, device, detection

我的目标是建立一个基于 Wordpress 的移动网站（适用于手机和平板电脑）和响应式桌面网站。我想要最简单的方法来实现万无一失的设备检测。

移动网站将拥有许多只会真正使触摸设备受益的功能，并且将为手机和平板电脑定制设计。桌面站点将完全不同（具有相同的页面但具有额外的内容）并且将完全响应，以防万一任何设备通过检测。

我有一个可以检测触摸设备并重定向到另一个页面的衬垫，但它似乎太简单了，不能成为一种万无一失的设备检测方法。这是多么愚蠢的证明？它适用于 Windows 和 Android 设备以及 iOS 吗？

这是我第一次做这样的网站，不知道这会有多有效：

```
<!-- Redirect to the mobile index page if we're on a touch device -->
<script>if( 'ontouchstart' in window ) window.location = 'mobile.html';</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:30:19.243

对于 PHP 上的移动检测，我一直使用 $_SERVER['HTTP_USER_AGENT'] 变量。我使用下面的函数来非常精细地控制谁获得了移动网站（我想要支持的特定设备）。只需将用户代理添加到阵列（例如“Ipad”）即可添加其他设备。

```
function detectmobile(){
    $agent = $_SERVER['HTTP_USER_AGENT'];
    $useragents = array (
        "iPhone",
        "iPod",
        "Android",
        "blackberry9500",
        "blackberry9530",
        "blackberry9520",
        "blackberry9550",
        "blackberry9800",
        "webOS"
        );
        $result = false;
    foreach ( $useragents as $useragent ) {
    if (preg_match("/".$useragent."/i",$agent)){
            $result = true;
        }
    }
return $result;
}
if (detectmobile() == true) { wp_redirect('http://pageyouwwanttoredirectto'); } 
```

用法：你可以将上面的代码添加到你的wordpress主题的functions.php文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:22:14.717

您可以使用**[mdetect](http://code.google.com/p/mobileesp/source/browse)**（移动检测）库为您执行此操作。它是用多种语言编写的，可以检测 Windows、Android、iOS 等。请确保您阅读了文档。

*   [PHP版本](http://code.google.com/p/mobileesp/source/browse/PHP/mdetect.php)
*   [JavaScript 版本](http://code.google.com/p/mobileesp/source/browse/JavaScript/mdetect.js)

请注意，JavaScript 版本包含此警告：

```
// WARNING: 
//   These JavaScript-based device detection features may ONLY work 
//   for the newest generation of smartphones, such as the iPhone, 
//   Android and Palm WebOS devices.
//   These device detection features may NOT work for older smartphones 
//   which had poor support for JavaScript, including 
//   older BlackBerry, PalmOS, and Windows Mobile devices. 
//   Additionally, because JavaScript support is extremely poor among 
//   'feature phones', these features may not work at all on such devices.
//   For better results, consider using a server-based version of this code, 
//   such as Java, APS.NET, PHP, or Ruby. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:20:22.187

该代码几乎适用于任何启用触摸的设备。

# java - 如何在java中计算字符串数组中的单词？

> ID：14936107
> 
> 赞同：-2
> 
> 时间：2013-02-18T12:17:39.487
> 
> 标签：java

我正在学习数组，我想制作一个程序来计算单词。鉴于：`String myWords = {"soon; hi; also; soon; job; also"};` ，我必须创建一个方法，如`countWrods(myWords);` 打印结果应该是按字母顺序打印的单词、唯一单词的数量和总单词。这是我的代码：

```
public class Words {
    public static  void main(String[] args){    
        String[] myWords = {"soon; hi; also; soon; job; mother; job; also; soon; later"};
        Words myW= new Words();
        myW.countWords();
        System.out.println("\tWords   \tFreq");
    }
    public  static String[] countWords(myWords){
        for (int i=0; i<myWords.length; i++){
        String temp = myWords[i];
        //System.out.println(temp + " ");
        for(int j=i+1; j<myWords.length; j++){
        String temp2= myWords[j];

            System.out.println("No. of unique words: " );
        }
        }
    }
} 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T17:55:10.217

```
import java.io.*;
import java.util.*;

public class Count_Words_Scan
{
    void main()throws IOException
    {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        System.out.println("ENTER A STRING ");
        String str = br.readLine();
        str= str.toLowerCase();
        int c=0;
        Scanner sc = new Scanner(str);
        while(sc.hasNext())
        {
            sc.next();
            c++;
        }
        System.out.println("NO.OF WORDS = "+c);
    }
} 
```

输入：字计数器
输出：NO.OF WORDS = 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:19:14.540

我建议你看看[split](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)、[trim](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)和[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:32:32.417

我假设您想计算字符串中的单词。

**字符串**：`"soon hi also soon job mother job also soon later"`

```
 public class Words {

Map<String , Integer> dictionary=new HashMap<String,Integer>();

public static void main(String[] args) {
    String myWords = "soon hi also soon job mother job also soon later";
    Words myW = new Words();
    String[] array=myWords.split("\\s+");
    myW.countWords(array);
    System.out.println(myW.dictionary);
}

private void countWords(String[] myWords) {

    for(String s:myWords){

        if(dictionary.containsKey(s))
            dictionary.put(s, dictionary.get(s)+1);
        else
            dictionary.put(s, 1);
    }
}
} 
```

`O/P : {mother=1, later=1, job=2, hi=1, also=2, soon=3}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:34:01.773

首先你需要拆分你的`String`, 大概在 ";" - 然后你可以把它打成一个`TreeSet`来排序，然后让单词变得不规则。添加一个计数器来计算总字数。您还可以使用 a`TreeMap`来记录每个单词的数量，覆盖地图上的 put 方法以进行聚合...

```
final String myString = {"soon; hi; also; soon; job; mother; job; also; soon; later"};
final String[] myStrings = myString.split(";");
final Map<String, Integer> myStringMap = new TreeMap<>(){
 @override
 public String put(final String key, final Integer value) {
   if(contains(key)) {
     return put(key, get(key) + 1);
   } else {
     return put(key, 1);
   } 
 }
};
for(final String string : myStrings) {
  myStringMap.put(string.trim(), 1);
} 
```

现在`myStringMap.size()`是唯一词的数量，`myStringMap.keys()`是按字母顺序排列`Set`的所有非安静词，如果您想要总数，您只需将这些值相加：

```
int totalWords = 0;
for(final Integer count : myStringMap.values()) {
  totalWorks += count;
} 
```

# c# - 如何使用 MSBuild 将外部 .dll 添加到 Csproj？

> ID：14936108
> 
> 赞同：1
> 
> 时间：2013-02-18T12:17:41.697
> 
> 标签：c#, windows-phone-7, msbuild

```
<ItemGroup>
  <Reference Include="Facebook">
     <HintPath>E:\MSBuild\library\Facebook.dll</HintPath>
</Reference>
 <Reference Include="Hammock.WindowsPhone">
     <HintPath>E:\MSBuild\library\Hammock.WindowsPhone.dll</HintPath>
</Reference>
</ItemGroup> 
```

我尝试使用上述脚本添加外部 .dll 文件，但出现如下错误：

> 错误 CS0246：找不到类型或命名空间名称“Hammock”（您是否缺少 using 指令或程序集引用？） [E:\MSBuild\src\MobiReader.csproj]

任何人请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:26:16.457

1.  我会尝试提出一个系统，以便您的 ThirdPartyReferences 不是绝对路径引用，而是某种相对路径。我的通常看起来像：

    ..\ThirdPartyReferencs\MyCoolDll.dll

我的结构通常看起来像这样

```
.\MySolution01.sln
.\MyCSProj01\MyCSProj01.csproj
.\MyCSProj02\MyCSProj02.csproj
.\MyCSProjN\MyCSProjN.csproj
.\ThirdPartyReferences\
.\ThirdPartyReferences\MyCoolDll.dll
.\ThirdPartyReferences\SomePDFLibrary.dll 
```

2.  如果这不可能，您可以操作 csproj (xml)。这是一个接近的例子（检查了这个帖子中接受的答案）：

[如何使用 MSBuild 将链接文件添加到 csproj 文件。（3.5 框架）](https://stackoverflow.com/questions/13867117/how-to-add-a-linked-file-to-a-csproj-file-with-msbuild-3-5-framework)

# html - HTML5 缩放翻译产生错误的位置

> ID：14936113
> 
> 赞同：2
> 
> 时间：2013-02-18T12:17:51.827
> 
> 标签：html, canvas, matrix, transform, scale

我有以下代码，它有助于根据通过矩阵值从 winjs 中的手势控件获得的值转换画布上的图像。

试验一：

起初我尝试使用 canvas.setTransform(a,b,c,d,e,f);

```
 for (var i = 0; i < elt.length; i++) {
            elt[i] = document.getElementById("Img" + i);
            can.appendChild(elt[i]);

        }
       for (var i = 0; i < elt.length; i++) {
         var m = new MSCSSMatrix(elt[i].style.transform);
            ctx.save();             
            ctx.setTransform(m.a, m.b, m.c, m.d, m.e, m.f);
            ctx.drawImage(can.children[i], parseInt(elt[i].style.left), parseInt(elt[i].style.top), 180, 500);
            ctx.restore();
      } 
```

试验二：

根据许多教程，建议在转换时遵循缩放-旋转-翻译顺序，所以我尝试了这个

```
 for (var i = 0; i < elt.length; i++) {
            elt[i] = document.getElementById("Img" + i);
            can.appendChild(elt[i]);

        }
    for (var i = 0; i < elt.length; i++) {
         var m = new MSCSSMatrix(elt[i].style.transform);
             ctx.save();             
             ctx.scale(Math.sqrt((m.a * m.a) + (m.c * m.c)), Math.sqrt((m.b * m.b) + (m.d * m.d)));
             ctx.rotate(Math.atan(-(m.m21) / m.m22));
             ctx.translate(m.e, m.f);
             ctx.drawImage(can.children[i], parseInt(elt[i].style.left), parseInt(elt[i].style.top), 180, 500);
             ctx.restore();
      } 
```

在这两种情况下，仅翻译的转换图像都正确定位在画布上。但是当图像被缩放和平移时，变换后的图像不会出现在它们的正确位置。所以似乎只有在图像被缩放时，图像的坐标才会发生变化。我该如何解决这个问题！？

# c# - 对 ServiceStack.NET 的建议

> ID：14936114
> 
> 赞同：3
> 
> 时间：2013-02-18T12:17:51.910
> 
> 标签：c#, silverlight, servicestack, fluentvalidation, hint

将 ServiceStack.NET 与 Silverlight 一起使用的建议方法是使用 Linked-Project 插件。这启用了两个同步项目及其源，一个用于 Silverlight，一个用于 .NET 3.5+。

但是当涉及到验证时，这有点烦人。ServiceStack 正在使用 FluentValidation，这很酷。但它改变了命名空间。所以我最终得到：

```
using MyNamespace.Model;

// HERE ----------------------------
#if SILVERLIGHT
using FluentValidation;
#else
using ServiceStack.FluentValidation;
#endif
//TO HERE------------------------

namespace HR.RoBP.Contracts.Validators.Model
{
    public class CustomerValidator : AbstractValidator<Customer>
    {
        public CustomerValidator()
        {
            RuleFor(r => r.Name).NotEmpty().NotNull();
        }
    }
} 
```

这并不多，但是每次编写新的验证器时都会很烦人。我经常忘记它，编译，有错误，修复它。我知道 ServiceStack.NET 上的 FluentValidation 发生了一些变化。

但它必须在单独的命名空间中吗？

我认为保持代码文件清洁符合服务堆栈的利益。但是在客户端和服务器上使用相同的验证迫使我这样做。

如果有一种优雅的方法来解决这个问题，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:00:34.583

不幸的是，您[无法设置项目范围的命名空间别名](https://stackoverflow.com/questions/1159142/possible-to-alias-net-namespaces-in-app-config)。但是，您可以尝试[为您的验证器类编写一个](https://stackoverflow.com/questions/789239/does-c-sharp-support-project-wide-default-namespace-imports-like-vb-net)内置该样板代码的模板，并且您可以轻松地单击添加 -> 新项目 -> 您的验证器模板。

# regex - 正则表达式模式构造，以避免基于条件的选择性字符

> ID：14936118
> 
> 赞同：1
> 
> 时间：2013-02-18T12:18:09.000
> 
> 标签：regex, regex-lookarounds

我已经尝试了以下操作，并且预计会出现 o/p。

```
String valueIn = test-3-4-HH{3-4}-FF{38-99}
String[] valueInSplit = valueIn.split("-");

o/p array = [test, 3, 4, HH{3, 4}, FF{38, 99}] 
```

是否可以在正则表达式中创建一个模式来避免“{”和“}”之间的“-”所以预期的 o/p 应该是

```
o/p array = [test, 3, 4, HH{3-4}, FF{38-99}] 
```

有没有其他方法可以做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:44:39.630

这是可能的，假设只有 1 级括号`{}`，并且括号正确打开和关闭。将此正则表达式与`split`函数一起使用：

```
-(?![^{}]*}) 
```

作为字符串文字：

```
"-(?![^{}]*})" 
```

正则表达式检查`-`当前不在括号内，通过检查我们是否可以`}`从字符串的当前位置找到一个右括号，假设中间的字符没有左括号`{`或右括号`}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:48:40.813

您可以在拆分中使用负前瞻来实现此目的。基本上，您检查分隔符后是否有数字和右括号`-`。

这是我最终得到的结果：

```
-(?!\d+\}) 
```

# java - 在 Java 中检索大对象的选择属性的一种更好的执行方式

> ID：14936120
> 
> 赞同：1
> 
> 时间：2013-02-18T12:18:11.800
> 
> 标签：java, performance, collections, guava

有没有一种方法可以迭代 Collection 并且**只检索属性的子集而不加载/卸载每个要缓存的完整对象**？'因为当我只需要一些属性时，加载/卸载整个（可能是大的）对象似乎是一种浪费，尤其是在对象很大的情况下。加载这些不必要的数据时，可能会导致不必要的缓存冲突，对吧？

当我的意思是“加载到缓存”时，我的意思是通过处理器“处理”该对象。所以会有 ex: 10 个属性的对象。在迭代循环中，我只使用其中的 1 个。在这种情况下，我认为将所有其他 9 个属性从内存加载到处理器是一种浪费。难道没有解决方案只提取属性而不加载完整对象吗？

另外，像谷歌的番石榴这样的东西是否在内部解决了这个问题？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:09:44.920

它通常不是第一个查看的地方，但您遇到缓存共享问题肯定不是不可能的。如果您真的确信（通过对硬件计数器的实际分析或分析）这是一个值得解决的瓶颈，您可能会考虑更改数据结构以使用并行基元数组（类似于某些 DB 架构中基于列的数据库存储） . 例如，一个“列”作为 a `float[]`，另一个作为 a `short[]`，第三个作为 a `String[]`，都由相同的标识符索引。此结构允许您“查询”单个列，而无需将当前不需要的任何列加载到缓存中。

我有一些真正受益于 C 的低级算法代码`struct`。我对各种替代方案进行了一些微基准测试，发现并行阵列是我的算法最有效的选择（可能适用于您自己的算法，也可能不适用于您自己的算法）。

`java.util`请注意，与在集合中使用对象相比，并行数组结构的维护和变异要复杂得多。所以我要重申——我只会在你确信好处值得痛苦之后才会采用这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T06:32:02.213

Java 没有办法管理加载到处理器缓存，也没有办法改变 JVM 处理对象的方式，所以答案是否定的。Java 不是一种低级语言，它对程序员隐藏了这些细节。

JVM 将决定它加载多少对象。它可能会以某种预读优化的形式加载整个对象，或者仅加载您实际访问的字段，或者在 JIT 编译期间分析代码并将两者结合起来。

另外，你担心你的物体有多大？我很少看到有多个领域的课程，所以我不会考虑那么大。

# javascript - 在 javascript 中创建一个 3d 屋顶

> ID：14936121
> 
> 赞同：0
> 
> 时间：2013-02-18T12:18:15.240
> 
> 标签：javascript, html, css, drawing, fabricjs

我需要为一个项目制作一个 3d 屋顶，现在我唯一能想到的就是使用一个库来制作一个三角形，然后在它旁边放一个有角度的矩形，以获得 3d 效果。此外，三角形/屋顶的高度需要通过文本字段进行调整，人们可以在其中填写屋顶的高度。

我使用 Fabric.js 并取得了良好的开端，但此时我的脚本正在出错，没有给出任何错误......

[FabricJS绘图图像消失](https://stackoverflow.com/questions/14933747/fabricjs-drawing-image-dissapears)

如果有人对我可以最好地使用哪个库或如何制作这个程序有任何建议，那么任何让我开始这个项目的东西基本上都会有所帮助。

真诚的，哈门。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:22:55.283

你可以很`three.js`容易地做到这一点：

[http://mrdoob.github.com/three.js/examples/webgl_geometry_tessellation.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_tessellation.html)

这显示了使用键盘的用户输入：

[http://stemkoski.github.com/Three.js/Mesh-Movement.html](http://stemkoski.github.com/Three.js/Mesh-Movement.html)

和一些你好世界的例子：

[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)

希望这可以帮助

# objective-c - 如何在单独的 .h 和 .m 文件中创建类别？

> ID：14936122
> 
> 赞同：1
> 
> 时间：2013-02-18T12:18:16.633
> 
> 标签：objective-c

在我正在阅读的书中，他解释了如何在主文件中创建类别，但我试图弄清楚如何在单独的文件中执行此操作..

我想为 Fraction 类创建一个名为“MathOperations”的类别，因此我打开了一个名为 Fraction+MathOperations 的新 .h 和 .m，因为我知道这是惯例。

这是分数.h

```
#import "Fraction.h" 

@interface Fraction : NSObject

@property int numerator, denumerator;

-(void) print: (BOOL) test;
-(void) setTo: (int) n over: (int) d;
-(void) reduce;
-(double) convertToNum;
-(id) addFrac:(id)f;
-(void) justPrint;
-(id) initWith:(int)n over:(int)f;
+(Fraction *) allocF;
+(int) count;
+(int) gCounter;

@end 
```

分数+数学运算.h

```
#import "Fraction.h"

@interface Fraction (MathOperations)

-(Fraction *) add: (Fraction *) f;
-(Fraction *) substract: (Fraction *) f;
-(Fraction *) multiply: (Fraction *) f;
-(Fraction *) divide: (Fraction *) f;

@end 
```

分数+数学运算.m

```
 #import "Fraction.h"

@implementation Fraction (MathOperations)

-(Fraction *)add:(Fraction *)f
{
    extern int gCounter;
    Fraction *result = [[Fraction alloc] init];

    result.numerator = numerator * f.denumerator + denumerator * f.numerator;
    result.denumerator = denumerator * f.denumerator;
    [result reduce];
    ++gCounter;
    return result;

}

-(Fraction *)substract:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = numerator * f.denumerator - denumerator * f.numerator;
    result.denumerator = denumerator * f.denumerator;
    //[result reduce];
    return result;
}

-(Fraction *)multiply:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = numerator * f.numerator;
    result.denumerator = denumerator * f.denumerator;
    //[result reduce];
    return result;
}

-(Fraction *)divide:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = numerator * f.denumerator;
    result.denumerator = denumerator * f.numerator;
    //[result reduce];
    return result;
}

@end 
```

显然，我声明了一些错误，因为我得到了一堆未声明变量的错误。此外，在原始 Fraction 类中声明新接口和实现是否更合理？

错误：

在 Fraction 类中，我有一些名为“numerator”和“denumerator”的属性，它们似乎没有在 meth 实现文件 tnx 中声明

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:31:43.643

您应该使用`self.`前缀，就像`self.numerator`每个主类的属性一样。类别对属性没有任何“内部”访问权限，它的行为类似于任何外部用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:26:45.480

我想简单地改变这个：

```
#import "Fraction.h" 
```

对此：

```
#import "Fraction+MathOperations.h" 
```

在`Fraction+MathOperations.m`会做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:34:57.607

您的代码几乎是正确的，除了很少的错误。

在您的文件中找到更正后的 as 并替换

```
//
//  Fraction+MathOperations.m
//  prog3
//
//  Created by niroohayon  on 18/02/13.
//  Copyright (c) 2013 niroohayon . All rights reserved.
//

#import "Fraction.h"

@implementation Fraction (MathOperations)

-(Fraction *)add:(Fraction *)f
{
    //extern int gCounter;
    Fraction *result = [[Fraction alloc] init];

    result.numerator = self.numerator * f.denumerator + self.denumerator * f.numerator;
    result.denumerator = self.denumerator * f.denumerator;
    [result reduce];
   // ++gCounter;
    return result;

}

-(Fraction *)substract:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = self.numerator * f.denumerator - self.denumerator * f.numerator;
    result.denumerator = self.denumerator * f.denumerator;
    //[result reduce];
    return result;
}

-(Fraction *)multiply:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = self.numerator * f.numerator;
    result.denumerator = self.denumerator * f.denumerator;
    //[result reduce];
    return result;
}

-(Fraction *)divide:(Fraction *)f
{
    Fraction *result = [[Fraction alloc] init];

    result.numerator = self.numerator * f.denumerator;
    result.denumerator = self.denumerator * f.numerator;
    //[result reduce];
    return result;
}

@end 
```

# mercurial - 如何在使用 mq 合并 mercurial 中的分支时重新设置补丁队列？

> ID：14936124
> 
> 赞同：0
> 
> 时间：2013-02-18T12:18:19.843
> 
> 标签：mercurial, mercurial-queue

在我们的工作流程中，我们使用 Mercurial`mq`来开发`default`分支。但是，当我们需要将另一个分支合并到 中时`default`，将这些补丁应用到合并后的最佳实践是什么`default`？

明显（丑陋）的方式：弹出所有补丁，合并分支然后推送所有补丁并修复所有`.rej`文件......

正确的方法应该是以`rebase`某种方式使用，但不确定什么是正确的工作流程。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-31T21:36:12.197

rebase 命令本身知道 Mercurial 队列，至少在 Mercurial 的半新版本中是这样。

请参阅[rebase 文档，在](http://mercurial.selenic.com/wiki/RebaseExtension#Features)[MQ 文档](http://mercurial.selenic.com/wiki/MqExtension#Merging_patches_with_new_upstream_revisions)中提到此功能，以及[某人的博客文章](http://blog.vanaltj.com/2012/12/who-knew-mq-and-rebase-extensions-play.html)。

简而言之，您可以像对任何其他更改集一样对应用的 MQ 补丁进行 rebase，并且 rebase 足够聪明，可以确保它们在之后仍然作为 MQ 补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:41:00.983

我想`hg rebase --mq`可能会做你想做的事。如果没有，试试这个：

```
hg rebase -s qbase -d default 
```

# java - Lucene 4.1 中的 Lucene 3.6 中的 Document.setBoost() 等效于什么？

> ID：14936125
> 
> 赞同：3
> 
> 时间：2013-02-18T12:18:22.793
> 
> 标签：java, lucene

我正在尝试从 Lucene 3.6 升级到 4.1，但找不到文档提升的位置

Lucene 4.1 中的 Lucene 3.6 中的 Document.setBoost() 等效于什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:52:13.857

请查看[What is equivalent to Document.setBoost() from Lucene 3.6 in Lucene 4.1](http://mail-archives.apache.org/mod_mbox/lucene-java-user/201302.mbox/%3C009301ce0df4%24c1a52510%2444ef6f30%24@thetaphi.de%3E)。请特别注意引用迁移指南的线程中的最后一条消息。

# c# - 同一类中的 ObjectDataSource 和 select 方法

> ID：14936132
> 
> 赞同：0
> 
> 时间：2013-02-18T12:18:34.643
> 
> 标签：c#, asp.net, .net

是否可以在同一个类中拥有 objectdatasource 及其 select 方法？

```
public class Class1(): System.Web.UI.Page
{

   protected void Page_load(object sender,EventArgs e)
   {
     this.ObjectDataSource1.TypeName="Class1";
     this.ObjectDataSource1.SelectMethod="GetData";
     this.ObjectDataSource1.DataBind();
   }

   public Ilist<object> GetData()
   {
   //return list here
   }
} 
```

> 我收到错误“找不到 TypeName 属性中指定的类型”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:40:50.923

不要手动输入，而是使用[GetType](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)方法：

```
this.ObjectDataSource1.TypeName = this.GetType().FullName; 
```

这应该足够了。如果没有，您可以尝试`AssemblyQualifiedName`代替`FullName`.

# c# - 在 C# 中转换 java 代码。操作员错误

> ID：14936137
> 
> 赞同：1
> 
> 时间：2013-02-18T12:18:42.330
> 
> 标签：c#, java, operators

我正在做一个项目。在 C# 中转换 java 代码。如何在 C# 中转换以下 java 代码。

```
int h4; 
int e = h4;    
int[] w = new int[80]; 

e += 1518500249 + (a << 5 | a >> 27) + (b & c | (b^ 0xFFFFFFFF) & d) + w[0]; 
```

在第 4 行显示编译器错误“无法隐式地将类型 long 转换为 int”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:23:29.173

将变量的类型从 更改`int`为`long`怎么样？

```
long h4;
long e = h4;    
long[] w = new long[80]; 

e += 1518500249 + (a << 5 | a >> 27) + (b & c | (b ^ 0xFFFFFFFF) & d) + w[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:23:11.133

'e' 在哪里声明？它是'int'类型吗？如果是这样，将其更改为“长”并从那里调试

编辑：没关系，我明白了 - 计算结果为“长”。编译器看到并告诉您不能将“long”隐式转换为“int”

使用 'long' 将解决此问题

# android - 将 .apk 文件转换为 jar 文件时出错

> ID：14936143
> 
> 赞同：0
> 
> 时间：2013-02-18T12:19:05.730
> 
> 标签：android, jar, apk

我正在尝试将 .apk 转换为 jar，为此我使用了以下链接 [http://androidorigin.blogspot.in/2011/02/dex-format-to-jar-format.html](http://androidorigin.blogspot.in/2011/02/dex-format-to-jar-format.html)

但现在我遇到了错误。作为：-

```
this cmd is deprecated, use the d2j-dex2jar if possible
dex2jar version: translator-0.0.9.13
dex2jar Health.apk -> Health_dex2jar.jar
. while process file: [Health.apk]
. ROOT cause:
java.io.FileNotFoundException: File 'Health.apk' does not exist
at org.apache.commons.io.FileUtils.openInputStream(FileUtils.java:56)
at org.apache.commons.io.FileUtils.readFileToByteArray(FileUtils.java:40)
at com.googlecode.dex2jar.reader.DexFileReader.readDex(DexFileReader.java:150)
at com.googlecode.dex2jar.v3.Main.doFile(Main.java:63)
at com.googlecode.dex2jar.v3.Main.main(Main.java:86)
Done. 
```

谁能帮我..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:29:59.587

在[dex2jar](https://code.google.com/p/dex2jar/)的网站上下载[dex2jar 。](https://code.google.com/p/dex2jar/downloads/detail?name=dex2jar-0.0.9.13.zip&can=2&q=)

提取里面的文件。

将您的 apk 拖入一个名为的文件名`d2j-dex2jar.bat`中，您的转换后的 jar 应该出现在您的 apk 文件所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T03:30:59.253

您应该首先将您的 app.apk 重命名为 app.zip。然后解压 zip 得到一个 class.dex 文件。将文件移动到 dex2file 目录。然后尝试将dex文件转换为jar。这就是为什么它被称为dex2jar。

# c++ - 析构函数调用中信号 11 的可能原因是什么？

> ID：14936145
> 
> 赞同：0
> 
> 时间：2013-02-18T12:19:13.313
> 
> 标签：c++, assembly, g++, segmentation-fault, coredump

我有以下循环（当使用 delete[] 删除 SgApp 类型的 24 个对象的数组时会发生这种情况）

```
 0x086f5361 <+45>:    cmp    ebx,DWORD PTR [esi+0x4]
   0x086f5364 <+48>:    je     0x86f5375 <PSM::~PSM()+65>
   0x086f5366 <+50>:    sub    ebx,0xd4
   0x086f536c <+56>:    mov    eax,DWORD PTR [ebx]
   0x086f536e <+58>:    mov    DWORD PTR [esp],ebx
=> 0x086f5371 <+61>:    call   DWORD PTR [eax]
   0x086f5373 <+63>:    jmp    0x86f5361 <PSM::~PSM()+45> 
```

在这段代码中，%ebx 就像一个迭代器，%esi 指向数组的开头并且 sizeof(SgApp)=0xd4。在数组的开头，前 4 个字节表示数字 24。行`0x086f5371 <+61>: call DWORD PTR [eax]`调用 SgApp 默认的虚拟析构函数。

1.  从这段代码中，我了解到对象的第一个 DWORD 指向一个 vtable，而 vtable 中的第一个 DWORD 指向析构函数。这个对吗？每次我有一个虚拟析构函数时都会发生这种情况？

2.  在什么情况下调用析构函数会导致该行出现信号 11 段错误`0x086f5371 <+61>: call DWORD PTR [eax]`？我的猜测是 %eax 指向的值在某个未分配的区域中，但可能的原因是什么？此时我应该拥有所有 24 个 SgApp 类型的对象（它们是在构造函数中创建的）。

我提到这个信号 11 只发生了一次，我得到的只是一个糟糕的核心转储。在正常情况下，这是不可重现的，所以我正在寻找所有可能的解释，包括一些硬件故障或一些奇异的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:35:11.833

我会推测你没有遵循[三规则，](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)你最终会得到两个或更多指向同一个动态分配数组的对象。当他们的析构函数被调用时，第二次调用会导致尝试`delete []`一些已经被`delete[]`编辑过的东西。

# android - 使用静态侦听器重构代码

> ID：14936147
> 
> 赞同：1
> 
> 时间：2013-02-18T12:19:15.933
> 
> 标签：android, static, refactoring, listener

经过一些调试，我在现有的*生产*代码中发现了以下内容：

```
public class SomeTTS {
    private static TTSSpeechListener mSpeechListener;
    private static TTSBreakListener mBreakListener;
    // more static (!!!) listeners
    private String mPath;

    public TTS(String path, TTSSpeechListener speechListener)
            throws RuntimeException {
        // ...
        mSpeechListener = speechListener;
        mBreakListener = null;
        // more listeners set to null
        // ...
    }
    // called from NATIVE code that I cannot change
    private static void onReceiveSpeechData(byte[] samples) {
        mSpeechListener.onSpeechData(samples);
    }
    // ...
} 
```

该类是原生库（Android、NDK、JNI）的包装器。我无权访问本机库源。（当然，您看到了问题：在我创建 的第二个实例后`SomeTTS`，第一个实例不再工作。）我有点震惊：除了小学生之外，我不会指望任何人会出现这样的错误。可能他们正在使用童工。或者，更有可能的是，有人无法向他的经理解释演示代码和生产代码之间的区别。

无论如何，我必须让它工作。我有一些想法，但我目前能提出的建议远非完美。任何想法如何重构它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:51:34.650

这就是我所做的：我让这个类被破坏并将它包装在一个提供合理 ​​API 的类中。

由于它是 TTS，而且让 TTS 一次只发出一个请求是合理的，我使用了一个指向当前 SomeTTS 实例的静态指针，并使调用同步。我无法修复这个`SomeTTS`类，但我可以确保我对其方法的调用是正确的——顺便说一句，这意味着我不调用某些方法。

```
public class SomeTTS {
    private TTSSpeechListener mSpeechListener;
    // ... more listeners, NOT static ...

    private static volatile SomeTTS currentTTS;
    protected static Object currentTtsAccessLock = new Object();

    public static TTSSpeechListener currentSpeechListener() {
        synchronized (currentTtsAccessLock) {
            return currentTTS == null ? null : currentTTS.mSpeechListener;
        }
    }
    public static void setCurrentTTS(SomeTTS tts) {
        synchronized (currentTtsAccessLock) {
            currentTTS = tts;
        }
    }

    // called from NATIVE code that I cannot change
    private static void onReceiveSpeechData(byte[] samples) {
        TTSSpeechListener speechListener = currentSpeechListener();
        if (speechListener != null) {
            speechListener.onSpeechData(samples);
        } else  {
            // Just no better idea. But this should never happen.
            Log.e("SomeTTS","ERROR: speechListener == null  samples: "+samples.length);
        }
    }

    // ...
} 
```

这就是这堂课的全部内容。仍然可能对其方法进行错误调用；纪律是`MyTTSEngine`改用。那个类，`MyTTSEngine`提供了一个合理的 API；`SomeTTS`才不是。

```
class MyTTSEngine {
    private SomeTTS mTTS;
    private Object upperLevelTtsLock = new Object();

    // ...

    public void say(String text) {
        // ...
        synchronized (upperLevelTtsLock) {
            TTS.setCurrentTTS(mTTS);
            try {
                mTTS.clearAbortState();
                mTTS.synthesizeFromString(text);
            } finally {
                TTS.setCurrentTTS(null);
            }
        }
        // ...
    }
} 
```

# c# - 黑莓推送消息

> ID：14936155
> 
> 赞同：1
> 
> 时间：2013-02-18T12:19:34.500
> 
> 标签：c#, .net, blackberry, push-notification, push

我已经构建了一个简单的 BlackBerry 应用程序，现在我想在其中实现一个小聊天功能。这个想法是通过网络服务向服务器发送消息。这已成功实施。我现在需要在我的 BlackBerry 应用程序中接收回复。成功捕获服务器的响应。如何将此响应推送到黑莓手机。我已通过电子邮件中收到的评估凭证在我的 BlackBerry 中成功注册 Push Service。我用 C# 编写了一个简单的服务器端代码，但它从来没有工作过。下面是我的 C# 代码。任何人都可以指导我吗？我的设备从未收到推送消息。可能是我做错了。

请帮忙！

```
public bool pushToWidget(string pushedMessage, string pushPin)
    {
        String BESAddress = "https://pushapi.eval.blackberry.com/mss/PD_pushRequest";
        String BESWebserverListenPort = "106"; //random
        String widgetNotificationUrl = "https://pushapi.eval.blackberry.com/mss/PD_pushRequest";
        String pushUserName = "xxx";
        String pushPassword = "xxx";
        String pushPort = "xxxx ";
        string Boundary = "Boundary ";
        String ID = "xxx-xxxx";
        string DeliverBefore = DateTime.UtcNow.AddMinutes(60).ToString("s", 

        System.Globalization.CultureInfo.InvariantCulture) + "Z";
        Response.Write(DeliverBefore);
        bool success = true;
        StringBuilder Data = new StringBuilder();
        Data.AppendLine("--" + Boundary);
        Data.AppendLine("Content-Type: application/xml; charset=utf-8");
        Data.AppendLine("");
        Data.AppendLine("<?xml version=\"1.0\"?>");
        Data.AppendLine("<!DOCTYPE pap PUBLIC \"-//WAPFORUM//DTD PAP 2.1//EN\">");
        Data.AppendLine("<pap>");
        Data.AppendLine("<push-message push-id=" + (char)34 + ID + (char)34 + 
           " deliver-before-timestamp=" + (char)34 + DeliverBefore + (char)34 + 
           " source-reference=" + (char)34 + pushUserName + (char)34 + ">");
        Data.AppendLine("<address address-value=\"" + pushPin + "\"/>");
        Data.AppendLine("<quality-of-service delivery-method=\"unconfirmed\"/>");
        Data.AppendLine("</push-message>");
        Data.AppendLine("</pap>");
        Data.AppendLine("--" + Boundary);
        Data.AppendLine("Content-Type: text/plain");
        Data.AppendLine("Push-Message-ID: " + ID);
        Data.AppendLine("");
        Data.AppendLine(pushedMessage);
        Data.AppendLine("--" + Boundary + "--");
        Data.AppendLine("");
        byte[] bytes = Encoding.ASCII.GetBytes(Data.ToString());

        Stream requestStream = null;
        HttpWebResponse HttpWRes = null;
        HttpWebRequest HttpWReq = null;

        try
        { 
            string httpURL = BESAddress + ":" + BESWebserverListenPort
                + "/push?DESTINATION=" + pushPin + "&PORT=" + pushPort
                + "&REQUESTURI=/";

            //make the connection
            HttpWReq = (HttpWebRequest)WebRequest.Create(httpURL);
            HttpWReq.Method = ("POST");
            //add the headers nessecary for the push
            HttpWReq.ContentType = "text/plain";
            HttpWReq.ContentLength = bytes.Length;
            // ******* Test this *******
            HttpWReq.Headers.Add("X-Rim-Push-Id", pushPin + "~" + DateTime.Now); //"~" + pushedMessage +
            // HttpWReq.Headers.Add("X-Rim-Push-Reliability", "application-preferred");
            HttpWReq.Headers.Add("X-Rim-Push-NotifyURL", (widgetNotificationUrl + 
                pushPin + "~" + pushedMessage + "~" + DateTime.Now).Replace(" ", ""));

            // *************************

            HttpWReq.Credentials = new NetworkCredential(pushUserName, pushPassword);
            Console.WriteLine(pushedMessage);
            requestStream = HttpWReq.GetRequestStream();
            //Write the data from the source
            requestStream.Write(bytes, 0, bytes.Length);
            requestStream.Close();
            //get the response
            HttpWRes = (HttpWebResponse)HttpWReq.GetResponse();
            String response = HttpWRes.ToString();

            //if the MDS received the push parameters correctly it will either respond with okay or accepted
            if (HttpWRes.StatusCode == HttpStatusCode.OK || HttpWRes.StatusCode == HttpStatusCode.Accepted)
            {
                success = true;
            }
            else
            {
                success = false;
            }
            //Close the streams

            HttpWRes.Close();
            requestStream.Close();
        }
        catch (System.Exception e)
        {
            success = false;
        }

        return success;
    } 
```

# css - css 没有显示在我的网页上

> ID：14936159
> 
> 赞同：1
> 
> 时间：2013-02-18T12:19:46.030
> 
> 标签：css

我刚刚通过 cpanel 中的文件管理器将我的 html 压缩页面上传到我的网站。这是可爱的。但是发生的事情是，即使我已将 css 文件和图像上传到与我的 html 页面相同的文件夹，“页面”也没有显示我的 css 或背景图像。

有趣的是，当我从桌面将我的 html 页面“打开”到浏览器中时，一切都正确显示。我似乎无法在这里发布我的css文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:56:50.810

如果您想在 chrome 中查看源代码，请右键单击页面并选择“查看页面源代码”或“查看源代码”（或类似的东西，我的 chrome 不是英文，所以我猜是翻译。）

然后在您的页面源代码中查找 head 部分并在此处发布指向 css 文件的链接。它可能看起来像这样：

```
<link rel="stylesheet" type="text/css" media="all" href="http://www.mywebsite.com/css/[nameofyourstylesheet].css" /> 
```

我的第一个猜测是你的 css 文件链接到你硬盘上的 css 文件。

# python - django - DetailView 如何同时显示两个模型

> ID：14936160
> 
> 赞同：5
> 
> 时间：2013-02-18T12:19:50.270
> 
> 标签：python, django

我有两个模型：广告和横幅

当我使用“通用视图”DetailView 如何同时带两个模型下面的代码只带一个广告

我的 url.py

```
url(r'^(?P<pk>\d+)/$', DetailView.as_view(
    model               = Advertisment,
    context_object_name = 'advertisment',
), name='cars-advertisment-detail'), 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T12:29:15.353

当然，只需覆盖`get_context_data`即可将内容添加到上下文中。

```
path('<int:pk>/', YourDetailView.as_view(), name='cars-advertisment-detail'),

class YourDetailView(DetailView):
    context_object_name = 'advertisment'
    model = Advertisement

    def get_context_data(self, **kwargs):
        """
        This has been overridden to add `car` to the template context,
        now you can use {{ car }} within the template
        """
        context = super().get_context_data(**kwargs)
        context['car'] = Car.objects.get(registration='DK52 WLG')
        return context 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:49:09.433

对我来说，制作这样的自定义 mixin 更容易：

```
class ExtraContextMixin(object):

    def get_context_data(self, **kwargs):
        context = super(ExtraContextMixin, self).get_context_data(**kwargs)
        context.update(self.extra())
        return context

    def extra(self):
        return dict() 
```

稍后你可以只继承这个mixin，然后覆盖`extra`这样的：

```
class MyDetailView(ExtraContextMixin, DetailView):

    def extra(self):
        extra = Extra.objects.all()
        return dict(extra = extra) 
```

我认为这更干净而不是压倒一切`get_context_data`

# java - 在 List 中寻找价值

> ID：14936161
> 
> 赞同：3
> 
> 时间：2013-02-18T12:19:51.033
> 
> 标签：java, list, collections

我已将 List 声明为

```
 private List<Employees> employees; 
```

在我使用 DAO 从数据库中获取值

```
 employees= new ArrayList<Employees>();
        employees.addAll(myDAO.getEmployees()); 
```

我想在 中搜索一个值，在`employees List`中寻找一个值的最佳方法是`employees List`什么？

我试过了

```
 Collections.sort(employees);
    int index = Collections.binarySearch(employees, "abc"); 
```

但是我得到了演员异常

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:25:09.860

```
Collections.sort(employees); // BigO - nlog(n)
int index = Collections.binarySearch(employees, new Employee("abc",...)); // BigO - log(n) 
```

如果您每次对列表进行排序并对其进行搜索，则代码复杂性将是`nlog(n) + log(n)`排序`nlog(n)`列表和`log(n)`二进制搜索的位置。

如果您线性搜索列表会更好。班轮搜索将采用`BigO - n`比以前的方法表现更好的方法。

* * *

您正在`cast Exception`使用`Collections#sort`方法，因为您的列表包含`null value`无法投 Employee 和 raise`ClassCastException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:25:21.097

```
Employees lookingForValue(String value, List<Employees> employees)
{
    for (Employees employee : employees)
    {
       if (value.equals(employee.getFieldValue()))
       {
          return employee;
       }
    }
    return null;
} 
```

用法

```
lookingForValue("abc", employees); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:25:38.920

如果你不能使用

```
myDAO.getEmployees(parameter); 
```

并在您的 DAO 中**放置一个 where 子句，** 然后您可以执行一个 for 并搜索一个对象

```
Employee emp = null;

    for(Employee e : employees) {
       if(e.getName().equals("X"))
           emp = e;
    }

    if(emp != null) {
      //handle the found employee
    }
    else {
      //employee not in list
    } 
```

当然你也可以覆盖它的 equals 方法，用该列实例化一个对象并使用（我不推荐它）

```
myDAO.getEmployees().get(object); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T12:26:19.407

遍历列表并执行搜索操作：

```
String searchString = "abc";
for(Employee employee: employees) {
  if(employee.getName().equals(searchString)) {
    // Found something!
  }
} 
```

如果要搜索 的所有字段`Employee`，您可能需要创建一个方法`Employee`来检查实例上的所有字段：

```
boolean findString(String searchString) {
  if(getName().equals(searchString)) return true;
  if(getCity().equals(searchString)) return true;
  // etc..
  return false;
} 
```

`for`并在您的-loop中使用此方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T12:26:34.683

如果您的列表非常大，我建议在 DAO 中进行搜索 - 可以调整 dbs 以获得此类搜索的最佳性能（例如`select * from employees where name = 'abc'`），然后使用 DAO 方法仅返回匹配的项目。

另一个不错的选择是 apache-commons [Predicate](http://commons.apache.org/collections//apidocs/org/apache/commons/collections/Predicate.html)

例如

```
matches = CollectionUtils.filter(employees, new Predicate<Employee>()
{
  @Override
  public boolean evaluate(Employee object)

    return "abc".equals(object.getName());
  }
}); 
```

显然，参数化“abc”。如果要重用 Predicate，请将其设为命名类。

如果您有许多不同的方式要过滤集合，谓词实现特别有用；加上它为真正的平等检查留下了自由。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T12:27:21.730

你在正确的轨道上。只需覆盖Employees中的equals方法（这不应该是Employee吗？它描述的是员工的集合还是只有一个？）

然后您的代码应该可以工作。您还可以如上所述对您的员工进行排序并提供一个比较器：

```
Collections.sort(fields, new Comparator<Employee>() {
    @Override
    public int compare(Employee o1,Employee o2) {
        // TODO Rerturn 0 if equal or either 1 or -1 depending which of o1 or o2 is the bigger
    }
}) 
```

在后一种方法中，您不需要覆盖 equals 方法。

# php - 会话值会在一段时间后自动更改

> ID：14936162
> 
> 赞同：1
> 
> 时间：2013-02-18T12:19:53.860
> 
> 标签：php, session

我真的很想知道一个如此令人困惑的问题。我有一个以 URL 作为值的会话：

```
$_SESSION['url'] => 'http://www.domain.com/path/'; 
```

`path/`已经改写，不是真正的目录。会话已设置，`page1.php`并且有指向 的链接`page2.php`。当我单击链接并转到时，如果我在加载`page2.php`后做得如此之快，那么它的值是正确的。`page1.php``$_SESSION['url']`

但是当我停留 10 秒然后点击链接并转到`page2.php`，甚至停留 10 秒然后刷新它，会话值会自动更改为`404.shtml`；

我的意思是，它的值将更改为`http://www.domain.com/404.shtml`. 请注意，这只发生在 URL 值和其他值正确的情况下。

我真的很困惑这里发生了什么？有没有人经历过这种情况？

**编辑**
page1.php

```
session_start();
$_SESSION['url'] => 'http://www.domain.com/path/'; 
```

page2.php

```
session_start();
echo $_SESSION['url']; // Output is 'http://www.domain.com/404.shtml' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:55:37.680

要做的事情清单：

1.  是否有任何库/包含访问 $_SESSION['url'] 变量？禁用/取消包含它们。
2.  会话中是否更改了任何其他变量？
3.  尝试将变量从 $_SESSION['url'] 重命名为 $_SESSION['test']

# android - 显示 inputMethod 并在 Keypressed Android 上获取 keycode

> ID：14936164
> 
> 赞同：0
> 
> 时间：2013-02-18T12:20:03.263
> 
> 标签：android, listener, android-softkeyboard, keycode, ime

我知道还有其他一些帖子问类似的事情，但我不知道该怎么做。

我的情况如下：

我有一个带有几个片段的 FragmentActivity，这是一个键盘片段，当它被选中时，会显示软键盘。这我终于发现如何在没有 Edittext 的情况下做到这一点

```
InputMethodManager imm = 
        (InputMethodManager) EngelMote.this.getSystemService(Context.INPUT_METHOD_SERVICE); 
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 
            InputMethodManager.HIDE_IMPLICIT_ONLY);
    imm.showSoftInput(EngelMote.this.findViewById(R.id.actionbar), InputMethodManager.SHOW_FORCED); 
```

现在我的下一步是获取用户按下的键码，获取字母或其他内容对我没有用。

我想要的是 KeyCode，所以如果用户按下键“a”我想得到 KeyCode.Key_A

我尝试了很多方法来做到这一点。重写 dispatchKey，实现 onKeyListener。无法获取软键盘的输入键。

有谁知道该怎么做？

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:51:28.653

也许你应该使用 EditorActionListener：http: [//developer.android.com/reference/android/widget/TextView.html#setOnEditorActionListener%28android.widget.TextView.OnEditorActionListener%29](http://developer.android.com/reference/android/widget/TextView.html#setOnEditorActionListener%28android.widget.TextView.OnEditorActionListener%29)

# java - Jar bundler 没有从 jar 文件中自动获取主类。你能描述一下整个过程吗？

> ID：14936167
> 
> 赞同：1
> 
> 时间：2013-02-18T12:20:06.123
> 
> 标签：java, macos, .app

我需要通过mac os x 中的**jar bundler**将 jar 文件包装在 .app 文件中，但是每当我要这样做时，这个***jar bundler 可以从 jar***文件中获取主类，但是这个 jar 在 Windows 或 Linux 平台上运行良好，请给我链接或将 jar 文件包装到 mac os 可执行文件 ( **.app** )的正确分步说明。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:57:02.417

只需将 ant builder 与自定义 build.xml 文件一起使用

使用ant的命令是。

在点击命令后，通过终端转到 build.xml 文件的位置。

```
 $ant yourTargetName 
```

在 build.xml 文件中声明目标名称的位置。

```
<?xml version="1.0"?>
  <project name="Project Name" default="default" basedir=".">

    <taskdef name="bundleapp"
     classname="com.oracle.appbundler.AppBundlerTask"
     classpath="lib/appbundler-1.0.jar" />

     <target name="bundle-Target Name">
       <bundleapp outputdirectory="."
           name="Your Project Name"
           displayname="yourProjectDisplayName"
           identifier="yourMainClassName"
           shortversion="1.0"
           applicationCategory="public.app-category.developer-tools"
           mainclassname="yourMainClassName">

           <classpath file="/yourJarFileLocation"/>
           <option value="-Dapple.laf.useScreenMenuBar=true"/>
       </bundleapp>
     </target>
  </project> 
```

包装这个 .app 文件。

在终端上点击命令。

```
 $productbuild --component filename.pkg /your app file location 
```

# equation - 从方程实现 CRC 算法

> ID：14936168
> 
> 赞同：3
> 
> 时间：2013-02-18T12:20:12.103
> 
> 标签：equation, crc, crc16

我正在处理一个说要使用这个 16 位循环冗余校验的设备：

```
CCITT CRC-16 with polynomial x^16 + x^12 + x^5 + x^1 
```

我寻找了这种算法的实现，但我确实只找到了等式的最后一项等于`1`(ie `x^0`) 而不是 的算法`x^1`，例如[this one](http://www.eagleairaust.com.au/code/crc16.htm)或[this](http://www.nongnu.org/avr-libc/user-manual/group__util__crc.html#ga1c1d3ad875310cbc58000e24d981ad20)。

当我意识到我不知道如何开始时，我打算自己实现算法。应该如何从方程开始进行 CRC 计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:29:31.700

此 PDF 文件解释了主题：[hackersdelight.org/crc.pdf](http://www.hackersdelight.org/crc.pdf)。

我还推荐 Andrew Tanenbaum 的 Computer Networks，因为它有一章是关于 CRC 算法的。

最后，我会仔细检查您的设备是否确实实现了这种形式的 CRC，而不是标准的。这可能只是一个错字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:27:41.603

你是对的，多项式是错的。正确的 CRC 多项式必须始终具有 1 项。CCITT CRC-16 多项式是 x^16 + x^12 + x^5 + 1，如@guga 所述，或位形式的 0x1021（不包含 x^16）。请参阅此[16 位 CRC 目录](http://reveng.sourceforge.net/crc-catalogue/16.htm)。

除了多项式之外，那里的信息还提供了您需要的其他关键信息。具体来说：

```
width=16 poly=0x1021 init=0x1d0f refin=false refout=false xorout=0x0000 check=0xe5cc 
```

这意味着 CRC 不是位反射的，它是用 初始化的`0x1d0f`，并且结果不是与任何东西异或。所以无字节的 CCITT CRC 为`0x1d0f`。它还提供了对 ASCII 数字“123456789”的九字节字符串的校验值`0xe5cc`。您应该使用它来检查您的实现。

[Ross Williams 指南](http://www.ross.net/crc/download/crc_v3.txt)将告诉您有关实施 CRC 的所有信息。

# asp.net - ASP.Net 页面上使用的控件数量的计数

> ID：14936178
> 
> 赞同：0
> 
> 时间：2013-02-18T12:20:42.403
> 
> 标签：asp.net

有没有办法在不创建 Page 类的实例的情况下获取 ASP.Net 页面上使用的控件数量的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:36:39.380

Asp.net 服务器端控件仅在您创建页面实例后才存在。除非您创建页面类的实例，否则控件不存在，因此不存在计算它们的问题。

从描述中，我假设您想知道可以从特定标记（即 xxx.aspx 页面 html）创建多少控件。我会为此提出一些想法，我自己没有使用过它们，但可能对你有用。

1.  aspx 页面本质上包含 xml，因此您可以将其作为 xml 文档打开并计算所有已设置 runat="server" 的标签。这将为您提供包含此属性的节点的计数，这些属性是服务器端控件

2.  读取 aspx 文件的内容并计算特定字符串“runat=server”的实例，这将为您提供相同的结果，但方式更简单

3.  使用 html agility pack 打开 aspx 页面，执行与上面 1 和 2 中相同的操作。

本质上，您正在检查创建页面实例时可能导致服务器端控件的标记。

请记住，从后面的代码动态创建的控件不会被计算在内，只有使用设计器创建的控件才会被计算在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:23:07.470

您可以使用如下方法：

```
public int CountControls(Control top)
{
    int cnt = 1;
    foreach (Control c in top.Controls)
        cnt += CountControls(c);
    return cnt;
} 
```

并称它为

```
CountControls(Page); 
```

甚至

```
 int count =Page.Controls.Count; 
```

# regex - 从文本文件中提取特定数字

> ID：14936181
> 
> 赞同：0
> 
> 时间：2013-02-18T12:20:57.003
> 
> 标签：regex, perl, sed, grep

我有一个包含内容的文本文件 test.hd

```
gated window upper limit:=1.15
gated window lower limit:=0.87
gated frame mode:=variable time
gated beats accepted:=631
gated beats rejected:=1
gated longest beat:=1.0455
gated shortest beat:=0.8722
gated average beat:=0.9472
applied zoom:=2.15
zoom origin x:=272
zoom origin y:=288 
```

在我的 shell 脚本中，我想使用 sed 或 perl one liner 分配一个变量最长节拍和最短节拍。目前我可以用更多，grep 和 cut

```
more test.hd | grep 'longest beat' | cut -f 2 -d = 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:43:25.990

这是一种使用方法`sed`：

```
longest_beat=$(sed -n '/longest beat/s/.*=//p' test.hd)
shortest_beat=$(sed -n '/shortest beat/s/.*=//p' test.hd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:31:38.997

您可以使用简单的正则表达式来捕获目标值：

```
use strict;
use warnings;

my ($short, $long);
while (<DATA>) {
    if (/longest beat:=(\S+)/) {
        $long = $1;
    } elsif (/shortest beat:=(\S+)/) {
        $short = $1;
    }
}
print "Longest beat: $long\n";
print "Shortest beat: $short\n";

__DATA__
gated window upper limit:=1.15
gated window lower limit:=0.87
gated frame mode:=variable time
gated beats accepted:=631
gated beats rejected:=1
gated longest beat:=1.0455
gated shortest beat:=0.8722
gated average beat:=0.9472
applied zoom:=2.15
zoom origin x:=272
zoom origin y:=288 
```

**输出：**

```
Longest beat: 1.0455
Shortest beat: 0.8722 
```

文件句柄可以是你需要的`DATA`任何文件句柄，当然这只是为了演示。

更通用的版本是简单地提取所有键/值对：

```
my %data;
while (<DATA>) {
    chomp;
    my ($key, $value) = split /:=/, $_, 2;   # split on := max two fields
    $data{$key} = $value;
}
print "Longest beat: $data{'gated longest beat'}\n";
print "Shortest beat: $data{'gated shortest beat'}\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:38:03.170

```
long=`perl -F"=" -ane 'print $F[1] if(/longest beat/)' your_file`
short=`perl -F"=" -ane 'print $F[1] if(/shortest beat/)' your_file` 
```

also you can use:

```
sed -n 's/.*longest beat:=//gp' 
```

tested below:

```
> cat temp
gated window upper limit:=1.15
gated window lower limit:=0.87
gated frame mode:=variable time
gated beats accepted:=631
gated beats rejected:=1
gated longest beat:=1.0455
gated shortest beat:=0.8722
gated average beat:=0.9472
applied zoom:=2.15
zoom origin x:=272
zoom origin y:=288
> 
> 
> 
> cat temp.sh
#!/bin/sh

long=`perl -F"=" -ane 'print $F[1] if(/longest beat/)' temp`
short=`perl -F"=" -ane 'print $F[1] if(/shortest beat/)' temp`

echo $long
echo $short
> 
> 
> ./temp.sh
1.0455
0.8722
>
> cat temp.sh
#!/bin/sh

long=`sed -n 's/.*longest beat:=//gp' temp`
short=`perl -F"=" -ane 'print $F[1] if(/shortest beat/)' temp`

echo $long
echo $short
> ./temp.sh
1.0455
0.8722
> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T19:44:31.240

这是使用带有哈希的捕获的一个选项：

```
use strict;
use warnings;

my %hash;

while (<DATA>) {
    $hash{$1} = $2 if /((?:longest|shortest) beat):=(\S+)/;
}

print "\u$_: $hash{$_}\n" for keys %hash;

__DATA__
gated window upper limit:=1.15
gated window lower limit:=0.87
gated frame mode:=variable time
gated beats accepted:=631
gated beats rejected:=1
gated longest beat:=1.0455
gated shortest beat:=0.8722
gated average beat:=0.9472
applied zoom:=2.15
zoom origin x:=272
zoom origin y:=288 
```

输出：

```
Shortest beat: 0.8722
Longest beat: 1.0455 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T12:28:25.520

`more`这里不需要。您可以指定文件名`grep`或将其重定向到其标准输入。然后，使用命令替换：

```
longest_beat=$(grep 'longest beat' test.hd | cut -d= -f2) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T12:30:27.533

像这样的东西怎么样：

```
my ($longest_beat, $shortest_beat);

while (<DATA>) { # insert your own filehandle here
  $longest_beat  = $1, next if /longest beat:=\s*(\S+)/; 
  $shortest_beat = $1, next if /shortest beat:=\s*(\S+)/;
}

print $longest_beat, "\n";
print $shortest_beat, "\n"; 
```

[**演示**](http://ideone.com/7bifKm)。

# mysql - sqlalchemy + pymysql + gevent

> ID：14936186
> 
> 赞同：2
> 
> 时间：2013-02-18T12:21:29.887
> 
> 标签：mysql, sqlalchemy, gevent, pymysql

我是 python 新手，但它似乎是一种有趣的语言，所以我想继续学习它。

我一直在寻找关于这个主题的信息，但我似乎找不到任何像样的来源。我已经安装了 Python3.3、Pymysql、SQLAlchemy、(Pyramid) 和 MySQL。

使用此连接字符串使用 pymysql 连接到数据库可以正常工作。我使用 pymysql 是因为我想对数据库 (gevent) 进行异步调用，并且我需要 SQLAlchemy 以便可以进行对象映射。

我目前正在 pythonWin 屏幕中测试我们是否可以连接到我们的数据库。

```
import pymysql    
con = pymysql.connect(db='dbeerste', user='admin', passwd='admin', host='localhost', port=3306)    
cur = con.cursor(); 
cur.execute("SELECT * FROM dbeerste.tabel1;") 
```

将这两个结合起来似乎对我不起作用。

```
import pymysql
import sqlalchemy
engine = sqlalchemy.create_engine("mysql+pymysql://admin:admin@127.0.0.1/dbeerste")
engine.connect()
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 1651, in connect
    return self._connection_cls(self, **kwargs)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 59, in __init__
    self.__connection = connection or engine.raw_connection()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 1709, in raw_connection
    return self.pool.unique_connection()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\pool.py", line 220, in unique_connection
    return _ConnectionFairy(self).checkout()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\pool.py", line 425, in __init__
    rec = self._connection_record = pool._do_get()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\pool.py", line 777, in _do_get
    con = self._create_connection()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\pool.py", line 225, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\pool.py", line 322, in __init__
    exec_once(self.connection, self)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\event.py", line 381, in exec_once
    self(*args, **kw)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\event.py", line 398, in __call__
    fn(*args, **kw)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\strategies.py", line 168, in first_connect
    dialect.initialize(c)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\dialects\mysql\base.py", line 2052, in initialize
    default.DefaultDialect.initialize(self, connection)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\default.py", line 172, in initialize
    self._get_default_schema_name(connection)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\dialects\mysql\base.py", line 2019, in _get_default_schema_name
    return connection.execute('SELECT DATABASE()').scalar()
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 664, in execute
    params)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 808, in _execute_text
    statement, parameters
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\base.py", line 871, in _execute_context
    context)
  File "C:\Python33\lib\site-packages\sqlalchemy-0.8.0b2-py3.3.egg\sqlalchemy\engine\default.py", line 322, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Python33\lib\site-packages\pymysql3-0.4-py3.3.egg\pymysql\cursors.py", line 96, in execute
    #query = query % conn.escape(args)
TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple' 
```

谁能帮我解决这个问题，我会很感激任何回应

ps：由于我是语言新手，我很想听到任何回应，如果有人有任何建议以另一种方式做到这一点，请输入您的意见。我不拘泥于很多东西，只有 Python3.3、异步调用和使用 MVC。

# c# - 泛型/委托和带参数的传递函数

> ID：14936189
> 
> 赞同：4
> 
> 时间：2013-02-18T12:21:32.977
> 
> 标签：c#, .net, function, generics, delegates

我正在尝试创建一个通用的 CacheManager ，我可以在我的整个应用程序中使用它，这将确保缓存项的所有管理都以一致的方式完成并遵守一些缓存访问模式。这将用于根据需要缓存所有类型的对象。

我知道我可以使用委托将函数传递给方法，您可以在下面看到。

```
public static T GetGlobalCacheitem( Func<int ,int , T> populateCacheCall )
        {
            string cacheKey = "test";
            var cachedObject = CacheFactory<T>.GlobalCache.GetGlobalCacheItem(cacheKey);

            if (cachedObject == null)
            {
                cachedObject =  populateCacheCall();
                CacheFactory<T>.GlobalCache.AddGlobalCacheItem(cachedObject, cacheKey);
            }
            return cachedObject;
        } 
```

但是我有两个问题。

1.  我想传入以填充缓存的大多数函数本身都具有他们需要的参数。在上面的例子中，这是一个需要两个 int 参数的方法。第一个问题是我怎样才能传入我希望调用函数的参数，因为它们在这个缓存处理程序中是不知道的，在这个缓存处理程序之外是知道的。也这与下一个问题二有关，无论函数需要多少参数（如果有的话），我如何才能在一种方法中做到这一点？

2.  第二个问题是我需要传入的很多用于填充缓存项的函数会有所不同，有些没有参数，有些只有一个，有些可能不止一个，而且每个函数的类型都不同。这些参数中的一些会有所不同。那么我如何能够使其工作而不必定义一个具有所有可能签名的函数，该函数将涵盖支付给我使用的所有可能的函数组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:36:21.803

如果函数的参数将填充 GetGlobalCacheitem 方法之外，您可以使用另一个委托来欺骗调用函数，如下所示：

```
public static T GetGlobalCacheitem<T>(Func<T> populateCacheCall) 
```

并称之为：

```
Func<int ,int , object> tempPopulateCacheCall=(a,b)=>new object();

GetGlobalCacheitem(()=>tempPopulateCacheCall(1,2)) 
```

或任何其他具有可变参数的函数签名

```
Func<int , object> tempPopulateCacheCall=(a)=>new object();

GetGlobalCacheitem(()=>tempPopulateCacheCall(1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:18:13.907

我认为 Reza Arab 提出的结构很好，因为它符合您的想法。但是，在我看来，拥有全局缓存是不可取的，特别是因为它使有效的垃圾收集变得困难（除非您对缓存对象使用弱引用。但是重复创建和删除的对象呢？在这种情况下，弱引用将禁止有效缓存）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:30:17.967

您可以将`List<P>`参数作为第一个参数传递，或[`Tuple<P>`](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)用作您的参数。

还尝试从函数和参数的哈希码中制作全局缓存键。

如果我理解正确，您可能会在 Dapper [Identity 函数中找到一些代码](http://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs#465)[`SqlMapper`](http://code.google.com/p/dapper-dot-net/source/browse/Dapper/SqlMapper.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:33:38.517

您可以创建一个类，该类将封装函数参数，以便您可以从此类实例调用此函数而无需任何参数。这些参数的参数将被放入构造函数中：

```
interface ICachedFunction<out T>
{
    T Invoke();
}

class CustomFunctionWithVariousParameters<T> : ICachedFunction<T>
{
    private readonly Func<int, string, T> _function;
    private readonly int _parameter1;
    private readonly string _parameter2;

    public CustomFunctionWithVariousParameters(int parameter1, string parameter2, Func<int, string, T> function)
    {
        _function = function;
        _parameter1 = parameter1;
        _parameter2 = parameter2;
    }

    public T Invoke()
    {
        return _function(_parameter1, _parameter2);
    }
} 
```

现在您可以在您的方法中使用此解决方案：

```
public static T GetGlobalCacheitem( ICachedFunction<T> populateCacheCall ) 
```

希望这种方法会有所帮助。

# nsis - NSIS - 如何获取安装程序可执行文件的文件名？

> ID：14936193
> 
> 赞同：1
> 
> 时间：2013-02-18T12:21:38.940
> 
> 标签：nsis

我找到了两种在 NSIS 脚本中获取安装程序文件完整路径的方法：

1.  System::Call 'kernel32::GetModuleFileNameA(i 0, t .R0, i 1024) i r1'
2.  使用 $EXEPATH (2.26+)

但我只需要文件名，而不需要完整路径。怎么去拿？有 ExtractFileName() 类型的函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:24:49.540

[`$EXEFILE`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.3)是你想要的。它将是形式`foo.exe`。

# javascript - 我怎样才能存储一个div？

> ID：14936194
> 
> 赞同：1
> 
> 时间：2013-02-18T12:21:39.030
> 
> 标签：javascript, jquery, cookies

我有一些按钮可以使用 jQuery 创建不同的输入，我希望该站点存储我下次创建的输入。我想我必须使用 cookie（我现在正在学习 jQuery 和所有这些东西），但我没有找到我可以使用的东西。

我有这样的事情：

```
<button id="createbutton">Button</button>

<script>
$( "#createbutton" )
  .button()
  .click(function() {
    $( "#somethinginteresting" ).dialog( "open" ); //this creates an input with some parameters
  });
</script> 
```

当我刷新网站时，按钮显然不存在，我该怎么做？非常感谢您的阅读！对不起我的英语！

# php - 用于测量请求速度和数据库速度的工具

> ID：14936196
> 
> 赞同：1
> 
> 时间：2013-02-18T12:21:44.823
> 
> 标签：php, jquery, html, mysql, database

我正在为我的网络/数据库项目写一篇论文，关于了解哪种工具最适合用于测量网络和数据库速度，我有几个问题。我正在使用 php/jquery/html/mysqli

问题1：最好用firebug来测试每个请求在firefox中需要多长时间？如果是这样，最好显示页面中发生的每个请求的屏幕截图，或者最好一次显示所有请求。换句话说，您想查看所有请求的全部时间还是每个单独的请求。

问题 2：当我在 phpmyadmin 中有一个数据库时测试数据库速度时，使用什么工具来测量数据库速度的最佳工具以及查看数据库速度时您最感兴趣的是什么。是查询运行需要多长时间，还是表格插入数据需要多长时间？等等

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T09:08:19.430

要测试您的项目，您需要模拟不同的负载量并提供响应时间的平均值。

如果您可以生成足够的负载以多次达到故障点，那将是最好的。它可以是最大允许同时数据库连接或任何类似的东西，以防某些请求失败。那将是您的最大负载。

对于介于 no 和 maximum 之间的卷，您需要设置断点并在其上测试您的系统。对于每个断点，您需要生成数千次尝试，以便您可以删除极值并计算平均值。

例如，如果您的系统在 200 个同时请求时开始遇到故障，您可以在 1、25、50、100、150 个请求断点处对其进行测试。此外，您还需要为每个断点选择尝试次数，假设您将选择 10000。然后您执行 10000 个单独的请求、10000 个由 25 个同时调用组成的请求，然后是 50 个调用，等等。

最重要的是，您将需要不同的图表来显示回复时间的增加和您的整体系统行为。然后，您需要解释为什么加载时间会增加，并提供优化软件和硬件的方法，以使您的系统能够处理更大的负载。

除了同时（并行）请求之外，您可能还需要考虑测试您的系统在连续请求的不同负载下的行为方式。

这就是它通常的样子。我确信有软件可以进行此类分析，但您可以编写自己的简单脚本来生成负载。在以后的情况下，如果您能够提供足够的数据来证明您的负载生成软件可以正常工作，我相信这对您的论文来说将是一个很大的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:53:29.240

我喜欢[New Relic](https://newrelic.com/) .. 我不知道是否有类似的开源（免费？）软件。但是，有一个免费版本的新遗物。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:26:28.010

对于 php 进程及其加载时间，我喜欢`xDebug`与`KCacheGrind`or一起使用`WinCacheGrind`。

来自 xDebug 站点：

> Xdebug 的内置分析器允许您找到脚本中的瓶颈并使用外部工具（如 KCacheGrind 或 WinCacheGrind）将其可视化。

更多信息：[xDebug 文档](http://www.xdebug.org/docs/profiler)

# javascript - 骨干视图未初始化

> ID：14936202
> 
> 赞同：0
> 
> 时间：2013-02-18T12:21:51.293
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我是骨干 js 的绝对初学者，并且一直在尝试遵循[这个 GIT repo](https://github.com/ngauthier/intro-to-backbone-js)的思路。下面是我输入的最低限度的代码。

```
(function() {

var MWLivePreview = {};
window.MWLivePreview = MWLivePreview;

var MWTemplate = function(name) {
    return _.template($("#" + name + "-template").html());
}

var log = function(logit) {
    console.log(logit);
}

MWLivePreview.Index = Backbone.View.extend({
    template: MWTemplate('live-preview'),
    render: function() {
        log(this.template(this));
        this.$el.html(this.template(this));
        return this;
    }
});

MWLivePreview.Router = Backbone.Router.extend({
    initialize: function(options) {

        this.el = options.el
    },

    routes: {
        "": "index"
    },

    index: function() {
        var view = new MWLivePreview.Index();

        this.el.empty();
        this.el.append(view.render().el);
    }
});

MWLivePreview.boot = function(container) {
    container = $(container);
    var router = new MWLivePreview.Router({el: container});
    Backbone.history.start();
}

})() 
```

下面的代码是我拥有的模板：

```
<script type="text/template" id="live-preview-template">
    <div> We have got few templates</div>
</script> 
```

我通过在准备好文档时调用下面的代码来连接整个事情

```
MWLivePreview.boot($("#asapatterns")); 
```

我不确定我哪里出错了，但这会返回以下错误：

```
Uncaught TypeError: Object function (a){return new m(a)} has no method 'pick' 
```

关于可能出错的任何想法或线索？

**编辑1：**

删除`Backbone.history.start()`停止给出错误，但视图中也没有出现任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:44:19.017

来自[http://backbonejs.org/](http://backbonejs.org/)

> Backbone 唯一的硬依赖是[Underscore.js](http://underscorejs.org/)或[Lo-Dash](http://lodash.com/)。

但要注意与 Backbone 所需的版本相匹配：在撰写本文时，Backbone 0.9.10 的 underscore.js 1.4.3

# microcontroller - 将 .c 编译为 .hex - cc1.exe：错误：avr25：没有这样的文件或目录

> ID：14936205
> 
> 赞同：1
> 
> 时间：2013-02-18T12:21:56.720
> 
> 标签：microcontroller, avr, avr-gcc, winavr

今天我终于设法通过 Arduino Uno 对 attiny2313a 进行了编程。这是一个测试眨眼程序。上传后，我看到 LED 闪烁 8 秒而不是 1 秒，所以我决定更改 Makefile 和 main.c 中的时钟设置并再次烧录芯片。所以，我只在 Makefile 和 main.c 中将 8000000 更改为 1000000 并`make flash`在 cmd （windows shell）中运行。下面是输出：

```
avr-gcc -Wall -Os -DF_CPU=1000000 -mmcu=attiny2313 -F -c main.c -o main.o
cc1.exe: error: avr25: No such file or directory
make: *** [main.o] Error 1 
```

**为什么我会收到此错误？为什么我只能编译和烧录一次程序？** 我没有删除也没有添加任何新内容。实际上，除了那些时钟设置，我什么都没碰。但即使当我返回到原始设置（8000000）时，我仍然遇到同样的错误。

我的 Makefile

```
DEVICE     = attiny2313 -F
CLOCK      = 1000000
PROGRAMMER = -c arduino -P COM5 -b 19200 
OBJECTS    = main.o
FUSES      = -U lfuse:w:0x5e:m -U hfuse:w:0xdd:m -U efuse:w:0xff:m

######################################################################
######################################################################

# Tune the lines below only if you know what you are doing:

AVRDUDE = avrdude $(PROGRAMMER) -p $(DEVICE)
COMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE)

# symbolic targets:
all:    main.hex

.c.o:
    $(COMPILE) -c $< -o $@

.S.o:
    $(COMPILE) -x assembler-with-cpp -c $< -o $@
# "-x assembler-with-cpp" should not be necessary since this is the default
# file type for the .S (with capital S) extension. However, upper case
# characters are not always preserved on Windows. To ensure WinAVR
# compatibility define the file type manually.

.c.s:
    $(COMPILE) -S $< -o $@

flash:  all
    $(AVRDUDE) -U flash:w:main.hex:i

fuse:
    $(AVRDUDE) $(FUSES)

install: flash fuse

# if you use a bootloader, change the command below appropriately:
load: all
    bootloadHID main.hex

clean:
    rm -f main.hex main.elf $(OBJECTS)

# file targets:
main.elf: $(OBJECTS)
    $(COMPILE) -o main.elf $(OBJECTS)

main.hex: main.elf
    rm -f main.hex
    avr-objcopy -j .text -j .data -O ihex main.elf main.hex
# If you have an EEPROM section, you must also create a hex file for the
# EEPROM and add it to the "flash" target.

# Targets for code debugging and analysis:
disasm: main.elf
    avr-objdump -d main.elf

cpp:
    $(COMPILE) -E main.c 
```

我的 main.c

```
#define F_CPU 1000000  // CPU frequency for proper time calculation in delay function

#include <avr/io.h>
#include <util/delay.h>

int main (void){
    DDRD |= (1 << PD6);  // make PD6 an output

    for(;;){
        PORTD ^= (1 << PD6);  // toggle PD6
        _delay_ms(1000);  // delay for a second
    }

    return 0;  // the program executed successfully
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:13:37.333

请，为了芯片的利益，请不要在 avrdude 上使用 -F。

您在编写 tinyAVR 时遇到问题的原因是您输入了错误的零件编号。对 ATtiny2313 进行编程的正确参数是 -pt2313 [或仅使用部分 t2313]。使用 -F 可以继续使您的芯片变砖，特别是因为您正在为其提供保险丝[在某些情况下，可以通过使用高压编程器来恢复变砖的芯片，具体取决于向其投掷的保险丝设置]。

有关 avrdude 的更多信息，请阅读其手册页

```
 -p partno
               This is the only option that is mandatory for every invocation of avrdude.  It specifies the type of the MCU connected to the program‐
               mer.  These are read from the config file.  If avrdude does not know about a part that you have, simply add it to the config file (be
               sure and submit a patch back to the author so that it can be incorporated for the next version).  See the sample config file for the
               format.  Currently, the following MCU types are understood:

               Option tag   Official part name
               ...snip...
               t2313        ATtiny2313
               ...snip... 
```

ATtiny2313 和 ATtiny2313A 的设备签名相同，但 avrdude 声称不与 2313A 通信。如果您不需要它们，请禁用熔丝编程并在没有`-F`选项的情况下对其进行测试。干杯。

PS。gcc 对你有问题的原因是因为

```
 -Fdir
       Add the framework directory dir to the head of the list of directories to be searched for header files.  These directories are interleaved with
       those specified by -I options and are scanned in a left-to-right order. 
```

您正在向它传递一个参数，它不知道如何处理它。要修复这个问题，在你的 Makefile 上，添加

```
PROGDEV=t2313 
```

并将您的 avrdude 调用更改为使用`PROGDEV`而不是`DEVICE`.

另外，如上一个答案所述

```
PORTD ^= (1 << PD6); 
```

可以替换为

```
PIND = (1 << PD6); 
```

后者仅编译为一条指令，而您拥有的是两条三条指令。这节省了芯片上的代码空间，并使代码运行得更快。有关详细信息，请参阅 Atmel 的数据表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:30:09.937

事实证明，原因在于 Makefile 中添加的“-F”键，使 avrdude 认为 attiny2313a 实际上是 attiny2313（覆盖签名检查）。这很奇怪，但是在芯片第一次编程后必须删除“-F”键。我想这也适用于 AVR 芯片的其他较新的修改，这些修改与它们的基本（ar parent？）修改相同，但在其名称中添加了各种后缀（如“attiny2313a”或“atmega168p”）

所以。首次对微控制器进行编程时，avrdude 无法识别该芯片，`-F`应在芯片名称后添加密钥：

```
DEVICE = attiny2313 -F 
```

但是，**在芯片第一次烧写后，该`-F`密钥必须被移除**，否则将无法再次烧写芯片。

# javascript - 如何比较从另一个日期减去一个日期并得到天数？

> ID：14936206
> 
> 赞同：1
> 
> 时间：2013-02-18T12:22:05.153
> 
> 标签：javascript, datetime

```
function createDate(d) {
   var year = parseFloat(d.substring(6, 10)); 
   var month = parseFloat(d.substring(0,2)); 
   var day = parseFloat(d.substring(3, 5)); 

   var d = new Date(year, month, day); 

   return d; 
}

var d1 = $("#DateCarArrival").val();
var d2 = $("#DateCarLeaving").val(); 

var date1 = createDate(d1); 
var date2 = createDate(d2);

console.log(date1.toString()); 
console.log(date2.toString());   

//       Mon Feb 18 2013 13:19:26 GMT+0100
//      Mon Feb 18 2013 13:19:26 GMT+0100 
```

如何比较这些日期并获得它们之间的天数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T12:26:32.150

**注意：**这个答案假设一个字符串`mm/dd/yyyy`
如果你`type="date"`在 Chrome 中使用，你会得到字符串`yyyy-dd-mm`

[演示](http://jsfiddle.net/mplungjan/44s2Y/)

```
function createDate(d) {
   var year = parseInt(d.substring(6, 10),10); 
   var month = parseInt(d.substring(0,2),10); 
   var day = parseInt(d.substring(3, 5),10); 

   var d = new Date(year, month-1, day); // JS Months are 0 based
   return d; 
}

var d1 = $("#DateCarArrival").val();
var d2 = $("#DateCarLeaving").val(); 

var date1 = createDate(d1); 
var date2 = createDate(d2);

var aDay = 24*60*60*1000;
var diff = Math.abs((date1.getTime()-date2.getTime())/aDay)
console.log(date1.toString(),date2.toString(),diff); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:27:16.940

将日期转换为毫秒（使用`valueOf()`），然后减去

```
DifferNumDays = (date1.valueOf() - date2.valueOf())/(24*60*60*1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:30:20.960

要获取差异（以天为单位）并比较两个日期，您可以使用以下原型扩展器方法：

*注意：我已经将逻辑分布到多个方法中，这些方法可以在许多不同的场景中使用（作为助手）。*

```
/** Gets the type (name) of the specified object. 
 */
if (!Object.prototype.getType) {
    Object.prototype.getType = function (obj) {
        return ({}).toString.call(obj).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();
    }
}

/** Checks whether the object is Date. 
 */
if (!Object.prototype.isDate) {
    Object.prototype.isDate = function (date) {
        return Object.getType(date) === 'date';
    }
}

/** Gets the difference in days, between the given dates. 
 *  If an invalid date is passed as a parameter, returns null.
 */
if (!Date.prototype.difference) {
    Date.prototype.difference = function (date1, date2) {
        if (!(Object.isDate(date1) && Object.isDate(date2))) return null;
        var diff = Math.abs(date1.getTime() - date2.getTime()),
            msInOneDay = 1000 * 60 * 60 * 24;
        return Math.round(diff / msInOneDay);
    }
}

/** Compares the date instance to the specified date value and returns an integer that indicates whether 
 *  the instance is earlier than, the same as, or later than the specified date value. 
 *  @return -1 if the specified date is invalid. 0 if they are the same. 1 if date1 is greater. 2 if date2 is greater.
 */
if (!Date.prototype.compareTo) {
    Date.prototype.compareTo = function (date) {
        if (!Object.isDate(date)) return -1; //not a Date
        if (this == date) {
            return 0;
        } else if (this > date) {
            return 1;
        } else {
            return 2; //date > this
        } 
    }
} 
```

用法：

```
//Validate a date object
var dateIsValid = Object.isDate(date1);
//get the difference in days
var numOfDaysBetween = Date.difference(date1, date2);
//compare date to another
var comparison = date1.compareTo(date2); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-18T12:30:02.230

您可以使用[getMilliseconds()](http://www.w3schools.com/jsref/jsref_getmilliseconds.asp)将日期转换为毫秒，减去它们并从毫秒中计算。

# mobile - 以不同的品牌名称将 MVP 发布到 Google Play 以保护已发布的应用免受负面评论是个好主意吗？

> ID：14936212
> 
> 赞同：0
> 
> 时间：2013-02-18T12:22:36.267
> 
> 标签：mobile, startup

我想按照精益创业原则开发我的移动应用程序。作为 MVP，我想使用非常简单的功能性原生 Android 应用程序，只有基本功能，实际上它只是原型。它将在 Google Play 上发布。因为我不想花太多时间在它上面，所以可能会有一些错误。我害怕负面评论可能会影响以后应用程序的成功。所以我决定以不同的品牌发布这个 MVP。你怎么看这个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:43:59.137

一些公司在加拿大发布作为西方市场的初步测试，因为它与美国市场相似，但更小（但足够大以获得有意义的结果）。可能是一个值得考虑的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T07:12:55.507

您还可以启动 Beta 版本。在我看来，让客户参与开发是件好事。如果他们知道产品正在开发中，他们会很宽容，而且参与开发的客户通常会继续支持该应用程序，这很有价值。另请注意，您将不得不进行两次销售。只需用测试和回归测试结束每个版本，并将 alpha 版本作为干净版本。

# .net - WatiN 停产了吗？

> ID：14936217
> 
> 赞同：8
> 
> 时间：2013-02-18T12:23:00.300
> 
> 标签：.net, internet-explorer, download, automated-tests, watin

当我注意到几乎所有的问题和答案都是在 2011 年提出的时，我正在寻求有关 IE 9 和 WatiN 的问题的帮助。当时，大多数回答的人都表示将很快发布更新以解决问题。然而，我们是在 2013 年，最后一次更新是从 2011 年 4 月开始的。

[WatiN 2.1（2011 年 4 月 12 日发布）](http://watin.org/documentation/)

有谁知道 WatiN 项目是否已停止？

WatiN 有什么好的替代品吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T14:06:31.557

对于 .NET，为什么不使用 VisualStudio2012 的测试支持？你得到[编码的 UI 测试](http://msdn.microsoft.com/en-us/library/dd286726.aspx)和所有的爵士乐。它甚至应该是[跨浏览器](http://blogs.msdn.com/b/visualstudioalm/archive/2012/10/30/introducing-cross-browser-testing-with-coded-ui-tests.aspx)。请注意，您可能需要 VS [Premium 或 Ultimate](http://www.microsoft.com/visualstudio/eng/products/compare#feature-chart-heading)。

如果 VS 对您不可用，请尝试 selenium/webdriver

*   selenium 文档[Selenium WebDriver 与 .Net 绑定](http://docs.seleniumhq.org/docs/03_webdriver.jsp#c)
*   您也可能想查看[selenium 工具包](http://seleniumtoolkit.codeplex.com/)
*   否则[很少有相关的 SO 问题可能会有所帮助](https://stackoverflow.com/search?q=selenium%20%5B.net%5D)
*   最坏的情况只是[谷歌这个](https://www.google.com/search?q=selenium%20.net)

# android - OnServiceConnected 没有被调用

> ID：14936225
> 
> 赞同：3
> 
> 时间：2013-02-18T12:23:18.127
> 
> 标签：android, android-service

我已经提到了以下问题，但找不到答案：

*   [无法获取服务对象（从未调用过 onServiceConnected）](https://stackoverflow.com/questions/6008601/cant-get-service-object-onserviceconnected-never-called)，
*   [onServiceConnected 没有被调用，得到一个空指针异常](https://stackoverflow.com/questions/11844920/onserviceconnected-not-getting-called-getting-a-null-pointer-exception)，并且
*   [在 bindService 方法之后从未调用过 onServiceConnected](https://stackoverflow.com/questions/2486692/onserviceconnected-never-called-after-bindservice-method)

这是我的代码：

```
@Override
    public void onStart() {
        super.onStart();
        Context context = getApplicationContext();
        Intent intent = new Intent(context, PodService.class);
        context.bindService(intent, mPodServiceConn, Context.BIND_AUTO_CREATE);

    }

    private ServiceConnection mPodServiceConn = new ServiceConnection() {
                @Override
                public void onServiceConnected(ComponentName className, IBinder service) {
                    Log.e(TAG, "Pod: Service Connected");
                  mPodService = IPodService.Stub.asInterface(service); //here i am getting NullPointerException
                }
        } 
```

我的服务类什么都不包含，只有这么多，我已经在下面展示了

```
public class PodService extends Service {
@Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        Log.d("bound", "bound");
        return null;
    }

 static class PodSeviceStub extends IPodService.Stub {

//here i implemented unimplemented methods

    }
} 
```

但是在 lolcat 中，我只`bound`从 onBind() 函数中得到“”消息，而不是打印“ `Pod: Service Connected`”，这意味着服务已成功启动。在lolcat中，我得到了`NullPointerException`并且也在清单文件中提到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:59:05.230

我重写了服务类，以便 onBind() 返回 IBinder 作为 follwos。

```
public class PodService extends Service {
@Override
    public IBinder onBind(Intent intent) {

        Log.d("bound", "bound");
        return mBinder; // returns IBinder object
    }

    private final IBinder mBinder = new PodSeviceStub(this);

 static class PodSeviceStub extends IPodService.Stub {

         WeakReference<PodService> mService;

        public PodSeviceStub(PodService service) {// added a constructor for Stub here
            mService = new WeakReference<PodService>(service);
        }
//here i implemented unimplemented methods

    }
} 
```

现在它可以工作了。

# php - 如何在 CakePHP 2.3 中为每个日期创建日志

> ID：14936228
> 
> 赞同：1
> 
> 时间：2013-02-18T12:23:33.890
> 
> 标签：php, apache, cakephp

我正在尝试使用 CakePHP 的 Logging 系统，但是，对我来说，它在我预期的时候不起作用。

问题：我需要为每个日期创建一个日志文件：

```
$this->log('Message', date('Y-m-d')); 
```

我也试试：

```
CakeLog::write(date('Y-m-d'), 'Message'); 
```

为什么不起作用？

* * *

**CakePHP：** 2.3
**操作系统：** Windows 7 x32 位
**Apache：** 2.2
**PHP：** 5.3.9
**MySQL：** 5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-01T17:19:22.360

我知道这是一个老问题，但遇到了同样的问题要解决，而且做起来很简单。在您的 bootstrap.php 中：

```
CakeLog::config('debug', array(
    'engine' => 'FileLog',
    'types' => array('notice', 'info', 'debug'),
    'file' => 'debug-'.date('Y-m-d'), // saves as debug-YYYY-MM-DD.log
));

CakeLog::config('error', array(
    'engine' => 'FileLog',
    'types' => array('warning', 'error', 'critical', 'alert', 'emergency'),
    'file' => 'error-'.date('Y-m-d'), // saves as error-YYYY-MM-DD.log
)); 
```

SQL 风格的日期格式可以很容易地在您的文件系统中按时间顺序对日志进行排序，即 YYYY-MM-DD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:25:22.020

以下将起作用

```
$this->log('Message', date('Y-m-d')); 
```

和

```
CakeLog::write(date('Y-m-d'), 'Message'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:27:25.200

你也可以配置你的 Cakelog 看看： [http ://api.cakephp.org/class/cake-log#method-CakeLogconfig](http://api.cakephp.org/class/cake-log#method-CakeLogconfig)

像这样的东西：

```
 CakeLog::config('second_file', array(
    'engine' => 'FileLog',
    'path' => '/var/logs/my_app/'
    )); 
```

# com - 在 Windows Mobile 设备上运行代码分析器

> ID：14936239
> 
> 赞同：1
> 
> 时间：2013-02-18T12:24:14.983
> 
> 标签：com, windows-mobile, profiling, compact-framework, windows-mobile-6

我正在尝试编写一个使用 .NET 分析 API 的 COM 服务器。此 COM 服务器将在 Windows Mobile 6 设备上运行。此 COM 服务器的目的是分析在同一设备上运行的 .NET 应用程序。但是，我无法在 Windows Mobile SDK 中找到以下头文件：

1.  心电图
2.  corprof.h

这是否意味着我需要使用 Windows（桌面）SDK 中可用的相应版本来移植这些头文件？

正是这些头文件定义了对使用 .NET Profiling API 至关重要的 ICorProfilerCallBack 接口系列。

我查看了 Windows SDK 中存在的这些头文件，我发现它们包含许多与 .NET 框架的对象模型相关的平台特定信息，以及表示 .NET 程序集的 PE 文件的格式. 看来我需要深入了解 .NET 这些领域的实现细节才能成功移植。有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:03:38.350

您遇到的问题是您一开始就错误地假设 Compact Framework 支持任何`ICorProfilerCallBack`接口。它不是。如果您想进行分析，我见过/使用过的其他分析器过去遵循了一些路径：

1.  使用反射在桌面上重建和检测 CF 程序集。使用您自己的专有发布范例，您可以推出功能进入/退出消息和类似的东西。这对于代码分析很有用，但对内存分析没有多大用处。
2.  为 CF 构建 Mono.Cecil 并使用它在目标设备上进行检测/发射。这更慢，但更便携。
3.  在 CF 中使用完全未记录的内存分析 API，就像[CF CLR Profiler](http://blogs.msdn.com/b/stevenpr/archive/2007/10/17/the-clrprofiler-for-the-net-compact-framework-part-1-getting-started.aspx)使用的那样。我已经在这些方面寻找了任何文档，但结果都是空的，我试图让微软在 Codeplex 上开源该工具，但我在任何一个方面都取得了零进展，所以这将是大量的逆向工程使用现有工具和 Wireshark 处理网络数据包。

# android - 从服务器 SMACK Android XMPP 获取 VCard Avatar iq 数据包

> ID：14936248
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:24:45.547
> 
> 标签：android, xmpp, smack

我正在正确地将 IQ 数据包发送到服务器，但在比较哈希码后无法从服务器获取 IQ 数据包

```
 IQ iq = new IQ(){
            @Override
       public String getChildElementXML() {
        // TODO Auto-generated method stub
        return null;    
        }

        };
    iq.setTo(from+"/"+resource);
    iq.setFrom(to);
    iq.setType(IQ.Type.GET);
    iq.setId("vc2");
    mConnection.sendPacket(iq); 
```

我使用了 vcard.save(mConnection); 我想检索头像为 xep-0153

在接收数据包中我得到`<stream></stream>`标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:34:04.357

您只是向服务器发送一个 id 为 'vc2' 的类型为 'Get' 的空 IQ 节。

为了获得基于 XEP-0054 的 VCard，您可以使用[`VCard.load(Connection, String)`](http://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smackx/packet/VCard.html#load%28org.jivesoftware.smack.Connection,%20java.lang.String%29)

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:27:16.090

```
IQ iq = new IQ(){
        @Override
   public String getChildElementXML() {
    // TODO Auto-generated method stub
    return null;    
    }

    };
iq.setTo(from+"/"+resource);
iq.setFrom(to);
iq.setType(IQ.Type.GET);
iq.setPacketID("vc2");
mConnection.sendPacket(iq); 
```

xep-0153 的 IQ 请求。我们必须 setPacketID 但不是 setId

# jquery - 引导工具提示未出现在悬停时

> ID：14936251
> 
> 赞同：0
> 
> 时间：2013-02-18T12:24:54.190
> 
> 标签：jquery, twitter-bootstrap, tooltip

HTML：

```
<li><a href="#" rel="tooltip" title="Falas">Regjistro shpallje</a></li> 
```

查询：

```
$(function() {
    $('[rel=tooltip]').tooltip();
}); 
```

工具提示未出现。该`<li><a>`元素在标题中。我有链接到文档 js/cs 的所有文件，但它仍然无法正常工作有什么想法吗？在搜索 stackoverflow 的答案后，我发现了这个。 [http://jsfiddle.net/DUPyR/249/](http://jsfiddle.net/DUPyR/249/)

我试过了，但没有用。有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:46:16.830

看到这个[小提琴](http://jsfiddle.net/eEaaD/)

请确保您已包含

1.  `jQuery`脚本文件
2.  [引导程序.css](http://dev.derekmccrone.com/sc2stats/assets/css/bootstrap.css)
3.  [引导工具提示.js](http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js)

# node.js - 我怎么知道是否安装了 npm？

> ID：14936253
> 
> 赞同：1
> 
> 时间：2013-02-18T12:25:06.917
> 
> 标签：node.js, npm

昨天，我刚刚在我的 Mac 上使用 nvm 安装了 node.js。

```
$ git clone git://github.com/creationix/nvm.git ~/nvm
$ . ~/nvm/nvm.sh
$ nvm install 0.8.20 
```

我的理解是 npm 将与 node.js 一起安装。我确实在节点 v0.8.20 中看到了 npm 文件夹。

```
feelexits-Mac:bin feelexit$ pwd
/Users/feelexit/nvm/v0.8.20/lib/node_modules/npm/bin

feelexits-Mac:bin feelexit$ ls
node-gyp-bin        npm         npm-cli.js      npm.cmd         read-package-json.js 
```

但是，我遇到了一个问题，当我运行 npm 时，无论我在做什么，我都会收到错误“找不到命令”

**更新：**

将目录添加到路径后，仍然有问题。

```
$ export PATH=$PATH:/Users/feelexit/nvm/v0.8.20/lib/node_modules/npm/bin

feelexits-Mac:bin feelexit$ npm
/Users/feelexit/nvm/v0.8.20/lib/node_modules/npm/bin/npm: line 12: node: command not found 
```

# php - 如何使用 php 在 html 提交表单中附加现有的 url 参数？

> ID：14936254
> 
> 赞同：0
> 
> 时间：2013-02-18T12:25:07.643
> 
> 标签：php, html, forms, url, parameters

这不起作用。旧参数丢失。我得到[http://xxxx/temp/test.php?mode=compound](http://x.x.x.x/temp/test.php?mode=compound)

```
<form align="right" action="http://<? echo $_SERVER['SERVER_ADDR']."/temp/test.php?".$_SERVER['QUERY_STRING'];?>">
<? if ($_SESSION['mode']=="simple") { ?>
<input type="submit" value="Switch to compound mode">
<input type="hidden" name="mode" value="compound">
<? } else { ?>
<input type="submit" value="Switch to simple mode">
<input type="hidden" name="mode" value="simple">
<? } ?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:28:14.583

假设您正在使用 GET 参数，您可以尝试使用

```
echo $_SERVER['SERVER_ADDR']."/temp/test.php?".implode('&', $_GET); 
```

代替

```
echo $_SERVER['SERVER_ADDR']."/temp/test.php?".$_SERVER['QUERY_STRING']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:50:34.023

我终于用这段代码做到了：

```
<form align="right" action="http://<?echo $_SERVER['SERVER_ADDR']."/temp/test.php";?>">
<? if ($_SESSION['mode']=="simple") { ?>
<input type="submit" value="Switch to compound mode">
<input type="hidden" name="mode" value="compound">
<? } else { ?>
<input type="submit" value="Switch to simple mode">
<input type="hidden" name="mode" value="simple"> <? } 
foreach ($_GET as $id=>$parameter) { if ($id=="mode") { continue;}?>
<input type="hidden" name="<?echo $id;?>" value="<?echo $parameter;?>" /> <? } ?>
</form> 
```

# .htaccess - 无法重定向 htaccess

> ID：14936257
> 
> 赞同：0
> 
> 时间：2013-02-18T12:25:13.527
> 
> 标签：.htaccess, magento

好的，我尽了最大努力并用谷歌搜索了很多。

最后想出一个重定向的解决方案`www.mysite.com/?page=2 to www.mysite.com`。但是我的解决方案为页面的其余部分提供了 404 错误。这是我的解决方案：

```
RewriteEngine on

RewriteCond %{QUERY_STRING} ^?Page=2$ 
RewriteRule .? %{REQUEST_URI}? [R=301,L]` 
```

我想要的是重定向`www.mysite.com/?page=2 to www.mysite.com`

可以有`page=(any numeric value)`

请指导。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:36:20.160

问号似乎不包含在查询字符串变量中。此代码应该可以工作：

```
RewriteEngine on

RewriteCond %{QUERY_STRING} ^page=[0-9]+$ [NC]
RewriteRule . %{REQUEST_URI}? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:12:20.120

好吧，我解决了这个问题，但不是从 htaccess 解决的。我通过一个简单的 PHP 编码做到了。

以下是我所做的：

`$pge=$_GET['Page'];`

`if($pge)` `{`

```
`header ('HTTP/1.1 301 Moved Permanently');` 
```

`header('Location: http://www.mysite.com/');`

`exit();`

`}`

# mysql - Mysql小数：地板而不是圆形

> ID：14936261
> 
> 赞同：5
> 
> 时间：2013-02-18T12:25:21.360
> 
> 标签：mysql, decimal

在我的 MySQL 数据库中，我有字段 DECIMAL(23,5)，所以小数点后有 5 位。现在，当我这样查询时：

```
UPDATE my_table SET my_decimal_field = 123.123456789 WHERE id = 1 
```

然后我将获取该记录：

```
SELECT id, my_decimal_field FROM gijhars WHERE id = 1 
```

我得到这个结果：

```
+------+------------------+
| id   | my_decimal_field |
+------+------------------+
| 5733 |   123.12346      |
+------+------------------+ 
```

所以，当然，如果这些值在小数点后超过 6 位，MySQL 会对这些值进行**四舍五入。**MySQL中是否有任何设置来**降低**这些值而不是四舍五入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T12:30:03.753

从[文档](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)

> 如果为此类列分配的值的小数点后位数超过指定比例允许的位数，则该值将转换为该比例。（**确切的行为是特定于操作系统的，但通常效果是截断到允许的位数。**）

如果您的操作系统不是这种情况，那么您可以在使用[truncate更新时处理此问题](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_truncate)

```
UPDATE my_table 
SET my_decimal_field = truncate(123.123456789, 5) 
WHERE id = 1 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/7630)

# knockout.js - 激活对文档特定部分的敲除绑定

> ID：14936263
> 
> 赞同：0
> 
> 时间：2013-02-18T12:25:24.600
> 
> 标签：knockout.js

考虑这段代码：

```
 $(document).ready(function () {
        var menuView = function() {
            var self = this;
            this.blancos = ko.observableArray([]);

            this.load_blancos = function() {
                $.getJSON("{% url api_template_list_create %}", function (data) {
                    ko.mapping.fromJS(data, {}, self.blancos);
                })
            };

            this.init = function() {
                self.load_blancos();
            };

            this.init();
        };

        ko.applyBindings(new menuView(), document.getElementById('blancos_menu'));
    }); 
```

这个HTML：

```
 <ul class="dropdown-menu" id="blancos_menu">
    <li><a href="{% url template_planning %}">Create new</a></li>
    <li class="divider"></li>
    <span data-bind="text: $root.blancos"></span>
    <!-- ko foreach: $root.blancos -->
    <li>
        <a href="#" data-bind="text:name"></a>
    </li>
    <!-- /ko -->
    </ul> 
```

ko:foreach 函数不执行（即不生成列表项）。我确实在前面的范围中看到了“[object Object]，[object Object]”（用于测试目的）。

出于一个非常奇怪的原因，当我将行更改为 时`<span data-bind="text: $root.blancos"></span>`，`<span data-bind="text: blancos"></span>`执行了 ko: foreach 函数，我可以看到不同的列表项。

令人惊讶的是，我确实收到了一个 JavaScript 错误，指出 blancos 未定义，因此无法绑定。（但是！跨度仍然包含文本“[object Object]，[object Object]”）。

我真的无法解决它；感谢您查看这个。

顺便说一下，JSON调用返回的数据是：

```
[{"id": 1, "name": "123"}, {"id": 2, "name": "test_wzzob"}] 
```

**更新**

改变

```
ko.mapping.fromJS(data, viewModel); 
```

进入

```
ko.mapping.fromJS(data, {}, self.blancos); 
```

确实可以，但仍然有错误

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: blancos is not defined;
Bindings value: foreach: blancos 
```

这同样适用于其他属性或方法。在使用 $root 绑定在 HTML 中的变量（或函数）之前，我*没有收到该错误（但是，它们是空的）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:49:57.803

文档说：

```
// Every time data is received from the server:
ko.mapping.fromJS(data, viewModel); 
```

但是您提供 observableArray 而不是 View Model：

```
ko.mapping.fromJS(data, {}, self.blancos); 
```

试试这个方法：

```
ko.mapping.fromJS({ blancos: data }, {}, self); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:29:02.837

当您只使用 blancos 而不是 $root.blancos 时会发生什么？您不需要根，因为 blancos 是您绑定到页面的该部分的视图模型的属性：

```
<li data-bind="foreach: blancos">
    <a href="#" data-bind="text:name"></a>
</li> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:28:58.697

```
ko.applyBindings(new menuView(), document.getElementById('blancos_menu')); 
```

将其替换为

```
ko.applyBindings(new menuView(),$("#blancos_menu")[0]); 
```

为什么你用这个？

```
<span data-bind="text: $root.blancos"></span>
    <!-- ko foreach: $root.blancos --> 
```

您可以使用

```
<ul data-bind="foreach: blancos">
<li data-bind="<ARRAY ELEMENT IN blancos>"></li>
</ul> 
```

# navision - 导航测试环境

> ID：14936264
> 
> 赞同：2
> 
> 时间：2013-02-18T12:25:26.403
> 
> 标签：navision, dynamics-nav

我在 C# 编程方面有很长的经验。我在 2009 年前作为最终用户使用过 navision。现在我想通过使用 Navision 2009 或 Navision 2013 开始编码来刷新我的编程技能。

据我所见，我需要开发工具包并在 Navision 上进行全新安装。但是据我所知，没有用于测试和开发的 navision 试验。Microsoft Navision 站点似乎需要成为访问导航站点下载部分的合作伙伴。

显然，我不想为完全 Navision 环境付费，也不想成为合作伙伴。那么有什么建议吗？我可以下载任何试用版的 navision 来测试 C/AL 编程基础知识吗？

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:41:25.460

您可以尝试使用 NAV 附带的演示 CRONUS 许可证进行一些编程，但非常有限。

您可以修改 Customer 表（表 18）并将字段编号 99990 到 99999 添加到 Customer 表。可以修改Customer Card表单（Form 21）和Customer List表单（Form 22），可以新建两个对象ID分别为99998和99999的表单。可以修改标准报表Customer List（Report 101），您可以创建一个对象 ID 为 99999 的新报告。无法访问数据端口对象。

更多细节在这里：http: [//support.microsoft.com/kb/857936](http://support.microsoft.com/kb/857936)

# transactions - spring-data JPA：手动提交事务并重新启动新事务

> ID：14936266
> 
> 赞同：4
> 
> 时间：2013-02-18T12:25:29.033
> 
> 标签：transactions, spring-data

我有一种导入数据的方法。如果导入很大，它不能在单个事务中运行而不会由于巨大的事务语句缓存而导致 OutOfMemoryError。

我想要的是在语句缓存中的 n 条记录之后手动提交。

我怎样才能做到这一点？（最好在 @Transactional 方法中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:33:18.610

在每第 N 次迭代中使用`EntityManager.flush()`and `EntityManager.clear()`，以便会话与数据库同步，并清除 chache 以防止 OOM。

如果您使用 Hibernate，您还可以将 设置`hibernate.jdbc.batch_size`为适当的值以在 JDBC 级别进行批处理。

如果您还想在批处理后提交并坚持使用 @Transactional 方法，则重构您的代码，以便 @Transactional 方法从输入源获取一批 N 记录，并从外部循环调用该方法。否则，您可以使用 Spring`TransactionTemplate`以编程方式控制事务。

这可能有用：[http ://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch15.html](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch15.html)

# java - 自定义 Solr TokenFilter lemmatizer

> ID：14936270
> 
> 赞同：3
> 
> 时间：2013-02-18T12:25:40.670
> 
> 标签：java, solr

我正在尝试编写一个用于字段类型的简单 Solr lemmatizer，但我似乎找不到任何有关编写 TokenFilter 的信息，所以我有点迷路了。这是我到目前为止的代码。

```
import java.io.IOException;
import java.util.List;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.tokenattributes.CharTermAttribute;
import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

class FooFilter extends TokenFilter {

    private static final Logger log = LoggerFactory.getLogger(FooFilter.class);
    private final CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);
    private final PositionIncrementAttribute posAtt = addAttribute(PositionIncrementAttribute.class);

    public FooFilter(TokenStream input) {
        super(input);
    }

    @Override
    public boolean incrementToken() throws IOException {
        if (!input.incrementToken()) {
            return false;
        }

        char termBuffer[] = termAtt.buffer();
        List<String> allForms = Lemmatize.getAllForms(new String(termBuffer));
        if (allForms.size() > 0) {
            for (String word : allForms) {
                // Now what?
            }
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T20:01:52.913

接下来，您要使用您*的*单词`replace`或`append`当前标记。*`termAtt`*

 *### 示例替换语义

```
termAtt.setEmpty();
termAtt.copyBuffer(word.toCharArray(), 0, word.length()); 
```

### 添加新标记的示例语义

对于要添加的每个标记，`CharTermAttribute`必须设置属性并且`incrementToken`例程返回 true。

```
private List<String> extraTokens = ...
public boolean incrementToken() { 
  if (input.incrementToken()){ 
    // ... 
    return true; 
  } else if (!extraTokens.isEmtpy()) { 
    // set the added token and return true
    termAtt.setTerm(extraTokens.remove(0)); 
    return true; 
  } 
  return false; 
} 
```*

# java - JSON、Stomp 和 ActiveMQ

> ID：14936272
> 
> 赞同：1
> 
> 时间：2013-02-18T12:25:43.863
> 
> 标签：java, php, jms, activemq, stomp

好的，这就是交易。我正在阅读[本教程](http://stomp.fusesource.org/documentation/php/book.html)和 ActiveMQ 网站上的[文档](http://activemq.apache.org/stomp.html)。

在我们拥有的文档中，在*Message Transformations*下，这句话：

> SEND 和 SUBSCRIBE 消息上的转换消息头可用于指示 ActiveMQ 将消息从文本转换为您想要的格式。目前，ActiveMQ 带有一个转换器，可以将 XML/JSON 文本转换为 Java 对象

和

> ActiveMQ 使用 XStream 来满足其转换需求。由于它是可选依赖项，因此您必须通过将适当的 JAR 放入 lib/ 文件夹来将其添加到代理的类路径中。此外，如果您计划使用 JSON 转换，则必须将 Jettison JSON 解析器添加到类路径中。

所以我这样做了，我用*XStreamAlias*注释了我的 pojo ：

```
@XStreamAlias("ProvaPojo")
public class ProvaPojo implements Serializable {

    private static final long serialVersionUID = 1687248536279612587L;

    @XStreamAlias("fieldOne")
    private int fieldOne;

    @XStreamAlias("fieldTwo")
    private String fieldTwo;

    public int getFieldOne() {
    return fieldOne;
    }

    public void setFieldOne(int fieldOne) {
    this.fieldOne = fieldOne;
    }

    public String getFieldTwo() {
    return fieldTwo;
    }

    public void setFieldTwo(String fieldTwo) {
    this.fieldTwo = fieldTwo;
    }

} 
```

这是我的 PHP 代码（原始示例在[这里](http://stomp.fusesource.org/documentation/php/book.html#Message_Transformation)）：

```
$body = array(
        'ProvaPojo' => array(
            array('fieldOne' =>  14),
            array('fieldTwo' => 'Stringa')
        )
);

$header = array();
$header['transformation'] = 'jms-map-json';
$mapMessage = new StompMessageMap($body, $header);
$con->send($queue, $mapMessage); 
```

这是我的听众

```
@Override
protected void _onMessage(Message message) {
if (!(message instanceof ObjectMessage))
    throw new IllegalStateException();
ObjectMessage objectMessage = (ObjectMessage) message;
try {
    if (!(objectMessage.getObject() instanceof BlacklisterRecipientBean))
    throw new IllegalArgumentException(
            "The message content is not an instance of "
                    + BlacklisterRecipientBean.class.getSimpleName());
    BlacklisterRecipientBean recipient = (BlacklisterRecipientBean) objectMessage
        .getObject();
    log.info("_onMessage(Message)");
    IncomingBlacklistAddJMSTrigger trigger = new IncomingBlacklistAddJMSTrigger();
    trigger.setArgs(recipient);
    notifyObservers(trigger);
} catch (JMSException e) {
    log.error("_onMessage(Message) - exception ignored", e);
}

} 
```

但我总是收到一个 ActiveMQTextMessage。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:56:57.913

所以显然这是我的activeMQ版本的问题。一旦切换到`5.8.0`一切工作就像一个魅力。

# apache-flex - 从 flex 调用 java 类

> ID：14936274
> 
> 赞同：0
> 
> 时间：2013-02-18T12:25:45.490
> 
> 标签：apache-flex

我正在从 flex 调用 Java 类。我已经想出了如何做到这一点。但问题是要执行我必须找出JRE的路径。我无法在代码中对其进行硬编码。最好的方法是什么。目前我正在使用以下步骤。但这绝对是生产代码的解决方案。

```
var JavaProgToRun:File = new File();   
JavaProgToRun = JavaProgToRun.resolvePath('C:/Program Files/Java/jre7/bin/java.exe'); 
```

# git - 本地主机中的 Git 推送错误

> ID：14936278
> 
> 赞同：-2
> 
> 时间：2013-02-18T12:25:47.400
> 
> 标签：git, push

您好，我从事过一个项目，现在我想将我的代码推送到本地 git repo，我已经推送代码或更改了几次，没有任何错误，但是今天我发出命令。从我的 Linux 操作系统 ubuntu

```
 git push origin develop 
```

我收到以下错误

```
Connection closed by ::1
fatal: The remote end hung up unexpectedly 
```

这是关于我的 git 配置的信息

```
git config --list
alias.l=log --pretty=oneline -n 20 --graph
alias.s=status -s
alias.d=diff --patch-with-stat
alias.p=!git pull; git submodule foreach git pull origin master
alias.c=clone --recursive
alias.ca=!git add -A && git commit -av
alias.go=checkout -B
alias.tags=tag -l
alias.branches=branch -a
alias.remotes=remote -v
alias.credit=!f() { git commit --amend --author "$1 <$2>" -C HEAD; }; f
alias.reb=!r() { git rebase -i HEAD~$1; }; r
alias.undopush=push -f origin HEAD^:master
apply.whitespace=fix
core.excludesfile=~/.gitignore
core.attributesfile=~/.gitattributes
core.whitespace=space-before-tab,indent-with-non-tab,trailing-space
core.autocrlf=input
core.editor=vi
color.ui=auto
color.branch.current=yellow reverse
color.branch.local=yellow
color.branch.remote=green
color.diff.meta=yellow bold
color.diff.frag=magenta bold
color.diff.old=red bold
color.diff.new=green bold
color.status.added=yellow
color.status.changed=green
color.status.untracked=cyan
merge.log=true
branch.master.remote=origin
branch.master.merge=refs/heads/master
url.git@github.com:.insteadof=gh:
url.git@github.com:.pushinsteadof=github:
url.git@github.com:.pushinsteadof=git://github.com/
url.git://github.com/.insteadof=github:
url.git@gist.github.com:.insteadof=gst:
url.git@gist.github.com:.pushinsteadof=gist:
url.git@gist.github.com:.pushinsteadof=git://gist.github.com/
url.git://gist.github.com/.insteadof=gist:
user.name=Pradeep Rajvanshi
user.email=pradeep@gsmicrosystems.com
github.user=username
github.token=0123456789yourf0123456789token
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
remote.origin.url=git@localhost:lms.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/* 
```

请指导我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:57:48.017

您的`origin`远程在本地机器上设置为 ssh 访问，显然没有`ssh`运行守护程序。如果你想推送到你的本地存储库（你为什么要这样做？）你可以在没有 ssh 的情况下做到这一点，方法是将远程设置为直接指向你的本地文件系统。

# windows-phone-8 - 停用应用程序时无法将数据保存到 StorageFile

> ID：14936279
> 
> 赞同：1
> 
> 时间：2013-02-18T12:25:49.150
> 
> 标签：windows-phone-8, isolatedstorage, winrt-async, storagefile

我正在编写一个 WP8 应用程序，并且想在应用程序停用或关闭时保存一些数据。

我已经尝试过新的 WinRT api，但在停用应用程序时无法正常工作：|

编码：

```
 public async Task CacheData()
        {

            StorageFolder localFolder = ApplicationData.Current.LocalFolder;

                string data = "Hello!";

                ///WinRT not Working !!!

                // Get a reference to the Local Folder 
                // Create the file in the local folder, or if it already exists, just replace it 

                StorageFile storageFileIsolated = await localFolder.CreateFileAsync("Data.data", CreationCollisionOption.ReplaceExisting);
                Stream writeStream = await storageFileIsolated.OpenStreamForWriteAsync();
                using (StreamWriter writer = new StreamWriter(writeStream))
                {
                    await writer.WriteAsync(data);
                }
            }
        } 
```

但使用旧的 api 工作正常

```
 string data = "Hello!";

                using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    using (IsolatedStorageFileStream rawStream = isf.CreateFile("Data.store"))
                    {
                        StreamWriter writer = new StreamWriter(rawStream);
                        writer.WriteLine(data); // save the message
                        writer.Close();
                    }
                } 
```

不知道是什么问题:| ！！！

我用这段代码测试了它

```
 private  void Application_Deactivated(object sender, DeactivatedEventArgs e)
        {
            ViewModel.CacheExchangeRates().Wait();
            System.Diagnostics.Debug.WriteLine("deactivated !!!!!");
        } 
```

从未打印停用！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T13:09:59.320

问题出在`await`关键字上。简而言之，`await`实际上并没有像听起来那样阻塞正在执行的线程。恰恰相反，当执行到`await`关键字时，它看起来像`return`从调用者的角度来看。延续（`await`关键字之后的内容）计划稍后运行，当与之关联的任务`await`完成时。有关这方面的更多详细信息，我鼓励您阅读更多关于`await`和任务的信息，例如，从[这里](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)开始。

在您的情况下，当调用 Deactivated 或 Closing 时，您可能会拨打类似于：

```
private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
    CacheData();
} 
```

当执行到第一个`await`关键字（即 line `StorageFile storageFileIsolated = await localFolder.CreateFileAsync("Data.data", CreationCollisionOption.ReplaceExisting);`）时，您的`CacheData()`方法将控制权返回给调用者。当该任务完成时，其他所有内容将在稍后运行。但是您不会在您的`Application_Deactivated`方法中等待它。相反，执行继续，控制离开`Application_Deactivated`.

当控制离开 Application_Deactivated 时，您的应用程序被认为已准备好关闭。但实际上它还没有准备好，因为`await writer.WriteAsync(data);`可能还没有开始。这就是为什么您的应用程序在没有写入任何内容的情况下关闭的原因。

顺便说一句，如果您的应用在停用期间没有被墓碑化，就像您快速返回它一样，`WriteAsync`最终应该会完成。但是，这当然不是你所期望的。

为了解决这个问题，您需要同步运行文件写入操作。顺便说一句，这正是旧 API 所做的，这就是它起作用的原因。解决问题的最简单方法是将`CacheData`函数更改为 return`Task`而不是`void`(to `public async Task CacheData()`)，并`Task.Wait()`在`Application_Deactivated`处理程序中使用。像这样：

```
public async Task CacheData()
    {

        StorageFolder localFolder = ApplicationData.Current.LocalFolder;

            string data = "Hello!";

            ///WinRT not Working !!!

            // Get a reference to the Local Folder 
            // Create the file in the local folder, or if it already exists, just replace it 

            StorageFile storageFileIsolated = await localFolder.CreateFileAsync("Data.data", CreationCollisionOption.ReplaceExisting);
            Stream writeStream = await storageFileIsolated.OpenStreamForWriteAsync();
            using (StreamWriter writer = new StreamWriter(writeStream))
            {
                await writer.WriteAsync(data);
            }            
    }

private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
    CacheData().Wait();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T22:55:54.613

我遇到了同样的问题，将其修复为

```
StorageFile storageFileIsolated = localFolder.CreateFileAsync("Data.data", CreationCollisionOption.ReplaceExisting).AsTask().Result;
Stream writeStream = storageFileIsolated.OpenStreamForWriteAsync().Result;
using (StreamWriter writer = new StreamWriter(writeStream))
{
    writer.WriteAsync(data).Wait();
} 
```

# reporting-services - Reporting Services 2008 将重复行导出到 Excel

> ID：14936280
> 
> 赞同：0
> 
> 时间：2013-02-18T12:25:51.110
> 
> 标签：reporting-services

我有一个带有分组和切换的 tablix 报告，如下所示：

**行组**

RowGroup1 隐藏：假，InitialToggleState：真

RowGroup2 隐藏：false，ToggleItem：RowGroup1

RowGroup3 隐藏：false，ToggleItem：RowGroup1

RowGroup4 隐藏：true，ToggleItem：RowGroup3

**列组**

年

报告详细信息是“成本”的总和。所有详细信息和组都在报告的一行中。当我查看报告时，除了 RowGroup4 之外的所有内容都是可见的，我可以切换该组以展开详细信息。导出到 Excel 时出现问题。我得到一个重复的行。

我在[http://connect.microsoft.com/SQLServer/feedback/details/508823/reporting-services-2008-group-by-export-to-excel-duplicate-rows-csv-ok-pdf阅读了有关该问题的信息- 好的](http://connect.microsoft.com/SQLServer/feedback/details/508823/reporting-services-2008-group-by-export-to-excel-duplicate-rows-csv-ok-pdf-ok) ，但我不明白我必须做什么来实现所描述的解决方法。我尝试了隐藏行的解决方法，方法是右键单击链接到 RowGroup1 的 TextBox，然后插入行 - 外部组上方，然后右键单击新行 -> 行可见性 -> 隐藏。但这对出口没有影响

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:51:27.897

您可以在 RowGroup3 中添加行（*“Inside Group - Above”*），如下图所示：

![在此处输入图像描述](../Images/44577b5626bef932bc1baac45995cd72.png)

这将显示折叠组的空行，但 Excel 报告中不会有重复的行。

# android - android - 存储在 onPause、onStop 或 onSaveInstanceState 中的数据

> ID：14936281
> 
> 赞同：7
> 
> 时间：2013-02-18T12:25:50.983
> 
> 标签：android, save, state

我对应该输入什么感到困惑`onPause`，`onStop`并且`onSaveInstanceState`。例如，Android 文档说 For `onPause`-

> 提交未保存的更改，但前提是用户希望在他们离开时永久保存此类更改（例如草稿电子邮件）。

对于`onStop`-

> 您应该使用 onStop() 来执行更大、更占用 CPU 的关闭操作，例如将信息写入数据库。

为了`onSaveInstanceState`

> 您的活动可能有更多您想要恢复的状态信息，例如跟踪用户在活动中的进度的成员变量。

难道这三件事基本上都指向存储诸如表单或电子邮件之类的信息吗？那么应该用什么方法保存呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T12:33:33.200

您想要持久化的所有内容都必须存储在其中，`onPause()`因为某些 Android 版本认为您的应用在`onPause()`返回后会被杀死。

`onPause()`由于相对经常发生，并且在许多情况下您可能不会为`onResume()`同一活动保存状态，因此做出了有些不清楚的区别。因此，每个人都希望您在执行昂贵的操作之前三思而后行`onPause()`。

您关于存储表单数据的问题，好吧，如果确实完全打算让用户在停止应用程序并重新启动它之后看到相同的表单数据，那么您可以在输入字段失去焦点时保持这种状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-06T09:27:21.530

对于 2016 年或之后来到这里的任何人，请注意 @Class Stacker 的答案在这一点上已经过时了。具体来说，**`onStop()`保证**从 Android 3.0 (Honeycomb) 开始调用，截至 2016 年 1 月，该版本占[**Android 设备的 96.8%**](https://developer.android.com/about/dashboards/index.html)。

请参阅此处的生命周期文档：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)（Ctrl+F 表示“未处于可杀死状态”）

**更新**：正如评论中正确指出的那样，这当然意味着您的应用程序必须仅限于 Android 3.0 及更高版本。

# groovy - 如何使用 Groovy 元编程将前后代码添加到方法中？

> ID：14936283
> 
> 赞同：2
> 
> 时间：2013-02-18T12:26:18.743
> 
> 标签：groovy, metaprogramming

**问题**

有一个类`MyClass`有一个方法`myMethod()`。如何添加一些代码，例如`println "hello"`，每次`myMethod()`调用之前都会执行的代码？

**方法替换示例**

我知道可以像这样替换整个方法。

```
MyClass.metaClass.myMethod = { -> println "myMethod() has been replaced..." } 
```

但是，我不想替换整个方法。我只想在方法之前和之后添加一些代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:35:05.557

你可以做这样的事情：

```
class MyClass {
  String name

  String expand() {
    "expanded $name"
  }
}

// Cache the old expand method
def oldExpand = MyClass.metaClass.getMetaMethod( 'expand', null )

// Create a new one
MyClass.metaClass.expand = { -> 
  // Do something
  println "Pre stuff"
  try {
    // then invoke and return the original method
    oldExpand.invoke( delegate )
  }
  finally {
    // finally doing something else
    println "Post stuff"
  }
}

def a = new MyClass( name:'tim' )

println "received: " + a.expand() 
```

# java - Java中静态变量的初始化顺序

> ID：14936290
> 
> 赞同：1
> 
> 时间：2013-02-18T12:26:36.507
> 
> 标签：java, static

我在两个不同的文件中有两个类，每个类都有一个静态变量，我想知道是否有一种方法可以预测哪个将首先初始化（它是否依赖于实现）？我的代码看起来像这样？

```
File1:
public class A
{
  public static boolean a = Logger.log();
}

File2:
public class B
{
  public static boolean b = Logger.log();
}

File3:
public class Logger
{
  public static boolean log();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T12:34:53.690

这取决于第一次*使用*每个类的时间。

从[Java 语言规范的第 12.4.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)：

> 类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：
> 
> *   T 是一个类，并创建了一个 T 的实例。
>     
>     
> *   T 是一个类，并且调用了 T 声明的静态方法。
>     
>     
> *   分配了一个由 T 声明的静态字段。
>     
>     
> *   使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
>     
>     
> *   T 是一个顶级类（第 7.6 节），并且执行在词法上嵌套在 T（第 8.1.3 节）中的断言语句（第 14.10 节）。
>     
>     
> 
> 对静态字段（第 8.3.1.1 节）的引用导致仅对实际声明它的类或接口进行初始化，即使它可能通过子类、子接口或实现接口的类的名称来引用。

[JLS 的第 12.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)详细规定了初始化过程。

老实说，如果您的代码*需要*一个在另一个之前初始化，尽管没有明显的依赖关系，那么无论如何您都会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:43:12.167

根据您的示例-无法在 Aa 之前初始化 Bb，因为 B 类的访问将首先调用其超级类的静态初始化。

如果您确实需要在 B 之前执行 A 逻辑 - 尝试将其封装在静态方法中：

```
public class A
{
  public static boolean a;
  public static init() {
   a = log();
  }
}

public class B
{
  public static boolean b;
  public static init() {
   b = log();
  }
}

public class Main
{
  public static void main(String[] args) {
   B.init();       
   A.init();      
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:33:56.833

JVM 不会保存所有类的记录，但是当请求一个类或类的静态成员时，它会从内存中加载该类。所以遵循的实际过程是这样的：

当第一次要求上课时：

1.  所有静态变量

2.  静态块（按顺序，第一个在前，然后是第二个，依此类推）

3.  实例变量（成员）

4.  初始化块（按顺序）

5.  构造函数

第二个或之后：

1.  所有实例变量（成员）

2.  初始化程序块（按顺序）

3.  构造函数。

我希望这能帮到您。

谢谢...

777先生

# html - HTML 页面标题中的西班牙语字符

> ID：14936291
> 
> 赞同：11
> 
> 时间：2013-02-18T12:26:39.737
> 
> 标签：html, utf-8

我的页面标题 HTML 代码如下所示

```
<title>Telefonía</title> 
```

当我在浏览器上检查时，西班牙语字符的显示与上面的完全不同

它显示页面标题如下

![在此处输入图像描述](../Images/44659f85bca90b30d893e3b40c64de38.png)

我尝试使用**& iacute;** 和**í ** 但它在 PAGE TITLE 中不起作用

这是我的网站网址[http://tinyurl.com/agdsqff](http://tinyurl.com/agdsqff)我检查了所有特殊代码，但它不起作用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T12:32:02.600

这行得通。

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Telefonía</title>
</head> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T15:58:24.097

把它放在你的`<head>`：

```
<meta charset="UTF-8"> 
```

如果您想在 .js 中动态更改标题：

```
document.title="telefonía"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:54:10.707

`<title>Telefonía</title>`如果文档以 UTF-8 编码保存（这是服务器发送的 HTTP 标头中声明的编码 -`meta`文档中的任何标记都不能覆盖它） ，该元素就可以正常工作。

您似乎正在尝试各种行不通的方法来更改[页面](http://www.infrasistemas.com.uy/SearchResults.asp?Cat=25)`<title>Telefon&iacute;a</title>`的内容，例如和`<title>Telefoniacute;a</title>`。如果你使用实体引用，你应该写`<title>Telefon&iacute;a</title>`. 但没有必要这样做：使用字符本身更干净、更简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:29:22.823

尝试写作

> `&iacute;`

反而。这些是 HTML 转义字符。在这里您可以找到完整列表[http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T12:29:55.600

请参阅[http://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)以检查您应该如何编码特殊字符。

在这种情况下，它将是`&#237;`或`&Iacute;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T12:34:04.187

你必须检查两件事：

1.  您的文件编码。是的，您的 HTML 文件。您必须将其保存为 UTF-8，然后写入“í”或您需要的任何字符。
2.  你的`<meta>`标签。它应该看起来像：

    `<meta http-equiv="Content-Type" content="text/html; charset=utf-8">`

万岁！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-18T12:34:20.593

```
<p>Telefon&#237a</p> 
```

是它的十六进制代码。í 也适用 [http://jsfiddle.net/PDCvw/](http://jsfiddle.net/PDCvw/) 编辑
它似乎在标题中对我有用。链接是[http://shodor.org/~amalani/acute.html](http://shodor.org/~amalani/acute.html) 你有代码

```
<title>Telefon&amp;iacute;a</title> 
```

但你需要的是 Telefonía

西班牙电信

# delphi - 如何在delphi中将字符串剪切为所需的数字？

> ID：14936295
> 
> 赞同：13
> 
> 时间：2013-02-18T12:26:58.980
> 
> 标签：delphi, delphi-xe2, delphi-7

我有一个只能包含 40 个字符的字符串的数据库列。因此，当字符串的长度大于 40 个字符时，它会给我错误。如何在delphi中将字符串剪切/修剪为40个字符？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T12:27:39.110

```
var
  s: string;
begin
  s := 'This is a string containing a lot of characters.'
  s := Copy(s, 1, 40);
  // Now s is 'This is a string containing a lot of cha' 
```

如果字符串被截断，更花哨的方法是添加省略号，以更清楚地表明这一点：

```
function StrMaxLen(const S: string; MaxLen: integer): string;
var
  i: Integer;
begin
  result := S;
  if Length(result) <= MaxLen then Exit;
  SetLength(result, MaxLen);
  for i := MaxLen downto MaxLen - 2 do
    result[i] := '.';
end;

var
  s: string;
begin
  s := 'This is a string containing a lot of characters.'
  s := StrMaxLen(S, 40)
  // Now s is 'This is a string containing a lot of ...' 
```

或者，对于所有 Unicode 爱好者，您可以通过使用单个省略号字符来保留另外两个原始字符……（U+2026：HORIZONTAL ELLIPSIS）：

```
function StrMaxLen(const S: string; MaxLen: integer): string;
var
  i: Integer;
begin
  result := S;
  if Length(result) <= MaxLen then Exit;
  SetLength(result, MaxLen);
  result[MaxLen] := '…';
end;

var
  s: string;
begin
  s := 'This is a string containing a lot of characters.'
  s := StrMaxLen(S, 40)
  // Now s is 'This is a string containing a lot of ch…' 
```

但是你必须肯定你的所有用户和他们的亲戚都支持这个不寻常的角色。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-18T12:31:16.873

您可以`SetLength`用于此工作：

```
SetLength(s, Min(Length(s), 40)); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-18T12:29:45.727

```
var s : string;
begin   
   s := 'your string with more than 40 characters...';
   s := LeftStr(s, 40); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T19:25:24.543

受[java 中的这个解决方案的](/questions/3597550/ideal-method-to-truncate-a-string-with-ellipsis)启发，我的解决方案是这样的（缩短可能很长的路径）

```
 const
      maxlen = 77;   // found this by entering sample text

  begin
     headlineTemp := ExtractFileName(main.DatabaseFileName);
     if length(main.DatabaseFileName) > maxlen then
      begin
        pnlDBNavn.Caption :=
             MidStr(
                  main.DatabaseFileName, 1,
                           maxlen -3 - length(headlinetemp)
                ) + '...\' + headlineTemp;
      end
     else
         // name is shorter, so just display it
         pnlDBNavn.Caption := main.DatabaseFileName;
   end; 
```

# c# - Windows 8 App XAML/C#：以一种方法将多个图钉设置为 Bing 地图

> ID：14936300
> 
> 赞同：0
> 
> 时间：2013-02-18T12:27:17.353
> 
> 标签：c#, windows-8, winrt-xaml, bing-maps, pushpin

我正在努力在使用 XAML 和 C# 的 Windows 8 应用程序中将纬度和经度集合添加为 Bing 地图上的图钉。

使用事件处理程序（例如在地图上右击）一一添加图钉可以正常工作。

这是 XAML：

```
 <bm:Map x:Name="myMap" Grid.Row="0" MapType="Road" ZoomLevel="14" Credentials="{StaticResource BingMapAPIKey}" ShowTraffic="False" Tapped="map_Tapped" >
      <bm:Map.Center>
            <bm:Location Latitude="-37.812751" Longitude="144.968204" />
      </bm:Map.Center>
 </bm:Map> 
```

这是处理程序：

```
 private void map_Tapped(object sender, TappedRoutedEventArgs e)
    {
        // Retrieves the click location
        var pos = e.GetPosition(myMap);
        Bing.Maps.Location location;
        if (myMap.TryPixelToLocation(pos, out location))
        {
            // Place Pushpin on the Map
            Pushpin pushpin = new Pushpin();
            pushpin.RightTapped += pushpin_RightTapped;
            MapLayer.SetPosition(pushpin, location);
            myMap.Children.Add(pushpin);

            // Center the map on the clicked location
            myMap.SetView(location);
        }
    } 
```

以上所有工作。如果我点击地图，则会添加一个新的图钉。

现在，当我尝试通过迭代列表来初始化页面时添加图钉时，地图上只显示列表的最后一个图钉，就好像每个新图钉都覆盖了前一个图钉一样。这是我使用的代码：

```
 protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
 {
      ...

      // The Venue class is a custom class, the Latitude & Logitude are of type Double
      foreach (Venue venue _venues)
      {
           Bing.Maps.Location location = new Location(venue.Latitude, venue.Longitude);

           // Place Pushpin on the Map
           Pushpin pushpin = new Pushpin();
           pushpin.RightTapped += pushpin_RightTapped;
           MapLayer.SetPosition(pushpin, location);
           myMap.Children.Add(pushpin);

           // Center the map on the clicked location
           myMap.SetView(location);
      }

      ...
 } 
```

如您所见，我使用相同的代码，但在 LoadState 方法的末尾，地图只显示最后一个位置。如果您想知道，foreach 循环会针对每个位置完全执行。

Is there any way to get this to work, or even better, to bind directly the map children to a ObservableCollection of Pushpin objects ? I feel like I am so close but I can't figure out what I missed.

Please help !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:00:11.530

You should keep the different locations in an array (or a list or more efficient LocationCollection) and call the SetView method only after you've looped throught your elements.

```
 LocationCollection locationCollection = new LocationCollection ();
  // The Venue class is a custom class, the Latitude & Logitude are of type Double
  foreach (Venue venue _venues)
  {
       Bing.Maps.Location location = new Location(venue.Latitude, venue.Longitude);

       // Place Pushpin on the Map
       Pushpin pushpin = new Pushpin();
       pushpin.RightTapped += pushpin_RightTapped;
       MapLayer.SetPosition(pushpin, location);
       myMap.Children.Add(pushpin);

       locationCollection.Append(location);
  }
  myMap.SetView(new LocationRect(locationCollection)); 
```

# php - 使用 AND 条件 MYsql

> ID：14936304
> 
> 赞同：0
> 
> 时间：2013-02-18T12:27:28.553
> 
> 标签：php, mysql, cakephp, cakephp-1.3

我需要的是：当我给 training_id 172 AND training_id 174 它必须只返回用户 150

![在此处输入图像描述](../Images/a303ed5faef3121a0f091e3287e65eb8.png)

我试过这个，但它不起作用

```
SELECT user_id FROM Training_users WHERE training_id = 172 AND training_id = 174 
```

大多数时候 training_id 可能超过 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:33:00.110

这个查询怎么样：

```
SELECT user_id, COUNT(*) as nbTrainings FROM Training_users
WHERE training_id = 172 OR training_id = 174
GROUP BY user_id
HAVING nbTrainings = 2 
```

它将过滤具有培训 172 或 174 的用户。然后它将计算每个用户返回的培训数量，并仅保留具有两次培训的用户。

这假设用户不能进行多次培训 172 和/或 174

相对于多个自加入的优点是，如果您想过滤超过 2 个训练 id，则不必为每个训练 id 多次加入。

更多信息`GROUP BY`和`HAVING` [这里](http://www.tizag.com/sqlTutorial/sqlgroupby.php)

编辑：在 sqlfiddle 中测试后，如果某些用户有多个 training_id 并且一个为 172 或 174，这似乎有效并且不会返回错误值

工作[的 sqlfiddle](http://www.sqlfiddle.com/#!2/4496c/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:48:46.313

这应该这样做：

```
SELECT
  a.user_id
FROM
  Training_users a
RIGHT JOIN
  Training_users b ON a.user_id = b.user_id AND b.training_id = 174
WHERE
  a.training_id = 172 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:51:15.580

```
select user_id from work where training_id in (172,174) group by user_id  having count(*)  > 1; 
```

检查[SQLFiddle 演示](http://sqlfiddle.com/#!2/c305a/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:31:00.030

这应该有效：

```
SELECT a.user_id FROM Training_users a, Training_users b WHERE a.training_id = 172 and a.user_id = b.user_id AND b.training_id = 174; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-18T12:28:36.500

做这样的事情

```
SELECT user_id FROM Training_users WHERE (training_id = 172) AND (training_id = 174) 
```

# javascript - 使用jquery在子窗口上获取父formname？

> ID：14936310
> 
> 赞同：0
> 
> 时间：2013-02-18T12:27:39.823
> 
> 标签：javascript, jquery

我在父页面上有以下表单标签，我从中打开一个弹出窗口。我想在弹出屏幕上获取表单名称属性值（即“cust-100”）

```
<form  action="/custAction" formName="cust-100"> 
```

我在下面试过

`self.opener.document.$('[name="formName"]').val()`但它给出了错误

```
TypeError: self.opener.document.$ is not a function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:28:56.597

您没有用于表单控制的 val()，请尝试使用 html() 函数。

```
val = $(window.parent.document).find('form').attr("formName"); 
```

# python - 闲置 60 秒后，Flask App 返回“MySQL 服务器已消失”

> ID：14936319
> 
> 赞同：0
> 
> 时间：2013-02-18T12:28:41.317
> 
> 标签：python, mysql, sqlalchemy, flask, flask-sqlalchemy

我在我的应用程序中使用 Flask-SQLAlchemy，在 60 秒的空闲时间后，MySQL 返回“MySQL 服务器已消失”错误。

这是我的回溯：

```
Traceback (most recent call last):
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app response = self.full_dispatch_request()
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request rv = self.handle_user_exception(e)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/flask/app.py", line 1356, in full_dispatch_request rv = self.preprocess_request()
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/flask/app.py", line 1539, in preprocess_request rv = func()
File "./project/controllers/__init__.py", line 18, in set_domain_and_config \ current_site = Site.query.filter(Site.url == host).first_or_404()
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/flask_sqlalchemy.py", line 367, in first_or_404 rv = self.first()
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/orm/query.py", line 2181, in first ret = list(self[0:1])
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/orm/query.py", line 2048, in __getitem__ return list(res)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/orm/query.py", line 2252, in __iter__ return self._execute_and_instances(context)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/orm/query.py", line 2267, in _execute_and_instances result = conn.execute(querycontext.statement,\ self._params)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 664, in execute params)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 764, in _execute_clauseelement compiled_sql, distilled_params
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 878, in _execute_context context)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 871, in _execute_context context)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/sqlalchemy/engine/default.py", line 320, in do_execute cursor.execute(statement, parameters)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/newrelic-1.10.0.28/newrelic/hooks/database_dbapi2.py", line 36, in execute return self._nr_cursor.execute(sql, *args, **kwargs)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/MySQLdb/cursors.py", line 201, in execute self.errorhandler(self, exc, value)
File "/var/www/vhosts/example.com/httpdocs/venv/lib/python2.7/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler raise errorclass, errorvalue
OperationalError: (OperationalError) (2006, 'MySQL server has gone away') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:43:56.147

60 秒似乎是一个很小的数字，但如果您的服务器更积极地终止空闲连接，您可以在应用程序配置中将[SQLALCHEMY_POOL_RECYCLE设置为 <60 秒。](http://pythonhosted.org/Flask-SQLAlchemy/config.html)

# mysql - mysql 按时间戳顺序排序，限制范围不起作用

> ID：14936320
> 
> 赞同：0
> 
> 时间：2013-02-18T12:28:42.540
> 
> 标签：mysql, sql-order-by, limit

我的 mysql 表以及其他字段有一个时间戳字段，我在其中存储 unix 时间戳（像 13076829212 之类的时间戳）。我想发出一个ajax请求，它将获取按时间戳降序排列的新添加的行（获取最新的）所以我发送最后一个行号来触发这样的查询

```
select id, name from tablename order by timestamp desc limit 30, 125273733849448 
```

我想从获取的最后一个行号开始获取最新序列中的所有行。

上面的查询正在做的是获取随机记录。我知道我的查询逻辑有问题，请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:34:23.463

**讨论后更新答案：**

现在我更好地理解了这个问题，我认为你应该使用：

```
SELECT id, name, timestamp FROM tablename WHERE timestamp > [saved timestamp] ORDER BY timestamp DESC 
```

Where`[saved timestamp]`将被初始查询中的最新时间戳替换。

如果初始查询也使用`ORDER BY timestamp DESC`您将知道最新的时间戳总是在第一行，因此可以轻松保存。

* * *

**原答案：**

如果我理解正确，30 将是您获取的最后一行的 id 并且 id 正在递增。然后应该这样做：

```
SELECT id, name FROM tablename WHERE id > 30 ORDER BY timestamp DESC 
```

# css - 位置：固定和宽度：自动

> ID：14936332
> 
> 赞同：1
> 
> 时间：2013-02-18T12:29:22.370
> 
> 标签：css, position, margin, fixed

我正在尝试将灵活的列和元素与`position:fixed`. 这个想法是有 2 列，第一列是 a `position: fixed menu`，第二列是**content**和**text**。我希望文本`position: fixed`最终如此，唯一移动的是正确的内容。*问题是内容宽度，它会改变*，所以我需要内容的宽度是**自动**的，但是当我将它与它结合起来时`width:auto`它`position:fixed`不起作用。

我认为我的解释不够清楚，所以这里是代码：

**HTML**

```
<div class="pageWrap">
        <div class="colLeft">
            <nav>
                <ul>
                    <li>ELEMENT 1</li>
                    <li>ELEMENT 2</li>
                    <li>ELEMENT 3</li>
                </ul>
            </nav>
        </div>
        <div class="colContent">
            <div class="content">
<img width="300" height="200" alt="1" src="http://lorempixel.com/output/nightlife-q-g-300-200-4.jpg">

<img width="300" height="200" alt="1" src="http://lorempixel.com/output/nightlife-q-g-300-200-4.jpg">

<img width="300" height="200" alt="1" src="http://lorempixel.com/output/nightlife-q-g-300-200-4.jpg">
            </div>
            <aside>
                <p>Lorem ipsum dolor sit amet, consectetuer 
                adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. 
                Cum sociis natoque penatibus et magnis dis parturient 
                ridiculus mus. </p>        
            </aside>
        </div>
</div> 
```

**CSS**

```
.pageWrap {
    width: 600px;
    height: 1000px;
    background-color: rgba(256, 0, 0, 0.5);
}

    .colLeft {
        width: 100px;
        float: left;

        height: 100px;
        background-color: rgba(0, 256, 0, 0.5);

    }
        nav{
            position:fixed;
            background-color: rgba(0, 256, 0, 0.5);
        }

    .colContent {
        width: 500px;

        float:left;
    }
        .content {
            float: left;
            width: auto;
        }
        aside {
            width: 200px;
            float:left;
            position:fixed;
        } 
```

我想要 [this (JSFiddle)[http://jsfiddle.net/frMxW/2/] 但要放在一边`position:fixed`，如果我想把较小的图像放在一边

知道我该怎么做吗？

非常感谢！

**更新：**我尝试了这个想法：将内容和放在一边`display:inline-block`，似乎在 Chrome 和 Firefox 中工作（如果我改变图像的宽度，一边留在那里）*但*它在 Opera 中不起作用，我无法尝试IE。这是我的尝试：http: [//jsfiddle.net/9uGw4/7/](http://jsfiddle.net/9uGw4/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:35:52.063

[更新][这个解决方案](http://jsfiddle.net/7QRv6/3/)对你有用吗？

我修复了`<aside>`和`colLeft`，并且内容的宽度设置为自动，两边都有边距。

# php - 从 php 在 PL/SQL 中传递参数的问题

> ID：14936335
> 
> 赞同：0
> 
> 时间：2013-02-18T12:29:27.927
> 
> 标签：php, plsql

这是我第一次开发应用程序 pl / sql，我在将参数传递给 php pl / sql 时遇到了一些困难。函数 PL / SQL 已在数据库中创建，当运行以下查询时，它返回应有的参数：

```
BEGIN 
  PIN_USERNAME := 'admin';
  PIN_PASSWD := '1';
  POUT_MESSAGE := NULL;

  RetVal := PKG_LOGIN.LOGIN_PORTAL ( PIN_USERNAME, PIN_PASSWD, POUT_MESSAGE );

  DBMS_OUTPUT.PUT_LINE('PIN_USERNAME='||PIN_USERNAME);
  DBMS_OUTPUT.PUT_LINE('PIN_PASSWD='||PIN_PASSWD);
  DBMS_OUTPUT.PUT_LINE('POUT_MESSAGE='||POUT_MESSAGE);
  COMMIT; 
END; 
```

现在的问题是我不能在 php 中做同样的事情。这是我在google的帮助下开发的php代码：

```
include 'define.php';
require_once '../config/connectDB.php';
if(isset($_POST['user']) && isset($_POST['senha']))
{
    $utilizador = $_POST['user'];
    $senha = $_POST['senha'];
    $msg;

    //Connection database
    if(!ligacaoDB())
    {
        echo "Dont Connect";
    }

    $query = "begin :r := PKG_LOGIN.LOGIN_PORTAL (:1, :2, :3); commit; end;";    
    $result = oci_parse(ligacaoDB(), $query);     
    oci_bind_by_name($result, ":1", $utilizador);
    oci_bind_by_name($result, ':2', $senha);
    oci_bind_by_name($result, ':3', $msg);
    oci_bind_by_name($result, ':r', $r);
    $xpto = oci_execute($result);

    if($xpto == false)
    {
        $e = oci_error($result);
        print htmlentities($e['message']);

    }
    else
    {
        echo $msg . " | " . $r;
    }
    oci_free_statement($result);
    oci_close(ligacaoDB());
} 
```

根据我对 plsql 函数的理解，该参数接收`user`并`password`检查数据库是否返回一条消息和一个由`msg`and表示的布尔值`r`。

有人可以帮助我并向我解释谁可能做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:37:47.603

有没有发现原因。对于那些有同样问题的人，我回答：

[http://docs.oracle.com/cd/E11882_01/appdev.112/e10646/oci03typ.htm#CEGIEEJI](http://docs.oracle.com/cd/E11882_01/appdev.112/e10646/oci03typ.htm#CEGIEEJI)

> 以下两种类型是 PL/SQL 内部的，不能由 OCI 作为值返回：
> 
> 布尔值，SQLT_BOL
> 
> 记录，SQLT_REC

# mips - 如何解决 MIPS 中的异常 5（存储字）？

> ID：14936340
> 
> 赞同：0
> 
> 时间：2013-02-18T12:29:44.527
> 
> 标签：mips

```
.data
string1:.asciiz "Enter number\n"
matrix:.space 100
i: .word 0
k: .word 0
.text
main:
lw $t1,i
lw $t2,k
la $s0,matrix
jal Build_matrix
j exit
Build_matrix:
li $t3,25
li $t4,0
li $a1,0
Scanning:
bge $t1,$t3,Return  #if i>=25,stop
li $v0,4
la $a0,string1
syscall
add $t4,$t2,$t2     #2j
add $t4,$t4,$t4     #4j
add $a1,$s0,$t4 
li $v0,5
syscall 
sw $v0,0($a1)
addi $t1,$t1,1
addi $t2,$t2,1
j Scanning
 Return:
jr $ra
    #**** End of Build_matrix method ****
exit: 
```

这是将 25 个数字作为用户输入的代码（询问 25 次数字）并将它们存储在内存中。没有编译时错误。但是在运行时，此消息-“异常 5 [存储中的地址错误] 发生并且每次显示输入号码后都会显示“忽略”？我的错误是什么.....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:57:22.513

您面临的问题是矩阵不是字对齐的，这是`sw`指令所需要的。您必须`.align 2`在矩阵标签后添加指令：

```
matrix:
  .align 2     # ensure matrix is properly aligned
  .space 100 
```

# php - 重写url，让更多参数

> ID：14936342
> 
> 赞同：0
> 
> 时间：2013-02-18T12:29:47.597
> 
> 标签：php, .htaccess, url-rewriting, get

我正在重写这种网址

```
http://deia.info/category/calendar/10/ 
```

至

```
/index.php?task=browse_posts&catid=$2 
```

通过 .htaccess 中的这段代码

```
RewriteRule ^category/(.+)/(.+) /index.php?task=browse_posts&catid=$2 
```

这似乎可以完成这项工作。问题是当发送附加参数时，这些参数被忽略。

例如：

```
http://deia.info/category/calendar/10/?start_date=10 
```

`isset($_GET['start_date'])`不会返回真

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:35:13.717

当传入的 URL 包含类似 OP 示例中的查询时：

`http://deia.info/category/calendar/10/?start_date=10`

在替换 URL 中将其与/附加到新查询的方法是添加[QSA Flag](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)。

所以添加`[L,QSA]`，像这样：

```
RewriteRule ^category/(.+)/(.+) /index.php?task=browse_posts&catid=$2 [L,QSA] 
```

# c - C中的Scanf数组限制？

> ID：14936343
> 
> 赞同：0
> 
> 时间：2013-02-18T12:29:47.880
> 
> 标签：c, arrays, scanf, variable-length-array

我在 C 中有一些小错误：

> **错误：表达式必须有一个常量值**

我知道，这意味着我的限制必须有一个恒定值，但是当我遇到这种情况时，我该如何解决呢？

```
printf("Type limit: ");
scanf("%i",&limit);
int arr[limit]; 
```

谢谢。

**编辑**：

好的，伙计们，另一个问题，对不起，如果我是垃圾邮件。

```
 int num,limit,i;
    printf("Type limit: ");
    scanf("%i",&limit);
    int *arr = (int*)malloc(limit*sizeof(int));
    for(i=0;i<limit;i++)
    {
        printf("Type num %i: ",i);
        arr[i] = scanf("%i",&num);
    }
    system("pause");
    return 0; 
```

> 错误 4 错误 c2109 下标需要数组或指针类型

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:31:55.833

你应该使用`malloc`：

```
printf("Type limit: ");
scanf("%i",&limit);
int *arr = malloc(sizeof(int) * limit); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:31:31.443

自 C99 起允许使用具有自动存储持续时间的可变长度数组。在 C89 中，无法分配具有自动存储持续时间的数组，其大小在编译时是未知的。用于[`malloc`](http://linux.die.net/man/3/malloc)动态分配：

```
printf("Type limit: ");
scanf("%i", &limit);

int* arr = malloc(limit * sizeof(int)); 
```

[`free(arr)`](http://linux.die.net/man/3/free)一旦不再需要它，不要忘记调用以释放此内存。

* * *

关于使用循环中从标准输入读取的值初始化此数组的问题：

```
for(i = 0; i < limit; ++i)
    arr[i] = scanf("%i", &num); 
```

读取每个值，将其存储到`num`变量中，然后`1`分配到`arr[i]`，因为[`scanf`](http://linux.die.net/man/3/scanf)返回*“成功匹配和分配的输入项数”*（在本例中为 1）。您可以直接读入数组元素：

```
for(i = 0; i < limit; ++i)
    scanf("%i", &arr[i]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:38:34.510

C89 and earlier versions of C didin't support run-time sizing of arrays. You need to turn on C99 (or newer) support in your compiler.

If you are using Linux you can either type:

```
gcc -std=c99 
```

or

```
c99 
```

to compile code written for c99.

[Setting std=c99 flag in GCC](https://stackoverflow.com/questions/2193634/setting-std-c99-flag-in-gcc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:32:31.537

```
int *arr=malloc( limit*sizeof(int) ); 
```

这将为您的数组在堆中分配足够的内存`limit` `int`。但是这个数组是“动态的”（大小是在运行时设置的），当你不再需要它时，你有责任“<code>释放”这个内存。您的变量 arr 将只是指向该内存的指针。 `int arr1[10];`另一方面`int`，在堆栈中为 10 分隔一个内存空间，您的变量`arr1`就是该内存。编译器需要知道大小。如果你把它传递给一个函数，`int*`它会“衰减”到`int*,`一个指向第一个元素的指针`arr1[0].`

# php - 使用经纬度值绘制用户位置记录

> ID：14936345
> 
> 赞同：1
> 
> 时间：2013-02-18T12:29:57.420
> 
> 标签：php, jquery, postgresql, google-maps-api-3

我正在开发一个移动应用程序，允许用户记录一些关于他们最喜欢的纪念碑的数据。现在，当用户为他们的纪念碑拍照时，会立即记录纬度和经度值。给我两个不同的值。

然后用户将这些数据与我的 PostGreSQL 数据库同步。我想在我的网站服务上处理这些数据。

我想要的只是一个简单的地图插件，它将获取与用户相关的每个（就像一个 foreach 循环）记录（纪念碑的名称、纬度和经度）并将其显示在带有图标标记的地图上。

例如，您可以在加的夫拥有一座最喜欢的纪念碑，在伦敦拥有一座。您的帐户地图上会显示两个标记，当您单击它们时，会弹出“卡迪夫博物馆”和“伦敦眼”。

我在 Google 上尝试了多次搜索，但无济于事。

有没有人实现过类似的东西？我很擅长 PHP 或 JQuery 或两种解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:10:50.113

这是您可以传递多个经纬度组合以为每个用户位置添加标记的代码。

对循环中需要的每个标记重复此代码以遍历位置数组。

```
 t.push('Location Name 1');
    x.push(33.84659); // you can write like x.push(<?php echo $userloc[0]['lat']?>)
    y.push(-84.35686);
    h.push('<p><strong>Location Name 1</strong><br/>Address 1</p>'); 
```

完整的代码如下。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script> 
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script> 
<script type="text/javascript"> 
    $(document).ready(function() { initialize(); });

    function initialize() {
        var map_options = {
            center: new google.maps.LatLng(33.84659,-84.35686),
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var google_map = new google.maps.Map(document.getElementById("map_canvas"), map_options);

        var info_window = new google.maps.InfoWindow({
            content: 'loading'
        });

        var t = [];
        var x = [];
        var y = [];
        var h = [];

        t.push('Location Name 1');
        x.push(33.84659);
        y.push(-84.35686);
        h.push('<p><strong>Location Name 1</strong><br/>Address 1</p>');

        t.push('Location Name 2');
        x.push(33.846253);
        y.push(-84.362125);
        h.push('<p><strong>Location Name 2</strong><br/>Address 2</p>');

        var i = 0;
        for ( item in t ) {
            var m = new google.maps.Marker({
                map:       google_map,
                animation: google.maps.Animation.DROP,
                title:     t[i],
                position:  new google.maps.LatLng(x[i],y[i]),
                html:      h[i]
            });

            google.maps.event.addListener(m, 'click', function() {
                info_window.setContent(this.html);
                info_window.open(google_map, this);
            });
            i++;
        }
    }
</script> 
<div id="map_canvas" style="width:400px;height:400px;">Google Map</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:39:58.697

此代码可能会对您有所帮助。你可以在这里看到它的工作演示（[http://www.gorissen.info/Pierre/maps/googleMapLocation.php?lat=-33.866603&lon=151.207108&setLatLon=Set](http://www.gorissen.info/Pierre/maps/googleMapLocation.php?lat=-33.866603&lon=151.207108&setLatLon=Set)）

```
<!-- Original script taken from: http://conversationswithmyself.com/googleMapDemo.html -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
    <head>
        <style type="text/css">
        <!--
        h1 {
            font-family:sans-serif;
            color:blue;
            text-align: center;
            font-size:120%;
        }

        .tekst {
            font-family:sans-serif;
            color:blue;
            font-size:100%;
        }

        .smalltekst {
            font-family:sans-serif;
            color:black;
            font-size:80%;
        }
        --> 
        </style>
        <style type="text/css">
        v\:* {
            behavior:url(#default#VML);
        }
        </style>
        <script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAF4PVqw0p5l92pEmE39k0MRQWxhPw7-SAnMb84NfHs4vQ3HTp4BTb-yeL6fQg7Up9d9idBGy5naXydw" type="text/javascript"></script>
        <title>Google Maps Latitude, Longitude Popup</title>
    </head>
    <body>
        <h1>Google Maps Latitude, Longitude Popup</h1>
        <div style="width: 600px;" class="tekst"><b>Simply click  on the map on a location and it will provide you with the latitude and longitude in the callout window.</b></div>
        <div id="map" style="width: 600px; height: 400px"></div>
        <div id="geo" style="width: 300px;position: absolute;left: 620px;top: 100px;" class="tekst">
        <form name="setLatLon" action="googleMapLocation.php">
            <b>* Coordinates:</b><br />
            <table>
                <tr><td>* Lat:</td><td><input type='text' name='lat' id="frmLat"></td></tr>
                <tr><td>* Lon:</td><td><input type='text' name='lon' id="frmLon"></td></tr>
            </table>
            <input type="submit" name="setLatLon" value="Set"><br />
        </form><br />
        <b>* Flickr tags:</b><br />
        <textarea id="geocode" cols="30" rows="2"></textarea><br />
        <br />
        <b>* RoboGEO tags:</b><br />
        <textarea id="geocodeRoboGEO" cols="30" rows="2"></textarea><br />
        * <a href="#" target="_blank" id="multimap">Show location on Multimap</a><br />
        * <a href="#" id="maplink">Permanent Link</a><br /><br />
        <script type="text/javascript">
        <!--
        google_ad_client = "pub-1588116269263536";
        google_alternate_color = "FFFFFF";
        google_ad_width = 234;
        google_ad_height = 60;
        google_ad_format = "234x60_as";
        google_ad_type = "text";
        //2006-09-30: Map
        google_ad_channel ="0993881556";
        google_color_border = "DDDDDD";
        google_color_bg = "DDDDDD";
        google_color_link = "0000FF";
        google_color_text = "333333";
        google_color_url = "333333";
        //-->
        </script>
        <script type="text/javascript"  src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
    </div>
    <div style="width: 600px;" class="smalltekst">

            <p><i>Address lookup has been removed because it violated the ToS of Google Maps.</i></p>

        Based on code taken from <a href="http://conversationswithmyself.com/googleMapDemo.html">this website</a> and <a href="http://www.evolt.org/article/Javascript_to_Parse_URLs_in_the_Browser/17/14435/?format=print">this website</a>.<br />
All other errors are caused by code written by <a href="http://www.gorissen.info/Pierre/">Pierre Gorissen</a>.<br />
    </div>
    <script type="text/javascript">
    //<![CDATA[

    var baseLink = "http://www.gorissen.info/Pierre/maps/googleMapLocation.php";
    var multimapBaseLink = "http://www.multimap.com/map/browse.cgi?scale=10000&icon=x";
    var geocoder = new GClientGeocoder();
    var setLat = 51.618017;
    var setLon = 2.48291;   

    // argItems code taken from 
    // http://www.evolt.org/article/Javascript_to_Parse_URLs_in_the_Browser/17/14435/?format=print
    function argItems (theArgName) {
        sArgs = location.search.slice(1).split('&');
            r = '';
            for (var i = 0; i < sArgs.length; i++) {
                if (sArgs[i].slice(0,sArgs[i].indexOf('=')) == theArgName) {
                        r = sArgs[i].slice(sArgs[i].indexOf('=')+1);
                        break;
                }
            }
        return (r.length > 0 ? unescape(r).split(',') : '')
    }

    function getCoordForAddress(response) {

        if (!response || response.Status.code != 200) {
            alert("Sorry, we were unable to geocode that address\n\n Sorry, dat adres bestaat blijkbaar niet!");
        } else {
            place = response.Placemark[0];
            setLat = place.Point.coordinates[1];
            setLon = place.Point.coordinates[0];
            setLat = setLat.toFixed(6);
            setLon = setLon.toFixed(6);
            document.getElementById("frmLat").value = setLat;
            document.getElementById("frmLon").value = setLon;
        }
        placeMarker(setLat, setLon)
    }

    function placeMarker(setLat, setLon) {

        var message = "geotagged geo:lat=" + setLat + " geo:lon=" + setLon + " "; 
        document.getElementById("geocode").value = message;
        var messageRoboGEO = setLat + ";" + setLon + ""; 
        document.getElementById("geocodeRoboGEO").value = messageRoboGEO;

        document.getElementById("geocode").focus();
        document.getElementById("geocode").select();

        document.getElementById("maplink").href = baseLink + "?lat=" + setLat + "&lon=" + setLon ;
        document.getElementById("multimap").href = multimapBaseLink + "&lat=" + setLat + "&lon=" + setLon ;
        document.getElementById("frmLat").value = setLat;
        document.getElementById("frmLon").value = setLon;

        var map = new GMap(document.getElementById("map"));

        map.addControl(new GSmallMapControl()); // added
        map.addControl(new GMapTypeControl()); // added
        map.centerAndZoom(new GPoint(setLon, setLat), 12);

        var point = new GPoint(setLon, setLat);
        var marker = new GMarker(point);
        map.addOverlay(marker);

        GEvent.addListener(map, 'click', function(overlay, point) {
            if (overlay) {
                map.removeOverlay(overlay);
            } else if (point) {
                map.recenterOrPanToLatLng(point);
                var marker = new GMarker(point);
                map.addOverlay(marker);
                var matchll = /\(([-.\d]*), ([-.\d]*)/.exec( point );
                if ( matchll ) { 
                    var lat = parseFloat( matchll[1] );
                    var lon = parseFloat( matchll[2] );
                    lat = lat.toFixed(6);
                    lon = lon.toFixed(6);
                    var message = "geotagged geo:lat=" + lat + " geo:lon=" + lon + " "; 
                    var messageRoboGEO = lat + ";" + lon + ""; 
                } else { 
                    var message = "<b>Error extracting info from</b>:" + point + ""; 
                    var messagRoboGEO = message;
                }

                marker.openInfoWindowHtml(message);
                document.getElementById("geocode").value = message;
                document.getElementById("geocodeRoboGEO").value = messageRoboGEO;
                document.getElementById("geocode").focus();
                document.getElementById("geocode").select();

                document.getElementById("maplink").href = baseLink + "?lat=" + lat + "&lon=" + lon ;
                document.getElementById("multimap").href = multimapBaseLink + "&lat=" + lat + "&lon=" + lon ;
                document.getElementById("frmLat").value = lat;
                document.getElementById("frmLon").value = lon;

            }
        });
    }

    function findAddress() {
        myAddress = document.getElementById("address").value;
        geocoder.getLocations(myAddress, getCoordForAddress);

    }

    if (argItems("lat") == '' || argItems("lon") == '') {
        placeMarker(setLat, setLon);
    } else {
        var setLat = parseFloat( argItems("lat") );
        var setLon = parseFloat( argItems("lon") );
        setLat = setLat.toFixed(6);
        setLon = setLon.toFixed(6);
        placeMarker(setLat, setLon);
    }

    //]]>
    </script>
<!-- Start twatch code -->
<script type="text/javascript"><!--
//<![CDATA[
document.write('<scr'+'ipt type="text/javascript" src="/Pierre/twatch/jslogger.php?ref='+( document["referrer"]==null?'':escape(document.referrer))+'&pg='+escape(window.location)+'&cparams=true"></scr'+'ipt>');
//]]>
//--></script>
<!-- End twatch code -->
  </body>
</html> 
```

# web-services - CXF 的 Spring HTTP 绑定工厂问题

> ID：14936349
> 
> 赞同：1
> 
> 时间：2013-02-18T12:30:03.010
> 
> 标签：web-services, spring, cxf

尝试使用 CXF 生成的客户端调用 Web 服务时，我收到有关 HTTP 绑定工厂的异常。客户端代码为：

```
private final static QName SERVICE = new QName("http://com.myAppService.service", "myService");
        try {
            wsdlURL = new URL("http://myAppservice.com/services/myService?wsdl");
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
            throw new Exception (THIS_METHOD + ex.getMessage() ); 
        }

        try{
             service = new MyAppService(wsdlURL, SERVICE);
             port = service.getMyServiceHttpport(); 
```

我在控制台上看到的异常是：

```
[2/18/13 4:27:00:295 PST] 00000609 SystemErr     R Caused by: org.apache.cxf.BusException: No binding factory for namespace http://schemas.xmlsoap.org/wsdl/http/ registered.
        at org.apache.cxf.binding.BindingFactoryManagerImpl.getBindingFactory(BindingFactoryManagerImpl.java:91)
        at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:114)
        at org.apache.cxf.frontend.ClientFactoryBean.create(ClientFactoryBean.java:52)
        at org.apache.cxf.frontend.ClientProxyFactoryBean.create(ClientProxyFactoryBean.java:102)
        at org.apache.cxf.jaxws.JaxWsProxyFactoryBean.create(JaxWsProxyFactoryBean.java:115)
        at org.apache.cxf.jaxws.ServiceImpl.createPort(ServiceImpl.java:434)
        at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:312)
        at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:299)
        at javax.xml.ws.Service.getPort(Service.java:40)
        at com.cisco.myAppService.service.MyService.getMyServiceHttpport(MyService.java:129) 
```

知道如何绑定 HTTP 端口。我的 wsdl 的标题是：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:impl="http://com.cisco.ipcentral.service" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://com.cisco.ipcentral.service">
    <wsdl:documentation>MyService</wsdl:documentation>
    <wsdl:types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://com.myAppService.service"> 
```

# c# - 在 WP8 中从距离转换为地理坐标

> ID：14936352
> 
> 赞同：1
> 
> 时间：2013-02-18T12:30:11.507
> 
> 标签：c#, windows-phone-7, geolocation, maps, here-api

我想找到距离我的位置 4000 公里的地方的地理坐标，命名为`newLocation`.

我需要它才能将结果转换成`ViewportPoint`这样：

```
System.Windows.Point p1 =
mapControl.ConvertGeoCoordinateToViewportPoint(newLocation); 
```

并假设我的位置定义为：

```
System.Windows.Point p2 =
radiusMap.ConvertGeoCoordinateToViewportPoint(myLocation); 
```

`newLocation`然后我可以简单地添加一个以我的位置为中心的圆圈，然后我需要计算的边界从那里经过，如下所示：

```
 double radius = getDistance(p1, p2);

    Ellipse circle = new Ellipse();
    circle.Width = radius * 2;
    circle.Height = radius * 2;
    circle.Opacity = 0.4;
    circle.Fill = new SolidColorBrush(Colors.Green);
    MapOverlay mapOverLay = new MapOverlay();
    mapOverLay.PositionOrigin = new System.Windows.Point(0.5, 0.5);
    mapOverLay.Content = circle;
    mapOverLay.GeoCoordinate = myLocation;
    MyLayer.Add(mapOverLay);

    radiusMap.Layers.Add(MyLayer); 
```

所以，计算`newLocation`就是我所需要的。

笔记：

1.  我尝试[了这个解决方案](https://stackoverflow.com/a/2839560/1233659)，但有一个限制。
2.  我们可以在 Visual Studio 中执行以下操作：

    ```
    GeoCoordinate location1 = ..., location2 = ...;
    double distance = location1.GetDistanceTo(location2); 
    ```

我想知道逆向是否已经实现。

更新：我找到了 GetDistanceTo(...) 的实现，它是：

```
double d = this.Latitude * 0.017453292519943295;
double num3 = this.Longitude * 0.017453292519943295;
double num4 = other.Latitude * 0.017453292519943295;
double num5 = other.Longitude * 0.017453292519943295;
double num6 = num5 - num3;
double num7 = num4 - d;
double num8 = Math.Pow(Math.Sin(num7 / 2.0), 2.0) + ((Math.Cos(d) * Math.Cos(num4)) * Math.Pow(Math.Sin(num6 / 2.0), 2.0));
double num9 = 2.0 * Math.Atan2(Math.Sqrt(num8), Math.Sqrt(1.0 - num8));
return (6376500.0 * num9); 
```

我想知道是否有可能得到相反的结果。即给它我的地理坐标，以及与我的距离，以便它返回新位置的地理坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:22:39.497

当然，距离初始起点 400 公里的点（围绕一个圆圈）有无数个点，您需要定义**距离**和**方位角**以将其减少到一个点。

如果你可以假设地球是一个球体，你可以绕一个大圆圈旅行，如图所示

```
φ2 = asin( sin(φ1)*cos(d/R) + cos(φ1)*sin(d/R)*cos(θ) )
λ2 = λ1 + atan2( sin(θ)*sin(d/R)*cos(φ1), cos(d/R)−sin(φ1)*sin(φ2) ) 
```

在哪里

*   `φ`是纬度
*   `λ`是经度
*   `θ`是方位角（弧度，从北顺时针方向）
*   d 是经过的距离
*   R 是地球的半径 6 378.1 公里
*   d/R 是角距离，以弧度为单位

所以插入你的值来计算新的位置 `φ2`，`λ2`

如果“我所在位置的权利”是指正东，`θ`则为 90 度 = `Π`/ 2

当然，您可以使用一种技巧来找到正东方向的点。赤道经度 1 度 = 110.57 公里。因此，您可以计算一个上限，然后向下迭代到一个合理的阈值。

1.  以您的起点 - 400 公里，增加 3.61 度。
2.  **使用distanceTo()**方法检查距离
3.  如果它太大，砍掉一个度数的一部分。
4.  重复 2)+ 3) 直到在可接受的阈值内。

# python - 现有（合成）信号与滤波信号之间的 FFT 幅度差异很大

> ID：14936359
> 
> 赞同：0
> 
> 时间：2013-02-18T12:30:26.703
> 
> 标签：python, scipy, fft, digital-filter

我认为，现在滤波信号的 FFT 图上噪声区域的幅度应该更低。可能是`scipy.fftpack.lfilter()`.

我试图在现有信号中添加噪声，但没有结果。

为什么噪声区域中滤波信号（绿色）的 FFT 幅度如此之高？

![在此处输入图像描述](../Images/711735d20c859ee9ec5df0d09a139425.png)

**更新：**
FFT 幅度的 300 dB 是非物理的 - 很明显，这是由于 Python 环境中的 64 位浮点数造成的。

滤波信号（绿色）的 FFT 具有如此低的 dB（约 67 dB），因为所有信号都有约 4000 个样本（不是图片上的“每秒”，小错误，不重要），采样率 = 200 个样本/秒。1 个频率分档=200/4000/2=0.025Hz，显示 2000 个分档。

如果我们采用更长的信号，我们将获得更高的每个 bin 的频率分辨率（即 40 000 个样本，1 freq bin = 200/40 000/2 = 0.0025 Hz）。我们还得到了滤波信号的 FFT ~87 dB。

（数字 67 dB 和 87 dB 似乎是非物理的，因为初始信号 SNR 为 300dB，但我尝试在现有信号中添加一些噪声并获得相同的数字）

如果您想获得与信号中样本数无关的 FFT 图像，则应使用加窗 FFT 和滑动窗口来计算全信号 FFT。

```
'''
Created on 13.02.2013, python 2.7.3

@author: 
'''
from numpy.random import normal
from numpy import sin, pi, absolute, arange, round
#from numpy.fft import fft
from scipy.fftpack import fft, ifft
from scipy.signal import kaiserord, firwin, lfilter, freqz
from pylab import figure, clf, plot, xlabel, ylabel, xlim, ylim, title, grid, axis, show, log10,\
                  subplots_adjust, subplot

def filter_apply(filename):
    pass

def sin_generator(freq_hz = 1000, sample_rate = 8000, amplitude = 1.0, time_s = 1):
    nsamples = round(sample_rate * time_s)
    t = arange(nsamples) / float(sample_rate.__float__())
    signal = amplitude * sin(2*pi*freq_hz.__float__()*t)
    return signal, nsamples

def do_fir(signal, sample_rate):
    return signal

#-----------------make a signal---------------
freq_hz = 10.0
sample_rate = 400
amplitude = 1.0
time_s = 10
a1, nsamples = sin_generator(freq_hz, sample_rate, amplitude, time_s)
a2, nsamples = sin_generator(50.0, sample_rate, 0.5*amplitude, time_s)
a3, nsamples = sin_generator(150.0, sample_rate, 0.5*amplitude, time_s)
mu, sigma = 0, 0.1 # mean and standard deviation
noise = normal(mu, sigma, nsamples)
signal = a1 + a2 + a3 # + noise

#----------------create low-pass FIR----
# The Nyquist rate of the signal.
nyq_rate = sample_rate / 2.0
# The desired width of the transition from pass to stop,
# relative to the Nyquist rate.  We'll design the filter
# with a 5 Hz transition width.
width = 5.0/nyq_rate

# The desired attenuation in the stop band, in dB.
ripple_db = 60.0

# Compute the order and Kaiser parameter for the FIR filter.
N, beta = kaiserord(ripple_db, width)
print 'N = ',N, 'beta = kaiser param = ', beta

# The cutoff frequency of the filter.
cutoff_hz = 30.0

# Use firwin with a Kaiser window to create a lowpass FIR filter.
# Length of the filter (number of coefficients, i.e. the filter order + 1)
taps = firwin(N, cutoff_hz/nyq_rate, window=('kaiser', beta))

# Use lfilter to filter x with the FIR filter.
filtered_signal = lfilter(taps, 1.0, signal)

#----------------plot signal----------------------
hh,ww=2,2  
figure(figsize=(12,9))  
subplots_adjust(hspace=.5)
#figure(1)
subplot(hh,ww,1)

# existing signal
x = arange(nsamples) / float(sample_rate)

# The phase delay of the filtered signal.
delay = 0.5 * (N-1) / sample_rate

# original signal
plot(x, signal, '-bo' , linewidth=2) 

# filtered signal shifted to compensate for 
# the phase delay.
plot(x-delay, filtered_signal, 'r-' , linewidth=1)

# Plot just the "good" part of the filtered signal. 
# The first N-1 samples are "corrupted" by the
# initial conditions.
plot(x[N-1:]-delay, filtered_signal[N-1:], 'g', linewidth=2)

xlabel('time (s)')
ylabel('amplitude')
axis([0, 1.0/freq_hz*2, -(amplitude*1.5),amplitude*1.5]) # two periods of freq_hz
title('Signal (%d samples)' % nsamples)
grid(True)

#-------------- FFT of the signal
subplot(hh,ww,2)

signal_fft=fft(signal)
filtered_fft =fft(filtered_signal[N-1:])

# existing signal 
y = 20*log10( ( abs( signal_fft/nsamples )*2.0)/max( abs( signal_fft/nsamples )*2.0) )# dB Amplitude
x = arange(nsamples)/float(nsamples)*float(sample_rate)

# filtered signal
y_filtered = 20*log10( (abs(filtered_fft/ (nsamples - N + 1) )*2.0)/max(abs(signal_fft/ (nsamples - N + 1) )*2.0) )# dB Amplitude
x_filtered = arange(nsamples - N + 1)/float(nsamples - N + 1)*float(sample_rate)
yy = fft(ifft(filtered_fft))

plot(x,y, linewidth=1) 
plot(x_filtered, y_filtered, 'g', linewidth=2)
xlim(0, sample_rate/2) # compensation of mirror (FFT imaginary part)
xlabel('freq (Hz)')
ylabel('amplitude, (dB)')
title('Signal (%d samples)' % nsamples)
grid(True)

#--------------FIR ampitude response
subplot(hh,ww,3)

w, h = freqz(taps, worN=8000)
#plot((w/pi)*nyq_rate, absolute(h), linewidth=2)
plot((w/pi)*nyq_rate, 20*log10(absolute(h)/1.0),'r', linewidth=1)
xlabel('Frequency (Hz)')
#ylabel('Gain -blue')
ylabel('Gain (dB)')
title('Frequency Response')
#ylim(-0.05, 1.05)
grid(True)

#--------------FIR coeffs
subplot(hh,ww,4)
plot(taps, 'bo-', linewidth=2)
title('Filter Coefficients (%d taps)' % N)
grid(True)

show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:52:13.823

我认为你-300dB的噪音是相当低的。请记住，这是一个对数刻度，所以我们谈论的是 64 位分辨率下的几个数字。

使用双精度浮点数（64 位）你不会得到任何更低的值。

# php - 如何在php中删除xml Dom文档

> ID：14936360
> 
> 赞同：1
> 
> 时间：2013-02-18T12:30:35.333
> 
> 标签：php, xml, dom

我会搜索这个问题并找到一些问题，但他们没有提到我的错误......

我正在尝试删除我的 DOM 文档的一个孩子，当我键入该`$x->removeChild($key);` 函数时，什么也没发生......

```
$xmlreq = new DOMDocument;
$xmlreq->loadXML($xmlStr);
$x = $xmlreq->getElementsByTagName('*');
foreach($x as $key)
{
    if (substr($key->nodeValue,0,3)=="{{{" and substr($key->nodeValue,-3)=="}}}")
    {
        $field = explode("|",substr($key->nodeValue,3,strlen($key->nodeValue)-6));

        if((int)$field[3]==0)
        {
            if(trim($_POST[$field[2]])=="")
            {
                $x->removeChild($key);
            }else{
                $key->nodeValue = trim($_POST[$field[2]]);
            }
        }elseif((int)$field[3]==1)
        {
            if(trim($_POST[$field[2]])=="")
            {
                $errors.="";
            }else{
                $key->nodeValue = trim($_POST[$field[2]]);
            }
        }else{

        }

    }
}

header("content-type: application/xml");
print $xmlreq->saveXml(); 
```

这是我的xml：

```
<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
<command>
<check>
<contact:check xmlns:contact="http://epp.nic.ir/ns/contact-1.0">
<contact:id>ghhg-ghgh</contact:id>
<contact:id>45</contact:id>
<contact:id>45</contact:id>
<contact:id>45</contact:id>
<contact:authInfo>
<contact:pw>1561651321321</contact:pw>
</contact:authInfo>
</contact:check>
</check>
<clTRID>TEST-12345</clTRID>
</command>
</epp> 
```

我想删除其中一个`<contact:id>45</contact:id>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:22:35.573

您的循环什么也不做，因为外部条件正在寻找一个以`nodeValue`开头`{{{`和结尾的节点`}}}`：

```
foreach($x as $key)
{
    if (substr($key->nodeValue,0,3)=="{{{" and substr($key->nodeValue,-3)=="}}}") 
```

[此外， DOMNodeList](http://php.net/DOMNodeList)中没有`removeChild()`方法。您可能想先获取节点的父节点，然后调用它的[removeChild()](http://www.php.net/manual/en/domnode.removechild.php)方法。

一个可能的替代方案：

```
$x = $xmlreq->getElementsByTagName('*');
$remove = TRUE;
foreach($x as $key)
{
    if( $key->nodeName=='contact:id' && $key->nodeValue=='45' ){
        if($remove){
            $key->parentNode->removeChild($key);
            $remove = FALSE;
        }
    }
} 
```

# javascript - 如果值发生更改，则更改表单字段颜色

> ID：14936368
> 
> 赞同：0
> 
> 时间：2013-02-18T12:31:03.990
> 
> 标签：javascript, jquery, forms

我对一些 javascript 逻辑有点迷失了。我有一个包含 3 个文本字段的表单。它们通过 javascript（无占位符）显示默认值。当表单被聚焦时，值被清除，当表单被模糊时，如果字段值没有改变，则恢复默认值。

我必须编写一些条件逻辑来确保如果值发生更改，字段文本颜色从灰色（默认占位符值）更改为黑色。

这 3 个字段具有不同的默认值。我尝试在 Blur 上编写一个通用脚本来检查当前字段的值，以根据默认值对其进行测试。

```
 $fields = $('#webform-component-group-1 .webform-component-watermarked');
  var keys = [];
  var values = [];
  console.log($fields.length);
  $fields.each(function(){
    keys.push($(this).attr('id'));
    values.push($(this).val());
    $(this).blur(function(){
      console.log($(this).val());
      console.log($(this).val() !== values[keys.indexOf($(this).attr('id'))]);
    });
  }); 
```

但是我的测试总是返回 true，因为当我在 blur 上运行测试时，占位符值没有恢复。

处理这个问题的最佳方法是什么？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:43:51.980

使用 jQuery，你可以这样做：

假设以下 HTML

```
<div id='fields'>
    <input value='start1' class='placeholder' />
    <input value='start2' class='placeholder' />
</div> 
```

JavaScript

```
$('#fields input').each(function(){
    // Save initial placeholder values
    $(this).data('placeholder', $(this).val());
}).on("focus", function(){
    // Remove placeholder value and color on focus
    if( $(this).val() === $(this).data('placeholder') ){
        $(this).val('').removeClass('placeholder');
    }
}).on("blur", function(){
    // Restore placeholder on blur if input is empty
    if( $(this).val().length === 0 ){
        $(this).val($(this).data('placeholder')).addClass('placeholder');
    }
}); 
```

CSS

```
input.placeholder{
    color:#ccc;
}

input{
    color:#000;
} 
```

小提琴：http: [//jsfiddle.net/uWPJC/](http://jsfiddle.net/uWPJC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:37:56.713

尝试使用这段代码，你会得到你想要的

```
 var pass1 = document.getElementById('password');
    var pass2 = document.getElementById('vpass');
    var message = document.getElementById('confirmMessage');
    var goodColor = "#66cc66";
    var badColor = "#ff6666";
        if(pass1.value == pass2.value){
               pass2.style.backgroundColor = goodColor;
        }
        else{
               pass2.style.backgroundColor = badColor;
        } 
```

# delphi - TStringList 是否可以自动释放附加到其项目的对象？

> ID：14936370
> 
> 赞同：8
> 
> 时间：2013-02-18T12:31:06.037
> 
> 标签：delphi

我正在向`TObject`a 添加一些后代`TStringList`，例如通过调用`AddObject`. 我希望在释放列表对象时释放它们。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T12:31:06.037

的[`OwnsObjects`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.OwnsObjects)属性`TStringList`应该设置为`True`，以便列表在被销毁时释放其对象。这可以通过调用[接收`OwnsObjects`参数](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.Create)的构造函数重载来实现，也可以通过在创建后显式设置属性来实现。最好设置`OwnsObjects`为对象构造的一部分。

该[文档](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStringList.OwnsObjects)描述了这样的属性：

> **OwnsObjects**属性指定字符串列表是否拥有存储的对象。如果**OwnsObjects**属性设置为 True，则 Destroy 析构函数将释放为这些对象分配的内存。

# html - HTML 文件末尾的 CSS

> ID：14936371
> 
> 赞同：0
> 
> 时间：2013-02-18T12:31:06.880
> 
> 标签：html, css

我想知道浏览器如何处理大多数（如果不是全部）HTML 之后的 CSS 规则。由于新规则，它是否必须重新解析整个页面，还是使用其他技术来处理这种情况？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:35:13.293

在许多情况下必须进行重绘，并且在页面生命周期中的许多情况下，DOM 都会更改。

但是一旦页面被解析，就没有理由再次解析它，所有的变化都是在内存中的 DOM 上进行的。

话虽如此，您应该将 CSS 链接放在 HEAD 中，因为

*   它可以让浏览器更快地开始下载
*   它[符合 HTML4 规范](http://www.w3.org/TR/html4/struct/links.html#h-12.3)（*“它可能只出现在文档的 HEAD 部分”*）
*   它[让浏览器更快地开始渲染](http://gtmetrix.com/put-css-in-the-document-head.html)
*   它让您的同事和您的未来自己在维护代码时不会感到惊讶

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:33:53.130

也许重新布局和重新绘制。（也就是说，如果它已经开始渲染它并且加载的样式需要不同的显示。）

重新分析，没有。样式表纯粹是展示性的；它们不影响解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:35:12.723

假设浏览器在看到额外的 CSS 时已经开始渲染页面（这种行为有很多特定于浏览器的触发器）并假设新规则导致至少一个元素的 CSS 属性发生变化，浏览器将只需将该元素标记为需要重绘的元素。

这将导致下次浏览器重新绘制其窗口的一部分时显示页面的任何可见更改。

重要的是要记住，现代浏览器异步执行所有这些操作并安排事件，例如应用新 CSS、重新计算布局和在屏幕上绘画，大部分（但不是完全）彼此独立。

# wordpress - 我需要放回/（更改）WordPress地址（URL）-应该很简单

> ID：14936374
> 
> 赞同：0
> 
> 时间：2013-02-18T12:31:13.943
> 
> 标签：wordpress

我犯了一个错误并更改了 WordPress 中的 SETTINGS / WordPress 地址 (URL)，现在我无法再进入后端了。

问题是，我在“dev”文件夹中有一个站点，所以地址是“mySite.com/dev”，这就是 WordPress 所在的位置。我错误地删除了“dev”，现在它是正常的“mySite.com”。

我需要将所有内容放回原处，但由于我删除了“/dev”，WordPress 总是将我重定向到主站点，我无法再访问后端。

我怎样才能恢复它，以便我可以在 dev 文件夹上访问我的 WordPress 开发站点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:46:05.767

您可以通过 phpMyAdmin 更改此设置

在表中更改和`wp_options`的选项值。`siteurl``home`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:34:51.387

有几种不同的方法可以在 WordPress 中重置站点 URL。有些涉及编辑 wp_options 和其他 wp-config.php，难度不同。有关恢复说明，请参阅[更改站点 URL « WordPress Codex](http://codex.wordpress.org/Changing_The_Site_URL)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:22:07.073

最简单的方法（特别是如果您不喜欢 phpMyAdmin）是通过 FTP 进入并`wp-config.php`在基本 WP 目录（例如 mysite.com/dev）中编辑您的文件并添加以下行：

```
define('WP_HOME','http://mysite.com/dev');
define('WP_SITEURL','http://mysite.com/dev'); 
```

下次您访问该网站时，它会自动更改设置。请注意，这将导致管理面板中的相关字段显示为灰色，因此当您以后想要更改 URL 时，您需要从 wp-config 文件中更新或删除这些行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-21T05:17:37.697

为了恢复正确的地址，我直接进入MYSQL并更新条目得到了最好的结果。

我发现通过向 wp_config.php 添加行来对站点地址进行硬编码会产生不完整的结果。管理页面看起来仍然有问题。而且我再也无法从 Wordpress 管理站点更改地址了。我确定 phpMyAdmin 工作正常，但我不想安装任何额外的东西。

1.  登录`$ mysql -u [your-mysql-user] -p`

2.  记下您的表的名称。我相信“wp”前缀是所有表名的标准，但这可能因安装而异。

    ```
    > show databases;
    > use [your-wordpress-database];
    > show tables;
    > desc wp_options; 
    ```

3.  查找当前值。

    ```
    > SELECT option_id, option_name, option_value
    > FROM wp_options
    > WHERE option_name="siteurl"; 
    ```

4.  输出应类似于：`1 | siteurl | [current path with incorrect value]`

5.  替换为正确的值

    ```
    > UPDATE wp_options
    > SET option_value="[new path]"
    > WHERE option_name="siteurl"; 
    ```

# javascript - DOM 加载后定义的触发事件 - JIRA 打开新问题模式

> ID：14936381
> 
> 赞同：0
> 
> 时间：2013-02-18T12:31:36.467
> 
> 标签：javascript, jquery, jira

我正在为流行的平台 Atlassian JIRA 构建第三方插件，并在其中实现了日历。但是，当我单击任何事件之外的一天时，它会触发一个函数，该函数将触发`#create_link event`.

当该事件被触发时，会打开一个新的模式窗口，用户可能会填写一个新问题。问题是我想更改问题类型字段，然后自动填写一个字段。但是，我不知道如何使用这些结果生成一个新窗口（我认为这不可能），因此我唯一的选择是 Javascript 事件。

到目前为止，这是我的代码：

```
jQuery.when(AJS.$('#create_link').trigger('click')).done(function() {
    jQuery.when(jQuery('#issuetype-field').trigger('click')).done(function() {
        jQuery('.aui-list-item-li-event').find('a').trigger('click');
    });
});

//I have also tried to use `.then` 
```

问题是，触发器在控制台中单独运行时起作用，但似乎`jQuery.when`没有。因为下一个事件在窗口加载之前很久就触发了。

**我需要的是一种等待触发最后 2 个事件的方法，方法是使用触发器上的回调或不使用什么**。我怎么解决这个问题？此外，如果有人知道如何在 Jira 中使用 js 创建一个新的问题窗口，这也是一个非常可接受的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:06:49.083

使用 Jira 问题收集器将使您的任务更加简单。您可以将其配置为接收反馈或错误报告等。

[https://confluence.atlassian.com/display/JIRA/Using+the+Issue+Collector](https://confluence.atlassian.com/display/JIRA/Using+the+Issue+Collector)

问题收集器的集成只是在您的`HTML`页面中添加一个脚本标签

# windows - R：如何修复 plot() 上的永久“单击或按 ENTER 进入下一页”？

> ID：14936384
> 
> 赞同：2
> 
> 时间：2013-02-18T12:31:39.780
> 
> 标签：windows, r

我正在使用 Windows 7x64 和 R v2.14.2，以革命 R 作为 GUI。

出于某种原因，每次我制作 a`plot`时，控制台都会指出：

```
Waiting to confirm page change... 
```

...情节说明：

```
Click or hit ENTER for next page 
```

我必须点击情节中的某个地方才能完成情节。

我想知道我做错了什么，有没有办法在不完全重新安装 R 的情况下解决这个问题？

**更新 1**

我试过了：

```
devAskNewPage(FALSE)
options(device.ask.default = FALSE)
grDevices::devAskNewPage(ask=FALSE) 
```

这是我的窗口列表：

```
> dev.list()
windows 
      2 
```

我认为这个问题是在我用来`plot.new()`创建新的图形窗口之后开始的。昨晚我的机器也被非正常关闭了。另一个奇怪的问题是，图形在革命 R 中工作（尽管奇怪），但在 RStudio 中根本不显示，即使它使用不同的核心 R 版本（v2.15.2）。

**更新 2**

我想知道是否有办法设置`par()`其安装默认值？

**更新 3**

重启机器；问题依然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:50:14.460

我认为您需要在更改`devAskNewPage`或`getOption("device.ask.default")`生效之前关闭图形设备并打开一个新设备。

猜测一下，您正在调用一些代码，其中要求更改绘图已打开，然后尝试在同一设备中创建更多绘图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:54:57.300

这绝对是用户错误；Windows 和 R 都运行良好。

问题在于子函数中的 plot 命令：

```
plot(y ~ a + b) 
```

此命令不会在一张图上绘制两个系列；它将它们分别绘制在两个图表上，并在它们之间显示消息“单击或按 ENTER 进入下一页”。所有其他前兆/症状都是简单的巧合。

# matlab - 从矩阵中删除随机数量的列

> ID：14936386
> 
> 赞同：0
> 
> 时间：2013-02-18T12:31:51.933
> 
> 标签：matlab

我需要从任意大的矩阵中取出随机数量的列，我已经将我的尝试放在下面，但我确信有更好的方法。

```
function new = reduceMatrices(original, colsToTakeAway)

a = colsToTakeAway(1);
b = colsToTakeAway(2);
c = colsToTakeAway(3);

x = original(1:a-1);
y = original(a+1:b-1);
z = original(b+1:c-1);

if c == size(original, 2);
    new = [x,y,z];
elseif (c+1) == size(original, 2);
    new = [x,y,z,c+1]
else
new = [x,y,z,c+1:size(original, 2)];

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:03:46.363

这是一种方法。首先，生成带有`numcols`元素的随机数行向量，其中`numcols`是原始矩阵中的列数：

```
rc = rand(1,numcols) 
```

接下来制作一个`1`s 和`0`s 的向量，例如

```
lv = rc>0.75 
```

这将产生类似的东西

```
 0 1 1 0 1 
```

并且可以使用 Matlab 的逻辑索引功能来编写

```
original(:,lv) 
```

这将只返回与s 中的 s`original`相对应的那些列。`1``lv`

您的问题并不完全清楚您想如何制作列选择的向量，但这应该会给您一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:00:49.827

```
function newM = reduceMatrices(original, colsToTakeAway)

   % define the columns to keep := cols \ colsToTakeAway
   colsToKeep = setdiff(1:size(original,2), colsToTakeAway);

   newM = original(:, colsToKeep);

end 
```

# android - 如何删除哈希表中的项目并相应调整键？

> ID：14936390
> 
> 赞同：1
> 
> 时间：2013-02-18T12:31:56.173
> 
> 标签：android, hashtable

目前我有一个主屏幕，用户在其中存储他们本学期所学课程的标题，并且与每个课程相关的是他们的作业和这些课程的抽认卡。当用户长按主页上的某个项目时，我想删除该课程及其所有内容（这包括所有抽认卡和作业）。

不幸的是，我愚蠢地将我的数据存储在哈希表中，键为整数。当我从表中删除项目时，这会导致一些问题。键与主屏幕上的位置直接相关，当用户从中删除某些内容时，我似乎无法弄清楚如何重新调整哈希表。

我曾考虑过使用其他数据结构，例如 arrayList，但问题是用户可能并且很可能只有一组闪存卡或只有一个作业，并且它恰好位于主屏幕上的第 4 位。这意味着我必须先用 null 填充前 3 个位置，然后才能在第 4 个位置插入值。我绝对不认为我想要那个...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:35:15.600

恐怕以您当前的实现，您将无法重新调整`HashTable`. 我建议您使用`LinkedList`屏幕上的项目并将迭代器存储到`HashTable`. 这样，您将能够有效地删除任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:36:48.460

只需为所有实体（例如班级、用户和作业）分配唯一的 ID。使用这些唯一 ID（可能是整数）作为键以及在您需要引用实体的所有其他位置。不要使用实体的顺序作为标识符，因为它可能会在删除项目时甚至在重新排序项目时发生变化。

# asp.net-mvc - ASP.NET MVC 应用程序中的非标准 url

> ID：14936393
> 
> 赞同：0
> 
> 时间：2013-02-18T12:32:15.203
> 
> 标签：asp.net-mvc, iis-7

我有一个像书架一样的 ASP.NET MVC 应用程序，它部署在 IIS 上。要从我那里获取信息，我必须在浏览器的地址行中输入类似 bookshelf.com/book/ 的内容。我该怎么做才能将 url 从 bookshelf.com/book/ 更改为 .bookshelf.com？

我尝试在 IIS 上使用 Url 重写，但什么也没做...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:34:25.367

> 我该怎么做才能将 url 从 bookshelf.com/book/ 更改为 .bookshelf.com？

配置您的默认路由，`Global.asax`以便默认控制器`Book`代替`Home`：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Book", action = "Index", id = UrlParameter.Optional }
); 
```

这假设您有一个 BookController 和一个 Index 操作：

```
public class BookController: Controller
{
    public ActionResult Index()
    {
        ...
    }
} 
```

现在，当有人请求时，`http://bookshelf.com/`将执行此控制器操作。

# symfony - symfony2在编码密码时获取登录用户名

> ID：14936398
> 
> 赞同：0
> 
> 时间：2013-02-18T12:32:33.867
> 
> 标签：symfony, passwords, encode, fosuserbundle

嗨，我很高兴，但没有结果。

我试图在将密码编码给用户时检查数据库中的一个字段。如何？

```
The service 

services:
my_password_encoder:
    class: TB\WelcomePageBundle\Security\Encoder\MyPasswordEncoder  

<?php

namespace TB\WelcomePageBundle\Security\Encoder;

use Symfony\Component\Security\Core\Encoder\BasePasswordEncoder;
use TB\UserBundle\Entity\User;

class MyPasswordEncoder extends BasePasswordEncoder
{    
public function encodePassword($raw, $salt)
{      
    $user = new User;
    $old_or_new=$user->getOldNew();
    print_r($user);
    print_r($old_or_new);die(); 
```

要点：1.从当前登录用户的数据库中撤回一个字段。2\. 取决于我需要的值：以我的方式对他的密码进行编码并登录 + 以 SYMFONY 方式更改密码并更新数据库。3\. 依赖值就用symfony的方式。

有轻松的条件。问题是我如何才能撤回这个字段 + 编码密码 symfony 方式。（我知道如何编码密码）。+ 不是通过我的方式对密码进行编码，而是通过 symfony 和更新数据库。

我的观点是将低安全密码迁移到 symfony2。为什么？因为我有现有的数据库，其中密码以我的方式编码。所以我需要“更新”它们。

* * *

问题的主要部分：

如何获取尝试登录编码密码功能的用户的用户名？？？谢谢！！！

# java - 相机活动的 sdk 版本是什么？

> ID：14936401
> 
> 赞同：0
> 
> 时间：2013-02-18T12:32:41.553
> 
> 标签：java, android

如果我使用`targetSdkVersion`，我的相机工作正常。如果我将 更改`targetSdkVersion`为`17`，我的应用程序将停止。我也在使用安卓 4.0 Ice Cream Sandwich 手机。

```
<uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="10" /> 
```

如果我使用 android 目标版本 = 17，我的应用程序已停止

```
 <uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:39:41.307

要使用该[`camera.open()`](https://developer.android.com/reference/android/hardware/Camera.html#open%28%29)方法（例如），您需要 minSdkVersion `1`。

[在链接](https://developer.android.com/reference/android/hardware/Camera.html#open%28%29)的右上角，您会找到 API 级别。

# android - GridView 之上的 ImageView

> ID：14936403
> 
> 赞同：0
> 
> 时间：2013-02-18T12:32:50.433
> 
> 标签：android, android-layout

我有一个网格视图，其中包含一个文本视图和 2 个图像视图。第一个图像视图设置为其他图像视图的顶部。所有网格视图项目的底部图像视图都是相同的。我现在正在使用翻译动画，顶部图像位于底部图像...请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:35:17.607

在您的代码中，参考您的图像并使用以下方法：

```
image.bringToFront(); 
```

# node.js - 用于 ping Heroku 应用程序的 New Relic 的替代方案

> ID：14936404
> 
> 赞同：1
> 
> 时间：2013-02-18T12:32:52.320
> 
> 标签：node.js, heroku, newrelic

我在 Heroku 上免费运行一个 Node.js 应用程序。人们使用 New Relic 不断 ping 他们的应用程序，防止测功机空闲，但 New Relic 不支持 Node.js。有谁知道支持 Node 的替代插件？我不关心功能，我只需要它每 <1 小时 ping 一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T13:39:00.903

**在 2013 年 6 月 28 日使用 Node.js 0.10.x 测试并在我自己的 Heroku 应用程序上工作**

```
var http = require('http'); //importing http

function startKeepAlive() {
    setInterval(function() {
        var options = {
            host: 'your_app_name.herokuapp.com',
            port: 80,
            path: '/'
        };
        http.get(options, function(res) {
            res.on('data', function(chunk) {
                try {
                    // optional logging... disable after it's working
                    console.log("HEROKU RESPONSE: " + chunk);
                } catch (err) {
                    console.log(err.message);
                }
            });
        }).on('error', function(err) {
            console.log("Error: " + err.message);
        });
    }, 20 * 60 * 1000); // load every 20 minutes
}

startKeepAlive(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T00:23:46.907

[Pingdom](https://www.pingdom.com)应该为此工作。[Heroku 插件目录](https://addons.heroku.com/#monitoring)有很多其他的监控插件也应该很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T20:52:14.473

还有[uptime](https://github.com/fzaninotto/uptime "正常运行时间")：一个不错的 Node.js 监控工具。免费、开源、可通过插件扩展，必须手动安装。一个可以将“ping”频率定义到第二个。

# php - 如何获取所有基于拉丁字母字符的列表，但在 PHP 中排除“特殊字符”

> ID：14936410
> 
> 赞同：0
> 
> 时间：2013-02-18T12:33:09.557
> 
> 标签：php, character

我正在开发一个基于 PHP 的系统，该系统计划在欧洲推出，对于某个表单字段，我试图将输入限制为仅限字母字符。

但是，这可以伪装成英语字母表——也可以是德语、拉脱维亚语、波兰语、法语、西班牙语等字母表。

我正在查看 ISO-8859-1 ( [http://en.wikipedia.org/wiki/Western_Latin_character_sets_(computing)#Comparison_table](http://en.wikipedia.org/wiki/Western_Latin_character_sets_(computing)#Comparison_table) )，就字母表而言，它似乎相当完整。但是我看不出有什么简单的方法可以区分字母字符和我在英语中所知道的“特殊字符”。

我也认识到，就 ISO-8859-1 而言，我可能会找错树。多年来我没有以类似的方式使用字符集，所以也许有更好的方法来实现这一点？

想到的特殊字符是：

*   ,
*   .
*   ！
*   `
*   %

还有很多。

是否有现成的功能可以使用 PHP 或任何其他快捷方式完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:41:35.553

您可以手动编写特殊字符并使用函数[preg_match()](http://php.net/manual/en/function.preg-match.php)：

$chars = "ÄäÖöÅå!%" ; //添加你也可以添加，通常的拉丁字符已经添加

```
if (isset($_GET['name'])){
    if (preg_match("/^[A-Za-z{$chars}]+$/", $_GET['name'])){
        echo "Input ok, proceed") ;
       //Do stuff
    } else {
        echo "Some of characters in your input are not allowed" ;
    }
} else {
    echo "The no form submitted" ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:06:35.670

这个库似乎正在做你正在寻找的东西： [https ://github.com/jbroadway/urlify](https://github.com/jbroadway/urlify)

# c++ - 为什么 std::find 以这种方式实现？

> ID：14936413
> 
> 赞同：6
> 
> 时间：2013-02-18T12:33:27.937
> 
> 标签：c++, stl, std

我碰巧遇到了它的来源，`std::find`发现它让我感到困惑。基本上它将项目数除以 4 并在每一轮中进行比较 4：

```
template<typename _RandomAccessIterator, typename _Tp>
_RandomAccessIterator
__find(_RandomAccessIterator __first, _RandomAccessIterator __last,
   const _Tp& __val, random_access_iterator_tag)
{
  typename iterator_traits<_RandomAccessIterator>::difference_type
__trip_count = (__last - __first) >> 2;

  for (; __trip_count > 0; --__trip_count)
{
  if (*__first == __val)
    return __first;
  ++__first;

  if (*__first == __val)
    return __first;
  ++__first;

  if (*__first == __val)
    return __first;
  ++__first;

  if (*__first == __val)
    return __first;
  ++__first;
}

  switch (__last - __first)
{
case 3:
  if (*__first == __val)
    return __first;
  ++__first;
case 2:
  if (*__first == __val)
    return __first;
  ++__first;
case 1:
  if (*__first == __val)
    return __first;
  ++__first;
case 0:
default:
  return __last;
}
} 
```

我不知道为什么会这样。看起来像一些优化。但我认为这不会那么容易地利用多核。无论如何，这是在一个线程中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T12:36:06.717

看起来像[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)，也称为循环展开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T12:36:15.903

这是循环展开。结果是一样的，但对处理器更友好。

渐近复杂度是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:38:23.940

不完全确定，我认为这是一种循环展开。

请参阅循环展开： http: [//www.codeproject.com/Articles/6154/Writing-Efficient-C-and-C-Code-Optimization](http://www.codeproject.com/Articles/6154/Writing-Efficient-C-and-C-Code-Optimization)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-18T12:38:22.260

这是[达夫的设备](http://en.wikipedia.org/wiki/Duff%27s_device)。这是一种古老的优化技术，它以一种特殊的方式混合了 while 和 switch 语句。它使用循环展开。在汇编程序中，您将直接跳入展开的循环中。

# ios - 如何一次更改 Core Data 中所有实体的属性值？

> ID：14936416
> 
> 赞同：0
> 
> 时间：2013-02-18T12:33:35.087
> 
> 标签：ios, core-data, nsfetchrequest, nsfetchedresultscontroller

我正在构建具有“清单”功能的应用程序。清单项目存储为核心数据实体。数据模型中也存储了一个“已检查”属性`BOOL`。处理此清单功能的视图控制器基于`UITableViewController`.

基本上，我想实现`UIRefreshControl`允许用户重置核心数据中所有清单实体的“已检查”状态。例如，一旦用户拉下`UITableView`.

但是，`NSFetchedResultsController`一次只提供对一个实体的访问权限`[fetchedResultsController objectAtIndexPath:indexPath]`。有没有办法从核心数据中获取整个实体集合，`NSArray`或者`NSDictionary`因此我可以枚举所有实体并更改它们的“已检查”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:46:04.223

同意coverback ...假设您要从名为“Test”的实体中获取所有对象：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Test"
                                          inManagedObjectContext:context];
NSError *error;
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error]; 
```

fetchObjects 数组包含“测试”实体中的所有对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:38:23.297

[`[fetchedResultsController fetchedObjects]`](http://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html#//apple_ref/occ/instp/NSFetchedResultsController/fetchedObjects)会很好地完成你的任务。

在这种情况下它也不需要使用`NSFetchedResultsController`，你可以简单地逃脱[`NSFetchRequest`](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html#//apple_ref/doc/uid/TP40002484-SW1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T09:22:15.797

我需要更新很多实体，所以使用的解决方案`NSFetchRequest`太慢了。幸运的是，Apple`NSBatchUpdateRequest`在 iOS 8 中添加了。这是一个简单的示例：

```
NSBatchUpdateRequest *batchUpdate = [[NSBatchUpdateRequest alloc] initWithEntityName:@"EntityName"];
batchUpdate.propertiesToUpdate = @{ @"attribute": @(0) };
batchUpdate.resultType = NSBatchDeleteResultTypeStatusOnly;
[managedObjectContext executeRequest:batchUpdate error:nil]; 
```

这里有一篇关于这个主题的好博文：[https](https://www.bignerdranch.com/blog/new-in-core-data-and-ios-8-batch-updating/) ://www.bignerdranch.com/blog/new-in-core-data-and-ios-8-batch-updating/ 。

# asp.net - e.row.rowType 值返回 NULL

> ID：14936418
> 
> 赞同：0
> 
> 时间：2013-02-18T12:33:40.757
> 
> 标签：asp.net, hyperlink, datarow

```
protected void passSubContractorInfoToNewPage(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Sub_Contractor subC = (Sub_Contractor)e.Row.DataItem;
            HyperLink LoadSubContractorDetails = (HyperLink)e.Row.FindControl("LoadSubContractorDetails");
            LoadSubContractorDetails.NavigateUrl = ResolveUrl(@"~/SubContractDetails.aspx?id=" + subC.id.ToString());
        }
}
<asp:GridView ID="GridView2" OnRowDataBound="passSubContractorInfoToNewPage" runat="server" AllowPaging="True" AllowSorting="True" CssClass="gridview" AutoGenerateColumns="false" DataSourceID="GridDataSource1"> 
        <Columns>
        <asp:BoundField DataField="id" HeaderText="id" ReadOnly="True" SortExpression="InvoiceInfoID" /> 
        <asp:BoundField DataField="Company Name" HeaderText="Company Name" SortExpression="Name" />   
        <asp:TemplateField>
            <ItemTemplate>
                <asp:HyperLink ID="LoadSubContractorDetails" runat="server" Text="Show Details"/>
             </ItemTemplate>
        </asp:TemplateField>

   </asp:GridView>
     <asp:SqlDataSource ID="GridDataSource1" runat="server"   
          ConnectionString="<%$ConnectionStrings:ClarkesTest4FromMaster1ConnectionString %>"  
         SelectCommand="SELECT id, [Company Name] FROM [Sub Contractor] ORDER BY [Company Name]" >
    </asp:SqlDataSource> 
```

这将返回 subContractor 为 NULL 的错误，错误为：

```
Unable to cast object of type 'System.Data.DataRowView' to type 'Sub_Contractor'. 
```

也试过

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {
            DataRowView view = (DataRowView)e.Row.DataItem; 
```

但仍然没有喜悦......

为什么它不接分包商有人可以告诉我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:43:11.430

> 无法将“System.Data.DataRowView”类型的对象转换为“Sub_Contractor”类型。

这是不言自明的。所以每个的底层数据源`GridViewRow`是一个`DataRowView`.

但我不明白这一点：

> 也试过

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    DataRowView view = (DataRowView)e.Row.DataItem; 
```

> 但仍然没有喜悦......

这应该没有问题。所以我认为这会导致您尚未提到的不同错误。

# javascript - 引导菜单切换第一次单击无法正常工作

> ID：14936419
> 
> 赞同：2
> 
> 时间：2013-02-18T12:33:41.013
> 
> 标签：javascript, css, twitter-bootstrap, responsive-design

我使用的是 bootstrap-collapse.js v2.3.0，但由于某种原因，第一次单击时菜单只是出现并且不会向下滑动。我还注意到高度没有说`auto`，它说`205px`。我没有在 CSS 中的任何地方将菜单设置为这个高度。第一次点击后，当我关闭它时，一切看起来都很完美，高度在 0 和 auto 之间切换，并且有一个平滑的过渡，而不是立即出现。

我不确定要包含哪些代码，因为它似乎是问题所在的引导切换，但是这里是 html ......我删除了一些无关紧要的代码..

```
<div class="navbar">
 <div class="navbar-inner">

              <a data-target=".nav-collapse" data-toggle="collapse" class="brand visible-phone">
    Categories
  </a>
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>
  <div class="nav-collapse">
     <ul class="nav">
        <li> //more code </li>

        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">//more code<<b class="caret"></b></a>

         <ul class="dropdown-menu" >

            <li>//code</li>
              <ul>

                        <li>//code</li>

              </ul>

         </ul>

    </li>

    <li>//code</li> 
```

但这里是该网站的链接...

[http://bc_mobile.hailstormcommerce.com/](http://bc_mobile.hailstormcommerce.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:41:06.477

[请用导航](http://jsfiddle.net/shail/VvgS2/show/)检查这个 jsfiddle JSfiddle

```
<div class="navbar">
<div class="navbar-inner">
<a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar">
   <i class="icon-bar"></i>
  </a>

    <a class="brand" href="">New Icon Menu</a>

    <div class="nav-collapse">
        <ul class="nav nav-pills pull-right">
            <li><a href=""><i class="icon-home icon-2x"></i> Home<br></a>

            </li>
            <li><a href=""><i class=" icon-pencil icon-2x"></i>About Us</a>

            </li>
            <li><a href=""><i class=" icon-briefcase icon-2x"></i>Portfolio</a>

            </li>
            <li><a href=""><i class=" icon-envelope icon-2x"></i>Contact Us</a>

            </li>
        </ul>
    </div>
</div> 
```

# php - 如何在 php preg_match 函数调用中允许括号？

> ID：14936429
> 
> 赞同：1
> 
> 时间：2013-02-18T12:34:07.550
> 
> 标签：php, preg-match

我想在我的 php preg_match 函数调用中允许括号：

```
preg_match("/[^A-Za-z0-9-_,#@. \/']/",$address). 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:35:14.440

您应该使用反斜杠转义括号：

```
preg_match("/[^A-Za-z0-9-_,#@. \/'\[\]]/",$address); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:59:11.120

你可以试试这个：

```
preg_match("/[^A-Za-z0-9-_,#@. \/\(\)']/", $address). 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:36:31.367

```
 preg_match("/[^A-Za-z0-9-_,#@. /'\[\]]/",$address) 
```

# html - 常见的 CSS 错误：带有奇怪空间的 display-inline

> ID：14936433
> 
> 赞同：0
> 
> 时间：2013-02-18T12:34:22.833
> 
> 标签：html, css

目前我有一些问题。

这是因为我想从浮动更改为`display: inline-block;`

我在[这个预览中的结果](http://jsbin.com/agotiv/2)

现在我注意到我上方这个奇怪的空间`<nav>`

如果您看不到奇怪的空间，请查看[此预览](http://jsbin.com/agotiv/4/)。

当我使用浮动时，这个奇怪的空间是不可见的。但我反对浮动设计，我只想将浮动用于图像。

所以我的问题是：**如何删除该空间？**

如果有人知道治愈/修复;）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:41:29.980

内联流是相当棘手的事情。它有助于了解如何组合在一起以及它们如何影响它`vertical-align`。`line-height`在这种情况下，解决此问题的一种方法是使用`vertical-align: top`on `nav`（如果您愿意，它比`h1`—apply to both 更短）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:46:54.373

这是一个空格字符。因为内联块与块的工作方式相同，所以当它们之间有空格字符时，它们将具有可见的分隔符。

为了更容易理解，看这个例子：

```
<p>
This
words
will
have
a
space
between
them
</p> 
```

因此，因为您将项目放在代码的不同行中：

```
<ul>
    <li><a title="home" href="/">home</a></li>
    <li><a title="login" href="/login">login</a></li>
</ul> 
```

...浏览器正在添加空间来代替新行。你几乎没有办法修复它。

将它们放在一行上：

```
<ul>
    <li><a title="home" href="/">home</a></li><li><a title="login" href="/login">login</a></li>
</ul> 
```

或者`font-size: 0;`在 ul 上设置，然后在 li 上设置正常字体大小。这样 li 之间的空间将等于 0。

# python - 如何增加 MemCacheProtocol 的 MAX_KEY_LENGTH？

> ID：14936438
> 
> 赞同：1
> 
> 时间：2013-02-18T12:34:36.903
> 
> 标签：python, twisted

我正在尝试更改 MAX_KEY_LENGTH 我尝试了以下示例：

```
from twisted.internet import reactor, protocol
from twisted.protocols.memcache import MemCacheProtocol, DEFAULT_PORT
import string
from twisted.python import log
import sys
log.startLogging(sys.stdout)
def cb(response):
    log.msg(response) 
d = protocol.ClientCreator(reactor, MemCacheProtocol
    ).connectTCP('localhost', DEFAULT_PORT)
def doSomething(proto):
    # Here you call the memcache operations
    return proto.set(string.ascii_letters*5, string.ascii_letters*5)

MemCacheProtocol.MAX_KEY_LENGTH = 1000
d.addCallback(doSomething)
d.addBoth(cb)
d.addBoth(lambda ignore: reactor.stop())
reactor.run() 
```

我一直在失败：

```
[Failure instance: Traceback (failure with no frames): <class 'twisted.protocols.memcache.ClientError'>: bad command line format! 
```

我猜不是所有消息都发送到内存缓存服务器，因此它返回此失败我需要做什么才能将长度大于 250 的密钥存储在内存缓存中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T11:58:50.330

您修改它为时已晚。试试这个：

```
class MyMemCacheProtocol(MemCacheProtocol):

    MAX_KEY_LENGTH = 1000 
```

现在在 ClientCreator() 调用中使用这个类而不是原来的。

# spring - ehcache在生产环境中失败

> ID：14936439
> 
> 赞同：1
> 
> 时间：2013-02-18T12:34:38.353
> 
> 标签：spring, hibernate, networking, spring-mvc, centos

我正在开发`SpringMVC`以下版本的应用程序：

```
Spring 3.2.0, Hibernate 3.6.9 
```

Echache

它在（开发中）的 Windows 环境中运行良好`Tomcat 6.18`，但是当我们部署到生产环境（`Cent OS`）中时，它会出现以下错误并且部署失败。

我得到了确切的根本原因。

```
2013-02-18 12:42:16,941 -  - Unable to set localhost. This prevents creation of a GUID. Cause was: static-182-18-145-83.ctrls.in: static-182-18-145-83.ctrls.in
java.net.UnknownHostException: static-182-18-145-83.ctrls.in: static-182-18-145-83.ctrls.in
    at java.net.InetAddress.getLocalHost(InetAddress.java:1360)
    at net.sf.ehcache.Cache.<clinit>(Cache.java:200)
    at net.sf.ehcache.config.ConfigurationHelper.createCache(ConfigurationHelper.java:302)
    at net.sf.ehcache.config.ConfigurationHelper.createDefaultCache(ConfigurationHelper.java:218)
    at net.sf.ehcache.CacheManager.configure(CacheManager.java:599)
    at net.sf.ehcache.CacheManager.init(CacheManager.java:358)
    at net.sf.ehcache.CacheManager.<init>(CacheManager.java:272)
    at org.hibernate.cache.EhCacheProvider.start(EhCacheProvider.java:134)
    at org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge.start(RegionFactoryCacheProviderBridge.java:72)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:238)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:286)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1545)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1483)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:36:15.920

这与`hostname`

```
127.0.0.1   work        localhost 
```

到您的 /etc/hosts 文件

你可以通过执行来做到这一点

须藤重击

```
echo "127.0.0.1 localhost mynap3" >> /etc/hosts 
```

# .net - Convert.ToDouble 使用错误的小数分隔符

> ID：14936447
> 
> 赞同：1
> 
> 时间：2013-02-18T12:35:06.860
> 
> 标签：.net, vb.net, culture

我正在开发一个 VB.net 08 项目并且代码有一个奇怪的问题。

```
SyncItemValues(i) = Convert.ToDouble(werte(i-1)) 
```

并且`werte(i)`是一个字符串列表。

```
SyncItemValues(i) As Object 
```

`werte(i)`填充了从 MySql 数据库导入的整数和实数值。实际值为例如 4.6 ；5.7；...所以小数分隔符是“。”

问题是转换函数解释“。” 作为组分隔符。所以它将 4.5 转换为 45 这是错误的。

如果我使用“，”作为小数分隔符或将文化从 DE 更改为 US，则结果是正确的。

奇怪的是，到目前为止，该项目一直在进行这种转换，而这些问题以前从未发生过。对项目进行了几处更改，但从未触及过转换。一个 dll 已更改，我现在问自己的问题是这种交换是否会导致奇怪的行为。

我完全不知道出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:36:52.237

> werte(i) 填充了从 MySql 数据库导入的整数和实数值。

然后不要将它们作为字符串获取。假设它们确实以数值形式存储在数据库中，请避免*所有*字符串转换——它们只会造成麻烦。

[`Convert.ToDouble(String)`](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)使用当前的线程文化。如果您*确定*这是适当的值，您*可以*[`Double.Parse`](http://msdn.microsoft.com/en-us/library/t9ebt447.aspx)使用 ,作为格式提供程序解析该值 - 但同样，最好避免从字符串转换开始。`CultureInfo.InvariantCulture`

# javascript - Strophe和Phonegap

> ID：14936458
> 
> 赞同：2
> 
> 时间：2013-02-18T12:35:19.287
> 
> 标签：javascript, android, ios, cordova, jquery-mobile

我在使用 Strophe 的 Phonegap 中遇到 xmpp 连接问题。我尝试从网络应用程序到Phonegap应用程序（jQuery Mobile）实现strophe插件，当我尝试连接时，Strophe调用Strophe.Status.CONNECTING，下一个“Strophe.Status.CONNFAIL”，下一个Strophe.Status.CONNECTING，然后没有别的. 它不是触发错误，发送 Stanza（带有“body rid=xx ....”）但没有任何反应。节、服务器、ID、调用者等在使用普通 jQuery 的网页中运行良好。

有没有人使用phonegap和strophe并且可以帮助我？当前项目在 Android 下，但它将在 iOS、Windows Phone 和 BlackBerry 上可用，我想使用 javascript 本机方法。

更新：我正在尝试使用 Android 手机和原始站点（台式计算机站点），但 strophe 也没有连接，行为相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:03:02.083

问题是 strophe.flxhr.js 和 flxhr 文件，这在移动设备上是不接受的。谢谢@Vlad。

# php - 调用 Zend Framework 2 命令行工具时出现 include_path 错误

> ID：14936459
> 
> 赞同：0
> 
> 时间：2013-02-18T12:35:20.210
> 
> 标签：php, zend-framework2, include-path

尝试使用 zf 从命令行在 Zend 中运行“创建项目”时，出现以下错误：

> 为了运行 zf 命令，您需要确保 Zend 框架在您的 include_path 中

我正在使用 XAMPP，我的 php ini 位于：C:\xampp\php\php.ini 读取：

> include_path = ".;C:\xampp\php\PEAR;C:\ZendFramework-2.1.1\library"

我正在运行 Windows 7，我的环境变量为：

> C:\xampp\php;C:\ZendFramework-2.1.1\library;C:\ZendFramework-2.1.1\bin

因此，即使我在 php.ini 中引用了框架，它仍然无法识别。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:09:38.490

看起来像是 ZF1 与 ZF2 的问题。

ZF2 命令行工具[ZFTool](http://framework.zend.com/manual/2.1/en/modules/zendtool.introduction.html)与 ZF1 版本截然不同。

看起来您正在尝试在 ZF2 安装上使用 ZF1 工具调用。

# android - Android 2.3.3（API 级别 8）AsyncTask 怪异

> ID：14936460
> 
> 赞同：1
> 
> 时间：2013-02-18T12:35:26.523
> 
> 标签：android, android-asynctask

我有几个活动处理不同的屏幕，其中包含通过 AsyncTask 异步加载的信息。

所有数据获取都在 doInBackground() 中完成 所有 UI 操作都在 onPostExecute() 中完成

在某些情况下，我收到错误消息：“无法在未调用 Looper.prepare() 的线程内创建处理程序”

如果我执行 Looper.prepare()，如果为此类实例化一个新活动，它会崩溃。

这是一种奇怪的行为，我能够找到它发生的原因。具有类似行为的其他屏幕按预期工作。我找不到它们之间的差异。

有没有人有这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:40:47.947

“无法在未调用 Looper.prepare() 的线程内创建处理程序”意味着您正在尝试`AsyncTask.execute()`在 UI 线程之外调用。

您应该遵循以下规则`AsyncTask`：

*   任务实例必须在 UI 线程上创建。
*   必须在 UI 线程上调用 execute(Params...)。

这也可能意味着您在方法`Handler`内创建对象`doInBackground`。

# javascript - 如何在 AngularJS 中自动加载依赖项？

> ID：14936461
> 
> 赞同：1
> 
> 时间：2013-02-18T12:35:46.573
> 
> 标签：javascript, angularjs

我有一个 Angular 应用程序。我正在 HTML5 中创建不同的小部件，如下所示。

```
<html ng-app>
  <div ng-controller="widget1">
  </div>

  <div ng-controller="widget2">
  </div>
</html> 
```

每当它们出现在标记中时，如何自动加载 widget1.js 和 widget2.js？我不想在每个小部件的标题中填充 <script> 标记。我是 Angular 的新手。它实际上是如何处理的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:57:30.423

那么指令不是更好的选择吗？您可以将 widget1.js 和 widget2.js 的内容放在各自的链接函数中。这样，只有当指令在标记中时它们才会被加载。

或者我相信，如果我错了，请有人纠正我。

# css - 连续居中图像

> ID：14936462
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:35:46.937
> 
> 标签：css, image, row, center

我希望在[http://justinstephens.co](http://justinstephens.co)的“联系我们”部分下将图像连续居中。

可能是一个简单的解决方案，但我似乎无法正确解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:45:31.020

**更新**

下面的解决方案是在 Chrome 中通过实时编辑完成的。经过进一步调查，您的 CSS 文件似乎在`#contact-images`. 删除此边距将允许以下解决方案起作用。

```
#contact-images {
    /*margin-left: 190px;*/
    text-align: center; 
} 
```

* * *

这将使`<ul>`以下联系我们居中：

```
<div id="contact-images" style="text-align: center;"> 
```

仍然存在轻微的错位。删除`<ul>`元素的填充以解决此问题。

```
<ul style="padding: 0 0 0 0;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:44:48.727

添加`text-align:center`到具有 id 的元素`contact-images`。以下仅用于演示目的：

```
<div id="contact-images" style="text-align: center;"> [...] </div> 
```

# java - Java包和子包按字母顺序打印

> ID：14936466
> 
> 赞同：-2
> 
> 时间：2013-02-18T12:35:53.140
> 
> 标签：java, sorting, packages

我需要按字母顺序打印 Java 的包和子包。我这样做了：

导入 java.util.Arrays；

公共类 J0602 { public static void main (String args[]) {

```
 Package[] packs = Package.getPackages();
    String[] packageNames =new String[packs.length];
    int i=0;
    for (Package pack:packs){
        packageNames[i] = pack.getName();
        System.out.println(pack.getName());
        i++;
    }
    Arrays.sort(packageNames);
} 
```

}

..但它不起作用。关于包裹，我有什么遗漏吗？为什么 Arrays.sort(); 在这里不工作？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:48:19.603

这可能是因为您在打印出元素后对数组进行排序。

尝试以这种方式排列您的代码

```
Arrays.sort(packageNames);
for (Package pack:packs){
         System.out.println(pack.getName());
} 
```

或者，您可以将数组转储到 TreeSet 并遍历它 vis tr

```
TreeSet<Package> packages = new TreeSet<Package>(Arrays.asList(packageNames)); 
```

然后

```
for (Package pack:packages){
    System.out.println(pack.getName());
} 
```

请注意，这将从您的阵列中删除重复的包。

# java - 在这个通用方法中如何避免 SuppressWarnings("unchecked") ？

> ID：14936467
> 
> 赞同：1
> 
> 时间：2013-02-18T12:35:56.243
> 
> 标签：java, generics

如何在这种方法中摆脱 @SuppressWarnings("unchecked") ？

```
@SuppressWarnings("unchecked")
public <T> Worker<T> findSimilarWorker(Worker<T> worker) {
    // The variable workers is a Set<Worker<?>>
    for(Worker<?> w : workers) {
        // The following line is unchecked cast
        if(w.isSimilar(worker)) return (Worker<T>) w;
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:41:55.930

只要`workers`定义为 yield`Worker`类型`?`，您就只*需要*类型转换。编译器正确地警告您这一点，因为它`workers`可能包含`Worker`不同类型的 a （虽然`workers`没有显示，我假设它不是 type `T`）。

（短版：你不能，即使是`instanceof`支票，也不允许泛型）

# java - 在文件中写入对象的arraylist

> ID：14936468
> 
> 赞同：1
> 
> 时间：2013-02-18T12:36:00.027
> 
> 标签：java

我想在文件中写入对象的数组列表。但只有一个对象进入文件。首先我获取所有存储的对象，然后附加新对象，然后将整个 arrayList 写入文件。

这是我的代码....

```
public void write(UserDetail u1) throws FileNotFoundException {
    ArrayList<UserDetail> al = new ArrayList<UserDetail>();
    FileInputStream fin = new FileInputStream(FILEPATH);

    try {

        if (fin.available() != 0) {
            ObjectInputStream ois = new ObjectInputStream(fin);
            while (fin.available() != 0 && ois.available() != 0) {
                try {
                    al.add((UserDetail) ois.readObject());

                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {

                    if (ois != null) {
                        ois.close();

                    }
                }
            }
        }
        al.add(u1);
        FileOutputStream fos = new FileOutputStream(FILEPATH);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(al);
        oos.flush();
        oos.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        throw e;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

帮帮我……提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:39:15.180

您正在读取类型的对象，`UserDetail`但正在写入类型的对象`ArrayList`。应该是：

```
al = (ArrayList)ois.readObject (); 
```

代替

```
al.add ((UserDetail) ois.readObject ()); 
```

# html - nth-child ul 列表项背景重复到子 ul 列表

> ID：14936470
> 
> 赞同：0
> 
> 时间：2013-02-18T12:36:03.457
> 
> 标签：html, css, html-lists, css-selectors

我忙于 Bigcommerce 网站的设计，发现列表项及其各自背景存在 CSS 语法问题。

列表项标题和列表项本身是从数据库生成的。这是我的代码的样子：

```
.Left #SideCategoryList ul li:first-child a {
background-image:url("hiddenurl/product_images/uploaded_images/cat-types.png") !important;
padding-left:10px;
padding-top:25px;    
}

.Left #SideCategoryList ul li:nth-child(2) a {
 background-image:url("hiddenurl/product_images/uploaded_images/cat-collections.png") !important;
padding-left:10px;
padding-top:36px;
}
.Left #SideCategoryList ul li:nth-child(3) a {
background-image:url("hiddenurl/product_images/uploaded_images/cat-themes.png") !important;
padding-left:10px;
padding-top:17px;
} 
```

这些图像完美地显示为我的列表项的标题背景。

然而，这些背景随后被添加到我似乎无法删除的后续 ul 列表项中。

我试图通过以下内容强制后续列表项没有背景：

```
.Left #SideCategoryList ul li ul li a {
background-image:none !important;
} 
```

但他们仍然不会消失。

你们有什么想法我可以重新编码列表项的背景或强制列表项的其余部分，以便这些背景只出现在“外部”Ul 的列表项标题上？

任何帮助，将不胜感激。

**编辑** 出于隐私考虑，我正在删除我的网址。完整的 http:\ url 在原始 css 中。

**编辑 2**为清晰起见，列表结构的布局如下：

```
<ul>
   <li>
      <ul>
         <li></li>
         <li></li>
         <li></li>
      </ul>
   </li>
    <li> 
       <ul>
         <li></li>
         <li></li>
         <li></li>
      </ul>
   </li>
      <ul>
         <li></li>
         <li></li>
         <li></li>
      </ul>
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:15:36.167

为您的 css 尝试此选择器：-

```
.Left #SideCategoryList > ul > li:first-child > a 
```

'>' 表示直接子级，因此内部 Ul,Li 不会受到影响

# html - 多选文本溢出？

> ID：14936482
> 
> 赞同：2
> 
> 时间：2013-02-18T12:36:32.753
> 
> 标签：html, css

我正在尝试对带有多个的选择的选项应用文本溢出。但是，我似乎无法触摸选项文本。

这是我的 HTML：

```
 <select id="multiselect" multiple="" size="6">

   <option value="123456780123456780123456780123456780123456780123456780" selected="selected">123456780123456780123456780123456780123456780123456780</option>
    <option value="other" selected="selected">other</option>
</select> 
```

这是我的CSS：

```
#multiselect {
width: 222px;
border-top: 2px solid #ccc;
float: none;
background: #fff;
outline: none;
margin-right: 0;
margin-left: 5px;
border-radius: 0;
margin-bottom: 11px;
overflow: hidden;
text-overflow: ellipsis;
}

#multiselect option {
  overflow: hidden;
text-overflow: ellipsis;
white-space:nowrap;
 width:222px;
} 
```

我知道当它应该（我认为）只应用于选项时重复文本溢出，但我想证明它在任何一种解决方案中都不起作用。

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:07:53.933

不幸的是，我找不到纯 CSS 的解决方案，所以我从[这篇文章](https://stackoverflow.com/questions/4637942/how-can-i-truncate-a-string-in-jquery)中获得了一些灵感（不是选择的答案，而是另一个更准确并处理非空格答案）并想出了这个 JS Loop 实现目标：

```
$('#multiselect option').each( function() {
        //Manually make the ellipsis, since CSS3 gets weird with select multiple.
        if (dictionary_length($(this).text()) > 30) {
            $(this).text($.trim($(this).text()).substring(0, 28).trim(this) + "...");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T00:08:45.693

将您`white-space: nowrap`向上移动到选择本身，而不仅仅是选项。

为我工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-15T11:59:06.823

这种样式对我来说适用于 SCSS：

```
select {
  width: 100%;
  option {
    overflow: hidden;
    text-overflow: ellipsis;
  }
} 
```

# string - 我无法在 php 中获取字符串值

> ID：14936490
> 
> 赞同：1
> 
> 时间：2013-02-18T12:37:05.043
> 
> 标签：string, path, get

我的 php 文件位置是

```
http://localhost/mysite-Copy/index.php 
```

这是转到其他页面的链接

```
http://localhost/mysite-Copy/category/Article/money1.php 
```

在这个链接中，我使用代码时无法获取字符串值`$_Get['id']`

我无法在此链接中获取字符串值

```
http://localhost/mysite-Copy/category/Article/money1.php 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:46:09.590

由于您的问题真的不清楚，我猜您忘记通过调用将您的“id”值传递给您的money1.php

`http://localhost/mysite-Copy/category/Article/money1.php?id=your_id_here`

然后在你的 money1.php 中用`$value = $_GET["id"]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:48:27.787

我同意 Big00d。此外，问题可能出在您的 html 表单中。您确实意识到我们无法浏览到那些**本地**链接，对吧？

# javascript - 如何使用 jQuery 获取所有表单元素的值？

> ID：14936494
> 
> 赞同：55
> 
> 时间：2013-02-18T12:37:20.677
> 
> 标签：javascript, html, jquery

这是HTML代码：

```
<!DOCTYPE html><html xmlns='http://www.w3.org/1999/xhtml' >
<head>
    <title>HTML Form Builder</title>
    <link href='css/font1.css' rel='stylesheet' type='text/css'>
    <link href='css/font2.css' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='css/style.min.css' type='text/css' media='all' />
    <link rel='stylesheet' href='css/form.min.css' type='text/css' media='all' />
    <link rel='stylesheet' href='css/style1.css' type='text/css' media='all' id='css-theme'/>
    <link type='text/css' href='css/redmond/jquery-ui-1.8.23.custom.css' rel='stylesheet' />
    <link rel='stylesheet' href='css/tipsy.css' type='text/css' media='all' />
    <script type='text/javascript' src='js/jquery-1.8.0.min.js'></script>
    <script type='text/javascript' src='js/jquery-ui-1.8.23.custom.min.js'></script>
    <script type='text/javascript' src='js/jquery.metadata.js'></script>
    <script type='text/javascript' src='js/jquery.validate.js'></script>
    <script type='text/javascript' src='js/jquery.tipsy.js'></script>
    <script type='text/javascript' src='js/jquery.json-2.3.min.js'></script>

    <script type='text/javascript' src='js/main.min.js'></script>
    <script type='text/javascript'>
    $(function(){
        changeInnerHTML('doctor_id');
        changeInnerHTML('hospital_id');
        changeInnerHTML('clinic_id');
        changeInnerHTML('stockist_id');
        changeInnerHTML('chemist_id');
        changeInnerHTML('bloodbank_id');
        changeInnerHTML('dialysis_id');

    });
    function changeInnerHTML(id)
    {
        if($('#dialog_box_'+id).length)
        {
            var tmp=id.split('_');
             $.get('getDataValues.php?ref='+tmp[0],function(data,status){
                $('#dialog_box_'+id).html(data);
            });
        }
    }
    </script>
    </head>
    <body>
    <div id='container'>

        <h1 id="form-name" style="background-color: rgb(255, 255, 255); box-shadow: none; border: none; margin: 8px 15px;">New Form</h1>
        <form method="POST" id="preview_form" novalidate="novalidate">

        <div class="row" style="display: block;"><label class="field" for="textarea_1">textarea_1</label><span class="textArea" data=""><textarea id="dialog_box_textarea_1" name="textarea_1" data="{&quot;validate&quot;:{&quot;required&quot;:false,&quot;messages&quot;:{}}}"></textarea></span></div><div class="row" style="display: block;"><label class="field" for="radiobutton_1">radiobutton_1</label><span class="radioButton" data="" id="radiobutton_1"><label class="option" for="radiobutton_1_option_1"><input class="radio" id="dialog_box_radiobutton_1_option_1" type="radio" name="radiobutton_1" value="Option 1" data="{&quot;validate&quot;:{&quot;required&quot;:false,&quot;messages&quot;:{}}}">Option 1</label><label class="option" for="radiobutton_1_option_2"><input class="radio" id="radiobutton_1_option_2" type="radio" name="radiobutton_1" value="Option 2">Option 2</label><label class="option" for="radiobutton_1_option_3"><input class="radio" id="radiobutton_1_option_3" type="radio" name="radiobutton_1" value="Option 3">Option 3</label></span></div><div class="row" style="display: block;"><label class="field" for="checkboxgroup_1">checkboxgroup_1</label><span class="checkBoxGroup" data="" id="checkboxgroup_1"><label class="option" for="checkboxgroup_1_option_1"><input type="checkbox" class="checkbox" name="checkboxgroup_1[]" id="dialog_box_checkboxgroup_1_option_1" value="Option 1" data="{&quot;validate&quot;:{&quot;required&quot;:false,&quot;messages&quot;:{}}}">Option 1</label><label class="option" for="checkboxgroup_1_option_2"><input type="checkbox" class="checkbox" name="checkboxgroup_1[]" id="checkboxgroup_1_option_2" value="Option 2">Option 2</label><label class="option" for="checkboxgroup_1_option_3"><input type="checkbox" class="checkbox" name="checkboxgroup_1[]" id="checkboxgroup_1_option_3" value="Option 3">Option 3</label></span></div><div class="row" style="display: block;"><label class="field" for="dropdown_1">dropdown_1</label><span class="dropDown" data=""><select id="dialog_box_dropdown_1" name="dropdown_1" data="{&quot;validate&quot;:{&quot;required&quot;:false,&quot;messages&quot;:{}}}"><option value="Option 1">Option 1</option><option value="Option 2">Option 2</option><option value="Option 3">Option 3</option></select></span></div><input type="button" class="button blue" value="Submit" id="submit-form"><input type='hidden' id='tname' name='tname' value='surveyForm_2' /></form></div> <!--container-->

<script type='text/javascript' src='js/form.min.js'></script>
</body>
</html> 
```

这里将获取所有表单字段值的代码：

```
 $("#hidAll").append($("#preview_form :input").map(function () {
     if ($(this).val() != 'Submit') {
         if ($(this).is('select')) {
             var aa = $(this).children('option').map(function () {
                 return $(this).val();
             }).get().join("|");
             return $(this).attr('name') + '|' + aa;
         } else if ($(this).is('input:checkbox')) {
             return $(this).attr('name').substring(0, $(this).attr('name').length - 2) + '|' + $(this).val();
         } else {
             return $(this).attr('name') + '|' + $(this).val();
         }
     }
 }).get().join(","));
 alert($("#hidAll").html()); 
```

从这里我得到的输出值如下：

```
textfield_1|dgdfg,
checkboxgroup_1|Option 1,
checkboxgroup_1|Option 2,
checkboxgroup_1|Option 3,
radiobutton_1|Option 1,
radiobutton_1|Option 2,
radiobutton_1|Option 3,
dropdown_1|Option 1!Option 2!Option 3 
```

我想要如下：

```
textfield_1|dgdfg,
checkboxgroup_1|Option 1!Option 2!Option 3,
radiobutton_1|Option 1!Option 2!Option 3,
dropdown_1|Option 1!Option 2!Option 3 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-05-03T15:35:37.450

您可以使用 JQuery 的 serialize() 函数：

```
 var datastring = $("#preview_form").serialize();
        $.ajax({
            type: "POST",
            url: "your url.php",
            data: datastring,
            success: function(data) {
                 alert('Data send');
            }
        }); 
```

并在 PHP 中阅读：

```
echo $_POST['datastring']['dialog_box_textarea_1'];
echo $_POST['datastring']['radiobutton_1'];
........ 
```

并获取 ***data-**** 来标记 HTML5，您可以看到以下示例：

```
<div id="texto" data-author="Ricardo Miranda" data-date="2012-06-21">
<h4>Lorem ipsum</h4>
  <p>
    Lorem ipsum dolor sit amet, ius integre eligendi et,
    sea ut expetendis conclusionemque,
    mel at ornatus invenire. His ad moderatius definiebas omittantur,
    liber saepe albucius sea cu.
    Audire tamquam dolores vis ne, mediocrem consulatu eum ex.
    Duo te agam saepe convenire, et fugit iisque his.
 </p> 
```

```
<script type="text/javascript">
$(function() {
    alert("The text is write " + $('#texto').data('author'));
}); 
```

和

```
<div id="texto" data-author='{"nombre":"Ricardo","apellido":"Miranda"}' data-date="2012-06-21">
   ...
</div>

<script type="text/javascript">
$(function() {
    alert("The text is write " + $('#texto').data('author').apellido + ", " +
        ('#texto').data('author').nombre);
});
</script> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-09T11:43:57.300

我知道您使用的是 jQuery，但对于那些想要**纯 Javascript**解决方案的人来说：

```
// Serialize form fields as URI argument/HTTP POST data
function serializeForm(form) {
    var kvpairs = [];
    for ( var i = 0; i < form.elements.length; i++ ) {
        var e = form.elements[i];
        if(!e.name || !e.value) continue; // Shortcut, may not be suitable for values = 0 (considered as false)
        switch (e.type) {
            case 'text':
            case 'textarea':
            case 'password':
            case 'hidden':
                kvpairs.push(encodeURIComponent(e.name) + "=" + encodeURIComponent(e.value));
                break;
            case 'radio':
            case 'checkbox':
                if (e.checked) kvpairs.push(encodeURIComponent(e.name) + "=" + encodeURIComponent(e.value));
                break;
            /*  To be implemented if needed:
            case 'select-one':
                ... document.forms[x].elements[y].options[0].selected ...
                break;
            case 'select-multiple':
                for (z = 0; z < document.forms[x].elements[y].options.length; z++) {
                    ... document.forms[x].elements[y].options[z].selected ...
                } */
                break;
        }
    }
    return kvpairs.join("&");
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-06T05:29:22.500

jQuery 有一个非常有用的函数叫做[serialize](http://api.jquery.com/serialize/)。

演示：http: [//jsfiddle.net/55xnJ/2/](http://jsfiddle.net/55xnJ/2/)

```
//Just type:
$("#preview_form").serialize();

//to get result:
single=Single&multiple=Multiple&multiple=Multiple3&check=check2&radio=radio1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-03-30T07:52:02.087

试试这个获取表单输入文本值到 JavaScript 对象......

```
var fieldPair = {};
$("#form :input").each(function() {
    if($(this).attr("name").length > 0) {
        fieldPair[$(this).attr("name")] = $(this).val();
    }
});

console.log(fieldPair); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-03T07:07:54.280

将其添加到它的末尾：

```
var array = $("#hidAll").html();

x = array.split(',');
key=s="";
for (i=0; i<x.length; i++) {
  oldkey = key;
  key = x[i].split('|')[0];
  if (oldkey==key) s+='!';
  else s+=',\n'+key+'|';
  s+=x[i].split('|')[1];
}
s = s.substring(1);
$('#hidAll').html(a); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T11:21:09.070

答案已经被接受，我只是为了同样的目的写了一个简短的技术。

```
var fieldPair = '';
$(":input").each(function(){
fieldPair += $(this).attr("name") + ':' + $(this).val() + ';';
});

console.log(fieldPair); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-11T03:51:32.230

如果要使用 $(formName).serializeArray() 或 $(formName).serialize()，则必须添加`name='inputName'`输入元素。否则将无法正常工作！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-02T11:17:45.863

我需要将表单数据作为某种对象获取。我用这个：

```
$('#preview_form').serializeArray().reduce((function(acc, val) {
  acc[val.name.replace('[', '_').replace(']', '')] = val.value;
  return acc;
}), {}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-12-29T22:43:50.540

如果你想从简单数组中的表单中获取所有值，你可能会做这样的事情。

```
function getValues(form) {
    var listvalues = new Array();
    var datastring = $("#" + form).serializeArray();
    var data = "{";
    for (var x = 0; x < datastring.length; x++) {
        if (data == "{") {
            data += "\"" + datastring[x].name + "\": \"" + datastring[x].value + "\"";
        }
        else {
            data += ",\"" + datastring[x].name + "\": \"" + datastring[x].value + "\"";
        }
    }
    data += "}";
    data = JSON.parse(data);
    listvalues.push(data);
    return listvalues;
}; 
```

# c# - 为什么静态类和单例模式类不是线程安全的？

> ID：14936496
> 
> 赞同：1
> 
> 时间：2013-02-18T12:37:23.217
> 
> 标签：c#, static, thread-safety, singleton

是的，目前我对 C# 语言规范和可能破译的教程很感兴趣。我阅读了多个关于线程安全单例类的问题和答案/文章。

以下是我已经探索过的帖子：

*   [静态类和单例模式之间的区别？](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)
*   [为什么使用单例而不是静态类？](https://stackoverflow.com/questions/2969599/why-use-singleton-instead-of-static-class)
*   [为什么选择静态类而不是单例实现？](https://stackoverflow.com/questions/1321352/why-choose-a-static-class-over-a-singleton-implementation)
*   [如何使这个 c# 类成为单例、线程安全的](https://stackoverflow.com/questions/9936065/how-to-make-this-c-sharp-class-a-singleton-thread-safe)

我读得越多，我就越沉迷于这些信息。有人可以指导我更好地了解

1）为什么开发人员关心线程安全？

2）如何确定静态类/单例类不是线程安全的？（试用示例代码/示例教程会很棒，因为我喜欢正确学习这些基础知识）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:41:23.733

> 为什么静态类和单例模式类不是线程安全的？

谁说**所有**的单例模式类都不是线程安全的？使类*线程*安全的许多方法

见这里：[http ://csharpindepth.com/Articles/General/Singleton.aspx](http://csharpindepth.com/Articles/General/Singleton.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:41:25.570

1.  当您想提高性能时，您会遇到必须使用线程的情况，因此在使您的应用程序线程安全时，您可以避免一些竞争情况。

2.  静态类和单例类将共享应用程序整个实例的值。当您从多个线程访问该对象时，您可以重用或覆盖也被另一个对象使用的变量。这将导致一些非常奇怪的输出，有时很难找到发生了什么，因为在测试用例中模拟它并不容易。您可以在方法中实现 a`lock`以在这些类中引入线程安全

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:42:13.120

单例模式有多种版本，有些是线程安全的，有些不是：

您可以阅读 Jon Skeet 关于这些模式的文章。

[http://cshapindepth.com/articles/general/singleton.aspx](http://csharpindepth.com/articles/general/singleton.aspx)

线程安全对于确保您使用正确的值非常重要。

在下面的示例中，两个线程调用一个方法，这意味着将值 x 设置为 25，如果它是 5，则将它乘以 5。

现在可以出现这样一种情况，主线程在x为5的时候进入if块，开始执行doSomething方法，然后是SecondThread，在x还是5的时候进入if循环，然后主线程A将x修改为25，然后然后 SecondThread 会将其修改为 125。

所以在这里我们需要某种同步，以便不超过一个线程可以同时修改 x。

```
private int x = 5;

        private void dosomething()
        {
        }
        private void multXby5if5() // Should make x =25, by multiplying 5  if it was 5, finally x should be 25
        {

            if (x == 5) // State A: SecondThread reaches here while x is still 5
            {
                dosomething(); //State A : Main thread reaches here

                x = x*5; // State B: Then Main Thread comes and makes x =25, then later SecondThread will come make x*5=25*5=125,

            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Thread tr = new Thread(multXby5if5);
            tr.Name = "SecondThread";
            multXby5if5();
            tr.Start();
        } 
```

这不是最好的例子，但我希望它会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-15T17:11:37.533

一般来说，单例模式不是线程安全的，因为每次线程请求实例时，容器都会移交同一个实例。这可能导致多个线程具有相同的实例。

但是有一些方法可以让你的 Singleton 线程安全。

# ios - Error "Reverse auth credentials are invalid" on Twitter Reverse Auth

> ID：14936500
> 
> 赞同：1
> 
> 时间：2013-02-18T12:37:34.530
> 
> 标签：ios, twitter, oauth

I am trying to implement Reverse Auth in an iOS PhoneGap / Cordova application.

I have Step 1 working correctly - my server performs a Token Request and returns the OAuth-Header-Like response to the mobile application.

But Step 2 isn't working. The response from Step 1 is sent to "/oauth/access_token" but I receive the response: Reverse auth credentials are invalid

Here is what my Step 1 response looks like:

```
OAuth oauth_token="xxx", oauth_timestamp="1361189727", oauth_nonce="QoUtVy4wchGbrSg7biruOIqsTU7G5gZHix9K7a5yU0", oauth_signature_method="HMAC-SHA1", oauth_signature="qcCuBxaYFJRVi0C1rpuqygSg6Bs%3D", oauth_consumer_key="xxx", oauth_version="1.0" 
```

Here is what my Step 2 code is:

```
NSDictionary *step2Params = [[NSMutableDictionary alloc] init];
[step2Params setValue:TW_CONSUMER_KEY forKey:@"x_reverse_auth_target"];
[step2Params setValue:step1ResponseString:@"x_reverse_auth_parameters"];
NSURL *authTokenURL = [NSURL URLWithString:TW_OAUTH_URL_AUTH_TOKEN];
id<GenericTwitterRequest> step2Request =
[self requestWithUrl:authTokenURL
          parameters:step2Params
       requestMethod:SLRequestMethodPOST];
[step2Request setAccount:selectedTwitterAccount];
[step2Request performRequestWithHandler:^(NSData *responseData, NSURLResponse *urlResponse, NSError *step2error) 
```

I am using this plugin to handle the Reverse Auth calls: [https://github.com/PatrickHeneise/SocialAuthenticationPlugin/blob/master/iOS/SocialAuthenticationPlugin.m](https://github.com/PatrickHeneise/SocialAuthenticationPlugin/blob/master/iOS/SocialAuthenticationPlugin.m)

Any help on what is going wrong?

The Step 1 response is in the form described in the docs ("oauth header like") and Step 2 just passes that exact string to Twitter along with my consumer key. What am I missing?

# r - 矢量场可视化 R

> ID：14936504
> 
> 赞同：18
> 
> 时间：2013-02-18T12:37:43.143
> 
> 标签：r, vector, plot

我有一个包含很多行的大文本文件。每一行对应一个向量。这是每一行的示例：

```
 x           y               dx              dy
99.421875   52.078125   0.653356799108  0.782479314511 
```

前两列是向量开始的坐标。两个第二列是坐标增量（结束减去开始）。我需要制作这个向量场的图片（一张图片上的所有向量）。我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-18T14:51:50.340

如果有很多数据（问题是“大文件”），绘制单个向量可能不会给出非常易读的图。这是另一种方法：矢量场描述了一种使平面上绘制的东西变形的方式；将其应用于白噪声图像。

```
vector_field <- function(
  f,  # Function describing the vector field
  xmin=0, xmax=1, ymin=0, ymax=1,
  width=600, height=600,
  iterations=50,
  epsilon=.01,
  trace=TRUE
) {
  z <- matrix(runif(width*height),nr=height)
  i_to_x <- function(i) xmin + i / width  * (xmax - xmin)
  j_to_y <- function(j) ymin + j / height * (ymax - ymin)
  x_to_i <- function(x) pmin( width,  pmax( 1, floor( (x-xmin)/(xmax-xmin) * width  ) ) )
  y_to_j <- function(y) pmin( height, pmax( 1, floor( (y-ymin)/(ymax-ymin) * height ) ) )
  i <- col(z)
  j <- row(z)
  x <- i_to_x(i)
  y <- j_to_y(j)
  res <- z
  for(k in 1:iterations) {
    v <- matrix( f(x, y), nc=2 )
    x <- x+.01*v[,1]
    y <- y+.01*v[,2]
    i <- x_to_i(x)
    j <- y_to_j(y)
    res <- res + z[cbind(i,j)]
    if(trace) {
      cat(k, "/", iterations, "\n", sep="")
      dev.hold()
      image(res)
      dev.flush()
    }
  }
  if(trace) {
    dev.hold()
    image(res>quantile(res,.6), col=0:1)
    dev.flush()
  }
  res
}

# Sample data
van_der_Pol <- function(x,y, mu=1) c(y, mu * ( 1 - x^2 ) * y - x )
res <- vector_field(
  van_der_Pol,
  xmin=-3, xmax=3, ymin=-3, ymax=3,
  width=800, height=800,
  iterations=50,
  epsilon=.01
)
image(-res) 
```

![范德波尔吸引子](../Images/915318d32ac31b489f2e6c32343269e9.png)

您可能希望对结果应用一些图像处理以使其更具可读性。

```
image(res > quantile(res,.6), col=0:1) 
```

![阈值化后](../Images/ca62f61a9957032359194bfaf6cfdfaf.png)

在您的情况下，向量场不是由函数描述的：您可以使用最近邻的值或一些二维插值（例如，来自`akima`包）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-18T12:49:51.637

使用`ggplot2`，您可以执行以下操作：

```
library(grid) 
df <- data.frame(x=runif(10),y=runif(10),dx=rnorm(10),dy=rnorm(10))
ggplot(data=df, aes(x=x, y=y)) + geom_segment(aes(xend=x+dx, yend=y+dy), arrow = arrow(length = unit(0.3,"cm"))) 
```

![在此处输入图像描述](../Images/026b70f31e617a38c2b7daa48bffa5f7.png)

这几乎直接取自`geom_segment` [帮助页面](http://docs.ggplot2.org/0.9.3/geom_segment.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-18T13:39:30.070

好的，这是一个基本的解决方案：

```
DF <- data.frame(x=rnorm(10),y=rnorm(10),dx=runif(10),dy=runif(10))
plot(NULL, type = "n", xlim=c(-3,3),ylim=c(-3,3))
arrows(DF[,1], DF[,2], DF[,1] + DF[,3], DF[,2] + DF[,4]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-26T03:04:05.327

这是 pracma-package 的 R-Help 中的一个示例。

```
library(pracma)
f <- function(x, y) x^2 - y^2
xx <- c(-1, 1); yy <- c(-1, 1)
vectorfield(f, xx, yy, scale = 0.1)
for (xs in seq(-1, 1, by = 0.25)) {
    sol <- rk4(f, -1, 1, xs, 100)
    lines(sol$x, sol$y, col="darkgreen")
} 
```

你也可以使用 quiver。

```
library(pracma)
xyRange <- seq(-1*pi,1*pi,0.2)
temp <- meshgrid(xyRange,xyRange)
u <- sin(temp$Y)
v <- cos(temp$X)
plot(range(xyRange),range(xyRange),type="n",xlab=expression(frac(d*Phi,dx)),ylab=expression(d*Phi/dy))
quiver(temp$X,temp$Y,u,v,scale=0.5,length=0.05,angle=1) 
```

# parallel-processing - 调整并行性能

> ID：14936505
> 
> 赞同：0
> 
> 时间：2013-02-18T12:37:50.003
> 
> 标签：parallel-processing, ipython

基本上，我有一个大对象，我想对其执行一些功能，它非常适合并行处理。在这个例子中，我有一个大矩阵，我想计算列向量之间的所有成对内积。

请看下面的[IPython Notebook](http://nbviewer.ipython.org/4976906/)。

我意识到`@interactive`在这种情况下不需要装饰器，我尝试删除`@require`装饰器，但它的影响可以忽略不计。

**我的问题是**：有什么方法可以提高并行机器的性能吗？

我不知道这些`map`方法的实现细节，我可以通过推送与视图中的引擎并行执行的函数来避免开销吗？不过，我无法想象它会随每个参数一起发送。

我自己将参数列表分块并编写一个远程使用的函数似乎也很愚蠢。

我在四核机器上尝试了笔记本，笔记本中的结果是两核机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:58:30.903

这里的主要性能问题是您应用的 fortran-contiguous 优化无法在网络传输中存活，因此`mat`引擎是 C-contiguous，而不是`push`.

你可以看到这个：

```
print mat.flags
%px print mat.flags 
```

添加：

```
%px mat = numpy.asfortranarray(mat) 
```

应该让你的表现恢复（如我的笔记本[调整版所示）。](http://nbviewer.ipython.org/4982349/)

为了诊断这个问题，我尽我所能找出瓶颈所在。对此有用的是`AsyncResult.serial_time`and `AsyncResult.wall_time`。当它很长时，这意味着该任务实际上*在引擎上*`serial_time`花费了很长时间，而不是在 IPython 管道中花费大量时间。这让我认为任务本身在引擎上很慢，所以我在一个引擎上远程完成了任务，它仍然很慢（不涉及并行）。这是一个跟踪问题[的笔记本。](http://nbviewer.ipython.org/4982709)

 *边注：

`@interactive`装饰器仅对*非*交互定义的函数（即模块函数，而不是笔记本中定义的函数）是必需的，因此它在你的笔记本中是多余的。*

# ruby-on-rails - capistrano-unicorn error on deploy - chmod

> ID：14936506
> 
> 赞同：0
> 
> 时间：2013-02-18T12:37:50.820
> 
> 标签：ruby-on-rails, capistrano, setup-deployment, unicorn

I'm just trying to move to the new server with one of my apps, so i'm setting up capistrano with capistrano-unicorn to deploy code.

I've used [gem details](https://github.com/sosedoff/capistrano-unicorn) to set things up.
But i get an error (and a rollback afterwards) which i fail to connect with unicorn or capistrano settings.
the error as follows:

```
* executing "chmod -R -- g+w \\~/www/elmor.org.ua/releases/20130218122242 && rm -rf -- 

\\~/www/elmor.org.ua/releases/20130218122242/public/system && mkdir -p -- \\~/www/elmor.org.ua/releases/20130218122242/public/ && ln -s -- ~/www/elmor.org.ua/shared/system \\~/www/elmor.org.ua/releases/20130218122242/public/system && rm -rf -- \\~/www/elmor.org.ua/releases/20130218122242/log && ln -s -- ~/www/elmor.org.ua/shared/log \\~/www/elmor.org.ua/releases/20130218122242/log && rm -rf -- \\~/www/elmor.org.ua/releases/20130218122242/tmp/pids && mkdir -p -- \\~/www/elmor.org.ua/releases/20130218122242/tmp/ && ln -s -- ~/www/elmor.org.ua/shared/pids \\~/www/elmor.org.ua/releases/20130218122242/tmp/pids"
    servers: ["elmor.org.ua"]
    [elmor.org.ua] executing command
 ** [out :: elmor.org.ua] chmod: ���������� �������� ������ � �~/www/elmor.org.ua/releases/20130218122242�: ��� ������ ����� ��� �������
    command finished in 73ms
*** [deploy:update_code] rolling back 
```

How can i fix this error? Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:49:52.060

这是一个宝石错误，现在它正在修复

# maven - Maven dependencies - how to add dependencies based on classpath properties

> ID：14936507
> 
> 赞同：0
> 
> 时间：2013-02-18T12:37:51.960
> 
> 标签：maven

Is it not possible to include dependencies based on class properties? E.g. if I am building a framework that I want to integrate with any customer system, the type of DB the customer uses could be a variable but my framework may use it if it can acquire a data source. So in this case, my Maven project should be able to integrate with any DB by declaring the corresponding DB war as dependency.

E.g.

```
<dependency>
   <artifactId>${database.artifactId}</artifactId>
   ....
</dependency> 
```

But this `database.artifactId` in itself will be read from properties file that may be accesible to customer code, so the idea of having parent pom declare the versions and artifactId as mentioned [here](https://stackoverflow.com/questions/9912632/maven-reading-a-property-from-an-external-properties-file) may not suit my case.

Is there a work around or is this use case itself so wrong? I strongly think if we build a framework that is more like a product the customer can integrate with, this flexibility of declaring any runtime dependency based on propertie should be there.

Thanks,
Paddy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:50:24.013

这不是使用 Maven 的方式。

如果像您的情况一样，您编写了一个可能使用不同依赖项的框架，那么您就不会以某种方式有条件地依赖于具体的实现。这是行不通的，因为确切的依赖列表是在构建时构建的（即构建和安装框架的 Maven 工件时）。

相反，应该有一个特殊的 Maven 工件，它只描述您需要的功能的接口。该工件通常包含您的框架需要的 (Java) 接口；这是您的框架所依赖的。

然后，在使用您的框架时，必须包含这些接口的具体实现 - 由使用您的框架的人，因为只有他们知道他们使用哪个实现。

例如，“Maven by Example”，[“7.10.1\. Programming to Interface Projects”](http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring-sect-conclusion.html)一章对此进行了解释。

* * *

例子：

*   **JDBC**：接口是 JDK 的一部分，因此使用 JDBC 的框架不需要声明任何特殊的依赖项（如果 JDBC 不是 JDK 的一部分，您将依赖 Maven 工件，如“jdbc-api”或类似的） . 实际使用 JDBC 的软件必须依赖于它实际使用的任何 JDBC 驱动程序（Oracle、HSQL 等）。

# model-view-controller - When using MapKit, are MKAnnotations the model of MVC paradigm?

> ID：14936512
> 
> 赞同：1
> 
> 时间：2013-02-18T12:38:00.950
> 
> 标签：model-view-controller, ios5, mkmapview, mkannotation

When using MapKit, are MKAnnotations the model of MVC paradigm? I mean, let's say I have locations (for instance, cinemas) and those can be shown using a map and a list (table view).
What is the model in this context?
I guess are Ciname instances, but MKMapView requires annotations (MKAnnotation and MKAnnotationView). Using the table I don't have problems, as I can use the model in cellForRow, but using MKMapView requires annotations.

Do I have to copy all cinemas to custom annotations?
I guess that's not normal. What do you think? basically what I don't understand is how to use the model view controller pattern properly in this scenario.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:48:01.710

MkAnnotations 是一个协议，因此您的对象（模型）也必须实现该协议，它可以在没有副本的情况下工作。

所以是的，你的对象我补充说 MkAnnoation 协议是模型，与 MVC 相关。

这个协议是 MkMapKit 为模型中的每个对象都有一个坐标所必需的。

# c - 在 C 中计算 ICMPv6 数据包的校验和

> ID：14936518
> 
> 赞同：1
> 
> 时间：2013-02-18T12:38:18.450
> 
> 标签：c, ipv6, checksum, icmp

我正在尝试计算 ICMPv6 消息的校验和（准确地说，是邻居广告）。

[RFC 4443](https://www.rfc-editor.org/rfc/rfc4443#section-2.3)将其描述为“整个 ICMPv6 消息的反码和的 16 位反码”

还有一些关于如何做到这一点的示例代码（虽然我认为它来自 IPv4，但唯一的区别是总和中包含的内容，而不是如何计算它）： [RFC 1071](http://www.ietf.org/rfc/rfc1071.txt)

我从 Wireshark 拿了一个数据包，并按主机字节顺序输入了短裤。然后我打印正确的校验和，将其归零并计算我的。但它们不匹配。根据 RFC 1071，字节序不应该是问题（结果不仅仅是字节交换，而是完全关闭）。

根据[RFC 2460 #8.1](https://www.rfc-editor.org/rfc/rfc2460#section-8.1)，我需要在计算中包含“伪标头”，仅包含 Src+Dst 地址、长度为 32 位宽字段和下一个标头类型。

调用代码：

```
uint32_t payloadlen = htonl(32);
struct ip6_hdr *ip6;
struct nd_neighbor_advert *na;
size_t len, offset, tmplen;
uint8_t *tmppacket, icmp = 58;

uint8_t packet[] = {
            0x60, 0x00, 0x00, 0x00, 0x00, 0x20, 0x3A, 0xFF, 0x20, 0x01, 0x0D, 0xB8,
            0xDD, 0xDD, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
            0xFE, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x03, 0x54, 0xFF,
            0xFE, 0x00, 0x22, 0x00, 0x88, 0x00, 0x54, 0xB9, 0x60, 0x00, 0x00, 0x00,
            0x20, 0x01, 0x0D, 0xB8, 0xDD, 0xDD, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x01, 0x00, 0x02, 0x01, 0x00, 0x03, 0x54, 0x00, 0x00, 0x13
        };

na->nd_na_hdr.icmp6_cksum = 0;

tmplen = 40+sizeof(struct nd_neighbor_advert)+ICMP_OPT_LEN;
tmppacket = malloc(tmplen);
memset(tmppacket, 0, 40);
offset = sizeof(struct in6_addr);
memcpy(tmppacket, &ip6->ip6_src, offset);
memcpy(tmppacket+offset, &ip6->ip6_dst, offset);
memcpy(tmppacket+offset*2, &payloadlen, 4);
memcpy(tmppacket+39, &icmp, 1);
memcpy(tmppacket+40, packet+sizeof(struct ip6_hdr),
        sizeof(struct nd_neighbor_advert)+ICMP_OPT_LEN);

na = (struct nd_neighbor_advert *) (tmppacket+40);
na->nd_na_hdr.icmp6_cksum = checksum((uint16_t *) tmppacket, tmplen);
printf("Checksum calc: %hX\n", na->nd_na_hdr.icmp6_cksum);

dump((unsigned char *) tmppacket, tmplen); 
```

校验和函数：

```
uint16_t checksum (uint16_t *addr, size_t bytes) {
    unsigned int i;
    uint16_t *p = addr;
    uint32_t sum = 0;

    /* Sum */
    for (i=bytes; i > 1; i -= 2)
        sum += *p++;

    /* If uneven length */
    if (i > 0)
        sum += (uint16_t) *((unsigned char *) (p));

    /* Carry */
    while ((sum & 0xFFFF0000) != 0)
        sum = (sum >> 16) + (sum & 0xFFFF);

    return ~((uint16_t) sum);
} 
```

这只是快速和肮脏的让它开始工作。“main”的代码省略了一些东西。校验和函数中的字节序应该不是问题，而且这个数据包的长度是偶数。

结果应该是 B954，但我得到的是 DB32。转储的输出是：

> 包
> 大小

感谢到目前为止的提示。如果您知道还有什么问题，我会很感激您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:57:52.543

我认为您的代码存在三个问题：

1.  您对 IPv6 标头进行校验和，这是您不应该的。校验和应涵盖 IPv6 地址和长度，但不包括其他标头字段。
2.  如果长度不均匀，字节序很重要。~~在添加额外字符之前，您需要添加`ntohs`它（或者实际上，在 little-endian 平台上，将其右移 8 位）。~~ **编辑：**在 little-endian 平台上忽略它是可以的。大端需要这种转变。
3.  当减少到 16 位时，总和可能会溢出短路。在这种情况下，您需要将此进位反馈到计算中（即加 1）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:11:26.673

试试这个版本的校验和计算函数（它对我有用）

```
uint16_t
checksum (void * buffer, int bytes) {
   uint32_t   total;
   uint16_t * ptr;
   int        words;

   total = 0;
   ptr   = (uint16_t *) buffer;
   words = (bytes + 1) / 2; // +1 & truncation on / handles any odd byte at end

   /*
    *   As we're using a 32 bit int to calculate 16 bit checksum
    *   we can accumulate carries in top half of DWORD and fold them in later
    */
   while (words--) total += *ptr++;

   /*
    *   Fold in any carries
    *   - the addition may cause another carry so we loop
    */
   while (total & 0xffff0000) total = (total >> 16) + (total & 0xffff);

   return (uint16_t) total;
} 
```

然后将其分配给这样的校验和字段

```
yourpkt->checksum = ~(checksum (buff, length)); 
```

# c# - A* how to calculate G cost

> ID：14936523
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:38:25.843
> 
> 标签：c#, algorithm, artificial-intelligence, a-star

I read this article: [http://www.policyalmanac.org/games/aStarTutorial.htm](https://web.archive.org/web/20171022224528/http://www.policyalmanac.org:80/games/aStarTutorial.htm), but i don't understand how is calculated G cost. I know those child's on corner of his parent have bigger score but there is probably another calculation to check distance from current to start node.

Please help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:51:12.570

在文章中，
如果你水平或垂直移动，G=10，如果你
从一个正方形到另一个正方形对角线移动，G=14。

因此，如果您从起始格**G = 0+10**
水平移动，最初 G 为 0。然后从那里垂直或水平移动意味着**G=10+10**
，如果对角线表示**G=10+14**

# asp.net-mvc - Dynamic Form in ASP.NET MVC3 Razor

> ID：14936529
> 
> 赞同：0
> 
> 时间：2013-02-18T12:38:38.807
> 
> 标签：asp.net-mvc, razor

I have a small problem. I want to have dropdown list with some objects. After clicking on one I want to add it to list with textfield for naming it. I don't want to limit quantity of this fields. I want to receive in controller ID (stored in dropdown list) and name (given by user) for each selected item. How can I do it? I was thinking about storing it in some fields as a text, and parsing in cotroller but I think it's not elegant.

EDIT. Ok, Thansk for your help, but it's not working for me correctly. I generate html like this:

```
<input type="hidden" value="96" name="Inputs[0].Key">
<input type="text" name="Inputs[0].Value"> 
```

In my controller I'm receiving this dictionary. The problem is that quantity of elements is correct, but all values are null. What is wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:46:15.937

在模型上使用`IEnumerable<KeyPairValue<string,string>> MySelectedItem = new List<KeyPairValue<string,string>>();`，并将其添加到列表中时，将其命名为数组：

```
MySelectedItem[1].Key, MySelectedItem[1].Value, MySelectedItem[2].Key... 
```

（我还没有测试过，但它应该可以工作）

编辑：查看这篇博客文章，更好地解释如何做到这一点： http: [//haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:48:28.107

解决此问题的最佳方法是使用数组样式的模型绑定。

因此，对于您希望命名的每个元素，您创建一个隐藏字段来存储下拉值以及一个文本字段来存储用户给定的名称。您将它们命名如下：

```
<input type="hidden" name="element[0].Key" /><input type="text" name="name[0].Value" /> 
```

每次增加索引值。这可以通过一点 JavaScript 轻松实现。然后，您创建一个以 a`KeyValuePair<string, string>[]`作为参数的操作方法。然后，您将能够通过循环或 LINQ 表达式毫无问题地解析您的值。

# java - HQL order by type()

> ID：14936530
> 
> 赞同：0
> 
> 时间：2013-02-18T12:38:42.877
> 
> 标签：java, hibernate, hql

For example, I have a base entity called 'MyEntityParent' and two sub types 'ZChild' and 'AChild'.

When using the following HQL, this will sort the result list by the type's internal integer value (same as the special class property):

```
select e from MyEntityParent e
order by type(e) 
```

However, I need to sort the result list by their entity type's name. I.e., first, instances of type 'AChild', then, instances of type 'ZChild'.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:08:06.070

尝试

```
select e from MyEntityParent e order by e.class 
```

从休眠 3.6 文档：

> 在多态持久性的情况下，特殊属性类访问实例的鉴别器值。嵌入在 where 子句中的 Java 类名将被转换为它的鉴别器值。

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-where](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-where)

但这在 Hibernate 4.1 中已被弃用

如果我正确阅读文档，这也不完全是您的愿望，因为它返回鉴别器值，而不是确切的类型名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:55:50.707

没有直接的解决方案，因为 HQL 被转换为 SQL 并且数据库不知道值如何映射到类的名称。有办法做到这一点，但它并不好：

*   查询变得复杂，因为我们必须在查询中定义顺序。
*   选择列表包含定义顺序的附加值，因此我们无法返回实体列表。
*   当模型更改时，应修改查询

查询是：

```
SELECT e,
  CASE TYPE(e) WHEN AChild THEN 1
               WHEN ZChild THEN 2
               ELSE 3 
  END AS orderValue
FROM MyEntityParent e ORDER BY orderValue 
```

如前所述，结果不再是实体列表，而是对象数组列表，因此访问实体更加困难。实体本身是数组中的第一项（索引 0），第二项是 ordedValue：

```
 List<Object[]> result = em.createQuery("JPQL given above").getResultList();
 for (Object[] resultRow : result) {
     MyEntityParent myEntityParent = (MyEntityParent) resultRow[0];
 } 
```

解决方案是有效的 JPQL，因此它不是特定于 Hibernate，但也适用于其他 JPA 提供程序。

# classloader - Java 7：使用 URLClassLoader 不再工作

> ID：14936537
> 
> 赞同：1
> 
> 时间：2013-02-18T12:39:08.333
> 
> 标签：classloader, java-7, self-contained

我的问题是，我在 Java6 上工作的代码不再工作了。由于我的应用程序需要在运行时加载 jar（插件），所以我编写了一个从 URLClassLoader 派生的简单类，如下所示

```
public class MyClassLoader extends java.net.URLClassLoader {

/** Creates a new instance of URLClassLoader */
public MyClassLoader(java.net.URL url) 
{
    super(new java.net.URL[]{url},ClassLoader.getSystemClassLoader());
}

public void addURL(java.net.URL url)
{
    super.addURL(url);
}} 
```

因此，如果我想加载一个 jar，我只需调用 addURL(pathToJar) 并通过加载该类

```
Class.forName(myClass, true, myClassLoader) 
```

这就像在 Java6 上运行的魅力。现在我决定在 Java7 中制作一个自包含的 Java 应用程序。当我启动应用程序时，jar 也会在运行时加载，但如果里面有一个类派生自类路径内的类（不在插件 jar 中），我会得到一个 ClassCastException。

所以我猜Java7发生了一些变化。目前我在 OSX 上使用 Java7_u13。任何人都可以给我一个提示我应该做什么，以恢复旧的行为吗？搜索网络并没有给我任何帮助。

提前谢谢了。

问候，-克里斯-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:01:28.413

同时，我找到了解决问题的方法。我只是将“错误”的类加载器用作父级。如果我更换，现在一切正常

```
super(new java.net.URL[]{url},ClassLoader.getSystemClassLoader()); 
```

和

```
super(new java.net.URL[]{url},MyClassLoader.class.getClassLoader()); 
```

问候，-克里斯-

# firefox - Google 使用 Selenium IDE 测试自动完成

> ID：14936538
> 
> 赞同：1
> 
> 时间：2013-02-18T12:39:12.950
> 
> 标签：firefox, selenium, autocomplete, selenium-ide, google-places-api

我正在尝试在 Selenium IDE（来自 Firefox 插件）中测试自动完成位置（来自谷歌位置）。我需要输入地名并获取第一个位置。

地点“Rzeszów, Polska”的序列：i.stack.imgur.com/gqRMd.png

首先，我尝试了 mouseOver 和 Click 动作 - 元素存在但没有点击自动完成。接下来，我尝试了另外两个序列（使用 clickAt 和 KeyDown），但也没有单击，尽管 Selenium 可以找到正确的定位器。i.stack.imgur.com/F13q7.png

我正在尝试我的 jQuery 自动完成解决方案 -> jqueryui.com/autocomplete/，它在那里运行良好。

我认为，问题与html结构有关，地名加粗：i.stack.imgur.com/BfLyE.png

**您可以在以下位置对其进行测试：jsfiddle.net/dodger/pbbhH/

我在 Selenium IDE 中的序列（如上所示）不适用于 google 地方，有人可以通过自动完成解决这个问题吗？**

//主持人：请添加照片并创建指向我帖子的链接并删除此行。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T14:42:11.637

要强制显示位置自动完成列表，我必须将单个 keydown 和 keyup 事件发送到输入字段。像这样：

```
 selenium.focus(LOCATOR);
    selenium.type(LOCATOR, ""); // clear the field
    for (int i=0; i<value.length(); i++) {
        String c = String.valueOf(value.charAt(i));
        selenium.keyDown(LOCATOR, c.toUpperCase());
        selenium.keyPress(LOCATOR, c);
        selenium.keyUp(LOCATOR, c.toUpperCase());
    } 
```

最后，为了选择列表中的一个条目，我通过模拟键盘事件让它工作（因为我也没有鼠标事件的运气）。

1.  keyDown 使用向下箭头键：`selenium.keyDown(LOCATOR, "\u0028");`
2.  在输入字段上模糊（我认为是可选的）：`selenium.fireEvent(LOCATOR, "blur");`

`LOCATOR`是输入字段的定位器。`\u0028`是向下箭头的键码（十六进制 28 或 dec 40）

希望这可以帮助。

# c++ - std::function 的工作原理

> ID：14936539
> 
> 赞同：71
> 
> 时间：2013-02-18T12:39:13.733
> 
> 标签：c++, c++11

你知道，我们可以将 lambda 函数包装或存储到 a 中`std::function`：

```
#include <iostream>
#include <functional>
int main()
{
    std::function<float (float, float)> add = [](float a, float b)
    //            ^^^^^^^^^^^^^^^^^^^^
    {
        return a + b;
    };

    std::cout << add(1, 2) << std::endl;
} 
```

我的问题是`std::function`，您可以看到它是一个模板类，但它可以接受任何类型的**函数签名**。

例如`float (float, float)`这种形式`return_value (first_arg, second_arg)`。

它的结构是什么`std::function`，它如何接受一个函数签名`x(y,z)`，以及它如何与它一起工作？在 C++ 中是`float (float, float)`一个新的有效表达式吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-18T12:56:31.250

它使用某种[类型的擦除技术](https://stackoverflow.com/questions/5450159/type-erasure-techniques)。

一种可能性是将混合子类型多态性与模板一起使用。这是一个简化版本，只是为了给大家一个整体结构的感觉：

```
template <typename T>
struct function;

template <typename Result, typename... Args>
struct function<Result(Args...)> {
private:
    // this is the bit that will erase the actual type
    struct concept {
        virtual Result operator()(Args...) const = 0;
    };

    // this template provides us derived classes from `concept`
    // that can store and invoke op() for any type
    template <typename T>
    struct model : concept {
        template <typename U>
        model(U&& u) : t(std::forward<U>(u)) {}

        Result operator()(Args... a) const override {
            t(std::forward<Args>(a)...);
        }

        T t;
    };

    // this is the actual storage
    // note how the `model<?>` type is not used here    
    std::unique_ptr<concept> fn;

public:
    // construct a `model<T>`, but store it as a pointer to `concept`
    // this is where the erasure "happens"
    template <typename T,
        typename=typename std::enable_if<
            std::is_convertible<
                decltype( t(std::declval<Args>()...) ),
                Result
            >::value
        >::type>
    function(T&& t)
    : fn(new model<typename std::decay<T>::type>(std::forward<T>(t))) {}

    // do the virtual call    
    Result operator()(Args... args) const {
        return (*fn)(std::forward<Args>(args)...);
    }
}; 
```

（请注意，为了简单起见，我忽略了几件事：无法复制，可能还有其他问题；请勿在实际代码中使用此代码）

# tomcat - tomcat7 主机管理器未将新域添加为主机-“无法创建 AppBase”

> ID：14936541
> 
> 赞同：1
> 
> 时间：2013-02-18T12:39:15.327
> 
> 标签：tomcat, tomcat7

我已经在我的 Ubuntu 12.04 x64 VPS 中安装了 Tomcat7。

现在我正在尝试通过 HostManager 添加一个新域。

然而，这是我得到的错误——

```
 FAIL - Failed to create appBase [/var/lib/tomcat7/domain.com] for host [domain.com] 
```

我什至创建了一个自定义文件夹——> 将其权限设置为 777，然后将该文件夹作为新域的应用程序基本路径（在主机管理器中）——但即使如此，我也收到与上述相同的错误消息。

我在这里做错了什么？如何在 Tomcat7 主机管理器中正确添加新域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:46:20.007

我将 tomcat6（它允许我在 HostManager 中添加虚拟主机而没有任何问题）更新到 tomcat7 并且遇到了同样的问题。

FAIL - 无法为主机 [xxx] 创建 appBase [/var/lib/tomcat7/xxx]

通过创建目录（/var/lib/tomcat7/xxx）并将所有权和组更改为 tomcat7，它可以工作，我可以设置虚拟主机 xxx。经过几年的缺席，我才重新回到tomcat，所以不想给出完整的答案。tomcat6 和 tomcat7 之间的差异可能在于配置文件希望存储数据的位置。原来的自动 ubuntu 12.04 安装解决了这个问题，但现在必须弄清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T09:47:02.173

将 777 权限设置为 tomcat 文件夹（例如）

```
chmod 777 /var/lib/tomcat8/ 
```

# jquery - jquery使用id切换按钮的图片

> ID：14936543
> 
> 赞同：0
> 
> 时间：2013-02-18T12:39:24.657
> 
> 标签：jquery, css

我有一个 jquery 函数。单击 div class='open'，它将打开另一个会话，按钮将更改图像。我为css切换id

但是，当我再次单击它时，我需要将按钮的图像改回来。

```
 <script type="text/javascript">
        $(document).ready(function(){
                $(".content").hide();       
                $(".open1").click(function(){
                    $(this).next().slideToggle(400);
                                $('#btn_01').attr('id','btn_01_on');
                });
        });

</script>

<style>
#btn_01{width:510px; height:109px; background:url('images/btn_01_on.png') no-repeat;}
    #btn_01:hover{width:510px; height:109px; background:url('images/btn_01_over.png') no-repeat;}
    #btn_01_on{width:510px; height:109px; background:url('images/btn_01_over.png') no-repeat;}
</style) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:59:23.697

切换ID当然不是最好的主意...您应该使用一个`on`类来修改显示。

```
<script type="text/javascript">
    $(document).ready(function(){
            $(".content").hide();       
            $(".open1").click(function(){
                $(this).next().slideToggle(400);
                var btn = $('#btn_01'), isOn = btn.hasClass('on');
                if(isOn) btn.removeClass('on') else btn.addClass('on');
            });
    });

</script>

<style>

    #btn_01{width:510px; height:109px; background:url('images/btn_01_on.png') no-repeat;}
    #btn_01:hover{width:510px; height:109px; background:url('images/btn_01_over.png') no-repeat;}
    #btn_01.on{width:510px; height:109px; background:url('images/btn_01_over.png') no-repeat;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:43:13.063

尝试这个 ：

```
$(document).ready(function () {
$(".content").hide();
$(".open1").click(function () {
    $(this).next().slideToggle(400);
    if ($(this).attr('id') == "btn_01") {
        $('#btn_01').attr('id', 'btn_01_on');
    } else {
        $('#btn_01_on').attr('id', 'btn_01');
    }
}
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:42:27.520

尝试以下脚本片段：

```
 var prevId = "btn_01";
   var nextId = "btn_01_on";
   $(document).ready(function(){
        $(".content").hide();       
        $(".open1").click(function(){
            $(this).next().slideToggle(400);
            $(this).attr('id',function(index, id){
           return id==prevId?nextId:prevId;
        });
     });
  }); 
```

现在，每当您需要返回之前的 id 时，您都可以使用 prevId 变量。这样，您的旧图像将开始显示。

# jquery - 使用 jquery-tokeninput 时字段内容为空

> ID：14936544
> 
> 赞同：0
> 
> 时间：2013-02-18T12:39:29.323
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-tokeninput, mongoid3

我创建了一个表单，用户可以在其中创建配置文件并使用 jquery tokenInput 从自动完成令牌字段中选择关键字。问题是我在文本字段上调用 ​​.tokenInput() 后，提交表单时不会发送其中的文本。我正在使用 mongodb。这是我的个人资料课程：

```
class Profile
  include Mongoid::Document
  include Mongoid::Timestamps

  field :status, type: String
  field :displayname, type: String
  field :city, type: String
  field :country, type: String
  field "_id", type: String, default: ->{ displayname.to_s.parameterize}

  attr_accessible :user_tags, :displayname, :city, :country, :tagg_tokens

  attr_reader :tagg_tokens

  belongs_to :user

end 
```

我的咖啡脚本文件：

$("#profile_tagg_tokens").tokenInput '/taggs.json' 主题：'facebook'

我的表格：

```
=f.text_field :tagg_tokens 
```

其他人以前有这个问题吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:27:18.447

默认情况下，令牌仅生成一个简单的 html，因此令牌的任何部分都不会随表单一起发送。我建议您考虑使用其中一个回调来添加隐藏输入

```
onAdd: function (item) { $('form').append('<input type="hidden" value=' + item.id + '>' } 
```

我还没有测试过那个，但你应该明白了。您还可以使用另一个名为 tokenFormatter 的选项（也未测试）

```
tokenFormatter: function(item){ return '<li><p>' + item.propertyToSearch + '</p><input type="hidden" value=' + item.id + '></li>' } 
```

# scala - 如何从 Scala 程序将设计文档/视图保存在 CouchDB 数据库中？

> ID：14936553
> 
> 赞同：1
> 
> 时间：2013-02-18T12:39:51.863
> 
> 标签：scala, couchdb

我编写了一个 scala 程序来创建新数据库，并向其中添加文档/视图。

```
object CouchDBTest extends App {

  val dbSession = new Session("localhost", 5984)
  val db = dbSession.createDatabase("couchschooltest")

  val newC1 = new Document
  newC1.put("Type", "Class")
  newC1.put("ClassId", "C1")
  newC1.put("ClassName", "C-2A")
  newC1.put("ClassTeacher", "T1")
  newC1.accumulate("Students", "S1");
  newC1.accumulate("Students", "S2");
  newC1.accumulate("Students", "S3");
  db.saveDocument(newC1)

  val viewDocClass = new Document
  viewDocClass.addView("Class", "function(doc) {if(doc.Type == 'Class') { emit([doc.ClassId, doc.ClassName, doc.ClassTeacher, doc.Students], doc);}}")
  db.saveDocument(viewDocClass)
} 
```

当我运行此代码时，它会在 CouchDB 中创建新数据库并将类文档添加到此数据库中。但是，它不会将视图添加到数据库中。它在将 viewDocClass 添加为时给出了运行时错误

> 添加文档时出错 - null null

为此，我使用[了 couchdb4j API](https://github.com/mbreese/couchdb4j/)

# javascript - 这个 jQuery 代码示例中的 App.hiddenDivs 是什么？

> ID：14936554
> 
> 赞同：-4
> 
> 时间：2013-02-18T12:39:53.747
> 
> 标签：javascript, jquery, performance

**[我在这里](http://www.tech2grab.com/2012/10/download-jquery-performance-tips-cheat.html)**学习了一些与性能相关的 JQuery 技巧

![在此处输入图像描述](../Images/cc470a798591f6f5513d661f68d87a1b.png)

你能说出 App.hiddenDivs 的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:41:44.127

`App`将是一个对象，并且`hiddenDivs`将是它的属性；

通过设置`$('div.hidden')`它，它允许您重新使用结果（包含所有`div.hidden`元素的 jQuery 对象），而不是每次都为它查询 DOM。这将导致微小的速度提高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:43:09.103

一般来说，`App.hiddenDivs`与jQuery完全无关。在这段代码中，它恰好是存储 jQuery 集合的地方。

`App`是某种 JavaScript 对象（我们不知道给定上下文的真正对象是什么，这并不重要——它只是一些虚构的对象，它是该示例*可以*存在的一些虚构代码的一部分）。它可能很简单：

```
var App = {}; 
```

`hiddenDivs`是该对象的一个​​属性，它被定义为保存 jQuery 代码的返回值，`$('div.hidden')`.

该返回值是一个 jQuery 集合，其中包含`DIV`DOM 中的所有 s，其类为`hidden`. `DIV`然后可以针对该属性运行对此类 s 的进一步操作，而不是在 DOM 中重新查找它们。

您链接到的页面虽然可能包含一些有价值的建议，但写得不好。作者应该提供更多关于他所写内容的背景信息，并且应该解释他的读者应该具备的预期知识水平。此外，他应该提供代码示例，这些示例随着解释的进展而相互建立，以便为更基础的读者提供一些连续性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T12:49:24.533

这`App`是一个javascript对象。您可以创建一个 javascript 对象，例如：

```
var App = new Object(); 
```

并将`App`对象成员设置为：

```
App.hiddenDivs = $('div.hidden'); 
```

然后您可以访问应用程序中的对象，例如：

```
App.hiddenDivs.find('span'); 
```

这就像缓存 jQuery 对象，但在应用程序级别。

# c# - 克隆一个类

> ID：14936556
> 
> 赞同：0
> 
> 时间：2013-02-18T12:40:00.650
> 
> 标签：c#

我有两个包含相同字段的类，但是一个从其他地方继承了一些属性，而另一个没有。

我已经使用“ZEUS_ResearchStocksHistory”类创建了一个通用列表，但是我需要将所有字段克隆到另一个列表“ZEUS_ResearchStocksHistoryWithExcel”。我不想遍历一个列表中的每个字段并填充另一个，或者编写某种 linq join，必须有更快的方法吗？

我不能在两个实例中使用同一个类的原因是，当继承 ExcelReport 函数时，它添加了我在数据网格中显示此列表时不需要的其他字段。

```
internal class ZEUS_ResearchStocksHistory
{
 public String Amendment { get; set; }
 public String AmendedBy { get; set; }
 public String Sedol { get; set; }
 public String Date { get; set; }
}

internal class ZEUS_ResearchStocksHistoryWithExcel : ExcelReport
{
 public String Amendment { get; set; }
 public String AmendedBy { get; set; }
 public String Sedol { get; set; }
 public String Date { get; set; }
} 
```

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:43:14.203

你看过[automapper](http://automapper.org/)吗？

[来自 codeproject 的示例](http://www.codeproject.com/Articles/61629/AutoMapper)：

```
CustomerViewItem customerViewItem = 
   Mapper.Map<Customer, CustomerViewItem>(customer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:43:09.127

查看[Automapper](http://automapper.codeplex.com/)，它就是专门为此而设计的。Automapper 在 NuGet 上运行。

[http://lostechies.com/jimmybogard/2009/01/23/automapper-the-object-object-mapper/](http://lostechies.com/jimmybogard/2009/01/23/automapper-the-object-object-mapper/)

你可以做一些简单的事情：

```
Mapper.CreateMap<ZEUS_ResearchStocksHistory, ZEUS_ResearchStocksHistoryWithExcel>();
var newObject = Mapper.Map<ZEUS_ResearchStocksHistory, ZEUS_ResearchStocksHistoryWithExcel>(oldObject); 
```

或者，既然你说你有一个清单，你可以这样做：

```
var newList = oldList.Select(x => Mapper.Map<ZEUS_ResearchStocksHistory, ZEUS_ResearchStocksHistoryWithExcel>(x)); 
```

# c# - .Net 基类库是用哪种语言编写的

> ID：14936558
> 
> 赞同：3
> 
> 时间：2013-02-18T12:40:12.520
> 
> 标签：c#, .net

当我们说所有 c# 库主要建立在 .Net 类库上时，是用哪些语言编写的类库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:59:37.973

您可以通过获取[Reference Source](http://referencesource.microsoft.com/netframework.aspx)轻松看到这一点，它包含大量 .NET Framework 的原始源代码，包括注释。您会看到所有的基类都是用 C# 编写的。

还有一些 C++/CLI，尽管它不在参考源中。从它在程序集中留下的工件中可以看出，尤其是内部`<Module>`类。例如，存在于 mscorlib、System.Data 和 PresentationCore 中的那种与本机代码互操作的程序集。

CLR、C# 编译器和即时编译器的源代码也可从[SSCLI20 发行版](http://www.microsoft.com/en-us/download/details.aspx?id=4917)中获得。它已过时，仅适用于 .NET 2.0 版本。它们是用 C++ 编写的，这是针对特定于处理器的非常低级函数的一小部分汇编。

# mpi - MPI 发送 recv 混淆

> ID：14936559
> 
> 赞同：0
> 
> 时间：2013-02-18T12:40:13.997
> 
> 标签：mpi

我附上了我正在尝试编写的 MPI 程序的示例。当我使用“mpirun -np 4 a.out”运行这个程序时，我的输出是：

```
 Sender:            1
 Data received from            1
 Sender:            2
 Data received from            1
 Sender:            2 
```

运行挂在那里。我不明白为什么发送者变量在 MPI_recv 之后会改变它的值？有任何想法吗？

谢谢你，普拉迪普

` 程序 mpi_test

```
 include  'mpif.h'

!----------------( Initialize variables )-------------------- 
  integer, dimension(3) :: recv, send

  integer :: sender, np, rank, ierror

  call  mpi_init( ierror )
  call  mpi_comm_rank( mpi_comm_world, rank, ierror )
  call  mpi_comm_size( mpi_comm_world, np, ierror )

!----------------( Main program )-------------------- 

!     receive the data from the other processors
  if (rank.eq.0) then
     do sender = 1, np-1
        print *, "Sender: ", sender
        call mpi_recv(recv, 3, mpi_int, sender, 1,
 &       mpi_comm_world, status, ierror)
        print *, "Data received from ",sender
     end do
  end if

!   send the data to the main processor
  if (rank.ne.0) then
     send(1) = 3
     send(2) = 4
     send(3) = 4
     call mpi_send(send, 3, mpi_int, 0, 1, mpi_comm_world, ierr)
  end if

!----------------( clean up )-------------------- 
  call mpi_finalize(ierror)

  return
  end program mpi_test` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:35:50.193

这是典型的堆栈粉碎场景。您尚未声明该`status`变量，因此编译器会自动`REAL`为您创建一个变量。但`status`应该是一个元素`INTEGER`数组：`MPI_STATUS_SIZE`

```
integer, dimension(MPI_STATUS_SIZE) :: status 
```

在您的情况下发生的情况是，`status`它太小而无法保存真正的 MPI 状态对象，因此其他一些堆栈变量会被覆盖。只需声明`status`应该声明即可解决问题。

另一件事 - 现代 Fortran 支持该`IMPLICIT NONE`语句，该语句禁用未声明变量的自动声明。如果您`implicit none`紧跟在`include`语句之后，编译器会生成一条错误消息。

# android - Android如何检查互联网连接？

> ID：14936562
> 
> 赞同：0
> 
> 时间：2013-02-18T12:40:20.487
> 
> 标签：android

我对 Android 如何检查互联网连接感兴趣。例如，在我们公司的 wifi 中，wlan-symbol 变为灰色，即使有 http/https/dns 等可用的连接。在家（对防火墙没有限制）它变为蓝色。

哪些检查是在后台进行的？有人详细了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:42:15.983

```
public final boolean isInternetOn() {

    ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED ||
            connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING ||
            connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING ||
            connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED ) 
    {
        return true;
    } else if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  
            connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED  ) 
    {

        return false;
    }
    return false;
}//end of the Internet Connection Checking 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:42:20.617

```
private boolean isNetworkConnected() {
   ConnectivityManager cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
     NetworkInfo ni = cm.getActiveNetworkInfo();
  if (ni == null) {
  // There are no active networks. 
```

返回假；} 否则返回真；}

```
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-06T13:42:35.157

您可以使用此功能检查应用程序中的网络：

```
 public boolean isConnectToInternet() {
        ConnectivityManager connectivity = (ConnectivityManager) 
        getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity != null) {
          NetworkInfo[] info = connectivity.getAllNetworkInfo();
          if (info != null)
            for (int i = 0; i < info.length; i++)
              if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                return true;
              }
        }
        return false;
      } 
```

您必须在 manifest.xml 中添加此权限：

```
 <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

# linux - 这个 shell 脚本有什么作用？什么是headingcopy和linecopy？变量？

> ID：14936569
> 
> 赞同：0
> 
> 时间：2013-02-18T12:40:47.037
> 
> 标签：linux, bash, shell

有人可以帮我理解这里发生的事情，以标题复制、行复制和 sed 开头的行，不完全理解这些标题复制或行复制的含义，因为我不认识这些命令，如果它们是变量，它们在哪里用过的？...

```
GetReportParams|grep -iv conn|grep -v "^$"|while read DB_SCHEMA REP_IDX ORG_SHORT_NAME SQL_SCRIPT OUTPUT_FILE_NAME REPORT_NAME REPORT_TYPE OUT_FILE_EXT ORG_NAME MAIN_EMAIL BCC_EMAIL REPORT_GROUP PARAMETERS
do
  echo ======================================================================================
  export DATE=`date +%Y%m%d -d "1 day ago"`
  export OUTPUT_FILE_NAME="${OUTPUT_FILE_NAME}_$DATE.${OUT_FILE_EXT}"
  export OUTDIR=$OUTDIR_main/${ORG_SHORT_NAME}/${YEAR_MONTH}
  export SCPDIR=/$ORG_NAME/data_extracts/
  TMP_FILE_NAME="TMP_RUN_REPORT.txt" 
  echo Running report for -- $PARAMETERS
  # Remove text qualifier character
  PARAMETERSSEARCH=`echo $PARAMETERS | tr -d \'`
  HeadingCopy=`head -1 $OUTDIR_main/$MAIN_FILE_NAME | tee -a ${OUTDIR_main}/${TMP_FILE_NAME} `
  LineCopy=`grep ^"$PARAMETERSSEARCH" $OUTDIR_main/$MAIN_FILE_NAME | tee -a ${OUTDIR_main}/${TMP_FILE_NAME} ` 
  sed 's/[ \t]*$//' ${OUTDIR_main}/${TMP_FILE_NAME} > ${OUTDIR}/${OUTPUT_FILE_NAME}
  sed -i 's/[^,]*,//' ${OUTDIR}/${OUTPUT_FILE_NAME}
  #cat ${OUTDIR}/${OUTPUT_FILE_NAME}
  rm ${OUTDIR_main}/${TMP_FILE_NAME}

  rsync -a ${OUTDIR}/${OUTPUT_FILE_NAME} oracle@grnwebreports2:$SCPDIR
done 
```

谢谢！狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:50:07.190

```
HeadingCopy=`head -1 $OUTDIR_main/$MAIN_FILE_NAME | tee -a ${OUTDIR_main}/${TMP_FILE_NAME} ` 
```

将文件 $OUTDIR_main/$MAIN_FILE_NAME 的第一行复制到变量 HeadingCopy 并将输出重定向（附加）到文件 ${OUTDIR_main}/${TMP_FILE_NAME}

```
 LineCopy=`grep ^"$PARAMETERSSEARCH" $OUTDIR_main/$MAIN_FILE_NAME | tee -a ${OUTDIR_main}/${TMP_FILE_NAME} ` 
```

复制以变量 PARAMETERSSEARCH 中存在的字符串开头的行，并将输出重定向（附加）到文件 ${OUTDIR_main}/${TMP_FILE_NAME}

第二个 sed 将替换文件中从第一个字符开始的每一行数据，直到遇到“，”

# sqlite - SQLite 触发器到 SQL Server Express 2008

> ID：14936571
> 
> 赞同：0
> 
> 时间：2013-02-18T12:40:51.357
> 
> 标签：sqlite, triggers, sql-server-2008-express

**我需要有关 SQL Server 语法的帮助来创建一些我在 SQLite 上成功使用过的触发器，但是一旦NEW.Table**不是 SQL Server 的一部分，我就会遇到麻烦。

那是我的 SQLite 触发代码：

```
UPDATE EngineeringItems set ElevacaoFIT = CAST(round((select "Position Z" - MatchingPipeOD / 2 from EngineeringItems where PnPId = new.PNPID), 0) as INT) where PNPID = new.PNPID; 
```

**PNPID**是表pk！

***编辑2：***

再次感谢朋友！我已经尝试了您的新代码并稍作修改，SQL Server 接受了它并成功创建了触发器。所以代码是：

```
CREATE TRIGGER [ElevacaoFIT_Insert]
   ON  [dbo].[EngineeringItems]
   AFTER INSERT
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    UPDATE EngineeringItems
SET
    ElevacaoFIT = CAST(ROUND((select EngineeringItems."Position Z" - (EngineeringItems.MatchingPipeOD / 2)
FROM
    EngineeringItems INNER JOIN inserted ON EngineeringItems.PnPId = inserted.PnPId), 0) AS INT);
END 
```

但现在我收到这条消息：**子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。**！任何想法？

抱歉打扰您了……再次感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:06:09.047

您可以发布您在 SQL Server 上尝试过的内容吗？

像下面这样的东西可能会这样做：

```
CREATE TRIGGER [dbo].[EngineeringItems_Trigger] 
   ON  [dbo].[EngineeringItems]
   AFTER INSERT
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

   UPDATE EngineeringItems
   SET
     ElevacaoFIT = CAST(round(("Position Z" - MatchingPipeOD / 2), 0) as INT)
   FROM
     EngineeringItems INNER JOIN inserted ON EngineeringItems.PnPId = inserted.PNPID;
END 
```

# java - 当另一个构建器生成 java 输入时，如何停止 SCons 重建所有 .class 文件？

> ID：14936572
> 
> 赞同：1
> 
> 时间：2013-02-18T12:40:55.260
> 
> 标签：java, scons

作为相当复杂的跨平台构建的一部分，我调用了 SCons Java 构建器。.java 文件 **是从模板自动生成的*。它们包含包信息：`package com.example.package;`并在目录中相应地布局。`src/com/example/package/MyClass.java`

征兵：

```
# javaSources is the absolute path to each java file i.e src/com/example/package/MyClass.java
# outputClassesPath is classes/
JavaArtifacts = env.Java(target = outputClassesPath, source = javaSources) 
```

对 scons 的第一次调用正确构建了 MyClass.java 并将输出放入`classes/com/example/package/MyClass.class`

如果我再次调用 scons - 没有任何变化 - javac 命令将再次运行。使用`scons --debug=explain`我得到：

```
scons: building 'classes/MyClass.class' because it doesn't exist 
```

这是真的——但`classes/com/example/package/MyClass.class`确实存在！

对我来说，这看起来像是 SCons 中的一个错误。似乎 SCons 在正确的位置正确地创建了 .class 文件，但它的第一遍似乎并不知道这个正确的位置在哪里。

**更新**：Java 文件由模板引擎（使用`env.Command`模式调用）创建。模板引擎返回的工件测试 True for `.is_derived()`. 这看起来像是导致 java 发射器忽略了包目录结构，但我想不出为什么。也许我需要为模板创建一个完整的构建器，停止使用`Command`，并覆盖默认的`.is_derived()`. 否则我可以创建一个新的 Java 构建器（基于提供的构建器），而无需对发射器进行此检查。

# css - CSS webkit图像掩码不起作用

> ID：14936574
> 
> 赞同：2
> 
> 时间：2013-02-18T12:40:55.650
> 
> 标签：css, webkit, typography

我正在尝试遵循一些有关应用蒙版的教程，但是每当我将任何内容应用于我的 h1 时，所有文本都会完全消失。我试过使用图像蒙版和渐变，同样的事情发生了。

```
<h1 id="site-name">
    <a href="/" title="Home"><span>The Biospheric Project</span></a>
</h1> 
```

使用渐变的 CSS

```
h1 { 
    -webkit-mask-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgba(0,0,0,1)),
    to(rgba(0,0,0,.2)));
    text-shadow: 0px 0px 30px rgba(30, 28, 28, 0.6);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-01-08T05:29:29.210

问题是使用`file://`而不是访问您的页面`https://`

`file://`如果您使用该协议访问您的 HTML 文件，Firefox 和 Chrome（可能还有其他）在尝试应用掩码时会静默失败。相反，您将看到整个 CSS 元素被完全屏蔽掉（即它消失了，但它仍然占据屏幕上的空间）。要修复它，您需要通过`localhost://`（例如，使用本地 Apache 服务器）打开您的页面，或者上传到您的远程服务器并从那里进行测试。

这是相对烦人的，因为浏览器可以使用该`file://`协议在本地加载图像没有问题。关于[Mozilla bugzilla](https://bugzilla.mozilla.org/show_bug.cgi?id=1565509)的讨论表明新功能（例如`mask-image`）受 CORS 保护，但现有功能（例如`<img src`）不受保护，但没有真正的押韵或理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:55:46.323

您的解决方案似乎按原样工作。

```
h1 { 
    -webkit-mask-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(rgba(0,0,0,1)),
    to(rgba(0,0,0,.2)));
    text-shadow: 0px 0px 30px rgba(30, 28, 28, 0.6);
} 
```

看到这个小提琴：

[http://jsfiddle.net/2crma/](http://jsfiddle.net/2crma/)

当然它只能在 webkit 浏览器上运行。

# json - 在 Nancy FX 的 json 响应中省略空值

> ID：14936575
> 
> 赞同：3
> 
> 时间：2013-02-18T12:40:56.400
> 
> 标签：json, nancy

我正在尝试在 C# 环境中使用 Nancy FX 创建 REST 服务。我可以轻松地做一个 Response.AsJson 并且一切看起来都不错。但我希望响应省略任何为空的属性。

我还没有弄清楚如何做到这一点。

有人可以指向我的帮助文档或某处的博客文章，它解释了如何执行此操作。

谢谢，JP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T11:50:16.803

我会创建一个动态匿名类型并返回它。所以假设你有一个`User`这样的对象：

```
public class User 
{
   public string Id { get; set; }
   public string FirstName { get; set; }
   public string LastName { get; set; }
} 
```

您想将这种类型的实例作为 JSON 响应传回，因此您将拥有如下代码：

```
Get["/user/{userid}"] = parameters =>
{
    var user = UserService.GetById(Db, (string)parameters.userid);
    if (user == null) return HttpStatusCode.UnprocessableEntity;

    return Response.AsJson(user);
}; 
```

但是您不想返回`User`实例，而是希望返回一个类型的单独实例，该类型仅在属性值不是给定实例`dynamic`时才实现属性。`null`

所以我会建议这样的代码：

```
Get["/user/{userid}"] = parameters =>
    {
        var user = UserService.GetById(Db, (string)parameters.userid);
        if (user == null) return HttpStatusCode.UnprocessableEntity;

        dynamic userDTO = new ExpandoObject();
        userDTO.Id = user.Id;
        if (!string.IsNullOrEmpty(user.FirstName)) userDTO.FirstName = user.FirstName;
        if (!string.IsNullOrEmpty(user.LastName)) userDTO.Lastname = user.LastName;

        return Response.AsJson((ExpandoObject)userDTO);
    }; 
```

**注意 1** 您不需要测试，因为从数据库成功返回实例`Id`暗示了这一点。`User`

**注意 2** 您需要使用一个`dynamic`类型，以便您可以包含*临时*属性。问题是扩展方法不能接受动态类型。为避免这种情况，您需要将其声明为`ExpandoObject`但将其用作动态。这个技巧会产生处理开销，但它允许您在将动态`ExpandoObject`传递给`AsJson()`扩展方法时将其强制转换为。

# java - 使用 Spring Data MongoDB 驱动程序处理未知属性

> ID：14936579
> 
> 赞同：2
> 
> 时间：2013-02-18T12:41:09.393
> 
> 标签：java, spring, mongodb

我希望能够从 MongoDB 集合中加载对象，并能够使用 Spring Data MongoDB 驱动程序处理文档中的未知属性/元素。主要是当再次保存对象时，不会丢弃任何未知属性。

我在 .net 驱动程序中看到了等效功能（使用[BsonExtraElements](http://docs.mongodb.org/ecosystem/tutorial/serialize-documents-with-the-csharp-driver/#supporting-extra-elements)属性），但找不到任何针对 Spring MongoDB 讨论此问题的文档或文章。

我想知道我是否遗漏了什么，或者我是否需要考虑实施或扩展我自己的 MappingMongoConverter 来处理这个问题？

谢谢，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:47:05.570

可行的方法是使用`update(…)`方法而不是`save(…)`in，`MongoTemplate`因为这不会将文档替换为要保存的对象的数据，而是触发并更新到文档，选择性地设置各个字段。

# php - 从 textarea 插入数据时需要在查询中转义什么？

> ID：14936580
> 
> 赞同：3
> 
> 时间：2013-02-18T12:41:13.163
> 
> 标签：php, sql, pdo, escaping, code-injection

我有一个简单的评论系统，用户输入文本`textarea`，运行 PHP 脚本，检查用户是否登录，是否按下提交并填写所有内容 - 它继续插入数据。我的问题是，我需要什么来逃避/修剪/剥离？现在我的查询看起来像这样：

```
$sql = $con->prepare("INSERT INTO Comments (user, comment, pageid, time) VALUES (:user, :comment, :pageid, NOW())");
$sql->bindValue(":user", $user, PDO::PARAM_STR);
$sql->bindValue(":comment", $comment, PDO::PARAM_STR);
$sql->bindValue(":pageid", $pageid, PDO::PARAM_INT);
$sql->execute(); 
```

变量来自使用该`POST`方法的表单。这对 sql 注入是否安全，还是在插入数据之前我需要做一些额外的修剪和转义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:45:46.847

只要您将 PDO 与准备好的语句和占位符一起使用，您实际上就尽可能安全。

我建议尽管使用 ->execute() 和数组，它比手动绑定变量要简单得多。

```
$sth = $con->prepare('INSERT INTO Comments (user, comment, pageid, time) VALUES (?, ?, ?, NOW())');

$sth->execute(array($user, $comment, $pageid)); 
```

# iphone - 应用程序关闭 10 分钟后定位服务运行后台

> ID：14936582
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:14.273
> 
> 标签：iphone, objective-c, location, cllocationmanager

我在运行后台进程的位置服务中的应用程序工作但 10 分钟后应用程序被关闭。我正在使用以下步骤

1）在 .plist 文件中手动添加密钥

```
<key>Required background modes</key>
<array>
        <string>App registers for location updates</string>
</array> 
```

2）代码是

```
 self.locationManager = [[CLLocationManager alloc] init];
[locationManager startUpdatingLocation];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation    *)newLocation fromLocation:(CLLocation *)oldLocation {

   NSString *latVal = [[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.latitude];
    NSString *lonVal = [[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.longitude];

} 
```

我需要在没有关闭应用程序的情况下在后台进程中频繁更新，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:52:20.040

在你`didFinishLaunchingWithOptions`我们这个。

```
self.locationManager = [[CLLocationManager alloc] init];
[locationManager startMonitoringSignificantLocationChanges];
locationManager.delegate = self; 
```

这将确保即使您的应用程序已被杀死，它也会被调用。

# vbscript - 使用 VBScript 为已删除的文件创建日志

> ID：14936583
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:15.460
> 
> 标签：vbscript

以下是我删除 DAT 文件的代码。

```
OPTION EXPLICIT
DIM strExtensionsToDelete,strFolder
DIM objFSO, MaxAge, IncludeSubFolders

' ************************************************************
' Setup
' ************************************************************

' Folder to delete files
strFolder = "E:\test"
' Delete files from sub-folders?
includeSubfolders = true
' A comma separated list of file extensions
' Files with extensions provided in the list below will be deleted
strExtensionsToDelete = "dat"
' Max File Age (in Days).  Files older than this will be deleted.
maxAge = 0

' ************************************************************

set objFSO = createobject("Scripting.FileSystemObject")

DeleteFiles strFolder,strExtensionsToDelete, maxAge, includeSubFolders

wscript.echo "Finished"

sub DeleteFiles(byval strDirectory,byval strExtensionsToDelete,byval maxAge,includeSubFolders)
DIM objFolder, objSubFolder, objFile
DIM strExt

set objFolder = objFSO.GetFolder(strDirectory)
for each objFile in objFolder.Files
    for each strExt in SPLIT(UCASE(strExtensionsToDelete),",")
        if RIGHT(UCASE(objFile.Path),LEN(strExt)+1) = "." & strExt then
            IF objFile.DateLastModified < (Now - MaxAge) THEN
                wscript.echo "Deleting:" & objFile.Path & " | " & objFile.DateLastModified 
                objFile.Delete
                exit for
            END IF
        end if
    next
next    
if includeSubFolders = true then ' Recursive delete
    for each objSubFolder in objFolder.SubFolders
        DeleteFiles objSubFolder.Path,strExtensionsToDelete,maxAge,includeSubFolders
    next
end if
end sub 
```

现在我想创建一个日志文件来存储已删除的文件信息（例如文件名、脚本运行时间和运行此脚本的用户）。谁能帮我这个 ？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:19:00.743

如果我应该采用你的风格模式。

```
' outside your DeleteFiles()
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set LogFile = objFSO.CreateTextFile(objFSO.GetTempName)
LogFile.WriteLine "DateTime: " & Now
LogFile.WriteLine "UserName: " & CreateObject("WScript.NetWork").UserName

DeleteFiles ...

' outside your DeleteFiles()
LogFile.Close

WScript.Echo "Finished"

Sub DeleteFiles(...

    ' inside For..Next in DeleteFiles()
    LogFile.WriteLine objFile.Path

End Sub 
```

# javascript - 十六进制值

> ID：14936585
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:18.777
> 
> 标签：javascript, hex

我像这样得到我的价值

`var dataView= new DataView(imgData.array.buffer); var st = dataView.getUint8(1).toString(10);`

这给了我十进制值 216。如何将变量 st 转换为（十六进制 0xD8）。

当我必须到 0xD8 时，我怎样才能将其转换为长短！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:42:24.967

[在toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)调用中使用不同的基数：

```
var dataView= new DataView(imgData.array.buffer);
var st = dataView.getUint8(1).toString(16); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:48:26.593

我想这是要走的路：

```
var st = "0x" + dataView.getUint8(1).toString(16).toUpperCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:42:48.743

我认为你应该使用 16 而不是 10 作为论据`toString()`

[http://www.w3schools.com/jsref/jsref_tostring_number.asp](http://www.w3schools.com/jsref/jsref_tostring_number.asp)，见`radix`参数

# android - 使用android中的where子句按类别计算行数

> ID：14936591
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:30.127
> 
> 标签：android, sqlite

我正在使用自定义光标适配器从 SQlite 视图中获取列表视图中的类别，并且还希望显示使用相同类别名称保存的特定行数。我尝试了很多次，但不幸的是无法成功。

这里是我使用的查询

```
int GetTasksCountByCategory(String cat)
 {

     Cursor cur = mDb.rawQuery(" SELECT Count(*) FROM  ViewTasks where Category_name = "+"'"+"cat"+"'", null);
     int x = 0;
     if (cur.moveToFirst())
     {
         x = cur.getInt(0);
     }

        cur.close();
        return x;    
 } 
```

和我的适配器类

```
public class cursorAdapter2 extends CursorAdapter{
    private Context mContext;
    DbAdapter myAdapter = new DbAdapter(mContext);

    @SuppressWarnings("deprecation")
    public cursorAdapter2(Context context, Cursor c) {
        super(context, c);
        mContext=context;
        // TODO Auto-generated constructor stub
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        // TODO Auto-generated method stub
         LayoutInflater inflater = LayoutInflater.from(arg2.getContext());
         View retView = inflater.inflate(R.layout.list, arg2, false);

        return retView;
    }

    @SuppressWarnings("unused")
    @Override
    public void bindView(View view, Context arg1, Cursor cursor) {
        // TODO Auto-generated method stub
        TextView category = (TextView) view.findViewById(R.id.txtLastcatId);
        category.setText(cursor.getString(cursor.getColumnIndex(DbAdapter.KEY_CATEGORY_NAME)));

         String getCat = (String) category.getText();
           int i = myAdapter.GetTasksCountByCategory(getCat);
        Button count = (Button) view.findViewById(R.id.button2);
        count.setText(Integer.toString(i));

        Button img = (Button) view.findViewById(R.id.button1);
    }

} 
```

在这我得到空指针异常任何人请提前帮助我thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:01:49.027

两件事情。首先`DbAdapter myAdapter`应该在类的构造函数中完成赋值...当 mContext 有值时。

```
public cursorAdapter2(Context context, Cursor c) {
    super(context, c);
    mContext=context;
    myAdapter = new DbAdapter(mContext);
} 
```

其次从....修改查询

```
Cursor cur = mDb.rawQuery(" SELECT Count(*) FROM  ViewTasks where Category_name = "+"'"+"cat"+"'", null); 
```

到

```
Cursor cur = mDb.rawQuery("SELECT Count(*) FROM ViewTasks where Category_name = ?", new String[] { cat } ); 
```

您传入的是字符串`"cat"`而不是变量`cat`。

# directshow - 即使图形暂停，SampleGrabber 回调也会被虚假调用

> ID：14936593
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:33.680
> 
> 标签：directshow

我在回调模式下使用 Directshow SampleGrabber 从源文件中捕获视频帧并进行一些处理。另外我想保持当前的视频播放速率，并且需要支持随机、前向和后向搜索。为此，我还在另一个线程中进行了一些本地缓冲。我正在运行将 syn 源设置为 NULL 的图形，以获得最大速度。但是，当我在固定数量的缓冲后暂停图表时。即使图形暂停，SampleGrabber 回调也会被虚假调用。这影响了我的帧索引和跟踪。我想从暂停的相同位置完全恢复图表。但是，如果我使用默认时钟运行图表，它可以正常工作，但我的播放会受到影响。我希望缓冲线程尽快完成。如何确保在图形暂停时不调用回调？任何想法或建议都会有很大帮助。

在此先感谢 Pradeep

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:40:06.050

暂停的图通常在内部具有所有相同的流式传输（活动状态），但渲染器阻塞流式传输，特别是。一旦收到足够的数据用于预览横幅。由于您从图中删除了时钟，因此您的渲染器可能不会阻止执行，因为它没有任何时钟可以暂停。[在您的情况下](https://stackoverflow.com/questions/14898471/generating-map-between-frame-number-and-frame-sample-time-using-samplegrabber-fi)，这是出于您打算重用相同图形以快速解析文件和回放的问题。单独的图形设计看起来有更多的机会做得更好。

# cakephp - 搜索功能无法使用 ID 字段输入

> ID：14936595
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:35.200
> 
> 标签：cakephp

我正在使用[https://github.com/cakedc/search](https://github.com/cakedc/search)上的搜索插件。我正在尝试仅使用 ID 字段搜索记录，也就是说，如果我在表单输入中输入 1，它必须显示用户 ID 为 1 的记录。我现在面临的挑战是当我指定输入应该是id 字段，搜索功能的输入字段在我的索引视图上消失了，奇怪的是当我指定输入字段显示的不同字段名称时。

**下面是我的模型代码**

```
public $actsAs = array('Search.Searchable');

public $filterArgs = array(
'id' => array('type' => 'like', 'field' => 'ItSupportRequest.id'),
);

public function findByTags($data = array()) {
$this->Tagged->Behaviors->attach('Containable', array('autoFields' => false));
$this->Tagged->Behaviors->attach('Search.Searchable');
$query = $this->Tagged->getQuery('all', array(
'conditions' => array('Tag.name'  => $data['tags']),
'fields' => array('foreign_key'),
'contain' => array('Tag')
));
return $query;
}

public function orConditions($data = array()) {
$filter = $data['filter'];
$cond = array(
'OR' => array(
$this->alias . '.id LIKE' => '%' . $filter . '%',
));
return $cond; 
```

}

**这是我的控制器代码。**

```
public $components = array('Search.Prg');

public $presetVars = true; // using the model configuration

public function find() {
$this->Prg->commonProcess();
$this->paginate['conditions'] = $this->ItSupportRequest->parseCriteria($this->passedArgs);
$this->set('articles', $this->paginate());
} 
```

**在我的 index.ctp 文件中我有这个代码。**

```
<?php 
echo $this->Form->create('ItSupportRequest', array(
'url' => array_merge(array('action' => 'find'), $this->params['pass'])
));
echo $this->Form->label('Query ID:') . "<br/>";        
echo $this->Form->input('name', array('div' => false, 'label' => false));

echo $this->Form->submit(__('Search'), array('div' => false));
echo $this->Form->end();
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:45:45.390

你不应该称它为 id 因为 id 将被隐藏（因为 cake 假设这是这里的主键）。

将其命名为其他名称或使用手动覆盖此行为

```
$this->Form->input('id', array('type' => 'text')); 
```

但我会选择“搜索”之类的东西

```
$this->Form->input('search', array('placeholder' => 'ID to look for')); 
```

和

```
public $filterArgs = array(
    'search' => array('type' => 'like', 'field' => 'ItSupportRequest.id'),
); 
```

# java - 在 Java 上制作 SVG 图

> ID：14936597
> 
> 赞同：1
> 
> 时间：2013-02-18T12:41:39.633
> 
> 标签：java, svg

我正在尝试重现这个[示例](http://svgsalamander.java.net/docs/exampleCode/SVGIODemo.html)，该示例应该使用 SVGSalamander API 创建笑脸图像。但是，当我运行我的程序时，图片没有出现。只有主要的 JFrame 在那里。由于使用 NetBeans 生成的代码，某些语法必须有所不同。不幸的是，我无法更改生成的代码。有谁知道我需要进行哪些更改才能运行该示例？我的代码中唯一的区别是 initComponents() 方法的生成部分。

这是我的代码：

```
class IconPanel extends javax.swing.JPanel {

public static final long serialVersioUID = 0;
final SVGIcon icon;

public IconPanel() {
    StringReader reader = new StringReader(makeDynamicSVG());
    URI uri = SVGCache.getSVGUniverse().loadSVG(reader, "myImage"); 
    icon = new SVGIcon();
    icon.setSvgURI(uri);       

    setPreferredSize(new Dimension(400, 400));   
}

@Override
public void paintComponent(Graphics g) {
    final int width = getWidth();
    final int height = getHeight();

    g.setColor(getBackground());
    g.fillRect(0, 0, width, height);

    icon.paintIcon(this, g, 0, 0);
}

private String makeDynamicSVG()
{
    StringWriter sw = new StringWriter();
    PrintWriter pw = new PrintWriter(sw);

   pw.println("<svg width=\"400\" height=\"400\" style=\"fill:none;stroke-width:4\">");
    pw.println("    <circle cx=\"200\" cy=\"200\" r=\"200\" style=\"stroke:blue\"/>");
    pw.println("    <circle cx=\"140\" cy=\"140\" r=\"40\" style=\"stroke:red\"/>");
    pw.println("    <circle cx=\"260\" cy=\"140\" r=\"40\" style=\"stroke:red\"/>");
    pw.println("    <polyline points=\"100 300 150 340 250 240 300 300\" style=\"stroke:red\"/>");
    pw.println("</svg>");

    pw.close();
    return sw.toString();
}

}

public class MainFrame extends javax.swing.JFrame {

/**
 * Creates new form MainFrame
 */

public static final long serialVersionUID = 0;

IconPanel panel = new IconPanel();

public MainFrame() {
    initComponents();    

    this.getContentPane().add(panel, BorderLayout.CENTER);
    pack();
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );

    pack();
}// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new MainFrame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
// End of variables declaration                   
} 
```

# drupal - Drupal 调度程序模块 cron

> ID：14936602
> 
> 赞同：0
> 
> 时间：2013-02-18T12:41:48.550
> 
> 标签：drupal, cron, scheduler

我正在使用[调度程序](http://drupal.org/project/scheduler)模块在某些时候发布和取消发布我的内容，但是我希望获得比使用 Drupal cron 本身更频繁的发布。

调度程序中有一个选项可以专门为调度程序使用轻量级 cron，但我以前从未编写过 cron 任务，我只是不知道自己在做什么，它给了我一个例子，说明我将如何编写一个

*   *   *   *   *   /usr/bin/wget -O - -q "[http://example.com/scheduler/cron](http://example.com/scheduler/cron) "

为了确保我得到正确的信息，这条线（修改为指向我的地址）会进入一个名为 cron.php 的文件吗？

我已尝试执行上述操作，但似乎没有发布我的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:55:32.190

不，您需要将此行添加到服务器上的 crontab 中。与您的托管服务提供商交谈，他们应该能够为您提供帮助。

如果您正在运行自己的服务器，请在 shell 中运行以下命令：

```
crontab -e 
```

并在该文件中最后添加您的行。

请参阅[此处了解更多信息](http://en.wikipedia.org/wiki/Cron)。

# javascript - 替换javascript中的字符串

> ID：14936606
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:42:00.390
> 
> 标签：javascript, string, replace

我知道这是一项简单的任务，但我似乎找不到解决方案。

我的日期格式为：20/02/2013 我只是想替换 / ——到目前为止我已经得到了，但它只替换了第一个斜线......不知道为什么不替换第二个：

```
date = 20/02/2013;
date.replace('/', '-'); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:42:53.917

[*您需要一个带有全局*标志](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Advanced_Searching_With_Flags)的正则表达式：

```
"20/02/2013".replace(/\//g, "-");   // "20-02-2013" 
```

另一种方法是使用[`split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)/ [`join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)：

```
"20/02/2013".split("/").join("-");  // "20-02-2013" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:44:48.120

使用全局标志。

```
str.replace(/\//g, '-'); 
```

# shell - 将较短的表格转换为完整的表格

> ID：14936609
> 
> 赞同：0
> 
> 时间：2013-02-18T12:42:12.820
> 
> 标签：shell

输入文件1：

```
IT  : Information Technology
B.Tech : Graduation
CS : computer science 
```

输入文件2：

```
B.Tech has the different groups.
One of several groups is IT and it has CS.
Most of the students are selecting these two groups. 
```

输出应该是这样的：

将输入 file1 的完整形式替换为输入 file2

任何人都可以帮助创建使用 awk/sed 的 shell 脚本...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:05:21.763

```
 awk -F' : ' 'NR==FNR{a[$1]=$2;next}{for(x in a)gsub(x,a[x])}1' file1 file2 
```

输出将是：

```
kent$  awk -F' : ' 'NR==FNR{a[$1]=$2;next}{for(x in a)gsub(x,a[x])}1' file1 file2
Graduation has the different groups.one of several groups is Information Technologyand it has computer science.Most of the students selecting these two groups. 
```

**但是**有一个问题需要注意：

递归替换问题

例如：

```
CS : computer science (CS) 
```

这会发生吗？应该怎么做？

# php - 什么会导致 PHP 忽略 mysqli.reconnect 设置？

> ID：14936616
> 
> 赞同：2
> 
> 时间：2013-02-18T12:42:36.657
> 
> 标签：php, mysql

我们有几台不同的服务器运行相同的 PHP 脚本，所有这些都使用 PHP mysqli 连接/函数，我们注意到，在一台新服务器上，我们开始收到许多 MYSQL Gone Away 错误。

`wait_timeout`在 MYSQL 中，在所有服务器上都设置为 300 秒，这是在此特定服务器上连接断开之前所需的时间长度（即下面代码中的查询之间等待 301 秒会产生错误，但 299 秒不会）。

但是，所有服务器也都`mysqli.reconnect`设置为 1（打开）。根据文档，`mysqli.reconnect`应该意味着断开的连接会自动重新连接，但绝对不是。

这是我运行的演示该问题的代码片段。它适用于除此特定服务器之外的所有服务器：

```
$mysqli = new mysqli('ip', 'username', 'pass', 'db');
if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
}

$query = "SELECT * FROM table LIMIT 1";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
sleep(301);
$query = "SELECT * FROM table LIMIT 1";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
mysqli_close($mysqli);

print "Finished\n";
exit; 
```

我还重新编写了要使用的测试脚本`mysqli_ping()`（因为文档指出如果 mysqli.reconnect 设置为 1，此函数应自动重新连接），但是这仍然没有重新连接，并且第二个查询总是产生 MySQL 的错误走了。

所有服务器运行的 PHP 版本略有不同。失败的服务器正在运行 5.3.21，其他服务器正在运行 5.3.0 和 5.3.10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T10:20:17.820

原来问题出在 MYSQLND 驱动程序上。我们的服务提供商基本上重新编译了 PHP，这解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T23:46:50.697

有一个关于此的 php 错误，解决为 wontfix：[https ://bugs.php.net/bug.php?id=52561](https://bugs.php.net/bug.php?id=52561)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T21:54:11.503

我只是在寻找有关设置的信息时遇到了这个问题`mysqli.reconnect`。根据手册：

> [https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.reconnect](https://www.php.net/manual/en/mysqli.configuration.php#ini.mysqli.reconnect)
> 
> **注意**：`php.ini`mysqlnd 驱动程序忽略此设置。

这没有具体说明它是否意味着它总是会或总是不会自动重新连接。“不会”似乎更有可能，上面的评论证实了这一点，指出当设置为 1 时它没有发生。

我的问题是我想要一种方法来*知道*连接何时终止（出于错误报告的目的，因此我只能在这种情况下实现对失败的数据库操作的选择性重试）。我不知道是否有更直接的方法来检查数据库连接是否存在，但我找到了`mysqli::ping()`方法。除非，如果它默默地自动重新连接，我不会知道它发生了。

所以我的解决方案是保存/禁用/恢复设置以及 using `ping()`，如下所示：

```
if (!$result) { // DB operation failed
    $save = ini_get('mysqli.reconnect'); // save setting
    ini_set('mysqli.reconnect', 0); // disable it
    $connected = $mysqli->ping(); // check connection
    ini_set('mysqli.reconnect', $save); // restore setting
}
if ($connected) {
    // Failure was something else. Handle that...
} else {
    // Failure was due to dropped connection.
    // Explicitly reconnect.
    // Ok to retry operation...
} 
```

# batch-file - BAT 脚本中的相对路径

> ID：14936625
> 
> 赞同：153
> 
> 时间：2013-02-18T12:43:02.397
> 
> 标签：batch-file, cmd, relative-path, drive

这是我 USB 驱动器上我自己的程序文件夹：

```
Program\
     run.bat
     bin\
         config.ini
         Iris.exe
         library.dll
         etc. 
```

我想用`run.bat`开始 `Iris.exe`

我不能使用这个：`F:/Program/bin/Iris.exe`就像快捷方式一样，因为有时它不会作为驱动器附加`F:`（*例如* `E:`或`G:`）

无论驱动器号如何，我需要在 bat 文件中写入什么才能工作？

我在 BAT 文件中试过这个：

```
"\bin\Iris.exe" 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2013-02-18T18:28:04.590

在批处理文件中使用它：

```
%~dp0\bin\Iris.exe 
```

`%~dp0`解析为批处理脚本所在文件夹的完整路径。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-02-18T23:28:05.460

您可以使用以下代码获取所有必需的文件属性：

```
FOR %%? IN (file_to_be_queried) DO (
    ECHO File Name Only       : %%~n?
    ECHO File Extension       : %%~x?
    ECHO Name in 8.3 notation : %%~sn?
    ECHO File Attributes      : %%~a?
    ECHO Located on Drive     : %%~d?
    ECHO File Size            : %%~z?
    ECHO Last-Modified Date   : %%~t?
    ECHO Parent Folder        : %%~dp?
    ECHO Fully Qualified Path : %%~f?
    ECHO FQP in 8.3 notation  : %%~sf?
    ECHO Location in the PATH : %%~dp$PATH:?
) 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-05-03T11:13:58.003

我发现`%CD%`给出了调用脚本的路径而不是脚本的路径，但是，`%~dp0`它将给出脚本本身的路径。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-03-17T12:26:15.487

您应该能够使用当前目录

> "%CD%"\bin\Iris.exe

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-18T12:52:08.653

要么 `bin\Iris.exe` （没有前导斜杠 - 因为这意味着从根开始）
或`\Program\bin\Iris.exe`（完整路径）

# applescript - applescript - 如何将剪贴板作为 iTunes 轨道或文件轨道对象访问

> ID：14936626
> 
> 赞同：1
> 
> 时间：2013-02-18T12:43:04.563
> 
> 标签：applescript, clipboard, itunes

我正在尝试为 iTunes 开发自定义粘贴脚本。在“复制”某些播放列表曲目后，用户应调用脚本而不是标准粘贴，以将曲目粘贴到另一个播放列表中。除了粘贴曲目之外，该脚本还会做一些额外的事情。

问题：要将剪贴板粘贴为 iTunes 播放列表中的曲目，我需要将剪贴板内容查找为 Track 类对象，而不是文件名、furl 或其他任何内容。

```
clipboard info 
```

说它在剪贴板中有以下内容：

```
{
    {Unicode text, 776},
    {string, 388},
    {«class itun», 4036},
    {«class furl», 118},
    {«class ut16», 778}
} 
```

现在，类 furl 对象可能会将我指向文件，但这仍然没有让我获得 iTunes“文件轨道”或“轨道”。有没有人可以阐明剪贴板上的“itun”类的东西是什么？（尝试了一天来找出自己，但没有得到任何结果）而且，是否可以使用 itun 类对象来访问复制到剪贴板的轨道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:10:34.537

我不知道如何使用剪贴板执行您的要求。但是为什么要使用剪贴板呢？如果有人想“复制”曲目，则假定他们首先选择了曲目。如果他们选择了曲目，则无需执行复制步骤。一个简单的applescript 可以从iTunes 中获得选择，那么为什么不直接使用这种方法呢？您将选择作为曲目，然后在 AppleScript 的其余部分中执行您需要的任何操作。

```
tell application "iTunes"
    set selectedTracks to the selection

    -- do whatever else you need
end tell 
```

# java - Android 通知 setContentView

> ID：14936643
> 
> 赞同：0
> 
> 时间：2013-02-18T12:43:52.150
> 
> 标签：java, android, android-notifications

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html) 页面说，我必须使用 Intent

我不能使用 Intent，因为我的代码只有一个 Activity。我想使用通知返回应用程序，例如从**DEVICE'S HOME SCREEN**。

当我想通过单击通知执行某些操作时，我必须使用 Intents。有没有办法`setContentView`点击通知后使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:00:52.793

到目前为止，我还没有看到您的尝试，我将对此进行尝试。

我不太明白为什么无论您的应用程序中有多少活动，您都不能*声明/*使用`Intent`. 如果您需要在单击通知后再次触发您唯一的活动，并且需要再次`setContentView(R.layout.some_layout_xml);`在活动中调用`onCreate()`，为什么不为您的通知声明一个 Intent，如下所示：

```
Intent intent = new Intent(getApplicationContext(), YOUR_ACTIVITY.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
PendingIntent pendingIntent = PendingIntent.getActivity(YOUR_ACTIVITY.this, 0, intent, 0); 
```

这样，点击你的通知应该做你想做的事。

*同样，考虑到您根本没有发布任何代码，这可能对您有用，也可能对您不起作用。*

**编辑：**根据OP的评论，我**认为**解决方案可能是：

请参阅此链接，了解如何使用通知的意图发送数据：[如何将参数从通知单击发送到活动？](https://stackoverflow.com/q/1198558/450534)

基本上，由于 a`Notification`已被触发，我假设用户已经登录。现在，当他们在单击 a 后返回应用程序时跳过登录部分`Notification`，发送一些附加内容以及`Intent`. 然后，当`Activity`开始时，检查值并使用`if...else`语句，决定应该显示哪个布局。

再说一次，我怎么强调都不为过，你应该总是展示你到目前为止所做的事情。这确实有助于找到解决方案。您的**实际要求**与您需要完成的工作完全无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:02:46.513

您可以使用 Intent 返回应用程序，例如：

```
final Intent intent = new Intent(context, YourActivity.class);
final PendingIntent pendingIntent = PendingIntent.getActivity(
                context, 0, intent, 0);
final Notification notification = new Notification(
                R.drawable.logo, tickerText, System.currentTimeMillis());
notification.setLatestEventInfo(context, title, text, pendingIntent);
notificationManager.notify(NOTIFICATION_ID, notification); 
```

# python - 如何从 Pandas 绘图函数返回 matplotlib.figure.Figure 对象

> ID：14936646
> 
> 赞同：14
> 
> 时间：2013-02-18T12:43:58.307
> 
> 标签：python, pandas, matplotlib

我有一个`dt`：

```
>>> dt
            sales                mg         
ID         600519   600809   600519   600809
RPT_Date                                    
20060331  13.5301   5.8951   9.4971   3.0408
20060630   6.6048   2.4081   4.3088   1.4040
20060930  12.3889   3.6053   9.1455   2.0754
20061231  16.5100   3.3659  12.4682   1.8810
20070331  15.8754   5.9129  11.5833   3.6736
20070630  10.4155   3.5759   7.8966   2.2812
20070930  18.2929   3.5280  14.3552   2.1584
20071231  27.7905   5.4510  23.7820   3.2568 
```

并使用 pandas 函数`plot`创建一个 barplot 对象

```
>>> fig = dt.plot(kind='bar', use_index=True)
>>> fig
<matplotlib.axes.AxesSubplot object at 0x0B387150> 
```

但我想要 a`<matplotlib.figure.Figure object>`而不是传递给其他函数，就像下面的对象类型一样：

```
>>> plt.figure()
<matplotlib.figure.Figure object at 0x123A6910> 
```

那么如何从 Pandas plot 转换`<matplotlib.axes.AxesSubplot object>`为`<matplotlib.figure.Figure object>`或直接返回“图形对象”？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-18T12:49:15.240

您可以从轴对象中获取图形：

```
ax.get_figure() 
```

完整示例：

```
df = pd.DataFrame({'a': range(10)})
ax = df.plot.barh()
ax.get_figure() 
```

# java - 在不启动新线程的情况下构建进度条

> ID：14936661
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:45:02.130
> 
> 标签：java, multithreading, swing, progress-bar, jframe

*我需要在JFrame*中添加一个进度条，但我想在不生成新线程的情况下更新这个进度条（例如在后台更新进度条的*SwingWorker*）。有没有办法更新当前线程（主 JFrame 的当前线程）中的进度条？

**详细介绍**

我有扩展 JFrame 并调用第二类的第一类（“ChooseGUI”）。第二个类（“ProgressFrame”）是 JFrame 的另一个扩展：当我在 ChooseGUI 中按下按钮时，ChooseGUI 变得不可见，ProgressFrame（显示进度条）变为可见并调用 SwingWorker 来更新条。问题是ChooseGUI 继续执行，而我希望ChooseGUI 等待ProgressBar 的'DONE'

*类ChooseGUI（一块）*

```
 public class ChooseGUI extends JFrame{
            public ChooseGUI(IJavaProject project){
            super(project.getElementName());

            this.project = project;
            this.classi = new HashMap<ICompilationUnit,Boolean>();

            inizializeMap();

    JPanel p = createPanel();

                    if(p != null){

                        JScrollPane pane = new JScrollPane(p);
                        pane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);// disabilito la scrollbar orizzontale
                        pane.setSize(1000, 5000);
                    add(pane);

                    setLocationRelativeTo(null);
                    setResizable(true);
                    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                    pack();
                    setVisible(true); 

                    }
                    else{

setVisible(false);
                    JOptionPane.showMessageDialog(null, "Classi not found!");
                }
    }

    private void inizializeMap(){
        ArrayList<ICompilationUnit> className = getClassNames();
        for(ICompilationUnit a : className){
            classi.put(a,false);
        }
    }

    private JPanel createPanel(){
        JPanel result = new JPanel(new GridLayout(0, 1));

        ArrayList<ICompilationUnit> className = getClassNames();

        int size = className.size();
        if(size > 0){       

            Collections.sort(className, new Comparator<ICompilationUnit>(){

                @Override
                public int compare(ICompilationUnit o1, ICompilationUnit o2) {
                     return o1.getElementName().compareTo(o2.getElementName());
                     }});

        for(int i = 0; i < size ; ++i){
            String name = className.get(i).getElementName();
            JCheckBox box = new JCheckBox(name);
            box.setActionCommand(name);

            box.addItemListener(this);
            result.add(box);

        }

        JButton confirm = new JButton(new ImageIcon(pathIconChoose));
        confirm.setSize(500, 1000);
        result.add(confirm);

        confirm.addActionListener(new ActionListener(){

            @SuppressWarnings("deprecation")
            @Override
            public void actionPerformed(ActionEvent arg0) {

                setVisible(false);

                int size = classi.size();

                if(size > 0){

                        BuildDB a = null;
                        try {
                            a = new BuildDB();
                        } catch (ClassNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    Set<ICompilationUnit> keySet2 = classi.keySet();
                    ArrayList<ICompilationUnit> units = new ArrayList<ICompilationUnit>();
                    for(ICompilationUnit unit: keySet2){
                        if(classi.get(unit) == true){
                                        units.add(unit);
                        }}

                            QueryAndManipulateDB t = new QueryAndManipulateDB(a);

                            ProgressFrame guiFrame = new ProgressFrame(units,t);

                           guiFrame.generateGUIAndUpdateDB();

                            //// quering
                            for(ICompilationUnit unit : units){         
                            ArrayList<Coppia> lista = new ArrayList<Coppia>();

                             ASTParser parser = ASTParser.newParser(AST.JLS3);
                             parser.setSource(unit);
                             CompilationUnit astRoot = (CompilationUnit) parser.createAST(null);
                             astRoot.recordModifications();
                             TypeDeclaration typeDeclaration = (TypeDeclaration)astRoot.types().get(0);

                             int length = typeDeclaration.getMethods().length;
                             if(length > 0){
                             for(int j = 0; j < length; ++j){
                             MethodDeclaration methodDecl = typeDeclaration.getMethods()[j];

                             Coppia c = t.getComment(unit.getElementName(), getSignature(methodDecl));

                             if(c.getCommenti().size() > 0){
                             lista.add(c);}
                             }

                             if(lista.size() > 0){
                             CommentoFrame f = new CommentoFrame(("Select Comment for " + unit.getElementName()),lista, unit);
                             f.setResizable(true);
                             f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                                f.pack();
                                f.setVisible(true);
                             }

                             else{
                                 JOptionPane.showMessageDialog(null, "Commenti non trovati per " + unit.getElementName());
                             }

                                dispose();
                             }

                }

                      a.closeConnection();//}
            }

            }

        });

        return result;}
        else
        {
            return null;
        }
    } 
```

*进度框架*

```
public class ProgressFrame extends JFrame{

/**
 * 
 */
private static final long serialVersionUID = 1L;
private ArrayList<ICompilationUnit> units;
private QueryAndManipulateDB q;

public ProgressFrame(ArrayList<ICompilationUnit> units, QueryAndManipulateDB q){
    setLayout(new GridLayout(0,1));
    this.units = units;
    this.q = q;
}

public void generateGUIAndUpdateDB(){

    ArrayList<JPanel> panels = new ArrayList<JPanel>();
    for(int i = 0; i < units.size(); ++i){
        final String simpleClassName = units.get(i).getElementName();
        String fullClassName = units.get(i).getParent().getElementName() + "." + simpleClassName.substring(0, simpleClassName.length() - 5);

        JPanel pan = new JPanel();
        pan.setName(fullClassName);

        Introspection intro = new Introspection(fullClassName);
        //create progress bar        
        int size = intro.getMethodSignatures().size();
        JProgressBar progressBar = new JProgressBar(0,size);
        progressBar.setValue(0);

        JLabel label = new JLabel("Search for class " +  simpleClassName.substring(0, simpleClassName.length() - 5));
        label.setName(simpleClassName);

        pan.setLayout(new BorderLayout());
        pan.add(label, BorderLayout.NORTH);
        pan.add(progressBar, BorderLayout.CENTER);

        panels.add(pan);
        add(pan);

        final ClassEvaluating ce = new ClassEvaluating(pan);

        ce.addPropertyChangeListener(new PropertyChangeListener(){

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                 if (evt.getPropertyName().equals("state") && evt.getNewValue().equals(SwingWorker.StateValue.DONE)) {

                    HashMap<String, ParagraphsList> paragraphsForMethods = ce.getResult();

                    for(String metodo : paragraphsForMethods.keySet()){
                        ParagraphsList par = paragraphsForMethods.get(metodo);
                        ArrayList<Comment> commenti = new ArrayList<Comment>();

                        List<Paragraph> list = par.getRankList();
                        for(Paragraph p: list){
                        double score = p.getScore();
                        if(score > 0)
                        commenti.add(new Comment(p.getText(),score));
                        }

                        Association ass = new Association(simpleClassName,metodo,commenti);
                        q.updateDB(ass);
                    }

                            }

            }

        });

        ce.execute(); }}} 
```

*ClassEvaluating 类*是一个更新进度条的 SwingWorker。

**怎么了？**当我在测试器中启动 ChooseGUI 时，JOptionPane 消息“Commenti non trovati per..”在进度条之前显示。我希望 ChooseGUI 等待 ProgressBar 的“完成”！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:11:17.220

您应该使用模态对话框进行阻止：

**编辑**：EDT 中的进度可视化 - 这也可以用你的`PropertyChangeEvent`

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Test {

    public Test() {
        createAndShowGUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setSize( 500, 500 );
        frame.setLocationRelativeTo( null );
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout( new BorderLayout() );
        frame.getContentPane().add(new JButton( openChooseGUI() ), BorderLayout.SOUTH);      
        frame.setVisible(true);
    }

    private Action openChooseGUI() {
        return new AbstractAction("ChooseGUI") {
            @Override
            public void actionPerformed( ActionEvent e ) {
                new ChooseGUI().setVisible( true );
            }
        };
    }

    public class ChooseGUI extends JFrame {

        public ChooseGUI() {
            setSize( 200, 200 );
            setLocationRelativeTo( null );
            setDefaultCloseOperation( JFrame.DISPOSE_ON_CLOSE );
            getContentPane().setLayout( new BorderLayout() );
            getContentPane().add( new JLabel( "This is ChooseGUI" ), BorderLayout.CENTER );
            init();
        }

        private void init() {
            final JDialog progressDialog = new JDialog( this, true );
            final JProgressBar progress = new JProgressBar( JProgressBar.HORIZONTAL );
            progress.addChangeListener( new ChangeListener() {
                @Override
                public void stateChanged( ChangeEvent e ) {
                    // TODO Auto-generated method stub
                    int current = ((JProgressBar)e.getSource()).getValue();
                    if(current >= 100) {
                        progressDialog.dispose();
                    }
                }
            } );

            progressDialog.setSize( 400, 100 );
            progressDialog.setLocationRelativeTo( this );
            progressDialog.getContentPane().setLayout( new BorderLayout() );
            progressDialog.getContentPane().add( progress, BorderLayout.NORTH );
            progressDialog.getContentPane().add(  new JLabel( "This is Progress Dialog" ), BorderLayout.CENTER );
            progressDialog.getContentPane().add(  new JButton(new AbstractAction("click to progress") {
                @Override
                public void actionPerformed( ActionEvent e ) {
                    progress.setValue( progress.getValue()+25 );
                }
            }), BorderLayout.SOUTH );
            progressDialog.setVisible( true );
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:51:06.267

您最终将被 EDT 线程阻塞。你需要在后台完成你的任务，你会从那里更新你的进度条。

通过更新你的进度条，我的意思是，设置它的值。当您这样做时，GUI 会自动更新其在 EDT 线程中的视图。

# php - 键值的数组排序

> ID：14936664
> 
> 赞同：2
> 
> 时间：2013-02-18T12:45:14.327
> 
> 标签：php, arrays

我的网站上有一个民意调查。为此，我将结果放入一个数组中，如下所示：

```
[Answer1] => "0",
[Answer2] => "1",
[Answer3] => "0",
[Answer4] => "0" 
```

选择是关键，票数是价值。基本上，当结果显示我想按票数排序，然后也保持相同的排序。因此，如果没有投票，它将按顺序显示：

```
Answer1
Answer2
Answer3
Answer4 
```

但是，“Answer2”有 1 票，它会显示：

```
Answer2
Answer1
Answer3
Answer4 
```

我曾尝试创建自定义 usort 函数，但没有运气。
任何人都可以帮我解释如何做的逻辑（我可以自己做PHP）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:49:09.773

当您使用关联数组时，您正在寻找的东西称为稳定排序。PHP 的标准数组排序函数使用不稳定的快速排序实现，因此您发现它们在这里对您没有帮助。

您可以使用`array_multisort`. 通过对**value**和**key**进行排序。

使用您当前拥有的数据结构，您无法使用任何 u*sort 函数执行此操作，但是如果您修改了数据结构并添加了另一个维度，使其看起来像以下那样，那么您可以：

```
array( 
  array( 
    'answer' => 1, 
    'votes' => 0, 
  ), 
  array( 
    'answer' => 2, 
    'votes' => 1, 
  ), 
) 
```

所以本质上，比较函数只需要考虑两个子索引。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:48:37.857

你想要 php 函数“asort”：

[http://uk.php.net/manual/en/function.asort.php](http://uk.php.net/manual/en/function.asort.php)

它对数组进行排序，维护索引关联。

我刚刚注意到您使用的是标准数组（非关联）。如果您不关心保留索引关联，请使用 sort()：

[http://uk.php.net/manual/en/function.sort.php](http://uk.php.net/manual/en/function.sort.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:52:55.343

看起来我误读了这个问题。

asort() 将按值对数组进行排序，因此最高票数将排在数组的首位。因此结果将是：

```
[Answer2] => "1",
[Answer1] => "0",
[Answer3] => "0",
[Answer4] => "0" 
```

或者更完整的例子

```
[Answer2] => "42",
[Answer3] => "29",
[Answer1] => "18",
[Answer4] => "9" 
```

* * *

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T12:54:04.183

我认为 asort() 会工作..

```
asort($your_array); 
```

# java - 如何将 2 个点存储为一对并在 Java 中有一个对的列表？

> ID：14936667
> 
> 赞同：0
> 
> 时间：2013-02-18T12:45:42.447
> 
> 标签：java, swing, line, graphics2d

我正在使用图形 2D 在 jpanel 上绘制线条作为缓冲图像，我想将点存储为对，即起点的 x 和 y 坐标作为一对，终点的 x 和 y 坐标作为另一个一对。由于将有几行，我想将所有这些对存储为一个列表（或者可能 2 - 一个用于起点，一个用于终点），并且能够在行移动并且点发生变化时更新它们并检查是否给定的点在列表中。我该怎么做？这可能吗？

我看过有一个 Pair 类，但我不知道它是如何工作的，以及我是否可以有一个 Pairs 列表。我也看过使用地图和数组列表，但它们似乎都没有我正在寻找的功能（或者我可能只是不知道）。

目前，我只是在画线，但没有存储点。这是完成所有绘图的类：

```
package floorplan;

/**
*
* @author xodkx
*/

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.awt.image.BufferedImage;
import java.awt.event.MouseListener;

public class Floor extends JPanel implements MouseListener, MouseMotionListener
{

  private static final int WIDTH = Integer.parseInt(JOptionPane.showInputDialog("Please    
  enter the width of your room"));
  private static final int LENGTH = Integer.parseInt(JOptionPane.showInputDialog("Please   
  enter the width of your room"));
  private static final Color BACKGROUND = Color.WHITE;
  private static final Color INITIAL_COLOUR = Color.BLACK;
  private static final Framework INITIAL_FRAMEWORK = Framework.FLEXIBLEWALL;

  private MouseState state = MouseState.IDLE;
  private Framework frameworkType = INITIAL_FRAMEWORK;
  private Color colour = INITIAL_COLOUR;

  private Point start = null; // START POINT
  private Point end = null; // END POINT

  private BufferedImage bufImage = null;

  public Floor()
  {
    setPreferredSize(new Dimension(LENGTH,WIDTH));
    setBackground(Color.white);
    setBorder(BorderFactory.createLineBorder (Color.black, 5));

    this.addMouseListener(this);
    this.addMouseMotionListener(this);

 }

 public void setColor(Color color)
 {
    colour = color;

 }

 public void setFramework(Framework framework)
 {
    frameworkType = framework;
 }

 @Override
 public void paintComponent(Graphics g)
 {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D)g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,   
     RenderingHints.VALUE_ANTIALIAS_ON);

    if(bufImage == null)
    {
        int h = this.getHeight();
        int w = this.getWidth();
        bufImage = (BufferedImage)this.createImage(h,w);
        Graphics2D gc = bufImage.createGraphics();
        gc.setColor(BACKGROUND);
        gc.fillRect(0, 0, w, h);
    }

    g2.drawImage(bufImage,null,0,0);

    drawGrid(g2);

    if(state == MouseState.DRAGGING)
    {
        createComponent(g2);
    }
 }

 public void drawGrid(Graphics g2)
 {
    int gridDivisions = 20;
    int divisionSize = WIDTH/gridDivisions;
    int grid = WIDTH*LENGTH;

    g2.setColor(Color.lightGray);

    for(int i=1; i<grid; i++)
    {
        int x = i * divisionSize;
        g2.drawLine(x,0,x,getSize().height);
    }

    for(int i=1; i<grid; i++)
    {
        int y = i*divisionSize;
        g2.drawLine(0,y,getSize().width,y);
    }
 }

 public void createComponent(Graphics2D g2)
 {
     g2.setColor(colour);

    switch (frameworkType)
    {
        case FLEXIBLEWALL:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

        case VERTICALWALL:
            g2.setStroke(new BasicStroke(5));
            end.x = start.x;
            g2.drawLine(start.x,start.y,end.x,end.y);
            break;

        case HORIZONTALWALL:
            g2.setStroke(new BasicStroke(5));
            end.y = start.y;
            g2.drawLine(start.x,start.y,end.x,end.y);

        case DOOR:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

        case WINDOW:
            g2.setStroke(new BasicStroke(5));
            g2.drawLine(start.x, start.y, end.x,end.y);
            break;

        default:
            g2.drawString("test", 10, 20);
            break;
     }
 }

 public void clear() 
 {

    bufImage.flush();
    bufImage = null;
    repaint();
 }

 @Override
 public void mousePressed(MouseEvent e)
 {
    state = MouseState.DRAGGING;
    start = e.getPoint();
    end = start;
 }

 @Override

 public void mouseDragged(MouseEvent e)
 {

    state = MouseState.DRAGGING;
    end = e.getPoint();
    this.repaint();

 }

  @Override
  public void mouseReleased(MouseEvent e)
 {
    end = e.getPoint();
    if(state == MouseState.DRAGGING)
    {
        state = MouseState.IDLE;
        createComponent(bufImage.createGraphics());
        this.repaint();
    }
 }

 public void updateLocation(MouseEvent e)
 {

 }

 @Override
 public void mouseClicked(MouseEvent e)
 {

 }

 @Override
 public void mouseEntered(MouseEvent e)
 {

 }

 @Override
 public void mouseExited(MouseEvent e)
 {

 }

 @Override
 public void mouseMoved(MouseEvent e)
 {

 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:49:49.183

使用`java.awt.geom.Line2D`. 您可以将其放入列表或任何其他集合中。它有`equals()`和`hashCode()`。

您可以使用`Line2D.Float`需要更少空间的`Line2D.Double`哪个在计算中更方便。

如果您有数十万条这样的行，那么情况就会改变。然后它变得不那么舒服了。因为 a`int[]`是最节省内存的，但这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:52:05.893

```
package util;

public final class Pair<S,T> {
 public S first;
 public T second;

 public Pair(S first, T second) {
    super();
    this.first = first;
    this.second = second;
 }

 public S getFirst() {
    return first;
 }

 public T getSecond() {
    return second;
 }

 public void setFirst(S first) {
    this.first = first;
 }

 public void setSecond(T second) {
    this.second = second;
 }

 @Override
 public int hashCode() {
     final int prime = 31;
     int result = 1;
     result = prime * result + ((first == null) ? 0 : first.hashCode());
     result = prime * result + ((second == null) ? 0 : second.hashCode());
     return result;
 }

 @Override
 public boolean equals(Object obj) {
     if (this == obj)
         return true;
     if (obj == null)
         return false;
     if (getClass() != obj.getClass())
         return false;
     Pair<?,?> other = (Pair<?,?>) obj;
     if (first == null) {
         if (other.first != null)
             return false;
     } else if (!first.equals(other.first))
         return false;
     if (second == null) {
         if (other.second != null)
             return false;
     } else if (!second.equals(other.second))
         return false;
     return true;
 }

 @Override
 public String toString() {
     return "<"+first+","+second+">";
 }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T12:56:19.553

首先，您可以将所有点存储在一个列表中，因此偶数位置的点将是线段的起点，奇数位置的点将是终点：

```
List <Point> points = Arrays.asList (
    new Point (100, 100), new Point (200, 100),  // First line segment
    new Point (200, 100), new Point (200, 200),  // Second line segment
    new Point (200, 200), new Point (100, 100)); // Third line segment 
```

此外，您可以将点数组存储在列表中，因此每个数组将代表一条曲线，其中原因曲线可能仅包含一个段：

```
List <Point []> points = Arrays.asList (
    new Point [] {new Point (100, 100), new Point (200, 100)},  // First line segment
    new Point [] {new Point (200, 100), new Point (200, 200)},  // Second line segment
    new Point [] {new Point (200, 200), new Point (200, 100), new Point (100, 100)); // Curve of third and fourth segments 
```

当然，您可以声明自己的类来存储两个点，如下所示：

```
public class TwoPoints
{
    public final Point begin;
    public final Point end;

    public TwoPoints (int x1, int y1, int x2, int y2)
    {
        this (new Point (x1, y1), new Point (x2, y2));
    }

    public TwoPoints (Point begin, Point end)
    {
        this.begin = begin;
        this.end = end;
    }
} 
```

您绝对可以将此类的对象存储在列表中：

```
List <TwoPoints> lines = Arrays.asList (
    new TwoPoints (100, 100, 100, 200),  // First line segment
    new TwoPoints (100, 200, 200, 200),  // Second line segment
    new TwoPoints (200, 200, 100, 100)); // Third line segment 
```

# jquery - 需要隐藏加载内容

> ID：14936668
> 
> 赞同：1
> 
> 时间：2013-02-18T12:45:43.707
> 
> 标签：jquery, hide, loading

我正在使用 jQuery CameraSlider，它工作正常，但是当页面加载时，分页图标会在包含 div 的顶部闪烁，并且客户很想看到它们消失。代码实际上是在做它被构建做的事情。但是，如果可能的话，我仍然希望这样做，以便分页图标在加载时不会闪烁。

[这](http://pattonnz.businesscatalyst.com/index.htm)是有问题的页面。

我已经确定了需要控制的元素，并且我找到了一个我“认为”是我所追求的脚本，但我无法让它完全按照我的意愿去做。

通过在样式中将此元素设置为 display:none; 我没有分页，所以我知道这些是要控制的元素。

```
.camera_wrap .camera_pag .camera_pag_ul li {
    background: #929497;     
} 
```

我脚本中的这一行会在 5 秒后关闭分页，所以我知道我可以控制它，但我不能反过来 - 在 5 秒或可接受的时间后出现。

```
setTimeout(function() { $('.camera_pag_ul li').hide() }, 5000); 
```

我认为类似下面的内容可能会在 5 秒后显示分页图标，但事实并非如此。

```
<script type="text/javascript">

    $(document).ready(function() {
        setTimeout(function() { $('.camera_pag_ul li').show() }, 5000);
    });

</script> 
```

我也尝试过这种方法，但没有成功。

```
<style>.camera_pag_ul li{display:none;}</style>

$(window).load(function() {
  // When the page has loaded
$("camera_pag_ul li").show(5000);
}); 
```

这是我的脚本，它们出现在页面底部。

```
<script src="js/jquery.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery.js"><\/script>')</script>
    <!-- Camera Slideshow -->
    <script type='text/javascript' src='scripts/jquery.mobile.customized.min.js'></script>
    <script type='text/javascript' src='js/slider/camera1920.js'></script>

    <script type="text/javascript">
        $(function(){

                //dropdown navigation
                $('#navigation_horiz').naviDropDown({
                        dropDownWidth: '165px'  //adjusted to longest title in dropdown = Corporate Responsibility

                });

                //Add bounce effect on Hover to class                    
        $('.imgHover').mouseenter(function () {
                      $(this).effect("bounce", { distance: 3, times:1 }, 900);
                });

                //camera slideshow
                jQuery('#camera_wrap_1').camera({               

            thumbnails: false,  //true will make thumbnails of the image appear on hovering over pagination dots
            pagination: true

        });

        setTimeout(function() { $('.camera_wrap .camera_pag .camera_pag_ul li').hide() }, 5000);   //This works so why can't I get it to do the opposite??

        });
</script> 
```

我不介意我是怎么做的，我只是想让它们消失，直到页面加载。

我找到了解决方案 - 在这里：

通过它们的包装器引用控件：

```
CSS
.camera_pag {
  display: none;
} 
```

然后控制脚本中元素的显示 = 页面加载后显示。

```
JS
jQuery('#camera_wrap_1').camera({       
    /*/     /*sets the height */
    thumbnails: false,  
    pagination: true,
    onLoaded: function() {
        $(".camera_pag").show(); // or .fadeIn();
    }
}); 
```

# android - 捆绑在 Android 中是什么意思？

> ID：14936675
> 
> 赞同：14
> 
> 时间：2013-02-18T12:45:54.093
> 
> 标签：android, bundle

我是 android 应用程序开发的新手，无法理解 bundle 实际上为我们做了什么。

谁能为我解释一下？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T12:53:57.040

> 我是 android 应用程序开发的新手，无法理解 bundle 实际上为我们做了什么。谁能为我解释一下？

用我自己的话来说，你可以把它想象成**`MAP`**将**原始数据类型**和**对象**存储为一对**`key-value`**

`Bundle`最常用于通过各种**`Activities`**. 提供用于存储和从中检索数据的方法**`putType()`**。**`getType()`**

当您想要在设备方向更改时保存数据时，也可以使用 Activity 的生命周期方法的参数（在这种情况下，Activity 被销毁并使用非 null 参数作为 Bundle 再次创建）**`Bundle`**。**`onCreate()`**

更多关于**`Bundle`**它的方法，你可以阅读[`reference at developer.android.com`](http://developer.android.com/reference/android/os/Bundle.html)你应该从哪里开始，然后制作一些演示应用程序来获得经验。

## 使用示例：

**通过活动传递原始数据类型：**

```
Intent i = new Intent(ActivityContext, TargetActivity.class);
Bundle dataMap = new Bundle();
dataMap.putString("key", "value");
dataMap.putInt("key", 1);
i.putExtras(dataMap);
startActivity(i); 
```

**通过活动传递值列表：**

```
Bundle dataMap = new Bundle();
ArrayList<String> s = new ArrayList<String>();
s.add("Hello");
dataMap.putStringArrayList("key", s); // also Integer and CharSequence
i.putExtras(dataMap);
startActivity(i); 
```

**通过活动传递序列化对象：**

```
public class Foo implements Serializable {

   private static final long serialVersionUID = 1L;

   private ArrayList<FooObject> foos;

   public Foo(ArrayList<FooObject> foos) {
      this.foos = foos;
   }

   public ArrayList<FooObject> getFoos() {
      return this.foos;
   }        
}

public class FooObject implements Serializable {

   private static final long serialVersionUID = 1L;

   private int id;

   public FooObject(int id) {
      this.id = id;
   }

   public int getId() {
      return id;
   }

   public void setId(int id) {
      this.id = id;
   }
} 
```

然后：

```
Bundle dataMap = new Bundle();
ArrayList<FooObject> foos = new ArrayList<FooObject>();
foos.add(new FooObject(1));
dataMap.putSerializable("key", new Foo(foos)); 
```

**通过活动传递 Parcelable 对象：**

还有更多代码，所以这里是如何做到这一点的文章：

*   [使用 Parcelable 类在活动之间传递的包裹数据](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

## 如何在目标 Activity 中检索数据：

有一种神奇的方法：**`getIntent()`**返回调用从那里启动 Activity 的 Intent（如果有任何数据也带有扩展数据）。

所以：

```
Bundle dataFromIntent = getIntent().getExtras();
if (dataFromIntent != null) {
   String stringValue = dataFromIntent.getString("key");
   int intValue = dataFromIntent.getInt("key");
   Foo fooObject = (Foo) dataFromIntent.getSerializable("key");
   // getSerializble returns Serializable so we need to cast to appropriate object.
   ArrayList<String> stringArray = dataFromIntent.getStringArrayList("key");
} 
```

**使用 Bundle 作为`onCreate()`方法的参数：**

您将数据存储在**`onSaveInstanceState()`**以下方法中：

```
@Override
public void onSaveInstanceState(Bundle map) {
   map.putString("key", "value");
   map.putInt("key", 1);
} 
```

并在方法中恢复它们**`onCreate()`**（在这种情况下是**`Bundle`**作为参数不为空），如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   if (savedInstanceState != null) {
      String stringValue = savedInstanceState.getString("key");
      int intValue = savedInstanceState.getString("key");
   }
   ...
} 
```

**注意：**您也可以在方法中恢复数据，**`onRestoreInstanceState()`**但这并不常见（它在**`onStart()`**方法之后**`onCreate()`**调用并且在之前调用）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T12:51:13.117

用一般的英语：**“它是一堆东西，或一定数量的材料，捆绑或包裹在一起。”**

在 Android 中也是如此， **“它是键及其值的集合，用于在其中存储某种数据。”**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-04T18:21:28.823

Bundle 一般用于在各个组件之间传递数据。可以通过 getExtras() 方法从 Intent 中检索的 Bundle 类。

您还可以通过 Intent 对象的重载 putExtra() 方法将数据直接添加到 Bundle。Extras 是键/值对，键始终是字符串类型。作为值，您可以使用原始数据类型。

接收组件可以通过 Intent 对象上的 getAction() 和 getData() 方法访问此信息。可以通过 getIntent() 方法检索此 Intent 对象。接收到意图的组件可以使用 getIntent().getExtras() 方法调用来获取额外的数据。

**主要活动**

```
Intent intent = new Intent(MainActivity.this,SecondActivity.class);

Bundle bundle = new Bundle();

bundle.putString(“Key“, myValue);

intent.putExtras(bundle);

startActivity(intent); 
```

**第二活动**

```
Bundle bundle = getIntent().getExtras();

String myValue= bundle.getString(“key“); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-18T12:51:26.713

捆绑或包裹在一起的一组东西或一定数量的材料。它是字典的意思……同一个Bundle是数据的集合。数据可以是任何类型，即 String、int、float、boolean 和任何可序列化的数据。[我们可以使用 bundle Bundle](http://developer.android.com/reference/android/os/Bundle.html)将一个 Activity 的数据共享和保存到另一个。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T12:48:15.847

将其视为一束数据，在将数据从一个 Activity 传递到另一个 Activity 时使用。

[文档](http://developer.android.com/reference/android/os/Bundle.html)将其定义为

> “从字符串值到各种 Parcelable 类型的映射。”

您可以将数据放入 Bundle 中，然后将此 Bundle 传递给多个活动。这很方便，因为您不需要传递单个数据。您将所有数据放入 Bundle 中，然后只需传递 Bundle，而不是单独发送数据。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T12:48:01.460

它实际上是一堆东西。信息：你把东西放在那里（字符串、整数等），然后在使用意图时将它们作为单个参数（包）传递。

然后您的目标（活动）可以再次将它们取出并读取 ID、模式、设置等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-18T12:50:15.033

从 String 值到各种 Parcelable 类型的映射。[点击这里](http://developer.android.com/reference/android/os/Bundle.html)

例子：

```
Intent mIntent = new Intent(this, Example.class);
Bundle mBundle = new Bundle();
mBundle.extras.putString(key, value);
mIntent.putExtras(mBundle); 
```

将价值从一项活动发送到另一项活动。

# ruby-on-rails - 如何使 Rails 发布的 cookie 跨子域工作

> ID：14936676
> 
> 赞同：2
> 
> 时间：2013-02-18T12:45:57.353
> 
> 标签：ruby-on-rails, api, authentication, cookies

当我尝试将 RAILS 应用程序作为我的 API 的后端核心时，我遇到了这种情况。我正在使用“设计”来验证用户身份，这是通过放置会话 cookie 来实现的。这是迄今为止完美的。并考虑到我正在“api.mydomain.com”上构建它

现在，我还有一个在“mydomain.com”上运行的 javascript 应用程序，它对子域上的 API 进行 AJAX 调用。当我进行 API 调用时，我需要让 rails-issued cookie 有效并继续标题......它只是没有。

我尝试了我在谷歌上找到的每一个解决方案，看起来就像把这个

```
Api::Application.config.session_store :cookie_store, key: '_api_session', :domain => ".mydomain.com" 
```

进入我的 config/initializers/session_store.rb 是默认答案。这对我不起作用。我还在谷歌上找到了一些其他建议，我应该把它放在环境文件中。这对我也不起作用。

帮助将不胜感激。

**请注意：**如果这很重要，我正在运行 rails 3.2.11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:18:02.733

尝试使用该`:domain => :all`选项。

来源：[Railsapps 子域教程](http://railsapps.github.com/tutorial-rails-subdomains.html)（搜索“可选：允许跨子域共享会话”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T15:11:11.360

我发现有更好的方法来做到这一点：

```
:domain => "*.domain.com" 
```

# titlebar - 像奇妙清单潮汐SDK这样的标题栏

> ID：14936677
> 
> 赞同：0
> 
> 时间：2013-02-18T12:45:57.700
> 
> 标签：titlebar, tidesdk, wunderlist

首先对不起我的英语，因为我说得不太好！

你能告诉我如何在tideSDK中创建像Wunderlist这样的标题栏吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:55:07.380

你不需要胡思乱想。Wunderlist 的源代码在 Apache 2 许可下是开源的，可在以下位置获得：

[https://github.com/6wunderkinder/wunderlist](https://github.com/6wunderkinder/wunderlist)。

您可以自己查看用户界面，以检查应用程序的构建方式。

# c# - 使用 Monodevelop 在 C# 中文本框的属性行

> ID：14936682
> 
> 赞同：3
> 
> 时间：2013-02-18T12:46:06.970
> 
> 标签：c#, winforms, monodevelop

我正在monodevelop 中编写ac#winform 应用程序，我必须使用属性Lines 将多行文本框的几行的内容设置为特定的字符串值。所以我写了这段代码，在 Visual Studio 中不会产生异常并且可以正常工作，但在单声道中不起作用：

```
public string[] newLines = new string[36]; 

public void Main_Form_Load(object sender, EventArgs e)
    {
      newLines[3] = "</CsOptions>";
      textBox1.Lines = newLines;
    } 
```

特别是指令`textBox1.Lines = newLines;`给出了一个空引用异常，当我删除它时，异常过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:58:09.017

数组将每个元素初始化为其默认值。在您的情况下，每个元素（类型为`string`）都**初始化为`null`**，这与空字符串**不同**`""`。

尽管 .NET 和 mono*都应该*兼容，但在这种特殊情况下，它们可能不兼容。两者之间的处理属性可能存在一些差异`TextBox.Lines`，一个可能的情况是 mono 不检查`null`而 .NET 进行检查。

您应该避免`null`这样做，并始终初始化数组。例如：

```
for(int i = 0; i < newLines.Length; i++){
    newLines[i] = "";
} 
```

# python - 外星人RFID阅读器的Python接口

> ID：14936683
> 
> 赞同：0
> 
> 时间：2013-02-18T12:46:09.573
> 
> 标签：python, rfid, alien

已更正。请参阅下面对我自己的问题的回答。

我正在尝试通过带有 Python 2.7 的 TCP/IP 接口与 Alien RFID 9800 阅读器进行通信。
但是，附加的测试代码并没有超出阅读器登录，阅读器不会处理“获取阅读器名称”命令。
我使用的是默认用户名（外星人）和密码（密码）。外星人界面一切正常。登录交换有问题吗？什么不对？

```
import socket

cmdHost, cmdPort = '192.168.1.106', 23

CmdDelim = '\n'               # Corrected from '\n\r' to '\n'.  Delimiter of Alien commands (sent to reader).
ReaderDelim = '\r\n\0'        # Delimiter of Alien reader responses (received from reader).
CmdPrefix = chr(1)            # Causes Alien reader to suppress prompt on response.

def getResponse( conn ):
    ''' Get the reader's response with correct terminator. '''
    response = ''
    while not response.endswith( ReaderDelim ):
        more = conn.recv( 4096 )
        if not more:
            break
        response += more
    return response

def GetReaderName():
    ''' Log into the reader, get the reader name, then quit. '''
    print 'Sending commands to the Alien reader...'
    cmdSocket = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
    try:
        cmdSocket.connect( (cmdHost, int(cmdPort)) )
    except Exception as inst:
        log( 'Reader Connection Failed: CmdAddr=%s:%d' % (cmdHost, cmdPort) )
        log( '%s' % inst )
        cmdSocket.close()
        return False

    # Read the initial header from the reader.
    response = getResponse( cmdSocket )
    print response

    # UserName
    cmdSocket.sendall( 'alien%s' % CmdDelim )
    response = getResponse( cmdSocket )
    print response

    # Password
    cmdSocket.sendall( 'password%s' % CmdDelim )
    response = getResponse( cmdSocket )
    print response

    # Get ReaderName command
    cmdSocket.sendall( '%sGet ReaderName%s' % (CmdPrefix, CmdDelim) )
    response = getResponse( cmdSocket )
    print response

    # Quit
    cmdSocket.sendall( '%sQuit%s' % (CmdPrefix, CmdDelim) )
    response = getResponse( cmdSocket )
    print response

    cmdSocket.close()
    return True

if __name__ == '__main__':
    GetReaderName() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:57:31.470

你有一些`print response`命令。打印任何东西，还是不打印？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:33:38.600

经过进一步的实验，我可以确认命令终止符只是 '\n' [LF]，而不是 TCP 接口的 '\r\n' [CR][LR]。因此，如果将上面的代码更正为：

```
CmdDelim = '\n' 
```

现在，一切正常。

不幸的是，Alien 文档非常明确地指出 [CR][LF] 是命令终止符。也许这对于串行接口是正确的，但它不适用于 TCP。

# jms - Akka Camel - JMS 消息丢失 - 应该等待 Camel 的初始化吗？

> ID：14936685
> 
> 赞同：2
> 
> 时间：2013-02-18T12:46:10.713
> 
> 标签：jms, apache-camel, akka

我的实验应用程序非常简单，尝试使用 Actors 和 Akka 可以做什么。

在 JVM 启动后，它创建了带有几个普通 Actor 的 Actor 系统，JMS 消费者（akka.camel.Consumer）和 JMS 生产者（akka.camel.Producer）。它在参与者和 JMS 生产者 -> JMS 服务器 -> JMS 消费者之间发送一些消息。它基本上通过 JMS 服务与自己对话。

我不时遇到奇怪的行为：似乎*不时地，应该发送到 JMS 服务器的第一条消息不知何故丢失了*。通过查看我的应用程序日志，我可以看到应用程序正在尝试发送消息，但 JMS 服务器从未收到它。（对于每次运行，我都必须再次启动 JVM&Application）。

[Akka Camel 文档](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html)提到，某些组件可能在开始时未完全初始化：“*某些 Camel 组件可能需要一段时间才能启动，在某些情况下，您可能想知道端点何时被激活并准备好使用。* "

我试图实现以下等待骆驼初始化

```
val system = ActorSystem("actor-system")
val camel = CamelExtension(system)

val jmsConsumer = system.actorOf(Props[JMSConsumer])
val activationFuture = camel.activationFutureFor(jmsConsumer)(timeout = 10 seconds, executor = system.dispatcher)
val result = Await.result(activationFuture,10 seconds) 
```

这似乎有助于解决这个问题。（虽然，现在删除此步骤时，我无法再重新创建此问题...：/）。

我的问题是这是否是确保所有组件完全初始化的正确方法？

*我应该使用*

```
val future = camel.activationFutureFor(actor)(timeout = 10 seconds, executor = system.dispatcher)
Await.result(future, 10 seconds) 
```

*为每个 akka.camel.Producer 和 akka.camel.Consumer 演员*确保一切都正确初始化？

这是我应该做的，还是应该做其他事情？文档并不干净，而且由于问题只是偶尔发生，因此不容易测试......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:53:28.270

在发送任何消息之前，您需要初始化骆驼 JMS 组件和生产者。

```
import static java.util.concurrent.TimeUnit.SECONDS;

import scala.concurrent.Future;

import scala.concurrent.duration.Duration;

import akka.dispatch.OnComplete;

ActorRef producer = system.actorOf(new Props(SimpleProducer.class), "simpleproducer"); 
Timeout timeout = new Timeout(Duration.create(15, SECONDS));

Future<ActorRef> activationFuture = camel.activationFutureFor(producer,timeout,  system.dispatcher());

activationFuture.onComplete(new OnComplete<ActorRef>() {
            @Override
            public void onComplete(Throwable arg0, ActorRef arg1)
                    throws Throwable {

                producer.tell("First!!");
            }
            },system.dispatcher()); 
```

# sql - 我有两个通过某个键关联的表。我需要编写一个查询以根据特定条件从两个表中获取数据

> ID：14936688
> 
> 赞同：1
> 
> 时间：2013-02-18T12:46:14.530
> 
> 标签：sql, sql-server

表结构如下。第一个表是 subusage，下一个是 machinesubusage。两者都与 sub_usage_id 列相关联。我需要选择 subusage.product_key 及其相关的使用计数，如果 subusage.is_standalone 不为空，那么我需要从 subusage.usage_count 获取相关的使用计数，否则相关的使用计数将是该 sub_usage_id 的 machinesubusage 表中的行数。我已经针对以下两种情况编写了查询。我尝试使用 case 和 if 语句来组合这两个查询，但徒劳无功

```
SELECT SU.product_key,COUNT(*) FROM SubUsage SU
INNER JOIN MachineSubUsage MSU ON MSU.sub_usage_id = SU.sub_usage_id
WHERE SU.acct_id = 40897342 GROUP BY SU.product_key

SELECT SU.product_key, SU.usage_count FROM SubUsage SU
INNER JOIN MachineSubUsage MSU ON MSU.sub_usage_id = SU.sub_usage_id
WHERE SU.acct_id = 40897342 GROUP BY SU.product_key, SU.usage_count 
```

表结构：

![在此处输入图像描述](../Images/08edcc388216e36ba1e1c848722fbb0b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:54:19.007

试试这个：

```
SELECT 
  SU.product_key,
  SUM(CASE 
        WHEN su.is_standalone IS NOT NULL THEN su.usage_count
        ELSE MSU.SubUsageCount
      END) AS TotalCount
FROM SubUsage SU
INNER JOIN
(
   SELECT sub_usage_id, COUNT(*) AS SubUsageCount
   FROM  MachineSubUsage
   GROUP BY sub_usage_id
) AS MSU ON MSU.sub_usage_id = SU.sub_usage_id
WHERE SU.acct_id = 40897342 
GROUP BY SU.product_key; 
```

如果您需要在另一个表中包含那些不匹配的产品密钥，请使用`LEFT JOIN`with`ISNULL()`将 null 替换为零：

```
SELECT 
  SU.product_key,
  SUM(CASE 
        WHEN su.is_standalone IS NOT NULL THEN su.usage_count
        ELSE ISNULL(MSU.SubUsageCount, 0)
      END) AS TotalCount
FROM SubUsage SU
LEFT JOIN
(
   SELECT sub_usage_id, COUNT(*) AS SubUsageCount
   FROM  MachineSubUsage
   GROUP BY sub_usage_id
) AS MSU ON MSU.sub_usage_id = SU.sub_usage_id
WHERE SU.acct_id = 40897342 
GROUP BY SU.product_key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:35:52.123

在 SQLServer2005+ 中尝试这个请求

```
SELECT DISTINCT SU.product_key, SU.usage_count, 
       COUNT(*) OVER(PARTITION BY SU.product_key) 
FROM SubUsage SU JOIN MachineSubUsage MSU ON MSU.sub_usage_id = SU.sub_usage_id
WHERE SU.acct_id = 40897342 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:10:31.323

Mahmoud Gamal 发布了似乎是一个很好的答案。我将在阿米特的评论中解释原始案例陈述出了什么问题。这里是：

```
SELECT SU.product_key
, CASE WHEN SU.is_standalone IS NOT NULL THEN SU.usage_count ELSE COUNT(*) END 
FROM SubUsage SU INNER JOIN MachineSubUsage MSU ON MSU.sub_usage_id = SU.sub_usage_id 
WHERE SU.acct_id = 40897342 
GROUP BY SU.product_key, SU.usage_count 
```

应该在错误消息中显示的问题是 SU.is_standalone 包含在 select 子句中，但不包含在 group by 子句中。事实上，如果你做这个简单的更正，你可能会得到你想要的答案。

# jsf-2 - 简单的依赖 selectOneMenus 不起作用

> ID：14936699
> 
> 赞同：0
> 
> 时间：2013-02-18T12:46:34.720
> 
> 标签：jsf-2

我有以下代码，其中显示了两个 SelectOneMenus。第一个菜单将语言作为值，第二个菜单告诉我选择“一个或两个”，如果是 En 作为语言，选择“uno 或 duo”，如果是西班牙语。

我还需要确定我是否选择了项目“two”，如果我现在将语言更改为“Sp”，那么“duo”必须是所选项目。

我怎样才能做到这一点？这是我所拥有的

索引.html：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
                           <h:form id="myForm">
                                    <h:panelGrid columns="4">
                                        <h:outputLabel value="Language:" />
                                        <h:selectOneMenu value="#{myBean.language}">
                                            <f:selectItems value="#{myBean.languages}" />
                                            <f:ajax listener="#{myBean.doUpdate}" render ="myForm" />
                                        </h:selectOneMenu>

                                        <h:outputLabel value="Items:" />
                                        <h:selectOneMenu value="#{myBean.item}">
                                            <f:selectItems value="#{myBean.items}" />
                                            <f:ajax listener="#{myBean.doUpdate}" render ="myForm" />
                                        </h:selectOneMenu>
                                         <h:panelGrid columns="1" id ="show" >
                                            <h:outputLabel value="#{myBean.language} #{myBean.item}"/>
                                        </h:panelGrid>

                                    </h:panelGrid>
                                </h:form>
    </h:body>
</html> 
```

我的豆：

```
package bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.ejb.Stateful;
import javax.enterprise.context.RequestScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name = "myBean")
//@Stateless
@Stateful
@ViewScoped
public class MyBean implements Serializable{

    private List<String> languages;
    private String language;
    private String item;
    private List<String> items;

    public List<String> getItems() {
        return items;
    }

    public void setItems(List<String> items) {
        this.items = items;
    }

    /**
     * init() method for initializing the bean. Is called after constuction.
     */

    @PostConstruct
    private void init() {
    //public MyBean () {
        languages = getAllLanguages();
        language = "en"; //defaultLanguage 
        items = getItemsFromOverview();
    } 

    public String getItem() {
        return item;
    }

    public void setItem(String item) {
        this.item = item;
    }

    public List<String> getLanguages() {
        System.out.println("getLanguages, language " +language);
        return languages;
    }

    public String getLanguage() {
        System.out.println("getLanguage " +language);
        return language;
    }

    public void setLanguage(String language) {
        System.out.println("setLanguage " +language);
        this.language = language;
    }

    public List<String> getAllLanguages() {
        List<String> results = new ArrayList<String>();
        results.add("sp");
        results.add("en");

        if(results != null){
            System.out.println("getting all languages");
        }
        return results;
    }

    public void doUpdate() {

         System.out.println("doUpdate language " +language);
         System.out.println("doUpdate item " +item);

    }

    /**
     * Returns a list of all serialIDs present in the overview.
     * @return 
     */
    private List<String> getItemsFromOverview() {
        List<String> results = new ArrayList<String>();

        if(language.equalsIgnoreCase("en")){
            results.add("one");
            results.add("two");
        }
        else {
            results.add("uno");
            results.add("duo");

        }
                return results;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:16:12.940

这很简单。您忘记更改第二个列表 ( `items`) 的当前值。做喜欢

```
<h:form id="myForm">
    <h:selectOneMenu id="list1" value="#{myBean.language}" actionListener="#{myBean.updateFiledsInList2}">
        <f:selectItems value="#{myBean.languages}" />
        <f:ajax execute="@this" render ="list2 lang" />
    </h:selectOneMenu>
    <h:selectOneMenu id="list2" value="#{myBean.item}" >
        <f:selectItems value="#{myBean.items}" />
        <f:ajax execute="@this" render="item" />
    </h:selectOneMenu>
    <h:outputText id="lang" value="#{myBean.language}"/>
    <h:outputText id="item" value="#{myBean.item}"/>
</h:form> 
```

在 MyBean 中使用以下动作侦听器：

```
public void updateFiledsInList2(ActionEvent event) {
    if(language.equals("en")) {
        items = new ArrayList<String>();
        items.add("one");
        items.add("two");
    } else if(language.equals("es")) {
        items = new ArrayList<String>();
        items.add("uno");
        items.add("dos");
    } else {
        items = null;
    }
} 
```

这就是说，您应该管理您的代码，通过删除`@State...`您的注释`@ManagedBean`（它不是 an `@EJB`）并更好地处理上面提供的示例中的选择（通过 an`@EJB`或在 a 中有简单的列表`@SessionScoped` `@ManagedBean`等）。

要保留项目的选定值，只需在动作侦听器代码中添加一些行（假设项目列表中的项目索引相同并且它们在两种语言中的大小相同）：

```
public void updateFiledsInList2(ActionEvent event) {
    int index = (item == null) ? -1 : items.indexOf(item);
    if(language.equals("en")) {
        items = new ArrayList<String>();
        items.add("one");
        items.add("two");
    } else if(language.equals("es")) {
        items = new ArrayList<String>();
        items.add("uno");
        items.add("dos");
    } else {
        items = null;
    }
    if(index >= 0) {
        item = (items == null) ? null : items.get(index);
    } else {
        item = null;
    }
} 
```

# ms-word - 如何使用 OpenXML 从段落中查找页码？

> ID：14936701
> 
> 赞同：5
> 
> 时间：2013-02-18T12:46:38.713
> 
> 标签：ms-word, document, openxml, paragraph, page-numbering

对于**Paragraph**对象，如何使用 Open XML SDK 2.0 for Microsoft Office 确定它位于哪个页面上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:16:17.957

`OpanXml Sdk`由于这是由客户端处理的（如 MS Word），因此无法获取 word 文档的页码。

但是，如果您正在使用的文档以前由 word 客户端打开并保存回来，那么客户端将添加 `LastRenderedPageBreak`以识别分页符。有关s[的](https://stackoverflow.com/a/14897304/860243)更多信息，请参阅我的回答。`LastRenderedPageBreak`这使您可以计算`LastRenderedPageBreak`段落之前的元素数以获取当前页数。

如果不是这种情况，那么解决您的要求的点头选项是添加带有页码的页脚（可能与您的文档具有相同的颜色以虚拟隐藏它！）。只有一个选项 - 如果您使用`OpenXML sdk`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:42:14.767

@Flowerking：感谢您提供的信息。

因为无论如何我都需要循环所有段落来搜索某个字符串，所以我可以使用以下代码来查找页码：

```
using (var document = WordprocessingDocument.Open(@"c:\test.docx", false))
{
    var paragraphInfos = new List<ParagraphInfo>();

    var paragraphs = document.MainDocumentPart.Document.Descendants<Paragraph>();

    int pageIdx = 1;
    foreach (var paragraph in paragraphs)
    {
        var run = paragraph.GetFirstChild<Run>();

        if (run != null)
        {
            var lastRenderedPageBreak = run.GetFirstChild<LastRenderedPageBreak>();
            var pageBreak = run.GetFirstChild<Break>();
            if (lastRenderedPageBreak != null || pageBreak != null)
            {
                pageIdx++;
            }
        }

        var info = new ParagraphInfo
        {
            Paragraph = paragraph,
            PageNumber = pageIdx
        };

        paragraphInfos.Add(info);
    }

    foreach (var info in paragraphInfos)
    {
        Console.WriteLine("Page {0}/{1} : '{2}'", info.PageNumber, pageIdx, info.Paragraph.InnerText);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T17:06:09.787

这是我为此制作的扩展方法：

```
 public static int GetPageNumber(this OpenXmlElement elem, OpenXmlElement root)
    {
        int pageNbr = 1;
        var tmpElem = elem;
        while (tmpElem != root)
        {
            var sibling = tmpElem.PreviousSibling();
            while (sibling != null)
            {
                pageNbr += sibling.Descendants<LastRenderedPageBreak>().Count();
                sibling = sibling.PreviousSibling();
            }
            tmpElem = tmpElem.Parent;
        }
        return pageNbr;
    } 
```

# java - 如何在 IntelliJ IDEA 中设置多语言项目

> ID：14936709
> 
> 赞同：56
> 
> 时间：2013-02-18T12:47:05.767
> 
> 标签：java, javascript, html, intellij-idea

有没有办法打开/导入包含不同语言源文件的 IntelliJ IDEA 项目？例如，我有 Java (Maven) + HTML + JavaScript，不幸的是，我只能导入 Maven 项目。有没有办法将整个项目作为一个整体打开/导入？

提前致谢！

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2014-10-07T18:19:41.713

将项目导入为 java 项目。然后在“项目结构”框中，单击模块并单击 + 号。这允许您向模块添加例如 Python“方面”。我经常使用它来开发混合的 Java/Python 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:51:18.557

我不认为有办法做到这一点。

您可能必须导入 maven 项目，然后自己添加其余文件夹，配置正确的插件等。

至少这就是我在几个混合了 Java 和 Python 源文件的项目中所做的。

有时，为不同类型的“子项目”简单地定义不同的模块会更好，尤其是当它是一种完全不同的语言并且您碰巧需要设置编译器等时，我遇到了一些 IntelliJ 的问题，而不是当我在一个 Java 项目中混合它们时正确识别我的 Python 模块。当我创建一个单独的模块时，一切都很顺利。

# javascript - Chrome 假设 octet-stream 为 .png 图像

> ID：14936711
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:47:22.537
> 
> 标签：javascript, jquery, asp.net, google-maps, mime-types

我有一个带有**Google Maps API V3**和**ASP.Net**的应用程序，它使用[OverlayView](https://developers.google.com/maps/documentation/javascript/reference?hl=pt-br#OverlayView)在地图上设置自定义图标。

该图标的图像`onAdd`通过使用 JavaScript 设置背景 CSS 属性来设置事件。此图像为**.png**。

这个图标位置经常被更新（$.ajax）改变，此时，图像会再次从服务器下载。这会导致一点点闪烁 - 当另一个正在下载时，图标图像会消失。它应该改变它的位置而不闪烁。

问题是**“为什么浏览器不缓存图像？”** . Chrome 的开发者工具显示这些图像带有 MIME 类型的`"application/octet-stream"`. 在控制台上我看到这个警告：

> 资源解释为图像，但使用 MIME 类型 application/octet-stream 传输：“ [http://localhost:81/Common/Images/Synoptic/bus_b.png](http://localhost:81/Common/Images/Synoptic/bus_b.png) ”

[在这个链接](https://stackoverflow.com/questions/3235649/mime-type-warning-in-chrome-for-png-images)上已经有一个关于这个的问题，但它并没有帮助我。我认为我的问题更具体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:27:00.283

好吧，我找到了解决方案。我使用了`.ashx`文件头并控制了那里的缓存。这是结果：

```
path = context.Request.MapPath(path + context.Request.QueryString["name"]);

if (File.Exists(path))
{
    imageBytes = File.ReadAllBytes(path);

    DateTime dt = DateTime.Now.AddYears(1);

    context.Response.Cache.SetMaxAge(new TimeSpan(dt.ToFileTime()));
    context.Response.Cache.SetCacheability(HttpCacheability.Public);

    context.Response.ContentType = "image/png";
    context.Response.BinaryWrite(imageBytes);  
}
else 
{
    throw new SystemException("Image doesn't exists. '" + path + "'");
} 
```

所以用途是：

```
frmImageCaching.ashx?name=bus_b.png 
```

# visual-studio-lightswitch - 自定义 Lightswitch 自动完成页脚

> ID：14936712
> 
> 赞同：0
> 
> 时间：2013-02-18T12:47:24.073
> 
> 标签：visual-studio-lightswitch, lightswitch-2012

是否可以自定义灯开关自动完成框的页脚？我希望能够在刷新链接上方添加链接或按钮。这将允许我创建一个新项目。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T11:13:50.563

不，恐怕无法自定义开箱即用的 LightSwitch *AutoCompleteBox*控件。您必须编写一个与 ACB 具有相同功能的*控件扩展*，然后将您的额外链接添加到它。

# javascript - 如何使用javascript开始URL？

> ID：14936715
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:47:32.520
> 
> 标签：javascript, asp.net, url

我想获取 URL 的起始部分。就像我有一个 URL **[http://abc.com/HdWedding2013/FlipBook1.aspx?BookID=24&Height=500](http://abc.com/HdWedding2013/FlipBook1.aspx?BookID=24&Height=500)**从这里我想要的是：**[http](http://abc.com/HdWedding2013/)** ://abc.com/HdWedding2013/或**[http://abc.com/](http://abc.com/)** . 我尝试了以下示例，但它给出了所有 URL：

```
alert( document.URL ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:50:53.717

您可以使用`document.location.protocol + '//' + document.domain`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:51:23.450

可能是您正在寻找：`window.location.origin`
或者

```
document.location.protocol+'//www.'+document.location.hostname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:53:04.113

```
alert( window.location.protocol + '://' + window.location.hostname ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T12:53:30.220

获取 abc.com 使用 `location.origin'

参考：[地点](https://developer.mozilla.org/en-US/docs/DOM/window.location)

至于您的应用程序基本路径（[http://abc.com/HdWedding2013/](http://abc.com/HdWedding2013/)），您将不得不使用一些 asp.net 代码

```
alert('<%=ResolveUrl("~") %>'); 
```

# css - css 在 Firefox 和 IE 中下推元素

> ID：14936717
> 
> 赞同：1
> 
> 时间：2013-02-18T12:47:40.837
> 
> 标签：css, internet-explorer, google-chrome, firefox

基本上，我有一个导航栏。当按钮都在屏幕上时，其余的空间被一个通用的 div 填充。

在 chrome 上，这可以正常工作。又名，您在顶部有一个整洁的酒吧。

在 firefox 或 IE 上，它反而会下降一点。请参阅 ff 或 IE 中的小提琴，例如我的意思，如果不明显，请参阅我想要的 chrome。谢谢！

[http://jsfiddle.net/yKKUq/2/](http://jsfiddle.net/yKKUq/2/)

我有一个简单的标题

```
 <div style="width: 100%; min-height: 50px;">
                <ul id="navlist">
                    <li><a>Button</a>

                    </li>
                    <li><a>Button</a>

                    </li>
                </ul>
                <div id="navlistfiller" style=""></div>
            </div> 
```

用CSS：

```
ul#navlist {
    padding:10px;
    font: bold 12px Arial, sans-serif;
    display: inline;
}
ul#navlist li {
    float:left;
    margin-right:20px;
    display:inline-block;
    zoom:1;
    position:relative;
    width:108px;
    height: 50px;
    list-style: none;
    color:#757575;
}
ul#navlist li a {
    display: inline-block;
    vertical-align: middle;
    text-decoration:none;
    padding:5px 10px;
    width:95px;
    height: 40px;
}

ul#navlist li a {
    background:red;
}
ul#navlist li a:hover {
    background:#EAEFF2;
}
ul#navlist li a.current-menu-item {
    color:#fff;
    background:#333366;
}
ul#navlist li a.current-menu-item:hover {
    background:#EAEFF2;
}
#navlistfiller {
    margin-left: 250px;
    height: 50px;
    background-color: green;
    vertical-align: top;
}
html {
    background-color: white;
    margin: 0;
    padding: 0;
}
body {
    min-width: 1200px;
    background-color: #fff;
    color: #333;
    font-size: .85em;
    font-family:"Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:53:21.030

只需`padding`从您的`ul`:

```
ul#navlist {
    font: bold 12px Arial, sans-serif;
    display: inline;
} 
```

这是你的演示：

[http://jsfiddle.net/yKKUq/3/](http://jsfiddle.net/yKKUq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:45:31.273

将以下 CSS 添加到 #navlistfiller

显示：内联块；宽度：108px；

并删除 margin-left:250px;

# android - 了解安卓尺寸

> ID：14936720
> 
> 赞同：1
> 
> 时间：2013-02-18T12:47:49.510
> 
> 标签：android, dimensions, dpi

我有两个设备 Desire HD（217dpi，4,3"）和 Nexus 7（216dpi，7"）。我实际上正在构建菜单并对尺寸感到疯狂。我一般使用 dp（与密度无关的像素）。

我们的设计师希望选项比默认选项大一点，所以我在项目`android:minHeight="100dp"`的底部添加了一个`ListView`。但它在平板电脑和手机上看起来非常不同。这是我将平板电脑屏幕截图调整为 62% 的屏幕截图，因此两个屏幕截图的高度相同。

![两张截图](../Images/f1ca6598e251899ea5b0720aa580e865.png)

然而，这两个选项的高度都是 100dp，但正如您所看到的，在桌子上的间隙非常不同，它们大约为 0.5/1/0.5，看起来不错，但在移动设备上，这是 1/1/1，看起来很糟糕。我不明白为什么会这样。

我也有一个计数器，你可以在黄色框中看到两者都是 100% 缩放的，平板电脑制作一个带有圆角的矩形，而在移动设备上它更像一个圆形。两者都使用相同的形状xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <stroke android:width="2dp"
            android:color="#fff" />
    <solid android:color="#f00" />
    <padding android:left="4dp"
             android:top="2dp"
             android:right="4dp"
             android:bottom="2dp" /> 
    <corners
        android:bottomRightRadius="10dp"
        android:bottomLeftRadius="10dp" 
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp" /> 
</shape> 
```

为什么这些图像看起来如此不同？我试图比较几乎相同的 dpi 值。我认为这两种设备都具有密度 hdpi。所以我不能使用基于 dpi 的单独值文件，我可以使用大前缀，但我不确定这在更大的平板电脑上会是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:58:55.567

发生这种情况是因为两个设备具有相同的 DPI，但像素和屏幕尺寸（以英寸为单位）不同。对于 Android，两者都是 HDPI（因为 216-217dpi）。您可以通过以下方式解决此问题：

1.  为 nexus 7 或 7" 平板电脑创建专用布局。
2.  为 nexus 7 创建专用样式，例如 values-sw600dp/styles.xml
3.  调整布局以添加更大的尺寸。

我认为“谷歌解决方案”将是为平板电脑创建不同的布局，因为你有更多的空间和屏幕。检查 Gmail 或 Google Play 应用程序。

基本上，如果您的应用程序需要在平板电脑上正常运行，您必须为布局和值添加两个新文件夹：

1.  layout-sw600dp ---> nexus 7 或 7" 平板电脑
2.  layout-sw720dp ---> nexus 10 或 10" 平板电脑

希望这有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:02:13.300

使用此在代码中手动设置列表视图的高度

```
 int height= getResources().getDisplayMetrics().density * 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T05:33:38.633

我找到了这种行为的原因。这是该设备上的字体大小设置。它被设置为*巨大*，因此所有单位**SP**的维度都以 1.5 倍数播放。您可以通过设置 -> 显示 -> 字体大小在设置中检查您的设备。

正如我在[此答案](https://stackoverflow.com/a/16558314/995926)中所写，您可以使用以下简单的代码行获得比例因子：

```
float scale = getResources().getConfiguration().fontScale; 
```

我的解决方案是使用该比例因子或不将**SP**与**DP**混合。

# javascript - 将电子表格详细信息打印到 HTML

> ID：14936725
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:09.487
> 
> 标签：javascript, html, google-apps-script

我在 Google Apps Script 上创建了一个项目，上面有教程脚本，但是它不起作用。基本上我希望 HTML 从 Google 电子表格的数据范围中打印数据。

我的 .gs 文件的代码是：

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('Main Page');
}

function getData() {
  return SpreadsheetApp.openById('0AtD2IyQN1tyGdHBiLWExb3NoSHZ2RlAzNTBrS1dQLXc').getRangeByName('dataRange').getValues();
} 
```

我的html代码是：

```
<html>
 <? var data = getData(); ?>
</html> 
```

我对 Google Apps 脚本应用程序相当陌生，并且已经多次查看此代码。我创建的应用程序似乎根本无法运行。谁能为我提供解决方案或解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:54:35.053

恐怕您的代码中有几处是错误的：

1.  您应该使用`return HtmlService.createTemplateFromFile('Main Page').evaluate();`代码来获取 html 页面的结果
2.  getData 返回的值是一个数组，您应该以一种或另一种方式将其转换为 HTML 可以理解的东西……或者在 html 文件中添加一些代码来正确处理数组数据。

例如，一个字符串正在工作

```
function getData() {
  var data = SpreadsheetApp.openById('0AtD2IyQN1tyGdHBiLWExb3NoSHZ2RlAzNTBrS1dQLXc').getRange('testRange').getValues();
  return data.toString().replace(/,/g,'  |  ');
} 
```

3：你的html语法错误，试试这样：

```
<html>
 <?= getData(); ?>
</html> 
```

或者像这样，如果 data 是一个简单的数组，则每个单元格都换行：

（在代码使用中`return data.toString().split(',');`）

```
<? var data = getData();
  for (var i = 0; i < data.length; ++i) { ?>
  <b><?= data[i] ?></b><BR>
<? } ?> 
```

或者如果您将数据保存为**二维**数组，则**在表格中，这是一个完整的示例：**

 **[在这里测试执行](https://script.google.com/macros/s/AKfycbwcV7kSvV3KTmB1urtHj3BUbokg_PQztNrbfua37LRkcEFyER8/exec)

代码 ：

```
function doGet() {
  return HtmlService.createTemplateFromFile('Main Page').evaluate();
}

function getData() {
  var data = SpreadsheetApp.openById('0AtD2IyQN1tyGdHBiLWExb3NoSHZ2RlAzNTBrS1dQLXc').getRange('dataRange').getValues();
  return data;
} 
```

HTML：

```
<table border="5" bordercolor="FFCC00" style="background-color:#dddddd" width="400" cellpadding="5" cellspacing="3">    
<? var data = getData();
  for (var i = 0; i < data.length; ++i) { ?>
  <tr>
<?   for (n = 0; n< data[0].length; ++n) { ?>
  <td><?= data[i][n] ?></td>
<? } }?>
</tr>
</table> 
```

我想这就是全部...我不知道您要展示什么范围，所以我无法进一步提供更多提示...**

# iframe - iframe 在停机的情况下仍然有效吗？

> ID：14936727
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:14.830
> 
> 标签：iframe

我有 2 个站点 domain1.com 和 domain2.com 托管在不同的服务器上。

在 domain1.com 上，我有一个指向 domain2.com 的 iframe 内的页面。domain1.com 的用户应该在“Iframe”页面上停留数小时，以便通过 domain2.com 显示的内容完成一些任务。

现在我想知道如果 domain1.com 关闭几分钟或更长时间（因为服务器/网络问题或维护），用户是否仍然能够在 Iframe 中工作。我不知道如何模拟这种情况我问你的原因。

我想如果 domain1.com 已关闭，当用户单击 iframe/domain2.com 中存在的任何链接时，将导致 iframe 的内容也不可用......或者可能不是？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:52:19.540

如果 domain1 中不需要后台任务（如 AJAX），并且当用户在 domain2 IFrame 中工作时 domain1 和 domain2 之间没有交互（如 HTTP 请求），即使 domain1 关闭，他们也将能够处理它，因为 IFrame独立于主网页。

# jquery - jQuery - 如果单击 DIV 中的文本

> ID：14936729
> 
> 赞同：6
> 
> 时间：2013-02-18T12:48:16.523
> 
> 标签：jquery, css, html, select

我有一些DIV。在这些 DIV 中是一些文本、图像、标签......我需要在单击文本时显示“警报”。不是图像，不是其他标签，不是其他标签中的文本……只是 DIV 中的文本。如何用 jQuery 做到这一点？

[jsFiddle 示例。](http://jsfiddle.net/ynternet/TUnJq/)

HTML

```
<div style="background-color:PapayaWhip;">Some text. 
 <img src="http://ynternet.sk/test2/close_1.jpg" /> 
 <img src="http://ynternet.sk/test2/close_2.jpg" /> 
</div> 
<div style="background-color:Moccasin;">This are letters 
 <em>and this are not.</em> 
 Hello again!
</div> 
<div style="background-color:LightGoldenRodYellow;">
 <img src="http://ynternet.sk/test2/close_1.jpg" />
 <img src="http://ynternet.sk/test2/close_2.jpg" />
 Letters in new line.
 <img src="http://ynternet.sk/test2/close_1.jpg" />
 <img src="http://ynternet.sk/test2/close_2.jpg" /> 
</div> 
<div style="background-color:Wheat;">New letters in another line.</div> 
```

CSS

```
div {
  padding:10px 0px 0px 20px;
  font-family:Verdana;
  height:40px;
}
em{
  color:red;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T12:54:14.230

检查源的类型，如果 div 则意味着它将是直接由 div 包装的文本。如果你想包含模式标签，`em`那么你可以在条件中添加它们。

**[现场演示](http://jsfiddle.net/TUnJq/2/)**

```
$('div').click(function(evt){  
    if(evt.target.tagName == 'DIV')
        alert("div clicked");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T12:53:24.997

您可以使用一些 jQuery 魔术并查看 的子项`div`，但是我会在您的 div 中添加一个`span`or`label`并给它一个类/ID：

```
<span class="letters">
  Letters in new line
</span>

$(".letters").click(function() {
    alert('Clicked');
}); 
```

[http://jsfiddle.net/meNJu/](http://jsfiddle.net/meNJu/)

提供的小提琴显示了如何使用它`children()`以及上面提到的方法。

[http://jsfiddle.net/meNJu/1/](http://jsfiddle.net/meNJu/1/)

使用类而不是 ID 进行演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:52:13.350

您可以停止从 div 的所有子项传播事件：

```
$('div').click(function (event) {
    alert('Text');
});
$('div').children().click(function (event) {
    event.stopPropagation();
}); 
```

[更新了小提琴。](http://jsfiddle.net/TUnJq/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T12:58:58.473

将 Span 与类文本一起使用是否不可行

使用此代码

```
$(".text").click(function() {
 alert("Handler for click() called.");
}); 
```

（通过电话发布的答案，未经测试的代码。帖子将在电脑上进行一次拼写检查）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T12:59:10.887

这很简单：

```
$('div').click(function (e) {

    if ($(this).children().length === 0) {
        // do something
        alert($(this).text());
    }
});

$('div').children().click(function (event) {
    event.stopPropagation();
}); 
```

[演示](http://jsfiddle.net/TUnJq/4/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T13:00:16.160

好吧，如果我正确理解了您要执行的操作，则需要执行以下操作：

html

```
<div>
    <span class="click">This are letters</span>
    <em>and this are not.</em> 
    Hello again!
</div> 
```

jQuery：

```
$('.click').on('click', function(){
    alert($(this).html()):
}); 
```

这只是一个非常简单的例子，但它可以帮助你

# c# - C# SortableList 不在 DataGridView 中排序

> ID：14936731
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:20.477
> 
> 标签：c#, sorting, datagridview, iqueryable

我有一个用于显示项目列表的通用表单。这通常是基于 Linq-2-sql 查询的“IQueryable”，但我希望能够显示任何列表。我已将代码添加到我的项目中，因此我可以使用 SortableLists 而不是默认情况下不支持排序的普通 List。我可以将可排序列表作为 IQueryable 传递，但结果排序不起作用。有没有办法让 SortableList IQueryable 同时保持可排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:34:16.027

我自己找到了一个解决方案：我没有直接使用 IQueryable 作为网格的数据源（我使用 Linq-to-sql 查询），而是通过执行“new SortableList(myQuery.ToList()) 创建一个新的 SortableList "并将其用作数据源。瞧，它排序。

（所以，不，你不能（总是）对 IQueryable 进行排序。）

# generics - 如何描述独立于实现技术的GUI？

> ID：14936732
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:24.487
> 
> 标签：generics, user-interface

我想描述 GUI 及其在域逻辑级别上的交互，独立于实现技术。

是否有一些现有的框架可以支持这项任务并帮助我将抽象的 GUI 描述翻译成 SWT、Javascript 或其他东西？

有人知道 GWT 框架是如何解决这个问题的吗？

也许为此目的一些有用的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T08:47:40.373

我也有同样的问题，但我认为嵌入式 HTML+CSS 可能是一种解决方案，因为它被浏览器广泛使用，而且非常可靠。这是一个名为“librocket”的 C++ 库，描述如下：

> libRocket 是基于 HTML 和 CSS 标准的 C++ 用户界面中间件包。它被设计为满足任何项目界面需求的完整解决方案。

# asterisk - 星号：如何在单个模式中匹配以下数字

> ID：14936742
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:43.533
> 
> 标签：asterisk

我需要匹配 Asterisk 拨号计划中的来电分机号码，这可以是

*   精确的
*   以区域为前缀
*   国家和地区代码

如果我的本地分机是 5321879，我可以接听来电：

1.  0038515321879
2.  015321879
3.  5321879

我怎样才能将每个与单个模式匹配？

是

```
_!5321879
```

可用于 Asterisk 拨号方案

除了拥有 3 个不同的扩展之外，有谁知道其他解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T13:08:32.363

```
^(01|003851)?5321879$ 
```

这应该可以满足您的要求。

# windows-phone-7 - BackgroundTransferRequest 响应头

> ID：14936746
> 
> 赞同：0
> 
> 时间：2013-02-18T12:48:52.340
> 
> 标签：windows-phone-7, windows-phone-8

我正在使用 BackgroundTransferRequest 创建一个 POST 请求，服务器返回一个响应。在此响应中，有一个我需要访问的标头 (ETAG) 女巫。

如何访问 BackgroundTransferRquests 对象上的响应标头。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:04:27.057

BackgroundTransferRequest 不提供任何响应对象，并且我无法获取您感兴趣的数据。作为一种解决方法，在您的文件上传后，您可以通过 WebRequest 对象明确询问您的网络服务有关该文件的信息。或者摆脱那个 BackgroundTransferRequest 并使用 WebRequest 处理一切。

# magento - 以最低价格获取 magento 分组产品

> ID：14936753
> 
> 赞同：0
> 
> 时间：2013-02-18T12:49:18.713
> 
> 标签：magento

我尝试使用此代码[Magento 进行设置：按产品 ID 获取分组产品的最低价格？](https://stackoverflow.com/questions/4679123/magento-get-the-lowest-price-of-a-grouped-product-by-product-id)但似乎无法让它工作..

这是我当前的代码，我需要做什么才能从这个分组产品中获得最低价格？

```
 <?php
                    $cat_id = 33;
                    $catagory_model = Mage::getModel('catalog/category')->load($cat_id);
                    $collection = Mage::getResourceModel('catalog/product_collection');
                $collection->getSelect()->order('rand()');     
                    $collection->addCategoryFilter($catagory_model);
                    $collection->addAttributeToSelect(array('name','small_image', 'price')); //add product attribute to be fetched    
                    if(!empty($collection)) {?>
            <ul>
                    <?php $_columnCount = $this->getColumnCount(); ?>
                <?php $i=0; foreach ($collection->getItems() as $_product): if($i==8){break;}?>
                <?php if ($i++%$_columnCount==0): ?> 
                <?php endif ?>
                    <li class="span4"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product_image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(420); ?>" width="210" height="180"  alt="<?php echo $_product->getName();  ?>" /></a>

                        <span class="product_name"><?php echo $_product->getName();  ?></span> 

                        <span class="product_price">
                    <?php echo Mage::app()->getLocale()->currency(Mage::app()->getStore()->getCurrentCurrencyCode())->getSymbol(). sprintf('%.2f',$_product[price]) ;?>

                        <!--  WANT THE LOWEST PRICE HERE  -->

                        </span>

                        <a class="product_addto" href="<?php echo $_product->getProductUrl() ?>">View Product</a>

                        </li>
                    <?php endforeach; ?>
            </ul>
                        <?php } else { echo 'No products exists';} ?> 
```

先感谢您。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:25:18.807

```
echo round($_product->getPriceModel()->getMinimalPrice($_product),2); 
```

hth

# c# - 使用 LINQ 将日期/周列表拆分为 a 周和 b 周

> ID：14936757
> 
> 赞同：1
> 
> 时间：2013-02-18T12:49:26.730
> 
> 标签：c#, linq

查询中的 datesList 只是日期时间值的列表。

使用 linq 查询/groupby，我将属于一年中某一周的所有这些日子分组到一个分组中。

```
Func<DateTime, int> weekProjector = d =>
CultureInfo.CurrentCulture.Calendar.GetWeekOfYear( d, CalendarWeekRule.FirstDay, DayOfWeek.Monday);

var weeks = (from date in datesList group date by weekProjector(date.Date)).ToList(); 
```

让我们假设周集合包含 8 个并且可以按 A 周和 B 周轮换。这意味着如果用户从 A 周开始，则按值 2 轮换会提供此结果：

AA、BB、AA、BB（8周，每周轮换2次）

AAAA、BBBB（8 周，每周轮换 4 次）

考虑到可以是从 1 到 8 的任意数字的轮换值，我如何将周集合和组/项目或任何日期时间值查询到单独的 weekListA/weekListB 中。

更新：

最终状态是 2 个列表 A 和 B 列表，每个列表都包含来自周集合的日期时间值。

更新 2：在这个样本中，每周轮换的因素为 4：这意味着我有 4 周的 A 型，4 周的 B 型等等

![在此处输入图像描述](../Images/b3995cc1189564d77078d9ca9bd4d6ee.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:17:11.390

我希望我正确地理解了你。

给定一堆日期，按一年中的星期分组：

```
// some testdata
var datesList = Enumerable.Range(0, 8).Select (e => DateTime.Now.AddDays(7 * e)).ToList();

Func<DateTime, int> weekProjector = d =>
    CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(d, CalendarWeekRule.FirstDay, DayOfWeek.Monday);

var weeks = datesList.GroupBy(weekProjector).ToList(); 
```

你应该通过这个查询得到你想要的结果：

```
var result = weeks.OrderBy(w => w.Key)
                  .Select((g, i) => new {WeekType = (i / rotation) % 2, Week = g})
                  .GroupBy(w => w.WeekType)
                  .ToList(); 
```

`rotation`您的“轮换”（`2`或`4`）在哪里，并且是`2`您想要的组数（组`A`和`B`=> 2组）。

您可能想添加到 a`Select`之后`GroupBy`以仅选择您想要的数据，例如：

```
var weekA = result.Where(r => r.Key==0).Select(g => g).SelectMany(g => g).SelectMany(a => a.Week).ToList();
var weekB = result.Where(r => r.Key==1).Select(g => g).SelectMany(g => g).SelectMany(a => a.Week).ToList(); 
```

* * *

一个更具可读性/通用的解决方案：

```
void Rotate<TResult, TGroup>(IEnumerable<TResult> datesList, Func<TResult, TGroup> grouper, int rotation, out List<TResult> listA, out List<TResult> listB)
{
    listA = new List<TResult>();
    listB = new List<TResult>();

    var weeks = datesList.GroupBy(grouper).ToList();

    var c_rotation = 0;
    var c_list = listA;

    using (var en = weeks.GetEnumerator())
        while(en.MoveNext())
        {
            c_list.AddRange((IGrouping<TGroup, TResult>)en.Current);
            c_rotation++;
            if (c_rotation == rotation)
            {
                c_rotation = 0;
                c_list = c_list == listA ? listB : listA;
            }
        }
} 
```

像这样使用它：

```
List<DateTime> listA;
List<DateTime> listB;

Func<DateTime, int> weekProjector = d =>
    CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(d, CalendarWeekRule.FirstDay, DayOfWeek.Monday);

Rotate(datesList, weekProjector, 2, out listA, out listB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:16:48.817

这可能是您正在寻找的，`GroupBy Index % 2`：

```
var abRotations = datesList
    .GroupBy(d => CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(d, CalendarWeekRule.FirstDay, DayOfWeek.Monday))
    .Select((wg, i) => new { WeekGroup = wg, Index = i })
    .GroupBy(x => x.Index % 2);

List<DateTime> A_Rotation = abRotations.First().SelectMany(x => x.WeekGroup).ToList();
List<DateTime> B_Rotation = abRotations.Last().SelectMany(x => x.WeekGroup).ToList(); 
```

[**演示**](http://ideone.com/kpfC5f)

# jquery - 如何以编程方式在 jqPlot 中添加 CanvasOverlay 对象？

> ID：14936758
> 
> 赞同：2
> 
> 时间：2013-02-18T12:49:27.360
> 
> 标签：jquery, jqplot

我正在尝试在 jqPlot 中动态添加 canvasOverlay 对象。我跟着这个链接。[通过canvasOverlay动态在JQPlot中的horizo​​ntalLine和verticalLine](https://stackoverflow.com/questions/13005631/horizontalline-and-verticalline-in-jqplot-dynamically-by-canvasoverlay/13005948#13005948)

对于上述解决方案，我在这里有一个小提琴[http://jsfiddle.net/HbU85/ 。](http://jsfiddle.net/HbU85/)不知何故，垂直线没有被渲染。

## 作品：

```
canvasOverlay: {
                    show: true,
                    objects: [{line:{start:[new Date('2012-05-01').getTime(),0],stop :[new Date('2012-05-10').getTime(),0],
                   lineWidth: 1000,color: 'rgba(255, 0, 0,0.45)',shadow: false,lineCap : 'butt'}}]
                }, 
```

## 不工作：

```
 var myArray = Array();
    myArray.push({line:{start:[new Date('2012-05-01').getTime(),0],stop :[new Date('2012-05-10').getTime(),0],
                   lineWidth: 1000,color: 'rgba(255, 0, 0,0.45)',shadow: false,lineCap : 'butt'}});
.
.
.
.
                canvasOverlay: {
                    show: true,
                    objects: [myArray]
                }, 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:02:38.977

Almost right.

As you are already defining an array `var myArray = Array();`, you do not redefined another one in `canvasOverlay` with `objects: [myArray]`.

Just use `objects: myArray` instead : [http://jsfiddle.net/HbU85/1/](http://jsfiddle.net/HbU85/1/)

# regex - VB.NET 中带拆分的正则表达式

> ID：14936762
> 
> 赞同：3
> 
> 时间：2013-02-18T12:49:36.853
> 
> 标签：regex, vb.net

我想一起使用拆分和正则表达式来分隔一行中的特殊代码。这是我的线：

> 14S15T3C16W17A0-20m0-7T

现在我想将每个项目分开，这些项目可以是例如 14S、15T、7T 等。它由随机长度的数字和该数字后的一个字母组成：

> 例如：125125125125125X 或 11T。

还有一个例外，即 0-，它们将保持原样，也必须分开。

我自己做了一个正则表达式：

```
Dim digits() As String = Regex.Split(line, "([0-9][A-Z]|0-)") 
```

但问题是它只需要1位组合，例如，如果行是11T2B13D，它会这样分隔它：1,1T,2B,1,3D

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:55:25.477

由于每个标记都会有一个字母字符或斜线`-`（对于 的情况`0-`），因此可以使用`Regex.Split`以下正则表达式对其进行拆分：

```
(?<=[-a-zA-Z]) 
```

`(?<=pattern)`是*零宽度*（不消耗文本）正向后视，如果当前位置之前的文本与内部匹配，它将匹配`pattern`。

上面的正则表达式只是检查当前位置之前的字符是字母（大写或小写）`a-zA-Z`还是破折号`-`，并在当前位置拆分。

* * *

或者，您可以`Regex.Matches`使用此正则表达式执行此操作：

```
[0-9]+[A-Za-z]|0- 
```

由于数字可以是任意长的，因此您需要*1 个或多个 quantifier* `+`。其余的应该很清楚，因为它与您尝试过的非常接近。

* * *

两种方法都应该对有效输入具有相同的效果（根据您的规范）。但是，当输入无效时，`Regex.Split`方法将产生无效标记，而`Regex.Matches`方法产生有效标记（它将跳过无效字符/序列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:55:07.480

如果您的目标是将 11T2B13D 拆分为 11T 2B 13D，那么您需要将正则表达式更改为 1 个或多个数字。所以使用 [0-9]+[AZ]|0-，如果 + 运算符（表示多个运算符之一）不存在，请尝试使用 [0-9][0-9] *[AZ]|0-。（*表示零个或多个）。

# perl - Perl SOAP::LITE -- 不能认证？

> ID：14936768
> 
> 赞同：2
> 
> 时间：2013-02-18T12:49:59.937
> 
> 标签：perl, soap, authorization

我正在尝试（但失败了）使用 SOAP::LITE 编写一个简单的测试应用程序来访问 HP Service Manager 站点。（我也尝试过 SOAP::WSDL，但进一步阅读让我相信它确实不是我想做的事情所必需的。）

我是 SOAP 的新手，这些包的新手，以及我正在尝试做的事情的新手，所以我不知道我做错了多少事情，但我想我已经把它提炼成几个在我看来应该可以工作的代码行。我认为基本问题在于身份验证，但我也考虑过这可能是我试图通过 SOAP 调用服务管理器例程的方式。

这是我找到的第一种方法：

```
#!/usr/local/perl5/bin/perl
use SOAP::Lite+trace => 'all';

$USER = "working_user_name";
$PASS = "working_password";

sub SOAP::Transport::HTTP::Client::get_basic_credentials {
        print "###\n";
        print "###\n";
        print "### Authenticating...\n";
        print "###\n";
        print "###\n";
        return $USER => $PASS;
}

my $soap = SOAP::Lite->new(proxy => 'http://<hp_service_manager>:13080/SM/7/ws');
$soap->default_ns('http://schemas.hp.com/SM/7');
my $som = $soap->call('RetrieveList');
die $som->faultstring if ($som->fault);
print $som->result, "\n"; 
```

而我尝试的 LWP 方法：

```
#!/usr/local/perl5/bin/perl
use SOAP::Lite+trace => 'all';
use LWP::UserAgent;
use LWP::Debug;
LWP::Debug::level('+');

$USER = "working_user_name";
$PASS = "working_password";

my @ua_args = (keep_alive => 1);
my @credentials = ($SERVICE_NS, "", $USER, $PASS);
my $schema_ua = LWP::UserAgent->new(@ua_args);
$schema_ua->credentials(@credentials);

my $soap = SOAP::Lite->new(proxy => 'http://<hp_service_manager>:13080/SM/7/ws', @ua_args, credentials => \@credentials);
$soap->default_ns('http://schemas.hp.com/SM/7');
my $som = $soap->call('RetrieveList');
die $som->faultstring if ($som->fault);
print $som->result, "\n"; 
```

问题是，无论我做什么，我都会得到“未经授权”的退货。这是一个 HP Service Manager 安装。我将为我正在尝试做的事情提供 WSDL 条目。我怀疑它是否有用。

```
<soap:operation soapAction="RetrieveList" style="document"/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation> 
```

虽然还有更多的来源，但这是相关的输出，我相信：

```
SOAP::Transport::HTTP::Client::send_receive: HTTP::Request=HASH(0x845c630)
SOAP::Transport::HTTP::Client::send_receive: POST http://<service_manager>:13080/SM/7/ws HTTP/1.1
Accept: text/xml
Accept: multipart/*
Content-Length: 488
Content-Type: text/xml; charset=utf-8
SOAPAction: "#default_ns"

<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/1999/XMLSchema" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><default_ns><c-gensym3 xsi:type="xsd:string">http://schemas.hp.com/SM/7</c-gensym3></default_ns></SOAP-ENV:Body></SOAP-ENV:Envelope>
SOAP::Transport::HTTP::Client::send_receive: HTTP::Response=HASH(0x8597238)
SOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 401 Unauthorized
Connection: close
Date: Fri, 15 Feb 2013 19:42:06 GMT
Server: Apache-Coyote/1.1
WWW-Authenticate: Basic realm="CASM"
Content-Length: 40
Content-Type: text/html;charset=utf-8
Client-Date: Fri, 15 Feb 2013 19:42:07 GMT
Client-Peer: nnn.nn.nn.nn:13080
Client-Response-Num: 1

<HTML><BODY>Not Authorized</BODY></HTML> 
```

任何人都可以帮忙吗？我已经尝试了几乎所有我能找到的示例，然后尝试了这些示例的变体，但我再也没有设法获得任何进一步的信息。在每种情况下，我都会收到“未授权”退货。

谢谢，

肖恩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T14:52:34.780

不要被误导：SOAP::Lite 的调试输出没有显示 Authorization 标头（出于某种原因？）。

“覆盖 get_basic_credentials”- 方法全局设置用户名/密码，而不考虑域和领域。这实际上是一件坏事......

这段（经过测试的）代码应该可以解决您的问题：

```
#!/usr/local/perl5/bin/perl -w
use strict;
use SOAP::Lite+trace => 'all';

my $soap = SOAP::Lite->new('proxy' => [
                        'http://<yourdomain>:<yourport>/<yourpath>',
                        'credentials' => [
                                "<yourdomain>:<yourport>",
                                "<yourrealm>",
                                "<yourusername>",
                                "<yourpassword>"
                        ]
                ]);
my $som = $soap->RetrieveList();
die $som->faultstring if ($som->fault);
print $som->result, "\n"; 
```

其中“ `<yourrealm>`”应设置为“CASM”，“ `<yourpath>`”应设置为“/SM/7/ws”，“ `<yourport>`”应设置为“13080”。

*旧回复：尝试这样做（注意额外的星号）：*

```
*SOAP::Transport::HTTP::Client::get_basic_credentials = sub { 
 return ($USER, $PASS);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:08:47.600

你找到这个指南了吗？[http://www.perl.com/pub/2001/04/24/soap.html#security%20%28ssl,%20basic/digest%20authentication,%20cookiebased%20authentication,%20ticketbased%20authentication,%20access%20control% 29](http://www.perl.com/pub/2001/04/24/soap.html#security%20%28ssl,%20basic/digest%20authentication,%20cookiebased%20authentication,%20ticketbased%20authentication,%20access%20control%29)

还是这个答案？[将 authHeader 添加到 Perl SOAP::Lite 请求](https://stackoverflow.com/questions/4683073/adding-authheader-to-perl-soaplite-request)

```
# create header for requests 
my $authHeader = SOAP::Header->name("xsd:authHeader" => 
\SOAP::Header->value(
    SOAP::Header->name('xsd:user')->value($s7user)->type(''),
    SOAP::Header->name('xsd:password')->value($s7pass)->type(''),
    SOAP::Header->name('xsd:appName')->value('TestApp')->type(''),
    SOAP::Header->name('xsd:appVersion')->value('0.03')->type('')
));

# create data to pass as method paramaters
my $params = SOAP::Data->name('ns:email')->value($s7user)->type('');

# request method
$soap->call('checkLogin', $params, $authHeader); 
```

# python - 如何在 Python 中表示所有导入的模块

> ID：14936771
> 
> 赞同：2
> 
> 时间：2013-02-18T12:50:09.137
> 
> 标签：python

我有一个带有导入的python文件，如下所示：

```
from a import z
from b import y
from c import x
# .... 
```

我有每个模块的字符串表示，但我想从所有导入的模块中获取字符串表示，而不必列出所有模块。简而言之，我想做类似的事情`for name in something_to_repr_all_imported_modules ....`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:52:09.090

到目前为止，有[`sys.modules`](http://docs.python.org/2/library/sys.html#sys.modules)一个所有导入模块的映射...不确定这是否是您要查找的内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:55:24.840

这样做的一个*非常粗略的方法是：*

```
>>> import sys
>>> [x for x in locals().keys() if isinstance(locals()[x], type(sys)) and not x.startswith('__')] 
```

您必须从结果中排除 sys ，但您会得到图片。

我不确定这是否是实现您想要的最佳方式，但我很确定它至少有效。

# c# - 使用 C# 发布到服务器

> ID：14936772
> 
> 赞同：0
> 
> 时间：2013-02-18T12:50:10.197
> 
> 标签：c#

我看到了一个内置 php 的“C”在线编译器。我正在使用 fiddler 2 工具来查看我的网络浏览器发布到服务器的内容。发送到服务器的内容如下所示：

![在此处输入图像描述](../Images/d73359519726abb08e55f662c3469e6a.png)

任何人都可以告诉我，我应该在 C# 中使用 WEBCLIENT 或 WEBREQUEST 将什么发布到服务器，以便我可以生成上述文本。上面写的数字每次我发​​布时都会有所不同。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:08:03.390

正如 Vogel612 所说，数字变化是一个特征。

无论如何，要使用 WebClient 发布到服务器，您需要在引发事件`UploadStringAsync`时调用该方法并编写一个处理程序。`UploadStringCompleted`这是我使用多行创建的一个非常快速的 WinForms 程序，`TextBox`它将 C 代码发布到编译器服务。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Web;

namespace WebClientPostForm
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            PostToServer();
        }

        public void PostToServer()
        {
            TxtOutput.Text += "Initialising... ";

            // string is formatted like this for readability
            string code = "int main()" +
            "{" +
                "printf(\"Hello World!\");" +
            "}";

            // the code is URL-encoded so that characters are escaped
            string data = string.Format("code={0}&lang=c&submit=Execute", HttpUtility.UrlEncode(code));

            WebClient client = new WebClient();

            // I couldn't get this to work unless I set the content type
            client.Headers["Content-Type"] = "application/x-www-form-urlencoded";

            client.UploadStringCompleted += (sender, e) => 
                {
                    TxtOutput.Text += string.Format("Request complete. Response: {0}", e.Result);
                };

            TxtOutput.Text += "Posting Data To Server... ";
            client.UploadStringAsync(new Uri("http://www.compileonline.com/compile.php"), data);
        }
    }
} 
```

# android - Android：如何将我的普通 android 应用程序转换为 android Launcher？

> ID：14936778
> 
> 赞同：4
> 
> 时间：2013-02-18T12:50:28.557
> 
> 标签：android, android-intent, android-launcher

我已经创建了我的 android 应用程序，它显示了所有已安装的应用程序、小部件，现在我可以通过 android 的默认启动器启动这个应用程序，但是我如何将它作为启动器启动。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T14:14:39.417

您可以在清单文件中为您的活动标签指定`android.intent.category.HOME`类别，您希望将哪个活动作为启动器活动启动，例如 -

```
<activity android:name="com.domain.youractivityname">
      <intent-filter>
           <action android:name="android.intent.action.MAIN" />
           <category android:name="android.intent.category.LAUNCHER" />
           <category android:name="android.intent.category.HOME" />
      </intent-filter>
</activity> 
```

希望能帮助到你。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T12:57:48.143

您需要在清单中指定 HOME 类别，例如：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.HOME" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-24T13:55:26.527

对于我的 Android 9，我必须在意图过滤器中添加一些额外的行：

```
 <intent-filter
            >
            <action
                android:name="android.intent.action.MAIN"
                >
            </action>
            <category
                android:name="android.intent.category.HOME"
                >
            </category>
            <category
                android:name="android.intent.category.DEFAULT"
                >
            </category>
            <category
                android:name="android.intent.category.MONKEY"
                >
            </category>
            <category
                android:name="android.intent.category.LAUNCHER_APP"
                >
            </category>
        </intent-filter> 
```

# ios - 应用内的iOS消息系统（聊天系统）

> ID：14936787
> 
> 赞同：4
> 
> 时间：2013-02-18T12:50:59.080
> 
> 标签：ios, xmpp, chat, xmppframework

所以我有我的 iOS 应用程序（它是一个社交网络应用程序），我想添加一个消息和聊天系统。我已经查找了执行此操作的方法，但没有找到一种我可以完全理解或实施的方法，因为大多数方法对于我想要的来说太复杂了。

我有一个“朋友列表”视图控制器，当触摸列表中的一个名称时，一个“消息”视图控制器（就像任何即时消息窗口一样）进入您可以与所选朋友聊天的地方。

我发现这样做的方法是 XMPP 或“TCP 连接”。我尝试理解 XMPP，但对于 XMPP，您需要“登录”等，而这将需要一个额外的 id 或一些会使事情复杂化的东西。我已经有了我的应用内用户 ID——我不想要第二个只是为了聊天。

第二种方法——建立 TCP 连接并通过该连接发送消息——我无法完全理解，也无法找到实现它的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:28:45.103

简单聊天协议中最困难的部分是通知客户端已收到消息的快速方法。例如，使用 REST 或 HTTP 执行此操作需要客户端每隔几秒轮询一次服务器，如果您的应用程序需要扩展，这是低效且不切实际的。

XMPP 当然增加了额外的工作。您的客户端将需要与 XMPP 服务器建立单独的连接，并且您必须找到一种集成身份验证的方法。但是只要客户端打开了一个连接，它就会在消息到达的那一刻得到通知。

虽然聊天与发布-订阅不同，但它们共享相同的设计挑战，即如何在收到消息时通知客户端，而无需客户端轮询。在研究发布-订阅应用程序的选择时，我发现了一张比较 XMPP、RSS 和其他选项的[有用图表。](http://code.google.com/p/pubsubhubbub/wiki/ComparingProtocols)同一个站点对[轮询](http://code.google.com/p/pubsubhubbub/wiki/WhyPollingSucks)提供了很好的解释。同样，这与聊天无关，但您仍然可以使用它来了解问题。

正如您所提到的，另一个选项是保持活动状态的 TCP 连接，服务器可以在响应到达时放置响应。如果你愿意，你甚至可以通过 HTTP 做到这一点。我不知道有任何开箱即用的服务器。（出于我的需要，我选择了 XMPP 和[XMPPFramework](https://github.com/robbiehanson/XMPPFramework)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T06:39:06.773

您可以查看使用 XAMPP 框架的此链接...

***[https://github.com/KanybekMomukeyev/FacebookChat](https://github.com/KanybekMomukeyev/FacebookChat)***

# ruby-on-rails - 访问数组中的变量？

> ID：14936790
> 
> 赞同：-2
> 
> 时间：2013-02-18T12:51:01.163
> 
> 标签：ruby-on-rails, arrays, soap, hash, savon

我有一个 Savon SOAP 会话，在其中我得到一个转换为数组的响应。然后将此响应的一部分存储在包含这样的哈希的变量包中；

```
{
  :cancellation_policies=>nil,
  :contract_id=>"834",
  :hotel_id=>"41298",
  :package_id=>"6b0938e-bf45ed4facda",
  :package_price=>{
    :currency=>"NOK",
    :final_price=>"1400.05",
    :final_price_in_supplier_currency=>"169",
    :original_price=>"1400.05", 
    :original_price_in_supplier_currency=>"169",
    :supplier_currency=>"GBP"
  },
  :rooms=>{
    :room=>{
      :adults_count=>"2",
      :availability=>"Available",
      :description=>{
        :"@xmlns:a"=>"http://schemas.microsoft.com/2003/10/Serialization/Arrays"
      },
      :id=>"6de98b4b-256e-47de-bbd3-700602a16e8e",
      :kids_ages=>{
        :"@xmlns:a"=>"http://schemas.microsoft.com/2003/10/Serialization/Arrays"
      },
      :price=>{
        :currency=>"NOK",
        :final_price=>"1419.05",
        :final_price_in_supplier_currency=>"165",
        :original_price=>"1419.05",
        :original_price_in_supplier_currency=>"165",
        :supplier_currency=>"GBP"
      },
      :room_basis=>"Bed and Breakfast BB",
      :room_basis_original=>"Room and Breakfast (American Buffet Breakfast)", 
      :room_class=>"Standard",
      :room_class_original=>"Double Room",
      :room_type=>"Double",
      :room_type_original=>"Double Room"
    }
  },
  :supplier_id=>"21",
  :supplier_name=>"HTP"
} 
```

当我尝试访问 package[:cancellation_policies] 时发生了奇怪的事情，我收到一条错误消息；无法将符号转换为整数。

我如何访问例如 :cancellation_policies ？

package.inspect 给出；

```
{ :cancellation_policies=>nil, :contract_id=>"834", :hotel_id=>"41298", :package_id=>"4e80e642-13eb-48d6-9f1e-8b35f1c406ca", :package_price=>{:currency=>"NOK", :final_price=>"1677.06", :final_price_in_supplier_currency=>"195", :original_price=>"1677.06", :original_price_in_supplier_currency=>"195", :supplier_currency=>"GBP"}, :rooms=>{:room=>{:adults_count=>"2", :availability=>"Available", :description=>{:"@xmlns:a"=>"http://schemas.microsoft.com/2003/10/Serialization/Arrays"}, :id=>"dce10420-bbc5-471e-b388-03d6bb132e27", :kids_ages=>{:"@xmlns:a"=>"http://schemas.microsoft.com/2003/10/Serialization/Arrays"}, :price=>{:currency=>"NOK", :final_price=>"1677.06", :final_price_in_supplier_currency=>"195", :original_price=>"1677.06", :original_price_in_supplier_currency=>"195", :supplier_currency=>"GBP"}, :room_basis=>"Bed and Breakfast BB", :room_basis_original=>"Breakfast (Full Breakfast)", :room_class=>"Standard", :room_class_original=>"Standard Double - Double", :room_type=>"Double", :room_type_original=>"Standard Double - Double"}}, :supplier_id=>"21", :supplier_name=>"HTP"} 
```

（据我所知，输出与上述相同？）

所以我尝试了；

```
<% package.each do |key, value| %>
<%= key %> is <%= value %>
<% end %> 
```

很好地打印contract_id is 834 hotel_id is 41298

...等等，如果这能澄清什么？

如此临时的事情为我解决了它；

```
package_as_hash = Hash.new 
package.each do |key, value|
package_as_hash[key]  = value
end 
```

高度怀疑它是最有效的方法，但至少它有效......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:41:28.290

由于某种原因，您的包不是哈希。

如果您在控制台中复制并粘贴以下内容：

```
package = {
            :level_1=>"1",
            :rooms=>{
              :level_2=>"2",
              :room=>{
                :level_3=>"3",
              }
            },
          } 
```

您将看到您可以访问任何级别的哈希：

```
package[:level_1]
=> "1" 
package[:rooms][:level_2]
=> "2" 
package[:rooms][:room][:level_3]
=> "3" 
```

但是，如果您不小心更改`{`为`[`：

```
package = [
            :level_1=>"1",
            :rooms=>{
              :level_2=>"2",
              :room=>{
                :level_3=>"3",
              }
            },
          ] 
```

您将获得 Array，这似乎是您面临的错误：

```
package[:level_1]
TypeError: can't convert Symbol into Integer 
```

为了解决您的问题，如果您期望一个哈希，您必须找出为什么您有一个数组：

*   你可以避免包变成一个数组；
*   或者您可以将数组转换为哈希。但是，要做到这一点，您必须了解数组的结构。

# jquery - jQuery 插件 - 在选项中传递函数 - 但作为事件触发

> ID：14936791
> 
> 赞同：1
> 
> 时间：2013-02-18T12:51:01.273
> 
> 标签：jquery, function, arguments, add-on

在编写插件时，您如何传递基于事件的可选函数。我可以通过在调用过程中手动将函数名称作为字符串编写，然后将其作为字符串中的 onclick="" 添加到 this.html() 中，但那是 naff。我想成熟地将该函数作为可选参数传递，并可选择将其添加为点击条件事件

文件

```
<div id="grid"></div>
<script>    
$(function() {
    $("#grid").myaddon({
        "headings" : [
            {
                "title" : "hello",
                "click_callback" : function(){
                    alert('hi');
                }
            },
            {
                "title" : "there"
            }
        ]
    });
});
</script> 
```

和插件本身

```
(function( $ ) {

    var methods = {
        init : function( options ) { 

            var defaults = {
                "title": "text",
                "click_callback": function() {}
            }
            for(var i=0; i<options.headings.length; i++) {
                var heading =  $.extend({},defaults,options.headings[i]);
                this.html("<div id=\"addon"+(parseInt(i))+"\" >" + heading.title + "</div>");
                if (typeof heading.click_callback == 'function') {
                    $("#addon"+(parseInt(i))).click( function() { heading.click_callback.call(this) }); //this doesn't work
                    $("#addon"+(parseInt(i))).click( function() { heading.click_callback.call() });     //this doesn't work
                    $("#addon"+(parseInt(i))).click( heading.click_callback.call());                    //this doesn't work
                    $("#addon"+(parseInt(i))).click( eval(heading.click_callback.call()));              //(in desperation) this doesn't work

                    //(edit)
                    $("#addon"+(parseInt(i))).click(heading.click_callback);                //(!!thanks Robert Fricke!) thanks to the answer from Robert Fricke I know this works
                    //(/edit)
                }
            }               
        }
    }
    $.fn.myaddon = function( method ) {

        // Method calling logic
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } 
        else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } 
        else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.myaddon' );
        }
    };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:58:26.227

试试这些：

```
$("#addon"+(parseInt(i))).click(heading.click_callback); 
$("#addon"+(parseInt(i))).click(function(){heading.click_callback();}); 
```

# java - java Swing中的自动完成搜索组合框

> ID：14936801
> 
> 赞同：1
> 
> 时间：2013-02-18T12:51:31.303
> 
> 标签：java, swing, autocomplete

谁能帮我解决我的问题？我有一个组合框，其中项目来自我的数据库，并且会根据其他组合框而有所不同。这是我的代码

```
 if (City.equals("Taguig")){
        ArrayList<String> Taguig = new ArrayList<String>();
        String sql = "SELECT * FROM Barangay";

    try {
        this.stm = this.con.createStatement();
        this.rs = this.stm.executeQuery(sql);

    while (rs.next()) { 
        String BrTaguig = rs.getString("Taguig"); 
                 Taguig.add(BrTaguig);
       } 
   DefaultComboBoxModel model = new DefaultComboBoxModel(Taguig.toArray());
        this.cmbBarangay.setModel(model);

    } catch (SQLException ex) {
        ex.printStackTrace();
} 
```

我的问题是我希望 cmbBarangay 组合框变成 AutoComplete 组合框，如果我键入第一个字母，它会在里面建议这些单词和这些字母。还有一个自动完成组合框，它将接受不包含在项目列表中的单词。我尝试过搜索，但这对我不起作用，他们的示例主要是 itemlist ex。{苹果、香蕉、芒果}。我找不到处理来自数据库的项目列表的教程。谢谢您的帮助。

# javascript - 使用 Imacros 脚本逐一提取表格的每一行

> ID：14936802
> 
> 赞同：1
> 
> 时间：2013-02-18T12:51:53.347
> 
> 标签：javascript, imacros

使用 Imacros 脚本一一提取表格的每一行

```
TAG POS=2 TYPE=TABLE ATTR=TXT:* EXTRACT=TXT
SET !LOOP 1
SET !DATASOURCE_LINE {{!LOOP}}
TAG POS=13 TYPE=TD ATTR=TXT:* EXTRACT=TXT
SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\";  s.trim()") 
SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\"; s.replace(\"%\",\"\");")
PROMPT {{!VAR1}}
TAG POS=R1 TYPE=TD ATTR=TXT:* EXTRACT=TXT
TAG POS=1 TYPE=INPUT:TEXT ATTR=ID:url EXTRACT=TXT

'TAG POS=4 TYPE=TR ATTR=CLASS:even&&TXT:* EXTRACT=TXT
'TAG POS=5 TYPE=TR ATTR=CLASS:even&&TXT:* EXTRACT=TXT
'URL GOTO={{!COL1}}
'SET !VAR1 EVAL("var s=\"{{!EXTRACT}}\"; var d=parseInt(s);") 

'SET !VAR1 EVAL("var s=\"{{!var1}}\"; s.replace(\"%\",\"\");")
'SET !EXTRACT {{!VAR1}}
'PROMPT {{!VAR1}}
SAVEAS TYPE=EXTRACT FOLDER=* FILE=viken1.csv 
```

我试过这个，但它只给了我一行，但我必须提取表格的每一行，请建议我使用 imacros

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:21:36.620

我认为您必须`SET !LOOP 1` 从宏代码中删除。每次播放脚本时，循环将设置为值 1。但 !LOOP 通常是当前循环编号，因此无需在宏开始时将其设置为 1。它始终设置为 1 并随着循环循环而增加。

# hta - 在 .hta 文件中使用 VBScript

> ID：14936803
> 
> 赞同：0
> 
> 时间：2013-02-18T12:51:54.743
> 
> 标签：hta

我是 VBScripting 新手，但能够使用 VBScript 创建一些 .wsf 文件，这对我有很大帮助。

我决定更进一步，使用 HTML 应用程序使它们更具交互性。我已经对此进行了大量阅读，看起来我无法在 .hta 文件中使用 WScript，但我看不到一个干净、简单的方法来让它工作。我真的很感激一些建议或最佳实践想法来帮助我站稳脚跟。

无论如何，代码是这样的，希望是非常不言自明的：

```
 set fs = WScript.CreateObject("Scripting.FileSystemObject")
    set oShell = CreateObject("Wscript.Shell")
    set objShell = CreateObject("Shell.Application")

    currDir = oShell.currentDirectory
    CreateFolder(C:\TEMP1234")

    Function CreateFolder(foldr)
        dim create
        if(fs.FolderExists(foldr)) then
            Msgbox "Folder already exists: "+foldr
        else
            fs.CreateFolder(foldr)
        end if
    End Function

</script>

<body>
<p>Please make selection</p>
<input type="checkbox" name="Selection" value="1.">Option 1<br>
<input type="checkbox" name="Selection" value="2.">Option 2<br>

<input id=runbutton class="button" type="button" value="OK" name="ok_button" onClick"getSelection">
&nbsp;&nbsp;&nbsp;
<input id=runbutton class="button" type="button" value="Cancel" name="cancel_button" onClick="CancelScript>

</body>

<script language="VBScript">

    Sub getSelection
        if Selection(0).Checked then
            option1
        end if
        if Selection(1).Checked then
            option2
        end if

        if radioChoice="" then
            exit sub
        end if
    end sub

    Sub CancelScript
        Self.Close()
    end sub

    sub option1
        Msgbox "Option 1 Selected"
    end sub

    sub option2
        Msgbox "Option 2 selected"
    end sub

</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:16:31.363

您的代码中的一些详细信息：

您在整个文件中都有脚本。将它们放在`head`and / or`body`中，但不要放在这两个元素之外。

`WScript`对象在 HTA 中不可用：成功`fs = CreateObject("Scripting.FileSystemObject");`了。

这里的引用`CreateFolder(C:\TEMP1234")`是可疑的，它是成对的还是额外的？路径名不能包含引号，因此需要解决一些问题。

第一个有错别字`input`，漏掉`=`了`<input ... onClick"getSelection">`。这很关键，因为`getSelection`从未调用过。

# php - getmxrr() 和 checkdnsrr() 的返回值错误

> ID：14936804
> 
> 赞同：0
> 
> 时间：2013-02-18T12:52:01.130
> 
> 标签：php, dns

状态的[php](http://www.php.net/manual/en/function.getmxrr.php)手册`getmxrr($url, &$mxHosts)`：

> 如果找到任何记录，则返回 TRUE；如果未找到记录或发生错误，则返回 FALSE。

但是对于某些域（例如*www.yahoo.com、example.com.com*）它只返回*true*但返回参数`$mxHosts`为空。两个域都没有 MX 记录。`checkdnsrr()`也返回*true*。

我比较了这些域的 DNS 条目，发现它们都有一个 CNAME 条目，而我测试的其他域以及功能正常工作的域没有它。

为什么会`getmxrr()`给出`checkdnsrr()`错误的结果值？这与 CNAME 有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:04:23.943

```
<?php
getmxrr ('yahoo.com', $out);
print_r($out);

$a = checkdnsrr('yahoo.com', 'MX');
var_dump($a);

Array
(
    [0] => mta7.am0.yahoodns.net
    [1] => mta5.am0.yahoodns.net
    [2] => mta6.am0.yahoodns.net
)
bool(true) 
```

You are right, you must enter domain root without any www.

```
<?php
getmxrr ('www.yahoo.com', $out);
print_r($out);

Array
(
)
bool(true) 
```

# java - 这种 AES 加密是否足够安全？

> ID：14936809
> 
> 赞同：6
> 
> 时间：2013-02-18T12:52:09.527
> 
> 标签：java, security, encryption, aes, block-cipher

我从[http://www.ravenblast.com/index.php/blog/android-password-text-encryption/](http://www.ravenblast.com/index.php/blog/android-password-text-encryption/)获得了这段代码，虽然它有效，但我越来越怀疑它不够安全。根据其他来源，似乎没有任何初始化向量是必需的。

```
public static String encrypt(String toEncrypt, byte[ ] key) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[ ] encryptedBytes = cipher.doFinal(toEncrypt.getBytes());
    String encrypted = Base64.encodeBytes(encryptedBytes);
    return encrypted;
}

public static String decrypt(String encryptedText, byte[ ] key) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] toDecrypt = Base64.decode(encryptedText);
    byte[] encrypted = cipher.doFinal(toDecrypt);
    return new String(encrypted);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T12:57:22.383

是的，它不是很安全。没有 IV 因为没有**区块链**。

AES 算法只能加密 128 字节的块，不管密钥的大小（无关）。这些块如何链接在一起是另一个问题。最简单的方法是将每个块与其他块分开加密（[ECB 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)），就像它们是单独的消息一样。我链接的 Wikipedia 文章告诉您何时以及为什么这不安全，并且首选其他方法（即[CBC 模式）。](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)

当你这样做时，你会得到一个[ECB 模式下](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)`Cipher cipher = Cipher.getInstance("AES");`的 AES 密码。没有直接的危险，但如果您的消息具有重复模式，则可能导致以下情况：

原件：![在此处输入图像描述](../Images/ed888e6feecbc04141b46b91ce9bd5be.png)加密：![加密](../Images/076991ca3385f0ce17e94ce064243b5b.png)

# google-maps - 多个纬度的边界框

> ID：14936817
> 
> 赞同：1
> 
> 时间：2013-02-18T12:52:23.037
> 
> 标签：google-maps

I have a number of lat long list for eg 100.909423828125 4.784468966579362,101.337890625 4.543570279371759,101.019287109375 4.521666342614804,100.931396484375 4.532618393971778,100.909423828125 4.784468966579362,100.909423828125\. 我需要的是基于以米为单位的特定半径为所有这些点构建一个边界框。实现这一目标的最佳机制是什么？谢谢你。

# facebook - 发布图像时重音字符的问题

> ID：14936822
> 
> 赞同：0
> 
> 时间：2013-02-18T12:52:38.420
> 
> 标签：facebook, spring, spring-social

我在发布带有标题的照片时遇到了 Spring Social 的 Facebook 集成问题：重音字符被弄乱了。如果我发布其他内容，口音可以正常工作，问题似乎只影响照片说明。

到目前为止，我发现的该问题的唯一参考是这篇文章： http: [//forum.springsource.org/showthread.php?125252](http://forum.springsource.org/showthread.php?125252-Encoding-problem) -Encoding-problem 而且，如您所见，似乎还没有答案.

有没有其他人偶然发现这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T18:57:12.400

我在 Spring Social Facebook 和 Spring Social Twitter 上都遇到了同样的问题。我正在使用以下模块：

*   spring-social-facebook 1.0.2-RELEASE
*   spring-social-twitter 1.0.3-RELEASE
*   spring-social-core 1.0.2-RELEASE

当我升级到最新的里程碑版本（全部为 1.1.0.M4）时，问题在 Facebook 中得到了解决，但在 Twitter 中却没有，不幸的是。

# django - Django Storages S3 获取每个查询中的所有图像

> ID：14936824
> 
> 赞同：0
> 
> 时间：2013-02-18T12:52:47.217
> 
> 标签：django, amazon-s3, boto

我使用带有 S3Boto 后端的 django-storages 设置我的项目以使用亚马逊 S3。我的模型中的一些有上传到 S3 的 ImageFields，它工作正常。

当我尝试使用 all() 或 filter() 执行 QuerySet 时，问题就出现了。对于每个请求，包括 django-admin 的请求，django 都会从服务器获取查询集中的每个图像。

我所做的唯一更改是将**width_field**和**height_field**添加到 ImageField 以保存高度和宽度，因此我不必从 S3 检索图像来获取此信息。

如果有人知道为什么会发生这种情况或如何调试它，那将非常有帮助。我一直在查看 S3Boto 的代码，但不确定要检查什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T17:36:15.743

这些对图像文件的访问可能源自`django.db.models.fields.files.ImageField.update_dimension_fields`.

这是它的描述：

```
"""
Updates field's width and height fields, if defined.

This method is hooked up to model's post_init signal to update
dimensions after instantiating a model instance.  However, dimensions
won't be updated if the dimensions fields are already populated.  This
avoids unnecessary recalculation when loading an object from the
database.

Dimensions can be forced to update with force=True, which is how
ImageFileDescriptor.__set__ calls this method.
""" 
```

在你的情况下，我会做的是扮演我们自己的 width_field 和 height_field 并在图像上传时只更新一次。这是我将如何实现它（尚未在 S3 的生产环境中测试，但可以使用本地存储）：

```
class ImageCovered(models.Model):
    def __init__(self, *args, **kwargs):
        # read and store original image data
        super(ImageCovered, self).__init__(*args, **kwargs)
        self.__original_cover_image = self.cover_image

    cover_image = models.ImageField(upload_to=get_upload_path, max_length=200, null=True, blank=True,)
    # We should not use ImageField's width_field nor height_field here, since it might call S3 files.
    # Instead, we implement our own fields and update it once only upon image saving.
    cover_image_height = models.PositiveSmallIntegerField(default=0)
    cover_image_width = models.PositiveSmallIntegerField(default=0)

    def save(self):
        super(ImageCovered, self).save()
        # Check if cover_image has been changed
        if self.__original_cover_image != self.cover_image :
            self.cover_image_height = self.cover_image.height
            self.cover_image_width = self.cover_image.width
            self.__original_cover_image = self.cover_image #replace original data
            super(ImageCovered, self).save(update_fields=('cover_image_height', 'cover_image_width',)) 
```

# java - 将当前选择的选项作为文本/字符串获取 Selenium + Java 中的下拉菜单

> ID：14936825
> 
> 赞同：2
> 
> 时间：2013-02-18T12:52:47.760
> 
> 标签：java, selenium-webdriver, automated-tests

我有一种情况，我需要从下拉列表中以文本或字符串的形式获取当前选择，并对其进行比较以进行进一步的断言。但是当我尝试 getText() 时，我会在下拉列表中获得完整的项目列表。如何从下拉列表中获取当前选择的项目？

希望我的问题是有道理的，请让我知道是否有人以前做过。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:10:38.627

这是对我有用的代码

```
Select comboBox = new Select(driver.findElement(locator);
String selectedComboValue = comboBox.getFirstSelectedOption().getText(); 
```

希望它也能帮助别人！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:03:07.800

**Try this code:**

```
 //Assume driver initialized properly some where else
  Select sel = new Select(driver.findElement(By.xpath(Dropdown locator Id)));
  String strCurrentValue = sel.getFirstSelectedOption();
  //Print the Currently selected value
  System.out.println(strCurrentValue); 
```

Use the above value for assertion purpose.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-08T05:46:26.417

您可以在 selenium 中使用以下选项来获取文本值：

```
Driver.findElement(By.id("id value")).getVisibleText("enter value name"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T04:43:15.243

如果您知道要查找的文本....这对我有用

```
public String getValueFromDropDown(WebElement element, String compareText) {
        List<WebElement> options = new Select(element).getAllSelectedOptions(); 
    for (WebElement option : options){
        if (option.getText().equals(compareText)){
            return option.getText();
        }
    }
    return null;
} 
```

注意：其他答案抓取第一个选定的项目。这将检查所有可用选项。

# android - 如何从列表中获取介于两者之间的项目

> ID：14936828
> 
> 赞同：0
> 
> 时间：2013-02-18T12:53:00.297
> 
> 标签：android, android-listview

我有一个数组列表，我必须在列表之间获取一些项目，例如，一个包含 50 个项目的列表，我必须显示从 35 到 45 或其他范围的几个项目。如何从列表中获取项目序列。，

任何的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:58:59.740

没有序列获取。在循环中使用 get。例如：

```
for (int i = 0; i < myList.size(); i++) {
    myVar[i] = myList.get(i);  //stupid example... I know.
} 
```

在你的情况下，你可以这样做：

```
for (int i = 35; (i < myList.size() || i < 45); i++) {
    myVar[i-35] = myList.get(i);  //stupid example... I know.
} 
```

但是将这些*神奇的数字*放入变量中。

编辑：

```
for (int i = lowerBorder; (i < myList.size() || i < upperBorder); i++) {
    myVar[i-lowerBorder] = myList.get(i);  //stupid example... I know.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:25:17.790

这是我通常会做的。您首先将 ArrayList 转换为 Array。例如..

```
ArrayList<Integer> arrList=new ArrayList<Integer>(); //Creating ArrayList
arrList.add(1); arrList.add(100); arrList.add(1000); //Adding items to ArrayList
Integer[] intArr=arrList.toArray(new Integer[arrList.size()]); //Convert ArrayList to Array 
```

现在您所要做的就是像访问任何其他整数数组一样访问 intArray。例如，intArr[3] 会给你 1000。

# android - 从android中的byte []创建灰度位图图像？

> ID：14936829
> 
> 赞同：2
> 
> 时间：2013-02-18T12:53:00.880
> 
> 标签：android

我必须从 byte[] 创建灰度位图图像。我尝试了更多，但我无法

获得成功。如果有任何解决方案，请加我你的成功。谢谢分配！！

# c# - 使用计划任务从 C# 运行 ImageMagick

> ID：14936834
> 
> 赞同：0
> 
> 时间：2013-02-18T12:53:16.213
> 
> 标签：c#, process, command, cmd, imagemagick

我有一个将 PDF-s 转换为图像的程序。手动运行程序时，一切正常。但是每当我尝试将程序作为计划任务运行时，ImageMagick 或 cmd（不确定）拒绝启动并跳过该步骤，导致程序停止。

我尝试在不同的用户下运行它（计划任务和以具有特权的用户身份启动进程），但似乎没有任何效果，我不理解或不知道下一步从哪里开始。

我最好的猜测是这与用户安全有关，并且不允许从 C# 中的进程/cmd 运行 imagemagick。

代码：

```
string args = string.Format("/k convert -density 200 \"{0}\" -quality 40 \"{1}\\{2}\"", file.FullName, imageFolder, file.Name.Replace("pdf", "png"));
using (Process proc = new Process {
    StartInfo = {
        Arguments = args,
        FileName = @"CMD.exe",
        UseShellExecute = false,
        CreateNoWindow = true,
        RedirectStandardOutput = true,
        RedirectStandardError = true
    }
}) {
    proc.OutputDataReceived += new DataReceivedEventHandler(p_OutputDataReceived);
    proc.ErrorDataReceived += new DataReceivedEventHandler(p_ErrorDataReceived);
    proc.Start();
    proc.WaitForExit(5000);
    proc.Kill();
}
static void p_OutputDataReceived(object sender, DataReceivedEventArgs e) {
    using (StreamWriter sw = new StreamWriter(Program.BaseFolder + "\\log.txt")) {
        sw.WriteLine(e.Data);
    }
}
static void p_ErrorDataReceived(object sender, DataReceivedEventArgs e) {
    using (StreamWriter sw = new StreamWriter(Program.BaseFolder + "\\log.txt")) {
        sw.WriteLine(e.Data);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:09:19.000

您正在运行 cmd.exe 作为文件名。您似乎没有指定要在任何地方运行的实际可执行文件。我建议尝试更换：

```
FileName = @"CMD.exe" 
```

和

```
FileName = @"<the executable you want to run>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:17:36.947

似乎*调度*任务和用户不共享相同的环境路径。

所以我重新安装了 ImageMagick、GhostScript 并在程序中使用了绝对路径。这解决了我的问题。但我并不完全知道我所做的所有这三件事，使用绝对路径*可能*单独解决它。

还删除了计时器`proc.WaitForExit()`，`proc.Kill()`因为该过程不再启动`CMD.exe`

```
string args = string.Format("-density 200 \"{0}\" -quality 40 \"{1}\\{2}\"", file.FullName, imageFolder, file.Name.Replace("pdf", "png"));
using (Process proc = new Process {
    StartInfo = {
        Arguments = args,
        FileName = @"c:\imagemagick\convert",
        UseShellExecute = false,
        CreateNoWindow = true,
        RedirectStandardOutput = true,
        RedirectStandardError = true
    }
}) {
    proc.OutputDataReceived += new DataReceivedEventHandler(p_OutputDataReceived);
    proc.ErrorDataReceived += new DataReceivedEventHandler(p_ErrorDataReceived);
    proc.Start();
    proc.WaitForExit();
} 
```

# node.js - 从外部站点提取所有图像 [Node.js]

> ID：14936841
> 
> 赞同：0
> 
> 时间：2013-02-18T12:53:35.277
> 
> 标签：node.js, httprequest

我正在编写一个从网站获取所有图像的代码，然后将该图像作为字符串发送到浏览器，但不起作用！

我正在尝试使用 http 模块来创建服务器，获取 pinterest 的主页面，匹配所有图像标签，将每个匹配项存储在一个数组中，最后发送它。

这是代码：

```
var http = require('http')
  , options = {
        host: 'www.pinterest.com'
      , port: 80
      , path: '/'
      , method: 'GET'
    }
  , images = [ ]
  ;

http.createServer( function ( request, response ) {

  http.request( options, function ( res ) {
    res.setEncoding( 'utf8' );
    res.on( 'data', function ( chunk ) {

      matches.push( chunk.match(/<img[^>]+src="([^">]+)/g) );

    });
  }).on('error', function(e) {
    console.log('problem with request: ' + e.message);
  });

  response.writeHead( 200, { 'Content-Type' : 'text/html' } );

  response.end( images.toString() );

}).listen(8888); 
```

我在控制台中没有任何错误，但一分钟后，控制台打印：

`problem with request: socket hang up`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:34:31.693

即使你已经解决了你的问题，尝试使用[Cheerio](https://github.com/MatthewMueller/cheerio)包也容易得多。这是我见过的最好的类似 jQuery 的 Node 包，非常完整。

您将加载远程 HTML，然后过滤图像，例如...

```
var imageUrl = $("img").attr("src"); 
```

此外，在事件中解析 HTML`data`可能会给你标签块，这是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:13:59.820

我认为您的正则表达式有问题。无论如何，这个方法会给你带来数据：

```
var http = require('http')
  , options = {
    host: 'pinterest.com'
  , port: 80
  , path: '/'
  , method: 'GET'
}
  , images = [ ];

http.createServer( function ( request, response ) {

var req = http.get(options, function(res){
    res.setEncoding('utf8');
    res.on('data', function (chunk) {
        images.push( chunk.match(/<img[^>]+src="([^">]+)/g) );
    }).on('end', function(){
        response.writeHead( 200, { 'Content-Type' : 'text/javascript' } );
        response.end(images.toString());
    });
});

req.on('error', function(error){
    console.log('error: ' + error.message);
    response.writeHead( 200, { 'Content-Type' : 'text/html' } );
    response.end('error: ' + error.message);
});

}).listen(8888); 
```

我在这里使用了`http.get`方法而不是`http.request`

# javascript - Javascript 控制台：未捕获的 TypeError：无法读取未定义的属性“safari”

> ID：14936842
> 
> 赞同：2
> 
> 时间：2013-02-18T12:53:40.930
> 
> 标签：javascript, jquery, jquery-ui

我最近想优化我的页面加载，所以我从常规的 javascript 文件切换到最小化的文件。除了这个 jquery.ui 文件之外，它们都工作正常。当我将我的 ui 文件切换到最小化的文件时，我在 chrome 的 javascript 控制台中收到一个错误，内容如下：

```
Uncaught TypeError: Cannot read property 'safari' of undefined 
```

我不确定为什么会出现此错误，因为在我从常规 jquery.ui 切换到最小化的之前，它工作得很好。

谢谢，

槊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:56:19.340

答案是在**jQuery 1.9**中属性[`$.browser`](http://api.jquery.com/jQuery.browser/)被移除了。

您应该更新最小化的*jQuery UI*以与新版本的 jQuery 兼容。

**REF:** [jQuery.browser: Javascript Uncaught TypeError](https://stackoverflow.com/questions/14337859/jquery-browser-javascript-uncaught-typeerror/14338019#14338019)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:56:26.520

您正在使用 jQuery 1.9.1，它[不再包含`jQuery.browser`property](http://api.jquery.com/jQuery.browser/)。您要么需要切换回旧版本的 jQuery (< 1.9)，要么使用[migrate 插件](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:56:57.643

jQuery UI 正在引用`$.browser`，即`undefined`. 您最小化的 UI 文件显然适用于旧版本的 jQuery 。

# prolog - 将算术运算符应用于值列表

> ID：14936843
> 
> 赞同：1
> 
> 时间：2013-02-18T12:53:43.297
> 
> 标签：prolog

假设我有值列表，我想对每个值应用算术运算符。对于像加法这样的二元运算符，这意味着如下：

```
add_lists([],[],[]).
add_lists([A|TA],[B|TB],[R|TR]) :- R is A+B,
                                   add_lists(TA,TB,TR). 
```

现在我想写一些类似的东西：

```
?- arithop_lists(+,[1,2,3],[0.2,-2,100],R). 
```

这有效：

```
arithop_lists(_Op,[],[],[]).
arithop_lists(Op,[A|TA],[B|TB],[R|TR]) :- E =.. [A,Op,B], R is E,
                                          arithop_lists(Op,TA,TB,TR). 
```

但我非常沮丧，因为我找不到更简单的方法来做到这一点。我想不出一个`findall`不使用`member`. `=..`更重要的是，如果不调用每对操作数，我无法弄清楚如何做到这一点。

我最初的感觉是它可以用 来完成`maplist`，而且我知道它可以完成，但我不知道是否使用`maplist`and`lambda`是一个 hack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:16:37.710

我认为更好的方法，效率方面，应该是

```
add(A, B, C) :- C is A + B.
mul(A, B, C) :- C is A * B. 
```

产量

```
?- X = add, maplist(X, [1,2,3], [0.2,-2,100], R).
X = add,
R = [1.2, 0, 103].

?- X = mul, maplist(X, [1,2,3], [0.2,-2,100], R).
X = mul,
R = [0.2, -4, 300]. 
```

*编辑*库（[apply_macros](http://www.swi-prolog.org/pldoc/doc/swi/library/apply_macros.pl)）可能是高效评估的蓝图（通过重写）。数值算法库可以使用它来获得最大效率。当然，这样的*优化*应该在*正确性*之后推迟。

# c# - 创建带有箭头的自定义工具提示

> ID：14936847
> 
> 赞同：1
> 
> 时间：2013-02-18T12:53:57.833
> 
> 标签：c#, .net, vb.net, tooltip

是否可以使用箭头制作自定义控件，使其看起来像这样： ![在此处输入图像描述](../Images/f4917d050b6b8a20f76b88bf33efc8af.png)

我唯一的问题是创建箭头，因为控件的内容很容易插入。

我发现的最接近的是：http: [//www.componentone.com/SuperProducts/SuperTooltipWinForms/](http://www.componentone.com/SuperProducts/SuperTooltipWinForms/)但我不希望使用预构建的控件，它是一个共享软件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:08:04.847

工具提示是`ContentControl`s，这意味着它们可以采用任何单个对象（例如 a `StackPanel`），所以是的，这是可能的。

我可能会考虑在没有填充/边距的情况下将三角形`Shape`和`Grid`/添加到 StackPanel，因此两者一起运行。`StackPanel`在内部 Grid/StackPanel 内，按照任何正常的施工工作，放置您的`TextBox`es、`TextBlock`s、 s 或您拥有的东西。`Label`MS 的[工具提示页面](http://msdn.microsoft.com/en-AU/library/system.windows.controls.tooltip.aspx)提供了一个带有图像的示例（靠近页面底部）。

或者，您可以使用[ControlTemplate自定义工具提示本身](http://msdn.microsoft.com/en-AU/library/ms745107.aspx)

编辑：刚刚注意到你在 WinForms 空间。这适用于 WPF。我不确定共享了多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T13:10:11.283

The easiest way I found that works is using a rectangle with a triangle image brush. That's the easy part. There's still two issues I'm figuring out myself, and those are:

1.  Positioning the arrowhead so that it is directly below target object. This can partially be remedied by using a solution I found here: [How to position tooltip bottom center](https://stackoverflow.com/questions/10972335/how-to-position-tooltip-bottom-center). It does not, however, move the arrowhead, but the ToolTip itself. You can horizontally align the arrow in center, but if the ToolTip doesn't have enough room to be centered, the arrow will not appear directly under the target object.
2.  Getting the arrowhead to appear above ToolTip box when placement is down and below when placement is up. E.g., in order to accommodate free space, the ToolTip may appear above the target instead of below it. You can use triggers to control which row the element is in, assuming the ToolTip layout is a grid and those are the only placement positions you wish to support.

I haven't tested adding a drop shadow yet, but if yours doesn't show, you could try adding a margin to the ToolTip parent border (doesn't matter because it will never conflict with anything).

For a rectangle with an image brush, you can refer to an article I wrote on CodeProject (it's very simple).

[http://www.codeproject.com/Articles/1103396/Image-Controls-Using-Dynamic-Colors](http://www.codeproject.com/Articles/1103396/Image-Controls-Using-Dynamic-Colors)

[![enter image description here](../Images/d7aaa89739577d3f2d6daa59082dfb25.png)](https://i.stack.imgur.com/A0p8z.png)

The ToolTip in this example is getting cut off because it's at the very edge of the window. The ToolTip target should be the plus icon, but it's placement is being pushed to the right. Ideally, we want a way to move just the arrowhead back so that it's directly underneath. I have edited the example picture to show the ideal result:

[![enter image description here](../Images/c449311938b48e0734505a4f8d48547a.png)](https://i.stack.imgur.com/9Td80.png)

As a side note, if your arrowhead requires a border, you can swap the rectangle out with a path object. You'd just have to know which path to draw :p

# iphone - 带日期的 XML 解析（参数）

> ID：14936848
> 
> 赞同：1
> 
> 时间：2013-02-18T12:54:04.043
> 
> 标签：iphone, ios, nsurlconnection, iphone-developer-program

我正在尝试解析 xml，但我有一个问题：

```
NSString *url = [NSString stringWithFormat:@"http://ipadress/web_service/list.php?DATE=%@",dateSinc];
NSMutableURLRequest *request =[[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"GET"];

NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];
if (conn) {
    webData = [[NSMutableData data] retain];
}
else{

} 
```

当 dateSinc 是**2013-02-04**示例时，它可以工作，但在**2013-02-04 09:47:00**时它不起作用（连接没有响应）......但在浏览器中工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:44:05.887

我认为问题与未正确编码 URL 有关，因此 Web 服务器没有看到您想要的日期：

```
NSString *url = [NSString stringWithFormat:@"http://ipadress/web_service/list.php?DATE=%@",dateSinc];
NSString *encodedURL = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSMutableURLRequest *request =[[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:encodedURL]];
// etc. 
```

# c# - 从 C# 中的 xml 中取出一些数据

> ID：14936855
> 
> 赞同：0
> 
> 时间：2013-02-18T12:54:16.950
> 
> 标签：c#, xml, treelist

我有一个具有下一个结构的 xml：

```
<main>
   <students>
      <student>
           <name> John </name>
           <phone> 123 </phone>
           <courses>
                  <course>
                       <mark> 5 </mark>
                        <room> 11D </room> 
                        <name> Math </name>
                  </course>
                  <course>
                       <mark> 8 </mark>
                        <room> 12a </room> 
                        <name> Literature </name>
                  </course>
           </courses>
      </student>

      <student>
           <name> Terry </name>
           <phone> 332 </phone>
           <courses>
                  <course>
                       <mark> 9 </mark>
                        <room> 12D </room> 
                        <name> Math </name>
                  </course>
                  <course>
                       <mark> 4 </mark>
                        <room> 2a </room> 
                        <name> Literature </name>
                  </course>
           </courses>
      </student>
   </students>

   <profs>
   ....
   </profs>
</main> 
```

如何获取这种格式的信息：

约翰->数学，5；文学，8 特里 -> 数学，9；文学，4

我想要做的是创建一个这样的树列表：

约翰 | **_****数学 - 5 |*****_**文学 - 8 特里 | **_****数学 - 9 |*****_**文学 - 4******

 ******我管理它以提取学生的姓名并将它们作为节点放在树列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:54:52.187

看看 XElement 类看看这个[例子](http://www.c-sharpcorner.com/UploadFile/mahesh/xLinkDoc06202007130827PM/xLinkDoc.aspx)

您可以遍历节点，甚至可以为此定义 linq 查询：

```
 XElement allData = XElement.Load("Authors.xml"); 
        if (allData != null) 
        { 
            IEnumerable<XElement> authors = allData.Descendants("Author"); 
            foreach(XElement author in authors) 
                Console.WriteLine((string)author); 
        } 
```

看看这个[例子](http://www.dotnetperls.com/xelement)：

```
 string t = "Some title";
    var v = from page in _x.Elements("SitePage")
        where t == page.Element("Title").Value
        select page; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:05:03.357

Okay so what you want is essentially a dictionary holding a string and another dictionary holding a string and a list.

```
var xml = XElement.Parse("");
var students = xml.Descendants("student");

students.ToDictionary(x => x.Element("name").Value,
    x => x.Descendants("course")
        .ToDictionary(y => y.Element("name").Value,
            y => int.Parse(y.Element("mark").Value))); 
```

This creates a `Dictionary<string, Dictionary<string, int>>` where the first key is your student's name, and the second is a dictionary of course names and marks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:09:06.617

```
var allData = XElement.Parse("");
var query = from student in allData.Descendants("student")
            let name = student.Element("name").Value
            select new {
                        StudentName = name , 
                        Courses = 
                                 (from course in student.Descendants("course")
                                  let mark = course.Element("mark").Value
                                  let courseName = course.Element("name").Value
                                  select new { 
                                          CourseName = courseName , 
                                          Mark = mark }
                                  )
                         }; 
```

您可能需要检查空值。我知道这不是很容易调试。

**[编辑]** `allData.Descendants("student")`不为`"student"`大写。

测试 ：

```
foreach (var student in query)
{
    Console.WriteLine(student.StudentName);
    foreach (var course in student.Courses)
    {
        Console.WriteLine(string.Format(" - {0} => {1}", course.CourseName, course.Mark));
    }
} 
```******

# java - 打印二叉树中的所有根到叶路径

> ID：14936861
> 
> 赞同：18
> 
> 时间：2013-02-18T12:54:42.183
> 
> 标签：java, tree, binary-tree

我正在尝试使用 java 在二叉树中打印所有根到叶路径。

```
public void printAllRootToLeafPaths(Node node,ArrayList path) 
{
    if(node==null)
    {
        return;
    }
    path.add(node.data);

    if(node.left==null && node.right==null)
    {
        System.out.println(path);
        return;
    }
    else
    {
        printAllRootToLeafPaths(node.left,path);
        printAllRootToLeafPaths(node.right,path);
    }      
} 
```

在主要方法中：

```
 bst.printAllRootToLeafPaths(root, new ArrayList()); 
```

但它给出了错误的输出。

给定树：

```
 5
  / \
 /   \
1     8
 \    /\
  \  /  \
  3  6   9 
```

预期输出：

[5, 1, 3]

[5, 8, 6]

[5、8、9]

但是输出产生了：

[5, 1, 3]

[5、1、3、8、6]

[5、1、3、8、6、9]

有没有人能看出来...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-18T12:58:40.253

调用递归方法：

```
printAllRootToLeafPaths(node.left, new ArrayList(path));
printAllRootToLeafPaths(node.right, new ArrayList(path)); 
```

当您传递`path`( 而不是`new ArrayList(path)`在所有方法调用中使用单个对象时，会发生什么，这意味着，当您返回原始调用者时，该对象的状态与原来不同。

您只需要创建一个新对象并将其初始化为原始值。这样原始对象就不会被修改。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-25T18:10:37.773

```
public void PrintAllPossiblePath(Node node,List<Node> nodelist)
{
    if(node != null)
    {
            nodelist.add(node);
            if(node.left != null)
            {
                PrintAllPossiblePath(node.left,nodelist);
            }
            if(node.right != null)
            {
                PrintAllPossiblePath(node.right,nodelist);
            }
            else if(node.left == null && node.right == null)
            {

            for(int i=0;i<nodelist.size();i++)
            {
                System.out.print(nodelist.get(i)._Value);
            }
            System.out.println();
            }
            nodelist.remove(node);
    }
} 
```

`nodelist.remove(node)`是关键，它会在打印相应的路径后删除元素

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-18T12:56:51.343

您正在递归地传递您的列表，但这是一个可变对象，因此所有调用都会修改它（通过调用`List.add`）并破坏您的结果。尝试将参数克隆/复制`path`到所有递归调用，以便为每个分支 (harhar) 提供自己的上下文。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-29T09:00:32.717

你也可以这样做。这是我的Java代码。

```
public void printPaths(Node r,ArrayList arr)
{
    if(r==null)
    {
        return;
    }
    arr.add(r.data);
    if(r.left==null && r.right==null)
    {
        printlnArray(arr);
    }
    else
    {
        printPaths(r.left,arr);
        printPaths(r.right,arr);
    }

     arr.remove(arr.size()-1);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-18T10:01:39.933

这是正确的实现

```
public static <T extends Comparable<? super T>> List<List<T>> printAllPaths(BinaryTreeNode<T> node) {
    List <List<T>> paths = new ArrayList<List<T>>();
    doPrintAllPaths(node, paths, new ArrayList<T>());
    return paths;
}

private static <T extends Comparable<? super T>> void doPrintAllPaths(BinaryTreeNode<T> node, List<List<T>> allPaths, List<T> path) {
    if (node == null) {
        return ;
    }
    path.add(node.getData());
    if (node.isLeafNode()) {
        allPaths.add(new ArrayList<T>(path));   

    } else {
        doPrintAllPaths(node.getLeft(), allPaths, path);
        doPrintAllPaths(node.getRight(), allPaths, path);
    }
    path.remove(node.getData());
} 
```

这是测试用例

```
@Test
public void printAllPaths() {
    BinaryTreeNode<Integer> bt = BinaryTreeUtil.<Integer>fromInAndPostOrder(new Integer[]{4,2,5,6,1,7,3}, new Integer[]{4,6,5,2,7,3,1});
    List <List<Integer>> paths = BinaryTreeUtil.printAllPaths(bt);

    assertThat(paths.get(0).toArray(new Integer[0]), equalTo(new Integer[]{1, 2, 4}));
    assertThat(paths.get(1).toArray(new Integer[0]), equalTo(new Integer[]{1, 2, 5, 6}));
    assertThat(paths.get(2).toArray(new Integer[0]), equalTo(new Integer[]{1, 3, 7}));

    for (List<Integer> list : paths) {          
        for (Integer integer : list) {
            System.out.print(String.format(" %d", integer));
        }
        System.out.println();
    }
} 
```

## 这是输出

> ```
> 1 2 4
> 
> 1 2 5 6
> 
> 1 3 7 
> ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-04T02:07:04.837

**这是我的解决方案**：一旦我们遍历左或右路径，只需删除最后一个元素。

**代码：**

```
public static void printPath(TreeNode root, ArrayList list) {

    if(root==null)
        return;

    list.add(root.data);

    if(root.left==null && root.right==null) {
        System.out.println(list);
        return;
    }
    else {
        printPath(root.left,list);
        list.remove(list.size()-1);

        printPath(root.right,list);
        list.remove(list.size()-1);

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-06T16:20:45.677

```
/* Given a binary tree, print out all of its root-to-leaf
   paths, one per line. Uses a recursive helper to do the work.*/
void printPaths(Node node) 
{
    int path[] = new int[1000];
    printPathsRecur(node, path, 0);
}

/* Recursive helper function -- given a node, and an array containing
   the path from the root node up to but not including this node,
   print out all the root-leaf paths. */
void printPathsRecur(Node node, int path[], int pathLen) 
{
    if (node == null)
        return;

    /* append this node to the path array */
    path[pathLen] = node.data;
    pathLen++;

    /* it's a leaf, so print the path that led to here */
    if (node.left == null && node.right == null)
        printArray(path, pathLen);
    else
        { 
        /* otherwise try both subtrees */
        printPathsRecur(node.left, path, pathLen);
        printPathsRecur(node.right, path, pathLen);
    }
}

/* Utility that prints out an array on a line */
void printArray(int ints[], int len) 
{
    int i;
    for (i = 0; i < len; i++) 
        System.out.print(ints[i] + " ");
    System.out.println("");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-17T09:41:14.610

我用 an 尝试了这个问题，`ArrayList`我的程序打印了类似的路径。

所以我通过维护一个内部修改了我的逻辑以正常工作`count`，这就是我的做法。

```
private void printPaths(BinaryNode node, List<Integer> paths, int endIndex) {
        if (node == null)
            return;
        paths.add(endIndex, node.data);
        endIndex++;
        if (node.left == null && node.right == null) {
            //found the leaf node, print this path
            printPathList(paths, endIndex);
        } else {
            printPaths(node.left, paths, endIndex);
            printPaths(node.right, paths, endIndex);
        }
    }

public void printPaths() {
    List<Integer> paths = new ArrayList<>();
    printPaths(root, paths, 0);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-20T02:05:25.877

我们可以使用递归来实现它。正确的数据结构使其简洁高效。

```
List<LinkedList<Tree>> printPath(Tree root){

    if(root==null)return null;

    List<LinkedList<Tree>> leftPath= printPath(root.left);
    List<LinkedList<Tree>> rightPath= printPath(root.right);

    for(LinkedList<Tree> t: leftPath){
         t.addFirst(root);
    }
    for(LinkedList<Tree> t: rightPath){
         t.addFirst(root);
    }

 leftPath.addAll(rightPath);

 return leftPath;

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-22T12:07:50.530

您可以执行以下操作，

```
public static void printTreePaths(Node<Integer> node) {
    int treeHeight = treeHeight(node);
    int[] path = new int[treeHeight];
    printTreePathsRec(node, path, 0);

}

private static void printTreePathsRec(Node<Integer> node, int[] path, int pathSize) {
    if (node == null) {
        return;
    }

    path[pathSize++] = node.data;

    if (node.left == null & node.right == null) {
        for (int j = 0; j < pathSize; j++ ) {
            System.out.print(path[j] + " ");
        }
        System.out.println();
    }

     printTreePathsRec(node.left, path, pathSize);
     printTreePathsRec(node.right, path, pathSize);
} 
```

* * *

```
public static int treeHeight(Node<Integer> root) {
    if (root == null) {
        return 0;
    }

    if (root.left != null) {
        treeHeight(root.left);
    }

    if (root.right != null) {
        treeHeight(root.right);
    }

    return Math.max(treeHeight(root.left), treeHeight(root.right)) + 1;

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-25T05:49:35.793

这是我将所有路径值存储在 List 中然后打印列表的解决方案

基本上什么代码递归地调用 rootToLeafPaths 方法并将字符串传递给用逗号（“，”）分隔的值。递归函数的基本条件是我们到达叶节点（两个孩子都为空）。那时，我们只是从字符串中提取 int 值并将其存储在 List 中

```
class Solution {
    public void printBTfromRootToLeaf (TreeNode root) {
        if(root == null) return 0;
        if (root.left == null & root.right == null) return 1;
        List<List<Integer>> res = new ArrayList();
        rootToLeafPaths(root, res, "");
        System.out.println(res);
    }
private void rootToLeafPaths(TreeNode root, List<List<Integer>> res, String curr) {
        if (root.left == null && root.right == null) {
            String[] vals = curr.split(",");
            List<Integer> temp = new ArrayList<>();
            for (String val : vals) temp.add(Integer.parseInt(val));
            temp.add(root.val);
            res.add(new ArrayList<>(temp));
        }
        if (root.left != null) rootToLeafPaths(root.left, res, curr + root.val + ",");
        if (root.right != null) rootToLeafPaths(root.right, res, curr + root.val + ",");
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-26T18:12:27.707

它是用 JS 编写的，但您可以获得逻辑。

```
function dive(t, res, arr) {
        if(t.value != null && t.value != undefined) {
            res = res ? `${res}->${t.value}`: `${t.value}`;
        }
        if(t.left) {
            dive(t.left, res, arr );
        } 
        if(t.right) {
            dive(t.right, res, arr );
        } 
        if(!t.left && !t.right) {
            console.log(res)
            arr.push(res);
            return;
        }
}

function getPaths(t) {
    let arr = [];
    if(!t.left && !t.right) {
        t.value != null && t.value != undefined && arr.push(`${t.value}`);
        console.log(arr)
        return arr;
    }
    dive(t, null, arr);
    console.log(arr)
}

//INPUT
const x = {
    value: 5,
    left: {
        value: 4,
        left: {
            value: 3,
            left: {
                value: 2,
                left: {
                    value: 1,
                    left: {
                        value: 0
                    },
                    right: {
                        value: 1.5
                    }
                },
                right: {
                    value: 2.5
                }
            },
            right: {
                value: 3.5
            }
        },
        right: {
            value: 4.5,
            right: {
                value: 4.8
            }
        }
    },
    right: {
        value: 8,
        left: {
            value: 7
        }
    }
}

getPaths(x);

//OUTPUT

[ '5->4->3->2->1->0',
  '5->4->3->2->1->1.5',
  '5->4->3->2->2.5',
  '5->4->3->3.5',
  '5->4->4.5->4.8',
  '5->8->7' ] 
```

# java - 如何将图像图标设置为 JButton

> ID：14936862
> 
> 赞同：4
> 
> 时间：2013-02-18T12:54:43.360
> 
> 标签：java, image, swing, packaging, imageicon

我不太擅长创建 Swing 应用程序。所以我有疑问如何将图标设置为`JButton`.

我的项目结构如下所示：

![在此处输入图像描述](../Images/175475e13f9746281a0ef88473b9d487.png)

我`JButton`在`MainWindow`课堂上很简单：它看起来像这样：

```
tactButton = new JButton("next tact"); 
```

我想使用方法将图像设置为此按钮`setIcon`。我的代码如下所示：

```
tactButton.setIcon(new ImageIcon(getClass().getResource("/images/button_next.jpg"))); 
```

但是当我启动应用程序时，我有异常：

```
java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:205)
    at by.bulgak.conveyor.gui.MainWindow.<init>(MainWindow.java:117)
    at by.bulgak.conveyor.gui.MainWindow$1.run(MainWindow.java:46)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

所以我尝试了不同的东西：

*   `MainWindow`将所有图片与班级放在同一个文件夹中
*   将图片放在项目根文件夹中
*   尝试类似的东西`tactButton.setIcon(new ImageIcon("/images/button_next.jpg"));`

但我有这个例外，或者如果我使用`tactButton.setIcon(new ImageIcon("/images/button_next.jpg"));`我有没有图像的简单按钮。

最后我写了我的图像的绝对路径，这很好用（但绝对路径不是个好主意）。那么你能帮帮我吗？

我查看了[如何将图像添加到 JButton](https://stackoverflow.com/questions/4801386/how-do-i-add-an-image-to-a-jbutton)的问题，并尝试像那里那样做。

**更新**

创建按钮和设置图标的完整代码：

```
tactButton = new JButton("next tact");
tactButton.setSize(100, 100);
tactButton.setIcon(new ImageIcon(MainWindow.class.getResource("/images/button_next.jpg")));
tactButton.addActionListener(new ProcessorNextStepListener(this)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:48:43.943

如果您使用的是 Maven，那么您不需要做任何事情。M2E 将为您处理一切。

把你的源代码放进去`src/main/java`

将您的资源（图像、文本文件等）放入`src/main/resources`

如果您不使用默认文件夹，那么您应该修改`pom.xml`文件以指示您的源和资源所在的位置。之后，右键单击您的项目，转到 Maven-->Update project... 并确保选中“从 pom.xml 更新项目配置”框

就是这样。你应该很高兴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:00:19.870

尝试

```
new ImageIcon(MainWindow.class.getResource("/images/button_next.jpg"); 
```

另外，尝试将此 .jpg 转换为 .png ：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:49:39.907

你是如何运行你的应用程序的？直接来自 Eclipse，还是通过 Maven 构建一个 jar？

我在你的树中看到一个 pom.xml 文件，所以我怀疑你是通过 Maven 构建的。在这种情况下，Maven 可能不会将任何资源文件（即除了 .java 文件之外的任何文件）放入您的输出 jar 中。Maven 期望源文件与资源位于不同的目录中。默认情况下，这些目录是 src/main/java 和 src/main/resources。但是，看起来您可能已经为您的项目自定义了源目录，因为我直接在 src 目录中看到了您的源文件。

我会检查您生成的 .jar 文件，以确保图像实际上最终出现在其中。

# c++ - c++ - 如何从具有多个路径的字符串中提取文件路径？

> ID：14936867
> 
> 赞同：0
> 
> 时间：2013-02-18T12:55:00.653
> 
> 标签：c++, c, visual-studio-2010, visual-studio, visual-c++

我正在使用 Visual Studio 2010 C++，并且我有一个长字符串，其中包含多个这样的路径。

C:\eula0.txt

C:\eula1.txt

C:\eula2.txt

C:\eula3.txt

C:\eula4.txt

以上所有文件路径都在单个字符串“S”中。每个路径之间都有一个新行字符“\n”。我想将每个路径提取为单个字符串路径。

最终的输出应该是这样的。

字符串 s0 = C:\eula0.txt

字符串 s1 = C:\eula1.txt

字符串 s2 = C:\eula2.txt

字符串 s3 = C:\eula3.txt

字符串 s4 = C:\eula4.txt

我怎样才能做到这一点。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:00:28.327

尝试`getline`：

```
#include <string>
#include <sstream>

std::string S = /* your string */;
std::istringstream iss(S);

for (std::string line; std::getline(iss, line); )
{
    std::cout << "Have file: " << line << "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:10:14.103

此示例将单个字符串复制到一个向量中，并将每个字符串打印到标准输出。`istream_iterator`它依赖于用作`\n`分隔符的事实。请注意，它还会使用其他空格字符作为分隔符，因此如果您的文件名包含空格，它将不起作用。

```
#include <string>
#include <iostream>
#include <sstream>
#include <iterator>
#include <vector> 
int main()
{
  std::string s("C:\\eula0.txt\nC:\\eula1.txt\nC:\\eula2.txt");

  std::stringstream str(s);
  std::vector<std::string> v((std::istream_iterator<std::string>(str)),
                             (std::istream_iterator<std::string>()));

  for (const auto& i : v) 
    std::cout << i << "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T12:58:51.510

只需使用`std::string`'`find_first_of member`函数创建您自己的自定义循环。那将是一种方式。还有很多其他的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T13:01:05.757

你可以使用[`istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)and[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)为此

```
std::istringstream ss(S);
std::string s0, s1, s2, ...;
std::getline(ss, s0);
std::getline(ss, s1);
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T13:11:57.990

另一种方式，或者更多的C方式：

```
char *tmp;
char *input = ...; // Pointer to your input, must be modifiable null terminated string
char *buffer[256]; // Pick appropriate size
int i=0;

while((tmp=strchr(input, '\n'))
{
    *tmp = 0;
    buffer[i++] = strdup(input);
    input = ++tmp;
    // We replaced the newlines with null-terminators,
    // you may now undo that if you want.
}
buffer[i] = strdup(input); // Last entry or if no newline is present 
```

Ps 不要忘记稍后释放 strdup 为您分配的内存并进行一些完整性检查:)

（如果您需要我告诉我这里发生了什么，请告诉我，我会进一步解释。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T13:33:21.083

我是这样写的。工作完美。

谢谢大家。

```
void GetFilePathFromMultipleStringPaths(const char* urls)
{
    int n = 0;
    vector<string> tokens; // Create vector to hold paths
    std::string s = urls;
    std::string::size_type prev_pos = 0, pos = 0;
    while( (pos = s.find('\n', pos)) != std::string::npos )
    {
        std::string substring( s.substr(prev_pos, pos-prev_pos) );
        tokens.push_back(substring);
        prev_pos = ++pos;
        n++;
    }
    std::string substring( s.substr(prev_pos, pos-prev_pos) ); // Last path
    if(substring.data() != NULL)
    {
        tokens.push_back(substring);
        n++;
    }
    for (int i=0; i<n; i++)
    {
        cout<<tokens[i].c_str()<<"  "<<i<<endl;
    }
} 
```

# javascript - 窗口的主干范围而不是这个

> ID：14936869
> 
> 赞同：1
> 
> 时间：2013-02-18T12:55:11.940
> 
> 标签：javascript, backbone.js, scope

为什么此日志记录为窗口而不是 Backbone 对象？

```
App.Models.Site = Backbone.Model.extend({
    url: 'assets/json/app.json',

    initialize: function(){
        this.fetch({success:this.success});
    },

    success: function(){
        console.log('success', this.attributes); // log's: success undefined
        console.log(this); // window
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:57:54.027

因为该函数是由 jQuery（或您使用的任何 DOM 库）`ajax`函数调用的。

利用`this.fetch({success:_.bind(this.success, this)});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:03:58.277

fetch 函数的成功属性中的“this”不再位于主干视图范围内。一种解决方法是添加一个

```
var that = this; 
```

并在您的获取成功属性中使用“that”，如下所示：

```
var that = this;
this.fetch({success: that.success}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T12:58:19.393

因为您需要`this`像这样绑定初始化函数：

```
App.Models.Site = Backbone.Model.extend({
    url: 'assets/json/app.json',

    initialize: function(){
        _.bindAll(this, 'success'); // Ensure the 'success' method has the correct 'this'
        this.fetch({success:this.success});
    },

    success: function(){
        console.log('success', this.attributes);
        console.log(this); // this is now correctly set
    }
}); 
```

# tomcat - Tomcat：将 servlet hbws 标记为不可用

> ID：14936870
> 
> 赞同：0
> 
> 时间：2013-02-18T12:55:14.880
> 
> 标签：tomcat

我正进入（状态

```
SEVERE: Servlet /hbws threw load() exception
java.lang.Error: Unresolved compilation problems:
The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import org.apache cannot be resolved 
```

我`servlet-api.jar`在`$CATALINE_HOME/lib`. 但为什么我仍然收到这个错误。

当我使用我的服务器（Tomcat 6.0.32）时，我得到了这个。

# php - 在 PHP 会话中存储乘数变量并使用循环显示它们

> ID：14936871
> 
> 赞同：-1
> 
> 时间：2013-02-18T12:55:19.537
> 
> 标签：php, session-variables

我想通过存储来自 ORDER 页面的订单值并将它们显示在 CART 页面上来保存产品。这是两个页面的编码。有人可以帮我吗？它适用于 wordpress 主题。

订单页面

```
<?php
session_start();
/*
TEMPLATE NAME: Order Page
*/

$git_product_id = $_GET['git_product_id'];
$git_required = $_GET['git_required'];
$git_action = $_GET['git_action'];

if ($git_product_id != "" && $git_required != "" && $git_action != "" ){            
    ?>
        <form action="" method="POST" class="add-form">
            <label>
                <?php 

                    switch($git_required){

                        case "name" :
                            // showing Name
                            echo "Account Name:";
                        break; 

                        case "url" :
                            // showing url
                            echo "Web Url:";
                        break;

                    };
                ?>
            </label>
            <input type="text" name="git_required" value="" />
            <input type="hidden" name="git_product_id" value="<?php echo $git_product_id; ?>" />
            <input type="hidden" name="git_action" value="add" />
            <input type="submit" value="Add to cart" class="add-to-cart-button" />
        </form> 
    <?php

} else {

    echo "Sorry an error took place.";
} 
```

?>

==================================================== =========

购物车页面

```
<?php
session_start();
/*
TEMPLATE NAME: Cart Page
*/ 
```

?>

```
<?php
    $git_product_id = $_POST['git_product_id'];
    $git_required = $_POST['git_required'];
    $git_action = $_POST['git_action'];

    if ($git_product_id != "" && $git_action != "" ){

        switch($git_action){

            case "add" :
                // adding product
                    // checking first if the product is already added
                    if (isset($_SESSION['cart'][$git_product_id])){
                        echo "You have already added this product";                     
                    } else {
                        // I AM NOT SURE IF THIS CODING IS OKAY. PLEASE CHECK THIS
                        $_SESSION['cart'][$git_product_id] = array('product_id' => $git_product_id, 'git_required' => $git_required );
                    }
            break;

            case "remove":
                // removing product
                unset($_SESSION['cart'][$git_product_id]);
            break;

            case "empty" :
                // empty cart
                unset($_SESSION['cart']); 
            break;              

        } 
    }
?>

<?php 

    if ($_SESSION['cart'] != ""):
        foreach($_SESSION['cart'] as $product => $qty) : ?>
        <tr>
            <td>
                <?php // I WANT TO SHOW HERE EACH PRODUCT ID and RESPECTIVE REQUIRED INFO ?>
                <?php // BUT I DON'T KNOW HOW TO DO IT ?>
            </td>

            <td>
                <form action="" method="post">
                    <input type="hidden" name="git_product_id" value="<?php echo $product; ?>" />
                    <input type="hidden" name="git_required" value="<?php echo $qty; ?>" />
                    <input type="hidden" name="git_action" value="remove" />
                    <input type="submit" value="Remove" />
                </form>
            </td>

        <?php endforeach; ?> 
    <?php endif; ?>

    <form action="" method="POST">
        <input type="hidden" name="git_product_id" value="<?php echo $product; ?>" />
        <input type="hidden" name="git_required" value="<?php echo $qty; ?>" />
        <input type="hidden" name="git_action" value="empty" />
        <input type="submit" value="empty" />
    </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:00:23.743

你写了`$_SESSION['cart']['$product']...`，但你应该写`$_SESSION['cart'][$product]...`没有'round $product...

说明：`'$product'`不是 $product 的值，而只是字符串*$product*：

```
$product = 5;
var_dump($product);       // -> int(5)
var_dump("$product");     // -> string(1) "5"
var_dump('$product');     // -> string(8) "$product" 
```

# eclipse - 多次删除确认 - Eclipse GMF

> ID：14936875
> 
> 赞同：2
> 
> 时间：2013-02-18T12:55:25.837
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-emf, eclipse-gmf

从 Eclipse GMF 删除对象时，我想向用户显示确认删除对话框。我已经覆盖了特定 EditPart 的组件角色编辑策略中的 createDeleteSemanticCommand 以包含删除确认对话框。以下是我所做的代码片段。

/////// RESPECTIVE EDIT PART CLASS，安装editpolicy的地方

```
protected void createDefaultEditPolicies() {
installEditPolicy(EditPolicy.COMPONENT_ROLE, new 
            ComponentRoleEditPolicy()); 
```

* * *

/////// RESPECTIVE EDITPOLICY CLASS，其中完成自定义删除对话框操作（ComponentRoleEditPolicy）

```
protected Command createDeleteSemanticCommand(GroupRequest deleteRequest)
{
if(deleteRequest instanceof GroupRequestViaKeyboard) {
     if(deleteDialog(foo.getName())) 
            {
                return super.createDeleteSemanticCommand(deleteRequest);
            } 
            else {
                return UnexecutableCommand.INSTANCE;
            }
       }
return UnexecutableCommand.INSTANCE;
} 
```

* * *

////// 删除确认方法

```
public static boolean deleteDialog(String name) {
    Shell shell = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();
    boolean delete = MessageDialog.openConfirm(shell, "Delete", "Are you sure you want to delete "
    + name + " ?");
    return delete;
} 
```

对于每个不同的编辑部分，我最初编写了这段代码来要求删除确认。后来，我意识到在图表中选择多个编辑部分并执行删除按钮，我得到'n'删除图表中选择的'n'个片段的确认框。如何解决这个问题呢。请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:56:32.233

这是我为解决问题而遵循的解决方案。

在自定义生成的 DeleteAction 类中，重写以下方法

```
// confirm dialog for rightclicking and selecting "Delete from Model"
@Override
public void runWithEvent(Event event) {
    if(deleteDialog("the selected element(s)"))
        super.runWithEvent(event);
}
// Confirm dialog for pressing delete key. 
@Override
public void run() {
    if(deleteDialog("the selected element(s)")) {
        super.run();
    }
} 
```

添加删除键操作，在生成的 XXXDiagramEditor 类中，

```
// In the generated configureGraphicalViewer() - Change to @Generated NOT
KeyHandler keyHandler = getDiagramGraphicalViewer().getKeyHandler();
keyHandler.put(KeyStroke.getPressed(SWT.DEL, 127, 0), new DeleteElementAction(this)/*Custom generated delete action*/);
getDiagramGraphicalViewer().setKeyHandler(keyHandler); 
```

添加这些代码后，一切都像魅力一样。当我们按下删除（即使在选择任意数量的元素之后）并执行所需的操作时，它会要求确认对话框。同样，当我们右键单击并选择从模型中删除时，它也可以工作。此外，我们不需要组件角色编辑策略。我已将其从`installEditPolicy()`[还有 editPolicy 文件] 中删除。

# html - 高度自动时CSS边框崩溃

> ID：14936877
> 
> 赞同：2
> 
> 时间：2013-02-18T12:55:33.700
> 
> 标签：html, css, border

我有这样的 HTML 代码

```
 <div class="ads-w1">
           <div class="ads-w2">
                   <div class="ads_cost"><span>$0.01</span></div>
                   <div class="ads_info">
                           <div class="title">Ads Title</div>
                   </div>
                   <div class="ads_banner">Ads Banner</div>
           </div>
    </div> 
```

像这样的css代码

```
.ads-w1 {
    background: url("../img/ads-bg1.png") 0px 0px repeat-x #3ec2c5;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    padding: 5px 5px 5px 5px;
    margin: 0px 0px 12px;
}

.ads-w2 {
    background: #fafafa;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    height: 150px;
}

.ads_cost {
    float: left;
    font-size: 24px;
    color: #FFFFFF;
    text-shadow: 1px 1px 1px #525252;
    font-weight: bold;
    padding: 0px 0px 0px 0px;
    margin: 0px 20px 0px 0px;
    width: 120px;
    background-color: #00BF00;
    text-align: center;
    line-height: 54px;
}

.ads_info {
    float: left;
    width: 340px;
    overflow: hidden;
}

.ads_banner {
    float: left;
    text-align: center;
    width: 490px;
    overflow: hidden;
    margin: 8px;
}

.ads_info .title {
    font-size: 18px;
    color: #278dff;
    font-weight: bold;
    padding: 0px 0px 0px 0px;
    margin: 5px 0px 0px 0px;
    height: 20px;
    overflow: hidden;
} 
```

输出将是这样的

![在此处输入图像描述](../Images/8b63aebe54f603b410350b8d286e1512.png)

我需要让 .ads_w2 高度为“自动”，就像这样

```
 .ads-w2 {
    background: #fafafa;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    height: auto;
} 
```

但问题是当我将它设置为“自动”时，边框崩溃了

![在此处输入图像描述](../Images/e65a3b431b163eecca1a3922d4596acd.png)

请问我该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:58:24.147

您正在浮动元素`.ads-w2`，这会导致您的元素具有`0`高度。

一种可能的解决方案是添加`overflow: hidden;`到`.ads-w2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:07:35.733

```
 .ads-w2 {
    background: #fafafa;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    height: auto;
    display:table; /* <----- this */
} 
```

示例[http://jsfiddle.net/2fWj2/](http://jsfiddle.net/2fWj2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:16:57.980

你这样做是正确的。但是因为你没有任何文本或其他东西，`DIV`你会看到它崩溃。即使`DIV`只是一个容器。我 `DIV`用 `P`一些标签填充它。
[看到这个：](http://jsfiddle.net/talebihamid/CG8Lk/)

# .net - TeamCity 上的 MsTest 并行执行

> ID：14936880
> 
> 赞同：2
> 
> 时间：2013-02-18T12:55:38.163
> 
> 标签：.net, teamcity, continuous-testing

我有一个具有大量 RAM 和处理器的出色构建服务器。此外，我有一个包含大量 MsTest 测试的项目（其中 95% 是简单的单元测试）。看到这些测试一个一个地执行了 15 分钟，真是令人失望。所以我正在寻找并行执行这些测试的方法。

据我所知，TeamCity 对此没有本机支持。当然，您可以为每组测试创建构建配置并并行执行它们......但它在很多方面都很糟糕。

持续测试工具内部具有出色的高度并行化测试运行器。我来的最佳选择是将它们用作 Team City 测试运行器，但我不知道如何实现它。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:19:58.190

如果您不想，您不必使用内置的 TeamCity 测试运行程序步骤。您可以使用命令行测试运行程序从单个 MSBuild 脚本运行构建和测试，然后将结果上传到 TeamCity。

虽然您在构建构建时失去了 GUI，但以这种方式构建的好处是您的构建应该在您的开发机器上运行与在构建服务器上运行的相同。您还与 CI 无关，能够在任何 CI 环境（在合理范围内）上运行您的构建。

[TeamCity XML 报告处理](http://confluence.jetbrains.com/display/TCD7/XML+Report+Processing)

[TeamCity 导入 XML 报告](http://confluence.jetbrains.com/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ImportingXMLReports)

这是一个例子：

```
<Message Text="##teamcity[importData type='mstest' path='path to mstest output xml file']"/> 
```

# ant - 蚂蚁调试不工作

> ID：14936883
> 
> 赞同：0
> 
> 时间：2013-02-18T12:55:50.223
> 
> 标签：ant

我已将“ **Ant** ”下载到 D:Windows 文件夹。将**ANT_HOME**环境变量设置为“D:\Windows\apache-ant-1.7.0”。我已将其添加为系统变量和用户变量。但是，当我打开命令提示符并运行命令“ *ant -versions* ”时，它显示错误消息为“ **ant is not recoganised as an internal or external command,operable program or batch file** ”。安装 Ant 有什么错误吗？我需要将**bin**添加到 ANT_HOME？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:00:21.043

ANT_HOME - 用于检测环境应该使用哪些位置

要从命令行使用 ant，您已经设置了 PATH 变量。编辑现有的（例如系统）并在末尾附加`;`蚂蚁的分隔符位置。

顺便说一句，由于 ANT_HOME 已经设置，您可以使用扩展语法设置 PATH：

```
PATH=c:\windows......;%ANT_HOME% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:01:51.213

像这样添加

添加 ANT_HOME 环境变量

```
ANT_HOME = "D:\Windows\apache-ant-1.7.0" 
```

将环境 PATH 变量编辑到 %ANT_HOME%/bin 文件夹

```
PATH = ...maybe-other-entries...;%ANT_HOME%\bin;...maybe-other-entries... 
```

# git - 终端中具有可选节点的Git树？

> ID：14936887
> 
> 赞同：8
> 
> 时间：2013-02-18T12:56:09.440
> 
> 标签：git

Emacs 有一个可选的撤销树。您可以将光标移动到每个节点，然后点击返回以及时返回，甚至沿着分支。

git 有没有类似的东西，可以在终端（不是 Emacs）中访问。所以，在一个 git 项目中，我可以输入一个命令，它会显示树。我可以四处游荡，及时返回甚至切换到另一个分支，然后点击返回，它会检查特定提交的整个状态。

![git 撤消树](../Images/babc4c9f267faca37254db448a2791d1.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T20:47:39.613

正如@NevikRehnel 所说，[`tig`](http://jonas.nitro.dk/tig/)是你的朋友。

`tig --all`以树形形式显示您的完整日志（作为`git log`'s`--graph`开关）。

![tig 日志视图](../Images/36c35c8983498555073a507adfec45df.png)

您使用向上键和向下键在提交之间移动，您会看到一个带有`git show`的选定提交`Enter`，并且您可以点击`Shift`+`C`来执行`git cherry-pick`该提交。

![tig 显示视图](../Images/69f7d48eda459b482b524de7c2b4d48f.png)

您可以`H`随时按以查看帮助。

![tig 帮助视图](../Images/ad9dcc7f7296b413048366332def417e.png)

您可以签出分支，但您也可以添加[自定义绑定](https://github.com/jonas/tig/wiki/Bindings)来执行`git checkout`.

我认为[`man tigrc`](http://jonas.nitro.dk/tig/tigrc.5.html)了解如何就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:51:24.593

对于 git 的图形视图，安装 gitk 实用程序，然后键入 gitk --all 并右键单击以更改头部位置。使用可以使用软复位或硬复位。注意：硬重置将丢失您要重置的磁头后所做的所有更改。

# c# - msdev 批量编译一个 C# 项目

> ID：14936889
> 
> 赞同：0
> 
> 时间：2013-02-18T12:56:12.357
> 
> 标签：c#, batch-file, compilation, command

我已经下载了 C# 2000 速成版并做了一个项目。

我可以像这样从命令提示符编译这个项目

```
"C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\vcsexpress.exe" myProj.sln /build 
```

我的问题是，是否有更“平台/IDE”独立的方式来做到这一点？

像这样

```
msbuild myProj.sln /build 
```

msbuild 是一些很棒的 microsoft windows 内置工具，不仅可以发现它是一个 C# 项目，还可以找到正确的编译器并启动它。

/斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:29:31.437

找到您的 msbuild，通常是 C:\Windows\Microsoft.NET\Framework\v4.0.30319（或您拥有的任何版本）。从命令行 cd 进入它，然后运行所需的解决方案，提供正确的项目路径。

```
msbuild myProj.sln /build 
```

这是[msbuild 命令行参考](http://msdn.microsoft.com/en-us/library/vstudio/ms164311.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T05:58:49.417

MvanGeest 让我走上正轨

它实际上在“c:\windows\Microsoft.NET\Framework\v3.5\MSBuild”中存在一个 msbuild

它做的比预期的还要多，如果 msbuild 没有参数，它将在当前库中搜索项目文件（例如 .sln）并运行它

# sencha-touch - sencha touch 2 的子容器 tpl 中未显示简单的 jsonp 存储对象

> ID：14936896
> 
> 赞同：0
> 
> 时间：2013-02-18T12:56:31.950
> 
> 标签：sencha-touch, sencha-touch-2, sencha-architect

我正在使用 sencha touch 2 开发演示应用程序。我有列表屏幕，我在其中使用 jsonp 下载数据并显示列表。现在单击列表行，我正在打开新的详细信息屏幕并传递当前行存储对象。

在详细信息屏幕中，我能够获取对象并将其显示在主根容器上，但未从子容器中显示相同的值。请参考我下面的代码。

```
Ext.define('Demo.view.MyDetailView', {
extend: 'Ext.Container',

xtype:'mydetailview',

requires:[

     'Ext.TitleBar',         
     'Ext.dataview.List',
     'Ext.XTemplate'
 ],

config: {

    // code snippet-1 ********* it is working *********

    styleHtmlContent: true,
    scrollable:true,
    xtype: 'container',
    title:'Details',
    tpl: 'barname : {barname}',

    // ************** end **************

    items: [
        {
            xtype: 'titlebar',
            docked: 'top',
            title: 'Bar Info',
            items: [
                {
                    xtype: 'button',
                    ui: 'back',
                    text: 'Back',
                    id: 'btnBack'
                },
                {
                    xtype: 'button',
                    align: 'right',
                    text: 'Edit Beers'
                }
            ]
        },
        {
            xtype: 'container',
            layout: {
                type: 'hbox',
                pack: 'center'
            },
            items: [
                {
                    xtype: 'map',
                    height: 80,
                    margin: '10',
                    width: 80
                },
                {
                    xtype: 'container',
                    flex: 1,

                    layout: {
                        align: 'center',
                        pack: 'center',
                        type: 'hbox'
                    },
                    items: [
                        {

                            // code snippet-2 ********* it is NOT working *********

                            xtype: 'container',
                            styleHtmlContent: true,
                            tpl: 'barname : {barname}',      
                            //html: '<div>barname : {barname}</div>',
                            margin: '10 10 10 0',
                            width: '100%'

                            // ************** end **************
                        }
                    ]
                }
            ]
        }
    ]
} 
```

});

在上面的代码中，“code snippet-1”正在工作，而相同的代码在内部容器 tpl “code snippet-2”中不起作用。请指导我的代码有什么问题。如何在内部容器中使用“barname”。我也尝试过用 html 代替 tpl，这也不起作用。

提前致谢...

# internet-explorer - 从 IE 和 VBA 自动化 Java Applet

> ID：14936899
> 
> 赞同：3
> 
> 时间：2013-02-18T12:56:39.200
> 
> 标签：internet-explorer, vba, applet

是否可以通过 VBA 读取在 IE 中运行的小程序并使其自动化（单击按钮、选择选项等）？applet 元素会形成某种可导航的 DOM 结构（ChildNodes、parnt 等）吗？getElementById() 之类的函数会起作用吗？如果没有，我们还能如何读取/自动化小程序？

# java - 我用 Java 编写的扫雷程序抛出 NullPointerException

> ID：14936903
> 
> 赞同：0
> 
> 时间：2013-02-18T12:56:50.837
> 
> 标签：java, swing, user-interface, nullpointerexception, jtogglebutton

我用 Java 编写了一个扫雷游戏。但是，在我单击几个按钮后，它会抛出一个`NullPointerException`. 这是完整的程序（恐怕它很大，我的评论不会有太大帮助，我想！）

```
import java.util.Random;
import javax.swing.JToggleButton;

    /**
     * This class represents a button in a {@code MineSweeperGrid}.
     */
    @SuppressWarnings("serial") public class MineButton extends JToggleButton {
        public final boolean safe; // Whether this button hides a mine or not (true if not).
        private boolean clicked; // Whether this button has been clicked or not.
        public final int id; // The id number of this button. This can be used to determine the position of the button on
                                // the grid.

        /**
         * Constructs a new {@code MineButton} with a randomly generated safety status, and a user defined id.
         * 
         * @param id
         *            The identity number of this button, which can be used to determine its position on a grid of buttons.
         */
        public MineButton(int id) {
            super();
            safe = new Random().nextBoolean();
            clicked = false;
            this.id = id;
        }

        public boolean hasBeenClicked() {
            return clicked;
        }

    }

import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JOptionPane;
import javax.swing.JPanel;

@SuppressWarnings("serial") public class MineSweeperGrid extends JPanel {
    public final int size; // The size of this grid.
    private int noOfMines; // The number of mines in the grid.
    private int btnsLeft; // The buttons left to clear.
    private MineButton[][] grid; // The grid itself, which is represented as an array of MineButtons.

    /**
     * Creates a new MineSweeperGrid object according to the size specified as the argument.
     * @param size
     *            The length or breadth of the grid. The number of buttons in the grid will be size*size.
     */
    public MineSweeperGrid(int size) {
        super(); // Call the superclass constructor.
        if(size < 3) // This is minimum limit of the size, because our code won't work properly with a size lesser than
                        // this.
            throw new IllegalArgumentException("The size of the grid cannot be less than three.");
        setLayout(new GridLayout(10, 10)); // Set the layout of this panel.
        this.size = size;
        grid = new MineButton[size][size];
        int id = noOfMines = btnsLeft = 0; // Initialize id, noOfMines & btnsLeft to 0.

        // Initialize each button of the grid.
        for(int i = 0; i < (size - 1); i++)
            for(int j = 0; j < size; j++) {
                grid[i][j] = new MineButton(id); // Construct the button.
                if(!grid[i][j].safe)
                    noOfMines++;
                grid[i][j].addActionListener(new MineListener()); // Add a listener to it (which does not work
                                                                    // properly).
                grid[i][j].setEnabled(true); // Disable this button.
                add(grid[i][j]); // Add it to the grid.
                id++;
            }
        btnsLeft = (size * size) - noOfMines; // Set the number of buttons to be cleared .
    }

    /**
     * 
     * The ActionListener for the MineButtons in our grid.
     */
    private class MineListener implements ActionListener {
        /*
         * This is test code. Not working currently!
         */
        @Override public void actionPerformed(ActionEvent evt) {
            MineButton btn = (MineButton)evt.getSource(); // Get the button which generated this event.
            btn.setSelected(false);
            if(!(btn.safe)) {
                btn.setText("M");
                return;
            }
            btn.setEnabled(false); // Since now we know he's safe, disable this button.
            MineButton[] btns = getNeighbours(btn); // Get this button's neighbours, i.e., the
                                                    // buttons that surround it.
            int count = 0; // Initialize count to 0.
            for(int i = 0; i < btns.length; i++)
                if(!btns[i].safe)
                    count++;
            btn.setText("" + count + "");
            btnsLeft--;
            if(btnsLeft == 0) {
                JOptionPane.showMessageDialog(null, "You have cleared all the mines! You win!");
                System.exit(0);

            }
        }

        /**
         * Method which computes the buttons surrounding the button passed as parameter.
         * 
         * @param btn
         *            The button passed as parameter.
         * @return The buttons surrounding this button as an array of buttons.
         * @throws IllegalArgumentException
         *             If the parameter passed is null.
         */
        private MineButton[] getNeighbours(MineButton btn) {
            int x = btn.id / size, y = btn.id % size;
            System.out.println(x + ", " + y);
            if((x == 0) && (y == 0)) // This is the first button in the grid, in the top left corner.
                return new MineButton[] {grid[x][y + 1], grid[x + 1][y], grid[x + 1][y + 1]}; // This is OK.

            else if((x == (size - 1)) && (y == (size - 1))) // This is the last button in the grid, in the lower right
                                                            // corner.
                return new MineButton[] {grid[x - 1][y - 1], grid[x - 1][y], grid[x][y - 1]}; // This is OK.

            else if((x == 0) && (y == (size - 1))) // This is the button in the top right corner.
                return new MineButton[] {grid[x][y - 1], grid[x + 1][y], grid[x + 1][y - 1]};

            else if((x == (size - 1)) && (y == 0)) // This is the button in the lower left corner.
                return new MineButton[] {grid[x][y + 1], grid[x - 1][y], grid[x - 1][y + 1]}; // This is OK.

            else if(x == 0) // This is a button belonging to the first row.
                return new MineButton[] {grid[x][y + 1], grid[x + 1][y], grid[x + 1][y + 1], grid[x + 1][y - 1],
                        grid[x][y - 1]}; // This is OK.

            else if(y == 0) // This is a button belonging to the first column.
                return new MineButton[] {grid[x][y + 1], grid[x + 1][y], grid[x + 1][y + 1], grid[x - 1][y],
                        grid[x - 1][y + 1]}; // This is OK.

            else if(x == (size - 1)) // This is a button in the last row.
                return new MineButton[] {grid[x][y - 1], grid[x - 1][y], grid[x - 1][y - 1], grid[x - 1][y + 1],
                        grid[x][y + 1]}; // This is OK.;

            else if(y == (size - 1)) // This is a button in the last column.
                return new MineButton[] {grid[x][y - 1], grid[x - 1][y], grid[x - 1][y - 1], grid[x + 1][y],
                        grid[x + 1][y - 1]}; // This is OK.

            // For all other buttons.
            return new MineButton[] {grid[x + 1][y + 1], grid[x + 1][y], grid[x][y + 1], grid[x - 1][y - 1],
                    grid[x - 1][y], grid[x][y - 1], grid[x - 1][y + 1], grid[x + 1][y - 1]}; // This is OK.

        }
    }
}

import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;

import org.mandal.data.MineSweeperGrid;

public class MineSweeperUI {

    private JFrame frame;
    private JPanel content;
    private ButtonHandler listener;
    private MineSweeperGrid grid;
    private JMenuBar menuBar;
    private JMenu file;
    private JMenuItem newGame;
    private JMenuItem options;
    private JMenuItem close;
    private JMenu help;
    private JMenuItem instructions;
    private JMenuItem about;

    /**
     * 
     */
    private class ButtonHandler implements ActionListener {
        @Override public void actionPerformed(ActionEvent evt) {
        }
    }

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override public void run() {
                try {
                    MineSweeperUI window = new MineSweeperUI();
                    window.frame.setVisible(true);
                } catch(Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public MineSweeperUI() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame("MineSweeper v1.00");
        frame.setResizable(false);
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        content = new JPanel();
        content.setLayout(null);

        grid = new MineSweeperGrid(10);
        grid.setBounds(0, 0, 444, 251);
        content.add(grid);

        menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        file = new JMenu("File");
        menuBar.add(file);

        newGame = new JMenuItem("New Game");
        file.add(newGame);

        options = new JMenuItem("Options...");
        file.add(options);

        close = new JMenuItem("Close");
        file.add(close);

        help = new JMenu("Help");
        menuBar.add(help);

        instructions = new JMenuItem("How to play?");
        help.add(instructions);

        about = new JMenuItem("About...");
        help.add(about);

        frame.setContentPane(content);
    }
} 
```

如您所见，该程序尚未完成，并且出于调试目的而简化了某些部分（例如当您击中地雷时显示“M”，而不是处理损失）。这是堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at org.mandal.data.MineSweeperGrid$MineListener.actionPerformed(MineSweeperGrid.java:68)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.JToggleButton$ToggleButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:04:07.690

看起来：

```
for(int i = 0; i < (size - 1); i++) 
```

应该：

```
for(int i = 0; i < size; i++) 
```

否则你不会`grid[size - 1]`在最后一次迭代中填充最后一个数组。`grid[size - 1]`指的是一个空数组：

```
{null, null, null, ...} // its length = size 
```

或者换句话说：

```
grid[size - 1][0] == null
grid[size - 1][1] == null
grid[size - 1][2] == null
grid[size - 1][3] == null
...
grid[size - 1][size - 1] == null 
```

# javascript - Cordova 警报在导航时重复

> ID：14936909
> 
> 赞同：1
> 
> 时间：2013-02-18T12:57:12.900
> 
> 标签：javascript, cordova, navigation, alert

我在 Cordova (phonegap) 中重复警报时遇到问题，javascript 如下所示：

```
navigator.notification.alert(
                'Something is amiss',  // message
                function(){},         // callback
                'DatabaseManager error processing SQL',            // title
                'Ok'                  // buttonName
            ); 
```

当我导航到另一个页面时，例如使用后退按钮，警报会再次显示。如果我进一步导航，警报会重复 x2 次，依此类推。

**注意：**即使我尝试不同的导航方法也会发生这种情况，例如：

```
$.mobile.changePage("LogOn.html");
window.location.href = "LogOn.html";
<a href="#" data-rel="back" data-icon="back">back</a> 
```

我发现当我离开页面时（但仅在某些情况下），脚本通常会运行两次（警报只是一个示例）。我怀疑发生这种情况是因为我在警报中显示了一个错误，并且该错误导致脚本以某种神奇的方式再次运行。关于可能是什么原因的任何想法？

**额外信息：** 我使用单页模型（一页 pr html 文件），加载 init 并从 html 运行我的脚本，如下所示：

```
<script src="../js/PickMode.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).bind("pageinit", function() {
            initPickMode(); //this method lives in PickMode.js
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:24:01.227

这个问题是由于回调方法再次运行造成的，这在嵌套回调时尤其会出现问题 - 这会导致复杂的调试场景。我发现的一个例子是 jquery 移动弹出窗口中的一个错误（在 android 上）。我在回调中放置了一个 changePage 导航（在弹出关闭或类似的情况下）。回调调用 changePage 就像它应该的那样，但似乎有一个回调导致浏览器返回到弹出窗口发生的位置。

# internet-explorer - 从 WebDriver 启动 IE 时获取 `SessionNotFoundException`

> ID：14936916
> 
> 赞同：0
> 
> 时间：2013-02-18T12:57:30.730
> 
> 标签：internet-explorer, selenium, webdriver, selenium-webdriver

根据提到的[帖子](https://groups.google.com/forum/#!msg/selenium-users/NXYlqQIAofo/89QDFxCN7qwJ)，我了解到该`ignoreZoomSetting`功能尚未在 Internet Explorer 驱动程序中工作。

因此，我手动将浏览器级别设置为 100%，然后运行测试脚本，它按预期工作。

***实际需要：***

我只想从我的代码中将浏览器缩放级别设置为 100%。我试图通过使用 java.awt.Robot 类来实现这一点。
*代码尝试*

```
 Robot ignoreZoom = new Robot();
 ignoreZoom.keyPress(KeyEvent.VK_CONTROL);
 ignoreZoom.keyPress(KeyEvent.VK_0);
 ignoreZoom.keyRelease(KeyEvent.VK_CONTROL); 
```

我通过手动将浏览器缩放级别设置为 150% 并从代码启动 IE 来检查这一点。

*用于启动的代码*

```
 DesiredCapabilities ieCapabilities = null;
 ieCapabilities = DesiredCapabilities.internetExplorer();
 driver = new InternetExplorerDriver(ieCapabilities); 
```

上面的代码打开了 IE，但同时在上面的代码中抛出了`third line`异常

`org.openqa.selenium.remote.SessionNotFoundException: Unexpected error launching Internet Explorer. Browser zoom level was set to 150%. It should be set to 100% (WARNING: The server did not provide any stacktrace information)`

**使用版本：**

Selenium 服务器 - 2.28.0
操作系统 - Windows 7
IEDriverServer - 2.29.0（64 位）
IE - 8.0（64 位）

我只想知道是否有可能从编码端设置缩放级别？
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:56:19.350

你在这里有一个循环依赖。您想使用`java.awt.Robot`类设置浏览器缩放级别，但这只能*在*IE 启动后完成。但是，除非在启动浏览器*之前*`InternetExplorerDriver`将浏览器缩放级别设置为 100%，否则无法使用IE 启动 IE 。你有两个选择。

 *首先，您可以设置在启动 IE 时忽略浏览器缩放级别设置的功能。这将启动浏览器，然后让您使用 Robot 类在闲暇时设置缩放级别。我不推荐这种方法，因为如果设置缩放级别因任何原因失败，IE驱动程序会错误计算元素的坐标，点击页面中的元素很可能会失败。如果您无论如何都无视缩放级别，那么您将执行以下操作：

```
DesiredCapabilities caps = DesiredCapabilities.internetExplorer();
caps.setCapability("ignoreZoomSetting", true);
WebDriver driver = new InternetExplorerDriver(caps); 
```

第二种更正确的方法是简单地认识到，因为 IE 不支持每个实例的配置文件（如 Firefox 和 Chrome 那样），IE 只需要您在尝试使用 WebDriver 自动化之前进行一些手动配置。其中一项手动配置是将浏览器缩放级别设置为 100%。

实际上，您在原始问题中提到的邮件列表线程**确实**声明该`ignoreZoomSetting`功能有效。声称它对他们不起作用的海报试图不当使用它。*

# android - Edittext：我想在单击edittext时弹出带有项目列表的窗口

> ID：14936920
> 
> 赞同：0
> 
> 时间：2013-02-18T12:57:38.580
> 
> 标签：android

我希望当我单击edittext时它应该显示一个弹出窗口，其中有带有项目列表的单选按钮，当我选择一个项目时它应该在edittext中显示它。怎么做？我没有得到解决方案。请告诉任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:09:15.837

```
 et1.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        //  at this u use alert box with radio buttons 
            // TODO Auto-generated method stub
        }

      @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        //leave blank
            // TODO Auto-generated method stub
        }

        @Override
        public void afterTextChanged(Editable s) {
          //leave blank
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:12:35.120

你也可以用这个

```
 disValEdit.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if(event.getAction() == MotionEvent.ACTION_UP) {

                  } }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:14:18.643

你可以尝试这样的事情：

```
textView.addTextChangedListener(new TextWatcher() {
  public void afterTextChanged(Editable s) {
  }

  public void onTextChanged(CharSequence s, int start, int before, int count) {
  }

  public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setAdapter(adapter, new DialogInterface.OnClickListener() {

      public void onClick(DialogInterface dialog, int which) {
          textView.setText(which);
      }
    });
    builder.show();
  }
}); 
```

# git - Bitbucket 不同的密钥和帐户

> ID：14936926
> 
> 赞同：1
> 
> 时间：2013-02-18T12:57:55.690
> 
> 标签：git, github, bitbucket, account

有什么方法可以配置 ssh 为每个 bitbucket（或 github）帐户使用不同的密钥？

我的意思是，如果我要使用`*.bitbucket:user1`ssh 应该使用 key`id_rsa.user1`和 for `*.bitbucket:user2`should user`id_rsa.user2`

尝试过这样做：

```
IdentityFile ~/.ssh/id_rsa.user1
IdentityFile ~/.ssh/id_rsa.user2

Host *.bitbucket.org:user1*
  IdentityFile ~/.ssh/id_rsa.user1
  User git

Host *.bitbucket.org:user2*
  IdentityFile ~/.ssh/id_rsa.user2
  User git 
```

但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:19:43.563

使用 ssh，您可以轻松地命名您的 ssh 遥控器，以便使用一组密钥或另一组密钥，使用`%HOME%/.ssh/config`.
（这适用于 BitBucket 或 GitHub）

[以“更改 github 帐户 mac 命令行](https://stackoverflow.com/questions/9551448/change-github-account-mac-command-line/9551540#9551540)”为例

```
#User 1 on BitBucket
Host bitbucketu1
  HostName bitbucket.org
  User git
  IdentityFile ~/.ssh/id_rsa.user1

#User 2 on BitBucket
Host bitbucketu2
  HostName bitbucket.org
  User git
  IdentityFile ~/.ssh/id_rsa.user2 
```

然后，a`git clone bitbucketu1:repo1`将从 user1 克隆一个 repo。

# android - 用两个相同的精灵对象和引擎进行碰撞检测？

> ID：14936927
> 
> 赞同：1
> 
> 时间：2013-02-18T12:57:59.173
> 
> 标签：android, andengine

我正在开发一个游戏，其中在场景中以随机路径连续生成单个精灵。我对它们应用路径修饰符。在场景中的随机移动期间，一个精灵与另一个精灵重叠。**我想停止这种重叠。**

瞬间，我找到了两个解决方案。（或许）

**第一个**：这个原因我认为如果我检测到它们之间的碰撞然后给出一条新路径可能会解决。

**第二个**：如果我在发生碰撞时暂停路径修改器 2/3 秒，并在恢复路径修改器后再次移动。（有可能吗？）

我现在尝试了第一种方法。 **问题**：我无法唯一识别精灵以在更新处理程序中进行迭代。我不使用图层来附加。

我使用**通用池**来生成和回收它们。

**代码**：

```
public Iterator<EasyEnemy> eIt;

registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void onUpdate(float pSecondsElapsed) {
            try {
                // ===get EasyEnemy List from it===
                eIt = getEasyEnemyIterator();
                while (eIt.hasNext()) {
                    EasyEnemy ee = eIt.next();

                    // need some help here 
                    if (ee.collidesWith(ee)) {

                        // this doesn't work.

                    }
                }
            } catch (Exception e) {
            }
        }

        @Override
        public void reset() {

        }
    }); 
```

我尽量集中我的问题。如果有人有更好的解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T09:11:05.870

ee 变量描述了您要检查碰撞的对象。ee 将碰撞到的另一个对象在哪里？基本上，您正在检查 ee 与 ee 的碰撞。

一个对象永远不会与它自己碰撞:)

您需要有两个不同的对象来检查它们之间的碰撞。像这样，如果你有一个 ArrayList 中的所有对象。

```
for(int i = 0;  i< yourList.size()-1;i++)
{
    for(int j = 0;  j< yourList.size()-1;j++)
   {

      if(yourList.get(i)!= yourList.get(j))
        {
          if(yourList.get(i).collideswith(yourList.get(j))
           {
            //do what you want to do on collision :)
           }
         }

   }

 } 
```

# arm - 在 ARM Linux 上注册多个快速中断源

> ID：14936928
> 
> 赞同：1
> 
> 时间：2013-02-18T12:58:01.267
> 
> 标签：arm, linux-device-driver, embedded-linux

我一直在处理 ARM 上的 Linux 中断：

*   `request_irq()`可用于注册中断。

在单个中断线上，您可以使用 注册多个中断`SHA_SHIRQ`，即普通 IRQ。

*   Linux 是否允许在特定的中断线上注册多个 SA_INTERRUPT ？
*   也就是说，我们可以为 ARM**快速中断**或`FIQ`s 注册多个中断处理程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:08:15.963

与 一样`IRQ`，`FIQ`具有来自向量表的单个入口点。您必须根据位/数字检查中断控制器和分支以处理特定的`FIQ`. 对于`FIQ`，这往往会否定存储的**寄存器**，因为两个例程都必须共享它们。可以让一个`FIQ`例程拥有已存储**的寄存器**，而其他例程则显式保存它们。

当前的[Linux FIQ 代码](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/kernel/fiq.c;hb=HEAD)支持 FIQ 处理程序的堆叠，而不是多个同时`FIQ`源。您的代码可以使用[set_fiq_regs()](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/kernel/fiqasm.S;hb=HEAD)来初始化`FIQ`寄存器。您可以分配一个中断控制器基地址，并拥有检查`interrupt source`和分支到适当处理程序的代码。 **注意：**，内核不提供任何[与](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/include/asm/fiq.h;hb=HEAD)`FIQ`. 您将不得不编写自己的联锁。我认为 FIFO 实现和其他[无锁](http://en.wikipedia.org/wiki/Non-blocking_algorithm)内核模式`FIQ`一样应该是安全的。

**编辑：**`FIQ`这是主线代码中 的示例。它是一个 IMX SSI 驱动程序。 [SSI 汇编器](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-imx/ssi-fiq.S;hb=HEAD)、[符号接口](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/mach-imx/ssi-fiq-ksym.c;hb=HEAD)、[主文件](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=sound/soc/fsl/imx-pcm-fiq.c;hb=HEAD)。 `FIQ`也称为**软 DMA**。`FIQ`延迟非常小，应该允许高服务频率。通常只有一个设备需要这种关注。您可以在处理程序中多路分解（分支/函数调用/源编号上的指针）。`FIQ`a经常用汇编程序编写的原因是，如果你使用它，*性能*是隐含的。此外，`FIQ`通常不会被**屏蔽**，它会增加`IRQ` **延迟**对于系统的其余部分。通过在汇编程序中编码使其更快减少了`IRQ` **延迟**。

另请参阅：[FIQ-IRQ 差异](https://stackoverflow.com/questions/973933/what-is-the-difference-between-fiq-and-irq-interrupt-system)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:13:03.323

在同一个 IRQ 上注册的所有中断处理程序都放在列表中。当中断触发时，内核会依次调用每个中断处理程序（最后注册的先注册或先注册的先注册——我不记得是哪一个）。FAST_IRQ 在这方面并不特殊。

每个中断处理程序都有责任检查其硬件以查看它是否需要处理任何事情。如果没有，只需返回，以便下一个处理程序可以查看。

# c# - 创建自定义链接类

> ID：14936932
> 
> 赞同：0
> 
> 时间：2013-02-18T12:58:14.980
> 
> 标签：c#, asp.net, entity-framework

我对 C# 很陌生。请帮帮我。

```
 class BasicPay
    {
        public int employee_personal_id { get; set; }
        public int grade_id { get; set; }
        public int position_id { get; set; }
        public Int32 base_pay { get; set; }
        public Int32 housing { get; set; }

    private static void getEmployeeForEmpFinance(int empPersionalinfoID)
        {

            var context = new SSPModel.sspEntities();
            var query = from c in context.Employee_Financial
                        join d in context.Employee_Employ on
                        c.Employee_Personal_InfoEmp_id equals d.Employee_Personal_InfoEmp_id
                        where c.Employee_Personal_InfoEmp_id == empPersionalinfoID
                        select new { c.ID, c.Employee_Personal_InfoEmp_id, c.Base_Pay, c.Housing_Allowance, d.Grade_Id };
            var y = query.SingleOrDefault();
            var basic = new List<BasicPay>();

           **basic.Add(y.Employee_Personal_InfoEmp_id,y.Grade_Id);** // THIS IS WHAT I DO NOT UNDERSTAND

        }

} 
```

注释行是我没有得到的。我由自己的 BasicPay 类创建。现在如何将我的结果添加到其中？请帮帮我。我急需！

已编辑----- 所以我使用了下面其中一个人的建议并且它起作用了，我试图改进它.. 下面是我的新代码。

```
private static BasicPay  getEmployeeForEmpFinance(int empPersionalinfoID)
{

    var context = new SSPModel.sspEntities();
    var query = from c in context.Employee_Financial
                join d in context.Employee_Employ on
                c.Employee_Personal_InfoEmp_id equals d.Employee_Personal_InfoEmp_id
                where c.Employee_Personal_InfoEmp_id == empPersionalinfoID
                select new BasicPay
                {
                    employee_personal_id = c.Employee_Personal_InfoEmp_id,
                    grade_id = d.Grade_Id,
                    base_pay = c.Base_Pay,
                    housing = c.Housing_Allowance
                };
  var y = query.SingleOrDefault();

  return y;
} 
```

公共静态无效employee（int payperiodID）{

```
 var context = new SSPModel.sspEntities();
            var query = from c in context.Payroll_Batch
                        where c.PayperiodID == payperiodID
                        select c.Payroll_GroupID;
            int y = query.SingleOrDefault();

            Debug.WriteLine("group id: " + y);

            var query2 = from i in context.Employee_Employ
                         where (i.Payroll_Group == y && i.Grade_Id != null)
                         select new { i.ID,i.Employee_Personal_InfoEmp_id, i.Date_of_Appointment, i.Date_of_Employment, i.Grade_Id, i.Substantive_designation };
           var  empEmploy = query2.ToList();

           var basics = new List<BasicPay>();

           foreach (var x in empEmploy)
           {
               basics.Add(getEmployeeForEmpFinance(x.Employee_Personal_InfoEmp_id));

           }
           for (int c=0; c < basics.Count(); c++)
           {
               Debug.WriteLine(basics.ElementAt(c).employee_personal_id);
           }

} 
```

在这样做时，我最后得到以下错误。

> 你调用的对象是空的。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

注意 - 它确实打印出正确的数据集..最后只是得到这个错误。有什么理由吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:01:55.413

You can't insert an anonymous object into a List Simply do something like so:

```
 var query = from c in context.Employee_Financial
                        join d in context.Employee_Employ on
                        c.Employee_Personal_InfoEmp_id equals d.Employee_Personal_InfoEmp_id
                        where c.Employee_Personal_InfoEmp_id == empPersionalinfoID
                        select 
         new BasicPay 
         {
                  position_id = blah.ID,
                  housing = blah.Housing

        };
//I'm making stuff up as the property because I don't understand the stuff you are filling.
//Fill as appropriate 
```

Then after:

```
var y = query.SingleOrDefault();
var basics = new List<BasicPay>();
basics.Add(y); 
```

You can't do `y.ID` or `y.SomeProperty` because `y` is an `object`.. an `object` doesn't have those properties. So some of the suggested answers won't work :(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:02:51.520

How about

```
basic.Add(new BasicPay { employee_personal_id = y.Employee_Personal_InfoEmp_id, grade_id = y.Grade_Id}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:03:12.987

You are creating a list of `BasicPay` so you should put instances of this type into the list:

```
basic.Add(new BasicPay {employee_personal_id = y.Employee_Personal_InfoEmp_id, grade_id = y.Grade_Id}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T13:04:17.847

I guess the below solution will help you

```
BasicPay objPay = new BasicPay();
   objPay.employee_personal_id  = y.Employee_Personal_InfoEmp_id;
   objPay.grade_id              = y.Grade_Id;

   basic.Add ( objPay ); 
```

)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T13:05:53.177

您要么缺少构造函数，要么必须从默认构造函数初始化它：

```
public BasicPay(int empId, int gradeId)
{
    --> here initialization
} 
```

或者当您将所有属性设置为公共时，您可以使用默认构造函数：

```
basic.Add(new BasicPay
{
   employee_personal_id=y.Employee_Personal_InfoEmp_id,
   grade_id = y.Grade_Id
}); 
```

# php - 如何安装php 5.3.14 ubuntu 12.10

> ID：14936934
> 
> 赞同：3
> 
> 时间：2013-02-18T12:58:15.253
> 
> 标签：php

我必须在我的 ubuntu 12.10 上安装这个特定版本以保持与提供程序的兼容。我可以使用 synaptic 轻松安装 php 5.3.10，但无法升级到 5.3.14。我怎样才能做到这一点 ？Apt-get 不起作用...我在网上看到了几个 tutos，但没有特定于这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T12:45:03.537

删除和清除包：

```
apt-get remove php-apc php5 php5-mysql php5-gd php5-curl libapache2-mod-php5

apt-get autoremove 
```

确保在运行之前了解此命令的作用：

```
dpkg -l | grep '^rc' | awk '{print $2}' | xargs dpkg --purge 
```

您通常可以从旧版本中添加源代码而不必太担心：

**/etc/apt/sources.list.d/precise.list**

```
deb http://mirror.rackspace.com/ubuntu/ precise main restricted
deb-src http://mirror.rackspace.com/ubuntu/ precise main restricted
deb http://mirror.rackspace.com/ubuntu/ precise-updates main restricted
deb-src http://mirror.rackspace.com/ubuntu/ precise-updates main restricted
deb http://mirror.rackspace.com/ubuntu/ precise universe
deb-src http://mirror.rackspace.com/ubuntu/ precise universe
deb http://mirror.rackspace.com/ubuntu/ precise-updates universe
deb-src http://mirror.rackspace.com/ubuntu/ precise-updates universe 
```

这是一个可能过于宽泛但希望有启发性的 apt 首选项文件：

**/etc/apt/preferences.d/php_precise**

```
Package: php5
Pin: release a=precise
Pin-Priority: 1001

Package: php*
Pin: release a=precise
Pin-Priority: 1001

Package: php-*
Pin: release a=precise
Pin-Priority: 1001

Package: libapache2-mod-php5
Pin: release a=precise
Pin-Priority: 1001

Package: php5
Pin: release a=precise-updates
Pin-Priority: 1001

Package: php*
Pin: release a=precise-updates
Pin-Priority: 1001

Package: php-*
Pin: release a=precise-updates
Pin-Priority: 1001

Package: libapache2-mod-php5
Pin: release a=precise-updates
Pin-Priority: 1001 
```

更新并检查您的更改

```
apt-get update

apt-cache policy <package> to check which version will be installed (eg php5) 
```

进行一些测试运行，您可能需要将依赖项添加到首选项文件中

```
apt-get install <everything you removed before> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:06:10.980

这应该覆盖 apt-get 以获取最新版本的 PHP（但我认为只是稳定的，所以可能不会安装所有 alpha/beta 版本）

```
sudo add-apt-repository ppa:ondrej/php5
sudo apt-get update
sudo apt-get install php5
php5 -v 
```

此外，您可以更新您的偏好设置，以从不安装更高版本的软件包。您可以通过打开 /etc/apt/preferences 并添加以下内容来做到这一点：

```
Package: php
Pin: release v=5.3.14*,a=stable,c=main,o=Debian,l=Debian
Pin-Priority: 1001 
```

这是一个 Debian 的例子，但是 Ubuntu 是基于 Debian 的，因为我目前无法在实时的 Ubuntu 发行版上测试它，我认为这可能就足够了。

要使这个“版本封锁”起作用，您可能首先需要通过 apt-get 卸载 php，然后重新安装它，以便它坚持 5.3.14。

# javascript - 捕获phonegap ios后保存图像

> ID：14936943
> 
> 赞同：0
> 
> 时间：2013-02-18T12:58:41.977
> 
> 标签：javascript, jquery, ios, cordova

我正在使用 phonegap 开发 IOS 应用程序......我使用了默认的相机 api，因此用户可以为他的用户个人资料图片拍照。

该功能工作正常，但我的问题是用户捕获的图像不会保存在系统文件中，因此我可以在其他页面中检索它

这是我的代码

```
var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 

    // Wait for Cordova to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // Cordova is ready to be used!
    //
    function onDeviceReady() {
        pictureSource=navigator.camera.PictureSourceType;
        destinationType=navigator.camera.DestinationType;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      // console.log(imageData);

      // Get image handle
      //
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;

    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      // console.log(imageURI);

      // Get image handle
      //
      document.getElementById('smallImage').src='img/me2.jpg';
      var smallImage = 'img/me2.jpg';

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = imageURI;
    }

    // A button will call this function
    //
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL });
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50, allowEdit: true,
        destinationType: destinationType.DATA_URL });
    }

    // A button will call this function
    //
    function getPhoto(source) {
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
        destinationType: destinationType.FILE_URI,
        sourceType: source });
    }

    // Called if something bad happens.
    // 
    function onFail(message) {
      alert('Failed because: ' + message);
    } 
```

用户使用相机拍照后如何覆盖文件（“img/me2.jpg”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:32:08.727

您不能覆盖 img/me2.jpg，因为该文件位于应用程序包中。

您必须将捕获的图像保存在应用程序数据文件夹中（例如使用PhoneGap 的文件API），然后将url 保存在localStorage 中，您可以随时从中检索它。

# php - 使用 ajax 完成我的搜索输入

> ID：14936944
> 
> 赞同：0
> 
> 时间：2013-02-18T12:58:47.707
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我知道我已经在 30 分钟前发布了，但我认为我已经接近我的搜索帖子输入：

我创建了一个看起来像这样的模型

```
 function matchPosts($keyword)
{
    $this->db->get('posts');
    $data = array();
    $query = $this->db->query("SELECT title,body FROM posts WHERE title LIKE '%$keyword%' or body LIKE '$keyword%' AND status='published'");        
    if( $query->num_rows() > 0)
    {
        $data = $query->row_array();
    }       
    $query->free_result();
    return  $data;
} 
```

我正在尝试从我的数据库中获取匹配项，

控制器如下所示：

```
public function searchPosts()
{
    $keyword = $this->input->post('search_value', TRUE);

    $matched_field = $this->Model_cats->matchPosts($keyword);

    echo $keyword;

    if( count($matched_field) > 0)
    {
        $this->load->view('posts_list');
    }
    else
    {
        $this->load->view('posts_list');
    }
} 
```

这是js文件

```
$(document).ready(function()
{
    $("#search_posts").keyup(function()
    {        
        var searchValue = $(this).val();

        $(".posted_post").each(function()
        {
               $.ajax({             
                    type: "POST",
                    url : "http://local.blog.com/welcome/searchPosts",
                    data: {
                        search_value: searchValue   
                    },  
                    success: function(data)
                    { 
                        if(data)
                        {
                            $(this).show(); 
                        }
                        else
                        {
                            $(this).fadeOut();      
                        }

                    }
                });
        });
    });
}); 
```

和观点：

```
 <br>    
<form action="" method="post"> 
        <label for="search_posts"><b>Search Posts</b></label>
        <input type="text" id="search_posts" value="" />
</form> 
```

posts_list 是我循环浏览帖子的视图...

我接近了吗？在这种状态下它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:14:01.157

将您的脚本编辑为

```
$("#search_posts").keyup(function()
{        
    var posts = $(this).val();        
    //$(".posted_post").each(function()
    //{
        $.ajax({
            url : 'http://local.blog.com/welcome/searchPosts',
            data: {posts},  
            success : function(data)
            {
                 $(this).show();
            }
        });
    //}
}); 
```

并从

```
$matched_field = $this->Model_cats->matchPosts($keyword); 
```

$matched_field 返回找到正确的搜索结果的数量..??然后您只需检查

```
if($matched_field)
{
      //Here you can print result of search
}
else
{
      //You can print No results found
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:18:05.117

在您的 match_posts 函数中，您在搜索帖子函数中使用 num_rows () 您正在从上述函数收集结果并使用 === 与布尔值 true 进行比较。尝试 var dump 确认从 num rows 函数返回什么类型的值。我认为您正在将 numeric 与 boolean 进行比较。相反，您可以使用 if count (matched fields) > 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:14:49.103

**模型**

```
class SomeModel extends CI_Model{

    /**
     * Get Posts
     * 
     * @param string LIKE param
     * @return mixed Object/Array or Boolean
     **/
    public function get_posts( $like ){

        $query = 
        $this->db
             ->select('id, title, body')
             ->like('title'   => $like)
             ->or_like('body' => $like) //not sure if your looking for FULLTEXTSEARCH on this body
             ->get_where('posts', array('status' => 'published'));

        return ( $query->num_rows() > 0) ? $query->result() : FALSE;
    }
} 
```

**路线**

```
//edit to match your class/method
$route['search/(:any)'] = 'welcome/search_posts/$1'; 
```

**控制器**

```
class Welcome extends CI_Controller{

    public function search_posts( $like ){

        if( !$posts = $this->SomeModel->get_posts( $like ))
        {
            return show_404();
        }

        //return partial view without template
        return $this->load->view('public_home', array(
            'posts' =>  $posts
        ), TRUE);
    }
} 
```

**局部视图（用于 ajax）**

```
/**
<ul>
    //<?php foreach($posts as $post): ?>
    <li>
        <a href=#>
            <h4><?php echo html_escape($post->title) ?></h4>
            <p>
                <?php echo html_escape($post->body) ?>
            </p>
        </a>
    </li>
    //<?php endforeach; ?>
</ul>
**/ 
```

**jQuery**

```
var SITEURL = "<?php echo site_url(); ?>";

;(function($){

    var search = {
        init: function(){

            if($('#search_posts'))
            {
                this.searchPosts();
            }

        },
        searchPosts : function(){

            var searchInput = $("#search_posts")
                result      = $("#result"),
                timeout     = '';

            //ajax request
            var doAjax = function( context, data ){
                $.ajax({
                    cache    : false,
                    url      : SITEURL + 'search/' + data.keyword,
                    dataType : 'html',
                    type     : 'POST',
                    data     : data,
                    context  : context,
                    success  : function( callback ){
                        $(this).html( callback ); //$(this) = context => $("#result")
                    }
                });
            };

            //delayed keyup event
            searchInput.on('keyup', function( event ){

                if(timeout) {
                    window.clearTimeout(timeout);
                    timeout = null;
                }

                //listen for keyup after delayed(1000)
                timeout = window.setTimeout(function(){
                    var inputVal = $(this).val();
                    var data     = {
                        'keyword'   : inputVal
                    }
                    return doAjax( result, data );//execute ajax function
                }, 1000);

            });

        }
    };

    $(function(){
        search.init();
    });

})(jQuery); 
```

# android - Opencv4Android：如何在 Eclipse 中使用它？

> ID：14936951
> 
> 赞同：0
> 
> 时间：2013-02-18T12:59:00.280
> 
> 标签：android, eclipse, opencv

我是 Android 世界的新手，将在其中使用 OpenCV 库。我从 source-forge 下载**[了 Opencv4Android-SDK](http://sourceforge.net/projects/opencvlibrary/files/opencv-android/2.4.4/)**并尝试使用本[教程](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html#import-opencv-library-and-samples-to-the-eclipse)使用包资源管理器将其导入 Eclipse 。一切顺利，但我遇到了这个错误：

```
Unable to resolve target 'android-9'    OpenCV Library - 2.4.2      Unknown Android Target Problem  

The type java.lang.Object cannot be resolved. It is indirectly referenced from required .class files    Video.java  /OpenCV Library - 2.4.2/src/org/opencv/video    line 1  Java Problem  

The project cannot be built until build path errors are resolved    OpenCV Sample - 15-puzzle       Unknown Java Problem

The container 'Android Dependencies' references non existing library 'C:\andcv\OpenCV-2.4.2-android-sdk\sdk\java\bin\opencv library - 2.4.2.jar'    OpenCV Sample - 15-puzzle       Build path  Build Path Problem

Unable to resolve target 'android-11'   OpenCV Sample - 15-puzzle       Unknown Android Target Problem

The project was not built since its build path is incomplete. Cannot find the class file for java.lang.Object. Fix the build path then try building this project    OpenCV Library - 2.4.2      Unknown Java Problem 
```

我正在使用最新的 Android SDK，其中包括基本的 Android SDK 组件和带有内置 ADT 的 Eclipse IDE 版本。
我该如何解决这个错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T23:08:22.707

To solve the "Unable to resolve target 'android-11' OpenCV Sample - 15-puzzle" error, you just have to: 1\. right click on your project > Properties > Android 2\. then choose the target name there. remember that the API's cannot be less than what needed.

For the other problem, I am still on the lookout for a solution. I have the same problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T16:31:14.670

您需要通过 Android SDK Manager 安装 API11 和 API9（然后关闭/重新打开 Eclipse）。API9 已弃用，因此要查看它以供下载，您必须在窗口底部标记“过时”复选标记。

# matlab - 断言无限长度的一维双数组（matlab编码器）

> ID：14936954
> 
> 赞同：0
> 
> 时间：2013-02-18T12:59:10.373
> 
> 标签：matlab, pinvoke, matlab-coder

我目前正在使用此代码：

```
assert(isa(values,'double'));
assert(size(values, 1) <= 1000); 
```

说服 matlab 编码器将值设为一维数组。最终目标是能够通过 C# 和 PInvoke 与其交互。这将创建一个包含以下内容的 C 签名：

```
const real_T values[1000], const int32_T values_size[1] 
```

即使对于长度小于 1000 的一维数组，我似乎也可以使用它。是否有更巧妙的方法来实现上述目标（即断言值是无限长度的一维数组）？

PS：

我也用过：

```
assert(all(size(values) == [1 Inf])); 
```

但现在搁置了这个，因为创建的结构似乎非常复杂（另见[这里](https://stackoverflow.com/questions/14924909/pinvoke-for-struct)），我不知道如何从 C# 填充它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:28:38.453

Matlab 编码器现在似乎支持动态内存分配（我上次在 2008 年左右使用它时不是这种情况）。

一个完整的例子：[http ://www.mathworks.de/products/matlab-coder/examples.html?file=/products/demos/shipping/coder/coderdemo_atoms.html](http://www.mathworks.de/products/matlab-coder/examples.html?file=/products/demos/shipping/coder/coderdemo_atoms.html)

更新：对于动态大小的数组 Matlab 使用 EMX 数据结构： http: [//www.mathworks.de/de/help/fixedpoint/ug/c-code-interface-for-unbounded-arrays-and-structure-fields.html](http://www.mathworks.de/de/help/fixedpoint/ug/c-code-interface-for-unbounded-arrays-and-structure-fields.html)

# jquery - jquery：选择具有给定名称和值的输入

> ID：14936958
> 
> 赞同：20
> 
> 时间：2013-02-18T12:59:28.953
> 
> 标签：jquery, jquery-selectors

我想检查名为 weekday 并且 value = 1 的输入。我尝试了下面的行。它检查所有工作日。

```
$('input[name = weekday], [value =1]').attr("checked", "checked"); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-18T13:00:06.067

不要使用逗号将两个条件应用于同一元素。

```
$('input[name=weekday][value=1]').attr("checked", "checked"); 
```

作为旁注，您应该使用[prop()](http://api.jquery.com/prop/)而不是[jQuery doc](http://api.jquery.com/attr/)建议并由@tyleha 指出的`attr()`属性*。*

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法。

您可以使用[.prop(propertyName, value)](http://api.jquery.com/prop/#prop-propertyName-value)来设置选中的属性，如下所示。

```
$('input[name=weekday][value=1]').prop("checked", true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:00:27.817

不需要逗号。尝试：

```
 var checked = $('input[name = weekday][value =1]').attr("checked", "checked"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T13:00:40.917

试试这个

```
$('input[name=weekday][value=1]').attr("checked", "checked"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T13:00:59.547

逗号分隔多个选择器，因此您正在搜索名为“weekday”的输入*以及*value = 1 的任何类型的元素。

要将这两个条件组合到一个选择器中，只需将它们一个接一个地添加：

```
$('input[name=weekday][value=1]').attr("checked", "checked"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-13T20:16:21.160

```
<input type="radio" name="some[thing]" value="one">
<input type="radio" name="some[thing]" value="two">
<input type="radio" name="some[thing]" value="three">
<input type="radio" name="some[thing]" value="four">
<input type="radio" name="some[thing]" value="five">
<input type="radio" name="some[thing]" value="six">

alert('1');
 $("input[value='four'][name='some\\[thing\\]']").attr("checked",true);
alert('2'); 
 $("input[value='four'][name='some\\[thing\\]']").attr("checked",false);
alert('3'); 
```

# asp.net - 如何避免特定记录的gridview并发更新？

> ID：14936965
> 
> 赞同：0
> 
> 时间：2013-02-18T12:59:59.230
> 
> 标签：asp.net

在 Gridview 中，当用户更新记录时，如何限制其他用户不更新同一记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:09:09.730

如果您的意思是如何避免数据库级别的并发错误，您可以通过用于更新记录的代码来实现。

[这是](https://stackoverflow.com/questions/1195858/how-to-deal-with-concurrent-updates-in-databases)关于这个主题的一个很好的链接。还有很多其他的。

如果您的意思是“我怎样才能阻止用户甚至开始编辑其他人正在另一个 GridView 中更新的记录”，那将更加复杂。有很多不同的方法可以做到这一点，但我想我会考虑保留正在更新的记录的 ID 的缓存，并通过一些方法使条目过期（在用户开始编辑但徘徊的情况下）关闭、遭受系统故障或以其他方式从未完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:33:05.360

有一些方法可以一次将记录“锁定”给一个用户，但是这会导致数据库非常慢，更不用说在现实世界的情况下它根本不那么实用。避免并发问题的更好方法是在加载 gridview 时捕获原始值，并且一旦运行更新语句或删除语句，如果原始值不匹配，数据库将拒绝该命令。看看我几周前做的这个项目的下面的代码。特别注意原始值引用。

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConflictDetection="CompareAllValues" 
            ConnectionString="<%$ ConnectionStrings:TechSupport_DataConnectionString %>" 
            DeleteCommand="DELETE FROM [Technicians] WHERE [TechID] = @original_TechID AND [Name] = @original_Name AND [Email] = @original_Email AND [Phone] = @original_Phone" 
            InsertCommand="INSERT INTO [Technicians] ([Name], [Email], [Phone]) VALUES (@Name, @Email, @Phone)" 
            OldValuesParameterFormatString="original_{0}" 
            SelectCommand="SELECT * FROM [Technicians] WHERE ([TechID] = @TechID)" 
            UpdateCommand="UPDATE [Technicians] SET [Name] = @Name, [Email] = @Email, [Phone] = @Phone WHERE [TechID] = @original_TechID AND [Name] = @original_Name AND [Email] = @original_Email AND [Phone] = @original_Phone">
            <SelectParameters>
                <asp:ControlParameter ControlID="DropDownList1" Name="TechID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
            <DeleteParameters>
                <asp:Parameter Name="original_TechID" Type="Int32" />
                <asp:Parameter Name="original_Name" Type="String" />
                <asp:Parameter Name="original_Email" Type="String" />
                <asp:Parameter Name="original_Phone" Type="String" />
            </DeleteParameters>
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String" />
                <asp:Parameter Name="Email" Type="String" />
                <asp:Parameter Name="Phone" Type="String" />
                <asp:Parameter Name="original_TechID" Type="Int32" />
                <asp:Parameter Name="original_Name" Type="String" />
                <asp:Parameter Name="original_Email" Type="String" />
                <asp:Parameter Name="original_Phone" Type="String" />
            </UpdateParameters>
            <InsertParameters>
                <asp:Parameter Name="Name" Type="String" />
                <asp:Parameter Name="Email" Type="String" />
                <asp:Parameter Name="Phone" Type="String" />
            </InsertParameters>
        </asp:SqlDataSource> 
```

调整 sql 语句后，您只需要一些代码来使用事件处理程序（例如“插入项目”等）处理任何数据库异常。请参见下面的代码。

```
protected void DetailsView1_ItemUpdated(object sender, DetailsViewUpdatedEventArgs e)
    {
        if (e.Exception != null)
        {
            lblError.Text = "A database error has occurred.<br /><br />" + "Message: " + e.Exception.Message;
            e.ExceptionHandled = true;
            e.KeepInEditMode = true;
        }
        else if (e.AffectedRows == 0)
            lblError.Text = "Another user may have updated that product." + "<br />Please try again.";
        else
            DetailsView1.DataBind();
    }
    protected void DetailsView1_ItemDeleted(object sender, DetailsViewDeletedEventArgs e)
    {
        if (e.Exception != null)
        {
            lblError.Text = "A database error has occurred.<br /><br />" + "Message: " + e.Exception.Message;
            e.ExceptionHandled = true;
        }
        else if (e.AffectedRows == 0)
            lblError.Text = "Another user may have updated that product." + "<br />Please try again.";
        else
            DetailsView1.DataBind();
            DropDownList1.DataBind();
    }
    protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
    {
        if (e.Exception != null)
        {
            lblError.Text = "A database error has occurred.<br /><br />" + "Message: " + e.Exception.Message;
            e.ExceptionHandled = true;
            e.KeepInInsertMode = true;
        }
        else
            DetailsView1.DataBind();
        DropDownList1.DataBind();

    } 
```

希望有帮助。

# javascript - jQuery 更新如果 DOM 改变了

> ID：14936966
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:01.773
> 
> 标签：javascript, jquery, asp.net-mvc

我是 jQuery 新手，如果您能帮助我，我会遇到一个问题。

当用户单击链接时，我有一个表单/元素列表（来自 db）。每个元素都有一个使用 jQuery 生成的删除按钮。如果单击，该按钮会自行删除它和输入文本框。我还有一个添加新的 texbox 按钮。此按钮创建一个新的文本框和删除按钮。

我所有的文本框都有一个 name[i] -value；

```
name[1]  
name[2] 
name[3]
... 
... 
```

问题是当我删除一个文本框时，该值将被删除*（如 i--)*。旧值不会更新。在我的回帖中，我只从“按顺序”的文本框中获取值，即如果一个 texbox 值被跳过，例如

> ```
> name[1]  
> name[2]  
> name[4] 
> name[5]
> ... 
> ```

它不会被退回。（在这种情况下，我只会返回值名称[1](http://jsfiddle.net/6vmMy/1/)和 [2]）。

我需要帮助我如何构建一个数组并将我的所有值存储到数组中。然后从数组中更新我的所有值。

**这是我的 javascript 代码：**

> $(function () { var scntDiv = $('#TextBoxesGroup');
> 
> ```
> var i = $('#TextBoxesGroup p').size();
> 
> $('#addButton').live('click', function () { 
> ```

*   //线刹车使其更具可读性

> ```
>  $('<p>
>         <label for="Students_' + i + '__Name">Name: </label>
>         <input type="text" class="text-box single-line" id="Students_' + i + '__Name" size="20" name="Students[' + i + '].Name" placeholder="Student name..." /> 
>         <button id="remove">Remove</button>
>     </p>').appendTo(scntDiv);
>     i++;
>     return false;
> });
> 
> $('#remove').live('click', function () {
>     if (i >= 0) {
>         $(this).parents('p').remove();
>         i--;
>         var array = $('#TextBoxesGroup p')
>         alert(array.length);
>     }
>     return false;
> }); }); 
> ```

这是小提琴：

*   [http://jsfiddle.net/6vmMy/1/](http://jsfiddle.net/6vmMy/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:17:48.357

我感觉您希望至少有一个学生，所以我会在标记中添加一个：

```
<div id="container">
    <div id="TextBoxesGroup"> <span>
        Press to add textbox and remove button    
         </span>
    </div>
    <p class="students">
        <label>Name:
            <input type="text" class="text-box single-line" size="20" placeholder="Student name..."
            />
        </label>
        <button class="removeStudent">Remove</button>
    </p>
    <input type='button' value="Add more Students" id="addButton"  />
</div> 
```

然后，我会简单地操纵那个添加更多：（详细显示步骤等，可以巩固一下）

```
$(function () {
    var scntDiv = $('#TextBoxesGroup');
    $('#addButton').click(function () {
        var lastStudent= $(".students").last();
        var newName =  lastStudent.clone();
        newName.find('.single-line.text-box').val("new student");
        lastStudent.after(newName);
    });
    $('#container').on('click', '.removeStudent', function () {
        if ($('.students').length > 1) {
            $(this).parents('p').remove();
        }
    });
}); 
```

这会克隆最后一个，将其插入到最后一个之后，并始终保留至少一个学生，并允许删除其中的任何一个。否则，我会研究达林提供的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:07:54.867

我建议您看一下，[`following article`](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)它说明了通过使用默认模型绑定器支持的非顺序索引来实现目标的更好选择。这样，您在删除元素时不会在索引中留下*漏洞*，这将使您的代码更容易。这篇文章的作者还提供了一个很好的自定义 HTML 帮助`Html.BeginCollectionItem`器，它允许您隐藏生成正确标记所需的所有管道。

备注：`.live()`已在 jQuery 1.9 中删除。您应该改用该`.on()`方法。

# python - 如何在 Python 中只获取匹配的文本？

> ID：14936971
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:06.567
> 
> 标签：python, regex

我在 Python 中有以下代码

```
import psutil
import re

_list = psutil.get_pid_list()

for i in _list:
    if i > 0:
        _process_path = psutil.Process(i).exe
        _match = re.search('\/Applications\/.*\.app\/',_process_path)
        if _match:
            print _process_path 
```

它有效，这是它返回的示例：

```
/Applications/RegExr.app/Contents/MacOS/RegExr
/Applications/Google Chrome.app/Contents/Versions/24.0.1312.57/Google Chrome Helper.app/Contents/MacOS/Google Chrome Helper
/Applications/TextWrangler.app/Contents/Helpers/Crash Reporter.app/Contents/Helpers/crash-catcher
/Applications/TextWrangler.app/Contents/MacOS/TextWrangler
/Applications/Google Chrome.app/Contents/MacOS/Google Chrome
/Applications/Utilities/Activity Monitor.app/Contents/MacOS/Activity Monitor
/Applications/AppCleaner.app/Contents/Library/LoginItems/AppCleaner Helper.app/Contents/MacOS/AppCleaner Helper
/Applications/Transmit.app/Contents/MacOS/TransmitMenu.app/Contents/MacOS/TransmitMenu
/Applications/Twitter.app/Contents/MacOS/Twitter
/Applications/ScreenFlow.app/Contents/MacOS/ScreenFlowHelper.app/Contents/MacOS/ScreenFlowHelper 
```

我怎样才能让它只返回这个呢？

```
/Applications/RegExr.app
/Applications/Google Chrome.app
/Applications/TextWrangler.app/Contents/Helpers/Crash Reporter.app
/Applications/TextWrangler.app
/Applications/Google Chrome.app
/Applications/Utilities/Activity Monitor.app
/Applications/AppCleaner.app
/Applications/Transmit.app
/Applications/Twitter.app
/Applications/ScreenFlow.app 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:01:00.793

使用以下[`MatchObject.group()`方法](http://docs.python.org/2/library/re.html#re.MatchObject.group)打印匹配的组：

```
print _match.group() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T13:01:52.477

Your `_match` object can return the matched text as `_match.group(0)`.

# layout - Yii 模块，主题布局包括模块布局。如何做到这一点？

> ID：14936972
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:07.253
> 
> 标签：layout, module, yii, themes

我需要做这样的事情：

我在 /themes/panel 中有主题“面板”，并在 /themes/panel/views/layouts/main.php 中有示例内容

```
<a>$content</a> 
```

我在 /protected/modules/admin 中有模块“admin”，并在 /protected/modules/admin/view/layouts/main.php 中有示例内容

```
<b>$content</b> 
```

最后我想要

```
<a><b>view</b></a> 
```

同样在 /themes/panel/views/layouts/main.php 我需要从模块加载 css 文件。

* * *

在其他解释中：我为所有面板（页眉、css 文件、页脚）设置了一个模板，但每个面板都需要单独的布局（只有内容的中间部分会发生变化，如菜单等）和一个或多个单独的 css 文件。

此外，一些图像将包含在主题中，其他图像将是单独的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:10:02.817

您可以使用 renderPartial 函数来加载布局的各个部分。

```
<?= $this->renderPartial('webroot.themes.' . Yii::app()->theme->name . '.views.layouts.' . Yii::app()->layout . '.<PART_OF_LAYOUT>') ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T15:44:27.793

我不同意在 Internet 的许多帮助论坛中，当有人要求为模块设置主题时，每个人都会建议主题文件夹的路径别名。我认为这是错误的，因为它意味着要拆分模块，并且模块应该是可以跨项目使用的黑盒。只有在多个模块之间共享一个主题时，此类论坛中给出的建议才有效。如果有人想在模块中“打包”一个主题，她可以： - 将一个 init 函数添加到模块的控制器 - 在该 init 中，使用类属性布局和路径别名，像这样，假设一个模块的 id是“样本”：然后添加到 SampleCONtroller.php：

```
public function init() {
    //BELOW: it will use the layouts/main.php inside the module.
    $this->layouts = "sample.views.layouts.main"; 
} 
```

你可以在这里查看路径别名： [http ://www.yiiframework.com/doc/guide/1.1/en/basics.namespace](http://www.yiiframework.com/doc/guide/1.1/en/basics.namespace)

# c# - 创建基于 Web 的设备配置实用程序

> ID：14936973
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:10.000
> 
> 标签：c#, windows-ce

我想为 WIN CE 6.0 设备开发基于 Web 的配置实用程序。该网页预计用于配置/访问/修改设备的注册表设置、重启设备等。WIN CE 设备上运行着一个网络服务器。我不知道如何开始。

建议一些使用网页修改注册表值的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:07:52.173

查看默认 Web 管理模块的源代码。公平的警告，它是 ISAPI，除了`MessageBox`调用之外几乎不可能调试任何东西，并且必须在 C++ 中完成。但它是免费的。

源代码与 Platform Builder 一起安装，并最终在您的开发机器上

`%WINCEROOT%\PUBLIC\SERVERS\OAK\SAMPLES\HTTP\WEBADMIN`

另一个免费选项是在目标上创建并安装一个 COM 对象（用 C++ 编写，最有可能使用 ATL）。然后，您的网页可以创建该对象的一个​​实例，并使用它与使用内置“经典”ASP 服务器的设备进行交互。在已经部署的设备或您不创建操作系统的设备上安装 COM 对象将是一个巨大的支持挑战。调试这些对象并不有趣（虽然如果你构建一个单独的测试加载器应用程序比 ISAPI 稍微容易一些）。另请注意，内置的 ASP 服务器仅支持 ASP 3.0 的一个非常缩减的子集（从一开始就已过时）。

我们曾经做过的所有基于 Web 的设备管理（我们已经做了十年）都是通过[Padarn Web Server](http://www.opennetcf.com/Products/Padarn.aspx)完成的，它使用 C# 遵循 IIS 对象模型的一个子集。这是一个商业产品，所以它不是免费的，而且为了全面披露，它是我们创建的产品（因为我觉得内置选项太糟糕了）并出售。

# android - AndEngine：旋转修改器在 MultiTouch 中对第二根手指没有视觉效果

> ID：14936975
> 
> 赞同：1
> 
> 时间：2013-02-18T13:00:10.983
> 
> 标签：android, andengine

我的游戏中有两个滑块，分别旋转和缩放+定位玩家精灵。

左滑块旋转精灵和右缩放 + 以一定速度移动玩家

我已经包含了 MultiTouch 扩展

问题是；

当我先触摸左滑块（先旋转）然后再触摸第二个即右滑块时，一切正常。但是，当我先触摸右侧滑块，然后再触摸左侧时，会发生旋转，但在视觉上看不到旋转。

可能是什么问题？如果需要，请分享代码

**ONAREATOUCHED 的旋转滑块代码**

```
 @Override
   public boolean onAreaTouched(TouchEvent touchEvent,float pTouchAreaLocalX,float pTouchAreaLocalY) {

        mPlayer.clearRotationModifiers();
        float currentRotationValue;

        if(touchEvent.isActionDown())
        {

            //gesture detector enabled for rotation slider only
            mGestureDetector.onTouchEvent(touchEvent.getMotionEvent());

            this.LastPositionTouched=touchEvent.getMotionEvent().getY();
            currentRotationValue=this.CalculateCurrentCalibratedValue(pTouchAreaLocalY);

            mPlayer.MakeRotation(currentRotationValue);
            mPlayer.pressedPlayerActionOnRotation=1; //press started
        }
        if( touchEvent.isActionMove() )
        {

            this.DistanceConveredSinceLastDownEvent=touchEvent.getMotionEvent().getY()-this.LastPositionTouched;

            if( Math.abs(this.DistanceConveredSinceLastDownEvent) > HUDBar.minScrollDistanceCovered ){

                    mPlayer.pressedPlayerActionOnRotation=1;
                    currentRotationValue=this.CalculateCurrentCalibratedValue(pTouchAreaLocalY);                                
                    mPlayer.MakeRotation(currentRotationValue);
                }
            this.LastPositionTouched=touchEvent.getMotionEvent().getY();

        }
        if(touchEvent.isActionUp())
        {
            this.LastPositionTouched=0;
            MainActivity.this.mPlayer.pressedPlayerActionOnRotation=0; //pressing stopped
            mPlayer.resetRotation(-90); 
            //----reset debug variables-----
        }
        return true;
    }
}; 
```

**深度滑块代码**

```
 @Override
    public boolean onAreaTouched(TouchEvent touchEvent,float pTouchAreaLocalX,float pTouchAreaLocalY)
    {

        float ScaleValue,StringLengthFactor,SpeedFactor;

        //mPlayer.clearEntityModifiers();

        if(touchEvent.isActionDown())
        {

            //for implementing custom longpress
            this.isActionDownOccured=true;
            //mPlayer.pressedTime=touchEvent.getMotionEvent().getEventTime();
            this.initialTime=touchEvent.getMotionEvent().getDownTime();
            this.pressedTime=this.initialTime;

            /////////////////////////////////////////////       
            this.LastPositionTouched=touchEvent.getY();
            //gesturedetector onDown motionevent passed in onLongPress
        //  mGestureDetector.onTouchEvent(touchEvent.getMotionEvent());

            ScaleValue=this.CalculateCurrentCalibratedValue(pTouchAreaLocalY);                  
            StringLengthFactor =   ScaleValue * ScaleToStringLengthConversionFactor;
            SpeedFactor        =  (ScaleValue>0) ? ScaleValue * ScaleToSpeedConversionFactor:0;

            //---display local variables before set speed----------------
            /*MainActivity.this.txtLoggingSpriteVariables.setText( 
                    "TouchAreaLocalY: "+Float.toString(pTouchAreaLocalY)+
                    "  Speed From:"+
                    Float.toString(MainActivity.this.mPlayer.getSpeed())+
                    " to: "+ Integer.toString(currentSpeedValue) 
                    );
            */

            mPlayer.setSpeedAndScaleInParallel(SpeedFactor, ScaleValue);
            mPlayer.setDeltaStringLength(StringLengthFactor);

            MainActivity.this.txtDepthLogger.setText("DepthSlider Down Event"+(MainActivity.this.MoveEventDepthSliderCount++)+"\n"+
                     "PointerCount "+touchEvent.getMotionEvent().getPointerCount()+" New Scale:"  + mPlayer.getScaleX()+" \n " +
                     " New Speed: "+ mPlayer.getSpeed()
                    );

            MainActivity.this.mPlayer.pressedPlayerActionOnDepth=1; //depth slider pressed
        }
        if(touchEvent.isActionMove())
        {

            this.DistanceConveredSinceLastDownEvent=touchEvent.getY()-this.LastPositionTouched;

            if( Math.abs(this.DistanceConveredSinceLastDownEvent) > HUDBar.minScrollDistanceCovered ) {

                ScaleValue=this.CalculateCurrentCalibratedValue(pTouchAreaLocalY);                  
                StringLengthFactor =   ScaleValue * ScaleToStringLengthConversionFactor;
                SpeedFactor        =  (ScaleValue>0) ? ScaleValue * ScaleToSpeedConversionFactor:0;

                MainActivity.this.mPlayer.setSpeedAndScaleInParallel(SpeedFactor, ScaleValue);
                MainActivity.this.mPlayer.setDeltaStringLength(StringLengthFactor);

                //reset LongPress variables

                mPlayer.pressedPlayerActionOnDepth=1;
                this.initialTime=touchEvent.getMotionEvent().getEventTime();
                this.pressedTime=this.initialTime;

                MainActivity.this.txtDepthLogger.setText("DepthSlider Move Event"+(MainActivity.this.MoveEventDepthSliderCount++)+"\n"+
                        "PointerCount "+touchEvent.getMotionEvent().getPointerCount()+  " \n " +
                        "D: " + this.DistanceConveredSinceLastDownEvent +" New Scale:" + mPlayer.getScaleX()+" \n " +
                         " New Speed: "+ mPlayer.getSpeed()
                        );
                /*MainActivity.this.txtDepthLogger.setText("Depth CurrX"+touchEvent.getX()+"\n"+
                        "barxrange"+this.getWidth() +"DepthSlider Move Event"+(MainActivity.this.MoveEventDepthSliderCount++)+
                        "PointerID: "+touchEvent.getPointerID()
                        );*/ 

            }
            this.LastPositionTouched=touchEvent.getY();

        }
        if(touchEvent.isActionUp())
        {
            //-----reset speed,scale and stringlength will persist---------------
            MainActivity.this.mPlayer.pressedPlayerActionOnDepth=0; //pressing stopped
            this.isActionDownOccured=false;
            this.initialTime=0;
            this.pressedTime=0;
            this.LastPositionTouched=0;

            MainActivity.this.mPlayer.setSpeed(0);

            //----reset debug variables-----
            MainActivity.this.LongPressEventDepthSliderCount=0;
            MainActivity.this.MoveEventDepthSliderCount=0;

            //MainActivity.this.txtLoggingEventCount.setText("");
            //MainActivity.this.txtLoggingSpriteVariables.setText("");
        }
        return true;
    }
}; 
```

我将 GestureListener 的 onLongPress 用于 Rotation Slider，并为深度滑块编写了自定义 onLongPress，因为手势侦听器不支持 MultiTouch。我在播放器精灵上执行 onLongPress、OnScroll 事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:44:00.677

我找到了解决我的问题的方法

我在 touchevent 上清除了所有以前的旋转修改器

我只在有效事件上清除了旋转修饰符。它开始工作了。

也许它对其他人也有用。

# php - 模型规则的批量分配

> ID：14936978
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:20.620
> 
> 标签：php, yii

我想知道是否有一种简单的方法可以为模型批量分配一组新规则。

用例是我可以有一个验证器规则，其中包含一组特定模型的子规则。我想动态加载该模型，分配其属性（我都知道如何做），然后批量分配规则集。规则将如下所示：

```
'rules' => array(
    array('road', 'string'),
    array('town', 'string'),
    array('county', 'string'),
    array('post_code', 'string'),
    array('telephone', 'integer')
) 
```

我知道我可以通过单独挑选类并手动构建验证器来做到这一点，但是有没有简单的方法来告诉 Yii 模型用这个规范重新加载验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:06:11.770

[实际上，我最终通过 Github 上的一个问题（ https://github.com/yiisoft/yii/issues/987#issuecomment-8886072](https://github.com/yiisoft/yii/issues/987#issuecomment-8886072) ）找到了答案，其中提到了查看`CModel` `validatorList`. 在浏览了这个源代码一段时间后，我想出了以下一段代码，大部分是从`CModel`它自己身上撕下来的：

```
$c=new EMongoModel();
foreach($this->rules as $rule){
    if(isset($rule[0],$rule[1]))  // attributes, validator name
        $c->validatorList->add->add(CValidator::createValidator($rule[1],$this,$rule[0],array_slice($rule,2)));
    else
        throw new CException(Yii::t('yii','{class} has an invalid validation rule. The rule must specify attributes to be validated and the validator name.',
                    array('{class}'=>get_class($this))));
} 
```

现在，这允许我获取一个看起来像模型验证规则的数组元素列表，并在现场实际将它们变成模型的验证规则。

# mysql - MySQL 事件在间隔后未运行

> ID：14936982
> 
> 赞同：2
> 
> 时间：2013-02-18T13:00:28.067
> 
> 标签：mysql, events

我使用这个查询在 MySQL 中创建了一个事件：

```
delimiter $$
create event update_usability_score
on schedule every 1 day 
starts '2013-01-07 18:22:00'
  do
begin
insert into table_name(pk_id,name) values(1,"testing");

update table table_name set name = 'Not testing' where name like '%testing%';
end//
delimiter ; 
```

当我第一次运行它时，它工作正常并且没有显示任何错误。正如我所询问的那样，此活动将每天运行。但它不是每天都在运行。

当我检查这个时：

```
select name, last_executed from mysql.event; 
```

它显示开始日期。意味着它不是每天都在运行。

每天如何举办这个活动？我在查询中遗漏了什么？

请帮助解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T13:06:42.793

您需要设置`ON COMPLETION PRESERVE`选项：

```
CREATE EVENT update_usability_score
  ON SCHEDULE EVERY 1 DAY
  STARTS '2013-01-07 18:22:00'
  ON COMPLETION PRESERVE
DO
BEGIN
  ...
END 
```

从[事件文档](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)：

> 通常，一旦事件过期，它会立即被丢弃。您可以通过指定 ON COMPLETION PRESERVE 来覆盖此行为。使用 ON COMPLETION NOT PRESERVE 只会使默认的非持久行为显式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-09T23:09:26.413

此特定事件将失败，因为如果您第二次运行该事件中的第一个查询将失败，因为 id 1 已经在数据库中。

# php - PHP 忽略特定页面的包含

> ID：14936986
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:36.877
> 
> 标签：php, include

我有一个包含标题（菜单导航和徽标）的 PHP 站点。
我的网站中有一个部分，我想包含一个不同的标题
，我正在为此苦苦挣扎。任何帮助，将不胜感激！
这是我的代码：

```
 <div id="wrapper">  
    <? include('inc/header.inc.php'); ?>
        <? require('process/build_page.php'); ?>
        <? require('inc/footer.inc.php'); ?>

    </div> 
```

我想在名为“my-association”的特定部分中包含以下标题

```
<? include('inc/header_ma.inc.php'); ?> 
```

process/build_page 代码如下所示：

```
<?
global $full_uri;

class BuildPage
{

    function BuildPage()
    {
        global $full_uri;

        if($full_uri)
        {
            $this->build_path();
        }
        else
        {
            exit();
        }
    }

    function build_path()
    {
        global $full_uri;

        $uri_array = explode("/", $full_uri); # make uri into an array divided by /
        $clean_uri = array_filter($uri_array); # remove empty elements
        unset($clean_uri[1]); # remove base part of uri
        $clean_uri = array_values($clean_uri); #reset array key to start with 0

        # if array is empty the homepage is being requested
        if(empty($clean_uri)){
            $clean_uri[0] = 'home';
        }

        # build uri to point to include file
        $new_path = "content/";
        $new_path .= implode("/", $clean_uri);
        $new_path .= ".inc.php";

        $this->build($new_path);

    }

    function build($path)
    {
        $output = "";
        $output .= $this->get_include_contents($path);
        echo $output;
    }
    function get_include_contents($filename)
    {
        if (is_file($filename))
        {
            ob_start();
            include $filename;
            $contents = ob_get_contents();
            ob_end_clean();
            return $contents;
        }
        return false;
    }

    function print_array($data)
    {
        echo "<pre>";
        print_r($data);
        echo "</pre>";
        die();
    }

};

$buildpage = new BuildPage();

?> 
```

请指教！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:13:41.677

如果我遗漏了什么，请告诉我，但这不会奏效吗？

```
<div id="wrapper">  
    <? 
    $change_header = array('/special_page_1','/special_page_2','/special_page_3');

    if(in_array($full_uri,$change_header))
        include('inc/header_ma.inc.php');
    else
        include('inc/header.inc.php');
    ?>
        <? require('process/build_page.php'); ?>
        <? require('inc/footer.inc.php'); ?>

</div> 
```

# c# - 将日期值插入数据库时 出错

> ID：14936990
> 
> 赞同：2
> 
> 时间：2013-02-18T13:00:40.577
> 
> 标签：c#, sql, sql-server, visual-studio-2010

我在将日期值插入数据库时​​遇到了一个奇怪的问题。在调试我的程序时，我意识到它会将前五行插入数据库，但在第六行它会引发异常。我通过检查可以使用第六个成功执行的前 5 个查询来验证它是否是语法错误，或者是否在此过程中发生了某些变化，并且它们都是相同的。如果类型有问题，它应该从一开始就抛出异常。你怎么看？

这是我得到的错误

> *将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:02:46.313

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。

这表明您将值指定为字符串，并执行转换。不要那样做。尽可能避免字符串转换。（我怀疑您提供的字符串格式与用于解析的字符串格式之间很可能存在脱节。完全删除字符串转换是解决此问题的最佳方法。）

相反，将值作为`SqlParameter`带有值的 a 提供`DateTime`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:25:06.563

我认为您的问题是由于 C# 中从 01-01-0001 开始的 DateTime 类型与从 1753 年 1 月 1 日到 9999 年 12 月 31 日的 SQL Server 中的 DateTime 类型之间的差异，[请检查此链接](http://msdn.microsoft.com/en-us/library/ms187819.aspx)，所以我认为（由于对于 Jon 解释的错误）您正在尝试将小于 01-01-1753 的 Date 值插入 SQL Server。这就是显示 SQL 异常的原因。

# php - 将日期转换为 ISO 格式的 sql server

> ID：14936991
> 
> 赞同：1
> 
> 时间：2013-02-18T13:00:44.787
> 
> 标签：php, sql-server-2008, sql-server-2005, date-format, iso

我有过这样的约会`$input = '19/02/2013'`。

如何在我的表格中插入这个日期（ISO 8601 格式）？

平台是 SQL Server 2005 或 SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:06:03.897

认为这应该这样做。

```
$dt = new DateTime(strtotime($input));
echo $dt->format(DateTime::ISO8601); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:06:37.077

您需要使用一些php函数来转换为sqlserver日期格式

```
$input = 19/02/2013;
$new_date = explode('/',$input);
$date = $new_date[2]-$new_date[1]-$new_date[0]; 
```

对于 ISO 格式，您可以像这样使用

```
$date->format(DateTime::ISO8601); 
```

# core-data - NSManagedObject 停止更新

> ID：14936992
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:47.740
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

在我的模型中，我有： Product <<---> Order

产品属性：productName productPrice 产品关系：order

订单属性：orderName salePerson 订单关系：products

想象一下我有一个产品（称之为product1）：productName：MacBook productPrice：1200

该应用程序通常用于销售产品。所以在添加并完成销售之后。自动创建一个包含 product1 的订单（称为 currentOrder）。

> [currentOrder addProductsObject:product1];

接下来我将 product1 价格更改为： productPrice: 1000

在我重新检查 currentOrder 中的产品后，我会看到 productPrice 已更新为：1000 我不需要更改它并且仍然与之前的 (1200) 完全相同。

基本上我会做一些不更新以前的对象的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:13:54.893

你的商业模式不适合你的情况。您需要有另一个实体“销售”左右。您的模型应如下所示：订单 <--->> 销售，产品 <---> 销售。产品属性：productName。订单属性：orderName salePerson 订单关系：sales。保存属性：productPrice 销售关系：订单。因此，通过这种方式，您可以将价格与产品分离，并且能够在不同的订单中存储不同的价格。

# java - 如何在java中为单词分配数字？

> ID：14936997
> 
> 赞同：0
> 
> 时间：2013-02-18T13:00:53.583
> 
> 标签：java, if-statement, methods, numbers, assign

我对代码的最后一部分有疑问。我想为特定单词分配数字，但我总是得到 0 值，即使我从第一个 System.out.println 正确获取了这些字符串，我也无法在第二个 System.out.println.Any 获得这些字符串的数字等价物想法如何解决这个问题？

```
public static double number;

protected void myMethod(HttpServletRequest request, HttpServletResponse response) {

    String speech= request.getParameter("speech");
    System.out.println("The recognized speech is : "+ speech);

    // There is no problem till here.
    if(speech == "Hi")
        number = 1 ;
    if(speech== "Thanks")
        number = 2 ;
    if(speech== "Bye")
        number = 0 ;

    System.out.println("The number for the speech is : " + number);
} 
```

但是在这里我没有得到正确的数字，但每个单词只有 0 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:10:24.377

== 只有当字符串是相同的对象时才会为真。采用：

```
if(speech.equals("Hi")) 
```

或不区分大小写：

```
if(speech.equalsIgnoreCase("hi")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T13:48:12.603

您不能使用`==`运算符来检查两个字符串在 Java 中是否具有相同的值，您需要使用`.equals()`or`equalsIgnoreCase()`方法来代替：

```
if("Hi".equalsIgnoreCase(speech)) {
    number = 1;
}
else if("Thanks".equalsIgnoreCase(speech)) {
    number = 2;
}
else if("Bye".equalsIgnoreCase(speech)) {
    number = 0;
}
else {
    number = -1;
} 
```

这样做的原因是`==`操作员比较*引用*；也就是说，`true`当且仅当存储在变量中的*实例*与您在双引号（、、或）之间创建的文字字符串相同时，*它才会返回。*`speech`*`"Hi"``"Thanks"``"Bye"`*

 *另请注意，我`equalsIgnoreCase()`在我声明的文字字符串上使用调用，而不是从参数分配的变量。这样，如果 a `speech == null`，方法调用仍然有效（`"Hi"`将*始终*为 a `String`），因此您不会得到 a `NullPointerException`，并且流程将继续直到`else`分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:01:38.200

尝试以下代码段：

主.java

```
public class Main {
    public static void main(String[] args) {
        List<StringWithValue> stringList = new ArrayList<StringWithValue>();
        stringList.add(new StringWithValue("Hi", 1));
        stringList.add(new StringWithValue("Thanks", 2));
        stringList.add(new StringWithValue("Bye", 3));

        String speech = "Hi";
        int number = 0;

        for(StringWithValue swv : stringList){
            if(swv.getString().equals(speech)){
                number = swv.getValue();
                break;
            } else {
                number = -1;
        }

        System.out.println("The number for the speech is : " + number);
    }
} 
```

StringWithValue.java

```
public class StringWithValue {
    private String string;
    private int value;

    public StringWithValue(String string, int value) {
        this.string = string;
        this.value = value;
    }

    public String getString() {
        return string;
    }

    public int getValue() {
        return value;
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-18T13:25:06.383

```
public static double number;

    if(speech=="hi")
    {
        number=1;
    }
    else if(speech=="thanks")
    {
        number=2;
    }
    else if(speech=="Bye")
    {
        number=0;
    }
    else
    {
        System.out.println("Word Not Found");
    } 
```*