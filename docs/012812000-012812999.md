# StackOverflow 问答 12812000-12812999

# python - 如何在 Python 中从 ASP 网站下载文件？

> ID：12812001
> 
> 赞同：0
> 
> 时间：2012-10-10T04:35:15.520
> 
> 标签：python, file

> **可能重复：**
> [如何使用 Python 从网页下载文本文件或某些对象？](https://stackoverflow.com/questions/12775250/how-to-download-a-text-file-or-some-objects-from-webpage-using-python)

我正在尝试从该网站下载“预发布域”下的文件：`http://www.namejet.com/pages/downloads.aspx` 因此，今天是 10 月 10 日，您想要获取文件“2012 年 10 月 10 日，星期三”。单击文件时，链接不会更改，因此我无法编写 python 代码来下载特定文件，因为我没有特定文件的特定 URL。如何编写脚本？我希望一切都发生在后端而不实际打开浏览器：

```
#!/usr/bin/python

from selenium import webdriver
from pyvirtualdisplay import Display
display = Display(visible=0, size=(1024, 768))
display.start()

browser=webdriver.Firefox() # Select browser that you want to automate 
browser.get('http://www.namejet.com/pages/downloads.aspx')
element=browser.find_element_by_xpath(
            '//a[@id="ctl00_ContentPlaceHolder1_hlPreRelease1"]')
element.click()
display.stop() 
```

此代码运行没有错误，但不下载文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:28:12.960

```
In [1]: from selenium import webdriver
In [2]: browser=webdriver.Chrome() # Select browser that you want to automate 
In [3]: browser.get('http://www.namejet.com/pages/downloads.aspx')
In [4]: element=browser.find_element_by_xpath(
            '//a[@id="ctl00_ContentPlaceHolder1_hlPreRelease1"]')

In [5]: element.click() 
```

现在你可以在你的下载文件夹中找到 prerelease_10-08-2012.txt 并且你可以用通常的方式打开它。

编辑：请注意，代码下载了最新的文件，即今天的 prerelease_10-10-2012.txt。刚试了一下，效果很好。

# android - 什么可能导致 Android 应用程序在与它运行速度快的设备相同的设备上运行缓慢？

> ID：12812003
> 
> 赞同：5
> 
> 时间：2012-10-10T04:35:18.753
> 
> 标签：android, performance, android-ui

我和我的其他一些 Android 应用用户运行 Galaxy Nexus。我们大多数人都发现这款应用程序非常快，但有几个人报告说它***在 Galaxy Nexus 上也***慢得无法使用。听到他们告诉我按钮、滚动等都很慢，我感到很震惊。该应用程序的主视图`ListView`包含许多图像、文本视图等。事实上，如果您想深入挖掘[，可以在 Google Play 上免费查看该应用程序。](https://play.google.com/store/apps/details?id=com.streamified.streamified)我正在尝试编制一份可能导致此问题的清单。

这是我到目前为止所拥有的：

*   记忆不足
*   磁盘空间不足
*   未捕获的错误
*   根设备（？）

还有其他想法吗？

更重要的是，有没有办法检测（甚至调整！）潜在问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:36:25.767

其他一些事情：

*   CPU 使用情况（通过 WatchDog 等应用程序监控（免费））；问题可能不是你的应用
*   安卓版。
*   连接速度（Wi-Fi vs 4G vs 3G vs 1x）
*   运营商（因为他们喜欢刷自己的自定义 ROM）

AFAIK Android 版本和连接速度由 SDK 公开，不确定 CPU 使用率或运营商。

在您列出的错误中，我认为内存不足是最可能的因素。

如果我是你，我会创建一个函数来收集尽可能多的这些信息并将其发送到你的电子邮件（或某个地方）。然后，有一些方法让用户调用这个函数（例如在设置菜单或类似的地方）。

诚然这只是作为最终用户的直觉，我几乎没有从编码方面调试部署的应用程序的经验。

# c# - Razor 解析我不希望它解析的东西。“解析器错误”

> ID：12812006
> 
> 赞同：0
> 
> 时间：2012-10-10T04:35:33.743
> 
> 标签：c#, asp.net-mvc, razor

我正在尝试将 Facebook 的评论计数添加到我的网站。我正在使用 Facebook 评论插件，并希望在我的按钮中输出当前计数。但是，我收到来自 Razor 的解析器错误。出于某种原因，Razor 将`-count`结束标记解释为 C# 代码。

“/”应用程序中的服务器错误。

解析器错误

说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

```
Parser Error Message: Encountered end tag "div" with no matching start tag.  
Are your start/end tags properly balanced?

Source Error: 

Line 42:             </div>
Line 43:         </div>
Line 44:     </div>
Line 45: }

Source File: /Views/Home/Index.cshtml    Line: 44 

Version Information: Microsoft .NET Framework 
Version:4.0.30319; ASP.NET Version:4.0.30319.225 
```

* * *

这是我的观点：

```
@using asdf.WebUI.Helpers
@model IEnumerable<asdf.WebUI.Models.PostModel>

@{
    ViewBag.Title = String.Format("adsf - {0}", DynamicContentHelper.GetDynamicHomePageQuip());
}

@foreach (var post in Model)
{
    <div class="post">
        <a href="@Url.Action("Details", "Post", new { id = post.PostId })">
            <img class="post-img" src="@post.ImageUrl" alt="@post.Description" title="@post.Description" />                 
        </a>        
        <div class="detail">
            <div class="information">
                <h3 class="score">PUNTAJE: <span>234</span></h3>

                <div class="vote">
                    <button type="button" class="btn btn-success"><i class="icon-thumbs-up icon-white"></i> &nbsp; ME GUSTA</button>
                    <button type="button" class="btn btn-danger"><i class="icon-thumbs-down icon-white"></i> &nbsp; NO ME GUSTA</button>
                    <a class="btn btn-info comment-link" href="@Url.Action("Details", "Post", new { id = post.PostId })">

                    <-- ERROR FIRES HERE!!!! -->
                    <i class="icon-comment icon-white"></i> &nbsp; &nbsp; COMENTARIOS &nbsp; &nbsp; <fb:comments-count href="http://asdf.net/bolivia/"/></fb:comments-count> 
                    </a>
                </div>

                <div class="post-description">
                    <blockquote class="pull-right">
                        <p>@post.Description</p>
                        <small>imagen subida por: <a href="@Url.Action("Details", "Post", new { id = post.PostId })">@post.UserName</a></small>
                    </blockquote>
                </div>
            </div>

            <div class="social">
                <a href="#" id="shareFacebook" data-popup-height="380" data-popup-width="660" data-url="http://www.facebook.com/sharer.php?u=http://www.asdf.net/bolivia/@post.PostId">
                    <img src="@Url.Content("~/Public/assets/images/FB-share.png")"/>
                </a>

                <a href="#" id="shareTwitter" data-popup-height="270" data-popup-width="600" data-url="http://twitter.com/intent/tweet?url=http://www.asdf.net/bolivia/@post.PostId&text=@post.Description">
                    <img src="@Url.Content("~/Public/assets/images/TW-share.png")"/>
                </a>
            </div>
        </div>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:56:58.527

替换这个

```
 <i class="icon-comment icon-white"></i> &nbsp; &nbsp; COMENTARIOS &nbsp; &nbsp; <fb:comments-count href="http://asdf.net/bolivia/"/></fb:comments-count> 
```

这样

```
 @Html.Raw(<i class="icon-comment icon-white"></i> &nbsp; &nbsp; COMENTARIOS &nbsp; &nbsp; <fb:comments-count href="http://asdf.net/bolivia/"/></fb:comments-count>) 
```

Razor 不会尝试正常解析它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:42:37.610

尝试将所有内容放入`<text></text>`block 中的每个循环。

```
@foreach (var post in Model)
{
 <text>

<div class="post"> 

.......

</div>

</text>
} 
```

另请确保您在 HTML 标记中使用了 facebook xml 命名空间

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

马修的评论也对。你有一个额外`/`的 fb 标签

# iphone - 如何获取当前位置 30 米半径内的所有位置 ios

> ID：12812007
> 
> 赞同：-1
> 
> 时间：2012-10-10T04:35:41.977
> 
> 标签：iphone, ios, map, reverse-geocoding

对于我的项目，我想在附近的位置找到/放置图钉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:19:08.733

试试这个，

```
CLLocationDistance radius = 30;
CLLocation* target = [[CLLocation alloc] initWithLatitude:someLat longitude:someLon];

NSArray *locationsWithinRadius = [locations objectsAtIndexes:
                                 [locations indexesOfObjectsPassingTest:
                                  ^BOOL(id obj, NSUInteger idx, BOOL *stop) {

                                      return [(CLLocation*)obj distanceFromLocation:target] < radius;

                                  }]];

[target release]; 
```

# objective-c - 如何使用 CHCSV 解析器？

> ID：12812012
> 
> 赞同：2
> 
> 时间：2012-10-10T04:36:04.723
> 
> 标签：objective-c, csv

我是编程世界的新手，正在学习 iPhone 应用程序开发。对于我的一个应用程序，我正在从 Yahoo Finance 下载 CSV 数据。我想把它放在字典里。经过一番搜索，我找到了 CHCSV 解析器。我的问题是如何使用它？

我将文件复制到我的项目中并尝试了不同的方法。我知道我的方法有点傻。作为这些事情的新手，如果有人可以帮助我，我将不胜感激。在以下代码中，我通过传入 CSV 文件来初始化 CHCSV 对象。我想该`parse`方法是正确的使用方法。在那之后，我不知道如何从中取出字典。

```
#import "ifinance5ViewController.h"
#import "CHCSV.h"

@implementation ifinance5ViewController

@synthesize button1;

-(IBAction)buttonpressed:(UIButton*)sender{
    NSString *locfile = @"/Users/---/Desktop/array.csv";
    NSError *anError = nil;

    [CHCSV *csvfile]=[[CHCSV alloc]initWithContentsOfCSVFile:(NSString *)locfile usedEncoding:(NSStringEncoding *)NSASCIIStringEncoding error:(NSError **)anError];
    [csvfile parse];
} 
```

# java - 媒体播放器不适用于所有按钮

> ID：12812023
> 
> 赞同：2
> 
> 时间：2012-10-10T04:37:22.103
> 
> 标签：java, android, button, media-player

我正在开发带有多点触控的鼓垫。我使用了一个扩展按钮的内部类：

```
package dubstep.brendan;

import android.content.Context;
import android.media.MediaPlayer;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.Button;

public class TestButton extends Button {
private MediaPlayer mpButtonClick =MediaPlayer.create(getContext(),R.raw.firework);

public TestButton(final Context context, final AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(final MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        mpButtonClick.start();

    }
    if (event.getAction()==MotionEvent.ACTION_UP){
        mpButtonClick.pause();
        mpButtonClick.reset();
        mpButtonClick = MediaPlayer.create(getContext(), R.raw.firework);

    }
    return super.onTouchEvent(event);
}
} 
```

我还有其他十二个扩展按钮和使用媒体播放器的类，但其中只有七个有效。其余的都没有。虽然如果我从 7 个工作类中的任何一个中删除 mediaplayer 对象，其中一个不工作的类开始工作。

此外，我的日志中出现以下错误：

```
MediaPlayer(226):   info/warning (1, 26)
PlayerDriver(30):   Command PLAYER_PREPARE completed with an error or info             PVMFErrResource
MediaPlayer(226):   error (1, -17)
PlayerDriver(30):   PVMFInfoErrorHandlingComplete
MediaPlayer(226):   create failed:
MediaPlayer(226):   java.io.IOException: Prepare failed.: status=0x1
MediaPlayer(226):   at android.media.MediaPlayer.prepare(Native Method)
MediaPlayer(226):   at android.media.MediaPlayer.create(MediaPlayer.java:644)
MediaPlayer(226):   at dubstep.brendan.TestButton8.<init>(TestButton8.java:11)
MediaPlayer(226):   at java.lang.reflect.Constructor.constructNative(Native Method)
MediaPlayer(226):   at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
MediaPlayer(226):   at android.view.LayoutInflater.createView(LayoutInflater.java:500)
MediaPlayer(226):   at  android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
MediaPlayer(226):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
MediaPlayer(226):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
MediaPlayer(226):   at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
MediaPlayer(226):   at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
MediaPlayer(226):   at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
MediaPlayer(226):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
MediaPlayer(226):   at android.app.Activity.setContentView(Activity.java:1622)
MediaPlayer(226):   at      dubstep.brendan.MultitouchtestActivity.onCreate(MultitouchtestActivity.java:33)
MediaPlayer(226):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
MediaPlayer(226):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
MediaPlayer(226):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
MediaPlayer(226):   at android.app.ActivityThread.access$2200(ActivityThread.java:119)
MediaPlayer(226):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
MediaPlayer(226):   at android.os.Handler.dispatchMessage(Handler.java:99)
MediaPlayer(226):   at android.os.Looper.loop(Looper.java:123)
MediaPlayer(226):   at android.app.ActivityThread.main(ActivityThread.java:4363)
MediaPlayer(226):   at java.lang.reflect.Method.invokeNative(Native Method)
MediaPlayer(226):   at java.lang.reflect.Method.invoke(Method.java:521)
MediaPlayer(226):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
MediaPlayer(226):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
MediaPlayer(226):   at dalvik.system.NativeStart.main(Native Method) 
```

请注意，这是我的第 8 个按钮的“TestButton8”类有错误，并且后面的所有类也有同样的问题，正如我上面提到的，如果我删除 mediaplayer 对象，例如，如果我从 TestButton 中删除 mediaplayer上面的类，“TestButton8”类将开始工作。为什么会这样？

# java - 获取异常 java.lang.NoSuchMethodError: org.apache.neethi.Constants.isPolicyElement

> ID：12812031
> 
> 赞同：3
> 
> 时间：2012-10-10T04:38:21.943
> 
> 标签：java, web-services, ssl-certificate, wsdl2java

我正在通过 SSL 连接到 Web 服务。我导入了证书并将其添加到 java 密钥库中。然后我使用 wsdl2java 为 Web 服务创建了客户端存根。

当我在程序中使用它并尝试调用它抛出的服务时（异常的一部分）

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.neethi.Constants.isPolicyElement(Ljavax/xml/namespace/QName;)Z
    at org.apache.axis2.util.PolicyUtil.getPolicyChildren(PolicyUtil.java:287)
    at org.apache.axis2.deployment.AxisConfigBuilder.populateConfig(AxisConfigBuilder.java:157)
    at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:857)
    .
    .
    . 
```

我的代码有点像这样

```
public static void main(String[] args) {
    //generated by wsdl2java
    Clientstub stub = new ClientStub(endpoint); 
    .
    .

    //req is the passed parameter
    stub.requestServic(req); 
```

}

我想我必须导入一些安全策略。如果是这样，有人可以帮助我（任何教程或方向）。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:14:11.530

看起来您使用的是旧版本的 neethi.jar，您可以将最新版本的 neethi 添加到类路径中。您可以`org.apache.neethi.Constants.isPolicyElement()`从 neethi-3.0.1.jar 开始找到该方法。

您可以从以下位置下载此版本

[http://www.java2s.com/Code/JarDownload/neethi/neethi-3.0.1.jar.zip](http://www.java2s.com/Code/JarDownload/neethi/neethi-3.0.1.jar.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-27T18:05:24.877

我正在使用 W12c，并将这一行添加到项目内部的 weblogic.xml 中。

org.apache.neethi

例子：

```
<wls:weblogic-web-app
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd">
    <wls:container-descriptor>
        <wls:prefer-application-packages>
            <wls:package-name>org.slf4j</wls:package-name>
            <wls:package-name>org.apache.neethi</wls:package-name>
        </wls:prefer-application-packages>
    </wls:container-descriptor>
</wls:weblogic-web-app> 
```

恭喜！！

# jquery - 取消挂钩 $(window).resize 事件

> ID：12812033
> 
> 赞同：0
> 
> 时间：2012-10-10T04:38:29.777
> 
> 标签：jquery, asp.net, html, ajax, window-resize

我通过执行以下行为浏览器窗口创建一个侦听器：

**`$(window).resize(resizeObjects);`**

我的问题是在 Web 应用程序周期的某个时刻，我想从`window.resize`. 有谁知道如何`resizeObjects`从`window.resize`事件中解脱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:47:13.870

你的意思是[`.unbind()`](http://api.jquery.com/unbind/)？

```
$(window).unbind('resize', resizeObjects); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:52:07.463

你也可以在 jquery 中尝试如下事件

```
$(window).on("resize", resizeObjects); 
```

稍后当你想解除绑定时，你可以这样做

```
$(window).off("resize"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:48:15.233

添加一个变量来控制函数执行怎么样？

```
var doResize = true;

$(window).resize(function() {
    if(doResize) {
        resizeObjects();
    }
}); 
```

并在窗口调整大小之前的某个点切换 doResize true 或 false。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T04:43:53.263

试试这个：

```
while (variable<endvalue) {
  $(window).resize(function (){
    resizeObjects();
  });
} 
```

# android - 在两个已经开始的活动之间切换，而不在 Android 中关闭其中任何一个

> ID：12812035
> 
> 赞同：0
> 
> 时间：2012-10-10T04:38:36.747
> 
> 标签：android, android-activity

我正在尝试在 android 中两个已经开始的活动之间切换。我想在它们之间切换，就像我想把一个放在背景中，第二个放在前面，然后在一个事件上，反之亦然。如果可以怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:08:20.317

根据您的要求，使用 Fragments 而不是创建不同的活动，为此，您必须通过[FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)而不是 Activity 扩展您的类。

例如在 Fragment 上找到下面的链接。

[https://stackoverflow.com/questions/5710573/need-a-fragments-example](https://stackoverflow.com/questions/5710573/need-a-fragments-example)

# c++ - 这个指针的内存地址是什么？

> ID：12812038
> 
> 赞同：0
> 
> 时间：2012-10-10T04:39:04.010
> 
> 标签：c++, memory, pointers, int

好的，所以在一次测试中，我问了这个问题：

```
int* ptrA;    // assigned memory address 100
int a = 1;    // assigned memory address 600
ptrA = &a;

What is the memory address of ptrA + 2? 
```

我以为是 606 (`int`是 4 个字节 + 地址`a`是 600 + 2 = 606 但显然答案是 608，我错过了什么才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:40:34.680

这是未定义的行为，表达式`PtrA + 2`是非法的。您只能对您拥有的指针进行指针运算，并且不能添加或减去您拥有的数组范围之外的指针或超出范围的指针。

但是，我们仍然可以对此进行分析（尽管无用，因为 UB）。您假设的地址`a`是`600 + 2`，但它不是，因为可能`sizeof(int*)`也是`4`，所以这变成了`600 + 4`。所以你得到`600 + 4 + 4 = 608`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T04:48:02.487

实际上指针的算术运算是不同的。它们的增加取决于数据类型的大小，所以如果给定一个地址说 x 并且你必须要求 x+ 2 ..（给定 x 是一个整数指针）然后..

x+ 2 表示 ---- x + (sizeof(int))*2

如果 x 以 char 指针的形式给出，则

x+2 表示 ---- x + (sizeof(char))*2

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T04:53:20.727

在 C 语言中，`x + y`where `x`is 指针等价于`&x[y]`. 假设你有

```
int abc[3] = {1,2,3}; 
int* ptr = &abc[0]; 
```

`&ptr[2]`( `ptr + 2`) 是 的地址，`3`明显比 的地址多 8 个`1`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T04:58:35.787

```
int* PtrA;    // assigned memory address 100
int a = 1;    // assigned memory address 600

What is the memory address of ptrA + 2? 
```

这个问题是模棱两可的。

如果问题是“什么是（ptrA 的内存地址）+ 2？”，那么您说`ptrA`的是内存地址 100（忽略 PtrA ！= ptrA），并且将 2 添加到 C 和 C++ 中的指针会增加指向类型大小的倍数，所以如果`int`是 32 位，那么最终结果是 100 + 2 * 4 = 108。

如果问题是“(ptrA + 2) 的内存地址是什么？”，这意味着将 ptrA 变量和 2 中的值相加的结果，那么这是未定义的，因为没有显示初始化，`ptrA`尝试从未初始化的内存中读取。

您的期望和假设的答案表明预期的代码具有...

```
ptrA = &a; 
```

...在`ptrA + 2`评估之前的某个时候。如果这是真的，那么答案将是`600 + 2 * sizeof(int)`，很可能是 608。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T04:44:31.853

在 C/C++ 中，指针算法使用指针指向的对象的大小。前任：

```
int* PtrA = (int*)600; 
```

`PtrA+2`如果整数的大小为 4，则的值为608。

标准允许仅在数组内部或“在数组之后”进行指针运算。这意味着应该采取一定的谨慎措施。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T05:05:18.377

我认为，地址总是更多是不正确的。它也可以更少。可以肯定的是，说 ptr 是指向整数数组 a 的基地址的指针，那么 ptr+2 将指向数组的第三个元素。所以如果数组的基地址是600，那么地址可以是600+2*(sizeofIint))，也可以是600-2*sizeof(int)；但无论如何，它将指向该数组的第三个元素。所以，我相信即使在数组的情况下，我们也不应该依赖直接地址。并且不应该对 ptr+2 是否指向 608 或其他内容做出任何假设。

谢谢和问候， Saurabh

# java - 如何修复代码以删除 -Xlint：编译时未检查的警告

> ID：12812040
> 
> 赞同：2
> 
> 时间：2012-10-10T04:39:21.060
> 
> 标签：java, generics, compilation, warnings

> **可能重复：**
> [如何解决未经检查的强制转换警告？](https://stackoverflow.com/questions/509076/how-do-i-address-unchecked-cast-warnings)

当我使用 -Xlint:unchecked 编译时，我的程序编译并正常工作，但我正在寻求帮助以删除此警告。任何帮助表示赞赏！谢谢

这是警告：

```
java: warning: [unchecked] unchecked cast
found   : E
required: java.lang.Comparable<E>

                            ^^^^ 
```

给出警告的代码是：

```
public boolean contains(E obj) {

    Node<E> curr = head;

        while (curr != null) {
                return true;
            }

            curr = curr.next;
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:53:48.177

如果您假设您的类中的所有数据都**必须**实现该`Comparable`接口，那么您应该将其添加到类声明中，否则您可能会`ClassCastException`在未实现此接口的类中使用此方法时得到一个。

```
public class SomeClass<E extends Comparable<E>> {

    public boolean contains(E obj) {
        Node<E> curr = head;
        while (curr != null) {
        if (obj.compareTo(curr.data) == 0) {
                return true;
            }
            curr = curr.next;
        }
        return false;
    }

    //the rest of your implementation...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:46:09.877

您应该如下更改 contains 方法的签名，以避免`compareTo`在 obj 上调用方法时进行任何类型转换：

```
public <E extends Comparable<E>> boolean contains(E obj)
{
    return true;
} 
```

这也将要求任何传递给 contains 方法的 E 已经实现 Comparable 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:46:23.043

这似乎是一种`contains(...)`方法的有缺陷的实现。对象不应该是可比较的，它们必须是相等的。只需使用`equals(...)`：

```
public boolean contains(E obj) {
    Node<E> curr = head;

    while (curr != null) {
        if (curr.data.equals(obj)) {
            return true;
        }
        curr = curr.next();
    }

    return false;
} 
```

# fluent-nhibernate - Fluent NHibernate 多态映射挑战

> ID：12812042
> 
> 赞同：1
> 
> 时间：2012-10-10T04:39:39.753
> 
> 标签：fluent-nhibernate, mapping, polymorphism

我在使用 Table Per Concrete 类在 Fluent Nhibernate 中映射以下场景时遇到了一些问题：

假设我有以下类定义：

```
public class Reading { .... }

public class CarReading : Reading { .... }

public class TruckReading : Reading { .... }

public class Alert 
{
    ....
    public virtual Reading AReading { get; set; }
} 
```

所以我的问题是如何为警报创建映射类，如果它与阅读类（可能是卡车阅读或汽车阅读）有一对一的关系，并指示 nhibernate 知道从哪个表加载数据（TruckReading 表或读车表）

```
public class AlertMap : ClassMap<Alert>
{
    ....
    HasOne(x => x.AReading);
} 
```

如果有人能指出我正确的方向，那将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:20:27.800

```
public class AlertMap : ClassMap<Alert>
{
    ....
    ReferenceAny(x => x.AReading)
        .EntityIdentifierColumn("readingid")
        .EntityTypeColumn("readingtype")
        .IdentityType<int>()
        .AddMetaValue<CarReading>("car")
        .AddMetaValue<TruckReading>("truck");
} 
```

# android - 无法从 android ftp4j 客户端获取 FTP 服务器目录列表

> ID：12812047
> 
> 赞同：1
> 
> 时间：2012-10-10T04:39:56.180
> 
> 标签：android

在模拟器上运行以下代码。使用 ip 地址 10.0.2.2 连接到 windows 开发主机上的 filezilla 服务器。

```
FTPClient ftp = new FTPClient();
try
{
    ftp.connect("10.0.2.2", 21);
    ftp.login(username, password);
    String REMOTE_DEFAULT_INITIAL_DIRECTORY = ftp.currentDirectory();
    File mDirectory = new File(REMOTE_DEFAULT_INITIAL_DIRECTORY);
    File[] listing = mDirectory.listFiles();
}
catch (Exception e)
{
    e.printStackTrace();
} 
```

问题：File[] 包含 android 客户端而不是服务器上的文件列表。

谢谢伊姆达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:37:09.333

Android Emulator 不支持 FTP 连接...

因为，Emulator是固定端口到5554~5555？

FTP prot 是 21..

因此，您只需在真实设备上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:55:12.550

我为我的 Android 项目使用相同的库，并使用以下内容获取列表：

`FTPClient ftpClient = new FTPClient();`

`ftpClient.connect(serverName);`

`ftpClient.login(username, password);`

`ftpClient.setPassive(true);`

`ftpClient.setType(FTPClient.TYPE_BINARY);`

**`final FTPFile[] remoteFiles = ftpClient.list();`**

# jquery - 找不到文件“best_in_place.purr”

> ID：12812050
> 
> 赞同：5
> 
> 时间：2012-10-10T04:40:14.863
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui, best-in-place

我正在使用[best_in_place](https://github.com/bernat/best_in_place) gem 并根据说明，为了使用 jquery.purr 实现优雅的错误处理，我所要做的就是将其添加到我的`application.js`：

```
//= require best_in_place.purr 
```

我这样做了，但我一直收到此错误（在多次重新启动服务器后）：

```
couldn't find file 'best_in_place.purr'
  (in myapp/app/assets/javascripts/application.js:19) 
```

这就是我的`application.js`样子：

```
//= require jquery
//= require jquery.ui.all
//= require jquery_ujs
//= require twitter/bootstrap
//= require turbolinks
//= require best_in_place
//= require best_in_place.purr
//= require_tree . 
```

想法？

对于它的价值，我在尝试添加`.purr`. 所以我什至将它从我的 Gemfile 中删除，运行`bundle`然后放回并重新运行`bundle`- 但仍然没有骰子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:53:58.923

[harleyttd](https://github.com/harleyttd)已在[Github repo](https://github.com/bernat/best_in_place/issues/189#issuecomment-9290775)上回答。

他说：

> 我认为这是因为您使用的 gem 发布版本（通过 gem 'best_in_place'）还没有包含 best_in_place.purr。尝试 gem 'best_in_place', github: 'bernat/best_in_place' 代替。
> 
> 另一种方法是将存储库中的 best_in_place.purr 复制到应用程序中的 best_in_place.custom 中，并根据自己的需要对其进行自定义。如果事情没有按预期显示，它将允许您轻松调试

这实际上对我有用。

# centos - 如何安装 librsync

> ID：12812053
> 
> 赞同：0
> 
> 时间：2012-10-10T04:40:29.620
> 
> 标签：centos, yum, pecl, librsync

尝试使用 pecl 安装 php-rsync 模块，我收到以下错误：

CentOS 6.3

```
[root@]# pecl install rsync
 Failed to download pecl/rsync within preferred state "stable", latest release is version 0.1.0, stability "beta", use "channel://pecl.php.net/rsync-0.1.0" to install
 install failed

[root@]# pecl install channel://pecl.php.net/rsync-0.1.0
WARNING: channel "pecl.php.net" has updated its protocols, use "pecl channel-update pecl.php.net" to update
downloading rsync-0.1.0.tgz ...
Starting to download rsync-0.1.0.tgz (575,174 bytes)
.........done: 575,174 bytes
130 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
building in /var/tmp/pear-build-rootYfRWsd/rsync-0.1.0
running: /var/tmp/rsync/configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php -I/usr/include/php/main -    I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib
checking for PHP extension directory... /usr/lib64/php/modules
checking for PHP installed headers prefix... /usr/include/php
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... re2c
checking for re2c version... invalid
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... gawk
checking for rsync support... yes, shared
checking for rsync library to use... bundled
not found
checking for librsync files in default path... not found
configure: error: Please install librsync or put source unter librsync directory here
ERROR: `/var/tmp/rsync/configure' failed

[root@]# yum install librsync
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: ftp.plusline.de
 * epel: mirror.kiewel-online.ch
 * extras: ftp.plusline.de
 * updates: ftp.plusline.de
Setting up Install Process
Package librsync-0.9.7-13.el5.x86_64 already installed and latest version
Nothing to do 
```

所以最重要的是`configure: error: Please install librsync or put source unter librsync directory here`我还安装了 librsync .. 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:43:09.433

我已经想通了。

```
yum install librsync-devel 
```

# javascript - jQuery 脚本不适用于上传的图片

> ID：12812061
> 
> 赞同：0
> 
> 时间：2012-10-10T04:41:38.690
> 
> 标签：javascript, jquery, image, file-upload

我有这个 jQuery 代码，它水平和垂直地集中在一个 DIV 中的图像：

```
var $itemImage = $('.a-img');
$itemImage.each(function() {
    var $img = $(this);
    var h = $img.height();
    var w = $img.width();
    $img.css('margin-top', +h / -2 + "px").css('margin-left',+ w/ -2 + "px");
}); 
```

它在页面首次加载时起作用。但是，页面上有一个链接会显示一个弹出框，您可以在其中更新照片。单击弹出框上的“上传”后，主页上的图像会发生变化，而不会刷新整个页面。最初应用于图像的 jQuery 代码不再起作用（图像不再集中）。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:48:27.787

将其放入一个函数中，并在加载图像时调用此函数。哦，这是 JavaScript。删除变量上的 $：itemImage 代替 $itemImage，img 代替 $img。

# php - 在 Yii 框架中，如何组合列并在下拉列表中显示为显示字符串

> ID：12812062
> 
> 赞同：9
> 
> 时间：2012-10-10T04:41:38.310
> 
> 标签：php, yii, html.dropdownlistfor, virtual-attribute, yii-cmodel

我的视图中有一个`dropDownList`，它是从表中填充的`clients`，该表包含诸如`first_name`,等列`last_name`，`id`现在我想将`first_name`and`last_name`显示为显示文本和`id`下拉列表中的值，我完成了`id`as value 和`first_name`as显示文本，但在这里我想组合这些列（`first_name`和`last_name`）并用作显示文本。

**在模型中**

```
function getClients()
{
    $Clients = Client::model()->findAll();
    $list    = CHtml::listData($Clients , 'client_id', 'first_name');
    return $list;
} 
```

**在视野中**

```
echo $form->dropDownList($model,'client_id',$model->getClients()); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T07:31:47.957

这是模型中的另一种方法

```
function getFullName()
{
    return $this->first_name.' '.$this->last_name;
} 
```

和

```
function getClients()
{
    $Clients = Client::model()->findAll();
    $list    = CHtml::listData($Clients , 'client_id', 'fullName');
    return $list;
} 
```

我认为这是一种可重用的方法，因为您`fullName`不仅可以在下拉列表中使用虚拟属性，还可以在需要全名的任何地方使用该属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T04:51:48.587

第一种变体（简单）：

```
$list = array();
foreach ($Clients as $c) {
    $list[$c->id] = $c->first_name . ' ' . $c->last_name;
} 
```

第二种变体（通用）：

```
class ExtHtml extends CHtml {
    public static function listData($models,$valueField,$textField,$groupField='')
    {
        $listData=array();
        if($groupField==='')
        {
            foreach($models as $model)
            {
                $value=self::value($model,$valueField);
                if (is_array($textField)) {
                    $t = array();
                    foreach ($textField as $field) {
                        $t[]=self::value($model,$field,$field);
                    }
                    $text=implode(' ', $t);
                } else {
                    $text=self::value($model,$textField, null);
                    if ($text == null) {
                        if (is_callable($textField)) $text=call_user_func($textField, $model);
                        else $text = $textField;
                    }
                }
                $listData[$value]=$text;
            }
        }
        else
        {
            foreach($models as $model)
            {
                $group=self::value($model,$groupField);
                $value=self::value($model,$valueField);
                if (is_array($textField)) {
                    $t = array();
                    foreach ($textField as $field) {
                        $t[]=self::value($model,$field,$field);
                    }
                    $text=implode(' ', $t);
                } else {
                    $text=self::value($model,$textField, null);
                    if ($text == null) {
                        if (is_callable($textField)) $text=call_user_func($textField, $model);
                        else $text = $textField;
                    }
                }
                $listData[$group][$value]=$text;
            }
        }
        return $listData;
    }
    public static function value($model,$attribute,$defaultValue=null)
    {
        foreach(explode('.',$attribute) as $name)
        {
            if(is_object($model) && ($model->hasAttribute($name) || isset($model->{$name})))
                $model=$model->$name;
            else if(is_array($model) && isset($model[$name]))
                $model=$model[$name];
            else
                return $defaultValue;
        }
        return $model;
    }
}

// in model

function getClients()
{
    $Clients = Client::model()->findAll();
    $list    = ExtHtml::listData($Clients , 'client_id', array('first_name', 'last_name'));
    return $list;
} 
```

第三种变体（Mysql）

```
function getClients()
{
    $Clients = Client::model()->findAll(array('select' => 'concat(first_name, " ", last_name) as first_name'));
    $list    = CHtml::listData($Clients , 'client_id', 'first_name');
    return $list;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T12:26:44.257

使用 PHP 的“匿名函数”功能尝试这种紧凑模式：

```
 function getClients()
    {
        return CHtml::listData(Client::model()->findAll(), 'id', function($client) { return $client->first_name . ' ' . $client->last_name; });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T10:03:41.603

先前带有匿名功能的“紧凑模式”的评论有错误！正确的代码是：

```
 function getClients()
 {
    $clients = Client::model()->findAll();
    return CHtml::listData($clients, 'id', function($clients) { return $client->first_name . ' ' . $client->last_name; });
 } 
```

# php - 使用 SQLite PDO 从表中返回单个值

> ID：12812066
> 
> 赞同：0
> 
> 时间：2012-10-10T04:41:59.317
> 
> 标签：php, sqlite, pdo

我有一个存储设置及其值的表从数据库中检索值的最佳方法是什么？

设置表如下所示：

```
setting    value
 host       1.2.3.4
 port       1234
 user       me
 pass       cake 
```

例如：

```
$host = $db->query('SELECT value FROM settings where setting = "host" ');
print $host; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:55:09.350

我正在使用 PDO

```
$sth = $dbh->prepare('SELECT value FROM settings where setting = :host');
$sth->bindValue(':host', $host, PDO::PARAM_STR);
$sth->execute();
$value = $sth->fetch();
return $value; 
```

这是现在与数据库做出反应的推荐方式。

# python - 将文本文件导入 mysqldb

> ID：12812068
> 
> 赞同：1
> 
> 时间：2012-10-10T04:42:12.147
> 
> 标签：python, mysql, text, import

对于当前任务，我必须使用 python 将 2 个 .txt 文件导入 MySQLdb。我有很大的麻烦。我尝试了各种方法，但我根本做不到。

在过去的几天里，我搜索了这个网站和许多其他网站，但我根本无法让它工作。每当我尝试将其他人的解决方案调整为我自己的代码时，它都会失败 - 所以我认为我应该直接为我自己的代码寻求帮助。

这是我到目前为止所拥有的：

```
import MySQLdb 

# connect to database
mydb = MySQLdb.connect("localhost","root","0dy5seuS","cars_db")

# define the function
def data_entry(cars_for_sale):

# cursor creation
    cursor = mydb.cursor()

#load the file 'cars_for_sale.txt' into the database under the table 'cars_for_sale'

    sql = """LOAD DATA LOCAL INFILE 'cars_for_sale.TXT'
        INTO TABLE cars_for_sale
        FIELDS TERMINATED BY '\t'
        LINES TERMINATED BY '\r\n'"""

    #execute the sql function above
    cursor.execute(sql)

    #commit to the database
    mydb.commit()

    #call data_entry(cars_for_sale) function
    data_entry(cars_for_sale)

    mydb.close() 
```

我几乎无法绕开它，任何帮助将不胜感激。我现在从测试功能中得到以下反馈：

> 尝试：data_entry("cars_for_sale") 预期：插入到 cars_for_sale 的行数为 7049 ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *****文件“ **main** ”，第 4 行，在**main**失败示例：data_entry("cars_for_sale") 引发异常：
> 
> 回溯（最近一次通话最后）：
> 
> 文件“C:\Python27\lib\doctest.py”，第 1289 行，在 __run compileflags，1) 在 test.globs
> 
> 文件“”，第 1 行，在 data_entry("cars_for_sale")
> 
> 文件“E:/Uni/104/Portfolio 2/MediumTask_DataStatistics/question/TEST2_data_statistics.py”，第 270 行，在 data_entry data_entry(cars_for_sale) *它重复这最后一部分数百/千次”
> 
> 以下几行是在上面重复的错误之后。
> 
> 文件“C:\Python27\lib\site-packages\MySQLdb\connections.py”，第 243 行，光标返回（cursorclass 或 self.cursorclass）（self）
> 文件“C:\Python27\lib\site-packages\MySQLdb \cursors.py"，第 51 行， **init** from weakref import proxy RuntimeError: 调用 Python 对象时超出最大递归深度

我知道这是一个无限递归，尽管我不知道如何阻止它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:27:37.537

以下代码重现了您的错误`"RuntimeError: maximum recursion depth exceeded while calling a Python object"`：

```
def data_entry(cars_for_sale):
    data_entry(cars_for_sale) 
```

您在这里不需要递归（无论如何它都使用不正确）。

> 我知道这是一个无限递归，尽管我不知道如何阻止它。

只需删除函数`data_entry`内部的调用即可`data_entry`。

# openlayers - 在 Openlayers 样式中切换填充颜色

> ID：12812069
> 
> 赞同：1
> 
> 时间：2012-10-10T04:42:30.777
> 
> 标签：openlayers

我想为 Openlayers 中的特定图层切换点的填充颜色？有可能这样做吗？眨眼之类的？

```
fillColor:${getFillColor},
context : {
  getFillColor : function(feature) {
    if (feature.data.fillColor == 'red') {
      return 'yellow';
    } else {
      return 'red';
    } 
```

这不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:15:29.497

即使没有基于上下文的样式，您也应该能够完成该任务；您只需要定期更改矢量图层的样式并重新绘制它。尝试类似：

```
window.setInterval(function (){
    var defaultStyle = yourVectorLayer.styleMap.styles['default'].defaultStyle;
    yourVectorLayer.styleMap.styles['default'].defaultStyle = {
        fillColor: defaultStyle.fillColor === 'blue' ? 'green' : 'blue',
        pointRadius: 10
    }
    yourVectorLayer.redraw();
}, 1000); 
```

一个完整的工作示例如下

```
var map = new OpenLayers.Map('map', {
    maxResolution:'auto',
    layers: [
        new OpenLayers.Layer.WMS( 
            "OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0",
            {layers: 'basic'}
        ),
        new OpenLayers.Layer.Vector('Points', {
            styleMap: new OpenLayers.StyleMap({
                pointRadius: 10, 
                fillColor: "blue"
            })
        })
    ],
    center: [0,0]
});

var features = [];
for (var i=0; i<100; i++) {
    var x = Math.random() * 360 - 180,
        y = Math.random() * 180 - 90;
    features.push(
        new OpenLayers.Feature.Vector(
            new OpenLayers.Geometry.Point(x, y)
        )
    );
}

map.layers[1].addFeatures(features);

window.setInterval(function(){
    var defaultStyle = map.layers[1].styleMap.styles['default'].defaultStyle;
    map.layers[1].styleMap.styles['default'].defaultStyle = {
        fillColor: defaultStyle.fillColor === 'blue' ? 'green' : 'blue',
        pointRadius: 10
    }
    map.layers[1].redraw();
}, 1000); 
```

# android - 如何从android中的静态方法单击按钮

> ID：12812075
> 
> 赞同：0
> 
> 时间：2012-10-10T04:43:12.227
> 
> 标签：android, android-activity, click, static-methods, non-static

我有一个按钮“提交”，我想在静态方法中创建“submit.performclick”，我试过但我不能，帮助我克服这个问题，还有一件事，在那个点击动作中，可能有任何非静态方法..但我想让按钮点击。

```
 new_btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            CallingDataBase("fm Btn","from button");
            ClearMemory();
        }
    });
public void CallingDataBase(String mobileNumber, String mobileMessage)
{
        us = mobileNumber;
        pa = mobileMessage;
        insertion(us,pa);
        CallingCustomAdapter();
}

//this static method was the first calling method.
  public static void updateMessageBox(String mobileNum12, String mobileMessa12,Context context)
//I get parameters for this method from another class.
{   

//      SMS smsClass = new SMS();    // SMS was my Class Name`
//      smsClass.function(context);
//       from here i want to call button action   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T04:57:26.570

您可以通过以下方式为静态方法提供对按钮的引用作为参数：

```
//this static method was the first calling method.
public static void updateMessageBox( Button button , String mobileNum12, String mobileMessa12,Context context)
//I get parameters for this method from another class.
{   

//      SMS smsClass = new SMS();    // SMS was my Class Name`
//      smsClass.function(context);
//       from here i want to call button action   
button.performClick();

} 
```

# solr - 我有 json，因为还有另一个 json 对象，所以如何在 schema.xml 中编写索引（查询），

> ID：12812077
> 
> 赞同：0
> 
> 时间：2012-10-10T04:43:16.610
> 
> 标签：solr

我有json，因为还有另一个json对象，所以如何在schema.xml中写索引（查询），因为括号内的括号我不知道所以请帮助我

```
{
    "id" : "978-0641723445",
    "author" : "Rick Riordan",
    "logDetails":{
        "tphon_num_txt":"No Number",
        "brch_cd":"C4"     
    }   
}, 
{
    "id" : "978-1423103349",
    "author" : "Rick Riordan",
    "logDetails":{
        "tphon_num_txt":"No Number",
        "brch_cd":"C4"       
     } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:42:30.797

如果我理解正确，您想在 Solr 中索引嵌套的 json 吗？

Solr 中没有嵌套字段。您应该解析 Json 并分别在 schema.xml 中添加每个字段。

Schema.xml 应该是这样的：

```
<field name="id"....
<field name="author"....
<field name="logDetails"....
<field name="tphon_num_txt"....
<field name="brch_cd".... 
```

# c# - 在 Windows 7 中使用 C++/C#/PowerShell 禁用/启用 USB 驱动程序而无需重新启动

> ID：12812078
> 
> 赞同：1
> 
> 时间：2012-10-10T04:43:17.840
> 
> 标签：c#, c++, powershell, usb, gpo

我需要一种简单的方法来通过 c++/c#/powershell 脚本追溯禁用/启用 Windows 7 中的所有 USB 设备，而无需重新启动机器。

我知道更改 GPO 是一种选择，但我似乎找不到任何无需重新启动即可执行此操作的实现。

请详细解释您的解决方案，我是 Windows 管理的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:03:59.507

使用 PowerShell 你可以这样做

打开注册表并导航到以下注册表项并查看 reg 项 start 在其中具有什么值如果它设置为“3”意味着在 PC 上启用了 USB 驱动器。

```
Get-ItemProperty  "HKLM:\SYSTEM\CurrentControlSet\services\USBSTOR" -name start

PSPath       : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\USBSTOR
PSParentPath : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services
PSChildName  : USBSTOR
PSDrive      : HKLM
PSProvider   : Microsoft.PowerShell.Core\Registry
Start        : 3 
```

如果要禁用它，可以使用以下命令将值设置为 4

```
Set-ItemProperty  "HKLM:\SYSTEM\CurrentControlSet\services\USBSTOR" -name start -Value 4 
```

如果我再次检查 reg 键值，我看到它已被修改为 4，如果我插入 USB 驱动器，它不会被检测到

```
Get-ItemProperty  "HKLM:\SYSTEM\CurrentControlSet\services\USBSTOR" -name start

PSPath       : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\USBSTOR
PSParentPath : Microsoft.PowerShell.Core\Registry::HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services
PSChildName  : USBSTOR
PSDrive      : HKLM
PSProvider   : Microsoft.PowerShell.Core\Registry
Start        : 4 
```

# java - 如何在构造函数上使用 @Autowired DI 自动装配没有定义 bean 的属性？

> ID：12812080
> 
> 赞同：0
> 
> 时间：2012-10-10T04:43:39.723
> 
> 标签：java, spring, dependency-injection, annotations

我有一个 EquityOrder 类，它由 Equity 列表和作为其属性的字符串组成。还定义了一个方法“placeOrder”。我已经自动装配了我的构造函数，并且 Equity 的 bean 已经在我的 XML 文件中定义了。

```
@Autowired
public EquityOrder(String name, List<Equity> equity) {
    this.name = name;
    this.equity = equity;
}

public void placeOrder() {

    for (Equity eq : equity)
        System.out.println("Placing order for " + eq.getSecurityName()
                + "with quantity " + eq.getQuantity());
} 
```

在 xml 中，我有以下场景，这是没有错误的。

```
<context:annotation-config />
<bean name="testEquity" class="com.sapient.Spring.Equity.Equity">

    <property name="symbol" value="MSFT"></property>
    <property name="securityName" value="Microsoft"></property>
    <property name="type" value="IT"></property>
    <property name="quantity" value="100"></property>

</bean>

<bean name="testOtherEquity" class="com.sapient.Spring.Equity.Equity">

    <constructor-arg value="GOOG">
    </constructor-arg>
    <constructor-arg value="Google"></constructor-arg>
    <constructor-arg value="IT"></constructor-arg>
    <constructor-arg value="100"></constructor-arg>

</bean>

<bean name="testEquityOrder" class="com.sapient.Spring.Equity.EquityOrder">
</bean> 
```

问题 - 当在构造函数中我没有字符串时，项目运行良好。但是如果构造函数中有字符串，它会抛出异常 -

```
Error creating bean with name 'testEquityOrder' defined in class path resource 
[SpringConfig.xml]: Unsatisfied dependency expressed through constructor argument with 
index 0 of type [java.lang.String]: : No matching bean of type [java.lang.String] found
for dependency: expected at least 1 bean which qualifies as autowire candidate for this
dependency. Dependency annotations: {}; nested exception is 
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of 
type [java.lang.String] found for dependency: expected at least 1 bean which qualifies
as autowire candidate for this dependency. Dependency annotations: {} 
```

这意味着容器正在寻找 String bean，但它不能在那里。如何解决这个问题。一种方法是在 setter 上使用注解。但是如何使用`@Autowire`构造函数上的注释来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:54:04.767

您可以使用元素为 name 属性提供值，`<constructor-arg>`如下所示：

```
<bean name="testEquityOrder" class="com.sapient.Spring.Equity.EquityOrder">
    <constructor-arg value="dummyValue" />
</bean> 
```

另一个构造函数参数无论如何都会自动装配，因为它是一个已经定义的 bean。

PS 另外，我必须说 EquityOrder 似乎是一个数据对象，除非它是一些配置数据，否则如果它取决于用户输入，则不应像这样注入/自动装配它。

# javascript - 如何使用 javascript 在 facebook 上分享文本？

> ID：12812081
> 
> 赞同：2
> 
> 时间：2012-10-10T04:43:50.897
> 
> 标签：javascript, android, jquery, facebook, cordova

我正在使用 PhoneGap 开发一个 android 应用程序。我需要在 Facebook 上发布文字。我知道在 Twitter 中可以通过下面的代码来完成。

```
var mediaSource = "http://twitter.com/home?status={TITLE}";
mediaSource = mediaSource.replace('{TITLE}',"Text to be share in Twitter");

window.location = mediaSource; 
```

有没有类似的方法可以在 Facebook 上发布文字？

编辑：我从这个[egrappler得到了部分解决方案](http://www.egrappler.com/jquery-social-media-share-plugin-jsshare/)

我的代码如下：

```
var mediaSource = "http://www.facebook.com/share.php?u={ADDRESS}";
mediaSource=mediaSource.replace('{ADDRESS}',encodeURIComponent('http://www.google.com'));
window.location = mediaSource; 
```

从上面的代码中，我只能分享 facebook wall 中的链接。我需要与链接共享文本。文本应与网站链接一起通过代码发送。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T11:02:13.617

使用 phonegap 插件，您可以在 Facebook 上发布文本。这个插件叫做[Share](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Share)

然后将 .java 和 .js 文件添加到您的项目中，一切都会完成！

# math - 聚类的适当相似性度量

> ID：12812083
> 
> 赞同：0
> 
> 时间：2012-10-10T04:44:26.343
> 
> 标签：math, cluster-analysis, distance, similarity, euclidean-distance

我在为聚类找到合适的相似性度量时遇到了问题。我有大约 3000 个集合数组，其中每个集合都包含特定领域的特征（例如，数字、颜色、日期、字母等）。我会用一个例子来解释我的问题。

假设我只有 2 个数组（a1 和 a2），我想找到它们之间的相似性。每个数组包含 4 个集合（在我的实际问题中，每个数组有 250 个集合（域）），一个集合可以是空的。

```
a1: {a,b}, {1,4,6}, {mon, tue, wed}, {red, blue,green}
a2: {b,c}, {2,4,6}, {}, {blue, black} 
```

我使用[Jaccard](http://en.wikipedia.org/wiki/Jaccard_index)指数（表示为 J）进行了相似性度量：

```
sim(a1,a2) = [J(a1[0], a2[0]) + J(a1[1], a2[1]) + ... + J(a1[3], a2[3])]/4 
```

注意：我除以集合总数（在上面的示例中为 4）以保持 0 和 1 之间的相似性。

`Is this a proper similarity measure and are there any flaws in this approach`. 我分别为每个集合应用 Jaccard 索引，因为我想比较相关域之间的相似性（即颜色与颜色等......）

我不知道我的问题有任何其他适当的相似性度量。更远，`can I use this similarity measure for clustering purpose?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:46:02.047

这应该适用于大多数聚类算法。不要使用 k-means - 它只能处理数字向量空间。但是你有一个向量集类型的数据。

您可能希望使用与算术平均值不同的平均值来组合四个 Jaccard 度量。尝试谐波或几何方法。看，超过 250 个值的平均值可能一直接近 0.5，所以你需要一个更“激进”的平均值。

所以这个计划听起来不错。试一试，实现这种相似性并将其插入各种聚类算法中，看看他们是否找到了一些东西。我喜欢用 OPTICS 探索数据和距离函数，因为 OPTICS 图可以非常指示是否（或不！）有什么东西可以根据距离函数找到。如果图太平，那就没什么好找的了，就像数据集中距离的代表性样本......

我使用 ELKI，他们甚至有一个关于添加自定义距离函数的教程： http: [//elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions)虽然你可以用你喜欢的任何工具计算距离并编写将它们转换为相似矩阵。在 3000 个对象上，这仍然非常易于管理，4200000 个双精度对象只有几 MB。

# php - PHP - 查找最长的日期“连续”和“衰退”

> ID：12812085
> 
> 赞同：0
> 
> 时间：2012-10-10T04:44:33.730
> 
> 标签：php

我目前在 PHP 中有 2 个日期 - 一个“开始”日期和一个“结束”日期。然后，我使用我发现的一个名为[`createDateRangeArray`](http://boonedocks.net/mike/archives/137-Creating-a-Date-Range-Array-with-PHP.html)( `$date_range`) 的函数创建了一个日期数组。为简单起见，结束日期将始终为*今天的日期*。

我还有一个单独的数组，其中包含一堆日期 ( `$valid_dates`)，这些日期总是介于上述开始日期和结束日期之间。在那些日子里，“某事”发生了——在这种情况下，是一次培训课程。

我正在努力解决以下问题：

*   类似于`$date_range`数组的日期范围，根据培训课程是否在该日期发生，填充为 TRUE 或 FALSE。我很高兴这是一个带有名为（bool）的键的关联`date`数组`session_found`。
*   最长的“连续”，即培训课程发生的最长连续天数。
*   最长的“衰退”，即没有发生培训课程的最长连续天数。

有人可以指出正确的方向来获取上述信息，而无需在数组`foreach`的内容上使用 a `$date_range`，然后必须`foreach`在`$valid_dates`数组中的每个项目上使用另一个`$date_range`数组吗？那效率太低了...

抱歉，如果我对所有这些信息过于复杂，但任何帮助将不胜感激。

我目前在 Debian Wheezy 上使用 PHP 5.4，如果有帮助的话（典型的 LAMP 堆栈）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:06:05.813

这是完全未经测试的，但是像下面这样的东西怎么样：

你应该得到最长的连续和低迷的结束日期，以及它花了多少天。$sessions 将包含一个以日期为键的数组，true 表示有会话的天数，false 表示没有会话的天数。

仍然是一个 foreach，但我认为你不能避免使用一个。让我知道它是否有效，我真的不知道这段代码的表现如何，但希望能给你一个起点？

```
$streak = 0;
$slump = 0;
$longeststreak = 0;
$longestslump = 0;
$longeststreakend = 0;
$longestslumpend = 0;

foreach ($date_range as $date) {
    if (in_array($date, $valid_date)) {
        $sessions[$date] = true;
        $streak++;

        // Slump broken, record the length if it beat the previous record
        if ($longestslump < $slump) {
            $longestslump =  $slump;
            $longestslumpend = $date;
        }

        $slump=0;
    }
    else {
        $sessions[$date] = false;
        $slump++;

        // Streak broken, record the length if it beat the previous record
        if ($longeststreak < $streak) {
            $longeststreak =  $streak;
            $longeststreakend = $date;
        }

        $streak=0;
    }
} 
```

# ios - iOS模拟器上的BootStrap错误在重启后仍然存在

> ID：12812086
> 
> 赞同：3
> 
> 时间：2012-10-10T04:44:36.203
> 
> 标签：ios, objective-c, ios-simulator, bootstrapping

我知道这是一个重复的问题。但是有人有真正可行的解决方案吗？

尝试了以下但徒劳无功：

1.  重启模拟器：浪费时间。
2.  重新启动 xcode：什么也没发生。
3.  重启系统：我讨厌它，没用。
4.  从终端终止模拟器进程。问题仍然存在。

有人真的解决过这个问题吗？然后请分享发生这种情况的原因以及解决方案。注意：在 ios 设备上运行时没有这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:16:33.610

从执行步骤`1-to-5`

**1)** `Reset Simulator (or delete the app which freeze)`

**2)** `Delete project from organizer`

**3)** `Clean / Delete build`

**4)** `Exit Xcode`

**5)** `Restart System`

这些肯定会解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:42:59.570

这通常发生在应用程序的多个实例在模拟器上运行时（当您反复尝试运行应用程序而不停止它时）。您可以尝试重置模拟器并清理 Xcode 中的构建。还要记住退出并重新启动模拟器和 Xcode。

# html - 强制运行缓存的 HTML 页面

> ID：12812087
> 
> 赞同：-1
> 
> 时间：2012-10-10T04:44:38.590
> 
> 标签：html, caching

我在服务器上运行了几个 html-php 页面。

我用的是ff。遍历和循环页面

```
<meta http-equiv="refresh" content="5; url=../page2.html" /> 
```

但是，我有几个客户端站每次都在请求页面。

我可以强制他们的 IE9 加载缓存页面，以防止他们再次从服务器请求页面。

注意：我在第一次加载页面并关闭网络连接后成功从客户端加载页面。然而，页面只有在我直接输入 URL（例如“http://site.page1.html”）时才能正确加载，但是当

```
<meta http-equiv="refresh" content="5; url=../page2.html" /> 
```

启动，浏览器无法再加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:05:51.387

当客户端从浏览器请求页面时，它将使用一组规则检查某些条件，如果它们通过，它将从缓存中加载页面，否则它将从服务器请求页面，但在您的页面中您明确地说浏览器，`please refresh your page after 5 seconds`现在您说我应该如何要求他不要刷新内容？但是，您可以使用状态代码从服务器响应我的内容仍然是最新的`304`，然后允许浏览器再次加载其缓存版本！

# jquery - jQuery 工具提示悬停循环动画

> ID：12812090
> 
> 赞同：0
> 
> 时间：2012-10-10T04:45:02.133
> 
> 标签：jquery, loops, hover, tooltip, eventtrigger

我在 jQuery 中创建了一个自定义工具提示系统，该系统使用 CSS 样式创建了一个新元素，以将其放置在所有其他项目之上和适当的位置。

一切正常，但是当鼠标移到工具提示上时，由悬停在父对象上引起的任何动画都开始循环播放。

有什么方法可以阻止悬停事件在我的工具提示上触发？

这是我的代码：http: [//jsfiddle.net/UzUct/1/](http://jsfiddle.net/UzUct/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:29:57.243

### 更改脚本的这一部分：

```
// Parent Hover Script
$(".item").hover(function() {
    $(this).stop().animate({
        "opacity": "0.5"
    },"fast");
},function() {
    $(this).stop().animate({
        "opacity": "1"
    },"fast");
}); 
```

你应该[`.stop()`](http://api.jquery.com/stop/)停止之前的动画！:)

### 小提琴：http: [//jsfiddle.net/UzUct/4/](http://jsfiddle.net/UzUct/4/)

# macos - xcode4.3 未检测到 iPad 2

> ID：12812091
> 
> 赞同：0
> 
> 时间：2012-10-10T04:45:07.910
> 
> 标签：macos, ios5, xcode4.3

直到昨天，我还能够使用 xcode 4.3 在 iPad 和 iPhone 上运行我的项目。但是今天当我尝试时，XCode 没有与 iPad 连接，它正在与 iPhone 连接。我检查了部署目标、配置文件，所有这些都是正确的，并且在 iPhone 中运行良好。在管理器中，连接时显示橙色指示器而不是绿色符号。我已经多次重新启动系统和iPad并检查过，但没有得到解决。如果有人对此有想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:29:11.100

只需升级您的 Xcode，或者如果您有另一台包含 xcode 4.5 的计算机，请在该计算机上检测您的设备，这也将在具有 xcode 4.3 的计算机上检测您的设备。我也有同样的问题，这对我有用。

# java - 如何在日期之间搜索（休眠搜索）？

> ID：12812093
> 
> 赞同：4
> 
> 时间：2012-10-10T04:45:13.443
> 
> 标签：java, hibernate, lucene, hibernate-search

我想知道如何使用 Range-Query 在 Hibernate Search 中按日期搜索，或者是否有任何过滤器我必须实现。以下是我在 Record Entity 中的字段

```
 /**
     * When the analysis started.
     */
    @Temporal(TemporalType.TIMESTAMP)
    @Field(index = Index.UN_TOKENIZED)
    @DateBridge(resolution = Resolution.MILLISECOND)
    private Date startTS; 
```

我的要求是找到两个日期之间分析的记录，例如。2011 年 11 月 11 日至 2012 年 11 月 11 日。我很困惑如何做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T11:57:19.263

您应该使用*from*和*to*使用范围查询。

```
query = monthQb
        .range()
            .onField( "startTS" ).ignoreFieldBridge()
            .from( DateTools.dateToString( from, DateTools.Resolution.MILLISECOND ) )
            .to( DateTools.dateToString( to, DateTools.Resolution.MILLISECOND ) ).excludeLimit()
            .createQuery(); 
```

由于您使用 DateTools 自己创建了基于字符串的搜索字符串，因此需要使用*ignoreFieldBridge*。

# java - 在 Mac OS X 上最小化后 JFrame 不刷新

> ID：12812094
> 
> 赞同：1
> 
> 时间：2012-10-10T04:45:23.653
> 
> 标签：java, macos, swing, jframe

我制作了一个 java swing 应用程序，它需要在 Windows 和 Mac OS X 上运行。

当用户点击最小化按钮时，应用程序被最小化，并在系统托盘中创建一个图标，代码如下：

```
MainScreen.getInstance().setExtendedState(JFrame.ICONIFIED);

trayIcon = new TrayIcon(new ImageIcon(getClass().getResource(
       "/dragonstore/resources/icon.png")).getImage());

trayIcon.setToolTip("DragonStore");
trayIcon.setImageAutoSize(true);
trayIcon.addMouseListener(new MouseAdapter()
{
     @Override
     public void mouseClicked(MouseEvent e)
           {
           MainScreen.getInstance().setVisible(true);

           MainScreen.getInstance().setExtendedState(NORMAL);
           SystemTray.getSystemTray().remove(trayIcon);
           trayIcon=null;
           MainScreen.getInstance().toFront();
           MainScreen.getInstance().getMainPanel().revalidate();
           MainScreen.getInstance().getMainPanel().repaint();
           MainScreen.getInstance().pack();
           MainScreen.getInstance().validate();
           MainScreen.getInstance().repaint();
           System.out.println("Restore");
       }
});
SystemTray.getSystemTray().add(trayIcon);
trayIcon.displayMessage("DragonStore",
        "Click here to maximized window again",TrayIcon.MessageType.INFO);
setVisible(false); 
```

所以上面的代码执行得很好，当用户点击系统托盘图标时，应用程序由`trayIcon`Mouse Clicked 函数中的代码恢复。

在 Windows 上一切正常，在任何地方都没有问题。

**但是在 Mac OS X 上，当我恢复应用程序时，它会以动画样式显示所有组件，这在 Mac 上是默认设置，但是一旦它在屏幕上完全恢复，窗口就会显示一个空白窗口，就好像框架没有组件一样。**

我调查了这个问题，并在 Mac OS X Lion 中发现了帧重绘错误，但我不认为这是这里的问题。

我应该怎么做才能解决这个问题？

我的目标是使最小化的应用程序在任务栏中不可见，并且图标显示在系统托盘通知中，因此用户可以通过单击系统托盘图标来恢复应用程序。

**它必须同时在 Windows 和 Mac 上执行。**

![在此处输入图像描述](../Images/f108cafcfa731c5ad684964dc3c66106.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:08:46.723

```
What should I do to solve this? 
```

采用

1.  `JFrame#setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);`代替`MainScreen.getInstance().setExtendedState(JFrame.ICONIFIED);`

2.  `MainScreen.getInstance().setVisible(true);`应该在最后一行（`and only one code line`）中`public void mouseClicked(MouseEvent e)`，每一行代码都没用，因为`JFrame.HIDE_ON_CLOSE`只是为了隐藏`JFrame`，

3.  `Every thing goes fine on Windows with no problems anywhere.`我怀疑...，但为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)

# java - 将面板添加到组合框弹出菜单

> ID：12812095
> 
> 赞同：0
> 
> 时间：2012-10-10T04:45:26.880
> 
> 标签：java, swing, jpanel, jcombobox, jpopupmenu

我有 jFrame = 框架

它有 jcombobox = 组合

然后我有 jpanel = 面板

我在这个面板中有很多组件

我尝试将此面板添加到组合框弹出菜单中

因此，如果单击组合框，

将显示具有许多组件的面板

可以将面板添加到组合框弹出菜单中吗？！？！

怎么做？？？

我已经读过了

[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

和

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ComboBoxDemoProject/src/components/ComboBoxDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ComboBoxDemoProject/src/components/ComboBoxDemo.java)

但仍然没有任何线索

怎么做？

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:18:04.257

因此，根据您的描述，您有一个不可见的面板，如果单击组合框，您希望出现该面板？那么它会出现在组合框中的任何选项中吗？

那应该很简单。让我们从 Java 教程`JLabel`中修改[这个 ComboBoxDemo中的。](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ComboBoxDemo2Project/src/components/ComboBoxDemo2.java)由于它们都继承自`JComponent`，我们将能够以相同的方式使`JLabel`和`JPanel`可见。

首先，确保您了解演示在做什么。组合框选项正在更改 JLabel 中日期文本的格式。我们希望以这样一种方式编辑演示，使这个 JLabel 在我们选择 JComboBox 中的任何选项之前不可见。

首先，我们希望包含一个布尔值作为类变量，以便我们可以在任何方法中访问它。

`boolean visibleComp;`

接下来，在构造函数中，您需要将 JLabel“结果”更改为默认不可见。我们可以通过使用JComponent的[setVisible 方法来做到这一点。](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setVisible%28boolean%29)

```
result.setVisible(false); 
```

现在我们需要控制结果何时以及如何变得可见——当我们继续执行代码时，我们看到该`actionPerformed`方法处理我们的事件，并将格式化细节传递给另一个名为`reformat.`

由于在我们的构造函数中也调用了重新格式化，我们希望在 actionPerformed 方法中设置我们的布尔值。

```
visibleComp = true; 
```

然后，我们将要在重新格式化的 try 块中添加一个条件语句——这将检查我们的布尔值是否为真，只有当用户执行了一个操作时才会发生这种情况。我们可以使用它来设置组件的可见性。

```
if(visibleComp){
     result.setVisible(true);
} 
```

您可以轻松地将 JPanel 与此示例互换。希望有帮助。

# ruby-on-rails - 预编译资产时，Rails 使用 scss 自定义引导变量不起作用

> ID：12812098
> 
> 赞同：0
> 
> 时间：2012-10-10T04:46:02.683
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

在我部署到 Heroku 之前，一切看起来都很漂亮，资产被预编译，现在 ui 是一团糟。

在我的 application.css 我有：

```
 *= require_self
 *= require_tree . 
```

在我的 app.css.scss 我有：

```
$gridColumns: 14;
$gridColumnWidth: 70px;
.. etc ..

@import "bootstrap";
@import "font-awesome"; 
```

为什么变量更改在开发中起作用但在生产中不起作用？使用 firebug 调试显示宽度基于旧的网格系统。

如何获得要被预编译资产覆盖的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:03:01.560

我只是跑

```
$ RAILS_ENV=production bundle exec rake assets:precompile 
```

然后致力于版本控制，再次部署，并且成功了。没有意义，但我想自己预编译它们与 Heroku 所做的不同。

# ios - 应用内购买的 iOS 提交问题

> ID：12812099
> 
> 赞同：10
> 
> 时间：2012-10-10T04:46:05.133
> 
> 标签：ios, iphone, submission, in-app

我已经上传了包含两个应用内购买的应用。4 天后，我收到此消息和 iTunes Connect 状态：**“您的应用内购买已被退回。您必须修改或删除突出显示的项目。”**

两个应用内购买都以警告标志突出显示，并说明**需要开发人员采取行动**。问题是什么的任何指针（一般......显然没有预期的细节）？

抱歉（DA）对这个问题含糊不清。但是，所有人都说“与其他开发人员和 Apple 工程师就技术主题进行交流。Apple 开发人员论坛”。所以想如果这里有人遇到过这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T06:17:39.983

当您填写有关您的应用内购买的信息不足时，通常会出现此问题。iTunes 会突出显示您的问题区域，您必须根据该区域采取必要的措施。如果您的所有信息都正确，那么只需编辑描述，在其后添加空格并保存。希望它对您有用。

# ruby - 反向方法 - 1.9.1 v 1.8.7

> ID：12812102
> 
> 赞同：1
> 
> 时间：2012-10-10T04:46:17.903
> 
> 标签：ruby

我写了一些代码：

`output = File.open(text_file).collect.reverse.join("<BR>")`

它似乎在 1.8.7 上可以正常工作，但会引发错误

`NoMethodError - undefined method 'reverse' for #<Enumerator: #<File:C:\EduTester\cron\rufus.log>:collect>:`

在 1.9.1 上（红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]）

有人知道**为什么**会发生这种情况以及**如何**解决这个问题吗？（为什么我最感兴趣。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T05:15:34.867

首先如何解决它 - 你应该这样做：

```
output = File.open(text_file).to_a.reverse.join("<BR>") 
```

这将适用于任一版本的 Ruby。基本上，您需要将文件转换为行数组（使用`.to_a`），然后再反转它们并添加换行符。

就原因而言（这有点技术性）：`File`混合在`Enumerable`模块中，这给它提供了类似`collect`. 现在在 Ruby 1.87 中，如果你在`Enumberable.collect`没有块的情况下调用它会返回一个`Array`. 但是在 1.9 中，它返回一个`Enumerator`- 不响应该`reverse`方法。

以下是相关方法的 2 个版本：

[http://ruby-doc.org/core-1.8.7/Enumerable.html#method-i-collect](http://ruby-doc.org/core-1.8.7/Enumerable.html#method-i-collect)
[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-collect](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-collect)

所以基本上在 1.9 之前`.collect`是一个（hacky）等价于`.to_a`. 但总是`.to_a`用来把东西变成数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T05:21:55.893

在 Ruby 1.8.7 中，如果使用 collect 方法给出或没有给出块，它会返回一个数组。但是在 1.9 中，如果使用 collect 方法给出块，它只会返回数组。否则它将返回枚举器对象。从[文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-collect)-

*采集方法——*

*为枚举中的每个元素返回一个新数组，其中包含一次运行块的结果。如果没有给出块，则返回一个枚举器。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T05:16:08.043

在 1.8.7 中，**collect**方法在应用于 File 对象时返回一个**数组，而在 1.9.3 中，它返回一个****enumerator**。**reverse**方法只能应用于数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:33:05.280

这在 1.8.7 中起作用的原因是，当您[`Enumerable#collect`](http://ruby-doc.org/core-1.8.7/Enumerable.html#method-i-collect)在 1.8.7 中不使用块调用时，它使用一个默认块，该块只返回其 arg，因此`file.collect`相当于`file.collect {|x| x}`which 返回文件中的行数组，在你可以调用[Array#reverse`](http://ruby-doc.org/core-1.8.7/Array.html#method-i-reverse)。

在 1.9.x 中，[`Enumerable#collect`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-collect)没有块的调用会返回一个[`Enumerator`](http://ruby-doc.org/core-1.9.3/Enumerator.html). Enumerator 本身不支持`#reverse`，它的 mixin 也不支持[`Enumerable`](http://ruby-doc.org/core-1.9.3/Enumerable.html)。所以，你会得到 NoMethodError。

如果您想以与任一版本兼容的方式编写此表达式，请使用`#to_a`而不是`#collect`.

`output = File.open(text_file).to_a.reverse.join("<BR>")`

# java - Android 通知不断启动应用程序（即使我没有点击通知）？

> ID：12812105
> 
> 赞同：0
> 
> 时间：2012-10-10T04:46:34.817
> 
> 标签：java, android, notifications, alarmmanager

我正在通过扩展 Activity 创建通知，每次出现通知时，我的应用程序都会不断启动。它不会每次都启动相同的活动。相反，它会启动我的应用程序中最后使用的活动。我的通知正在通过 AlarmManager 在特定日期/时间启动。如何阻止我的通知启动我的应用程序？我需要它在用户点击它时启动应用程序（该部分工作正常），但我不希望它在通知第一次出现在状态栏中时启动应用程序。这是我的通知代码：

```
public class DisplayReminderNotification extends SherlockActivity {

private Context context = this;

//Grab a handle onto the database and store the name of the reminder.
protected RemindersDAO remindersDAO;

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Get the notification ID.
    int notifID = getIntent().getExtras().getInt("Reminder_Primary_Key");

    String reminderName = getIntent().getExtras().getString("Reminder_Name");

    //PendingIntent stores the Activity that should be launched when the user taps the notification.
    Intent i = new Intent(this, ViewLocalRemindersDetail.class);
    i.putExtra("NotifID", notifID - randomInt);
    i.putExtra("notification_tap", true);

    displayIntent = PendingIntent.getActivity(this, notifID, i, 0);

    NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification notif = new Notification(R.drawable.launcher_icon, reminderName, System.currentTimeMillis());

    CharSequence from = "Here's your reminder:";

    CharSequence message = reminderName;        
    notif.setLatestEventInfo(this, from, message, displayIntent);

    //Fire up the notification.
    nm.notify(notifID, notif);

    //Destroy the activity/notification.
    finish();

} 
} 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:19:40.880

经过一些小的修改后，我尝试了您的代码，并且在我的最后工作正常。以下是代码，我只是将活动更改为使用名为 MyActivity 的空白活动启动：

```
public class DisplayReminderNotification extends Activity {

    private Context context = this;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Get the notification ID.
        int notifID = 1234;

        String reminderName = "reminder";

        // PendingIntent stores the Activity that should be launched when the
        // user taps the notification.
        Intent i = new Intent(this, MainActivity.class);
        i.putExtra("NotifID", 123);
        i.putExtra("notification_tap", true);

        PendingIntent displayIntent = PendingIntent.getActivity(this, notifID,
                i, 0);

        NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        Notification notif = new Notification(R.drawable.ic_launcher,
                reminderName, System.currentTimeMillis());

        CharSequence from = "Here's your reminder:";

        CharSequence message = reminderName;
        notif.setLatestEventInfo(this, from, message, displayIntent);

        // Fire up the notification.
        nm.notify(notifID, notif);

        // Destroy the activity/notification.
        finish();

    }
} 
```

我将此作为主要启动器活动，每当我启动此活动时，它只会在通知栏中添加通知，而不是启动应用程序。我建议你试试这个代码是一个单独的示例应用程序。可能问题出在代码的其他部分。

# database - 数据库中有大列有什么缺点吗？

> ID：12812106
> 
> 赞同：1
> 
> 时间：2012-10-10T04:46:37.473
> 
> 标签：database, database-design, relational-database, database-schema

我的数据库存储有关各种问题的用户统计信息。没有问题类型表，因此我没有在问题类型上使用连接表，而是将用户已完成的每种问题类型的用户统计信息存储在用户表中的序列化哈希映射中。显然，这导致了一些相当大小的用户行——我自己的用户的序列化统计信息大约是 950 个字符，我可以想象它们很容易增长到高级用户的 5 kb。

我从来没有在任何一本书中读过这么大的专栏的例子。我的表中有这么大/可变的列会极大地阻碍性能吗？我应该为问题类型添加一个表格，并使用户统计信息也成为一个单独的表格吗？

如果相关的话，我目前正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:07:39.733

我已经在 ProcessMaker 等系统上看到过这种序列化方法，它是一个 Web 工作流和 BPM 应用程序，并以序列化方式存储其数据。它的性能相当不错，但是基于这些数据构建报告确实很棘手。

您可以（并且应该）规范化您的数据库，如果您的信息模型不经常更改，这是可以的。

否则，您可能想尝试非关系型数据库，如 RavenDB、MongoDB 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T08:37:32.447

最大的缺点与 select *. 如果您有一个特定的字段列表，您可能不会遇到大问题，但是使用带有很多 TOASTed 列的 select *，您有很多额外的随机磁盘 I/O，除非所有内容都适合内存。选择更少的列会使事情变得更好。

在像 PostgreSQL 这样的对象关系数据库中，数据库规范化带来了与纯关系模型不同的权衡。总的来说，这仍然是一件好事（正如我所说，在你的数据库中执行 OR 操作之前，尽可能将关系模型推到最舒适的位置），但你可能认为它不是绝对必要的纯粹的关系数据库。此外，您可以添加函数来使用正则表达式处理该数据、从 JSON 中提取元素等，并将这些元素拉回您的关系查询中。因此，对于无法正常化的数据，大的无定形“docdb”字段并不是什么大问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T14:40:54.137

取决于您需要的主要查询：

*   如果您需要选择所有（或大部分）列的查询，那么这是最佳设计。
*   但是，如果您主要在列的子集上进行选择，那么可能值得尝试对表进行“垂直分区” ¹，这样您就可以避免“不需要”列的 I/O 并提高缓存效率。²

当然，所有这一切都是假设序列化数据从数据库的角度表现为“黑匣子”。如果您需要以某种方式搜索或约束该数据，那么仅存储一个虚拟字节数组将违反[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反 1NF，因此您需要考虑规范化您的数据......

* * *

*¹即将很少使用的列移动到第二个表中，该表与原始表的关系为 1:1。如果您使用的是 BLOB，则可以通过声明 BLOB 的哪一部分应保持“内联”来实现类似的效果 - 超出该限制的任何 BLOB 的其余部分将存储到与表的“核心”分开的一组页面中“页。*

*² DBMS 通常在页面级别实现缓存，因此行越宽，适合磁盘上单个页面的行越少，因此适合缓存中的单个页面。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T04:54:02.340

您不能在序列化数组中搜索。

# algorithm - 印刷硬币图案

> ID：12812108
> 
> 赞同：1
> 
> 时间：2012-10-10T04:46:50.930
> 
> 标签：algorithm, coin-change

> **可能重复：**
> [递归进行更改：如何修改我的算法以打印所有组合？](https://stackoverflow.com/questions/2209817/making-change-recursively-how-do-i-modify-my-algorithm-to-print-all-combination)

在硬币图案计数问题中（给定一个值 N 和一组固定的硬币，我们必须计算加起来为 N 的硬币组合的数量。），如果我们想打印组合而不是计算组合，什么是该方法 ？我必须为此使用动态编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:59:36.837

是的，你需要它。假设`dp[i]`等于加起来的组合数，`i`则以下伪代码打印所有组合：

```
print_combinations(amount_left, current_coin):
    if amount_left == 0:
        print "\n"
        return
    if current_coin == num_coins:
        return
    if dp[amount_left - coins[current_coin]] > 0:
        print coins[current_coin], " "
        print_combinations(amount_left - coins[current_coin], current_coin)
    print_combinations(amount_left, current_coin + 1) 
```

此函数打印`coins [current_coin .. last_coin]`加起来为 amount_left 的所有组合。所以最初的调用是`print_combinations(N, 0)`，正如你所看到的，动态规划表`dp[]`帮助我们决定是否使用当前硬币进行递归（我们只有在至少有一个组合加起来等于剩余的新数量时才会递归`amount_left - coins[current_coin]`）。

# amazon-ec2 - aws 弹性负载均衡器可以将端口 443 转发到弹性 beantalk 实例的端口 443 吗？

> ID：12812109
> 
> 赞同：3
> 
> 时间：2012-10-10T04:46:55.240
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk

我有一个 Windows/.NET 弹性 beanstalk 实例，在负载均衡器上设置了 SSL 证书。默认情况下，这会创建一个从 https/443 到 http/80 的端口转发。我希望负载均衡器上的 443/https 转发到 beanstalk 实例上的 443 https。

我试图做[这里记录的事情：](http://aws.typepad.com/aws/2011/08/elastic-load-balancer-ssl-support-options.html)

我重新配置了相应的 EC2 实例 EC2-->Load Balancers-->Listeners，以便 HTTPS 转发到使用我的 SSL 证书配置的 HTTPS，问题是当我尝试发出 HTTPS 请求之后它只是超时。似乎 ElasticBeanstalk 实例不喜欢我修改 EC2 侦听器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:58:34.063

To get SSL to work in between the LoadBalancer and the Elastic beanstalk I need several things:

1.  Configure the EC2 LoadBalancer to forward port 443 to port 443 (on SSL). I already had this part in the question above.

2.  Configure the IIS on the EC2 instance like any other site with SSL: a). Install SSL Cert on EC2 instance in IIS. b). Add https/443 binding with the SSL cert.

The problem was I was expecting #2 for free. On Windows Azure this is pretty much free when you configure certificates on your instance, but as of now this is not the case on AMZN ElasticBeanstalk for windows.

I also would expect #2 to be scriptable so I could scale up or down instances without have to manually do #2\. I was looking for some easy way to tie in power-shell scripts on my EB instances but they apparently don't have this feature either.

My final solution was to create a custom vm images (AMI) with the SSL cert installed an the https binding already added. If I do this I can deploy the ElasticBeanstalk image with my SSL stuff already setup. Doing this then allows me to scale up or down without any configuration.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T01:09:48.943

对于我的 ASP.NET MVC 项目和各种 OAuth 提供程序，这对我来说是一个特别的问题。基本上任何应该使用 https 的东西都在 Elastic Beanstalk 下被破坏了。我尝试通过寻找 X-Forwarded-Proto HTTP 标头来围绕它进行编码，但它非常讨厌。所以我真的希望 SSL 直接连接到我的 EC2 实例。

我可能花了 3 小时才弄清楚如何在不使用 AMI 的情况下做到这一点，所以希望这对某人有所帮助。

我之前尝试过自定义 AMI 方法，虽然它有效，但它存在两个问题：

1.  我必须修补和维护自己的 AMI，这很耗时。如果我使用标准图像，我可以在有更新的图像可用时重建环境。
2.  我无法对我的配置设置进行源代码控制——它们只是嵌入在云中某处的不透明 AMI 中。

我从[这篇文章](https://forums.aws.amazon.com/thread.jspa?messageID=592323)中改编了这个。

首先，您需要在您的 Visual Studio Web 项目的根目录中添加一个名为： 的目录`.ebextensions`。

在其中创建一个名为`environment.config`- 我们将在此处使用 YAML 的文本文件，因此不要在 Visual Studio 中编辑它，以防它认为它是应用程序配置文件并添加选项卡 - YAML 对空格敏感。该文件的语法记录[在 Amazon 上](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-windows-ec2.html)。

我的文件有许多其他用于调整 IIS 的设置，但相关位如下所示：

```
container_commands:
  site_add_ssl_binding:
    command: PowerShell -ExecutionPolicy Bypass -File "C:\\inetpub\\wwwroot\\.ebextensions\\ssl.ps1" 
```

这将执行一个名为`ssl.ps1`. 所以让我们在`.ebextensions`目录中创建它：

```
# If there is no existing SSL binding
if ( -not(Get-WebBinding "Default Web Site" -Port 443) ) {

    # Import the .pfx file into the certificate store
    $securepwd = ConvertTo-SecureString -String "YOUR_PFX_PASSWORD_HERE" -Force -AsPlainText
    $cert = Import-PfxCertificate -FilePath C:\inetpub\wwwroot\.ebextensions\my-certificate.pfx cert:\localMachine\my -Password $securepwd

    # Create site binding in IIS
    New-WebBinding -Name "Default Web Site" -IP "*" -Port 443 -Protocol https
    New-Item IIS:SslBindings\0.0.0.0!443 -value $cert
} 
```

执行时，此命令会将 .pfx 文件导入证书存储区，然后在您网站的端口 443 上创建 SSL 绑定。

使用我引用的原始代码，我遇到了各种不可靠的字符编码问题。因此，如果您复制/粘贴此示例但它不起作用，您可以通过远程连接到您的 EC2 实例、打开命令提示符并直接执行命令来对其进行测试：`PowerShell -ExecutionPolicy Bypass -File "C:\inetpub\wwwroot\.ebextensions\ssl.ps1"`

您还需要将 .pfx 文件添加到`.ebextensions`目录中。在 Visual Studio 中，确保所有文件都包含在项目中，并具有内容的构建操作（提示在解决方案资源管理器中选择文件并按 F4）。解决方案资源管理器应如下所示：

*   网络项目.csproj
    *   .ebextensions
        *   环境配置
        *   我的证书.pfx
        *   ssl.ps1
*   ...

然后使用[AWS Toolkit for Visual Studio](http://aws.amazon.com/visualstudio/)，右键单击您的项目并选择`Publish to AWS`并按照提示操作。这会将您的部署包上传到您的 Elastic Beanstalk 环境并进行安装。您的自定义将在部署期间执行，或者在配置新的 EC2 实例时执行。

成功执行后，该`.ebextensions`目录将被删除。

如果不想在 Visual Studio 项目中包含 .pfx 文件， [原始示例](https://forums.aws.amazon.com/thread.jspa?messageID=592323)使用 PowerShell 从 S3 实例下载 .pfx 文件。您还可以通过引用 Elastic Beanstalk 环境变量来避免在 .ps1 中嵌入密码。

要使此端到端工作，您还需要：

1.  将负载均衡器配置为将 443 流量转发到 EC2 实例上的端口 443 - 默认切换到端口 80。
2.  在负载均衡器之外配置安全组以允许 443 流量。
3.  将安全组配置到 EC2 实例中以允许 443 流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:18:46.673

对于某些实例类型，您可以通过配置文件配置 Elastic Beanstalk 应用程序服务器。您可以使用此技术来启用 SSL。

有关示例配置，请参阅[从 Elastic Beanstalk 应用程序实例提供 HTTPS 。](http://aftnn.org/2013/apr/05/serve-https-elastic-beanstalk-application-instances/ "从 Elastic Beanstalk 应用程序实例提供 HTTPS")

# javascript - 如何在基于 jquery 的 jsfiddle 中使用 javascript？

> ID：12812114
> 
> 赞同：2
> 
> 时间：2012-10-10T04:47:09.657
> 
> 标签：javascript, jquery, jsfiddle, multipage

我正在研究 jsfiddle，并选择使用的框架是“onload，jquery 1.8.2”。

我还调用了以下资源：

*   jquery.multipage.js
*   jquery.validate.min.js

这两个脚本，以及 jsfiddle 中定义的 html 和 css，都在输出预期的结果。

然而，我也在尝试添加一些纯 javascript 来实现一些 onfocus 和 onblur 效果。

我的问题是：

使用上述环境，如何将以下 javascript 添加到 jsfiddle：

```
<script type="text/javascript">
function clearText(field){
if (field.defaultValue == field.value) field.value = '';
else if (field.value == '') field.value = field.defaultValue;
}
</script> 
```

当前状态的 jsfiddle 在这里：

[http://jsfiddle.net/eJKQn/139/](http://jsfiddle.net/eJKQn/139/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:58:22.880

```
window.clearText = function(field){
   if (field.defaultValue == field.value) field.value = '';
   else if (field.value == '') field.value = field.defaultValue;
}; 
```

window 对象是您真正的*全局*命名空间，您可以引用它来定义其他外壳中的变量和函数。使用上面的，注意唯一改变的是第一行和最后的分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:54:42.797

我认为在何处或如何添加纯 Javascript 并不重要。如果您确实需要这样做（主要是在您自己的应用程序中），请将 jQuery 和 Javascript 分开，例如

```
// pure Javascript
function clearText(field){   
    if (field.defaultValue == field.value) field.value = '';   
    else if (field.value == '') field.value = field.defaultValue;   
}

// jQuery
$(function() {
    // all your jQuery scripts
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T04:56:06.133

对此脚本使用“no wrap (head)”，然后为 jquery 手动编写 onload 或 ready 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T04:58:20.587

在`Script`标签内，您可以自由地同时使用 jQuery 和 Javascript

据我所知，有两个主要规则

1.  document.ready 中的任何内容都将变为私有。因此，范围将受到限制
2.  jQuery 对象是 javascript 普通对象的包装器。因此，在混合使用 javascript 和 jQuery 时必须小心谨慎。

# c - 在哪些情况下我们应该使用 typedef 来定义结构？

> ID：12812124
> 
> 赞同：2
> 
> 时间：2012-10-10T04:48:27.600
> 
> 标签：c, struct, typedef

> **可能重复：**
> [typedef struct vs struct 定义](https://stackoverflow.com/questions/1675351/typedef-struct-vs-struct-definitions)

最近在看[nginx](http://wiki.nginx.org/Main)源码。有很多结构定义为

```
typedef struct {
    field_1;
    field_2;
    /* ... */
} some_obj_t; 
```

但仍有一些其他结构定义为

```
struct some_obj_s {
    field_1;
    field_2;
    /* ... */
}; 
```

然后，在*其他一些*头文件中，例如`ngx_core.h`，做一些`typedef`：

```
typedef struct some_obj_s some_obj_t; 
```

我的问题是（可能重复...）：

*   *为什么作者不**使用相同的**形式来定义所有结构？*
*   *在什么情况下我们应该`typedef`在`struct`定义上使用？是否有任何 OO 或设计模式注意事项？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:03:45.803

您在结构上使用 typedef 主要是为了方便。例如：

```
typedef struct List_
{
    ...

} List; 
```

这允许您将 List 类型的变量简单地定义为：

```
List myList; 
```

代替：

```
struct List_ myList; 
```

所有这些额外的结构语句都会使您的代码变得混乱。如您所示， typedef 的另一种用途是将一种类型实现为另一种类型。例如：

```
typedef List Queue; 
```

这将新类型 Queue 定义为先前定义的类型 List。然后，您可以像使用 List 一样使用 Queue。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:05:31.887

不同的用途反映了该类型是否（仅）用于接口，或者是否必须知道结构信息。

符号：

```
typedef struct some_obj_s some_obj_t; 
```

告诉编译器有一个带有 tag`some_obj_s`和 typedef name的结构类型`some_obj_t`。如果此类型对用户来说是不透明的类型，则无需指定结构的详细信息。`some_obj_t *`可以声明和使用带有参数（可能是限定的）或返回此类值的函数，而无需进一步的信息。（你甚至可以声明这种类型的[`extern`变量](https://stackoverflow.com/questions/12200096/)，因为编译器主要需要一个地址。）类型不完整（也称为不透明），但可以完成。

在实现的某个地方，您会找到结构类型的定义（除了最不寻常的情况），例如：

```
struct some_obj_s
{
    ...members defined...
}; 
```

如果此声明（定义）在范围内，您可以创建`some_obj_t`or类型的变量`struct some_obj_s`，以及指向该类型的指针。代码可以使用结构的成员。

符号：

```
typedef struct /* no tag */
{
    ...
} another_obj_t; 
```

定义了一个无标记的结构类型。提供了类型的详细信息，因此类型是完整的。

您可能还会看到：

```
typedef struct yao_s
{
   ...members defined...
} yao_t; 
```

这两者都使用其标记和 typedef 声明结构类型。

单独的 typedef 具有自引用结构的优势，例如列表：

```
typedef struct GenericList GenericList;
struct GenericList
{
    void        *data;
    GenericList *next;
    GenericList *prev;
}; 
```

如果没有单独的`typedef`行，您必须`struct GenericList`在结构内部编写。这意味着同样的事情；你仍然可以写它；但是使用单独的 typedef，您可以在结构中使用与稍后引用它相同的符号。

请注意，POSIX为实现[保留](https://stackoverflow.com/questions/231760/what-does-a-type-followed-by-t-underscore-t-represent/)类型名称结尾`_t`。这意味着在您自己的代码中使用该约定可能很危险。

不需要为标签和 typedef 使用单独的名称（如`GenericList`示例所示），尽管`_s`and`_t`后缀也是一个众所周知的约定。C++ 会自动将标签变成类型名，不需要显式 typedef（但允许显式 typedef），所以我通常使用相同的标签和类型名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:51:04.130

> 为什么作者不使用相同的形式来定义所有结构？

因为他们采用了一定的编码风格。

例如，Linux 内核编码标准使用没有 typedef 的结构表示法。那是纯粹的编码风格，他们没有令人信服的理由说明为什么要这样做，他们只是相信代码中的“结构”提高了可读性，因为他们认为 typedef “隐藏了类型”。

其他人不同意，例如 Windows API 全部使用 typedef 表示法，而从不使用 struct 表示法。我想说这种编码风格要普遍得多，因为它让人想起许多支持 OO 的语言风格：C++、Java、C# 等。

任何形式都不能轻易地被证明是正确的，这都是非常主观的。像大多数编码风格一样重要。

> 在哪种情况下，我们应该在结构定义上使用 typedef？是否有任何 OO 或设计模式注意事项？

确实有。C 中有一些称为不透明或不完整类型的东西，它允许您实现变量的真正私有封装。请参阅我昨天发布的[这个示例。](https://stackoverflow.com/a/12803393/584518)

在那个例子`typedef struct vector vector;`中，头文件中有一个，它基本上创建了一个抽象基类：调用者可以创建指针但不能分配的对象。调用者将永远无法访问结构成员。

然后在 .c 文件中，有一个结构的实现，`struct vector { ... };`它只对 .c 文件可见，而对调用者不可见。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T05:05:07.987

请通过以下链接找到第二个问题的答案：

[为什么我们要在 C 中如此频繁地对结构进行 typedef 呢？](https://stackoverflow.com/questions/252780/why-should-we-typedef-a-struct-so-often-in-c)

# sharepoint - 以编程方式访问 Sharepoint 2013 社区站点中讨论和回复的值

> ID：12812125
> 
> 赞同：2
> 
> 时间：2012-10-10T04:48:36.287
> 
> 标签：sharepoint, sharepoint-2013

嗨，我如何访问社区站点中**讨论**和回复的值，例如如何获取讨论的正文和该讨论的回复正文的值。

是否有两个不同的列表来存储讨论和讨论的回复，或者存储两个值的相同“讨论列表”。我很难理解讨论的价值。当我试图获得讨论的价值时，它会给出回复的价值。

有人试过这个，请给我一些反馈。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-28T21:43:22.400

要分别获取讨论和回复，您可以在 REST 查询中使用以下查询参数：

**讨论主题**

```
/_api/lists/getByTitle(‘listname‘)/items?$filter=ContentType eq ‘Discussion’
or
/_api/lists/getByTitle(‘listname‘)/items?$filter=FSObjType eq 1 
```

**讨论回复**

```
/_api/lists/getByTitle(‘listname‘)/items?$filter=ContentType eq ‘Message’
or
/_api/lists/getByTitle(‘listname‘)/items?$filter=FSObjType eq 0 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:33:36.440

讨论板中父 id = null 的列表项是讨论主题，父 id = 一些值是对讨论主题的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T12:13:26.577

SharePoint 的讨论列表有点像文档集，因为原始帖子是从文件夹继承的讨论内容类型，而回复是从项目继承的消息内容类型。因此没有涉及任何文档，但讨论（讨论列表）再次成为文件夹。

[https://sharepointeducation.wordpress.com/2016/12/06/get-all-replies-of-a-discussion-in-sharepoint-2013/](https://sharepointeducation.wordpress.com/2016/12/06/get-all-replies-of-a-discussion-in-sharepoint-2013/)

# javascript - jQuery会选择隐藏元素吗

> ID：12812129
> 
> 赞同：7
> 
> 时间：2012-10-10T04:49:15.513
> 
> 标签：javascript, jquery

如果我调用`.hide()`一个元素，jQuery 会/可以在普通的 dom 选择器中选择它。

如果 jQuery 通常选择隐藏元素，那么只选择可见元素的正确方法是什么。我可以使用 css 选择器，还是有更有效的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T04:59:43.513

是的。该`hide`函数仅存储元素的 display css 属性的当前值，然后将其设置为`none`. 所以 dom 选择器不会受到它的影响，除非它们尝试匹配具有特定`display`css 值的元素。

[在这里](http://jsfiddle.net/MhKwm/)检查。

查看[jQuery`hide`函数文档](http://api.jquery.com/hide/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T04:50:53.740

是的，它会计算隐藏元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T05:24:05.910

是的，它只是为元素添加了一个 display:none 样式......另一方面，.remove() 不会显示在计数中。但这完全摆脱了它，除非您将值存储在某个地方，否则它是不可检索的。

我假设您想要做的是计算可见项目。我会改为执行以下操作：

```
$('.element').addClass('hide');

var count_of_visible_items = $('.element:not(".hide")').length;
console.log(count_of_visible_items); 
```

# javascript - 识别下一个/上一个元素是否存在

> ID：12812133
> 
> 赞同：0
> 
> 时间：2012-10-10T04:50:12.040
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery：检查下一个元素是否存在](https://stackoverflow.com/questions/7678499/jquery-checking-if-next-element-exists)

我正在使用 jquery 实现自定义滑块。`right`当用户分别按下/`left`键时，我想提供工具来加载下一张/上一张图像。

它工作正常，但是当光标到达`last`/`first`元素时，代码会中断，因为它找不到更多元素。我的代码如下：

```
function movePointer(dir){
    var selected = $("#imgslider > ul > li > img.siddslideselected");
    console.log(selected);
    var selectedli = selected.parent();
    if(dir=='left'){
        var nabourele = selectedli.prev()
    }else if(dir=='right'){
        var nabourele = selectedli.next();
    }
    console.log(nabourele);
    if(nabourele){
        selected.removeClass('siddslideselected');
        nabourele.children().addClass('siddslideselected').trigger('click');
    }
} 
```

如果光标的当前位置在中间，则一切正常，但如果光标位于第一个元素上，则`left`按键会破坏代码。我试图通过检查来阻止它`if(nabourele){`，但它不起作用。在这种情况下`nabourele`显示的控制台日志。`[]`

如果下一个/上一个元素存在与否，我如何测试条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T04:51:05.737

您必须测试该`length`属性：

```
if ( nabourele.length ) 
```

# jquery - jQuery 可排序拖放无法按预期工作

> ID：12812135
> 
> 赞同：1
> 
> 时间：2012-10-10T04:50:27.203
> 
> 标签：jquery, drag-and-drop, jquery-ui-sortable

我有一个有序的文本区域列表，我正在使用 jQuery Sortable 启用拖放以重新定位列表中的项目。拖放似乎有效，但是当我尝试保存列表时，它以原始顺序保存，而不是显示的顺序。这是 Sortable 应该如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:00:40.503

您是否在页面上订购 textareas，然后期望它们按照放入的顺序进入服务器？如果是这样，你不能依赖这样的东西。浏览器不需要按照它们在页面上的顺序发送字段，而且您永远不知道服务器在请求数据进入的过程中会做什么。

每当我在 jQuery 中处理排序时，我都会使用 JavaScript 为我读取项目的顺序，然后在隐藏字段中传递顺序......所以如果你所有的文本区域都有 id，你可以有一个隐藏字段命名为“sort_order”，其值为以逗号分隔的 id 列表，顺序正确。

# iphone - `iphone sdk中的多个单选按钮验证

> ID：12812136
> 
> 赞同：0
> 
> 时间：2012-10-10T04:50:42.480
> 
> 标签：iphone, objective-c, ios

我想做验证`in Multiple dynamic`单选按钮`. I want to check`单选按钮是否`is`被选中。如果未选中，则显示警报并选中，然后转到另一件事。

以下代码我使用..

```
-(IBAction)btnNextClicked:(id)sender{
    if ([appDelegate.questions count]> i) {

        for (UIButton *btn in self.view.subviews)
        {
            if ([btn isKindOfClass:[UIButton class]])
            {
                if (btn.selected)
                {
                    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"BizVibe" message:@"Please select answer" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
                    [alert show];
                    [alert release];

                    return;
                }
                else{
                    for (int k=0; k<[[[appDelegate.questions objectAtIndex:i-1] objectForKey:[[appDelegate.questions objectAtIndex:i-1] objectForKey:@"question"]] count]; k++) {

                        for (UILabel *lbl in self.view.subviews)
                        {
                            if ([lbl isKindOfClass:[UILabel class]])
                            {
                                if (lbl.tag==k)
                                {
                                    [lbl removeFromSuperview];
                                }
                            }

                        }
                        for (UIButton *btn in self.view.subviews)
                        {
                            if ([btn isKindOfClass:[UIButton class]])
                            {
                                if (btn.tag==k)
                                {
                                    [btn removeFromSuperview];
                                }
                            }

                        }
                    }
                    [self LoadQuestionAnswer];
                    return;

                }
            }

        }

    }
    else{
        Term_para *termMSP = [[Term_para alloc]init];
        [self.navigationController pushViewController:termMSP animated:YES];
        [termMSP release];
    }
} 
```

请帮帮我我能做什么？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:16:52.453

好吧，我对您的代码无能为力，因为我不知道您想在该代码正文中做什么，但是您可以处理按钮`selected`并`UnSelected`使用`BOOL`变量，这取决于您的逻辑。见下面的例子 -

```
BOOL isSelected; // Declared it globally

-(IBAction)btnClicked:(id)sender
{
    if(isSelected)
    {
        [btn setTitle:@"Unselected" forState:UIControlStateNormal];
    }
    else
    {
        [btn setTitle:@"Selected" forState:UIControlStateNormal];
    }

    isSelected = !isSelected;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:59:55.830

这是iOS中单选按钮功能的[教程](http://www.mobisoftinfotech.com/blog/iphone/iphone-uibutton-tutorial-radio-buttons/)。一探究竟。它可能会引导你走向正确的方向。

# android - 对话的自定义主题和内容视图，哪一个是赢家？

> ID：12812143
> 
> 赞同：0
> 
> 时间：2012-10-10T04:51:19.470
> 
> 标签：android, android-dialog

我对某事感到困惑。假设您为对话框创建了一个自定义主题。此外，您还可以创建自定义内容视图。

现在，如果您使用该主题和自定义内容视图创建一个对话框，哪个优先？换句话说，如果主题中 TextView 的颜色是黑色，而在内容视图中，您的视图有红色的文本字段，那么结果对话框会显示什么？

谢谢

# linux - 我已经询问了 Linux 系统上的 get tid 和 getpid 的结果

> ID：12812144
> 
> 赞同：0
> 
> 时间：2012-10-10T04:51:23.057
> 
> 标签：linux, posix

pid : 2394 tid : 2399

pid : 2394 tid : 2398

pid : 2394 tid : 2397

pid : 2394 tid : 2395

***这是使用 getpid() __NR_gettid***

PID：2529 时间：1811777280

pid：2529 tid：1820169984

PID：2529 时间：1828562688

PID：2529 时间：1836955392

pid：2529 tid：1845348096

***这是使用 pthread_self()***

我正在使用 Fedora17。我想知道为什么 getpid() 和 pthread_self() 的 tid 结果不同？

哪一个是对的？我的教授 说pthread使用posix而不是linux系统。

并且在多线程条件下pid是一样的吗？我得到正确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:59:25.850

`gettid`返回*线程 ID*并`pthread_self`返回*POSIX 线程 ID*。两者不同。

这是默认行为。请参阅 linux 手册页`pthread_self()`。这 3 个条款将阐明这一点。

> 线程标识符应该被认为是不透明的：**任何在 pthreads 调用中使用线程 ID 的尝试都是不可移植的**，并且可能导致未指定的结果。
> 
> 线程 ID 只保证在一个进程中是唯一的。在已终止的线程已加入或已分离的线程已终止后，可以重用线程 ID。
> 
> **pthread_self() 返回的线程 ID 与调用 gettid(2) 返回的内核线程 ID 不同**。

这也来自`gettid`手册页

> 此调用返回的线程 ID 与 POSIX 线程 ID 不同（即 pthread_self(3) 返回的不透明值）

# javascript - 融合表点查询

> ID：12812149
> 
> 赞同：1
> 
> 时间：2012-10-10T04:51:56.453
> 
> 标签：javascript, google-maps, latitude-longitude, google-fusion-tables

我有一个包含超过 611,000 条数据线的融合表。每条线代表美国上空的一个点，该点位于经纬度 0.05 度网格间距处。每个数据行包含一个 lat 和 long 列以及 8 个其他数据列。我想根据用户输入的地址查询数据表。我看过：

[https://developers.google.com/fusiontables/docs/samples/open_infowindow](https://developers.google.com/fusiontables/docs/samples/open_infowindow)

定位和显示最接近用户输入地址的单个数据点的最佳方法是什么？

这是我的表 ID：

```
1Rb-F5w3U_WKT9zfT_WbTczLnBk7VZNge0JkVVuU 
```

# liferay - Liferay 6.1 中使用 Vaadin portlet 的 portlet 间通信

> ID：12812151
> 
> 赞同：1
> 
> 时间：2012-10-10T04:52:07.763
> 
> 标签：liferay, vaadin

我有一个需求，比如在 Liferay 中通信两个 vaadin portlet。一个 portlet 带有显示报告名称（webi 报告）的 vaadin 树视图。单击树时，我必须在另一个 portlet 中打开相应的报告。

任何人都可以提出您的想法并分享满足此要求的详细信息。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:28:48.980

一种直接的解决方案是 Vaadin IPC 插件。在以下位置查看详细信息和示例：http: [//vaadin.com/addon/vaadin-ipc-for-liferay](http://vaadin.com/addon/vaadin-ipc-for-liferay)

请注意，这需要使用 6.x 版本的 Vaadin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T06:21:45.103

```
I have instlled vaadin control panel for liferay and installed vaadin liferay ipc in tomcat.
The below codes of two portlets sender and receiver .But I cannt able to receive.PLease help in solving this 

**sender :**

import com.vaadin.Application;
import com.vaadin.addon.ipcforliferay.LiferayIPC;
import com.vaadin.ui.Label;
import com.vaadin.ui.Window;

@SuppressWarnings("serial")
public class SenderipcApplication extends Application {

    public void init() {
        Window window = new Window();

        setMainWindow(window);

        Label label = new Label("Hello Senderipc!");

        window.addComponent(label);

        LiferayIPC ipc = new LiferayIPC();
        ipc.sendEvent("eventid1", "This is sender 1");

        window.addComponent(ipc);
    }

}

**receiver**

package senderipc;

import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;
import javax.portlet.EventRequest;
import javax.portlet.EventResponse;
import javax.portlet.RenderRequest;
import javax.portlet.RenderResponse;
import javax.portlet.ResourceRequest;
import javax.portlet.ResourceResponse;

import com.vaadin.Application;
import com.vaadin.addon.ipcforliferay.LiferayIPC;
import com.vaadin.addon.ipcforliferay.event.LiferayIPCEvent;
import com.vaadin.addon.ipcforliferay.event.LiferayIPCEventListener;
import com.vaadin.terminal.gwt.server.PortletApplicationContext2.PortletListener;
import com.vaadin.ui.Label;
import com.vaadin.ui.Window;

   public class receiveripc extends Application implements PortletListener {

     String name="";
     String data = "";
    public void init() {
        Window window = new Window("Vaadin Portlet Application");
        window.setName("sample");
        setMainWindow(window);
        window.addComponent(new Label("Hello Vaadin fgfgfgsgsdg!"));
        name=window.getName().toString();
        LiferayIPC liferayipc = new LiferayIPC();

        liferayipc.setImmediate(false);
        liferayipc.setWidth("200px");
        liferayipc.setHeight("200px");
        liferayipc.getDescription();

        liferayipc.addListener("eventid1", new LiferayIPCEventListener() {
            public void eventReceived(LiferayIPCEvent event)
            {
                // Do something with the message data

                data = event.getEventId();
             //  getMainWindow().

               getWindow(name).showNotification("Received hello: " + data);

          //     printData(window,data);

            }
        });
        window.addComponent(liferayipc);
        window.addComponent(new Label(data+"++++++++++gsdgsdgsdgsd++++++555Hello Vaadin hhfhhdfhdfh!"));
    //    window.addComponent(new Label(data+"++++Hello Vaadin usetttttttttttt!"));
    }

//  public Window getWindow() {
//      // TODO Auto-generated method stub
//       Window window1 = window;
//      return window1;
//  }

    protected void printData(Window window, String data) {
        // TODO Auto-generated method stub 
         window.addComponent(new Label(data + "Hello Vaadin userhghjgjgkjh!"));
    }

    @Override
    public void handleRenderRequest(RenderRequest request,
            RenderResponse response, Window window) {
        // TODO Auto-generated method stub

    }

    @Override
    public void handleActionRequest(ActionRequest request,
            ActionResponse response, Window window) {
        // TODO Auto-generated method stub

    }

    @Override
    public void handleEventRequest(EventRequest request,
            EventResponse response, Window window) {
        // TODO Auto-generated method stub

    }

    @Override
    public void handleResourceRequest(ResourceRequest request,
            ResourceResponse response, Window window) {
        // TODO Auto-generated method stub

    }

//  LiferayIPCEvent event=null;
//  event.getData();
//  LiferayIPCEventListener listener=null;
//  listener.eventReceived(event);

} 
```

# sqlite - 如何在 SQLite 中找到当前 SAVEPOINT 的名称？

> ID：12812152
> 
> 赞同：0
> 
> 时间：2012-10-10T04:52:16.423
> 
> 标签：sqlite, transactions

我`ON UPDATE`在调用自定义函数的表上有一个触发器。在自定义函数中，我想在日志表中插入当前 SAVEPOINT 的名称（最深的未保存的名称）以及表的名称和时间戳。我目前正在硬编码表的名称（如果有更好的方法，请告诉我）但我不知道如何获取当前 SAVEPOINT 的名称。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:04:20.037

默认情况下，SQLite 没有获取当前保存点（或当前触发器的表）的函数。

但是，如果您已将 SQLite 编译到您的应用程序中，则可以使用`sqliteInt.h`，并且从变量`sqlite3 *db`访问当前保存点的名称为`db->pSavepoint->zName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T16:09:34.010

在不使用 sqlite3int.h 和 sqlite3* db 结构的情况下确定当前保存点的一种方法是设置编译时授权回调（[http://www.sqlite.org/c3ref/set_authorizer.html](http://www.sqlite.org/c3ref/set_authorizer.html)）然后查看对于 SQLITE_SAVEPOINT 的操作代码 ( [http://www.sqlite.org/c3ref/c_alter_table.html](http://www.sqlite.org/c3ref/c_alter_table.html) )。

传递给授权回调的第四个参数将是保存点的名称。通过将此名称存储在您的结构中 - 您将可以访问在分析/准备您的 sqlite3_stmt 期间传入的*最后一个保存点的名称。*

# bash - bash中的粘贴命令不会附加到文件末尾

> ID：12812154
> 
> 赞同：4
> 
> 时间：2012-10-10T04:52:29.247
> 
> 标签：bash

一个文件有 3 列，如下所示：

```
1   249250621   225280621   
2   243199373   238207373   
3   198022430   194797140   
4   191154276   187661676   
5   180915260   177695260   
6   171115067   167395067   
7   159138663   155353663   
8   146364022   142888922   
9   141213431   120143431   
10  135534747   131314747   
11  135006516   131129516   
12  133851895   130481895   
13  115169878   95589878    
14  107349540   88289540    
15  102531392   81694769    
16  90354753    78884753    
17  81195210    77795210    
18  78077248    74657248    
19  59128983    55808983    
20  63025520    59505520    
21  48129895    35108702    
22  51304566    34894566    
X   155270560   151100560   
Y   59373566    25653566 
```

我的其他文件如下所示：

```
5677533
4506000
2272564
2753699
4015846
2163243
3812595
2885199
8064159
3522086
2006115
1490517
1072244
1423429
3009679
2705191
1479591
800436
929876
648000
347993
972862
7812943
9660863 
```

当我尝试

粘贴 file1.txt file2.txt > file3.txt

我得到：

```
1   567753321   225280621   
2   450600073   238207373   
3   227256430   194797140   
4   275369976   187661676   
5   401584660   177695260   
6   216324367   167395067   
7   381259563   155353663   
8   288519922   142888922   
9   806415931   120143431   
10  352208647   131314747   
11  200611516   131129516   
12  149051795   130481895   
13  107224478   95589878    
14  142342940   88289540    
15  300967992   81694769    
16  27051913    78884753    
17  14795910    77795210    
18  80043648    74657248    
19  92987683    55808983    
20  64800020    59505520    
21  34799395    35108702    
22  97286266    34894566    
X   781294360   151100560   
Y   96608636    25653566 
```

file2.txt 中的数据覆盖文件 1 中的第二列。我希望将 file2.txt 中的数据附加到新列的末尾，并由 file1.txt 中的制表符分隔到新的 file3.txt 中。但它似乎不起作用。想法？谢谢。

编辑：对于 file2，我可以使用相同的第一列索引 1-22、x、y 创建它。但是当我尝试加入时，它也不起作用。这是我在加入时的输出：

```
1 249250621 225280621
 5677533
2 243199373 238207373
 4506000
3 198022430 194797140
 2272564
4 191154276 187661676
 2753699
5 180915260 177695260
 4015846
6 171115067 167395067
 2163243
7 159138663 155353663
 3812595
8 146364022 142888922
 2885199
9 141213431 120143431
 8064159
10 135534747 131314747
 3522086
11 135006516 131129516
 2006115
12 133851895 130481895
 1490517
13 115169878 95589878
 1072244
14 107349540 88289540
 1423429
15 102531392 81694769
 3009679
16 90354753 78884753
 2705191
17 81195210 77795210
 1479591
18 78077248 74657248
 800436
19 59128983 55808983
 929876
20 63025520 59505520
 648000
21 48129895 35108702
 347993
22 51304566 34894566
 972862
X 155270560 151100560
 7812943
Y 59373566 25653566 9660863 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:13:27.660

尝试`dos2unix`同时运行`file1.txt`和`file2.txt`先运行。

```
==> dos2unix file*.txt
file1.txt: done.
file2.txt: done.
==> paste file1.txt file2.txt > file3.txt
==> cat file3.txt
1   249250621   225280621       5677533
2   243199373   238207373       4506000
3   198022430   194797140       2272564
4   191154276   187661676       2753699
5   180915260   177695260       4015846
6   171115067   167395067       2163243
7   159138663   155353663       3812595
8   146364022   142888922       2885199
9   141213431   120143431       8064159
10  135534747   131314747       3522086
11  135006516   131129516       2006115
12  133851895   130481895       1490517
13  115169878   95589878        1072244
14  107349540   88289540        1423429
15  102531392   81694769        3009679
16  90354753    78884753        2705191
17  81195210    77795210        1479591
18  78077248    74657248        800436
19  59128983    55808983        929876
20  63025520    59505520        648000
21  48129895    35108702        347993
22  51304566    34894566        972862
X   155270560   151100560       7812943
Y   59373566    25653566        9660863 
```

# android - 如何对偏好活动进行自定义对话框？

> ID：12812156
> 
> 赞同：3
> 
> 时间：2012-10-10T04:53:06.790
> 
> 标签：android

我有一个首选项页面，其中有一个启用登录密码的复选框首选项。当用户检查它时，它应该会弹出一个对话框，里面会有**2 个密码编辑文本**字段。

我做了一些阅读，似乎使用自定义对话框将是正确的选择。但是问题是没有onCreateDialog() 方法可以让偏好活动覆盖，我该如何解决这个问题？一些示例代码会很好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:32:29.637

创建您自己的自定义子类`DialogPreference`来处理您的对话框并保留您的偏好值，并在您的偏好 XML 资源中使用它。

# objective-c - 为什么我不能在情节提要中设置标签栏图标但可以使用其他图像

> ID：12812161
> 
> 赞同：0
> 
> 时间：2012-10-10T04:53:54.050
> 
> 标签：objective-c, png, xcode4.5

这是简单的任务。更改标签栏图标。我们的设计师为此提供了一个文件。

![在此处输入图像描述](../Images/ca2f41f877e1b4f4146c9053f65254bd.png)

请注意，这不是 tabbar-1-nearby-normal.png 的样子。

这就是它的样子。

![在此处输入图像描述](../Images/b98a6ab741abb495cb3486d9cc19e5a6.png)

但是，其他图标做得很好。

![在此处输入图像描述](../Images/ff9bf24957923ad94030c603fbd41a43.png)

图像的大小如下： ![在此处输入图像描述](../Images/aa2e519cabc1b5d69186047d3aa9980f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:18:42.737

您是否尝试过删除图像然后重新添加它？如果是这样，如何以不同的名称重新添加它，或者进行干净的构建？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:06:02.593

标签栏的图像需要是黑白的。然后我们稍后为选定图像和未选定图像添加背景。

# gwt - 如何在可重用的 gwt 库/小部件中包含 3rd 方 JavaScript 库？

> ID：12812164
> 
> 赞同：3
> 
> 时间：2012-10-10T04:54:01.133
> 
> 标签：gwt, pubnub

我试图用 GWT 弄湿我的脚，看看迁移是否会成功。我通常先尝试更困难的部分，以确保我能完成项目。我的项目中最困难的部分是引用 3rd 方 JS 库。在此示例中，我尝试使用 PubNub，因为我们的大部分平台都在使用它。

我想做的是创建一个可重用的对象，可以在其他需要 PubNub 的 GWT 项目中使用。我已经成功运行了一个简单的小测试（即，我已经掌握了 JNSI 的基础知识），但我的问题是 -> 我应该在哪里引用第 3 方脚本以便正确创建库/模块?

现在我只是将外部脚本的引用放在项目的 HTML 页面中，但我很确定从可重用性的角度来看这是不正确的，因为这个库将用于其他项目，每个项目都有自己的基本 HTML 页面。

我尝试将引用放在 gwt.xml 文件中，但这似乎丢失了引用（即我的测试项目不再像脚本在 HTML 页面中时那样工作）

您对如何在可重用的 GWT 库/小部件中包含 3rd 方库有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T05:09:47.243

这里有一个使用客户端包和脚本注入器的示例，您可以使用同步加载或异步。

使用同步时，外部 js 内容将嵌入到应用程序中，否则它将包含在不同的片段中，该片段将通过 ajax 请求获得。

您可以将您的 api 放在任何服务器中并使用 ScriptInjector 加载它。

```
public class Example {

  public static interface MyApiJs extends ClientBundle {
    MyApiJs INSTANCE = GWT.create(MyApiJs.class);

    @Source("my_api.js")
    TextResource sync();

    @Source("my_api.js") // Should be in the same domain or configure CORS
    ExternalTextResource async();
  }

  public void loadSync() {
    String js = MyApiJs.INSTANCE.sync().getText();
    ScriptInjector.fromString(js).inject();
  }

  public void loadAsync() throws ResourceException {
    MyApiJs.INSTANCE.async().getText(new ResourceCallback<TextResource>() {
      public void onSuccess(TextResource r) {
        String js = r.getText();
        ScriptInjector.fromString(js).inject();
      }
      public void onError(ResourceException e) {
      }
    });
  }

  public void loadFromExternalUrl() {
    ScriptInjector.fromUrl("http://.../my_api.js").inject();
  }
} 
```

[编辑]

更好的方法是使用[gwtquery](http://gquery.org) 1.4.0 中名为[JsniBundle](http://slides.gquery.org/gwtcreate/gwtcreate.html#33)的新功能。我们在旧金山和法兰克福的[GWT.create](http://gwtcreate.com/#tracks-and-themes)会议期间介绍了此功能。

使用这种方法，您可以将任何外部 javascript（放置在源代码树中或托管在外部主机中）作为 JSNI 块插入。它有很多好处：

*   利用 GWT jsni 验证器、混淆器和优化器。
*   当应用程序不使用它时，摆脱任何 jsni java 方法。

语法其实很简单：

```
public interface JQueryBundle extends JsniBundle {
  @LibrarySource("http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js")
  public void initJQuery();
} 

JQueryBundle jQuery = GWT.create(JQueryBundle.class);
jQuery.initJQuery(); 
```

# java - 按下 OK 按钮后，Android 相机活动不会返回到我的应用程序

> ID：12812165
> 
> 赞同：8
> 
> 时间：2012-10-10T04:54:02.673
> 
> 标签：java, android, android-camera

我有一个完全可以运行的应用程序。我的相机意图或权限只有 1 个问题。

该应用程序应该在用户按下按钮时启动相机活动。这很好，但是当用户通过单击相机上的确定按钮接受图片时，它不会返回到我的应用程序。如果他们按下相机上的取消按钮，它会按预期返回到我的应用程序。

我已经阅读了我可以在这里找到的所有类似问题，但没有一个能解决我的问题。我需要告诉相机确切地保存图像的位置，因为我想在我的应用程序中交替使用 2。下面是创建 Camera Intent 并启动它的代码：

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.parse(imagePath));
startActivityForResult(intent, 11); 
```

我尝试了多个值`imagePath`（这是一个字符串），但相机的“确定”按钮没有与它们中的任何一个一起使用。这些是我尝试过的路径：

```
/mnt/sdcard/<appName>/cameraImages/image1.jpg
from Environment.getExternalStorageDirectory()

/mnt/sdcard/Android/data/<appPkg>/cache/<appName>/cameraImages/image1.jpg
from context.getExternalCacheDir()

/mnt/sdcard/Android/data/<appPkg>/cache/<appName>/cameraImages/image1.jpg
from context.getCacheDir() 
```

我的清单文件中有以下权限：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" />
<uses-feature android:name="android.hardware.camera.flash" android:required="false" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

你们能帮我弄清楚我的代码有什么问题，或者告诉我有效的路径可能是什么？我更喜欢将图像存储在缓存位置，因为图像在用户离开应用程序后继续存在并不重要，但我并不关心谁可以访问图像。

我在 4.1 模拟器上进行所有测试，使用 4.1 SDK 进行编译，我的最低版本是 API 8 (2.2)。

我已经为意图提出了一个案例`onActivityResult()`，但我认为你们不需要查看该代码，因为它不应该影响问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:28:36.923

我能够弄清楚这个问题。似乎在添加额外内容时`Uri.parse(imagePath)`必须使用而不是使用。`Uri.fromFile(new File(imagePath))`我将新的 Intent 代码放在下面，以防万一它对遇到同样问题的人有所帮助。

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(imagePath)));
startActivityForResult(intent, 11); 
```

我现在成功地`context.getExternalCacheDir()`用来创建完整路径`imagePath`。我创建的结果路径是`/mnt/sdcard/Android/data/<appPkg>/cache/<appName>/cameraImages/image1.jpg`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T13:56:04.983

问题是您需要将本地（应用程序的内部）文件共享给相机活动。为这种效果创建一个内容提供者是唯一对我有用的东西。请参阅此处的第二个选项：http: [//dharmendra4android.blogspot.com/2012/04/save-captured-image-to-applications.html](http://dharmendra4android.blogspot.com/2012/04/save-captured-image-to-applications.html)

# ruby-on-rails-3 - 通过使用 Rails 的电子邮件中的链接调用更新操作

> ID：12812166
> 
> 赞同：0
> 
> 时间：2012-10-10T04:54:04.070
> 
> 标签：ruby-on-rails-3

我想通过在我的 ActivationController 中调用更新操作来激活注册用户。

在我的`activation.html.erb`文件中，我有这个：

```
<html>
  <body>
    To activate your account, please click the link below:

    <%= link_to "Click Here", activation_url(@user.activation_token), method: :put %>
  </body>
</html> 
```

`rake routes`看起来像这样：

```
 activation PUT    /activations/:id(.:format)          activations#update 
```

但是当我单击电子邮件中的此链接时，我收到此错误：

```
No route matches [GET] "/activations/icrvr5uNahnA5fpVjVTDEw" 
```

帮助，

麦克风

**更新**

根据下面的答案，我将路线更改为：

```
activations_validate GET  /activations/validate(.:format)  activations#validate 
```

但是现在当路由中没有 :id 时，我应该如何从 URL 中获取 params[:id] ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:09:55.047

在您的路由文件中，尝试将其设置为 GET 而不是 PUT，并将方法更改为类似`activations#validate`（显然也更改您的控制器），然后在控制器的 validate 方法中，检查`params[:id]`您的验证逻辑，如果成功，更新（激活）用户并重新路由到任何地方。

# c# - 在 asp.net 上上传 csv 文件

> ID：12812171
> 
> 赞同：0
> 
> 时间：2012-10-10T04:54:12.450
> 
> 标签：c#, asp.net

用户需要上传 30,000 个 csv 值，这些值可能包含 16 位数字或邮政编码。

现在我们的 asp.net 项目不使用 AJAX 工具包控件或 jquery 或任何其他 3rd 方控件或开源代码。这是根据公司隐私政策的限制。

所以我必须想出一个最好的方法来适应文件上传功能。这在可重用性方面必须是通用的，比如自定义控件

此文件上传功能不应保存在服务器上，而是我需要将数据读入流缓冲区并将它们发送到 UI，然后一旦用户验证这些值，他/她将不得不点击提交，因此值将被保存到 DB。

实现这一点的最佳方法是什么，

*   我可以使用**System.Net.Webclient**吗？或者
*   **使用Async HttpHandlers**还有其他替代方法吗？
*   我可以**向 UI 显示文件上传进度**吗？

感谢您是否可以在这方面为我提供适当的指导。

在此先感谢克里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:02:29.497

那么 30,000 个邮政编码值或任何其他 16 位代码应该可以使用文件控制正常上传（我的意思是通过回发）。

如果您必须阅读并在 UI 上显示 30,000，我认为您有冻结 UI 的风险。

此外，如果您不在 HTML5 上，则无法在客户端读取内容，除非您摆弄 Flash。

HTML 5 文件 api 参考 [http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

如何使用 Flash 读写文件（动作脚本）

[http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/](http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/)

# java - 是否有类似于 ArrayList 的 Java 类可以做到这一点？

> ID：12812172
> 
> 赞同：4
> 
> 时间：2012-10-10T04:54:16.407
> 
> 标签：java, arrays, arraylist

我在编程时有时会遇到这个问题。

想象一下，我有一个包含两列的数据表。第一列有字符串，第二列有整数。

我希望能够将表的每一行存储到一个动态数组中。所以数组的每个元素都需要保存一个字符串和一个整数。

以前，我通过将表的每一列拆分为两个单独的 ArrayList 来完成此操作，然后当我想添加一行时，我会在每个 ArrayList 上调用一次 add() 方法。要删除，我会在同一索引处的每个 ArrayList 上调用一次 remove(index) 方法。

但是没有更好的方法吗？我知道有像 HashMap 这样的类，但它们不允许重复键。我正在寻找允许重复条目的东西。

我知道可以做这样的事情：

```
ArrayList<Object[]> myArray = new ArrayList<Object[]>();
myArray.add(new Object[]{"string", 123}); 
```

我真的不想每次从数组中取出一个元素时都必须转换成 String 和 Integer 但也许这是不创建我自己的唯一方法？这对我来说看起来更令人困惑，我更喜欢使用两个 ArrayList。

那么有没有像 ArrayList 这样的 Java 对象可以像这样工作：

```
ArrayList<String, Integer> myArray = new ArrayList<String, Integer>();
myArray.add("string", 123); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T04:56:57.950

只需创建简单的 POJO 类来保存行数据。不要忘记`equals`并且`hashCode`更喜欢不可变的解决方案（没有设置器）：

```
public class Pair {
    private String key;
    private Integer value;

    public Pair(String key, Integer value) {
        this.key = key;
        this.value = value;
    }

    public String getKey() {
        return key;
    }

    public Integer getValue() {
        return value;
    }

    // autogenerated

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof Pair)) return false;

        Pair pair = (Pair) o;

        if (key != null ? !key.equals(pair.key) : pair.key != null) return false;
        if (value != null ? !value.equals(pair.value) : pair.value != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = key != null ? key.hashCode() : 0;
        result = 31 * result + (value != null ? value.hashCode() : 0);
        return result;
    }
} 
```

用法：

```
 List<Pair> list = new ArrayList<Pair>();
    list.add(new Pair("string", 123)); 
```

注意：在其他语言中，它有内置的解决方案，例如 Scala 中的案例类和元组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T05:01:57.530

创建一个保存数据的 Row 类。

```
package com.stackoverflow;

import java.util.ArrayList;
import java.util.List;

/**
 * @author maba, 2012-10-10
 */
public class Row {
    private int intValue;
    private String stringValue;

    public Row(String stringValue, int intValue) {
        this.intValue = intValue;
        this.stringValue = stringValue;
    }

    public int getIntValue() {
        return intValue;
    }

    public String getStringValue() {
        return stringValue;
    }

    public static void main(String[] args) {
        List<Row> rows = new ArrayList<Row>();
        rows.add(new Row("string", 123));
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T05:09:24.740

如果您确定整数或字符串中的任何一个值都是唯一的，则 Map 是一种选择。然后，您可以将该唯一值作为键。如果您的情况不是这样，那么创建一个简单的 POJO 是您的最佳选择。事实上，如果将来每行有机会获得更多的值（列），那么使用 POJO 将更省时。您可以定义 POJO 之类的；

```
public class Data {

 private int intValue;
 private String strValue;

 public int getIntValue() {
   return intValue;
 }

 public void setIntValue(int newInt) {
  this.intValue = newInt;
 }

 public String getStrValue() {
   return strValue;
 }

 public void setStrValue(String newStr) {
  this.strValue = newStr;
 } 
```

在课堂上你可以像这样使用它；

```
ArrayList<Data> dataList = new ArrayList<Data>();  
Data data = new Data();  
data.setIntValue(123);  
data.setStrValue("string");  
dataList.add(data); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-10T05:01:45.197

您可以创建非常简单的对象，例如：

```
public class Row{
   private String strVal;
   private Integer intVal;

   public Row(String s, Integer i){
        strVal = s;
        intVal = i;
   }

   //getters and setters
} 
```

然后按如下方式使用它：

```
ArrayList<Row> myArray = new ArrayList<Row>();
myArray.add(new Row("string", 123)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T05:01:29.760

您应该创建一个包含 int 和 String 的类（例如 Foo）。

然后你可以创建一个 Foo 对象的 ArrayList。

`List<Foo> fooList = new ArrayList<Foo>();`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T04:55:24.110

这叫做地图我的朋友。它类似于 .net 中的字典

[http://docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T04:55:27.010

`HashMap`我是你正在寻找的类，假设“字符串”对于不同的值会有所不同。这是关于[HashMap的文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

例子：

```
HashMap<String, Integer> tempMap = new HashMap<String, Integer>();
tempMap.put("string", 124); 
```

如果您需要添加多个值，则可以`HashMap<String, ArrayList>`这样创建。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T04:55:59.260

用于`Map`解决此问题：

```
Map<String, Integer> map = new HashMap<String, Integer>(); 
```

**例如：**

```
map.put("string", 123); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T04:56:54.200

你可以使用[谷歌收藏库 Guava](http://code.google.com/p/guava-libraries/)有一个名为 Multimap 的地图。它是类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

# iphone - iPhone中的多级菜单

> ID：12812173
> 
> 赞同：1
> 
> 时间：2012-10-10T04:54:20.430
> 
> 标签：iphone, menu

我想在 iPhone 中显示如下图所示的菜单

![菜单](../Images/6b9a4ef75e7165a7c475cfe8cae9f107.png)

可以这样导航吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:00:15.313

为多级 Utable 视图实现以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";   
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.text=[[self.arForTable objectAtIndex:indexPath.row] valueForKey:@"name"];
    [cell setIndentationLevel:[[[self.arForTable objectAtIndex:indexPath.row] valueForKey:@"level"] intValue]]; 
    return cell;
} 
```

didSelectRowAtIndexPath 方法

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        NSDictionary *d=[self.arForTable objectAtIndex:indexPath.row];
        if([d valueForKey:@"Objects"]) {
            NSArray *ar=[d valueForKey:@"Objects"];
            BOOL isAlreadyInserted=NO;
            for(NSDictionary *dInner in ar ){
                NSInteger index=[self.arForTable indexOfObjectIdenticalTo:dInner];
                isAlreadyInserted=(index>0 && index!=NSIntegerMax);
                if(isAlreadyInserted) break; 
            }
            if(isAlreadyInserted) {
                [self miniMizeThisRows:ar];
            } else {        
                NSUInteger count=indexPath.row+1;
                NSMutableArray *arCells=[NSMutableArray array];
                for(NSDictionary *dInner in ar ) {
                    [arCells addObject:[NSIndexPath indexPathForRow:count inSection:0]];
                    [self.arForTable insertObject:dInner atIndex:count++];
                }
                [tableView insertRowsAtIndexPaths:arCells withRowAnimation:UITableViewRowAnimationLeft];
            }
        }
    } 
```

用于扩展项目的 miniMizeThisRows 方法

```
-(void)miniMizeThisRows:(NSArray*)ar{
    for(NSDictionary *dInner in ar ) {
        NSUInteger indexToRemove=[self.arForTable indexOfObjectIdenticalTo:dInner];     
        NSArray *arInner=[dInner valueForKey:@"Objects"];
        if(arInner && [arInner count]>0){
            [self miniMizeThisRows:arInner];
        }
        if([self.arForTable indexOfObjectIdenticalTo:dInner]!=NSNotFound) {
            [self.arForTable removeObjectIdenticalTo:dInner];
            [self.tableView deleteRowsAtIndexPaths:
              [NSArray arrayWithObject:[NSIndexPath indexPathForRow:indexToRemove inSection:0]]
                      withRowAnimation:UITableViewRowAnimationRight];
        }
    }
} 
```

[有关更多详细信息，请访问教程的参考链接并在此处获取源代码表格](http://sugartin.info/2011/07/20/447/)

# android - 以编程方式编辑 Android SFGameView 布局

> ID：12812183
> 
> 赞同：0
> 
> 时间：2012-10-10T04:55:29.990
> 
> 标签：android, layout, opengl-es

我想为我的游戏插入一个暂停按钮和一个高分文本，暂停按钮位于游戏视图的左上角，高分文本位于右上角。我想以编程方式对其进行编码，但没有显示高分和按钮。这是代码：

```
 gameView = new SFGameView(this);

    RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.FILL_PARENT,
            RelativeLayout.LayoutParams.FILL_PARENT);

    TextView textBox = new TextView(SFEngine.context);
    textBox.setText("HIGH SCORE");
    textBox.setId(1);
    Button pauseButton = new Button(SFEngine.context);
    pauseButton.setText("PAUSE");
    pauseButton.setGravity(Gravity.RIGHT);

    RelativeLayout layout = new RelativeLayout(this);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    lp.addRule(RelativeLayout.RIGHT_OF, textBox.getId());
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);

    layout.addView(textBox);        
    layout.addView(pauseButton,lp);

    layout.addView(gameView,new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));

    setContentView(layout,rlp); 
```

这是按钮监听器，按钮不会响应触摸事件

```
pauseButton.setOnTouchListener(new OnTouchListener(){
        public boolean onTouch(View v, MotionEvent e) {
            try{
                Thread.sleep(1000);
            }
            catch(InterruptedException ex){
            }

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:30:58.030

您需要正确添加 LayoutParams。每个 View 都需要其父级类型的 LayoutParams。例如，您的 TextView 和 Button 需要 RelativeLayout.LayoutParams，而您的 RelativeLayout 需要 FrameLayout.LayoutParams（因为这是您在 setContentView 中添加的任何内容的内置容器）。

对于 pauseButton，将 RelativeLayout.LayoutParams 设置为 WRAP_CONTENT 和 WRAP_CONTENT，并使用规则 ALIGN_PARENT_TOP 和 ALIGN_PARENT_RIGHT。

对于文本框，添加另一个具有 WRAP_CONTENT 和 WRAP_CONTENT 以及规则 ALIGN_PARENT_TOP 和 ALIGN_PARENT_LEFT 的 RelativeLayout.LayoutParams。

那么RelativeLayout命名布局需要FrameLayout.LayoutParams和MATCH_PARENT & MATCH_PARENT。

示例代码：

```
 RelativeLayout layout = new RelativeLayout(this);
    layout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    SFGameView game = new SFGameView(this);
    game.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    Button btn = new Button(this);
    btn.setText("||");

    RelativeLayout.LayoutParams btnLP = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    btnLP.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    btnLP.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    btn.setLayoutParams(btnLP);

    TextView tv = new TextView(this);
    tv.setText("Some Text");

    RelativeLayout.LayoutParams textLP = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    textLP.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    textLP.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    tv.setLayoutParams(textLP);

    layout.addView(game);
    layout.addView(btn);
    layout.addView(tv);

    setContentView(layout); 
```

至于听者。使用 setOnClickListener（不是 onTouch）。

# facebook - facebook ios sdk 或苹果社交框架

> ID：12812190
> 
> 赞同：5
> 
> 时间：2012-10-10T04:56:10.650
> 
> 标签：facebook, social-networking, social

我们现在在 iPhone/iPad 上有一个映射项目。这次我们想将我们的应用程序与 facebook 集成。

现在为此，我们有两个选择：

1.  使用官方facebook ios sdk
2.  使用 Apple 社交框架

我是社交编程的新手，所以我对选择一两个感到困惑。

谁能给我一个建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:07:18.280

Apple Social 框架要容易*得多。*它为您处理会话和帐户设置。

此外，使用 Facebook SDK 很难确定本机共享是否不可用或用户的 Facebook 帐户是否未设置。您可能还希望与 Twitter 分享。使用 Apple Social 框架主要是切换 serviceType 字符串。

另一方面，如果你使用官方的 Facebook SDK，你将不得不使用 Twitter SDK 重新做一遍……或者使用 Apple Social Framework，你本来可以这样做的。

查看此问题以了解详细信息。

[SLComposeViewController 分享教程](https://stackoverflow.com/questions/12503287/tutorial-for-slcomposeviewcontroller-sharing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:41:05.587

我建议你通过 [Facebbok iOS sdk](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)，因为它已经解释了它的每一个细节。

在这里，我们使用 Facebook Graph，您可以通过它做任何您想做的事情。希望这能解决您的困惑。

# excel - Excel 中的 LOOKUP 函数抛出 #NA 错误

> ID：12812192
> 
> 赞同：0
> 
> 时间：2012-10-10T04:56:27.957
> 
> 标签：excel, excel-formula

我`LOOKUP()`在 Excel 中使用函数。但是，它正在引发`#NA`错误。如果要比较的数据非常小，excel会抛出NA错误吗？

这是我正在检查的数据：

```
0.02
0.03
0.04
0.05
0.06
0.006
0.6 
```

我正在使用以下命令：=`LOOKUP(0.006,F28:F34,G28:G34)`引发`#NA`错误。

如果我使用任何其他数据，例如 0.02 或其他数据，它会给出正确的答案。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:00:03.687

这篇关于[如何对未排序数据使用 LOOKUP 函数的文章](http://support.microsoft.com/kb/181212)推荐了三个选项：

1.  `Index + Match`如 brettdj 所示`=INDEX(G28:G34,MATCH(0.006,F28:F34,0))`
2.  `Offset + Match`像这样：`=OFFSET(F27,MATCH(0.006,F28:F33,0),1)`
3.  `HLookup`或`Vlookup`。在您的上下文中，在这两个中，您将像这样使用 VLookup() ：`=VLOOKUP(0.006,F28:G33,2,FALSE)`

或者，如果您想使用 Lookup，请按照 RocketDonkey 的指示进行操作，并且此 KB 确认[（如何在 Excel 中使用 Lookup 功能）](http://support.microsoft.com/kb/324986)首先对范围进行排序。

顺便说一句，由于 brettdj 的评论，我做了一些研究。[`HLookup`并且`Vlookup`比 using 稍微快一点`Index + Match`](http://www.excelguru.ca/forums/showthread.php?132-INDEX-MATCH-versus-VLOOKUP&s=f0c00db6095e44ccdf7dbacdd44f4532&p=566&viewfull=1#post566)，但差别很小，你应该使用你喜欢的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:07:17.207

您的值有问题（`0.006`小于那里的所有值，因此应该在开头）。尝试使用您的数据并查看它是否有效，因为`lookup_range`参数`LOOKUP()`要求数据按排序顺序。

您不使用它可能是有原因的，但是您是否考虑过使用它`VLOOKUP()`？

# c++ - 在 Xcode iOS 项目中使用 c++ 静态库 (CCFits)

> ID：12812195
> 
> 赞同：0
> 
> 时间：2012-10-10T04:56:47.497
> 
> 标签：c++, iphone, ios, c, xcode

我正在尝试在 iOS 项目中使用 CCfits 库。CCfits 是 C 库 cfitsio 的 C++ 包装器。我有这两者的源代码，并且也将它们构建为静态库（.a 文件）。我想将 CCfits 库 (libCCfits.a) 添加到 iOS 项目中，但是当我对如何从我的 iPhone 源文件访问库类感到困惑时。我在“将二进制文件与库链接”下添加了库。我知道 Xcode 需要我导入头文件，但是将头文件附加到项目的正确方法是什么？我需要以某种方式制作框架文件吗？还是 .a 文件就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:01:21.420

您可以使用 Objective-C++ 轻松混合 C++ 和 Objective-C。在 XCode 中，只需将 .m 文件重命名为 .mm，它就会将文件识别为 Objective-C++。然后你可以在你的 Objective-C 代码中使用 C++ 类（[有一些限制](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)，但不是很多）。

由于 Objective-C 是 C 的扩展，您可以轻松地在任何 Objective-C 程序中使用 C 库。

见[https://stackoverflow.com/posts/10156243/edit](https://stackoverflow.com/posts/10156243/edit)

# iphone - 从sqlite中选择单行时没有进入while循环

> ID：12812201
> 
> 赞同：0
> 
> 时间：2012-10-10T04:57:09.010
> 
> 标签：iphone, objective-c, ios, sqlite

我有一个问题`sqlite`，当我从**表中选择****一行**然后检查两个值是否不同并且没有进入时。**`sqlite3_step(statement) == SQLITE_ROW``while statement`**

 ****这是代码：**

```
if (sqlite3_prepare_v2(db, query_stmt, -1, &statement, NULL) == SQLITE_OK)
{
    //NSLog(@"working777.............%d",sqlite3_step(statement));

    while (sqlite3_step(statement) == SQLITE_ROW)
    {
       NSLog(@"working888.............%d",SQLITE_ROW);
       NSString *addressField = [[NSString alloc]   initWithUTF8String: (const char *) sqlite3_column_text(statement, 0)];

       NSString *phoneField = [[NSString alloc]    initWithUTF8String:(const char *)sqlite3_column_text(statement, 1)];

       NSLog(@"............statement...........addressField %@, phoneField %@",addressField,phoneField);
    } 

   sqlite3_finalize(statement);
}
   sqlite3_close(db);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:28:09.880

创建此类查询的正确方法如下：

```
NSString *querySQL = @"SELECT * FROM Major_Events WHERE temple_id = ?"; 
```

然后准备声明。我假设 query_stmt 是 querySQL 中的 char * 值。

准备好语句后，您需要绑定该值。

```
sqlite3_bind_int(statement, 1, temp_id); // bind is 1-based 
```

当然 temp_id 需要是一个 int 值而不是字符串。对于不同的数据类型，有各种 sqlite3_bind_xxx 语句。使用合适的。

绑定所有查询参数后，您可以使用 sqlite3_step 执行查询。

这种方法优于字符串格式的好处是字符串可以正确转义并为您加上引号。它更难搞砸，它使您的查询更安全地抵御 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:28:37.797

对于许多记录：-

```
if (sqlite3_open([[self getDBPath] UTF8String], &database) == SQLITE_OK) {
        const char *sql = "select * from Place";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            }
            sqlite3_finalize(selectstmt);
             sqlite3_close(database);
        }
    }
    else
    {
        sqlite3_close(database);
    }

If you want a single record then change while to if

if(sqlite3_step(selectstmt) == SQLITE_ROW) { 
```

休息一切都会一样

我希望它有所帮助，如果你的 while 循环没有被执行，那么这意味着你的查询有问题。你也需要检查一下。**

# magento - Magento 订单 created_at 错误的日期

> ID：12812203
> 
> 赞同：5
> 
> 时间：2012-10-10T04:57:16.413
> 
> 标签：magento, date, orders

我正在尝试从特定用户输入的日期获取 magento 中的所有订单。

```
$orders = Mage::getModel('sales/order')->getCollection()->addAttributeToFilter('created_at', array('from' => $userdate)); 
```

但它没有拉出正确的订单。如果我使用今天的日期，它会从昨天和今天拉下一半的订单。

经过一番谷歌搜索，看起来 Magento 中存储了两个日期

```
$order->getCreatedAt() 
```

似乎给出了 UTC/GMT 时间

```
$order->getCreatedAtStoreDate() 
```

给出的时间与我在前端看到的时间相同（即我的本地时区）。

如果我的发现是正确的，那么如何使用 CreatedAtStoreDate addAttributeToFilter。我努力了

```
('created_at_store_date', array('from' => $userdate) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:01:48.603

```
<?php

ini_set('display_errors',true);
include 'app/Mage.php';
Mage::getIsDeveloperMode(true);
Mage::app();

$formatStr = 'Y-m-d H:i:s';
$startStr  = 'Yesterday 12:00:00AM';
$endStr    = 'Yesterday 11:59:59PM';

$date   = Mage::getSingleton('core/date');
/* @var $date Mage_Core_Model_Date */

$collection = Mage::getResourceModel('sales/order_collection');

$collection->getSelect()
            ->where(
                sprintf("created_at BETWEEN '%s' AND '%s'",
                    $date->gmtDate($formatStr,$startStr),
                    $date->gmtDate($formatStr,$endStr)
                )
            );

$collection->load(true); 
```

# iphone - 无法在单击按钮时仅动画帧以向上滑动。

> ID：12812207
> 
> 赞同：0
> 
> 时间：2012-10-10T04:58:02.477
> 
> 标签：iphone, objective-c, xcode

我正在尝试在我的应用程序中创建一个动画，它将一个框架向上滑动到我想要的位置。框架上也会有其他按钮和文本。

我无法为此使用操作表，因为它从窗口的最底部开始。我想要创建的内容如下图所示。

![在此处输入图像描述](../Images/1bf8febf94ad3173e873c5037f05ada1.png)

我要制作动画的框架是具有捕获模式的框架：文本。

点击 tabView 上的按钮 我希望这个框架从 tabview 的顶部开始向上滑动。并再次单击该按钮应该使框架消失。

到目前为止，我的代码看起来像

```
-(IBAction)setting

{

    NSLog(@"finalShare Button");

    UIView *tempView;

    CGRect tmpFrame;

    tempView = [[[UIView alloc] initWithFrame:CGRectMake(0, 490, 320, 90)] 

                autorelease];

    [tempView setBackgroundColor:[UIColor clearColor]];

    [tempView setAlpha:.87];

    tempView.hidden = YES;

    [self.view addSubview:tempView];

    tmpFrame = tempView.frame;

    [UIView beginAnimations:nil context:NULL];

    [UIView setAnimationDuration:.75];

    tmpFrame.origin.y=390;

    self.view.frame=tmpFrame;

    [UIView commitAnimations];

} 
```

我在这里面临的问题是，当我为我的框架设置动画以移动时，主视图会随之移动。这是我不希望它做的事情。

我是 iPhone 编程的新手，请指导我如何解决这个问题。或者有什么更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:15:15.857

您不需要隐藏视图，只需将其框架设置为 y 原点为 480 后将其添加为子视图。另外，不要使用旧的 UIView 动画方法；使用块。

这是一个以 0 为原点的 y 开始的视图示例。它位于等于其高度的负 y 处，作为子视图添加，然后向下动画以与从屏幕底部升起的键盘相接。

```
// add to view while completely off-screen
CGRect unlockViewFrame = unlockView.frame;
unlockViewFrame.origin.y = -unlockViewFrame.size.height;
unlockView.frame = unlockViewFrame;

[self.view addSubview:unlockView];

unlockViewFrame.origin.y = 0.;
[UIView animateWithDuration:0.3 animations:^{
    unlockView.frame = unlockViewFrame;
}]; 
```

这是相反的事情，使用完成块来删除视图。

```
unlockViewFrame.origin.y = -unlockViewFrame.size.height;

[UIView animateWithDuration:0.3 animations:^{
    view.frame = unlockViewFrame;
} completion:^(BOOL completion) {
    [view removeFromSuperview];
}]; 
```

我注意到的另一件事是您正在用代码做所有事情。考虑在 Interface Builder 中进行。一位聪明人曾经告诉我，你不写的代码不可能有任何错误，他是对的。在 IB 中创建视图并在需要时在代码中实例化它很容易：

```
NSArray* nibViews;
nibViews = [[NSBundle mainBundle] loadNibNamed:@"UnlockView" owner:self options:nil];
UnlockView *unlockView = [nibViews objectAtIndex:0]; 
```

另外，考虑使用 ARC。没有更多的自动释放！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:12:58.953

您的主视图重置框架而不是 tempView

```
 [UIView beginAnimations:nil context:NULL];

[UIView setAnimationDuration:.75];

tmpFrame.origin.y=390;

tempView.frame=tmpFrame; //it should be tempView not self.view ie main view

[UIView commitAnimations]; 
```

# wcf - WindowsIdentity.GetCurrent().Name 返回机器名而不是 Windows 用户名

> ID：12812209
> 
> 赞同：0
> 
> 时间：2012-10-10T04:58:09.937
> 
> 标签：wcf, web-services, ws-security, windows-identity

我正在调用在 IIS 7.5 上的虚拟目录中运行的 Web 服务应用程序 (.asmx)（出于开发目的，我只有 IIS 5.1，但无论如何我希望能得到一些帮助）。从 VS2010 System.Security.Principal.WindowsIdentity.GetCurrent().Name 中运行时调用我的 ws 会返回域\windows 用户，但是当我通过虚拟目录调用它时，我会得到机器名\ASPNET。

由于某种原因不允许在最终环境中的 web.config 中使用。虚拟目录仅具有集成 Windows 身份验证。

在所描述的情况下，任何人都可以了解如何获取当前用户的 Windows 用户名吗？

提前致谢...

./CJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:00:17.880

毕竟被允许使用模拟......现在一切正常

# windows-mobile - 连接打开时出现 NullReferenceException

> ID：12812210
> 
> 赞同：0
> 
> 时间：2012-10-10T04:58:16.453
> 
> 标签：windows-mobile, nullreferenceexception, sqlconnection

在 Windows Mobile 6.5 中打开连接时出现 NullReferenceException。我的代码是这样的：

```
SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;Initial Catalog=Company;Integrated Security=SSPI");
conn.Open(); 
```

我已经在 C# windows 窗体应用程序及其工作中尝试过此代码，但在 windows mobile 中它不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:17:01.350

您是否*有*在移动设备上运行的 SQLEXPRESS 实例？我怀疑不是，但即使你这样做，我也不相信你可以在连接字符串中使用该*名称*，它仅限于 TCP/IP 地址和端口。

您可能需要更改连接字符串，以便它尝试为 SQL 服务器使用正确的位置。

例如，如果您的服务器`10.5.5.5`在端口的机器上运行`9999`，您将更改：

```
Data Source=.\\SQLEXPRESS;... 
```

到：

```
Data Source=10.5.5.5,9999;... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T05:19:26.903

您必须下载/安装 SQL Server CE（SQL Server Mobile、SQL Server Compact，名称每年都会更改）。然后添加对紧凑框架 SQL 库的引用。

您可以使用 SQLCE (http://www.connectionstrings.com/sql-server-2005-ce) 连接到设备上的本地数据库，也可以使用 System.Data.SQLClient 连接到远程 SQL Server：[http://msdn .microsoft.com/en-us/library/aa275613%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa275613%28v=sql.80%29.aspx)

Compact Framework SQLClient 不支持完整框架中可用的所有连接选项，另请参见：http: [//msdn.microsoft.com/en-us/library/x984482z%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/x984482z%28v=vs.80%29.aspx)

~约瑟夫

# sql - 将现有查询添加到报告

> ID：12812222
> 
> 赞同：0
> 
> 时间：2012-10-10T04:59:07.063
> 
> 标签：sql, crystal-reports, expression, builder

我的报告计算了我商店中的墨水库存。我在 VB.NET 中构建了一个 SQL 语句并得到了正确的结果。如何在我的 Crystal Report 中显示这些结果？或者设计一个报告以检索相同的结果？

我尝试使用 SQL 表达式生成器但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:15:28.903

在`Database Manager`选择`Add Command`然后在那里键入您的 SQL 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T07:22:09.707

通常您会使用**Database Expert**将数据表链接到您的报告。在 Database Expert 中执行相同操作，选择 Database，您可以看到**Add Command**。选择它并单击**>**按钮。你会得到一个窗口，在那里写下你的 SQL 查询，然后按 OK。

![添加命令](../Images/0cf4ba39e62ea73d139506b49ef4892f.png)

完成此操作后，您可以在数据库字段中看到**命令**，其中包含从 SQL 查询中获得的所有记录作为结果。

# kml - Google 地球/KML 地标气球，带有可以播放其中包含的游览的链接

> ID：12812225
> 
> 赞同：2
> 
> 时间：2012-10-10T04:59:23.420
> 
> 标签：kml, google-earth

我正在使用 Google 地球（不是插件），并想了解是否有办法从地标的气球播放已加载到 TOC 中的游览。这个地标实际上是包含游览的 kmz 的一部分。有没有办法通过 Id 引用 Tour 并告诉 Google Earth 播放它？想像`< a href=GE.Play(tourID) >`。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:39:54.737

KML 中的自动游览功能早在 2009 年就已被要求。

[http://code.google.com/p/kml-samples/issues/detail?id=248](http://code.google.com/p/kml-samples/issues/detail?id=248)

同样，这已在 Google 地球和 KML 论坛中进行了讨论：

[https://groups.google.com/forum/?fromgroups=#!topic/kml-support-advanced/j_DQhNwNR7E](https://groups.google.com/forum/?fromgroups=#!topic/kml-support-advanced/j_DQhNwNR7E)

原始 KML 和 Google 地球客户端尚不直接支持此功能。使用 Google 地球 API，您可以自动播放游览，但最好直接使用 KML 和 Google 地球来执行此操作。

Google通过 gx: 命名空间支持[KML 扩展。](https://developers.google.com/kml/documentation/kmlreference#kmlextensions)如果有足够多的用户要求此功能，也许可以将其添加到 Google 地球的未来版本中。

# android - 删除 android 小部件时根本不会调用 onDeleted、onDisabled

> ID：12812234
> 
> 赞同：3
> 
> 时间：2012-10-10T04:59:58.177
> 
> 标签：android, widget, lifecycle

似乎这已经有一段时间了（在SO和网络上做了很多研究）

简而言之，android文档指出：

*   onReceive 将在所有其他生命周期方法调用之前调用
*   删除小部件时将调用 onDeleted
*   删除最后一个小部件时将调用 onDisabled

好吧，当删除一个小部件时，onReceive 和随后的 onDeleted 都不会被调用。同样，当最后一个小部件被移除时，代码也不会到达 onDisabled。

**1\. 这个问题从安卓1.5版本开始就一直存在，一直持续到现在。**

**Google 的 Android 开发人员，在 10 多个主要版本之后仍未修复此问题的原因是什么？**

对其他人...

不管它有多丑陋，是否有任何解决方法？

原谅我沮丧的语气。

# ajax - AJAX 内部服务器错误

> ID：12812239
> 
> 赞同：0
> 
> 时间：2012-10-10T05:00:41.337
> 
> 标签：ajax

我无法找出错误所在。

```
 <script type="text/javascript">
         $(document).ready(function () {
             $("#btnsumbit").click(function (e) {
                 e.preventDefault();
                 $.ajax({
                     type: 'POST',
                     data: '{"username":"' + $("input#txtuser").val() + '","password":"' + $("input#txtpwd").val() + '"}',
                     url: 'http://localhost:53179/hdfcmobile/WebService.asmx/Login_Data',
                     contentType: 'application/json; charset=utf-8',
                     dataType: 'json',

                     success:
                  function (data, textStatus, XMLHttpRequest) {

                      var status = data.Status;
                      alert(data.d);

                  },
                     error:
                  function (XMLHttpRequest, textStatus, errorThrown) {
                      alert(textStatus);
                  }

                 });

             });
         });

    </script> 
```

我收到 500 个内部服务器错误。如何调用此 Web 服务。我已经通过 url 传递了该方法。感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:05:06.163

首先，你发送的方式不对，这样发送

```
data:  {

    "username": $("input#txtuser").val(),
    "password": $("input#txtpwd").val()

} 
```

接下来确保 url:`http://localhost:53179/hdfcmobile/WebService.asmx/Login_Data`正在返回 JSON 输出。

# ios - UISlider 在第一代 iPad 上不流畅

> ID：12812251
> 
> 赞同：0
> 
> 时间：2012-10-10T05:01:53.147
> 
> 标签：ios, ipad, uislider, uitouch

我正在开发一个 iPad 应用程序，在我的应用程序中我使用了 UISlider，我在 Ipad1 中测试了我的应用程序，但它的响应不是很流畅。但是，相同的应用程序在 iPad 2nd gen 中的响应非常流畅。

在 iPad 第一代中，每次我移动滑块时，都会调用滑块值更改操作，但我没有对该功能执行任何操作。我所有的动作都只在内部修饰和外部修饰。它不能正常工作，因为它并不总是被调用。有什么办法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:01:13.017

在 UILabels 上使用许多带有部分透明图像或发光/阴影效果的 UIImageView 等可能会减慢应用程序的速度。它可以是任何不同于 UISlider 的东西，它会减慢 UI 的显示速度。

否则，您在 UISlider 的观察者中做了一些 CPU 密集型操作。

# facebook - facebook评论没有出现在手机上

> ID：12812254
> 
> 赞同：1
> 
> 时间：2012-10-10T05:02:26.057
> 
> 标签：facebook, mobile, comments

[Rage Quit Baddie](http://www.ragequitbaddie.com)不会在移动网站上显示来自 Facebook 的评论窗口。

这是HTML

```
<div class="promote">
<div class="fb-like" data-send="false" data-width="450" data-show-faces="false" 
data-font="trebuchet ms"></div>
<div class="fb-comments" data-href="<?php the_permalink(); ?>"  data-num-posts="2"
data-width="470"></div>
</div> 
```

这是CSS

```
.promote{
clear: both;
padding-top: 25px;
} 
```

这是一个 WordPress 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:01:29.360

```
<div class="promote">
<div class="fb-like" data-send="false" data-width="450" data-show-faces="false" 
data-font="trebuchet ms"></div>
<div class="fb-comments" data-href="<?php the_permalink(); ?>"  data-num-posts="2"
data-width="470" mobile="auto-detect"></div>
</div> 
```

尝试使用移动属性**mobile="auto-detect"**，请参考此 URL 并阅读*属性*部分 - [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# java - 如何使用 JDBC 和连接池实现 DAO 管理器？

> ID：12812256
> 
> 赞同：28
> 
> 时间：2012-10-10T05:02:37.490
> 
> 标签：java, jdbc, connection-pooling, dao, genericdao

我的问题如下。我需要一个作为 Web 系统中数据库连接的单点工作的类，以避免一个用户有两个打开的连接。我需要它尽可能优化，它应该管理系统中的每笔交易。换句话说，只有那个类应该能够实例化 DAO。为了让它更好，它还应该使用连接池！我该怎么办？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-10T05:02:37.490

您将需要实现一个**DAO 管理器**。我从[这个网站](http://tutorials.jenkov.com/java-persistence/dao-manager.html)获取了主要思想，但是我自己实现了解决一些问题。

# 第 1 步：连接池

首先，您必须配置一个**连接池**。连接池是一个连接池。当您的应用程序运行时，连接池将启动一定数量的连接，这样做是为了避免在运行时创建连接，因为这是一项昂贵的操作。本指南并不是要解释如何配置一个，所以请四处看看。

作为记录，我将使用**Java**作为我的语言，并使用**Glassfish**作为我的服务器。

# 第二步：连接数据库

让我们从创建一个`DAOManager`类开始。让我们给它在运行时打开和关闭连接的方法。没什么太花哨的。

```
public class DAOManager {

    public DAOManager() throws Exception {
        try
        {
            InitialContext ctx = new InitialContext();
            this.src = (DataSource)ctx.lookup("jndi/MYSQL"); //The string should be the same name you're giving to your JNDI in Glassfish.
        }
        catch(Exception e) { throw e; }
    }

    public void open() throws SQLException {
        try
        {
            if(this.con==null || !this.con.isOpen())
                this.con = src.getConnection();
        }
        catch(SQLException e) { throw e; }
    }

    public void close() throws SQLException {
        try
        {
            if(this.con!=null && this.con.isOpen())
                this.con.close();
        }
        catch(SQLException e) { throw e; }
    }

    //Private
    private DataSource src;
    private Connection con;

} 
```

这不是一门非常花哨的课程，但它将是我们要做的事情的基础。所以，这样做：

```
DAOManager mngr = new DAOManager();
mngr.open();
mngr.close(); 
```

应该在对象中打开和关闭与数据库的连接。

# 第3步：使它成为一个点！

现在，如果我们这样做呢？

```
DAOManager mngr1 = new DAOManager();
DAOManager mngr2 = new DAOManager();
mngr1.open();
mngr2.open(); 
```

有些人可能会争辩说，*“你到底为什么要这样做？”* . 但是你永远不知道程序员会做什么。即使这样，程序员也可能在打开新连接之前关闭连接。另外，这对应用程序来说是一种资源浪费。**如果您实际上想要有两个或更多打开的连接，请在此处停止，这将是每个用户一个连接的实现。**

为了使其成为单点，我们必须将此类转换为**单例**。单例是一种设计模式，它允许我们拥有任何给定对象的一个​​且只有一个实例。所以，让我们让它成为一个单例！

*   我们必须将我们的`public`构造函数转换为私有的。我们必须只给调用它的人一个实例。然后`DAOManager`变成工厂！
*   我们还必须添加一个`private`实际存储单例的新类。
*   除了所有这些，我们还需要一个`getInstance()`方法，它会给我们一个可以调用的单例实例。

让我们看看它是如何实现的。

```
public class DAOManager {

    public static DAOManager getInstance() {
        return DAOManagerSingleton.INSTANCE;
    }  

    public void open() throws SQLException {
        try
        {
            if(this.con==null || !this.con.isOpen())
                this.con = src.getConnection();
        }
        catch(SQLException e) { throw e; }
    }

    public void close() throws SQLException {
        try
        {
            if(this.con!=null && this.con.isOpen())
                this.con.close();
        }
        catch(SQLException e) { throw e; }
    }

    //Private
    private DataSource src;
    private Connection con;

    private DAOManager() throws Exception {
        try
        {
            InitialContext ctx = new InitialContext();
            this.src = (DataSource)ctx.lookup("jndi/MYSQL");
        }
        catch(Exception e) { throw e; }
    }

    private static class DAOManagerSingleton {

        public static final DAOManager INSTANCE;
        static
        {
            DAOManager dm;
            try
            {
                dm = new DAOManager();
            }
            catch(Exception e)
                dm = null;
            INSTANCE = dm;
        }        

    }

} 
```

当应用程序启动时，只要有人需要一个单例，系统就会实例化一个`DAOManager`。非常简洁，我们创建了一个接入点！

*但是单例是一种反模式，因为原因！* 我知道有些人不喜欢单身人士。然而，它很好地解决了这个问题（并且已经解决了我的问题）。这只是实现此解决方案的一种方式，如果您有其他方式欢迎您提出建议。

# 第 4 步：但是有一些问题......

是的，确实有。**单例只会为整个应用程序创建一个实例！**这在很多层面上都是错误的，特别是如果我们有一个应用程序将是**多线程**的 Web 系统！那我们怎么解决这个问题呢？

Java 提供了一个名为`ThreadLocal`. 一个`ThreadLocal`变量每个线程都有一个实例。嘿，它解决了我们的问题！[查看更多关于它是如何工作](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)的，你需要了解它的目的，这样我们才能继续。

让我们做我们的`INSTANCE` `ThreadLocal`。以这种方式修改类：

```
public class DAOManager {

    public static DAOManager getInstance() {
        return DAOManagerSingleton.INSTANCE.get();
    }  

    public void open() throws SQLException {
        try
        {
            if(this.con==null || !this.con.isOpen())
                this.con = src.getConnection();
        }
        catch(SQLException e) { throw e; }
    }

    public void close() throws SQLException {
        try
        {
            if(this.con!=null && this.con.isOpen())
                this.con.close();
        }
        catch(SQLException e) { throw e; }
    }

    //Private
    private DataSource src;
    private Connection con;

    private DAOManager() throws Exception {
        try
        {
            InitialContext ctx = new InitialContext();
            this.src = (DataSource)ctx.lookup("jndi/MYSQL");
        }
        catch(Exception e) { throw e; }
    }

    private static class DAOManagerSingleton {

        public static final ThreadLocal<DAOManager> INSTANCE;
        static
        {
            ThreadLocal<DAOManager> dm;
            try
            {
                dm = new ThreadLocal<DAOManager>(){
                    @Override
                    protected DAOManager initialValue() {
                        try
                        {
                            return new DAOManager();
                        }
                        catch(Exception e)
                        {
                            return null;
                        }
                    }
                };
            }
            catch(Exception e)
                dm = null;
            INSTANCE = dm;
        }        

    }

} 
```

我真的很想不这样做

```
catch(Exception e)
{
    return null;
} 
```

但`initialValue()`不能抛出异常。哦，`initialValue()`你是说？这个方法将告诉我们`ThreadLocal`变量将持有什么值。基本上我们正在初始化它。因此，多亏了这一点，我们现在每个线程可以拥有一个实例。

# 第 5 步：创建 DAO

没有 DAO， A`DAOManager`什么都不是。所以我们至少应该创建几个。

> DAO 是“数据访问对象”的缩写，是一种设计模式，它将管理数据库操作的责任交给了代表某个表的类。

为了`DAOManager`更有效地使用我们的，我们将定义一个`GenericDAO`抽象 DAO，它将保存所有 DAO 之间的公共操作。

```
public abstract class GenericDAO<T> {

    public abstract int count() throws SQLException; 

    //Protected
    protected final String tableName;
    protected Connection con;

    protected GenericDAO(Connection con, String tableName) {
        this.tableName = tableName;
        this.con = con;
    }

} 
```

就目前而言，这就足够了。让我们创建一些 DAO。假设我们有两个 POJO：`First`和`Second`，它们都只有一个`String`名为的字段`data`及其 getter 和 setter。

```
public class FirstDAO extends GenericDAO<First> {

    public FirstDAO(Connection con) {
        super(con, TABLENAME);
    }

    @Override
    public int count() throws SQLException {
        String query = "SELECT COUNT(*) AS count FROM "+this.tableName;
        PreparedStatement counter;
        try
        {
        counter = this.con.PrepareStatement(query);
        ResultSet res = counter.executeQuery();
        res.next();
        return res.getInt("count");
        }
        catch(SQLException e){ throw e; }
    }

   //Private
   private final static String TABLENAME = "FIRST";

} 
```

`SecondDAO`将具有或多或少相同的结构，只是更改`TABLENAME`为`"SECOND"`.

# 第 6 步：让经理成为工厂

`DAOManager`不仅应该起到作为单一连接点的作用。其实`DAOManager`应该回答这个问题：

> 谁负责管理与数据库的连接？

各个 DAO 不应该管理它们，但是`DAOManager`. 我们已经部分回答了这个问题，但现在我们不应该让任何人管理与数据库的其他连接，甚至包括 DAO。但是，DAO 需要连接到数据库！谁应该提供？`DAOManager`确实！我们应该做的是在内部创建一个工厂方法`DAOManager`。不仅如此，`DAOManager`还将把当前的连接交给他们！

工厂是一种设计模式，它允许我们创建某个超类的实例，而无需确切知道将返回哪个子类。

首先，让我们创建一个`enum`表列表。

```
public enum Table { FIRST, SECOND } 
```

现在，里面的工厂方法`DAOManager`：

```
public GenericDAO getDAO(Table t) throws SQLException 
{

    try
    {
        if(this.con == null || this.con.isClosed()) //Let's ensure our connection is open   
            this.open();
    }
    catch(SQLException e){ throw e; }

    switch(t)
    {
    case FIRST:
        return new FirstDAO(this.con);
    case SECOND:
        return new SecondDAO(this.con);
    default:
        throw new SQLException("Trying to link to an unexistant table.");
    }

} 
```

# 第 7 步：将所有内容放在一起

我们现在可以走了。试试下面的代码：

```
DAOManager dao = DAOManager.getInstance();
FirstDAO fDao = (FirstDAO)dao.getDAO(Table.FIRST);
SecondDAO sDao = (SecondDAO)dao.getDAO(Table.SECOND);
System.out.println(fDao.count());
System.out.println(sDao.count());
dao.close(); 
```

它不是很花哨且易于阅读吗？不仅如此，当您调用 时`close()`，您会关闭DAO 正在使用的*每个连接。**但是怎么办？！*嗯，他们共享相同的连接，所以这很自然。

# 第 8 步：微调我们的类

从这里开始，我们可以做几件事。要确保连接已关闭并返回到池中，请在 中执行以下操作`DAOManager`：

```
@Override
protected void finalize()
{

    try{ this.close(); }
    finally{ super.finalize(); }

} 
```

您还可以实现封装的方法`setAutoCommit()`，`commit()`这样您就可以更好地处理您的事务。我还做的是，不仅持有 a ，还持有 a和 a 。因此，在调用它时也会关闭两者。关闭语句和结果集的快速方法！`rollback()``Connection``Connection``DAOManager``PreparedStatement``ResultSet``close()`

我希望本指南可以在您的下一个项目中对您有所帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-20T00:50:10.220

我认为如果你想用普通的 JDBC 做一个简单的 DAO 模式，你应该保持简单：

```
 public List<Customer> listCustomers() {
            List<Customer> list = new ArrayList<>();
            try (Connection conn = getConnection();
                 Statement s = conn.createStatement();
                 ResultSet rs = s.executeQuery("select * from customers")) { 
                while (rs.next()) {
                    list.add(processRow(rs));
                }
                return list;
            } catch (SQLException e) {
                throw new RuntimeException(e.getMessage(), e); //or your exceptions
            }
        } 
```

您可以在名为 CustomersDao 或 CustomerManager 的类中遵循此模式，您可以使用简单的方法调用它

```
CustomersDao dao = new CustomersDao();
List<Customers> customers = dao.listCustomers(); 
```

请注意，我正在使用资源尝试，并且此代码对于连接泄漏是安全的，干净且直接，您可能不想遵循带有工厂、接口和所有管道的完整 DAO 模式，而在许多情况下不这样做增加真正的价值。

我认为使用 ThreadLocals 不是一个好主意，在接受的答案中使用的 Bad 是类加载器泄漏的来源

请记住，始终在 try finally 块中关闭您的资源（语句、结果集、连接）或将 try 与资源一起使用

# javascript - 如何为 iPhone 和 Android 自定义 Authorize.net 托管表单弹出窗口？

> ID：12812258
> 
> 赞同：0
> 
> 时间：2012-10-10T05:02:56.037
> 
> 标签：javascript, android, iphone, asp.net

我无法为 iPhone 和 Android 自定义 Authorize.net Hosted Form Pop Up。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:17:26.703

对于 iPhone，当连接需要身份验证质询时，将调用以下委托函数。如果需要，您可以在此函数中显示警报。

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{

} 
```

# iphone - 创建分发证书

> ID：12812269
> 
> 赞同：1
> 
> 时间：2012-10-10T05:04:48.933
> 
> 标签：iphone, objective-c, ios

我有两个问题要问你。第一个是我的分发证书将在下个月到期。所以我今天创建了一个新的分发证书，而没有撤销旧的。我做到了没有任何问题。但我注意到新证书将于 2015 年 10 月 9 日到期，而不是 2013 年 10 月 9 日到期。据我所知，苹果分销证书有效期为一年。这可能吗。

我的第二个问题是我需要使用这个新证书创建一个配置文件。而且我需要捆绑标识符与我在以前的证书中使用的相同。我可以使用用于创建先前配置文件的相同 App ID 创建配置文件吗？

# search - 如何在 Magento 的默认搜索中使用自定义属性？

> ID：12812276
> 
> 赞同：1
> 
> 时间：2012-10-10T05:05:40.810
> 
> 标签：search, attributes, magento-1.7

我们正在将自定义站点迁移到 Magento 社区，并且发现默认搜索不是那么好。

例如，搜索“衬衫”将找不到名为衬衫的产品。

我正在使用 Like，并且希望继续这样做。是的，我们可以监控内部搜索并为其创建同义词，但我们更愿意积极主动。

旧网站有一个特定的搜索关键字字段，他们更愿意继续使用。

有没有办法：在所有搜索中默认包含一个属性？我们将为所有产品定义一个新属性 b。或者使用现有的元关键字标签作为我们希望内部搜索使用的关键字列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:55:18.603

尝试将搜索类型从喜欢更改为全文

配置 -> 目录 -> 目录搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:35:22.790

您可以更改天气或不在管理员中使用属性进行搜索。

目录 -> 属性 -> 编辑

然后您可以启用要在搜索中使用的属性。

# jquery - 无法在 XHTML 中添加 Jquery

> ID：12812278
> 
> 赞同：0
> 
> 时间：2012-10-10T05:05:51.933
> 
> 标签：jquery, jsf-2, primefaces

我正在将 Primefaces 3.3 与 JSF 2.0 一起使用，我尝试将 Jquery 包含在我的 Facelet 中

`<h:outputScript library="primefaces" name="jquery/jquery.js"></h:outputScript>`

但是，当我查看源代码时，我得到了类似的东西。

`<script type="text/javascript" src="RES_NOT_FOUND"></script>`

我已经在这里搜索了几篇文章，我发现最好的是我正在使用的代码。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:20:08.920

JQuery 已经包含在您拥有 primefaces 组件的每个页面中。无需再次包含。

但是，如果您需要与 primefaces 不同的版本，只需将脚本标签放入您的`<h:head>`喜欢中：

```
<h:head>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</h:head> 
```

如果您必须从资源中包含脚本文件，请参阅[如何通过 h:outputScript 包含 JavaScript 文件？](https://stackoverflow.com/questions/9093032/how-to-include-javascript-files-by-houtputscript)

# android - 在按钮单击时为gridview中的所有复选框获取gridview项目中的复选框状态

> ID：12812281
> 
> 赞同：0
> 
> 时间：2012-10-10T05:06:02.917
> 
> 标签：android, android-checkbox

我有下面的代码，现在我需要跟踪每个 gridview 项目中的复选框状态，并在单击按钮时获取该信息以更新信息。我在 gridview 的 imageadapter 调用活动中的按钮事件。

```
 public View getView(int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder;
        ImageView imgView = null;

            if (convertView == null) {

                holder = new ViewHolder(); 
                LayoutInflater ltInflate = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE ); 
                convertView = ltInflate.inflate(R.layout.griditem, null);

                holder.textview1 = (TextView) convertView.findViewById(R.id.grid_item_alert_date);
                holder.textview2 = (TextView) convertView.findViewById(R.id.grid_item_alert_time);
                holder.textview3 = (TextView) convertView.findViewById(R.id.grid_item_alert_type);

                holder.imageview    = (ImageView) convertView.findViewById(R.id.grid_item_image);
                holder.checkbox = (CheckBox) convertView.findViewById(R.id.checkbox_ack);
                convertView.setTag(holder);

            }
            else
            {   
                holder = (ViewHolder) convertView.getTag();
            }

            holder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                  @Override
                  public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
if(isChecked)
                {

                    //Accessing or saving position to a List doesn't work here

                    //How to add ? info to a list here...

                }

                  } });

            holder.textview1.setText("Text 1 ");
            holder.textview2.setText("Text 2 ");
            holder.textview3.setText("Text 3 ");
            holder.checkbox.setChecked(false);
            holder.imageview.setImageBitmap(bitmap);
            holder.id = position;

            return convertView;
    } 
```

在活动中：

```
private OnClickListener UpdateButtonListener =
            new OnClickListener(){
            public void onClick(View v)
            {
            //CheckBox ckbocx = (CheckBox) findViewById(R.id.checkbox_ck);
                        //Need info on all the checkboxes for each gridview item

    }; 
```

任何线索，提示都非常受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:15:30.470

处理整数数组以在选中/未选中时存储复选框的状态，最初用 0 值填充数组，表示未选中这样的复选框。

```
int[] checkStates;
 checkStates = new int[datalist.length()];
   for (int i = 0; i < datalist.length(); i++) {
        checkStates[i] = 0;
   } 
```

现在处理复选框单击事件以获得完美位置。使用[Settag＆Get GetAg](https://stackoverflow.com/questions/5291726/what-is-the-main-purpose-of-settag-gettag-methods-of-view)和Inside Click事件当框选择更改为1从0更改为1的值。

像这样＃

```
 checkbox.setTag(position);

    checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            pos = (Integer) buttonView.getTag();
            // checkStates[pos] = 1;
            // pos = (Integer) v.getTag();

            if (!buttonView.isChecked()) {
                boxState[pos] = 0;
            } else {
                boxState[pos] = 1;
            }
            notifyDataSetChanged();
        }
    }); 
```

并在 getview 方法中以这种方式处理您的检查/取消检查状态..

```
if (checkStates[position] == 0) {
            checkbox.setChecked(false); // set unchecked"
        } else {
            checkbox.setChecked(true); // set checked"
        } 
```

这样您将获得选中的复选框的信息，进一步处理您的按钮单击事件，并获取在选中和取消选中时填充的 int 数组。

# oracle - 光标名称代替额外变量

> ID：12812284
> 
> 赞同：0
> 
> 时间：2012-10-10T05:06:06.753
> 
> 标签：oracle, plsql

这是我的程序。我在其中使用了名为“CUR_TO_COLLECT_DATA”的游标。我还使用了一个名为“VAR_CUR_TO_COLLECT_DATA”的变量，它属于“TBL_TRIAL_BALANCE_REPORT”表类型。

现在我不想使用“VAR_CUR_TO_COLLECT_DATA”变量，而是想使用游标的名称，即“CUR_TO_COLLECT_DATA”代替“VAR_CUR_TO_COLLECT_DATA”变量。

做这个任务可行吗？如果是，那么请帮助如何？

```
PROCEDURE PR_TRIAL_BALANCEWITHOUTFOR IS

    CURSOR CUR_TO_COLLECT_DATA IS(
      SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT
        FROM (

              SELECT (SELECT GL_NAME
                         FROM QM_GL
                        WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,
                      DECODE(QT_ACCOUNTING.TRANS_TYPE,
                             'CR',
                             (QT_ACCOUNTING.TRANS_AMOUNT),
                             0.00) AS CREDIT,
                      DECODE(QT_ACCOUNTING.TRANS_TYPE,
                             'DR',
                             (QT_ACCOUNTING.TRANS_AMOUNT),
                             0.00) AS DEBIT

                FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD

               WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN
                     QM_ACCOUNTING_PERIOD.PERIODFROM AND
                     QM_ACCOUNTING_PERIOD.PERIODTO
                 AND QM_ACCOUNTING_PERIOD.STATUS = 'O'

              )
       GROUP BY NAME);

    VAR_CUR_TO_COLLECT_DATA TBL_TRIAL_BALANCE_REPORT%ROWTYPE;

  BEGIN

    OPEN CUR_TO_COLLECT_DATA;

    LOOP

      FETCH CUR_TO_COLLECT_DATA
        INTO VAR_CUR_TO_COLLECT_DATA;

      IF (VAR_CUR_TO_COLLECT_DATA.CREDIT - VAR_CUR_TO_COLLECT_DATA.DEBIT) > 0 THEN
        INSERT INTO TBL_TRIAL_BALANCE_REPORT
        VALUES
          (VAR_CUR_TO_COLLECT_DATA.NAME,
           (VAR_CUR_TO_COLLECT_DATA.CREDIT - VAR_CUR_TO_COLLECT_DATA.DEBIT),
           0);
      END IF;
      IF (VAR_CUR_TO_COLLECT_DATA.DEBIT - VAR_CUR_TO_COLLECT_DATA.CREDIT) > 0 THEN
        INSERT INTO TBL_TRIAL_BALANCE_REPORT
        VALUES
          (VAR_CUR_TO_COLLECT_DATA.NAME,
           0,
           (VAR_CUR_TO_COLLECT_DATA.DEBIT - VAR_CUR_TO_COLLECT_DATA.CREDIT));
      END IF;

      EXIT WHEN CUR_TO_COLLECT_DATA%NOTFOUND;

    END LOOP;

    CLOSE CUR_TO_COLLECT_DATA;

  EXCEPTION
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
      BEGIN
        CLOSE CUR_TO_COLLECT_DATA;
      EXCEPTION
        WHEN OTHERS THEN
          NULL;
      END;
  END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:37:54.747

你可以尝试做这样的事情：

```
PROCEDURE PR_TRIAL_BALANCEWITHOUTFOR IS

    CURSOR CUR_TO_COLLECT_DATA IS(
      SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT
        FROM (

              SELECT (SELECT GL_NAME
                         FROM QM_GL
                        WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,
                      DECODE(QT_ACCOUNTING.TRANS_TYPE,
                             'CR',
                             (QT_ACCOUNTING.TRANS_AMOUNT),
                             0.00) AS CREDIT,
                      DECODE(QT_ACCOUNTING.TRANS_TYPE,
                             'DR',
                             (QT_ACCOUNTING.TRANS_AMOUNT),
                             0.00) AS DEBIT

                FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD

               WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN
                     QM_ACCOUNTING_PERIOD.PERIODFROM AND
                     QM_ACCOUNTING_PERIOD.PERIODTO
                 AND QM_ACCOUNTING_PERIOD.STATUS = 'O'

              )
       GROUP BY NAME);

  --  VAR_CUR_TO_COLLECT_DATA TBL_TRIAL_BALANCE_REPORT%ROWTYPE;

  BEGIN

    FOR REC_TO_COLLECT_DATA IN CUR_TO_COLLECT_DATA LOOP

      IF (REC_TO_COLLECT_DATA.CREDIT - REC_TO_COLLECT_DATA.DEBIT) > 0 THEN
        INSERT INTO TBL_TRIAL_BALANCE_REPORT
        VALUES
          (REC_TO_COLLECT_DATA.NAME,
           (REC_TO_COLLECT_DATA.CREDIT - REC_TO_COLLECT_DATA.DEBIT),
           0);
      END IF;
      IF (REC_TO_COLLECT_DATA.DEBIT - REC_TO_COLLECT_DATA.CREDIT) > 0 THEN
        INSERT INTO TBL_TRIAL_BALANCE_REPORT
        VALUES
          (REC_TO_COLLECT_DATA.NAME,
           0,
           (REC_TO_COLLECT_DATA.DEBIT - REC_TO_COLLECT_DATA.CREDIT));
      END IF;

    END LOOP;

  EXCEPTION
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
  END; 
```

顺便说一句，我不喜欢

```
 EXCEPTION
        WHEN OTHERS THEN
          NULL;
      END; 
```

部分-如果有异常，您不应该将其静音...

# sql - IF存在的不同书写方式之间的区别？

> ID：12812288
> 
> 赞同：5
> 
> 时间：2012-10-10T05:06:25.507
> 
> 标签：sql, performance, sql-server-2008-r2

我正在使用 SQL Server 2008 R2

我只想测试表中是否存在某些东西

```
IF EXISTS (SELECT * FROM ta WHERE ca = 'abc') PRINT 'YES'
IF EXISTS (SELECT ca FROM ta WHERE ca = 'abc') PRINT 'YES'
IF EXISTS (SELECT 1 FROM ta WHERE ca = 'abc') PRINT 'YES'
IF EXISTS (SELECT (1) FROM ta WHERE ca = 'abc') PRINT 'YES'
IF EXISTS (SELECT TOP 1 1 FROM ta WHERE ca = 'abc') PRINT 'YES' 
```

它们在结果/副作用/性能方面是否有任何差异（无论多么微小）？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:16:16.323

**绝对没有区别**-`IF EXISTS(...)`只会根据`WHERE`语句中的子句检查行的存在。

`SELECT *`声明中的其他所有内容都无关紧要 - 无论您使用or`SELECT 1`或 or都没有任何区别`SELECT TOP 1 *`。即使 using`SELECT * ....`也**不会**选择表中的所有列 - 它再次只是根据`WHERE`子句检查数据是否存在。

所有五个查询都有**完全相同**的执行计划

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:22:12.227

没有区别，执行计划似乎是一样的。

![在此处输入图像描述](../Images/7480bcbc81e1911cd0ec7315f6e92ce6.png) ![在此处输入图像描述](../Images/7cbf1a5efa7bba2fbc73e2f3c5854367.png) ![在此处输入图像描述](../Images/298b34f0b1d804bc63d55cffebb63061.png)

# javascript - 在浏览器会话之间保持用户登录

> ID：12812291
> 
> 赞同：1
> 
> 时间：2012-10-10T05:06:44.133
> 
> 标签：javascript, html

这是我的项目的示例代码。它在一个页面上包含两个表单。

第一个表单包含用户名和一个文本框，当我输入用户名并单击登录按钮时，应显示用户名并显示注销表单。

关闭浏览器窗口后，如何确保用户保持登录状态？

**代码**

```
<!DOCTYPE html>
<html>
<title>Login Page</title>
<head>
<script>
   function set(x)
{
    document.getElementById(x).value="";
}
  </script>
<script>
      function showDiv(e) 
   {
  var divs = document.getElementsByTagName('div');

     if (e==1) 
        {
for(i=0;i<divs.length;i++)
{
if (divs[i].id=="hidevar1")divs[i].style.visibility="visible"; 
else if (divs[i].id=="hidevar2")divs[i].style.visibility="hidden"; 
}
      } 
   else    {
for(i=0;i<divs.length;i++)
{
if (divs[i].id=="hidevar1")divs[i].style.visibility="hidden"; 
else if (divs[i].id=="hidevar2") {
    divs[i].style.visibility="visible"; 
    }
}
}
        }

       function put()
  {
var x = document.getElementById("fname").value;
currentTime=new Date();
    if(currentTime.getHours()<12)
   var y = "Good Morning ";
    else if(currentTime.getHours()<17)
   var y = "Good Afternoon ";
    else 
   var y = "Good Evening ";
   document.getElementById("devin").innerHTML = "Hello " + x + " " + y;
   }
</script>
   <script>
</script>
<script>
function search()
{
    var dic = document.getElementById("url").value;
    var str="http://www.google.co.in/#hl=en&q=";
    var www=str+dic;
    window.open(www);   
}
</script>
</head>
        <body>
     <div id="devin">
       </div>
<div id="hidevar1" style="visibility: visible;">

         <form name="frm1" method="post"  >//Login form
          User Name : <input type="text" id="fname" value="Enter name here"   onfocus="set(this.id)" >
     </form>
<input type="button" value="Login" onClick="showDiv(2);put();">
</div>

<div id="hidevar2" style="visibility: hidden;">

      <form name="frm2">//logout form
      <script>
</script><br/>
<input type="submit" value="logout">
<br>
    <br>

       </form>
</div>
    <br><br>
         <input type="text" name="url1" id="url" />
    <input type="submit" value="google"onclick="search();" />
         </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:27:34.060

如果你打算使用 spring，spring-security 提供了[记住我的服务](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)，可以让你跨浏览器或会话登录。

如果您发现 spring-security 对您的应用程序来说过于复杂，则其他选择是使用[Apache shiro 。](http://shiro.apache.org/)

# c# - 如何更改表单在呈现视图时的操作？（又名通过 ViewBag 或 ViewData）

> ID：12812293
> 
> 赞同：2
> 
> 时间：2012-10-10T05:06:51.887
> 
> 标签：c#, .net, asp.net-mvc-3

我想通过 ViewBag 或 ViewData 组件指定操作名称以编程方式调用视图的操作，但我无法这样做。为什么！？

```
@using (Html.BeginForm(ViewData["SubmitType"], "Person"))
{... 
```

当我运行它时，我得到：

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1928：“System.Web.Mvc.HtmlHelper”不包含“BeginForm”的定义和最佳扩展方法重载“System.Web.Mvc.Html.FormExtensions.BeginForm(System.Web.Mvc.HtmlHelper) , string, string)' 有一些无效参数
> 
> 源错误：
> 
> 第 11 行：第 12 行：第 13 行：@using (Html.BeginForm(ViewData["SubmitType"], "Person")) 第 14 行：{ 第 15 行：@Html.ValidationSummary(true)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:10:26.110

哎呀！不敢相信我忘记了 Viewdata 和 ViewBag 不会保存类型字符串。我必须转换返回值，一切正常！

```
@using (Html.BeginForm((string)ViewData["SubmitType"], "Person"))
{ 
```

# php - 我想知道是否有一些通用文本块用于尝试“破坏”输入，例如文本字段

> ID：12812295
> 
> 赞同：0
> 
> 时间：2012-10-10T05:07:03.253
> 
> 标签：php, mysql, forms

我正在为 PHPDevShell 创建一个论坛插件，我已经到了这样的地步，我希望有一些预先写好的文本，你可以粘贴到输入字段中，看看它是否可以“破坏”代码。例如，最简单的一种就是使用各种东西，例如`' OR 1='1`，所以我希望输入字段和文本字段有某种预先编写的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:11:33.237

好吧，一个快速的谷歌给了我这个页面：[http](http://www.governmentsecurity.org/forum/topic/7794-sql-injection-strings/) ://www.governmentsecurity.org/forum/topic/7794-sql-injection-strings/其中列出了很多例子。

另一个：[http ://www.governmentsecurity.org/forum/topic/344-sql-injection-basic/](http://www.governmentsecurity.org/forum/topic/344-sql-injection-basic/)

编辑：但就像外星人先生所说，如果你正确地逃避你的 SQL，你就不会遇到任何问题，所以不需要全部测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:19:45.770

在底部的链接中有一些方便的列表

*   [https://www.owasp.org/index.php/Testing_for_SQL_Injection_%28OWASP-DV-005%29](https://www.owasp.org/index.php/Testing_for_SQL_Injection_%28OWASP-DV-005%29)和
*   [https://www.owasp.org/index.php/Blind_SQL_Injection](https://www.owasp.org/index.php/Blind_SQL_Injection)

（一般来说，[OWASP 的 SQL 注入页面](https://www.owasp.org/index.php/SQL_Injection)的更广泛阅读有很多指针......）

# sugarcrm - SugarCRM 可安装更改详细信息视图

> ID：12812297
> 
> 赞同：4
> 
> 时间：2012-10-10T05:07:12.807
> 
> 标签：sugarcrm

我有一个简单的问题，但对我来说可能很严重，我制作了自定义字段并将它们全部添加到`custom\modules\Leads\metadata\detailviewdefs.php`Leads 模块的（详细视图布局）中，但问题是我必须对安装程序包进行更改。我使用自定义字段进行管理并将它们复制到`custom\Extension\modules\Leads\Ext\Vardefs`通过清单中。现在我不知道如何通过清单应用 detailviewdefs 更改（在 detailview 中添加新字段面板）。关键是不应更改现有的详细视图布局，而应仅在其中添加一个新面板。

在我看来，可能的解决方案是我应该在 $layout_defs 数组中添加代码`$layout_defs["Leads"]["DetailView"] ['panels']['panel_name']`并将其放入`custom\Extension\modules\Leads\Ext\Layoutdefs\`并通过清单复制 Layoutdefs 文件。我试过这个，但似乎没有工作。如果可以的话，寻找一个聪明的解决方案分享。

**另外：** 即使我导出模块更改`Studio ->export Customizations`并在其他实例中使用`module builder`. 它覆盖了较新实例中所有以前的自定义文件（自定义）（*这不是 SugarCRM 的限制*），但我的要求是仅在较新实例的详细视图中添加更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:40:31.077

这是一个艰难的。我知道有两种选择。1) 向用户提供有关如何使用 Studio 将字段添加到布局的说明 2) 在 post_install.php 脚本中模拟 Studio 布局部署如何将字段插入到任何给定布局中（最佳做法是创建一个新的如果大规模分发，则为您的所有领域提供面板）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T09:35:33.033

我发现了以下糖类的功能，`ModuleInstaller`可以通过`manifest script`. `editview`这些功能将同时向两者添加/删除字段`detail view`。只需添加以下几行，`post_install / pre_install`不需要任何东西，

```
 $installer_func = new ModuleInstaller();
   $layoutAdditions = array('Users' => 'users_access'); 
```

在模块中添加`users_access`字段：`Users`

```
 $installer_func->addFieldsToLayout($layoutAdditions); 
```

要从模块中删除`users_access`字段`Users`：

```
 $installer_func->removeFieldsFromLayout($layoutAdditions); 
```

希望它有所帮助。

曼苏尔

# c++ - C相当于C++ get_temporary_buffer？

> ID：12812299
> 
> 赞同：3
> 
> 时间：2012-10-10T05:07:25.407
> 
> 标签：c++, c, memory, buffer, temporary

20.6.11 临时缓冲区 [temporary.buffer] 定义了两个函数模板：

```
template<class T> pair<T*, ptrdiff_t> get_temporary_buffer(ptrdiff_t n) noexcept;

template<class T> void return_temporary_buffer(T* p); 
```

C标准中有类似的东西吗？就像是：

```
void * get_temporary_buffer(size_t);

void return_temporary_buffer(void *); 
```

不，`malloc`/`free`不算作答案；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:14:25.070

C标准中没有类似的东西。该标准对 get_temporary_buffer 进行了说明：

```
Obtains a pointer to storage sufficient to store up to n adjacent T objects. 
```

即你不能保证得到你要求的空间。今天的大多数 C++ 标准库实现都将 get_temporary_buffer() 实现为简单的基于 new 的内存分配，如果它失败，则以越来越小的分配大小重复。在 C 中实现具有相同效果的东西并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:16:10.053

[正如在http://en.wikipedia.org/wiki/C_dynamic_memory_allocation](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)中提到的，实现部分列出了许多基于 C 的动态内存分配实现，这可以看作是 C++ get_temporary_buffer 的替代方案吗？

# java - 如何从java中的字符串数组中删除特定值？

> ID：12812307
> 
> 赞同：10
> 
> 时间：2012-10-10T05:08:32.277
> 
> 标签：java

> **可能重复：**
> [从数组中删除元素（Java）](https://stackoverflow.com/questions/642897/removing-an-element-from-an-array-java)

例如，如何删除特定的字符串数组值

`String[] str_array = {"item1","item2","item3"};`

我想从 str_array 中删除“item2”请帮助我我想要像这样的输出

`String[] str_array = {"item1","item3"};`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-10T05:13:44.657

我会这样做：

```
String[] str_array = {"item1","item2","item3"};
List<String> list = new ArrayList<String>(Arrays.asList(str_array));
list.remove("item2");
str_array = list.toArray(new String[0]); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T05:27:07.563

您可以使用[ArrayUtils](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/ArrayUtils.html) API 将其删除。

```
array = ArrayUtils.removeElement(array, element); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T05:41:24.350

如果*必须*使用数组，`System.arraycopy`是最高效、可扩展的解决方案。但是，如果必须多次从数组中删除一个元素，则应使用 List 的实现而不是数组。

以下利用`System.arraycopy`以达到预期的效果。

```
public static Object[] remove(Object[] array, Object element) {
    if (array.length > 0) {
        int index = -1;
        for (int i = 0; i < array.length; i++) {
            if (array[i].equals(element)) {
                index = i;
                break;
            }
        }
        if (index >= 0) {
            Object[] copy = (Object[]) Array.newInstance(array.getClass()
                    .getComponentType(), array.length - 1);
            if (copy.length > 0) {
                System.arraycopy(array, 0, copy, 0, index);
                System.arraycopy(array, index + 1, copy, index, copy.length - index);
            }
            return copy;
        }
    }
    return array;
} 
```

此外，如果您知道数组仅包含`Comparable`对象，则可以提高方法的效率。您可以`Arrays.sort`在将它们传递给`remove`方法之前对它们进行排序，修改为用于`Arrays.binarySearch`查找索引而不是 for 循环，从而将方法的这部分效率从 O(n) 提高到 O(nlogn)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-10T05:28:20.687

其他选项是将数组复制到其他数组接受而不是删除项目。

```
 public static String[] removeItemFromArray(String[] input, String item) {
    if (input == null) {
        return null;
    } else if (input.length <= 0) {
        return input;
    } else {
        String[] output = new String[input.length - 1];
        int count = 0;
        for (String i : input) {
            if (!i.equals(item)) {
                output[count++] = i;
            }
        }
        return output;
    }
} 
```

# iphone - 使用 Xib 滚动和更改视图

> ID：12812308
> 
> 赞同：0
> 
> 时间：2012-10-10T05:08:39.610
> 
> 标签：iphone, uiscrollview, paging

我想为两个视图实现分页概念，我实现了它并且工作正常，但是在给定的视图中，第一个视图应该有 2 个视图，导航栏中有 2 个按钮，如果我选择一个按钮，它将显示一个视图，对于第二个按钮，它应该显示第二个视图，我正在使用 Xib 添加滚动视图，并在其中添加视图。

现在的问题是在第一个视图中选择第二个按钮时我没有得到第二个视图。

请指导我解决这个问题。

我正在使用此代码在滚动视图中获取视图。

```
 NSArray *views = [NSArray arrayWithObjects:maleCircleView,femaleCircleView, nil];
        for (int i = 0; i < views.count; i++) 
        {
            UIView *subview = [views objectAtIndex:i];
            CGRect frame;
            frame.origin.x = self.scrollView.frame.size.width * i+10;
            frame.origin.y = subview.frame.origin.y-30;
            frame.size = self.scrollView.frame.size;

            [titleLabel setHidden:YES];
            subview.frame = frame;
            if(i==0)
            {
                UIView *femaleView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 460)];
                [femaleView setBackgroundColor:[UIColor redColor]];
                [femaleView setTag:subview.tag+11];
                UIImageView *sample = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"save.png"]];
                sample.frame = CGRectMake(250, 50, 50, 50);
                [femaleView addSubview:sample];
                NSLog(@"femaleView:%@",femaleCircleView);
                [self.scrollView addSubview:femaleView];
                [femaleView addSubview:maleCircleView];
//               [femaleView setHidden:YES];
            }
            NSLog(@"subview:%@",subview);
            [self.scrollView addSubview:femaleCircleView];

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:14:11.447

使用`bringSubviewToFront`方法。

```
 [self.view bringSubviewToFront:yourSelectedView]; 
```

我想这会对你有所帮助。

# java - Oucre 错误：java.io.IOException：无效的标头字段

> ID：12812311
> 
> 赞同：1
> 
> 时间：2012-10-10T05:09:16.537
> 
> 标签：java, web-services, resteasy

当我使用 tomcat 6.0 服务器运行我的应用程序时出现错误...

> 我不明白我到底错过了什么？

在这里，我开发了一个resteasy Webservice示例，其中我有一个`Student`带有getter和setter的类我还有一个`List<Student>`带有getter setter的类，最后我有一个`Service`包含业务逻辑的类..所有类都是最新的..

> **但我仍然得到: :java.io.IOException: invalid header field ....**

```
java.io.IOException: invalid header field
at java.util.jar.Attributes.read(Unknown Source)
at java.util.jar.Manifest.read(Unknown Source)
at java.util.jar.Manifest.<init>(Unknown Source)
at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:149)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4296)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:519)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

请告诉我我实际缺少什么......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:22:00.820

此错误是由“m”和“f”Jar 选项之间的不匹配顺序引起的。参考这个链接[链接](http://www.mkyong.com/java/jar-manifest-error-java-io-ioexception-invalid-header-field/)

# winsock - GetQueuedCompletionStatus 挂起

> ID：12812316
> 
> 赞同：2
> 
> 时间：2012-10-10T05:09:28.187
> 
> 标签：winsock, freeze, iocp

我试图找出我的程序冻结的原因，并将其范围缩小到 GetQueuedCompletionStatus()。

所有 IOCP 线程都被冻结，线程拥有的唯一阻塞调用是 GetQueuedCompletionStatus()。

即使仍有客户连接到相关的套接字，GetQueuedCompletionStatus() 是否有任何理由在大约 30 分钟~6 小时的运行时间后永远保持阻塞？

这是一个使用 IOCP 的 TCP Winsock 程序。操作系统是 Windows Server 2008 R2 Enterprise。

谢谢。

线程代码：

```
 while (TRUE)
    {
        pClient = NULL;
        pOverlapped = NULL;
        bRet = GetQueuedCompletionStatus(hCompletionPort, &dwIOLen, (LPDWORD)&pClient, (LPOVERLAPPED*)&pOverlapped, INFINITE);
        if (bRet == true && pClient != NULL && pOverlapped != NULL && pClient->bConnected == true && pClient->bToDisconnect == false)
        {
            if (pOverlapped->bIOMode == 0) // Recv
            {
                if (TryEnterCriticalSection(&pClient->mNetworkReadCSection))
                {
                    pClient->dwSockBuffLength += dwIOLen;

                    // Packet processing here...

                    WSABUF pWSABuf;
                    pWSABuf.buf = (char*)&pClient->mSockBuffer[pClient->dwSockBuffLength];
                    pWSABuf.len = 10000 - pClient->dwSockBuffLength;
                    DWORD dwRecvd;
                    DWORD dwFlags = 0;
                    memset(&pClient->mSockOverlapped, 0x00, sizeof(WSAOVERLAPPED));
                    pClient->mSockOverlapped.bIOMode = 0;
                    int iSent = WSARecv(pClient->ClientSocket, &pWSABuf, 1, &dwRecvd, &dwFlags, (WSAOVERLAPPED*)&pClient->mSockOverlapped, NULL);
                    if (iSent == SOCKET_ERROR)
                    {
                        if (WSAGetLastError() == 10053 || WSAGetLastError() == 10054 || WSAGetLastError() == 10058)
                        {
                            //pClient->bToDisconnect = true;
                            //LeaveCriticalSection(&pClient->mNetworkReadCSection);
                            OnDissconnect(pPacketWriter, pClient->iClientID);
                            continue;
                        }

                        if (WSAGetLastError() != 997 &&  WSAGetLastError() != 10004 && WSAGetLastError() != 10038)
                            WriteToFile("IOCPSocketErr.txt", "[%s] Socket Error: %d\n", pClient->szPlayerName, WSAGetLastError());
                    }

                    LeaveCriticalSection(&pClient->mNetworkReadCSection);
                }
                else
                {
                    PostQueuedCompletionStatus(hCompletionPort, dwIOLen, (DWORD)pClient, (OVERLAPPED*)pOverlapped);
                }
            }
            else if (pOverlapped->bIOMode == 1) // Send
            {
                dwBytesSent += dwIOLen;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:19:04.297

这很可能是您的代码中的错误。

我与 IOCP 合作已经`GetQueuedCompletionStatus()`10 多年了，我从未在任何平台上看到过它的问题。

首先，断开连接上方的注释`LeaveCriticalSection(&pClient->mNetworkReadCSection);`将使您的套接字在此错误后锁定...

就个人而言，我更喜欢看到使用的错误常量而不是幻数，我很难确切地看到你在这里“处理”了哪些错误。

我希望您最终处于没有待处理的 I/O 操作的情况，因此您的 IOCP 线程上没有任何活动。您可以维护一个计数器用于调试目的，当您发出 I/O 操作时递增，完成时递减，当您将自己的完成发布到端口时也递增。这将帮助您查看当您闯入挂起的程序时是否有任何 I/O 操作挂起。请记住在发出操作之前增加计数器（如果操作失败，则减少它）而不是在之后发出它，否则如果完成发生在增量之前，计数器可能会变为负数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:38:10.127

如果我正确阅读了文档，您可能会遇到 GetQueuedCompletionStatus 返回 false 并且 pOverlapped 不为 NULL 的情况。也许您应该测试并处理这种情况。

# php - 如何将 Flash ActionScript 与 PHP 结合使用？

> ID：12812321
> 
> 赞同：1
> 
> 时间：2012-10-10T05:09:54.493
> 
> 标签：php, flash, codeigniter

我是使用 flash 的新手，我需要使用 CodeIgniter 和 PHP 制作一个 Web 应用程序。

我对 codeigniter 中应用的 MVC 模式有一些疑问。我将使用 ActionScript，因为我发现它最常用且不太复杂。（如我错了请纠正我）

我的视图（位于文件夹视图中）是否会在 Flash 中分隔我的文件？任何 IDE 都可以帮助我用 php 编程 flash 吗？我应该从另一个应用程序创建一个单独的 Flash 应用程序来连接 php 吗？有什么需要考虑的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:22:58.827

我不确定“组合”是否是正确的词。如果您集成 PHP、ActionScript 和 CodeIgniter，您实际上是在 CodeIgniter 框架内编写 PHP，然后将 Flash .swf 文件嵌入到您的视图中。

如果您打算使用这种组合，您需要做的是规划您的站点并确定哪些部分将在 PHP 中完成，哪些部分需要在 Flash（或 ActionScript）中完成。

我的建议：只在不可避免的情况下使用 Flash。也就是说，为您的网站页面使用 CodeIgniter 并与您的数据源集成（通过 PHP）并为需要通过 Flash 实现访问的数据创建 REST 端点（通过 CodeIgniter）。然后，创建需要处理音频记录的 Flash（或 Flex）应用程序，并将其嵌入到您的 CodeIgniter 视图之一中。

关于：

> 我将使用 ActionScript，因为我发现它最常用且不太复杂（比 FLEX）。

IMO、Flex（和 MXML）本质上只是 ActionScript 的一种标记语言。当您构建 .swf 文件时，它实际上会被编译到 ActionScript 中。因此，选择 ActionScript 还是 Flex 只是个人喜好。如果您比 Flex Builder 界面更熟悉 Flash 界面，那么请继续使用 ActionScript。但是，对于您所说的想要构建的东西（录音机），Flex 中已经有[很多可用的示例](http://www.google.com/search?q=flex+audio+recorder)。

至于 IDE 讨论，对于 PHP - 无论您熟悉什么。如果您正在寻找功能齐全的 IDE，我建议您使用[PHPStorm 之](http://www.jetbrains.com/phpstorm/)类的东西。您也可以使用任何文本编辑器。

对于 Flex 或 ActionScript，您几乎必须使用 Flex Builder 或 Flash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:47:03.023

如果您想连接 flash 和 PHP，请尝试查看 amfphp ( [http://www.silexlabs.org/amfphp/ )。](http://www.silexlabs.org/amfphp/)

我们将它用于带有 PHP/Apache 后端的基于 flash/flex 的游戏的商业版本。

# c# - 无法在 WPF 中绑定动态生成的按钮和文本框

> ID：12812322
> 
> 赞同：1
> 
> 时间：2012-10-10T05:10:16.640
> 
> 标签：c#, wpf, button, dynamic, mvvm

我正在我的 WPF 应用程序中动态生成标签、按钮和文本框。好吧，我成功地动态创建了它们，但我面临着一个主要问题。

**xml:**

```
<ListBox x:Name="myViewChannelList" HorizontalAlignment="Stretch" Height="Auto" ItemsSource="{Binding}" Margin="0" VerticalAlignment="Stretch" Width="Auto">
            <ListBox.ItemTemplate>
                <DataTemplate >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="170" />
                            <ColumnDefinition />                                
                        </Grid.ColumnDefinitions>

                        <Label Grid.Column="0" Content="{Binding Path=ChanelName}" Margin="50,20,0,0"></Label>

                        <Grid Grid.Column="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0" Text="{Binding Path=VoltageText}" Height="25" Width="50" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0" />
                            <Button Grid.Column="1" Content="Set" Height="25" Command="{Binding ElementName=myViewChannelList, Path=DataContext.SetCommand}" Width="50" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,0" ></Button>
                        </Grid>                            
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
</ListBox> 
```

**型号类：**

```
private string _ChanelName = "";
public String ChanelName
    {
        get
        {
            return _ChanelName;
        }

        set
        {
            if (value != _ChanelName)
            {
                _ChanelName = value;
                OnPropertyChanged("ChanelName");                    
            }
        }            
    }

    // Constructor
    public VoltageModel(string ChanelName)
    {
        this.ChanelName = ChanelName;            
    }

    public override string ToString()
    {
        return _ChanelName;
    } 
```

**视图模型类：**

```
class ChannelList : ObservableCollection<VoltageModel>, INotifyPropertyChanged
{
   private string _VoltageText;
    public string VoltageText
    {
        get { return _VoltageText; }
        set
        {
            _VoltageText = value;
            OnPropertyChanged("VoltageText");
        }
    }       

    // Method gets called when Set Button Is Clicked
    public void SetCommandExecuted()
    {
        string val = VoltageText;
    }

    //Notify Property Changed members are present
} 
```

**Xaml.cs 类：**

```
ChannelList myChanels = new ChannelList();                        

public VoltageView() // Constructor
{
     InitializeComponent();            
     myChanels.Add(new VoltageModel("VDD__Main"));
     myChanels.Add(new VoltageModel("VDD__IO__AUD"));
     myChanels.Add(new VoltageModel("VDD__CODEC__AUD"));                      
     myViewChannelList.DataContext = myChanels;            
} 
```

当我运行应用程序时，这给了我 3 个标签（内容如上）、3 个文本框和 3 个按钮。

现在，当我在文本框中输入值时，当我在 SetCommandExecuted() 中放置断点时，单击按钮时会显示 null。最重要的是，我单击的 4 个按钮中的任何一个都会生成事件。我希望第一个文本框和第一个按钮同步（绑定），第二个文本框和第二个按钮同步等等。基本上，每个控件必须与连续的另一个控件同步。它不应该影响其他行。是否可以？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T05:04:15.623

这是您问题的解决方案。作为一般做法，您希望在后面的代码中避免所有逻辑、构建数据等。所有业务逻辑都应该在视图模型中，这将使单元测试更容易。

这是视图

**.xaml**

```
<StackPanel>
    <ListBox HorizontalAlignment="Stretch" 
             Height="Auto" 
             ItemsSource="{Binding VoltageCollection}"
             VerticalAlignment="Stretch" 
             Width="Auto">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Label Width="100" 
                           Content="{Binding ChannelName}" />
                    <TextBox Width="100" 
                             Text="{Binding VoltageText}" />
                    <Button Margin="10,0,0,0" 
                            Content="Set" 
                            Command="{Binding VoltageCommand}" 
                            CommandParameter="{Binding VoltageText}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

这是后面的代码

**.xaml.cs**

```
 private ChannelListViewModel m_voltageViewModel;
    public MainWindow()
    {
        InitializeComponent();

        m_voltageViewModel = new ChannelListViewModel();
        m_voltageViewModel.Initialize();

        DataContext = m_voltageViewModel;
    } 
```

这是模型：**电压模型**

```
public class VoltageModel : INotifyPropertyChanged
{
    public string ChannelName { get; set; }

    private string m_voltageText;
    public string VoltageText
    {
        get { return m_voltageText; }
        set 
        { 
            m_voltageText = value;
            OnPropertyChanged("VoltageText");
        }
    }

    public ICommand VoltageCommand { get; set; }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

这是 ViewModel：**ChannelListViewModel**

```
public class ChannelListViewModel
{
    private ICommand m_voltageCommand;
    public ChannelListViewModel()
    {
        m_voltageCommand = new DelegateCommand(x => SetCommandExecute(x));
    }

    public void Initialize()
    {
        VoltageCollection = new ObservableCollection<VoltageModel> { new VoltageModel() { ChannelName = "VDD__Main", VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
                                                                     new VoltageModel() { ChannelName = "VDD__IO__AUD", VoltageText = String.Empty, VoltageCommand = m_voltageCommand },
                                                                     new VoltageModel() { ChannelName = "VDD__CODEC__AUD", VoltageText = String.Empty, VoltageCommand = m_voltageCommand }};
    }

    public ObservableCollection<VoltageModel> VoltageCollection { get; set; }

    public void SetCommandExecute(object voltageText)
    {
        Debug.WriteLine(voltageText);
    }
} 
```

最后是简单的 DelegateCommand 类**DelegateCommand**

```
public class DelegateCommand : ICommand
{
    Action<object> m_executeDelegate;

    public DelegateCommand(Action<object> executeDelegate)
    {
        m_executeDelegate = executeDelegate;
    }

    public void Execute(object parameter)
    {
        m_executeDelegate(parameter);
    }

    public bool CanExecute(object parameter) { return true; }
    public event EventHandler CanExecuteChanged;
} 
```

![截图运行](../Images/67145074314264086902e2400d8a3f95.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:17:58.277

我没有深入了解哪里出了问题，因为我认识到 2 件事通常是非常错误的，它们可能是您的意外行为的问题。

第一个：您的 DataTemplate 将您的控件放在另一个之上。

使固定 ：

```
 <DataTemplate >
            <Grid>
                <Grid.ColumnDefinitions>
                     <ColumnDefinition />
                     <ColumnDefinition />
                     <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Label Grid.Column="0" Content="{Binding Path=ChanelName}" />
                <TextBox Grid.Column="1" Text="{Binding Path=VoltageText}" />
                <Button Grid.Column="2" Command="{Binding ElementName=myViewChannelList, Path=DataContext.SetCommand}" />
            </Grid>
        </DataTemplate> 
```

第二个：您的属性是在 PropertyChanged 事件发生后设置的，因此在您下次输入值之前不会更新它们。

使固定 ：

```
private T _property;
public T Property
{
    get { return _property; }
    set
    {
        _property = value;
        OnPropertyChanged("Property");
    }
} 
```

如果您仍有问题，请进行这些修复并编辑您的帖子，在我的回答下发表评论。

# objective-c - 为什么 removeFromSuperview 不删除我的电影子视图？Xcode

> ID：12812329
> 
> 赞同：2
> 
> 时间：2012-10-10T05:11:07.657
> 
> 标签：objective-c, video, nsnotification

我正在尝试制作一部无需点击“完成”按钮即可自行播放的电影。我认为这是最近的 iOS 6 问题，因为我完全按照教程进行操作，并且当我插入 NSLogs 时，NSNotification 和 removeFromSuperview 正在被识别，但是电影一旦结束就会停留在那里。这是我的代码，请帮助：

```
 - (IBAction)playMovie:(id)sender
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"RomneyFlipSequence1" ofType:@"mov"]];
    _moviePlayer =
    [[MPMoviePlayerController alloc]
     initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:_moviePlayer];

    _moviePlayer.controlStyle = MPMovieControlStyleDefault;
    _moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:_moviePlayer.view];
    [_moviePlayer setFullscreen:YES animated:NO];
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    MPMoviePlayerController *player = [notification object];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:player];

    if ([player
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
    [player.view removeFromSuperview];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T18:02:36.947

您使播放器进入全屏模式。

```
[_moviePlayer setFullscreen:YES animated:NO]; 
```

在 SO 中阅读其他解决方案时，似乎当您按下“完成”时，播放器首先退出全屏，然后引发通知。阅读[此答案](https://stackoverflow.com/a/16083178/162059)后，添加

```
[_moviePlayer setFullscreen:NO animated:YES]; 
```

在您的`removeFromSuperview`电话将解决您的问题之前。

如果上述方法不起作用，另外您可以尝试先停止播放器，以便完整代码为

```
-(void)removePlayer:(MPMoviePlayerController *)player{

    NSLog(@"Playback Finished");
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:_moviePlayer];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:_moviePlayer];

    [_moviePlayer stop]; // <-- May not be needed
    if ([_moviePlayer respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [_moviePlayer setFullscreen:NO animated:YES];
        [_moviePlayer.view removeFromSuperview];

    }

    _moviePlayer=nil;

} 
```

我对通知“完成”和“PlayBackFinished”使用相同的方法

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:36:06.090

您已添加`_moviePlayer.view`为视图，但您正在尝试删除`player.view`

我认为这会做到：

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification {

MPMoviePlayerController *player = [notification object];

[[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:player];

if ([player
     respondsToSelector:@selector(setFullscreen:animated:)])
{
[_moviePlayer.view removeFromSuperview];
} 
```

}

# c - C 从特定字符打印字符串

> ID：12812330
> 
> 赞同：0
> 
> 时间：2012-10-10T05:11:11.953
> 
> 标签：c

我正在尝试从绝对路径名中提取相对路径名。C中有这个功能吗？是否有从特定字符开始打印字符串的功能（我有索引）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:18:52.503

在 POSIX.1-2001（例如 Linux）中，`man 3 basename`给出：

> > 函数 dirname() 和 basename() 将一个以 null 结尾的路径名字符串分解为目录和文件名组件。在通常情况下，... basename() 返回最后一个“/”之后的组件。尾随 '/' 字符不计入路径名的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:40:37.427

正如约瑟夫所说，您可以使用 basename()。

希望下面的程序有点帮助。

```
#include <stdio.h>
#include <stdlib.h>
#include <libgen.h>
#include <string.h>

int main ( int argc, char **  argv)
{
  char *path = "/Users/lionnew/cpgm";
  printf ("%s\n", basename (path));

  /* If you have an index */

  int index =15;
  int len = strlen(path);
  char * dest = malloc(len+1);
  dest[len] = '\0';

  strcpy (dest, (path+index));
  printf ("\n Destination String %s ", dest);

} 
```

注意：确保您的索引值不大于字符串 len 以避免分段错误。

希望这在一定程度上有所帮助。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:48:34.830

如果你有索引，你可以很容易地做到这一点。

```
char * src = "YOUR STRING";
char * dst; // destination
dst = (char *) malloc( sizeof(char) * 20);
dst = (char *)memcpy(dst, &src[THE_INDEX_YOU_KNOW], strlen(src)-THE_INDEX_YOU_KNOW);
dst[len-start]='\0'; 
```

# mysql - 当需要在 MySQL 中加入 2 个大表时如何有效地更新列？

> ID：12812331
> 
> 赞同：0
> 
> 时间：2012-10-10T05:11:14.940
> 
> 标签：mysql, sql, performance, sql-update

我有 2 个表，分别命名为：`csv (a csv dump)`和`items (primary data table)`7M（csv 转储）和 15M 行。我需要更新`items`table 中存在的列`csv`。

两个表都有一个共同索引的连接 ID (a `VARCHAR(255)`)。

在相互 ID 列（索引）上具有连接的 UPDATE 查询仍需要数天才能运行。经过研究，我认为 MySQL 扫描`csv`表并对表进行每行随机访问查询的效率低下`items`。

即使有索引，这些索引也不适合内存，因此所需的 7M 随机访问查询是鼻子潜水性能。

是否有解决此类问题的“典型”方法？

* * *

**更新：**

> 我们基本上采用多个“项目”目录并将它们存储在我们的`items`表中（这有点简化讨论）。比如说 10 个目录中的每一个都有 700 万个项目（我们在项目表中标准化为 1 行的目录中的一些重复项）。我们需要每天比较和验证对这 10 个目录的更改（`UPDATES`w/ 两个大表之间的连接，或其他此类机制）。
> 
> 实际上，我们有一张`items`桌子和一张`items_map`桌子，但这里不需要讨论额外的抽象级别。我很乐意找到一种在`csv`转储表和`items`表之间执行更新的方法（假设它们都有一个在两个表中都编入索引的公共 ID）。但是假设该`items`表可能有 20M 行，而该`csv`表可能有 7M 行。
> 
> 在这种情况下，索引不适合内存，我相信我们正在用随机搜索锤击驱动器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:10:07.190

好吧，我终于把这个查询放到了一个 8 核的盒子上，它有 12 GB 的内存，专门用于 InnoDB，它确实完成了，但在 7 小时后！

我们的解决方案：我们将这个过程从 MySQL 中移除。我们将使用 MapReduce (Hadoop) 以平面文件格式维护整个大表，并行执行主要更新过程，然后最终使用`LOAD DATA INFILE`快速更新表一次（〜每天）。

# perl - 使用正则表达式验证 32 位整数

> ID：12812332
> 
> 赞同：1
> 
> 时间：2012-10-10T05:11:18.690
> 
> 标签：perl

我正在尝试提出一个匹配任何不是 32 位整数的正则表达式。我的最终目标是匹配不符合以下格式的行

```
Integer\tInteger\tInteger\tInteger\tInteger\tInteger\tInteger 
```

（7 个 32 位整数和每个整数之间的 1 个制表符）

到目前为止，我已经想出了这个

```
#!/usr/bin/perl -w
use strict;
while ( my $line = <> ) {

    if ( $line =~ /^(429496729[0-6]|42949672[0-8]\d|4294967[01]\d{2}|429496[0-6]\d{3}|42949[0-5]\d{4}|4294[0-8]\d{5}|429[0-3]\d{6}|42[0-8]\d{7}|4[01]\d{8}|[1-3]\d{9}|[1-9]\d{8}|[1-9]\d{7}|[1-9]\d{6}|[1-9]\d{5}|[1-9]\d{4}|[1-9]\d{3}|[1-9]\d{2}|[1-9]\d|\d)$/ ) {

        print "Match at line $.\n";
        print "$line"
    }

} 
```

但我什至无法迈出让正则表达式匹配 32 位数字的第一步（一旦我解决了这个问题，我就可以解决让标签成为他们需要的方式）

我是否以正确的方式解决了这个问题？有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:18:41.460

> 我是否以正确的方式解决了这个问题？

假设确实需要验证，我的第一种方法是拆分选项卡，检查字段数，检查每个字段，但不使用正则表达式。在正则表达式中进行范围检查是愚蠢的！（使用 sprintf 填充然后进行字符串比较将解决溢出问题。）

其他问题：

*   `\d`比赛远不止0-9。如果您只想匹配 0-9，请使用`/\d/a`or 。`/[0-9]/`
*   负数呢？32 位整数也可用于存储 2147483647..-2147483648。
*   前导零和前导加号或减号呢？
*   千位分隔符呢？
*   是`10.0`整数吗？从数学上讲，是的。Perl 也会把它存储为一个整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:10:16.667

我会说不，这*不是*正确的方法 -尝试遵循该正则表达式*非常困难；*虽然可以做到，但请考虑明天是否有意义。或者如果范围发生变化或需要对格式稍作变化，那么改变的难度有多大:)

以下是我的建议：

1.  阅读[它是一个数字吗？](http://www.perl.com/doc/FMTEYEWTK/is_numeric.html)找出如何判断一个值是否为数字，如果是，则将其提取为一个。也就是说，获取一个实数值，而不是字符串。如果需要限制“有效”数字是什么，可以在此阶段进行额外检查；不限制范围，只限制*格式*。

2.  对提取的数字使用简单的范围检查 - 在这种情况下，介于 0 和 2 ^(32) -1 之间？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T06:50:52.173

您可以在正则表达式中完成所有操作，但最好将它们视为数字并使用数学。

```
# Split it into fields.
my @fields = split /\t/, $line;

# Scan for fields which do not look like integers
# or are outside the unsigned 32 bit integer range
my $valid_line = !grep { /[^0-9]/ || ($_ < 0) || (2**32-1 < $_) } @fields; 
```

其他答案中关于“什么是 32 位整数”的所有警告仍然适用。“+10”有效吗？“10.0”？在不知道为什么要过滤这些数字的情况下无法回答这个问题，请根据需要调整逻辑。

只是为了插入一个[perl5i](https://metacpan.org/module/perl5i)插件......

```
use perl5i::2;
my $valid_line = !grep { $_->is_integer && ($_ < 0) || (2**32-1 < $_) } @fields; 
```

# c++ - 当函数应该改变对象的状态时，是否选择成员函数或友元函数？

> ID：12812334
> 
> 赞同：8
> 
> 时间：2012-10-10T05:11:23.710
> 
> 标签：c++, friend-function, member-functions

在 Bjarne Stroustrup 所著的 The C++ Programming Language 一书中，作者介绍了一个必须实现函数 inv() 的类 Matrix。在第 11.5.1 节中，他谈到了这样做的两种可能性。一种是创建成员函数，另一种是创建友元函数 inv()。然后在第 11.5.2 节的末尾，他谈到选择是使用朋友还是成员函数，他说：

> 如果 inv() 确实反转了 Matrix m 本身，而不是返回一个与 m 倒数的新 Matrix，它应该是一个成员。

为什么会这样？友元函数不能改变矩阵的状态并返回对该矩阵的引用吗？是不是因为我们调用函数时可能会传递一个临时矩阵？...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T06:10:33.033

老实说，我认为做出这样决定的唯一原因是语法便利和传统。我将通过展示两者之间的差异以及这些差异在做出决定时的重要性来解释原因。

非会员朋友功能和公共会员功能有什么区别？不多。毕竟，成员函数只是一个带有隐藏`this`参数并且可以访问类的私有成员的常规函数​​。

```
// what is the difference between the two inv functions?
// --- our code ---
struct matrix1x1 { // this one is simple :P
private:
    double x;
public:
    //... blah blah
    void inv() { x = 1/x; }
    friend void inv(matrix1x1& self) { self.x = 1/self.x; }
};
matrix1x1 a;

// --- client code ---

// pretty much just this:
a.inv();
// vs this:
inv(a);

void lets_try_to_break_encapsulation(matrix1x1& thingy) {
    thingy.x = 42; // oops, error. Nope, still encapsulated.
} 
```

它们都提供相同的功能，并且绝不会改变其他功能的功能。相同的内部结构暴露于外部世界：在封装方面没有区别。其他函数绝对没有什么不同的，因为有一个友元函数可以修改私有状态。

实际上，可以将大多数具有大多数函数的类编写为非成员友元函数（虚函数和一些重载的运算符必须是成员），提供完全相同的封装量：用户不能在不修改类的情况下编写任何其他友元函数，并且没有朋友功能以外的功能可以访问私有成员。我们为什么不这样做？因为这违背了 99.99% 的 C++ 程序员的风格，并且没有什么太大的优势可以从中获得。

不同之处在于函数的性质和调用方式。作为成员函数意味着您可以从中获取指向成员函数的指针，而作为非成员函数意味着您可以获取指向它的函数指针。但这很少相关（尤其是像`std::function`周围这样的通用函数包装器）。

剩下的区别是句法。D 语言的设计者决定统一整个事情，并说您可以通过传递一个类似的对象直接调用成员函数`inv(a)`，并调用一个自由函数作为其第一个参数的成员，例如`a.inv()`。并且没有任何类会因为这个或其他原因而突然被严重封装。¹

要解决问题中的特定示例，应该`inv`是成员还是非成员？对于我上面概述的熟悉性论点，我可能会使其成为成员。非风格上，它没有任何区别。

* * *

¹ . 这在 C++ 中不太可能发生，因为在这一点上这将是一个突破性的变化，没有实质性的好处。举一个极端的例子，它会破坏`matrix1x1`我上面写的类，因为它使两个调用都模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:24:32.453

OOD 固有的封装理念（C++ 试图推广）规定对象状态只能从内部修改。它在语法上是正确的（编译器允许这样做），但应该避免。

在不使用预定义接口的情况下让整个系统中的元素相互更改是容易出错的。对象存储和功能可能会发生变化，四处寻找使用对象特定部分的代码（可能很大）将是一场噩梦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:33:54.970

关于使用朋友有两种相反的论点：

一方面说朋友减少了封装，因为现在您让外部实体访问类的内部，而内部只能由成员方法修改。

另一方说朋友实际上可以增加封装，因为您可以将类的内部访问权限授予一小组外部实体，从而无需将内部类属性公开给所有人，以便这些外部实体可以访问/操作他们。

双方都可以争论，但我倾向于同意第一种选择。

至于您的问题，正如 PherricOxide 在他的评论中提到的那样：如果需要修改类的内部属性，最好通过成员方法完成，从而强制封装。这与上面提到的第一个选项是一致的。

# c# - 批准测试和 PDF

> ID：12812336
> 
> 赞同：5
> 
> 时间：2012-10-10T05:11:28.677
> 
> 标签：c#, testing, approval-tests

我可以将 ApprovalTests 与 PDF 一起使用吗？我尝试使用 FileLauncher，但似乎相同的 PDF 在文件（位）级别略有不同。还是我用错了？

```
[TestMethod]
[UseReporter(typeof(FileLauncherReporter))]
public void TestPdf()
{
    var createSomePdf = PdfCreate();

    ApprovalTests.Approvals.Verify(new FileInfo(createSomePdf.FileName));

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T15:57:19.763

Pdf 很可能是使用时间戳创建的。根据用于创建 pdf 的方法，您也许可以模拟创建的时间。但我不得不擦洗它。

这是我用来执行此操作的代码。

```
 public static void VerifyPdf(string coverFile)
    {
        ScrubPdf(coverFile);
        Approvals.Verify(new ExistingFileWriter(coverFile));
    }

    private static void ScrubPdf(string coverFile)
    {
        long location;
        using (var pdf = File.OpenRead(coverFile))
        {
            location = Find("/CreationDate (", pdf);

        }
        using (var pdf = File.OpenWrite(coverFile))
        {
            pdf.Seek(location, SeekOrigin.Begin);

            var original = "/CreationDate (D:20110426104115-07'00')";
            var desired = new System.Text.ASCIIEncoding().GetBytes(original);

            pdf.Write(desired, 0, desired.Length);
            pdf.Flush();
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-27T04:32:49.747

我找到了一个命令行工具[diff-pdf](https://github.com/vslavik/diff-pdf)。比较 2 个 PDF，如果它们相同则返回退出代码 0，如果它们不同则返回 1。下载 + 提取 + 将其添加到您的 PATH 中。

缺点 - 它必须渲染两个 PDF 才能执行差异。如果它们很大，那么性能就很好。

批准人（主要基于`ApprovalTests.Approvers.FileApprover`）：

```
public class DiffPdfApprover : IApprovalApprover
{
    public static void Verify(byte[] bytes)
    {
        var writer = new ApprovalTests.Writers.BinaryWriter(bytes, "pdf");
        var namer = ApprovalTests.Approvals.GetDefaultNamer();
        var reporter = ApprovalTests.Approvals.GetReporter();

        ApprovalTests.Core.Approvals.Verify(new DiffPdfApprover(writer, namer), reporter);
    }

    private DiffPdfApprover(IApprovalWriter writer, IApprovalNamer namer)
    {
        this.writer = writer;
        this.namer = namer;
    }

    private readonly IApprovalNamer namer;
    private readonly IApprovalWriter writer;
    private string approved;
    private ApprovalException failure;
    private string received;

    public virtual bool Approve()
    {
        string basename = string.Format(@"{0}\{1}", namer.SourcePath, namer.Name);
        approved = Path.GetFullPath(writer.GetApprovalFilename(basename));
        received = Path.GetFullPath(writer.GetReceivedFilename(basename));
        received = writer.WriteReceivedFile(received);

        failure = Approve(approved, received);
        return failure == null;
    }

    public static ApprovalException Approve(string approved, string received)
    {
        if (!File.Exists(approved))
        {
            return new ApprovalMissingException(received, approved);
        }

        var process = new Process();
        //settings up parameters for the install process
        process.StartInfo.FileName = "diff-pdf";
        process.StartInfo.Arguments = String.Format("\"{0}\" \"{1}\"", received, approved);

        process.Start();

        process.WaitForExit();

        if (process.ExitCode != 0)
        {
            return new ApprovalMismatchException(received, approved);
        }

        return null;
    }

    public void Fail()
    {
        throw failure;
    }

    public void ReportFailure(IApprovalFailureReporter reporter)
    {
        reporter.Report(approved, received);
    }

    public void CleanUpAfterSucess(IApprovalFailureReporter reporter)
    {
        File.Delete(received);
        if (reporter is IApprovalReporterWithCleanUp)
        {
            ((IApprovalReporterWithCleanUp)reporter).CleanUp(approved, received);
        }
    }
} 
```

核实：

`DiffPdfApprover.Verify(pdfBytes);`

diff-pdf 也可以直观地显示差异。我为此滚动了一个 Reporter，但不要太多使用它。我认为如果在初始报告开发后出现回归（我现在所处的位置），它会派上用场。

```
public class DiffPdfReporter : GenericDiffReporter
{
    private static readonly string Path = FindFullPath("diff-pdf.exe");
    public DiffPdfReporter() : base(Path,
        GetArgs(),
        "Please put diff-pdf.exe in your %PATH%. https://github.com/vslavik/diff-pdf. And restart whatever's running the tests. Everything seems to cache the %PATH%.") { }

    private static string GetArgs()
    {
        return "--view \"{0}\" \"{1}\"";
    }

    private static string FindFullPath(string programInPath)
    {
        foreach (var path in from path in Environment.GetEnvironmentVariable("path").Split(';')
                             select path)
        {
            var fullPath = System.IO.Path.Combine(path, programInPath);
            if (File.Exists(fullPath))
                return fullPath;
        }
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-08T02:02:59.027

看起来这现在已内置到 ApprovalTests 中。

用法：

```
Approvals.VerifyPdfFile(pdfFileLocation); 
```

查看[源代码](https://github.com/approvals/ApprovalTests.Net/blob/87469cab86917785a02b695a1043fa642c7fb5b6/ApprovalTests/Approvals.cs)：

```
public static void VerifyPdfFile(string pdfFilePath)
{
    PdfScrubber.ScrubPdf(pdfFilePath);
    Verify(new ExistingFileWriter(pdfFilePath));
} 
```

# java-me - LWUIT 表单文本区

> ID：12812337
> 
> 赞同：0
> 
> 时间：2012-10-10T05:11:31.917
> 
> 标签：java-me, lwuit

我有一个 LWUIT form1 和 form2 ，form1 显示来自 Rss 文件的标题列表，1）如果用户单击 fom1 上的任何标题，我可以导航到 form2 ，我正在显示一个文本区域（包含段落来自 Rss 的文本（描述），如果假设用户继续阅读文本并且用户到达了一行的末尾（光标保持在末尾）（向下滚动）在 form2 上。在该用户单击 form2 上的返回按钮后，用户可以导航到 form1，2）再次用户单击 form1 上的任何标题，然后用户应该能够从开始看到文本区域（他应该能够阅读描述）但不在 form2 的中间或末尾（因为在以前的案例中，用户阅读了所有描述，直到 form2 结束。

我的问题是：每次用户单击 form1 上的任何标题时，我都可以导航 form2，但光标应始终指向我的文本区域的开头（以允许用户从 statring 开始阅读描述）但我的代码不是在职的

**每次显示时如何重置表单值？**

这是我的代码：

```
private void displayCompleteNewsScreen(News detailNews) {
//log.debug("displayCompleteNewsScreen");
form2.removeAll();
form2.repaint();
form2.addCommand(m_backCommand);
form2.addCommandListener(new ActionListener() {

public void actionPerformed(ActionEvent ae) {
form1.show();
}
});

Label pubDate = new Label(detailNews.getPubDate().substring(0, 16));
pubDate.getStyle().setFont(Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_SMALL));
form2.addComponent(pubDate);
textarea.setText(detailNews.getDescription());
form2.addComponent(textarea);

form2.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:53:12.697

尝试将焦点设置为`TextArea`每次显示`Form`. 您可以`textArea.requestFocus()`在显示`Form`.

# php - 自定义/手动 PHP 函数从 wordpress 表中检索类别层次结构？

> ID：12812343
> 
> 赞同：1
> 
> 时间：2012-10-10T05:12:05.487
> 
> 标签：php, wordpress

我正在寻找一个函数来从 wordpress 表（wp_terms、wp_term_relationships、wp_term_taxonomy）中获取 wordpress 类别层次结构，**而不使用 wordPress 函数/模板**。

我基本上想获取类别（父/子）关系，然后我想将它们插入到我自己的 CMS 表中。为此，我必须知道“**什么类别属于什么？（所有子子（多个）目录）** ”

到目前为止，我做了这个：

```
$sql="SELECT a.term_id,a.description,a.parent,a.count,b.name,b.slug
FROM wp_term_taxonomy a INNER JOIN wp_terms b WHERE a.term_id=b.term_id
AND a.taxonomy='category';
";

$result = mysql_query($sql);

while ($row = mysql_fetch_assoc($result)) {
    echo($row['name'].'<br>');
}
exit; 
```

此功能显示所有类别，但不显示层次结构，我**无法获得 Child Parent**的东西..

任何人都可以帮我解决这个问题吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:48:30.823

这并不难。首先，我会通过让它表现得像 a 来包装递归的东西[`RecursiveIterator`](http://php.net/manual/en/class.recursiveiterator.php)：

```
class RecursiveCategoryIterator implements RecursiveIterator {
    const ID_FIELD = 'term_id';
    const PARENT_FIELD = 'parent';

    private $_data;
    private $_root;
    private $_position = 0;

    public function __construct(array $data, $root_id = 0) {
        $this->_data = $data;
        $this->_root = $root_id;
    }

    public function valid() {
        return isset($this->_data[$this->_root][$this->_position]);
    }

    public function hasChildren() {
        $subid = $this->_data[$this->_root][$this->_position][self::ID_FIELD];
        return isset($this->_data[$subid])
            && is_array($this->_data[$subid]);
    }

    public function next() {
        $this->_position++;
    }

    public function current() {
        return $this->_data[$this->_root][$this->_position];
    }

    public function getChildren() {
        return new self($this->_data,
            $this->_data[$this->_root][$this->_position][self::ID_FIELD]);
    }

    public function rewind() {
        $this->_position = 0;
    }

    public function key() {
        return $this->_position;
    }

    public static function createFromResult($result) {
        $menu_array = array();
        while($row = mysql_fetch_assoc($result)) {
            $menu_array[$row[self::PARENT_FIELD]][] = $row;
        }

        return new self($menu_array);
    }
} 
```

现在我为什么要这样做？首先，因为您可以重新使用 id 来显示树，或者用它做其他事情，比如将它导入到您自己的表中。其次，如果你必须测试你的代码，你可以放一些其他`RecursiveIterator`的作为模拟（例如 a `RecursiveArrayIterator`）。

现在是第二部分，word-press 数据的实际导入：

```
// your original query
$sql="SELECT a.term_id,a.description,a.parent,a.count,b.name,b.slug
FROM wp_term_taxonomy a INNER JOIN wp_terms b WHERE a.term_id=b.term_id
AND a.taxonomy='category';
";

$result = mysql_query($sql, $dbh);

// always test for failure
if($result === false) {
    die("query failed: ". mysql_error());
}

// create the iterator from the result set
$wpterms = RecursiveCategoryIterator::createFromResult($result);

// and import it. 
insert_it($wpterms, 0);

// the function which does all the dirty work.
function insert_it($iterator, $parent_id = 0) {
    foreach($iterator as $row) {
        // insert the row, just edit the query, and don't forget
        // to escape the values. if you have an insert function,
        // use it by all means
        $qry = 'INSERT INTO my_table (myparent, myname, ...)'
            . ' VALUES (\'' . mysql_real_escape_string($parent_id)
            . '\', \'' . mysql_real_escape_string($row['name']) . '\', ....)';

        $status = mysql_query($qry);

        if($status === false) {
            // insert failed - rollback and abort
            die("hard: " . mysql_error());
        }

        // you need to pass the id of the new row
        // so the "child rows" have their respective parent
        $cid = mysql_insert_id();

        // insert the children too
        if($iterator->hasChildren()) {
            insert_it($iterator->getChildren(), $cid);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T09:52:30.950

如果您想将数据迁移到不同的（甚至是定制的）CMS，您应该使用[Export](http://codex.wordpress.org/Tools_Export_Screen)，它将生成一个非常易于解析和导入第三方系统的 WXR (XML) 文件。它包括所有帖子类型、分类法、元数据、附件和其他所有内容。

Working directly with the database is a pain, but if you will, it'll be easier to work on the WordPress side write the data into your other tables, rather than trying to read the data from somewhere else.

# java - 从 java 代码运行 shell 脚本并传递参数

> ID：12812345
> 
> 赞同：1
> 
> 时间：2012-10-10T05:12:12.930
> 
> 标签：java, shell, runtime.exec, shell-exec

我正在从 Java 程序执行一个 shell 脚本。我已经使用 Runtime 类实现了它。下面是我实现的代码

```
final StringBuilder sb = new StringBuilder("test.sh");
sb.append("/path to/my/text file");

final Process p = Runtime.getRuntime().exec(sb.toString()); 
```

这里 sb 是字符串缓冲区对象，我在其中附加参数并在 exec 方法中使用它。但问题是我传递的参数“/path to/my/text file”被认为是4个参数

```
/path
 to
/my/text
 file 
```

但是如果在 shell 中作为 test.sh "/path to/my/text file" 运行，它被视为单个参数。如何使用 Java 代码实现相同的目标，我需要将带有空格的路径视为单个参数。任何请都会非常可观。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T05:25:43.320

使用[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，它就是它的设计目的，让您的生活更轻松

```
ProcessBuilder pb = new ProcessBuilder("test.sh", "/path", "/my/text file");
Process p = pb.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:15:58.687

用这个：

```
final StringBuilder sb = new StringBuilder("test.sh");
sb.append(" \"/path to/my/text file\""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:16:56.923

要重新创建您在 shell 中手动运行的命令`test.sh "/path to/my/text file"`，您需要包含引号。

```
final StringBuilder sb = new StringBuilder("test.sh");
sb.append(" \"/path to/my/text file\""); //notice escaped quotes
final Process p = Runtime.getRuntime().exec(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:18:28.807

您的方法是正确的，您只需要添加一个`space (" ")`before 参数并转义参数`"/" and " "`中的字符

# html - 禁用编辑后，红色拼写检查曲线仍保留在 chrome 中

> ID：12812348
> 
> 赞同：3
> 
> 时间：2012-10-10T05:12:38.590
> 
> 标签：html, google-chrome, contenteditable, spell-checking, browser-bugs

**更新：**这已被确定为 Chrome 中的错误。（感谢@michael-robinson）

在 Chrome（至少 v22）中，我注意到即使在 contentEditable 被禁用后，拼写检查“红色波浪”下划线仍可能保留。

我做了一个 jsfiddle 来演示：[jsfiddle demo](http://jsfiddle.net/RegVn/1/ "演示编辑/拼写检查切换的 jsfiddle")。

![曲线和拼写错误](../Images/5bbbc0a452841ad2431e79aa6e3e43d5.png)

即使我`spellcheck="false"`在禁用之前设置了属性`contentEditable`，它们仍然存在。

任何人都知道解决或解决此问题的好方法吗？理想情况下，当内容可编辑时，我会保留内置的拼写检查功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:19:23.830

~~您是否尝试过设置`display: none`（使用 CSS）然后将显示设置回原来的样子？可能会强制 Chrome 重新绘制元素...~~（不起作用，请参阅下面的其他解决方案）

或者，您可以创建元素的副本（但禁用 contenteditable）将其放置在原始元素之后并删除原始元素。

**更新 1**：第一个解决方案不起作用，但第二个解决方案起作用。更新了 JSfiddle [http://jsfiddle.net/RegVn/6/](http://jsfiddle.net/RegVn/6/)

**更新 2**：上面的解决方案使用 innerHTML 删除破坏事件处理程序。它还破坏了选择/插入符号的位置。

新方法使用 jQuery 的`clone()`方法（在深度克隆模式下）创建对象的副本（复制事件处理程序），并具有自定义函数来保存对选择的引用，然后恢复它。请注意，选择保存/恢复功能在 ie6-8 中不起作用，但我认为这是可以接受的，因为问题被标记为 Chrome。更新 JSfiddle：http: [//jsfiddle.net/RegVn/23/](http://jsfiddle.net/RegVn/23/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-22T18:57:32.220

将属性添加`spellcheck="false"`到元素对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:01:58.067

spellcheck 属性指定是否要检查元素的拼写和语法：

[拼写检查 =“假”](http://www.w3schools.com/html5/att_global_spellcheck.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T01:13:07.240

如果您更新元素的 innerHTML，拼写检查将被重新评估，因此`spellcheck="false"`如果元素不可编辑，它们就会消失。

例如：

```
myElement.innerHTML = myElement.innerHTML + " "; // add a space to force a change. 
```

这有很大的缺点：

*   引用任何元素的事件处理程序和 javascript 对象都将失效（元素内的所有元素都有效地从 dom 中删除）。这也意味着仅 javascript 的属性，例如复选框的`indeterminate`属性或任何其他自定义属性，将被销毁。
*   选择或插入符号位置被破坏。
*   如果你有大量的内容，这对 cpu 来说是一项不平凡的操作，尤其是在移动设备上。

现在还可以，但我仍在寻找更好的答案。建议？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T00:15:47.513

```
var content = $("#editor").html();
$("#editor").html("")
$("#editor").attr('spellcheck', 'false');
$("#editor").html(content); 
```

试试这个代码，它应该可以工作。这是基于与克隆内部 HTML 相同的先前答案。

适用于 FF 和 Chrome。

# mysql - 从 mysql 迁移到 sql server express - 关注点

> ID：12812351
> 
> 赞同：0
> 
> 时间：2012-10-10T05:13:15.890
> 
> 标签：mysql, sql-server-express, database-migration, msde

我有一个可在商业上分发的桌面应用程序。目前我使用 MySQL 作为数据库，但我读到每次销售我的软件都需要 MySQL 的商业许可证。

因此，我计划迁移到 SQL Server Express 或 MSDE，因为它可以免费分发。现在为什么我同时考虑 msde 和 express 是因为它说 MSDE 有一个工作负载调节器，它会影响性能。但快递没有。10 GB 的数据库大小对我来说就足够了。希望 1 GB 内存应该没问题。但我有点担心性能。

那么 MSDE 仍然是一个选择吗？它会在 2012 年及以后推出吗？

Express 中的查询会与 SQL Server Enterprise 一样快吗？

还有其他我应该考虑的因素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:08:55.877

MSDE 早已停产，而 SQL Server Express 是它的替代品。

如果 SQL Server Express 性能对于桌面应用程序来说不足，我会感到非常惊讶，尽管谁知道，也许您的工作负载有一些特殊要求？确保最好的方法是将它连接起来并给它一些测试工作量和测量。

# ruby-on-rails-3 - Rails：更新控制器中的记录

> ID：12812354
> 
> 赞同：0
> 
> 时间：2012-10-10T05:13:40.220
> 
> 标签：ruby-on-rails-3, syntax

我已经将此方法放在我的控制器中，以便我可以锁定用户文档，但每个文档的记录保持不变。

```
def lock
  @doc = Doc.find(params[:id])
    respond_to do |format|
      params[:locked] = true
      format.html { redirect_to share_path(@doc) }
      format.json { render json: @doc }
    end
end 
```

我知道`params[:locked]`这是不起作用的部分。正确的语法是什么？我也试过`@doc.update_attribute(:locked, true)`没有成功。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:32:15.947

Params 是通过您的表单提交的属性的哈希值。它与数据库无关，也不保存在任何地方。事实上，你只应该从中读取数据，而不是修改它。要更新记录，您应该调用记录本身的方法，例如`save`或`update_attribute`。

所以`@doc.update_attribute(:locked, true)`应该适用于你的情况。

# mysql - MySQL TINYINT 为无符号

> ID：12812362
> 
> 赞同：28
> 
> 时间：2012-10-10T05:14:24.050
> 
> 标签：mysql, unsigned

我试图写 t=t|128 但出现超出范围的错误。我怀疑 tinyint 已签名。

但是[http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html)说它可能是未签名的（如下）。但它并没有说明如何使其未签名。我如何？

```
Type     Storage    Minimum Value        Maximum Value
         (Bytes)    (Signed/Unsigned)   (Signed/Unsigned)
TINYINT     1           -128                    127
                          0                     255
SMALLINT    2          -32768                   32767
                          0                     65535
MEDIUMINT   3          -8388608                8388607
                          0                   16777215
INT         4         -2147483648            2147483647
                          0                  4294967295
BIGINT      8      -9223372036854775808  9223372036854775807
                          0             18446744073709551615 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T05:23:18.090

`UNSIGNED`是可以添加到多种类型的属性。从[文档](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)中：

**数据类型**：

```
 BIT[(length)]
  | TINYINT[(length)] [UNSIGNED] [ZEROFILL]
  | SMALLINT[(length)] [UNSIGNED] [ZEROFILL]
  | MEDIUMINT[(length)] [UNSIGNED] [ZEROFILL]
  | INT[(length)] [UNSIGNED] [ZEROFILL]
  | INTEGER[(length)] [UNSIGNED] [ZEROFILL]
  | BIGINT[(length)] [UNSIGNED] [ZEROFILL]
  | REAL[(length,decimals)] [UNSIGNED] [ZEROFILL]
  | DOUBLE[(length,decimals)] [UNSIGNED] [ZEROFILL]
  | FLOAT[(length,decimals)] [UNSIGNED] [ZEROFILL]
  | DECIMAL[(length[,decimals])] [UNSIGNED] [ZEROFILL]
  | NUMERIC[(length[,decimals])] [UNSIGNED] [ZEROFILL]
  | DATE
  | TIME
  | TIMESTAMP
  | DATETIME
  | YEAR
  | CHAR[(length)]
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | VARCHAR(length)
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | BINARY[(length)]
  | VARBINARY(length)
  | TINYBLOB
  | BLOB
  | MEDIUMBLOB
  | LONGBLOB
  | TINYTEXT [BINARY]
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | TEXT [BINARY]
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | MEDIUMTEXT [BINARY]
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | LONGTEXT [BINARY]
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | ENUM(value1,value2,value3,...)
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | SET(value1,value2,value3,...)
      [CHARACTER SET charset_name] [COLLATE collation_name]
  | spatial_type 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-10T05:25:07.813

你用关键字标记无符号`unsigned`。因此，在制作表格时：

```
CREATE TABLE `example_table` (
  `example_col` tinyint(3) unsigned NOT NULL
); 
```

更多信息请参见[创建表](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)，或[更改表](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T05:35:07.687

首先，你应该用负值做一些事情，否则`ALTER TABLE...UNSIGNED`会抛出错误。例如，您可以增加所有值 -

```
UPDATE table SET tiny_field = tiny_field + 128; 
```

然后使用 ALTER TABLE 更改字段类型/选项。

# sql - SQL 结果何时可以包含重复项？

> ID：12812365
> 
> 赞同：4
> 
> 时间：2012-10-10T05:14:36.063
> 
> 标签：sql, relational-database

我只是在学习关系数据库，并被告知他们不允许重复条目。起初我不相信这一点，因为我编写了返回重复结果的 SQL 查询。是系统不会在一个关系中存储相同的集合吗？`select author from Books`我的意思是，如果您有书籍和作者的关系，并且只选择了选择作者，那么如果同一作者写了不同的书籍（例如），则可能会出现重复。此外，如果您使用 join 那么您可以获得重复的结果，对吗？还有其他场景吗？

基本上，当人们说 rmdbs 没有重复项时，他们只是指信息的存储方式（在一个表中），对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T09:19:09.523

关系数据库仅由关系变量（关系“表”）组成，根据定义，关系变量总是由唯一的元组（“行”）组成。关系数据库管理系统使用基于 Codd 关系代数的查询语言，该语言同样不能在结果中生成重复项，因为关系代数中的每个结果也是一个关系，因此由唯一的元组组成。

因为您假设 SQL 是一种适当的关系语言而 SQL DBMS 是关系语言，所以您会感到困惑。它不是，他们也不是。当您开始将 SQL 与其在关系世界中的近似等价物进行比较时，事情就会变得棘手。您的 SQL 查询：

```
SELECT author FROM Books; 
```

可能会返回重复的行，但显然相似的关系查询：

```
π author (Books) 
```

将不会。关系查询更像是下面的 SQL：

```
SELECT DISTINCT author FROM Books; 
```

您必须在 SQL 中非常小心，以避免在您不想要或不期望的地方出现重复。这是一个即使是有经验的 SQL 用户也会遇到的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T17:02:12.003

关系是一组元组。因为它们是集合，关系不能包含相同的元组两次。

如果某物（例如 SQL 中的“表”）确实包含“两次相同的元组”，那么该物不是关系，并且该语言不是关系语言。充其量，当（且仅当）语言使用者对自己施加必要的自律时，语言可以以关系方式使用。

简介：关系 DBMS 确实不允许重复，并且典型的 SQL 引擎正是因为这个原因而不是关系 DBMS (ao)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T05:44:01.817

您可以很好地将重复项放入表中，除非该表有明确禁止它的约束。

通常一个表有一个主键，主键是一个约束，它不允许作为键的一部分的字段重复，这样可以防止表有重复的记录。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T01:17:18.717

RDBMS 可能有重复，特别是如果它们没有很好地设置。设置 RDBMS 需要您了解规范化是什么。如果您有重复，这意味着您的表可能不是第一规范化形式。1st Normalization Form 中表格的定义是消除或消除重复值，因此如果您有重复/重复值，则需要首先通过消除重复值将您的表带入 1st Normalization Form 标准，然后再达到其 2nd规范化表格等。

# css - CSS：在 DIV 中放置 SVG

> ID：12812366
> 
> 赞同：0
> 
> 时间：2012-10-10T05:14:47.237
> 
> 标签：css, svg, position

这是我的小提琴 - [http://jsfiddle.net/UBHj8/](http://jsfiddle.net/UBHj8/)

所以我的问题很明显，只是似乎无法让 svg 将搜索栏隐藏在正确的位置。有人可以帮忙吗，这个小错误让我发疯了。

```
<div class="togglesearch">
    <svg id="hidesearch" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10" style="margin:0px 0px 0px 10px;">
        <polygon points="10,10  10,0  0,5">
    </svg>

    <svg id="showsearch" xmlns="http://www.w3.org/2000/svg" version="1.1" width="10" height="10" style="margin:10px 0px 0px 10px;">
        <polygon points="0,0  0,10  10,5">
    </svg>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:33:16.803

你想要这样的东西[吗](http://jsfiddle.net/UBHj8/4/)？

我将 svg 图像绝对定位在容器中，并将垂直位置与搜索框的填充相匹配。

# ruby-on-rails - 为什么这个 Rails 视图助手逻辑在一个实例中失败但在另一个实例中运行？

> ID：12812367
> 
> 赞同：0
> 
> 时间：2012-10-10T05:14:54.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise, parameter-passing

我对传入和传出 Rails 视图助手的参数和结果的处理感到困惑：

```
module CasesHelper
    def case_owned(owner,cur_usr)       
        return false if (owner.nil?)
        return false if (cur_usr.nil?)
        x = User.find(cur_usr)
        y = User.find(owner)  

        ## this does not returns 'true' 
        ## when expected 
        ## return true if (owner == cur_usr)

        return true if (x == y)     #<<<< This line works
        return false
    end
end 
```

这是视图代码：

```
 <td><%= link_to 'Show', c %></td>
    <td><%= (link_to 'Edit', edit_case_path(c)) if case_owned(c.user_id,current_user) %></td>
    <td><%= (link_to 'Destroy', c, method: :delete, data: { confirm: 'Are you sure?' })  if case_owned(c.user_id,current_user) %></td> 
```

工作代码如何工作而注释掉的行不能工作？为什么需要 User.find() 调用来确保平等。并且，如何：

```
 User.find(cur_usr) == User.find(owner) 
```

...评估为`true`

什么时候：

```
 cur_usr == owner 
```

...评估为`false`

我正在使用 Devise gem 进行身份验证，它提供了 current_user 方法。我最初使用“cur_usr == owner”行对上面的代码进行了编码，但意识到使用 User.find() 方法有效。我很困惑传递给 find() 的参数如何被认为是不相等的，但返回的对象（记录）被评估为相等。我在这里想念什么？

请尝试将您的评论指向 Ruby 如何处理将对象作为参数传递或 Rails 命名约定如何在这里“提供帮助”。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:20:58.277

`current_user`通常返回一个`User`实例，如果你运行它，它工作正常`User.find(cur_user)`（它返回相同的用户）。但是，您的第一个参数是一个 id （`c.user_id`在视图中）。你可以做`owner == cur_user.id`。

如果您总是希望方法中有一个 ID，您可能应该将变量命名为`owner_id`。

# php - facebook访问令牌错误

> ID：12812372
> 
> 赞同：0
> 
> 时间：2012-10-10T05:15:48.783
> 
> 标签：php, facebook, access-token

请帮我解决以下错误。

> 警告：file_get_contents() [function.file-get-contents]: https:// wrapper is disabled in server configuration by allow_url_fopen=0 in /home/australi/public_html/fb/index.php on line 27
> 
> Warning: file_get_contents(https://graph.facebook.com/me?access_token=AAABempp6Ls0BANc98WmqZAreBbUzPnT1xyer9wtPmbvlwsnZCc4AKwuvCAVosLxw4yItvOkDoIK5hyCvBPZAk90nLx4PZACorrZCZAAi9pGgZDZD) [function.file-get-contents]: failed to open stream: no suitable wrapper could be found in /home/australi/public_html/fb /index.php 第 27 行无效的访问令牌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:20:29.587

据我所知，您需要在 php.ini 配置文件中允许包装器。

# sql - SQL Server 2008 R2 对象名无效错误

> ID：12812377
> 
> 赞同：0
> 
> 时间：2012-10-10T05:16:28.540
> 
> 标签：sql, sql-server-2008

这是我要实现的存储过程：

```
 Alter PROCEDURE pro_worst_supplier_test 
@datey nvarchar(4), @datem nvarchar(2)
   AS
   BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;
-- Insert statements for procedure here

select y.CompanyName from (SELECT s.CompanyName,(select min(t.b) from (select (round(sum(OD.Quantity * (1-OD.Discount) * OD.UnitPrice),0)) as b from [Order Details] group by ProductID) t) as q
FROM ((((Products p 
inner join [Order Details] OD on p.ProductID=OD.ProductID) 
inner join Categories c on p.CategoryID=c.CategoryID) 
inner join Suppliers s on p.SupplierID=s.SupplierID)
inner join Orders o on o.OrderID=od.OrderID)
where c.CategoryName='Produce' AND SUBSTRING(CONVERT(nvarchar(22), o.OrderDate, 111),1,4)=@datey AND SUBSTRING(CONVERT(nvarchar(22),o.OrderDate, 111),6,2)=@datem
group by s.CompanyName) y
where q=(select MIN(q)from y) 
END 
GO 
```

当我试图通过

```
exec proc_worst_supplier_test '1998','04' 
```

我有一个错误

> *无效的对象名称“y”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:22:54.103

试试这个：

```
;WITH CTE as (
SELECT s.CompanyName,(select min(t.b) from (select (round(sum(OD.Quantity * (1-OD.Discount) * OD.UnitPrice),0)) as b from [Order Details] group by ProductID) t) as q
FROM ((((Products p 
inner join [Order Details] OD on p.ProductID=OD.ProductID) 
inner join Categories c on p.CategoryID=c.CategoryID) 
inner join Suppliers s on p.SupplierID=s.SupplierID)
inner join Orders o on o.OrderID=od.OrderID)
where c.CategoryName='Produce' AND SUBSTRING(CONVERT(nvarchar(22), o.OrderDate, 111),1,4)=@datey AND SUBSTRING(CONVERT(nvarchar(22),o.OrderDate, 111),6,2)=@datem
group by s.CompanyName
)

select CompanyName from CTE where q=(select MIN(q) from CTE) 
```

# select - 当元素数量超过特定数量时，如何在 html select 中显示垂直滚动条？

> ID：12812380
> 
> 赞同：2
> 
> 时间：2012-10-10T05:16:44.803
> 
> 标签：select, scrollbar

我遇到了一个问题。我们知道当 chrome 中的元素数量超过 20（Firefox 中为 30）时，select 将显示一个垂直滚动条。当元素数量超过特定数量时，我们能否找到一种显示垂直滚动条的方法。下面是一个例子：

![一个例子](../Images/791000eed8f76f4c0e67c869003ac615.png)

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T05:29:15.170

在垂直滚动条中使用大小来更改默认值

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-10T05:36:18.970

将列表的“ `size`”属性设置为特定的计数值。例子：

```
 <select size="yourSpecificValue">
 </select> 
```

如果列表中的项目超过此值，将自动添加滚动条。

# c# - 从 XML 文件中读取特定文本

> ID：12812381
> 
> 赞同：0
> 
> 时间：2012-10-10T05:16:50.683
> 
> 标签：c#, .net, xml, search, xmltextreader

我创建了一个小型 XML 工具，它可以让我计算来自多个 XML 文件的特定 XML 标记。

代码如下：

```
public void SearchMultipleTags()
        {
            if (txtSearchTag.Text != "")
            {
                try
                {
                    //string str = null;
                    //XmlNodeList nodelist;
                    string folderPath = textBox2.Text;
                    DirectoryInfo di = new DirectoryInfo(folderPath);
                    FileInfo[] rgFiles = di.GetFiles("*.xml");
                    foreach (FileInfo fi in rgFiles)
                    {
                        int i = 0;
                        XmlDocument xmldoc = new XmlDocument();
                        xmldoc.Load(fi.FullName);
                        //rtbox2.Text = fi.FullName.ToString();

                        foreach (XmlNode node in xmldoc.GetElementsByTagName(txtSearchTag.Text))
                        {

                            i = i + 1;

                            //
                        }
                        if (i > 0)
                        {
                            rtbox2.Text += DateTime.Now + "\n" + fi.FullName + " \nInstance: " + i.ToString() + "\n\n";

                        }
                        else 
                        {
                            //MessageBox.Show("No Markup Found.");
                        }

                        //rtbox2.Text += fi.FullName + "instances: " + str.ToString();
                    }

                }
                catch (Exception)
                {

                    MessageBox.Show("Invalid Path or Empty File name field.");

                }
            }
            else
            {
                MessageBox.Show("Dont leave field blanks.");
            }

        } 
```

此代码返回用户想要的多个 XML 文件中的标签计数。

现在我想搜索特定文本及其在 XML 文件中的计数。

你能建议使用 XML 类的代码吗？

谢谢和问候， Mayur Alaspur

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:25:04.443

System.Xml.XPath。

Xpath 支持计数：count(//nodeName)

如果要计算具有特定文本的节点，请尝试

```
count(//*[text()='你好'])
```

请参阅[如何在 C# 中使用 XPath 获取 SelectedNode 的计数？](https://stackoverflow.com/questions/3575229/how-to-get-count-number-of-selectednode-with-xpath-in-c)

顺便说一句，您的函数应该看起来更像这样：

```
private int SearchMultipleTags(string searchTerm, string folderPath) { ...
      //...
      return i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:26:02.850

改用**LINQ2XML** 。它很简单，可以完全替代其他 XML API

```
XElement doc = XElement.Load(fi.FullName);

//count of specific XML tags
int XmlTagCount=doc.Descendants().Elements(txtSearchTag.Text).Count();

//count particular text

int particularTextCount=doc.Descendants().Elements().Where(x=>x.Value=="text2search").Count(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:48:53.473

尝试使用`XPath`：

```
//var document = new XmlDocument();
int count = 0;
var nodes = document.SelectNodes(String.Format(@"//*[text()='{0}']", searchTxt));
if (nodes != null)
    count = nodes.Count; 
```

# ruby-on-rails - 在 Rails 中通过 ajax 渲染 Link_to_remote

> ID：12812385
> 
> 赞同：1
> 
> 时间：2012-10-10T05:17:04.087
> 
> 标签：ruby-on-rails, ruby

我正在使用 rails 2。我想制作一个 link_to_remote 对象并将其呈现在 html 页面上。我想通过 ajax 发送日期。我正在尝试这个。

```
render :text => "<font color='"+ color +"'>" +params[:ajax_status] + "</font>" + <%= link_to_remote '| Undo',
              :update => 'status_'" +params[:ajax_status]+ ",:url => {:controller => 'requests', :action => 'action_on_punching_request', :id => "+ params[:id] +" :ajax_status => 'Undo'} %> 
```

但无法继续。它显示在网页上

```
Accepted<%= link_to_remote '| Undo', :update => 'status_'Accepted,:url => {:controller => 'requests', :action => 'action_on_punching_request', :id => 20 :ajax_status => 'Undo'} %> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:37:55.770

在这种情况下，您不需要`<%= %>`标签 - 它们用于 erb。

试试：

```
render :text => "#{ content_tag :font, params[:ajax_status], :color => color }#{  link_to_remote '| Undo', :update => "status_#{ params[:ajax_status] }", :url => {:controller => 'requests', :action => 'action_on_punching_request', :id => params[:id], :ajax_status => 'Undo'}  }" 
```

# flash - 如何动态加载将 Flash 视频内容嵌入 div 的脚本标签

> ID：12812386
> 
> 赞同：3
> 
> 时间：2012-10-10T05:17:09.103
> 
> 标签：flash, dynamic, append

我正在开发的平台需要动态加载嵌入 Flash 视频到指定 div 的 Javascript 文件。我们将称 div id 为“目标”。Javascript 文件已正确附加到 div 中。但是 Flash 视频内容不会加载。如何确保在加载文档后执行嵌入脚本？

```
var div = document.getElementById("target");
var newScript = document.createElement("script");
newScript.setAttribute("type","text/javascript");
newScript.setAttribute("src","http://www.go.url");
div.appendChild(newScript); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:58:47.180

侦听文档中的加载事件，然后加载您的脚本：

```
function loadJS() {
    var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
    s.src = '//www.goraceday.com/embed/14/1651/';
    var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
}
if (window.addEventListener) window.addEventListener('DOMContentLoaded', loadJS, false);
else if (window.attachEvent) window.attachEvent('onload', loadJS); 
```

# apache - 如何使用 filezilla 和 apache 查找用户名和密码

> ID：12812393
> 
> 赞同：0
> 
> 时间：2012-10-10T05:17:55.530
> 
> 标签：apache, passwords, filezilla

我正在尝试使用 FileZilla 连接到我自己的 Apache 服务器，但我无法弄清楚服务器的用户名和密码应该是什么。有没有办法找到这些值，或者我应该尝试某种默认值？抱歉这个愚蠢的问题，这基本上是我第一次使用任何类型的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:56:03.890

如果您的问题是尝试连接到包含您的 Apache 安装的服务器，那么您所要做的就是使用网络上服务器的 IP 地址（例如：192.168.1.10）连接到它，输入有效的用户名和对应的该机器上用户的密码，您应该能够连接。

有关详细信息，请参阅此文档：

[http://wiki.filezilla-project.org/FileZilla_Client_Tutorial_(en)#Connecting_to_a_server](http://wiki.filezilla-project.org/FileZilla_Client_Tutorial_(en)#Connecting_to_a_server)

# android - 关于android BroadcastReceiver

> ID：12812394
> 
> 赞同：0
> 
> 时间：2012-10-10T05:18:00.277
> 
> 标签：android

我发现一个问题，当我的程序被某个进程管理器杀死时，广播无法接收，为什么？但是闹钟即使被杀了也会工作。如何像闹钟一样实现这个功能，我正在写一个Crontab的应用程序。任何帮助都是感恩节！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:41:44.147

您的进程正在被杀死，因此与您的进程关联的所有资源、线程都将被删除或已经被删除。那么您的接收者如何接收通知呢？

# ios - 以.wav 格式录制音频

> ID：12812396
> 
> 赞同：3
> 
> 时间：2012-10-10T05:18:18.873
> 
> 标签：ios, audio-recording

如何在我的 iPhone 应用程序中以 .WAV 格式录制音频。谁能帮帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:23:31.183

您可以使用 AVAudioRecorder 录制成 .CAF 格式，然后使用扩展音频文件服务将 CAF 转换为 WAV

你也可以检查这个问题： [Recording sound as WAV on iphone](https://stackoverflow.com/questions/570430/recording-sound-as-wav-on-iphone)

# jquery-mobile - 如何在 jquery mobile 中禁用列表视图的搜索过滤器

> ID：12812398
> 
> 赞同：3
> 
> 时间：2012-10-10T05:18:23.987
> 
> 标签：jquery-mobile

如何在 jquery mobile 中禁用列表视图的搜索过滤器。

我的代码：

```
ul(data-role='listview' ,data-filter="false")
                  li
                    a(href="JavaScript:editGroupFormSubmission('#{groupsId[0]}')") 
                         p A
                  li
                    a(href="/mfi/api/1.0/client/ci/kycuploading") 
                       p B
                  li
                    a(href="/mfi/api/1.0/client/ci/groups/fieldverification") 
                         p C
                  li
                    a(href="/mfi/api/1.0/client/ci/groups/cca1") 
                         p D 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:55:24.237

尝试使用 javascript `$('.ui-listview-filter input').textinput('disable');`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T13:25:10.293

```
.nav-search .ui-bar-a { visibility:hidden !important;} 
```

# c# - 不能使用命名空间“System.ComponentModel.DataAnnotations.Schema”

ID：12812401

赞同：1

时间：2012-10-10T05:18:31.013

标签：c#, asp.net, data-annotations

# c# - 什么是检查 DataTable 列中的值是否包含在 SQL 查询结果中的有效简洁方法？

> ID：12812404
> 
> 赞同：1
> 
> 时间：2012-10-10T05:18:39.437
> 
> 标签：c#, .net, sql

我正在将数据从 CSV 文件转换为数据库。我将 CSV 文件中的数据放入 a`DataTable`并尝试验证数据。

我要检查的一件事是`DataTable`（我们称之为`PersonID`）的某一列中的所有值都可以在我正在转换到的数据库中的表的列中找到（我们称之为`PeopleID`）。

所以，我想检查表中`PersonID`是否列出了所有的值`PeopleId`。

我的结果`DataTable`如下：

```
var listOfPersonIdsInData = arguments.DataTable.Select("PersonId"); 
```

我查询数据库以获取`PeopleId`列的值：

```
var listOfPeopleIdsInDatabase = checkQuery.Execute<DataColumn>(@"SELECT DISTINCT PeopleId FROM People");` 
```

在 C# 中进行检查的最佳方法是什么？我意识到这是一个有点基本的问题，但我正在考虑这样做的方式是使用两个数组。将每个结果读入一个数组，然后循环遍历数组 1 的每个值以检查它是否在数组 2 中。

我觉得我在重新发明轮子。如果有的话，我真的很想知道一种更好的方法。如果有人可以提供任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:32:28.263

如果您使用的是 SQL 2008，我建议您将 DataTable 作为参数作为[表值](http://msdn.microsoft.com/en-us/library/bb675163.aspx)参数传递给存储过程或参数化查询，然后使用 Anti Join 或 Not In 或 Not Exists 来确定是否有任何DataTable 中不在 SQL 表中的行。

例如

创建类型

```
CREATE TYPE dbo.PersonTable AS TABLE
    ( PersonId int ) 
```

然后是过程

```
CREATE PROCEDURE usp_ValidateDataTable 
(@CheckTable dbo.PersonTable READONLY) as 

 BEGIN

     SELECT c.PersonID 
      FROM  
           @CheckTable  c
      WHERE
             c.Person NOT IN (SELECT PersonID from dbo.People)

 END 
```

C# 代码 SP 调用

```
 SqlCommand cmd= new SqlCommand("usp_ValidateDataTable" , cnn);
  SqlParameter tvpParam = cmd.Parameters.AddWithValue("@CheckTable", listOfPersonIdsInData );
  tvpParam.SqlDbType = SqlDbType.Structured;
  tvpParam.TypeName = "dbo.PersonTable";
  SqlDataReader rdr = cmd.ExcuteReader(); 
```

C# 代码参数化查询调用

```
 string query = @" SELECT c.PersonID 
                   FROM  @CheckTable  c
                   WHERE c.Person NOT IN (SELECT PersonID from dbo.People)";

  SqlCommand cmd= new SqlCommand(query  , cnn);
  SqlParameter tvpParam = cmd.Parameters.AddWithValue("@CheckTable", listOfPersonIdsInData );
  tvpParam.SqlDbType = SqlDbType.Structured;
  tvpParam.TypeName = "dbo.PersonTable";
  SqlDataReader rdr = cmd.ExcuteReader(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:33:49.647

我不得不迁移很多信息，到目前为止，我认为最好的是：

1.  使用 CSV 中的信息创建一个平面表并在那里加载所有数据
2.  在相同的 SQL 方法中创建以提取标准化信息
3.  在相同的 SQL 中构造一个方法，将标准化信息与原始数据交叉

非常快，尤其是当记录数量很大（大于 1M）时，而且您避免了优化 RAM 管理脚本/程序的问题。也将 CSV 加载到 MySQL 数据真的很容易检查[这个](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

**提示**：用于导入和验证的参数化方法，带有偏移量和限制值

# vb.net - 使 VBScript CDO 与 Amazon SES SMTP 一起工作是否有一些技巧？

> ID：12812408
> 
> 赞同：6
> 
> 时间：2012-10-10T05:18:48.843
> 
> 标签：vb.net, vbscript, smtp, amazon-ses, cdo.message

使 VBScript CDO 与 Amazon SES SMTP 一起工作是否有一些技巧？我没有收到任何错误，但它也没有向我发送我的测试电子邮件。将 SSL 更改为 False 确实会给我一个 530 错误，所以我知道我至少可以到达服务器。我究竟做错了什么？

```
EmailSubject = "Sending Email by CDO"
EmailBody = "This is the body of a message sent via" & vbCRLF & _
        "a CDO.Message object using SMTP authentication."

Const EmailFrom = "yyy@xxx.com"
Const EmailFromName = "Me Test"
Const EmailTo = "eee@aaa.com"
Const SMTPServer = "email-smtp.us-east-1.amazonaws.com"
Const SMTPLogon = "xxxxxx"
Const SMTPPassword = "xxxxxxx"
Const SMTPSSL = True
Const SMTPPort = 25

Const cdoSendUsingPickup = 1    'Send message using local SMTP service pickup directory.
Const cdoSendUsingPort = 2  'Send the message using SMTP over TCP/IP networking.

Const cdoAnonymous = 0  ' No authentication
Const cdoBasic = 1  ' BASIC clear text authentication
Const cdoNTLM = 2   ' NTLM, Microsoft proprietary authentication

' First, create the message

Set objMessage = CreateObject("CDO.Message")
objMessage.Subject = EmailSubject
objMessage.From = """" & EmailFromName & """ <" & EmailFrom & ">"
objMessage.To = EmailTo
objMessage.TextBody = EmailBody

' Second, configure the server

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserver") = SMTPServer

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = cdoBasic

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendusername") = SMTPLogon

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/sendpassword") = SMTPPassword

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = SMTPPort

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = SMTPSSL

objMessage.Configuration.Fields.Item _
("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60

objMessage.Configuration.Fields.Update

' Now send the message!

objMessage.Send 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:23:46.847

CDO 不支持 TLS，仅支持 SSL。AWS SES 将允许您在 TCP 端口 465 上使用 SSL。尝试在端口 25 上使用 SSL，就像您在发布的脚本中一样，应该返回以下错误消息：

CDO.Message.1：传输失去了与服务器的连接。

我不知道为什么你没有得到这个脚本的错误。我愿意。尝试将端口更改为 465。当我将端口更改为 465 时，它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T16:38:26.270

这是一个很棒的例程。您需要将 objMessage 声明为对象：

将 objMessage 调暗为对象

此外，由于他使用的是 Const，如果您想更改这些项目中的任何一项，您需要将它们声明为字符串并从这些行中删除 Const。我不得不用 465 代替 SMTPPort，使用我的 SES id/pw，它运行良好！

# php - 获得没有语法错误的未捕获引用错误

> ID：12812409
> 
> 赞同：0
> 
> 时间：2012-10-10T05:18:51.417
> 
> 标签：php, javascript, html, json

我正在尝试使用一些 HTML、JS 和 PHP 进行简单的 JQuery JSON 调用，但我的 createBuilding() 函数中似乎存在错误。该功能所做的第一件事就是创建一个警告框，甚至没有显示出来。当我检查 Javascript 控制台时，我得到未捕获的引用错误。我做了一个 JS Fiddle 看看是否有人可以提供帮助！

[http://jsfiddle.net/LpFTj/1/](http://jsfiddle.net/LpFTj/1/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:23:49.420

移到`createBuilding`外面`$(document).ready`。由于它是在函数中定义的，因此它在该函数范围之外不可用，即不全局可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:27:15.533

您似乎将您的功能限制在 DOM Ready 事件的范围内..所以您不能访问外部..也是此元素中的一种类型 `buildingType`

```
var buildingFinalType = document.getElementById('builtingType').value; 
```

# javascript - 是否有常见的手写笔“库”

> ID：12812412
> 
> 赞同：0
> 
> 时间：2012-10-10T05:19:15.733
> 
> 标签：javascript, css, stylus

似乎是我想做的大部分事情`stylus`，例如，

```
边界半径（）
  -webkit-border-radius 参数
  -moz-border-radius 参数
  边界半径参数

```

应该与其他人正在做的事情很常见。

是否使用了常见的`stylus`“库”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T16:31:27.173

对于带有网格和元素的东西（除了 mixins），还有[axis](http://roots.cx/axis/)，它最终可能会与 nib 合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:59:26.750

正如 Jonathan 在评论中提到的，最好的答案是“<a href="https://github.com/visionmedia/nib" rel="nofollow">nib”——它是来自 Stylus 开发人员之一的库，并且有很多人为此做出了贡献。

# php - PHP登录远程站点并下载csv

> ID：12812414
> 
> 赞同：0
> 
> 时间：2012-10-10T05:19:22.300
> 
> 标签：php

我需要创建一个登录到远程站点的 php 脚本，然后在该站点上下载一个 csv 文件。我已经搜索了所有内容，但没有找到任何可以满足我需要的东西。目前我只有以下代码允许我登录到远程站点。

```
<?php
$username=""; 
$password=""; 
$url=''; 
$cookie=""; 
$postdata = 'email='.$username.'&pass='.$password; 

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;       rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt($ch, CURLOPT_POST, true); 
$result = curl_exec($ch); 
echo $result;  
curl_close($ch); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:29:19.950

怎么样：

```
<?php
$username=""; 
$password=""; 
$url=''; 
$csvurl=''; 
$cookie=""; 
$postdata = 'email='.$username.'&pass='.$password; 

/*first log in*/
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;       rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt($ch, CURLOPT_POST, true); 
$result = curl_exec($ch); 
echo $result;  

/*now download the file*/
curl_setopt($ch, CURLOPT_URL, $csvurl); 
curl_setopt($ch, CURLOPT_REFERER, $url);
$result = curl_exec($ch); 
echo $result;  

curl_close($ch);
?> 
```

# mysql - 在mysql中显示相同数据的行

> ID：12812415
> 
> 赞同：1
> 
> 时间：2012-10-10T05:19:22.727
> 
> 标签：mysql

我有 sql 查询

```
SET @cumulative_sum := 0;
SELECT fct_sales.datDate, @cumulative_sum := @cumulative_sum + fct_sales.dblTotal AS     
cumulative_sum
FROM fct_sales
where
fct_sales.intProductID=40
and
fct_sales.datDate
between
'2011-01-01'
and
'2011-01-10'
 ORDER BY fct_sales.datDate ASC 
```

这很好，并给了我结果表

```
 _______________________________
 |     datDate|  Cumulative_sum|
 |____________|________________|          
 | 2011-01-02 |   5005         |
 |____________|________________|
 |2011-01-04  |   7007         |
 |____________|________________| 
```

但是，我需要的是：

```
 _____________________________
 |     datDate|  Cumulative_sum|
 |____________|________________| 
 |  2011-01-01|  5005          |
 |____________|________________| 
 |  2011-01-02|  5005          |
 |____________|________________| 
 |  2011-01-03|  5005          |
 |____________|________________| 
 |  2011-01-04|  7007          |
 |____________|________________| 
 |  2011-01-05|  7007          |
 |____________|________________| 
 |  2011-01-06|  7007          |
 |____________|________________| 
 |  2011-01-07|  7007          |
 |____________|________________| 
 |  2011-01-08|  7007          |
 |____________|________________| 
 |  2011-01-09|  7007          |
 |____________|________________| 
 |  2011-01-10|  7007          |
 |____________|________________| 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:14:49.300

尝试这个

```
SELECT datDate, Cumulative_sum FROM fct_sales WHERE intProductID='40' AND datDate BETWEEN '2011-01-01' AND '2011-01-10' GROUP BY datDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:48:43.970

嗨，基本上对于这个查询，你需要 3 件事：

1.  日期集
2.  将 fct_sales 加入同一张表以获取 nextDate
3.  设置日期并加入 fct_sales。

如果你想要 5005 的总和将在日期 2011-01-01 我认为这是不可能的，因为如果列表中有超过 2 个 Cumulative_sum，它们就会相互重叠......

示例不漂亮，因为您需要日期范围。有时在数据库中是时间表，这将有助于减少查询代码。如果这对您没有帮助，那么至少会有一点有用:)

**[SQLFIDDLE](http://sqlfiddle.com/#!2/dceac/25)**

所以这里是我的例子：

```
 SELECT
    a.Date
    ,b.Cumulative_sum
    FROM
      (SELECT DATE_FORMAT(curdate() - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY, '%Y-%m-%d') AS Date
       FROM
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS a CROSS
       JOIN
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS b CROSS
       JOIN
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS c) a,
       (SELECT 
        fc1.datDate, 
        fc1.Cumulative_sum, 
         (SELECT MIN(fc2.datDate)  
          from fc fc2 
          WHERE fc1.datDate < fc2.datDate ) AS nextDate
    from fc fc1) b
      where (a.Date between '2011-01-01' and '2011-01-10')
        AND a.Date>=b.datDate 
        AND a.Date < COALESCE(b.nextDate, '2011-01-11')
      ORDER BY a.Date, b.Cumulative_sum 
```

结果：

```
DATE    CUMULATIVE_SUM
2011-01-02  5005
2011-01-03  5005
2011-01-04  7007
2011-01-05  7007
2011-01-06  7007
2011-01-07  7007
2011-01-08  7007
2011-01-09  7007
2011-01-10  7007 
```

使用您的查询数据查询示例：

```
SET @cumulative_sum := 0;
SELECT
    a.Date
    ,b.Cumulative_sum
    FROM
      (SELECT DATE_FORMAT(curdate() - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY, '%Y-%m-%d') AS Date
       FROM
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS a CROSS
       JOIN
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS b CROSS
       JOIN
         (SELECT 0 AS a
          UNION ALL SELECT 1
          UNION ALL SELECT 2
          UNION ALL SELECT 3
          UNION ALL SELECT 4
          UNION ALL SELECT 5
          UNION ALL SELECT 6
          UNION ALL SELECT 7
          UNION ALL SELECT 8
          UNION ALL SELECT 9) AS c) a,
       (SELECT
    fc1.datDate,
    fc1.Cumulative_sum,
         (SELECT MIN(fc2.datDate) AS datDate
            FROM (SELECT fct_sales.datDate, @cumulative_sum := @cumulative_sum + fct_sales.dblTotal AS     
                    cumulative_sum
                  FROM fct_sales
                 where
                fct_sales.intProductID=40
                and fct_sales.datDate between '2011-01-01' and '2011-01-10') fc2
          WHERE fc1.datDate < fc2.datDate ) AS nextDate
        FROM (SELECT fct_sales.datDate, @cumulative_sum := @cumulative_sum + fct_sales.dblTotal AS     
              cumulative_sum
             FROM fct_sales
             where
             fct_sales.intProductID=40
            and fct_sales.datDate between '2011-01-01' and '2011-01-10' ) fc1) b
      where (a.Date between '2011-01-01' and '2011-01-10')
        AND a.Date>=b.datDate 
        AND a.Date < COALESCE(b.nextDate, '2011-01-11')
      ORDER BY a.Date, b.Cumulative_sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:32:13.673

由于您的数据不适合解决您的问题..但是无论您提供什么，我认为这都会对您有所帮助..

```
SELECT datDate, Cumulative_sum from fct_sales where Cumulative_sum > 5005 AND Cumulative_sum < 7007 AND intProductID = '40' ORDER BY datDate ASC 
```

# android - 仅从字体样式粗体替换字符

> ID：12812418
> 
> 赞同：1
> 
> 时间：2012-10-10T05:20:07.433
> 
> 标签：android, arraylist, textview

我是 android 新手，我正在尝试在 arraylist 字符串中的特定字符处替换粗体样式的字符。我正在做的是：

```
String myName = "76492"; 
```

这是我的搜索字符串，我想在数组列表中搜索这个字符串，然后我想在`arraylist.Arraylist`字符串为 78758,3660,56798,6514,90679 时将这些字符加粗。

```
TextView txtf = (TextView)findViewById(R.id.textView4);
TextView txtS = (TextView) findViewById(R.id.textView5);                                    
TextView txtT = (TextView)findViewById(R.id.textView6);
TextView txt1 = (TextView) findViewById(R.id.textView9);
TextView txt2 = (TextView) findViewById(R.id.textView13);

String str= myName.replaceAll("6", "<b>6</b>");                                 
Spanned text = Html.fromHtml(str);
txtf.setText(text);
txtS.setText(text);
txtT.setText(text);
txt1.setText(text);
txt2.setText(text); 
```

但这是用匹配字符粗体样式的*76492*`Textview`字符串替换所有字符串。1879 搜索字符串这是替换旧字符串，但我不希望这种类型替换。我只希望以粗体样式更改特定位置字符

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:54:30.743

```
<style name="boldText">
    <item name="android:textStyle">bold</item>

</style> 
```

将此代码段粘贴到您的 style.xml 中，该文件位于布局下的 valuse 文件夹中。

```
txtf.setTextAppearance(this, R.style.boldText); 
```

这行代码是为您的文本视图显示为粗体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:13:19.643

使用跨度。然后，您可以指定字符串的一部分并分配您想要的任何格式或颜色。看看[这个](http://blog.stylingandroid.com/archives/177#)。编辑：为了澄清：使用跨度，您不会替换字符。使用一些字符串方法来查找要更改为粗体的字符的位置，并在这些位置上创建一个跨度并将粗体格式分配给该跨度。*

# python - 如何发送带有分散的数组的一部分？

> ID：12812422
> 
> 赞同：4
> 
> 时间：2012-10-10T05:20:46.097
> 
> 标签：python, mpi

我正在自学 Python mpi4py 模块，用于在多个进程中进行编程。我编写了以下代码来练习分散。

```
from mpi4py import MPI

comm = MPI.COMM_WORLD
size = comm.Get_size()
rank = comm.Get_rank()

if rank == 0:
   data = [i for i in range(8)]
else:
   data = None
data = comm.scatter(data, root=0)
print str(rank) + ': ' + str(data) 
```

用 8 个进程运行上述代码效果很好。但是，当我使用 4 个进程运行它时，出现错误：

```
Traceback (most recent call last):
  File "scatter.py", line 11, in <module>
    data = comm.scatter(data, root=0)
  File "Comm.pyx", line 874, in mpi4py.MPI.Comm.scatter (src/mpi4py.MPI.c:68023)
  File "pickled.pxi", line 656, in mpi4py.MPI.PyMPI_scatter (src/mpi4py.MPI.c:32402)
  File "pickled.pxi", line 127, in mpi4py.MPI._p_Pickle.dumpv (src/mpi4py.MPI.c:26813)
ValueError: expecting 4 items, got 8 
```

这个错误是什么意思？我的意图是将我的 8 个项目的大数组分解为 8 / 4 = 2 个项目的小数组，并向每个进程发送一个这样的子数组。我怎么做？如果可能的话，我还想概括为不均匀分成 8 个的进程数，例如 3 个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T09:13:51.387

似乎`comm.scatter`不能`count`作为参数，并期望将精确`comm.size`元素列表作为数据分散；因此您需要自己在进程之间分配数据。这样的事情会做：

```
if rank == 0:
    data = [i for i in range(8)]
# dividing data into chunks
    chunks = [[] for _ in range(size)]
    for i, chunk in enumerate(data):
        chunks[i % size].append(chunk)
else:
    data = None
    chunks = None
data = comm.scatter(chunks, root=0)
print str(rank) + ': ' + str(data)

[physics@tornado] ~/utils> mpirun -np 3 ./mpi.py 
2: [2, 5]
0: [0, 3, 6]
1: [1, 4, 7] 
```

希望这可以帮助。

# ruby-on-rails-3 - 如何设计重设密码邮件定制？

> ID：12812428
> 
> 赞同：0
> 
> 时间：2012-10-10T05:21:03.487
> 
> 标签：ruby-on-rails-3, devise

我使用设计进行身份验证，用于重置密码，其发送电子邮件如下

你好呀，

```
if you would like to reset or if you have forgotten your password please click on the      following link: click_here

Thank you and happy bantering!
the swagata@gmail.com Regards 
```

我想要最后一行看起来像

```
regards 
the swagata@gmail.com 
```

请给我一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:27:33.670

您可以自定义设计视图。在您的项目目录中运行以下命令：

```
rails g devise:views 
```

`app/views/devise`这将在您的目录中复制设计视图（包括邮件模板） 。然后，您可以根据需要进行自定义。

# iphone - 如何使实例变量全局化

> ID：12812436
> 
> 赞同：-1
> 
> 时间：2012-10-10T05:22:09.063
> 
> 标签：iphone, objective-c, global-variables

我在我的应用程序委托中有一个实例变量我想在我的整个应用程序的每个类中使用它而不使用 NSUSERDEFAULT。我想使用 extern 数据类型但我没有得到任何东西如何声明 extern 变量以及如何使用请帮助 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:27:13.407

您可以在`Application Delegate`.

比您可以在任何地方访问该变量

```
//To set value
AppDelegate *yourAppdelegate = (AppDelegate *)[[UIApplication] sharedApplication]delegate];
yourAppdelegate.yourStringVariable = @"";

//To get value 
AppDelegate *yourAppdelegate = (AppDelegate *)[[UIApplication] sharedApplication]delegate];
NSString *accessValue = yourAppdelegate.yourStringVariable; 
```

**编辑**

假设你有`MyViewController`

//头文件

```
@interface MyViewController : UIViewController
{
     NSString *classLevelProperty;
}

@property (nonatomic, retain) NSString *classLevelProperty;

@end 
```

//实现文件

```
@implementation MyViewController

@synthesize classLevelProperty;

-(void)viewDidLoad
{
    AppDelegate *yourAppdelegate = (AppDelegate *)[[UIApplication] sharedApplication]delegate];
    classLevelProperty = yourAppdelegate.yourStringVariable;

     //Here above classLevelProperty is available through out the class. 
}
@end 
```

这可以在任何视图控制器中完成，并且 yourStringVariable 的属性值可用于任何视图控制器或任何其他类，如上面的代码。

希望这能清除。如果仍然无法正确获取，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:26:31.187

在第一个视图上实现一个属性并从第二个视图设置它。

这要求第二个视图具有对第一个视图的引用。

例子：

第一视图.h

```
@interface FirstView : UIView

{

    NSString *data;

}

@property (nonatomic,copy) NSString *data;
@end 
```

第一视图.m

```
@implementation FirstView

// implement standard retain getter/setter for data:

@synthesize data;

@end

SecondView.m

@implementation SecondView

- (void)someMethod

 {

    // if "myFirstView" is a reference to a FirstView object, then

    // access its "data" object like this:

    NSString *firstViewData = myFirstView.data;

}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:29:51.367

好吧，如果您想知道如何使用`extern`关键字，那么这就是如何使用它。 在您为其分配值的文件中`viewController.h`或`viewController.m`以上文件中声明了一个变量。`@interface`

像`viewController.h`这样——

```
#import <UIKit/UIKit.h>
int value = 5;

@interface ViewController : UIViewController{

} 
```

你也可以在`viewController.m`上面声明它`@implementation`

```
#import "ViewController.h"

int value = 5;

@implementation ViewController

@end 
```

然后使用`extern`要在哪个类中获取此变量的关键字。在`secondViewController.h`类中声明了一个像这样的变量 -

```
#import <UIKit/UIKit.h>

@interface SecondviewController : UIViewController{

}

extern int value;

@end 
```

现在`secondViewController.m`你会看到`value`包含`5`.

**有关** `extern` **关键字的更多详细信息，请参阅** [使用 extern 指定链接](http://msdn.microsoft.com/en-us/library/0603949d%28VS.80%29.aspx)

# selenium-ide - 关于 Selenium IDE 中的迭代

> ID：12812439
> 
> 赞同：2
> 
> 时间：2012-10-10T05:22:15.313
> 
> 标签：selenium-ide

我是 Selenium IDE 的新手/初学者，我正在 Web 应用程序上运行测试。我希望在文本框中输入用户名，让我说 100 次我怎么能做到这一点？我应该在源或值列中输入什么？

我想要的结果有点类似于

```
for (i=1;i<=100;i++)
{
   value = "user" + i ; 
} 
```

（但我不知道该怎么做......）

然后测试将循环 100 次，每次都会输入不同的用户名，如 User1 .... 第一次 User2 .... 第二次

任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:48:43.623

这种方法也应该可以使用[SelBlocks 扩展](https://addons.mozilla.org/en-US/firefox/addon/selenium-ide-sel-blocks/)。

```
for   | i=1; i <= 100; i++      |
type  | id=fieldname            |user ${i}
endFor|                         | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:52:58.350

您需要将参数化与循环一起使用，您可以参考

[Selenium IDE：如何传递变量](https://stackoverflow.com/questions/11588508/selenium-ide-how-to-pass-variables)

# html - 如何为我的网站使用 .woff 字体？

> ID：12812441
> 
> 赞同：117
> 
> 时间：2012-10-10T05:22:29.227
> 
> 标签：html, css, fonts, woff

你在哪里放置字体以便 CSS 可以访问它们？

我在 .woff 文件中为浏览器使用非标准字体。假设它的“awesome-font”存储在文件“awesome-font.woff”中。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-10-10T05:29:25.287

生成 woff 文件后，您必须定义 font-family，以后可以在所有 css 样式中使用它。下面是定义字体系列（普通、粗体、粗斜体、斜体）字体的代码。假设有 4 个 *.woff 文件（用于提到的字体），放置在`fonts`子目录中。

在 CSS 代码中：

```
@font-face {
    font-family: "myfont";
    src: url("fonts/awesome-font.woff") format('woff');
}

@font-face {
    font-family: "myfont";
    src: url("fonts/awesome-font-bold.woff") format('woff');
    font-weight: bold;
}

@font-face {
    font-family: "myfont";
    src: url("fonts/awesome-font-boldoblique.woff") format('woff');
    font-weight: bold;
    font-style: italic;
}

@font-face {
    font-family: "myfont";
    src: url("fonts/awesome-font-oblique.woff") format('woff');
    font-style: italic;
} 
```

有了这些定义之后，你可以写，例如，

在 HTML 代码中：

```
<div class="mydiv">
    <b>this will be written with awesome-font-bold.woff</b>
    <br/>
    <b><i>this will be written with awesome-font-boldoblique.woff</i></b>
    <br/>
    <i>this will be written with awesome-font-oblique.woff</i>
    <br/>
    this will be written with awesome-font.woff
</div> 
```

在 CSS 代码中：

```
.mydiv {
    font-family: myfont
} 
```

生成 woff 文件的好工具，可以包含在 CSS 样式表中，位于[此处](http://www.fontsquirrel.com/fontface/generator)。并非所有 woff 文件在最新的 Firefox 版本下都能正常工作，并且此生成器会生成“正确”的字体。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-10T05:29:55.643

您需要`@font-face`在样式表中这样声明

```
@font-face {
  font-family: 'Awesome-Font';
  font-style: normal;
  font-weight: 400;
  src: local('Awesome-Font'), local('Awesome-Font-Regular'), url(path/Awesome-Font.woff) format('woff');
} 
```

现在，如果您想将此字体应用于段落，只需像这样使用它..

```
p {
font-family: 'Awesome-Font', Arial;
} 
```

[**更多参考**](http://reference.sitepoint.com/css/at-fontface)

# c# - 在 C# 中，如何正确重载类中的 Equals 运算符以便 Queue.Contains() 工作？

> ID：12812453
> 
> 赞同：4
> 
> 时间：2012-10-10T05:23:50.853
> 
> 标签：c#, containers, overloading, equals

我创建了一个类状态。对于 State 对象的 Queue，我想测试 Queue 是否已经包含相等值的 State 对象。当数组的所有值都相等且顺序相同时，两个 State 对象（每个都包含一个 2D 布尔数组）是相等的。

这是我的相关代码：

```
public class State {
   Boolean[,] grid = new Boolean[4,4];

   Public State(Boolean[,] passedGrid){ //Constructor
       grid = Array.Copy(passedGrid, grid, 16);
   }

   public bool Equals(State s2){ //Overloaded equals operator
         for (int x = 0; x < 4; x++){
                 for (int y = 0; y < 4; y++){
                      if (grid[x, y] != s2.grid[x, y]){
                            return false;
                        }
                    }
                }
                return true;
            }

}

    public void testContains(Boolean[] testArray) {
        Queue<State> testQueue = new Queue<State>();
        State s1 = new State(testArray);
        State s2 = new State(testArray);
        testQueue.Enqueue(s1);
        Boolean b = testQueue.Contains(s2);
    } 
```

不幸的是，当调用 testContains() 并且我在最后检查 testQueue.Contains(s2) 的值时，它仍然说测试是错误的，即使它们具有相同的数组值并且 Equals 运算符被重载以进行测试。我必须做什么或改变才能让 Queue.Contains 与我的对象一起工作？我在某处读到，建议在 Equals 重载时重载 getHashCode() 。在这种情况下我需要这样做吗？如果是这样，重载的 getHashCode() 应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:32:01.457

要覆盖 Equals，您需要使用`object`as 参数类型和关键字`override`。

所以你可以尝试类似的东西

```
 public override bool Equals(object obj)
    {
        return Equals(obj as State);
    }
    public bool Equals(State s2)
    { //Overloaded equals operator 
        for (int x = 0; x < 4; x++)
        {
            for (int y = 0; y < 4; y++)
            {
                if (grid[x, y] != s2.grid[x, y])
                {
                    return false;
                }
            }
        }
        return true;
    } 
```

您可能还应该包括测试`null`

查看[重载 Equals() 和运算符 == 的指南（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:30:11.147

你应该`override` *等于*。

```
public override bool Equals(object s2)
{
    //implementation
} 
```

为了更好地实践，您应该实现一些其他接口，例如：`IEquatable` `IEqualtable<State>`和方法`GetHashCode`。override`Equals`方法和`Equals`in 中的方法`IEquatable` `IEqualtable<T>`可以共享一个公共的私有`Equals`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:30:39.620

您缺少覆盖关键字

```
 public override bool Equals(Object obj) {
       // fill in the body
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:32:04.793

您只需要覆盖类上定义的虚拟方法`Object`：

```
public override Equals(object other)
{
   if(other is State)
        return Equals((State)other); 
   return base.Equals(other);
} 
```

您需要使用此泛型重载，因为此方法由`Contains`方法使用，仅添加具有相同名称的实例方法是不够的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T05:33:11.670

请在下面找到适合您的代码：

```
 public class State : Object {
   Boolean[,] grid = new Boolean[4,4];

   public State(Boolean[,] passedGrid){ //Constructor
       Array.Copy(passedGrid, grid, 16);
   }

   public override bool Equals(Object s2){ //Overloaded equals operator
         for (int x = 0; x < 4; x++){
                 for (int y = 0; y < 4; y++){
                      if (grid[x, y] != ((State)s2).grid[x, y]){
                            return false;
                        }
                    }
                }
                return true;
            }

}

    class Program
    {
        Boolean[,] testArray = new Boolean[4, 4];

        public static void Main()
        {
            Program p = new Program();
            p.testContains(p.testArray);
        }

        public void testContains(Boolean[,] testArray)
        {
            Queue<State> testQueue = new Queue<State>();
            State s1 = new State(testArray);
            State s2 = new State(testArray);
            testQueue.Enqueue(s1);
            Boolean b = testQueue.Contains(s2);
            //b is true here
        }

    }
} 
```

另外，请查看以下链接以获取覆盖 Equals 方法的指南：

[http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T23:56:26.507

对于定义自定义相等关系的类类型，应适用以下内容：

1.  类应该是不可变的，并且不能封装可变状态。当且仅当此类引用仅用于封装此类对象的 *identities* 或其不可变属性时，不可变类持有对可变对象的引用是可以接受的。
2.  类必须重写 `bool Equals(Object Other)` 以便在 `Other` 是类的等价实例时返回 `true`（实例与其自身等价；对于可变类型，实例是*唯一*的东西这相当于它自己）。
3.  该类必须覆盖“int GetHashCode()”，这样任何两个等效实例都将返回相同的值，并且最好是两个任意选择的非等效实例不太可能返回相同的值。
4.  如果类是密封的，除了执行上述操作外，它还可以为自己的类型实现 `IEquatable`。未密封的类不应实现 `IEquatable`。

对于您的特定类，我建议由于只有 65,536 个可能的不同实例，您应该简单地存储一个`Integer`标识使用哪种位组合的 ，比较它 in `Equals`，然后将其返回为`GetHashCode`.

# unit-testing - Scala、Scalatest 和 Maven 入门

> ID：12812458
> 
> 赞同：9
> 
> 时间：2012-10-10T05:24:24.693
> 
> 标签：unit-testing, scala, maven, scalatest, scala-2.9

我使用以下内容创建了一个新的 scala 项目：

```
mvn org.apache.maven.plugins:maven-archetype-plugin:2.2:generate 
    -DarchetypeGroupId=org.scala-tools.archetypes 
    -DarchetypeArtifactId=scala-archetype-simple 
    -DarchetypeVersion=1.3 
    -DgroupId=myGroup 
    -DartifactId=myProject
    -Dversion=0.1.0 
    -DinteractiveMode=false 
```

这给了我以下POM：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <groupId>myGroup</groupId>
   <artifactId>myProject</artifactId>
   <version>0.1.0</version>
   <name>${project.artifactId}</name>
   <description>My wonderfull scala app</description>
   <inceptionYear>2010</inceptionYear>
   <licenses>
     <license>
       <name>My License</name>
       <url>http://....</url>
       <distribution>repo</distribution>
     </license>
   </licenses>

   <properties>
     <maven.compiler.source>1.5</maven.compiler.source>
     <maven.compiler.target>1.5</maven.compiler.target>
     <encoding>UTF-8</encoding>
     <scala.version>2.8.0</scala.version>
   </properties>

 <!--
   <repositories>
     <repository>
       <id>scala-tools.org</id>
       <name>Scala-Tools Maven2 Repository</name>
       <url>http://scala-tools.org/repo-releases</url>
     </repository>
   </repositories>

   <pluginRepositories>
     <pluginRepository>
       <id>scala-tools.org</id>
       <name>Scala-Tools Maven2 Repository</name>
       <url>http://scala-tools.org/repo-releases</url>
     </pluginRepository>
   </pluginRepositories>
 -->
   <dependencies>
     <dependency>
       <groupId>org.scala-lang</groupId>
       <artifactId>scala-library</artifactId>
       <version>${scala.version}</version>
     </dependency>

     <!-- Test -->
     <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <version>4.8.1</version>
       <scope>test</scope>
     </dependency>
     <dependency>
       <groupId>org.scala-tools.testing</groupId>
       <artifactId>specs_${scala.version}</artifactId>
       <version>1.6.5</version>
       <scope>test</scope>
     </dependency>
     <dependency>
       <groupId>org.scalatest</groupId>
       <artifactId>scalatest</artifactId>
       <version>1.2</version>
       <scope>test</scope>
     </dependency>
   </dependencies>

   <build>
     <sourceDirectory>src/main/scala</sourceDirectory>
     <testSourceDirectory>src/test/scala</testSourceDirectory>
     <plugins>
       <plugin>
         <groupId>org.scala-tools</groupId>
         <artifactId>maven-scala-plugin</artifactId>
         <version>2.15.0</version>
         <executions>
           <execution>
             <goals>
               <goal>compile</goal>
               <goal>testCompile</goal>
             </goals>
             <configuration>
               <args>
                 <arg>-make:transitive</arg>
                 <arg>-dependencyfile</arg>
                 <arg>${project.build.directory}/.scala_dependencies</arg>
               </args>
             </configuration>
           </execution>
         </executions>
       </plugin>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-surefire-plugin</artifactId>
         <version>2.6</version>
         <configuration>
           <useFile>false</useFile>
           <disableXmlReport>true</disableXmlReport>
           <!-- If you have classpath issue like NoDefClassError,... -->
           <!-- useManifestOnlyJar>false</useManifestOnlyJar -->
           <includes>
             <include>**/*Test.*</include>
             <include>**/*Suite.*</include>
           </includes>
         </configuration>
       </plugin>
     </plugins>
   </build>
 </project> 
```

我可以运行`mvn test`并且示例测试运行成功。我想使用最新版本的 scala（我下载/安装了 2.9.2...），但[org.scala-tools.testing scala_VERSION 依赖项的最新版本似乎是 2.9.1](http://mvnrepository.com/artifact/org.scala-tools.testing)。我在我的 POM 中进行了以下更改：

```
 <scala.version>2.9.1</scala.version> 
```

和

```
 <dependency>
       <groupId>org.scala-tools.testing</groupId>
       <artifactId>specs_${scala.version}</artifactId>
       <version>1.6.5</version>
       <scope>test</scope>
    </dependency> 
```

现在，跑步`mvn test`给

```
 -------------------------------------------------------
  T E S T S
 -------------------------------------------------------
 Running samples.ListSuite
 Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.674 sec <<< FAILURE!
 initializationError(samples.ListSuite)  Time elapsed: 0.003 sec  <<< ERROR!
 java.lang.ClassCastException: scala.collection.immutable.Set$EmptySet$ cannot be
  cast to scala.collection.generic.Addable
         at org.scalatest.FunSuite$class.test(FunSuite.scala:1039)
         at samples.ListSuite.test(scalatest.scala:59)
         at samples.ListSuite.<init>(scalatest.scala:61)
         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
         at java.lang.Class.newInstance0(Class.java:372)
         at java.lang.Class.newInstance(Class.java:325)
         at org.scalatest.junit.JUnitRunner.<init>(JUnitRunner.scala:62)
         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
         at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
         at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
         at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
         at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
         at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)
         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:120)
         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:103)
         at org.apache.maven.surefire.Surefire.run(Surefire.java:169)
         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
         at java.lang.reflect.Method.invoke(Method.java:601)
         at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)
         at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)

 Running samples.StackSuite
 Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.12 sec
 Running samples.AppTest
 Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec

 Results :

 Tests in error:
   initializationError(samples.ListSuite)

 Tests run: 4, Failures: 0, Errors: 1, Skipped: 0

 [INFO] ------------------------------------------------------------------------
 [INFO] BUILD FAILURE
 [INFO] ------------------------------------------------------------------------
 [INFO] Total time: 6.880s
 [INFO] Finished at: Wed Oct 10 01:10:56 ADT 2012
 [INFO] Final Memory: 9M/112M
 [INFO] ------------------------------------------------------------------------
 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.6:test (default-test) on project myProject: There are test failures.
 [ERROR]
 [ERROR] Please refer to C:\Dropbox\work\dev\scalasandbox\target\surefire-reports for the individual test results.
 [ERROR] -> [Help 1]
 [ERROR]
 [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
 [ERROR] Re-run Maven using the -X switch to enable full debug logging.
 [ERROR]
 [ERROR] For more information about the errors and possible solutions, please read the following articles:
 [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我大概有一些可能的最简单的测试（由 maven 原型插件创建的样本），并且通过单个次要版本碰撞 scala 会破坏它们？我应该坚持使用 scala 2.8 直到 maven 工具赶上来吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T07:08:55.120

您的工件已过时。

Scala 的最新版本是 2.10。目前 ScalaTest 分布在不同的 groupid 下，它支持最新版本的 Scala。这是依赖关系：

```
<dependency>
  <groupId>org.scalatest</groupId>
  <artifactId>scalatest_2.10</artifactId>
  <version>2.0.M5b</version>
  <scope>test</scope>
</dependency> 
```

您还需要一个不同的插件：

```
 <plugin>
    <groupId>net.alchim31.maven</groupId>
    <artifactId>scala-maven-plugin</artifactId>
    <version>3.1.0</version>
    <executions>
      <execution>
        <phase>compile</phase>
        <goals>
          <goal>compile</goal>
          <goal>testCompile</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

您不需要指定任何存储库，因为所有这些工件都与中央存储库一起分发。

[这是一个完整`pom`的项目示例，具体取决于 Scala 2.10](https://github.com/sorm/sorm/blob/0.3.7/pom.xml)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T07:12:45.633

使用[specs_2.9.1:1.6.9](http://search.maven.org/#artifactdetails%7Corg.scala-tools.testing%7Cspecs_2.9.1%7C1.6.9%7Cjar)

和[最新版本的插件](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22scala-maven-plugin%22)

```
<groupId>net.alchim31.maven</groupId>
<artifactId>scala-maven-plugin</artifactId>
<version>3.2.2</version> 
```

[不再支持旧的 scala maven 插件。](http://search.maven.org/#artifactdetails%7Cnet.alchim31.maven%7Cscala-maven-plugin%7C3.1.0%7Cmaven-plugin)

# php - PHP删除每个非字母数字字符

> ID：12812460
> 
> 赞同：0
> 
> 时间：2012-10-10T05:24:30.383
> 
> 标签：php, regex

我希望从字符串中删除所有字母数字字符并替换为空格（使用 PHP）。输入来自一个文本区域，该文本区域中粘贴了来自不同地方的数据，如 word、excel、网站、电子邮件等。

我正在使用这个正则表达式

```
/[^a-zA-Z0-9\s]/ 
```

但我发现仍然有`Vertical Tabs`（ascii #13）。我希望我的最终结果只包含字母和数字，没有换行符、制表符、垂直制表符等

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:29:53.643

垂直制表符由空白字符 ( `\s`)匹配

如果您想用空格替换每个非字母数字字符，请使用

```
preg_replace('/[^a-zA-Z0-9]/', ' ', $string) 
```

如果你想用一个空格替换非alnums的每组（连续字符），使用

```
preg_replace('/[^a-zA-Z0-9]+/', ' ', $string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:28:59.023

尝试删除 \s

```
/[^a-zA-Z0-9]/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:30:18.310

试试这个：

`/[^a-zA-Z0-9 ]/`

`\s`可能包括垂直标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:31:54.797

`\s`可能用于垂直空间。

所以只需删除它：

```
/[^a-zA-Z0-9]/ 
```

# wcf - 如何使用现有的 WSDL 文件以编程方式创建 WCF 服务？

> ID：12812462
> 
> 赞同：0
> 
> 时间：2012-10-10T05:24:52.087
> 
> 标签：wcf, wsdl

我有 WSDL 文件和 XSD 文件，需要以编程方式创建 WCF 服务。

以编程方式意味着不使用任何实用工具，例如 SvcUtil.exe。

我这里有什么问题..？？

1.  我在互联网上没有找到类似的东西。

2.  我知道如何使用 ChannelFactory 创建 WCF 服务，但我不知道如何在这种情况下使用现有的 WSDL 文件。

3.  有一些关于使用 IXmlSerializable 接口及其 GetSchema、ReadXml 和 WriteXml 方法的内容，但我不确定如何使用它。

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:03:52.320

SvcUtil.exe 不会做任何你自己在自己的代码中无法做到的“神奇”事情；它使用公共 WCF 类来处理 WSDL 和 XSD，您可以使用完全相同的类（例如，System.ServiceModel.Description.WsdlImporter），但不幸的是这并不容易。阅读[http://msdn.microsoft.com/en-us/library/ms731768.aspx](http://msdn.microsoft.com/en-us/library/ms731768.aspx)及其子主题作为起点。您还可以在 Reflector 中打开 SvcUtil.exe 本身来查看它的代码，看看它是如何做某些事情的。我认为还有一些“更好的 svcutil”的开源实现，你也可以看看他们的代码，不幸的是我现在不记得任何细节。

# javascript - 流星添加包不复制文件

> ID：12812465
> 
> 赞同：1
> 
> 时间：2012-10-10T05:25:06.613
> 
> 标签：javascript, node.js, meteor

我刚刚安装了流星。

但是，我正在尝试向我的应用程序添加一些包，但是当我运行流星添加主干时，它只是说：

```
backbone: A minimalist client-side MVC framework 
```

但是我的目录没有改变->没有添加新文件。

```
$ meteor --version
Meteor version 0.4.2 (19e42c4ec8) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:34:50.917

检查您的**{project-path}/.meteor/local/build/app/packages/**。您应该有一个在那里创建的主干目录（包含主干.js），可以使用。您不需要在 HTML 文件中链接脚本，在运行应用程序时尝试从客户端控制台调用 Backbone。

# facebook - 包括已弃用的 facebook 标头文件夹会给出错误

> ID：12812467
> 
> 赞同：5
> 
> 时间：2012-10-10T05:25:09.460
> 
> 标签：facebook, ios5, facebook-ios-sdk

我正在使用[这个](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)链接。但我真的被困在这里，我得到了 20 个重复和重新定义的错误。

当我将 facebookSDK/FacebookSDK.h 替换为 Facebook.h 时会发生这种情况。在此之前，如教程中所述，我包含来自 Facebook sdk 的文件夹“已​​弃用的标头”。

根据这个 Facebook 教程：

第 2 步：发送请求

要调用 Facebook 对话框，您必须引用 Facebook 已弃用的标头。可以在此处找到标头 ~Documents/FacebookSDK/FacebookSDK.framework/Versions/A/DeprecatedHeaders。拖动整个 DeprecatedHeaders 文件夹并取消选择“将项目复制到目标组的文件夹（如果需要）”选项以添加标题作为参考。

现在您可以进行所需的代码更改。在您的应用程序委托中导入 Facebook.h 头文件并替换 Facebook 框架导入声明：

```
#import "Facebook.h" 
```

这将允许您调用 FBDialog 类。Facebook.h 标头包括头文件。如果您对 Xcode 识别 Facebook.h 文件有任何问题，只需关闭并重新打开您的 Xcode 项目。

在应用程序委托头文件中，声明一个将保存 Facebook 实例的属性：

```
@property (strong, nonatomic) Facebook *facebook; 
```

在应用委托实现文件中，合成 Facebook 属性：

```
@synthesize facebook = _facebook; 
```

一旦我这样做..我得到错误并且无法编译。

请帮忙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T07:09:50.420

终于解决了。

我使用以下步骤删除了错误：

我在我的项目中到处都用#import "FBSession.h" 替换了#import "FacebookSDK/FacebookSDK.h"。和其他的东西我只在 Appdelegate.h 中使用了#import "facebook.h"。这为我解决了错误，我没有做任何额外的事情

希望这会帮助这里的人

# wcf - WCF 服务中 NetTcpBinding 的表单身份验证

> ID：12812471
> 
> 赞同：0
> 
> 时间：2012-10-10T05:25:35.207
> 
> 标签：wcf, exception, wcf-binding, nettcpbinding, form-authentication

我正在使用 WCF 服务，它有两个端点 WsHttpBinding 和 NetTcpBinding，并且该服务使用表单身份验证。服务托管在 IIS 7 上。

这与 WsHttpBinding 完美配合，但对 NetTcpBinding 失败。

它在以下声明中失败：

```
FormsAuthentication.SetAuthCookie("COOKIENAME", false); 
```

例外是：

```
Object reference not set to an instance of an object. 
```

请分享您对此的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:42:34.370

表单身份验证需要协议本身不支持的 cookie/会话。因此，无法在 WCF 服务的 NetTcpBinding 上实现 Forms 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T18:15:08.987

**选项1：**

[作为备选：](https://social.msdn.microsoft.com/Forums/vstudio/en-US/ef4fa9bb-5a33-4672-bbed-04ca82a41ded/wcf-security-using-forms-authentication)

*   添加对`System.IdentityModel`&`System.IdentityModel.Selectors`以及 WCF 程序集的引用。
*   在绑定上将安全模式设置为 Message
*   设置`Message.ClientCredentialType`为`MessageCredentialType.UserName`
*   创建一个派生自`UserNamePasswordValidator`并实现唯一方法的类型。如果用户名/密码对未通过验证，您应该抛出 SecurityTokenException。

在您的服务主机实例的 Credentials 属性上，设置：

*   `UserNameAuthentication.UserNamePasswordValidationMode`到`UserNamePasswordValidationMode.Custom`
*   `UserNameAuthentication.CustomUserNamePasswordValidator`到您的 -`UserNamePasswordValidator`派生类的新实例。
*   设置服务证书`ServiceCertificate.SetCertificate()`

至于客户端凭据对话框，您可以自己制作一个，也可以在您的代理集上制作一个`proxy.ClientCredentials.UserName.UserName`，`proxy.ClientCredentials.UserName.Password`然后再打开代理/第一次使用它。或者您可以查看如何实现`System.ServiceModel.Dispatcher.IInteractiveChannelInitializer`创建您自己的交互式初始化 UI。

**选项 2：**

[另一种选择](https://stackoverflow.com/questions/1087271/passing-formsauthentication-cookie-to-a-wcf-service)这听起来更像你想要做的.. 将[FormsAuthentication cookie 传递给 WCF 服务](https://stackoverflow.com/questions/1087271/passing-formsauthentication-cookie-to-a-wcf-service)

为什么我要为旧帖子提供答案 - 因为有人可能正在寻找答案。希望这可以帮助。

# asp.net-mvc - 新手 MVC 隐藏和显示内容的常用做法

> ID：12812481
> 
> 赞同：2
> 
> 时间：2012-10-10T05:26:35.863
> 
> 标签：asp.net-mvc, razor

我是一名长期的 WebForms 开发人员，但最终通过将我的一个需要更新的 WebForms 站点转换为 MVC3 来学习 MVC。

我从阅读中了解了 MVC 的基础知识，但在第一天就在现实世界中苦苦挣扎，可能很简单的事情，我也想知道如何最好地做到这一点和最佳实践。

对于这个答案，我不是在寻找代码（尽管可能会有所帮助），只是足够的信息让我走上正确的道路。我已经查看了很多示例和教程，但似乎没有一个显示与我的情况相关的内容，所以我在这里询问 SO。

因此，我正在处理的第一页是搜索结果页面。它比简单的搜索页面要复杂一些。如果它发现拼写错误的单词，它有一个建议区域，如果没有找到结果，它有一个区域，如果有的话，还有一个搜索结果本身的区域。

因为它搜索两个数据库表（实际上是视图），所以我有一个模型，它同时包含表模型和一个优先级字段，我用它来按最相关的方式对结果进行排序。模型是这样的：

```
public class SearchResult
{
    public Table1 { get; set; }
    public Table2 { get; set; }
    public int Priority { get; set; }
} 
```

在 WebForms 中，我使用面板来包含每个区域，因此我可以打开和关闭它们，如下所示：

```
<asp:Panel ID=”panSuggest” runast=”server” Visible=”false”&gt;
    …
</asp:Panel>
<asp:Panel ID=”panNoResults” runat=”server” Visible=”false”&gt;
    …
</asp:Panel>
<asp:Panel ID=”panResults” runat=”server”&gt;
    <asp:Repeater ID=”repResults” runat=”server”&gt;
        …
    </asp:Repeater>
</asp:Panel> 
```

在我目前的逻辑背后的 WebForms 代码中，我查看是否有任何拼写错误的作品，如果有，则显示 panSuggest 并隐藏所有其他面板。如果没有错误，那么我会根据需要隐藏 show panResults/panNoResults。

那么这种事情在MVC中通常是怎么做的呢？我是否在我的控制器中设置了一个 ViewBag 项目，是否应该显示我在视图中查找的 PanSuggest，然后选择基于此隐藏/显示，并检查我的模型是否有任何项目以确定是否应该显示 panResults/panNoResults . 类似于我下面的代码，或者这不是正确的方法吗？

```
@{ if (ViewBag.Suggest == true) {
    <div>
        Suggest
    </div>
} else {
    @{ if (Model.Count == 0) {
        <div>
            No Results
        </div>
 } else {
        <div>
            @foreach (var result in Model) {
                @result.Table1.Whatever etc etc
            }
        </div>
 }
} 
```

**更新。**

我一直在阅读更多内容，并且有很多建议可以避免使用 ViewBag。

那么我应该改变我的模型以包含我需要的额外数据吗？像这样的东西

```
Public class ViewModel
{
    public string Suggest { get; set; }
    public List<SearchResult> Result { get; set; }
}

public class SearchResult 
{ 
    public Table1 { get; set; } 
    public Table2 { get; set; } 
    public int Priority { get; set; } 
} 
```

然后在我看来，我可以检查 ViewModel.Suggest 是否不为空，并检查 ViewModel.Result 以查看是否存在任何项目（搜索结果）。

这是一个更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T06:47:35.240

如果我有 2 个不同的表需要显示，我也会这样做，我唯一要改变的是

```
@{
    if (ViewBag.Suggest == true) 
    {
        <div>
            Suggest
        </div>
    } else {
        <table>
            <thead>
                <th>Header column</th>
            </thead>
            <tbody>
            @{ if (Model != null && Model.Any()) {
                <tr>
                @foreach (var result in Model) 
                {
                    <td>
                        @result.Table1.Whatever etc etc
                    </td>
                }
                </tr>
            } else {
                <tr>
                    <td>
                        No Results
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:59:23.457

我的方法与您的方法基本相同。我的基本原理是将所有业务逻辑放入控制器中，并将一个简单的指示器传递给 ViewBag 中的视图，以指示用于显示数据的任何选项。通常这将是一个简单的布尔值，例如您的 ViewBag.Suggest 值。

# orientation - iOS 6 方向问题

> ID：12812484
> 
> 赞同：3
> 
> 时间：2012-10-10T05:26:40.473
> 
> 标签：orientation, ios6, uideviceorientation

我有一个应用程序，它通常是一个纵向应用程序，并且只显示一个 UIViewController 的横向视图。在新的 iOS 6 发布之前它工作正常。

我真的不明白方向在 iOS 6 中是如何工作的。所以我写了一个测试应用程序。这是我所做的：

*   设置应用程序的方向以支持所有方向。

![在此处输入图像描述](../Images/90553964a30d7b1b4e9d0649cf04ca52.png)

*   我正在使用故事板。rootViewController 嵌入在纵向的 UINavigationController 中。

![在此处输入图像描述](../Images/ac51419e0ba29eaa7ac1fd0dc773dd06.png)

*   rootViewController 中的代码：

    -（NSUInteger）支持的接口方向

    {

    返回 UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;

}

*   当我单击打开栏按钮时，我将推动另一个应该处于横向模式的 (SecondViewController) 视图控制器：

    -(NSUInteger)supportedInterfaceOrientations { 返回 UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight; }

尽管此方法被正确调用，但第二个视图控制器始终也处于纵向模式。

有人可以给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:49:16.733

这是我的解决方案：

在第二个视图控制器的 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIViewController *viewController = [[UIViewController alloc] init];
    [self presentViewController:viewController animated:NO completion:^{
        [viewController dismissViewControllerAnimated:NO completion:nil];
    }];
} 
```

这将迫使第二个视图旋转到横向，从而解决了我的问题。它适用于 iOS 5 和 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:25:48.937

对于 iOS-6，我已经这样做了。它运行良好

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    return UIInterfaceOrientationLandscapeLeft;} 
```

在第二个视图

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    return YES;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T07:40:15.040

我认为最好的解决方案是坚持苹果官方文档。因此，据我所知，我使用以下方法，并且在 iOS 5 和 6 上一切都运行良好。在您的所有 ViewControllers 中覆盖以下方法。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

iOS 6 的方法，第一个方法返回支持的方向掩码（如其名称所示），您可以将其更改为横向或最适合您的套件。

```
-(NSInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskPortrait; //UIInterfaceOrientationMaskPortrait or LandscapeLeft ... 
} 
```

第二个就是告诉您的 VC，当 VC 将要显示时，哪个是首选界面方向。

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait; //tells your VC in which orientation it should be presented, if you set Porttrait it would be in Portrait or otherwise ...
} 
```

这个解决方案运行顺利，我不喜欢创建宏和其他东西的想法，围绕这个简单的解决方案。希望这有助于...

# jquery - Jquery UI 1.9 打破 Asual 地址插件

> ID：12812486
> 
> 赞同：1
> 
> 时间：2012-10-10T05:26:54.350
> 
> 标签：jquery, jquery-ui

我使用 jQuery v1.8.2，我刚刚从 jQuery UI 1.8.17 更新到 1.9，并且来自[https://github.com/asual/jquery-address](https://github.com/asual/jquery-address)的地址插件不再起作用。

这就是我所拥有的

```
$.address.change(function(event) {
    $("#tabs").tabs("beforeActivate", window.location.hash)     
});
$("#tabs").bind("tabsactivate", function(event, ui) {
    window.location.hash = ui.tab.hash;
}); 
```

我在控制台日志上收到错误

```
Uncaught TypeError: Cannot read property 'hash' of undefined 
```

我似乎无法找到问题的根源。谁能帮我找出 jquery 1.9 的变化，因为我一直在阅读文档并且无法弄清楚如何修复（更新）它。

谢谢

编辑：我用 ui.newTab.hash 替换 ui.tabs.has ，现在它得到一个#undefined hash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:59:04.997

`<base>`在 1.9.0 中，当标签页中存在标签时，他们更改了标签的行为：

[http://bugs.jqueryui.com/ticket/8637](http://bugs.jqueryui.com/ticket/8637)

看起来他们认为这是一个功能，而不是一个错误：

[http://bugs.jqueryui.com/ticket/7822](http://bugs.jqueryui.com/ticket/7822)

但是，您可以尝试在页面中删除/添加`<base>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T09:18:13.563

由于不推荐使用 $.browser，它不起作用。 [https://github.com/asual/jquery-address/issues/166](https://github.com/asual/jquery-address/issues/166)

# jquery - 在 Bootstrap Form Builder 中预填充数据

> ID：12812488
> 
> 赞同：0
> 
> 时间：2012-10-10T05:27:10.857
> 
> 标签：jquery, html, twitter-bootstrap

这是一个不错的表单生成器。我只想知道如何在页面加载时显示表单数据。假设任何用户已经生成了一个表单并将数据保存到数据库中，下次如果用户想要编辑表单，那么应该预先填充表单的所有结构，以便用户可以进行更改并再次保存。

[http://bootstrap-forms.heroku.com/](http://bootstrap-forms.heroku.com/)

请提出你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:28:21.227

我能找到的最好的方法（我在自己的项目中做过）是大量修改脚本。当脚本生成代码时，它会从代码中删除所有表单构建器标签。您需要更改脚本，使其生成两个表单代码：

1.  可以从数据库中重新加载并再次编辑的代码
2.  实际上是功能性前端表单的代码

您需要更改的代码位于 formbuilder JS 文件中，或多或少围绕此构建：

```
var genSource = function(){
var $temptxt = $("<div>").html($("#build").html());
//scrubbbbbbb
$($temptxt).find(".component").attr({"title": null,
  "data-original-title":null,
  "data-type": null,
  "data-content": null,
  "rel": null,
  "trigger":null,
  "style": null});
$($temptxt).find(".valtype").attr("data-valtype", null).removeClass("valtype");
$($temptxt).find(".component").removeClass("component");
$($temptxt).find("form").attr({"id":  null, "style": null});
$("#source").val($temptxt.html().replace(/\n\ \ \ \ \ \ \ \ \ \ \ \ /g,"\n"));
} 
```

您需要重写它，以便它不会执行所有查找/替换/删除类，因为您需要保存该代码以使用适当的句柄重新加载所有项目，以便表单构建器附加到。

可能可以像我一样做，只是在彻底清除之前将 var $temptxt 保存到数据库中。

# azure - 如何使用 REST Api 在 Windows azure 中列出管理证书

> ID：12812491
> 
> 赞同：4
> 
> 时间：2012-10-10T05:27:28.967
> 
> 标签：azure

我想在 Windows azure 订阅中列出所有管理证书。我尝试使用以下代码。但这给了我一个例外。我可以发现它`response`是 null 并且异常消息是`"The remote server returned an error: (403) Forbidden."`

请帮我解决一下这个。[Msdn](http://msdn.microsoft.com/en-us/library/windowsazure/jj154105.aspx)没有为此提供示例:(

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Security.Cryptography.X509Certificates;
using System.Xml;
using System.Xml.Linq;

class ManagemenCertificateViewer
{
    public static void Runme()
    {
        string msVersion = "2012-03-01";
        string subscriptionId = "I used the subscription Id here";
        try
        {
            ListManagementCertificates(subscriptionId, msVersion);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Exception caught: ");
            Console.WriteLine(ex.Message);
        }
    }

    private static void ListManagementCertificates(string subscriptionId, string version)
    {
        string uriFormat = "https://management.core.windows.net/{0}/certificates";
        Uri uri = new Uri(string.Format(uriFormat, subscriptionId));

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
        request.Method = "GET";
        request.Headers.Add("x-ms-version", version);
        request.ContentType = "application/xml";

        XDocument responseBody = null;
        HttpStatusCode statusCode;
        HttpWebResponse response;
        try
        {
            response = (HttpWebResponse)request.GetResponse();
        }
        catch (WebException ex)
        {
            // GetResponse throws a WebException for 400 and 500 status codes
            response = (HttpWebResponse)ex.Response;
        }
        statusCode = response.StatusCode;
        if (response.ContentLength > 0)
        {
            using (XmlReader reader = XmlReader.Create(response.GetResponseStream()))
            {
                responseBody = XDocument.Load(reader);
            }
        }
        response.Close();
        if (statusCode.Equals(HttpStatusCode.OK))
        {
            XNamespace wa = "http://schemas.microsoft.com/windowsazure";
            XElement storageServices = responseBody.Element(wa + "SubscriptionCertificates");
            int mngmntCertificateCount = 0;
            foreach (XElement storageService in storageServices.Elements(wa + "SubscriptionCertificate"))
            {
                string publicKey = storageService.Element(wa + "SubscriptionCertificatePublicKey").Value;
                string thumbprint = storageService.Element(wa + "SubscriptionCertificateThumbprint").Value;
                string certificateData = storageService.Element(wa + "SubscriptionCertificateData").Value;
                string timeCreated = storageService.Element(wa + "TimeCreated").Value;
                Console.WriteLine(
                    "Certificate[{0}]{1}  SubscriptionCertificatePublicKey: {2}{1}  SubscriptionCertificateThumbprint: {3}{1} certificateData{4}{1} timeCreated{5}{1}",
                    mngmntCertificateCount++, Environment.NewLine, publicKey, thumbprint, certificateData, timeCreated);
            }
        }
        else
        {
            Console.WriteLine("List Management certificates returned an error:");
            Console.WriteLine("Status Code: {0} ({1}):{2}{3}",
                (int)statusCode, statusCode, Environment.NewLine,
                responseBody.ToString(SaveOptions.OmitDuplicateNamespaces));
        }
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T07:33:37.583

谢谢它按我的预期工作。我只是添加以下行和方法'GetCertificate（arg1）'

```
request.ClientCertificates.Add(GetCertificate(certThumbprint)); 
```

还有一件事，在[Msdn](http://msdn.microsoft.com/en-us/library/windowsazure/jj154105.aspx)帮助指南中，响应正文中有一个标签，称为

```
<TimeCreated>time-created</TimeCreated> 
```

但是 api 不会响应它刚刚创建的 TimeCreated。

```
<Created> ..... </Created> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:34:34.687

403 错误表示用于验证服务管理 API 请求的管理证书有问题。我没有看到您在代码中附上管理证书以及您的请求。您可能会发现此链接对验证服务管理 API 请求很有用：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460782](http://msdn.microsoft.com/en-us/library/windowsazure/ee460782)。

HTH。

# mongodb - MongoDB v/s Redis

> ID：12812502
> 
> 赞同：5
> 
> 时间：2012-10-10T05:29:04.670
> 
> 标签：mongodb, redis

主要要求：

1.  集群和复制支持，因此在云中部署简单且成本低。
2.  直接支持对象。从等式中取出 ORM。
3.  Python 客户端。
4.  阅读重度和中度写入。
5.  需要适中的速度，但不像股票交易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T05:29:04.670

基于这篇文章

[http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

我最终将我的数据库选择深入到[Redis](http://redis.io/)和[MongoDB](http://www.mongodb.org/)，因为它们似乎满足了大多数要求。我将解释我是如何选择最适合我的要求的。

1.  集群和复制支持——Redis 几乎不支持集群或复制。因此，您的内存与您的数据成比例增长。由于我们使用的是基于云的基础架构 - 支持这种内存的成本可能很高。另一方面，MongoDB 支持复制和集群。Redis 0 MongoDB 1。
2.  直接支持对象 - 无 ORM：显然 Redis 是赢家，因为它支持类似 memcached 的模型。但是，MongoDB 还提供了“对象类存储”和对 JSON 的直接支持。因此，如果我可以牺牲速度要求，MongoDB 确实可以满足这一需求。Redis 1 MongoDB 1。
3.  Python 客户端 - 两个数据库都有强大的 Python 客户端。Redis 1 MongoDb 1。
4.  读取重度和中度写入 - 我认为这两个数据库的读取性能没有明显差异。但是，只有经验会说。暂时——我给两者的分数是一样的。Redis 1 MongoDB 1。
5.  不需要像速度这样的股票交易——显然 MongoDB 在这方面有优势。Redis 0 MongoDB 1。

总分：Redis 3 MongoDB 5。

现在我将使用 MongoDB。作为额外的奖励，MongoDB 还具有地理空间查询支持。因此，如果出于某种原因我必须向我的应用程序添加基于位置的查询，那么使用 MongoDB 进行这种转换应该不难。让我们看看情况如何。我希望有一天能回来并重新审视这个答案:)。请随时添加我错过的任何内容。

# c# - 使用 C# 比较和删除数据表行：

> ID：12812507
> 
> 赞同：4
> 
> 时间：2012-10-10T05:29:23.473
> 
> 标签：c#, asp.net, visual-studio-2010, linq, datatable

我有两个表，例如 DTTable1 和 DTTable2。它有以下记录。

DTTable1：

```
 ItemID     Specification    Amount
   ---------  ---------------  ---------
      1             A             10
      1             B             20
      1             C             30 
```

DTTable1：

```
 ItemID     Specification    Amount
   ---------  ---------------  ---------
      1             A             10
      1             B             20
      1             C             30
      2             A             10
      2             B             20
      3             A             10
      3             B             20 
```

在这里，我想比较这两个表。如果 DTTable2 中存在 DTTable1 记录（仅考虑 ItemID），则删除 ItemID 与 DTTable1 相同的相应行。

我试过foreach和forloop。使用 ForEach：

```
 foreach (DataRow DR in DTTable2.Rows)
   {
      if (DR["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
      {
           DTTable2.Rows.Remove(DR);                            
      }
   }
   DTTable2.AcceptChanges(); 
```

它显示错误，“集合已修改；枚举操作可能无法执行”。所以我使用了 For 循环，它也没有给出想要的结果。

使用 For 循环：

```
 for (int i = 0; i < DTTable2.Rows.Count; i++)
   {
       if (DTTable2.Rows[i]["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
       {
           DTTable2.Rows.RemoveAt(i);
       }
   }
   DTTable2.AcceptChanges(); 
```

但有时，第二行不会从表中删除。我得到最终的 DataTable 为

```
 ItemID     Specification    Amount
   ---------  ---------------  ---------
      1             B             20
      2             A             10
      2             B             20
      3             A             10
      3             B             20 
```

如何解决这个问题？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:36:27.720

枚举时不能修改集合，就像在第一个示例中一样。相反，您应该获取要删除的行列表，然后将其删除。

```
List<DataRow> rowsToDelete = new List<DataRow>();
foreach (DataRow DR in DTTable2.Rows)
{
    if (DR["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
        rowsToDelete.Add(DR);           
}

foreach (var r in rowsToDelete)
    DTTable2.Rows.Remove(r); 
```

或者，使用 linq 内联：

```
DTTable2.Rows
    .Where(DR => DR["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
    .ToList()
    .ForEach(r => DTTable2.Rows.Remove(r)); 
```

* * *

您的第二个示例失败，因为一旦删除了一行，后续行的索引就会更改，但您会继续 increment `i`，这实际上会跳过紧跟已删除行的行。有两种方法可以解决这个问题：

```
for (int i = DTTable2.Rows.Count - 1; i >= 0; i--)
    if (DTTable2.Rows[i]["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
        DTTable2.Rows.RemoveAt(i); 
```

或者

```
int i = 0;
while (i < DTTable2.Rows.Count)
{
    if (DTTable2.Rows[i]["ItemID"].ToString() == DTTable1.Rows[0]["ItemID"].ToString())
        DTTable2.Rows.RemoveAt(i);
    else
        i++;
} 
```

* * *

旁注：根据您的描述，我想知道您是否真的要始终与*第 0 行的*数据进行比较。也许您的意思是比较所有行，如下所示（尽管根本不是最佳的）？

```
if (DTTable1.Any(r => DTTable2.Rows[i]["ItemID"].ToString() == r["ItemID"].ToString())) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T05:36:12.657

尝试使用：

```
var list = DTTable2.Rows.ToList();//create new list of rows
foreach (DataRow DR in list)
{
    //if bla bla bla
    DTTable2.Rows.Remove(DR);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T05:45:37.310

您可以使用*LINQ to DataTable*：

```
var result =  DTTable1.AsEnumerable()
                   .Where(row => !DTTable2.AsEnumerable()
                                         .Select(r => r.Field<int>("ItemID"))
                                         .Any(x => x == row.Field<int>("ItemID"))
                  ).CopyToDataTable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-18T02:53:18.933

好吧，伙计们。我的情况几乎相同，无论我如何尝试，我一直遇到问题。我的解决方案是根本不尝试遍历 DataTable。我从第一个 DataTable 中创建了一个数组（其中包含需要从第二个 DataTable 中删除的行）。遍历 Array 并使用**select**删除 DataTable 中匹配的行。由于它不是一个循环，并且它可以匹配 DataTable 中的任何行，所以我不再遇到错误。

注意：原始 DataTable 是一个 1 列表，其中包含您尝试按行从第二个 DataTable 中删除的内容（不管它有多少列）。将“LinkName=”替换为 1 列表的列名。

```
 public DataTable RemoveDuplicateRows(DataTable OriginalLinks, DataTable UpdatedLinks) // OriginalLinks is a 1-col dt to delete from new dt
    {

        ArrayList arrOriginalLinks = new ArrayList();

        if (OriginalLinks.Rows.Count > 0)
        {

            foreach (DataRow dr in OriginalLinks.Rows)
            {
                arrOriginalLinks.Add(dr["LinkName"]);
            }
        }

        if (OriginalLinks.Rows.Count == 0)
        {
            // do nothing
        }
        else
        {
            for (int i = OriginalLinks.Rows.Count - 1; i >= 0; i--)
            {
                string filter = "LinkName='" + arrOriginalLinks[i].ToString() + "'";

                UpdatedLinks.Select(filter).ToList().ForEach(r => r.Delete());

            }

        }

        return UpdatedLinks;

    } 
```

这将返回第二个 DataTable，其中仅剩下与第一个 DataTable 中的值不匹配的行。

# iphone - Bonjour 数据发送多个设备

> ID：12812509
> 
> 赞同：1
> 
> 时间：2012-10-10T05:29:28.280
> 
> 标签：iphone, ios, ipad, gamekit, bonjour

Bonjour 是否允许一台 iOS 设备同时向多台 iOS 设备发送数据或图像？

```
I am able to detect number of iOS devices over a wifi network. But the problem is coming in sending data or image to more than 1 iOS device at the same time. 
```

我应该为上述问题选择gamekit蓝牙方法吗？将不胜感激该问题的示例代码，并随时欢迎帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:37:47.147

是的，我认为你应该使用蓝牙来做你问题中提到的事情。

以下是一些示例。请看一看：-

[http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/](http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/)

[http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/](http://mobile.tutsplus.com/tutorials/iphone/bluetooth-connectivity-with-gamekit/)

可能对你有帮助，谢谢！

# iphone - UIPickerview 多个文本字段 Xcode

> ID：12812510
> 
> 赞同：2
> 
> 时间：2012-10-10T05:29:29.543
> 
> 标签：iphone, objective-c, xcode, uipickerview

我正在寻找一种将单个 UIPickerview 用于两个不同文本字段的方法。我希望在选择每个文本字段时弹出选择器视图。用户选择他们的项目后，该项目将填充特定的文本字段。选择器必须根据所选的文本字段进行填充。

我读过这篇文章：

[如何在一个视图中将一个 UIPickerView 用于多个文本字段？](https://stackoverflow.com/questions/11612460/how-to-use-one-uipickerview-for-multiple-textfields-in-one-view)

还有这个：

[如何使用 UIPickerView 在一个视图中填充不同的文本字段？](https://stackoverflow.com/questions/11593958/how-to-use-uipickerview-to-populate-different-textfields-in-one-view)

这：

[文本字段编辑中 UIPickerView 的多个来源](https://stackoverflow.com/questions/4324510/multiple-sources-for-uipickerview-on-textfield-editing/11633136#11633136)

但是，没有一个给出完整的解决方案。

我是 Xcode 的新手，所以我想要一个包含设置情节提要的步骤的解决方案。

我很感激任何帮助，因为我已经研究了几周。

编辑：这是我的代码：

```
.h:
#import <UIKit/UIKit.h>

@interface klViewController : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource> {

IBOutlet UITextField *textField1;
IBOutlet UITextField *textField2;
NSMutableArray *pickerArray1;
NSMutableArray *pickerArray2;
UIPickerView *pickerView;
}
@property(nonatomic,retain) IBOutlet UITextField *textField1;
@property(nonatomic,retain) IBOutlet UITextField *textField2;
@property(nonatomic,retain) IBOutlet UIPickerView *pickerView;

@end

.m:
#import "klViewController.h"

@interface klViewController ()

@end

@implementation klViewController
@synthesize pickerView;
@synthesize textField1;
@synthesize textField2;
int variabla;

-(void)textFieldDidBeginEditing:(UITextField *)textField{
    [pickerView setHidden:YES];
    if (textField1.editing == YES) {
        [textField1 resignFirstResponder];
        [pickerView setHidden:NO];
        variabla = 1;
    }else if (textField2.editing == YES) {
        [textField2 resignFirstResponder];
        [pickerView setHidden:NO];
        variabla = 2;
    }
    NSLog(@"variabla %d",variabla);
    [pickerView reloadAllComponents];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    if (variabla == 1) {
        return [pickerArray1 count];
    }else if (variabla == 2) {
        return [pickerArray2 count];
    }else {
        return 0;
    }
}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    if (variabla == 1) {
        return [pickerArray1 objectAtIndex:row];
    }else if (variabla == 2) {
        return [pickerArray2 objectAtIndex:row];
    }else {
        return 0;
    }
}
- (void)textFieldShouldReturn:(UITextField *)textField{
    [textField resignFirstResponder];
}
- (void)viewDidLoad {
    [super viewDidLoad];
    [pickerView setHidden:YES];
    pickerArray1 = [[NSMutableArray alloc] initWithObjects:@"0", @"1", @"2", nil];
    pickerArray2 = [[NSMutableArray alloc] initWithObjects:@"3", @"4", @"5", nil];
}

@end 
```

这是我的故事板的屏幕截图：

![我的故事板的屏幕截图](../Images/6506e985090700103e11ec2aaa41632b.png)

状态更新：

当我运行程序时：
1）pickerview 是隐藏的。
2）当我选择一个文本字段时，选择器视图会出现并根据所选的文本字段正确填充。

问题：
1) 在文本字段外单击时选择器不会消失。
2）选择选择器中的行时不会填充文本字段。

希望这能提供更多的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:08:45.637

> 1) 在文本字段外单击时，选择器不会消失。

当发生这种情况时，您没有任何代码试图让选择器消失。尝试在视图中添加一个简单的点击手势识别器。添加一行`viewDidLoad`喜欢：

```
[self.view addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(backgroundTap:)]]; 
```

然后简单地实现该功能：

```
-(void)backgroundTap:(UITapGestureRecognizer *)tapGR{
    self.pickerView.hidden = YES;
    // And maybe..
    variabla = 0;
} 
```

由于您使用 hidden 属性使选择器出现和消失，这将非常简单。还有其他更复杂的方法可以做到这一点，我希望你能探索一下。通常选择器设置为文本字段的`inputView`属性；这是值得研究的。

> 2）选择选择器中的行时不会填充文本字段。

您还没有处理选择器的`pickerView:didSelectRow:inComponent:`委托方法。That's the method that gets called when the picker stops turning and lands on an item. 不要假设这是用户选择的项目，它将被多次调用。

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    NSString *text = [self pickerView:pickerView titleForRow:row forComponent:component];
    UITextField *current = nil;
    if (variabla == 1) current = self.textField1;
    else if (variabla == 2) current = self.textField2;
    current.text = text;
} 
```

这应该让你的实现工作。另一件事是实例变量，应该在紧跟or行`variabla`之后用大括号声明。`@interface``@implementation`

```
@implementation klViewController {
    int variabla;
}
@synt.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T13:14:16.710

给出两个不同文本字段的标签，以识别您选择的文本字段，一切正常，您只需要更改以下方法。希望这项工作

```
-(void)textFieldDidBeginEditing:(UITextField *)textField  {

if ([textField viewWithTag:100]) {

    [textField resignFirstResponder];
    [self.View1 setHidden:NO];
    variable=1;
} 
```

否则 if ([textField viewWithTag:101]) {

```
 [textField resignFirstResponder];
    [self.View1 setHidden:NO];
     variable=2;

}

    [_Picker_view reloadAllComponents]; 
```

}

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:59:00.523

在.h

```
@interface TQViewController : UIViewController<UIPickerViewDelegate>
{
    UITextField *textfield;
    UIPickerView *Picker1;
    NSArray *Array1,*Array2;
}
end 
```

在.m

```
 - (void)viewDidLoad
    {

        [super viewDidLoad];

        //TextField
        textfield=[[UITextField alloc]initWithFrame:CGRectMake(5,5,310,40)];
        textfield.borderStyle = UITextBorderStyleRoundedRect;
        textfield.backgroundColor=[UIColor whiteColor];
        textfield.textAlignment = UITextAlignmentCenter;
        textfield.placeholder = @"<enter amount>";
        [self.view addSubview:textfield];
textfield1=[[UITextField alloc]initWithFrame:CGRectMake(5,100,310,40)];
        textfield1.borderStyle = UITextBorderStyleRoundedRect;
        textfield1.backgroundColor=[UIColor whiteColor];
        textfield1.textAlignment = UITextAlignmentCenter;
        textfield1.placeholder = @"<enter amount>";
        [self.view addSubview:textfield1];

        // PickerView1
        Array1=[[NSArray alloc]initWithObjects:@"USD",@"INR",@"EUR", nil];
        Picker1=[[UIPickerView alloc]initWithFrame:CGRectMake(0, 50, 320,10)];
        Picker1.delegate=self;
        Picker1.tag=PICKER1_TAG;
        Picker1.showsSelectionIndicator=YES;
        [self.view addSubview:Picker1];
     Array2=[[NSArray alloc]initWithObjects:@"USD",@"INR",@"EUR", nil];
    }
       -(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
        {
           if([textfield becomeFirstResponder])
            return [Array1 count];
           if([textfield1 becomeFirstResponder])
            return [Array2 count];
        }
        - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
          NSString *title;
            if([textfield becomeFirstResponder])
            {
                title=[Array1 objectAtIndex:row];  
                return title; 
            }
            ([textfield1 becomeFirstResponder])
            {
                title=[Array2 objectAtIndex:row];  
                return title; 

            }       
        }

        - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
        {

if([textfield becomeFirstResponder])
            {
                //your code 
            }
            ([textfield1 becomeFirstResponder])
            {
                //your code  

            } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T07:59:40.437

1.  确保您已在头文件中声明了 Picker View 对象。
2.  在头文件中，导入 UITextFieldDelegate 协议：

    @interface MyView:UIViewController < UITextFieldDelegate>

3.  在 IB 中，为您拥有的每个文本字段设置一个标签。

4.  在 *.m 文件中，实现 textFieldShouldBeginEditing 方法，更新 PickerView 数组 Data Source 并重新加载所有选取器视图组件。

    ```
     -(BOOL) textFieldShouldBeginEditing:(UITextField *)textField {

       if (textField.tag == 1) {

       itemsArray = [[NSArray alloc] arrayWithObjects:@"A", @"B"];

       }

       if (textField.tag == 2) {

           itemsArray = [[NSArray alloc] arrayWithObjects:@"Green", @"Yellow"];
       }

       [myPickerView reloadAllComponents];
       } 
    ```

5.  确保在头文件中导入 UIPickerViewDelegate 和 UIPickerViewDataSource。

您可以根据需要对尽可能多的文本字段使用相同的选择器视图，根据所选文本字段更改选择器视图的内容，您需要在文本字段被替换时将选择器视图的数据源替换为不同的项目选择然后重新加载选择器视图组件。

好吧，我的朋友，在这里解释起来恐怕有点复杂。您可以在 IB 属性菜单中设置对象的标记值。将 PickerView 拖入视图并选中后，您可以在“对象属性”菜单（侧面）中更改标记属性。我认为您应该寻找将向您展示如何设置简单的选择器视图或表格视图（它们的工作方式非常相似）的教程，这将为您提供有关如何做您想做的事情的更多信息。简而言之，每个 Picker 视图都从数据源获取信息，您可以创建一个包含一些字符串的数组，并让picker 视图将数组中的每个项目作为一行加载。我有一个包含一些初学者信息的小网站，请查看。
**[http://i-tutor.weebly.com/index.html](http://i-tutor.weebly.com/index.html)**

# highcharts - Highchart 时区

> ID：12812511
> 
> 赞同：3
> 
> 时间：2012-10-10T05:29:37.090
> 
> 标签：highcharts, timezone

我们试图在不同的区域显示时间。我们设置了 utc = false 并从服务器将其转换为特定时区。例如，从系统时间到 EST。我们能够正确地看到警报，但是在渲染图表时，它完全显示了不同的时间。谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T09:15:22.750

您可以通过以下方式在高图中禁用 UTC 时区：

```
 Highcharts.setOptions({
    global: {
        useUTC: false
    }
}); 
```

然后准备自己的计算。但是您需要知道它取决于您的时区概念，因为 javascript 对此有限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T03:53:23.460

好的，当我开始研究 Highcharts 时，我最初就经历过这个。您唯一的选择是正确设置 useUTC 字段。

我的建议是将时间转换为 UTC 并以毫秒为单位发送值并使用“useUTC:false”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:24:43.253

高图表仅支持 UTC 或浏览器的时区。您不能在 highcharts 中给出自己的时区。这是一个限制。您将不得不以某种方式解决该限制。

# c - gcc 编译器在编译时在哪里查找头文件？

> ID：12812518
> 
> 赞同：1
> 
> 时间：2012-10-10T05:30:05.940
> 
> 标签：c, unix

使用 gcc 编译 C 文件时出现错误 - 由于没有为 dce/rpc.h 找到此类文件/目录，因此出错。我应该在哪里寻找它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T06:03:31.477

此命令打印包含路径：

```
gcc -xc -v - 
```

在我的 linux 框中，结果如下：

```
#include <...> search starts here:
 /usr/local/include
 /usr/lib/gcc/i586-redhat-linux/4.4.1/include
 /usr/include
End of search list. 
```

使用跨 gcc，路径可能很难查询：

```
#include <...> search starts here:
 /opt/OSELAS.Toolchain-2011.11.0/arm-v5te-linux-gnueabi/gcc-4.6.2-glibc-2.14.1-binutils-2.21.1a-kernel-2.6.39-sanitized/lib/gcc/arm-v5te-linux-gnueabi/4.6.2/include
 /opt/OSELAS.Toolchain-2011.11.0/arm-v5te-linux-gnueabi/gcc-4.6.2-glibc-2.14.1-binutils-2.21.1a-kernel-2.6.39-sanitized/lib/gcc/arm-v5te-linux-gnueabi/4.6.2/include-fixed
 /opt/OSELAS.Toolchain-2011.11.0/arm-v5te-linux-gnueabi/gcc-4.6.2-glibc-2.14.1-binutils-2.21.1a-kernel-2.6.39-sanitized/lib/gcc/arm-v5te-linux-gnueabi/4.6.2/../../../../arm-v5te-linux-gnueabi/include
 /opt/OSELAS.Toolchain-2011.11.0/arm-v5te-linux-gnueabi/gcc-4.6.2-glibc-2.14.1-binutils-2.21.1a-kernel-2.6.39-sanitized/sysroot-arm-v5te-linux-gnueabi/usr/include
End of search list 
```

所以不要试图去问`find`它，你可能会走错路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:57:02.317

You can find out which directories gcc will search in for include files by default, by running the preprocessor (cpp) with the -v option. You also should specify which language you're interested in, unless it's C, since each language has its own search path.

Here's an example:

```
cpp -v -x c++ < /dev/null 
```

Note that you have to specify that there is no file to preprocess; otherwise, it will try reading from stdin.

The above shows the default include path for c++.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:35:26.963

从那里开始`/usr/include`并从那里开始工作，假设它是一个系统头文件。大多数系统头文件都存储在 UNIX/Linux 系统下。

如果它不是系统标头，它将位于您（或其他第三方）放置它的任何位置（实际上可能在任何地方）。如果你想找到它，你可以做类似（for `xyzzy.h`）的事情：

```
find / -name xyzzy.h 2>/dev/null 
```

如果您*找不到*您期望的标题，那么它可能没有安装在您的系统上。你需要弄清楚如何做到这一点。例如，The Open Group 有一个可以在 Linux 下使用的[LGPL 风格的 DCE 实现。](http://www.opengroup.org/dce/)

根据您的平台（AIX、HP-UX、Solaris 等），安装软件包可能很简单。

# android - 如何将自定义适配器和自定义布局集成到 ListFragment 中？

> ID：12812519
> 
> 赞同：0
> 
> 时间：2012-10-10T05:30:06.190
> 
> 标签：android, adapter, android-listfragment

我是 Android 新手，我有一个 ListFragment 可以成功显示列表中的项目（仅文本）。

```
//More.class

public class More extends ListFragment{

private ListView mListView;
String android_versions[] = new String[]{"1","2","3","4",};

@Override
public void onActivityCreated(Bundle savedInstanceState) { 

    ArrayAdapter<String> mAdapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_1, android_versions);
    mListView.setAdapter(mAdapter);
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.more_listview, container, false);
    mListView = (ListView)view.findViewById(android.R.id.list);
    return view;
    }
} 
```

这是我的适配器类

```
//ImageAdapter.class

public class ImageAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public ImageAdapter(Context context, String[] values) {super(context, R.layout.more_item, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.more_item, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println(s);

        if (s.equals("About App")) {
            imageView.setImageResource(R.drawable.more_about);
        } else if (s.equals("Tools Tutorial")) {
            imageView.setImageResource(R.drawable.more_about);
        } else if (s.equals("EnfaMama A+ Club")) {
            imageView.setImageResource(R.drawable.more_app);
        } else if (s.equals("App Technical Contact")) {
            imageView.setImageResource(R.drawable.more_app);
         }

        return rowView;
    }
} 
```

这是我对文本和图像的设置

```
//more_item.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<ImageView
    android:id="@+id/icon"
    android:contentDescription="@string/image"
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:padding="10dp"
    android:src="@drawable/tool_settings" >
</ImageView>

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@+id/label"
    android:textSize="20dp"
    android:textStyle="bold" /></LinearLayout> 
```

我想在这里实现两件事。

1）我有一个包含图像和文本的自定义适配器，我想使用这个适配器。我如何将它集成到 More.class 中？

*   我试过

`ImageAdapter = new ImageAdapter(this, android_versions);`

但我得到未定义的构造函数。

2）如果我错了，请纠正我，因为我了解 android.R.layout.simple_list_item_1 是默认的 android 列表，我想使用我自己的自定义布局，即 R.layout.more_item。

*   我尝试用 R.layout.more_item 替换 R.layout.simple_list_item_1 但我的应用程序崩溃了。

我该怎么办？我做错什么了？

这是我的第一篇文章，如果我问了一个愚蠢的问题，我深表歉意。我希望我足够清楚，让你明白我想要什么。我对Android的了解很少，所以我希望有人可以在这里指导我如何做。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:50:38.450

> ImageAdapter = new ImageAdapter(this, android_versions);
> 
> 但我得到未定义的构造函数。

您需要使用`getActivity()`而不是`this`，因为您在片段内（不在活动中）

```
I tried replacing R.layout.simple_list_item_1 with R.layout.more_item but my application crash. 
```

您不能直接将自定义布局与默认 ArrayAdapter 一起使用。如果发生崩溃`ImageAdapter`，请发布该崩溃日志。

试试这样

```
ImageAdapter mAdapter = new ImageAdapter(getActivity(), android_versions);
mListView.setAdapter(mAdapter); 
```

# c# - MySQL 删除、更新或插入行

> ID：12812526
> 
> 赞同：0
> 
> 时间：2012-10-10T05:30:45.540
> 
> 标签：c#, .net, mysql

我正在使用`MySQL DBMS`。我有`Document table and Order table`。`relationship`他们之间是`one to many`。

创建文档时，用户可以对该文档进行`insert`一些命令。`Order table`当用户点击注册按钮时，表格生效。但之后，用户可以编辑该文档。他/她可以更改，更新，删除订单。

单击注册按钮时，它将影响订单表。编辑时我想删除该文档的所有订单，然后再次插入。但在我看来并不好，例如，如果有 100 个订单并且用户只更改 1行，我必须删除 100 行并再次插入 100 行，或者如果用户添加新订单，我必须删除 100 行并添加 101 行。

处理这种情况的最佳方法是什么？请注意，我使用的是 C#。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:35:57.140

每当文档发生更改时，您都应该为该文档创建一个新记录。您可以为文档使用唯一标识符，然后对文档进行版本化。每个订单都应与特定版本的文档相关。

这样，您可以编辑文档，并且每当您编辑文档时，都会创建一个新版本，并且该版本将获得新订单。所有版本的唯一标识符将保持不变。简而言之，文档将通过唯一标识符和版本进行标识。

您建议的方法有问题，即当您修改文档时，您将重新插入所有订单，但您将永远无法追溯订单所在的原始文档。

# zend-framework2 - 有没有关于 Zend Framework 2 如何组合在一起的高级解释？

> ID：12812528
> 
> 赞同：6
> 
> 时间：2012-10-10T05:30:52.087
> 
> 标签：zend-framework2

我目前正在玩 Zend Framework 2。

你们中的任何人都知道 Zend Framework 2 如何组合在一起的任何高级解释吗？

我不是在谈论一个向您展示如何使用 ZF2 快速启动和运行网站的教程。我的意思是一个易于阅读的“幕后”指南，它解释了哪些代码做了什么。这可能是 ZF2 如何启动项目、加载每个模块、执行正确路由然后将正确输出发送给用户的简单解释。

我知道可以使用调试器单步执行所有代码，但是对于初学者来说，如果不先了解 ZF2 的架构，这将非常痛苦。

这存在吗？

甚至可能是某种架构图或 UML？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:39:54.787

我看了这个：

[http://www.youtube.com/watch?v=NsOrT1R6IQ0](http://www.youtube.com/watch?v=NsOrT1R6IQ0)

它基本上涵盖了 DI、ServiceManager 和 EventManager，并解释了使用模块背后的理论。它很长（45 分钟左右），但它确实给了我一个很好的总体概述。

希望那有所帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:40:05.413

您正在寻找的大部分内容（不是全部）都可以在[Zend/MVC](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.intro.html)组件参考中找到。

然而，它不是很简洁和用户友好。

# actionscript-3 - AS3：检测半径中的影片剪辑

> ID：12812530
> 
> 赞同：1
> 
> 时间：2012-10-10T05:30:58.307
> 
> 标签：actionscript-3, flash, movieclip

我正在开发一个树游戏并且有点可以在树上添加分支，我想增强它，例如当一个点被点击时，它会在它周围的特定半径内显示其他点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:01:02.107

根据您给出的描述，我认为您正在寻找距离公式。

`Sqrt((y2-y1)^2 + (x2-x1)^2)`

例如：

您定义了一个半径和一个点数组：

```
var radius:int = 20;
var myDots = new Array ({'x':0, 'y': 0}, {'x': 5, 'y': 5}, {'x': 10, 'y': 5}, {'x': 10, 'y': 5}, {'x': 10, 'y': 10}); 
```

单击的点是 (5,5)，假设您有一个确定的半径 r=20。现在，通过迭代点来获取所有半径为 r 的点：

```
 function getDotsWithinRadius(x,y){
        for(var i= 0; i<myDots.length;i++){
            var x2 = myDots[i].x;
            var y2 = myDots[i].y;
            var val = Math.sqrt(Math.pow(y2-y,2) + Math.pow(x2-x, 2)); 
            if(val <=radious){
               /*The dot is with the radius of the give location.
                 This is the place where you tell the current dot to show up or
                 something like that.
                */
            }
        }
    } 
```

我没有测试过代码，但我真的希望这能让你理解。

# iphone - 通过 MDM 的“InstallProfile”命令

> ID：12812536
> 
> 赞同：6
> 
> 时间：2012-10-10T05:31:43.177
> 
> 标签：iphone, ios, mdm

我能够查询设备信息、获取设备上安装的配置文件列表等，但无法将配置文件安装到设备上。

我已经配置了一个限制配置文件。当我将它托管在我的服务器上并通过 Safari 下载它时，它会安装。但是当我将它编码为 base64（根据 MDM 要求）并尝试安装它时，我收到以下错误。

```
DM: Attempting to perform MDM request: InstallProfile
Oct 10 10:25:32 iPhone-4 mdmd[516] <Notice>: (Error) MC: Failed to parse profile data. Error: NSError:
Desc   : Invalid Profile
US Desc: Invalid Profile
Domain : MCProfileErrorDomain
Code   : 1000
Type   : MCFatalError
Oct 10 10:25:32 iPhone-4 mdmd[516] <Notice>: (Error) MDM: Command Status: Error
Error: NSError:
Desc   : Invalid Profile
US Desc: Invalid Profile
Domain : MCProfileErrorDomain
Code   : 1000
Type   : MCFatalError 
```

下面是我尝试安装的配置文件的 Base64 编码数据。[我根据此处](https://stackoverflow.com/a/9575488/864850)和[此处](https://stackoverflow.com/a/10886130/864850)的建议生成了以下数据

```
PHBsaXN0IHZlcnNpb249IjEuMCI+CjxkaWN0PgoJPGtleT5QYXlsb2FkQ29udGVudDwva2V5PgoJ
PGFycmF5PgoJCTxkaWN0PgoJCQk8a2V5PlBheWxvYWREZXNjcmlwdGlvbjwva2V5PgoJCQk8c3Ry
aW5nPjwvc3RyaW5nPgoJCQk8a2V5PlBheWxvYWREaXNwbGF5TmFtZTwva2V5PgoJCQk8c3RyaW5n
PlJlc3RyaWN0aW9uczwvc3RyaW5nPgoJCQk8a2V5PlBheWxvYWRJZGVudGlmaWVyPC9rZXk+CgkJ
CTxzdHJpbmc+Y28ubXltZG0ucmVzdHJpY3Rpb25zLnJlc3RyaWN0aW9uczE8L3N0cmluZz4KCQkJ
PGtleT5QYXlsb2FkT3JnYW5pemF0aW9uPC9rZXk+CgkJCTxzdHJpbmc+PC9zdHJpbmc+CgkJCTxr
ZXk+UGF5bG9hZFR5cGU8L2tleT4KCQkJPHN0cmluZz5jb20uYXBwbGUuYXBwbGljYXRpb25hY2Nl
c3M8L3N0cmluZz4KCQkJPGtleT5QYXlsb2FkVVVJRDwva2V5PgoJCQk8c3RyaW5nPjg0MzA2NThB
LUY1MDQtNDA2MC1BOTUyLTc2MkUwMzg3NjY5Nzwvc3RyaW5nPgoJCQk8a2V5PlBheWxvYWRWZXJz
aW9uPC9rZXk+CgkJCTxpbnRlZ2VyPjE8L2ludGVnZXI+CgkJCTxrZXk+YWxsb3dBZGRpbmdHYW1l
Q2VudGVyRnJpZW5kczwva2V5PgoJCQk8dHJ1ZS8+CgkJCTxrZXk+YWxsb3dBcHBJbnN0YWxsYXRp
b248L2tleT4KCQkJPGZhbHNlLz4KCQkJPGtleT5hbGxvd0Fzc2lzdGFudDwva2V5PgoJCQk8dHJ1
ZS8+CgkJCTxrZXk+YWxsb3dBc3Npc3RhbnRXaGlsZUxvY2tlZDwva2V5PgoJCQk8dHJ1ZS8+CgkJ
CTxrZXk+YWxsb3dDYW1lcmE8L2tleT4KCQkJPHRydWUvPgoJCQk8a2V5PmFsbG93Q2xvdWRCYWNr
dXA8L2tleT4KCQkJPHRydWUvPgoJCQk8a2V5PmFsbG93Q2xvdWREb2N1bWVudFN5bmM8L2tleT4K
CQkJPHRydWUvPgoJCQk8a2V5PmFsbG93RGlhZ25vc3RpY1N1Ym1pc3Npb248L2tleT4KCQkJPHRy
dWUvPgoJCQk8a2V5PmFsbG93RXhwbGljaXRDb250ZW50PC9rZXk+CgkJCTx0cnVlLz4KCQkJPGtl
eT5hbGxvd0dsb2JhbEJhY2tncm91bmRGZXRjaFdoZW5Sb2FtaW5nPC9rZXk+CgkJCTx0cnVlLz4K
CQkJPGtleT5hbGxvd0luQXBwUHVyY2hhc2VzPC9rZXk+CgkJCTx0cnVlLz4KCQkJPGtleT5hbGxv
d011bHRpcGxheWVyR2FtaW5nPC9rZXk+CgkJCTx0cnVlLz4KCQkJPGtleT5hbGxvd1Bob3RvU3Ry
ZWFtPC9rZXk+CgkJCTx0cnVlLz4KCQkJPGtleT5hbGxvd1NhZmFyaTwva2V5PgoJCQk8dHJ1ZS8+
CgkJCTxrZXk+YWxsb3dTY3JlZW5TaG90PC9rZXk+CgkJCTx0cnVlLz4KCQkJPGtleT5hbGxvd1Vu
dHJ1c3RlZFRMU1Byb21wdDwva2V5PgoJCQk8dHJ1ZS8+CgkJCTxrZXk+YWxsb3dWaWRlb0NvbmZl
cmVuY2luZzwva2V5PgoJCQk8dHJ1ZS8+CgkJCTxrZXk+YWxsb3dWb2ljZURpYWxpbmc8L2tleT4K
CQkJPHRydWUvPgoJCQk8a2V5PmFsbG93WW91VHViZTwva2V5PgoJCQk8dHJ1ZS8+CgkJCTxrZXk+
YWxsb3dpVHVuZXM8L2tleT4KCQkJPHRydWUvPgoJCQk8a2V5PmZvcmNlRW5jcnlwdGVkQmFja3Vw
PC9rZXk+CgkJCTxmYWxzZS8+CgkJCTxrZXk+Zm9yY2VJVHVuZXNTdG9yZVBhc3N3b3JkRW50cnk8
L2tleT4KCQkJPGZhbHNlLz4KCQkJPGtleT5yYXRpbmdBcHBzPC9rZXk+CgkJCTxpbnRlZ2VyPjEw
MDA8L2ludGVnZXI+CgkJCTxrZXk+cmF0aW5nTW92aWVzPC9rZXk+CgkJCTxpbnRlZ2VyPjEwMDA8
L2ludGVnZXI+CgkJCTxrZXk+cmF0aW5nUmVnaW9uPC9rZXk+CgkJCTxzdHJpbmc+dXM8L3N0cmlu
Zz4KCQkJPGtleT5yYXRpbmdUVlNob3dzPC9rZXk+CgkJCTxpbnRlZ2VyPjEwMDA8L2ludGVnZXI+
CgkJCTxrZXk+c2FmYXJpQWNjZXB0Q29va2llczwva2V5PgoJCQk8aW50ZWdlcj4yPC9pbnRlZ2Vy
PgoJCQk8a2V5PnNhZmFyaUFsbG93QXV0b0ZpbGw8L2tleT4KCQkJPHRydWUvPgoJCQk8a2V5PnNh
ZmFyaUFsbG93SmF2YVNjcmlwdDwva2V5PgoJCQk8dHJ1ZS8+CgkJCTxrZXk+c2FmYXJpQWxsb3dQ
b3B1cHM8L2tleT4KCQkJPHRydWUvPgoJCQk8a2V5PnNhZmFyaUZvcmNlRnJhdWRXYXJuaW5nPC9r
ZXk+CgkJCTxmYWxzZS8+CgkJPC9kaWN0PgoJPC9hcnJheT4KCTxrZXk+UGF5bG9hZERlc2NyaXB0
aW9uPC9rZXk+Cgk8c3RyaW5nPlByb2ZpbGUgZGVzY3JpcHRpb24uPC9zdHJpbmc+Cgk8a2V5PlBh
eWxvYWREaXNwbGF5TmFtZTwva2V5PgoJPHN0cmluZz5HZW5lcmFsPC9zdHJpbmc+Cgk8a2V5PlBh
eWxvYWRJZGVudGlmaWVyPC9rZXk+Cgk8c3RyaW5nPmNvLm15bWRtLnJlc3RyaWN0aW9uczwvc3Ry
aW5nPgoJPGtleT5QYXlsb2FkT3JnYW5pemF0aW9uPC9rZXk+Cgk8c3RyaW5nPjwvc3RyaW5nPgoJ
PGtleT5QYXlsb2FkUmVtb3ZhbERpc2FsbG93ZWQ8L2tleT4KCTxmYWxzZS8+Cgk8a2V5PlBheWxv
YWRUeXBlPC9rZXk+Cgk8c3RyaW5nPkNvbmZpZ3VyYXRpb248L3N0cmluZz4KCTxrZXk+UGF5bG9h
ZFVVSUQ8L2tleT4KCTxzdHJpbmc+MUU4MjY0NEEtQjRCRi00RkM0LTgxQTgtNTdCRTFDOTg4MTg1
PC9zdHJpbmc+Cgk8a2V5PlBheWxvYWRWZXJzaW9uPC9rZXk+Cgk8aW50ZWdlcj4xPC9pbnRlZ2Vy
Pgo8L2RpY3Q+CjwvcGxpc3Q+Cg== 
```

我已在 MDM 有效负载中启用配置文件安装。请帮助我找出问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:25:02.153

您缺少 XML 声明和 plist 文档类型。将以下两行添加到配置文件的顶部（在对其进行 base64 编码之前）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T11:59:42.293

问题已经解决了。只是出于烦恼，我删除了 .mobileConfig 的 XML 标记之间的额外空格。见下文...

**改变了**

```
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>PayloadDescription</key>
            <string></string>
            <key>PayloadDisplayName</key>
            <string>Restrictions</string>
..........
</dict> 
```

**到**

```
<dict><key>PayloadContent</key><array><dict><key>PayloadDescription</key><string></string><key>PayloadDisplayName</key><string>Restrictions</string>..........</dict> 
```

我用[这个](http://www.opinionatedgeek.com/dotnet/tools/Base64Encode/Default.aspx)网站将它编码成base64。（仅用于测试）

对于未来的观众，您需要从`<dict>`标签开始

# iphone - 如何创建 UITextField 以输入多个电子邮件地址？

> ID：12812537
> 
> 赞同：1
> 
> 时间：2012-10-10T05:31:46.383
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个`UITextField`并且我希望它能够输入多个电子邮件地址。我希望功能作为 line in `MailComposer`。

我真正想要的是**当用户点击一个按钮时我想显示地址选择器来选择电子邮件**

是否有任何预定义的**pickerView**？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:34:45.387

一种方法可能是在 UIView 之上定义一个透明的 UITextField，该 UIView 可以将其他视图作为子视图。当您开始输入地址时，您会`textField:shouldChangeCharactersInRange:replacementString:`在 UITextFieldDelegate 中获得。如果部分字符串匹配，那么您可以为每个匹配的地址创建一个新的 UIView 并动态地将它们显示为要单击/点击以接受的选项。您可能会使用`resizableImageWithCapInsets`创建名称所在的气泡以允许可变长度。这个列表可能会随着每个字符而改变。

如果选择被接受，那么您会将包含接受地址的 UIView 移动到地址行中的右侧位置，如果没有先前的地址，则移动到左侧，如果有，则移动到最后一个地址之后。届时显示的任何其他地址都将被取消。动画在这里可能看起来不错。然后 UITextField 的框架将被更改，以便在 UIView 显示接受的地址之后进行文本输入。它看起来像一个 UITextField，但它不是。

其他要做的事情是为每个地址添加一个 X 按钮，以便将其删除。如果您有一个好的电子邮件地址解析器，您甚至可以在输入文本时解析它，将文本变成气泡并将它们向上移动到左侧并使用可接受的地址。

# c# - 正则表达式在大型文档上非常慢

> ID：12812538
> 
> 赞同：0
> 
> 时间：2012-10-10T05:31:47.667
> 
> 标签：c#, regex

运行以下代码时，CPU 负载会上升，并且在较大的文档上需要很*长时间：*

```
string pattern = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";
Regex regex = new Regex(
      pattern,
      RegexOptions.None | RegexOptions.Multiline | RegexOptions.IgnoreCase);

MatchCollection matches = regex.Matches(input); // Here is where it takes time
MessageBox.Show(matches.Count.ToString());

foreach (Match match in matches)
{
    ...
} 
```

知道如何加快速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:10:35.607

更改`RegexOptions.None | RegexOptions.Multiline | RegexOptions.IgnoreCase`为`RegexOptions.Compiled`产生相同的结果（因为您的模式不包含任何文字字母或`^`/ `$`）。

在我的机器上，这将您链接的示例文档所花费的时间从 46 秒减少到 21 秒（这对我来说仍然很慢，但对您来说可能已经足够了）。

**编辑：**所以我对此进行了更多研究，并发现了真正的问题。

问题出在你的正则表达式的前半部分：`\w+([-.]\w+)*\.\w+([-.]\w+)*@`. 这在匹配实际包含`@`符号的输入部分时效果很好，但是对于仅匹配`\w+([-.]\w+)*\.\w+([-.]\w+)*`但后面*没有*`@`的部分，正则表达式引擎会浪费大量时间回溯并从序列中的每个位置重试（并且再次失败，因为仍然没有`@`！）

您可以通过使用以下命令强制匹配从单词边界开始来解决此问题`\b`：

```
 string pattern = @"\b\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"; 
```

在您的示例文档中，这会在 1 秒内产生相同的 10 个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:12:19.520

尝试使用`regex`for `streams`，使用*mono-project* `regex`，这篇文章对`.Net`

*   [使用 .NET Framework 构建正则表达式流](http://www.developer.com/design/article.php/3719741/Building-a-Regular-Expression-Stream-Search-with-the-NET-Framework.htm)

并尝试提高您的正则表达式性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:21:16.953

要回答如何更改它，您需要告诉我们，它应该匹配什么。

问题可能在最后一部分`@\w+([-.]\w+)*\.\w+([-.]\w+)*`。在字符串“bla@abcde-fgh”上，它必须尝试多种可能性，直到找到匹配项。

可能有点[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

因此，您需要以更好、更“独特”的方式定义您的模式。你真的需要“破折号/点 - 点 - 破折号/点”吗？

# java - JPA 2.0 & Hibernate 4.0.1 & Spring 3.1.1 兼容性

> ID：12812544
> 
> 赞同：3
> 
> 时间：2012-10-10T05:32:05.830
> 
> 标签：java, spring, hibernate, jpa, jpa-2.0

我在我的应用程序中使用 Spring 3.1.1。我已将 JPA 和 Hibernate 4.0.1 集成到其中。

我的 entityManagerFactory 和其他几个 bean 没有被实例化。

```
java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.hibernate.service.ServiceRegistryBuilder.buildServiceRegistry(ServiceRegistryBuilder.java:244)
    at org.hibernate.ejb.Ejb3Configuration.buildLifecycleControledServiceRegistry(Ejb3Configuration.java:930)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:903)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:400)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
    at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.config.builders.AutoConfigurationBuilder.autoConfigure(AutoConfigurationBuilder.java:101)
    at org.mule.config.builders.AutoConfigurationBuilder.doConfigure(AutoConfigurationBuilder.java:57)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
    at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:208)
    at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
    at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
    at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
    at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
Exception in thread "main" org.mule.module.launcher.DeploymentInitException: NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:220)
    at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
    at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
    at org.mule.tooling.server.application.ApplicationDeployer.run(ApplicationDeployer.java:56)
    at org.mule.tooling.server.application.ApplicationDeployer.main(ApplicationDeployer.java:88)
Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V (org.mule.api.lifecycle.InitialisationException) (org.mule.api.config.ConfigurationException)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
    at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:208)
    ... 4 more
Caused by: org.mule.api.config.ConfigurationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V (org.mule.api.lifecycle.InitialisationException)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:52)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.config.builders.AutoConfigurationBuilder.autoConfigure(AutoConfigurationBuilder.java:101)
    at org.mule.config.builders.AutoConfigurationBuilder.doConfigure(AutoConfigurationBuilder.java:57)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    ... 7 more
Caused by: org.mule.api.lifecycle.InitialisationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:117)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    ... 11 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
    at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
    ... 14 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in URL [file:/C:/Users/User-1/MuleStudio/workspace/.mule/apps/eigSourceCode/appendContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:400)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 23 more
Caused by: java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
    at org.hibernate.service.ServiceRegistryBuilder.buildServiceRegistry(ServiceRegistryBuilder.java:244)
    at org.hibernate.ejb.Ejb3Configuration.buildLifecycleControledServiceRegistry(Ejb3Configuration.java:930)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:903)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 38 more 
```

我不应该使用 Maven，所以我将 jar 直接添加到类路径中。

类路径中的罐子是：

![引用的库](../Images/e85f997ab964e3e082138a0de993b9a4.png)

![骡子工作室内的弹簧罐](../Images/babd2ef045edb69a9f49b0f63d63a134.png)

我的persistance.xml在META-INF里面，里面的代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="03offileLogger">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.comviva.mfs.eig.persistance.jpa.entities.TransactionLog</class>

    </persistence-unit>
</persistence> 
```

这`appendContext.xml`是我用于配置 spring bean 的应用程序上下文文件，其中包含以下代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/tx
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- scans the classpath for annotated components (including @Repostory 
        and @Service that will be auto-registered as Spring beans -->
    <context:component-scan
        base-package="com.comviva.mfs.eig.logging.dataAccess, com.comviva.mfs.eig.logging.service" />

    <!-- methods or classes needing to run in a complete transaction will be 
        annotated with Transactional -->
    <tx:annotation-driven />

    <bean
        class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/eigDB" />
        <property name="username" value="root" />
        <property name="password" value="tiger" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="03offileLogger" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
</beans> 
```

上面粘贴的错误被剪切以适合大小，但在每个错误之后它都说

```
Invocation of init method failed;
 Initialization of bean failed; 
```

我在某处读到它存在一些版本冲突，所以 entityManagerFactory 没有被实例化。

**更新：** 下面的代码显示了我的实体（只有一个表）。

```
package com.comviva.mfs.eig.persistance.jpa.entities;

import java.io.Serializable;
import java.sql.Timestamp;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

/**
 * The persistent class for the transaction_logs database table.
 * 
 */
@Entity
@Table(name="transaction_logs")
public class TransactionLog implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name="TRANSACTION_ID")
    private Long transaction_id; 

    @Column(name="INTERFACE_ID")
    private String interfaceId;

    @Column(name="FROM_ACCOUNT")
    private String from_account;

    @Column(name="SERVICE_TYPE")
    private String serviceType;

    @Column(name = "MSISDN")
    private String msisdn;

    @Column(name="TRANSACTION_TIME")
    private Timestamp transactionTime;

    @Column(name = "TRANSACTION_DATE")
    private Timestamp transactionDate;

    @Column(name="FROM_ACCOUNT_TYPE")
    private Integer fromAccountType;

    @Column(name="TRANSMISSION_DATE_TIME")
    private Timestamp transmissionDateTime;

    @Column(name="INTERFACE_TXN_ID")
    private Long interfaceTxnId;

    @Column(name="AVILABLE_BALANCE")
    private Double avilableBalance;

    @Column(name="TOTAL_BALANCE")
    private Double totalBalance;

    @Column(name="TXN_STATUS")
    private String txnStatus;

    @Column(name="MESSAGE")
    private String message;

    public TransactionLog() {
    }

    public Long getTransaction_id() {
        return transaction_id;
    }

    public void setTransaction_id(Long transaction_id) {
        this.transaction_id = transaction_id;
    }

    public String getInterfaceId() {
        return interfaceId;
    }

    public void setInterfaceId(String interfaceId) {
        this.interfaceId = interfaceId;
    }

    public String getFrom_account() {
        return from_account;
    }

    public void setFrom_account(String from_account) {
        this.from_account = from_account;
    }

    public String getServiceType() {
        return serviceType;
    }

    public void setServiceType(String serviceType) {
        this.serviceType = serviceType;
    }

    public String getMsisdn() {
        return msisdn;
    }

    public void setMsisdn(String msisdn) {
        this.msisdn = msisdn;
    }

    public Timestamp getTransactionTime() {
        return transactionTime;
    }

    public void setTransactionTime(Timestamp transactionTime) {
        this.transactionTime = transactionTime;
    }

    public Timestamp getTransactionDate() {
        return transactionDate;
    }

    public void setTransactionDate(Timestamp transactionDate) {
        this.transactionDate = transactionDate;
    }

    public Integer getFromAccountType() {
        return fromAccountType;
    }

    public void setFromAccountType(Integer fromAccountType) {
        this.fromAccountType = fromAccountType;
    }

    public Timestamp getTransmissionDateTime() {
        return transmissionDateTime;
    }

    public void setTransmissionDateTime(Timestamp transmissionDateTime) {
        this.transmissionDateTime = transmissionDateTime;
    }

    public Long getInterfaceTxnId() {
        return interfaceTxnId;
    }

    public void setInterfaceTxnId(Long interfaceTxnId) {
        this.interfaceTxnId = interfaceTxnId;
    }

    public Double getAvilableBalance() {
        return avilableBalance;
    }

    public void setAvilableBalance(Double avilableBalance) {
        this.avilableBalance = avilableBalance;
    }

    public Double getTotalBalance() {
        return totalBalance;
    }

    public void setTotalBalance(Double totalBalance) {
        this.totalBalance = totalBalance;
    }

    public String getTxnStatus() {
        return txnStatus;
    }

    public void setTxnStatus(String txnStatus) {
        this.txnStatus = txnStatus;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

} 
```

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:57:55.937

错误消息“java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties”表示您确实有不同版本的类`org.hibernate.cfg.Environment`

您的错误日志显示您正在使用 mule。Mule 带有自己的休眠罐。请检查 mule 的 lib 目录以确认您没有冲突的 hibernate jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:28:19.160

您是否定义了任何实体、关系？你能把这个拿出来让EntityManager初始化吗？

原因很简单，当我的实体和关系出现问题时，我想我看到了这种错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T09:26:50.100

替换 Mule 服务器中存在的 Hibernate jar，
即：location sample: `C:\dev\AnypointStudio\plugins\org.mule.tooling.server.3.5.2.ee_4.1.0.201410031231\mule\lib\opt`。

原因：如果您使用特定版本的 Hibernate 开发了您的应用程序，那么您需要在 mule 服务器中具有相同的版本，因为当您在 mule 服务器中运行您的应用程序时，它使用它自己的副本。

# servicestack - ServiceStack，全局 URI 参数

> ID：12812546
> 
> 赞同：1
> 
> 时间：2012-10-10T05:32:13.923
> 
> 标签：servicestack

在 ServiceStack 中，如何确保所有 URI 都具有特定的基本参数？

一个示例是如何附加`?format=csv/json/xml`到每个服务 URI，即使没有请求 DTO 指定`format`字段。

我想将其用于替代身份验证。传递用户并传入 HTTP 的 Authorization 标头是验证每个服务调用的首选方式，但我也希望允许人们传入用户并作为参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:11:54.373

您可以让所有 DTO 类都从具有您需要的参数的基类继承。在你的情况下，你可以有类似的东西

```
public abstract class SecuredRequest
{
    public string Key { get; set; }
    public string Signature { get; set; }
} 
```

# javascript - 如何使用 ajax .fail 后返回的信息？

> ID：12812550
> 
> 赞同：0
> 
> 时间：2012-10-10T05:32:36.783
> 
> 标签：javascript, jquery

我设置了以下内容：

```
$.ajax({
    cache: false,
    url: "/Admin/Contents/GetCitiess",
    data: { accountID: AccountID }
})
    .done(function (data) {
        city.html(data);
    })
    .fail(function (jqXHR, textStatus, errorThrown) {
        ajaxOnFailure(jqXHR, textStatus, errorThrown);
    });

function ajaxOnFailure(jqXHR, textStatus, errorThrown) {
    "use strict";
    alert("Network connection " + textStatus);
} 
```

有没有更好的方法可以使用 .fail 信息。我想提供更多信息，但我不确定我能提供什么以及如何做到这一点。请注意，这是一个内部应用程序，因此我想提供尽可能多的故障信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:43:30.683

失败信息可用于某些场景，如下所示。

如果您在应用程序中进行了身份验证，那么您可以使用失败信息来确定会话超时并将用户重定向到登录页面

同样，您可以使用失败信息在屏幕中显示后端发生的异常消息

以上是我遇到的场景。根据应用和需求可能还有其他场景

# ios5 - setshowsuserlocation = NO 时出现的用户位置

> ID：12812551
> 
> 赞同：1
> 
> 时间：2012-10-10T05:32:41.707
> 
> 标签：ios5, mkmapview

我使用以下方法为用户位置创建了一个自定义视图：

```
 -(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation
{

if([annotation class]==[MKUserLocation class])
{
   //my code to return the pin
}
else
{
  //code for custom pin
} 
```

在一些用户操作之后，我将地图视图的 setShowsUserLocation 更新为 NO。然后我启动核心位置控制器，它使用不同的自定义引脚视图来跟踪用户位置。原始图钉会消失一段时间，但稍后当我拖动或捏合以缩放地图时会重新出现。在调试时，我看到它进入了上面的 if 条件，尽管 setShowsUserLocation 设置为 no。

# javascript - 在javascript中验证多个文本框

> ID：12812559
> 
> 赞同：0
> 
> 时间：2012-10-10T05:33:20.097
> 
> 标签：javascript, asp-classic

```
<form name="quest" onsubmit="return validate();">
  <table width="100%" border="1">
    <tr>
      <td>Question</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
        <td width="98">Response Type<font color="#CC0000">*</font></td>
        <td>
        <input type="radio" value="1" name="R1" onClick="showresponse(1)"> 
        True/False
        <input type="radio" value="2" name="R1" onclick="showresponse(2)">Single 
        Best Answer
        <input type="radio" value="3" name="R1" onclick="showresponse(3)">Multiple 
        Answers</td>
    </tr>
    <tr>
      <td width="98" valign="top"><span id="lbl" >Add Response<font color="#CC0000">*</font></span></td>
      <td>
            <table border="0" width="425" cellspacing="0" id="response2" cellpadding="5">
            <tr>
                <td width="161">
                <input type="text" name="cb1" size="20" style="width:300px;" maxlength="100"></td>
                <td>
                <input type="radio" value="1" name="R3"> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb2" size="20"  style="width:300px;" maxlength="100"></td>
                <td>
                <input type="radio" value="2"  name="R3"> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb3" size="20" style="width:300px;" maxlength="100"></td>
                <td>
                <input type="radio" value="3" name="R3"> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb4" size="20"  style="width:300px;" maxlength="100"></td>
                <td>
                <input type="radio" value="4"  name="R3"> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb5" size="20"  style="width:300px;" maxlength="100"></td>
                <td>
                <input type="radio" value="5"  name="R3"> 
                Answer</td>
            </tr>
            </table> 
        </td>   
    </tr>

  </table>
</form> 
```

我想验证一个人可以输入最少 3 个响应（添加响应）和最多 5 个响应。一旦输入响应只允许选择答案（单选按钮）。请有人帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:10:19.807

您可以在下面尝试此解决方案。

请注意，**可以在本文末尾找到完整的工作示例**。

* * *

*   将`method`您的方法属性设置`<form>`为`GET`or `POST`，并定义其`method`属性（= 指定将表单数据发送到何处）

*   为每个“答案”复选框添加一个 ID。您可以分别为他们提供以下 ID：`R1`、`R2`、`R3`、`R4`和`R5`。为每个输入提供不同的名称。

*   通过添加属性禁用“答案”复选框`disabled`。由于您只希望响应选中/取消选中复选框，因此我们希望阻止用户这样做。

**例如：**

```
<input type="radio" value="1" name="R1" id="R1" disabled> 
```

*   将以下事件添加到您的每个“答案”文本输入中：

    *   `onkeyup="toggle_checkbox(this, i);"`，`i`应该是与相关`ID`复选框相关的索引（检查下面的示例）。`toggle_checkbox`每次我们在“答案”文本框中输入内容时都会调用该函数，并检查或取消选中与我们正在输入的文本输入相关联的复选框，具体取决于后者的内容：

        *   如果 texbox 的内容为空，则该函数取消选中该复选框，

        *   否则，它会检查它。

    *   `ondragstart="return false"`这可以防止将内容从给定的文本框复制到另一个。

**例如：**

```
<td width="161">

    <input type="text" name="cb1" size="20" style="width:300px;" maxlength="100" 
        onkeyup="toggle_checkbox(this, 1);" ondragstart="return false"></td>

    <td>
    <input type="radio" value="1" name="R1" id="R1" disabled> 
    Answer
</td> 
```

在上面的示例中，`i`等于`1`，它与相关复选框的 ID 相关`R1`。

*   在您的`<head>`中，添加以下 JS 函数：

    ```
    function toggle_checkbox(el, index) {
        var val = el.value;

        if(val!="") {
            document.getElementById("R"+index).checked = "checked";
        }
        else { 
            document.getElementById("R"+index).checked = "";
        }
    }

    function validate() {   
        var isok = false;
        var nb_checked = 0;

        for(var i =1; i<6; i++) {
            var el = document.getElementById("R"+i);

            if(el.checked) {
                nb_checked++;
            }           
        }   

        if(nb_checked < 3) {
            alert("Enter at least 3 responses!");
        }
        else {
            isok = true;
        }

        return isok;
    } 
    ```

如您所见，有两个功能：一个是`toggle_checkbox`，另一个是`validate`。

*   如前所述，`toggle_checkbox`每次我们在“答案”文本框中键入内容时都会调用该函数。这会根据相应文本框的内容是否为空来检查/取消选中关联的复选框。

*   `validate`当我们提交表单时调用该函数。它计算使用变量检查的“答案”复选框的数量`nb_checked`。如果这个数字低于`3`，那么我们就发出警告消息`Enter at least 3 responses!`。否则，我们将输出变量设置`isok`为`true`，这将允许处理表单并将其发送到`action`属性中提供的链接`<form>`

* * *

## 完整的工作示例：

```
<!DOCTYPE html>
<html>
<head>

<script>

function toggle_checkbox(el, index) {
    var val = el.value;

    if(val!="")
        document.getElementById("R"+index).checked = "checked";
    else document.getElementById("R"+index).checked = "";
}

function validate() {   
    var isok = false;
    var nb_checked = 0;

    for(var i =1; i<6; i++) {
        var el = document.getElementById("R"+i);

        if(el.checked)
            nb_checked++;

    }   

    if(nb_checked < 3) alert("Enter at least 3 responses!");
    else
        isok = true;

    return isok;
}

</script>

<head>

<body>

<form onsubmit="return validate();" method="post" action="http://www.google.com">

    <table width="100%" border="1">
    <tr>
      <td>Question</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
        <td width="98">Response Type<font color="#CC0000">*</font></td>
        <td>
        <input type="radio" value="1" name="Ra" onClick="showresponse(1)"> 
        True/False
        <input type="radio" value="2" name="Rb" onclick="showresponse(2)">Single 
        Best Answer
        <input type="radio" value="3" name="Rc" onclick="showresponse(3)">Multiple 
        Answers</td>
    </tr>

      <td width="98" valign="top"><span id="lbl" >Add Response<font color="#CC0000">*</font></span></td>
      <td>
            <table border="0" width="425" cellspacing="0" id="response2" cellpadding="5">
            <tr>
                <td width="161">
                <input type="text" name="cb1" size="20" style="width:300px;" maxlength="100" 
                    onkeyup="toggle_checkbox(this, 1);" ondragstart="return false"></td>
                <td>
                <input type="radio" value="1" name="R1" id="R1" disabled> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb2" size="20"  style="width:300px;" maxlength="100"
                    onkeyup="toggle_checkbox(this, 2);" ondragstart="return false"></td>
                <td>
                <input type="radio" value="2"  name="R2" id="R2" disabled> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb3" size="20" style="width:300px;" maxlength="100"
                    onkeyup="toggle_checkbox(this, 3);" ondragstart="return false"></td>
                <td>
                <input type="radio" value="3" name="R3" id="R3" disabled> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb4" size="20"  style="width:300px;" maxlength="100"
                    onkeyup="toggle_checkbox(this, 4);" ondragstart="return false"></td>
                <td>
                <input type="radio" value="4"  name="R4" id="R4" disabled> 
                Answer</td>
            </tr>
            <tr>
                <td width="161">
                <input type="text" name="cb5" size="20"  style="width:300px;" maxlength="100"
                    onkeyup="toggle_checkbox(this, 5);" ondragstart="return false"></td>
                <td>
                <input type="radio" value="5" name="R5" id="R5" disabled> 
                Answer</td>
            </tr>
            </table> 
        </td>   
    </tr>
    </table>

    <input type="submit" value="SUBMIT"/>

</form>

</body>
</html> 
```

**PS：**更改`action`表单的属性。我设置 google 的 url 只是为了让您在表单有效时看到重定向。

希望这可以帮助。如果您有任何问题，请告诉我。

# wsgi - gevent和tornado的区别

> ID：12812570
> 
> 赞同：14
> 
> 时间：2012-10-10T05:34:09.043
> 
> 标签：wsgi, tornado, gevent

我知道两者`tornado`都是`gevent`异步python框架。

在阅读[瓶子文档](http://bottlepy.org/docs/stable/async.html#the-limits-of-synchronous-wsgi)时，我发现 gevent 实际上不是异步的，您可以创建数千个同步工作的伪线程。

其次，在 gevent 中，您不能提前终止请求处理程序，您需要返回完整的响应，而在 tornado 中您可以。（如果我在这里错了，请纠正我）

有人可以详细描述这些系统如何在内部工作，以及它们有何不同。另外，WSGI 如何发挥这些系统的异步特性？这些框架是否符合 WSGI，如果是，如何？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-10T05:57:34.200

阅读：

[http://en.wikipedia.org/wiki/Coroutines](http://en.wikipedia.org/wiki/Coroutines)

和：

[http://en.wikipedia.org/wiki/Event-driven_architecture](http://en.wikipedia.org/wiki/Event-driven_architecture)

[http://en.wikipedia.org/wiki/Event-driven_programming](http://en.wikipedia.org/wiki/Event-driven_programming)

gevent 包使用协程，而 Tornado 是事件驱动的。

即使是驱动系统也不容易映射到 WSGI，但是协程系统，因为它看起来像线程，如果可以修补阻塞点以在事情阻塞时切换协程，则可以使协程系统支持 WSGI。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-18T13:37:06.103

gevent 和 Tornado 有点不同。gevent 更像是 Twisted——一个异步网络框架，而 Tornado 是一个纯网络框架。

gevent 的主要亮点在于它利用协程并使代码看起来像是在同步运行，但实际上大多数 IO 阻塞函数都是非阻塞的，并将控制权返回给 gevent 主循环。这对于 IO 绑定编程非常重要，因为它允许您以与编写多线程代码相同的方式编写高效的单线程代码，这更加耗费资源。

gevent 还包括一个 WSGI 请求处理程序，因此它可以用于以独立的方式处理 HTTP 请求，例如 Tornado。

Tornado 是一个异步 Web 框架，它依赖于程序员在 Python 中编写异步代码，这通常很痛苦，`Backend`因为没有像 JavaScript 或 Java 那样的多行匿名闭包或类。因此，使用 Tornado 编写好的代码真的很难。例如，使用阻塞库变得很痛苦。

事实上，这两个框架的核心都是异步的，但生成的代码看起来有点不同（更容易用 gevent 编程）。

您实际上可以一起使用 Torando 和 gevent，但我还没有尝试过（还）。

# canvas - 在 S3 上启用 CORS 时遇到问题

> ID：12812572
> 
> 赞同：10
> 
> 时间：2012-10-10T05:34:38.407
> 
> 标签：canvas, amazon-s3, cors

我在 S3 存储桶上设置了 CORS，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
    </CORSRule>
</CORSConfiguration> 
```

这是 AWS 控制台的屏幕截图：[https ://dzwonsemrish7.cloudfront.net/items/341y0o1n1X2a0O1X2s38/Screen%20Shot%202012-10-09%20at%209.59.44%20PM.png?v=2478ad83](https://dzwonsemrish7.cloudfront.net/items/341y0o1n1X2a0O1X2s38/Screen%20Shot%202012-10-09%20at%209.59.44%20PM.png?v=2478ad83)

当我将我的[颜色小偷](https://github.com/lokesh/color-thief/blob/master/js/color-thief.js)javascript 指向托管在同一域上的图像时，一切都[按预期工作](https://dzwonsemrish7.cloudfront.net/items/0u2H3b441G3S0B343S3Z/openredis-color-selecto.png?v=d3722011)，但是当我指向我的 S3 存储桶中的资产时，无论我是否从 localhost 运行我的脚本，lvh.me（它指向到 127.0.0.1)，或者来自真正的互联网，我在 Chrome 22 中收到这样的错误：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data.
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

这在 Firefox 15 中：

```
SecurityError: The operation is insecure. 
```

以下是 Google Chrome 网络检查器中标头的外观：

```
Request URL:https://s3.amazonaws.com/assets-zeke.heroku.com/addons-zeke.heroku.com/catalogs/58/original.png
Request Method:GET
Status Code:304 Not Modified

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Host:s3.amazonaws.com
If-Modified-Since:Tue, 09 Oct 2012 22:52:57 GMT
If-None-Match:"6de1a52294934c5e288894b84100d99b"
Referer:http://localhost:5000/marketplace/addons/sendgrid/edit
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4

Response Headers
HTTP/1.1 304 Not Modified
x-amz-id-2: qGvoGlvpKeSSzelanWsIPDF3zd5wQzHTr27NZoUbhNqAM1QzmKcWHnTqIkKVxF/m
x-amz-request-id: FD24FB8CA244E327
Date: Wed, 10 Oct 2012 05:20:53 GMT
Last-Modified: Tue, 09 Oct 2012 22:52:57 GMT
ETag: "6de1a52294934c5e288894b84100d99b"
Server: AmazonS3 
```

`{bucket}.s3.amazonaws.com`这是我将 URL 结构更改为（并从存储桶名称中删除句点）后标题的样子。

```
Request URL:http://assets-zeke.s3.amazonaws.com/addons-zeke.heroku.com/catalogs/58/original.png
Request Method:GET
Status Code:200 OK
Request Headers

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Host:assets-zeke.s3.amazonaws.com
Pragma:no-cache
Referer:http://lvh.me:5000/marketplace/addons/airbrake/edit
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4

Response Headers
Accept-Ranges:bytes
Content-Length:6696
Content-Type:image/png
Date:Wed, 10 Oct 2012 17:56:17 GMT
ETag:"6de1a52294934c5e288894b84100d99b"
Last-Modified:Wed, 10 Oct 2012 17:50:38 GMT
Server:AmazonS3
x-amz-id-2:UGVKQ9VQbJ82DLDxR53uDP0ZUMgla+e0GU5vO9yLr6MsY8wijl9KnM7fOyDlT+ta
x-amz-request-id:8A16CF1E02A0106C 
```

我不应该在这里看`Access-Control-Allow-Origin: *`吗？304 是否意味着亚马逊正在缓存响应？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:48:07.417

这可能是由于在加载图像元素之前未在图像元素中[启用 CORS ：](https://developer.mozilla.org/en-US/docs/CORS_Enabled_Image)

```
imgEl.crossOrigin = ''; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T08:46:07.350

> 请求网址：https://s3.amazonaws.com/assets-zeke.heroku.com/addons-zeke.heroku.com/catalogs/58/original.png

嗯，有你的问题。由于 CORS 和其他跨域事物的工作方式，您需要使用*DNS 样式的寻址*来访问您的存储桶。

假设你的原始 URL 是正确的（它看起来不像，但我可能完全错了），你会想使用这个 URL 来代替：

```
http://assets-zeke.heroku.com.s3.amazonaws.com/addons-zeke.heroku.com/catalogs/58/original.png 
```

换句话说：

```
http://{bucket}.s3.amazonaws.com/path/object.ext 
```

查看：[http](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html) ://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html了解更多说明。

# jquery - 如何在jQuery中的一组多个匹配元素中选择除第一个元素之外的所有元素？

> ID：12812575
> 
> 赞同：1
> 
> 时间：2012-10-10T05:34:58.887
> 
> 标签：jquery, jquery-selectors

一定很晚了...给定以下 HTML，如何选择除每个 s 中的第一段之外的所有段落`div.thePost`？

我试过了：

```
$('.thePost').children('p:gt(0)') 
```

和

```
$('.thePost p:gt(0)') 
```

和

```
$('.thePost > p:gt(0)') 
```

所有这些最初都可以正常工作，`div.thePost`但最终会选择`<p>`任何其他 div 中的所有其他标签，其类为`thePost`.

```
<div id="contentmiddle">

<div class="thePost">

  <h1>...</h1>

  <h3>...</h3>

  <span>...</span> 

  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>

</div><!-- /thePost -->

<div class="thePost">

  <h1>...</h1>

  <h3>...</h3>

  <span>...</span> 

  <p>...</p>
  <p>...</p>
  <p>...</p>
  <p>...</p>

</div><!-- /thePost -->

</div>​&lt;!-- /contentmiddle --> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:41:54.710

[`:first-of-type`不是 jQuery 选择器](https://stackoverflow.com/questions/11745274/what-css3-selectors-does-jquery-really-support-e-g-nth-last-child/11745367#11745367)，因此除非浏览器在 CSS 中原生支持它，否则使用的解决方案`:first-of-type`将不起作用。

如果您需要支持较旧的浏览器（IE < 9），则需要使用[下一个兄弟选择器`~`](http://api.jquery.com/next-siblings-selector)：

```
$('.thePost > p ~ p') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T05:37:28.437

怎么样`$('.thePost > p:not(:first-of-type)')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T05:37:56.047

试试这个

```
$('.thePost > p:not(:first)') 
```

或者

```
$('.thePost').find('p:gt(0)') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T05:38:08.973

`$('.thePost p:not(:first-of-type)')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T05:47:04.890

你也可以试试 `$('p:gt(0)','.thepost'));`

# javascript - 从 asp.net 打开静态 HTML 文件

> ID：12812577
> 
> 赞同：0
> 
> 时间：2012-10-10T05:35:10.473
> 
> 标签：javascript, asp.net, html

我需要使用以下 javascript 从我的 aspx 页面打开 HTML 页面，但它在 chrome 和 firefox 中显示空白页面，而在 IE9 中没有任何反应。

```
 ClientScript.RegisterStartupScript(this.GetType(), "openWindow",
 "<script language='javascript' type='text/javascript'>showModalDialog('C:/Users/Administrator/Desktop/test.html');</script>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:48:50.913

您尝试在客户端计算机上打开文件

`C:/Users/Administrator/Desktop/test.html`

您必须区分在服务器上运行的代码和在客户端上运行的代码。

当您制作 html 页面、网页时，您的文件和连接必须使用`http://`协议从服务器获取。以这种方式从服务器读取文件是不可能的，也不可能向客户端发出命令从他的计算机中读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:57:08.710

you can try this

```
string strScript = "window.open('C:/Users/Administrator/Desktop/test.html');";
    ScriptManager.RegisterStartupScript(Page, Page.GetType(), Guid.NewGuid().ToString(), strScript, true); 
```

# unix - 重定向如何在 unix 内部工作

> ID：12812579
> 
> 赞同：2
> 
> 时间：2012-10-10T05:35:24.250
> 
> 标签：unix, redirect, exec

让我们举个例子：我有一个名为 a.out 的可执行文件。这包含将一些文本打印到 printf 的 STDOUT cos 的二进制信息。所以当我给出 ./a.out 时，我会在控制台 STDOUT 上看到 printf 的输出

假设我在控制台中执行“./a.out > tempFile”。这是如何运作的？由于 a.out 中有 printf，理想情况下 i 除了要在 STDOUT 中打印的文本。重定向如何使用此文本以及为什么我们在控制台中看不到任何输出，而仅在文件中我们看到 printf 文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:40:20.817

在 UNIX 中，*一切*都是文件。默认情况下，所有`stdout`都是（例如）`/dev/tty`文件，它是连接到您的控制台/终端/窗口的设备驱动程序。输出只是发送到该文件（设备驱动程序），这会导致它输出到您用于交互式 I/O 的任何内容。

所有 a 命令`a.out >xyzzy.txt`所做的只是首先将程序的标准输出连接到该文件而不是`/dev/tty`，因此输出显示在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T05:40:51.963

在 unix 中，一切都是文件/文件流

一个 unix 进程默认连接了 3 个文件流：

```
0 = stdin
1 = stdout
2 = stderr 
```

“通常”，stdin 连接到将解析您的键盘输入的终端仿真，而 stdout/stderr 连接到将提供您的显示的终端仿真。

终端模拟器可能是 xterm、gnome-terminal、kterm 或 linux 虚拟控制台（“textmode-console”）

当您重定向时，流只是连接到不同的源/目标。因此，将转到终端仿真的每个文本都将转到该文件。

如果你想要两者，“tee”可能是一个选项：

```
./a.out | tee tempFile 
```

会将其打印到标准输出（tee 的，您可能会再次重定向）并将其写入 tempFile

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:41:56.537

shell 执行 a.out 并将 stdout 替换为文件 tempFile。根据您想要实现的重定向类型，可以使用一些函数 ( `dup2`, ) 来执行此操作。：`fropen`

请参阅此处：[重定向子进程的输出](https://stackoverflow.com/questions/8556286/redirecting-the-output-of-a-child-process/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:20:00.540

重定向是一个单独的过程，它将 a.out 的标准输出链接到 tempFile 而不是 /dev/tty（用于打印到终端的驱动程序）。因此，您只能在文件中看到输出，而不是在控制台中。这应该在 a.out 执行之前完成。重定向运算符完成链接后，您的 a.out 执行将开始并最终打印到文件中。

# html - Phonegap 样式 -webkit-user-select: none; 禁用文本字段

> ID：12812587
> 
> 赞同：36
> 
> 时间：2012-10-10T05:36:25.243
> 
> 标签：html, css, cordova

我对Phonegap很陌生。我有一个问题，在干净的 Phonegap 项目中使用的默认 css 不允许输入到文本字段中。我将其缩小到一行 CSS：

```
* {
            -webkit-touch-callout: none;                /* prevent callout to copy image, etc when tap to hold */
            -webkit-text-size-adjust: none;             /* prevent webkit from resizing text to fit */
            -webkit-tap-highlight-color: rgba(0,0,0,0); /* make transparent link selection, adjust last value opacity 0 to 1.0 */
            -webkit-user-select: none;                 /* prevent copy paste, to allow, change 'none' to 'text' */

    } 
```

问题线是：

```
-webkit-user-select: none; 
```

这可以在 www/index.css 中找到。

似乎完全禁用输入字段并不是想要的效果。

我之前也发布过这个问题 2 次，但它被关闭了，不知道为什么......我的问题由于不是一个常见问题而被关闭。好吧，我只能说，我猜 stackoverflow 的一些用户不认为 CSS 3、Phonegap、HTML 5 和 -webkit-user-select: 是常见的情况。我不同意。

但是我可以看到这里也发布了这个问题，这也导致了 Safari 中的问题：[用户选择：无导致输入字段在 Safari 上无法访问，](https://stackoverflow.com/questions/10819565/user-selectnone-causes-input-field-to-be-inaccessible-on-safari)尽管略有不同。

我目前的解决方案是这样的：

```
-webkit-user-select: text; /* change 'none' to 'text' */ 
```

只是仍然好奇启用文本输入的最优雅的解决方案是什么，但仍然保留了 Phonegap 试图实现的一些副本和过去的功能。谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-22T20:40:25.960

尝试将此添加到您的CSS：

```
input {
    -webkit-user-select: auto !important;
} 
```

这将覆盖您在输入字段的每个元素（通过 * 选择器）上设置的禁用文本选择。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-03T13:16:57.080

只需通过这种方式将规则添加到 css 中：

```
*:not(input,textarea) {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-06T19:31:21.503

`user-select`可能会导致 contenteditable="true" 的元素出现问题，所以最好也添加它

```
 [contenteditable="true"] , input, textarea {
        -webkit-user-select: auto !important;
        -khtml-user-select: auto !important;
        -moz-user-select: auto !important;
        -ms-user-select: auto !important;
        -o-user-select: auto !important;
        user-select: auto !important;  
  } 
```

# silverlight - IIS7 中的托管站点错误

> ID：12812591
> 
> 赞同：2
> 
> 时间：2012-10-10T05:37:01.513
> 
> 标签：silverlight, iis-7, hosting

我在 IIS 服务器中托管了 Silverlight 网站，但在尝试访问它时出现错误

1) 当应用程序池设置为 ASP.NET 版本 4 并在集成模式下托管管道时，显示以下错误：

> 无法加载文件或程序集“System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

2) 当应用程序池设置为ASP.NET Version 4 并且在经典模式下托管管道时，显示如下错误：

> HTTP 错误 404.2 - 未找到 由于 Web 服务器上的 ISAPI 和 CGI​​ 限制列表设置，无法提供您请求的页面。

经过进一步调查，我们发现 ISAPI 和 CGI​​ 扩展配置需要更改，但我们无法在 Window Server 2008 标准的 IIS 管理器（版本 7.0.6000）管理器中找到 ISAPI 和 CGI​​ 扩展选项。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:53:38.687

在您的应用程序中，您可能已经引用了 dll。但我猜在发布时不会被复制。尝试右键单击相同的 dll 并在属性集中`Copy Local` `True`。然后在 IIS 中发布解决方案和主机。

# windows-phone-7 - 带有提示文本的密码框

> ID：12812592
> 
> 赞同：5
> 
> 时间：2012-10-10T05:37:10.853
> 
> 标签：windows-phone-7, textbox, windows-phone-7.1, hint, passwordbox

如何在 Windows Phone 中显示带有提示文本的密码框？

我已经尝试过`PasswordBox`and `Toolkit's PhoneTextBox`。将两者结合起来有什么特别的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T05:52:35.597

为此，我现在使用[http://damianblog.com/2011/01/21/wp7-password-watermark/](http://damianblog.com/2011/01/21/wp7-password-watermark/)。希望能有更好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T21:27:34.000

另一种选择：[WindowsPhoneControls](http://github.com/JoshClose/WindowsPhoneControls)

此外，Telerik WP 控件的下一个版本有一个 RadPasswordTextBox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T06:39:32.840

**[在使用Windows Phone 工具包](http://phone.codeplex.com/)的 Windows Phone 8 中**

**恩 Xaml**

```
<Grid Grid.Row="1" Margin="12,0,0,0" x:Name="ContentPanel">             
        <toolkit:PhoneTextBox Height="72" Margin="0,0,0,270" TextWrapping="Wrap"  VerticalAlignment="Bottom" Hint="{Binding LocalizedResources.LblUser, Source={StaticResource LocalizedStrings}}" x:Name="txtUser" />
        <toolkit:PhoneTextBox Height="72" Margin="0,0,0,210" TextWrapping="Wrap" Hint="{Binding LocalizedResources.LblPassword, Source={StaticResource LocalizedStrings}}" x:Name="txtPasswordPlace" VerticalAlignment="Bottom" IsReadOnly="True" />            
        <PasswordBox Margin="0,72,0,210" VerticalAlignment="Bottom" x:Name="txtPassword" LostFocus="PasswordLostFocus" GotFocus="PasswordGotFocus" Opacity="0"/>
        <Button x:Name="btnLogin" Content="{Binding LocalizedResources.LblStartSession, Source={StaticResource LocalizedStrings}}" Click="BtnLogin_Click" VerticalAlignment="Bottom" Margin="0,0,0,150" />            
    </Grid 
```

**C#**

```
 public void CheckPasswordWatermark()
    {
        var passwordEmpty = string.IsNullOrEmpty(txtPassword.Password);
        txtPasswordPlace.Opacity = passwordEmpty ? 100 : 0;
        txtPassword.Opacity = passwordEmpty ? 0 : 100;
    }

    private void PasswordGotFocus(object sender, RoutedEventArgs e)
    {
        txtPasswordPlace.Opacity = 0;
        txtPassword.Opacity = 100;
    }

    private void PasswordLostFocus(object sender, RoutedEventArgs e)
    {
        CheckPasswordWatermark();
    } 
```

**快乐编码！**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:58:19.960

也许，尝试编辑phonetextbox的控件模板。用密码框替换文本框。

你可以得到一个密码框版phonetextbox，哈哈

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T11:27:26.953

您可以创建自己的 WatermarkedPasswordBox，它将从 PasswordBox 提供。这并不难。此链接将帮助您：

[http://www.c-sharpcorner.com/UploadFile/74f20d/create-a-watermark-textbox-effect-from-window-phone-7/](http://www.c-sharpcorner.com/UploadFile/74f20d/create-a-watermark-textbox-effect-from-window-phone-7/)

# c# - 使用 asp.net 页面从另一台服务器访问文件

> ID：12812594
> 
> 赞同：1
> 
> 时间：2012-10-10T05:37:19.113
> 
> 标签：c#, asp.net

在我的 ASP.NET 应用程序中，我必须显示一些图像。实际上这些图像保存在**其他服务器**中。在我的数据库中，我有文件路径。我需要从远程服务器访问文件到我的应用程序。我怎样才能做到这一点？我正在使用以下代码

```
imgFiles = Directory.GetFiles(strFullPath, 
                              strPkStock + "_*", 
                              SearchOption.TopDirectoryOnly); 
```

但这会引发错误，提示**“访问路径被拒绝”**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:41:15.660

您必须在其他服务器上具有文件系统访问权限才能执行此操作，我相信您不会拥有它。

完成它的最短方法是，从其他服务器发布图像文件夹并使用图像的 url 而不是文件系统路径来访问它。这样，您的 asp.net 应用程序将能够轻松访问这些图像。实际上，客户端浏览器将直接从其他服务器访问这些图像，您只需更改图像的 src。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:12:02.317

Murtuza Kabul 建议通过 HTTP/HTTPS 访问文件可能是最简单的方法。您可以将 HTTPS 与客户端证书一起使用，以防止其他用户/机器从同一 HTTPS 服务器读取文件。

如果您想直接访问其他服务器共享文件夹上的文件，您需要确保访问文件的代码在至少对该共享文件夹具有读取权限的帐户下运行。

请注意，默认配置（代码在特殊匿名帐户或调用用户的凭据下运行）代码运行的帐户将没有其他服务器上的权限（匿名，因为它是本地帐户，用户由于对委派的限制也称为“NTLM单跳地狱”）。

您最简单的选择是在具有其他服务器权限的某个帐户下运行应用程序投票，并取消模拟当前用户以处理帐户。您还可以显式模拟某些帐户来访问远程文件。

# java - 如何将 ResultSet 对象转换为一个特定的 POJO 类对象？

> ID：12812595
> 
> 赞同：1
> 
> 时间：2012-10-10T05:37:21.130
> 
> 标签：java, resultset

1.  例如，我有一个结果集，其中包含有关员工详细信息的详细信息，并且我在数据库中有一个员工表，我正在从中选择所有详细信息

2.  我有类似于 Employee Table 的 java POJO 类什么是实现将结果集转换为 Employee 类对象的最佳方法

3.  如果我有多个像 Employee 这样的类和多个表，那么最好的实现方法是什么？如何编写可重用的代码。

我现在正在使用以下符号。

```
public Employee{

    private int empId;

    public setEmpId(int empId){
        this.empId = empId;
    }

    public int getEmpId(){
        return this.empId;
    }
}

public class SetResultSetToEmployee{

    public Employee getEmployee(){
        Employee e = new Employee();
        e.setEmpId(resultSet.getInt("EmpId"));
        return e;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:12:53.173

Mybatis，或者像 Hibernate 这样的 ORM 可能是你最好的解决方案。
但是，如果你真的需要使用 jdbc 的 ResultSet，并且想将 ResultSet 转换为 java Beans，你可以检查：

1.  来自 apache的[BeanUtils](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/ResultSetDynaClass.html)的ResultSetDynaClass 。
2.  [或者，像这样](http://www.codeproject.com/Tips/372152/Mapping-JDBC-ResultSet-to-Object-using-Annotations)自己编写一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T05:45:11.947

> 我有类似于 Employee Table 的 java POJO 类什么是实现将结果集转换为 Employee 类对象的最佳方法

*   如果您知道`JPA`，那将是最好的选择。您无需进行类型转换即可获取您的 POJO 对象。JPA 适用于 ORM（对象关系映射）。它直接将您的对象映射`POJO`到数据库表..当您可以直接从数据库中获取您的对象时..

*   如果你除了使用别无选择`JDBC`，那么你别无选择`TypeCasting`。

> 如果我有多个像 Employee 这样的类和多个表，那么最好的实现方法是什么？如何编写可重用的代码。

*   在 JDBC 的情况下，我不知道您在寻找什么样的可重用性，但是您可以实现一个`DB`类，并拥有所有的 `Query Templates`东西。对于您想要执行的任何查询，您可以使用该类。与分散在您的应用程序中的离散查询相比，这相对更好。

*   同样，如果您可以使用 JPA，则有一个 .. 的概念`Entities`。如果您想使用数据库进行多次获取、更新或插入，这对您来说会更容易.. 您可以获取适当的对象并将其转储到您的`Entity`，或将您的对象转储到您的数据库中，而不用担心任何类型的`Queries`.

**对于 JPA，您可以从以下任何链接开始：-**

*   [http://docs.oracle.com/javaee/5/tutorial/doc/bnbpz.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnbpz.html)
*   [http://www.vogella.com/articles/JavaPersistenceAPI/article.html](http://www.vogella.com/articles/JavaPersistenceAPI/article.html)
*   [JPA-101-Java-持久性解释](http://www.theserverside.com/news/1363883/JPA-101-Java-Persistence-Explained)
*   [使用 JPA 定义您的对象模型](http://www.theserverside.com/news/1363863/Defining-Your-Object-Model-with-JPA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:50:14.593

如果您真的想编写可重用的代码，请使用 ORM 工具，例如[http://www.hibernate.org/](http://www.hibernate.org/)之类的 ORM 工具。

# math - Lambda 演算简化

> ID：12812602
> 
> 赞同：2
> 
> 时间：2012-10-10T05:37:36.430
> 
> 标签：math, logic, lambda-calculus, reduction

下面是我发现难以减少的 lambda 表达式，即我无法理解如何解决这个问题。

(λmn(λsz.ms(nsz)))(λsz.sz)(λsz.sz)

我迷失了。

如果有人能带领我朝着正确的方向前进，将不胜感激

# android - 在android中创建一个启动器应用程序

> ID：12812603
> 
> 赞同：4
> 
> 时间：2012-10-10T05:37:40.340
> 
> 标签：android, android-launcher

我搜索了很多，但没有找到我想要的，如果这是重复的问题，我很抱歉..

我想制作一个这样的启动器应用程序[，](http://www.androidauthority.com/best-homescreen-launcher-apps-android-103889/)这[我](http://androidheadlines.com/2012/05/featured-top-10-best-android-launcher-apps.html)经历了一些教程，但我只是不知道我应该从哪里开始..请帮助

答案将不胜感激。提前致谢

# ios - 方向问题

> ID：12812605
> 
> 赞同：1
> 
> 时间：2012-10-10T05:37:47.240
> 
> 标签：ios

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
    {
        [self isPortraitSplash];
    }
    else if ([[UIDevice currentDevice] orientation] == UIInterfaceOrientationIsLandscape(interfaceOrientation))
    {
        [self isLandScapeSplash];
    }
    return  YES;
} 
```

在我的方法`isPortraitSplash`中`isLandScapeSplash`，我正在设置视图的框架。

当方向改变时，它总是在调用`isLandScapeSplash`- 无法调用`isPortraitSplash`方法。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:42:28.263

您现有的`if`陈述是将 a`BOOL`与 a进行比较`UIDeviceOrientation`。您的测试需要：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
    {
        [self isPotraitSplash];
    }
    else if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
    {
        [self islandScapeSplash];
    }
    return  YES;
} 
```

`UIInterfaceOrientationIsPortrait` [返回一个 BOOL](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/macro/UIInterfaceOrientationIsPortrait)，这就是您在`if`语句条件中所需要的。

**更新：**我还要补充一点，我同意其他答案，即最好在`willRotateToInterfaceOrientation:duration:`而不是`shouldAutorotateToInterfaceOrientation:`.

**但是，这不是您的原始代码失败的原因。** 原始代码失败是因为`if`测试`UIDeviceOrientation`比较`BOOL`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T05:45:04.223

使用`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`代替`shouldAutorotateToInterfaceOrientation`，它保证在旋转发生之前被调用。

不要删除`shouldAutorotateToInterfaceOrientation`，为您要支持的每个方向返回 YES。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T05:44:00.510

首先在

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

您必须声明要支持的所有方向。

并且在

```
- (BOOL)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
    {
        [self isPotraitSplash];
    }
    else if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
    {
        [self islandScapeSplash];
    }
} 
```

您必须设置框架或任何其他布局更改，并像上面一样使用。

# objective-c - 如何使用对话框将默认字符串从本机 ios 应用程序设置为 iphone 应用程序的 facebook 页面

> ID：12812609
> 
> 赞同：0
> 
> 时间：2012-10-10T05:37:57.587
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

下面是我的代码

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"MyTestAPP", @"name",
                               @"http://myserver.com/", @"link",
                               @"My Post!", @"caption",
                               @"ValuedCommunity", @"description",
                               myMessage, @"message",              
                               nil];

// Publish.

[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

现在使用此代码，当我单击发布按钮时，我得到了 ![在此处输入图像描述](../Images/18e5318f3c7e4a437f500c0728250376.png)

我已经使用以下代码尝试了图形 api，但它给了我一个错误消息“ ***facebookerrdomain error 10000*** ”。 **[facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self];** 现在我想要做的是，想要设置“myMessage”文本而不是对此说些什么。有可能这样做吗？如果是，那么我该如何实现。请指教谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:16:36.647

嗨，Every1，我从过去 2 天开始一​​直在尝试解决这个问题，以及我是如何解决的，在 NSMutableDictionary 的 param 对象中添加一个名为 access_token 的参数，如下所示

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Ahha", @"name",
                               @"http://vctestserver.com/", @"link",
                               @"VCAHHA", @"caption",
                               @"ValuedCommunity", @"description",
                               storyTwtFB, @"message", 
                               accessToken,@"access_token",
                               nil];
[facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我从委托方法 [facebook accessToken]获得**accessToken 的值。**storyTwtb 是我想在 facebook 上发布的应用程序字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:01:10.363

一切皆有可能。使用`requestWithGraphPath:andParams:andHttpMethod:andDelegate:`方法并将权限设置为`publish_stream`，然后您将收到消息。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   yourMessage,@"message",nil];

    NSString *user_selected = [NSString stringWithFormat:@"me/feed"];    
    [facebook requestWithGraphPath:user_selected andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

# linux - 如何在linux上运行后台进程，然后在解析输出后将其杀死？

> ID：12812611
> 
> 赞同：0
> 
> 时间：2012-10-10T05:38:12.593
> 
> 标签：linux, shell, background-process, tcpdump

我想使用 perl 脚本在 linux shell 上启动 tcpdump 作为后台进程，但我必须解析输出，之后我需要终止进程。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:54:54.733

在 Unix 上，传统的方法是编写小型且非常专业的程序并将它们连接在一起。为什么不直接将 tcpdump 输出通过管道传输到脚本标准输入中？

我的 perl 有点生疏了：

```
$| = 1;
my $pid = open(DUMP, "tcpdump -i eth1 -l -n 2>\&1 |");

while(<DUMP>) {
    # do something
    if($some_condition) {
        `kill $pid`;
        last;
    }
} 
```

# mysql - brew链接mysql没有完成

> ID：12812613
> 
> 赞同：37
> 
> 时间：2012-10-10T05:38:26.360
> 
> 标签：mysql, macos, homebrew

由于某种原因 brew 没有链接 mysql 并且它抱怨许可。我`chmod`的文件夹，`777`但我仍然有同样的问题

```
 laptop$ brew install mysql 
```

错误：

```
 mysql-5.5.27 already installed, it's just not linked

 laptop$ brew link mysql

 Linking /usr/local/Cellar/mysql/5.5.27... Warning: Could not link mysql. 
```

正在取消链接...

```
 Error:
    Could not symlink file: /usr/local/Cellar/mysql/5.5.27/lib/plugin
    /usr/local/lib is not writable. You should change its permissions. 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-10-10T12:20:44.177

我想出了问题所在。这是前提的问题，我基本上是这样做的

```
sudo chown -R $(whoami) /usr/local/lib/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-22T12:18:14.033

我相信你应该：

```
sudo chmod 775 /usr/local/lib/ 
```

并确保您是文件组的成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T21:44:45.260

不是一个真正的答案，而是一个评论，可以帮助那些像疯了一样拔头发`chown`和ing 并且仍然在链接时出现“不可写”错误的人。`chmod`例如，从`$ brew doctor -d`

```
Error: /usr/local/lib/pkgconfig isn't writable.

This can happen if you "sudo make install" software that isn't managed by
by Homebrew. If a formula tries to write a file to this directory, the
install will fail during the link step. 
```

我建议您检查链接文件及其依赖项，然后删除它们并通过自制软件重新安装，或者在不使用自制软件的情况下安装软件包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T02:07:08.813

在我的系统中，这非常有效。

```
chown -R $(whoami) /usr/local/share/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-16T06:16:55.337

我试图对这个问题给出一个一般性的答案。碰巧既不`/usr/local/lib/`也不`/usr/local/share`/ 给出错误。您应该查看不可写的确切目录。在“错误：无法符号链接”之后立即提到它。所以执行该目录的命令。

```
chown -R $(whoami) [/bath/to/your/dir] 
```

# iphone - 如何在 didSelectRowAtIndexPath 中使用 for 循环来最小化我的代码？

> ID：12812615
> 
> 赞同：1
> 
> 时间：2012-10-10T05:38:49.267
> 
> 标签：iphone, ios, ios5, ios4

我有两个部分“AM”和“NZ”，如下所示。我计划添加几个城市，但看起来我的 didSelectRowAtIndexPath 代码会很长。

什么循环，以及如何实现它，这样我就不必添加很多 else if。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    switch (section) {
        case 0:
            return @"A-M";
            break;

        case 1:
            return @"N-Z";
            break;

        default:
            break;
    }
    return nil;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0 && indexPath.row == 0) {
        self.cityController.title = @"Bologna";
    }

    else if (indexPath.section == 0 && indexPath.row == 1) {
        self.cityController.title = @"Florence";
    }

    else if (indexPath.section == 1 && indexPath.row == 0) {
        self.cityController.title = @"Naples";
    }

    else if (indexPath.section == 1 && indexPath.row == 1) {
        self.cityController.title = @"Rome";
    }

[self.navigationController pushViewController: self.cityController animated: YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:44:31.963

我会采取不同的方法来编写代码。因为您在其中对这些城市名称进行了硬编码，所以您将更加难以添加/删除/以其他方式维护您的代码。在最基本的层面上，您可以在表格视图中保留一系列城市。这将允许您在不更改代码的情况下更改数据。

标题：

```
@interface MyTableViewController : UITableViewController

@property (nonatomic, strong) NSArray *cities;

@end 
```

执行：

```
@implementation MyTableViewController

// other code

#pragma mark - UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *city = self.cities[indexPath.row];

    MyCityController *controller = // Init code;
    controller.title = city;

    NSLog(@"Selected city: %@", city);
}

// Other code

@end 
```

您的数据源应该类似地实现：

```
- (UITableViewCell *)tableView:(UITableView *) cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CELL_ID = @"CITIES";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CELL_ID];

    cell.textLabel.text = self.cities[indexPath.row];

    // Other setup code

    return cell;
} 
```

您可以使用硬编码值延迟加载它们：

```
- (void)cities {
    if (_cities == nil) {
        _cities = @[@"Bologna", @"Florence", @"Milan", @"Naples", @"Rome"];
    }

    return _cities;
} 
```

或者从 plist 中加载它们`viewDidLoad`

```
- (void)viewDidLoad {
    if (!self.cities) {
        NSString *path = [[NSBundle mainBundle] pathForResource:@"cities" ofType:@"plist"];
        NSDictionary *cityDict = [NSDictionary dictionaryWithContentsOfFile:path];
        self.cities = [cityDict objectForKey:@"cities"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:48:11.493

我同意@Wayne Hartman 的观点，你不想要一个 for 循环，你只想要一个包含所有数据的数组。每次生成（或出列）单元格时都会调用 cellForRowAtIndexPath 并且如果您只是告诉它从数组中加载其标题，例如

```
[cell.textLabel setText:[citiesInItaly objectAtIndex:indexPath.row] 
```

这将比硬编码单元格标题更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:43:37.687

你为什么不用所有这些填充静态数组可能是这样的

```
NSArray *strings = @[ @[ @"City1", @"B", @"C" ], @[ @"D", @"E", @"F" ]]; 
```

之后就返回这个。

```
Strings[sectionindex][roeindex]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:45:49.043

您应该有一个适当的数据结构来保存表中每一行的数据。在这种情况下，您应该有一个字典数组（或类似的东西）。顶级数组每个部分将有一个条目。对于节中的每一行，节数组将有一个条目。这些条目中的每一个都将是字典或一些表示该行数据的自定义对象。这将包括标题和有关该行数据的任何其他内容。

此数据结构将用于“cellForRowAtIndexPath”和“didSelectRowsAtIndexPath”。根据 indexPath 您提取字典或自定义类。

因此，您的整个 'didSelectRowAtIndexPath' 只需几行代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T05:46:53.037

您可以使用 switch case 来避免 if-else。但是您是否在 tableview 中显示这些城市名称并基于将名称发送到 cityController 的选择？如果是，那么也不需要使用 switch case，因为您显示这些名称的方式使用数组，同样您可以使用 indexPath 发送该名称。

使用开关盒：

```
switch(indexPath.section)
{
  case 0:
        {
           switch(indexPath.row)
           {
             case 0:
              stmt;
              break;

              case 1:
              stmt;
              break;
           }
        }
  same as case0... 
} 
```

# log4net - Log4Net RollingFileAppender 不写长字符串

> ID：12812617
> 
> 赞同：0
> 
> 时间：2012-10-10T05:39:10.370
> 
> 标签：log4net, rollingfileappender

我有以下 Log4Net 配置：

```
<appender name="WSLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="${APPDATA}\xxxx"/>
      <evaluator type="log4net.Core.LevelEvaluator,log4net">
        <threshold value="WSLog" />
      </evaluator>
      <filter type="log4net.Filter.LevelMatchFilter">
        <levelToMatch value="WSLog" />
      </filter>
      <filter type="log4net.Filter.DenyAllFilter" />
      <bufferSize value="1"/>
      <appendToFile value="true"/>
      <rollingStyle value="Size"/>
      <datePattern value="yyyyMMdd"/>
      <MaxSizeRollBackups value="7"/>
      <StaticLogFileName value="true"/>
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
      <maximumFileSize value="5MB"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern 
          value="%newline__________________________________________________________%newlineTime:%utcdate%newline%newline%message%newline"/>
      </layout>
    </appender> 
```

这工作得很好，直到我有一个需要记录的巨大字符串。例如，如果字符串大约有 8000 个字符，Log4Net 会简单地避免写入它。它甚至没有写它被截断。有没有办法记录大字符串（完全甚至截断）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:38:16.310

有没有试过开启 log4net 的内部调试，看看 log4net 有没有报错

我尝试了一个测试程序，记录类似的东西没有问题

```
log.Debug("Begin".PadRight(16000, '*') + "End"); 
```

# sql - 多对多关系数据库设计

> ID：12812620
> 
> 赞同：2
> 
> 时间：2012-10-10T05:39:27.377
> 
> 标签：sql, foreign-keys, schema, entity-relationship

我有一张名为`config`. 每`config`行都有一个`services`与之相关的列表。共有 10 个具体`services`可用。

我应该如何设计架构？`config`架构已存在。这是我的想法，但不确定它是否正确。

```
config
===================
config_id primary key  
col-1  
col-2  
...  
col-n 
```

我打算介绍一个新表。

```
serviceconfigmap 
======================================== 
config-id # foreign key to config table  
svc_id    # service identifier 
```

这种方法的问题是，`serviceconfigmap`表将复制`svc_id`每个列`config-id`

这是正确的方法吗？欢迎任何更好的想法

=========================================

**编辑**

我了解我错误地将我的要求称为`One-to-Many`而不是`Many-to-Many`. 编辑了我的问题。

每个配置可以有多个服务，并且可以在不同的配置之间共享相同的servoce。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T05:47:55.793

您正在设计`Many-To-Many`关系，因为配置有许多服务，并且服务可以包含在不同的配置中。

您需要为此准备三个表`Config`，`Service`和`MappingTable`

```
Config
=========
Config_ID         => unique
Config_Name
.....

Service
=========
Service_ID        => unique
Service_Name
.....

ConfigServiceMap
==================
Config_ID         
Service_ID
..... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T05:42:07.277

如果它纯粹是一个，`1->many`我只会`config_id`在表中添加一个`services`

所以你的服务表看起来像

```
service_id (primary key)
config_id (foreign key)
col1
col2
...
coln 
```

如果是，您只需要一个映射表`many<->many`

**编辑**

那么这不是一对多，而是多对多。您可能希望坚持使用多对多表，但在列 (config_id, service_id) 上放置一个主键，以免每个配置条目重复服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T05:42:48.937

目前的“配置”表违反了第一种标准形式，因为它具有重复组（每个服务一个字段）。定义新服务时会发生什么？您将不得不更改“配置”表的结构。因此，配置和服务之间的“连接表”是标准方法。

如果一个服务可以属于多个配置，那么连接表就成为必须的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T05:42:59.053

是的，你是对的，你需要第三个表来存储两个表的外键。希望有帮助

# maven - 可以用 Maven 加载安全 JARS 吗？

> ID：12812622
> 
> 赞同：2
> 
> 时间：2012-10-10T05:39:49.690
> 
> 标签：maven, jar

我们有一些单元测试会失败，除非您的 $JAVA_HOME/jre/lib/security 文件夹中有两个 jar，local_policy.jar 和 US_export_policy.jar。我应该看看我们是否可以将它们放在项目文件夹中，然后告诉 Maven 在构建时使用它们（“mvn install”）。也许有依赖标签之类的东西？是的，我知道每个人都应该在他们的 $JAVA_HOME 中安装这些，但这是我被要求研究的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:44:35.020

您说的是 Maven 依赖范围。文档[在这里](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)。你可以说 Maven 使用一些库只是为了使用“测试”范围进行测试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T08:54:47.370

您可以将它们添加为[Maven systemPath 依赖](http://maven.apache.org/pom.html#Dependencies)项。

> **系统路径**
> 
> 仅当依赖范围是系统时才使用。否则，如果设置了此元素，则构建将失败。路径必须是绝对的，所以建议使用一个属性来指定机器特定的路径（下面有更多的属性），比如${java.home}/lib。由于假定系统范围依赖项是先验安装的，因此 Maven 不会检查项目的存储库，而是检查以确保文件存在。如果没有，Maven 将无法构建并建议您手动下载并安装它。

```
<dependencies>
    <dependency>
        <!-- The groupId can be anything. Use your own groupId for example -->
        <groupId>anything</groupId>
        <artifactId>local_policy</artifactId>
        <!-- The version can be anything. Use the version of Java for example -->
        <version>7.0</version>
        <systemPath>${java.home}/lib/security/local_policy.jar</systemPath>
        <scope>system</scope>
    </dependency>
    <dependency>
        <!-- The groupId can be anything. Use your own groupId for example -->
        <groupId>anything</groupId>
        <artifactId>US_export_policy</artifactId>
        <!-- The version can be anything. Use the version of Java for example -->
        <version>7.0</version>
        <systemPath>${java.home}/lib/security/US_export_policy.jar</systemPath>
        <scope>system</scope>
    </dependency>
</dependencies> 
```

# java - 加载一个小型 SQLite 数据库（20 行左右）以使用 Android 读取

> ID：12812623
> 
> 赞同：2
> 
> 时间：2012-10-10T05:39:56.440
> 
> 标签：java, android, sqlite

我是 Android 开发的新手，但我不是业余程序员。我想获取一个保存在桌面上的数据库中的小型 SQLite 表（我已从 CSV 文件导入），并能够在我的应用程序中访问其内容。我真的不需要编辑内容，只需从中读取即可。

我在互联网上找到了这个源代码示例，我认为它可以完成这项工作，但它没有按预期工作。它告诉我首先将数据库保存到资产文件夹中。我不知道我是否以正确的方式去做这件事，而且我厌倦了花时间在互联网上搜索。任何帮助将非常感激！

```
public class DataBaseHelper extends SQLiteOpenHelper {

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.bigapple0208.seth3/databases/";
    private static String DB_NAME = "bigapple0208database"; 
    private SQLiteDatabase myDataBase;  
    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     **/
    public void createDataBase() throws IOException{
        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{
            //By calling this method and empty database will be created into the default system path
            //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){
            //database does't exist yet.
        }

        if(checkDB != null){
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{
        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {
        if(myDataBase != null)
            myDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
    // Add your public helper methods to access and get content from the database.
    // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
    // to you to create adapters for your views.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:54:16.920

将数据库包含在您的资产文件夹中，然后查看本教程。本质上，它将数据库从资产复制到 /data/data/YOURPACKAGENAME/databases，您可以从那里使用平台 SQLite 类访问它。

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

这是普遍接受的“正确方法”，稍有不同是将数据库包含在项目的 res/raw 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:41:49.287

我认为在 checkDatabase() 方法中你应该使用 NO_LOCALIZED_COLLATORS。

当您在 android 项目之外创建数据库时，只需确保创建元数据表（如 Android 文档中所述）或在调用 SQLiteDatabase.openDatabase() 时设置 SQLiteDatabase.NO_LOCALIZED_COLLATORS 标志。

```
 checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY); 
```

将其替换为

```
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

和 openDataBase() 一样

```
SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T05:46:30.183

您无法通过提供静态路径来访问数据库，这也不可取，最好使用 USB 调试将您的设备与 eclipse 连接，然后使用 DDMS 将数据库推送到其中

# ios - 使用 GPUImage 框架仅处理部分电影的任何方式

> ID：12812624
> 
> 赞同：2
> 
> 时间：2012-10-10T05:39:57.230
> 
> 标签：ios, gpuimage

例如，电影有 100 秒。我想寻找到电影的第 5 秒，开始处理，然后在电影的第 10 秒结束处理。

有什么方法可以使用 GPUImage 框架来做到这一点？如果现在不支持修改框架以执行此操作，是否有任何指示？

# node.js - node-gyp 配置总是因 EXDEV 错误而失败

> ID：12812625
> 
> 赞同：1
> 
> 时间：2012-10-10T05:40:04.007
> 
> 标签：node.js, fedora, node-gyp

我正在尝试编译以下 MWE，基本上取自[官方 Node.js 文档](http://nodejs.org/api/addons.html)：

```
#include<v8.h>
#include<node.h>

using namespace v8;

Handle<Value> Method (const Arguments& _args) {
    HandleScope Scp;
    return Scp.Close (String::New ("world"));
}

void Initialize (Handle<Object> _target) {
    _target->Set (
        String.NewSymbol ("hello"),
        FunctionTemplate::New (Method)->GetFunction ()
    );
}

NODE_MODULE ("Hello", Initialize) 
```

对应`binding.gyp`文件如下：

```
{
    "targets": [
        {
            "target_name": "hello",
            "sources": ["hello.cpp"]
        }
    ]
} 
```

当我尝试运行时`node-gyp configure`，我收到以下错误：

```
$ node-gyp configure
info it worked if it ends with ok
info downloading http://nodejs.org/dist/v0.6.18/node-v0.6.18.tar.gz
ERR! Error: EXDEV, link '/usr/lib/nodejs/node-gyp/legacy/tools/gyp/pylib/gyp/easy_xml.pyc'
ERR! not ok
$ 
```

我正在运行 64 位版本的 Fedora 17。这是输出`uname -a`：

```
Linux localhost.localdomain 3.5.5-2.fc17.x86_64 #1 SMP Wed Oct 3 13:20:37 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

以下是更多系统信息：

```
$ rpm -q nodejs
nodejs-0.6.18-1.fc17.x86_64
$ rpm -q node-gyp
node-gyp-0.4.1-2.fc17.noarch 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:40:33.513

我在我的 64 位 FC16 系统上跟踪了这样的问题（以及相关的 EPERM 而不是 EXDEV）到旧版本的 node-gyp 试图将文件从系统安装位置（在根文件系统上）硬链接到 ~/ .node-gyp 缓存（在不同的文件系统上）。

这个问题在后来的 node-gyp 版本中得到了修复。

对我来说，解决方案是从通过 tchol.org RPM repo 分发的“古老”节点和 node-gyp 及其 0.6 RPM 到当前版本的 node (0.8.12)，它捆绑了自己的 npm 和 node-gyp 并且不'这里没有列出错误。

# oop - vbscript 静态类变量/方法？

> ID：12812630
> 
> 赞同：5
> 
> 时间：2012-10-10T05:40:39.557
> 
> 标签：oop, vbscript, static-methods, static-variables, class-method

有没有办法在 vbscript 中为每个类设置一个变量？

如果不是，模拟它的最佳方法是什么？为类旁边声明的全局变量添加前缀？

还有一种方法可以声明静态/类方法（对于静态构造函数）还是我强制为函数添加前缀？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T09:36:28.553

在支持类级别/静态数据或方法的语言中，您可以

1.  将数据或方法显式关联/绑定到类定义的对象集。因此，您可以拥有 Customer.Count**和**Product.Count，并且客户代码中的普通 Count（或 @@Count）将访问正确的数字。
2.  在没有类实例的情况下使用此类数据或方法（还）。

VBScript 不支持静态数据或方法。您必须使用全局数据或函数/子函数并在脑海中进行关联（也许在命名约定的帮助下）。在没有对象的情况下访问这些 'static'=global 元素是微不足道的，但是 - 显然 - 应该小心完成。

您可以在对象中嵌入一个或多个单例对象或代码引用 (GetRef()) 以将它们绑定到更接近类的位置，但这会增加实例的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T01:02:15.200

你可以做这样的事情来模拟一个静态类：

```
Class Defines_
   Public Sub DoSomethingUseful
   End Sub
End Class

Dim Defines : Set Defines = New Defines_
...

Defines.DoSomethingUseful 
```

这可以用来给你一些类似于构造函数的东西（实际上，工厂方法）：

```
Class Something
   Private mValue
   Public Property Get Value : Value = mValue : End Property
   Public Property Let Value(x) : mValue = x : End Property
End Class

Class SomethingFactory_
   Public Function Create(value)
      Set Create = New Something
      Create.Value = value
   End Function
End Class
Dim SomethingFactory : Set SomethingFactory = New SomethingFactory_
...

Dim something : Set something = SomethingFactory.Create(5) 
```

# c# - 如何编写参数化的 oracle 插入查询？

> ID：12812634
> 
> 赞同：4
> 
> 时间：2012-10-10T05:41:07.917
> 
> 标签：c#, oracle

我使用 oracle 作为我的后端，我编写插入查询如下，我不知道它是不是正确的方法，

```
insert into Emp_table (SL_NO,empane,empid,salaray) values(1,'sree',1002 ,:salary); 
```

在查询中，我正在使用存储过程计算薪水并将其作为我的输出参数薪水，因此我必须将其传递给我的插入查询，以便我如何编写。如果我像所示那样写，我会遇到以下错误

```
ORA-06550: line 1, column 175:
PL/SQL: ORA-00933: SQL command not properly ended
ORA-06550: line 1, column 7:
PL/SQL: SQL Statement ignored 
```

请帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-04T14:31:33.057

Microsoft[已弃用其 Oracle 提供程序](http://msdn.microsoft.com/en-us/library/77d8yct7(v=vs.110).aspx)(System.Data.OracleClient)，因此请使用第三方提供程序，例如[Oracle 的 Data Provider for .NET](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)。[下面的代码示例与FSX 的答案](https://stackoverflow.com/a/12812758/88204)基本相同，只是没有`AddWithValue`方法的方便。

```
command.Parameters.Add(new OracleParameter("SL_NO", 1));
command.Parameters.Add(new OracleParameter("empane", "sree")); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T05:50:58.637

假设工资金额是20000，你可以试试这个代码：

```
var commandText = "insert into Emp_table (SL_NO,empane,empid,salaray) values(:SL_NO,:empane,:empid,:salary)";

using (OracleConnection connection = new OracleConnection(connectionString))
using (OracleCommand command = new OracleCommand(commandText, connection))
{
    command.Parameters.AddWithValue("SL_NO", 1);
    command.Parameters.AddWithValue("empane", "sree");
    command.Parameters.AddWithValue("empid", 1002);
    command.Parameters.AddWithValue("salaray", 20000);
    command.Connection.Open();
    command.ExecuteNonQuery();
    command.Connection.Close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-29T07:26:50.770

```
 strin sql= "insert into Emp_table (SL_NO,empane,empid,salaray) values(:SL_NO,:empane,:empid,:salary)";
    OracleCommand command = new OracleCommand(sql, connection)
    command.Parameters.Add(new OracleParameter("SL_NO", 1);
    command.Parameters.Add(new OracleParameter("empane", "sree"));
    command.Parameters.Add(new OracleParameter(("empid", 1002));
    command.Parameters.Add(new OracleParameter(("salaray", 20000));
    command.Connection.Open();
    command.ExecuteNonQuery();
    command.Connection.Close(); 
```

# android - 用动画移动上部图像布局以获取向下图像单击

> ID：12812635
> 
> 赞同：1
> 
> 时间：2012-10-10T05:41:11.087
> 
> 标签：android

我有两个相互重叠的图像，我正在将上面的图像动画（滑动）到屏幕右侧，直到它的某些部分保留在屏幕上，这样我就可以将它动画回原来的位置，现在我想得到点击下面的图片开始我的新活动，但我只点击上面的图片，我知道为上面的图片设置动画不会移动它的布局。但我试图移动上图的布局，但移动布局后，上图消失了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:32:11.740

翻译上图后，将其可点击性设置为false，如 aboveImage.setClickable(false); 试试下面的代码，它会工作

## 动画活动.java：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.ImageView;

public class AnimationActivity extends Activity {
     ImageView aboveImage;
     ImageView belowImage;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
         aboveImage=(ImageView) findViewById(R.id.image_above);
         belowImage=(ImageView) findViewById(R.id.image_below);
        aboveImage.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                /*belowImage.setVisibility(View.VISIBLE);
                overridePendingTransition(R.anim.move_to_right,R.anim.move_to_left);*/
                Animation animation = new TranslateAnimation(0, 100,0, 0);
                animation.setDuration(1000);
                animation.setFillAfter(true);
                aboveImage.startAnimation(animation);
                aboveImage.setVisibility(0);
                aboveImage.setClickable(false);

            }
        });
        belowImage.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                startActivity(new Intent(getApplicationContext(),Activity2.class));

            }
        });
    }
} 
```

## 主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/image_below"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/cherry" />

    <ImageView
        android:id="@+id/image_above"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/amalapaul" />

</RelativeLayout> 
```

# java - Java、Struts2 和 AJAX。需要一些方向

> ID：12812642
> 
> 赞同：0
> 
> 时间：2012-10-10T05:41:42.790
> 
> 标签：java, hibernate, struts2, struts2-jquery

总结如下：我需要构建一个简单的 Java Web 应用程序，除此之外，它可以让用户从几个表中创建、更新、删除和查看记录。

我的应用程序需要使用 Struts2 和[struts2-jquery-plugin](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)来实现 AJAX 功能（网格）。

但是，我是 Struts2（以及一般的 Java）的新手，所以我一直在努力学习全球各地的教程。而且我搜索得越多，我就越能找到不同的解决方案和插件依赖项，这意味着需要阅读更多的教程。除了 .jsp 和操作之外，我已经编写了业务、dao 和 bean 的所有内容。我现在时间不多了，不能再花一周的时间在错误的方向上。希望这个线程也可以节省其他人的时间。

问题：

1-我已经下载了展示示例，它们似乎都使用了休眠插件。它是必须的还是我可以在没有它的情况下使用网格？因为此时对于单个人头来说信息太多了。

2- 与会话有关。我是否需要配置一个拦截器以在每次操作调用时加载以检查用户是否已登录，或者在 Struts2 中默认情况下是否有任何处理？我试图避免使用 struts.xml，所以我使用约定。如何在没有 xml 配置的情况下实现此会话检查？

3-如果有人可以提供一些使用 struts2 和网格的简短快速的示例，将不胜感激。

很快就会有更多问题出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:41:44.663

我的 2 美分：总是使用 KISS（保持简单，愚蠢）模式，特别是如果您是 Struts2、JSP 和 Java 的新手...

我建议从小事开始。登录动作，第一个动作，第一个 JSP。

当一切正常时（您可以通过 First Action 从 DB 读取数据并将其显示在 First JSP 上），您可以更深入（EJB、拦截器、验证等）。

顺便说一下，对于 Session Checking Interceptor，看看[这里](http://andrealigios.blogspot.it/2012/08/struts2-write-your-own-interceptor-for.html)

（你在登录页面上放了一个布尔值，你从拦截器中检查它，然后你可以忘记它，而不是在每个动作上检查它......）

# c# - 我如何使新键（关键字）替换旧键（关键字）？

> ID：12812644
> 
> 赞同：0
> 
> 时间：2012-10-10T05:41:50.607
> 
> 标签：c#

在单击按钮事件中，我做了：

```
if (File.Exists(@"d:\Keywords.txt"))
            {
                entries = File.ReadAllLines(@"d:\Keywords.txt");
                foreach (string entry in entries)
                {
                    string[] values = entry.Split(',');
                    if (LocalyKeyWords.Count == 0)
                    {
                        LocalyKeyWords[values[0]] = new List<string>();
                    }
                    else
                    {
                        LocalyKeyWords[values[0]].Clear();
                    }
                    for (int i = 1; i < values.Length; i++)
                        LocalyKeyWords[values[0]].Add(values[i]);
                }
            } 
```

我添加/更改的部分是：

```
if (LocalyKeyWords.Count == 0)
                        {
                            LocalyKeyWords[values[0]] = new List<string>();
                        }
                        else
                        {
                            LocalyKeyWords[values[0]].Clear();
                        } 
```

当它第一次文本文件不存在时它可以，但是当文件存在并且里面已经有 url 和键时，我得到了同样的错误：LocalyKeyWords[values[0]].Clear();

错误是：字典中不存在给定的键。我看到值在索引 [0] 中包含两个索引，在 url 和索引 [1] 中，键和 LocalyKeyWords 也包含一个索引，即值。

那么我该如何解决这个问题呢？当我在构造函数中运行程序时，即使我没有点击按钮，我如何加载文本文件？

在构造函数中运行程序时以及单击按钮时如何加载文本文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:02:57.357

如果您不想丢失所有更改，则必须先读取文件并将其值存储在字典中。如果你想覆盖现有的 url 键，那么你应该`List`每次都清除。例如：

```
private void button6_Click(object sender, EventArgs e)
{
    string[] entries = File.ReadAllLines(@"D:\Keywords.txt"));
    foreach (string entry in entries)
    {
        string[] values = entry.Split(',');
        LocalyKeyWords[values[0]].Clear();
        for (int i = 1; i < values.Length; i++)
            LocalyKeyWords[values[0]].Add(values[i]); 
    }

    using (var w = new StreamWriter(@"D:\Keywords.txt"))
    {
        crawlLocaly1 = new CrawlLocaly();
        crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
        DialogResult dr = crawlLocaly1.ShowDialog(this);
        if (dr == DialogResult.OK)
        {
            if (LocalyKeyWords.ContainsKey(mainUrl))
            {
                LocalyKeyWords[mainUrl].Clear(); //probably you could skip this part and create new List everytime
                LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
            }
            else
            {
                LocalyKeyWords[mainUrl] = new List<string>();
                LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
            }

            foreach (KeyValuePair<string, List<string>> kvp in LocalyKeyWords)
            {
                w.WriteLine(kvp.Key + "," + string.Join(",", kvp.Value));
            }
        }
    }
} 
```

# optimization - 优化二分查找

> ID：12812656
> 
> 赞同：0
> 
> 时间：2012-10-10T05:42:38.820
> 
> 标签：optimization, binary-search

我看过很多二分搜索的例子，很多方法如何优化它，所以昨天我的讲师写了代码（在这段代码中，我们假设第一个索引从 1 开始，最后一个索引是 N，所以 N 是数组的长度，考虑它在伪代码中。代码是这样的：

```
L:=1;
R:=N;
while( L<R)
{
m:=div(R+L,2);
 if A[m]> x
{
 L:=m+1;

}
else
{
 R:=m;

}
} 
```

这里我们假设数组是A，所以讲师说我们每次都不会浪费时间来比较元素是否在数组的中间部分，还有好处是如果元素不在数组中，index 说明了它的位置，所以它是最优的，他是对的吗？我的意思是我从 John Bentley 那里看到了很多类型的二进制搜索，例如（编程珍珠）等等，这段代码真的最优吗？在我的例子中它是用 pascal 编写的，但是语言不依赖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:50:03.270

这实际上取决于您是否找到该元素。如果你不这样做，这将保存一些比较。如果您可以在前几跳中找到元素，那么您就节省了所有*后续*比较和算术的工作。如果数组中的所有值都是不同的，那么很明显你不太可能在早期就找到正确的索引——但是如果你有大量包含相同值的数组，那会改变数学。

这种方法还意味着您不能像其他方式那样缩小范围*-*这：

```
R:=m; 
```

通常是

```
R:=m-1; 
```

...尽管这很少会产生重大影响。

重要的一点是，这不会改变算法的整体复杂性——它仍然是 O(log N)。

> 另一个好处是，如果元素不在数组中，则索引说明它的位置

无论您是否检查是否相等，这都是正确的。我见过的每个二进制搜索实现都会提供该信息。

# javascript - 检查 Select 选项是否已经存在

> ID：12812662
> 
> 赞同：2
> 
> 时间：2012-10-10T05:43:06.130
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何通过 JQuery 检查选​​择中是否已存在选项](https://stackoverflow.com/questions/646317/how-can-i-check-whether-a-option-already-exist-in-select-by-jquery)

我有

```
<select name="saved" class="saved" multiple="multiple">
<option value="1">Hello</option>
<option value="2">Goodbye</option>
<option value="3">Wave</option>
</select> 
```

我将如何让 Jquery 检查 if 语句中的“已保存”中是否已经存在 value="2" 的选项

我正在寻找它是否存在 - 如果它被选中，则不是。

* * *

我在一个可能对多个选择框进行操作的函数中使用它。选择框的类名现在存储为 var "theSel" - 我该如何修改它

* * *

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T05:47:01.493

您可以使用`length`属性：

```
if ($('select.saved option[value="2"]').length) {
   // exists
} 
```

* * *

```
$(document).ready(function(){
    // ...
    if ($('select.'+theSel+' option[value="'+theValue+'"]').length) {
       // exists
    }
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:46:53.300

```
if( $('.saved option[value="2"]').length ){
   alert('Found !!')
} 
```

或者

```
if( $('.saved').has('option[value="2"]')){
   alert('Found !!')
}​ 
```

您可以使用任一`.length`属性或 `.has()`

[检查小提琴](http://jsfiddle.net/sushanth009/YRJSq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:50:17.273

```
if ($('.saved option[value="2"]').length >0) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:52:26.123

您可以像这样使用[`attribute equals`选择器](http://api.jquery.com/attribute-equals-selector/)：

```
if($('select[name="saved"] > option[value="5"]').length > 0) {
    console.log("Already exists");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:27:59.413

```
if( $("option[value='" + theValue + "']", "select." + theSel).length > 0 ) {

    // option exists

} 
```

`theValue`您的存储值在哪里，`theSel`是您存储的类名。

# qt - QPrinter 和西里尔文

> ID：12812663
> 
> 赞同：0
> 
> 时间：2012-10-10T05:43:14.380
> 
> 标签：qt, printing, qprinter

如何使用西里尔符号打印 html？我试图这样做：

```
QTextDocument *document = new QTextDocument();
document->setHtml(htmlContent);
document->print(printer); 
```

但文件以错误的编码打印。Html 编码为 utf-8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:36:17.640

假设 htmlContent 是 QString，您可能使用错误的编码创建它。例如，如果原始 HTML 数据（即字节）是 UTF-8，那么您应该使用类似

`htmlContent = QString::fromUtf8(myHtmlDataCharPtr);`

如果 htmlContent 是指向 UTF-8 数据的字符指针，那么您应该使用

`document->setHtml(QString::fromUtf8(htmlContent));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:17:25.870

QTextDocument 需要非常正确的 HTML 才能正常运行 - WebKit / Firefox / QWebBrowser 通常接受格式较差的输入并仍然正确显示它。因此，将输出写入文件并将其发送到一些 HTML 检查程序，修复所有问题，然后重试。

# android - 我无法从桌面 ping 手机/Android 的原因是什么

> ID：12812668
> 
> 赞同：0
> 
> 时间：2012-10-10T05:43:34.437
> 
> 标签：android, web-services, ping

我在我的 android 上安装了一个简单的网络服务器，网络服务器正在使用内部 IP 地址运行，我试图 ping 我的外部手机 IP 没有任何结果。我尝试连接到我的 WiFi 网络并使用内部 IP 地址 ping，仍然没有结果。我的运营商是否有阻止程序？

多谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:54:50.773

我猜这有几个原因。我不是网络高手，但我首先想到的是某种防火墙。根据我对智能手机的了解，您必须特别授予建立连接的权限。下一个可能的原因可能是协议。也许它是运营商或发送数据包的 AOS 方法，但我在这方面还没有接近 100%。如果我的 ADSL 没有停机，我可以提供更多帮助。

我的建议是：您是否尝试过使用手机的 MAC 地址？

很抱歉快速n脏响应。希望对一些人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T06:07:50.650

我认为 ping 呼叫有很多技术正在应用，首先你`establish media via sip(android sip, jsip, csipsample its your choice)`在这里`get INVITE and INVITE-ACK`。为了将媒体传输到另一端，您使用 RTP（rtpsender 和 rtpreceiver 类）。获得确认后，您启动 rtp 以发送媒体流。

如果您需要更多信息，请告诉我。

# c# - 查看器严重错误 - 无法加载 XAML 资源

> ID：12812670
> 
> 赞同：0
> 
> 时间：2012-10-10T05:43:39.900
> 
> 标签：c#, .net, silverlight, xaml, iis-7

我有一个 silverlight 应用程序，它在 VS2010 中运行良好，然后当我将它上传到 IIS7 并尝试浏览它时，我收到一条错误消息

“初始化期间出错，无法启动查看器。这可能是由于网络连接问题、查看器配置问题或站点配置问题”

错误的更多细节是：

“无法从 /config/themes/map/map.xaml 加载 Xaml 资源。”

如果我导航到它说它无法加载它的文件夹，我可以看到它在那里并且它看起来格式正确（如果它在我的本地机器上工作应该是这样）。所以我想也许权限正在阻止它所以我检查了它并且有足够的权限来访问该文件。

有谁知道可能导致此错误的原因以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:03:41.863

事实证明，错误不是很具体，但我发现这是因为试图通过 httpRequest 从 https 网站请求图像。Silverlight 似乎对这样的跨方案请求非常严格，不允许这样做。除了双方都是http或https之外，没有其他解决方法。

解决方案是同时制作http，然后它就可以工作了。

来自微软的信息来源，就像[这里](http://msdn.microsoft.com/en-us/library/cc645032%28v=vs.95%29.aspx)

# mysql - PowerShell - 使用参数执行 MySQL

> ID：12812671
> 
> 赞同：1
> 
> 时间：2012-10-10T05:43:42.213
> 
> 标签：mysql, powershell

我正在尝试运行一个脚本来从 MySQL 输出一些记录，但是当我尝试运行它显示 MySQL 帮助文件的脚本时，我认为参数没有正确传递给程序。

这是脚本

```
$path_to_MySQL = "C:\xampp\mysql\bin\mysql.exe"

$param1 = "-h XXX"
$param2 = "-D XXX"  
$param3 = "-u XXX"
$param4 = "-pXXX"
$param5 = "-e ""SELECT 'Test';"""

$params = @($param1, $param2, $param3, $param4, $param5)

write-host $path_to_MySQL $params

&$path_to_MySQL $params 
```

现在这输出到显示器，

```
C:\xampp\mysql\bin\mysql.exe -h XXX -D XXX -u XXX -pXXX -e "SELECT 'Test';"
ERROR 2005 (HY000): Unknown MySQL server host ' XXX' 
```

第一行是因为`write-host`行。

但是，当我从这里复制输出并直接在控制台中运行时，它运行正常。（即我有正确的主机详细信息）

如何使用 PowerShell 脚本运行此行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:08:29.643

您使用什么作为服务器名称？请注意错误消息：`Unknown MySQL server host ' XXX'`，它将主机名引用为`' XXX'`（注意空格）而不是`'XXX'`.

Powershell 中的一个问题是对双引号`"`字符串求值，而对单引号`'`字符串不求值。因此，如果您的主机名包含特殊字符，Powershell 可能会搞砸。那是，

```
$foo="foo"

# This will print
# foo walked in bar
"$foo walked in bar"

# This will print:
# $foo walked in bar
'$foo walked in bar' 
```

尝试这样的解决方法，

```
$param1 = '-h XXX'
$param2 = '-D XXX'
$param3 = '-u XXX' 
```

和

```
&$path_to_MySQL $param1 $param2 $param3 
```

# android - 为什么我不能强制 FrameLayout 的高度？

> ID：12812676
> 
> 赞同：2
> 
> 时间：2012-10-10T05:44:11.673
> 
> 标签：android, android-layout, resize, scrollview, android-framelayout

我将 FrameLayout 的高度设置为 400，但仍为 64。

frame_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</FrameLayout> 
```

MyClass.java

```
container = (FrameLayout) inflater.inflate(R.layout.frame_layout, scrollFrame, false);
scrollFrame.addView(container);
container.setLayoutParams(new 
    ScrollView.LayoutParams(ScrollView.LayoutParams.MATCH_PARENT, 400));
Log.d("Output", "FrameLayout Height: " + container.getHeight()); 
```

输出

```
FrameLayout Height: 64 
```

即使我在xml中设置了layout_height="400"，它仍然是64。我认为这与ScrollViews有关。（虽然我不能使用 LinearLayouts，因为它们会给我的代码带来许多其他问题。）我希望 FrameLayout 根据我放置在其中的视图动态调整大小。（LinearLayout 会自动调整大小，但它会调整到我试图显示的高度的 10 倍，使 ScrollView 太大；然后存在定位问题，因为 LinearLayout 试图强制在我试图手动排列的视图上定位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T15:02:41.507

尝试使用 weightSums 和布局权重。这是一个有两个框架的布局，它们总是占屏幕的 50%，不管它们里面放了什么和它们的高度。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:tools="http://schemas.android.com/tools"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          tools:context="com.nimbits.android.HomeActivity"
          android:weightSum="1.0">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_above="@+id/progressBar"
    android:weightSum="1.0"
    android:orientation="vertical">

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:id="@id/main_frame"
        android:layout_weight=".5">

    </FrameLayout>

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:id="@id/data_frame"
        android:layout_weight=".5"
        android:layout_alignParentEnd="false">

    </FrameLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T23:09:40.823

因此，虽然我无法准确回答为什么不能为 FrameLayout 指定特定大小，但我认为它与 FrameLayout 的设计有关。我试图做的最终是对 UI 的滥用和对我的应用程序的糟糕的编程设计方法。因此，如果您认为需要手动调整 FrameLayout 的大小，请问问自己是否真的有必要 - 可能有更好的方法。

# android - android标签栏中每个标签的间距宽度

> ID：12812677
> 
> 赞同：0
> 
> 时间：2012-10-10T05:44:13.303
> 
> 标签：android, android-layout, tabs, android-widget

嗨，我必须开发一个标签栏示例。在这里我必须**为每个标签设置宽度。**因为我希望将第**一个标签宽度设置为更大**。第二**个标签宽度很小**。我该如何开发。请帮助我。

这是我的代码部分：

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:background="#ffffffff"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:tabStripEnabled="false"

          android:background="@drawable/tabicon" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
  </LinearLayout>
  </TabHost> 
```

**TabBar.java：**

```
public class TabBarSimple extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    TabSpec dbspec = tabHost.newTabSpec("DashBoard"); 
    dbspec.setIndicator("Dashboard", getResources().getDrawable(R.drawable.dashboard));

    Intent dbIntent = new Intent(this, PhotosActivity.class);
    dbspec.setContent(dbIntent);
    tabHost.addTab(dbspec);

    TabSpec orderspec = tabHost.newTabSpec("Orders");
    orderspec.setIndicator("Orders", getResources().getDrawable(R.drawable.orders));

    Intent orderIntent = new Intent(this, SongsActivity.class);
    orderspec.setContent(orderIntent);
    tabHost.addTab(orderspec);

    } 
```

}

在这里我如何在每个选项卡上设置我的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-05T06:00:52.960

可能这会有所帮助

```
 tabHost.getTabWidget().getChildAt(0).setLayoutParams(new LinearLayout.LayoutParams(width,height)); 
```

其中宽度和高度是该选项卡所需的大小。

您需要通过调用 getChildAt() 的适当索引对每个选项卡重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:01:04.913

根据我的说法，您可以使用 ImageViews 创建单独的 xml，将它们膨胀为 View 并将 View 设置为指示器，而不是直接将 drawables 设置为指示器。这样，您可以为 3 个 ImageView 设置不同的宽度。

TabBar.java

```
View view = LayoutInflater.from(context).inflate(R.layout.indicator_view_db,null);
dbspec.setIndicator(view); 
```

indicator_view_db.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <ImageView
        android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:src="@drawable/dashboard"/>

</RelativeLayout> 
```

通过这种方式，您可以为仪表板和订单拥有单独的 xml。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:46:34.537

用于`android:layout_weight`赋予此类特定选项卡的外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T09:27:58.140

对于 Xamarin 开发人员

```
AddView(_tabLayout, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WrapContent, ViewGroup.LayoutParams.WrapContent)); 
```

# android - Android maps.googleapis.com，检索 JSON 数据的问题

> ID：12812682
> 
> 赞同：3
> 
> 时间：2012-10-10T05:44:23.053
> 
> 标签：android, debugging, google-maps, httprequest, google-places-api

我正在使用以下代码在 android 中设置地图视图并显示位置标记，效果很好。

此外，我正在尝试使用 maps.googleapis.com 和我的 api 密钥来检索 + 显示附近的 XML 附近位置数据，无论是使用 Toast 消息还是在调试器中

我知道我不应该在主线程上运行 HTTPrequest，但出于调试目的，我只是想确认我实际上是在检索所需的 JSON 数据

（它在浏览器中使用“ [https://maps.googleapis.com/maps/api/place/search/json?location=39.9165171,116.450872&radius=50&sensor=false&key=MYKEY](https://maps.googleapis.com/maps/api/place/search/json?location=39.9165171,116.450872&radius=50&sensor=false&key=MYKEY) ”）例如

我在 Logcat 中遇到无法解决主机错误

```
public class MainActivity extends MapActivity implements LocationListener {

    MyLocationOverlay myLocationOverlay;

    public MapView mapView;
    MapController mc;

    OverlayItem overlayitem;
    List<Overlay> mapOverlays;
    HelloItemizedOverlay itemizedoverlay;
    GeoPoint myLocationGeoPoint;
    String result = "nothing";

    private MockGpsProvider mMockGpsProviderTask = null;

    /* This method is called when use position will get changed */
    public void onLocationChanged(Location location) {

        final String TAG = getClass().getSimpleName();  
        String googleAPIKey = "xxxxxxxxx"; 
        String searchRadius = "50";
        String baseUrl = "https://maps.googleapis.com/maps/api/place/search/json?";
        String lat = String.valueOf(location.getLatitude());
        String lon = String.valueOf(location.getLongitude());
        String url = baseUrl + "location=" + lat + "," + lon + "&" +
               "radius=" + searchRadius + "&" + "sensor=false" +
               "&" + "key=" + googleAPIKey;
        Log.v(TAG,url);
        Toast.makeText(this, url, Toast.LENGTH_LONG).show();

        HttpClient httpclient = new DefaultHttpClient();  
        HttpGet request = new HttpGet(url);  

        ResponseHandler<String> handler = new BasicResponseHandler();  
    try {  
        result = httpclient.execute(request, handler); 
    } catch (ClientProtocolException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  
    httpclient.getConnectionManager().shutdown(); 

    Log.v(TAG,result);
    Toast.makeText(this, result, Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T20:11:50.220

没关系，通过做异步任务+ json解析来解决

# javascript - 在没有 jQuery UI 的情况下获取拖动位置

> ID：12812683
> 
> 赞同：2
> 
> 时间：2012-10-10T05:44:24.880
> 
> 标签：javascript, jquery, html, html5-canvas

我正在 html5 画布中实现一个拖放对象，我想知道如何获得拖动位置。我知道可以使用 jQuery UI，但由于我的对象将在画布中绘制，因此没有可使用的 DOM 结构，因此 jQuery UI 可能没有用。

我试图获取移动鼠标位置的一些代码：

```
$(document).ready(function(){
    $(document).mousemove(function(e){
        $('#position').html(e.pageX + ', ' + e.pageY);
    });
}); 
```

如果有特殊的掉落事件，那将是直截了当的，但似乎没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:54:08.617

有一个 drop 事件，但它是从触发的`droppable`，在拖动操作结束时触发，因此您可能想要利用它。`draggable``stop`

# php - 在 PHP MySQL 中将 assoc 数组值传递给 Ajax

> ID：12812687
> 
> 赞同：1
> 
> 时间：2012-10-10T05:44:33.000
> 
> 标签：php, mysql, jquery

实际上，我正在尝试为使用 jQChart 插件的所有报告制作图表。我已经通过 PHP 完成了图表报告，但我的头脑需要带有动画的报告，所以我去了 jQChart，但我不知道如何将 assoc 数组值传递给 Ajax。

```
$results = mysql_query("SELECT vaccum_value,date FROM vaccum_details where serial_number='10P1005'");
$data1=array();
while ($row = mysql_fetch_array($results)) 
{
    $data1[$row['date']]=$row['vaccum_value'];
}  

$data = Array ( "28-Sep-2012" => 31.6, "04-Oct-2012" => 0.99, "03-Oct-2012" => -3 ); 
```

但我需要将此结果传递给 Ajax，然后转换为如下所示：

> 数据：[['2012 年 9 月 28 日'，31.6]，['2012 年 10 月 4 日'，0.99]，['2012 年 10 月 3 日'，-3]]

详细脚本供您参考：

```
<script lang="javascript" type="text/javascript">
$(document).ready(function () { 
$('#jqChart').jqChart({ title: { text: 'Animation' }, animation: { delayTime: 1, duration: 2 }, series: [ { type: 'line', title: 'Line', data: [['A', 69], ['B', 57], ['C', 86], ['D', 23], ['E', 70], ['F', 60], ['D', 88], ['H', 22]] } ] }); }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:46:37.937

使用 JSON 对数组进行编码并传递给 jQuery。

```
 json_encode($array); 
```

在 jQuery 中，解析 JSON 字符串以获取数组值：

```
 jQuery.parseJSON(jsonstring); 
```

检查： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)和[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

使用 jQuery.get 从 jQuery 调用 PHP 脚本 - [http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:55:28.383

```
$results = mysql_query("SELECT vaccum_value,date FROM vaccum_details where serial_number='10P1005'");
$data1=array();
while ($row = mysql_fetch_array($results)) 
{
    $data1[$row['date']]=$row['vaccum_value'];
}
json_encode($data1); 
```

在你的 jQuery+ajax

```
$.ajax({
        type:"POST",
        data:'serial_number=10P1005',
        url: "your_file.php",
        success: function(jsonData){
            var jsonArray = eval('(' + jsonData + ')');

            if(jsonArray.date == 'condition'){
                // some action here
            }else{
                // some other action hera
            }

        }
    },"json"); 
```

# linux - 为什么 sem_t 在 64 位 linux 中是 32 字节？

> ID：12812703
> 
> 赞同：3
> 
> 时间：2012-10-10T05:46:36.510
> 
> 标签：linux, semaphore, glibc, futex, posix-api

64 位 linux 中的 sem_t 是 32 字节，但是使用 futex 实现，8 字节就足够了（[glibc sem_post](http://fossies.org/dox/glibc-2.16.0/sem__post_8c_source.html)），是真的吗？如果是真的，为什么要浪费字节？

实际上，我想使用仅使用 8 字节的自定义信号量实现，因此可以使用一个信号量到一个日期条目。但我不太确定 glibc 实现中的其他字节只是填充。

只是为了我的建议，我不会在工作中使用自定义信号量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:08:09.853

AFAIK`glibc`需要跨不同的 Linux 内核和不同的线程模块进行移植。因此，它为结构保留了 32 个字节的空间（4 个机器字），以防其他系统需要额外的空间来记账。

如果你想用 futex 做你自己的事情，那就去吧；正如您所说，使用 futex 只需要 8 个字节即可。

# java - ViewPager + GridView onItemClick

> ID：12812704
> 
> 赞同：3
> 
> 时间：2012-10-10T05:46:37.107
> 
> 标签：java, android, android-viewpager

我在 ViewPager 的布局中有一个 GridView （我不确定这是否有区别）。

```
inside SampleAdapter for ViewPager{
@Override
        public Object instantiateItem(ViewGroup container, int position) {
            View page = null;
            if (position == 0) {
                page = getLayoutInflater().inflate(R.layout.layoutone,
                        container, false);
            } else {
                page = getLayoutInflater().inflate(R.layout.layouttwo,
                        container, false);
                GridView grid = (GridView) page.findViewById(R.id.gridview);
                grid.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {

                                  //switch to another activity based on click event

                    }

                });
                grid.setAdapter(new GridItemAdapter(context)); //sets custom gridItemLayout

        container.addView(page);

        return (page);

    }

} 
```

我可以很好地查看网格。自定义布局也按照我的 GridAdapter 工作。但是，我的点击事件没有被触发。是因为 instanceiteItem() 方法调用吗？我怎样才能解决这个问题？

我还不太明白 Fragments 如何与 ViewPager 一起工作，所以如果这个解决方案涉及切换到基于 Fragment 的方法，如果有人能详细说明，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:20:42.303

所以，在 a 中点击有点有趣`ViewPager`，因为在`ViewPager`捕捉点击/动作事件时有点贪婪。[一种解决方案](https://stackoverflow.com/a/11303508/1003511)涉及覆盖[ViewGroup.onInterceptTouchEvent(MotionEvent ev](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)`ViewPager` ) 。但是，这并不总是必要的。具体来说，如果不这样做，我无法为寻呼机设置 onClickListener，但是为寻呼机*内部*的视图设置 onClickListener 对我来说非常有效（我在最后附上了代码示例）。但是，我从来没有这样做过*`GridView`/onItemClickListener。您所做的实际上是为寻呼机内的视图内的视图设置点击侦听器，这是另一层。当您在 Android 中嵌套内容时，由于系统处理消耗点击的方式，触摸事件的管理变得更加复杂。*

 *您遇到的问题是某些东西正在消耗您的触摸事件而没有将其传递给列表项。本质上，Android 处理触摸事件的方式是，当触摸事件发生时，它会将其传递给顶层视图的触摸事件处理函数。如果视图处理了事件，它返回 true 并且系统知道事件已被处理并完成。如果视图不想处理该事件，则返回 false 并且系统将事件传递给层次结构中的下一个最高视图。在您的情况下，某些东西（可能是`ViewPager`或可能是`GridView`）在事件击中您的网格项目之前正在消耗该事件，因此 onItemClickListener 永远不会被触发。

作为测试，如果您可以为`GridView`（如在整个视图中）设置 onClickListener 并使其正常工作，则意味着问题不在于`ViewPager`. 在这种情况下，您可能需要实现自己的版本`GridView`并覆盖它处理触摸事件的方式，以确保事件到达子项。但是，如果这不起作用，您将需要覆盖`ViewPager`，如前所述。

（注意：显然这两种解决方案都需要大量时间，因此在您执行之前，请确保您已仔细检查任何简单错误，例如将侦听器置于错误视图、误读行为并认为它不是射击时等）

作为参考，这里是一个可以工作的 instantiateItem 方法的版本（这实际上仍在进行中，所以它不是 100% 漂亮）。'menupage' 视图是一个`LinearLayout`.

```
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    int page = R.layout.menu_page;
    String meal = "";
    switch (position) {
        case 0:
            meal = "Breakfast!";
            break;
        case 1:
            meal = "Lunch!";
            break;
        case 2:
            meal = "Dinner!";
            break;
    }

    View view = inflater.inflate(page, null);
    TextView mealTitle = (TextView) view.findViewById(R.id.meal_title);
    mealTitle.setText(meal);

    ((ViewPager) collection).addView(view, 0);
    final ViewPager pager = (ViewPager)collection;

    View menupage = view.findViewById(R.id.menu_page_ll);
    menupage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            int page = ((ViewPager) pager).getCurrentItem();
            Intent i = new Intent(getApplicationContext(), Menus.class);
            i.putExtra("page", page);
            startActivity(i);
        }
    });

    return view;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:43:09.177

我会坚持你创建一个单独的`Fragment`并使用`getItem(position)`你的`ViewPager`适配器来发送位置和实例化你的片段。在 Fragment 中，您可以轻松地为您的 Layout 充气并使用`GridView`.

```
 @Override
 public Fragment getItem(int position) {
    return GridFragment.newInstance(position);
} 
```

您当前使用的方式对我来说看起来有点复杂。所以，我只是坚持让你尝试一下。一个示例演示就是[`here`](https://github.com/lalit3686/ViewPagerGridViewDemo)我所说的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T17:51:07.347

您的 listView 中是否有任何可点击的对象？如果您的 listView 或 gridView 项目包含可点击的视图（按钮、复选框等），您的 OnItemClickListener 将不会被调用。*

# java - 如何从对象中提取数据？

> ID：12812708
> 
> 赞同：3
> 
> 时间：2012-10-10T05:46:45.733
> 
> 标签：java, sql, hibernate

```
[56, SensIOP, 9, Open Point] - Index 0
[562, SensIOP, 92, Open Point2] - Index 1 
```

这是我从数据库调用中获取的对象。我正在遍历列表以获取它，现在我的问题是第一个和第三个字段很长，其他字段是字符串，我如何从对象中提取它，分配它到某个变量。

更新 ：

```
 Object object = (Object) iterator.next(); 
```

此对象的值设置为 1（索引 0）（它在 for 循环中）

更新 2：

```
 for (Iterator iterator = List2.iterator(); iterator.hasNext();) {
        Object object = (Object) iterator.next(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:05:51.807

我不知道您是如何获取数据的，但是当我以您指定的格式获取数据时，我会执行以下操作：

```
List<Object[]> objects = query.list();
if (objects.size() > 0) {
    for (int j = 0; j < objects.size(); j++) {
        Object[] object = objects.get(j);
        BigInteger firstValue = (BigInteger) object[0];
        String secondValue = (String) object[1];
        BigInteger thirdValue = (BigInteger) object[2];
        String forthValue = (String) object[3];

        long firstValueLong = firstValue.longValue();
        long thirdValueLong = thirdValue.longValue();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T07:07:30.867

我在“RAS”帖子的帮助下找到了结果，非常感谢

```
List<Object> resultList =(List<Object>) em.createNativeQuery("SELECT isbillpayable,isothracctrfable FROM usrfacaccounts ").getResultList();

          for (Iterator<Object> it = resultList.iterator(); it.hasNext();) {
            Object[] object = (Object[]) it.next();
            String firstValue = (String) object[0];
            System.out.println("isbillpayable"+firstValue);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:03:09.723

```
using this function you can get result :

 String a1= arrayname[0] ; //[56, SensIOP, 9, Open Point] 

 a1=split(',',a1);
 String Fisrtval=a1[0];
 String Thirdtval=a1[2]; 
```

请参考：[http](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/util/StringHelper.html#split(java.lang.String) ://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/util/StringHelper.html#split (java.lang.String, java.lang.String)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T05:59:48.183

您必须将其转换为 long for long 属性才能分配。

例如

```
Long l = (Long) yourOblList.iterator().next(); 
```

看看为什么泛型变得[泛型](http://docs.oracle.com/javase/tutorial/extra/generics/intro.html)

# c - 对从未使用/定义/任何东西的函数的未定义引用？

> ID：12812712
> 
> 赞同：1
> 
> 时间：2012-10-10T05:46:59.027
> 
> 标签：c

我有一个 C 函数如下：

```
static uint32_t initrd_read(fs_node_t *node, 
    uint32_t offset, uint32_t size, uint8_t *buffer) {

    initrd_file_header_t header = file_headers[node->inode];
    if (offset > header.length)
        return 0;
    if (offset+size > header.length)
        size = header.length-offset;
    memcopy(buffer, header.offset+offset, size);
    return size;
} 
```

当与程序的其余部分链接时，`undefined reference to 'memcpy'`抛出 an。`memcpy`从未在代码中使用，也未定义。该代码是独立链接的，因此它不会与 C 库冲突。出于某种原因，链接器认为上述函数是`memcpy`在函数调用开始时调用的，我不知道为什么。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:50:15.173

`memcpy`编译器可以隐式使用它来执行“长”复制操作（如结构赋值）。例如，在您正在执行的代码中

```
initrd_file_header_t header = file_headers[node->inode]; 
```

这看起来像是一个很好的候选者，它实际上将被翻译成一个`memcpy`电话。

您是否有理由创建该`initrd_file_header_t`对象的副本而不是直接访问原始对象？我没有看到你修改那个对象，所以你可以这样做

```
const initrd_file_header_t *header = &file_headers[node->inode]; 
```

并访问字段`header->length`等。这可能会消除对`memcpy`.

# html - 当我调整浏览器窗口大小时，页眉和页脚看起来很糟糕

> ID：12812714
> 
> 赞同：0
> 
> 时间：2012-10-10T05:47:02.237
> 
> 标签：html, css

我遇到了这个问题，所有内容都正确对齐，但是当我调整浏览器窗口的大小时，它会在底部显示一个滚动条以水平滚动......当你滚动页眉和页脚时，它会被剪掉，看起来真的很难看。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:51:21.790

问题是你`#content` `div`有`width:1000px;`，而页眉和页脚只设置为`width: 100%`.

您可以通过添加来修补它`min-width: 1000px;`，这样它们就不会缩小到页面宽度之外。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:51:47.717

你`#content`导致滚动是因为`1000px width`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T05:51:57.513

你可以试试这个CSS：

```
html, body{
margin:0;
padding:0;
} 
```

这个用于页眉和页脚以及内容 div 的 css：

```
header, footer, #content{
min-width: 1000px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T05:52:46.167

您需要使用它来修复它

```
body {
   width:100%; 
   min-width: 1000px;
} 
```

由于您的`#content <div>`宽度`1000px;`和页眉/页脚设置为`100%;`通常不会打印出超出**视口**大小的值，因此您可以使用它来修复

# python - 如何通过 url 在 django 中传递变量？

> ID：12812716
> 
> 赞同：9
> 
> 时间：2012-10-10T05:47:07.277
> 
> 标签：python, django, templates, url, view

我正在尝试传递一些变量，但我遇到了一些麻烦，特别是有 3 个问题。如何对 url 字符串进行编码以考虑字符串中的特殊字符？给定字符串，我应该使用什么正确的正则表达式？以及如何解码已编码的网址？

# 看法

```
author = 'foo'
video = 'bar123-456'
title = 'Santorum: "I'm Not a Visionary"' # in my version, it is referencing another variable so the syntax error doesn't occur. But I left it in here because I want to know how to deal with " and '.
related = 'http://gdata.youtube.com/feeds/api/users/haha/uploads?v=2&max-results=50'

url = urllib.quote('partner/' + author+ '/'+ video+'/'+ title + '/' + related)
#How do I encode this url string above to take into account the special characters in the string? 
```

# 模板

```
<a href="/{{url}}" > <img src="img.png" > </a> 
```

# 网址.py

```
url(r'^partner/(?P<partner_name>[-\w]+)/(?P<video_id>[-\w]+)/(?P<video_title>[-\w]+)//(?P<related_feed>)/$', 'video_player'),
#do I have to add anything to the regex? 
```

# video_player 函数

```
def video_player(request, author, video, related):
    #how do I decode the urls that are encoded 
```

# 编辑

我在没有相关的情况下尝试了它，看看它是否有效，但仍然出现错误。

模板：

```
<a href="{% url 'reserve.views.video_player' author video title   %}" > 
```

网址：

```
url(r'^partner/(?P<author>[-\w]+)/(?P<video>[-\w]+)/(?P<title>[-\w]+)/$', 'video_player'), 
```

我收到此错误：

NoReverseMatch at /partner/BuzzFeed/ Reverse for ''video_player'' 带有参数 '('BuzzFeed', 'fXkqhhIlOtA', 'NY Yankees: 6 Essential Pieces of Postseason Memorabilia')' 和关键字参数 '{}' 未找到。

# 完整的 urls.py

```
urlpatterns = patterns('reserve.views',
    url(r'^$', 'index'),
    url(r'^browse/$', 'browse'),
    url(r'^faq/$', 'faq'),
    url(r'^about/$', 'about'),
    url(r'^contactinfo/$', 'contactinfo'),
    url(r'^search/$', 'search'),
    (r'^accounts/', include('registration.backends.default.urls')),
    (r'^accounts/profile/$', 'profile'),
    (r'^accounts/create_profile/$', 'user_profile'),
    (r'^accounts/edit_profile/$', 'edit_profile'),
    url(r'^products/(?P<product_name>[-\w]+)/reviews/$', 'view_reviews'),
    url(r'^products/(?P<product_id>\d+)/reviews/$', 'view_reviews'),
    url(r'^user/(?P<user_id>[-\w]+)/$', 'view_reviews_user'),
    #url(r'^category/(?P<category_name>[-\w]+)/$', 'view_product_category'),
    url(r'^partner/(?P<partner_name>[-\w]+)/$', 'partner_channel'),
    url(r'^partner/(?P<author>[-\w]+)/(?P<video>[-\w]+)/(?P<video_title>[-\w]+)/$', 'video_player'),
    url(r'^partner/(?P<author>[-\w]+)/(?P<video>\w+)/(?P<title>\w+)/$', 'video_player'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T06:08:18.437

将这些变量按原样传递给模板，使用[url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)，在发送到模板之前，只需在视图中执行此操作。

**视图.py**

```
related = urllib.quote(related, safe='') 
```

**模板**

```
<a href="{% url 'path.to.video_player' author video related %}" > <img src="img.png" > </a> 
```

**网址.py**

```
url(r'^partner/(?P<author>[-\w]+)/(?P<video>\w+)/(?P<related>\w+)/$', 'video_player'), 
```

**编辑**

如果您想不使用相关参数，或者如果怀疑 video 也可以是 None ，那么只需在您的视图中执行此操作：

```
def video_player(request, author, video=None, related=None): 
```

现在您可以通过以下方式使用网址

```
<a href="{% url 'path.to.video_player' author video %}" > <img src="img.png" > </a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-19T10:40:42.147

在较新版本的 python 中，您只需键入：示例：

> ```
> path('<int:id>/delete/', delete_view, name = 'delete'), 
> ```

# java - 在 Apache 服务器中维护日志文件

> ID：12812717
> 
> 赞同：-1
> 
> 时间：2012-10-10T05:47:08.687
> 
> 标签：java, apache, tomcat, servlets, logging

在我的 Java 项目中，我使用 apache`log4j-1.2.17.jar`将日志存储在客户端文件中，并将这些文件日志手动上传到服务器以供将来参考。我想在浏览器中在线查看这些日志文件，那么是否有任何 apache 库或内置 Servlet 组件提供 UI 来查看这些日志文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T11:09:26.563

您可以使用 Apache Chainsaw 查看 log4j 文件。 [http://logging.apache.org/chainsaw/](http://logging.apache.org/chainsaw/) 这是一个客户端 UI。如果没有，任何一种云日志服务，loggly、Splunk、papertrail 等都可以接受 log4j 文件。唯一的问题是他们会付出代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:18:54.040

如何将日志文件放入 apache 配置中`/var/wwwroot/...`并使其可`<Directory...>`浏览（cf. `Options Indexes`）？

干杯，

# codeigniter - Codeigniter 会话 nagios

> ID：12812719
> 
> 赞同：1
> 
> 时间：2012-10-10T05:47:20.790
> 
> 标签：codeigniter, session, nagios

我正在使用 CodeIgniter 附带的会话库，但我遇到了一个小问题。我正在使用数据库来存储所有会话，但会话库还使用 user_agent = 'check_http/v1.4.14 (nagios-plugins 1.4.14)' 存储一些奇怪的行。我的应用程序通过 ssh 上传到服务器。这些行几乎每隔一秒就会添加到数据库中，因此行数会变得很大。我已经阅读了有关 Nagios 的信息，但有谁知道如何防止这些行被添加到数据库而不更改会话库？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:20:19.047

这不是 -**奇怪**- 行。**Codeigniter Session 库**为每个 Session 存储一个用户数据，并在类中明确定义：[https ://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session/drivers/Session_cookie.php#L495](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session/drivers/Session_cookie.php#L495)

现在，如果您愿意，您可以处理用户数据，哪个存储在数据库中，哪个不存储。查看“userdata”数组。

# sql - Rails：SQLite3::CantOpenException：无法打开数据库文件

> ID：12812721
> 
> 赞同：10
> 
> 时间：2012-10-10T05:47:31.167
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, sqlite, amazon-ec2

我正在尝试`delayed_job`使用 Sqlite3 来安排任务，看起来 apache 无法读取我的`production.sqlite3`文件。

这是我的`database.yml`：

```
production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

这是我得到的错误（在 log/production.log 中）：

```
ActiveRecord::StatementInvalid (SQLite3::CantOpenException: unable to open database file:) 
```

我已经跑`RAILS_ENV=production rake db:create`和`RAILS_ENV=production rake db:migrate`. 该`db/production.sqlite3`文件存在，并且 db 目录及其所有子文件夹都归apache 所拥有`apache:apache`，这是 apache 的运行对象。我在 Amazon EC2 上使用 Phusion Passenger。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T21:48:30.313

SQLLite 通过让 Rails 进程写入 Rails 目录树中的系统文件来工作。Rails 进程归 Apache 所有，它默认设置一个用户“apache”和一个组“apache”。要使其工作，您需要向`/db`目录上的 apache 用户或组授予写权限。

或者

将 apache 配置为与已经拥有`write`该目录权限的组一起运行。一个好的策略是创建一组可能需要访问不同位置的各种进程——例如，我有一个“部署者”组，用户执行发布将是该组的一部分，以及 apache 实例。我通常发现拥有一个包含各种进程和登录用户的组可以让生活更轻松（例如查看服务器日志）、编写上传或缓存文件等。

和/或

使用真正的数据库服务器，如 PostgreSQL 或 MySQL——它们之所以有效，是因为它们是管理自己文件的自己的进程。Rails 进程（在您的情况下为 apache）连接到 Unix 端口上的数据库服务器进程。每个服务器进程只安全地管理它知道的文件。

SQLLite 很好上手 - 超级简单且开销低，但很快您就需要在生产环境中运行常规数据库服务器。然后你很快就会发现 SQLLite 和其他的东西并不完全相同，此时你应该在你的开发机器上安装相同的数据库服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T22:04:04.717

这是因为 nginx 创建 www-data 用户，并且该用户没有读取 sqlite3 文件和您的应用程序的权限...

您需要运行命令：

1.`sudo chown -R www-data:www-data rails_project/`

2.`sudo chmod -R 777 rails_project/`

并检查您是否在生产模式下启动了您的应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-27T17:52:31.053

在所有内容都归根用户所有的应用程序中遇到了这个问题。

这就是我如何解决的。

```
root@se785fall16:/var/www/auth_whateveryousay# chmod -R 0777 db/

root@se785fall16:/var/www/auth_whateveryousay# ls -lad *
drwxr-xr-x 11 root root  4096 Nov 27 17:23 app
drwxr-xr-x  2 root root  4096 Nov 27 17:23 bin
drwxr-xr-x  5 root root  4096 Nov 27 17:23 config
-rw-r--r--  1 root root   130 Nov 27 17:23 config.ru
drwxrwxrwx  3 root root  4096 Nov 27 17:33 db
-rw-r--r--  1 root root   879 Nov 27 17:23 Gemfile
-rw-r--r--  1 root root  6367 Nov 27 17:24 Gemfile.lock
drwxr-xr-x  4 root root  4096 Nov 27 17:23 lib
drwxr-xr-x  2 root root  4096 Nov 27 17:25 log
drwxr-xr-x  2 root root  4096 Nov 27 17:23 public
-rw-r--r--  1 root root   227 Nov 27 17:23 Rakefile
-rw-r--r--  1 root root   898 Nov 27 17:23 README
-rw-r--r--  1 root root 26632 Nov 27 17:23 README.textile
drwxr-xr-x  6 root root  4096 Nov 27 17:23 spec
drwxrwxrwx  5 root root  4096 Nov 27 17:25 tmp
drwxr-xr-x  3 root root  4096 Nov 27 17:23 vendor 
```

底线是：这是premssions问题，您需要确保拥有该应用程序的人无论是root用户还是非root用户，您只需要授予该用户对正在使用的数据库的读写访问权限`chmod -R 0777 db/`。调整它以适合您自己的安全级别。

# android - 如何在我的 android 活动中的列表视图中显示 gmail 收件箱

> ID：12812723
> 
> 赞同：0
> 
> 时间：2012-10-10T05:47:53.257
> 
> 标签：android, android-listview

我想在我的 android中显示我`Gmail`的收件箱中的所有邮件。请指导我相关的方向。`ListView``Activity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:53:05.157

没有记录和支持打开 Gmail 收件箱的意图。任何给定设备上甚至可能没有 Gmail 收件箱，因为该应用程序不存在或因为用户没有使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:07:58.867

**获取最新未读消息的示例**

***参考链接：*** [http ://www.thisismobility.com/blog/2011/01/17/fetching-gmail-messages-by-label-on-android/](http://www.thisismobility.com/blog/2011/01/17/fetching-gmail-messages-by-label-on-android/)

内容解析器 cr = getContentResolver();

光标未读 = cr.query(Uri.parse("content://gmail-ls/conversations/xxxxxx@gmail.com"),null, "label:^u", null, null);

unread.moveToFirst();

int subjectIdx = unread.getColumnIndex("subject");

TextView tv = (TextView) findViewById(R.id.buffer); 做 {

```
String subject = unread.getString(subjectIdx);

tv.append(subject + "\n"); 
```

} while (unread.moveToNext());

# c# - C#中多个线程使用Progressbar访问的方法

> ID：12812725
> 
> 赞同：1
> 
> 时间：2012-10-10T05:48:04.520
> 
> 标签：c#, multithreading, methods, progress-bar

我有多个线程访问一个方法。

当线程执行时，该方法会更新表单上的进度条。

该方法会更新我的 Windows 窗体上的进度条，显示线程正在完成它们时处理文件的进度。

您将如何管理该方法以避免死锁。我无法锁定它，不知道我是否做错了，或者在这种情况下我是否应该锁定它。

```
public void myWorkerClass()
        {
            int amountToScan = 4;

            lblcount.BeginInvoke(
               ((Action)(() => lblcount.Text = "Files Checked " + atPDFNumber.ToString() + " of " + amountToScan.ToString())));

            decimal percentageComplete = ((decimal)atPDFNumber / (decimal)amountToScan) * 100;

            backgroundWorker1.ReportProgress((int)percentageComplete);

        } 
```

发生的情况是，在最后一行，它告诉我“这个操作已经调用了 OperationCompleted 并且进一步的调用是非法的”。

我认为我打开了已经由第一个线程或类似的东西处理的东西。

这是使用多线程进度条的好方法（我有正确的想法或原则），还是我的代码中只有一个小错误？

我想让这个问题对其他人有价值的方法是用这个问题来回答如何在多个线程访问的方法中访问全局变量。因为我认为这就是这个问题的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T13:18:32.893

看起来您正在使用我不熟悉的 BackgroundWorker 类。

但是您还要求使用多线程和 ProgressBar 的“通用”设计。这个例子是我从多个线程更新 ProgressBar 的方式。

首先，您需要一个公共代表（可能在某个助手类中）

```
//is called when the worker-progress is changed
public delegate void ProgressChangedHandler(object sender, ProgressEventArgs e);

// some own EventArgs
public class ProgressEventArgs : EventArgs
{
    public int Percentage { get; private set; }

    public string Message { get; private set; }

    public ProgressEventArgs(int percentage, string message)
    {
        Percentage = percentage;
        Message = message;
    }
} 
```

在每个工人阶级中，您必须注册代表

```
// event for reporting progress
private event ProgressChangedHandler ProgressChanged;

// register Eventhandler via dependency injection or own method
public void RegisterDelegate(ProgressChangedHandler progressChangedHandler)
{
    ProgressChanged += progressChangedHandler;
} 
```

在包含 ProgressBar 的 UI 类中，您需要一个更新进度的方法。但是对该方法的每次调用都在调用者的线程中执行（这对于非线程安全的 UI 可能会出现问题）。

为避免这种情况，您可以调用调度程序，以便每个引发的事件都将在您的 UI 线程而不是工作线程中处理。

```
private void StatusUpdate(object sender, ProgressEventArgs args)
{    
    if (Dispatcher.Thread.ManagedThreadId != Thread.CurrentThread.ManagedThreadId)
    {
        // call from a worker thread
        var statusUpdateDelegate = new ProgressChangedHandler(this.StatusUpdate);

        Dispatcher.Invoke(statusUpdateDelegate, DispatcherPriority.Normal, sender, args);
    }
    else
    {
        // direct call from the UI thread
        lblProgress.Content = args.Message;
        pbProgress.Value = args.Percentage;
    }
} 
```

您可以将此方法作为委托传递给工作人员

```
worker.RegisterEventHandler(StatusUpdate); 
```

最后，您可以通过每个线程的事件调用委托

```
public void DoVeryHardWork()
{
    // do stuff
    ProgressChanged(this, new ProgressEventArgs(progress, "some message"));
} 
```

# javascript - jquery autocomplete - 在自定义 div 中显示结果

> ID：12812728
> 
> 赞同：0
> 
> 时间：2012-10-10T05:48:30.473
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-ui

我正在寻找一些帮助来自定义显示自动完成结果的下拉菜单。我有以下 html，我想用它来显示结果。这个想法是，下面的 div 一开始是隐藏的，一旦有匹配，我就使 div 可见，每个匹配的结果都将包含在下面的 <li> 标记中。

```
<div class="search_dropdown_wrapper" style="display:none;">
    <div id="search_arrow" class="dropdown_pointer search"></div>
    <ul>
        <li>
            <img src="/assets/2c42cdf.jpg"  />
            <h4>Tom Jerry</h4>
            <p>Cartoon Characters</p>
        </li>
        <li>
            ...
        </li>
        ...  
    </ul>
</div> 
```

我的自动完成代码中用于显示结果的部分是..

```
 $('#search_name').autocomplete({
    minLength: 2,
    ...
    ...
  })
  .data( "autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li></li>" )
      .data( "item.autocomplete", item )
      .append( "<a>" + item.name + "</a>" )
      .appendTo( ul );
  }; 
```

（仅供参考，以上感谢[How to setup jquery-ui autocomplete in Rails](https://stackoverflow.com/questions/3188157/how-to-set-up-jquery-ui-autocomplete-in-rails)）

目前我只有名称（item.name）显示在下拉列表中。如何在上面的代码中获取我想要的 html。我感到困惑的部分是如何在被传递给函数的 ul 项目周围获取 div 。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:28:59.227

使用 .parent() 到达 ul 周围的 div：http: [//api.jquery.com/prev/](http://api.jquery.com/prev/)

```
$(ul).parent() 
```

或者，抓住前一个兄弟姐妹：（虽然我一开始需要这样做） [http://api.jquery.com/prev/](http://api.jquery.com/prev/)

```
$(ul).prev() 
```

如果 ul 已经是一个 jQuery 对象，那么你可以只做 ul.parent() 和 ul.prev()

或者，您可以直接访问包装器 div：

```
$('.search_dropdown_wrapper') 
```

我可能会建议向该包装器添加一个 ID 并通过 ID 访问它，例如：

```
<div class="search_dropdown_wrapper" id="search_dropdown_wrapper">
...
</div> 
```

然后在您的脚本中，您可以使用`$('#search_dropdown_wrapper')`直接访问 div。

直接访问方法更安全。如果您更改了标记，它仍然会访问正确的 div（理论上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T14:05:47.577

每个项目都是响应对象集合。如果在您的回复中，对象有一个电子邮件访问字段将是 item.email。它将您的自动完成对象插入到带有自定义 li 标签的自定义 div 中：

```
$("#search_name").autocomplete({
  source: availableTags,
  open: function() {
    $(this).autocomplete("widget")
      .appendTo(".search_dropdown_wrapper")
      .css("position", "static");
    } 
}).data('ui-autocomplete')._renderItem = function(ul, item) {
   var html, paragraph;
   html = '<h4><a>' + item.name + '</a></h4>';
   paragraph = '<p>Cartoon Characters</p>';
   html = html + paragraph;
   return $('<li>').append(html).appendTo(ul);
}; 
```

# c# - 通用接口的通用工厂方法

> ID：12812731
> 
> 赞同：4
> 
> 时间：2012-10-10T05:48:38.170
> 
> 标签：c#, generics, factory-pattern

我希望能够指定一个可用于查询的类型化接口。我最终希望能够做类似的事情：

```
var query = _queryfactory.Create<IActiveUsersQuery>();
var result = query.Execute(new ActiveUsersParameters("a", "b"));
foreach (var user in result)
{
    Console.WriteLine(user.FirstName);
} 
```

看起来很简单，嗯？请注意，查询获得了类型化参数和类型化结果。为了能够将查询工厂限制为仅包含查询，我们必须指定如下内容：

```
public interface IQuery<in TParameters, out TResult>
    where TResult : class
    where TParameters : class
{
    TResult Invoke(TParameters parameters);
} 
```

但这会像癌症一样传播：

```
// this was easy
public interface IActiveUsersQuery : IQuery<ActiveUsersParameters, UserResult>
{

}

//but the factory got to have those restrictions too:
public class QueryFactory
{
    public void Register<TQuery, TParameters, TResult>(Func<TQuery> factory)
        where TQuery : IQuery<TParameters, TResult>
        where TParameters : class
        where TResult : class
    {
    }

    public TQuery Create<TQuery, TParameters, TResult>()
        where TQuery : IQuery<TParameters, TResult>
        where TParameters : class
        where TResult : class
    {
    }
} 
```

这最终导致工厂调用，如：

```
factory.Create<IActiveUsersQuery, ActiveUsersParameters, UserResult>(); 
```

不是很好，因为用户必须指定参数类型和结果类型。

我是否试图控制它太多？我应该只创建一个虚拟接口：

```
public interface IQuery
{

} 
```

显示意图，然后让用户创建他们喜欢的任何内容（因为他们而不是工厂将调用正确的查询）。

然而，最后一个选项不是很好，因为它不会让我装饰查询（例如通过使用缓存装饰器动态缓存它们）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T08:42:25.963

我完全理解你在这里想要做什么。您正在应用 SOLID 原则，因此查询实现从消费者那里抽象出来，消费者只是发送消息 (DTO) 并获得结果。通过实现查询的通用接口，我们可以用装饰器包装实现，它允许各种有趣的行为，例如事务行为、审计、性能监控、缓存等。

这样做的方法是为消息定义以下接口（查询定义）：

```
public interface IQuery<TResult> { } 
```

并为实现定义以下接口：

```
public interface IQueryHandler<TQuery, TResult>
    where TQuery : IQuery<TResult>
{
    TResult Handle(TQuery query);
} 
```

这`IQuery<TResult>`是某种标记接口，但这允许我们静态定义查询返回的内容，例如：

```
public class FindUsersBySearchTextQuery : IQuery<User[]>
{
    public string SearchText { get; set; }

    public bool IncludeInactiveUsers { get; set; }
} 
```

一个实现可以定义如下：

```
public class FindUsersBySearchTextQueryHandler
    : IQueryHandler<FindUsersBySearchTextQuery, User[]>
{
    private readonly IUnitOfWork db;

    public FindUsersBySearchTextQueryHandler(IUnitOfWork db)
    {
        this.db = db;
    }

    public User[] Handle(FindUsersBySearchTextQuery query)
    {
        // example
        return (
            from user in this.db.Users
            where user.Name.Contains(query.SearchText)
            where user.IsActive || query.IncludeInactiveUsers
            select user)
            .ToArray();
    }
} 
```

消费者不能依赖于`IQueryHandler<TQuery, TResult>`执行查询：

```
public class UserController : Controller
{
    IQueryHandler<FindUsersBySearchTextQuery, User[]> handler;

    public UserController(
        IQueryHandler<FindUsersBySearchTextQuery, User[]> handler)
    {
        this. handler = handler;
    }

    public View SearchUsers(string searchString)
    {
        var query = new FindUsersBySearchTextQuery
        {
            SearchText = searchString,
            IncludeInactiveUsers = false
        };

        User[] users = this.handler.Handle(query);

        return this.View(users);
    }
} 
```

这允许您向查询处理程序添加横切关注点，而无需消费者知道这一点，这为您提供了完整的编译时支持。

然而，这种方法 (IMO) 的最大缺点是您很容易以大型构造函数告终，因为您经常需要执行多个查询（而不会真正违反 SRP）。

`IQueryHandler<TQuery, TResult>`为了解决这个问题，你可以在消费者和接口之间引入一个抽象：

```
public interface IQueryProcessor
{
    TResult Execute<TResult>(IQuery<TResult> query);
} 
```

Instread 注入多个`IQueryHandler<TQuery, TResult>`实现，您可以注入一个`IQueryProcessor`. 现在消费者将如下所示：

```
public class UserController : Controller
{
    private IQueryProcessor queryProcessor;

    public UserController(IQueryProcessor queryProcessor)
    {
        this.queryProcessor = queryProcessor;
    }

    public View SearchUsers(string searchString)
    {
        var query = new FindUsersBySearchTextQuery
        {
            SearchText = searchString
        };

        // Note how we omit the generic type argument,
        // but still have type safety.
        User[] users = this.queryProcessor.Execute(query);

        return this.View(users);
    }
} 
```

`IQueryProcessor`实现可能如下所示：

```
sealed class QueryProcessor : IQueryProcessor
{
    private readonly Container container;

    public QueryProcessor(Container container)
    {
        this.container = container;
    }

    [DebuggerStepThrough]
    public TResult Execute<TResult>(IQuery<TResult> query)
    {
        var handlerType = typeof(IQueryHandler<,>)
            .MakeGenericType(query.GetType(), typeof(TResult));

        dynamic handler = container.GetInstance(handlerType);

        return handler.Handle((dynamic)query);
    }
} 
```

它依赖于容器（它是组合根的一部分）并使用`dynamic`类型（C# 4.0）来执行查询。

这`IQueryProcessor`实际上是您的`QueryFactory`.

`IQueryProcessor`不过，使用这种抽象也有缺点。例如，您错过了让您的 DI 容器验证请求的`IQueryHandler<TQuery, TResult>`实现是否存在的可能性。您会`processor.Execute`在请求根对象时发现您改为调用。您可以通过编写一个额外的集成测试来解决这个问题，该测试检查是否`IQueryHandler<TQuery, TResult>`为每个实现`IQuery<TResult>`. 另一个缺点是依赖关系不太清楚（这`IQueryProcessor`是某种环境上下文），这使得单元测试更加困难。例如，当消费者运行一种新类型的查询时，您的单元测试仍将编译。

您可以在此博客文章中找到有关此设计的更多信息：[同时……在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:07:58.120

你的工厂*真的*需要吗？`TQuery`你不能只使用：

```
public void Register<TParameters, TResult>
        (Func<IQuery<TParameters, TResult>> factory)
    where TParameters : class
    where TResult : class
{
}

public IQuery<TParameters, TResult> Create<TParameters, TResult>()
    where TParameters : class
    where TResult : class
{
} 
```

此时，您仍然有两个类型参数，但假设您通常想要获取查询并立即执行它，您可以使用类型推断来允许类似：

```
public QueryExecutor<TResult> GetExecutor() where TResult : class
{
} 
```

*然后*会有一个通用方法：

```
public IQueryable<TResult> Execute<TParameters>(TParameters parameters)
    where TParameters : class
{
} 
```

因此，您的原始代码将变为：

```
var query = _queryfactory.GetExecutor<UserResult>()
                         .Execute(new ActiveUsersParameters("a", "b")); 
```

我不知道这是否会对您的实际情况有所帮助，但这至少是一个可以考虑的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:05:34.583

我可能是OT，但我需要根据我的评论做出回应。我会像这样实现整个查询对象系统：

系统类：

```
public class Context
{
    // context contains system specific behaviour (connection, session, etc..)
}

public interface IQuery
{
    void SetContext(Context context); 
    void Execute();
}

public abstract class QueryBase : IQuery
{
    private Context _context;

    protected Context Context { get { return _context; } }

    void IQuery.SetContext(Context context)
    {
        _context = context;
    }
    public abstract void Execute();
}

public class QueryExecutor
{
    public void Execute(IQuery query)
    {
        query.SetContext({set system context});
        query.Execute();
    }
} 
```

具体查询类：

```
public interface IActiveUsersQuery : IQuery // can be ommited
{
    int InData1 { get; set; }
    string InData2 { get; set; }

    List<string> OutData1 { get; }
}

public class ActiveUsersQuery : QueryBase, IActiveUsersQuery
{
    public int InData1 { get; set; }
    public string InData2 { get; set; }

    public List<string> OutData1 { get; private set; }

    public override void Execute()
    {
        OutData1 = Context.{do something with InData1 and InData};
    }
} 
```

你像这样使用它：

```
QueryExecutor executor;

public void Example()
{
    var query = new ActiveUsersQuery { InData1 = 1, InData2 = "text" };
    executor.Execute(query);

    var data = query.OutData1; // use output here;
} 
```

它仍然具有查询对象系统的相同优点。您仍然可以装饰特定查询或任何查询（您在设计中缺少这些）。它还将每个查询的对象减少到 2 个，如果您不需要特定的查询接口，可以将其减少到仅 1 个。并且看不到讨厌的仿制药。

以上示例的一种专业化：

```
public interface IQuery<TResult> : IQuery
{
    TResult Result { get; }
}

public class QueryExecutor
{
    // ..

    public TResult Execute<TResult>(IQuery<TResult> query)
    {
        Execute((IQuery)query);
        return query.Result;
    }
}

public class ActiveUsersQuery : QueryBase, IQuery<List<string>>
{
    public int InData1 { get; set; }
    public string InData2 { get; set; }

    public List<string> Result { get; private set; }

    public override void Execute()
    {
        //OutData1 = Context.{do something with InData1 and InData};
    }
} 
```

然后使用减少到单行：

```
public void Example()
{
    var outData = executor.Execute(new ActiveUsersQuery { InData1 = 1, InData2 = "text" });
} 
```

# c++ - 自逻辑与？

> ID：12812741
> 
> 赞同：0
> 
> 时间：2012-10-10T05:49:33.753
> 
> 标签：c++, boolean, logical-operators, standards-compliance

对你们中的一些人来说答案可能很明显，但由于我找不到答案，我需要问它。通常，如果一个函数必须返回是否所有执行都没有问题，我会使用一个布尔值来跟踪任何失败。

```
bool myFunction()
{
    bool ok = true;
    if (...) {
        if (...) {
            ok = ...;
        }
        ok = ok && (...);
    }
    ok = ok && (...);
    return ok;
} 
```

由于不`&&=`存在，我经常使用这种语法：（`ok = ok && (...)`可以`(...)`是条件或值）。但我觉得这很不雅。是否有任何符合 C++ 标准的方法可以更简洁优雅地编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:57:29.417

早点返回，因为如果`ok`变为：则不会执行其他代码`false`：

```
bool myFunction()
{
    bool ok = true;
    if (...) {
        if (...) {
            if (!...) return false;
        }
        if (!...) return false;
    }

    return (...);
} 
```

这是异常优于错误代码的另一个原因：如果你不处理它们，你就不会为正常代码路径的代码做意大利面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T06:01:57.890

您可以只使用`&=`布尔标志：

```
bool myFunction()
{
    bool ok = true;
    if (...) {
        if (...) {
            ok &= ...;
        }
        ok &= ...;
    }
    ok &= ...;
    return ok;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:01:57.700

您可以使用`&=`相等的运算符，因为 bool 是 1 位类型并且所有算术运算符都有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T06:02:09.260

尝试使用：

```
&= 
```

而不是 &&=

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:36:48.270

最标准的方法是在不满足条件时返回 false，否则在方法结束时返回 true。所以实际上你甚至不需要那个布尔变量。
就这样使用它：

```
bool myFunction()
{
    if (...) {

    } else return false;

    return true;
} 
```

如果您坚持使用布尔值，请使用 &= 运算符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T07:07:17.210

或者，您可以选择不使用返回值。

传入一个对象或函数指针以用于成功或失败。

例如有一个对象：

```
void onConditionOtherwise(BooleanAction& action)
{
    if (...) && (...) {
        action.success();
    } else {
        action.failure();
    }
} 
```

# java - Java 枚举 - 返回字符串

> ID：12812747
> 
> 赞同：0
> 
> 时间：2012-10-10T05:50:00.230
> 
> 标签：java, enums, tostring

我需要为我的应用程序创建一个元素存储库。

这是我创建的课程。

```
public class Elements
{
  public enum Type1
  {
    A    ("text1"),
    B    ("text2"),
    C    ("text3"),
    D    ("text4"),
    E    ("text5");

    private String identifier;

    Type1(String identifier)
    {
      this.identifier = identifier;
    }

    getPath()
    {
      String path = "";
      //do something
      return path;
    }
  }
} 
```

现在我可以使用`Elements.type1.A.getPath();`

我对 Elements.type1 进行了静态导入，我想删除 getPath() 的使用，因为它会使我的代码复杂化。IE。我需要能够使用`type1.A`.

所以我做了，

```
public class Elements
{
  public enum Type1
  {
    A
      {
        public String toString()
        {
          return getPath("text1");
        }
      },
    B
      {
        public String toString()
        {
          return getPath("text2");
        }
      },
    C
      {
        public String toString()
        {
          return getPath("text3");
        }
      };

    Type1() {}
  }
} 
```

现在我可以使用`Elements.Type1.A`打印语句，但我有一个接受字符串作为参数的方法。

这样就可以了`Elements.Type1.A.toString()`。如果没有 toString()，它会引发错误。

有没有办法摆脱`toString()`？

**编辑：新代码**

```
public Interface Type1 
{
   String A = "text1";
   String B = "text2";
   String C = "text3"; 
}
public class Utility 
{
   public static void main(String[] args) 
   {
     getPath(Type1.A); 
   }
   public static void getPath(String arg) 
   { 
    //Constructs xpath - text1 changes to //*[contains(@class,'text1')] 
    return xpath; 
   } 
} 
public class myClass 
{
   public void doSomething() 
   {
     assertEquals(Type1.A,xpath); 
   } 
} 
```

在这里，Type1.A 返回 "text1" 而不是 //*[contains(@class,'text1')]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T05:52:44.493

看来您需要三个字符串常量而不是枚举。

```
public static final String A = "test1";
public static final String B = "test2";
public static final String C = "test3"; 
```

使用界面并不总是最好的，但如果没有进一步的上下文，我无法提出更好的建议

```
public interface Type1 {
    String A = "test1";
    String B = "test2";
    String C = "test3";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T05:58:56.293

好吧，`Peter`如前所述，您在这里需要`final static`变量..

看起来，就像您想要一组`String Constants`可以使用..那么您绝对应该使用`Peter`引用的内容..

**只是为了扩展他所说**的内容，您可以创建一个接口，并在其中包含所有字符串常量。然后您可以通过`Interface`名称轻松访问它们。

```
public Interface Type1 {
    String A = "text1";
    String B = "text2";
    String C = "text3";
} 
```

**在你的其他班级的某个地方： -**

```
public class Utility {
    public static void main(String[] args) {

        // You can pass your String to any method..
        String a = Type1.A;

        getPath(a);
        getPath(Type1.B);          

    }

    // This method is not doing work according to its name..
    // I have just taken an example, you can use this method to do what you want.
    public static void getPath(String arg) {
        // You can process your string here.
        arg = arg + "Hello";
    }
} 
```

`toString()`您还可以根据需要更改退货内容。

并遵循`Java Naming Convention`..枚举，类以`Uppercase`字母开头..

# opencv - estimateRigidTransform()：将生成的 cv::Mat 转换为变换/旋转信息

> ID：12812749
> 
> 赞同：0
> 
> 时间：2012-10-10T05:50:05.440
> 
> 标签：opencv, matrix, rotation, transformation

作为estimateRigidTransform() 的结果，我得到一个似乎包含矩阵的cv::Mat 对象。不幸的是，我有点不清楚数据字段中到底有什么。

所以我的问题是：如何提取 cv::Mat 的转换/旋转部分，或者如何将 cv::Mat 转换为标准（例如 3x3）矩阵？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:58:49.807

[文档](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html)说它的输出是一个 2x3 变换矩阵，您可以通过以下方式验证这一点

```
std::cout<<your_matrix <<std::endl; 
```

如果您想将其转换为 3x3 矩阵，只需添加 [0,0,1] 作为第三行。

# objective-c - NSObject：保留，从数组中删除并返回自动释放，ARC怎么办？

> ID：12812750
> 
> 赞同：0
> 
> 时间：2012-10-10T05:50:08.233
> 
> 标签：objective-c, ios, automatic-ref-counting

我有以下代码：

```
NSObject *anObject = [[objArray lastObject] retain];
[objArray removeLastObject];
return [anObject autorelease]; 
```

使用 ARC 我不能使用保留或自动释放，但如果我：

```
NSObject *anObject = [objArray lastObject];
[objArray removeLastObject];
return anObject; 
```

从数组中删除时没有`anObject`达到 0 保留计数？

我发现： [ARC 中的 '[[something retain] autorelease]' 的等价物是什么？](https://stackoverflow.com/questions/9643770/whats-the-equivalent-of-something-retain-autorelease-in-arc) 但它确实看起来像同样的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:53:28.977

基本上`anObject`不会发布，因为它仍然在`return`声明中使用。

ARC 所做的是查看您的代码，确定您在哪里使用每个变量，并在将代码编译成可执行文件时在后台插入相应的`retain`和调用。`release`

如果您想绝对确保变量在关键部分中仍然存在（尽管*很少*需要这样做，当然也不是在这里），那么您可以将其显式声明为 `__strong`. 但是请确保您了解对象之间的关系，因为您可以通过违背 ARC 的目的轻松创建保留周期和内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:54:27.980

您的第二个代码块很好，因为局部变量“anObject”是一个强引用。仅当您将“anObject”声明为弱引用时，此代码才会成为问题。

# javascript - 如何在另一个js文件中实例化一个javascript类？

> ID：12812757
> 
> 赞同：50
> 
> 时间：2012-10-10T05:50:52.320
> 
> 标签：javascript

假设我在 file1.js 中定义一个类

```
function Customer(){
    this.name="Jhon";
    this.getName=function(){
        return this.name;
    };
}; 
```

现在如果我想在 file2.js 中创建一个 Customer 对象

```
var customer=new Customer();
var name=customer.getName(); 
```

我得到了例外：`Customer is undefined, not a constructor.`

但是当我在 file2.js 中创建一个客户对象并将其传递给 file1.js 时，它就可以工作了。

```
file1.js

    function Customer(){
        this.name="Jhon";
        this.getName=function(){
            return this.name;
        }
    }
    function customer(){
        return new Customer();
    }

file2.js

    var customer=customer();
    var name=customer.getName(); 
```

但我想使用 new Customer() 在 file1.js 中创建一个客户对象。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-10T06:01:11.560

这取决于您运行的环境。在网络浏览器中，您只需要确保`file1.js`在之前加载`file2.js`：

```
<script src="file1.js"></script>
<script src="file2.js"></script> 
```

在 node.js 中，推荐的方法是使 file1 成为一个[模块](http://nodejs.org/docs/latest/api/modules.html)，然后您可以使用以下函数加载它`require`：

```
require('path/to/file1.js'); 
```

也可以使用[require.js](http://requirejs.org/)库在 HTML 中使用节点的模块样式。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-09-27T12:06:44.317

```
// Create Customer class as follows:
export default class Customer {
   getName() {
     return 'stackoverflow';
   }
}

// Import the class 
// no need for .js extension in path cos it gets inferred automatically
import Customer from './path/to/Customer'; 
// OR
const Customer = require('./path/to/Customer') 

// Use the class
var customer = new Customer();
var name = customer.getName(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-03-02T01:22:01.920

您可以导出方法以从其他文件访问，如下所示：

文件1.js

```
var name = "Jhon";
exports.getName = function() {
  return name;
} 
```

文件2.js

```
var instance = require('./file1.js');
var name = instance.getName(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-10T05:59:13.983

If you are using javascript in HTML, you should include `file1.js` and `file2.js` inside your html:

```
<script src="path_to/file1.js"></script>
<script src="path_to/file2.js"></script> 
```

Note, `file1` should come first before `file2`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-10T06:04:33.880

确保在 file2 中运行代码之前加载 dom...如果您使用的是 jQuery：

```
$(function(){
  var customer=customer();
  var name=customer.getName();
}); 
```

然后文件的顺序无关紧要，代码在加载所有文件之前都不会运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-10T05:59:34.387

Possible Suggestions to make it work:

Some modifications (U forgot to include a semicolon in the statement `this.getName=function(){...}` it should be `this.getName=function(){...};`)

```
function Customer(){
this.name="Jhon";
this.getName=function(){
return this.name;
};
} 
```

(This might be one of the problem.)

and

Make sure U Link the JS files in the correct order

```
<script src="file1.js" type="text/javascript"></script>
<script src="file2.js" type="text/javascript"></script> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-06T21:30:21.593

这是说值是`undefined`因为它是一个构造函数`function`，而不是 a`class`和 a `constructor`。为了使用它，您需要使用`Customer()`or `customer()`。

首先，你需要在 file2.js*之前*加载 file1.js ，就像 slebetman 说的：

```
<script defer src="file1.js" type="module"></script>
<script defer src="file2.js" type="module"></script> 
```

然后，您可以按如下方式更改您的 file1.js：

```
export default class Customer(){
    constructor(){
        this.name="Jhon";
        this.getName=function(){
            return this.name;
        };
    }
} 
```

而file2.js如下：

```
import { Customer } from "./file1";
var customer=new Customer(); 
```

如果我错了，请纠正我。

# php - 如何将此 php mysql 代码转换为 SQL 服务器可接受的 SQL？

> ID：12812769
> 
> 赞同：0
> 
> 时间：2012-10-10T05:51:48.227
> 
> 标签：php, mysql, sql-server-2008-r2

我在下面有这个执行一些 mysql 查询的 php 代码，基于一些逻辑，我想构建可以从 sql server 导入的普通 SQL 代码。

我怎样才能做到这一点？

谢谢你的帮助！！！

> ```
> mysql_query("CREATE DATABASE IF NOT EXISTS `".$mysql_db."`"); --I don't know how with this line
> 
> $q = "SHOW FULL TABLES IN ".$mysql_db;
> $q = mysql_query($q);
> 
> if($tc==0)  --//don't worry about $tc
> {
>   mysql_query("
>   CREATE TABLE IF NOT EXISTS `tdagg` ( --And i don't know how with this
>   `ID` int(11) NOT NULL AUTO_INCREMENT,
>   `Pais` varchar(255) NOT NULL,
>   `HackingInt` int(11) NOT NULL,
>   `Date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, --timestamp can be replace by datetime
>   PRIMARY KEY (`ID`)
> ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; --//I don't understand this line
>   ");
>   mysql_query("
>   CREATE TABLE IF NOT EXISTS `tdagg_accs` (
>   `ID` int(11) NOT NULL AUTO_INCREMENT,
>   `Account` varchar(11) NOT NULL,
>   `IP` varchar(30) NOT NULL,
>   `Hacker` varchar(40) NOT NULL,
>   `Fecha` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
>   `Pais` varchar(255) NOT NULL DEFAULT 'Undefined',
>   PRIMARY KEY (`ID`)
> ) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
>   ");
> }else
> {
>   mysql_query("
>   ALTER TABLE `tdagg_accs` ADD `Pais` varchar(255) NOT NULL DEFAULT 'Undefined'
>   ");
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:24:26.870

```
IF EXISTS(select * from sys.databases where name='your_dbname')
DROP DATABASE your_dbname

Go

Create DATABASE your_dbname

go

IF EXISTS(select * from sys.tables where name='tdagg')
DROP TABLE tdagg

Go
USE your_dbname
Go
CREATE TABLE tdagg ( 
  ID int NOT NULL identity PRIMARY KEY,
  Pais varchar(255) NOT NULL,
  HackingInt int NOT NULL,
  Date timestamp NOT NULL
  ) 
```

同样的方式你可以为其余的表做

# jquery - jQuery选择器通配符映射未知变量

> ID：12812771
> 
> 赞同：4
> 
> 时间：2012-10-10T05:52:24.767
> 
> 标签：jquery, selector, wildcard-mapping

**HTML**

```
<select id="edit-attributes-1"></select>
<select id="edit-attributes-2"></select>
<select id="edit-attributes-3"></select>
<select id="edit-attributes-4"></select> 
```

这是由 cms 生成的，我无能为力

**查询：**

```
 $('select[id^="edit-attributes-"][id!="edit-attributes-12"]').after('<span class="step stepdown step-'+$(this).attr('id')+'">+</span>'); 
```

所以我创建了这个，因为尝试 jquery.ui.spinner 在识别元素方面存在问题。

**笔记：**

```
$(this).attr('id') here results as unknown. 
```

**结果**

```
<select id="edit-attributes-1"></select>
   <span class="step stepdown step-**unknown**">+</span>
<select id="edit-attributes-2"></select>
   <span class="step stepdown step-**unknown**">+</span>
<select id="edit-attributes-3"></select>
   <span class="step stepdown step-**unknown**">+</span>
<select id="edit-attributes-4"></select>
   <span class="step stepdown step-**unknown**">+</span> 
```

如您所见， $(this).attr('id') 的部分是未知的。

**期望的结果**

```
<select id="edit-attributes-1"></select>
   <span class="step stepdown step-**edit-attributes-1**">+</span>
<select id="edit-attributes-2"></select>
   <span class="step stepdown step-**edit-attributes-2**">+</span>
<select id="edit-attributes-3"></select>
   <span class="step stepdown step-**edit-attributes-3**">+</span>
<select id="edit-attributes-4"></select>
   <span class="step stepdown step-**edit-attributes-4**">+</span> 
```

我不知道我怎样才能实现这种概念，或者请提出一种简化事情的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:57:38.060

`this`在您的代码中没有引用您选择的元素，您可以使用`after`'s 功能：

```
$('select[id^="edit-attributes-"][id!="edit-attributes-12"]').after(function(ind){
   return '<span class="step stepdown step-'+ this.id +'">+</span>'
}); 
```

[http://jsfiddle.net/qjVHM/](http://jsfiddle.net/qjVHM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:00:43.350

试试这个代码：

```
 $('select[id^="edit-attributes-"][id!="edit-attributes-12"]').each(function () {
    var this_selection = $(this);
    var selection_id = this_selection.attr('id');
    this_selection.after('<span class="step stepdown step-' + selection_id + '"></span>');  
 }); 
```

# java - 动态创建一个对象，其中类名作为字符串给出

> ID：12812773
> 
> 赞同：8
> 
> 时间：2012-10-10T05:52:30.823
> 
> 标签：java

我正在尝试通过将类名作为字符串发送来动态创建类的对象。我已经在所有的 Java 论坛中进行了搜索，但我无法得到我想要的答案。这是我的要求，我有一个名为 Agent 的类，

```
package somePack;

public class Agent{
  private String Id;
  Private String Name;
  public String getId() {
    return this.id;
  }
  public void setId(String id) {
    this.id = id;
  }
  public String getName() {
    return this.name;
  }
  public void setName(String name) {
    this.name = name;
  }
}

package somePack;

public class Employee{
  private String Id;
  Private String Name;
  public String getId() {
    return this.id;
  }
  public void setId(String id) {
    this.id = id;
  }
  public String getName() {
    return this.name;
  }
  public void setName(String name) {
    this.name = name;
  }
}
public class create{
   public static void main(String[] args){
      newCreate("Employee");
      newCreate("Agent");
   }
   public static void newCreate(String name){
      String path="somePack."+name;
      Class cls=Class.forName(path);
      System.out.println("Class Name " + cls.getName());
  }
} 
```

现在我的问题是，cls.getName() 给了我类名，但现在我想为该类创建对象，即分别为 Employee 类和 Agent 类，但我怎样才能为它们创建对象？传递的字符串可能是其他方法中的其他内容，我如何为此类事物创建对象。

谁能帮我....

先感谢您，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T05:56:32.130

> 但现在我想为该类创建对象

[`Class.newInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)如果您从不需要处理带参数的构造函数，或者使用[`Class.getConstructor(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)或以其他方式处理，请使用该方法[`Class.getConstructors()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructors%28%29)。（调用[`Constructor.newInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)以调用构造函数。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T05:54:20.893

使用[类#newInstance()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)

```
Object o = Class.forName(path).newInstance(); 
```

然后，您可以将其投射到代理。

```
Agent agent = (Agent) Class.forName(path).newInstance(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T05:56:46.437

由于该类有一个默认构造函数（即没有参数），您可以简单地调用[`Class#newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29).

如果它有参数，它会变得有点复杂。

您必须获得对适当`Constructor`via的引用[`Class#getConstructor`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)，并传入预期的参数类类型。

一旦你有了它，你可以调用[`Constructor#newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)传递给它适当的对象

# android - 无法在我的 Android 的 Google Nexus One 设备中创建 SQLite DB？

> ID：12812780
> 
> 赞同：0
> 
> 时间：2012-10-10T05:52:53.163
> 
> 标签：android, sqlite, nexus-one

我正在开发一个应用程序，在该应用程序中我正在创建我的本地 sqlite 数据库，并且它在除**带有 OS 2.3.3 的 Google Nexus One**之外的所有设备中都能成功运行。日志：

```
 CREATE TABLE android_metadata failed
Failed to setLocale() when constructing, closing the database
android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed
    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)
    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)
    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:567)
    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
    at com.weg.ecatalogue.database.ECatalogueDatabase.open(ECatalogueDatabase.java:76)
    at com.weg.ecatalogue.HomeScreen.onCreate(HomeScreen.java:219)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3839)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method)
  Deleting and re-creating corrupt database /data/data/com.weg.ecatalogue/databases/ECatalogue
  android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed
    at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
    at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1987)
    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1855)
    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:567)
    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
    at com.weg.ecatalogue.database.ECatalogueDatabase.open(ECatalogueDatabase.java:76)
    at com.weg.ecatalogue.HomeScreen.onCreate(HomeScreen.java:219)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3839)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method) 
```

请建议我，我该如何解决这个问题..!! :(

```
public class ECatalogueDatabase {

    private static final String DB_PATH = "/data/data/com.weg.ecatalogue/databases/";
    public static final String DATABASE_NAME = "ECatalogue";
    public static final String DATABASE_TABLE = "T_Electrical";
    public static final int DATABASE_VERSION = 1;

    public static final String KEY_ROWID="id";
    public static final String KEY_PRODUCT_LINE="productline";

    public static final String KEY_VOLTAGE="voltage";
    public static final String KEY_OUTPUTHP="outputhp";

    public static final String KEY_FRAME="frame";
    public static final String KEY_RPM="rpm";

    private Context context=null;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    /**
     * Database creation sql statement
     */
    private static final String CREAT_DATABASE="Create Table if not exists "+ DATABASE_TABLE+"("+ KEY_ROWID +" INTEGER PRIMARY KEY NOT NULL,"
    +KEY_PRODUCT_LINE +" nvarchar ,"+ KEY_OUTPUTHP+" numeric ,"+ KEY_RPM +" nvarchar ,"+KEY_VOLTAGE +" nvarchar ," +KEY_FRAME +" nvarchar"+")";

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     *
     * @param ctx the Context within which to work
     */
    public ECatalogueDatabase(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }
    //Helper class
    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREAT_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }

    }

    public ECatalogueDatabase open() //throws SQLException
    {
        try
        {
            db=DBHelper.getWritableDatabase();

        }catch(Exception exception)
        {
            exception.printStackTrace();
        }
        return null;
    }

    public void close()
    {
        DBHelper.close();
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        @SuppressWarnings("unused")
        boolean dbExist = checkDataBase();

        /**
        * CHANGES DONE BY SHAILESH SHARMA TO SOLVE THE PROBLEM OF 2.2 HTC DESIRE IN CLIENT'S WIFE DEVICE :(
        */
        SQLiteDatabase db_Read = null;
        if(dbExist){
        //DO NOTHING IN THIS CASE
        }else{

        db_Read = DBHelper.getReadableDatabase();
        db_Read.close();
        }
        //=================================

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }

    }
    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        try{
            String myPath = DB_PATH + DATABASE_NAME;
            db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){
            System.out.println(e+"sos sos sos sos");
        }

        if(db != null){

            db.close();

        }

        return db != null ? true : false;
    }
    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        InputStream myInput = context.getAssets().open(DATABASE_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DATABASE_NAME;

        OutputStream myOutput = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public int getDatabaseCount(){
        int count = 0;
        Cursor cursor = db.rawQuery("Select * from " + DATABASE_TABLE, null);
        if(cursor!=null){
            count = cursor.getCount();
        }
        cursor.deactivate();
        cursor.close();
        return count;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:49:03.480

如果这个特定的数据库文件在除旧 Android 版本之外的任何地方都可以使用，那么很可能您正在使用旧 SQLite 版本中不可用的一些 SQLite 功能。

例如，从 SQLite 3.7 开始支持 WAL，但 Froyo 具有 SQLite 3.6.22。

# java - 用于 C++ Web 服务的 Java 客户端

> ID：12812781
> 
> 赞同：0
> 
> 时间：2012-10-10T05:52:53.727
> 
> 标签：java, c++, web-services, webservice-client

最近，我在浏览互联网时遇到了一个问题，这让我感到困惑。问题是

Java 客户端可以使用 Web 服务与 C++ 服务器通信吗？

我看到了相反的情况，例如 Java Web 服务和 C# 客户端。但没有关于这个的线索。我还听说过 gSOAP 标准，它是 C/C++ Web 服务的行业标准。但是，这并不能回答我的问题。

想对此有所了解。

谢谢海娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:57:33.660

由于现在最所谓的 Web 服务是平台和语言独立的 - 答案是“是”。java 客户端可以通过与 C++ 服务器通信。网络服务。最常见的技术是

*   [SOAP](http://en.wikipedia.org/wiki/SOAP)简单对象访问协议（基于 XML）或
*   基于[REST的 Web 服务](http://en.wikipedia.org/wiki/REST)

两者通常都使用 HTTP 来管理连接和对话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:33:24.000

如果它是一个基于 SOAP 的 Web 服务，您可以在服务 WSDL 中指向一个类似 wsimport 的工具来生成您的客户端存根。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:38:41.470

SOAP 是所有语言的行业标准。使用 SOAP 发送的文档是 XML，它是文本，所以只要该语言有一个 XML 解析器来编组和解组 XML，它就可以工作。就这一点而言，Java 装备精良。

事实上，如果它是一种编程语言，你甚至不需要内置解析器，如果你是游戏，你可以自己编写解析器代码。它所需要的只是读取文件流的能力和访问网络套接字的能力。

所以是的，Java 客户端可以与运行在使用 C# 或 C++ 或 C 或其他任何东西编译的主机上的 Web 服务通信。只要它是基于标准的 Web 服务。

Java 也可以通过本地调用（通过“本地”Java 库）与 C/C++ 通信，也可以使用 CORBA 与 C/C++ 通信。

Java 和 C/C++ 可以通过多种方式相互交流。

# java-native-interface - 不稳定数据数组中的未知错误

> ID：12812782
> 
> 赞同：0
> 
> 时间：2012-10-10T05:52:57.437
> 
> 标签：java-native-interface

这个 jni 正在工作，但我可能有内存泄漏问题（我认为），

任何人都可以帮助释放以下内存：

```
class arrayCls = env->GetObjectClass(Array1);
len11 = env -> GetArrayLength(Array1);
jintArray dim1= (jintArray) env->GetObjectArrayElement(Array1, 0);
len12 = env -> GetArrayLength(dim1);

localArray1= new jint*[len11];
for(jint i=0; i<len11; ++i){ 
    jintArray oneDim1=  (jintArray)env->GetObjectArrayElement(Array1, i); 
    jint *element1=env->GetIntArrayElements(oneDim1, 0); 

    localArray1[i] = new jint[len12]; 
    for(jint j=0; j<len12; ++j) { 
        localArray1[i][j]= element1[j]; 
        env->ReleaseIntArrayElements(oneDim1, element1, 0); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-22T13:21:04.863

这是错误：

```
for(jint j=0; j<len12; ++j) { 
    localArray1[i][j]= element1[j]; 
    env->ReleaseIntArrayElements(oneDim1, element1, 0); 
} 
```

你必须搬家

```
env->ReleaseIntArrayElements(oneDim1, element1, 0); 
```

在循环之外。无论如何，您应该更喜欢 GetIntArrayRegion() ，因为它是无状态的，因此可以避免此错误。

# azure - 使用辅助角色连接到数据库以检索数据是个好主意吗？

> ID：12812783
> 
> 赞同：0
> 
> 时间：2012-10-10T05:53:01.387
> 
> 标签：azure

刚接触 Windows Azure 的用户不确定使用 worker roll 连接数据库和检索数据是否是个好主意？并填充数据网格？还是坚持使用数据源控件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:04:31.680

将工作角色视为在您的计算机上运行的后台服务，即没有 UI 的应用程序。虽然您的工作角色当然可以从数据库中获取数据，但由于没有 UI，您将无法在任何地方绑定该数据。您需要使用 Web 角色并在那里有一个数据网格并将数据绑定到该网格。因此，方法是让 web 角色从数据库中获取数据并将其绑定到 webrole 中的 aspx 页面之一上的网格。

# android - Android 缩放为位图

> ID：12812785
> 
> 赞同：-1
> 
> 时间：2012-10-10T05:53:18.880
> 
> 标签：android

> **可能重复：**
> [如何在 android 中调整位图的大小？](https://stackoverflow.com/questions/4837715/how-to-resize-a-bitmap-in-android)

谁能告诉我如何`Bitmap`在`Android`. 我想更改位图对象的高度和宽度以适合`ImageView`.

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:32:05.467

以下是将位图缩放到所需大小的方法：

```
 Bitmap bitmap = Bitmap.createScaledBitmap(realBitmap,imageWidth, imageHeight, true); 
```

在这里，您可以根据需要提供 imageWidth 和 imageHeight。“realBitmap”是您拥有的真实位图，“位图”是缩放后返回的位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:57:32.740

[在这里](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)。请自己做一些功课

# css - 设计灵活的页面布局

> ID：12812790
> 
> 赞同：1
> 
> 时间：2012-10-10T05:53:36.187
> 
> 标签：css, css-float

首先查看在油漆中准备的图像。

![](../Images/e666533815870810fbaa577643a8a521.png)

我想设计一个灵活的页面，它将具有这种类型的四个分区。因此监视器屏幕或浏览器大小的变化会自动重新调整窗口大小。这 4 个框应适合 100% 的浏览器屏幕和任何显示器尺寸，并避免滚动条出现。所以任何人都可以告诉我如何在css样式表中对其进行编码。

这是我的代码。html:

```
<div id="bottomleft">
</div>

<div id="topleft">
</div>

<div id="topright">
</div>

<div id="bottomright">
</div>

</div>
</body> 
```

CSS：

```
 *
    {
    margin: 0;
    padding: 0;
    }
    #wrapper
    {
    margin: 0px auto;
    height: 100%;
    width: 100%;
    }
    #bottomleft
    {
    position:relative;
    height: 50%;
    width: 50%;
    border: 1px solid black;
    float: left;
    }
    #topleft
    {
    position:relative;
    height: 50%;
    width: 50%;
    border: 1px solid black;
    float: right;
    }
    #topright
    {
    position:relative;
    height: 50%;
    width: 50%;
    border: 1px solid black;
    float: left;
    }
    #bottomright
    {
    position:relative;
    height: 50%;
    width: 50%;
    border: 1px solid black;
    float: right;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:01:30.830

***[演示](http://jsfiddle.net/rohitazad/CLe6z/1/)***

嗨现在`body, html height 100%;`像这样定义你的css

并`box-sizing`在你的定义`id`

```
body, html{
height:100%;
}
#bottomleft, #bottomright, #topright, #topleft{
box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
} 
```

***[演示](http://jsfiddle.net/rohitazad/CLe6z/1/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:10:56.817

您在所有设备的 head 标记中使用此元数据，并为任何窗口宽度使用其他 css

此元用于任何设备和链接标签，用于加载具有最小宽度 شrbitrary 的 css

```
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" media="print and (min-width: 25cm)" href="http://…" /> 
```

最好的祝福

# c# - 计算列表的安全最大大小

> ID：12812792
> 
> 赞同：1
> 
> 时间：2012-10-10T05:53:40.817
> 
> 标签：c#, .net

我正在尝试在需要创建新列表之前计算列表的最大安全大小。我正在考虑根据类型使用数据结构的大小，然后除以 1 GB（因为 2 GB 是 < .Net 4.5 的限制），以查看我可以安全地将多少元素粘贴在列表中。也许 maxnumber - 3，以防开销和其他情况。

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:15:12.223

如果您的列表包含结构，则您的方法会起作用，但您需要考虑内存对齐（它可能导致超过 3 的错误......）。如果它是引用类型，则元素大小为 4（在 32 位 CLR 上）或 8（在 64 位 CLR 上）。

但是，如果这对您来说甚至是一个问题，您应该考虑使用替代方法。要么将整个列表存储在其他位置（数据库？）并将您需要的部分存储起来，要么使用不同的数据结构，例如列表列表（基本上将数据分段），在每个小列表中放置 100,000 个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:35:56.980

您应该能够获得由几乎 2Gb 的字节数组支持的项目列表（如果您尝试动态增长列表，由于重新分配策略，它显然会失败接近最大大小的一半）。

如果您的数据不是不可变的，则可以考虑采用更友好的 GC 方法，该方法不会在 LOH 上创建很多对象。尝试将所有分配设置为低于 LOH 分配的限制（我认为是 85Kb）并测量代码是否表现得更好。

# android - 如何删除选中的项目

> ID：12812793
> 
> 赞同：0
> 
> 时间：2012-10-10T05:54:05.777
> 
> 标签：android, user-interface, checkbox, baseadapter

我有扩展 BaseAdapter 的 Box 适配器

```
public class BoxAdapter extends BaseAdapter {
  Context ctx;
  LayoutInflater lInflater;
  ArrayList<Product> objects;
  CheckBox cbBuy;

  BoxAdapter(Context context, ArrayList<Product> products) {
    ctx = context;
    objects = products;
    lInflater = (LayoutInflater) ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  }   
      @Override
      public int getCount() {
        return objects.size();
      }

      @Override
      public Object getItem(int position) {
        return objects.get(position);
      }

      @Override
      public long getItemId(int position) {
        return position;
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        // используем созданные, но не используемые view
        View view = convertView;
        if (view == null) {
          view = lInflater.inflate(R.layout.childitem, parent, false);
        }

    Product p = getProduct(position);

    ((TextView) view.findViewById(R.id.tvDescr)).setText(p.name);
    ((TextView) view.findViewById(R.id.tvPrice)).setText(p.price + "");
    ((ImageView) view.findViewById(R.id.ivImage)).setImageResource(p.image);

    cbBuy = (CheckBox) view.findViewById(R.id.cbBox);

    cbBuy.setOnCheckedChangeListener(myCheckChangList);

    cbBuy.setTag(position);

    cbBuy.setChecked(p.box);
    return view;
  }

  Product getProduct(int position) {
    return ((Product) getItem(position));
  }

  ArrayList<Product> getBox() {
    ArrayList<Product> box = new ArrayList<Product>();
    for (Product p : objects) {
      // если в корзине
      if (p.box)
        box.add(p);
    }
    return box;
  }

  OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

      getProduct((Integer) buttonView.getTag()).box = isChecked;
    }
  };
} 
```

现在在 MainActivity 我必须找出选中的复选框并将其删除。

我该怎么做。调用什么方法来获取 getItemId 位置以及如何调用。先感谢您。

```
case R.id.delete:

 if (boxAdapter.cbBuy.isChecked()) {

   products.remove( checked position id );
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:04:52.240

只需`getBoxProducts`在适配器中创建方法：

```
 public void removeBoxProducts()
    {
        List<Product> trash = new ArrayList<Product>();
        for (Product product:objects)
        {
            if (product.box)
            {
                trash.add(product);
            }
        }
        for (Product product:trash)
        {
            objects.remove(product);
        }
    } 
```

要访问此方法，请使用以下命令：

```
ListView list = (ListView) findViewByIf(R.id.list_view_id);
BoxAdapter adapter = (BoxAdapter)list.getAdapter();
adapter.removeBoxProducts();
adapter.notifyDataSetChanged(); 
```

# jsf - Primefaces水印密码不起作用

> ID：12812799
> 
> 赞同：0
> 
> 时间：2012-10-10T05:54:21.237
> 
> 标签：jsf

我在 jsf 页面中有密码字段。我想在密码字段中显示水印文本“输入密码”，但它不显示文本。代码是

```
<p:password id="password" value="#{passwordBean.password1}" required="true" />  
    <p:watermark for="password" value="Enter password" /> 
```

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:35:40.020

似乎您使用的是旧版本的 primefaces ，它已在 pf 3.0 中修复

这是问题单：[问题 2924：带水印的密码字段不起作用](http://code.google.com/p/primefaces/issues/detail?id=2924)

升级您的 primefaces 版本 jar

# java - 如何将列表的值传递给隐藏标签？

> ID：12812805
> 
> 赞同：0
> 
> 时间：2012-10-10T05:54:41.767
> 
> 标签：java, html, jsp, struts2, arraylist

我的jsp中有以下代码：

```
<c:forEach var="value" items="${MyList}" varStatus="loop">
  <tr><td><div id="Name1">Here:${value.name}</div></td></tr>
  <s:hidden id="Name" name="Name" value="%{value.name}"/> 
```

html源代码如下：

```
 <tr><td><div id="Name1">Here:My name is X</div></td></tr>
     <input type="hidden" name="Name" value="" id="Name"/> 
```

如图所示，div 标签正确显示了 value.name，但隐藏标签的 value 属性为空。我找不到任何解决方案，因为大多数解决方案与列表无关。我将其更改为`${value.name}`但遇到此错误：“根据标记文件中的 TLD 或属性指令，属性值不接受任何表达式”

我完成的JSP如下：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>  

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Register</title>
</head>
<body>
    <div id="Search">
        <label for="message">Travel details</label>
    <table border="1">

    <s:form action="Search_Search" >

      <td>
      <s:textfield name="City" label="City" /></td>
      <td><s:textfield name="HighRate" label="Budget" /></td>
      <td><s:textfield name="Adults" label="Adults"/></td>
      <td><s:textfield name="Childs" label="Child (less 15)"/></td>
      <td><s:select label="Prefered hotel rate" name="rate" list="rate" value="no preference"/></td> 
      <td><s:textfield name="Days" label="Days"/></td>
      <td><s:radio label="Is the budget fixed" name="BdgFixed" list="BdgFixed"
            value="defaultBudget"/>
      <td><s:submit/></td>

      </s:form>

    </table>

    </div>

    <sx:div>
                <table border="1">
                <tr>
                <c:forEach var="Hotel" items="${HotelsList}" varStatus="loop">
                 <c:set var="nameVar" scope="request" value="${Hotel.name}"/>
                 <c:if test="${not loop.first and loop.index % 3 == 0}">
                   </tr><tr>
                 </c:if>
                <td>

                  <div id="HotelInfo">

         <td>
         <s:form action="Search_AddHotel" >
         <tr><td><div id="image"><img src=${Hotel.thumbNailUrl} alt="image"/></div></td></tr>
           <s:textfield name="Name3" label="Budget" />  
         <tr><td><div id="Name1">Here:<c:out value="${nameVar}"/></div></td></tr>
         <s:hidden id="Name" name="Name" value='${nameVar}'/>
         <s:label id="name2" name="name2" value="John"/>
         <tr><td><div id="Highest Rate:">Rate:${Hotel.highRate}</div></td></tr>
         <tr><td><div id="Address">Address:${Hotel.address}</div></td></tr>
         <tr><td>
                      <s:submit/>
        </s:form>

         </td></tr>
          </td>

               </c:forEach>
                    </tr>
                </table>
   </sx:div>

</body>
</html> 
```

我完成的Java类如下：

```
package com.funontour.controller;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.input.SAXBuilder;

import com.funontour.common.Hotels;
import com.funontour.model.DistanceModel;
import com.funontour.model.SearchModel;

import java.io.ByteArrayOutputStream;
import java.io.Reader;
import java.io.StringReader;

import javax.xml.soap.*;
import java.net.*;
import java.util.*;

public class SearchAction {

    private String Name;
    private String City;
    private String HighRate;
    private String Adults;
    private String Childs;
    private List HotelsList;
    private List<String> BdgFixed;
    private List<String> rate;
    private static final String Yes = "Yes";
    private static final String No = "No";

    public String execute() throws Exception {
        generateForm();
        // runClient(); //actual rate should be received
        // System.out.println("goes back to strut.xml");
        return "SUCCESS";
    }
    public String getName()
    {
        return Name;
    }
    public void setName(String name){
        this.Name = name;
    }
   public void AddHotel(){
       System.out.println("name is:"+Name);
       System.out.println("getName:" + getName());
       System.out.println("thisName" + this.Name);

   }
    public String Search() { // Country is set to AU
        System.out.println("In Search method of SearchAction");
        Showdetails();
        String result = SearchHotel();

        generateForm();  
        return result;
    }

    public void generateForm(){

        BdgFixed = new ArrayList<String>();
        BdgFixed.add(Yes);
        BdgFixed.add(No);

        rate = new ArrayList<String>();
        rate.add("1");
        rate.add("2");
        rate.add("3");
        rate.add("4");
        rate.add("5");
    }

    public void Showdetails(){
        System.out.println(this.City + " " + this.HighRate + " " + this.Adults + " " 
                + this.Childs + " " + this.rate+ " " + this.BdgFixed);
    }
    public String SearchHotel(){
        HotelsList = new ArrayList();
        SearchModel searchModel = new SearchModel();
        List inputs = new ArrayList<String>();

        //If some of these are not entered should ask again
        // for multiple choices do not work if nothing has been selected
        if(!getCity().isEmpty())
        inputs.add(getCity());
        else
            inputs.add("London");

        if(!getHighRate().isEmpty())
        inputs.add(getHighRate());
        else
            inputs.add("0");

        if(!getAdults().isEmpty())
        inputs.add(getAdults());
        else
            inputs.add("1");

        if(!getChilds().isEmpty())
        inputs.add(getChilds());
        else
            inputs.add("0");

        if(!getRate().isEmpty())
        inputs.add(this.rate.get(0).toString());
        else
            inputs.add("1");

        if(!getBdgFixed().isEmpty()) 
        inputs.add(this.BdgFixed.get(0).toString());   
        else
            inputs.add("Yes");

        if(searchModel.createMessage(inputs) == "SUCCESS")
        {
        System.out.println("SUCCESS");
        setHotelsList(searchModel.getHotelsList());
        return "SUCCESS";
        }
        System.out.println("Failed");
        return "SUCCESS";
    }
    /* Search for the distance      
    public String Search(){

    /*//Search for Suggestion
    public String Search(){
        System.out.println("In Search method");
        SearchModel sm = new SearchModel();
        sm.retrieveItems(getCity().toString());
        return "SUCCESS";
    }*/
    public String getCity() {
        return City;
    }

    public void setCity(String city) {
        City = city;
    }

    public String getHighRate() {
        return HighRate;
    }

    public void setHighRate(String highRate) {
        HighRate = highRate;
    }

    public List getHotelsList() {
        return HotelsList;
    }

    public void setHotelsList(List hotelsList) {
        HotelsList = hotelsList;
    }

    public String getAdults() {
        return Adults;
    }

    public void setAdults(String adults) {
        Adults = adults;
    }

    public String getChilds() {
        return Childs;
    }

    public void setChilds(String childs) {
        Childs = childs;
    }

    public List<String> getBdgFixed() {
        return BdgFixed;
    }

    public void setBdgFixed(List<String> bdgFixed) {
        BdgFixed = bdgFixed;
    }

    public List<String> getRate() {
        return rate;
    }

    public void setRate(List<String> rate) {
        this.rate = rate;
    }

} 
```

我`%{nameVar}`也使用过，但值仍然是空的。:(有人帮助请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:44:41.420

试试这个

```
<c:forEach var="value" items="${MyList}" varStatus="loop">           
    <c:set var="nameVar" scope="request" value="${value.name}"/>    
    <tr>
        <td>
           <div id="Name1">Here: <c:out value="${nameVar}"/> </div>
           <s:hidden id="Name" name="Name" value='${nameVar}'/> 
        </td>
    </tr>          
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:35:47.530

尽量不要使用 , 等属性名称`value`，`key`因为它们可能是保留关键字。

所以换成`value`不同的东西，看看这是否有效。

**编辑：**
将其 更改
`<s:hidden id="Name" name="Name" value='${nameVar}'/>`
为
`<s:hidden id="Name" name="Name" value="%{nameVar}"/>`

**更新：**

如果你想使用`forEach`标签，那么使用
`<input type="hidden" name="Name" value="${nameVar}">`
或使用`<s:iterator>`标签
`<s:hidden id="Name" name="Name" value="%{nameVar}"/>`

# django - Django中的表单和文件上传

> ID：12812808
> 
> 赞同：5
> 
> 时间：2012-10-10T05:54:53.693
> 
> 标签：django, forms, file-upload

当我尝试提交表单时，我一直试图弄清楚出了什么问题。当我在表单上点击提交时，我在网页上收到此响应：

```
Image:
    This field is required. 
```

似乎认为我没有在表格中包含图像！

## **设置.py**

```
...
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': '/path/to/myproject/database/sqlite.db'),
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
    }
}
...
MEDIA_ROOT = '/path/to/myproject/media/'
MEDIA_URL = '/media/'
...
INSTALLED_APPS = (
    ...
    'myapp',
) 
```

## **模型.py**

```
from PIL import Image
from django import forms
from django.db import models
from django.forms import ModelForm

UPLOADER_CHOICES = (
    ('C', 'Common User'),
    ('N', 'Nutrition Kitchen'),
)

class Meal(models.Model):

    title       = models.CharField(max_length=100)
    slug        = models.SlugField(unique=True)
    image       = models.ImageField(upload_to='images/')
    serves      = models.IntegerField()
    ingredients = models.CharField(max_length=1000)
    instructions= models.CharField(max_length=1000)
    time_period = models.IntegerField()# in minutes
    uploader    = models.CharField(max_length=1, choices=UPLOADER_CHOICES)

def __unicode__(self):
    return self.title 
```

## **表格.py**

```
from django import forms
from meal.models import Meal

class MealForm(forms.Form):

    title       = forms.CharField(max_length=100)
    image       = forms.ImageField()
    ingredients = forms.CharField(max_length=1000)
    instructions= forms.CharField(max_length=1000)
    time_period = forms.IntegerField(required=False)
    serves      = forms.IntegerField(required=False) 
```

## **视图.py**

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from meal.models import Meal
from meal.forms import MealForm

def upload(request):
    if request.method == 'POST':
        form = MealForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return render_to_response('upload.html', {'form': form})
    else:
        form = MealForm()
    return render_to_response('upload.html', {'form': form}, context_instance=RequestContext(request)
    ) 
```

## **上传.html**

```
{% extends "base.html" %}
{% block content %}
{% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
{% endif %}
<div data-role="content" style="padding: 15px">
    <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.errors }}
            {{ form.non_field_errors }}
            {{ form.as_table }}
        <input type="submit" value="Submit" id="Save">
    </form>
</div>
{% endblock %} 
```

有没有人知道我可能做错了什么？我觉得我什么都试过了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T19:35:03.903

好的，事实证明这是 jQuery Mobile 的问题，我之前没有提到。我需要做的就是改变

```
<form action="" method="post" enctype="multipart/form-data"> 
```

到

```
<form action="" method="post" enctype="multipart/form-data" data-ajax="false"> 
```

因为 jQuery 试图为我处理 POST。显然，当您在 Django 中发布到相同的 URL 并想要手动处理它时，您必须包含

```
data-ajax="false" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:20:53.283

在你的 forms.py 中试试这个

```
image = forms.ImageField(widget=forms.FileInput()) 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T00:53:48.573

在您的模型中，您有

```
models.ImageField(upload_to='images/') 
```

此字段是必需的。将其更改为

```
models.ImageField(upload_to='images/', blank=True, null=True) 
```

将使其不需要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T02:37:50.673

这一行：

```
form.save() 
```

...什么也没做。您应该要么处理来自表单的cleaned_data，要么使用具有save() 方法的ModelForm。

[Django 表单](https://docs.djangoproject.com/en/dev/topics/forms/)| [Django 模型表单](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:00:08.313

看来你错过了这个，

```
class MealForm(forms.Form):
    class Meta:
        model = Meal 
    title = forms.CharField(max_length=100) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T20:45:32.720

尝试使用**模型**表单而不是常规**表单**。

```
class MealForm(forms.ModelForm): #Note, this is a Modelform, not a regular old form.
    class Meta: 
        model = Meal 
```

# c - 如何打印无符号整数的最大值？

> ID：12812812
> 
> 赞同：10
> 
> 时间：2012-10-10T05:55:13.223
> 
> 标签：c

我想打印 4 个字节的无符号整数的最大值。

```
#include "stdafx.h"
#include "conio.h"

int _tmain(int argc, _TCHAR* argv[])
{
    unsigned int x = 0xffffffff;
    printf("%d\n",x);
    x=~x;
    printf("%d",x);
    getch();
    return 0;
} 
```

但我得到的输出为 -1 和 0。如何打印 x = 4294967295？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-10T05:58:33.130

该`%d`格式将其参数视为已*签名* `int`的. 改为使用`%u`。

但是获得类型最大值的更好方法`unsigned int`是使用`UINT_MAX`宏。你需要

```
#include <limits.h> 
```

使其可见。

您还可以通过将值 -1 转换为类型来计算无符号类型的最大值。

```
#include <limits.h>
#include <stdio.h>
int main(void) {
    unsigned int max = -1;
    printf("UINT_MAX = %u = 0x%x\n", UINT_MAX, UINT_MAX);
    printf("max      = %u = 0x%x\n", max, max);
    return 0;
} 
```

请注意*，*`UINT_MAX`不一定。如果碰巧是 32 位，但它可能小到 16 位；它在一些系统上是 64 位的。 *`0xffffffff``unsigned int`*

 ** * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-10T05:56:57.140

用作printf`%u`格式字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T05:58:48.490

在`<limits.h>`:中定义了宏`UINT_MAX`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-12T10:50:26.607

这是代码：

```
#include <stdio.h>

int main(void) {
    unsigned int a = 0;
    printf("%u", --a);
    return 0;
} 
```

输出：

`4294967295`

它的工作原理是它`0`的最小值`unsigned int`，当你进一步减小该值时，`1`它会环绕并移动到最大值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-10T05:58:05.697

用作print 、for和for*`%u`*的格式字符串。`unsigned int``%lu``unsigned long``%hu``unsigned short`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-10T05:57:13.410

您应该使用`<stdint.h>`and `<limits.h>`then`INT_MAX`或任何适合您的类型的限制。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-15T00:28:37.983

printf("%u", ~0); //用 1 填充 unsigned int 中的所有位并打印该值。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-11T15:36:49.763

好奇而简单的方法就是

```
printf("%lu",-1); 
```

它会打印您计算机中最大的未签名内容:)*

# php - Drupal 7 在 apache solr 中生成搜索结果

> ID：12812815
> 
> 赞同：0
> 
> 时间：2012-10-10T05:55:39.240
> 
> 标签：php, solr, drupal-7

下面是我用于预处理 apache solr 搜索结果的代码，

```
function apachesolr_search_apachesolr_process_results(&$results, DrupalSolrQueryInterface $query) {
    $rows = array();
    foreach ($results as $key => $fields) {

        $rows [] = array(
            'title' => t($fields['fields']['title']),
            'Category' => $fields['fields']['category'],
            'Dper' => $fields['fields']['crtor'],
            'pvalue' => $fields['fields']['pvalue'],
            'rvalue' => $fields['fields']['rvalue'],
            'avalue' => $fields['fields']['avalue'],
        );
    }

    $header = array(
        array('data' => 'title', 'field' => 'title', 'sort' => 'ASC'),
        array('data' => 'category', 'field' => 'category', 'sort' => 'ASC'),
        array('data' => 'creator', 'field' => 'creator', 'sort' => 'ASC'),
        array('data' => 'pvalue', 'field' => 'pvalue'),
        array('data' => 'rvalue', 'field' => 'rvalue'),
        array('data' => 'avalue', 'field' => 'avalue'),
    );

    $results['processresults'] = theme('table', array('header' => $header, 'rows' => $rows));
    $results['processresults'] .= theme('pager');

    return $results;
} 
```

当我在同一函数中打印 $results['processresults'] 并退出时，表已生成。如果我返回 $results 并且表格没有显示在我的 apache solr 搜索结果页面中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:40:22.967

传递给 process_results() 钩子的 $results 变量必须保持一定的结构，才能继续使用可能在其上调用的钩子和模板的其余部分。

因此，如果您想自定义搜索结果，我会做的是查看**search-results.tpl.php**和**search-result.tpl.php**模板文件（注意第二个中的单数）。

您可以在核心搜索模块中找到它们的副本，我只需复制并粘贴这些整个文件（甚至无需重命名它们）并将它们放在您自定义主题的 /templates/ 文件夹中。清除缓存后，它们应该被拾取，因为它们现在具有优先权。

search-results.tpl.php 文件控制整个搜索结果页面的外观，而 search-result.tpl.php 文件控制显示单个搜索结果的对象（哪些字段、以何种顺序等）。既然您在自己的自定义主题中有副本，可以随意修改它们！

希望这足以让你开始！

# java - 如何在 Java 中创建 API 来更改 Unix 用户的密码？

> ID：12812817
> 
> 赞同：0
> 
> 时间：2012-10-10T05:55:50.880
> 
> 标签：java, unix

我是 Unix 环境的新手，

我要做的是创建一个 API 来更改具有 Unix 环境的用户的密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:59:44.173

Be really careful when dealing with passwords so there is no leak. Use [exec()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d%29%5d) to invoke the system command (typically `passwd`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:00:26.973

基本上，您需要使用用于更改密码的“passwd”unix 命令。

您需要使用[ProcessBuilder从 java 调用此命令](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

或较旧的 API[运行时](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html)

现在，如果您想以交互方式运行它，您还需要拦截 passwd 命令的输出（例如使用一些 ui 输入实际密码等）。在这种情况下，我建议您阅读[这篇文章](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1)

您也可以考虑使用某种预定义的 shell 脚本，允许以非交互方式更改密码。在这种情况下，您只需调用脚本，它就会完成所有工作。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:05:18.973

一提示。调用该`passwd`命令后，您需要在 stdout 上打印 2 次密码，系统会要求您输入密码。

`exec()`要查看调用检查 后如何读取表单标准输入： [http ://www.ensta-paristech.fr/~diam/java/online/io/javazine.html](http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html)

# c# - 自定义类属性 - 动态参考

> ID：12812818
> 
> 赞同：1
> 
> 时间：2012-10-10T05:55:54.113
> 
> 标签：c#

我有一组自定义类属性 - 每个属性的名称都与数据库中的值相同。我想做的是根据开关动态设置每个属性的值。

自定义属性如下所示：

```
 class MyDEF
{

    #region Variable Declaration Section....

    private string _ABC01;
    private string _ABC02;
    private string _ABC03;
    private string _ABC04;

     #endregion 

    #region Property Declaration Section

    public string ABC01
    {
        get { return _ABC01; }
        set { _ABC01= value; }
    }

    public string ABC02
    {
        get { return _ABC02; }
        set { _ABC02= value; }
    }

    public string ABC03
    {
        get { return _ABC03; }
        set { _ABC03= value; }
    }

    public string ABC04
    {
        get { return _ABC04; }
        set { _ABC04= value; }
    }

   #endregion
 } 
```

然后值中加载的代码如下所示：

```
 foreach (DataRow dr in dataTable.Rows)
            {
                ED = dr["FieldDesc"].ToString();

     switch (ED)
     {
                            case "ABC01":
                                ratesVO.ABC01 = dr["DefaultValue"].ToString();
                                break;
                            case "ABC02":
                                ratesVO.ABC02 = dr["DefaultValue"].ToString();
                                break;
                            case "ABC03":
                                ratesVO.ABC03 = dr["DefaultValue"].ToString();
                                break;
                            case "ABC04":
                                ratesVO.ABC04 = dr["DefaultValue"].ToString();
                                break;
     }
    } 
```

我想要实现的是：

```
 foreach (DataRow dr in dataTable.Rows)
    {
                ED = dr["FieldDesc"].ToString();
                MyCustomProperty.ED = dr["DefaultValue"].ToString();
    } 
```

这可能吗？如果是这样，请提供示例或参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:03:13.747

您所说的基本上是反射，其中（简化）：

```
string propertyName = (string)dr["FieldDesc"];
object value = dr["DefaultValue"];
// assign
obj.GetType().GetProperty(propertyName).SetValue(obj, value, null); 
```

但是，反射会影响性能；少量使用是可以的，但是作为数据访问循环的一部分，这真的会伤害到你；您可能会考虑使用诸如[FastMember](http://nuget.org/packages/FastMember)之类的库支持来显着提高性能：

```
var wrapped = ObjectWrapper.Create(obj);
...
wrapped[propertyName] = value; 
```

但是，我会说，将事物加载到 a`DataTable`中只是为了将它们推入对象模型几乎没有价值。您也可以直接从数据读取器 API 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:00:26.573

您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.110%29.aspx)根据属性名称动态设置值：

```
foreach (DataRow dr in dataTable.Rows)
{
    ED = dr["FieldDesc"].ToString();
    ratesVO.GetType().GetProperty(ED)
                     .SetValue(ratesVO, dr["DefaultValue"].ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:02:35.203

您可以做的是，像这样对数据表执行选择。（虽然这不是一个完美的代码，您可能需要对其进行改进。）

```
DataRow[] result = table.Select("FieldDesc='<Required property>'");
        return result[0]["DefaultValue"] 
```

# android - Google Play 错误“从服务器 [DF-DFERH-01] 检索信息时出错”

> ID：12812822
> 
> 赞同：67
> 
> 时间：2012-10-10T05:56:27.920
> 
> 标签：android, in-app-billing, google-play

我刚刚完成了一款安卓游戏，我正在测试应用内购买功能。我正在使用 android.test.purchased 发送测试

直到几个小时前它工作正常。但是现在当我在google play中点击“接受并购买”时，商店给出了错误。

> > Google 播放错误“从服务器 [DF-DFERH-01] 检索信息时出错”

有谁知道这个错误是什么意思？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-10-10T19:31:54.897

试试这个，因为它在我的三星手机上解决了：

```
1\. Open the "Google Play" app and press the home button to return

2\. Go to Settings → Applications → Manage Applications

3\. Select the "ALL" tab, Search for "Google Play Store" and press it to open.

4\. Press "Force stop"

5\. Press "Clear cache"

6\. Press "Clear Data"

7\. Now Open Play Store and it will work normally. 
```

如果上述步骤没有帮助，请尝试以下操作：

```
1\. Go to Settings → Applications → Manage Applications

2\. Select the "ALL" tab, Search for "Google Services Framework" and press it to open.

3\. Press "Force stop"

4\. Press "Clear cache"

5\. Press "Clear Data" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-19T11:13:44.770

**这个对我有用.....**

我去了手机上的设置并删除了我的gmail帐户，然后重新添加并同步了该帐户，它对我有用。

设置>帐户>删除帐户设置>帐户>添加帐户>同步并按照屏幕提示进行操作

希望它对你有用，我也收到了 df-dferh-01 错误并且无法购买应用程序购买，这成功了

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-11T17:19:35.443

这是 Google 报告的错误：[错误报告](http://code.google.com/p/android/issues/detail?id=35564)。它似乎与谷歌的服务器有关，并且非常断断续续。IE，您会注意到所有评论是如何围绕特定日期展开的。自己无法修复它，但一条评论建议尝试以下方法：

1.  关闭您的设备。
2.  取出您的 SIM 卡。
3.  打开您的设备。
4.  将您的设备连接到非本地 (PR) 服务器，例如 ATT、TMobile、Spring。如果您有朋友要求提供无线网络连接。
5.  打开 Play 商店。
6.  关闭并重新安装sim卡。
7.  打开。

似乎此错误仅与 Google 的静态响应有关。使用真实的产品 ID 不会遇到这个问题。

**更新：**我在这里的回答已经很老了，InApp 购买库从那以后发生了很大变化。请参阅@Ehsan Sajjad 的答案。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-11-18T13:50:14.973

由于产品 sku 不正确，我遇到了同样的问题。

我正在使用`android.test.purchase`而不是`android.test.purchased`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-14T19:23:18.893

安装 Google Play 服务后问题已解决（直到现在才需要它们，因为在我的 Android 2.3 上使用了太多资源而被删除），然后执行以下步骤：

[来自 Google+ 上的 Ryan Lestage](https://plus.google.com/u/0/109598013262032506525/posts/RbGpuAsjhoN)：

1.  清除以下应用的数据：

    *   应用商店
    *   下载管理器
    *   谷歌服务框架
2.  重启手机。

3.  启动 Play 商店应用。
4.  等待设备在网络[Play 商店](http://play.google.com)中再次显示。它将出现在`Settings > Devices`. 可能需要半小时到几个小时才能出现。

当您的手机出现在 Play 商店中且日期注册为今天时，请继续执行后续步骤，但不要在此之前进行。

1.  从您设备的应用程序菜单中打开 Google 设置。
2.  轻触安卓设备管理器。
3.  取消选中允许远程恢复出厂设置。
4.  进入设备的主设置菜单，然后轻触`Apps > All > Google Play services`。
5.  触摸`Clear Data`。请注意，此操作不会删除个人数据。
6.  返回 Google 设置并选择允许远程恢复出厂设置。
7.  重新启动您的设备。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T05:51:59.113

解决此问题的建议是，如果您在从 google play 下载之前已经在手机中安装了应用程序。（显然是从您的代码运行）然后首先卸载它。然后从 google play 下载并安装应用程序。它对我有用。谢谢和问候。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-19T00:42:06.093

它与新的 Play 商店更新有关。

去：

> 设置/应用程序/全部/Google Play 商店

选择`Google Play Store`并选择**卸载更新**- 这应该可以解决您的问题。打开 Play 商店并向 Verizon 或您使用的任何电话提供商购买您的应用或游戏选择账单，然后接受。登录到您的 Google 帐户，您就完成了。当您关闭 Play 商店时，它将再次更新到最新版本，并允许您向帐户收费。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-02T15:57:39.893

我遇到过同样的问题。简单解决；我有 (2) 个 Google 帐户链接到我的 Play 商店。碰巧我从“帐户 B”安装了“一个”应用程序，我试图从“帐户 A”对其进行评分。所以，切换帐户，瞧。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-18T09:10:18.573

长按 Google Play 应用程序

*   选择应用信息
*   点击清除缓存
*   点击清除应用数据

现在再次点击 Google Play 应用程序，它现在可以工作了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-28T12:49:26.367

上面没有任何东西使它对我有用。对我来说，我正在测试订阅，但我忘记了 SkuType.SUBS，将其更改为 INAPP 以便保留的谷歌测试产品修复它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-11T11:57:15.807

在华为 P20 上测试：

1.  卸载（或禁用）Play 商店。
2.  重新安装 Google Play：（[来源](https://www.quora.com/How-do-I-reinstall-the-Google-Play-Store-app-on-an-Android-device-if-I-uninstalled-it-previously/answer/Vishal-Khedkar)）

    1.  [从APK Mirror](https://www.apkmirror.com/apk/google-inc/google-play-store/)下载最新版本的 Google Play 商店。
    2.  只需打开 APK 文件即可安装应用程序。
3.  重启设备。

注意：在找到此解决方案之前，我按照此处其他一些答案的说明进行操作：从我的设备中删除我的 Google 帐户并再次添加，从各种 Google Play 应用程序中清除数据和缓存。这可能是必要的，也可能不是必要的；欢迎反馈。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-10-11T17:26:35.373

就我而言，当我尝试使用 VPN 从 Google Play 商店下载应用程序时，会显示此错误消息。仅当我禁用 VPN 时下载才有效。使用 VPN，下载仅适用于我之前下载的应用程序。

这看起来像是来自谷歌的审查，这对用户体验非常不利，我希望他们能制止这种情况。

幸运的是，我没有在智能手机上使用 Android，而是在我的 Linux 笔记本电脑上使用 Anbox 或 VirtualBox 中的 Android x86。

# objective-c - 通过单击 Xcode 中的按钮添加多个秒表标签

> ID：12812823
> 
> 赞同：0
> 
> 时间：2012-10-10T05:56:28.357
> 
> 标签：objective-c, xcode, uibutton, nstimer, stopwatch

我是 Xcode 的新手，使用 Objective-C 编程。我有秒表程序。我需要通过单击按钮添加多个秒表。有没有办法做到这一点？

我现有的代码在这里：

秒表视图控制器.h

```
#import <UIKit/UIKit.h>

@interface StopWatchViewController : UIViewController {

    UILabel *stopWatchLabel;
    IBOutlet UIButton *btnStartStop;
    NSTimer *stopWatchTimer; // Store the timer that fires after a certain time
    NSDate *startDate; // Stores the date of the click on the start button
}
  @property (nonatomic, retain) UIButton *btnStartStop;
  @property (nonatomic, retain) IBOutlet UILabel *stopWatchLabel;
- (IBAction)onStartPressed:(id)sender;
- (IBAction)onStopPressed:(id)sender;
- (IBAction)AddStopwatch:(id)sender;

@end 
```

秒表视图控制器.m

```
 #import "StopWatchViewController.h"

        @implementation StopWatchViewController
        @synthesize stopWatchLabel;

        - (void)dealloc
        {
            [stopWatchLabel release];
            [super dealloc];
        }

        - (void)didReceiveMemoryWarning
        {
            // Releases the view if it doesn't have a superview.
            [super didReceiveMemoryWarning];

            // Release any cached data, images, etc that aren't in use.
        }

        #pragma mark - View lifecycle

        /*
        // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
        - (void)viewDidLoad
        {
            [super viewDidLoad];
        }
        */

        - (void)viewDidUnload
        {
            [self setStopWatchLabel:nil];
            [super viewDidUnload];
            // Release any retained subviews of the main view.
            // e.g. self.myOutlet = nil;
        }

        - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
        {
            // Return YES for supported orientations
            return (interfaceOrientation == UIInterfaceOrientationPortrait);
        }

        - (void)updateTimer
        {
            NSDate *currentDate = [NSDate date];
            NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
            NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];

            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
            [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
            NSString *timeString=[dateFormatter stringFromDate:timerDate];
            stopWatchLabel.text = timeString;
            [dateFormatter release];
        }

        - (IBAction)onStartPressed:(id)sender {
    if ([[btnStartStop titleForState:UIControlStateNormal] 
    isEqualToString:@"Start Clock"])

{
            startDate = [[NSDate date]retain];

            // Create the stop watch timer that fires every 10 ms
            stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                              target:self
                                                            selector:@selector(updateTimer)
                                                            userInfo:nil
                                                             repeats:YES];

                  [btnStartStop setTitle:@"Stop Clock" forState:UIControlStateNormal];
        }
 else
{
    //---stop the timer---
        [timer invalidate];

        //---change the caption back to "Start Clock"---
        [btnStartStop setTitle:@"Start Clock" forState:UIControlStateNormal];
    }
}

     - (IBAction)AddStopwatch:(id)sender {

    }
        @end 
```

我不知道在 Addstopwatch 方法中会做什么，请任何人为此提供解决方案。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:43:15.917

如果我理解你的问题，我认为应该这样做：

首先你必须定义一个`counter`as并在方法中`int`给它一个值，编辑你的代码到这个：`0``ViewDidLoad`

秒表视图控制器.h

```
#import <UIKit/UIKit.h>

@interface StopWatchViewController : UIViewController {

UILabel *stopWatchLabel;
IBOutlet UIButton *btnStartStop;
IBOutlet UIButton *btnAddStopWatch;
NSTimer *stopWatchTimer; // Store the timer that fires after a certain time
NSDate *startDate; // Stores the date of the click on the start button
int counter;
}
  @property (nonatomic, retain) UIButton *btnStartStop;
  @property (nonatomic, retain) UIButton *btnAddStopWatch;
  @property (nonatomic, retain) IBOutlet UILabel *stopWatchLabel;
 - (IBAction)onStartPressed:(id)sender;
 - (IBAction)onStopPressed:(id)sender;
 - (IBAction)AddStopwatch:(id)sender;

@end 
```

stopwatchviewcontroller.m #import "StopWatchViewController.h"

```
 @implementation StopWatchViewController
    @synthesize stopWatchLabel;

    - (void)dealloc
    {
        [stopWatchLabel release];
        [super dealloc];
    }

    - (void)didReceiveMemoryWarning
    {
        // Releases the view if it doesn't have a superview.
        [super didReceiveMemoryWarning];

        // Release any cached data, images, etc that aren't in use.
    }

    #pragma mark - View lifecycle

    /*
    // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
    - (void)viewDidLoad
    {
        [super viewDidLoad];
    }
    */

    - (void)viewDidUnload
    {
        [self setStopWatchLabel:nil];
        [super viewDidUnload];
        // Release any retained subviews of the main view.
        // e.g. self.myOutlet = nil;
        counter = 0;
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        // Return YES for supported orientations
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }

    - (void)updateTimer
    {
        NSDate *currentDate = [NSDate date];
        NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
        NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
        [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
        NSString *timeString=[dateFormatter stringFromDate:timerDate];
        stopWatchLabel.text = timeString;
        [dateFormatter release];
    }

       - (IBAction)onStartPressed:(id)sender {
if ([[btnStartStop titleForState:UIControlStateNormal] 
  isEqualToString:@"Start Clock"])

{
        startDate = [[NSDate date]retain];

        // Create the stop watch timer that fires every 10 ms
        stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                          target:self
                                                        selector:@selector(updateTimer)
                                                        userInfo:nil
                                                         repeats:YES];

              [btnStartStop setTitle:@"Stop Clock" forState:UIControlStateNormal];
    }
 else
{
//---stop the timer---
    [timer invalidate];

    //---change the caption back to "Start Clock"---
    [btnStartStop setTitle:@"Start Clock" forState:UIControlStateNormal];
}
}
  - (IBAction)AddStopwatch:(id)sender {
    counter+= 50;
    UILabel *sL = [[UILabel alloc]initWithFrame:CGRectMake(0, stopWatchLabel.frame.origin.y+counter, 320, 40)];
    sL.backgroundColor = [UIColor clearColor];
    sL.textAlignment = UITextAlignmentCenter;
    sL.text =  stopWatchLabel.text;
    sL.textColor = [uiColor blackColor];
    [self.view addSubview:sL];

}

    @end 
```

**编辑**

您必须为`UIButton`方法`AddStopwatch:` 添加另一个

# javascript - Is it Possible to Validate URL in JS

> ID：12812829
> 
> 赞同：2
> 
> 时间：2012-10-10T05:57:03.160
> 
> 标签：javascript, validation

> **Possible Duplicate:**
> [Regular expression for URL validation (in JavaScript)](https://stackoverflow.com/questions/1410311/regular-expression-for-url-validation-in-javascript)
> [Regular expression for URL validation in javascript](https://stackoverflow.com/questions/6450989/regular-expression-for-url-validation-in-javascript)

Is it possible to validate any type of URL including sub components and parameters with in JavaScript?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:59:12.227

yes it is try

```
function validateURL(textval) {
      var urlregex = new RegExp(
            "^(http|https|ftp)\://([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$");
      return urlregex.test(textval);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:24:33.223

这应该做的工作：

```
function isUrl(s) {
    var regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
    return regexp.test(s);
} 
```

# java - 回到 Fragment，它用一些数据调用 Android 中的 Activity

> ID：12812833
> 
> 赞同：0
> 
> 时间：2012-10-10T05:57:26.917
> 
> 标签：java, android, android-fragments

我正在开发一个 android 应用程序并在 UI 布局中使用 Fragments。在其中一个片段中，我需要在单击按钮后使用日期时间选择器。我下载了一个示例日期时间选择器应用程序，该应用程序是使用活动中的对话框实现的，但我无法让它在片段中的按钮单击后工作。所以我所做的只是使用在对话框中显示日期时间选择器的意图从该按钮调用日期时间选择器活动。现在，在使用选择器设置日期和时间后，我希望在单击“确定”按钮时返回调用此活动的片段并从文本视图中的选择器更新选定的日期和时间。如何做到这一点？

请注意，日期时间选择器活动与创建片段的活动不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:25:53.573

Fragments 也包含与 Activity 相同的生命周期。

只需从您的日期选择器活动中调用 finish() 方法。您将重定向到最后一个片段，它将调用片段的 onResume()。并将您选择的日期保存在一个静态变量中。

另一种方法：

开始您的日期选择器活动

像下面

```
int REC_CODE=2;
startActivityForResult(new Intent(this,DataPic.class),REC_CODE); 
```

在选择日期后的 DatePicker 活动中

写下面的代码

```
Intent i = new Intent();
i.putExtra("date",selecteddate);
setResult(RESULT_OK, i);
finish(); 
```

通过执行上面的代码，它完成了 DatePick 活动，然后 ovveride 下面的方法。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{

  // TODO Auto-generated method stub
    if(requestCode == REQ_CODE){
               if (resultCode == Activity.RESULT_OK){
                   String date= data.getStringExtra("date");
}
} 
```

# ruby-on-rails - 不能添加超过一个 image_tag

> ID：12812836
> 
> 赞同：2
> 
> 时间：2012-10-10T05:57:28.997
> 
> 标签：ruby-on-rails, ruby

ERB 中的此代码仅显示一个图像。我认为这将是一个简单的修复，但我已经搜索谷歌试图找到它。也许我只是忘记了什么

```
<%=
image_tag ruby.png
image_tag ruby.png %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:06:20.697

`<%= %>`打印其中代码的*结果*，而不是全部。如果你想显示两个图像，你可以做

```
<%= image_tag('ruby.png') %>
<%= image_tag('ruby.png') %> 
```

或者

```
<%= image_tag('ruby.png') << image_tag('ruby.png') %> 
```

或者

```
<%
  concat(image_tag('ruby.png'))
  concat(image_tag('ruby.png'))
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:42:31.080

如果我们想在屏幕上显示，我们必须使用等号（=）。

请像这样修改您的代码..

```
<%=image_tag ('ruby.png') %>

<%=image_tag ('ruby.png') %> 
```

否则，如果您有更多图像。将其收集在一个数组中并执行以下操作。

all_images=[image1.png,image2.png,image3.png,image4.png,image5.png,....imagex.png]

然后

all_images.each 都做 |image_name|

```
<%=image_tag ('image_name')%> 
```

结尾

# c++ - 模板类和主要

> ID：12812840
> 
> 赞同：0
> 
> 时间：2012-10-10T05:57:34.003
> 
> 标签：c++, class, templates, arguments, main

我有以下类设置，尝试模仿一个非常基本的堆栈。

```
template <class T>
class Stack{
    public:
        static const unsigned MAX_STACK_DEPTH =4;
        Stack();
        unsigned elements() const;
        Stack<T> & push(T &value);
        T pop();
        Stack<T> & show();
    private:
        unsigned element;
        T stack[MAX_STACK_DEPTH];
};

template <class T>
Stack<T>::Stack(){
    element=0;
}
/*Other class function definitions*/ 
```

我的问题是我在 main 中收到以下错误

```
1   IntelliSense: no instance of function template "calc" matches the argument list c:\users\nima\documents\visual studio 2010\projects\calcu\calcu\policalc.cpp    109 6   Calcu 
```

这是我的主要

```
int main(){
    bool run=true;
    while(run){
        if(calc(input()));
    }
} 
```

这是另外两个函数声明

```
string input();
template <class T>
bool calc(string line); 
```

这是我的 calc 函数，它还没有完成。

```
template <class T>
bool calc(string line){
    static T Ans;
    istringstream sin(line);
    Stack stack;
    for(string token; sin>>token){
        T t;
        if(parse(t, token)){
            push(t);
        }else{
            if(token==operators[i]){
                switch(i){
                case 1:{

                       }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:19:05.737

您的`calc`函数是一个带有 parameter 的函数模板`T`，但该参数不被任何函数参数使用——唯一的参数被定义为 a `string`，无论是什么类型`T`。

`T`因此，当您这样调用时，编译器不能延迟`calc`：

```
calc(input()) 
```

您需要明确指定`T`，例如：

```
calc<int>(input()) 
```

（当然，您应该使用任何有意义的数据类型而不是`int`.）

# php - 从 php 调用 javascript 函数

> ID：12812842
> 
> 赞同：8
> 
> 时间：2012-10-10T05:57:58.457
> 
> 标签：php, javascript, function

我正在尝试从 php 调用 javascript 函数。根据我一直在查看的所有示例，以下内容应该可以工作，但事实并非如此。为什么不？

```
 <?php
    echo "function test";
    echo '<script type="text/javascript">    run();      </script>';
?>

<html>
    <script type="text/javascript">
        function run(){
            alert("hello world");
        }
    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-10T06:01:11.477

您的 html 无效。你缺少一些标签。

并且您需要在声明后调用该函数，如下所示

```
<html>
    <head>
       <title></title>

       <script type="text/javascript">
            function run(){
                alert("hello world");
            }

           <?php
               echo "run();";
           ?>
       </script>

    </head>
    <body>
    </body>
</html> 
```

在这种情况下，您可以将运行放在方法声明之前，但是一旦您将方法调用包装在另一个脚本标记中，脚本标记必须在方法声明之后。

自己试试[http://jsfiddle.net/qdwXv/](http://jsfiddle.net/qdwXv/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T06:02:01.383

该函数必须在使用前声明
它应该是

```
<html>
    <script type="text/javascript">
        function run(){
            alert("hello world");
        }
       <?php
       echo "function test";
        echo   run();      ;
     ?>
    </script>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:15:00.797

正如其他人所建议的那样，需要首先声明该函数。但是，如果您需要先从 PHP 中回显 JavaScript，您可以将其存储在 PHP 变量中以便稍后回显，或者让您的代码先等待 dom 完成加载...

```
document.ready = function() {
    run()
  } 
```

如果您使用 jQuery 或其他框架，他们可能有更好的方法来做到这一点......在 jQuery 中：

```
$(function(){
   run();
}) 
```

# java - 使用文档侦听器限制文本字段中的字符

> ID：12812844
> 
> 赞同：2
> 
> 时间：2012-10-10T05:58:07.307
> 
> 标签：java, swing, jtextfield, documentlistener, documentfilter

如何限制在`JTextField`使用中输入的字符数`DocumentListener`？

假设我想输入最多 30 个字符。之后就不能再输入字符了。我使用以下代码：

```
public class TextBox extends JTextField{
public TextBox()
{
    super();
    init();
}

private void init()
{
    TextBoxListener textListener = new TextBoxListener();
    getDocument().addDocumentListener(textListener);
}
private class TextBoxListener implements DocumentListener
{
    public TextBoxListener()
    {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void insertUpdate(DocumentEvent e)
    {
        //TODO
    }

    @Override
    public void removeUpdate(DocumentEvent e)
    {
        //TODO
    }

    @Override
    public void changedUpdate(DocumentEvent e)
    {
        //TODO
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:03:35.703

[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)为此，您需要使用 a 。应用时，它会过滤文档。

就像是...

```
public class SizeFilter extends DocumentFilter {

    private int maxCharacters;    

    public SizeFilter(int maxChars) {
        maxCharacters = maxChars;
    }

    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
            throws BadLocationException {

        if ((fb.getDocument().getLength() + str.length()) <= maxCharacters)
            super.insertString(fb, offs, str, a);
        else
            Toolkit.getDefaultToolkit().beep();
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
            throws BadLocationException {

        if ((fb.getDocument().getLength() + str.length()
                - length) <= maxCharacters)
            super.replace(fb, offs, length, str, a);
        else
            Toolkit.getDefaultToolkit().beep();
    }
} 
```

创建到[MDP 的博客](http://www.jroller.com/dpmihai/entry/documentfilter)

# objective-c - Is it possible to reuse one shared managed object context beetween threads, when each thread can work with data not related to data in other thread?

> ID：12812846
> 
> 赞同：1
> 
> 时间：2012-10-10T05:58:10.750
> 
> 标签：objective-c, ios, core-data, moc, managedobjectcontext

Simple example for the title question: one thread has prepared Place entity and is doing some processing on it (filling particular fields and their calculation takes time) and in the mean time the other thread has already prepared Category entity; the second "Category" thread wants to persist Category entity with *save:&error* causing Place entity from the first thread to be saved also while it didn't finished its processing job.

Am I right? Will I see the problem described if I use one shared moc?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:15:42.557

实际上，这是可能的，您正在寻找的方法是：

`-(void)mergeChangesFromContextDidSaveNotification:(NSNotification *)notification;`

您必须为每个线程创建一个不同`NSManagedObjectContext`的线程，您所要做的就是将您`NSManagedObjectContext`的`NSManagedObjectContextDidSaveNotification`密钥放入 an`NSNotification`并将其注册到默认中心。在主线程上执行它的调用`mergeChangesFromContextDidSaveNotification`，并且每次调用该`save:&error`方法时都会合并您的更改。

注意：在我看来，它有一点缺点，在获取对象时，它可能属于不同的上下文（获取后它将为零），如果确实如此，您必须以不同的方式获取它：

`NSManagedObjectID *objectID = [YourObject objectID];`

`YourObject *copy =(YourObject*) [managedObjectContext objectWithID:objectID];`

希望能帮助到你。[这](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385)是一个链接，可以更好地理解我在说什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:09:13.447

不要`NSManagedObjectContext`跨线程共享 s。不要`NSManagedObject`跨线程共享 s。真的没有例外。阅读[Concurrency with Core Data](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385)并应用它描述的模式。

# c++ - Resizing DirectX Window Efficiently

> ID：12812848
> 
> 赞同：2
> 
> 时间：2012-10-10T05:58:21.553
> 
> 标签：c++, resize, directx

I am trying to find the best way to resize a graphics interface. I tried just re-initializing the device without deleting my buffers of shapes I made, but I ended up mem-leaking heavly.

I did not find anything useful on this subject.

Do I need to delete everything [buffers, devices, adapters] & restart the graphics interface from scratch? Or is there an efficient way of doing it?

This is for a DX 10/11 interface.

**Edit:** It is a lot of code to show, but I simply:

```
 cleanup(); // Pointers related to the device
   initDevice(hWnd); // Create new device with updated size
   draw(stuff); // I never deleted my constant/index/vertex buffers 
```

To be specific, I did not delete these:

```
 ID3D11Buffer* constantBuffer;
    ID3D11Buffer* vertexBuffer;
    ID3D11Buffer* indexBuffer;
    ID3D11VertexShader* vertexShader;
    ID3D11PixelShader* pixelShader;
    ID3D11InputLayout* vertexLayout; 
```

I was hoping to save performance by not recreating the graphics every moment the user is resizing.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T07:38:08.887

有一篇[docs.microsoft.com 文章](https://docs.microsoft.com/en-us/windows/win32/direct3ddxgi/d3d10-graphics-programming-guide-dxgi#handling-window-resizing)解释了您需要做什么。你读过吗？

# windows-server-2008 - JavaFx 2.0 + windows server 2008 R2 enterprise getting crash error?

> ID：12812853
> 
> 赞同：1
> 
> 时间：2012-10-10T05:58:47.590
> 
> 标签：windows-server-2008, javafx-2, java-7

I am trying to run executable jar developed with JavaFx 2.0 platform on windows server 2008\. I installed java 7 on windows but I am getting the following error

```
 A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000070d921b6, pid=3340, tid=3468
#
# JRE version: 7.0_07-b11
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [glass.dll+0x121b6]  Java_com_sun_glass_events_KeyEvent__1getKeyCodeForChar+0x11a6
#
# Core dump written. Default location: C:\Users\Administrator\Documents\NetBeansProjects\JavaFXApplication1\hs_err_pid3340.mdmp
#
# An error report file with more information is saved as:
# C:\Users\Administrator\Documents\NetBeansProjects\JavaFXApplication1\hs_err_pid3340.log 
```

I try to setup develop environment on windows server 2008, but I am getting the same error. How to resolve this error ?

Kindly help..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:41:47.480

具有与上述相同的访问冲突。对我有用的是在 Windows 2008 R2 的服务器管理器下设置“桌面体验”。希望有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T04:06:01.223

我得到了这个问题的简单解决方案。我刚刚升级了我的java版本。目前我正在为我的应用程序使用[http://jdk7.java.net/download.html](http://jdk7.java.net/download.html) **7u10**版本，它在 Windows Server 2008 上也可以正常工作。虽然这个版本还没有正式发布..但我想我可以离开它..直到这个版本的正式发布..

享受..干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:06:03.370

有一个似乎与此问题相匹配的 JIRA 问题 - 请参阅[http://javafx-jira.kenai.com/browse/RT-23456](http://javafx-jira.kenai.com/browse/RT-23456)

# android - Android ADD FRIEND using Smack

> ID：12812855
> 
> 赞同：5
> 
> 时间：2012-10-10T05:58:48.600
> 
> 标签：android, smack, livechat

I am new to the use of smack library and making one chatting application. I have made upto much extent and at this step i want to ask two questions.

1.  when i add a friend the friend got added in my list but there is not any notification sent to the FRIEND whom i have added, How to achieve the same. I have added the code below.

2.  The second thing i want to ask is that how can I check whether the user which I am going to add is a part or member of the app or not ( mean it is on the server or not). So that the user who is not registered to the app should not be added in the friends list.

here is the code

```
public static boolean addFriend(String jid) {
            String nickname = null;
            nickname = StringUtils.parseBareAddress(jid);
            RosterEntry entry4 = roster.getEntry("samsad");
            if (!roster.contains(jid)) {
                try {
                    Presence subscribe = new Presence(Presence.Type.subscribe);
                    subscribe.setTo(jid);               
                    connection.sendPacket(subscribe);               
                    roster.createEntry(jid, nickname, null);
                      // Send a roster entry (any) to user2
                    RosterExchangeManager REM = new RosterExchangeManager(connection);
                    REM.send(entry4, jid);
                    return true;
                } catch (XMPPException e) {
                    System.err.println("Error in adding friend");
                    return false;
                }
            } else {
                return false;
            }
        } 
```

Roster Exchange manager running in the service in background

```
/**Remotr Exchange Manager*/
             RosterExchangeManager rem = new RosterExchangeManager(connection);
              // Create a RosterExchangeListener that will iterate over the received roster entries
              RosterExchangeListener rosterExchangeListener = new RosterExchangeListener() {
                  public void entriesReceived(String from, Iterator remoteRosterEntries) {
                      notification("Receive==4");
                      while (remoteRosterEntries.hasNext()) {
                          try {
                              // Get the received entry
                              RemoteRosterEntry remoteRosterEntry = (RemoteRosterEntry) remoteRosterEntries.next();
                              // Display the remote entry on the console
                              System.out.println(remoteRosterEntry);
                              // Add the entry to the user2's roster
                              roster.createEntry(
                                  remoteRosterEntry.getUser(),
                                  remoteRosterEntry.getName(),
                                  remoteRosterEntry.getGroupArrayNames());
                              notification("Receive==1");   
                          }
                          catch (XMPPException e) {
                              e.printStackTrace();
                          }
                      }
                  }
              };
              rem.addRosterListener(rosterExchangeListener);
        }
        else{
            showToast("Connection lost-",0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:43:24.297

1、问题是你必须先注册一个PacketListener`Presence.Type.subscribe`才能连接到服务器。[我在这里](https://stackoverflow.com/q/13062356/1050058)回答的所有添加和接受朋友的过程

2，您可以使用[UserSearch](http://www.igniterealtime.org/builds/smack/docs/3.1.0/javadoc/org/jivesoftware/smackx/search/UserSearch.html)类搜索特定用户，如果在服务器上找不到用户，则可以假设用户未在服务器上注册。

# php - Limiting copying website contents to 300 words

> ID：12812858
> 
> 赞同：-1
> 
> 时间：2012-10-10T05:59:00.960
> 
> 标签：php, javascript

I am developing a website for an organization. They asked me to limit copying website contents to 300 words. i've googled, but i couldn't found any sollutions.. if there any scripts(javaScript or PHP) to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:08:16.810

您不能阻止用户复制网站内容.. 即使您尝试通过 javascript 进行此操作，也有许多工具（如 firebug），用户可以通过这些工具获取数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:41:45.803

禁用网站上的右键单击是阻止人们直接复制内容的常用机制。如果您确实想施加 300 个字符的限制，您将不得不收听文本选择事件，并且一旦用户达到最大字符数限制，您就会阻止他继续进行。用于选择文本的 js 片段的快速谷歌搜索显示以下两个链接：

*   [http://www.java2s.com/Code/JavaScript/HTML/CapturingaTextSelection.htm](http://www.java2s.com/Code/JavaScript/HTML/CapturingaTextSelection.htm)
*   [http://davidwalsh.name/text-select-widget](http://davidwalsh.name/text-select-widget)

# mono - 在 MonoMac 项目中找不到 System.Data.SQLite

> ID：12812859
> 
> 赞同：1
> 
> 时间：2012-10-10T05:59:07.543
> 
> 标签：mono, monomac

我正在尝试在 MonoMac 程序中使用 SQLite 数据库（目的是在 MonoTouch 应用程序中重用数据库）。

我尝试了两种不同的 ORM，但都因同样的问题而失败。在网上搜索，我发现了这个`MONO_LOG_LEVEL=debug`标志，还有很多信息，但我不能完全让它工作。

目前，我正在引用 Mono.Data.SQLite，但从我发现的情况来看，这似乎只是系统特定版本的包装器。

这是错误输出：

> Mono：加载程序集 System.Data v2.0.0.0 的请求已重新映射到 v4.0.0.0 Mono：程序集加载器探测位置：'/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono /gac/System.Data/4.0.0.0_b77a5c561934e089/System.Data.dll *'。单声道：图像地址引用 System.Data[0x62ada0] -> /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/gac/System.Data/4.0.0.0* _b77a5c561934e089/System.Data.dll[0xbd5600] ：2 Mono：Assembly System.Data[0x62ada0] 添加到域 SQLTest.exe，ref_count=1 Mono：AOT 无法加载 AOT 模块 /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/gac/ System.Data/4.0.0.0_b77a5c561934e089/System.Data.dll.dylib *: dlopen(/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/gac/System.Data/4.0.0.0*_b77a5c561934e089/System.Data.dll.dylib, 9): 找不到图像
> 
> Mono：程序集加载器从以下位置加载程序集：'/ Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/gac/System.Data/ *4.0.0.0_b77a5c561934e089/System.Data.dll'。Mono：配置尝试解析：'/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/gac/System.Data/4.0.0.0*_b77a5c561934e089/System.Data.dll.config'。Mono：配置尝试解析：'/Library/Frameworks/Mono.framework/Versions/2.10.9/etc/mono/assemblies/System.Data/System.Data.config'。Mono：Assembly Ref addref Catnap[0x6213c0] -> System.Data[0x62ada0]：2 Mono：Assembly Ref addref System.Data[0x62ada0] -> mscorlib[0x1001d90]：6 Mono：Assembly Loader 探测位置：'/Library/Frameworks /Mono.framework/Versions/2.10.9/lib/System.Data.SQLite.dll'。Mono：Assembly Loader 探测位置：'/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/System.Data.SQLite.exe'。
> 
> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“System.Data.SQLite”或其依赖项之一。该系统找不到指定的文件。文件名：System.AppDomain.Load (System.String assemblyString, System.Security.Policy.Evidence assemblySecurity, Boolean refonly) [0x00000] 中的“System.Data.SQLite”在 System.AppDomain.Load (System.String assemblyString) [0x00000] in :0 at (wrapper remoting-invoke-with-check) System.AppDomain:Load (string) at System.Reflection.Assembly.Load (System.String assemblyString) [0x00000] in :0 at Catnap。 Database.BaseDbAdapter.ResolveConnectionType (System.String connectionTypeAssemblyName) [0x00000] in :0 at Catnap.Database.Sqlite.BaseSqliteAdapter..ctor (System.String connectionTypeAssemblyName) [0x00000] in :0 at Catnap。

我试过添加一个配置文件

```
<configuration>
   <dllmap dll="sqlite3" target="/usr/local/lib/libsqlite3.0.dylib" os="!windows"/>
</configuration> 
```

到应用程序，我已经尝试修改`/Library/Frameworks/Mono.framework/Versions/2.10.9/etc/mono/config`，但没有任何效果。它仍然在错误的地方寻找并且没有找到 SQLite。

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:58:32.040

我仍然不知道它**为什么要**寻找 System.Data.SQLite，但我自己重新编译了其中一个 ORM，而不是使用提供的 dll，它确实有效。我确信其中一些问题是我在 MonoMac 项目中使用了 MonoTouch dll。重新编译 CoolStorage（使用`Mono.Data.Sqlite`代替`System.Data.SQLite`）解决了它。

如果有人可以给我一个解释，我会切换接受的答案。

上代码！

# javascript - difference between parseInt() and parseFloat()

> ID：12812863
> 
> 赞同：20
> 
> 时间：2012-10-10T05:59:17.713
> 
> 标签：javascript, jquery, function, font-size

> **Possible Duplicate:**
> [Behavior difference between parseInt() and parseFloat()](https://stackoverflow.com/questions/9528433/behavior-difference-between-parseint-and-parsefloat)

```
var box  = $('.box'),
fontSize = parseInt(box.css('font-size'), 10) + 5;

 $('button').on('click', function() {
  box.animate({fontSize: fontSize});
}); 
```

//..

```
 var box  = $('.box'),
 fontSize = parseFloat(box.css('font-size'), 10) + 5;

  $('button').on('click', function() {
    box.animate({fontSize: fontSize})
}); 
```

what the difference between..

```
**fontSize = parseInt(box.css('font-size'), 10);**

**fontSize = parseFloat(box.css('font-size'), 10);** 
```

and and why should put 10 as a context..Please Help?

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-10T06:12:57.917

> JavaScript 提供了两种将非数字原语转换为数字的方法： parseInt() 和 parseFloat() 。您可能已经猜到了，前者将值转换为整数，而后者将值转换为浮点数。

字符串中包含的任何数字文字也被正确转换，因此字符串 "0xA" 被正确转换为数字 10。但是，字符串 "22.5" 将转换为 22 ，因为小数点对于整数来说是无效字符. 一些例子：

> var iNum1 = parseInt("1234blue"); //返回 1234
> 
> var iNum2 = parseInt("0xA"); //返回10
> 
> var iNum3 = parseInt("22.5"); //返回22
> 
> var iNum4 = parseInt("蓝色"); //返回NaN

parseInt() 方法还具有基数模式，允许您将二进制、八进制、十六进制或任何其他基数的字符串转换为整数。基数被指定为 parseInt() 的第二个参数，因此解析十六进制值的调用如下所示：

> var iNum1 = parseInt("AF", 16); //返回 175
> 
> 当然，也可以对二进制、八进制甚至十进制（这是默认模式）执行此操作：
> 
> var iNum1 = parseInt("10", 2); //返回2
> 
> var iNum2 = parseInt("10", 8); //返回 8
> 
> var iNum2 = parseInt("10", 10); //返回10

如果十进制数字包含前导零，最好将基数指定为 10，这样您就不会意外地得到八进制值。例如：

> var iNum1 = parseInt("010"); //返回 8
> 
> var iNum2 = parseInt("010", 8); //返回 8
> 
> var iNum3 = parseInt("010", 10); //返回10
> 
> 在这段代码中，两行都将字符串“010”解析为一个数字。第一行认为该字符串是一个八进制值，并以与第二行相同的方式解析它（将基数指定为 8）。最后一行指定基数为 10，因此 iNum3 最终等于 10。

使用 parseFloat() 时的另一个区别是字符串必须以十进制形式表示浮点数，而不是八进制或十六进制。此方法忽略前导零，因此八进制数 0908 将被解析为 908 ，十六进制数 0xA 将返回 NaN 因为 x 不是浮点数的有效字符。parseFloat() 也没有基数模式。

> 使用 parseFloat() 的一些示例：
> 
> var fNum1 = parseFloat("1234blue"); //返回 1234
> 
> var fNum2 = parseFloat("0xA"); //返回0
> 
> var fNum3 = parseFloat("22.5"); //返回 22.5
> 
> var fNum4 = parseFloat("22.34.5"); //返回 22.34
> 
> var fNum5 = parseFloat("0908"); //返回 908
> 
> var fNum6 = parseFloat("蓝色"); //返回NaN

[阅读更多](http://www.bennadel.com/blog/2012-Exploring-Javascript-s-parseInt-And-parseFloat-Functions.htm)， [阅读更多](http://www.java-samples.com/showtutorial.php?tutorialid=818)

[类似问题在这里阅读更多](https://stackoverflow.com/questions/9528433/behavior-difference-between-parseint-and-parsefloat)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-10T06:02:28.350

首先只`parseInt`接受第二个参数。它被称为基数。它表示要使用的数字系统。例如，您可以将数字转换为二进制或十六进制代码。

`parseFloat`只接受一个论点。

# ruby-on-rails - Accepts_nested_attributes_for 不保存子表

> ID：12812865
> 
> 赞同：1
> 
> 时间：2012-10-10T05:59:30.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

连接`users`和`companies`使用`accepts_nested_attributes_for`。添加用户并保存时，不会保存公司信息。有谁知道可能是什么问题？提前致谢。

**用户.rb**

```
class User < ActiveRecord::Base
  before_create :create_role
  devise :database_authenticatable, :registerable, :confirmable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :role_ids, :company_attributes

  has_one :company, :autosave => true

  accepts_nested_attributes_for :company

  has_and_belongs_to_many :roles

  def role?(role_name)
    return !!self.roles.find_by_name(role_name)
  end

  def with_company
    self.company.build
    self
  end

  private
    def create_role
      self.roles << Role.find_by_name(:user)  
    end
end 
```

注册页面**new.html.haml**

```
 %div{:style => "margin:10px"}
      %h2= t('devise.shared.links.sign_up')
      %br
      = form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :class => 'form-horizontal'}) do |f|
        = devise_error_messages!
        = f.fields_for :companies do |company_form|
          .control-group
            = company_form.label :name, :class => 'control-label'
            .controls
              = company_form.text_field :name
          .control-group
...
        .control-group
          = f.label :email, :class => 'control-label'
          .controls
            = f.text_field :email
        .control-group
          = f.label :password, :class => 'control-label'
          .controls
            = f.text_field :password
        .control-group
          = f.label :password_confirmation, :class => 'control-label'
          .controls
            = f.text_field :password_confirmation 
        .actions
          = f.submit t("Save"), :class => 'btn btn-primary'
          %br
          %br
          = render "links" 
```

公司控制器：[https ://gist.github.com/3863405](https://gist.github.com/3863405)

```
$rails --version
Rails 3.2.2

$ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:21:57.637

看起来你被质量分配保护阻止了，尽管`attr_accessible :company_attributes`你的模型中有......

相关日志输出：

```
WARNING: Can't mass-assign protected attributes: companies 
```

这是从您的代码中直接复制/粘贴，还是在真实代码中可能拼写错误或其他什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:28:43.890

**在您的用户模型中将:company_attributes**添加到 attr_accessible

添加用户模型

```
def build_company(params = {})
  self.company = Company.new(params)
end

def company_attributes=(attributes)
  self.company = Company.new(attributes)
end 
```

# iphone - Why does my UINavigationBar change colors when I run my app?

> ID：12812866
> 
> 赞同：1
> 
> 时间：2012-10-10T05:59:31.383
> 
> 标签：iphone, ios, ipad, xcode4.5

I'm building an iPad app using storyboards. In Interface Builder (XCode 4.5), the nav bar is the default (light grey) color...

![enter image description here](../Images/13f6a7fd1bf53c5f81c372369237831f.png)

However, when I run the app, it changes color to a dark grey...

![enter image description here](../Images/0eb4af69bc9dfd08da13f29c0b5ec3a9.png)

Has anyone else had this problem? No matter what color I set it to in Interface Builder, it always ends up dark grey when I run it.

Thanks so much in advance for your wisdom!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:13:53.653

在 iOS 6 中，状态栏的颜色与导航栏的颜色相同。您可以根据此问题的答案对其进行自定义： [How to change Statusbar on Modal Views iOS 6](https://stackoverflow.com/questions/12512666/how-to-change-statusbar-on-modal-views-ios-6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:16:41.990

您可以使用以下代码行为导航栏着色，只需使用它，导航栏始终为浅灰色：

```
[[navController navigationBar] setTintColor:[UIColor lightGrayColor]]; 
```

当您在界面生成器中设置导航栏颜色时，这只影响您在 IB 本身中获得的视图，它只是一个设计帮助。您必须在代码中设置的真实颜色。

# oracle - Oracle Text: update while index is being synchronized

> ID：12812869
> 
> 赞同：1
> 
> 时间：2012-10-10T05:59:34.523
> 
> 标签：oracle, oracle-text

I have a complex context index that gets synchronized nightly. The process takes some 10 minutes, and any updates to this table that touch the index column during synchronization period result in `ORA-29861: domain index is marked LOADING/FAILED/UNUSABLE` exception - what can I do about it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:22:51.427

我不认为你可以在同步时做任何其他事情。如果索引更新是不可避免的，那么您需要找到一种方法来排队请求并每 15 分钟重试一次，直到它/它们通过。我建议限制 3 次尝试，直到它顺利通过或失败。我提出 3 次的建议，因为如果它需要 10 分钟而它在 45 分钟内不起作用，我想你有更大的鱼要炸。与其在损坏的系统上无休止地重复，不如让它优雅地失败。希望在此期间您没有对数据库进行太多尝试访问，从而导致排长队。您还可以查看是否可以将您的应用程序与您的基础设施人员设置更新索引的时间同步。这样您就可以同时阻止这些交易。我不 不知道您的组织有多大或系统是什么样的（如果您正在运行 Oracle，那么你们有足够的钱购买相当大的东西）。这意味着您可能有可能有帮助的计划应用程序？无论如何，除非 DBA 停止进行这些更新，否则我认为您必须等到他们完成。

# php - 如果在第一个 MySQL TABLE 中找不到，我如何让它在第二个 TABLE 中进行搜索？

> ID：12812881
> 
> 赞同：0
> 
> 时间：2012-10-10T06:00:15.193
> 
> 标签：php, mysql

我在 MySQL/PHP 中工作。这是一个邮政编码数据库。第一个表包含邮政编码和每个邮政编码的平均 AGI。但这不是一个完整的邮政编码表，因为 IRS 不包括提交的纳税申报表少于 250 个的邮政编码数据。此外，一些邮政编码用于邮政信箱，这些邮政编码也可能没有任何平均 AGI 数据。

我希望能够通过邮政编码搜索具有平均 AGI 的第一个表，如果在那里找不到邮政编码，我希望它搜索第二个表，并在 PHP 中显示一条消息：

```
echo "The $zipcode was not found." . "<br>";
if (isset($pobox)) {
    echo "Because $zipcode is a PO Box" . "<Br>";
} else {
    echo "It may contain fewer than 250 tax returns filed." . "<br>";
} 
```

这是 PHP 中对 MySQL 的查询：

```
$result = mysql_query("
select zip
from zip_codes
where zip=$zipcode;") or exit(mysql_error()); 
```

第二个表称为 zip_code_types，其中包含邮政编码是否用于邮政信箱，或者其他独特的东西。

这应该通过在一次搜索中组合两个表来完成吗？还是应该完成两个单独的查询？

如何检查第一个 MySQL 查询是否找不到任何内容？返回什么，在哪里，是否需要另一个函数来检查这个？如果我完全错过了如何做到这一点，请赐教。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:07:19.900

**不鼓励使用 mysql_ 函数。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。** 要回答您的问题，您可以检查**SELECT**查询返回的行数，并在需要时继续执行下一个查询，例如：

```
$result = mysql_query("select zip from zip_codes where zip=$zipcode;") or exit(mysql_error());
if( mysql_num_rows($result) > 0 ) {
   //return the result
}
else {
  //your next query here
} 
```

你的意思是这样的吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:08:17.683

如果数据不在第一个表中这一事实是有意义的，那么您应该进行两次单独的搜索。既然你想展示一条信息，它似乎是有意义的。您*可以*使用“联合”运算符在单个选择语句中执行此操作，但是您真的无法判断数据何时来自一个表而不是另一个表。您没有加入任何东西，因此外部连接无济于事（它们会很丑陋，并且解释结果的代码会过于复杂）。不，在我看来，您最好只进行几次搜索。其他人可能有其他一些很棒的见解，但再次搜索并不是什么大不了的事，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T06:07:02.220

你必须这样写你的查询

```
$result = mysql_query("select zip from zip_codes where zip='$zipcode'") or exit(mysql_error());
if(mysql_num_rows($result) == 0)
{
    //query for searching in another table
}
else {
   // your code
} 
```

并使用`Mysqli`OR`PDO`而不是`Mysql_*`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:21:08.613

使用联合查询，但使查询也返回包含源的字段。

像这样。

选择 zip, 'zip' 作为 zip-codes 的来源 where zip=$zip Union 选择 zip, 'pobox' 作为来自 poboxs where zip=$zip 的来源

# jquery-ui - jQueryUI 菜单输入键不起作用

> ID：12812883
> 
> 赞同：2
> 
> 时间：2012-10-10T06:00:25.907
> 
> 标签：jquery-ui, jquery-ui-menu

我正在使用最新的 jQueryUI 菜单代码，但是当我进入菜单并通过按 Enter 键选择一个链接时，包含合适的 a href 的 li 不会打开。获得打开链接的唯一方法是用鼠标单击，但我希望 Enter 键能够实现可访问性。这是我正在使用的代码：

```
<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Menu - Navigation Menu</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />

<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

<link rel="stylesheet" href="/resources/demos/style.css" />

<script>
$(function() {
    $( "#menu" ).menu({
        select: function( event, ui ) {
            var link = ui.item.children( "a:first" );
            if ( link.attr( "target" ) || event.metaKey || event.shiftKey || event.ctrlKey ) {
                return;
            }
            location.href = link.attr( "href" );
        }
    });
});     
</script>
</head>

<body>
<ul id="menu">
<li><a href="http://www.yahoo.com" target="_blank">Yahoo</a></li>
<li>
    <a href="http://www.bing.com" target="_blank">Bing</a>
    <ul>
        <li><a href="http://www.google.com" target="_blank">Google</a>
            <ul>
    <li><a href="http://www.lycos.com" target="_blank">Lycos</a></li>                
                </ul>
        </li>
        <li><a href="?Saarland">Saarland</a></li>
        <li><a href="?Salzburg">Salzburg</a></li>
    </ul>
</li>
</ul>
</body>
</html> 
```

这是一个实时版本： http: [//kavelookout.com/menuTest_jQueryUI_Menu/](http://kavelookout.com/menuTest_jQueryUI_Menu/) 列表中的“搜索引擎”文本具有超链接。

也许我需要编辑 jquery-ui.js 文件？我搜索了高低，但找不到合适的答案。

非常感谢任何帮助，

R

# c# - 如何为 mscorlib.dll 设置平台以进行 dll 合并。？

> ID：12812887
> 
> 赞同：1
> 
> 时间：2012-10-10T06:00:31.847
> 
> 标签：c#, dll, c#-3.0, .net-assembly

我的任务是将多个本机和第三方 dll 合并到一个 exe 中以便于分发。

我曾尝试过 Visual Studio 9.0 中的 ClickOnce 方法。但徒劳无功，提到[为 Visual Studio 2008 中的 Windows 应用程序创建独立的 .exe？](https://stackoverflow.com/questions/12759142/creating-a-standalone-exe-for-a-windows-application-in-visual-studio-2008/12759191#12759191)对于我的查询，但仍然无法得到任何正确的结果。

我还尝试了一些第三方工具，如[在编译的可执行文件中嵌入 DLL](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)和[可能将 DLL 合并到 .NET EXE 中所建议的那样？](https://stackoverflow.com/questions/4631567/possible-to-merge-a-dll-into-a-net-exe)但还是徒劳。

我用于 dll 合并的第三方工具是 SmartAssembly 和 Boxedapp Packer 都很好。在 SmartAssembly 中，将 dll 合并到单个 .exe 中后，我得到了一些例外情况。所以我不知道如何通过。Il Merge 看起来也不错，但我为我的项目使用了 13 个本机和第三方 dll，并且我无法获得任何适当的参考资料来使用完全命令行的 IL Merge。如果我能获得任何适当的使用 IL Merge 的教程，那就太好了。

最近我也使用了微软的 IL Merger Tool，这个工具看起来不错，文档在这里[http://ilmergertool.codeplex.com/documentation](http://ilmergertool.codeplex.com/documentation)。我已经做了一切，但是当我单击“开始合并”按钮时，我收到一条消息“合并失败。有关详细信息，请检查日志文件”。当我检查日志文件时，我发现了这个

“将平台设置为 'v2'，使用目录 'C:\Windows\Microsoft.NET\Framework\v2.0.50727' 用于 mscorlib.dll”

我不知道该怎么办。因此，任何建议都会有所帮助。

如果我能获得一些用于合并程序集和 dll 的工具或 SDK 的建议，那就太好了。我敢肯定有很多。

到目前为止，我已经尝试过 SmartAssembly 和 BoxedAPP 打包程序。

谢谢

-维克内什瓦尔

# objective-c - 无法将参数发送到目标 C 中的 Web 服务

> ID：12812889
> 
> 赞同：0
> 
> 时间：2012-10-10T06:00:38.960
> 
> 标签：objective-c, web-services

```
NSDictionary * dict = [NSDictionary dictionaryWithObjectsAndKeys:@"abcd",@"UID", nil];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://xyz:8080/cde"] ];
[request setHTTPMethod:@"POST"];
[request setValue:dict forHTTPHeaderField:@"parameter"];
[request setValue:@"get-employee-details" forHTTPHeaderField:@"serviceName"];
//[request setValue:@"pk703s" forHTTPHeaderField:@"ATTUID"];
AFHTTPRequestOperation *oper = [[AFHTTPRequestOperation alloc]initWithRequest: request] ;

[oper setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSLog(@"Success");
    NSLog(@"operation hasAcceptableStatusCode: %d", [operation.response statusCode]);
    NSLog(@"response STring: %@ ", operation.responseString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Failure");
    NSLog(@"response: %@", operation.responseString);
    NSLog(@"erro: %@", error.description);
}];
[oper start]; 
```

无法通过请求对象发送参数。如果我不发送参数，那么我无法调用服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:09:01.527

您正在标题中添加帖子值。

```
NSMutableString *postString = @"myPostValue=value";

[request setHTTPMethod:@"POST"];
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]]; 
```

如果您仍然有问题，请从服务器端检查您得到的

# javascript - 将“this”传递给 onclick 事件

> ID：12812893
> 
> 赞同：47
> 
> 时间：2012-10-10T06:00:55.910
> 
> 标签：javascript, html

> **可能重复：**
> [当前元素作为其事件函数参数](https://stackoverflow.com/questions/4268085/the-current-element-as-its-event-function-param)

这行得通吗

```
<script type="text/javascript">
var foo = function(param)
{
    param.innerHTML = "Not a button";
};
</script>
<button onclick="foo(this)" id="bar">Button</button> 
```

而不是这个？

```
<script type="text/javascript">
var foo = function()
{
    document.getElementId("bar").innerHTML = "Not a button";
};
</script>
<button onclick="foo()" id="bar">Button</button> 
```

第一种方法是否允许我从其他地方加载 javascript 以对任何页面元素执行操作？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-10T06:07:39.570

The code that you have would work, but is executed from the global context, which means that `this` refers to the global object.

```
<script type="text/javascript">
var foo = function(param) {
    param.innerHTML = "Not a button";
};
</script>
<button onclick="foo(this)" id="bar">Button</button> 
```

You can also use the non-inline alternative, which attached to and executed from the specific element context which allows you to access the element from `this`.

```
<script type="text/javascript">
document.getElementById('bar').onclick = function() {
    this.innerHTML = "Not a button";
};
</script>
<button id="bar">Button</button> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-10T06:07:02.103

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-10T06:06:16.500

是的，第一种方法适用于从其他地方调用的任何元素，因为它总是采用目标元素，而与 id 无关。

检查这个小提琴

[http://jsfiddle.net/8cvBM/](http://jsfiddle.net/8cvBM/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-10T06:07:05.813

In JavaScript **`this`** always refers to the “owner” of the function we're executing, or rather, to the object that a function is a method of. When we define our faithful function doSomething() in a page, its owner is the page, or rather, the window object (or global object) of JavaScript.

[How does the "this" keyword work?](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

# eclipse - 当我在 eclipse helios 中打开 JSP 文件时出现未处理的事件循环异常

> ID：12812896
> 
> 赞同：0
> 
> 时间：2012-10-10T06:01:00.617
> 
> 标签：eclipse, jsp, exception, tomcat5.5, eclipse-3.6

我想在 Eclipse 中生成 Crystal Reports，我最近为此下载了 Crystal Reports 2.0 for Eclipse。我正在使用 eclipse-jee-helios-SR2-win32 (3.6) 版本和 Tomcat v5.5 服务器版本。

我可以从 Crystal Report 文件 (.rpt) 生成 JSP 文件，如[本 PDF](http://www.sdn.sap.com/irj/boc/go/portal/prtroot/docs/library/uuid/3020847c-6064-2b10-e5be-fcd27295fc16?QuickLink=index&overridelayout=true&32804960207401)所示。但问题是当我打开它时。除文本编辑器外，任何编辑器都无法打开它。

在与其他编辑一起打开时给我以下错误：

**`Message:`**

> 未处理的事件循环异常

**`Exception Stack Trace:`**

> java.lang.NoSuchMethodError: org.eclipse.jst.jsp.ui.internal.contentassist.JSPStructuredContentAssistProcessor.setAutoActivationDelay(I)V at org.eclipse.jst.jsp.ui.internal.contentassist.JSPStructuredContentAssistProcessor.updateAutoActivationDelay(JSPStructuredContentAssistProcessor.java: 114）在 org.eclipse.jst.jsp.ui.StructuredTextViewerConfigurationJSP.getContentAssistProcessors(StructuredTextViewerConfigurationJSP.java:189) 的 org.eclipse.jst.jsp.ui.Internal.contentassist.JSPStructuredContentAssistProcessor.(JSPStructuredContentAssistProcessor.java:73)。 eclipse.wst.sse.ui.StructuredTextViewerConfiguration.getContentAssistant(StructuredTextViewerConfiguration.java:291) 在 org.eclipse.wst.sse.ui.internal.StructuredTextViewer.configure(StructuredTextViewer.java:215) 在 org.eclipse.ui.texteditor。抽象文本编辑器。createPartControl(AbstractTextEditor.java:3250) at org.eclipse.ui.texteditor.StatusTextEditor.createPartControl(StatusTextEditor.java:53) at org.eclipse.ui.texteditor.AbstractDecoratedTextEditor.createPartControl(AbstractDecoratedTextEditor.java:432) at org.eclipse .wst.sse.ui.StructuredTextEditor.createPartControl(StructuredTextEditor.java:1507) 在 org.eclipse.jst.pagedesigner.ui.common.sash.SashEditorPart.addPage(SashEditorPart.java:110) 在 org.eclipse.jst.pagedesigner .editors.HTMLEditor$3.createPages(HTMLEditor.java:266) 在 org.eclipse.jst.pagedesigner.ui.common.sash.SashEditorPart.createPartControl(SashEditorPart.java:190) 在 org.eclipse.ui.part.MultiPageEditorPart。 addPage(MultiPageEditorPart.java:241) 在 org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:211) 在 org.eclipse.jst.pagedesigner.editors。HTMLEditor.sash_createAndAddDesignSourcePage(HTMLEditor.java:269) at org.eclipse.jst.pagedesigner.editors.HTMLEditor.createPages(HTMLEditor.java:440) at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:348)在 org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670) 在 org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465) 在 org.eclipse.ui.internal.WorkbenchPartReference.getPart (WorkbenchPartReference.java:595) 在 org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289) 在 org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2863) 在 org.eclipse。 ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2768) 在 org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2760) 在 org.eclipse.ui。internal.WorkbenchPage$10.run(WorkbenchPage.java:2711) at org.eclipse.swt.custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2707 ) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2691) 在 org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:331) 在 org.eclipse.ui.actions.OpenWithMenu$2 .handleEvent(OpenWithMenu.java:179) 在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 在 org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053) 在 org. eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657) at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench. java:2640) 在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604) 在 org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671) 在 org.eclipse.core.databinding 的 org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438) .observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664) 在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 在org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 在 org.eclipse.core。 runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor。组织中的 EclipseStarter.run(EclipseStarter.java:369)。eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect。 DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620) at org.eclipse .equinox.launcher.Main.basicRun(Main.java:575) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1408)25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620) 在 org.eclipse.equinox.launcher.Main.basicRun (Main.java:575) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1408)25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620) 在 org.eclipse.equinox.launcher.Main.basicRun (Main.java:575) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1408)

我想我在安装过程中忘记了一些东西。任何人都可以在这里提供帮助，请提前致谢！

**编辑：**当我删除文件时解决了这个错误：

> org.eclipse.jst.jsp.ui.source_1.1.601.v201108151912.jar org.eclipse.jst.jsp.ui_1.1.601.v201108151912.jar

并下载：

> org.eclipse.jst.jsp.ui.source_1.1.401.v200908111935.jar org.eclipse.jst.jsp.ui_1.1.401.v200908111935.jar

但是现在我失去了 Eclipse 对 JSP 的完全支持。 [请参阅此以获取更多信息。](https://stackoverflow.com/questions/12839012/jsp-support-in-eclipse-with-crystal-reports-plugin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:00:21.860

当我从 Help->About Eclipse SDK->Installation Details 卸载以下插件时解决了这个错误：

*   Android DDMS、Android 开发工具、Android Hierarchy Viewer、Android Traceview。

*   Eclipse Java EE 开发人员工具

*   JST Web UI 等...

然后再次重新安装它们。

最后，我在 Crystal Reports(.rpt) 文件上获得了 JSP 支持，并在 Eclipse 上获得了完整的 Android 支持。

# javascript - javascript正则表达式匹配城市名

> ID：12812902
> 
> 赞同：4
> 
> 时间：2012-10-10T06:01:28.443
> 
> 标签：javascript, regex

我有以下名为 cityList 的数据数组：

```
 var cityList = [

     "Anaa, French Polynesia (AAA)",
     "Arrabury, Australia (AAB)",
     "Al Arish, Egypt (AAC)",
     "Ad-Dabbah, Sudan (AAD)",
     "Annaba, Algeria (AAE)",
     "Apalachicola, United States (AAF)",
     "Arapoti, Brazil (AAG)",
     "Aachen, Germany (AAH)",
     "Arraias, Brazil (AAI)",
     "Awaradam, Suriname (AAJ)",
     "Aranuka, Kiribati (AAK)",
     "Aalborg, Denmark (AAL)"
 ]; 
```

我想首先搜索从字符串开头开始的城市名称。

接下来我要搜索字符串的代码部分：AAA、AAB、AAC 等...

我想将搜索模式应用为 javascript 正则表达式，首先应用到城市名称，然后应用到城市代码。

这是我的正则表达式：

```
 //  this regular expression used for search city name
 var matcher = new RegExp("^" + re, "i");

 //  this regular expression used for search city code
 var matcher = new RegExp("([(*)])" + re, "i"); 
```

如何将这两个正则表达式组合成一个按描述工作的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:09:41.553

我建议这样做：

```
var myregexp = /^([^,]+),[^(]*\(([^()]+)\)/;
var match = myregexp.exec(subject);
if (match != null) {
    city = match[1];
    code = match[2];
} 
```

**解释：**

```
^        # Start of string
(        # Match and capture (group number 1):
 [^,]+   # One or more characters except comma (alternatively insert city name)
)        # End of group 1
,        # Match a comma
[^(]*    # Match any number of characters except an opening parenthesis
\(       # Match an opening parenthesis
(        # Match and capture (group number 2):
 [^()]+  # One or more characters except parentheses (alt. insert city code)
)        # End of group 2
\)       # Match a closing parenthesis 
```

这假设任何城市名称都不会包含逗号（否则此正则表达式只会捕获逗号之前的部分），因此如果可能的话，您需要检查您的数据。我想不出一个例子，但这并没有说明什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:22:29.783

在这里，我建议采用完全不同的方法（ECMA-262 标准）。

由于使用正则表达式无论如何都需要线性搜索，如果您可以预处理数据，则可以设置一个城市对象数组：

```
function City(name, country, code){
  this.cityName = name;
  this.cityCountry = country;
  this.cityCode = code;
}

var cities = [];
cities.push(new City('Anaa', 'French Polynesia', 'AAA'));
// ... push the other cities 
```

和一个搜索功能：

```
function GetCity(cityToSearch, cities){
  var res = null;
  for(i=0;i<cities.length;i++){
    if(cities[i].city = cityToSearch
      res = cities[i]; 
  }
  return res;
} 
```

在运行时：

```
var codeFound = '';
var cityFound = GetCity('Arraias');
if(cityFound != null)
  codeFound = cityFound.cityCode; 
```

**评论**

在这两种情况下，如果你要用世界上所有的城市来填充城市数组，城市名称不是关键！例如，美国有六个“斯普林菲尔德”。在这种情况下，更好的方法是使用双字段键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T07:35:02.423

这是我能做到的最优雅的方式：

```
var cityList = ["Anaa, French Polynesia (AAA)","Arrabury, Australia (AAB)","Al Arish, Egypt (AAC)","Ad-Dabbah, Sudan (AAD)","Annaba, Algeria (AAE)","Apalachicola, United States (AAF)","Arapoti, Brazil (AAG)","Aachen, Germany (AAH)","Arraias, Brazil (AAI)","Awaradam, Suriname (AAJ)","Aranuka, Kiribati (AAK)","Aalborg, Denmark (AAL)"];
var regex = /([a-z].+?),.+?\(([A-Z]{3,3})\)/gi, match, newList = [];

while (match = regex.exec(cityList)) {
    newList.push(match[1]+" - "+match[2]);
}

alert(newList[7]);
// prints Aachen - AAH 
```

如果你不明白如何在你的正则表达式中使用括号，我建议你查看我从中学到的网站：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T06:30:36.683

```
$("#leavingCity").autocomplete({ 
source: function(req, responseFn) {
            var re = $.ui.autocomplete.escapeRegex(req.term);
            var matcher = new RegExp("/^([^,]+),[^(]*\(([^()]+)\)/", "g"); 
            var a = $.grep(cityList, function(item,index) { return matcher.test(item); }); 
            responseFn(a); 
} }); 
```

试试这个，Tim Pietzcker 的常规表达

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T06:26:46.430

我想你想通过几个简单的步骤来完成这个：

1.  在第一个括号之前和之后拆分数组中的每个字符串

2.  将您的第一个正则表达式应用于字符串的第一部分。将结果存储为布尔变量，可能命名为*matchOne*

3.  将第二个正则表达式应用于字符串的第二部分（不要忘记删除右括号）。将结果存储为布尔变量，可能命名为*matchTwo*。

4.  测试两个数学中的任何一个是否成功：`return ( matchOne || matchTwo );`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-10T15:13:33.180

**使用 indexOf**

它更有效，更明确的期望。正则表达式是不必要的。

```
const isMatchX = cityList.indexOf('AAB');
const isMatchY = cityList.indexOf('Awar'); 
```

或者，您可以这样做，但是当您可以使用 indexOf 时，它的方式过大：

```
const search = (cityList, re) => {
  const strRegPart1 = "¬[^¬]*" + re + "[^¬]*";
  const strRegPart2 = "¬[^¬]*\\([^\\)]*" + re + "[^\\)]*\\)($|¬)";
  const regSearch = RegExp("(" + strRegPart1 + "|" + strRegPart2 + ")", "gi");
  const strCityListMarked = '¬' + cityList.join('¬');
  const arrMatch = strCityListMarked.match(regSearch);
  return arrMatch && arrMatch[1].substr(1);
} 
```

# google-maps-api-3 - KML ARGB 颜色未正确显示

> ID：12812904
> 
> 赞同：2
> 
> 时间：2012-10-10T06:01:54.363
> 
> 标签：google-maps-api-3, colors, kml

这是我正在处理的地图的屏幕截图：

![在此处输入图像描述](../Images/f6980e2101322fa31e13523a2e1a809c.png)

这是我的 KML 代码：

```
<Style id="line1">
    <LineStyle>
        <color>ff8C0A23</color>
        <width>2</width>
    </LineStyle>
</Style>

<Placemark>
<styleUrl>#line1</styleUrl>
<LineString><coordinates> ... 
```

如您所见，颜色值为`ff8C0A23`，它是**ARGB**，对吗？所以**RGB**颜色`8C0A23`应该是这样的：

![在此处输入图像描述](../Images/fd29f1dad94bcff0855d52142fed96a8.png)

但正如您所见，边界的颜色在地图上显示的完全不同。任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T06:49:48.417

[https://developers.google.com/kml/documentation/kmlreference](https://developers.google.com/kml/documentation/kmlreference)

根据： [https ://developers.google.com/kml/documentation/kmlreference#color](https://developers.google.com/kml/documentation/kmlreference#color)

表达顺序为aabbggrr

```
<color>
Color and opacity (alpha) values are expressed in hexadecimal notation. The range of values for any one color 
is 0 to 255 (00 to ff). For alpha, 00 is fully transparent and ff is fully opaque. The order of expression is 
aabbggrr, where aa=alpha (00 to ff); bb=blue (00 to ff); gg=green (00 to ff); rr=red (00 to ff). For example, 
if you want to apply a blue color with 50 percent opacity to an overlay, you would specify the following: 
<color>7fff0000</color>, where alpha=0x7f, blue=0xff, green=0x00, and red=0x00. 
```

请参阅此颜色选择器： [http ://www.zonums.com/gmaps/kml_color/](http://www.zonums.com/gmaps/kml_color/)

# ios - GPUImage：有什么方法可以取消正在处理的 [GPUImageMovie startProcessing]？

> ID：12812909
> 
> 赞同：1
> 
> 时间：2012-10-10T06:02:06.040
> 
> 标签：ios, gpuimage

我指的是那里的iOS框架[GPUImage](https://github.com/BradLarson/GPUImage/ "GPU图像")。

我需要知道有没有办法取消`[GPUImageMovie startProcessing]`正在处理的？

场景是当我选择使用另一个过滤器而有一个过滤器处理时，我需要取消它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:46:31.107

我添加了一个标志 sentCancelMessage 属性和一个方法 cancelProcessing 以将其更新为 YES。在处理相关方法中，首先检查该标志。仍然需要了解更多的框架，以便在适当的位置检查标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:36:54.653

只需使用`endProcessing`

```
GPUImageMovie *imageMovie = ...
[imageMovie endProcessing]; 
```

[https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageMovie.h](https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageMovie.h)

# objective-c - 如果视图超出屏幕上可见的当前高度，则拖动视图并滚动

> ID：12812911
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:09.293
> 
> 标签：objective-c, uiscrollview

假设我有一个 scrollView 和里面的一些视图。我将其中一个视图垂直向下拖动，并且我希望 scrollView 自动向上滚动以使视图在拖动的同时可见。

我想到了一个算法，即获取 scrollView 的 y 位置，该位置在不滚动的情况下可见，并检查被拖动的视图是否超过了这个 y 位置，如果超过，则执行向上滚动 scrollView 的方法。

但是，我不知道如何获取可见的 scrollView 的 y 位置。拖动没有问题。我面临的唯一问题是向上滚动scrollView。

请就可以做的事情提出建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:37:14.637

嘿，对于那些需要帮助的人，我使用当前的滚动视图内容偏移量 + self.view.size.height 来获取滚动视图的可见 y 位置。根据滚动视图的这个 y 位置检查 UIView 的当前拖动 y 位置。如果超过，滚动视图内容偏移 += UIView.height

# asp.net-mvc-3 - 错误号 3034 映射片段问题

> ID：12812920
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:34.247
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4

我正在使用 EF 4.1 开发 MVC 应用程序。我已经使用 TPH 方法来生成数据库。

我有两个实体，1\. company 和 2\. Lead ， Lead 是从 Company 继承的。

请检查下图：

![在此处输入图像描述](../Images/d4164a54fc7a3624458d7a13cc9e09f6.png)

现在我有以下映射...

![在此处输入图像描述](../Images/95d2ee57c550a3afbeb8283abc1d0385.png)

这是带有 XML 的 edmx 文件

```
<EntitySetMapping Name="Companies">
            <EntityTypeMapping TypeName="IsTypeOf(Model1.Company)">
                <MappingFragment StoreEntitySet="Companies">
                    <ScalarProperty Name="Id" ColumnName="Id" />
                    <ScalarProperty Name="Name" ColumnName="Name" />
          <Condition ColumnName="__Disc__" Value="Company" />
                </MappingFragment>
            </EntityTypeMapping>
            <EntityTypeMapping TypeName="Model1.Lead">
                <MappingFragment StoreEntitySet="Companies">
    // Gives Error ->   <ScalarProperty Name="Id" ColumnName="Id" />
    // Gives Error ->   <ScalarProperty Name="Name" ColumnName="Name" />
    // Gives Error ->   <ScalarProperty Name="Status" ColumnName="Status" />
                    <Condition ColumnName="__Disc__" Value="Lead" />
                </MappingFragment>
            </EntityTypeMapping> 
```

错误 3034：从第 47、54 行开始映射片段时出现问题：一个实体被映射到同一个表中的不同行。确保这两个映射片段不会将具有相同键的两组实体映射到两组不同的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:22:55.110

问题解决了。从 edmx 中的基本实体中删除了鉴别器属性。

# java - soffice.bin X11错误：无法打开显示如何解决？

> ID：12812923
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:51.777
> 
> 标签：java, openoffice.org

我正在使用 Java + OpenOffice 开发 Web 应用程序来生成报告文档。

一个 tomcat 服务器和 war 文件安装在 Fedora 机器上。

下面的代码可以很好地在 Windows 操作系统上创建编写器文档，但在使用 war 文件从客户端调用时在 Fedora 机器上给出错误：

```
String oooExeFolder = "/usr/lib/openoffice.org3/program";              
XComponentContext xContext = BootstrapSocketConnector.bootstrap(oooExeFolder);

XMultiComponentFactory xMultiComponentFactory = xContext.getServiceManager();

XComponentLoader xcomponentloader = (XComponentLoader) UnoRuntime.queryInterface(XComponentLoader.class, xMultiComponentFactory.createInstanceWithContext("com.sun.star.frame.Desktop", xContext));

XComponent xcomp = xcomponentloader.loadComponentFromURL(filep[i], "_blank", 0, new PropertyValue[0]); 
```

这是错误：

```
CE> /usr/lib/openoffice.org3/program/soffice.bin X11 error: Can't open display: 
CE>    Set DISPLAY environment variable, use -display option
CE>    or check permissions of your X-Server
CE>    (See "man X" resp. "man xhost" for details) 
```

任何人都可以帮助确定此问题的可能原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:25:26.913

您需要以`soffice`“无头”模式启动。我建议您查看[JODReports](http://jodreports.sourceforge.net/)或[Docmosis](http://www.docmosis.com)，因为它们会在此类设置问题上为您节省大量时间。请注意，我为创建 Docmosis 的公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:43:08.697

```
After Setting display to "1.0" with following code manually problem has been resolved and  i am able to access Open Office from web application to generate report

oooExeFolder = "/usr/lib/openoffice.org3/program/";
List<String> oooOptions = OOoServer.getDefaultOOoOptions();
oooOptions.add("-display");
oooOptions.add(":1.0");

OOoServer server = new OOoServer(oooExeFolder, oooOptions);
XComponentContext xContext = BootstrapSocketConnector.bootstrap(oooExeFolder); 
```

# heroku - Heroku 在 OSX 上默认不使用 bash 安装 toolbelt PATH

> ID：12812924
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:53.793
> 
> 标签：heroku

在 OSX 10.7.4 上安装 heroku-toolbelt/2.32.9 无法为 bash 正确设置 PATH。

为了解决这个问题，我创建了`.bash_profile`一个正确的 PATH：

```
$ cat ~/.bash_profile 
export PATH=/usr/local/heroku/bin/:$PATH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:26:43.920

我这样做了：

```
$ touch ~/.bash_profile 
export PATH=/usr/local/heroku/bin/:$PATH 
```

# sql - 表中范围标识（）和范围标识（）之间的性能差异？

> ID：12812926
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:59.630
> 
> 标签：sql, sql-server, performance

我有一张表说 scope_test 如下：

```
create table scope_test
(
id int identity(1,1),
val varchar(100)
) 
```

现在，当我在此表中插入一行并通过 2 个不同的 sql 语句选择范围标识时，我可以看到 2 个语句的性能差异：

```
insert into scope_test values('abcd')
select scope_identity() -- statement 1
select scope_identity() from scope_test -- statement 2 
```

根据执行计划，语句 1 比语句 2 快：

![在此处输入图像描述](../Images/a8ed20cd4f8aae319a7fd82a3b5e98bb.png)

我很想知道：1\. 为什么会有这种性能差异，以及 2\. 使用语句 1 中使用的范围 identity() 是否安全，即没有表名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T06:12:17.450

性能上的差异仅仅是因为你在做不同的事情。的第二次使用`scope_identity`不只是获取最后一个标识，它获取表中的所有记录并从表中`scope_identity()`的每条记录中选择值。`scope_identity()`对于表中存在的每条记录，您只需从一次中获取值。

因此，第二次使用`scope_identity()`是毫无意义的，它将返回相同的值一次或多次（如果查询中使用的表为空，则返回零次）。的值`scope_identity()`与您在查询中使用的表完全不相关，即如果您在不同的表中插入记录，则不能使用它来获取插入特定表中的最后一个 id。

# objective-c - 有人可以帮助我改进我的代码，以便它可以更快地工作吗？

> ID：12812927
> 
> 赞同：0
> 
> 时间：2012-10-10T06:02:59.947
> 
> 标签：objective-c, ios, xcode, performance, game-physics

在我尝试在没有物理引擎的情况下制作游戏时，我的 iPod 4g 运行代码非常缓慢。该代码有效，但它真的很慢。我想知道是否有人可以帮助我让它运行得更快。

```
-(void)Loop {
NSMutableArray *_remove = [NSMutableArray array];
for (UIImageView *b in _blocks) {
    int i = 0;
    for (UIImageView *b2 in _blocks) {
        if (!CGRectContainsPoint(b2.frame, CGPointMake(b.center.x, b.center.y + b.frame.size.height/2)) && b != b2) {
            i++;
        }
    }
    if (i == [_blocks count] - 1 && b.image != wall) {
        b.center = CGPointMake(b.center.x, b.center.y + 1);
    } else if (b.image != wall) {
        for (UIImageView *b2 in _blocks) {
            for (UIImageView *b3 in _blocks) {
            //Check for collitions
            if (b !=b2 && ((CGRectContainsPoint(b2.frame, CGPointMake(b.center.x + b.frame.size.width/2, b.center.y)) && b.image == b2.image && b.image !=wall && b2.image != wall && CGRectContainsPoint(b3.frame, CGPointMake(b2.center.x, b2.center.y + b2.frame.size.height/2))) || (CGRectContainsPoint(b2.frame, CGPointMake(b.center.x, b.center.y + b.frame.size.height/2)) && b.image == b2.image && b.image !=wall && b2.image != wall) )) {
                    [_remove addObject:b];
                    [_remove addObject:b2];
            }
            }}
    }
}
for (UIImageView *b in _remove) {
    [b removeFromSuperview];
    [_blocks removeObject:b];
}
} 
```

代码的作用是删除具有“墙”或“块”并且并排或位于具有相同图像的“块”顶部的 UIImageView。换句话说，如果它们正在触摸，则删除具有相同图像的图像，并且如果它们是静止的（下面有一个块）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:55:21.947

1.  使用更有意义的变量名，它们是免费的。
2.  简介，简介，简介。
3.  将便宜的测试移到昂贵的测试之前，例如，在您的第一个 if 中，您在检查 b ！= b1 之前检查 rect 中的点
4.  尽可能在最外层的测试中进行测试，例如，在最内层的测试中，您从测试 b!= b2 开始。您为每个 b3 执行此操作。这不会是一个很大的胜利，但它是免费的。

5.  不要担心 NSMutableArray 分配，它位于外部循环中，所以不是一个因素，当您添加一个新值时，担心数组内部存储的重新分配，这发生在内部级别。通过首先分配一个足够大的 NSMutableArray 来解决这个问题。[NSMutableArray arrayWithCapacity:_blocks.count];

6.  我怀疑您多次向删除数组添加块，因为它们可能与多个其他块重叠，为什么不使用可变集。如果您多次添加块，即使您正确调整了可变数组的大小，您也可能会获得可变数组存储分配。6个人资料更多:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:56:15.193

这是 obj-c，有一个运行时代码可以在您的代码之外工作（不像 c 或 c++）。每次向对象传递消息时，都会在后台进行大量函数调用检查。

顺便说一句，您每次调用都在循环中创建一个 NSMutableArray，这真的很耗时。

如果你想要一个非常快的引擎，例如使用 cocos2d lib..

# java - 我是露天的新手，如何在露天部署 Web 应用程序

> ID：12812936
> 
> 赞同：0
> 
> 时间：2012-10-10T06:03:34.623
> 
> 标签：java

我已经在 spring mvc 中创建了 Web 应用程序，现在我必须在 alfresco 中部署它，但我不知道该怎么做，因为我是 alfresco 的新手并且对此了解不多。如果有人帮助我将不胜感激me out.so 我可以更快地解决我的问题。

# jquery - 如何在导航栏中显示打开的页面点击

> ID：12812938
> 
> 赞同：0
> 
> 时间：2012-10-10T06:03:44.763
> 
> 标签：jquery, html

我有代码，我想显示打开的页面导航页面点击，我想根据打开的页面突出显示点击链接。

但是，现在当点击此导航栏中的来链接时，页面会重新加载并仅显示 UL 打开的主页。

我想执行，当用户点击链接框 UL 需要显示的某个链接时。下面是我的代码

```
<div id="sidebar">
<div class="box">
<div class="h_title">&#8250; <b>Home</b></div>
<ul id="home">
<li class="b1"><a class="icon page" href="/portal/">Status</a></li>
</ul>
</div>
<div class="box">
<div class="h_title">&#8250; <b>About Us</b></div>
<ul>
<li class="b1"><a class="icon page" href="">Custom Report</a></li>
<li class="b1"><a class="icon page" href="">History Log</a></li>
<li class="b1"><a class="icon page" href="">Graphs</a></li>
</ul>
</div>
<div class="box">
<div class="h_title">&#8250; <b>PROFILES</b></div>
<ul>
<li class="b1"><a class="icon page" href="">Filters</a></li>
<li class="b1"><a class="icon page" href="">StaffList</a></li>
<li class="b1"><a class="icon page" href="">StudentList</a></li>
</ul>
</div>
<div class="box">
<div class="h_title">&#8250; <b>ADMINISTRATION</b></div>
<ul>
<li class="b1"><a class="icon page" href="">Manage Licenses</a></li>
<li class="b1"><a class="icon page" href="">Change Password</a></li>
</ul>
</div>
</div>

<script type="text/javascript" src="/static/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
   $(function(){
   $(".box .h_title").not(this).next("ul").hide("normal");
   $(".box .h_title").not(this).next("#home").show("normal");
   $(".box").children(".h_title").click( function() { $(this).next("ul").slideToggle(); });
  });
</script> 
```

谢谢你 Pervez

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:13:11.130

显然你想要一个点击导航。你不需要重新发明轮子。尝试 jquery ui 点击导航：

**jQuery UI 选项卡** [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

# javascript - 使用javascript代码的活动窗口截图？

> ID：12812942
> 
> 赞同：1
> 
> 时间：2012-10-10T06:04:12.833
> 
> 标签：javascript, screenshot, active-window

我正在尝试获取桌面应用程序的快照（用 html5+javascript 开发）。我知道在 java 中我可以截取活动窗口的截图。但是有什么方法/脚本可以用来截取活动窗口的截图吗？建议我html2canvas 以外的方法

提前致谢。

# tridion - 如何通过 web 服务调用获取 tridion 代理内容？

> ID：12812944
> 
> 赞同：0
> 
> 时间：2012-10-10T06:04:21.570
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我需要通过基于 html5 的移动网站的 Web 服务调用来访问动态代理内容。我们使用的是 SDL 2011 版本构建：6.1.0.55920。

1.  代理内容是否已作为 Web 服务提供？
2.  是否需要进行任何配置设置？

任何人都可以提供所需的指导方针。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:22:02.287

有一个内容交付 OData Web 服务可用于从代理检索动态内容。要安装它，请检查以下位置的文档：

.Net 安装： [http](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930) ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930 （需要登录）
Java 安装： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/ SDL_Tridion_2011_SPONE/task_DC046ED58691440E92ED1A8672851427](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_DC046ED58691440E92ED1A8672851427)（需要登录）

此信息也在安装指南 PDF 中提供。

有关实施服务的信息，请查看[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_DFBA3FF3977045F892ABB4FCF8DA38B1上的文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_DFBA3FF3977045F892ABB4FCF8DA38B1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:34:02.280

首先，您需要修改 cd_storage_confe.xml 文件以查询代理数据库。该文件位于网站的 bin\config 文件夹中。

启用此标签：

```
<SearchFilter Name="SearchFilter" Class="com.tridion.broker.components.meta.MsSqlSearchFilterHome" defaultStorageId="defaultdb"/> 
```

在此之后，您可以使用 Broker 查询机制从 Broker 数据库中获取内容并动态显示数据。

[SdlLive 网站](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0AB6D192D7AB4EC18892631F519EF1DD#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=broker%2520query%2520mechanism&sid=lcSearch.runSearch1349850677589&eventType=lcContent.loadDocconcept_B5D7EADECD2E4C74AB3F044240C3FC46&query=&scope=&filename=DynamicContentRetrieval.xml&docid=concept_B5D7EADECD2E4C74AB3F044240C3FC46&inner_id=&tid=&addHistory=true&resource=)上的更多帮助（需要登录）

# android - 我有两个按钮我想在两个按钮的单击事件上播放声音，并在它们之间切换焦点.. 这是一个问题

> ID：12812945
> 
> 赞同：0
> 
> 时间：2012-10-10T06:04:26.173
> 
> 标签：android

我有两个按钮（到达和离开）我想在两个按钮的点击事件上播放声音，并在它们之间切换 requestfocus.. 这是一个问题

这是我第一次单击“到达按钮”或“出发”按钮，它的工作正常（播放声音和焦点），但是当我单击时，例如单击“出发”按钮后到达，它没有播放声音，也没有显示吐司。

这是我的代码示例

```
Button btnArrival, btnDeparture, btnScan;
View cameraView;

MediaPlayer mPlayer;

boolean in, out;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnArrival = (Button) findViewById(R.id.btnArrival);
    btnDeparture = (Button) findViewById(R.id.btnDeparture);
    btnScan = (Button) findViewById(R.id.btnScan);
    cameraView = findViewById(R.id.cameraView);

    cameraView.setVisibility(View.GONE);

    //cameraLayout.setEnabled(false);
    btnScan.setEnabled(false);

}

public void onArrivalClicked(View v){

    MediaPlayer mPlayer = MediaPlayer.create(MainActivity.this, R.raw.clickbeep);
    mPlayer.start();
    btnScan.setEnabled(true);
    in = true;
    out = false;
    Toast.makeText(MainActivity.this, "Arrival", Toast.LENGTH_SHORT).show();
    focusArrivalBtn();

}

private void focusArrivalBtn() {
    btnArrival.setFocusableInTouchMode(true);
    btnArrival.requestFocus();
}

public void onDepartureClicked(View v){

    MediaPlayer mPlayer = MediaPlayer.create(MainActivity.this, R.raw.clickbeep);
    mPlayer.start();
    btnScan.setEnabled(true);
    in = false;
    out = true;
    Toast.makeText(MainActivity.this, "Departure", Toast.LENGTH_SHORT).show();
    focusDepartureBtn();
}

private void focusDepartureBtn() {
    btnDeparture.setFocusableInTouchMode(true);
    btnDeparture.requestFocus();
} 
```

# websphere - WebSphere - 内置内存分析器

> ID：12812949
> 
> 赞同：0
> 
> 时间：2012-10-10T06:04:38.790
> 
> 标签：websphere

我已经尝试了一些 java 分析器来分析 WAS 内存，但我想由于所有 SUN/IBM java 的东西，它们不支持 WAS。

有没有内置的方法来分析内存/分析堆转储更多/在跟踪和监视中的东西，perhepas？

如果没有，我知道一些产品——但事情是我们处于封闭环境中——我不能只是下载和运行。因此，如果 WAS 有任何东西，我想知道。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T02:00:09.903

查看健康中心

[http://www.ibm.com/developerworks/java/jdk/tools/healthcenter/](http://www.ibm.com/developerworks/java/jdk/tools/healthcenter/)

对你来说应该是合理的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:07:45.257

我不知道 WebSphere 附带的任何分析器，但您可以下载[IBM Support Assistant](http://www-01.ibm.com/software/support/isa/)（免费）并下载非常适合分析堆转储的 HeapAnalyzer。

就我个人而言，我还没有尝试过 v5，但经常使用堆分析器。我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:22:36.957

[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)可以分析IBM 和非 IBM 堆转储。它还作为受支持的工具在 IBM Support Assistant 中提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T06:16:24.603

没有内置的东西可以做到这一点，但是 IBM 提供了一个图形 GC 和堆分析工具。您必须从 IBM 下载它。

请看这里： [https ://www.ibm.com/developerworks/java/jdk/tools/gcmv/](https://www.ibm.com/developerworks/java/jdk/tools/gcmv/)

# iphone - 在每个单元格上设置两个按钮，动作不同但帧相同

> ID：12812950
> 
> 赞同：0
> 
> 时间：2012-10-10T06:04:39.190
> 
> 标签：iphone, uitableview

我需要在每个单元格上设置两个按钮，它们具有不同的操作但相同的框架，单击一个将隐藏另一个将可见。我怎样才能做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:38:00.500

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    UITableViewCell * cell = 
    [tableHistory dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle    reuseIdentifier:SimpleTableIdentifier] autorelease];
    }

    else
    {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:SimpleTableIdentifier] autorelease];
    }

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    [button setFrame:CGRectMake(270.0, 7.0, 30.0, 30.0)];

    if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"check"])

        [button setImage:[UIImage imageNamed:@"right-with-bg.png"] forState:UIControlStateNormal];
    else
        [button setImage:[UIImage imageNamed:@"tick-bg.png"] forState:UIControlStateNormal];

    [button addTarget:self   action:@selector(buttonClicked:)forControlEvents:UIControlEventTouchUpInside];

    [cell.contentView addSubview:button];

    cell.textLabel.text = [cellDataArray objectAtIndex:indexPath.row];

    cell.detailTextLabel.text = [arrayTktcode objectAtIndex:indexPath.row];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    [cell addSubview:btnUnScan];

    [cell addSubview:btnUScan];

    return cell;

}

-(void)buttonClicked:(id)sender
{

    CGPoint touchPoint = [sender convertPoint:CGPointZero toView:tableHistory];
    NSIndexPath *indexPath = [tableHistory indexPathForRowAtPoint:touchPoint];

    UIButton *button = (UIButton *)sender;

    if([[arrayCheckUnchek objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])
    {
        [button setImage:[UIImage imageNamed:@"right-with-bg.png"] forState:UIControlStateNormal];
        [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"check"];
    }
    else
    {
        [button setImage:[UIImage imageNamed:@"tick-bg.png"] forState:UIControlStateNormal];
        [arrayCheckUnchek replaceObjectAtIndex:indexPath.row withObject:@"Uncheck"];
    }
} 
```

# asp.net-mvc-3 - Ajax 分页列表将对象传递给控制器

> ID：12812956
> 
> 赞同：2
> 
> 时间：2012-10-10T06:05:20.317
> 
> 标签：asp.net-mvc-3, asp.net-ajax, pagedlist

我正在开发一些高级搜索功能，但遇到了障碍。我想为我的搜索结果使用 AJAX，并使用 PagedList 插件来处理分页。我有一个 AdvancedSearchResults 操作，它采用搜索过滤器类和当前页面。问题是如何正确地将搜索过滤器类传递到此操作中。我确信我正在做的事情没有正确组织，因为我认为这将是相当普遍的。我真的很感激任何帮助。提前致谢。

控制器动作：

```
 public ActionResult AdvancedSearchResults(AdvancedSearchFilters searchFilters, int ? page)
  {
      //DO STUFF

      return PartialView("_SearchResults", results);
  } 
```

高级搜索结果过滤器：

```
public class AdvancedSearchFilters
{
   public string SearchText { get; set; }
   public List<string> SelectedTableTypes { get; set; }
   public List<Guid> SelectedGenreIds { get; set; }
   public List<Guid> SelectedPlatformIds { get; set; }
   public int YearMax { get; set; }
   public int YearMin { get; set; }
   public int RatingMin { get; set; }
   public int RatingMax { get; set; }
} 
```

搜索结果部分视图：

```
 @model List<SearchResultItem>

@using PagedList
@using PagedList.Mvc

<!-- 15 Per Page -->
<h2>Search Results</h2>
@if (ViewBag.OnePageOfSearchItems.Count > 0)
{
    <div class="pagination">
        @Html.PagedListPager((IPagedList)ViewBag.OnePageOfSearchItems, page => Url.Action("AdvancedSearchResults", "Search", new { searchFilters = ViewBag.AdvancedSearchFilters, page = page }), 
                              PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(PagedListRenderOptions.OnlyShowFivePagesAtATime, "#main-results"))
    </div>
    foreach (var searchResultItem in Model)
    {
        <a href="@Url.Action(searchResultItem.ResultType, searchResultItem.ResultType, new { id = searchResultItem.ResultId })" class="result">
            @if (searchResultItem.ProfileImageLocation != null)
            {
                <img src="@searchResultItem.ProfileImageLocation" alt="@searchResultItem.ResultName" />
            }
            <div class="result-info">
                <h3>@searchResultItem.ResultName</h3>
                <p>@searchResultItem.DisplayText</p>
            </div>
        </a>
    }
    <div class="pagination">
        @Html.PagedListPager((IPagedList)ViewBag.OnePageOfSearchItems, page => Url.Action("AdvancedSearchResults", "Search", new { searchFilters = ViewBag.AdvancedSearchFilters , page = page }), 
                              PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(PagedListRenderOptions.OnlyShowFivePagesAtATime, "#main-results"))
    </div>
}
else
{
    <span>No Matches.</span>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:02:30.340

尝试以 json 的形式将数据传递给 action 方法。尝试以下将 json 对象传递给操作方法的代码。

```
//// construct your json object.
var jsonObj = '{"SelectedTableTypes" : [{"1","2"}]}';

var postData = $.parseJSON(jsonObj);

$.ajax(
   {
       url: // your URL with Action name AdvancedSearchResults,
       data: postData,
       cache: false,
       dataType: "json",
       success: function (result) {

       },
       error: function (xhr, ajaxOptions, thrownError) {
                                alert(xhr.status);
                                alert(thrownError);
       }
   }); 
```

# android - 推送通知开/关

> ID：12812960
> 
> 赞同：1
> 
> 时间：2012-10-10T06:05:34.097
> 
> 标签：android, notifications, push-notification, push, server-push

我为我的 android 应用程序集成了推送通知，我想为任何 android 手机/标签打开/关闭推送通知，任何人都可以帮我...

```
protected void onPostExecute(BlogInfo result){
            if(result.IsNew && result.Blog != null){
                NotificationManager manager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
                Notification notification = new Notification(R.drawable.logo, "THE BUTCHER BARKS", System.currentTimeMillis());
                notification.flags |= Notification.FLAG_AUTO_CANCEL;
                notification.defaults |= Notification.DEFAULT_ALL;

                Intent intent = new Intent(Service.this, Bark.class);
                PendingIntent pendingIntent = PendingIntent.getActivity(GuruService.this, 0, intent, 0);
                notification.setLatestEventInfo(getApplicationContext(), "BARKS", result.Blog.Title, pendingIntent);
                manager.notify(1, notification);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:15:27.133

在共享首选项中保存一个值，无论推送消息打开还是关闭。

然后每当推送消息到达应用程序时，它将调用 GCMIntentService 中的 onMessage 方法。然后在 onMessage 中写入条件。

```
protected void onMessage(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
            if(preference.getPushStatus().equals("ON"))
        Log.d("onMessage",arg1.getExtras().getString("message"));   

} 
```

# sql-server - 存储过程的返回值错误

> ID：12812962
> 
> 赞同：0
> 
> 时间：2012-10-10T06:06:05.743
> 
> 标签：sql-server, sql-server-2005

我编写了一个存储过程并将 varchar(200) 变量作为返回变量，但在输出中显示为“将 varchar 值转换为整数时转换失败”，在过程中我没有转换为 int，但我面临错误

```
alter proc rulename @mfid varchar(20)
as
declare @ACF2 varchar(200)
begin 
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where      MFID=@mfid) > 0)
begin
set @ACF2='Apollo'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + 'GP'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'Tactical Comp'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'Unit Valuation'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'NPVS'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'Apollo Test'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'GP Test'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'Tactical Comp Test'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'Unit Valuation Test'
end
if((select count(distinct(Rulename)) as count1 from MainframeExtractsPLP where MFID=@mfid) > 0)
begin
set @ACF2= @ACF2 + ',' + 'NPVS Test'
end
return @ACF2
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T06:20:38.257

存储过程的返回值[是一个整数](http://msdn.microsoft.com/en-us/library/ms174998.aspx)。您应该改用[输出参数](http://msdn.microsoft.com/en-us/library/ms188655.aspx)。

```
create procedure rulename
  @mfid varchar(20),
  @ACF2 varchar(200) output
as

-- Initialise param to empty string
set @ACF2 = ''

begin
  if ...
    begin
      set @ACF2 = @ACF2 + '...'
    end
  .
  .
  .
end 
```

# ios - 为导航控制器中的所有视图保持 popovercontentsize 不变

> ID：12812963
> 
> 赞同：0
> 
> 时间：2012-10-10T06:06:07.170
> 
> 标签：ios, uipopovercontroller

当我将 UINavigationController 传递给 UIPopOver 并设置其 popOverContentSize 属性时，它仅对第一个视图有效。当我导航到下一个视图时，popOverContent 大小再次扩展为不需要的完整视图。如何限制导航控制器中所有视图的 popOver 的恒定大小？

```
- (void)selectTextStyle:(id)sender {
DJTextStyleMasterViewController *textStyle = [[DJTextStyleMasterViewController alloc] init];
self.navController = [[UINavigationController alloc] initWithRootViewController:textStyle];

UIPopoverController *popOver = [[UIPopoverController alloc] 
                                initWithContentViewController:self.navController];
[popOver setDelegate:self];
[popOver setPopoverContentSize:CGSizeMake(320, 400)];
[popOver presentPopoverFromBarButtonItem:self.textStyleButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

[textStyle release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:39:13.120

在弹出控制器的第一个视图控制器中，您可以使用此方法：

```
[self setContentSizeForViewInPopover:CGSizeMake(320, 400)]; 
```

然后弹出框的视图（如果没有手动修改）对于下一个视图控制器也应该相同。

# nginx - 如何设置 Nginx 配置来重写我的子域

> ID：12812967
> 
> 赞同：1
> 
> 时间：2012-10-10T06:06:17.520
> 
> 标签：nginx, url-rewriting, subdomain

我正在尝试使用 Nginx 设置子域，但出现了一些错误。以下是我的配置：

```
server {
    listen 80;
    server_name dimain.com *.domain.com;
    root /path/to/fuelphp_project/public;

    location / {
        index  index.php index.html index.htm;
        if ($host ~ (.*)\.(.*) ) {
                set $sub_name $1;
                rewrite ^/(.*)$ /index.php/$sub_name/$1 last;
                break;
        }

        if (!-e $request_filename) {
            rewrite ^.*$ /index.php last;
            break;
        }
    }

    ...
} 
```

我想要这样的结果：

```
sub1.domain.com/c1/a1 -> domain.com/sub1/c1/a1
sub2.domain.com/c2/a2 -> domain.com/sub2/c2/a2 
```

如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:15:26.947

```
server {
  server_name sub1.domain.com;
  return 301 "http://domain.com/sub1${uri}";
} 
```

这对你有用吗？

我刚刚在这里注意到了一个答案：[https ://serverfault.com/questions/426673/nginx-redirect-subdomain-to-sub-directory](https://serverfault.com/questions/426673/nginx-redirect-subdomain-to-sub-directory)

```
server {
  server_name ~^(?<sub>[a-zA-Z0-9-]+)\.domain\.com$; # will cause the sub-domain to be placed in $sub
  return 301 "http://domain.com/${sub}${uri}";
} 
```

我认为正则表达式也可以是一个非常酷的解决方案......取决于你需要什么。

# iphone - iOS UIWebView 加载 xml

> ID：12812969
> 
> 赞同：-2
> 
> 时间：2012-10-10T06:06:22.047
> 
> 标签：iphone, ios, ipad, uiwebview

我有一个 XML 地址的 App Store 评论页面（[http://itunes.apple.com/us/rss/customerreviews/id=350962117/sortBy=mostRecent/xml](http://itunes.apple.com/us/rss/customerreviews/id=350962117/sortBy=mostRecent/xml)）。我想将它们放在 iPhone 上以将它们显示为提要。

```
NSString *urlAddress = @"http://itunes.apple.com/us/rss/customerreviews/id=350962117/sortBy=mostRecent/xml"; 
```

但是 webView 不显示这个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:22:44.217

必须在您的**nib中添加****webView**并连接**webView** **委托** 方法 **FileName** : **WebViewController** .* *m* *

 ********```
- (void)viewDidLoad 

{

NSString *urlAddress = @”http://www.google.com”;

NSURL *url = [NSURL URLWithString:urlAddress];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];

} 
```

希望对你有帮助...********

# c# - 没有 TFS 的 Visual Studio 测试代理？(2010)

> ID：12812970
> 
> 赞同：0
> 
> 时间：2012-10-10T06:06:26.580
> 
> 标签：c#, visual-studio-2010, load-testing

是否可以在不涉及 TFS 的情况下使用 Visual Studio 测试代理和测试控制器？

我想在我正在开发的基于 Web 的系统上运行负载测试，但我的测试机器不属于客户域（TFS 所在的位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:26:38.943

我认为这是可能的。

*   [当您安装`Test Controller`配置它以进行负载测试。](http://msdn.microsoft.com/en-us/library/ff400223%28v=vs.100%29.aspx)
*   为端口 6901（默认为测试控制器）向安装了测试控制器的计算机的防火墙添加规则。
*   安装您的`Test Agents`并将它们分配给您的测试控制器。
*   从您的 Visual Studio[添加新的测试设置](http://msdn.microsoft.com/en-us/library/ee256991%28v=vs.100%29.aspx)，然后在`Roles`选项卡中选择`Remote Execution`并提供控制器的 URL。

# xslt - 通过 XSLT 实现 xml 到 xml 的转换

> ID：12812971
> 
> 赞同：0
> 
> 时间：2012-10-10T06:06:32.077
> 
> 标签：xslt, xslt-1.0

我想使用 XSLT 将一种 xml 格式转换为另一种 xml 格式。下面是我需要转换为另一种 XML 格式的输入 XML 格式。

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
        <RequestType>DocGen</RequestType>
        <Version>10.6</Version>
        <BankId>01</BankId>
        <ChannelId>LOS</ChannelId>
    </Header>
    <Body>
        <Data>
         <CorpAppLimitDetailsBO>
            <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
            <ApprovedLimitCCY>INR</ApprovedLimitCCY>
            <ApprovedLimit>100.0</ApprovedLimit>
            <LimitClassification>ROOT</LimitClassification>
        <DBApplicantMiscDetails>
                    <APPLICANTMISCID>400000</APPLICANTMISCID>
                    <APPLICANTID>400030</APPLICANTID>
                    <MISCTYPE>APPLIED</MISCTYPE>
            </DBApplicantMiscDetails>
        </CorpAppLimitDetailsBO>
       </Data>
     </Body>
</FIXML> 
```

下面是我期望的输出格式 xml。

```
<FIXML>
    <Header>
        <RequestID>ReqID8942</RequestID>
        <RequestType>DocGen</RequestType>
        <Version>10.6</Version>
        <BankId>01</BankId>
        <ChannelId>LOS</ChannelId>
    </Header>
    <Body>
        <Data>
            <LimitDetails>
            <Limit>
                <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
                <ApprovedLimitCCY>INR</ApprovedLimitCCY>
                <ApprovedLimit>100.0</ApprovedLimit>
                <LimitClassification>ROOT</LimitClassification>
        <APPLICANTMISCID>400000</APPLICANTMISCID>
        <APPLICANTID>400030</APPLICANTID>
        <MISCTYPE>APPLIED</MISCTYPE>
            </Limit>
       </Data>
     </Body>
</FIXML> 
```

我已尝试使用以下代码，但不知道如何修改代码以在输出 XML 格式中包含 DBApplicantMiscDetails 详细信息。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <xsl:apply-templates select="FIXML"/>
    </xsl:template>
    <xsl:template match="FIXML">
        <FIXML>
            <xsl:apply-templates select="Header"/>
            <xsl:apply-templates select="Body"/>
        </FIXML>
    </xsl:template>
    <xsl:template match="Header">
        <xsl:copy-of select="."/>
    </xsl:template>
    <xsl:template match="Body">
        <Body>
            <xsl:apply-templates select="Data"/>
        </Body>
    </xsl:template>
    <xsl:template match="Data">
        <Data>
            <LimitDetails>
                <xsl:apply-templates select="CorpAppLimitDetailsBO"/>
            </LimitDetails>
        </Data>
    </xsl:template>
    <xsl:template match="CorpAppLimitDetailsBO">
        <Limit>
            <xsl:copy-of select="child::*"/>
        </Limit>
    </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:36:56.653

您可能解决此问题的方法是建立在 XSLT 身份转换的基础上，它自己只是复制 XML 中的节点

```
<xsl:template match="@*|node()">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template> 
```

然后，您添加模板以匹配您想要进行更改的特殊情况（而不是为您只想复制的元素编写模板）。例如，要将**CorpAppLimitDetailsBO**重命名为**Limit**，您可以这样做

```
<xsl:template match="CorpAppLimitDetailsBO"> 
    <Limit> 
        <xsl:apply-templates /> 
    </Limit> 
</xsl:template> 
```

然后删除 DBApplicationMiscDetails 成为一项简单的任务

```
<xsl:template match="DBApplicantMiscDetails"> 
     <xsl:apply-templates /> 
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Data"> 
        <Data> 
            <LimitDetails> 
                <xsl:apply-templates /> 
            </LimitDetails> 
        </Data> 
    </xsl:template>

    <xsl:template match="CorpAppLimitDetailsBO"> 
        <Limit> 
            <xsl:apply-templates /> 
        </Limit> 
    </xsl:template> 

    <xsl:template match="DBApplicantMiscDetails"> 
            <xsl:apply-templates /> 
    </xsl:template> 

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<FIXML>
   <Header>
      <RequestID>ReqID8942</RequestID>
      <RequestType>DocGen</RequestType>
      <Version>10.6</Version>
      <BankId>01</BankId>
      <ChannelId>LOS</ChannelId>
   </Header>
   <Body>
      <Data>
         <LimitDetails>
            <Limit>
               <ApprovedLimitHomeCCY>100.0</ApprovedLimitHomeCCY>
               <ApprovedLimitCCY>INR</ApprovedLimitCCY>
               <ApprovedLimit>100.0</ApprovedLimit>
               <LimitClassification>ROOT</LimitClassification>
               <APPLICANTMISCID>400000</APPLICANTMISCID>
               <APPLICANTID>400030</APPLICANTID>
               <MISCTYPE>APPLIED</MISCTYPE>
            </Limit>
         </LimitDetails>
      </Data>
   </Body>
</FIXML> 
```

# javascript - express/NodeJS 上的 CORS 问题，Internet Explorer 不提供服务

> ID：12812973
> 
> 赞同：2
> 
> 时间：2012-10-10T06:06:56.797
> 
> 标签：javascript, node.js, backbone.js, express, cors

我有一个在 Express/NodeJS 上编写的基于 REST 的服务。我已经为 CORS (Cross Origin Resource Sharing) Implementation 编写了代码。并且可以从 chrome、firefox 等浏览器使用服务。但不能从 Internet Explorer 使用，（我使用的是 IE9，我检查了 IE-10，CORS 错误消息仍然存在于控制台中）

CODE FROM routes.js 文件在节点服务器端

```
var config = require('./config.js');

exports.setup = function (params) {

var controllers = params.controllers;
var app = params.app;

// CORS (Cross Origin Resource Sharing) Implementation 
app.all('/*', function(req, res, next) {
res.header("Access-Control-Allow-Credentials", config.responseSettings.AccessControlAllowCredentials);
res.header("Access-Control-Allow-Origin", (req.headers.origin) ? req.headers.origin : config.responseSettings.AccessControlAllowOrigin);
res.header("Access-Control-Allow-Headers", (req.headers['access-control-request-headers']) ? req.headers['access-control-request-headers'] : "x-requested-with");
res.header("Access-Control-Allow-Methods", (req.headers['access-control-request-method']) ? req.headers['access-control-request-method'] : config.responseSettings.AccessControlAllowMethods);
next();
});

app.get('/', function(req, res) {
res.render('index', { title: 'Welcome })
});

function auth(req, res, next) {
    if (req.session.UserId || (req.query.apikey && config.apikeys.indexOf(req.query.apikey) > -1)) {
        next();
    } else {
        res.send(401);
    }
}

app.get('/Session/:id?', controllers.SessionController.getSession);
app.post('/Session', controllers.SessionController.createSession);
app.del('/Session/:id', controllers.SessionController.deleteSession);
...
} 
```

以下是 config.jf 文件的代码

```
module.exports = {
"db": {
    "mongodb": "mongodb://admin:XYX123@localhost/xyx",
    "username": "abc",
    "password": "abc123",
    "database": "abcdb",
    "server": "localhost"
},
"cookiesecret": "TWFuIGlzIGRpc3Rpbmd1aXNoZWQsIG5vdCBvbmx5IGJ5IGhpcyByZWFzb24sIGJ1dCBieSB0aGlz",
"responseSettings": {
    "AccessControlAllowOrigin": "*",
    "AccessControlAllowHeaders": "X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version",
    "AccessControlAllowMethods": "POST,GET,PUT,DELETE",
    "AccessControlAllowCredentials": true
},
"apikeys": ['587c57365b54e8283fd6b1ac24acf29d', '4de04266bdd87410de698cfc33c55d68', '232c0252cee5e97148636ee2efd6ee94'], //only 1 is used now

}; 
```

这是我的 server.js(app.js) 文件 // 配置

```
app.configure(function () {
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(express.cookieParser());
app.use(express.session({ // to set a time here only for session expire
    secret: config.cookiesecret,
    store: new MongoStore({ db: config.db.database, host: config.db.server, username:     config.db.username, password: config.db.password })
}));
app.use(app.router);
app.use(express.static(__dirname + '/public'));
});

app.configure('development', function () {
app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function () {
app.use(express.errorHandler());
});

// Routes

routes.setup({
'controllers': controllers,
'app': app
});

app.listen(process.env.port || 3000);
console.log("Express server listening on port %d in %s mode", app.address().port,  app.settings.env); 
```

无法从 IE 获取服务。这是我在这个堆栈中做的第一个应用程序，我的理解有限。请提出一个解决方案。

客户端在 Backbonejs 中完成：这是来自客户端的代码

```
define([
'config',
'jquery',
'underscore',
'backbone'
], function (config, $, _, Backbone) {

var SessionModel = Backbone.Model.extend({

    urlRoot: config.BaseUrl + '/Session',

    initialize: function () {

        var that = this;

        $.ajaxPrefilter(function (options, originalOptions, jqXHR) {

            options.xhrFields = {
                withCredentials: true
            };
        })

    },

    login: function (creds, callback) {

        // Do a POST to /session and send the serialized form creds
        this.save(creds, {
            success: callback
        });
    },

    logout: function (callback) {
        // Do a DELETE to /session and clear the clientside data

        var that = this;
        this.destroy({
            success: function (model, resp) {
                model.clear()
                model.id = null;

                // Set auth to false to trigger a change:auth event
                // The server also returns a new csrf token so that
                // the user can relogin without refreshing the page

        that.set({ auth: false });
                callback();
            }
        });
    },

    getAuth: function (callback) {

        // getAuth is wrapped around our router
        // before we start any routers let us see if the user is valid
        this.fetch({

            //success: callback
            success: function (req, res) {
        //alert("success");
                callback();
            },
            error: function (err) {
                //alert("error");
                callback();
            }
        });
    }

});

return new SessionModel;
}); 
```

“getAuth”是首先运行的函数，它会发出警报——在 chrome 和 firefox 上运行时成功，但会从 IE 发出错误警报

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:53:30.880

正如[Bill](https://stackoverflow.com/users/1029936/bill)所评论的，IE 使用 XDR。您正在寻找的解决方案在这里：[https ://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/xdr.js)

基本上，我在我的一个初始 JS 文件（加载 jQuery 之后）上有该代码，这样就可以解决问题。

# php - Zend Framework 2 导航

> ID：12812979
> 
> 赞同：0
> 
> 时间：2012-10-10T06:07:06.867
> 
> 标签：php, zend-framework2

为什么 vew 助手会复制菜单显示，尽管我给了他一组不同的数据。显示两次菜单“navigation1”

```
<?php echo $this->navigation('navigation1')->menu() ?>
<?php echo $this->navigation('navigation2')->menu() ?> 
```

但以下代码分别显示不同的菜单

```
<?php //echo $this->navigation('navigation1')->menu() ?>
<?php echo $this->navigation('navigation2')->menu() ?> 
```

和

```
<?php echo $this->navigation('navigation1')->menu() ?>
<?php //echo $this->navigation('navigation2')->menu() ?> 
```

为什么会发生这种情况，我该如何避免这种情况？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T22:26:57.597

你能发布你用来组装导航的工厂和配置数组吗？您所显示的内容应该可以正常工作，因此问题出在其他文件之一中，但我必须查看它们以帮助您。

# php - “SQL 注入”问题阻止正确的表单提交 - PHP

> ID：12812980
> 
> 赞同：0
> 
> 时间：2012-10-10T06:07:07.757
> 
> 标签：php, forms

所以我一直在检查我能想到的一切，以确保我的输入字段都不受任何类型的 SQL 注入的影响。好消息是他们很安全。坏消息是有一个标签将表单提交弄乱了，它甚至不应该触及，我一生都无法弄清楚原因。

这是使用的确切 html（它在模板文件中，所以请原谅`{$variables}`：

```
<div width="100%">
{$content}

{if $show_form != false}
    <table class='Tfs_forum TFS_body ui-corner-all'>
    <thead><tr><th class="TFS_header ui-corner-all">{$table_header}</th></tr></thead>
    <tbody><tr><td class="TFS_userinfo loginlink ui-state-default ui-corner-all">
        BBCode enabled. HTML will be parsed.<br><center>
        <button type="button" onclick="addtoreply('[p]','[/p]')">Paragraph</button>
        <button type="button" onclick="addtoreply('[b]','[/b]')"><b>Bold</b></button>
        <button type="button" onclick="addtoreply('[i]','[/i]')"><i>Italic</i></button>
        <button type="button" onclick="addtoreply('[u]','[/u]')"><u>Underline</u></button>
        <button type="button" onclick="addtoreply('[s]','[/s]')"><s>Strikethrough</s></button>
        <button type="button" onclick="addtoreply('[size=20px]','[/size]')">Font Size</button>
        <button type="button" onclick="addtoreply('[color=red]','[/color]')">Font Color</button>
        <button type="button" onclick="addtoreply('[center]','[/center]')">Center Text</button>
        <button type="button" onclick="addtoreply('[url=]','[/url]')">Link</button>
        <button type="button" onclick="addtoreply('[img]','[/img]')">Image</button>
        <button type="button" onclick="addtoreply('[list]','[/list]')">List</button>
        <button type="button" onclick="addtoreply('[*]','')">List item</button>
    </center></td></tr>
    <form method="post" action="{$submit_url}">
    <tr><td>
        <input type="hidden" name="forum" value="{$forum_id}"><div style="margin-left:10%;"><label>Topic title: <input type="text" name="new_post_title" value="{$title}"></label></div>
    </td></tr>
    <tr><td>
        <label><div style="margin-left:10%; margin-right:10%;">Content:<textarea id="replybox" style="width: 100%; height: 150px;" name="new_post_content">{$formcontent}</textarea></label></div>
    </td></tr>
    <tr><td>
        <div style="display: inline-block; float: right;"><button type="submit" name="new_post_submit"><span class="save"></span>Submit</button></div>
    </td></tr></tbody>
    </form></table>
{/if}       

</div> 
```

好的，这是执行的整个 php 脚本，直到它看到没有发布数据（没有发布任何论坛字段）：

```
<?php
class TForumSystem_NewPost extends PHPDS_controller
{

public function execute()
{
    include("BBCode.class.php");
    include("includes.class.php");
    $this->template->addCSSToHead( Allincludes::css() );
    $this->template->addJsToHead( Allincludes::js() );

    //Main variables here
    $db_category = "***";
    $db_forums = "****";
    $db_posts = "****";
    $db_replies= "****";
    // $db_posts, $db_category, $db_forums, $db_replies;
    //$forum_view_url = $this->navigation->buildURL('forum-view');
    $view = $this->factory('views');
    $maincontent = "";
    $forum_link = ($this->navigation->buildURL('main-forum'));
if(!isset($_POST['forum'])) {
 $this->template->info("Invalid forum, please navigate to the main <a href=\"$forum_link\">forum</a>");
 $view->set('content', "Invalid forum, please navigate to the main <a href=\"$forum_link\">forum</a>"); $view->show();
} 
```

问题是当我在标题字段中使用诸如`' or 1='1`或之类的东西时`' or 1=1--`，没有任何数据被发布，我目前正在使用 print_r($_POST) 来查看正在提交的内容，但什么也没有。

不过，它对于任何其他语句都可以完美运行，而且我还应该提到这个脚本在我的本地机器上完美运行，但是在使用我的主机时，我遇到了上述问题。

这是我测试过的所有输入的列表：

```
' or 1='1
' or 1=1--
'" or 1=1--
' or 0=0 --
' or 'a'='a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:01:46.650

嗯，我有点想通了。在我在 php 变量中创建论坛然后将其输出到模板之前，我将表单直接放入模板中，它似乎已经工作了，感谢所有帮助！

编辑：没关系，我们有新的证据。它在我的本地机器上运行良好，但它仍然无法在我的主机上运行..我在这里迷路了..

# html - html 标签中的 text='<%#eval()>' 是什么？

> ID：12812983
> 
> 赞同：0
> 
> 时间：2012-10-10T06:07:19.737
> 
> 标签：html

但是我还没有意识到 HTML 中这两个语句之间的区别是什么：

```
text='<%#Eval("some thing")>'

text='<%#Bind("some thing")>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:31:58.617

请查看 MSDN 上的示例，在这种情况下使用中继器

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)

还

> 如何：绑定到模板化控件中的数据

[http://msdn.microsoft.com/en-us/library/95k0273d(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/95k0273d(v=vs.80).aspx)

# regex - 正则表达式来分隔 HTML GET 参数

> ID：12812985
> 
> 赞同：1
> 
> 时间：2012-10-10T06:07:35.373
> 
> 标签：regex, string, pcre, string-matching

如何使用正则表达式来分隔`GET`URI 中的参数并提取某个参数？具体来说，我试图获取`v=`YouTube 观看 URI 的一部分。我想出了`youtube.com\/watch\?(\w+=[\w-]+&?)*(v=[\w-]+)&?*(\w+=[\w-]+&?)*`，但这看起来非常重复。有没有更好（更短？）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:33:59.523

一个简化的正则表达式：

> ^(?:http://www.)?youtube.[^/]+?/watch?(. *?)(v=([^&]+))(.* )$

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:18:57.453

我知道有很多类似的问题，但没有一个*完全*符合我的要求。我正在寻找能够*仅*提取视频 ID 的东西——无论它是参数列表中的第一个、最后一个还是隐藏在其他参数列表中。我所见过的还没有像那样工作。

作为参考，我正在使用[这个 Web 应用程序](http://www.rubular.com)进行测试，以及这组测试 URI：

```
http://www.youtube.com/watch?v=XXXXXXXXXXX
http://www.youtube.com/watch?v=XXXXXXXXXXX&feature=results_video&playnext=1&list=XXXXXXXXXXXXXXXXXX
http://www.youtube.com/watch?feature=player_embedded&v=XXXXXXXXXXX#!
http://www.youtube.com/watch?annotation_id=annotation_xxxxxx&feature=iv&src_vid=XXXXXXXXXXX&v=XXXXXXXXXX 
```

各位 Stack Exchangers，我提出以下正则表达式来解决这个问题：
`youtube.com\/watch\?(\S*)v=([\w-]+)`

# iphone - 如何判断 NSOperation 执行了多长时间？

> ID：12812987
> 
> 赞同：0
> 
> 时间：2012-10-10T06:07:40.283
> 
> 标签：iphone, objective-c, ios, nsoperation

有没有办法知道 NSOperation 执行了多长时间？

```
 for (NSOperation *operation in [self.operationQueue operations]) {
     // how to tell how long the operation has been executing?
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:44:53.770

制作两个变量，NSTimeInterval。

```
NSTimeInterval t1, t2; 
```

当操作开始时，您运行：

```
t1 = NSTimeIntervalSince1970; 
```

当它完成时

```
t2 = NSTimeIntervalSince1970; 
```

然后你只需做

```
NSTimeInterval t3 = t2 -t1; 
```

不，你知道这确实运行了多少秒。这是粗略的，也许有更好的方法来获得准确的数字，但我建议你使用像 Instruments 这样的分析器。

但这是一个很好的措施，因为它非常简单，并且不会像分析器那样消耗任何 CPU 功率。

我还建议在标准 C 库中搜索一些 cpu 滴答声或类似的东西。

享受。

# android - Android：需要在睡眠后恢复游戏

> ID：12812988
> 
> 赞同：1
> 
> 时间：2012-10-10T06:07:42.390
> 
> 标签：android, android-activity, activity-lifecycle

我希望我的游戏能够在手机进入睡眠状态（用户按下电源按钮）之前从其左侧继续。我的游戏可以用主页按钮正常工作。当用户按下主页按钮并再次打开游戏时，游戏会从应有的位置开始。但如果用户按下电源按钮（在 google htc nexus one 上），它会崩溃。但是当我在三星 Galaxy 平板 10 上测试游戏时，它运行良好。

在`LogCat`中，我可以观察到当用户按下 Galaxy 平板电脑上的电源按钮时，会调用**onPause() 。**当用户再次按下**onResume()**时，这是正常的。

但是在google nexus上，当用户按下电源按钮时，**onPause（），onResume（），onPause（）**在进入睡眠之前分别被调用。当用户再次按下电源按钮时，不会调用任何内容。

请建议我该如何解决这个问题。提前致谢

**编辑**

看起来这个问题仅在默认情况下具有纵向方向的设备上观察到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:33:39.860

我设法通过回答这个问题来解决[这个](https://stackoverflow.com/questions/6772988/ondestroy-gets-called-each-time-the-screen-goes-on)问题。应用此解决方案后，系统不再崩溃。但是在系统唤醒之后，宽度和高度被交换了。所以另外我有覆盖

```
@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    if(width>height)
         gl.glViewport(0, 0, width, height);
    else gl.glViewport(0, 0, height, width);

} 
```

通过这种方式，我将游戏恢复为横向。

# ios - Showing Terms and Conditions in an iPad App

> ID：12812999
> 
> 赞同：2
> 
> 时间：2012-10-10T06:08:36.450
> 
> 标签：ios, ipad

My customer wants to show a Terms & Conditions pop-over when someone uses the iPad App for the first time. I have done it but just want to make sure that I'm not breaking the Apple guidelines.

Is it acceptable if the App open up a Terms& Conditions popup once and ask the user to accept it to access the resources?

Any input would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T06:19:33.973

You can consider End User Licence Agreement. This is for the applications on app store which require the 'Terms and Conditions Agreement' for the app. Here is a beautiful post about this.

[http://peninsulawyer.com/blog/2011/8/23/app-developers-dont-sweat-the-small-print.html](http://peninsulawyer.com/blog/2011/8/23/app-developers-dont-sweat-the-small-print.html)

I think it should serve your purpose